# StackOverflow 问答 15466000-15466999

# javascript - 如何忽略除了一系列快速 Javascript 事件中的最后一个事件之外的所有事件？

> ID：15466000
> 
> 赞同：5
> 
> 时间：2013-03-17T20:43:19.877
> 
> 标签：javascript, events, keyboard-events

由于“changeCursor”事件（我使用的是 ACE 编辑器），我的一个脚本有时会调用一个函数。当我多次按下光标时，这会减慢光标的移动速度。

我真的很想调用这个函数，但是如果只在我的光标停止移动时调用它就可以了（即我不需要查看中间状态）。

是否有一种标准方法可以忽略除最后一个事件之外的所有事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T20:45:51.223

经典的方法是使用短暂的超时：

```
var cursorTimer;
function changeCursor() {
    clearTimeout(cursorTimer);
    cursorTimer = setTimeout(function() {
        // process the actual cursor change here
    }, 500);

} 
```

您的常规代码可以在`changeCursor()`每次更改时继续调用（就像现在一样），但内部的实际代码`setTimeout()`仅在最后 500 毫秒内没有发生光标更改事件时才会执行。您可以根据需要调整该时间值。

知道事件已经停止的唯一方法是等待一小段时间并且没有检测到进一步的运动（这就是这样做的）。滚动事件通常使用类似的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:33:51.660

这个问题可能有点过分了，但请查看 RxJS：[http](http://reactive-extensions.github.com/RxJS/#What) ://reactive-extensions.github.com/RxJS/#What is RxJS?

它为 JavaScript 中的“查询/操作”事件流添加了一些非常强大的方法。 [https://github.com/Reactive-Extensions/RxJS/wiki/Observable](https://github.com/Reactive-Extensions/RxJS/wiki/Observable)

在这种情况下，“节流”方法就是您所追求的。这是一个使用 Throttle 和 keyup 事件来创建维基百科匹配的自动完成的示例。 [https://github.com/Reactive-Extensions/RxJS-Examples/blob/master/autocomplete/autocomplete.js](https://github.com/Reactive-Extensions/RxJS-Examples/blob/master/autocomplete/autocomplete.js)

```
// Get all distinct key up events from the input and only fire if long enough and distinct
var keyup = Rx.Observable.fromEvent(input, 'keyup').select(function (e) {
    return e.target.value; // Project the text from the input
})
.where(function (text) {
    return text.length > 2; // Only if the text is longer than 2 characters
})
.throttle(
    750 // Pause for 750ms
)
.distinctUntilChanged(); // Only if the value has changed 
```

# html - 菜单在不应该的时候下拉？

> ID：15466001
> 
> 赞同：0
> 
> 时间：2013-03-17T20:43:22.573
> 
> 标签：html, css

这个页面的顶部导航是我正在处理的：[http ://www.envisionforce.com/newsletter/](http://www.envisionforce.com/newsletter/)

出于某种原因，当您将鼠标悬停在我需要从该页面中删除的导航上时，会显示一个下拉菜单。

这是用于顶部导航的代码：

```
<div class="menu-main-menu-container"><ul id="main_menu" class="nav"><li id="menu-item-22" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-22"><a href="http://www.envisionforce.com">HOME</a></li>
<li id="menu-item-1966" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1966"><a href="http://www.envisionforce.com/build">SERVICES</a></li>
<li id="menu-item-2160" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2160"><a href="http://www.envisionforce.com/seo-resellers/">RESELLERS</a></li>
<li id="menu-item-2159" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2159"><a href="http://www.envisionforce.com/affiliate-program/">AFFILIATES</a></li>
<li id="menu-item-19" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-19"><a href="http://www.envisionforce.com/contact-us/">CONTACT</a></li>
</ul></div> 
```

我真的很想远离编辑 CSS 文件本身。有什么办法可以在上面的代码中使用内联 CSS 解决这个问题？如果不可能，在 CSS 文件中修复它的解决方案将非常受欢迎:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:48:24.943

您需要从 CSS 中删除以下属性

```
.nav li a:hover {
    background: none repeat scroll 0% 0% rgb(0, 0, 0);
}

.nav li a 
{
  border-left: 1px solid rgb(22, 45, 61);
  border-right: 1px solid rgb(35, 56, 71);
} 
```

**第二种选择：**

您可以在`<style>`标签下的页面上编写此 CSS

```
.nav li a:hover
{
  background: none;
  border: none;
}

.nav li a 
{
  border:none;
} 
```

这将覆盖您的外部 css 属性，并将在悬停时删除该子菜单。

# linux - csh中的switch语句

> ID：15466002
> 
> 赞同：1
> 
> 时间：2013-03-17T20:43:26.333
> 
> 标签：linux, switch-statement, csh

我正在尝试制作一个 switch 语句以在 tcsh 中工作，但我不确定它为什么不起作用。我在屏幕上显示一个菜单，如果选择该选项，它会显示价格，然后返回顶部并重复，直到选择退出选项。

```
#!/bin/csh

clear          
echo -n "Petes A Pizza                 "        
echo -n "                 Menu           "      
echo -n "                                     " 
echo -n "                 Make a selection    " 
echo -n "                         "     
echo -n "               A. Speciality Pizza     "     
echo -n "               B. Veggi Lovers Pizza   "     
echo -n "               C. Meat Lovers Pizza    "       
echo -n "               D. Hawaiian Pizza       "       
echo -n "               E. Cheese Pizza         "     
echo -n "               F. Exit                 "     

set a = $<                      

switch ($a)                    

        case [A] :        
 set A = ((7.99 + 0.07))
                echo $A
                sleep 5
                goto top
        case [B] :              #they choose option 2
                set B = ((8.99 * 0.07) + 8.99)
                echo $B
                sleep 5
                goto top
        case [C] :              #they choose option 3
                set C = ((6.99 * 0.07) + 6.99)
                echo $C
                sleep 5
                goto top
        case [D] :              #they choose option 4
                set D = ((8.49 * 0.07) + 8.49)
                echo $D
                sleep 5
                goto top
        case [E] :              #they choose option 5
                set E = ((3.99 * 0.07) + 3.99)
                echo $E
                sleep 5
        case [F] :             
                exit 0          
                breaksw         

        endsw
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T23:01:12.070

这里有一些建议应该足以帮助您使其正常工作。

更改`#!/bin/csh`为`#!bin/csh -f`。这告诉 shell*不要*读取您的`~/.cshrc`文件，这样可以节省时间并避免混淆。（例如，如果您不小心编写了依赖于您在 中定义的别名的代码，那么`.cshrc`您的脚本将不适用于其他任何人。）

如果您*必须*清除屏幕，`clear`命令就是执行此操作的方法——但为什么呢？如果我想在运行你的脚本之前清除我的屏幕，我会自己做，非常感谢。如果我的屏幕上有我不想丢失的信息，当你的脚本决定为我删除它时，我会很生气。

将所有`echo -n`s 更改为 just `echo`。该`-n`选项告诉`echo`打印其输出而没有尾随换行符；您的整个菜单将打印在一行上。

案例标签中的方括号是不必要的。`case A :`与 的意思相同`case [A] :`。请注意，您要求用户以大写形式提供输入，这可能不方便。

```
set A = ((7.99 + 0.07))
...
set B = ((8.99 * 0.07) + 8.99) 
```

这些是不一致的。看起来您正在尝试计算基本价格加上 7% 的销售税。对于案例 B，一个更简单的表达式是`8.99 * 1.07`。

csh 无法识别此`(( ... ))`语法；我想知道你从哪里得到它的想法。csh 可以使用以下`@`命令进行算术运算：

```
@ x = 2 + 2
@ x ++ 
```

但它只对整数起作用。该`bc`命令可以进行浮点计算。你可以这样写：

```
set B = `echo 'scale=5; 1.07 * 8.99' | bc` 
```

或者，更简单地说：

```
set B = `echo '1.07 * 8.99' | bc -l 
```

但`bc -l`可能会给你比你想要的更多的数字。 `man bc`有关该`bc`命令、其语法及其工作方式的更多信息。请记住，csh 变量的值是字符串，而不是数字。

（我不确定`bc`是完成这项工作的最佳工具。）

最后，csh 并不是编写脚本的最佳语言。我使用它的时间比我承认的要长，有时我不得不通过反复试验来找出给定语法的行为方式；在许多情况下，语法定义不明确，并且手册页并不总是清楚地说明问题。

推荐阅读： Tom Christiansen 的[“Csh Programming Considered Harmful”](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)。

# android - android AsyncTask 创建

> ID：15466008
> 
> 赞同：-1
> 
> 时间：2013-03-17T20:43:55.780
> 
> 标签：android, android-asynctask, httprequest

我正在尝试通过 http 发布请求发布一些数据，并了解整个过程。我在 android 开发者网站上红色文档，我看过一些 youtube 教程，但我仍然有一些我不熟悉的点。我找到了以下登录示例代码，但它不在 AsyncTask 中。我知道它必须是。但是，当我尝试使用 AsyncTask 执行此操作时，我的参数定义错误并且我被卡住了。如果我想将一些数据传递给 http 服务器上的 .php 脚本，任何人都可以帮助我并解释它是如何工作的吗？这是我的代码：（编辑后，这是我对 AsyncTask 的尝试）：

```
 public class AndroidLogin extends Activity implements OnClickListener{

Button ok,back,exit;
TextView result;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_android_login);

 // Login button clicked
    ok = (Button)findViewById(R.id.btn_login);
    ok.setOnClickListener(this);

    result = (TextView)findViewById(R.id.lbl_result);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_android_login, menu);
    return true;
}

private class Login extends AsyncTask <String,String,String>{

    @Override
    protected String doInBackground(String... params) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();

        /* login.php returns true if username and password is equal to saranga */
        HttpPost httppost = new HttpPost("http://www.mysite.com/login.php");

        try {
            // Add user name and password
         EditText uname = (EditText)findViewById(R.id.txt_username);
         String username = uname.getText().toString();

         EditText pword = (EditText)findViewById(R.id.txt_password);
         String password = pword.getText().toString();

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("username", username));
            nameValuePairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
            Log.w("SENCIDE", "Execute HTTP Post Request");
            HttpResponse response = httpclient.execute(httppost);

            String str = inputStreamToString(response.getEntity().getContent()).toString();
            Log.w("SENCIDE", str);

            if(str.toString().equalsIgnoreCase("true"))
            {
             Log.w("SENCIDE", "TRUE");
             result.setText("Login successful");   
            }else
            {
             Log.w("SENCIDE", "FALSE");
             result.setText(str);             
            }

        } catch (ClientProtocolException e) {
         e.printStackTrace();
        } catch (IOException e) {
         e.printStackTrace();
        }

        StringBuilder inputStreamToString(InputStream is); 
            String line = "";
            StringBuilder total = new StringBuilder();
            // Wrap a BufferedReader around the InputStream
            BufferedReader rd = new BufferedReader(new InputStreamReader(is));
            // Read response until the end
            try {
             while ((line = rd.readLine()) != null) { 
               total.append(line); 
             }
            } catch (IOException e) {
             e.printStackTrace();
            }
            // Return full string
            return total;

        return null;
    }

}

public void onClick(View view) {

    new Login().execute();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:05:49.770

首先，方法签名`protected String doInBackground(String... params)`意味着`params`需要是一个`String`数组。

其次，永远不要在...的方法中做类似以下的`doInBackground(...)`事情`AsyncTask`

```
 EditText uname = (EditText)findViewById(R.id.txt_username);
 String username = uname.getText().toString();

 EditText pword = (EditText)findViewById(R.id.txt_password);
 String password = pword.getText().toString(); 
```

...原因是该`doInBackground(...)`方法在主 (UI) 线程的单独线程上运行，并且尝试访问 UI 元素（例如`EditText`小部件）将导致异常。相反，将这些代码行移动`onClick(...)`到`Activity`. `doInBackground(...)`然后，您可以使用以下（例如）将凭据传递给方法...

```
new Login().execute(new String[] {username, password}); 
```

...然后在`doInBackground(String... params)`方法中，`params[0]`将是用户名和`params[1]`密码。

# click - jquery点击事件解释

> ID：15466009
> 
> 赞同：0
> 
> 时间：2013-03-17T20:43:56.840
> 
> 标签：click, jquery

我正在尝试自学 jQuery，目前正在处理点击事件。据我了解，基于 id 触发点击事件的语法是

```
$("#IDname").click(function(){ //stuff goes here}) 
```

当我尝试这个时，点击事件不会触发。但是，当我将“#IDname”更改为使用“this”对象时，单击事件 DID 会触发。我不认为我想基于“this”对象触发，我仍在使用代码让处理程序以我期望的方式触发（或者直到我发现我看错了问题）。

我的问题是为什么事件会以“this”而不是 ID 触发。请参阅下面的示例代码：

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Demo</title>
    <style>
      .heading {
          font-family:"Palatino Linotype", "Book Antiqua", Palatino, serif;
      }
    </style>
  </head>

  <body>
    <script src="jquery.js"></script>
    <script>
    $( document ).ready(function() {
        <!-- Does not fire the click event -->
        $( "#shopping_list" ).click(function(event) {
            $("#shopping_list").append("<tr>");
            $("#shopping_list").append("<td>Doe</td>");
            $("#shopping_list").append("<td>Re</td>");
            $("#shopping_list").append("<td>Mi</td>");
            $("#shopping_list").append("</tr>");
        })

        <!-- Works as expected...this adds a table row when the 'Shopping List' text is clicked -->
        $( this ).click(function(event) {
            $("#shopping_list").append("<tr>");
            $("#shopping_list").append("<td>1</td>");
            $("#shopping_list").append("<td>2</td>");
            $("#shopping_list").append("<td>3</td>");
            $("#shopping_list").append("</tr>");
        })
    });

    </script>
  </body>

  <div class="heading"><h2>Shopping List</h2>
      <div class="shopping_list">
        <table>
            <tbody>
                <form>
                    <div id="shopping_list"></div>
                </form>
            </tbody>
        </table>
      </div>
  </div>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T20:52:33.563

看起来您的#shopping_list div 没有高度，因此没有收到点击。

如果您修改 #shopping_list div 以包含某些内容，或者通过 css 给它一些尺寸，它就可以工作。

```
 <form>
   <div id="shopping_list">Content</div>
 </form> 
```

这是添加了一些虚拟内容的小提琴：http: [//jsfiddle.net/Zafw6/](http://jsfiddle.net/Zafw6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:55:49.143

有多个问题：

1.  **您正在为单击事件收听错误的元素。**你听`#shopping_list`，这是一个空的 div，因此在有一些内容之前不能点击。我猜你希望标题是可点击的，所以你需要给它一个 id 或 class 并将点击监听器附加到那个。如果不是这种情况，则为该元素提供一些内容，以便可以单击它。

2.  `this`可以根据上下文有所不同。在您的情况下，**`this`指的是整个文档**。这是因为点击任何地方就足以触发事件。

3.  **您正在将 ' 添加到与`<tr>`' 相同的级别`<td>`。**实际上，单元格应该嵌套在行中。

4.  **您的`<body>`标签应该在文档的末尾**，在`<div>`.

为了向您展示如何执行此操作的示例，这里有一个演示：

## [**演示**](http://jsfiddle.net/6s4pj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:51:18.867

这与您正在操作的上下文相关。当您从 document.ready 函数中调用 $(this) 时，这指的是 dom 的根，因此当您调用 $("#someid").click 时，请使用 ' this' 在该回调中，它引用了回调所作用的元素...

试试这个：

```
$( "#someid" ).click(function(e) {
   $(this).append("<tr>");
   $(this).append("<td>Doe</td>");
   $(this).append("<td>Re</td>");
   $(this).append("<td>Mi</td>");
   $(this).append("</tr>");
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T20:57:11.137

尽可能使用链接。没有必要一次又一次地搜索节点，它会影响性能。查看这些示例

```
$(document).ready(function () {
    <!-- Does not fire the click event -->
    $("#shopping_list").click(function (event) {
        $(this).append("<tr>")
            .append("<td>Doe</td>")
            .append("<td>Re</td>")
            .append("<td>Mi</td>")
            .append("</tr>");
    })

    <!-- Or you can do it like that: -->
    $(this).click(function (event) {
        $("#shopping_list")
          .append("<tr><td>1</td><td>2</td><td>2</td><td>2</td><td>3</td></tr>");
    })
}); 
```

# actionscript-3 - 创建一个比屏幕视图更大的舞台

> ID：15466010
> 
> 赞同：0
> 
> 时间：2013-03-17T20:43:58.343
> 
> 标签：actionscript-3, flash-cs5

我正在尝试创建一个具有背景图像的舞台，称为`lvl1.jpg`. 此图像为 1920x6000 像素。我想通过创建舞台并在顶部添加玩家来开始游戏。我在玩家应该避开的关卡上放置了一些静止的敌人。

我想通过让舞台（或背景图像）和敌人在每次更新时向上移动几个像素来实现这一点。游戏文件屏幕的大小为 1000 x 600 像素。所以我的游戏类比我的屏幕尺寸大。这可能吗？如果是这样，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:25:44.090

是的，有可能，但你不应该在任何地方直接使用这么大的位图，它会破坏性能。是的，游戏类有可能大于舞台大小，以 Epic War 2 游戏为例——它有一个大的战斗场景，可以根据玩家的需求左右滚动。

为了让您制作这样的游戏类，您应该将实际的屏幕显示限制在您关卡的可见部分。为此，研究blitting技术，其核心概念是一个舞台大小的可见Bitmap对象，其BitmapData每帧重绘以显示背景、对象、玩家、怪物等。

作为第一种方法，您可以让您的`Game`类包含所有对象，包括播放器，并进行更改`game.y`以使播放器始终位于舞台边界内。

# html - Bootstrap 移动视图未加载

> ID：15466013
> 
> 赞同：0
> 
> 时间：2013-03-17T20:44:33.910
> 
> 标签：html, twitter-bootstrap, iso, html-heading

当我通过移动设备加载我的应用程序时，怎么会`h1`被切断 - 我正在使用 Twitter BS：

**HTML：**

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap-responsive.min.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="css/custom.css" />
        <title>Birthday App</title>
        <script src=" https://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js"></script>
      <script src="cordova-2.5.0.js"></script>
      <script src="js/index.js"></script>
      <script src="js/app.js"></script>
      <script src="js/bootstrap.js"></script>
      <script>
        app.initialize();
      </script>
      </head>
<body ng-app="birthdayToDo" ng-controller="main">
    <div id="wrap">

      <!-- Begin page content -->
      <div class="container">
        <div class="page-header">
          <h1>Birthday Reminders</h1>
        </div>
            <ul class="unstyled" ng-repeat="bday in bdays">
                <li>
                  <span ng-hide="editing" ng-click="editing = true">{{bday.name}} | {{bday.date}}</span>
                  <form ng-show="editing" ng-submit="editing = false">
                    <label>Name:</label>
                    <input type="text" ng-model="bday.name" placeholder="Name" ng-required/>
                    <label>Date:</label>
                    <input type="date" ng-model="bday.date" placeholder="Date" ng-required/>
                    <br/>
                    <button class="btn" type="submit">Save</button>
                    <button class="btn" type="button" ng-click="remove($index)">Delete</button>
                  </form>
                </li>

            </ul>

           <form ng-show="visible" ng-submit="newBirthday()">
            <label>Name:</label>
            <input type="text" ng-model="bdayname" placeholder="Name" ng-required/>
            <label>Date:</label>
            <input type="date" ng-model="bdaydate" placeholder="Date" ng-required/>
            <br/>
            <button class="btn" type="submit">Save</button>
          </form>
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <a class="btn" ng-click="visible = true"><i class="icon-plus"></i>Add</a>
      </div>
    </div>
    </body>
    </html> 
```

![在此处输入图像描述](../Images/af9c368fa9378948c4657e6a90910673.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:33:25.613

响应式样式表需要覆盖 bootstrap.css 中的一些样式。在 bootstrap.css 之后包含 bootstrap-responsive css 应该可以解决您的问题。

# c# - Sqlite 无法正确比较十进制数

> ID：15466017
> 
> 赞同：1
> 
> 时间：2013-03-17T20:44:44.680
> 
> 标签：c#, .net, sqlite, system.data.sqlite

我遇到了一个奇怪的问题，即数字列上的比较没有给出正确的结果。输入是相同的，但是如果应用了 coalesce() 函数，突然没有行匹配。

该表定义为：

```
CREATE TABLE orders
(
    orderid        INT NOT NULL,
    freight        NUMERIC,
    PRIMARY KEY (orderid),
); 
```

我正在使用这种方法测试查询：

```
private void Problematic(IDbConnection connection)
{
    using (var cmd = session.Connection.CreateCommand())
    {
        cmd.CommandText =
            @"select order0_.OrderId as OrderId55_,
                     order0_.Freight as Freight55_,
              from
                    Orders order0_
              where
                    coalesce(order0_.Freight, @p0) > @p1";  // ALT 1
                 // order0_.Freight > @p1";                 // ALT 2

        var p0 = cmd.CreateParameter();
        p0.ParameterName = "p0";
        p0.DbType = DbType.Decimal;
        p0.Value = 100;
        cmd.Parameters.Add(p0);

        var p1 = cmd.CreateParameter();
        p1.ParameterName = "p1";
        p1.DbType = DbType.Decimal;
        p1.Value = 0;
        cmd.Parameters.Add(p1);

        using (var reader = cmd.ExecuteReader())
        {
            // ALT 1 above yields 0 result rows.
            // ALT 2 above yields 830 result rows.
        }
    }
} 
```

该`Freight`列可以为空，但所有实际值都不为空且大于 0。因此，我希望这两个查询生成相同数量的匹配行。

我正在使用此查询分析类型：

```
select
    typeof(@p0),
    typeof(@p1),
    typeof(coalesce(order0_.Freight, @p0)),
    typeof(order0_.Freight),
    coalesce(order0_.Freight, @p0) > @p1,
    order0_.Freight > @p1
from
    Orders order0_ 
```

结果（对于所有行）是：

```
 typeof(@p0)                              => text
    typeof(@p1)                              => text 
    typeof(coalesce(order0_.Freight, @p0))   => real
    typeof(order0_.Freight)                  => real
    coalesce(order0_.Freight, @p0) > @p1     => 0
    order0_.Freight > @p1                    => 1 
```

**谁能解释为什么不同的表达式会产生不同的结果？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:04:40.463

显然，您的数据库驱动程序转换`DBType.Decimal`为文本。

改为使用`DBType.Double`。

# asp.net-mvc - 系统返回：（110）连接超时

> ID：15466018
> 
> 赞同：1
> 
> 时间：2013-03-17T20:45:06.930
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7

当我打开我的网站时，它显示

```
Connection to 173.0.139.119 failed.
The system returned: (110) Connection timed out 
```

什么是问题？从我的 Web 应用程序或服务器？

# 笔记：

当我使用代理打开我的网站时，它工作正常

# authentication - 使用 Spring Security 自定义 Http 授权标头

> ID：15466021
> 
> 赞同：3
> 
> 时间：2013-03-17T20:45:09.047
> 
> 标签：authentication, grails, spring-security, http-headers, sha1

我们正在使用 Grails 框架构建一个 Restful 服务，并使用 Spring Security 插件为其提供安全性。当您想使用自定义授权标头进行身份验证时，我想与大家一起检查最佳方法。可以在此处阅读有关此方法的更多信息 [自定义 HTTP 授权标头](https://stackoverflow.com/questions/7802116/custom-http-authorization-header)

在我的例子中，客户端 ID 和密码存储在 Ldap 中，并且标头带有 SHA1 加密。使用 Spring Security 实现这一点的最佳方法是什么？

我也在 Grails 邮件列表中问过同样的问题。

任何见解都会有所帮助。谢谢。

~阿比

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T06:40:50.223

您必须实现自己的过滤器、身份验证提供程序和身份验证令牌（将数据传递给您的提供程序）。

看：

*   什么是安全过滤器链 - [http://static.springsource.org/spring-security/site/docs/3.0.x/reference/security-filter-chain.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/security-filter-chain.html)
*   身份验证提供程序 - [http://static.springsource.org/spring-security/site/docs/3.0.x/reference/core-services.html#core-services-dao-provider](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/core-services.html#core-services-dao-provider)
*   如何将您的过滤器注册到 Spring Secutory Core 插件 - [http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/16%20Filters.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/16%20Filters.html)
*   如果您需要示例，请查看 Spring Security Core 的一些现有身份验证子插件 - [http://grails.org/plugin/spring-security-core](http://grails.org/plugin/spring-security-core)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T11:26:58.007

项目清单

如果您使用的是基本授权标头，则以下配置适用于您在 context-security.xml 文件中。

```
< http  auto-config="true" use-expressions="true" pattern="/project/api/**">
        < intercept-url pattern="/**" access="isFullyAuthenticated()" requires-channel="${security.requires.channel}" method="POST"/>
        < custom-filter ref="basicAuthenticationFilter" position="PRE_AUTH_FILTER"/>
    < /http>    
    < beans:bean id="basicAuthenticationFilter" class="org.springframework.security.web.authentication.www.BasicAuthenticationFilter">
        < beans:property name="authenticationManager" ref="authenticationManager" />
        < beans:property name="authenticationEntryPoint" ref="authenticationEntryPoint" />      
    < /beans:bean> 
```

我对其余服务使用了相同的方法但是您需要注意，无论您使用什么方案来编码用户名和密码，都应该在过滤器中使用相同的方案来解码“授权”标头信息。如果您使用一些自定义方案来编码“授权”标头，那么您需要扩展“ **BasicAuthenticationFilter** ”并提供“授权”标头的适当解码

# java - Java 网络、错误检查和数据库

> ID：15466022
> 
> 赞同：1
> 
> 时间：2013-03-17T20:45:09.047
> 
> 标签：java, javascript, database, network-programming

Java 网络

您将获得一个简单的 Java GUI，并要求您通过添加错误检查和建立数据库连接来对其进行修改。

有谁知道错误检查和数据库连接的任何代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:52:23.553

我认为您的意思是异常处理，可以像这样在 java 中轻松完成：

```
try {
   //the code
} catch (Exception e) {
   e.printStackTrace(); //print exception
} 
```

至于数据库连接，通常分步进行：

**JDBC（例如）**

*   加载驱动程序
*   建立连接
*   执行语句
*   获得结果
*   关闭数据库连接

因为我很不确定你到目前为止做了什么，所以我会给出一个可以很好地处理这个例子的链接（请注意这只是 JDBC，还有其他的）

[JDBC 示例](http://www.roseindia.net/jdbc/jdbc-steps.shtml)

# json - 在 Titanium 中使用 JSON 实现登录

> ID：15466023
> 
> 赞同：1
> 
> 时间：2013-03-17T20:45:18.370
> 
> 标签：json, login, titanium-mobile

我希望有人能帮助我。我有一个使用 JSON Web 服务实现的 API。我想实现登录。创建了一个用户，我需要登录该用户。那就是当我输入用户名和密码时，它必须让用户登录。

我已阅读[tutsplus](http://mobile.tutsplus.com/tutorials/appcelerator/titanium-user-authentication/)教程，但无法验证用户身份。谁能帮我吗。

这是我正在使用的代码：

```
// create tab group
var tabGroup = Titanium.UI.createTabGroup();

var win1 = Titanium.UI.createWindow({  
title:'Login',
backgroundColor:'#fff'
});

var username = Ti.UI.createTextField({
top:'10%',
borderRadius:3,
hintText:'username',
keyboardType:Titanium.UI.KEYBOARD_DEFAULT,
width:'80%',
height:'auto',
left:'10%',
right:'10%',
touchEnabled: true, 
});
win1.add(username);
var pass = Ti.UI.createTextField({
top:'30%',
borderRadius:3,
hintText:'password',
keyboardType:Titanium.UI.KEYBOARD_DEFAULT,
width:'80%',
height:'auto',
left:'10%',
right:'10%',
touchEnabled: true,
passwordMask: true  
});

win1.add(pass);
var loginBtn = Titanium.UI.createButton({  
title:'Login',  
top:'50%',  
width:'60%',  
height:'15%',  
borderRadius:1,  
font:{fontFamily:'Arial',fontWeight:'bold',fontSize:14}  
});  
win1.add(loginBtn);

var url = 'http://qudova.com/api.php?function=AuthenticateUser&u=ns.nadeem.m@gmail.com&p=qudovatest';
var json;
var loginReq = Titanium.Network.createHTTPClient();  
loginBtn.addEventListener('click',function(e)  
{  
if (username.value != '' && pass.value != '')  
{  
    // Here I will get the Token (asdfasdf....)
    loginReq.open("GET",url);  
    authstr = 'Basic ' +Titanium.Utils.base64encode(username.value +':' +pass.value); 
    loginReq.setRequestHeader('Authorization', authstr);

    loginReq.send();  
}  
else  
{  
    alert("Username/Password are required");  
}  
});
loginReq.onload = function()  
{  
    var jsonObject = JSON.parse(this.responseText);
    // Here I have made a check if the Token is returned successfully it will alert the user that he authenticated 
    if (jsonObject.Token == "asdfadsfasdfadsf")  
        {  
            alert("Authenticated");  
        }  
    else  
        {  
            alert("response.message");  
        }  
}; 
win1.open(); 
```

提前致谢。我的概念清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:02:15.980

你得到一个 JSON 数组作为响应。所以你应该访问`jsonObject[0].Token`.

```
// create tab group
var tabGroup = Titanium.UI.createTabGroup();

var win1 = Titanium.UI.createWindow({  
title:'Login',
backgroundColor:'#fff'
});

var username = Ti.UI.createTextField({
top:'10%',
borderRadius:3,
hintText:'username',
keyboardType:Titanium.UI.KEYBOARD_DEFAULT,
width:'80%',
height:'auto',
left:'10%',
right:'10%',
touchEnabled: true, 
});
win1.add(username);
var pass = Ti.UI.createTextField({
top:'30%',
borderRadius:3,
hintText:'password',
keyboardType:Titanium.UI.KEYBOARD_DEFAULT,
width:'80%',
height:'auto',
left:'10%',
right:'10%',
touchEnabled: true,
passwordMask: true  
});

win1.add(pass);
var loginBtn = Titanium.UI.createButton({  
title:'Login',  
top:'50%',  
width:'60%',  
height:'15%',  
borderRadius:1,  
font:{fontFamily:'Arial',fontWeight:'bold',fontSize:14}  
});  
win1.add(loginBtn);

var url = 'http://qudova.com/api.php?function=AuthenticateUser&u=ns.nadeem.m@gmail.com&p=qudovatest';
var json;
var loginReq = Titanium.Network.createHTTPClient();  
loginBtn.addEventListener('click',function(e)  
{  
if (username.value != '' && pass.value != '')  
{  
    // Here I will get the Token (asdfasdf....)
    loginReq.open("GET",url);  
    authstr = 'Basic ' +Titanium.Utils.base64encode(username.value +':' +pass.value); 
    loginReq.setRequestHeader('Authorization', authstr);

    loginReq.send();  
}  
else  
{  
    alert("Username/Password are required");  
}  
});
loginReq.onload = function()  
{  
    var jsonObject = JSON.parse(this.responseText);
    // Here I have made a check if the Token is returned successfully it will alert the user that he authenticated 
    if (jsonObject[0].Token === "asdfadsfasdfadsf")  
        {  
            alert("Authenticated");  
        }  
    else  
        {  
            alert("response.message");  
        }  
}; 
win1.open(); 
```

或者，您可以更改后端实现，结果将是一个对象而不是一个数组。

尽管如此，您应该更改您的后端，因为目前可以通过普通的 GET 参数进行身份验证。

# java - Java GUI 不会显示我想要的提示

> ID：15466031
> 
> 赞同：0
> 
> 时间：2013-03-17T20:47:04.070
> 
> 标签：java, swing, user-interface, jframe

所以我的程序设计为接受 2 个值，进行计算，并给出这个计算值。单击按钮后，我想在 GUI 的 actionPerformed 部分中将其显示为提示。看起来它应该出现，但我似乎无法找到为什么它不出现？没有出现的是“prompt2”。谢谢

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
public class Windchill extends JFrame implements ActionListener{
    private static final int FRAME_WIDTH = 300;
    private static final int FRAME_HEIGHT = 200;
    private static final int FRAME_X_ORIGIN = 150;
    private static final int FRAME_Y_ORIGIN = 250;
    private String degree;
    private String wind;
    private int degreeInt;
    private int windInt;
    private double windChillInt;
    private JButton windButton;
    private JLabel prompt;
    private JLabel prompt1;
    private JLabel prompt2;
    private JTextField inputLine;
    private JTextField inputLine1;

    public Windchill(){
        setTitle("Windchill");
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        setLocation(FRAME_X_ORIGIN, FRAME_Y_ORIGIN);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container contentPane = getContentPane();
        contentPane.setLayout(new FlowLayout());    
        inputLine = new JTextField();
        inputLine.setColumns(3);
        inputLine.addActionListener(this);
        contentPane.add(inputLine);
        prompt = new JLabel();
        prompt.setText("Enter the degrees in Farienheight       ");
        prompt.setSize(150,25);
        contentPane.add(prompt);
        inputLine1 = new JTextField();
        inputLine1.setColumns(3);
        inputLine1.addActionListener(this);
        contentPane.add(inputLine1);

        prompt1 = new JLabel();
        prompt1.setText("Enter the wind speed in MPH");
        prompt1.setSize(150,25);
        contentPane.add(prompt1);

        windButton = new JButton("Calculate windchill");
        contentPane.add(windButton);
        windButton.addActionListener(this);

    }
    public void actionPerformed(ActionEvent event){
        if (event.getSource() instanceof JButton){
            JButton clickedButton = (JButton) event.getSource();
            if (clickedButton == windButton){
                degree = inputLine.getText();
                degreeInt = Integer.parseInt(degree);
                wind = inputLine1.getText();
                windInt = Integer.parseInt(wind);
                windChillInt = 0.08 * (degreeInt - 91.4)*(3.71* (Math.sqrt(windInt)) + 5.81 - 0.25 *windInt) + 91.4;

                prompt2 = new JLabel();
                prompt2.setText("The windchill is " + windChillInt);
                prompt2.setSize(150,25);
                Container contentPane = getContentPane();
                contentPane.setLayout(new FlowLayout());
                contentPane.add(prompt2);
            }

        }
    }
    public static void main(String[] args) {
        Windchill frame;
        frame = new Windchill();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:52:42.523

`prompt2`没有出现，因为`Swing`需要验证容器才能看到任何新添加的组件。也是一个好习惯`repaint`。你可以这样做：

```
contentPane.revalidate();
contentPane.repaint(); 
```

* * *

*旁注：*

*   无需为您的`ActionListener`
*   `contentPane.add(prompt2)`可以简化为`add(prompt2)`
*   *或者*，您可以使用空内容将其添加`prompt2` `JLabel`到`contentPane`启动时`String`并调用`setText`更新。

# google-app-engine - 谷歌应用引擎中的临时存储

> ID：15466032
> 
> 赞同：2
> 
> 时间：2013-03-17T20:47:16.940
> 
> 标签：google-app-engine

我有一个网络应用程序，用户在其中输入一些文本到文本区域，然后转到需要该文本可用的另一个页面。文本可能太长而无法作为 GET 查询参数传递，但仅在用户单击下一页时使用一次。我应该如何临时存储这些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T22:07:24.633

您可以在[内存缓存](https://developers.google.com/appengine/docs/python/memcache/overview)中存储最多 1 兆字节的任何信息。

```
from google.appengine.api import memcache
# store user info in memcache
# using USER_ID var if form can be submitted by different users
memcache.set('%s_text' % USER_ID, DATA)

# get info and clear memory
DATA = memcache.get('%s_text' % USER_ID)
memcache.delete('%s_text' % USER_ID) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T20:49:13.343

你可以使用cookie。不确定您可以在 cookie 中存储多少，但对于您的目的来说应该足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T04:36:52.513

Memcache 过期是不可预测的。将其视为短暂的缓存。

更可靠的选项包括 cookie（或者将数据临时存储在 cookie 中，或者让 cookie 保存您保存数据的数据存储区密钥），或者将临时数据嵌入到后续页面的表单中的隐藏字段中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T16:57:06.083

我们推出了一个开源库，它实现了 memcache 接口（大部分），但由 Datastore 支持，因此您不必担心驱逐。

[https://code.google.com/p/appengine-dscache/](https://code.google.com/p/appengine-dscache/)

j

# asp.net-web-api - 如何通过重定向将 OData 查询参数从一个操作传递到另一个操作

> ID：15466046
> 
> 赞同：1
> 
> 时间：2013-03-17T20:48:14.893
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我有以下场景：具有“GetAll”方法的 ProductsController，它接受 ODataQueryOptions，如下所示：

```
 [GET("Products", RouteName = "GetAllProducts")]
    public ProductDTO[] Get(ODataQueryOptions options)
    {  
       //parse the options and do whatever...
        return new ProductDTO[] { };
    } 
```

和一个具有 GetProducts 方法的 CategoryController，如下所示：

```
 [GET("Category/{id}/Products", RouteName = "GetProductsByCategory")]
    public HttpResponseMessage GetProducts(int id, ODataQueryOptions options)
    {
        //Request URL can be "api/Category/12/Products?$select=Name,Price&$top=10"
        //Need to do a redirect the ProductsController "GetAllProducts" action
        HttpResponseMessage msg = new HttpResponseMessage(HttpStatusCode.RedirectMethod);
        msg.Headers.Location = new Uri(Url.Link("GetAllProducts",options));
        // how do we send the odata query string"$select=Name,Price&$top=10"
        //to the ProductsController? passing "options" directly does not work!
        return msg;
    } 
```

我不想重新定义在 CategoryController 中按特定类别获取产品的逻辑。有没有办法

1) 将 ODataQueryOptions 作为重定向的一部分传递？

2) 可以修改选项以添加额外的过滤条件吗？在上面的示例中，我想在执行重定向之前为当前 CategoryID 添加一个额外的过滤条件，以便“GetAllProducts”收到以下请求：“api/Products?$select=Name,Price&$top=10& **$过滤器=类别 ID eq 12** "

以上是否有意义或者我应该以不同的方式处理这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:51:28.753

您可以使用此帮助程序从请求中获取 OData 查询字符串。

```
 private static string GetODataQueryString(HttpRequestMessage request)
    {
        return
            String.Join("&", request
                                .GetQueryNameValuePairs()
                                .Where(kvp => kvp.Key.StartsWith("$"))
                                .Select(kvp => String.Format("{0}={1}", kvp.Key, Uri.EscapeDataString(kvp.Value))));
    } 
```

# php - 上传的文件超过了 php.ini 中的 upload_max_filesize 指令

> ID：15466047
> 
> 赞同：0
> 
> 时间：2013-03-17T20:48:15.510
> 
> 标签：php

我正在使用 wordpress 3.5.1，并且我从 themeforest 购买了一个新主题，但是当我在上传后尝试将该主题上传到我的 wordpress 时，它会显示消息；

```
"The uploaded file exceeds the upload_max_filesize directive in php.ini". 
```

即使我尝试通过 FTP filezilla 手动上传主题，它也没有在我的 wordpress 中显示任何内容来激活主题。

我编辑了我的 php.ini 文件；它的默认大小为 64M，我将其更改为 256M。仍然遇到同样的问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:52:36.637

在 WorldPress 面板中，您应该会在侧面看到“外观”。点击那个。

然后点击“安装主题”，并在那里搜索您的主题。这不需要任何类型的上传限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T01:29:25.923

1）打开php.ini：

> /etc/php/7.0/apache2/php.ini

2）增加文件大小：

> upload_max_filesize = 16M

3）重启：

> sudo 服务 apache2 重启

# macos - 模拟 CGCreateMouseEvent 之外的 Mac 鼠标事件

> ID：15466048
> 
> 赞同：3
> 
> 时间：2013-03-17T20:48:16.180
> 
> 标签：macos, cocoa, core-graphics, iokit

我已经成功地使用 CG 鼠标事件来模拟鼠标按下/拖动/向上事件，使用专门的硬件控制器。但是，我遇到了一些使用这些 CG 鼠标事件没有效果的应用程序 - 也就是说，我可以单击并拖动实际鼠标来更改应用程序某个区域内的控件，但使用 CGCreateMouseEvent 模拟这些完全相同的动作（尝试过发布到 HID 系统状态和 CombinedSession 状态）不起作用。

也许这些应用程序专门监听鼠标/触摸板硬件设备？有什么方法可以更“逼真地”模拟鼠标事件，以便这些应用程序认为实际的鼠标/触摸板正在拖动？

# php - 在mysql中发布ajax数据

> ID：15466054
> 
> 赞同：0
> 
> 时间：2013-03-17T20:48:28.890
> 
> 标签：php, javascript, html, mysql, ajax

我有一个 ajax 代码，无需单击提交即可自动将 html 表单的信息发送到 mysql。在 mysql 中，我看到脚本没有发送任何信息。空白数据。我看到与 mysql 的脚本连接很好，因为我看到了一个新结果，但结果为空（没有文本或值）这是我的 ajax 代码和我的 php 代码：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:54:37.133

您的数据字符串不符合您的帖子变量。

```
var data = "newQuickMEGA=" + Megalink +  "&nameQuickMEGA=" + Filename +  "&sizeQuickMEGA=" + Filesize +  "&filecat=" + Filecate;

$link = $_POST['Megalink'];
$name = $_POST['Filename'];
$size = $_POST['Filesize'];
$cat = $_POST['Filecate']; 
```

以下将起作用：

```
$link = $_POST['newQuickMEGA'];
$name = $_POST['nameQuickMEGA'];
$size = $_POST['sizeQuickMEGA'];
$cat = $_POST['filecat']; 
```

# macos - 使用 awk 删除尾随空格

> ID：15466058
> 
> 赞同：0
> 
> 时间：2013-03-17T20:48:54.193
> 
> 标签：macos, awk, newline, whitespace, trim

我正在尝试使用[system_profiler](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/system_profiler.8.html)命令从我的 Mac 上获取并打印一些系统信息。我能够很好地获取信息，但是对于每个项目，都有一个前导空格和尾随换行符（我认为）。问题是尾随换行符（或那里的任何东西）。这是我正在使用的命令之一的示例：

```
system_profiler SPHardwareDataType | awk -F: '/Processor Speed/ {gsub(/^[ \t]+|[ \n]+$/, "", $2); print $2}' 
```

结果如下：

```
2.5 GHz 
```

它没有出现在这里，但最后有某种字符会导致换行符。我上面的 gsub 正确地删除了结果开头的空格，但我已经尝试了我能想到的一切来删除换行符，但没有任何效果。

要查看正在运行的换行符，请`system_profiler > output`从终端运行并在您喜欢的文本编辑器中打开输出文件并显示不可见字符。

我最终试图用我获取的这些信息做的是使用[TextExpander](http://smilesoftware.com/TextExpander/index.html)片段打印我的基本计算机信息。我已经正确设置并运行了所有片段，但是如上所述，我遇到了换行符的问题。

这是当前的输出：

```
Model:  MacBookPro9,2

OS Version: Mac OS X
 10.8.3
 (12D78
)
Processor:  2.5 GHz
  Intel Core i5

Graphics:  Intel HD Graphics 4000
  512 MB

Storage:  APPLE SSD SM128E Media

Memory:  8 GB 
```

这就是我想要的样子：

```
Model: MacBookPro9,2
OS Version: Mac OS X 10.8.3 (12D78)
Processor: 2.5 GHz Intel Core i5
Graphics: Intel HD Graphics 4000 512 MB
Storage: APPLE SSD SM128E
Memory: 8 GB 
```

TextExpander 允许您运行任何 shell 脚本，因此如果有任何其他方式可以获得我想要的功能，我会很乐意使用它。（即我已经进行了一些搜索，并且我已经看到了`sed`其中提到的内容，但我真的对 shell 脚本一无所知）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:14:53.440

`print`添加一个换行符。

`printf`相反，如果您不想要换行符，请使用：

```
system_profiler SPHardwareDataType | awk -F: '/Processor Speed/ {
    gsub(/^[ \t]+|[ \n]+$/, "", $2)
    printf "%s", $2
}' 
```

* * *

> 它没有出现在这里，但最后有某种字符会导致换行符。

为了演示这样的事情，我使用`cat -vet`，*即*：

```
% system_profiler SPHardwareDataType | awk -F: '/Processor Speed/ {gsub(/^[ \t]+|[ \n]+$/, "", $2); print $2}' | cat -vet
2.13 GHz$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:16:15.853

尝试使用不同的字段分隔符来消除前导空格：

```
system_profiler SPHardwareDataType | awk -F': ' '/Processor Speed/{print $2}' 
```

# java - Mac OS X 上的 Java 应用程序无法正确打印字体

> ID：15466060
> 
> 赞同：5
> 
> 时间：2013-03-17T20:49:12.103
> 
> 标签：java, macos, printing, fonts, graphics2d

我最近发现我编写的一个在 Windows 上运行良好多年的徽章打印程序在 MAC OS X 上无法正确打印。我使用的是 Arial truetype 字体。该程序似乎显示基本字体，没有适当的缩放。我正在使用 intellij 和 jdk1.7.0_15。字体正确显示在屏幕上，但当我打印到打印机或 pdf 时却没有。当我使用 GraphicsEnvironment.getAvailableFontFamilyNames 在控制台上列出程序可用的字体时，Arial 被列为其中之一。当我直接从字体文件加载字体时，它可以正常工作。我已经追了一天多的尾巴，任何建议都将不胜感激。这是演示我的问题的代码...

```
/**
 *  DisplayPage.java
 */
import java.awt.*;
import java.awt.print.*;

public class DisplayPage extends ApplicationFrame {

    public static void main(String[] args) {
        // Create app and display draw page
        DisplayPage f = new DisplayPage();
        f.setTitle("PaintingAndStroking v1.0");
        f.setSize(850, 1100);
        f.center();
        f.setVisible(true);

        // Generate print job to print page
        PrinterJob pj = PrinterJob.getPrinterJob();
        pj.setPrintable(new PrintPage());
        boolean doPrint = pj.printDialog();
        if (doPrint) {
            try {
                pj.print();
            } catch (PrinterException e) {
                System.out.println(e);
            }
        }
    }

    /**
     * This is called by the windows event processor
     * @param g java.awt.Graphics context for display
     */
    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2d = (Graphics2D)g;
        DrawPage.draw(g2d);
    }

}

/**
 *  ApplicationFrame.java
 */
import java.awt.*;
import java.awt.event.*;

public class ApplicationFrame extends Frame {

    public ApplicationFrame() { this("ApplicationFrame v1.0"); }

    public ApplicationFrame(String title) {
        super(title);
        setSize(850, 1100);
        center();

        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                dispose();
                System.exit(0);
            }
        });
    }

    public void center() {
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        Dimension frameSize = getSize();
        int x = (screenSize.width - frameSize.width) / 2;
        int y = (screenSize.height - frameSize.height) / 2;
        setLocation(x, y);
    }

}

/**
 * PrintPage.java
 */
import java.awt.*;
import java.awt.print.*;

public class PrintPage
        implements Printable {

    public int print(Graphics g, PageFormat pf, int page)
            throws PrinterException {

        // We have only one page
        if (page > 0) {
            return NO_SUCH_PAGE;
        }

        // Create Graphics2D context
        Graphics2D g2d = (Graphics2D)g;

        // Draw page
        DrawPage.draw(g2d);

        // Verify page exists
        return PAGE_EXISTS;
    }

}

/**
 * DrawPage.java
 */
import java.awt.*;

public class DrawPage {

    static public void draw(Graphics2D g2d) {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        Font[] fonts = ge.getAllFonts();
        String[] fontFamilies = ge.getAvailableFontFamilyNames();
        for (int i=0; i<fontFamilies.length; i++) {
            System.out.println(fontFamilies[i]);
        }

        double x = 15, y = 50, w = 70, h = 70;
        GradientPaint gp = new GradientPaint(75, 75, Color.white,
                95, 95, Color.gray, true);

        // Fill with a gradient
        g2d.setPaint(gp);

        // Stroke with a solid color.
        g2d.setPaint(Color.black);
        g2d.setStroke(new BasicStroke(8));

        // Stroke with a gradient.
        g2d.setPaint(gp);

        // Draw text string
        String text = new String("This is a test...");
        g2d.setPaint(Color.black);
        g2d.setStroke(new BasicStroke(8));
        Font font = new Font("Arial", Font.PLAIN, 36);
        g2d.setFont(font);
        g2d.drawString("This is a test of Arial 36", 50, 100);

        font = new Font("Arial", Font.PLAIN, 72);
        g2d.setFont(font);
        g2d.drawString("This is a test of Arial 72", 50, 200);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T05:26:09.583

我写了一篇关于这方面的博客文章，名为[Printing is Broken on Mac OS X with Java 7](https://www.followsteph.com/2013/06/21/printing-is-broken-on-mac-os-x-with-java-7/)，其中包括我发现的所有内容，包括原因、错误报告以及我们目前的解决方法。简短的版本是它看起来像是 Apple 的 Mac OS 或 Java 7 中的一个错误，并且在撰写本文时它仍未修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T13:53:41.347

有解决此问题的方法。字体呈现问题是由于 Graphics.drawString() 的实现存在错误。

避免这种情况的两种方法：

1.  您可以用这样的调用替换对 Graphics.drawString(... ) 的调用

    *   Graphics.drawGlyphVector(Graphics.getFont().createGlyphVector(Graphics.getFontRenderingContext(), String.toCharArray()))
2.  您可以提供自己的 Graphics2D 实现，它覆盖 drawString() 方法并执行上述转换并委托给 drawGlyphVector()

使用 drawGlyphVector() 将导致文本由 Java 的 AWT 代码呈现，而不是本机 OS 的呈现，因此可能会出现一些视觉伪影并降低性能。但这比现在的情况要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T02:29:21.003

我和你有同样的问题。我使用这些说明将 Java 版本从 1.7 降级到 1.6。

[http://support.apple.com/kb/HT5559?viewlocale=en_US](http://support.apple.com/kb/HT5559?viewlocale=en_US)

这不是最好的解决方案，但您将能够解决您的问题。

# java - 使用抽象类方法

> ID：15466063
> 
> 赞同：0
> 
> 时间：2013-03-17T20:49:28.117
> 
> 标签：java, abstract-class

我有一些问题了解抽象类。我有一个使用设置/获取名称的方法创建的抽象类：

```
public abstract class Person {

    private String firstName;

    public void setFirstname(String name)
    {
        this.firstName = name;
    }
    public String getFirstName()
    {
         return firstname;
    } 
```

我有 2 个其他类扩展了这个类，它们是`Worker`和`Employer`. 我有不同的工人和雇主被创建并存储到第四个类中的数组列表中`WorkPlace`。我的问题是，如果我想获得每个人的每个名字，`Person`有没有办法在不通过每个数组列表并执行类似操作的情况下做到这一点`workerList.get.getFirstName`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T20:52:41.203

除非您的抽象类静态保留所有名字的记录，并且您提供了一个静态方法来获取所有这些名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:54:12.477

也许你可以创建一个类`Workplace`，当你想要一个新的 Employer 或 Worker 时，你会调用一些类似 的东西`workplaceName.newWorker()`，这将返回一个新`Worker`的，同时跟踪所有`Worker`的 s，以便你以后可以调用`workplaceName.getAllWorkerNames()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T21:21:05.223

您可以做的是覆盖类中的`toString()`方法`Person`并返回名字。

当你再出来的时候`ArrayList.toString()`是一个类似的东西`[firstname1, firstname2, firstname3]`。您可以删除前括号和后括号，并使用 with 分割字符串`", "`。这有点复杂，并且可能会因为不必要的字符串操作而降低性能，但您不需要遍历集合中的所有元素。

这是一个例子：

```
// in Person class do this
@Override
public String toString() {
    return this.firstName;
}

// in your WorkPlace class do this
public String[] getAllFirstNames() {
    String allNames = workerList.toString();
    allNames = allNames.substring(1, allNames.length - 2);
    return allNames.split(", ");
} 
```

这应该可以工作并且没有循环（更好的是：没有你自己编写的循环）。但如前所述，它可能会花费很多。此外，它可能不是很节省，以防集合`toString()`方法的行为发生变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T20:58:50.390

所以如果你有：

```
ArrayList<Person> list = new ArrayList<Person>(); 
```

然后：

```
Employer e1 = new Employer();
Worder w1 = new Worker();

list.add(e1);
list.add(w1); 
```

然后你必须这样做：

```
list.get(0).getFirstName(); 
```

# npapi - 如何在 FireBreath 中将 HWND 转换为 NSWindow *？

> ID：15466068
> 
> 赞同：0
> 
> 时间：2013-03-17T20:49:45.343
> 
> 标签：npapi, firebreath, browser-plugin

有没有办法将 HWND FB::PluginWindowWin::getBrowserHWND 转换为 NSWindow *？我需要这个的原因是为了与浏览器窗口进行交互，从我的 Cocoa 应用程序 for OSX，（比如打开工作表等）。如果没有办法，还能怎么做，有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:01:15.670

您无法从 Mac NPAPI 插件中获取 NSWindow。在 carbon 时代，它曾经可以得到其中的一些，但它从来不是一个受支持的功能，只是在某些版本中发生了一些事情。

关于这些坏消息我很遗憾

# php - 如何在选择查询中使用循环

> ID：15466069
> 
> 赞同：0
> 
> 时间：2013-03-17T20:49:48.770
> 
> 标签：php, arrays, loops, select, for-loop

如何在选择查询中使用循环？查询一次只能从 Select Query 中*获取一行。*我想在选择查询中获取多行但通过循环

**选择身份证**

```
$id=$_REQUEST['id'];
function get_id($id){
    $result1=mysql_query("select * from products where id='$id'") 
    or die("Id Problem"."<br/><br/>".mysql_error());
    $results1= array();
    $k=0; // add the new line
    while($row1=mysql_fetch_assoc($result1)){
        $results1[] = $row1['id'];
        $k++;
    }
    return $results1;
} 
```

**PID 数组**

```
 $pid1=get_id($id);
 <?php 
     $max1=count($pid1);
     for($n=0; $n<$max1; $n++)
     {?>
         <input type="hidden" name="pid[]" value="<?php echo $pid1[$n]?>" />
 <?php }?> 
```

**PID 会话**

```
$_SESSION['pid']=$_POST['pid']; 
```

**我想要`fetch`选择查询中的多行但通过循环**

```
<?php 
$pid = join(',',$_SESSION['pid']); 
$result=mysql_query("SELECT id AS wid FROM mywishlist 
where pid='$pid'") 
or die("Id     Problem"."<br/><br/>".mysql_error());
$results= array();
$i=0; // add the new line
while($row=mysql_fetch_array($result)){
    $results[$i] = $row['wid'];
    $i++;
}
echo $results;

$max=count($results);
for($j=0; $j<$max; $j++)
{
?>
    <input type="text" name="wid[]" value="<?php echo $results[$j]; ?>" />
<?php }?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T00:52:51.723

您正在艰难地做一些事情，跟踪和控制在自动驾驶仪上运行良好的事情。例如 - for 循环要求您知道长度，而 foreach 循环只是运行直到它们完成。

让 PHP 通过使用 [] 而不是分配索引来处理数组索引也会为您节省一些精力。而且由于您的每个循环实际上只做一件事，因此它们实际上并不需要大括号。

```
$result=mysql_query('SELECT id AS wid FROM mywishlist where pid="'.$pid.'"') or die(); 
$results= array();
while($row=mysql_fetch_array($result)) 
    $results[]=$row['wid'];
foreach($results as $wid)
    echo '<input type="text" name="wid[]" value="'.$wid.'" />'; 
```

当然，您可以消除其中一个循环，因为它们本质上都处理相同的数据......

```
$result=mysql_query('SELECT id AS wid FROM mywishlist where pid="'.$pid.'"') or die(); 
while($row=mysql_fetch_array($result)) 
    echo '<input type="text" name="wid[]" value="'.$row['wid'].'" />'; 
```

此外，重新识别从 id 到 wid 的键没有多大意义。由于结果中只有 1 个字段，为什么还要识别它 - 我们可以只获取该行。

```
$result=mysql_query('SELECT id FROM mywishlist where pid="'.$pid.'"') or die(); 
while($row=mysql_fetch_row($result)) 
    echo '<input type="text" name="wid[]" value="'.$row[0].'" />'; 
```

哦，让我们分两行来做

```
$result=mysql_query('SELECT id FROM mywishlist where pid="'.$pid.'"') or die(); 
while($row=mysql_fetch_row($result)) echo '<input type="text" name="wid[]" value="'.$row[0].'" />'; 
```

# php - PHP Form 没有处理无限循环

> ID：15466075
> 
> 赞同：0
> 
> 时间：2013-03-17T20:50:20.467
> 
> 标签：php

我在表单中的输入字段旁边有加号图标，以便我可以添加更多输入字段。字段名称会自动生成到此表单中 -> "one_f1", "one_f2" ...

当我创建要发送的邮件时，我需要为此创建一个 while 循环，以便我可以放置从表单发送的所有值。

添加此代码后，我的 php 表单开始花费太长时间来发送邮件，这导致了此错误；致命错误：第 5 行 /mail/send.php 中允许的内存大小为 268435456 字节已用尽（尝试分配 267911134 字节）

我的代码是；

```
$k = 0;
  while(isset($_POST["one_f".$k])){
     $body .= '<li style="list-style: circle;">'.$_POST["one_f".$k].'</li>';
  }
$k++; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:51:57.210

将“$k++”移动到循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:56:14.100

```
so I can put all the values that are sent from the form. 
```

在 php 中为了提取所有值使用`foreach`

```
foreach($_POST as $key => $value) {
//Do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T20:53:03.433

```
$k = 0;
while(isset($_POST["one_f".$k])){
 $body .= '<li style="list-style: circle;">'.$_POST["one_f".$k].'</li>';
 $k++;
} 
```

$k++; 应该进入循环

# objective-c - 我无法弄清楚方法的区别

> ID：15466076
> 
> 赞同：-2
> 
> 时间：2013-03-17T20:50:39.770
> 
> 标签：objective-c, class

```
@interface Rectangle: NSObject
-(void) setOrigin : (XYPoint *) pt;
-(XYPoint *) origin;
...
@end

#import "XYPoint.h"
#import "Rectangle.h"
@implementation Rectangle
-(void) setOrigin : (XYPoint *) pt
{
   origin = pt;
}

-(XYPoint *) origin 
{
   return origin;
}
@end

@interface XYPoint: NSObject
@property int x, y;
-(void) setX: (int) xVall andY; (int) yVal;
@end

#import "XYPoint.h"
@implementation XYPoint
@synthesize x, y
-(void) setX: (int) xVal andY: (int) yVal
{
   x = xVal;
   y = yVal;
}
@end 
```

以上是课程的一部分。这是主要的

```
int main (int argc, const char* argv[])
{
    XYPoint* myPoint = [[XYPoint alloc]init];
    Rectangle* myRect = [[Rectangle alloc]init];

    [myPoint setX: 200 andY: 100];

    [myRect setOrigin: myPoint];
    NSLog(@"origin of rectangle: (%i, %i)", myRect.origin.x, myRect.origin.y);
    return 0;
} 
```

正如我所料，这工作得很好。但是，如果我改变方法

```
setOrigin: (XYPoint *) pt 
```

在 Rectangle 类中，

```
-(void) setOrigin: (XYPoint *) pt
{
    origin.x = pt.x;
    origin.y = pt.y;
} 
```

它只是为 x 和 y 打印 0 的值。这两种方法有什么区别。对我来说，似乎是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:52:01.197

我打赌你不会`alloc`和`init`你的`origin`对象在`Rectangle`类的初始化......

# c# - ARP中毒给自己

> ID：15466077
> 
> 赞同：1
> 
> 时间：2013-03-17T20:50:40.477
> 
> 标签：c#, network-programming, winpcap, arp, pcap.net

我正在使用 PcapDotNet 使用以下代码创建 ARP 毒包：

```
using (PacketCommunicator communicator =
            selectedDevice.Open(100, PacketDeviceOpenAttributes.Promiscuous, 1000)) 
        {
            while (true)
            {
                Packet arp;

                EthernetLayer ethernetLayer = new EthernetLayer
                {
                    Source = new MacAddress("f8:d1:11:05:8c:91"), // My Mac
                    Destination = new MacAddress("5c:da:d4:29:6d:5f"), // Remote device IP
                    EtherType = EthernetType.None, // Will be filled automatically.
                };

                ArpLayer arpLayer = new ArpLayer
                {
                    ProtocolType = EthernetType.IpV4,
                    Operation = ArpOperation.Reply,
                    SenderHardwareAddress = new byte[] { 0xf8, 0xd1, 0x11, 0x05, 0x8c, 0x91 }.AsReadOnly(), // My MAC
                    SenderProtocolAddress = new byte[] { 192, 168, 1, 254 }.AsReadOnly(), // My Router IP

                    TargetHardwareAddress = new byte[] { 0xff, 0xff, 0xff, 0xff, 0xff, 0xff }.AsReadOnly(),
                    TargetProtocolAddress = new byte[] { 0, 0, 0, 0 }.AsReadOnly(),
                };

                PacketBuilder builder = new PacketBuilder(ethernetLayer, arpLayer);

                arp = builder.Build(DateTime.Now);

                communicator.SendPacket(arp);
                System.Threading.Thread.Sleep(500);
            }
        } 
```

问题是：我可以毒害远程设备，但我的电脑也失去了互联网（毒害自己？）。我想也许问题是我必须（以某种方式）表明我希望我自己的系统不读取我发送的数据包......但我不知道如何......有人可以解释一下这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T19:57:19.447

将包含网关 IP 的 ARP 条目标记为静态（使用正确的硬件地址）。为此，请以管理员身份在 cmd 中执行以下命令：

```
netsh interface ip add neighbors "{Network Device}" {IP Address} {MAC Address} 
```

网络设备是例如*“本地连接”*或*“以太网”*（不要忘记引号）。要查找您当前使用的网络设备，请执行命令“ *ncpa.cpl* ”。

如果要删除静态条目，请在cmd中执行以下命令：

```
netsh interface ip delete neighbors "{Network Device}" {IP Address} 
```

另外，请记住，您没有互联网的原因之一是因为网络中的所有流量都被重定向到您的主机。由于您的主机没有与路由器相同的功能，因此可能会出现网络拥塞。为了确定你不能上网的原因是你自己中毒了，在cmd中执行命令“ *arp -a* ”并检查路由器的硬件地址。如果硬件地址与您主机的硬件地址相同，那么您就是在毒害自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:54:47.800

您是否有可能为您的路由器内部 IP 创建毒记录？如果是这样，那么您的互联网连接停止工作也就不足为奇了，因为您的操作系统将不再能够将任何内容发送到您的路由器，因此也无法发送到互联网。

# php - $_POST 内部查询 PHP

> ID：15466083
> 
> 赞同：-3
> 
> 时间：2013-03-17T20:51:04.920
> 
> 标签：php

我有一个 $_post 的值，我需要将其放入 PHP 查询中。尝试了很多不同的方法，但无法让它发挥作用。

想法？

```
$result = $xpath->query('/stickers/sticker[id=2]/text'); 
```

我需要改变`[id=2]`这个`$_POST['textBoxID']`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:53:17.027

您需要使用双引号或连接。单引号导致您的变量被视为文字。双引号将允许它们被插值。

```
$result = $xpath->query("/stickers/sticker[$_POST[textBoxID]]/text"); 
```

或者

```
$result = $xpath->query("/stickers/sticker[{$_POST['textBoxID']}]/text"); 
```

或者

```
$result = $xpath->query('/stickers/sticker['.$_POST['textBoxID'].']/text'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T20:53:34.633

`$_POST['textBoxID']`只是数值吗？如果是这样，您可以这样做：

```
$result = $xpath->query('/stickers/sticker[id='.$_POST['textBoxID'].']/text'); 
```

或者如果`$_POST['textBoxID']`将是整个 id=x 这样做：

```
$result = $xpath->query('/stickers/sticker['.$_POST['textBoxID'].']/text'); 
```

在这里阅读更多：http: [//php.net/operators.string](http://php.net/operators.string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T20:56:51.780

* * *

你想要一个

```
$thePost = $_POST['textBoxID'];
$result = $xpath->query('/stickers/sticker'.$thePost.'/text'); 
```

或者

```
$thePost = $_POST['textBoxID'];
$result = $xpath->query('/stickers/sticker[id='.$thePost.']/text'); 
```

# php - Facebook 应用程序重定向

> ID：15466089
> 
> 赞同：0
> 
> 时间：2013-03-17T20:51:46.073
> 
> 标签：php, facebook

我的 index.php 中有以下代码：

```
 $config = array(
'appId' => AppInfo::appID(),
'secret' => AppInfo::appSecret(),
'cookie' => true
);
$facebook = new Facebook($config);

$app_name = "AppName";
$fbPermissions = 'email';  
$validUser = 1;
$fbuser = $facebook->getUser(); // get user
$fbname = "";
$fbmail = "";
$fbid = 0;
$user_profile = null;

if(!$fbuser) 
{
$validUser = 0;
}
else
{
 try {
    $user_profile = $facebook->api('/me'); //user profile
    $user_permissions = $facebook->api("/me/permissions"); //list of user permissions
  } catch (FacebookApiException $e) {
     $fbuser = null;
     $user_permissions = null;
  }

  $permissions_needed = explode(',',$fbPermissions); // permission required to proceed
  foreach($permissions_needed as $per) //loop thrugh each permission
  {
    if ($user_permissions != null) { 
        if(!array_key_exists($per, $user_permissions['data'][0])){
            $validUser = 0;
        }
    }
  }
}
if($validUser == 1){
$fbname = $user_profile["last_name"]." ".$user_profile["first_name"];
$fbmail = $user_profile["email"];
$fbid = $user_profile["id"];
}

if(isset($_POST['submit'])) {
header( 'Location: writetocsv.php?id='.$_POST['fbid'].'&name='.$_POST['fbname'].'&email='.$_POST['email'] ) ;
}

    if($signed_request = parsePageSignedRequest()){
        if($signed_request->page->liked) {
            if(!userIsInDatabase($fbid)){
                include("pages/fanpage.php");
                echo "fanpage";
            }
            else{
                include("pages/thankyou.php");
                echo "thankyoupage";
            }
        } else {
            include("pages/notfanpage.php");
            echo "notafanpage";
        }
    }

?>

 <script>
      // Additional JS functions here
      function login() {
        FB.login(function(response) {
            if (response.authResponse) {
                // connected        

            } else {
                // cancelled
            }
        },{scope:"email"});
        }
      window.fbAsyncInit = function() {
        FB.init({
          appId      : <?php echo AppInfo::appID(); ?> , // App ID
          channelUrl : 'channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

        // Additional init code here
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                // connected
            } else if (response.status === 'not_authorized') {
                // not_authorized

                login();
            } else {
                // not_logged_in

                login();
            }
        });
      };

      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
      </script> 
```

好的，让我稍微解释一下。当一个新用户连接到我的标签应用程序页面时，它会向他显示 notafanpage.php。在他喜欢我的页面后，标签会自动刷新并显示 fanpage.php。在这个 fanpage.php 中，我有一个表格，上面有我需要收集的姓名和邮件。在他按下提交后，它重定向到 index.php 验证输入（尚未完成），然后返回 writetocsv.php?id=..&name=..&mail=.. 我将数据写入 csv 和之后它重定向回 index.php。这是它被窃听的地方。它说 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。有什么建议么 ？

编辑：

嗯，我自己想通了。对于遇到此问题的任何人，这是解决方案：

Facebook 仅在您第一次访问应用程序时发送签名请求。因此，您必须将签名请求存储在会话中。至于访问令牌，您必须记住第一个访问令牌，并在每次页面重新加载时通过 $facebook->setAccesToken($accestoken) 方法设置它。祝你好运 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:39:12.870

嗯，我自己想通了。对于遇到此问题的任何人，这是解决方案：

**Facebook**仅在您第一次访问应用程序时发送签名请求。因此，您必须将签名请求存储在会话中。至于访问令牌，您必须记住第一个访问令牌，并在每次通过`$facebook->setAccesToken($accestoken)`方法重新加载页面时设置它。祝你好运 ！

# javascript - Javascript 链式不等式给出了奇怪的结果

> ID：15466099
> 
> 赞同：6
> 
> 时间：2013-03-17T20:52:41.850
> 
> 标签：javascript

```
(0 <= 0 <= 0) === false
(-1 < 0 <= 0 <= 0) === true 
```

这里发生了什么？Javascript 实际上是否具有在某些情况下错误的不等式链接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T20:52:41.850

输入了问题，然后被答案打动了。Javascript 没有不等式链接。相反，`0 <= 0 <= 0`变成`true <= 0`，它被评估为`1 <= 0`。确实，`0 < 0 <= 0`评估为`true`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T20:55:24.827

没有操作符的链接，但有[**优先级**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)。这里所有的操作符都有相同的优先级，所以操作是从左到右进行的。

当您的比较涉及布尔值时，[MDN 会解释比较的工作原理](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)：

> 如果其中一个操作数是布尔值，则布尔操作数如果为真则转换为 1，如果为假则转换为 +0。

这意味着第一个操作根据优先级分解为

```
((0 <= 0) <= 0) 
```

这是

```
true <= false 
```

这是

```
false 
```

第二个是

```
(true <= 0) <= 0 
```

这是

```
false <= 0 
```

这是`true`。

# java - 使用 DrJava 管道（从文本文件重定向输入）到 Java 程序

> ID：15466105
> 
> 赞同：1
> 
> 时间：2013-03-17T20:53:08.347
> 
> 标签：java, drjava

我正在将一个文本文件传送到一个 java 程序中。这是文本文件“input.txt”的内容：

```
4
5 
```

也就是说，数字 4 和 5 在单独的行中。我希望程序读取这些数字并打印出来。此代码应该可以工作：

```
public class readFile { 
  public static void main(String[] args) { 

    while (!StdIn.isEmpty()) {
      System.out.println( StdIn.readInt() );
    }
  }
} 
```

但是当我在 DrJava 中执行以下操作时：

```
run readFile < input.txt 
```

我不明白

```
4
5 
```

但我得到一个框要求我输入而不是打印出数字：http: [//oi50.tinypic.com/3585kxc.jpg](http://oi50.tinypic.com/3585kxc.jpg)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-02T19:18:07.933

这确实是一种非常古老的工作方式。Java 允许您从文件系统中读取文件。下面是一个从文件系统读取文件并返回文件中所有字符串列表的方法的简单示例。（不检查不存在的文件，但您可以自己添加）：

进口：

```
import java.util.List;
import java.io.IOException;
import java.util.ArrayList;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader; 
```

功能：

```
public List<String> readFile(String filePath) throws IOException {
    List<String> result = new ArrayList<String>();
    try {
       FileInputStream streamer = new FileInputStream(filePath);
       InputStreamReader streamReader = new InputStreamReader(streamer);
       BufferedReader reader = new BufferedReader(streamReader);
       String line;
       while ((line = reader.readLine()) != null) {
           result.add(line.replace("\n", ""));
       }
    }
    catch(Exception e){
        e.printStackTrace();
    }

    return result;
} 
```

因此，您可以编写一个 java 程序，该程序接受一个作为文件路径的参数并读取它。之后，您可以从列表中打印您的字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-03T07:23:56.123

找到这个可能有助于解决方案的链接。

[drjava 中的输入输出重定向](http://www.concurrentaffair.org/2012/03/08/inputoutput-redirection-in-drjava/)

提取物：

> DrJava 中的交互窗格不是 DOS 命令行或 Unix 类型的 shell，它不支持 I/O 重定向。

基于以上我对你想要的解决方案是：

```
import java.io.*;

public class ReadFile  {

      public static void readFromStream(String is) throws IOException {
      BufferedReader br = new BufferedReader(new FileReader(is));
        String line;
        while((line = br.readLine()) != null) {
          System.out.println(line);
        }
        br.close();
      }

   public static void main(String args[]) throws IOException {
       readFromStream(args[0]);
   }
} 
```

在 Dr.Java 上（如果 Dr.Java 支持采用主要论点）：

```
 java Readfile  Q1.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T19:04:45.413

这是我尝试重定向到 DrJava 的文本文件：

Q1.txt

```
10
8 0
5 2
6 0
6 4
9 6
9 5 
```

在**Dos 命令**行中，我键入：

`C:\Users\USER\algs4\Week1>java QuickFindUF < Q1.txt`

这导致了以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: edu/princeton/cs/algs
4/StdIn
        at QuickFindUF.main(QuickFindUF.java:172)
Caused by: java.lang.ClassNotFoundException: edu.princeton.cs.algs4.StdIn
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 1 more 
```

在底部的 DrJava“交互”对话框中键入相同的命令时，我得到了相同的结果。

我尝试从命令行直接在命令行之后键入管道：

```
10
8
0
...
^z 
```

在 DrJava 中执行相同操作时，您似乎需要 ^D (ctrl+D)

最终我预感到使用 java-algs4.bat 可能是解决方案：

`..\bin\java-algs4.bat QuickFindUF < Q1.txt`

这是在 Windows 中从 DOS 命令行执行此操作的方法。

我很高兴知道这也是如何在 Eclipse 中完成的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-05T23:24:08.813

要使用 Dr Java 将文本文件通过管道传输到 java 程序中，您需要使用 edu.princeton.cs.algs4.In 类从标准输入读取文件。您的代码必须如下所示：

```
import edu.princeton.cs.algs4.In;
import edu.princeton.cs.algs4.StdOut;

public class readFile { 
  public static void main(String[] args) { 
    //Read file
    In in = new In(args[0]);
    while (!in.isEmpty()) {
      StdOut.println( in.readInt() );
    }
  }
} 
```

这样，您将不会收到要求您输入的框。

# c# - 在 C# 部署中设置 MySQL 服务器

> ID：15466106
> 
> 赞同：0
> 
> 时间：2013-03-17T20:53:09.007
> 
> 标签：c#, mysql, deployment

我已经完成了使用 MySQL 的应用程序的第一个版本的开发（在一个许可证下本地并在另一个许可证下托管）。

将应用程序连接到托管数据库工作正常，我将应用程序中的连接详细信息编辑到托管服务器详细信息，它工作正常。

但是，当我尝试在本地使用它（服务器：本地主机等）时，我收到一条错误消息，指出它无法访问服务器。在我的应用程序中，我包含了 mysql DLL 文件，但我希望用户不必安装大约 100MB 下载的 MySQL 服务器（我知道它现在很小，但希望安装尽可能轻松）。

我知道仅将此安装添加为先决条件将是一个简单的解决方法，但我相信有一种方法可以在没有这个的情况下做到这一点，或者可能没有。是否有一个我可以运行的脚本将运行并与用户等一起设置服务器？

任何帮助表示赞赏。

谢谢

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:14:45.950

或者你可以使用[SQLLite](http://www.sqlite.org/)，这是我迄今为止最好的体验。重构您的程序以使用它应该很容易，并且无需用户设置即可使用它。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:56:22.353

连接到本地 mysql 数据库意味着有一个 mysql 数据库服务正在运行并且之前已安装。

如果您想要一个数据库，您可以随您的程序一起分发，而无需安装一个完全成熟的数据库，周围有很多数据库，例如[MSSQLCE](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx)。

但否则，您的用户将不得不在他自己的机器上安装 mysql 并保持运行。

# windows - 编写批处理文件以计算主文件夹内的文件夹

> ID：15466107
> 
> 赞同：0
> 
> 时间：2013-03-17T20:53:10.583
> 
> 标签：windows, batch-file, scripting, cmd

我是新手，我正在尝试编写一个批处理文件来计算文件夹内的文件夹数量。有人可以帮帮我吗？

这是文件夹系统：我有数百个文件夹，例如：

```
Area1
Area2
Area3
.... 
```

在上述每个文件夹中都有一个名为“Zone”的文件夹。我要查找的是每个区域 1、区域 2 的区域文件夹内的文件夹数量......等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T03:30:18.617

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION 
FOR /f %%i IN ('dir /b/ad area*') DO (
 IF EXIST ".\%%i\zone\." (
  FOR /f %%c IN (' DIR /ad ".\%%i\zone\"') DO SET /a count=%%c-2 2>nul
  ECHO ".\%%i\zone" : !count! directories
  ) ELSE (ECHO ".\%%i\zone" does NOT EXIST
 )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:47:46.393

在 AREAx 文件夹上方启动一个文件夹：

```
@echo off &setlocal
for /d %%i in (*.*) do (
    pushd %%i\ZONE
    set /a count=0
    for /d %%j in (*.*) do set /a count+=1
    popd
    call echo %%count%% folder(s^) in %%i\ZONE
)
endlocal 
```

# ios - 以编程方式创建 UIToolbar

> ID：15466108
> 
> 赞同：1
> 
> 时间：2013-03-17T20:53:12.617
> 
> 标签：ios, uiview, uitoolbar

我希望在用户单击按钮时以编程方式将 UIToolbar 添加到视图中（在我的情况下，当他们放大照片时）。

当我在 click 方法中创建工具栏并添加到子视图时，它似乎工作正常，但是如果我在 viewDidLoad 方法中创建工具栏，将其分配给实例变量，然后在单击时将该实例变量添加到子视图，什么也没有出现。调试器显示实例变量是一个 UIToolbar 并且不为空。我不想在每次单击时都创建和销毁相同的工具栏，所以我认为最好将其保留为我根据需要从视图中添加和删除的实例变量。这是正确的方法吗？

为什么它在一种情况下可见，而在另一种情况下不可见。

设置

```
@synthesize toolBar;

- (UIToolbar*)createToolbar
{
    UIToolbar* toolbar = [[UIToolbar alloc] init];
    toolbar.frame = CGRectMake(0, self.view.frame.size.height - 44, self.view.frame.size.width, 44); 
    UIBarButtonItem *shareButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(sharePhoto:)];
    NSArray *buttonItems = [NSArray arrayWithObjects:shareButton,nil];
    [toolbar setItems:buttonItems];
    return toolbar;

} 
```

这有效

```
- (void) clickMyButton {

    toolBar = [self createToolbar];
    [self.view addSubview:toolBar];
} 
```

这不显示任何东西

```
- (void)viewDidLoad
{
    [super viewDidLoad];
 toolBar = [self createToolbar];

}
- (void) clickMyButton {

    [self.view addSubview:toolBar];
} 
```

为什么在后一种情况下不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:05:16.277

问题是，当`viewDidLoad`被调用时，不能保证您的视图和子视图的框架已设置。尝试`[self createToolbar]`从`viewWillAppear`或`viewDidAppear`代替。

# java - 当客户端从服务器调用Web服务时，如何在服务器项目和共享库中的客户端项目中使用jpa实体类？

> ID：15466110
> 
> 赞同：3
> 
> 时间：2013-03-17T20:53:25.330
> 
> 标签：java, web-services, jpa, client-server

我正在使用 netbeans 并使用它从数据库生成实体类。

我有一个在服务器计算机上运行并使用此实体类提供 Web 服务的项目。这些类用于其他管理器类，这些管理器类使用和转换来自实体类的信息。

我必须在服务器项目和客户端项目中使用这些管理器类。如果我创建一个包含管理器和实体类的库，我可以在这两个项目中使用它们。问题是在 Web 服务客户端调用的客户端项目中生成了一个新类，因此我将在客户端中有重复的逻辑 - 两个类将对应一件事 - 首先是库中的实体类，其次是从库中生成的类Web 服务客户端。

我怎样才能优雅地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:43:27.293

不确定它是否是最优雅的解决方案，但您可以创建 DTO 对象层（抽象层）。然后，您将在您的库中包含并使用这些 DTO 以及您的管理器类。您不必将服务器端的实体类映射到这些 DTO 对象。并且还将客户端生成的对象映射到那些 DTO 对象。
优点是您的经理类现在独立于数据源。应该是因为您将它们与 DB 中的实体类一起使用一次，而与从 Web 服务返回的对象一起使用一次。这样对我来说似乎更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:10:09.670

首先，您应该针对接口而不是类编写依赖于客户端的代码。 [请参阅此参考，它演示了如何指定客户端和服务器都必须实现的显式接口](http://docs.oracle.com/javaee/5/tutorial/doc/bnayn.html)。

也就是说：如果您在服务器端有必须在客户端（重新）使用的 JAXB 类，那么您将无法利用生成的客户端工件的优势。这并不意味着您不能使用 JAXB 类。

使用 JAX-WS Dispatch API 直接使用 JAXB 工件（WSDL 可选！）从您的客户端发送 Web 服务请求。

这是[描述要求](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/twbs_jaxwsdynclient.html)的参考。

这里有些例子：

*   [对于 CFX](http://cxf.apache.org/docs/how-do-i-develop-a-client.html#HowdoIdevelopaclient?-JAXWSDispatchAPIs)
*   [对于 Glassfish 的地铁](http://jax-ws.java.net/2.2.6/docs/ch03.html#section-71379735580733)

# python - 在行和列中切片 scipy.sparse.lil_matrix

> ID：15466116
> 
> 赞同：4
> 
> 时间：2013-03-17T20:53:53.327
> 
> 标签：python, numpy, scipy, sparse-matrix

我想从 scipy 稀疏矩阵中提取特定的行和列 - 可能`lil_matrix`是这里的最佳选择。

它在这里工作正常：

```
from scipy import sparse
lilm=sparse.lil_matrix((10,10))
lilm[0:4,0:3] 
```

这将返回一个 4x3 稀疏矩阵。我不想要矩阵中的一个块，而是单个列和行。我希望这能奏效：

```
lilm[[1,2,3],[4,5,6]] 
```

但它返回一个 1x3 稀疏矩阵。这也不适用于 numpy 数组，但您可以使用 numpy.ix_，如[Slicing of a NumPy 2d array 中所述，或者如何从 nxn 数组 (n>m) 中提取 mxm 子矩阵？](https://stackoverflow.com/questions/4257394/slicing-of-a-numpy-2d-array-or-how-do-i-extract-an-mxm-submatrix-from-an-nxn-ar).

怎么能用 a 来完成这种行为`lil_matrix`？

我的问题在[slicing sparse (scipy) matrix](https://stackoverflow.com/questions/7609108/slicing-sparse-scipy-matrix/7610298#7610298)中得到了部分回答，但我无法让它工作`lil_matrix`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T02:02:51.227

您需要先提取行，然后是列：

```
>>> a = np.arange(100).reshape(10, 10)
>>> a
array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],
       [30, 31, 32, 33, 34, 35, 36, 37, 38, 39],
       [40, 41, 42, 43, 44, 45, 46, 47, 48, 49],
       [50, 51, 52, 53, 54, 55, 56, 57, 58, 59],
       [60, 61, 62, 63, 64, 65, 66, 67, 68, 69],
       [70, 71, 72, 73, 74, 75, 76, 77, 78, 79],
       [80, 81, 82, 83, 84, 85, 86, 87, 88, 89],
       [90, 91, 92, 93, 94, 95, 96, 97, 98, 99]])

>>> lilm = scipy.sparse.lil_matrix(a)

>>> lilm[[1, 2, 3], :].toarray() # extract the rows first...
array([[10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
       [20, 21, 22, 23, 24, 25, 26, 27, 28, 29],
       [30, 31, 32, 33, 34, 35, 36, 37, 38, 39]])

>>> lilm[[1, 2, 3], :][:, [4, 5, 6]].toarray() # ...then the columns
array([[14, 15, 16],
       [24, 25, 26],
       [34, 35, 36]]) 
```

您当然会`.toarray()`从最后一个表达式中删除 以获得作为 LIL 稀疏矩阵的返回值。

# javascript - Highcharts Speedometer javascript 不会在加载时运行

> ID：15466118
> 
> 赞同：0
> 
> 时间：2013-03-17T20:54:17.457
> 
> 标签：javascript, ajax, dom, highcharts, meter

我一直在使用 Highcharts 车速表。我已经设置它来检查服务器是否已启动，如果是，则在速度表中显示一个随机数。如果服务器关闭，则在速度表中显示 0。我已经让它工作了（大部分）。我加载它，运行 Firebug。我关闭了 Apache 服务器，它降到了零。我启动服务器备份，它又回到运行随机数。问题是当我在没有运行firebug的情况下运行它时……javascript似乎没有触发，因为它只是保持为零。一旦我再次启动萤火虫......它再次开始显示随机数。有没有人有任何想法？

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" >
        <title>Sales Meter</title>

        <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
        <script type="text/javascript">
var flag;
var xmlhttp;
var url="http://192.168.0.5/ajax_info.txt";
//ajax call
function loadXMLDoc(url, cfunc){
   if(window.XMLHttpRequest){
      xmlhttp=new XMLHttpRequest();
   }
   else {
      xmlhttp=new ActiveObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange=cfunc;
   xmlhttp.open("GET",url, true);
   xmlhttp.send();
}

function myFunction(){
   loadXMLDoc(url+'?_dc='+(new Date()).getTime(), function(){
      if(xmlhttp.readyState==4 && xmlhttp.status==200){
         flag = 1;
      }
      else {
         flag = 0;
      }
   });
}

$(function () {

    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            type: 'gauge',
            plotBackgroundColor: null,
            plotBackgroundImage: null,
            plotBorderWidth: 0,
            plotShadow: false
        },

        title: {
            text: 'Sales-O-Meter'
        },

        pane: {
            startAngle: -150,
            endAngle: 150,
            background: [{
                backgroundColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, '#FFF'],
                        [1, '#333']
                    ]
                },
                borderWidth: 0,
                outerRadius: '109%'
            }, {
                backgroundColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, '#333'],
                        [1, '#FFF']
                    ]
                },
                borderWidth: 1,
                outerRadius: '107%'
            }, {
                // default background
            }, {
                backgroundColor: '#DDD',
                borderWidth: 0,
                outerRadius: '105%',
                innerRadius: '103%'
            }]
        },

        // the value axis
        yAxis: {
            min: 0,
            max: 100,

            minorTickInterval: 'auto',
            minorTickWidth: 1,
            minorTickLength: 2.5,
            minorTickPosition: 'inside',
            minorTickColor: '#666',

            tickPixelInterval: 15,
            tickWidth: 1,
            tickPosition: 'inside',
            tickLength: 5,
            tickColor: '#666',
            labels: {
                step: 5,
                rotation: 'auto'
            },
            title: {
                text: 'sales/min'
            },
            plotBands: [{
                from: 0,
                to: 10,
                color: '#DF5353' // green
            }, {
                from: 10,
                to: 20,
                color: '#DDDF0D' // yellow
            }, {
                from:20,
                to: 100,
                color: '#55BF3B' // red
            }]        
        },

        series: [{
            name: 'Speed',
            data: [80],
            tooltip: {
                valueSuffix: ' sales/sec'
            }
        }]

    }, 
    // Add some life
    function (chart) {
        setInterval(function () {
                   myFunction();
                   if(flag == 1){
               var point = chart.series[0].points[0],
                   newVal,
                   inc = Math.round((Math.random() - .5) * 20);

               newVal = point.y + inc;
               if (newVal < 0 || newVal > 100) {
                   newVal = point.y - inc;
               }
                   point.update(newVal);
                }
                else{

                   var point = chart.series[0].points[0],
                      newVal=0,
                      inc = 0;
                   point.update(0);
                }
        }, 1000);
    });
});

        </script>
    </head>
    <body>
<script src="highcharts.js"></script>
<script src="highcharts-more.js"></script>
<!--<script src="exporting.js"></script>-->

<div id="container" style="width: 500px; height: 400px; margin: 0 auto"></div>

    </body>
</html> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:53:19.727

好吧，我想通了。当我实例化它时，我需要将标志设置为零（Javascript中是否有实例化变量？）。然后我需要在 point.update() 之后将标志重置为零。这解决了问题。这是代码，如果有人感兴趣。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" >
<title>Sales Meter</title>
<script type="text/javascript" src="jquery-1.8.2.min.js"></script>
<script type="text/javascript">
var flag = 0;
var xmlhttp;
var url="http://192.168.0.5/ajax_info.txt";
//ajax call
function loadXMLDoc(url, cfunc){
   if(window.XMLHttpRequest){
      xmlhttp=new XMLHttpRequest();
   }
   else {
      xmlhttp=new ActiveObject("Microsoft.XMLHTTP");
   }
   xmlhttp.onreadystatechange=cfunc;
   xmlhttp.open("GET",url, true);
   xmlhttp.send();
}

function myFunction(){
   loadXMLDoc(url+'?_dc='+(new Date()).getTime(), function(){
      if(xmlhttp.readyState==4 && xmlhttp.status==200){
         flag = 1;
      }
   });
}

$(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container',
            type: 'gauge',
            plotBackgroundColor: null,
            plotBackgroundImage: null,
            plotBorderWidth: 0,
            plotShadow: false
        },

        title: {
            text: 'Sales-O-Meter'
        },

        pane: {
            startAngle: -150,
            endAngle: 150,
            background: [{
                backgroundColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, '#FFF'],
                        [1, '#333']
                    ]
                },
                borderWidth: 0,
                outerRadius: '109%'
            }, {
                backgroundColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
                    stops: [
                        [0, '#333'],
                        [1, '#FFF']
                    ]
                },
                borderWidth: 1,
                outerRadius: '107%'
            }, {
                // default background
            }, {
                backgroundColor: '#DDD',
                borderWidth: 0,
                outerRadius: '105%',
                innerRadius: '103%'
            }]
        },

        // the value axis
        yAxis: {
            min: 0,
            max: 100,

            minorTickInterval: 'auto',
            minorTickWidth: 1,
            minorTickLength: 2.5,
            minorTickPosition: 'inside',
            minorTickColor: '#666',

            tickPixelInterval: 15,
            tickWidth: 1,
            tickPosition: 'inside',
            tickLength: 5,
            tickColor: '#666',
            labels: {
                step: 5,
                rotation: 'auto'
            },
            title: {
                text: 'sales/sec'
            },
            plotBands: [{
                from: 0,
                to: 10,
                color: '#DF5353' // green
            }, {
                from: 10,
                to: 20,
                color: '#DDDF0D' // yellow
            }, {
                from:20,
                to: 100,
                color: '#55BF3B' // red
            }]        
        },

        series: [{
            name: 'Speed',
            data: [80],
            tooltip: {
                valueSuffix: ' sales/sec'
            }
        }]

    }, 
    // Add some life
    function (chart) {
        setInterval(function () {
                   myFunction();
                   if(flag == 1){
               var point = chart.series[0].points[0],
                   newVal,
                   inc = Math.round((Math.random() - .5) * 20);

               newVal = point.y + inc;
               if (newVal < 0 || newVal > 100) {
                   newVal = point.y - inc;
               }
                   point.update(newVal);
                }
                else{

                   var point = chart.series[0].points[0],
                      newVal=0,
                      inc = 0;
                   point.update(0);
                }
            flag = 0;  //reset flag after point update.  
        }, 1000);
    });
});
</script>

</head>
<body>

<div id="container" style="width: 500px; height: 400px; margin: 0 auto"></div>

<script src="highcharts.js"></script>
<script src="highcharts-more.js"></script>
<!--<script src="exporting.js"></script>-->

    </body>
</html> 
```

# php - 从超链接内的查询中删除 %20

> ID：15466119
> 
> 赞同：1
> 
> 时间：2013-03-17T20:54:18.350
> 
> 标签：php, sql, hyperlink, str-replace

我正在使用：

```
header('Location: palette/'.urlencode(str_replace(' ','_',$title))); 
```

在提交表单时重定向用户。上面的代码将`%20`（空格）替换`_`为输入的标题。

因此，不是用户输入`"Great place"`，而是试图将它们发送到一个名为`palette/Great%20place`它的页面，而是将它们发送到`palette/Great_place`

现在我的问题是，是否可以将此技术应用于超链接？

我有以下循环：

```
<?php   
while($row = mysql_fetch_array($result))
{
    echo "<a href='palette/$row[title]'><div id='main_col_container'>";
    echo "<div class='title'> $row[title]</div>";
    echo "<div class='main_color' style='background: $row[color1];'></div>";
    echo "<div class='main_color' style='background: $row[color2];'></div>";
    echo "<div class='main_color' style='background: $row[color3];'></div>";
    echo "<div class='main_color' style='background: $row[color4];'></div>";
    echo "<div class='main_color' style='background: $row[color5];'></div>";
    echo "</div></a>";
}
?> 
```

这个问题当然是，`$row[title]`代表原始数据（它需要显示`"Great_place"`，而不是`"Great place"`

只是为了澄清一下：**是否可以为我所追求的目的使用 str_replace 超链接，如果可以，我该怎么做？**

* * *

编辑：这就是我现在得到的正在工作的

```
<?php   
while($row = mysql_fetch_array($result))
{

$titleurl   = str_replace(' ','_',$row['title']);

echo "<a href='palette/$titleurl'><div id='main_col_container'>";
echo "<div class='title'> $row[title]</div>";
echo "<div class='main_color' style='background: $row[color1];'></div>";
echo "<div class='main_color' style='background: $row[color2];'></div>";
echo "<div class='main_color' style='background: $row[color3];'></div>";
echo "<div class='main_color' style='background: $row[color4];'></div>";
echo "<div class='main_color' style='background: $row[color5];'></div>";
echo "</div></a>";
}
?> 
```

这是获得结果的最佳技术吗？还是出于某种原因被认为是不好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:55:45.060

当然，只需将您[连接](http://www.php.net/manual/en/language.operators.string.php)`str_replace`到字符串中，而不是插入变量。

# javascript - 滚动时屏幕跳转

> ID：15466128
> 
> 赞同：0
> 
> 时间：2013-03-17T20:54:50.090
> 
> 标签：javascript, html, css

需要一些帮助排除故障[http://mincovlaw.com/goodies/standard_agreements](http://mincovlaw.com/goodies/standard_agreements)

如果在常规屏幕（宽度超过 800 像素）上查看，当我滚动页面时，它会突然上下跳跃（只是一点点）。

我正要写这是唯一一个以这种方式运行的页面，直到我注意到实际上所有页面都有相同的奇怪行为。

此行为在网站的移动版本中不存在。

你能帮我解决这个问题吗？

谢谢！

更新：这是搞乱滚动的功能：

```
function revealmobilemenu() {
    var iebody=(document.compatMode && document.compatMode != "BackCompat")? document.documentElement : document.body;
    var dsoctop=document.all? iebody.scrollTop : pageYOffset;
    scroll_timer = window.setTimeout(function() {
        if (dsoctop > 500) {
            revealmobilemenunow();
        } else {
            hidemobilemenunow();
        }
    }, 100);
} 
```

禁用时，滚动工作正常，但移动版本不显示返回顶部按钮。

更新 2：已解决：问题是桌面版本没有div，所以当它从`position:fixed`变为时，它实际上添加到了窗口中。通过添加桌面 css 修复。`BackToTop``display:none``display:block``position:fixed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:29:40.283

问题是桌面版没有 position:fixed 的 BackToTop div，所以当它从 display:none 变成 display:block 时，它实际上添加到了窗口中。通过添加位置固定：固定为桌面 css。

# php - 需要文件时，路径的写入方式会影响 WordPress 功能的可用性

> ID：15466140
> 
> 赞同：0
> 
> 时间：2013-03-17T20:56:15.637
> 
> 标签：php, wordpress

我`WPAlchemy`在我的 WordPress 主题中使用该类，并将其移至主题文件夹中（作者指示用户将其放置在内容目录中，但我希望将其放在主题文件夹中）。

当我以这种方式包含文件时，一切都按预期工作：

```
require_once WP_CONTENT_DIR . '/themes/efs/inc/metaboxes/wpalchemy/MetaBox.php'; 
```

但如果我将声明更改为：

```
require_once get_template_directory_uri() . '/inc/metaboxes/wpalchemy/MetaBox.php'; 
```

该文件加载正常，但在文件中引发“*未定义函数”*错误。`add_action()``MetaBox.php`

为什么我编写 URL 的方式会影响 WordPress 功能的可用性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T01:09:45.640

If you use require_once on a uri/url then you need to have the php.ini setting of

```
; Whether to allow include/require to open 
; URLs (like http:// or ftp://) as files.
; @SEE http://php.net/allow-url-include
allow_url_include = On 
```

by default it is off ( for good reason )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:59:36.897

我不知道答案，但我会用 echo 语句打印两条路径：

```
echo WP_CONTENT_DIR . '/themes/efs/inc/metaboxes/wpalchemy/MetaBox.php';

echo get_template_directory_uri() . '/inc/metaboxes/wpalchemy/MetaBox.php'; 
```

我确信这两个字符串是不同的。

# prolog - 跟踪一个简单的序言代码以完全理解 CUT (!)

> ID：15466142
> 
> 赞同：1
> 
> 时间：2013-03-17T20:56:28.413
> 
> 标签：prolog, prolog-dif

```
member(X,[X|T]).
member(X,[H|T]):-member(X,T).

delfstocc(X,[X|T],T).
delfstocc(X,[Y|T],[Y|T1]):-delfstocc(X,T,T1),!.

delallocc(X,L,L1):-member(X,L),delfstocc(X,L,R),!,delallocc(X,R,L1);write(L). 
```

〃〃〃

首先，我在不使用 cut 的情况下编写了这段代码，然后我尝试将 cut 运算符放在每个谓词之后，直到我得到完美的答案，但实际上我不明白使用 cut 后它是如何工作的。我知道 cut 运算符停止 prolog 进行匹配，但是我无法正确使用它，所以我想帮助跟踪这段代码，这段代码只是删除了列表中所有出现的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:05:49.247

首先，就削减而言，实际上是这样处理的：

“目标成功并将 Prolog 提交给所有选择，因为父目标与发生剪切的子句的头部统一”。

另见：[http ://www.swi-prolog.org/pldoc/doc_for?object=!/0](http://www.swi-prolog.org/pldoc/doc_for?object=!/0)

关于从列表中删除：为了实现您想要的，您的方法不必要地复杂。这是一个更简单的解决方案：

对于空列表，delete 始终为真：

```
del([],_X,[]). 
```

当列表的头部与要删除的元素相同时，它不属于另一个列表：

```
del([X|Xs], X, Ys) :- del(Xs, X, Ys). 
```

当列表的头部与要删除的元素*不*同时，它属于另一个列表：

```
del([X|Xs], Z, [X|Ys]) :- dif(X,Z), del(Xs, X, Ys). 
```

（注意：从句的顺序很重要！为什么？）

此解决方案不使用剪切和尝试回溯。您可以在适当的位置使用剪切来防止回溯。

# sqlalchemy - sqlalchemy 在尝试更新数据时未能提交某处（但静默失败）

> ID：15466150
> 
> 赞同：0
> 
> 时间：2013-03-17T20:57:37.547
> 
> 标签：sqlalchemy, turbogears2

像所有 CRUD 一样，我需要将一些数据写入表中。当我将新数据写入表时，一切都像魅力一样。当我需要写入表中已经存在的数据（实际上是用相同的主键更新一些数据）时，问题就开始了。数据似乎没有写入表！我开始尝试使用 session.merge() 更新数据，但后来尝试了一种更暴力的方法，即在表中查询相同的 primary_key、删除它以及添加和刷新更改的对象。在某些地方，如果基本的添加和刷新失败，其余的都不起作用。我会很高兴在这里提供线索。

编码：

```
def flush(obj_Instance, id):
"""
taking care of the sqlalchemy flushing
params:
        Instance: an object Instance to flush into
        id: the unique object instance id
"""

DBSession2.add(obj_Instance)

try:

    try:
        DBSession2.flush()
        print ("flushed:", str(obj_Instance))
    except (FlushError, IntegrityError) as err:
        DBSession2.rollback()
        if ('conflicts with persistent instance' in str(err)) or ('Duplicate key was ignored' in str(err)):
            transaction.begin()
            #my original slick take:
            DBSession2.merge(obj_instance) # but after it failed to update correctly I changed to a more brute force approach
            #DBSession2.flush()  #to save the merge
            #from here on trying to brute force it
            #saving for further reference - another try
            newInstance = deepcopy(obj_Instance)
            print ("deleting: %s" % id)
            DBSession2.query(type(obj_Instance)).filter_by(ids = id).delete()
            DBSession2.flush() #at this point, I was so desperate for this to work I literated the code with flush commands.
            DBSession2.add(newInstance)
            DBSession2.flush()
            return
        else:
            raise #handling the case of the same key problem isn't the source of conflicts

except Exception as err:  # supposed to find out the error type and message
# the code doesn't get here, only in real exceptions it was planned to catch, 3 rows in 10,000 uploaded to the db
#TODO: make this less general and more specific
    print str(err)
    write_log(num=id, msg="some sql or sqlalchemy error use num %s as id identifier with object: %s" % (id, obj_Instance.name), timestamp=
        datetime.now(), errtype="sql error", log=str(err))
    DBSession2.rollback()
    transaction.begin() 
```

使用带有 pyodbc 2.1.11 和 tg 2.1 的 sqlalchemy 0.7.3 vs mssql 2005（事务管理器带有 tg，我认为是基于事务的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:04:59.100

问题似乎是`DBSession.rollback()`所有添加/刷新的回滚问题，因为提交仅在事务管理器的最后发生`transaction.commit()`。
一个丑陋的黑客将是`transaction.commit()`在每次循环通过后调用。mike bayer**[在这里](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/sYou8DSb3gA)**描述了一个可能更好的解决方案：从数据库中获取分块数据，比较，更新，然后在没有`session.rollback`. 另一种解决方案是使用`session.begin_nested()`构造添加`SAVEPOINTS`到会话中，因此回滚不会删除数据。

# jquery - 如何在 jquery 中使用滑块 ui 制作搜索栏？

> ID：15466155
> 
> 赞同：0
> 
> 时间：2013-03-17T20:58:28.950
> 
> 标签：jquery, html, html5-video

我使用图像作为 id ：sliderBtn

为了滑动它，我写道：

```
$("#sliderBtn").slider({
      value:0,
      orientation: "horizontal",
      range: "min",
      max: 100,
      step:1,
      animate: true,
      slide:  function(event, ui) {
             not sure what to write here.
           }
}); 
```

滑块不适合我。任何人都可以帮助我吗？我一无所知，最终可能会问一个愚蠢的问题，因为我在这个领域是全新的。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T06:33:20.227

此链接可能对您有所帮助

[http://iviewsource.com/codingtutorials/building-a-ui-slider-with-javascript-and-jquery-ui/](http://iviewsource.com/codingtutorials/building-a-ui-slider-with-javascript-and-jquery-ui/)

您只需要`ui.value`根据自己的要求进行设置，您需要从滑块中获取整数值并为滑块提供整数值，以便在搜索栏中获得更好的搜索选项

我已经在 jwplayer 中做到了这一点。所以我分享我的代码，希望它有帮助

```
 jwplayer().onPlay(function () {
                         var play_position=jwplayer().getPosition();
                        var hr = parseInt(( play_position / 3600 ) % 24);
                        var min = parseInt(( play_position / 60 ) % 60);
                        var sec = parseInt((play_position % 60));
                         $('#seek_position').text(hr+':'+min+':'+sec);
                         var videoLength_s = jwplayer().getDuration();
                           var slider_range=((play_position*100)/videoLength_s);
                           slider_range=Math.round(slider_range);

                        $("#seekBar").slider('option', 'value',slider_range);

 });

      //seekbar slider jquery UI slider is being used 
function slider(total)
{

var totalSecond = Math.round(total);
  $("#seekBar").slider({
    //orientation: "vertical",
    min: 0,
    max:100,
    range: "min",
    animate: true,
    slide: function(event, ui) {
           var range=ui.value;
          var currentTime=(totalSecond*range)/100;

            $('#seek_id').text(range);
          setPosition(currentTime); 
       convert(currentTime);
    }
});

function setPosition(currentTime) {

          jwplayer().seek(currentTime);

} 
```

但我敢肯定，如果你在标签中搜索 html5 api，你可以轻松做到

[http://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html) [http://blog.teamtreehouse.com/building-custom-controls-for-html5-videos](http://blog.teamtreehouse.com/building-custom-controls-for-html5-videos)

：） 希望能帮助到你

# networking - 最长前缀匹配路由表

> ID：15466161
> 
> 赞同：0
> 
> 时间：2013-03-17T20:59:03.243
> 
> 标签：networking, routing, ip, subnet

我必须使用与 1024 个地址的地址池匹配的最长前缀来构建一个最小的路由表。32到A，48到B，48到C，128到D。

我到目前为止是这样的：

```
192.168.100.X/27  A (X is supposed to be 25 + B mask + C mask?)
192.168.100.Y/    B (Y is supposed to be 25 + C mask?)
192.168.100.25?/  C
192.168.100.0/25  D 
```

按照我的理解，D 需要 128 个地址。所以 (2^32)-(2^25) = 2^7 = 128。所以子网掩码（ / 之后的数字）是 25。

那么我如何获得48？48 不是 2 的幂。

“最小”是什么意思？这是否只是意味着地址范围的重叠最少？

谁能帮助我并纠正我对这个话题可能有的任何误解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:00:03.707

答：32 = /27

```
B: 48 = /27 + /28

C: 48 = /27 + /28

D: 128 = /25 
```

2x/28 3x/27 1x/25 共 256 个地址。

剩下 768 个地址，这些地址通常在您的路由表中，但不会由更长的前缀匹配进一步定义 - 前缀编号越高，前缀越长。

有了下面的建议，这使得 768 ip 成为一个连贯的块。相反，如果您要从 1024 个地址中随机分配 ABC 和 D，则意味着由于您在块中创建的间隙和漏洞，您将严重限制自己在未来对新客户的任何分配，从而有效地占用 IP 空间。

因此，您的路由表将包含以下内容：

```
192.168.100.0/22 - default route defining the 1024 addresses.

192.168.100.0/25 - routed towards D (128)

192.168.100.128/27 - routed towards B (32)

192.168.100.160/28 - routed towards B (16+32=48)

192.168.100.176/28 - routed towards C (16)

192.168.100.192/27 - routed towards C (32+16=48)

192.168.100.224/27 - routed towards A (32) 
```

斜线 22 是您通常向同行宣布并在外部传输的内容，而不是宣布许多更长的前缀。由于斜线 22 涵盖了所有这些，因此没有必要。当流量到达您的内部网络时，较长的前缀优先。

如果我不得不猜测最小的含义，它可能是指上述内容，或者将所有子网保留在单个斜线 24 块中。

# android - ScrollView 中的视图与配置的父级不匹配

> ID：15466162
> 
> 赞同：45
> 
> 时间：2013-03-17T20:59:17.710
> 
> 标签：android, android-fragments

我有一个 ViewPager 和一个带有标签的 ActionBar。其中一个选项卡有一个 ListView，当我点击该 ListView 中的一个选项时，我添加了一个子 Fragment，它是该行的详细视图。

该详细视图是一个 ScrollView，里面有一个 LinearLayout。ScrollView 是`match_parent/match_parent`，里面的 LinearLayout 是`width=match_parent`and `height=wrap_content`。在手机大小的模拟器上，详细视图会根据需要填充屏幕，但在平板电脑上，详细视图仅覆盖屏幕的部分宽度......即使 ScrollView 的宽度和 LinearLayout 的宽度是两者都匹配父级。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rootView" style="@style/RootScrollView">

    <LinearLayout android:id="@+id/scrollContentView" style="@style/ScrollViewContent">
        ...
    </LinearLayout>
</ScrollView> 
```

这是滚动视图的样式：

```
<style name="RootScrollView">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">match_parent</item>
</style> 
```

这是内容 LinearLayout 的样式：

```
<style name="ScrollViewContent">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:paddingLeft">15dp</item>
    <item name="android:paddingRight">15dp</item>
    <item name="android:orientation">vertical</item>
    <item name="android:background">@drawable/image_legal_paper_tile</item>
</style> 
```

内容视图具有重复的背景`image_legal_paper_tile`，即：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/legal_paper_tile" 
    android:gravity="fill_horizontal"
    android:tileMode="repeat" /> 
```

因此，图像应该水平拉伸并重复，这会在背景中创建一个黄色的法律纸垫。

这是列表和详细视图看起来像手机模拟器的样子：

![在此处输入图像描述](../Images/032ac17d4f817a5bbc7c02cf5939cd0b.png)

这是真实平板电脑上的列表和详细信息视图。黄色的便笺簿片段应该填满屏幕的整个宽度，但事实并非如此。

![在此处输入图像描述](../Images/a0cf166ba5bdb85e651fa784787080ab.png)

编辑：

这是背景法律文件图像：

![在此处输入图像描述](../Images/1ff1c49030dbf233e4dd2996b0766f57.png)

它的宽度为 320 像素。手机模拟器的宽度为 480 像素，并且图像可以正确拉伸以填充屏幕的宽度。然后它按预期垂直重复。但是，它不会拉伸以填充平板电脑上的屏幕宽度。

平板电脑上显示的宽度不是图像的原始大小，因为它会根据内容改变大小。当片段第一次加载时，它是一个宽度。然后我填写字段并执行在内容视图底部添加一些文本的计算。该文本比现有内容更宽，因此当设置文本时，片段的宽度会增加以支持更宽的内容。

所以，简而言之，不，平板电脑上的宽度不是图像的原生尺寸。图像正在拉伸，只是没有一直拉伸。

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-10-17T13:54:53.403

在 ScrollView 上使用`android:fillViewport="true"`ScrollView 的子级`android:height="wrap_content"`。如果您想拥有许多具有不同属性的孩子，请将主要孩子作为容器。将其设置为`wrap_content`并将其子项设置为`match_parent`。

例子 ：

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:fillViewport="true">

    <LinearLayout
        android:id="@+id/dynamic_frame"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/dimrix_sub_child"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:visibility="gone" >
        </LinearLayout>

        <LinearLayout
             android:id="@+id/dimrix_sub_child_21"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:visibility="gone" >
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

在这个例子中，我可以在代码中为每个孩子设置可见性，它会按照你的意愿匹配父母。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-02-02T07:44:15.193

**尝试将 android:fillViewport="true" 添加到您的 ScrollView**

请记住 android:layout_height=”fill_parent” 的意思是“将高度设置为父级的高度”。这显然不是您在使用 ScrollView 时想要的。毕竟，如果 ScrollView 的内容总是和它自己一样高，它就会变得毫无用处。要解决此问题，您需要使用名为 android:fillViewport 的 ScrollView 属性。当设置为 true 时，如果需要，此属性会使滚动视图的子视图扩展到 ScrollView 的高度。当 child 高于 ScrollView 时，该属性不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-30T09:57:15.083

我有一个类似的问题并以这种方式解决了它：

```
 scrollView.setFillViewport(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T05:53:06.877

我想出了一个解决方法，但我不会接受这个答案，希望有人能找到真正的答案。

在我的列表视图片段 onListItemClick() 处理程序中，我在细节片段上设置了几个属性（minWidth 和 minHeight）。然后在细节片段的 onCreateView() 方法中，我将最小宽度和高度设置为该值。

然后细节片段正确地填充空间并仍然允许滚动等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-14T14:39:36.633

如果您的 parentView`ConstraintLayout`只是设置`android:layout_height="0dp"`为 parentView `ScrollView`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout>

  <SomeView/>

  <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp" 
    android:orientation="vertical">

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <YourItens>

        </LinearLayout>

    </ScrollView>

  </LinearLayout>

  <SomeView .../>

</androidx.constraintlayout.widget.ConstraintLayout> 
```

# javascript - 将按键绑定到 contenteditable 标签

> ID：15466165
> 
> 赞同：1
> 
> 时间：2013-03-17T20:59:25.413
> 
> 标签：javascript, jquery, events, dom

我想将一个`keypress`事件绑定到一个`contenteditable` `<label>`. 这在 Firefox 中按预期工作，但在 Chrome 中，我的绑定函数不会通过键入`<label>`. 请注意，这适用`<div>`于 Chrome 和 Firefox。

[Pretty JS Fiddle](http://jsfiddle.net/faceleg/Wk5LQ/1/)，[raw JS JS Fiddle](http://jsfiddle.net/faceleg/VBdDK/1/)，相关代码如下：

```
<label contenteditable>LABEL: This is some content in a label</label>
<div contenteditable id="div">DIV: This is some content in a div</div>

<div id="message">press key</div>

<script>
    $(function() {
        var eventDetails = function(event) {
            $('#message').html(event.type + ' event fired - ' + event.target.tagName); 
        };
        $('label, #div').bind('keypress', eventDetails);
        $('label, #div').bind('click', eventDetails);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:17:29.663

我相信这是一个 Chrome 错误，并已[报告](https://code.google.com/p/chromium/issues/detail?can=2&q=keyup%20contenteditable%20label&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20Modified&id=209871&thanks=209871&ts=1363554779)。

问题对提供可行替代方案的答案开放。

# ios - 打开 Facebook 应用程序到特定页面

> ID：15466167
> 
> 赞同：-1
> 
> 时间：2013-03-17T20:59:36.210
> 
> 标签：ios, xamarin.ios

这行代码

```
UIApplication.SharedApplication.OpenUrl (NSUrl.FromString ("fb://page/319284411498623")); 
```

或者

```
UIApplication.SharedApplication.OpenUrl (NSUrl.FromString ("fb://profile/319284411498623")); 
```

似乎不起作用。我正在尝试打开 WordRoom facebook 页面（没有广告意图，只是披露所有需要的信息）。它会打开 Facebook 应用程序，但只会打开主提要。Facebook 应用程序今天已下载，iOS 6.1.2 正在运行。

ID 是从这个页面获取的：http: [//graph.facebook.com/wordroom](http://graph.facebook.com/wordroom)

非常感谢您对此的任何帮助。

谢谢

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:19:12.107

可能重复： [是否可以在 iOS 上的 Facebook 移动应用程序中深度链接到特定页面或位置？](https://stackoverflow.com/questions/11149143/is-it-possible-to-deep-link-to-a-specific-page-or-location-in-the-facebook-mobil)

```
NSURL *url = [NSURL URLWithString:@"fb://<insert function here>"];
[[UIApplication sharedApplication] openURL:url]; 
```

您还应该测试是否安装了 fb 应用程序（通过测试 iOS 是否可以打开 URL）：

```
[[UIApplication sharedApplication] canOpenURL:url]; 
```

# java - Java中的运费计算器，出现错误的数字

> ID：15466172
> 
> 赞同：1
> 
> 时间：2013-03-17T21:00:01.640
> 
> 标签：java, calculator, shipping

我是 Java 新手，我们正在根据不同的重量和距离进行运费计算器。我们正在练习 if-else 语句，但我遇到了一个我无法弄清楚的问题。当我计算不同的重量和距离时，我得到了错误的答案。我认为这与我的数学有关，我似乎无法让程序添加下一个距离费用，因为它没有使用剩余部分。请帮助我理解这一点。

```
public class ShippingCharges {

private double weight;
private double miles;

public ShippingCharges (double w, double m)
{
    weight = w;
    miles = m;
}

public double getShippingCharges()
{
    double charges;
    if (weight <= 2.0)
    { charges = (1.10 * miles / 500);
    }
    else if ((weight > 2.0) && (weight <= 6.0))
    {
        charges = (2.20 * (miles  / 500 ));
    }
    else if ((weight > 6.0) && (weight <=10.0))
    {
        charges = (3.70 * (miles / 500 )); 
    }
    else 
    {
        charges = (4.80 * miles  / 500);
    }
    return charges;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:13:00.040

从你所说的我理解问题是你没有四舍五入英里/ 500结果，试试这个：

```
public double getShippingCharges()
{
    double charges;
    if (weight <= 2.0)
    { charges = (1.10 * Math.ceil(miles / 500));
    }
    else if ((weight > 2.0) && (weight <= 6.0))
    {
        charges = (2.20 * Math.ceil(miles  / 500 ));
    }
    else if ((weight > 6.0) && (weight <=10.0))
    {
        charges = (3.70 * Math.ceil(miles / 500 )); 
    }
    else 
    {
        charges = (4.80 * Math.ceil(miles  / 500));
    }
    return charges;

    } 
```

# javascript - html5-video by button $(...).play 不是函数

> ID：15466174
> 
> 赞同：20
> 
> 时间：2013-03-17T21:00:16.173
> 
> 标签：javascript, jquery, html5-video

我尝试通过按钮一个接一个地播放视频，或者在视频结束时自动播放。通过此代码：

```
//automatically play
$("#videoPlayer").bind('ended', function() {
if(cnt <= 10 && bNum == 0) cnt++;
$('#videoPlayer').attr('poster','./media/spot'+cnt+'.jpg').html('<source src="./media/spot'+cnt+'.mp4" type="video/mp4"><source src="./media/spot'+cnt+'.ogg" type="video/ogg"><source src="./media/spot'+cnt+'.webm" type="video/webm">');
$('#video-title').html('Spot '+cnt);
if(cnt < 10) {
  this.load();
  this.play();
  cnt++;
}
bNum = 1;
if(cnt >= 10) $('.link1').remove();
});

//Play by the button
$('.link1').on('click', function() {
  if(cnt < 10 && bNum == 0) cnt++;
  $(this).attr('rel', cnt).attr('title', 'Spot '+cnt);
  $('#videoPlayer').attr('poster','./media/spot'+cnt+'.jpg').html('<source src="./media/spot'+cnt+'.mp4" type="video/mp4"><source src="./media/spot'+cnt+'.ogg" type="video/ogg"><source src="./media/spot'+cnt+'.webm" type="video/webm">');
  $('#video-title').html('Spot '+cnt);
  if(cnt >= 10) $('.link1').remove();
  if(cnt <= 10) {
    if($('#videoPlayer').load()) $('#videoPlayer').play();
    cnt++;
  }
}); 
```

html部分是：

```
<video width="640" id="videoPlayer" autoplay preload="metadata" poster="./media/spot1.jpg">
<source src="./media/spot1.ogg" type="video/ogg">
<source src="./media/spot1.mp4" type="video/mp4">
<source src="./media/spot1.webm" type="video/webm">
Your browser does not support the video tag.
</video></div>
<ul>
<li class="link1" rel="2">Nächster Spot </li>
</ul>
</div> 
```

自动部分运行良好，没有错误。但是按按钮的部分在该行出现错误；

```
$('#videoPlayer').play(); 
```

与消息

```
"$(...).play is not a function". 
```

我找不到原因。（因为`this.play()`我也可以写`$('videoPlayer')`在自动部分。它是一样的。）

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-17T21:04:59.753

`$('#videoPlayer')`给你一个 jQuery 对象，而 jQuery 对象没有`play`方法。您正在寻找的播放方法在 jQuery 对象内的本机 dom 元素中。要访问内部元素，只需使用数组语法或`.get()`. 例如`$('#videoPlayer')[0].play();`或`$('#videoPlayer').get(0).play();`

# core-data - NSFetchResultsController 具有不同的值

> ID：15466179
> 
> 赞同：0
> 
> 时间：2013-03-17T21:01:07.590
> 
> 标签：core-data, nsfetchedresultscontroller

如何将 NSFetchResultsController 用于不同的值？

例如，具有 2 个属性名称、年龄的核心数据实体人。

在 NSFetchResultsController 中搜索唯一年龄，返回每个唯一年龄的姓名和年龄？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:27:28.273

从您上次的评论中，我假设您想要获取年龄和姓名（或系列标题和工作室）的所有*独特组合*。这可以通过以下获取请求来完成：

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Person"];
[fetchRequest setResultType:NSDictionaryResultType];
[fetchRequest setPropertiesToFetch:@[@"name", @"age"]];
[fetchRequest setReturnsDistinctResults:YES];
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error]; 
```

这给出了一个字典数组，包含所有唯一的年龄/姓名组合。

然而有一个问题。如果您将此获取请求与获取的结果控制器一起使用，您将失去自动更改跟踪的能力（参见例如[https://stackoverflow.com/a/13550383/1187415](https://stackoverflow.com/a/13550383/1187415)以获得解释）。我不认为有一种方法可以兼得：自动更改跟踪*和*返回不同结果的获取请求。

# objective-c - NSImage 标准图稿和图标 NSImageNameStatusAvailable

> ID：15466181
> 
> 赞同：1
> 
> 时间：2013-03-17T21:01:12.430
> 
> 标签：objective-c, cocoa, xib, nsimage

当我将 an 添加`NSImageCell`到 xib 时，它有一个 image 属性，我可以在其中看到一些`NSImage`标准的艺术作品。从文档来看，它看起来很多，但在下拉列表中，我得到的更少。具体我正在寻找。

```
NSString *const NSImageNameStatusAvailable;
NSString *const NSImageNameStatusPartiallyAvailable;
NSString *const NSImageNameStatusUnavailable;
NSString *const NSImageNameStatusNone; 
```

我可以在代码中设置图像，但我想在 xib 中排列所有内容。是否有原因它在下拉列表中不可用？我也不想`NSImageCell`在 xib 中看到空的。有没有办法找到主机图像的大小，这样我就可以调整 xib 的大小而无需实际 NSLog'ing 它的尺寸（假设我想使用一堆主机图像）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T23:20:35.447

据我所知，笔尖编辑器中的图像是四组的结合：

*   模板图像（例如按钮）
*   工具栏图标
*   图标服务定义的图标（例如，警告图标）
*   您添加到项目中的图像

任何不在这些集合中的任何东西都不包括在内。可能值得[作为一个错误报告](https://bugreport.apple.com/)。

同时，您可以将其设置为“NSStatusAvailable”（常量名称减去“ImageName”部分），它将在运行时工作。

因此，您可以通过使用单独的应用程序提取各种图标（无论您需要在 nib 中使用哪个图标）然后将它们添加到您的项目而不是任何目标中来作弊。它们仍会显示在弹出窗口中（从 4.6.1 开始），但不会复制到您的应用程序包中，因此您的应用程序将使用系统提供的应用程序。

当然，Apple 可以随时更改图像及其大小，因此在运行时获取它们并根据需要调整视图大小/重新排列视图可能更安全。另一方面，除非您计划在该位置添加对任何随机图像的支持（例如，像 Adium 的状态图标包之类的东西），否则我不会责怪您采取懒惰的方式并只是调整视图/单元格的大小到图像的当前大小，如果它们发生变化，请在某处进行更新。

# c# - IHttpHandler 并继续使用 PageParser.GetCompiledPageInstance 页面

> ID：15466183
> 
> 赞同：0
> 
> 时间：2013-03-17T21:01:26.653
> 
> 标签：c#, asp.net, httphandler, ihttphandler

我正在尝试做一个简单的 HttpHandler 来检查一些事情（安全性 - 虽然这并不重要）并继续页面。它应该很简单，但我显然有 1 个或两个参数到 GetCompiledPageInstance 不正确：

```
public void ProcessRequest(HttpContext context)
{
    if (CheckAccess(context))
        PageParser.GetCompiledPageInstance(context.Request.Path, context.Request.PhysicalPath, context);
}

public bool IsReusable { get { return false; } }

private bool CheckAccess(HttpContext context)
{
    return true;
} 
```

这是一个网站，而不是应用程序，尽管我认为这没有什么不同。

当我将处理程序代码添加到 Web 配置时

```
<add name="SecurityHandler" verb="*" path="*.aspx" type="SecurityHandler" /> 
```

现在我收到一个在添加之前没有得到的错误（没有其他更改）：

> 会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在应用程序配置的 \\ 部分中。

没关系。找到了第二部分的答案：[HttpHandler 和会话状态的问题](https://stackoverflow.com/questions/3637189/problem-with-httphandler-and-session-state)

在处理程序中实现 IRequiresSessionState

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:21:45.327

尝试：

```
 PageParser.GetCompiledPageInstance(context.Request.Path, context.Request.PhysicalPath, context )
         .ProcessRequest( context ); 
```

# java - 解析 SMSThread 的 Google Voice Java api

> ID：15466185
> 
> 赞同：0
> 
> 时间：2013-03-17T21:01:48.853
> 
> 标签：java, parsing, google-voice

我正在尝试分离 SMS 线程，以便我可以轻松获得最新的短信线程，如下所示：

> ```
> SMSThread [id=9ccf49ec18f8f2b46e9aadbf2d07d1c57f162bd5, title=, date=Sun Mar 17 16:19:23 EDT 2013, contact={id=;name=Taylor;number=+1phonenumber;imageUrl=http://www.google.com/voice/resources/1366864992-blue_ghost.jpg;}, read=false, starred=false, listSms=[ 
> ```
> 
> SMS [dateTime=2013 年 3 月 17 日星期日 16:19:00 EDT，来自={id=;name=Contact;number=+1Phonenumber;imageUrl= [http://www.google.com/voice/resources/1366864992-blue_ghost。 jpg](http://www.google.com/voice/resources/1366864992-blue_ghost.jpg) ;}, text=sup??],

我这样做的方式是有效的，但是当有人给我发逗号或括号时，它只会分隔某些部分......有没有更好的方法来不那么草率地解析它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:12:19.127

好吧，而不是解析所有线程，您可以使用 get all SMS 方法，如果您想获取最新的文本，您可以这样做：

```
Collection<SMSThread> smsthreads = v.getSMSThreads();

        SMSThread f = smsthreads.iterator().next();
        Collection<SMS> sms = f.getAllSMS();
        SMS mostrecentsms = sms.iterator().next(); 
```

然后只需我们在 SMS 类中的方法来获取所需的信息

# linux - 当我运行 ssh 进入远程服务器的 bash 脚本并运行 wget 之类的命令时，它会保存在源服务器上而不是目标服务器上？

> ID：15466190
> 
> 赞同：1
> 
> 时间：2013-03-17T21:02:14.277
> 
> 标签：linux, bash, ssh

我有以下 bash 脚本

```
#!/bin/bash
ssh -o "StrictHostKeyChecking no" ubuntu@$1
cd /home/ubuntu
wget google.com 
```

当我运行它时，`./test.sh`我会通过 ssh 进入远程服务器，但除非我按**ctrl+d**然后退出 ssh 会话并将文件保存到，否则该`wget`命令不会运行**`index.html``/home/ubuntu`**

 **如何更改此 bash 脚本以便将`index.html`文件保存在远程服务器上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:05:32.760

只需在命令行中指定要执行的命令即可`ssh`：

```
ssh -o "StrictHostKeyChecking no" ubuntu@$1 'cd /home/ubuntu; wget google.com' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T21:04:41.687

你的脚本做什么：

*   打开到指定主机的交互式连接
*   等待连接完成（这就是你必须按 Ctrl-D 的原因）
*   在本地执行一些命令

你想要的是在远程主机上创建一个脚本并执行它：

```
run.sh
#!/bin/sh
cd /home/ubuntu
wget google.com 
```

在本地主机上的脚本中：

```
ssh -o "StrictHostKeyChecking no" ubuntu@$1 run.sh 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T21:10:49.143

您对 bash 的概念非常错误。Bash 不是创建为您进行输入的宏的方法。Bash 是一种脚本语言，它将在本地机器上执行一系列命令。这意味着它将运行一个连接到远程主机的 ssh 命令。一旦 ssh 脚本执行完毕，bash 将执行 cd，然后执行 wget。

您要做的是将命令传递给远程 ssh 服务器。

```
 #!/bin/bash
 ssh -o "StrictHostKeyChecking no" ubuntu@$1 "cd /home/ubuntu; wget google.com" 
```**

# c# - 如何多次过滤一个对象集？

> ID：15466196
> 
> 赞同：1
> 
> 时间：2013-03-17T21:02:58.953
> 
> 标签：c#, linq, iqueryable

我有一个代表一组人的对象集，我想将它用作 DataGridView 控件的数据源。但在此之前，我想根据搜索字符串过滤一组人。因此，如果搜索字符串是“David John”，我希望保留“David Johnson”和“John Davidson”，而不是“John Williams”、“David Beckham”或“Al Green”。

这是我尝试过的：

```
MyObjectContext context = GetContext();
string searchBox = "John David";
Regex regex = new Regex("[a-zA-Z]+", RegexOptions.Singleline);
MatchCollection matches = regex.Matches(searchBox);
IQueryable<Owner> q = ce.Owner;
foreach (Match match in matches)
{
    q = q.Where(o => o.FirstName.Contains(match.Value) 
        || o.LastName.Contains(match.Value));
}
findOwnerDataGrid.DataSource = q.OrderBy(o => o.LastName); 
```

但它似乎只适用于最后一场比赛“大卫”。

我怎样才能完成我需要做的事情？欢迎任何不同或更简单的解决方案。如果重要，网格是只读的，因此我不必担心绑定/编辑注意事项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:05:57.723

我会使用没有正则表达式的 LINQ to Objects。

```
var items = new List<string>() {
    "David Johnson", "John Davidson", "John Willians", "David Beckham", "Al Green"
};

var queryString = "David John";
var queryItems = queryString.Split(new char[] { ' ' });

var results = items.Where(x => queryItems.All(q => x.Contains(q))).ToList(); 
```

返回你想要的。

对于您的`List<Owner>`查询可能是这样的：

```
var results = items.Where(x => queryItems.All(q => x.FirstName.Contains(q) ||
                                                   x.LastName.Contains(q)))
                   .ToList(); 
```

# ember.js - Ember.js 包装页面上的所有 javascript 对象

> ID：15466198
> 
> 赞同：0
> 
> 时间：2013-03-17T21:03:02.207
> 
> 标签：ember.js

我正在尝试将 Ember.js 仅用于 Rails 项目中页面的一部分。我正在使用 ember-rails，但我在页面上的其他 javascript 对象（特别是 Google 地图）遇到问题，因为 Ember 会自动包装它们。

有没有办法防止这种情况？我的 Ember 代码是命名空间的，但在 application.js.coffee 中似乎需要 Ember 会导致 Ember 包装任何 javascript 对象。

我的页面的 Ember 应用程序初始化如下：

```
(($) ->
  namespace 'AT.Ember.Activity', (exports) ->
   exports.init = () ->
       App = Ember.Application.create()
       # Implementation
) jQuery 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:47:15.240

Ember 不会包装您的 javascript 对象。Coffeescript 确实如此，也许这就是发生了什么？

# delphi - 将记录从一个表复制到另一个不起作用

> ID：15466200
> 
> 赞同：0
> 
> 时间：2013-03-17T21:03:07.767
> 
> 标签：delphi, delphi-5, bde, tdataset

我正在使用 BDE 和平面表。我有两个相同的表，`tblOne`我`tblTwo` 正在尝试将数据从一个表复制到另一个表。不是整个数据库，只是一个使用这个的特定记录：

```
function Tdm.CopyRecord(var tblFrom,tblTo : TTable) : Boolean;
var
  i : Integer;
begin
  Result:=False;
  try
    tblTo.Insert;
    for i:=1 to tblFrom.FieldCount-1 do
    begin
      if tblFrom.Fields[i].FieldName = tblTo.Fields[i].FieldName then
        tblTo.Fields[i].Value:=tblFrom.Fields[i].Value;
    end;
    tblTo.Post;
    Result:=True;
  finally
  end;
end;

if CopyRecord(tblOne,tblTwo) then... 
```

单步执行所有这些值对于 From Table 都是“Null”。

发布后，我将一条空白记录添加到`tblTo`. 所有的值都是空的，这并不奇怪。:)

我在复制数据时哪里出错了？它没有进入复制功能。

我已经在这工作了几个小时，无法让它工作。可能我忽略了一些简单的事情。我添加了“var”参数以查看是否有任何区别，但没有。

哦，顺便说一句，我从“1”而不是“0”开始循环，因为两个文件中的第一个字段都是`AutoInc`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:33:49.793

这是我的做法：

```
function CopyRecord(tblFrom, tblTo: TTable; const StartIndex: Integer=0): Boolean;
var
  i: Integer;
  FieldFrom, FieldTo: TField;
begin
  Result := False;
  for i := StartIndex to tblFrom.FieldCount - 1 do
  begin
    FieldFrom := tblFrom.Fields[i];
    FieldTo := tblTo.FindField(FieldFrom.FieldName);
    if Assigned(FieldTo) then
    begin
      FieldTo.Value := FieldFrom.Value;
      Result := True;
    end;
  end;
end; 
```

我不会*在*方法中使用`tblTo.Insert`/ 。而是在外面使用它，例如：`tblTo.Post` *`CopyRecord`*

 *```
tblTwo.Append;
if CopyRecord(tblOne, tblTwo, 1) then
  tblTwo.Post
else
  tblTwo.Cancel; 
```

这也可以在`Edit`模式下重复使用。*

# javascript - 可视化 html5 音频

> ID：15466201
> 
> 赞同：4
> 
> 时间：2013-03-17T21:03:11.943
> 
> 标签：javascript, jquery, html, audio

我真的很想创建某种均衡器/可视化器来表示来自我的`<audio>`标签的音频。到目前为止，我已经能够找到几个非常奇特的实验来可视化音频。它们中的大多数基于 webgl，并且仅在 chrome 中工作。我不想实现的比这简单得多，它只是一个基本的、一种颜色的 2d 可视化器，没有什么花哨的。

这与我不想实现的非常相似（中间的某种图像和侧面的可视化，非常基本，但我喜欢它；））
[http://www.youtube.com/watch?v =yLRyAz0WFnw](http://www.youtube.com/watch?v=yLRyAz0WFnw)

我希望它工作的方式是基于音频标签的 src 渲染/创建可视化，例如

```
<audio id="test" 
src="http://api.soundcloud.com/tracks/78404260/stream?client_id=7a17129ba9cd5fff34f847e3539829b7">
</audio>
<!-- Some example from sound cloud --> 
```

页面上会有一个画布标签，它从具有特定 id 的音频标签中获取 src，在本例中为“test”。我不认为这么简单的事情应该需要使用 WebGl，而是希望使用普通画布，因此它适用于大多数支持 html5 的浏览器。我是一个javascript新手，所以我不知道从哪里开始。我提到了我之前找到的几个例子，但是查看它们的来源并没有帮助。我正在寻找没有任何复杂情况的优雅解决方案。我知道stackoverflow不是为了要求完整的代码，所以如果你能让我开始，例如解释如何与音频交互，根据正在播放的内容改变那些“均衡器棒”的大小等等......会很棒;） ) （也欢迎 jQuery 建议）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:23:15.060

您不应使用音频，而应使用 WebAudio Api。
Chrome、Safari、Firefox、Edge 处理它，但 IE 不处理。
（见这里：[http](http://caniuse.com/audio-api) ://caniuse.com/audio-api ）
当心 webaudio 在 Safari (webkit) 上带有前缀。

如果您想要更多的全球影响力，SoundManager2 可能（一个可能的）满足您的需求，因为它适用于所有具有 Flash 后备功能的浏览器：
[http ://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

使用 WebAudio，本文解释了如何以一种非常简单的方式从任何轨道中获得频率分析：http: [//joshondesign.com/p/books/canvasdeepdive/chapter12.html](http://joshondesign.com/p/books/canvasdeepdive/chapter12.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T21:09:00.627

已经出现了一个库，它可以做这部分的低级部分，称为[dancer.js](https://github.com/jsantell/dancer.js)（它有一些杀手级的演示）。

我的方法不像您要求的那样动画，但我这样做的方式（[演示](http://fan.st/Joe90)，按“播放所有歌曲”）是在上传歌曲时预先生成波形，并使用 CSS（通过设置`background-image`波形`div`的. 这种方法出奇地好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T17:54:20.700

我创建了一个跨平台音乐均衡器，您可以在均衡开启时播放音频文件：您可以查看教程和演示并从[http://www.bestofjqueryplugins.com/plugins.php?name=下载源代码jquery-音乐均衡器](http://www.bestofjqueryplugins.com/plugins.php?name=jquery-music-equalizer)

# mysql - 来自 MySql 数据库的 Weka 训练数据

> ID：15466202
> 
> 赞同：1
> 
> 时间：2013-03-17T21:03:17.560
> 
> 标签：mysql, weka

这是我关于 weka 使用的第二个帖子（第一个发布[在这里](https://stackoverflow.com/questions/15280072/weka-classification-and-predicted-class)）。我使用 TextDirectoryLoader 成功地为 Weka 提供了训练和样本测试数据。效果很好。现在我想把它转移到生产中，所以要分类的数据是从 mysql 表中检索的。这就是我的做法：

```
 TextDirectoryLoader loader = new TextDirectoryLoader();
    loader.setDirectory(new File("c:/Users/Yehia A.Salam/Desktop/dd/training-data"));
    Instances dataRaw = loader.getDataSet();

    StringToWordVector filter = new StringToWordVector();
    filter.setInputFormat(dataRaw);
    Instances dataTraining = Filter.useFilter(dataRaw, filter);

    // Create test data instances[this works, but the sample data now needs to come frm the db instead, see below]
    //loader.setDirectory(new File("c:/Users/Yehia A.Salam/Desktop/dd/test-data"));
    //dataRaw = loader.getDataSet();
    //Instances dataTest = Filter.useFilter(dataRaw, filter);

    InstanceQuery query = new InstanceQuery();
    query.setUsername("myusername");
    query.setPassword("mypassword");
    String sql = "SELECT d.desc FROM deals d WHERE d.j48 = 1";
    query.setQuery(sql);
    Instances dataTest = Filter.useFilter(query.retrieveInstances(), filter);

    // Classify
    J48 model = new J48();
    model.buildClassifier(dataTraining);

    for (int i = 0; i < dataTest.numInstances(); i++) {
             dataTest.instance(i).setClassMissing();
             double cls = model.classifyInstance(dataTest.instance(i));
             dataTest.instance(i).setClassValue(cls);
             System.out.println(cls + " -> " + dataTest.instance(i).classAttribute().value((int) cls));

    } 
```

不幸的是，这不起作用，weka 在这条线上意外停止：

```
Instances dataTest = Filter.useFilter(query.retrieveInstances(), filter); 
```

所以我想我的问题是如何改变这部分

```
// Create test data instances[this works, but the sample data now needs to come frm the db instead, see below]
//loader.setDirectory(new File("c:/Users/Yehia A.Salam/Desktop/dd/test-data"));
//dataRaw = loader.getDataSet();
//Instances dataTest = Filter.useFilter(dataRaw, filter); 
```

到基于 sql 的数据

```
InstanceQuery query = new InstanceQuery();
query.setUsername("myusername");
query.setPassword("mypassword");
String sql = "SELECT d.desc FROM deals d WHERE d.j48 = 1";
query.setQuery(sql);
Instances dataTest = Filter.useFilter(query.retrieveInstances(), filter); 
```

请注意，数据库连接没有问题，我实际上得到了正确数量的实例。

感谢帮助，非常接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:27:03.457

您的代码使用基于[来自 Text Collections 的 Arff Files 的](http://weka.wikispaces.com/ARFF+files+from+Text+Collections)[TextDirectoryLoader](http://weka.sourceforge.net/doc.dev/weka/core/converters/TextDirectoryLoader.html)类。根据他们的帮助文件

```
"Loads all text files in a directory and 
 uses the subdirectory names as class labels. 
 The content of the text files will be stored in a String attribute, 
 the filename can be stored as well." 
```

请参阅以下[代码](http://weka.wikispaces.com/ARFF+files+from+Text+Collections)

```
 double[] newInst = new double[2];
 newInst[0] = (double)data.attribute(0).addStringValue(files[i]);
 ....
 newInst[1] = (double)data.attribute(1).addStringValue(txtStr.toString());
 data.add(new Instance(1.0, newInst)); 
```

如您所见，此代码需要 2 个属性值来添加您的数据集。但是您的 sql 只提供一个属性。

```
 String sql = "SELECT d.desc FROM deals d WHERE d.j48 = 1"; 
```

这可能是代码 newInst [1](http://weka.sourceforge.net/doc.dev/weka/core/converters/TextDirectoryLoader.html)部分中出现问题“(java.lang.ArrayIndexOutOfBoundsException)”的原因。Weka 找不到第二个属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-18T12:11:00.943

我自己也是一个初学者，但以防万一它有用，你知道有一个[DatabaseLoader](http://weka.sourceforge.net/doc.dev/weka/core/converters/DatabaseLoader.html)类和一个[DatabaseConverter](http://weka.sourceforge.net/doc.dev/weka/core/converters/DatabaseLoader.html)接口吗？

# html - HTML/CSS 内容/侧边栏对齐

> ID：15466203
> 
> 赞同：0
> 
> 时间：2013-03-17T21:03:48.410
> 
> 标签：html, css

我正在尝试创建一个带有内容 div 和侧边栏 div 的简单网站，但侧边栏 div 正在我的内容 div 中向下推一些东西，即使它在外面。我相信这是一个简单的解决方法，但很难找到这个确切的场景。

我在这里创建了一个 jsfiddle，[http://jsfiddle.net/WRs7L/](http://jsfiddle.net/WRs7L/)。

```
<body>
  <div id="wrapper">
    <div id="main"> 
      <div id="sidebar"></div>  
      <div id="content">
        <div id="resume">
          <section id="employment" class="part">
            <h2>Employment</h2>
              <section class="item">
                <div class="info cf">
               <div class="left">
            <span class="title">Title</span>
            <span class="employer">Employer</span>
            <span class="group">Group</span>                
              </div>
              <div class="right">
            <span class="dates">Date</span>
            <span class="location">Location</span>              
              </div>       
                  <div style="clear: both;"></div>   
                </div> 
                <div class="content">
                 <ul>
                   <li>Item 1</li>
                   <li>Item 2</li>
                   <li>Item 3</li>
                 </ul>
               </div>
             </section>    
           </section>    
         </div>
       </div>
     </div>
   </div>
 </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:21:28.000

您需要查看您希望并排放置的两个 div 的宽度和高度。

我认为您的问题是您没有为要放在侧边栏旁边的元素指定宽度/高度。例如，如果您有一个宽度为 1000 像素的页面，您将创建两个 div，例如

```
<div id="side1"></div>
<div id="side2"></div> 
```

然后应用 css 使它们并排坐着：

```
#side1
  {
    width:49%;
    height:500px;
    float:left
    margin-right:1%;
    clear:none;
   }

 #side2   {
    width:50%;
    height:500px;
    float:left;
    clear:none;
   } 
```

# java - 在java中将值添加到数组中

> ID：15466205
> 
> 赞同：-3
> 
> 时间：2013-03-17T21:03:52.837
> 
> 标签：java, arrays

```
int[] tall = new int[28123];

for (int j = 1;j <= 28123; j++){
    int x = 0;
    tall[x] = j;
    x++;
} 
```

这段代码有什么问题？此代码不应该执行以下操作：

1.  创建一个名为 tall 的数组，大小为 28123。
2.  使索引 0 = 1，索引 1 = 2，依此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:05:06.113

`x`不，您在每个循环中都重新初始化。改成：

```
int[] tall = new int[28123];
int x = 0;

for (int j = 1;j<=28123;j++){
    tall[x] = j;
    x++;
} 
```

或者，甚至更好（因为`x`总是等于`j-1`）：

```
int[] tall = new int[28123];

for (int j = 1;j<=28123;j++){
    tall[j-1] = j;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:06:09.900

我建议您在调试器中逐步执行代码，因为调试程序就是它的用途。

我希望您会看到每次`int x = 0;`设置代码循环时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T21:08:29.790

你没有一个错误，而是很多错误。它应该是：

```
int[] tall = new int[28123];

for (int j=0;j<28123;j++){
    tall[j] = j+1;
} 
```

您的代码将 0 放在数组的所有位置。

此外，它会抛出异常，因为数组的最后一个索引是 28123-1（Java 中的数组从 0 开始！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:05:11.917

您总是在更改数组的值之前设置`x`为。`0`

您可以使用：

```
int[] tall = new int[28123];

for (int j = 0;j<28123;j++){
    // Or whatever value you want to set.
    tall[j] = j + 1;
} 
```

`int x=0`或者只是在 for 循环之前删除 x ( ) 的初始化。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-17T21:05:50.243

将 x=0 放在 for 循环之外就是问题所在

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-08T13:47:15.897

*   第一行：创建的数组。
*   第三行循环从 j = 1 开始到 j = 28123
*   第四行在每次访问循环时给变量 x 值 (0)。
*   第五行你把 j 的值放在索引 0 中。
*   第六行你确实将值 x 增加 1。（但它将在第 4 行重置为 0）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-28T10:01:36.633

```
public class Array {
    static int a[] = new int[101];
    int counter = 0;
    public int add(int num) {
        if (num <= 100) {
            Array.a[this.counter] = num;
            System.out.println(a[this.counter]);
            this.counter++;

            return add(num + 1);
        }
        return 0;
    }

    public static void main(String[] args) {
        Array c = new Array();
        c.add(1);
    }
} 
```

# jsf - 我可以对两个页面使用相同的支持 bean 吗？

> ID：15466210
> 
> 赞同：0
> 
> 时间：2013-03-17T21:04:13.650
> 
> 标签：jsf

我目前拥有的 JSF 支持 bean 代表“创建内容”的功能。bean 对应于数据库中的一条记录。我必须创建另一个允许我更新内容的 html 页面。我可以使用相同的支持豆吗？因为它允许我更新数据库中创建的同一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:55:41.593

你在技术上可以。在 JSF 中，“支持 bean”的概念只是一个约定，而不是 JSF 拥有的固有知识或以任何方式强制执行的东西。

然而，公约并非没有意义。在大多数情况下，让一个支持 bean 支持一个视图是最好的方法。

我担心这个评论“ *bean对应于数据库中的一条记录。* ”

对我来说，这听起来像是一个（JPA）实体，因此根本不应该是一个支持 bean。

支持 bean 提供特定于视图的功能。它们调用（EJB）服务并提供对（JPA）实体的访问，但它们*都不*是。

# php - 当包含在 date() 函数中时，PHP 中的 mktime() 给了我错误的年份

> ID：15466212
> 
> 赞同：0
> 
> 时间：2013-03-17T21:04:30.007
> 
> 标签：php, date, mktime

这个要死我了。

我正在尝试编写一个小函数，它可以简单地输出两天后的日期。我正在使用以下代码（在 PHP 模拟器中）尝试使其工作：

```
echo date('d/m/Y', mktime(0, 0, 0, date("d")+2, date("m"), date("Y"))); 
```

我得到的输出是`03/07/2014`，显然是错误的日期（我希望得到`03/17/2014`）。

让我难过的是当我尝试

```
echo date("Y"); 
```

我得到正确的输出，`2013`.

破坏我的代码的日期函数内部发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:06:05.197

你有向后的`day`and`month`参数：[`mktime()`](http://php.net/mktime)

> int mktime ([ int $hour = date("H") [, int $minute = date("i") [, int $second = date("s") [, int **$month** = date("n") [, int **$day** = date("j") [, int $year = date("Y") [, int $is_dst = -1 ]]]]]]])

因此，您正在寻找：

```
echo date('d/m/Y', mktime(0, 0, 0, date("m"), date("d") + 2, date("Y"))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T21:06:34.953

有更简单的方法可以做到这一点。[DateTime](http://php.net/manual/en/book.datetime.php)使处理日期比`mktime()`和更容易`date()`。

```
$now = new DateTime();
$now->modify('+2 days');
$two_days = $now->format('m/d/Y'); 
```

[看到它在行动](http://codepad.viper-7.com/LOLnXh)

# wpf - 适用于 Windows 8 的 WPF 性能监视器

> ID：15466213
> 
> 赞同：6
> 
> 时间：2013-03-17T21:04:34.693
> 
> 标签：wpf, performance, windows-8

我正在尝试监视/查找我的 WPF 应用程序的最大性能瓶颈，并且我一直在谷歌搜索的所有地方都在说“安装 WPFPerf.msi”，但要安装它，我应该先安装 Windows SDK 7.1，但在 Windows 8 上安装失败。

并且 WPFPerf 已从 Windows 8 SDK 工具包中删除。

那么有没有可以在 Windows 8 中运行的 WPF 性能监控工具呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T09:57:57.753

在 WPF 项目中，您可以选择从 Visual Studio 中的“分析”菜单启动性能分析。看这个截图：![Visual Studio 2012 中的性能分析](../Images/c50e1cc05188adc73f6067d67d44d2ee.png)

（这是来自安装了[Windows 8 SDK](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)的 Visual Studio 2012 Ultimate 。）

# jquery - FlexSlider：居中当前图像

> ID：15466216
> 
> 赞同：2
> 
> 时间：2013-03-17T21:04:42.763
> 
> 标签：jquery, slider, flexslider

我从使用[bjqs](http://basic-slider.com/)滑块（它的响应能力较差）切换到使用流行的[FlexSlider](http://flexslider.woothemes.com/index.html)。我修改了 bjqs 滑块以在屏幕中央显示“当前”图像，在当前图像之前和之后显示（部分）上一个和下一个图像。[您可以在此处](http://test.hetzelcreative.com/hybrid/)使用 bjqs 滑块查看我的实现，以了解我所追求的。

现在有了 FlexSlider，我想不出办法来做到这一点。图像向左浮动，因此“当前”图像位于容器的左侧。有人知道实现此目的的方法吗？

现在我只是使用 FlexSlider 的默认样式和标记，使用以下 javascript：

```
 $('.flexslider').flexslider({
    animation: "slide",
    itemWidth: 850,
  }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-30T00:02:51.067

在该部分下的 flexslider.css 文件中：

```
/* FlexSlider Necessary Styles*/ 
```

改变：

```
.flexslider .slides img {width: auto; display: block;} 
```

对此：

```
.flexslider .slides img {width: auto; display: block; margin-left: auto; margin-right: auto;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T17:43:11.243

我只是遇到了同样的麻烦，答案就在 CSS 中。

我的 HTML 格式是这样的：

```
<div id="slider" class="flexslider">
<ul class="slides" >
<li><img src='images/slideshows/image04.jpg' /></li>
<li><img src='images/slideshows/image06.jpg' /></li>
<li><img src='images/slideshows/image07.jpg' /></li>

</ul>
</div> 
```

而且我必须更改 img 和 li 的 CSS 才能使其工作：

```
.flexslider .slides > li {display: none; -webkit-backface-visibility: hidden;} 
.flexslider .slides img {width: 100%; display: block;} 
```

对此：

```
.flexslider .slides > li {display: none; -webkit-backface-visibility: hidden; background-color: #ffffff; text-align: center;} 
.flexslider .slides img {width: auto; display: inline;} 
```

对我来说，我必须添加背景颜色，因为另一张幻灯片的一部分显示在左侧，而白色正好与我的页面布局相匹配。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-15T16:30:32.377

要在 Flexslider 中设置图像水平居中，只需在**flexslider.css**文件中进行如下更改。

找到**.flexslider .slides img**并进行如下更改。

```
.flexslider .slides img {
  width: auto;
  display: block;
  margin: 0 auto;
} 
```

# c# - 推送器初始化时抛出 Newtonsoft.Json.JsonReaderException

> ID：15466222
> 
> 赞同：0
> 
> 时间：2013-03-17T21:05:05.580
> 
> 标签：c#, .net, pusher

有时，我在初始化时收到 Newtonsoft.Json.JsonReaderException。我正在使用来自 Git 的 PusherClient 库。异常是在不同的线程上抛出的，特别麻烦。我在初始化中没有做任何特别的事情。我想我直接从 Pusher .NET 示例中得到了这段代码：

```
if (!_isInitialized)
{
    _pusher = new Pusher(_pusherKey);
    _pusher.Connected += PusherConnected;
    _pusher.ChannelAuthEndpoint = _authUri + HttpUtility.UrlEncode(_clientName);
    _pusher.ConnectionStateChanged += PusherOnConnectionStateChanged;
    _pusher.Connect();
} 
```

Pusher Auth Endpoint 是我在此初始化链中唯一拥有的其他组件，它使用 PusherProvider（在 PusherRESTDotNet 库中提供）来验证私有和在线通道请求。身份验证提供程序中没有抛出异常。

我可以向这些库添加额外的日志记录，以发现正在发送的内容，以及导致 JSON 库打嗝的原因，但我不确定从 Pusher 的角度来看恢复路径应该是什么；我试图保持 Pusher .NET 库的黑盒消费者。任何想法/想法表示赞赏。

当它成功时，我从 Pusher 跟踪日志中得到以下信息：

```
Pusher Information: 0 : Websocket opened OK.
Pusher Information: 0 : Websocket message received: {"event":"pusher:connection_established","data":"{\"socket_id\":\"24213.760310\"}"}
Pusher Information: 0 : Websocket message received: {"event":"pusher_internal:subscription_succeeded","data":"{}","channel":"private-HW-PusherChannel"}
Pusher Information: 0 : Websocket message received: {"event":"pusher_internal:subscription_succeeded","data":"{\"presence\":{\"count\":2,\"ids\":[\"24213.760310\",\"24305.693765\"],\"hash\":{\"24213.760310\":{\"name\":\"SITE2\"},\"24305.693765\":{\"name\":\"SITE1\"}}}}","channel":"presence-channel"} 
```

失败时会出现以下情况：

```
Pusher Information: 0 : Websocket opened OK.
Pusher Information: 0 : Websocket message received: {"event":"pusher:connection_established","data":"{\"socket_id\":\"24102.767432\"}"}
Pusher Information: 0 : Websocket message received: {"event":"pusher_internal:subscription_succeeded","data":"{\"presence\":{\"count\":2,\"ids\":[\"24102.767432\",\"24305.693765\"],\"hash\":{\"24102.767432\":{\"name\":\"SITE2\"},\"24305.693765\":{\"name\":\"SITE1\"}}}}","channel":"presence-channel"}
Pusher Information: 0 : Websocket message received: {"event":"pusher:error","data":{"code":null,"message":"Cannot broadcast client event (connection not subscribed to channel private-HW-PusherChannel)"}} 
```

完整的堆栈如下：

```
Exception: Newtonsoft.Json.JsonReaderException: Error reading string. Unexpected token: StartObject. Path 'data', line 1, position 32.
   at Newtonsoft.Json.JsonReader.ReadAsStringInternal()
   at Newtonsoft.Json.JsonTextReader.ReadAsString()
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ReadForType(JsonReader reader, JsonContract contract, Boolean hasConverter)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.ResolvePropertyAndConstructorValues(JsonObjectContract contract, JsonProperty containerProperty, JsonReader reader, Type objectType)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObjectFromNonDefaultConstructor(JsonReader reader, JsonObjectContract contract, JsonProperty containerProperty, ConstructorInfo constructorInfo, String id)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateNewObject(JsonReader reader, JsonObjectContract objectContract, JsonProperty containerMember, JsonProperty containerProperty, String id, Boolean& createdFromNonDefaultConstructor)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value, JsonSerializerSettings settings)
   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value)
   at Newtonsoft.Json.JsonConvert.DeserializeAnonymousType[T](String value, T anonymousTypeObject)
   at PusherClient.Connection.websocket_MessageReceived(Object sender, MessageReceivedEventArgs e) in C:\svn\non-scm\pusher-dotnet-client\PusherClient\Connection.cs:line 98
   at WebSocket4Net.WebSocket.FireMessageReceived(String message)
   at WebSocket4Net.Command.Text.ExecuteCommand(WebSocket session, WebSocketCommandInfo commandInfo)
   at WebSocket4Net.WebSocket.ExecuteCommand(WebSocketCommandInfo commandInfo)
   at WebSocket4Net.WebSocket.OnDataReceived(Byte[] data, Int32 offset, Int32 length)
   at WebSocket4Net.WebSocket.client_DataReceived(Object sender, DataEventArgs e)
   at SuperSocket.ClientEngine.ClientSession.OnDataReceived(Byte[] data, Int32 offset, Int32 length)
   at SuperSocket.ClientEngine.AsyncTcpSession.ProcessReceive(SocketAsyncEventArgs e)
   at SuperSocket.ClientEngine.AsyncTcpSession.SocketEventArgsCompleted(Object sender, SocketAsyncEventArgs e)
   at System.Net.Sockets.SocketAsyncEventArgs.OnCompleted(SocketAsyncEventArgs e)
   at System.Net.Sockets.SocketAsyncEventArgs.ExecutionCallback(Object ignored)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Net.Sockets.SocketAsyncEventArgs.FinishOperationSuccess(SocketError socketError, Int32 bytesTransferred, SocketFlags flags)
   at System.Net.Sockets.SocketAsyncEventArgs.CompletionPortCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
   at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP) 
```

# jsf - JSF 项目的非常基本的依赖项是什么？

> ID：15466225
> 
> 赞同：0
> 
> 时间：2013-03-17T21:05:11.480
> 
> 标签：jsf, jakarta-ee

我正在努力学习 JSF。

有人可以给我一个 JSF 项目所需的最少依赖项，该项目将被构建到一个显示 Hello world 的战争文件中吗？我想我需要一个 servlet 和 apache myfaces？

如果它是在maven依赖方面会更好。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:02:33.870

最简单的设置是下载 TomEE（它包括 Servlet 和 JSF）。然后使用以下作为 Maven 依赖项：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

最基本的 JSF 应用程序之一的示例：[最小的 3 层 Java EE 应用程序，没有任何 XML 配置](http://jdevelopment.nl/minimal-3tier-java-ee-app-xml-config)

# jquery - jQuery .html() 完成时的 CSS 动画过渡

> ID：15466228
> 
> 赞同：4
> 
> 时间：2013-03-17T21:05:16.603
> 
> 标签：jquery, css-transitions, race-condition

我想要做的是附加一个容器，用内容填充它，然后通过删除一个类并让 CSS 通过转换处理它来为它设置动画。我可以做所有这些，除了动画它。我认为它可能是某种竞争条件或类似的东西，因为如果我在删除类时设置一个 setTimeout() ，它将动画。这是一个小提琴两个例子：

[http://jsfiddle.net/38q7A/3/](http://jsfiddle.net/38q7A/3/)

**HTML**

```
<div class="test1">test 1</div>

<div class="container"></div> 
```

**CSS**

```
.flyin {
     -webkit-transition: all 1s ease-in-out;
     -moz-transition: all 1s ease-in-out;
     -ms-transition: all 1s ease-in-out;
     -o-transition: all 1s ease-in-out;
     transition: all 1s ease-in-out;
}

.left {
     position: fixed;
    -webkit-transform: translateX(-100%);
    -moz-transform: translateX(-100%);
    -ms-transform: translateX(-100%);
    -o-transform: translateX(-100%);
    transform: translateX(-100%);
 } 
```

**JavaScript**

```
function test1(){
     $(".container").append("<div class='flyin left'></div>");
     $(".flyin").html("this is test content");
     $(".flyin").removeClass("left");
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:40:24.107

我不知道是否可以选择更改 html，但是您可以预先生成一个空的左飞元素，并且仅在单击[http://jsfiddle.net/uHPmc/1/时触发动画](http://jsfiddle.net/uHPmc/1/)

```
<div class="container">
    <div class="left flyin"></div>    
</div>

function test1(){
    $(".flyin").html("this is test content");
    $(".flyin").removeClass("left");
    $(".container").append("<div class='flyin left'></div>");
}; 
```

# spring - 测试之外的上下文配置

> ID：15466229
> 
> 赞同：2
> 
> 时间：2013-03-17T21:05:19.480
> 
> 标签：spring, autowired

在遵循示例之后，这适用于 JUnit 测试：

```
@ContextConfiguration(locations = "classpath:/spring/context.xml")
@RunWith(SpringJUnit4ClassRunner.class)  
@Transactional  
public class ServiceTest  {
    @Autowired
    private Service service;

    @Test
    public void doSomething() {
    assertEquals(0, service.getNumber()); ...
    } 
```

当我尝试将其移至非测试代码时，这不起作用：

```
// @ContextConfiguration only works for testing (JUnit).  What do I use here, instead?  
// @ContextConfiguration(locations = "classpath:/spring/helloWorldContext.xml")  
@Service // supposedly to get the Spring Container to 'see' this class
public class Accessor {      
    @Autowired( required=true )      
    private Service service;

    @Autowired
    public Accessor() {
    return service.getNumber(); ...
    } 
```

基本上，我想以与使用测试类相同的方式使用非测试类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:20:58.750

您可能需要通过将其添加到您的 spring 配置文件来启用 annotation-config：

```
<context:annotation-config /> 
```

文档： [http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-annotation-config](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-annotation-config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:26:21.847

据我所知，您不能对普通 bean 执行此操作，但您可以创建`@Configuration`类并将其放在您的 bean 旁边：

```
@Configuration
@ImportResource("classpath:/spring/context.xml")
public class ServiceConfiguration {} 
```

# linux - 将 Linux x86-64 程序集 hello world 程序与 ld 链接失败

> ID：15466232
> 
> 赞同：3
> 
> 时间：2013-03-17T21:05:43.800
> 
> 标签：linux, assembly, 64-bit, x86-64, nasm

我最近一直在 linux 上玩 x86 64 位汇编，在编译了一个看似简单的程序后，我只能摸不着头脑：P

虽然我编译和链接它不会抛出任何错误并产生一个 linux ELF 当我尝试运行它时，我得到：

```
.:[ h4unt3r@sp3ctr4l-h0st asm ]:.
#(0)> ./hello 
bash: ./hello: No such file or directory 
```

我假设它产生了一个无效的 ELF 文件，这就是为什么它报告 hello 不存在，即使它是。不知道为什么-我可能会继续玩它，只是好奇这是否可以用简单的方法解决^_^

这是我的编译/链接命令行：

```
nasm -f elf64 hello.s -g
ld -o hello hello.o -lc 
```

这是代码：

```
section .data
    msg: db "Hello, world!",0xa,0

section .text
    extern printf
    global main

main:
    push rbp
    mov rbp, rsp

    mov rdi, msg
    xor rax, rax
    call printf
    xor rax, rax

    pop rbp
    ret 
```

编辑——我不想使用 gcc :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T23:12:07.843

我正在运行 32 位硬件，无法测试 64 位的东西。我在 32 位代码中看到了这个“没有这样的文件”错误。ld 默认使用“/lib/ld-linux.so.1” - 您可以在可执行文件中以纯文本形式看到此字符串。这是不存在的文件（显然“hello”就在那里！）。解决方案是告诉 ld `-I/lib/ld-linux.so.2`。我怀疑类似的解决方案适用于 64 位，但我不知道您需要什么“解释器”或“动态链接器”。尝试在可执行文件中查找类似的字符串，并在您的库中查找类似的 .so。你不应该“需要”使用 gcc ......但是 gcc 知道在哪里可以找到这些东西！可能更容易使用它。真是个令人困惑的错误，不是吗？

（我希望你的入口点是`_start`，而不是`main`如果你打算这样做的话。你将无法`ret`从这个 - 使用 sys_exit 或 exit()。）

我不熟悉 nrz 提到的关于“符号表 0”的错误。当然不是故意改变 Nasm！[Nasm 开发人员在http://www.nasm.us](http://www.nasm.us)上或周围闲逛，很高兴在那里听到反馈和错误报告。（好吧，也许不是对错误报告感到“高兴”。）我会看看我是否能找到任何东西......

FWIW，Nasm 默认只使用`-g`开关“刺伤”调试信息。要启用“矮人”调试信息，`-F dwarf`...应该工作得更好...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T21:19:08.070

首先，要使用`printf`，您需要使用`gcc`而不是链接`ld`：

```
gcc -o hello hello.o 
```

那么，另一个问题可能和我自己遇到的一样。我不确定这是 NASM 中的错误还是预期的更改：

```
user@computer:~/code/asm$ nasm -f elf64 hello.asm -g; gcc -o 你好你好.o
/usr/bin/ld: 错误: 重定位节 9 使用了意外的符号表 0
collect2：错误：ld 返回 1 个退出状态

```

我已经通过转移到[YASM](http://yasm.tortall.net/)解决了这个问题，并以这种方式进行组装和链接：

```
yasm -f elf64 hello.s -g dwarf2
gcc -o hello hello.o 
```

这会产生一个具有预期输出的可执行文件：

```
./hello
Hello, world! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-04T15:03:28.063

稍微修改一下代码。

```
section .data
        msg:    db "Hello, world!",0xa,0
section .text
        extern  printf
 global _start
_start:
        ; RSP already 16-byte aligned, ready for a function call.
        mov     rdi,msg           ; or better, lea rdi, [rel msg]
        xor     eax, eax          ; AL=0  - no XMM args
        call    printf

        mov     rax,60  ; use _exit syscall
        mov     rdi,0   ; exit code 0
        syscall         ; call kernel 
```

并链接使用它来设置正确的现代 ld.so 路径，而`ld`不是现代 GNU/Linux 系统上不存在的默认路径。

`ld hello.o -o hello -lc --dynamic-linker /lib64/ld-linux-x86-64.so.2`

请注意，*这只*适用于动态链接的可执行文件。如果静态链接，则需要手动调用 glibc 的 init 函数来初始化其数据结构（如 stdio 缓冲区），然后类似的函数`printf`才能工作。

# javascript - 如果文本比 div 宽，jQuery 添加换行符

> ID：15466233
> 
> 赞同：0
> 
> 时间：2013-03-17T21:05:45.827
> 
> 标签：javascript, jquery, css, html, text

我使用以下 jQuery 代码将文本添加到 div：

```
jQuery("div").text('some lorem ipsum'); 
```

div 的最大宽度由 css 设置为 400px。如果我输入的文本长度超过 400 像素且没有空格，则文本不会被分解为新行。相反，它溢出了我不想要的 div。我该如何解决这个没有空格的文本在 400px 后被分解为新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:08:49.650

使用 css `word-break` [jsfiddle](http://jsfiddle.net/5Uax3/)

```
div{
 word-break:break-all;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:10:02.473

您可以在 CSS 中使用以下`word-wrap`属性执行此操作：

```
div {
    word-wrap: break-word
} 
```

# node.js - 类型错误：对象# 没有方法“错误”

> ID：15466234
> 
> 赞同：1
> 
> 时间：2013-03-17T21:05:49.497
> 
> 标签：node.js, express

我正在关注来自[http://www.manning.com/cantelon/](http://www.manning.com/cantelon/)的“Node.js In Action”一书的早期访问版本，并且作者在有关 Express 的部分中对“res”对象使用方法“error()”。因此，从书中复制的以下代码：

```
exports.required = function(field){
    field = parseField(field);
    return function(req, res, next){
        if (getField(req,field)){
            next()
        } else {
            res.error(field.join(' ') + ' is required');
... 
```

但是，这会因错误而中断：

```
TypeError: Object #<ServerResponse> has no method 'error' 
```

从 Node.js 文档中，我看到没有响应对象的方法。我想知道是否有一个中间件用我需要包含的缺失方法 error() 来装饰“res”对象。这是当前的配置：

```
app.configure(function(){
  app.set('port', process.env.PORT || 3001);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.set('photos', __dirname + '/public/photos');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.static(path.join(__dirname, 'public')));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('your secret here'));
  app.use(express.cookieSession());
  app.use(user);
  app.use(app.router);
  app.use(express.errorHandler());
}); 
```

如果没有，但您知道如何使用方法 error() 来装饰响应对象，如果您能分享它的代码片段，我将不胜感激。谢谢你

# scala - 部署自动化

> ID：15466239
> 
> 赞同：6
> 
> 时间：2013-03-17T21:05:58.827
> 
> 标签：scala, deployment, jetty, lift, puppet

我有一个 Lift 应用程序，它被打包为 WAR 存档，并且必须部署在 Jetty 下。但是，我希望能够自动执行一些任务：

*   指定目标服务器（或服务器集合）。我有多个服务器，从开发服务器到测试服务器和生产服务器，我希望能够轻松控制部署的目的地。
*   目的地（例如 DEVELOPMENT）可能意味着服务器的集合，用于负载平衡目的。
*   测试阶段。基本上，在每次部署中，如果应用程序无法编译或者一个或多个测试失败，我都希望运行整个测试集并阻止部署。
*   WAR 档案必须部署在 Jetty 下，同样在一台或多台运行 Linux 的 Amazon EC2 机器上。（Ubuntu 12.10）

我正在使用 SBT，但我不知道这对 Puppet 或类似的东西会有多好。你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T14:43:13.507

我一直在看这个问题，希望有人能提出一个聪明的答案。既然他们没有，我想我会在这件事上表达我自己的感受。

据我所知，没有现成的工具可以自动执行这些类型的部署，我认为这是因为有很多不同的场景需要处理。至少，你有：

1.  单个开发服务器，只需将 WAR 复制到位，然后重新启动应用程序服务器。
2.  单个生产服务器，其过程类似，但您不希望该过程扰乱您的用户。此处的注意事项包括在重新启动时保留会话数据，并在使用率较低的时间计划重新启动。
3.  一个小型集群，您在其中有多个节点上的负载均衡器。现在事情真的变得复杂了。您可能正在使用各种不同的 LB 工具（HA 代理、NGINX、亚马逊的 Elastic LB），如果您关心您的用户体验，您需要协调应用服务器的滚动重启。在节点之间迁移任何会话数据也是一个问题。
4.  您有一个由不同地理区域中的较小集群组成的大型集群。在这里，您正在处理#3 + 需要进行的任何配置以在区域之间进行协调。

我想 1 和 2 将是最容易找到通用工具的，如果这些是我需要处理的唯一情况，我可能只是将 Jenkins 与应用程序一起部署。它可以很容易地配置为在发生更改时从 git 分支中提取，构建代码并重新启动 Jetty。但是，当您达到 3 和 4 时，我认为所涉及的不同工具的数量以及协调它们的需要已经排除了任何类型的标准解决方案。我不认为这只是 Java/Scala 世界中的一个问题，因为我已经看到 Github 人员关于他们为管理[Rails 应用程序部署而](https://github.com/blog/1241-deploying-at-github)构建的自定义工具的文章。

至于 Puppet，需要注意的是，我从未使用过它，它似乎可能是此类流程的有用工具。您需要某种类型的中央协调器来处理集群，我相信 Puppet 可以提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T16:27:07.433

您可以使用我们的产品[BuildMaster](http://inedo.com/buildmaster)来完成所有这些事情。我注意到您提到了 Puppet，请务必注意，该工具是为基础设施自动化而设计的，而不是软件部署和交付。

在 DevOps 领域工作时，我们发现通过团队协作保持软件和基础架构部署正交和同步非常重要（开发人员不是运维人员，反之亦然）。

要解决您的要点：

### 部署到多台服务器

创建自动化部署计划时，您可以指定一个服务器组，并根据需要在组中添加/删除服务器。

### 测试阶段

您可以在生产之前使用任意数量的测试环境设置工作流，这些工作流可以包括自动检查（即升级要求），以便在允许将构建升级到下一个环境之前通过测试。内置的用于确保通过单元测试，但您可以为任何命令行工具输出指定它们，甚至编写自定义扩展。

### 码头部署

复制 WAR 文件就像使用 SSH 代理将工件部署到服务器一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T22:16:05.720

也看了这个问题。

实际上有同样的感觉：你不能考虑所有可能的环境，框架只允许你选择你想要的。因此，请使用任何令人愉快的部署工具并使用它。

（当然，SBT 允许您测试、防止打包，并且有很多部署工具都具备 WAR-s 和 Jettyies 的知识。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T08:00:51.710

这是一个典型的 DevOps 场景。我认为 Jenkins 将通过添加几个开源插件来帮助解决前两个要求，以获得对作业的更多控制，例如“CloudBees 构建流程”和“节点和标签参数”。

Puppet 或 Chef 肯定会帮助您配置一堆系统，并准备好软件配置。它们几乎是等价的，但 Chef 支持的操作系统平台较少。

我建议您参考 OpenStack 的持续集成，尤其是在项目门控和基础设施自动化方面：[http ://ci.openstack.org/](http://ci.openstack.org/)

对于部署，有 urbancode uDeploy，它允许您在友好的 GUI 上设计您的自动化部署过程，但它现在是商业的（被 IBM 收购）。实际上 Jenkins 可以做同样的事情，但需要更多的编码和脚本。

# html - 中心容器上的阴影；下面的色带

> ID：15466243
> 
> 赞同：0
> 
> 时间：2013-03-17T21:06:23.537
> 
> 标签：html, css

我现在正在设计我的投资组合网站，我正在尝试找出使用 CSS 创建以下效果的最佳方法。我想要一个带有盒子阴影的中心容器，然后用颜色条在视觉上区分不同的部分。

![在此处输入图像描述](../Images/7153f6ec38df4fda7451cb739b9228ab.png)

我不确定完成此操作的最佳方法是什么，因为您无法创建仅从左右延伸的盒子阴影。目前，我有以下内容：

```
 <div id="content"> // the container with the shadow </div>
    <div id="header"> // the brown section </div> 
```

* * *

```
#content {
    width:960px;
    margin:auto auto;
    box-shadow:0px 0px 50px 5px #999;
}

#header {
    position:absolute;
    top:0;
    z-index:-99;
    width:100%;
    height:550px;
    background:#cbbbae; 
} 
```

* * *

![在此处输入图像描述](../Images/ea191cfb7bd002886fb7d89cf73666df.png)

这“有效”，但我不想依赖绝对定位。理想情况下，每个部分都是它自己的 div 容器，我只需更改背景颜色。

也许我缺少一个明显的解决方案，但这就是我在这里的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:37:23.040

尚未测试它是否可以与旧版本的跨浏览器一起使用（在当前版本的 Chrome、FF 和 Safari 中可以使用），您可以使用负边距和溢出隐藏（可能您需要对填充进行一些调整以使其在任何地方都能正常工作） ：

**CSS**

```
.inner {
    margin: auto;
    width: 100px;
    margin-top: -5px;
    margin-bottom: -5px;
    padding-top: 5px;
    padding-bottom:5px;
    box-shadow: black 0px 0px 10px;
}
.outer {
    overflow: hidden;
    background-color: rgb(255,255,200);
}

.outer2 {
    overflow: hidden;
    background-color: rgb(200,200,255);
} 
```

**HTML**

```
<div class="outer">
    <div class="inner">test</div>
</div>
<div class="outer2">
    <div class="inner">test</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:36:15.387

我想到的是拥有一个覆盖整个页面的 div，因此充当您的主体，然后对其应用渐变以实现 3 种不同的颜色。比在这样的 div 中有另一个 div 垂直延伸到整个页面，并给它一个盒子阴影。

这是现场示例：[示例](http://jsfiddle.net/BVkpx/)

**HTML**

```
<div class="container">
    <div class="page-wrap"></div>
</div> 
```

**CSS**

```
.page-wrap {
    margin: 0 20%;
    width: 60%;
    height: 100%;
    position: absolute;
    box-shadow: 0 0 5px 2px #424242;
}

.container {

    width: 100%;
    height: 100%;
    position: absolute;
    background: #cbbcaf;
    background: -webkit-gradient(linear, 0 0, 0 100%, from(#cbbcaf), color-stop(0.15, #cbbcaf), color-stop(0.15, #ffffff), color-stop(0.51, #ffffff), color-stop(0.85, #ffffff), color-stop(0.85, #90c8fc), to(#90c8fc));
    background: -webkit-linear-gradient(#cbbcaf 0%, #cbbcaf 15%, #ffffff 15%, #ffffff 51%, #ffffff 85%, #90c8fc 85%, #90c8fc 100%);
    background: -moz-linear-gradient(#cbbcaf 0%, #cbbcaf 15%, #ffffff 15%, #ffffff 51%, #ffffff 85%, #90c8fc 85%, #90c8fc 100%);
    background: -o-linear-gradient(#cbbcaf 0%, #cbbcaf 15%, #ffffff 15%, #ffffff 51%, #ffffff 85%, #90c8fc 85%, #90c8fc 100%);
    background: linear-gradient(#cbbcaf 0%, #cbbcaf 15%, #ffffff 15%, #ffffff 51%, #ffffff 85%, #90c8fc 85%, #90c8fc 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#cbbcaf', endColorstr='#90c8fc',GradientType=0 );

} 
```

请注意，您可以调整渐变中的百分比以实现满足您需要的不同颜色的高度。但是，如果您不想这样做，则需要使用绝对定位。

# user-interface - 向 ListCtrl WxPython 中的每一行添加一个按钮

> ID：15466244
> 
> 赞同：0
> 
> 时间：2013-03-17T21:06:25.430
> 
> 标签：user-interface, wxpython, listctrl

我想为 ListControl 中的每一行添加一个单选按钮/普通按钮。

任何人都可以提供一些有用的提示吗？

所以，我想要实现的基本功能是这样的。

针对列表中添加的每个项目，我想添加一个将由用户填充的有效/无效标志。所以每一行都会有一个单选按钮。

这方面的任何信息都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:53:26.377

不，ListCtrl 不支持。不过，您可以通过 CheckListCtrlMixin 添加一个复选框。否则，您将不得不使用 UltimateListCtrl，它是纯 Python 并允许向其中添加各种小部件。如果您下载 wxPython 演示并查看演示的 Advanced Generic Widgets 部分，您可以了解它是如何工作的。这个小教程也可以帮助您启动和运行： http: [//www.blog.pythonlibrary.org/2011/11/02/wxpython-an-intro-to-the-ultimatelistctrl/](http://www.blog.pythonlibrary.org/2011/11/02/wxpython-an-intro-to-the-ultimatelistctrl/)

# java - 使用增强循环将数组的所有值相乘？爪哇

> ID：15466246
> 
> 赞同：-4
> 
> 时间：2013-03-17T21:06:34.943
> 
> 标签：java, arrays

标题几乎涵盖了它。出于某种原因，这个问题正在逃避我，我找不到合乎逻辑的答案。

编辑：

说我有

```
int[] values = (2,5,3,2,1,4,6,3,2,1,5,3) 
```

我想得到所有这些元素的乘积。我的教科书要求使用增强的 for 循环来做到这一点。

```
for (int element : values)
{
NO CLUE WHAT TO PUT HERE
} 
```

然而，我的第一个猜测是，它无法通过增强的 for 循环来完成。

我的教科书只是想骗我教我一些教训吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:21:45.730

这不能通过增强的 for 循环来完成。假设您有一个数组：（*我在 OP 更新问题后更新了答案，更新如下*）。

`int[] a = {1,2,3};`

当你这样做时：

```
for(int num : a) {
  num = num*something;
} 
```

您实际上是在乘以*另一个变量*（数组不会受到影响）..

`num`在上面的例子中只是*一个数组元素的副本*。所以实际上你正在修改一个局部变量，而不是数组本身。

阅读**[本文](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)**，您会看到数组中的值被**复制到一个局部变量**中，并且使用了这个局部变量。所以这个乘法不会影响数组的原始值。

* * *

*操作更新*：

如果你想将元素相乘并得到结果，你**可以**. 你的教科书不是想欺骗你。它不会要求您*更改*值。但是要使用它们来进行一些计算：

```
int[] values = {2,5,3,2,1,4,6,3,2,1,5,3};
int result=1;
for(int value : values) {
    result *= value;
} 
System.out.println("The result: " + result); //Will print the result of 2*5*3*2*... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:20:17.140

**这可以通过增强的 for 循环轻松完成：**

```
int result = 1;
for (int element : values)
{
    result *= element;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:22:50.437

无法做到，您将不得不使用旧式数组寻址：

```
for (int i = 0; i < array.length; i++) {
  array[i] = array[i] * 2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T17:56:47.733

```
int index = 0;
for (int element : values)
{

    values[index] = element + someVariable;
    index++;
} 
```

# json - 骨干 json 到模型

> ID：15466248
> 
> 赞同：0
> 
> 时间：2013-03-17T21:06:49.597
> 
> 标签：json, backbone.js

我有以下 json 字符串，我正在尝试从每个名称/值对创建一个模型。我在每个模型中都有一个名为“name”的属性

```
"[{"name":"A01"},{"name":"A02"},{"name":"A03"},{"name":"A04"},{"name":"A05"},{"name":"A06"},{"name":"A07"},{"name":"A08"},{"name":"A09"},{"name":"A10"},{"name":"A11"},{"name":"A12"},{"name":"A13"},{"name":"A14"},{"name":"A15"},{"name":"A16"},{"name":"B01"},{"name":"B02"},{"name":"B03"},{"name":"B04"},{"name":"B05"},{"name":"B06"},{"name":"B07"},{"name":"B08"},{"name":"B09"},{"name":"B10"},{"name":"B11"},{"name":"B12"},{"name":"B13"},{"name":"B14"},{"name":"B15"},{"name":"B16"},{"name":"C01"},{"name":"C02"},{"name":"C03"},{"name":"C04"},{"name":"C05"},{"name":"C06"},{"name":"C07"},{"name":"C08"},{"name":"C09"},{"name":"C10"},{"name":"C11"},{"name":"C12"},{"name":"C13"},{"name":"C14"},{"name":"C15"},{"name":"C16"},{"name":"D01"},{"name":"D02"},{"name":"D03"},{"name":"D04"},{"name":"D05"},{"name":"D06"},{"name":"D07"},{"name":"D08"},{"name":"D09"},{"name":"D10"},{"name":"D11"},{"name":"D12"},{"name":"D13"},{"name":"D14"},{"name":"D15"},{"name":"D16"}]" 
```

这是我的代码，其中 Teams 是团队的集合。我为每个角色获得了一个新模型。

```
var myteams = new Teams( _.map(data, function(p) { return p.name } ));
var app = app || {};
var Teams = Backbone.Collection.extend({
    model: app.Team,
    initialize: function (models,options) { }
});

var app = app || {};

app.Team = Backbone.Model.extend({

    defaults: {
        name: ''
    },
    initialize: function(){
        console.log('This is ' +typeof(this));
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:27:35.700

首先，它看起来`data`可能是一个原始 JSON 字符串，而不是一个实际的对象数组。你`JSON.parse`已经正确转换了吗？

其次，您将一个字符串数组传递给`Teams`集合构造函数。不要那样做。您必须传递一个对象数组，所以忘记您的`_.map`调用，只需确保`data`是一个对象数组并将其直接传递给您的`Teams`构造函数。

第三，仅供参考，一旦您正确填充了 Teams 集合，`myteams.pluck("name")`如果您想要每个团队的名称列表，请使用。（仅供参考）。

# javascript - 如何缩放背景图像并使其适用于浏览器大小

> ID：15466249
> 
> 赞同：0
> 
> 时间：2013-03-17T21:06:50.717
> 
> 标签：javascript, jquery, css, html

我想要的是我的 div 中的背景图像将缩放以覆盖整个浏览器。如果图像太小，它会增加，如果它太大，它会变小。我不希望图像重复。

[点击这里查看我的整个网页设计的现场演示。](http://inmyownview.com/pagan)

我的平行设计中的每个部分都是一个 . 它们看起来像这样：

```
<section id="start" data-type="background" data-speed="10" style="background: url('http://media.vogue.com/files/2013/01/15/storm-troupers-02_191346273703.jpg') 50% 0 repeat fixed; min-h-margin: 0 auto; height: 1080px;">
    bla bla bla     
</section> 
```

样式表

```
section {
    width: 100%; 
    max-width: 1920px; 
    height: 1080px;
    position: relative; 
    padding-bottom: 40px;
} 
```

还有一个用于平行滚动的 jquery 脚本。这里有一个背景位置的脚本。这可能会影响某些事情。

```
/**
 * Parallax Scrolling Tutorial
 * For NetTuts+
 *  
 * Author: Mohiuddin Parekh
 *  http://www.mohi.me
 *  @mohiuddinparekh   
 */

$(document).ready(function(){
    // Cache the Window object
    $window = $(window);

   $('section[data-type="background"]').each(function(){
     var $bgobj = $(this); // assigning the object

      $(window).scroll(function() {

        // Scroll the background at var speed
        // the yPos is a negative value because we're scrolling it UP!                              
        var yPos = -($window.scrollTop() / $bgobj.data('speed')); 

        // Put together our final background position
        var coords = '50% '+ yPos + 'px';

        // Move the background
        $bgobj.css({ backgroundPosition: coords });

}); // window scroll Ends

 });    

}); 
/* 
 * Create HTML5 elements for IE's sake
 */

document.createElement("content");
document.createElement("section"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:15:28.930

You can make use of the CSS [`background-size`](http://www.w3.org/TR/2002/WD-css3-background-20020802/#background-size) property.

```
section {
    background-size: 100%;
} 
```

`min-h-margin` isn't a valid CSS attribute. I'm not sure what you're using that for, or if that's a typo, but I figured it's worth pointing out.

You should also note that `section` may not be being used correctly here. From the [HTML5 specification](http://www.w3.org/TR/html5/sections.html#the-section-element):

> The section element is not a generic container element. When an element is needed only for styling purposes or as a convenience for scripting, authors are encouraged to use the div element instead.

**Edit** from comment below:

> ...but still when then browser is not in full screen you can see the background repeating.

Replace `background-repeat: repeat repeat;` on your `sections` with:

```
background-repeat: no-repeat; 
```

# java - 使用 Selenium IDE 记录搜索功能

> ID：15466250
> 
> 赞同：0
> 
> 时间：2013-03-17T21:06:59.077
> 
> 标签：java, javascript, html, selenium, selenium-ide

我想记录和测试我网站上的搜索功能。当我手动测试它并在其中提示一些东西时，它会起作用。例如：我想搜索“title”这个词。我开始输入“t”，然后是“i”，然后是“t”，然后是“l”和“e”。输入“t”后会显示一些结果 => 完美。当我使用 Selenium IDE 记录此测试时，它不起作用，因为没有可单击的搜索按钮。它是一个自动搜索栏，在输入时已经开始搜索。命令是“类型”，值是“标题”。测试完成后没有任何反应，所以网站没有搜索，因为我无法使用“点击并等待”发出命令，ID = 搜索按钮，因为没有搜索按钮！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:15:54.893

试试这个代码来执行搜索。这段代码对我有用。检查并告诉我

```
open  | https://www.google.co.in/  |
type  | id=gbqfq                   | selenium
pause | 1000
click | //*[@id="gbqfbw"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T06:23:21.870

我正在使用 selenium ide 2.4.0 和 firefox 24.0 版

使用以下代码进行自动搜索：

命令：类型，类型：//*[@id='searchbox']，值：花

命令: typeKeysAndWait , 类型: //*[@id='searchbox'], value:flower

在 Selenium IDE 中使用这两个命令，搜索将起作用

或者你可以使用：

命令：类型，类型：//*[@id='searchbox']，值：花

命令: typeKeys , 类型: //*[@id='searchbox'], value:flower

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T09:35:47.903

我尝试使用 Google 的自动完成功能来自动化相同的流程。从表面上看，问题似乎是测试执行的速度。尝试使用图像中显示的滑块降低测试速度。让它慢一点。

**或者**

您可以在搜索后执行的操作之前插入一些等待。

![在此处输入图像描述](../Images/800f8335919111903f5fd3591f05ab38.png)

# python - 如何在包安装期间测试 Python 是否从 virtualenv 运行

> ID：15466253
> 
> 赞同：5
> 
> 时间：2013-03-17T21:07:24.990
> 
> 标签：python, virtualenv

我有一个 Python 软件，其中包含一个配置文件和一个联机帮助页。要安装这些，我在我的`setup.py`（如[http://docs.python.org/2/distutils/setupscript.html#installing-additional-files](http://docs.python.org/2/distutils/setupscript.html#installing-additional-files)中所述）中有以下行：

```
data_files = [('/etc/foo', ['foo.conf']), ('/usr/share/man/man1', ['foo.1'])] 
```

当我想以 root 身份安装软件时，这工作得很好`python setup.py install`，但在 virtualenv 中当然会失败，因为不允许用户写入`/etc`和`/usr/share/man`.

解决这个问题的最佳做法是什么？在当前环境中检查`VIRTUAL_ENV`并且根本不安装这些文件？该软件会`foo.conf`在本地目录中查找，所以应该没问题。用户会错过手册页，但无论如何都没有明智的安装方法，因为`man`不会在 virtualenv 附近的任何地方寻找它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T04:49:54.983

最终，您的问题似乎实际上是关于如何检测正在运行的 Python 是否在 virtualenv 中。要深入了解这一点，我们必须了解`virtualenv`实际工作原理。

当您`activate`在 virtualenv 中运行脚本时，它会做两件事：

*   它更新`PATH`环境变量以包含`bin`来自 virtualenv 的目录，这样当你`python`从 virtualenv 运行二进制文件时，它就会运行。
*   它设置一个变量`VIRTUAL_ENV`，以便激活脚本本身可以跟踪激活。

直接`python`从 virtualenv 运行是完全可以接受的，并且在运行时`python`根本不使用该`VIRTUAL_ENV`变量。相反，它确定包含正在运行的`python`二进制文件的目录并使用父目录作为其“前缀”。

`sys`您可以通过导入模块和咨询来确定系统的前缀`sys.prefix`。*但是，在未*激活virtualenv 时依赖 this 的值是一个坏主意，因为这是 Python 的构建时设置，可以轻松自定义，并且肯定会因平台而异。

然而，当 Python从 virtualenv 前缀与其编译的前缀运行时，它确实有一点运行时差异：*包*`sys`有一个额外的变量`real_prefix`，它返回编译到 Python 二进制文件中的前缀。因此，可以使用它来识别 Python 正在非默认位置运行，这很可能意味着它是从 virtualenv 运行的：

```
import sys

if getattr(sys, "real_prefix", None) is not None:
    print "Maybe in a virtualenv"
else:
    print "Probably not in a virtualenv" 
```

然而，即使这也不是一门精确的科学。这一切真正告诉你的是，python 二进制文件不在编译时指定的位置。它不会告诉您当前用户是否有权写入`/usr/share/man`- 在某些（可能是边缘）情况下，这不会给您正确的答案：

*   如果用户已经从他的主目录中的源代码编译了他自己的 Python 并且它的编译前缀`/home/johnd/local-python`将`real_prefix`不会被设置，但用户仍然可以写访问他的 Python`lib`目录，并且可能*没有*写访问`/etc`或`/usr/share/man`

*   同样，在某些系统上，管理员可能已授予`/usr/lib/python2.7`特定应用程序开发人员组的组写入权限，以便他们可以安装 Python 模块，但未授予他们对其他系统文件的写入权限。

所以我认为最终你能做的最好的就是启发式方法，最好避免在`data_files`你希望在 virtualenv 中使用的任何模块中使用绝对路径。折衷方案可能是将您的模块简单地拆分为两个发行版，一个代表可本地化的源文件，另一个代表系统范围的配置以使其运行。后者可以依赖前者，这样用户仍然可以轻松安装它，但使用者可以`virtualenv`选择直接使用另一个前者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T03:35:06.350

仅将问题缩小到其标题：

> ***“如何在包安装期间测试 Python 是否从 virtualenv 运行”***

超过 7 岁，接受的答案对我不起作用（`python 3.6.9`在 Ubuntu 18.04 上）。

它未能检测到我在虚拟环境中（已激活并正在使用）。更具体地说，`getattr(sys, "real_prefix", None)`返回`"/usr"`并（错误地）得出结论，我没有从虚拟环境中运行。

问题本身建议的替代解决方案效果很好`(1)`。它简单明了，尽管有人反对它在非常见情况下可能不可靠。

保存到文件`is-in-venv`并使其可执行，并且可以从 shell 调用它，`if is-in-venv; then ...; else ...; fi`

```
#!/usr/bin/env python3

import os
import sys

venvdir = os.getenv('VIRTUAL_ENV')

if venvdir and os.path.isdir(venvdir):
    print("python3 virtual-env detected: %s" % venvdir)
    sys.exit(0)
else:
    print("python3 not in a virtual env")
    sys.exit(1) 
```

`(1)` *为了潜在的未来用户的利益，他们正在寻找针对 Python3 的书面标题的有效解决方案，大约 2020 年。*

# javascript - 启用/禁用基于 CheckBox.Checked true 或 false 的 asp:TextBox 控件

> ID：15466256
> 
> 赞同：0
> 
> 时间：2013-03-17T21:07:39.793
> 
> 标签：javascript, asp.net, html

我需要根据 CheckBox 启用/禁用 asp.TextBox/Input。如果 CheckBox.Checked = true 那么我需要启用 asp.TextBox/Input 或者如果 CheckBox.Checked = false 我需要禁用 asp.TextBox/Input。

下面是我拥有的代码，但它只适用于第一次单击，这意味着如果我选中该框，它将启用 asp.TextBox/Input，但如果我取消选中它将不会禁用 asp.TextBox/Input。

此外，默认情况下，在 Page_Load 上禁用 asp.TextBox/Input。

```
//If checked it should enable the input.
//If unchecked it should disable the input.
If Port is Required?<label class="checkbox">
                        <input type="checkbox" id="isportreqinput" name="isportreqinput" runat="server" onclick="fncport(this.form.isportreqinput, this.form.porttxt);"  />
                        <span class="metro-checkbox">Check Me</span>
                    </label>

//This is the input I need to disable/enable depending on the checkbox
<input type="text" name="porttxt" id="porttxt" runat="server" disabled="disabled" />

    <script type="text/javascript">
        function fncport(control, objname) {

            if (control.checked == true) {
                objname.disabled = false;
            }
            if (control.cheched == false) {
                objname.disabled = true
            }
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:23:51.463

`this.form.isportreqinput`不是从 HTML 中获取对 isportreqinput 复选框的引用的有效方法。 `this`实际上是对复选框的引用。

如果您需要传入复选框的 id 并输入到您的函数中，请将它们作为文本传入并使用`document.getElementById()`

```
<label class="checkbox">
    <input type="checkbox" id="isportreqinput" name="isportreqinput" runat="server"    
        onclick="fncport('isportreqinput', 'porttxt');"  />
    <span class="metro-checkbox">Check Me</span>
</label>

<input type="text" name="porttxt" id="porttxt" runat="server" disabled="disabled" /> 
```

此外，您`checked`在第二个 if 语句中拼写错误。您甚至不需要 if 语句，只需将禁用的值设置为与检查值相反的值。

```
 function fncport(controlid, objnameid) {
        var control = document.getElementById(controlid);
        var objname = document.getElementById(objnameid);

        objname.disabled = !control.checked;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:27:41.003

不确定您是粘贴代码还是复制代码。但是有一些语法问题：

```
 if (control.cheched == false) {
            objname.disabled = true
 } 
```

应该：

```
 if (control.checked == false) {
            objname.disabled = true;
 } 
```

# ios - dequeueReusableCellWithIdentifier 在 iPad 上崩溃（使用 iOS5）

> ID：15466258
> 
> 赞同：0
> 
> 时间：2013-03-17T21:07:45.377
> 
> 标签：ios, objective-c, ipad, uitableview

我有一个`TableViewController`和一个`SearchDisplayController`附加到它。它检查当前`tableView`是搜索还是正常，然后将变量设置为这样，然后使用此数据填充表。这是来源：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *item;
    if(tableView == self.searchDisplayController.searchResultsTableView){
        item = [self.search objectAtIndex:indexPath.row];
    } else {
        item = [self.results objectAtIndex:indexPath.row];
    }
    static NSString *CellIdentifier = @"Cell";

    /********* ERROR HAPPENS HERE!!!!! **********/
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"Cell"];
    /*********************************************/

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        UIImageView *iconView = [[UIImageView alloc] initWithFrame:CGRectMake(5.0, 5.0, 44.0, 44.0)];
        iconView.tag = 100;
        [cell.contentView addSubview:iconView];

        UILabel *title = [[UILabel alloc] initWithFrame:CGRectMake(57.0, 5.0, 249.0, 29.0)];
        title.tag = 101;
        title.font = [UIFont fontWithName:@"AmericanTypewriter-Bold" size:15.0];
        title.textColor = [UIColor colorWithRed:255.0f/255.0f green:128.0f/255.0f blue:0.0f/255.0f alpha:1.0];
        [cell.contentView addSubview:title];

        UILabel *subtitle = [[UILabel alloc] initWithFrame:CGRectMake(57.0, 28.0, 249.0, 21.0)];
        subtitle.tag = 102;
        subtitle.font = [UIFont fontWithName:@"HelveticaNeue-Medium" size:12.0];
        subtitle.textColor = [UIColor colorWithRed:179.0f/255.0f green:179.0f/255.0f blue:179.0f/255.0f alpha:1.0];
        [cell.contentView addSubview:subtitle];
    } else {
        UIImageView *iconView = (UIImageView *)[cell viewWithTag:100];
        if([[item valueForKey:@"categories"] count] == 0){
            UIImage *img = [UIImage imageNamed:@"venue"];
            iconView.frame = CGRectMake(iconView.frame.origin.x, iconView.frame.origin.y, img.size.width, img.size.height);
            [iconView setImage: img];
        } else {
            NSDictionary *iconDict = [[[item valueForKey:@"categories"] objectAtIndex:0] valueForKey:@"icon"];
            NSString *icon = [NSString stringWithFormat:@"%@bg_44%@", [iconDict valueForKey:@"prefix"], [iconDict valueForKey:@"suffix"]];
            [iconView setImageWithURL:[NSURL URLWithString:icon] placeholderImage:[UIImage imageNamed:@"venue"]];
        }
        UILabel *title = (UILabel *)[cell viewWithTag:101];
        title.text = [item valueForKey:@"name"];
        UILabel *subtitle = (UILabel *)[cell viewWithTag:102];
        subtitle.text = [[item valueForKey:@"location"] valueForKey:@"address"];
    }
    UIView *bgColorView = [[UIView alloc] init];
    [bgColorView setBackgroundColor:[UIColor colorWithRed:255.0f/255.0f green:128.0f/255.0f blue:0.0f/255.0f alpha:1.0]];
    [cell setSelectedBackgroundView:bgColorView];
    return cell;
} 
```

每当代码遇到它试图到达的行时，我一直被一个导致应用程序崩溃的错误所困扰`dequeueReusableCell`。在大多数现代 iOS 设备中，它都可以工作。我已经看到它可以在我的 iPhone5、朋友的 iPhone4 和更新版本的 iPad 上运行。但是在某些设备中——包括我的第一代 iPad（安装了 iOS5）——这条线就崩溃了。没有有用的错误消息。我得到的只是典型的“（lldb）”消息。甚至不是数组越界类型的异常。堆栈跟踪仅显示它在内部中断`dequeueReusableCellWithIdentifier`。这是堆栈跟踪：

```
2013-03-17 17:32:30.350 Streetgram[861:707] *** Assertion failure in -[UINib lazyArchiveData], /SourceCache/UIKit/UIKit-1914.85/UINib.m:210
2013-03-17 17:32:30:373 Streetgram[861:1799] -[SearchViewController tableView:cellForRowAtIndexPath:] [Line 115] Uncaught exception: UINib must be instantiated with either data or a nib name.
2013-03-17 17:32:30:431 Streetgram[861:1799] -[SearchViewController tableView:cellForRowAtIndexPath:] [Line 116] Stack trace: (
0   CoreFoundation                      0x35c508a7 __exceptionPreprocess + 186
1   libobjc.A.dylib                     0x33874259 objc_exception_throw + 32
2   CoreFoundation                      0x35c50789 +[NSException raise:format:] + 0
3   Foundation                          0x350443a3 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 90
4   UIKit                               0x335c7a47 -[UINib lazyArchiveData] + 186
5   UIKit                               0x335c7b97 -[UINib unarchiverForInstantiatingReturningError:] + 78
6   UIKit                               0x335c7d8f -[UINib instantiateWithOwner:options:] + 98
7   UIKit                               0x333b17bd -[UITableView dequeueReusableCellWithIdentifier:] + 304
8   Streetgram                          0x00104157 -[SearchViewController tableView:cellForRowAtIndexPath:] + 762
9   UIKit                               0x333b0efb -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 546
10  UIKit                               0x333affd9 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1076
11  UIKit                               0x333af763 -[UITableView layoutSubviews] + 206
12  UIKit                               0x33353f15 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 148
13  CoreFoundation                      0x35baf1fb -[NSObject performSelector:withObject:] + 42
14  QuartzCore                          0x32d7aaa5 -[CALayer layoutSublayers] + 216
15  QuartzCore                          0x32d7a6bd _ZN2CA5Layer16layout_if_neededEPNS_11TransactionE + 216
16  QuartzCore                          0x32d7e843 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 226
17  QuartzCore                          0x32d7e57f _ZN2CA11Transaction6commitEv + 314
18  QuartzCore                          0x32d764b9 _ZN2CA11Transaction17observer_callbackEP19__CFRunLoopObservermPv + 56
19  CoreFoundation                      0x35c24b1b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
20  CoreFoundation                      0x35c22d57 __CFRunLoopDoObservers + 258
21  CoreFoundation                      0x35c230b1 __CFRunLoopRun + 760
22  CoreFoundation                      0x35ba64a5 CFRunLoopRunSpecific + 300
23  CoreFoundation                      0x35ba636d CFRunLoopRunInMode + 104
24  GraphicsServices                    0x33941439 GSEventRunModal + 136
25  UIKit                               0x3337ecd5 UIApplicationMain + 1080
26  Streetgram                          0x001007c9 main + 116
27  Streetgram                          0x00100750 start + 40
    .... 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:21:07.453

当您将可重用单元格出列时，您应该使用在参数中传递的 tableView，而不是您自己已知的 self.tableView。对于搜索视图，这两个不会相同，这可能会导致问题。像这样：

```
UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T04:36:01.340

终于找到了一个解决方案（我什至不知道它为什么起作用但它起作用的细节）。事实证明，在某些情况下，您必须取消选中“使用自动布局”设置。[http://www.seifeet.com/2012/12/ios-nib-data-is-invalid-exception-with.html](http://www.seifeet.com/2012/12/ios-nib-data-is-invalid-exception-with.html)

# ios - iOS 组件可重用性：视图和视图控制器

> ID：15466262
> 
> 赞同：0
> 
> 时间：2013-03-17T21:08:08.377
> 
> 标签：ios, objective-c, cocoa-touch

非常基本的问题，我似乎无法找到一个直接的答案。

所以这就是交易：我有一个 UI，我想在几个界面中重用它。特别是，它应该作为子视图包含在作为导航堆栈一部分的父视图中，但也可用作独立的模态视图。有问题的子视图只是一个自定义的 UITableView，其数据绑定方法由子控制器实现。

子视图应该绑定到一个特定的模型对象，它从中获取所有数据。换句话说，它的控制器基于该目标模型对象为 UITableViewDataSource 实现必要的数据绑定方法。

对我来说很明显我需要创建一个控制器来表示这个可嵌入的子视图，因为这些数据绑定方法的实现在所有实例中都是相同的，但似乎在 iOS 5 之前（我目前需要支持 iOS 4+）强烈建议不要在其他视图控制器中嵌入视图控制器。

*这与 Apple据称*在 Cocoa 中采用的 MVC 模式完全相反（我仍然不相信他们实现的是 MVC）。如果我不允许嵌入子视图控制器，我应该如何在不同的父界面中重用我的子视图控制器的数据绑定/模型逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:10:57.223

您可以创建一个控制器类（只是一个常规子类）并为每个需要嵌入子视图的视图控制器`NSObject`实例化*，*而不是使用视图控制器来提供数据。

编辑：所以你会做类似的事情`[[MyController alloc] initWithTableView:tableView]`。

# frameworks - 配置参数在起作用！1.X 在 Play 2.1 应用程序中仍然有效吗？

> ID：15466265
> 
> 赞同：0
> 
> 时间：2013-03-17T21:08:33.837
> 
> 标签：frameworks, playframework, settings, playframework-1.x, playframework-2.1

我想知道是否所有参数都定义为 Play! 1.X 仍然有效！2.1，因为我在 Play 2.1 文档中找不到相同的参数，例如[http://www.playframework.com/documentation/1.2.3/configuration](http://www.playframework.com/documentation/1.2.3/configuration)。

我正在寻找会话参数来控制我的应用程序的会话超时。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:54:49.397

2.0 和 2.1 中的会话处理有点不同，请查看[文档](http://www.playframework.com/documentation/2.0/ScalaSessionFlash)：

> “会话没有技术超时。当用户关闭 Web 浏览器时它会过期。如果您需要特定应用程序的功能超时，只需将时间戳存储到用户会话中，然后根据您的应用程序需要使用它（例如最大会话持续时间、最大不活动持续时间等）。”

因此，您可以根据需要实现它。

我想，但我不是在为游戏开发者说话，这是为了在服务器端强制执行无状态请求。

# rest - 在 Web 应用程序的上下文中，实现 REST 是否意味着只使用 GET 请求？

> ID：15466273
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:09:25.383
> 
> 标签：rest, web-applications

我试图更好地理解 REST 的概念。我阅读了维基百科的文章，但对我来说仍然有点模糊。据我了解，如果我需要使我的 Web 应用程序符合 REST，我必须：

*   使用 GET 请求，避免 POST
*   避免查询参数
*   避免在服务器上保存会话状态
*   使用原子操作表达我的应用程序的 api

有人可以解释一下吗，事实上一个例子真的很棒！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:15:35.033

我不认为 HTTP 方法是相关的。关键词是“representational”（即 url 应该代表动作）和“transfer”（即请求者和响应者之间的数据传输）。参数也不错。

# python - 在字符串格式中使用 numpy.bytes_ 对象时超出最大递归深度

> ID：15466274
> 
> 赞同：3
> 
> 时间：2013-03-17T21:09:37.577
> 
> 标签：python, numpy, python-3.x

代码应该不言自明：

```
$ python
Python 3.3.0 (default, Dec 22 2012, 21:02:07) 
[GCC 4.7.2] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy as np
>>> '{}'.format(np.bytes_(b'Hello'))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: maximum recursion depth exceeded while calling a Python object
>>> np.version.version
'1.7.0' 
```

`str`和`repr`return `"b'Hello'"`on `np.bytes_(b'Hello')`，我都可以，`print(np.bytes_(b'Hello'))`但是在格式字符串中它会陷入递归循环。

我是愚蠢还是它确实看起来是这样，即存在问题`numpy`？即使是这样，我也不太明白发生了什么。有人可以解释一下吗？

我没有用 Python 2 复制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:19:55.563

的行为`{}`是调用`np.bytes_(b'Hello').__format__()`. 似乎有一个错误`__format__`正在调用自己。查看此[相关票证](https://github.com/numpy/numpy/issues/385)

这是一种解决方法。

```
Python 3.2.3 (default, Oct 19 2012, 19:53:57) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy as np
>>> '{}'.format(np.bytes_(b'Hello'))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: maximum recursion depth exceeded while calling a Python object
>>> '{!s}'.format(np.bytes_(b'Hello'))
"b'Hello'"
>>> '{!r}'.format(np.bytes_(b'Hello'))
"b'Hello'" 
```

# c++ - 声明结构映射时如何解决编译错误？

> ID：15466278
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:10:02.933
> 
> 标签：c++, compiler-errors

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:11:45.740

地图需要 mapped_type 的类型，而您正在给它`re`instance `r`。你需要

```
std::map<unsigned int, re> var; 
```

您的代码可以进一步简化：

```
struct re {
  std::string s;
};

int main()
{
  re r;
  std::map<unsigned int, re> var;

  r.s="hello";
  var[10]=r;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T21:12:01.590

`r`是类型的一个*实例*，`re`它是`struct`您定义的类型别名。因此，你应该改变这个：

```
std::map<unsigned int, r> var; 
```

进入他的：

```
std::map<unsigned int, re> var;
//                     ^^ 
```

另请注意，在`main()`您重新定义`re`结构的过程中，您很可能只想创建它的一个实例：

```
int main() {
    re r;
    r.s="hello";
    var[10]=r;
} 
```

因此，将所有内容放在一起：

```
#include <string>
#include <map>

// Avoid this old C style of defining structs. Prefer the
// C++ style I am showing below...
/*
typedef struct {
      std::string s;
  } re;
*/

struct re
{
    std::string s;
};

int main() {
    std::map<unsigned int, re> var;
    re r;
    r.s="hello";
    var[10]=r;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T21:12:23.707

首先，你可以说

```
struct re { std::string s; }; 
```

在 C++ 中。这`typedef struct {...} name;`是一个C主义。

在您的地图中，您必须提供类型而不是变量

```
std::map<unsigned int, re> var; 
```

您在`main()`函数中遇到的错误是因为您尝试将不同类型的变量分配给`main()::struct re`map 元素`10`，它是 type `typedef struct { ... } re`。

总而言之，`struct re`in main`typedef ... re`与全局范围内的类型不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T21:14:07.973

请更换

```
std::map<unsigned int, r> var; 
```

进入

```
 std::map<unsigned int, re> var; 
```

您定义某种类型的映射，在`<>`您将要映射的类型传递给“映射”（定义它们之间的映射）。

这是所有代码片段：

```
#include <map>
typedef struct {
    std::string s;
}re;
re r;
std::map<unsigned int, re> var;

int f(int argc, char** argv) {
   re res; 
   res.s="hello";
   var[10]=res;
   //and if you want that global variable
   r.s="global variable";
   var[1]=r; 

   return ERROR_SUCCESS;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T21:27:45.683

内联注释描述了如何修复您的代码。

```
#include <string>
#include <map>

//typedef struct { // This is from C. Use the C++ way...
struct re_type {
    std::string s;
//} re; // See above
    };

// re r; // You do not need a global instance

// std::map<unsigned int, r> var; // `r` was an instance.
// The map declaration needs a type:
std::map<unsigned int, re_type> var; // Note: This is global and should probably be 
                                     // moved into main()

int main(){
    // struct re{  // No need to redeclare the struct here
    //    string s;
    // }re;

    re_type re; // Create a local instance

    re.s="hello";
    var[10]=re;
} 
```

`re`、`r`和似乎不是描述性标识符`s`。`var`使用有意义的标识符将使您的代码更易于阅读和维护，甚至可以帮助您了解出现的编译错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T21:12:45.670

```
typedef struct {
    std::string s;
} re; 
```

然后后来：

```
std::map<unsigned int, r> var; 
```

不。模板需要***类型***，但你给它一个变量。将其更改为

```
std::map<unsigned int, re> var; 
```

它会正常工作。

# javascript - 根据数据更改图例颜色高图表

> ID：15466285
> 
> 赞同：5
> 
> 时间：2013-03-17T21:10:44.957
> 
> 标签：javascript, highcharts

我可以根据数据动态设置列的颜色，但不知道如何更改图例中的颜色。注意 jsfiddle，最新的条是绿色的，但图例是蓝色的。有没有办法改变列颜色也会改变图例颜色？

这是我用于列颜色的代码：

jsfiddle：http: [//jsfiddle.net/VCjZx/2/](http://jsfiddle.net/VCjZx/2/)

```
function makeRun() {
var divId = "container";
var current = new Array(99.95,99.96,99.97,99.98);
var goal = new Array(99.965, 99.965,99.965,99.965);
var quarters = new Array("Q1", "Q2", "Q3", "Q4");
    var width = 495; var SizeOfFont = '14px'; var currentName = 'Quarterly %';

    preprocessData = function (data, goal) {
        var nData = [];
        var colorGood = '#348017'; var colorBad = '#E42217'; var colorUse;
        for (var i = 0; i < data.length; i++) {
            if (data[i] >= goal[i]) { colorUse = colorGood; }
            else { colorUse = colorBad; }
            nData.push({
                y: data[i],
                x: i,
                color: colorUse
            });
        }
        return nData;
    };

    var chart = new Highcharts.Chart({
        chart: {
            renderTo: divId,
            height: 275, //little bigger than alotted height to make more readable
            width: width //dependent on #gauges
        },
        title: {
            text: 'Title', //should all be the same, can make a parameter if need to be different
            style: { //size of text above
                fontSize: SizeOfFont
            }
        },
        xAxis: {
            categories: quarters,
            labels: { //size of the Text above^^
                style: {
                    fontSize: '10px'
                }
            }
        },
        yAxis: {
            min: 99.8,
            max: 100,           
            title: {
                text: 'Percent', //parameter since some are days, percents, etc
                style: {//size of y axis title
                    fontSize: SizeOfFont
                }
            },
            labels: {
                style: {//size of the y axis tick labels
                    fontSize: SizeOfFont
                }
            }
        },
        credits: {//gets rid of the highcharts logo in bottom right
            enabled: false
        },
        legend: {//the legend at the bottom
            style: {
                fontSize: '12px'
            }
        },
        series: [ {
            type: 'column',
            name: currentName,
            data: preprocessData(current, goal),
            dataLabels: {
                enabled:true,
                color: 'black',
                formatter: function() {
                        return (Math.round(this.y*Math.pow(10,3))/Math.pow(10,3) + '%'); //rounds to 2 decimals
                    },
                    style: {
                    fontSize: '12px'
                }
            }
        },{
            type: 'spline',
            name: 'Goal',
            data: goal,
            color: '#084482',
            marker: {
                symbol: 'circle'
            },
            dashStyle: 'dash'
        }]
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T04:48:14.600

系列中的颜色发生了变化。**我通过添加seriesColor = colorUse;**来修改你的**preprocessData**函数来解决这个问题。. 我还将 seriesColor 变量添加到代码的顶部**var seriesColor = '#000';** ：

 ****将此新功能添加到您的代码中：

```
var seriesColor = '#000';
preprocessData = function (data, goal) {
    var nData = [];
    var colorGood = '#348017'; var colorBad = '#E42217'; var colorUse;
    for (var i = 0; i < data.length; i++) {
        if (data[i] >= goal[i]) { colorUse = colorGood; }
        else { colorUse = colorBad; }
        nData.push({
            y: data[i],
            x: i,
            color: colorUse
        });
    }
    seriesColor = colorUse;
    return nData;
}; 
```

更新系列以包含 seriesColor 变量：

```
 series: [ {
      type: 'column',
      name: currentName,
      data: preprocessData(current, goal),
      color: seriesColor,
      ... 
```

我更新了你的小提琴[http://jsfiddle.net/VCjZx/5/](http://jsfiddle.net/VCjZx/5/)****

# python - "np.cumsum() like" - 迭代，实际值

> ID：15466287
> 
> 赞同：1
> 
> 时间：2013-03-17T21:10:50.157
> 
> 标签：python, numpy, cumsum

我正在寻找一种用 numpy 实现这段 python 代码的方法：

```
 N = np.arange(5)

  for i in range(5):
     for k in range(i):
        N[i] += N[k] 
```

假设我实际上在大型二维数组 (1300*1300) 上工作。

`np.cumsum()`提供一个好方法，在一个轴`N[0][i]`或上`N[i][0]`，除了它只对原始数组的值求和，而不是对进化数组的值求和。

我想不出办法做到这一点。任何想法 ？

@编辑 ：

为了清楚起见：

使用一维数组，循环给出

```
Out[89]: array([ 0,  1,  3,  7, 15]) 
```

与 cumsum ：

```
array([ 0,  1,  3,  6, 10]) 
```

使用二维，它会给出类似的东西：

```
N = np.arange(25).reshape(5,5)
for i in range(len(N)):
    N = np.cumsum(N, axis=i) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T01:51:58.400

如果你计算出循环的结果，从一个序列开始`a[n]`，两个 for 循环的结果是一个序列`b[n]`，那么：

```
b[n] = a[n] + a[n-1] + 2*a[n-2] + 4*a[n-3] + ... + 2**(n-2)*a[0] =
       a[n] + c[n-1] 
```

我在哪里定义：

```
c[n-1] = a[n-1] + 2*a[n-2] + 4*a[n-3] + ... + 2**(n-2)*a[0] 
```

记住最后一个表达式，有一些方法可以矢量化你的双循环。但是请注意非常大的因数（`2**(n-2)`），您必须乘以您的序列中的项目。如果您的序列有正数和负数，它们可能会抵消并返回合理的数字。但是如果你有一个超过 1000 个正元素的数组，那么你将溢出任何 numpy dtype。

因此，对于少于 30 个项目的短序列，如果您强制使用`int64`'s 可能是 60 个，以下将比您的 for 循环更快地工作：

```
def evolving_cumsum(arr):
    arr = np.array(arr) # makes a copy of the data
    pows = 2**np.arange(len(arr))[::-1]
    c = np.cumsum(arr*pows)
    c /= pows
    arr[1:] += c[:-1]
    return arr

>>> a = np.arange(10)
>>> evolving_cumsum(a)
array([  0,   1,   3,   7,  15,  31,  63, 127, 255, 511])
>>> for i in range(len(a)):
...     for k in range(i):
...         a[i] += a[k]
... 
>>> a
array([  0,   1,   3,   7,  15,  31,  63, 127, 255, 511]) 
```

但总的来说，我担心你将不得不保持你的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:37:39.700

```
import numpy as np
N = np.arange(5)
print np.cumsum(N) # outputs [ 0  1  3  6 10]

for i in range(5):
    for k in range(i):
        N[i] += N[k]

print np.cumsum(N) # outputs [ 0  1  4 11 26] 
```

进化数组是什么意思？

# oop - 重写类中的方法以修改子类中的方法

> ID：15466288
> 
> 赞同：0
> 
> 时间：2013-03-17T21:10:53.990
> 
> 标签：oop, inheritance, overriding, subclass

`ClassA`有两个孩子： `ClassB`和`ClassC`。

我们需要重写一个方法，`ClassA`但我们将使用`ClassB`and `ClassC`（使用修改后的方法）。

`ClassA`，`ClassB`并且`ClassC`都是我们无法修改的外部库的一部分。

是否可以在没有子类化的情况下完成这项工作，`ClassB`并`ClassC`在每个子类中单独使用相同的方法重新实现？

*如果`ClassB`已经重新实现了我们想要忽略的方法，问题会有所不同吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:18:24.603

除非有某种特殊的机制允许你这样做，否则这是不可能的。如果`ClassB`有自己的重写实现也没有什么区别。

因为`ClassB`并且`ClassC`已经被编译，他们的方法的实现已经被烘焙到你的外部库中。一般来说，除非您有自己的派生类，否则您无法在源代码级别更改此设置。

如果我们谈论的是具有运行时允许您动态修改调用目标的托管语言，或者如果可以动态重写机器代码的热补丁机制正在发挥作用，那么您可能有出路——但是将是一个特殊的例外，而不是规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:26:26.073

它有点取决于语言，听起来充其量只是一个黑客。如果你是用Javascript写这个，你可以直接修改B类和C类的原型函数。

不过，在大多数 C 系列语言中，我认为这是不可能的。多重继承可能会导致歧义（我想 B 和 C 都有自己的子类），因此您可能必须对每个子类进行子类化。

# c# - 在 C++ 和 C# 之间传递向量结构

> ID：15466290
> 
> 赞同：3
> 
> 时间：2013-03-17T21:11:24.427
> 
> 标签：c#, c++, interop, pinvoke

我有我想从 c# 访问的 c++ 非托管代码。所以我遵循了一些教程，并为我的项目构建了一个 dll（顺便说一句，只有一个类）。现在我想从 c# 中使用它，我正在使用 p/invoke，如下所示。

我的问题是：是否可以编组我的 windows 点，以便我可以将它作为向量传递到我的 c++ 代码中？我可以更改所有代码（除了 qwindows 点，但我可以提出自己的观点）。有没有我不必创建交流包装器的解决方案？我在关注这个问题：[How to call an unmanaged C++ function with a std::vector<>::iterator as parameter from C#?](https://stackoverflow.com/questions/6723881/how-to-call-an-unmanaged-c-function-with-a-stdvectoriterator-as-paramete)

非常感谢1 ps，我找到了一个“解决方案”，但我无法查看它[http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_21461195.html](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_21461195.html)

C＃

```
using Point = System.Windows.Point;

class CPlusPlusWrapper
{

    [DllImport("EmotionsDLL.dll", EntryPoint = "calibrate_to_file")]
    static extern int calibrate_to_file(vector<points> pontos);//marshall here

    [DllImport("EmotionsDLL.dll", EntryPoint = "calibration_neutral")]
    static extern int calibration_neutral();
    /// <summary>
    /// wraps c++ project into c#
    /// </summary>

    public void calibrate_to_file() { 

} 
```

dll头文件

```
namespace EMOTIONSDLL
{
    struct points{
        double x;
        double y;
        double z;
    };

    #define db at<double>

    class DLLDIR EMOTIONS
    {
    public:

        EMOTIONS();

        CvERTrees *  Rtree ;

        vector<points> mapear_kinect_porto(vector<points> pontos);

        void calibrate_to_file(vector<points> pontos);

        int calibration_neutral();

        int EmotionsRecognition();
    };
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:54:51.940

您可以将 C# 数组编组为 C++ std::vector，但这会非常复杂，而且根本不是一个好主意，因为 std::vector 的布局和实现不能保证在编译器版本之间是相同的。

相反，您应该将参数更改为指向数组的指针，并添加一个指定数组长度的参数：

```
int calibrate_to_file(points* pontos, int length); 
```

并在 C# 中将该方法声明为采用数组并应用 MarshalAs(UnmanagedType.LPArray) 属性：

```
static extern int calibrate_to_file([MarshalAs(UnmanagedType.LPArray)]] Point[] pontos, int length); 
```

另请注意，您的 C++**点**结构与 System.Windows.Point 不兼容。后者没有**z**成员。

但是你的代码的一个更大的问题是你不能真的期望通过 DLL 导入一个实例方法并能够像那样调用它。实例方法需要其类的实例，并且没有简单的方法可以从 C# 创建非 COM C++ 类的实例（这也不是一个好主意）。因此，您应该把它变成一个 COM 类，或者为它创建一个 C++/CLI 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:00:23.680

我认为你应该只传递你的类型的数组，然后`vector<T>`在相关函数中将它们转换为's 或 List's。

它也可能是您引用了一个`static extern`**INT**`calibrate_to_file()` 而在 C++ 中它是**VOID的事实**`calibrate_to_file()`

更新：我认为您缺少`DLLEXPORT`功能上的标签？

# c++ - 在 C++ 中从 char 数组的一部分构造字符串

> ID：15466292
> 
> 赞同：-3
> 
> 时间：2013-03-17T21:11:45.483
> 
> 标签：c++, string, arrays, wstring

我有一个非常大的 wchar_t 数组。我想从这个 wchar_t 数组的一部分构造一个 wstring，例如在 i 和 j 之间。

我不想把大字符数组变成一个 wstring，然后取一个子字符串。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T21:13:38.763

使用迭代器对构造函数：

```
std::wstring str(arr + i, arr + j + 1); //need one past the end 
```

在这种情况下，添加是有效的，因为指针是随机访问迭代器。对于在迭代器不支持时工作的通用形式`operator+`，使用`std::next(arr, i)`and `std::next(arr, j + 1)`。如果担心泛型，`std::begin`也可以使用它来代替，因为它适用于数组和标准容器。`arr`

# python - 从 CSV 打印排序的数据

> ID：15466295
> 
> 赞同：0
> 
> 时间：2013-03-17T21:12:20.007
> 
> 标签：python, sorting, csv

我有一个包含一些数据行的 CSV 文件，如果我用 Python 打印这些数据，将如下所示：

```
['1', 'George Washington', '1789-04-30', '1797-03-04', 'Independent ', 'Virginia']
['2', 'John Adams', '1797-03-04', '1801-03-04', 'Federalist ', 'Massachusetts']
['3', 'Thomas Jefferson', '1801-03-04', '1809-03-04', 'Democratic-Republican ', 'Virginia']
['4', 'James Madison', '1809-03-04', '1817-03-04', 'Democratic-Republican ', 'Virginia'] 
```

我需要再次打印这 4 行，但这次按第二个元素排序。我试过这段代码：

```
import csv
csvdata=csv.reader(file('presidents.csv'))
for i in csvdata:
    i[1].sort()
    print i 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:17:18.117

首先，您应该使用`open`而不是`file`. 要对某物进行排序，您需要给它一个要排序的东西的集合；试试这个版本：

```
with open('presidents.csv') as f:
   csvdata = csv.reader(f)
   rows = list(csvdata)

# sort the rows in-place

rows.sort(key=lambda x: x[1])

print rows 
```

您需要提供自定义`key`查找，这是内联函数 lambda 所做的。它基本上告诉排序函数使用每个内部列表的第二个元素对外部列表进行排序。

请记住，这`sort()`是一个*就地排序*，这意味着它不会返回排序列表 - 事实上，它会返回`None`，当你尝试这个时会导致惊喜：

```
rows = rows.sort(key=lambda x: x[1]) 
```

现在`rows`将`None`。如果您想将未排序列表和已排序列表分开，请使用`sorted()`，但请确保分配结果 - 如下所示：

```
sorted_rows = sorted(rows, key=lambda x: x[1])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:19:49.503

Errrrm 看起来您正在尝试对字符串进行排序 ^_^ 来自此处的文档：http: [//docs.python.org/2/library/csv.html](http://docs.python.org/2/library/csv.html)

当您遍历 csvreader 时，您一次获得一行...所以当您说 i[1].sort() i[1] = '1' （csv 第一行中的第一个值）

所以试试这个：

```
import csv
fh = open('presidents.csv','rt')
csvdata=csv.reader(fh)
for row in csvdata:
    row.sort()
    print row 
```

编辑——刚刚注意到文件的事情：P

# windows - Windows 批处理文件末尾的简单插入符号 (^) 会消耗所有内存

> ID：15466298
> 
> 赞同：54
> 
> 时间：2013-03-17T21:12:37.557
> 
> 标签：windows, security, batch-file, cmd

这个简单的批处理文件以相对较短的顺序消耗了 Windows 7 (x64) 上的所有可用内存。这是怎么回事？可以采取哪些预防措施来防止它？

```
any-invalid-command-you-like-here ^ 
```

显示效果显然必要的先决条件：

*   插入符号`^`是文件中的最后一件事，并且脚本不会以换行符终止
*   插入符号前面至少有 2 个空格或字符，例如，如果下面的点表示空格，则不会触发内存泄漏`.^`，而这个会`..^`（只是慢慢地）

在这个*Process Explorer*屏幕截图中，脚本已经运行了大约 30 秒，消耗了 2.9GB，并且还在以稳定的速度攀升：

[![2.9GB内存消耗，还在攀升](../Images/7f2c46fb4ddad474df4ebdc4ba0d18cb.png)](https://i.stack.imgur.com/lKVfN.png)

如果您要对此进行试验，请确保您可以访问关闭窗口 [X] 控件，或者启动任务管理器或进程资源管理器并准备就绪，因为`Ctrl-C`, `Ctrl-Break`,`Alt-F4` **没有效果**。

似乎多个插入符号会导致内存使用量增加得更快。我第一次遇到这种情况时，1 或 2 分钟内没有足够的内存来做简单`Alt-Tab`的事情，比如三指敬礼`Ctrl-Alt-Del`也无效。我不得不硬关闭机器。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-18T03:15:07.043

### 想法

造成这种情况的原因（据我了解）是由于 cmd 解释器正在寻找要转义的字符，因为它`^`是批处理转义字符。在这种情况下，cmd没有正确识别文件的结尾，`eof`而是在寻找要转义的字符时不断循环和初始化某些内容。

在 Windows 8 Pro (64) 上重现（`cc^^^`使用多个插入符号来加速泄漏）。

### 试验

`cc^`无限循环并且泄漏非常缓慢。

`cc^^`因正常的无效命令错误而崩溃。

`cc^^^`无限循环和泄漏更快。

`cc ^`无限循环并且泄漏非常缓慢。

`cc ^^`因正常的无效命令错误而崩溃。

`cc ^^^`无限循环和泄漏更快。

`cc"^`因正常的无效命令错误而崩溃。

`cc"^^`因正常的无效命令错误而崩溃。

`cc"^^^`因正常的无效命令错误而崩溃。

### 笔记

*   `^`仅在字面上使用插入符号时（在引号之外）出现无限循环和泄漏。添加引用时，脚本会因标准无效命令错误而崩溃。
*   当批处理文件被编码为**UTF-8**或**ASCII**时，只有无限循环和泄漏。当**UTF-16**时，脚本因标准无效命令错误而崩溃。
*   必须是奇数个插入符号，以免逃脱最后一个插入符号。

### 防范措施

*   确保没有批处理脚本以插入符号`^`(0x5E) 或至少奇数个插入符号结尾。
*   或者将它们编码为 UTF-16。

# android - Android 布局高度最小值为 match_parent，但如果 content 大于 parent，则为 wrap_content

> ID：15466301
> 
> 赞同：20
> 
> 时间：2013-03-17T21:12:52.270
> 
> 标签：android, android-layout

我在 ScrollView 中有一个 LinearLayout（内容视图容器）。我希望 LinearLayout 的最小高度为“match_parent”，但如果内容高于父级，那么我希望 LinearLayout 能够“wrap_content”。

我的 LinearLayout 有一个平铺的背景图像，使它看起来像一个黄色的便笺簿。但是，如果 LinearLayout 中的内容很短，那么我在屏幕底部有一个黑色空白部分，因为 LinearLayout 只是包装内容。

我希望黄色的法律垫背景覆盖整个屏幕，但我不能把它放在 ScrollView 上，因为这样背景就不会随着内容滚动。我不希望内容漂浮在垫子上方，我希望它们被锚定在一起。

有什么办法可以做到这一点？

编辑：

进一步研究.. ScrollView 和 LinearLayout 都是 683px 高，所以它们的大小相同，这很好。但问题是它们都应该是 766px 高（前一个片段的大小被这个片段取代）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-18T10:10:19.947

不太确定我明白你为什么需要这个，但你可以添加另一个让我们说线性布局到你的滚动视图并给它一个权重 0 并且你的内容线性布局可以有一个权重 1 所以你不会有任何黑暗部分滚动视图。我希望我说得有道理:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T14:59:01.553

wrap_content 的解决方案可以是：您可以对父线性布局使用 weightsum，对线性布局的每个子级使用布局权重。

# ruby-on-rails-3 - 发生任何异常时，如何在引发异常的位置自动启动 Rails/Ruby 中的 Pry

> ID：15466309
> 
> 赞同：3
> 
> 时间：2013-03-17T21:14:15.717
> 
> 标签：ruby-on-rails-3, exception, pry

当发生任何异常时，如何在引发异常的位置自动启动 Rails/Ruby 中的 Pry？

我有一个难以调试的问题，我似乎无法追溯到它的源头，它发生在 Rails 中介于控制器响应和正在呈现的视图之间的某个地方。

我想如果我在控制台中显示堆栈跟踪之前或之后以某种方式打开了一个撬（撬宝石），我可能能够看到问题发生在哪里。发生错误时是否可以让 Pry 自动启动？

还是调试器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T00:48:16.753

使用[pry-rescue](https://github.com/conradirwin/pry-rescue)它完全符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T23:03:20.173

您可以使用[pry-debugger](https://github.com/nixme/pry-debugger)设置断点并使用 pry 在控制台中进行调试。您可以尝试的另一件事是使用[better_errors](https://github.com/charliesome/better_errors)，这将为您提供更好的错误页面和交互式控制台。

# c# - 将类型对象列表转换为字符串以显示在列表框上

> ID：15466310
> 
> 赞同：0
> 
> 时间：2013-03-17T21:14:23.050
> 
> 标签：c#, list, listbox

我有一个类型对象列表，如下所示：`List <Sentence> sentences = new List<Sentence>();`

并且列表包含我想在列表框中显示的各种字符串/句子，但是，每次我尝试显示该列表时，列表框都会显示（集合）

我有的：`listBox1.Items.Add(sentences);`

有没有办法将该对象转换为字符串，以便列表中的文本/句子在列表框中可读？

句子结构的内容只是一个字符串变量。

![在此处输入图像描述](../Images/0907cb3b7363f174492be017d27a6467.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:17:14.293

如果您希望`Sentence`在列表框中显示代表 的实例的内容，请覆盖`ToString()`

```
public class Sentence
{
    public override string ToString()
    {
        //return something meaningful here.
    }

    // Rest of the implementation of Sentence
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:18:21.873

您正在将集合项本身（即`sentences`）添加到 ListBox 控件。您需要覆盖-class 中的`ToString()`-method以返回句子的文本值。`Sentence`然后使用 foreach 循环并将您的句子添加到 ListBox 中，例如：

```
foreach(Sentence sen in sentences){
  ListBox1.Items.Add(sen.ToString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T08:14:45.550

您似乎正在将句子列表添加到列表框中。我不确定您期望会发生什么...我的猜测是您正在尝试将列表中的每个句子添加到列表框中，因此您应该使用 AddRange 选项，如其他答案中所述。无论如何，如果您确实使用了 AddRange，那么您可以使用列表框的“DisplayMember”属性来显示在 Sentence 类中保存文本的属性。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        listBox1.DisplayMember = "Text";
        listBox1.Items.Add(new Sentence { Text = "abc" });
        listBox1.Items.Add(new Sentence { Text = "abc1" });
        listBox1.Items.Add(new Sentence { Text = "abc2" });
    }

    public class Sentence
    {
        public string Text { get; set; }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:16:23.810

你看到的是一个字符串。具体来说，您会看到该对象的 .toString() 。

您想在那里传递集合的内容 - 请尝试 .AddRange() 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T21:18:10.890

你必须覆盖`ToString`：

```
public class Sentence
{
    public string Text{ get; set; }

    public override string ToString()
    {
        return this.Text;
    }
} 
```

注意`Formatting`应该禁用：

```
listBox1.FormattingEnabled = false; 
```

[正如这里](https://stackoverflow.com/questions/5744105/overriding-tostring-and-adding-to-listbox-c-sharp)提到的。

另一种方法是使用 Linq 和`AddRange`：

```
listBox1.Items.AddRange(sentences.Select(s => s.Text).ToArray()); 
```

（假设你的`Sentence`班级有一个财产`Text`）

# ruby-on-rails - Rails 3.2 创建一个用于每页页脚的表单

> ID：15466317
> 
> 赞同：0
> 
> 时间：2013-03-17T21:15:12.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我想在我的网页页脚创建一个用于注册邮件列表的表单。我所做的是创建一个在应用程序布局的页脚中呈现这个小表单的部分。

这是部分的代码：

```
<%= form_for(@mailing_list) do |f| %>
  <% if @mailing_list.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@mailing_list.errors.count, "error") %> prohibited this mailing_list from being saved:</h2>

      <ul>
      <% @mailing_list.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :first_name %><br />
    <%= f.text_field :first_name %>
  </div>
  <div class="field">
    <%= f.label :last_name %><br />
    <%= f.text_field :last_name %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我还在学习rails，所以这是从脚手架生成的代码。根据我收集的信息，我需要使用 @mailing_list = MailingList.new 实例化 @mailing_list 变量，但这里的问题是邮件列表控制器中的 NEW 操作不会被调用，因为我不一定要访问该页面。此表单位于每一页的页脚中。

创建此表单的正确方法是什么？有没有办法在每个控制器中不调用 MailingList.new 的情况下做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T00:36:53.147

将您的表格更改为此

```
<%= form_for MailingList.new, html: { remote: true } do |f| %> 
```

所以你不必担心实例变量。您还应该通过`remote: true`，以便通过 ajax 提交表单。要显示错误，请创建一个名为`create.js.erb`under的文件`app/views/mailing_lists`并添加以下内容（只是一个在表单前附加错误的简单脚本）

```
$('.error-messages').remove();
<% if @mailist_list.errors.any? %>
  $('#new_mailing_list').before('<ul class="error-messages"></ul>');
  <%= @mailing_list.errors.full_messages.each do |msg| %>
    $('.error-messages').append('<li><%= escape_javascript msg %></li>');  
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:47:48.690

您可以将`form_for`方法更改为：

```
<%= form_for :mailing_list, url: mailing_lists_path do |f| %> 
```

然后您不再需要`@mailing_list`为每个页面进行初始化。

需要注意的是，您不能在页脚中呈现错误。您需要`new.html.erb`使用问题中的代码创建一个视图，如果在创建操作中保存时出现任何错误，则可以呈现该视图。

# php - 日期过滤器 - 合并数据

> ID：15466318
> 
> 赞同：0
> 
> 时间：2013-03-17T21:15:13.953
> 
> 标签：php, html, forms, date

我有以下代码

```
<form method="get">
<fieldset> <!-- Set class to "column-left" or "column-right" on fieldsets to divide the form into columns -->
    <label>Datum Filter</label>
    <p>
        Vanaf
        <br>
        <select class="date1small-input" type="text" name="fd" />
            <option value="1">1</option>
            <option value="31">31</option>                                      
        </select>

        <select class="date1small-input" type="text" name="fm" />
            <option value="1">1</option>
            <option value="12">12</option>
        </select>

        </select>
            <select class="date2small-input" type="text" name="fy" />
            <option value="2012">2012</option>
            <option value="2013">2013</option>
        </select>
    </p>
    <p>
        Tot en met
        <br>
        <select class="date1small-input" type="text" name="ud" />
            <option value="1">1</option>                
            <option value="31">31</option>                                      
        </select>

        <select class="date1small-input" type="text" name="um" />
            <option value="1">1</option>
            <option value="12">12</option>
        </select>

        </select>
            <select class="date2small-input" type="text" name="uy" />
            <option value="2012">2012</option>
            <option value="2013">2013</option>
        </select>
    </p>
    <p>
        <button class="button" type="submit">Filter</button>
    </p>
</fieldset> 
</form> 
```

它工作正常，但是当我点击“过滤器”按钮时，它会将这样的日期发送到浏览器：

```
URL?fd=1&fm=1&fy=2012&ud=1&um=1&uy=2012 
```

我知道这是正常的，但是否可以让它创建如下链接：

```
URL?fd=1/1/2012&ud=1/1/2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:29:11.767

对于纯 HTML，这是不可能的。

您可以使用 Javascript 函数，它以所需的格式提交表单数据。

另一种方法可能是在服务器端重写 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:33:21.120

如果你在表单的onsubmit上放一个简单的js函数，你可以组装任何你喜欢的url。例如（获取`URL?fdate=1/1/2012&udate=1/1/2012`）：

```
function set_date(e) {
    e.fdate.value = e.fd.value + "/" + e.fm.value + "/" + e.fy.value;
    e.udate.value = e.ud.value + "/" + e.um.value + "/" + e.uy.value;
    return true;
} 
```

`<form action='...' onsubmit='return set_date(this);'>`

# cordova - 是否可以减轻 PhoneGap+jQuery 应用程序的重量？

> ID：15466324
> 
> 赞同：0
> 
> 时间：2013-03-17T21:16:10.720
> 
> 标签：cordova

我刚刚使用 PhoneGap + jQuery 创建了一个非常简单的 Web 应用程序（Hello World 和两个链接），APK 文件大小为 2.0 Mb。

我想知道这是否是一个简单的 PhoneGap+jQuery 应用程序的常规大小，以及是否有任何提示可以减轻它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:19:27.450

您还可以从配置 xml 文件中删除未使用的插件，并从 cordova js 文件中删除相关代码。

希望这可以帮助 ！再见 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:05:34.713

您可以查看[这个 phonegap 应用程序](http://novasoftware.com/download/phonegap/helplessmaze.aspx)，它的大小小于 1MB。它是在[这个 phonegap 框架](http://cordova.codeplex.com/)中开发的，而不是 jquery mobile。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:47:04.807

您提到的大多数“胖子”来自 PhoneGap 本身以及您在应用程序中包含的插件所需的任何本机实现。

您在应用程序中使用的 JavaScript 功能在应用程序包中相对较小。您可以将它们最小化并进一步减小大小，但考虑到它们是捆绑的而不是远程加载的，这一步可能不会产生如此巨大的影响。但是，由于这些库是在运行时解释的，因此运行时内存需求很容易爆炸。

所以，简而言之，比起应用程序包的大小，更要担心你使用了多少 RAM……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:20:43.570

您可以做一些事情，但它们不会产生很大的不同。

1.  使用您正在使用的任何库的缩小版本（在本例中为 jQuery）
2.  在构建之前缩小自己的代码
3.  在第一次启动时下载图像等资源，而不是“将它们放入”（这只是推迟问题）

除此之外，您可以编写更简单的应用程序。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T08:25:55.847

您可以做的最好的事情是删除 splass 屏幕。我的应用没有 splas 屏幕，它的重量是 469k，我使用 jquery mobile

# jquery - 使用 Cycle2 和多个滑块在最后一张幻灯片上做一些事情

> ID：15466328
> 
> 赞同：0
> 
> 时间：2013-03-17T21:16:30.493
> 
> 标签：jquery, slider, slideshow, jcycle

我有一堆带有自己的下一个/上一个控件的滑块。当您到达任何滑块的最后一张幻灯片时，我希望它做一些事情，在本例中是显示警报。

```
<div class="project">

  <div class="slider">

   image

   image

   image

  </div><!-- slider -->

  <div class="controls">

   <span class="prev">Prev</span>

   <span class="next">Next</span>

  </div><!-- controls -->

</div><!-- project --> 
```

重复上述代码 x 5

在我的 .js 文件中：

```
$('.slider').each(function() {
    var p = this.parentNode;
    $(this).cycle({
        fx: 'fade',
        speed: 'slow',
        timeout: 0,
        next: $('span.next', p),
        prev: $('span.prev', p),
        nowrap: 1,
        end: function() {
            alert('The slideshow has ended.');
        }
    });
}); 
```

这是否有意义，任何人都可以提供帮助。提前致谢

顺便说一句：我正在使用 malsup www.malsup.com/jquery/cycle2 的 Cycle2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:23:13.587

我应该正确阅读文档 - 我一直在将 jCycle 和 Cycle2 API 混合在一起。

```
$('.slider').on('cycle-finished', function(event, opts) {
   alert('The slideshow has ended.');
}); 
```

以及滑块的最终代码：

```
$('.slider').each(function() {
var p = this.parentNode;
$(this).cycle({
    fx: 'fade',
    speed: 'slow',
    timeout: 0,
    next: $('span.next', p),
    prev: $('span.prev', p),
    nowrap: 1,
});
}); 
```

# antlr - ANTLR：规则令牌具有非 LL(*) 决策，因为可以从 alt 访问递归规则调用

> ID：15466330
> 
> 赞同：0
> 
> 时间：2013-03-17T21:16:56.743
> 
> 标签：antlr, antlr3

我正在学习有关计算机科学的课程中的解析/词法分析。为此，我们正在使用 ANTLR。

我正在修改一种 XML 语言，所以它不再模棱两可，但是当我对语法进行更改时，ANTLR 会抱怨。

我知道这个特定的问题之前已经被问过，但它并没有真正帮助！

[ANTLR：规则令牌具有非 LL(*) 决策，因为可以从 alts 1,2 访问递归规则调用](https://stackoverflow.com/questions/3249685/antlr-rule-tokens-has-non-ll-decision-due-to-recursive-rule-invocations-reac)

当我从命令提示符运行 ANTLR 时，我已经拍摄了错误的快照。 ![错误快照](../Images/0a06aa9c8c4df4cb558bafc7dca83f82.png)

这是 XML 语法：

```
grammar XML;

options {
language = Java;
}
@lexer::members {
boolean inTag = true;
}
xml_file returns [TaggedElement value]
: tagged_element EOF
;

tagged_element
: start_tag element_body end_tag 
;

element_body
: element
| element element_body
;

element
: data_element
| tagged_element
;

data_element
: PCDATA
;

start_tag
: OPEN_START_TAG NAME CLOSE_TAG
;

end_tag
: OPEN_END_TAG NAME CLOSE_TAG
;

OPEN_START_TAG : '<'  { inTag = true; };
OPEN_END_TAG   : '</' { inTag = true; };
CLOSE_TAG      : '>'  { inTag = false; };

NAME   : {inTag}?=> ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'0'..'9')* ;
WS     : {inTag}?=> (' '|'\t'|'\r'|'\n')+ { $channel = HIDDEN; } ; 
PCDATA : {!inTag}?=> (~'<')+ { setText($text.trim()); if ($text.length() == 0) $channel = HIDDEN; } ; 
```

问题发生在

```
element_body 
```

这是我“修复”语法的地方。所以我的问题是->这个语法有什么问题，我怎样才能使它起作用？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:33:20.600

尝试像这样分解规则：

```
element_body
    : element element_body?
; 
```

# vba - 用户类型未定义工作表 VBA

> ID：15466331
> 
> 赞同：2
> 
> 时间：2013-03-17T21:17:00.517
> 
> 标签：vba, excel, ms-word

我试图添加对我的项目的引用，以便我可以解决这个错误，但我没有成功。

谁能告诉我应该添加哪些库？

```
Dim objFSO As Object
Dim objFolder As Object
Dim objFile As Object
Dim ws As Worksheet

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set ws = Worksheets.Add

 'Get the folder object associated with the directory
Set objFolder = objFSO.GetFolder("C:\")
ws.Cells(1, 1).Value = "The files found in " & objFolder.Name & "are:"

 'Loop through the Files collection
For Each objFile In objFolder.Files
    ws.Cells(ws.UsedRange.Rows.Count + 1, 1).Value = objFile.Name
    MyFile = objFile.Name
      NewName = getNewFileName() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T09:09:13.413

如果您**在 Word IDE**中工作，请转到**工具 -> 参考**并浏览**Microsoft Excel [版本号] 对象库**：

![在此处输入图像描述](../Images/cc869889f819a05465f36105794cc4e5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T00:42:01.357

您已标记问题**word-vba**，但您使用的`Worksheets`是 Excel 中的参考资料。

如果您确实`Worksheets`在 Word 中使用该引用，您将收到`User-defined type not defined`-error。

如果没有，则缺少其他内容，您需要告诉我们更多信息。错误突出显示哪一行等。

# css - 使用 CSS 的表格列响应式排列

> ID：15466336
> 
> 赞同：1
> 
> 时间：2013-03-17T21:17:35.993
> 
> 标签：css, responsive-design

所以我有一张一排两列的表格——问题是我希望这些列在小屏幕上堆叠在一起。有谁知道这是否可以使用纯CSS？

```
<tr>
<td></td>
<td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:21:45.410

如何使用`float: left`解决方案：

```
tr td {
    width: 200px;
    height: 100px;
    float: left;
}

tr {
    clear: left;
} 
```

示例：http: [//jsfiddle.net/FCegx/](http://jsfiddle.net/FCegx/)

# ios - 为什么这个纹理在 iOS OpenGL ES 2.0 中没有重复？

> ID：15466337
> 
> 赞同：0
> 
> 时间：2013-03-17T21:17:37.047
> 
> 标签：ios, objective-c, xcode, opengl-es-2.0, glkit

我有一个类可以在 iOS 的屏幕上呈现带纹理的 2D 形状。如果我使用小于 1.0 的纹理坐标，则纹理会适当缩放以匹配坐标。但是，如果我使用大于 1.0 的纹理坐标，则纹理会正确缩放，但不会像我预期的那样重复。相反，它只绘制一次纹理并在形状的其余部分重复边缘像素（我希望这是有道理的：/）

有没有办法使用 GLKit 在 OpenGL ES 2.0 中打开重复纹理？

渲染函数为：

```
-(void)render
{
    // If we have a texture set, setup the Texture Environment Mode
    if (texture != nil) {
        self.effect.texture2d0.envMode = GLKTextureEnvModeReplace;
        self.effect.texture2d0.target = GLKTextureTarget2D;
        self.effect.texture2d0.name = texture.name;
    }

    // Perform any Transformations on the Sprite
    GLKMatrix4 modelViewMatrix = GLKMatrix4Multiply(
        GLKMatrix4MakeTranslation(self.position.x, self.position.y, 0.0f),
        GLKMatrix4MakeRotation(GLKMathDegreesToRadians(self.rotation), 0, 0, 1)
    );

    self.effect.transform.modelviewMatrix = modelViewMatrix;

    // Prepare to Draw
    [self.effect prepareToDraw];

    // Setup the Vertices
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 0, self.vertices);

    // Setup the Texture Coordinates
    if (texture != nil) {
        glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
        glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0, self.texCoords);
    }

    // Enable Alpha Blending for Transparent PNGs
    glEnable(GL_BLEND);
    glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);

    // Draw the Triangle Strip from the Vertex Array
    glDrawArrays(GL_TRIANGLE_STRIP, 0, self.numVertices);

    // Disable Alpha Blending
    glDisable(GL_BLEND);

    // Disable Texture Environment
    if (texture != nil) {
        glDisableVertexAttribArray(GLKVertexAttribTexCoord0);
    }

    glDisableVertexAttribArray(GLKVertexAttribPosition);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:24:45.483

创建纹理时，您可以设置用于处理边缘的模式。将模式设置为 REPEAT 而不是 CLAMP_TO_EDGE（这显然是默认值），如下所示：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T21:24:59.767

您需要使用[glTexParameter](https://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexParameter.xml)将 GL_TEXTURE_WRAP_S 和 GL_TEXTURE_WRAP_T 设置为 GL_REPEAT。

希望有帮助。

# c - 为什么从 使用 -std=c99 消失？

> ID：15466342
> 
> 赞同：4
> 
> 时间：2013-03-17T21:18:21.970
> 
> 标签：c, standards, c99

```
// Filename: test.c
#include <sys/types.h>
int main() {
    uint a;
    return 0;
} 
```

上面的代码可以使用 gcc 和 clang 和 gnu89 或 gnu99 等标准进行编译。换句话说，以下工作。

```
$gcc test.c # for the default is std=gnu89
$clang test.c # for the default is std=gnu99 
```

但是，以下失败并出现错误“未声明的 uint”。

```
$gcc -std=c99 test.c
$clang -std=c99 test.c 
```

有人可以解释为什么 uint 的定义在 c99 标准中消失了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T21:26:13.523

因为 C 标准没有定义/要求 type `uint`。它很可能是编译器、系统或库特定的便利类型。不要使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:00:47.430

的内容见[这里](http://linux.die.net/include/sys/types.h)，与uint相关的部分介绍如下：

```
#ifdef __USE_MISC
/* Old compatibility names for C types.  */
typedef unsigned long int ulong;
typedef unsigned short int ushort;
typedef unsigned int uint;
#endif 
```

这个[SO](https://stackoverflow.com/questions/10231885/what-is-use-misc-macro-used-for)告诉我们这个特殊的宏来自哪里，提供了一些基本的解释。

[仔细研究表明，SVID 也是一个标准，并以此](http://linux.die.net/man/7/standards)为后盾。GNU 标准 gnu89 和 gnu99 可能涵盖了尽可能多的内容，因此 uint 不包括在 C99 中但对于 gcc 和 clang 的默认标准的结果行为是可以理解的。

# sql - 基本 SQL 用户定义函数，无法正常工作

> ID：15466345
> 
> 赞同：1
> 
> 时间：2013-03-17T21:18:26.400
> 
> 标签：sql, function, postgresql, stored-procedures, operator-precedence

我正在尝试用 SQL 编写一个函数，输出一个球队在一个赛季的棒球比赛中的胜率。

```
CREATE FUNCTION
calc_winning_percentage(IN w integer, IN l integer, OUT p numeric)
RETURNS numeric AS $$
    SELECT $1 ::numeric/$1 + $2 AS p;
$$ LANGUAGE SQL; 
```

这是当前功能。它应该很简单。W = 胜利。L = 损失。P = 百分比。你取胜 (w) 并除以胜 + 负 (w + l)。理论上，这给出了胜率。

我拿了一些已经提供的数据并尝试将其插入。它很接近，但它不正确。假设我们有一支 96 胜 63 负的球队。如果你把这两个数字加起来，你会得到 159\. 96/159 = ~.604。但是，当我通过查询运行这些数字时，我得到 64.0000。

我不擅长用其他语言编写函数（我*保证*），所以我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:23:32.523

[运算符优先级](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-PRECEDENCE)！

```
CREATE OR REPLACE FUNCTION calc_winning_percentage(
     w integer
    ,l integer
    ,OUT p numeric)
  RETURNS numeric AS
$func$
    SELECT $1::numeric / ($1 + $2)
$func$ LANGUAGE SQL; 
```

你需要括号`($1 + $2)`。

### 圆形的

您可以将其构建到您的函数中：

```
CREATE OR REPLACE FUNCTION calc_winning_percentage_rd3(
  w integer, 
  l integer,
  OUT p numeric)
RETURNS numeric AS
$func$
SELECT round($1::numeric/($1 + $2), 3)
$func$ LANGUAGE SQL; 
```

*或者*您可以`round()`像这样从上面申请该功能：

```
SELECT round(calc_winning_percentage(1000, 29), 3); 
```

[**-> SQLfiddle 演示**](http://www.sqlfiddle.com/#!12/8630d/2)

请注意，[`round()`有两个参数](http://www.postgresql.org/docs/current/interactive/functions-math.html#FUNCTIONS-MATH-FUNC-TABLE)需要`numeric`作为第一个输入。

# c++ - ctags c++ 找到函数的第一个实例，而不考虑类

> ID：15466346
> 
> 赞同：0
> 
> 时间：2013-03-17T21:18:38.987
> 
> 标签：c++, c, linux, vim, emacs

我使用 ctags (-e) 并且效果很好。但是，当我搜索成员函数时，ctags 返回它找到的第一个定义。例如：

```
ClassA classA;
classA.Initialize();
classA.DoSomething();

ClassB classB;
classB.Initialize();
classB.PerformAction(); 
```

如果我在我希望转到的标签`Initialize()`（`M-.`或`g^]`）上搜索。如果碰巧有另一个类具有相同的方法，并且它的标签出现在标签文件中的标签之前，那么（假设是）我会被带到.`classA.Initialize()``ClassA::Initialize()``classA``ClassB::Initialize()``ClassB::Initialize()`

但是，如果当我键入`M-.`并修改要访问的标签时，`ClassA::Initialize()`我会转到`ClassA::Initialize()`. 有没有办法让它自动化？

这种行为在 emacs 和 vim 中是一致的。

此外，使用 GNU 全局 (gtags) 甚至找不到`ClassA::Initialize()`. 它只会打印出所有具有`Initialize()`方法的类。

编辑：

如果问题还不清楚，我会问是否有一个插件可以检查方法（例如，它是通过`.`or访问的成员函数`->`），如果它会找到对象的类型，然后寻找`Object::Method`而不是为方法。

这是一个简单的功能。例如：

1.  检查标签是否是一种方法。
2.  如果它是一个方法，它是一个类的成员。
3.  如果类的成员在当前光标之前解析代码并找到声明（ClassA classA）。
4.  查找`ClassA::Initialize()`以上所有内容是否为真，而不是`Initialize()`.

那是不是更清楚了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:55:38.877

Ctags 仅索引您的代码。您仅在编辑器完成搜索时使用它来生成`tags`文件。它如何进行搜索是您的编辑的事情，而 ctags 与它无关。

当你`<C-]>`对方法名进行处理时，Vim 会跳转到它找到的第一个匹配项。因为它没有办法分析你的代码和你的想法，所以它无法决定你真正想要什么匹配。

它最接近的是“优先级”的概念，请参阅`:h tag-priority`，但它不会真正帮助您。

处理该限制的常用方法是使用列出所有匹配项的命令，例如`g]`or `g<C-]>`。

# javascript - 列表中的向下滑块

> ID：15466351
> 
> 赞同：0
> 
> 时间：2013-03-17T21:19:32.553
> 
> 标签：javascript, css, titanium

我是 Appcelerator Titanium 的新手，通过开发一些移动应用程序进行练习，遇到了需要帮助的情况。

我有一个项目列表，它从表格中显示，单击任何项​​目时，从单击的项目向下滑动的下方应该有更大的空间用于某些输入字段。我附上了一个样本，基本上来自图 1，当被触摸时（当然在移动设备中）它应该像图 2 一样展开。

谢谢。 ![图。1](../Images/d839f40ff298a759eb47227259e3b688.png)![图2](../Images/6d5005d84113340b45edf55743b7d16b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:21:34.127

这对 Titanum 来说有点棘手。看起来它是一种基于行的方法。所以首先你应该决定使用`TableView`

```
var tableView = Ti.UI.createTableView({
  width: Ti.UI.FILL,
  height: Ti.UI.FILL,
}); 
```

然后您需要从左侧屏幕添加行。这些是简单的行。

```
var rows = [];
for (var i = 0; i<data.length; i++) {
  var row = Ti.UI.createTableViewRow(...);
  // do some layout, add some views here
  rows.push(row);
}
// add to table view
tableView.data = [rows]; 
```

然后你需要应用一个“点击”监听器。

```
var isOpen = false; // is already one element clicked and opened?
var whichIsOpen = undefined; // if yes, which one (index of clicked element)?
tableView.addEventListener('click', function(e){
  if(isOpen && e.index === whichIsOpen) {
    tableView.deleteRow(whichIsOpen+1);
    isOpen = false;
    return;
  }
  if(isOpen && e.index === whichIsOpen + 1) {
    return;
  }
  tableView.deleteRow(whichIsOpen+1);
  var specialRow = Ti.UI.createTableViewRow(...); // row which contains the elements of the right screen
  var newIndex = e.index > whichIsOpen ? e.index : e.index + 1; // because removed one
  tableView.insertRowAfter(newIndex-1, specialRow);
  whichIsOpen = newIndex;
}) 
```

在此解决方案中，您只能同时打开一个元素。我从脑海中输入了这个，我没有测试。所以这取决于你！

# encryption - 数字的简单加密算法

> ID：15466352
> 
> 赞同：0
> 
> 时间：2013-03-17T21:19:42.373
> 
> 标签：encryption

我正在做一个每 5 秒获取一次 GPS 位置并将其发送到服务器的项目，但我需要做一些安全措施，所以我需要在 android 设备中加密位置并在服务器端解密它，所以我正在寻找一个简单的算法来做到这一点提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:29:02.110

供您尝试的想法：

1.  通过 HTTPS 发送您的数据。它将添加您需要的安全层，它是可用的最简单的方法之一。
2.  将[Java 加密 API](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html)与 RSA 等非对称加密算法结合使用。您可能应该避免使用 AES 或类似的对称算法，因为您不应该在您的 Android 应用程序中存储密码 - 它很容易被破坏。

# visual-studio - 用于文本搜索的 Visual Studio 插件

> ID：15466353
> 
> 赞同：0
> 
> 时间：2013-03-17T20:50:34.560
> 
> 标签：visual-studio, plugins

我正在寻找用于搜索文本条目的 Visual Studio 插件（如 ctr+f，不按文件名或类型搜索 - Resharper 做得很好），但有额外的选项，如：

*   包含/排除文件类型的能力，例如：我知道我不想查看视图文件 (*cshtml) 或脚本
*   能够进行区分大小写和不区分大小写的搜索
*   可选：按正则表达式搜索

你能推荐什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:58:17.300

“在文件中查找” ctrl+shift+f 可以完成上述大部分操作。
它只能包含某些文件类型（但不排除），进行区分大小写/不区分大小写的搜索并使用正则表达式。

但是，如果您真的想要一个插件，请查看 Sonic File Finder ( [http://www.jens-schaller.de/sonic-tools/sonicfilefinder/overview/overview.htm](http://www.jens-schaller.de/sonic-tools/sonicfilefinder/overview/overview.htm) )。我曾经在 VS 2005 中使用它，直到我变得更加清晰，我主要通过类型、符号或 TODO 进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:50:16.013

总有 Powershell，结合 Get-ChildItem -Recurse 查找您想要的文件，Get-Content 扫描文件内容和 -match 运算符通过正则表达式查找您想要的字符串。

例如，这将显示包含表达式的文件的文件名列表：

```
Get-Childitem c:\Projects -Exclude *.csproj -Recurse | ? { (Get-Content $_) -match "<expression>" } 
```

或者这将显示所有匹配的行，grep 样式：

```
Get-Childitem c:\Projects -Exclude *.csproj -Recurse | Select-String -pattern "<expression>" 
```

# unix - 自动生成 RTF 表

> ID：15466361
> 
> 赞同：0
> 
> 时间：2013-03-17T21:21:10.027
> 
> 标签：unix, rtf

我需要将 Linux 文本文件中存在的一些信息导出到包含几个表的 Windows Word 文件中。

有没有现成的工具可以在 Linux 中创建一个漂亮的 RTF 表？
输入可以是 CSV，也可以是其他一些简单的表格格式。

我试过谷歌搜索，但大多数结果都是相反的（从 RTF 创建简单的 txt）。

我尝试自己写一些东西，（根据[Using Tables in RTF](https://stackoverflow.com/questions/8349827/using-tables-in-rtf)）但遇到了一些问题，并认为也许没有必要重新发明轮子......

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:35:22.630

您可以在 html 中创建表格并[使用 unoconv](http://dag.wieers.com/home-made/unoconv/)将其转换为 rtf 。它需要具有 UNO 绑定的最新 LibreOffice 或 OpenOffice。

# javascript - 网站中的随机字母 C？

> ID：15466366
> 
> 赞同：1
> 
> 时间：2013-03-17T21:21:37.087
> 
> 标签：javascript, jquery, html, css

[http://www.iamaaron.com/beta/](http://www.iamaaron.com/beta/)

如果您查看该页面，页面顶部的白色标题上方会有随机数量的间距，这不应该存在。如果您也注意到屏幕的左上角还有字母“C”。我无法弄清楚这是什么输出以及如何让它消失。它甚至没有出现在 DOM 中。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T21:24:09.963

`typicons.css:19`

```
.home:before {
    content: "C";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T21:26:11.047

这个“C”字母在 CSS 文件 icons/css/typicons.css 中：

```
.home:before {
    content: "C";
} 
```

# c - 奇怪的 printf/pthread 错误？

> ID：15466367
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:21:42.860
> 
> 标签：c, pthreads, printf, mutex

因此，我正在开发一个线程项目，并且正在测试我的一个文件，以确保结构和字段获得正确的值。我正在运行这个功能：

```
struct ReportQueue {
   sem_t count;
   pthread_mutex_t mutexAdd;
   ReportList *RQList;
};

ReportQueue *RQCreate() {
   ReportQueue *rq;

   printf("RQCreate() called\n");
   rq = calloc(1, sizeof(ReportQueue));
   sem_init(&rq->count, 0, 0);
   pthread_mutex_init(&rq->mutexAdd, NULL);
   rq->RQList = NULL;
   return rq;
} 
```

有了这个主要：

```
int main() {
   ReportQueue *rQueue;
   Report report;

   rQueue = RQCreate();
   printf("SemCount: |%d| RQList: |%d| MutexAdd |%d|\n", rQueue->count, rQueue->RQList, rQueue->mutexAdd);
   printf("SemCount: |%d|\n", rQueue->count);
   printf("RQList: |%d|\n", rQueue->RQList);
   printf("MutexAdd: |%d|\n", rQueue->mutexAdd);

   return;
} 
```

我得到这个输出：

```
RQCreate() called
SemCount: |0| RQList: |128| MutexAdd |0|
SemCount: |0|
RQList: |0|
MutexAdd: |0| 
```

这对我来说没有任何意义。“RQList”的值不应该根据我如何打印出来而改变？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:48:46.443

a minimal example that works fine... this isn't an answer but shows that all seems ok

### + it didn't fit in a comment :D

```
#include <stdlib.h>
#include <stdio.h>
#include <semaphore.h>
#include <pthread.h>

struct ReportQueue {
   sem_t count;
   pthread_mutex_t mutexAdd;
   int *RQList;
};

struct ReportQueue *RQCreate() {
   struct ReportQueue *rq;

   printf("RQCreate() called\n");
   rq = calloc(1, sizeof(struct ReportQueue));
   sem_init(&rq->count, 0, 0);
   pthread_mutex_init(&rq->mutexAdd, NULL);
   rq->RQList = NULL;
   return rq;
}

int main() {
   struct ReportQueue *rQueue;

   rQueue = RQCreate();
   printf("SemCount: |%d| RQList: |%d| \n", rQueue->count, (int)rQueue->RQList);
   printf("SemCount: |%d|\n", rQueue->count);
   printf("RQList: |%d|\n", (int)rQueue->RQList);

   return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:37:16.840

不要`%d`用于打印出类型为`sem_t`、`pthread_mutex_t`或指针的变量。充其量您将获得实现定义的行为（如果`sem_t`并且`pthread_mutex_t`恰好是 typedef`int`并且指针恰好与 int 大小相同）。但总的来说，您会得到未定义的行为，因为这些类型可能与这些类型无关`int`- 这就是`%d`告诉`printf()`相应参数的类型的原因。

这就是为什么`printf()`调用会产生没有任何意义的输出。你传递的论点`printf()`没有任何意义。

# asp.net-mvc - 在 Castle Windsor 中自动延迟解析组件

> ID：15466370
> 
> 赞同：3
> 
> 时间：2013-03-17T21:22:00.263
> 
> 标签：asp.net-mvc, dependency-injection, castle-windsor, lazy-initialization, constructor-injection

通过在容器中注册 LazyOfTComponentLoader 并按照[此处](http://docs.castleproject.org/Windsor.Whats-New-In-Windsor-3.ashx)`Lazy<T>`指定的方式解析 a ，可以延迟解析 Castle Windsor 中的组件：

```
container.Register(
   Component.For<ILazyComponentLoader>().ImplementedBy<LazyOfTComponentLoader>(),
   Component.For<ISomeService>().ImplementedBy<ServiceImpl>().LifestyleTransient()
   );

var lazy = container.Resolve<Lazy<ISomeService>>();

lazy.Value.DoSomething(); 
```

但是，是否可以在容器中**注册**一个组件，以便它*始终*被解析为 a`Lazy<T>`而无需在解析调用中指定 Lazy ？

具体来说，我想知道在使用构造函数注入时如何将惰性组件注入到 MVC 项目中的控制器中。

编辑：您可以`Lazy<ISomeService> someService`在控制器的构造函数中指定为参数，如此处[所示](http://blog.ploeh.dk/2011/03/04/Composeobjectgraphswithconfidence/)。但是，有没有办法确保通过注册过程懒惰地解析组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:58:18.043

如果要解析组件的延迟加载实例，则需要执行`Resolve<Lazy<ISomeService>>()`. 函数lazy.Value 将执行组件的实际解析。如果您要进行解析，您将直接获得您的组件。

如果你真的想要一个只在第一次使用时才解析而不使用 Lazy 的组件，你可以求助于编写一个拦截器。

祝你好运，马尔维恩。

# android - Android achartengine 标签重叠

> ID：15466377
> 
> 赞同：0
> 
> 时间：2013-03-17T21:22:47.687
> 
> 标签：android, achartengine

我遇到了 x 轴标签重叠的问题。有没有办法设置值之间的间距来防止这种情况？

![在此处输入图像描述](../Images/c4e99b120560c3962449b1e9a9b1c60d.png)

谢谢

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:10:46.667

我通过将最大 x 范围值设置为一个小数字（例如 3）解决了这个问题。这迫使数据点更加分散，这反过来又迫使 x 轴标签更加分散。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:47:10.763

你可以使用

```
multiRenderer.setBarSpacing(double spacing); 
```

我认为这会有所帮助。

# c++ - 堆排序错误：变量周围的堆栈已损坏？

> ID：15466379
> 
> 赞同：0
> 
> 时间：2013-03-17T21:22:51.230
> 
> 标签：c++, heap, heapsort

我正在为一项任务实施堆排序。我们必须像她在课堂上用她的伪代码那样做，否则我们不会得到荣誉。

我收到运行时错误：***围绕变量“heapArray”的堆栈已损坏***。我玩了调试器，但仍然无法找出导致错误的原因。我很确定这与我在 HeapSort() 函数中的 For 循环有关。任何人都可以帮忙吗？

```
void HeapSort(int heapArray[])
{   
    int heap_size = SIZE;
    int n = SIZE;
    int temp;

    Build_Max_Heap(heapArray);//function not implemented, only declared for compile

    for(int i = n; i >=2; i--) //***I think error coming from something in here
    {
        temp = heapArray[1];
        heapArray[1] = heapArray[i];
        heapArray[i] = temp;

        heap_size = heap_size-1;
        Max_Heapify(heapArray,1);//function not implemented, only declared for compile
    }

    return;
} 
```

* * *

```
int main()
{
    int heapArray[SIZE] = {  5 ,99, 32, 4, 1, 12, 15 , 8, 13, 55 };
    HeapSort(heapArray);

    cout << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:25:02.377

你写的越界

```
for(int i = n; i >=2; i--) 
{
temp = heapArray[1];
heapArray[1] = heapArray[i];  //THIS IS WRONG
heapArray[i] = temp;          // 
```

在 c 中，数组从 0 到 n-1。heapArray 声明为大小为 SIZE。

应该更像：

```
for(int i = n - 1; i >=2; i--) //Now you start from n-1
{
temp = heapArray[1];
heapArray[1] = heapArray[i];
heapArray[i] = temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:25:06.523

错误是：

```
for(int i = n; i >=2; i--) 
```

您必须从数组索引开始，`n-1`因为数组索引从 0 开始。正确的做法应该是

```
for(int i = n -1; i >=1; --i) 
```

如果从 . 开始，数组索引超出范围错误`n`。您书中的伪代码（为了方便起见）很可能使用从 1 到 的数组索引`n`，但在使用 C++ 的实际程序中，我们应该从 0 到开始`n-1`。

# php - 如何在子域上共享会话？

> ID：15466381
> 
> 赞同：1
> 
> 时间：2013-03-17T21:23:17.333
> 
> 标签：php, session

我尝试将以下行放在我的根 HTACCESS 中：

```
php_value session.cookie_domain .domain.com 
```

但它给了我 500 内部服务器错误！我怎样才能解决这个问题？或者如何将会话共享到子域？

这是 error_log 消息：

```
public_html/.htaccess: Invalid command 'php_value', perhaps misspelled or defined by a module not included in the server configuration, referer: http://xxxxx.xx/xxxxx.php 
```

还有一个问题：如果两个子域位于两个不同的 IP 上，会话是否仍然有效？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:34:27.870

不要`.htaccess`用于定义`php.ini`指令。相反，添加`session.cookie_domain=.domain.com`到您的`php.ini`文件中。

如果这不起作用，您可以[`session_set_cookie_params`](http://php.net/session-set-cookie-params)在调用之前使用`session_start()`

# bash - 如何检测 Node.js 脚本是否通过 shell 管道运行？

> ID：15466383
> 
> 赞同：30
> 
> 时间：2013-03-17T21:23:21.423
> 
> 标签：bash, node.js, pipe

我的问题与此类似：[如何检测我的 shell 脚本是否通过管道运行？](https://stackoverflow.com/questions/911168/detect-if-shell-script-is-running-through-a-pipe). 不同之处在于我正在处理的 shell 脚本是用 Node.js 编写的。

假设我输入：

```
echo "foo bar" | ./test.js 
```

那么我怎样才能获得价值`"foo bar"`呢`test.js`？

我读过[Unix and Node: Pipes and Streams](http://dailyjs.com/2012/03/08/unix-node-pipes/)但这似乎只提供了一个异步解决方案（除非我弄错了）。我正在寻找一个同步的解决方案。此外，使用这种技术，检测脚本是否正在通过管道传输似乎不是很简单。

TL; DR 我的问题有两个：

1.  如何检测 Node.js 脚本是否通过 shell 管道运行，例如`echo "foo bar" | ./test.js`？
2.  如果是这样，如何读出 Node.js 中的管道值？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-18T19:39:43.980

我刚刚为我的部分问题找到了一个更简单的答案。

要快速同步地检测管道内容是否正在传递到 Node.js 中的当前脚本，请使用`process.stdin.isTTY`布尔值：

```
$ node -p -e 'process.stdin.isTTY'
true
$ echo 'foo' | node -p -e 'process.stdin.isTTY'
undefined 
```

因此，在脚本中，您可以执行以下操作：

```
if (process.stdin.isTTY) {
  // handle shell arguments
} else {
  // handle piped content (see Jerome’s answer)
} 
```

我之前没有找到这个的原因是因为我正在查看文档`process`，其中`isTTY`根本没有提到。[相反，它在TTY 文档](http://nodejs.org/api/tty.html)中有所提及。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-17T23:25:32.423

管道用于处理像“foo bar”这样的小输入，但也可以处理大文件。

流 API 确保您可以开始处理数据，而无需等待大文件完全通过管道传输（这对速度和内存更好）。它这样做的方式是为您提供大量数据。

管道没有同步 API。如果你真的想在做某事之前掌握整个管道输入，你可以使用

**注意：仅使用[node >= 0.10.0](http://blog.nodejs.org/2013/03/11/node-v0-10-0-stable/)因为示例使用 stream2 API**

```
var data = '';
function withPipe(data) {
   console.log('content was piped');
   console.log(data.trim());
}
function withoutPipe() {
   console.log('no content was piped');
}

var self = process.stdin;
self.on('readable', function() {
    var chunk = this.read();
    if (chunk === null) {
        withoutPipe();
    } else {
       data += chunk;
    }
});
self.on('end', function() {
   withPipe(data);
}); 
```

测试

```
echo "foo bar" | node test.js 
```

和

```
node test.js 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-11-25T01:47:15.593

事实证明这`process.stdin.isTTY`是不可靠的，因为您可以生成一个不是 TTY 的子进程。

[我在这里](https://unix.stackexchange.com/questions/382849/determine-if-process-is-connected-to-another-process-via-pipes)使用[文件描述符](https://en.wikipedia.org/wiki/File_descriptor)找到了更好的解决方案。

您可以通过以下功能测试您的程序是否通过管道输入或输出：

```
function pipedIn(cb) {
    fs.fstat(0, function(err, stats) {
        if (err) {
            cb(err)
        } else {
            cb(null, stats.isFIFO())
        }
    })
}

function pipedOut(cb) {
    fs.fstat(1, function(err, stats) {
        if (err) {
            cb(err)
        } else {
            cb(null, stats.isFIFO())
        }
    })
}

pipedIn((err, x) => console.log("in", x))
pipedOut((err, x) => console.log("out", x)) 
```

这是一些证明它有效的测试。

```
❯❯❯ node pipes.js
in false
out false
❯❯❯ node pipes.js | cat -
in false
out true
❯❯❯ echo 'hello' | node pipes.js | cat -
in true
out true
❯❯❯ echo 'hello' | node pipes.js
in true
out false
❯❯❯ node -p -e "let x = require('child_process').exec(\"node pipes.js\", (err, res) => console.log(res))"
undefined
in false
out false
❯❯❯ node -p -e "let x = require('child_process').exec(\"echo 'hello' | node pipes.js\", (err, res) => console.log(res))"
undefined
in true
out false
❯❯❯ node -p -e "let x = require('child_process').exec(\"echo 'hello' | node pipes.js | cat -\", (err, res) => console.log(res))"
undefined
in true
out true
❯❯❯ node -p -e "let x = require('child_process').exec(\"node pipes.js | cat -\", (err, res) => console.log(res))"
undefined
in false
out true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-29T11:46:31.753

如果您需要在 bash 中使用**内联 --eval**字符串通过管道进入 nodejs，`cat`也可以：

```
$ echo "Hello" | node -e "console.log(process.argv[1]+' pipe');" "$(cat)"
# "Hello pipe" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-21T15:38:38.587

您需要像这样检查`stdout`（`stdin`不像其他地方建议的那样）：

```
if (process.stdout.isTTY) {
  // not piped
} else {
  // piped
} 
```

# css - 在这个例子中我应该使用 div 还是 span ？

> ID：15466385
> 
> 赞同：0
> 
> 时间：2013-03-17T21:23:50.260
> 
> 标签：css, tags, html

所以我想对显示标题、作者和帖子本身的内容部分进行编码，我正在使用的代码是我希望标题在一行顶部，然后作者在另一行，内容在另一行：

```
<div id="main">
    <div class="container">
        <div class="title">Title</div>
        <div class="author">Author</div>
        <div class="content">
            Content here
        </div>
    </div>
</div> 
```

或者跨度会是这样一个更好的选择吗？

```
<div id="main">
    <div class="container">
        <span class="title">Title</span>
        <span class="author">Author</span>
        <span class="content">
            Content here
        </span>
    </div>
</div> 
```

还是有完全不同的更好的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:26:33.830

`div`是[对内容进行分组](http://www.w3.org/TR/html5/grouping-content.html)，`span`是[文本级语义](http://www.w3.org/TR/html5/text-level-semantics.html)。在给出的两个示例中，您最好使用后者：

```
<div id="main">
    <div class="container">
        <span class="title">Title</span>
        <span class="author">Author</span>
        <span class="content">
            Content here
        </span>
    </div>
</div> 
```

但是，根据其中包含的内容，`.content`您可能想要使用`div`它。

为了正确符合您应该[`cite`](http://www.w3.org/TR/html5/text-level-semantics.html#the-cite-element)用于标题的规范。同样，如果您`.content`是引用或摘录，您应该使用[`q`](http://www.w3.org/TR/html5/text-level-semantics.html#the-q-element)或[`blockquote`](http://www.w3.org/TR/html5/grouping-content.html#the-blockquote-element)

```
<div id="main">
    <div class="container">
        <cite class="title">Title</cite>
        <span class="author">Author</span>
        <q class="content">
            Content here
        </q>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:27:44.513

也许您应该尝试使用 HTML 语义标记而不是`div`s？

```
<section id="main">
    <article>
        <hgroup>
            <h1>Title</h1>
            <h2>author</h2>
        </hgroup>
        <section>
            Content
        </section>
    </article>
</section> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T21:46:00.863

没关系。所有支持一个优于另一个的答案都很好，但几乎是武断的意见。

最后，两者`DIV`都`SPAN`只是通用容器。它们本身并没有任何意义。

因此，如果您必须在这两者之间进行选择，那没关系。但是，由于您的一个要求：

> 是我希望标题在一行顶部的位置，然后是另一行的作者和另一行的内容

...我建议`DIV`除了 div 之外没有其他原因，默认情况下，它是块级元素，这意味着它会自动为您格式化为单独的行。

综上所述，所有建议您考虑使用更多语义容器的人都是正确的。这会更好地对待`ol`吗？或者甚至只是`p`标签？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:27:19.770

该`<div>`标签应该用于*将*您的页面划分为逻辑块。这里 a`<span>`会更合适。

**但是**，当您显示文本时，出现以下问题：

```
<div id="main">
    <div class="container">
        <h2 class="title">Title</h2>
        <a class="author">Author</a>
        <p class="content">
            Content here
        </p>
    </div>
</div> 
```

毕竟，它们是专门为文本设计的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T21:25:45.013

如果问题只是一个选择`div`，`span`那么答案是......

`span`用于单个元素和`div`块。

第二个变体比第一个更好。

有关详细信息，请参阅[分组元素：DIV 和 SPAN 元素](http://www.w3.org/TR/html401/struct/global.html#h-7.5.4)。

这是那里的报价：

> 这些元素将内容定义为内联 (SPAN) 或块级 (DIV)

# c# - C#中的图片框

> ID：15466399
> 
> 赞同：1
> 
> 时间：2013-03-17T21:25:11.403
> 
> 标签：c#, winforms, picturebox

我在添加一些`picture boxes`. 我有一个`form`（和它的类）和一个单独的类。我想做的就是把`picture boxes`我第二堂课的一些东西放在 中`form`，但似乎我就是不知道怎么做。哦，我不想把图片框从第二类发送到主类，然后在那里添加，而是直接添加它。如果我尝试类似：

```
Form1.ActiveForm.Controls.Add(x); 
```

（其中 x 是我的图片框）从第二堂课我得到了`'Cross-thread operation not valid'`例外。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:32:13.720

您是否尝试在非 UI 线程上运行显示您的图片？通常这就是你如何获得跨线程操作无效异常。

您可能需要在课堂上简单地执行以下操作。

```
if (this.InvokeRequired)
{
   this.Invoke(() => ActiveForm.Controls.Add(x));
}
else
{
   ActiveForm.Controls.Add(x);
} 
```

这将确保您使用 UI 线程来执行您的代码。

# c++ - C++ 泛型使用父类（引用或指针）

> ID：15466403
> 
> 赞同：-2
> 
> 时间：2013-03-17T21:25:27.683
> 
> 标签：c++, inheritance

```
class FunctionBase {
  public:
    const double operator() (double a_) const = 0;
}

class AddN : public FunctionBase {
  public:
    AddN (int n_) : FunctionBase(), _n(n_) {}
    const double operator() (double a_) const { return (a_ + n); }
  private:
    int _n;
} 
```

`FunctionBase *`由于编译器无法`AddN`从 a重建 a ，我是否必须用作占位符`FunctionBase`，还是有办法使用`FunctionBase &`？

- 编辑 -

我有一个`std::map<std::string, FunctionBase *>`，我很好奇我是否能够使用引用而不是指针，所以我可以保证在使用它之前指针不为 NULL。我正在尝试使代码更耐错误。如果我将它切换到 a `FunctionBase &`，编译器会抱怨它无法实例化`AddN`，`FunctionBase &`这是完全有意义的，但是我希望有一个我不知道的常见解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:13:37.907

[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)建议使用, 或 ，而不是定义类层次结构[`boost::function`](http://www.boost.org/doc/libs/1_53_0/doc/html/function.html)。这些可以保存一个可调用的并且可以存储在`map`值中，保证函数对象的生命周期：

```
std::map<std::string, std::function<double(double)>> functions; 
```

这消除了使用类层次结构的需要，并且不需要添加到映射中的函数无论如何都是相关的，这样更灵活。

只是要指出，使用引用而不是指针并不能保证被引用的对象仍然存在。悬空引用是可能的，就像悬空指针一样。

# android - 在键盘上获取 MotionEvent

> ID：15466404
> 
> 赞同：3
> 
> 时间：2013-03-17T21:25:35.640
> 
> 标签：android, touch, android-event

我正在寻找是否可以在键盘上（在我的应用程序中）捕获 MotionEven 数据（压力）？或者有没有办法在我的应用程序中拦截屏幕上的所有触摸（类似于全屏模式）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-21T10:33:48.933

试试看：

```
 @Override
         public boolean onTouchEvent(MotionEvent me) {
         //for example
         if (me.getAction() == MotionEvent.ACTION_UP) {
         }

} 
```

# c++ - 使用 new 创建复杂（包含堆指针）对象时，是否需要复制构造函数？

> ID：15466406
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:25:56.373
> 
> 标签：c++

例如，如果我有一个游戏，我想要在屏幕上弹跳点，假设点在构建时被放入列表中并且渲染和移动被处理，我是否可以在不制作浅拷贝的情况下在 main 中执行此操作。

```
int main()
{ 
    for(int i = 0; i < 10; i++)
    {
        Dot * temp = new Dot();
    }

    while(!quit)
    {    
        //Handle the dot rendering and movement
    }
} 
```

我问这个是因为我确实做了一些非常相似的事情，每当我试图删除列表中的点时，如果它们相互碰撞，在一个点被删除并且我试图删除另一个点之后，我得到了一个分段错误。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:43:25.753

@Ernest 是对的，分段错误不是由于复制构造函数，而是由于您尝试访问/删除您无法访问的内存位置。这意味着您正在使用的指针指向错误的内存地址，这可能是因为您已经删除了它。

复制构造函数无法查看对象是否是“新的”。无论如何，如果您不实现一个哑复制构造函数，通常会生成一个（[自动生成默认/复制/移动 ctor 和复制/移动赋值运算符的条件？](https://stackoverflow.com/questions/4943958/conditions-for-automatic-generation-of-default-ctor-copy-ctor-and-default-assi)）。

“哑”的意思是，该类将无法自动复制使用新创建的所有类实例，例如，或更一般地，指向的元素。

析构函数在作用域的末尾被调用，或者当你对“new”对象（动态分配的内存）调用“delete”操作符时。同样，大多数 c++ 编译器都会自动实现哑析构函数。

“哑”的意思是，该类不会自动删除使用“新”创建的所有变量。

检查完整性：[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:30:10.640

听起来您之前的问题是双重删除。如果`Dot`有一个析构函数，并且在该析构函数中删除了一个或多个指向成员对象的指针，那么您肯定需要一个复制构造函数。默认的复制构造函数会留下两个`Dot`指向相同对象的指针，然后当两个`Dot`s 都被删除时，子指针将被删除两次。这当然是非法的，并且经常导致段错误。您需要提供一个复制构造函数，为每个对象提供`Dot`自己的子对象，因此不会发生双重删除。

# c++ - 命名空间查询

> ID：15466409
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:26:02.357
> 
> 标签：c++

下面的代码给出了编译错误

```
namespace X{
  int i;
}

void f(){

  int i;
  using X::i;  //compile error 'i’ is already declared in this scope

} 
```

但是如果我用 using namespace X 替换这一行，它编译得很好。有人可以帮助理解差异。

同样在下面的修改代码中，我期望 X::I 的输出在所有地方都是 100，但事实并非如此。

可能是我误解了命名空间的概念吗？

```
namespace X{
  int i;
}

void f(){
  int i=1;
  cout << "local I " << i << endl;  // prints 1 OK
  using namespace X;
  i=100;
  cout << "X::i " << i << endl;   // prints 100 OK. 
  cout << "X::i " << X::i << endl; // prints 10 why ?
}

main(){
  using namespace X;
  i=10;
  f();
  cout << "X::i " << i << endl; //prints 10 why ?
} 
```

感谢您帮助我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:30:15.813

在`main()`：

```
using namespace X;
i = 10; 
```

这设置`X::i`为 10。

> 打印 10 为什么？

这就是`^^`为什么。

此外，在: 您还有另一个名为**shadows**`f()`的局部变量`i`，这就是为什么分别解析为 1 和 100 的原因，并且您只能通过显式指定其命名空间来访问命名空间中的另一个变量。 **`X::i``i``X`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:37:03.230

当您说“使用命名空间 X”时...

如果变量“i”在 X 中定义，那么对于对变量“i”的所有引用，编译器将其替换为“X::i”。所以在 main() 中，当你说 i=10 时，它会将 X::i 设置为 10。

在 f()...

您创建了一个名为 i 的新变量。这与 X::i 不同。您将 i 设置为 1。然后，您开始使用命名空间 X。但是，存在命名冲突——当您说“i”时，它应该使用本地“i”还是 X::i？C++ 编译器通过使用 LOCAL i 标识变量“i”来处理这种情况。因为函数中已经定义了一个 i，所以它不能在命名空间中引入另一个 i——i。因此，为了引用 X::i，您必须明确地说“X::i”。否则它会认为你在谈论 LOCAL i。

在第一个示例中，当您说使用 X::i 时，您并没有给编译器太多选择。你在说<我想打电话给 X::i 'i' >。但是，它不能这样做——因为已经定义了一个“i”。强制编译器这样做会导致两个不同的变量具有相同的名称——这是不可能发生的。

希望这能澄清一些事情。评论其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:30:38.037

该`using X::i`声明将特定名称引入范围。显然，该名称`i`已被使用，因此您将无法再次使用它。
实际上，命名空间用于避免可能的名称冲突。使用如此短的名称，命名空间实际上是多余的。**

# sql - 运行 FTS 查询时受影响的行数

> ID：15466417
> 
> 赞同：0
> 
> 时间：2013-03-17T21:26:36.517
> 
> 标签：sql, sql-server, full-text-search

最近我们遇到一个奇怪的现象，我们有一个FTS结构的普通查询：

```
select top 50 from TABLE where contains (COLUMN, 'string*') 
```

尽管查询是用`top 50`短语编写的，但我们仍然在 rowcount 列中看到，在分析器中受影响的行数很高。

当我们在 yhe mgmt studio 中运行查询时，只返回相关行。

这是完整测试搜索的正常行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:55:58.117

也许您在同一过程中还有其他操作？

RowCounts 也将包括来自其他操作的受影响计数。例如，以下将在`SQL:BatchCompleted`事件中返回 13。如果您也捕获`SQL:StmtCompleted`事件，您将在此 13 和之前的 RowCounts 中的离散计数：

```
declare @t table (i int)
insert into @t
       select 1 union all
       select 2 union all
       select 3;

select top 5 *
from dbo.YourTable;

select top 5 *
from dbo.YourOtherTable; 
```

# java - 泽西岛似乎在客户端请求中将端口添加到 url

> ID：15466418
> 
> 赞同：0
> 
> 时间：2013-03-17T21:26:49.940
> 
> 标签：java, ssl, client, jersey

我正在使用一些基本的 Java 代码通过 Jersey 发送一个 RESTful 请求，出于某种原因，Jersey 将 :443 端口附加到我所有 URL 的末尾，这导致 CAS 失败（代理票证是在其他地方为特定 URL 生成的；添加端口打破了这一点）。

有没有办法告诉 Jersey 不要将 443 端口作为 URL 的一部分发送？

编辑：仅供参考，在意识到问题确实在泽西岛内部之前，我删除了我以前的票。

Edit2：在下面添加了代码；我不得不去掉一些项目，但这基本上是我正在使用的。它是使用我们正在使用的特定 API 的通用方法；我添加了 doNotSend 模式的东西来测试 url；url 从没有 :443 的情况下返回，但是当它通过 Jersey 执行时，它添加了 :443 ，这会关闭 CAS 身份验证。

```
// Create a trust manager that does not validate certificate chains
TrustManager[] trustAllCerts = new TrustManager[]{new X509TrustManager(){
    public X509Certificate[] getAcceptedIssuers(){return null;}
    public void checkClientTrusted(X509Certificate[] certs, String authType){}
    public void checkServerTrusted(X509Certificate[] certs, String authType){}
}};
try {
    SSLContext sc = SSLContext.getInstance("TLS");
    sc.init(null, trustAllCerts, new SecureRandom());
    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
} catch (Exception e) {
    ;
}

Client client = Client.create();

String url = Configuration.getOption(CONFIG_REST_URL) + actionPath;
if (dontSendMode) {
    GGResponse r = new GGResponse();
    r.setUrl(url);
    return r;
}
if (StringUtils.isNotEmpty(proxy_ticket)) {
    if (url.contains("?")) {
        url += "&";
    } else {
        url += "?";
    }
    url += String.format("ticket=%s", proxy_ticket);
}
WebResource.Builder resourceBuilder = client
        .resource(url)
        .accept("application/json");

ClientResponse response = null;
if (method.equalsIgnoreCase("GET")) {
    response = resourceBuilder.get(ClientResponse.class);
}
if (method.equalsIgnoreCase("POST")) {
    response = resourceBuilder.post(ClientResponse.class, json);
}
if (method.equalsIgnoreCase("DELETE")) {
    response = resourceBuilder.delete(ClientResponse.class);
}
if (method.equalsIgnoreCase("PUT")) {
    response = resourceBuilder.put(ClientResponse.class, json);
}

String output = null;
String etagResponse = null;
String error = null;

if (response != null && response.getStatus() == 200) {
    output = response.getEntity(String.class);
} else {
    System.out.println(error);
} 
```

# php - 在 PHP foreach 循环中使用 HTML 表格创建“网格”

> ID：15466419
> 
> 赞同：1
> 
> 时间：2013-03-17T21:26:57.667
> 
> 标签：php, html, html-table

我一直在与 Twitter 合作，目的是获取用户的关注者并以网格格式显示它们。下图说明了我希望如何安排输出：

![设想的最终布局](../Images/41a1d64db5bbcafdd1825c44e547e94b.png)

我目前尝试使用 HTML 表格的代码，但是它只是打印出名称，然后是下面的图片等等。我有一种感觉，我可能不得不使用嵌套表或其他东西，但我无法弄清楚。这是我的代码：

```
<table>
<?php foreach ($users as $user) {
    $userScreenName = $user -> screen_name;
    $userName = $user -> name;
    $userImage = $user -> profile_image_url;
    $userDescription = $user -> description;
    ?>

    <tr>
        <td> 
        <?php echo $userName; ?>
        </td>
    </tr>

    <tr>
        <td>
        <?php echo "<img src = ".$userImage.">"; ?>
        </td> 
    </tr>
    <?php
}
?>
</table> 
```

如何使我的输出看起来像我的图片（图片上方的小块名称并排排列在网格中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:01:09.030

我宁愿使用表格的 div，因为您不必在网格中创建尽可能多的列，只需更改一个元素的宽度并且它们彼此相邻显示，这取决于父元素的宽度。

这是示例：[网格示例](http://jsfiddle.net/koziktom/DmKeZ/1/)

所以你的代码看起来像这样

```
<?php foreach ($users as $user) {
  $userScreenName = $user -> screen_name;
  $userName = $user -> name;
  $userImage = $user -> profile_image_url;
  $userDescription = $user -> description;
?>
<div class="name">
  <?php echo $userName; ?>
  <div class="picture">
    <img src="./PATH/<?php echo $userImage; ?>" />
  </div>
</div>
<?}?>

<style>
.name {
  position:relative;
  float:left;
  width: 49%;
  height: 100px;
  border: 1px solid;
  text-align:center;
  vertical-align:middle;
}
.picture {
  width: 80%;
  height: 60%;
  display: table;
  margin: 0 auto;
  border: 1px solid;
}
</style> 
```

希望能帮助到你。对不起我的英语:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:35:41.863

```
<table>
<?php foreach ($users as $user) {
    $userScreenName = $user -> screen_name;
    $userName = $user -> name;
    $userImage = $user -> profile_image_url;
    $userDescription = $user -> description;
    ?>

    <tr>
        <td> 
        <?php echo $userName; ?>
        </td>
        <td>
        <?php echo "<img src = ".$userImage.">"; ?>
        </td> 
    </tr>
    <?php
}
?>
</table> 
```

请记住，如果您要添加奇数个朋友，则需要添加最后一个表格单元格并为空白

所以给你一个伪代码示例，你最终会得到类似的东西

```
<table>
  <tr>
    <td>
       <!-- your data here -->
    </td>
    If NumberOfFriends Mod 2 > 0 Then
    <td>
       <!-- your data here -->
    </td>
    Else
    <td>
       <!-- Blank table cell here -->
    </td>
    End of If statement
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:35:59.773

```
<div id="container">
     <?php foreach ($users as $user) {
          $userScreenName = $user -> screen_name;
          $userName = $user -> name;
          $userImage = $user -> profile_image_url;
          $userDescription = $user -> description;
     ?>
          <div class="user">
              <div class="user_name">
                  <?php echo $userName; ?>
              </div>
              <div class="user_image">
                  <?php echo "<img src = ".$userImage.">"; ?>
              </div>
          </div>
     <?php
          }
     ?>
</div> 
```

你的CSS将如下所示：

```
#container
{
    width: 400px;
}

.user
{
     float: left;
     width:50%;
}

.user_name, .user_image
{
    width: 100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T21:36:26.497

您需要使用稍微不同的标记显示每个备用用户。具有偶数索引的用户将显示为`td`行中的第一个元素，而具有奇数索引的用户将显示为`td`行中的第二个元素。

```
<table>
<?php foreach ($users as $i => $user) {
    $userScreenName = $user -> screen_name;
    $userName = $user -> name;
    $userImage = $user -> profile_image_url;
    $userDescription = $user -> description;
    if ($i % 2 == 0) :
?>

    <tr>
        <td> 
        <?php 
              echo $userName; 
              echo "<img src = ".$userImage.">";
        ?>
        </td>

<?php else : ?>

        <td>
        <?php 
              echo $userName; 
              echo "<img src = ".$userImage.">";
        ?>
        </td> 
    </tr>

<?php
    endif;
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T21:37:39.583

为什么不在表格的单元格中包含一个 div，名称的跨度和一个用 css 或 br 开始的新行？您可以使用 CSS 将单元格的内容居中

尝试输出如下内容：

```
 <table>
        <tr>
            <td>
                <div>
                    <span class="user-name">NAME</span>
                    <img class="user-face" src=""/>
                </div>
            </td>
            <td>
                <div>
                    <span class="user-name">NAME</span>
                    <img class="user-face" src=""/>
                </div>
            </td>
        </tr>
    </table> 
```

和风格：

```
 .user-name {
            width: 10em;
            display: table-cell;
            text-align: center;
        }
        .user-face {
            width: 10em; 
            height: 10em;
        } 
```

当然假设他们有偶数个朋友...... :) 如果没有，你必须在末尾添加一个空的 td ！

编辑：这次完全基于 div 并包括 PHP。也会处理奇数个朋友:)

```
<div id="user-data">
   <?php 
      $cellPosition    = "left";
      foreach ($users as $user) {

        $userScreenName  = $user->screen_name;
        $userName        = $user->name;
        $userImage       = $user->profile_image_url;
        $userDescription = $user->description;

        if ($cellPosition == "left") {
          echo "<div class=\"user-table-row\">\n";
        }  

        echo "<div class=\"cell $cellPosition\">\n"; 
        echo "  <span class=\"user-name\">$userName</span>\n"; 
        echo "  <img class=\"user-face\" src=\"$userImage\"/>\n"; 
        echo "</div>";

        if ($cellPosition == "right") {
          echo "</div>";
          $cellPosition = "left";
        }
        else {
          $cellPosition = "right";
        }
      }
    ?>
</div> 
```

样式：

```
 <style>
    #user-data {
      margin:2em;
    }
    div.user-table-row {
      margin: 2em;
      width: 24em;
      clear: right;
    }

    div.cell {
      width:10em;
      display: table-cell;
      text-align: center;
      margin-bottom: 2em;
    }
    div.left {
      float: left;
    }
    div.right {
      float: right;
    }

    span.user-name {
      width: 10em;
    }
    img.user-face {
      width: 10em; 
      height: 10em;
    }
  </style> 
```

# c# - 不使用 ObjectDataSource 时更新 Formview 中的记录

> ID：15466422
> 
> 赞同：0
> 
> 时间：2013-03-17T21:27:39.073
> 
> 标签：c#, asp.net

如果我有一个没有`ObjectDataSource`在 aspx 标记中使用 a 而是`DataTable`像这样的表单视图：

```
Member_Information memInfo = new Member_Information();
Guid _memberId = Guid.Empty;
_memberId = new Guid(lboxNewUsers.SelectedValue);
System.Data.DataTable dt = memInfo.MemberInfoById(_memberId);

fvReviewMemberDetail.DataSource = dt;
fvReviewMemberDetail.DataBind(); 
```

从表单视图中的控件获取数据的最佳方法是什么？我想也许`fvReviewMemberDetail.FindControl("mytextbox")`但是你如何区分控件`<ItemTemplate>`和`<EditItemTemplate>`模板。显然 fornview 将处于编辑模式，但控件在两个模板中具有相同的 id。

我必须注意我已经搜索了谷歌，但是一个字符串比如`not using ObjectDataSource`不理解 NOT 部分。

# javascript - 使用 AngularJS $resource 获取数据

> ID：15466427
> 
> 赞同：12
> 
> 时间：2013-03-17T21:27:57.473
> 
> 标签：javascript, angularjs

我正在尝试使用 $resource 从静态 json 文件中获取数据，这是代码片段：

```
 angular.module('app.services', ['ngResource']).
  factory('profilelist',function($resource){
    return $resource('services/profiles/profilelist.json',{},{
        query:{method:'GET'}
    });
}); 
```

在控制器中，

```
function ProfileCtrl($scope,profilelist) {
$scope.items = [];
$scope.profileslist = profilelist.query();
for (var i=0;i<=$scope.profileslist.length;i++){
    if($scope.profileslist[i] && $scope.profileslist[i].profileid){
        var temp_profile = $scope.profileslist[i].profileid;
    }
    $scope.items.push(temp_profile);

} 
```

但是现在，我面临一个错误： `TypeError: Object #<Resource> has no method 'push'`

你能帮我解决我哪里出错了吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T22:15:14.027

您不需要为默认`$resource`方法指定操作参数（这些是“get”、“save”、“query”、“remove”、“delete”）。在这种情况下，您可以`.query()`按原样使用方法（这只需要更改服务定义）：

```
angular.module('app.services', ['ngResource']).
  factory('profilelist',function($resource){
    return $resource('services/profiles/profilelist.json');
  }); 
```

PS还有一个提示是，如果您需要将其设置为设置`isArray: true`为操作配置的数组，则您的示例将json解包为哈希而不是数组（这就是您没有收到推送方法错误的原因）：

```
'query':  {method:'GET', isArray:true} 
```

正如@finishingmove 发现你真的不能分配[$resource](http://docs.angularjs.org/api/ngResource.$resource)结果立即获得，提供回调：

```
$scope.profileslist = profilelist.query(function (response) {
    angular.forEach(response, function (item) {
        if (item.profileid) {
            $scope.items.push(item.profileid);
        }
    });
}); 
```

# javascript - 每个都不能在 Backbone 视图渲染中工作

> ID：15466430
> 
> 赞同：1
> 
> 时间：2013-03-17T21:28:24.417
> 
> 标签：javascript, json, backbone.js

我刚开始使用 Backbone，我在从一些 JSON 数据生成简单的 html 列表时遇到了问题。

**我收到错误**

> 未捕获的类型错误：对象函数 (){return c.apply(this,arguments)} 没有方法“每个”

**这是我的代码**

```
var Show = Backbone.Model.extend();

var ShowCollection = Backbone.Collection.extend({

    model: Show,
    url: 'http://192.168.0.7:8081/api/0b08ecef4eda8c6a28b6be3164a96ac8/?cmd=history&type=downloaded&limit=50',

    parse: function(response){
       return response.data;
    }

});

var ItemView = Backbone.View.extend({

  tagName: "li",
  template: $("#item").html(),

  render: function() {
    var templ = _.template(this.template);
    this.$el.html(templ(this.model.toJSON()));
    return this;
  }

});

var ShowView = Backbone.View.extend({

  el: $("#history"),
  initialize: function() {
    this.collection = ShowCollection;
    this.render();
  },
  render: function() {
    this.collection.each(function(item) {
      this.renderItem(item);
    }, this);
  },
  renderItem: function(item) {
    var itemView = new ItemView({ model: item });
    this.$el.append(itemView.render().el); 
  }

});

var history = new ShowView(); 
```

**这是我的数据**

```
{
data: [
{
date: "2013-03-16 05:14",
episode: 10,
provider: "-1",
quality: "HD TV",
resource: "bering.sea.gold.s02e10.720p.hdtv.x264-bajskorv.mkv",
resource_path: "/Users/Machine/Tv/Bering.Sea.Gold.S02E10.720p.HDTV.x264-BAJSKORV repost",
season: 2,
show_name: "Bering Sea Gold",
status: "Downloaded",
tvdbid: 254203
}
],
message: "",
result: "success"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:42:09.657

this.collection = ShowCollection;

应该

this.collection = new ShowCollection();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:47:27.050

您将您的分配`this.collection`给扩展的 Backbone Collection 类，而不是分配给它的实例。[有关示例](http://backbonejs.org/#Collection)，请参阅有关扩展的文档。你应该有类似的东西`this.collection = new ShowCollection()`。

# php - 小 PHP 代码 - 导致服务器负载？帮助优化

> ID：15466434
> 
> 赞同：0
> 
> 时间：2013-03-17T21:28:49.707
> 
> 标签：php, optimization, random

我有一小段代码（列在此消息的末尾），在页面加载时运行。我们每天有大约 50,000 名 UNIQUE 访问者（不计算重复访问）。这可能是巧合，但自实施以来，一直存在随机服务器负载问题。

**所以我要问的是...**

**1）**有人可以确认/否认以下代码实际上是否会导致问题吗？

**2）**这可以优化吗？

**仅供参考：**

**——**我把这个函数放在了 WordPress 布局的 HEADER 文件中。

**--**在页脚被调用 10 次以上

**--**它是一个使用 NGINX 的 VPS 服务器

**--**我还没有检查日志

代码的目的...我们为函数指定一个百分比，告诉代码在该百分比的时间内显示字符串（因此，如果我们输入 60，则表示该字符串应显示 60% 的时间）。页脚中的每个条目都会生成自己的随机数。

**编码：**

```
function writeRndString($theString, $percent) {
$randno = rand(1,100);

if($randno <= (int)$percent) {
    echo "Random String: " . $theString;
    echo "\n\n";
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:39:19.647

梅比……

您忘记了 $ on: echo "Random String: " 。字符串；还有一点，不要使用实际上不需要的变量。也可以使用 return

```
function writeRndString($theString, $percent) {
    if (rand(1, 100) <= (int) $percent) {
        return "Random String: " . $theString . "\n\n";
    }
} 
```

PHP：

```
<?php
echo "blablabla" . writeRndString($x, $y);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:49:51.013

这是一个非常简单的函数，应该很快，即使你调用它几次。即使每天有 50000 条，也就是每秒大约 2 页。

如果可以，只需将其移除几分钟并检查服务器负载。它可能被调用的次数比你想象的要多得多:)

# php - 嵌入在 PHP 的 echo 中的 Javascript

> ID：15466436
> 
> 赞同：1
> 
> 时间：2013-03-17T21:29:00.993
> 
> 标签：php, javascript

我正在尝试将 javascript 嵌入 php 的回声中。我想要一个按钮说“继续？？”。如果用户按下“确定”，那么`upload.php`应该执行。如果用户按下“取消”，那么他应该得到一个弹出窗口。您能否让我知道以下代码中的错误在哪里。我看到一个按钮显示“继续”，但该`onclick`事件不起作用。

```
echo "<form name=myform>";
echo "<input type=button value=\"Continue? \"";
echo "onClick=\"if(confirm('Sure to continue'))";
 echo "<form enctype=\"multipart/form-data\" action=\"upload.php\" method=\"POST\"> </form>";
echo "else alert('As you wish')\">";
echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:32:35.270

```
<form name=myform><input type=button value="Continue? "onClick=\"if(confirm('Sure to continue'))<form enctype="multipart/form-data" action="upload.php" method="POST"> </form>else alert('As you wish')"></form> 
```

这就是您的 HTML 的样子。它甚至不是远程有效的。试试这个：

```
<form action="upload.php" method="post" enctype="multipart/form-data">
    <input type="submit" value="Continue?" onClick="if( confirm('Sure to continue?')) return true; alert('As you wish'); return false;" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:31:21.490

第一步是查看生成的 HTML 代码。

*   如果它不是您所期望的，那么它可以为您提供错误的线索。
*   如果这是您所期望的，则错误不在 php 代码中。

# xml - 通过 xsl:value-of select 将 HTML 插入 CDATA 部分

> ID：15466440
> 
> 赞同：0
> 
> 时间：2013-03-17T21:29:22.563
> 
> 标签：xml, xslt, xslt-1.0, cdata

我有一个包含 HTML 标记的源 XML。它是从一个笨拙的 CSV 文件创建的。

目标是将源 XML 转换为第二个 XML 使用以下内容，

```
<Description type="long" format="html">
  <![CDATA[             
    <xsl:value-of select="HTML_Descr"/>
 ]]>
</Description> 
```

不幸的是，XSL 转换如下

```
<Description type="long" format="html">
  <![CDATA[             
    &lt;xsl:value-of select="HTML_Descr"/&gt;
 ]]>
</Description> 
```

输出在反射时有意义，但目标只是将 HTML 包装在 CDATA 中。

注意： - 不能将 CDATA 放入源 XML。- 更准确地说，一个源 XML 文件是 100 个 XML 文件 - 处理器是 xsltproc，使用 XSL 1.0

对不起。找到的大量帮助只是保留了 HTML 格式。提前致谢。

附录

整个过程是 CSV -> XML（使用 CSV 标头的临时翻译）-> XML（好）-> (X)HTML。

并且 HTML 不能从临时 XML 中翻译出来，因为好的 XML 保存在存储库中，并且会持续更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T07:26:10.097

实际上这是最接近的问题，[Convert 'embedded' XML doc into CDATA output in XSLT (1.0)](https://stackoverflow.com/questions/12388800/convert-embedded-xml-doc-into-cdata-output-in-xslt-1-0)

并回答：

以下功能根据需要，虽然它可能不是唯一和最好的解决方案。

```
<xsl:template match="document">
  <document>
    <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
    <xsl:copy-of select="./html"/>
    <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
  </document>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:34:34.803

你可能想要这个：

```
<xsl:value-of select="HTML_Descr" disable-output-escaping="yes"/> 
```

但是请注意，如果 CDATA 中的 HTML 片段不是正确的 XML（例如 XHTML），这可能会使您的 XML 文件无效。**谨慎使用**- 这是一种强烈的代码气味！

更好的方法是将 HTML 作为真正的 XHTML 在 XML 文件的自己的命名空间中，而不是使用 CDATA 文字文本块，这样您就可以让 XSLT 处理器复制节点而不是使用`disable-output-escaping`“hack”。

# visual-studio - 在 CMakeLists.txt 中更改一个项目的编译器标志

> ID：15466441
> 
> 赞同：2
> 
> 时间：2013-03-17T21:29:22.843
> 
> 标签：visual-studio, cmake

我有一个 CMakeLists.txt 指定多个可执行文件。只有其中一个项目，我想使用静态运行时。

我在这里找到了这个解决方案：[在 CMake 中设置 MSVC 运行时](https://stackoverflow.com/questions/10113017/setting-the-msvc-runtime-in-cmake)

这涉及更改 CMAKE_CXX_FLAGS 和 CMAKE_C_FLAGS（以及其他）。

但是，这样做会更改每个项目的运行时库。通过我的测试，无论你在哪里设置这些，它都会改变一切。

有没有办法只为一个项目做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T23:04:08.370

如果您为“静态运行时”可执行文件提供自己的 CMakeLists.txt 文件并通过[`add_subdirectory`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aadd_subdirectory).

在子目录 CMakeLists.txt 中设置的变量不会影响父范围内的类似变量，因此您可以在 parent 中有`/MD`or`/MDd`标志，并在子目录`CMAKE_<LANG>_FLAGS_<BUILD>`中用`/MT`or替换它们。`/MTd`

请注意，即使调用了该命令`add_subdirectory`，它也不需要引用文件系统意义上的实际子目录 - 只是具有自己的 CMakeLists.txt 的某个其他目录。

# c - 从 Matlab 运行 C 可执行文件

> ID：15466442
> 
> 赞同：2
> 
> 时间：2013-03-17T21:29:23.157
> 
> 标签：c, linux, matlab, executable

我尝试在 Linux 上运行来自 matlab 的 Sift 特征描述符可执行文件的 C 实现。我运行的脚本和某个文件夹中的可执行文件和可执行文件由以下运行

```
./sift <tmp.pgm >tmp.key 
```

我确实可以在 Matlab 上运行它，但它们都没有工作

```
eval('!./sift <tmp.pgm >tmp.key');
system('./sift <tmp.pgm >tmp.key');
unix('./sift <tmp.pgm >tmp.key'); 
```

我还从终端检查了可执行文件，它没有任何缺陷。有没有其他方法可以做到这一点，或者我有什么小错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:54:54.977

您的语法看起来正确。

该`-1`状态意味着它可能根本无法找到或启动`sift`。我知道这是基本的（我认为其他人提到过），但是您的 Matlab 程序是否从`sift`它调用它时所在的同一目录运行？该`system()`函数评估相对于 Matlab 会话当前目录的路径，而不是调用脚本的位置。如果您的脚本`cd`因其他原因调用，则会对其产生影响。检查您的当前目录`pwd`并执行`ls`and`exist('./sift', 'file')`以确保它在那里。

`sift`如果是这种情况，您可以通过使用绝对路径调用来使其更加健壮，可能在运行时使用`fileparts(mfilename('fullpath'))`脚本计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:33:58.343

我发现问题是路径`/matlab/bin/glnxa64/matlab_helper`有权限问题。在我检查问题后，一切都开始正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T18:52:02.770

我有同样的许可问题。只是添加解决方案供其他人查看，因为我很难找到解决方案。打开终端并输入 cd \path_of_your_file sudo chmod -R 777 它将询问您的密码并允许运行 exe。拥抱..

# css - CSS 显示文本框

> ID：15466443
> 
> 赞同：0
> 
> 时间：2013-03-17T21:29:26.747
> 
> 标签：css, asp.net-mvc, twitter-bootstrap

感谢 James Donnelly，这个问题已经解决了。我的示例已更新为有效的解决方案。

我的声誉不够高，所以我无法发布图片，所以我将尝试尽可能地描述它。我在表单上有 7 个文本框和一个文本区域，当我加载页面时，它当前将每个文本框加载到单独的行上。

但是，我希望文本框像这样加载：
1 2 3
4 5 6 7
---8---（跨越）

我应该把每一行放在一个div中吗？我尝试将每个文本框浮动到左侧，但这不能正常工作。如果这让事情变得更容易，我会在我的项目中设置 Twitter 引导程序。

这是我的工作代码：

```
<div class="well">
<h4>Enter Movie in System:</h4>

@using (Html.BeginForm()) {
    <div>
        <div class="input-prepend">
            <span class="add-on"><i class="icon-film"></i></span>
            @Html.TextBoxFor(m => m.Title, new { placeholder = "Title" })
            @Html.ValidationMessageFor(m => m.Title)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-facetime-video"></i></span>
            @Html.TextBoxFor(m => m.Director, new { placeholder = "Director" })
            @Html.ValidationMessageFor(m => m.Director)
        </div>

        @* Make dropdown *@
        <div class="input-prepend">
            <span class="add-on"><i class="icon-tags"></i></span>
            @Html.TextBoxFor(m => m.parentGenre, new { placeholder = "Genre" })
            @Html.ValidationMessageFor(m => m.parentGenre)
        </div>  

        <div class="input-prepend">
            <span class="add-on"><i class="icon-star-empty"></i></span>
            @Html.TextBoxFor(m => m.Stars, new { placeholder = "Actor" })
            @Html.ValidationMessageFor(m => m.Stars)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-time"></i></span>
            @Html.TextBoxFor(m => m.Duration, new { placeholder = "Duration (mins)" })
            @Html.ValidationMessageFor(m => m.Duration)
        </div>

    @* Make dropdown *@

        <div class="input-prepend">
            <span class="add-on"><i class="icon-warning-sign"></i></span>
            @Html.TextBoxFor(m => m.Rating, new { placeholder = "Rating" })
            @Html.ValidationMessageFor(m => m.Rating)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-calendar"></i></span>
            @Html.TextBoxFor(m => m.releaseDate, new { placeholder = "Release Date" })
            @Html.ValidationMessageFor(m => m.releaseDate)
        </div>

    <div class="control-group">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-comment"></i></span>
            @Html.TextAreaFor(m => m.Description, new { placeholder = "Description", @class="input-xxlarge" })
            @Html.ValidationMessageFor(m => m.Description)
        </div>
    </div>

        <p>
            <button class="btn" type="submit" value="Register">Register</button>
        </p>
        @Html.ValidationSummary()
    </div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:42:20.410

`.content-group`默认情况下设置为`display:table;`which 是什么迫使你的每个输入下降到一个新的行。您只需将每个`.input-prepend`容器放入一个容器中：

```
 <div>
        <div class="input-prepend">
            <span class="add-on"><i class="icon-tags"></i></span>
            @Html.TextBoxFor(m => m.parentGenre, new { placeholder = "Genre" })
            @Html.ValidationMessageFor(m => m.parentGenre)
        </div>  

        <div class="input-prepend">
            <span class="add-on"><i class="icon-tags"></i></span>
            @Html.TextBoxFor(m => m.parentGenre, new { placeholder = "Genre" })
            @Html.ValidationMessageFor(m => m.parentGenre)
        </div> 

        <div class="input-prepend">
            <span class="add-on"><i class="icon-tags"></i></span>
            @Html.TextBoxFor(m => m.parentGenre, new { placeholder = "Genre" })
            @Html.ValidationMessageFor(m => m.parentGenre)
        </div> 
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:41:16.837

这是你的意思吗？

```
<div>
   <input id="tbx1" />
   <input id="tbx2" />
   <input id="tbx3" /><br />   
   <input id="tbx4" />
   <input id="tbx5" />
   <input id="tbx6" />
   <input id="tbx7" />
   <span id="span1" style="padding-left:200px">
      <input id="tbx8" />
   </span>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:43:31.110

您必须发布您尝试过的 CSS 样式。但我猜想给表单一个浮动的左边，宽度和高度应该让你能够浮动输入字段，确保前六个输入中没有一个大于表单宽度的 30%。最后一个宽度 100%

# javascript - href 中的 JavaScript 变量

> ID：15466447
> 
> 赞同：0
> 
> 时间：2013-03-17T21:29:52.120
> 
> 标签：javascript, html

很抱歉这个基本问题，但我似乎无法让它工作，我有一些 javascript 代码，我想包含一个变量来代替超链接：

```
var list = "<dl><dt>Bini</dt>"
    + "<dd>" + feature.properties.name + "</dd>"
    + "<dd>" + feature.properties.description + "</dd>"
    + "<dt><a href=" + myHyperlink + "</a></dt>" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:36:56.757

1.  你没有关闭打开的锚。
2.  href 值需要在其周围加上引号。
3.  锚点周围没有文字。
4.  不要忘记分号。

    `var list = "<dl><dt>Bini</dt>" + "<dd>" + feature.properties.name + "</dd>" + "<dd>" + feature.properties.description + "`</dd>" + "<dt><a href='" + myHyperlink + "'>Click me!</a></dt>";`

# javascript - 重复的表单域

> ID：15466448
> 
> 赞同：1
> 
> 时间：2013-03-17T21:29:53.590
> 
> 标签：javascript, forms, duplicates, field

我有一些代码用于允许用户添加产品。他们可以控制添加的产品数量，以及删除他们创建的产品。我的问题是，使用我正在使用的代码，我只能更改第二个 div 的 id 以及第一个输入的名称/id。如何更改所有输入的名称，而不仅仅是第一个输入？

的JavaScript：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#add').click(function() {
            var num     = $('.clonedInput').length;
            var newNum  = new Number(num + 1);

            var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

            newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);

            $('#input' + num).after(newElem);
            $('#remove').attr('disabled','');
        });

        $('#remove').click(function() {
            var num = $('.clonedInput').length;

            $('#input' + num).remove();
            $('#add').attr('disabled','');

            if (num-1 == 1)
                $('#remove').attr('disabled','disabled');
        });

        $('#remove').attr('disabled','disabled');
    });
</script> 
```

表格：

```
<form id="myForm">
    <div id="input1" class="clonedInput">
        <p>Product Name: <input type="text" name="name1" id="name1" /></p>
        <p>Product Description:</p>
        <textarea rows="10" cols="50" name="desc1" id="desc1"></textarea>
        <p>Brand Name: <input type="text" name="brand1" id="brand1" /></p>
        <p>Product Code Number: <input type="text" name="code1" id="code1" /></p>
        <p>West Texas Co-op Bid Product Number (if different from the Product Code Number): <input type="text" name="coop1" id="coop1" /></p>
        <p>Commodity processing availability:</p>
        <p><input type="checkbox" name="yes" id="yes1" value="Yes"> Yes <input type="checkbox" name="no" id="no1" value="No"> No</p>
        <p>If yes, what is the commodity processing code number?: <input type="text" name="comm1" id="comm1" /></p>
    </div>

    <div>
        <input type="button" id="add" value="Add Product" />
        <input type="button" id="remove" value="Remove Product" />
    </div>
</form> 
```

现场示例：[http ://test.joshrodg.com/wp-content/themes/rodgersconsulting/test.php](http://test.joshrodg.com/wp-content/themes/rodgersconsulting/test.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:47:35.670

我想通了......我能够调整我在这里找到的内容：http: [//jsfiddle.net/e6cwd/9/](http://jsfiddle.net/e6cwd/9/)

jQuery：
`<script src="http://code.jquery.com/jquery-1.4.2.js" type="text/javascript"></script>`

JavaScript：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#btnAdd").click(function() {
            var num     = $(".clonedSection").length;
            var newNum  = new Number(num + 1);

            var newSection = $("#clonedSection" + num).clone().attr("id", "clonedSection" + newNum);

            newSection.children(":first").children(":first").attr("id", "name" + newNum).attr("name", "name" + newNum);
            newSection.children(":nth-child(3)").children(":first").attr("id", "desc" + newNum).attr("name", "desc" + newNum);
            newSection.children(":nth-child(4)").children(":first").attr("id", "brand" + newNum).attr("name", "brand" + newNum);
            newSection.children(":nth-child(5)").children(":first").attr("id", "code" + newNum).attr("name", "code" + newNum);
            newSection.children(":nth-child(6)").children(":first").attr("id", "coop" + newNum).attr("name", "coop" + newNum);
            newSection.children(":nth-child(7)").children(":first").attr("id", "yes" + newNum).attr("name", "yes" + newNum);
            newSection.children(":nth-child(7)").children(":nth-child(2)").attr("id", "no" + newNum).attr("name", "no" + newNum);
            newSection.children(":nth-child(8)").children(":first").attr("id", "comm" + newNum).attr("name", "comm" + newNum);

            $(".clonedSection").last().append(newSection)

            $("#btnDel").attr("disabled","");

            if (newNum == 5)
                $("#btnAdd").attr("disabled","disabled");
        });

        $("#btnDel").click(function() {
            var num = $(".clonedSection").length; // how many "duplicatable" input fields we currently have
            $("#clonedSection" + num).remove();     // remove the last element

            // enable the "add" button
            $("#btnAdd").attr("disabled","");

            // if only one element remains, disable the "remove" button
            if (num-1 == 1)
                $("#btnDel").attr("disabled","disabled");
        });

        $("#btnDel").attr("disabled","disabled");
    });
</script> 
```

的HTML：

```
<form id="myForm">
    <div id="clonedSection1" class="clonedSection">
        <p>Name: <input type="text" name="name" id="name" /></p>
        <p>Product Description:</p>
        <p><textarea rows="10" cols="50" name="desc" id="desc"></textarea></p>
        <p>Brand Name: <input type="text" name="brand" id="brand" /></p>
        <p>Product Code Number: <input type="text" name="code" id="code" /></p>
        <p>West Texas Co-op Bid Product Number (if different from the Product Code Number): <input type="text" name="coop" id="coop" /></p>
        <p>Commodity processing availability: <input type="checkbox" name="yes" id="yes" value="Yes"> Yes <input type="checkbox" name="no" id="no" value="No"> No</p>
        <p>Commodity processing code number (if applicable): <input type="text" name="comm" id="comm" /></p>
    </div>
    <div>
        <input type="button" id="btnAdd" value="add another name" />
        <input type="button" id="btnDel" value="remove name" />
    </div>
</form> 
```

# mysql - 让 ruby activerecord 与 mysql 适配器一起工作

> ID：15466449
> 
> 赞同：1
> 
> 时间：2013-03-17T21:29:57.587
> 
> 标签：mysql, ruby, activerecord

我正在尝试在不使用 rails 的情况下使用 activerecord 和 mysql，但我似乎无法将我的 ruby​​ 代码连接到 mysql。我的猜测是我的 require 语句或我的 gem 的安装方式有问题。下边是：

*   A. 我的脚本
*   B. 我的本地 gem 列表显示 gems 已安装
*   C. 我的路径变量
*   D. 我的 gem 环境和
*   E. 我收到的错误信息

请帮忙，这已经消耗了我一整天！（在我的`ruby-1.9.3-P327@rails3tutorial2ndEd`选项下，我在珠宝盒中显示了 activerecord-mysql-adapter，但在我运行时没有显示在终端中`gem list --local`。这与它有什么关系吗？）
（我也尝试了这个问题的解决方案`sudo ln -s /usr/local/mysql/lib/libmysqlclient.18.dylib /usr/lib/libmysqlclient.18.dylib`，[但](https://stackoverflow.com/questions/8374505/activerecord-activerecord-mysql-adapter) 它没有用为了我。

### A. 脚本：

（尝试使用和不使用shebang - 均未成功）

```
 1 require 'rubygems'                                                                 
  2 require 'active_record'                                                            
  3                                                                                    
  4 ActiveRecord::Base.establish_connection(                                           
  5  :adapter => 'mysql',                                                              
  6  :host    => 'xxxx',                                                          
  7  :username=> 'xxxx',                                                               
  8  :password=> 'xxxx',                                                           
  9  :database=> 'players')                                                            
 10                                                                                    
 11 class Player < ActiveRecord::Base                                                  
 12 end                                                                                
 13                                                                                    
 14  Player.find(:all) 
```

### B. 运行 gem list 时终端中的 Gems：

```
$ gem list mysql

*** LOCAL GEMS ***

mysql (2.9.1)
mysql2 (0.3.11)

$ gem list activerecord

*** LOCAL GEMS ***

activerecord (3.2.12, 3.2.8) 
```

### C、路径

```
$ $PATH
-bash: /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/bin:/Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327@global/bin:/Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/bin:/Users/emmanueleleyae2/.rvm/bin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin: No such file or directory

$ $GEM_PATH
-bash: /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327:/Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327@global: No such file or directory

$ $GEM_HOME
-bash: /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327: is a directory
emmanuel-eleyaes-computer:chapter01 emmanueleleyae2$ 
```

### D.宝石环境

```
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.25
  - RUBY VERSION: 1.9.3 (2012-11-10 patchlevel 327) [x86_64-darwin11.4.0]
  - INSTALLATION DIRECTORY: /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327
  - RUBY EXECUTABLE: /Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-11
  - GEM PATHS:
     - /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327
     - /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

### E. 错误信息：

```
/Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Please install the mysql adapter: `gem install activerecord-mysql-adapter` (Could not find mysql (~> 2.8.1) amongst [actionmailer-3.2.8, actionpack-3.2.8, activemodel-3.2.12, activemodel-3.2.8, activerecord-3.2.12, activerecord-3.2.8, activeresource-3.2.8, activesupport-3.2.12, activesupport-3.2.8, addressable-2.3.2, arel-3.0.2, blankslate-2.1.2.4, bluecloth-2.2.0, builder-3.0.4, bundler-1.2.1, capybara-1.1.2, cgi_multipart_eof_fix-2.5.0, childprocess-0.3.6, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.4.0, daemons-1.1.9, daemons-1.0.10, diff-lcs-1.1.3, erubis-2.7.0, excon-0.16.10, execjs-1.4.0, fastthread-1.0.7, ffi-1.2.0, gem_plugin-0.2.3, gli-2.5.4, heroku-2.33.2, heroku-api-0.3.7, hike-1.2.1, i18n-0.6.1, journey-1.0.4, jquery-rails-2.1.4, jquery-rails-2.1.3, json-1.7.5, launchy-2.1.2, libwebsocket-0.1.7.1, mail-2.4.4, mime-types-1.19, mongrel-1.2.0.pre2, multi_json-1.4.0, multi_json-1.3.7, mysql2-0.3.11, netrc-0.7.7, nokogiri-1.5.5, parslet-1.5.0, pg-0.12.2, polyglot-0.3.3, rack-1.4.1, rack-cache-1.2, rack-protection-1.4.0, rack-ssl-1.3.2, rack-test-0.6.2, rails-3.2.8, railties-3.2.8, rake-10.0.2, rake-0.9.2.2, rdoc-3.12, rest-client-1.6.7, rspec-2.9.0, rspec-core-2.9.0, rspec-expectations-2.9.1, rspec-mocks-2.9.0, rspec-rails-2.9.0, rubygems-bundler-1.1.0, rubyzip-0.9.9, rvm-1.11.3.5, sass-3.2.3, sass-rails-3.2.5, selenium-webdriver-2.27.1, showoff-0.7.0, sinatra-1.3.5, sprockets-2.1.3, sqlite3-1.3.6, sqlite3-1.3.5, thor-0.16.0, tilt-1.3.3, treetop-1.4.12, tzinfo-0.3.35, uglifier-1.3.0, websocket-1.0.4, xpath-0.1.4]) (LoadError)
    from /Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.12/lib/active_record/connection_adapters/mysql_adapter.rb:5:in `<top (required)>'
    from /Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /Users/emmanueleleyae2/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
    from /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:50:in `resolve_hash_connection'
    from /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:29:in `spec'
    from /Users/emmanueleleyae2/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:130:in `establish_connection'
    from test.rb:4:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:32:04.347

你有没有试过改变

```
:adapter => 'mysql' 
```

至

```
:adapter => 'mysql2' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T07:06:26.543

```
change adapter mysql2

development:
  adapter: mysql2
  database: library_development
  username: root
  password: 
  host: localhost
test:
  adapter: mysql2
  database: library_test
  username: root
  password: 
  host: localhost
production:
  adapter: mysql2
  database: library_production
  username: root
  password: 
  host: localhost 
```

# php - 将 error_reporting 与字符串一起使用？

> ID：15466450
> 
> 赞同：2
> 
> 时间：2013-03-17T21:30:06.823
> 
> 标签：php

我正在对我使用的 PHP 软件进行修改，并且我希望允许用户输入自定义错误报告级别，例如`E_ALL & ~E_NOTICE`.

问题是它们指定的值被保存为字符串 - 因此我无法在`error_reporting()`函数中引用它。

无论如何我可以将字符串转换为函数所需的值`error_reporting()`吗？我已经尝试过这个`constant()`函数，但是它说找不到常量。

利亚姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T22:19:52.660

AFAIK，`constant`这里不适合你的主要原因是字符串`'E_ALL & ~E_NOTICE'`不是常量，而是两个常量和一些位运算符。所以你可以在这里做的是使用这个`eval`功能。不过……要小心，要非常小心。

另一种方法是获取字符串中使用的所有常量。您可以为此使用正则表达式：

```
$string = 'E_ALL & ~E_NOTICE';
$intval = 0;
preg_match_all('/[A-Z_]+/',$string, $constants);
//$constants looks like: array(array('E_ALL', 'E_NOTICE'))
foreach ($constants[0] as $key => $const)
{
    //either converts them to their value
    $constants[0][$key] = constant($const);
    //or replace them in the initial string
    //you can do this using preg_replace_callback, too of course
    $string = replace($const, constant($const), $string);
} 
```

如果您选择用它们的值替换常量名称，您至少可以确保将一个稍微安全的字符串传递给`eval`：

```
$string = preg_replace('/[^0-9&!|\^]/','',$string);//remove anything that isn't a number or bitwise operator.
error_reporting(eval($string)); 
```

*但是，如果您根本*不想使用 eval ，您可能最终会`switch`在某个函数中编写 a 。这不是我想为你做的事情，如果你想试一试的话：

```
//Get the constants
preg_match_all('/[A-Z_]/',$string,$constants);
//Get the bitwise operators
preg_match_all('[&|~^\s]', $string, $bitOps);

//eg:
$string= 'E_ALL& ~E_NOTICE ^FOOBAR';
//~~>
$constants = array( array ('E_ALL', 'E_NOTICE', 'FOOBAR'));
$bitops = array( array( ' & ~', ' ^'));//pay close attention to the spaces! 
```

**结论/我的意见：**
为什么要经历这一切？它很慢，很贵，而且不安全。恕我直言，一个更安全、更简单和更容易*的解决方案是存储 int 值，而不是 string*。
您希望您的客户选择`error_reporting`级别（我不明白为什么......），为什么不创建一个`select`并给他们一些预定义的选项。

如果你想让他们完全控制，允许他们使用他们自己的 ini 文件，但坦率地说：你的目标应该是编写你的代码，使其在`E_STRICT | E_ALL`. 如果你这样做了，就没有太多改变的动力`error_reporting`......
如果你允许你的客户运行他们自己的代码，并且它会引发警告或错误，请向他们指出*他们不应该压制，而是修复它们！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:07:00.260

我不知道拆分部分，但我认为您可以执行以下操作：

```
$level = NULL;

// Modifications
$level = E_ALL;
$level &= ~E_NOTICE;

error_reporting($level); 
```

通过放置条件，您可以将首选常量添加到变量中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T21:42:52.437

你可以简单地通过数组来做到这一点：

```
        $string = "E_ALL";
        $errorLevel = array("E_ALL" => E_ALL,
                            "E_NOTICE" => E_NOTICE,
                            "E_ERROR" => E_ERROR,
                            "E_WARNING" => E_WARNING,
                            "E_PARSE" => E_PARSE);
        error_reporting($errorLevel[$string]);

```

# ios - 为什么我收到“Title set but using a system Identifier”警告？

> ID：15466451
> 
> 赞同：21
> 
> 时间：2013-03-17T21:30:07.177
> 
> 标签：ios, objective-c, ios6, storyboard, uistoryboard

我收到以下警告：

> MainStoryboard.storyboard：标题集但使用系统标识符（这些属性是互斥的；标题将被忽略）

我的故事板上有一个手动放置的工具栏，带有标题和取消按钮。那有什么问题呢？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-17T21:32:39.570

您是否为取消按钮添加标题（例如“取消”）？

您不需要这样做，因为将条形按钮项设置为系统条形按钮项（如取消）会自动设置标题，并且会为您本地化。

# android - DashClock 首选项

> ID：15466452
> 
> 赞同：0
> 
> 时间：2013-03-17T21:30:09.123
> 
> 标签：android, preferences, dashclock

我尝试为破折号时钟构建一个小型扩展，并且我希望能够配置一些设置，但是正如我现在所做的那样，它不起作用。

在 prefs.xml 文件中，我有一个这样的复选框：

```
<PreferenceScreen  xmlns:android="http://schemas.android.com/apk/res/android">
<CheckBoxPreference
android:title="Zenbat"
android:defaultValue="true"
android:key="checkbox"
android:summary="blabla"/>
</PreferenceScreen> 
```

然后我有一个名为 SettingsActivity 的活动，如下所示：

```
 public class SettingsActivity extends PreferenceActivity {

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.prefs);
    }
    } 
```

当我点击扩展程序的设置按钮时，我认为我应该已经看到了首选项，但是我收到以下错误：

无法实例化活动 ComponentInfo。类NotFoundException。

在清单中，我有元数据和对活动的调用：

```
 <meta-data android:name="settingsActivity"
  android:value=".SettingsActivity" />

 <activity android:name=".SettingsActivity"
 android:label="@string/title_settings"
 android:exported="true" /> 
```

偏好是否必须以其他方式实现？或者我做错了什么？先感谢您！

编辑（日志文件）：03-17 22:12:53.810：E/AndroidRuntime(9885)：java.lang.RuntimeException：无法实例化活动 ComponentInfo{com.wortdestages/com.wortdestages.SettingsActivity}：java.lang.ClassNotFoundException：在路径上找不到类“com.wortdestages.SettingsActivity”：/data/app/com.wortdestages-2.apk

# php - 我如何发送与 json 链接的变量？我对具有不同变量的数据进行过滤，例如名称和国家/地区

> ID：15466456
> 
> 赞同：0
> 
> 时间：2013-03-17T21:30:17.427
> 
> 标签：php, javascript, ajax, json, xmlhttprequest

我使用 json 过滤我的数据..

我正在制作搜索表单来过滤我的数据，我正在使用 php & mysql

我用姓名、国家和年龄搜索

但是数据显示在 div 中，我无法使用 php 进行分页，因为变量不会通过 url 发送...

我希望 url 看起来像 localhost/rootfolder/search?country=uk&name=carla&age=23

```
function get_site_data(){

filter_url = '';

if($("#nickName").val()) { var nick = $("#nickName").val(); }
else var nick = '';                 
if (nick != '' && nick != '-') 
if(filter_url == '')
filter_url += ' full_name like "'+nick+'%"';
            else
filter_url += ' And full_name like "'+nick+'%"';

                                        if($("#country").val()) { var country = $("#country").val(); }
    else var country = '';                  
    if (country != '' && country != '-') 
    if(filter_url == '')
    filter_url += ' country = "'+country+'"';
        else
        filter_url += ' And country = "'+country+'"'; 
```

我用

```
`if (filter_url=="")
{
document.getElementById("member_user").innerHTML="";
return;
} 
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("member_user").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","search.php?q="+filter_url,true);
xmlhttp.send();         
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:41:38.997

有点令人困惑的问题，但有一些提示：

*   对于 ajax，使用流行的 JS 库/框架之一，如 jQuery、原型或主干
*   不要在javascript中组装你的mysql查询，只需将变量传递给你的php并在那里组装查询
*   查看您选择的 JS 框架的示例，了解如何在 php 中生成答案，并使用它们更新您的 html

# php - 使用令牌从 Web 应用程序中访问页面的相册？

> ID：15466466
> 
> 赞同：1
> 
> 时间：2013-03-17T21:31:20.647
> 
> 标签：php, facebook-graph-api, sdk, token

我第一次在客户站点中使用 Facebook 的 PHP sdk，我有点困惑。我正在尝试从客户的 Facebook 页面获取一些数据并将其注入他们的网站。我试图获取的对象之一是照片库的客户相册列表。

```
<?php 
$albums = $Facebook->api("/169639127532/albums?fields=id,name,cover_photo");
$photos = array();
$queries = array();
foreach($albums['data'] as $album) {
    if(array_key_exists("cover_photo", $album)) 
    $queries[] = array("method" => "GET", "relative_url" =>     "/".$album['cover_photo']."?fields=source");
}

$rawPhotos = $Facebook->api('?batch='.json_encode($queries), 'POST');
foreach($rawPhotos as $photo) {
    //print_r(json_decode($photo['body'])); echo "<br /><br />";
    $photo = json_decode($photo['body']);
    $photos[$photo->id] = $photo->source;
} 
```

如您所见，我获取了专辑列表，然后使用批处理请求获取这些专辑的所有封面照片。

使用我的客户页面 ID，这不起作用，不会返回任何内容。但是，如果我使用另一个页面的 ID，则此方法有效。

所以我把这归结为授权。我注意到，如果我使用带有访问令牌的 Graph API 浏览器，我可以获得照片。因此，我复制了使用 API 资源管理器生成的令牌，并使用以下函数在站点上全局设置它，这很有效。

```
$Facebook->setAccessToken($token) 
```

显然这不是一个非常稳健的解决方案，因为令牌只存在有限的时间。我尝试使用带有我的应用程序详细信息的 /oauth/access_token API 调用获取应用程序的令牌，并成功取回了令牌。但是，如果我将其用作令牌，我将无法再看到从图形浏览器中使用临时令牌获得的数据。

我不希望用户必须登录才能看到网站上的照片库。

我该如何去获取允许我执行此操作的应用程序的令牌？

谢谢。

# python - Tkinter 拖放

> ID：15466469
> 
> 赞同：3
> 
> 时间：2013-03-17T21:31:22.917
> 
> 标签：python, tkinter, drag-and-drop, tkinter-canvas

我正在开发一个拖放功能，它允许我在画布上移动项目。我让它工作（有点）但我只移动了一点，但线在屏幕上射击（最终离开了可见部分画布，所以我无法到达它。我不确定从这里去哪里。下面是我到目前为止创建的拖放代码：

```
def onPressToMove(self, event): #get initial location of object to be moved
    winX = event.x - self.workspace.canvasx(0)
    winY = event.y - self.workspace.canvasy(0)
    self.dragInfo["Widget"] = self.workspace.find_closest(event.x, event.y, halo = 5)[0]
    self.dragInfo["xCoord"] = winX
    self.dragInfo["yCoord"] = winY

def onReleaseToMove(self, event): #reset data on release
    self.dragInfo["Widget"] = None
    self.dragInfo["xCoord"] = 0
    self.dragInfo["yCoord"] = 0        

def onMovement(self, event):
    winX = event.x - self.workspace.canvasx(0)
    winY = event.y - self.workspace.canvasy(0)
    newX = winX - self.dragInfo["xCoord"]
    newY = winY - self.dragInfo["yCoord"]
    self.workspace.move(self.dragInfo["Widget"], newX, newY) 
```

dragInfo 是我用来存储数据的字典。最初我认为将画布坐标转换为窗口坐标会有所帮助，但它的作用与没有这些东西相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:01:43.803

[这个](https://stackoverflow.com/a/6789351/7432)问题“板绘图代码移动椭圆”的答案显示了如何在画布上拖动对象。

在您的情况下，您不会在移动对象时重置增量的基础。如果鼠标向右移动 1 个像素，则用于`move`将鼠标向右移动 1 个像素。

现在，假设您将其向右移动一个像素。这一次，您的计算表明增量是从起点开始的 2，即使您实际上只将鼠标移动了一个像素）。下次您移动一个像素时，您计算的增量为 3，依此类推。

解决方案很简单：在移动时重置`dragInfo["xCoord"]`，`dragInfo["yCoord"]`因为您只想计算与其先前位置的增量，而不是原始起始位置。

```
def onPressToMove(self, event): #get initial location of object to be moved
    winX = event.x - self.canvas.canvasx(0)
    winY = event.y - self.canvas.canvasy(0)
    self.dragInfo["Widget"] = self.canvas.find_closest(event.x, event.y, halo = 5)[0]

    # reset the starting point for the next move
    self.dragInfo["xCoord"] = winX
    self.dragInfo["yCoord"] = winY 
```

# python - 用于删除 Tkinter Text Widget Content 的线程不起作用。

> ID：15466478
> 
> 赞同：2
> 
> 时间：2013-03-17T21:32:18.487
> 
> 标签：python, class, widget

对不起，如果这是一个相当具体的问题，但让我试着解释一下。

我有一个文本框，用户可以通过在框中输入文本并点击“发送”来添加文本。

问题是我需要在使用十五行后清除文本框。

这是我试图做的：

每当用户点击发送，将文本添加到文本框时，它都会向名为 textlimiter 的变量添加一个数字。因为每个发送按钮也会创建一个新行。我可以使用变量来记录“发送”到文本框的次数。

当变量超过 15 时，正在观察变量的线程将清除文本框。

事情是，它似乎永远不会工作。我尝试过寻求帮助，我从一个很棒的人那里得到了一些帮助，他建议我将所有内容都重写为“框架”，这样我就可以将所有的函数、小部件和变量归为一个类。

看来我与变量类有冲突。所以我尝试在我的班级中将变量设置为“全局”，并使用该变量进行函数。但这似乎也不起作用。

我想我可以去把它全部重写成框架，但我只是想问是否有人有他们能想到的快速修复。（我也不知道一旦我完成了那个人什么时候可以帮助我，如果出现问题）

如果我的问题不恰当，或者不知何故不允许，请告诉我，我明天起床后将其删除。对不起，如果它是坏的。

我这里有代码：

```
# [Importing Modules]
from tkinter import *
import os
import threading

#_________________| Setting Variables
global textlimiter
textlimiter = 0

#____________| Defining Functions        

def CONVERT():
    chatbox.insert(INSERT,"You: "+USER_ENTRY.get()+ "\n")
    INPUT_BOX.set("")
    global textlimiter
    textlimiter += 1

#_______| Creating Window |

chat = Tk()
chat.title("Net Send Client [0.4]")
chat.geometry('550x500+200+200')

#________|   Title |

title = StringVar()
title.set("Net Send Chat\n Type in box to send.")
title_widget = Label(chat,textvariable = title, height = 4)
title_widget.pack()

#_______________________| User Input Box|
INPUT_BOX = StringVar()
USER_ENTRY = Entry(chat,textvariable = INPUT_BOX)
USER_ENTRY.pack(side=TOP, padx = 10, pady = 20)

#___________________________________________________________________| Send Button|
send_button = Button(chat, text="Send",width = 20, command = CONVERT)
send_button.pack(padx = 10, pady = 10)

#_______________________________________________________| Text Box Widget |
chatbox = Text(width = 60, height = 15, relief = SUNKEN)
left = Frame(chatbox)
right = Frame(chatbox)
s_start = Scrollbar(right)
s_start.pack(side=RIGHT)

chatbox.grid(row = 0, column = 0, columnspan = 3)
chatbox.pack()

#__________________________________________| Chat Wizard Checks Text Limit|
class Chatwizard(threading.Thread):
    def Chatmonitor():
        global textlimiter
        if textlimiter >= 15:
            chatbox.set(None)
            chatbox.insert(INSERT,"Console: Limit Reached, Chat Wiped" + "\n")
Chatwizard.start

chat.mainloop() 
```

如您所见，我尝试将变量设置为全局，但似乎没有任何改变。

如果您尝试运行该程序，请记住您需要输入并发送 15 次内容，它才能清除聊天框。

谢谢你看看如果你这样做。我现在真的有点难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:14:04.200

*   您绝对不需要线程来监视 Text 小部件 ( `chatbox`)，因为聊天框本身可以告诉您它包含多少行文本：

    ```
    numlines = len(chatbox.get("1.0",END).splitlines()) 
    ```

*   此外，[Tkinter 不是线程安全](http://effbot.org/zone/tkinter-threads.htm)的。所有的 GUI 小部件都应该由一个且只有一个线程来处理。

* * *

```
from Tkinter import *
import os
import threading

def CONVERT():
    numlines = len(chatbox.get("1.0",END).splitlines())
    if numlines > 2:
        chatbox.delete("1.0",END)
        chatbox.insert(INSERT,"Console: Limit Reached, Chat Wiped" + "\n")
    chatbox.insert(INSERT,"You: "+USER_ENTRY.get()+ "\n")
    INPUT_BOX.set("")

chat = Tk()
chat.title("Net Send Client [0.4]")
chat.geometry('550x500+200+200')

title = StringVar()
title.set("Net Send Chat\n Type in box to send.")
title_widget = Label(chat,textvariable = title, height = 4)
title_widget.pack()

INPUT_BOX = StringVar()
USER_ENTRY = Entry(chat,textvariable = INPUT_BOX)
USER_ENTRY.pack(side=TOP, padx = 10, pady = 20)

send_button = Button(chat, text="Send",width = 20, command = CONVERT)
send_button.pack(padx = 10, pady = 10)

chatbox = Text(width = 60, height = 15, relief = SUNKEN)
left = Frame(chatbox)
right = Frame(chatbox)
s_start = Scrollbar(right)
s_start.pack(side=RIGHT)

chatbox.grid(row = 0, column = 0, columnspan = 3)
chatbox.pack()

chat.mainloop() 
```

# javascript - 在转到其他页面之前检查该复选框是否已选中

> ID：15466489
> 
> 赞同：0
> 
> 时间：2013-03-17T21:33:49.290
> 
> 标签：javascript, jquery, html

我有一张缩略图，点击后会链接到另一个页面。而且我想确保用户在单击缩略图以转到其他页面之前已选中一个复选框。

我的 Javascript 函数目前是：

```
function CheckForm(obj1) { 

if (obj1.accept.checked == false){
  alert ("You must check the box to confirm you have read and accept the Terms.");
return false;
} 
return true;
} 
```

我的 html 看起来像这样：

```
<input name="accept" type="checkbox" value="0">Confirmation Box</input>

<a href="http://somelink.com">
<img src="/Koala.jpg" height="94" width="94" />
</a> 
```

所以我希望用户必须先选中复选框，然后才能点击 koala.jpg 缩略图。因此，用户访问 somelink.com 的唯一方法是选中该复选框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T21:42:09.403

```
<a href="http://somelink.com" onclick="return CheckForm()">

function CheckForm(obj1) { 

if (!($('#accept').is(":checked"))){
  alert ("You must check the box to confirm you have read and accept the Terms.");
return false;
} 
return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:40:32.267

问题在标签中列出了 jquery，所以我假设您可以访问该库：

```
jQuery('#name').is(':checked') == false 
```

# powershell - 从任何地方运行 powershell 脚本

> ID：15466499
> 
> 赞同：4
> 
> 时间：2013-03-17T21:34:46.077
> 
> 标签：powershell, window, windows-server-2008

我目前正在研究一个 powershell 脚本。此脚本的目的是从 .csv 文件中导入数据，如果 Active Directory 中尚不存在该用户名，则从该文件中创建新用户。

我的问题是如何让这个脚本从任何位置运行，所以我所要做的就是输入脚本的名称，它就会运行。我已经能够在 BASH 中做到这一点，但无法弄清楚如何在 power shell 中做到这一点。到目前为止，google 帮助不大。

如果有什么不同，我正在使用 Windows Server 2008 R2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T21:47:48.473

基本思想是创建将完成工作的[Powershell 函数](http://www.powershellpro.com/powershell-tutorial-introduction/powershell-functions-filters/)（或将调用放置在其他位置的其他脚本）并将此方法放入**Profile.ps1**脚本（每次启动 powershell 时加载的脚本） - 查看[Windows PowerShell 配置文件](http://msdn.microsoft.com/en-us/library/bb613488%28VS.85,loband%29.aspx)了解更多详情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-24T18:01:39.777

上面[Tomas Panik](https://stackoverflow.com/a/15466634/6596203)的 Powershell 函数链接不再存在，所以我想在这里添加答案。

简洁版本：

1.  您可以使用 Powershell 函数创建函数。但是，这只会持续到该会话。
2.  为了让您定期使用您的函数，您需要生成/添加您的函数到您自己的 PowerShell 配置文件中。快速教程在[这里](https://www.red-gate.com/simple-talk/sysadmin/powershell/persistent-powershell-the-powershell-profile/)和[这里](https://blue42.net/code/automatically-load-custom-powershell-functions/)。Tomas Panik 到 Windows [PowerShell Profiles](https://docs.microsoft.com/en-us/previous-versions//bb613488(v=vs.85)?redirectedfrom=MSDN)的链接也有很好的信息。

更新：感谢 Hussein Al-Mosawi 报告旧的断开链接！

# java - 为什么 int 是 32 位？

> ID：15466501
> 
> 赞同：2
> 
> 时间：2013-03-17T21:35:27.483
> 
> 标签：java, .net

在 Java 和 .net 中，默认的 int 都是 32 位的。这是否与当 java 和 .net 出现时，大多数使用的处理器都是 32 位的事实有关？还是有其他原因选择 32 作为整数的默认位长？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:40:38.850

是的，这主要是因为大多数处理器都是 32 位的。这也显示在 Java 规范的其他部分。例如，明确不保证`long`和`double`（64 位）读取和写入是原子的，而对于所有其他原始类型，它是原子的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T21:50:34.383

Java was based on C and some C++.

In C `char` is 8-bit, `short` is 16-bit and a `long long` is 64-bit. An `int` could be 16-bit or 32-bit but for simplicity in Java they decided on `byte` being 8-bit, `short` is 16-bit, `int` is 32-bit and `long` is 64-bit. In Java `char` is 16-bit unsigned.

In short, from C there were four types and four sizes and so `int` ended up being 32-bit.

# sql - 选择 count = 0 的条目

> ID：15466503
> 
> 赞同：0
> 
> 时间：2013-03-17T21:35:27.963
> 
> 标签：sql, join, count

对不起，如果这是一个愚蠢的问题，但我有 2 个用于酒店系统数据库的表，“Rooms”表和“Guests”表。

Rooms 表有一个 room_number 列，用于表示该房间的编号（主键）。客人表有一个 room_number 列，用于客人入住的房间号（外键）。

我需要一个查询，它只返回没有客人入住的房间的房间号。

目前我有这个：

```
SELECT Rooms.room_number, COUNT(Guests.guest_id) AS occupant_count 
From Rooms,Guests 
WHERE (Rooms.room_number = Guests.room_number) 
```

这将返回所有乘员计数。我怎样才能让它只返回没有客人的房间的房间号？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:37:34.987

在两个表之间进行外部连接并添加`AND Guests.room_number is null`到查询的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:38:38.243

这是微不足道的，而不是愚蠢的。

```
SELECT Rooms.room_number 
From Rooms 
WHERE Rooms.room_number not in ( select Guests.room_number 
                                 from Guests) 
```

# css - form_for 提交按钮，样式按钮为文本而不是按钮

> ID：15466506
> 
> 赞同：0
> 
> 时间：2013-03-17T21:36:01.643
> 
> 标签：css, ruby-on-rails

我想要文本而不是 rails 中提供的按钮。

我已经向提交按钮添加了一个类，但这就是我卡住的地方。通常在 CSS 中，如果我想要一些文本，我只是不设置它的样式。但在这种情况下，按钮会自动设置样式以看起来像一个按钮。

我如何覆盖它并使它看起来像文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:44:02.023

这是带有 no_style 类（或任何您想要的）的按钮：

```
<button class="no_style">test</button> 
```

然后在您的样式表中调用带有 no_style 类的按钮：

```
button.no_style {
  background: none;
  border: none;
} 
```

您可能需要检查按钮以查看其上是否有任何其他样式。您可以通过右键单击按钮并选择“检查元素”来检查它。如果您的按钮有任何其他样式，我可以帮助您删除它们。如果出现其他任何内容，请告诉我，我可以向您展示如何删除它。

如果您想更改文本，您仍然可以在没有按钮外观的情况下设置文本样式，如下所示：

```
button.no_style {
  background: none;
  border: none;
  color: red;
  font-size: 24px;
  text-transform: uppercase;
} 
```

这是你要找的吗？

# iphone - 为什么在触摸视图子视图时不调用 hitTest？

> ID：15466507
> 
> 赞同：4
> 
> 时间：2013-03-17T21:36:10.883
> 
> 标签：iphone, ios, cocoa-touch, uiview, hittest

我有一个视图，我会调用`parentView`它，它有一个名为`childView`. 的一部分`childView`在 的范围之外`parentView`，并附`childView`有一个。`panGestureRecognizer`我已经实现了以下内容，`parentView`以便`childView`即使它超出其超级视图范围，它也能识别触摸：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    if (!self.clipsToBounds && !self.hidden && self.alpha > 0)
    {
        for (UIView *subview in self.subviews)
        {
            CGPoint subPoint = [subview convertPoint:point fromView:self];
            UIView *result = [subview hitTest:subPoint withEvent:event];
            if (result != nil)
            {
                return result;
                break;
            }
        }
    }

    return [super hitTest:point withEvent:event];
} 
```

然而当我触摸或拖动时`childView`，`hitTest`甚至都没有被叫上`parentView`。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:57:24.103

因为事件沿着响应者链传递，并在调用 hittest 之前使用

所以在这种情况下，事件从上到下进行......查看有关响应者链的文档：

虽然不是很清楚：D [http://developer.apple.com/library/ios/#DOCUMENTATION/EventHandling/Conceptual/EventHandlingiPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/EventHandling/Conceptual/EventHandlingiPhoneOS/Introduction/Introduction.html)

但重要的一点：

*   命中测试视图首先有机会处理触摸事件。如果命中测试视图无法处理事件，则事件会沿着该视图的响应者链向上传播，如“响应者链由响应者对象组成”中所述，直到系统找到可以处理它的对象。

*   触摸事件。如果命中测试视图无法处理触摸事件，则该事件将向上传递以命中测试视图开始的响应链。

# objective-c - 更改 UISearchBar 文本字段的边框样式

> ID：15466512
> 
> 赞同：1
> 
> 时间：2013-03-17T21:36:18.933
> 
> 标签：objective-c, cocoa-touch, uitextfield, uisearchbar, uiappearance

我正在寻找一种方法来获得`UISearchBar`具有不同背景和文本颜色且没有边框的方法。

我已经这样做了：

```
[[[self.searchBar subviews] objectAtIndex:0] setAlpha:0.0];
UITextField* searchField = nil;
for(int i = 0; i < self.searchBar.subviews.count; i++) {
    if([[self.searchBar.subviews objectAtIndex:i] isKindOfClass:[UITextField class]]) { //conform?
        searchField = [self.searchBar.subviews objectAtIndex:i];
    }
}
if(searchField) {
    searchField.backgroundColor = [UIColor colorWithRed:253.0/255.0 green:242.0/255.0 blue:210.0/255.0 alpha:1.0];
    searchField.textColor = [UIColor colorWithRed:98.0/255.0 green:65.0/255.0 blue:48.0/255.0 alpha:1.0];
    searchField.borderStyle = UITextBorderStyleNone;
} 
```

但我正在寻找一种方法来更改`borderStyle`的`UISearchBar`文本字段。我还想删除放大镜按钮。这是一种进行这些修改的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:14:18.977

您可以使用外观 API，而不是搜索搜索栏的视图层次结构。查看[文档中的“自定义外观”](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T10:51:35.373

在 Swift 中，你可以这样使用：

```
let txtField = UITextField.appearance(whenContainedInInstancesOf: [UISearchBar.self])
txtField.borderStyle = .none 
```

# php - 如何在 Doctrine2/Symfony2 的存储库中获取外部存储库？

> ID：15466513
> 
> 赞同：25
> 
> 时间：2013-03-17T21:36:22.913
> 
> 标签：php, symfony, doctrine-orm, repository

我需要来自 2 个不同实体的值。我不知道该怎么做。到目前为止我试过这个：

```
<?php

namespace Pond\GeolocBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * PondLakeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class PondLakeRepository extends EntityRepository
{

    public function getSwimsAvailableById($id)
    {
        // get the nb of swims of a lake
        $lake = $this->findOneById($id);
        $swims = $lake->getSwims();

        $repository = $this->getDoctrine()
                           ->getManager()
                           ->getRepository('PondGeolocBundle:User_Lake');

        //get the nb of users in a lake
        $qb = $this->_em->createQueryBuilder();
        $qb->select('count(a.id)');
        $qb->from('PondGeolocBundle:User_Lake', 'a');

        $nbOfUsers = $qb->getQuery()->getSingleScalarResult();

        // return the nb of swims available onthis lake
        $avail = $swims - $nbOfUsers;
        print_r ($avail);
    }

} 
```

不起作用请帮助。谢谢

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-17T22:57:56.930

您可以`EntityManager`通过调用访问[`Doctrine\ORM\EntityRepository#getEntityManager()`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/EntityRepository.php#L246-L252)：

```
$repository = $this
    ->getEntityManager()
    ->getRepository('PondGeolocBundle:User_Lake'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T15:39:18.840

如果您更喜欢注入依赖项，请将您的存储库声明为服务，以便您可以注入一个以在另一个内部使用它：

**服务.yml**

```
services:
    repository.user_lake:
        class: Pond\GeolocBundle\Entity\UserLakeRepository
        factory: [@doctrine, getRepository]
        arguments:
            - PondGeolocBundle:User_Lake

    repository.pond_lake:
        class: Pond\GeolocBundle\Entity\PondLakeRepository
        factory: [@doctrine, getRepository]
        arguments:
            - PondGeolocBundle:PondLake
        calls:
            - [setUserLakeRepository, [@repository.user_lake]] 
```

在 PondLakeRepository.php 中，您必须有一个属性设置器 (setUserLakeRepository) 来存储存储库（即 $userLakeRepository）。

# python - Python中@Named API参数的等价物

> ID：15466517
> 
> 赞同：2
> 
> 时间：2013-03-17T21:36:32.993
> 
> 标签：python, google-app-engine, rest, google-cloud-endpoints

有没有办法在 Python 中使用命名方法参数 - 对应于这个 Java 示例：

```
@ApiMethod(
    name = "foos.remove",
    path = "foos/{id}",
    httpMethod = HttpMethod.DELETE,
)
public void removeFoo(@Named("id") String id) {
} 
```

在我的 Python 版本中，如果我将 URL 的`@endpoints.method`路径设置为`foos/{id}`正确匹配，但如何访问该参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T03:57:28.737

没有严格的等价物，但如果在您的路径中，那么您在方法中用于请求类的消息类中`{id}`必须有一个字段调用。`id``protorpc`

例如：

```
from google.appengine.ext import endpoints
from protorpc import messages
from protorpc import remote

class MyMessageClass(messages.Message):
  id = messages.StringField(1)  # Or any other field type

@endpoints.api(...)
class MyApi(remote.Service):
  @endpoints.method(MyMessageClass, SomeResponseClass,
                    ..., path='foos/{id}')
  def my_method(self, request):
    ... 
```

# hibernate - 如何使字符串主键休眠。@GeneratedValue 策略

> ID：15466518
> 
> 赞同：9
> 
> 时间：2013-03-17T21:36:35.197
> 
> 标签：hibernate, spring-mvc, generator, spring-roo

我的目标是创建一个具有唯一字段 IMEI 的实体设备，我想将其用作主键，并在设备注册时指定它（在创建实体时手动指定）。我使用 Spring roo 工具进行开发，并使用休眠作为 ORM。

当我在实体声明中指定时：

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord(identifierField = "IMEI", identifierType = String.class)
public class Device {...} 
```

我得到这个生成：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "IMEI")
private String Device.IMEI; 
```

在使用 mysql db 将项目部署到服务器时，出现此错误：

```
2013-03-17 20:03:23,136 [main] ERROR org.hibernate.tool.hbm2ddl.SchemaExport - HHH000389: Unsuccessful: create table device (imei varchar(255) not null auto_increment, model varchar(255), name varchar(255) not null, version integer, primary key (imei))
2013-03-17 20:03:23,136 [main] ERROR org.hibernate.tool.hbm2ddl.SchemaExport - Incorrect column specifier for column 'imei' 
```

然后我覆盖 roo 生成的字段

```
@Id
@GeneratedValue(generator = "org.hibernate.id.Assigned")
@Column(name = "the_code")
private String code; 
```

（我在[这里](http://forum.springsource.org/archive/index.php/t-114225.html?s=daed6da207ea08e4584a88621b35c77e)找到了这个）

但仍然得到错误。然后我将代码简单地更改为：

```
 @Id
private String IMEI; 
```

然后它工作正常并要求我在保存实体之前指定imei字段。

我的问题是：

使用我的自定义字段作为 id 是否正确？

通过String可以吗？

它不是用hibernate生成而是从设备imei中获取的可以吗？

什么是 org.hibernate.id.Assigned？

为什么 roo 为 @RooJpaActiveRecord(identifierField = "IMEI", identifierType = String.class) 生成的代码不起作用？

是否可以创建字符串自动生成的主键？

什么是默认 GeneratedValue 策略值（我的最后一个案例）？

我已经阅读了[官方文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-identifier)，但没有完全理解，请参考我可以阅读所有这些的文章。

谢谢，对不起，很长的问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T15:53:02.457

一个简单的解决方案可能是`@PrePersist`在您的实体类上使用注释。

只需添加方法

```
@PrePersist
private void ensureId(){
    this.setId(UUID.randomUUID().toString());
} 
```

并摆脱`@GeneratedValue`注释。

PrePersist 文档：[http ://docs.oracle.com/javaee/5/api/javax/persistence/PrePersist.html](http://docs.oracle.com/javaee/5/api/javax/persistence/PrePersist.html)

斯特凡诺

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-18T05:26:18.120

`@GeneratedValue(strategy = GenerationType.AUTO)`不能与`String`类型一起使用。因此，如果您想`String`用作 ID，则必须手动分配它。但如果适合您的需要，可以使用 String 作为 ID。

使用`org.hibernate.id.Assigned`还意味着您必须在保存数据之前分配 ID 值。

未添加注释时`@GeneratedValue`，默认*分配*生成器，这意味着标识符的值必须由应用程序设置。

有关详细信息，请参阅[hibernate 手册](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch05.html#mapping-declaration-id)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-07T09:52:42.433

目前，这可能是不必要的。但我认为我们应该为某人更新这张票。

我是回答堆栈溢出的新手，所以希望这是有道理的

如果要在休眠中自动生成字符串作为 ID，可以使用[IdentifierGenerator](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/id/IdentifierGenerator.html)和 @GenericGenerator 定义规则。

实体声明：

```
public class Device {...

    @Id
    @GenericGenerator(name = "sequence_imei_id", strategy = "com.supportmycode.model.ImeiIdGenerator")
    @GeneratedValue(generator = "sequence_imei_id")
    @Column(name = "IMEI")
    private String IMEI;

...} 
```

义美发电机声明：

```
public class ImeiIdGenerator implements IdentifierGenerator {...
    public Serializable generate(SessionImplementor session, Object object) throws HibernateException {

            // define your IMEI, example IMEI1, IMEI2,...;
            return "IMEI"+ UUID.randomUUID().toString();
...} 
```

当您保存设备对象时，IMEI(id) 将由 ImeiIdGenerator 自动生成。

# c# - 单元测试执行序列后 db4o 删除不起作用

> ID：15466519
> 
> 赞同：1
> 
> 时间：2013-03-17T21:36:35.807
> 
> 标签：c#, db4o

我有一小部分工作正常的单元测试，直到我添加一个测试来验证我的唯一约束是否正常工作。这些不是真正的单元测试，它们是集成测试。

无论如何，如果我省略了验证唯一约束的测试，那么删除一切都很好。但是，如果我添加 SerialNumberUniqueConstraint_Test 方法，它会失败并且我的项目类不为空，因为删除永远不会发生。如果我将 SerialNumberUniqueConstraint_Test 移动到其他测试之前，则后续测试也会失败并出现相同的 UniqueFieldValueConstraintValidationException。我做错了什么？

```
 [TestMethod]
    [ExpectedException( typeof( UniqueFieldValueConstraintViolationException ) )]
    public void SerialNumberUniqueConstraint_Test()
    {
        using( var logic = new ItemLogic() )
        {
            logic.Save( CreateItem() );
        }
    }

    [TestMethod]
    public void DeleteItem_Test()
    {
        Item item = null;

        using( var logic = new ItemLogic() )
        {
            logic.Delete( SerialNumber );
        }

        using( var logic = new ItemLogic() )
        {
            item = logic.Retrieve( SerialNumber );
        }

        Assert.IsNull( item );
    }

    private Item CreateItem()
    {
        return new Item { Name = "My item", Make = "make", Model = "model", SerialNumber = "1234" };
    }

    public Item Save( Item item )
    {
        Db4oDatabase.Database.Store( item );
        Db4oDatabase.Database.Commit();

        return this.Retrieve( item.SerialNumber );
    }

    public Item Retrieve( string serialNumber )
    {
        Item item = (from   i in Db4oDatabase.Database.AsQueryable<Item>()
                     where  i.SerialNumber == serialNumber
                     select i).FirstOrDefault();            

        return item;
    }

    public void Delete( string serialNumber )
    {
        Db4oDatabase.Database.Delete( this.Retrieve( serialNumber ) );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:22:28.487

数据类的 Save 方法现在在 Commit() 操作上使用 try/catch 并在 UniqueFieldValueConstraintViolationException 发生时执行回滚。此外，我已按照 Bob Horn 的建议使 DeleteItem_Test 独立。

```
 public Item Save( Item item )
    {
        Db4oDatabase.Database.Store( item );

        try
        {
            Db4oDatabase.Database.Commit();
        }
        catch( UniqueFieldValueConstraintViolationException )
        {
            Db4oDatabase.Database.Rollback();
            throw;
        }

        return this.Retrieve( item.SerialNumber );
    }

    [TestMethod]
    public void DeleteItem_Test()
    {
        string serialNumber = "DeleteItem_Test";

        Item item = new Item
        {
            Name          = "Washer",
            Make          = "Samsung",
            Model         = "Model No",
            SerialNumber  = serialNumber,
            PurchasePrice = 2500m
        };

        using( var logic = new ItemLogic() )
        {
            item = logic.Save( item );

            Assert.IsNotNull( item, TestResources.DevMessage_IntermediateOperationFailed, "Save", serialNumber );

            logic.Delete( item );                

            item = logic.Retrieve( serialNumber );
        }

        Assert.IsNull( item );
    } 
```

# jquery - 可排序不适用于不同高度的列

> ID：15466526
> 
> 赞同：3
> 
> 时间：2013-03-17T21:37:11.337
> 
> 标签：jquery, css, drag-and-drop, jquery-ui-sortable

我正在使用这个库：[HTML5 Sortable Drag and Drop](http://farhadi.ir/projects/html5sortable/)。

我将它用于块，2 列宽。它的标记：

```
<ul class="sortable grid">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li style="height: 200px;">Item 4</li>
    <li>Item 5</li>
    <li>Item 6</li>
    <li style="height: 200px;">Item 7</li>
    <li>Item 8</li>
</ul> 
```

我有一个问题。当某些块具有不同的高度时，我需要以某种方式清除`float`第二个块之后的内容，以免弄乱布局。

![坏的](../Images/396400a9fc2102a946430d2302ad4d8c.png)

如果有人有任何想法，这里有一个现场工作演示[http://jsfiddle.net/jasondavis/4njSE/6/ 。](http://jsfiddle.net/jasondavis/4njSE/6/)我曾尝试`.sortable>:nth-child(odd) {clear:left}`在奇数`li`列表项上使用选择器，这在外观上很有效，但它会扰乱拖放的功能，当你放下项目时，当我这样做时，它们不会进入正确的位置。

这个 JSFiddle 显示它与`.sortable>:nth-child(odd) {clear:left}`添加 的[http://jsfiddle.net/jasondavis/4njSE/7/一起使用](http://jsfiddle.net/jasondavis/4njSE/7/)

和想法？我现在不知所措。

`dragable`我还尝试将每组 2 个块包装在自己的容器中，这会有所帮助，但是由于库将 a 添加到容器 div 中，因此拖放无法正常工作。

这是目标的图像，它的外观：

![好的](../Images/4596b743e177a9f855fa5784c6f88c84.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:54:56.927

开始了：

首先 -[工作 jsfiddle 示例](http://jsfiddle.net/opherv/7jur6/#base)。

基本上，我在插件中添加了两个事件回调：`onStartDrag`和`onEndDrag`. 这些依次调用该`addFloats`函数，这是一个简单的函数，负责将浮点数添加到不是元素的奇数元素*（*这`sortable-dragging`不能用纯 CSS 实现）。我们还必须在调用可排序插件时调用该函数，但仅此而已。

享受 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:41:31.697

添加这个CSS：

```
.sortable>:nth-child(odd) {clear:left} 
```

# php - CakePHP foreignKey 没有保存在 belongsTo 关系中

> ID：15466528
> 
> 赞同：2
> 
> 时间：2013-03-17T21:37:15.360
> 
> 标签：php, cakephp, save, belongs-to

我有一张桌子`profiles`和一张桌子`users`，并且`profiles`有`belongsTo`关系`users`。在我`profiles/edit`看来，我有一个现有的下拉列表`users`可供选择。

但是，正如我所料，`users.id`并没有被保存在 中。`profiles.user_id`

ProfilesController.php -> 编辑：

```
$this->set('users', $this->Profile->User->find('list')); 
```

并在视图 -> 配置文件 -> edit.ctp

```
echo $this->Form->input('User'); 
```

在控制器中运行`debug($this->request);`表明正在将正确的值发送回控制器。保存操作如下所示：

```
if ($this->request->is('post') || $this->request->is('put')) {
    if ($this->Profile->save($this->request->data)) {
        $this->Session->setFlash(__('The profile has been saved'));
    } else {
        $this->Session->setFlash(__('The profile could not be saved. Please, try again.'));
    }
} 
```

在返回的数据中：

```
data => array(
    'Profile' => array(
        'User' => '3',
                    ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T22:09:11.590

这个语法是错误的：

```
echo $this->Form->input('User'); 
```

您的模型中*没有*名为“用户”的字段`Profile`。这应该是：

```
echo $this->Form->input('user_id'); 
```

# java - 使用两个滑块生成的两个数字相加的 Java 程序

> ID：15466530
> 
> 赞同：0
> 
> 时间：2013-03-17T21:37:25.120
> 
> 标签：java, swing, sliders

我为我的 java 类分配了这个任务，我必须使用滑块添加两个数字，我真的被卡住了。这是我的代码：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener; 
import javax.swing.*;

public class slideCalculator {
JButton add,subtract;
JSlider num1st,num2nd;
JLabel answer;
public slideCalculator(){
    JFrame calc = new JFrame("Mediocre Calculator");
    num1st = new JSlider (0, 100, 0);
    num1st.setMajorTickSpacing (10);
    num1st.setMinorTickSpacing (5);
    num2nd = new JSlider (0, 100, 0);
    num2nd.setMajorTickSpacing (10);
    num2nd.setMinorTickSpacing (5);
    add = new JButton("+");
    subtract = new JButton("-");
    answer = new JLabel("");
    calc.setDefaultCloseOperation(calc.EXIT_ON_CLOSE);
    calc.setVisible(true);
    calc.setBounds(500, 200, 290, 210);
    calc.setLayout(new GridLayout(0,2,1,1));
    calc.add(new JLabel("First Number: "));
    calc.add(num1st);
    calc.add(new JLabel("Second Number: "));
    calc.add(num2nd);
    calc.add(new JLabel("Answer: "));
    calc.add(answer);
    calc.add(add);
    calc.add(subtract);
    add.addActionListener(new action());
    subtract.addActionListener(new action());

}
public static void main(String[] args) {
    slideCalculator lc = new slideCalculator();
}
public class action implements ActionListener {
    public void actionPerformed(ActionEvent ae) {
        int firstNum = Integer.parseInt(num1st.getValue());
        int secondNum = Integer.parseInt(num2nd.getValue());
        if(ae.getValue()== add){
            answer.setText(String.valueOf(firstNum+secondNum));
        }
        else if (ae.getValue()==subtract){
            answer.setText(String.valueOf(firstNum-secondNum));
        }
        } 

}
} 
```

当我去运行它时，它不想工作。我可能错过了一些东西，但我似乎无法弄清楚。我什至是正确的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T21:44:11.597

这个：

```
public void actionPerformed(ActionEvent ae) {
    int firstNum = Integer.parseInt(num1st.getValue());
    int secondNum = Integer.parseInt(num2nd.getValue());
    if(ae.getValue()== add){  // ***** 
```

没有意义。射击——它甚至无法编译，因为 ActionEvent 没有`getValue()`方法。您不会获得 ActionEvent 的“值”，而是通过 获得其 actionCommand 字符串`getActionCommand()`，然后您可以使用 String 的`equals(...)`or`equalsIgnoreCase(...)`方法将其与其他字符串进行比较。

IE，

```
if ("+".equals(ae.getActionCommand()) {
   // do addition
} else if ("-".equals(ae.getActionCommand()) {
   // do subtraction
} 
```

在以后的问题中，如果您遇到任何编译器错误，请发布。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T21:42:52.817

您在这里有 2 个编译错误来源。

[JSlider#getValue](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSlider.html#getValue%28%29)返回一个`int`值，因此无需使用`Integer.parseInt`which 期望`String`. 相反，您可以使用：

```
int firstNum = num1st.getValue();
int secondNum = num2nd.getValue(); 
```

也`getValue`未定义`ActionEvent`，`getSource`将为您提供`Object`参考`JButton`：

```
Object source = ae.getSource();
if (ae.getSource() == add) {
   answer.setText(String.valueOf(firstNum + secondNum));
} else if (source == subtract) {
   answer.setText(String.valueOf(firstNum - secondNum));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T11:12:39.980

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener; 
import javax.swing.*;

public class slideCalculator {
JButton add,subtract;
JSlider num1st,num2nd;
JLabel answer;
public slideCalculator(){
    JFrame calc = new JFrame("Mediocre Calculator");
    num1st = new JSlider (0, 100, 0);
    num1st.setMajorTickSpacing (10);
    num1st.setMinorTickSpacing (5);
    num2nd = new JSlider (0, 100, 0);
    num2nd.setMajorTickSpacing (10);
    num2nd.setMinorTickSpacing (5);
    add = new JButton("+");
    subtract = new JButton("-");
    answer = new JLabel("");
    calc.setDefaultCloseOperation(calc.EXIT_ON_CLOSE);
    calc.setVisible(true);
    calc.setBounds(500, 200, 290, 210);
    calc.setLayout(new GridLayout(0,2,1,1));
    calc.add(new JLabel("First Number: "));
    calc.add(num1st);
    calc.add(new JLabel("Second Number: "));
    calc.add(num2nd);
    calc.add(new JLabel("Answer: "));
    calc.add(answer);
    calc.add(add);
    calc.add(subtract);
    add.addActionListener(new action());
    subtract.addActionListener(new action());

}
public static void main(String[] args) {
    slideCalculator lc = new slideCalculator();
}
public class action implements ActionListener {
    public void actionPerformed(ActionEvent ae) {
        int firstNum = num1st.getValue();
        int secondNum = num2nd.getValue();
        if("+".equals(ae.getActionCommand())) {
            answer.setText(String.valueOf(firstNum+secondNum));
        }
        else 
        if ("-".equals(ae.getActionCommand())) {
            answer.setText(String.valueOf(firstNum-secondNum));
        }
        } 

}
} 
```

# java - 丰富的总和，逻辑

> ID：15466533
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:37:36.737
> 
> 标签：java, arrays, perfect-numbers

我一直在解决下面的问题，但我得到了错误的答案。我的逻辑有什么问题？

> 完美数是一个数，其真因数之和正好等于该数。例如，28 的适当因数之和为 1 + 2 + 4 + 7 + 14 = 28，这意味着 28 是一个完美数。
> 
> 一个数 n 如果其真因数之和小于 n 则称为不足数，如果该数之和超过 n 则称为丰富数。
> 
> 由于 12 是最小的丰度数，1 + 2 + 3 + 4 + 6 = 16，所以可以写成两个丰度数之和的最小数是 24。通过数学分析可以证明，所有大于28123 可以写成两个丰富数之和。但是，即使已知不能表示为两个丰富数之和的最大数小于此上限，也无法通过分析进一步降低此上限。
> 
> 找出所有不能写成两个丰富数之和的正整数之和。

这是我的代码：

```
 public class EulerProblem23 {
public static void main(String[] args) {

    //First, I create an array containing all the numbers ranging from 1 to 28123.
    int[] tall = new int[28123];
    int x = 0;
    for (int j = 1;j<=28123;j++){ 
        tall[x] = j;
        x++;
    }

    //Then, give all the numbers that can be written as the sum of two abundant numbers
    //the value 0.
    int forrige = 0;
    for (int i = 1;i<=28123;i++){
        if (isAbundant(i)){
            if (2 * i <= 28123){
                tall[i - 1] = 0;
            }
            if (forrige + i <= 28123){
                tall[i - 1] = 0;
            }
        }
    }

    //All that's left should be summing all the numbers in the array.

    long sum = 0;
    for (int y = 0;y<28123;y++){
        sum += tall[y];
    }

    System.out.println(sum);    

}

public static boolean isAbundant(int n){
    int sumAvDivisorer = 0;
    for (int i = 1;i<n;i++){
        if (n % i == 0){
            sumAvDivisorer += i;
        }
    }

    if (sumAvDivisorer > n){
        return true;
    }
    else {
        return false;
    }
}
    } 
```

我这里的逻辑有问题吗？不是所有可以定义为两个丰富数之和的整数都变成0吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:54:22.360

这段代码没有意义：

```
//Then, give all the numbers that can be written as the sum of two abundant numbers
//the value 0.
int forrige = 0;
for (int i = 1;i<=28123;i++){
    if (isAbundant(i)){
        if (2 * i <= 28123){
            tall[i - 1] = 0;
        }
        if (forrige + i <= 28123){
            tall[i - 1] = 0;
        }
    }
} 
```

假设您想知道，对于循环中的每个 i，是否有两个数 j 和 k，它们都很丰富并且满足 j + k = i。

您的代码与它无关。此外，第二个`if`意义不大，`forrige`总是 0。

我会做什么。

1) 一个布尔数组 [0, 28123]。如果数字很丰富，则为真（上一步）。(*)

2) 另一个数组 [0, 28123]。如果该位置的数字是两个丰富数字的加，则为真。循环 i 从 1 到 28123，对于每个 i，循环 z 从 1 到 i/2（j <= i/2 或 k <= i/2）。对于每个 z，检查前一个数组中的 z 和 iz，如果两者都是 true，则将值设置为 true。

3) 循环前一个数组，添加数组中所有为真的索引。

或者，“丰富”的条件是否足够稀疏，您可以将 1) 替换为丰富的数字列表和它们的哈希集。因此，不是将 j 从 1 运行到 i/2，而是循环此列表直到到达 i/2（使用哈希集快速查找 ij 是否丰富）。

无论如何，这个问题的想法是预先计算您将一次又一次使用的值，而不是一次又一次地重复`isAbundant`调用相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:10:41.360

我会这样做：

*   制作一个包含所有丰富数字的数组。
*   将所有对加在一起。您可以使用嵌套`for`循环来做到这一点。
*   对于添加到小于或等于 的数字的每一对，`28123`将该对的总和添加到总和中。

# c++ - 交换集合的后缀和前缀

> ID：15466537
> 
> 赞同：0
> 
> 时间：2013-03-17T21:38:00.277
> 
> 标签：c++, c++11

我有一个数字列表`L`（在一般意义上，不是`std::list`），我也有`i`它是 中最小元素的索引`L`。我想交换由 index 分隔的两个分区`i`。我应该执行什么标准数据结构和什么操作才能尽可能高效地执行此操作（最好是在恒定时间内）？

`L`一个例子：让`9 6 -4 6 12`。最小值是`L[2] = -4`，所以`i = 2`。交换两个分区后，我想`L`成为`-4 6 12 9 6`.

该列表将非常大（最多 10 ^(3 个)元素），我还必须多次遍历它（在最坏的情况下最多 10 3 次遍历），因此由于缓存问题，使用^(不是)`std::list`一个好主意。另一方面，`std::vector`会使两个分区的交换变得困难。这是`std::deque`一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:42:57.717

你的问题有两个方面：

1-**恒定时间交换**：从概念上讲，就交换而言，最好的方法是[双向链表](http://en.wikipedia.org/wiki/Doubly_linked_list)（`std::list`）。

由于您的数据很大，因此节点将始终保留在内存中的初始位置，并且您只会更改一些恒定数量的指针来执行您提到的交换类型。

2-**局部性**：我们都知道内存中连续分配的空间对于缓存性能更好。这偏向`std::vector`。

**中间是什么？** 可通过自定义分配器分配的可调整大小的连续内存块。有很多方法可以设计这些。一个[例子](http://www.drdobbs.com/cpp/improving-performance-with-custom-pool-a/184406243)。

# xna - 连续碰撞检测

> ID：15466541
> 
> 赞同：0
> 
> 时间：2013-03-17T21:38:58.027
> 
> 标签：xna, collision-detection, game-engine

一个非常简单的问题，通过连续碰撞检测，我是否需要检查两个实体是否都在移动或只是两者中最快的一个？我在想只有两个中最快的一个需要检查，但我不太确定这是否正确。任何澄清都会很棒。

谢谢

# php - MySQL - 在同一张表中求和宽度相同的 ID

> ID：15466543
> 
> 赞同：0
> 
> 时间：2013-03-17T21:39:17.187
> 
> 标签：php, mysql

我希望通过同一个表中的相同 ID 将值总和到我的数据库中。数据库中的表：

```
| ID | Value_o | Value_t | Value_tt |
|  1 |   40    |    20   |   10     | 
```

询问：

```
SELECT SUM(Value_o) AS Value_o, SUM(Value_t) AS Value_t, SUM(Value_tt) AS Value_TT 
WHERE ID IN(1, 1) 
```

现在输出ID：

```
| Value_o | Value_t | Value_tt |
|   40    |    20   |   10     | 
```

但我想要：

```
| Value_o | Value_t | Value_tt |
|   80    |    40   |   20     | 
```

我想在没有 JOIN 的情况下得到这个输出。

谢谢！

PS。对不起我的英语不好：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:53:24.453

也许这就是你正在寻找的：

```
SELECT 
  SUM(Value_o) AS Value_o, 
  SUM(Value_t) AS Value_t, 
  SUM(Value_tt) AS Value_TT 
FROM
  (
  SELECT ID, Value_o, Value_t, Value_tt FROM Table1 
  UNION ALL 
  SELECT ID, Value_o, Value_t, Value_tt FROM Table1
  ) Table2 
WHERE ID IN(1, 1); 
```

[演示](http://sqlfiddle.com/#!2/65821/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:44:31.973

尝试这个：

```
SELECT SUM(Value_o) AS Value_o, SUM(Value_t) AS Value_t, SUM(Value_tt) AS Value_TT 
FROM TABLE
GROUP BY ID
HAVING ID = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:00:20.200

MySQL[`in`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)运算符不能以这种方式工作。即使您在集合中有多个值，它也不会复制结果的行。

如果您想多次获得所有行，则必须使用[`union all`](http://dev.mysql.com/doc/refman/5.5/en/union.html)并对其求和

```
SELECT SUM(Value_o) AS Value_o, SUM(Value_t) AS Value_t, SUM(Value_tt) AS Value_TT 
from (select * from mytable union all select * from mytable) t
WHERE ID IN (1) 
```

# ant - android 或 android.bat 的位置

> ID：15466544
> 
> 赞同：0
> 
> 时间：2013-03-17T21:39:19.407
> 
> 标签：ant

我安装了 cygwin、ant、android ndk 和 android sdk。我正在按照 slyvain 的书“android ndk”中的说明进行操作。我正在尝试执行以下步骤：

使用 android 命令（Windows 上的 android.bat）自动创建 Ant 构建文件和所有相关配置文件。这些文件描述了如何编译和打包 Android 应用程序：android update project –p。

我收到一条消息，android：`command not found.`

不知道为什么没有安装，或者不在路径中。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:41:12.550

它在`$ANDROID_SDK_HOME\tools`.

`$ANDROID_SDK_HOME`是您安装 Android SDK 的目录。

另外，请记住首先运行`SDK Manager`以获取至少一个 Android 构建目标。

# visual-studio-2010 - 将 Visual Studio 解决方案和项目文件转换为 DDK 构建

> ID：15466547
> 
> 赞同：0
> 
> 时间：2013-03-17T21:39:34.460
> 
> 标签：visual-studio-2010, visual-studio-2008, wdk

我知道在使用 DDK 构建项目时存在使用 Visual Studio 作为前端的产品（例如 VisualDDK），但我有完全相反的问题。

是否有工具可以获取现有的 Visual Studio`*.sln`和`*vcproj`文件并生成可与 DDK 一起使用的文件`dirs`？`sources`

我对 Visual Studio 2008 及更高版本的产品感兴趣。

# javascript - iframe 表单结果

> ID：15466558
> 
> 赞同：0
> 
> 时间：2013-03-17T21:41:19.630
> 
> 标签：javascript, jquery, ajax, html

我想做以下事情。

我有一个表单，我将提交给我的预订引擎，并希望在可能的情况下在新页面中或使用 Div 显示结果，就像基本上如果用户单击提交按钮它显示 Iframe 或其他页面一样。

我是这方面的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:44:40.500

在您的`form`-tag 中，尝试添加一个`target`属性：

*   `_blank`对于一个新窗口
*   框架提交的框架名称

如：

```
<form method="post" action="bookUrl" target="_blank">...</form> 
```

或者

```
<iframe name="formFrame"></iframe>
<form method="post" action="bookUrl" target="formFrame">...</form> 
```

# c++ - 同步工作线程

> ID：15466560
> 
> 赞同：4
> 
> 时间：2013-03-17T21:41:20.773
> 
> 标签：c++, multithreading, c++11, synchronization

我有一个场景，我正在尝试提出最佳同步方法。我们假设 C++11 中的 std::thread 存在，因此无需担心各种线程库之间的差异等。

场景是这样的。主线程线程 a 想要将任务分发给一堆工作线程。然后，在暂时发出最后的指令后，它需要等待所有线程完成它们的工作。我们不想加入他们，只是等待他们完成他们给定的任务。然后线程 a 必须分析从所有线程收集到的数据，然后向工作人员发送命令以重新开始该过程。

简而言之，就是这些步骤。

1.  线程 a 向所有工作线程发送命令 x。
2.  线程 a 等待所有工作人员完成。
3.  线程 a 进行处理。
4.  回到 1。

你会建议我用什么？简单的互斥锁？条件变量？两者的结合？任何关于如何构建同步以尽可能高效的提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:52:15.577

您有 n 个工作线程和一个主线程`a`，它们将任务委托给工作人员，并且必须等待他们完成这些任务，然后再分配给他们一批新的任务。

基本技术是使用屏障（如`boost::barrier`）来同步工作线程的结束和`a`.

屏障在 处初始化`n+1`。主线程`a`在屏障上等待，每个工作线程在其任务结束时执行相同的操作。当最后一个线程调用`wait`屏障时，所有线程都被唤醒，主线程可以继续工作。您可能希望添加第二个屏障来阻止工作线程，直到为它们分配新任务。

工作线程的主体可能类似于以下伪代码：

```
while (running) {
     startbarrier.wait(); // wait for main thread to signal start
     do_work();
     endbarrier.wait(); // signal end of work
 } 
```

同样的事情也可以用信号量来实现。信号量和屏障都可以用互斥锁和条件变量来实现。

有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/15252292/extend-the-life-of-threads-with-synchronization-c11)。

# asp.net-mvc - 为 N 层 Web 应用程序构建 WebAPI - 错误处理的适当做法？

> ID：15466566
> 
> 赞同：0
> 
> 时间：2013-03-17T21:41:43.800
> 
> 标签：asp.net-mvc, web-applications, asp.net-mvc-4, asp.net-web-api

我有一个包含以下层的 Web 应用程序：

1.  客户
2.  网络API
3.  服务
4.  存储库
5.  核

我不确定在哪里放置错误处理。在 webAPI 控制器中，我应该只使用 try/catch 语句吗？可以在服务/存储库代码中抛出错误吗？除了一些友好的错误消息之外，我试图避免将任何数据传递给客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:49:27.923

业务错误应该在您的服务层中处理（例如，用户名之类的东西已经存在）。将 try/catch 语句放在所有控制器操作中可能会很快变得繁琐并导致重复代码。您可以查看[`custom error handling article`](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)提供了在 Web API 中处理各种错误的示例，例如自定义错误过滤器（从[`ExceptionFilterAttribute`](http://msdn.microsoft.com/en-us/library/system.web.http.filters.exceptionfilterattribute%28v=vs.108%29.aspx)类派生并覆盖`OnException`方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:07:36.323

您可以创建一个自定义异常类型，该类型将被 ExceptionFilter 或 http 模块拦截。它将设置 HTTP 状态代码和描述。可选地，它还可以返回带有错误数据的序列化对象。

其他异常类型将返回状态码 500。

# javascript - 无法在节点 js 中安装依赖项

> ID：15466572
> 
> 赞同：5
> 
> 时间：2013-03-17T21:42:24.440
> 
> 标签：javascript, node.js, json, npm, npm-install

我正在学习 node js，我刚刚做了一个教程，在其中我试图创建一个聊天，一切都很好，直到我陷入教程的一个步骤。我决定下载教程的源代码来运行服务器，看看有什么问题。我在这个文件夹中有一个名为 curso 的文件夹我有两个文件夹，一个是 chatnodejs，另一个是 sourcechatjs；在聊天 nodejs 我有 packasge.json 和服务器 js。我跑了`npminstall`，一切都很好，但是当我下载聊天源时，我将它放在 sourcechatjs 中，我打开终端并运行`npm install`并得到了这个错误：

```
jhonnatans-MacBook-Pro:chat jhonnatan$ npm install
npm ERR! install Couldn't read dependencies
npm ERR! Failed to parse json
npm ERR! Unexpected token /
npm ERR! File: /Users/jhonnatan/Documents/Cursoseccion2/clasenodejs/chat/package.json
npm ERR! Failed to parse package.json data.
npm ERR! package.json must be actual JSON, not just JavaScript.
npm ERR! 
npm ERR! This is not a bug in npm.
npm ERR! Tell the package author to fix their package.json file. JSON.parse

npm ERR! System Darwin 12.3.0  
npm ERR! command "node" "/usr/local/bin/npm" "install"
npm ERR! cwd /Users/jhonnatan/Documents/Cursoseccion2/clasenodejs/chat
npm ERR! node -v v0.10.0
npm ERR! npm -v 1.2.14
npm ERR! file /Users/jhonnatan/Documents/Cursoseccion2/clasenodejs/chat/package.json
npm ERR! code EJSONPARSE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/jhonnatan/Documents/Cursoseccion2/clasenodejs/chat/npm-debug.log
npm ERR! not ok code 0 
```

这就是我的 JSON 的样子：

```
{
    // Aca definiremos nuestro package.json, lo primero es el nombre
    "name": "curso",
    // Luego la version del mismo
    "version": "0.0.1",
    // Ahora las dependencias, normalmente podrias hacer esto con npm pero es mucho mejor tener claro y ejecutar estricatemente las necesaria
    "dependencies": {
        // Express el cual se encargara de ser nuestro framework en node
        "express": "",
        //los tipos de vista, jade parecido al que usa ruby on rails y swig parecido al que usa django
        "jade": "",
        "swig": "",
        // El que se encargara de renderizar los templates en un contexto
        "consolidate": "",
        // y por ultimo el encargado de manejar los sockets :)
        "socket.io": ""
    }
} 
```

我一直在尝试很多，但说真的，我不知道可能是什么问题。如果有人可以让我知道问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T21:45:09.807

[JSON](http://www.json.org/)文件中不能有注释。

删除注释行`// ...`，它应该可以工作。

# web-services - 嵌入谷歌/微软excel电子表格

> ID：15466581
> 
> 赞同：0
> 
> 时间：2013-03-17T21:43:19.783
> 
> 标签：web-services, excel, embed, google-sheets

我想嵌入 Microsoft Excel 或 Google Docs 电子表格或网络应用程序，插件可用于在网站中创建具有相同 Excel 功能的电子表格。

我已经看了几个小时来寻找一些方法来做到这一点，但似乎所有这些方法都可以嵌入它们而不是编辑。

基本上，我需要的是能够在我的网站上发布电子表格，但可以选择直接从我的网站进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:48:09.877

创建一个 Google 电子表格并共享它。从电子表格菜单：“谁有权访问”下的“文件”->“共享”单击“更改”链接。然后您可以选择“公开...”或“任何有链接的人”。然后选择该选项，以便人们可以对其进行编辑。

# java - 背景每秒都在变化

> ID：15466589
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:44:19.010
> 
> 标签：java, android

我正在尝试每秒更改背景，这是我的代码：package com.example.splasher;

```
import java.lang.reflect.Field;
import java.util.Random;
import java.util.Timer;
import java.util.TimerTask;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Typeface;
import android.util.Log;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;

public class Views extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.view);
            final ScrollTextView scrolltext=(ScrollTextView) findViewById(R.id.scrolltext);
                if(MainActivity.bold.isChecked())
                    {
                    scrolltext.setTypeface(null, Typeface.BOLD);
                    };
                if(MainActivity.italic.isChecked())
                    {
                    scrolltext.setTypeface(null, Typeface.ITALIC);
                    };
                if((MainActivity.italic.isChecked())&&(MainActivity.bold.isChecked()))
                    {
                    scrolltext.setTypeface(null, Typeface.BOLD_ITALIC);
                    };
            scrolltext.setTextSize(Integer.parseInt(MainActivity.tSize[MainActivity.Size.getSelectedItemPosition()]));
            scrolltext.setText(MainActivity.text);
            scrolltext.setTextColor(Integer.parseInt(MainActivity.colour[MainActivity.TextColour.getSelectedItemPosition()]));
            scrolltext.startScroll();
            scrolltext.setBackgroundColor(Integer.parseInt(MainActivity.colour[MainActivity.BackgroundColour.getSelectedItemPosition()]));
                Thread thread = new Thread()
                    {
                    public void run()
                        {
                        if(MainActivity.random.isChecked())
                            {
                            int delay = 0; // delay for 5 sec.
                            int period = 1000; // repeat every sec.
                            Timer timer = new Timer();
                            timer.scheduleAtFixedRate(new TimerTask() {
                            int n=1;
                                public void run() {if (n==9)n=1;
                                scrolltext.setBackgroundColor(Integer.parseInt(MainActivity.colour[n]));
                                }
                            }, delay, period);
                                        /*int n=1;
                                        boolean constant=true;
                                        while (constant==true){
                                        if (n==10) n=1;
                                        //   int randInt = new Random().nextInt(2);
                                        //   scrolltext.setBackgroundColor(Integer.parseInt(MainActivity.colour[randInt]));
                                        scrolltext.setBackgroundColor(Integer.parseInt(MainActivity.colour[n]));
                                        n=n+1;
                                        try
                                        {
                                        Thread.sleep(2000); // 1 second
                                        } catch (Exception e)
                                        {
                                        e.printStackTrace();
                                        }
                                        }*/ 
                            }
                        }
                    };
                thread.start();
                                        //      TextView textview=(TextView) findViewById (R.id.textView1); 
                                        //          textview.setText(MainActivity.text);
                                        //  textview.setTextColor(Integer.parseInt(MainActivity.colour[MainActivity.TextColour.getSelectedItemPosition()]));
                                        //          textview.setBackgroundColor(Integer.parseInt(MainActivity.colour[MainActivity.BackgroundColour.getSelectedItemPosition()]));
                                        //     textview.setTextSize(Integer.parseInt(MainActivity.tSize[MainActivity.Size.getSelectedItemPosition()]));
                                        //    textview.setSelected(true);
    }
} 
```

但它强制关闭。Logcat 显示：FATAL EXCEPTION: Timer-0；android.view.ViewRootŲcalledfromwrongThreadException：只有创建视图层次结构的原始威胁才能触及其视图。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:48:21.070

您不能在与`scrolltext.setBackgroundColor()`所谓的`UI thread`（基本上是同一个线程`onCreate()`运行的线程）分开的线程中对 UI 元素（如 call ）进行操作。

要解决您的问题，请使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。创建一个类字段：

```
Handler handler = new Handler(); 
```

并在您的线程中将所有 UI 操作放入 Handler 调用中：

```
handler.post(new Runnable() {
    @Override
    public void run () {
      // All UI operations, like scrolltext.setBackgroundColor()
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:46:56.887

你的问题是

```
scrolltext.setBackgroundColor(Integer.parseInt(MainActivity.colour[n])); 
```

您正在`UI`从工作线程更新（它不在 UI 线程上运行），这是不允许的。只有 Main(UI) 线程可以使用 UI 进行操作。

因此，您需要将其更改为[`runOnUiThread()`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)or [`Handler`](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html#handler)。

## 例子：

```
runOnUiThread(new Runnable(){
   public void run() {
      // do your stuff
   }
}); 
```

[处理程序示例](http://marakana.com/forums/android/examples/500.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T21:52:05.170

### 只是想在这里做出贡献，但我在 android 方面的经验为零，所以要小心；p

异常消息似乎表明只能在主线程上更改视图。当您正在运行更改新线程上的视图的代码时，它不喜欢它。

您知道 Android 中使用的主要 Event-Dispatcher 线程吗？类似于在 EDT 上更新 SWINGs GUI 的方式。如果是这样，请寻找一种方法来告诉*主*绘图线程进行最终更新。

在摇摆中，它看起来像：

```
EventQueue.invokeLater(new Runnable(){
              public void run(){
    }
} 
```

希望这有一些意义。

# c++ - 为什么 MSVC 编译这个模板函数失败？

> ID：15466594
> 
> 赞同：12
> 
> 时间：2013-03-17T21:44:39.937
> 
> 标签：c++, templates, visual-c++

我在将一些代码移植到 MSVC 时遇到了问题，这让我很困惑。据我所知，代码应该是合法的，Clang 编译它就好了。

我把它缩小到以下几点：

```
enum E {
    x
};

template <typename T>
struct traits {
    static const E val = x;
};

template <E e>
struct S {
    S(){};
};

template <typename T>
S<traits<T>::val> foo(T t);

int main() {
    char c = 0;
    foo(c);
} 
```

请注意，编译后，代码预计会产生链接器错误（我剥离了函数的定义`foo`以保持样本最小化），但据我所知，它*应该可以干净地编译。*

但是，MSVC 给了我这个错误：

> 错误 C2893：无法专门化函数模板 'S::val> foo(T)'

所以我的问题：

*   MSVC 在拒绝代码方面是否正确？（如果是这样，为什么？）
*   如果没有，任何人都可以缩小它做错的范围吗？例如，这是他们根本没有实现的语言功能（例如模板的两阶段名称查找），还是在他们声称支持的功能的实现中“只是”一个简单的错误？

我已经在 VC++ 2010 和 2012 上重现了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T22:23:41.020

在自己运行了一些测试之后，这似乎是 MSVC 中的编译器错误。虽然它适用于 GCC，但当您尝试`traits<T>::val`在模板参数中使用`S< E e >`返回时，MSVC 会给出神秘且无用的编译器错误（与您的问题中的错误相同）。

有趣的是，当你`S< E e >`改为取整数时，它会起作用。考虑这个例子，与你的相同，但命名不同：

```
enum E {
    x
};

template <typename T>
struct traits {
    static const E val = x;
};

template <E e>
struct S {
    S(){};
};

template <typename T>
S< traits<T>::val > tricky(T t) {
    return S< traits<T>::val > ();
};

int main() {
    char thiskidwhowalksaround = 0;
    S<x> s = tricky( thiskidwhowalksaround );
} 
```

现在，让我们改变*一件事*：

```
template <int e> // int instead of E
struct S {
    S(){};
}; 
```

然后程序为我完美地编译（链接和运行）。如果你也恢复到原来的，然后`E`直接传入一个值，比如：

```
template <typename T>
S< x > tricky(T t) { 
// ^ here
    return S< x > (); // <-- here
}; 
```

然后程序编译文件。MSVC 在尝试执行以下操作时会遇到麻烦：

`traits<T>::val`

`val`任何类型的枚举在哪里。我有 99% 的把握这是编译器本身的缺陷。这似乎是完全格式良好的 C++，所以我不能说 GCC 通过让原始代码片段工作而做错了什么或扩展。因此，我能收集到的最好的结果是，与同行相比，MSVC 的编译器鲁棒性再次不足。

你可以在这里停止阅读，因为现在我要花一点时间来抱怨 MSVC 编译器。

`begin<rant>` 不是 VC++ 团队不好或 C++ 不好，而是从我收集到的编译器团队和微软的标准库团队——截至撰写本文时——与其他部门相比***微不足道。***令我恼火的是，如此基础和重要的语言以及 MS 行业核心的一部分，其人力相对较少，以至于它无法跟上我在短暂的一生中发现的世界上发展最慢的标准之一。我当然不是在抨击在 VC++ 团队中工作的人，但我对为什么没有更多人致力于使 C++ 不仅达到速度，而且使编译器更好地工作并且与其他人一样好，我深感困惑产品领域。 `end<rant>`

# c - 此循环在满足条件时不结束

> ID：15466596
> 
> 赞同：0
> 
> 时间：2013-03-17T21:44:56.490
> 
> 标签：c, while-loop

我正在尝试编写一个程序来获取一个字符，然后检查并打印它是大写还是小写。然后我希望它继续循环，直到用户输入应该产生消息的“0”。不起作用的是底部的while条件，条件似乎永远不会满足。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int ch,nope;    // Int ch and nope variable used to terminate program
    do       // start 'do' loop to keep looping until terminate number is entered
    {
        printf("Enter a character : ");             // asks for user input as a character
        scanf("%c",&ch);                            // stores character entered in variable 'ch'
        if(ch>=97&&ch<=122) {                       // starts if statement using isupper (in built function to check case)
            printf("is lower case\n");
        } else {
            printf("is upper case\n");
        }
    }
    while(ch!=0);                                     // sets condition to break loop ... or in this case print message
    printf("im ending now \n\n\n\n\n",nope);     // shows that you get the terminate line

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:47:25.207

尝试`while(ch!=48);`48 是 char '0' 的十进制数。正如 Maroun Maroun 提到的，while(ch!='0'); 更容易理解。

如果您不希望在用户输入“0”时显示大写消息，您可以执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    unsigned char ch,nope;    // Int ch and nope variable used to terminate program
    while (1)
    {
        printf("Enter a character : ");             // asks for user input as a character
        scanf("%c",&ch);                            // stores character entered in variable 'ch'
        if(ch==48) {
            break;
        }
        if(ch>=97&&ch<=122) {                      // starts if statement using isupper (in built function to check case)
            printf("is lower case\n");
        } else {
            printf("is upper case\n");
        }

    }
    printf("im ending now \n\n\n\n\n",nope);     // shows that you get the terminate line

} 
```

# ajax - 使用 JQuery Ajax Post 调用呈现简单的 ASP.NET MVC PartialView

> ID：15466597
> 
> 赞同：13
> 
> 时间：2013-03-17T21:45:02.527
> 
> 标签：ajax, asp.net-mvc, jquery, partial-views

我的 MVC 控制器中有以下代码：

```
[HttpPost]
public  PartialViewResult GetPartialDiv(int id /* drop down value */)
{
    PartyInvites.Models.GuestResponse guestResponse = new PartyInvites.Models.GuestResponse();
    guestResponse.Name = "this was generated from this ddl id:";

    return PartialView("MyPartialView", guestResponse);
} 
```

然后在我的视图顶部的我的javascript中：

```
$(document).ready(function () {

$(".SelectedCustomer").change( function (event) {
    $.ajax({
        url: "@Url.Action("GetPartialDiv/")" + $(this).val(),
        data: { id : $(this).val() /* add other additional parameters */ },
        cache: false,
        type: "POST",
        dataType: "html",
        success: function (data, textStatus, XMLHttpRequest) {
            SetData(data);
        }
    });

});

    function SetData(data)
    {
        $("#divPartialView").html( data ); // HTML DOM replace
    }
}); 
```

最后是我的html：

```
 <div id="divPartialView">

    @Html.Partial("~/Views/MyPartialView.cshtml", Model)

</div> 
```

本质上，当我的下拉标签（有一个名为 SelectedCustomer 的类）触发了 onchange 时，它​​应该触发 post 调用。它做了什么，我可以调试到我的控制器中，它甚至可以成功返回 PartialViewResult ，但是没有调用成功的 SetData() 函数，而是在 Google CHromes 控制台上收到 500 内部服务器错误，如下所示：

> POST http://localhost:45108/Home/GetPartialDiv/1 500（内部服务器错误） jquery-1.9.1.min.js:5 b.ajaxTransport.send jquery-1.9.1.min.js:5 b.extend .ajax jquery-1.9.1.min.js:5 (匿名函数) 5:25 b.event.dispatch jquery-1.9.1.min.js:3 b.event.add.v.handle jquery-1.9.1 .min.js:3

任何想法我做错了什么？我已经用谷歌搜索了这个死了！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-17T21:48:00.157

这行不正确：`url: "@Url.Action("GetPartialDiv/")" + $(this).val(),`

`$.ajax` `data`属性已包含在路由值中。`url`所以只需在属性中定义 url 。`data`在属性中写入路由值。

```
$(".SelectedCustomer").change( function (event) {
    $.ajax({
        url: '@Url.Action("GetPartialDiv", "Home")',
        data: { id : $(this).val() /* add other additional parameters */ },
        cache: false,
        type: "POST",
        dataType: "html",
        success: function (data, textStatus, XMLHttpRequest) {
            SetData(data);
        }
    });
}); 
```

# tcp - TCP 数据包转储重传检测

> ID：15466599
> 
> 赞同：4
> 
> 时间：2013-03-17T21:45:04.657
> 
> 标签：tcp, wireshark, packet-sniffers

我想知道，像wireshark这样的程序如何从TCP流中的重传中检测到重复。我查看了有关 TCP 的 RFC，但还不太清楚它是如何工作的。我非常感谢一个清晰的解释。

让我感到困惑的一个示例情况如下：

```
*C: 1227 + len = 1687
 C: 1847+ len = 2299
 S: ACK 2299
*C: 2299+len = 2751
*C: 2751+len = 3203
 S: ACK 2751 
```

其中 * 表示具有重复有效负载的数据包。Wireshark 和/或 TCP 如何检测和丢弃重复项？

# c - 在C中打印双向链表的下一个和上一个值

> ID：15466601
> 
> 赞同：-1
> 
> 时间：2013-03-17T21:45:07.573
> 
> 标签：c, list, printing

我在 c 中创建一个双向链表。我想打印出我的上一个和下一个值来检查我的双向链表是否正确。

```
#include <stdio.h>
#include "dubblelist.h"
#include <string.h>
#include <stdlib.h>

void add(int number);
void print();
void add_to(int number);
void append(int number);
void main(){

int i = 1;

  add(1);
  add(2);
  add(3);
  print();

}
void add_to(int number){
    struct node *head;
    head=LINK;
    head = (struct node *)malloc(sizeof(struct node));
    head->d = number;
    head->prev = NULL;
    head->next = NULL;

    if(LINK == NULL)
    {
        LINK = head;
        head -> next = NULL;
        head -> prev = NULL;
    }else{
        //head -> next = LINK;
        //head -> prev = LINK;
        //LINK = head;
    }

}
//add other values
void append(int number){
    struct node *kop, *right;

    printf("add_new_value\n");
    kop = (struct node *)malloc(sizeof(struct node));
    kop -> d = number;
    right = LINK; 

    while(right->next != NULL)
        right=right->next;

        right->next =kop;
        right=kop;
        right->next=NULL;
        right->prev=NULL;

}
//add first value 
void add(int number){
    struct node *head;

    head=LINK;
    if(head==NULL){
    printf("List is leeg!\n");
    add_to(number);
    }else{
    printf("List bevat item\n");
    append(number);
    }
}

void print(){
    printf("----------------------PRINT--------------------------\n");
    struct node *n;
    int *p;

    while(n!=NULL){
    //next_value = n->next;
    printf("%d",n->d);

    //printf("%d",n->next);
    //printf("%d",n->next);
    //printf("||\n ");
    n = n->next;
    }
} 
```

.h 文件

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef int DATA;
struct node{
    DATA d;
    struct node *prev;
    struct node *next;
} *LINK; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:50:53.337

```
void printNode(struct *node){
    if (node) {
       int pp = node->prev ? node->prev->d : -1;
       int nn = node->next ? node->next->d : -1;
       printf("[p:%d] [c:%d] [n:%d]", pp, node->d, nn);
    } else {
       printf("(null)");
    }
}

void print(struct node *head){
    printf("----------------------PRINT--------------------------\n");
    struct node *n = head;
    while(n!=NULL){
      printNode(n);
    }
} 
```

# c# - 在 Metro 应用程序中录制音频

> ID：15466605
> 
> 赞同：0
> 
> 时间：2013-03-17T21:45:35.077
> 
> 标签：c#, microsoft-metro, voice-recording

我需要一个基本示例来了解如何在 Metro 应用程序 (C#) 中录制语音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:54:24.903

搜索`MediaCapture API`以查找相关信息。

MSDN`MediaCapture`类参考： http: [//msdn.microsoft.com/library/windows/apps/BR241124 ?cs-save-lang=1&cs-lang=csharp#code-snippet-1](http://msdn.microsoft.com/library/windows/apps/BR241124?cs-save-lang=1&cs-lang=csharp#code-snippet-1)

有一个名为 的方法`StartRecordToStreamAsync`，它以`MediaEncodingProfile`参数为参数。`MediaEncodingProfileCreateMp3()`您可以使用静态方法为仅 MP3 捕获创建配置文件：

```
var profile = MediaEncodingProfileCreateMp3(AudioEncodingQuality.High) 
```

# autotools - 是否应该（以及如何做到）在配置脚本中包含折叠路径？

> ID：15466606
> 
> 赞同：0
> 
> 时间：2013-03-17T21:45:42.470
> 
> 标签：autotools, autoconf, include-path

在我的`configure/configure.ac`中，我打了多个`PKG_CHECK_MODULES`电话。他们中的大多数返回相同`-I path:-I/usr/local/include`，也相同`-L path: -L/usr/local/lib.`

我会说这`-I path`没有任何区别，因为 gcc 一次编译一个源。编译多个源时可能会有所不同？

但是，它可能确实对库产生了影响，因为以下构造是可能的：

> -L/usr/local/lib -lX11 -L/usr/lib -lcurses -L/opt/lib -lcups

我猜每一个都会`-L option`改变当前的顶级库搜索路径。

这一切都正确吗？我应该忽略`-I`冗余，还是尝试折叠路径？如何折叠它们？

（PS。请不要对 , 中的字母感到困惑：第一个是大写字母`-I`，我要询问的包含路径选项）`-l``"i"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:21:45.030

每个`-L`选项实际上只是在当前搜索路径的末尾添加了一些内容，这意味着链接到不同位置的不同库是一个很难产生通用解决方案的问题。如果您在 A 和 B 两个位置有相同的两个库，并且您想要 A 中的第一个库和 B 中的第二个库，那么使用`-L`选项来执行此操作会非常烦人。您最终不得不`.so`在链接行中包含文件的完整路径。

换句话说，在：

```
-L/usr/local/lib -lX11 -L/usr/lib -lcurses -L/opt/lib -lcups 
```

libcups 将首先被搜索`/usr/local/lib`，然后`/usr/lib`是 ，然后是`/opt/lib`。如果 中有一个 libcups `/usr/local/lib`，你仍然会得到错误的。唯一可以确定的方法是替换`-L/opt/lib -lcups`为`/opt/lib/libcups.so`（它不那么便携；例如，它不适用于 HP-UX 或 AIX）。

要回答您的问题，大多数情况下人们不会费心尝试清理冗余。这种编译命令行在使用多个库的项目中相当典型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:28:59.863

您可以修改`PKG_CHECK_MODULES`以将必要的标志放入`LDFLAGS`and`CPPFLAGS`而不是`FOO_LIBS`and`FOO_CFLAGS`并让它检查结果是否`pkg-config`是多余的，如果已经存在则不要添加它们。这样做时，明智的做法是添加一些 的调用`AC_CHECK_LIB`来验证`pkg-config`. 这有一个额外的好处，那就是基本上清理你所有的`Makefile.am`，因为它们不再需要显式引用`@FOO_LIBS@`and `@FOO_CFLAGS@`。但是，停止使用可能更容易`PKG_CHECK_MODULES`。（参见[PKG_CHECK_MODULES 是否认为有害？](https://stackoverflow.com/questions/10220946/pkg-check-modules-considered-harmful)）

# linux - 在 Lisp/SBCL 中使用 uinput 内核模块

> ID：15466607
> 
> 赞同：2
> 
> 时间：2013-03-17T21:45:48.577
> 
> 标签：linux, common-lisp, sbcl

目前有什么方法可以在 SBCL 中使用 uinput 内核模块吗？我自己找不到任何图书馆（除了一些日本人[？]家伙的github：[https](https://github.com/quek/info.read-eval-print.cl-mayu/blob/master/mayu.lisp) ://github.com/quek/info.read-eval-print.cl-mayu/blob/master/mayu.lisp ）所以我想知道是否有人对此有所了解。

我应该使用某种特定于 SBCL 的包吗？我是否应该使用 CFFI 之类的东西为此生成自己的绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T15:23:55.473

我认为可以肯定地说没有可以使用的成品库。但是，该 github 存储库似乎是寻找制作自己的想法的好地方。

# datetime - VB脚本重命名文件添加日期和时间来命名？

> ID：15466608
> 
> 赞同：0
> 
> 时间：2013-03-17T21:45:57.033
> 
> 标签：datetime, vbscript, copy, rename

基本代码：由 Ekkehard.Horner 编写并由我改编我找到了代码，谢谢大家。调暗 oShell、频率、sFile 调暗 goFS ：设置 goFS = CreateObject("Scripting.FileSystemObject") 调暗 oSrcDir ：设置 oSrcDir = goFS.GetFolder("C:\Temp1") 调暗 sDstDir ：sDstDir = "C:\Temp2" 调暗 oFile , nInc, sNFSpec

```
Set oShell = CreateObject("WScript.Shell")
Set fso = CreateObject("Scripting.FileSystemObject") 
Set f = fso.GetFolder("C:\Temp1") 
Set fc = f.Files  

frequency  = 10 * 1000 
Const cnMax = 99

WScript.Sleep frequency

 theDate = Year(Now()) _
       & Right(String(2,"0") & month(Now()),2) _ 
       & Right(String(2,"0") & Day(Now()),2) 

 For Each f1 in fc 
  If right(lcase(f1.name),4) = ".pdf" then 
 theBaseName = fso.GetBaseName(f1.name)
 theExtension = fso.GetExtensionName(f1.Name) 
 f1.Move(fso.GetParentFolderName(f1.path) & "\" & theBaseName & "_" & EID & "_"    &          theDate & "." & theExtension) 
  End If
  Next

 For Each oFile In oSrcDir.Files
 If right(lcase(oFile.name),4) = ".pdf" Then 
  nInc = 0
  sNFSpec = getNewFSpec(oFile.Name, sDstDir, nInc)
  Do While goFS.FileExists(sNFSpec) And nInc <= cnMax
     sNFSpec = getNewFSpec(oFile.Name, sDstDir, nInc)
 Loop
If nInc > cnMax Then
  Else
   oFile.Move sNFSpec
End If

End If
Next
Wend

}

Dim oShell, frequency, sFile
Dim goFS    : Set goFS    = CreateObject("Scripting.FileSystemObject")
Dim oSrcDir : Set oSrcDir = goFS.GetFolder("C:\Temp1")
Dim sDstDir : sDstDir     = "C:\Temp2"
Dim oFile, nInc, sNFSpec

Set oShell = CreateObject("WScript.Shell")
Set fso = CreateObject("Scripting.FileSystemObject") 
Set f = fso.GetFolder("C:\Temp1") 
Set fc = f.Files  

frequency  = 10 * 1000 
Const cnMax = 99

WScript.Sleep frequency

 theDate = Year(Now()) _
       & Right(String(2,"0") & month(Now()),2) _ 
       & Right(String(2,"0") & Day(Now()),2) 

 For Each f1 in fc 
  If right(lcase(f1.name),4) = ".pdf" then 
 theBaseName = fso.GetBaseName(f1.name)
 theExtension = fso.GetExtensionName(f1.Name) 
 f1.Move(fso.GetParentFolderName(f1.path) & "\" & theBaseName & "_" & EID & "_"    &          theDate & "." & theExtension) 
  End If
  Next

 For Each oFile In oSrcDir.Files
 If right(lcase(oFile.name),4) = ".pdf" Then 
  nInc = 0
  sNFSpec = getNewFSpec(oFile.Name, sDstDir, nInc)
  Do While goFS.FileExists(sNFSpec) And nInc <= cnMax
     sNFSpec = getNewFSpec(oFile.Name, sDstDir, nInc)
 Loop
If nInc > cnMax Then
  Else
   oFile.Move sNFSpec
End If

End If
Next
Wend

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:34:35.680

最简单的解决方案是从另一个脚本运行您的任务，该脚本本身“永远”运行（抽象）。

```
Dim oShell, frequency, sFile

Set oShell = CreateObject("WScript.Shell")
frequency  = 10 * 1000  '10 Seconds (just for example)
sFile      = "task.vbs" 'the script you want to run

While True  'make infinite cycle
    WScript.Sleep frequency
    oShell.Run sFile
Wend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:04:36.717

[Panayot Karabakalov](https://stackoverflow.com/a/15467604/1630171)提出的解决方案也可以集成到现有脚本中：

```
'...

While True
  For Each oFile In oSrcDir.Files
    '...
  Next
  WScript.Sleep 30000 'milliseconds
Wend

'... 
```

另一种变体是使用无条件`Do ... Loop`而不是`While True ... Wend`：

```
'...

Do
  For Each oFile In oSrcDir.Files
    '...
  Next
  WScript.Sleep 30000 'milliseconds
Loop

'... 
```

# cakephp - AuthComponent userModel 仍然执行用户登录

> ID：15466611
> 
> 赞同：0
> 
> 时间：2013-03-17T21:46:01.403
> 
> 标签：cakephp

在我尝试使用谷歌搜索找到解决方案后，我仍然没有找到任何对我有帮助的东西。问题很简单，我想使用另一个模型进行用户认证。手册向我们展示的方式，不知何故，行不通。

我的 AppController 如下所示：

```
public $components = array(
        'Auth',
        'DebugKit.Toolbar'
    );

    public function beforeFilter()
    {
        parent::beforeFilter();
        if (isset($this->request->params["intranet"]) && $this->request->params["intranet"] == 1) {
            $this->Auth = array(
            "loginAction" => array(
                "intranet" => true,
                "controller" => "employees",
                "action" => "login"
            ),
            "authenticate" => array(AuthComponent::ALL => array("userModel" => "Employee"))
        );
            $this->layout = "intranet";
        }
    } 
```

我打开什么 url 无关紧要，CakePHP 总是将我重定向到 /users/login。当然，我在控制器中运行 parent::beforeFilter()。

**编辑：**好吧，好像我错过*了 userModel*，*loginAction*似乎是正确的关键字，但是在我将其更改为*array("controller" => "employees", "action" => "login")*之后它仍然将我重定向到 /用户/登录...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:02:07.390

哦，天哪，我太笨了……我猜大多数程序员在读完这篇文章后已经有了脸，但是对于可能遇到同样问题的新 CakePHP/PHP 开发人员来说：

在上面的代码中，我用数组覆盖了 $this->Auth。解决方案：

```
$this->Auth->loginAction = array(
                "intranet" => true,
                "controller" => "employees",
                "action" => "login"
            );
            $this->Auth->authenticate = array(AuthComponent::ALL => array("userModel" => "Employee")); 
```

# c - 小写windows.h和大写windows.h的区别？

> ID：15466613
> 
> 赞同：18
> 
> 时间：2013-03-17T21:46:04.583
> 
> 标签：c, winapi

`<windows.h>`小写和大写`<Windows.h>`标题有什么区别？我正在阅读一些关于 Win32 编程的旧教程，它们都使用小写的“w”。代码编译良好，但 VS 2012 自动完成功能仅列出`<Windows.h>`标题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-17T22:21:43.517

Windows 上的文件系统不区分大小写，因此在 Windows 上编译时任何一个都可以工作。但是，例如，如果您要在 Linux 上使用 MinGW 交叉编译器进行编译，则情况很重要。

MinGW`windows.h`标头似乎总是小写。

`Windows.h`微软工具提供的文件已经使用了多种案例。

*   旧的 VC++ 安装（VC++98 和更早版本）似乎可以安装`WINDOWS.H`- 全部大写
*   较新的 VC++ 安装和 Windows SDK 似乎使用`Windows.h`
*   一些移动设备 SDK（PocketPC 或 Windows mobile）使用`windows.h`- 全部小写。

由于`windows.h`将始终在 Windows 和 Linux 交叉编译上工作，`#include <windows.h>`如果我考虑过，我会使用它。在回答这个问题之前，我不记得做了什么。

I wouldn't worry about this too much. Even if the capitalized form finds its way onto a Linux MinGW build, an easy (if maybe annoying) fix is to create a `Windows.h` file that just turns around and includes `windows.h`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-17T21:48:58.310

没有区别，也不可能因为 Windows (NTFS) 上的文件名不区分大小写。

* * *

实际上，根据[文件名在 NTFS 卷](http://support.microsoft.com/kb/100625)上区分大小写，NTFS 有两种不同的模式，其中一种区分大小写：

> NTFS 支持两种略有不同的操作模式，可以由与 NTFS 交互的应用程序的子系统选择。第一个是完全区分大小写的，如果要选择磁盘上的文件，则要求应用程序提供的文件名与存储在磁盘上的名称匹配，包括大小写。第二种操作模式是保留大小写但不区分大小写。这意味着即使提供的名称与存储在磁盘上的名称不同，应用程序也可以选择磁盘上的文件。请注意，两种模式都会保留用于创建文件的大小写。此处提到的行为差异仅适用于应用程序需要定位现有文件的情况。POSIX 利用完全区分大小写模式，而 MS-DOS、WOW 和 Win32 子系统使用不区分大小写模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-17T21:48:34.400

这些是完全相同的文件 Windows 文件系统不区分大小写

# ios - 为什么这个 NSDate 是当前日期而不是从选择器中选择的日期？

> ID：15466614
> 
> 赞同：0
> 
> 时间：2013-03-17T21:46:13.457
> 
> 标签：ios, objective-c

目标是让用户设置一个截止日期并将这个截止日期保存到一个对象中。

这是对象的 saveListItem 方法：

```
+ (void)saveListItem:(PFUser *)theUser withName:(NSString *)theListItem withDate:(NSDate *)theDueDate
{
    PFObject *listObject = [[PFObject alloc] initWithClassName:@"ListItem"];
    [listObject setObject:[PFUser currentUser] forKey:@"author"];
    [listObject setObject:theListItem forKey:@"listName"];
    [listObject setObject:theDueDate forKey:@"dueDate"];
    [listObject save];
    NSLog(@"%@", listObject);

} 
```

这里是它的名称：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *saveDate = [[UIBarButtonItem alloc]
                                 initWithTitle:@"Save Date"
                                 style:UIBarButtonItemStyleDone
                                 target:self
                                 action:@selector(saveList:)];
    self.navigationItem.rightBarButtonItem = saveDate;
    pick = [[UIDatePicker alloc] init];
    [pick setFrame:CGRectMake(0,200,320,120)];
    [pick addTarget:self action:@selector(updateDateLabel:) forControlEvents:UIControlEventValueChanged];
}

-(IBAction)saveList:(id)sender {

    [ListItemObject saveListItem:[PFUser currentUser] withName:listFieldText withDate:pick.date];
}

-(IBAction)updateDateLabel:(id)sender {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterLongStyle];
    [formatter setTimeStyle:NSDateFormatterMediumStyle];
    dateLabel.text = [formatter stringFromDate:pick.date];
} 
```

我检查了日期选择器的参考出口，它被设置为选择。

正在保存的对象是当前日期，而不是选择器上选择的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:21:20.527

您的代码没有做错任何事情。

但是，这是最坏的修复情况，

```
-(void)updateDateLabel:(id)sender {

   formatter = [[NSDateFormatter alloc] init];
   [formatter setDateStyle:NSDateFormatterLongStyle];
   [formatter setTimeStyle:NSDateFormatterMediumStyle];
   dateLabel.text = [formatter stringFromDate:((UIDatePicker *)sender).date];
}       

-(IBAction)saveList:(id)sender {

    NSDate *selectedDate = [formatter dateFromString:dateLabel.text];
    [ListItemObject saveListItem:[PFUser currentUser] withName:listFieldText withDate:selectedDate];
} 
```

# javascript - jQuery - 按值查询文本框？（值包含引号）

> ID：15466624
> 
> 赞同：0
> 
> 时间：2013-03-17T21:46:53.483
> 
> 标签：javascript, jquery, html

我在 JavaScript 中有一个包含引号的字符串 - 例如，`Don't click this checkbox`或`He said "hi"`. 我试图找到一个具有完全相同值的复选框。

对于我的第一个示例，我有 HTML：

```
<input type="checkbox" value="Don\'t click this checkbox"> 
```

我的变量 q`Don't click this checkbox`里面有字符串。要尝试查询此复选框，我有以下代码。我哪里错了？

```
q = q.replace("'", "\'").replace("\"", "\\"");
var $checkbox = $("input:checkbox[value='" + q + "']"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:02:13.163

问题在于第二个替换功能： `.replace("\"", "\\"");`

由于您在由双引号分隔的字符串中有双引号，因此您必须转义内部双引号。或者，让自己轻松一点并使用单引号：

```
q = q.replace("'", "\'").replace('"', '\"'); 
```

# jquery - 如何激活 flexigrid 上的分页按钮？

> ID：15466625
> 
> 赞同：0
> 
> 时间：2013-03-17T21:46:53.880
> 
> 标签：jquery, jquery-ui, jquery-plugins, flexigrid

我有 20 个项目时的 flexigrid 表，我需要能够使用分页按钮来更改 flexigrid 的页面，但是当我单击它们时，没有任何反应，另一方面，flexigrid 的刷新按钮有效。这是我的代码：

```
$(".flexArticle").flexigrid({
                    url: "index.php",
                    dataType: 'json',
                    colModel : [
                        {display: 'ID', name : 'id', width : 40, sortable : true, align: 'left'},
                        {display: 'Nombre', name : 'name', width : 150, sortable : true, align: 'left'},
                        {display: 'Categoria', name : 'category', width : 150, sortable : true, align: 'left'}
                    ],
                    searchitems : [
                        {display: 'Nombre', name : 'name'}
                    ],
                    sortname: "id",
                    sortorder: "asc",
                    usepager: true,
                    title: "Articulos",
                    useRp: true,
                    rp: 10,
                    showTableToggleBtn: false,
                    resizable: false,
                    width: 'auto',
                    height: 'auto',
                    singleSelect: true,
                }); 
```

我缺少什么来实现分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T03:59:14.903

您还必须在服务器端实现分页并从那里获取分页索引的值。

Flexigrid 需要在 JSON 数组中传回一些参数。

**页码**：当前页码。

**Total**：结果集中的记录总数。Flexigrid 用于计算页数

**Rows**：这是一个包含行数据的数组。每行都需要一个唯一的 id 和一个列数据数组。

# heroku - 本地环境变量和 Heroku

> ID：15466627
> 
> 赞同：14
> 
> 时间：2013-03-17T21:47:02.153
> 
> 标签：heroku, sinatra, environment-variables, gitignore, foreman

我有一个 sinatra 应用程序，其中有一个 yml 文件来设置环境变量，我使用这种方法调用它们

```
module MyConfig

 def config
  environment = ENV["RACK_ENV"] || "development"
  YAML.load_file("./config/config.yml")[environment]
 end
 end 
```

所以当我想使用一个变量时，我会这样做

```
aws_access_key_id = config['aws_access_key'] 
```

例如，我有一个 .gitignore 文件在推送到 github 时会忽略 config.yml。所以当我推送到 heroku 时，这些环境变量将无法访问？

所以这让我可以使用 heroku 方式来设置它们

```
heroku config:add aws_access_key= myapikey 
```

但是heroku像这样访问这些

```
aws_access_key_id = ENV['aws_access_key'] 
```

我如何设置我的开发环境以使用方法配置和 heroku 使用 ENV，我看错了吗？还是我的配置方法为我做这个？

任何帮助表示赞赏

瑞克文件

```
 require 'active_support/core_ext'
  require './config/config.rb'
  require 'bundler/setup'
  Bundler.require(:default)

   include MyConfig

  AssetSync.configure do |con|
  con.fog_provider = 'AWS'
  con.fog_region = 'eu-west-1'
  con.fog_directory = config['fog_directory']
  con.aws_access_key_id = config['aws_access_key']
  con.aws_secret_access_key = config['aws_secret_key']
  con.prefix = "assets"
  con.public_path = Pathname("./public")
  end

 namespace :assets do
 desc "Precompile assets"
 task :precompile do
  AssetSync.sync
 end
end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T00:13:23.433

**更新：**

我现在使用[dotenv](https://github.com/bkeepers/dotenv) gem 而不是下面的示例。因此`env.rb`，我现在没有忽略该文件，而是`.env`使用 Git 忽略该文件。

**原帖：**

尝试这个，

```
# /env.rb

ENV['aws_bucket'] = 'my_bucket'
ENV['aws_access_key'] = 'my_access_key'
ENV['aws_access_secret'] = 'my_access_secret' 
```

该文件设置的`ENV`值`heroku config`与会做的相同。

```
# /config.rb

require './env' if File.exists?('env.rb') 
```

`env.rb`仅当它存在时才需要。

```
# /.gitignore

/env.rb 
```

已`env.rb`添加到`.gitignore`文件中，因此它不会保存在 Git 中。

然后，您将使用`ENV['key']`而不是访问这些值`config['key']`。

`env.rb`如果它与文件不在同一目录中，您可能需要将路径更改为`config.rb`。

**编辑：**

从上一个问题中查看您`Rakefile`的内容，您需要将其更改为：

```
# Rakefile

require 'bundler/setup'
Bundler.require(:default)
require './env' if File.exists?('env.rb')

AssetSync.configure do |con|
 con.fog_provider = 'AWS'
 con.fog_region = 'eu-west-1'
 con.fog_directory = ENV['aws_bucket']
 con.aws_access_key_id = ENV['aws_access_key']
 con.aws_secret_access_key = ENV['aws_access_secret']
 con.prefix = "assets"
 con.public_path = Pathname("./public")
end

namespace :assets do
  desc "Precompile assets"
  task :precompile do
    AssetSync.sync
  end
end 
```

我假设唯一的方法`/config/config.rb`是`config`方法，所以我删除了，

```
require './config/config.rb'
include MyConfig 
```

并将 替换`config[key]`为 中`ENV[key]`定义的值`env.rb`。您可能需要更改`key`名称以匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:56:10.723

您可以删除 yaml，并在`.env`文件中描述环境变量，然后使用`foreman start`. 请参阅[https://devcenter.heroku.com/articles/config-vars#local-setup](https://devcenter.heroku.com/articles/config-vars#local-setup)

* * *

或者保留你的混合系统，你在 dev 中加载一个 yaml，并在 heroku 上使用环境变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:44:47.837

我做了类似于 Sam 的建议的事情，但有点不同。我也有一个 YAML 配置文件，但是我将读取它的内容包装在一个 Rake 任务中，然后运行该应用程序。

```
# in the Rakefile

require 'yaml'

def set_connstring
  s = %Q!postgres://#{ENV["DB_APP"]}@localhost/#{ENV["DB_APP"]}!
  ENV['DATABASE_URL'] ||= ENV["RACK_ENV"] == "test" ? "#{s}.test" : s
end

def basic_environment
  warn "  Setting up environment..."

  file = File.expand_path( File.join File.dirname(__FILE__), "./config.yml" )
  if File.exist? file
    YAML.load_file(file).each do |k,v|
      warn "-> #{k}"
      ENV[k.upcase] = v
    end
  end

  set_connstring()
end

namespace :app do

  desc "Set up the environment locally"
  task :environment do
    basic_environment()
  end

  desc "Run the app locally"
  task :run_local => "app:environment" do
    exec "bin/rackup config.ru -p #{ENV['RUN_LOCAL_PORT']}"
  end
end 
```

这意味着我可以在本地运行它，而无需应用程序内的任何代码来处理这个问题。

* * *

编辑：顺便说一句，我注意到你`Bundler.require(:default)`的 Rakefile 中有。如果您使用`bundle install --binstubs`，那么 Bundler 会将所有可执行文件安装到项目中名为“bin/”的目录中。然后，如果您运行任何这些可执行文件，它们会自动使用 Bundler 安装的库，无需通过 Bundler。请参阅[http://gembundler.com/v1.2/man/bundle-exec.1.html](http://gembundler.com/v1.2/man/bundle-exec.1.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T07:21:53.517

直接从 heroku 管理员导出：设置 -> 显示配置变量

然后打开浏览器js控制台，粘贴这个并输入回车...

```
k=[];
$(".config-var-list input").map(function(y, x){k.push($(x).val())});
v=[];
$(".config-var-list textarea").map(function(y, x){v.push($(x).val())});
ret="";
k.map(function(x, i){ret+=k[i]+"\t"+v[2*i]+"\n"});
console.info(ret); 
```

# c++ - g ++错误：netbeans在linux中编译时未定义引用

> ID：15466629
> 
> 赞同：-2
> 
> 时间：2013-03-17T21:47:10.197
> 
> 标签：c++, netbeans, g++, undefined-reference

我在 linux mint 中使用 NetBeans IDE 进行 C++ 编程。NetBeans 可以很好地编译代码，但是当我尝试`main.cpp`使用 g++编译时，出现错误：`g++ main.cpp``undefined reference`

我知道有很多这样的问题，他们可以通过使用正确的 -l 库来解决问题，但我找不到与 NetBeans/g++ 相关的任何问题，我不知道如何克服这个问题。任何帮助表示赞赏。

错误：

```
tmp/ccXSo5xI.o: In function `main':
main.cpp:(.text+0x82): undefined reference to `Hospital::Hospital(int, int, int)'
main.cpp:(.text+0xf3): undefined reference to `Resident::Resident(int, int)'
.
.
. 
```

主文件

```
#include <iostream>
#include <cstdio>
#include "Resident.h"
#include "Hospital.h"
#include <stack>

using namespace std;

void readFromFiles(int [][10], int [][10]);
void readFromFiles(Hospital*[10], Resident*[10]);
void print10(int [][10], int [][10]);
void print10(Hospital*[10], Resident*[10]);

int main(void) {
    int hospital[10][10] = {0};
    int resident[10][10] = {0};
    Hospital **hospitals = new Hospital*[10];
    for(int i = 0 ; i < 10 ; i++)
        hospitals[i] = new Hospital(3, i, 10);  //3: quota, i: hospital number, 10:prefereneceLength
    Resident **residents = new Resident*[10];
    for(int i = 0 ; i < 10 ; i++)
        residents[i] = new Resident(i,10);  //i: hospital number, 10:prefereneceLength
.
.
. 
```

医院.h

```
#ifndef HOSPITAL_H
#define HOSPITAL_H

#include "Resident.h"

using namespace std;

class Hospital {
public:
    //constructors & destructors
    Hospital();
    Hospital(const int, const int, const int);
    Hospital(const Hospital& orig);
    virtual ~Hospital();

    //getters & setters
    int getNumber();
    int getQuota();
    int** getPreferenceList();

    //member functions
    void addPreference(const int, const int);

private:
    int number;
    int* preferenceList[2]; //1st row: preference order ; 2nd row: admission status
    int quota;
    Resident *admittedResidents;
};

#endif  /* HOSPITAL_H */ 
```

居民.h

```
#ifndef RESIDENT_H
#define RESIDENT_H

class Resident {
public:
    //constructors & destructors
    Resident();
    Resident(const int, const int);
    Resident(const Resident& orig);
    virtual ~Resident();

    //getters, setters
    int getNumber();
    int* getPreferenceList();
    bool getAdmissionStatus();

    //member functions
    void addPreference(const int, const int);
private:
    int number;     //resident number
    int proposalCount;
    int* preferenceList;    //not inverse, unlike Hospitals pref list
    bool admissionStatus;
};

#endif  /* RESIDENT_H */ 
```

我知道这是很多代码，即使我缩短了它们，但我认为它们是必要的部分。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:50:24.707

You need to include all source files:

`g++ main.cpp hospital.cpp resident.cpp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T21:52:39.993

`g++ main.cpp` will try to compile ***and link*** `main.cpp` into an executable (`a.out`). In the link stage, `ld` is not finding the symbols for the `Hospital` and `Resident` constructors while are called in `main.cpp` because they have not yet been compiled.

If you just want to ***compile*** `main.cpp`, use:

```
g++ -c main.cpp 
```

You can link the object files later using:

```
g++ main.o hospital.o resident.o 
```

If you want to ***compile and link*** the whole lot:

```
g++ main.cpp hospital.cpp resident.cpp 
```

# javascript - 获取名称与此字符串匹配的变量的值？

> ID：15466637
> 
> 赞同：1
> 
> 时间：2013-03-17T21:48:02.337
> 
> 标签：javascript

我对 Javascript 有点陌生...我需要做的是通过它的名称获取一个变量，代码可以将其作为字符串获取，但该字符串会根据输入等而有所不同。我的搜索没有到目前为止还没有得到任何东西，但也许我不知道用来描述这个的正确术语。这是我到目前为止所做的：

```
var 1name = 'test';                          // This part is added by php, and
var 1data = 'THIS IS TEST TABLE RAWR';       // the variable names end up being
var 2name = 'etc';                           // a number followed by "name", etc.
var 2data = 'MORE PLACEHOLDER TEXT HERE'; 
```

稍后的：

```
function editTable(id) {
if (id != null) {
    document.getElementById('name').value = window[id + "name"];        
    }
} 
```

和一个按钮：

```
<input type='button' value='Edit'  onclick="editTable(document.getElementById('table').value)" /> 
```

该按钮获取表单字段的值，该值将匹配从 php.ini 添加的一组变量的数量。我怎样才能让它工作？我已经确保变量被插入到页面中，并且按钮获得了匹配的值。你能明白我的目的吗？或者你需要更多解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T21:51:50.980

Variables cannot start with numbers. Personally I think you should use an array like this:

```
var data = [
    {name:"text",data:"THIS IS TEST TABLE RAWR"},
    {name:"etc",data:"MORE PLACEHOLDER TEXT HERE"}
]; 
```

Since you've mentioned PHP outputting this, look at [`json_encode`](http://php.net/json-encode). Then you could just have:

```
var data = <?php echo json_encode($data); ?>; 
```

Assuming, of course, that `$data` is your array structure.

# cuda - What are the limiting factors of Kepler, comparing to Fermi?

> ID：15466642
> 
> 赞同：0
> 
> 时间：2013-03-17T21:48:43.677
> 
> 标签：cuda, gpu, nvidia

It is not a strictly programming question, but knowing hardware is the critical part of programming.

So I start this thread, hope people here can share their experience in programming on Kepler (GK10X or GK110).

First I start mine:

I am doing some programming on GK110 at the moment, for some applications, GK110 is significantly faster than a Fermi, close to its theoretical peak (e.g. 2.5-3X faster). But for others, it isn't, (e.g. only ~ 50%-60% faster).

Correct me if I am wrong, but it seems to me, the main performance bottleneck of Kepler is resource pressure is very high here:

On a per-SM level, Fermi actually have far more resources comparing to GK110, on each SM, Fermi only has one SIMT unit, whilst Kepler has 6.

Yet on each SM, Fermi has 32K registers file, a maximum of 1536 active threads, whilst on each SM of Kepler, there are only 33% more active threads, 100% more registers, with 800% insturction-issue units, and same amount of L1 cache.

The latencies regarding memory and computation are about the same in absolute terms (half in terms of GPU cycles).

So resource-pressure is much higher on GK110, comparing to GF110.

With 800% of instruction-issue units, it seems that Nvidia want to use more aggressive TLP and ILP to hide latency on Kepler, but it is certainly not as flexible, since L1 cache is the same, and active threads is only increased by 33% instead of 500% like its SIMT units.

So, to utilize maximum efficiency of Kepler, it is much harder, first code has to contain significantly more ILP yet take significantly less shared-memory to take the advantage of a massive instruction-issue unit of Kepler, secondly, on a per-warp level, workflow has to be very computationally intensive such that Kepler schedule don't need to switch a lot of warps to hide latency (and it certainly don't have a lot of available warps to chose from to begin with).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:57:37.583

您可能想阅读 Kepler (GK110)[白皮书](http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf)，或者与 Fermi[白皮书](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf)进行比较，然后学习 Kepler[调优指南](http://docs.nvidia.com/cuda/kepler-tuning-guide/index.html)。调优指南将回答您关于 Kepler 的差异以及如何充分利用 Kepler 的许多问题。

# python - Python Targeting System

> ID：15466648
> 
> 赞同：3
> 
> 时间：2013-03-17T21:49:24.643
> 
> 标签：python, computer-vision, webcam, raspberry-pi, targeting

I am working on a project where I need to program a Raspberry Pi to grab an image from a webcam, search that image for a box and identify what box it is by it's size ratio. The boxes will be a unique color to the rest of the environment. It would also be good to identify the distance from the box and angle to the box.

Everything I've seen seems to indicate that this should be possible, but after several days of searching I have yet to find anything that really helps me to do this. This project is my first experience using Python, so I'm pretty newbish. Any help even with how to do little portions of this would be greatly appreciated.

Here's my working code so far. It's not much, all it does is grab an image from a webcam :/

```
import imgproc
from img imgproc *
camera = Camera(160, 120)
viewer = Viewer(160, 120)
n = 1
while (n > 0):
     img = camera.grabImage()
     viewer.displayImage(img) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:28:34.187

这不是一个完整的解决方案，但是关于如何开始的一些好主意:)

首先，有用于 OpenCV 的 Python 绑定，这是一个最初用 C 语言编写的开源免费计算机视觉库：http: [//opencv.willowgarage.com/documentation/python/index.html](http://opencv.willowgarage.com/documentation/python/index.html)

解决计算机视觉问题时，您要做的第一件事就是预处理。特别是，知道盒子是不同的颜色有很大帮助——这意味着我们可以通过颜色进行阈值化，并创建一个图像，在没有盒子的地方是黑色的，在盒子所在的地方是白色的，使用诸如[http 之类的技术： //aishack.in/tutorials/thresholding/](http://aishack.in/tutorials/thresholding/)。

然后，您将遵循类似于本博客中描述的数独抓取器/求解器的过程 - 您进行 blob 提取 ( [http://en.wikipedia.org/wiki/Blob_extraction](http://en.wikipedia.org/wiki/Blob_extraction) ) 然后进行霍夫变换以获取线条，然后您可以比较线条之间的距离以确定框的比率。[http://aishack.in/tutorials/sudoku-grabber-with-opencv-plot/](http://aishack.in/tutorials/sudoku-grabber-with-opencv-plot/)

几乎只是阅读人们的 OpenCV 数独求解器，直到你了解它是如何完成的，因为有很多很好的教程，它是计算机视觉项目如何进行的简单说明：https: [//www.google.com.au /search?q=sudoku+opencv&aq=f&oq=sudoku+opencv&aqs=chrome.0.57j60l3j0l2.1506&sourceid=chrome&ie=UTF-8](https://www.google.com.au/search?q=sudoku+opencv&aq=f&oq=sudoku+opencv&aqs=chrome.0.57j60l3j0l2.1506&sourceid=chrome&ie=UTF-8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:02:05.520

您可能想尝试从 github存储库安装[SimpleCV 。](https://github.com/ingenuitas/SimpleCV)使用 SimpleCV，您应该能够使用 Image.hueDistance 命令获取 blob 的颜色。如果您使用 findBlobs 命令查找框，则每个 blob 都应将其纵横比作为参数。[我们刚刚在这里](https://github.com/ingenuitas/simplecv-examples/tree/master/presentations)发布了关于 SimpleCV 的完整 PyCon 教程。您可以在[此处](https://speakerdeck.com/kscottz/pycon-tutorial-for-simplecv)仅查看幻灯片。我们听说在 RaspberryPi 上安装 PyGame（SimpleCV 依赖项）存在一些问题。[本演练可能会解决这些问题](http://shallowsky.com/blog/linux/install/simplecv-on-rpi.html)。

# c++ - Qt-creator 和 ncurses：未找到 initscr()

> ID：15466654
> 
> 赞同：2
> 
> 时间：2013-03-17T21:50:26.190
> 
> 标签：c++, qt-creator, ncurses

我在 Xubuntu x64 上，我想在我的软件中使用 ncurses。该软件正在使用 Qt Creator 4.8 构建。我没有任何问题，包括 ncurses.h 文件，但是当我想使用 ncurses 的函数（initscr() 和 endwin()）时，出现以下错误：

> 未定义对“endwin”的引用
> 
> 对“initscr”的未定义引用

我应该采取什么步骤来解决这个问题？

我已经安装了以下与 ncurses 相关的软件包：

*   libncurses5:amd64
*   libncurses5:i386
*   libncurses5-dbg
*   libncurses5-dev
*   libncursesw5:amd64
*   libncursesw5:i386
*   libncursesw5-dbg
*   libncursesw5-dev
*   ncurses 基础
*   ncurses-bin
*   ncurses-示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T22:27:37.563

我发现（终于）

正确的方法：右键单击您的项目->添加库->系统库这里您需要 *.so 文件的路径（所以不是 *.so.5 或其他东西），在我的情况下 `/usr/lib/x86_64-linux-gnu/libncurses.so`

然后添加它并 tadaaa: 完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-17T10:10:24.947

而且我还发现本指南可能有效，对我来说还没有工作 [http://www.lucidarme.me/?p=3961](http://www.lucidarme.me/?p=3961)

“在项目的 .pro 文件中，添加以下行以指定编译器必须使用 ncurses 库：

`LIBS += -lncurses`

为避免出现以下错误消息：“打开终端时出错：未知。”，请在 Qt 的运行环境中添加一个变量。项目 -> 运行 -> 运行环境 -> 添加。添加一个名为 TERM 的变量并将其设置为 xterm。”

UPD：通过检查 Projects->Run 中的“在终端中运行”选项解决了我的问题。

# algorithm - Identify this sampling algorithm? (R sample() function)

> ID：15466656
> 
> 赞同：2
> 
> 时间：2013-03-17T21:50:30.840
> 
> 标签：algorithm, r, probability, sampling

I'd like to read more about an algorithm that's used in R for unequal probability sampling, but after a few hours of searching I haven't been able to turn anything up on it. I thought it might have been an Art of Computer Programming algorithm, but I haven't been able to substantiate that either. The particular function in R's random.c is called `ProbSampleNoReplace()`.

Given a vector of probabilities `prob[]` and a desired sample size `n` with a vector of selected items `ans[]`

```
For each element j in prob[] assign an index perm[j]
Sort the list in order of probability value, largest first

totalmass = 1
For (h=0, n1= n-1, h<nans, h++,n1-- )
    rt = totalmass * rand(in 0:1)
    mass = 0

    **sum the probabilities, largest first, until the sum is bigger than rt**
    for(j=0;j<n1;j++)
        mass += prob[j]
        if rt <= mass then break

    ans[h] = perm[j]
    **reduce size of totalmass to reflect removed item**
    totalmass -= prob[j]

    **reset the indices to be sequential**
    for(k=j, k<n1, k++)
        prob[k] = prob[k+1]
        perm[k] = perm[k+1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:03:27.237

该`sample`函数支持不等概率参数。对于我们这些不读 C 的人来说，您的代码片段并不清楚它的意图。

```
> table( sample(1:4, 100, repl=TRUE, prob=4:1) )

 1  2  3  4 
46 23 24  7 
```

还有另一个可能有用的 SO Q&A（通过带有参数的 SO 搜索找到）：

random.c ProbSampleNoReplace

[无需更换即可实现更快的加权采样](https://stackoverflow.com/questions/15113650/faster-weighted-sampling-without-replacement)

# android - 列表视图中单击和触摸之间的区别

> ID：15466658
> 
> 赞同：0
> 
> 时间：2013-03-17T21:50:49.297
> 
> 标签：android, listview

我在列表视图中实现了滑动行为。所以，基本上，你可以拖动一个项目，项目的 alpha 值会相应地改变（感谢 Roman Nurik [Roman Nurik](http://gist.github.com/romannurik/2980593)和[Tim Roes](http://github.com/timroes/SwipeToDismissUndoList)的代码）。该应用程序运行良好。基本上，在通用列表项上，触摸被视为单击，因此对于没有拖动功能的列表，不要发现两者之间的区别。但在我的情况下，因为我在 onTouch() 检测到坐标来判断用户是从左到右还是从右到左滚动。我的列表确实使触摸和点击有所不同。所以，我想知道我是否在列表项上手动分派一个点击事件，这样即使用户没有点击并拖动项目，我仍然可以调用 OnListItemClick()。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T20:14:49.190

很久，没有回复。无论如何，我想在这个问题上分享我自己的发现。据我所知，我发现没有办法手动发送事件。但我发现我可以用另一种方式处理我的问题。以下是我的处理方式。

```
public boolean onTouch(View v, MotionEvent event) {

if(v.isPressed()
//
} 
```

`isPressed()`当视图处于按下状态时会返回。当它返回 true 时，您可以继续进行。

希望它可以帮助别人。

# c# - byte[] as DOS Date

> ID：15466661
> 
> 赞同：0
> 
> 时间：2013-03-17T21:51:06.003
> 
> 标签：c#, byte, dos

Can someone help me? I have a byte[2] with values:

```
byte[0] = 113
byte[1] = 66 
```

How do I get a the date through the DOS date format from this 2 bytes?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T22:08:17.380

正如@HansPassant 所说...

```
byte[] bytes = new byte[] { 113, 66 };

var day = (bytes[0] >> 3);
var month = ((bytes[0] & 0x7) << 1) | (bytes[1] >> 7);
var year = (bytes[1] >> 1) + 1980; 
```

会给你 2013/02/14

# python - Web Scrape multiple directories of text files from web site

> ID：15466663
> 
> 赞同：0
> 
> 时间：2013-03-17T21:51:20.023
> 
> 标签：python, web, download, screen-scraping, text-files

I have a need to Down load several 1000 individual text files from a Climate repository. Each Weather Station has a directory, where simple ascii text files are stored, one for each day since the station has been recording...

Is there a way to write a script to down load all files from the diretory?

[http://www.sidpabb.org/data/clima/raw/BeiraInam/](http://www.sidpabb.org/data/clima/raw/BeiraInam/)

Regards

# linux - 我在 unix 的 at 作业的输出中不断收到“while 语法”错误，我不知道为什么

> ID：15466666
> 
> 赞同：0
> 
> 时间：2013-03-17T21:51:45.480
> 
> 标签：linux, unix, loops, while-loop, ksh

```
#!/usr/dt/bin/dtksh

while getopts w:m: option
do
        case $option in
        w)      wflag=1
                wval="$OPTARG";;
        m)      mflag=1
                mval="$OPTARG";;
        ?)      printf 'BAD\n' $0
                exit 2;;
        esac
done

 if [ ! -z "$wflag" ]; then
printf "W and -w arg is $wval\n"
fi

if [ ! -z "$mflag" ]; then
printf "M and -m arg is $mval\n"
fi

shift $(($OPTIND - 1))
printf "Remaining arguments are: $* \n"

at $wval <<ENDMARKER
echo $* >> Search_List
tr " " "\n" <Search_List >Usr_List

while true; do
        if [ -s Usr_List ]; then
        for i in $(cat Usr_List); do
                if finger -m | grep $i; then
                    echo '$i is online' | elm user
                    sed '/$i/d' <Usr_List >tmplist
                    mv tmplist Usr_List
                fi
        done
        else
        break
        fi
done
ENDMARKER 
```

本质上我想继续搜索直到它是空的。每次找到列表中的元素时，都会将其删除。一旦列表为空退出。

我第一次运行命令时没有错误消息，它只显示在包含 at 作业输出的电子邮件中。

提前感谢您的任何建议

编辑：该脚本使用 getopts 并为 -w 采用一个参数，为 -m 采用一个参数，w 值设置为 at 作业的时间，仍然必须使用 m。m 之后的任何参数都被发送到名为 Search_List 的文件中，Search_List 被编辑并保存为 Usr_List。然后在while 循环中，当Usr_List 不为空时，脚本会根据Usr_List 中的名称检查finger -m 的结果。如果找到名称，则将其从 Usr_List 中删除。一旦 Usr_List 为空，程序应该停止。

elm 是一种发送电子邮件的方式，因此 elm 用户向用户发送电子邮件。

错误是：

> while：表达式语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:35:47.953

at 默认使用 /bin/sh。

```
at  now <<ENDMARKER

 <code here>

ENDMARKER 
```

所有这些都在 /bin/sh 下执行，在某些系统上可以是 Bourne Shell（例如 Solaris）。您需要弄清楚 /bin/sh 对您的系统来说是什么，然后相应地进行修改。另外，请阅读有关“在”环境中的内容和不存在内容的保证。我认为问题出在那儿。您同时拥有 UNIX 和 linux 标记。所以我不能提供比这更多的帮助。

您可以启用 at 代码块的日志记录（按照您需要的方式）：

```
exec 2&>1 > /tmp/somefile.log 
```

然后将调试消息写入 stdout 或 stderr。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:37:13.077

您的 HEREDOC 正在被插值。尝试引用分隔符：

```
at $wval << 'ENDMARKER' 
```

虽然（我没有仔细看）看起来你想要一些插值。但是您绝对不希望它出现在您引用的行上`$i`，因此`$`如果您不引用整个heredoc，请引用：

```
 if finger -m | grep \$i; then 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T23:43:59.470

您需要将`-k`选项传递给`at`：

```
...
at -k $wval <<ENDMARKER
... 
```

`at`否则默认为您的登录外壳，它是`csh`或其衍生产品之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T19:15:37.697

事实证明，while 命令和 if 命令需要结合使用。

```
while [[ -s Usr_List ]]; do
    ......
done 
```

# android - jfeinstein 10 implementation

> ID：15466669
> 
> 赞同：1
> 
> 时间：2013-03-17T21:52:03.723
> 
> 标签：android, slidingmenu

I tried to implement the JFeinstein library to create a sliding menu. It is working if I make the slide gesture anywhere on the screen only on the left margin no. If i make there a slide gesture will change my view with the menu view and it will put it in the full screen which I don't want to ... can someone tell me why is that happening ?? my code is :

MainActivity.java

```
package com.example.studentsnotebook;

import android.annotation.SuppressLint;
import android.graphics.Point;
import android.os.Bundle;
import android.view.Display;
import android.view.Menu;

import com.slidingmenu.lib.SlidingMenu;
import com.slidingmenu.lib.app.SlidingActivity;

@SuppressLint("NewApi")
public class MainActivity extends SlidingActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setBehindContentView(R.layout.activity_menu);
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        int width = size.x;
        int menu_width = width - width/3;
        if (menu_width < 100){
            menu_width = 100;
        }
        SlidingMenu menu = new SlidingMenu(this);
        menu.setBehindOffset(menu_width);
        menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
        menu.setShadowWidth(menu_width/2);
        menu.setShadowDrawable(R.drawable.shadow);
        menu.setFadeDegree(0.35f);
        menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
        menu.setMenu(R.layout.activity_menu);
        menu.setSlidingEnabled(true);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

# javascript - How to stop video from playing in hidden DIV

> ID：15466672
> 
> 赞同：2
> 
> 时间：2013-03-17T21:52:19.523
> 
> 标签：javascript, video, show-hide, mov

Here is the JavaScript:

```
function unhide(divID) {
    var item = document.getElementById(divID);
    if (item) {
        item.className=(item.className=='hidden')?'unhidden':'hidden';
    }
} 
```

Here is the HTML:

```
<a href="javascript:unhide('verizon');">VERIZON<br>
<a href="javascript:unhide('sap');">SAP</a><br>

<div id="sap" class="hidden">
    <embed src="videos/sap.mov" height="270" width="480" scale="tofit"></embed>
</div>
<div id="verizon" class="hidden">
    <embed src="videos/verizon.mov" height="270" width="480" scale="tofit"></embed>
</div> 
```

When I click on SAP the video plays. When I click on Verizon it also plays but the SAP video continues to play even though it is hidden.

I am very new to javascript.

Is there a better way to do this? How do I fix with the code I already have?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:20:19.507

我首选的解决方案是将该 div 的 HTML 设置为 null，而不是尝试操纵其中的内容以使其关闭。毕竟它是隐藏的，所以为什么还要把它放在那里。

```
document.getElementByID('div').innerHTML = ""; 
```

从而完全去除那里的任何东西。

并取消隐藏它（请注意，您可能需要对此有点烦躁才能使引号起作用）

```
document.getElementByID('div').innerHTML = '<embed src="videos/sap.mov" height="270" width="480" scale="tofit"></embed>'; 
```

我认为对于 Flash 或像视频播放器这样的重元素来说，这将是一个更好的解决方案，想象一个隐藏了 30 个这些元素的页面，它会非常陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:04:03.627

你可以这样做：

```
function unhide(divID) {
 var item = document.getElementById(divID);
 var other = {"verizon":"sap","sap":"verizon"};
 if (item) {
    item.className=(item.className=='hidden')?'unhidden':'hidden';
    var tar = document.getElementById(other[divID]);
    tar.className = 'hidden';
    tar.getElementsByTagName("embed")[0].stopVideo();
 }
} 
```

Other 只是一个对象，它可以轻松访问要停止的视频的 id。它使用来自 divID 的字符串来获取另一个字符串。

然后，一旦你有了另一个元素，你就可以遍历它的子元素来找到这个`embed`元素。`[0]`用于获取第一个匹配元素（您的视频）。然后你可以使用javascript的`stopVideo()`方法来停止视频。

# android - How to send data through intent in android without opening another activity?

> ID：15466673
> 
> 赞同：8
> 
> 时间：2013-03-17T21:52:26.160
> 
> 标签：android, android-intent, android-activity

here is my code for sending data by intent but i don't want open another activity i just want to send the data without opening it..

```
Bundle contain = new Bundle();
            contain.putString("key4", item);
            contain.putString("price", price);

Intent a  = new Intent(Searchbydate.this, Searchbyitem.class);
            a.putExtras(contain);
            startActivity(a); 
```

here i don't want to open this Searchbyitem.class just send the data...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-02T09:43:02.503

是的，我也遇到过这个问题。

许多开发人员在通过 Intent 或 Bundle 将数据从对话框传递到另一个活动时也面临问题。它在从另一个活动中检索时返回 null。

唯一的解决方案是 SharedPreferences。

但是您必须将其放在关闭按钮内。（例如：确定/取消等）

并通过相同的密钥轻松地从另一个活动中检索数据。不要使用任何带有广播意图的服务。

对话活动中的代码是这样的：

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setIcon(R.drawable.mailicon);
    builder.setTitle(name);
    builder.setView(view);

    builder.setPositiveButton("Send Request",new DialogInterface.OnClickListener()
    {

     @Override 
     public void onClick(DialogInterface dialog,    int which) {
     String mailID = id.getText().toString();

     //Here define all your sharedpreferences code with key and value
     SharedPreferences prefs = getSharedPreferences("my_prefs", MODE_PRIVATE);
     SharedPreferences.Editor edit = prefs.edit();
     edit.putString("MID", mailID );
     edit.commit();

    }

}); 
```

并从另一个获取这样的数据：

```
 SharedPreferences bb = getSharedPreferences("my_prefs", 0);
    String m = bb.getString("NUM", "");
    Toast.makeText(this, m, Toast.LENGTH_SHORT).show(); 
```

添加一些检查以获得良好的标准。

谢谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T21:57:02.873

你打电话也`SharedPreferences`用来存档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T21:56:07.943

您可能想使用`Service`非活动。

阅读：http: [//developer.android.com/guide/components/fundamentals.html#Components](http://developer.android.com/guide/components/fundamentals.html#Components)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T21:57:18.223

您可以尝试[使用 EventBus](http://greenrobot.github.com/EventBus/)或[Otto](http://square.github.com/otto/) Android 库在活动、服务和片段之间进行通信。

所以你应该创建一个服务来传递数据和活动之间的通信，片段等使用事件总线

# php - How to pass GET data and POST data via AJAX

> ID：15466674
> 
> 赞同：-5
> 
> 时间：2013-03-17T21:52:39.663
> 
> 标签：php, jquery, ajax, post, get

I have a small form I'd like to validate with AJAX. (I'm using jQuery)

I'd like to pass the data entered in the inputs by the user (POST method) and some other data that is typically available in my controller/view.

How can I do that?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T21:56:48.363

GET 数据进入 URL

```
 /controller/action?name=will&last_name=smith 
```

POST 数据在请求正文中以多种方式传输，包括 form-data、xml、json 等

也许您应该尝试使用您的请求正文数据发布第一个 url

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T21:57:28.057

只需在 URL 中包含 GET-data，例如 [http://www.example.com?param=value](http://www.example.com?param=value)

其余使用 POST

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:06:25.917

您可以将要发送的数据包含在隐藏的表单字段中，在控制器上处理发布请求，然后重定向以获取

# c++ - 非成员运算符重载是什么意思

> ID：15466676
> 
> 赞同：2
> 
> 时间：2013-03-17T21:52:41.563
> 
> 标签：c++, operator-overloading

我最近正在阅读一篇关于运算符重载的文章，其中提到了**非成员运算符重载**。如果有人能用一个例子解释非成员运算符重载的含义，我将不胜感激。我知道什么是成员运算符重载（类中重载运算符类型（二进制..等）的方法。我在 SO 上看到这篇[文章](https://stackoverflow.com/questions/4622330/operator-overloading-member-function-vs-non-member-function)，这让我相信非成员运算符重载的目的是处理运算符重载其中第一个参数不是一个类，只是一个本机类型。任何解释非成员运算符重载的链接或示例肯定会受到赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:55:48.443

这意味着您可以在课堂外重载：

```
struct X { int data; };

bool operator<(X const& a, X const& b) 
{
       return a.data < b.data;
} 
```

这对于不对称重载很有用，其中左操作数不需要是您自己的类型：

```
bool operator<(int a, X const& b) 
{
       return a < b.data;
} 
```

这里的一个常见习惯用法是将它与*类内*定义和朋友声明结合起来：

```
struct X 
{ 
    int data; 
    friend bool operator<(X const& a, X const& b) { return a.data<b.data; }
    friend bool operator<(int a, X const& b) { return a<b.data; }
}; 
```

在这里，`operator<`在技术上仍然**是非**会员。

正如下面的 DrewDormann 所指出的，另一个有用的副作用是`(X const&, X const&)`将适用于任何可隐式转换为 的操作数`X const&`，而不仅仅是该确切类型的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:05:00.530

最常见的方法是重载将被调用的 operator<< `std::cout`：

```
namespace X { 
      class MyClass { 
       ...
       };  
}
std::ostream& operator<< (std::ostream&, const X::MyClass&); 
```

这在 std::ostream 成员上调用，因此您无需在类中定义它。但是有时无法通过公共接口实现功能（因为您的操作员需要访问数据表示）。

# c# - DataGridView 在运行时不显示数据

> ID：15466682
> 
> 赞同：1
> 
> 时间：2013-03-17T21:53:14.877
> 
> 标签：c#, datagridview

我`DataGridView`在我的 C# 项目中使用 a 。我从它的向导中选择数据源（不是用代码）。

向导询问是将数据库文件（sql compact 或 sdf 文件）复制到主数据文件夹还是连接到我创建的路径。我选择第二个选项（我的路径）。

现在，当我检查预览数据时，它会显示我的数据库记录的数据，但是当我运行程序时，单元格中没有显示任何数据。

对不起我的英语很差。任何人都可以帮忙吗？

# facebook - Grails Facebook 身份验证插件无法打开 FB 身份验证页面

> ID：15466686
> 
> 赞同：0
> 
> 时间：2013-03-17T21:53:52.837
> 
> 标签：facebook, grails, facebook-authentication

我正在尝试使用 Grails Facebook 身份验证插件。

我的目标是使用默认的服务器端身份验证。

根据文档

> 它是服务器端应用程序的首选和标准登录。单击“连接按钮”后，用户将被重定向到特殊的 Facebook 页面进行身份验证，然后重定向回您的应用程序。

我期待获得特殊的 FB 页面，但它直接重定向到 /j_spring_security_facebook_redirect 。没有 FB 页面显示。

我没有登录FB

我的配置是这样的：

```
grails.plugins.springsecurity.facebook.domain.classname='br.com.fisgo.security.Credential'
grails.plugins.springsecurity.facebook.domain.relation = 'SameObject'

grails.plugins.springsecurity.facebook.secret = 'xxxx'
grails.plugins.springsecurity.facebook.appId = 'xxxxxx'

grails.plugins.springsecurity.facebook.filter.redirect.processUrl='/sign/facebookLogin'
grails.plugins.springsecurity.facebook.filter.type='redirect'

grails.plugins.springsecurity.facebook.taglib.button.text='Login com facebook' 
```

我无法找出问题所在。

我在重定向上遇到的错误是：

```
| Error 2013-03-18 09:35:50,307 [http-bio-80-exec-1] ERROR [/].[default] - 
Servlet.service() for servlet [default] in context with path [] threw exception
 Message: Cannot create a session after the response has been committed Line | Method 
->> 1110 | runWorker in java.util.concurrent.ThreadPoolExecutor - - - - - - - - - - - 
- - - - - - - - - - - - - - - - - - - - - - - - - | 603 | run in 
java.util.concurrent.ThreadPoolExecutor$Worker ^ 722 | run . . . in java.lang.Threa 
```

我也发现

```
ERROR facebook.DefaultFacebookAuthDao  - Can't find authority join class (br.com.fisgo.security.CredentialRole). Please configure 'grails.plugins.springsecurity.userLookup.authorityJoinClassName' value, or create your own 'List<GrantedAuthority> facebookAuthService.getRoles(user)' 
```

该课程可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:10:14.437

我遇到了同样的`Cannot create a session after the response has been committed`错误。

问题是 Spring Security 不允许匿名访问`j_spring_security_facebook_redirect`. 不确定你是如何配置 grails spring 安全插件的，但在我们的例子中这有帮助：

```
grails.plugins.springsecurity.interceptUrlMap = [
....
'/j_spring_security_facebook_redirect': ['IS_AUTHENTICATED_ANONYMOUSLY'],
....
] 
```

要查找问题的原因，请尝试注释掉`response.sendRedirect(facebookAuthUtils.prepareRedirectUrl(getAbsoluteRedirectUrl(), facebookAuthUtils.requiredPermissions))`.`FacebookAuthRedirectFilter`

# ruby - 登录或注册后如何防止重定向到 index.html？

> ID：15466693
> 
> 赞同：0
> 
> 时间：2013-03-17T21:54:28.040
> 
> 标签：ruby, ruby-on-rails-3, authentication

我最近使用 /signin 和 /signup 路径在我的 Rails 应用程序（到文件夹 public/index.html）上实现了一个新主页（index.html）。在我的网站上实现 index.html 之前，我一直在登录或注册后将用户重定向到 root_url（即 home.html.erb）。当他们退出时，我一直将他们重定向到 root_path。

问题是在这个新的 index.html 之后，当用户尝试登录或注册时，他们会被重定向回 index.html。有没有地方可以让他们成功登录到原始的 root_url 而无需进行许多代码编辑？

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
      sign_in user
      redirect_to root_path
    else
      flash.now[:error] = "Invalid email/password combination"
      render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_path
  end
end 
```

用户控制器

```
def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome!"
      redirect_to root_path
    else
      render 'new'
    end
  end 
```

这就是我在 routes.rb 中的内容

```
root to: 'static_pages#home' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:35:30.967

`root_url`首先， and之间的唯一区别`root_path`（通常在`foo_url`and之间`foo_path`）是前者是一个完整的 url（即[http://example.com/...](http://example.com/...)），而后者只是路径（主机名后面的位） . 对于简单的重定向，它们将具有相同的结果。

如果`public/index.html`存在，那么这就是访问“/”（即 root_path）的地方。

如果您希望用户在注册后被发送到不同的页面，请更改您的重定向。例如，如果您的路线文件有

```
get '/home' => 'home#index', :as => :home 
```

然后重定向到`home_path`会将人们发送到家庭控制器的索引操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:36:11.387

问题似乎是您`public/index.html`覆盖了`root_path`Rails 路线。

如果您的公共目录中`root_path`有一个文件被调用，您将无法访问。`index.html`

您需要重命名`index.html`为其他名称或使用您以外的其他路径`root_path`

**编辑：**

另一种选择是为 root_path 设置两个不同的 erb 模板。然后在 root_path 的控制器操作中，您可以这样做：

```
class StaticPages < ApplicationController
  def home
    if user_signed_in?
      render 'home_signed_in'
    else
      render 'home_signed_out'
    end
  end
end 
```

然后，您需要在以下位置创建两个 erb 模板，

`/app/views/static_pages/home_signed_in.html.erb`

和

`/app/views/static_pages/home_signed_out.html.erb`

您还需`user_signed_in?`要用您自己的方法定义或替换我的示例代码中的方法，以检测用户是否已登录。不要忘记删除`/public/index.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T23:20:57.933

转到您的 routes.rb 文件并进行以下更改

```
root :to => 'main#home_page' 
```

您可以通过修改 root 重定向到任何路由：在 config/routes.rb 文件中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T22:33:06.260

尝试更改`root_path`为`home_ControllerName_path`，其中 ControllerName 必须是处理 home 操作的控制器的名称。

# java - 与 mysql 通信的小程序中的 java.security.AccessControlException

> ID：15466700
> 
> 赞同：0
> 
> 时间：2013-03-17T21:55:20.473
> 
> 标签：java, mysql, applet, noclassdeffounderror

我学校的编程俱乐部正在启动一个辅导计划，我已经构建了一个 Java 小程序，学生可以使用它来请求会话。小程序与一个数据库进行通信，该数据库具有一个存储导师可用性的表，并向用户显示可用时间。

首先：出于安全原因，我知道让小程序直接与数据库通信是个坏主意。话虽这么说，这是一个相当低风险的情况（数据库中没有存储任何“敏感”内容），而且这个解决方案只是暂时的（我们目前没有能够运行 tomcat 的服务器，所以一切都需要完成客户端）。

小程序 GUI 正确加载，但`java.security.AccessControlException ("java.lang.RuntimePermission" "setContextClassLoader")`在初始化尝试访问数据库的类时抛出异常，并且没有加载数据。我怎么解决这个问题？

编辑：我已经更改了我的代码，以便数据库通信发生在与 GUI 相同的线程上。现在我得到了这个例外：

```
Exception in thread "Thread-46" java.lang.NoClassDefFoundError: Could not initialize class com.mysql.jdbc.StringUtils
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:298)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at helpsessions.DBHandler.run(DBHandler.java:53)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:58:15.877

默认情况下，Applet 具有非常有限的安全模型，为了扩展 Applet 可用的功能，您需要对 Applet 进行签名，然后使用您需要的扩展权限编写更新的安全策略。

您的第二个问题 - 找不到类 - 是因为驱动程序没有随小程序一起分发。

我参考 Java 1.1 发现了这一点。

> 如果您使用的是小程序，则必须将这些 JAR 和类文件放在小程序的代码库目录和/或存档位置

I'm not sure how relevant is to the latest versions of Java, but I would suggest that is your best option to make the driver Jar available to the applet.

# ruby-on-rails - application.html.haml 未呈现

> ID：15466701
> 
> 赞同：2
> 
> 时间：2013-03-17T21:55:27.600
> 
> 标签：ruby-on-rails, haml, erb

我正在使用 rails 版本 3.2.12 并使用 .erb 模板作为我的视图。

现在我想开始使用haml模板。

我在 gem 文件中添加了 haml 和 haml-rails 并安装了包。

```
Using haml (4.0.0) 
Installing haml-rails (0.4) 
```

我做了一个模型 application.html.haml

```
!!! 5
%html
  %head
    %title Rotten Potatoes!
    = stylesheet_link_tag 'application'
    = javascript_include_tag 'application'
    = csrf_meta_tags

  %body
    = yield 
```

然后我将 application_controller.rb 更改为

```
class ApplicationController < ActionController::Base
  layout "application"
  protect_from_forgery
  include SessionsHelper
end 
```

当我运行它时，我收到以下错误消息：缺少模板布局/应用程序 {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee] }。在以下位置搜索：*“/home/coen/Desktop/rails_project/sample_app/app/views”

好像没有安装haml处理程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:24:38.507

那么，您是否重新启动了开发服务器？将 gem 添加到 Gemfile 后，这是非常重要的事情。

顺便提一句。我一直使用haml，我从来没有使用过'haml-rails'。

当我开始新项目时，我唯一要做的就是将“gem 'haml'”添加到 Gemfile 中，并且一切都按预期工作。

# mysql - 我在这里需要交易吗？

> ID：15466703
> 
> 赞同：4
> 
> 时间：2013-03-17T21:55:45.583
> 
> 标签：mysql, select, transactions

我有一个表格，正在收集用户输入的数据。

我要执行以下 SQL 语句：

选择语句 1

选择语句 2

更新我在 2 个选择语句中读出的表行

我想防止另一个用户在任何语句之间输入新数据的可能性。

我已经阅读了 MySQL 手册，似乎我可以先锁定表，但我更熟悉事务，我想知道围绕 3 个语句包装事务是否可以实现我想要的。我发现很难通过阅读手册来确定这是否有效（或者也许只是我......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:04:36.543

这里有两个可能的问题范围；事务（如果您使用支持事务的引擎，例如 InnoDB）将解决其中一个问题。

事务使您的所有查询在事务启动时都在数据库状态的快照上运行，并且在事务完成时应用全部或不应用任何修改。这有效地解决了查询的交错和竞争条件。

但是，您声明要防止用户在任何语句之间输入新数据。如果在这种情况下，您希望确保提交请求的用户是从当前数据开始的，那么您需要实现自己的锁定机制，或者至少有一种方法可以捕获请求之间的交错导致问题的情况。

基本上，事务只会对在并发请求中运行的查询有所帮助。如果这种情况有问题：

1.  User1 请求数据
2.  User2 请求数据
3.  User1 提交修改
4.  User2 提交修改

如果 User2 能够在不知道 User1 所做的更改的情况下提交更改，则您需要自己的锁定系统；交易不会有帮助。这来自 Web 开发背景，其中每个步骤都是单独事务中的单独 Web 请求。

# sql - 尽管没有创建新数据，但 Postgres/PostGIS SQL 更新猛烈抨击硬盘

> ID：15466705
> 
> 赞同：0
> 
> 时间：2013-03-17T21:55:49.550
> 
> 标签：sql, postgresql, sql-update, gis, postgis

我有一张有 370 万行的表。它有一个布尔值（下面称为**bool_value**），它已经为所有行提供了一个值。

我正在使用此查询来更新**bool_value**：

```
DROP INDEX IF EXISTS table_bool_value_idx;

UPDATE table
SET bool_value = (
st_contains(st_setsrid((SELECT geom FROM gis.cntys04_3081 WHERE gid=57), 3081), the_geom)
AND st_contains((SELECT geom_3081 FROM gis.stratmap_city_poly_v4 WHERE gid = 127), the_geom)
); 
```

到目前为止，此查询已经运行了大约 12 个小时。一直以来，我的硬盘驱动器的利用率都是 100%。

我不明白这个硬盘利用率，因为该表在过去一个月内已被清理，**bool_value**已经有每一行的记录，我删除了索引。**gis**命名空间中的两个表（在查询中引用）都在它们的**gid**字段上建立索引。那些**gis**命名空间表不是视图。它们只是我使用 PostGIS 的**PostGIS 2.0 Shapefile 和 DBF Loader Exporter**导入的 SHP 。计算机上没有其他重要的事情发生。

根据任务管理器，CPU 利用率几乎为零，即使在 postgres.exe 进程上也是如此。我认为这是由于极端的硬盘活动造成的。

计算机总共有 8GB。其中几乎一半是免费的。有 14 个并发 postgres.exe 进程打开，每个进程的大小在 2.8 MB 到 9 MB 之间。只有一个过程显示出大量活动。

这是我想知道的一件事：第二个 st_contains 中的**geom_3081****长度**为 1.0 MB。这是一个代表德克萨斯州达拉斯市范围的 PostGIS MULTIPOLYGON。我想如果没有别的，这将被 Windows 磁盘缓存缓存，以防止重复的硬盘访问。**geom_3081**没有被索引，虽然我不明白为什么索引它会有所帮助，因为它没有被用来确定要返回哪些行；**gid**领域正在这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:53:09.990

无论这里存在什么其他问题（很可能还有其他问题），这应该会使您的查询更快：

```
UPDATE table t
SET    bool_value = x.new_bool
FROM (
   SELECT table_id
         ,(st_contains(st_setsrid
               ((SELECT geom FROM gis.cntys04_3081 WHERE gid=57)
                 ,3081
               ), the_geom)
           AND st_contains
              ((SELECT geom_3081 FROM gis.stratmap_city_poly_v4 WHERE gid = 127)
              ,the_geom
              )
          ) AS new_bool
   FROM   table
   ) upd
WHERE  t.table_id = upd.table_id
AND    t.bool_value IS DISTINCT FROM x.new_bool; 
```

`table_id`是这里的主键。

原则是**避免空更新**。而且由于我们谈论的是布尔值，很可能，您有很大一部分更新实际上并没有改变任何东西。但是这样的更新仍然会导致磁盘活动，因为旧行被标记为过时并且插入了新的（未更改的）行。

要找出还有什么问题，您可以走行之有效的*分而治*之之路：附加到子查询：

```
ORDER  BY table_id
LIMIT  10
OFFEST 0 
```

如果通过，继续增加`LIMIT`和`OFFSET`，使用更大的切片。只要性能保持良好，就增加切片的大小。确保在不同的事务中运行。

这可以避免缓存问题（如磁盘负载过大所表明的那样），也可以避免您可能遇到的任何并发问题。如果更新几行仍然很慢，那么您*肯定*还有其他问题。

* * *

至于：

> 我不明白这个硬盘驱动器的使用情况，因为该表在过去一个月内已被清空，

这是一种误解。`VACUUM`通常不会变得更快（表膨胀的极端**情况**`UPDATE`除外）。甚至可能更慢。更糟糕的是`VACUUM FULL`。这将删除所有死元组并尽可能紧密地用活动元组打包数据页。

以下更新不能使用[**HOT 更新**](https://stackoverflow.com/questions/7806058/redundant-data-in-update-statement/7806610#7806610)，因为在个人数据页面上没有“回旋余地”。如果您有很多更新，请考虑将[**`fillfactor`**](https://stackoverflow.com/questions/14187192/fill-factor-for-a-sequential-index-that-is-pk/14187367#14187367).

在这些与 dba.SE 密切相关的问题中可以找到更多信息和链接，请[**点击此处**](https://dba.stackexchange.com/questions/18664/are-regular-vacuum-analyze-stil-recommended-under-9-1)、[**此处**](https://dba.stackexchange.com/questions/36383/what-fillfactor-for-caching-table)和[**此处**](https://dba.stackexchange.com/questions/12150/postgresql-unexplained-table-bloat/12159#12159)。

# jquery - 我知道它是如何使用 jQuery 完成的——如何使用 Mootools 发出 JSONP 请求

> ID：15466709
> 
> 赞同：0
> 
> 时间：2013-03-17T21:56:13.887
> 
> 标签：jquery, mootools

我习惯使用 jQuery，它非常适合：

```
$.ajax({
    method: "GET",
    url: "someURL",
    dataType: "jsonp",
    jsonp: 'jsonp',
    success: function (msg) {},
    error: function (msg) {}
}); 
```

** 注意：当我省略**jsonp: 'jsonp'**时，控制台中会显示此错误：

```
Uncaught SyntaxError: Unexpected token : 
```

阅读 Mootools 文档后我尝试的方法：

**试图：**

```
new Request.JSONP({
    url: "someURL",
    onComplete: function (msg) {},
    onFailure: function (msg) {}
}).get(); 
```

**错误：**

```
Uncaught TypeError: undefined is not a function 
```

它显示 Response.JSONP 不是函数。当我尝试使用 JSON 时：

**试图：**

```
new Request.JSON({
    url: "someURL",
    onComplete: function (msg) {},
    onFailure: function (msg) {}
}).get(); 
```

**错误：**

```
XMLHttpRequest cannot load http://www.theirsite.com. Origin http://yoursite.com is not allowed by Access-Control-Allow-Origin. 
```

这是使用 Ajax 的跨域访问问题，这就是我使用 JSONP 的原因。

我很困惑

```
Uncaught TypeError: undefined is not a function 
```

错误，我不明白为什么它适用于 jQuery。

任何见解表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:06:49.433

以下选项用于`$.ajax`将回调函数名称设置为`jsonp`：

```
jsonp: 'jsonp' 
```

我认为您需要以`callbackKey`类似的方式指定选项：

```
new Request.JSONP({
    url: "someURL",
    onComplete: function (msg) {},
    onFailure: function (msg) {},
    callbackKey: 'jsonp'
}).get(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T22:10:23.117

对于 Mootools，JSONP 没有内置到核心库中。您必须[使用 More Builder 将 JSONP 构建到另一个 javascript 文件](http://mootools.net/more/)中才能使用。

您可能已经意识到，`Request.JSONP`使用 mootools 调用的语法与使用`Request.JSON`. 此外，确保远程侦听器侦听`callback`参数，并将其附加到输出。

例如

**索引.php**

```
new Request.JSONP({
    url: 'http://absolute/url/to/endpoint.php',
    onSuccess: function(result) {
        console.log(result);    // should output 'bar' to the console
    }
}).get({
    foo: 'bar'
}); 
```

**端点.php**

```
echo $_REQUEST['callback'] . '(' . $_REQUEST['foo'] . ');'; 
```

# c# - 如何分析这样的异常？

> ID：15466710
> 
> 赞同：0
> 
> 时间：2013-03-17T21:56:19.530
> 
> 标签：c#, wpf, exception, inotifypropertychanged

调试我的应用程序时，出现以下异常。

我知道这与`INotify`属性的更新方法有关，但如何准确找出问题所在。我不能得到一个像样的堆栈调用。

完整的异常信息是：

```
System.Windows.Markup.XamlParseException was unhandled
HResult=-2146233087
  Message='The invocation of the constructor on type 'PcgTools.MainWindow' that matches the   specified binding constraints threw an exception.' Line number '4' and line position '9'.
Source=PresentationFramework
LineNumber=4
LinePosition=9
StackTrace:
   at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
   at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
   at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
   at System.Windows.Application.LoadBamlStreamWithSyncInfo(Stream stream, ParserContext pc)
   at System.Windows.Application.LoadComponent(Uri resourceLocator, Boolean bSkipJournaledProperties)
   at System.Windows.Application.DoStartup()
   at System.Windows.Application.<.ctor>b__1(Object unused)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run()
   at PcgTools.App.Main() in c:\PcgTools\nodes\KorgKronosTools\obj\Debug\App.g.cs:line 0

 InnerException: System.ArgumentOutOfRangeException
       HResult=-2146233086
       Message=Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
       Source=mscorlib
       ParamName=index
       StackTrace:
            at System.Collections.Generic.List`1.get_Item(Int32 index)
            at PcgTools.Model.Common.Synth.Timbre.get_UsedProgram() in c:\PcgTools\nodes\KorgKronosTools\Model\Common\Synth\Timbre.cs:line 137
            at PcgTools.Model.Common.Synth.Timbre.RefillColumns() in c:\PcgTools\nodes\KorgKronosTools\Model\Common\Synth\Timbre.cs:line 612
            at PcgTools.Model.Common.Synth.Timbre.OnPcgRootPropertyChanged(Object sender, PropertyChangedEventArgs e) in c:\PcgTools\nodes\KorgKronosTools\Model\Common\Synth\Timbre.cs:line 574
            at System.ComponentModel.PropertyChangedEventHandler.Invoke(Object sender, PropertyChangedEventArgs e)
            at Common.Mvvm.ObservableObject.OnPropertyChanged(String propertyName, Boolean verifyPropertyName) in c:\PcgTools\nodes\Common\Mvvm\ObservableObject.cs:line 47
            at PcgTools.Model.Common.Synth.Memory.set_ReadingFinished(Boolean value) in c:\PcgTools\nodes\KorgKronosTools\Model\Common\Synth\Memory.cs:line 74
            at PcgTools.Model.Common.File.KorgFileReader.Read(String fileName) in c:\PcgTools\nodes\KorgKronosTools\Model\Common\File\KorgFileReader.cs:line 116
            at PcgTools.ViewModels.MainViewModel.ReadAndShowFile(String fileName, Boolean checkAutoLoadMasterFileSetting) in c:\PcgTools\nodes\KorgKronosTools\ViewModels\MainViewModel.cs:line 367
            at PcgTools.ViewModels.MainViewModel.HandleAppArguments() in c:\PcgTools\nodes\KorgKronosTools\ViewModels\MainViewModel.cs:line 1030
            at PcgTools.MainWindow..ctor() in c:\PcgTools\nodes\KorgKronosTools\MainWindow.xaml.cs:line 221
       InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:20:09.417

当 XAML 初始化触发错误的初始化代码（在`MainWindow.xaml`文件中的第 4 行）时，会出现这种消息。真正的原因在内部异常中描述。它表明在`Timbre.cs:line 137`一个列表中被一个无效的索引访问。

因为它显示了该文件的行号，所以我假设您有它的源代码，至少以`.pdb`文件的形式。比你可以在那里设置一个断点来看看发生了什么。

IntelliTrace 是跟踪此类不明确异常的出色工具，但它仅适用于 VS Ultimate。

# java - 获取另一个 Java 程序的声音

> ID：15466713
> 
> 赞同：0
> 
> 时间：2013-03-17T21:57:04.150
> 
> 标签：java, audio, javasound, recording

我正在编写一个视频录制程序，并且进展顺利。我可以从屏幕上录制麦克风和视频。但是，我还希望能够从另一个 Java 程序中获取声音，然后将它们与视频同步。基本上，录制其他程序播放的音频。

有没有办法做到这一点？我对声音很陌生，并且已经阅读了一些内容。我想我需要设置一个混音器，但我不确定我是否真的可以通过这种方式从另一个 Java 程序中获取声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:30:15.000

这对于 java sound 是不可能的，不是因为 java sound 有任何特殊问题，而是因为并非 java 构建的所有音频 API 都支持此功能。（例如，mac 上的核心音频，windows 上的 ASIO。不确定 linux 上的 ALSA，但我认为它也不支持这个）。

如果您在 Windows 上并想编写 JNI/JNA 代码，您可以在其中一个音频 API 上使用支持此功能的 PortAudio（抱歉，我不记得是哪一个了）。

# javascript - 将数据从 js 发送到 mvc 控制器

> ID：15466714
> 
> 赞同：0
> 
> 时间：2013-03-17T21:57:14.460
> 
> 标签：javascript, asp.net-mvc

我在每个图像前面带有复选框的图像视图列表中。复选框填充有图像 ID，因此我可以识别检查了哪个图像进行操作。

单击按钮时，我正在识别检查了哪些图像并将每个图像 id 存储到整数数组中。我想将这些数组发送到 mvc3 控制器，但我遇到了问题，我在发送的参数（萤火虫）中出现错误。例如，如果检查了两个图像，我得到以下信息：

```
undefined   undefined
undefined   undefined 
```

这是代码

```
var imgList = [];
$('#deleteImgBtn').click(function () {
    $('.imgCheckbox:checked').each(function () {      
        var id = $(this).attr('id');
        imgList.push(id);
    });
    jQuery.ajaxSettings.traditional = true;   
    $.ajax({
        url: '/property/deleteimages',
        type: 'POST',
        data:  imgList ,
        success: function(result){
            alert("ok");
        }
    });
...

public ActionResult DeleteImages(int[] data)
        {
            return PartialView(data);            
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:04:49.660

尝试

```
$.ajax({
    url: '/Property/DeleteImages',
    type: 'POST',
    data:  { data : imgList },
    traditional : true,
    success: function(result){
        alert("ok");
    }
}); 
```

# php - 致命错误：无法在写入上下文中使用方法返回值

> ID：15466720
> 
> 赞同：0
> 
> 时间：2013-03-17T21:57:24.120
> 
> 标签：php

我正在尝试制作一个小型调查表，询问人们问题并回答是或否。

我正在尝试在第三个函数上执行前两个函数，并检查是否设置了答案，但我得到：

> 致命错误：无法在写入上下文中使用方法返回值。

有人可以帮助我或指出正确的道路吗？

```
 <?php
class survey {

    ... some functions ...

    function check($rep1, $rep2){

        if (isset($this->q1($rep1)) && isset($this->q2($rep2))) {
            #######################    #######################
            echo "Thank you for the feedback";
        }elseif (! array_key_exists(@$_POST['answer'], $var)) {
            echo "Please select an option<br/>";
        }
    }
}
?> 
```

错误在第一行的检查函数内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:01:07.610

由于函数总是返回*一些东西*（即使它是`NULL`），所以`isset()`在它们上使用是无意义的。

`isset`是一种语言结构，它接受一个变量名并告诉你它是否存在。

在这种情况下，为什么不直接写`if(isset($_POST['answer']))`？

# jersey - 与 Jersey、Guice 配置一起提供静态文件

> ID：15466722
> 
> 赞同：2
> 
> 时间：2013-03-17T21:57:29.013
> 
> 标签：jersey, jetty, guice, guice-servlet

我确实有以下配置作为 Guice 模块（而不是 web.xml）

```
public class RestModule extends JerseyServletModule {
@Override
protected void configureServlets() {
    install(new JpaPersistModule("myDB"));
    filter("/*").through(PersistFilter.class);

    bind(CustomerList.class);
    bind(OrdersList.class);

    bind(MessageBodyReader.class).to(JacksonJsonProvider.class);
    bind(MessageBodyWriter.class).to(JacksonJsonProvider.class);

    ImmutableMap<String, String> settings = ImmutableMap.of(
            JSONConfiguration.FEATURE_POJO_MAPPING, "true"
            );

    serve("/*").with(GuiceContainer.class, settings);
}
} 
```

为 REST 端点提供服务已经非常有效了。

[当用户请求http://example.com/](http://example.com/)时，我想从 /webapp/index.html 提供一个静态 html 文件

其余服务位于[http://example.com/customers](http://example.com/customers)或[http://example.com/orders](http://example.com/orders)

我不使用 web.xml。网络服务器是码头

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:16:56.293

请参阅：[Jersey /* servlet 映射导致静态资源出现 404 错误](https://stackoverflow.com/questions/12422660/jersey-servlet-mapping-causes-404-error-for-static-resources/12428843#12428843) 并将适当的参数添加到您的`settings`对象。就像是：

```
ImmutableMap<String, String> settings = ImmutableMap.of(
  JSONConfiguration.FEATURE_POJO_MAPPING, "true"
  "com.sun.jersey.config.property.WebPageContentRegex", "/.*html"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-05T23:57:05.863

正如我在评论中所说，我几乎整天都在为此苦苦挣扎。condit 链接到正确答案，但为了完整起见，这对我有用。我正在使用 Tomcat、jersey（和 jersey-guice）1.17.1 和 guice 3.0。

虽然我使用的是 Tomcat，但困难的部分（提供静态资源）应该没有那么不同。

```
public class JerseyConfig extends GuiceServletContextListener {
    @Override
    protected Injector getInjector() {
        return Guice.createInjector(new JerseyServletModule() {
            @Override
            protected void configureServlets() {

                // Bind  REST resources
                bind(HomeController.class);
                bind(AboutController.class);

                Map<String, String> params = new HashMap<String, String>();
                params.put("com.sun.jersey.config.property.WebPageContentRegex",
                    "/(images|css)/.*");
                filter("/*").through(GuiceContainer.class, params);
            }
        });
    }
} 
```

注意：最后两行是最重要的。

首先，忽略静态文件的参数：

```
"com.sun.jersey.config.property.WebPageContentRegex" (1.7 only!!!) 
```

我将此设置为正则表达式：

```
"/(images|css)/.*" 
```

...因为我的静态资源位于 src/main/webapp/images 和 src/main/webapp/css （我使用的是 maven 项目结构）。例如：

```
http://localhost:8080/myapp/images/logo.png 
```

（这仅适用于 jersey 1.7.x - 如果您使用 jersey 2.x，则应使用键“jersey.config.servlet.filter.staticContentRegex”或最好使用 Java 常量 ServletProperties.FILTER_STATIC_CONTENT_REGEX）。

最后，最后一行：

```
filter("/*").through(GuiceContainer.class, params); 
```

您应该使用： filter("/*").through 和 NOT serve("/*).with

如果你想出一个不同的解决方案，我想看看它是什么。

# c - 已声明未声明的标识符？

> ID：15466725
> 
> 赞同：0
> 
> 时间：2013-03-17T21:58:12.093
> 
> 标签：c, visual-studio-2010, undeclared-identifier

我正在为学校解决一个问题，并且在我的 suitsInHand 或 facesInHand 数组的每一行中都得到了“未声明的标识符”。上一次发生这种情况是因为我没有在块的顶部声明我的变量，但据我所知，这并不是出于同样的原因。谁能告诉我我做错了什么？

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define SUITS 4
#define FACES 13
#define AVAILABLE 0
#define TAKEN 1

void dealACard(char *suits[], char *faces[], int deck[][FACES]);
void dealAHand(char *suits[], char *faces[], int deck[][FACES]);
void analyzeHand(char *suits[], char *faces[]);

int main(void){
    int suitsInHand[4] = {0};
    int facesInHand[13] = {0};
    char *suits[4] = {"Hearts", "Diamonds", "Spades", "Clubs"};
    char *faces[13] = {"Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Jack", "Queen", "King", "Ace"};
    int deck[4][13] = {AVAILABLE};

    srand(time(NULL));
    dealAHand(suits, faces, deck);

    system("pause");
    return 0;
}

void dealAHand(char *suits[], char *faces[], int deck[][FACES]){
    int i;
    for(i=0;i<5;i++)
        dealACard(suits,faces,deck);
}

void dealACard(char *suits[], char *faces[], int deck[][FACES]){
    int suitIndex, faceIndex;
    memset(suitsInHand, 0, sizeof(suitsInHand));
    memset(facesInHand, 0, sizeof(facesInHand));

    suitIndex = rand() % 4;
    faceIndex = rand() % 13;
    while (deck[suitIndex][faceIndex]==TAKEN){
        suitIndex = rand() % 4;
        faceIndex = rand() % 13;
    }
    deck[suitIndex][faceIndex]=TAKEN;
    suitsInHand[suitIndex]++;
    facesInHand[faceIndex]++;

    printf("%s of %s.\n", faces[faceIndex], suits[suitIndex]);
}

void analyzeHand(char *suits[], char *faces[]){
    typedef enum {false, true} bool;
    int num_consec = 0;
    int rank, suit;
    bool straight = false;
    bool flush = false;
    bool four = false;
    bool three = false;
    int pairs = 0;

    for(suit=0;suit<SUITS;suit++)
        if(suitsInHand[suit]==5)
            flush = true;

    rank = 0;
    while (facesInHand[rank]==0)
        rank++;

    //for(;rank<FACES && facesInHand[rank]; rank++)
    //  num_consec++;

    if(num_consec == 5){
        straight = true;
        return;
    }

    for(rank = 0;rank<NUM_RANKS; rank++){
        if(facesInHand[rank]==4)
            four = true;
        if(facesInHand[rank]==3)
            three = true;
        if(facesInHand[rank]==2)
            pairs++;
    }

    if(straight == true && flush == true)
        printf("Straight flush.\n\n");
    else if(four == true)
        printf("Four of a kind.\n\n");
    else if(three == true && pairs == 1)
        printf("Full house.\n\n");
    else if(flush == true)
        printf("Flush.\n\n");
    else if(straight == true)
        printf("Straight.\n\n");
    else if(three == true)
        printf("Three of a kind.\n\n");
    else if(pairs == 2)
        printf("Two pairs.\n\n");
    else if(pairs == 1)
        printf("Pair.\n\n");
    else
        printf("High card.\n\n");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:00:43.100

这里：

```
void dealACard(char *suits[], char *faces[], int deck[][FACES]){
    int suitIndex, faceIndex;
    memset(suitsInHand, 0, sizeof(suitsInHand)); 
```

`suitsInHand`未在此范围内声明。`suitsInHand`在函数范围内声明，`main`不在`dealACard`范围内。

要解决此问题，您可以向函数添加参数以在文件范围内传递`suitsInHand`或声明。`suitsInHand`

这同样适用于`facesInHand`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:01:23.167

您已经在 main 中声明`suitsInHand`，但这并不意味着它可用于其他函数，您需要将其传递给其他函数以便他们可以访问它。

您已经到了要传递很多东西的地步，您应该将它们放入一个结构中，然后传递该结构。

此外，一般来说，您的 dealACard 函数可能非常非常讨厌。特别是如果一副牌中只有一张牌，可能需要很长时间才能获得正确的随机数来处理一副牌中的最后一张牌

# ruby - IO#lines 在 Ruby 2.0 中已弃用；如何逐行迭代？

> ID：15466727
> 
> 赞同：0
> 
> 时间：2013-03-17T21:58:14.553
> 
> 标签：ruby, ruby-2.0

我的 Ruby 1.9.3 代码打开一个文件并检查每一行是否存在某个字符串：

```
if File.open('Gemfile').lines.any?{|line| line.include?('pg')}
  puts "found 'pg'"
end 
```

Ruby 2.0.0 给了我一个警告：

> 警告：不推荐使用 IO#lines；改用#each_line

在 Ruby 2.0.0 中实现这一点的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T22:05:11.480

在 ruby​​ 2.0`IO#each_line`中可以返回一个枚举器。因此，替换`lines`为`each_line`或简单地替换`each`应该与您当前的代码完全相同。

```
if File.open('Gemfile').each {|line| line.include?('pg')}
  puts "found 'pg'"
end 
```

# jquery - jQuery 和 $(' 有什么区别 ') 和 $('p')

> ID：15466731
> 
> 赞同：1
> 
> 时间：2013-03-17T21:58:25.957
> 
> 标签：jquery

`$('<p>')`有人可以向我解释一下 jQuery和`$('p')`jQuery之间的区别吗？

例如，如果我写：

```
$('body').append($('<p>').html('hello my friend')); 
```

然后出现文本“你好，我的朋友”。

但是，当我写：

```
$('body').append($('p').html('hello my friend')); 
```

然后什么也没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:00:44.350

`$('<p>')`创建一个新的段落 ( `<p>`) 元素。( `<p></p>`)

`$('p')`选择所有现有的段落元素。

例如：

```
$('p').after($('<p>').html('foo')) 
```

将选择所有段落并在其后添加**新**段落。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:00:29.403

**区别：**

`$('<p>')`创建一个新的段落元素

`$('p')`选择 DOM 中的所有段落元素

**您的案例：**

*示例 1：*

```
$('body').append($('<p>').html('hello my friend')); 
```

将创建一个新的段落元素，给它一些文本，然后将元素添加到正文中。

*示例 2：*

```
$('body').append($('p').html('hello my friend')); 
```

将选择 DOM 中已经存在的所有段落元素并将其内容更改为“你好，我的朋友”，然后将它们全部附加到正文中，这没有多大意义，因为它们已经在 DOM 中。

由于运行此代码时没有任何内容可见，因此您的页面可能不包含任何`<p>`元素，因此没有任何内容与`$("p")`选择器匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T22:04:46.823

jQuery 可以解析 HTML 并创建一个实际的 DOM 元素。也就是说，当您执行类似的操作时`$("<p />")`，jQuery 会解析标记并在内部创建一个可以附加到文档的 DOM 段落元素。

另一方面，jQuery 集成了 CSS 选择器引擎[Sizzle 。](http://sizzlejs.com/)jQuery 函数接受 CSS 选择器，这意味着`$("p")`选择*文档中的所有段落元素*。您还可以使用更复杂的选择器`$("p:first-child")`，例如选择文档的第一段。

[在此处了解有关 jQuery CSS 选择器的更多信息。](http://api.jquery.com/category/selectors/)

# php - 购物车问题，商品在表格中显示错误

> ID：15466734
> 
> 赞同：0
> 
> 时间：2013-03-17T21:58:54.500
> 
> 标签：php, mysql, html-table

将商品添加到购物车时，它会创建购物车，然后显示包含商品添加信息的表格。每当添加新项目时，它都会在原始项目下方创建一个新表，并在它们应该作为新行添加时重新创建列标题，将列标题共享为一个表。到目前为止我的代码：

```
function minicart()
{
    $items = 0;
    $tbl = array();
    foreach($_SESSION as $name => $value)
    {
        if ($value > 0) {
            if (substr($name, 0, 5)=='cart_')
            {
                $id = substr($name, 5, (strlen($name) -5));
                $get = mysql_query('SELECT id, name, price FROM products WHERE id='.mysql_real_escape_string((int)$id));
                $tbl[] = '<table border="1"><thead><tr>'
                  . '<th>Item</th>'
                  . '<th>Quantity</th>'
                  . '<th>Unit Price</th>'
                  . '<th>SubTotal</th>'
                  . '<th>Action</th>'
                  . '</tr></thead><tbody>'
                ;
                while ($get_row = mysql_fetch_assoc($get)) {
                    $items++;
                    $sub = $get_row['price'] * $value;
                    $tbl[] = '<tr>'
                      . '<td>' . $get_row['name'] . '</td>'
                      . '<td>' . $value . '</td>'
                      . '<td>&pound;' . number_format( $get_row['price'], 2 ) . '</td>'
                      . '<td>$pound;' . number_format( $sub, 2) . '</td>'
                      . '<td>'
                      . ' <a href="minicart.php?remove=' . $id . '">[-]</a> '
                      . ' <a href="minicart.php?add=' . $id . '">[+]</a> '
                      . ' <a href="minicart.php?delete=' . $id . '">[Delete]</a>'
                      . '</td>'
                      . '</tr>'
                    ;
                }
                $tbl[] = '</tbody>';
            }
            $total += $sub;
        }
    }
    if ($items==0)
    {
        echo "Your cart is empty";
    }
    else
    {
        $tbl[] = '<tfoot><tr>'
               . '<td colspan="3" style="text-align:right; font-weight:bold">Total:</td>'
               . '<td>&pound;' . number_format($total, 2) . '</td></tr></tfoot></table>';
        echo implode( "\n", $tbl );

    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:07:08.487

html 标签不匹配，`</table>`如果您只想创建一行，则不需要。tfoot 是一样的，如果再添​​加，表格标题会重复。

仅将`<tr>...</tr>`部分添加到 $tbl，这应该可以工作。

# java - 升序子串编译错误

> ID：15466736
> 
> 赞同：0
> 
> 时间：2013-03-17T21:59:45.707
> 
> 标签：java, if-statement, for-loop, compiler-errors, substring

我正在尝试创建一个程序，该程序从任何给定的数字输入中读取最长的升序子字符串。

（例如输入=“43123”输出=“123”）

我已经完成了对循环的编辑，但是程序没有编译并不断提到倒数第二个右括号的“缺少返回语句”。

我试过添加 return asc; 并打破；但似乎都不起作用。

以下是我的代码：

```
import java.util.Scanner;        
public class Ascending{

    public static void main(String args[]){

        System.out.print("Enter a number = ");

        //scan the input
        Scanner in = new Scanner(System.in);
        String n = in.nextLine();

        //print solution
        System.out.println("output = " + itsAscending(n));

    }

    public static String itsAscending(String n) {

        int length = n.length();    

        for(int i = 0; i < length; i++) {

            char first = n.charAt(i);       
                char next = n.charAt(i+1);      
            int f = (int)(first - 48);       
            int nx = (int)(next - 48);      

            String asc;
            String works = ""; 

            if (f<nx) {

                works = works + n.substring(i, i+2);
                asc = works.substring(0, works.length()-1); 
                return asc;
            }

            else {

                works = works + "";
                asc = works.substring(i, works.length()-1); 
                return asc;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:55:40.290

只需将我的评论作为答案，以防有人遇到类似问题。

您需要在 for 循环之外返回。因此，不要在 else 语句中返回 asc，而是在循环外返回它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:32:47.850

@Ali Alamiri 是对的，如果 n 的长度为 0，您将永远不会进入 for 循环，因此您将没有返回值。@Ali Alamiri 应该获得答案的学分

# c++ - sizeof 给我的结构带来了意想不到的结果

> ID：15466749
> 
> 赞同：1
> 
> 时间：2013-03-17T22:00:45.067
> 
> 标签：c++, memory, alignment, sizeof, memory-alignment

我的代码中有这个结构：

```
struct BlockDescriptor
{
    struct BlockDescriptor * pNext;
    bool _isFree;
}; 
```

我倾向于相信它的大小是 4 + 1 = 5 （4 代表指针和`1`）`bool`，但由于某种原因`sizeof(struct BlockDescriptor)`返回 8 ！有人能告诉我为什么吗？

是因为包装问题，5 被四舍五入为 4 的倍数（因为 32 位是大多数计算机最熟悉的），是否有某种方法可以强制它使用真实大小（如果这实际上是真实的尺寸） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:23:35.440

的数据成员`struct`默认对齐。这些数据成员之间可能存在填充以及最后一个数据成员之后的填充。在您的情况下，填充最有可能在最后。

第一个数据成员是一个指针，在您的情况下需要 4 个字节的内存。然后虽然另一个成员是`char`只需要1个字节的内存，有一个填充到4的倍数，但原因并不是你说*的“32位是大多数计算机最舒服的”*，而是因为`4`是最大数据成员的大小。

通常有一个 pragma 指令允许您指定可用的自定义对齐方式。在 Visual Studio 中，有[`#pragma pack`](http://msdn.microsoft.com/en-us/library/2e70t5y1%28%29.aspx), 在这种情况下可能会对您有所帮助。只要确保你知道你在做什么。尽管您将最小化内存使用量，但它可能会对代码的性能产生负面影响。

有关更多信息，请查看相关问题：
[如何最小化结构类型的内存使用？](https://stackoverflow.com/q/4650896/1168156)
[sizeof 如何计算结构的大小 结构](https://stackoverflow.com/q/2659704/1168156)
[的大小是否必须是该结构对齐的精确倍数？](https://stackoverflow.com/q/4637774/1168156)
甚至[确定 C/C++ 结构相对于其成员的对齐方式](https://stackoverflow.com/q/364483/1168156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:10:12.417

发布答案：Luka Rahne 和 cnicutar

pNext 和 _isFree 之间有 Padding。您可以通过特定于编译器的机制强制“打包”，将 #pragma pack(1) 放在结构定义之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:47:45.953

当 CPU 访问内存以获取数据项（或结构成员）时，它实际上向内存控制器发送了一个请求，内存控制器执行一些技巧以使 DRAM 看起来是一个结构良好的数据存储。实际上，DRAM 是一堆单元，排列成 M 行，每行 N 位（其中 N 可能是一千左右）。

知道大多数体系结构一次处理 4、8、16 或 32（或有时更大）位，内存控制器针对从 4 的倍数地址中提取进行了优化。当您从地址 abcd1002 中提取单个字节时会发生什么？嗯，内存控制器从地址 abcd1000 获取四个字节，然后*将*它们移动以获得第三个字节（记住，它是 0、1、然后是 2），并给你你糟糕的非对齐字节。因此，从对齐的地址获取总是比从非对齐的地址获取更快。

意识到这一事实，编译器通过填充数据结构积极优化速度，以便它们以内存友好的方式布局。

希望能为这个问题提供一个重要的计算机体系结构视角。我没有在当前的任何回复中看到这一点，因此我想添加我的 0.02 美元。

# c++ - 难以将函数转换为单个方程 (constexpr)

> ID：15466750
> 
> 赞同：0
> 
> 时间：2013-03-17T22:00:49.307
> 
> 标签：c++, c++11, constexpr

我正在将我的代码库的许多位操作函数转换为`constexpr`. 没有真正的理由这样做，主要是“只是因为”。

在 C++11 中创建函数 constexpr 要求代码是单个表达式，这并不总是可能的（并且并不总是需要）。

无论如何，我在使用此功能时遇到了一些问题：

```
//Given a binary value like 00000100011, fills every bit below the highest '1' bit with a '1'.
//Example: 00000100011 -> 00000111111
inline uint32_t FillUntilHighestBit(uint32_t value)
{
    value |= (value >> 1);
    value |= (value >> 2);
    value |= (value >> 4);
    value |= (value >> 8);
    value |= (value >> 16);

    return value;
} 
```

这是我写的一次尝试：http: [//ideone.com/BeQZUH](http://ideone.com/BeQZUH)

```
return (value |= (value |= (value |= (value |= (value |= (value >> 1)) >> 2) >> 4) >> 8) >> 16); 
```

问题是，`constexpr`不允许修改变量或将结果存储在变量中，因此复合 OR 赋值 |= 运算符不可用。

这意味着要将函数放在一个方程中，我必须做更多的 OR 和位移，因为我不能将中间结果存储在变量中。

任何人都看到了解决这个问题的任何方法，或者有一个更好的等式是有效的 constexpr 提供相同的结果？这对我来说不是一个关键问题，但它是我无法转换为的一组函数中唯一一个`constexpr`，并且坐在他们中间嘲笑我。=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:05:38.423

您可以从 constexpr 中调用另一个 constexpr，因此您可以将其写为：

```
constexpr uint32_t internalFunc(uint32_t value,int s) {
    return (value >> s) | value;
}
constexpr uint32_t FillUntilHighestBit(uint32_t value) {
    return internalFunc(
     internalFunc(
      internalFunc(
       internalFunc(
        internalFunc(value,1)
       ,2)
      ,4)
     ,8)
    ,16);
} 
```

此外，您的原始函数在每行中使用两次值进行或运算。

# javascript - 递归自调用函数和异步操作

> ID：15466754
> 
> 赞同：0
> 
> 时间：2013-03-17T22:01:16.083
> 
> 标签：javascript, asynchronous, winjs

从[这个问题](https://stackoverflow.com/questions/7696747/call-asynchronous-function-inside-for-loop)中，我了解到我可以使用`forEach`循环或自调用来执行异步 I/O 操作。我不确定为什么它对我不起作用，但是事情的循环部分可以正常工作，而无需调用任何异步函数。

```
var fileNames = ["fileA", "fileB", "fileC", "fileD", "fileE", "fileF", "fileG", "fileH"];
var json;

(function parseFiles(i) {

    console.log(i + " " + fileNames[i]);

    var uri = new Windows.Foundation.Uri('ms-appx:///data/' + fileNames[i] + '.json');

    Windows.Storage.StorageFile.getFileFromApplicationUriAsync(uri).then(function (file) {
        Windows.Storage.FileIO.readTextAsync(file).then(function (contents) {
            json[fileNames[i]] = JSON.parse(contents);

            if (i < fileNames.length) {
                parseFiles(i+1);
            } else {}
        });
    });

})(0); 
```

我的控制台输出有点奇怪：

```
0 fileA
1 fileB
0 fileA
2 fileC
1 fileB
3 fileD
2 fileC
3 fileD 
```

这里有两个问题：

1.  如何修复它以使其从 fileA 转到 fileH？
2.  解析文件后，我是将代码放在`json`自调用函数之后还是在返回的 Promise 函数的`else`循环中使用变量？`then``readFileAsync()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:25:47.080

我最终这样做了：

```
var fileNames = ["fileA", "fileB", "fileC", "fileD", "fileE", "fileF", "fileG", "fileH"];
var json;

(function parseFiles() {

    var name = fileNames.pop();

    Windows.Storage.StorageFile.getFileFromApplicationUriAsync(new Windows.Foundation.Uri('ms-appx:///data/' + name + '.json'))
        .then(function (file) {
            return Windows.Storage.FileIO.readTextAsync(file);
        }, function error(e){
            console.dir(e);
        })
        .then(function (contents) {
            json[name] = JSON.parse(contents);
        })
        .then(function () {
            console.log("Name: "+name+" Remaining array length:"+fileNames.length);

            if (fileNames.length === 0) {
                console.log('all done');
                // do whatever else here
            } else {
                parseFiles();
            }
        });
})(); 
```

我很高兴递归函数中的异步方法使用了 Promise 接口，所以我不必编写一大堆递归函数。

# php - 第一次后 INSERT INTO MySQLi 语句不起作用

> ID：15466763
> 
> 赞同：1
> 
> 时间：2013-03-17T22:02:13.103
> 
> 标签：php, mysql, post, mysqli, sql-insert

我有一个非常标准的 MySQL insert into 语句，它似乎不起作用。我正在向此页面发布一个 HTML 表单，它正在翻译信息并插入到表中 (pending_jobs)。它第一次奏效，此后一直没有奏效。我不想更新该行，而是在每次提交此代码时添加一个全新的行，所以我认为这将非常简单。这是代码：

```
<?php
include('includes/connect.php');
$id=$mysqli->real_escape_string($_POST['id']);
$sql = "SELECT * FROM users WHERE id='$id'";
$result = $mysqli->query($sql);
$row = mysqli_fetch_array($result);

$user_id = $_SESSION['user_id'];

$company_name = $row['company_name'];
$date_registered = $row['date_registered'];
$job_title=$mysqli->real_escape_string($_POST['jobtitle']);
$job_description=$mysqli->real_escape_string($_POST['jobdescription']);
$salary=$mysqli->real_escape_string($_POST['salary']);
$industry_sector=$mysqli->real_escape_string($_POST['industry']);
$number_people=$mysqli->real_escape_string($_POST['num_people']);

if(isset($_POST['payment']) && $_POST['payment']=='yes'){
$payment_received = 'Yes';
}
else{
$payment_received = 'No';
}

$sql_add = "INSERT INTO pending_jobs (company_name, job_title) VALUES ('$company_name', '$job_title')";
$result_add = $mysqli->query($sql_add);

if(isset($result_add)){
  session_start();
  $id = $row['id'];
   $_SESSION['user_id'] = $user_id;
  header('location:profile.php?id='.$id);
} else {
echo "<script>alert('".$job_title."');</script>";
}
?> 
```

它正在重定向到 profile.php 页面，所以我知道 $result_add 实际上正在通过，但是当我检查数据库中的表时，没有新行。关于为什么它不会创建新行的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:20:08.413

改变你`query`的

```
$result_add = $mysqli->query($sql_add) or die($mysqli->error); 
```

你会立即看到问题。还

```
 if (isset($result_add)) { 
```

将永远是真的，因为`$result_add`将是`true`或`false`为您的插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:21:24.533

尝试在语句失败的情况下返回错误，这样你就知道出了什么问题。

```
$sql = "SELECT * FROM users WHERE id='$id'";
$result = $mysqli->query($sql) or die("cannot select from users");

$result_add = $mysqli->query($sql_add) or die("cannot insert"); 
```

（有人提出`or trigger_error(mysqli->error.$result_add);`，但我没有测试过）。

```
replace `if(isset($result_add)){` with `if($result_add){ 
```

查看表格的建议也是一个不错的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:15:04.080

唯一的列或索引可能会阻止此插入语句。只需在 phpmyadmin 或 mysql 控制台中测试相同的插入。此外，即使 $result_add 为假，isset() 也会为真 :)

# javascript - 使用 JQuery/javascript 计算

> ID：15466767
> 
> 赞同：1
> 
> 时间：2013-03-17T22:02:21.883
> 
> 标签：javascript, jquery

所以我有一个网页，其中有两个用于设置值的滑块和四个单选按钮，用于选择计算操作和一个“计算”按钮。如何检测滑块值和选择了哪个操作，然后相应地计算值并将它们输出到“计算”按钮按下的标签中？注意：我对 javascript/jquery 完全陌生。

代码：

```
 <!doctype html>

<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <script>
              $(function () {
                  $("#slider-range-max").slider({
                      range: "max",
                      min: 1,
                      max: 1000,
                      value: 0,
                      slide: function (event, ui) {
                          $("#amount").val(ui.value);
                      }
                  });
                  $("#amount").val($("#slider-range-max").slider("value"));
              });
        </script>
    </head>
    <body>
        <p>
          <label for="amount">First value:</label>
          <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
        </p>
        <div id="slider-range-max"></div>
    </body>
</html>

<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <script>
            $(function () {
                $("#slider-range-max2").slider({
                    range: "max",
                    min: 1,
                    max: 1000,
                    value: 0,
                    slide: function (event, ui) {
                        $("#amount2").val(ui.value);
                    }
                });
                $("#amount2").val($("#slider-range-max2").slider("value"));
            });
        </script>
    </head>
    <body>
        <p>
          <label for="amount">Second value:</label>
          <input type="text" id="amount2" style="border: 0; color: #f6931f; font-weight: bold;" />
        </p>
        <div id="slider-range-max2"></div>
    </body>
</html>

<br />
<br />
<br />
<div id=operacija">
    Choose operation:<br />
    <br />
    <html>
        <head>
          <meta charset="utf-8" />
          <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
          <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
          <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
          <link rel="stylesheet" href="/resources/demos/style.css" />
          <script>
              $(function () {
                  $("#radio").buttonset();
              });
          </script>
        </head>
        <body>
        <form>
          <div id="radio">
            <input type="radio" id="radio1" name="radio" /><label for="radio1">Addition</label>
            <input type="radio" id="radio2" name="radio" /><label for="radio2">Substraction</label>
            <input type="radio" id="radio3" name="radio" /><label for="radio3">Multiplication</label>
            <input type="radio" id="radio4" name="radio" /><label for="radio4">Division</label>
          </div>
        </form>
        </body>
    </html>
</div>
<br />
<br />

<div id="gumb1">
<!doctype html>

<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
        <link rel="stylesheet" href="/resources/demos/style.css" />
        <script>
                $(function () {
                  $("button").button().click(function (event) {
                  event.preventDefault();
              });
              });
        </script>
    </head>
    <body> 
        <button>Calculate</button> 
    </body>
</html>
</div>

<br />
<br />
<div id=rezultat">
    <label for="amount">Result:</label>
    <input type="text" id="Text1" style="border: 0; color: #f6931f; font-weight: bold;" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:25:32.800

我知道很多人说你应该处理你的 HTML。**是**的，我也这么认为，但是当我尝试学习时，我自己也学到了很多观看示例（javascript 或 php）。所以我决定向你展示如何做到这一点。当然，你会从中学习，或者只是复制它并使用它。由你决定。我只是希望你能试着理解它。

```
$("button").button().click(function (event) {
     event.preventDefault();
     var value1 = parseInt($("#amount").val()); //get value of first slider
     var value2 = parseInt($("#amount2").val()); //value of second slider
     var result = 0;
     var radioval = $('input[name=radio]:checked', '#myForm').val(); //get value of the radio bytton

     //calculations depending of chose of the radio button
     if (radioval == "Addition") result = value1 + value2;
     else if (radioval == "Substraction") result = value1 - value2;
     else if (radioval == "Multiplication") result = value1 * value2;
     else if (radioval == "Division") result = value1 / value2;

     $("#resultlabel").text("Result: " + result); //show result
 }); 
```

整个代码，有一些修复（我删除了 div 中的 head/html/body 标记）你可以在这里找到：http: [//jsfiddle.net/k9rGx/9/](http://jsfiddle.net/k9rGx/9/)

请记住，您只需`<head></head>`在网站顶部的标签中链接一次 .js 和 .css 文件。您不需要每次使用 javascript 时都这样做。它适用于整个站点。

我只是希望它能帮助你学习新的东西。

# ms-access - 自动更新文本框

> ID：15466770
> 
> 赞同：0
> 
> 时间：2013-03-17T22:02:45.717
> 
> 标签：ms-access, combobox, ms-access-2007

我的表格中有这张图片。 ![在此处输入图像描述](../Images/8fc01c0e0603cf63b07b52ad1841afca.png) .当我从我的组合框中选择值时，在我的文本框中输入值并单击保存...我希望在我的文本框中有值以进行一些计算，因为我点击了组合中选择的值的保存按钮框，但我不确定我的访问表单中的哪些属性要进行计算......就像我在组合框中选择了每月在我的文本框中输入 4 当我点击保存按钮时，我的文本框中的值 4 应该是 4（出发 * 2) 即 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:04:03.310

在设计视图中打开表单，右键单击保存按钮并选择属性。在属性表中选择**事件**选项卡并在**单击**事件中选择**[事件过程]**

并单击它前面的小按钮**...。**在 VBA 中，您可以编写计算并保存记录。这是一个例子

```
textBox1= textBox1 * 2          ' you can assign any calculation you need
If Me.Dirty then Me.Dirty=False ' Save the record 
```

# hibernate - 休眠未在插入时设置外键

> ID：15466773
> 
> 赞同：0
> 
> 时间：2013-03-17T22:03:10.027
> 
> 标签：hibernate, orm, foreign-keys, mapping, reverse-engineering

我有多对一的关系，当我尝试插入一个值时，没有传递前键。hibernate 在生成的 SQL 查询中不包含它的值。

City 和 LocalizedLocation 实体的定义：

```
<!-- LocalizedLocation -->
 <hibernate-mapping>
   <class name="servicedb.dal.domain.LocalizedLocation" table="localized_location" catalog="DB">
     <composite-id name="id" class="servicedb.dal.domain.LocalizedLocationId">
     <key-property name="localeId" type="int">
       <column name="locale_id" />
     </key-property>
     <key-property name="locationId" type="int">
       <column name="location_id" />
     </key-property>
     </composite-id>
    <many-to-one name="location" class="servicedbcedb.dal.domain.Location" update="false" insert="false" fetch="select">
   <column name="location_id" not-null="true" />
 </many-to-one>
 <many-to-one name="city" class="servicedb.dal.domain.City" update="false" insert="false" fetch="select" cascade="all">
     <column name="locale_id" not-null="true" />
     <column name="country_code" length="2" not-null="true" />
     <column name="city_id" not-null="true" />
     </many-to-one>    
        <property name="title" type="string">
     <column name="title" length="120" />
     </property>
   </class>
 </hibernate-mapping>

 <!-- City -->
 <hibernate-mapping>
   <class name="servicedb.dal.domain.City" table="city" catalog="DB">
     <composite-id name="id" class="servicedb.dal.domain.CityId">
     <key-property name="localeId" type="int">
       <column name="locale_id" />
     </key-property>
     <key-property name="countryCode" type="string">
       <column name="country_code" length="2" />
     </key-property>
     <key-property name="id" type="int">
       <column name="id" />
     </key-property>
     </composite-id>
     <property name="name" type="string">
     <column name="name" length="100" not-null="true" />
     </property>
     <set name="localizedLocations" table="localized_location" inverse="true" lazy="true" fetch="select">
     <key>
       <column name="locale_id" not-null="true" />
       <column name="country_code" length="2" not-null="true" />
       <column name="city_id" not-null="true" />
     </key>
     <one-to-many class="servicedb.dal.domain.LocalizedLocation" />
     </set>
   </class>
 </hibernate-mapping> 
```

下面的代码应该插入 Location，然后是 LocalizedLocation，LocalizedLocation 应该有指向插入位置的外键，但由于某种原因它没有。

```
Session session = locationDAO.getSession();
session.beginTransaction();

// Location inititalization, the object is correctly populated
session.save(location);

LocalizedLocation localizedLocation = new LocalizedLocation();
localizedLocation.setId(new LocalizedLocationId(locale.getId(), location.getId()));

localizedLocation.setCity(city); // the city already exists on the database, object is not null
localizedLocation.setLocale(locale); // the locale already exusts on the database
localizedLocation.setLocation(location);

session.save(localizedLocation);
session.getTransaction().commit(); 
```

提交后，生成的插入查询如下：

```
insert into DB.localized_location (title, description, locale_id, location_id)  values (?, ?, ?, ?) 
```

但它应该是：

```
insert into DB.localized_location (title, description, locale_id, location_id, city_id, country_code)  values (?, ?, ?, ?, ?, ?) 
```

有人知道为什么生成的 sql 插入语句中不包含 city 表的外键吗？

我还使用 eclipse 和 reveng.xml 对数据库进行逆向工程，所以我的 hbm 文件是自动生成的，我没有使用 EJB3 注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:12:22.257

您在 LocalizedLocation 映射中的*城市*属性似乎具有“insert=false”和“update=false”。以这种方式映射，它使其成为“反向”关系，其中仅从另一侧保存连接 - 即在保存位置时。

要么删除这两个属性，要么在建立关系后保存城市。

*编辑*：更正了属性。

顺便说一句，如果城市没有映射 LocalizedLocations 列表 - 因为我不知何故从你的描述中得到了这个想法 - 将这两个属性设置为 false 似乎没有意义，因为插入该关系的唯一方法是映射另一个同一列上的属性（或直接在数据库上执行）。

# c - C语言中有多少个字符最长

> ID：15466774
> 
> 赞同：0
> 
> 时间：2013-03-17T22:03:24.710
> 
> 标签：c, linked-list

我有函数，它应该计算有多少个字符有最长的单词，但它算错了。

例如，如果我在第一个比第二个短时输入两个单词：“我的名字”程序显示最长的单词有 2 个字符。但是当我输入“name my”时，它显示结果是 4。为什么会这样？

```
void max_chars(ListNodePtr sPtr)
{
    int i = 0;
    int max = 0;

    while (sPtr->next != NULL) {
        if (isalpha(sPtr->data)) {
            i++;
        } else {
            if (i > max) {
                max = i;
            }
            i = 0;
        }
        sPtr = sPtr->next;
    }

    printf(" \n The Longest word have : %d chars \n", max);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:10:51.893

当`my name`您到达节点时，`e`您`break`会循环，因为`next`is`null`并且因此`max`不会更新。您也应该在循环之外
更新或更改循环的条件`max`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:17:58.533

```
void max_chars(ListNodePtr sPtr)
{
    int i = 0;
    int imax = 0;

    for( ;sPtr; sPtr = sPtr->next;) {
        if (isalpha(sPtr->data)) { if(++i > imax) imax=i; }
        else { i = 0;  }
    }

    printf(" \n The Longest word have : %d chars \n", imax);
} 
```

# c# - 为什么我的 WPF 应用程序在最小化一段时间后变慢了？

> ID：15466776
> 
> 赞同：2
> 
> 时间：2013-03-17T22:03:37.360
> 
> 标签：c#, wpf, windows

假设您有一个使用 WPF 开发的应用程序，当您运行该应用程序并将其最小化时，过了一段时间（比如说 30 分钟或更长时间），当您恢复应用程序的窗口时，您发现它被冻结（或缓慢）了一段时间几秒钟。

我的问题是为什么它变慢了，有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:35:45.443

这不是 WPF 的属性，它是虚拟内存的属性。

基本上，现代操作系统试图让程序运行得尽可能快——但它们也允许许多程序同时运行，而不是它们的所有内存一次都可以放入你微不足道的 RAM 中。因此，当操作系统看到一个正在运行的程序需要分配一个新的内存页面，但 RAM 已经满了页面时，它会将其中一个页面（首选一段时间未使用的页面）踢到硬盘上，进入称为页面文件的文件。

当该内存页面所属的程序尝试访问它时，这称为“页面错误” - 操作系统检测到该页面不在 RAM 中而是在磁盘上，并且必须在继续执行之前将其读入 RAM。这相对较慢，因为从硬盘读取比从 RAM 读取慢。如果一个程序已经有一段时间没有运行了，可以想象它的所有页面都已经被调出到 RAM 中——所以它会很慢，直到它停止遇到页面错误。

我对如何处理此问题没有经验，但您可以尝试以下操作：

1）编写程序以异步方式运行 - 因此，当一个线程正在执行触发页面错误的操作时，该程序会在其他线程上响应

2）故意触摸内存的每一页以将其全部分页（仅当您的程序非常重要以至于它应该一直占用 RAM 时才推荐使用，即使不使用时也是如此！）

3）“扔硬件”解决方案 - 购买更多 RAM :)

# c - 使用多个参数解析命令行选项 [getopt?]

> ID：15466782
> 
> 赞同：16
> 
> 时间：2013-03-17T22:04:09.703
> 
> 标签：c, parsing, command-line-arguments

我需要我的程序从命令行获取几个参数，语法如下：

```
getpwd -l user1 user2 ... -L -X -S... 
```

所以，我需要让用户支持这个`-l`选项。我尝试使用`getopt`，但运气不佳，它仅在我将其他选项放在之前才有效`-l`：

```
getpwd -L -X -S ... -l user1 user2 ... 
```

我的代码（用于`-l`和`-S`）：

```
 while((c = getopt(argc, argv, "l:S")) != -1){
    switch(c){
        case 'l':
            index = optind-1;
            while(index < argc){
                next = strdup(argv[index]); /* get login */
                index++;
                if(next[0] != '-'){         /* check if optarg is next switch */
                    login[lcount++] = next;
                }
                else break;
            }
            break;
        case 'S':
            sflag++;                        /* other option */
            break;
        case ':':                           /* error - missing operand */
            fprintf(stderr, "Option -%c requires an operand\n", optopt);
            break;
        case '?':                           /* error - unknown option */
            fprintf(stderr,"Unrecognized option: -%c\n", optopt);
            break;
      }
   } 
```

`optopt`并且`optind`是`extern int`。

所以，问题是：我可以使用`getopt()`函数 (or `getopt_long()`) 吗？还是我必须编写自己的解析器才能得到我需要的东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-17T22:53:15.397

您的代码实际上非常非常接近工作。您唯一缺少的是`getopt`只希望您在 之后使用一个参数`-l`，因此在第一个参数之后继续命令行解析`-l`. 由于您背着它并提出更多参数，因此您必须告诉`getopt`从哪里开始再次解析命令行。

`getopt`将该信息存储在全局变量`optind`中。当我添加该行时：

```
optind = index - 1; 
```

`break;`在您的情况之前`l`，您的代码开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T20:11:35.303

我写了一个 C 库（GPL 许可）来解析命令行参数：

[https://github.com/Vincenzo1968/myoptParser](https://github.com/Vincenzo1968/myoptParser)

[https://github.com/Vincenzo1968/myoptParser/blob/master/how_to_use.md](https://github.com/Vincenzo1968/myoptParser/blob/master/how_to_use.md)

您可以指定选项接受的最小和最大参数数。您还可以指定一个选项采用零个或多个参数（或一个或多个、两个或多个，等等）。当然，您可以指定固定数量的参数：零、一、二等。

您还可以指定参数的类型：字符串、整数或浮点数。解析器检查指定的数字和类型是否匹配，否则返回错误。

解析器还允许您指定是否需要选项。您最终可以指定互斥选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T15:50:49.813

以下函数将为参数列表中的单个选项生成 argc、argv 对：

```
void GetArgsList (int argc, char *argv[], int* o_argc, char*** o_argv)
{
    char** ret = NULL;
    int i;
    int count = 0;

    for (i = optind - 1; i < argc ; ++i)
    {
        if (argv[i][0]=='-')
        {
            break;
        }
        else
        {
            if (NULL == ret)
            {
                ret = &argv[i];
            }
            count++;
        }
    }

    optind = i - 1;

    if (o_argc)
    {
        *o_argc = count;
    }

    *o_argv = ret;
} 
```

# java - 不同正则表达式方言的自动翻译

> ID：15466785
> 
> 赞同：0
> 
> 时间：2013-03-17T22:04:36.000
> 
> 标签：java, javascript, regex

是否可以自动将 Javacript 正则表达式转换为 Java 正则表达式？我发现手动将 Java 正则表达式转换为 JavaScript 正则表达式通常很繁琐，反之亦然，因此我想找到一种方法来自动化这种转换。

例如，将像这样的正则表达式从 JavaScript 转换为 Java 正则表达式语法会很有用，反之亦然：

`/(I|you|me).*(d|st)(o|a)(|gger)(ing|ed)/`<-- 这匹配“I will stagger”、“you have staggered”等。

是否有任何自动转换工具可以将正则表达式从 Java 转换为 JavaScript，反之亦然？

# java - 创建 Gui 实例（使用 ModLoader 进行 Minecraft 改装）

> ID：15466787
> 
> 赞同：1
> 
> 时间：2013-03-17T22:04:43.910
> 
> 标签：java, user-interface, minecraft

首先，我真的只是在尝试学习 Java。我现在要做的就是在屏幕上显示一个字符串；

所以我有我的 mod_Bite 类和我的 BiteGui 类。（Bite只是一个随机的名字，我当时正在吃东西）

```
//mod_Bite.java
package net.minecraft.src;

import net.minecraft.client.Minecraft;

public class mod_Bite extends BaseMod {

    @Override
    public String getVersion() {
        return "1.0";
    }

    @Override
    public void load() {
        ModLoader.setInGameHook(this, true, true);
    }

    public mod_Bite() {
    }

    @Override
    public boolean onTickInGame(float tick, Minecraft mc)
    {
        return true;
    }
} 
```

和

```
//BiteGui.java
package net.minecraft.src;
import net.minecraft.client.Minecraft;

public class BiteGui extends Gui {

    private Minecraft mc;

    public BiteGui(){
        drawBiteGui();
    }

    public void drawBiteGui() {
        FontRenderer fr = this.mc.fontRenderer;
        drawString(fr, "Testing!", 5, 5, 0xffffff);
    }
} 
```

我不明白的是如何创建它。我尝试在 onTickInGame 方法中创建一个 BiteGui 对象（尽管我认为它不应该在每个刻度上创建它）

```
public boolean onTickInGame(float tick, Minecraft mc)
{
    BiteGui biteObj = new BiteGui();
    return true;
} 
```

但它说有一个空指针异常，据我所知，这意味着我正在尝试使用没有被分配任何值或者它没有指向任何东西的东西。我显然没有在这里做点什么。

* * *

编辑：我更改了代码，它可以工作，除了文本随着每个刻度闪烁而不是停留在屏幕上。这显然是因为我在 onTickInGame 方法中创建对象，但我不知道如何从其他任何地方初始化 Minecraft。

```
package net.minecraft.src;

import net.minecraft.client.Minecraft;

public class mod_Bite extends BaseMod {

    @Override
    public String getVersion() {
        return "1.0";
    }

    @Override
    public void load() {
        ModLoader.setInGameHook(this, true, true);
    }

    public mod_Bite() {

    }

    @Override
    public boolean onTickInGame(float tick, Minecraft mc)
    {
        BiteGui biteObj = new BiteGui(mc);
        return true;
    }
} 
```

和

```
package net.minecraft.src;
import net.minecraft.client.Minecraft;

public class BiteGui extends Gui {

    private Minecraft mc;

    public BiteGui(Minecraft minecraft) {
        this.mc = minecraft;
        drawBiteGui();
    }

    public void drawBiteGui() {
        FontRenderer fr = this.mc.fontRenderer;
        drawString(fr, "Testing!", 5, 5, 0xffffff);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:07:23.337

你从来没有`mc`在你的`BiteGui`班级初始化。然后你尝试在`drawBiteGui`with中引用它`this.mc.fontRenderer`。`NullPointerException`正如你所说，这会给你一个。

```
private Minecraft mc; 
```

……相当于……

```
private Minecraft mc = null; 
```

你应该在你的`BiteGui`构造函数中添加一些东西来初始化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T00:06:56.897

我想出了如何让它停止闪烁！在 mod_Bite 中，

改变这个：

```
ModLoader.setInGameHook(this, true, true); 
```

对此：

```
ModLoader.setInGameHook(this, true, false); 
```

# grails - 允许通过 grails/gorm 中的配置更改表名的正确方法是什么

> ID：15466796
> 
> 赞同：0
> 
> 时间：2013-03-17T22:05:21.527
> 
> 标签：grails, grails-orm

我目前有以下代码来定义我的“用户”类

```
class User
{
  String username

  static mapping = {
    table ConfigurationHolder.config.console.datasource.table.user.mapping ?: 'user'
  }
} 
```

这适用于 grails 1.3.5，但在升级到 2.2.1 后，grails 不断抱怨`ConfigurationHolder`被弃用。

所以从技术上讲，它“仍然”可以正常工作，但是一旦他们删除了这个类，将会发生什么。文档说“改用依赖注入”。但我不能使用依赖注入，因为`mapping`它是静态的。

真正的问题是允许通过配置重命名表的“正确”方法是什么？

谢谢颜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:16:04.273

您可以使用`grails.util.Holders`该类来访问配置：

```
class User
{
    String username

    static mapping = {
      table Holders.config.console?.datasource?.table?.user?.mapping ?: 'user'
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:05:30.573

applicationContext 作为第一个参数传递给映射闭包。

详见[http://jira.grails.org/browse/GRAILS-8087](http://jira.grails.org/browse/GRAILS-8087)和源代码：[https ://github.com/grails/grails-core/blob/2.2.x/grails-hibernate/src/main /groovy/org/codehaus/groovy/grails/orm/hibernate/cfg/HibernateMappingBuilder.groovy#L61](https://github.com/grails/grails-core/blob/2.2.x/grails-hibernate/src/main/groovy/org/codehaus/groovy/grails/orm/hibernate/cfg/HibernateMappingBuilder.groovy#L61)。

示例用法：

```
class User
{
    String username

    static mapping = { ctx ->
      table ctx.grailsApplication.config.console?.datasource?.table?.user?.mapping ?: 'user'
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T04:04:17.753

尝试注入 grailsApplication。见这里：[http ://digitalbreed.com/2011/deprecation-of-configurationholder-in-grails-2](http://digitalbreed.com/2011/deprecation-of-configurationholder-in-grails-2)

# javascript - 显示后如何自动隐藏警报框？

> ID：15466802
> 
> 赞同：29
> 
> 时间：2013-03-17T22:05:52.563
> 
> 标签：javascript

我想要做的是，如何在显示后的特定秒内自动隐藏警报框？

我所知道的是，

```
setTimeout(function() { 
      alert('close'); 
}, 5000);

// This will appear alert after 5 seconds 
```

不需要这个我想在几秒钟内显示它后消失警报。

**需要的场景：**

1.  显示警报

2.  在 2 秒内隐藏/终止警报

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-17T22:13:11.743

tldr; **[jsFiddle 演示](http://jsfiddle.net/Tq5m3/)**

警报无法实现此功能。但是，您可以使用 div

```
function tempAlert(msg,duration)
{
 var el = document.createElement("div");
 el.setAttribute("style","position:absolute;top:40%;left:20%;background-color:white;");
 el.innerHTML = msg;
 setTimeout(function(){
  el.parentNode.removeChild(el);
 },duration);
 document.body.appendChild(el);
} 
```

像这样使用：

```
tempAlert("close",5000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T22:11:34.297

您无法使用 Javascript 关闭警报框。

但是，您可以改用窗口：

```
var w = window.open('','','width=100,height=100')
w.document.write('Message')
w.focus()
setTimeout(function() {w.close();}, 5000) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T22:29:25.760

用 javascript 是不可能的。正如其他答案的建议的另一种选择：考虑使用 jGrowl： http: [//archive.plugins.jquery.com/project/jGrowl](http://archive.plugins.jquery.com/project/jGrowl)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-29T06:48:02.867

您也可以尝试通知 API。这是一个例子：

```
function message(msg){
    if (window.webkitNotifications) {
        if (window.webkitNotifications.checkPermission() == 0) {
        notification = window.webkitNotifications.createNotification(
          'picture.png', 'Title', msg);
                    notification.onshow = function() { // when message shows up
                        setTimeout(function() {
                            notification.close();
                        }, 1000); // close message after one second...
                    };
        notification.show();
      } else {
        window.webkitNotifications.requestPermission(); // ask for permissions
      }
    }
    else {
        alert(msg);// fallback for people who does not have notification API; show alert box instead
    }
    } 
```

要使用它，只需编写：

```
message("hello"); 
```

代替：

```
alert("hello"); 
```

* * *

**注意：**请记住，它目前仅在 Chrome、Safari、Firefox 和一些移动网络浏览器中受支持（2014 年 1 月）

在此处查找支持的浏览器[**。**](http://caniuse.com/notifications)

# android - 在 AT&T 安卓智能手机上以 4G 模式运行服务器

> ID：15466804
> 
> 赞同：0
> 
> 时间：2013-03-17T22:06:01.050
> 
> 标签：android, sockets, port, firewall

我正在尝试创建这样的应用程序-> [https://code.google.com/p/spydroid-ipcamera/](https://code.google.com/p/spydroid-ipcamera/) spydroid 应用程序在我的 wifi 网络上运行良好。但问题是当我处于 4G 模式时。我得到一个这样的 IP，10.132.231，但由于端口被阻止，我似乎不允许在电话上运行服务器。无论如何，我可以在 4G 模式下解锁端口，以便连接到手机上运行的服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:41:16.313

我将首先尝试使用 50000 以上的端口，这些端口通常是畅通的。如果这不起作用，您可以尝试以相反的方式执行该应用程序，该应用程序连接到服务器。

# bash - shell：遍历数组

> ID：15466808
> 
> 赞同：3
> 
> 时间：2013-03-17T22:06:27.660
> 
> 标签：bash

我的脚本接受键值对作为命令行参数。我测试给定数量的参数是否是偶数。如果偶数，我想遍历数组，将`args[n]`&`args[n+1]`视为一对`(n = 0 to $# - 1)`并执行另一个将这两个作为参数的命令。我无法使 for 循环到位。这是我的代码 -

```
#!/bin/sh

usage() {
    echo "$0 <property-name> <property-value> [<property-name> <property-value> ...]"
    exit 1
}

if [ $# -lt 2 ] ; then
    usage
fi

# Should be even number of arguments
if [ $(( $# % 2 )) -ne 0 ]
    echo "Even number of arguments expected."
    usage
fi
args=("$@")
COMMAND="/mycommand "
for ### WHAT SHOULD I WRITE HERE??
    PROPERTY=${args[$c]}
    VALUE=${args[$c + 1]}
    COMMAND="mycommand $PROPERTY $VALUE"
    ## Execute command
done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T22:15:01.460

尝试这样做：

```
for ((i=0; i<${#args[@]}; i+=2)); do
    PROPERTY="${args[$i]}"
    VALUE="${args[$i + 1]}"
    COMMAND="mycommand $PROPERTY $VALUE"
    bash -c "$COMMAND"
done 
```

我建议不要使用大写字符作为变量名，保留这些字符作为您的内部系统变量

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T01:14:43.187

首先注意，这看起来很尴尬

```
if [ $(( $# % 2 )) -ne 0 ] 
```

请改用单个算术表达式：

```
if (( ($# % 2) != 0 )) 
```

不需要为 args 使用数组：

```
command="/mycommand"
while (( $# > 0 )); do
    property=$1
    value=$2
    shift 2
    ## Execute command
    "$command" "$property" "$value"
done 
```

如果任何属性或值包含空格，则引用非常重要

我假设您打算在循环的每次迭代中只使用一个属性和值来执行命令。如果没有，您可以简单地执行以下操作：

```
"$command" "$@" 
```

# linux - fork() 后的 libCurl SSL 错误

> ID：15466809
> 
> 赞同：5
> 
> 时间：2013-03-17T22:06:41.487
> 
> 标签：linux, curl, fork, libcurl, fuse

我正在开发一个 FUSE 驱动程序，当我将它作为守护进程运行时（没有 -f 或 -d 标志），所有通过 libcurl 发出的 https 请求都失败。我能够通过发出 https 请求、分叉并返回父进程，然后从新进程发出第二个请求来重现该错误。如果我删除`fork`呼叫或发出 http 请求，则没有错误。

我现在正在制作官方错误报告，但有人知道我怎样才能让它工作吗？

这是我的代码和（日志文件）输出：

注意：如果你运行我的程序，管道到 /dev/null 因为 libcurl 默认将接收到的缓冲区发送到标准输出。

```
#include <curl/curl.h>
#include <string>
#include <unistd.h>
#include <iostream>

using namespace std;

void log(string str)
{   //TODO: remove
    static const char logfile[] = "/home/austin/megalog";
    FILE *f = fopen(logfile, "a");
    fwrite(str.data(), str.size(), 1, f);
    fclose(f);
    cout << str;
}

int main(int argc, char *argv[])
{
    string url = "https://www.google.com/";
    char errBuf[1024];
    CURLcode err;

    curl_global_init(CURL_GLOBAL_DEFAULT);
    CURL *handle = curl_easy_init();
    curl_easy_setopt(handle, CURLOPT_URL, url.c_str());
    curl_easy_setopt(handle, CURLOPT_ERRORBUFFER, errBuf);

    if ((err = curl_easy_perform(handle)))
    {
        log("first request failed\n");
        return 1;
    }
    curl_easy_cleanup(handle);

    if(fork())
        return 0;

    handle = curl_easy_init();
    curl_easy_setopt(handle, CURLOPT_URL, url.c_str());
    curl_easy_setopt(handle, CURLOPT_ERRORBUFFER, errBuf);

    if ((err = curl_easy_perform(handle)))
    {
        log(string("curl error while sending: (") + to_string(err) + ") " + curl_easy_strerror(err) + "\n");
        log(errBuf);
    }
    else
        log("no error\n");

    return 0;
} 
```

...和输出：

```
$ g++ -std=c++11 main.cpp -lcurl
$ rm -f log
$ ./a.out > /dev/null
$ cat log
curl error while sending: (35) SSL connect error
A PKCS #11 module returned CKR_DEVICE_ERROR, indicating that a problem has occurred with the token or slot. 
```

我正在使用（最新的）libcurl 版本 7.29.0，（最新的）openssl 版本 1.0.1e，并且我正在运行内核版本为 3.7.4 的 Fedora 18。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T00:22:53.650

要完成这项工作，您需要在`curl_global_cleanup`之前`fork`和`curl_global_init`之后调用`fork`。libcurl 邮件列表中有人提到，这是`fork`在初始化需要初始化的库后调用时的常见问题。

# apache2 - httpd.conf，apache2中的虚拟主机之间的区别，为什么在ubuntu中没有使用sudo-apt-get install

> ID：15466812
> 
> 赞同：19
> 
> 时间：2013-03-17T22:06:47.927
> 
> 标签：apache2, installation

我正在尝试遵循一些有关启动 apache2.2 的指南

我是 ubuntu 12.10

什么是 httpd.conf 文件，它与 vhost 文件相同吗？它位于哪里？我使用命令行进行了“查找”，但没有找到。这是否意味着我必须创建它？或者这在 apache 2.2 中已被弃用？我没有 Apache 2.4。我看到的链接似乎都引用了这个文件。

[http://httpd.apache.org/docs/2.2/invoking.html](http://httpd.apache.org/docs/2.2/invoking.html)

显示 apache 位于 usr/local/apache2，但是当我使用 apt-get 工具安装时，它并没有安装在那里。它在 /etc/apache2 中，这让我很失望。我有正确的目录吗？

我也没有 httpd.conf，也没有 conf 目录，但我有一个 conf.d，但我只是很难确定自己的方向。我还在教程中不断看到诸如“创建新站点”之类的内容，但我会要求更多背景知识，因为我不知道该怎么做。是虚拟主机吗？我找不到我的虚拟主机配置。

谢谢！

好吧，作为更新，我找到了一个很好的信息来源： [https ://help.ubuntu.com/12.10/serverguide/httpd.html](https://help.ubuntu.com/12.10/serverguide/httpd.html)

我会删除我的问题，但对于其他任何人：

您在 ubuntu 12.10 上的虚拟主机文件，如果您使用`sudo apt-get install apache2` 的是 `/etc/apache2/sites-available/default`

它不称为虚拟主机，也没有文件扩展名。

伙计们，这对新手来说非常混乱。如此多的文档要求您查找 httpd.conf 文件，但如果您使用 sudo-apt-get install 安装 apache2，则从命令行执行简单的 find / *.conf 将一无所获。但是，如果您已经从 Apache 站点下载了 .zip 文件，那么您会突然获得大多数教程所讨论的所有内容。这需要解释清楚。/etc/apache2 中是否列出了等效的 httpd.conf 文件？我认为它实际上被称为“默认”？

这里有一些非常有用的链接；我会推荐他们而不是新手的官方文档。它可能会帮助您确定方向（就像我一样），然后文档可能更有意义。

[http://articles.slicehost.com/2010/5/19/installing-apache-on-ubuntu](http://articles.slicehost.com/2010/5/19/installing-apache-on-ubuntu)

[http://articles.slicehost.com/2010/5/19/apache-configuration-files-on-ubuntu](http://articles.slicehost.com/2010/5/19/apache-configuration-files-on-ubuntu)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-17T22:40:44.457

这是一些额外的背景，以防万一。（这包含在您链接到的文档中，但它混合了描述、基本原理和一堆有关默认配置的其他信息。）

Debian 和 Ubuntu 中的 Apache 配置系统都会尝试进行设置，这样您就不必编辑基本的 httpd.conf。它设置了一堆你希望不必触及的默认值。相反，额外的配置被分成几个文件目录，所有这些文件都包含在 httpd.conf 中。

很多（可能是大多数）Apache 配置都有虚拟主机，通常不止一个。将特定虚拟主机的所有配置（特定`<VirtualHost>`配置块中的所有内容）放在一个单独的文件中，仅用于该虚拟主机，这很有用。Debian/Ubuntu 配置将这些文件存储在`/etc/apache2/sites-available`目录中。“可用”部分的原因是有一个系统可以使用`a2ensite`and命令轻松启用和禁用虚拟主机，这些命令在 Apache 配置实际包含`a2dissite`的并行目录中创建和删除符号链接。`/etc/apache2/sites-enabled`您不应该`sites-enabled`正常触摸目录中的文件；相反，编辑或创建它们，`sites-available`然后使用`a2ensite`和`a2dissite`启用和禁用特定的虚拟主机。

为了使您的配置保持干净和可维护，通常每个配置文件`/etc/apache2/sites-enabled`应仅包含一个`<VirtualHost>`块（如果同一主机有端口 80 和端口 443 配置，则应包含两个块）。任何特定虚拟主机之外的任何全局设置都不应进入该目录，而应进入`/etc/apache2/conf.d`.

可以从编辑`default`虚拟主机开始，但是随着您在构建 Apache 配置的路径上走得更远，我建议`sites-available`您为您正在配置的实际虚拟主机创建一个名为的新文件，并将其`default`用作模型（和然后使用 ) 禁用默认虚拟主机`a2dissite default`。

# nginx - nginx 的 RemoveHandler

> ID：15466815
> 
> 赞同：1
> 
> 时间：2013-03-17T22:07:07.100
> 
> 标签：nginx, webserver, debian

在我的网站中，用户可以上传他们的文件并拥有该文件的短网址。在此之前我使用 apache 网络服务器，但现在我想切换到 nginx。

在 apache 中，我使用此代码段删除了一些文件上传到该目录的 php 处理程序：

```
<Directory /var/www/unkown-user-data/uploads>
RemoveHandler .php .phtml .php3 .php5
RemoveType .php .phtml .php3 .php5
php_flag engine off
AddHandler default-handler .php
</Directory> 
```

但是现在，我应该如何在 nginx 网络服务器上执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T23:44:30.503

Nginx 没有 removehandler 指令。您将位置块添加到服务器不同类型的请求。

我假设上传文件夹可能有 .php .phtml .php3 .php5 文件，当从该文件夹请求时，您不想执行它们。这是我的建议：

```
location ^~ /uploads/ {
  root /var/www/unkown-user-data;
  expires max;
} 
```

注意：“^~”很重要（意味着比正则表达式“~”块具有更高的优先级）。否则，正则表达式位置块，例如

```
location ~ \.php$ {
  ...
} 
```

会先匹配，会错误执行php脚本。这是 nginx wiki 中的匹配顺序：

> ```
> 1\. Directives with the "=" prefix that match the query exactly (literal string). If found, searching stops.
> 2\. All remaining directives with conventional strings. If this match used the "^~" prefix, searching stops.
> 3\. Regular expressions, in the order they are defined in the configuration file.
> 4\. If #3 yielded a match, that result is used. Otherwise, the match from #2 is used. 
> ```

# php - 在 Laravel4 中使用控制器而不是路由到的函数时如何为路由添加名称？

> ID：15466823
> 
> 赞同：0
> 
> 时间：2013-03-17T22:08:24.100
> 
> 标签：php, laravel, laravel-4

我想，单行问题并不能很好地解释我在寻找什么。所以，这是我正在谈论的一个例子：（基于[Laravel4 路由文档](http://four.laravel.com/docs/routing)）

我为控制器创建路由的方式：

```
Route::get('user/profile', "UserController@profile" ); 
```

我为路由创建名称以便稍后在生成 URL 时引用它的方式：

```
Route::get('user/profile', array('as' => 'profile', function()
{
    //
}));

// Now I can use this
$url = URL::route('profile'); 
```

现在，显然您不想在 中将控制器编写为函数`routes.php`，那么如何创建像第二个示例中的名称，但使用示例 1 中的控制器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:14:53.380

您可以以完全相同的方式将路由命名为控制器。将控制器和方法名称作为“uses”关键字下数组中的第二项：

```
Route::get('user/profile', array("as" => "profile", "uses" => "UserController@profile")); 
```

# python - 为什么这个类变量在不同的实例中是相同的？

> ID：15466824
> 
> 赞同：1
> 
> 时间：2013-03-17T22:08:24.487
> 
> 标签：python, oop, class

为什么即使在创建了类的新实例之后我仍然保持不变？

```
class Test(object):
    i = 0
    def add(self):
        Test.i += 1 
```

运行此代码

```
t = Test()
print t.i
t.add()
t2 = Test()
print t2.i
print t.i 
```

给

```
0
1
1 
```

为什么 ti 和 t2.i 都不等于 0？他们不应该等于 0，因为该行`t2 = Test()`会将 i 重置为 0？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:12:32.273

`i`是类变量，而不是实例变量。它绑定到类本身（这就是为什么您可以编写`Test.i`，即使不`Test`存在实例）。

您必须创建`i`一个实例变量：

```
class Test(object):
    def __init__(self):
        self.i = 0

    def add(self):
        self.i += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:12:39.853

您正在修改整个类的属性，而不是实例的属性。试试这个：

```
class Test(object):
    i = 0
    def add(self):
        self.i += 1 
```

Python 自动将实例作为参数`self`传递给方法。因此，在该方法中，您可以将实例的属性称为`self.i`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:59:45.827

```
class Test(object):
    i = 0
    def add(self):
        Test.i += 1

print "Test.i  == ",Test.i
print "'i' in dir(Test) == ",'i' in dir(Test)
print "'i' in Test.__dict__  == ",'i' in Test.__dict__

t1 = Test()
print '\n# t1 = Test() executed'
print "t1.i  == ",t1.i
print "'i' in dir(t1) == ",'i' in dir(t1)
print "'i' in t1.__dict__  == ",'i' in t1.__dict__ 
```

结果

```
Test.i  ==  0
'i' in dir(Test) ==  True
'i' in Test.__dict__  ==  True

# t1 = Test() executed
t1.i  ==  0
'i' in dir(t1) ==  True
'i' in t1.__dict__  ==  False 
```

.

对象名称`__dict__`的属性是表示该对象名称空间的字典，即包含该对象的属性。

此外，我们还有：

> 目录（[对象]）
> 
> 如果对象有一个名为 的方法`__dir__()`，该方法将被调用并且必须返回属性列表。

那么，它怎么可能`dir(t1)`包含属性**i**而`t1.__dict__`没有呢？虽然所有两个`dir(Test)`都`Test.__dict__`包含属性**i** ?

.

这与回答您的问题的原因相同：

返回对象属性的行为很尴尬。
并``dir(object)`反映了这种尴尬：

> 默认的 dir() 机制对不同类型的对象表现不同，因为它试图产生最相关的，而不是完整的信息：
> 
> • 如果对象是模块对象，则列表包含模块属性的名称。
> • 如果对象是类型或类对象，则列表包含其属性的名称，并递归地包含其基类的属性。
> • 否则，该列表包含*对象的属性名称*、**其类的属性名称以及**其类的基类属性的递归名称。

.

然后，您的问题的答案分为两部分：

1)`dir(t1)`给出了被认为是对象的属性，但对象的 REAL NAMESPACE，暴露为`t1.__dict__`不包含属性**i**，正如已经回答的那样，它实际上是一个类的属性。

因此，两个实例**t1**和**t2**的伪属性**i**看起来相等，因为表达式and实际上被评估为，与包含类的属性的 方式相同 。****`t1.i``t2.i``Test.i`
`dir(t1)``dir(t2)``Test.i`****

 ****2) 表达式如何`t1.i`计算为`Test.i`??
因此（这构成了我的答案的附加信息）：

> 类实例有一个作为字典实现的命名空间，这是搜索属性引用的第一个位置。如果在那里找不到属性，并且实例的类具有该名称的属性，则继续搜索类属性。
> 
> [http://docs.python.org/reference/datamodel.html#the-standard-type-hierarchy](http://docs.python.org/reference/datamodel.html#the-standard-type-hierarchy)

这意味着当在对象的命名空间中找不到属性时，将在对象为实例的类的命名空间中搜索它。****

# php - 会话在子域上不起作用

> ID：15466825
> 
> 赞同：2
> 
> 时间：2013-03-17T22:08:33.460
> 
> 标签：php, wordpress, session, session-variables

我已经从这里尝试了所有这些方法：[允许 php 会话转移到子域](https://stackoverflow.com/questions/644920/allow-php-sessions-to-carry-over-to-subdomains)

但是会话不适用于我的子域。我正在尝试在 subdomain.domain.com 和 www.domain.com 中共享会话两者都托管在不同的 IP 上。知道如何在他们之间共享会话吗？一个是wordpress，另一个是不同的脚本。

# sql - SQLzoo 更多 JOIN 执行 #16

> ID：15466826
> 
> 赞同：2
> 
> 时间：2013-03-17T22:08:35.427
> 
> 标签：sql, join

我正在使用电影数据库进行更多的 JOIN 操作。我的问题是关于问题 #16：列出所有与“Art Garfunkel”合作过的人

您需要首先获取 Art Garfunkel 所在的所有电影作为一个值，然后通过将其与第一个值进行比较来获取同一部电影中的所有人员姓名。

我提出了自己的查询，按逻辑它应该可以工作，但不是由于超时（我假设这是由于查询效率低下）

我的查询：

```
SELECT DISTINCT a.name
FROM actor a
JOIN casting b ON (a.id=b.actorid) 
JOIN movie c ON (b.movieid=c.id)
WHERE c.title IN(SELECT z.title
FROM movie z
JOIN casting y ON (z.id=y.movieid)
JOIN actor x on (y.actorid=x.id)
WHERE x.name='Art Garfunkel') 
```

另一个版本：

```
SELECT DISTINCT actor.name
FROM movie,actor,casting
WHERE movie.id=casting.movieid
AND actor.id=casting.actorid
AND movie.title IN(SELECT movie.title
FROM movie,actor,casting
WHERE movie.id=casting.movieid
AND actor.id=casting.actorid
AND actor.name='Art Garfunkel') 
```

这两个都会引发解析错误，说明尝试查询上面显示的内容时出现超时。

他们提供的被接受为答案的查询版本是：

```
SELECT DISTINCT d.name
FROM actor d JOIN casting a ON (a.actorid=d.id)
   JOIN casting b ON (a.movieid=b.movieid)
   JOIN actor c ON (b.actorid=c.id 
                AND c.name='Art Garfunkel')
  WHERE d.id!=c.id 
```

我的逻辑在这里完全错误吗？还是查询效率非常低（我在想）。有没有办法修复它以运行并获得正确答案？还是我应该按照正确查询的方式更合乎逻辑地思考？

有很多问题，但我想就为什么该查询不起作用以及下一步是什么提供反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:33:08.180

以下是所有 sql zoo 问题的答案： [answers](http://www.gideondsouza.com/blog/solutions-to-sqlzoo.net-more-join-operation-questions-movie-database#.UUZEXhylGu8)

```
SELECT a.name
 FROM casting c JOIN actor a ON
  a.id = c.actorid
 WHERE 
  a.name <> 'Art Garfunkel' AND
  c.movieid 
 IN (
  SELECT m.id
     FROM casting c JOIN movie m ON
       m.id = c.movieid
     JOIN actor a ON
       c.actorid = a.id
     WHERE a.name = 'ART Garfunkel'
)
ORDER BY a.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-18T01:59:05.760

这是我的查询以及如何得出它的清晰解释。

第 1 步：获取所有`movieids`Art Garfunkel

```
select movie.id 
from actor 
     join 
     casting on actor.id=casting.actorid 
     join 
     movie on movie.id=casting.movieid
where actor.name='Art Garfunkel'
group by movie.id 
```

第 2 步：现在从这些列表中`movieids`获取这些电影中的所有演员。

```
 select actor.name 
  from casting 
       join 
       actor on casting.actorid=actor.id 
       join 
       movie on movie.id=casting.movieid
 where casting.movieid in
                       ( select movie.id 
                         from actor 
                              join 
                              casting on actor.id=casting.actorid 
                              join 
                              movie on movie.id=casting.movieid
                         where actor.name='Art Garfunkel'
                         group by movie.id
                      ) 
```

第 3 步：我们需要合作者从结果集中`'Art Garfunkel'`消除`'Art Garfunkel'`

```
 select actor.name 
     from casting 
           join 
           actor on casting.actorid=actor.id 
           join 
           movie on movie.id=casting.movieid
     where casting.movieid in
                           ( select movie.id 
                             from actor 
                                  join 
                                  casting on actor.id=casting.actorid 
                                  join 
                                  movie on movie.id=casting.movieid
                             where actor.name='Art Garfunkel'
                             group by movie.id
                          )
   and actor.name!='Art Garfunkel' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T18:07:08.200

好吧，我花了几个小时才真正弄清楚这个（第 16 号），因为建议的解决方案乍一看没有意义（第二次也没有）。但是，在我想出自己的解决方案后，我设法弄清楚了，这更容易理解（我觉得）。所以首先我的解决方案：

```
select name from actor 
join casting on actor.id=actorid
where movieid in
(select movieid from casting
join actor on actorid=actor.id
where name='Art Garfunkel')
and name <>'Art Garfunkel' 
```

我为 Art Garfunkel 在其中扮演角色（内部选择）的那些 movieid 搜索所有 actorid（= 外部选择），然后我过滤掉 Art Garfunkel 本人。

很简单。

您可以在查询末尾添加以下行，这会很好：

```
order by name 
```

但随后查询不再被接受为正确的。

当我不理解其他人的解决方案时，这让我很烦恼，所以我花了一些时间在其他地方给出的解决方案上。这里又是：

```
SELECT DISTINCT a.name
FROM actor a 
JOIN casting b ON (a.id=b.actorid)
JOIN casting c on b.movieid=c.movieid
JOIN actor d ON (c.actorid=d.id 
                AND d.name='Art Garfunkel')
WHERE a.id!=d.id 
```

有趣的是，您可以编写稍微不同的代码并将 where 子句从最后一个连接中取出：

```
SELECT DISTINCT a.name
FROM actor a 
JOIN casting b ON (a.id=b.actorid)
JOIN casting c on b.movieid=c.movieid
JOIN actor d ON (c.actorid=d.id)
WHERE d.name='Art Garfunkel' 
AND a.id!=d.id 
```

在任何情况下，您都必须向后看这个查询，否则它永远没有意义。这似乎是发生了什么：

**actor-d**（或 Where 子句的第一部分，似乎首先被评估）设置（或限制）Art Garfunkel 并将其传递回**cast-c**。 **cast-c**查找来自 Art Garfunkel 的 movieid（顺便说一下，有两个：catch-22 为 1412，Boxing Helena 为 1597）并将它们设置为 cast-b 的过滤器——**因为****cast-b**接管了它们。 **然后Casting-b**（过滤器设置为 Garfunkel 的这两部电影）返回到**actor-a**中的所有 actorid ，在其中查找在这两部电影中出演过的所有演员的姓名。最后，Art Garfunkel 被过滤掉了——就是这样。

对我来说，这好像是一些机器代码，好像是某个查询优化器想出了它。一个明智的人不会按照这些思路思考（至少我不会）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-07T10:09:06.227

```
SELECT name
  FROM movie, casting, actor
  WHERE movieid=movie.id
    AND actorid=actor.id 
and movieid IN
    (SELECT movieid FROM casting, actor
     WHERE actorid=actor.id
     AND name='Art Garfunkel')and name <>'Art Garfunkel' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-13T00:33:35.917

以下是上面给出的SQL答案：

```
SELECT a.name from actor a 
inner join casting c on a.id=c.actorid 
inner join movie m on m.id=c.movieid 
WHERE m.id in (SELECT c.movieid from casting c inner join actor a 
on a.id=c.actorid WHERE a.name='Art Garfunkel') 
and a.name<>'Art Garfunkel' 
```

然而，作为一个还在习惯联合的 SQL 初学者，我想出的第一个代码如下：

```
SELECT name from actor WHERE id IN 
(SELECT actorid from casting WHERE movieid IN (SELECT movieid 
from casting WHERE actorid IN (SELECT 
id from actor WHERE name='Art Garfunkel'))) 
and name<>'Art Garfunkel' 
```

它本质上与上面的解释做同样的事情**——SELECT id**语句查找 Art 的演员 id。**SELECT movieid**查找他所在的电影。SELECT **actorid**查找这些电影中的其他演员，而**SELECT name**查找他们的名字。

学习如何进行联合是理想的，我最终得到了内部连接语法，但只是为更熟悉 SELECT 或仍在学习联合的 SQL 用户提供了另一个答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-12T09:52:47.360

另一个有效的解决方案如下：

```
SELECT name
FROM casting
JOIN actor ON actor.id=actorid
WHERE movieid IN (SELECT movieid FROM casting WHERE actorid = 
   (SELECT id FROM actor WHERE name='Art Garfunkel'))
GROUP BY actorid
HAVING name<>'Art Garfunkel' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-23T01:19:08.573

您的两种解决方案都不是完全错误的。您只需要在 sql 中再添加一个条件。`List all the people who have worked with 'Art Garfunkel'`这意味着只找到那些与之合作`'Art Garfunkel'`但在你的 sql 中你没有`'Art Garfunkel'`从列表中排除的人，这就是为什么 sqlzoo 说你的解决方案是错误的。

这是您的修改版本：

```
SELECT DISTINCT a.name
 FROM actor a
             JOIN casting b ON (a.id=b.actorid) 
             JOIN movie c ON (b.movieid=c.id)
 WHERE c.title IN(SELECT z.title
                   FROM movie z
                                JOIN casting y ON (z.id=y.movieid)
                                JOIN actor x on (y.actorid=x.id)
                   WHERE x.name='Art Garfunkel') 
 AND a.name <> 'Art Garfunkel' 
```

`AND a.name <> 'Art Garfunkel'`被添加到你原来的 sql

你的解决方案#2：

```
SELECT DISTINCT actor.name
 FROM movie,actor,casting
 WHERE movie.id=casting.movieid
       AND actor.id=casting.actorid
       AND movie.title IN(SELECT movie.title
                           FROM movie,actor,casting
                           WHERE movie.id=casting.movieid
                                 AND actor.id=casting.actorid
                                 AND actor.name='Art Garfunkel')
       AND actor.name <> 'Art Garfunkel' 
```

`AND actor.name <> 'Art Garfunkel'`被添加到你原来的 sql

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-31T08:51:12.293

一个简单的解决方案是 - `select distinct(name) from movie join casting on movie.id=movieid join actor on actor.id=actorid where name not in ('Art Garfunkel') and title in (select title from movie join casting on movie.id=movieid join actor on actor.id=actorid where name ='Art Garfunkel')`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-28T07:28:47.887

我认为这个问题类似于 Julie Andrews 项目（#13 目前在[sqlzoo](http://sqlzoo.net/wiki/More_JOIN_operations)上），所以我基本上改编了[Bill Karwin](https://stackoverflow.com/users/20860/bill-karwin)[对 Julie Andrews 问题](https://stackoverflow.com/questions/434013/how-do-i-list-the-first-value-from-a-three-way-joined-table-query)的优雅解决方案，以一种公认的不太优雅的方式解决这个问题。这个解决方案确实使用`JOINs`了这组练习的重点。从本质上讲，我对此的概念化方式是，Art Garfunkel 曾出演过其他人也出演过的电影。换句话说，加芬克尔 <-> 演员 <-> 电影 <-> 演员 <-> 联合主演的名字。

我是一个非常新的 SQL 用户（老实说，<24 小时）所以这可能很笨拙，但它对我有用：

```
SELECT a2.name
FROM actor a1
JOIN casting AS c1 ON (a1.id = c1.actorid)
JOIN movie ON (c1.movieid=movie.id)
JOIN casting AS c2 ON (movie.id=c2.movieid)
JOIN actor AS a2 ON (c2.actorid=a2.id)
WHERE
    a1.name='Art Garfunkel'
    AND a2.name <> 'Art Garfunkel'
GROUP BY a2.name 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-25T15:05:38.127

```
SELECT a.name FROM actor a 
    JOIN casting c ON a.id=c.actorid 
    JOIN movie m ON c.movieid=m.id
    WHERE c.movieid IN 
        (SELECT movieid FROM casting WHERE actorid IN
            (SELECT id FROM actor WHERE name = 'Art Garfunkel')) 
    AND a.name <> 'Art Garfunkel' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-29T01:13:45.007

```
SELECT DISTINCT name
FROM actor, movie, casting
WHERE name <> 'Art Garfunkel'
AND movie.id = casting.movieid AND casting.actorid = actor.id
AND movieid IN (
SELECT movieid 
        FROM casting, actor 
        WHERE actor.id = actorid AND name = 'Art Garfunkel'
) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-01T14:22:55.033

我不明白为什么需要在此查询中加入电影表。本练习中的任务是仅列出演员姓名，而不是姓名和头衔（这也需要加入电影表）。我想出了以下查询，它有效。:)

```
SELECT name 
FROM actor 
JOIN casting on actor.id = actorid 
WHERE name <> 'Art Garfunkel' 
AND movieid IN 
(SELECT movieid 
FROM casting 
JOIN actor on actorid = actor.id 
WHERE name = 'Art Garfunkel') 
```

# asp.net-mvc - 将 MVC 中任何类型的多个选择绑定回模型

> ID：15466828
> 
> 赞同：0
> 
> 时间：2013-03-17T22:09:48.267
> 
> 标签：asp.net-mvc, model, model-binding, html.dropdownlistfor

我有一个模型，其中包含一个 List，每个 Schedule 里面都有一个 List，所以在我看来，我有：

```
@foreach (Schedule sched in Model.Schedules)
{
    @Html.DropDownListFor(x => x.SelectedCustomer, new SelectList(sched.Customers, "Id", "FirstName"), "Select A Customer", new { @class = "SelectedCustomer" })
} 
```

所以本质上这是为所有计划输出一个下拉/选择标签，在下拉列表中是我在 SelectedCustomer 字段中找到的客户列表。当我将其发布回 (HttpPost) 控制器时，我的选择都没有绑定到我的模型。但是，如果我是模型绑定一个简单的文本框，它可以工作，但是像对象列表这样复杂的东西不会在回发时绑定，在 MVC 中取回所有这些下拉框的选定值的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:35:53.937

好吧，我从来没有找到绑定到模型的方法，但我发现我可以放置一个 SelectedCustomer 的整数数组，例如

```
int[] SelectedCustomer 
```

并且为每个下拉列表买回了选定的表单集合值。

# javascript - “开关”中的功能不起作用

> ID：15466830
> 
> 赞同：3
> 
> 时间：2013-03-17T22:09:59.777
> 
> 标签：javascript, hash, switch-statement

我有下面说明的javascript。我需要执行一些函数而不是 alert()，但它不起作用...我需要包含**document.getElementById("").innerHTML=""**函数。我在 js 方面不是很有经验，如果有人能解释如何做到这一点以及问题出在哪里，我将非常感激。

```
window.onload = function locationHashChanged() {
    var hashx = location.hash;
    switch (hashx) {
       case '#basketball':
           alert('1');
           break;
       case '#football':
           alert('2');
           break;
       default:
           alert('3');
    }
    window.onhashchange = locationHashChanged;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:20:56.453

不要将函数名称添加到`window.onload`.

您需要分配一个`anonymous function`，例如

```
window.onload = function(){
  // stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:33:32.363

这里最可能的问题是您在加载事件发生`window.onload` *之后*进行定义，这意味着您的处理程序没有被调用。无论是那个，还是其他一些代码正在覆盖您的处理程序。

您*不需要*等到`window`'s load 事件来添加`hashChange`事件处理程序，所以只需使用：

```
window.onhashchange = function() {
    var hashx = location.hash;
    switch (hashx) {
       case '#basketball':
           alert('1');
           break;
       case '#football':
           alert('2');
           break;
       default:
           alert('3');
} 
```

# java - 不同菜单之间的 Java FX 动画

> ID：15466832
> 
> 赞同：3
> 
> 时间：2013-03-17T22:10:17.723
> 
> 标签：java, user-interface, javafx

我正在开发一个 java 游戏，我计划用 Swing 做 UI，但我想在菜单之间有动画，据我所知，这很难实现。

我整天都在搜索，发现 Java FX 有转换和转换。我已经玩了一段时间了，但我仍然不知道我是否可以做我想做的事。

有没有可能达到这个效果？[http://i.stack.imgur.com/zThXH.gif](http://i.stack.imgur.com/zThXH.gif)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:31:11.437

经过几次失败的尝试，我决定搜索我展示的 gif 中使用的内容。

我最终找到了它，这正是我正在寻找的。

[github.com/AurelienRibon/sliding-layout](http://github.com/AurelienRibon/sliding-layout)

这是一个非常小的库，用于组件布局之间的平滑动画。它非常易于使用！

在 20 分钟内，我能够做到这一点：[imgflip.com/i/tmef](http://imgflip.com/i/tmef)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T01:24:32.133

您的 gif 链接似乎是剪辑滑动过渡的演示。

JavaFX 能够做到这一点，尽管您必须自己实现一些逻辑（例如，如果不开发一些自定义动画和布局代码，您将无法获得所需的所有功能）。

JavaFX 2.x 不会为基于 Swing 的控件和窗口设置动画。因为你的 UI 的基础是基于 Swing 的，所以你只能在基于 Swing 的 UI 上做这些类型的动画，方法是使菜单和对话框只动画 JavaFX，并将它们包装在 JFXPanel 中以便它们可以被覆盖在您的 Swing UI 之上。对我来说，这听起来像是一件很难完成的事情。您可以使用基于 Swing 的动画库，但其中一些（例如[来自 insubstantial 的三叉戟）](http://insubstantial.posterous.com/)目前仅处于维护模式。

* * *

如果您决定使用 JavaFX 解决方案：

一个很好的起点是 D 先生在他的回答中提供的链接。

Sai Pradeep Dandem 在他的博客中对如何获得这种基本的[剪辑滑动](http://saidandem.blogspot.com/2012/01/sliding-in-javafx-its-all-about.html)效果进行了很好的概述，我创建了一个简单的效果来[滑入和滑出侧边栏](https://gist.github.com/jewelsea/1437374)。

像您的 gif 链接演示那样完全对接滑入和滑出需要更多的工作，但可以实现。很可能，对于游戏，您不需要 gif 链接演示中显示的所有功能。要复制 gif 链接演示功能，您可能还需要研究 fxexperience[预制动画](http://fxexperience.com/2012/03/canned-animations/)和添加到[jfxtras的](http://jfxtras.org/)[VFXWindows](http://mihosoft.eu/?p=392)功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T22:18:13.733

这是可能的，虽然不一定容易，但肯定比使用摇摆更容易。查看此链接，可能会回答您的一些问题：

[http://docs.oracle.com/javafx/2/animations/basics.htm#CJAFADFJ](http://docs.oracle.com/javafx/2/animations/basics.htm#CJAFADFJ)

此演示还包含许多带有各自代码的示例，您可以从中了解可能的情况：

[http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html)

# php - PHP-Ajax 查询到 sql server 时遇到问题

> ID：15466834
> 
> 赞同：0
> 
> 时间：2013-03-17T22:10:31.287
> 
> 标签：php, ajax, jquery

我在让搜索功能使用 ajax 在用户输入名称时显示结果时遇到了一些麻烦。这是有问题的网站（您可以单击查看全部以查看可搜索的内容） [http://ra-yon.com/beta/Test_sites/HFE/admin/contact.php](http://ra-yon.com/beta/Test_sites/HFE/admin/contact.php)正在 执行的查询 [http://ra-yon .com/beta/Test_sites/HFE/include/queryc.php?query=ra-yon&clause=email](http://ra-yon.com/beta/Test_sites/HFE/include/queryc.php?query=ra-yon&clause=email)

有问题的代码

```
<html>
    <head>

<style type="text/css">
body
{
background:black;
color:black;
width:100%;

}
#center
{
width:90%;
height:110%;
background:white;
margin:0 auto;
text-align:center;
color:black;
}
#insert{
background:navy; color:white; font-family:impact; font-size:18px;width:170px; height:170px; border-radius:50%;
margin:0 auto;
float: left; margin-left: 100px;
top:200px;
position: relative;
}
#insert:hover

{
background:white;
color:navy;
}
label
{width:150px;}
td
{
    border:solid 2px black;
    max-width: 250px;
    text-align: center;
}
</style>
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction(x,y){

    var ajaxRequest;  // The variable that makes Ajax possible!

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            document.getElementById('table').innerHTML = ajaxRequest.responseText;
        }
    }
    ajaxRequest.open("GET", "../include/queryc.php?query=" + x + "&clause="+ y, true);
    ajaxRequest.send(null);

}

//-->
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script></head>

<body>
   <a href="index.php"> <h4 style="float:right; color:blue; position: relative; left:-100px;" id="goback"> Go back? </h4></a>
    <div id="center">
<div id="queryform1" >
    <a href="#" onclick="$('#table2').css('display','block');">View All?</a>
    <span style="color:black;">search</span> <input type='text' onKeyUp="ajaxFunction(this.value,sel.options[sel.selectedIndex].value); " name='searchname' id="searchname" />

<span style="color:black;">search by</span> <select onChange="ajaxFunction(this.value,sel.options[sel.selectedIndex].value);" name="searchclause" id="searchclause">
        <option ></option>
    <option value="name">Name</option>
    <option value="email">Email Address</option>
    <option value="subject">Subject</option>
    <option value="date">Date</option>

</select>
<a href="../include/downloadcontact.php">Download file?</a>

<div id="table2" style="display: none; margin: 0 auto; position: relative; top:40px; max-width:700px;">
    <div id="viewall">
        <?php
        include '../include/include.php';
        $sql = 'select * from contactus' ;

//print_r($sql);
$result=mysql_query($sql);

        ?>
        <table>
<tbody>
<th>Name</th><th>Email</th><th>Subject</th><th style="width:200px;">Message</th><th>Date</th>
<tr>
<?php
while ($client = mysql_fetch_array($result, MYSQL_ASSOC)){
echo "
<tr>

<td >".$client[name]."</td>
<td >".$client[email]."</td>
<td >".$client[subject]."</td>
<td >".$client[message]."</td>
<td >".$client[date]."</td>

</tr>";
} ?>
</tbody></table>
</div></div><div id="table">TestTestTest</div>

</div></div>

</body>
</html> 
```

现在有点乱，我打算等我用完后清理一下。非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:26:28.057

你为什么不也用 jQuery 来提出你的 AJAX 请求呢？jQuery 提供了一个简单的 $.ajax() 函数，可以很容易地发送 AJAX 请求。[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

同样使用 jQuery 函数，您的代码也不会那么混乱。- 凯文

编辑：带有回调的示例 jQuery 函数。

```
$.ajax({
        url: 'test',
        type: 'POST',
        data: 'data=foo',
        success: function(text){
            $('.content').html(text);
        }
    }); 
```

请求的响应文本在变量*text*中。

# javascript - 单击 div 的侦听器而不是链接

> ID：15466835
> 
> 赞同：4
> 
> 时间：2013-03-17T22:10:41.173
> 
> 标签：javascript, jquery

我在 div 上有一个点击侦听器，在 div 内部我有一个带有普通标签的链接，但是每当我点击该链接时，事件也会运行。如果单击 div 内的链接，如何防止单击侦听器中的内容运行？

HTML：

```
<div class="container item-container" data="skarp-version-av-os-x-10.8.3-slappt">
        <div class="item">
            <div class="number">
                <p class="number-data">1</p>
            </div>
            <div class="upvotes btn tooltip-points" points="4" id="90" data-toggle="tooltip" title="" data-original-title="Visar poäng satta de senaste 24 h">
                4 poäng
            </div>
            <div class="item-content">
                <a href="http://feeds.idg.se/~r/idg/ETkj/~3/XSuYKgEiumE/skarp-version-av-os-x-1083-slappt" target="_blank" class="item-link fill-div">Skarp version av OS X 10.8.3 släppt</a>
                <span class="item-source">(feeds.idg.se)</span>
                <p class="item-author">Upplagd av Anonym - <em>2013-03-17 21:07:08</em></p>
            </div>
            <div class="comment">
                <i class="icon-comment"></i> <a href="http://www.tldr.nu/item/view/skarp-version-av-os-x-10.8.3-slappt#disqus_thread">0 Comments and 0 Reactions</a>
            </div>
        </div>
    </div> 
```

Javascript：

```
$('.item-container').click(function(event) {
    var url = $(this).attr('data') ? $(this).attr('data') : '';
    if(url != '')
        window.location = getBaseURL() + 'item/view/' + url;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:17:24.520

您可以在链接上添加一个事件处理程序以阻止单击事件冒泡到 div，或者您可以在 div 的处理程序内添加一个 if 语句，以便在事件目标是链接时忽略单击事件。我认为前一种解决方案将是可行的方法。

这会在链接上设置一个事件处理程序，以阻止单击事件传播到 div：

```
$('.item-container a').click(function(event) {
   event.stopPropagation();
}); 
```

[jsfiddle 演示](http://jsfiddle.net/john_s/HtA6A/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:20:04.783

您要么需要将特定的预防方法绑定到内部元素，就像这样 -

```
$("a").click(function(e){
    e.stopPropagation();
}); 
```

或者你需要嗅探被点击元素的类型——

```
$(".wrap").click(function(e){
    if ($(e.target).hasClass("wrap")){
       alert("click");
    }
}); 
```

第二种方法通常更可取，因为要出现这个问题，你的内在元素有它们自己的事件，你希望它们能够正常运行。

但是，也许您希望链接在单击时不触发父 div 效果，在这种情况下，第一个效果更好。

小提琴 - [http://jsfiddle.net/WXzjP/](http://jsfiddle.net/WXzjP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:21:38.420

熟悉[事件冒泡](http://www.quirksmode.org/js/events_order.html)- 您需要了解基础知识才能最终了解[事件委托](http://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/)。

您可以通过以下两种方式之一解决您的问题。将 click 事件绑定到`<a>`您的`<div>`and call[`event.stopPropagation();`](http://api.jquery.com/event.stopPropagation/)中，或者让`<div>`的事件处理程序检查[`event.target`](http://api.jquery.com/event.target/)是否是一个`<a>`元素：

```
if (event.target.nodeName.toLowerCase() === 'a') {
  // <a> was clicked
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T22:23:30.077

因为它“冒泡了”。可以这样想；

当你点击你的链接时，它有一个你指定的动作：导航到一个 url。接下来，它“冒泡”树，你还有一个 div 的点击处理程序，所以它会尝试运行它也。

如果您也有一个点击处理程序，`$('body')`也将被调用。

你必须停止冒泡`event.stopPropagation();`

例如

```
$('#your-anchor-tag').click(function(e) {
 e.stopPropagation();
} 
```

这样，您将停止冒泡过程..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T22:19:44.810

```
$('.item-container').click(function(event) {
    if(!$(event.target).is('a')) {
        var url = $(this).attr('data') ? $(this).attr('data') : '';
        if(url != '')
            window.location = getBaseURL() + 'item/view/' + url;
    }
}); 
```

检查启动事件的事件目标是否是锚元素，如果不是，则执行您的函数。

# java - Java 枚举映射；无法将密钥投射到他们的枚举中

> ID：15466842
> 
> 赞同：0
> 
> 时间：2013-03-17T22:11:22.073
> 
> 标签：java, casting, enum-map

我将 EnumMap 提供给我尝试访问该值的方法，如下所示：

```
_playerActionTimeout = (Integer) config.get( Config.Table.PLAYER_TIMEOUT ); 
```

但这告诉我我不能将 Config.Table 转换为 Config.Table。配置位如下所示：

```
static public enum Table
{
    PLAYER_TIMEOUT( "playerTimeout", Integer.class ),
    PLAYER_STARTCHIPS( "playerStartChips", Integer.class ),
    INITIAL_SMALLBLIND( "initialSmallBlind", Integer.class ),
    INITIAL_BIGBLIND( "initialBigBlind", Integer.class ),
    BLIND_INCREASE( "blindIncrease", SortedMap.class ),
    ROUND_STARTTIMEOUT( "roundStartTimeout", Integer.class );
    //
    private final String _xmlTag;
    private final Class _classType;

    Table( String xmlTag, Class classType )
    {
        _xmlTag = xmlTag;
        _classType = classType;
    }

    public final String getXmlTag()
    {
        return _xmlTag;
    }

    public final Class getParameterClass()
    {
        return _classType;
    }
} 
```

如果我遍历 EnumMap 所有值和键都存在并且可以很好地追踪。但是当我尝试使用 Enum 获取值时，它将为零并且发生错误。我究竟做错了什么？

按照要求。这是创建配置的类的一部分：

```
private EnumMap<Config.Table, Object> _tableConfig;

public void init()
{
if ( _tableConfig == null )
    {
        _tableConfig = new EnumMap<Config.Table, Object>( Config.Table.class );
    }
}
private void parseConfigFile( String definedZoneName ) throws Exception
{
    //try
    {
        /** START of read config file **/
        IXMLElement config = this.loadConfig( "config.xml" );
        if ( config == null )
        {
            throw new Exception( "No config file was found! or XML zones configuration invalid : no zone found" );
        }
        IXMLElement zones = config.getFirstChildNamed( "Zones" );
        //So far so good
        for ( int zoneIndex = 0; zoneIndex < zones.getChildrenCount(); ++zoneIndex )
        {
            IXMLElement xmlZone = zones.getChildAtIndex( zoneIndex );
            if ( xmlZone.getAttribute( "name" ).equalsIgnoreCase( definedZoneName ) )
            {
            //Table config
            {
                IXMLElement tableConfig = xmlZone.getFirstChildNamed( "TableConfig" );
                for ( int tableElIndex = 0; tableElIndex < tableConfig.getChildrenCount(); ++tableElIndex )
                {
                    IXMLElement zoneElement = tableConfig.getChildAtIndex( tableElIndex );

                    for ( Config.Table configTable : Config.Table.values() )
                    {
                        if ( zoneElement.getName().equals( configTable.getXmlTag() ) )
                        {
                            String value = zoneElement.getContent();
                            Class parameterClass = configTable.getParameterClass();
                            if ( parameterClass.equals( Integer.class ) )
                            {
                                _tableConfig.put( configTable, Integer.parseInt( value ) );
                            }
                            else if ( parameterClass.equals( SortedMap.class ) )
                            {
                                SortedMap<Integer, Config.Blinds> increaseBlinds = new TreeMap<Integer, Config.Blinds>();
                                //Loop through all <increase> elements
                                for ( int increaseElIndex = 0; increaseElIndex < zoneElement.getChildrenCount(); ++increaseElIndex )
                                {
                                    IXMLElement increaseElement = zoneElement.getChildAtIndex( increaseElIndex );

                                    String sTime = increaseElement.getFirstChildNamed( "time" ).getContent();
                                    String sSmallBlind = increaseElement.getFirstChildNamed( "smallBlind" ).getContent();
                                    String sBigBlind = increaseElement.getFirstChildNamed( "bigBlind" ).getContent();

                                    Integer time = Integer.parseInt( sTime );
                                    Integer smallBlind = Integer.parseInt( sSmallBlind );
                                    Integer bigBlind = Integer.parseInt( sBigBlind );

                                    Config.Blinds blinds = new Config.Blinds( smallBlind, bigBlind );

                                    increaseBlinds.put( time, blinds );
                                }

                                _tableConfig.put( configTable, increaseBlinds );
                            }
                            else //if ( parameterClass.equals( String.class ) )
                            {
                                _tableConfig.put( configTable, value );
                            }
                            break;
                        }
                    }
                }
            }
        }
    }
    Stack<String> missingFields = new Stack<String>();

    for ( Config.Zone configZone : Config.Zone.values() )
    {
        if ( !_zoneConfig.containsKey( configZone ) )
        {
            missingFields.add( configZone.getXmlTag() );
        }
    }

    if ( missingFields.size() > 0 )
    {
        throw new Exception( "We were not able to read these Zone settings from the config.xml : " + missingFields.toString() + ". Please check your setup." );
    }

    missingFields.clear();
    for ( Config.Table configTable : Config.Table.values() )
    {
        if ( !_tableConfig.containsKey( configTable ) )
        {
            missingFields.add( configTable.getXmlTag() );
        }
    }

    if ( missingFields.size() > 0 )
    {
        throw new Exception( "We were not able to read these Table settings from the config.xml : " + missingFields.toString() + ". Please check your setup." );
    }
}
} 
```

# javascript - 使用变量和循环创建“onclick”函数

> ID：15466844
> 
> 赞同：0
> 
> 时间：2013-03-17T22:11:43.317
> 
> 标签：javascript

我正在尝试使用 for 循环为下面的 4 个链接中的每一个生成 onclick 函数。现在它根本不起作用，我不确定为什么？

小提琴：http: [//jsfiddle.net/7WYfF/](http://jsfiddle.net/7WYfF/)

```
<p><a href="#" id="link0">Link0</a></p>
<p><a href="#" id="link1">Link1</a></p>
<p><a href="#" id="link2">Link2</a></p>
<p><a href="#" id="link3">Link3</a></p>

<script>
for (var i = 0; i < 3; i++) {
    var temp = "link" + i;

    [temp].onclick = function () { 
        alert("You just clicked link: " + i);
    };
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T22:13:56.487

两件事情。首先，您需要包装`i`一个闭包来存储您想要的值。第二个`[temp]`不会选择 DOM 元素，您需要以不同的方式进行操作。

```
for (var i = 0; i < 3; i++) {
    var temp = "link" + i;

    document.getElementById(temp).onclick = (function(t) {
        return function (e) { 
            alert("You just clicked link: " + t);
        };
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:17:19.227

试试这个...

var temp = document.getElementById("link" + i);

temp.onclick = 功能...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:18:16.783

你应该使用 getElementById ：

```
document.getElementById("link" + i); 
```

我也建议你使用 jQuery 框架。它比纯 JavaScript 简单。

# android - 如何从格式化字符串中获取值？

> ID：15466845
> 
> 赞同：0
> 
> 时间：2013-03-17T22:11:59.627
> 
> 标签：android, timer, format, string-formatting, countdowntimer

我有一个倒计时的应用程序。

我像这样格式化了一个字符串：

```
String.format("%02d:%02d:%02d", hour, min, sec); 
```

例如 01:42:12。

我想知道如何以相反的顺序执行此操作？我想得到 3 个值除以“：”。

怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:01:15.980

您可以`DateFormat`为此目的使用：

```
DateFormat tf = DateFormat.getTimeInstance()
String str = tf(new Date());    // gives you current time '01:05:06'
Date d = tf.parse(str);         // parses it back to the Date 
```

否则，还有`SimpleDateFormat`很多其他方法可以给猫剥皮。

# android - android中的数据库

> ID：15466846
> 
> 赞同：-2
> 
> 时间：2013-03-17T22:12:02.023
> 
> 标签：android, database

我将编写一个需要数据库的应用程序。我将需要四个表，每个表都将维护应用程序一个屏幕的信息。我的问题是我可以创建一个数据库助手类并将所有表放入其中，还是应该创建 4 个不同的助手类并将每个表放在一个单独的类中。有什么区别吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:55:19.007

> 我可以创建一个数据库助手类吗

是的。一个就够了。也考虑让你的`DatabaseHelper`as [`Singleton`](http://en.wikipedia.org/wiki/Singleton_pattern)。

> 将所有表格放入其中，或者我应该创建 4 个不同的辅助类并将每个表格放在一个单独的类中

就像我在上面写的那样，您会将所有表格归为一类。

> 有什么区别吗？

结果是一样的，但不同的是我猜你写的代码更少，你总是有一个 Helper 实例，代码会更干净，可读性更好。

想象一下某个商业公司拥有包含 20 个表的大型数据库。仍然公司只有一个数据库。

您可以将其想象[`SQLiteOpenHelper`](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)为一个大型数据库（它包含所有必需的逻辑）。因此，创建 4 个不同的类，每个类包含一个表是不合逻辑的。就像您将有 4 个数据库和一张表。

## 我的建议：

是创建一个通用`DatabaseHelper`的，它将包装所有必需的逻辑，然后为了实现干净且有效的解决方案，您可以创建四个将为`CRUD`每个表实现操作的类。

## 例子：

```
public class UserTools {

   private SQLiteOpenHelper handler;
   private SQLiteDatabase db;

   public UserTools(SQLiteOpenHelper handler) {
      this.handler = handler;
   }

   public void insert(<data>) { ... }

   public void update(<data>) { ... }

   public void delete(<data>) { ... }

   public List<DataType> getAll() { ... }

   public DataType getObject(<data>) { ... }

   private final synchronized SQLiteDatabase openWrite(SQLiteOpenHelper handler) {
      return handler.getWritableDatabase();
   }

   private final synchronized SQLiteDatabase openRead(SQLiteOpenHelper handler) {
      return handler.getReadableDatabase();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:58:26.137

您可以创建一个数据库助手类，并在应用程序的某处对其进行初始化，然后在您的活动中传递它。

您可以像这样为每个表创建一个类：

```
public class CartTable {
// database table
public static final String TABLE_CART = "cart";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_CART_GROCERY_ID = "cart_grocery_id"; // this is grocery_id
public static final String COLUMN_CART_GROCERY_NAME = "cart_grocery_name";

// database creation SQL statement
public static final String DATABASE_CREATE = "create table "
        + TABLE_CART
        + "(" + COLUMN_ID + " integer primary key autoincrement, "
        + COLUMN_CART_GROCERY_ID + " integer unique, "
        + COLUMN_CART_GROCERY_NAME + " text);";

public static void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
}

public static void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
    Log.w(CategoryTable.class.getName(), "Upgrading database from version "
            + oldVersion + " to " + newVersion
            + ", which will destroy all old data");
    database.execSQL("DROP TABLE IF EXISTS " + TABLE_CART);
    onCreate(database);
} 
```

}

并创建一个在 onCreate 中执行类似操作的数据库助手类：

```
class myDatabaseHelper extends SQLiteOpenHelper{
    @Override
    public void onCreate(SQLiteDatabase db) {
        CartTable.onCreate(db);
    } 
    //.....get read/write database methods etc
} 
```

最后，创建一个单例类来创建和维护它的一个实例

```
class myDatabase{
    private static MyDatabaseHelper myDatabaseHelper;

    public static MyDatabaseHelper getInstance(){
        if (myDatabaseHelper == null)
            myDatabaseHelper = new MyDatabaseHelper();
        return myDatabaseHelper;
    }
} 
```

然后从任何活动中，您都可以通过 myDatabase.getInstance()

# c# - 更新条目时出错。有关详细信息，请参阅内部异常

> ID：15466854
> 
> 赞同：14
> 
> 时间：2013-03-17T22:12:40.413
> 
> 标签：c#, sql, wpf, database, entity-framework

当我删除列表框中的项目时，我收到问题中的错误，如下面的屏幕截图所示： ![错误](../Images/d6561f9f790f8bcff4fb23b0f524a11f.png)

我不知道内部异常在哪里，但我尝试了尝试，但我在问题中遇到了同样的错误。

这是所有代码：

```
namespace WpfApplication7
 {
/// <summary>
/// Interaction logic for Edit_Rooms.xaml
/// </summary>
public partial class Edit_Rooms : Window
{
    public Edit_Rooms()
    {
        InitializeComponent();
    }

    //initialises entities
    WpfApplication7.AllensCroftEntities1 allensCroftEntities1 = new WpfApplication7.AllensCroftEntities1();
    private Room ObjectIndex;

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        // Load data into Rooms. 
        System.Windows.Data.CollectionViewSource roomsViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("roomsViewSource")));
        //runs a query to go the roomsQuery to get the rooms table from the entities
        System.Data.Objects.ObjectQuery<WpfApplication7.Room> roomsQuery = this.GetRoomsQuery(allensCroftEntities1);
        //used when adding new rooms
        roomsViewSource.Source = roomsQuery.Execute(System.Data.Objects.MergeOption.AppendOnly);
    }

    private System.Data.Objects.ObjectQuery<Room> GetRoomsQuery(AllensCroftEntities1 allensCroftEntities1)
    {
        System.Data.Objects.ObjectQuery<WpfApplication7.Room> roomsQuery = allensCroftEntities1.Rooms;
        // Returns an ObjectQuery.
        return roomsQuery;
    }

    private void btnDelete_Click(object sender, RoutedEventArgs e)
    {
        //prevents user trying to delete nothing/unselected row
        if (ObjectIndex == null)
        {
            MessageBox.Show("Cannot delete the blank entry");
        }
        else
        {
                //deletes object from dataset, saves it and outputs a message
                allensCroftEntities1.DeleteObject(ObjectIndex);
                allensCroftEntities1.SaveChanges();
                MessageBox.Show("Room Deleted");
        }
    }

    private void btnSave_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            //attempts to save changes
            allensCroftEntities1.SaveChanges();
            MessageBox.Show("Saved");
        }
        catch (Exception ex)
        {
            //if unsuccessful, outputs an error message
            MessageBox.Show(ex.ToString());
        }
    }

    private void btnFirst_Click(object sender, RoutedEventArgs e)
    {
        listbox.SelectedIndex = 0;
    }

    private void btnPrevious_Click(object sender, RoutedEventArgs e)
    {
        //prevents user going to the previous item before the first item
        if (listbox.SelectedIndex > 0)
        {
            listbox.SelectedIndex -= 1;
        }
    }

    private void btnNext_Click(object sender, RoutedEventArgs e)
    {
        //prevents user going after last item and throwing up an error
        if (listbox.SelectedIndex < listbox.Items.Count)
        {
            listbox.SelectedIndex += 1;
        }
    }

    private void btnLast_Click(object sender, RoutedEventArgs e)
    {
        listbox.SelectedIndex = listbox.Items.Count - 1;
    }

    private void listbox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        //outputs index of the selected room
        ObjectIndex = listbox.SelectedItem as Room;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-17T22:15:46.017

单击“查看详细信息...”将打开一个窗口，您可以在其中展开“内部异常”我的猜测是当您尝试删除记录时存在引用约束违规。内部异常将为您提供更多信息，以便您可以在删除记录之前修改代码以删除任何引用。

![在此处输入图像描述](../Images/a837b368fc7ef2ff1be75c50f615463e.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-17T22:15:12.280

单击“查看详细信息”以查找内部异常。

# sql - 实体框架将 datetime 设置为 null 或 min

> ID：15466855
> 
> 赞同：1
> 
> 时间：2013-03-17T22:12:43.833
> 
> 标签：sql, entity-framework, datetime

我正在使用实体框架 5，数据库优先。

我正在做我以前做过很多次的事情，但由于某种原因它不起作用。

我的表定义为：

```
CREATE TABLE [dbo].[ActivationQueue](
[ID] [int] IDENTITY(1,1) NOT NULL,
[username] [nvarchar](255) NOT NULL,
[email] [nvarchar](255) NOT NULL,
[ActivationRequested] [datetime] NOT NULL,
[ActivationEmailSent] [datetime] NOT NULL,
[AccountActivated] [datetime] NOT NULL,
[ActivationAttempts] [int] NULL,
[ActivationKey] [uniqueidentifier] NULL, 
```

约束 [PK_Activations] 主键集群

这是我用来检索特定行的代码：

```
ActivationQueue accountActivation = DbSet.FirstOrDefault(a => a.username.ToLower() == userName) 
```

当我`DbSet.FirstOrDefault()`用来获取第一行时，ActivationEmailSent 列总是返回`SQLDateTime.MinValue()`，即使它具有正确的值。ActivationRequested 列始终返回正确的值。

我使用了 SQL 探查器，当我运行下面的 SQL 时，我得到了正确的`DateTime`值。

```
exec sp_executesql N'SELECT TOP (1) 
[Extent1].[ID] AS [ID], 
[Extent1].[username] AS [username], 
[Extent1].[email] AS [email], 
[Extent1].[ActivationRequested] AS [ActivationRequested], 
[Extent1].[ActivationEmailSent] AS [ActivationEmailSent], 
[Extent1].[AccountActivated] AS [AccountActivated], 
[Extent1].[ActivationAttempts] AS [ActivationAttempts], 
[Extent1].[ActivationKey] AS [ActivationKey]
FROM [dbo].[ActivationQueue] AS [Extent1]
WHERE (LOWER([Extent1].[username])) = @p__linq__0',N'@p__linq__0         nvarchar(4000)',@p__linq__0=N'someusername' 
```

让我印象深刻的是 和 的映射`ActivationRequested`与`ActivationEmailSent`定义相同（我刚刚`updateModel`在 edmx 中使用）。但`ActivationRequested`返回正确的值，而`ActivationEmailSent`返回`SQLDateTime.Min`( `1753-01-01 00:00:00.000`)

我不知道这是否有帮助，但是当我将列设置为可为空时，它只是返回空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:32:28.173

Found the problem for anyone else that may come with this.

The model.store properties of the DateTime column had the **precision** attribute set to *None* whereas the Entity had the **precision** attribute set to *3*.

Changing the precision attribute to *none* for both fixed the issue.

Though I am still baffled why it worked for one of the columns in the first place, and not the other even though they had identical mappings.

# java - 捕获#和一系列数字的正则表达式

> ID：15466858
> 
> 赞同：-3
> 
> 时间：2013-03-17T22:13:14.843
> 
> 标签：java, regex

有人可以帮助我构建一个正则表达式来捕获`"#"`字符串中的一个和一系列数字吗？

示例：在这个字符串中，`"asdadadsa #12345 asdasdasd #67"`我需要用. 我在java中工作，但我希望是一个普遍的问题`#12345``#67``"com.package.name://#12345"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:23:41.350

你需要看看基本的正则表达式，谷歌一些教程/指南。

回到你的问题，试试这一行：

```
String str ="asdadadsa #12345 asdasdasd #67";
String newString = str.replaceAll("#\\d+", "com.package.name://#12345"); 
```

那么`newString`将是：

```
asdadadsa com.package.name://#12345 asdasdasd com.package.name://#12345 
```

**根据 OP 的评论进行**编辑****

 **`$0, $1, $2...`然后您可以通过`0,1,2`are 组索引引用匹配的部分。

所以这条线变成了：

```
String newString = str.replaceAll("#\\d+", "com.package.name://$0"); 
```

不`newString`应该有你的期望值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:05:18.703

我解决了使用：

```
message.replaceAll("[#][0-9]+", "<a href=\"$0\">$0</a>"); 
```

谢谢**

# python - 有没有办法在执行连接操作时证明子字符串的合理性

> ID：15466859
> 
> 赞同：2
> 
> 时间：2013-03-17T22:13:20.447
> 
> 标签：python, join, string-formatting, justify

我必须在由该行中的行号和字号指定的特定位置替换多行文本中的一个单词。所有单词都在列中对齐。

我正在使用一种算法，通过它的坐标找到单词。

我正在获取指定行号的行，将其拆分为单独的子字符串，并用另一个单词替换指定位置的单词。然后我加入 (" ".join() ) 并将修改后的行写回文件中。我的问题是我在修改后的行中失去了单词对齐。我怎样才能同时证明和加入？（一行中的其他单词也会失去对齐，而不仅仅是修改过的单词）

我想如果我使用一点不同的方法，在要修改的单词的位置拆分一行，我可以做到这一点，但我没有意识到在单词边界拆分一行后我会失去对齐。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T22:19:47.050

在加入之前，您可以在列表理解中应用格式（使用[`format()`](http://docs.python.org/3/library/functions.html#format)或）：[`str.format()`](http://docs.python.org/3/library/stdtypes.html#str.format)

```
''.join([format(el, '<10') for el in list_of_strings]) 
```

演示：

```
>>> list_of_strings = ['foo', 'barbaz', 'spam-ham']
>>> ''.join([format(el, '<10') for el in list_of_strings])
'foo       barbaz    spam-ham  ' 
```

`<`以给定的宽度（上例中为 10）左对齐、`>`右对齐和`^`居中文本。有关格式化如何工作的更多详细信息，请参阅[格式规范文档](http://docs.python.org/2/library/string.html#format-specification-mini-language)。

右调整为 4 个空格的演示：

```
>>> list_of_strings = ['foo', 'ba', 'a']
>>> ''.join([format(el, '>4') for el in list_of_strings])
' foo  ba   a' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:23:56.880

您可以尝试拆分 with [`re.split`](http://docs.python.org/2/library/re.html#re.split)。如果您使用`/(?<= )\w/`正则表达式，它将在每个单词之前拆分，同时保留空格。`''.join(...)`然后，您可以在替换单词后加入它们。您可以根据需要在新单词后面加上尽可能多的空格，只需询问旧单词的长度即可。

请注意，如果新单词长然后列宽，这将出错。

如果我用代码写出来：

```
col = 1                              # replacing second word
line = "hello  there    friend    "  # we've already fetched the line
new_word = "here"                    # the new word
word_list = re.split('(?<= )\w', line)
length = len(word_list[col])
word_list[col] = col + ((length - len(new_word)) * ' ')
new_line = ''.join(word_list) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:25:37.147

```
str = "this is a sample statement";

print str.rjust(50, ' '); # right justification 
```

这将产生以下结果：
                                                   这是一个示例语句

**50 个空格**，后跟您的陈述

你可以试试

```
print str.rjust(0, ' ') 
```

强制句子是正确的。

# c++ - 在向量中创建新的空字段

> ID：15466860
> 
> 赞同：1
> 
> 时间：2013-03-17T22:13:25.223
> 
> 标签：c++, memory-management, stdvector

所以我有一个向量，最初是空的，但肯定会被填满。它包含结构的实例：

```
struct some {
    int number;
    MyClass classInstance;
}

/*Meanwhile later in the code:*/
vector<some> my_list; 
```

发生这种情况时，我想为向量添加值，我需要将其放大一倍。但当然，我不想创建任何变量来做到这一点。如果没有这个要求，我会这样做：

```
//Adding new value:
some new_item;       //Declaring new variable - stupid, ain't it?
my_list.push_back(new_item); //Copying the variable to vector, now I have it twice! 
```

所以，相反，我想`new_item`通过增加向量的大小来创建向量 - 看看：

```
int index = my_list.size();
my_list.reserve(index+1);  //increase the size to current size+1 - that means increase by 1
my_list[index].number = 3;  //If the size was increased, index now contains offset of last item 
```

但这不起作用！似乎没有分配空间 - 我得到**向量下标超出范围**错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T22:15:48.130

```
my_list.reserve(index+1); // size() remains the same 
```

储备不变`my_list.size()`。它只是增加了容量。您将此与以下内容混淆`resize`：

```
my_list.resize(index+1);  // increase size by one 
```

另请参阅[vector::resize() 和 vector::reserve() 之间的选择](https://stackoverflow.com/questions/7397768/choice-between-vectorresize-and-vectorreserve) 。

但我推荐另一种方式：

```
my_vector.push_back(some()); 
```

额外的副本将从您的编译器中删除，因此没有开销。如果你有 C++11，你可以通过放置到向量中来更优雅地做到这一点。

```
my_vector.emplace_back(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T22:15:58.450

`std::vector::reserve`仅确保分配了足够的内存，不会增加`vector`. 你正在寻找`std::vector::resize`.

此外，如果你有一个 C++11 编译器，你可以使用它`std::vector::emplace_back`来构建新项目，从而避免复制。

```
my_list.emplace_back(42, ... ); // ... indicates args for MyClass constructor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:16:44.920

`reserve()`只是*向*分配器请求空间，但实际上并没有填充它。尝试`vector.resize()`

# sqlite - PDO 中一个没有意义的致命错误？

> ID：15466870
> 
> 赞同：-1
> 
> 时间：2013-03-17T22:14:25.187
> 
> 标签：sqlite, pdo

当我执行这个方法时，数据库返回如下错误： 1\. 数据库没有问题，检查所有列名都匹配。代码在语法上也是正确的。我有另一种实现相同的方法，只是表名和列名不同。

```
Fatal error: Call to a member function execute() on a non-object in C:\xampp\htdocs\timetable-generator-v2\inout.php on line 173

$db = new Database();
$db->insertRule("something", NULL, NULL);

class Database{
    private $conn;
    function __construct() {
        try {
            $this->conn = new PDO("sqlite:" . DATABASE);
        } catch (PDOException $e) {
            echo $e->getMessage() . " - failed on: Database->__construct()";
            die();
        }

    }
    function insertRule($ruleName, $isNot, $isInverse){
        $ruleId = "ru1";//$this->generateId(RULE);
        try {
            $q = $this->conn->prepare("INSERT INTO Rule(ruleId, ruleName, not, inverse) VALUES(?, ?, ?, ?)");
            $q->execute(array($ruleId, $ruleName, $isNot, $isInverse));
        } catch (PDOException $e) {
            echo $e->getMessage() . " - failed on: Database->insertRule()";
            die();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:00:26.103

`NOT`是一个关键字。用于`"not"`将其用作列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T08:11:49.383

一个适当的代码让自己意识到错误

```
class Database{
    private $conn;
    function __construct() {
        $opt = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
        $this->conn = new PDO("sqlite:" . DATABASE,NULL,NULL,$opt);
    }
    function insertRule($ruleName, $isNot, $isInverse){
        $ruleId = "ru1";//$this->generateId(RULE);
        $q = $this->conn->prepare("INSERT INTO Rule(`ruleId`, `ruleName`, `not`, `inverse`) VALUES(?, ?, ?, ?)");
        $q->execute(array($ruleId, $ruleName, $isNot, $isInverse));
    }
} 
```

尽管任何特定的 insertRule 都不应该在 Database 类中

# asp.net - 让 ASP.NET 站点公开可用

> ID：15466872
> 
> 赞同：0
> 
> 时间：2013-03-17T22:14:52.097
> 
> 标签：asp.net, iis-express

我使用了这个线程提供的解决方案：[Can I access ASP.NET Development server in an Intranet?](https://stackoverflow.com/questions/18918/can-i-access-asp-net-development-server-in-an-intranet)

我已经尝试过 JavaTCPtunnel 和 Pocketsoap TCP 跟踪，但它们都返回错误请求 - Inavlid 主机名。我可以看到建立了连接，但仍然返回此错误。

路由器和防火墙都转发。

我需要在 IIS 开发服务器中设置一些东西吗？为什么这对每个人都有效，但对我无效？

# java - Android应用程序无法在模拟器上运行

> ID：15466875
> 
> 赞同：0
> 
> 时间：2013-03-17T06:22:46.303
> 
> 标签：java, emulation

我对android开发很陌生，我正在尝试开发一个服务器-客户端应用程序，其中服务器是一个简单的java应用程序，它从文件中读取一些文本并使用输出流发送它。客户端是一个 android 应用程序，它在单击按钮时读取此流并将其显示在文本视图上。

我将 eclipse 与 ADK 一起使用，并在模拟器上进行测试，这两个代码的外观如下：

服务器：

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

public class Server {
     /**
     * @param args
     * @throws IOException 
     * @throws UnknownHostException 
     */
    public static void main(String[] args) throws UnknownHostException, IOException 
    {

        System.out.println("***********Starting ***********");
        ServerSocket servsock = new ServerSocket(12344);
        System.out.println("Waiting...");

        Socket sock = servsock.accept();
        while (true) 
        {
          System.out.println("Accepted connection : " + sock);
          File myFile = new File ("source.txt");
          while (true){
          byte [] mybytearray  = new byte [(int)myFile.length()];
          FileInputStream fis = new FileInputStream(myFile);
          BufferedInputStream bis = new BufferedInputStream(fis);
          bis.read(mybytearray,0,mybytearray.length);
           OutputStream os = sock.getOutputStream();
          System.out.println("Sending...");
          os.write(mybytearray,0,mybytearray.length);
          os.flush();

          }    
    }

    }
} 
```

客户：

-主要活动

```
package com.example.streamerclient;

import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener {
         Button ConnectBtn ;

          @Override
          public void onResume() {
            super.onResume();
            //setContentView(R.layout.activity_main);

            System.out.println(" on resume ");
            ConnectBtn = (Button)findViewById(R.id.ConnectButton);

            ConnectBtn.setOnClickListener(this);

            }
          @Override
          public void onPause() {
            super.onPause(); 
          }
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Connecting c = new Connecting();

        }

} 
```

-连接类

```
 package com.example.streamerclient;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.Socket;

import android.app.Activity;
import android.widget.TextView;

public class Connecting extends Activity implements Runnable 
{
    private Socket sock;
    private BufferedReader r;
    private BufferedWriter out;
    TextView Data;
    public Connecting ()
    {
        Data = (TextView) findViewById(R.id.DataTextView);
        Thread th = new Thread(this);
        th.start();

    }
    @Override
    public void run() {
        try
        {

        System.out.println("trying to initiated ");
        Data.setText("trying to initiated ");
        sock = new Socket("10.0.2.2",12344);
        System.out.println(" socket initiated ");
        Data.setText(" socket initiated ");
        r = new BufferedReader(new InputStreamReader(sock.getInputStream()));
        Data.setText("  buffer reader initiated  ");
        System.out.println(" buffer reader initiated ");

        out = new BufferedWriter(new OutputStreamWriter(sock.getOutputStream()));
        Data.setText("   buffer writer initiated  ");
        System.out.println(" buffer writer initiated ");
        final String data = r.readLine(); 
        Data.setText("   Data read is: \n"+data);
        System.out.println(" Data read is: \n"+data);        
        }
        catch (IOException ioe) { }
    }
 public void OnPause()
 {
     System.out.println(" paused");
        try {
          if (sock != null) {
            sock.getOutputStream().close();
            sock.getInputStream().close();
            sock.close();
            System.out.println(" everything is closed ");
          }
        } catch (IOException e) {}
 }
} 
```

我知道我知道，有一些代码部分没有使用......我的下一个任务是让这个应用程序向服务器发送命令......所以我还在试验。

在模拟器上运行应用程序时，它甚至在显示任何 GUI 组件之前就停止了。知道为什么吗？这是日志文件的内容

```
03-17 08:16:30.886: W/Trace(846): Unexpected value from nativeGetEnabledTags: 0
03-17 08:16:30.886: W/Trace(846): Unexpected value from nativeGetEnabledTags: 0
03-17 08:16:30.886: W/Trace(846): Unexpected value from nativeGetEnabledTags: 0
03-17 08:16:31.016: W/Trace(846): Unexpected value from nativeGetEnabledTags: 0
03-17 08:16:31.016: W/Trace(846): Unexpected value from nativeGetEnabledTags: 0
03-17 08:16:31.126: I/System.out(846):  on resume 
03-17 08:16:31.447: D/AndroidRuntime(846): Shutting down VM
03-17 08:16:31.447: W/dalvikvm(846): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
03-17 08:16:31.457: E/AndroidRuntime(846): FATAL EXCEPTION: main
03-17 08:16:31.457: E/AndroidRuntime(846): java.lang.RuntimeException: Unable to resume activity {com.example.streamerclient/com.example.streamerclient.MainActivity}: java.lang.NullPointerException
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.os.Looper.loop(Looper.java:137)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-17 08:16:31.457: E/AndroidRuntime(846):  at java.lang.reflect.Method.invokeNative(Native Method)
03-17 08:16:31.457: E/AndroidRuntime(846):  at java.lang.reflect.Method.invoke(Method.java:511)
03-17 08:16:31.457: E/AndroidRuntime(846):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-17 08:16:31.457: E/AndroidRuntime(846):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-17 08:16:31.457: E/AndroidRuntime(846):  at dalvik.system.NativeStart.main(Native Method)
03-17 08:16:31.457: E/AndroidRuntime(846): Caused by: java.lang.NullPointerException
03-17 08:16:31.457: E/AndroidRuntime(846):  at com.example.streamerclient.MainActivity.onResume(MainActivity.java:20)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.Activity.performResume(Activity.java:5182)
03-17 08:16:31.457: E/AndroidRuntime(846):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
03-17 08:16:31.457: E/AndroidRuntime(846):  ... 12 more 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:53:10.957

尝试将整个 onResume() 的内容移动到 onCreate() 方法。始终在 onCreate() 中进行 UI 设置。阅读：[活动生命周期管理](http://developer.android.com/training/basics/activity-lifecycle/index.html)。

并对stackoverflow进行任何进一步的查询:)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T18:29:55.477

您在 MainActivity 的第 20 行收到 NullPointerException，请检查该行。
我认为这个问题更适合stackoverflow

# sql - 基于 select 的更新语句

> ID：15466878
> 
> 赞同：0
> 
> 时间：2013-03-17T22:14:58.843
> 
> 标签：sql, sql-server-2008, select, sql-update

我有声明

```
update Clients
set StatusID= 4
from (select c.clientid
from Clients c
where CategCode = 'CH' and StatusID in (1,2,6) and DATEDIFF(YEAR,dob,GETDATE())>5) 
```

它给我带来了错误

```
Msg 102, Level 15, State 1, Line 5
Incorrect syntax near ')'. 
```

你知道什么会导致这个错误吗？

我试图使用这个语句，但它为所有客户端设置了状态 4

```
update Clients
set StatusID= 4
WHERE EXISTS( 
select clientid,DOB,DATEDIFF(YEAR,dob,GETDATE())
from Clients 
where CategCode = 'CH' and StatusID in (1,2,6) and DATEDIFF(YEAR,dob,GETDATE())>5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:16:35.663

试试这个

```
update c
set c.StatusID= 4
from Clients c
where CategCode = 'CH' and StatusID in (1,2,6) 
and DATEDIFF(YEAR,dob,GETDATE())>5 
```

您的第二个查询应该是

```
update c
set StatusID= 4
from Clients c
WHERE EXISTS( 
select 1
from Clients x
where CategCode = 'CH' and StatusID in (1,2,6)  and x.clientid = c.clientid) 
```

# r - 累积总和直到达到最大值，然后在下一行从零开始重复

> ID：15466880
> 
> 赞同：12
> 
> 时间：2013-03-17T22:15:02.563
> 
> 标签：r, loops, if-statement, cumsum

我觉得这是一个相当简单的问题，但对于我的生活，我似乎无法找到答案。我有一个相当标准的数据框，我想做的是对一列值求和，直到它们达到某个值（该值或大于该值），此时它将 1 放入一个新列（标记为keep) 并在 0 处重新开始求和。

我有一列分钟，分钟之间的差异，一个保留列和一个累积总和列（我使用的示例比实际的完整数据集要干净得多）

```
 minutes     difference     keep     difference_sum
 1052991158       0          0            0
 1052991338      180         0            180
 1052991518      180         0            360
 1052991698      180         0            540
 1052991878      180         0            720
 1052992058      180         0            900
 1052992238      180         0            1080
 1052992418      180         0            1260
 1052992598      180         0            1440
 1052992778      180         0            1620
 1052992958      180         0            1800 
```

差和列是用代码计算的

```
caribou.sub$difference_sum<-cumsum(difference) 
```

我想要做的是运行上面的代码，条件是，当总和值达到 1470 或任何大于它的数字时，它将 1 放在保持列中，然后重新开始求和，并继续在整个数据集中运行。

提前致谢，如果您需要更多信息，请告诉我。

艾登

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T22:22:38.783

我认为这最好用 for 循环来完成，想不出一个开箱即用的函数。以下应该做你想做的（如果我理解正确的话）。

```
current.sum <- 0
for (c in 1:nrow(caribou.sub)) {
    current.sum <- current.sum + caribou.sub[c, "difference"]
    carribou.sub[c, "difference_sum"] <- current.sum
    if (current.sum >= 1470) {
        caribou.sub[c, "keep"] <- 1
        current.sum <- 0
    }
} 
```

如果它不完全符合您的要求，请随时发表评论。但正如 alexwhan 所指出的，您的描述并不完全清楚。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-17T22:36:26.973

假设你`data.frame`是`df`：

```
df$difference_sum <- c(0, head(cumsum(df$difference), -1))
# get length of 0's (first keep value gives the actual length)
len <- sum(df$difference_sum %/% 1470 == 0)
df$keep <- (seq_len(nrow(df))-1) %/% len
df <- transform(df, difference_sum = ave(difference, keep, 
          FUN=function(x) c(0, head(cumsum(x), -1))))

#       minutes difference keep difference_sum
# 1  1052991158        180    0              0
# 2  1052991338        180    0            180
# 3  1052991518        180    0            360
# 4  1052991698        180    0            540
# 5  1052991878        180    0            720
# 6  1052992058        180    0            900
# 7  1052992238        180    0           1080
# 8  1052992418        180    0           1260
# 9  1052992598        180    0           1440
# 10 1052992778        180    1              0
# 11 1052992958        180    1            180 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T02:18:26.923

我仍然不明白总和何时应该重新开始以及它是否应该为零。理想的结果将有很大帮助。

尽管如此，我不禁认为简单的索引和减法将是一种直接的方法。下面的代码给出了与@Henrik 的解决方案相同的结果。

```
df$difference_sum <- cumsum(df$difference)
step <- (df$difference_sum %/% 1470) + 1
k <- which(diff(step) > 0) + 1
df$keep <- 0
df$keep[k] <- 1
step[k] <- step[k] - 1
df$difference_sum <- df$difference_sum - c(0, df$difference_sum[k])[step] 
```

# arrays - 使用bash将换行符分隔的字符串存储到数组中

> ID：15466884
> 
> 赞同：0
> 
> 时间：2013-03-17T22:15:43.870
> 
> 标签：arrays, bash, command-line, scripting, sh

我有以下代码

```
tasks=$(cut ~/.todo/data -f3) 
```

数据包括

```
1331956800  29  task 5
1361077200  28  task 3
1363554894  26  task 1
1363555119  30  baller 
```

出于某种原因，我可以使用此方法提取前两列，但第三列似乎无法正常工作。`IFS='\n'`我之前尝试过设置，`tasks=`但它仍然拒绝工作。

列之间有制表符，第 3 列中只有空格。

我想

```
${tasks[0]} = "task 5"
${tasks[1]} = "task 3"
...
${tasks[3]} = "baller" 
```

这是cut的输出

```
$ cut ~/.todo/data -f3
task 5
task 3
task 1
baller 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:55:49.497

简单的 bash 解决方案。

```
tasks=()
while IFS=$'\t' read _ _ t; do
        tasks+=("$t")                                                       
done <<-!
        1331956800      29      task 5
        1361077200      28      task 3
        1363554894      26      task 1
        1363555119      30      baller
!

for t in "${tasks[@]}"; do
        echo "$t"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:27:43.660

[默认情况下， awk](/questions/tagged/awk "显示标记为“awk”的问题")在空格或制表符上拆分列（可以不仅仅是其中之一），它更适合具有混合列分隔符的文件。

```
readarray a < <(awk '{print "\047" $3, $4 "\047"}' file.txt)
for i in ${!a[@]}; do echo "index[$i]=${a[i]}"; done 
```

**编辑**：您的问题在线程中增长，所以

```
readarray a < <(
    awk '{$1=$2=""; sub(/^ +/, ""); print "\047" $0 "\047"}' ~/.todo/data
) 
```

* * *

```
\047 
```

是八进制 ASCII 表示`'`

# groovy - HTTPBuilder/RESTClient 401 处理

> ID：15466888
> 
> 赞同：1
> 
> 时间：2013-03-17T22:15:49.457
> 
> 标签：groovy, apache-httpclient-4.x, httpbuilder

我正在使用 groovy HTTPBuilder 构建应用程序，但我有点卡在处理 401 上。在我的应用程序中，我的身份验证 cookie 每隔几分钟就会失效（请求返回 401），我必须通过请求一些资源来更新它（比如 /token /refresh) 然后重复原始请求。我知道我可以定义 response.'401' 失败关闭，但我不想一遍又一遍地在每个请求中指定它。我想更透明地做到这一点。我检查了已经有一些身份验证策略（basic、oauth、digest、...），但它们都不适合我，实施新的东西似乎需要做很多工作。我想定义一些 responseInterceptor 来检查响应状态，如果是 401，我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:20:55.030

使用元编程拦截`request`方法调用并在那里处理状态 401 怎么样？

我现在无法测试，所以我会尝试盲拍：

```
import groovyx.net.http.HTTPBuilder
import static groovyx.net.http.Method.GET
import static groovyx.net.http.ContentType.TEXT

def oldRequest = HTTPBuilder.&request 

HTTPBuilder.metaClass.request = { method1, method2, clos ->
  println "handler"
  def authErrorClos = { 
    response.'401' = {
      // handle
    } 
  }

  authErrorClos.delegate = oldRequest

  authErrorClos()

  oldRequest method1, method2, clos

} 
```

# html - 将鼠标悬停在特定项目图像上时尝试显示描述文本

> ID：15466890
> 
> 赞同：0
> 
> 时间：2013-03-17T22:15:55.807
> 
> 标签：html, css

在[https://dl.dropbox.com/u/4088146/seans/index.html](https://dl.dropbox.com/u/4088146/seans/index.html)上，当您将鼠标悬停在图像上时，我试图显示与投资组合图像相关的描述。当您将鼠标悬停在图像上时，我试图通过将不透明度设置为 1 来做到这一点。

由于某种原因，这不起作用。

```
.description {
  display: block;
  opacity: 0;
  text-align: left;
  height: 130px;
  padding-top: 50px;
  width: 70%;
  max-width: 700px;
  margin: 0 auto;
}
section img:hover ~ .description {opacity: 1;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:22:27.537

你需要有一个兄弟选择器`~`， `+`

**更新**

检查这个[http://jsfiddle.net/btevfik/PAvDJ/](http://jsfiddle.net/btevfik/PAvDJ/)

这是另一个例子

[http://jsfiddle.net/btevfik/nJSMg/](http://jsfiddle.net/btevfik/nJSMg/)

万一小提琴将来会发疯

HTML

```
<div class="section">
<img src="http://placekitten.com/100/100" />
<div class="description">HELLO</div>
<img src="http://placekitten.com/100/100" />
<div class="description">WORLD</div>
</div> 
```

CSS

```
.description {
opacity: 0;
}
img:hover + .description {
opacity:1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T23:11:24.137

问题是没有要选择的 IMG 元素的兄弟。

你所拥有的是：

```
<div class="span12 dark">
  <a href="http://whatever.org">
    <img src="http://lorempixel.com/400/200">
  </a>
  <p class="description">I re-designed Trulia's iPhone and iPad experiences, surfacing local data and heatmaps, while improving the core search experience. The project was also an opportunity to define a new visual language for all of Trulia.</p>
</div> 
```

你应该有这个：

```
<div class="span12 dark">
  <a href="http://whatever.org">
    <img src="http://lorempixel.com/400/200">
    <p class="description">I re-designed Trulia's iPhone and iPad experiences, surfacing local data and heatmaps, while improving the core search experience. The project was also an opportunity to define a new visual language for all of Trulia.</p>
   </a>      
</div> 
```

# python - 如何为使用 ImageGrid 创建的整个图形创建单轴标签

> ID：15466893
> 
> 赞同：2
> 
> 时间：2013-03-17T22:16:07.787
> 
> 标签：python, matplotlib

我用 matplotlib 的`ImageGrid`助手类创建了一个图。下面是代码：

```
from mpl_tookits.axes_grid1 import ImageGrid
from matplotlib.pyplot import *

fig = figure(figsize=(20, 12), dpi=300)
grid = ImageGrid(fig, 111, nrows_ncols=(3, 4), axes_pad=1, aspect=False)
for gridax, (i, sub) in zip(grid, enumerate(eyelink_data)):
    subnum = i + start_with

     # format data
    xdat = sub['x'][(sub['in_trl'] == True) & (sub['x'].notnull()) & (sub['y'].notnull())]
    ydat = sub['y'][(sub['in_trl'] == True) & (sub['x'].notnull()) & (sub['y'].notnull())]

    # plot
    gridax.hist2d(xdat, ydat, bins=[np.linspace(-.005, .005, num=1000), np.linspace(-.005, .005, num=1000)])
    gridax.plot(0, 0, 'ro')  # origin

show() 
```

我查看了[这个食谱页面](http://www.scipy.org/Cookbook/Matplotlib/Multiple_Subplots_with_One_Axis_Label)以获取有关如何为整个图形设置单个 x 和 y 标签的信息，但这些食谱似乎仅适用于具有标准子图的标准图形。

我还看了一些`mpl_toolkits.axes_grid1.axes_divider.LocatableAxes`'s 的方法，但没有任何反应。 中的方法*同上*`mpl_toolkits.axes_grid1.axes_grid.ImageGrid`。

有谁知道我如何使用`ImageGrid`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:13:24.823

在[这个 github 拉取请求](https://github.com/matplotlib/matplotlib/pull/1519)中，我尝试了图形范围 x 和 y 标签的可能实现（我很高兴我不是唯一一个想要拥有这种功能的人。

这段代码概括了 PR 实现的要点并生成[了这个图](http://i.stack.imgur.com/Pslap.png)。针对今天（18.03.2013）获取的 matplotlib master 进行了测试。

```
from mpl_toolkits.axes_grid1 import ImageGrid
import matplotlib.pyplot as plt

fig = plt.figure(figsize=(20, 12))
grid = ImageGrid(fig, 111, nrows_ncols=(3, 4), axes_pad=1, aspect=False)

#get the extent of the largest box containing all the axes/subplots
extents = np.array([a.get_position().extents for a in grid])  #all axes extents
bigextents = np.empty(4)   
bigextents[:2] = extents[:,:2].min(axis=0)
bigextents[2:] = extents[:,2:].max(axis=0)

#text to mimic the x and y label. The text is positioned in the middle 
labelpad=0.08  #distance between the external axis and the text
xlab_t = fig.text((bigextents[2]+bigextents[0])/2, bigextents[1]-labelpad, 'x label',
    horizontalalignment='center', verticalalignment = 'bottom')
ylab_t = fig.text( bigextents[0]-labelpad, (bigextents[3]+bigextents[1])/2, 'y label',
    rotation='vertical', horizontalalignment = 'left', verticalalignment = 'center') 
```

如果您以交互方式工作或想要封装在一个函数/类中，您可以在绘制新标签之前摆脱旧`[xy]lab_t.set_visible(False)`标签（有一个`text.remove()`方法但尚未实现）。

使用这种方法有几个注意事项：

1.  不适用于`plt.tight_layout`：这是因为此方法特定于`subplots`不`matplotlib.Figure`对象

2.  几个月前，有一个想法/公关`artists`在保存数字时包含所有内容`bbox_inches='tight'`，但我不知道这个状态。

# php - javascript和php中的下拉菜单

> ID：15466896
> 
> 赞同：0
> 
> 时间：2013-03-17T22:16:27.367
> 
> 标签：php, javascript

我在 javascript 中有一个下拉功能，其中只有汽车以选项形式显示。当用户点击“Acura”时，模型会出现，“Vigor”、“RSX”......

选择模型后，零件组应该会出现，但不会出现。我无法弄清楚第三个选项应该如何显示。谢谢 这是我的代码

```
getCars.php

<?php

$models = array(
"acura" => array("CL", "EL", "Integra", "Legend", "MDX", "NSX", "RL", "RSX", "SLX", "TL", "TSX", "Vigor"),
"alfa" => array("1750", "Alfetta", "GTV-6", "Romeo 164", "Romeo Milano", "Spyder", "Spyder 1600 Duetto", "Spyder1600", "Veloce 2000")

);

$partgroup = array(
"Accessories" => array("Bed Cover", "Bed Liner", "Bed Rails", "Car Cover", "Converitible Boot Cover", "Jack", 
"Luggage Rack", "Spare Tire Cranks", "Spare Tire Holder", "Tool Kit")

);

//echo "Cars: " . $_GET['cars'];

if(isset($_GET['cars'])) {

    $c = $_GET['cars'];
    $p = $_GET['partGroup'];
        if(isset($models[$c])) {
            for($i = count($models[$c]) -1; $i>=0; $i-- ) {
                echo "<option value='" . $models[$c][$i] . "'>" . $models[$c][$i]. "</option>";
            }
        }

        else if(isset($partgroup[$p])) {
                for($i = count($partgroup[$p]) -1; $i>=0; $i-- ) {
                echo "<option value='" . $partgroup[$p][$i] . "'>" . $partgroup[$p][$i]. "</option>";
            }
            }

}

?>

index.php

<html>
<head>
<title></title>
</heady>

<body>

<form name="form1" action="submit.php" method='post'>
Please choose a car model<br/>
<select name="cars" onchange="window.getCars()">
<option disabled>Select Car model </option>
<option value="acura">Acura</option>
<option value="alfa">Alfa</option>
</select>

<br/>

<input type="submit" name="submit" value="submit">
</form>

<script type="text/javascript">
    function getCars() {
        var xmlhttp;
        try {
            xmlhttp = new XMLHttpRequest;

        }catch(e)
        {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        if(xmlhttp) {
            var form = document['form1'];
            var cars = form['cars'].value;

            xmlhttp.open("GET", "http://localhost/drop/getCars.php?cars="+cars, true);
            xmlhttp.onreadystatechange = function ()
            {
                if(this.readyState == 4) {
                    var s = document.createElement("select");
                    s.name = "model";
                    s.innerHTML = this.responseText;

                    if(form['model']) {
                        form.replaceChild(s, form['model']);
                    }           

                    else
                        form.insertBefore(s, form['submit']);

                    getpartGroup();
                    //alert(this.responseText);
                }
            }
            xmlhttp.send(null);
        }
    }

</script>

<script type="text/javascript">
    function getpartGroup() {
        var xmlhttp;
        try {
            xmlhttp = new XMLHttpRequest;

        }catch(e)
        {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        if(xmlhttp) {
            var form = document['form1'];
            var cars = form['partGroup'].value;

            xmlhttp.open("GET", "http://localhost/drop/getCars.php?partGroup="+partGroup, true);
            xmlhttp.onreadystatechange = function ()
            {
                if(this.readyState == 4) {
                    var s = document.createElement("select");
                    s.name = "partGroup";
                    s.innerHTML = this.responseText;

                    if(form['partGroup']) {
                        form.replaceChild(s, form['partGroup']);
                    }           

                    else
                        form.insertBefore(s, form['submit']);

                    //alert(this.responseText);
                }
            }
            xmlhttp.send(null);
        }
    }

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:37:08.633

使用流行的 JS 框架之一（如 jQuery、原型、主干或下划线）更简单、更简洁。这些都支持 ajax 和更新 DOM，查看一些教程，这比手动弄乱 xmlhttp 容易得多。

但是，如果您使用的是 Firefox，您可以在 chrome 开发控制台（ctrl-shift-i，右键单击，切换 Log XMLHttpRequests）或 firebug 控制台中查看 ajax 请求的位置和方式。打开控制台，选择一辆车，ajax 请求应该会出现在控制台中，您可以点击查看结果。

调试愉快！

# html - 用 :nth-child 选择一半的元素？

> ID：15466898
> 
> 赞同：14
> 
> 时间：2013-03-17T22:16:36.780
> 
> 标签：html, css, css-selectors

以下面的代码为例：

```
<ul>
  <li>Hello World</li>
  <li>Hello World</li>
  <li>Hello World</li>
  <li>Hello World</li>
</ul> 
```

是否有可能，使用`:nth-child()`或以其他方式，准确选择总元素的**一半？**在上面的例子中，代码应该选择第一个/最后*两个* ，然后如果我将s 的数量增加到六个，它将选择第一个/最后*三个*。`li``li`

 *我觉得我将不得不使用 JavaScript ......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-17T23:52:45.943

**您可以在纯 CSS**中选择一半的元素......直到某一点。
唯一的缺点是您必须知道总项目的最大数量。可能是 150，但它不适用于 151。

这是一个演示：http: [//jsfiddle.net/tcK3F/](http://jsfiddle.net/tcK3F/) (*)

最小的 CSS：

```
/* selecting half or more items. Up to 6 */
li:first-child:last-child,
li:nth-child(n+2):nth-last-child(-n+2),
li:nth-child(n+3):nth-last-child(-n+3),
li:nth-child(n+4):nth-last-child(-n+4),
li:nth-child(n+5):nth-last-child(-n+5),
li:nth-child(n+6):nth-last-child(-n+6) {
  color: white;
  background: darkblue;
}

/* selecting half or less items. Up to 6 */
li:nth-child(n+2):last-child,
li:nth-child(n+3):nth-last-child(-n+2),
li:nth-child(n+4):nth-last-child(-n+3),
li:nth-child(n+5):nth-last-child(-n+4),
li:nth-child(n+6):nth-last-child(-n+5),
li:nth-child(n+7):nth-last-child(-n+6){
  font-style: italic;
  border: 2px solid red;
} 
```

基于来自以下方面的想法：
诀窍来自 André Luís，并在 Lea Verou 的帖子中看到：[基于兄弟计数的样式元素](http://lea.verou.me/2011/01/styling-children-based-on-their-number-with-css3/)。我根据您对拆分选择的需要对其进行了调整。

快速解释：将从父项中
`:nth-last-child(-n+3)`选择最后 3*个项目；*`:nth-child(n+3)`将选择*除前*3 个项目之外的所有项目。将它们组合起来，您可以根据元素后面的内容（或父项中有多少子项）在纯 CSS 中选择元素。如果您希望此技巧适用于 150 个元素，则必须将其中的 75 个与 74 个逗号组合在一起... :)

兼容性为 IE9+（存在 JS polyfills）

(*)
HTML 代码的第一部分：偶数个列表项；
第二部分：奇数个列表项

第一条 CSS 规则：将从 2N 个项目中选择最后 N 个项目或从 2N+1 个项目中选择最后 N+1/2 个项目，并将它们设置为蓝底白字（例如：总共 5 或 6 个项目中的 3 个项目）。
第二个 CSS 规则：将从 2N 个项目中选择最后 N 个项目或从 2N+1 个项目中选择最后 N-1/2 个项目，并使用红色边框和斜体设置它们的样式（例如：总共 4 或 5 个项目中的 2 个项目）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T22:19:11.073

在纯 CSS 中，你能够**接近**`nth-child(odd)`它的唯一方法是在or上做一个选择器`nth-child(even)`。如果您想要准确的后半部分（而不是奇数或偶数），那么您必须使用 JavaScript/jQuery。

使用 jQuery，您可以使用以下方法获取它们：

```
var yourList = $("ul li");

yourList = yourList.slice(0, Math.floor(yourList.length/2)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T22:22:41.137

## [例子](https://jsfiddle.net/GustvandeWal/72hxonuk/)

为这些元素创建一个带有样式的 CSS 类：

```
.half {
    background-color: #18D;
} 
```

然后，使用 jQuery 将该类添加到指定的元素集：

```
$(function () {
  var $lis = $('ul li')
  var length = $lis.length

  // Add class to first half:
  $lis.slice(0, Math.floor(length / 2)).addClass('first')

  // Add class to last half:
  $lis.slice(length - Math.floor(length / 2)).addClass('first')
}) 
```

如果您确实想在元素数量奇数的情况下将元素**包含**`Math.floor`在中间，请更改为`Math.ceil`. [在示例](https://jsfiddle.net/GustvandeWal/72hxonuk/)中可以看到所有可能性。*

# javascript - 如何获取 localStorage 的 li 值

> ID：15466900
> 
> 赞同：0
> 
> 时间：2013-03-17T22:16:47.957
> 
> 标签：javascript, json, cordova, local-storage

这是我编码的一部分

```
function getStudentList() {
    $.getJSON('http://mydomain.com/getStudents.php?jsoncallback=?', function(data) {
        $('#studentList li').remove();
        $('#load').hide();
        //students = data.user_name;
        $.each(data, function(index, student) {
            $('#studentList').append('<li><a href="student_detail.html?user_name=' + student.data.user_name + '">' +
                    '<h4>' + student.data.user_name + '</h4>' +
                    '<p>' + student.data.role + '</p>' +
                    '</a></li>');
        });
        $('#studentList').listview('refresh');
    });
} 
```

我看过一些帖子，phonegap 可能不支持像 student_detail.html?user_name=XXXX 这样的 URL，对吗？因此，我想通过使用 localStorage 来改变方法。studentList 将生成学生列表，我想向用户显示所选学生的详细信息。一旦学生被选中，他的用户名将存储在localStorage中，并在其他页面中获取值进行进一步处理。下次，当用户想看另一个学生时，该localStorage会先删除，然后再新建。这种方法可以吗？而且，我的问题是如何保存所选学生的用户名的值？

```
var id = $("#id").val();
window.localStorage["id"] = id; 
```

我不知道如何在 $.each 中创建特定的#id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:16:17.167

PhoneGap 将相对 URL 视为项目中包含的本地文件 (file://)。

如果`student_detail.html`驻留在服务器上，则应使用完全限定的 URL 对其进行寻址，例如`http://mydomain.com/student_detail.html?user_name=...`

您还需要确保`http://mydomain.com`根据[http://docs.phonegap.com/en/2.3.0/guide_whitelist_index.md.html在 PhoneGap 项目中将其列入白名单](http://docs.phonegap.com/en/2.3.0/guide_whitelist_index.md.html)

至于为每个分配一个 ID `li`，只需将其添加到您的模板中：

```
... .append('<li id="' + student.data.user_name + '"> ...') 
```

# django - Travis ci 没有带有安全环境变量的此类文件或目录错误

> ID：15466901
> 
> 赞同：1
> 
> 时间：2013-03-17T22:16:48.893
> 
> 标签：django, environment-variables, travis-ci

我正在尝试将安全环境变量添加到我的 .travis.yml 文件中。但是，无论何时运行，构建都会失败，`/home/travis/build.sh: line 128: my_secret_key}: No such file or directory`其中**my_secret_key**是 travis encrypt 返回的字符串。

我已验证我的 .travis.yml 文件对`travis-lint`命令有效。

**编辑：** 我的 Travis 版本位于[https://travis-ci.org/Aaron1011/texting_wall](https://travis-ci.org/Aaron1011/texting_wall)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:45:20.267

您将安全环境变量放在`before_script`块中，因此 travis 尝试执行它。您可能希望将它们放在`env`块中，以及所有其他环境变量中：

```
language: python
python:
  - "2.7"
env:
  global:
    - DISPLAY=:99.0
    - secure: "mbnS2lycZn6/7jKjRf7c5yqQtQXYXBqhzy/FzCuDY9se8t3JxrRL6TUMFZcs\nDl2gJTx6pwjl4DqIUqKkS8tjBdy6zgtq1mDwUrxKwKreIHRo1YPl8hvDDJEz\nnMja/tzVoUA4EFdvyK46srklQHs18S2OKMmMQCa921TAFEOIv5A="
    - secure: "iroiS72GhQgKzj7rm+1GoKHkLi4sYXdsdo6Ebe5v6C5lgSBFQ11yWiSQxATt\nxsfzfAF3MyG21lnM/bttUQTP4kJ8DIotLlqmz8+HUYMXZQCZWE9WAfDfDqqJ\nIdeHnet8NuRslJGObkejt/BG8/5Rggbnav9yRhOL3lzeamiVVqY="
  matrix: 
    - DJANGO_VERSION=1.4.1 RACK_ENV=test

before_script:
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3
  - "python manage.py runserver &"
  - sleep 5

script:
  - "python manage.py test main" 
```

[请参阅文档](http://about.travis-ci.org/docs/user/build-configuration/#Environment-variables)`global`以了解与`matrix`环境变量之间的区别。

# ruby-on-rails - 将模型图标保存到数据库

> ID：15466908
> 
> 赞同：0
> 
> 时间：2013-03-17T22:17:30.023
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在创建一篇文章，但如果用户想要，它将创建一个评论，根据一个 text_field_tag 决定用户决定与否。该评论与当前文章无关

在控制器中， event.create 我有以下逻辑

```
 @comment = Comment.new
  @comment.article_id = params[:decide].to_i
  @comment.customer_id = current_customer.id
  @comment.description = params[:description]
  respond_to do |format|
    if @comment.save
    else
    end
  end 
```

我遇到的问题是我得到了 else 的响应，这意味着我无法保存它，而且我不明白为什么，保存调用是什么？

我还注意到评论创建选项在每个操作中都有默认行。

```
@article= Article.find(params[:event_id]) 
```

我只是想知道 comment.save 是在我的评论控制器中调用一个方法，还是 save 只是将它直接保存到数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:22:19.357

`@comment.save`尝试将您的评论保存到数据库中。如果一切正常，它将保存它，您将编写类似`redirect_to root_path`.

如果它无法保存它，它将转到该`else`子句，您还可以选择重定向到某个地方甚至更好，在您所在的位置呈现视图页面并能够编写错误日志。

它不会被保存的原因之一是它没有得到正确的参数或者它没有通过一些验证。

# ios - 加载黑色背景的模态视图控制器

> ID：15466910
> 
> 赞同：3
> 
> 时间：2013-03-17T22:17:34.030
> 
> 标签：ios, objective-c, uiviewcontroller, modalviewcontroller, presentmodalviewcontroller

我通过搜索看到了其中一些问题，但主要与故事板有关。

我只是务实地创建一个模态视图控制器。它实际上是用于可达性的，一旦连接被视为 NotReachable，我将呈现一个模态视图控制器，如下所示：

```
-(void)checkConnection: (Reachability*) curReach {
    NetworkStatus netStatus = [curReach currentReachabilityStatus];
        if (netStatus == NotReachable) {
            NSLog(@"inernet reach - not reachable");

            UIViewController *modalViewController = [[MESConnectionModalViewController alloc] init];
            modalViewController.view.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.2f];
            modalViewController.view.opaque= YES;
            [self.window.rootViewController presentModalViewController:modalViewController animated:YES];

}
} 
```

在视图控制器`MESConnectionModalViewController`中目前没有代码，只有标准。

当模态视图转换到当前视图时，背景看起来是正确的（这是一两秒钟）。一旦模态完全在屏幕上，它就是全黑的，而不是部分黑的。我希望基本上稍微涵盖当前内容。上面的代码是应用程序委托中的 seutp 并在可达性更新时调用，因此我试图在解决互联网连接时显示模式视图控制器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T22:27:57.950

模态视图不支持透明度（适用于 iPhone）。
但是您可以将“UIView”添加到父视图并使用`CoreAnimation`

**编辑**

```
-(void)checkConnection: (Reachability*) curReach {
    NetworkStatus netStatus = [curReach currentReachabilityStatus];
    if (netStatus == NotReachable) {
        NSLog(@"internet reach - not reachable");
        UIViewController *modalViewController = [[MESConnectionModalViewController alloc] init];
        //Set y position to animate it
        CGRect frame = modalViewController.view.frame;
        frame.origin.y = [[UIApplication sharedApplication] keyWindow].frame.size.height;
        modalViewController.view.frame = frame;
        modalViewController.view.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.2f];
        [self.view addSubview:modalViewController.view];
        //Animate appearing
        frame.origin.y = 0;
        [UIView animateWithDuration:0.2 animations:^{
            modalViewController.view.frame = frame;
        }];
    }
} 
```

您也可以将其存储`modalViewController`为属性以在将来访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:04:02.867

你需要的是`UIWindow`在`AppDelegate`课堂上的第二个，你可以在一切之上制作像 UIAlertView 这样的东西！相信我这就是你需要的，并确保设置

```
myWindow2.windowLevel = UIWindowLevelAlert; 
```

访问您的窗口（获取指针）：

```
UIWindow *myWindow2 = [(AppDelegate *)[UIApplication sharedApplication].delegate myWindow2]; 
```

# c++ - std::getline 返回同一行的倍数

> ID：15466913
> 
> 赞同：1
> 
> 时间：2013-03-17T22:17:46.527
> 
> 标签：c++, getline

我正在解析一个 .txt 文件以制作一个 Exp Calculator，但我遇到了一个奇怪的错误，它会将流中包含多于一行的任何行加倍。我正在使用此代码打开和关闭文件以检查更改并仅打印更改。

这是文本文件的样子..

```
[11:58:18] Mind increased by 0.000013 to 28.160389
[11:58:18] Mind logic increased by 0.000015 to 33.213428
[11:58:18] Miscellaneous items increased by 0.000061 to 59.381138
[11:58:18] Repairing increased by 0.000782 to 35.52212
[11:58:19] Mind increased by 0.000015 to 28.160404 
```

当我添加睡眠以减慢它的速度时，它确实会逐行获取每一行并将它们打印到控制台，但在完成后它会继续打印流中超过 1 行的每一行..

```
#include <windows.h>
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
using namespace std;

int main()
{
    ios::streampos file_end;
    ifstream file ("C://Users//Matthew//wurm//players//Maximillian//logs//_Skills.2013-03.txt");
    if(file.is_open())
    {
        file.seekg( ios::beg, ios::end );
        file_end = file.tellg();
        file.close();
    }else{
        cout << "Unable to open file";
    }

    while(true)
    {
        ifstream file ("C://Users//Matthew//wurm//players//Maximillian//logs//_Skills.2013-03.txt");
        if (file.is_open())
        {
            file.seekg( ios::beg, ios::end );
            streampos new_end = file.tellg();

            if(new_end > file_end)
            {
                file.seekg(file_end);

                string line;
                while(getline(file, line))
                {
                    if(!line.empty())
                        cout << line << endl;
                    Sleep(1000);
                }

                file_end = new_end;
            }
            file.close();
        }else{
            cout << "Unable to open file";
        }
    }
    return 0;
} 
```

这是输出...记下时间戳。我不知道为什么它会这样做......

```
[16:42:36] Mind logic increased by 0.000015 to 33.349262
[16:42:36] Miscellaneous items increased by 0.000053 to 59.777897
[16:42:36] Repairing increased by 0.000694 to 36.59152
[16:42:37] Mind increased by 0.000013 to 28.270370
[16:42:37] Mind logic increased by 0.000019 to 33.349281
[16:42:38] Mind increased by 0.000013 to 28.270384
[16:42:38] Mind logic increased by 0.000015 to 33.349297
[16:42:38] Repairing increased by 0.000694 to 36.59222
[16:42:39] Mind logic increased by 0.000015 to 33.349312
[16:42:40] Repairing increased by 0.000694 to 36.59291
[16:42:42] Mind increased by 0.000015 to 28.270399
[16:42:42] Mind logic increased by 0.000015 to 33.349327
[16:42:42] Repairing increased by 0.000694 to 36.59361
[16:42:43] Mind increased by 0.000013 to 28.270412
[16:42:43] Mind logic increased by 0.000015 to 33.349342
[16:42:44] Mind increased by 0.000013 to 28.270426
[16:42:44] Mind logic increased by 0.000019 to 33.349361
[16:42:44] Repairing increased by 0.000694 to 36.59430
//I added this afterwards to break up what I printed out first... why did it reprint all the times that had 2 or more lines at once?
[16:42:36] Miscellaneous items increased by 0.000053 to 59.777897
[16:42:36] Repairing increased by 0.000694 to 36.59152
[16:42:37] Mind increased by 0.000013 to 28.270370
[16:42:37] Mind logic increased by 0.000019 to 33.349281
[16:42:38] Mind increased by 0.000013 to 28.270384
[16:42:38] Mind logic increased by 0.000015 to 33.349297
[16:42:38] Repairing increased by 0.000694 to 36.59222
[16:42:39] Mind logic increased by 0.000015 to 33.349312
[16:42:40] Repairing increased by 0.000694 to 36.59291
[16:42:42] Mind increased by 0.000015 to 28.270399
[16:42:42] Mind logic increased by 0.000015 to 33.349327
[16:42:42] Repairing increased by 0.000694 to 36.59361
[16:42:43] Mind increased by 0.000013 to 28.270412
[16:42:43] Mind logic increased by 0.000015 to 33.349342
[16:42:44] Mind increased by 0.000013 to 28.270426
[16:42:44] Mind logic increased by 0.000019 to 33.349361
[16:42:44] Repairing increased by 0.000694 to 36.59430 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:55:37.690

在`getline()`-loop 之后，流中的读取位置不能保证等于`new_end`，因为有人可能在您确定之后写入文件`new_end`，但在您读取文件之前或期间。

这会导致一些行被打印出来，然后调整`file_end`到一个表明这些行还没有被打印的值。这些行将在您的外循环的下一次迭代中再次打印`while`。

`file_end`通过再次调用更新`tellg()`，而不是通过分配 from `new_end`。您必须[`clear()`](http://www.cplusplus.com/reference/ios/ios/clear/)在进行更新之前调用流，因为在设置流之前`std::getline()`调用`failbit`它，这会导致`tellg()`返回`-1`（即不是文件末尾的实际位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:47:48.980

解决方案是在更新之前清除（）tellg（）函数，我也以不同的方式更新file_end和new_end。

```
while(true)
{

    ifstream file ("C://Users//Matthew//wurm//players//Maximillian//logs//_Skills.2013-03.txt");

    if (file.is_open())
    {
        if(new_end > file_end)
        {
            file.seekg(file_end);
            string line, output;
            while(getline(file, line))
            {
                //if(!line.empty())
                //    cout << line << endl;
                int f1 = line.find("] ")+2;
                int f2 = line.find(" increased ");
                if(f1 != line.string::npos && f2 != string::npos)
                {
                    output.append(line, f1, (f2-f1));
                    output += " ";

                    f1 = line.find(" by ") + 4;
                    f2 = line.find(" to ");
                    if(f1 != string::npos && f2 != string::npos)
                    {
                        output.append(line, f1, (f2-f1));
                        output += " ";
                    }
                }
                cout<<output<<endl;
                output.clear();
            }
            file.clear();
            file_end = file.tellg();
        }
        file.seekg( 0, ios::end );
        new_end = file.tellg();

        file.close();
    }else{
        cout << "Unable to open file";
    }
} 
```

# php - 警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL

> ID：15466919
> 
> 赞同：-2
> 
> 时间：2013-03-17T22:18:45.907
> 
> 标签：php, mysql

我遇到了这个错误的一些麻烦

警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源 事实上，由于没有全局变量，我将所有查询都放在函数中。

我的查询没问题，其他地方的字段名称没有错误。

问题是在本地一切正常，当我把它放到网上时，它不起作用，到处都是我的错误

对于家里我有这个错误：

```
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /web/teamfrancestron/www/lib_php/strongman.php on line 75

Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /web/teamfrancestron/www/lib_php/strongman.php on line 90 
```

我的用户在数据库中拥有所有权限，

这是我使用的代码：这是第一个错误

```
function fetchAccueil() {
    $sql = "SELECT 
                    `content`, `date_maj`, `id_maj`, `titre` 
            FROM `stg_man_home` 
            WHERE 
                    `id` = '1'";
    $result = mysql_query($sql);
    return mysql_fetch_assoc($result);
} 
```

还有其他查询

/** * Fonction qui va chercher l'identité d'une personne. * @param type $id * @return type */

```
function fetchIdentity($id) {
    $input_id = mysql_real_escape_string($id);
    $query = "SELECT 
                        `nom`, `prenom`
              FROM `stg_man_users`
              WHERE `id` = '{$input_id}'";
    $result = mysql_query($query);
    return mysql_fetch_assoc($result);
} 
```

我真的没有看到名称文件有任何错误，我确信我的查询是有效的资源。（在本地工作，但不在服务器上）。我在 php 5.4

在其他页面上我仍然有同样的错误

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:23:33.540

检查 的返回值`mysql_query`。它可以是结果集，也可以只是值`false`。将您的查询更改为

```
$result = mysql_query($sql) or die(mysql_error()); 
```

你会立即看到问题。

作为旁注：考虑切换到`mysqli`or `PDO`，因为`mysql_*`现在不推荐使用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:24:50.160

你说

```
WHERE id = '1' 
```

改为执行此操作（删除单引号）：

```
WHERE id = 1 
```

这样您就可以请求与整数而不是字符串匹配。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T22:22:33.623

错误消息意味着运行您的查询失败。

测试查询的最简单方法是打开一个 phpmyadmin 或 mysql 控制台（使用相同的用户），并运行这个精确的查询。

# jquery - 如何检测浏览器何时过小然后告诉访问者放大浏览器继续？

> ID：15466920
> 
> 赞同：0
> 
> 时间：2013-03-17T22:18:53.813
> 
> 标签：jquery, browser, popup, detect

是否可以创建一个 jquery 脚本，可以检测浏览器何时变小，然后告诉您的访问者放大浏览器继续？

有谁知道一个jquery脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:25:28.297

当他们的浏览器最大化然后它仍然太小时怎么办？

他们是否必须不断地处理信息？

这是一个示例脚本：

```
if( window.clientWidth < 1000 ){ 
 alert("Send your business elsewhere"); 
} 
```

这种强制用户调整大小的想法似乎太具有侵略性而没有任何用处，因为用户应该确定他们的窗口大小。响应式设计是将视图塑造成用户，而不是将用户塑造成你的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:24:58.787

每个人都对这样做的有效性提出了很好的看法。但 -

```
var tooSmall = 500;
var wHeight = $(window).height();
var wWidth = $(window).width();
if ( wWidth < tooSmall ){
    //Tell them so!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T22:27:03.410

像这样的 jQuery 是可能的。

```
if($(window).width() < 960) {
    // Do something when less than 960
} 
```

或纯 JavaScript

```
if(document.width < 960) {
    // Do something when less than 960
} 
```

**替代 CSS 解决方案**

由于您没有提供任何上下文，因此很难说出最佳解决方案是什么，但另一种选择是使用[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)并在窗口低于某个宽度时显示一条消息。

这样做的好处是您不必担心监听窗口调整大小事件等，也可以跟踪当前屏幕大小。浏览器会为你处理好它。如果您沿着侦听窗口调整大小事件的道路前进，它也可能比 JS 解决方案更有效。此外，还将处理用户禁用 JavaScript 的情况。

*标记：*

```
<div id="error-message">Please enlarge your window for the site to work</div> 
```

*CSS：*

```
#error-message {
   display: none;
}

@media only screen and (max-width: 960px) {
   #error-message {
        display: block;
   }
} 
```

# opencl - opencl中的分段错误（核心转储）

> ID：15466923
> 
> 赞同：1
> 
> 时间：2013-03-17T22:19:24.110
> 
> 标签：opencl

我对 OpenCL 很陌生，但我已经做了一年多的并行编程了。我正在制作我的第一个 openCL 代码（矩阵乘法）。我写了以下代码，

```
//#include<stdio.h>
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <string.h>
#include <SDKCommon.hpp>
#include <SDKApplication.hpp>
#include <SDKCommandArgs.hpp>
#include <SDKFile.hpp>
#include <CL/cl.h>

#define MAX_SOURCE_SIZE (0x100000)
#define MATSIZE 16

void initmat(float *Aa,float *Bb,float *Cc,int row,int colrow,int col);

void initmat(float *Aa,float *Bb,float *Cc,int row,int colrow,int col)
{
unsigned int i;

for(i=0;i<row*colrow;i++){
Aa[i]=1;
}

for(i=0;i<colrow*col;i++){
Bb[i]=2;
}

for(i=0;i<row*col;i++){
Cc[i]=0;
}

}

int main(void)
{
printf(" Here: 1 \n");
// Load the kernel source code into the array source_str
    FILE *fp;
    char *source_str;
    size_t source_size;

    fp = fopen("matmul.cl", "r");
    if (!fp) {
        fprintf(stderr, "Failed to load kernel.\n");
        exit(1);
    }
    source_str = (char*)malloc(MAX_SOURCE_SIZE);
    source_size = fread( source_str, 1, MAX_SOURCE_SIZE, fp);
    fclose( fp );
printf(" Here: 2 \n");
// matrix declaration
float *A;
float *B;
float *C;

// set dimesions
int Arow,AcolBrow,Bcol;

Arow=AcolBrow=Bcol=MATSIZE;

// no. of elements in matrix
int sizea, sizeb, sizec;

// Error code from opencl

int err;

// Setting up matrices
sizea= Arow*AcolBrow;
sizeb= AcolBrow*Bcol;
sizec= Arow*Bcol;

A = (float *) malloc(sizeof(float)*sizea);
B = (float *) malloc(sizeof(float)*sizeb);
C = (float *) malloc(sizeof(float)*sizec);
printf(" Here: 3 \n");
initmat(A,B,C,Arow,AcolBrow,Bcol);
// Displaying inputs

unsigned long int ii;

printf("Input A: \n");
for(ii=0;ii<sizea;ii++)
printf("%f  ",A[ii]);

printf("\n \n \n \n");

printf("Input B: \n");
for(ii=0;ii<sizeb;ii++)
printf("%f  ",B[ii]);
printf("\n \n \n");

// get platform id & device id

cl_uint numplatform;
cl_platform_id platformid=NULL;
cl_device_id deviceid=NULL;

err= clGetPlatformIDs(1,&platformid,&numplatform);
err=clGetDeviceIDs(platformid,CL_DEVICE_TYPE_GPU,1,&deviceid,NULL);

cl_context_properties properties[]= 
{ 
    CL_CONTEXT_PLATFORM, (cl_context_properties)platformid,0 
};

// create context
cl_context context= clCreateContext(properties,1,&deviceid,NULL,NULL,&err);

/* when more than one gpu is installed on the system than we make use of the approach as we stated in the  notes !! */
printf(" Here: 4 \n");
// create command queue

cl_command_queue queue = clCreateCommandQueue(context,deviceid,0,&err); // I have disabled profiling option

// Allocate buffer object for Ad,Bd,Cd

cl_mem Ad = clCreateBuffer(context,CL_MEM_READ_ONLY,sizeof(cl_float)*sizea,NULL,NULL);
cl_mem Bd = clCreateBuffer(context,CL_MEM_READ_ONLY,sizeof(cl_float)*sizeb,NULL,NULL);
cl_mem Cd = clCreateBuffer(context,CL_MEM_WRITE_ONLY,sizeof(cl_float)*sizec,NULL,NULL);
printf(" Here: 5 \n");
// We are not explicitely making kernel. We are putting the kernel code here itself (see notes)

cl_program program= clCreateProgramWithSource(context,1,(const char **)&source_str, (const size_t *)&source_size,&err);
printf(" Here: 6 \n");
// Build program using program object just created

err = clBuildProgram(program,0,NULL,NULL,NULL,NULL);

if(err !=CL_SUCCESS)
{

size_t len;
char buffer[2048];
printf("ERROR: Failed to build executable \n ");
clGetProgramBuildInfo(program,deviceid,CL_PROGRAM_BUILD_LOG, sizeof(buffer), buffer , &len);
printf("%s \n",buffer);
//return FAILURE;

}
printf(" Here: 7 \n");
// Create kernel object

cl_kernel kernel = clCreateKernel(program,"matmul",NULL);
printf(" Here: 8 \n");
// set kernel argument values

err=0;
err= clSetKernelArg(kernel,0,sizeof(int),&Arow);
err|= clSetKernelArg(kernel,1,sizeof(int),&AcolBrow);
err|= clSetKernelArg(kernel,2,sizeof(int),&Bcol);
err|= clSetKernelArg(kernel,3,sizeof(cl_mem),&Ad);
err|= clSetKernelArg(kernel,4,sizeof(cl_mem),&Bd);
err|= clSetKernelArg(kernel,5,sizeof(cl_mem),&Cd);
printf(" Here: 9 \n");
// Write to device buffers. Ad=A and Bd=B   : Equivalent to CUDAmemcpy

err=clEnqueueWriteBuffer(queue,Ad,CL_TRUE,0,sizeof(cl_float)*sizea,A,0,NULL,NULL);
err=clEnqueueWriteBuffer(queue,Bd,CL_TRUE,0,sizeof(cl_float)*sizeb,B,0,NULL,NULL);
printf(" Here: 10 \n");
// since we have set the copy as synchronous we will be creating event
cl_event event;

// Execute the kernel over entire range of C matrix

size_t global[2];
size_t local[2];
cl_uint * ndim; // no. of dimension in ND range. 3rd parameter in kernel call signifies the dimension.

global[0]=(size_t)Arow;
global[1]=(size_t)Bcol;

* ndim=2; // because we want 2-D multiplication. Gives n

/* no local size declaration cause we are not making work groups ie blocks.We are just make making oneblock where everythread takes one element of A,B and computes C */
printf(" Here: 11 \n");
err = clEnqueueNDRangeKernel(queue,kernel,*ndim,NULL,global,NULL,0,NULL,&event); // the NULL position after global is for passing local dimension. In this case we don't have one.
clFinish(queue); // wait for kernel to finish before we begin copying the result back on host
printf(" Here: 12 \n");
//read back the result

err=clEnqueueReadBuffer(queue,Cd,CL_TRUE,0,sizeof(cl_float)*sizec,C,0,NULL,NULL);

// Checking whether the computations done are on CPU or GPU

cl_device_type dev_type;
clGetDeviceInfo(deviceid, CL_DEVICE_TYPE, sizeof(dev_type), &dev_type, NULL);
if (dev_type == CL_DEVICE_TYPE_GPU) {
    printf("Following code was complied on GPU ! \n \n \n \n");
}
else
    printf("Following code was complied on CPU ! \n \n \n \n");
printf(" Here: 13 \n \n \n");
// Displaying results
printf("Result is: \n");
for(ii=0;ii<sizec;ii++)
printf("%f  ",C[ii]);

printf("\n \n \n");

// free all memory
printf(" Here: 14 \n");
clReleaseProgram(program);
clReleaseKernel(kernel);
clReleaseMemObject(Ad);
clReleaseMemObject(Bd);
clReleaseMemObject(Cd);
clReleaseCommandQueue(queue);
clReleaseContext(context);
printf(" Here: 15 \n");
return 0;
printf(" Here: 16 \n");

} 
```

我的内核代码如下，

```
__kernel void matmul(const int Mdim, const int Ndim,const int Pdim,__global float* A,__global float* B,__global float* C)
{

float tmp;
int i = get_global_id(0);
int j = get_global_id(1);
if((i<Ndim)&(j<Mdim))
C[i*Ndim+j] = 3; 

} 
```

我可以成功编译它，它在 ../bin/x86/ 文件夹中创建了一个二进制文件。当我尝试使用 ./matmul 运行它时，它会引发以下错误，

93 > Sun Mar 17 : 04:22 PM : samkit@samkit:~/AMD/AMD-APP-SDK-v2.8-RC-lnx32/samples/opencl/bin/x86$ ./matmul 分段错误（核心转储）

这是我的示例输出：

```
 135 > Sun Mar 17 : 07:49 PM : samkit@samkit:~/AMD/AMD-APP-SDK-v2.8-RC-lnx32/samples/opencl/bin/x86$ ./matmul
 Here: 1 
 Here: 2 
 Here: 3 
 Here: 4 
 Here: 5 
 Here: 6 
 Here: 7 
 Here: 8 
 Here: 9 
 Here: 10 
 Here: 11 
 Here: 12 
Following code was complied on GPU ! 

 Here: 13 

Result is: 
Segmentation fault (core dumped) 
```

我知道内核的功能与矩阵乘法内核的功能相差甚远，但我这样做只是为了检查这些是否是我的内核中的一些错误。请提供可以帮助我运行代码的建议或建议。

提前致谢。

# c# - 动态 LinkBut ton 的 OnClick 事件

> ID：15466933
> 
> 赞同：0
> 
> 时间：2013-03-17T22:20:15.797
> 
> 标签：c#, asp.net, dynamic, linkbutton

我有一系列动态创建的隐藏/显示链接按钮。每个按钮对应一个 GridView。我想要按钮隐藏或显示 GridView 的 OnClick 事件。如何在 HideButtonClick 方法中引用具体对应的 GridView。我使用了一个计数器**num**来使每个 LinkBut​​ton.ID 都是唯一的`ID="hidebutton" + num`。

```
 LinkButton lbShow = new LinkButton();
            lbShow.ID = "lbShow" + num;
            lbShow.OnClientClick = "HideCourse_btnClick";
            lbShow.CommandArgument = "" + num; 
```

在事件方法中，我想要一些效果

```
protected void HideCourse_btnClick(object sender, EventArgs e)
{
    grdvw1.Visible = false
} 
```

其中 ID **grdwv1**是通过将 CommandArgument **num**添加到 GridView **grdvw来生成的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:37:56.953

添加这一行

```
LinkButton1.CommandName = "cmdnum"; 
```

将 RowCommand 事件添加到您的 gridview

```
protected void yourgridview_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "cmdnum")
        {
            this.FindControl("grdwv" + e.CommandArgument).Visible = false;
//i am assuming other gridview is on your .aspx page
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T01:30:43.867

考虑在 ItemTemplate 中使用带有 LinkBut​​ton的[中继器。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)然后使用Repeater [ItemCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcommand.aspx)事件来处理LinkBut​​tons 点击事件。

# batch-file - 批处理文件以查找特定文件夹下的文件夹数量

> ID：15466936
> 
> 赞同：1
> 
> 时间：2013-03-17T22:20:25.127
> 
> 标签：batch-file, cmd

我在 C:\Users\Desktop\Test 下有一个名为 Test 的文件夹，我想查找 Test 内名为 Zone 的文件夹下的所有子文件夹的计数。例如，如果我们有如下文件夹：

```
Test->Zone->Folder1 / Folder2
Test->Testing->Zone->Folder3 / Folder5 
```

因此，在上述情况下，我们将计数为 4。

我试过这个脚本但不能正常工作？

```
@echo off
pushd C:\Users\Desktop\Test
setlocal EnableDelayedExpansion
set /a count=0

for /d %%d in ('DIR /a:d /b Zone*') do (
    set /a count+=1
    @echo !count!. %%d 
)
pause 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T23:07:21.577

试试这个：

```
@echo off &setlocal
pushd "C:\Users\Desktop\Test"
set /a count=0
for /d /r %%i in (zone\*.*) do set /a count+=1
popd
echo %count% folder(s^)
endlocal 
```

# c++ - 解析AST时clang获取包含文件

> ID：15466939
> 
> 赞同：5
> 
> 时间：2013-03-17T22:20:34.120
> 
> 标签：c++, clang, abstract-syntax-tree

我想扫描 clang 的 AST。我开始使用一个教程中提供的一些示例代码。

我目前的代码是

```
#include <iostream>

#include "llvm/Support/raw_ostream.h"
#include "llvm/Support/Host.h"
#include "llvm/Support/Casting.h"

#include "clang/Basic/DiagnosticOptions.h"
#include "clang/Frontend/TextDiagnosticPrinter.h"

#include "clang/Basic/LangOptions.h"
#include "clang/Basic/FileSystemOptions.h"

#include "clang/Basic/SourceManager.h"
#include "clang/Lex/HeaderSearch.h"
#include "clang/Basic/FileManager.h"

#include "clang/Frontend/Utils.h"

#include "clang/Basic/TargetOptions.h"
#include "clang/Basic/TargetInfo.h"
#include "clang/Basic/Version.h"

#include "clang/Lex/Preprocessor.h"
#include "clang/Frontend/FrontendOptions.h"

#include "clang/Basic/IdentifierTable.h"
#include "clang/Basic/Builtins.h"

#include "clang/AST/ASTContext.h"
#include "clang/AST/ASTConsumer.h"
#include "clang/AST/RecursiveASTVisitor.h"
#include "clang/Sema/Sema.h"
#include "clang/AST/DeclBase.h"
#include "clang/AST/Type.h"
#include "clang/AST/Decl.h"
#include "clang/Sema/Lookup.h"
#include "clang/Sema/Ownership.h"
#include "clang/AST/DeclGroup.h"

#include "clang/Parse/Parser.h"

#include "clang/Parse/ParseAST.h"
#include "clang/Frontend/CompilerInstance.h"

#include "clang/Rewrite/Core/Rewriter.h"
#include "clang/Rewrite/Frontend/Rewriters.h"

using namespace clang;
using namespace std;

// By implementing RecursiveASTVisitor, we can specify which AST nodes
// we're interested in by overriding relevant methods.
class MyASTVisitor : public RecursiveASTVisitor<MyASTVisitor>
{
public:
//  MyASTVisitor() : {} 
//  MyASTVisitor(Rewriter &R)
//      : TheRewriter(R)
//  {}

    bool VisitStmt(clang::Stmt *s) {
//      llvm::errs() << "Visiting statement\n";     
//      if (clang::isa<clang::BinaryOperator>(s)) {
//          if (cast<BinaryOperator>(s)->isAssignmentOp() == true) {
//              // blablabla
//          }
//      }
        return true;
    }

    bool VisitBinaryOperator(BinaryOperator* bo) {
        if (bo->isAssignmentOp() == true) {
            llvm::errs() << "Visiting assignment ";
            Expr *LHS;
            LHS = bo->getLHS();
            DeclRefExpr* dre;
            if ((dre = dyn_cast<DeclRefExpr>(LHS))) { 
                string name = (dre->getNameInfo()).getName().getAsString();
                llvm::errs() << "to " << name;
            }
            if (ArraySubscriptExpr* ase = dyn_cast<ArraySubscriptExpr>(LHS)) { 
                Expr *arrayBase = ase->getBase()->IgnoreParenCasts();
                if ((dre = dyn_cast<DeclRefExpr>(arrayBase))) { 
                    string name = (dre->getNameInfo()).getName().getAsString();
                    llvm::errs() << "to array " << name;
                }
            }
            llvm::errs() << "\n";
        }
        return true;
    }

    bool shouldVisitTemplateInstantiations() const { 
        llvm::errs() << "PIPPOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO" << "\n";
        return true; }

    bool VisitCXXOperatorCallExprs(CXXOperatorCallExpr *e) {
        llvm::errs() << "Visiting cxxoperatorcall" << "\n";
        return true;
    }

    bool VisitCXXConstructorDecl(CXXConstructorDecl *c) {
        llvm::errs() << "Visiting CXXConstructorDecl" << "\n";
        return true;        
    }

    bool VisitDeclRefExpr(DeclRefExpr* expr) {
        string name = (expr->getNameInfo()).getName().getAsString();
        llvm::errs() << name << "\n";
        return true;
    }

    bool VisitVarDecl(VarDecl *v) {
        llvm::errs() << "Visiting declaration of variable " << v->getDeclName().getAsString() << "\n";
        llvm::errs() << "  type: " << v->getTypeSourceInfo()->getType().getTypePtr()->getTypeClassName();
        if (v->getTypeSourceInfo()->getType().getTypePtr()->isFloatingType() == true) {
            llvm::errs() << " -> float";
        }
        if(v->getTypeSourceInfo()->getType().getTypePtr()->isConstantArrayType() == true) {
            llvm::errs() << " of ";
            llvm::errs() << v->getTypeSourceInfo()->getType().getAsString();
            llvm::errs() << " size ";
            llvm::APInt arraySize = cast<ConstantArrayType>(v->getTypeSourceInfo()->getType().getTypePtr())->getSize();
            llvm::errs() << arraySize;
        }
        if(v->getTypeSourceInfo()->getType().getTypePtr()->isPointerType() == true) {
            llvm::errs() << " to " << v->getTypeSourceInfo()->getType().getAsString();

        }
        llvm::errs() << "\n";
        return true;
    }

  bool VisitTypedefDecl(clang::TypedefDecl *d) {
        llvm::errs() << "Visiting " << d->getDeclKindName() << " " << d->getName() << "\n";

        return true; // returning false aborts the traversal        
    }

    bool VisitFunctionDecl(FunctionDecl *f) {
        llvm::errs() << "Visiting function " << f->getNameInfo().getName().getAsString() << "\n";

        return true;
    }

private:
//  Rewriter &TheRewriter;
};

// Implementation of the ASTConsumer interface for reading an AST produced
// by the Clang parser.
class MyASTConsumer : public ASTConsumer
{
public:
    MyASTConsumer() : Visitor() {}
//  MyASTConsumer(Rewriter &R)
//      : Visitor(R)
//  {}

    // Override the method that gets called for each parsed top-level
    // declaration.
    virtual bool HandleTopLevelDecl(DeclGroupRef DR) {
        for (DeclGroupRef::iterator b = DR.begin(), e = DR.end();
                 b != e; ++b)
            // Traverse the declaration using our AST visitor.
            Visitor.TraverseDecl(*b);
        return true;
    }

private:
    MyASTVisitor Visitor;
};

int main(int argc, char** argv)
{
    if (argc < 2) {
        llvm::errs() << "Usage: rewritersample <filename> libs\n";
        return 1;
    }

    clang::DiagnosticOptions diagnosticOptions;
    clang::TextDiagnosticPrinter *pTextDiagnosticPrinter =
        new clang::TextDiagnosticPrinter(
            llvm::outs(),
            &diagnosticOptions);
    llvm::IntrusiveRefCntPtr<clang::DiagnosticIDs> pDiagIDs;
    clang::DiagnosticsEngine *pDiagnosticsEngine =
        new clang::DiagnosticsEngine(pDiagIDs,
            &diagnosticOptions,
            pTextDiagnosticPrinter);

    clang::LangOptions languageOptions;
    clang::FileSystemOptions fileSystemOptions;
    clang::FileManager fileManager(fileSystemOptions);

    clang::SourceManager sourceManager(
        *pDiagnosticsEngine,
        fileManager);

    llvm::IntrusiveRefCntPtr<clang::HeaderSearchOptions> headerSearchOptions(new clang::HeaderSearchOptions());
        headerSearchOptions->ResourceDir = "/opt/llvm_build" "/lib/clang/" CLANG_VERSION_STRING;
    // <Warning!!> -- Platform Specific Code lives here
    // This depends on A) that you're running linux and
    // B) that you have the same GCC LIBs installed that
    // I do.
    // Search through Clang itself for something like this,
    // go on, you won't find it. The reason why is Clang
    // has its own versions of std* which are installed under
    // /usr/local/lib/clang/<version>/include/
    // See somewhere around Driver.cpp:77 to see Clang adding
    // its version of the headers to its include path.
        for (int i = 2; i < argc; i++) {
            headerSearchOptions->AddPath(argv[i],
                                                                     clang::frontend::Angled,
                                                                     false,
                                                                     false);
        }
    // </Warning!!> -- End of Platform Specific Code

    clang::TargetOptions targetOptions;
    targetOptions.Triple = llvm::sys::getDefaultTargetTriple();

    clang::TargetInfo *pTargetInfo =
        clang::TargetInfo::CreateTargetInfo(
            *pDiagnosticsEngine,
            &targetOptions);

    clang::HeaderSearch headerSearch(headerSearchOptions,
                                     fileManager,
                                     *pDiagnosticsEngine,
                                     languageOptions,
                                     pTargetInfo);
    clang::CompilerInstance compInst;

    llvm::IntrusiveRefCntPtr<clang::PreprocessorOptions> pOpts( new clang::PreprocessorOptions());
    clang::Preprocessor preprocessor(
        pOpts,
        *pDiagnosticsEngine,
        languageOptions,
        pTargetInfo,
        sourceManager,
        headerSearch,
        compInst);

    clang::FrontendOptions frontendOptions;
    clang::InitializePreprocessor(
        preprocessor,
        *pOpts,
        *headerSearchOptions,
        frontendOptions);

    const clang::FileEntry *pFile = fileManager.getFile(
        argv[1]);
    sourceManager.createMainFileID(pFile);

    const clang::TargetInfo &targetInfo = *pTargetInfo;

    clang::IdentifierTable identifierTable(languageOptions);
    clang::SelectorTable selectorTable;

    clang::Builtin::Context builtinContext;
    builtinContext.InitializeTarget(targetInfo);
    clang::ASTContext astContext(
        languageOptions,
        sourceManager,
        pTargetInfo,
        identifierTable,
        selectorTable,
        builtinContext,
        0 /* size_reserve*/);
   MyASTConsumer astConsumer;

    clang::Sema sema(
        preprocessor,
        astContext,
        astConsumer);

    pTextDiagnosticPrinter->BeginSourceFile(languageOptions, &preprocessor);
    clang::ParseAST(preprocessor, &astConsumer, astContext);
    pTextDiagnosticPrinter->EndSourceFile();
    return 0;
} 
```

我以这种方式运行可执行文件

```
./ast_analyzer infile.cpp /usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/parallel/ /usr/include/c++/4.6/tr1 /usr/include/i386-linux-gnu/c++/4.6 /usr/include/c++/4.6 /usr/include /usr/src/linux-headers-3.2.0-35/include/linux /usr/src/linux-headers-3.2.0-35/include 
```

infile.cpp 从哪里开始

```
#include <iostream> 
```

我得到以下错误

```
In file included from input04.c:1:
In file included from /usr/include/c++/4.6/iostream:40:
In file included from /usr/include/c++/4.6/ostream:40:
In file included from /usr/include/c++/4.6/ios:39:
In file included from /usr/include/c++/4.6/iosfwd:41:
/usr/include/c++/4.6/bits/stringfwd.h:43:1: error: unknown type name 'namespace'
namespace std _GLIBCXX_VISIBILITY(default)
^
/usr/include/c++/4.6/bits/stringfwd.h:43:43: error: expected ';' after top level    declarator
namespace std _GLIBCXX_VISIBILITY(default)
                                      ^
In file included from input04.c:1:
In file included from /usr/include/c++/4.6/iostream:40:
In file included from /usr/include/c++/4.6/ostream:40:
In file included from /usr/include/c++/4.6/ios:42:
In file included from /usr/include/c++/4.6/bits/localefwd.h:42:
In file included from /usr/include/c++/4.6/i686-linux-gnu/bits/c++locale.h:42:
In file included from /usr/include/c++/4.6/clocale:44:
/usr/include/locale.h:30:10: fatal error: 'bits/locale.h' file not found
#include <bits/locale.h>
         ^ 
```

你能帮忙澄清一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:38:11.200

当您调用时`headerSearchOptions->AddPath`，您对值进行了硬编码`2`，但它应该是`i`。

# android - Android 屏幕关闭时振动

> ID：15466947
> 
> 赞同：2
> 
> 时间：2013-03-17T22:21:27.210
> 
> 标签：android, wakelock, android-vibration

[考虑这里](https://stackoverflow.com/questions/7329533/allow-phone-to-vibrate-when-screen-turns-off)和[这里](https://stackoverflow.com/questions/6960877/vibration-even-when-the-screen-has-timed-out)的答案并没有为同一问题提供实际的解决方案，并且已经超过一年了......

我有一个`Vibrator`. 我知道如何完全控制振动器。

我有以下两个问题：

*   当它在振动并且屏幕被锁定时，它会停止。
*   当屏幕已经锁定时，它根本不会振动。

也许是因为我使用了自定义 rom（？）

在开始振动之前，我还拿着一个唤醒锁。

```
vibratorWakeLock = mPowerManager.newWakeLock(
            PowerManager.PARTIAL_WAKE_LOCK, VIBRATOR_WL_TAG);
vibratorWakeLock.acquire(); 
```

即使使用此 WakeLock，我也无法让手机振动，或在屏幕关闭时保持振动，所以我认为它与屏幕状态有关，而不是与处理器（由我的 WakeLock 启用）有关。

*   如何让我的振动器真正独立于屏幕锁定状态而振动？

* * *

**编辑：**

我也不想使用完整的 WakeLock，因为它已被弃用。

# jquery - ASP.Net MVC - 部分刷新后客户端验证中断？

> ID：15466950
> 
> 赞同：0
> 
> 时间：2013-03-17T22:21:43.363
> 
> 标签：jquery, asp.net-mvc, unobtrusive-javascript, unobtrusive-validation, unobtrusive-ajax

我有一个包含搜索栏的页面，默认情况下它显示下面的项目列表。每个项目都包装在一个 ajaxform 中，以便用户可以更新数量。客户端验证在页面加载时工作得非常好，它需要一个数量。

一旦用户单击搜索，并且部分结果被刷新，我的整个验证都会中断，并且不再显示验证摘要。

我试图通过调用刷新部分后重新添加验证，`$.validator.unobtrusive.parse($("#resultList"));` 但它似乎没有做任何事情。

有什么解决办法吗？

主窗体

```
<script>
function onSearchSucceeded() {
   $.validator.unobtrusive.parse($("#resultList"));
}

function onUpdateSucceeded() {
   $.validator.unobtrusive.parse($("#resultList"));
}

$(function () {

    $("#resultList :input[type=text]").blur(function () {
        $(this).closest("form").submit();
    });

)};

</script>

@using (Ajax.BeginForm("Search",
    null,
    new AjaxOptions
    {
        UpdateTargetId = "resultList",
        LoadingElementId = "searchLoader",
        OnSuccess = "onSearchSucceeded"
    },
    new
    {
        id = "searchForm"
    }
    ))
{
   @Html.TextBoxFor(m => m.query)
   <input type="submit" value="search" />
}

<div id="resultList">
   @Html.Partial("SearchResult", Model.Results)
</div> 
```

部分的

```
@foreach (var item in Model) {
    using (Ajax.BeginForm("UpdateItem",
        new AjaxOptions {
            UpdateTargetId = "resultList",
            OnSuccess = "onUpdateSucceeded"
        },
        null,
        new{
            id = "form-" + item.Id
        }
     )){
       @Html.TextBoxFor(m => item.Quantity)
       @Html.ValidationSummary()
       // This form gets submitted through javascript after a blur on quantity textfield
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:45:52.677

`onSearchSucceeded`和`onUpdateSucceeded`功能对我来说似乎是正确的。正是在这些函数中，您告诉 jQuery 不显眼的框架新的 DOM 元素存在于结果 div 中并且需要注册。

令我困扰的是您的代码中的以下注释：

```
// This form gets submitted through javascript after a blur on quantity textfield 
```

不幸的是，您还没有完全展示这是如何完成的，但以下代码对我来说很好：

```
$(document).on('blur', 'form[id^="form-"] input[name$="Quantity"]', function () {
    $(this).closest('form').submit();
}); 
```

# android - 应用程序意外停止，

> ID：15466955
> 
> 赞同：1
> 
> 时间：2013-03-17T22:22:07.433
> 
> 标签：android, tabs, logcat, android-logcat, android-tabs

我不知道如何解释日志猫，因此非常感谢您的帮助。在我的应用程序中，我在我的 Android.Manifest 中添加了所有类。我的代码没有错误，但是当我在模拟器上运行应用程序时，会弹出一个对话框，提示“应用程序已意外停止” 可能是什么问题？

```
03-18 01:01:04.362: D/AndroidRuntime(271): Shutting down VM
03-18 01:01:04.362: W/dalvikvm(271): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-18 01:01:04.382: E/AndroidRuntime(271): FATAL EXCEPTION: main
03-18 01:01:04.382: E/AndroidRuntime(271): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gormahia/com.example.gormahia.TabMain}: java.lang.IllegalArgumentException: you must specify a way to create the tab content
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.os.Looper.loop(Looper.java:123)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-18 01:01:04.382: E/AndroidRuntime(271):  at java.lang.reflect.Method.invokeNative(Native Method)
03-18 01:01:04.382: E/AndroidRuntime(271):  at java.lang.reflect.Method.invoke(Method.java:521)
03-18 01:01:04.382: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-18 01:01:04.382: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-18 01:01:04.382: E/AndroidRuntime(271):  at dalvik.system.NativeStart.main(Native Method)
03-18 01:01:04.382: E/AndroidRuntime(271): Caused by: java.lang.IllegalArgumentException: you must specify a way to create the tab content
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.widget.TabHost.addTab(TabHost.java:199)
03-18 01:01:04.382: E/AndroidRuntime(271):  at com.example.gormahia.TabMain.onCreate(TabMain.java:44)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-18 01:01:04.382: E/AndroidRuntime(271):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-18 01:01:04.382: E/AndroidRuntime(271):  ... 11 more
03-18 01:06:04.472: I/Process(271): Sending signal. PID: 271 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:29:51.657

此行为您提供有关问题的信息`"you must specify a way to create the tab content"`

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gormahia/com.example.gormahia.TabMain}: java.lang.IllegalArgumentException: you must specify a way to create the tab content
03-18 01:01:04.382: E/AndroidRuntime(271): 
```

com.example.gormahia.TabMain：第 44 行

```
 at com.example.gormahia.TabMain.onCreate(TabMain.java:44) 
```

# wpf - 如何摆脱子菜单弹出窗口中的非活动死区？

> ID：15466956
> 
> 赞同：0
> 
> 时间：2013-03-17T22:22:07.383
> 
> 标签：wpf, popup, styles, contextmenu, menuitem

我有一个`ContextMenu`由许多顶级`MenuItem`s组成的，其中一个包含一个项目的子菜单，受`ItemsSource`以下约束：

```
<ContextMenu Style="{x:Null}">
    <MenuItem Header="{Binding MenuLabelNewSolution}" Command="New"/>
    <MenuItem Header="{Binding MenuLabelOpenSolution}" Command="Open"/>
    <MenuItem Header="{Binding MenuLabelRecentSolutions}"
              ItemsSource="{Binding RecentSolutions, Mode=OneWay}">
        <MenuItem.ItemTemplate>
            <DataTemplate>
                <Button Style="{x:Null}" Margin="0" Content="Test"
                        Command="vm:CustomCommands.ExplicitOpen"/>
            </DataTemplate>
        </MenuItem.ItemTemplate>
    </MenuItem>
    <MenuItem Header="{Binding MenuLabelSaveAll}" Command="vm:CustomCommands.SaveAll"/>
</ContextMenu> 
```

上面的子菜单项是`Button`用来说明问题的测试。

下面，我缩减了`Style`扩展`MenuItem`列以说明问题：

```
<Style TargetType="{x:Type MenuItem}">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Foreground" Value="Black" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type MenuItem}">
                <Border Style="{x:Null}" Background="LightBlue"
                        BorderBrush="Black" BorderThickness="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="100" />
                        </Grid.ColumnDefinitions>
                        <ContentPresenter Grid.Column="1" ContentSource="Header" />
                        <Popup Style="{x:Null}" Margin="0" 
                               IsOpen="{Binding Path=IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}"
                               Placement="Right" VerticalOffset="-3">
                            <StackPanel Style="{x:Null}" Background="Red"
                                        Margin="0" IsItemsHost="True" />
                        </Popup>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我遇到的问题是子菜单有很多非活动死区，如下图所示：

![死区菜单](../Images/babecfd9c35507b5803f6795af500c75.png)

如果用户点击顶层的死区`MenuItem`（用于图标和手势文本），则执行菜单命令。但是，如果用户单击子菜单项中测试按钮之外的任何死区，则不会执行菜单命令。

我该怎么做`Style`才能摆脱子菜单级别的额外空间，或者至少使整个子菜单区域相对于菜单命令处于活动状态？

顺便说一句，如果我恢复为默认值`Style`，`MenuItem`我仍然会遇到同样的问题：

![默认菜单](../Images/666aed145034c23fb73bfc5df761cd8e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:43:21.160

问题根本不`MenuItem` `Style`在于我，而是因为我将 a`DataTemplate`用于子菜单项。以下更改起到了作用：

```
<ContextMenu>
    <MenuItem Header="{Binding MenuLabelNewSolution}" Command="New"/>
    <MenuItem Header="{Binding MenuLabelOpenSolution}" Command="Open"/>
    <MenuItem Header="{Binding MenuLabelRecentSolutions}"
              ItemsSource="{Binding RecentSolutions, Mode=OneWay}">
        <MenuItem.ItemContainerStyle>
            <Style TargetType="MenuItem">
                <Setter Property="Header" Value="{Binding Header}"/>
                <Setter Property="Command" Value="vm:CustomCommands.ExplicitOpen"/>
            </Style>
        </MenuItem.ItemContainerStyle>
    </MenuItem>
    <MenuItem Header="{Binding MenuLabelSaveAll}" Command="vm:CustomCommands.SaveAll"/>
</ContextMenu> 
```

# android - 在 asyntask 上烤面包时出错

> ID：15466958
> 
> 赞同：-2
> 
> 时间：2013-03-17T22:22:15.653
> 
> 标签：android, android-asynctask

我的问题是，如果用户无法登录数据库，我正在准备吐司，但即使用户成功登录我的数据库，吐司仍然出现 `Login_layout`。

```
 class BuatLogin extends AsyncTask<String,  String , String> {

    /**
     * Sebelum memasuki menu buat progres dialog
     * */
    @Override
    protected void onPreExecute() {
      super.onPreExecute();
      pDialog = new ProgressDialog(Login_layout.this);
      pDialog.setMessage("Login_layout Progress...");
      pDialog.setIndeterminate(false);
      pDialog.setCancelable(true);
      pDialog.show();
    }
    /**
     * Konkesi
     * */
    protected String doInBackground(String... args) {
      String usr = user.getText().toString();
      String pwd = pass.getText().toString();

      Log.d("1 "+usr, pwd);
      // Building Parameters
      List<NameValuePair> params = new ArrayList<NameValuePair>();
      params.add(new BasicNameValuePair("usr", usr));
      params.add(new BasicNameValuePair("pwd", pwd));
      Log.d("2 "+usr, pwd);
      Log.d(usr,url_create_login);

      // getting JSON Object
      // login url menerima POST method
      JSONObject json = jsonParser.makeHttpRequest(url_create_login,
                                                   "POST", params);

      // cek log untuk response
      Log.d("Buat Respond", json.toString());

      // check untuk sukses tag
      try {
        int sukses = json.getInt(TAG_SUKSES);

        if (sukses == 1) {
          String nim=json.getString(TAG_NIM);
          Log.d(TAG_NIM,nim);

          // sukses login
          Intent i = new Intent(getApplicationContext(), Mhs_main_layout.class);
          i.putExtra(TAG_NIM, nim);
          startActivity(i);

          // tutup layar
          finish();
        } else if(sukses == 2) {
          String nim=json.getString(TAG_NIM);
          Log.d(TAG_NIM,nim);
          Intent i = new Intent(getApplicationContext(), Admin_main_layout.class);
          i.putExtra(TAG_NIM, nim);
          startActivity(i);

          // tutup layar ini
          finish();
        }else if(sukses == 3){

             setResult(100);

        }
      } catch (JSONException e) {
        e.printStackTrace();
      }

      return null;     
    }   

  }

  protected void onPostExecute(String file_url) {       
  int resultCode = 100;
        if (resultCode == 100) {
    Toast.makeText(Login_layout.this, "Nip/Nim Atau Password TIdak Sesuai Silahkan Coba            Lagi ", Toast.LENGTH_LONG).show();
         }
pDialog.dismiss();

  } 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:47:03.057

很难理解你想要实现什么、何时以及如何实现。无论如何，那里`return null"`看起来非常糟糕。

您应该返回一些有用的信息来发布执行。也许你可以在那里检查结果是否是预期的。

函数永远不应返回“随机”结果。您应该尝试重新学习一些 OOP 和/或 java。您肯定会返回一个“null”，并且您将该函数编程为返回一个`String`.

**说完之后...** 您应该编写代码来生成 Toast 消息，`onPostExecute`因为它可以访问视图。

**编辑** logcat 在这一行中说错误`Toast.makeText(Login_layout.this...`吗？我不确定它是否写得好。Some1请评论它，但我认为你应该写`v.getContext()`而不是`Login_layout.this`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:52:46.260

您可以使用该`onProgressUpdate(Progress...values)`方法，该方法完全符合您的要求。在`doInBackground()`, 打电话`publishProgress(Progress...values)`并在`Toast`那里。

顺便说一句：请考虑阅读有关代码质量、面向对象编程的书籍，并在阅读时阅读 Android API 文档。

**编辑/添加**

基础 AsyncTask 概述（请记住，您是`Thread`用开始一个新任务`AsyncTask`）

```
public class Operation extends AsyncTask<ParamA, ParamB, ParamC> {
    @Override
    protected ParamC doInBackground(ParamA... params) {
        return new ParamC();
    }      

    @Override
    protected void onPostExecute(ParamC result) {

    }

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected void onProgressUpdate(ParamB... values) {

    }
} 
```

where`ParamA`和只是显示在哪里使用的类`ParamB`：`ParamC`

```
private class ParamA { }
private class ParamB { }
private class ParamC { } 
```

当您通过 执行操作时`new Operation().execute(new ParamA());`，调用 first`onPreExcute`以实例化您可能需要的一些变量（例如建立连接）。然后将给定的参数`execute`作为参数放入`doInBackground`。完成后，返回 from`doInBackground`将作为参数传递到`onPostExecute`，您可以在其中显示结果。

在`doInBackground`中，您可以将结果发布到 UI 线程。快捷方式是使用`publishProgress`in `doInBackground`，因为您不能直接从中调用 UI 线程`doInBackground`（因为`AsyncTask`是另一个`Thread`，它不在 UI 线程上运行）。

**实际有用的例子**

```
import java.util.Random;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class AsyncTaskActivity extends Activity implements OnClickListener {
    private Button button;
    private LinearLayout linearLayout;
    private TextView textView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        linearLayout = new LinearLayout(this);
        linearLayout.setOrientation(LinearLayout.VERTICAL);
        button = new Button(this);
        button.setText("Click to start operation");
        textView = new TextView(this);
        textView.setText("NOT STARTED YET");
        linearLayout.addView(button);
        linearLayout.addView(textView);
        setContentView(linearLayout);
        button.setOnClickListener(this);
    }

    public void onClick(View view){
        if (view == button)
            new LongOperation().execute("Hello");
    }

    private class LongOperation extends AsyncTask<String, Integer, Double> {
        @Override
        protected Double doInBackground(String... params) {
            for(int i = 1; i < params[0].length(); i++) {
                try {
                    Thread.sleep(2000);
                    publishProgress(i, i*i); //proper way to publish results while task is running.
                } 
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            return new Random().nextDouble();
        }      

        @Override
        protected void onPostExecute(Double result) {
            textView.setText("Done: random result is " + result);
        }

        @Override
        protected void onPreExecute() {
            Toast.makeText(AsyncTaskActivity.this, "onPreExcecute", Toast.LENGTH_SHORT).show();
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            textView.setText("We just slept for a total of " + (values[0] * 2) + " seconds,  (and btw: " + values[0] + " to the power of 2 is " + values[1] + ").");
        }
    }   
} 
```

您还可以通过此代码访问其他`Threads`（或`doInBackground`）中的 UI 线程（尽管您应该尽量避免它）：

```
AsyncTaskActivity.this.runOnUiThread(new Runnable() {
    public void run() {
        textView.setText("Called the UI from Thread");
    }
}); 
```

# facebook - 如何在 Drupal 中显示一个页面有多少 Facebook“喜欢”？

> ID：15466968
> 
> 赞同：0
> 
> 时间：2013-03-17T22:22:54.127
> 
> 标签：facebook, drupal

在 drupal 中，我想显示我们页面的点赞数量。

我知道您可以使用 facebook graph 实用程序，但我不知道如何为 html“片段”输入正确的代码。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T22:39:47.047

我对 Drupal 不熟悉 - 但这是您通过 HTML + JS 进行操作的方式：

```
window.fbAsyncInit = function() {
    FB._https = true;
    // init the FB JS SDK
    FB.init({
      appId      : YOUR APP ID, // App ID from the App Dashboard
      channelUrl : 'channel.html', // YOUR CHANNEL HTML
      status     : true, 
      cookie     : true, 
      xfbml      : true 
    });

    getPage();

};
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false))

getPage = function() {
    var pageID = 'http://google.com';  //put your site here
    var pageUrl = 'https://graph.facebook.com/'+pageID;
    FB.api(pageUrl, 'get', function(response) {
            alert( response.likes )
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:23:14.203

您可以在块中或允许使用 php 的任何其他地方使用以下 PHP 代码段：

```
$graph    = 'https://graph.facebook.com/< your facebook page id>/?fields=likes';
$response = file_get_contents($graph);
$json     = json_decode($response);
try {
  if (!isset($json->likes)) {
    throw new Exception('Like count not found in facebook graph object');
  }
  $likes = $json->likes;
  // do something with $likes
} catch (Exception $e) {
  // handle error
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-29T22:28:21.763

最简单的方法是启用“php 代码”文本过滤器，创建节点并选择“php 格式”，而不是在节点正文中放入更新的 Arlina 代码：

```
$graph    = 'https://graph.facebook.com/< your facebook page id>/?fields=likes&access_token=< your application access_token >';
$response = file_get_contents($graph);
$json     = json_decode($response);
try {
if (!isset($json->likes)) {
    throw new Exception('Like count not found in facebook graph object');
}
$likes = $json->likes;
  echo $likes;
} catch (Exception $e) {
// handle error
} 
```

最后保存节点。

# jquery - jQuery 创建使用 Ajax 加载的动态上下文菜单

> ID：15466975
> 
> 赞同：3
> 
> 时间：2013-03-17T22:23:33.660
> 
> 标签：jquery, ajax, contextmenu

我正在为 jQuery 1.8.11.js 使用下面的上下文菜单插件，并使用“build”回调在每次右键单击时动态创建菜单。

[http://medialize.github.com/jQuery-contextMenu/index.html](http://medialize.github.com/jQuery-contextMenu/index.html)

我希望能够在单击项目时动态加载菜单选项。

我的问题是这个上下文菜单在 ajax 调用之后不包含任何项目。

这是 jQuery 代码：

```
 $(function(){
        $.contextMenu({
            selector: '.context-menu-one ul li',
            build: function($trigger, e) {
            var str = $trigger.text();
            var replaced = str.split(/[^a-zA-Z0-9]/g);
            $.post('application/getMenu.php',
                {item : replaced[1]},
                function(data) {
                    menuItems = data
                };
            });
            return {
                callback: function(key, options) {
                    var m = "clicked: " + key;
                    window.console && console.log(m) || alert(m); 
                    },
                items: menuItems
                };
            }
        });
    }); 
```

这是发送 ajax 响应的 PHP 代码的一部分：

```
 $toReturn = "";
    while($row = $result->fetch_assoc()) {
        $var = $row['category_name'];
        $toReturn .= "\"".$var."\": {name: \"".$var."\"},";
    }
    echo $toReturn . "\"quit\": {name: \"Quit\"}"; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-28T22:14:38.890

此功能是通过 ajax 加载仅适用于子菜单。也有通过 ajax 对顶层进行动态的请求。

[https://github.com/swisnl/jQuery-contextMenu/issues/574](https://github.com/swisnl/jQuery-contextMenu/issues/574)

# java - 顺序一致性和原子性有什么区别？

> ID：15466978
> 
> 赞同：9
> 
> 时间：2013-03-17T22:23:38.103
> 
> 标签：java, c++, atomic, volatile

我读到java volatile是顺序一致的，但不是原子的。对于原子性，java 提供了不同的库。

有人可以用简单的英语解释两者之间的区别吗？

（我相信问题范围包括 C/C++，因此添加了这些语言标签以吸引更多的受众。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T22:33:04.200

想象一个类中的这两个变量：

```
int i = 0;
volatile int v = 0; 
```

而这两种方法

```
void write() {
    i = 5;
    v = 2;
}

void read() {
    if (v == 2) { System.out.println(i); }
} 
```

volatile 语义保证`read`将打印 5 或不打印（当然假设没有其他方法正在修改字段）。如果`v`不是易失性的，`read`还不如打印 0，因为`i = 5`并且`v = 2`可以重新排序。我想这就是您所说的顺序一致性，它具有更广泛的含义。

另一方面，volatile 不保证原子性。因此，如果两个线程同时调用此方法（v 相同`volatile int`）：

```
void increment() {
    v++;
} 
```

你不能保证 v 会增加 2。这是因为`v++`实际上是三个语句：

```
load v;
increment v;
store v; 
```

并且由于线程交错 v 只能增加一次（两个线程将加载相同的值）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T22:32:31.207

假设你有这两个变量：

```
public int a = 0;
public volatile int b = 0; 
```

假设有一个线程

```
a = 1;
b = 2; 
```

如果另一个线程读取这些值并看到 b == 2，则保证也看到 a == 1。

但是读取线程可以看到`a == 1`and `b == 0`，因为两次写入不是原子操作的一部分，所以读取线程可能会`a`在第一个线程为 赋值之前看到对 的更改`b`。

为了使这两个写入原子，您需要同步对这两个变量的访问：

```
synchronized (lock) {
    a = 1;
    b = 2;
}

...

synchronized (lock) {
    System.out.println("a = " + a + "; b = " + b);
} 
```

在这种情况下，读取线程将看到`a == 0`and `b == 0`， or `a == 1`and `b == 2`，但永远不会看到中间状态。

# java - Java字节变量怎么可能是128？

> ID：15466981
> 
> 赞同：2
> 
> 时间：2013-03-17T22:23:52.813
> 
> 标签：java, android

我可能错过了对 Java 中字节的一些基本理解。以下是应用程序的简化摘录，用于说明问题：

```
public class Foo
{
 byte b1;
 byte b2;
 byte bProblem;
} 
```

foo 是 Foo 的一个实例。以下内容让我困惑了几个小时：

```
Log.d("Debug", "Before: " + String.valueOf(foo.bProblem));
if (foo.bProblem != (byte) 0x80) {
    foo.bProblem = (byte) 0x80;
    Log.d("Debug", "After: " + String.valueOf(foo.bProblem));
} 
```

LogCat 显示以下内容：

```
03-17 21:58:46.590: D/Debug(2130): Before: 128    
03-17 21:58:46.590: D/Debug(2130): After: -128 
```

Eclipse 的调试器总是为 foo.bProblem 显示 -128 (0x80)。这意味着调试器看不到 String.valueOf() 揭示的内容。Java字节怎么可能是128？

我在将 foo.bProblem 添加到 List 时注意到了这一点：Java.lang.ArrayIndexOutOfBoundsException: length=256; 指数=256

谁能提供一些提示让我理解这一点？

编辑：

后来我发现这仅发生在英特尔 Android 模拟器上，正如我在 Joop 回答后的评论中所写的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T22:32:24.497

Java“字节数据类型是一个 8 位有符号二进制补码整数。它的最小值为 -128，最大值为 127（含）。” 因此，当您将一个字节分配给 +128 时，它实际上会回绕到最低值 -128

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T22:33:48.823

String.valueOf 不占用一个字节，它采用以下之一：

boolean char char[] double float int long Object

在您的实现中，您实际上是在调用 String.valueOf(int value) 它实际上并不包含 128 的值。尝试打印

```
Log.d("Debug", "" + bProblem) 
```

那应该行得通。

编辑 -

我想说的是 String.valueOf 实际上并没有查看字节的值。它正在查看构成字节的相同位作为 int 并打印它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-17T22:36:14.493

在 java 虚拟机中，字节字段 bProblem 将使用一个 int。现在，`String.valueOf(int)`使用，因为没有字节变体。所以（错误地？）该字段被视为 int，所以无符号，128。

* * *

***对不起，我尝试实现了 128 但没有成功（Java 7，Linux）***

我已经变得偏执了，您使用带有 int 字段 bProblem 的子类。或者更可能是编译的类与未最新编译的 java 源一起使用。也许您可以尝试使用 Eclipse 以外的其他编译器。

# mysql - MySQL 2表到另一个表

> ID：15466982
> 
> 赞同：2
> 
> 时间：2013-03-17T22:23:54.560
> 
> 标签：mysql, sql, join

我的 MySQL 有问题。我有 2 个具有相同字段的表，我想选择这 2 个表并将其插入另一个表。这不是问题，但问题是那里有一些重复的记录。

表格1

```
+------+-------+-----------+
| Name | Email | telephone |
+------+-------+-----------+
|Harry |       | 902632354 |
| John | ha@as | 927301837 |
| Alan | ajh@i | 928371048 |
+------+-------+-----------+ 
```

表 2

```
+------+-------+-----------+
| Name | Email | telephone |
+------+-------+-----------+
|Harry | a@jka | 902632354 |
| Ron  | hs@as | 123308837 |
| Alan |       | 928371048 |
+------+-------+-----------+ 
```

输出：

```
Harry
John
Ron
Alan 
```

所以我想要的是一个独特的电话字段，其名称字段就像一个不同的但问题不是每个电子邮件字段都是相同的，所以这就是问题所在，我希望有人可以帮助我。我很抱歉我的英语不是很好

## 编辑：

我希望将 2 个表放到另一个表中，相同的字段，但问题是我有双行。我想删除双行之一，以便电话字段和姓名字段是唯一的。

输出必须是：

```
Harry, John, Alan, Ron 
```

并不是：

```
Harry, John, Alan, Harry, Ron, Alan 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T22:43:16.230

试试这个：

```
 select name, MAX(email), phone FROM
    (
       Select name, email, phone FROM table1
       UNION
       Select name, email, phone FROM table2
    ) a
    GROUP BY name, phone
    HAVING email=MAX(email) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:54:25.093

以下将起作用：

```
SELECT name, MAX(email), phone
FROM (
  SELECT t1.`name`, t1.`email`, t1.`phone`
  FROM tbl1 t1
  UNION ALL 
  SELECT t2.`name`, t2.`email`, t2.`phone`
  FROM tbl2 t2
) u
GROUP BY name; 
```

这是一个[小提琴链接](http://sqlfiddle.com/#!2/193c2/7)。

# php - Stripe webhook 与同步充电

> ID：15466984
> 
> 赞同：8
> 
> 时间：2013-03-17T22:24:01.190
> 
> 标签：php, stripe-payments, webhooks

Stripe 的文档解释说他们的收费 API 是同步的。那么为什么我们需要 webhook？

如果我的应用程序执行`Stripe_Charge::create()`（在 PHP 中），那么我可以不获取返回值并将其作为成功的交易记录在我们的数据库中并在同一执行中发送确认电子邮件吗？

是否仅当您有需要通知的不同后台系统时才使用 webhook？在 webhook 上侦听哪些其他类型的事件很有用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T18:13:33.540

当调用 Stripe_Charge::create() 时，您确实可以，如您所说，将其记录为成功的交易（假设它没有失败）并发送您的确认电子邮件。

Webhook 在使用 Stripe 管理定期付款时非常有用，例如在销售订阅时。在这种情况下，发生了许多不是由用户请求直接发起的事情。

例如，假设用户订阅了您的黄金计划，该计划有 30 天的免费试用期。试用结束前三天，会触发 customer.subscription.trial_will_end webhook。您可以通过向客户发送一封电子邮件来回应此问题，感谢他试用您的订阅，并提醒他他的卡即将被收取费用。

然后，3天后他的卡被扣款，支付成功，你就可以回复charge了。成功的webhook每个月都会给他发一张发票。

另一个非常有用的 webhook 是charge.failed。根据您的重试设置，您可以通过让用户知道他们的卡被拒绝来对此做出回应，并警告他在 n 天内他的订阅将被终止。

总之，如果您不使用订阅或发票，则 webhook 的用处有限。但如果你是，它们是不可或缺的。

# java - 由于 WToolkit.shutdown() 未完成而挂起关闭我们的 Java 6 应用程序？

> ID：15466989
> 
> 赞同：1
> 
> 时间：2013-03-17T22:24:36.743
> 
> 标签：java, windows

我们应用程序中的自动崩溃报告器有时会在关闭应用程序时报告挂起。我们在内部没有观察到这一点。摆动线程挂在 ApplicationShutdownHooks.runHooks() 中，我认为这可能是因为 WToolkit.shutdown() 永远不会返回。我不知道是什么原因造成的。谁能帮我解决导致挂起的原因？这是一个完整的线程转储。谢谢！JRE 是 1.6.0_35。

```
 Thread[AWT-EventQueue-0,6,main] WAITING :
    at java.lang.Object.wait(Native Method)
    at java.lang.Thread.join(Unknown Source)
    at java.lang.Thread.join(Unknown Source)
    at java.lang.ApplicationShutdownHooks.runHooks(Unknown Source)
    at java.lang.ApplicationShutdownHooks$1.run(Unknown Source)
    at java.lang.Shutdown.runHooks(Unknown Source)
    at java.lang.Shutdown.sequence(Unknown Source)
    at java.lang.Shutdown.exit(Unknown Source)
    at java.lang.Runtime.exit(Unknown Source)
    at java.lang.System.exit(Unknown Source)
    at com.biomatters.iseek.application.ISeekFrame$11$2.run(ISeekFrame.java:555)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$400(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.awt.EventQueue$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

    Thread[Hang Watcher,10,main] RUNNABLE :
    at java.lang.Thread.dumpThreads(Native Method)
    at java.lang.Thread.getAllStackTraces(Unknown Source)
    at com.biomatters.utilities.HangWatcher.getAllThreadStackTraces(HangWatcher.java:77)
    at com.biomatters.geneious.common.talkback.client.TalkbackIncidentFactory.fieldsForHang(TalkbackIncidentFactory.java:437)
    at com.biomatters.geneious.common.talkback.client.TalkbackIncidentFactory.forHang(TalkbackIncidentFactory.java:186)
    at com.biomatters.geneious.common.ErrorUtilities.handleHang(ErrorUtilities.java:78)
    at com.biomatters.iseek.application.ISeekMain$16.handleHang(ISeekMain.java:1091)
    at com.biomatters.utilities.HangWatcher$2.run(HangWatcher.java:59)

    Thread[Exe4JStartupThread,5,main] TIMED_WAITING :
    at java.lang.Thread.sleep(Native Method)
    at com.exe4j.Controller$StartupThread.run(Unknown Source)

    Thread[GarbageCollectionNotifier,6,main] WAITING :
    at java.lang.Object.wait(Native Method)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at com.biomatters.geneious.publicapi.utilities.GarbageCollectionNotifier$1.run(GarbageCollectionNotifier.java:49)

    Thread[Biomatters-Timer-Thread,5,main] TIMED_WAITING :
    at java.lang.Thread.sleep(Native Method)
    at com.biomatters.iseek.license.TimerThread.run(TimerThread.java:49)

    Thread[Thread-1,6,system] RUNNABLE :
    at sun.awt.windows.WToolkit.shutdown(Native Method)
    at sun.awt.windows.WToolkit.access$200(Unknown Source)
    at sun.awt.windows.WToolkit$2$1.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

    Thread[Signal Dispatcher,9,system] RUNNABLE :

    Thread[TimerQueue,5,system] TIMED_WAITING :
    at java.lang.Object.wait(Native Method)
    at javax.swing.TimerQueue.postExpiredTimers(Unknown Source)
    at javax.swing.TimerQueue.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

    Thread[main,5,main] RUNNABLE :

    Thread[AWT-Windows,6,main] RUNNABLE :
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

    Thread[Timer: UpdatingProperties - customBlast.properties,5,main] TIMED_WAITING :
    at java.lang.Object.wait(Native Method)
    at java.util.TimerThread.mainLoop(Unknown Source)
    at java.util.TimerThread.run(Unknown Source)

    Thread[Reference Handler,10,system] WAITING :
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)

    Thread[Biomatters-Timer-Thread,5,main] TIMED_WAITING :
    at java.lang.Thread.sleep(Native Method)
    at com.biomatters.iseek.license.TimerThread.run(TimerThread.java:49)

    Thread[AWT-Shutdown,5,main] WAITING :
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:485)
    at sun.awt.AWTAutoShutdown.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

    Thread[Multicast Reader,5,main] TIMED_WAITING :
    at java.lang.Thread.sleep(Native Method)
    at com.biomatters.iseek.license.concurrentlicensechecker.Multicast$1.run(Multicast.java:150)

    Thread[Finalizer,8,system] WAITING :
    at java.lang.Object.wait(Native Method)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

    Thread[Java2D Disposer,10,system] BLOCKED :
    at java.lang.Object.wait(Native Method)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

    Thread[Do exit,6,main] BLOCKED :
    at java.lang.Shutdown.exit(Unknown Source)
    at java.lang.Runtime.exit(Unknown Source)
    at java.lang.System.exit(Unknown Source)
    at com.biomatters.iseek.application.ISeekFrame$11.run(ISeekFrame.java:560)

    Thread[Memory Monitor,1,main] TIMED_WAITING :
    at java.lang.Thread.sleep(Native Method)
    at com.biomatters.utilities.MemoryMonitor$1.run(MemoryMonitor.java:44)
    at java.lang.Thread.run(Unknown Source)

    Thread[Timer: refresh plugin licenses,5,main] TIMED_WAITING :
    at java.lang.Object.wait(Native Method)
    at java.util.TimerThread.mainLoop(Unknown Source)
    at java.util.TimerThread.run(Unknown Source)

    Thread[Attach Listener,5,system] RUNNABLE : 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T16:28:53.607

我有同样的问题，与 JDK 一起部署的 JConsole 程序也是如此。我正在寻找有关此的解决方案或错误报告，但它是从 1.6.0_25 开始的回归。以前的版本不会出现这个问题（我使用 1.6.0_23 成功）。

这个论坛帖子是我找到这个解决方法的地方：

[https://forums.oracle.com/forums/thread.jspa?threadID=2260059](https://forums.oracle.com/forums/thread.jspa?threadID=2260059)

# android - 将实时网络摄像头流式传输到 Android 智能手机

> ID：15466991
> 
> 赞同：0
> 
> 时间：2013-03-17T22:24:44.793
> 
> 标签：android, streaming, webcam, android-videoview, vlc

所以我想做的很简单，但是我缺乏流媒体方法/软件的经验。我想要做的是将我的笔记本电脑网络摄像头实时流式传输到 android 上的 videoView。我正在使用 vlc 使用 http//:privateIP:8080/stream 流式传输网络摄像头，并转码 WMV+WMA。这是 vlc 生成的输出字符串：

```
 :sout=#transcode{vcodec=WMV2,vb=800,scale=1,acodec=wma2,ab=128,channels=2,samplerate=44100}:http{mux=asf,dst=:8080/stream} :sout-all :sout-keep 
```

我的安卓代码如下：

```
 package com.example.vlctest;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.graphics.PixelFormat;
import android.view.Menu;
import android.widget.MediaController;
import android.widget.VideoView;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     VideoView view1 = (VideoView) findViewById(R.id.videoView1); 
     getWindow().setFormat(PixelFormat.TRANSLUCENT);

     MediaController mc = new MediaController(this); 
     mc.setMediaPlayer(view1); 

     view1.setMediaController(mc); 
     view1.setVideoURI(Uri.parse("http://192.168.1.100:8080/stream")); 
     view1.requestFocus(); 
     view1.start();
}
} 
```

有时应用程序告诉我它无法播放视频，有时在更改转码后视频视图只是保持黑色而不做任何事情。如果有解决方案或更有效的方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:36:02.300

问题是您正在使用 Android 不支持的 WMV 格式进行流式传输。您需要流式传输与 Android 兼容且 VLC 也支持的格式。

VLC 中的以下设置适用于 Android 设备。

`H.264`用于视频和`AAC`音频的转码。使用`MPEG TS`or`MP4`作为封装格式。

这些应该在 VLC 和 Android 3.0+ 中可用。

有关更多信息，请参阅以下有关 VLC 和 Android 支持的媒体格式的文档：

[http://www.videolan.org/doc/streaming-howto/en/ch02.html](http://www.videolan.org/doc/streaming-howto/en/ch02.html) [http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

# html - 如何检测断开的 RTCPeerConnection

> ID：15466997
> 
> 赞同：2
> 
> 时间：2013-03-17T22:25:01.160
> 
> 标签：html, webrtc

我正在我的 chrome 浏览器中运行 WebRTC 演示，并且已经可以设置视频会议。但是，如果其中一个对等点断开连接（例如刷新浏览器），我不知道如何在另一端检测到它（并且可能会警告“对等点断开连接”消息）

我注意到在对等方断开连接后，我收到了一些`ice candidates`，但我找不到任何可以帮助我发现这实际上是一个断开连接的事件的属性。

我用谷歌搜索并找到[了这个](https://groups.google.com/forum/#!topic/discuss-webrtc/G5-U-lHWs10)

> 这将通过 RTCIceConnectionState 的“断开连接”状态来处理。它将在未收到来自远程端的活动检查或媒体的一些 TBD（当前约 5 秒）延迟后触发

但我只是在我其他人的对等对象中找不到这种“断开连接”状态。

你能给我更多关于这个的提示吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:44:31.433

您需要检查此只读属性：

```
peerconnection.iceConnectionState === 'disconnected' 
```

参考：

*   [http://dev.w3.org/2011/webrtc/editor/webrtc.html#widl-RTCPeerConnection-iceConnectionState](http://dev.w3.org/2011/webrtc/editor/webrtc.html#widl-RTCPeerConnection-iceConnectionState)

# haskell - head.reverse 与 last 的空间复杂度

> ID：15466999
> 
> 赞同：10
> 
> 时间：2013-03-17T22:25:16.437
> 
> 标签：haskell, space-complexity

在许多系统中，`head.reverse`需要与列表大小成比例的空间，而`last`需要恒定空间。

是否有系统来执行这样的转变？同样对于`reverse.take n.reverse`?

编辑：我想扩展我的问题：我不是在进行具体的改造——我更愿意为此进行*任何优化。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T04:52:59.207

您可以`reverse . take n . reverse`通过将列表视为一个特别钝的惰性自然数来进行转换：空列表为零，而 conses 为 succ。对于编码为列表的惰性自然数，减法是`drop`：

```
type LazyNat a = [a]

lengthLazy :: [a] -> LazyNat a
lengthLazy = id

dropLazy :: LazyNat a -> [b] -> [b]
dropLazy [] xs = xs
dropLazy (_:n) (_:xs) = dropLazy n xs
dropLazy _ _ = []

-- like Prelude.subtract, this is flip (-)
subtractLazy :: Int -> LazyNat a -> LazyNat a
subtractLazy = drop 
```

现在我们可以轻松实现“取最后一个`n`”功能：

```
takeLast n xs = dropLazy (subtractLazy n (lengthLazy xs)) xs 
```

...你会很高兴知道`n`在任何给定时间只有 conses 需要在内存中。特别是`takeLast 1`（或者实际上`takeLast N`对于任何文字`N`）可以在常量内存中运行。您可以通过比较运行`takeLast 5 [1..]`时发生的情况与`(reverse . take 5 . reverse) [1..]`在 ghci 中运行时发生的情况来验证这一点。

当然，我尝试在上面使用非常具有暗示性的名称，但在实际实现中，您可能会内联上面所有的废话：

```
takeLast n xs = go xs (drop n xs) where
    go lastn  []    = lastn
    go (_:xs) (_:n) = go xs n
    go _      _     = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T23:25:01.313

您可以为此编写一个简单的重写规则。

[http://www.haskell.org/haskellwiki/Playing_by_the_rules](http://www.haskell.org/haskellwiki/Playing_by_the_rules)

融合规则也可能会捕获它，这取决于反向编码的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T02:02:02.737

如果我们比较 drop 和 last

```
>>> last [1..10^5]
100000
(0.01 secs, 10496736 bytes)
>>> last [1..10^6]
1000000
(0.05 secs, 81968856 bytes)
>>> last [1..10^7]
10000000
(0.32 secs, 802137928 bytes)

>>> drop (10^5-1) [1..10^5]
[100000]
(0.01 secs, 10483312 bytes)
>>> drop (10^6-1) [1..10^6]
[1000000]
(0.05 secs, 82525384 bytes)
>>> drop (10^7-1) [1..10^7]
[10000000]
(0.32 secs, 802142096 bytes) 
```

我们在空间和时间上获得了相似的表现，我必须承认我有点作弊，因为这里我们不需要计算列表的长度。无论如何，我相信这在太空中不应该是一个问题。然后你的**反向。取 n 。reverse**可以使用 drop 和 length 来表示。

* * *

作为旁注，我已经测试了其他解决方法，结果很糟糕。

```
takeLastN = foldl' (.) id . flip replicate tail 

lastN = foldl' (.) last . flip replicate init 
```