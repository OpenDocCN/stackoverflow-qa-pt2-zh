# StackOverflow 问答 16081000-16081999

# mysql - 获取在列中具有撇号值的记录的问题

> ID：16081004
> 
> 赞同：0
> 
> 时间：2013-04-18T10:53:19.573
> 
> 标签：mysql

在我的表中，我有一条记录，例如 => `Base\'ball`。
当我执行`SELECT`查询时，它会将该列值获取为相同 => `Base\'ball`。
但我希望该值显示为`Baseball`.

那么如何在 sql 查询中做到这一点呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:03:04.073

试试这个`Query`：

```
select REPLACE(your_field, 'Base\\\'ball', 'Baseball')
WHERE your_field LIKE '%Base\'ball%' 
```

**更新：**

```
select REPLACE(your_field, '\'', '')
WHERE your_field LIKE '%\'%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:09:22.307

尝试而不是在查询中这样做。获取结果并在其上应用替换机制。

```
$baseball = "Base\'ball.";
    echo $baseball = str_replace("\'","",$baseball); 
```

工作完美...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:10:26.863

尝试使用`replace`

替换将如下所示，

`select column_name from table_name REPLACE(column_name, '\\\'', '');`

您可以使用 MySQL 的字符串函数中的一个（或某种组合）。

例如，让你开始......

`SELECT SUBSTRING_INDEX('this-is-example-string','example',1);`

希望能帮助到你。

# oop - 属性依赖注入不违反封装原则吗？

> ID：16081009
> 
> 赞同：3
> 
> 时间：2013-04-18T10:53:32.813
> 
> 标签：oop, design-patterns, encapsulation

将数据和对这些数据进行操作的方法放在一个类中的机制称为封装。

但是要遵循`Open/Closed`原则，`Dependency injection`是通过暴露公共属性来实现的。

在这种情况下，封装和依赖注入似乎相互矛盾，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:03:49.100

这里有两件不同的事情需要考虑。让我们使用一个简单的“Person”示例。

一个人的属性可能包括名字、姓氏、出生日期等。为了保持封装，这些可能是私有的。如果你需要这个人的年龄，你必须让 Person 对象给你年龄，它会使用它的私有 dateOfBirth 来计算年龄。这可以防止在系统中的许多地方重复获取一个人的年龄的逻辑，如果 dateOfBirth 是公开的，这可能会受到鼓励。

Person 对象也可能依赖于其他对象。人不是自己创建这些对象，而是依赖系统中的其他实体来创建依赖项并将它们传入。Person 对象可能会公开公共属性来保存这些依赖项（或设置依赖项的方法）——这些不是一个人的属性，它们是一个人的依赖项。

这实际上是仅在一个地方拥有逻辑的另一个示例 - 您的系统中有一个“事物”可以创建依赖项，而不是让许多对象都为自己创建该依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:56:48.920

没有，不代表`Encapsulation`没有公共接口。
`Encapsulation`意味着只能通过公共的特定接口访问私有成员。
依赖注入通过设置器“注入”所需的对象`public`。

# jquery - 使用 Jquery 在 ASP.NET MVC 中转换 UTC 日期时间

> ID：16081017
> 
> 赞同：2
> 
> 时间：2013-04-18T10:53:59.190
> 
> 标签：jquery, asp.net-mvc, razor

我有 UTC 日期，这是 ASP.NET MVC 模型的属性之一。我想将其转换为当地时间以显示。

我用 C# 编写了转换逻辑，因为代码将在服务器上运行，它将在服务器上占用本地时间。因此，我将不得不在客户端即 Javascript 本地时间转换它。

这是我的html

```
<label id="UploadedOn">@item.PublicationDate.ToString("MMMM dd, yyyy,hh:mm: tt")</label> 
```

如何使用 javascript 将此日期转换为本地日期时间。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-23T12:59:32.900

您可以在将文化作为参数的实用程序类中创建一个静态方法。

调用该方法以获取特定于文化的日期

```
public static string FormatDate(string culture)
    {
        string returnDate = string.Empty;

        if (culture == "en-US")
        {
            //format accordingly 
        }
        else if (culture == "en-IN")
        {
            //format accordingly 
        }

        return returnDate;
    } 
```

# jquery - jQuery中两个选择器的区别

> ID：16081018
> 
> 赞同：1
> 
> 时间：2013-04-18T10:53:59.753
> 
> 标签：jquery, html, selector

在 jQuery 中有一个选择器叫做`first-child`. 它从匹配的元素中选择第一个子元素。但是，`first-child`如果我使用`first-of-type`，它也可以正常工作。所以我只是想知道，有什么区别？

```
$(function(){
   //$('li :first-child').text('some text');
   $('li :first-of-type').text('some text');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T10:56:04.200

只需阅读文档（[`:first-of-type`](http://api.jquery.com/first-of-type-selector/)和[`:first-child`](http://api.jquery.com/first-child-selector/)）：

> **`:first-child`**
> 选择作为其父级的第一个子级的所有元素。
> 
> **`:first-of-type`**
> 选择所有具有相同元素名称的兄弟元素中的第一个元素。

选择`:first-of-type`器将匹配一组兄弟中给定名称（例如`span`，`a`等）的第一个元素。您的示例将匹配：

```
<li>
    <span>Matches this span</span>    <!-- First span amongst siblings -->
    <a>Matches this a</span>          <!-- First a amongst siblings -->
    <a>Doesn't match this one</span>  <!-- Second a amongst siblings -->
</li> 
```

选择`:first-child`器将简单地匹配父母的第一个孩子：

```
<li>
    <span>Matches this span</span>    <!-- First child of parent -->
    <a>Doesn't match this</span>      <!-- Second child of parent -->
    <a>Nor this</span>                <!-- Third child of parent -->
</li> 
```

# html - Indenting Labels and Checkboxes, with the checkbox outside the label and long labels

> ID：16081019
> 
> 赞同：1
> 
> 时间：2013-04-18T10:54:01.917
> 
> 标签：html, css

Unfortunately I'm stuck using an old program to generate forms, but I can fiddle with the CSS. The program generates the following html:

```
<input type="checkbox" name="_QStrategy_QV03_CV02" id="_Q2_C1" class="mrMultiple" style="" value="V02">
<label for="_Q2_C1">
<span class="mrMultipleText" style="">Defining the finance operating model to align with and support the execution of the organisation’s broader strategy. A finance operating model is a description of how an the finance function’s people, process and technology interacts internally and externally to deliver products and services.</span>
</label> 
```

The label long and wraps over to the next line, with the text on the next line directly under the checkbox. How can I make it so that the wrapped text is indented?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:04:10.707

具有指定宽度的浮动元素

```
label{float:left;width: 75%;}
input[type="checkbox"]{float:left;width:20px} 
```

见[小提琴](http://jsfiddle.net/anpsmn/q6xEY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:04:51.430

试试这个 CSS

```
.mrMultipleText
{
    width:75%;
    float:left;
}
.mrMultiple
{
    float:left;
} 
```

看到这个[小提琴](http://jsfiddle.net/9sx5S/1)

# c# - iis 7.5 中的 Asp.net 4.0 不会在 ssl 下加载页面。“Internet Explorer无法显示该网页”

> ID：16081020
> 
> 赞同：1
> 
> 时间：2013-04-18T10:54:04.340
> 
> 标签：c#, asp.net, internet-explorer, jquery

我们为客户开发了一个在线应用程序。该应用程序可以在 firefox、safari、chrome、ie9+ 和移动浏览器中顺利运行。该网页仅在 SSL 下公开可用。通过测试，很明显页面不会在 IE8 (windows xp) 中加载，只有在使用 SSL 时才会出现这种情况（在 http 中可以正常工作）。该应用程序使用 JQuery asp.net 4.0 开发并在 iis 7.5 上运行。给出的错误是“Internet Explorer 无法显示网页”。

我在试图修复它时完全不知所措？任何帮助将不胜感激。

该页面是[https://lip.specialistsoftwareservices.com](https://lip.specialistsoftwareservices.com)

# php - Changing number of row's and column's with 2 dropdowns in PHP

> ID：16081021
> 
> 赞同：0
> 
> 时间：2013-04-18T10:54:15.297
> 
> 标签：php, html, variables, html-select

First of all I would like to say that I am very new to PHP so maybe it is a stupid question, but there we go: I have a two dropdown select tags that have the following code in html and php:

```
 <select>
        <option value="default">---a---</option>
        <?php for($i=1; $i<+100; $i++) { ?>
                <option value="<?php $i ?>"><?php echo $i ?></option>
        <?php } ?>
     </select>

     <select>
        <option value="default">---b---</option>
        <?php for($j=1; $j<=100; $j++) { ?>
                <option value="<?php $j ?>"><?php echo $j ?></option>
        <?php } ?>
     </select> 
```

Then I have a table with a row and a column (well at least that has to be changed I mean):

```
 <table>
                <tr>
                    <th>Date</th>
                    <th>Temp</th>
                    <th>Nr a</th>
                    <th colspan="2">a 1</th>
                    <!--another th___nr a-->
                </tr>
                <tr>
                    <td colspan="3"> </td>
                    <th>something</th>
                    <th>else</th>
                    <!--another something else___nr a-->
                </tr>
                <tr>
                    <td>
                        <?php
                            //echo date(DATE_RFC822);
                            echo date('jS\, F\, Y');
                        ?>
                    </td>
                    <td>
                        <input type="number" name="temp" placeholder="temp" />
                    </td>
                    <th>b 1</th>
                    <td>
                        <input type="number" name="something" placeholder="something" />
                    </td>
                    <td>
                        <input type="number" name="else" placeholder="else" />
                    </td>
                    <!--another td___nr a-->
                </tr>
                <!--another tr___nr b-->
            </table> 
```

What I want to do is that with the first dropdown to control the number of a's (columns) and with the second dropdown the number of b's (rows). Is this possible with PHP and if it is, how?

I was thinking of somehow to memorize the number we choose in the dropdown into a variable and with some for's to resolve it, but I don't really know how to do it, IF it is possible.

Thank you very much in advance for your time for helping me :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:13:06.883

PHP 是一种服务器端语言，因此您必须将 (a) 和 (b) 输入发布回服务器，然后使用 PHP 构建可用于在页面上生成所需表格的相关数据

```
<form action="index.php" method="post">
    <!--put your select elements here-->
    <select name="columns"></select>
    <select name="rows"></select>
    <input type="submit" />
</form> 
```

然后在PHP文件的顶部类似

```
<?php
    // using terniary operator here - you can google that
    // basically ensures the vars are set to 1 if there is no post from the form
    $columns = (isset($_POST['columns'])) ? $_POST['columns'] : 1;
    $rows = (isset($_POST['rows'])) ? $_POST['rows'] : 1;
?> 
```

然后在你的桌子上

```
<table>
    <?php foreach ($rows as $row):?>
        <tr>
            <?php foreach ($columns as $column):?>
            <td></td>
            <?php endforeach;?>
        </tr>
    <?php endforeach;?>
</table> 
```

你可以像 Dieter 建议的那样使用 Ajax 来增强它，但是对于纯 PHP，你需要这样的东西。

不过，它是一个非常基本的示例，除了生成一个包含 X 列和 Y 行的空 HTML 表之外，还需要充实它来完成任何事情。

编辑：这是一个应该工作的完整文件。只需将此行下面的代码保存为 test.php 并尝试一下。然后你可以修改它以完全满足你的需要。
对不起，我也犯了一个小错误，我忘记将发布的数据转换为可以在 foreach 循环中使用的范围。下面更正了

```
<?php
// test.php

    // using terniary operator here - you can google that
    // basically ensures the vars are set to 1 if there is no post from the form
    $c = (isset($_POST['columns'])) ? $_POST['columns'] : 1;
    $r = (isset($_POST['rows'])) ? $_POST['rows'] : 1;

    $columns = range(1, $c);
    $rows = range(1, $r);

?>

<form action="test.php" method="post">
    <!--put your select elements here-->
    <select name="rows">
        <option value="default">---a---</option>
        <?php for($i=1; $i<+100; $i++) { ?>
                <option value="<?php echo $i ?>"><?php echo $i ?></option>
        <?php } ?>
     </select>

     <select name="columns">
        <option value="default">---b---</option>
        <?php for($j=1; $j<=100; $j++) { ?>
                <option value="<?php echo $j ?>"><?php echo $j ?></option>
        <?php } ?>
     </select>
    <input type="submit" />
</form>

<table>
    <tr>
        <?php foreach ($columns as $column):?>
        <th>Temp Head</th>
        <?php endforeach;?>
    </tr>
    <?php foreach ($rows as $row):?>
    <tr>
        <?php foreach ($columns as $column):?>
        <td>Temp Data</td>
        <?php endforeach;?>
    </tr>
    <?php endforeach;?>
</table> 
```

# sharedpreferences - Android - 无法访问 SharedPreferences 布尔值 - LogCat 中没有出现任何内容

> ID：16081022
> 
> 赞同：0
> 
> 时间：2013-04-18T10:54:16.250
> 
> 标签：sharedpreferences

我使用以下方法实现了一个共享首选项的实例：

起点：

```
SharedPreferences prefs=getPreferences(Context.MODE_PRIVATE);
        SharedPreferences.Editor editor=prefs.edit();
        editor.putBoolean("name",true);
        editor.putBoolean("cap",true);
        editor.putBoolean("code",true);
        editor.putBoolean("time",true);
        editor.putBoolean("ssid",true);
        editor.commit(); 
```

端点：

```
SharedPreferences prefs = getSharedPreferences(NDEF_PREF, Context.MODE_PRIVATE); 
            boolean name = prefs.getBoolean("name", true); 
            boolean cap= prefs.getBoolean("cap", true);
            boolean code = prefs.getBoolean("code", true);
            boolean time = prefs.getBoolean("time", true);
            boolean ssid = prefs.getBoolean("ssid", true); 
```

测试方法：

```
Boolean isTrue;
                isTrue = null; // valid
                isTrue = true; // valid
                isTrue = false; // valid
                if (isTrue == null) {
                    Log.d(TAG, "Working Boolean!!!"); 
```

和

```
Boolean isTrue;
            isTrue = null; // valid
            isTrue = true; // valid
            isTrue = false; // valid
            if (isTrue != null) {
                Log.d(TAG, "NON Working Boolean!!!"); 
```

结果：

使用任何一种方法在 LogCat 中都不会出现任何内容

问题：

我是否正确实施了一切？如果是这样 - 为什么我不能检查我的新共享首选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:50:40.680

我尝试了下面的代码并猜测它在 logcat "val if null" 中的显示

```
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

SharedPreferences pref = getPreferences(Context.MODE_PRIVATE);
SharedPreferences.Editor editor = pref.edit();
editor.putBoolean("name", true);

SharedPreferences prefs = getSharedPreferences("prefs",0);
// Boolean val=prefs.getBoolean("name1", true);
Boolean  val=null;
//Log.e("vaaa00", ""+val.toString());
if(val!= null)
   Log.e("val if ", ""+val);
else
   Log.e("val else", ""+val);        
} 
```

# node.js - save javascript objects with functions in mongodb

> ID：16081023
> 
> 赞同：1
> 
> 时间：2013-04-18T10:54:16.373
> 
> 标签：node.js, mongodb

I am trying to save a javascript object with functions,but facing an error. Here is the code:

```
var mongo = require('mongodb');
createObject = function(){
var data = {_id:1,"name":"object", 
   "fun":new mongo.Code("function fun() {print(1)}")};
   db.collection("objects").insert(data,function(err,result){   
    console.log(err);
    console.log(result);
   });
}

getObject = function(){
 var f = db.collection("objects").findOne();
 f.fun(); 
} 
```

And the error :

```
 throw err;
          ^
TypeError: Object #<Object> has no method 'fun' 
```

When I checked mongodb, it is saving "fun" function. But not executed when retrieved from mongo ?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:52:51.023

我还没有解决运行函数的问题，但我注意到代码中有一个错误，`getObject`应该看起来像

```
getObject = function(){
 db.collection("objects").findOne(function(err, f) {
   console.log(f);
   // f.fun(); 
 });
} 
```

您可以将函数提取为字符串，`eval`如果您真的需要它，也许可以使用它来运行它？我不知道（我还没有找到）更好的答案。

# android - Breaking a line without increasing text length

> ID：16081028
> 
> 赞同：4
> 
> 时间：2013-04-18T10:54:49.923
> 
> 标签：android, textview

I'm able to break a line using following code:

```
String str1 = "TEST1"; // length = 5
String str2 = "TEST2"; // length = 5

TextView textView = (TextView)findViewById( R.id.text_view );

textView.setText(str1 + '\n' + str2); 
```

But the final text length is equal to 11.

**Question:**

Is there any special character or method that will allow me to reach the same result inside my `TextView` without increasing text length?

**What I'm trying to achieve:**

I have a data format, which is stored in JSON. It looks like

```
[{type: line, params: {line params}}, {type: text, params: {text params}, ...] 
```

*   There is always *line* at the start

*   Each paragraph begins with *line* ( so it acts like a line separator which is stored at the beginning of line, not at the end )

*   Size of each *line* equals to 1, i.e. each *line* counts as a single character

*   Each paragraph ends with *text*'s last character ( not '\n' )

*   There are some *line* params ( like BulletList, Numeric list, Paragraph )

I need a strict mapping between my `TextView` and source data, i.e. for each cursor position in my `TextView` I need to count how many characters preceed it in source data.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:03:04.307

```
String str1 = "TEST1";
String str2 = "TEST2";

TextView text=(TextView)vi.findViewById(R.id.text);
text.setText(str1);
text.append(Html.fromHtml(< br>));
text.append(str2); 
```

希望它有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:18:04.007

取两个 TextView 并在另一个下方添加一个。然后你不会发现任何长度问题。

```
 like :   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView1" />
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:text="TextView2" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T11:05:25.120

对于你的问题，我的回答是否定的。但是您可以自己制作`TextView`并更改它计算文本长度的方式，例如在计算长度时忽略“/n”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T11:13:59.777

那么有一个棘手的方法

```
 String str1 = "TEST1"; // length = 5
        String str2 = "TEST2"; // length = 5

        textView = (TextView)findViewById( R.id.textView1 );
        textView.setWidth(120);
        textView.setTextSize(20);

        textView.setText(str1  + str2);

//textView.getText().toString().length()  length = 10 
```

**在 XML**

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="TextView" /> 
```

# sql - 根据另一个变量的值选择列？

> ID：16081030
> 
> 赞同：1
> 
> 时间：2013-04-18T10:54:55.133
> 
> 标签：sql, sql-server, select

假设我有这个代码：

```
DECLARE @IncludeDuplicateAddressIDs tinyint

-- Value of @IncludeDuplicateAddressIDs set here ! --

IF(@IncludeDuplicateAddressIDs = 1)
     SELECT AddressIds FROM RTS.ADDRESSES
ELSE
     SELECT DISTINCT(AddressIds) FROM RTS.ADDRESSES 
```

我可以将这两个`SELECT`语句合二为一吗？也就是说，只使用一个`SELECT`，我要么显示所有 AddressID，要么只显示一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:00:50.527

你可以这样做：

```
SELECT AddressIds FROM RTS.ADDRESSES WHERE @IncludeDuplicateAddressIDs = 1
UNION ALL
SELECT DISTINCT(AddressIds) FROM RTS.ADDRESSES WHERE @IncludeDuplicateAddressIDs <> 1 
```

由于`WHERE`子句是互斥的，只有一个`UNION`-ed 查询会返回一些行；另一个查询将不返回任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:49:12.840

如果表包含唯一列，那么您可以使用此选项（假设唯一列的名称为`Id`）：

```
DECLARE @IncludeDuplicateAddressIDs tinyint = 1
SELECT AddressIds
FROM RTS.ADDRESSES
GROUP BY CASE WHEN @IncludeDuplicateAddressIDs = 1 
              THEN Id ELSE AddressIds END, AddressIds 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/f8f3eb/6)上的演示[](http://sqlfiddle.com/#!3/f8f3eb/6)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:03:49.193

您可以使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)动态 sql 将查询形成为字符串（并根据需要设置任意数量的列），然后执行它：

```
DECLARE @IncludeDuplicateAddressIDs tinyint
DECLARE @Columns varchar(500);  

IF(@IncludeDuplicateAddressIDs = 1) SET @Columns='AddressIds'
ELSE SET @Columns='DISTINCT(AddressIds)'

EXECUTE sp_executesql N'SELECT ' + @Columns +  'AddressIds FROM RTS.ADDRESSES'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T10:57:51.843

您可以包括重复地址的数量。

```
SELECT AddressIDs, count(*) as cnt
FROM RTS.ADDRESSES
GROUP BY AdressIDs 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T11:09:11.587

试试这个——

```
DECLARE @IncludeDuplicateAddressIDs TINYINT 
SELECT @IncludeDuplicateAddressIDs = 0

SELECT t.AddressIds
FROM (
    SELECT 
          AddressIds
        , cnt = ROW_NUMBER() OVER (PARTITION BY AddressIds ORDER BY AddressIds)
    FROM RTS.ADDRESSES
) t
WHERE @IncludeDuplicateAddressIDs = 1
    OR (@IncludeDuplicateAddressIDs != 1 AND cnt = 1) 
```

在此查询中，未使用 UNION 或 DISTINCT 构造。因此，SQL 可以生成更高效的查询计划。**

# java - 如何在 JavaFX 中创建对话框

> ID：16081033
> 
> 赞同：0
> 
> 时间：2013-04-18T10:55:10.690
> 
> 标签：java, javafx-2, javafx

我测试了在 JavaFX 中创建简单的对话框，但由于某种原因代码不起作用：

```
MenuBar menuBar = new MenuBar();

        // File menu - new, save, exit
        Menu menu = new Menu("File");
        menu.getItems().add(new MenuItem("New"));
        menu.getItems().add(new MenuItem("Save"));
        menu.getItems().add(new SeparatorMenuItem());

        menuBar.getMenus().add(menu);

        // Options menu - Preferences
        Menu options = new Menu("Options");
        options.getItems().add(new MenuItem("Preferences"));

        menuBar.getMenus().add(options);

        // Help menu - About
        Menu help = new Menu("Help");
        MenuItem about = new MenuItem("Exit");

        about.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent e) {
                Stage dialogStage = new Stage();
                dialogStage.initModality(Modality.WINDOW_MODAL);
                dialogStage.setScene(new Scene(VBoxBuilder.create().
                        children(new Text("Hi"), new Button("Ok.")).
                        alignment(Pos.CENTER).padding(new Insets(5)).build()));
                dialogStage.show();
            }
        });

        menuBar.getMenus().add(help);

        menuBar.prefWidthProperty().bind(primaryStage.widthProperty());

        root.getChildren().add(menuBar);
        primaryStage.setScene(scene);
        primaryStage.show(); 
```

我希望在单击`About`菜单项时显示带有作者信息的简单对话框窗口。你能告诉我如何纠正我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T07:34:43.660

你可以试试我的自定义对话框。访问[FXDialog](https://bitbucket.org/tabs5894/fxdialog/)公共存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T14:42:14.730

我使用[http://sourceforge.jp/projects/jfxmessagebox/wiki/JfxMessageBox](http://sourceforge.jp/projects/jfxmessagebox/wiki/JfxMessageBox)作为我的消息框。我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T07:40:03.410

几天来，我也在寻找 FX 对话功能。在我尝试编写自己的复杂对话框之前，我遇到了“救世主”ControlsFX [这里] ( [http://fxexperience.com/](http://fxexperience.com/) )。它对我来说就像一个奇迹。但是，您必须升级到 JDK8 才能充分体验 ControlFX 在 FX8 上的奇妙之处。相信大家迟早都会用到JDK8。

幸运的是，我的原始代码在变得太复杂之前没有走得太远，以至于我无法进行这种转换。:)

希望这篇文章也能满足 5000 名 JAVAer 的需求。看看它是如何与以下示例代码一起工作的：

```
 Action response = Dialogs.create()
        .owner( null)
        .title("Confirmation")
        .masthead("Are you sure to delete UserLevel: '"+ul.getLevelname()+"' ?")
        .message(entry)
        .showConfirm();

    System.out.println("response: " + response);        

    if (response.toString().equals("YES")){
        if(!Main.db.em.getTransaction().isActive())
            Main.db.em.getTransaction().begin();

        Main.db.em.remove(ul);
        Main.db.em.getTransaction().commit();
        tbvMain.getItems().remove(tbvMain.getSelectionModel().getSelectedIndex());
    } 
```

# shell - 在期望 shell 中获取 sftp 错误值

> ID：16081045
> 
> 赞同：0
> 
> 时间：2013-04-18T10:56:00.723
> 
> 标签：shell, expect

我试图使用expect shell 做一个sftp。但我无法获取可能发生的不同 sftp 错误代码。相反，我得到的返回值为 0

这是代码片段和操作

```
"${sftp_prompt}" {

send "${command}\r"
    expect "${sftp_prompt}"

    # Close the sftp session
    send "bye\r"

expect eof

set details [wait]

puts "sftp exit status=[lindex $details 3]"

   }

} 
```

输出：

```
spawn sftp root@dsc-A

Connecting to dsc-A...

root@dsc-a's password:

sftp> get shiv.txt /var/log/nsn/pkiclient/Response_files/

Couldn't stat remote file: No such file or directory

File "/root/shiv.txt" not found.

sftp> bye

sftp exit status=0

SSH_ERROR_OK | Indicates successful completion of the operation 
```

期望的操作：我期望退出状态为 10，对应于

> sftp 错误 - SSH_ERROR_NO_SUCH_PATH | 文件路径不存在或无效。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T20:20:28.287

您的 sftp 会话正常退出，这就是您得到结果代码 0 的原因。您需要在期望块中捕获 sftp 错误。

```
set timeout 60
send "$command\r"
expect {
    timeout {
        puts "A timeout occured"
        exit 1 
    }

    #One of many errors 
    -re "Couldn't|Can't" {
        puts "Can not perform $command"
        exit 2 
    } 

    #Ok 
    "sftp>" {
        puts "$command completed successfully"
    }
} 
```

# excel - 在 Excel 2007 中，如何对命名范围中的多列进行 SUMIFS 索引？

> ID：16081057
> 
> 赞同：2
> 
> 时间：2013-04-18T10:56:34.743
> 
> 标签：excel, indices, named-ranges, sumifs

我正在分析与特定用户类别的贷款有关的图书馆统计数据。贷款数据形成命名范围 LoansToApril2013。Excel 2007 很高兴我在 SUMIF 中使用索引范围作为总和范围：

```
=SUMIF(INDEX(LoansToApril2013,0,3),10,INDEX(LoansToApril2013,0,4):INDEX(LoansToApril2013,0,6)) 
```

这里的 10 表示一个特定的用户类别，这是从三列向该组提供的贷款总和。通过“索引范围”，我指的是

```
INDEX(LoansToApril2013,0,4):INDEX(LoansToApril2013,0,6) 
```

sum_range 值。

但是，如果我切换到使用 SUMIFS 添加更多条件，如果使用索引范围，Excel 会返回 #VALUE 错误。它只接受一个索引。

```
=SUMIFS(INDEX(LoansToApril2013,0,4),INDEX(LoansToApril2013,0,3),1,INDEX(LoansToApril2013,0,1),"PTFBL") 
```

工作正常

```
=SUMIFS(INDEX(LoansToApril2013,0,4):INDEX(LoansToApril2013,0,6),INDEX(LoansToApril2013,0,3),1,INDEX(LoansToApril2013,0,1),"PTFBL") 
```

返回#value，我不知道为什么。

有趣的是，

```
=SUMIFS(INDEX(LoansToApril2013,0,4):INDEX(LoansToApril2013,0,4),INDEX(LoansToApril2013,0,3),1,INDEX(LoansToApril2013,0,1),"PTFBL") 
```

也被接受并返回与第一个具有单个索引的相同。

我找不到与此相关的任何文档或评论。有谁知道是否存在允许 SUMIFS 有条件地对三列中的索引值求和的替代结构？我宁愿不使用三个单独的公式并将它们加在一起，尽管这是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:37:22.303

该`sumifs`公式是根据数组公式建模的，并且比较中`sumifs`需要相同大小，最后一个模仿`LoansToApril2013`数组中的单个列`4:4`是第 4 列。

倒数第二个是 3 列宽，比较列是 1 列宽，导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:15:08.183

上面的两个答案和一些搜索让我找到了一个有效的公式。我会把它放在这里以供后代使用，因为没有最终结果的问题对未来的读者来说是一种痛苦。

```
=SUMPRODUCT( (INDEX(LoansToApril2013,0,3)=C4) * (INDEX(LoansToApril2013,0,1)="PTFBL") * INDEX(LoansToApril2013,0,4):INDEX(LoansToApril2013,0,6)) 
```

这将 LoansToApril2013 范围的第 4-6 列中的值加起来，其中第 3 列中的值等于 C4 中的值（也就是“这个公式左侧的单元格”）并且第 1 列中的值是“PTFBL ”。

尽管有外表，但它并没有将任何东西乘以其他任何东西。[我在此页面](http://www.consultdmw.com/excel-sumproduct-function.htm)上找到了解释，但基本上星号正在向函数添加标准。请注意，标准包含在自己的括号中，而范围不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T17:47:12.983

如果要使用名称范围，则需要对索引命令使用 INDIRECT。

我使用该公式检查两列中的条件，然后在一个包含 12 列月份的表中求和结果（该列由 1 到 12 [L4] 的辅助单元格选择）。

所以你可以这样做：

**部门（1 列名称范围 [C6]）= 销售 [D6]；地区（1列名称范围[C3]）=美国[D3]；12 列每月命名范围表 [E7] 中的 SUM 数字对于那些人/产品/行项目的 1 个单月 [L4]**

只需在您的报告页面上复制公式，该页面包含月份的 1-12 列，您就会获得包含 2 个条件的月度摘要报告。

**=SUMPRODUCT( (INDEX(INDIRECT($C$6),0,1)=$D$6) * (INDEX(INDIRECT($C$3),0,1)=$D$3) * INDEX(INDIRECT($E7) ,0,L$4))**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:32:16.570

`sumifs`不能这样做，但`sumproduct`可以

例子：

```
X 1 1 1
是 2 2 2
Z 3 3 3
```

从A1开始

公式`=SUMPRODUCT((A1:A3="X")*B1:D3)`给出答案`3`，并将`X`公式中的值更改为`Y`或`Z`将返回的值更改为适当的行总和。
请注意，如果您在该区域中有文本，这将不起作用 - 它会**返回**`#VALUE!`

如果你不能避免文本，那么你需要一个数组公式。使用相同的示例，公式将是`=SUM(IF(A1:A3="X",B1:D3))`，并且要将其作为数组公式输入，您需要使用`CTRL`++来输入公式 - 您应该注意到 excel 将**{ }**`SHIFT`放在公式周围。它将任何文本视为零，因此即使您在其中一个框中有文本，它也会成功地将找到的数字相加（例如，将示例中的一个更改为，总数将为 2 - 公式将将剩余的两个s 添加到该行中）`ENTER`**`1``blah``1`**

# inheritance - 在代码中继承 ASP.NET MVC 4 EF5 -> 获取类型

> ID：16081060
> 
> 赞同：0
> 
> 时间：2013-04-18T10:56:46.223
> 
> 标签：inheritance, asp.net-mvc-4, ef-code-first, views, entity-framework-5

这可能很简单，但无法弄清楚。假设我有一个“项目”模型，并且从该模型继承的模型是“DVD”、“CD”、“游戏”，例如，我希望能够进入项目的索引视图并获取项目的类型这是。显然 GetType() 是行不通的。无论如何我可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:52:14.793

> 你`Type`是你的歧视者。

请参阅我之前的这篇文章 -[实体框架 5 - 派生类的基于枚举的鉴别器](https://stackoverflow.com/questions/15859452/entity-framework-5-enum-based-discriminator-for-derived-classes/15864906#15864906)

您可以使用`is`运算符来测试类型。

或者让你的财产 - 如果你真的想这样做（但我从来没有需要）......

```
public class Item
{
    [NotMapped()]
    public virtual MyEnum MyEnum { get { return MyEnum.Item; } }
}

public class DVD: Item
{
    [NotMapped()]
    public override MyEnum MyEnum { get { return MyEnum.DVD; } }
}

public class CD: Item
{
    [NotMapped()]
    public override MyEnum MyEnum { get { return MyEnum.CD; } }
} 
```

但我总是这样做`if(item is DVD)`

或者，`.GetType().Name`如果那是你真正想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:13:19.890

GetType() 不起作用吗？

我假设您从控制器传递到视图的模型是 DVD、CD 或游戏，但视图中声明的模型是 Item？

在这个小程序（LinqPad - Yay）中，输出是“这是一张 CD”。这不是你想要的吗？

```
void Main()
{
    Item cd = new CD();
    Type modelType = cd.GetType();
    if(modelType == typeof(CD)){Console.WriteLine("this is a CD");}
}

public class Item{}

public class CD: Item{} 
```

警告：我没有在视图中对此进行测试，因为 VS2012 更新 2 刚刚杀死了 VS（无响应）。哼哼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:21:47.177

对的每个人，显然很容易在你想要的任何地方，只要写：

```
@Html.DisplayTextFor(modelItem => item.GetType().Name) 
```

# c# - jquery $.ajaxSetup() 处理 ajax 错误

> ID：16081063
> 
> 赞同：0
> 
> 时间：2013-04-18T10:56:49.963
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-4, razor

我想在发生错误但不是（403、500 或 410 代码）时添加（默认）操作：

```
 $.ajaxSetup({
        statusCode: {
            403: function () {
                window.location = '@Url.Action("LogOn", "Account", new {area = "", msg = "forbidden", returnUrl = HttpContext.Current.Request.RawUrl})' + window.location.hash;
            },
            500: function() {
                window.location = '@Url.Action("AccessDenied", "Error")';
            },
            410: function() {
                window.location = '@Url.Action("Deleted", "Error")';
            }
            // ANY OTHER ERROR CODE - but it doesn't work, how can i do it?
            if not any above and it's an error then =>
            window.location = '@Url.Action("Index", "Error")';
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:02:38.777

您应该[`ajaxError()`](http://api.jquery.com/ajaxError/)用来处理错误**而不是** `ajaxSetup()`：

```
$(document).ajaxError(function(event, xhr, options) {
     switch (xhr.status)
     {
        case 403:
            window.location = '@Url.Action("LogOn", "Account", new {area = "", msg = "forbidden", returnUrl = HttpContext.Current.Request.RawUrl})' + window.location.hash;
        break;
        case 500:
            window.location = '@Url.Action("AccessDenied", "Error")';
        break;
        case 410:
            window.location = '@Url.Action("Deleted", "Error")';
        break;
        default:
            window.location = '@Url.Action("Index", "Error")';
        break;
     }
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:58:16.057

“完成”事件总是被触发。

```
complete: function(jqXHR, textStatus) {
    switch (jqXHR.status) {
        case 200:
            alert("error 200");
            break;
        case 404:
            alert("error 404");
            break;
        default:
            alert("DEFAULT");
    }
} 
```

# java - Spring MVC or some other frameworks to support .jsp extension in URL

> ID：16081066
> 
> 赞同：2
> 
> 时间：2013-04-18T10:57:01.400
> 
> 标签：java, url, spring-mvc, web, mapping

I am supposed to redesign a web application that was originally created in JSP. However, I have two important requirements that this application should meet.

1.  This new web application shall be able to keep its existing direct URL structure, that looks like this: [http://existingurl.org/appname/file.jsp?id=0000000000001&optionalParams=something](http://existingurl.org/appname/file.jsp?id=0000000000001&optionalParams=something)
2.  It shall Support Javascript and AJAX (But I think that this one is not really a problem nowadays)

My first choice was spring MVC due to its popularity, but as far as I know the URL structure in Spring MVC would not support the *file**.jsp*** part of the URL. In Spring the URL would look like this: [http://existingurl.org/appname/file/id/0000000000001?optionalParams=something](http://existingurl.org/appname/file/id/0000000000001?optionalParams=something) because it tends to hide the extension.

Is there any way to support this `direct URL` from my first requirement with Spring MVC? Or would you recommend me any other framework?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:02:28.213

Spring mvc 绝对会让你保留你的映射。您可以按照自己的喜好进行映射！

# search - Spotify Metadata API: Search By Artist

> ID：16081068
> 
> 赞同：3
> 
> 时间：2013-04-18T10:57:06.650
> 
> 标签：search, metadata, spotify

The original plan was to write this as a blog post, entitled "Inefficiencies in the Spotify Metadata API : Or, How the Jackson 5 killed my Browser", but changed my mind at the last minute as I have a habit of missing the obvious in documentation,perhaps an undocumented feature might exist which I have missed, or someone else has solved the issue - so hence this question has a certain blog-post tone about it!

I am developing a small web-app, mostly for a small group of people, which will allow anyone to update a Spotify playlist. As not everyone has Spotify (though I don't know why!), the page will update a database with songs, as App running in Spotify on my laptop polls the database for updates, then using the Spotify Apps API, the playlist is updated, and anyone subscribing to the playlist gets the update. This is ok, though I would like to use push rather than poll, but that's a topic for another day.

I searched around for a Javascript library to use with the Spotify Metadata API, and found one ([https://github.com/palmerj3/SpotifyJS](https://github.com/palmerj3/SpotifyJS)) though it was basically a wrapper and still required you to parse the JSON yourself. Thinking I could go one better and put some basic parsing in for the most common fields (title, artist, album, Spotify URI) I started working on my own library/JQuery plugin.

Search by track is not a problem, it's a single call to the spotify metadata API, the results are easily parsed, matching the returned artist with the requested artist (if present) makes for an easy search by title/artist.

Search by Artist (obtain a list of all songs by a particular artist) though, appears to be a pain-in-the-****! As best as I can tell from the docs, this is the process.

1.  Search for the artist: this will return a list of artists which match the query
2.  For each artist, lookup their albums: this will return a list albums
3.  Lookup each album and retrieve a track list
4.  Compare the artist for each track with the search artist, if it matches output

The first step will return a small list of artist matches, Foo Fighters has 2, Silverchair 1, and The Jackson 5 has 4\. This small list turns into a larger number of album matches - from memory Foo Fighters returned 112, which then turns into even larger number of track lists. From a Javascript/JQuery perspective, this leads to daisy-chained AJAX request, for each step, and at each step massive numbers of, nearly concurrent GET requests against the Spotify servers.

The initial version I wrote cheated and used synchronous AJAX, and worked ok, as each request must complete before the next would start, though, this would lock the browser up for some time, and removed the possibility of using feedback to the user that the system was running. I then switched to asynchronous requests and all hell broke loose! You immediately hit issues with rate limiting on the Spotify end, which returns resoponses with 502 bad gateway (not listed in the spotify docs as a status by the way), or 503 - both of which JQuery interpreted as status code 0 - which was interesting, requiring debugging in Firebug. I throttled the requests down on the client side, I found that 1 every second was about right, to avoid rate limiting and ensure I got a response containing data each time, however, this then causes massive lock ups in the browser as it had upwards of 30 or 40 GET requests in parallel, all returning pretty much at the same time (though some requests responded after 15+ seconds!) and then parsing all the JSON responses.

I looked into alleviating the load by using a server-side approach, though this has downsides as well: 1\. you don't avoid the basic issue in that the API can not handle the task in an efficient manner 2\. for a busy site, the bandwidth usage will be against the server, which will also present a single IP, for multiple users you will soon hit the rate limit due to parallel users

The server side does offer caching though which could be beneficial, to this end I found a PHP Library - metatune ([https://github.com/mikaelbr/metatune](https://github.com/mikaelbr/metatune)) advertised as the "The ultimate PHP Wrapper for the Spotify Metadata API", but unfortunately only offers the same basic lookup/search as the Spotify Metadata API - i.e.: no listing of all songs by an artist.

Thus, I have now disabled searching by artist, until I find a suitable solution.

Assuming I have not missed anything, it seems, to me at least, to not be an efficient API design, as it encourages you to make large numbers of requests to the Spotify servers, which is not good for me as a client, and not good for Spotify as a server. I can't help but think that if there was a request such as:

ws.spotify.com/search/1/artist.json?q=foo+fighters&extras=tracks

then the issues discussed here would be alleviated, a single request would cover what requires 3 sets of multiple requests currently; rate limiting wouldn't be as big an issue; the overheads to process the data on the client are greatly reduced; the overheads for Spotify to handle would be reduced and the entire service would be more efficient. The fact that the request would return a very large data set is not an issue, as the API already splits data into "pages".

So, my questions to the crowd: 1\. Have I missed something obvious in the documentation, or is there a secret request? 2\. In the absence of an API request, does anyone have a suggestion on how to make my system more efficient? 3\. Has anyone solved this issue before?

Thanks for reading! Took a long time to get to the questions, but I felt it necessary to provide as much reasoning to find the best solution, and also, it illustrates the deficiency in the API, which I hope someone from Spotify will notice!

Finally as an aside, projects like this make me feel like we've swapped Flash for Javascript but the performance is still as bad! Anyone else feel the same?

Cheers! sockThief

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:06:18.820

除非我遗漏了什么，否则这是否符合您的要求？

```
http://ws.spotify.com/search/1/track.json?q=artist:foo+fighters 
```

`artist:`前缀告诉搜索服务只匹配艺术家。[您可以在此处](http://web.archive.org/web/20120704131650/http://www.spotify.com/us/about/features/advanced-search-syntax/)阅读有关高级搜索语法（也适用于客户端）的更多信息。

# c# - How to query based on properties of a model?

> ID：16081070
> 
> 赞同：1
> 
> 时间：2013-04-18T10:57:15.840
> 
> 标签：c#, linq, entity-framework-4.3

For sake of brevity, assume I have a model named Participants like

```
public class Participant()
{
   public int? ID {get; set;}
   public string Name {get; set;}
   public DateTime JoinDate {get; set;}
   public string Address1 {get; set;}
   public string City {get; set;}
   public string County {get; set;}
}

public IList<Participant> SearchParticipants(Participant objParticipant)
{
   using (Db.Context())
   {
        //HOW CAN I ACHEIVE THIS? USING EF
        //WARNING PSEUDO-CODE / MAGIC FUNCTION (SearchMatches) BELOW

        return Db.Entities<Participant>().SearchMatches(objParticipant);
   }
} 
```

Basically, I do not want to construct multiple `.where(k => k.PropertyName)` queries. I think certain PHP MVC frameworks have this, pass an object with certain properties filled in and one gets a array (in our case IList) of matching results from the DB.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:25:52.523

您可以结合使用反射、循环遍历属性和[动态 linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)来构建 where 谓词来执行此操作。

下面是一个简单的例子作为起点/概念证明。

目前它`null`用作指示我们不想要 where 子句的值，但如果您有一个值类型属性 (like `int`)，那么您可以添加一个属性 like`[FilterIgnore]`或其他东西，并在您遍历属性时检查它。

创建一个新的控制台应用程序并用它替换 program.cs，然后将示例中的动态 linq 文件添加到项目中：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Dynamic;

class MyObject
{
    // Some properties
    public string PropertyA { get; set; }
    public string PropertyB { get; set; }
    public DateTime? PropertyC { get; set; }

    static void Main(string[] args)
    {
        // Our repository
        var list = new List<MyObject>() {
                new MyObject() { PropertyA = "test"} ,
                new MyObject() { PropertyB = "test"} ,
                new MyObject() { PropertyC = DateTime.Today} ,
                new MyObject() { PropertyC = DateTime.Today,
                                 PropertyA = "test"} 
            };

        // Loop through the filtered results
        // (calling our GetByExample method with a
        // new object with a property set)
        foreach (var obj in 
                 GetByExample(list,
                              new MyObject() { PropertyC = DateTime.Today }))
        {
            // Write some output so we can see it working
            Console.WriteLine("Found object");
            Console.WriteLine(obj.PropertyA);
            Console.WriteLine(obj.PropertyB);
            Console.WriteLine(obj.PropertyC);
        }

        // Wait for the user to press a key before we close
        Console.ReadKey();
    }

    static IQueryable<MyObject> GetByExample(List<MyObject> objects,
                                             MyObject filterObj)
    {
        // Create our query variable that we'll add to
        var filteredObjects = objects.AsQueryable();

        // Loop through each property on this object
        foreach (var prop in filterObj.GetType().GetProperties())
        {
            // Get the value of this property
            var propVal = prop.GetValue(filterObj, null);

            if (propVal != null)
            {
                // If the property isn't null add a where clause
                filteredObjects =
                    filteredObjects.Where(string.Format("{0} = @0",
                                                        prop.Name),
                                          propVal);
            }
        }

        return filteredObjects;
    }
} 
```

# android - 在 Facebook 上登录：应用程序配置错误

> ID：16081074
> 
> 赞同：1
> 
> 时间：2013-04-18T10:57:29.960
> 
> 标签：android, facebook, facebook-graph-api

我尝试编写一个可以登录 facebook 的应用程序。我使用 easyfacebooksdk.jar 之类的库来使用您的 API，但配置有问题。我发布了以下图片：这是我创建的 Facebook 应用程序：

![在此处输入图像描述](https://i.stack.imgur.com/sCABl.png)

我已经从控制台以这种方式获得了密钥哈希：

![在此处输入图像描述](https://i.stack.imgur.com/KCKko.png)

我把这段代码放在 key has 字段中（我不能发布图片，因为我没有 10 名声）

**这是我的代码：**

```
public class MainActivity extends Activity   implements LoginListener {

    private FBLoginManager fbManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            shareFacebook();
    }

    public void shareFacebook() {

    //change the permissions according to the function you want to use 
            String permissions[] = { "read_stream", "user_relationship_details",
                            "user_religion_politics", "user_work_history",
                            "user_relationships", "user_interests", "user_likes",
                            "user_location", "user_hometown", "user_education_history",
                            "user_activities", "offline_access" };

            //change the parameters with those of your application
            fbManager = new FBLoginManager(this, R.layout.activity_main,
                            "334014040053829", permissions);

            if (fbManager.existsSavedFacebook()) {
                    fbManager.loadFacebook();
            } else {

                    fbManager.login();
            }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            fbManager.loginSuccess(data);
    }

    public void loginFail() {
            fbManager.displayToast("Login failed!");

    }

    public void logoutSuccess() {
            fbManager.displayToast("Logout success!");
    }

    public void loginSuccess(Facebook facebook) {

            //library use example
            GraphApi graphApi = new GraphApi(facebook);

            User user = new User();
            try {
                    user = graphApi.getMyAccountInfo();
                    graphApi.setStatus("Post by app");
            } catch (EasyFacebookError e) {
                    e.toString();
            }

    }
} 
```

我在模拟器中收到此错误：app is misconfigured to facebook log in 但我不明白为什么...有人可以帮我吗？

# selenium - 无法使用 selenium WebDriver 执行拖放

> ID：16081075
> 
> 赞同：0
> 
> 时间：2013-04-18T10:57:32.433
> 
> 标签：selenium, drag-and-drop, webdriver, selenium-webdriver

我正在尝试执行 dragAndDrop 功能。`dragAndDrop`我也试过了`clickAndHold`。我可以将对象拖到目的地，但之后对象又回到了源位置。当我尝试将`clickAndHold`对象拖到目标位置时，当我释放`clickAndHold`对象时，它又回到了旧的源位置。我也尝试了下面的代码。

```
builder.clickAndHold(source).moveToElement(destination).release(destination).build().perform();

builder.dragAndDrop(source, destination).build().perform(); 
```

我该如何处理这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:32:39.840

我有同样的问题。为了给一个好的节目，我这样做：

```
builder.clickAndHold(source).build().perform();
for(int i=0;i<size;i++) {
    builder.moveToElement(source,xoffset*i,yoffset).build().perform();//builder.moveToElement(destination,xoffset,yoffset*i).build().perform();
}
builder.release(target).build.perform(); 
```

希望能帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-25T09:13:12.700

我也遇到了拖放问题。有时工作但大部分都失败了。您可以使用以下语法：

```
Actions builder = new Actions(driver);
Action dragAndDrop = builder.clickAndHold(source).moveToElement(destination).release(hiddenplatform).build();
dragAndDrop.perform(); 
```

但这里有一个问题。你看我们必须在隐藏平台上发布。当我们将 xpath 带到目的地时；我们扩展我们找到一个**id**。`value=hidden`

获取该 id 并创建一个 WebElement 并在该平台上发布。现在对我来说绝对没问题。:)

# sql - SQL - 相同的表不同的where子句

> ID：16081080
> 
> 赞同：1
> 
> 时间：2013-04-18T10:57:46.937
> 
> 标签：sql, union

我是 sql 新手，正在尝试执行以下操作：

我的查询当前基于 where 子句拉回两个字段：

```
select distinct 
     count(distinct t1.p_id) "c1",
     count(distinct t2.sa_id) "c2" 
from capd_section t5, 
     capd_department t6,
     capd_person t1,
     capd_studentapplication t2,
     capd_module t4,
     capd_moduleapplication t3 
where (t3.ma_studentapplication(+)=t2.sa_id) and 
      (t3.ma_module=t4.m_id(+)) and 
      (t4.m_modulesection=t5.s_id(+)) and 
      (t4.m_moduledept=t6.d_id(+)) and 
      (t4.m_reference not like '%%FTA%%') and 
      **(t2.sa_reference like '212%%')** and 
      (t4.m_reference not like '%%HE%%') and 
      (t4.m_reference not like '%%PT%%') and 
      (t4.m_name not like 'NCTJ%%') and 
      (t4.m_reference not like 'ME%%') and 
      (t2.sa_student=t1.p_id) 
having (count(distinct t3.ma_id)>0) 
```

我想要相同的查询，但也需要使用 where 子句**（t2.sa_reference like '213%%'）**。（当年和上一年）

所以总共四个字段（c1，c2，c3，c4）。如果这有任何意义的话。甚至可能吗？

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:02:48.443

您可以简单地添加一个 or 语句来检查第二个值并尝试您的查询：

```
select distinct 
     count(distinct t1.p_id) "c1",
     count(distinct t2.sa_id) "c2" 
from capd_section t5, 
     capd_department t6,
     capd_person t1,
     capd_studentapplication t2,
     capd_module t4,
     capd_moduleapplication t3 
where (t3.ma_studentapplication(+)=t2.sa_id) and 
      (t3.ma_module=t4.m_id(+)) and 
      (t4.m_modulesection=t5.s_id(+)) and 
      (t4.m_moduledept=t6.d_id(+)) and 
      (t4.m_reference not like '%%FTA%%') and 
      ((t2.sa_reference like '212%%')or (t2.sa_reference like '213%%')) and 
      (t4.m_reference not like '%%HE%%') and 
      (t4.m_reference not like '%%PT%%') and 
      (t4.m_name not like 'NCTJ%%') and 
      (t4.m_reference not like 'ME%%') and 
      (t2.sa_student=t1.p_id) 
having (count(distinct t3.ma_id)>0); 
```

在这里，我修改了您的条件，使用 as 子句检查这两个值`((t2.sa_reference like '212%%')or (t2.sa_reference like '213%%'))`。因此，如果满足任一条件，您就可以检索行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:08:35.167

只需在 COUNT 语句中使用 CASE：

```
select distinct 
     count(distinct t1.p_id) "c1",
     count(distinct t2.sa_id) "c2",
     count(distinct case when t2.sa_reference like '212%%' then t1.p_id else null end) "c3",
     count(distinct case when t2.sa_reference like '212%%' then t2.sa_id else null end) "c4"

from capd_section t5, 
     capd_department t6,
     capd_person t1,
     capd_studentapplication t2,
     capd_module t4,
     capd_moduleapplication t3 
where (t3.ma_studentapplication(+)=t2.sa_id) and 
      (t3.ma_module=t4.m_id(+)) and 
      (t4.m_modulesection=t5.s_id(+)) and 
      (t4.m_moduledept=t6.d_id(+)) and 
      (t4.m_reference not like '%%FTA%%') and 
      (t4.m_reference not like '%%HE%%') and 
      (t4.m_reference not like '%%PT%%') and 
      (t4.m_name not like 'NCTJ%%') and 
      (t4.m_reference not like 'ME%%') and 
      (t2.sa_student=t1.p_id) 
having (count(distinct t3.ma_id)>0) 
```

# javascript - IE10 - 避免在 javascript 的全局范围内使用表单名称

> ID：16081081
> 
> 赞同：1
> 
> 时间：2013-04-18T10:57:48.613
> 
> 标签：javascript, html, internet-explorer, internet-explorer-10

我有一个带有搜索框的 Web 应用程序和一个 onKeypress 事件调用`Query.keyPress()`。查询在包含的 javascript 文件中定义。大多数情况下，这可以正常工作。

在某些屏幕上的 IE10 上，尝试使用搜索框会出现错误：

```
Error: Object doesn't support property or method 'keyPress' 
```

我发现一些屏幕有一个查询表单，其名称和 ID 为“查询”。在 IE10 中，这似乎出现在全局范围内，并覆盖了 javascript 中的对象文字。有关信息，搜索框不在此表单内。

我已经用 onKeypress 代码替换了`alert(Query);`，我看到`[object HTMLFormElement]`它确认了正在发生的事情。

有谁知道如何阻止这种情况在 IE10 上发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:57:28.040

这个问题可以通过使用你自己的命名空间来解决，而不是一次又一次地污染全局作用域。

```
var MY_STUFF = {};

MY_STUFF.Query = function () {};
MY_STUFF.MY_CONST = 4;
MY_STUFF.utilityFunction = function () {}; 
```

...这样，如果您添加一个名为 的表单元素，一切都会中断`MY_STUFF`，但如果您添加名为 的表单元素，它不会中断`Query`，`MY_CONST`或者`utilityFunction`（不是最好的名称，但您明白了要点）。

就像我说的，它*不能解决*问题，但会否定它。污染全局范围也是一种不好的做法。

* * *

当然，您可以通过闭包完全不使用全局变量。但这可能需要大量的重组，如果您的应用程序分布在多个文件中，并且没有适当的构建过程来组合您的文件。

```
(function () {
    var Query = function () {};

    // Query.keyPress() as much as you want!
}());

// Note you can't use it outside of the closure. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:49:22.287

可能，这应该工作。声明变量 Query 时，在它之前提供一个 var 关键字。

```
var Query = new Object (); //right practice

Query = new Object (); //wrong practice 
```

# c# - R#：停止在代码清理上触及 ghostdoc XML 注释？

> ID：16081082
> 
> 赞同：3
> 
> 时间：2013-04-18T10:57:50.223
> 
> 标签：c#, resharper, stylecop, ghostdoc

我正在使用 GhostDoc 创建我的 XML 注释，我对这种格式非常满意。我使用以下格式（c#）

```
 /// <summary>
    /// Creates new client.
    /// </summary>
    /// <param name="uri">The URI.</param>
    /// <param name="param">The param.</param>
    /// <returns></returns> 
```

使用 R# 7.1.1 中的代码清理，它会重新格式化我的 xml 注释，它甚至会在缺失的地方插入新的 xml 注释，这真的很烦人。有没有办法阻止这种情况。

我已经为代码清理创建了自己的配置文件并禁用了所有内容（甚至是 stylecop 设置），我进行了代码清理，果然它想重新格式化我的 xml 注释并将新的注释放在它们丢失的地方..

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:40:03.567

很可能您做错了什么，或者您在 ReSharper 或 StyleCop 中遇到了错误。你应该：

1.  尝试完全禁用 StyleCop。
2.  仔细检查您是否禁用了 C# | 在您的自定义配置文件中重新格式化嵌入的 XML 文档注释。
3.  在调用代码清理时，请仔细检查您是否确实选择了此自定义配置文件。
4.  创建一个可以重现问题的示例解决方案并联系 ReSharper 支持。请参阅[http://www.jetbrains.com/support/resharper/](http://www.jetbrains.com/support/resharper/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T01:13:19.077

我遇到了类似的问题。我使用 GhostDoc 和 R# Code Cleanup 一直在转动这个

```
/// <summary>
/// Defines the entry point of the application.
/// </summary>
/// <param name="args">The arguments.</param> 
```

进入这个

```
/// <summary>
/// Defines the entry point of the application.
/// </summary>
/// <param name="args">
/// The arguments.
/// </param> 
```

这很令人生气，因为我`Reformat embedded XML doc comments`取消了选择。我终于在`ReSharper->Options->Code Cleanup->StyleCop->1611: Element Parameters Must Be Documented.`我取消选中时发现了有问题的设置，它停止搞砸我的格式。

您应该能够对自己的问题采用类似的方法，用您的问题替换“参数”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T01:46:12.907

作为另一种选择，

在 Resharper > 选项 > 工具 > StyleCop > 标题下

选择“使用单行声明标题”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T14:54:14.763

RESHARPER > 选项 > StyleCop

关闭**标题 > 将文本插入文档和文件标题**

# sql - 删除 Treasure-data/hadoop 中的查询？

> ID：16081084
> 
> 赞同：1
> 
> 时间：2013-04-18T10:57:58.560
> 
> 标签：sql, hadoop, hive, bigdata

我尝试编写一个查询来删除宝藏数据中的一些行，但服务器忽略了它。我缺少解决此问题的文档。

这是日志：

```
 Use 'td job:show 2485728' to show the status.
queued...
  started at 2013-04-18T10:22:32Z
  Hive history file=/mnt/hive/tmp/2073/hive_job_log__336863980.txt
  finished at 2013-04-18T10:22:39Z
  Ignored "delete from mytable where time < unix_timestamp() - 30*60*60*24" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:57:32.330

抱歉，HIVE 中没有删除语句。一种可能的技巧是重写表格：

```
INSERT OVERWRITE TABLE mytable
SELECT * FROM mytable
WHERE time >= unix_timestamp() - 30*60*60*24 
```

# yii - CGridView 过滤器 ajax 更新没有发生

> ID：16081090
> 
> 赞同：0
> 
> 时间：2013-04-18T10:58:22.243
> 
> 标签：yii

我使用 CGridView 来显示记录。过滤器在我的应用程序中无法正常工作。不是 Ajax 更新，而是重新加载整个页面。我想使用 ajax 调用过滤记录。这是我的代码。

```
$this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'mage-grid',
        'dataProvider'=>$model->search(),
        'filter'=>$model,
        'ajaxUpdate'=>true, 
        'columns'=>array(
                'entity_id',
                'name',
                'sku',
                'type_id',
                'price',
                //'status',
                array(
                    'name'=>'status',
                    'header'=>'Status',
                    'filter'=>array('1'=>'Enabled','2'=>'Disabled'),
                    'value'=>'($data->status=="1")?("Enabled"):("Disabled")'
                ),

                array(
            'class'=>'CButtonColumn',
                        'template' => '{update}{delete}',
                   //   'viewButtonUrl'=>'Yii::app()->controller->createUrl("/ad/view",array("id"=>$data["id"]))',
                        'buttons' =>array(
                            'update' => array(
                                'url'=>'Yii::app()->controller->createUrl("/mageproduct/update",array("pid"=>$data["entity_id"],"sid"=>SHOP_ID))',
                                'imageUrl'=>Yii::app()->request->baseUrl.'/images/icons/dark/create_write.png',
                            ),
                            'delete' => array(
                                'url'=>'Yii::app()->controller->createUrl("/mageproduct/delete",array("pid"=>$data["entity_id"],"sid"=>SHOP_ID))',                        
                                'imageUrl'=>Yii::app()->request->baseUrl.'/images/icons/dark/trashcan.png', 
                             // 'deleteConfirmation' => 'Delete?',
                            )
                        ),

                    ),

        ), 
```

这是我的控制器动作

```
public function actionAdmin()
    {
        $model=new Mageproduct('search'); 
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['Mageproduct']))
            $model->attributes=$_GET['Mageproduct'];

        $this->render('admin' ,array(
                        'model' =>$model,
                ));
    } 
```

注意：我使用 CArrayDataProvider。

# internet-explorer - IE 中的 CSS3 渐变

> ID：16081092
> 
> 赞同：0
> 
> 时间：2013-04-18T10:58:49.150
> 
> 标签：internet-explorer, css

我有这个渐变：

```
background: #ffa13e; /* fallback */
background: -webkit-linear-gradient(135deg, transparent 10px, #ff7805 10px, #ffa13e 100%);
background: -moz-linear-gradient(135deg, transparent 10px, #ff7805 10px, #ffa13e 100%);
background: -o-linear-gradient(135deg, transparent 10px, #ff7805 10px, #ffa13e 100%);
background: linear-gradient(315deg, transparent 10px, #ff7805 10px, #ffa13e 100%); 
```

IE过滤器真的可以支持这种类型的渐变吗？如果是这样，我将如何实现它以便它在 IE 8 9 中工作？7不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:03:42.497

还有一个很棒的工具可以在 IE 支持下生成完美的渐变。使用这个[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

**[这](http://jsfiddle.net/KwdwZ/1/)**是适用于 IE 的颜色组合的演示

```
div{
    width:300px;
    height:400px;
    background: #ff7805; /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIxJSIgc3RvcC1jb2xvcj0iI2ZmNzgwNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmExM2UiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  #ff7805 1%, #ffa13e 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(1%,#ff7805), color-stop(100%,#ffa13e)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ff7805 1%,#ffa13e 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ff7805 1%,#ffa13e 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ff7805 1%,#ffa13e 100%); /* IE10+ */
background: linear-gradient(to bottom,  #ff7805 1%,#ffa13e 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff7805', endColorstr='#ffa13e',GradientType=0 ); /* IE6-8 */

} 
```

使用**CSS PIE**的另一种选择。**[您可以在此链接](http://userinterfacehome.blogspot.in/2012/10/css3-rounded-corners-for-ie-6-7-8.html)**中找到 PIE 的详细说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:11:08.570

IE10 标准支持 CSS3 渐变。

对于所有其他版本的 IE (6-9)，我建议使用[CSS3Pie](http://css3pie.com)来填充浏览器以添加对 CSS3 渐变的支持。

可以使用 IE 的专有`filter`样式来做渐变，但实际上不值得——语法很笨拙，并且有一些讨厌的怪癖和错误（例如，它`border-radius`在 IE9 中中断）。

CSS3Pie 使用 VML 进行渐变，这意味着您可以避免使用 via 进行的所有错误`filter`，并且它允许您使用标准 CSS 语法而不是可怕的`filter`语法。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:16:14.087

尝试使用这个

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

我觉得非常有用！

# javascript - 随机化时不选择现有选择

> ID：16081095
> 
> 赞同：2
> 
> 时间：2013-04-18T10:59:03.410
> 
> 标签：javascript, jquery

我创建了一个气泡，显示我存储在列表中的引号。当我单击气泡时，它会随机从列表中选择另一个引用，但有时会选择它已经显示的引用。我将如何防止它这样做？

```
<ul class="joke-list">
    <li id="quotes">
        <span style="color: rgb(0, 0, 0);"><span style="font-size: medium;">Charles Darwin wanted to be a doctor but did not like the sight of blood.</span></span></li>
    <li id="quotes">
        <span style="color: rgb(0, 0, 0);"><span style="font-size: medium;">Charles Darwin was a member of the Gourmet Club. He ate lots of animals including armadillos, owls and tigers.</span></span></li>
    <li id="quotes">
        <span style="color: rgb(0, 0, 0);"><span style="font-size: medium;">For his 25th Birthday, Charles Darwin had a mountain named after him in Zimbabwe. </span></span></li>
</ul> 
```

小提琴：http: [//jsfiddle.net/FsjkM/236/](http://jsfiddle.net/FsjkM/236/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:09:35.753

这应该解决它

```
$.fn.extend({

   rnditem : function(l) {
        var current = $(this).text(),
            next = (l.eq(Math.floor(Math.random() * l.length)).text());

       while (next === current) {
           next = (l.eq(Math.floor(Math.random() * l.length)).text());
       }

$(this).text(next);

      return this;
   }
 });

$(document).ready(function () {

   var list = $(".joke-list").find("#quotes");

$(document.body).on('click','.speech', function () {

$(this).rnditem(list);
   });

$(".speech").trigger("click");

}); 
```

在[jsfiddle 上](http://jsfiddle.net/Xotic750/FsjkM/237/)

在回答您下面的其他问题时，解决方案是

```
$.fn.extend({
   rnditem : function(l) {
        var a = [],
            current = $(this).text().trim(),
            index,
            next;

       Array.prototype.forEach.call(l, function(item) {
            a.push($(item).text().trim());
       });

       index = a.indexOf(current) + 1;
       if (index < 0 ||  index >= l.length) {
           index = 0;
       }

       next = (l.eq(index).text());

       $(this).text(next);

      return this;
   }
 }); 
```

在[jsfiddle 上](http://jsfiddle.net/Xotic750/FsjkM/240/)

# r - Kaplan Meier iteratively

> ID：16081097
> 
> 赞同：0
> 
> 时间：2013-04-18T10:59:09.880
> 
> 标签：r

I have a data frame (`DF`) that looks like this:

```
 Col1        Class1   Class2    Class3   t_rfs(days)  e_rfs
Sample_name1      A        B         A        750            1
Sample_name2      B        B         A        458            0
Sample_name3      B        B         A        1820           0
Sample_name4      B        A         B        1023           0
Sample_name5      A        A         B        803            0
Sample_name6      A        B         A        1857           1
Sample_name7      A        A         B        850            1 
```

`t_rfs_years` = time to relapse free survival
`e_rfs` = event to relapse free survival
*NB:* this table is an example respect to the real case.

I simply would like to apply Kaplan Meier to each Class. The code I wrote is the following:

```
library(survival)
DF <- read.delim("DF.txt", header = T)
pdf("All_KM_plotted_together.pdf", paper = "USr")
par(mfrow=c(2,2))
surd <- survdiff(Surv(DF$t_rfs, DF$e_rfs == 1) ~ DF$Class1) 
plot(survfit(Surv(DF$t_rfs, DF$e_rfs == 1) ~ DF$Class1), col = c("red", "blue"))
surd <- survdiff(Surv(DF$t_rfs, DF$e_rfs == 1) ~ DF$Class2) 
plot(survfit(Surv(DF$t_rfs, DF$e_rfs == 1) ~ DF$Class2), col = c("red", "blue"))
surd <- survdiff(Surv(DF$t_rfs, DF$e_rfs == 1) ~ DF$Class3) 
plot(survfit(Surv(DF$t_rfs, DF$e_rfs == 1) ~ DF$Class3), col = c("red", "blue"))
dev.off() 
```

I simply would like to write a loop that takes iteratively each "Class" at a time and run the script instead of write every time pieces of repeated code for each "Class".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:20:55.470

有两种方法可以从数据框中提取列：`$`和`[[`. 下面是几个例子，它们都会让你得到同样的结果：

*   `DF$Class1`
*   `DF[["Class1"]]`
*   `DF[[1]]`

因此，将上面的最后一种方法与循环结合使用可以`for`完成您想要的。

```
for(i in 1:3){
    plot(survfit(Surv(DF$t_rfs, DF$e_rfs == 1) ~ DF[[i]]), col = c("red", "blue"))
} 
```

这是非常基础的，因此我建议您阅读 R 入门书籍以帮助您入门。它将使您免于很多挫折，并且比询问 SO 更快。

# r - How to apply a function that take multiple arguments which are both vectors?

> ID：16081101
> 
> 赞同：2
> 
> 时间：2013-04-18T10:59:26.190
> 
> 标签：r

```
chance<-c(0.11,0.12,0.13,0.14,0.15)
aaa<-function(x,y) {
  assignChance <- function (a,b,v) {
    if (a == 0)
      if (b == 0) 1-v
      else v
    else
      if (b == 0) 0
      else 1
  }
  sapply(x,assignChance,y,chance) # this is wrong
}
aaa(c(1,1,0,0,1),c(1,1,1,0,0)) 
```

I would expect the outcome as: 1, 1, 0.13, 0.86, 0

Is there any better way for this function. I feel my current attemp is quite ugly as in a functional language I can just use `Array.map3` plue `pattern match`.

Is there a vector version of `switch` just like `ifelse`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T11:03:36.240

您正在寻找`mapply`：

```
 mapply(assignChance,x,y,chance) 
```

通过`sapply`在您的代码中使用，您将函数依次`assignChance`应用于每个元素，并且您将整个向量和. 因此，例如，对于您的第一次迭代，结果调用将是：`x``b``v``y``chance``sapply`

```
assignChance(x[1],y,chance) 
```

代替 ：

```
assignChance(x[1],y[1],chance[1]) 
```

# java - java.lang.RuntimeException：无法序列化：0.0

> ID：16081102
> 
> 赞同：0
> 
> 时间：2013-04-18T10:59:27.797
> 
> 标签：java, android, ksoap2

我在 asyncTask 中提出了一个肥皂请求，但我收到了奇怪的错误，例如

```
04-18 13:51:25.070: E/AndroidRuntime(23482):    at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:658)
04-18 13:51:25.070: E/AndroidRuntime(23482):    at com.mobilion.afad.RegisterDevice.getWebService(RegisterDevice.java:49)
04-18 13:51:25.070: E/AndroidRuntime(23482):    at com.mobilion.afad.RegisterDevice.access$0(RegisterDevice.java:44)
04-18 13:51:25.070: E/AndroidRuntime(23482):    at com.mobilion.afad.RegisterDevice$requestTask.doInBackground(RegisterDevice.java:109) 
```

这些是我的方法

```
private boolean getWebService(String Method, SoapSerializationEnvelope SoapRequest)
{
    HttpTransportSE httpTransport = new HttpTransportSE(SoapAddress);
    try
    {
        httpTransport.call(Soapaction, SoapRequest);
        //httpTransport.call(NameSpace + Method, SoapRequest);
        return true;
    }
    catch (IOException e)
    {
        e.printStackTrace();
        return false;
    }
    catch (XmlPullParserException e)
    {
        e.printStackTrace();
        return false;
    }
} 
```

和

```
protected Boolean doInBackground(String... params)
    {
        SoapSerializationEnvelope envelope = null;
        //Ayarlardan secimi enlemi boylamı al property olarak ekle
        SoapObject request = new SoapObject(NameSpace, "InsertUser");   

    //  if(Ayarlar.secim == 0){
            request.addProperty("deviceId", mDeviceId);
            request.addProperty("enlem","0");
            request.addProperty("boylam", "0");
            request.addProperty("depremMin", Ayarlar.mindeprem);
            request.addProperty("depremMax", "10");
            request.addProperty("mesafe", "0");
            request.addProperty("statu", "1");          
            request.addProperty("deviceType","2");  
            envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);              
    //  }
    /*  else if(Ayarlar.secim ==1){
            request.addProperty("deviceId", mDeviceId);
            request.addProperty("enlem",Ayarlar.Latitude);
            request.addProperty("boylam", Ayarlar.Longitude);
            request.addProperty("depremMin", Ayarlar.mindeprem);
            request.addProperty("depremMax", "10");
            request.addProperty("mesafe", Ayarlar.maxmesafe);
            request.addProperty("statu", "1");          
            request.addProperty("deviceType", "2"); 
            envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
        }       */  
        return getWebService("InsertUser", envelope);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:18:15.627

这是引发该异常的方法：

```
private void writeElement(XmlSerializer writer, Object element, 
                          PropertyInfo type, Object marshal)
        throws IOException {
    if (marshal != null) {
        ((Marshal) marshal).writeInstance(writer, element);
    } else if (element instanceof SoapObject) {
        writeObjectBody(writer, (SoapObject) element);
    } else if (element instanceof KvmSerializable) {
        writeObjectBody(writer, (KvmSerializable) element);
    } else if (element instanceof Vector) {
        writeVectorBody(writer, (Vector) element, type.elementType);
    } else {
        throw new RuntimeException("Cannot serialize: " + element);
    }
} 
```

如您所见，当`element`被序列化的不是预期类型之一时，它会被抛出。从您收到的消息来看，实际对象很可能是一个`Float`或`Double`可能是`BigDecimal`实例。我会仔细查看您放入请求属性的值。

* * *

然而，有一点令人费解。根据堆栈跟踪，该`writeElement`方法是由您的方法直接调用的`getWebService`。但是，根据源代码那是不可能的。你……嗯……编辑了堆栈跟踪吗？如果您希望人们对您的问题做出准确的诊断，那是个坏主意。

# ios - How to retain order of JSON data retrieved with AFNetworking?

> ID：16081104
> 
> 赞同：3
> 
> 时间：2013-04-18T10:59:31.913
> 
> 标签：ios, json, afnetworking

I am using `AFNetworking` to retrieve JSON data from a web service. Part of the response string I get is:

```
{"DATA":{"LEASE TYPE":"3 Yrs + 0 renew of 0 Yrs","LANDLORD":"","TENANT":"test comp"... 
```

and so on. The order of the key values in the "DATA" dictionary ("LEASE TYPE","LANDLORD","TENANT"...) is important for presentation purposes. However, when `AFNetworking` calls `NSJSONSerialization's`:

```
+ (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error; 
```

method, the returned dictionary has the keys in a different order.

I notice that the `AFJSONRequestOperation` object has the server's response stored as an `NSString`, with everything in the correct order. However I'm not keen on parsing the JSON by hand if I can avoid it.

Can anyone suggest a way that will let me get at / keep the keys in their original order?

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:23:18.957

如果顺序很重要，请使用数组而不是字典，字典本质上是无序的。或按所需顺序添加字典键数组。

如果您无法控制发送的响应，则至少必须自己解析 JSON 以进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:08:18.123

当你创建一个 NSDictionary 时，顺序会不一样。我经常认识到字典是按键名字母顺序排列的。

但是当使用字典时，顺序并不重要。他们不应该！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:20:48.243

正如前面的答案提到的字典本质上是没有顺序的，但你可以在这里找到一个很好的**OrderedDictionary**类：

[http://www.cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html](http://www.cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html)

[http://projectswithlove.com/projects/OrderedDictionary.zip](http://projectswithlove.com/projects/OrderedDictionary.zip)

# android - 无需长按即可在 ListView 中启用批量上下文操作

> ID：16081109
> 
> 赞同：0
> 
> 时间：2013-04-18T10:59:55.523
> 
> 标签：android, listview, actionmode

我有一个带有 MultiChoiceModeListener 的 ListView 来删除项目。目前，当长按某个项目时，将启动动作模式。这工作正常，但此外，我希望允许用户在单击“编辑”按钮时启用操作模式。

有没有办法在不长按的情况下启用此模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T10:14:12.660

我认为这就是你要找的东西：http: [//developer.android.com/guide/topics/ui/menus.html#CABforViews](http://developer.android.com/guide/topics/ui/menus.html#CABforViews)

基本上：

1.  实现`ActionMode.Callback`接口
2.  `startActionMode()`单击按钮时手动调用

一个可能有帮助的 CommonsWare 项目示例：[https ://github.com/commonsguy/cw-omnibus/tree/master/ActionMode/Manual](https://github.com/commonsguy/cw-omnibus/tree/master/ActionMode/Manual)

# c# - 注册通用工厂

> ID：16081115
> 
> 赞同：3
> 
> 时间：2013-04-18T11:00:44.563
> 
> 标签：c#, dependency-injection, autofac

我有一个`ICommand`和`ICommandHandler<TCommand>`接口，需要注入工厂：

```
public class CommandProcessor
{
    private readonly Func<Type, ICommandHandler<ICommand>> _handler;

    public CommandProcessor(Func<Type, ICommandHandler<ICommand>> handler)
    {
        _handler = handler;
    }
} 
```

具有执行以下操作的能力：

```
public void Process(ICommand command)
{
    var handler = _handler(command.GetType());

    if (handler != null)
    {
        handler.Handle(command);
    }

    throw ...
} 
```

我试图注册工厂：

```
 builder.Register<Func<Type, ICommandHandler<ICommand>>>(context => type =>
        {
            var handlerType = context.Resolve(type);
            return (ICommandHandler<ICommand>) handlerType;
        }); 
```

但得到以下异常：

请求的服务“QVocado.Commands.Information.PostProblemCommentCommand”尚未注册。为避免此异常，请注册组件以提供服务，使用 IsRegistered() 检查服务注册，或使用 ResolveOptional() 方法解决可选依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:34:20.373

在我看来，您`CommandProcessor`只是系统中无用的抽象。与其让消费者依赖于`CommandProcessor`，不如让他们直接依赖于一个或多个封闭版本的`ICommandHandler<TCommand>`接口。这可以优雅地解决您的问题，因为 Autofac 可以为您解决这些依赖关系。此外，这可以防止将对象/依赖关系图分解为子图（当您使用工厂时会发生这种情况），这使得验证您的 DI 配置变得更加容易。

也许您引入`CommandProcessor`抽象的原因是因为您必须将许多`ICommandHandler<TCommand>`依赖项注入消费者。在这种情况下，您可能违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，这会导致类难以维护和测试。

删除`CommandProcessor`也消除了`ICommand`在每个命令消息上实现的需要。

请注意，您注册的委托不解析命令处理程序，而只是一个命令。您将创建用于执行此操作的`ICommandHandler<TCommand>`接口的封闭通用版本。`MakeGenericType`这是正确的实现：

```
builder.Register<Func<Type, ICommandHandler<ICommand>>>(
    context => commandType =>
    {
        var handlerType = typeof(ICommandHandler<>)
            .MakeGenericType(commandType);
        var handler = context.Resolve(handlerType);
        return (ICommandHandler<ICommand>)handler;
    }); 
```

# python - 使用任意键的 JSON 模式验证

> ID：16081118
> 
> 赞同：19
> 
> 时间：2013-04-18T11:00:50.707
> 
> 标签：python, validation, jsonschema

我正在使用 validictory 来验证附加的 JSON 数据和模式。工作至今。

然而，数据字典可以有任意的字符串键（除了 'bp' 但是）。这里模式中的键“bp”是硬编码的……它可以是给定列表中的字符串（字符串枚举）。如何在此处为字典的“第一级”添加枚举定义。

```
import json
import validictory

data = {'bp': [{'category': 'bp',
         'created': '2013-03-08T09:14:48.148000',
         'day': '2013-03-11T00:00:00',
         'id': 'dc049c0e-d19a-4e3e-93ea-66438a239712',
         'unit': 'mmHg',
         'value': 147.0,
         'value2': 43.0}]}

schema = {
    "type":"object",
    "properties":{
        "bp": {
            "type":"array",
            "required":False,
            "items":
                {
                    "type":"object",
                    "required":False,
                    "properties":{
                        "category": {
                            "type":"string",
                            "default": "bp",
                            "required":False
                        },
                        "created": {
                            "type":"string",
                            "default": "2013-03-08T09:14:48.148000",
                            "required":False
                        },
                        "day": {
                            "type":"string",
                            "default": "2013-03-11T00:00:00",
                            "required":False
                        },
                        "id": {
                            "type":"string",
                            "default": "dc049c0e-d19a-4e3e-93ea-66438a239712",
                            "required":False
                        },
                        "unit": {
                            "type":"string",
                            "default": "mmHg",
                            "required":False
                        },
                        "value2": {
                            "type":"number",
                            "default":43,
                            "required":False
                        },
                        "value": {
                            "type":"number",
                            "default":147,
                            "required":False
                        }
                    }
                }

        }
    }
}

validictory.validate(data,schema) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-18T11:30:34.480

这完全取决于您要做什么。

如果您想要相同的规范，但对于一系列属性，您可以抽象出定义：

```
{
    "type": "object",
    "properties": {
        "bp": {"$ref": "#/definitions/categoryList"},
        "foo": {"$ref": "#/definitions/categoryList"},
        "bar": {"$ref": "#/definitions/categoryList"}
    },
    "definitions": {
        "categoryList": {...}
    }
} 
```

如果您希望*任何*属性遵循该架构，您可以使用`additionalProperties`：

```
{
    "type": "object",
    "additionalProperties": {...}
} 
```

或一系列属性（由模式匹配） - 例如，任何小写：

```
{
    "type": "object",
    "patternProperties": {
        "^[a-z]+$": {...}
    }
} 
```

如果您想限制可以定义的属性数量，那么您可以使用“maxProperties”（仅限标准的 v4）：

```
{
    "type": "object",
    "additionalProperties": {...},
    "maxProperties": 1
} 
```

*PS - 在标准的 v4 中，“必需”是一个数组。事实上，即使在 v3 中，“必需”默认为`false`，所以您的示例根本不需要它*

# jquery - 带有工具提示 jquery 和 html 的 html 下拉菜单

> ID：16081119
> 
> 赞同：0
> 
> 时间：2013-04-18T11:00:53.993
> 
> 标签：jquery, html

我在 HTML 中有 dorpdown，但它的内容在 IE 中被削减，因为没有足够的空间使其宽度足够宽。

所以我想要的是当点击下拉菜单并且它的选项崩溃时，一个工具提示（div）应该出现在下拉菜单旁边，它显示了鼠标光标所在选项的全部内容，或者如果我使用键盘然后更改它 div内容应该改变。并且失去焦点的下拉 div 应该消失。

这是一些代码，但需要修改...

```
$("select").change(function () {

        $('selectDiv').html($("select option:selected").text());
    }); 
```

代码的问题是，单击下拉菜单时它不会在顶部显示 div。并且内容不会随着鼠标或键盘上的选项更改而更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:05:40.833

你有这样的事情吗？

```
$("select").on('focus', function () {
    $('selectDiv').html($("select option:selected").text());
    $('selectDiv').animate({opacity:1});
});

$("select").on('blur', function () {
    $('selectDiv').html('');
    $('selectDiv').animate({opacity:0});
}); 
```

# rule - ilog 中的规则场景管理器

> ID：16081125
> 
> 赞同：0
> 
> 时间：2013-04-18T11:01:15.123
> 
> 标签：rule, ilog

我想测试一个只有一个规则的简单规则流。我在 Eclipse 中看到了一个名为 Rule Scenario manager 的东西，它与测试有关吗？或者任何人都可以帮助我测试我的规则流吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T15:02:30.437

您可以使用规则配置来测试您的规则，也可以[创建用于测试的 excel 场景](http://pic.dhe.ibm.com/infocenter/dmanager/v8r0m1/index.jsp?topic=/com.ibm.wodm.dserver.rules.designer.test/topics/tsk_generate_excelfile.html)文件。

# php - 如何将 CSV 文件中的数据插入我的数据库？

> ID：16081128
> 
> 赞同：0
> 
> 时间：2013-04-18T11:01:21.310
> 
> 标签：php, mysql

我正在尝试将我的 txt 文件上传到我的数据库中，但我认为不会发生任何事情。我在 phpmyadmin 中检查了我的数据库，但没有插入任何内容。如何将我的数据加载并插入到 mysql 数据库中？

这是我的代码：

```
<?php 
$conn = mysql_connect("localhost", "login", "password") or die(mysql_error()); 

mysql_select_db("database", $conn);

if(!isset($_POST['submit']))
{
    $uploadtxt = "nyccrash.txt";

    $handle= fopen($uploadtxt, "r");

    // error checking.
    if($handle === false) {
   die("Error opening $uploadtxt");
}

    while($fileop = fgetcsv($handle, 1000, ",") !== false) { 

    $crash_year = $fileop[0];
    $accident_type = $fileop[1];
    $collision_type = $fileop[2];
    $weather_condition = $fileop[3];
    $light_condition = $fileop[4];
    $x_coordinate = $fileop[5];
    $y_coordinate = $fileop[6];

    $sql = mysql_query("INSERT INTO nyccrash (crash_year, accident_type, collision_type, weather_condition, light_condition, x_coordinate, y_coordinate) VALUES ($crash_year, $accident_type, $collision_type, $weather_condition, $light_condition, $x_coordinate, $y_coordinate)"); 

    } } 
```

?>

```
<!DOCTYPE html> 
<html>
<head> 
<meta charset="utf-8">
<title> NYC Crash Data </title> 
<link ref="stylesheet" type "text/css" href="../style/style.css" /> 

</head> 
<body> 
<div id="mainWrapper"> 

    <form method="post" action="" enctype="multipart/form-data"> 
        <input type="file" name="file"/>
        <br/> 
        <input type="submit" name="submit" value="submit"/> 
    </form> 

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:34:53.420

您可以使用[此](https://stackoverflow.com/questions/11337221/codeigniter-rest-csv-import-to-mysql/11339125#11339125)答案 的库来完成

```
$csv    =   New CSVReader();
$result =   $csv->parse_file('Test.csv');//path to file should be csv
echo '<pre>';     //
print_R($result); // Only for testing

if($result){
    foreach($result as $row){
            $crash_year     =   $row['crash_year'];
            $accident_type      =   $row['accident_type'];
            $collision_type =   $row['collision_type'];
            $weather_condition  =   $row['weather_condition'];
            $light_condition    =   $row['light_condition'];
            $x_coordinate       =   $row['x_coordinate'];
            $y_coordinate       =   $row['y_coordinate'];

            $query  =   "INSERT INTO nyccrash";
            $query  .=  "(crash_year, accident_type, collision_type, weather_condition, light_condition, x_coordinate, y_coordinate)";
            $query  .=  " VALUES ";
            $query  .=  "('$crash_year','$accident_type','$collision_type', '$weather_condition', '$light_condition', '$x_coordinate', '$y_coordinate')";   
            mysqli_query($query);
            unset($query);
    }
} 
```

我注意到一件事，在插入查询中，您的数据库表中必须有一些 varchar 字段，因此您缺少逗号。用逗号包裹 varchar 字段。这可能是问题所在，使用 die 和 mysql_error 来查看错误的真正含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:03:58.303

如果这是文本数据，那么您忘记`'`了数据

```
$sql = mysql_query("INSERT INTO nyccrash (crash_year, accident_type, 
collision_type, weather_condition, light_condition, x_coordinate, y_coordinate) 
VALUES ('$crash_year', '$accident_type', '$collision_type', 
'$weather_condition', '$light_condition', '$x_coordinate', '$y_coordinate')"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:32:26.607

以下是如何使用不受信任的输入参数化 SQL 语句。

```
$stmt = $db->prepare("INSERT INTO nyccrash (crash_year, accident_type, 
  collision_type, weather_condition, light_condition, x_coordinate, y_coordinate) 
  VALUES (?, ?, ?, ?, ?, ?, ?)");
$stmt->bind_param('sssssss', $crash_year, ...);
$stmt->execute(); 
```

有关这方面的更多信息，请参阅[http://codular.com/php-mysqli](http://codular.com/php-mysqli)。

如果你不明白为什么要这样做，请查看 SQL 注入，在你理解之前不要再写一行代码。

# ios - 仅使用 UINavigationController 的 iPad 横向模式

> ID：16081131
> 
> 赞同：-2
> 
> 时间：2013-04-18T11:01:43.980
> 
> 标签：ios, ios6, ios-simulator, ipad

我正在制作一个仅支持横向模式的 iPad 应用程序，但是当我在我的应用程序中添加 navigationController 时，即使模拟器默认设置为横向模式，我的应用程序视图也是纵向的。仅当我尝试添加 UINavigationController 时才会发生这种情况。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:05:40.673

您必须在应用程序目标摘要中设置支持接口方向：

![在此处输入图像描述](https://i.stack.imgur.com/ENDPa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:50:21.520

子类 UINavigationController 并添加这些方法：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}
- (BOOL)shouldAutorotate {
    return YES;
} 
```

# wix - 在 wix 本地化字符串元素的对话框描述中添加新行

> ID：16081134
> 
> 赞同：3
> 
> 时间：2013-04-18T11:01:47.000
> 
> 标签：wix, wix3

我是 WiX 新手，正在使用 WiX v3.0。

我正在使用**WixUI_Advanced**对话框。我`InstallDirDlg`通过添加`.wxl`（WiX 本地化）文件来自定义描述。

但是，我无法在描述中添加换行符。

我尝试跟随以获得新的线路，

```
1\. <String Id="InstallDirDlgDescription">Hello\nHai</String>

2\. <String Id="InstallDirDlgDescription">Hello
   Hai</String>

3\. <String Id="InstallDirDlgDescription">Hello</String>
   <String Id="InstallDirDlgDescription" Overridable="yes">Hai</String>

4\. <String Id="InstallDirDlgDescription">Hello&#13;&#10;Hai</String> 
```

但是，这些选项都不起作用。有什么建议么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:57:39.947

您似乎在 WiX 工具集中的 .wxl 处理中发现了一个错误。我希望选项 4 或以下选项起作用：

```
<String Id="InstallDirDlgDescription"><![CDATA[Hello
Hai]]></String> 
```

此时，您最好打开一个[WiX 工具集错误](http://wixtoolset.org/bugs)。您甚至可以考虑加入代码并尝试从根本上解决问题以帮助修复错误。似乎它应该工作。

# mercurial - 如何仅将某些修订提交到克隆的存储库

> ID：16081146
> 
> 赞同：0
> 
> 时间：2013-04-18T11:02:25.850
> 
> 标签：mercurial, branch, tortoisehg

我们最近从 Perforce 迁移到 Mercurial，我们正在努力寻找如何仅将某些更改合并到我们的稳定版本中。我们有一个所有开发人员都从中克隆的中央存储库。在 Perforce 中，我们一直使用分支来维护版本，然后仅将每个更改列表中的错误修复从分支合并到主干，或者反过来合并到需要修复的分支中。

在 Mercurial 中，我们通过克隆实现了这一点，其中每个稳定版本都是主干的克隆存储库。

我们的结构看起来有点像这样：

```
Trunk
|- Release 1
|- Release 2
|- Release 3 
```

我的问题是，我们如何才能仅将主干中的特定更改集合并到分支中？我希望有一种简单的方法可以做到这一点，最好使用 TortoiseHg，因为我们有很多具有不同经验水平的开发人员会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:53:15.853

我可能不完全理解您想要做什么.. 但是是的，您可以将更改从一个**分支转移**到另一个**分支**（例如，从`default`在 Mercurial 中调用的主干到发布分支）。在现代 Mercurials 中，这可以使用`graft`命令（或在`transplant`扩展之前）完成。要在分支类型上使用它：（有关详细信息，`hg graft REVISION`请参阅`hg help graft`）。

现在我不明白的是，您似乎没有几个分支，而只有一个（`default`）和几个克隆（？），在这种情况下，一切都变得更加复杂..您只能拉出一个变更集，然后您还需要提取它的祖先，并且很难知道您实际进入克隆工作目录的内容！所以我真的建议创建发布分支！

希望它会有所帮助。

# c# - 如何在src 标签中连接两个字符串？

> ID：16081150
> 
> 赞同：5
> 
> 时间：2013-04-18T11:02:35.037
> 
> 标签：c#, html, razor, asp.net-mvc-4

在这里，我想在一个`<img>`标签内连接两个字符串。这该怎么做？？

```
<img src=" "/partners" + @item.AdPath" alt="" id="adimg" title="@item.AdName"  width:"50px" height="50px"/> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T11:07:28.870

你应该能够做到这一点：

```
<img src="/partners+@(item.AdPath)" alt="" id="adimg"
    title="@item.AdName"  width:"50px" height="50px"/> 
```

Razor 引擎将替换`@item.AdPath`为实际值，为您提供`src="/partners+[value]"`.

由于 Razor 表达式是唯一被解析的内容，因此您不必尝试将字符串连接逻辑处理到标记中 - 只需将 Razor 表达式放入您希望值出现的位置。

编辑：或者，如果您不想要加号（从您的评论中不清楚）：

```
<img src="/partners@(item.AdPath)" alt="" id="adimg"
    title="@item.AdName"  width:"50px" height="50px"/> 
```

或者，您可以尝试使用`String.Format`：

```
<img src="@String.Format("/partners{0}", item.AdPath)" alt="" id="adimg"
    title="@item.AdName"  width:"50px" height="50px"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:16:57.423

可以这样做：

第一的：

```
<img src="@("/partners" + item.AdPath)" alt="" id="adimg" title="@item.AdName"  width:"50px" height="50px"/> 
```

第二：

```
<img src="/partners@(item.AdPath)" alt="" id="adimg" title="@item.AdName"  width:"50px" height="50px"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-04T10:28:17.730

在 HTML5 中，我做了：

```
 <img src="{{basePath  + Data.id +'/' + Data.id + '_0.jpg'}}"> 
```

`basePath`和`Data.id`是变量，介于两者之间的任何东西就像`''`我想要连接到这些变量的东西。`'/'``'_0.jpg'`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-10T15:06:15.293

我有一个类似的子文件夹图像文件访问问题，但以下代码格式适用于我的应用程序。

```
<img src='<%#: String.Format("~/partners/{0}", item.AdPath) %>'
 alt="" id="adimg" title="<%#:item.AdName%>"  width:"50px" height="50px"/> 
```

# android - 我不希望我的应用程序打开移动网站

> ID：16081153
> 
> 赞同：0
> 
> 时间：2013-04-18T11:02:40.647
> 
> 标签：android, android-webview, user-agent

我遇到的问题是，当我从我的应用程序中打开所需的网站`WebView`时，该网站会将其重定向到移动网站。我不希望这种情况发生。

我想从个人电脑/笔记本电脑上查看网站。我可以理解该网站已准备好进行重定向，但我想限制它从我的应用程序中进行。这样我就可以像在我的电脑上使用移动设备一样浏览网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:10:41.163

```
webview.getSettings().setUserAgent(1); 
```

试试这个。基本上一些移动浏览器有这个设置，可以设置保存你的默认选择。有些没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:12:51.713

您可以更改 WebView 的用户代理字符串，因为网站会根据该字符串决定是否为您提供完整或移动网站。我的用户代理字符串只是一个示例（实际上是我的），因此您可以将其更改为任何非移动浏览器。

```
myWebView.getSettings().setUserAgentString("Mozilla/5.0 (Windows NT 6.0; rv:20.0) Gecko/20100101 Firefox/20.0"); 
```

# c# - 使用 FirstOrDefault 时对象引用未设置为对象错误的实例

> ID：16081154
> 
> 赞同：7
> 
> 时间：2013-04-18T11:02:42.937
> 
> 标签：c#

当我使用下面的代码时，我得到对象引用错误，这可能是因为“蜘蛛”不匹配。我的问题是，如何在这些情况下检查空值

```
int fooID = foos.FirstOrDefault(f => f.Bar == "spider").ID; 
```

我在不同的条件下使用相同的场景从列表中获取不同的项目，例如

```
int fooID = foos.FirstOrDefault(f => f.Bar == "spider").ID; 
String fooDescription = foos.FirstOrDefault(f => f.Sides == "Cake").Description; 
```

有没有其他方法可以检查空值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T11:04:44.010

像往常一样，分配一个变量并检查它。

```
var foo = foos.FirstOrDefault(f => f.Bar == "spider");

if (foo != null)
{
    int fooID = foo.ID;
} 
```

根据您更新的示例，您需要这样做：

```
var fooForId = foos.FirstOrDefault(f => f.Bar == "spider");
var fooForDescription = foos.FirstOrDefault(f => f.Sides == "Cake");

int fooId = fooForId != null ? fooForId.Id : 0;
string fooDescription = fooForDescription != null ? fooForDescription.Description : null; // or string.Empty or whatever you would want to use if there is no matching description. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:12:09.197

`DefaultIfEmpty`如果没有匹配的元素，您可能还想使用扩展方法进行处理。接下来的代码演示了用法

```
string[] foos = {"tyto", "bar"};

var res = foos.Where(s => s.Length == 2)
              .DefaultIfEmpty("default")
              .First()
              .Length;

Console.WriteLine (res); //will print the length of default, which is 7 
```

# javascript - JavaScript 微模板如何工作？

> ID：16081155
> 
> 赞同：2
> 
> 时间：2013-04-18T11:02:43.603
> 
> 标签：javascript

当我浏览[JavaScript 微模板](http://ejohn.org/blog/javascript-micro-templating/#postcomment)源代码时，我对 2 个问题感到困惑：

1.  为什么要使用*new Function*而不是定义一个通用函数？
2.  为什么在*new Function*中没有直接引用*data*参数，而是可以替换为正确的值。我希望使用*data[$1]*从数据中获取正确的值。

编码：

```
(function(){
  var cache = {};

  this.tmpl = function tmpl(str, data){
    // Figure out if we're getting a template, or if we need to
    // load the template - and be sure to cache the result.
    var fn = !/\W/.test(str) ?
      cache[str] = cache[str] ||
        tmpl(document.getElementById(str).innerHTML) :

      // Generate a reusable function that will serve as a template
      // generator (and which will be cached).
      new Function("obj",
        "var p=[],print=function(){p.push.apply(p,arguments);};" +

        // Introduce the data as local variables using with(){}
        "with(obj){p.push('" +

        // Convert the template into pure JavaScript
        str
          .replace(/[\r\t\n]/g, " ")
          .split("<%").join("\t")
          .replace(/((^|%>)[^\t]*)'/g, "$1\r")
          .replace(/\t=(.*?)%>/g, "',$1,'")
          .split("\t").join("');")
          .split("%>").join("p.push('")
          .split("\r").join("\\'")
      + "');}return p.join('');");

    // Provide some basic currying to the user
    return data ? fn( data ) : fn;
  };
})(); 
```

1.  期望得到这样的语句，`"<div>",name,"</div>"`然后我们可以使用 with 语句。但是 String.replace() 总是返回字符串。我们期望一个符号而不是一个字符串。所以在这种情况下，级别类型是最好的选择。这就是我得到的。请纠正我，如果我错了。
2.  第二个问题的关键：
    *   柯里化函数
    *   与声明

例子：

```
function wrapperFn(data) {

    var fn = function anonymous(obj) {
    var p=[],
        print=function(){p.push.apply(p,arguments);};

    with(obj) {
        p.push('   <p>',name,'</p>   ');
    }

    console.log("p.join(''):", p.join(''));

    return p.join('');
    }

    return fn(data);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:18:29.727

> 为什么要使用 new Function 而不是定义一个通用函数？

因为它需要`eval`模板中的代码。通过这种花哨的替换，它将模板语言转换为有效的 JS 语句。然后那些（仍然是字符串）通过[`new Function`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function). 例如，`user_tmpl`示例将变为

```
function(obj) {
    var p=[],
        print=function(){p.push.apply(p,arguments);};
    with(obj) {
        p.push('  ');
        for ( var i = 0; i < users.length; i++ ) {
            p.push('     <li><a href="',users[i].url,'">',users[i].name,'</a></li>   ');
        }
        p.push('');
    }
    return p.join('');
} 
```

> 为什么在 new Function 中没有直接引用 data 参数，而是可以替换为正确的值。我希望使用 data[$1] 从数据中获取正确的值。

因为`data`参数（如果存在）作为`obj`参数传递给新`fn`函数，就在 return 子句（代码的最后一行）中。然后，您可以访问它的属性 ( `users`)，如由于该[`with`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with)的变量。如果没有传递数据，则将返回新创建的函数，以便代替

```
 var res = tmpl("templname", data); 
```

你也可以使用

```
 var tmplFn = tmpl("templname");
 var res = templFn(data); 
```

这个概念被称为[部分应用](http://en.wikipedia.org/wiki/Partial_application)，这里错误地称为“currying”（一个相似但完全不同的概念）。

# java - 使用正则表达式过滤路径

> ID：16081156
> 
> 赞同：0
> 
> 时间：2013-04-18T11:02:44.717
> 
> 标签：java, regex, jax-rs

我正在开发一个以正则表达式作为路径的 Web 服务：`@Path("{hash: .*}")`但是，这匹配所有内容；并且它使其他 servlet 不可访问（至少那些不是 JAX-RS 的）。

我需要过滤它不会处理的特定路径，像`"_ah/admin/datastore*"`任何人都可以提供帮助的路径吗？

# javascript - 动态生成的 div 的动态函数

> ID：16081157
> 
> 赞同：0
> 
> 时间：2013-04-18T11:02:48.033
> 
> 标签：javascript, jquery, html, dynamic, append

```
success: function (html) {
    $("#Concretisering").append('<li><input type="text"  /></li>');
} 
```

我有一个这样的函数，它可以工作，但是......在另一个函数中我生成了一些 div，所以我喜欢：

*   混凝土
*   混凝土1
*   混凝土2
*   ...

我的问题是，如何操作这段代码 $("#Concretisering") 使每个 div 都有 .append 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:05:47.747

而不是 ids ...提供你的 divs 类的“Concretisering”。那么它会变成：

```
 $(".Concretisering:not(:has(li))").append('<li><input type="text"  /></li>'); 
```

# c# - 如何使 jCarousel 具有 100% 的宽度而不是在 px 中指定？

> ID：16081161
> 
> 赞同：4
> 
> 时间：2013-04-18T11:02:51.863
> 
> 标签：c#, jquery, asp.net

我正在研究 asp.net 和 Jquery。我尝试了很多轮播，但它们都需要以 px 为单位指定宽度。这样做我的网站在不同的分辨率下看起来异常。我怎样才能让它占据它可用的整个宽度？

有没有人知道任何其他简单且支持此功能的插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:19:59.827

您可以通过删除容器上的宽度并将 css 上的剪辑设置为 100% 为：

```
.jcarousel-container-horizontal 
{
    /* width: 275px;  <--- remove it */
}

.jcarousel-clip-horizontal 
{
    width: 100%;     /*<-- set it 100%*/
    height: 75px;
} 
```

例子：

[http://jsfiddle.net/hgYmt/](http://jsfiddle.net/hgYmt/)

基于此演示页面： [http ://sorgalla.com/projects/jcarousel/examples/static_simple.html](http://sorgalla.com/projects/jcarousel/examples/static_simple.html)

因为不能修改css文件，所以用了important，但是思路是一样的。

# android - 如何将自定义布局列表视图 onitemclick 事件传递给其父活动？

> ID：16081166
> 
> 赞同：0
> 
> 时间：2013-04-18T11:03:09.073
> 
> 标签：android, listview

我的活动从 customListLayout.java ( `BaseAdapter`) 文件加载列表视图，我在其中使用 customAdapter.java 类编写了自定义列表及其单击事件。

同样在我的活动中`onTouchListener (onClickListener)`，我现在想将`onItemClick`事件传递给父活动。

我尝试在 customList 上编写`onTouch`和`onClick`事件并返回 false，但事件未传递给主要活动。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:09:42.813

如果您为适配器使用单独的类，请尝试将处理程序传递给适配器类的构造函数，并使用它向父活动发送消息。

```
 public CustomAdapter(context context, Handler h) {
        this.handler = h;
    } 
```

稍后您可以使用处理程序将事件传递给您的父活动。

# actionscript-3 - 如何使用按钮控制影片剪辑？

> ID：16081168
> 
> 赞同：0
> 
> 时间：2013-04-18T11:03:17.350
> 
> 标签：actionscript-3

动作脚本新手。Actionscript 3.0 按照[http://republicofcode.com/tutorials/flash/basicwebsite/](http://republicofcode.com/tutorials/flash/basicwebsite/)上的教程开始， 只要代码保留在 Flash 文件中，一切都可以正常工作。当我将它移动到外部文件时，我遇到了问题。

我的动作层关键帧上有以下代码：

```
 stop();

function goHome (e:MouseEvent):void{
gotoAndStop("Home");
}
home_btn.addEventListener(MouseEvent.CLICK, goHome);

function goAbout (e:MouseEvent):void{
gotoAndStop("About");
}
about_btn.addEventListener(MouseEvent.CLICK, goAbout);

function goLinks (e:MouseEvent):void{
gotoAndStop("Links");
}
links_btn.addEventListener(MouseEvent.CLICK, goLinks);

function goContact (e:MouseEvent):void{
gotoAndStop("Contact");
}
contact_btn.addEventListener(MouseEvent.CLICK, goContact); 
```

一切正常，但我想将代码移动到外部 as3 文件并遇到问题。

我添加了文档类“site1”，这是我的外部文件的名称。我从我的 Flash 文件关键帧中删除了代码并将其移至外部文件。

这是出现在我的 site1.as 中的代码

```
 package {
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.text.TextField;

public class button extends MovieClip{

    public function button() {
        function goHome (e:MouseEvent):void{
gotoAndStop("Home");
}
home_btn.addEventListener(MouseEvent.CLICK, goHome);

function goAbout (e:MouseEvent):void{
gotoAndStop("About");
}
about_btn.addEventListener(MouseEvent.CLICK, goAbout);

function goLinks (e:MouseEvent):void{
gotoAndStop("Links");
}
links_btn.addEventListener(MouseEvent.CLICK, goLinks);

function goContact (e:MouseEvent):void{
gotoAndStop("Contact");
}
contact_btn.addEventListener(MouseEvent.CLICK, goContact);
    }
}
} 
```

问题是当我发布我的 Flash 文件时，它只是保持循环而不是暂停按钮单击。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:21:54.450

一个类由属性和函数组成：通常是一个构造函数，它在类被实例化后立即运行（在文档类中是在应用程序运行时立即运行），然后是其他以不同方式调用的函数。

您所做的就是将所有函数都放在*构造*函数中：不好。那就是把一个函数放在一个函数中，你只是不这样做（虽然从技术上讲，你可以创建匿名函数，但那是另一回事）。

此外，您的事件侦听器应添加到构造函数中。添加事件侦听器正在调用一个函数，并且（据我所知）您不能从其他函数之外的类调用函数。

基本上，您应该将函数从构造函数中取出，如下所示：

```
package{

    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    import flash.text.TextField;

    public class button extends MovieClip{

        public function button() {
            home_btn.addEventListener(MouseEvent.CLICK, goHome);
            about_btn.addEventListener(MouseEvent.CLICK, goAbout);
            links_btn.addEventListener(MouseEvent.CLICK, goLinks);
            contact_btn.addEventListener(MouseEvent.CLICK, goContact);
        }

        function goHome (e:MouseEvent):void{
            gotoAndStop("Home");
        }

        function goAbout (e:MouseEvent):void{
            gotoAndStop("About");
        }

        function goLinks (e:MouseEvent):void{
            gotoAndStop("Links");
        }

        function goContact (e:MouseEvent):void{
            gotoAndStop("Contact");
        }
    }
} 
```

另一件事是文件名应该与类名相同。也就是说，应该调用您的文档类`button.as`而不是`site1.as`. 我不完全确定它是否在 Flash IDE 中是 100% 必要的（自从我使用它以来已经有一段时间了），因为它没有给出错误，但即使它不是一个好习惯。

研究类是如何工作的，并专门记录类是一个好主意。[这是关于类的 kirupa 教程](http://www.kirupa.com/developer/as3/classes_as3_pg1.htm)，[这是关于文档类的 ActiveTuts+ 教程](http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-use-a-document-class-in-flash/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:34:29.743

用相同的名称命名您的类和文件。我建议以下代码。

```
package
{
    import flash.display.MovieClip;
    import flash.events.MouseEvent;
    import flash.text.TextField;

    public class YourClassName extends MovieClip
    {
        public function YourClassName() {
            home_btn.addEventListener(MouseEvent.CLICK, goHome);
            about_btn.addEventListener(MouseEvent.CLICK, goAbout);
            links_btn.addEventListener(MouseEvent.CLICK, goLinks);
            contact_btn.addEventListener(MouseEvent.CLICK, goContact);          
        }

        private function goHome(e:MouseEvent):void {
            gotoAndStop("Home");
        }       

        private function goAbout(e:MouseEvent):void {
            gotoAndStop("About");
        }

        private function goLinks(e:MouseEvent):void {
            gotoAndStop("Links");
        }

        private function goContact(e:MouseEvent):void {
            gotoAndStop("Contact");
        }

    }
} 
```

AS3 比 AS2 更明确。我建议你使用`private`/`public`访问器。

编辑。

'button' 不是一个很好的类名，但它会起作用。

1）命名你的文件，类和构造函数：'button'：

```
public class button extends MovieClip

public function button() 
```

2）确保您的链接良好！含义：如果你想用这个类控制你的整个电影，改变文档“类”的名字`button`，如果你只想控制你库中的一个电影剪辑，把它拖到你的舞台上，选中“导出动作脚本”，然后更改您的“类”值`button`。

认为使用这种方法，您不需要任何实例名称。在这种情况下，类链接就足够了。

参考：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Class.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Class.html)

[http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b8ea63-7fee.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b8ea63-7fee.html)

# vb.net - 在 Application_Exit 调用异步 WCF 服务

> ID：16081169
> 
> 赞同：0
> 
> 时间：2013-04-18T11:03:21.083
> 
> 标签：vb.net, wcf, web-services, silverlight, asynchronous

我有以下代码..

```
 Private Sub Application_Exit(ByVal o As Object, ByVal e As EventArgs) Handles Me.Exit
        If MainPage.ModeOfOperation = "PROPOSALMODIFICATION" Then

            MainPage.InitializeServiceEndPoint(client.Endpoint)
            MessageBox.Show("This is a test")
            client.FlagQuotationWithUserAsync(MainPage.FetchQuotationNo, MainPage.FetchReferenceNo, "F", "", "", "")

        End If

    End Sub 
```

但它不起作用，因为我认为在应用程序退出时不允许异步调用。

我也做了以下

1.  通过 WCF 服务中的以下代码将 Async 方法转换为同步：

OperationContract(AsyncPattern:=False)

然后从 xaml 中调用它

```
client.SR_IService1_BeginFlagQuotationWithUser(FetchQuotationNo, ID, "T", UserRole, ProdCode, UserID, Nothing, Nothing) 
```

但是在应用程序退出时仍然没有调用该函数。

**请注意：主要问题是我想在应用程序关闭/退出时做一些事情，我必须调用 WCF Web 服务。请帮助我现在不知道..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:19:01.683

我明白你想要完成什么。不幸的是，当应用程序退出时，您可能会在尝试按照您的方式执行此操作时遇到问题。这是因为您拥有服务引用的代理，并且您需要了解幕后发生的一大堆事情。此外，如果应用程序关闭的原因是因为 System.ServiceModel 异常，则几乎可以保证您将无法进行此类调用。这也不是最佳实践。**相反，只需使用 REST。**这将 100% 有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:53:25.207

我会考虑将您的方法调用更改为同步但“一种方式”。

之后，我会从方法后面的 aplication_exit 代码中调用它。

我认为在这种情况下，您的应用程序仍然“存在”（直到方法执行未完成）。

看一下这个简单的帖子作为简短的例子：[Need sample fire and forget async call to WCF service](https://stackoverflow.com/questions/774648/need-sample-fire-and-forget-async-call-to-wcf-service)

此解决方案也可能有所帮助： http: [//www.codeproject.com/Articles/564450/CallingplusintoplusyourplusdatabaseplusonplusSilve](http://www.codeproject.com/Articles/564450/CallingplusintoplusyourplusdatabaseplusonplusSilve)

# c++ - cocos2d-x 中的鼠标/触摸坐标

> ID：16081171
> 
> 赞同：1
> 
> 时间：2013-04-18T11:03:34.553
> 
> 标签：c++, cocos2d-x

我正在尝试获取单击位置的 xy 坐标，或者更好的是鼠标指针所在的位置，以便我可以将它们转换为 char 并将它们显示在屏幕上，并且我记得 hellolua 中的某些东西会抛出点击和移动的坐标当点击触摸移动到控制台时，我想也许我可以在 cpp 中使用 cctouch 命令 getLocationInView(); 做类似的事情，这就是我所做的。在初始化中，我声明

```
setTouchEnabled(true); 
```

以及我试图获取我使用的触摸坐标的地方

```
CCTouch pTouch;
CCPoint p = pTouch.getLocationInView();
p = CCDirector::sharedDirector()->convertToGL(p);
float x = p.x;
float y = p.y; 
```

但是它没有像我期望的那样工作。有谁知道如何让鼠标/触摸坐标在 cocos2d-x(cpp) 中准确返回？

编辑：对不起，我应该澄清一下，我正在 VisualStudio express 环境中的 windows 7 桌面上工作，我希望这个项目是跨平台的。示例中的 hellolua 应用程序认为，即使我使用的是鼠标，鼠标点击也会以坐标开始和结束到控制台中。这就是为什么我希望我可以在 CPP 中做类似的事情，除了在屏幕上打印坐标。但是，使用此代码，我将获得 x 和 y 的静态值，无论我点击哪里，它都不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T12:32:06.750

试试这个代码：

```
bool PickCard::ccTouchBegan(CCTouch* touch, CCEvent* event)
{
    CCPoint touchLocation = touch->getLocationInView();
    touchLocation = CCDirector::sharedDirector()->convertToGL( touchLocation );
    touchLocation=convertToNodeSpace(touchLocation);
    CCLOG(" TouchLocation X=%f TouchLocation Y=%f",touchLocation.x,touchLocation.y);
} 
```

# c++ - 为什么在堆上初始化对象需要指针，而不是在堆栈上？

> ID：16081179
> 
> 赞同：3
> 
> 时间：2013-04-18T11:03:49.670
> 
> 标签：c++, class, pointers, heap-memory, stack-memory

例如在这两个代码中，一个不需要指针，另一个不需要指针。为什么是这样？如果 myObject1 不是指针，那么它到底是什么？

```
class Object{
…
};

int main(){
    // Create instance on the stack
    Object myObject1;

    // Create instance on the heap
    Object *myObject2 = new Object;

    return 0;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T11:07:55.930

您的两个声明都是具有自动存储持续时间的对象的定义。也就是说，它们都将在函数结束时被销毁。第一个是声明一个`Object`类型对象，第二个是一个`Object*`类型对象。

碰巧 for 的初始化程序`myObject2`是一个*new-expression*。一个新的表达式动态分配一个对象并返回一个指向它的指针。`myObject2`正在使用指向动态分配的指针进行初始化`Object`。

因此，您正在目睹两种不同的创建对象的方式。一种是带有变量定义的，一种是带有*new-expression 的*。

任何其他方式都没有任何意义。想象一下，一个*new 表达式*没有返回指向对象的指针，而是直接引用了该对象。然后你可能会写这样的东西：

```
Object myObject2 = new Object(); 
```

但是，C++ 默认使用值语义。这意味着动态分配的对象将被复制到`myObject2`其中，然后您就忘记了它。你没有办法再得到那个对象的地址了。*新表达式*返回一个指针，以便您拥有动态分配对象的句柄。

您可能会说，“这就是我用 Java 编写它的方式！” 但那是因为 Java 以不同的方式工作。在 Java 中，`myObject2`是您设置为指向新`Object`对象的引用。它不会以任何方式复制对象。

C++ 不要求在动态分配对象时必须使用指针。事实上，你可以做这样的事情（这是一种 Java 等价物）：

```
Object& myObject2 = *(new Object()); 
```

但这是一个非常糟糕的主意。它突然掩盖了对象是动态分配的事实，并且很容易出错并忘记销毁对象（在Java中您不必关心）。至少有一个指针可能会提醒您这样做。然而，即使这样也可能导致错误或不清楚的代码，这就是为什么建议您尽可能使用智能指针。

简而言之：这就是*new-expression 的*行为方式。它动态分配一个对象，然后返回一个指向它的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T11:06:17.720

它是一个类的*实例*（或对象）。`myObject2` *指向*一个类的实例。

您也可以将指针指向堆栈上的变量：

```
int main()
{
    Object myObject1;
    Object* pointerToObjectOnStack = &myObject1;
} 
```

指针可以指向任何地方；堆栈，堆或全局变量（既不在堆栈上，也不在堆上）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:05:30.723

> 例如在这两个代码中，一个不需要指针，另一个不需要指针。为什么是这样？

因为您以这种方式编写它们是为了（未保证）尝试与您在上面写的评论相匹配。

> 如果 myObject1 不是指针，那么它到底是什么？

一个`Object`。即，类型为 的对象`Object`。也就是`Object`类的一个实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:06:21.740

`myObject1`是`Object`在堆栈中分配的。

[在这里](http://www.tenouk.com/ModuleW.html)，您将找到有关内存的更准确信息。

用两句话来说：

1.  函数上的所有局部变量（包括对象实例）都分配在**stack**中。
2.  所有动态分配（使用`new`or `malloc()`）的数据都在**堆中**分配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T11:08:00.653

当您在堆栈上分配对象时，编译器会为您完成所有脏活（分配/解除分配），因此实际上您不需要指针来使用该对象。当您引用 myObject1 时，您指的是它`Object`本身，您可以简单地访问它的字段、方法等。

请注意，您始终可以使用`&`运算符获取指向堆栈上变量的指针。

```
Object myObject1; // This is the live instance of Object
Object * pObject1 = &myObject1; // Here you can obtain a pointer
                                // to myObject1
myObject1.someField = 42;       // Accessing myObject1's data 
```

另一方面，在堆上分配对象需要您管理这些对象（使用 new/delete、malloc/free 等手动分配/取消分配它们），因此首先您获得指向内存的指针，对象所在的位置和使用它，您必须使用`*`运算符取消引用它。

```
Object * myObject1 = new Object(); // Here you construct the Object manually
                                   // and get the pointer to place, where Object
                                   // was allocated.
(*myObject1).someField = 42;       // Accessing myObject1's data, notice the 
                                   // dereference (*)
myObject1->someField = 42;         // The same, written more easily 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T11:20:35.847

当函数与一些元数据一起被调用时，作为函数一部分的每个对象都会在堆栈上分配。此元数据结构是在编译器编译函数时定义的 -> 这会导致从函数快速访问这些变量（相对位置不会改变）。当函数返回时，这个内存也总是（自动）空闲的。

虽然堆设置在内存的不同部分并且可以或不能根据逻辑使用。

你有一个错误，通过将代码分成两行很容易显示：

```
class Object{
…
};

int main(){
    // Create instance of Object on the stack
    Object myObject1;

    // Create instance of a pointer to Object on the stack
    Object *myObject2;

    // Create instance of Object on the Heap and assigned its address to the pointer.
    myObject2 = new Object;

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-04-18T11:11:14.820

如果变量是在堆栈上分配的，编译器会为您隐式生成一个指针。

ie`Object myObject1; myObject1.foo();` 将被编译为

```
Object* myObject1_implicit_ptr = new(alloca(sizeof(Object))) Object;
myObject1_implicit_ptr->foo(); 
```

（`alloca`在堆栈上分配内存）

* * *

In是对象实例所在的内存位置的名称，即其地址的别名（相对于堆栈帧指针）`Object myObject1;`。 我们可以查询该地址并将其存储到一个指针（一个保存地址的变量）中： `myObject1`
`operator&`

```
Object myObject1; // myObject1 == stack-frame-pointer + 123
Object* myObject1_ptr = &myObject1; 
```

# javascript - JavaScript 使用 firefox 更改默认按钮概率

> ID：16081185
> 
> 赞同：0
> 
> 时间：2013-04-18T11:04:25.420
> 
> 标签：javascript, html, postback, onkeydown

以下问题：

我有一个带有按钮的列表，然后是一个带有按钮的文本框来添加新条目。在两者中，列表按钮和添加按钮都是用于确认操作的 JavaScript 例程。

现在我遇到了问题，当用户在文本框中按下回车键时，将调用列表的第一个按钮而不是添加按钮。所以我在按钮的“onkeydown”事件中添加了JavaScript，在这里我使用了“return false;”。以避免在我检查返回按钮被按下后调用第一个按钮。这与以下行完美配合： onkeydown="if (event.which == 13) { return false; }" 但只要我在“return false;”之前添加任何 JavaScript 代码 （我需要确认消息和其他一些 JavaScript 例程），firefox 浏览器确实调用了第一个按钮和 onkeydown 事件中的 javascript 代码......这种行为似乎不会在 Internet Explorer 上发生。

我已经尝试了几个小时来寻找解决方案，但我找不到一个，我也无法在互联网上找到正确的提示。所以如果有人可以帮助我解决这个问题，我会很高兴？

我试图建立一个代码示例，每个人都可以重现错误的行为。在最后一个输入控件中，我添加了 onkeydown 事件。有人可以告诉我为什么当我在文本输入字段中按下 Enter 按钮时，Firefox 会显示第一个按钮的确认消息吗？

```
<html>
<head>
</head>
<body>
    <form method="post" action="Test.html" id="ctl00">
    <div id="divTest">
        <table>
            <tr>
                <td>
                    Testline 1
                </td>
                <td>
                    <input type="submit" onclick="if (confirm('Sure?')) alert('the wrong postback'); else return false;" value="Test1" />
                </td>
            </tr>
            <tr>
                <td>
                    Testline 2
                </td>
                <td>
                    <input type="submit" onclick="if (confirm('Sure?')) alert('the wrong postback'); else return false;" value="Test2" />
                </td>
            </tr>
        </table>
    </div>
    <table>
        <tr>
            <td>
                Enter name:
            </td>
            <td>
                <input type="text" size="30" onkeydown="if (event.which == 13) { alert('test'); return false; }" />
            </td>
            <td>
                <input type="submit" title="Add it" onclick="alert('the correct postback')" />
            </td>
        </tr>
    </table>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:05:31.593

到处更换

```
type="submit" 
```

和

```
type="button" 
```

这样点击“输入”就不会提交表单。

但是整个方案很奇怪：你要不要提交表格？如果是这样，为什么不（像往常一样）只有一个功能检查所有字段？

# html - 在 div 中垂直居中列表

> ID：16081189
> 
> 赞同：1
> 
> 时间：2013-04-18T11:04:30.403
> 
> 标签：html, css

我有一个固定尺寸的 div 和一个无序列表。列表的项目水平放置，一个接一个。我正在尝试制作的是一个滑块，它显示一个又一个列表元素。我不能做的是将列表和元素垂直居中在 div 内，因为我不知道列表的高度。

这是我的代码：

HTML

```
<div id="container">
   <ul>
      <li>...</li>
      <li>...</li>
      <li>...</li>
   </ul>
</div> 
```

CSS

```
#container {
  width: 584px;
  height: 50px;
  position: relative;
  overflow: hidden;
}

#container ul {
  position: absolute;
  margin: 0;
  padding: 0;
  width: 3504px;
}

#container ul li {
  width: 584px;
  float: left;
  margin: 0;
  padding: 0;
  overflow: hidden;
} 
```

任何可能的方法在 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:11:29.160

我真的不明白溢出隐藏和巨大宽度值的必要性，但我已经做到了你所期望的。

使用`display:table-cell`and`vertical-align:middle`您可以将内容垂直居中对齐。

```
#container {
  width: 584px;
  height: 50px;
  position: relative;
}
#container ul {
  margin: 0;
  padding: 0;
}
#container ul li {
    width: 100px;
    background:grey; display:table-cell;
    border:white solid 2px;
    vertical-align:middle;
    margin: 0;
    padding: 0; 
} 
```

**[演示](http://jsfiddle.net/KwdwZ/2/)**

# android - 如何在充气器布局中设置文本视图以进行关闭标记？

> ID：16081192
> 
> 赞同：0
> 
> 时间：2013-04-18T11:04:43.140
> 
> 标签：android, android-listview, layout-inflater

我是安卓新手

我在充气布局中遇到问题以设置关闭标记

如何在充气机中设置关闭标记？如何实施？

任何人帮助我。

我试试这样。。

> ```
>  LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>   viewList = Nexttopic.this.getLayoutInflater().inflate(R.layout.activity_nexttopic, null);
>   dialogMarketList = new Dialog(Nexttopic.this);
>   dialogMarketList.requestWindowFeature(Window.FEATURE_NO_TITLE);
>   dialogMarketList.setTitle("TOPICS");
>   dialogMarketList.setContentView(viewList);
>   dialogMarketList.show();     
>   lvForDialog = (ListView) viewList.findViewById(R.id.List_view);
>   lvForDialog.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
>   ArrayAdapter<String> adapter = (new ArrayAdapter<String>(Nexttopic.this, R.layout.row_topic, R.id.child_row,tnamelist));
>   lvForDialog.setAdapter(adapter); 
> ```

活动-nexttopic.xml

> ```
>  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
> xmlns:tools="http://schemas.android.com/tools"
> xmlns:android1="http://schemas.android.com/apk/res/android"
> android:layout_width="match_parent"
> android:layout_height="match_parent"
> tools:context=".Nexttopic" >
> <ListView
>     android1:id="@+id/List_view"
>     android1:layout_width="match_parent"
>     android1:layout_height="330dp"
>     android1:layout_centerHorizontal="true"
>     android1:layout_centerVertical="true"
>      android:background="@drawable/bg">
> </ListView>
> </RelativeLayout> 
> ```

row_topic.xml

> ```
>  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
>             android:orientation="horizontal"
>            android:layout_width="fill_parent"
>            android:layout_height="fill_parent" 
>            android:weightSum="1">
>  <TextView 
>  android:id="@+id/c_txt"
>  android:layout_width="fill_parent"
>  android:layout_height="50dp"
>  android:text="X"
>  android:textSize="25dp"
>  android:gravity="right"/>
> <TextView
> android:id="@+id/child_row"
> android:layout_width="fill_parent"
> android:layout_height="wrap_content"
> android:layout_alignParentLeft="true"
> android:layout_below="@+id/c_txt"
> android:layout_marginTop="27dp"
> android:background="@drawable/bg"
> android:gravity="center_vertical"
> android:minHeight="?android:attr/listPreferredItemHeight"
> android:paddingLeft="6dip"
> android:textColor="@android:color/white" />
> </RelativeLayout> 
> ```

它的出现就像十字标记上方列表中的每个文本视图正在显示....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:17:44.973

您应该将关闭标记放在 activity-nexttopic.xml 布局而不是 row_topic.xml 中。您在 row_topic.xml 中放置的任何内容都将针对 Listview 中的每一行重复。

# login - 是否可以在沙盒环境中使用使用 PayPal 登录（以前的 PayPal 访问）？

> ID：16081195
> 
> 赞同：0
> 
> 时间：2013-04-18T11:04:48.250
> 
> 标签：login, paypal, paypal-sandbox

使用[PayPal](https://developer.paypal.com/webapps/developer/docs/classic/loginwithpaypal/gs_loginwithpaypal/)端点登录有效（将“www.sandbox”添加到 URL 的开头）例如[https://www.sandbox.paypal.com/webapps/auth/loginauth?execution=e3s2](https://www.sandbox.paypal.com/webapps/auth/loginauth?execution=e3s2)但我找不到任何地方可以获取 Sandbox`client_id`以及`client_secret`与之配合使用的凭据。

我尝试使用我的真实凭据（您可以在[http://devportal.x.com 获得](http://devportal.x.com)）但它们不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T17:56:07.680

使用沙盒时，您可以使用“使用 PayPal 登录”。创建企业帐户时，您可以通过在“创建帐户”表单上选择“使用 PayPal 登录”选项来获取凭据。生成的凭据将出现在配置文件的“API 凭据”部分。

# android - 更新 FragmentPagerAdapter 中的当前片段

> ID：16081199
> 
> 赞同：5
> 
> 时间：2013-04-18T11:04:58.970
> 
> 标签：android, android-viewpager, fragmentpageradapter

我有一个带有标签指示器的 viewPager。ViewPager 是带有 FragmentPagerAdapter 的 setAdaper。

我对 FragmentPagerAdapter 的内部工作原理知之甚少。我注意到邻居片段被恢复（调用 OnResume ），即使邻居还不可见。

我将更新方法放在 OnResume 中，认为一旦片段是当前的，它将被更新。

**广告横幅刷新**
我希望页脚中设置的广告横幅在向左滑动一次或向右滑动一次时更新。不会重新创建邻居片段（好事）。但是 onResume 已经被调用以避免横幅刷新。loadBannerAd 方法在 OnResume() 方法中。

如何通过片段**内的方法**仅为当前片段调用方法 loadBannerAd() ？

编辑：我已经知道 mViewPager.setOnPageChangeListener() 。

```
 OnPageChangeListener mOnPageChangeListener = new ViewPager.OnPageChangeListener() {

        @Override
        public void onPageSelected(int position) {
        // this method can be called before the fragment 's onCreateView()
        }

        ....
    }; 
```

但是当片段还没有被创建的时候，就有危险了。在 Activity 中管理片段是否已创建会破坏它的纯粹性。

![在此处输入图像描述](https://i.stack.imgur.com/aiMnv.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T11:19:48.360

您只需使用：

```
mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int index) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onPageScrollStateChanged(int arg0) {
                // TODO Auto-generated method stub

            }
        }) 
```

然后你就可以处理`onPageSelected(int index)`.

# asp.net - 使用母版页命名 ASP.NET 页面

> ID：16081200
> 
> 赞同：1
> 
> 时间：2013-04-18T11:04:59.360
> 
> 标签：asp.net, master-pages

我有两种用户类型：读者和作者。我正在使用`Reader.Master`and`Author.Master`用于授权目的。

然后，有`StoriesR.aspx`继承自`Reader.Master`和`StoriesA.aspx`继承自`Author.Master`。（在`StoriesR.aspx`页面中，您可以阅读故事并在`StoriesA.aspx`您可以编写故事。）所以，

1.  `Reader.Master`-->`StoriesR.aspx`
2.  `Author.Master`-->`StoriesA.aspx`

现在，问题是我不希望我的用户看到`StoriesR.aspx?s=3`或`StoriesA.aspx?s=3`在他们的浏览器中看到。我只是想让他们看到`stories?s=3`。（即使没有`.aspx`部分）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:16:14.233

您可以使用 web.config 文件中的 urlMappings 执行此操作

添加 web.confing

```
<system.web>
    <!-- 
        Set compilation debug="true" to insert debugging 
        symbols into the compiled page. Because this 
        affects performance, set this value to true only 
        during development.
    -->
    <urlMappings enabled="true">
        <add url="~/reader/stories" mappedUrl="~/reader/StoriesR.aspx"/>
        <add url="~/author/stories" mappedUrl="~/author/StoriesA.aspx"/> 
```

这将进行 url 映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:14:34.427

您可以拥有一个 aspx 页面并根据用户的类型（作者或读者）以编程方式更改母版页。

您可以在`Page_PreInit`您的 aspx 页面中执行此操作。

检查[此 c# 示例](http://frejnorling.wordpress.com/2011/01/26/master-pages-in-asp-net-programmatically-change-master-page/)或[此 VB 示例](http://www.asp.net/web-forms/tutorials/master-pages/specifying-the-master-page-programmatically-vb)

# python - 在我的 python Tk 基础应用程序中设置应用程序图标（在 Ubuntu 上）

> ID：16081201
> 
> 赞同：4
> 
> 时间：2013-04-18T11:05:06.160
> 
> 标签：python, ubuntu, tkinter

我想在我的基于 Python Tk 包的 GUI 应用程序中设置一个图像。

我试过这段代码：

```
root.iconbitmap('window.xbm') 
```

但它给了我这个：

```
root.iconbitmap('window.xbm')
  File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 1567, in wm_iconbitmap
    return self.tk.call('wm', 'iconbitmap', self._w, bitmap)
_tkinter.TclError: bitmap "window.xbm" not defined 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T11:37:58.523

你想用`wm iconphoto`. 比 Python Tkinter 更习惯于 Tcl/Tk 我不知道它是如何暴露给你的（也许`root.iconphoto`），但它需要一个`tkimage`. 在 Tcl/Tk 中：

```
image create photo applicationIcon -file application_icon.png
wm iconphoto . -default applicationIcon 
```

在 Tk 8.6 中，您可以提供 PNG 文件。在此之前，您必须使用 TkImg 扩展来支持 PNG 或使用 GIF。Python PIL 包可以为您将图像转换为 TkImage 对象，这应该会有所帮助。

**编辑**

我也在 Python 中尝试过，以下对我有用：

```
import Tkinter
from Tkinter import Tk
root = Tk()
img = Tkinter.Image("photo", file="appicon.gif")
root.tk.call('wm','iconphoto',root._w,img) 
```

在 Ubuntu 上以交互方式执行此操作导致应用程序图标（框架左上角的图像并显示在任务栏中）被更改为使用我提供的 gif 图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-16T20:37:27.083

这对我有用

```
from tkinter import *       

raiz=Tk()
raiz.title("Estes es el titulo")
img = Image("photo", file="pycharm.png")
raiz.tk.call('wm','iconphoto',raiz._w, img)
raiz.mainloop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:21:00.250

尝试这个：

```
root.iconbitmap('@window.xbm') 
```

并[引用](http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.iconbitmap-method%20quote)：

> 设置（获取）此窗口图标化时要使用的图标位图。某些窗口管理器（包括 Windows）会忽略此方法。
> 
> 请注意，此方法只能用于显示单色图标。要显示彩色图标，请将其放入 Label 小部件并使用 iconwindow 方法显示它。

# d3.js - d3上刷三角符号消失

> ID：16081203
> 
> 赞同：1
> 
> 时间：2013-04-18T11:05:12.440
> 
> 标签：d3.js, timeline, brush

下部区域的灰色条允许用户将数据分布在 x 轴上。[小提琴](http://jsfiddle.net/adithyavr/LfBva/10/)除了最初生成的三角形符号之外，所有东西都在调整大小，但一旦我使用画笔重绘就会消失（*ps：这只发生在我从浏览器的相同代码而不是 jsfiddle 运行代码时！*）

1.  我的轴长度增加，但 0min 重复 3 到 4 次，而不是显示 0.1 0.2 0.3 等

`milestone_marks.selectAll(".milestone_markers") .data(milestones) .enter().append("path") .attr("d", d3.svg.symbol().type('triangle-down')) .attr('class', 'milestone_markers') .attr("transform", function (d) { return "translate(" + x__axis(d.processing_time) + "," + -7 + ")";})`

在刷过的功能中，我写了以下内容：

`d3.select('.milestone_marks').selectAll('path').data(milestones).attr("d", d3.svg.symbol().type('triangle-down')).attr("transform", function (d) { return "translate(" + x__axis(d.processing_time) + "," + -7 + ")";})`

任何输入将不胜感激。

# google-app-engine - ajax 和 viewscoped 不适用于带有 jsf2 和 primefaces 的谷歌应用引擎

> ID：16081206
> 
> 赞同：0
> 
> 时间：2013-04-18T11:05:19.160
> 
> 标签：google-app-engine, jsf-2, primefaces, managed-bean, view-scope

我想用 jsf2.1 和 primefaces 和谷歌应用引擎创建一个应用程序

但是当我测试这个时：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <title>GAE + JSF</title>
</h:head>
<h:body>
    <h1>Google App Engine + JSF 2.0 example - hello.xhtml</h1>
    <h:form>
        <h:inputText value="#{helloBean.name}"></h:inputText>
        <p:commandButton value="Welcome Me" actionListener="#{helloBean.tester}" update="dlg"
        oncomplete="dlgw.show();" >
        <f:setPropertyActionListener value="#{helloBean.name}" target="#{helloBean.nameDialog}" />      
        </p:commandButton>
        <p:dialog id="dlg" widgetvar="dlgw" >
                je suis #{helloBean.nameDialog}
        </p:dialog>
    </h:form>
</h:body>
</html> 
```

当我单击命令按钮并且未启动对话框时，未调用方法“测试器”

我不知道原因

这是托管bean：

```
 package com.esperant;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.SessionScoped;
import javax.faces.bean.ViewScoped;

import java.io.Serializable;

@ManagedBean
@ViewScoped
public class HelloBean implements Serializable {

    private static final long serialVersionUID = 1L;

    private String name;
    private String nameDialog;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void tester(){
        System.out.println("tester methode");
    }

    public String getNameDialog() {
        return nameDialog;
    }

    public void setNameDialog(String nameDialog) {
        this.nameDialog = nameDialog;
    }

} 
```

你对这个问题有什么想法吗

先感谢您

# maven - 如何查看最新版本的报告插件？

> ID：16081208
> 
> 赞同：0
> 
> 时间：2013-04-18T11:05:25.080
> 
> 标签：maven

我正在使用`mvn versions:display-plugin-updates`来检查我的插件的最新版本。结果如下：-

```
[INFO] 
[WARNING] The following plugins do not have their version specified:
[WARNING]   maven-clean-plugin .......................... (from super-pom) 2.5
[WARNING]   maven-compiler-plugin ........................................ 3.1
[WARNING]   maven-deploy-plugin ......................... (from super-pom) 2.7
[WARNING]   maven-install-plugin ........................ (from super-pom) 2.4
[WARNING]   maven-jar-plugin ............................................. 2.4
[WARNING]   maven-jarsigner-plugin ....................................... 1.2
[WARNING]   maven-resources-plugin ....................................... 2.6
[WARNING]   maven-surefire-plugin ..................................... 2.14.1
[INFO] 
```

关于上面的结果，似乎`reporting plugin`没有检查。我不确定我做错了什么，或者它是`version plugin`.

你能帮忙提供进一步的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:25:56.670

从问题跟踪器看来，插件应该这样做：http: [//jira.codehaus.org/browse/MVERSIONS-83](http://jira.codehaus.org/browse/MVERSIONS-83)

您可以尝试使用完全限定名称而不是部分名称来执行插件（这里有一个提示：http: [//jira.codehaus.org/browse/MVERSIONS-69](http://jira.codehaus.org/browse/MVERSIONS-69)）

# php - 将 simplexmlelement 转换为字符串以获取内部内容，但保持 htmlspecialchars 转义

> ID：16081210
> 
> 赞同：0
> 
> 时间：2013-04-18T11:05:28.280
> 
> 标签：php, xml, simplexml, htmlspecialchars, object-to-string

我有一个xml文件：

```
$xml = <<<EOD
<?xml version="1.0" encoding="utf-8"?>
<metaData xmlns="http://www.test.com/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="test">
<qkc6b1hh0k9>testdata&amp;more</qkc6b1hh0k9>
</metaData>
EOD; 
```

现在我将它加载到一个 simplexmlobject 中，稍后我想获取“qkc6b1hh0k9”-node 的内部

```
$xmlRootElem = simplexml_load_string( $xml );
$xmlRootElem->registerXPathNamespace( 'xmlns', "http://www.test.com/" );

// ...

$xPathElems = $xmlRootElem->xpath( './'."xmlns:qkc6b1hh0k9" );
$var = (string)($xPathElems[0]);
var_dump($var); 
```

我希望得到字符串

```
testdata&amp;more 
```

...但我得到了

```
testdata&more 
```

*   为什么 simplexmlobject 的 __toString() 方法将我的转义特殊字符转换为普通字符？我可以停用此行为吗？
*   我想出了一个临时解决方案，我认为它很脏，你说什么？

    (strip_tags($xPathElems[0]->asXML()))

*   DOMDocument 可以替代吗？

感谢您对我的问题的任何帮助！

**编辑**

问题解决了，问题不在simplexml的__toString方法，是后来在addChild使用字符串的时候

如上所述的行为完全没问题，正如您在答案中看到的那样，必须预料到......

只有当通过“addChild”将该值添加到另一个 xml 文档时，才会出现问题。由于 addChild 不会转义与符号（[http://www.php.net/manual/de/simplexmlelement.addchild.php#103587](http://www.php.net/manual/de/simplexmlelement.addchild.php#103587)），因此必须手动进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:50:48.793

> 为什么 simplexmlobject 的 __toString() 方法将我的转义特殊字符转换为普通字符？我可以停用此行为吗？

因为那些“特殊”字符实际上是字符的 XML 编码。使用字符串值再次为您提供这些字符。这就是 XML 解析器的用途。

> 我想出了一个临时解决方案，我认为它很脏，你说什么？

嗯，摇摇欲坠。相反，让我建议您相反：XML 对字符串进行编码：

```
$var = htmlspecialchars($xPathElems[0]);
var_dump($var); 
```

> DOMDocument 可以替代吗？

不，因为 SimpleXML 它是一个 XML 解析器，因此您也可以解码文本。这并不完全正确（您*可以*通过遍历所有子节点并选择字符数据旁边的实体节点来使用 DomDocument 做到这一点，但正如上面*htmlspecialchars()*所概述的那样，它的工作要多得多 ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:31:25.310

如果您通过任何合理的方法创建 XML 标记，并将其设置为包含字符串`"testdata&more"`，这将被转义为`testdata&amp;more`. 因此，将字符串内容提取出来反转转义过程以提供您输入的文本是合乎逻辑的。

问题是，为什么需要 XML 转义表示？如果您想要作者想要的元素内容，那么`__toString()`就是做正确的事；在 XML 中表示该字符串的方法不止一种，但您通常应该关心的是所表示的数据。

如果出于某种原因您确实需要有关如何*在该特定实例*中构造 XML 的详细信息，您可以使用更复杂的解析框架，例如 DOM，它将分离`testdata&amp;more`为一个文本节点（包含“testdata”）、一个实体节点（与名称“amp”）和另一个文本节点（包含“更多”）。

另一方面，如果您只想将它​​放回到另一个 XML（或 HTML）文档中，那么让 SimpleXML 正确地进行反转义，并在适当的时候重新转义。

# iphone - 从图像中检测任何形状的对象并为单个对象着色

> ID：16081222
> 
> 赞同：0
> 
> 时间：2013-04-18T11:05:48.720
> 
> 标签：iphone, ios, opencv

我是opencv的新手，做一些像从图像中检测不同的对象并对单个对象应用效果。我找到边缘，并使用以下代码获取轮廓，但我不知道如何继续前进。有什么帮助吗？？？提前致谢

```
cv::Mat edges;
cv::Canny(gray, edges, 50, 150);

std::vector< std::vector<cv::Point> > c;
std::vector<cv::Point> points;
cv::findContours(edges, c, CV_RETR_LIST, CV_CHAIN_APPROX_NONE);
cv::Mat mask = cv::Mat::zeros(edges.rows, edges.cols, CV_8UC1);
  for (size_t i=0; i<c.size(); i++)
   {
   for (size_t j = 0; j < c[i].size(); j++)
   {
    cv::Point p = c[i][j];
    points.push_back(p);
    // printf(" %d \t",p.x);
   }

}
cv::Mat crop(inputFrame.rows, inputFrame.cols, CV_8UC3);
inputFrame.copyTo(outputFrame, mask); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:57:36.560

由于您选择通过轮廓识别对象，我建议您继续使用“广义霍夫变换”（[PDF](http://www.cs.utexas.edu/~dana/HoughT.pdf)）。您必须为要识别的对象创建参考轮廓（从每个可能的角度）。

您可能会感兴趣的另一种选择是研究[分割算法](http://en.wikipedia.org/wiki/Image_segmentation)以选择图像中的某些对象。如果不了解您正在寻找的对象以及您正在处理的图像，就不可能给出好的建议。没有适用于每张图像的通用算法（至少据我所知）。

为了让您了解最先进的对象类识别，您可以查看[PASCAL VOC Challenge](http://pascallin.ecs.soton.ac.uk/challenges/VOC/)。如果您的问题比挑战更简单（例如，一小组不可变对象，站在一个彩色背景前面），您应该在您的问题中指定它，也许有人可以给您更好的建议。

# javascript - 我可以使用 jQuery 在 IE 中使用 openDatabase() 函数吗？

> ID：16081223
> 
> 赞同：-2
> 
> 时间：2013-04-18T11:05:51.247
> 
> 标签：javascript, html, internet-explorer

OpenDatabase() 函数在 Internet Explorer 中不起作用。有没有其他方法可以使用 jQuery 访问本地存储的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:01:31.763

[Internet Explorer 中没有 Web SQL](http://caniuse.com/#search=sql)。无论如何，这个 API 可能无处可去。

# google-maps - 我只想通过google map api显示一个国家的地图，怎么办？

> ID：16081226
> 
> 赞同：0
> 
> 时间：2013-04-18T11:06:16.330
> 
> 标签：google-maps, google-maps-api-3

我只想通过 google maps API v3 显示一个国家的地图，怎么办？而且我不想在这张地图上获得任何地理信息，例如河流、道路等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:11:45.057

有一种方法可以限制缩放和平移，但据我所知，Gmaps 不支持您想要做的事情。您可以将限制缩放/平移与在您不想显示的区域上显示空白区域相结合，这些区域出现在您的缩放/平移范围内（例如，在您的国家/地区边界之外，在某个范围内）。

试试这个教程的缩放/平移限制：[http](http://econym.org.uk/gmap/range.htm) ://econym.org.uk/gmap/range.htm 。

关于您不希望显示河流、道路的事实，我可以建议您使用此链接： http: [//gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)。它是风格化的地图向导，如果我是你，我想我会尝试让你不想显示的所有元素与背景颜色相同。

例如，白色背景、白色河流、白色道路。我认为您甚至可以在此向导中找到一种根本不显示它们的方法，有很多选择:)

编辑：哦，是的，您绝对不能显示道路、河流...单击顶部列表中的一个元素，然后选择“可见性：关闭”。适用于几乎所有东西。

# vhdl - RTL pragma 指令触发器的综合列表

> ID：16081230
> 
> 赞同：3
> 
> 时间：2013-04-18T11:06:20.917
> 
> 标签：vhdl, verilog

在 verilog 和 VHDL 中，工具的 RTL 命令可以作为 pragma 指令作为伪注释给出。我想避免在我的真实评论中使用任何这些 pragma 指令，所以我想要一个 pragma 指令触发器的完整列表。我知道的有：

```
-- pragma
// synthesis
-- synopsys 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:29:55.903

You can find a comprehensive list here:

[http://www.sigasi.com/content/list-known-vhdl-metacomment-pragmas](http://www.sigasi.com/content/list-known-vhdl-metacomment-pragmas)

As long as you don't have a comment starting with the trigger, i.e., `-- <trigger> ...`, you should be safe.

For example, when using Altera Quartus, avoid comments such as

`-- altera code below`,

while

`-- The following is for altera.`

would be fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:49:16.007

您可能会找到几个这样的列表，但我怀疑它们中的任何一个都是完整的。（其中一个 zennehoy 发布的内容丢失`-- psl`了。）即使某处有完整的列表，您也永远不知道供应商将来会添加哪些编译指示，因此您永远无法确定。

如果您希望您的代码尽可能可移植，您可能应该避免使用常见的供应商/工具名称开始注释，例如 zennehoy 建议的（例如 synopsys、altera、xilinx、lattice、modelsim 等）。除此之外，我会说你只需要抓住机会。

# android - Android：按下后退按钮时刷新上一个片段数据

> ID：16081235
> 
> 赞同：3
> 
> 时间：2013-04-18T11:06:50.583
> 
> 标签：android, performance

我有 2 个片段，片段 A 和片段 B。我通过使用 将片段 B 添加到片段 A 上`FragmentTransaction().add`，这意味着片段 A 是片段 B 的基础。在我对片段执行某些操作后，有没有办法更改片段 A 中的数据B 并按下片段 B的**后退按钮？**我希望有一种通用的方式来通知 Fragment A。因为它可能是另一个被覆盖的 Fragment。我尝试使用`FragmentTransaction.replace()`- 它可以很好地刷新上一页。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T11:11:32.277

只需覆盖`onBackPressed()`您的活动和片段并在那里进行所需的调用。

更多关于回调/与其他片段的通信可以在这里找到：

[与其他 Fragment 通信](http://developer.android.com/training/basics/fragments/communicating.html)

```
public class FragmentA extends Fragment {
    public void updateMyself(String updateValue){
        Log.v("update", "weeee Fragment B updated me with" + updateValue);
    }
}

public class FragmentB extends Fragment {

    public Interface FragmentBCallBackInterface {
        public void update(String updateValue);
    }

    private FragmentBCallBackInterface mCallback;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        try {
            mCallback = (FragmentBCallBackInterface) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement FragmentBCallBackInterface");
        }
        //As an example we do an update here - normally you wouln't call the method until your user performs an onclick or something 
        letsUpateTheOtherFragment();
    }

    private void letsUpateTheOtherFragment(){
        mCallback.update("This is an update!);
    }
}

public class MyActivity extends Activity implements FragmentInterfaceB {

    @Override
    public void update(String updateValue){
          FragmentA fragmentA = (FragmentA) getSupportFragmentManager().findFragmentById(R.id.article_fragment);

        if (fragmentA != null) {
            fragmentA.updateMyself(updateValue);
        } else {
            //replace the fragment... bla bla check example for this code
        }
    }
} 
```

# java - JUnit 和 Maven 构建在 Eclipse 中失败并出现 java.lang.NoSuchFieldError：地址？

> ID：16081236
> 
> 赞同：0
> 
> 时间：2013-04-18T11:06:50.523
> 
> 标签：java, maven-2, junit4

当我尝试在本地 Eclipse 中运行 JUnit (4.8.2) 测试或 maven (2.2.1) 构建时，出现以下错误：

```
JUnit 4.8.2
    java.lang.NoSuchFieldError: address
        at java.net.InetAddress.init(Native Method)
        at java.net.InetAddress.<clinit>(InetAddress.java:242)
        at java.net.InetSocketAddress.<init>(InetSocketAddress.java:200)
        at java.net.Socket.<init>(Socket.java:189)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.connect(RemoteTestRunner.java:570)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:381)
        at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

Maven 2.2.1
java.lang.NoSuchFieldError: address
    at java.net.InetAddress.init(Native Method)
    at java.net.InetAddress.<clinit>(InetAddress.java:242)
    at java.net.InetSocketAddress.<init>(InetSocketAddress.java:200)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
        etc... 
```

从一些帖子来看，人们说这可能是相互冲突的依赖关系，但我不确定。任何帮助将非常感激。

编辑：`mvn clean install`从命令行运行是可行的，但由于这个错误，eclipse 不会让我进行 maven 构建、清理或运行我的任何测试，有什么想法我需要做什么吗？

干杯，

阿列克谢蓝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:35:51.803

看起来这是一个损坏的 JDK。我将它指向另一个版本的 Java 6，它运行良好，所以不确定它是如何损坏的，但似乎地址字段已丢失。

# php - 登录php页面后如何转到同一页面

> ID：16081241
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:07:09.413
> 
> 标签：php, session-variables

我有一个搜索页面，其中弹出窗口打开，弹出登录后我想重定向相同的 URL，这意味着 URL 没有更改。那么我该如何重定向呢？

这是搜索页面弹出代码：

```
<div id="light">
    <form action="tutors_login1.php" method="post" name="form">

    <center>
    <table>
        <tr><td>
            PLEASE LOGIN
        </td></tr>
        <tr><td>
            User Email <input type="text" name="email" />
        </td></tr>
        </tr><td>
            Password <input type="password" name="password" />
        </td></tr>
        <tr><td>
        <input type="submit" name="submitbut" value="Login" />
        </td></tr>                   
    </table>
    </center>

    </form>
</div>

<div id="fade" onClick="lightbox_close();"></div> 
```

这是我重定向页面的登录页面代码

```
if($flagl=='lgin'){    
    header('Location: my_account.php');
}

$tabl = 'tutor';

if($_POST['submitbut'] == 'Login') {
    $stateid=$_REQUEST['country'];
    $cityid=$_REQUEST['state'];
    $areaid=$_REQUEST['city'];

    $email = mysql_real_escape_string($_POST['email']);

    $password = mysql_real_escape_string($_POST['password']);

    $sql = "SELECT * from $tabl where email='$email' AND password='$password' AND app='1'";

    $exec = mysql_query($sql);

    $num = mysql_num_rows($exec);

    if($num == 1) {
        $fetch = mysql_fetch_assoc($exec);
        $_SESSION['login'] = $fetch['uniq'];
        $_SESSION['email'] = $fetch['email'];

        $email = $_SESSION['email'];

        $_SESSION['type'] = 'tutor';

        header("Location: latest_tuition_jobs.php");

    }
        if($sql1 = "SELECT * from $tabl where email='$email' AND password='$password' AND app='0'")
        {
            $exec1 = mysql_query($sql1);

            $flag_r1 = 'r';
} else {
        $flag_r = 'r';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:18:28.567

你将不得不使用

```
$_SERVER['HTTP_REFERER']; 
```

根据 PHP 文档，它指出：

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

这被解释为如果您尝试访问仅登录的页面，那么您将需要登录。登录后，登录将带您返回参考页面或最后一页，您可以开展业务。

另外请停止使用 MySql_，因为它已被弃用，不应用于新代码。（甚至是旧代码）。请为 PDO 重构您的代码，否则您可能会成为注入攻击的受害者。如果您在设置 PDO 时需要帮助，请告诉我，我会为您提供帮助 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:10:00.300

查看`$_SERVER['REQUEST_URI']`

这是`URL`从您来自的页面到您的登录表单。

`PHP`登录成功后直接跳转到这个页面。

# sql-server - SQL Server 中按食物类型计算的总和

> ID：16081244
> 
> 赞同：0
> 
> 时间：2013-04-18T11:07:13.463
> 
> 标签：sql-server, sql-server-2008

我是 SQL 新手，我使用的是 SQL Server 2008。

在我的数据库中，我有 3 个表

1.  桌子`Type`
2.  桌子`Invoice`
3.  桌子`Item`

这是我获取总金额的 SQL 命令：

```
SELECT 
   tbl_type.type,
   ((tbl_item.price * qty) - (tbl_item.price * qty * discount)) as totalAfter,
   tbl_inv.dateInv
FROM 
   tbl_type, tbl_item, tbl_inv 
WHERE 
   tbl_inv.dateInv = '2013-03-26 00:00:00' 
   AND tbl_inv.id = tbl_item.id_invoice 
   AND tbl_type.id = tbl_item.id_type
ORDER BY 
   tbl_inv.dateInv; 
```

所以当我运行我的查询时，它会返回

```
CHICKEN        46.000000    2013-03-26 00:00:00.000
MEAT            3.000000    2013-03-26 00:00:00.000
CHICKEN        69.000000    2013-03-26 00:00:00.000
CHICKEN        46.000000    2013-03-26 00:00:00.000
CHICKEN        69.000000    2013-03-26 00:00:00.000
MEAT            4.500000    2013-03-26 00:00:00.000 
```

但是如何做到这一点呢？

```
CHICKEN       230.000000    2013-03-26 00:00:00.000
MEAT            7.500000    2013-03-26 00:00:00.000 
```

我会收到错误

> 列 'tbl_item.price' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

当我`GROUP BY tbl_type.type`在我的 SQL 中使用时

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:13:55.207

```
SELECT tbl_type.type,SUM((tbl_item.price * qty) - (tbl_item.price * qty * discount)) as totalAfter ,tbl_inv.dateInv
FROM tbl_type,tbl_item,tbl_inv 
WHERE tbl_inv.dateInv = '2013-03-26 00:00:00' AND tbl_inv.id=tbl_item.id_invoice AND tbl_type.id=tbl_item.id_type
Group by tbl_type.type,tbl_inv.dateInv
ORDER BY tbl_inv.dateInv,tbl_type.type; 
```

# cygwin - Cygwin 和 Apache Pig - 一个令人费解的伪咕噜声>

> ID：16081246
> 
> 赞同：1
> 
> 时间：2013-04-18T11:07:16.923
> 
> 标签：cygwin, apache-pig

我正在尝试在运行 Vista 操作系统的 Windows PC 上安装 Apache Pig，以便将其用作学习工具；我不打算在这台机器上用 Pig 做任何严肃的数据处理。`-x local`我想要的是单节点、单 JVM设置。

我来自 Windows 背景，所以 UNIX 对我来说是一个重要的学习曲线，但是按照在线 Apache Pig 文档*Getting Started*中的建议，我已经安装了 cygwin，它似乎工作正常。*按照Getting Started*中的建议，我在我的 cygwin 下载和安装中包含了 Perl 包，这似乎也可以正常工作 - /bin 目录包含 perl.exe，我可以访问所有 Perl 文档。

然后，我下载了 pig-0.11.1，将其解压缩`tar -xzvf pig-0.11.1.tar.gz`并使用了我在尝试研究 Bash 参考手册并浏览 pig shell 脚本时遇到的错误，花了几天（大部分时间都很愉快）`pig -x local`，我想我现在已经非常了解了. 在此脚本中调整了对 cygwin 实用程序的调用`cygpath`，以便找到 pig.jar 并且传递给 java.exe 的参数仍然转换`cygpath`为 java.exe 可以理解的形式，我得到一个咕噜声提示。但我的欢呼是短暂的。

事实上，正如 RELEASE_NOTES.txt 所描述的那样，我在下载、安装和使用开箱即用的 pig-0.7.0 时得到了相同的 grunt 提示，`pig -x local`根本没有对其 pig shell 脚本进行任何篡改。但不幸的是，它与 pig-0.11.1 得到的咕噜声提示*相同*：一个奇怪的伪咕噜声提示，其中箭头键可以将光标移动到整个提示符上，实际上是在整个屏幕上，而不是之前给出的命令美元提示符，并且返回键（前面是;）除了将光标跳到新行之外什么都不做。文本可以写入但不能输入，并且只有 ^c 和 ^\ 似乎有效 - 幸运地返回了 bash 美元提示和一点理智。

*   在我的 pig-0.7.0 目录中，键入`bin/pig -help`会给出正确的读数：

    ```
    Apache Pig version 0.7.0 (r941408)<br />
    compiled May 05 2010, 11:15:55<br />
    USAGE: Pig [options] [-] : Run interactively in grunt shell.</br >
       Pig [options] -e[xecute] cmd [cmd ...] : Run cmd(s).<br />
    Pig [options] [-f[ile]] file : Run cmds found in file.
    options include: ... *etc etc*<br /> 
    ```

*   在我的 pig-0.7.0 目录中，键入`bin/pig -x local`会产生以下响应：

    ```
    13/04/18 10:37:51 INFO pig.Main: Logging error messages to: C:\cygwin\home\Richard\pig_installation\pig-0.7.0\pig_1366277871311.log<br />
    2013-04-18 10:37:51,540 [main] INFO  org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to hadoop file system at: file:///<br /> 
    ```

*   在任何目录中，由于我已将 PATH 设置为我的 pig-0.11.1/bin 目录，因此键入`pig -x local`会导致以下响应：

    ```
    which: no hadoop in (usr/local/bin:/cygdrive/c/Program Files ... *etc etc* .. )<br />
    2013-04-18 10:48:59,946 [main] INFO  org.apache.pig.Main - Apache Pig version 0.11.1 (r1459641) compiled Mar 22 2013, 02:13:53<br />
    2013-04-18 10:48:59,946 [main] INFO  org.apache.pig.Main - Logging error messages to: C:\cygwin\home\Richard\pig_installation\pig-0.7.0\pig_1366278539943.log<br />
    2013-04-18 10:48:59,965 [main] INFO  org.apache.pig.impl.util.Utils - Default bootup file C:\Users\Richard/.pigbootup not found<br />
    2013-04-18 10:49:01,404 [main] INFO  org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to hadoop file system at: file:///<br /> 
    ```

这是一个致命的错误还是我只是错过了一个技巧？pig-0.11.1 中的 pig shell 脚本似乎暗示如果未找到 hadoop，则 pig.jar 或 pig-?.!(*withouthadoop).jar（例如 pig-0.11.1.jar）将代替，并且文档告诉我，支持带有 cygwin 的 Windows 上的 pig（用于`-x local`但不支持`-x mapreduce`）。这个伪 grunt> 提示符是完全的海市蜃楼，还是表示部分成功？

*   上面的后记：我按照 Apache 的 Pig 文档*Getting Started*中的 Pig Tutorial 部分，设置环境变量，按照说明编辑 pig-0.7.0/tutorial/build.xml 文件，运行`ant`命令，创建 pigtutorial .tar.gz 文件，移动它，解压它，找到 pig 脚本 1 并运行`pig -x local script1-local.pig`它！输出文件 - part-r-00000 - 完全不包含任何警告，只有五列记录，正如预期的那样。但是，使用 获取交互模式的新尝试会`pig -x local`导致相同的伪 grunt> 提示。

# android - ListView 单选显示唯一选择

> ID：16081251
> 
> 赞同：2
> 
> 时间：2013-04-18T11:07:22.183
> 
> 标签：android, listview

我想要一个带有单一选择的列表视图。我使用 CheckedTextView，当用户单击一行时，我更新 CheckedTextView。如果他单击另一行，则旧选择会检索“正常” UI，而新选择会采用新 UI。

它在nexus 7（4.2.2）上运行良好，但在galaxy S II（4.0.4）上，我有一个案例，我选择了两行，我必须单击两次才能获得正确的行为。

我准确地说，我已经设置了这个属性：

```
setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
    <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.ecab"
    android:id="@+id/option"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:background="@drawable/ban_vhcl_list_off"
    android:gravity="center_vertical"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:text="@string/fake" /> 
```

这是我的适配器

```
private class OptionsAdapter extends ArrayAdapter<String> implements OnItemClickListener {
    private final List<String> options;
    public OptionsAdapter(List<String> pOptions) {
        super(VehiculeActivity.this, R.layout.vehicule_list_item);
        options = pOptions;
    }

    @Override
    public int getCount() {
        return options.size();
    }

    @Override
    public String getItem(int position) {
        return options.get(position);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null)
            convertView = LayoutInflater.from(VehiculeActivity.this).inflate(R.layout.vehicule_list_item, null);
        CheckedTextView option = (CheckedTextView) convertView.findViewById(R.id.option);
        option.setText(options.get(position));
        if (!option.isChecked()) {
            Log.d(Constants.D_TAG, "is NOT checked");
            option.setCompoundDrawablesWithIntrinsicBounds(0, 0, 0, 0);
            option.setBackgroundResource(R.drawable.ban_vhcl_list_off);
        } else {
            Log.d(Constants.D_TAG, "is checked");
            option.setCompoundDrawablesWithIntrinsicBounds(0, 0, R.drawable.check_box, 0);
            option.setBackgroundResource(R.drawable.ban_vhcl_list_on);
        }
        return convertView;
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        CheckedTextView option = (CheckedTextView) view.findViewById(R.id.option);
        option.setChecked(true);
        notifyDataSetChanged();
    }
} 
```

# php - ApnsPHP - 发送推送通知时出错

> ID：16081254
> 
> 赞同：1
> 
> 时间：2013-04-18T11:07:25.687
> 
> 标签：php, ios, apple-push-notifications, apns-php

我集成了推送通知库来发送推送通知。当我在本地机器上对其进行测试时，它运行良好，但是当我将库示例代码上传到实时服务器时，它抛出了错误，我将响应粘贴在下面...我发现整个响应中的真正错误是 --> 'ERROR ：无法发送消息 ID 1：缺少有效负载 (4)'。我需要帮助来解决这个问题。

```
Thu, 18 Apr 2013 12:58:29 +0200 ApnsPHP[17833]: INFO: Trying ssl://gateway.sandbox.push.apple.com:2195... 
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: INFO: Connected to ssl://gateway.sandbox.push.apple.com:2195.
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: INFO: Sending messages queue, run #1: 1 message(s) left in queue. 
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: STATUS: Sending message ID 1 [custom identifier: Message-Badge-33] (1/3): 45 bytes. 
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: ERROR: Unable to send message ID 1: Missing payload (4). 
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: INFO: Disconnected. Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: INFO: Trying ssl://gateway.sandbox.push.apple.com:2195... 
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: INFO: Connected to ssl://gateway.sandbox.push.apple.com:2195\. 
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: INFO: Sending messages queue, run #2: 1 message(s) left in queue. 
Thu, 18 Apr 2013 12:58:30 +0200 ApnsPHP[17833]: WARNING: Message ID 1 [custom identifier: Message-Badge-33] has an unrecoverable error (4), removing from queue without retrying... 
Thu, 18 Apr 2013 12:58:31 +0200 ApnsPHP[17833]: INFO: Disconnected. 
```

.

```
array(1) { [1]=> array(3) 
{ 
   ["MESSAGE"]=> object(ApnsPHP_Message)#3 (9) 
   { 
    ["_bAutoAdjustLongPayload:protected"]=> bool(true) ["_aDeviceTokens:protected"]=> array(1)
    { 
      [0]=> string(64) "FB7B2A31F06532EAD2973C1512A27A4F48FE22D9AFB9EE9F33B566B73A768935" 
    } 
   ["_sText:protected"]=> string(26) "Hello APNs-enabled device!" ["_nBadge:protected"]=> int(3) ["_sSound:protected"]=> string(7) "default" ["_bContentAvailable:protected"]=> NULL ["_aCustomProperties:protected"]=> array(2) 
  { 
    ["acme2"]=> array(2) { [0]=> string(4) "bang" [1]=> string(4) "whiz" } 
    ["acme3"]=> array(2) { [0]=> string(4) "bing" [1]=> string(4) "bong" } 
  }
  ["_nExpiryValue:protected"]=> int(30) ["_mCustomIdentifier:protected"]=> string(16) "Message-Badge-33" 
   } 
  ["BINARY_NOTIFICATION"]=> string(45) "QoÑô û{*1ðe2êÒ—&lt;¢zOHþ"Ù¯¹îŸ3µf·:v‰5" ["ERRORS"]=> array(1) { [0]=> array(5) { ["command"]=> int(8) ["statusCode"]=> int(4) ["identifier"]=> int(1) ["time"]=> int(1366282710) ["statusMessage"]=> string(15) "Missing payload" 
   }
  }
 }
} 
```

提前致谢

PS：谷歌群组中也有人发布了同样的问题，但没有解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T16:35:04.933

经过一天的测试，我找到了问题所在：json_encode 函数采用 5.3 PHP 版本的第二个参数“选项”：http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

在本地，我有 PHP V5.3.x，因此代码在 json_encode 函数中的第二个参数上运行良好。但是在实时服务器上，PHP 版本是 5.2.6，因此 json_encode 代码中的第二个参数会导致问题并抛出“Missing Payload”错误。我刚刚删除了第二个参数，它对我来说很好:)

# sql-server - t-sql：内置布尔函数之间的不兼容

> ID：16081258
> 
> 赞同：0
> 
> 时间：2013-04-18T11:07:34.493
> 
> 标签：sql-server, tsql

为什么内置布尔函数在`NULL`输入上的行为不同？例如 - 这个查询：

```
select 'ISDATE(null)'                 as function_call, 
        ISDATE(null) as result union all
select 'ISNUMERIC(null)'              as function_call, 
        ISNUMERIC(null) as result union all
select 'IS_MEMBER(null)'              as function_call, 
        IS_MEMBER(null) as result union all
select 'IS_SRVROLEMEMBER(null, null)' as function_call, 
        IS_SRVROLEMEMBER(null, null) as result 
```

给我们：

```
function_call                result
---------------------------- -----------
ISDATE(null)                 0
ISNUMERIC(null)              0
IS_MEMBER(null)              NULL
IS_SRVROLEMEMBER(null, null) NULL 
```

看起来`ISDATE`, 的`ISNUMERIC`行为符合布尔逻辑，但是`IS_MEMBER`, `IS_SRVROLEMEMBER`- 的行为符合[三值逻辑](http://en.wikipedia.org/wiki/Three-valued_logic)。不应该所有布尔函数在 NULL 输入上的行为都相同吗？ANSI SQL 标准对此有何规定？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:26:49.357

重新ANSI标准，后两个函数与ANSI SQL无关；它们是 MSSQL 特定的安全功能。这并不是说它们在其他 DBMS 中没有类似物，只是它们不是“典型的”UML 样式函数或标准的一部分。

事实上，在[这个*相当*权威的 O'Reilly 页面](http://oreilly.com/catalog/sqlnut/chapter/ch04.html)上搜索关于 ANSI 标准函数的术语“布尔”没有返回任何结果。可以由此推断，对于此类标量函数处理 NULL 没有 ANSI 方法。

在这些函数中需要三值逻辑以允许 NULL 表示输入*无效*。例如，请参阅[MSDN的](http://msdn.microsoft.com/en-us/library/ms186271.aspx)*备注*部分。[`IS_MEMBER()`](http://msdn.microsoft.com/en-us/library/ms186271.aspx)

（这种形式的 NULL 返回不应与例如可能返回值的聚合函数相混淆，或者如果其输入之一为 NULL，则为 NULL。）

没有什么可以阻止您“包装”这些功能以使其表现得像其他功能，如果那是您真正需要的。例如`ISNULL(IS_MEMBER(someValueFromATable),0)`。

如您所见，前两个函数返回一个有意义的布尔值。

`ISDATE(null)`，例如，返回 false 因为 null*不是*“*有效的日期、时间或日期时间**值***”（[MSDN](http://msdn.microsoft.com/en-au/library/ms187347.aspx)，我强调*值*）。

在 NULL 被解释为“未知”的情况下，`ISDATE()`当输入未知但在编程上不实用时，etc 返回“未知”在语义上是有意义的；当我们已经对`ISNULL()`.

在比较您确定的两种类型的函数时，在这种情况下，后者的返回不应为 NULL，因为虽然 NULL 不是日期，但它仍然是可以正确检查的*有效*数据通过这个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:10:51.683

我不觉得这些安全功能 ( `IS_SRVROLEMEMBER`) 的行为与系统/数据类型功能 ( `ISNUMERIC`) 不同，因为这些安全功能本质上是查询，结果可能会根据查询的人而改变。[返回值的含义，包括空值，在MSDN 文档](http://msdn.microsoft.com/en-us/library/ms174318.aspx)中对所有这些都进行了很好的说明。

更具体地说，对于`ISNUMERIC`and的参数`ISDATE`，如果参数为 null 与否，您可以提前很好地测试，所以我不确定返回 null 是必要的，或者是否有很多实用性。

对于安全函数的参数，您可能有非 null 参数，但这些函数以一种有用的方式构建，以在参数无效、未找到或您没有权限的情况下返回 null知道答案。

其中大部分内容当然可以被视为主观的，因此我投票结束这个问题，无论它可能多么有趣。

# git - 恢复合并 Git-Flow

> ID：16081260
> 
> 赞同：6
> 
> 时间：2013-04-18T10:41:17.130
> 
> 标签：git, git-flow

我正在使用 SourceTree 和 Git-Flow 模式。现在我已经为我的 beta 测试人员准备了一个版本来测试，所以我创建了一个新`release/v1.0.1`分支。但是我的想法一闪而过，我决定完成（合并`develop`并`master`标记）发布，即使我什至没有将发布发送给我的测试人员。因此，如果我的测试人员发现任何错误，我希望再次打开发布分支，我可以在发布分支中修复这些错误，然后当所有错误都修复后，我可以完成发布。

那么，我怎样才能最好地使用 SourceTree（或使用 git 命令）轻松地恢复到我拥有`release/v1.0.1`分支时的状态？

来自 SourceTree 的附加屏幕转储：

![在此处输入图像描述](https://i.stack.imgur.com/dBp0y.png)

**编辑：**好的，我做了`git reset --hard HEAD~2`on `develop`(HEAD~2)，因为我已经测试过手动签出。但是现在当我结帐`master`并做一个时`git reflog`，在我看来我应该在 HEAD~6 上做一个重置

```
Peters-MacBook-Pro:Remessage peterwarbo$ git reflog
f7663b1 HEAD@{0}: checkout: moving from develop to master
3d132da HEAD@{1}: reset: moving to HEAD~2
2f1c753 HEAD@{2}: checkout: moving from master to develop
f7663b1 HEAD@{3}: checkout: moving from develop to master
2f1c753 HEAD@{4}: merge release/v1.0.1: Merge made by the 'recursive' strategy.
4332fe4 HEAD@{5}: checkout: moving from master to develop
f7663b1 HEAD@{6}: merge release/v1.0.1: Merge made by the 'recursive' strategy.
fe323ef HEAD@{7}: checkout: moving from release/v1.0.1 to master
28a63ea HEAD@{8}: commit: Bumped version number to 1.0.1 
```

但是当我这样做时，我得到了这个“错误”：

```
Peters-MacBook-Pro:Project peterwarbo$ git reset --hard HEAD~6
fatal: ambiguous argument 'HEAD~6': unknown revision or path not in the working tree. 
```

**编辑 2：**新图像来说明他妈的。

![在此处输入图像描述](https://i.stack.imgur.com/Zo6T3.png)

**编辑 3：**附加新图像以说明在 user1615903 的答案中发出 git 命令后的当前状态。为什么说develop落后2？为什么`release/v1.0.1`即使我将 master 重置为初始提交（`fe323ef`），也会从 master 合并？

![在此处输入图像描述](https://i.stack.imgur.com/okb2K.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T11:21:43.353

这很容易。您需要做的事情是：

*   将开发分支重置为合并之前的提交

*   将主分支重置为合并之前的提交

*   让发布分支再次指向正确的提交

*   移除标签

*   将固定提交推送到远程

所以要做第1步和第2步：

```
git checkout develop
git reset --hard 4332fe4

git checkout master
git reset --hard <SHA of the commit the master was before the merge> 
```

然后“重新创建”发布分支：

```
git checkout -b "release/v1.0.1" 28a63ea 
```

最后删除标签：

```
git tag -d v1.0.1 
```

[有关在此 stackoverflow 问题](https://stackoverflow.com/questions/2389361/undo-a-git-merge)中撤消合并的更多信息

之后，如果更改已被推送，则需要使用 -f 开关覆盖远程中的更改：

```
git push -f 
```

并从远程删除标签：

```
git push --delete origin v1.0.1 
```

# ruby-on-rails-3 - Rails：检查数组中的值

> ID：16081265
> 
> 赞同：0
> 
> 时间：2013-04-18T11:07:54.570
> 
> 标签：ruby-on-rails-3

我有一个模型，称为 line_items。它包含价格字段。当用户输入价格时，它可以是 foodio_price 或 delivery_price。价格字段有很多这样的值。

我想检查一下。这是我的条件：

price 字段中的所有价格应为 foodio_price 或 delivery_price。如果不是，给出错误，如果是，给出是 foodio_price 还是 delivery_price。

任何人都可以帮助实施它吗？

我做了一些很肮脏但不起作用的事情：

```
 @line_items.each do |i|
          if i.price == i.product.foodio_price
              @line_items.each do |i|
                if i.price == i.product.delivery_price
                  render :action => "cart"
                end
              end
          else
              @line_items.each do |i|
                if i.price == i.product.foodio_price
                  render :action => "cart"
                end
              end
          end
      end 
```

它给出了太多渲染或重定向调用的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:17:17.097

线索在错误消息中——每个动作只能渲染或重定向一次。

尝试`return`在每次调用`render`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:28:53.243

我不清楚您的逻辑，但是您不能调用超过一个`render`或`redirect`每个操作，并且作为惯例，您应该只调用一个`redirect`或`render`在操作结束时调用。

但是，这可能会让您对您的逻辑有所了解：

```
@line_items.each do |i|
  product = i.product
  if ([product.foodio_price, product.delivery_price].include(i.price))
     #once of your prices
  else 
     #neither of your prices 
  end
end 
```

# javascript - XmlHttpRequest 状态 0 而不是 IE 10 中的 401

> ID：16081267
> 
> 赞同：17
> 
> 时间：2013-04-18T11:07:58.370
> 
> 标签：javascript, xmlhttprequest, cors, internet-explorer-10

我遇到了这个问题。我想这是某种 IE 错误，但我想确定一下。

所以问题是。为什么 IE10 XmlHttpRequest.status 返回 0 而不是 401？

```
var xmlhttp=new XMLHttpRequest();

xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4)
    {
      document.getElementById("rescode").innerHTML="Request completed with status: "+xmlhttp.status;
    }
  }
xmlhttp.open("GET","http://hosting.gregy.cz/cors/",true);
xmlhttp.send(); 
```

在此处查看 plunker：http://plnkr.co/edit/E2lCflPDHHaQi7t79IeM?p= [preview](http://plnkr.co/edit/E2lCflPDHHaQi7t79IeM?p=preview)

此代码触发 CORS 请求，该请求始终返回 401。Firefox 和 chrome 在状态属性中正确返回 401，但 IE10 返回 0。此问题破坏了我用于项目的身份验证处理方法。

谢谢

**编辑：**

我已经使用 onload 和 onerror 事件处理程序修改了 plunker（来自 monsur 评论的提示），但结果仍然相同。

我还确保 IE10 没有选择兼容模式。（来自 cernunnos 评论的提示）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-01T14:45:27.667

这似乎是 IE10 中的一个错误（[https://connect.microsoft.com/IE/feedback/details/785990/ie-10-on-win8-does-not-assign-the-correct-status-to-xmlhttprequest -当结果是 401 时](https://connect.microsoft.com/IE/feedback/details/785990/ie-10-on-win8-does-not-assign-the-correct-status-to-xmlhttprequest-when-the-result-is-401)）。

IE10 将 HTTP 状态 401 视为网络错误。控制台显示：

```
SCRIPT7002: XMLHttpRequest: Network Error 0x80070005, Access is denied 
```

根据 XMLHttpRequest Level 2 规范，如果设置了错误标志（例如由于网络错误），状态属性应该为零。然而，规范还指出（[http://www.w3.org/TR/XMLHttpRequest2/#infrastructure-for-the-send-method](http://www.w3.org/TR/XMLHttpRequest2/#infrastructure-for-the-send-method)）网络错误

> 不包括指示某种类型错误的 HTTP 响应，例如 HTTP 状态代码 410。

我认为很明显，HTTP 状态 401 不应因此被视为网络错误（因为它不在 Chrome、Firefox 和 Safari 中）并且这是 IE10 中的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-18T21:51:23.050

我今天刚遇到这个问题。在尝试了一些解决方法和一些谷歌搜索之后，我最终来到了这里。原来只是一个安全级别设置。无论您的网站位于哪个安全区域（Int​​ernet 选项 > 安全），请确保您在您的区域中启用以下设置：杂项 > 跨域访问数据源。

# css - joomla 1.5模板中的css定位

> ID：16081270
> 
> 赞同：0
> 
> 时间：2013-04-18T11:08:07.410
> 
> 标签：css, joomla-template

我一直在尝试制作一个 joomla 模板，左侧和右侧有一个固定宽度的栏。主 div 应该是响应式的。

我设法在这里创建了我想要的布局：http: [//dennybeulen.nl/rena/nl/over-ons.html](http://dennybeulen.nl/rena/nl/over-ons.html)

唯一不起作用的是左侧的菜单。当我更改 css 时，菜单有效，但布局不再正确。

如果我进行这些更改（刚刚删除了 130 前面的“-”），菜单就可以工作：

```
div.fluid{
     margin-left: 130px;
} 
```

希望有人能给我一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:20:02.877

看起来像是`div.fluid`覆盖了你的左栏。尝试进行`div.left`绝对定位并将您的设置`div.fluid`为没有左边距：

```
div.fluid{
    float: left;
    width: 100%;
    margin-right: -290px;
    margin-left: 0px;
}
div.left{
    position: absolute;
    width: 130px;
    min-height: 1px;
    padding-top: 10px;
} 
```

请记住， div.left 将不再影响浮动在它上面的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:30:51.913

@gaynorvader 是正确的，因为您的中间容器位于菜单顶部。除了将其定位为绝对，您还可以将所有内容保持原样，仅添加`position:relative;z-index:1`for `div.left`。

# database - 无法从 CGridView 访问多个表

> ID：16081272
> 
> 赞同：1
> 
> 时间：2013-04-18T11:08:13.327
> 
> 标签：database, yii, cgridview

当我试图在 yii 的单个 CGridView 中显示来自多个数据库表的数据时，我遇到了一个问题。

我已经搜索并参考了足够数量的文章。但我无法解决我的问题。

我有 2 个表名为 user_master 和 customer_master。对于每个客户，user_master 中也会有一个主记录。表格如下——

> **user_master -** user_id、name、email_id、状态 **customer_master** - customer_id、user_id、account_type、creation_date、状态

在 UserMaster.php 中，代码是...

```
<?php
public function relations()
{
return array('customer_master'=>array(self::HAS_ONE, 'CustomerMaster', 'user_id'),);
}
public function searchUsers()
{
public $user_type;
$criteria=new CDbCriteria;
$criteria->alias = 't';
$criteria->compare('t.user_id',$this->user_id);
$criteria->compare('t.name',$this->name,true);
$criteria->compare('t.email_id',$this->email_id,true);
$criteria->compare('t.status',$this->status);

$criteria->together = true; 
$criteria->with = array('customer_master');
$criteria->compare('customer_master.user_id',$this->user_id,true);
$criteria->compare('customer_master.user_type',$this->user_type,true);

return new CActiveDataProvider($this, array('criteria'=>$criteria, 
            'sort'=>array('defaultOrder'=>'user_id ASC',),));
}
?> 
```

在 CustomerMaster.php 中...

```
<?php
public function relations()
{
return array('user_id' => array(self::BELONGS_TO, 'UserMaster', 'user_id'),);
} ?> 
```

UserMasterController.php 的代码如下..

```
<?php
public function actionAdmin()
{
    $model=new UserMaster('search');
    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['UserMaster']))
        $model->attributes=$_GET['UserMaster'];

        $this->render('admin',array(
            'model'=>$model, ));
}
?> 
```

在 userMaster/admin.php

```
<?php

$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'user-master-grid',
    'dataProvider'=>$model->searchUsers(),
    'filter'=>$model,
    'columns'=>array(
        'user_id',
        'name',
        'status',
                'email_id',
        array(
            'name' => 'customer_master.user_type',
                        //'header' => 'customer_master.user_type',
            **'value' => $data->customer_master->user_type,**
                     ),

        array(
            'class'=>'CButtonColumn',
        ),
    ),
));
?> 
```

通过调用 userMaster/admin 页面，我得到了**Undefined variable: data**。

请任何人帮助我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:23:46.417

尝试：

```
'value' => '$data->customer_master->user_type',  // as a string! 
```

*值*是一个字符串，要作为 PHP 表达式进行评估...

# ios - ios 提前设置 UIDatePicker 时间

> ID：16081273
> 
> 赞同：0
> 
> 时间：2013-04-18T11:08:16.483
> 
> 标签：ios, nsdate, uidatepicker, nscalendar, nsdatecomponents

我抓住当前时间

```
NSDate * now = [[NSDate alloc] init];
NSCalendar *cal = [NSCalendar currentCalendar];
NSDateComponents * comps = [cal components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit fromDate:now]; 
```

我可以将 DatePicker 设置为我想要的任何值

```
NSDate * date = [cal dateFromComponents:comps];
[self.off setDate:date animated:TRUE]; 
```

但是我如何在“现在”中添加 5 分钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:10:42.793

试试这个

```
NSDate *date = [[NSDate date] dateByAddingTimeInterval:5*60]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:11:10.417

尝试

```
NSDate *now = [NSDate dateWithTimeInterval:300 sinceDate:[NSDate date]] 
```

# javascript - 如何从 jQuery ajax 调用 javascript 函数？

> ID：16081276
> 
> 赞同：0
> 
> 时间：2013-04-18T11:08:18.307
> 
> 标签：javascript, jquery, google-maps-api-2

我有 jQuery ajax 调用来从服务器获取结果，并且在成功时，代码应该调用不在 jQuery 区域代码中的 javascript 函数，所以我在 firebug 中遇到错误：函数调用没有引用。

这是我的代码（请参阅函数 addGMarker 中的 ajax 调用）：

```
function test1234(res) {
    PreInfo = res;

    popupContentHTML = deviceMoreinfo_callBack_ForGoogle(PreInfo);

    var sum = '<p>Please, Select <b>[Sensors Reading List]</b> tab to view vehcile sensors reading, and select <b>[Device Communication Commands]</b> tab to send commands for the device:</p><br/>';
    var tabs = [
new MaxContentTab('Sensors Reading List', maxContentDiv),
new MaxContentTab('Device Communication Commands', maxContentDivForCommands)];

    this.openMaxContentTabsHtml(map, popupContentHTML, sum, tabs, { maxTitle: "Sensors and Features" });

    var iw = map.getTabbedMaxContent();
    iw.id = this.id;

    GEvent.addListener(iw, 'selecttab', function (tab) {
        var node = tab.getContentNode();

        switch (tab.getLabel()) {
            case 'Sensors Reading List':
                maxContentDiv.innerHTML = '<IMG SRC="../../../images/FullModeIcons/LoadingImage.gif" /> Loading...';
                //GetSensorsReading(this.id, ClientID, "En", GetSensorsReading_CallBack);
                jQuery.ajax({
                    type: "POST",
                    url: "../../../DevicesManagerAjax.asmx/GetSensorsReading",
                    data: "{Device_ID: '" + this.id + "', ClientID: '" + ClientID + "', Page_ID: 'En'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    timeout: 70000,
                    success: function (msg) {
                        var res = msg.d;
                        GetSensorsReading_CallBack(res);
                    },
                    error: function (xhr, status, errorThrown) {
                        alert("An error occered, " + errorThrown);
                    }
                });
                break;
            case 'Device Communication Commands':
                maxContentDivForCommands.innerHTML = '<IMG SRC="../../../images/FullModeIcons/LoadingImage.gif" /> Loading...';
                //GetContorolableSensors(this.id, ClientID, "En", GetContorolableSensors_CallBack);
                jQuery.ajax({
                    type: "POST",
                    url: "../../../DevicesManagerAjax.asmx/GetContorolableSensors",
                    data: "{Device_ID: '" + this.id + "', ClientID: '" + ClientID + "', Page_ID: 'En'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    timeout: 70000,
                    success: function (msg) {
                        var res = msg.d;
                        GetContorolableSensors_CallBack(res);
                    },
                    error: function (xhr, status, errorThrown) {
                        alert("An error occered, " + errorThrown);
                    }
                });
                break;
        }
    });
}

function addGMarker(ID, point, Marker_Icon) {
    icon = new GIcon(G_DEFAULT_ICON);

    if (_IconClientID == "0") {
        if (Marker_Icon == "blue") {
            if (ID == FollowVechicleID) {
                icon.image = "../../Images/Icons/" + _Follow_Icon;
            }
            else {

                icon.image = "../../Images/Icons/" + _Normal_Icon;
            }

            if (ID == FollowVechicleID) {
                ShowLastThreePositions();
            }
        }
        else {

            icon.image = "../../Images/Icons/" + _Speed_Icon;
        }
    }
    else {
        if (Marker_Icon == "blue") {
            if (ID == FollowVechicleID) {

                icon.image = "../../Images/Icons/ClientsIcons/" + _Follow_Icon;
            }
            else {

                icon.image = "../../Images/Icons/ClientsIcons/" + _Normal_Icon;
            }
        }
        else if (Marker_Icon == "red") {

            icon.image = "../../Images/Icons/ClientsIcons/" + _Speed_Icon;
        }
    }

    icon.iconSize = new GSize(32, 32);
    icon.dragCrossSize = new GSize(0, 0);
    icon.shadowSize = new GSize(32, 32);
    icon.iconAnchor = new GPoint(5, 5);

    marker = new GMarker(point, icon);
    marker.id = ID;

    GEvent.addListener(marker, 'click',
        function() {
            popupContentHTML = Device_Option_forGoogle(this.id);
            this.openInfoWindowHtml(popupContentHTML);
        }
        );

    GEvent.addListener(marker, 'mouseover',
                         function() {
                             //PreInfo = getDeviceInfoForPopUp(this.id, ClientID, "En");

                             jQuery.ajax({
                                 type: "POST",
                                 url: "../../../DevicesManagerAjax.asmx/getDeviceInfoForPopUp",
                                 data: "{deviceID: '" + this.id + "', IDclient: '" + ClientID + "', Page: 'En'}",
                                 contentType: "application/json; charset=utf-8",
                                 dataType: "json",
                                 timeout: 70000,
                                 success: function (msg) {
                                     var res = msg.d;
                                     test1234(res);
                                 },
                                 error: function (xhr, status, errorThrown) {
                                     alert("An error occered, " + errorThrown);
                                 }
                             });

                         });

    var markers = [];
    markers.push(marker);

    mgr.addMarkers(markers, 0);
    mgr.refresh();
    ClientPOI.refresh();
    POImgr.refresh();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:27:57.173

它与从 jQuery 调用 Javascript 函数的代码相同。它工作正常。问题出在代码的其他地方。

这可能不是确切的解决方案，但不要偏离解决方案。

```
function test1234(res) {
    alert(res)
}

function Test() {
    jQuery.ajax({
        type: "POST",
        url: "/TestWebApp/ProcessServlet.do",
        success: function (res) {
            alert(res);
            test1234(res);
        },
        error: function (xhr, status, errorThrown) {
            alert("An error occered, " + errorThrown);
        }
    });
} 
```

# algorithm - Algorithm for impelemnting a survey-like program

> ID：16081280
> 
> 赞同：0
> 
> 时间：2013-04-18T11:08:27.497
> 
> 标签：algorithm, pattern-matching, survey

I wish to create a program in Java which will ask the user a number of questions and report some results. It is pretty much like a survey. In order to explain the problem better consider the following example: Let’s say that there are currently 4 questions available eg Qa, Qb, Qc and Qd. Each question has a number of possible options:

=> Question A has 4 possible options a1, a2, a3 and a4.

=> Question B has 3 possible options b1, b2 and b3

=> Question C has 5 possible options c1, c2, c3, c4 and c5

=> Question D has 2 possible options d1 and d2

Moreover there are some results available which will be reported based on the user’s answers in the above questions. Let’s assume that there are 5 such results called R1, R2, R3, R4 and R5\. Each result has a number of characteristics. These characteristics are really answers to the above questions. More precisely:

=> The characteristics of R1 is the set of {Qa = a4, Qb = b2, Qc = c2, Qd = d1} This says that R1 is related with Qa via the a1 option, with Qb via the b2 option and so on

=> R2: {Qa = a3, Qb = b3, Qc = c3, Qd = d2}

=> R3: {Qa = a4, Qb = b1, Qc = c1, Qd = d2}

=> R4: {Qa = a2, Qb = b2, Qc = c5, Qd = d1}

=> R5: {Qa = a1, Qb = b3, Qc = c4, Qd = d2}

Let’s say that a user U provides the following answers to the questions {Qa = a4, Qb = b1, Qc = c1, Qd = d1}

The purpose of the program is to report the result which is closer to the user answers along with a percentage of how close it is. For instance since there is no any result which matches 100% the user answers the program should report the results which match as more answers as possible (above a certain threshold eg 50%). In that specific case the program should report the follow results:

=> R3 with 75% (since there are 3 matches on the 4 questions)

=> R1 with 50% (since there are 2 matches on the 4 questions)

Notice that R4 has one match (so 25%) whereas R2 and R5 have no matches at all (so 0%). The main issue on implementing the above program is that there are a lot of questions (approximately 30) with a number of answers each (3-4 answers each). I am not aware of an efficient algorithm which can retrieve the results which are closer to the user answers. Notice that the way that these results are stored is not important at all. You can assume that the results are stored in a relational database and that SQL query is used to retrieve them.

The only solution I can think of is to perform an exhaustive search but this not efficient at all. In other words I am thinking to do the following:

=> First try to retrieve results which match exactly the user answers: {Qa = a4, Qb = b1, Qc = c1, Qd = d1}

=> If no results exist then change the option of a question (eg Qa) and try again. For example try: {Qa = a1, Qb = b1, Qc = c1, Qd = d1}

=> If there is still nothing then try the rest possible options for Qa eg a2, a3

=> If there is still nothing then give Qa the initial user answer (that is a4) and move to Qb to do something similar. For example try something like: {Qa = a4, Qb = b2, Qc = c1, Qd = d1}

=> If after trying all the possible options for all questions one by one there are any results then try changing the options of COMBINATIONS of questions. For example try change the options of two questions at the same time (eg Qa and Qb): {Qa = a1, Qb = b2, Qc = c1, Qd = d1}

=> Then try combinations of three questions and so on...

Clearly the above algorithm would be extremely slow on a large number of questions. Is there any known algorithm or heuristic which is more efficient than the above algorithm?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:37:44.363

"Only" 30 Questions?
Then the following "stupid" algorithm will probably be faster than any highly "intelligent" and complicated algorithm.

```
iterate over characteristics
    score = 0
    iterate over questions
        if questions's answer is right in current characteristic
            score++ 
```

Then add a variable which keeps track of the maximum value and matching characteristic and you are set.

Runtime is `size of characteristics * size of questions`, whereas the algorithm you are describing can have exponential runtime, and on top of that is much more complicated both for programming and for executing (due to effects as branch misprediction)

# javascript - 获取父元素属性值

> ID：16081282
> 
> 赞同：9
> 
> 时间：2013-04-18T11:08:33.187
> 
> 标签：javascript, xml, xpath

这是我的 xml 文档：-

```
<root>
    <child_1 entity_id = "1" value="india">
        <child_2 entity_id = "2" value="gujarat">
            <child_3 entity_id = "3" value="Ahemdabad"/>
            <child_4 entity_id = "4" value="Surat"/>
            <child_5 entity_id = "5" value="Rajkot"/>           
        </child_2>
    </child_1>
</root> 
```

这是我的 javascript html 代码：-

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        var ind_sex;
        $.get(
        "code.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );
        function get_list() {
            var city = $('#name').val();
            alert(city);
            var xPath = '//*[@value = "city"]' + 
                            '/../../@value';

          var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }

            $("#result").text(str);
        }
    </script>
</head>
<body>
<input type="text" id="name"></input>
    <input type="button" name="button" value="Search" onclick="get_list()">
    <div id="result">
    </div>
</body>
</html> 
```

在这里，我尝试在文本框中输入城市名称，如果它与我的 xml 文件匹配，那么它会将国家名称返回给我。
我没有收到任何错误，但没有得到结果。
我认为我的 xPath 中的问题请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-21T16:42:53.177

**使用**：

```
var xPath = '//*[@value = "' + city + '"]/../../@value'; 
```

**一个等价的表达式是**：

```
var xPath = '//*[*/*[@value = "' + city +  ']]/@value'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:04:02.143

据我记得，列表不是那样工作的......它们是与给定值关联的变量，所以它更像是：

`list($a, $b, $c) = [1, 2, 3];`

无论如何，您为什么不看一下[phpredis](https://github.com/nicolasff/phpredis#lists)页面中的“列表”部分？它是 Redis 的推荐 PHP 客户端之一，它的示例非常清晰

# eclipse - Aptana 制表符缩进指南

> ID：16081286
> 
> 赞同：1
> 
> 时间：2013-04-18T11:08:36.750
> 
> 标签：eclipse, indentation, aptana

我最近从 geany 搬到了 Aptana，因为我正在处理一些更大的项目，并且觉得我会从完整的 IDE 中受益。

我真正缺少的一个功能是每四个空格的小灰线，以帮助我保持缩进的一致性。Aptana/Eclipse 是否存在类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T02:23:16.713

获取 PDT 工具 Indent Guide 插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T10:56:43.580

在 *Preferences -> General -> Editor -> Texteditor 下*，您可以激活*"Show whitespace characters"*。如果单击“空白字符”，您可以定义应显示哪个字符。在这里您可以激活“标签”。它不如 Notepad++ 中的线条好，但总比没有好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T15:35:38.700

您可以在“首选项”>“常规”>“编辑器”>“文本编辑器”中设置打印边距指示器（垂直线）——但这只会是一行。您可以使用制表符代替空格 - 使用 Tab 键时可以选择插入空格。在同一个菜单中，您可以选择显示空白字符，这将有助于保持间距有序。我不知道任何网格选项。

# c++ - 命名空间混淆

> ID：16081289
> 
> 赞同：5
> 
> 时间：2013-04-18T11:08:43.277
> 
> 标签：c++, namespaces

我是命名空间的新手，正在*C++ Primer中尝试这个*

```
#include<iostream>
namespace Jill 
{
 double bucket;
 double fetch;
 struct Hill{ };
}

double fetch;

int main()
{
 using namespace Jill;
 Hill Thrill;
 double water = bucket; 
 //double fetch; //<<<<<<<<<<<<//
 std::cin>> fetch;
 std::cin>> ::fetch;
 std::cin>> Jill::fetch;
 std::cout<<"fetch is "<<fetch;
 std::cout<<"::fetch is "<< ::fetch;
 std::cout<<"Jill::fetch is "<< Jill::fetch;
}

int foom()
{
 Jill::Hill top;
 Jill::Hill crest;
} 
```

当标记的行`//<<<<<<<<<<<<//`没有被评论时，我会得到预期的结果。即 `local`变量隐藏了`global`and `Jill::fetch`。但是当我注释掉它时，还有 2 fetch left 。`global fetch`和`Jill::fetch`。并且编译器给出了错误

```
namespaceTrial1.cpp:17:13: error: reference to ‘fetch’ is ambiguous
namespaceTrial1.cpp:9:8: error: candidates are: double fetch
namespaceTrial1.cpp:5:9: error:                 double Jill::fetch
namespaceTrial1.cpp:20:26: error: reference to ‘fetch’ is ambiguous
namespaceTrial1.cpp:9:8: error: candidates are: double fetch
namespaceTrial1.cpp:5:9: error:                 double Jill::fetch 
```

我的**问题**是为什么~~编译器会感到困惑~~，这会导致歧义？为什么它不假设`fetch`只是`Jill::fetch`，因为我`using namespace Jill`在开头添加了`main()`

如果我`using Jill::fetch;`在 main 开头使用声明性，问题就解决了。因为`using Jill::fetch`使它好像它已在该位置声明。所以，它就像有一个`local fetch`变量。[我是正确的吗？] 为什么`using declaration`表现得好像变量是在那个位置声明的而`using directive`不是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:20:30.557

当你声明一个覆盖全局/命名空间变量的局部变量时，你*明确地*告诉编译器这一点。但是，当您使用`using`命名空间的变量时，实际上并没有在本地范围内结束。

根据规范（第 7.3.4 节，第 3 点）：

> *using 指令*不会将任何成员添加到它出现的声明区域。

另外（来自同一部分，第 6 点）：

> 如果名称查找在两个不同的命名空间中找到一个名称的声明，并且这些声明没有声明相同的实体并且没有声明函数，则该名称的使用是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T11:15:42.043

`using namespace`不会优先考虑它导入的名称，从而导致您已经观察到的内容。

这里出现歧义错误是语言设计决策：存在这种优先级是相当危险的。想象一下，`Jill`命名空间是一个很大的命名空间，由可能来自不同组织的几个开发人员维护。您对其内容没有或有限的控制权，并且仍然对其内容进行更改可能会默默地改变程序的含义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T12:33:24.227

using 指令以对大多数程序员来说并不完全直观的方式修改名称查找。标准在 [namespace.udir]p2 中说明了这一点：

> 在非限定名称查找 (3.4.1) 期间，名称看起来好像它们是在最近的封闭命名空间中声明的，其中包含使用指令和指定命名空间。

这种措辞意味着来自命名空间的名称不会出现在当前范围内，*而是出现在某个外部范围内*。在您的示例中， using 指令位于全局命名空间中的函数中，而 Jill 也在全局命名空间中，因此 Jill 的名称看起来好像它们在全局命名空间中。（正如 Joachim 所说，这些名称实际上并没有在那里引入，因此它们不会立即与现有名称冲突，并且**您只会在实际使用它们时得到模棱两可的查找**。）

这是一个简单的案例，编译器会给你一个错误，这很好。它实际上可以变得比这更复杂。

```
namespace Outer {
  namespace Mid1 { int i = 1; }
  namespace Mid2 {
    namespace Tricky {
      int i = 2;
      namespace Inner {
        void f() {
          using namespace Mid1;
          std::cout << i;
        }
      }
    }
  }
} 
```

这将输出 2，而不是 1，即使您在引用 i 的行旁边有 using 指令。但是最近的包含`Mid1`using 指令和 using 指令的封闭命名空间是`Outer`，因此`Mid1::i`就像在 中声明它一样`Outer`。如果你有一个`Outer::i`，它会被 遮住`Tricky::i`，而且`Mid1::i`票价也不会更好。

一个简单的解决方案是禁止 using 指令，只使用 using 声明和命名空间别名。它们更加直观。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T11:26:08.093

[basic.scope.declaration] 表示局部变量在声明后隐藏了全局变量

```
int j = 24;
int main() {
int i = j, j;
j = 42;
} 
```

> 标识符 j 被声明为名称两次（并使用了两次）。第一个 j 的声明区域包括整个示例。第一个 j 的潜在范围紧随 j 之后开始并延伸到程序的末尾，但它的（实际）范围不包括 , 和 } 之间的文本。j 的第二个声明的声明区域（分号之前的 j）包括 { 和 } 之间的所有文本，但它的潜在范围不包括 i 的声明。j 的第二个声明的范围与它的潜在范围相同。

这解释了为什么声明局部变量时没有错误。

如果未声明局部变量，则会发生名称冲突。编译器无法决定选择哪个`fetch`，并引发错误。

# mysql - Selecting the date of the previous record when dates are non-consecutive in SQL?

> ID：16081294
> 
> 赞同：0
> 
> 时间：2013-04-18T11:09:09.250
> 
> 标签：mysql, sql, database

I am using the following SELECT statement within a cursor in a procedure.

```
SET @chng = (   SELECT Tcle - cls 
                FROM dly
                WHERE dt = SUBDATE(Tdt, INTERVAL 1 DAY);
                AND dly.nms_id = Tnms_id); 
```

`Tdt` is the date of the current record.

The problem I have is that the records in my table do not have consecutive dates. So records in dly will have dates `'11-01-2010'` then `'12-01-2010'` and then `'15-01-2010`' due to the weekend between.

That is where my `SELECT` statement is flawed as if it is run on `'15-01-2010`' as `Tdt`, then:

```
WHERE dt = '14-01-2010' 
```

but I want it to select the previous records date:

```
WHERE dt = '12-01-2010' 
```

So is there a way to SELECT the previous records date?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:18:19.803

在这种情况下，我将取所有日期早于指定行的行，按日期列按降序对它们进行排序，然后只取最后一个，如下所示（突出显示对当前语句的必要更改） ：

```
SET @chng = (   SELECT Tcle - cls 
                FROM dly
                WHERE dt **< Tdt**
                AND dly.nms_id = Tnms_id
                **ORDER BY dt DESC
                LIMIT 1**); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:17:31.410

使用以下查询

选择 MAX(Tcle - cls) 从 dly WHERE dt < Tdt AND dly.nms_id = Tnms_id

# javascript - Drop down menu hiding menus

> ID：16081297
> 
> 赞同：0
> 
> 时间：2013-04-18T11:09:15.360
> 
> 标签：javascript, css

I'm building a drop down menu for a project I'm working on, but I don't get it working entirely as is should. I want it to show the sub-menus when I hover the root-level menus, and then close again after a short delay when the menu or sub-menu is not hovered anymore. Most of it works; the sub-menus are showed when root-level items are hovered and it is hidden when I stop hovering the root-level item. The problem is that the sub-menus are also hidden when I move my cursor from the root-level item to a sub-menu item **other than the first** and hover that. This is obviously not good, so help would be appreciated.

I [created a JSFiddle](http://jsfiddle.net/GANeX/4/) with the code which shows the issue more clearly.

So, here's my code:

**menu.htm**

```
<div id=m_wrapper>
    <ul id=menu>
        <li onMouseOver="show_sub_menu('0')" onMouseOut="start_timer()">Item 1
            <div id=s0 onMouseOver="show_sub_menu('0')" onMouseOut="start_timer()">
                <a href=#>Item 1.1</a>
                <a href=#>Item 1.2</a>
                <a href=#>Item 1.3</a>
            </div>
        </li>
    </ul>
</div> 
```

**menu.css**

```
#m_wrapper {
    position:relative;
    display:table;
}
#menu {
    position:relative;
}
#menu li {
    width:100px;
    position:relative;
    float:left;
    list-style-type:none;
}
#menu div {
    position:absolute;
    visibility:hidden;
    display:inherit;
    width:100%;
    z-index:30
}
#menu div a {
    position:relative;
    display:block;
    z-index:35;
} 
```

**menu.js**

```
var countdown = 300;
var timer = null;
var menu_item = null;

window.show_sub_menu = function(cath) {
    if (menu_item) {
        menu_item.style.visibility = 'hidden'; //Make sure to show one menu at a time
    }

    menu_item = window.document.getElementById("s" + cath);
    menu_item.style.visibility = 'visible'; //Show menu

    if (timer) {
        window.clearTimeout(timer); //Reset timer, so menu is kept open
        timer = null;
    }
};

window.start_timer = function() {
    timer = window.setTimeout(close_sub_menu, countdown);
};

window.close_sub_menu = function() {
    menu_item.style.visibility = 'hidden';
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:18:57.940

纯 CSS 下拉菜单

[http://jsfiddle.net/steelywing/GANeX/8/](http://jsfiddle.net/steelywing/GANeX/8/)

```
.nav {
    background-color: #def;
    height: 20px;
}

.nav * {
    transition: all 0.4s ease 0s;
    -moz-transition: all 0.4s ease 0s;
    -webkit-transition: all 0.4s ease 0s;
    -o-transition: all 0.4s ease 0s;
}
li {
    display: inline-block;
    height: 20px;
}

.dropdown li {
    display: block;
}

.dropdown ul {
    visibility: hidden;
    opacity: 0;
    margin-top: -2px;
}

.dropdown:hover ul {
    visibility: visible;
    opacity: 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:08:19.580

这可以很容易地单独使用 HTML 和 CSS 来实现。使用 CSS 过渡，我们可以在鼠标悬停时使菜单消失。

**例子**

我也把这个放在[JsFiddle](http://jsfiddle.net/MzQ2B/)

**HTML**

```
<nav>
    <ul id="menu">
        <li>
            <a href="#">Home</a>
            <ul>
            <li>Item1</li>
            <li>Item2</li>
            <li>Item3</li>                                
            </ul>
        </li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</nav> 
```

**CSS**

```
#menu li
{
    position: relative;  
    display: inline;
    list-style: none;
    padding-left: 15px;  
}

#menu ul
{
    margin: 0;
    padding: 0;
    list-style: none;    
    opacity: 0;
    position: absolute;
    top: 20px;
    left: 5px;
    // Transitions for our fade effect.
    -webkit-transition: opacity 2s ease-in-out; 
    -moz-transition: opacity 2s ease-in-out;
    -ms-transition: opacity 2s ease-in-out;
    -o-transition: opacity 2s ease-in-out;
    transition: opacity 2s ease-in-out;   
}

#menu ul li
{
    display: block;    
}

#menu li:hover > ul
{
    opacity: 1;    
    // This stops the transition from happening on hover.
    -webkit-transition: none; 
    -moz-transition: none;
    -ms-transition: none;
    -o-transition: none;
    transition: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:02:36.617

你不必让它那么复杂。

当然你也可以通过 javascript 来做同样的事情，但是通过 jQuery 来看看它是多么容易、可读和简单。

看这个[演示](http://jsfiddle.net/GANeX/7/)

只需使用以下脚本

```
$('#menu li').hover(
    function(){
            $(this).stop().animate({height: '100px'},1000,function(){});
            $(this).find('div').show(600);
        }//gets called upon mousehover
    ,
    function(){
            $(this).stop().animate({height: '20px'},1000,function(){});
        } //gets called upon mouseout
  ); //hover ends 
```

而且，我不知道你为什么要写大量的 CSS。只需使用这些：

```
#menu
{
    list-style:none;
}
#menu li
{
    width:100px;
    border:1px Solid #CCC;
    text-align:Center;
    cursor:pointer;
    height:20px;
    overflow:hidden;

}
#menu li div
{
    border:1px Solid #CCC;
}
#s0 
{
    height:auto;
}
#s0 a
{
    display:block;
} 
```

您可以通过它做很多事情，例如选定的下拉项目。通过箭头键选择什么不是。jQuery 让你变得简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:58:57.570

首先你应该避免`<div>`在`<li>`标签中，因为它不是语义的。

很好的是仅使用 html 和 css 样式构建的多级菜单。

**HTML**

```
 <div id=m_wrapper>
     <ul id=menu>
            <li>Item 1
                <ul>
                    <li><a href=#>Item 1.1</a></li>
                    <li><a href=#>Item 1.2</a></li>
                    <li><a href=#>Item 1.3</a></li>
                </ul>
            </li>
            <li>Item 2</li>
     </ul>
 </div> 
```

**CSS 样式**

```
#m_wrapper, #menu, #menu li  {
    position:relative; 
}
#m_wrapper {
    display:table; 
}
#menu li {
    float:left;
    width:100px;
    list-style-type:none;
}
#menu li ul {
    display: none;
}
#menu li:hover ul {
    display: block;
    margin: 0 10px;
    padding: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T12:20:44.850

请记住..如果您决定实现淡入淡出版本，您应该使用跨浏览器不透明度，如下所示：

```
 -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
 filter: alpha(opacity=100);
 -moz-opacity: 1;
 -khtml-opacity: 1;
 opacity: 1; 
```

# javascript - 在任何输入上触发功能

> ID：16081298
> 
> 赞同：0
> 
> 时间：2013-04-18T11:09:16.140
> 
> 标签：javascript

我希望在任何输入框上的按键上触发一个 javascript 函数。我尝试使用`getElementsByTagName.onkeyup`但没有用。连同解决方案，请发送一个有效的 jsfiddle。我不想要`document.getElementById`或者`onkeyup="function()"`因为有很多输入框。它不会看起来很整洁。我什至试过

```
$(document).ready(function(){
$('input').onkeyup(function(){
calculate();
})
}) 
```

我还想要一个函数，它将 0 添加到 window.onload 上每个输入的值。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:12:01.637

[**DEMO**](http://jsfiddle.net/TMtKM/1/) jQuery tru中没有`onkeyup`事件可以更改为`keyup`

```
 $(document).ready(function(){
      $('input').keyup(function(){
      calculate();
      })
    }) 
```

[. **键（）**](http://api.jquery.com/keyup/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:13:50.943

尝试

```
document.onkeyup = function () {
  if (document.activeElement.tagName.toUpperCase() !== 'input') return;
  // do sth. here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:13:59.440

这应该做keyup部分：

[http://jsfiddle.net/pwqx7/](http://jsfiddle.net/pwqx7/)

```
$(function() {
$('input').bind('keyup', function() {
      alert($(this).attr('id'));
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:13:17.063

尝试

```
$(document).ready(function() {
    $(document).on('keyup', 'input', function() {
        calculate();
    })
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/DWhs7/)

# android - I Have a database in ".Sql" format. I would like to convert this database to ".sqlite" format .in runtime

> ID：16081302
> 
> 赞同：-5
> 
> 时间：2013-04-18T11:09:24.780
> 
> 标签：android, database

I Have a database in ".Sql" format on my local server . I would like to convert this database to ".sqlite" for my android matchine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:29:28.913

为您提供转换器列表

[http://www.sqlite.org/cvstrac/wiki?p=ConverterTools](http://www.sqlite.org/cvstrac/wiki?p=ConverterTools)

您可以在服务器中转换它们并在手机中下载 .sqlite 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:13:42.503

您应该解析 sql 文件并在 SQLiteOpenHelper 类的 onCreate 方法中执行查询。[这](https://stackoverflow.com/questions/660609/sql-parser-library-for-java)是解析 sql 文件的一些帮助。

# php - How can I make my function execute even when no parameter is entered?

> ID：16081305
> 
> 赞同：0
> 
> 时间：2013-04-18T11:09:36.157
> 
> 标签：php, function, arguments, switch-statement

I'm teaching myself PHP through a book and to make this easier I made myself a function to save myself having to write `echo "<br/>";` a million times. My function works fine but after accidentally leaving out a parameter and getting an error I tried to make it so that if I left the function empty it would simply add one `<br/>` but I can't seem to get it to work.

Here is my code after my last attempt (which was to try `case NULL: echo "<br/>";`):

```
function br($break){
    switch ($break){
        case 1:
            echo "<br/>";
            break;
        case 2:
            echo "<br/><br/>";
            break;
        case 3:
            echo "<br/><br/><br/>";
            break;
        case 4:
            echo "<br/><br/><br/><br/>";
            break;
        case 5:
            echo "<br/><br/><br/><br/><br/>";
            break;
        case NULL:
            echo "<br/>";
    }

} 
```

Any ideas? Thanks guys!

P.s. Sorry if this is a really silly question, I only started learning PHP on Monday and my programming experience is somewhat limited :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:10:13.460

试试这样：

```
function br($break = 1){

} 
```

顺便说一句，对于您的情况，您实际上可以使用：

```
echo str_repeat('<br />', 5); 
```

这将创建 5 个 br，请看这里： http: [//php.net/str_repeat](http://php.net/str_repeat)
另外，当您对某事有疑问时，第一次检查 php.net 文档，可能有一个功能可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:11:09.400

如果 yopu 默认想要 1 br，你可以这样做：

```
function br($break = 1){

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:21:00.127

根本不使用 switch 可能更容易，而是做这样的事情：

```
function br($break = null)
{
    if(!is_null($break)) {
        echo str_repeat('<br />', (int) $break);
    } else {
        echo '<br />';
    }
} 
```

（未测试）

# magento-1.7 - How to show the data added in Admin tool to front end in magento

> ID：16081306
> 
> 赞同：0
> 
> 时间：2013-04-18T11:09:39.423
> 
> 标签：magento-1.7

I have added some products in admin panel. In admin panel under manage products , those are getting displayed.

But these products are not displaying in front end. I am a newbie to magento. I looked into userguide. But of no use.

How to display the products in front end?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:22:37.083

在管理产品下的管理面板中创建产品时，有几件事需要注意。

1.  在常规子选项卡下，请检查您是否更改了“状态”=“启用”
2.  在常规子选项卡下，请检查您的“可见性”是否=“目录，搜索”。这将显示目录下的产品，并且您在搜索时也会在前端获得产品。
3.  在库存子选项卡下，请检查您是否添加了“数量”> 0 和“库存可用性”=“库存”。有时这会在前端显示产品产生问题。
4.  在类别子选项卡下，请检查您是否已将产品分配到您希望在其下查看产品的类别/子类别。
5.  在网站子选项卡下，分配给网站。

# opencv - 通过单应矩阵转换向量时出错 - C++ OpenCV

> ID：16081310
> 
> 赞同：0
> 
> 时间：2013-04-18T11:09:57.403
> 
> 标签：opencv

我有 2 帧由移动（非常慢）的相机完成的视频流；在使用（通过 OpenCV）SIFT 算法和 findHomography OpenCv 函数后，我得到了描述相机在 2 帧之间完成的运动的变换矩阵。我想做的是在第二帧中找到第一帧的一个点：所以我的代码是：

```
H = findHomography( point1, point2, CV_RANSAC );  //compute the transformation matrix using the
                                       // matching points (the matrix is correct, i checked it)
Mat dstMat(3, 1, H.type());    
vector<Point3f> vec;
Mat srcMat(3, 1, H.type());
vec.push_back(Point3f(Ptx,Pty,-1));   // fill the 3x1 vector with the coordinate
                                         // of the interest point in frame 1
srcMat= Mat(vec).reshape(1).t();     //conversion of vec in Mat (the vector is correct, i checked it)
dstMat = H*srcMat;     //compute the arrival point in frame 2  // ERROR 
```

但是，在写入错误的地方，我收到以下错误：OpenCV Error: Assertion failed (type == B.type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == gemm 中的 CV_64FC2))，文件 /tmp/buildd/ros-fuerte-opencv2-2.4.2-1precise-20130312-1306/modules/core/src/matmul.cpp，第 711 行终止在抛出 'cv: 实例后调用： :Exception' what(): /tmp/buildd/ros-fuerte-opencv2-2.4.2-1precise-20130312-1306/modules/core/src/matmul.cpp:711: 错误: (-215) type == B .type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == CV_64FC2) 在函数 gemm

中止（核心转储）

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:27:06.540

你的代码有点复杂。特别是，它不确定该`reshape`方法的大小条目，然后转置的效果，因为您还指定了之前的大小`srcMat`。

您可以尝试以下方法：

```
cv::Mat srcMat(3, 1, CV_32F); // Allocate a 3x1 column vector (floating point)

srcMat.at<float>(0,0) = Ptx;
srcMat.at<float>(1,0) = Pty;
srcMat.at<float>(2,0) = -1.0;

dstMat = H * srcMat;  // Perform matrix-vector multiplication 
```

请注意，您实际上并不需要`dstMat`事先分配；它由 OpenCV 自动完成。
Yuu 也应该检查 的类型`H`，我不确定`cv::findHomography`返回单精度还是双精度矩阵，在这种情况下你必须替换`float`by`double`和`CV_32F`by `CV_64F`;

# objective-c - TextView: How to listen or handle space bar key event

> ID：16081312
> 
> 赞同：0
> 
> 时间：2013-04-18T11:10:03.270
> 
> 标签：objective-c, macos, cocoa

Okay so 'return' is 'insertNewline', I love that, but where in god's green earth is the insertSpace?

So i'm trying to invoke a spellcheck (for a keyword) after the user completes the word (aka, when they hit space bar or return ). But daddy needs to detect space-bar. Heres the textView delegate method i'm implementing...

```
/* listen to commands */ 
-(BOOL)textView:(NSTextView *)aTextView doCommandBySelector:(SEL)aSelector
{
    BOOL result = NO;
    if (@selector(insertNewline:) == aSelector) {
    // does something 
    result = YES; 
    return result; 
}
return result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:26:31.640

*如下使用UITextView*的委托方法来实现这个...

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range
 replacementText:(NSString *)text
{
    // Any new character added is passed in as the "text" parameter
    if ([text isEqualToString:@"\n"]) {
        //code when return key pressed.
    }
    else if([text isEqualToString:@" "])
    {
        //code when space key pressed.
    }
    // For any other character return TRUE so that the text gets added to the view
    return TRUE;
} 
```

# c - 给定范围内数字的浮点仿真或定点

> ID：16081315
> 
> 赞同：1
> 
> 时间：2013-04-18T11:10:17.413
> 
> 标签：c, floating-point, fixed-point

我有一个不支持浮点的协处理器。我尝试使用 32 位固定点，但它无法处理非常小的数字。我的数字范围从 1 到 1e-18。一种方法是使用浮点仿真，但它太慢了。在我们知道数字不会大于 1 且小于 1e-18 的情况下，我们能否让它更快。或者有没有办法让固定点在非常小的数字上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:17:28.777

32 位定点编码不可能表示从 10 ^(–18到 1 的数字。从 10) ^(-18的跨度是 10) ^(18)的比率这一事实可以立即看出这一点，但非零编码32 位整数跨度的比率小于 2 ^(32)，远小于 10 ^(18)。因此，定点编码的比例选择不会提供所需的跨度。

因此 32 位定点编码将不起作用，您必须使用其他技术。

在某些应用中，可能适合使用多个定点编码。也就是说，各种输入值将使用定点编码进行编码，但每个值都有适合它的比例，中间值和输出也将具有自定义比例。显然，只有在设计时可以确定合适的比例时，这才有可能。否则，您应该放弃 32 位定点编码并考虑替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:34:24.993

简化的 24 位浮点是否足够快和足够准确？：

```
#include <stdio.h>
#include <limits.h>

#if UINT_MAX >= 0xFFFFFFFF
typedef unsigned myfloat;
#else
typedef unsigned long myfloat;
#endif

#define MF_EXP_BIAS 0x80

myfloat mfadd(myfloat a, myfloat b)
{
  unsigned ea = a >> 16, eb = b >> 16;
  if (ea > eb)
  {
    a &= 0xFFFF;
    b = (b & 0xFFFF) >> (ea - eb);
    if ((a += b) > 0xFFFF)
      a >>= 1, ++ea;
    return a | ((myfloat)ea << 16);
  }
  else if (eb > ea)
  {
    b &= 0xFFFF;
    a = (a & 0xFFFF) >> (eb - ea);
    if ((b += a) > 0xFFFF)
      b >>= 1, ++eb;
    return b | ((myfloat)eb << 16);
  }
  else
  {
    return (((a & 0xFFFF) + (b & 0xFFFF)) >> 1) | ((myfloat)++ea << 16);
  }
}

myfloat mfmul(myfloat a, myfloat b)
{
  unsigned ea = a >> 16, eb = b >> 16, e = ea + eb - MF_EXP_BIAS;
  myfloat p = ((a & 0xFFFF) * (b & 0xFFFF)) >> 16;
  return p | ((myfloat)e << 16);
}

myfloat double2mf(double x)
{
  myfloat f;
  unsigned e = MF_EXP_BIAS + 16;
  if (x <= 0)
    return 0;
  while (x < 0x8000)
    x *= 2, --e;
  while (x >= 0x10000)
    x /= 2, ++e;
  f = x;
  return f | ((myfloat)e << 16);
}

double mf2double(myfloat f)
{
  double x;
  unsigned e = (f >> 16) - 16;
  if ((f & 0xFFFF) == 0)
    return 0;
  x = f & 0xFFFF;
  while (e > MF_EXP_BIAS)
    x *= 2, --e;
  while (e < MF_EXP_BIAS)
    x /= 2, ++e;
  return x;
}

int main(void)
{
  double testConvData[] = { 1e-18, .25, 0.3333333, .5, 1, 2, 3.141593, 1e18 };
  unsigned i;
  for (i = 0; i < sizeof(testConvData) / sizeof(testConvData[0]); i++)
    printf("%e -> 0x%06lX -> %e\n",
           testConvData[i],
           (unsigned long)double2mf(testConvData[i]),
           mf2double(double2mf(testConvData[i])));

  printf("300 * 5 = %e\n", mf2double(mfmul(double2mf(300),double2mf(5))));
  printf("500 + 3 = %e\n", mf2double(mfadd(double2mf(500),double2mf(3))));
  printf("1e18 * 1e-18 = %e\n", mf2double(mfmul(double2mf(1e18),double2mf(1e-18))));
  printf("1e-18 + 2e-18 = %e\n", mf2double(mfadd(double2mf(1e-18),double2mf(2e-18))));
  printf("1e-16 + 1e-18 = %e\n", mf2double(mfadd(double2mf(1e-16),double2mf(1e-18))));

  return 0;
} 
```

输出（[ideone](http://ideone.com/HhRmUR)）：

```
1.000000e-18 -> 0x459392 -> 9.999753e-19
2.500000e-01 -> 0x7F8000 -> 2.500000e-01
3.333333e-01 -> 0x7FAAAA -> 3.333282e-01
5.000000e-01 -> 0x808000 -> 5.000000e-01
1.000000e+00 -> 0x818000 -> 1.000000e+00
2.000000e+00 -> 0x828000 -> 2.000000e+00
3.141593e+00 -> 0x82C90F -> 3.141541e+00
1.000000e+18 -> 0xBCDE0B -> 9.999926e+17
300 * 5 = 1.500000e+03
500 + 3 = 5.030000e+02
1e18 * 1e-18 = 9.999390e-01
1e-18 + 2e-18 = 2.999926e-18
1e-16 + 1e-18 = 1.009985e-16 
```

减法留作练习。同上以获得更好的转换程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:02:59.263

使用 64 位定点并完成它。

与 32 位定点相比，它的乘法速度会慢四倍，但仍然比浮点仿真效率高得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:29:39.267

In embedded systems I'd suggest using 16+32, 16+16, 8+16 or 8+24 bit *redundant* floating point representation, where each number is simply M * 2^exp.

In this case you can choose to represent zero with both M=0 and exp=0; There are 16-32 representations for each power of 2 -- and that mainly makes *comparison* a bit harder than typically. Also one can postpone normalization e.g. after subtraction.

# ios - How i do update an existing contact phone number?

> ID：16081317
> 
> 赞同：1
> 
> 时间：2013-04-18T11:10:28.787
> 
> 标签：ios, objective-c, abaddressbook

Hello everyone I am trying to update a contact's phone using the following code

```
ABAddressBookRef addressBook = ABAddressBookCreate();
    CFErrorRef error = nil;
    ABMutableMultiValueRef phoneMultiValue = ABMultiValueCreateMutable(kABPersonPhoneProperty);
    bool didAddphone = ABMultiValueAddValueAndLabel(phoneMultiValue, (CFTypeRef)(_homePhoneText.text), kABHomeLabel, NULL);

if(didAddphone){
        ABRecordSetValue(ABAddressBookGetPersonWithRecordID(addressBook, [_ID integerValue]),
                         kABPersonPhoneProperty,
                         phoneMultiValue,
                         nil);
    } else {
        NSLog(@"Error adding email: %@", error);
        error = nil;
    } 
```

But its not working. Any help ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:33:31.700

首先：`ABAddressBookCreate`已被弃用，并且在 iOS 6 下无法使用（它总是返回 NULL）。而是使用`ABAddressBookCreateWithOptions`（文档：http: [//developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html)）。

之后，您需要保存地址簿以使更改持续存在，通过`ABAddressBookSave`使用您的地址簿调用来做到这一点。

# jquery - 删除 MVC3 中特定控件的不显眼验证

> ID：16081318
> 
> 赞同：0
> 
> 时间：2013-04-18T11:10:31.320
> 
> 标签：jquery, asp.net-mvc-3, unobtrusive-validation

我已经实现了一个简单的 MVC3 应用程序，其中我使用了**UnobtrusiveJavaScript** 验证。我有一个下拉视图，我不想验证它。事件我没有在 ViewModel 中进行任何验证。

视图模型

```
public class TutorAddressViewModel
{

    public TutorAddressViewModel()
    {           
        AddressType = new List<SelectListItem>();
    }
    public List<SelectListItem> AddressType {get;set;}

    public byte TypeID { get; set; }

} 
```

看法

```
<table style="background: none; " class="addressDetail">
    <tr>
        <td>
            @Html.DropDownListFor(m => m.TypeID,Model.AddressType  , new { @Style = "Width:150px;" })
        </td>
</tr>
</table> 
```

此地址类型下拉列表我不想验证，当我在 web 配置中设置 **UnobtrusiveJavaScriptEnabled**此属性为 false 时，它​​工作正常意味着它不验证此控件，但是当我将其设置为 true 时，它​​不允许我在 AddressType 为时发布表单空的。

那么如何删除对特定控件的**UnobtrusiveJava验证呢？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:44:51.390

在您的网络配置中设置`UnobtrusiveJavaScript`为`false`将全局禁用您的不显眼验证。

如果您正在使用，`data annotations`那么您可以决定您的验证流程，例如您要验证的属性。因为数据注释和不显眼的 js 验证以这种方式并行工作。

所以我对你的建议是使用数据注释结构来验证你的模态属性。

```
//do not put an attribute if you do not want to validate it!
public List<SelectListItem> AddressType {get;set;}

public byte TypeID { get; set; } 
```

如果您不希望在某些属性上触发不显眼的验证，则不要像在您的情况下那样在其属性上使用数据注释属性。

# php - 访问不在 Web 服务器上的外部文件夹

> ID：16081319
> 
> 赞同：0
> 
> 时间：2013-04-18T11:10:33.617
> 
> 标签：php, xampp, directory

我想知道是否可以访问不在网络服务器内的文件夹？比如说。我有一个 Xammp 安装，在 htdocs 文件夹中我有一个名为 MySite 的网络应用程序，它有一个上传文件夹

我想要做的是重定向我所有的上传，而不是转到并保存到 MySite\Uploads 中，它将保存到 D:\Data\Uploads 中。

这可能吗，我想这应该已经被问过很多次并回答了很多次，但我找不到正确的答案可能是因为我没有固定正确的问题。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:14:41.210

如果网络服务器在该文件夹中具有写入权限，则可能。

例如，如果您执行以下操作：

```
file_put_contents("absolute_path_where_you_want_to_save", $file_contents); 
```

如果执行 php 脚本的用户具有正确的权限（写入），它将起作用。

这在读取网络服务器外部的文件时特别有用，例如从即使有人获得对网络服务器文件夹的访问权限也无法读取的文件中检索 mysql 用户和密码。

# c# - Attribute Useage For Checking Method Permissions

> ID：16081321
> 
> 赞同：0
> 
> 时间：2013-04-18T11:10:35.553
> 
> 标签：c#, security, attributes, mef

I'm trying to implement a security mechanism to automatically test a particular plugins permissions and method security privileges and I've gotten a bit stuck on how to get this working.

I've writing a custom MEF Metadata attribute that takes a constructor property like:

```
params PluginPermission[] permission 
```

This contains an array of all the permissions that the plugin is granted.

The PluginPermission class looks like:

```
PluginPermission.cs

public enum PluginPermission
{
    CreateUsers,
    DeleteUsers,
    ReadPassword,
    WritePassword,
    AddUsersToGroups,
    AddGroups,
    DeleteGroups
} 
```

I've also written a RequiredPermissionAttribute that targets individual methods and takes one or more PluginPermission objects to tell the system what permissions are required for an individual method to be execute. These are applied to the interface for the plugins like:

```
 ILicensingManagement.cs

 [RequiredPermission(PluginPermission.CreateUsers)]
 bool AddUser(string userName); 
```

Obviously if the plugin doesn't have the required permissions for a particular method the method is not executed.

What I'm stuck on is how to actually get the test method in the RequiredPermissionAttribute class to run before the method is executed and how to gracefully exit the execution if the permissions requirements for the method are not met by the plugin.

I looked at the xUnit BeforeAfterTestAttribute but the implementation seemed so specific I stuggled to pull the source code apart to arrive at the solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:19:13.850

我无法评论 MEF 特定的事情，但要记住一件事，自定义属性只不过是“标签”，除非您的代码专门检查它们，否则它们不会做任何事情，例如使用反射。

xUnit的`BeforeAfterTestAttribute`可能有效，因为 xUnit 使用反射来执行方法。当它遇到这个属性时，它会相应地改变它的行为。

.NET 框架命名空间中的属性之所以有效，是因为 CLR 会检查它们，或者编译器会检查它们。

我知道这并不能真正完全回答您的问题，但是发表评论有点太长了。

更新：您可以使用`Type`if 它是一个类或`MethodInfo`if 它是一个方法来访问属性，例如

```
MethodInfo mi = /* method info */;
Attribute[] attrs = mi.GetCustomAttributes(typeof(RequiredPermissionAttribute), false);
RequiredPermissionAttribute req = attrs.Cast<RequiredPermissionAttribute>().FirstOrDefault();

if ((req != null) && (/* current user does not have the required permission */)) throw new Exception(); 
```

但这并不是真正的安全解决方案，开发人员可以轻松避免这些检查。我只是简单地看了一眼，但 PostSharp 或许可以帮到你。

# android - 用于调试节点的 GoogleMap api 密钥

> ID：16081322
> 
> 赞同：0
> 
> 时间：2013-04-18T11:10:40.647
> 
> 标签：android, google-maps

我写了一个安卓应用程序。我用谷歌地图。代码是真实的。它正在执行没有任何问题。但是我的布局xml有问题。代码在这里。

```
<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
android:apiKey="????" 
```

我在哪里可以获得调试节点的 api 密钥。我不会将应用程序上传到安卓市场。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:13:51.933

您执行与使用真实密钥相同的步骤。但是，您无需为您的应用程序使用发布密钥库，而是使用位于以下位置的默认/调试密钥库：`users\xx_your_name\.android\debug.keystore`

Google mapsv2 的所有内容的演练在[这里](https://developers.google.com/maps/documentation/android/start)。查看**获取 API 密钥**下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:16:48.620

在此处注册以获取地图的 GOOGLE API KEY

**[https://developers.google.com/maps/signup](https://developers.google.com/maps/signup)**

此页面还可以帮助您生成 Google 地图的 API 密钥：- **[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:47:22.680

使用谷歌地图 v2。旧密钥已于 3 月弃用。使用 SHA-1 在谷歌控制台注册。

[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

[https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

谷歌地图v2的优秀教程在这里

[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)

# vb.net - How to merge two multiline textboxes

> ID：16081325
> 
> 赞同：-3
> 
> 时间：2013-04-18T11:10:45.970
> 
> 标签：vb.net, textbox, multiline

I need to combine two multi-line textboxes in vb net, like this:
textbox1:
a
b
c
d

textbox2:
1
2
3
4

textbox3:
a1
b2
c3
d4
Just a form with three textboxes. And a button to merge/combine/concatenate each value from t1 and t2, in t3.

One of my attempts:

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click

    For Each line In TextBox1.Lines
        For Each linex In TextBox2.Lines
            Me.TextBox3.Text += line & linex
            Me.TextBox3.Text += Environment.NewLine
        Next
    Next

End Sub 
```

but result combination of lines (lines=linex) taken by two (a1,a2,a3,b1,b2,b3...)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:26:31.050

可能有很多方法可以做到这一点。我在下面向您展示了一个，但您会假设文本框 2 包含与文本框 1 相同数量的行。它不包含任何验证，但会按照您的要求执行。

查看评论以了解正在发生的事情。

```
'Declare empty string for concatinating the text used in textbox 3
    Dim lsText As String = String.Empty
    'Loop for the count of lines in the textbox starting at an index of 0 for pulling data out
    For i As Integer = 0 To TextBox1.Lines.Count - 1
        'Check if lsText has already been assigned a value
        If lsText = String.Empty Then
            'If is has not then you know its the first so dont need a carriage return line feed simply take both values at that index
            lsText = TextBox1.Lines(i) & TextBox2.Lines(i)
        Else
            'Otherwise you want the new value on a new line
            lsText = lsText & vbCrLf & TextBox1.Lines(i) & TextBox2.Lines(i)
        End If
    Next
    'Set the textbox text to the finished concatination
    TextBox3.Text = lsText 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:32:30.137

我会在循环中使用一个整数作为计数器，该循环将从每个计数值处提取字母，并每次增加计数。

您尝试做的事情非常简单，所以我不会提供任何代码 - 这样您不会有效地学习。

只要知道您需要过滤换行符，知道每个文本框中有多少个“字符”，并使用循环。或许多其他方式，但我认为我所暗示的很简单，应该是大约 5 行代码，您已经在某种程度上演示过。

祝你好运。继续发布您正在尝试的内容，如果我觉得您正在尝试，我会提供帮助。虽然现在我要睡觉了。

# api - 无法从 Graph API 中检索关键字的帖子

> ID：16081337
> 
> 赞同：0
> 
> 时间：2013-04-18T11:11:19.053
> 
> 标签：api, facebook-graph-api

[https://graph.facebook.com/search?q=ATT&type=post](https://graph.facebook.com/search?q=ATT&type=post)

重现步骤：[https](https://graph.facebook.com/search?q=ATT&type=post) ://graph.facebook.com/search?q=ATT&type= post 预期行为：图搜索必须检索与 ATT 相关的帖子。实际行为：请在下面找到输出

*   输出

{ “数据”： [

] }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:15:15.380

您是否尝试过使用不同的搜索词？以下搜索有效：

*   [https://graph.facebook.com/search?q=ball&type=post](https://graph.facebook.com/search?q=ball&type=post)
*   [https://graph.facebook.com/search?q=racoon&type=post](https://graph.facebook.com/search?q=raccoon&type=post)
*   [https://graph.facebook.com/search?q=stackoverflow&type=post](https://graph.facebook.com/search?q=stackoverflow&type=post)

因此，问题似乎出在关键字`ATT`上，而不是您使用的 Graph API 搜索语法。

# c++ - 如何组合所有 dll 并制作一个 DLL？

> ID：16081341
> 
> 赞同：0
> 
> 时间：2013-04-18T11:11:29.947
> 
> 标签：c++, opencv, dll

如何组合所有 dll 并制作一个 DLL？

我已经使用 Opencv 编写了一个算法，现在我想制作一个单独的 dll，同时结合使用过的 opencv DLL

如果可能，请提出一些步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:57:03.290

第一步是查明opencv 是否支持静态链接（即，您是否可以在没有任何.dll 的情况下与其.lib 链接）。大多数图书馆没有。大多数库都可以通过定制来支持这一点（不是已经说过的微不足道，而是可行的）。这是一个很大的如果。

但是假设opencv支持静态链接，则需要将其编译成.lib（“类型库”类型的项目）。然后在你使用opencv的项目（输出类型dll）中，只链接opencv.lib。几个注意事项：确保对所有项目（包括 opencv）使用完全相同的 Unicode 设置和“代码生成”CRT 链接（/MT 或 /MTD 或 /MD 或 /MDD）。

我一目了然地发现opencv是否支持静态链接。

# dom - 使用 xpath 按来自不同父级的编号寻址元素

> ID：16081344
> 
> 赞同：1
> 
> 时间：2013-04-18T11:11:35.637
> 
> 标签：dom, xpath

所以我有这个DOM结构

```
<body>
    <div>
        <a></a>
        <a></a>
    </div>
    <div>
        <a></a>
    </div>
</body> 
```

我可以使用 xpath 访问两个第一个链接元素：

```
//div/a[1] 
//div/a[2] 
```

我想通过使用相同的 xpath 结构访问第三个链接（枚举它们）

```
//div/a[3] 
```

但是这种方法失败了，因为链接元素有不同的父 div 有什么方法可以更正我的 xpath 以通过它的编号访问所有链接元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:30:10.577

您可以使用括号：

```
 (//div/a)[3] 
```

# automated-tests - 机器人框架中的多行文档

> ID：16081354
> 
> 赞同：3
> 
> 时间：2013-04-18T11:12:01.150
> 
> 标签：automated-tests, functional-testing, restructuredtext, robotframework

我想在机器人测试用例本身中记录测试场景、场景背后的原理等。为此，文档需要支持多行功能和格式。无论如何都要包含某些格式的文档，`rst`这样我就可以通过简单的语法获得更多的格式化能力。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-15T17:25:38.543

您可以将文档分布在多行中，并且机器人支持一些简单的标记。有关它支持的特定标记的信息，请参阅[robotsframework 用户指南](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html)中的[文档格式](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#documentation-formatting)。

我的团队使用竖线分隔的格式，我们将文档分布如下：

```
| Test Case 1
| | [Documentation]
| | ... | = Example Heading =
| | ... | *bold* _italic_ 
| | ... | Lorem ipsum dolor sit amet, consectetur adipisicing elit,
| | ... | do eiusmod tempor incididunt ut labore et dolore sed magna
| | ... | aliqua. Ut enim ad minim veniam, quis nostrud exercitation 
| | ... | ullamco laboris nisi ut aliquip ex ea commodo consequat. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:01:22.673

[Robot Framework 用户指南](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.7#documentation-formatting)介绍了编写文档的不同方式。还有基于测试用例生成高级文档的[testdoc 工具。](http://robotframework.googlecode.com/hg/doc/userguide/RobotFrameworkUserGuide.html?r=2.7.7#test-data-documentation-tool-testdoc)

# svn - 克隆SVN项目

> ID：16081358
> 
> 赞同：1
> 
> 时间：2013-04-18T11:12:04.963
> 
> 标签：svn, version-control, tortoisesvn

这是 SVN 中一个非常基本的问题：

我想下载 Google 的 BreakPad 项目。在他们的网站上，他们说要做：

> 非成员可以通过 HTTP 匿名签出只读工作副本。svn 结帐[http://google-breakpad.googlecode.com/svn/trunk/](http://google-breakpad.googlecode.com/svn/trunk/) google-breakpad-read-only

当我尝试使用 TortoiseSVN 下载这个项目时，我所能做的就是下载主干分支（仅使用[http://google-breakpad.googlecode.com/svn/trunk](http://google-breakpad.googlecode.com/svn/trunk)）

如何下载`google-breakpad-read-only`修订版/分支？

来自 Git 用户的感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:31:26.613

`google-breakpad-read-only`上面的说明中`working folder`的主干将最终出现在您的机器上。（`google-breakpad-read-only`调用结帐时您正在探索的任何驱动器的文件夹。）没有`google-breakpoint-read-only`修订/分支。）

它是工作副本（目标）的文件夹名称。您可以将其替换为文件夹`svn checkout http://google-breakpad.googlecode.com/svn/trunk/ my-dog-and-cat`中的工作副本并最终获得。`my-dog-and-cat`

# c# - 如何通过自定义验证器验证 gridview 是否为空？

> ID：16081366
> 
> 赞同：1
> 
> 时间：2013-04-18T11:12:53.450
> 
> 标签：c#, asp.net, gridview, user-controls, customvalidator

如何通过以下方式验证 gridview 是否为空`custom validator`：

* * *

```
 <asp:CustomValidator ID="CustomValidator1" runat="server" ErrorMessage="!!! "
                                        ControlToValidate="GridView1" ValidationGroup="Add_valid" OnServerValidate="CustomValidator1_ServerValidate"></asp:CustomValidator> 
```

* * *

```
 protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args)
  {

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:21:16.993

试试这个..

```
 protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args)
  {
if(yourGridViewId.Rows.Count<1)
args.IsValid=false;
  } 
```

# jsf-2 - PrimeFaces 3.5 中的 Upload 事件之前

> ID：16081369
> 
> 赞同：1
> 
> 时间：2013-04-18T11:13:07.703
> 
> 标签：jsf-2, primefaces

在 PrimeFaces 3.5 中上传文件之前，是否可以进行一些服务器端处理？假设表单包含一些`p:inputText`元素，需要在文件上传之前填写，那么我该如何检查呢？有什么活动吗？

视图看起来像 -

```
<h:form enctype="multipart/form-data">
    <p:inputText value="#{fileUploadController.name}" id="name" label="Name" />
    <p:inputText value="#{fileUploadController.about}" id="about" label="About" />
    <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
            mode="advanced" 
            update="messages"
            sizeLimit="100000" 
            allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>

    <p:growl id="messages" showDetail="true"/>

</h:form> 
```

ManagedBean 如下 -

```
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;

import org.primefaces.event.FileUploadEvent;
import org.primefaces.model.UploadedFile;

public class FileUploadController {

    private String name;
    private String about;
    //Getters & Setters

    public void beforeUpload(){
    if(getName().isEmpty()||getAbout().isEmpty())
        FacesMessage msg = new FacesMessage("Error", "Name or About cannot be empty");
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }

    public void handleFileUpload(FileUploadEvent event) {
        FacesMessage msg = new FacesMessage("Succesful", event.getFile().getFileName() + " is uploaded.");
        FacesContext.getCurrentInstance().addMessage(null, msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:58:42.180

`<p:fileUpload/>`有一个`onStart`属性，您可以方便地与`<p:remoteCommand/>`组件连接以在上传操作开始之前触发支持 bean 操作

```
 <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
        mode="advanced" 
        onstart="startSomething();"
        update="messages"
        sizeLimit="100000" 
        allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>

      <p:remoteCommand name="startSomething" action="#{bean.startSomething}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T19:37:45.167

我在文本字段和文件上传方面遇到了类似的情况。除了检查handleFileUpload 中的名称值外，我找不到任何其他方法来执行此操作。

```
public void handleFileUpload(FileUploadEvent event){
  HttpServletRequest req = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();`
  name =req .getRequestParams("formId:name")
  if(name==null){
   FacesMessage msg = new FacesMessage("Error", "Name or About cannot be empty")
   return;
  }
} 
```

# c# - 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：16081370
> 
> 赞同：0
> 
> 时间：2013-04-18T11:13:08.657
> 
> 标签：c#, winforms, savefiledialog

我正在开发一个 Windows 窗体项目，它会创建一个 PDF 文件。我想将文件保存在用户想要的位置。我为此使用了 SaveFileDialog。当我单击表单上的“另存为 PDF”按钮时，我收到此错误代码。

```
Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

如果我不使用 SaveFileDialog（如果我为文件提供静态名称），则不会收到错误消息。

这是按钮点击代码：

```
 private void button2_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.InitialDirectory = Convert.ToString(Environment.SpecialFolder.MyDocuments);
        saveFileDialog1.Filter = "(*.pdf)|*.pdf|All Files (*.*)|*.*";
        saveFileDialog1.FilterIndex = 1;
        saveFileDialog1.ShowDialog();

        if (saveFileDialog1.FileName != "")
        {
            iTextSharp.text.Document pdfDosya = new iTextSharp.text.Document(PageSize.A4, 20, 20, 10, 10);
            PdfWriter.GetInstance(pdfDosya, new FileStream(saveFileDialog1.FileName, FileMode.Create));//TODO dosya ismi
            pdfDosya.Open();
        }
     } 
```

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:38:06.567

试试这个代码

```
 SaveFileDialog saveFileDialog1 = new SaveFileDialog();
    saveFileDialog1.InitialDirectory =   Convert.ToString(Environment.SpecialFolder.MyDocuments);
    saveFileDialog1.Filter = "(*.pdf)|*.pdf|All Files (*.*)|*.*";
    saveFileDialog1.FilterIndex = 1;

   if(saveFileDialog1.ShowDialog() == DialogResult.OK) 
   {
        MemoryStream ms = new MemoryStream();
        iTextSharp.text.Document document = new Document(PageSize.A4, 10.0F, 10.0F,100.0F,0.0F);
        document.AddTitle("FileName.pdf");
        PdfWriter writer = PdfWriter.GetInstance(document, ms);
        document.Open();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:20:29.590

这可能是问题所在：

您不能使用`Convert.ToString(Environment.SpecialFolder.MyDocuments)`将文件夹路径作为字符串获取，它只是一个枚举。您需要使用`Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)`获取路径作为枚举值的字符串。

# php - 在哪里进行 POST 以获取 crumbs url 缩短服务 Advanced API

> ID：16081378
> 
> 赞同：0
> 
> 时间：2013-04-18T11:13:24.767
> 
> 标签：php, html, api, post, url-shortener

我有一个 PHP/JavaScript 站点（离线）。我正在使用[http://crum.bs/](http://crum.bs/)来缩短 URL。

这里，crum.bs 提供了两种类型的 API：

1.  简单缩短，和
2.  高级缩短

我目前正在使用简单的缩短 API。发出 GET 请求的基本 URL 是`http://crum.bs/api.php?function=simpleshorten&url=[insert url here]`.

现在，我打算将其更改为需要 POST 的高级 API。

我在该页面（或谷歌）的任何地方都找不到这个基础。API 参考页面是[http://blog.crum.bs/?p=12](http://blog.crum.bs/?p=12)。有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:20:49.723

据我所知，您会将您的 POST 请求提交到同一路径

```
http://crum.bs/api.php 
```

您只需在请求中传递变量（从技术上讲，这与简单版本相同，只是使用了不同的 HTTP 动词）

```
$ch = curl_init();
$curlConfig = array(
    CURLOPT_URL            => "http://crum.bs/api.php",
    CURLOPT_POST           => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_POSTFIELDS     => array(
        'url' => 'http://www.some-really-long-url.com/with/a/lot/of/text/etc.html',
        'desc' => 'some other data',
    ),
);
curl_setopt_array($ch, $curlConfig);
$result = curl_exec($ch);
curl_close($ch); 
```

$result 变量将包含来自 crum.bs 服务的 JSON 响应

# java - 在 Java 代码中使用 Javascript 显示数据库中的数据

> ID：16081381
> 
> 赞同：0
> 
> 时间：2013-04-18T11:13:34.157
> 
> 标签：java, javascript, html, jsp

我正在使用 java 和 jsp 来显示我的数据。我想使用 javascript 在从下拉列表中选择项目时显示数据库中的数据。即我有一个表单，在从下拉列表中选择一个项目时，应该显示该项目的信息。

我应该如何开始呢？

# javascript - Javascript String Character Checking

> ID：16081385
> 
> 赞同：1
> 
> 时间：2013-04-18T11:13:49.363
> 
> 标签：javascript

What would be the best way to check that a javascript string is at least four characters long, contains at least one lowercase letter, one uppercase letter and a digit?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:17:51.740

这是一个快速验证功能：

```
function validate(str) {
    return str.length > 3 && /[a-z]/.test(str) && /[A-Z]/.test(str) && /[0-9]/.test(str) ;
} 
```

它检查长度，然后运行正则表达式以查找小写、大写和数字（按此顺序）。如果全部为真（长度 > 3`and`有小写字母`and`有大写字母`and`有数字），则返回`true`. 否则，它返回`false`.

像这样使用它：

```
validate("aaaa")  // returns false
validate("aA1")   // returns false
validate("aA12")  // returns true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:16:27.327

小写字母的测试[已经在其他地方介绍过](https://stackoverflow.com/questions/2830826/javascript-checking-for-any-lowercase-letters-in-a-string)：

```
function hasLowerCase(str) {
    return (/[a-z]/.test(str));
} 
```

修改它以实现`hasUpperCase`和`hasDigits`.

编写完这些函数后，您只需检查一下：

```
if( hasLowerCase(passwd) && hasUpperCase(passwd) && hasDigits(passwd) ) {
    // Its a valid password!
} 
```

如果您在很多地方使用它，请考虑制作一个新功能：

```
function isPasswordValid(str) {
    return hasLowerCase(passwd) && hasUpperCase(passwd) && hasDigits(passwd);
} 
```

您可以进一步使用，例如：

```
if( isPasswordValid("passwd") ) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:26:05.593

我写了一个函数，就像`ColBeseder`.add 一个类型检查一样`string`

```
function check( str ){

    return ( typeof str == 'string') &&
           ( str.length >= 4 ) &&
           /[a-z]/.test( str ) &&
           /[A-Z]/.test( str ) && 
           /[0-9]/.test( str )

} 
```

并调用它 as `check('AAA1a')`，它返回一个布尔值

# php - How to add same name menu items in joomla menu

> ID：16081386
> 
> 赞同：4
> 
> 时间：2013-04-18T11:13:49.910
> 
> 标签：php, joomla, joomla3.0

On my Homepage I have 2 menus, for the top `main menu` initial element is "HOME". Now on my `footer menu` I wanted to start with the same menu item so i checked "Main Menu" from administrator and here it is mentioned like this->

```
HOME (Alias: home)
Articles » Featured Articles 
```

So i created a new Featured article as "home" and it is successfully created. Now when attaching this to my footer menu I am getting this error -

```
Warning: Save failed with the following error: Another menu item has the same alias in Root. Root is the top level parent 
```

Let me know what I am doing wrong, and how do I create Home menu item that do the same stuff, i.e on click return to the main site(`http://localhost/mysite`) currently main menu item is doing that and I want to do the same from the footer menu Home item as well but it is not creating successfully :( Help me plz

PS- Even "`About Us`" article that is on my `main menu` is not including at my `footer menu` with the same error.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T11:25:41.963

如果您想在主菜单和页脚等多个位置使用相同的菜单项。因此，您可以使用名为**Menu Item Alias**的菜单类型。为此，请创建一个新菜单，然后将菜单类型选择为**菜单项别名**，如下所示：

**Joomla 2.5**

![在此处输入图像描述](https://i.stack.imgur.com/gGe0q.png)

**Joomla 3.0**

![在此处输入图像描述](https://i.stack.imgur.com/oe8FJ.png)

展开系统链接选项卡并选择**菜单项别名**

![在此处输入图像描述](https://i.stack.imgur.com/glxk3.png)

然后添加您想要的名称，然后从右侧选择要在此菜单项上显示的菜单项，如下所示：

**Joomla 2.5**

![在此处输入图像描述](https://i.stack.imgur.com/1yrp1.png)

**Joomla 3.0**

![在此处输入图像描述](https://i.stack.imgur.com/tcMel.png)

然后保存它。希望这可以帮助你。

# c - 循环结束条件不起作用 - C

> ID：16081389
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:13:52.863
> 
> 标签：c, arrays, loops, dynamic

我有一个关于动态数组的作业，因此我试图了解它如何与简单的程序一起工作。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main()
{
    int cnt,i=0;
    char temp[1001];
    char *obj[5];

    scanf("%d",cnt);

    while(i<cnt){

        scanf("%s",temp);
        obj[i]=malloc(sizeof(char)*(strlen(temp)+1));
        obj[i]=temp;
        printf("%s\n",obj[i]);
        printf("%d\n",i);
        i++;
    }

    return 0;
} 
```

当我通过从标准输入读取“cnt”等于 5 时，程序将永远运行，尽管结束条件满足。但是当我得到“cnt”等于5时，通过分配它，在程序的最开始（不是通过使用scanf）程序工作得很好。这可能是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T11:14:56.257

这个：

```
scanf("%d",cnt); 
```

应该：

```
/* Always check return value of scanf(),
   which returns the number of assignments made,
   to ensure the variables have been assigned a value. */
if (scanf("%d",&cnt) == 1)
{
} 
```

根据`scanf()`需要的*地址* `cnt`。

还：

*   [不要投射`malloc()`](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc).
*   `sizeof(char)`保证是`1`这样的，因此可以从 中的空间计算中省略`malloc()`。
*   检查结果`malloc()`以确保已分配内存。
*   `free()`不管是什么`malloc()`d.
*   通过指定要读取的最大字符数来防止缓冲区溢出，`scanf("%s")`该最大字符数必须比目标缓冲区少一，以便为终止的空字符留出空间。在你的情况下`scanf("%1000s", temp)`。
*   对数组的越界访问没有保护`obj`。`while`循环的终止条件是，`i<cnt`但如果`cnt > 5`会发生越界访问，则会导致未定义的行为。

这将地址分配`temp`给`obj[i]`：

```
obj[i]=temp; 
```

它不会*复制*（并导致内存泄漏）。改用`strcpy()`：

```
obj[i] = malloc(strlen(temp) +1 );
if (obj[i])
{
    strcpy(obj[i], temp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:15:25.953

你应该用这个

```
scanf("%d",&cnt); 
```

顺便提一句：

```
scanf("%s",temp); 
```

在 while 循环中用于读取您的字符串。您必须在格式说明符的开头添加空格以避免换行问题。它应该是`" %s"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:17:45.613

未定义的行为。您需要将变量的地址传递给`scanf()`：

```
scanf("%d", &cnt); 
```

但是你最好还是不要使用`scanf()`。`fgets()`使用起来更简单、更安全。

# iphone - 如何从 iphone 的网络服务中获取 %

> ID：16081390
> 
> 赞同：0
> 
> 时间：2013-04-18T11:13:53.287
> 
> 标签：iphone, ipad, ios5, ios4, xml-parsing

我是 iPhone 开发的新手。我正在开发一个聊天应用程序。我在发送和接收一些特殊字符时遇到问题。最后，我成功发布并获得了这个特殊字符。现在，我只有一个特殊字符我无法得到它。当我将 % 发送到网络服务时，我得到 %25。

在将字符串发送到网络服务器时使用波纹管字符串..

```
NSString *string = @"Hello % How Are You?";
string = [string stringByReplacingOccurrencesOfString:@"%" withString:@"%25"];
NSLog(@"\n\n ===>> Before ==>> %@",string);
NSString *string2 = string;
string2 = [string2 stringByReplacingOccurrencesOfString:@"%25" withString:@"%"];
NSLog(@"\n\n ===>> After ==>> %@",string2); 
```

输出 =>

```
===>> Before ==>> Hello%2520%2525%2520how%2520are%2520you?

 ===>> After ==>> Hello %2526 How Are You? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:41:06.570

试试这个代码...

```
NSString *string = @"Hello % How Are You?";

string = [string stringByReplacingOccurrencesOfString:@"&amp;" withString:@"&"];
string = [string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
string = [string stringByReplacingOccurrencesOfString:@"&" withString:@"%26"];
NSLog(@"\n\n ===>> Before ==>> %@",string);

NSString *string2 = string;

string2 = [string2 stringByReplacingOccurrencesOfString:@"%20" withString:@" "];
string2 = [string2 stringByReplacingOccurrencesOfString:@"%26" withString:@"&"];
string2 = [string2 stringByReplacingOccurrencesOfString:@"%25" withString:@"%"];    
NSLog(@"\n\n ===>> After ==>> %@",string2); 
```

**输出是：**

```
===>> Before ==>> Hello%20%25%20How%20Are%20You?
====>> After ==>> Hello % How Are You? 
```

# c++ - 如何对使用 CGAL 设置的 3D 点执行范围搜索？

> ID：16081394
> 
> 赞同：0
> 
> 时间：2013-04-18T11:13:57.177
> 
> 标签：c++, search, geometry, range, cgal

所以我看到了这个不错的[2D Range and Neighbor Search](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Point_set_2/Chapter_main.html)我还看到了[dD Range 和 Segment Trees](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/SearchStructures/Chapter_main.html) 但我不明白如何在 3D 点集上执行 3D Range 和 Neighbor Search。一般来说，我想查询一些点容器以获取`R`与某个给定点相距一定距离的点数组`P`。（备注：为什么我不想手动进行 - 这种搜索可以是 CPU/GPU/SSE 优化的，我想使用经过测试的可靠*高效*库来支持我自己的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:10:20.330

[类集数据上的范围树](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/SearchStructures/Chapter_main.html#Subsection_62.5.2)示例示例是 2D 案例的示例。在 typedefs 中将 _2 转换为 _3 ，您就有了 3D 案例。

# ruby-on-rails - nested_form 给我错误的参数数量错误（4 对 3）

> ID：16081399
> 
> 赞同：0
> 
> 时间：2013-04-18T11:14:04.723
> 
> 标签：ruby-on-rails, nested-forms

参数数量错误（4 对 3） 提取的源（在 # 行附近）：

```
enter code here
<%= f.text_field :name %>
# <%= f.fields_for :tasks do |task_form| %>
<%= task_form.text_field :fname %>
<%= task_form.link_to_remove "Remove this task" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:33:10.633

尝试这个：

```
<%= f.semantic_fields_for :tasks, ModelName.new do |task_form| %> 
```

谢谢。

# android - android - facebook 示例不工作

> ID：16081401
> 
> 赞同：1
> 
> 时间：2013-04-18T11:14:14.987
> 
> 标签：android, facebook

我是 Facebook 与 Android 应用程序集成的新手。我正在尝试运行来自[Facebook 的应用程序。](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)但它不起作用。我没有得到用户名。为什么它不工作？谁能帮我。

我为会话变量得到了以下一个。

`session: {Session state:OPENING, token:{AccessToken token:ACCESS_TOKEN_REMOVED permissions:[]}, appId:360610310722942}`

`session opened: false`

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

        // callback when session changes state
        @Override
        public void call(Session session, SessionState state,
                Exception exception) {
            final TextView welcome = (TextView) findViewById(R.id.welcome);
            System.out.println("session: " + session);
            System.out.println("session opened: " + session.isOpened());
            if (session.isOpened()) {

                // make request to the /me API
                Request.executeMeRequestAsync(session,
                        new Request.GraphUserCallback() {

                            // callback after Graph API response with user
                            // object
                            @Override
                            public void onCompleted(GraphUser user,
                                    Response response) {

                                if (user != null) {

                                    welcome.setText("Hello "
                                            + user.getName() + "!");
                                }
                            }
                        });
            }

        }
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    System.out.println("onActivityResult");
    Session.getActiveSession().onActivityResult(this, requestCode,
            resultCode, data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T08:44:14.870

我有同样的问题，我只是解决这个问题。原因是我的项目处于沙盒模式。禁用沙盒模式，应用程序运行正常 ![在此处输入图像描述](https://i.stack.imgur.com/Vx8IY.png)

# git - Git - Discard changes made to branch

> ID：16081402
> 
> 赞同：0
> 
> 时间：2013-04-18T11:14:16.823
> 
> 标签：git, branch

I just started a new branch, but I deleted there one too many files. How do I reinstate the master and delete the changes in the branch? what is the command? Or is it better to just delete the branch and create a new one instead to keep working on a branch before I merge it to the master?

Would `git merge master` do the trick?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:42:42.317

如果要丢弃分支上的所有更改，可以执行以下操作：

```
git reset --hard master 
```

这会将您的分支重置为与您的主分支相同的状态，丢弃所有更改。

# ios - 应用程序正在后台运行

> ID：16081403
> 
> 赞同：0
> 
> 时间：2013-04-18T11:14:23.880
> 
> 标签：ios, objective-c, memory-management, uiimageview, core-animation

我的应用程序在 ARC 中。
在我的应用程序的任何视图中，都有一个背景图像，并且在该图像上，一些动画不断重复这些图像。

**问题是：我的应用程序在一段时间后进入后台。**

我在堆栈、谷歌和苹果文档上看到并尝试了很多东西，但没有得到令人满意的解决方案。
我有三个问题。
（1）如何阻止这种情况？
(2) ARC有没有其他方法可以手动释放内存。
(3) 如果我使用 [self.view removeFromSuperview]; 对于 UIView 那么还有一些内存没有在 ARC 中释放？

动画的 MyCode 是

```
imageview = [[UIImageView alloc] init];
imageview.image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy08" ofType:@"png"]];
[self.view addSubview:imgBubbleAnimation];

imageview.animationImages = [NSArray arrayWithObjects:
                                      [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy01" ofType:@"png"]],
                                      [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy02" ofType:@"png"]],
                                      [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy03" ofType:@"png"]],
                                      [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy04" ofType:@"png"]],
                                      [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy05" ofType:@"png"]],
                                      [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy06" ofType:@"png"]],
                                      [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"bluecandy07" ofType:@"png"]],
                                      nil];
[imageview setAnimationRepeatCount:0]; // 0 for continuous
imageview.animationDuration =3.0;
[imageview startAnimating]; 
```

和声音文件（点击特定按钮时播放）

```
URL = [NSURL fileURLWithPath: [[NSBundle mainBundle]
                                 pathForResource:@"ect1a" ofType:@"mp3"]];
audioSound = [[AVAudioPlayer alloc] initWithContentsOfURL:URL error:nil];
audioSound.delegate = self;
audioSound.volume = 5.0;
audioSound.numberOfLoops = 0;
[audioSound play]; 
```

我有一个视图的 15 个小声音文件和一个视图的 15 个动画。
在每个特定的动画中，至少有 15 张图像。
欢迎任何帮助、建议、链接或教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:19:55.617

您真的是指背景还是设备进入睡眠/空闲状态（关闭屏幕）？

如果要闲置，请尝试

```
[[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

当你的动画开始时。动画完成后，您应该再次将其设置为关闭 (NO)。

# java - parsing a string using string tokenizer twice

> ID：16081404
> 
> 赞同：1
> 
> 时间：2013-04-18T11:14:25.550
> 
> 标签：java, regex, string

I am getting input string as below from some procedure

> ```
> service:jmx:t3://10.20.30.40:9031/jndi/weblogic.management.mbeanservers.runtime 
> ```

I want to parse it in java and get out

```
t3
10.20.30.40
9031 
```

into separate strings I think I can use string tokenizer but I have to tokenize 2 times ?Any better way to handle this?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T11:21:26.863

使用[JMXServiceUrl](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/remote/JMXServiceURL.html)类。它将为您解析 URL。无需与正则表达式或`String`拆分进行斗争。

```
String url = "service:jmx:t3://10.20.30.40:9031/jndi/weblogic.management.mbeanservers.runtime";
JMXServiceURL jmxServiceURL = new JMXServiceURL(url);
System.out.println(jmxServiceURL.getHost());
System.out.println(jmxServiceURL.getPort());
System.out.println(jmxServiceURL.getProtocol()); 
```

**印刷**

```
10.20.30.40
9031
t3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:22:20.683

如果它只是一个以某种方式组合的字符串并且您可以忽略性能，我更喜欢这样的可读解决方案（比正则表达式;-)）：

```
int pos_1 = input.indexOf("//");

String s1 = input.substring(0, pos_1);
String input_2 = input.substring(pos_1 + 2);

int pos_2 = input_2.indexOf(":");
String s2 = input_2.substring(0, pos_2);
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:24:26.290

做一个简单的字符串拆分

```
 String s = "service:jmx:t3://10.20.30.40:9031/jndi/weblogic.management.mbeanservers.runtime";
    String tokens[] = s.split("[:/]");
    System.out.println(tokens[2]);
    System.out.println(tokens[5]);
    System.out.println(tokens[6]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:23:12.350

正则表达式是一个很好的方法。您应该使用括号找到您想要的字符串和组的模式。也许这对你来说已经足够了： `service\\:jmx\\:(?<groupName01>[a-z0-9]+)\\://(?<groupName02>[0-9\\.]+)\\:(?<groupName03>[o-9]+)`

请参阅[Java 正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)

如果您从 7 开始使用 java，请不要`?<groupName>`在模式中使用。它将按编号分组。

# d3.js - d3.js 在页面上已有文本时附加文本

> ID：16081414
> 
> 赞同：0
> 
> 时间：2013-04-18T11:14:59.377
> 
> 标签：d3.js

我正在尝试将一些文本附加到页面上已经存在的文本中。我第一次这样做，它的工作原理。我第二次尝试它时遇到了麻烦，直到我发现这个： http: [//knowledgestockpile.blogspot.com/2012/01/understanding-selectall-data-enter.html](http://knowledgestockpile.blogspot.com/2012/01/understanding-selectall-data-enter.html)

一旦我添加了一个关键功能，它就适用于除第一个之外的所有条目。如何让第一个出现？

```
var dataset=[{"x":0, "y":2},{"x":1, "y":2},{"x":2, "y":2},{"x":3, "y":2}];
  vis.selectAll("text")
     .data(dataset)
     .enter()
     .append("text")
     .text(function(d,i) {return d.x;})
     .attr("text-anchor", "middle")
     .attr("x", function(d, i) {return scaleX(d.x);})
     .attr("y", function(d) {return scaleY(-5) ;})
     .attr("font-family", "sans-serif")
     .attr("font-size", "11px")
     .attr("fill", "black");

  vis.selectAll("text")
     .data(dataset,function(d){return d;})
     .enter()
     .append("text")
     .text(function(d,i) {return d.x;})
     .attr("text-anchor", "middle")
     .attr("x", function(d, i) {return scaleX(d.x);})
     .attr("y", function(d) {return scaleY(20) ;})
     .attr("font-family", "sans-serif")
     .attr("font-size", "11px")
     .attr("fill", "black"); 
```

这是小提琴：http: [//jsfiddle.net/tvinci/hbASc/2/](http://jsfiddle.net/tvinci/hbASc/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:32:44.013

通过选择文本然后调用`data()`，您是在告诉 d3 将新元素与现有元素进行匹配。当您这样做时，其目的通常是更新现有元素，而不是简单地将它们全部添加为新元素。

如果您想要添加两次文本，您可以为两个选择中的文本分配不同的类，这样`.enter()`选择将包含两种情况下的所有元素。代码将类似于

```
vis.selectAll("text.one")
   .data(dataset)
   .enter()
   .append("text")
   .attr("class", "one")
   ...

vis.selectAll("text.two")
   .data(dataset)
   .enter()
   .append("text")
   .attr("class", "two")
   ... 
```

如果要更新现有文本，请删除`.enter()`第二个调用链中的 。在这种情况下，也不需要传入一个键函数。

# java - JMX：从服务器读取属性

> ID：16081417
> 
> 赞同：2
> 
> 时间：2013-04-18T11:15:04.870
> 
> 标签：java, jmx, aem

我们使用 Adob​​e CQ (5.5) 作为 CMS。现在，我们的 CQ 环境由一个作者服务器（用户可以在其中创建内容）和 2 个发布服务器（将内容提供到互联网）组成。

现在有一个复制代理将内容从作者服务器推送到两个发布服务器。不幸的是，有些文章阻塞了复制代理的队列，因此不再发布新内容。这不是什么大问题，因为它很容易修复。真正的问题是，直到用户开始抱怨没有发布更多更改时，我们才注意到这种阻塞。

我四处搜索，发现 CQ 提供了一个 JMX API，监控应用程序可以将自己附加到它。然后我试图找到一些允许我配置警报的开源软件，以便我们可以更快地做出反应，但我找不到任何东西。

这是我决定尝试编写自己的 Java 应用程序的时候，它只读取属性并在属性为真时发送邮件。我想这比我想象的要复杂。

首先，我不是 Java 开发人员，但由于 CQ 是基于 Java 的，所以我认为我会尝试一下。我阅读了一些关于 JMX 和 Java 的文档，并且能够获得到 CQ 服务器的有效连接。但这几乎是我能意识到的一切。

我发现该类`com.adobe.granite.replication`有一个类型`agent`，它为每个复制代理存储一个 id（例如，id 是复制代理的名称`id=replication-publish-1`）。每个复制代理都有不同的属性，但与我相关的属性是“QueueBlocked”。

这是我到目前为止的代码（它基于[这个](http://docs.oracle.com/javase/1.5.0/docs/guide/jmx/examples/Basic/Client.java)例子）：

```
public static void main(String[] args) {
    try {
        JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://servername:9010/jmxrmi");
        JMXConnector jmxc = JMXConnectorFactory.connect(url, null);

        ClientListener listener = new ClientListener();

        MBeanServerConnection mbsc = jmxc.getMBeanServerConnection();

        // This outputs the domains, one of them is com.adobee.granite.replication, the one which I need to use
        // This is why I'm sure that at least the connection works, I don't have any com.adobe.granite.replication class on my Eclipse installation, so the output has to come from the server
        String domains[] = mbsc.getDomains();
        for (int i = 0; i < domains.length; i++) {
            echo("\tDomain[" + i + "] = " + domains[i]);
        }

        ObjectName replication = new ObjectName("com.adobe.granite.replication:type=Agent,id=replication-publish-1");

        mbsc.getAttribute(replication, "QueueBlocked"); // This throws the error
} catch(Exception e) {

} 
```

}

抛出的错误如下：

```
javax.management.InstanceNotFoundException: com.adobe.granite.replication:type=Agent,id=replication-publish-1 
```

据我了解，我应该创建某种实例，但我真的不知道什么实例以及如何创建它。无论是文档还是代码片段，我都非常感谢我能得到的任何帮助:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:00:46.970

解决了:)

这是我正在使用的代码：

```
import java.io.IOException;
import java.util.Iterator;
import java.util.Set;
import javax.management.Attribute;
import javax.management.MBeanServerConnection;
import javax.management.MBeanServerInvocationHandler;
import javax.management.ObjectName;
import javax.management.remote.JMXConnector;
import javax.management.remote.JMXConnectorFactory;
import javax.management.remote.JMXServiceURL;

public class Client {

    public static void main(String[] args) {
        try {
            JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://servername:9010/jmxrmi");
            JMXConnector jmxc = JMXConnectorFactory.connect(url, null);

            MBeanServerConnection mbsc = jmxc.getMBeanServerConnection();

            ObjectName replication1 = new ObjectName("com.adobe.granite.replication:type=agent,id=\"replication-publish-1\"");
            ObjectName replication2 = new ObjectName("com.adobe.granite.replication:type=agent,id=\"replication-publish-2\"");

            String replication1Status = mbsc.getAttribute(replication1, "QueuePaused").toString();
            String replication2Status = mbsc.getAttribute(replication2, "QueuePaused").toString();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# excel - Excel VBA - 如何检查不同工作簿中是否存在表格？

> ID：16081423
> 
> 赞同：3
> 
> 时间：2013-04-18T11:15:34.930
> 
> 标签：excel, vba

我正在尝试检查工作簿中是否存在命名范围，因为我编写的宏会遍历一个充满文件的文件夹。我在下面编写的宏适用于“正常”命名范围，但是当我将表名作为命名范围传递给函数时失败。

我在互联网上和其他地方搜索过为什么会出现这种情况，有人能指出我（可能很明显）做错了什么吗？

任何帮助，将不胜感激！

谢谢，

亚当

```
Public Function DoesNamedRangeExistInWorkbook(ByVal wb As Workbook, ByVal rangeName As String) As Boolean

Const FN_NAME As String = "DoesNamedRangeExistInWorkbook"
On Error GoTo catch

    Dim rng As Range
    Dim cellCount As Integer

    Set rng = wb.Names(rangeName).RefersToRange
    cellCount = rng.Cells.Count
    DoesNamedRangeExistInWorkbook = True

finally:
    Set rng = Nothing
    Exit Function

catch:
    Call ErrorReport(FN_NAME, False, Err.Number, Err.Description, rangeName & " could not be found in workbook: " & wb.Name)
    DoesNamedRangeExistInWorkbook = False
    Resume finally

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:22:45.687

试试这个（**未经测试**）

我假设表名也是该表的命名范围，否则您将不得不遍历表名来检查它。让我知道是否是这种情况，我将为此更新代码。

```
Public Function DoesNamedRangeExistInWorkbook(ByVal wb As Workbook, _
ByVal rangeName As String) As Boolean
    On Error GoTo catch

    Dim rng As Range

    On Error Resume Next
    Set rng = wb.Names(rangeName)
    On Error GoTo 0

    If Not rng is Nothing Then
        DoesNamedRangeExistInWorkbook = True
        Set rng = Nothing
    Else
        DoesNamedRangeExistInWorkbook = False
    End If

    Exit Function
catch:
    DoesNamedRangeExistInWorkbook = False
End Function 
```

**编辑**

这是用于检查工作簿中是否存在特定表的代码。我们正在使用表名来检查它的存在。同样，此代码未经测试。

```
Public Function DoesTableExist(ByVal wb As Workbook, _
ByVal tblName As String) As Boolean
    On Error GoTo catch

    DoesTableExist = False

    Dim lstobj As ListObject, ws As Worksheet

    For Each ws In wb.Worksheets
        For Each lstobj In ws.ListObjects
            If lstobj.Name = tblName Then
                DoesTableExist = True
                Exit Function
            End If
        Next
    Next

    Exit Function
catch:
    DoesTableExist = False
End Function 
```

# delphi - Delphi XE3 indy gmail smtp

> ID：16081427
> 
> 赞同：0
> 
> 时间：2013-04-18T11:15:47.820
> 
> 标签：delphi, gmail, indy, delphi-xe3

我在 delphi XE3 版本（版本 17.0.4770.56661）上使用 indy 发送 gmail smtp 邮件时遇到问题

我可以顺利发送我的笔记本电脑，但其他电脑会出现“连接正常关闭”之类的错误

我在表单上添加了一个 idlogfile 组件并给了我这一行

```
Recv 18.04.2013 11:17:20: 220 mx.google.com ESMTP s47sm13947715eeg.8 - gsmtp<EOL>
Sent 18.04.2013 11:17:20: EHLO S23-101<EOL>
Recv 18.04.2013 11:17:20: 250-mx.google.com at your service, [195.175.87.XX]<EOL>250-SIZE 35882577<EOL>250-8BITMIME<EOL>250-STARTTLS<EOL>250 ENHANCEDSTATUSCODES<EOL>
Sent 18.04.2013 11:17:20: STARTTLS<EOL>
Recv 18.04.2013 11:17:21: 220 2.0.0 Ready to start TLS<EOL>
Sent 18.04.2013 11:17:21: QUIT<EOL> 
```

我在我的应用程序上使用此代码

```
IdSMTP1.host:='smtp.gmail.com'  ;
    IdSMTP1.username:='umutscada@gmail.com';
    IdSMTP1.Password:='XXXX';
    IdSMTP1.port:=587;
    IdSMTP1.UseTLS:=utUseExplicitTLS;
    IdSSLIOHandlerSocketOpenSSL1.SSLOptions.Mode := sslmClient;
    IdSSLIOHandlerSocketOpenSSL1.SSLOptions.Method:= sslvTLSv1;
    IdSSLIOHandlerSocketOpenSSL1.SSLOptions.VerifyDepth := 2;
    IdSSLIOHandlerSocketOpenSSL1.SSLOptions.VerifyMode := [];
    IdSSLIOHandlerSocketOpenSSL1.Host := IdSMTP1.Host;
    IdSSLIOHandlerSocketOpenSSL1.Port := IdSMTP1.Port;

    IdMessage1.From.address := 'umutscada@gmail.com';
    IdMessage1.CClist.EMailAddresses:= edit5.Text;
    IdMessage1.Subject:= 'Subject is here';
    IdMessage1.Body.Clear;
    Idmessage1.Body.Add('Body is here');
    for Z := 0 to ListBox8.Items.Count-1 do begin
      TIdAttachmentFile.Create(IdMessage1.MessageParts,ListBox8.Items[Z]);
    end;
    IdSMTP1.Connect;
    IdSMTP1.Authenticate;
    try
        try
            idSMTP1.Send(IdMessage1);
        except on E:Exception do
            Memo1.Lines.Insert(0, 'ERROR: ' + E.Message);
        end;
    finally
        if idSMTP1.Connected then idSMTP1.Disconnect;
    end; 
```

请帮我

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:09:43.660

当收到响应`QUIT`后立即发送命令时`STARTTLS`，这意味着在实际 SSL/TLS 握手期间引发了异常。 `TIdSMTP.Connect()`捕获异常，调用（由于 SSL/TLS 未激活¹`Disconnect()`发送未加密），然后将异常重新引发到您的代码中。因此，您需要检查实际引发了什么异常。“连接正常关闭”异常意味着连接在另一端关闭，可能是由服务器本身关闭，也可能是由位于连接中间的防火墙/路由器关闭。`QUIT`

* * *

**更新：**

¹：`TIdSMTP`在 2014 年的 SVN rev 5156 中进行了更新，由于 SSL/TLS 握手失败而在关闭套接字时不再发送未加密`QUIT`的数据，因为此时套接字处于不确定状态。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-21T07:52:53.370

您必须在帐户配置中**“允许不太安全的应用程序访问 yoputr 帐户”**。谷歌已经以这种方式添加了一些限制。

[请参阅 Google 文档中的此链接。](https://support.google.com/accounts/answer/6010255?hl=en)

# jquery - jQuery 删除（选择器）似乎不起作用

> ID：16081428
> 
> 赞同：8
> 
> 时间：2013-04-18T11:15:48.793
> 
> 标签：jquery

我创建了一个小 jsfiddle：http: [//jsfiddle.net/duRXc/](http://jsfiddle.net/duRXc/)

```
<div data-role="wrapper">
    <span class="to-be-removed" data-role="to-be-removed">
        text to be removed
    </span>
</div>
<button id="remove1">Remove by jQuery object</button><br>
<button id="remove2">Remove by selector</button><br>
<button id="remove3">Remove by selector(class)</button>

var $wrapper = $('[data-role="wrapper"]');

$('#remove1').on('click', function () {
    $wrapper.find('[data-role="to-be-removed"]').remove();
});

// this should work: http://api.jquery.com/remove/
$('#remove2').on('click', function () {
    $wrapper.remove('[data-role="to-be-removed"]');
});

// this should work: http://api.jquery.com/remove/
$('#remove3').on('click', function () {
    $wrapper.remove('.to-be-removed');
}); 
```

我遇到的问题是 .remove(selector) 重载不起作用。我认为这与我的数据角色选择器有关，但是按类删除选择器也不起作用。

难道我做错了什么？或者这是 jQuery 中的一个错误，或者文档是错误的：

> 我们还可以包含一个选择器作为可选参数

[http://api.jquery.com/remove/](http://api.jquery.com/remove/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T11:20:57.577

`$wrapper.find('span').remove('[data-role="to-be-removed"]')`

是相同的

`$wrapper.find('span').filter('[data-role="to-be-removed"]').remove()`

```
var $wrapper = $('[data-role="wrapper"]');

$('#remove1').on('click', function () {
    $wrapper.find('[data-role="to-be-removed"]').remove();
});

// this should work: http://api.jquery.com/remove/
$('#remove2').on('click', function () {
    $wrapper.find('[data-role="to-be-removed"]').remove('[data-role="to-be-removed"]');
});

// this should work: http://api.jquery.com/remove/
$('#remove3').on('click', function () {
    $wrapper.find('[data-role="to-be-removed"]').remove('.to-be-removed');
}); 
```

[http://jsfiddle.net/duRXc/3/](http://jsfiddle.net/duRXc/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T11:24:46.003

要删除与选择器匹配的子元素，您可以使用：

```
$('[data-role="to-be-removed"]', $wrapper).remove(); 
```

该`remove(selector)`方法是进一步过滤现有的选择。例如...

```
<ul id="test">
    <li>One</li>
    <li class="example">Two</li>
    <li>Three</li>
</ul> 
```

如果我选择所有列表项，则可以删除任何与我的过滤器匹配的列表项：

```
$('#test li').remove('.example'); 
```

[JSFiddle 上](http://jsfiddle.net/94NDB/)有一个运行示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:20:58.873

`$(selector).remove(filter)`删除 中的所有匹配`filter`元素`$(selector)`，请参阅此示例

[http://jsfiddle.net/steelywing/duRXc/6/](http://jsfiddle.net/steelywing/duRXc/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:34:53.357

选择器仅支持包装对象中的元素。因此，如果您使用 div 而不是内部的 span 并选择所有 div 作为包装器，它就可以工作。

例如[http://jsfiddle.net/hsLLr/](http://jsfiddle.net/hsLLr/)

```
<div data-role="wrapper">
    <div class="to-be-removed" data-role="to-be-removed">
        text to be removed
    </div>
</div>
<button id="remove1">Remove by jQuery object</button><br>
<button id="remove2">Remove by selector</button><br>
<button id="remove3">Remove by selector(class)</button> 
```

和

```
var $wrapper = $('div');

$('#remove1').on('click', function () {
    $wrapper.find('[data-role="to-be-removed"]').remove();
});

// this should work: http://api.jquery.com/remove/
$('#remove2').on('click', function () {
    $wrapper.remove('[data-role="to-be-removed"]');
});

// this should work: http://api.jquery.com/remove/
$('#remove3').on('click', function () {
    $wrapper.remove('.to-be-removed');
}); 
```

# emacs - 如何在 Emacs 中实现文件名补全

> ID：16081429
> 
> 赞同：0
> 
> 时间：2013-04-18T11:15:49.120
> 
> 标签：emacs, autocomplete, registry

最近想做一个库来操作Windows注册表。

我要做的第一件事是轻松输入注册表项路径。由于它看起来像一个文件路径，也许这可以通过`read-file-name'? Every time the user input the`/' 和 push key 之类的方法来实现，我可以使用 `reg query' shell 命令获取下一个可能的子键。

但是如何在真正的 emacs lisp 代码中实现它呢？

或者也许已经有一个功能齐全的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:29:46.357

您基本上必须为您的注册表项编写一个“完成表”。我不认为 Emacs 中已经存在这个完成表。您可以使用代码`completion-file-name-table`作为灵感。

# meteor - 应用程序的节点包依赖项

> ID：16081431
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:15:50.497
> 
> 标签：meteor, npm

由于 Meteor 0.6.x 引入了对节点包的支持，目前还不清楚如何为整个应用程序配置对 npm 包的依赖。可以说我需要在服务器代码中“要求”一些节点包。如何确保在将应用程序部署到其他地方后安装此软件包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:21:28.253

`package.json`在项目的根目录中设置文件很容易。

您可以在这里找到一份备忘单来帮助您进行设置：[http ://package.json.nodejitsu.com/](http://package.json.nodejitsu.com/)

在依赖项下，您可以指定您的运行时部门。它们是使用`$ npm install`命令安装的，或者`# npm -g install`如果您想将它们安装在您的系统上而不是项目本地。

# asp.net - Ajax response data in .net

> ID：16081434
> 
> 赞同：6
> 
> 时间：2013-04-18T11:16:06.170
> 
> 标签：asp.net, ajax, response

I have a asp .net web page and a button in it. I'm calling an ajax method in the button click event as follows

```
 $("#btnTest").click(function () {
                 $.ajax({
                     type: 'POST',
                     url: 'test2.aspx',
                     success: function (data) {
                         alert( data);

                     },
                     error: function (data) {
                         alert("In error  ");

                     }
                 });
             }); 
```

In success part alert( data) Im getting the html code of the page test2.aspx (which one I have given in ajax url).

In test2.aspx.cs code is given as below

```
protected void Page_Load(object sender, EventArgs e)
    {
        jsonTest();
    }

    public List<string> jsonTest()
    {
        List<string> list = new List<string>();
        list.Add("aa");
        list.Add("bb");
        list.Add("cc");
        return list;        
    } 
```

Why this data in 'list' is not coming as response data in ajax?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:41:26.310

为此目的尝试 Response.Write() 方法

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Write("data to be returned");
} 
```

或者尝试在aspx页面中编写静态webmethods。这些方法可以从ajax调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:51:42.880

您不能将数据从 aspx 返回到 ajax。尝试这个

```
HttpContext.Current.Response.Write(list);
HttpContext.Current.Response.Flush();
HttpContext.Current.ApplicationInstance.CompleteRequest();
HttpContext.Current.Response.SuppressContent = true; 
```

这将有助于解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:20:16.723

您不能从 jQuery 调用正常的页面方法。
您需要创建一个`web-method`从 jQuery 访问它。
这是关于如何调用页面方法的一个很好的链接
[http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:39:30.880

像这样使用..

```
 $("#btnTest").click(function () {
                 $.ajax({
                     type: 'POST',
                     url: 'test2.aspx',
                     success: function (data) {
                         alert( data.d[0]);
                         alert( data.d[1]);
                         alert( data.d[2]);

                     },
                     error: function (data) {
                         alert("In error  ");

                     }
                 });
             }); 
```

# ruby-on-rails - 如何将 number_field 分为 3 部分？

> ID：16081436
> 
> 赞同：0
> 
> 时间：2013-04-18T11:16:13.933
> 
> 标签：ruby-on-rails, ruby, view

在模型中，我有一个电话整数字段。在视图中，该字段显示如下：

```
<%= f.number_field :phone %> 
```

我正在尝试将电话号码的这一输入显示为 3 个输入，我想在视图中向用户提供如下内容：

```
___ - ___ - ____ 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:51:51.243

jQuery [Masked Input](http://digitalbush.com/projects/masked-input-plugin/)插件在一个输入字段中提供了此功能：

> 它允许用户更轻松地输入固定宽度的输入，您希望他们以某种格式（日期、电话号码等）输入数据。

演示页面包含一个电话格式示例：`(___) ___-____`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:36:17.273

一种方法是在视图中创建 3 个字段，并让用户在 3 个单独的部分中输入数字。鉴于它看起来像这样

```
<p><%= f.number_field_tag "area_code" %> - 
<%= f.number_field_tag "phone1" %> - 
<%= f.number_field_tag "phone2" %> </p> 
```

在控制器中，您将这 3 个加入 1 个字符串，以便能够根据您的模型设置保存它

```
def create_user
...
@user = User.new
@user.phone_number = params[:area_code].to_s + params[:phone1].to_s + params[:phone2].to_s
...
end 
```

我还建议将电话号码保存为模型中的字符串，以避免错误存储以 0 开头的数字。

# c# - WPF 中的 MultiBinding 不允许超过两个绑定

> ID：16081440
> 
> 赞同：0
> 
> 时间：2013-04-18T11:16:19.807
> 
> 标签：c#

```
<MultiBinding  Converter="{StaticResource MergeValuesConverter}">
      <Binding Path="StructureID" />
      <Binding Path="SectionID" />
      <Binding Path="ParentStructureID" />                                    
</MultiBinding> 
```

我只得到前两个绑定。有没有办法获得第三个绑定（ParentStructureID）？

# mysql - SQL 连接结果全文

> ID：16081442
> 
> 赞同：0
> 
> 时间：2013-04-18T11:16:21.420
> 
> 标签：mysql, sql

我有两个表，我将它们称为 table1 和 table2。Table1有2个字段，id和auth，table2也有两个字段，id和keywords。注意 table1 和 table2 的 id 匹配。这是我的查询：

```
SELECT id, MATCH(keywords) AGAINST('example') FROM table2 WHERE MATCH(keywords) AGAINST('example') 
```

我将如何排除相同 id 的 auth (table1) 不是 1 的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:20:43.697

```
SELECT id, MATCH(keywords) AGAINST('example') 
  FROM table2 t2
 WHERE MATCH(keywords) AGAINST('example')
   AND NOT EXISTS (select 1 from table1 t1 where t1.id = t2.id and t1.auth != 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:26:00.913

```
 SELECT * 
  FROM table1 t1
  INNER JOIN table2 t2
  ON t1.id != t2.id 
```

# iphone - 带有coreplot的其他nibs子视图中的nibs视图，cpgraph将超级视图作为其属性

> ID：16081455
> 
> 赞同：0
> 
> 时间：2013-04-18T11:16:56.683
> 
> 标签：iphone, cocoa-touch, uiviewcontroller, core-plot, loadnibnamed

我将 A-viewcontrollers 视图加载到其他 B-viewcntrollers 子视图 ( `UIview`)，A 正在使用图形`coreplot`并初始化 CPTgraph。当'A'初始化它的所有属性时，比如：数组或标签是cptgraph实例的属性，所以它给了我错误。谁能帮我解决这个问题。提前致谢。

错误是：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString sizeWithTextStyle:]: unrecognized selector sent to instance 0x75b1e50' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:37:14.913

这是 Core Plot 添加的类别方法。确保您的项目同时使用 -ObjC 和 -all_load 链接器标志。有关详细信息，请参阅[http://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications#Dependent_Project_Install](http://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications#Dependent_Project_Install)。

# c# - 没有互联网时 Windows 商店应用程序崩溃

> ID：16081457
> 
> 赞同：0
> 
> 时间：2013-04-18T11:16:58.787
> 
> 标签：c#, .net, windows-8, microsoft-metro, windows-store-apps

我正在创建我的第一个 Windows 商店应用程序，并且在启动期间我有几个 Web 服务调用，并且还定期通过该应用程序调用。但是我注意到当我因为网络服务调用而无法访问互联网时，我的应用程序将无法启动/崩溃或只是关闭。我希望我的应用程序以一些初始数据以正常方式启动，即使没有互联网访问也看起来正常。我从 web 服务获得的数据主要是我在各种文本框和图表中显示的天气数据。

下面的代码在我的扩展初始屏幕中显示了 Web 服务调用。

```
public sealed partial class ExtendedSplashScreen : Page
{

//parameterItem max1DayAgo = new parameterItem();
//parameterItem min1DayAgo = new parameterItem();

public ExtendedSplashScreen()
{
    this.InitializeComponent();
}

/// <summary>
/// Invoked when this page is about to be displayed in a Frame.
/// </summary>
/// <param name="e">Event data that describes how this page was reached.  The Parameter
/// property is typically used to configure the page.</param>
protected override async void OnNavigatedTo(NavigationEventArgs e)
{

    string[] periodSelector = { "1DayAgo", "1WeekAgo", "1MonthAgo" };
    string[] modeSelector = { "max", "min" };
    string[] parameterSelector = { "umtTemp1", "umtWindSpeed", "umtAdjBaromPress", "umtRainRate" };

    //Create a webservice object
    ServiceReference.WebServiceSoapClient webServiceObj = new ServiceReference.WebServiceSoapClient();
    //First we create an object that holds max data for yesterday
    var getMax1DayAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[0], modeSelector[0]);

    //create an object that holds min data for yesterday

    var getMin1DayAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[0], modeSelector[1]);
    //Save arrayOfValue and arrayOfUnit to a parameterItem object. these objects are created during startup
    // and the can be accessed and updated by all methods in this page later we will see that maxMinButton_Click method
    //for the maxMinButton will use these data

    //create an object that holds max data for last week
    var getMax1WekAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[1], modeSelector[0]);
    //create an object that holds min data for last week
    var getMin1WekAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[1], modeSelector[1]);
    //create an object that holds max data for last month
    var getMax1MonthAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[2], modeSelector[0]);
    //create an object that holds min data for last month
    var getMin1MonthAgoObj = await webServiceObj.GetSelectedMaxMinDataAsync(parameterSelector, periodSelector[2], modeSelector[1]);

    (App.Current as App).max1DayAgo.arrayOfValue = getMax1DayAgoObj.arrayOfValue;
    (App.Current as App).max1DayAgo.arrayOfUnit = getMax1DayAgoObj.arrayOfUnit;

    (App.Current as App).min1DayAgo.arrayOfValue = getMin1DayAgoObj.arrayOfValue;
    (App.Current as App).min1DayAgo.arrayOfUnit = getMin1DayAgoObj.arrayOfUnit;

    (App.Current as App).max1WeekAgo.arrayOfValue = getMax1WekAgoObj.arrayOfValue;
    (App.Current as App).max1WeekAgo.arrayOfUnit = getMax1WekAgoObj.arrayOfUnit;

    (App.Current as App).min1WeekAgo.arrayOfValue = getMin1WekAgoObj.arrayOfValue;
    (App.Current as App).min1WeekAgo.arrayOfUnit = getMin1WekAgoObj.arrayOfUnit;

    (App.Current as App).max1MonthAgo.arrayOfValue = getMax1MonthAgoObj.arrayOfValue;
    (App.Current as App).max1MonthAgo.arrayOfUnit = getMax1MonthAgoObj.arrayOfUnit;

    (App.Current as App).min1MonthAgo.arrayOfValue = getMin1MonthAgoObj.arrayOfValue;
    (App.Current as App).min1MonthAgo.arrayOfUnit = getMin1MonthAgoObj.arrayOfUnit;

    string[] startupData = new string[13];

    startupData[0] = " " + (App.Current as App).max1DayAgo.arrayOfValue[0] + " " + (App.Current as App).max1DayAgo.arrayOfUnit[0]; //    maxTemp 
    startupData[1] = " " + (App.Current as App).max1DayAgo.arrayOfValue[1] + " " + (App.Current as App).max1DayAgo.arrayOfUnit[1]; //    maxWindSped 
    startupData[2] = " " + (App.Current as App).max1DayAgo.arrayOfValue[2] + " " + (App.Current as App).max1DayAgo.arrayOfUnit[2]; //    maxAirPressure 
    startupData[3] = " " + (App.Current as App).max1DayAgo.arrayOfValue[3] + " " + (App.Current as App).max1DayAgo.arrayOfUnit[3];//     maxRainfall

    startupData[4] = " " + (App.Current as App).min1DayAgo.arrayOfValue[0] + " " + (App.Current as App).min1DayAgo.arrayOfUnit[0]; //    minTemp 
    startupData[5] = " " + (App.Current as App).min1DayAgo.arrayOfValue[1] + " " + (App.Current as App).min1DayAgo.arrayOfUnit[1];//     minWindSped 
    startupData[6] = " " + (App.Current as App).min1DayAgo.arrayOfValue[2] + " " + (App.Current as App).min1DayAgo.arrayOfUnit[2];//     minAirPressure  
    startupData[7] = " " + (App.Current as App).min1DayAgo.arrayOfValue[3] + " " + (App.Current as App).min1DayAgo.arrayOfUnit[3];//     minRainfall

    // Main fields
    // ServiceReference.WebServiceSoapClient webServiceObj = new ServiceReference.WebServiceSoapClient();
    var getLatestTempObj = await webServiceObj.GetLatestDataAsync("umtTemp1");
    var getLatestWindObj = await webServiceObj.GetLatestDataAsync("umtWindSpeed");
    var getLatestwindDirObj = await webServiceObj.GetLatestDataAsync("umtAdjWinDir");
    var getLatestairPressureObj = await webServiceObj.GetLatestDataAsync("umtAdjBaromPress");

    startupData[8] = " " + getLatestTempObj.Value + " " + getLatestTempObj.Unit;//temperatureMainTxtBlock.Text
    startupData[9] = " " + getLatestWindObj.Value + " " + getLatestWindObj.Unit;//temperatureMainTxtBlock.Text

    startupData[10] = "" + getLatestwindDirObj.Value; //temperatureMainTxtBlock.Text

    startupData[11] = " " + getLatestairPressureObj.Value + " " + getLatestairPressureObj.Unit;//temperatureMainTxtBlock.Text

    startupData[12] = "Last update: " + getLatestwindDirObj.Timestamp;//temperatureMainTxtBlock.Text
    //save the startup data to the global variables
    (App.Current as App).NavigateData = startupData;

    this.Frame.SetNavigationState(e.Parameter as string);
    this.Frame.Navigate(typeof(MainPage));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:22:52.907

我们在一些基于团队的应用程序中采用的一种方法是在任何调用返回网络数据之前，检查网络状态。例子：

```
 async Task RefreshFromWeb(...)
{
    if (!App.HasInternetAccess)
    {
        await new Windows.UI.Popups.MessageDialog(Strings.NoInternetWarning).ShowAsync();
        return;
    }

    //attempt access here
}

public static bool HasInternetAccess
{
    get
    {
        var profile = Windows.Networking.Connectivity.NetworkInformation.GetInternetConnectionProfile();
        if (profile == null)
            return false;
        return profile.GetNetworkConnectivityLevel() == 
               Windows.Networking.Connectivity.NetworkConnectivityLevel.InternetAccess;
    }
} 

```

我们有时也采用了另一种非常相似的方法，但是使用 await 并返回 true 或 false（上面可以很容易地完成相同的操作，上面的方法只是给出了对话框）

```
public static async System.Threading.Tasks.Task HasInternet()
{
    var profile = Windows.Networking.Connectivity.NetworkInformation.GetInternetConnectionProfile();
    var hasNetAccess = profile != null;
    if (!hasNetAccess)
        await new Windows.UI.Popups.MessageDialog(
            content: InfoHub.AppHubViewModel.Strings.NoInternetWarning,
            title: InfoHub.AppHubViewModel.Strings.NoInternetWarning).ShowAsync();
    return hasNetAccess;
}

async void YourControlEvent_Click(object sender, ItemClickEventArgs e)
{
    //if net access, do your stuff, otherwise ignore for now
    if (await IsInternet())
    {
        //do net calls here
    }
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:20:20.773

您可以使用[NetworkStatusChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkinformation.networkstatuschanged%28v=win.10%29.aspx)事件，`App.xaml.cs`然后您可以声明一个静态变量并使用它来检查 Internet 是否可用。如果 Internet 可用，请执行您想要的操作，否则显示错误消息。

```
public static bool IsInternetAvailable;

void NetworkInformation_NetworkStatusChanged(object sender)
{
    if (NetworkInformation.GetInternetConnectionProfile() != null)
        App.IsInternetAvailable = true;
    else
        App.IsInternetAvailable = false;
} 
```

`try` `catch`当您有异常的可能性时，请始终使用块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:20:36.897

您需要围绕这一行实现一些异常处理： `ServiceReference.WebServiceSoapClient webServiceObj = new ServiceReference.WebServiceSoapClient();`

并实现将在离线模式下工作的回退，即从缓存中检索数据。

# ruby - 在 Ubuntu Quantal 上运行 TorqueBox 失败

> ID：16081458
> 
> 赞同：0
> 
> 时间：2013-04-18T11:16:58.747
> 
> 标签：ruby, jruby, torquebox

我正在尝试在 Ubuntu Quantal 上的 Vagrant 中设置 TorqueBox。我已经将我的应用程序部署到 TorqueBox 中，但是当我尝试运行 bin/standalone.sh 时，它在“设置 Bundler”之后挂起很长时间，然后只是说“Killed”。

我完全不知道如何调试它。

我按照本指南安装 TorqueBox：[http ://torquebox.org/documentation/2.3.0/production-setup.html](http://torquebox.org/documentation/2.3.0/production-setup.html)

这是完整的日志：[https ://gist.github.com/elabs-dev/5411966](https://gist.github.com/elabs-dev/5411966)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:32:07.547

$TORQUEBOX_HOME/jboss/standalone/bin 中是否有转储文件？如果是这样，则可能表明 JVM 正在崩溃。

否则，可能是没有足够的内存来部署您正在部署的任何内容 - 您的应用程序有多大？

# sql - 删除级联在这种情况下不起作用

> ID：16081463
> 
> 赞同：0
> 
> 时间：2013-04-18T11:17:12.930
> 
> 标签：sql, sql-server

场景：用户可以创建一个关系类型，比如Friends，然后用户可以链接一些其他用户作为关系定义。如果用户被删除，关系定义也应该被删除，用户之间的关系也需要被删除。

这是 sql server 上的演示数据库设计：http: [//i.stack.imgur.com/3pcOy.png](http://i.stack.imgur.com/3pcOy.png) 外键是：

1.  表 2.UserId 参考表 1.UserId；
2.  表 3.RelationShipId 参考表 2.RelationshipId；
3.  表 3.UserId 参考表 1.UserId；
4.  表 3.OtherUserId 参考表 1.UserId；

我的目标是当从表1中删除记录时，它将删除表2和表3中的相关记录；删除表 2 中的记录时，会删除表 3 中的相关记录。

当我尝试使用“ON DELETE CASCADE”时，出现错误“可能导致循环或多个级联路径”，我也不想使用触发器。

你对这种情况有什么建议吗？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:03:23.463

表3中的userid不是多余的吗？或者至少如果您将用户 ID 放在表 3 中，为什么还有表 2？表 2 中的信息已经存在于表 3 中。

是否存在表 3 上的用户 id 与表 2 上的关系记录不同的情况？如果不是 - 表 2 是多余的。

# javascript - 在javascript中返回未定义值的变量

> ID：16081464
> 
> 赞同：0
> 
> 时间：2013-04-18T11:17:14.097
> 
> 标签：javascript, jquery

我正在使用这样的功能

```
function example(){
var a;
$.ajax({
        url:"www.example.com/function",
        type: 'POST',
        success: function(result){
        a=result;
            }
    });

alert(a);
} 
```

我需要ajax函数之外的变量

在这里，我得到的结果是未定义的。我怎样才能在那里获得价值。?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T11:25:39.660

您可以通过指定来等待 ajax 调用返回`async: false`。

```
function example(){
    var a;
    $.ajax({
        url:"www.example.com/function",
        type: 'POST',
        async: false,
        success: function(result){
            a=result;
        }
    });
    alert(a);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T11:18:29.943

```
var a = "I am defined";
$.ajax({
        url:"www.example.com/function",
        type: 'POST',
        success: function(result){
           a=result;
           alert(a);
        }
    });

} 
```

`success`a 在调用 the 回调之前将是未定义的`ajax`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:35:50.360

```
I think you should return the value in the success function itself

function example(){
var a;
$.ajax({
        url:"www.example.com/function",
        type: 'POST',
        success: function(result){
           a=result;
           alert(a);
           return a;
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T11:23:23.127

为变量 a 设置默认值。

# javascript - 从 viewmodel 函数更改 observablearray 值

> ID：16081465
> 
> 赞同：1
> 
> 时间：2013-04-18T11:17:16.247
> 
> 标签：javascript, asp.net, knockout.js

我的视图模型中有一个函数应该将数组中的启用值从 false 更改为 true。

```
 editclick: function (user) {
     user.enabled = true;
     return true;
  } 
```

如果我发出警报以显示更改

```
user.enabled = true;
alert(ko.toJSON(user)); 
```

它表明它确实改变了，但绑定值没有改变。

如果我在更改前发出警报

```
alert(ko.toJSON(user));
user.enabled = true; 
```

第二次单击该按钮时，警报确实显示值已更改。

这是我的[jsFiddle](http://jsfiddle.net/JanGous/npBmq/)以及我使用的代码。

**[JS]**

```
var myViewModel = {
  myarray: ko.observableArray([{
     myname: 'Bob',
     mysurname: 'Smith',
     enabled: false
  }, {
     myname: 'John',
     mysurname: 'Smith',
     enabled: false
  }]),
  editclick: function (user) {
     user.enabled = true;
     alert(ko.toJSON(user));
     return true;
  }
}; 
```

**[代码]**

```
<Table border="1" cellpadding="5" cellspacing="0">
 <thead>
    <tr>
        <td>Button</td>
        <td>Value</td>
    </tr>
 </thead>
 <tbody data-bind="foreach: myarray">
    <tr>
        <td>
            <input type="button" value="Change" data-bind="click: $root.editclick" />
        </td>
        <td><span data-bind="text: enabled" />
        </td>
    </tr>
 </tbody>
</Table> 
```

我似乎更改不会更新视图模型。有没有做这项工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:30:58.073

唯一跟踪项目`ko.observableArray`添加或删除。

因此，为了跟踪项目内部的更改并自动更新 UI，您需要创建属性`ko.observable`：

```
myarray: ko.observableArray([{
         myname: 'Bob',
         mysurname: 'Smith',
         enabled: ko.observable(false)
     }, {
         myname: 'John',
         mysurname: 'Smith',
         enabled: ko.observable(false)
     }]) 
```

并且在`editclick`你需要设置`enabled`with: `user.enabled(true);`(因为`ko.observable`返回一个函数)

```
editclick: function (user) {
         user.enabled(true);
         alert(ko.toJSON(user));
         return true;
     } 
```

演示[JSFiddle。](http://jsfiddle.net/rRMu3/)

# hibernate - 这个sql查询有什么问题？

> ID：16081466
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:17:16.690
> 
> 标签：hibernate

```
Query q = session.createQuery("from FinancialTransactions where ft_TYPE='"+ftTYPE+"' Date between '"+beginDate+"' and '"+endDate+"'"); 
```

上面的查询有什么问题？它给出了错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:18:19.767

你错过了`and`，这`Date`是一个关键字

改变

```
where ft_TYPE='"+ftTYPE+"' Date between 
```

至

```
where ft_TYPE='"+ftTYPE+"' and Date between 
```

在你需要使用的各种条件之间`AND`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:24:04.690

如果您使用占位符，很明显您错过了 and `and`，并且假设`beginDate`and`endDate`是日期，解析它们可能会遇到问题。

更好的（并且不容易发生 HQL 注入）将是：

```
Query q = session.createQuery(
     "from FinancialTransactions " +
    "where ft_TYPE=? " +
      "and Date between ? and ?");
q.setString(1, ftType);
q.setDate(2, startDate);
q.setDate(3, endDate); 
```

# ios - 如何在新的 Apple Developer 网站上将 AdHoc 分发更改为 AppStore？

> ID：16081468
> 
> 赞同：0
> 
> 时间：2013-04-18T11:17:20.270
> 
> 标签：ios, app-store, provisioning-profile

首先，如果我的英语不够好，我很抱歉。

我将配置证书从 AppStore 更改为 AdHoc，因为我们必须在 testflight 上测试推送通知。那是在苹果更新开发者中心之前。

现在我要在 AppStore 上发布应用程序，但我无法更改证书的分发参数。有什么办法可以做到这一点，或者我应该创建一个新的证书？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:51:56.387

我对其进行了一些搜索并找到了这个解决方案。检查它是否有效

**[http://samwize.com/2012/11/14/ios-adhoc-distribution-with-the-new-xcode/](http://samwize.com/2012/11/14/ios-adhoc-distribution-with-the-new-xcode/)**

您也可以查看此链接：-

**[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:21:19.550

现在，再次更改证书以形成 AdHoc 到 APP store 并进行新的构建，然后将其上传到 Itunes。

**注意：-从 AdHoc 更改为 AppStore 后，请在进行新构建之前刷新配置文件**

# javascript - 在 djbrowser 中动态地将外部 css 设置为 ck 编辑器

> ID：16081472
> 
> 赞同：0
> 
> 时间：2013-04-18T11:17:36.677
> 
> 标签：javascript, html, css, browser, ckeditor

我将 ck 编辑器（最新版本 4.1）嵌入到 dj 浏览器中。 [dj 浏览器](http://djproject.sourceforge.net/)

我想在 ck 编辑器中设置一个外部 css 文件（ [http://mystyle.css ）。](http://mystyle.css)

但我不想修改或编辑 ck 编辑器的配置文件。css 的 url 应该是动态设置的，在运行时可以更改其名称和 url。

我尝试的是调用以下命令，但没有帮助。

```
CKEDITOR.stylesSet.add('mystyle');
..
CKEDITOR.config.stylesSet('mystyle:http://mystyle.css'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:13:31.293

它们的关键是访问 CKE iframe 的文档对象。然后，您只需在文档头部吐出一个 CSS 链接，而无需触及配置。示例来自[https://stackoverflow.com/a/577002/694325](https://stackoverflow.com/a/577002/694325)

我假设您使用“editor1”作为名称，但使用您拥有的任何内容..

```
var doc = CKEDITOR.instances.editor1.document.$; // get CKE doc!
var cssId = 'myCss';
if (!doc.getElementById(cssId))
{
    var head  = doc.getElementsByTagName('head')[0];
    var link  = doc.createElement('link');
    link.id   = cssId;
    link.rel  = 'stylesheet';
    link.type = 'text/css';
    link.href = 'http://my.little.pony.net/Your.css';
    link.media = 'all';
    head.appendChild(link);
} 
```

或者，如果您喜欢这种东西，您可以使用 jQuery（[https://stackoverflow.com/a/2685661/694325](https://stackoverflow.com/a/2685661/694325)）

```
var doc = CKEDITOR.instances.editor1.document.$; // shortcut
$("<link/>", {
   rel: "stylesheet",
   type: "text/css",
   href: "http://my.little.pony.net/Your.css"
}).appendTo($(doc).find("head")); 
```

# java - Intellij IDEA。即使项目没有编译，也运行单元测试

> ID：16081475
> 
> 赞同：3
> 
> 时间：2013-04-18T11:17:40.260
> 
> 标签：java, intellij-idea

如果其他类（与单元测试类无关）无法编译，我如何为类运行单元测试？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T13:03:09.027

在 Run\Debug 配置中，您可以删除选项：Before launch - make。

# php - 如何通过编码在magento中添加属性选项标签和值？

> ID：16081488
> 
> 赞同：0
> 
> 时间：2013-04-18T11:18:20.220
> 
> 标签：php, magento, magento-1.7

我想添加、更新和删除 magento 产品属性选项值和标签？不是管理员，而是编码....

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T11:56:20.167

```
Hello All,

I got it. 
```

在这里，我有一个产品属性，名称是制造商，我想通过编码添加新的制造商“阿迪达斯”。所以下面是相同的片段。

我们也可以通过编码删除属性选项值。

```
<?php
// add new option in manufacturer attribut by coding 'adidas' in manufacturer attribute
$attribute_code=Mage::getModel('eav/entity_attribute')->getIdByCode('catalog_product', "manufacturer");
$attributeInfo = Mage::getModel('eav/entity_attribute')->load($attribute_code);
$attribute_table = Mage::getModel('eav/entity_attribute_source_table')->setAttribute($attributeInfo);
$options = $attribute_table->getAllOptions(false);
 //$options = $attributeInfo->getSource()->getAllOptions(false);
$_optionArr = array('value'=>array(), 'order'=>array(), 'delete'=>array());
foreach ($options as $option){
    $_optionArr['value'][$option['value']] = array($option['label']);
    $checkarray[] = $option['label'];
    }
if (!in_array('adidas', $checkarray)) {
    $_optionArr['value']['option_1'] = array('adidas');
    $attributeInfo->setOption($_optionArr);
    $attributeInfo->save();
}

//Delete any option from manufacturer like 'adidas'

$attribute_code=Mage::getModel('eav/entity_attribute')->getIdByCode('catalog_product', "manufacturer");
$attributeInfo = Mage::getModel('eav/entity_attribute')->load($attribute_code);
$attribute_table = Mage::getModel('eav/entity_attribute_source_table')->setAttribute($attributeInfo);
$options = $attribute_table->getAllOptions(false);
//$options = $attributeInfo->getSource()->getAllOptions(false);
$_optionArr = array('value'=>array(), 'order'=>array(), 'delete'=>array());
foreach ($options as $option){
                $_optionArr['value'][$option['value']] = array($option['label']);
                    if('adidas' == $option['label']){
                    $_optionArr['delete'][$option['value']] = true;
                    }
                }
$attributeInfo->setOption($_optionArr);
$attributeInfo->save();
?> 
```

# iphone - 在 iphone aap 的地图上放置多个 pin

> ID：16081489
> 
> 赞同：0
> 
> 时间：2013-04-18T11:18:21.033
> 
> 标签：iphone, mapkit

我正在为 Mapview 上的多个 pin drop 执行此代码。

```
- (void)geocode
{
    NSArray *arrCityName = [NSArray arrayWithObjects:@"Baroda", @"Surat", @"Ahmedabad", @"Rajkot", @"Junagadh", @"Mumbai", @"Mehsana", @"Veraval", @"Surendranagar", @"Gondal", nil];

    CLLocationCoordinate2D coordinate;
    MKCoordinateRegion region;
    DisplayMap *ann = [[DisplayMap alloc] init];

    [_mapView setMapType:MKMapTypeStandard];
    [_mapView setZoomEnabled:YES];
    [_mapView setScrollEnabled:YES];
    [_mapView setDelegate:self];

    for (int i = 0; i < [arrCityName count]; i++)
    {
        coordinate = [self geoCodeUsingAddress:[arrCityName objectAtIndex:i]];

        NSLog(@"Lat: %f --- Long: %f --- for city:--> %@",coordinate.latitude,coordinate.longitude,[arrCityName objectAtIndex:i]);

        region.center.latitude = latitude;
        region.center.longitude = longitude;
        region.span.longitudeDelta = 1.8;
        region.span.latitudeDelta = 1.8;

        [_mapView setRegion:region animated:YES];

        ann.title = [arrCityName objectAtIndex:i];
        ann.coordinate = region.center;
        [_mapView addAnnotation:ann];
    }
}

- (CLLocationCoordinate2D) geoCodeUsingAddress:(NSString *)address
{
    latitude = 0, longitude = 0;
    NSString *esc_addr =  [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSString *req = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];
    NSString *result = [NSString stringWithContentsOfURL:[NSURL URLWithString:req] encoding:NSUTF8StringEncoding error:NULL];
    if (result) {
        NSScanner *scanner = [NSScanner scannerWithString:result];
        if ([scanner scanUpToString:@"\"lat\" :" intoString:nil] && [scanner scanString:@"\"lat\" :" intoString:nil]) {
            [scanner scanDouble:&latitude];
            if ([scanner scanUpToString:@"\"lng\" :" intoString:nil] && [scanner scanString:@"\"lng\" :" intoString:nil]) {
                [scanner scanDouble:&longitude];
            }
        }
    }
    CLLocationCoordinate2D center;
    center.latitude = latitude;
    center.longitude = longitude;
    return center;
} 
```

这里的问题只是它只给出最后一个针脚。我想根据数组值进行多个引脚放置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:47:33.650

感谢@ScarletWitch 的回答......通过这样的改变，我得到了我的问题的解决方案。

```
- (void)geocode
{    
    NSArray *arrCityName = [NSArray arrayWithObjects:@"Baroda", @"Surat", @"Ahmedabad", @"Rajkot", @"Junagadh", @"Mumbai", @"Mehsana", @"Veraval", @"Surendranagar", @"Gondal", nil];

    CLLocationCoordinate2D coordinate;
    MKCoordinateRegion region;

    [_mapView setMapType:MKMapTypeStandard];
    [_mapView setZoomEnabled:YES];
    [_mapView setScrollEnabled:YES];
    [_mapView setDelegate:self];

    NSMutableArray *arrPins = [[NSMutableArray alloc]init];

    for (int i = 0; i < [arrCityName count]; i++)
    {
        coordinate = [self geoCodeUsingAddress:[arrCityName objectAtIndex:i]];

        NSLog(@"Lat: %f --- Long: %f --- for city:--> %@",coordinate.latitude,coordinate.longitude,[arrCityName objectAtIndex:i]);

        region.center.latitude = latitude;
        region.center.longitude = longitude;
        region.span.longitudeDelta = 1.8;
        region.span.latitudeDelta = 1.8;

        [_mapView setRegion:region animated:YES];

        DisplayMap *ann = [[DisplayMap alloc] init];

        ann.title = [arrCityName objectAtIndex:i];
        ann.subtitle = @"city";
        ann.imageCity = [UIImage imageNamed:@"Default-568h@2x.png"];
        ann.coordinate = region.center;

        [arrPins addObject:ann];

        [_mapView addAnnotations:arrPins];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T12:22:50.630

在您的代码中，您仅在“for”循环之外分配 DisplayMap (Annotation) 一次
，这就是它保留最后一个值而不是添加多个
annotations 的原因。通过在循环中分配实例来更正您的代码。此外，您不需要一次又一次地设置 MKCoordinateRegion。您可以设置一次，使其包含要显示在 MapView 上的所有注释。

```
 -(void)geocode
    {
       NSArray *arrCityName = [NSArray arrayWithObjects:@"Baroda", @"Surat", @"Ahmedabad",   
                               @"Rajkot", @"Junagadh", @"Mumbai", @"Mehsana", @"Veraval", 
                               @"Surendranagar", @"Gondal", nil];

       CLLocationCoordinate2D coordinate;
       MKCoordinateRegion region;

       [_mapView setMapType:MKMapTypeStandard];
       [_mapView setZoomEnabled:YES];
       [_mapView setScrollEnabled:YES];
       [_mapView setDelegate:self];

       region.center.latitude = latitude;
       region.center.longitude = longitude;
       region.span.longitudeDelta = 1.8;
       region.span.latitudeDelta = 1.8;

       [_mapView setRegion:region animated:YES];

       for (int i =0 ; i<[arrCityName count] ; i++)
           {
                DisplayMap *ann = [[DisplayMap alloc] init];

                coordinate = [self geoCodeUsingAddress:[arrCityName objectAtIndex:i]];
                ann.title = [arrCityName objectAtIndex:i];
                ann.coordinate = region.center;
                [_mapView addAnnotation:ann];

            }
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:35:37.797

当我尝试添加多个引脚时，我遇到了类似的问题。我所做的是：将全局计数器设置为在添加的每个注释上增加一个，即在 addAnotaion 上。创建 for 循环的另一个函数：

```
coordinate = [self geoCodeUsingAddress:[arrCityName objectAtIndex:i]];

    NSLog(@"Lat: %f --- Long: %f --- for city:--> %@",coordinate.latitude,coordinate.longitude,[arrCityName objectAtIndex:i]);

    region.center.latitude = latitude;
    region.center.longitude = longitude;
    region.span.longitudeDelta = 1.8;
    region.span.latitudeDelta = 1.8;

    [_mapView setRegion:region animated:YES];

    ann.title = [arrCityName objectAtIndex:i];
    ann.coordinate = region.center;
    [_mapView addAnnotation:ann]; 
```

并调用该函数，直到计数达到 arrCityName 的计数

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
static NSString *identifier = @"CarLocation";
if ([annotation isKindOfClass:[MapViewAnnotation class]]) {

    static NSString *AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
    if (!pinView)
    {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
        pinView.canShowCallout = YES;
        pinView.animatesDrop = YES;
    }
    else
    {
        pinView.annotation = annotation;
    }

    UIImageView *leftCalloutView = [[UIImageView alloc]
                                    initWithImage:((MapViewAnnotation *)annotation).imagePin];
    pinView.leftCalloutAccessoryView = leftCalloutView;
    pinView.image = leftCalloutView.image;
    [leftCalloutView release];
    [self performSelector:@selector(intermediate) withObject:nil afterDelay:1.05];

    return pinView;

} 
```

# c# - Button_Click() 事件在 Windows 桌面应用程序中触发两次

> ID：16081494
> 
> 赞同：1
> 
> 时间：2013-04-18T11:18:31.303
> 
> 标签：c#, events, desktop-application, buttonclick

我正在创建一个像[这样提供搜索选项的表单](http://i.imgur.com/nYGhs0Z.png)

我正在使用 MDI 表单应用程序。

我的代码是：

```
 private void btnSearch_Click(object sender, EventArgs e)
 {

    string query = null;
    if (txtBillNo.Enabled && txtBillNo.Text.Trim().Length != 0)
    {
        query = "Select BillNo,PartyName,City,State,FORMAT(BillDt,'dd-mm-yyyy')as Dt from BillMaster where BillNo=" + Convert.ToInt32(txtBillNo.Text.Trim());
        FillGrid(query);
    }
    else if (txtName.Enabled && txtName.Text.Trim().Length != 0)
    {
            query = "Select BillNo,PartyName,City,State,FORMAT(BillDt,'dd-mm-yyyy')as Dt from BillMaster where UCASE(PartyName) like '" + txtName.Text.Trim().ToUpper() + "'";
            FillGrid(query);
    }

    else
    {
        MessageBox.Show("Enter Value First");

        if (rdbName.Enabled)
        {
            txtName.Focus();

        }
        else if (rdbBillNo.Enabled)
        {
           txtBillNo.Focus();

        }

    }                 

} 
```

条件是检查文本框是否被留下。如果它留空，那么我将给出用户必须输入值的消息。但是我在运行程序时提示两次，然后我调试了程序，发现`Click`事件被调用了两次。

我应该怎么做才能解决这个问题。
请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:27:25.777

在 WPF 中，您必须`FillGrid(query)`
在 win 表单中将 e.Handled 设置为 True，删除并且不要注册 btnSearch。在 Load() 中单击

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:20:46.487

在 Visual Studio 中打开 CallStack 并找出调试时调用 Click 事件的函数。

`Debug->Windows->Call Stack`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T16:51:35.520

如果它是 WPF 项目，请确保您没有在 XAML 中注册单击处理程序和项目的 C# 代码。我有同样的问题，这是由于这个原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-17T04:57:54.230

我认为可能需要更改方法签名以使用**RoutedEventArgs e**

然后，在方法体的最后，可以设置**e.Handled 为 True**

```
 private void btnSearch_Click(object sender, RoutedEventArgs e)
 {
    // do some stuff  
    e.Handled = True

} 
```

# android - 无法在画布中呈现在线资源或简单文本

> ID：16081496
> 
> 赞同：1
> 
> 时间：2013-04-18T11:18:41.387
> 
> 标签：android, canvas, graphics

我有一个视图，我想在线显示一些资源。所以我创建了一个子类`android.view.View`并覆盖了该`dispatchDraw`方法：

```
public class TView extends View {
    AsyncHttpClient client = new AsyncHttpClient();
    private Paint p = new Paint();

    public TView(Context context) {
        super(context);
    }

    @Override
    protected void dispatchDraw(final Canvas canvas) {
        client.get("http://developer.android.com/assets/images/dac_logo.png", new BinaryHttpResponseHandler() {
            @Override
            public void onSuccess(byte[] arg0) {
                doRender(canvas, arg0);
            }
        });
        super.dispatchDraw(canvas);
    }

    private void doRender(Canvas c, byte[] data) {
        Log.d("xx", "data length :" + data.length);
        c.drawText("hello", 10, 10 + p.getTextSize(), p);
        Bitmap bmp = BitmapFactory.decodeByteArray(data, 0, data.length);
        BitmapDrawable bd = new BitmapDrawable(bmp);
        bd.draw(c);
    }
} 
```

但是以下代码不起作用。

我只收到日志消息：

```
04-18 19:10:44.933: D/xx(1258): data length :2170 
```

似乎数据已下载。但是画布不会渲染它。

问题是什么？

顺便说一句，我使用[AsycHttpClient](https://github.com/loopj/android-async-http)来简化数据请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:40:35.167

我是这个帖子的提问者。我找到了一个这么说的解决方案。（如果这是最好的，我不这样做，但我确实有效）。

* * *

这似乎是我尝试通过`AsyncHttpClient`. 一旦请求线程启动，UI 线程就完成并返回，并且`canvas`已经超出了它的范围。

然后当数据返回时，`canvas`将不再工作。

顺便说一句，我仍然希望得到一个令人信服的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:21:50.760

```
protected void dispatchDraw(final Canvas canvas) {
//                          ^^^^^ 
```

# servlets - 如何通过 servlet 在 Web 上运行 Selenium 框架？

> ID：16081498
> 
> 赞同：0
> 
> 时间：2013-04-18T11:18:44.613
> 
> 标签：servlets, selenium, selenium-webdriver

我试图通过一个 servlet 运行 Selenium 框架，以便我可以通过 Web 运行它，但该程序没有获取测试用例 Excel 电子表格的路径。有没有其他方法可以通过 Web 应用程序运行 Selenium？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T13:05:46.183

I got the answer just add a servlet on your project and map it to a jsp with web.xml and in post of servlet call your main function from which your script is running and enjoy.

# java - 删除重复的 try/catch 代码

> ID：16081499
> 
> 赞同：0
> 
> 时间：2013-04-18T11:18:47.103
> 
> 标签：java, web-services, methods, try-catch

我在许多方法中都有以下代码

```
try{ user = userList.get(user_id); }
catch(Exception e) { return "USER_NOT_FOUND"; } 
```

我发现我自己在不同的方法中使用了很多代码，为了删除重复项，我可以尝试创建一个这样的方法：（示例）

```
.. returnUser(){

    try{ return user = userList.get(user_id); }
    catch(Exception e) { return "USER_NOT_FOUND"; }
} 
```

但是，如果找不到用户，这只会返回用户或字符串，并且不会退出方法：（不工作）

```
public static void main(String[] args){
    System.out.pring("This will run always");
    User a = returnUser();
    System.out.pring("this should only run if a user was returned");
    System.out.pring("otherwise 'USER_NOT_FOUND' should be returned and end app.");
    ....
    ....
    return "Succsess";
 } 
```

有一个更好的方法吗？您可以从方法中返回一个刹车并返回字符串并结束该方法吗？

**代码示例：**

```
public String completeTodo(){

    Todo todo; // Instantiate User object
    User user; // Instantiate todo object

    try{ todo = todoList.get(user_id); } //repeditive in all functions
    catch(Exception e) { return "TODO_NOT_FOUND"; }

    try{ user = userList.get(user_id); } //repeditive in some functions
    catch(Exception e) { return "USER_NOT_FOUND"; }

    if(user.getToken() == token){

                 user.setDef(1);
                 return user.toString();    

    }

    return "USER_NOT_VALID";

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:53:22.730

返回用户的函数

```
public User returnUser() throws UserNotFoundException {

    try{
         return user = userList.get(user_id);
    }
    catch (Exception e) {
        throw new UserNotFoundException ("user " + user + " not found");
    }
} 
```

主要方法

```
public static void main(String... args){

    try {
        System.out.println ("This will run always");

 // this will not work because returnUser() is not a static method and there is no "this" in "static void main()"
        User user = this.returnUser();

        System.out.println ("this should only run if a user was returned");
        return "Success";

    } catch (UserNotFoundException e) {
        System.out.pring("otherwise 'USER_NOT_FOUND' should be returned and end app.");
    } 
```

异常类

```
class AppException extends Exception {
    public AppException(String msg) {
         super(msg);
    }
}

class UserNotFoundException extends AppException {
    public UserNotFoundException(String msg) {
         super(msg);
    }
} 
```

**UPD**

这就是我对数据服务的意思，代码是可编译的

```
import java.util.ArrayList;
import java.util.List;

public class App {

    public static void main(String... args) {

        App app = new App();

        try {
            app.run();

        } catch (UserNotFoundException e) {
            System.out.println("'USER_NOT_FOUND'");
        } catch (TodoNotFoundException e) {
            System.out.println("'TODO_NOT_FOUND'");
        } catch (AppException e) {
            System.out.println("Some other application exception");
        }
    }

    DataService dataService = null;

    public void run() throws AppException {

        System.out.println("This will run always");

        prepareDataService();

        completeTodo(1, 2);

        System.out.println("this should only run if a user was returned");

    }

    void prepareDataService() {

        List<Todo> todoList = new ArrayList<Todo>();
        List<User> userList = new ArrayList<User>();

        dataService = new DataService(todoList, userList);
    }

    void completeTodo(int todoId, int userId) throws AppException {

        Todo todo = dataService.findTodo(todoId);
        User user = dataService.findUser(userId);

        user.doSomething(todo);
    }
}

class DataService {

    private List<Todo> todoList;
    private List<User> userList;

    public DataService(List<Todo> todoList, List<User> userList) {
        this.todoList = todoList;
        this.userList = userList;
    }

    public Todo findTodo(int todoId) throws TodoNotFoundException {
        Todo todo = null;

        // find todo here

        if (todo == null) {
            throw new TodoNotFoundException("todo " + todo + " not found");
        }
        return todo;
    }

    public User findUser(int userId) throws UserNotFoundException {
        User user = null;

        // find user here

        if (user == null) {
            throw new UserNotFoundException("user " + user + " not found");
        }
        return user;
    }
}

class Todo {
}

class User {

    public void doSomething(Todo todo) {
    };
}

class AppException extends Exception {
    public AppException(String msg) {
        super(msg);
    }
}

class TodoNotFoundException extends AppException {
    public TodoNotFoundException(String msg) {
        super(msg);
    }
}

class UserNotFoundException extends AppException {
    public UserNotFoundException(String msg) {
        super(msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:48:47.353

我会这样写你的 todo 方法：

```
public String completeTodo() throws SpecificExceptionHere {
    Todo todo = todoList.get(user_id);
    User user = userList.get(user_id);
    if (user.getToken() == token){
        user.setDef(1);
        return user.toString();    
    } else {
        throw new AppropriateException("Invalid token: " + user.getToken());
    }
} 
```

并将异常处理留给调用代码。

# macos - 为 Mac OS 创建 DMG 可安装文件

> ID：16081501
> 
> 赞同：1
> 
> 时间：2013-04-18T11:18:56.723
> 
> 标签：macos, applescript, dmg

我必须使 DMG 可安装，

我可以制作一个普通的可安装文件，它会有指向应用程序文件夹和我的应用程序文件的符号链接，

我想创建类似于 Skype 或 Mozilla，他们将应用程序图标拖到应用程序文件，并可能将某些文件复制到 /library/Application Support 文件夹。

我已经使用 Shell Script 完成了它，一些网站说这里是 Apple 脚本会出现在图片中，但无法弄清楚如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:29:06.913

# 使用安装程序

如果您不只是进行拖放安装，那么接下来最常见的事情是创建一个[安装程序](http://en.wikipedia.org/wiki/Installer_%28OS_X%29)脚本并让用户单击它，而不是直接运行 shell 脚本或 Apple 脚本。

用于创建`.pkg`mac Installer 应用程序使用的文件的应用程序称为[PackageMaker](http://en.wikipedia.org/wiki/PackageMaker#PackageMaker)，有关更多信息，请参阅[此问题](https://stackoverflow.com/q/9251991/1353098)。

对于更新版本的 Xcode，PackageMaker 似乎不再可用。[这个问题](https://stackoverflow.com/q/11487596/1353098)讨论了它的替代品，Xcode“构建和存档”目标以及使用它来创建*组件包*。选择的[答案](https://stackoverflow.com/a/11487658/1353098)讨论了在 Xcode 中创建适当的目标并使用它来构建您`.pkg`的安装文件。

# 拖放

另一种方法是使用标准的*拖放*安装，然后在应用程序首次运行时创建配置文件。我相信 Firefox 使用与此类似的方法来创建用户在首次运行应用程序时使用的配置文件。

# visual-studio-2012 - 错误：“部署失败，因为未检测到 Windows Phone 8 手机。请确保手机已连接并打开电源”

> ID：16081503
> 
> 赞同：0
> 
> 时间：2013-04-18T11:19:01.177
> 
> 标签：visual-studio-2012, windows-phone-8, nokia

我安装了 VS 2012 Ultimate 和 Windows Phone 8 SDK。当我创建 Windows Phone 8 应用程序的新项目并在调试时直接引导时，它会给我这样的错误：“部署失败，因为没有检测到 Windows Phone 8 手机。确保手机已连接并打开电源”

我也完成了注册并解锁了我的手机，但直到它会给出错误。

我正在使用诺基亚 710 手机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:22:16.303

可能是因为您的诺基亚 710 上安装了 Windows Phone 7 (7.5)？

> 部署失败，因为未检测到**Windows Phone 8**手机。确保手机已连接并开机

# jquery - 页面加载时的 JQuery Mobile 事件

> ID：16081504
> 
> 赞同：3
> 
> 时间：2013-04-18T11:19:04.433
> 
> 标签：jquery, html, jquery-mobile, jquery-mobile-collapsible

我正在使用此代码为 html5+jquryMobile 应用程序中的可折叠内容设置动画...我将其添加到我的脑海中：

```
$(document).on('expand', '.ui-collapsible', function() {
   $(this).children().next().hide();
   $(this).children().next().slideDown(500);
})

$(document).on('collapse', '.ui-collapsible', function() {
   $(this).children().next().slideUp(500);
}); 
```

当我单击可折叠头部时它工作正常...我想将它用于我的所有可折叠元素但在某些页面中我希望在页面加载后自动拥有动画...有人可以提供帮助我？！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:33:11.460

工作示例：http: [//jsfiddle.net/Gajotres/vmZyn/](http://jsfiddle.net/Gajotres/vmZyn/)

```
$(document).on('pageshow', '#index', function(){       
    $('.ui-collapsible').children().next().hide();
    $('.ui-collapsible').children().next().slideDown(1500);
}); 
```

您想使用**[pageshow](http://api.jquerymobile.com/pageshow/)**事件。在那个时候页面你可以动画滑动。

如果您只想做一个（例如准备好文档），请改用以下语法：

```
$(document).on('pageinit', '#index', function(){       
    $('.ui-collapsible').children().next().hide();
    $('.ui-collapsible').children().next().slideDown(1500);
}); 
```

与**pageshow**不同，**[pageinit](http://api.jquerymobile.com/pageinit/)**只会触发一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:34:29.730

JQM 有自己的事件，您需要挂钩。此处的文档：http: [//api.jquerymobile.com/category/events/](http://api.jquerymobile.com/category/events/)

如果要在某些页面上触发事件，请使用以下语法：

```
$( document ).on( "pageinit", "#some-page", function() {
   ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:27:47.853

尝试这个

```
<body onLoad='expand();'> 
```

然后把必要的放在一个函数中

```
<script>
 function expand()
{
$(this).children().next().hide();
   $(this).children().next().slideDown(500);
}
</script> 
```

# ruby-on-rails - 将文本从控制器渲染到视图

> ID：16081507
> 
> 赞同：0
> 
> 时间：2013-04-18T11:19:12.073
> 
> 标签：ruby-on-rails, ruby

我有一个控制器，我想从中将文本呈现到 /views/test/index.html.erb：

```
class TestController < ApplicationController
  def index
    if testStuff() do
      <render text to view>
    end
  end

  private 
  testStuff()
    return true
  end
end 
```

最简单的方法是什么？感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:36:56.783

在执行控制器 rails 的方法 index 后，将尝试加载名称为 index.html.erb 的视图（或您使用的任何其他模板）。您可以在索引中声明一个成员，并且该成员将可用于视图，例如：

```
def index
  @text = "Hello world!"
end 
```

那么在你看来：

```
...
<span><%= @text %></span>
... 
```

如果您的 @text 变量具有您信任的 html，则在您的视图中使用 @text.html_safe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:39:02.947

尝试将文本分配给实例变量。喜欢：

```
class TestController < ApplicationController
  def index
    if testStuff() do
      @text = "Text what you want to render"
    end
  end 
```

**在视图中：**

```
<%= @text %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:39:12.373

你可以像这样渲染为json

```
def index
    if testStuff() do
     @category_lists = CategoryList.get_categories(current_user.id)

     respond_to do |format|
       format.html # index.html.erb
       format.json { render json: @category_lists }
     end
    end
  end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:51:04.460

虽然不好，但您可以将测试移至视图：

```
class TestController < ApplicationController
  helper_method :is_test?      

  def index
  end

  private 

  def is_test?
    return true
  end
end 
```

然后在视图中：

```
<% if is_test? %>
  <span>Some text here</span>
<% end %> 
```

# php - 如何使用默认命名空间和属性条件编写 xpath 查询

> ID：16081509
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:19:13.977
> 
> 标签：php, xml, xpath

我有这样的xml：

```
<?xml version="1.0"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">
      <Worksheet ss:Name="Name1">
        something
      </Worksheet>
      <Worksheet ss:Name="Name2">
        something else
      </Worksheet>
    </Workbook> 
```

查询的外观应该如何使我变成具有 ss:Name 属性 Name1 的 Worksheet 元素。由于默认命名空间，我必须像这样设置第一个条件：

```
//*[name()="Worksheet"] 
```

但我不知道如何添加属性条件...

-------更新-------因为我在这里找不到解决方案是所有xml文件（由excel生成的文件）：

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">
  <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">
    <Author>Don diego</Author>
    <LastAuthor>Don diego</LastAuthor>
    <Created>2013-04-18T07:20:33Z</Created>
    <LastSaved>2013-04-18T07:20:33Z</LastSaved>
    <Company>CEI</Company>
    <Version>14</Version>
  </DocumentProperties>
  <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office">
    <AllowPNG/>
  </OfficeDocumentSettings>
  <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">
    <WindowHeight>7740</WindowHeight>
    <WindowWidth>13395</WindowWidth>
    <WindowTopX>360</WindowTopX>
    <WindowTopY>30</WindowTopY>
    <ProtectStructure>False</ProtectStructure>
    <ProtectWindows>False</ProtectWindows>
  </ExcelWorkbook>
  <Styles>
    <Style ss:ID="Default" ss:Name="Normal">
      <Alignment ss:Vertical="Bottom"/>
      <Borders/>
      <Font ss:FontName="Calibri" x:CharSet="238" x:Family="Swiss" ss:Size="11" ss:Color="#000000"/>
      <Interior/>
      <NumberFormat/>
      <Protection/>
    </Style>
  </Styles>
  <Worksheet ss:Name="Sheet1">
    <Table ss:ExpandedColumnCount="1" ss:ExpandedRowCount="1" x:FullColumns="1" x:FullRows="1" ss:DefaultRowHeight="15"/>
    <WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
      <PageSetup>
        <Header x:Margin="0.3"/>
        <Footer x:Margin="0.3"/>
        <PageMargins x:Bottom="0.75" x:Left="0.7" x:Right="0.7" x:Top="0.75"/>
      </PageSetup>
      <Selected/>
      <Panes>
        <Pane>
          <Number>3</Number>
          <ActiveCol>1</ActiveCol>
        </Pane>
      </Panes>
      <ProtectObjects/>
      <ProtectScenarios/>
    </WorksheetOptions>
  </Worksheet>
  <Worksheet ss:Name="Sheet2">
    <Table ss:ExpandedColumnCount="1" ss:ExpandedRowCount="1" x:FullColumns="1" x:FullRows="1" ss:DefaultRowHeight="15"/>
    <WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
      <PageSetup>
        <Header x:Margin="0.3"/>
        <Footer x:Margin="0.3"/>
        <PageMargins x:Bottom="0.75" x:Left="0.7" x:Right="0.7" x:Top="0.75"/>
      </PageSetup>
      <Selected/>
      <Panes>
        <Pane>
          <Number>3</Number>
          <ActiveCol>1</ActiveCol>
        </Pane>
      </Panes>
      <ProtectObjects/>
      <ProtectScenarios/>
    </WorksheetOptions>
  </Worksheet>
  <Worksheet ss:Name="Sheet3">
    <Table ss:ExpandedColumnCount="1" ss:ExpandedRowCount="1" x:FullColumns="1" x:FullRows="1" ss:DefaultRowHeight="15"/>
    <WorksheetOptions xmlns="urn:schemas-microsoft-com:office:excel">
      <PageSetup>
        <Header x:Margin="0.3"/>
        <Footer x:Margin="0.3"/>
        <PageMargins x:Bottom="0.75" x:Left="0.7" x:Right="0.7" x:Top="0.75"/>
      </PageSetup>
      <Selected/>
      <Panes>
        <Pane>
          <Number>3</Number>
          <ActiveCol>1</ActiveCol>
        </Pane>
      </Panes>
      <ProtectObjects/>
      <ProtectScenarios/>
    </WorksheetOptions>
  </Worksheet>
</Workbook> 
```

我想使用 XPath 获取具有属性“Sheet1”的 Worksheet 元素。这就是我所拥有的：

```
$uri = $this->doc->getDocNamespaces()['']; //$this->doc is obiect of simplexmlelement class
$this->doc->registerXPathNamespace('default', $uri); //'urn:schemas-microsoft-com:office:spreadsheet'
$current_worksheet = $this->doc->xpath('/*/default:Worksheet[@ss:Name = "Sheet1"]');
die(var_dump($current_worksheet));//empty array :( 
```

现在 $current_worksheet 是一个空数组 :( 看起来默认命名空间与 ss 命名空间相同（相同的 urn）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:50:01.963

```
/*/ss:Worksheet[@ss:Name = "Name1"] 
```

* * *

你在这里有两个选择。首先，我从我认为更正确的一个开始。它利用了命名空间。要让它工作，您需要使用相应的 URI 注册命名空间前缀，这里有两个命名空间：

```
Prefix: default
URI   : urn:schemas-microsoft-com:office:spreadsheet

Prefix: ss
URI   : urn:schemas-microsoft-com:office:spreadsheet 
```

然后，您可以查询：

```
/*/default:Worksheet[@ss:Name = "Name1"] 
```

第二个变体执行完全相同的 xpath 查询，但忽略了所有非默认命名空间的命名空间。这适用于`local-name()`并且更复杂：

```
/*/*[local-name()="Worksheet"][@*[local-name()="Name" and . = "Name1"]] 
```

如您所见，第一个变体更可取，因为它更具可读性。此外，它更独特，因为它命名每个具体元素，而不仅仅是本地名称。

这是一个简短的示例，您可以如何注册一个 XML 命名空间前缀，以便它可以与 xpath 一起使用。这是必要的，因为默认命名空间是非空的：

```
$xml = simplexml_load_string($string);

$uri = $xml->getDocNamespaces()[''];
$xml->registerXPathNamespace('default', $uri);

$result = $xml->xpath('/*/default:Worksheet[@ss:Name = "Name1"]');

echo trim($result[0]), "\n"; # something 
```

[在线演示](http://eval.in/16746)- 值得记住：就像每个元素一样，每个属性也可以有自己的命名空间。属性命名空间不是自动的元素命名空间（只有文档默认命名空间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:02:20.463

好的，我找到了 hakre 的 xpath 对我不起作用的原因，我不知道为什么，但是这段代码

```
$xml = <<<XML
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">
</Workbook>
XML;
$el = new SimpleXmlElement($xml);
$child = $el->addChild('Worksheet');
$child->addAttribute('xmlns:ss:Name', 'Sheet1');
$result = $el->xpath("ss:Worksheet[@ss:Name='Sheet1']"); 
```

没用。我必须创建新的 SimpleXMLElement 才能使其工作，如下所示：

```
$xml = <<<XML
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">
</Workbook>
XML;
$el = new SimpleXmlElement($xml);
$child = $el->addChild('Worksheet');
$child->addAttribute('xmlns:ss:Name', 'Sheet1');
$el = new SimpleXMLElement($el->asXML()); //refreshing of SimpleXMLElement
$result = $el->xpath("ss:Worksheet[@ss:Name='Sheet1']"); //now it work like a charm 
```

感谢帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:30:48.840

更多类似的东西：

选择“ **Name** ”属性值为“ **Name1 ”的“** **Worksheet** ”元素。

 ****```
//Worksheet[@ss:Name='Name1'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:37:22.577

```
/x:Workbook/x:Worksheet[@ss:Name='Name1'] 
```

将调用应用程序中的命名空间前缀“x”和“ss”绑定到适当的命名空间 URI，使用您用于运行 XPath 的任何 API。****

# php - 从 javascript 发送到 php 到 mysql 的整数返回不同

> ID：16081511
> 
> 赞同：-2
> 
> 时间：2013-04-18T11:19:21.460
> 
> 标签：php, javascript, mysql, variables, integer

好吧，我现在完全糊涂了。

我有一个 javascript 应用程序，它将一组信息发送到 php 脚本，然后将其保存到 mysql 数据库。

该信息包含一个介于 8 到 20 个字符之间的唯一编号，该编号用作 mysql 唯一索引和所有这些，并且具有一个从分配给每个唯一编号的 1 递增的编号。

当我发送**1066998880**时，它通过检查该行是否存在，然后将其分数加 1 来完美运行。

但是当我发送**100005075040249它作为****2147483647**保存到 mysql 数据库并返回**Duplicate of 2147483647**。

不知道我做错了什么。但继承人我的代码：

**JAVASCRIPT**

```
$.ajax({ url: 'URL',
     data: { Unique_ID: Unique_ID, first: first, last: last, email: email},
     type: 'post',
     success: function(output) { 'functions'}; 
```

**PHP**

```
$Unique_ID = $_POST["Unique_ID"];
$first = $_POST["first"];
$last = $_POST["last"];
$email = $_POST["email"];
$count = 1;

// Connect to server and select database.
$connection = mysql_connect("$host", "$username", "$password") or die(mysql_error()); 

$sql = "SELECT * FROM `comfort_lavender`.`Players` WHERE Unique_ID = '$Unique_ID'";
$result = mysql_query($sql);

if(mysql_num_rows($result) > 0){
    //found
    mysql_query("UPDATE `comfort_lavender`.`Players` SET `count` = `count`+1 WHERE     Unique_ID= '$Unique_ID'");
    $score = mysql_query("SELECT count FROM `comfort_lavender`.`Players` WHERE `Unique_ID` = '$Unique_ID'");
    $got = mysql_fetch_array( $score ); 
    echo $got['count'];
}else{
    //not found
    mysql_query("INSERT INTO `comfort_lavender`.`Players` (`Unique_ID`, `first`, `last`, `email`, `count`) VALUES ('$Unique_ID', '$first', '$last', '$email', '1');") or die(mysql_error());
    echo 1;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:21:17.403

最简单的答案是您的列的数据类型是`SIGNED INT`，最大值是`2147483647`。

您插入的值大于范围，这就是该值被截断为其最大允许值的原因。这有两种可能的数据类型，

一个是`VARCHAR(18)`将您的数据类型更改为字符串。

另一个是`BIGINT`可以承受的：

对于 SIGNED BIGINT`-9223372036854775808 to 9223372036854775807`
对于 UNSIGNED BIGINT`0 to 18446744073709551615`

*   [整数类型（精确值） - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:21:37.627

2,147,483,647 是 INT（4 字节整数）可以存储在 MySQL 中的最大值。

将数据类型更改为 BIGINT（8 字节整数）（可以存储高达 9,223,372,036,854,775,807 的值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:21:26.720

根据数据库中使用的数据类型和服务器的 32/64 位版本，整数有特定的限制。

一种解决方法可能是在 PHP 中使用字符串，在 SQL 中使用 BIGINT。

[http://php.net/manual/de/language.types.integer.php](http://php.net/manual/de/language.types.integer.php)

# javascript - 如何将 Jhtmlarea 编辑器设置为空白或为空

> ID：16081512
> 
> 赞同：1
> 
> 时间：2013-04-18T11:19:21.637
> 
> 标签：javascript, jquery, jhtmlarea

我有一个`textarea`并且已经实现了`jHtmlArea`Editor jquery 插件。当点击重置按钮时。我需要将其设置为空或空白。

HTML如下

```
 <textarea cols="170" id="area4" rows="20"></textarea> 
```

我试过了，但是没有用。

```
 $('#area4').htmlarea('html', ''); 
```

请有任何其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:26:19.950

是的，我刚刚开始工作：

```
$('#textarea-content').htmlarea('html',' '); 
```

但这不起作用

```
$('#textarea-content').htmlarea('html',''); 
```

好的，这些似乎是最好的

```
$('#textarea-content').htmlarea('html','\n'); 
```

或者

```
$('#textarea-content').htmlarea('html','\b'); 
```

他们一开始就没有空间

在这个页面上[http://jquery-spellchecker.badsyntax.co/jhtmlarea.html](http://jquery-spellchecker.badsyntax.co/jhtmlarea.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:10:35.123

我只是在这段代码的帮助下完成的。只是使用了一个额外的空白；）对我来说很顺利

```
 $('#area4').htmlarea("html", "  "); 
```

# sql-server - Visual Studio 2012 和 SQL Server 2012

> ID：16081513
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:19:21.557
> 
> 标签：sql-server, visual-studio-2012

我对这两种产品有疑问。我安装了 Visual Studio 2012 并且想使用数据库，我应该安装 SQL Server 2012 吗？但是 SQL Server 2012 使用的是 VS 2010 的外壳。
所以我想知道，能不能用VS 2012的shell来实现SQL Server的功能？在这种情况下，我需要安装 SQL Server 2012 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:22:09.277

您可以使用任何您想要的数据库。这与 Visual Studio 本身完全不同。

人们一直在将 Visual Studio 2012 与 Oracle、MySql、SQL Server 2000/2005/2008/2012 等一起使用，没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:34:36.807

两种产品都不同，您可以在 .NET 应用程序中使用任何数据库。不需要为 .NET 应用程序安装 SQL Server。

# c++ - GCC 中的宏有效，但在 Solaris 编译器中失败？

> ID：16081514
> 
> 赞同：0
> 
> 时间：2013-04-18T11:19:22.303
> 
> 标签：c++, macros, compiler-errors, solaris, exiv2

来源：svn checkout svn://dev.exiv2.org/svn/trunk（最新版本：3020）

我的平台：Fedora 17 64 位

以下命令有效：

```
cmake -DCMAKE_CXX_FLAGS=-library=stlport4 -    
DCMAKE_CXX_COMPILER=/opt/oracle/solarisstudio12.3/bin/CC -        
DCMAKE_C_COMPILER=/opt/oracle/solarisstudio12.3/bin/cc . 
```

但是在那之后，当我做时，我得到了错误：

```
Scanning dependencies of target exiv2lib
[ 17%] Building CXX object src/CMakeFiles/exiv2lib.dir/asfvideo.cpp.o
cd /home/Wani/GSoC/exiv2-trunk/trunk/src && /opt/oracle/solarisstudio12.3/bin/CC   -    
DEXV_BUILDING_LIB -DEXV_HAVE_DLL -DEXV_LOCALEDIR=\"/usr/local/share/locale\" -
DEXV_HAVE_STDINT_H -library=stlport4 -KPIC -I/home/Wani/GSoC/exiv2-trunk/trunk -
I/home/Wani/GSoC/exiv2-trunk/trunk/xmpsdk/include    -o 
CMakeFiles/exiv2lib.dir/asfvideo.cpp.o -c /home/Wani/GSoC/exiv2-
trunk/trunk/src/asfvideo.cpp
"/home/Wani/GSoC/exiv2-trunk/trunk/src/error.cpp", line 29: Error: Multiple declaration 
for rcsId.
1 Error(s) detected. 
```

error.cpp 的内容：

```
28 #include "rcsid_int.hpp"
29 EXIV2_RCSID("@(#) $Id: error.cpp 2681 2012-03-22 15:19:35Z ahuggel $") 
```

rcsid_int.hpp 的内容：

```
#ifndef RCSID_INT_HPP_
#define RCSID_INT_HPP_

#if !defined (EXIV2_RCSID)
#if defined(__clang__)
#define EXIV2_RCSID(id)

#elif defined(OS_SOLARIS)
#define EXIV2_RCSID(id) \
{ \
inline const char* getRcsId(const char*) { return id ; } \
const char* rcsId = getRcsId(rcsId); \
}

#else
#define EXIV2_RCSID(id) \
namespace { \
inline const char* getRcsId(const char*) { return id ; } \
const char* rcsId = getRcsId(rcsId); \
}
#endif

#endif 
#endif 
```

如果我使用 GCC 编译相同的程序，它可以正常工作。

请参阅差异，因为 Rev 3019 在 GCC 和 Solaris 编译器中工作：[http ://dev.exiv2.org/projects/exiv2/repository/revisions/3020/diff?rev=3020&type=sbs](http://dev.exiv2.org/projects/exiv2/repository/revisions/3020/diff?rev=3020&type=sbs)

如何忽略 Solaris 编译器中的多个声明错误？

我计算了 r3018 和 r3019 中 .cpp 文件的预处理输出的差异：

```
 2a3,6
 > #30 "/home/Wani/exiv2-trunk/trunk/src/asfvideo.cpp"
 > namespace { inline const char * getRcsId ( const char * ) { return "@(#) $Id$" ; }           
 const char * rcsId = getRcsId ( rcsId 
 > #30
 > ) ; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:18:24.127

我在 exiv2.org 的 wiki 上发布了关于这个问题的评论，并提供了解决问题的补丁。

基本问题是 Solaris Studio 编译器*不允许*在 C++ 中使用多行宏。我提供的补丁忽略了这一点，因为它注释掉了整个 rcsId 声明。

据我所知，rcsid_int.hpp 中的正确声明如下：

```
#if defined(__clang__) || (defined(OS_SOLARIS) && defined(__SUNPRO_CC))
#define EXIV2_RCSID(id)
#else
#define EXIV2_RCSID(id) \
    namespace { \
        inline const char* getRcsId(const char*) { return id ; } \
        const char* rcsId = getRcsId(rcsId); \
    }
#endif 
```

这会导致预处理的源*不*包含 rcsId 字符串。

# ios - 如何在 iOS 生成的操作表上监听操作

> ID：16081515
> 
> 赞同：0
> 
> 时间：2013-04-18T11:19:28.150
> 
> 标签：ios, objective-c, uiactionsheet

在我的应用程序中`UITextView`包含一个电子邮件地址。当我触摸并按住电子邮件地址时，会弹出一个带有以下按钮的操作表：

*   “新消息”
*   “添加到联系人”
*   等等

如何对“新消息”按钮单击执行自定义操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:31:06.467

首先你`UIActionSheetDelegate`在你的 .h 文件中实现然后执行它..

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0)
    {
        // here you can perform new message action
    }
    else
    {
        // here you can perform add new contact action
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:23:37.500

您必须将您的 viewController 设置为 actionSheets 委托，然后实现

```
-actionSheet:clickedButtonAtIndex: 
```

然后执行您需要的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:37:11.213

您需要继承 UITextView 并覆盖该`-setText:`方法。在您的自定义实现中，您需要将[UIDataDetector](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)添加到您的子类中。

如果您不熟悉 NSDataDetector 及其实现，请查看[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/blob/master/TTTAttributedLabel/TTTAttributedLabel.m)的实现。它是 UILabel 的完整替代品，具有数据检测和非常完善的委托协议。

你可以采用它的大部分代码。

# java - 试图将两个 ArrayList 对象链接在一起

> ID：16081516
> 
> 赞同：1
> 
> 时间：2013-04-18T11:19:36.700
> 
> 标签：java, arraylist, nullpointerexception

我试过搜索，但还没有找到任何可以帮助我的东西。所以这里是：

我正在尝试通过客户 ID 将卡连接到客户，但我似乎无法使其正常工作（NullPointerExceptions）。对象将被放入 ArrayLists。

我很确定问题出在 LiftCard() 的 toString() 中。

```
import java.io.Serializable;

public class LiftCard implements Serializable {
private int cardNumber, cardType, cardPrice, cardPassing;
int cardBalance;
private User user;
LiftCard next;

public LiftCard(int cT, int cN) {
    cardNumber = cN;
    cardType = cT;
    next = null;

}// end of konstruktQr

public int getCardNumber() {
    return cardNumber;
}

public int getCardType() {
    return cardType;
}

public User getUser(){
    return user;
}

public void setUser(User u){
    user = u;
}

public String toString() {
    return getUser().getCustomerID() + "\t" + cardNumber + "\t" + cardType; 
//Pretty sure the problem is here!
} 
```

这是我想链接到卡类的用户类

```
import java.io.Serializable;

public class User implements Serializable {
private String surename, firstName, phone, adress, birth;
private int customerID;
public LiftCard liftCard;
User next;

public User( int cID, String fN, String sn, String p, String a, String b) {
    firstName = fN;
    surename = sn;
    phone = p;
    adress = a;
    birth = b;
    customerID = cID;
    liftCard = null;
    next = null;
}

public String getSurename() {
    return surename;
}

public String getFirstName() {
    return firstName;
}

public String getPhone() {
    return phone;
}

public String getAdress(){
    return adress;
}

public String getBirth() {
    return birth;
}

public int getCustomerID() {
    return customerID;
}

public LiftCard getLiftCard(){
    return liftCard;
}

public void setLiftCard(LiftCard liftC){
    liftCard = liftC;
}

public String toString() {
    return customerID + "\t" + surename + "\t" + firstName + "\t" + phone
            + "\t" + adress + "\t" + birth;

}

public boolean equals(User u) {
    return (u.getSurename().equals(surename) && u.getFirstName().equals(
            firstName));
}
} 
```

这是我试图将它们绑定在一起的地方：

```
public void regLiftCard() {
    int cardtype = Integer.parseInt(cardTypeField.getText());
    int cardnumber = Integer.parseInt(cardNumberField.getText());
    int customerID = Integer.parseInt(findCustomerField.getText());

    if (cardtype != 1 && cardtype != 2 && cardtype != 3) {
        JOptionPane.showMessageDialog(this, "Kortet må være 1,2 eller 3!");
        return;
    }
    try {
        String firstName = firstNameField.getText();
        String surename = surenameField.getText();
        String phone = phoneField.getText();
        String adress = adressField.getText();
        String birth = birthField.getText();

        User u = userA.findById(customerID);
        LiftCard l = new LiftCard(cardnumber, cardtype);
        if (u != null) {
            if (u.getLiftCard() != null) {
                JOptionPane.showMessageDialog(this,
                        "Brukeren har allerede kort!");
            } else
                cardA.regLiftCard(l);
            JOptionPane.showMessageDialog(this, "1Kort registrert!");
            return;
        } else
            u = new User(customerID++, firstName, surename, phone, adress,
                    birth);
        JOptionPane.showMessageDialog(this, "Bruker registrert!");
        cardTypeField.setText("");
    } catch (NumberFormatException e) {
        JOptionPane.showMessageDialog(this, "Feil i nummerformat!");
    }

} 
```

这是两个归档类中的第一个。首先是卡片。

```
import java.util.*;
import java.io.*;

import javax.swing.JOptionPane;

public class CardArchive implements Serializable {
ArrayList<LiftCard> clist = new ArrayList<LiftCard>();

// Setter inn nytt LiftCard-objekt bakerst i lista
public void regLiftCard(LiftCard c) {
    clist.add(c);
}

public String toString() {
    String cards = "";
    Iterator<LiftCard> iterator = clist.iterator();

    while (iterator.hasNext()) {
        cards += iterator.next().toString() + "\n";
    }
    return cards;
}

public LiftCard findByCardNumber(int id) {
    for (LiftCard c : clist) {
        if (c.getCardNumber() == id) {
            return c;
        }
    }
    return null; // or empty Card
}

} 
```

第二个是用户存档：

```
import java.util.*;
import java.io.*;
import javax.swing.JOptionPane;

public class UserArchive implements Serializable {
ArrayList<User> list = new ArrayList<User>();
private static int idCounter = 1000;

// Setter inn nytt User-objekt bakerst i lista
public void regCustomer(User u) {
    list.add(u);
}

// Sorterer User-objektene alfabetisk på surename og first name
public void sorter() {
    Collections.sort(list, new UserComp());
}

public User findById(int id) {
    for (User u : list) {
        if (u.getCustomerID() == id) {
            return u;
        }
    }
    return null; // or empty User
}

public String toString() {
    sorter();
    String users = "";
    Iterator<User> iterator = list.iterator();

    while (iterator.hasNext()) {
        users += iterator.next().toString() + "\n";
    }
    return users;
}

} 
```

正如您可能看到的，仅通过查看一些代码，我对 java 还是很陌生。但还是要努力。感谢您提前提供的所有帮助！

编辑：

使用了 maloney 和 bmorris591 答案的组合！我更改的代码如下：

```
User u = userA.findById(customerID);
        LiftCard l = new LiftCard(cardnumber, cardtype);
        if (u != null) {
            if (u.getLiftCard() != null) {
                JOptionPane.showMessageDialog(this,
                        "Brukeren har allerede kort!");
            } else
                l.setUser(u);
                cardA.regLiftCard(l); 
```

和：

```
public String toString() {
    if (getUser() != null){
        return getUser().getCustomerID() + "\t" + getUser().getSurename() + "\t" + cardNumber + "\t" + cardType; 
    } else {
       return null;
    }
} 
```

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:25:47.630

`user`您没有在 LiftCard 类中初始化对象。您可以在构造函数中执行此操作，或者在调用`setUser(user)`之前调用该方法`getUser()`，它应该可以解决您的问题。

您还可以围绕该部分代码进行空检查：

```
public String toString() {
    if (getUser() != null){
        return getUser().getCustomerID() + "\t" + cardNumber + "\t" + cardType; 
    } else {
       return null;
    }
} 
```

这将停止抛出异常，但如果您希望代码正常工作，您仍然需要初始化您的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:26:19.303

从您的代码看来，您正在使用其方法中的`user`字段：`LiftCard``toString`

```
public String toString() {
    return getUser().getCustomerID() //etc 
```

但是当你创建`LiftCard`我没有看到你`user`在注册之前设置任何地方：

```
LiftCard l = new LiftCard(cardnumber, cardtype);
        if (u != null) {
            if (u.getLiftCard() != null) {
                JOptionPane.showMessageDialog(this,
                        "Brukeren har allerede kort!");
            } else
                cardA.regLiftCard(l); //etc 
```

您需要在某个时候调用，`l.setUser(u)`否则is`user`中的字段。`LiftCard``null`

```
LiftCard l = new LiftCard(cardnumber, cardtype);
        if (u != null) {
            if (u.getLiftCard() != null) {
                JOptionPane.showMessageDialog(this,
                        "Brukeren har allerede kort!");
            } else
                l.setUser(u); // <-- here we set the `User` on the `LiftCard`.
                cardA.regLiftCard(l); //etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:22:37.977

尝试：

```
public String toString() {
    return (getUser() == null ? null : getUser().getCustomerID()) + "\t" + cardNumber + "\t" + cardType; 
} 
```

# c# - 尝试将元素添加到列表时获取“对象引用未设置为实例”

> ID：16081521
> 
> 赞同：1
> 
> 时间：2013-04-18T11:19:48.327
> 
> 标签：c#, asp.net-mvc

我创建了这个模型；

```
namespace gantt.Models
{
    public class ganttModels
    {
        public IList<ganttModel> allGantt { get; set; }

    }

    public class ganttModel
    {
        public string projectName { get; set; }
        public IEnumerable<ResourcesSet> rescource { get; set; }
    }
} 
```

现在我的计划是向这个模型添加项目，我已经在这样的存储库中完成了这个；

```
namespace gantt.Models
{
    public class GantDataRepository
    {
        GantEntities dbContext = new GantEntities();
        ganttModels returnModels = new ganttModels();
        ganttModel tempganttModel = new ganttModel();

        public GantDataRepository()
        {
            foreach (var item in dbContext.WorkPlans)
            {
                tempganttModel.projectName = item.Product;
                tempganttModel.rescource = item.ResourcesSets;
                returnModels.allGantt.Add(tempganttModel);   // Here i get the error     
            }   
        }

        public ganttModels getGant()
        {
            return returnModels;
        }    
    }
} 
```

存储库找到数据并添加它。如我所见，我已经实例化了 returnModels

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T11:21:56.757

`returnModels`被初始化。

`returnModels.allGantt`不是。

你可以这样做：

```
public class ganttModels
{
    public IList<ganttModel> allGantt { get; set; }
    public ganttModels()
    {
        allGantt = new List<ganttModel>();
    }
} 
```

或者其他的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:23:42.260

您没有在 ganttModels 类中实例化您的列表。

```
public class ganttModels
{
    public ganttModels(){
      allGantt = new List<ganttModel>();      
    }

    public IList<ganttModel> allGantt { get; set; }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:23:57.517

当您尝试添加时，returnModels.allGantt 为 null。

在 gantModels 的构造函数中创建 List 的实例或

在添加调用之前

```
returnModels.allGantt = new List<gantModel>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:25:10.490

您可以定义一个构造函数，因为[Conrad 在 answer 中有它](https://stackoverflow.com/a/16081577/961113)，或者您可以摆脱自动实现的属性并执行以下操作：

```
private IList<ganttModel> _allGantt = new List<ganttModel>();

public IList<ganttModel> AllGantt
{
    get { return _allGantt; }
    set { _allGantt = value; }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T11:27:09.357

您需要`ganttModels`按如下方式定义您的类：

```
public class GanttModels // use correct casing!
{
    public GanttModels() { this.AllGantt = new List<GanttMode>(); }
    public IList<GanttModel> AllGantt { get; private set; }
} 
```

您还在存储库中重复使用相同的引用，因此您应该这样做：

```
public class GantDataRepository
{
    GantEntities dbContext = new GantEntities();
    GanttModels returnModels = new GanttModels();

    public GantDataRepository()
    {
        foreach (var item in dbContext.WorkPlans)
        {
            returnModels.AllGantt.Add(new GanttModel 
            {
                ProjectName = item.Product,
                Rescource = item.ResourcesSets
            });
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T11:31:51.960

你需要初始化所有甘特图......

```
 private IList<ganttModel> _allGantt;
    public IList<ganttModel> allGantt { 
          get{ return _allGantt ?? (_allGantt = new new List<ganttModel>()); } 
          set{ _allGantt = value;} 
     } 
```

# php - 在 Zend Framework 2 应用程序中 composer.phar 自我更新的 Composer\Downloader\TransportException

> ID：16081526
> 
> 赞同：4
> 
> 时间：2013-04-18T11:20:04.060
> 
> 标签：php, zend-framework2, composer-php

我正在尝试更新项目中的 Zend Framework 2 库并遇到异常：

```
use@machine:/path/to/project# php composer.phar self-update
[Composer\Downloader\TransportException]                                                       
The "https://getcomposer.org/version" file could not be downloaded (HTTP/1.1 502 Bad Gateway) 
```

也试过了[，](http://docs.behat.org/quick_intro.html)但错误仍然存​​在：

```
use@machine:/path/to/project# curl http://getcomposer.org/installer | php
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   166  100   166    0     0   1490      0 --:--:-- --:--:-- --:--:--  4611
<html>
<head><title>502 Bad Gateway</title></head>
<body bgcolor="white">
<center><h1>502 Bad Gateway</h1></center>
<hr><center>nginx</center>
</body>
</html> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T03:59:19.660

托管库作曲家的服务器之一试图为您正在安装的应用程序下载没有提供所需的文件，作曲家因错误消息而死。稍等片刻，然后再次尝试 create-project 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:31:49.033

作曲家服务器当前已关闭

# json - Play Framework Json Object 映射部分对象

> ID：16081534
> 
> 赞同：1
> 
> 时间：2013-04-18T11:20:30.470
> 
> 标签：json, scala, playframework, playframework-2.0

另一个 Play Framework 2.1 问题，因为文档太技术化，我无法理解。

如果我有一个代表某些东西的 scala 案例类对象，比如说一个服务器：

```
case class Server(name: String, ip: String, operatingsystem: enums.OperatingSystem)

implicit val serverreads = ((__ \ "name").read[String] and (__ \ "ip").read[String] and (__ \ "os").read[enums.OperatingSystem])(Server.apply _)

implicit val serverwrite = ((__ \ "name").write[String] and (__ \ "ip").write[String] and (__ \ "os").write[enums.OperatingSystem])(unlift(Server.unapply)) 
```

我为它创建了我的 Json 读取和写入，我可以处理整个对象，这很好。

但是可以映射部分对象吗？

例如，如果我有一个不活动的服务器，它可能没有 IP，现在我知道我可以将其更改为 Option[String] 并映射 None，所以这不是一个完美的例子，但如果我想要为了在不更改底层案例类的情况下简化我的 Json 模型，我可以将一些值映射到我的类字段，同时将其他值保留为默认值吗？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:57:23.480

您可以简单地创建一个自定义应用方法，即`simplaApply`. 您也可以创建一个`SimpleServer`与您的 json 结构匹配的对象。使用案例类时，您可以使用默认数据定义一个实例，并在用新数据覆盖时复制该实例，即`i.copy(prop1=42)`.

# iphone - iphone5 和 iphone4 的 UIView

> ID：16081543
> 
> 赞同：0
> 
> 时间：2013-04-18T11:20:50.917
> 
> 标签：iphone, objective-c, uiview

我创建了一个`UIView`，有两个`xibs`支持 iphone5 和 iphone4。视图宽度为 (iphone5 - 470) 和 (iphone5 - 400)。我已通过检查 iphone5 或 iphone4 的条件来初始化此视图。但是在运行应用程序时，它似乎占用了iphone5。

```
CategoryView *puzzleView = [[CategoryView alloc] initWithFrame:CGRectMake(0, startY, levelScrollView.frame.size.width, 190)];
BOOL isiPhone = IS_IPHONE5([[UIScreen mainScreen] bounds].size.height);
if (isiPhone)
{
    puzzleView = [[[NSBundle mainBundle] loadNibNamed: @"CategoryView5"  owner:self options:nil] objectAtIndex:0];
}
else 
{
    puzzleView = [[[NSBundle mainBundle] loadNibNamed: @"CategoryView-iphone"  owner:self options:nil] objectAtIndex:0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:25:27.383

问题出在这一行：

```
BOOL isiPhone = IS_IPHONE5([[UIScreen mainScreen] bounds].size.height); 
```

不，您只是在检查是否`size.height`不是`0`

更改为：

```
BOOL isiPhone = IS_IPHONE5([[UIScreen mainScreen] bounds].size.height > 480.f); 
```

回合一个不应该这样做。只制作一个视图并让它随着屏幕大小而增长是一个更好的选择。以防 Apple 决定添加其他屏幕尺寸，您无需更改代码中的任何内容。

# html - Google Webfonts 和抗锯齿

> ID：16081545
> 
> 赞同：7
> 
> 时间：2013-04-18T11:20:56.487
> 
> 标签：html, css, fonts, webfonts

我喜欢在我的商业作品中使用 Google Webfonts，但它们呈现的锯齿状有点过于粗糙，虽然在 Google 提供的预览中，它们呈现得非常流畅。

看看这个： [http ://www.google.com/fonts/specimen/Oxygen](http://www.google.com/fonts/specimen/Oxygen)

最大的预览看起来非常漂亮和流畅，但是当我将它导入我的页面并使用它时，它的边缘似乎扭曲了，非常锯齿状。谷歌是否使用额外的库来实现这种抗锯齿，还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-26T13:30:11.947

如果您从系统（windows/fonts 文件夹）卸载字体，您应该能够看到它流畅。为了克服这一点。不要使用来自谷歌的@import 或直接链接。而是从 www.fontsquirrel.com 下载软件包（整个网络字体工具包）并在你的 css 中使用 @font-face 来获得平滑的字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-30T20:24:09.637

我不知道完整的技术细节，但 Chrome 可能会以不同于其他浏览器的方式呈现字体。

您可以尝试`font-smoothing`在 CSS 文件中指定规则。

```
p {
    -webkit-font-smoothing: antialiased;
} 
```

这条规则经常被使用。有时，人们将它应用于每个选择器（带有 `*`）：

```
* {
    -webkit-font-smoothing: antialiased;
} 
```

此属性的三个可能值是：

```
-webkit-font-smoothing: none;
-webkit-font-smoothing: subpixel-antialiased;
-webkit-font-smoothing: antialiased; 
```

不幸的是，我现在无法重现平滑问题（我不知道为什么，我的计算机没有改变平滑，一切都完全可读，也许是最近的 Chrome 修复，但我找不到任何相关信息）。

进一步阅读：

*   关于 ClearType 和 Chrome：在[Google 论坛上](https://code.google.com/p/chromium/issues/detail?id=442116)
*   [`-webkit-font-smoothing`Codepen](http://codepen.io/tamshow/pen/DFjrf?editors=110)上的演示。

希望我能帮上忙。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T19:17:36.763

字体根据以下内容呈现不同：

*   屏幕/显示器分辨率
*   浏览器
*   操作系统
*   使用大小和提示

基于您的字体在 Chrome 和 Firefox 中看起来更糟的事实，您唯一可以做的就是尝试让这些浏览器更好地呈现它们。在没有看到您的代码的情况下，我唯一可以推荐的是：

*   确保您使用的是体面的重置 css（如下所示： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)）。

*   尝试添加`font-weight: normal;`字体，看看这是否会有所不同；有时浏览器和框架会尝试为事物添加假粗体。

*   确保您使用的是字体的实际版本，而不仅仅是应用 CSS 样式。

*   如果所有其他方法都失败了，那么尝试将字体大小向上/向下小幅度增加，看看字体是否能更好地提示这些大小。

希望这可以帮助！

# java - CardLayout .show() 方法不起作用

> ID：16081552
> 
> 赞同：0
> 
> 时间：2013-04-18T11:21:02.627
> 
> 标签：java, swing, jpanel, cardlayout

嗨，我对 Java 还不够陌生，我正在尝试学习在窗口构建器中使用卡片功能，但我在使用 show 方法时遇到了问题。当我单击按钮时，它不会更改为所需的卡。我一直在松散地遵循[本教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

这是我的代码：

```
 public class HomeScreen {

    private final String WEIGHTS = "Weights panel";
    private final String EXCERCISE = "Excercise panel";
    private final String CARDIO = "Cardio panel";       

    private JPanel cards;
    //private CardLayout cardLayout = new CardLayout();
    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                //Schedule a job for the event dispatch thread:
                //creating and showing this application's GUI.
                javax.swing.SwingUtilities.invokeLater(new Runnable() 
                {
                    public void run() {
                        createAndShowGUI();
                    }
                 });
            }
        });

    }

    public void addComponentToPane(Container pane) {
        final JPanel background = new JPanel();
        background.setBackground(Color.DARK_GRAY);
        background.setLayout(new CardLayout(0, 0));
        JButton btnHome = new JButton();
        btnHome.setForeground(Color.LIGHT_GRAY);
        btnHome.setFont(new Font("Tekton Pro Cond", Font.PLAIN, 22));
        btnHome.setBackground(Color.DARK_GRAY);
        btnHome.setText("Home");
        background.add(btnHome, "name_107366949842088");

        JPanel cardio = new JPanel();
        JPanel exercise = new JPanel();
        JPanel weights = new JPanel();

        JButton btnWeights_1 = new JButton("Weights");
        btnWeights_1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                System.out.println("Button Pressed");
                CardLayout cL = (CardLayout) (cards.getLayout()) ;
                //cL.next(cards);
                cL.show(cards, WEIGHTS);
            }
        });         

        JButton btnCardio = new JButton("Cardio");

        /*
         * Add new cards 
         */
        cards = new JPanel(new CardLayout());
        cards.add(exercise, EXCERCISE);
        exercise.setLayout(new BoxLayout(exercise, BoxLayout.X_AXIS));
        exercise.add(btnWeights_1);
        exercise.add(btnCardio);
        cards.add(cardio,CARDIO);
        cards.add(weights,"Weights panel");

        JButton btnLegs = new JButton("Running");
        cardio.add(btnLegs);

        JButton btnSwimming = new JButton("Swimming");
        cardio.add(btnSwimming);

        JButton btnCycling = new JButton("Cycling");
        cardio.add(btnCycling);

        JButton btnBoxing = new JButton("Boxing");
        cardio.add(btnBoxing);
        cards.add(weights);

        JButton btnBiceps = new JButton("Biceps");
        weights.add(btnBiceps);

        JButton btnLegs_1 = new JButton("Legs");
        weights.add(btnLegs_1);

        JButton btnBack = new JButton("Back");
        weights.add(btnBack);

        JButton btnChest = new JButton("Chest");
        weights.add(btnChest);

        pane.add(background, BorderLayout.PAGE_START);
        pane.add(cards,BorderLayout.PAGE_END);
    }

    public void itemStateChanged(ItemEvent evt) {
        CardLayout cl = (CardLayout)(cards.getLayout());
        cl.show(cards, (String)evt.getItem());
    }    

    /**
        * Create the GUI and show it.  For thread safety,
        * this method should be invoked from the
        * event dispatch thread.
        */
       private static void createAndShowGUI() {
           //Create and set up the window.
           JFrame frame = new JFrame("CardLayoutDemo");
           frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

           //Create and set up the content pane.
           HomeScreen demo = new HomeScreen();
           demo.addComponentToPane(frame.getContentPane());

           //Display the window.
           frame.pack();
           frame.setVisible(true);
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:54:00.520

有一个额外的*add*调用*不*包含`Cardlayout`约束。因为 Swing 中的组件只能有一个父级，所以这一行取代了之前指定约束的调用。

```
cards.add(weights); 
```

应删除此声明。

# oracle - 如何从 oracle 存储过程中返回表和附加局部变量？

> ID：16081557
> 
> 赞同：0
> 
> 时间：2013-04-18T11:21:17.877
> 
> 标签：oracle, plsql

在我的存储过程中，我需要为工作台生成报告。我需要直接从数据库表中获取记录（通过使用选择查询），另外我需要添加一些操作变量。我必须从程序返回这个结果集合作为`sys_refcursor`.

例如：我有表为`emp(id, name)`. 我有变量`job` 现在我想从我的过程中返回 ( `emp.id`, `emp.name`, )。`job`

如果您能提供帮助，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:10:24.693

将 PL/SQL 变量与表中的数据组合起来很容易......

```
Create or replace function get_some
   return sys_refcursor
as
    return_value sys_refcursor;
    l_whatever varchar2(10) := 'JOB';
begin
    open return_value for
        select emp_id, emp_name, l_whatever
        from your_table;
    return return_value;
end;
/ 
```

我怀疑这不是你的意思。如果是这种情况，你需要*编辑你的问题*来解释更多关于你在做什么。尤其是“一些被操纵的变量*（原文如此）* ”的意思。提供一些样本输入和输出会很有帮助。

# java - 双核上的JAVACL

> ID：16081560
> 
> 赞同：0
> 
> 时间：2013-04-18T11:21:26.207
> 
> 标签：java, opencl

我在双核系统上使用 Java Cl。我发现 2 个平台，一个是“AMD”，一个是 Intel，每个平台都有一个设备。

```
should it not return one platform and two devices ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:00:52.960

不，该设备是您的 CPU，即使您有多个插槽，它也会显示为一个设备。

您编写代码以在尽可能多的可用内核上运行（无需知道有多少）

一些 GPUS 有数千个内核，将它们作为一个设备一起使用要容易得多。

例如，[Tesla K10](http://www.nvidia.com/object/tesla-servers.html)有 3072 个内核，您不仅不想告诉每个内核该做什么，而且您也不能轻易做到。GPU 是为每个核心做同样的事情而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:35:22.323

AMD 和 Intel 都为其部分 CPU 和 GPU 提供 OpenCL 实现。对于 AMD，他们的 OpenCL 实现也支持 Intel CPU。因此，在安装 AMD Accelerated Parallel Processing (APP) SDK 之后，您的程序至少会识别一个带有一个设备的 AMD 平台，即您计算机中的 CPU。安装英特尔 OpenCL SDK 后，您将在计算机上运行第二个 OpenCL 实现，以检测您的 CPU。因此，查询可用平台将返回两个平台，每个平台都有一个设备。这两种设备是同一个东西——你的计算机的 CPU。不同之处在于 OpenCL 实现用于访问该 CPU 的方式——即 Intel 版本或 AMD 版本。

关于内核数量，OpenCL 将 CPU 视为单个设备，但它允许您查询设备（即 CPU）上存在多少计算单元（即物理内核）。

# java - 带有 RMTP 的 JWPlayer 和带有 Amazon CloudFront 的 HTML5

> ID：16081564
> 
> 赞同：1
> 
> 时间：2013-04-18T11:21:34.680
> 
> 标签：java, html, jsp, amazon-web-services, jwplayer

我正在尝试使用 Amazon CloudFront 通过 jwplayer 流式传输/下载视频。

首先，我的s3存储桶是：miemiebucket.s3.amazonaws.com，我放了2个视频，分别是MOV和MP4。

然后我去了 cloudfront 并创建了两个发行版，流式传输和下载，它们是：

s2y3u5i4t1fkbz.cloudfront.net（流媒体）dkgitv33rxgy.cloudfront.net（下载）

我回到我的 jsp 文件并使用 JWplayer 尝试了 3 种不同的设置

1.  文档中的那个：

    ```
    out.println("<div id=\"myElement\">Loading the player...</div>");
    out.println("<script type=\"text/javascript\">");
    out.println("jwplayer(\"myElement\").setup({");
    out.println("file: \"http://content.bitsontherun.com/videos/3XnJSIm4-kNspJqnJ.mp4\",");
    out.println("});");
    out.println("</script>"); 
    ```

完全按预期工作

2.  我发现这是一个 html 播放器。因此我切换了文件：

    ```
    out.println("file: dkgitv33rxgy.cloudfront.net\someVideo.MOV","); 
    ```

    但是它不能播放

3.  然后我尝试了 RMTP：

    ```
    out.println("'file': 'rtmp://s2y3u5i4t1fkbz.cloudfront.net/someVideo.MOV',"); 
    ```

2和3都有这个错误：

```
 Error loading player: No playable sources found 
```

2 和 3 不起作用，但 1 起作用，所以我猜有一个设置未正确配置 Amazon CloudFront？我没有使用受限访问权限，因此我不需要对 URL 进行签名。当我输入：

```
 http://dkgitv33rxgy.cloudfront.net\someVideo.MOV 
```

当我最初将 someVideo.MOV 设置为 public 时，我可以下载该文件。

我还将存储桶设置为公共存储桶，以确保通过浏览器连接它没有问题。

对 jwplayer 和 CloudFront 很困惑，以前有人遇到过这个问题吗？

编辑：解决方案：[JWPlayer 6 的 Primary and Fallback (RMTP and HTML5)](https://stackoverflow.com/questions/16096180/primary-and-fallback-rmtp-and-html5-for-jwplayer-6)

# php - 在 html 输入标签中传递参数

> ID：16081566
> 
> 赞同：0
> 
> 时间：2013-04-18T11:21:38.723
> 
> 标签：php, html

我正在尝试通过输入标签的 value 属性传递 2 个参数。

下面是我的代码，我只设法通过了 skuCode：

```
 <input type=hidden value=".$row["skuCode"]."&".$row["category"]." name=skuCode>
 <input type=submit value=Edit> 
```

是否可以传递2个参数？我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:27:45.067

```
 <input type=hidden value=".$row["skuCode"]." name=skuCode>
   <input type=hidden value=".$row["category"]." name=category> 
```

除非有很好的理由不这样做，否则这就是这样做的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T11:25:45.437

```
<input type=hidden value="<?php echo $row['skuCode'].'&'.$row['category'];?>" name=skuCode>
<input type=submit value=Edit> 
```

它将值作为“value1&value2”传递，您使用字符串操作可以分解为 2 个值并根据您的要求使用。

希望我的回答有帮助！;)

# sql - 当我只传递一个参数@did int 时，如何为此表进行动态透视？

> ID：16081567
> 
> 赞同：1
> 
> 时间：2013-04-18T11:21:39.350
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我有两张桌子，`@DETAILS`和`@CONTACTDETAILS`。在这两个表中，`@DETAILS`是一个静态表，其中`contactid`主键，外键`@CONTACTDETAILS`

以下是包含数据的表格：

```
DECLARE  @DETAILS TABLE (CONTACTID  INT IDENTITY(1,1), VALUE VARCHAR(200))

INSERT INTO @DETAILS
    SELECT  'PHONENUMBER' UNION ALL
    SELECT  'MOBILENUMBER' UNION ALL
    SELECT  'ADDRESS1' UNION ALL
    SELECT  'ADDRESS2'  UNION ALL
    SELECT  'EMPLOYEENAME'  UNION ALL
    SELECT  'EMPLOYEEID'

DECLARE  @CONTACTDETAILS TABLE (DETAILID INT IDENTITY(1,1), 
                                DID INT,
                                CONTACTID INT, 
                                DETAILSVALUE VARCHAR(200)
                               )

INSERT INTO @CONTACTDETAILS
    SELECT  1,5,'SIVA' UNION ALL
    SELECT  1,6,'SIA001' UNION ALL
    SELECT  1,2,'9344139991' UNION ALL
    SELECT  2,1,'245678' UNION ALL
    SELECT  2,2,'1686597' UNION ALL
    SELECT  2,5,'GANESH' UNION ALL
    SELECT  1,3,'ST-ROAD'

SELECT * FROM @DETAILS 
```

输出是：

```
CONTACTID VALUE
----------------------
1         PHONENUMBER
2         MOBILENUMBER
3         ADDRESS1
4         ADDRESS2
5         EMPLOYEENAME
6         EMPLOYEEID

SELECT * FROM @CONTACTDETAILS 
```

第二个查询的输出是：

```
DETAILID DID CONTACTID DETAILSVALUE
-----------------------------------
1        1   6         SIVA
2        1   5         SIA001
3        1   2         9344139991
4        2   1         245678
5        2   2         1686597
6        2   5         GANESH
7        1   3         ST-ROAD 
```

在`@CONTACTDETAILS`列中，我有一个列的值，`DID`用于在我正在使用的存储过程中显示一个特定的员工详细信息

参数`@DID int`- 我刚试过这个查询

```
declare @DID int=1
  SELECT 
     (SELECT VALUE FROM @DETAILS WHERE CONTACTID=A.CONTACTID)AS CONTACTID,
     A.DETAILSVALUE
  FROM 
     @CONTACTDETAILS A
     WHERE
       A.DID=@DID 
```

这将显示这样的结果

```
CONTACTID   DETAILSVALUE
EMPLOYEEID  SIVA
EMPLOYEENAME    SIA001
MOBILENUMBER    9344139991
ADDRESS1    ST-ROAD 
```

现在我正在尝试这样的输出

```
EMPLOYEEID  EMPLOYEENAME  MOBILENUMBER   ADDRESS1
SIA001      SIVA          9344139991       ST-ROAD 
```

任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:33:47.507

如果您提前知道该值，则基本设置将是：

```
select *
from
(
  select c.did,
    d.value,
    c.detailsvalue
  from DETAILS d
  inner join CONTACTDETAILS c
    on d.CONTACTID = c.CONTACTID
) src
pivot
(
  max(detailsvalue)
  for value in (EMPLOYEEID, EMPLOYEENAME, ADDRESS1,
                MOBILENUMBER, PHONENUMBER)
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/dc5f4f/5)

以上为您提供了所有值，但如果您想实现动态 SQL 以根据 过滤结果`@did`，那么您将使用：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @did int

set @did = 1

select @cols = STUFF((SELECT ',' + QUOTENAME(d.value) 
                    from DETAILS d
                    inner join CONTACTDETAILS c
                      on d.CONTACTID = c.CONTACTID
                    where c.did = @did
                    group by d.value, c.DETAILID
                    order by c.DETAILID
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' 
             from 
             (
                select 
                  d.value,
                  c.detailsvalue
                from DETAILS d
                inner join CONTACTDETAILS c
                  on d.CONTACTID = c.CONTACTID
                where c.did = '+cast(@did as varchar(10))+'
            ) x
            pivot 
            (
                max(detailsvalue)
                for value in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/dc5f4f/5)

# android - 将基于 android gradle 的项目导入到 intellij idea 后突出显示 android 语法

> ID：16081569
> 
> 赞同：1
> 
> 时间：2013-04-18T11:21:40.347
> 
> 标签：android, intellij-idea, gradle

我决定将 Android 项目的构建系统切换到 Gradle 1.4。我使用 Intellij Idea IDE。基于biuld.gradle文件导入现有项目[tictactoe](http://tools.android.com/tech-docs/new-build-system/gradle-samples-0.3.zip?attredirects=0&d=1)后，我可以构建它，但Intellij Idea没有突出任何Android语法，例如：Activity。

如果有人告诉我如何解决它，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:02:55.040

这个问题的解决方案是干净的 inteliij idea cache - File > Invalidate caches...

# javascript - 在 java webapplcaition 中缓存 javascript 文件

> ID：16081572
> 
> 赞同：0
> 
> 时间：2013-04-18T11:21:45.067
> 
> 标签：javascript

我在jsp中使用下面的缓存控制线

```
response.setHeader("Pragma", "No-cache");
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");
response.setDateHeader("Expires", 0); 
```

但我的 javascript 文件仍然被缓存到磁盘上。这是否会阻止仅缓存 JSP 或 JS 文件？有没有其他方法可以避免将 javascript 文件缓存到磁盘？请帮我解决这个问题谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:26:58.327

它只会为您的 JSP 页面禁用缓存，因为 javascript/images 是通过单独的 HTTP 请求加载的（不会有您设置的那些标头）。您需要查看您的网络服务器的配置。另一种选择是`?version=X`在您的 javascripts 的 URL 中添加一个（如果您想阻止所有缓存或源代码控制修订号，如果您只想让用户获取最新的生产文件，则 X 是时间戳）。

# tomcat - tomcat 中 JNDI 条目的“查找名称”

> ID：16081578
> 
> 赞同：0
> 
> 时间：2013-04-18T11:21:57.187
> 
> 标签：tomcat, tomcat7, jndi

我有几个应用程序使用在其 web.xml 中配置的 JNDI 属性：

```
<env-entry>
    <env-entry-name>application1/username</env-entry-name>
    <env-entry-type>java.lang.String</env-entry-type>
    <env-entry-value>admin3</env-entry-value>
    <lookup-name>username</lookup-name>
</env-entry> 
```

我无法通过查找名称获取条目，以下代码返回 null：

```
String jndiValue = jndiValue = ((Context) new InitialContext().lookup("java:comp/env")).lookup("username").toString(); 
```

好像Tomcat不支持这个属性，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:49:47.620

> 应用程序1/用户名

所以部分名称是`application1/username`.

> String jndiValue = jndiValue = ((Context) new InitialContext().lookup("java:comp/env")).lookup("username").toString();

因此，您正在查找部分名称`username`。

你也可以简化它。您不需要嵌套的`Context`，或两个`Context`泄漏，或`toString()`部分：

```
Context initialContext = new InitialContext();
String jndiValue = jndiValue = initialContext.lookup("java:comp/env/application1/username");
initialContext.close(); 
```

# oracle - FOR UPDATE OF 和 FOR UPDATE 的区别

> ID：16081582
> 
> 赞同：11
> 
> 时间：2013-04-18T11:22:22.003
> 
> 标签：oracle, locking, sql-update

当我使用`FOR UPDATE OF SAL`或简单地编写`FOR UPDATE`.

根据[奥莱利](http://docstore.mik.ua/orelly/oracle/prog2/ch06_11.htm)

> FOR UPDATE 子句的 OF 列表不限制您仅更改列出的那些列。锁仍然放置在所有行上；OF 列表只是为您提供了一种更清楚地记录您打算更改的内容的方法。如果您只是在查询中声明 FOR UPDATE 并且在 OF 关键字之后不包含一或多个列，那么数据库将锁定 FROM 子句中列出的所有表中所有已识别的行。

这意味着，当我用 指定列名时`FOR UPDATE OF SAL`，其他用户只能用`SAL`列进行更改。但是，实际上，情况并非如此。我仍然在其他会话中被锁定。谁能解释一下区别。

**更新**

```
 ----- SESSION 1

declare
 emp_info emp.ename%type;
 cursor emp_cur is select ename from emp join dept using(deptno) where deptno=&no for update of sal;
 begin
 open emp_cur;
 loop
 fetch emp_cur into emp_info;
 exit when emp_cur%notfound;
 dbms_output.put_line(emp_info);
 end loop;
 close emp_cur;
 end;

  ----- SESSION 2

  update emp set comm=5 where deptno=10;
  ---- hanged/waiting in session 2 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T11:30:35.540

从[Oracle 文档](http://docs.oracle.com/cd/E11882_01/server.112/e41084/statements_10002.htm#SQLRF55372)：

> 使用`OF ...`column 子句仅锁定连接中特定表或视图的选择行。`OF`子句中的列仅指示哪些表或视图行被锁定。您指定的特定列不重要。但是，您必须指定实际的列名，而不是列别名。如果省略此子句，则数据库将锁定查询中所有表中的选定行。

`FOR UPDATE`如果您的查询引用单个表，则和之间没有区别`FOR UPDATE OF ...`，但后者可能仍可用作自文档以指示您打算更新哪些列。它不限制您可以更新的内容。如果你有：

```
CURSOR cur IS SELECT * FROM emp FOR UPDATE OF sal; 
```

那么你仍然可以这样做：

```
UPDATE emp SET comm = comm * 1.1 WHERE CURRENT OF cur; 
```

但是，如果有多个表，则只会锁定包含您在子句`FOR UPDATE OF ...`中指定的列的表中的行。`OF`

与我认为您在问题中所说的相反。指定`FOR UPDATE OF sal`不仅锁定`sal`列；您永远不能锁定单个列，最小锁定在行级别。（[阅读更多关于锁的信息](https://docs.oracle.com/cd/E11882_01/server.112/e40540/consist.htm#i5704)）。它锁定表中包含`SAL`由查询选择的列的所有行。

* * *

在对您的问题的更新中，您的游标查询正在加入`emp`和`dept`，但该`OF`子句只有`sal`, 表中的一列`emp`。打开游标时，表中的行将被锁定，并且在您或该会话`emp`之前不会释放这些锁定。在光标循环中，您可以执行以下操作：`commit``rollback`

```
UPDATE emp SET ... WHERE CURRENT OF emp_cur; 
```

...更新`emp`表中与此循环迭代相关的行。你*不能*这样做：

```
UPDATE dept SET ... WHERE CURRENT OF emp_cur; 
```

...因为`dept`表中的行未锁定，因为`OF`. 这也意味着在您的第二个会话中，这些`dept`行可以自由更新，因为它们没有被第一个会话锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:49:49.273

关于更新的另一条评论。如果您从多个表中选择并且没有 where 子句来引用每个表以进行更新，那么它将锁定所有表，直到更新完成。

# css - Firefox div 对象高度

> ID：16081584
> 
> 赞同：0
> 
> 时间：2013-04-18T11:22:23.357
> 
> 标签：css, internet-explorer, firefox

我有以下 HTML：

```
<div id="wrapper">
<div id="radioplayer">
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="467" height="26">
    <param name="movie" value="http://www.museter.com/ffmp3-config.swf" />
    <param name="flashvars" value="url=http://stream.../;&lang=nl&codec=mp3&volume=65&introurl=&autoplay=false&traking=true&jsevents=false&buffering=5&skin=http://www.museter.com/skins/eastanbul/ffmp3-eastanbul.xml&title=Zottebeatjes&welcome=Welkom" />
    <param name="wmode" value="transparent" />
    <param name="allowscriptaccess" value="always" />
    <param name="scale" value="noscale" />
    <embed src="http://www.museter.com/ffmp3-config.swf" flashvars="url=http://stream.../;&lang=nl&codec=mp3&volume=65&introurl=&autoplay=false&traking=true&jsevents=false&buffering=5&skin=http://www.museter.com/skins/eastanbul/ffmp3-eastanbul.xml&title=Zottebeatjes&welcome=Welkom" width="467" scale="noscale" height="26" wmode="transparent" allowscriptaccess="always" type="application/x-shockwave-flash" />
    </object>
</div>
<div id="streaminfobar">
    *some info*
</div>
</div> 
```

这个 CSS 样式表：

```
#wrapper {
    min-height:100%;
    width: 100%;
    position:relative;
    display: table;
}
* {margin:0;padding:0;height:100%;}
#radioplayer {
    width: 100%;
    height:26px;
    background-color: #222222;
    text-align:center;
    display: table-row;
}
#streaminfobar {
    width:100%;
    height:auto;
    margin-top:0;
    background-color: #333333;
    color: #5E5E5E;
    display: table-row;
} 
```

示例：http: [//jsfiddle.net/CXBeE/](http://jsfiddle.net/CXBeE/)

问题是 radioplayer div 的高度必须为 26 px，如 css 块中所指定。在 Google Chrome 中，它确实是 26 像素，但在 Firefox 和 Internet Explorer 中，它远远超过 26 像素。

在Firefox中是这样的：

![在火狐中](https://i.stack.imgur.com/Xx2qF.jpg)

但它应该是这样的（在 chrome 中）：

![在谷歌浏览器中](https://i.stack.imgur.com/p6HUv.jpg)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:32:25.223

更改`*{margin:0;padding:0;height:100%;}`
为`body, html{margin:0;padding:0;height:100%;}`。
您只希望这两个是 100% 高，而不是代码中的每个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:27:25.397

您的 HTML 缺少结束 div。或者这只是这个简化示例中的一个错误？

# spring - Spring MVC - 不要为请求创建会话

> ID：16081585
> 
> 赞同：2
> 
> 时间：2013-04-18T11:22:27.403
> 
> 标签：spring, session, spring-mvc, request, httprequest

是否可以告诉 Spring MVC 不要为某些请求创建会话？

我们有在 Spring MVC 中运行的应用程序，我们有许多控制器方法，例如： /add_client /show_order ... 等

很明显，我们需要为这些方法设置一个会话，但我们还有一个特殊要求：

```
@RequestMapping(value = "/monitoring", method = RequestMethod.GET)
public String monitoring(HttpServletRequest request) {
    // do some check
    return "monitoring";
} 
```

对于监控请求，我们不想创建会话。

如果我在这里搜索或搜索，我发现的只是：“我想要一个会话，但它没有创建或无法正常工作”但我想解决这个问题：“我有一个会话，但我不想要它（对于某些请求）”

Spring MVC 中是否有一些选项可以实现这一点？

拉迪斯拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:51:17.383

在 .jsp 文件中为您不想保持会话的请求创建隐藏变量。在您的控制器方法中检查

```
public String yourMethod(HttpServletRequest request, HttpServletResponse response,
            Your model, BindingResult bindingResult, ModelMap modelmap) {

           if( model.isHiddenPath() ){ // you dont want to keep session 
            request.getSession(false);
}
else{
request.getSession(true); 
```

很难在控制器中检查你所有的方法。最好使用拦截器。

# javascript - Angularjs 中基于 Promise 的单元测试代码

> ID：16081586
> 
> 赞同：68
> 
> 时间：2013-04-18T11:22:31.350
> 
> 标签：javascript, angularjs, promise

我很难在 Angularjs 中测试基于 Promise 的代码。

我的控制器中有以下代码：

```
 $scope.markAsDone = function(taskId) {
        tasksService.removeAndGetNext(taskId).then(function(nextTask) {
            goTo(nextTask);
        })
    };

    function goTo(nextTask) {
        $location.path(...);
    } 
```

我想对以下情况进行单元测试：

*   何时`markAsDone`调用它应该调用`tasksService.removeAndGetNext`
*   完成`tasksService.removeAndGetNext`后应该更改位置（调用`goTo`）

在我看来，没有简单的方法可以分别测试这两种情况。

我为测试第一个所做的是：

```
var noopPromise= {then: function() {}}
spyOn(tasksService, 'removeAndGetNext').andReturn(noopPromise); 
```

现在要测试第二种情况，我需要创建另一个永远是的假承诺`resolved`。这一切都很乏味，而且有很多样板代码。

有没有其他方法可以测试这些东西？还是我的设计有味道？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-04-18T11:56:41.550

您仍然需要模拟服务并返回一个 Promise，但您应该使用真正的 Promise，因此您不需要实现它的功能。用于`beforeEach`创建已经实现的承诺并模拟服务，如果您需要它总是被解决。

```
var $rootScope;

beforeEach(inject(function(_$rootScope_, $q) {
  $rootScope = _$rootScope_;

  var deferred = $q.defer();
  deferred.resolve('somevalue'); //  always resolved, you can do it from your spec

  // jasmine 2.0
  spyOn(tasksService, 'removeAndGetNext').and.returnValue(deferred.promise); 

  // jasmine 1.3
  //spyOn(tasksService, 'removeAndGetNext').andReturn(deferred.promise); 

})); 
```

如果您更愿意在每个`it`块中使用不同的值解析它，那么您只需将 deferred 暴露给局部变量并在规范中解析它。

当然，您可以保持测试原样，但这里有一些非常简单的规范来向您展示它是如何工作的。

```
it ('should test receive the fulfilled promise', function() {
  var result;

  tasksService.removeAndGetNext().then(function(returnFromPromise) {
    result = returnFromPromise;
  });

  $rootScope.$apply(); // promises are resolved/dispatched only on next $digest cycle
  expect(result).toBe('somevalue');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-10T23:49:47.797

另一种方法如下，直接从我正在测试的控制器中取出：

```
var create_mock_promise_resolves = function (data) {
    return { then: function (resolve) { return resolve(data); };
};

var create_mock_promise_rejects = function (data) {
    return { then: function (resolve, reject) { if (typeof reject === 'function') { return resolve(data); } };
};

var create_noop_promise = function (data) {
    return { then: function () { return this; } };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T08:53:43.997

作为另一种选择，您可以避免`$digest`使用 Q 库 ( [https://github.com/kriskowal/q](https://github.com/kriskowal/q) ) 作为替代品来调用，`$q`例如：

```
beforeEach(function () {
    module('Module', function ($provide) {
        $provide.value('$q', Q); 
    });
}); 
```

这样可以在 $digest 循环之外解决/拒绝承诺。

# jsf - 将应用程序迁移到 WAS 7 后，JSF 标记未呈现

> ID：16081589
> 
> 赞同：1
> 
> 时间：2013-04-18T11:22:34.157
> 
> 标签：jsf, websphere-7, ibm-jsf

我一直致力于从 WAS 6.1 到 7 的迁移或 JSF 应用程序。该应用程序使用 JSF 1.1。根据我提到的论坛，我进行了以下更改`web.xml`以使代码与 JSF 1.1 兼容。

```
<!--  Added for the compatibility with JSF 1.1 on WAS7 -->
<context-param>  
    <param-name>com.sun.faces.enableRestoreView11Compatibility</param-name>    
    <param-value>true</param-value>  
</context-param>    

<!-- Removed for JSF 1.1 compatibility on WAS 7
<listener>
    <listener-class> com.sun.faces.config.ConfigureListener</listener-class>
</listener>
--> 
```

但是，有些页面包含`<hx:jspPanel>`和其他`hx`组件，但无法正确呈现。它显示为

```
!!jsftagmarker!!!!jsftagmarker!! !!jsftagmarker!!!!jsftagmarker!! 
```

您能否建议如何解决此问题？是否需要升级到 JSF 1.2 或 JSF 2.0 才能解决问题？是否可以在不升级 JSF 的情况下解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-01T17:53:55.980

基本上jsf12是这里的要求。我看到的类似问题是 6 年前用 WAS7 和 jsf1.1 [https://coderanch.com/t/609870/java/hx-jspPanel-rendering](https://coderanch.com/t/609870/java/hx-jspPanel-rendering)发布的，提示问题需要更改配置。

以下是您的 webshpere 单元中的配置更改：

1.  对于应用程序（企业应用程序 > mywebapp > 共享库引用）创建一个共享库引用说 jsf12
2.  环境 -> 共享库 - 通过正确定义其 calsspath、本机库路径来定义 jsf12

现在，它应该有助于选择新库并使该标签正常工作。

如果您有多个取决于不同版本的应用程序，请保留复选框为此共享库使用隔离的类加载器

# php - 如何使用php从单词中拆分字符串

> ID：16081592
> 
> 赞同：-3
> 
> 时间：2013-04-18T11:22:43.013
> 
> 标签：php

我想通过使用 php 删除所有标签来获取字体标签之间的文本。

```
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0">welcome</FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0"></FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0"></FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0"></FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0">Test of Test asdasd</FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0">asdsadsadsadsad</FONT>
  </P>
</TEXTFORMAT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:35:49.343

是的！让我们在 HTML 上做正则表达式。我预计至少有 10 票反对：D

```
<?php
    $string = '<TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">welcome</FONT></P></TEXTFORMAT><TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0"></FONT></P></TEXTFORMAT><TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0"></FONT></P></TEXTFORMAT><TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0"></FONT></P></TEXTFORMAT><TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">Test of Test asdasd </FONT></P></TEXTFORMAT><TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Verdana" SIZE="10" COLOR="#0B333C" LETTERSPACING="0" KERNING="0">asdsadsadsadsad</FONT></P></TEXTFORMAT>';

    $result = preg_match_all("/<font.*?>(.*?)<\/font>/si", $string, $matches);

    if (count($matches) > 0) {
        unset($matches[0][0]);

        foreach($matches[0] as $key => $value) {
            echo $key.' >>> '.$value;
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:38:20.323

使用这个“XML”：

```
$string = '<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0">welcome</FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0"></FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0"></FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0"></FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0">Test of Test asdasd</FONT>
  </P>
</TEXTFORMAT>
<TEXTFORMAT LEADING="2">
  <P ALIGN="LEFT">
    <FONT FACE="Verdana" SIZE="10" COLOR="#0B333C"
    LETTERSPACING="0" KERNING="0">asdsadsadsadsad</FONT>
  </P>
</TEXTFORMAT>'; 
```

## [您可以使用strip_tags](http://fr2.php.net/manual/en/function.strip-tags.php)删除所有标签

```
echo strip_tags($string); 
```

## 或者您可以使用[simpleXML](http://fr2.php.net/manual/en/book.simplexml.php)解析它：

```
$string = '<data>'.$string.'</data>';
$xml = simplexml_load_string($string);
foreach($xml as $t){
    echo $t->P->FONT.'<br/>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:30:18.627

如果您的 xml 始终是有效的 xml（html 肯定不是），您可以将其导入 DomDocument 并通过 Xpath 查询获取所有字体节点。

这样，您仍然可以拥有完整节点及其所有属性、父节点和子节点。

```
$doc = new DOMDocument($input);
$xpath = new DOMXPath($doc);

$query = '//FONT';

$entries = $xpath->query($query);

foreach ($entries as $entry)
    echo $entry->nodeValue; 
```

[http://www.php.net/manual/de/domxpath.query.php](http://www.php.net/manual/de/domxpath.query.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:30:28.687

```
$your_tagged_text = '<SOME TAGS VALUE="FOO"><FONT FACE="FONT">Your Text</FONT></SOME TAGS>';
$your_plain_text = strip_tags($your_tagged_text);

print $your_plain_text; 
```

返回：“您的文本”

# java - 用于 Spring Web 服务调用的 Mockito 模式

> ID：16081598
> 
> 赞同：8
> 
> 时间：2013-04-18T11:22:58.937
> 
> 标签：java, junit, mockito, spring-ws

我的测试类有这个方法

```
public SomeWebServiceResponse callDownstream(SomeWebServiceRequest request)  {
    return (SomeWebServiceResponse ) super.callService(request);
} 
```

超级方法只是对 Spring WS 的调用以进行调用 - 以简化形式

```
response = getWebServiceTemplate().marshalSendAndReceive(this.getBaseURL(), 
    request);
return response; 
```

当我编写单元测试时，它试图进行实际的 Web 服务调用。我不清楚如何模拟这个，或者更确切地说我们应该模拟什么。

我是否应该从文件系统加载示例响应并在其中查找一些字符串 - 在这种情况下，我只是在测试文件加载。

实际调用在基类中，我知道我们不能只模拟那个方法。任何指针？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T08:12:14.653

Spring does also provide facilities for mocking web service servers as well as requests from clients. The chapter 6.3 in the [Spring WS manual](http://static.springsource.org/spring-ws/sites/2.0/reference/html/client.html#d5e1886) shows how to do mocking.

The Spring WS mocking facility changes the behaviour of the Web Service Template, so you can call that method in the super-class - that method would then call the Spring Mock Service Server.

Here is a sample unit test with the Spring mock service server:

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:spring-ws.xml"})
public class SetStatusFromSrsTemplateTest {
    @Autowired
    private WebServiceTemplate wsTemplate;

    @Before
    public void setUp() throws Exception {
        mockServer = MockWebServiceServer.createServer(wsTemplate);
    }

    @Test
    public void testCall() {
        SomeWebServiceRequest sampleRequest = new SomeWebServiceRequest();
        // add properties to the sampleRequest...
        Source expectedPayload = new ResourceSource(new ClassPathResource("exampleRequest.xml"));
        Source expectedResponse = new ResourceSource(new ClassPathResource("exampleResponse.xml"));
        mockServer.expect(payload(expectedPayload)).andRespond(withPayload(expectedResponse));
        instance.callDownStream(sampleRequest);
        mockServer.verify();
    }
} 
```

The above example will make the mock service server expect exactly one request with the given payload and (if the payload received matches the expected payload) respond with the given response payload.

However, if you only want to verify that the method in the super-class is really called during the test and if you're not interested in the message exchange following that call, you should use Mockito.

If you'd like to use Mockito, I'd suggest the spy (see also Kamlesh's answer). E.g.

```
// Decorates this with the spy.
MyClass mySpy = spy(this);
// Change behaviour of callWebservice method to return specific response
doReturn(mockResponse).when(mySpy).callWebservice(any(SomeWebServiceRequest.class));
// invoke the method to be tested.
instance.callDownstream(request);
// verify that callWebService has been called
verify(mySpy, times(1)).callWebService(any(SomeWebServiceRequest.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:18:19.450

正如@Duncan 所说，如果可以的话，使用依赖注入进行组合将是一种方法，然后模拟该依赖项。

如果你不能，那么你可以使用 mockito [spy有选择地模拟](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Spy.html)**被测类**的方法。

# php - 谷歌谓词 API 刷新令牌异常

> ID：16081599
> 
> 赞同：0
> 
> 时间：2013-04-18T11:22:59.733
> 
> 标签：php, google-api, oauth-2.0, prediction

我必须对项目使用 Google Predicate API，所以我首先播放“Hello Prediction”示例[https://developers.google.com/prediction/docs/hello_world](https://developers.google.com/prediction/docs/hello_world)

我想使用服务帐户身份验证方法直接从我的网络服务器调用 API

这是我的脚本，我总是得到一个

```
Google_AuthException Object
(
    [message:protected] => Error refreshing the OAuth2 token, message: '{
  "error" : "invalid_grant"
} 
```

有什么建议么？

```
 <?php
            ini_set('display_errors',1);
            error_reporting(E_ALL);

            require_once 'google-api-php-client/Google_Client.php';
            require_once 'google-api-php-client/contrib/Google_PredictionService.php';

            session_start();

            $client = new Google_Client();

            define("CLIENT_ID", 'xxxxxxxxxxxxxx.apps.googleusercontent.com');
            define("SERVICE_ACCOUNT_NAME", 'Prediction API Project');
            define("KEY_FILE", 'google-api-php-client/xxxxxxxxcd-privatekey.p12');

            $client = new Google_Client();
            $key = file_get_contents(KEY_FILE);

            $client->setAssertionCredentials(new Google_AssertionCredentials(
                                        SERVICE_ACCOUNT_NAME,
                                        array('https://www.googleapis.com/auth/devstorage.full_control'),
                                        $key));

            $client->setClientId(CLIENT_ID);

            $predictionService = new Google_PredictionService($client);
            $trainedmodels = $predictionService->trainedmodels;

                $id = "languageidentifier";
                $predictionText = "Je suis vraiment très très fatigué";
                $predictionData = new Google_InputInput();
               $predictionData->setCsvInstance(array($predictionText));
                $input = new Google_Input();
                 $input->setInput($predictionData);
                try{
                $result = $predictionService->trainedmodels->predict($id, $input);
                print("<h2>Prediction Result:</h2>");
                print_r($result);
                }

                catch (Exception $e)
                {
                    echo '<pre>';
                    print_r($e);
                    echo '</pre>';
                }
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:00:41.480

看起来我错过了范围内的预测

```
$client->setAssertionCredentials(new Google_AssertionCredentials(
                        EMAIL_ADDRESS,
                        array('https://www.googleapis.com/auth/devstorage.full_control','https://www.googleapis.com/auth/prediction'),
                        $key)); 
```

现在好了

# email - 使用 AutoExec 发送电子邮件时的参数数量错误

> ID：16081612
> 
> 赞同：0
> 
> 时间：2013-04-18T11:23:44.750
> 
> 标签：email, vba, ms-access, arguments

我正在尝试通过从 C.Pearson 下载的功能发送电子邮件。当我尝试让它工作时，我收到错误：“您输入的表达式的函数包含错误数量的参数。”

这是我目前正在使用的代码：

```
Option Explicit
Option Compare Text

Function SendEMail(Subject As String, _
        FromAddress As String, _
        ToAddress As String, _
        MailBody As String, _
        SMTP_Server As String, _
        Optional BodyFileName As String, _
        Optional Attachments As Variant = Empty) As Boolean

Dim MailMessage As CDO.Message
Dim N As Long
Dim FNum As Integer
Dim S As String
Dim Body As String
Dim Recips() As String
Dim Recip As String
Dim NRecip As Long

' ensure required parameters are present and valid.
If Len(Trim(Subject)) = 0 Then
    SendEMail = False
    Exit Function
End If

If Len(Trim(FromAddress)) = 0 Then
    SendEMail = False
    Exit Function
End If

If Len(Trim(SMTP_Server)) = 0 Then
    SendEMail = False
    Exit Function
End If

' Clean up the addresses
Recip = Replace(ToAddress, Space(1), vbNullString)
Recips = Split(Recip, ";")

For NRecip = LBound(Recips) To UBound(Recips)
    On Error Resume Next
    ' Create a CDO Message object.
    Set MailMessage = CreateObject("CDO.Message")
    If Err.Number <> 0 Then
        SendEMail = False
        Exit Function
    End If
    Err.Clear
    On Error GoTo 0
    With MailMessage
        .Subject = Subject
        .From = FromAddress
        .To = Recips(NRecip)
        If MailBody <> vbNullString Then
            .TextBody = MailBody
        Else
            If BodyFileName <> vbNullString Then
                If Dir(BodyFileName, vbNormal) <> vbNullString Then
                    ' import the text of the body from file BodyFileName
                    FNum = FreeFile
                    S = vbNullString
                    Body = vbNullString
                    Open BodyFileName For Input Access Read As #FNum
                    Do Until EOF(FNum)
                        Line Input #FNum, S
                        Body = Body & vbNewLine & S
                    Loop
                    Close #FNum
                    .TextBody = Body
                Else
                    ' BodyFileName not found.
                    SendEMail = False
                    Exit Function
                End If
            End If ' MailBody and BodyFileName are both vbNullString.
        End If

        If IsArray(Attachments) = True Then
            ' attach all the files in the array.
            For N = LBound(Attachments) To UBound(Attachments)
                ' ensure the attachment file exists and attach it.
                If Attachments(N) <> vbNullString Then
                    If Dir(Attachments(N), vbNormal) <> vbNullString Then
                        .AddAttachment Attachments(N)
                    End If
                End If
            Next N
        Else
            ' ensure the file exists and if so, attach it to the message.
            If Attachments <> vbNullString Then
                If Dir(CStr(Attachments), vbNormal) <> vbNullString Then
                    .AddAttachment Attachments
                End If
            End If
        End If
        With .Configuration.Fields
            ' set up the SMTP configuration
            .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
            .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = SMTP_Server
            .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
            .Update
        End With

        On Error Resume Next
        Err.Clear
        ' Send the message
        .Send
        If Err.Number = 0 Then
            SendEMail = True
        Else
            SendEMail = False
            Exit Function
        End If
    End With
Next NRecip

End Function

Public Sub EmailSendSub()
SendEMail ("My Email", "spetsnaz307@gmail.com", "spetsnaz307@hotmail.co.nz","Hello", SMTP_Server:="smtp.gmail.com", "D:\Other\modemail.bas", Attachments:=Empty)

End Sub 
```

我有一个名为“autoexec”的宏，此代码位于名为“modEmail”的模块中。

我的宏的操作是 RunCode，函数名称是：'SendEMail()'

我该如何解决这个错误？几天来我一直在玩这个代码，但我似乎无法提出解决方案。

注意：*我的 25 端口被我的 ISP 阻止，这会导致这个特定错误吗？*

在此先感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:13:31.340

从 VBA 代码中的声明可以看出`Function`，该函数希望您提供主题行、FromAddress、ToAddress 等作为参数。如果您的宏只是调用`SendEMail()`（不带任何参数），那么这就是问题所在，因为您没有告诉函数要发送什么或发送给谁。

函数调用需要更像

```
SendEMail("this is the Subject", "sender@example.com", "recipient@example.com", ... 
```

# python - Vala 到 Python 又回来了

> ID：16081614
> 
> 赞同：1
> 
> 时间：2013-04-18T11:23:48.000
> 
> 标签：python, c, signals, vala, clutter

*我被困在试图从 Vala/C 向上进入 Python 并再次返回的路径。我所有的 google-fu 都在引导我转圈。我想使用 Vala 编写一个 API，然后从 Python（或者可能是 Gnome Javascript）中使用它。*

使用 Clutter 作为我的示例（它也可能是 GTK+3 小部件）这是我的问题：我该如何 —</p>

## 去那里

编写一个自定义 Actor，单击该 Actor 将：

1.  更改颜色 -**注意**：这是*在*Vala 处理程序中完成的。即vala 对象连接到一个'button-release' 事件。该处理程序调用一个 vala 方法： this.set_col('blue');
2.  让它**继续**这个事件到 Python 中，连同一些数据——比如我想打印“我变蓝了！” - 所以我需要“蓝色”作为字符串。

在 Python 中，我会创建一个舞台并（不知何故 - 通过 GI 魔法）创建我的新演员。我做了所有的 Python 东西来设置它，我连接到同一个“按钮释放”事件（我猜..）

a) Vala 处理程序会运行，然后是 Python 处理程序吗？（按顺序，或根本没有。）

b) 我是否必须在 Vala 处理程序中做一些特别的事情——比如返回 true，或者可能发出一些新的信号让 Python 接收？

## 又回来了

假设演员叫 V。我如何： V.set_col('red') （在 Python 中）并让它运行 Vala set_col 方法，传递一个 Python 字符串？（我怀疑这是 GI 下的自动魔法，但我不确定。）

## 简而言之

```
Vala actor -- event --> handler (in Vala) --> handler (in Python) with data
Vala method <--- method call with args from Python 
```

我会很感激任何链接等，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:38:53.770

我知道了。下面的代码是这样工作的：

1.  在一个目录中创建三个文件。
2.  “构建”是一个 bash 脚本。
3.  “redsquare.vala”是将成为库（.so 文件）的 Vala
4.  “test.py”是使用该库的 Python3 代码。
5.  安装这些：（ apt-get bias，对不起）
    *   *apt-get 安装 libgirepository1.0-dev*
    *   *apt-get 安装 gobject-introspection*
    *   *valac 和公司*
6.  运行 ./build ，它应该会打磨 voodoo 并运行 test.py 文件。

7.  您应该看到一个杂波窗口。单击红色方块并观看控制台栏。

:-D

HTH。

## 建造

```
#!/bin/bash

#
# Script borrowed from Tal Liron at:
# https://github.com/tliron/pygobject-example
#
# I did these to get this script to work:
#
# apt-get install libgirepository1.0-dev
# apt-get install gobject-introspection
#

echo "Cleaning..."

rm -rf tmp
rm -rf lib
rm -rf type
rm -f test

mkdir tmp
mkdir lib
mkdir type

    echo "Building Vala library..."

    # Note 1: Ubuntu package for valac: valac-0.14
    # Note 2: Generates broken gir if --gir= has a directory prefixed to it
    # Note 3: The -X switches for gcc are necessary!
    # Note 4: The generated gir will include GObject-2.0\. That gir is
    #         included in Ubuntu package: libgirepository1.0-dev

    valac \
  --pkg clutter-1.0 \
    --library=Palelib \
    --directory=tmp \
    --gir=Palelib-1.0.gir \
    --output=libpalelib.so \
    -X -shared \
    -X -fPIC \
    redsquare.vala

    mv tmp/libpalelib.so lib
    mv tmp/Palelib-1.0.gir type

    # Note: We cannot generate C code and compile in the same call
    #       (We don't need the C code to run the test, but we are curious
    #       as to what Vala is generating. The resulting code will be in
    #       logging.c)
    #valac \
    #--ccode \
    #redsquare.vala

echo "Building typelib..."

# Note 1: Ubuntu package for g-ir-compiler: gobject-introspection
# Note 2: The --shared-library switch is really only necessary when using
#         the gir produced by valac, because it does not include the
#         'shared-library' attribute in <namespace> tag.

g-ir-compiler \
--shared-library=libpalelib.so \
--output=type/Palelib-1.0.typelib \
type/Palelib-1.0.gir

echo "Test Python..."

# Note 1: Ubuntu's default path for typelib files seems to be:
#         /usr/lib/girepository-1.0/.
# Note 2: It is also possible to programmatically change the
#         GI_TYPELIB_PATH environment var in Python (os.environ API).
#         If you do so, make sure to set it before importing from
#         gi.repository.
LD_LIBRARY_PATH=lib \
GI_TYPELIB_PATH=type \
./test.py 
```

## redsquare.vala

```
namespace Palelib {

    public class RedSquare : Clutter.Actor {

    //private vars
    private Clutter.Canvas _canvas;
    private int[] _col = { 255, 0, 0 };

    //Constructor - Needs to be called explicitly from Python by .new()
    public RedSquare() {
      stdout.printf( "RedSquare constructor.\n" );

      _canvas = new Clutter.Canvas();
      _canvas.set_size(300,300);

      this.set_size(300,300);
      this.set_content( _canvas );

      //Connect to the draw signal.
      _canvas.draw.connect(drawme);

      //Make it reactive and connect to the button-press-event
      this.set_reactive(true);
      this.button_press_event.connect( cleek );
    }

    //Button press signal handler
    private bool cleek ( Clutter.ButtonEvent evt ) {
      stdout.printf("Vala cleek() has run!\n");
      this._col = {0,255,0}; //Just change the colour
      this.redraw("from Vala");
      //return true; //Stops the signal here. Python won't get it.
      return false; //Lets the signal carry on going (to Python).
    }

    //Draws the Cairo art to the canvas
    private bool drawme( Cairo.Context ctx, int w, int h) {
      stdout.printf("drawme test.\n");
      ctx.set_source_rgb(this._col[0],this._col[1],this._col[2]);
      ctx.rectangle(0,0,300,300);
      ctx.fill();
      return true;
    }

    //Redraw - forces invalidate which trips the draw event
    //Am gonna call this directly from Python too!
    public void redraw(string? thing) {
      thing = thing ?? "from null"; //tests for null or else
      stdout.printf( "redraw test %s.\n", thing );

      this._canvas.invalidate();
    }
    } //end RedSquare class
} //end namespace 
```

## 测试.py

```
#!/usr/bin/env python3

"""
Tests the instance of our Vala actor.

I expect to see a red square on the white stage.
(It can be clicked.)

"""

import sys
from gi.repository import Palelib, Clutter

Clutter.init(sys.argv)
stage = Clutter.Stage()
stage.set_size(800, 400)
stage.set_title("Blah blah")
stage.connect('destroy', lambda x: Clutter.main_quit() )

# Make our Object:
rs = Palelib.RedSquare.new() #Note the .new() call. Yuck.
print(rs)
#print(dir(rs)) # See that it is an Actor object.

rs.set_position(100,100)

stage.add_child(rs)

#Force rs to appear. Calls a Vala method and passes a string.
rs.redraw("from Python")

"""
# Crud for testing:
r1 = Clutter.Rectangle()
r1.set_size(50,50)
r1.set_position(0,0)
damnweird = Clutter.Color.new(0,0,0,255)
r1.set_color( damnweird  )

stage.add_child(r1)
"""

"""
Let's get an event going from Python!
Because the RedSquare actor is *already* listening
to a button-press-event (in Vala) this is the second 
such event it will obey. 

I *think* it happens after the vala cleek() method runs.
If you |return true| in cleek(), then this does NOT run,
so that implies that Python is happening second in the chain.
"""
def gogo( a, evt ):
  print ("Hello from gogo. %s %s" % (a,evt))
rs.connect("button_press_event", gogo)

stage.show_all()
Clutter.main() 
```

# c - 使用信号同步

> ID：16081616
> 
> 赞同：0
> 
> 时间：2013-04-18T11:23:52.550
> 
> 标签：c, synchronization, signals, parent-child

**仅使用信号（非实时）**实现这种情况的方法是什么？：

有 N 个子进程（进程，由 创建`fork()`），1 个父进程，同步必须是这样的：

1.  父母正在等待任何孩子的信号。
2.  每个孩子都向父母发送信号，然后阻塞，直到收到来自父母的信号
3.  父母向那个孩子发送信号，他注意到了这个信号

我不知道该怎么办，因为只有2个用户定义的信号SIGUSR1，SIGUSR2，但是我有N个孩子，所以很多孩子应该只使用一种信号，我很害怕

有任何想法吗？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:39:02.840

您不需要使用那些用户定义的信号您可以向任何孩子发送任何信号..或父母您所要做的只是使用`signal()`或`sigaction()`系统功能捕获该信号...并从该信号的 ISR 向特定孩子发送信号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:40:23.993

如果您真的只想通过信号进行同步（这不是一个好主意）
，您可以使用**sigqueue**作为发送方，并使用**sigaction**作为接收方，
这允许您将 int 或指针附加到另一个进程。
因此接收者可以通过附加信息来识别发送者。

# gcc - 以编程方式导致未定义指令异常

> ID：16081618
> 
> 赞同：9
> 
> 时间：2013-04-18T11:24:02.280
> 
> 标签：gcc, arm, inline-assembly, cortex-m3

我想为我的测试夹具的测试导致 ARM Cortex-M3 未定义指令异常。IAR 编译器通过内联汇编支持这一点，如下所示：

asm("udf.w #0");

不幸的是，GNU CC 内联汇编器不知道 NXP LPC177x8x 的这个操作码。它写入诊断：

```
ccw3kZ46.s:404: Error: bad instruction `udf.w #0' 
```

如何创建导致未定义指令异常的函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T15:28:05.847

基于*Masta79*的回答：

ARMv7-M 架构参考手册 - ARM DDI 0403D（[文档占位符，需要注册](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0403c/index.html)）中列出了“永久未定义”编码。编码为 0xf7fXaXXX（忽略“X”）。当然指令获取是小端的，所以（未经测试）：

`asm volatile (".word 0xf7f0a000\n");`

应该在任何 ARMv7-M 或更高版本的处理器上产生保证的未定义指令。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-13T10:48:15.360

一些额外的信息...

GCC 的[内置](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)函数之一是

> > 无效__builtin_trap（无效）
> > 
> > **该函数会导致程序异常退出**。GCC 通过使用依赖于目标的机制（**例如故意执行非法指令**）或调用 abort 来实现此功能。**使用的机制可能因版本而异，因此您不应依赖任何特定的实现。**

它对[ARMv7 的实现是](https://raw.githubusercontent.com/gcc-mirror/gcc/master/gcc/config/arm/arm.md)：

```
(define_insn "trap"
  [(trap_if (const_int 1) (const_int 0))]
  ""
  "*
  if (TARGET_ARM)
    return \".inst\\t0xe7f000f0\";
  else
    return \".inst\\t0xdeff\";
  "
  [(set (attr "length")
    (if_then_else (eq_attr "is_thumb" "yes")
              (const_int 2)
              (const_int 4)))
   (set_attr "type" "trap")
   (set_attr "conds" "unconditional")]
) 
```

因此，对于 ARM 模式，gcc 将生成`0x7f000f0 (f0 00 f0 07)`，对于其他模式`0xdeff (ff de)`（反汇编/调试时会派上用场）。

[另请注意](https://gcc.gnu.org/ml/gcc-patches/2013-12/msg00405.html)：

```
these encodings match the UDF instruction that is defined in the most
recent edition of the ARM architecture reference manual.

Thumb: 0xde00 | imm8  (we chose 0xff for the imm8)
ARM: 0xe7f000f0 | (imm12 << 8) | imm4  (we chose to use 0 for both imms) 
```

对于生成的[LLVM](http://llvm.org/klaus/llvm/blob/master/lib/Target/ARM/ARMAsmPrinter.cpp) `__builtin_trap`值是`0xe7ffdefe`和`0xdefe`：

```
case ARM::TRAP: {
  // Non-Darwin binutils don't yet support the "trap" mnemonic.
  // FIXME: Remove this special case when they do.
  if (!Subtarget->isTargetDarwin()) {
    //.long 0xe7ffdefe @ trap
    uint32_t Val = 0xe7ffdefeUL;
    OutStreamer.AddComment("trap");
    OutStreamer.EmitIntValue(Val, 4);
    return;
  }
  break;
}
case ARM::tTRAP: {
  // Non-Darwin binutils don't yet support the "trap" mnemonic.
  // FIXME: Remove this special case when they do.
  if (!Subtarget->isTargetDarwin()) {
    //.short 57086 @ trap
    uint16_t Val = 0xdefe;
    OutStreamer.AddComment("trap");
    OutStreamer.EmitIntValue(Val, 2);
    return;
  }
  break;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-08T21:42:27.463

永久未定义指令的 thumb-16 版本是`0xDExx`. 因此，您可以在代码中执行此操作以触发异常：

```
.inst 0xde00 
```

参考：ARMv7-M 架构参考手册，第 A5.2.6 节。

（请注意，0xF7Fx、0xAxxx 编码也是永久未定义的，而是一条 32 位指令。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-11-16T14:18:31.427

[1]中有不同的官方未定义指令（查找UDF；`.`下面可以替换为任何十六进制数字）：

*   `0xe7f...f.`- ARM 或 A1 编码（ARMv4T、ARMv5T、ARMv6、ARMv7、ARMv8）
*   `0xde..`- Thumb 或 T1 编码（ARMv4T、ARMv5T、ARMv6、ARMv7、ARMv8）
*   `0xf7f.a...`- Thumb2 或 T2 编码（ARMv6T2、ARMv7、ARMv8）
*   `0x0000....`- ARMv8-A 永久未定义

还有其他的，但这些可能是面向未来的。

至于生成触发它的代码，您可以使用`.short`or `.word`，如下所示：

*   `asm volatile (".short 0xde00\n");`/* 拇指非法指令 */
*   `asm volatile (".word 0xe7f000f0\n");`/* arm 非法指令 */
*   `asm volatile (".word 0xe7f0def0\n");`/* arm+thumb 非法指令 */

请注意，最后一个将在 thumb 上下文中解码为`0xdef0`，`0xe7f0`因此也会导致未定义的指令异常。

[1] [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.subset.architecture.reference/index.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.subset.architecture.reference/index.html)

[2] DDI0487D_b_armv8_arm.pdf

# php - 条件类 drupal 7 和 IE9

> ID：16081636
> 
> 赞同：0
> 
> 时间：2013-04-18T11:25:01.643
> 
> 标签：php, html, css

我希望使用条件类来检测是否正在使用 IE9，如果是，则将 css 相应地应用于类导航。

我在 html.tpl.php 文件中添加了以下行

`<!--[if IE 9]><html <?php print $html_attributes; ?> class="ie9nav"><![endif]-->`

在 stylsheet.css 文件中，当前类是（有效的）。

`#navigation {background-image: blah.jpg}`

我添加了

`#navigation .ie9nav {background-color: fff;}`

但它不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:30:33.040

为什么不直接用php本身试试..

这是将派上用场的代码片段..

```
if(preg_match('/MSIE/i',$_SERVER['HTTP_USER_AGENT']))
{
    echo '<html class="ieclass">';
}
else
{
    echo '<html class="none-ie">;
} 
```

希望能帮助到你..

# c - 如何在 Windows 中使用 vt100 代码

> ID：16081639
> 
> 赞同：6
> 
> 时间：2013-04-18T11:25:19.083
> 
> 标签：c, windows, visual-studio, vt100

我尝试在控制台中移动光标。

我发现 vt100 代码可以做到这一点。

```
#include<stdio.h>
int main()
{
    printf("123456789\n");
    printf("\033A");
    printf("abcdefghi\n");
    return 0;
} 
```

它的输出与计划的不同。这就是上面的代码在控制台中打印的内容。

第二行“A”前有个小箭头，不能放到网页上

```
123456789
Aabcdefghi 
```

在 Windows 的 Visual Studio 中编程时如何使用 vt100 代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-07-01T16:34:17.847

**并非所有 Windows 平台都支持 VT100。只有那些 Windows 10 及更高版本（您可能会注意到 PowerShell 有颜色）。**

如果您使用的是 Windows 10，则运行上面的代码但它不起作用；这意味着您尚未激活它（默认情况下它不会打开）。

有一种跨平台方法（您无需使用 Windows 特定功能即可开始使用）。

您只需要`system(" ")`在控制代码之前调用：

```
#include<stdio.h>
#include <stdlib.h> // Library for system() function

int main()
{
    system(" "); // Start VT100 support

    printf("123456789\n");
    printf("\033A"); // And you are away :)

    printf("abcdefghi\n");
    return 0;
} 
```

或者您可以使用[此处](https://stackoverflow.com/questions/16755142/how-to-make-win32-console-recognize-ansi-vt100-escape-sequences/16755477#16755477)[`SetConsoleTextAttribute()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx)描述的激活 VT100

* * *

[您可以从 Microsoft 文档](https://docs.microsoft.com/en-us/windows/console/console-virtual-terminal-sequences)中找到有关控制台虚拟终端序列的更多参考：

> 以下序列的行为基于 VT100 和衍生的终端仿真器技术，尤其是 xterm 终端仿真器。有关终端序列的更多信息，请访问[http://vt100.net](http://vt100.net)和[http://invisible-island.net/xterm/ctlseqs/ctlseqs.html](http://invisible-island.net/xterm/ctlseqs/ctlseqs.html)。

* * *

[这篇文章似乎也很有帮助，因为它描述了启动 VT100 的不同方法](https://stackoverflow.com/questions/16755142/how-to-make-win32-console-recognize-ansi-vt100-escape-sequences/16755477)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:28:43.783

VT100 代码在普通的 Windows 控制台中不起作用。您需要一个[终端仿真程序](http://en.wikipedia.org/wiki/List_of_terminal_emulators#Microsoft_Windows)。

[该页面](http://en.wikipedia.org/wiki/Comparison_of_terminal_emulators)似乎声称它确实支持 vt100。但我个人无法证实这一点。而且我找不到任何参考。

可能有点矫枉过正，但[Cygwin](http://cygwin.org/)包含一个 X 服务器，您可以使用它运行支持 vt100 代码的[Xterm 。](http://en.wikipedia.org/wiki/Xterm)

# c - C 语言中的列表。访问冲突

> ID：16081644
> 
> 赞同：0
> 
> 时间：2013-04-18T11:25:31.460
> 
> 标签：c, linked-list, access-violation

这有点难以解释，但无论如何我都会尝试。我正在尝试创建一个程序，该程序将获得一个以 0 结尾的列表，中间也有 0。该程序将检查谁是每个零之间的最小值（例如：对于 list `6 -> 3 -> 15 -> 0 -> 1 ->2 ->0`，最小值是3 和 1) ，将从列表中删除它们，并将它们插入到另一个列表中。

例如，如果 list1 是`6 -> 3 -> 15 -> 0 -> 1 ->2 ->0`，那么在我运行程序后， list1 将是`6 -> 15 -> 0 -> 2 ->0`， list2 将是`3->1`。

当我运行我的代码时，我收到访问冲突错误。这是我的代码：

```
list* essay(list* anchor1)
{
    list* prev_to_min,*runner,*prev_to_runner,*result,*result_temp;
    int min;
    prev_to_min=prev_to_runner=anchor1;
    result=allocate_list();
    result_temp=result;
    runner=prev_to_runner->address_to_next;
    min=runner->number;
    while(runner!=NULL)
    {
        while(runner->number!=0)
        {
            if(min>=runner->number)
            {
                min=runner->number;
                prev_to_min=prev_to_runner;
            }
            prev_to_runner=runner;
            runner=runner->address_to_next;
        }
        remove_item(prev_to_min);
        result_temp=insert_item(result_temp,min);
        prev_to_runner=runner;
        runner=runner->address_to_next;
        if(runner!=NULL)
            min=runner->number;
    }
    return result;
} 
```

一个小的解释，因为周围有很多变量：result 是指向 list2 的锚点（最小值列表）的指针，result_temp 是指向 list2 的当前最后一项的指针，runner 是我用来迭代 list1 的指针, prev_to_runner 是指向 list 中 runner 之前的 item，prev_to_min 是指向 list1 中最小值之前的 item。例如`6 -> 3 -> 15 -> 0`3 是最小值，所以 prev_to_min 是 6 的地址。

我试着用一张纸运行它，在我的脑海中运行程序，我得到了需要的结果。但是当我编译它并且计算机运行它时，我收到错误“更多lists.exe中0x5557700c（msvcr100d.dll）的未处理异常：0xC0000005：访问冲突读取位置0xfffffffc。”

这是插入和删除项目的代码：

```
void remove_item(list* prev_position)
{
    list* deleted;
    deleted=prev_position->address_to_next;
    prev_position->address_to_next=deleted->address_to_next;
    free(*deleted);
}

list* insert_item(list* position,listdata x)
{
    list* temp=(list*)malloc(sizeof(list));
    temp->number=x;
    temp->address_to_next=position->address_to_next;
    position->address_to_next=temp;
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:30:17.653

`Access violation reading location 0xfffffffc.` 这是一个很好的线索，你有一个 NULL 指针，你备份了一个 32 位整数的大小，然后尝试读取它。

如果你在调试器中运行，它会告诉你在哪里。

# spring - 检查环境变量是否为 null 并在 SpEL 中获取文件

> ID：16081646
> 
> 赞同：1
> 
> 时间：2013-04-18T11:25:33.983
> 
> 标签：spring, spring-mvc, spring-el

在我们的 prod 环境中，我们`confDir`从 tomcat 中的 server.xml 提供参数以获取 .properties 文件，但在开发和测试环境中，我们使用类路径中的属性文件。

像这样

```
<context:property-placeholder location="${confDir:}/jdbc.properties, ${confDir:}/webservice.properties" order="1" ignore-resource-not-found="true" ignore-unresolvable="true"/>
<context:property-placeholder location="classpath:jdbc.properties, classpath:webservice.properties" order="2"/> 
```

现在我想使用`util:properties`标签加载这些属性文件，如下所示，用于访问它们`@Value`并检查是否为空，如果为空则分配一个默认值

```
<util:properties id="classpathProps" location="classpath:jdbc.properties" local-override="false" />
<util:properties id="confDirProps" location="{confDir:}/jdbc.properties" local-override="false" /> 
```

问题`util:properties`是当我们不提供`confDir`属性时它会抛出异常。

有人可以帮我解决这个问题。我尝试了各种SpEL表达式，例如

```
location="#{${confDir}?${confDir:}/jdbc.properties:''}" 
```

检查是否`confDir`为空，但我的试验最终是徒劳的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:50:03.383

你不需要SpEL；只需使用普通属性占位符默认值...

```
<util:properties id="foo" location="${foo:classpath:}props"/> 
```

然后，如果你在没有 foo 属性的情况下运行，你会得到......

```
class path resource [props] cannot be opened because it does not exist 
```

如果你运行`-Dfoo=bar/`，你会得到......

```
class path resource [bar/props] cannot be opened because it does not exist 
```

如果你运行`-Dfoo=file:/bar/`

```
/bar/props (No such file or directory) 
```

在`${foo:classpath:}props`中，第一个冒号后的值是在属性`foo`不存在时使用的替换值。

# ios - 是否可以在 UIView 上设置顶栏？

> ID：16081651
> 
> 赞同：0
> 
> 时间：2013-04-18T11:25:43.570
> 
> 标签：ios, objective-c, uiview

我想`UIView`为 UIView 的标题展示一个带有标准的顶部栏 - 黑色导航栏。

1.  我创建了一个xib。
2.  将顶部栏设置为 xib 中的黑色导航栏
3.  将其添加到屏幕：

    ```
    _popup = [[[NSBundle mainBundle] loadNibNamed:@"Popup" owner:self options:nil] objectAtIndex:0];

    CGSize screenSize = [[UIScreen mainScreen] bounds].size;
    _popupBackground = [[UIView alloc]initWithFrame:
                        CGRectMake(0,0,screenSize.width,screenSize.height)];
    _paymentPopupBackground.backgroundColor = [UIColor clearColor];

    [_paymentPopupBackground addSubview:_popup];
    [[UIApplication sharedApplication].keyWindow addSubview:_paymentPopupBackground]; 
    ```

4.  出现`UIView`但没有黑色导航栏。这怎么能解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:27:59.410

要拥有一个导航栏，您只需将 viewController 嵌入到`UINavigationController`. 然后你可以为你想要的外观设置 navigationController 的 tintColor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:31:58.873

导航栏适用于 UIViewControllers 而不是 UIViews。您可以在视图顶部使用工具栏并呈现它

使样式黑色不透明

![在此处输入图像描述](https://i.stack.imgur.com/1Qzdc.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:35:30.750

您可以将 UINavigationBar 添加到 UIView，但如果 UIViewController 不在导航堆栈中，则 Interface Builder 中的设置实际上不会做任何事情。

手动将 UINavigationBar 拖到 UIView 中。

只是让您知道，这可能不会为您的用户提供一致的体验，并且可能无法通过审核流程 - 如果您需要导航栏，我强烈建议您使用导航堆栈。

# android - 在滚动视图中放置 web 视图时出现滚动问题

> ID：16081652
> 
> 赞同：0
> 
> 时间：2013-04-18T11:25:44.670
> 
> 标签：android, webview, scrollview

当我将 webview 放置在滚动视图中时，我遇到了 webview 的滚动问题，而滚动视图又位于框架布局下

以下是我要求的上述布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".WebSampleActivity" >

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:id="@+id/scroll_view">

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" 
                android:orientation="vertical">

                  <Button
                      android:id="@+id/button_view"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="button" />
                <WebView
                    android:id="@+id/web_view"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:clickable="true"
                    android:focusableInTouchMode="true"
                    android:onClick="true" 
                    />

            </LinearLayout>
        </ScrollView>
    </FrameLayout>

</RelativeLayout> 
```

在上面的示例中，当我触摸 webview 区域时，我的内容会滚动到放置在布局中的按钮下方

谁能告诉我如何处理这个问题。我只需要 webview 中的内容才能移动到按钮区域

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:55:03.373

我不确定我是否理解您的问题，但是，尝试将 LinearLayout 参数更改为：

```
 <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:id="@+id/scroll_view">

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:orientation="vertical">

              <Button
                  android:id="@+id/button_view"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="button" />
            <WebView
                android:id="@+id/web_view"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:clickable="true"
                android:focusableInTouchMode="true"
                android:onClick="true" 
                />

        </LinearLayout>
    </ScrollView> 
```

我认为它可以工作。

如果你想不丢失按钮，你必须改变LinearLayout和ScrollView。

# android - 在计时器中获取服务上下文，以便我可以使用 toast

> ID：16081656
> 
> 赞同：1
> 
> 时间：2013-04-18T11:25:48.447
> 
> 标签：android, service, toast

我知道我可以在服务的 onCreate() 方法中使用它来获取服务上下文。在我的服务中，我使用计时器来做某事。当某事完成时，我想举杯祝酒。但是，我无法在我的计时器中访问服务上下文来制作 toast。我可以在 onCreate() 方法中使用 this 访问上下文

如何将上下文（以便我可以使用它来创建 toast）传递给服务中运行的计时器有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:20:18.657

以下是提供类似问题答案的问题：

[如何从 Android 服务获取应用程序上下文？](https://stackoverflow.com/questions/8305496/how-can-i-get-the-application-context-from-an-android-service)

[android从服务开始活动](https://stackoverflow.com/questions/3606596/android-start-activity-from-service)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:07:01.807

创建从 Application 类扩展的自定义应用程序类。然后在 onCreate init 上下文成员中使用自己的 MyApp 实例。现在，您可以随心所欲地获取上下文：

```
public class MyApp extends Application {
    private static MyApp mContext;

    @Override 
    public void onCreate() {
        mContext= this;
        super.onCreate();
    }

    public static MyApp getContext() {
        return mContext;
    }
} 
```

然后你可以通过调用来获取上下文`MyApp.getContext();`

不要忘记在清单中添加属性 name=MyApp ：

```
...
<application
     android:icon="@drawable/ic_launcher"
     android:label="@string/application_name"
     android:name="MyApp">
... 
```

# character-encoding - AssertionError 的 IDEA 输出中的字符编码

> ID：16081657
> 
> 赞同：5
> 
> 时间：2013-04-18T11:25:51.880
> 
> 标签：character-encoding, intellij-idea, testng, junit4

我正在使用 IntelliJ IDEA 12.0.4。做一些测试。当我使用 JUnit4 框架运行一个时，我的断言错误看起来像：

```
java.lang.AssertionError: Status should be: Черновик expected [true] but found [false] 
```

如果我使用的是 TestNG，它看起来像这样：

```
java.lang.AssertionError: Status should be: Р§РµСЂРЅРѕРІРёРє expected [true] but found [false] 
```

所有其他西里尔文输出在这两个框架上都可以正常工作，只有断言文本不会。

项目文件编码设置为 UTF-8。

**更新：** 例如简单的 WebDriver 测试。我使用 TestNG 和 IE。

```
import org.testng.Assert;
import org.testng.annotations.AfterSuite;
import org.testng.annotations.BeforeSuite;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;

import java.util.concurrent.TimeUnit;

public class SeleniumExample  {

    protected WebDriver driver;
    protected String baseUrl;

    @BeforeSuite
    public void setUp() throws Exception
    {

        /* Local Driver  */
        driver = new InternetExplorerDriver();
        baseUrl = "http://www.google.com";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @DataProvider
    public Object[][] TestData() {
        return new Object[][]{
                {"Гугл"},
        };
    }

    @Test(description = "Create_InvestProjectRequest", dataProvider = "TestData")
    public void Test(String s) {

        driver.get(baseUrl);

        Assert.assertTrue(driver.getTitle().contains(s), "Ошибка");
    }

    @AfterSuite
    public void tearDown() throws Exception {
        driver.quit();
    }
} 
```

在测试结果输出中，我看到：

java.lang.AssertionError：РћС€РёР±РєР° 预期：true 实际：false

另一个问题是，如果我在 DataProvider 中使用西里尔字母，那么在测试树中我会看到 Test("РћС€Р") 而不是 Test("Гугл")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T20:12:58.170

这是一个[已知错误](http://youtrack.jetbrains.com/issue/IDEA-59459)，将在下一次更新中修复，感谢您的项目帮助我们追踪它。

当前的解决方法是编辑[.vmoptions 文件](http://intellij-support.jetbrains.com/entries/23395793)并添加`-Dfile.encoding=UTF-8`选项。

# php - 如何将项目添加到可以在另一个页面上访问的javascript数组？

> ID：16081670
> 
> 赞同：0
> 
> 时间：2013-04-18T11:26:39.827
> 
> 标签：php, javascript, arrays

我有个问题。我创建了一个 php 网站，每个项目都有一个“请求报价”按钮。单击按钮时，我希望将项目名称添加到数组中（我正在通过 Javascript 执行此操作）。随后，该数组将添加到 contact.php 上的请求表单“消息”字段中。我用过这个-

```
<script language="javascript">
// Empty array
var empty = [];

// Array containing initial elements.
var arrayitem= ['hello'];

alert(arrayitem[1]);
function myFunction(item) {
arrayitem.push(item);
var Items='';
for (var i = 0; i < arrayitem.length; i++) {
Items=Items+','+(arrayitem[i]);
   alert(Items);

};
document.getElementById("message").value=arrayitem[1];
}
</script> 
```

在 header.php 页面上，我包含在每个页面上。我还有两个页面-1.computers.php-包含计算机作为项目和2.softwares.png-包含软件作为项目。

现在的问题是，当我从一个页面添加项目时，它们被附加到数组中并且它工作正常，但是当我导航到另一个页面时，从前一页添加的项目会从数组中删除..而且我看不到“contactus.php 的消息字段”中的 araay 项目。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:46:42.417

You could try using the browser's `localStorage` to store data in between page visits.

Try this JavaScript in your header.php:

```
localStorage.setItem("preference", "10"); 
```

And then in your contact page try this:

```
console.log(localStorage.getItem("preference")); 
```

You should see "10" in your browser console.

Here's more info about localStorage: [http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:30:40.900

JavaScript 是一种客户端脚本语言，它的设计目的不是为了在页面请求之间保留变量值。如果您想访问另一个页面上的 JavaScript 变量，您必须将它们与对新页面的请求一起传递，以便新页面可以恢复它们。

除了将其与请求一起发布到下一页之外，在较新的浏览器中，您还可以使用 localStorage：

```
// Store the array
var array = [1, 2, 3];
localStorage['array'] = JSON.stringify(array);

// Retrieve the array
var storedArray = JSON.parse(localStorage['array']); 
```

在较旧和较新的浏览器中，您可以使用 cookie：

```
// Store the array in a cookie
var array = [1, 2, 3];
var jsonArray = JSON.stringify(array);
setCookie('mycookie', jsonArray , 1);

function setCookie(name, value, days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = '; expires='+date.toGMTString();
  }
  else var expires = '';
  document.cookie = name+'='+value+expires+'; path=/';
}

// Retrieve the array from a cookie
var jsonArrayFrom Cookie = JSON.parse(getCookie('mycookie'));

function getCookie(name) {
  name += '=';
  var cookies = document.cookie.split(';');
  for(var i=0;i < cookies.length;i++) {
    var cookie = cookies[i];
    while (cookie.charAt(0)==' ') cookie = cookie.substring(1, cookie.length);
    if (cookie.indexOf(name) == 0) return cookie.substring(name.length, cookie.length);
  }
  return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:27:32.033

谢谢大家的解决方案。我使用 sessionStorage 来存储项目。并在联系页面上检索它们。我正在提供代码。可能它可以帮助某人-将其包含在 header.php- 中

```
<script language="javascript">

function myFunction(item) {
sessionStorage.setItem(item,item);
var keyval=sessionStorage.item;
for(var i = 0; i < sessionStorage.length; i++)  
{  
    var keyName = sessionStorage.key(i);  
    var itemvalue = sessionStorage.getItem(keyName); 
      alert(keyName + " = " + itemvalue);  

}  

}
</script> 
```

在联系我们页面中-

```
 for(var i = 0; i < sessionStorage.length; i++)  
{  
    var keyName = sessionStorage.key(i);  
    var itemvalue = (i+1)+"-"+sessionStorage.getItem(keyName); 
     document.contact.message.value=document.contact.message.value+"\n"+itemvalue ;
} 
```

希望能帮助到你！！！！谢谢大家！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:31:19.923

您应该保存数组并使用表单或其他方法将其发布到其他页面。Javascript 没有持久化。

您可以使用 Webstorage 进行页面间持久性。从您的数组中创建一个 JSON 对象，如下所示：

```
var myArrayString = JSON.stringify(myArray); 
```

并将其存储在网络存储中的密钥中：

```
sessionStorage.setItem('arrayStore',myArrayString); 
```

您可以在另一个页面中读取此密钥：

```
sessionStorage.getItem('arrayStore'); //returns 'myArrayString' 
```

...或者简单地引用 sessionStorage 对象：

```
sessionStorage.arrayStore; //returns 'myArrayString' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T12:11:33.450

您可以通过 PHP 将信息写入 cookie 并通过 JavaScript 读取它们，在示例中假设 jQuery：

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"/>
    <script src="http://cachedcommons.org/cache/jquery-cookie/0.0.0/javascripts/jquery-cookie.js"/>
</head>
<body>
<h1>Cookie</h1>
<?php
$expire = time() + 60 * 60 * 24 * 30;
setcookie('some_cookie', "fnord", $expire);
?>
<script type="text/javascript">
    console.log($);
    $(document).ready(function () {
        alert($.cookie("some_cookie"));
    });
</script>
</body>
</html> 
```

[如果你只需要支持现代浏览器，你最好使用localStorage](https://sites.google.com/site/daveschindler/jquery-html5-storage-plugin)，还有一些库可以防止你重新发明轮子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T11:44:05.500

尝试在 javascript 上使用 cookie，然后在 PHP 上使用 $_COOKIE var 检索它。

[http://www.php.net/manual/en/features.cookies.php](http://www.php.net/manual/en/features.cookies.php)

问候。

# php - 模板中的任务完成通知警报

> ID：16081672
> 
> 赞同：0
> 
> 时间：2013-04-18T11:26:49.077
> 
> 标签：php

```
if  ($this->id == NULL AND ($this->status_id == '62' OR $this->status_id = '63'))
    {
        $notify_url = Route::get('applications')->uri(array('controller' => 'calibration', 'action' => 'details', 'id' => $this->id));

        Notify::create(Kohana::$config->load('tip.top'), 'Calibration',
            $this->id.': '.$this->description,

            Route::get('applications')->uri(array('controller' => 'calibration', 'action' => 'details', 'id' => $this->id))

        );
    } 
```

你好，

我有这段代码，当记录的 ID 不是 NULL ，记录的状态不是“进行中”并且记录的状态是“完成”时，它应该向我发送通知，它应该只向我发送通知然后。

它向我发送完全相反的通知。当我刷新空白记录和添加记录时，当状态为“进行中”时，它会发送通知

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:36:57.833

你的条件是错误的：

*$this->id == NULL* => 当 IS null 并且你说“..当记录的 ID**不是**NULL...”

由于您的指示，您的条件将是：

```
if  ($this->id != NULL AND ($this->status_id == '62' OR $this->status_id = '63')) 
```

问候。

# c - 程序在读取输入时停止

> ID：16081681
> 
> 赞同：0
> 
> 时间：2013-04-18T11:27:13.157
> 
> 标签：c, input

我使用以下循环读取输入

```
do
{
      i=0;
      do
      {
          line[i]=fgetc(stdin);
          i++;

      }while(i<100 && line[i-1]!='\n' && line[i-1]!=EOF);

      //Parsing input

 }while(line[i-1]!=EOF); 
```

我的输入看起来像这样

```
$GPRMC,123519,A,4510.000,N,01410.000,E,010.0,010.0,120113,003.1,W*4B
$GPRMC,123520,A,4520.000,N,01650.000,E,010.0,010.0,230394,003.1,W*4B
$GPRMC,123521,A,4700.000,N,01530.000,E,010.0,010.0,230394,003.1,W*4F
$GPRMB,A,0.66,L,001,002,4800.24,N,01630.00,E,002.3,052.5,001.0,V*1D
$GPGGA,123523,5000.000,N,01630.000,E,1,08,0.9,100.0,M,46.9,M,,*68 
```

所以我的问题是，在最后一行之后，当它应该读取 EOF 时，它停止在 line 上`line[i]=fgetc(stdin);`。即使我从文件复制该输入并将其粘贴到终端，或者即使我在终端中运行该程序`< input.txt`。但是当我在终端中运行它时，将输入粘贴到那里，然后手动添加`EOF` （^D）而不是停止..有人可以吗告诉我哪里有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:43:59.850

将 do-while 替换为 just while 并尝试。找到 EOF 后将检查条件，我的意思是，即使在 EOF 之后，您正在执行不正确的 fgetc(stdin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:10:02.973

```
#include <stdio.h>

int main(int argc, char *argv[]){
    char line[100+1];
    int ch;

    do{
        int i=0;
        while(EOF!=(ch=fgetc(stdin)) && ch !='\n' && i<100){
            line[i++]=ch;
        }
        line[i]='\0';
        if(*line){
            //Parsing input
            printf("<%s>\n", line);
        }
    }while(ch != EOF);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T12:13:36.280

您正在将最多 100 个字符读入 char line[]。`'\n'`您以在 or或 EOF中读取的 100 个字符终止；这是 的规范`fgets()`。

因此，请考虑使用与您的代码逻辑相匹配的一次调用 fgets()。,`fgets`等于：

```
while(fgets(line, 100, stdin)!=NULL )  // get up to \n or 100 chars, NULL return means usually EOF
{
   char *p=strchr(line, '\n');
   if(p!=NULL) *p=0x0;

   // parsing input
}
// here you should also check for NULL caused by system errors and not EOF -- maybe using feof(stdin) 
```

# asp.net - 如何在asp.net中的用户和sharepoint中的用户之间进行匹配

> ID：16081682
> 
> 赞同：0
> 
> 时间：2013-04-18T11:27:16.620
> 
> 标签：asp.net, sharepoint, spuser

我需要一个 asp.net 函数，它接受用户名和密码以及共享点链接，如果用户名和密码与共享点中的用户匹配，则返回 true

我尝试从 spuser 创建一个对象并检查登录名，但仍需要检查用户密码

但是 spuser 给了我所有关于用户的信息，除了它的密码:(

实际上我不想更改sharepoint中的任何数据，我只需要知道sharepoint中是否有用户具有相同的用户名和相同的密码

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:18:53.580

SharePoint 中使用的是什么身份验证？如果是 Windows 身份验证，则无法获取密码，因为密码哈希将存储在 Active Directory 中。没有办法获得密码。
但是，您可以验证用户/密码组合是否正确。
使用

> System.DirectoryServices.AccountManagement

查询 AD 的命名空间

检查这篇文章如何做到这一点。[关联](https://stackoverflow.com/questions/290548/validate-a-username-and-password-against-active-directory)

# c++ - 在回调和 main 之间传递一个变量

> ID：16081691
> 
> 赞同：1
> 
> 时间：2013-04-18T11:27:32.093
> 
> 标签：c++, class, boost, callback, shared-ptr

我将 ROS 与 C++ 一起使用，在从 void callback() 中的主题接收数据后，我需要将此数据传递给 int main() 中的变量。到目前为止，我发现我可以使用 boost 共享指针来做到这一点，并且应该使用“程序中的类，回调作为成员函数”。到目前为止我的部分代码：

```
double pos_z;
void callback(gazebo_msgs::LinkStates msgs_ls)
{
   double pos_z = msgs_ls.pose[43].position.z
   pos_z = pos_z + 1;
}
int main(int argc, char **argv)
{
   ros::init(...);
   ros::Nodehandle n;
   ros::Subscriber ls_sub = n.subscribe("/gazebo/link_states", 10, callback);
   ros::ServiceClient sls_client = n.serviceClient<gazebo_msgs::SetLinkState>("/gazebo/set_link_state");
   gazebo_msgs::SetLinkState setLinkState;
   while (ros::ok))
   {
      setLinkState.request.link_state.position.z = pos_z;
      sls_client.call(setLinkState);
  } 
```

关于共享指针：这可能是`boost::shared_ptr<double> a_ptr(&a, noop_delete`with`auto noop_delete = [](double *){}`但我真的不明白如何实现它。我也不清楚提到的具有回调作为成员函数的类。示例显示了使用 C 的实现，我不知道我是否可以使用它。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T12:44:56.283

你得到的建议很好：

> 使用“程序中的类，回调作为成员函数”

你这样做：

```
class SuperCoolRobot {
public:
  SuperCoolRobot ():pos_z(0) {
    // Note : we provide the callback (a member) + a state (this)
    ls_sub = n.subscribe("/gazebo/link_states", 10, SuperCoolRobot::link_state_callback, this);
  }

  void link_state_callback(gazebo_msgs::LinkStates msgs_ls) {
    pos_z = msgs_ls.pose[43].position.z + 1;
  }

  void run() {
    gazebo_msgs::SetLinkState setLinkState;
    while (ros::ok))
    {
      setLinkState.request.link_state.position.z = pos_z;
      sls_client.call(setLinkState);
    }
  }
protected:
  // state here
  ros::Nodehandle n;
  ros::Subscriber ls_sub;
  double pos_z;
}; 
```

然后主要：

```
int main(int argc, char **argv) {
  SuperCoolRobot robot;
  robot.run();
} 
```

请注意，我不了解 ROS，所以我只是抛出了我从您的代码中理解的内容。当然要调整。

# python - 在 Python 中不关闭打开的文件有什么后果？

> ID：16081692
> 
> 赞同：2
> 
> 时间：2013-04-18T11:27:36.207
> 
> 标签：python, file, io

我已经看到在 Python 中处理文件的最佳实践是使用该`with`块：

```
with open('file', 'r') as fi:
 text = fi.read()

with open('file', 'w') as fi:
  fi.write(text) 
```

这样，文件在您完成后会自动关闭。但我变得懒惰，在快速的一次性脚本中，我倾向于这样做：

```
text = open('file', 'r').read()
open('file', 'w').write(text) 
```

现在显然，如果我正在编写 Real Software™，我应该使用前者，但我想知道后者有什么后果（如果有的话）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T11:29:31.693

在 CPython 上：无；当文件的引用计数下降到 0 时，文件将被关闭，这是在`.read()`and`.write()`调用返回时立即关闭。

在其他不使用引用计数的 Python 实现中，该文件将保持打开状态，直到垃圾回收。

# c# - Python 将属性视为函数

> ID：16081694
> 
> 赞同：3
> 
> 时间：2013-04-18T11:27:44.033
> 
> 标签：c#, com, python-2.7

我有一个用 C# 编写的库，它是这样的

```
class FooCollection
    {
        private readonly FooBase _innerFoo;
        public FooCollection()
        {
            _innerFoo = new FooBase();
        }

        public string this[int index]
        {
            get { return _innerFoo._components[index].ComponentName; }
            set
            {
                _innerFoo._components[index].ComponentName = value;
            }
        }
    } 
```

这个类是 COM 可见的，我正在尝试从 Python 中使用它。所以，这个命令有效

```
foo(1) 
```

但是这个没有

```
foo(1) = 'SomeName' 
```

它给了我“无法分配给调用功能”。我试过方括号[]，但这不好。有没有办法绕过这个，除了我在 C# 中使用额外的“正常”方法来设置这个属性？

我在 Python 中将 pywin32-218 用于 COM。

```
foo = win32com.client.Dispatch("Foo") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:32:55.743

索引属性转换为`IL`，如

`FooCollection.get_Item`和`FooCollection.set_Item`，所以很可能在最终的 COM 对象中也被翻译了。

尝试使用这些函数调用。

希望这可以帮助。

# sql-server - 十六进制的 SQL Server 脚本生成器 CAST 日期时间值

> ID：16081697
> 
> 赞同：3
> 
> 时间：2013-04-18T11:27:48.093
> 
> 标签：sql-server

我需要从 SQL Server 生成插入脚本，当我使用 SQL Server 脚本生成器时，它会从十六进制转换日期时间值，例如

```
CAST(xxxxxxxxxxxxx as dateTime) 
```

我怎样才能避免这种情况？我想要脚本中的实际值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:27:01.230

不幸的是，这是不可能的，SQL Server 在内部生成十六进制值作为 DateTime 值。

这个十六进制值在逻辑上分为两组，一组是日期，另一组是时间。

例如 0x00009CEF00A25634 - 十六进制值。

日期部分：- 0x00009CEF（十进制 40175）

时间部分：- 00A25634（十进制 10638900）

如果您选择此十六进制值，例如，

```
select CAST (0x00009CEF00A25634 as datetime) 
```

它回来了，2009-12-30 09:51:03.000

我希望这个答案对你有所帮助。

谢谢。

# android - 在带有标签的 SherlockFragmentActivity 中使用 PreferenceFragment

> ID：16081706
> 
> 赞同：3
> 
> 时间：2013-04-18T11:28:17.230
> 
> 标签：android, tabs, actionbarsherlock, android-preferences

我正在尝试使用带有 ViewPager 的[ABS](http://actionbarsherlock.com/) SherlockFragmentActivity 进行选项卡式活动，并希望其中一个选项卡包含首选项活动/片段。

由于 ABS 没有 SherlockPreferenceFragment 或任何对 PreferenceFragment 的支持，我[找到](https://github.com/JakeWharton/ActionBarSherlock/issues/43)了使用[UnifiedPreference的可能解决方案](https://github.com/saik0/UnifiedPreference)

UnifiedPreference 可以自己工作，演示效果很好，但是如果我尝试在我的 ActionBarSherlock 支持的选项卡中实现它，它会崩溃并显示以下消息：

```
04-18 03:59:26.000: E/AndroidRuntime(8437): FATAL EXCEPTION: main
04-18 03:59:26.000: E/AndroidRuntime(8437): java.lang.ClassCastException: si.neanonimen.Settings$NetSettingsPrefsFragment cannot be cast to android.support.v4.app.Fragment
04-18 03:59:26.000: E/AndroidRuntime(8437):     at android.support.v4.app.Fragment.instantiate(Fragment.java:384) 
```

看起来`UnifiedPreferenceFragment`没有延伸`android.support.v4.app.Fragment`。有没有办法解决？有没有人设法得到一个有效的例子？

我目前的代码是：

设置：

```
public class Settings extends UnifiedSherlockPreferenceActivity {

    public static String tag = "Settings";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setHeaderRes(R.xml.pref_headers);
        super.onCreate(savedInstanceState); 
    }

    public static class NetSettingsPrefsFragment extends UnifiedPreferenceFragment {}
} 
```

选项卡式活动：

```
public class FragmentTabs extends SherlockFragmentActivity {
    private TabHost     mTabHost;
    private ViewPager   mViewPager;
    private TabsAdapter mTabsAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.fragment_tabs);
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();

        mViewPager = (ViewPager) findViewById(R.id.pager);

        mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

        // obviously THIS is the problem
        mTabsAdapter.addTab(mTabHost.newTabSpec("settings").setIndicator("Nastavitve"), Settings.NetSettingsPrefsFragment.class, null);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("tab", mTabHost.getCurrentTabTag());
    }

    public static class TabsAdapter extends FragmentPagerAdapter implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
        private final Context               mContext;
        private final TabHost               mTabHost;
        private final ViewPager             mViewPager;
        private final ArrayList<TabInfo>    mTabs   = new ArrayList<TabInfo>();

        static final class TabInfo {
            //private final String  tag;
            private final Class<?>  clss;
            private final Bundle    args;

            TabInfo(String _tag, Class<?> _class, Bundle _args) {
                //tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory {
            private final Context   mContext;

            public DummyTabFactory(Context context) {
                mContext = context;
            }

            @Override
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mTabHost = tabHost;
            mViewPager = pager;
            mTabHost.setOnTabChangedListener(this);
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
            tabSpec.setContent(new DummyTabFactory(mContext));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);
            mTabs.add(info);
            mTabHost.addTab(tabSpec);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        @Override
        public void onTabChanged(String tabId) {
            int position = mTabHost.getCurrentTab();
            mViewPager.setCurrentItem(position);
        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {}

        @Override
        public void onPageSelected(int position) {
            // Unfortunately when TabHost changes the current tab, it kindly
            // also takes care of putting focus on it when not in touch mode.
            // The jerk.
            // This hack tries to prevent this from pulling focus out of our
            // ViewPager.
            TabWidget widget = mTabHost.getTabWidget();
            int oldFocusability = widget.getDescendantFocusability();
            widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
            mTabHost.setCurrentTab(position);
            widget.setDescendantFocusability(oldFocusability);
        }

        @Override
        public void onPageScrollStateChanged(int state) {}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T11:47:44.580

我还需要在 Honeycomb（API 级别 11）之前的 Android 版本中实现 PreferenceFragment。正如您已经拥有的那样，我找到了 UnifiedPreference 库，但查看源代码我发现 UnifiedPreferenceFragment 从官方 Android API 扩展了 PreferenceFragment，因此不适用于 < API 级别 11。

这是我在那里发现的另一门课，但我还没有测试过：

*   [首选项列表片段](http://forum.xda-developers.com/showpost.php?p=19719977&postcount=1)

希望能帮助到你！

你找到另一个解决方案了吗？希望 Android 用户能尽快将这个类添加到支持库中！

干杯，

# ruby-on-rails - 未包含在列表错误中 - Rails

> ID：16081712
> 
> 赞同：0
> 
> 时间：2013-04-18T11:28:29.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以，我在我的应用程序中将 en 和 es 作为支持的语言环境。默认语言环境是 en。当我尝试在控制台中更改语言环境并保存对象时，我收到一条错误消息，指出语言环境不包含在列表中……但是在验证语言环境时，我已经包含了 :inclusion 属性……它指的是文件所在的文件语言环境已存储...关于错误可能是什么的任何想法？

我尝试在gui中更改语言环境..它有效。如果我可以在 gui 中更改它，我应该也可以在 rails 控制台中做同样的事情......我看到的所有关于“未包含在列表中”的文章都只让我找到了 :include 属性以及我尝试的任何内容，即使我给它

```
:inclusion { :in => %(en es) } 
```

它给出了同样的错误：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:21:43.113

您使用了错误的哈希语法。尝试

```
validates :my_field, :inclusion => { :in => %w(en es) } 
```

我实际上更喜欢`%w[en es]`括号。但两者都很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:32:10.740

尝试

```
 :inclusion { :in => %w(en es) } 
```

**（注意`w`！）**

# c# - _start.cshtml 视图未执行

> ID：16081714
> 
> 赞同：1
> 
> 时间：2013-04-18T11:28:42.847
> 
> 标签：c#, asp.net-mvc

我`Asp.Net MVC-4`在我的应用程序中使用。我创建了一个控制器，例如说*Person*并且在这个控制器中我有 3 个动作，例如说*GetName*、*GetAge*和*GetDateOfBirth*。现在我想要进行检查，以便未登录的用户无法访问这些操作视图。

为此，我正在尝试使用`_start.cshtml`视图。我把它放在里面`Views/Person/`，我希望每当任何用户从*Person*文件夹中访问任何视图时，`_start.cshtml`视图都应该在任何其他视图之前运行。在 *_start.cshtml* 中，我放置了一个代码来检查当前用户是否登录。但是 _star.cshtml 没有执行。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:31:39.100

> 现在我想要进行检查，以便未登录的用户无法访问这些操作视图

这绝对不是应该在视图中完成的事情，而是应该在控制器操作上完成，通过使用[`[Authorize]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)属性来装饰它们。例如：

```
[Authorize]
public ActionResult SomeAction()
{
    ...
} 
```

您还可以指定一个或多个角色：

```
[Authorize(Roles = "Admin")]
public ActionResult SomeAction()
{
    ...
} 
```

您还可以使用此属性装饰控制器，这意味着其中的所有操作都需要授权。

# java - ExecutorService 关闭

> ID：16081716
> 
> 赞同：12
> 
> 时间：2013-04-18T11:28:46.053
> 
> 标签：java, concurrency, java.util.concurrent

[我对ExecutorService#shutdown](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)方法的 javadoc 感到困惑。这些不是自相矛盾的说法吗？

> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。此方法不等待先前提交的任务完成执行。使用 awaitTermination 来做到这一点。

如果它可以有序地关闭之前提交的任务，那它怎么不能等待它们完成执行呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T11:32:22.613

这意味着该方法会立即在您调用它的线程中返回，但尚未执行的任务可能仍在其他线程中运行。

如果你想让你的程序等到之前提交的任务完成，你必须`awaitTermination`在调用`shutdown`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T11:32:40.050

这意味着任务将运行完成，但此方法将立即返回，而无需等待它发生。

因此，要在不终止任何任务的情况下干净地关闭执行程序，您将执行以下操作：

```
executor.shutdown();
executor.awaitTermination(long timeout, TimeUnit unit); 
```

或者，如果您只想尽快停止执行程序，请使用`shutdownNow()`.

# android - 自定义复选框图像被切断

> ID：16081718
> 
> 赞同：30
> 
> 时间：2013-04-18T11:28:52.140
> 
> 标签：android, checkbox

![复选框](https://i.stack.imgur.com/6gL0t.png)

如上图所示。此屏幕截图包含三个视图。
- 第一项`CheckBox`带有文本且状态为关闭。
- 第二个项目`CheckBox`没有文字并且有状态。
- 最后一项是`ImageView`src 指向可绘制图像。

CheckBoxes 是使用自定义的`android:button`。

![小复选框](https://i.stack.imgur.com/YliqZ.png)

当我尝试使用较小的图像时，所有复选框都是左对齐的。

比较这两个图像告诉我，默认大小`CheckBox`似乎固定为某个大小，直到文本属性大到足以需要扩展。

文件中也没有什么特别之处。见下文。

**custom_cb.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/creditcard_selected" android:state_checked="true" />
    <item android:drawable="@drawable/creditcard"/>

</selector> 
```

**布局.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
    <CheckBox android:id="@+id/cbFalse"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:button="@drawable/custom_cb"
              android:text="" />
    <CheckBox android:id="@+id/cbTrue"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:button="@drawable/custom_cb"
              android:focusable="false"
              android:checked="true"
              android:layout_toRightOf="@id/cbFalse" />
    <ImageView android:id="@+id/imvTrue"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:src="@drawable/creditcard"
              android:layout_toRightOf="@id/cbTrue" />
</RelativeLayout> 
```

无论如何我可以在保持尺寸不变的同时为 CheckBox 使用更大的图像`wrap_content`吗？如果我将 CheckBox 设置`layout_width`为实际像素或 dp，那么它会显示完整图像，但这意味着我必须在每次更改时手动检查大小。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-07-26T08:02:48.627

今天我遇到了同样的问题（我的自定义图像在左侧被切割）。我把它修好了：

```
android:button="@null"
android:background="@drawable/my_custom_checkbox_state.xml" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-08T14:45:02.793

只需使用

```
android:button="@null"
android:background="@null"
android:drawableLeft="your custom selector"
android:drawablePadding="as you need"
android:text="your text" 
```

就是这样..它工作正常..

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-31T11:24:04.007

您只需要将您的可绘制对象从 更改`android:button`为`android:drawableLeft`或`android:drawableRight`。并将按钮设置为 null 以不显示默认复选框。

我的复选框如下所示：

```
<CheckBox
   android:id="@+id/cb_toggle_switch"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:button="@null"
   android:drawableLeft="@drawable/livescore_btn_check" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-02T15:37:29.883

CheckBox drawables 根本不适合我，`android:button`并且`android:background`给出了完全不稳定的结果，没有什么可以解决它。

所以我写了我自己的“自定义复选框”。

```
import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Parcel;
import android.os.Parcelable;
import android.util.AttributeSet;
import android.util.TypedValue;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout;

import org.apache.commons.lang3.StringUtils;

import butterknife.Bind;
import butterknife.ButterKnife;
import com.example.myapp.R;

/**
 * Created by Zhuinden on 2015.12.02..
 */
public class CustomCheckbox
        extends LinearLayout
        implements View.OnClickListener {
    public CustomCheckbox(Context context) {
        super(context);
        init(null, -1);
    }

    public CustomCheckbox(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(attrs, -1);
    }

    @TargetApi(11)
    public CustomCheckbox(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init(attrs, defStyleAttr);
    }

    @TargetApi(21)
    public CustomCheckbox(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        init(attrs, defStyleAttr);
    }

    private void init(AttributeSet attributeSet, int defStyle) {
        TypedArray a = null;
        if(defStyle != -1) {
            a = getContext().obtainStyledAttributes(attributeSet, R.styleable.CustomCheckbox, defStyle, 0);
        } else {
            a = getContext().obtainStyledAttributes(attributeSet, R.styleable.CustomCheckbox);
        }
        defImageRes = a.getResourceId(0, 0);
        checkedImageRes = a.getResourceId(1, 0);
        checked = a.getBoolean(2, false);
        typeface = a.getString(3);
        if(StringUtils.isEmpty(typeface)) {
            typeface = "Oswald-Book.otf";
        }
        text = a.getString(4);
        inactiveTextcolor = a.getInteger(5, android.R.color.black);
        activeTextcolor = a.getInteger(6, android.R.color.red);
        textsize = a.getDimensionPixelSize(7, 0);
        a.recycle();
        setOnClickListener(this);
        if(!isInEditMode()) {
            LayoutInflater.from(getContext()).inflate(R.layout.view_custom_checkbox, this, true);
            ButterKnife.bind(this);
            imageView.setImageResource(checked ? checkedImageRes : defImageRes);
            typefaceTextView.setTypeface(typeface);
            if(!StringUtils.isEmpty(text)) {
                typefaceTextView.setText(text);
            }
            if(textsize != 0) {
                typefaceTextView.setTextSize(TypedValue.COMPLEX_UNIT_PX, textsize);
            } else {
                typefaceTextView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 12);
            }
        }
    }

    boolean checked;
    int defImageRes;
    int checkedImageRes;
    String typeface;
    String text;
    int inactiveTextcolor;
    int activeTextcolor;
    int textsize;

    OnCheckedChangeListener onCheckedChangeListener;

    @Bind(R.id.custom_checkbox_imageview)
    ImageView imageView;

    @Bind(R.id.custom_checkbox_text)
    TypefaceTextView typefaceTextView;

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
    }

    @Override
    public void onClick(View v) {
        checked = !checked;
        imageView.setImageResource(checked ? checkedImageRes : defImageRes);
        typefaceTextView.setTextColor(checked ? activeTextcolor : inactiveTextcolor);
        onCheckedChangeListener.onCheckedChanged(this, checked);
    }

    public void setOnCheckedChangeListener(OnCheckedChangeListener onCheckedChangeListener) {
        this.onCheckedChangeListener = onCheckedChangeListener;
    }

    public static interface OnCheckedChangeListener {
        void onCheckedChanged(View buttonView, boolean isChecked);
    }

    public boolean isChecked() {
        return checked;
    }

    public void setChecked(boolean checked) {
        this.checked = checked;
        imageView.setImageResource(checked ? checkedImageRes : defImageRes);
        typefaceTextView.setTextColor(checked ? activeTextcolor : inactiveTextcolor);
    }

    public void setTextColor(int color) {
        typefaceTextView.setTextColor(color);
    }

    @Override
    public Parcelable onSaveInstanceState() {
        //begin boilerplate code that allows parent classes to save state
        Parcelable superState = super.onSaveInstanceState();

        SavedState ss = new SavedState(superState);
        //end

        ss.checked = this.checked;
        ss.defImageRes = this.defImageRes;
        ss.checkedImageRes = this.checkedImageRes;
        ss.typeface = this.typeface;
        ss.text = this.text;
        ss.inactiveTextcolor = this.inactiveTextcolor;
        ss.activeTextcolor = this.activeTextcolor;
        ss.textsize = this.textsize;

        return ss;
    }

    @Override
    public void onRestoreInstanceState(Parcelable state) {
        //begin boilerplate code so parent classes can restore state
        if(!(state instanceof SavedState)) {
            super.onRestoreInstanceState(state);
            return;
        }

        SavedState ss = (SavedState) state;
        super.onRestoreInstanceState(ss.getSuperState());
        //end

        this.checked = ss.checked;
        this.defImageRes = ss.defImageRes;
        this.checkedImageRes = ss.checkedImageRes;
        this.typeface = ss.typeface;
        this.text = ss.text;
        this.inactiveTextcolor = ss.inactiveTextcolor;
        this.activeTextcolor = ss.activeTextcolor;
        this.textsize = ss.textsize;
    }

    static class SavedState
            extends BaseSavedState {
        boolean checked;
        int defImageRes;
        int checkedImageRes;
        String typeface;
        String text;
        int inactiveTextcolor;
        int activeTextcolor;
        int textsize;

        SavedState(Parcelable superState) {
            super(superState);
        }

        private SavedState(Parcel in) {
            super(in);
            this.checked = in.readByte() > 0;
            this.defImageRes = in.readInt();
            this.checkedImageRes = in.readInt();
            this.typeface = in.readString();
            this.text = in.readString();
            this.inactiveTextcolor = in.readInt();
            this.activeTextcolor = in.readInt();
            this.textsize = in.readInt();
        }

        @Override
        public void writeToParcel(Parcel out, int flags) {
            super.writeToParcel(out, flags);
            out.writeByte(this.checked ? (byte) 0x01 : (byte) 0x00);
            out.writeInt(this.defImageRes);
            out.writeInt(this.checkedImageRes);
            out.writeString(this.typeface);
            out.writeString(this.text);
            out.writeInt(this.inactiveTextcolor);
            out.writeInt(this.activeTextcolor);
            out.writeInt(this.textsize);
        }

        //required field that makes Parcelables from a Parcel
        public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
            public SavedState createFromParcel(Parcel in) {
                return new SavedState(in);
            }

            public SavedState[] newArray(int size) {
                return new SavedState[size];
            }
        };
    }
} 
```

使用以下`attrs.xml`

```
<resources
    <declare-styleable name="CustomCheckbox">
        <attr name="default_img" format="integer"/>
        <attr name="checked_img" format="integer"/>
        <attr name="checked" format="boolean"/>
        <attr name="chx_typeface" format="string"/>
        <attr name="text" format="string"/>
        <attr name="inactive_textcolor" format="integer"/>
        <attr name="active_textcolor" format="integer"/>
        <attr name="textsize" format="dimension"/>
    </declare-styleable>
</resources> 
```

具有以下`view_custom_checkbox.xml`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <ImageView
        android:id="@+id/custom_checkbox_imageview"
        android:layout_width="@dimen/_15sdp"
        android:layout_height="@dimen/_15sdp"
        />

    <com.example.TypefaceTextView
        android:id="@+id/custom_checkbox_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</merge> 
```

和例子：

```
 <com.example.CustomCheckbox
                            android:id="@+id/program_info_record_button"
                            android:layout_width="wrap_content"
                            android:layout_height="match_parent"
                            android:layout_centerHorizontal="true"
                            android:clickable="true"
                            android:gravity="center"
                            app:default_img="@drawable/ic_recording_off"
                            app:checked_img="@drawable/ic_recording_on"
                            app:text="@string/record"
                            app:inactive_textcolor="@color/program_info_buttons_inactive"
                            app:active_textcolor="@color/active_color"
                            app:textsize="@dimen/programInfoButtonTextSize"
                            app:chx_typeface="SomeTypeface.otf"/> 
```

必要时进行修改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T11:45:01.470

尝试使用水平方向的线性布局而不是相对布局。还可以在每个布局中使用权重来强制视图使用相同的宽度。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayoutxmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="horizontal"
          android:layout_width="match_parent"
          android:layout_height="match_parent">
<CheckBox android:id="@+id/cbFalse"
          android:weight="1"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:button="@drawable/custom_cb"
          android:text="" />
<CheckBox android:id="@+id/cbTrue"
          android:weight="1"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:button="@drawable/custom_cb"
          android:focusable="false"
          android:checked="true"
          android:layout_toRightOf="@id/cbFalse" />
<ImageView android:id="@+id/imvTrue"
          android:weight="1"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:src="@drawable/creditcard"
          android:layout_toRightOf="@id/cbTrue" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-24T16:00:02.873

也许它对某人有用，设置`gravity`属性来`center`帮助我避免图像裁剪：

```
<CheckBox
    android:id="@+id/cb_accept_agreement"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:button="@drawable/checkbox_selector"/> 
```

# c# - 将事件添加到级联更新

> ID：16081723
> 
> 赞同：1
> 
> 时间：2013-04-18T11:29:22.367
> 
> 标签：c#, .net, nhibernate

我在我的应用程序中使用流利的 NHinernate 和 cascade all 选项。

我有一个复杂的模型，其中包含一堆实体和关系。一切都由一个实体（合同）持有，它有一些其他实体的集合。这些实体具有对其他实体/实体列表的引用。

当我想保存整个事情时，我会这样做：

```
mySession.Save(myContract);
myTransaction.Commit() 
```

工作正常，通过级联保存所有实体。

问题是我需要在更新时设置属性 ModifiedBy、ModifiedTime 等。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:39:09.107

最简单的方法是为需要更新的属性创建一个接口：

```
public interface IAudit
{
    string ModifiedBy { get; set; }
    DateTime ModifiedTime { get; set; }
} 
```

然后添加一个`NHibernateInterceptor`来更新属性：

```
public class AuditInterceptor : EmptyInterceptor
{
    public override bool OnSave(object entity, object id, object[] state, string[] propertyNames, IType[] types)
    {
        var auditableEntity = entity as IAudit;
        if (auditableEntity != null)
        {
            auditableEntity.ModifiedTime = DateTime.Now;
            // ...
        }

        return base.OnSave(entity, id, state, propertyNames, types);
    }
// ...
} 
```

然后你需要告诉 NHibernate 使用拦截器，如果我没记错的话，它是按如下方式完成的：

```
var session = SessionFactory.OpenSession(new AuditInterceptor()); 
```

取决于您如何管理会话等，这将取决于它的去向，并且由于`AuditInterceptor`没有状态，它可以作为单例存在而不必担心多线程问题。

# python - 如何以及在哪里从 github 在 python 中安装模块

> ID：16081724
> 
> 赞同：2
> 
> 时间：2013-04-18T11:29:23.167
> 
> 标签：python, django, python-import

我需要从[github](https://github.com/nicoladj77/pyrise/)安装一个模块（pyrise） 。这是因为我需要修改它，然后提交更改并请求拉取请求。

如果我使用 pip 安装，我会得到通常的 pyrise 文件夹，其`__init__.py`位于根级别。

所以我用 pip 和 dis 取消安装（在`site-packages`文件夹中）

```
git clone git@github.com:nicoladj77/pyrise.git
cd pyrise
python setup.py install 
```

这正确安装了所有东西，但现在我有一个`pyrise`文件夹`site-packages`和另一个`pyrise`文件夹`pyrise`。第`pyrise`一个是空`__init__.py`的，因此当我这样做时

```
import pyrise 
```

我无法访问任何对象，因为正确的`__init__.py`是在第二个`pyrise`文件夹中。

我做错了什么？我是否将其安装在错误的目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:35:52.543

尝试安装它`develop`：

```
git clone git@github.com:nicoladj77/pyrise.git
cd pyrise
python setup.py develop 
```

# php - php - 通过链接将变量发送到下一页

> ID：16081728
> 
> 赞同：0
> 
> 时间：2013-04-18T11:29:34.543
> 
> 标签：php

我需要帮助。

在我的 index.php 中成功搜索结果后，如何将变量（在 url 内）调用到下一页 view.php，以便我可以查看变量的完整数据？

这是我的代码

“索引.php”

```
<form method="post" action="index.php?go" id="searchform">
<input type="text" name="name" size = "50">
<br/>
<input type="submit" name="submit" value="SEARCH">
<button type="reset" value="Reset">RESET</button>
</form>

<?php

    $db=mysql_connect ("localhost", "root", "") or die ('I cannot connect to the database because: ' . mysql_error()); 
    $mydb=mysql_select_db("emp_dbA");

    if(isset($_POST['submit'])){
    if(isset($_GET['go'])){
    if(preg_match("/[A-Z | a-z]+/", $_POST['name'])){
    $name=$_POST['name'];
    $letter=$_GET['by'];

    $sql="SELECT emp_ID, fname, lname,mname FROM emp_tbl WHERE fname LIKE '%" . $name . "%' OR lname LIKE '%" . $name ."%' OR mname LIKE '%" .$name . "%'";
    $result=mysql_query($sql);  
    $numrows=mysql_num_rows($result);

    echo "<p>" .$numrows . " results found for " . stripslashes($name) . "</p>"; 

    while($row=mysql_fetch_array($result)){

    $fname =$row['fname'];
    $mname =$row['mname'];
    $lname=$row['lname'];
    $ID=$row['emp_ID'];

        echo "<ul>\n"; 
        echo "<li>" . "<a href=\"view.php?id=$fname\">"  .$fname . " " . $mname. " " . $lname . "</a></li>\n";
        echo  "</ul>";
                                            }
                                                    }
        else{
        echo "<p>Please enter a search query</p>";
            }

                            }
    } 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:31:34.110

通过使用保留变量`$_GET`

```
$_GET['id'] 
```

[参考](http://php.net/manual/en/reserved.variables.get.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:33:32.267

您可以使用 GET 或 POST 将数据发送到下一页。

[http://www.tizag.com/phpT/postget.php](http://www.tizag.com/phpT/postget.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:33:39.900

如果您想在 index.php 页面上处理这些数据，$_SERVER['PHP_SELF'] 在这里可能会很好用。如果您想将它传递给 view.php，操作应该是：

```
<form action="view.php" method="POST"></form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:39:18.550

为什么不使用分页类？看看这个： http: [//phpsnaps.com/snaps/view/php-pagination-class/](http://phpsnaps.com/snaps/view/php-pagination-class/) PS。不推荐使用 mysql，请使用 mysqli。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T11:39:53.280

您使用 $_GET 环境变量获取 URL 参数，而您放入表单中的字段（假设您选择`post`作为表单方法）将被读取为`$_POST["name"]`.

作为一个小建议，尽量少使用 GET 方法。使用 GET 方法接收的参数在 URL 中可见，而从 POST 方法接收的参数则看不到。

当然，在实际使用之前清理所有 GET/POST 数据。

# performance - UITableView 图层阴影性能优化？

> ID：16081730
> 
> 赞同：1
> 
> 时间：2013-04-18T11:29:37.473
> 
> 标签：performance, uitableview, calayer, shadow, rasterizing

我有一个`UITableView`包含图层阴影的单元格，它们的子视图也有。总而言之，每个单元格大约有 5 个阴影。我重用了我的单元格，但是当内容超过某个高度时它们偶尔会改变它们的高度（我这么说是因为这可能会导致更多的绘制调用以及我在下面列出的“优化”）。

现在，我添加了以下优化：

```
// setting it opaque will tell the GPU not to blend the 
// layer (-> less draw calls - only useful when layer completely opaque obviously)
myShadowView.opaque = YES;

// another significant factor was the shadowPath property, 
// it significantly smoothed scrolling
myShadowView.layer.shadowOffset = CGSizeMake(0, -1);
myShadowView.layer.shadowOpacity = 0.08;
myShadowView.layer.shadowRadius = 1;
myShadowView.layer.shadowPath = [UIBezierPath bezierPathWithRect:shad.bounds].CGPath;

// the most important change
myShadowView.layer.shouldRasterize = YES;
myShadowView.layer.rasterizationScale = [UIScreen mainScreen].scale; 
```

我对性能非常满意——滚动就像婴儿皮肤一样光滑——但该`shouldRasterize`属性也有缺点。当我向下滚动时，单元格需要一点时间来加载位图。有没有办法预渲染这些单元格？没有重用标识符的表会解决这个问题吗？

我绝对需要阴影，但我不会为它们牺牲性能。我希望有人能提供帮助。

# php - 用于创建按钮的 KendoUI Grid 自定义弹出模板

> ID：16081736
> 
> 赞同：1
> 
> 时间：2013-04-18T11:29:58.287
> 
> 标签：php, kendo-ui, kendo-grid

我已经安装了带有 POPUP 选项的 KendoGrid。

现在我被困在某个地方，我找不到任何帮助来以我想要的方式修复它。

所以这是我在使用 KendoGrid 弹出窗口编辑时面临的问题。

当我单击添加新记录时，顶部的标题显示编辑，与单击编辑时显示的相同。

[http://jsfiddle.net/valchev/BCBzS/1/](http://jsfiddle.net/valchev/BCBzS/1/)

按钮也显示更新，而不是创建弹出窗口上的保存按钮..

我想我必须在下面添加更多类似的东西来创建新记录..

```
editable: {
    mode: "popup",
    template: kendo.template($("#popup_editor").html())
}, 
```

并且弹出创建模板与编辑模板不同？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T13:41:06.790

如果您查看弹出编辑的[演示页面](http://demos.kendoui.com/web/grid/editing-popup.html)，这似乎是正常行为......

但是您可以欺骗并使用`edit`网格事件来改变它。只需在此事件的开头添加以下代码：

```
if(!e.model.Id) {
    $(".k-window .k-window-title").text("Add new record");
    $(".k-window .k-grid-update").html("<span class=\"k-icon k-update\"></span>Create");
} 
```

请参阅更新的[jsFiddle](http://jsfiddle.net/BCBzS/265/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:32:24.430

您可以使用 Kendo UI 网格本地化来更改弹出标题。

要更改`Edit`标题，您应该在网格中定义：

```
editable  : {
    mode : "popup",
    window : {
        title: "Create",
    }
}, 
```

为了改变按钮的标签，我们需要做一些小技巧......这些标签可以本地化`column.command`如下：

```
columns   : [
    {
        command: [
            {
                name: "edit",
                text: { edit: "Modify", update: "Save", cancel: "Cancel"}
            }
        ],
    },
    ... 
```

问题是窗口标题和按钮标签在编辑和创建按钮之间共享，因此更改一个您会更改两者。你能找到一些对两者都有效的标签吗？

看它在[JS Fiddle中运行](http://jsfiddle.net/OnaBai/BCBzS/267/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T04:54:21.557

通过添加以下代码来做到这一点

```
 edit: function (e) { if (!e.model.isNew()) {
                                e.container.kendoWindow("title", "Update Address");
                            } else {
                                e.container.kendoWindow("title", "New Address");
                            }
                        } 
```

# node.js - PEGjs：如果浮点规则失败，则回退（回溯？）到字符串

> ID：16081737
> 
> 赞同：0
> 
> 时间：2013-04-18T11:29:59.317
> 
> 标签：node.js, grammar, peg, pegjs

我有一条`atom`规则，它首先尝试将所有内容解析为数字或带引号的字符串，如果失败，则将其视为字符串。

一切都很好解析，除了一个特殊的情况是这个非常具体的字符串：

`DUD 123abc`

无法解析`Expected " ", "." or [0-9] but "a" found.`错误。

我的期望：它应该成功解析并将字符串“123abc”作为字符串原子返回。您可以在下面的语法内容中看到我的几个不成功的尝试被注释掉了。

任何帮助/提示/指针/建议表示赞赏！

* * *

你可以在[网上的 PEG.js 版本](http://pegjs.majda.cz/online)上试试语法。我正在使用节点 v0.8.23 和 pegjs 0.7.0

正确解析的数字：

*   `123
*   `0
*   `0。
*   `1。
*   `.23
*   `0.23
*   `1.23
*   `0.000
*   `.` <--- 作为字符串，不是数字，也不是错误

我想`123abc`被解析为字符串，这可能吗？

* * *

这是我的整个语法文件：

```
start = lines:line+ { return lines; }

// --------------------- LINE STRUCTURE
line = command:command eol { return command; }

command = action:atom args:(sep atom)*
{
  var i = 0, len = 0;

  for (var i = 0, len = args.length; i < len; i++) {
    // discard parsed separator tokens
    args[i] = args[i][1];
  }

  return [action, args];
}

sep = ' '+
eol = "\r" / "\n" / "\r\n"

atom = num:number { return num; }
     / str:string_quoted { return str; }
     / str:string { return str; }

// --------------------- COMMANDS

// TODO:

// --------------------- STRINGS
string = chars:([^" \r\n]+) { return chars.join(''); }

string_quoted = '"' chars:quoted_chars* '"' { return chars.join(''); }
quoted_chars = '\\"' { return '"'; }
             / char:[^"\r\n] { return char; }

// --------------------- NUMBERS
number = integral:('0' / [1-9][0-9]*) fraction:("." [0-9]*)?
{
  if (fraction && fraction.length) {
    fraction = fraction[0] + fraction[1].join('');
  } else {
    fraction = '';
  }

  integral = integral instanceof Array ?
    integral[0] + integral[1].join('') :
    '0';

  return parseFloat(integral + fraction);
}
        / ("." / "0.") fraction:[0-9]+
{
  return parseFloat("0." + fraction.join(''));
}

/*
float = integral:integer? fraction:fraction { return integral + fraction; }

fraction = '.' digits:[0-9]* { return parseFloat('0.' + digits.join('')); }

integer = digits:('0' / [1-9][0-9]*)
{
  if (digits === '0') return 0;
  return parseInt(digits[0] + digits[1].join(''), 10);
}

*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:03:26.520

通过添加规则`!([0-9\.]+[^0-9\.])`的前瞻来解决这个问题`number`。

我知道`atom`规则会匹配，所以它的有效作用是让`number`规则更快地失败。希望这可以帮助将来有歧义的人。

所以现在的数字规则变成了：

`number = !([0-9\.]+[^0-9\.]) integral:('0' / [1-9][0-9]*) fraction:("." [0-9]*)?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:47:13.063

我认为检查字符尾随`number`是数字分隔符（不是字母数字）也可以，而且更便宜。

```
number = integral:('0' / [1-9][0-9]*) fraction:("." [0-9]*)? !([0-9A-Za-z]) 
```

# c++ - OpenGL 纹理在 3.3 中都是黑色的 - 但在 3.1 中有效

> ID：16081748
> 
> 赞同：3
> 
> 时间：2013-04-18T11:30:32.737
> 
> 标签：c++, opengl, glsl

我目前正在使用 OpenGL3.3 制作一个简单的 3D 场景，但是在尝试对对象进行纹理处理时 - 所有这些对象都被纹理化为完全黑色。但是，如果我将上下文版本更改为 3.1；在模型上正确渲染纹理没有问题。

我不确定这是否表明我正在使用已弃用的功能/方法，但我正在努力找出问题所在。

**设置纹理**

```
(load texture from file)
...
glGenTextures(1, &TexID);               // Create The Texture ( CHANGE )
glBindTexture(GL_TEXTURE_2D, TexID);

glTexImage2D(GL_TEXTURE_2D, 0, texture_bpp / 8, texture_width, texture_height, 0, texture_type, GL_UNSIGNED_BYTE, texture_imageData);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
... 
```

**将纹理绑定到渲染**

```
// mLocation is the layout location in the shader, from glGetUniformLocation
// mTextureUnit is the specified texture unit to load into. Currently using 0.
// mTextureID is the ID of the loaded texture, as generated above.
glActiveTexture( GL_TEXTURE0 + mData.mTextureUnit );
glBindTexture( GL_TEXTURE_2D, mData.mTextureID );
glUniform1i( mLocation, mData.mTextureUnit ); 
```

**片段着色器**

```
uniform sampler2D diffusemap;
in vec2 passUV;
out vec3 outColour;
...
outColour = texture( diffusemap, passUV ).rgb; 
```

所有使用的纹理都是 2 的幂，正方形大小。

* * *

显示问题的图像。

GL3.1：http: [//i.imgur.com/NUgj6vA.png](http://i.imgur.com/NUgj6vA.png)

GL3.3：http: [//i.imgur.com/oOc0jcd.png](http://i.imgur.com/oOc0jcd.png)

* * *

**顶点着色器**

```
#version 330 core

uniform mat4 p;
uniform mat4 v;
uniform mat4 m;

in vec3 vertex;
in vec3 normal;
in vec2 uv;

out vec3 passVertex;
out vec3 passNormal;
out vec2 passUV;

void main( void )
{
    gl_Position = p * v * m * vec4( vertex, 1.0 );

    passVertex = vec3( m * vec4( vertex, 1.0 ) );
    passNormal = vec3( m * vec4( normal, 1.0 ) );
    passUV = uv;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:01:56.947

在行中：

```
glTexImage2D(GL_TEXTURE_2D, 0, texture_bpp / 8, texture_width, texture_height, 0, texture_type, GL_UNSIGNED_BYTE, texture_imageData); 
```

(texture_bpp / 8) 将返回正确格式类型的假设是不正确的。它应该是指定内部格式的 GLenum 值之一，例如 GL_RGBA。

将其更正为（或与纹理文件的内部格式匹配的任何格式）完全修复了该问题并适用于 GL3.3 和 GL3.1：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, texture_width, texture_height, 0, texture_type, GL_UNSIGNED_BYTE, texture_imageData); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T10:24:06.963

为了完整起见，[纹理的内部格式](http://www.opengl.org/wiki/Image_Format)应该是枚举器。并且是一个*大小的*枚举器，而不是一个大小不一的枚举器。`GL_RGB`可以使用时请停止使用`GL_RGB8`。

> 回答正确地识别了问题，但它会帮助解释为什么前面的假设适用于 3.1 而不是 3.3。

在 [1, 4] 范围内使用数字的功能在 OpenGL 3.0 中已被弃用，并在 OpenGL 3.1 中被删除。*但是*，当时并没有办法说“给我OpenGL 3.1版的实际核心配置文件”；s不`WGL/GLX_CONTEXT_CORE_PROFILE_BIT_ARB`存在。因此，当您获得 3.1 上下文时，实现导出[`ARB_compatibility`扩展名](http://www.opengl.org/registry/specs/ARB/compatibility.txt)是完全合法的，这仍然允许所有已删除的功能。

在 3.2 中，[显式选择配置文件](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts)的功能被添加到 OpenGL。在这一点上，你不会让某人`ARB_compatibility`在核心配置文件中暴露。这就是为什么您的代码在您要求 3.1 时有效（因为它可以免费为您提供 3.1 兼容性），但在您要求 3.3 核心配置文件时却不行。

# sql - 在 SQL 中比较日期的问题

> ID：16081752
> 
> 赞同：-2
> 
> 时间：2013-04-18T11:30:40.027
> 
> 标签：sql, oracle, date, sysdate

我有一个包含以下列的表格

有效开始日期
有效
结束日期人员ID

这是在 Oracle DB 上。
我正在编写一个查询，以使用以下查询让我在当前 sysdate 中处于活动状态。

```
select startDate, endDate, sysdate
from dateTable
where sysdate between startDate and endDate; 
```

问题是这个 where 子句似乎永远不会被应用。结果包含不满足此条件的行。关于我可能遗漏的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:41:48.607

您的查询看起来不错，正如 APC 建议的那样，这是一种常见模式。这意味着您有数据问题。显示全年将显示为什么意外记录匹配，以及任何“坏”日期 - 例如使用意外的世纪，当使用`YY`格式掩码操作日期时，这不是一个不寻常的问题：

```
select to_char(startDate, 'YYYY-MM-DD HH24:MI:SS') as startDate,
    to_char(endDate, 'YYYY-MM-DD HH24:MI:SS') as endDate, sysdate
from dateTable
where sysdate between startDate and endDate; 
```

在您已经注意到的评论中，这显示了来自 的日期`4712`，这显示为仅`12`使用您的`YY-MON-DD`日期格式掩码。我还没有完全看到，更常见的是`0012`or `1912`，但是带有`endDate`in的记录`4712`肯定在 之后结束`sysdate`。可能值得验证表中的所有日期，而不仅仅是那些被该`where`子句标记的日期。

# python - 重定向到在 Flask (Python) 中包含“变量部分”的 URL

> ID：16081754
> 
> 赞同：11
> 
> 时间：2013-04-18T11:30:44.187
> 
> 标签：python, redirect, python-2.7, flask, url-routing

我正在尝试重定向到 Flask 中的 URL。我试图重定向到的目标 URL 有一个像这样的变量`/dashboard/<username>`，它的视图如下，

```
@app.route('/dashboard/<username>')
def dashboard(username):
    return render_template('dashboard.html', username=username) 
```

如何使用 Flask 的`redirect()`&`url_for()`函数重定向到这个 URL。我试过这个，

```
return redirect(url_for("index")) 
```

这很好用，因为 index 是`/index`我的应用程序中没有任何可变部分 ( ) 的 URL。但是，对于具有可变路径的 URL，我该如何做呢？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T11:39:57.220

您将希望`url_for`通过以下方式为 URL 参数提供 URL 名称、关键字`arg`和值来创建 URL：

```
return redirect(url_for('dashboard', username='foo')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T12:22:31.653

'.dashboard'这一点很重要

```
return redirect(url_for('.dashboard', username='foo')) 
```

# c# - 为什么我无法在 C# 中使用 UdpClient 接收发送到 localhost 的文本？

> ID：16081775
> 
> 赞同：0
> 
> 时间：2013-04-18T11:31:38.223
> 
> 标签：c#, udp, udpclient

我正在尝试用 C# 编写一个简单的 UDP 程序，该程序在 localhost 上发送和接收数据。我是 C# 的初学者，但在 MATLAB 方面要好得多，所以我决定使用 C# 发送数据并在 MATLAB 中接收数据，而不是用 C# 编写服务器和客户端。

我尝试了两种发送数据的方法。使用 Socket 类有效，但使用 UdpClient 类失败。

在运行这段代码之前，我运行了 MATLAB 代码来设置回调函数来打印接收到的数据报。

每次运行中只有一个区域处于活动状态。我注释掉另一个。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net.Sockets;
using System.Net;

namespace udp1
{
    class Program
    {
        const int port = 62745; //Chosen at random
        static void Main(string[] args)
        {
            string str = "Hello World!";
            byte[] sendBytes = Encoding.ASCII.GetBytes(str);

            #region 1 Send data using socket class
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), port);
            sock.SendTo(sendBuff, ipEndPoint);
            Console.ReadLine();
            #endregion

            #region 2 Send data using UdpClient class
            UdpClient sendingClient = new UdpClient(port);
            sendingClient.Send(sendBytes, sendBytes.Length);
            #endregion
        }
    }
} 
```

我正进入（状态

> 每个套接字地址（协议/网络地址/端口）通常只允许使用一次

在区域 2 中运行代码时出错。

但是，当我在区域 1 中运行代码时，一切正常，并且我在 MATLAB 中接收数据没有任何问题。

* * *

这是我的 MATLAB 代码。我在其他应用程序中使用过这段代码，所以我非常怀疑它有什么问题。

```
fclose(instrfindall); %Close all udp objects
%UDP Configuration
udpConfig.ipAddress = '127.0.0.1';
udpConfig.portAddress = 62745;

udpObj = udp(udpConfig.ipAddress, udpConfig.portAddress, ...
    'LocalPort',        udpConfig.portAddress, ...
    'ByteOrder',        'bigEndian');

set(udpObj, 'datagramTerminateMode', 'on');
set(udpObj, 'datagramReceivedFcn', {@cbDataReceived, udpObj});

fopen(udpObj); 
```

以及回调函数：

```
function cbDataReceived(hObj, eventdata, udpObj)
    bytesAvailable = get(udpObj, 'BytesAvailable');
    receivedDatagram = fread(udpObj, bytesAvailable);
    disp(char(receivedDatagram));
end 
```

* * *

那么，为什么我在 UdpClient 案例中得到错误，而在 Socket 案例中没有得到它？有没有办法避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:58:44.410

我了解到您在同一台计算机上为 MATLAB 和 C# 使用相同的端口。因此，操作系统不允许从不同的应用程序打开相同的端口。

UDP 允许从不同的端口发送和接收数据报，因此如果两个应用程序在同一台计算机上运行，​​则为不同的应用程序使用不同的端口。

```
UdpClient sendingClient = new UdpClient(62746); // Some different port to listen
sendingClient.Send(sendBytes, sendBytes.Length, ipEndPoint); 
```

# tsql - 非常简单的批量插入为 CSV 中的每一行插入 NULL

> ID：16081778
> 
> 赞同：0
> 
> 时间：2013-04-18T11:31:48.303
> 
> 标签：tsql, bulkinsert

我能听到你说：那没那么简单，不是吗。

这是表格：

```
CREATE TABLE [bulkimport].[Test](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Data] [nvarchar](50) NULL,
 CONSTRAINT [PK_Test_1] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

这是tsql：

```
TRUNCATE TABLE bulkimport.Test

BULK INSERT bulkimport.Test 
FROM 'D:\Referenzliste_VKnr.csv' 
WITH (
    FORMATFILE='D:\VKnrImport.xml', 
    CODEPAGE=28591,
    ERRORFILE='D:\VKnrImportError.txt'
) 
```

我的配置文件如下所示：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <RECORD>
        <FIELD ID="1" xsi:type="CharTerm" TERMINATOR="\r\n" COLLATION="SQL_Latin1_General_CP1_CI_AS" />
    </RECORD>
    <ROW>
        <COLUMN SOURCE="1"  NAME="Data" LENGTH="50" xsi:type="SQLNVARCHAR" />
    </ROW>
</BCPFORMAT> 
```

最后，数据摘录：

```
18
26
34
42
59
67
75
83
91
109
117
125
133 
```

每行后面都有一个回车换行符，最后留下一个空行。我使用 SQL Server 2012 为 csv 文件中的每个条目得到一个 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:39:53.880

你的问题不是这个问题的完全重复[（](https://stackoverflow.com/questions/8347254/bcp-import-error-with-xml-format-file-and-identity-column)你没有得到任何错误），但它是同一个问题。正如文档[所说](http://msdn.microsoft.com/en-us/library/ms179250.aspx)：

> 对于 XML 格式文件，当您使用 bcp 命令或 BULK INSERT 语句直接导入表时，不能跳过列。但是，您可以导入到表的最后一列以外的所有列。如果必须跳过除最后一列以外的任何列，则必须创建目标表的视图，该视图仅包含数据文件中包含的列。然后，您可以将该文件中的数据批量导入到视图中。

也就是说，使用 XML 格式文件时，只能跳过表中的*最后一列。*但是您正试图跳过该`Id`列，即*第一*列。

两种解决方案是：

*   使用非 XML 格式文件
*   使用[OPENROWSET](http://msdn.microsoft.com/en-us/library/ms190312.aspx)

当我使用这个非 XML 格式文件时，您的数据加载得很好：

```
10.0
1
1       SQLCHAR             0       100     "\r\n"   2     Data         Latin1_General_CI_AS 
```

但是`OPENROWSET`更灵活，因为您可以使用 对`SELECT`列重新排序或以其他方式操作来自平面文件的数据。

# .net - WCF 通过 IHttpModule 设置 Thread.CurrentPrincipal

> ID：16081779
> 
> 赞同：1
> 
> 时间：2013-04-18T11:31:48.733
> 
> 标签：.net, wcf, authentication, ihttpmodule

我有 aspNetCompatibility = "true" 的 wcf + rest web 服务。为了提供自定义身份验证，我编写了 asp.net http 模块：IHttpModule。代码非常简单：只需将一些主体分配给 Thread.CurrentPrinicpal 属性。

在方法执行期间，我仍然将“空/默认”主体作为 Thread.CurrentPrincipal 的值。我还注意到模块和操作执行中有不同的线程 ID（Thread.CurrentThread）。我建议 wcf 提供一个新线程来执行操作，但没有找到任何证据。

所以问题是：我是对的吗？wcf 是否允许控制该行为？我在这里很困惑，因为创建新线程会自动将主体移动到新线程。因此 wcf '清理'他们..

与 principalPermissionMode="None" 相同的问题。

我会很感激任何想法！

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:14:19.343

IMO - 当您从已经坐过的线程运行它时，线程将收到委托人。

Wcf 确实以自己的方式管理线程（部分由 InstanceMode 控制 - PerCall、PerSession、...）。所以他们不会传播你的线程细节。

可能您应该考虑使用其他模型进行身份验证。有关自定义身份验证的更多详细信息，请参阅此帖子：http: [//blogs.msdn.com/b/astoriateam/archive/2010/07/21/odata-and-authentication-part-6-custom-basic-authentication.aspx](http://blogs.msdn.com/b/astoriateam/archive/2010/07/21/odata-and-authentication-part-6-custom-basic-authentication.aspx)

# android - 服务未正确关闭

> ID：16081783
> 
> 赞同：1
> 
> 时间：2013-04-18T11:31:53.140
> 
> 标签：android, service

我有一个 android 应用程序，它使用以下命令在主要活动中启动服务：

```
bindService(new Intent(ctx, MyService.class), _connection, Context.BIND_AUTO_CREATE); 
```

主要活动对这项服务没有任何作用（这就是我没有提供服务连接代码的原因）。这个想法是主要活动处理服务生命周期！

用户单击我的应用程序的“关闭”按钮后，它会使用此代码“停止”服务：

```
if (_service != null) {
    unbindService(_connection);
}
//Some cleanup here ...
System.exit(0); 
```

我知道此时没有其他活动绑定到服务，因为每个活动都是从主活动调用的，并且它们在“onStop”处与服务解除绑定。

所以问题是当用户关闭应用程序时，我的服务不会调用“onDestroy”！当我删除“System.exit(0)”行时，它会正常关闭！

在这种情况下，如何确保服务正确关闭？

**编辑：**

好的，我阅读了这个讨论：[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238#2034238).

现在我重建我的活动。我有一个使用 startService 调用服务的活动，之后它绑定了服务。当活动被销毁时，它会调用 unbindService。

服务本身在 onStartCommand 中返回 START_STICKY 以使其更难杀死它。完成所有工作后，它会调用 stopSelf。

现在我遇到的问题是，如果绑定仍然存在，我会收到 ServiceConnectionLeaked 消息！那是怎么回事？我怎么能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:30:11.123

使用`finish()`代替`System.exit(0)`

# php - 我的 html 页面中的活动元素出现问题

> ID：16081784
> 
> 赞同：0
> 
> 时间：2013-04-18T11:31:54.763
> 
> 标签：php, html, css, class, styles

我正在寻找一种方法来使用 CSS 将显示属性更改为与当前活动页面相关的导航元素。

例如，如果用户在主页上，则导航中的“主页”按钮的样式会有所不同。

我使用以下代码：

```
<li class="active">
    <a href="<?php echo $sito ?>/index.php">Home</a>
</li>
<li>
    <a href="<?php echo $sito ?>/page1.html">page1</a>
</li>
<li>
   <a href="<?php echo $sito ?>/page2.html">page2</a>
</li> 
```

当我选择 page1 或 page2 时，主页按钮保持活动状态！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:36:48.990

用这个

```
var $links = $('li');
$links.click(function(){
   $links.removeClass('active');
   $(this).addClass('active');
}); 
```

**[演示](http://jsfiddle.net/KwdwZ/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:37:25.350

```
<li <?php if($page=='home'){?> class="active"<?php }?>>
    <a href="<?php echo $sito ?>/index.php">Home</a>
</li>
<li <?php if($page=='page1'){?> class="active"<?php }?>>
    <a href="<?php echo $sito ?>/page1.html">page1</a>
</li>
<li <?php if($page=='page2'){?> class="active"<?php }?>>
   <a href="<?php echo $sito ?>/page2.html">page2</a>
</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:37:34.320

据我了解-您有一个静态页面。如果是这样 - 只需在 page1.html 和 page2.html 中添加`class="active"`对应的`<li>`

在 page1.html 中，它将是第二个`<li>`元素，但在 page2.html 中 - 最后一个

# c# - 在我的 ComboBox 中更改 SharpPcap ICaptureDevice 属性

> ID：16081785
> 
> 赞同：1
> 
> 时间：2013-04-18T11:31:57.690
> 
> 标签：c#, winforms

为了接收我正在使用的所有机器适配器：

```
CaptureDeviceList adapters = CaptureDeviceList.Instance; 
```

这将返回所有可用适配器的列表。

这是我的组合框适配器 SelectedIndexChanged 方法：

```
private void cbAdapter_SelectedIndexChanged(object sender, EventArgs e)
{
    ComboBox cmb = sender as ComboBox;
    ICaptureDevice selectedAdapter = cmb.SelectedItem as ICaptureDevice;
    adapter = cbAdapter.SelectedIndex;
    ICaptureDevice selectedNic = cbAdapter.SelectedItem as ICaptureDevice;
} 
```

在此命令之后，组合框在里面显示我的接口名称，但名称带有附加字符，例如：`interface: Name: rpcap://\Device\NPF_{53418AFD-2965-4F99-BCAA-ECFB8B993B7B}`

我的问题：是否可以将此适配器 ID 编辑为类似`{53418AFD-2965-4F99-BCAA-ECFB8B993B7B}`或什至使用其他适配器属性（例如名称而不是 ID）？

# java - Java构造函数链接和避免代码重复

> ID：16081790
> 
> 赞同：0
> 
> 时间：2013-04-18T11:32:11.613
> 
> 标签：java

我有不可变的类，并且想要添加新的构造函数而不在两个构造函数中复制代码。

我有课：

```
public class Test {
    private final String stringParameter;

    public Test() {
        stringParameter = "firstReallyLongDefaultString";
    }

    public Test(String s) {
        stringParameter = s;
    }
} 
```

我想添加带有“char”参数的新构造函数，如下所示：

```
public Test(char s) {
    if(Character.isLetter(s)) {
        stringParameter = "firstReallyLong" + s + "DefaultString";
    } else {
        stringParameter = "firstReallyLongDefaultString";
    }
} 
```

如果没有长字符串的代码重复，我该怎么做？我想在 else 分支中调用“this()”构造函数，但这是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:37:44.490

```
public Test(char s) {
    this(Character.isLetter(s) ? "firstReallyLong" + s + "DefaultString" : "firstReallyLongDefaultString");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:35:37.347

像这样：

```
public Test(char s) {
    super();
    if(Character.isLetter(s)) {
        stringParameter = "firstReallyLong" + s + "DefaultString";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:41:21.823

您还可以更明确地链接它们，删除一些代码重复：

```
public class Test {
    private static final String DEFAULT_VALUE = "firstReallyLongDefaultString";
    private final String stringParameter;

    public Test() {
        this(DEFAULT_VALUE);
    }

    public Test(String s) {
        stringParameter = s;
    }

    public Test(char c) {
        this(prepareString(c));
    }

    private static String prepareString(char c) {
        if(Character.isLetter(s)) {
            return "firstReallyLong" + s + "DefaultString";
        } else {
            return DEFAULT_VALUE;
        }
    }

} 
```

`"firstReallyLongDefaultString"`最好作为私有常量来避免重复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T12:12:45.313

工厂方法为您提供了更大的灵活性：

```
public static Test create(char c) {
    final String parameter;
    if(Character.isLetter(s)) {
        parameter = "firstReallyLong" + s + "DefaultString";
    } else {
        parameter = "firstReallyLongDefaultString";
    }
    return new Test(parameter);
} 
```

这不能在子类中继承，但是如果您希望您的类是严格不可变的，它应该是最终的。

# c# - 在 WPF 中设计可重用查询编辑器的好方法是什么？

> ID：16081791
> 
> 赞同：0
> 
> 时间：2013-04-18T11:32:11.940
> 
> 标签：c#, wpf, mvvm, filter, custom-controls

我正在考虑创建一个非常基本的查询编辑器（或者它可以称为数据过滤器），您可以使用它来使用 和 创建基本`AND`查询`OR`。如下所示：

(`FirstName`等于`Brown`AND`LastName`以 开头`L`) OR`Age`小于`10`

这将是一个可视化查询编辑器，类似于[Telerik 的数据过滤器](http://www.telerik.com/products/wpf/datafilter.aspx)。

我想知道如何为这样的控件设计一个 API，以便它可以重用并轻松连接到不同的情况。

***我在想***的是查询编辑器首先会获取列名和列类型。所以也许它可以得到类似的东西`List<KeyValuePair<string, Type>`。

然后对于我当前的项目，我需要获取一个 SQL 表示，因此可以有一个方法返回 SQL 查询的“WHERE”部分。但这不是很可重用。如果有别的东西需要用到这个控件，就需要先解析控件返回的SQL语句。

我想从你那里得到想法，有什么好方法可以使这个东西可重复使用？它应该以什么形式返回结果查询？我对 WPF 很陌生，所以我想知道是否有一些很酷的通用方法可以用于生成的查询。

而且我现在正在学习 MVVM，所以如果你能指出我如何使这个东西在 MVVM 项目中可用的方向，那就太好了。

# objective-c - 如何在iOS中解析JSON数组中的soap响应

> ID：16081792
> 
> 赞同：-3
> 
> 时间：2013-04-18T11:32:16.363
> 
> 标签：objective-c

如何解析 JSON 数组soap响应字符串中的soap响应：-

NSString *string=@"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\ "http://www.w3.org/2001/XMLSchema\">http://tempuri.org/\">[{\"rest_id\": 1, \"rest_name\": \"canteen 21\" , \"rest_address\": \"janakpuri\",\"clientid\": 1, \"rest_lat\": \"28.619713\",\"rest_long\": \"77.088404}]";

```
NSData *webData = [string dataUsingEncoding:NSASCIIStringEncoding];
NSError *e = nil;
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: webData options: NSJSONReadingAllowFragments error: &e]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:35:52.323

使用 NSJSONSerialization 。

根据文档，您使用 NSJSONSerialization 类将 JSON 转换为 Foundation 对象并将 Foundation 对象转换为 JSON。

[{\"rest_id\": 1, \"rest_name\": \"canteen 21\", \"rest_address\": \"janakpuri\",\"clientid\": 1, \"rest_lat\": \ "28.619713\",\"rest_long\": \"77.088404}]"

这部分是 json，它可以被解析，所以让代码把这部分变成一个字符串并进行解析

# python - Python中的对角矩阵指数

> ID：16081797
> 
> 赞同：2
> 
> 时间：2013-04-18T11:32:32.987
> 
> 标签：python, matrix, numpy, scipy, exponential

我正在编写一个考虑速度的数值算法。我在 scipy/numpy (scipy.linalg.expm2, scipy.linalg.expm) 中遇到了两个矩阵指数函数。但是，我有一个事先知道是对角线的矩阵。这些 scipy 函数在运行之前是否检查矩阵是否对角线？显然，对于对角矩阵，求幂算法可以更快，我只是想确保它们在做一些聪明的事情——如果不是，有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:16:51.167

如果一个矩阵是对角矩阵，那么它的指数可以通过对主对角线上的每个条目取幂来获得，所以你可以通过以下方式计算它：

```
np.diag(np.exp(np.diag(a))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T12:20:58.683

如果您知道 A 是对角线并且您想要 k 次方：

```
def dpow(a, k):
    return np.diag(np.diag(a) ** k) 
```

检查矩阵是否对角线：

```
def isdiag(a):
    return np.all(a == np.diag(np.diag(a))) 
```

所以 ：

```
def pow(a, k):
    if isdiag(a):
        return dpow(a, k)
    else:
        return np.asmatrix(a) ** k 
```

类似地，对于指数（您可以从一组 pow 的扩展数学上得到），您可以执行以下操作：

```
def dexp(a, k):
    return np.diag(np.exp(np.diag(a)))

def exp(a, k):
    if isdiag(a):
        return dexp(a, k)
    else:
        #use scipy.linalg.expm2 or whatever 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:18:44.673

我开发了一个工具，可以帮助更快地做与 HYRY 相同的事情，但通过**就地进行**：

```
def diagonal(array):
    """ Return a **view** of the diagonal elements of 'array' """
    from numpy.lib.stride_tricks import as_strided
    return as_strided(array,shape=(min(array.shape),),strides=(sum(array.strides),))

# generate a random diagonal array
d  = np.diag(np.random.random(4000))

# in-place exponent of the diagonal elements
ddiag = diagonal(d)
ddiag[:] = np.exp(ddiag)

# timeit comparison with HYRY's method
%timeit -n10 np.diag(np.exp(np.diag(d)))   
    # out> 10 loops, best of 3: 52.1 ms per loop
%timeit -n10 ddiag = diagonal(d); ddiag[:] = np.exp(ddiag)
    # out> 10 loops, best of 3: 108 µs per loop 
```

现在，

*   HYRY 的方法是对角线长度的二次方（可能是因为新的数组内存分配），因此如果您的矩阵维度很小，则差异可能不会那么大。

*   你需要对就地计算没问题

*   最后，非对角元素是 0，所以它们的指数应该是 1，不是吗？在我们的两种方法中，非对角线都是 0。

对于最后一部分，如果您希望所有非对角线元素为 1，那么您可以执行以下操作：

```
d2 = np.ones_like(d); 
diagonal(d2)[:] = np.exp(np.diag(d))

print (d2==np.exp(d)).all()  # True 
```

但这对数组大小是线性的，所以对角线长度是二次的。timeit 为 4000x4000 阵列提供约 90 毫秒，为 2000x2000 提供 22.3 毫秒。

最后，您也可以就地执行以加快速度：

```
diag = np.diag(d)
d[:]=1
diagonal(d)[:] = np.exp(diag) 
```

Timeit 为 4000^2 数组提供 66.1ms，为 2000^2 提供 16.8ms

# solr - 从 solr autosuggester 中删除不需要的项目

> ID：16081798
> 
> 赞同：0
> 
> 时间：2013-04-18T11:32:34.103
> 
> 标签：solr, lucene, indexing, lookup, autosuggest

我正在尝试从大量索引的段落中实现自动建议。但我想过滤掉自动建议中出现的某些不需要的词。例如，需要避免使用“and”、“how”、“when”等词。我该怎么做。

这是我在 solrconfig.xml 中为 autosuggest 所做的配置。

```
<requestHandler class="org.apache.solr.handler.component.SearchHandler" name="/suggest">
    <lst name="defaults">
      <str name="spellcheck">true</str>
      <str name="spellcheck.dictionary">suggest</str>
      <str name="spellcheck.onlyMorePopular">true</str>
      <str name="spellcheck.count">5</str>
      <str name="spellcheck.collate">true</str>
    </lst>
    <arr name="components">
      <str>suggest</str>
    </arr>
  </requestHandler>

<searchComponent class="solr.SpellCheckComponent" name="suggest">
<lst name="spellchecker">
  <str name="name">suggest</str>
  <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
  <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>

  <str name="field">keywords</str> 
  <float name="threshold">0.005</float>
  <str name="buildOnCommit">true</str>

</lst> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:59:19.263

我建议将[StopFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.StopFilterFactory)添加到schema.xml 文件中字段的支持`fieldType`定义。`keywords`如果您在`keywords`字段中需要这些词（“and”、“how”、“when”）来满足其他搜索要求，我建议您在 schema.xml 中为建议者创建一个自定义字段，您可以使用[copyField](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)指令来填充这个新字段。

# ios - 子视图未正确定位

> ID：16081800
> 
> 赞同：0
> 
> 时间：2013-04-18T11:32:38.270
> 
> 标签：ios, objective-c, uiview, subview, uidatepicker

我正在向 UIViewController 添加一个 UIDatepicker，它是 UINavigationController 的根视图，我使用此代码将 Datepicker 定位在屏幕底部。

```
UIDatePicker *picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height - 216, 320, 216)];
[self.view addSubview:picker]; 
```

这通常应该将选择器准确地放置在屏幕底部，但它是 44p 错位。导航栏的高度正好是 44p，所以我认为这是问题所在，但我不知道为什么框架高度包括导航栏的高度，当它不像子视图时。

我知道一个简单的方法是减去 44，但我正在寻找一个没有任何固定数字的解决方案。有没有办法实现它，有人可以解释一下为什么视图包含导航栏的高度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:39:21.797

将导航栏的*半透明属性设置为***YES**以解决您的问题..

前任：

```
self.navigationControllerInstance.navigationBar.translucent = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:38:23.967

好吧，我认为，由于您的 UIViewController 是 UINavigationController 的根视图，因此它隐式地将导航栏包含在其边界上。

要以编程方式获取其框架，您可以使用：

`CGRect navframe = [[self.navigationController navigationBar] frame];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:41:53.687

```
UIDatePicker *picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height - 216, 320, 216)];
[self.view addSubview:picker]; 
```

尝试这个！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:47:29.023

最好不要对任何维度进行硬编码。试试这个代码：

```
UIDatePicker *picker = [[UIDatePicker alloc] init];
CGRect pickerFrame = CGRectMake(0, CGRectGetHeight(self.view.bounds) - CGRectGetHeight(picker.bounds), CGRectGetWidth(picker.bounds), CGRectGetHeight(picker.bounds));
[picker setFrame:pickerFrame];
[self.view addSubview:picker]; 
```

它有效并且不假设日期选择器的高度始终为 216。这可能会在未来的 iOS 实现中发生变化，因此最好在运行时检查大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T12:14:29.760

```
self.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

我想这会解决你的问题！

# java - 无法比较附加到类名的 Java 字符串中的对象

> ID：16081801
> 
> 赞同：2
> 
> 时间：2013-04-18T11:32:39.833
> 
> 标签：java

我正在比较 Java 中的两个对象，并实现了 equals 和 hashcode。

尽管对象相等，但比较返回 false。

我发现在 equals 实现中，尽管它们是相同的，但它将两个对象的类打印为不同的。

对于一个它打印：`com.salebuild.model.TechnologyProduct`
而对于另一个它打印：`com.salebuild.model.TechnologyProduct_$$_javassist_71`

所以它在 equals 方法中在这种情况下失败：

```
if (getClass() != obj.getClass())
{
    return false;
} 
```

无法找到为什么要附加此字符串：`_$$_javassist_71`

我该如何克服呢？有人可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:34:12.010

用于`instanceof`检查两个对象是否属于同一类。

以下是 Eclipse 提供的用于检查对象相等性的代码：

```
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (!(obj instanceof LdapUserDetails)) //check class here
        return false;

    // check fields for equality here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:35:33.513

我会写这样的东西：

```
if (!(this instanceof TechnologyProduct))
{
    return false;
} 
```

# css - 如何在 CSS 中制作具有固定页眉和页脚的 2 列布局？

> ID：16081804
> 
> 赞同：0
> 
> 时间：2013-04-18T11:32:47.893
> 
> 标签：css, html, menu, footer

我一直在寻找这方面的教程一段时间，但遇到了一个问题。我有一个高度为 100 像素的固定页眉和高度为 50 像素的固定页脚的布局。在我的内容中，左侧有一个 200 像素宽的菜单，右侧的内容填满了屏幕的其余部分。我的页眉、页脚和菜单都有适用于背景颜色和边框的样式。

我想要的是让我的页脚保持在窗口的底部，或者如果内容较长，则在我的内容的底部。我希望菜单与内容的高度相同，以便我应用的样式保持不变。我*得到*的要么是因为内容比菜单短，所以页脚粘在内容的底部，或者是菜单底部和页脚顶部之间存在间隙。

我找到的每个教程都解决了这个问题，***但***要求菜单没有背景（它从`<body>`标签中获取背景样式。正如我所说，我应用的样式附加到菜单上。有没有办法解决这个问题？

**更新：**我的来源可以在[http://jsfiddle.net/53SZd/3/](http://jsfiddle.net/53SZd/3/)找到。这就是我*现在*所拥有的（如果浮动引起各种头痛，我深表歉意），但如果有办法让它看起来像我想要的那样，我非常愿意接受建议。

**更新2：**我认为我的解释方式是错误的。我已将一些我想要的图片上传到我的 Google 云端硬盘，这些图片应该可以解释我想要什么。

虽然我真诚地感谢我在这里得到的帮助，但总会出现一个警告。非常感谢 Waz 的帮助，我真的很感激，但我在每个答案中都遇到了一个或另一个问题。没想到达到我想要的效果竟然这么难-_-”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:43:02.253

似乎您可能在菜单上使用 float 属性，如果是这种情况，您必须使用页脚或 div 清除浮动，但查看代码将对您的回答有很大帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:10:36.090

一种方法是在 220px 的内容上放置一个 margin-left （200 用于菜单 +20 用于它不只是在菜单旁边）

有同样的问题，这解决了它。

对于页脚，詹姆斯的解决方案是最好的（放在`clear : both`你的页脚上）

这是它的工作原理：http: [//jsfiddle.net/53SZd/19/](http://jsfiddle.net/53SZd/19/)

编辑：我知道问题是针对内容的。给你的菜单顶部= 111px（100页眉大小，11填充）和底部= 51px（50高度页脚，1边框）和你的页脚底部= 0px；

# javascript - 如何使用javascript向所有li标签添加一个类

> ID：16081807
> 
> 赞同：-3
> 
> 时间：2013-04-18T11:32:56.613
> 
> 标签：javascript, html, css

我正在尝试（通过javascript）为我的html页面上的所有li标签提供一个类。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:38:21.900

**Javascript**

```
var elm = document.getElementsByTagName('li')
var length = elm.length;
for (var i = 0; i < length; i++) {
  elm[i].className = elm[i].className + " classname";
} 
```

[http://jsfiddle.net/Pwf4z/](http://jsfiddle.net/Pwf4z/)

**jQuery**

```
 $("li").addClass("classname"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:00:26.930

```
var list = document.getElementsByTagName('li');
var listNum = list.length
for(var i=0; i<listNum; i++){
list.setAttribute('class', 'className');
} 
```

# r - 如何编写一个函数以在 R 中生成一系列点？

> ID：16081809
> 
> 赞同：0
> 
> 时间：2013-04-18T11:33:00.363
> 
> 标签：r, function, statistics, probability

这是我正在处理的 PDF：

```
fx = 0.3 if (0<=x<1)
0.1 if (1<=x<2)
0.25 if (2<=x<3)
0.15 if (3<=x<4)
0.2 if (4<=x<5)
0 otherwise 
```

我必须编写一个函数 gen_xy ，它将生成一系列点 (X, Y) 均匀分布在 (0, 5) X (0, 0.5) 中，直到一个位于`y = fx(x)`.

到目前为止，这是我的代码：

```
fx <- function(x) c(0, 0.3,0.1,0.25,0.15,0.20, 0)
[findInterval(x, c(-Inf, 0:5,  Inf))]

x <- runif(n,0,5)
fx <- stepfun(x = 0:5, y = c(0,0.3,0.1,0.25,0.15,0.20,0))
plot(fx, ylim = c(0,0.5),xlim = c(0,5), main = 'f(x)') 
```

现在这是我为我的函数编写代码的尝试：

```
gen_xy <- function() {
    done=0
    while(done==0) {
        x=runif(1,0,5)
         y=runif(1,0,0.5)
         print(c("x,y",c(x,y)))
         if(y < fx(x)) {
             done=1
         }
    }
    xy=c(x,y)
    xy
} 
```

但我认为这部分`if(y < fx)`是错误的？

然后，我需要生成 1000 个点的样本并绘制它们以检查它们是否是`y=fx`. 我将如何编写这样的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:02:00.300

您的`gen_xy()`函数按照我的理解执行您希望它执行的操作...生成一系列点，直到一个点位于该线下方...然后跳出循环。我试过了，通常它只产生几个点......如果你`points(x,y,col="red")`在你的循环中做广告或类似的东西，你可以将它们添加到你的情节中。

要生成 1000 分，您可以执行以下操作：

```
 x=runif(1000,0,5)
     y=runif(1000,0,0.5) 
```

然后你可以把它放在你的情节上`points(x,y)`

但我不确定你对适当样本的意思。??

您可以再次将生成的点与曲线进行比较：

```
 y < fx(x) 
```

并将它们作为 x[y < fx(x)] 和 y[y < fx(x)] 的子集。

# php - 检查用户点击了服务器端php的哪些动态按钮（输入类型按钮）

> ID：16081814
> 
> 赞同：0
> 
> 时间：2013-04-18T11:33:14.400
> 
> 标签：php, jquery, forms, button

首先我要感谢你们每一天的帮助，回答问题。你为我节省了很多时间，我也学到了很多东西。

我让我们在表单上说这个按钮。

```
<button type="button" value="Adventurous" name="adv" id="adv">Adventurous</button>
<button type="button" value="Discovery" name="disc" id="disc">Discovery</button>
<button type="button" calue="Easy-going" name="easy" id="easy">Easy-going</button> 
```

当用户单击一个按钮以指定他在我们的示例中的感觉时，我在 jquery 上有以下代码来更改按钮的状态为选中并更改类（以不同的颜色显示等）

```
$(".tailor_field .tailor_mood_btn button").click(function() {
         var checked = $(this).attr('checked');
         $the_image = $(this).find("img");
        if(checked){
            $(this).removeClass("mood_on");
            $(this).attr('checked', false);
            $the_image.attr("src", templateDir+"/images/btn_on.png");
        }
        else{
            $(this).addClass("mood_on");
            $(this).attr('checked', true);
            $the_image.attr("src", templateDir+"/images/btn_off.png");
        }
    }); 
```

所以当用户按下提交时，我想在服务器端（php）检查用户点击了哪些按钮？

其次，我想动态插入按钮。即在我的数据库中有一个字符串，将其分解为一个数组并循环每个元素以创建按钮等。如果我从一开始就不知道有多少按钮及其名称，我将如何知道要检查什么？也许有会话（如果有其他解决方案，我想避免它）？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:35:19.223

我会这样做：

```
var checkedButtons = $(".tailor_field .tailor_mood_btn button[checked=true]");

$("form").submit(function() {
  var data = [];
  checkedButtons.each(function(index, element) {
    var name = element.attr('name');
    var value = element.val();
    data[name] = value;
  });

  $.post('file.php', data);
}); 
```

data 变量是一个数组，其中键是单击按钮的名称，这些按钮的值是这些按钮的值。稍后，对需要此数据的文件 (file.php) 发出 ajax 请求，其中数据数组在超全局 $_POST (ex. `$_POST['adv'] = "Adventurous"`)中可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:48:37.570

我认为最好的答案是只使用复选框列表。这就是他们的目的。

但是，如果您想使用特殊按钮，这是一种使用隐藏文件作为输入的方法，而不是实际的按钮。我不知道元素“按钮”是否具有选中的属性。

我只是使用了一个简单的小 javascript 来更改输入的值，您可以调整您当前的功能。请注意，我给可点击按钮一个新的 ID，将“_button”附加到数据库中的名称。

```
<?php

$string = "Adventerous,Discovery,Easy-Going"; /* this is from your database */
$delimiter = ",";
$button_values = explode($delimiter, $string);

?>
<html>
<body>
<script type="text/javascript" >
function checkbutton(id) {
         var val = document.getElementById(id).value;
         if (val == 0) 
            val = 1;
         else 
            val = 0;

         document.getElementById(id).value = val;
         alert("Clicked: " + id);
}
</script>
<form action="form-catch.php" method="post">
<?php

foreach($button_values as $value) {
    echo '<button type="button" 
                onClick="checkbutton(\''.$value.'\')">'.$value .'</button>
    <input type="hidden" name="'.$value.'" id="'. $value .'" value="0" ><br>';

}

?>
<input type="submit" value="submit">
</form>
</body></html> 
```

然后在服务器上，表单将从字符串中发送按钮名称，如果该按钮被选中，则发送 0 或 1。

```
<?php 
/* quick form checker to show what was clicked in the other form */
foreach($_POST as $key => $val)
    echo "<br>    $key : $val";   
?> 
```

即使你不使用确切的代码，我希望这个概念能让你朝着正确的方向前进。

1) 将数据作为表单输入发送。

2) 遍历发送过来的任何内容并检查设置值。

# samsung-smart-tv - SmartTV：sf-ui-list 自定义项目高度

> ID：16081815
> 
> 赞同：0
> 
> 时间：2013-04-18T11:33:22.070
> 
> 标签：samsung-smart-tv

在我的一个场景中，我有

```
<div id='MenuList'></div> 
```

然后我像这样添加列表：

```
$('#MainListTitles').sfList({
    data : [ 'AAA', 'BBBB', 'CCC']
}); 
```

如何自定义每个列表项的颜色和高度？我在css中尝试过这样的：

#MenuList.sf-ui-list {高度：333px; 文本对齐：右；背景颜色：#ffffff} - 有效

#MenuList.sf-ui-list-item {background-color:#000000} - 不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:28:39.653

首先，“#MenuList.sf-ui-list-item”永远不会起作用，因为您没有 ID 为“MenuList”且类为“sf-ui-list-item”的相同元素。这是基本的CSS。正确的用法是“#MenuList .sf-ui-list-item”。

另一方面，三星的 SmartTV SDK 做得非常糟糕。这太糟糕了，看起来他们甚至不希望人们为它开发应用程序。

根据[API 文档](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/api_reference/appsframework_apis/ui_components_api/uiapi_list_sflist.html)，您确实应该设置类“sf-ui-list-item”的样式，但是如果您使用“使用 Web Inspector 调试三星智能电视应用程序”运行您的项目，您可以看到他们使用类“sf-ui-列表模糊”。

因此，合乎逻辑的步骤是样式：

```
#MenuList .sf-ui-list-blured { ... } 
```

我建议您创建自己的样式并将它们作为“.sfList”命令中的 3 个参数传递（类：focusCssClass、blurCssClass 和 selectCssClass，如[API doc](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/api_reference/appsframework_apis/ui_components_api/uiapi_list_sflist.html)中所述）。

# svn - SVN 混合静态和可提交文件

> ID：16081816
> 
> 赞同：1
> 
> 时间：2013-04-18T11:33:22.883
> 
> 标签：svn, static, ftp

我希望创建一个数据文件和元文件的存储库。数据文件是巨大的（2Gb）二进制文件，而元文件可能是文本文件。数据文件很少（如果有的话）被更改。我想使用 SVN 提供文件和版本控制提交到元文件，但经过研究，我担心 SVN 服务数据文件的速度太慢（与 FTP 相比）。

是否有有效地提供“静态”和“可提交”文件的解决方案？

编辑：例如，是否有实现 FTP/SVN 的“混合”的“最佳实践”或技术方式？下载资源/可提交存储库？

真诚的， // 符文

# ruby-on-rails - 根据 ruby on rails 中的标签显示相关文章

> ID：16081823
> 
> 赞同：1
> 
> 时间：2013-04-18T11:33:45.727
> 
> 标签：ruby-on-rails, ruby, tags

我正在尝试在文章的显示页面上显示相关文章。当用户查看任何特定文章时，数据库中的所有相关文章都应根据标签显示在该页面（右侧栏中）上（因为每篇文章至少有一个标签）。我的应用程序在标签和文章之间有关系（请见下文） .

文章控制器.rb

```
class ArticlesController < ApplicationController

  before_filter :is_user_admin, only: [:new, :create, :edit, :destroy]
    def is_user_admin
      redirect_to(action: :index) unless current_user.try(:is_admin?) 
      return false 
    end

    def index
      @articles = Article.all(:order => "created_at DESC")
      @article_titles = Article.first(10)

      @tags = Tag.all
    end

    def show
      @article = Article.find(params[:id])
    end

    def new
      @article = Article.new
    end

    def create
      @article = Article.new(params[:article])
      @article.user_id = current_user.id

      if @article.save
        flash[:success] = "article created!"
        redirect_to article_path(@article)

      else
        render 'new' 
      end 
    end

    def destroy
      @article = Article.find(params[:id])
      @article.destroy

      redirect_to action:  'index'  
    end

    def edit
      @article = Article.find(params[:id])
    end

    def update
      @article = Article.find(params[:id])

      if @article.update_attributes(params[:article])
       flash.notice = "Article '#{@article.title}' Updated!"
       redirect_to article_path(@article)

      else 
        render 'edit'
      end
  end
end 
```

tags_controller.rb

```
class TagsController < ApplicationController
  #before_filter :user_signed_in, only: [:destroy]

  def index
    @tags = Tag.all
  end

  def show
    @tag = Tag.find(params[:id])
  end
end 
```

架构.rb

```
ActiveRecord::Schema.define(:version => 20130411074056) do
  create_table "articles", :force => true do |t|
    t.string   "title"
    t.text     "body"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "user_id"
  end

  create_table "comments", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.string   "article_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "taggings", :force => true do |t|
    t.integer  "tag_id"
    t.integer  "article_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  add_index "taggings", ["article_id"], :name => "index_taggings_on_article_id"
  add_index "taggings", ["tag_id"], :name => "index_taggings_on_tag_id"

  create_table "tags", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

article/show.html.erb :- 当用户根据标签查看任何特定文章时，我需要在其中显示相关文章

目前，articles/show.html.erb 页面具有标签（S）名称，我想在 db 中显示所有具有相同标签的文章以显示在此页面上（右侧栏）。任何想法如何实现此关系以获取相关文章以及在何处编写此逻辑以及如何在视图中实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T12:19:11.523

如果您使用[acts_as_taggable_on](https://github.com/mbleigh/acts-as-taggable-on)，您想要的很容易使用以下代码实现

```
def show
  @article = Article.find(params[:id])
  @related_articles = Article.tagged_with(@article.tag_list, any: true)
end 
```

由于您汇总了自己的实现，因此您必须手动进行提取。

首先获取文章所有标签的列表。那将是`@article.tag_ids`。

接下来，获取与这些标签 ID 关联的文章列表

```
@related_articles = Article
  .joins(:taggings)
  .where('articles.id != ?', @article.id)
  .where(taggings: { tag_id: @article.tag_ids }) 
```

# javascript - 添加空间时自动完成功能不起作用

> ID：16081826
> 
> 赞同：1
> 
> 时间：2013-04-18T11:34:03.183
> 
> 标签：javascript, jquery, autocomplete

在我的项目中，我正在尝试使用以下插件创建自动完成效果：

[Devbridge jQuery 自动完成](https://github.com/devbridge/jQuery-Autocomplete)

这个插件工作正常，直到我没有在我的文本框中添加空格（添加一个单词之后）。当我只是使用退格键删除输入的单词时，自动完成显示之前应该显示的前一个列表。

PS：每次我通过 ajax 调用将文本字段的全文传递给服务器时，这在我的应用程序中是必需的。

这是我的代码：

**[JS Fiddle](http://jsfiddle.net/GXJEA/)**（*由于 ajax url 而无法工作*）

**JS**

```
$(function () {

    var result = $('#result');
    var contents = {
        value: "",
        data: ""
    };
    /* Ajax call */
    result.keydown(function (event) {
        if (!event.shiftKey) {
            var sugData;
            var text = result.val(); //.split(" ").pop();
            //console.log(text);
            /* Send the data using post and put the results in a div */
            $.ajax({
                url: "http://localhost:9999/projects/1/autocomplete/suggestions",
                type: "POST",
                data: "drqlFragment=" + text, // + "  ",
                //data: "drqlFragment=when node_database_property  ",
                async: false,
                cache: false,
                headers: {
                    accept: "application/json",
                    contentType: "application/x-www-form-urlencoded"
                },
                contentType: "application/x-www-form-urlencoded",
                processData: true,
                success: function (data, textStatus, jqXHR) {
                    var resData = data.suggestions;
                    //console.dir(resData);
                    for (var i = 0; i < resData.length; i++) {
                        resData[i].value = resData[i].keyword;
                    }
                    sugData = resData;
                    //console.dir(sugData);
                },
                error: function (response) {
                    //console.dir(response);
                    $("#result").val('there is error while submit');
                }
            });
            console.dir(sugData);
            $('#result').autocomplete({
                lookup: sugData
            });
        }
    });
}); 
```

**HTML**

```
<form id="foo">
    <textarea id="result" rows="4" cols="50"></textarea>
    <input type="submit" value="Send" />
</form> 
```

抱歉，我无法为您提供 json 数据，因为每当我按键时它都会被服务器修改。（因此，实际上它是服务器在 ajax 调用时返回的对象变量）。

# php - 将单个图像中的多个透明png图像加入php

> ID：16081827
> 
> 赞同：0
> 
> 时间：2013-04-18T11:34:05.883
> 
> 标签：php, image-processing, gd, gdlib, imagecreatefrompng

朋友们，我想从多个透明 PNG 图像生成一个 png 图像，但问题是我只能生成最后一个图像

两个图像不能合并。

我的代码如下

```
$x = 363;
$y = 267;

$im_dest = imagecreatetruecolor ($x, $y);
imagealphablending($im_dest, false);

$im = imagecreatefrompng('2.png');
$im1 = imagecreatefrompng('1.png');

imagecopy($im_dest, $im1, 0, 0, 0, 0, $x, $y);
imagecopy($im_dest, $im, 0, 0, 0, 0, $x, $y);

imagesavealpha($im_dest, true);
imagepng($im_dest, 'small_redfade.png'); 
```

这些是我用来加入单个图像的图像

[http://s11.postimg.org/h6lui7yjn/image.png](http://s11.postimg.org/h6lui7yjn/image.png)

[http://s21.postimg.org/o7zdnwcnb/image.png](http://s21.postimg.org/o7zdnwcnb/image.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-03T17:42:30.730

这是有效的代码：

```
$width = 210;
$height = 190;

$layers = array();
$layers[] = imagecreatefrompng("img/01_boy_faceB.png");
$layers[] = imagecreatefrompng("img/01_boy_hairB.png");

$image = imagecreatetruecolor($width, $height);

// to make background transparent
imagealphablending($image, false);
$transparency = imagecolorallocatealpha($image, 0, 0, 0, 127);
imagefill($image, 0, 0, $transparency);
imagesavealpha($image, true);

/* if you want to set background color
$white = imagecolorallocate($image, 255, 255, 255);
imagefill($image, 0, 0, $white);
*/

imagealphablending($image, true);
for ($i = 0; $i < count($layers); $i++) {
    imagecopy($image, $layers[$i], 0, 0, 0, 0, $width, $height);
}
imagealphablending($image, false);
imagesavealpha($image, true);

imagepng($image, 'final_img.png');

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:52:25.330

[ImageMagick::Composite](http://us3.php.net/manual/en/imagick.compositeimage.php)可以处理这个问题，遗憾的是在 GD 中没有这样做，所以让其他人解释如何在那里做。

就像是：

```
<?php

$firstImage = new Imagick("firstImage.png");
$secondImage = new Imagick("secondImage.png");

$firstImage->compositeImage($secondImage, Imagick::COMPOSITE_COPYOPACITY, 0, 0 );

header('Content-type: image/png');
echo $firstImage;

?> 
```

这应该保留 alpha。

# php - Mysql Insert Error找不到问题

> ID：16081829
> 
> 赞同：0
> 
> 时间：2013-04-18T11:34:13.230
> 
> 标签：php, mysql

嗨，我正在使用下面的代码，并且已经通过了很多次，但看不出为什么这不起作用，我认为这只是无法看到问题的情况，所以我将不胜感激如果其他人可以查看并确定问题。

这是我得到的错误；

```
You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near
'Azur', 'Antibes', '43.5624', '7.1278', '', '', 'Europe/Paris', 'EU', '', 'Amadeu'
at line 6 
```

这是代码：

```
 if (!isset($params['i'])) $params['i'] = '82.150.248.29';

  $query = 'https://geoip.maxmind.com/e?' . http_build_query($params);

  $omni_keys = 
  array(
    'country_code',
    'country_name',
    'region_code',
    'region_name',
    'city_name',
    'latitude',
    'longitude',
    'metro_code',
    'area_code',
    'time_zone',
    'continent_code',
    'postal_code',
    'isp_name',
    'organization_name',
    'domain',
    'as_number',
    'netspeed',
    'user_type',
    'accuracy_radius',
    'country_confidence',
    'city_confidence',
    'region_confidence',
    'postal_confidence',
    'error'
    );

   $curl = curl_init();
   curl_setopt_array( $curl, 
               array(
                     CURLOPT_URL => $query,
                     CURLOPT_USERAGENT => 'MaxMind PHP Sample',
                     CURLOPT_RETURNTRANSFER => true
                     )
               );

               $resp = curl_exec($curl);

               if (curl_errno($curl)) {
               throw new Exception('GeoIP Request Failed');
               }

            $omni_values = str_getcsv($resp);
            $omni = array_combine( $omni_keys, $omni_values);

           //print_r($omni_values);

          $country_code= $omni['country_code'];
          $country_name= $omni['country_name']; 
          $region_code= $omni['region_code']; 
          $region_name= $omni['region_name']; 
          $city_name= $omni['city_name']; 
          $latitude= $omni['latitude']; 

          $longitude= $omni['longitude'];
          $metro_code= $omni['metro_code']; 
          $area_code= $omni['area_code']; 
          $time_zone= $omni['time_zone']; 
          $continent_code= $omni['continent_code']; 
          $postal_code= $omni['postal_code']; 

          $isp_name= $omni['isp_name'];
          $organization_name= $omni['organization_name']; 
          $domain= $omni['domain']; 
          $as_number= $omni['as_number']; 
          $netspeed= $omni['netspeed']; 
          $user_type= $omni['user_type']; 

          $accuracy_radius= $omni['accuracy_radius'];
          $country_confidence= $omni['country_confidence']; 
          $city_confidence = $omni['city_confidence']; 
          $region_confidence= $omni['region_confidence']; 
          $postal_confidence= $omni['postal_confidence']; 
          $error= $omni['error'];

          //Insert to MasterTable
          mysql_query("INSERT INTO mastertable 
          (country_code, country_name, region_code, region_name, city_name, latitude,           longitude, metro_code, area_code, time_zone, continent, postal_code, isp_name, organisation, domain_name, as_number, netspeed, user_type, accuracy_radius, country_confidence_factor, city_confidence_factor, region_confidence_factor, postal_code_confidence_factor, error) 

        VALUES

        ('$country_code', '$country_name', '$region_code', '$region_name', '$city_name', '$latitude', '$longitude', '$metro_code', '$area_code', '$time_zone', '$continent_code', '$postal_code', '$isp_name', '$organization_name', '$domain', '$as_number', '$netspeed', '$user_type', '$accuracy_radius', '$country_confidence', '$city_confidence', '$region_confidence', '$postal_confidence', '$error' ) ") 
or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:39:44.700

这是因为您需要在插入之前转义数据！例如，您似乎尝试插入**`'cotes d'azur'`**但`'`in**`cotes d'azur`**没有转义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:38:36.777

更改以下所有（类似）语句：

```
$country_code= $omni['country_code']; 
```

对此：

```
$country_code= mysql_real_escape_string( $omni['country_code'] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:47:54.100

使用后

```
 $omni = array_combine( $omni_keys, $omni_values); 
```

添加这一行

```
 $omni = array_map('addslashes', $omni); 
```

它会解决你的问题

见 mysql_real_escape_string 以及。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:49:43.110

好吧，这个问题似乎得到了正确的回答，但无论如何：

为什么...您将数组的每个命名成员分配给具有相同名称的变量？这可能不是最佳实践。

# asp.net - 如何在不创建新 PDF 的情况下更新 PDF？

> ID：16081831
> 
> 赞同：2
> 
> 时间：2013-04-18T11:34:32.683
> 
> 标签：asp.net, itextsharp, tridion, tridion-2011, tridion-core-services

我需要用另一个词替换现有 PDF AcroField 中的一个词。我正在使用 iTEXTSHARP 的 PDFStamper 来做同样的事情，它工作正常。但是，这样做需要创建一个新的 PDF，我希望更改能够反映在现有的 PDF 本身中。如果我将目标文件名设置为与原始文件名相同，则不会反映任何更改。我是 iTextSharp 的新手，我做错了什么吗？请帮忙..我正在提供我正在使用的一段代码

```
 private void ListFieldNames(string s)
    {
        try
        {
            string pdfTemplate = @"z:\TEMP\PDF\PassportApplicationForm_Main_English_V1.0.pdf";
            string newFile = @"z:\TEMP\PDF\PassportApplicationForm_Main_English_V1.0.pdf";
            PdfReader pdfReader = new PdfReader(pdfTemplate);

            for (int page = 1; page <= pdfReader.NumberOfPages; page++)
            {
                PdfReader reader = new PdfReader((string)pdfTemplate);
                using (PdfStamper stamper = new PdfStamper(reader, new FileStream(newFile, FileMode.Create, FileAccess.ReadWrite)))
                {
                    AcroFields form = stamper.AcroFields;
                    var fieldKeys = form.Fields.Keys;
                    foreach (string fieldKey in fieldKeys)
                    {
                        //Replace Address Form field with my custom data
                        if (fieldKey.Contains("Address"))
                        {
                            form.SetField(fieldKey, s);
                        }    
                    }
                    stamper.FormFlattening = true;
                    stamper.Close();

                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T12:13:32.027

[正如我的iText in Action](http://itextpdf.com/examples/iia.php?id=163)一书中所述，您不能同时读取文件并写入文件。想想 Word 的工作原理：您无法打开 Word 文档并直接对其进行写入。Word 总是创建一个临时文件，将更改写入其中，然后用它替换原始文件，然后丢弃临时文件。

你也能做到：

*   读取原始文件`PdfReader`，
*   为 创建一个临时文件`PdfStamper`，完成后，
*   用临时文件替换原始文件。

或者：

*   将原始文件读入一个`byte[]`,
*   `PdfReader`用这个创建`byte[]`，并且
*   将原始文件的路径用于`PdfStamper`.

第二个选项更危险，因为如果您在`PdfStamper`.

# java - 在垂直位置循环

> ID：16081833
> 
> 赞同：0
> 
> 时间：2013-04-18T11:34:33.793
> 
> 标签：java

我是初学者，`java`我想寻求一些帮助。

编写一个名为 vertical 的方法，该方法接受一个字符串作为其参数，并将字符串的每个字母打印在不同的行上。例如，调用 vertical("hey now") 应该产生以下输出：

```
h
e
y

n
o
w 
```

这就是我所做的。

```
public void vertical(String x){
    char OneByOne='x';
        for(int i=0;i<=x.length()-1;i++){
            OneByOne=x.charAt(i);
        }
        System.out.print(OneByOne);
} 
```

当我要求它时，它给了我 w。但我很困惑。我创建了一个字符容器并调用位置 0。然后循环遍历它。位置 0 不应该从 h 开始。而不是给我 aw？

另外，我应该使用`public void vertical(String x){ or public static void vertical(String x){`吗？他们给我相同的输出。我去研究静态，他们告诉我静态意味着单一。那是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:41:04.617

```
public void vertical(String x){
    int count = x.length();
    for(int i=0;i<count;i++){
       System.out.println(x.charAt(i));
    }      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:45:26.503

I used a more conventional style here:

```
public void vertical(String x){
    for(int i = 0; i < x.length(); i++){
        char oneByOne = x.charAt(i);
        System.out.println(oneByOne);
    }
} 
```

Less than length, i.o. less-equals length - 1.

Local declaration. Vars starting with small letter.

The rest is fine. charAt(i) gives the i'th char, just as conceived.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:41:02.460

您需要在每次迭代中打印 char 。

```
public void vertical(String x){
    char OneByOne='x';
        for(int i=0;i<=x.length()-1;i++){
            System.out.println(x.charAt(i));
        }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:37:25.323

您没有在循环内打印。另外，使用 println。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T11:44:59.443

除了其他答案：您还可以使用 for each 循环：

```
public static void vertical(String x) {
    for (char OneByOne : x.toCharArray()) {
        System.out.println(OneByOne);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T11:39:41.787

您应该使用 prinln 而不是 print

```
System.out.println(OneByOne); 
```

`static`关键字意味着您可以在没有类实例的情况下调用此方法。

# c# - 如何将变量放入 JSON

> ID：16081837
> 
> 赞同：1
> 
> 时间：2013-04-18T11:34:44.023
> 
> 标签：c#, android, json, xamarin, pushsharp

实际上我正在使用 PushSharp。我想发送通知，但我必须将变量放入此 JSON 而不是硬编码文本（下例）。

```
var msg = "TEST MESSAGE";
    push.QueueNotification(new GcmNotification().ForDeviceRegistrationId(registrationId)
                             .WithJson("{\"alert\":\"HERE MESSAGE\",\"badge\":7,\"sound\":\"sound.caf\"}")); 
```

是否可以？如何将 msg 变量放入

我试过这样的事情：

```
push.QueueNotification(new GcmNotification().ForDeviceRegistrationId(registrationId)
                         .WithJson("{\"alert\":\"{0}\",\"badge\":7,\"sound\":\"sound.caf\"}",msg)); 
```

但它说：方法没有重载`'WithJson'`需要“3”个参数。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:41:14.863

如果您想将消息添加到 JSON 中，您可以这样做：

```
var msg = "my message"; // this would be set somewhere else in the code
var jsonObject = {
    "alert" : "{0}",
    "badge" : "7",
    "sound" : "sound.caf",
    "msg" : msg
};

// convert the object into a string
var jsonString = JSON.stringify(jsonObject);

push.QueueNotification(new GcmNotification().ForDeviceRegistrationId(registrationId)
        .WithJson(jsonString)); 
```

**编辑：**我更改了代码，因此您不必操作字符串。相反，您现在可以操作 jsonObject。JSON.stringify 然后将其转换为字符串。

# c# - 在 asp.net 3.5 中使用多个查询字符串重写 URL

> ID：16081838
> 
> 赞同：1
> 
> 时间：2013-04-18T11:34:50.533
> 
> 标签：c#, asp.net, url, url-rewriting

我有一个与旅行相关的网络应用程序，其中我的网址看起来像

```
MyTravel/Tour/Inner.aspx?Pid=2&Cid=8 
```

和

```
MyTravel/Tour/Inner.aspx?Pid=2&Cid=8&DeptF=ND 
```

现在我想在我的应用程序上重写 url，比如

```
MyTravel/Tour/Goa/new-year-goa 
```

这里 goa 和 new year goa 由 pid 和 cid 值获取。

帮我。

提前致谢

[编辑：改革]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:41:22.070

URL重写可以如下进行，

```
void Application_BeginRequest(object sender, EventArgs e) {

    string fullOrigionalpath = Request.Url.ToString();

    if (fullOrigionalpath.Contains("/Tour/Inner.aspx?Pid=2&Cid=8")) {
        Context.RewritePath("/Tour/Goa/new-year-goa");
    }
    else if (fullOrigionalpath.Contains("/Tour/Inner.aspx?Pid=2&Cid=8&DeptF=ND")) {
        Context.RewritePath("/Tour/Goa/new-year-goa"); 
        //This can be something else according to your requirements.
    }
} 
```

你可以看看这个[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

或者你可以修改你的`web.config`来实现目标，

这是样本，

```
<?xml version="1.0"?>

<configuration>

<configSections>
<section name="rewriter"  
         requirePermission="false" 
     type="Intelligencia.UrlRewriter.Configuration.RewriterConfigurationSectionHandler, Intelligencia.UrlRewriter" />
</configSections>

<system.web>

<httpModules>
  <add name="UrlRewriter" type="Intelligencia.UrlRewriter.RewriterHttpModule, Intelligencia.UrlRewriter"/>
</httpModules>

</system.web>

<rewriter>
 <rewrite url="~/Tour/Inner.aspx?Pid=2&Cid=8" to="~/Tour/Goa/new-year-goa" />
 //Some other re-writers to achieve specific requirements.
</rewriter>  

</configuration> 
```

[编辑：以下可以是一种解决方案]

好的。因此，正如您所说，您需要检查`pid`并`cid`相应地重定向，

实现这一目标的一种方法如下，

*   `Request.QueryString("Pid")`和`Request.QueryString("Cid")`
*   将它们存储到一些变量中，
*   使用一些 switch...case 机制检查这些变量，并根据传递的条件设置使用的路径`Context.ReWritePath("Your Specified Path")`

另一种方法是使用数据库，

*   创建一个包含三列、`pid`、`cid`和的表`location_path`
*   现在得到`cid`和`pid`使用上面提到的`Request.QueryString`
*   使用 sql 查询，从表中选择与 匹配的位置，`cid`并使用`pid`Context.ReWritePath`Request.QueryString`设置它

希望您现在清楚这一点。

希望能帮助到你。

# bxslider - bxSlider 选项“easing”是否与选项“auto: true”一起使用？

> ID：16081844
> 
> 赞同：0
> 
> 时间：2013-04-18T11:35:00.643
> 
> 标签：bxslider, easing

我正在使用 bxslider，我想使用 easing 选项 wit option auto: true 它是这样工作还是只与控件一起工作？

我的代码：

```
<script>
$('.bxslider').bxSlider({
    auto: true,
   mode: 'horizontal',
  useCSS: false,
  infiniteLoop: false,
  hideControlOnEnd: true,
  easing: 'easeOutElastic',
  speed: 2000

});
</script> 
```

没用，有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T13:53:49.093

使用[http://v3.bxslider.com/](http://v3.bxslider.com/)

这个版本如果你使用 auto: true

# python - Python单例再次/如何使用类属性？

> ID：16081852
> 
> 赞同：0
> 
> 时间：2013-04-18T11:35:27.547
> 
> 标签：python

我想在 Python 中有一个带有 Java 的单例类，比如“静态类属性”。我阅读了关于 Python 单例的几篇文章，除了使用简单的模块作为单例之外找不到解决方案。

有没有办法扩展此代码（[PEP318](http://www.python.org/dev/peps/pep-0318/)）以将其与我可以从函数访问的“静态类属性”一起使用？

```
def singleton(cls):
    instances = {}
    def getinstance():
        if cls not in instances:
            instances[cls] = cls()
        return instances[cls]
    return getinstance

@singleton
class MyClass:
    ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T13:21:16.290

TBH，我一直认为单例是一种反模式。

如果你想要一个只有一个实例的对象，那么为什么还要实例化任何东西呢？只需做类似...

```
class MyCounter(object):
    count = 0

    @classmethod
    def inc(cls, delta=1):
        cls.count += delta

>>> MyCounter.count
0
>>> MyCounter.inc()
>>> MyCounter.count
1
>>> MyCounter.inc(5)
>>> MyCounter.count
6 
```

# java - Spring拦截器适用于xml但不适用于配置类

> ID：16081861
> 
> 赞同：2
> 
> 时间：2013-04-18T11:35:42.390
> 
> 标签：java, xml, spring, annotations, interceptor

我目前正在使用一个配置了 xml 的拦截器，如下所示：

```
<mvc:interceptors>
    <bean class="org.resthub.dashboard.BasicInterceptor" />
</mvc:interceptors> 
```

但我想把它放在我的配置类中：

```
 @Configuration
    @ComponentScan("org.resthub.dashboard")
    @EnableWebMvc
    @EnableAspectJAutoProxy(proxyTargetClass=true)
    public class WebAppConfig extends WebMvcConfigurerAdapter{

        @Override
        public void addInterceptors(InterceptorRegistry registry) {
            registry.addInterceptor(new BasicInterceptor());
        }

        @Bean
        public InternalResourceViewResolver setupViewResolver() {
            InternalResourceViewResolver resolver = new InternalResourceViewResolver();
            resolver.setPrefix("/WEB-INF/views/");
            resolver.setSuffix(".jsp");
            return resolver;
        }
    } 
```

但它不起作用，我不知道为什么。拦截器永远不会被调用。

有任何想法吗 ？

谢谢

`edit`: 这里是 BasicInterceptor

```
 package org.resthub.dashboard;

    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    import org.springframework.security.core.Authentication;
    import org.springframework.security.core.context.SecurityContextHolder;
    import org.springframework.web.servlet.ModelAndView;
    import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;

    public class BasicInterceptor extends HandlerInterceptorAdapter {

        @Override
        public void postHandle(HttpServletRequest request,
                HttpServletResponse response, Object handler,
                ModelAndView modelAndView) throws Exception {
            // TODO Auto-generated method stub
            super.postHandle(request, response, handler, modelAndView);

            System.out.println("INTERCEPTORORRR§§§§§§");
            if (modelAndView != null && modelAndView.getModelMap() != null) {
    ...
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:18:09.647

看来您的配置是正确的，至少如果您已验证它实际上已被拾取。但是，可能的问题是在请求期间发生了一些导致`postHandle`不被执行的事情。确保在请求执行期间没有抛出任何异常。为了验证 Interceptor 是否确实被使用，您可以实现`preHandle`or`afterCompletion`并查看这些方法是否被执行。

# java - 启动时未在 Windows 注册表中执行相对路径？

> ID：16081862
> 
> 赞同：0
> 
> 时间：2013-04-18T11:35:43.453
> 
> 标签：java, windows, jar, registry

我想在 Windows 启动时运行 jar 文件。我成功地在注册表中输入了一个条目。

jar 文件在系统启动时运行成功。

但问题是，文件以绝对路径成功运行。示例路径如下：

```
C:\Users\...\Desktop\Jars\myJar.jar 
```

但我想用相对路径运行这个文件。我在 Eclipse 中开发了应用程序，并获取了“myJar2.jar”的路径并在 myJar.jar 文件中执行。

我通过调用 getCanonicalPath() 方法获取“myJar2.jar”文件的路径。在 registry 中，它会显示如下路径：

```
D:\Users\...\ProjectName/Jars/myJar.jar              //path by using getCanonicalPath() method , stored in registry 
```

如何在系统启动时使用上述相对路径运行“marJar.jar”。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:38:00.367

`D:\Users\...\ProjectName/Jars/myJar.jar` 这不是有效路径，因为它同时包含`'/'`& `'\'`。消除其中任何一个。

更正 `'\'`或`'/'`在路径中使用这个：

```
String path = <some_path_here>;
path = path.replaceAll("\", File.pathSeparator);
path = path.replaceAll("/", File.pathSeparator); 
```

# automation - 确定我的文件播放的确切时间

> ID：16081873
> 
> 赞同：3
> 
> 时间：2013-04-18T11:36:15.363
> 
> 标签：automation

我想计算我的文件播放的持续时间......我不确定要使用什么方法。

比如说我在 WMP 上播放了一个 AV 文件，文件的持续时间是 30 秒。现在我想检查文件实际播放的时间是 30 秒还是更少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T21:32:01.920

您必须为要播放文件的每个媒体播放器实现一个插件，并检测播放的持续时间。不同的媒体播放器会有自己的 SDK、插件 API 和您可以编写插件的语言。

对于 Windows Media Player，您必须使用 Visual Studio 的 WMP 插件向导在 Microsoft Visual C++ 中编写一个后台插件（不公开可见的用户界面）。有关详细信息，请查看相关的[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564682%28v=vs.85%29.aspx)站点。

您要问的内容类似于[Last.fm](http://last.fm)的工作方式。这是一个音乐推荐引擎，它安装[Last.fm Scrobbler](http://www.last.fm/help/faq?category=100#178)以对您在媒体播放器上收听的歌曲进行乱码（添加到您的在线个人资料）。然后，您可以访问您的帐户并查看一些有趣的统计数据，例如本月的顶级艺术家。

但是，这里的相关之处在于，只有当您听了一半以上的曲目时，曲目才会被打乱，并且它跟踪播放持续时间（连同歌曲、艺术家和专辑名称）的方式是通过媒体播放器插件. 请参阅[支持哪些媒体播放器？](http://www.last.fm/help/faq?category=100#180)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T08:54:54.703

您可以在未来实现的编程语言中使用某种计时器。

以下是在 C# 中使用它的一些示例：

*   [dotnetperls：计时器](http://www.dotnetperls.com/timer)
*   [MSDN：定时器类](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.110%29.aspx)

在 Java 中：

*   [asjava：Java 定时器教程](http://www.asjava.com/swing/java-timer-tutorial/)
*   [javarevisited.blogspot.de：计时器](http://javarevisited.blogspot.de/2013/02/what-is-timer-and-timertask-in-java-example-tutorial.html)

# php - modifying variable in an array and then reinserting it

> ID：16081881
> 
> 赞同：-4
> 
> 时间：2013-04-18T11:36:50.863
> 
> 标签：php, arrays

Hi all basically I want to take a value from an array, modify it and then insert it as a new variable in the array. I kind of imagine it looking like follows but as I have never really worked with arrays I have no idea.

```
<?php
    $foobar = array(
        "foo" => "foo1",
        "bar" => "bar1",
    )

 $New_variable = "<img src="$foobar["foo"])">";

 $foobar[foo_img] = $New_variable;
 print_r $foobar;
?> 
```

Hope that makes sense and thankyou in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:39:40.850

Question is vague, but still try this,

```
$new_variable = "<img src=".$foobar['foo'].">";
$foobar['foo_img'] = $new_variable;
print_r($foobar); 
```

Also you can directly do like this to save some lines of code,

```
$foobar['foo_img'] = "<img src=".$foobar['foo'].">"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:41:31.743

You can do this in 2 steps

```
$foobar['foo_img'] = "<img src=" . $foobar['foo'] . ">";
print_r($foobar); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:42:26.853

You don't even have to save it to a variable first. It's possible to change it directly in the array:

```
<?php
    $foobar = array(
        "foo" => "foo1",
        "bar" => "bar1"
    )

    $foobar["foo"] = "<img src='" . $foobar["foo"] . "'>";
    //                         ^  ^                ^  ^
    // Note concatenation using "." and the ''s 
    // to surround the string in the src attribute 
    print_r($foobar);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T11:43:15.283

There are syntax errors in your code.

Try this

```
$foobar = array(
        "foo" => "foo1",
        "bar" => "bar1"
);

$New_variable = "<img src='".$foobar['foo']."'>";

$foobar['foo_img'] = $New_variable;
print_r($foobar); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T11:55:03.800

You don't need intermediate steps, and associative arrays are very easy to work with. The solution you're looking for is, directly, inserting the new variable without accounting for what's actually inside the existing array. You can do it like this:

```
$foobar["foo_img"] = "<img src=\"{$foobar["foo"]}\">"; 
```

As you can see, you don't even need to make a string separation. Hope that helps ;)

# wcf - 为什么公共财产没有被序列化？

> ID：16081889
> 
> 赞同：2
> 
> 时间：2013-04-18T11:37:11.963
> 
> 标签：wcf, serialization, xsd

我们有一个 WCF 服务，它在服务的根级别具有 DataContract 和 DataMember 的合同中包含 Serializable 类。

在尝试构建解决方案来隔离问题时，我遇到了以下问题：

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    CompositeType GetDataUsingDataContract();

}

[DataContract]
public class CompositeType
{
    [DataMember]
    public MyType MyProperty { get; set; }

}

[Serializable]
public class MyType
{
    private int amount1;

    [XmlElement(Form = XmlSchemaForm.Unqualified, DataType = "int", ElementName = "AmountN")]
    public int Amount1
    {
        get
        { return amount1; }
        set
        { amount1 = value; }
    }

 } 
```

给出以下 xsd：

```
<xs:complexType name="CompositeType">
 <xs:sequence>
  <xs:element name="MyProperty" type="tns:MyType" nillable="true" minOccurs="0"/>
 </xs:sequence>
</xs:complexType><xs:element name="CompositeType" type="tns:CompositeType" nillable="true"/>
<xs:complexType name="MyType">
  <xs:sequence>
   <xs:element name="amount1" type="xs:int"/>
  </xs:sequence>
 </xs:complexType>
 <xs:element name="MyType" type="tns:MyType" nillable="true"/>
</xs:schema> 
```

问题是：为什么私有成员而不是公共成员被序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:22:27.320

[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/ms731923.aspx)可以解释为什么 wcf 能够序列化您的 MyType：

> 数据协定序列化程序支持的类型：. . .
> 
> 用 SerializableAttribute 属性标记的类型。.NET Framework 基类库中包含的许多类型都属于这一类。DataContractSerializer 完全支持 .NET Framework 远程处理、BinaryFormatter 和 SoapFormatter 使用的这种序列化编程模型，包括对 ISerializable 接口的支持。

而且由于 wcf 序列化私有字段没有问题，可能这就是序列化您的 privet 字段的原因`amount1`。

INO，问题是**“为什么你的属性 Amount1 没有序列化？** ”我会尝试重命名它（与字段名称不同），删除其上的 xml 属性，然后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T21:43:13.620

序列化器和序列化属性是两个不同的东西。

`XmlElement`是 for 的属性，`XmlSerializer`但对于`DataContractSerializer`或 for没有意义`BinaryFormatter`。[XmlElementAttribute 类](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.aspx)

`DataContractSerializer`可以序列化多种类型，但它使用自己的序列化算法[Link](http://msdn.microsoft.com/en-us/library/ms731923.aspx)。序列化标有 的对象时`[Serializable]`， `DataContractSerializer`遵循默认序列化模式（序列化所有成员，`[NonSerialized]`适用）。如果您需要更多控制，则可以实现`ISerializable`自定义序列化，然后可以在序列化对象[Serialization](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)中设置节点名称和值。

还有一个选项可以实现`IXmlSerializable`并完全控制序列化对象的外观。

# regex - 用于将句子与特定符号（如 %）匹配的正则表达式

> ID：16081894
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:37:30.930
> 
> 标签：regex, notepad++

我想要一个正则表达式来匹配以下句子。

```
myfunc(L"try my number 8 and value%s ",value);
myfunc(L"but %s is not true",word);
myfunc(L"his name is %s ",name); 
```

等等 。

但我不想匹配没有 % 的句子，如下所示

```
myfunc(L"It is raining"); 
```

即只应匹配具有 % 的句子。我尝试了以下模式，但它也匹配没有 % 的句子。

```
myfunc[(L"(A-Z)*(a-z)*(0-9)*(%)+(a-z)+(A-Z)*(a-z)*(0-9)*(,)+(A-Z)*(a-z)*(0-9))]

myfunc[(%)+] 
```

和

```
myfunc[(+(%)+)+] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:41:33.903

你不需要一个正则表达式......或者如果你真的觉得你需要使用一个，它所需要的，从字面上看，就是`"%"`.

为什么不尝试以下方法呢？

```
if '%' in myString:
    ## We have a match! 
```

编辑 DSM 的评论（现在您实际上已经说过这个问题与 Python 无关）：从您的更新看来，您实际上想要匹配整个事物，即“func(...”与百分比登录第一个参数，它是一个字符串。试试下面的正则表达式：

```
myfunc\(L\".*?%.*?\",[a-zA-Z]*\) 
```

或者，要将第一个参数字符串中的其他字符限制为字母数字和空格，您可以试试这个，这可能比上面的更健壮一点：

```
myfunc\(L\"[a-zA-Z0-9\s]*%[a-zA-Z0-9\s]*\",[a-zA-Z]*\) 
```

这将确保整个字符串与您的函数原型形状匹配，包括字符串之前的“L”、字符串中的“%”以及右括号之前的第二个字母参数。

# ruby-on-rails - Rails 跨域标头集，XMLHttpRequest 无法加载 http://www.d1.com/sign_in，Access-Control-Allow-Origin 不允许 Origin 某些东西

> ID：16081895
> 
> 赞同：2
> 
> 时间：2013-04-18T11:37:33.507
> 
> 标签：ruby-on-rails, ruby, ajax, browser, cross-domain

我正在从不同的来源向我的服务器发出 Ajax POST 请求以供用户登录。我已经在 application_controller.rb 中正确设置了 Cross Origin 标头：

```
def set_access_control_headers

  if request.options?
    headers['Access-Control-Allow-Origin'] = '*' 
    headers['Access-Control-Request-Method'] = '*'
    headers['Access-Control-Allow-Credentials'] = "true"
  end
end 
```

但我仍然得到：

```
XMLHttpRequest cannot load http://www.d1.com/sign_in. Origin http://www.d2.com is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T14:39:13.307

根据当前规范，您没有正确设置 Access-Control-Allow-Origin 或 Access-Control-Request-Method Response 标头。

Access-Control-Allow-Origin 需要是一个特定的域。如果您有多个应该被允许访问的域，请考虑使用域或子域的服务器端白名单来匹配请求来源，如果请求来源与白名单中的条目匹配，则将请求来源作为访问 - Control-Allow-Origin 响应标头值。

然后将 Access-Control-Request-Method Response 标头设置为您希望允许的方法，例如：GET、POST、OPTIONS

# opengl - 无法获取指定着色器类型的子程序信息

> ID：16081898
> 
> 赞同：3
> 
> 时间：2013-04-18T11:37:37.247
> 
> 标签：opengl, glsl

我正在使用分离的着色器对象程序，现在尝试集成子例程。

我使用 glGetSubroutineIndex() 获取子程序索引。然后我将当前子程序设置为：

```
glUniformSubroutinesuiv(GL_FRAGMENT_SHADER,1,&( _subrotines.find(method)->second)); 
```

我收到以下 OpenGL 错误消息：

> “ID:1282，SEVERITY:HIGH，消息：GL_INVALID_OPERATION 错误生成。注意获取指定着色器类型的子程序信息。”

这是我在片段着色器中定义子例程的方式：

```
subroutine vec4 RenderMode();
subroutine uniform RenderMode renderMode;

subroutine (RenderMode)
vec4 lightsMode(){

    // returns some color 
}
  subroutine (RenderMode)
vec4 colorMode(){

    // returns some color 
}

void main(void){

   vec4 fragout =renderMode();
   OUTPUT=  fragout;
} 
```

当我使用常规着色器程序时它确实工作正常，但似乎不适用于单独的着色器程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T00:43:23.093

在选择带有`glUniformSubroutinesuiv()`. 步骤是：

```
glUseProgram(program);
glUniformSubroutinesuiv(...);
glUseProgram(0); 
```

请记住，不使用您的程序将*重置*您的子程序选择。所以你将不得不`glUniformSubroutinesuiv()`再次打电话。

# matlab - Matlab中的多元随机数生成

> ID：16081904
> 
> 赞同：3
> 
> 时间：2013-04-18T11:37:47.717
> 
> 标签：matlab, random, covariance

我可能有点密集，但我不是很数学，似乎无法理解创建多元数据的协方差元素。

我在两列随机数据（代表两个相关变量）之后。

我认为我需要使用 mvnrnd 函数是正确的，并且我理解“mu”必须是我的平均向量的一列。因为我的数据中需要 4 个不同的类，所以它们将是 (1, 1) (-1 1) (1 -1) 和 (-1 -1)。我假设我每次都必须使用不同的平均向量列执行 4x 函数，然后将它们组合起来以获得我的完整数据集。

我不明白我应该为 SIGMA 放什么 - Matlab 帮助告诉我它必须是“d 乘 d 对称半正定矩阵，或 d 乘 d 乘 n 数组”，即协方差矩阵。我不明白如何为尚未生成的数字创建协方差矩阵。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:02:42.687

假设我正确理解了您的情况，我会这样做：

```
data = [normrnd(0,1,5000,1),normrnd(0,1,5000,1)]; %% your starting data series
MU = mean(data,1);
SIGMA = cov(data); 
```

现在，应该可以`mvnrnd`用`MU`and喂食了`SIGMA`：

```
r = mvnrnd(MU,SIGMA,5000);
plot(r(:,1),r(:,2),'+') %% in case you wanna plot the results 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T13:27:44.557

我认为您的目标是生成模拟的多元高斯分布数据。例如，我使用

`k = 6; % feature dimension mu = rand(1,k); sigma = 10*eye(k,k);`

单位矩阵乘以 10 是一个对称的半正定矩阵。并且高斯分布会比其他类型的 sigma 更圆。

然后您可以将其用作上述 mvnrnd 函数的示例并查看该图。

# r - 替换向量的元素

> ID：16081905
> 
> 赞同：6
> 
> 时间：2013-04-18T11:37:47.967
> 
> 标签：r

我有以下字符串：

```
string <- c("100 this is 100 test 100 string") 
```

我想用另一个向量的元素替换上面字符串中的 100：

```
replacement <- c(1000,2000,3000) 
```

字符串的前 100 应替换为 1000，第二个 100 应替换为 2000，依此类推。生成的字符串应如下所示：

```
result <- c("1000 this is 2000 test 3000 string") 
```

在 R 中有没有一种有效的方法来做到这一点？

谢谢你。

拉维

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:08:21.610

单程：

```
> cs <- strsplit(string," ")[[1]]
> cs[cs == "100"] <- replacement
> cat(cs)
1000 this is 2000 test 3000 string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:51:06.350

不是很优雅，但这应该可以..

```
string <- c("100 this is 100 test 100 string")
temp <- unlist(strsplit(string, split = "\\s+"))
replacement <- c(1000, 2000, 3000)
temp[temp == "100"] <- replacement
result <- paste(temp, collapse = " ")

result
## [1] "1000 this is 2000 test 3000 string" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T14:31:55.923

另一种方式（需要更改`replacement`为列表）：

```
string <- c("100 this is 100 test 100 string")
replacement <- list(1000, 2000, 3000)
result <- do.call(sprintf, c(gsub('100', '%d', string), replacement)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-08T01:24:52.743

派对迟到了，但`regmatches`有一个`regmatches(...) <- value`分配功能，可以让你在一个班轮中干净地做这种事情：

```
regmatches(string, gregexpr("100",string)) <- list(replacement)
string
# [1] "1000 this is 2000 test 3000 string" 
```

如果您不想覆盖原来的`string`，您可以通过以下方式直接调用该函数：

```
`regmatches<-`(string, gregexpr("100",string), value=list(replacement))
#[1] "1000 this is 2000 test 3000 string" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T11:52:48.973

这是一种方法`strsplit`：

```
split <- unlist(strsplit(string, "100", fixed=TRUE))
split <- split[nchar(split) > 0]
paste0(replacement, split, collapse="")
# [1] "1000 this is 2000 test 3000 string" 
```

第二行在这里是因为`strsplit`在其结果的开头添加了一个空字符串，因为`100`出现在第一个位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T14:19:41.530

如何使用`sub`和`*apply`

```
tail(sapply(replacement, function(x) {string <<- sub("\\b100\\b",x,string)}), 1) 
```

# asp.net - mysql中两列的总和

> ID：16081906
> 
> 赞同：1
> 
> 时间：2013-04-18T11:37:50.383
> 
> 标签：asp.net, mysql

我正在编写一份水晶报告，并且正在生成基于绩效的报告。这是我的查询

```
select mguser.userID, mguser.userName as Loger,date_format(trschedule.insDate,'%Y-%m-%d') as _Date,
count(distinct trschedule.scheduleID) as Schedule_Count, count(*) segment_count
FROM
mguser 
```

我想要这两列的总和--- count(distinct trschedule.scheduleID) as Schedule_Count, count(*) segment_count

我怎么能在mysql中做到这一点？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:44:35.530

```
select Loger,_Date, (Schedule_Count + segment_count) sum from
(
  select mguser.userID, mguser.userName as Loger,
     date_format(trschedule.insDate,'%Y-%m-%d') as _Date,
     count(distinct trschedule.scheduleID) as Schedule_Count, 
      count(*) segment_count
  FROM
  mguser
)d 
```

# iphone - StoreKit 是否处理非消耗性 Apple 托管的应用内购买的下载？

> ID：16081907
> 
> 赞同：0
> 
> 时间：2013-04-18T11:37:56.480
> 
> 标签：iphone, ios, ipad, in-app-purchase, storekit

当内容由 Apple 托管时，下载部分如何工作？Store Kit 会处理这个问题吗？恢复交易后，它会恢复中断的下载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T06:26:21.907

我建议您开始观看 WWDC 2012 “Session 302 - Selling Products with Store Kit”中的视频。

该视频详细解释了如何采用 App Store Hosted Contend 部分，并演示了它的工作原理。

[https://developer.apple.com/videos/wwdc/2012/#302](https://developer.apple.com/videos/wwdc/2012/#302)

# sharepoint - Sharepoint：在另一个列表中添加项目时更新项目

> ID：16081912
> 
> 赞同：0
> 
> 时间：2013-04-18T11:38:19.927
> 
> 标签：sharepoint, sharepoint-workflow

所以我不得不创建一个 Sharepoint 站点来盘点我们的服务器。我有两种类型的列表（每组复制几次，但为此，只需考虑两个列表），一种列出服务器并有一个列“NIC”，它在另一个列表上进行查找，其中列出了 NIC。

NIC 列表有一个“服务器”列，它从服务器列表中进行查找。一台服务器也可以有多个网卡，但一个网卡只能分配给一台服务器。我想将 niclists 'server'-column 设置为唯一涵盖了这方面？

假设我的 NIC 列表中有一些项目，“nic1”、“nic2”、“nic3”。如果我将一个服务器项添加到服务器列表并将“nic1”和“nic2”添加到它的 nic-lookupcolumn，我如何让 sharepoint 自动将此新的服务器项添加到“nic1”和“nic2”的服务器查找列？

我已经调查过工作流程，但我还没有找到通过 sharepoint 本身来做到这一点的方法。我发现的所有解决方案都建议在 ASP.net 中编码，但我没有这方面的经验。

（在单独的说明中，如何从新 nic 项的表单中删除服务器列？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T09:37:28.847

您可以为此使用 SharePoint 工作流。您只需要 SharePoint Designer。有一个名为的特定操作`Update List Item`允许您使用工作流程更新任何列表或`Create List Item`在不同列表上创建项目。您只需要正确设置您将使用的列表和工作流程。您可以遵循以下一般规则：

*   如果您正在更新列表，请确保子列表（或您将根据另一个列表的值更新的列表）具有来自您的父列表的唯一引用。

*   在列表中添加项目时使用`Update List Item`or`Create List Item`操作，以确保正确触发工作流。

由于查找通常只是用作另一个列表上的列的列表，因此在创建工作流时适用上述相同原则。

有关如何使用上述工作流操作的更多详细信息，您可以访问此[链接](http://rishijagati.blogspot.com/)和此[链接](http://sharepointresourcecenter.com/sharepoint-workflow-actions-create-list-item.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T12:57:42.233

您可以使用共享点设计器工作流程轻松地做到这一点，您可以创建一个工作流程来列出一个，然后在工作流程本身中，为另一个列表更新/创建一个新的列表项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:25:46.290

您可以使用 EventReceiver 来做到这一点。在 Visual Studio 中编写代码非常容易。 [http://msdn.microsoft.com/en-us/library/gg749858%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/gg749858%28v=office.14%29.aspx)

您可以使用项目创建/更新事件。

# javascript - 使用 jQuery 或 JavaScript 评估特定的数组值

> ID：16081915
> 
> 赞同：-2
> 
> 时间：2013-04-18T11:38:23.507
> 
> 标签：javascript, jquery

我的页面中有 160 个输入。我想添加每 8 个输入并将其输出到其他地方。而不是手动使用

```
var total1 = inputVals[0] + inputVals[1] + inputVals[2] + inputVals[3] + inputVals[4] + inputVals[5] + inputVals[6] + inputVals[7] + inputVals[8]; 
```

我想要一个函数，您可以使用它指定开始和结束索引，如 addarray(9, 17) ，它将添加其间的所有值并返回它。我更喜欢该函数在 javascript 中，但 jquery 可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:41:49.040

尝试

```
function calcTotal(index) {
    var total = 0;
    for (var i = 0; i < 9; i++) {
        total += inputVals[index + i];
    }
    return total;
}
var total1 = calcTotal(0); 
```

或者

```
function calcRangeTotal(index, count) {
    var total = 0;
    for (var i = 0; i < count; i++) {
        total += inputVals[index + i];
    }
    return total;
}
var total1 = calcRangeTotal(0, 9); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:43:48.257

假设您将`<input>`元素定义为：

```
<input type="text" class="myInput" />
<input type="text" class="myInput" />
<input type="text" class="myInput" />
... 
```

您可以在 jQuery 的帮助下创建一个完成这项工作的方法：

```
function add(start, end) {
    var total = 0;
    $(".myInput").slice(start, end).each(function() {
        total += +this.value;
    });
    return total;
} 
```

纯 JavaScript 中的相同方法如下所示：

```
function add(start, end) {
    var total = 0,
        inputs = document.getElementsByClassName("myInput");

    for (var i = start; i < Math.min(end, inputs.length); i++) [
        total += +inputs[i].value;
    });
    return total;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:49:58.633

看这个：

```
var calculate = function() {
    var sum=0;
    $("input").each(function(index,element){
        sum+=Number($(element).val());
    });
    alert(sum);
};

$(function(){
    $("button").on("click",calculate);
}); 
```

[这](http://jsfiddle.net/L8HR6/)是 jsFiddle。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T11:42:32.663

```
var sum = 0;

function caluculate(firstIndex,secondIndex){

   for(var i=one;i<secondIndex;i+=8)
     sum=parseInt(sum+inputVals[i]);   

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T11:43:54.657

```
function addarray($start,$end) {
   var total = 0;
   for(var i = $start; i < $end; i++)
       total += inputVals[i];
   return total;
}

var myTotal = addarray(9,17); 
```

# android - Android原生调试，找不到ndk-gdb库

> ID：16081920
> 
> 赞同：4
> 
> 时间：2013-04-18T11:38:41.573
> 
> 标签：android, gdb, java-native-interface

我有一个带有 JNI（和 SWIG）的 Android 应用程序。该应用程序运行良好，我可以调试 java 和本机代码，但我不断收到来自 gdb 的警告，我不知道它们来自哪里，我将代码剥离为一个非常简单的函数。我遵循了有关如何做到这一点的各种教程，我在 Mac OS X 10.6.8 和 Linux mint 12 上进行了尝试，我正在使用 eclipse (ADT)。

这就是我得到的警告：

```
warning: Could not load shared library symbols for 63 libraries, e.g.   /system/bin/linker.
Use the "info sharedlibrary" command to see the complete listing.
Do you need "set solib-search-path" or "set sysroot"?
warning: Unable to find dynamic linker breakpoint function.
GDB will retry eventurally.  Meanwhile, it is likely
that GDB is unable to debug shared library initializers
or resolve pending breakpoints after dlopen().
[New Thread 17108]
[New Thread 17110]
[New Thread 17112]
[New Thread 17113]
[New Thread 17114]
[New Thread 17115]
[New Thread 17116]
[New Thread 17117]
[New Thread 17118]
[Switching to Thread 17106] 
```

我不知道 gdb 正在寻找哪些库，知道吗？

这是信息共享库的输出

```
(gdb) info sharedlibrary
From        To          Syms Read   Shared Object Library
0x40003220  0x4000b940  Yes (*)     /home/andrea/workspace/pjsip_app/obj/local/armeabi/linker
0x4002c860  0x4005c07c  Yes (*)     /home/andrea/workspace/pjsip_app/obj/local/armeabi/libc.so
                        No          libstdc++.so
                        No          libm.so
                        No          liblog.so
                        No          libcutils.so
                        No          libgccdemangle.so
                        No          libcorkscrew.so
                        No          libz.so
                        No          libutils.so
                        No          libbinder.so
                        No          libemoji.so
                        No          libjpeg.so
                        No          libexpat.so
                        No          libskia.so
                        No          libandroidfw.so
                        No          libstlport.so
                        No          libnativehelper.so
                        No          libnetutils.so
                        No          libhardware.so
                        No          libsync.so
                        No          libui.so
                        No          libGLES_trace.so
                        No          libEGL.so
                        No          libGLESv2.so
                        No          libgui.so
                        No          libcamera_client.so
                        No          libgabi++.so
                        No          libicuuc.so
                        No          libicui18n.so
                        No          libsqlite.so
                        No          libdvm.so
                        No          libGLESv1_CM.so
                        No          libETC1.so
                        No          libwpa_client.so
                        No          libhardware_legacy.so
                        No          libsonivox.so
                        No          libcrypto.so
                        No          libssl.so
                        No          libstagefright_foundation.so
                        No          libspeexresampler.so
                        No          libaudioutils.so
                        No          libmedia_native.so
                        No          libmedia.so
                        No          libusbhost.so
                        No          libharfbuzz.so
                        No          libhwui.so
                        No          libandroid_runtime.so
                        No          libjavacore.so
                        No          libdrmframework.so
                        No          libdrmframework_jni.so
                        No          libstagefright_omx.so
                        No          libstagefright_yuv.so
                        No          libvorbisidec.so
                        No          libstagefright_enc_common.so
                        No          libstagefright_avc_common.so
                        No          libstagefright.so
                        No          libmtp.so
                        No          libexif.so
                        No          libstagefright_amrnb_common.so
                        No          libmedia_jni.so
                        No          libbcinfo.so
                        No          libbcc.so
                        No          libRS.so
                        No          librs_jni.so
                        No          libandroid.so
                        No          libchromium_net.so
                        No          libwebcore.so
                        No          libwilhelm.so
                        No          libOpenSLES.so
0x47ceb0f8  0x47e7fd98  Yes         /home/andrea/workspace/pjsip_app/obj/local/armeabi/libconnection.so
(*): Shared library is missing debugging information. 
```

# python - 如何让 jCryption 与 django 和 python-rsa（或其他 python 库）一起工作

> ID：16081930
> 
> 赞同：1
> 
> 时间：2013-04-18T11:39:03.393
> 
> 标签：python, django, rsa, pycrypto, jcryption

我想向客户端发送一些秘密数据，所以我想对其进行加密。

我在客户端使用[jCryption](http://www.jcryption.org/)。它在连接开始时使用握手，过程如下：

1.  客户端生成随机 AES 密码。
2.  客户端请求 RSA publicKey 表单服务器
3.  服务器发送
4.  客户端使用 RSA 公钥加密密码并将其发送到服务器。
5.  现在，双方都使用该密码来加密他们发送给对方的数据。

*我的问题*是在发送用 RSA 加密的密码的步骤中（步骤 4），因为 jCryption 以十六进制格式发送它，但[python-rsa](https://bitbucket.org/sybren/python-rsa)期望二进制整数，，

如何将 jCryption 输出转换为 python-rsa 可以处理的格式，或者是否有另一个库可以做到这一点？

RSA 密文如下所示：

> TO\xa75[\x9a\x07s4\x86\xbc\xae\xe3\xd5s)1\x0cd5\xdfY\xf7\xeds9\xf3~\n\x9fA$\xa9\xfb;\x04\x1e\x18\xf4\ xea\x7f\x91\xd9\xb7[\xd3\x138\xb6b\x9c\xb6\x1b\xe7\x11\x9aB\x1d@`y\x9c0\xe8\xb6!\x8b~lg\xabO\xbeny\xf7Xu \x89YW\xb0\xda@\x10\x0c\xe7\x85\x9bX\x8f\x02e\xdalf|\xa6\x0e\x8e\x8e\x9d\xd8=\x9bQLO7\x0fd\x19/]t?\xf1\ x96\x1b\xb9\x8bv\xb4\xb4rS\x1c\xb9

从 jCryption 发送的数据如下所示：

> 11a6ebb863c379255df711aba86ad3986d6ecc33402a1596e6036b8d33f41932909a3e8c10cc4e0d2ece5f369808020ac7241a4285c80e6e483a1f6b43d933149961f50b72a808c769d39215ce08c33cfdb543b68bb0cf644f32dccf7eb90547290d47b96758449df3e7d4ec 2b50aef21ff4735c79f74bf5214ff356e4338ff2b292110ad537d160e41e34b350c7bc857601a943f915285e62f308fb6bd61d275321b68fbf27a52fbffc27b9ad15810795ccdea6d9776246b84b00503c2711d49a3f101af6f2c822d697a71aeca684e20328071ce84da907

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-29T11:22:59.823

好的，我已经完成了这个任务，但首先我想说的是**，获得 LetsEncrypt 免费的 https 证书要容易得多，**我后来做了。

对于此解决方案，您需要安装 openssl。

让我们为我们的 ajax 编写视图

获取公钥。如果我们在项目目录中没有一个，则生成该对。

```
 def public_key(req):
        if not os.path.isfile(os.path.join(settings.BASE_DIR, 'form_key.pem')) or not os.path.isfile(os.path.join( settings.BASE_DIR,'form_key_pub.pem')):
            check_call(['openssl', 'genrsa', '-out', os.path.join(settings.BASE_DIR,'form_key.pem'), '4096'])
            check_call(['openssl', 'rsa', '-pubout', '-in', os.path.join(settings.BASE_DIR,'form_key.pem'), '-out', os.path.join(settings.BASE_DIR,'form_key_pub.pem')])
        f = open(os.path.join(settings.BASE_DIR,'form_key_pub.pem'))
        key = f.read()
        f.close()
        return JsonResponse({"publickey": key}) 
```

好的，握手。为了 CSRF 保护这个视图，我们需要修补我没有修补的 jCryption javascript 库。我在这里将 AES 密钥保存在会话存储中。

```
 @csrf_exempt
    def handshake(req):
        if req.method == 'POST':
            encb64key = req.POST['key']
            encb64key = re.sub(r'[^a-zA-Z0-9/=+]', '', encb64key)
            enckey = b64decode(encb64key)
            openssl = Popen(['openssl', 'rsautl', '-decrypt', '-inkey', os.path.join(settings.BASE_DIR,'form_key.pem')], stdin = PIPE, stdout=PIPE, stderr=PIPE)
            key, stderr = openssl.communicate(enckey)
            print stderr
            key = re.sub(r'[^a-zA-Z0-9]', '', key)
            req.session['form_key'] = key 
            openssl = Popen(['openssl', 'enc', '-aes-256-cbc', '-pass', 'pass:'+key, '-a', '-e'], stdin = PIPE, stdout = PIPE, stderr = PIPE)
            enckey , stderr = openssl.communicate(key)
            print stderr
            enckey = re.sub('[^a-zA-Z0-9/+=]', '' , enckey)
            return JsonResponse({'challenge': enckey})
        raise Http404() 
```

让我们为 urls.py 中的视图选择 url

```
 url('^pubkey', public_key, name = 'publickey'),
    url('^handshake', handshake, name = 'handshake'), 
```

而最棘手的部分。我们自己的中间件。您需要将其添加到 settings.py 中的 MIDDLEWARE_CLASSES 中。如果您将它放在 myapp 的 views.py 文件中，则类似于“myapp.views.JCryptionMiddleware”。

诀窍是我们仅使用“jCryption”属性发送了错误的 POST 数据。中间件解密此 attr 中的适当数据，并用它重写请求对象中的 POST 数据。阅读 Django 文档中的中间件。

```
 class JCryptionMiddleware(object):
        def process_view(self, request, callback, callback_args, callback_kwargs):
            jcryptedb64 = request.POST.get('jCryption', '')
            if jcryptedb64:
                try:
                    jcrypted = b64decode(jcryptedb64)
                    p = Popen(['openssl', 'enc', '-aes-256-cbc', '-pass', 'pass:'+request.session['form_key'], '-d'], stdin = PIPE, stdout = PIPE, stderr = PIPE)
                    qstr, stderr = p.communicate(jcrypted)
                    print stderr
                    wasmutable = request.POST._mutable
                    request.POST._mutable = True
                    request.POST.__init__(qstr)
                    request.POST._mutable = wasmutable
                except Exception as e:
                    print e
            return None 
```

以及带有表单模板的页面中的客户端代码。

```
 <script src="{{ STATIC_URL }}js/jquery.min.js"></script>
    <script src="{{ STATIC_URL }}js/jcryption.js"></script>
    <script>
    $(function() {
        $('form').jCryption({"getKeysURL": "/pubkey", "handshakeURL": "/handshake"});
    });
    </script> 
```

从我们的 urls.py 中查看 url。

例如，您可以加密您的管理员登录表单。将 login.html 从 django contrib admin 复制到 templates/admin/login.html 并将此 javascript 代码添加到模板中。

达达！不要使用这个，使用 HTTPS。

# database - 使用不同操作系统将项目从开发部署到生产的良好做法？

> ID：16081931
> 
> 赞同：1
> 
> 时间：2013-04-18T11:39:06.223
> 
> 标签：database, linux, windows, jsf, development-environment

我正在 JSF 中完成一个项目，但现在我必须重新创建所有链接（例如`localhost:8080/project/recoverpassword`，`www.project.com/recoverpassword`例如和许多其他链接。所以我想知道是否有任何其他方法可以更简单地做到这一点？

另一件事是我正在使用`Windows 7`开发平台，这个项目将被部署在`Linux`（可能是 CentOS 6）`paths`中，对于链接、图像、视频等来说，它们是完全不同的，当然是指本地内容（我认为将这些文件托管在应用程序运行的地方之外会很昂贵），因为文件系统不同，这会导致即使在 JPA 中的实体中引用的表名称中的数据库也会出现问题。所以这里的教训是我**必须**开发我的项目，它将被部署在哪里？还是我错了？还有另一种解决此问题的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:04:25.660

您应该始终拥有相同的开发、测试和生产环境。

否则，跟踪故障将成为一场噩梦，因为如果它们是由环境或您自己的软件引起的，您现在可能不会。

您可以做的一件事是设置复制目标环境的虚拟机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T12:33:38.967

我认为这`/project`是上下文路径。上下文路径确实是一个动态值，完全超出了您的 Web 应用程序项目的控制范围。

如果您从一开始就正确使用，则不需要重新创建所有链接：

*   [`<h:link>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html)而不是`<a>`内部链接
*   [`<h:graphicImage>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/graphicImage.html)而不是`<img>`内部图像
*   [`<h:outputScript>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputScript.html)而不是`<script>`用于内部 JS
*   [`<h:outputStylesheet>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputStylesheet.html)而不是`<style>`用于内部 CSS
*   [`#{request.contextPath}`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getContextPath%28%29)而不是硬编码`"/project"`以在视图中打印上下文路径
*   [`ExternalContext#getRequestContextPath()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getRequestContextPath%28%29)把它放进豆子里

必要时，提到的标签会自动添加当前上下文路径。换句话说，您**永远**不需要`/project`在代码中的任何位置对表示上下文路径的字符串进行硬编码。

自己振作起来，咬紧牙关，花一整天时间在当前项目中解决所有问题，并为未来的项目吸取教训。

### 也可以看看：

*   [JSF 有类似 <c:url> 的东西吗？](https://stackoverflow.com/questions/7730483/is-there-something-like-curl-for-jsf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:12:46.400

我前段时间遇到过你的问题。我自己的解决方案是创建一个`Constants`文件，将所有与系统相关的变量放入其中。例如，

```
public class Constants {
    // Local development
    private static final String PHOTO_FOLDER = "C:\path\to\photos\Windows";
    private static final String APP_PATH     = "localhost:8080/project/";

    // Online server
    private static final String PHOTO_FOLDER = "/path/to/photos/Linux";
    private static final String APP_PATH     = "www.project.com/";
} 
```

上述类中的任何常量都可以在任何`@ManagedBean`using中访问`Constants.PROPERTY`。如果您想访问`.xhtml`页面内的常量，您可以创建一个`.properties`具有类似内容的文件：

```
// Local development
PHOTO_FOLDER = C:\path\to\photos\Windows
APP_PATH     = localhost:8080/project/

// Online server
PHOTO_FOLDER = /path/to/photos/Linux
APP_PATH     = www.project.com/ 
```

然后在您的文件中声明此`.properties`文件`faces-config.xml`为`ResourceBundle`：

```
<faces-config version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
    <application>

        <resource-bundle>
            <base-name>your_package.constants</base-name>
            <var>constants</var>
        </resource-bundle>

    </application>
</faces-config> 
```

此时，您可以`.xhtml`使用`#{constants.PROPERTY}`.

取决于您在哪里部署应用程序，只需注释掉不必要的行 :)。

此外，当您处理文件名时，只需使用`File.separator`分隔文件夹就可以了：P。

我正在做的绝对不是最佳实践，但它是实现您想要的东西的一种非常简单的方法：P。BalusC 的答案应该是目前处理这些组件时的最佳实践。所以也许混合动力车应该很酷？:)

# sql-server - 检查我的数据库中已经存在的地理位置

> ID：16081934
> 
> 赞同：0
> 
> 时间：2013-04-18T11:39:10.280
> 
> 标签：sql-server, geolocation

我可以移动我当前的地理位置（long./lat.），我会将此地理位置在线存储在 sql server 2008 数据库中。我如何检查我还没有这个位置（可能在 100 米的半径内）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:52:10.900

我能想到的最简单的方法是 WHERE NOT EXISTS（100 米内的位置。）

这是一个示例实现：

```
--A table with some coordinates.
create table #myexistinglocations
(id int identity(1,1) primary key clustered not null
,location geography not null
,shortdescription varchar(30) null
)
insert into #myexistinglocations
values(geography::Point(40.750508,-73.993735,4326),'Madison Square Garden')
,(geography::Point(40.705524,-74.01351,4326),'Charging Bull')
;

WITH myNewLocations(l,sd) --Represents the new stuff I want to put in.
as
(
SELECT geography::Point(40.70585,-74.013486,4326),'Wall Street bull!'
UNION ALL SELECT geography::Point(40.713728,-73.990173,4326),'East Broadway!'
)
SELECT
*
FROM myNewLocations as a
WHERE NOT EXISTS (SELECT 1 FROM #myexistinglocations as b WHERE b.location.STDistance ( a.l ) <= 100) 
```

最后一行对您的问题至关重要。只有“东百老汇！” 将回归自“华尔街公牛！” 离现有位置太近。

# javascript - 使用 onclick 功能播放声音（不工作！）

> ID：16081940
> 
> 赞同：0
> 
> 时间：2013-04-18T11:39:39.613
> 
> 标签：javascript, audio, onclick, playback

我试图在按下按钮时播放声音。我在我的 javascript 文件中使用了这个函数

```
function playSound(soundfile) {
    alert('hello');
     document.getElementById("sound").innerHTML=
     "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
     } 
```

执行，其余的`alert('hello')`不会。我也没有收到任何错误。它根本不玩。

我在这里调用函数

```
<button class="button_start" style="float:left;color:green;" onclick="start();">Start</button> 
```

start() 函数在这里，包括 playSound()。

```
function start(){

    playSound('bip.mp3');

    if (control == -1) alert('Please select the time and press "Set" before starting a countdown');
    else if (control == 0) { control = 1; timer(); }
    //else if (control == 1) alert('Your countdown is already running');    
} 
```

是的，我的 HTML 中有这个。

```
<div id="sound"></div> 
```

Chrome 和 Firefox 都试过了，都没有。

我真的很绝望，因为整个页面都是一个计时器，它应该在它结束时播放哔声。

谢谢！

# tcl - 需要期望脚本的帮助

> ID：16081943
> 
> 赞同：0
> 
> 时间：2013-04-18T11:39:43.877
> 
> 标签：tcl, expect

我正在尝试实现某个期望脚本我有一个 txt 文件..

它包含类似的数据

```
1 ip telnetname slot1 slot2 assoc1 assoc2 mep1 mep2
2 ip telnetname slot1 slot2 assoc1 assoc2 mep1 mep2 
```

我想制作一个期望脚本，它为文件中的每一行生成一个 telnet 会话，该会话使用从该行设置的变量，例如从第 1 行生成 telnet，其中每个单词 1 作为一个变量集，以便稍后在命令中使用。

这是我到目前为止尝试过的

```
foreach ip $ips telnetname $telnetnames slot1 $slots1 slot2 $slots2  { commands here } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:59:09.437

从描述中不太清楚您要尝试做什么，但让您的代码像这样工作可能是最简单的：

```
# Slurp the data into Tcl; it's not *that* long, is it?
set f [open "inputfile.txt"]
set data [read $f]
close $f

foreach line [split $data "\n"] {
    # Tcl's [scan] is like C's sscanf(), but memory-safe!
    if {[scan $line "%d %s %s %s %s" -> ip telnetname slot1 slot2] != 5} {
        # Not what was expected; skip it!
        continue
    }
    # Now do something with $ip, $telnetname, $slot1 and $slot2 ...
} 
```

# jsp - 如何停止在 Tomcat 中获取错误报告

> ID：16081945
> 
> 赞同：-1
> 
> 时间：2013-04-18T11:39:47.943
> 
> 标签：jsp, tomcat

我创建了一个 JSP 页面来测试如何连接到 Oracle，我正在使用此代码。

```
 String CONN_STRING = "jdbc:oracle:thin:@localhost:1521:orcl";

    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    Connection conn = DriverManager.getConnection(CONN_STRING,
            "UMS", "d0801213177"); 
```

当发生诸如 oracle 正在初始化或 TNS 拒绝进行更多连接或更改数据库密码等情况时，我在加载页面时收到错误报告。显示总连接字符串。如果在用户使用此页面时发生这种情况，那么我的安全性将丢失。

所以，我的问题**是有什么方法可以阻止 Tomcat 表单报告错误吗？”**。如果有更好的方法，请告诉。

**跟进：**如果我使用的是准备好的语句，则表/视图之类的错误不存在这些类型的错误是普遍的，所以我需要将每个块放在单独的 try catch 块中吗？

# 编辑

作为初学者，我一直在努力隐藏 stackTrace，因为它也显示了我的连接字符串、用户名和密码。

现在我知道我一开始就不应该在 JSP 中编写这段代码。使用 Servlet 来完成这项任务会更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:47:54.030

JSP 为您提供了为每个 JSP 指定错误页面的选项。每当页面抛出异常时，JSP 容器都会自动调用错误页面。

```
<%@ page language="java"  errorPage="" %>
<html>
<head>
<title>Error Handling by try catch block in JSP</title>
</head>

<body>
<%
try{
     String CONN_STRING = "jdbc:oracle:thin:@localhost:1521:orcl";

    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
    Connection conn = DriverManager.getConnection(CONN_STRING,
        "UMS", "d0801213177");
}
catch(Exception e)
{
  e.printStackTrace();
  out.print("Error caught by Catch block is : "+e.getMessage());
}
%>
</body>
</html> 
```

最好在 servlet 中执行业务逻辑，并使用 requestDispatcher 将其重定向到 jsp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T11:49:27.447

我认为`errorPage`该`page`指令。例如，将其放在 .jsp 页面的顶部：

```
<%@ page errorPage="ExceptionHandler.jsp" %> 
```

当你得到一个异常时，它会被`ExceptionHandler.jsp`页面“捕获”，它能够处理它。

该`ExceptionHandler.jsp`页面将是这样的：

```
<%@ page isErrorPage="true" import="java.io.*" %>
<html>
<head>
    <title>Exceptional Even Occurred!</title>
    <style>
    body, p { font-family:Tahoma; font-size:10pt; padding-left:30; }
    pre { font-size:8pt; }
    </style>
</head>
    <body>
    <%-- Exception Handler --%>
    <font color="red">
        <%= exception.toString() %><br>
    </font>
    <%
        out.println("<!--");
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        exception.printStackTrace(pw);
        out.print(sw);
        sw.close();
        pw.close();
        out.println("-->");
    %>
    </body>
</html> 
```

...启用它。

有关更多信息，请查看本文中的详细信息和完整示例：[JSP 页面中的异常处理](http://www.stardeveloper.com/articles/display.html?article=2001072401&page=1)。

# asp.net - 白屏问题，如果用户在 asp.net 页面中保持空闲状态

> ID：16081946
> 
> 赞同：8
> 
> 时间：2013-04-18T11:39:49.657
> 
> 标签：asp.net

在我们的 ASP.NET 网站中，其中一个页面中有一些选项卡。每个选项卡代表不同的内容，从一个选项卡移动到另一个选项卡会重新加载整个页面。**如果我目前在其中一个选项卡中并在那里闲置大约一分钟或更长时间，然后转到另一个选项卡，则只会出现一个白色的空白屏幕。**（在浏览器中没有页面源代码信息）。

可悲的是，在较低的测试环境中，同一网站根本无法重现同样的问题。问题仅出现在网站的生产版本中。

是否有我应该更改的 IIS 设置或 web.config 设置来解决此问题。因为我相信相关网页的源代码不会成为原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T17:01:26.583

这可能是因为会话超时已达到结束会话的限制。

在这种情况下，您有三种可能的解决方案：

**第一的**

您可以尝试编辑`web.config`位于应用程序根目录的文件以延长会话超时。尝试这样的事情：

```
<sessionState mode="StateServer" timeout="500">

</sessionState> 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/h6bb9cz9(vs.80).aspx)，您最多可以设置`timeout`分钟`525,601`（1 年）。

**第二**

如果它不起作用并且您可以访问，您可以尝试在 IIS 上编辑超时：

> 打开 IIS，单击应用程序池，为您的应用程序选择应用程序池。
> 
> 右键单击它，选择属性。
> 
> 在“性能”选项卡中，将空闲超时设置为“空闲 ..... 分钟后关闭工作进程”所需的分钟数。
> 
> 重要提示：除此之外，您必须如上所述在 web.config 中设置超时。

**第三**

您可以创建一个`ajax`要在后台执行的函数，以防止会话过期：

```
function keepSessionAlive(mod) {
mod.open("GET", "blank.html", true);            
mod.onreadystatechange = function() {
    if (mod.readyState == 4) {          
        document.getElementById("#blankDiv").innerHTML = mod.responseText;
    }
};  
mod.send(null)
}
setInterval('keepSessionAlive()', 100000); 
```

而已。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T02:19:23.003

如果在 Firefox 中，我会打开 chome 开发工具或 firebug。如果在萤火虫中，我会查看网络和控制台选项卡，并从网络角度查看实际发生的情况。应该很容易查看开发中的流量并与生产进行比较。我猜它们不一样，它会立即为您指明正确的方向。

如果您想像中间人一样观察流量，Fiddler 也是一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T06:29:06.143

您是否使用任何自定义 http 模块？我们可以看看页面源aspx和后面的代码吗？当我使用 elmah 但在完全不同的情况下，它发生在我身上。

其他可能是由于其他人指出的会话问题。希望有帮助。

# java - 将 XML 发布到服务器时发生套接字编程错误

> ID：16081949
> 
> 赞同：0
> 
> 时间：2013-04-18T11:39:56.970
> 
> 标签：java, sockets

```
public static String postTOServer(String ip_port ,int nodexml)
{
    logger.error("node Xml is "+Node.writeToString(nodexml,true));
    Socket requestSocket = null;
    ObjectOutputStream out = null;
    ObjectInputStream in = null;
    String message = null;
    String ip_port_split[] = ip_port.split("@");
    String ip_p = null; 
    Integer ip_ip = 0;
    if(ip_port_split.length != 0 && nodexml != 0)
    {
        ip_p=ip_port_split[0];
        logger.error("Ip_p is "+ip_p);
        ip_ip=Integer.parseInt(ip_port_split[1]);

        logger.error("Ip_ip is "+ip_ip);
        try{

        requestSocket = new Socket(ip_p, ip_ip);
        out = new ObjectOutputStream(requestSocket.getOutputStream());
        out.flush();
        in = new ObjectInputStream(requestSocket.getInputStream());
                  logger.error("request Socket Input Stream "+requestSocket.getInputStream());

                /*FileInputStream fstream = new FileInputStream(filepath);

                  BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
                  String strLine;
                  String xml = "";
                  while ((strLine = br.readLine()) != null)   {
                      xml = xml + strLine;
                  }*/
                sendMessage(Node.writeToString(nodexml, false),out);
                in.
                message = (String)in.readObject();
                logger.error("The Message is "+message);

    }
    catch(ClassNotFoundException classNot){
        logger.error("Class Not Found "+classNot);
    } 
    catch(UnknownHostException unknownHost){
        logger.error("Unknown Host Exception "+unknownHost);
    }
    catch(IOException ioException){
        logger.error("Io Exception 1 "+ioException);
    }
    finally{
        //4: Closing connection
            try{
                in.close();
                out.close();
                requestSocket.close();
            }
            catch(IOException ioException){
                logger.error("Io Exception in Finally Block "+ioException);
            }
        }
    }
    else{
        throw new BsfConstraintViolationException("Error Message");

        }
    return message;
}
public static void sendMessage(String msg,ObjectOutputStream out)
{
    try{
        out.writeObject("Content-Type: text/xml; charset=\"utf-8\"\r\n");
        //out.writeObject(msg);

        logger.error("The Message Which is getting Posted "+msg);
        out.flush();
    }
    catch(IOException ioException){
        logger.error("Io Exception in sendMessage MEthod "+ioException);
    }
} 
```

我得到以下异常：

**Io 异常 1 java.net.SocketException：软件导致连接中止：recv 失败**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-16T03:21:19.770

问题解决了。侦听器不接受通过给定代码错误发布的新行 (/n)。

# javascript - 将数组值分配给变量

> ID：16081952
> 
> 赞同：3
> 
> 时间：2013-04-18T11:40:02.367
> 
> 标签：javascript, arrays, variables

我遇到了一个我确实设法解决的问题，但老实说我不明白它是如何工作的。

```
var array = [3, 6, 2, 56, 32, 5, 89, 32];
var largest = 0;
//My code
for (var i = 0; i < array.length; i++) {
    if (array[i] > largest) {
        largest = array[i];
    }
}

console.log(largest); 
```

我的数组如何在 if 语句中为我的变量赋值？

为什么这个版本不起作用？

```
array[i] = largest; 
```

我对编程很陌生，我相信了解这么小的基础知识可以帮助许多初学者成为称职的程序员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T11:43:48.747

```
if(array[i] > largest) {
           largest = array[i];
        } 
```

`array[i]`is `3`and `largest`is `0`then 如果条件通过并且

```
largest = array[i]; 
```

现在从右到左`largest`赋值为`3`.

所以下一个循环`array[i]`是`6`那么下一个`6 > 3`真实的，它会再次改变的`largest to 6`。

喜欢它会给你最大的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:58:30.237

我认为您将编程中的赋值语句误认为数学中的相等语句。

[分配与平等](http://en.wikipedia.org/wiki/Assignment_%28computer_science%29#Assignment_versus_equality)

在您的代码中，当您说最大 = array[i] 时，您正在为变量“最大”分配数组第 i 个位置上元素的值。请注意，该数组在此分配中没有更改其任何值。

另一方面，array[i] = maximum 将尝试将变量“最大”的当前值分配给数组的第 i 个位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T11:43:26.343

此代码正在尝试计算值数组中的最大值..

正在做

```
array[i] = largest; 
```

会修改不想要的输入本身...您需要从给定输入中找到最大值..而不是将给定输入位置修改为某个最大值。

这就是为什么

```
largest = array[i] 
```

是正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-28T17:57:03.300

为变量赋值时，变量必须位于赋值运算符的左侧（等号“=”）。

这种方式左侧有变量：

```
largest = array[i]; 
```

它将*array[i]*值放入*最大*的变量中，因此它可以工作。

这种方式是倒退的：

```
array[i] = largest; 
```

它将*最大值*放入*array[i]*元素中，您的数组最终会出现一堆零。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-07T20:41:41.937

我知道这是一个旧线程，但我今天遇到了这个问题，并想帮助其他开发人员获得适当的知识来源，直接来自 Kyle Simpson。

> [你不懂JS](https://github.com/getify/You-Dont-Know-JS)

操作员分配有他自己的工作方式。它计算右侧“=”的语句，以便稍后将其分配给左侧。了解它是如何工作的非常重要。

例子：

```
var array = [3, 6, 2, 56, 32, 5, 89, 32];
var largest = 0;
//My code
for (var i = 0; i < array.length; i++) {
    if (array[i] > largest) {
        largest = array[i];
    }
}

console.log(largest); 
```

这里，`largest = array[i];`

JS, 是**计算****右边**的语句并**赋值给左边**

所以玩得开心，玩得开心。

# jquery - 单击其他选项卡时不显示选项卡内容

> ID：16081956
> 
> 赞同：0
> 
> 时间：2013-04-18T11:40:23.877
> 
> 标签：jquery, codeigniter, tabs

我是创建标签的新手。我正在关注这里的教程[http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-a-slick-tabbed-content-area/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-create-a-slick-tabbed-content-area/)

我的标签的问题是当我单击下一个标签时，所有内容都消失了

这是我的html；

```
<div class="tabbed_area">
    <ul class="tabs">
        <li><a href="#" id="tab1" class="tab active">Articles</a></li>
        <li><a href="#" id="tab2" class="tab">Videos</a></li>
        <li><a href="#" id="tab3" class="tab">Exclusive</a></li>
   </ul>

        <div id="content1" class="content" ><p>This is Tab 1</p></div>
        <div id="content2" class="content" ><p>This is Tab 2</p></div>
        <div id="content3" class="content" ><p>This is Tab 3</p></div>

</div> 
```

Jquery 在这里；

```
$("a.tab").click(function () {  

    // switch all tabs off  
    $(".active").removeClass("active");  

    // switch this tab on  
    $(this).addClass("active");  

    // slide all elements with the class 'content' up  
    $(".content").slideUp();  

    // Now figure out what the 'title' attribute value is and find the element with that id.  Then slide that down.  
    var content_show = $(this).attr("title");  
    $("#"+content_show).slideDown();  

}); 
```

谁能找到问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:49:35.470

您也可以使用[**Tabs**](http://jqueryui.com/tabs/)简单地尝试一下：

```
$("#tabs").tabs({ fx: { height: 'toggle', duration: 500 } }); 
```

[**在这里演示**](http://jsfiddle.net/tYyBC/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T11:43:39.230

教程是说你在列表中添加一个标题属性，否则你的 JavaScript 在更改选项卡时将没有任何依据。它需要有一些东西来识别您要打开的 div 内容。

```
<ul class="tabs">  
    <li><a href="#" title="content_1" class="tab active">Topics</a></li>  
    <li><a href="#" title="content_2" class="tab">Archives</a></li>  
    <li><a href="#" title="content_3" class="tab">Pages</a></li>  
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:44:51.353

尝试将`title`属性放置在`<a>`锚点上：

```
<ul class="tabs">
  <li><a href="#" title='content1' id="tab1" class="tab active">Articles</a></li>
  <li><a href="#" title='content2' id="tab2" class="tab">Videos</a></li>
  <li><a href="#" title='content3' id="tab3" class="tab">Exclusive</a></li>
</ul>//-----------^^^^^^^^^^^^^^^------these titles are important to put 
```

# templates - Symfony2 控制器中的多个@template

> ID：16081961
> 
> 赞同：0
> 
> 时间：2013-04-18T11:40:38.350
> 
> 标签：templates, symfony, controller, twig

我对 symfony2 很陌生，过去几天一直在努力解决问题。我的控制器是

```
<?php

namespace Myname\AdminBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

class DefaultController extends Controller
{
    /**
     * @Route("/admin/{type}/{nav}", defaults={"nav"="nil"})
     * @Template("MyBundle::index.html.twig")
     */
    public function indexAction($type, $nav)
    {
        return array('type' => $type, 'nav' => $nav);

    }

    /**
     * @Route("/myLink/accounts", name="page_accounts")
     * @Template("MyBundle::accounts.html.twig")
     */
    public function accountsAction()
    {
        return $this->render('MyBundle::accounts.html.twig');
    }
} 
```

但是我面临的问题是，我尝试使用哪个链接，它使用的是第一个定义的模板，而第二个模板永远不会呈现。但是如果我从代码中删除第一个模板，第二个模板就可以正常工作了。任何评论都会非常棒，因为我在过去 4 天都被困住了。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T22:08:59.190

我不确定我是否完全理解您的问题。但是，我认为您的控制器以及您如何使用 @Template 注释存在一些问题。

首先，如果您遵循默认约定，那么您甚至不需要指定要使用的模板。此外，在使用 @Template 注释时，您应该返回一个数组。

如果这些都没有帮助或相关，您能否再澄清一些？

```
class DefaultController extends Controller
{
    /**
     * @Route("/admin/{type}/{nav}", defaults={"nav"="nil"})
     * @Template
     */
    public function indexAction($type, $nav)
    {
        return array('type' => $type, 'nav' => $nav);

    }

    /**
     * @Route("/myLink/accounts", name="page_accounts")
     * @Template
     */
    public function accountsAction()
    {
        return array();
    }
} 
```

# salesforce - SOQL 中的 LIKE 运算符不会转义特殊字符

> ID：16081962
> 
> 赞同：1
> 
> 时间：2013-04-18T11:40:43.490
> 
> 标签：salesforce, sql-like, soql

嗨，下面是我的 SOQL qoery

```
SELECT ID,Name, Dodge_Report_Number__c,Project_Name__c,Bid_Date__c,GC_Awarded__c,Action_Stage__c,Target_Start_Date__c,Project_Valuation_High__c,Project_Valuation_Low__c,Type_Of_Work__c,Removed_By__r.Name, Removed_By__r.LastName ,Removed_By__r.FirstName,Reason_Removed_Comments__c,Reason_Why_Project_Removed__c,Branch_ID__c FROM Dodge_Project__c WHERE Branch_ID__c != null AND CreatedDate >= LAST_QUARTER AND CreatedDate <= THIS_QUARTER AND Job_Profile_Status__c NOT IN('Created','Removed') AND Branch_ID__c IN('101','102','909','903','941','994','217','904') AND (Action_Stage__c IN ('Start','Construction') OR GC_Awarded__c = TRUE) and (Name like 'P@#$&(%' or Dodge_Report_Number__c like 'P@#$&(%' or Project_Name__c like 'P@#$&(%' or Action_Stage__c like 'P@#$&(%' or Type_Of_Work__c like 'P@#$&(%' or Removed_By__r.Name like 'P@#$&(%' or Reason_Why_Project_Removed__c like 'P@#$&(%' or Branch_ID__c like 'P@#$&(%') order by Name asc NULLS FIRST 
```

我收到一个错误，例如“在与“like”运算符一起使用的过滤器值“P@#$&(%”中发现无效字符”。

如果我像这样写查询

```
SELECT ID,Name, 

Dodge_Report_Number__c,Project_Name__c,Bid_Date__c,GC_Awarded__c,Action_Stage__c,Target_Start_Date__c,Project_Valuation_High__c,Pro

ject_Valuation_Low__c,Type_Of_Work__c,Removed_By__r.Name, Removed_By__r.LastName 

,Removed_By__r.FirstName,Reason_Removed_Comments__c,Reason_Why_Project_Removed__c,Branch_ID__c FROM Dodge_Project__c WHERE 

Branch_ID__c != null AND CreatedDate >= LAST_QUARTER AND CreatedDate <= THIS_QUARTER AND Job_Profile_Status__c NOT IN

('Created','Removed') AND Branch_ID__c IN('101','102','909','903','941','994','217','904') AND (Action_Stage__c IN 

('Start','Construction') OR GC_Awarded__c = TRUE) and ( Project_Name__c like 'P@#$&(%' ) order by Name asc NULLS FIRST 
```

它工作正常。

问题是什么？谢谢。

# python - Python 字典和映射性能

> ID：16081963
> 
> 赞同：0
> 
> 时间：2013-04-18T11:40:50.600
> 
> 标签：python

许多算法需要将键映射到数据值。假设我需要将一个实体映射到另一个实体。

```
map = {}
obj1 = ClassA()
obj2 = ClassB() 
```

现在我可以通过两种不同的方式做到这一点：

```
map[obj1] = obj2 
```

或者

```
map[obj1.uniqueName] = obj2 
```

专家会使用哪个版本？或者哪个版本更快？

使用字符串作为键还是实体本身更好（更快）？有任何性能差异吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:43:50.287

有两个主要因素会影响您的表现：

1.  hash() 方法的速度。（即，`__hash__`）
2.  哈希冲突的频率。

字符串散列通常既相当快又具有良好的属性，这意味着散列唯一字符串是一个很好的默认选择。但是，如果您可以为您的类提供一个非常快速且无冲突的哈希函数，那将是最佳选择。

（就个人而言，由于懒惰，我会选择弦乐。）

# ios - 查明 PNG 是 8 位还是 24 位和 alpha

> ID：16081966
> 
> 赞同：2
> 
> 时间：2013-04-18T11:41:03.157
> 
> 标签：ios, cocoa-touch, cocoa, png

给定一个`UIImage`/`NSImage`或`NSData`实例，如何以**编程**方式找出PNG 是 8 位还是 24 位？如果它有一个阿尔法通道？

是否有任何 Cocoa/Cocoa Touch API 对此有帮助？

为避免重复，这里是对该问题的[非程序化答案](https://stackoverflow.com/questions/6278159/find-out-if-png-is-8-or-24)，这是一种确定[图像是否为 PNG 的](https://stackoverflow.com/questions/4147311/finding-image-type-from-nsdata-or-uiimage)方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T11:46:48.023

As a person who programmed for a long time on a J2ME platform, I know the PNG format very well. If you have the raw data as a `NSData` instance, looking up the information is very easy since the PNG format is very straightforward.

See [PNG Specification](http://www.libpng.org/pub/png/spec/1.2/PNG-Contents.html)

The PNG file starts with a signature and then it contains a sequence of chunks. You are interested only in the first chunk, `IHDR`.

So, the code should be along the lines of:

1.  Skip the first 8 bytes (signature)
2.  Skip 4 bytes (IHDR chunk length)
3.  Skip 4 bytes (IHDR chunk type = "IHDR")
4.  Read IHDR

> Width: 4 bytes
> Height: 4 bytes
> Bit depth: 1 byte
> Color type: 1 byte
> Compression method: 1 byte
> Filter method: 1 byte
> Interlace method: 1 byte

For alpha, you should also check if there is a `tRNS` (transparency) chunk in the file. To find a chunk, you can go with the following algorithm:

1.  Read chunk length (4 bytes)
2.  Read chunk type (4 bytes)
3.  Check chunk type whether it is the type we are looking for
4.  Skip chunk length bytes
5.  Skip 4 bytes of CRC
6.  Repeat

**EDIT:**

To find info about a `UIImage` instance, get its `CGImage` and use one of the `CGImageGet...` functions. It should be noted that **All** integer values in a PNG file are read in *Big-endian* format.

# .net - 如何在“部分”异步方法上应用 TAP？

> ID：16081991
> 
> 赞同：2
> 
> 时间：2013-04-18T11:42:13.980
> 
> 标签：.net, task-parallel-library

我将首先解释“部分”异步的含义：
我有一个方法`A`可以做很多事情。其中之一是调用另一种`B`（完全）异步的方法。结果，我让`A`返回任务`B`并继续执行其余的`A`工作。

Now`A`也是一个异步方法，但是之前`B`调用的所有内容仍然是同步的。根据[TAP](http://msdn.microsoft.com/en-us/library/hh873175.aspx)，异步方法在返回任务之前应该只做最少的同步工作。

在这种情况下我该怎么办？

这些是我考虑过的选项：

1.  让任何代码调用`A`包装`A`在一个任务中。
    1.  只是不要后缀`A`“异步”。
    2.  也不要做`B`异步。
2.  使`A`完全异步。

    1.  使用异步后缀`A`并将整个包装`A`在一个任务中。
    2.  不要再做`B`异步了，因为`A`'s Task 已经包装了它。

## 代码：

根据

```
public Task BAsync() {
    return Task.Run(B);
}

private void B() { /* stuff.. */ } 
```

选项 1.1

```
public async Task A() {
    // stuff..
    await BAsync();
    // stuff..
} 
```

选项 1.2

```
public void A() {
    // stuff..
    B();
    // stuff..
} 
```

选项 2.1

```
public Task AAsync() {
    return Task.Run(A);
}

private async Task A() {
    // stuff..
    await BAsync();
    // stuff..
} 
```

选项 2.2

```
public Task AAsync() {
    return Task.Run(A);
}

private void A() {
    // stuff..
    B();
    // stuff..
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:39:08.417

我认为基本原则是同步方法应该是同步的，异步方法应该是异步的，两者之间不应该有任何关系。

所以我认为选项 2.1 在这里是最好的。

如果您有类似性能关键的 ASP.NET 应用程序，则可能是一个例外。您那里没有 UI 线程（您希望尽可能保持自由）。而且您可能关心异步运行所有代码的性能损失。在这种情况下，我认为选项 1 是合适的（但也应该记录行为）。

# php - 值不会按每一行显示

> ID：16081992
> 
> 赞同：0
> 
> 时间：2013-04-18T11:42:14.297
> 
> 标签：php, arrays

我有个问题。
一个数组会从中返回一些动态数据。

```
<?php 
foreach($ItemArray as $key => $value) {
    echo '
    <tr><td height="30" valign="middle">'.$value['nr'].'</td>
    <td valign="middle">'.$value['product'].'</td>
    <td valign="middle">'.$value['describe'].'</td>
    <td valign="middle" id="price_'.$key.'">'.$value['price'].'</td>
    <td valign="middle" class="box_darker" id="amount_'.$key.'">
    <input name="Field_Amount_'.$key.'" id="Field_Amount_'.$key.'" class="Field_Amount" type="text" /></td>
    <td valign="middle" id="price_'.$key.'">$key</td></tr>'; }
;?> 
```

现在我会测试当点击属于字段（td/price）时该值是否返回正确的值

```
$(document).on('click', '[id^=price_]', function(){
var Amount = $('[id^=Field_Amount_]').val();
alert(Amount);
}); 
```

但是不要介意我点击的每一行中的哪个字段（td/price），它只提醒我第一行的值！也许是因为数据动态加载？

对不起，糟糕的英语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T11:47:33.187

那是因为您也对全局范围执行了第二次搜索，`val()`并将返回第一个元素的值。改用`$(this).parent().find()`：

```
$(document).on('click', '[id^=price_]', function(){
    var Amount = $(this).parent().find('[id^=Field_Amount_]').val();
    alert(Amount);
}); 
```

或者，您还应该能够使用`.closest()`：

```
$(document).on('click', '[id^=price_]', function(){
    var Amount = $(this).closest('[id^=Field_Amount_]').val();
    alert(Amount);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T11:48:53.987

您的触发事件工作正常，因为每一行都会对点击做出反应。

“错误”的是 Field_amount 的选择器。这总是选择第一个 Field_Amount_ 因为选择器在整个页面上工作。

尝试使用[.closest()](http://api.jquery.com/closest/)函数：

```
$(document).on('click', '[id^=price_]', function(){
    var Amount = $(this).closest('[id^=Field_Amount_]').val();
    alert(Amount);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T12:01:37.233

尝试这个

```
$(document).on('click', '[id^=price_]', function(){
    var key = $(this).attr('id').split('price_');
    var amount = $("#Field_Amount_"+key[1]).val();
}); 
```

# android - 同步后重新加载选项卡视图中的单个选项卡

> ID：16081994
> 
> 赞同：0
> 
> 时间：2013-04-18T11:42:16.957
> 
> 标签：android, android-tabactivity

我有五个选项卡都是单独的活动，我想在没有选项卡视图的情况下同步后重新加载一项活动

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

如何在标签视图中执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:48:11.963

而不是重新启动您的活动，而是在单独的方法中声明初始化事物。然后在同步之后只需调用该方法来刷新您的活动。