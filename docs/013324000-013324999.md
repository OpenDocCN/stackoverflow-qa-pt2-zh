# StackOverflow 问答 13324000-13324999

# android - BroadcastReceiver ACTION_ACL_CONNECTED 从未收到

> ID：13324000
> 
> 赞同：0
> 
> 时间：2012-11-10T16:54:25.267
> 
> 标签：android, broadcastreceiver

我有一个`BroadcastReceiver`关于`ACTION_ACL_CONNECTED`行动的服务。该服务在启动时启动并继续运行，我有一个活动允许我检查服务是否正在运行并启动/停止它。连接/断开蓝牙设备时，我没有收到任何意图。我正在运行 Android 2.3 的 HTC Desire S 上对此进行测试。我试图`BroadcastReceiver`在清单中注册，但无济于事。

这是代码：

```
public class BTDetectSrv  extends Service {
public IBinder onBind(Intent intent)
{
    return null;
}

@Override
public void onCreate() 
{               
    Toast.makeText(this, "Service created", Toast.LENGTH_LONG).show();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    IntentFilter filter1, filter2, filter3, filter4;
    filter1 = new IntentFilter("android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED");
    filter2 = new IntentFilter(android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECTED);
    filter3 = new IntentFilter(android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED);
    filter4 = new IntentFilter(android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED);
    this.registerReceiver(mReceiver, filter1);
    this.registerReceiver(mReceiver, filter2);
    this.registerReceiver(mReceiver, filter3);
    this.registerReceiver(mReceiver, filter4);
    return START_STICKY;
}

//The BroadcastReceiver that listens for bluetooth broadcasts
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
        Toast.makeText(BlueDetectSrv.this, "BT change received !", Toast.LENGTH_LONG).show();

        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            Toast.makeText(BlueDetectSrv.this, device.getName() + " Device found", Toast.LENGTH_LONG).show();
        }
        else if (BluetoothDevice.ACTION_ACL_CONNECTED.equals(action)) {
            Toast.makeText(BlueDetectSrv.this, device.getName() + " Device is now connected", Toast.LENGTH_LONG).show();
        }
        else if (BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED.equals(action)) {
            Toast.makeText(BlueDetectSrv.this, device.getName() + " Device is about to disconnect", Toast.LENGTH_LONG).show();
        }
        else if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {
            Toast.makeText(BlueDetectSrv.this, device.getName() + " Device has disconnected", Toast.LENGTH_LONG).show();
        }           
    }
};

@Override
public void onDestroy() 
{
    this.unregisterReceiver(mReceiver);
    Toast.makeText(this, "BlueDetect Stopped", Toast.LENGTH_LONG).show();
} 
```

}

我在清单中添加了以下权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-06T10:54:29.943

根据用户评论，他错过了添加蓝牙权限

```
<uses-permission android:name="android.permission.BLUETOOTH" /> 
```

# r - 在 ggplot 中绘制多个时间序列

> ID：13324004
> 
> 赞同：23
> 
> 时间：2012-11-10T16:54:52.880
> 
> 标签：r, ggplot2

我有一个由 10 个变量组成的时间序列数据集。

我想创建一个时间序列图，其中随着时间的推移，每 10 个变量以不同的颜色绘制在同一张图上。值应该在 Y 轴上，日期在 X 轴上。

[单击此处](https://dl.dropbox.com/u/22681355/co.csv)获取数据集 csv

这是我一直在使用的（可能是错误的）代码：

```
c.o<-read.csv(file="co.csv",head=TRUE)
ggplot(c.o, aes(Year, a, b, c, d, e,f))+geom_line() 
```

代码的输出如下所示：![](../Images/9513baa60ac47b319dce354c22570b62.png)

谁能指出我正确的方向？我在以前的线程中找不到任何东西。

问题已解决，见下文。

我想知道的另外一件事：

是否可以在图中添加一条额外的线来表示所有变量随时间的平均值，并在该线下方和上方进行一些平滑以表示个体差异？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-10T17:14:07.710

如果您的数据被称为这样的`df`东西：

```
library(ggplot2)
library(reshape2)
meltdf <- melt(df,id="Year")
ggplot(meltdf,aes(x=Year,y=value,colour=variable,group=variable)) + geom_line() 
```

![在此处输入图像描述](../Images/250fae4719e7c8ebcfffa9fc615f812b.png)

所以基本上在我的代码中，当我使用`aes()`im 时告诉它 x 轴是`Year`y 轴`value`，然后`colour`/`grouping`是`variable`.

该`melt()`功能是让您的数据以想要的格式`ggplot2` 。等的一大列`year`，然后当你告诉它为你的`variable`.

# c - “更多”作为管道命令的目标会破坏 bash

> ID：13324005
> 
> 赞同：1
> 
> 时间：2012-11-10T16:55:02.317
> 
> 标签：c, exec, pipe

考虑以下来源，为简单起见减少

```
int main()
{
  int d[2];
  pipe(d);
  if(fork())
  {
    close(1);
    dup(d[1]);
    execlp("ls", "ls", NULL); 
  }
  else
  {
    close(0);
    dup(d[0]);
    execlp("cat", "cat", NULL); 
  }
} 
```

因此它创建了一个管道并将输出重定向`ls`到`cat`.

它工作得很好，没有问题。但是更改`cat`为`more`bash 休息。

症状是：

*   你没有看到你输入的任何东西
*   按“enter”会显示一个新提示，但不是在新行中，而是在同一行中
*   您可以执行任何命令并查看输出
*   `reset`帮助解决问题。

所以键盘输入有问题，它在那里，但不可见。

这是为什么？

更新：

*   的输出`ls | more`相当于我的程序的输出
*   `more`进程没有完成，它是孤立的`ls`
*   唯一可见的问题是父进程退出后控制台的状态
*   在某些系统上，它**确实**按预期工作。例如，在 OpenSUSE 上我没有问题，在 Kubuntu 上。我找不到任何关于我应该寻找什么差异的信息，`more`两个系统上的二进制文件都不同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:58:54.227

因为不像`cat`,`more`是一个交互式程序，它需要更多`stdin`,`stdout`并且`stderr`-- 它需要一个您的系统调用无法提供的终端。尝试`more`在管道或脚本中运行，看看会发生什么。

另请注意，`bash`此处不涉及任何阶段，`execlp`函数调用将当前进程替换为指定为参数的另一个进程。

# php - 如何确保只有人类访问者可以使用我的搜索字段？

> ID：13324006
> 
> 赞同：1
> 
> 时间：2012-11-10T16:55:03.990
> 
> 标签：php, forms, captcha, spam

我正在运行一个在线词典，让用户有机会搜索单词的翻译。现在我意识到，有很多搜索请求似乎不是由人类输入的。我不想添加某种验证码，因为这会阻止人们使用我的网站。所以现在我想知道是否有办法在不使用验证码的情况下摆脱这些“垃圾邮件”搜索。我知道不可能完全过滤请求，但我想减少垃圾邮件请求的数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:02:07.960

您可以尝试使用用户代理列表/解析器并阻止进入该站点的每个机器人......但如果他们不想被检测到，那将不是万无一失的。

您可以在意识到 IP 不是人类之后手动阻止它们……但这需要大量的工作和对站点和日志文件的关注。

您可以将搜索限制为每天几十次，或者在搜索之间设置一个强制时间……但这可能会影响真实用户。

您可以在他们第一次访问该站点时要求验证码并将其存储在 cookie 中，然后在所有后续搜索中检查该 cookie。

您可以使用 Javascript 在页面加载后创建表单和输入，这对于大多数仅在页面加载后立即阅读页面的机器人来说可能不会出现。

您可以对可以搜索的内容设置一些限制（最少 4 个字符等），这可能会减少搜索量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:02:00.327

基于图像的验证码的一个简单替代方法是问一个问题，无论是数学问题（1 加 5）还是简单的英语问题（黑色汽车是什么颜色？）

我会做什么创建一个问题的数据库表和问题的答案。越多越好。

然后，当您加载搜索页面时，随机选择其中一个问题向用户显示。

需要注意的是，有人可能会多次刷新您的网站以了解所有可能的问题。然后，他们可以创建一个与您的答案类似的数据库表，并将机器人指向该表以查找答案。

话虽如此，我认为它仍然是一个可行的替代方案，具有一点创造力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:02:38.587

我所知道的最可靠的方法是使用验证码。您应该知道有很多验证码解决方案。换句话说，有一些对人眼来说很简单的验证码。例如： [http ://www.phpclasses.org/package/3949-PHP-Generate-CAPTCHA-validation-images-with-reload-.html](http://www.phpclasses.org/package/3949-PHP-Generate-CAPTCHA-validation-images-with-reload-.html)

# c++ - 如何在 C++ 中调用对象的虚函数

> ID：13324007
> 
> 赞同：2
> 
> 时间：2012-11-10T16:55:07.167
> 
> 标签：c++, virtual-functions, heterogeneous

> **可能重复：**
> [覆盖父类的函数](https://stackoverflow.com/questions/12519286/overriding-parent-classs-function)

我正在努力在 C++ 中调用虚函数。

我对 C++ 没有经验，我主要使用 C# 和 Java，所以我可能会有一些错觉，但请耐心等待。

我必须编写一个程序，如果可能的话，我必须避免动态内存分配。我创建了一个名为 List 的类：

```
template <class T> class List {
public:
    T items[maxListLength];
    int length;

    List() {
        length = 0;
    }

    T get(int i) const {
        if (i >= 0 && i < length) {
            return items[i];
        } else {
            throw "Out of range!";
        }
    };

    // set the value of an already existing element
    void set(int i, T p) {
        if (i >= 0 && i < length) {
            items[i] = p;
        } else {
            throw "Out of range!";
        }
    }

    // returns the index of the element
    int add(T p) {
        if (length >= maxListLength) {
            throw "Too many points!";
        }
        items[length] = p;
        return length++;
    }

    // removes and returns the last element;
    T pop() {
        if (length > 0) {
            return items[--length];
        } else {
            throw "There is no element to remove!";
        }
    }
}; 
```

它只是创建一个给定类型的数组，并管理它的长度。

不需要动态内存分配，我可以写：

```
List<Object> objects;
MyObject obj;
objects.add(obj); 
```

MyObject 继承窗体 Object。Object 有一个虚函数，它应该在 MyObject 中被覆盖：

```
struct Object {
    virtual float method(const Input& input) {
        return 0.0f;
    }
};

struct MyObject: public Object {
    virtual float method(const Input& input) {
        return 1.0f;
    }
}; 
```

我得到的元素为：

```
objects.get(0).method(asdf); 
```

问题是即使第一个元素是 MyObject，也会调用 Object 的方法函数。我猜在没有为 MyObject 动态分配内存的情况下将对象存储在对象数组中存在问题，但我不确定。

有没有办法调用 MyObject 的方法函数？如何？顺便说一句，它应该是一个异构集合，所以这就是继承首先存在的原因。

如果没有办法调用 MyObject 的方法函数，那么我应该如何首先列出我的列表？

此外，我无法访问 math.h 和 stdlib.h 之外的库，因此例如 vector 不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:59:28.727

您需要将指针存储在列表中。尝试这个：

```
List<Object*> objects;
Object *obj1 = new Object;
MyObject *obj2 = new MyObject;
Object *obj3 = new MyObject;

objects.add(obj1);
objects.add(obj2);
objects.add(obj3);

// This calls the implementation in Object class
objects.get(0)->method(asdf);

// This calls the implementation in MyObject class
objects.get(1)->method(asdf);

// This calls the implementation in MyObject class
// Polymorphism here
objects.get(2)->method(asdf); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:58:35.117

当你这样做时：

```
objects.add(obj); 
```

您正在将 MyObject 的 Object 部分的副本添加到列表中，因此它不再是 MyObject。

您可能很想尝试这样做：

```
int add(T const &p) {
    if (length >= maxListLength) {
        throw "Too many points!";
    }
    items[length] = p; // now the problem is here
    return length++;
} 
```

但是现在 p 的 Object 部分的副本发生在分配期间。

为了使列表是异构的，它必须是一个指针列表，但您还希望避免动态内存分配。如果您小心，您可以避免动态内存分配：

```
 Object obj1;
 MyObject obj2;
 List<Object*> object_ptrs;
 object_ptrs.add(&obj1);
 object_ptrs.add(&obj2);
 object_ptr.get(1)->method(input);
 object_ptr.get(0)->method(input); 
```

但同样，你必须非常小心。该列表现在指向堆栈上的两个对象。如果您从此函数返回，这两个对象将被销毁。请注意，我故意将对象指针列表放在对象之后，这样列表将在对象之前被销毁，因此列表不会指向垃圾。但是，如果您返回列表的副本，您仍然会遇到问题。

# php - PHP错误删除文件

> ID：13324010
> 
> 赞同：1
> 
> 时间：2012-11-10T16:55:40.533
> 
> 标签：php, file-permissions, permission-denied, unlink

如果多个页面有多个连接，则删除文件时出错。错误：`Warning: unlink(folder/1.txt.txt) [function.unlink]: Permission denied in C:\htdocs\fopen.php on line 7`

`Note:`如果只有一个连接访问一切正常发生（没有错误发生）。

PHP代码`fopen.php`：

```
<?php
function fastWrite($a){
    echo 'Coping file: "',$a,'" to "',$a,'.txt"<br>';
    copy($a,$a.'.txt');

    echo 'Delete file: "',$a,'.txt"<br>';
    unlink($a.'.txt');
}

for($i=0;$i<10;$i++){
    fastWrite('folder/1.txt');
    echo '<hr>';
}
?> 
```

html/javascript 代码（模拟多个连接）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
<title>my test</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
function myTest(z){
    $.ajax("fopen.php?time="+(new Date().getTime()),{"success":function(data){
        $("<div></div>").addClass("sty").html(data).appendTo("body");
    },"error":function(a,b,c){
        $("<div></div>").addClass("sty").html([a,b,c]).appendTo("body");
    }});
}
</script>
<style>
.sty{
border:1px #000 solid;
overflow:auto;
margin:5px 0 0 5px;
}
</style>
</head>
<body>
<p><a href="teste.html">New test</a></p>
<script type="text/javascript">
var dd = "";
for(var i=0;i<10;i++){
    dd += "myTest(\"#a"+(i+1)+"\");\n";
}
eval(dd);
</script>
</body>
</html> 
```

我做错什么了？

谢谢。

* * *

**解决方案：** [clearstatcache](http://php.net/manual/en/function.clearstatcache.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:06:46.500

您遇到了问题，因为两个进程试图同时复制和删除同一个文件。因为它们是独立的进程，所以你不能轻易控制它们做事的顺序。

想象一下同时运行的两个进程`fastWrite()`：

*   t1 将“a”复制到“a.txt”
*   t2 将“a”复制到“a.txt”
*   t2 删除'a.txt'
*   t1 尝试删除“a.txt”，但由于它不存在而失败

这被称为“竞争条件”。

如果您不介意`unlink`调用有时会失败，您可以通过在命令前面使用“@”符号来忽略该错误：

```
@unlink("$a.txt"); 
```

我很确定将用户生成的数据一遍又一遍地保存到同一个文件中并不是您的最终目标。你显然在追求更大的东西时遇到了这个问题。也许您应该开始一个新问题，更关注**该**问题。

如果您只需要在连接期间使用临时文件，请不要总是将文件命名为相同。相反，您可以：

```
function doStuffToFile($fname) {
    $tempName = $fname . "." . getmypid() . "." . rand();
    copy($fname, $tempName);
    // do stuff to your temporary file
    unlink($tempName);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:37:18.673

问题是您有两个或更多脚本写入和删除*1.txt.txt*。这称为竞争条件。*Script1.php*无法直接知道*Script2.php*是否正在使用文件，您需要自己实现此机制。

一个简单的解决方案是在使用共享文件之前创建一个锁定文件，并在完成后删除锁定文件。

那么有一个新问题：如何确保两个脚本不会同时创建锁定文件？*Script1.php*可能会发现锁定文件不存在，但在它实际创建文件之前，处理器切换到*Script2.php*，它也发现锁定文件丢失。然后怎样呢？

PHP 提供了一个有用的[`flock`](http://php.net/manual/en/function.flock.php)功能。我不知道血淋淋的细节，但我相信它应该至少在某些平台上在某种程度上解决你的问题。

```
<?php
function fastWrite($a)
{
    # //// LOCK \\\\
    $fp = fopen("fastwrite.lock", "w");
    if (flock($fp, LOCK_EX) === false) { # PHP will stop at this line until the lock is acquired
        die("flock failed");
    }
    # \\\\ LOCK ////

    echo 'Coping file: "', $a, '" to "', $a, '.txt"<br>';
    copy($a, $a . '.txt');

    echo 'Delete file: "', $a, '.txt"<br>';
    unlink($a . '.txt');

    # //// UNLOCK \\\\
    if (flock($fp, LOCK_UN) === false) {
        die("flock failed");
    }
    fclose($fp);
    # \\\\ UNLOCK ////

}
for ($i = 0; $i < 10; $i++) {
    fastWrite('1.txt');
    echo '<hr>';
} 
```

PS：我无法在我的系统上重现比赛条件。

# visual-studio-2010 - Visual Studio，添加了 DLL 引用但找不到类型

> ID：13324011
> 
> 赞同：0
> 
> 时间：2012-11-10T16:55:47.027
> 
> 标签：visual-studio-2010, dotnetzip

我是 Visual Studio 和 Windows 的新手，试图弄清楚如何将第 3 方库包含到我的 vb.net 项目中。我使用的是 VS2010“免费版”，我已经添加了所需的 DLL 文件：Ionic.Zlib.dll 并且可以在最近参考标签下看到它。“ZipFile”类型仍未解析，但应根据自述文件。我还需要做些什么来让 VS 知道 DLL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:58:53.450

您还需要在源文件的顶部添加一条[`Imports`语句](http://msdn.microsoft.com/en-us/library/7f38zh8x.aspx)，以便能够在不声明完全限定名称的情况下使用类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T17:00:56.087

你需要写在文件的顶部

在 C# 中：

使用 Your_namespace；

**在VB中：**

导入 Your_namespace

# javascript - Javascript 图像查看器在 Internet Explorer 中不起作用

> ID：13324015
> 
> 赞同：6
> 
> 时间：2012-11-10T16:56:10.940
> 
> 标签：javascript, html, internet-explorer, client-side

我为我的网站制作了以下网站中提到的类似图像查看器。 [http://www.javascriptkit.com/script/script2/backbox/](http://www.javascriptkit.com/script/script2/backbox/) 图像查看器在 Chrome 中工作正常，但在 Internet Exlporer 中不工作；出于安全原因，我没有提供我的网站详细信息，但您可以通过在 Chrome 和 Internet Explorer 中复制粘贴下面的链接来查看问题。 [http://www.javascriptkit.com/script/script2/backbox/](http://www.javascriptkit.com/script/script2/backbox/)

**单击上面链接中的图像并在 Internet Explorer 中查看错误并在其他浏览器中查看相同以查看其工作状况...** **PFB 快照**

你们中的任何人都可以告诉为什么不能在 Internet Explorer 中工作吗？

来自 IE F12 devolper 工具控制台区域的错误消息是：

> SCRIPT5007：无法获取属性“replace”的值：对象为 null 或未定义的 effects.js，第 1 行字符 1747
> 
> effects.js = [http://www.javascriptkit.com/script/script2/backbox/js/effects.js](http://www.javascriptkit.com/script/script2/backbox/js/effects.js)

如果您需要示例 js 文件，请从[http://www.javascriptkit.com/script/script2/backbox/backboxfiles.zip获取](http://www.javascriptkit.com/script/script2/backbox/backboxfiles.zip)

使用的 HTML 是；

```
<link rel="stylesheet" href="backbox.css" type="text/css" />
<script type="text/javascript" src="js/prototype.compressed.js"></script>
<script type="text/javascript" src="js/scriptaculous.js?load=effects"></script>
<script type="text/javascript" src="js/lightbox.js"></script>
<script type="text/javascript" src="js/dhtmlHistory.js"></script>
<script type="text/javascript" src="js/customsignsheader.js"></script>

<div onclick="dhtmlHistory.add('location1',{message: 'backbox'});countdown()">
<a href="images/babyhand.jpg" rel="lightbox[slide]" caption="A Bunch of Grapes">
<img src="images/sunset.jpg" alt="lime" width="400" height="300" border="0" /></a>
</div>

<a href="images/desert.jpg" rel="lightbox[slide]" caption="Sunflower"></a>
<a href="images/beech.jpg" rel="lightbox[slide]" caption="Dolphin"></a>
<a href="images/lime.jpg" rel="lightbox[slide]" caption="Waterfall"></a>

<script type="text/javascript" src="js/customsignsfooter.js"></script> 
```

![在此处输入图像描述](../Images/99291687c100c40f65d1efb43bc417b0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:37:45.443

关于您担心为什么会在 IE 而不是 chrome 中发生这种情况，这是因为`if(/MSIE/.test(navigator.userAgent)`当您的浏览器是 IE 时这种情况是正确的

为了纠正问题，正如您在评论中所说，您可以添加“未定义”条件。
只需替换这一行：

```
if(/MSIE/.test(navigator.userAgent)){Element.setStyle(_10,{filter:Element.getStyle(_10,"filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+_11*100+")"});} 
```

和：

```
if(/MSIE/.test(navigator.userAgent)){var filterStyle=Element.getStyle(_10,"filter");if(typeof(filterStyle)!="undefined"){Element.setStyle(_10,{filter:filterStyle.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+_11*100+")"});}} 
```

这行：

```
if(/MSIE/.test(navigator.userAgent)){Element.setStyle(_10,{filter:Element.getStyle(_10,"filter").replace(/alpha\([^\)]*\)/gi,"")});} 
```

和：

```
if(/MSIE/.test(navigator.userAgent)){var filterStyle=Element.getStyle(_10,"filter");if(typeof(filterStyle)!="undefined"){Element.setStyle(_10,{filter:filterStyle.replace(/alpha\([^\)]*\)/gi,"")});}} 
```

在*effects.js*文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:19:21.737

在 IE 中打开开发人员工具（按 F12）并单击“控制台”选项卡。您应该能够在其中看到 effects.js 脚本存在错误：

```
SCRIPT5007: Unable to get value of the property 'replace': object is null or undefined 
effects.js, line 1 character 1747 
```

这至少应该给你一个开始寻找的地方。

...如果你那么懒惰，那么它失败的实际代码行是这样的：

```
Element.getStyle(_10,"filter").replace(/alpha\([^\)]*\)/gi,"") 
```

getStyle 调用显然返回 null，因此随后调用 replace 将失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:28:13.867

Internet Explorer 当前没有完整的 HTML5 支持。因此，对 HTML5 相关标签或元素的任何操作都会失败。值得尝试包含[html5shiv](http://code.google.com/p/html5shiv/)库，它会诱使 IE 相信这些标签存在。

# actionscript-3 - 如何使用 AS3 在 Flash 中更改 TextArea 组件的字体大小？

> ID：13324019
> 
> 赞同：0
> 
> 时间：2012-11-10T16:56:39.163
> 
> 标签：actionscript-3, flash, textarea, components, textformat

我想使用 AS3 更改当前在舞台上的 Flash 的 TextArea 组件的字体大小。

我尝试通过实例名称将 TextFormat 对象链接到 TextAera，但出现此错误：

```
Scene 1, Layer 'actions', Frame 1, Line 44  1061: Call to a possibly undefined method setTextFormat through a reference with static type fl.controls:TextArea. 
```

这是AS3代码：

```
var myTextFormat:TextFormat = new TextFormat();

myTextFormat.font = "Arial";
myTextFormat.size = 10;
myTextFormat.color = 0xffffff;

my_textArea.setTextFormat(myTextFormat) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:31:50.047

试试这个片段：

```
myTextArea.setStyle("textFormat", myTextAreaFormat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T20:17:07.743

我发现在添加文本***之前需要设置 textFormat 。***当您这样做时，setTextFormat 命令可以正常工作。但是，如果在定义关联的 textField*之后*定义关联的 textFormat ，它会中断并且不会设置字体大小。

1.  为 textField 定义一个包装器（在我的中，我使用了一个精灵）
2.  为您的文本框定义文本格式（在我的文本框中，我定义了“文本框格式”）
3.  定义你的文本字段（在我的，我用“textBox”）
4.  将文本框添加到它的包装器中
5.  最后，设置 textFormat ==> textBox.setTextFormat(textBoxFormat);

将步骤 1 中的包装器添加到阶段（或其他元素）。

老实说，我不是 100% 确定需要第一步，但我发现包装 textField 是有益的，只是为了安全。随着我对 Adob​​e 奇怪的“标准”的介绍，我从事了 34 年的编程工作。希望有一个实用的替代方案，但似乎没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T20:36:54.040

虽然接受了一个答案，但这对我不起作用，我找到了这个解决方案：

> 导入 mx.controls.TextArea；
> 
> _global.styles.TextArea.setStyle("fontFamily", "Arial");
> 
> _global.styles.TextArea.setStyle("fontSize", 30);

PS：如果你需要在 AS2 中。

# c - 结构中每个元素的填充长度是否不同？

> ID：13324020
> 
> 赞同：3
> 
> 时间：2012-11-10T16:56:43.500
> 
> 标签：c

> **可能重复：**
> [C 结构大小不一致](https://stackoverflow.com/questions/8539348/c-struct-sizes-inconsistence)

对于以下程序，我想获取结构的大小。但是，它的大小是 12 而不是`4*4=16`. 这是否意味着每个元素都可以与不同的焊盘编号对齐？像`int`4 和`short`2 一样，但在这种情况下 char 应该有 1。

谢谢。

```
#include <stdio.h>

struct test{
int a;
char b;
short c;
int d;

};

struct test A={1,2,3,4};

int main()
{

    printf("0X%08X\n",&A.a);
    printf("0X%08X\n",&A.b);
    printf("0X%08X\n",&A.c);
    printf("0X%08X\n",&A.d);
    printf("%d\n",sizeof(A));

} 
```

* * *

结果是：

```
0X00424A30
0X00424A34
0X00424A36
0X00424A38
12 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:01:01.040

是的，每种类型都没有相同的对齐方式。您的每个变量都应正确对齐，即它们的地址应为一定大小的倍数。通常的规则（对于 Intel 和 AMD 等）是每种数据类型都按自己的大小对齐。假设 x86 架构，它似乎就在这里：

*   `0X00424A30`: 结构的首地址。
*   `0X00424A34``sizeof(int)`:第一个成员之后的4 个字节（可能）。`char`需要对齐`1`，所以这里不需要填充。
*   `0X00424A36`: 第二个成员之后的 2 个字节。`short`需要对齐 2，因此有 1 个字节的填充。
*   `0X00424A38`: 第二个成员之后的 2 个字节。`int`需要对齐 4，但地址已经是 4 的倍数。所以没有填充字节。

无论如何，它不是可移植的假设：C 标准在这里没有强制任何东西。它只允许在成员之间和结构末尾填充字节。

顺便说一句，您应该使用以下格式：

*   `%p`和指针的类型转换；
*   `%zu`或`%u`为`sizeof`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:05:40.093

是的。请注意，填充取决于实现，因此在不同平台上可能会有所不同。[C99 规范](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)第 6.7.2.1 节仅指出可能在结构成员之间及其末端填充。要制作可移植的程序，您不应该对填充的长度做出任何假设。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:06:04.223

是的，每种类型都有自己的对齐限制。

类型的对齐限制`T`永远不会比要求与 的倍数的地址对齐更严格`sizeof(T)`，因为数组的两个元素`T arr[2]`需要立即相互跟随而无需额外的填充以`arr[1]`正确对齐。允许编译器使用不太严格的对齐要求。

例如，

*   对象必须是`char`字节对齐的（根据`sizeof(char) == 1`定义）
*   `short`对象通常是两字节对齐的（带有）`sizeof(short) == 2`，但在某些架构上也可以是字节对齐的
*   一个`int`对象通常是四字节对齐的（带有`sizeof(int) == 4`），但在某些架构上也可能是两个甚至一个字节对齐
*   一个`struct`类型通常要求对齐等于其成员中最严格对齐的类型的对齐要求（有时最小对齐> 1）。

构建结构时，所有成员都必须正确对齐，相对于结构的开头，第一个成员的偏移量为 0。为此，编译器可能必须在成员之后插入填充以正确获取下一个成员对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T17:03:35.197

是的。因为`Packing and byte alignment` 一般的答案是`compilers are free to add padding between members for alignment purpose`。

# entity-framework-5 - 我可以在 EF5 中使用 MODEL-FIRST 而不丢失数据库中的数据吗？

> ID：13324021
> 
> 赞同：4
> 
> 时间：2012-11-10T16:56:46.367
> 
> 标签：entity-framework-5

我想知道模型优先的方法。我希望使用 VS2012 中的模型设计器来设计一个新的数据库。模型设计器的新功能，例如着色和拆分模型部分非常棒。希望除了最初创建一个新的数据库之外，还有使用模型设计器的目的。

我想执行以下步骤...

1.  使用模型设计器，可视化设计并推送模型，创建初始数据库和表

2.  向表中添加数据

3.  在模型设计器中更改表格（例如添加字段）

4.  将更改推送到数据库（即更新数据库）

5.  不要从第 2 步中丢失我的数据。另外，为了消除任何混淆……我是否提到我不想丢失数据？

请告诉我这个明显的需求（即需要从头开始在不丢失数据的情况下改进表及其字段）在 EF 的第五次迭代中没有被忽视。

EF 上的这个页面 ( [http://msdn.microsoft.com/en-us/data/ee712907.aspx](http://msdn.microsoft.com/en-us/data/ee712907.aspx) ) 听起来，开发人员在先编码和先建模之间有平等的选择。对我来说，页面上的介绍视频产生了类似的印象。

如果有一个简单的菜单选项或者更好的只是一种在模型更改时建立“自动推送到数据库”的方法，那就太好了。这样，每当进行更改并单击“保存”按钮时，就会出现一个对话框“更新数据库？”。

我看到使用代码优先有一个迁移选项。对于模型优先，我似乎找不到相同的东西。而且我不明白为什么这是不可能的......毕竟我会在代码优先中编写的所有代码确实存在 - 它是由模型优先代码生成创建的。

我一直在祈祷，希望有人会有一个简单的解决方案，也许是我刚刚忽略的东西，所有这些漫无边际/发泄都是徒劳的。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:35:24.230

目前唯一要做的就是：

1.  复制您的数据库文件...（备份）
2.  允许EF根据模型重新创建数据库
3.  每个表将您的记录从备份复制粘贴到您的新数据库。

这并不容易，因为由于关系，您需要按特定顺序复制粘贴，并且它仅适用于较小的更改，例如添加列和新表或删除标量列或删除表。

但我确信这是解决问题的正确方法的开始，稍后可以通过在共享相同表名和关系的两个数据库之间编写更通用的迁移应用程序来自动化该问题。

当关系不同/表名更改/列名更改时，就会出现更深层次的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T13:31:12.520

如果您想在模型更改时修改数据库，您真的必须使用代码优先。即使那样，这也不是什么神奇的自动化过程，但您必须编写更改脚本。

使用模型优先，您最好的选择是每次生成一个新数据库并使用 Redgate 的 SQL 比较或[Visual Studio Sql Server 数据库项目](http://msdn.microsoft.com/en-us/library/xee70aty.aspx)等工具创建更改脚本 (DDL) 。

我想补充一点，将数据库与模型自动同步几乎是不可能的。某些更改需要手动干预，例如删除一个字段并添加另一个字段无法与重命名/重新键入字段区分开来。一些更改可以在模型中轻松完成，但需要 Sql Server 中的表重建脚本（例如更改字段顺序），或修改内容和结构的组合（例如使字段不为空，添加外键）。

# php - ZF2：如何在自定义路线中获取 Zend\Navigation？

> ID：13324022
> 
> 赞同：2
> 
> 时间：2012-11-10T16:56:47.173
> 
> 标签：php, zend-framework2, zend-navigation, zend-router

我有自定义路由器，我必须访问`Zend\Navigation`这个自定义路由器内部。我在谷歌上搜索、询问和搜索，但没有结果：/

我只需要在 Alias::match 函数中使用 Zend\Navigation 找到具有“链接”参数的节点。

这是我的module.config.php：

```
'navigation' => array(
        'default' => array(
            'account' => array(
                'label' => 'Account',
                'route' => 'node',
                'pages' => array(
                    'home' => array(
                        'label' => 'Dashboard',
                        'route' => 'node',
                        'params' => array(
                                    'id' => '1',
                                    'link' => '/about/gallery'
                                    ),
                    ),
                ),
            ),
        ),
    ),
[...] 
```

这是我的别名课程：

```
// file within ModuleName/src/ModuleName/Router/Alias.php
namespace Application\Router;

use Traversable;
use Zend\Mvc\Router\Exception;
use Zend\Stdlib\ArrayUtils;
use Zend\Stdlib\RequestInterface as Request;
use Zend\Mvc\Router\Http;
use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class Alias extends Http\Segment implements ServiceLocatorAwareInterface
{

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
        return $this;
    }

    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }

    public function match(Request $request, $pathOffset = null)
    {
        [...]

        return parent::match($request, $pathOffset);        
    }

} 
```

**编辑：**

~~现在我知道我应该将服务管理器注入我的自定义路由器。如果你知道怎么做，请告诉我:)~~

**编辑：**

~~好的，它不是自定义路由器，而是路由。我的错。我在谈论`#zftalk`irc chanell 和`AliasSegment`class should implements `ServiceLocatorAwareInterface`。好的，我已经尝试过了，但现在还有另一个问题。~~

在`setServiceLocator`功能上我无法获得`service locator`。它返回 null 对象，但是`$serviceLocator`是 class `Zend\Mvc\Router\RoutePluginManager`。

```
public function setServiceLocator(ServiceLocatorInterface $serviceLocator){
    $sl = $serviceLocator->getServiceLocator();
    var_dump($sl); // NULL
} 
```

~~任何想法如何从中获得 Zend 导航？~~

**已编辑**

与@mmmshuddup 所说的相对应，我已经更改了我的自定义路由器类。（上面是新版本）。同样在我的`Module.php`,`onBootstrap`函数内，我添加了这一行：

```
$sm->setFactory('Navigation', 'Zend\Navigation\Service\DefaultNavigationFactory', true); 
```

导航有效并且之前已实例化，`route`因此它应该在我的 Alias 类中可见，但事实并非如此。

我`match`在课堂上的函数中加入了`Alias`这一行：

```
$servicesArray = $this->getServiceLocator()->getRegisteredServices(); 
```

而且`$servicesArray`几乎是空的。没有服务，没有工厂。`onBootstrap`在设置新工厂（如上）之后插入的同一行返回数组`navigation`和其他服务。

问题是：我如何与我的自定义路由器共享这个阵列（或 ServiceManager）`Alias`：？

我不得不说，我想做的一切在 ZF1 中都是可能的，而且非常简单。

**编辑**

我找到了解决方案。答案如下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:15:26.750

~~那是因为对象本身并没有[声明任何属性](https://stackoverflow.com/a/4776208/486233)。但如果你这样做：~~

 ~~```
echo get_class($sl); 
```~~ 

你会看到它确实是一个实例`Zend\ServiceManager\ServiceManager`

您应该能够通过执行以下操作来获取导航实例：

```
$nav = $sl->get('Navigation'); 
```

 ~~编辑：

我只是注意到你在代码的错误位置有一些东西。你正在调用`getServiceLocator()` *which* `$serviceLocator`已经是那个实例。你也在**`setServiceLocator()`**. 您应该将其更改为：

```
// EDIT - file within ModuleName/src/Router/Alias.php
namespace Application\Router;

use Traversable;
use Zend\Mvc\Router\Exception;
use Zend\Stdlib\ArrayUtils;
use Zend\Stdlib\RequestInterface as Request;
use Zend\Mvc\Router\Http;

class Alias extends Http\Segment implements ServiceLocatorAwareInterface
{
    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
        return $this;
    }

    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }

    public function match(Request $request, $pathOffset = null)
    {
        $nav = $this->getServiceLocator()->get('Navigation');
        // ...
        return parent::match($request, $pathOffset);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T14:36:26.107

我找到了解决方案，但我认为这**不是优雅的解决方案**。然而，一切都完美无缺。如果有人知道此解决方案的缺点，请评论此答案或添加另一个更好的答案。我不得不修改@mmmshuddup 的想法（[你可以阅读对话](https://chat.stackoverflow.com/rooms/19391/discussion-between-mmmshuddup-and-katan87)）。

首先，`ServiceLocatorAwareInterface`不再需要在自定义路由类中实现。

在函数`Module.php`内部`onBootstrap`：

```
 $app = $e->getApplication();
    $sm  = $app->getServiceManager();
    $sm->get('translator');
    $eventManager        = $e->getApplication()->getEventManager();
    $moduleRouteListener = new ModuleRouteListener();
    $moduleRouteListener->attach($eventManager);

    $sm->setFactory('Navigation', 
                    'Zend\Navigation\Service\DefaultNavigationFactory', true);

    $nav = $sm->get('Navigation');
    $alias = $sm->get('Application\Router\Alias');
    $alias->setNavigation($nav); 
```

首先我们实例`Navigation`化工厂`ServiceManager`然后我们的自定义路由。之后，我们可以使用`setNavigation`函数将 Navigation 类传递给自定义路由。为了完成我们自定义路由的实例化，我们需要在`getServiceConfig`同一个文件中：

```
 return array(
        'factories' => array(
            'Application\Router\Alias' => function($sm) {
                $alias = new \Application\Router\Alias('/node[/:id]');
                return $alias;
            },
            'db_adapter' =>  function($sm) {
                $config = $sm->get('Configuration');
                $dbAdapter = new \Zend\Db\Adapter\Adapter($config['db']);
                return $dbAdapter;
            },
        )
    ); 
```

这是一个棘手的部分。此实例是临时的。在路由时，这个类会再被实例化一次，这就是为什么，我认为，它不是很优雅。我们必须将参数插入构造函数，但是此时此参数的值并不重要。

自定义路由类：

```
// file within ModuleName/src/ModuleName/Router/Alias.php
namespace Application\Router;

use Traversable;
use Zend\Mvc\Router\Exception;
use Zend\Stdlib\ArrayUtils;
use Zend\Stdlib\RequestInterface as Request;
use Zend\Mvc\Router\Http;

class Alias extends Http\Segment
{

    private static $_navigation = null;

    public function match(Request $request, $pathOffset = null)
    {
        //some logic here

        //get Navigation
        $nav = self::$_navigation;

        return parent::match($request, $pathOffset);
    }

    public function setNavigation($navigation){
        self::$_navigation = $navigation;
    }

} 
```

因为第一个实例是临时的，我们必须`Navigation`在静态变量中收集我们的类。这很糟糕，但效果很好。也许有一种方法可以只实例化一次并在路由配置中获取它的实例，但目前这是我问题的最佳答案。足够简单并且可以正常工作。~~

# python - python PIL 和 tkinter；增亮图像并显示它

> ID：13324027
> 
> 赞同：1
> 
> 时间：2012-11-10T16:57:30.760
> 
> 标签：python, python-2.7, tkinter, python-imaging-library

我想要做的是打开一个带有两个图像的窗口（一个图像是另一个图像的精确副本）。然后，当我单击一个按钮时，它会更改右侧的图像。我希望这是有道理的。我没有的代码是：

```
from __future__ import division
from Tkinter import *
from PIL import Image, ImageTk, ImageFilter
import random

class MyApp(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("Image examples")

        img = Image.open("lineage.jpg").convert("RGB")
        (w, h) = (img.size[0], img.size[1])
        print (w, h)

        tkpi = ImageTk.PhotoImage(img)
        label = Label(self.root, image=tkpi)
        label.grid(row=0, column=0, padx=5, pady=5, rowspan=10)

        img2 = img.copy()
        pixels = img2.load()

        tkpi2 = ImageTk.PhotoImage(img2)
        label = Label(self.root, image=tkpi2)
        label.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

        Button(self.root, text="Brighten", command=self.brighten).grid(row=0, column= 2)  
        self.root.mainloop()

    def brighten(self):
        self.pixels = self.pixels.point(lambda x: x*1.9)          
MyApp() 
```

我想要的是`img2`在单击`brighten`按钮时进行更新。当我现在尝试时，我收到此错误：

```
File "C:\Users\Admin\Desktop\imageeditor.py", line 36, in brighten
self.pixels = self.pixels.point(lambda x: x*1.9)
AttributeError: 'MyApp' object has no attribute 'pixels' 
```

正如你所知道的，我是编程新手，所以任何能帮助我走上正轨的帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:29:59.087

下面是一个完整的解决方案。以下是对所做更改的一些评论：

*   以前该`__init__`方法从未返回，因为它最后调用 self.root.mainloop() 。这可能会导致一些问题。我对其进行了重组，使其更像 python 文档中的 hello world 示例。
*   有一个很棒的[变暗/变亮示例](http://www.daniweb.com/software-development/python/code/216419/darkenlighten-an-image-python)，该示例就是围绕该`brighten()`方法建模的。
*   有一个`from Tkinter import *`，这个被替换了`from Tkinter import Frame, Tk, Label, Button`。事实证明，PIL 和 Tkinter 都有一个名为的属性`Image`，使用起来真的很混乱。尽量避免使用，`from module import *`而是在您要导入的内容中明确说明，这将防止名称空间冲突。

**代码**

```
from Tkinter import Frame, Tk, Label, Button
from PIL import Image, ImageTk, ImageFilter

class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        master.wm_title("Image examples")
        self.pack()
        self.createWidgets()

    def createWidgets(self):
        self.img = Image.open("lineage.jpg")
        self.photo1 = ImageTk.PhotoImage(self.img.convert("RGB"))
        self.label1 = Label(self, image=self.photo1)
        self.label1.grid(row=0, column=0)

        self.photo2 = ImageTk.PhotoImage(self.img.convert("RGB"))
        self.label2 = Label(self, image=self.photo2)
        self.label2.grid(row=0, column=1)

        button = Button(self, text="Brighten", command=self.brighten)
        button.grid(row=0, column=2)

    def brighten(self):
        img2 = self.img.point(lambda p: p * 1.9)
        self.photo2 = ImageTk.PhotoImage(img2)
        self.label2 = Label(self, image=self.photo2)
        self.label2.grid(row=0, column=1)

root = Tk()
app = Application(master=root)
app.mainloop()
root.destroy() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:16:12.600

我有一个工作的。

```
from __future__ import division
from Tkinter import *
from PIL import Image, ImageTk, ImageFilter
import random

class MyApp(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("Image examples")

        img = Image.open("lineage.jpg").convert("RGB")
        (self.w, self.h) = (img.size[0], img.size[1])

        self.tkpi = ImageTk.PhotoImage(img)
        self.label = Label(self.root, image=self.tkpi)
        self.label.grid(row=0, column=0, padx=5, pady=5, rowspan=10)

        self.img2 = img.copy()
        self.pixels = self.img2.load()
        self.width, self.height = self.img2.size

        self.tkpi2 = ImageTk.PhotoImage(self.img2)
        self.label2 = Label(self.root, image=self.tkpi2)
        self.label2.grid(row=0, column=1, padx=5, pady=5, rowspan=10)

        self.btn = Button(self.root, text="Brighten")
        self.btn.grid(row=0, column= 2)
        self.btn.bind('<Button-1>', self.brighten)
        self.root.mainloop()

    def brighten(self,*args):
#        self.pixels = self.pixels.point(lambda x: x*1.9)
        for i in range(self.w):    # for every pixel:
            for j in range(self.h):
#                print self.pixels[i,j]
                self.pixels[i,j] = (int(self.pixels[i,j][0] * 1.9),
                                    int(self.pixels[i,j][1] * 1.9),
                                    int(self.pixels[i,j][2] * 1.9))
        self.tkpi2 = ImageTk.PhotoImage(self.img2)
        self.label2.configure(image = self.tkpi2)
        self.root.update_idletasks()
MyApp() 
```

# c++ - 无法打开套接字。C++

> ID：13324041
> 
> 赞同：2
> 
> 时间：2012-11-10T16:59:09.623
> 
> 标签：c++, sockets, lnk2019

我正在尝试打开套接字。但它在 WASStartup、WSAGetLastError、socket、htons 处给出了一个链接错误（LNK2019：函数“function”中引用的未解析的外部符号“symbol”）。我做错了什么？

这是一个源代码

```
#include <iostream>
#include <string>
#include <winsock2.h>
#include <Windows.h>
using namespace std;
string server; int port;
void login_info()
{
    cout << "Enter IP Address: ";
    cin >> server;
    cout << "\nEnter Port: ";
    cin >> port;
    cout << endl;
}

int main () 
{
    char buffer[1024];
    login_info();
    cout << "Trying to connect...\n";
    if (WSAStartup(0x202, (WSADATA *) &buffer[0])) //Оно что-то запускает. Знать бы что..
    {
        cout << "WSAStart error #" << WSAGetLastError(); //Но если оно пизданётся, то появится ошибка :3
        return -1;
    }
    //Тут предположительно поднимается сам сокет.
    SOCKET connection;
    connection=socket(AF_INET, SOCK_STREAM, 0);
    //Проверка на то, что он есть?
    if (socket<0) 
    {
        cout << "Socket error #" << WSAGetLastError(); //Но если оно пизданётся, то появится ошибка :3
        return -1;
    }
    sockaddr_in dest_addr; //Тут опять происходит, что-то мне непонятное..
    dest_addr.sin_family=AF_INET;      
    dest_addr.sin_port= htons (port);
    HOSTENT *hst;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:10:05.910

我认为您需要链接到 winsock ws_32.lib 库。我不确定您使用的是什么工具/ide，但[如何链接 winsock.lib？](https://stackoverflow.com/questions/9249886/how-to-link-winsock-lib)有一些细节。

MSDN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms737629 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737629(v=vs.85).aspx)

编辑 - 现在可能需要寻找 Ws2_32.lib。

# iphone - 在应用程序中使用 SQLite 数据库的最佳方式

> ID：13324049
> 
> 赞同：0
> 
> 时间：2012-11-10T17:00:19.923
> 
> 标签：iphone, objective-c, ios, sqlite

抱歉，如果之前有人问过，我找不到关于这个问题的任何问题，而且我是 Obj-C 的新手，所以请耐心等待。提前致谢。

我有一个与`SQLite3`数据库一起使用的应用程序，我想在应用程序中使用数据库，每次`UIViewController`我都从数据库中再次加载数据。结果是应用程序在某些视图中运行有点慢，而在其他视图中运行得更慢。

所以，我的问题是，如何使用`SQLite3`数据库？最好的方法是在一个of中加载`SQLite3`数据库还是从它自己的应用程序中工作，每次调用数据库并保存在其中？`NSMutableArray``NSMutableDictionary's`

如果我使用的`NSMutableArray`是字典，我如何知道何时将数据保存在应用程序中？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:18:00.157

这在很大程度上取决于您的数据的性质，但是当我使用数据库时，通常是因为我有足够的数据，我宁愿不占用宝贵的内存，因此我倾向于根据需要从数据库中检索数据它，视图控制器到视图控制器。`NSArray`内存是 iOS 设备上比较稀缺的资源之一，所以在决定愉快地将数据保存在/之前要小心`NSDictionary`。

显然，最好不要在整个应用程序中散布 SQL 代码，因此如果可能的话，您可能希望将所有数据检索封装在一个类中。这样，您可以在以后根据需要更改数据存储/检索机制，而不必更改整个程序的代码。

根据您的观察，该应用程序从数据库中检索数据有点慢，这很奇怪，因为从数据库中检索数据通常非常快。我遇到性能问题的唯一一次是当我在数据库中存储 BLOB 对象（例如，用于图像的 PNG/JPG 表示）时。所以，现在，除非我正在处理微小的缩略图大小的图像，否则我会将图像存储在`Documents`文件夹中，并且数据库将只维护这些图像文件的路径。

但是，回到您的问题，如果您的应用程序运行缓慢，您可能需要提交一个不同的问题，概述数据的确切性质并概述您所遭受的性能损失的性质，我相信我们可以尝试来帮助你。

# bash - GitHub 问题创建 API

> ID：13324052
> 
> 赞同：5
> 
> 时间：2012-11-10T17:01:17.550
> 
> 标签：bash, curl, github

我正在尝试使用 GitHub 存储库创建问题：

```
curl -d '{"title":"my-new-repo","body":"my new issue description"}' https://api.github.com/repos/np98765/BattleKits/issues 
```

这只是返回：

```
{
  "message": "Not Found"
} 
```

我正在像这样进行身份验证：

```
curl -u "user:password" https://api.github.com 
```

我究竟做错了什么？ [http://developer.github.com/v3/issues/#create-an-issue](http://developer.github.com/v3/issues/#create-an-issue)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:32:42.100

你似乎没有提出`POST`你的`curl`要求。

您至少可以尝试（在“ [REST-esting with cURL](http://blogs.plexibus.com/2009/01/15/rest-esting-with-curl/) ”之后）：

```
curl -X POST -i -d '{"title":"my-new-repo","body":"my new issue description"}' https://api.github.com/repos/np98765/BattleKits/issues 
```

`-i`用于查看响应标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-19T11:25:43.200

刚试过`curl -u "$REPORTER":"$TOKEN" https://api.github.com/repos/$OWNER/$REPO/issues -d @$JSON_WITH_ISSUE`，它奏效了。

这使用令牌身份验证，reporter 是我的用户，而 repo 的所有者是我向其报告问题的用户。

# c# - 禁止某些 Windows 键盘快捷键

> ID：13324059
> 
> 赞同：1
> 
> 时间：2012-11-10T17:01:44.123
> 
> 标签：c#, wpf, keyboard

我试图抑制一些 Windows 键盘快捷键（例如`ALT`+ `TAB`、`LWIN`/ `RWIN`、`ALT`+ `F4`），以便我的应用程序可以以其他方式处理它们（模拟外部机器上的按键）。

根据其他SO问题和答案，这应该有效：

```
 this.PreviewKeyDown += (s, e) => {
            if (e.Key == Key.LWin || e.Key == Key.RWin)
                e.Handled = true;
        }; 
```

问题是，它不起作用。每当我点击`LWIN`/`RWIN`时，仍然会弹出“开始”菜单，我想禁止它，这样我的应用程序就可以单独使用它。在上面的代码片段中，`this`指的是一个 WPF 窗口，它在测试时被聚焦。（它显然应该只在 Window 获得焦点时才抑制该操作。）

有什么方法可以实现我想要实现的目标？

谢谢，

~Tgys

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:33:48.620

您可以*挂钩*所有*键盘*甚至*鼠标*事件来检测输入源。换句话说，如果您使用下面链接中提到的*全局挂钩*，您可以捕获系统事件并像正常事件一样处理它们或抑制它们。

您应该看看这篇*CodeProject*文章，[在 C# 中处理全局鼠标和键盘挂钩](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms644959%28v=vs.85%29.aspx)：

> *全局挂钩*监视与调用线程相同的桌面中的所有线程的消息。特定于线程的*挂钩*仅监视单个线程的消息。全局挂钩过程可以在与调用线程相同的桌面中的任何应用程序的上下文中调用，因此该过程必须位于单独的 DLL 模块中。仅在关联线程的上下文中调用特定于线程的钩子过程。

**C#代码：**

```
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Windows.Forms;

public partial class MainWindow : Window
{
    // Structure contain information about low-level keyboard input event
    [StructLayout(LayoutKind.Sequential)]
    private struct KBDLLHOOKSTRUCT
    {
        public Keys key;
        public int scanCode;
        public int flags;
        public int time;
        public IntPtr extra;
    }

    //System level functions to be used for hook and unhook keyboard input
    private delegate IntPtr LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr SetWindowsHookEx(int id, LowLevelKeyboardProc callback, IntPtr hMod, uint dwThreadId);
    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool UnhookWindowsHookEx(IntPtr hook);
    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr CallNextHookEx(IntPtr hook, int nCode, IntPtr wp, IntPtr lp);
    [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    private static extern IntPtr GetModuleHandle(string name);
    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern short GetAsyncKeyState(Keys key);

    //Declaring Global objects
    private IntPtr ptrHook;
    private LowLevelKeyboardProc objKeyboardProcess;

    private IntPtr CaptureKey(int nCode, IntPtr wp, IntPtr lp)
    {
        if (nCode >= 0)
        {
            KBDLLHOOKSTRUCT objKeyInfo = (KBDLLHOOKSTRUCT)Marshal.PtrToStructure(lp, typeof(KBDLLHOOKSTRUCT));
            if (objKeyInfo.key == Keys.RWin || objKeyInfo.key == Keys.LWin) // Disabling Windows keys
            {
                return (IntPtr)1;
            }
        }
        return CallNextHookEx(ptrHook, nCode, wp, lp);
    }

    public MainWindow()
    {
        InitializeComponent();

        //Get Current Module
        ProcessModule objCurrentModule = Process.GetCurrentProcess().MainModule;
        //Assign callback function each time keyboard process
        objKeyboardProcess = new LowLevelKeyboardProc(CaptureKey);
        //Setting Hook of Keyboard Process for current module
        ptrHook = SetWindowsHookEx(13, objKeyboardProcess, GetModuleHandle(objCurrentModule.ModuleName), 0); 
    }
} 
```

其他好的参考：

1.  [来自 C# 的低级 Windows API 挂钩以阻止不需要的击键](http://www.codeproject.com/Articles/14485/Low-level-Windows-API-hooks-from-C-to-stop-unwante)
2.  [在 Win App C# 中禁用特殊键](http://geekswithblogs.net/aghausman/archive/2009/04/26/disable-special-keys-in-win-app-c.aspx)

# xml - 如何根据 Windows 应用商店应用程序中的模式验证 XML 文档？

> ID：13324062
> 
> 赞同：2
> 
> 时间：2012-11-10T17:02:02.907
> 
> 标签：xml, xsd, windows-runtime

我试图弄清楚在 Windows 应用商店应用程序中根据 XML 架构读取 XML 文档时如何验证它。

使用完整的 .NET API，我可以在传递给 XmlReader 的 XmlReaderSettings 实例上使用 ValidationType = ValidationType.Schema，并使用 Schemas.Add 添加架构。不幸的是，在用于 Windows 应用商店应用的 .NET API 中，XmlReaderSettings 既没有 ValidationType 属性，也没有 Schemas 属性。

使用 XElement，我可以在完整的 .NET 中使用扩展方法 Validate 和 XmlSchemaSet，但两者在 Windows Store Apps 的 .NET API 中也不可用。

也没有在 XmlDocument 类中找到与架构相关的任何内容（找到 XmlLoadSettings.ValidateOnParse，但根据文档，这是针对 DTD 的）。

那么：我如何根据 WinRT 中的架构或使用 .NET API for Windows Store Apps 来验证 XML 文档？或者这个功能只是被 WinRT 团队遗忘了？

**更新：**

根据对 answers.flyppdevportal.com 上类似问题的回答，似乎不支持 XML 模式。请参阅[http://answers.flyppdevportal.com/categories/metro/csharpvb.aspx?ID=b0df7a08-23c7-4adf-96c9-608d237cb024](http://answers.flyppdevportal.com/categories/metro/csharpvb.aspx?ID=b0df7a08-23c7-4adf-96c9-608d237cb024)。虽然很难相信。WinRT 团队是否认为 XML 验证对 Windows 应用商店应用不重要？

# python - 在 Py3k 中，我是否有一个信号处理程序来防止信号的默认操作？

> ID：13324064
> 
> 赞同：2
> 
> 时间：2012-11-10T17:02:09.103
> 
> 标签：python, shell, python-3.x, signals

在[如何将信号处理程序添加到用 Py3k/Python 编写的 shell 中？](https://stackoverflow.com/questions/13318447/how-can-i-add-signal-handlers-to-a-shell-written-in-py3k-python)，我有信号处理程序似乎在起作用，然后让默认操作通过。对于一个具体的例子，如果我按下 control-Z，它将显示信号处理程序指定的消息，然后（不需要的）继续暂停进程。

我如何（如果可能）显示一条消息，然后忽略信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:39:40.533

您的按键可能会提高`SIGSTOP`而不是`SIGSTP`. 在您的终端运行`stty -a`以确定分配给的确切信号`ctrl+z`。

根据维基百科（可能还有手册页）[`SIGSTP`并且`SIGSTOP`是不同的](https://en.wikipedia.org/wiki/Unix_signal#POSIX_signals)。 `SIGSTP`被发送到进程，因此可以被拦截，而`SIGSTOP`被操作系统拾取，因此不能被拦截。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:43:00.357

CTRL-Z 不是一个信号，它是一个组合键。在 Windows 上，CTRL-Z 将发送一个也不是信号的[EOF ，所以我假设您的意思是在 Unix 上，因为大多数 Unix shell 将在 CTRL-Z 上发送一个信号，即 SIGTSTP 信号。](http://en.wikipedia.org/wiki/End-of-file)

更改 SIGTSTP 的处理程序可以正常工作：

```
>>> import signal
>>> def handler(signum, frame):
...    print(signum, frame, "yay!")
... 
>>> signal.signal(signal.SIGTSTP, handler)
0
<Here I press CTRL-Z>
>>> 20 None yay! 
```

# javascript - 如何通过 Javascripts AddEventListener 检测 mobileinit 和自定义事件？

> ID：13324068
> 
> 赞同：1
> 
> 时间：2012-11-10T17:02:38.630
> 
> 标签：javascript, jquery-mobile, addeventlistener, jquery-events, custom-events

我有一个`overrides.js`脚本，它在我的应用程序中设置默认值，如下所示：

```
$(document).bind("mobileinit", function(){
    $.mobile.autoInitializePage = false;
    $.mobile.pushStateEnabled = false;
    $.mobile.defaultPageTransition = "fade";
    $('html').addClass('viewGrid');
    console.log("mobileinit detected in overrides");
    $(window).trigger('jqm-ready');
    }); 
```

在加载之后和加载之前将其`overrides.js`拉入。在我的页面上，页脚中有这个片段：`requireJS``Jquery``Jquery Mobile`

```
console.log("page done loading");
window.addEventListener('jqm-ready', function(){
    console.log("detected jqm-ready")
    // run some code
    });

document.addEventListener('mobilelinit', function(){
    console.log("mobilelinit detected from page");
    // run some code
    }); 
```

我的控制台显示以下内容：

```
page done loading
mobileinit detected in overrides 
```

因此，我无法通过在页面上添加的 eventListener检测到`mobileinit`我的自定义事件。`jqm-ready`

当我使用`requireJS`时，我无法使用 Jquery 来检测`mobileinit/jqm-ready`，因为页面在 Jquery 加载之前被解析。我希望能够检测到任何一个事件，但到目前为止还没有运气。我需要检测它们，因为我需要运行的代码需要绑定到 Jquery Mobile 事件。

**问题：**
我的代码片段有什么问题，或者为什么我不能像这样绑定到 mobileinit 或 jqm-ready？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:10:48.737

您的活动名称有错字，请参阅：

```
document.addEventListener('mobilelinit', function(){
                                 ^----- TYPO HERE (should be mobileinit) 
```

这可能就是您没有看到该事件的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:30:01.300

行。我明白了...我想我不能将 Jquery`trigger`用于添加侦听器的事件`addEventListener`。但也许不是。无论如何，这有效：

```
var trigAnalytics = function( trigger ){ 
    console.log("triggered by "+trigger);
    };
document.addEventListener("jqm_ready",function(){console.log("jqm_ready"); trigAnalytics("jqm_ready");},false); 
```

而在`overrides.js`

```
console.log("Hello now");
var evt = document.createEvent("Event");

evt.initEvent("jqm_ready",true,true);
document.dispatchEvent(evt); 
```

作品。

# c - 比较 2 个字符串并保存结果

> ID：13324069
> 
> 赞同：3
> 
> 时间：2012-11-10T17:02:51.230
> 
> 标签：c, string, compare

```
#include <stdio.h>
#define MAX 1000
void any(char s1[], char s2[], char s3[]);
int main()
{
    char string1[MAX], string2[MAX], string3[MAX];
    printf("Jepni stringen 1\n");
    scanf("%s", &string1);  //saving string 1
    printf("Jepni stringen 2\n");
    scanf("%s", &string2);  //saving string 2
    any(string1, string2, string3); /*comparing characters from string 2 to string 1    and saving the places where they are equal on third string */
    printf("%d", string3[0]);   //printing the first character of the third string
    return 0;
}

void any(char s1[], char s2[], char s3[])
{
    int i, j, k;
    k = 0;
    for (j = 0; j != '\0'; j++) {
        for (i = 0; i != '\0'; i++) {
            if (s1[i] == s2[j]) {
            s3[k] = i;
            j++;
            k++;
            }
        }
    }
} 
```

我正在尝试创建扫描 2 个字符串（将它们保存在字符串 1 和 2 上）的 ac 程序，而不是使用函数的程序，如果字符串 2 字符与字符串 1 相等，则任何字符都将逐个字符地看到，如果它们是，它将给出找到它们的第一个位置。如果什么也没找到，它会显示 -1。程序要求第一个字符相等，这就是为什么我总是打印字符串 3 中的第一个字符。程序不工作因为它总是打印-1。例如，如果我将字符串 1 **dad** 放在字符串 2 上，字符**d** 程序应显示**0**位置，如果我将**dad**放在字符串 1 上，而在字符串 2 上放置**a** 它应该显示**1**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:29:16.950

首先 for 循环没有开始，因为条件是 j 应该不为零。在 ASCII '\0' 中为零（可能不是在所有机器上），所以你宁愿检查 s2[j] 是不同于零。我也一样。
另一件事是 s3 是一个字符数组，因此放置 s3[k]=i 不会使其等于 '1' 或 '2'，而是等于 1 或 2（ASCII 值），因此您应该将 48 添加到i （直到 '9'，然后你将有两位数），或者使用 %d 格式说明符打印每个字符的字符串字符：

```
void any(char s1[], char s2[], char s3[])
{
    int i, j, k;
    k = 0;
    for (j = 0; s2[j] != '\0'; j++) {
        for (i = 0; s1[i] != '\0'; i++) {
            if (s1[i] == s2[j]) {
                s3[k] = i;
                j++;
                k++;
            }
        }
    }
} 
```

也许我遗漏了一些其他错误，尝试代码并运行它以查看它是否正确（还记得使用 %d 说明符来打印 s3）。

# python - 在 scikit-learn SVM 中缩放数据

> ID：13324071
> 
> 赞同：13
> 
> 时间：2012-11-10T17:03:09.327
> 
> 标签：python, svm, libsvm, scikit-learn

虽然 libsvm 提供了用于缩放数据的工具，但使用 Scikit-Learn（它应该基于 SVC 分类器的 libSVM）我发现无法缩放我的数据。

基本上我想使用 4 个特性，其中 3 个范围从 0 到 1，最后一个是一个“大”的高度可变的数字。

如果我在 libSVM 中包含第四个功能（使用自动缩放数据的 easy.py 脚本），我会得到一些非常好的结果（96% 的准确度）。如果我在 Scikit-Learn 中包含第四个变量，则准确度会下降到 ~78%——但如果我排除它，我会得到与排除该特性时在 libSVM 中得到的结果相同的结果。因此，我很确定这是缺少缩放的问题。

如何以编程方式（即不调用 svm-scale）复制 SVM 的缩放过程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T17:08:48.117

您在以下位置具有该功能[`sklearn.preprocessing`](http://scikit-learn.org/stable/modules/preprocessing.html#standardization-or-mean-removal-and-variance-scaling)：

```
>>> from sklearn import preprocessing
>>> X = [[ 1., -1.,  2.],
...      [ 2.,  0.,  0.],
...      [ 0.,  1., -1.]]
>>> X_scaled = preprocessing.scale(X)

>>> X_scaled                                          
array([[ 0\.  ..., -1.22...,  1.33...],
       [ 1.22...,  0\.  ..., -0.26...],
       [-1.22...,  1.22..., -1.06...]]) 
```

然后数据将具有零均值和单位方差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-12T16:32:46.213

您也可以尝试`StandardScaler`数据缩放：

```
from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
scaler.fit(Xtrain) # where X is your data to be scaled
Xtrain = scaler.transform(Xtrain) 
```

# python - 类型错误...'myModel'对象不可迭代

> ID：13324072
> 
> 赞同：3
> 
> 时间：2012-11-10T17:03:11.250
> 
> 标签：python, django, web, typeerror

```
67  <h2>Latest Posts</h2>
68  
69  <ul>
70      {% for post in posts %}
71              <li><a href="{{ post.get_absolute_url }}">{{post.title}}</a></li>
72      {% endfor %}
73  </ul> 
```

**这是我的基本模板，当我单击帖子时，在第 70 行出现错误：**

```
TypeError at /blog/posts/indiana-was-dogs-name/
'Blog' object is not iterable 
```

**我的博客模型：**

```
class Blog(models.Model):
    title = models.CharField(max_length=100, unique=True)
    slug = models.SlugField(max_length=100, unique=True)
    body = models.TextField()
    posted = models.DateField(db_index=True, auto_now_add=True)
    category = models.ManyToManyField(Category)

    def __unicode__(self):
        return self.title

    def get_absolute_url(self):
        return "/blog/posts/%s/" % self.slug 
```

**我的索引视图：**

def 索引（请求）：

```
 variables = RequestContext(request, {
                                         'categories': Category.objects.all(),
                                         'posts': Blog.objects.filter(posted__lte=datetime.now()).order_by('-posted', 'title')
                                        })
    return render_to_response('index.html',variables) 
```

**有一些关于这样的错误的帖子，但不包括我的问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:09:29.083

正如它所说，`blogs`您传递给模板的变量是不可迭代的。您只能遍历列表和其他可迭代对象，在您的情况下，它`blogs`是一个`Blog`实例，它应该是一个`QuerySet`. 你可以写，例如

```
blogs = Blog.objects.all()
return render_to_response(..., {'blogs':blogs,...} ...} 
```

**编辑**

如果您使用 Django 文档中给出的确切语法，我会感觉更安全。也许语法的差异是罪魁祸首，我真的还没有看到。

```
render_to_response(template_name[, dictionary][, context_instance][, mimetype]) 
```

字典设置为`{'categories': Category.objects.all(), 'posts': Blog.objects.filter(posted__lte=datetime.now()).order_by('-posted', 'title')}`和`context_instance=RequestContext(request)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:16:54.653

```
 return render_to_response('index.html',{'categories':Category.objects.all(), 'posts':Blog.objects.filter(....)},
context_instance=template.RequestContext(request)) 
```

# java - 图片的错误 URL 编码

> ID：13324075
> 
> 赞同：1
> 
> 时间：2012-11-10T17:03:58.297
> 
> 标签：java, android, url-encoding

在我的应用程序中，有一个 ImageView 显示来自 URL 的图像。

我使用这种方法下载图像：

```
 Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap; 
```

这仅适用于具有数字或英文字母的 URL，不适用于任何其他字符（如空格）：

**好网址：** [http ://site.com/images/image.png](http://site.com/images/image.png)

**错误网址：** [http](http://site.com/images/image) : //site.com/images/image 1.png

我试图改变 URL 编码（URLEncoder.encode），但它改变了整个 URL（包括斜杠等......）。

编码后是否需要替换一些字符？或者也许有更好的方法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T17:17:08.950

“ [Android 中的 URL 编码](https://stackoverflow.com/questions/3286067/url-encoding-in-android)”

> 您不对整个 URL 进行编码，仅对来自“不可靠来源”的部分进行编码。-扬琴科

```
String query = URLEncoder.encode("apples oranges", "utf-8");
String url = "https://stackoverflow.com/search?q=" + query; 
```

> 如果您只是处理 URL 的特定部分并且知道如何构造或重构 URL，这很好。有关可以处理任何 url 字符串的更通用的方法，请参阅下面的答案。– 克雷格 B

```
String urlStr = "http://abc.dev.domain.com/0007AC/ads/800x480 15sec h.264.mp4";
URL url = new URL(urlStr);
URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef());
url = uri.toURL(); 
```

# objective-c - XCode 更新后返回类型“NSComparaisonResult”

> ID：13324079
> 
> 赞同：1
> 
> 时间：2012-11-10T17:04:44.597
> 
> 标签：objective-c, xcode, objective-c-blocks

我有一个类似于此处概述的问题： [Has xcode 4.5 changed sortedArrayUsingComparator + blocks？](https://stackoverflow.com/questions/12548789/has-xcode-4-5-changed-sortedarrayusingcomparator-blocks)

```
int index = [AAjouter indexOfObject:match inSortedRange:NSMakeRange(0, [AAjouter count]) options:NSBinarySearchingInsertionIndex usingComparator:^(id obj1, id obj2) {

Match *match1 = (Match *) obj1;
Match *match2 = (Match *) obj2;

if ([match1.matchDate isEqualToDate:match2.matchDate]) {
    if ([match1.paysCompetition isEqualToString:match2.paysCompetition]) {
        if ([[NSNumber numberWithInt:match1.ordreCompetition] isEqualToNumber:[NSNumber numberWithInt:match2.ordreCompetition]]) {
            if ([match1.equipeANom isEqualToString:match2.equipeANom]) {
                return NSOrderedSame;
            }
            else {
                return [match1.equipeANom compare:match2.equipeANom];
            }
        }
        else {
            return [[NSNumber numberWithInt:match1.ordreCompetition] compare:[NSNumber numberWithInt:match2.ordreCompetition]]; 
        }
    }
    else {
        return [match1.paysCompetition compare:match2.paysCompetition]; 
    }
} 
else {
    return [match1.matchDate compare:match2.matchDate];
} 
```

}];

[AAjouter insertObject:match atIndex:index]; 休息;

我有这个错误信息：

> “返回类型'NSComparaisonResult'（又名'NSComparaisonResult'）必须匹配先前的返回类型'NSIntger'（又名'int'）”

在每个代码行之后：

```
return [[NSNumber numberWithInt:match1.ordreCompetition] compare:[NSNumber numberWithInt:match2.ordreCompetition]]; 
return [match1.paysCompetition compare:match2.paysCompetition]; 
return [match1.matchDate compare:match2.matchDate]; 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:55:11.523

显式指定返回类型：

```
^NSComparisonResult(id obj1, id obj2) { ... 
```

编译器通常会推断块的返回类型，但在某些情况下，它可能会混淆。我怀疑这可能与返回 enum`NSOrderedSame`有关，在旧版本的编译器上，它是 type `int`。

# ios - NSInternalInconsistencyException：数据库磁盘映像格式错误

> ID：13324082
> 
> 赞同：1
> 
> 时间：2012-11-10T17:05:15.347
> 
> 标签：ios, cocoa-touch, core-data

任何人都知道什么可能导致这种问题？我没有任何额外的上下文，但对这可能发生的情况感到困惑。对于它的价值，我尝试在应用启动时将我们的持久存储添加到协调器，如果不成功，删除数据库文件并重新创建它。谢谢你。

`NSInternalInconsistencyException: Fatal error. The database at /var/mobile/Applications/1A2D247A-AB6C-4FDF-A9A6-31935BB76188/Documents/Tumblr.sqlite is corrupted. SQLite error code:11, 'database disk image is malformed'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:08:17.587

我建议确保您在使用完数据库后关闭它，或者如果您出于任何原因保持数据库连接打开，请确保您的应用程序委托`applicationWillTerminate`关闭数据库并酌情进行清理。

# ios - 尝试使用从 sql + NSRangeException' 检索的数据填充表视图控制器时出现异常

> ID：13324084
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:05:17.717
> 
> 标签：ios, sqlite, ios6

我是 iOS 开发的新手，我遇到了奇怪的问题（因为表视图控制器和 sql 类中的相同代码与其他实体一起工作得很好）。

我正在尝试**将数据从 sqlite 数据库检索到我的表视图控制器**..

**当我尝试在数据库中插入多条记录时，会**出现此错误。 2012-11-10 19:04:20.577 我的应用程序 [7032:11303] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** - [__NSArrayI objectAtIndex:]：索引 1 超出范围 [0 .. 0]” ***首先抛出调用栈：

任何帮助将不胜感激。 **谢谢你。**

* * *

```
import <UIKit/UIKit.h>
import "Category.h"
import "DbOperations.h"
import "AddCategoriesTVC.h"
import "CategoryDetailTVC.h"@interface CategoriesTVC : UITableViewController <UITableViewDataSource, UITableViewDelegate,AddCategoriesTVCDelegate, CategoryDetailTVCDelegate>

@property (strong, nonatomic) Category *categoryItem;
@property(nonatomic, strong) DbOperations * ops;
@property(nonatomic, strong) NSMutableArray * myCategoryArray;
@property (strong, nonatomic) IBOutlet UITableView * categoryTable;
@end
///////////
import "CategoriesTVC.h"
import "Category.h"
import "DbOperations.h"
import "sqlite3.h"
@implementation CategoriesTVC
@synthesize categoryTable;
@synthesize categoryItem,myCategoryArray,ops;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{ops = [[DbOperations alloc]init];
[ops selectCategories];
myCategoryArray = [ops categoryArray];
self.editButtonItem.title = @"edit";
self.navigationItem.leftBarButtonItem = self.editButtonItem;
[super viewDidLoad];
}

- (void)viewDidUnload
{
[self setCategoryTable:nil];
[super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{[super viewWillAppear:animated];
//myCategoryArray =[[NSMutableArray alloc]init];//]
[ops selectCategories];
myCategoryArray = [ops categoryArray];
[categoryTable reloadData];}

//pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
// Return the number of sections.
return 1;}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 NSLog(@"JJJJ2");
// Return the number of rows in the section.
return [self.myCategoryArray count];}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"Category Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

Category * categoryObj = [ops.categoryArray objectAtIndex:indexPath.row];
cell.textLabel.text = categoryObj.categoryName;
cell.textLabel.textAlignment = NSTextAlignmentCenter;//UITextAlignmentCenter;

return cell;} 
```

* * *

```
@interface DbOperations : NSObject
{
sqlite3 * db;
}
//to add the contents of the database which will be the data source for the table
@property(nonatomic,strong)NSMutableArray * categoryArray;

//instance methods for ** Category Entity **

-(void) selectCategories;
-(void) insertCategory:(NSString *)categoryName;
-(void) updateCategory:(NSString *)categoryName:(NSString *)categoryName2;
-(void) deleteCategory:(NSString *)categoryName;
------------------------------------------
------------------------------------------
-(void) selectCategories{

categoryArray = [[NSMutableArray alloc] init];
//Get list of directories in Document path
NSArray * dirPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

//Define new path for database
NSString * documentPath = [[dirPath objectAtIndex:0] stringByAppendingPathComponent:@"SmartSpeakerDB.sqlite"];
//By default there should only have one item in the array, so the index is always 0 unless you add subdirectories.

if(!(sqlite3_open([documentPath UTF8String], &db) == SQLITE_OK))
{
    NSLog(@"An error has occured.");

    return;
}else{//e2

    const char *sql = "SELECT categoryName FROM Category";
    //const char * sql, will be execute the SELECT statement.
    sqlite3_stmt *sqlStatement;

    if(sqlite3_prepare_v2(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
    {
        NSLog(@"There is a problem with prepare statement Hah");
        return;
    }else{
        while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
             NSLog (@"ENTER while");

 char * checkChar = (char*)sqlite3_column_text(sqlStatement,0);//1
    if (checkChar!= NULL) {
        NSString *s=[NSString stringWithUTF8String:checkChar];
                Category * newCategory = [[Category alloc] init];
        newCategory.categoryName = s;

             NSLog (@"***");
                [categoryArray addObject:newCategory];
            NSLog(@"Name %@",newCategory.categoryName);
               newCategory = nil;

     }//END IF
        }//END While
        sqlite3_finalize(sqlStatement);
        sqlite3_close(db);
    }//END ELSE 1
}//END ELSE 2
}//End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:13:59.753

我看起来可能是因为您正在使用：

```
[self.myCategoryArray count]; 
```

在`numberOfRowsInSection`但是：

```
[ops.categoryArray objectAtIndex:indexPath.row]; 
```

在`cellForRowAtIndexPath`.

如果两个数组有不同数量的对象，那么你就会遇到这个问题。您通常对这两个函数使用相同的数组，这样就不会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:14:06.973

您没有说明您在所有代码中实际遇到问题的位置，但我看到了一个可能的问题。在您的`tableView:numberOfRowsInSection:`方法中，您返回：

```
[self.myCategoryArray count]; 
```

但是然后在您的`tableView:cellForRowAtIndexPath:`方法中，您调用：

```
Category * categoryObj = [ops.categoryArray objectAtIndex:indexPath.row]; 
```

您在这里使用了两个不同的数组。这些应该基于相同的数据。

为了将来参考，在发布此类问题时，请指出异常来自的确切行，并仅发布相关代码。

# javascript - 带有 Windows 8 的 Facebook JS SDK - FB 未定义

> ID：13324085
> 
> 赞同：0
> 
> 时间：2012-11-10T17:05:20.057
> 
> 标签：javascript, jquery, windows, facebook, windows-8

我正在为涉及 facebook 集成的 Windows 8 创建一个应用程序。我知道您无法加载外部 javascript，因此我将 iframe 作为第一个元素，该元素链接到链接到 facebook sdk 的文件。我的 DOM 浏览器似乎告诉我加载正常

尽管有一个

```
$(document).ready(function() {
} 
```

在我的 FB.login 函数（在下面`window.fbAsyncInit`）周围，有人告诉我“FB”是未定义的。

一些注意事项： - 只有在用户按下按钮后才会调用登录 - 在线工作正常 - 我的 JS 代码..

```
window.fbAsyncInit = function() {
 FB.init({
    appId      : 'APP ID', // App ID
    channelUrl : '//url', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    frictionlessRequests : true, // enable frictionless requests        
    xfbml      : true  // parse XFBML
 });

 FB.getLoginStatus(function(response) {
    ...
 }); 
}; 

function goLogIn() {
  $(document).ready(function () {
    FB.login(function(response) {
      ...
    }, {scope: 'user_photos,friends_photos,publish_stream',}); //FB.login
  });
} 
```

关于为什么这样做的任何想法？我假设它与 Windows 8 处理事物的顺序有关。

谢谢，尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:25:24.273

找到了解决方案...:) Windows 8 应用程序不会为您加载外部 js 文件，因此您需要做的是转到[http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js)，下载文件并在本地加载。希望这对您有所帮助。

# c# - Asp.Net WebApi 自定义媒体格式化程序与特定类型不匹配

> ID：13324086
> 
> 赞同：0
> 
> 时间：2012-11-10T17:05:23.693
> 
> 标签：c#, asp.net-web-api

我正在检查 web api 的内容协商和自定义格式化程序，并尝试使用通用自定义格式化程序。使用 RazorEngine 我正在解析一个剃刀视图，以作为来自 Web api 控制器的响应消息返回。

这是我的格式化程序配置

```
 GlobalConfiguration.Configuration.Formatters.Insert(0, new RazorViewFormatter<DefaultViewModel>("home-json", new MediaTypeHeaderValue("text/json"), new MediaTypeHeaderValue("application/json")));
        GlobalConfiguration.Configuration.Formatters.Add(new RazorViewFormatter<DefaultViewModel>("home", new MediaTypeHeaderValue("text/html")));
        GlobalConfiguration.Configuration.Formatters.Add(new RazorViewFormatter<IEnumerable<CategoryViewModel>>("categories-json", new MediaTypeHeaderValue("text/json"), new MediaTypeHeaderValue("application/json")));
        GlobalConfiguration.Configuration.Formatters.Add(new RazorViewFormatter<IEnumerable<CategoryViewModel>>("categories", new MediaTypeHeaderValue("text/html"))); 
```

向我的默认资源发出请求，返回正确解析的剃刀视图。

```
GET http://localhost:56071/api/ HTTP/1.1
User-Agent: Fiddler
Accept: text/json
Host: localhost:56071 
```

但是，向我的类别资源发出请求，只返回我的模型的序列化 json 而不是解析的模板。基本上缺少自定义媒体格式化程序上的标记。永远不会调用 WriteToStreamAsync()

```
GET http://localhost:56071/api/categories HTTP/1.1
User-Agent: Fiddler
Accept: text/json
Host: localhost:56071 
```

这不是一个可行的方法吗？我确实在 CanReadType 上得到了匹配，我想知道多个格式化程序和它们评估 conneg 的方式是否最终以某种方式与文本/json 不匹配。

任何想法表示赞赏。谢谢。

**更新**

```
public override bool CanWriteType(Type type)
{
    return (type == typeof (T) || type.IsSubclassOf(typeof (T)));
}

public override bool CanReadType(Type type)
{
    return false;
} 
```

# regex - Vim 获取匹配行的长度

> ID：13324093
> 
> 赞同：2
> 
> 时间：2012-11-10T17:06:03.363
> 
> 标签：regex, vim

我正在尝试使用 vim 替换命令将特定类型的 C 代码转换为宏代码。此示例片段

```
#define LIST_GEN_FUNCS(TYPE)
struct list_##TYPE* list_generate() {  
struct list_##TYPE* ret = malloc(sizeof(struct list));
ret->len = 0; ret->first = 0;
return ret;
} 
```

需要看起来像这样：

```
#define LIST_GEN_FUNCS(TYPE)                               
struct list_##TYPE* list_generate() {                     \
struct list_##TYPE* ret = malloc(sizeof(struct list));    \
ret->len = 0; ret->first = 0;                             \
return ret;                                               \
}                                                         \ 
```

为此，我需要一种方法来用空格填充所有列，直到固定的行长，然后在每行结束后添加“\”。

```
%s/$/\= submatch(0) . " " . repeat(" ", 78 - LENGTH_OF_LINE) 
```

现在，这是我的问题。我无法找出如何获得匹配线的长度。谁能告诉我，插入什么为 LENGTH_OF_LINE？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T17:19:42.597

一种解决方案是在行尾添加空格，然后删除到特定列。例如：

```
:%norm80A <C-v><Esc>d80|s\<cr> 
```

`<C-v><Esc>`插入文字`^[`字符并结束`<cr>`命令。

如果你想在 VimL 中找到一行的长度，你可以使用`strlen(getline(6))`例如，如果你想获得第 6 行的长度。如果你想在现有的解决方案中实现它，你可以这样做

```
:%s/$/\=repeat(" ", 79-strlen(getline(".")))."\\" 
```

正如 Zyx 在评论中所说，更好的方法是

```
:%s/$/\=repeat(" ", 80-virtcol("$"))."\\" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:01:18.823

我的[AlignFromCursor 插件](http://www.vim.org/scripts/script.php?script_id=4155)可让您通过命令或映射将光标右侧的文本与特定列对齐。这样，您可以只附加反斜杠，然后将其对齐。

# delphi - 从 Chromium Embedded 获取 HTML 源代码

> ID：13324095
> 
> 赞同：8
> 
> 时间：2012-11-10T17:06:05.000
> 
> 标签：delphi, google-chrome, delphi-xe2, tchromium

如何使用 Delphi Chromium Embedded Component 执行此操作我知道如何使用 TWebBrowser 执行此操作。但是由于没有文档，我相信其他人也有同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T18:12:00.607

这是你如何做到的..

```
procedure TCustomLoad.OnLoadEnd(const browser: ICefBrowser;
  const frame: ICefFrame; httpStatusCode: Integer);
  var
  data:tstringlist;
begin
  data:=tstringlist.create;
  if frame.IsMain then
  data.text:=frame.Source; // HTML Source    
end;
  data.free;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-08T08:33:21.260

在 dcef 3

```
procedure StringVisitor(const str: ustring);
begin
  //str is the SourceHtml
showmessage(str);
end;

function GetSourceHTML: string;
var
CefStringVisitor:ICefStringVisitor;
begin
  CefStringVisitor := TCefFastStringVisitor.Create(StringVisitor);
  Chromium1.Browser.MainFrame.GetSource(CefStringVisitor);
end; 
```

# django - 基于计算的模型过滤

> ID：13324097
> 
> 赞同：2
> 
> 时间：2012-11-10T17:06:05.220
> 
> 标签：django, django-models, django-views

从我的模型中获取一些特定对象时我遇到了一些问题。

我的模型看起来像：

```
class Subscription(models.Model):
    subscriber = models.ForeignKey(Subscriber, null=False, blank=False, default=None, editable=False)
    plan = models.ForeignKey(SubscriptionPlan, null=False, blank=False)
    active_from_date =models.DateField(null=False, blank=False)

class SubscriptionPlan(models.Model):
    name = models.CharField(max_length=50, null=False, blank=False, default=None)
    interval = models.PositiveIntegerField(null=False, blank=False, default=30) 
```

现在我只想获得这些有效的订阅，所以我正在尝试这样的事情：

```
valid = Subscription.objects.filter(valid_from_date__gte=(datetime.date.today()-timedelta(days=plan__interval))) 
```

我无法访问 value plan__interval。如果我尝试在这个地方使用常量值，例如 10，那么一切正常。

您对如何在过滤器计算中使用 plan.interval 值有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:14:37.153

您可能对此感兴趣： [使用字段计算进行过滤](https://docs.djangoproject.com/en/dev/topics/db/queries/#filters-can-reference-fields-on-the-model)

我仍然有疑问，因为在将 INTEGER 添加到 DATETIME 时很难保持一致，因此您可以添加另一个`DatetimeField`并`Subscription`根据`plan`ForeignKey使用结束日期填充此值，`save(self, *args, **kwargs)`例如在 Subscription 方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:04:11.760

Raunak Agarwal 的回答似乎不错，但试试这个：

有效 = Subscription.objects.filter(active_from_date_gte *= datetime.date.today() - F('plan* _interval'))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:46:41.647

我想您可以使用注释功能在过滤器中使用外键

```
valid = Subscription.objects.annotate(plan_interval = Sum('plan__interval')).filter(valid_from_date__gte=(datetime.date.today()-timedelta(days=plan_interval))) 
```

# c# - 图像 Isapi 过滤器设置可根据 64 位参数调整图像大小

> ID：13324099
> 
> 赞同：0
> 
> 时间：2012-11-10T17:06:08.360
> 
> 标签：c#, asp.net, iis-7.5, 32bit-64bit, windows-server-2008-r2

我正在使用 C# 在现有的 ASP.net2.0 应用程序中工作，并在 Windows 2008 R2 服务器 64 位中部署在 IIS 7.5 上。

在我的应用程序中，各种图像大小是从下面给出的 IIS 设置中处理的。这样做的效果是，如果我们访问图像大小为

```
http//domainname.com/images/imagename.jpg?w=21&h=213 
```

图像会根据给定的宽度和高度参数自动调整大小。这一切都是由于 web.config 中的以下条目而发生的

```
<system.webServer>
    <handlers>      
        <add name="png" path="*.png" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
        <add name="jpg" path="*.jpg" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
        <add name="jpeg" path="*.jpeg" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
    </handlers>
</system.webServer> 
```

当我们在上面的 web.config 文件中为指向路径 aspnet_isapi.dll 的图像添加 isapi 过滤器时，条目就出现了。

它工作得很好。

现在我已将同一 IIS 上的应用程序池从 32 位升级到 64 位。图像调整发生失败。我认为的原因是因为在配置中它说“bitness32”，所以我们将其设置为 64 位，如“bitness64”并更新了配置

```
<system.webServer>
    <handlers>      
        <add name="png" path="*.png" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness64" />
        <add name="jpg" path="*.jpg" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness64" />
        <add name="jpeg" path="*.jpeg" verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" preCondition="classicMode,runtimeVersionv2.0,bitness64" />
    </handlers>
</system.webServer> 
```

但是当我们这样做时，网站中不再出现各种图像。

请建议我，我们如何紧急解决这个问题

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:29:58.390

您可以在 IIS 7 中将**启用 32 位应用程序设置为 True**（在您的应用程序正在使用的应用程序池上）。

在 64 位 Windows 上，32 位进程无法加载 64 位 DLL，64 位进程无法加载 32 位 DLL。如果您计划在 64 位 Windows 上运行 32 位应用程序，则必须配置 IIS 以创建 32 位工作进程。将 IIS 配置为创建 32 位工作进程后，您可以在 64 位 Windows 上运行以下类型的 IIS 应用程序：

*   Internet 服务器 API (ISAPI) 扩展
*   **ISAPI 过滤器**
*   Active Server Page (ASP) 应用程序（特别是调用 COM 对象的脚本，其中 COM 对象可以是 32 位或 64 位）
*   ASP.NET 应用程序

屏幕：

![在此处输入图像描述](../Images/01b5699825cd36182c172aaabb9138bd.png)

# objective-c - 无法以编程方式从 UITableView 中删除行

> ID：13324102
> 
> 赞同：2
> 
> 时间：2012-11-10T17:06:17.420
> 
> 标签：objective-c, ios

我正在尝试为我的应用程序实现自定义删除过程，因为我的客户不想要表格视图编辑模式提供的红色圆圈。我为每一行添加了一个删除按钮，其标签属性中有行号。一旦用户单击删除按钮，它就会触发以下方法：

```
-(IBAction)deleteRow:(id)sender{

    UIButton *tempButton = (UIButton*)sender;

   [self updateTotals];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:tempButton.tag inSection:0];

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]  withRowAnimation:UITableViewRowAnimationFade];

    [tableView reloadData];

    [sharedCompra removeItem:tempButton.tag];

    tempButton=nil;

} 
```

我总是得到这个错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (3) must be equal to the number of rows contained in that section before the update (3), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).' 
```

所以我不知道我是否在这段代码中遗漏了一些东西。

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T17:09:47.743

您正在尝试删除一行，而您的数据源仍反映原始状态（即删除之前的状态）。您必须先更新数据源**，**然后才能从表 viev 中发出删除。您也不需要将按钮设置为`nil`，也不需要调用`- reloadData`表格视图：

```
- (void)deleteRow:(id)sender
{
    UIButton *tempButton = sender;
    [self updateTotals];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:tempButton.tag inSection:0];
    [sharedCompra removeItem:tempButton.tag];

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]  withRowAnimation:UITableViewRowAnimationFade];
} 
```

（但是，您应该做的一件事是**注意如何格式化代码。**）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:07:33.753

打电话`[sharedCompra removeItem:tempButton.tag];`之前`[tableView deleteRowsAtIndexPaths...`和`[tableView reloadData]`

问题是，当您调用`deleteRowsAtIndexPath:`它时，它会`numberOfRowsInSection`从您的模型返回相同的计数。

`reloadData`这里也不需要调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:12:11.233

删除和添加行时，您需要调用 beginUpdates，这里应该是这样的。

```
[tableView beginUpdates];
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]  withRowAnimation:UITableViewRowAnimationFade];
[tableView endUpdates]; 
```

而且你不需要调用reloadData，否则会取消deleteRows和insertRows方法的动画。但是你确实需要重置数据，所以如果你使用的是 NSMutableArray，你需要先删除对象，所以索引 0 处的项目，然后你可以删除表中的第 0 行。当它结束删除时，行数需要与该数组中的对象数相匹配，否则它也会崩溃。

# android - zxing 条码 - 如何将扫描仪（意图）嵌入到其他布局中

> ID：13324103
> 
> 赞同：1
> 
> 时间：2012-11-10T17:06:23.303
> 
> 标签：android, zxing, barcode-scanner

下面的代码对我有用。但是，我怎样才能将它与来自另一个活动的其他布局嵌入呢？

基本上，屏幕将分为两部分：第一个将包含标题和共享按钮以在其他屏幕中使用；第二个将是条形码扫描仪或任何其他屏幕。

```
public Button.OnClickListener mScan = new Button.OnClickListener() {
public void onClick(View v) {
    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
    intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
    startActivityForResult(intent, 0);
} 
```

};

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
if (requestCode == 0) {
    if (resultCode == RESULT_OK) {
        String contents = intent.getStringExtra("SCAN_RESULT");
        String format = intent.getStringExtra("SCAN_RESULT_FORMAT");
        // Handle successful scan
    } else if (resultCode == RESULT_CANCELED) {
        // Handle cancel
    }
} 
```

}

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T17:14:55.547

没有办法做到这一点。您正在调用第三方应用程序并且无法控制它的外观。

# css - 对齐块元素的顶部

> ID：13324105
> 
> 赞同：0
> 
> 时间：2012-11-10T17:06:30.417
> 
> 标签：css, html

我的 HTML5/CSS 呈现如下：http: [//imgur.com/0rixh](http://imgur.com/0rixh)

使用以下代码：

```
 <li>
                    <div class="name">Booger Jet.zip</div>
                    <progress max="100" value="60"></progress>
                    <div class="control"></div>
                    <div class="status">12 MB / 21 MB   240 kB/s</status>
                </li>

#uploads li progress {
    width: 317px;
    margin-bottom: 4px;
}

#uploads li .control {
    width: 14px;
    height: 14px;
    display: inline-block;
    opacity: 0.6;
    background-image: url('../img/stop_button.png');
} 
```

如何垂直对齐它们？我有哪些选择？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:41:04.723

尝试一下

```
#uploads li progress {
    width: 317px;
    margin-bottom: 4px;
    margin-top:1px; /* change it if you need more top sapce*/
}
#uploads li .control {
        width: 14px;
        height: 14px;
        display: inline-block;
        vertical-align:top;
        opacity: 0.6;
        background-image: url('../img/stop_button.png');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:10:30.283

您可以为此使用**vertical-align:middle**。

```
#uploads li .control, #uploads li progress{
 display:inline-block;
 vertical-align:middle;
} 
```

# jquery - 脚本中的错误。从 json 中获取数据

> ID：13324106
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:06:30.557
> 
> 标签：jquery, json

我的脚本中出现以下错误。请帮忙：

```
missing : after property id
[Break On This Error]   

data.modules[2].fields[0].name:"required"; 
```

PFB 脚本：

```
$("#frm").validate({
    "rules": {
        data.modules[2].fields[0].name: "required";
        data.modules[2].fields[1].name: {
            "required": "true",
            data.modules[2].fields[1].name: "true"
        }

        "messages": {
            data.modules[2].fields[0].name: "Enter your firstname",
            data.modules[2].fields[1].name: {
                "required": "Please enter a valid email address",
                "minlength": "Please enter a valid email address"
            }
        }
    }); 
```

这是我的 html 表单：

```
html += '<form id="frm" method="get" type='+data.modules[2].type+' class='+data.modules[2].attributes.class+'name='+data.modules[2].name+
                    'action='+data.modules[2].action+'><p>'+data.modules[2].title+'</p>'
                    html += '<label class="firstname">'+data.modules[2].fields[0].label+'</label>';
                    html += '<input type='+data.modules[2].fields[0].type+'name='+data.modules[2].fields[0].name+'value='
                    +data.modules[2].fields[0].value+'/>';
                    html += '<label class="Email">'+data.modules[2].fields[1].label+'</label>';
                    html += '<input type='+data.modules[2].fields[1].type+'name='+data.modules[2].fields[1].name+'value='
                    +data.modules[2].fields[1].value+'/>'; 
```

我在上面的 html 中得到了正确的值。通过发出警报进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:20:07.980

您不能`data.modules[2].fields[0].name`在对象文字中用作标识符。标识符始终是名称，而不是表达式的值。

如果要将值用作标识符，则必须先创建对象，然后使用索引语法设置属性。例子：

```
var obj = {};
obj[data.modules[2].fields[1].name] = "required"; 
```

（我尝试为您尝试创建的对象编写实际代码，但代码已损坏（即错误或缺少分隔符、不匹配的括号），以至于如果不知道对象结构应该是什么，就不可能知道它是什么应该做的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:20:31.990

您需要在 JavaScript 字典的元素之间包含逗号：

```
$("#frm").validate({
    "rules": {
        data.modules[2].fields[0].name: "required",
        data.modules[2].fields[1].name: {
            "required": "true",
            data.modules[2].fields[1].name: "true"
        },

        "messages": {
            data.modules[2].fields[0].name: "Enter your firstname",
            data.modules[2].fields[1].name: {
                "required": "Please enter a valid email address",
                "minlength": "Please enter a valid email address"
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:22:20.807

您不能使用变量作为对象字面量语法的键。您可以通过以编程方式构建配置对象来实现您想要的：

```
var field1 = data.modules[2].fields[0].name;
var field2 = data.modules[2].fields[1].name;

var rules = {};

rules[field1] = "required";
rules[field2] = {
  "required": true
};

var messages = {};

messages[field1] = "Enter your firstname";
messages[field2] = {
  "required": "Please enter a valid email address",
  "minlength": "Please enter a valid email address"
};

$("#frm").validation({"rules": rules, "messages": messages}); 
```

此外，您的代码缺少右括号。我通过您的缩进假设您想要`rules`并且`messages`处于同一级别，而不是`messages`在`rules`.

# python - Python urllib 开放问题

> ID：13324109
> 
> 赞同：4
> 
> 时间：2012-11-10T17:06:44.537
> 
> 标签：python, urllib

我正在尝试从**http://book.libertorrent.com/**获取数据，但目前我失败了，因为响应中出现了一些额外的数据（标题）。我的代码很简单：

```
response = urllib.urlopen('http://book.libertorrent.com/login.php')
f = open('someFile.html', 'w')
f.write(response.read()) 
```

**读取（）**返回：

```
Date: Fri, 09 Nov 2012 07:36:54 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: close
Cache-Control: no-cache, pre-check=0, post-check=0
Expires: 0
Pragma: no-cache
Set-Cookie: bb_test=973132321; path=/; domain=book.libertorrent.com
Content-Language: ru

1ec0
...Html...
0 
```

**response.info()**是空的。

有没有办法纠正反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:55:23.407

让我们试试这个：

```
$ echo -ne "GET /index.php HTTP/1.1\r\nHost: book.libertorrent.com\r\n\r\n" | nc book.libertorrent.com 80 | head -n 10
HTTP/1.1 200 OK
WWW
Date: Sat, 10 Nov 2012 17:41:57 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Content-Language: ru

1f57
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html dir="ltr"> 
```

看到第二行的“WWW”了吗？这不是有效的 HTTP 标头，我猜这就是这里抛出响应解析器的原因。

顺便说一句，python2 和 python3 在这里的行为不同：

*   python2 似乎立即将此无效标头之后的任何内容解释为内容
*   python3 忽略所有标题并继续读取双换行符后的内容。因为标头被忽略，所以传输编码也是如此，因此内容长度被解释为正文的一部分。

所以最后的问题是服务器发送了一个无效的响应，应该在服务器端修复。

# matlab - 指定分数时的Matlab精确度

> ID：13324111
> 
> 赞同：1
> 
> 时间：2012-11-10T17:07:09.103
> 
> 标签：matlab

我想创建一个具有三个值 1/6、2/3 和 1/6 的向量。显然，我的 Matlab 必须将这些有理数转换为实数，但我希望它能最大限度地提高可用精度。

它将值存储为双精度值，但将它们存储为 -

```
b =

    0.1667    0.6667    0.1667 
```

这是精度的巨大损失。double 不应该意味着数字的小数部分的 52 位精度，为什么数字会被如此严重地截断？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T17:10:38.393

数字仅以这种方式显示。在内部，他们使用全精度。您可以使用该`format`命令更改显示精度。例如：

```
长格式
```

将它们显示为：

```
0.166666666666667 0.666666666666667 0.166666666666667
```

所以答案很简单；没有精度损失。只是显示问题。

您可以阅读有关可用于显示数字的其他格式的[文档。](http://www.mathworks.com/help/matlab/ref/format.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:13:25.933

您不能将值作为 1/2 或 1/4 或 1/6 存储到 Double 变量中……这些值在系统后面存储为小数；如果要存储这些值，请尝试将其存储为可行的字符串；

每当您想使用这些字符串进行数学计算时，请将值转换为数字并继续....

# java - Jframe的标题没有改变

> ID：13324114
> 
> 赞同：0
> 
> 时间：2012-11-10T17:07:40.803
> 
> 标签：java, swing, jframe

所以我有一个名为 MyFrame 的类，它扩展了 JFrame。我在 MyFrame 的构造函数中添加了另一个名为 TabbedFrame 的类的对象作为 MyFrame 类的组件，例如

```
add(new TabbedFrame());
setTitle("Some Title");
setVisible(true); 
```

现在，TabbedFrame 类扩展了另一个名为 FrameDemo 的类，其中框架标题定义为：

```
super ("Title One"); 
```

当我运行它时，我将 Title One 作为我的 JFrame 的标题。但我认为它应该是一些标题，因为我已经在 MyClass 的构造函数中更改了它。这是到目前为止的代码。任何帮助将不胜感激。谢谢。

```
public class MyFrame extends JFrame{
public MyFrame(){

add(new TabbedFrame());

setTitle("Some Title");

setVisible(true);

}

public static void main(String[] args){

MyFrame frame = new MyFrame();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:05:18.943

我做错的第一件事是我从 JFrame 扩展了它。它应该是 TabbedFrame。第二，

```
addTabbedFrame() 
```

将创建 TabbedFrame 的对象，在这种情况下，框架的标题将是 Title One。所以 add.TabbedFrame 一定不存在。我分享了答案，以防其他人像我一样愚蠢。大声笑 – Ingila Ejaz 19 小时前

# html - 无法在页面上加载 Google API 图表，它们仅在我重新加载页面时显示

> ID：13324115
> 
> 赞同：0
> 
> 时间：2012-11-10T17:07:48.603
> 
> 标签：html, jquery-mobile, google-visualization

下面是我的代码，其中包含 3 个图表，只有在我刷新后才会在页面上加载，有没有人知道如何在我第一次单击此页面时加载它？PS 我已经尝试了很多成功的建议：function() 并尝试使用 ajax 直接加载 div 但没有运气

```
<script src="https://www.google.com/jsapi" type="text/javascript"></script>
<script>
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Date', 'Temp'],
            {% for graphreading in graphreadings %}
                ['{{ graphreading.timeformatted }}', {{ graphreading.temperature }}],
            {%  endfor %}
        ]);

        var options = {

            hAxis: {title: 'Timestamp',
                titleTextStyle: {color: 'black'}},
            vAxis: {title: 'Temperature in °F'},
            colors: ['red']
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_temp'));
        chart.draw(data, options);
    }
</script>
<script>
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Date', 'CO2'],
            {% for graphreading in graphreadings %}
                ['{{ graphreading.timeformatted }}', {{ graphreading.co2 }}],
            {%  endfor %}
        ]);

        var options = {

            hAxis: {title: 'Timestamp', titleTextStyle: {color: 'black'}},
            vAxis: {title: 'CO2 in ppm'},
            colors: ['green']

        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_co2'));
        chart.draw(data, options);
    }

</script>
<script>
    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Date', 'Humidity'],
            {% for graphreading in graphreadings %}
                ['{{ graphreading.timeformatted }}', {{ graphreading.humidity }}],
            {%  endfor %}
        ]);

        var options = {

            hAxis: {title: 'Timestamp', titleTextStyle: {color: 'black'}},
            vAxis: {title: 'Humidity in %'},
            colors: ['blue']
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_humidity'));
        chart.draw(data, options);
    }

</script>

<div class="middlepages" >
    <ul data-role="listview" data-inset="true" data-dividertheme="a" >

        <li><div style="text-align: center; font-size: x-large;"> Readings for {{ zone.description }}</div><div id="chart_temp"></div></li>
        <li><div id="chart_co2"></div> </li>
        <li><div id="chart_humidity"></div> </li>
        {% for reading in readings %}
            <li>Time Created: {{ reading.timeformatted }}&nbsp; Temp:{{ reading.temperature }}
                &nbsp; CO2:{{ reading.co2 }}&nbsp; Humidity:{{ reading.humidity }}&nbsp; Fan: {{ reading.fan }}
                &nbsp; Mode:{{ reading.mode }}</li>
        {% endfor %}

    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T21:42:54.003

问题是页面在 jquery-mobile 中的加载方式。标准行为是通过 Ajax 链接页面，这只是将新页面内容添加到 DOM。这意味着您通过链接访问的页面并未真正重新加载。

如果禁用 Ajax 加载，将执行真正的页面重新加载并加载谷歌图表。通过将 data-ajax="false" 属性添加到链接标记来禁用 Ajax 加载。有关 Ajax 加载的更多信息，请查看 jquery-mobile 文档：http: [//jquerymobile.com/demos/1.2.0/docs/pages/page-links.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)

最重要的是，您需要按如下方式修改 javascript：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('visualization', '1', {packages: ['corechart']});
</script>
<script type="text/javascript">
  // this function is called once the document has been fully loaded
  $(document).ready(function () {
    ... put your stuff in here ...
    google.setOnLoadCallback(drawChart);
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:12:19.187

把这个东西放进去

```
$(document).ready(function(){

// your code here

}); 
```

或尝试

```
function pageLoad(sender, args) {

// code here
} 
```

# python - Foreman 中的多个 python 进程停止记录

> ID：13324118
> 
> 赞同：3
> 
> 时间：2012-11-10T17:07:58.353
> 
> 标签：python, logging, heroku, foreman

我正在通过 Heroku 和[Foreman运行两个 python 进程（时钟和网络）](https://github.com/ddollar/foreman)

当我使用 Foreman 在本地运行时：
1\. 两个进程都登录到终端
2。然后时钟进程停止输出（即使它仍在运行）。这种输出停止不会发生在代码中的一致位置，但通常在 3-5 次迭代之间。
3、web进程继续正确输出。

奇怪的是，当我在 Heroku 上运行相同的代码时，日志输出就好了。

我们在本地（使用 .env）和 Heroku 上将 PYTHONUNBUFFERED 设置为 true。有人遇到过这个问题吗？有解决办法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:17:14.710

我无法用 Foreman 解决这个问题，但我确实想出了解决方案。Foreman 有一个名为[honcho](https://github.com/nickstenning/honcho)的 python 端口。我已经切换到 honcho，它解决了我的日志记录/冻结问题。

# deployment - 如何使用 Chef 客户端-服务器架构“按需”部署代码？

> ID：13324119
> 
> 赞同：1
> 
> 时间：2012-11-10T17:08:02.047
> 
> 标签：deployment, chef-infra

这是场景：

我可以通过 SSH 连接到我的 Chef-Server 。但我**无法通过**SSH 连接到任何 Chef-Clients。所以这就是我的工作方式：我有一个工作站来更改或创建角色。所有 chef-clients 都作为守护进程运行，因此当它们醒来时，它们会注意到状态变化并开始自我更新。

现在，我需要在这些客户端上配置代码部署。我在想我可以为此使用应用程序说明书，并使用我的工作站向角色添加食谱。但是，每次厨师客户醒来并发现修订更改时，这不会导致部署吗？我想要一种 On Demand 类型的部署：我只想在代码准备好部署时进行部署，而不是在此之前进行任何其他提交。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T15:20:09.413

几个问题

您的代码部署何时准备就绪？你怎么知道的？如果这是一个可重复的过程，你能不把它编码成食谱吗？如果这不是一个可重复的过程，您需要将其设为一个，以便它可以自动化

IE 运行黄瓜测试，如果它们都通过了，那么部署其他什么都不做？

我们从 Artifactory 提供数据，并使用 web api 检查我们可用的最新安装程序。如果它与之前安装的相同（通过检查/创建注册表项来完成），我们会告诉用户，这个版本已经安装，所以我们跳过。如果不一样我们安装。现在我知道这不是完全相同的场景，但我觉得这里需要一些自定义代码。

根据代码的状态，或者利用数据包值来表示 install=true 或 false。当您要部署时，您将在数据包中更新项目 a 的安装项，其余时间将其设置为 false。只有当值为真时，配方才会继续？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T21:36:31.677

为什么不建立一个随时可以部署 HEAD 的分支？仅当您的代码准备好发布到世界时才推送到此分支。这样您就不必担心厨师会同步您的存储库的中间、不稳定状态。当然，您仍然必须等待客户端唤醒并同步才能看到您的更改，因此如果延迟是一个问题，这将不起作用。

# html - 删除 webkit 在外部样式表中实现的滚动条后 CSS 格式消失

> ID：13324120
> 
> 赞同：0
> 
> 时间：2012-11-10T17:08:08.587
> 
> 标签：html, css

我有一个奇怪的问题。我有一个外部样式表，其中使用了 webkit 滚动条。现在，我不想再使用它了，但是当我删除实现自定义滚动条的三行代码时，整个 CSS 格式将从使用样式表的所有页面中消失。

带有 webkit 代码的网页。

![在此处输入图像描述](../Images/cf60e6be842bc65799e1bd9c337a9d6e.png)

移除 webkit 代码后的网页。

![在此处输入图像描述](../Images/87179bb66ea1f5644baccec7d24d3582.png)

这是CSS代码：

```
<style rel="stylesheet" type="text/css">
::-webkit-scrollbar-thumb:vertical {background-color:#70AFB4; height:auto;}
::-webkit-scrollbar-thumb:horizontal {background-color:#70AFB4; height:10px !important;}
::-webkit-scrollbar {height:7px; width:7px; background-color:#E7E6E1;}

body{
background: #F6F6F6;
font-family: Ubuntu,Georgia;
font-size: 16px;
line-height: 150%;
color: #333;    }

h1{
color:#0E0B06;
font-weight:normal;
font-size:40px;
margin-bottom:0px; }

h2{
color:#0E0B06;
font-size:15px;
font-weight:normal;
margin-bottom:0px; }

a{
color:#0E0B06;
padding:1px 2px;
background:#70AFB4;
text-decoration: none; }

a.default {
background:none; }

a:hover{
color:#0E0B06;
background:none; }

.wrapper {
width: 800px margin:auto; }

.header {
margin: 30px 50px 75px 400px; 
width: 400px }

.indexer {
width: 150px;
float: left;
margin: 40px 100px 75px 150px; }

.poster {
width: 700px;
margin: 70px 50px 75px 400px;
padding-bottom: 30px; } 
```

有问题的 webkit 代码：

```
::-webkit-scrollbar-thumb:vertical {background-color:#70AFB4; height:auto;}
::-webkit-scrollbar-thumb:horizontal {background-color:#70AFB4; height:10px !important;}
::-webkit-scrollbar {height:7px; width:7px; background-color:#E7E6E1;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:12:49.987

### 如果这是第一行的外部样式表：

```
<style rel="stylesheet" type="text/css"> 
```

那么它是无效的。这样，规则`body`就不会被采用。

`<style>`外部 CSS 文件中不需要该标签，这样做会导致错误，从而阻止第一条规则不被执行。

`<style rel="stylesheet" type="text/css">`从您的 CSS 文件中删除将修复它。

# javascript - Prettify.JS 无法正确显示 HTML 脚本标签

> ID：13324121
> 
> 赞同：1
> 
> 时间：2012-11-10T17:08:29.633
> 
> 标签：javascript, regex, prettify

我正在使用 Prettify.JS 在我正在开发的网站上显示一些代码。我似乎对脚本标签有一些问题，尤其是“非链接”标签：

```
<pre>
// Link CSS
&lt;link rel=&quot;stylesheet&quot; href=&quot;device.css&quot; /&gt;

// Link JQuery
&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.7.1.min.js&quot;&gt;&lt;/script&gt;

// Link DeviceJS
&lt;script type=&quot;text/javascript&quot; src=&quot;device.min.js&quot;&gt;&lt;/script&gt;

// Initialize DeviceJS
&lt;script&gt;
    $(document).ready(function () {
        $('selector').devicejs(options);
    });
&lt;/script&gt;
</pre> 
```

此代码显示以下内容（注意整个脚本标记为红色）：

![美化代码](../Images/cd51a7db3c062f01e7b91421d00960a4.png)

但是，当我在下面做这个小技巧时（在关闭开始脚本标记之前添加一些不可见的 html）：

```
<pre>
// Link CSS
&lt;link rel=&quot;stylesheet&quot; href=&quot;device.css&quot; /&gt;

// Link JQuery
&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.7.1.min.js&quot;&gt;&lt;/script&gt;

// Link DeviceJS
&lt;script type=&quot;text/javascript&quot; src=&quot;device.min.js&quot;&gt;&lt;/script&gt;

// Initialize DeviceJS
&lt;script<span style="display:none;"> t</span>&gt;
    $(document).ready(function () {
        $('selector').devicejs(options);
    });
&lt;/script&gt;
</pre> 
```

它似乎显示确定：

![破解后美化代码](../Images/a7b5f9fdd3a5b55bd8753c6f4abf3cef.png)

问题是当我添加多个非链接脚本标签块时，问题又出现了。所以下面的代码：

```
<pre>
// Link CSS
&lt;link rel=&quot;stylesheet&quot; href=&quot;device.css&quot; /&gt;

// Link JQuery
&lt;script type=&quot;text/javascript&quot; src=&quot;jquery-1.7.1.min.js&quot;&gt;&lt;/script&gt;

// Link DeviceJS
&lt;script type=&quot;text/javascript&quot; src=&quot;device.min.js&quot;&gt;&lt;/script&gt;

// Initialize DeviceJS
&lt;script<span style="display:none;"> t</span>&gt;
    $(document).ready(function () {
        $('selector').devicejs(options);
    });
&lt;/script&gt;

&lt;script<span style="display:none;"> t</span>&gt;
    $(document).ready(function () {
        $('selector').devicejs(options);
    });
&lt;/script&gt;
</pre> 
```

显示为：

![在此处输入图像描述](../Images/36695d91cc048907aaa5f9d0c4b30537.png)

我查看了 Prettify.JS 源代码，在第 1211 行看到以下内容：

```
['lang-js',      /^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i], 
```

我相信这是词法分析器的一部分。

我不是正则表达式忍者，所以我会很感激任何关于如何调整它的帮助，以便 Prettify.JS 可以容纳没有属性的非链接脚本标签。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:08:39.560

一个[HTML](http://google-code-prettify.googlecode.com/svn/trunk/tests/prettify_test.html#html)示例显示此工作正常，因此我怀疑您的问题与美化不将内容识别为 HTML 以及使用错误的语言处理程序有关。没有看到你是如何调用美化的，很难说。

* * *

> 我查看了 Prettify.JS 源代码，在第 1211 行看到以下内容：
> 
> ```
> ['lang-js',      /^<script\b[^>]*>([\s\S]*?)(<\/script\b[^>]*>)/i], 
> ```
> 
> 我相信这是词法分析器的一部分。

你是对的。这就是说脚本元素以

```
<script\b[^>]*> 
```

或文本`<script`（由于结尾不区分大小写`/i`）后跟一个分词符和任意数量的非`>`字符，后跟一个`>`

然后

```
([\s\S]*?) 
```

非贪婪地匹配结束标记之前所需的最少字符数。这是在捕获组 1 中，因此将使用类型提示递归地美化此内容`lang-js`。

最后

```
(<\/script\b[^>]*>) 
```

与打开标签类似，但它是一个关闭标签。它可能不应该在捕获组中，但这不应该影响正确性。

# python - 阻止上传大小超过某个限制的文件

> ID：13324127
> 
> 赞同：3
> 
> 时间：2012-11-10T17:09:26.243
> 
> 标签：python, file-upload, cherrypy

我设置了一个`cherrypy`可以上传文件的服务器。但是，如果文件超过一定大小，我想阻止文件被上传。我搜索了一下，但无法找到答案。有没有办法通过`cherrypy`或一般情况下实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:18:59.707

[cherrypy._cpserver.Server.max_request_body_size](http://docs.cherrypy.org/en/latest/pkg/cherrypy.html?highlight=max_request_body_size#cherrypy._cpserver.Server.max_request_body_size)可能是您想要的。

在 HTTP 客户端上传文件之前，他们必须在 HTTP 标头中指定其消息正文的大小。基于此，您可以立即使用 HTTP 413 *Request Entity Too Large*错误消息拒绝上传尝试。

可以通过说一定数量然后上传更多来规避这一点 - 但大多数服务器足够聪明，可以在达到他们打算从客户端接受的最大值时停止读取。

不幸的是，情况并非总是如此，因为还有一种称为“分块编码”的 HTTP 上传方法，其中客户端（或服务器，取决于它的方式）不需要宣传其上传的大小。您通常在服务器端将此视为将数据流式传输到客户端的一种方式。

# javascript - 如何向 Chrome/Chromium 浏览器添加一些内容？

> ID：13324134
> 
> 赞同：1
> 
> 时间：2012-11-10T06:09:41.103
> 
> 标签：javascript, google-chrome

我需要在我的网站上添加一个“为我们添加书签”。但是当我使用谷歌搜索时，所有结果都得出结论，没有办法为 Chrome/Chromium 浏览器做“给我们添加书签”。

所以我想：

1- 隐藏 chrome/chromium 浏览器的内容。

或者至少，

2- 如果用户的浏览器是 chrome/chromium，则在单击该按钮后显示一条消息。

这是我的“书签我们”脚本：

```
 /** Bookmark Us */
    function bookmark_us(url, title){

    if(window.sidebar) // firefox
        window.sidebar.addPanel(title, url, "");
    else if(window.opera && window.print){ // opera
        var elem = document.createElement('a');
        elem.setAttribute('href',url);
        elem.setAttribute('title',title);
        elem.setAttribute('rel','sidebar');
        elem.click();
    } 
    else if(document.all) // ie
        window.external.AddFavorite(url, title);
    } else {

    }
    /** Bookmark Us */

<a href="javascript:bookmark_us('URL','TITLE')">Bookmark Us!</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T06:28:24.007

只需添加代码以在最终显示 Chrome / Chromium 不支持它的消息`else`

```
/** Bookmark Us */
function bookmark_us(url, title){

if(window.sidebar) // firefox
    window.sidebar.addPanel(title, url, "");
else if(window.opera && window.print){ // opera
    var elem = document.createElement('a');
    elem.setAttribute('href',url);
    elem.setAttribute('title',title);
    elem.setAttribute('rel','sidebar');
    elem.click();
} 
else if(document.all) // ie
    window.external.AddFavorite(url, title);
}

function hide_unsupported(){
    if( !(window.sidebar || (window.opera && window.print) || document.all) ){
        document.getElementById('bookmark').style.display = 'none';
    }
}

window.onload = function (){
    hide_unsupported();
}

<a id='bookmark' href="javascript:bookmark_us('URL','TITLE')">Bookmark Us!</a> 
```

# iphone - 当 UIView 动画发生时，CAShapeLayer 吓坏了

> ID：13324136
> 
> 赞同：1
> 
> 时间：2012-11-10T17:10:21.907
> 
> 标签：iphone, ios, cocoa-touch, core-animation, core-graphics

我有一个`CAShapeLayer`由多个子层组成的子层，这些子层包含一个由许多路径组成的图形。我将此图形存储在 CAShapeLayer 中是出于性能目的，而不是为了实际对其进行动画处理（只需要更改颜色并调整其大小）。我注意到的是，每次我做一个`UIView`动画（即视图转换或我手动做一个）时，`CAShapeLayer`似乎都会重新加载自己或做一些使其他动画不连贯的事情。如果我用手指移动 this 的`UIView`哪个房屋，也会发生这种情况`CAShapeLayer`。为什么会发生这种情况，我该如何防止这种情况发生？

更新：在分析出现后，很多工作正在进行中

```
-[CALayer drawInContext:] 
```

# jquery - 如何获取 Coda Slider 3 中已加载面板的编号？

> ID：13324141
> 
> 赞同：2
> 
> 时间：2012-11-10T17:11:02.823
> 
> 标签：jquery, coda-slider

我已经实现了 Coda Slider 3.0（[这个](http://kevinbatdorf.github.com/codaslider/)），我需要获取当前显示的图像的 URL。有谁知道如何做到这一点？

我知道有一个名为“firstPanelToLoad”的设置，所以我认为必须有某种方法来获取当前面板的编号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T20:42:17.973

我最终在 javascript 中添加了自己的功能。我向 $.fn.liquidSlider.options 添加了另一个选项，它成为我的自定义回调函数：

```
$.fn.liquidSlider.options = {
...
swipe: true,
swipeArgs: undefined,
customCallback: function(currentSlide) {}
}; 
```

然后在 setNextPanel 函数中，您可以使用当前选定的面板调用自定义回调：

```
setNextPanel: function(direction) {
...
    self.options.customCallback(self.nextPanel);
} 
```

# php - 不同的 MaxLength 值

> ID：13324142
> 
> 赞同：0
> 
> 时间：2012-11-10T17:11:11.627
> 
> 标签：php, textfield, maxlength

我的 WordPress 主题中有一个选项面板，其中包含多个文本字段。例如：项目名称、项目描述、推特用户名等。

```
case 'text':
    $val = $value['std'];
    $std = get_option($value['id']);
    if ( $std != "") { $val = $std; }
    $output .= '<input class="" maxlength="12" name=""'. $value['id'] .'" id="'. $value['id'] .'" type="'. $value['type'] .'" value="'. $val .'" />';
break; 
```

如上面的代码所示......我目前将文本字段的最大长度设置为 12，但我希望每个文本字段的最大长度都不同。我怎样才能做到这一点？

文本字段的输入 ID 是 mytheme_projectitle1、mytheme_projectitle2、mytheme_projectitle3、mytheme_twitterusername 等。我没有任何输入类，只有 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:16:15.260

`$value['id']`从代码中可以看出，您可以访问每个元素的 id 。使用它来导出最大长度，例如这样：

```
case 'text':
    // Overrides for the default value of maxlength
    $maxlengths = array(
        'mytheme_projecttitle1' => 10,
        'mytheme_projecttitle2' => 20,
    );

    // If there is an override value use it; otherwise use the default of 12
    $maxlen = isset($maxlengths[$value['id']]) ? $maxlengths[$value['id']] : 12;

    $val = $value['std'];
    $std = get_option($value['id']);
    if ( $std != "") { $val = $std; }

    $output .= '<input class="" maxlength="'.$maxlength.'"..."; // the rest as before 
```

# statistics - 如何知道何时使用特定类型的相似度指数？欧几里得距离与皮尔逊相关

> ID：13324144
> 
> 赞同：11
> 
> 时间：2012-11-10T17:11:33.113
> 
> 标签：statistics, machine-learning, nlp, artificial-intelligence

选择相似性指数时要考虑哪些决定因素。在什么情况下欧几里得距离比皮尔逊更受欢迎，反之亦然？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-10T20:27:33.527

相关性与单位无关；如果将其中一个对象缩放十次，您将获得不同的欧几里德距离和相同的相关距离。因此，当您想要测量诸如由其表达谱定义的基因之类的对象之间的距离时，相关性指标非常有用。

通常，绝对或平方相关被用作距离度量，因为我们对关系的强度比对它的符号更感兴趣。

但是，相关性只适用于高维数据；对于二维或三维数据点，几乎没有计算它的意义。

另请注意，“皮尔逊距离”是欧几里得距离的加权类型，而不是使用皮尔逊相关系数的“相关距离”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-27T05:01:04.023

这真的取决于你手头的应用场景。非常简单地说，如果您正在处理属性值的实际*差异很重要的数据，请使用欧几里德距离。*如果您正在寻找趋势或形状相似性，请使用相关性。另请注意，如果您对每个对象执行 z 分数归一化，欧几里德距离的行为类似于 Pearson 相关系数。Pearson 对数据的线性变换不敏感。还有其他类型的相关系数只考虑值的等级，对线性和非线性变换都不敏感。请注意，通常将相关性用作相异性的是 1 - 相关性，它不遵守度量距离的所有规则。

有一些关于在特定应用程序上选择邻近度度量的研究，例如：

Pablo A. Jaskowiak、Ricardo JGB Campello、Ivan G. Costa Filho，“基因表达微阵列数据聚类的邻近测量：验证方法和比较分析”，IEEE/ACM Transactions on Computational Biology and Bioinformatics，第一卷。99，没有。预印本，p。1, , 2013

# javascript - 获取文本框光标位置（文本之前或之后）

> ID：13324145
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:11:43.867
> 
> 标签：javascript, jquery, dom

如何检查光标位置是在文本的前面还是文本的最后。

```
<script  type="text/javascript">
    $(document).ready(function () {
        $('input').keyup(function (e) {
            if (e.which == 39 && <CURSOR IS FIRST OR LAST OF TEXT>)  {
                alert($('input').val);
                $(this).closest('td').next().find('input').focus();
                $(this).closest('td').next().find('input').select();
            }
         }
      }
<script>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

<script  type="text/javascript">
$(document).ready(function () {
    $('input').keyup(function (e) {
        if (e.which == 39 && <selected text lenght> > 0)  {
            $(this).closest('td').next().find('input').focus();
            $(this).closest('td').next().find('input').select();
        }
        else if (e.which == 37) {
            $(this).closest('td').prev().find('input').focus();
            $(this).closest('td').prev().find('input').select();
        }
        else if (e.which == 40) {
            $(this).closest('tr').next().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();
            $(this).closest('tr').next().find('td:eq(' + $(this).closest('td').index() + ')').find('input').select();
        }
        else if (e.which == 38) {
            $(this).closest('tr').prev().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();
            $(this).closest('tr').prev().find('td:eq(' + $(this).closest('td').index() + ')').find('input').select();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:43:04.547

您可以使用 jQuery Caret 插件。在此处查看[此线程](https://stackoverflow.com/questions/4085312/jquery-get-the-cursor-position-of-text-in-input-without-browser-specific-code)和[插件的主页](http://www.examplet.buss.hk/jquery/caret.php)。然后，您可以将代码更改为：

```
var pos= $(this).caret().start == $(this).caret().end ? $(this).caret().start : -1;
if (e.which === 39 && (pos === 0 || pos === $(this).val().length)) {
... 
```

希望它有所帮助，Shakib

# php - PHP/Javascript 绕过用户输入以显示 div

> ID：13324147
> 
> 赞同：0
> 
> 时间：2012-11-10T17:11:48.083
> 
> 标签：php, javascript, user-input

我有一个页面，如果您单击一个链接，它会公开一个使用 ajax 显示来自 dbase 的内容的 div。

用户在服务器上编辑此内容后，我想使用 PHP 将用户返回到该页面。使用重定向没问题

```
 header("location:page.php") 
```

但是，当用户返回页面时，理想情况下，我希望 div 中的内容自动打开，这样用户就可以立即看到编辑内容，而无需找到打开 div 的链接并单击它。

这是否可能，或者在 url 中使用某些东西来触发 javascript，或者当您使用某个参数加载页面时，触发 javascript 打开 div。

打开 div 的代码是一个简单的 javascript 调用：

```
<a href="javascript:void(0);" onclick="showDiv()">View Content</a> 
```

showDiv 只是使用 ajax 使用 responsetext 从服务器显示某些内容。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:15:35.013

```
header("location:page.php?show=1") 
```

然后在 page.php**正文**标签中：

```
<body <?php if($_GET['show']==1) { ?>onload="showDiv()"<?php } ?>> 
```

# php - 将 While 语句的结果放入 PHP 中的变量中

> ID：13324151
> 
> 赞同：0
> 
> 时间：2012-11-10T17:12:23.070
> 
> 标签：php, mysql

我环顾四周，不知道如何让以下代码块工作：

```
$answer17 = getAttachmentsByUser($dbh, $myid);

$attachment_table = while ($row73 = $answer17->fetch(PDO::FETCH_ASSOC)) {
                          echo '<tr>';
                          echo "<td><input name='checkbox[]' type='checkbox' id='checkbox[]' value='$row73[imageven_id]'></td>";
                          echo "<td><a href='../php/viewimages.php?id=$row73[image_id]')'>$row73[upload_name]</a></td>";
                          echo "<td>$row73[image_category]</td>";
                          echo "<td>$row73[upload_date]</td>";
                          echo '</tr>';
                      }; 
```

我已经看到了如何连接来自 while 语句的结果以构建数组的其他示例，但我认为我需要的更复杂。有没有办法构建我想要的 html 表，然后将其放入变量中以在其他地方使用？while 语句本身可以正常工作，而不是作为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:13:58.980

```
$answer17 = getAttachmentsByUser($dbh, $myid);

$attachment_table = '';
while (($row73 = $answer17->fetch(PDO::FETCH_ASSOC)) !== false) {
                          $attachment_table .= '<tr>';
                          $attachment_table .= "<td><input name='checkbox[]' type='checkbox' id='checkbox[]' value='${row73[imageven_id]}'></td>";
                          $attachment_table .= "<td><a href='../php/viewimages.php?id=${row73[image_id]}')'>${row73[upload_name]}</a></td>";
                          $attachment_table .= "<td>${row73[image_category]}</td>";
                          $attachment_table .= "<td>${row73[upload_date]}</td>";
                          $attachment_table .= '</tr>';
                      }; 
```

# java - 如何获取读取文件的进度

> ID：13324154
> 
> 赞同：1
> 
> 时间：2012-11-10T17:12:51.817
> 
> 标签：java, file, progress

我正在尝试从我的应用程序中的文件中读取一个大对象。由于这可能需要一些时间，我想以某种方式将文件的读取与 JProgressBar 连接起来。有没有简单的方法可以找到读取文件的进度？（加载本身是在 swingworker 线程中完成的，因此更新进度条应该不是问题。）我一直在考虑覆盖 FileInputStream 中的 readByte() 方法以返回各种进度值，但这似乎很狡猾方法。任何关于如何实现这一点的建议都非常受欢迎。

下面是读取文件的代码：

```
public class MapLoader extends SwingWorker<Void, Integer> {

String path;
WorldMap map;

public void load(String mapName) {
    this.path = Game.MAP_DIR + mapName + ".map";
    this.execute();
}

public WorldMap getMap() {
    return map;
}

@Override
protected Void doInBackground() throws Exception {
    File f = new File(path);
    if (! f.exists())
        throw new IllegalArgumentException(path + " is not a valid map name.");
    try {
        FileInputStream fs = new FileInputStream(f);
        ObjectInputStream os = new ObjectInputStream(fs);
        map = (WorldMap) os.readObject();
        os.close();
        fs.close();
    } catch (IOException | ClassCastException | ClassNotFoundException e) {
        e.printStackTrace();
    }
    return null;
}

@Override
protected void done() {
    firePropertyChange("map", null, map);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:57:07.277

如果是我，我不会搞乱重写 FileInputStream。我认为[装饰器](http://en.wikipedia.org/wiki/Decorator_pattern)可能很适合这里。这个想法是您创建一个装饰器输入流，然后将其传递给您的 ObjectInputStream。装饰器负责更新您的读取进度，然后委托给真正的输入流。

也许最简单的解决方案是使用Apache [commons-io 的](http://commons.apache.org/io/)[CountingInputStream](http://commons.apache.org/io/api-2.4/org/apache/commons/io/input/CountingInputStream.html)。基本步骤是：

*   创建 CountingInputStream 的子类作为地图加载器的非静态内部类
*   覆盖`afterRead`方法。调用 super.afterRead，然后发布你的更新状态
*   将新装饰器输入流的实例传递给输出流，将文件输入流传递给装饰器的构造函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:18:41.773

使用[RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)您可以调用[getFilePointer()](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#getFilePointer%28%29)来了解读取了多少字节。

耗时的操作可能在后台线程中执行，记住使用[SwingUtilities.invokeLater()](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)在后台任务和 GUI 线程之间进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:55:46.680

如果您正在考虑覆盖`read()`in `FileInputStream`，那么您可以合理地考虑制作自己的**包装** `InputStream`类来接受进度监视器回调。但是，您会发现它并不像实现那么容易，`read()`因为为每个字节花费一个方法调用是非常低效的。相反，您需要处理`read(byte[], int, int)`，这涉及更多。

# iphone - NSURLConnection 停止振动

> ID：13324155
> 
> 赞同：1
> 
> 时间：2012-11-10T17:12:57.317
> 
> 标签：iphone, objective-c, cocoa-touch, nsurlconnection

所以我一直在使用 NSURLConnection 来处理与我为我的应用程序运行的谷歌应用程序引擎服务器的对话。

每当我提出请求（实际上我认为是在得到响应时），手机就会振动。有什么办法可以防止这种情况发生吗？我的应用程序的用户已经知道他们何时获得新数据，因此不需要手机振动，当它在几秒钟内发生几次时会变得很烦人。

附带说明一下，在一分钟内发送多个请求是不好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:12:27.447

NSURLConnection 不会使手机振动。这可能是您代码的其他部分中的内容。尝试搜索此行：

```
AudioServicesPlaySystemSound (kSystemSoundID_Vibrate); 
```

关于每隔几秒的网络请求，应该没问题，但是使用一个标志一次只有一个存活请求（如果上一个请求需要这么多时间）

# ios - nib 对象在运行时不会改变

> ID：13324156
> 
> 赞同：0
> 
> 时间：2012-11-10T17:13:03.687
> 
> 标签：ios, uibutton

您好，我有一个包含 3 个 UIButtons 的 nib 文件，我需要在从 nib 加载后在运行时更改按钮的属性，但我不知道我在做什么错。更改布尔值后我也有 NSlog，但我总是在输出中得到“0”。任何帮助谢谢

```
-(void)SettingBtnPressed:(id)sender
{

    UIButton *btn =(UIButton*)sender;
    UITableViewCell *btncell =(UITableViewCell *)[btn superview];

    if ([[recentActivities objectAtIndex:btn.tag] isKindOfClass:[MeetingSummary class]]) {

        [MainManager getSharedInstance].Summary = [recentActivities objectAtIndex:btn.tag];
        MeetingSummary *ms=[recentActivities objectAtIndex:btn.tag];
        Meeting *m=ms.meeting;

        if(![popoverController isPopoverVisible]){
            lastPoint = sender;
            if (![m.endedDate isEqualToString:@"1/1/0001"]) {

                if (settingpop) {
                    [settingpop release];
                }
                settingpop = [[SettingsPopViewController alloc] initWithNibName:@"SettingsPopViewController" bundle:nil];
                settingpop.start.hidden=YES;
                settingpop.start.enabled=NO;
                NSLog(@"%i",settingpop.start.hidden);
                NSLog(@"%i",settingpop.start.enabled);
                settingpop.btnShowDetail.enabled=NO;
                settingpop.btnShowDetail.hidden=YES;
        //        [settingpop.start removeFromSuperview];
        //        [settingpop.btnShowDetail removeFromSuperview];
                settingpop.view.frame=CGRectMake(0, 0, 250, 54);

            }
            else
            {

                settingpop = [[SettingsPopViewController alloc] initWithNibName:@"SettingsPopViewController" bundle:nil];

            }
            settingpop.delegate = self;
            [settingpop setActivityView:self.view];

            popoverController = [[[UIPopoverController alloc] initWithContentViewController:settingpop] retain];

            [popoverController setPopoverContentSize:CGSizeMake(250.0f, 162.0f)];

            [popoverController presentPopoverFromRect:btn.frame inView:btncell
                         permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        }else{

            [popoverController dismissPopoverAnimated:YES];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:21:31.897

您是在谈论调整 的`start`和`btnShowDetail`控件的属性`SettingsPopViewController`吗？您无法在`initWithNibName`. 您必须等到视图创建之后，即等到 after`viewDidLoad`被调用，因为 NIB 可能直到那时才被加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:40:27.580

移动行：

```
settingpop.view.frame=CGRectMake(0, 0, 250, 54); 
```

行前：

```
settingpop.start.hidden=YES; 
```

# google-maps - watchPosition() 和 getCurrentPosition

> ID：13324165
> 
> 赞同：2
> 
> 时间：2012-11-10T17:13:30.223
> 
> 标签：google-maps, geolocation

`getCurrentPosition()`和有什么区别`watchPosition()`。我阅读了几篇关于`getCurrentPosition()`和的文章`watchPosition()`。但我都不清楚。据我了解`getCurrentPosition()`只更新一次位置但`watchPosition()`不断更新位置。我说的对吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T07:03:29.270

`getCurrentPosition()`给出 currentPosition 纬度和经度值，它只触发一次。其中 as`watchPosition()`连续给出 currentPosition 纬度和经度值。如果位置发生变化（假设您在移动的车辆中，`watchPosition()`则将给出结果。然后您将知道此结果）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T23:59:52.633

你是对的。`getCurrentPosition()`回调被触发一次，并且回调`watchPosition()`被连续触发。[很好的阅读这里](https://developer.mozilla.org/en-US/docs/Using_geolocation)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T14:04:04.610

`watchPosition`每次您的设备位置更改时触发（在 fn 参数中指定间隔）。`getCurrentPostion`只有一次。

`watchPosition`实际上类似于`setInterval`fn 并且还返回可用于通过使用停止迭代过程的 id `clearWatch`。

# mysql - MySQL InnoDB 更新选择？

> ID：13324167
> 
> 赞同：0
> 
> 时间：2012-11-10T17:13:33.473
> 
> 标签：mysql, innodb

我正在使用 Gearman 工作人员接受来自 MySQL 数据库的工作。这些工人找工作的程序是这样的：

```
SELECT foo, bar FROM jobs WHERE job_id = 'foobarbaz' AND status = 'WAITING'; 
```

现在，如果该查询返回一行，那么工作人员知道它被赋予了一个有效的工作并继续工作。但当然，风险是在工作时另一个工人也可能接手这项工作。

为了防止这种情况，我在想如何以原子方式选择继续工作所需的数据以及更新它的状态（如果它是有效的）？我可能想过使用作业 ID 对行状态进行更新，然后测试受影响的行，但不确定是否有更明智的方法来解决它。

谢谢。

# css - div高度搞砸了

> ID：13324168
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:13:39.047
> 
> 标签：css, html

这是我以前没有经历过的事情，我的 div 高度在 CSS 中没有配合，并且正在抛出页面的整个流程。div 应该居中，960px 宽，大约 1000px 高度和 150px 的底部填充，以将其与我的页脚分开。

网站链接：[http ://tinyurl.com/b8vvhgr](http://tinyurl.com/b8vvhgr)

**HTML**

```
<div id="energyrating-desc">

<h1><span class="gray">Energy Audit Services</span></h2>

<img src="/nd/images/yellow-bar.jpg" width="960" height="2" style="padding-bottom:2px;"></img>

<p>According to the EPA Energy Star program, the average American household spends $1,500 annually on
energy bills - a number that may go up as much as 50% this year.
</p>

<br>

<p>Almost half of that energy goes to heating and cooling your home. Lighting and appliances represent about a
quarter of those costs. Each of us can take action today to reduce energy use at home, while still staying
comfortable.
</p>

<br>

<p>Let New Day Homes perform a top-to-bottom Energy Audit of your home to help determine the cause of any
problems you may be experiencing, help you gauge your home's energy efficiency, and recommend clear
steps you can take to reduce your energy bills.</p>

<br>

<p><b>Energy Audit</b></p>
<p>
Find out where you can save on energy costs by having a full energy audit done on your home.
</p>

<br>

<p><b>New home Certified Energy Ratings</b></p>
<p>
Performed for builders and home buyers.
</p>

<br>

<p><b>Ratings for Builder Tax Credit</b></p>

<br>

<p><b>Energy STAR Ratings</b></p>

<br>

<p><b>IECC-2009 Testing</b></p>
<p>
Blower door testing, insulation inspections, and pre-verification to meet the IECC-2009
Energy Code requirements.
</p>

</div> 
```

**CSS**

```
/*Energy Description*/

#energyrating-desc {    
    padding-bottom: 150px;
    width: 960px;
    height: 670px;
    margin-left: auto; 
    margin-right: auto;
} 
```

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:19:48.387

我查看了您的 css 源代码，您查看了一个结束`html`标签`.css`

```
body {
    /*background: url(/nd/images/bgtop.png), url(/nd/images/bg.jpg);
    background: url(/nd/images/bgtop.jpg)\9; /* IE 8 and below */ 
    background-repeat: repeat-x\9; /* IE 8 and below */ 
    background-repeat: repeat-x, repeat;*/
    color: #000000;
    font-size:14px;
    font-family: sans-serif;
}

</body> 
```

去除那个

```
</body> 
```

我`energyrating-desc`在你的任何 CSS 中都没有看到

编辑：

也检查了萤火虫以防万一，你没有`energyrating-desc`在你的任何 css 中指定......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:18:33.493

通过分配适当的边距使您的 div 居中。

```
margin:0 auto;

#energyrating-desc {    
    padding-bottom: 150px;
    width: 960px;
    height: 670px;
    margin:0 auto;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-10T17:17:12.647

我查看了开发人员工具中的跟踪样式面板，没有样式属性应用于 div 元素。另外我在网站的css文件中没有找到任何名为“energyrating-desc”的样式ID？！你在哪里定义的？毕竟，我发现 html 的响应`"energy.php"`有多个`"html"`标签和不正确的结构。在查找 CSS 样式中的错误之前，您必须先执行此操作。

一个 html 文档必须有一个名为 的根标记`"html"`，其中一个名为 的标记`"body"`，如果需要，还必须有一个名为 的标记`"head"`，包括 css 资源和元标记或客户端脚本。即使是一个不正确的标签（未封闭、写得不好……）也会导致许多您从未见过的令人难以置信的布局。

干杯

# java - 如何将 Timestamp(date.getTime()) 转换为 ms 访问日期？

> ID：13324175
> 
> 赞同：0
> 
> 时间：2012-11-10T17:14:11.460
> 
> 标签：java, ms-access, timestamp

> **可能重复：**
> [如何将 Java TimeStamp 转换为 ms 访问日期？](https://stackoverflow.com/questions/13322934/how-to-convert-java-timestamp-into-ms-access-date)

我想将 java Timestamp 插入 msaccess 数据库，但我收到下面列出的错误。ms-access 字段已设置为 DATE 数据类型。任何建议将不胜感激。谢谢

这是我的 DAO 类方法：

```
public void addSale(String saleDetails, String saleTotal, Timestamp saleTimestamp) 
                    throws ClassNotFoundException, SQLException {

Statement myStatement = getConnection();
String sql = "INSERT INTO Sale (SaleDetails, SaleTotal, SaleTimestamp)"
            + " VALUES ('"+saleDetails+"','"+saleTotal+"','"+saleTimestamp+"')";

myStatement.executeUpdate(sql);
closeConnection(); 
```

我的 DTO 方法：

```
public void storeSale(String saleDetails, String saleTotal, Timestamp saleTimestamp){
   DAO dao = DAO.getDAO();
   try {
      dao.addSale(saleDetails, saleTotal, saleTimestamp);
    } catch (ClassNotFoundException | SQLException ex) {
        Logger.getLogger(Sale.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

我的时间戳方法：

```
public Timestamp addTimestamp(){ 
    java.util.Date today = new java.util.Date();
    long time = today.getTime();
    java.sql.Date date = new java.sql.Date(time);
    return new Timestamp(date.getTime()); 
```

错误：[Microsoft][ODBC Microsoft Access Driver] 标准表达式中的数据类型不匹配。

建议的更改：

```
public void addSale(String saleDetails, String saleTotal) 
                        throws ClassNotFoundException, SQLException {

     Statement myStatement = getConnection();
     String sql = "INSERT INTO Sale (SaleDetails, SaleTotal, SaleTimestamp)"
                + " VALUES ('"+saleDetails+"','"+saleTotal+"',Now())";

     myStatement.executeUpdate(sql);
     closeConnection(); 
```

新错误：

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Syntax error in string in query expression ''Now())'.
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956)
    at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113)
    at sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(JdbcOdbc.java:3109)
    at sun.jdbc.odbc.JdbcOdbcStatement.execute(JdbcOdbcStatement.java:337)
    at sun.jdbc.odbc.JdbcOdbcStatement.executeUpdate(JdbcOdbcStatement.java:287) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:35:53.983

要求数据库引擎将其`Now()`函数用于您插入到`SaleTimestamp`字段中的值。

```
String sql = "INSERT INTO Sale (SaleDetails, SaleTotal, SaleTimestamp)"
            + " VALUES ('"+saleDetails+"','"+saleTotal+"',Now())"; 
```

Java 应该有一些方法可以将文本字符串写入文件或控制台。建议您找到并使用这样的方法，以便让自己有机会查看您要求数据库引擎执行的完整 SQL 语句。根据我在另一个 Java 问题中看到的内容，我建议...

```
System.out.println(sql); 
```

不幸的是我不懂Java。如果该建议不起作用，请找到另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:26:22.347

您应该使用本文所述的准备好的语句，而不是连接字符串中的参数[。](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)在您的情况下，代码应如下所示：

```
PreparedStatement stmt = connection.prepareStatetement("INSERT INTO Sale (SaleDetails, SaleTotal, SaleTimestamp) VALUES (?, ?, ?)");
stmt.setObject(1, saleDetails);
stmt.setObject(2, saleTotal);
stmt.setObject(3, saleTimestamp);
stmt.executeUpdate(); 
```

# wordpress - WordPress .gz rRestoration 的准备和数据保存

> ID：13324180
> 
> 赞同：1
> 
> 时间：2012-11-10T17:14:58.390
> 
> 标签：wordpress, database-restore

我在 WordPress 网站上遇到了一个“问题”（挑剔的客户端），我将把它恢复到两个月前下载的 .gz 数据库。现在，在我的工作中，我安装了一个新主题并创建了自定义帖子类型。新主题有许多自定义 CSS 设置，自定义帖子类型有许多文件。

由于我在新主题和自定义帖子类型存在之前将数据库还原到快照，因此我有几个问题：

- 这会将所有设置恢复到当时的配置方式（一般、阅读、讨论）吗？- 以后添加的插件会被停用吗？-我猜新主题仍然存在，因为它的文件实际上就在那里。新主题上的任何设置是否会随着数据库恢复而被删除，或者它们会保留下来并且主题会被停用？

这是一个混乱的情况，我基本上想恢复到 8 月，但如果可能的话，将我在新主题和自定义帖子上的工作存档。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:09:44.997

如果您恢复 Wordpress 数据库，您会将所有设置更改回备份时的状态。这样做的原因是`wp_options`可能包含您的主题选项，并且肯定包含大多数 Wordpress 设置菜单选项（永久链接、阅读等）。

稍后添加的插件将被停用 -`wp_options`调用中有一条记录，`active_plugins`它是您的活动插件的数组。覆盖此值将禁用新插件，但只要它们在`/wp-content/plugins`目录中，您就可以重新激活它们，尽管它们的设置丢失。您的主题也是如此 - 只要文件在那里，您就可以重新激活，但缺少选项值将意味着设置消失。

现在有一些有用的东西。首先，在您做任何其他事情之前，一定要备份您的网站，因为它现在存在。一旦你有了备份，而不是删除表等，你可以尝试重命名这个模式以便它不会冲突，然后将你的备份恢复到包含原始名称的*新*模式（一个 Wordpress 配置为使用现在）。在同一台服务器上使用两个模式，您现在可以运行查询来比较当前数据库值和恢复的数据库值，并在必要时插入它们。假设调用了恢复的架构并且调用`restored`了当前架构`current`，则以下跨方案查询将向您显示恢复的架构中不存在的任何设置：

```
SELECT co.option_id, co.option_name, co.option_value, co.autoload  
FROM current.wp_options co
WHERE co.option_id NOT IN 
    (SELECT ro.option_id FROM restored.wp_options ro) 
```

`WHERE co.option_name LIKE 'key_%`如果您想将某些值复制到您的`restored`架构中，请添加一些类型查询以提取某些值集。您可能希望以类似的方式查看这些`wp_postmeta`值，或者甚至比较`wp_options`ID/键所在的表中的值，但这些值不匹配以查看发生了什么变化。

祝你好运！

# html - 当我覆盖所有样式时，是否有任何理由使用 HX 标签？

> ID：13324182
> 
> 赞同：0
> 
> 时间：2012-11-10T17:15:05.287
> 
> 标签：html, css

我使用`<h1>`, `<h2>`,`<h3>`标签作为标题。但后来我几乎总是“覆盖”几乎所有样式（字体大小/系列/粗细、边距和填充）。

鉴于此，除了它们提供一些信息的性质（某些东西作为标题）之外，是否有任何真正的理由使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T17:18:22.867

> 除了它们提供一些信息的性质之外，是否有任何真正的理由使用它们

这是使用它们来描述您的文档的唯一原因。这就是 HTML 的全部意义，CSS 纯粹是为了样式。

`div`像and之类的非语义标签也有例外`span`，但通常您计划对 CSS 执行的操作永远不会影响您决定使用哪个标签来标记您的内容，请始终使用适当的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:27:41.813

众所周知，标题标记对搜索引擎很重要（与复制测试相比，它们对文本的相对权重更大），尽管细节（包括这个问题的重要性）不是公开信息。一些屏幕阅读器和辅助软件使用标题标记，例如允许“标题阅读模式”并在标题前后进行明显的停顿。当在 Microsoft Word 中打开 HTML 文档时，标题元素被识别为用于生成目录的标题。标题是一个广为人知的概念，因此用户样式表可能具有适合个人用户的设置。

这种描述并不详尽，但它说明对于标题元素，“语义标记”的概念具有一定的实际意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:25:53.167

是的，最好在文档中定义**标题标签。**有一些很好的理由，比如

```
It's good to describe your document

It's good for SEO also

It's good to use heading tag when a screen reader set to a scanning mode. 
```

阅读更多[http://webdesign.about.com/od/beginningtutorials/a/headings_struct.htm](http://webdesign.about.com/od/beginningtutorials/a/headings_struct.htm)

# python - ZeroMQ：多个远程 (LAN) 发布者

> ID：13324183
> 
> 赞同：5
> 
> 时间：2012-11-10T17:15:12.707
> 
> 标签：python, zeromq

我有一个基本的 ZeroMQ 场景，由两个发布者和一个订阅者组成。这在本地计算机上一直运行良好，直到我决定在我的局域网内的不同计算机中分离所有进程。这就是我创建 ZeroMQ 套接字的方式（简化的 Python 代码）：

（在具有 IP 的机器上运行的订阅者进程`192.168.1.52`）

发布者代码（两个发布者通用）：

```
context = zmq.Context()
self.pub_socket = context.socket(zmq.PUB)
self.pub_socket.connect("tcp://192.168.1.52:5556") 
```

订阅者代码：

```
context = zmq.Context()
self.sub_socket = context.socket(zmq.SUB)
self.sub_socket.bind("tcp://192.168.1.52:5556")
self.sub_socket.setsockopt(zmq.SUBSCRIBE, "") 
```

我尝试输入`tcp://127.0.0.1:5556`作为订阅者的绑定`address:port`，但这没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:22:10.547

我怀疑您的问题可能与您机器之间端口的开放性有关。某些操作系统有自己的软件防火墙，因此您可能需要检查是否需要打开它们。

首先，我会检查您是否可以在两台机器之间执行简单的 req/rep 之一：

```
# machine 1
import zmq
context = zmq.Context()
socket = context.socket(zmq.REP)
socket.bind("tcp://*:5556")
req = socket.recv()
socket.send(req) 

# machine 2
import zmq
context = zmq.Context()
socket = context.socket(zmq.REQ)
socket.connect("tcp://192.168.1.52:5556")
socket.send("FOO")
print socket.recv() 
```

如果您对此有疑问，那么您可能需要检查这些端口。

其次，您还可以尝试绑定到所有接口：`socket.bind("tcp://*:5556")`

对于您的实际目标，如果您只需要一个多发送者/单个接收者，您可能只使用 PUSH/PULL 而不是 PUB/SUB

```
# one receiver
import zmq
context = zmq.Context()
socket = context.socket(zmq.PULL)
socket.bind("tcp://*:5556")

while True:
    print socket.recv()

# many senders
import zmq
context = zmq.Context()
socket = context.socket(zmq.PUSH)
socket.connect("tcp://192.168.1.52:5556")
socket.send("FOO") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:58:46.057

你在 ZMQ 公会中演练过“ [Missing Message Problem Solver ”吗？](http://zguide2.zeromq.org/page%3aall#Missing-Message-Problem-Solver)

请注意，当使用 PUB/SUB 模式时，会出现一个总是丢失一些消息的**慢加入者综合症。**如果我们在 SUB 中进行连接并在 PUB 中进行绑定，则可以消除这种综合症；但是，当有多个发布者时，订阅者需要连接到所有发布者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T11:01:03.667

谢谢你们的建议。

防火墙确实被禁用，但最终找到了可以从两个发布者那里接收的 PC。这似乎是与每台计算机上安装的 ZMQ 版本有关的问题。发送者拥有 v.2.2，而接收者拥有 2.1。这很奇怪，因为我认为 zmq 协议与版本无关。下次需要记住这一点。

再次感谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T06:15:16.057

The protocol should work between 2.1 and 2.2, but it got broken by 3.1\. In 3.2 we fixed things to work with older versions again.

# jquery - 将文本数据从 html 抓取到变量

> ID：13324184
> 
> 赞同：0
> 
> 时间：2012-11-10T17:15:23.057
> 
> 标签：jquery, variables, text, numbers, each

JSFiddle：http: [//jsfiddle.net/veksen/Wa4pA/4](http://jsfiddle.net/veksen/Wa4pA/4)

在我看来似乎有效的代码不起作用。我之前在代码中使用了类似的方法，它工作正常，现在我的变量不受影响。我正在从 html 中获取文本值并将它们汇总为一个变量。我正在寻找关于为什么这不起作用的提示，而不是完整的工作代码。

这是代码

```
$(document).ready(function() {
    var char_fr = 0;
    var char_cl = 0;
    var char_lr = 0;
    var char_pr = 0;
    $(".ares .value").each( function(){
        char_cr += Number($(this.text()));
        char_fr += Number($(this.text()));
        char_lr += Number($(this.text()));
        char_pr += Number($(this.text()));
    });
    $(".cr .value").each( function() {
        char_cr += Number($(this.text()));
    });
    $(".fr .value").each( function(){
        char_fr += Number($(this.text()));
    });
    $(".lr .value").each( function(){
        char_lr += Number($(this.text()));
    });
    $(".pr .value").each( function(){
        char_pr += Number($(this.text()));
    });
    $("#mainstats .fr .stat").text(char_fr);
    $("#mainstats .cr .stat").text(char_cr);
    $("#mainstats .lr .stat").text(char_lr);
    $("#mainstats .pr .stat").text(char_pr);
}); 
```

我再次寻找关于它为什么不起作用的线索，而不是完整的代码。同时，我将有更多具有匹配类的变量，是否有更聪明的方法来编写代码，而不是为每个变量设置一个完整的块？变量和类是相似的，但如果它们是完全匹配的，或者可能是“prefix_”+变量就可以了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:25:24.447

不是 jQuery 包装的 DOM 元素，使用：`char_cr += Number($(this).text());`你的版本是：`$(this.text())`

# css - 为什么我不能与背面的链接进行交互？

> ID：13324187
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:15:42.620
> 
> 标签：css, webkit, visibility, back, flip

1）。“[链接](http://dl.dropbox.com/u/36115177/CloudSpokes/getstarted.html)”。我无法与“跟随我们！”背面的链接/图像进行交互。在底部翻转卡片。（iv'e 只使用 webkit）。帮助 ：'（

2）。此外，当您将光标缓慢移向翻转卡片时，如果您的光标位置不固定，卡片会振动。不像这里：[http ://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)

相信我，我已经尝试了一切，我只是厌倦了这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:00:30.103

要查看双方，您需要使用[CSS 属性和值，`-webkit-transform-style: preserve3d`](http://www.webkit.org/blog-files/3d-transforms/transform-style.html)在您的`div#flipthing`.

您的卡片正在振动，因为这两个面没有完全对齐。当卡片翻转时，您的光标进入边缘，或导致振动或动画重置的背面元素。

尝试将您的两个`<p>`标签设置为完全相同，彼此堆叠：

```
div#flipthing { position: relative; }

div#flipthing p {
    position: absolute;
    top: 0;
    left: 0;
}

div#flipthing p:first-child {
    z-index: 10;
} 
```

这将允许您的第一段堆叠在第二段之上。

此外，对于您的背面，您应该将`-webkit-transform`and`-webkit-backface-visibility`放在段落而不是嵌套表上。

# javascript - SVG动态树中标记节点的最佳解决方案（使用D3.js）

> ID：13324189
> 
> 赞同：3
> 
> 时间：2012-11-10T17:15:52.033
> 
> 标签：javascript, dom, svg, tree, d3.js

我正在尝试通过向每个节点添加特定标签（SVG 文本）来修改此 D3.js 示例（[动态节点链接树），但未成功。](https://gist.github.com/999346 "动态节点链接树")

如果我理解正确，在简要查看 SVG 规范和 D3 文档之后，最好的方法是创建 SVG 组并移动它们。

不幸的是，这不起作用，因为转换对组没有影响。有没有我不知道的简单（r）方式？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T01:36:39.317

如果您正在寻找一种为文本标签切换圆圈的效果，您可以执行以下操作：

```
// Enter any new nodes at the parent's previous position.
node.enter().append("svg:text")
    .attr("class", "node")
    .attr("x", function(d) { return d.parent.data.x0; })
    .attr("y", function(d) { return d.parent.data.y0; })
    .attr("text-anchor", "middle")
    .text(function(d) { return "Node "+(nodeCount++); })
  .transition()
    .duration(duration)
    .attr("x", x)
    .attr("y", y); 
```

在这里查看小提琴：http: [//jsfiddle.net/mccannf/pcwMa/4/](http://jsfiddle.net/mccannf/pcwMa/4/)

**编辑**

但是，如果您希望在圆圈旁边添加标签，我不建议`svg:g`在这种情况下使用，因为这样您就必须使用`transform`s 来移动组。相反，只需在更新函数中将圆形节点和文本节点加倍：

```
 // Update the nodes…
  var cnode = vis.selectAll("circle.node")
        .data(nodes, nodeId);

  cnode.enter().append("svg:circle")
        .attr("class", "node")
        .attr("r", 3.5)
        .attr("cx", function(d) { return d.parent.data.x0; })
        .attr("cy", function(d) { return d.parent.data.y0; })
      .transition()
        .duration(duration)
        .attr("cx", x)
        .attr("cy", y);

  var tnode = vis.selectAll("text.node")
        .data(nodes, nodeId);

  tnode.enter().append("svg:text")
        .attr("class", "node")
        .text(function(d) { return "Node "+(nodeCount++); })
        .attr("x", function(d) { return d.parent.data.x0; })
        .attr("y", function(d) { return d.parent.data.y0; })
      .transition()
        .duration(duration)
        .attr("x", x)
        .attr("y", y);

  // Transition nodes to their new position.
  cnode.transition()
      .duration(duration)
      .attr("cx", x)
      .attr("cy", y);

  tnode.transition()
      .duration(duration)
      .attr("x", x)
      .attr("y", y)
      .attr("dx", 4) 
      .attr("dy", 4); //padding-left and padding-top 
```

可以在此处找到演示这一点的小提琴：http: [//jsfiddle.net/mccannf/8ny7w/19/](http://jsfiddle.net/mccannf/8ny7w/19/)

# jquery - jquery - 导航主页图像在鼠标悬停在每个导航图像上之间淡入

> ID：13324191
> 
> 赞同：2
> 
> 时间：2012-11-10T17:16:05.473
> 
> 标签：jquery, mouseover, fadein, fadeout, nav

例如，如果我将鼠标悬停在 contact_text 图像上，然后是 about_text 图像，而不是 contact_text 图像淡出和 about_text 图像立即淡入，home_text 图像在它们之间短暂淡入。请帮忙。谢谢

注意 - 我在图像上使用 .rollover 类来实现图像翻转效果。这可能与我的问题无关。

**HTML**

```
<nav>
<a href="#"><img src="images/nav/home_hover.png" id="home"></a>

<a href="#"><img src="images/nav/portfolio.png" alt="images/nav/portfolio_hover.png" class="rollover" id="portfolio"></a>

<a href="#"><img src="images/nav/about.png" alt="images/nav/about_hover.png" class="rollover" id="about"></a>

<a href="#"><img src="images/nav/contact.png" alt="images/nav/contact_hover.png" class="rollover" id="contact"></a>

</nav> 
```

**jQuery**

```
 $(document).ready(function(){

  $('.rollover').rollover();
  });

  $("#portfolio").mouseover(function(){
    $("#homeText").fadeOut("fast");
    $("#portfolioText").fadeIn("fast");
    $("#home").attr("src","images/nav/home.png");
});
 $("#portfolio").mouseout(function(){
    $("#homeText").fadeIn("fast");
    $("#portfolioText").fadeOut("fast");
    $("#home").attr("src","images/nav/home_hover.png");
});

$("#about").mouseover(function(){
    $("#homeText").fadeOut("fast");
    $("#aboutText").fadeIn("fast");
    $("#home").attr("src","images/nav/home.png");
});
 $("#about").mouseout(function(){
    $("#homeText").fadeIn("fast");
    $("#aboutText").fadeOut("fast");
    $("#home").attr("src","images/nav/home_hover.png");
});

$("#contact").mouseover(function(){
    $("#homeText").fadeOut("fast");
    $("#contactText").fadeIn("fast");
    $("#home").attr("src","images/nav/home.png");
});
 $("#contact").mouseout(function(){
    $("#homeText").fadeIn("fast");
    $("#contactText").fadeOut("fast");
    $("#home").attr("src","images/nav/home_hover.png");
});
</script> 
```

# apache - .htaccess 使用 /base2/folder.html 的内容显示 /base1/folder/

> ID：13324192
> 
> 赞同：0
> 
> 时间：2012-11-10T17:16:06.503
> 
> 标签：apache, .htaccess, mod-rewrite

当我打开 url`http://mysite.com/base1/folder/`时，我希望它显示`http://mysite.com/base2/folder.html`. 文件夹中有一个 index.html 文件`folder`。

更清楚地说，html 文件`folder.html`位于文件夹中`base2`。

我的 .htaccess 文件没有按预期工作

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/base1/([^/]+)/(.+)$ /base2/$1.html [L] 
```

谁能告诉我我的 .htaccess 文件有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:04:52.327

您的正则表达式看起来不对：

```
^/base1/([^/]+)/(.+)$
                 ^^^ requires one or more characters 
```

这应该有效（接受/folder/ 之后的*任何内容）*

```
^/base1/([^/]+)/ 
```

或者这个（只接受 /folder/）

```
^/base1/([^/]+)/$ 
```

此外，我会删除这两个`RewriteCond`作为您的规则。（尽管如果 /base1/ 不存在，它们不应该造成任何伤害）

# regex - Perl 模式匹配与模式算术

> ID：13324195
> 
> 赞同：4
> 
> 时间：2012-11-10T17:16:23.890
> 
> 标签：regex, perl

我想了解如何在 perl 正则表达式中对匹配的子模式进行算术运算。这只是一个示例代码，我想了解如何使用`\1`（已经匹配的子模式。在这种情况下 - 7）来匹配`pattern+1` `(8)`

```
my $y = 77668;
if($y =~ /(\d)\1(\d)\2\1+1/)   #How to increment a previously
                               #matched sub-pattern and form a pattern?
{
    print $y;
} 
```

**编辑**

从答案中，我看到模式算术是不可能的。

这就是我想要实现的。
我想形成一个匹配这个模式的正则表达式：

```
N-3N-2N-1NNN+1N+2N+3    (N = 3,4,5,6 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T18:46:36.033

当然这是可能的。毕竟，我们谈论的是 Perl 正则表达式。但它会相当难看：

```
say "55336"=~m{(\d)\1(\d)\2(\d)(?(?{$1+1==$3})|(*F))}?"match":"fail"; 
```

或印刷精美：

```
say "55336" =~ m{  (\d)\1 (\d)\2 (\d)
                   (?  (?{$1+1==$3}) # true-branch: nothing
                                   |(*FAIL)
                   )
                }x
     ? "match" : "fail"; 
```

这是做什么的？我们在普通捕获中收集数字。最后，我们使用 if-else 模式：

```
(? (CONDITION) TRUE | FALSE ) 
```

我们可以将代码嵌入到带有`(?{ code })`. 此代码的返回值可以用作条件。（`(*FAIL)`短`(*F)`：）*动词*导致匹配失败。如果`(*PRUNE)`您只想要一个分支，而不是整个模式都失败，请使用。

嵌入式代码也非常适合调试。但是，较旧的 perls 不能在此正则表达式代码中使用正则表达式 :-(

所以我们可以匹配很多东西并在模式本身内部测试它的有效性。但是，在模式*之外执行此操作**可能*是一个更好的主意，例如：

 *```
 "string" =~ /regex/ and (conditions) 
```

现在到您的主要模式`N-3N-2N-1NNN+1N+2N+3`（我希望*我*正确解析它）：

```
my $super_regex = qr{
        # N -3 N-2 N-1 N N N+1 N+2 N+3
        (\d)-3\1-2\1-1\1\1(\d)(\d)(\d)
        (?(?{$1==$2-1 and $1==$3-2 and $1==$4-3})|(*F))
    }x;

say "4-34-24-144567" =~ $super_regex ? "match" : "fail"; 
```

或者你的意思是

```
my $super_regex = qr{
        #N-3 N-2 N-1  N  N   N+1 N+2 N+3
        (\d)(\d)(\d) (\d)\4 (\d)(\d)(\d)
        (?  (?{$1==$4-3 and $2==$4-2 and $3==$4-1 and
               $5==$4+1 and $6==$4+2 and $7==$4+3})|(*F))
    }x;

say "123445678" =~ $super_regex ? "match" : "fail"; 
```

可怕的是这些甚至可以工作（使用 perl 5.12）。

我们还可以在匹配时使用构造*生成*部分模式`(??{ code })`——这段代码的返回值被用作模式：

```
my $super_regex = qr{(\d)(??{$1+1})(??{$1+2})}x;
say "234"=~$super_regex ? "match":"fail" 
```

等等。但是，我认为这种方式的可读性会受到更多影响。

如果您需要超过九个捕获，您可以使用*命名捕获*与

```
(?<named>pattern) ... \k<named> 
```

结构体。这些内容也可以在`%+`散列中找到，请参阅 perlvar 。

为了进一步深入了解 Perl 正则表达式的秘密，我建议阅读[perlre](http://perldoc.perl.org/perlre.html)几次。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T19:24:41.473

它可以通过正则表达式代码块：

```
my $y = 77668;
if($y =~ /(\d)\1(\d)\2(??{$1+1})/ ) {
    print $y;
} 
```

在这个片段`(??{ CODE })`中返回另一个必须匹配的正则表达式，所以这个正则表达式看起来像“8”（$1+1）。结果，整个正则表达式只有在第 5 位更大且第 1 位加 1 时才会匹配。但是第 1 位的缺点是 9，此代码块将返回“10”，因此可能是错误的行为，但你没有说什么必须是在这种情况下完成。

现在关于`N-3N-2N-1NNN+1N+2N+3`问题，您可以将其与此正则表达式匹配：

```
my $n = 5;
if( $y =~ /(??{ ($n-3).($n-2).($n-1).$n.($n+1).($n+2).($n+3) })/ ){ 
```

或更“可扩展”的方式：

```
my $n = 5;
if( $y =~ /(??{ $s=''; $s .= $n+$_ foreach(-3..3); $s; })/ ){ 
```

同样，如果 $n == 2 我们必须做什么？$n-3 将是-1。它不是一个简单的数字，它有符号，所以你应该考虑这种情况。

另一种方式。匹配我们拥有的，然后检查它。

```
if( $y =~ /(\d)(\d)(\d)(\d)(\d)(\d)(\d)/ ) {
    if( $1 == ($4-3) && $2 == ($4-2) && $3 == ($4-1) && $6 == ($4+1) && $7 == ($4+2) && $7 == ($4+3) ) {
        #... 
```

似乎这种方法有点笨拙，但对每个人来说都是显而易见的（我希望）。

此外，您可以优化您的正则表达式，因为 7 个升序数字连拍并不是那么频繁的组合，另外还可以从同事 xD 那里获得一些 lulz：

```
sub check_number {
    my $i;
    for($i=1; $i<length($^N); $i++) {
        last if substr($^N, $i, 1)<=substr($^N, $i-1, 1);
    }
    return $i<length($^N) ? "(*FAIL)" : "(*ACCEPT)";
}

if( $y =~ /[0123][1234][2345][3456][4567][5678][6789](??{ check_number() })/ ) { 
```

**或者......也许是最人性化的**方法：

```
if( $y =~ /0123456|1234567|2345678|3456789/ ) { 
```

似乎最后一个变体是 bingo xD 它是关于在事情如此简单时不搜索正则表达式的好例子）*

# svg - IE9 从 translate(123,456) SVG 标记中去除逗号

> ID：13324198
> 
> 赞同：2
> 
> 时间：2012-11-10T17:16:33.473
> 
> 标签：svg, internet-explorer-9

观察到：IE9 从传入的 SVG`<g transform="translate(123,456)">`标记中去除逗号字符。只是想我会把观察结果放在这里，以防有人试图为 SVG DOM 提供 Javascript 客户端模块。这似乎有点奇怪，因为 W3C 标准支持逗号。

# javascript - iPhone上的网格布局很小

> ID：13324200
> 
> 赞同：0
> 
> 时间：2012-11-10T17:16:37.140
> 
> 标签：javascript, jquery, iphone, css

我认为这与视网膜显示屏有关，因此一切都比 iPhone 上的小一倍。

这是我正在开发的网站：[http ://share-the-secret.com/](http://share-the-secret.com/)

如果您将站点水平调整为两个网格块，这就是它在 iPhone 上的外观。目前在 iPhone 上您可以看到四个网格布局。

我不想使用媒体查询来为 iPhone 上的所有元素提供自定义大小。

有没有更简单的解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:56:30.243

找到了解决方案！

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# c# - 需要创建一个列表并根据消息显示的频率发出消息

> ID：13324201
> 
> 赞同：0
> 
> 时间：2012-11-10T17:16:37.297
> 
> 标签：c#, xml, desktop-application

我正在创建一个与游戏交互的程序，我希望它执行以下操作：

1.  从管理员那里获取消息列表。
2.  让他们显示显示的频率

够简单吧？

我不是要代码，只是关于如何处理消息和处理每条消息的时间的一些想法？

我应该使用计时器并将消息保存在内存中吗？

我计划将此信息存储在一个 xml 文件中。

我的问题是我应该如何有效地处理在给定时间显示消息？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:56:20.120

我会使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)来实现这一点。

`DispatcherTimer`在 UI/Dispatcher 线程而不是线程池线程上运行，这是使用计时器执行 UI 操作时使用它的另一个原因。也可以设置调度线程的优先级。

# svn - SVN合并分支到主干保持旧分支

> ID：13324202
> 
> 赞同：1
> 
> 时间：2012-11-10T17:16:41.827
> 
> 标签：svn, merge, branch, trunk

我按照以下步骤将我的分支合并到主干。

查看主干的副本：

svn co svn+ssh://server/path/to/trunk

查看您要合并的分支的副本：

svn co svn+ssh://server/path/to/branch/myBranch

将您当前的工作目录更改为“myBranch”找到修订版“myBranch”开始于：

svn log --stop-on-copy

这应该向您显示在分支被切断时所做的更改。记住这个数字（应该是 rXXXX，其中 XXXX 是修订号）。将当前工作目录更改为 trunk # 执行 SVN 更新：

快点

这会将您的主干副本更新到最新版本，并告诉您当前的版本。还要记下该数字（应该说“在修订 YYYY”，其中 YYYY 是您需要记住的第二个数字）。现在我们可以执行 SVN 合并：

svn merge -rXXXX:YYYY svn+ssh://server/path/to/branch/myBranch

合并后，如果我签入结果，我的分支是否应该被删除？我需要保留我的分支（我需要在这个旧分支中继续开发）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T05:29:17.533

我不确定你在做什么。您只需要签出您要合并的分支。无需检查两个分支、进行切换、更改工作副本、记录日志等。这确实是一个相当简单的过程：

*   *您从原始*分支（通常，但不一定总是如此）创建一个分支（我们将称为*复制*分支）。*`trunk`*
**   根据您的开发技术，您可以在*原始*分支和*副本分支上进行工作。**   当您想要进行合并时，您可以检出要合并到的分支的副本。毕竟，这是获得更改的分支。您希望在将这些合并的更改提交回存储库之前对其进行测试。*   要进行合并，您所要做的就是`svn merge`在工作副本上使用该命令。如果您从*原始*分支合并到*复制*分支，则不使用该`--reintegrate`开关。如果您要从*复制*分支合并到原始分支，则使用`--reintegrate`开关。*

 *这里的所有都是它的。您可以选择要合并的修订，也可以简单地允许合并所有更改。Subversion 合并非常好，Subversion 在跟踪合并方面做得很好。

我建议你阅读 Subversion 手册中关于[分支和合并](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html)的章节。

你需要删除你合并的分支吗？不会。从 1.5 版开始的 Subversion 不会复制已经发生的合并。

如果不再需要，您**可以删除一个分支。**例如，我创建了一个 Release 1.2 分支。我做了 1.2.1 版和 1.2.2 版。但是，我的用户都没有使用 1.2.x 版，我不再对其进行任何工作。我可能会删除它，因为当我这样做时`svn ls http://server/svn/branches`，我不会看到它。作为 Subversion，如果删除它让我感到紧张，我可以把它移开。我可以把它移到`http://server/svn/branches/OBSOLETE/1.2`. 这样，当我列出分支时它不会出现，但如果我决定我真的真的仍然需要它，它仍然存在。

顺便说一句，Subversion 从来没有真正永久删除任何东西。即使我删除了分支，我也总能把它找回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T18:31:00.470

使用 SVN 1.8，您想要做的事情相当简单，并且明确支持同步合并和自动重新集成。以下是命令（下面的文档和链接将确认这一点）：

```
cd path/to/branch/myBranch
svn up
svn merge ^/path/to/trunk  # usually just: svn merge ^/trunk
svn ci -m "Merged changes from trunk."

cd path/to/trunk
svn up
svn merge ^/path/to/branch/myBranch
svn ci -m "Reintegrated branch." 
```

来自[http://svnbook.red-bean.com/en/1.8/svn.branchmerge.basicmerging.html](http://svnbook.red-bean.com/en/1.8/svn.branchmerge.basicmerging.html)关于“重新整合一个分支”的说法是这样的：

> 如果您在将分支重新集成到主干后选择不删除分支，您可以继续从主干执行同步合并，然后再次重新集成分支[37]。如果这样做，则只有在第一次重新集成后对分支所做的更改才会合并到主干。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:22:55.047

您可以随时从您的分支合并到主干，如果您仍然需要它，您不必删除它。但是，我会从主干合并到您的分支中，以便您也跟上主线开发。这样做还允许您使用 SVN 的重新集成分支功能，这应该会使从分支合并到主干的更改更容易一些。*

# load - Web应用程序：图标需要很长时间才能加载

> ID：13324204
> 
> 赞同：0
> 
> 时间：2012-11-10T17:17:02.537
> 
> 标签：load

我在网页中使用了一些图标。但是它们从磁盘加载需要很长时间，大约 0.8 秒，大约 300 kB。见图片。
怎么会，或者这正常吗？更重要的是，如何提高加载速度？

![在此处输入图像描述](../Images/415ad240ab6205608e9d7645de1ab943.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:19:37.840

你可以压缩它们[http://www.punypng.com/](http://www.punypng.com/)

和/或您可以将它们组合成一个图像：[http](http://www.w3schools.com/css/css_image_sprites.asp) ://www.w3schools.com/css/css_image_sprites.asp这将有助于处理请求的数量。

# php - 让 PHP 在 XAMPP 上运行

> ID：13324208
> 
> 赞同：1
> 
> 时间：2012-11-10T17:17:12.883
> 
> 标签：php, apache, xampp

我安装`XAMPP for Windows`在我的电脑上。我启动它并检查状态，它说`PHP`已激活。然后我转到以下目录：`C:\inetpub\wwwroot`并创建了一个文件名`phpinfo.php`，其中包含以下内容：

```
 <?php phpinfo(); ?> 
```

然后我打开我的网络浏览器（我试过`Internet Explorer`和`Google Chrome`）并输入：

```
 http://localhost/phpinfo.php 
```

在地址栏中。我收到以下错误：

```
Object not found! The requested URL was not found on this server. 
If you entered the URL manually please check your spelling and try again.

If you think this is a server error, please contact the webmaster.

Error 404 localhost 11/10/12 10:03:28 Apache/2.2.21 (Win32)
mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1** 
```

如果我只是输入`http://localhost/`，我会得到`XAMPP startup page`很好的。

我仔细检查了我`phpinfo.php`是否在正确的目录中，并且对我可能做错的其他事情感到茫然。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:18:36.683

`C:\inetpub\wwwroot`-->**不是**Xampp 的默认目录。那是为 IIS

`C:\xampp\htdocs\`--> 默认目录。

* * *

`xyz.php`在内部创建`C:\xampp\htdocs\`，然后访问`http://localhost/xyz.php`.

# html - HTML 有“包含/导入”功能吗？

> ID：13324213
> 
> 赞同：3
> 
> 时间：2012-11-10T17:18:03.497
> 
> 标签：html, import, include

我正在使用 HTML/CSS 开发一个静态网站。我的网站上有 7 个页面，每个页面都有完全相同的标题内容。HTML中是否有某种导入/包含功能？

这是我要寻找的那种东西的例子（注意我完全编造了语法）：

[来源（​​header.html）]

```
<html>
    <head><title>Source Page</title></head>
    <body>
        <div id="myheader">Hello, World!</div>
    <body>
</html> 
```

[从源导入的页面]

```
<html>
    <head><title>My Title</title></head>
    <body>
        <div import="id:myheader;source:url('header.html');"/>
    <body>
</html> 
```

谢谢！

简

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:22:04.077

不是这样的，不。有几个选项，按可访问性和易用性的顺序排列：

1.  [服务器端包含](http://en.wikipedia.org/wiki/Server_Side_Includes)（假设您的静态文件服务器支持它们 - 大多数都支持）。
2.  [`iframes`](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)
3.  单页应用程序样式（需要 JavaScript）。
4.  [`framesets`](https://developer.mozilla.org/en-US/docs/HTML/Element/frameset)（遗留，尽可能避免）。

## 例子

### SSI

```
<!--#include virtual="header.html" --> 
```

### `iframes`

```
<!-- Assuming HTML5 -->
<iframe src="header.html" seamless></iframe> 
```

### Javascript

```
<script>
// We have a magic ajax function
ajax("header.html", function(data) {
    document.getElementById("header").innerHTML = data;
});
</script> 
```

### `framesets`

只是不要:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:21:05.220

不，HTML 不提供此类功能。但是，您可以使用服务器端（这里有很多选项，取决于您的服务器设置）或客户端（JavaScript，使用 AJAX 加载额外内容）解决方案来实现结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T08:48:54.493

您可以使用 HTML 模板实现相同的功能.....如果您使用的是 Dreamweaver，则为您的页眉页脚和整个站点的通用布局创建 1 个 .dwt 文件............它将自动包含在所有你的页面.....:)

不需要任何服务器端脚本，只需纯 html ............

# android - 如何防止在android中进行电子邮件验证的SQL注入

> ID：13324227
> 
> 赞同：0
> 
> 时间：2012-11-10T17:19:04.670
> 
> 标签：android, regex

我想在 android 中执行 UI 验证。在验证电子邮件地址时，我想检查它是否是有效的电子邮件地址。但是，我想验证顶级域，并且我想阻止它的 SQL 注入。

这是我使用的模式如下：

```
^[A-Z0-9+_.-]+@[A-Z0-9.-]+$ 
```

请提出一些想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:23:29.977

试试这个，它可能会帮助你解决你的期望

```
 ^[\w!#$%&'*+/=?`{|}~^-]+(?:\.[!#$%&'*+/=?`{|}~^-]+)*@(?:[A-Z0-9-]+\.)+[A-Z]{2,6}$ 
```

它将在输入电子邮件地址时防止 SQL 注入，并且它将像这样验证 com、us、nz、au、ch 等顶级域名

# android - 在老虎机风格的自定义视图中显示数字

> ID：13324228
> 
> 赞同：1
> 
> 时间：2012-11-10T17:19:11.170
> 
> 标签：android, view, android-widget, slot

我有一个数字，我想像这样在我的视图中显示。

![在此处输入图像描述](../Images/bcdd35e428a29b64b34c8e55d16daf61.png)

目前，我有一个带有渐变背景的 textView 和每个数字的边距。这不是很优雅，因为我需要在多个活动中实现它，所以我想创建一个自定义小部件/视图，我可以只传递数字，它会像我想要的那样显示。

有什么想法可以实现吗？谢谢您的帮助

# java - 如果您想要 64 位 int，murmurhash 或从 MD5 哈希中获取 64 位的冲突会更少吗？

> ID：13324229
> 
> 赞同：4
> 
> 时间：2012-11-10T17:19:12.493
> 
> 标签：java, algorithm, hash

查看使用接受字符串并返回 64 位有符号整数值的散列算法。

它不必在密码学上是健全的，只需提供一个不错的冲突率即可用作分布式存储的密钥。

我正在查看[似乎符合要求的杂音哈希](https://sites.google.com/site/murmurhash/)

很好奇它的属性如何与采用 MD5 哈希之类的前 64 位进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:01:28.700

安全散列——即使是理论上“破碎”的散列，如 MD5——表现出与随机性无法区分的分布（否则它们将不安全）。因此，它们尽可能接近完美。

像所有通用哈希函数一样，murmurhash 以正确性换取速度。虽然它对大多数输入显示出非常好的分布特征，但它也有自己的病态案例，例如[此处记录](https://sites.google.com/site/murmurhash/murmurhash2flaw)的案例，其中重复的 4 字节序列比预期更频繁地导致冲突。

简而言之：使用安全散列函数永远不会更糟，有时甚至比使用通用散列更好。但是，它也会慢很多。

# c++ - 运行时的模板参数c ++

> ID：13324230
> 
> 赞同：0
> 
> 时间：2012-11-10T17:19:16.930
> 
> 标签：c++, templates

我写了一个 C++ 模板类，但我没有实例化该类的类型。类型以字符串格式存储。所以我必须做这样的事情：

```
if ( propType == "char") {
   Property<char> pChar = ...
} else if ( propType == "int") {
   Property<int> pChar = ...
} if ( propType == "double") {
   Property<double> pChar = ...
} 
```

我不喜欢这个`if-else-`循环，有什么方法可以避免这种情况，或者有什么其他解决方案可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T17:46:47.043

方法很多，但如果不知道在特定情况下如何使用它，就不可能选择一个好的方法。

作为演示：

*   让我们假设所有`Property<T>`类都继承自`PropertyBase`
*   让我们假设您通过解析字符串中的类型来初始化它们

下面是一些代码：

```
using PropertyPtr = std::unique_ptr<PropertyBase>;
using Parser = std::function<PropertyPtr(std::string const&, std::string const&)>;

template <typename T>
PropertyPtr parse(std::string const& type, std::string const& value) {
    T v = boost::lexical_cast<T>(value);
    return PropertyPtr(new Property<T>(std::move(v)));
}

std::map<std::string, Parser> const parsers = {
    std::make_pair("char", parse<char>),
    std::make_pair("int", parse<int>),
    std::make_pair("double", parse<double>)
};

void dummy(std::string const& type, std::string const& value) {
    auto const it = parsers.find(type);
    assert(it == parsers.end() && "No parser");

    auto const& parser = it->second;
    PropertyPtr property = parser(type, value);

    // do something with property
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:22:46.193

这里有几个考虑因素。

假设您要从磁盘解析文件，然后根据您要创建对象的磁盘类型。您以几乎无法区分的方式处理这些对象。您正在使用的类型是有限的。

我为此使用的答案是`boost::variant`存储数据，以及`map`将类型名称映射到该类型的读取器（或解析器）的（如 Matthiew 的答案）。然后阅读器返回一个`boost::variant<int, double, char, string, etc>`.

然后代码以伪统一的方式与变体交互。辅助函数使用 boost 函数来调用函子与`variant`.

即，像这样：

```
typedef boost::variant<int, double> myVariant;
typedef std::function< myVariant( input_stream_type& ) > ValueParser;
ValueParser GetParser( std::string typename );
// ...
struct DoTypeSpecificWork
{
  typedef void result_type;
  void operator()( int ) { /* ... int code goes here */ }
  void operator()( double ) { /* ... double code goes here */ }
};
ValueParser parser = GetParser( propType );
myVariant var = parser( input_stream );
boost::variant::apply_visitor( DoTypeSpecificWork(), var ); 
```

另一种选择是拥有一个`PropertyBase`具有与类型无关的抽象接口的基类。然后`Property<T>`是为每种类型实现这些抽象接口的子类。创建这些`Property<T>`子类可以直接完成（强制解析器了解您的`Property`类），也可以间接完成（即，您获取 a`variant`并生成一个适当的`Property<T>`，它将解析代码与您的类型抽象解耦）。

基本上，您需要在类型擦除、类型抽象和基于模板的编程之间做出决定，以处理多种类型。他们都有自己的优势。

# c# - HttpURLConnection 和 HttpWebRequest

> ID：13324231
> 
> 赞同：1
> 
> 时间：2012-11-10T17:19:22.967
> 
> 标签：c#, httpwebrequest, httpurlconnection

我需要像`HttpURLConnection`Java一样的课程。
我可以使用`HttpWebRequest`，但我需要这样的方法

```
HttpURLConnection connection = (HttpURLConnection)new URL(requestURL).openConnection();
for (Property p : property)
    connection.addRequestProperty(p.key, p.value); //HttpWebRequest have that?
connection.connect(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T17:22:17.133

你想要的[`WebRequest.Headers`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.headers.aspx)财产：

```
request.Headers["name"] = value; 
```

# python - Numpy：无法读取数据集标头

> ID：13324234
> 
> 赞同：1
> 
> 时间：2012-11-10T17:19:43.097
> 
> 标签：python, numpy, names

我的代码看起来像

```
import numpy as np
from numpy import genfromtxt

train = genfromtxt('/Users/hhimanshu/Downloads/dataset/digitrecognizer/train.csv',
                   delimiter=',', names=True) 
```

并且`train.csv`有类似的数据

```
label,pixel0,pixel1,pixel2,pixel3, .....
1,0,0,0, ... 
```

当我做

```
train.names 
```

我明白了

```
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-62-dea84e8fe1f5> in <module>()
      4 print 'size(Number of elements in array) = ', train.size
      5 # print 'data type = ', train.dtype
----> 6 train.names

AttributeError: 'numpy.ndarray' object has no attribute 'names' 
```

形状对我来说也不正确

```
shape(Tuple of array dimensions) =  (42000,)
dimension(Number of array dimensions) =  1
size(Number of elements in array) =  42000 
```

我知道我有**785**列和**2 个**维度（这里说 1）

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:35:20.160

我的错，

`ndarray`没有名为`names` 我可以引用列`train['labels']`并获取数据的属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T14:08:52.380

要获取列名，您可以使用：`train.dtype.names`

这仅适用`train`于记录（结构化）数组。

# c# - 找不到使用 System.Web.UI.HtmlControls 命名空间

> ID：13324235
> 
> 赞同：0
> 
> 时间：2012-11-10T17:19:45.063
> 
> 标签：c#, .net, namespaces

我尝试了各种使用方法，`System.Web.UI.HtmlControls;`但没有找到任何参考。

如何使用该命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:25:40.907

转到您的项目的参考并确保 System.Web 在那里。如果没有，右键单击，添加引用，.NET，然后添加 System.Web

![在此处输入图像描述](../Images/c1d8ee8c69d9570af5e58b1431155373.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T16:00:05.430

您需要右键单击项目-> 属性-> 然后将“目标框架”（可能是“.NET Framework 4 Client Profile”）更改为“.NET Framework 4”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T06:05:29.433

浏览到 C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.Web.dll 并从那里获取它作为参考

# java - 策略设计模式

> ID：13324237
> 
> 赞同：0
> 
> 时间：2012-11-10T17:20:03.460
> 
> 标签：java, strategy-pattern

大家好，我正在尝试实现策略模式，但我无法在具体类中设置数量，我的意思是数量与辅助类中与接口有关系的数量相同。我尝试使用构造函数以及 setter 和 getter 方法设置值，但是如果您可以查看并提供一些反馈，它将无法正常工作。这是代码。

```
public interface InvoicingAlgorithm 
{
    public void getInvoice(String name, double amount);
}

public class AmericanInvoice implements InvoicingAlgorithm
{

    AmericanInvoice()
    {

    }
    //Uk: america 1 : 1.57
    @Override
    public void getInvoice(String name, double amount) 
    {
        Customer customer = new Customer(name , amount * 1.57);
        customer.setAmount(amount * 1.57);
        customer.getInvoice();
    }

}

public class Customer 
{

    /**
     * @param name represent the name of the Customer
     */
    private String name;

    /**
     * @param amount represent the amount of money
     */
    private double amount;

    /**
     * @param i represents object of InvoicingAlgorithm
     */
    private InvoicingAlgorithm i;

    Customer(String name, double amount)
    {
        this.name = name;
        this.amount = amount;

    }

     public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public double getAmount() {
        return amount;
    }

    public void setAmount(double amount) {
        this.amount = amount;
    }

    public InvoicingAlgorithm getI() {
        return i;
    }

    public void setInvoicingAlgorithm(InvoicingAlgorithm i)
    {
        this.i = i;
    }

    public String getInvoice()
    {
        DecimalFormat df = new DecimalFormat("#.00");
        String total = "--------------------------------------TO:   "
              + name + "FROM: Easyflap (UK) AMOUNT"  + ":$" + 
                df.format(amount) 
              + "--------------------------------------";

        return total;
    }
} 
```

因此，当我对其进行测试时，它会返回值 --------------------------TO： OracleFROM: Easyflap (UK) AMOUNT:$500.00---------------------------------------------------- 来自当我尝试修改 AmericanInvoice 中的金额时，Customer 类中的 getInvoice 方法不起作用。

AmericanInvoice 的测试类

```
public class AmericanInvoiceTest {

    /**
     * Test of getInvoice method, of class AmericanInvoice.
     */
    @Test
    public void testGetInvoice() {
        System.out.println("Producing American invoice");
        final int invoiceAmount = 500;
        final Customer c = new Customer("Oracle", invoiceAmount);
        c.setInvoicingAlgorithm(new AmericanInvoice());
        String actualOutput = c.getInvoice();
        final File f = new File("actual-american.txt");
        FileUtility.resetFile(f);
        FileUtility.writeFile(f, actualOutput);
        String expectedOutput = FileUtility.readFile(new File("expected-american.txt"));
        //System.out.println(actualOutput);
        //System.out.println(expectedOutput);
        actualOutput = actualOutput.replaceAll("\\s", "");
        expectedOutput = expectedOutput.replaceAll("\\s", "");
        //System.out.println(actualOutput);
        //System.out.println(expectedOutput);
        assertEquals(actualOutput, expectedOutput);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:24:18.147

您实际上并没有在策略对象*本身*上调用任何方法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:26:59.220

我不容忍以这种方式使用策略模式，因为当前汇率不需要使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。但是根据您的示例，以下代码很可能是您打算执行的操作。

```
public interface InvoicingAlgorithm {
    public double adjustInvoice(double amount);
}

public class AmericanInvoice implements InvoicingAlgorithm {    
    //Uk: america 1 : 1.57
    @Override
    public double adjustInvoice(double amount) {
        return amount * 1.57;
    }   
}

public class Customer {

    /**
     * @param name represent the name of the Customer
     */
    private String name;

    /**
     * @param amount represent the amount of money
     */
    private double amount;

    /**
     * @param i represents object of InvoicingAlgorithm
     */
    private InvoicingAlgorithm i;

    Customer(String name, double amount) {
        this.name = name;
        this.amount = amount;

    }

     public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public double getAmount() {
        return amount;
    }

    public void setAmount(double amount) {
        this.amount = amount;
    }

    public InvoicingAlgorithm getI() {
        return i;
    }

    public void setInvoicingAlgorithm(InvoicingAlgorithm i) {
        this.i = i;
    }

    public String getInvoice() {
        DecimalFormat df = new DecimalFormat("#.00");
        String total = "--------------------------------------TO:   "
              + name + "FROM: Easyflap (UK) AMOUNT"  + ":$" + 
                df.format(i.adjustInvoice(amount)) 
              + "--------------------------------------";

        return total;
    }
} 
```

# c - 词法分析器输出问题

> ID：13324239
> 
> 赞同：0
> 
> 时间：2012-11-10T17:20:10.073
> 
> 标签：c, flex-lexer, lexical-analysis, lexical

当我输入以下内容时，这是我的词法分析器代码：

```
/*This is an example */

program
        var a,b:integer;

begin

        a =2;

        b =a+5;

        write(a);

        if b==1 then write(a);

end 
```

输出必须是这样的：

```
<res,program>
<res,var> <id,a>,<id,b>:<res,integer>;
<res,begin>
<id,a> <assign,=><num,2>;
<id,b> <assign,=><id,a><addop,+><num,5>;
<res,write>(<id,a>);
<res,if> <id,b><relop,==><num,1> <res,then> <res,write>(<id,a>);
<res,end> 
```

但我的输出是：

```
Lexical Error~/hedor1>exampler < input\ .txt 
<res,program><res,var><id,a>,<id,b>:<res,integer>;<res,begin><id,a><assign,=><num,2>;<id,b><assign,=><id,a><addop,+><num,5>;<res,write>(<id,a>);<res,if><id,b><relop,==><num,1><res,then><res,write>(<id,a>);<res,end> 
```

我不知道为什么它只是避免换行并且不将其打印到输出虽然我已经在我的模式部分定义`\n printf("\n");` 了问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:58:00.817

在您的输入中，您本身没有一个换行符。您所拥有的只是一个或多个空白字符（空格、制表符和换行符）的序列。由于您有与之匹配的规则，因此 Flex 使用最长的匹配。

Flex 生成一个贪婪解析器，它尝试匹配尽可能多的输入。例如，如果它看到输入**real**，它不会在匹配**real**后停止，然后继续匹配**ity**作为单独的标记。相反，它符合所有**现实**。

同样，在开始评论之后的输入中，您没有一个而是*两个*换行符（因为那里有一个空行），这将由您的**{whitespace}+**规则匹配，而不是由**\n**规则匹配两次.

# javascript - Javascript在地址栏中#后检测变量变化

> ID：13324240
> 
> 赞同：0
> 
> 时间：2012-11-10T17:20:24.740
> 
> 标签：javascript, jquery, variables

例子：

```
http://localhost/#view=1 
```

如果我想得到那个变量“view”，我需要得到`window.location.href`，然后拆分`#`并做更多的事情。

这是我的问题：

```
<a href="#view=1">View 1</a>
<a href="#view=2">View 2</a> 
```

无论如何要检测查看 1 单击或查看 2 单击的时间？对于人们点击 View 2，一个函数将为`view=2`.

或者我必须这样做：

```
<a href="#view=1" onclick="setview(1);">View 1</a>
<a href="#view=2" onclick="setview(2);">View 2</a> 
```

我希望当人们复制链接`http://localhost/#view=2`并发送给那里的朋友时，`setview(2)`当他们的朋友访问该 URL 时，该功能将运行，而他们不需要单击该链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:24:49.953

### 您可以使用`hashChange`事件

```
$(function(){
  // Bind the event.
  $(window).hashchange( function(){
    // Alerts every time the hash changes!
    alert( location.hash );
  })

  // Trigger the event (useful on page load).
  $(window).hashchange();
}); 
```

现在在`$(window).hashchange();`函数中，输入您的代码：

```
$(window).hashchange(function(){
  $(location.hash).show();
}); 
```

在您的情况下，它将是：

```
$(window).hashchange(function(){
  setview(location.hash[strlen(location.hash)-1]); // Get the last character, if this doesn't work.
}); 
```

忘记添加插件：[http](http://benalman.com/projects/jquery-hashchange-plugin/) ://benalman.com/projects/jquery-hashchange-plugin/ ，您需要使用它。

# css - 将文本字段标签与复选框标签对齐

> ID：13324243
> 
> 赞同：0
> 
> 时间：2012-11-10T17:20:34.150
> 
> 标签：css, checkbox, label, textfield

我有一个复选框和两个文本字段。当复选框被选中时，会出现两个文本字段（通过 jquery 代码）。我希望两个标签“第一个字段”和“第二个字段”与标签“MyCheckbox”对齐，或者在某种程度上，两个文本字段标签应该相对于复选框的级别缩进。这是我的html代码：

```
 <div>
 <input type="checkbox" name="mycheckbox">&nbsp;MyCheckbox
 </div>
 <div id="mydiv">
   <div><label>First field</label>
   <input type="text" name="first_field" value="">
   </div>
   <div><label>Second field</label>
   <input type="text" name="second_field" value="">
   </div>
 </div> 
```

我怎么能用css做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:29:36.097

您可以将它们放在同一个 div 中并使用 jquery 附加到 div。你会像这样访问 div

```
$('input[name=mycheckbox]').parent() 
```

和这样的附加

```
$('input[name=mycheckbox]').parent().append($('#mydiv').html()); 
```

如果您将第一个字段和第二个字段放在 div 之外并且 div 具有默认宽度 //width = 100% 它将放在您的第一个复选框 div 下方。所以你需要做两件事之一......

*   使用上面的 jquery 把你的代码放在 100% div 里面

*   或者指定第一个 div 的宽度并浮动它旁边的项目，一个例子是

////浮动是可选的

```
//div{
//width: 50%;
//float:left;
//}

//#mydiv{
//width: 50%;
//float:left;
//} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:25:39.420

```
#mydiv div { 
    padding-left: 16px;
} 
```

[​JSFiddle](http://jsfiddle.net/n2AdQ/1/)

# android - Android: Two different events for single tap and long press/double tap?

> ID：13324250
> 
> 赞同：6
> 
> 时间：2012-11-10T17:22:03.893
> 
> 标签：android, events, listener, tap

I am trying to develop a feature where a single tap of an item will call an Intent to go to another Activity, and a long press OR double tap of the item does something else, such as allow you to edit the text.

So far I am only able to get both to happen at the same time but not individually. Does anyone have any ideas?

```
public boolean onTouchEvent(MotionEvent e) {
    return gestureScanner.onTouchEvent(e);
}

public boolean onSingleTapConfirmed(MotionEvent e) { 
    Intent i = new Intent(getContext(), SecondClass.class);
    getContext().startActivity(i);

    return true; 
}

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) { return false; }
public void onLongPress(MotionEvent e) {
    Toast.makeText(getContext(), "Edit feature here", Toast.LENGTH_SHORT).show();

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T17:55:33.933

I managed to solve the problem. It turned out all I needed to do is change the return value from `false` to `true` in the `onDown()` handler.

```
public boolean onTouchEvent(MotionEvent e) {
    return gestureScanner.onTouchEvent(e);
}

public boolean onSingleTapConfirmed(MotionEvent e) { 

    Intent i = new Intent(getContext(), SecondClass.class);
    getContext().startActivity(i);

    return true; 
}

public boolean onDown(MotionEvent e) { return true; }

public void onLongPress(MotionEvent e) {
    Toast.makeText(getContext(), "Edit Feature", Toast.LENGTH_SHORT).show();

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T17:29:11.027

Use a GestureDetector, the [SimpleOnGestureListener](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html) has the methods that you want with `onSingleTapConfirmed()`, `onLongPress()`, and `onDoubleTap()`.

# iphone - 设置 CGRect iPhone 的起点

> ID：13324251
> 
> 赞同：0
> 
> 时间：2012-11-10T17:22:14.717
> 
> 标签：iphone, ios, ipad, popup

我创建了一个弹出窗口，如以下链接 [弹出](https://github.com/levey/LeveyPopListView)窗口中的内容 ，一切正常，但如果我想更改此弹出窗口的大小，我会转到函数中的文件“LeveyPopListView.m”

```
- (void)drawRect:(CGRect)rect 
```

并更改此行中的值

```
CGRect bgRect = CGRectInset(rect, 50, 90); 
```

但是如果我想改变这个弹出窗口的起点的值，我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:29:01.963

当系统发送`drawRect:`消息时，改变视图的位置和大小已经太晚了。

您需要更改`_tableView`. 它设置在第 33-36 行`LeveyPopListView.m`。你没有具体说明你想如何改变它，但是你可以通过改变第`POPLISTVIEW_SCREENINSET`12 行的定义来获得你想要的效果。

# network-programming - 通过网络堆栈的数据包路径

> ID：13324253
> 
> 赞同：1
> 
> 时间：2012-11-10T17:22:17.203
> 
> 标签：network-programming, linux-kernel

我正在尝试研究和理解 Linux tcp/ip 堆栈的操作，特别是“ping”如何向下发送数据包并接收它们。Ping 在 AF_INET 系列中创建原始套接字，因此我将 printk 放在 net/ipv4/af_inet.c 的 inet_sendmsg() 中，以打印出正确显示的套接字协议名称（RAW、UDP 等）和协议特定 sendmsg 函数的地址来自 net/ipv4/raw.c 的 raw_sendmsg()

现在，我正在发送一个数据包并观察到我从 inet_sendmsg() 获得 printk 两次。这让我感到困惑——这是正常的（与中断等有关吗？）还是内核中有问题？

平台 - ARM5te，内核 2.6.31.8

期待您的回音 ！

标记

# php - 使用 PHP 和 DOM 以正确的格式保存 XML

> ID：13324256
> 
> 赞同：1
> 
> 时间：2012-11-10T17:22:36.370
> 
> 标签：php, xml, dom, xml-parsing

我在使用 PHP 和 DOM 更新 XML 时遇到问题。我的 XML 文件采用以下格式：

**原始 XML（& 所需的 xml 布局）：**

```
<?xml version="1.0" standalone="yes"?>
<Rows>
  <Row CustomerAccountNumber="COU002" />
  <Row CustomerAccountNumber="COU023" />
  <Row CustomerAccountNumber="C2335" />
  <Row CustomerAccountNumber="CvbU002" /> 
```

而保存即添加新记录到 XML(customer.xml) 的代码是：

```
<?php

$xmldoc=new DOMDocument();
$xmldoc->load('XML/customer.xml');

$newAct= 'c12345';

$root = $xmldoc->firstChild;

$newElement= $xmldoc->createElement('CustomerAccountNumber');
$root->appendChild($newElement);
$newText= $xmldoc->createTextNode($newAct);
$newElement->appendChild($newText);

$xmldoc->save('XML/customer.xml');
 ?> 
```

**问题：**代码正在以这种格式生成新记录：

```
 <Rows>
  <Row CustomerAccountNumber="COU002" />
  <Row CustomerAccountNumber="COU023" />
  <Row CustomerAccountNumber="C2335" />
  <Row CustomerAccountNumber="CvbU002" />
  <CustomerAccountNumber>c12345</CustomerAccountNumber>

</Rows> 
```

我不明白我在哪里犯了错误。我只想保留我原来的 XML 格式。我想要上面提到的原始格式的输出文件（见顶部）。请指导我并指出我在哪里犯了正在生成的错误文件本身格式不正确。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:04:53.790

您的问题是您当前正在创建一个新`CustomerAccountNumber` *元素*。相反，您想创建一个新`Row`元素，然后[创建一个新`CustomerAccountNumber`属性](http://php.net/manual/en/domdocument.createattribute.php)：

```
$newElement = $xmldoc->createElement('Row');
$newAttribute = $xmldoc->createAttribute('CustomerAccountNumber');
$newAttribute->value = $newAct;
$newElement->appendChild($newAttribute);
$root->appendChild($newElement); 
```

# javascript - 将 javascript 变量添加到 actionlink

> ID：13324258
> 
> 赞同：0
> 
> 时间：2012-11-10T17:22:40.540
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我有如下所示的 AJAX 请求：

```
jsonData = JSON.stringify({stuff: stuff});
        $.ajax({
            url: '<%=Url.Action("myMethod", "myController") %>',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: jsonData,
            success: function (data) {
            $("#myDiv").append('<span><%=Html.ActionLink("Details", "myMethod", new {id      = data.id })%></span>');
         }
)}; 
```

**编辑！我正在尝试将此 Actionlink 附加到“成功”的 div 中。在我最初的帖子中，我不知何故忘记了 $("#myDiv").append() 代码。**

在本`new {id = data.id }`节中，我想在此操作链接中使用 data.id（一个 javascript 变量）。

我不断收到错误消息，说要么未定义数据，要么文字中的字符太多，等等。

有没有人成功地做到过这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:31:17.263

先生，我认为您在服务器端 (<%) 标记和客户端执行上下文之间感到困惑。`"data"`是在客户端定义的变量，这些服务器端标签之间的所有内容都将在服务器上处理。您的页面中没有名为`"data"`!的变量 因为您想在服务器中使用它，并且它位于服务器端 (<% %>) 标记之间。

在客户端中，您的脚本将类似于以下代码：

```
jsonData = JSON.stringify({stuff: stuff});
        $.ajax({
            url: 'THE_PROCESSED_RESULT_OF_SERVER_TAG_GOES_HERE',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: jsonData,
            success: function (data) {
    '<span>THE_PROCESSED_RESULT_OF_SERVER_TAG_GOES_HERE</span>'
         }
)}; 
```

使用开发人员工具（或任何其他工具）检查文件内容，您将看到客户端中实际发生的情况。

**更新**

再次！你不能做我已经提到的事情。服务器端代码和客户端代码之间存在差异。无论您想如何访问名为`"data"`. 它没有在服务器端代码中定义。它是成功函数的参数，将在客户端执行上下文中执行。

希望它可以帮助干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:47:03.937

```
'<span><a href="<%=Url.Action("Details", "myMethod")%>?id=' + data.id + '"></a></span>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T11:34:11.670

您不能直接执行此操作，因为代码*的一部分在服务器（`Url.Action`部分*）上运行，并且`data.id`仅在代码到达客户端浏览器后才可用。

但是您可以对其进行一些技巧，例如将`id`from 服务器设置为具有虚拟的唯一值，然后将其替换为 javascript ..

```
$("#myDiv")
   .append('<span><%=Html.ActionLink("Details", "myMethod", new {id = "-dummy-"})%></span>'.replace('-dummy-',data.id)); 
```

# algorithm - 在给定图像中检测到正方形数量的算法

> ID：13324259
> 
> 赞同：0
> 
> 时间：2012-11-10T17:22:46.480
> 
> 标签：algorithm, matlab, image-processing

我有一个图像，其中有各种嵌套的正方形。我想使用 Matlab 检测该图像中的正方形数量。

我已经找到了图像中的所有角落：

![https://lh3.googleusercontent.com/-jyjxji7QjtU/UJ6M8lGiwbI/AAAAAAAAAEs/zSNc_JdjPkU/w348-h353-pk/123.jpg](../Images/5e09b346dad1b995b402bb75aadb29ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:39:17.160

使用 Matlab 函数`houghlines`( [http://www.mathworks.com/help/images/ref/houghlines.html](http://www.mathworks.com/help/images/ref/houghlines.html) ) 检测图像中的线段。然后遍历每个线段并找到所有其他端点靠近的线段。取每个附近段的角度并寻找 90 度角。如果你能找到正确的 90 度角线排列来形成一个正方形，那么你已经检测到一个正方形。

# c# - 使用 Linq 从平面列表创建嵌套列表

> ID：13324267
> 
> 赞同：2
> 
> 时间：2012-11-10T17:23:43.467
> 
> 标签：c#, asp.net, linq

我有一个字符串列表，例如

```
A01,B01 ,A02, B12, C15, A12,  ... 
```

我想将列表展开为列表列表或列表字典，以便
以相同字母开头的所有字符串组合在一起（使用 linq）

```
A -> A01 , A02 , Al2
B -> B01 , B12
C -> C15 
```

或者

```
 A -> 01 , 02 , l2
    B -> 01 , 12
    C -> 15 
```

现在我只是使用 for 循环迭代列表并将值从字典中添加到 appprop 列表中。

（可能不对！）

```
 Dictionary<string, List<string>> dict = new Dictionary<string, List<string>>();

         foreach( string str in stringList)
         {
            string key = str.Substring(0,1);
            if (!dict.ContainsKey(key)){
                dict[key] = new List<string>();
            }

            dict[key].Add(str);
         } 
```

**编辑**：
哦，对不起，我忘了添加这个，我有一个类别 objs 列表，这些是类别名称。
我需要检索类似的东西`Dictionary<string, List<Category>>`，以后我想将它绑定到一个[嵌套列表](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_lists2)。(asp.net/mvc)

有没有更好的方法来使用 Linq 做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T17:24:59.123

听起来你想要一个[`Lookup`](http://msdn.microsoft.com/en-us/library/bb460184.aspx), 通过[`ToLookup`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)扩展方法：

```
var lookup = stringList.ToLookup(x => x.Substring(0, 1)); 
```

查找可以让你做几乎任何你可以用字典做的事情，但它在构建后是不可变的。哦，如果你要求一个缺失的键，它会给你一个空序列而不是一个错误，这会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:56:36.657

来自聊天室，试试这个。我知道这不是最优雅的解决方案，可能有更好的解决方案。

```
List<string> listOfStrings = {"A01", "B01", "A02", "B12", "C15", "A12"}.ToList();

var res = listOfStrings.Select(p => p.Substring(0, 1)).Distinct().ToList().Select(p => 
new {
       Key = p,
       Values = listOfStrings.Where(c => c.Substring(0, 1) == p)
}).ToList();

foreach (object el_loopVariable in res) {
     el = el_loopVariable;
     foreach (object x_loopVariable in el.Values) {
         x = x_loopVariable;
         Console.WriteLine("Key: " + el.Key + " ; Value: " + x);
     }
}

Console.Read(); 
```

给出以下输出：

![在此处输入图像描述](../Images/9522a37f651befc03488812f18879911.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:44:36.533

如果你想使用字典，你可能想要这个

```
 List<String> strList = new List<String>();
        strList.Add("Axxxx");
        strList.Add("Byyyy");
        strList.Add("Czzzz");
        Dictionary<String, String> dicList = strList.ToDictionary(x => x.Substring(0, 1));
        Console.WriteLine(dicList["A"]); 
```

# ruby-on-rails - Rails - 调用模型的方法时在视图中获取对象的字段

> ID：13324268
> 
> 赞同：1
> 
> 时间：2012-11-10T17:24:11.423
> 
> 标签：ruby-on-rails, view, model, field

我是 ruby​​ 和 rails 的新手，但是我不知道为什么这不起作用。

我正在做一个带有帖子及其评论的简单博客，一切正常，但我尝试在 Post 模型中使用我自己的方法来获取该帖子中的最新评论。

```
class Post < ActiveRecord::Base
  attr_accessible :content, :title

  has_many :comments

    def latestComment(id)
        post = Post.find(id)
        comment = post.comments.last
    end
  end 
```

和 index.html.erb

```
<h1>Hello World!</h1>

<h2>Posts</h2>

<% @posts.each do |post| %>

    <h3><%= link_to post.title, post %></h3>
    <p><%= post.content %></p>

    <%= latestComment = post.latestComment(post) %>

<% end %>

<h3>Add new post</h3>
<%= link_to "Add new post", new_post_path %> 
```

这行得通，它返回一些十六进制值，所以该对象存在，但是我现在想从该对象中获取字段，如下所示

```
<p><%= latestComment.author %></p>
<p><%= latestComment.content %></p> 
```

它失败了，错误是

```
undefined method `author' for nil:NilClass 
```

这很奇怪，我不明白为什么我不能访问评论字段..

**///comment.rb**

```
class Comment < ActiveRecord::Base
    attr_accessible :author, :content, :post_id

    belongs_to :post
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:31:53.760

由于您正在循环访问多个帖子，因此其中一个可能没有任何评论，这使得`post.comments.last`return nil。您可以通过在尝试呈现评论之前对其进行检查来解决此问题：

```
class Post < ActiveRecord::Base
  def has_comments?
    comments.count > 0
  end

  def last_comment
    comments.last
  end
end 
```

然后，在视图上：

```
<% @posts.each do |post| %>

  <h3><%= link_to post.title, post %></h3>
  <p><%= post.content %></p>

  <% if post.has_comments? %>
    <p><%= post.last_comment.author %></p>
    <p><%= post.last_comment.content %></p>
  <% end %>
<% end %> 
```

# python - Tornado 类未收到 HTML 表单数据

> ID：13324270
> 
> 赞同：5
> 
> 时间：2012-11-10T17:24:18.177
> 
> 标签：python, html, websocket, tornado

我在 Tornado 框架中使用 WebSockets，无法以 html 形式获取要发送到 tornado 类的数据。

这是我的代码：

```
class MainHandler(tornado.web.RequestHandler):
    event = []
    def get(self):
        self.render('main.html')             

    def post(self):
        MainHandler.event = self.get_argument('event') 
```

当我尝试将事件发送到 WebSocketHandler 类时。没有从表单接收到数据：

```
class WSHandler(tornado.websocket.WebSocketHandler):

    def open(self):
            print "tailing..."
            db = Connection().blah
            coll = db.blah_tail

            event = MainHandler.event
            print 'Filtered', event 
```

'Filtered' 只打印一个空列表：“Filtered []”。

html表单：

```
<form action="/" method="post">
            <input type="text" name="event" />
            <input type="submit" id="open" value="Submit Query" />
        </form> 
```

如何将表单数据发送到 WSHandler 类？

谢谢

创建websocket的js：

```
<script>
        $(document).ready(function() {
            var ws;

        $("#open").click(function(evt){
        evt.preventDefault();

        ws = new WebSocket("ws://" + "localhost" + ":" + "8888" + "/ws");

        ws.onmessage = function(evt) $("#display").append(evt.data + "<br />");

        ws.onclose = function(evt) {alert("Server connection terminated");};
    });
   }); 
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T21:00:51.827

就像 Tornado 文档中的示例一样，我将 a`set`用于 WebSocket 客户端。改进这一点留给读者作为练习。

```
# clients listing on the WebSocket
clients = set()

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        return self.render("index.html")

    def post(self):
        global clients

        event = self.get_argument("event")
        print "got event", event
        if not clients:
            print "No WebSockets, no point in querying the database"
            return
        for coordinate in self.get_coordinates(event):
            for client in clients:
                print "sending coordinate", coordinate, "to client", client
                client.write_message(json.dumps(coordinate,
                                                default=json_util.default))

    def get_coordinates(self, event):
        # replace with a real database query
        for coordinate in ("No", "man's", "land"):
            time.sleep(1)
            yield coordinate

class WSHandler(tornado.websocket.WebSocketHandler):
    def open(self):
        global clients
        print "WebSocket opened..."
        clients.add(self)

    def on_close(self):
        global clients
        print "WebSocket closed..."
        clients.remove(self) 
```

`index.html`模板 的相关部分：

```
 <script type="text/javascript">
        $(document).ready(function() {
            var ws;
            // open WebSocket for getting the results
            ws = new WebSocket("ws://" + location.host + "/ws");
            ws.onmessage = function(evt) {
                $("#display").append(evt.data + "<br>");
            };
            ws.onclose = function(evt) {alert("Server connection terminated");};

            $("#open").click(function(evt) {
                evt.preventDefault();
                $.post("/", $("#eventForm").serialize());
            });
        });
    </script>
</head>
<body>
    <h1>Event follower</h1>
    <h2>Enter the event you would like to follow</h2>
    <form id="eventForm" action="/" method="post">
        <input type="text" name="event" />
        <input type="submit" id="open" value="Submit Query" />
    </form>
    <h2>Coordinates</h2>
    <div id="display">
    </div>
</body> 
```

加载页面时，会与服务器建立到`WSHandler`类的 WebSocket 连接，并将客户端添加到`clients`集合中。当页面关闭时，WebSocket 连接关闭，服务器会将其从集合中移除。

**单击打开**提交按钮时，表单将使用 AJAX 异步提交到`MainHandler.post`. 该方法将找出与该事件相关的坐标，并在监听客户端出现时将它们发送给它们。浏览器接收每个坐标并将其附加到**display** `div`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:09:02.237

您的函数 MainHandler 或 WSHandler 的处理程序是什么，

一次只有一个调用，因此您的语法 `event = MainHandler.event` 不会为您产生任何结果。

1.  如果您的目标只是提交表单。然后在提交类型的事件中，您必须在 JS 中编写与您的提交调用相关联的帖子或获取函数，这将与服务器端的普通 tornado.web.RequestHandler 一起使用。

参考。[龙卷风网络套接字聊天示例](https://github.com/facebook/tornado/blob/master/demos/websocket)

我更新了聊天示例：

```
$(document).ready(function() {
    if (!window.console) window.console = {};
    if (!window.console.log) window.console.log = function() {};
    $("#messageform").live("submit", function() {
            newMessage($(this));
            return false;
     });
     $("#message").select();
    }
});

function newMessage(form) {
        var message = form.formToDict();
        var disabled = form.find("input[type=submit]");
        disabled.disable();
        $.postJSON("URL", message, function(response) {
            console.log(response);
        });
    }

    function getCookie(name) {
        var r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
        return r ? r[1] : undefined;
    }

    jQuery.postJSON = function(url, args, callback) {
        args._xsrf = getCookie("_xsrf");
        $.ajax({url: url, data: $.param(args), dataType: "text", type: "POST",
                success: function(response) {
            if (callback) callback(eval("(" + response + ")"));
        }, error: function(response) {
            console.log("ERROR:", response)
        }});
    }; 
```

当您打电话时`$("#message").submit()`，您将在“URL”功能中收到表单数据

**如果你想使用 WSHandler 那么**

**参考。[示例链接](http://mbed.org/cookbook/Websockets?action=view&revision=3476)将对您有所帮助。**

看看这是否有帮助。

# php - 选择最后一分钟创建的文件

> ID：13324277
> 
> 赞同：2
> 
> 时间：2012-11-10T17:25:09.707
> 
> 标签：php

你知道php中是否有一个函数可以找到给定目录中的所有文件，这些文件是在最后一分钟（或者在任何情况下在指定时间创建的？）。例如，要选择一个目录中最近 10 分钟创建的所有 txt 文件。

我希望我的意思很清楚！

谢谢 D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:27:59.543

没有这样的创建时间，只有修改时间，它可以跨操作系统可靠地工作。

> PHP 中的 filectime() 和 filemtime() 文件系统函数将允许您检查文件上次更改的时间。
> 
> 它将返回一个时间戳，该时间戳保存文件上次更改的时间值

* * *

您可以遍历文件夹中的文件，同时检查**[`filemtime()`](http://php.net/manual/en/function.filemtime.php)**. 就像是，

```
foreach (glob("*.txt") as $filename) {
    echo filemtime($filename); //echoes timestamp
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:27:46.940

获取目录中的所有文件，循环它们并应用[filetime()](http://php.net/manual/en/function.filemtime.php)函数来查看它们何时被创建/修改。将它们复制到另一个数组并随心所欲地处理它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:12:38.013

你可以试试

```
$it = new GlobIterator(__DIR__ . "/*.txt");
$last10mis = 600;
$list = array();
foreach ( $it as $file )
    (time() - $file->getMTime()) <= $last10mis and $list[] = strval($file);

var_dump($list); // all txt files modified in the last 10mins 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T17:27:39.810

PHP 中有一个名为 filemtime 的函数，它将以 UNIX 时间戳返回修改后的时间。 [http://php.net/manual/en/function.filemtime.php](http://php.net/manual/en/function.filemtime.php)

从那里开始，在该页面上的示例中，它应该相当简单地适用于您的需求。

# java - 选择树节点时如何发送SN？

> ID：13324278
> 
> 赞同：0
> 
> 时间：2012-11-10T17:25:14.167
> 
> 标签：java, javascript, jsf, jsf-2

我有这个 Primefaces 树：

***JSF 代码***

```
<h:form id="form">  

    <p:tree id="tree" value="#{TreeViewController.root}" var="node" dynamic="true" cache="true" animate="true"
            selectionMode="single"  selection="#{TreeViewController.selectedNode}" highlight="true">  
        <p:ajax event="select" listener="#{TreeViewController.onNodeSelect}" update=":form:outputComponent" />

        <p:treeNode>                            
            <h:outputText value="#{node}"/>  
        </p:treeNode> 
    </p:tree>

    <p:outputPanel id="outputComponent">
        <h:outputText value="#{TreeViewController.data}" />
    </p:outputPanel>

</h:form> 
```

***托管豆***

```
private TreeNode root; 

    private TreeNode selectedNode;  

    public TreeView() {  
        root = new DefaultTreeNode("Root", null);  
        TreeNode node0 = new DefaultTreeNode("Node 0", root);  
        TreeNode node1 = new DefaultTreeNode("Node 1", root);  
        TreeNode node2 = new DefaultTreeNode("Node 2", root);
        TreeNode node3 = new DefaultTreeNode("Node 3", root);
        TreeNode node4 = new DefaultTreeNode("Node 4", root);  

        TreeNode node00 = new DefaultTreeNode("Node 0.0", node0);  
        TreeNode node01 = new DefaultTreeNode("Node 0.1", node0);
        TreeNode node02 = new DefaultTreeNode("Node 0.2", node0);  
        TreeNode node03 = new DefaultTreeNode("Node 0.3", node0);
        TreeNode node04 = new DefaultTreeNode("Node 0.4", node0);  
        TreeNode node05 = new DefaultTreeNode("Node 0.5", node0);
        TreeNode node06 = new DefaultTreeNode("Node 0.6", node0);
        TreeNode node07 = new DefaultTreeNode("Node 0.7", node0);  
        TreeNode node08 = new DefaultTreeNode("Node 0.8", node0);
        TreeNode node09 = new DefaultTreeNode("Node 0.9", node0);

        TreeNode node10 = new DefaultTreeNode("Node 1.0", node1);  
        TreeNode node11 = new DefaultTreeNode("Node 1.1", node1);  

        TreeNode node000 = new DefaultTreeNode("Node 0.0.0", node00);  
        TreeNode node001 = new DefaultTreeNode("Node 0.0.1", node00);  
        TreeNode node010 = new DefaultTreeNode("Node 0.1.0", node01);  

        TreeNode node100 = new DefaultTreeNode("Node 1.0.0", node10);  
    }  

    public TreeNode getRoot() {  
        return root;  
    } 

    public String data;

    public void onNodeSelect(NodeSelectEvent event) {
        String node = event.getTreeNode().getData().toString();

        data = node;
    }

    public String getData(){
        return data;
    }

    public TreeNode getSelectedNode() {  
        return selectedNode;  
    }  

    public void setSelectedNode(TreeNode selectedNode) {  
        this.selectedNode = selectedNode;  
    } 
```

我需要传递一个名为序列号的值，稍后将用于 SQL 查询以获取所选节点的信息。这个想法是为节点中的每个组件创建具有隐藏序列号的树。稍后此 SN 将用于从数据库中获取数据。如何为每个组件隐藏此 SN？现在我只能得到树节点的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T20:15:08.283

尽管我回复它的时间很晚，但它仍然可能对其他人有帮助。这是我所做的，

我做了以下课程

```
class CustomizedTree{
    private Integer id;
    private String name;

    public CustomizedTree(Integer id, String name){
        this.id = id;
        this.name = name;
    }

    /**
     * @return the id
     */
    public Integer getId() {
        return id;
    }

    /**
     * @param id the id to set
     */
    public void setId(Integer id) {
        this.id = id;
    }

    /**
     * @return the name
     */
    public String getName() {
        return name;
    }

    /**
     * @param name the name to set
     */
    public void setName(String name) {
        this.name = name;
    }
} 
```

在为树节点对象添加类型时，

```
CustomizedTree t = null;

        t = new CustomizedTree(device.getId(), device.getName());
TreeNode node0 = new TreeNodeImpl(t, root); 
```

现在这样，我也可以将 Id 传递给树节点。

当一个节点被选中时，我同样检索它的 id。

```
CustomizedTree treeNode = (CustomizedTree)event.getTreeNode().getData();
    FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Selected",treeNode.getName()); 
```

# c# - 添加子菜单删除快捷键

> ID：13324284
> 
> 赞同：3
> 
> 时间：2012-11-10T17:25:52.997
> 
> 标签：c#, winforms, menu, keyboard-shortcuts, menuitem

在我正在开发的 WinForms 应用程序中，我遇到了一个相当有趣的事件。似乎当我将 DropDownItem 添加到 ToolStripMenuItem 时，父菜单项上的快捷键消失了。不仅仅是没有显示快捷键，它根本不再注册按键。如果我删除子菜单项，快捷键会回来。令人惊讶的是，在设计器中一切看起来都很好，这似乎直到运行时才会发生。

设计器中的菜单：

![设计师视图](../Images/53e9665069a87bcdcc649204ec10a179.png)

运行时相同的菜单：

![运行时视图](../Images/109d72587636c86245550ac1217ac2f9.png)

有谁知道为什么会发生这种情况以及如何防止它？需要澄清的是，单击父菜单执行的功能与单击子菜单不同，因此移动快捷方式是不够的。如果我手动单击菜单，所有功能都会按预期执行。它只是不再起作用的快捷键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:56:58.633

据我所知，完成这项工作的唯一方法是将 ToolStripMenuItem 子类化并手动处理绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:53:46.623

不确定为什么会发生这种情况，但您始终可以`PreviewKeyDown`在当前事件中定义一个新事件，`Form`并查看按下的键是否与菜单项快捷键匹配。因此，当按下一个或多个键时，您将能够执行您想要执行的命令。

**例子**

```
public Form1()
{
    InitializeComponent();
    PreviewKeyDown += new PreviewKeyDownEventHandler(Form1_PreviewKeyDown); //Link the PreviewKeyDown event of the current Form to Form1_PreviewKeyDown
}

private void Form1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
    if (e.Control && e.KeyCode == Keys.D7) //Indicates whether Ctrl and 7 are pressed (These are our hotkeys)
    {
        //DoSomething
    }
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:12:20.730

我认为快捷键仅适用于没有子项的菜单项。所以在运行时它是不可见的，因为编译器预测它是一个带有子菜单的菜单。

# objective-c - 需要一种更高效的方式将大量浮点数存储到数组中并将它们读回

> ID：13324287
> 
> 赞同：0
> 
> 时间：2012-11-10T17:26:07.363
> 
> 标签：objective-c, ios, arrays

在我的应用程序中，我必须将路径点存储到一个数组中，然后遵循这些点。为了获得更顺畅的运行，我通常必须将路径转储到 5k 点。这意味着我必须存储 10k 个浮点数——x 坐标为 5k，y 坐标为 5k。现在这就是我正在做的事情：

1.在视图加载中，我用这 10k 个数字初始化一个 NSArray，如下所示：

```
pathPoints=[NSArray arrayWithObjects:[NSNumber numberWithFloat:-134.8427],  [NSNumber numberWithFloat:148.8433], ....... and so on]; 
```

1.  然后我这样读：

    int currentXIndex=..////

    [[pathPoints objectAtIndex:currentXIndex] floatValue];

    [[pathPoints objectAtIndex:currentXIndex+1] floatValue];

如您所见，每次我需要下一个位置时？我必须拆箱（将其从 NSNumber 转换为浮动）。我确信这需要大量的性能。有什么建议可以让我以另一种更高效的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:32:10.717

对于一个简单的容器，我会使用 C 数组并使用指针遍历。请记住，Objective C 是 C 的超集，因此您可以在需要时准备好一切。

**编辑**；示例代码：

您不必“裸”存储所有数字，`struct`没有任何开销：

```
typedef struct tCoords {
    float x, y;
} tCoords; 
```

然后只是`malloc()`需要的大小：

```
arraySize = 5000;
tCoords *array = malloc(arraySize * sizeof(tCoords)); 
```

并像任何简单的数组一样迭代：

```
tCoords *end = array+arraySize;

for (tCoords *p = array; p<end; ++p) {
    float x = p->x;
    float y = p->y;
} 
```

如果您不喜欢代码的“旧 C”外观，可以轻松地将所有这些封装在一个“拥有”数组的类中（释放时不要忘记`free()`它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:31:53.913

`[NSValue valueWithPOint:(CGPoint...)]`通过使用方法将一对坐标框为一个*`id`*对象而不是两个对象，您可以合理地便宜地减少一半的包装量。这也应该减少存储对所需的内存。

如果这还不够，您可以将更多元素“捆绑”在一个包装器中。例如，如果您知道您的路径是以 32 个点为一组创建的，则可以存储包含 32 个`CGPoint`对象的数组`NSData`（使用`[NSData dataWithBytes:.. length:..]`方法）。当您需要在 index 处的点时，在 index from`i`处获取一个组，从 处解包，然后在 at 处获取元素。`i/32``NSArray``NSData``i%32`

如果其他一切都失败了，则通过隐藏对漂亮的 Objective C 接口的`CGPoint`调用`malloc`和在其后面创建一个表示结构数组的类。`free`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:33:58.757

使用普通数组而不是 NSArray？

```
float *pathPoints;
pathPoints = new float[10000];
...
...
delete [] pathPoints; 
```

或者对于一个常量数组

```
float pathPoints [] = {-134.8427,148.8433, ... and so on}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T19:59:40.943

你可以使用一个 C 浮点数数组...

有关 C 数组的信息：

> [用 C 调整数组大小](https://stackoverflow.com/questions/2937409/resizing-an-array-with-c)

# java - 子类属性错误

> ID：13324290
> 
> 赞同：0
> 
> 时间：2012-11-10T17:26:31.467
> 
> 标签：java, inheritance

我有一个具有受保护属性高度的子（扩展）类。我想在主程序中访问它：

```
 while(line != null)
     {
        String[] field = line.split("#");
        int height = Integer.parseInt(field[0]);

        if (field.length ==1)
        {
           forest[cnt] = new Trees(height);
        }
        else
        {
           forest[cnt] = new Shrub(height, field[1]);

        }

        cnt++;
        line = inS.readLine();

     }
     inS.close();

     String s = JOptionPane.showInputDialog("Enter Name to search for");

     for(int i = 0; i<forest.length; i++)
     {

        if (forest[i] instanceof Shrub)
        {
           String a = forest[i].getName();      
           System.out.println ("Found");
        }
     }
  } 
```

但是我收到一个错误，说它找不到方法 getName，但是当我运行 lol Shrub 时它工作正常吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:28:55.677

私有访问修饰符方法在子类中不可访问。将它们设为公开或受保护。

# java - 从 Java 中的注解中获取默认元素值

> ID：13324297
> 
> 赞同：22
> 
> 时间：2012-11-10T17:27:14.583
> 
> 标签：java, reflection, annotations

我创建了自己的注释，我通过反射利用它在我的代码中做出决定。注释为其唯一元素设置了默认值。有没有办法可以通过反射访问默认值？

**PageableRequestMapping.java (注解)**

```
package org.tothought.controllers.annotations;

import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

@Retention(RetentionPolicy.RUNTIME)
public @interface PageableRequestMapping {
    String variablePath() default "/";
} 
```

**检索默认值的伪代码**

```
private int parsePageNumber(StringBuffer requestURL,
        PageableRequestMapping pageableRequestMapping) {

        String variablePath = pageableRequestMapping.variablePath();

    //Psuedo code doesn't work in Java, included to illustrate intentions   
        if(variablePath.equalsIgnoreCase(pageableRequestMapping.variablePath().default())){
           //handle default case    
        }else{
          //handle different case
        }
        return 0;
} 
```

我对这个问题的研究没有发现任何例子。我推测这个值可以通过类以静态方式访问，但它不能。所以我有两个问题。

*   是否可以在注释中获取元素的默认值？
*   如果是这样，怎么做？

另外，我知道我可以硬编码这个值，但是我想让程序稍微健壮一些。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-10T17:45:33.610

您可以使用反射来获取 Method 对象，然后利用[`Method#getDefaultValue()`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#getDefaultValue%28%29).

```
Method method = pageableReqMapping.annotationType().getMethod("variablePath");
String variablePath = (String) method.getDefaultValue(); 
```

这是一个具体的例子：

```
public class AnnotationTest {

  public static void main(String[] args) throws Exception {
    Class<?> clazz = Annotation.class;
    Method method = clazz.getDeclaredMethod("value");
    String value = (String) method.getDefaultValue();
    System.out.println(value);
  }

  public @interface Annotation {
    String value() default "default value";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:45:11.723

你可以这样做，通过在一个类上应用你的注释并通过反射从类中检索它：

```
@PageableRequestMapping
class MyUtilClass{
}

public String getDefaultValue(){
    PageableRequestMapping pageableRequestMapping = MyUtilClass.class.getAnnotation(PageableRequestMapping.class);
    return pageableRequestMapping.variablePath();
} 
```

# html - 将 Wordpress 网站转换为静态 html？

> ID：13324299
> 
> 赞同：3
> 
> 时间：2012-11-10T17:27:21.947
> 
> 标签：html, wordpress

谁能给我关于将整个已建立的wordpress网站转换为html的想法？

我已经在谷歌搜索，并找到了一些链接：

```
http://forums.digitalpoint.com/showthread.php?t=1601946
http://sumtips.com/2011/08/convert-wordpress-to-static-html-pages.html
http://mossiso.com/2007/09/10/converting-wordpress-to-static-html.html 
```

还有什么简单的方法吗？请建议？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-10T23:18:16.997

使用网站抓取工具或机器人来抓取和下载完整的网站；这将为您提供纯 html 和图像的 Wordpress 站点的镜像。这基本上就是那些插件所做的。

他们当然不会为您提供网站的任何 php 或动态方面；只有普通的html。

众多开膛手之一：[http](http://www.httrack.com/) ://www.httrack.com/或谷歌了解更多信息。或使用其中一个插件。没有比这更容易的了，这很容易。

或者对于命令行实用程序，尝试`wget`. 见[http://www.gnu.org/software/wget/](http://www.gnu.org/software/wget/)

示例用法：`wget -r -p -e robots=off http://www.example.com`

然后，查看[https://codex.wordpress.org/Theme_Development](https://codex.wordpress.org/Theme_Development)，了解标准 WordPress 主题在文件层次结构、添加脚本和样式表等方面的结构。处理您获得的文本文件以从文件中删除标记并隔离文本内容，隔离所需的 HTML 并制作主题。

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-11-10T17:32:02.660

对您来说最简单的方法是查看页面的源代码并将其粘贴到记事本中，将此页面另存为 html 就完成了，请记住它不会是 wordpress 页面，而是简单的静态 html 页面。没有其他方法可以相信我。

# css - z-index 在共享点母版页中不起作用

> ID：13324300
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:27:26.420
> 
> 标签：css, sharepoint

我正在为共享点制作一个新的母版页，其中包括 3 层。我首先在 php 中创建了页面，它在 Chrome 中完美运行，然后在添加`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">`为第一行之后，我终于能够让 z-index 在 IE8 中正常工作。但是，当我随后添加必要的代码以使其成为母版页时，分层不再在 Chrome 或 IE8 中起作用。

代码：-

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<%@ Master Language="C#" %>
<%@ Register tagprefix="SharePoint" namespace="Microsoft.SharePoint.WebControls" assembly="Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>

<html dir="ltr">

<head runat="server">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<SharePoint:RobotsMetaTag runat="server"></SharePoint:RobotsMetaTag>
<title>Untitled 1</title>
<asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
<style>
.gradient{
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#b3ab87, endColorstr=#7c796a)";
    background: -webkit-gradient(linear, left top, left bottom, from(#b3ab87), to(#7c796a)); 
}
.gradient2{
    background: -webkit-gradient(linear, left top, right top, from(#dded9e), to(#fff), color-stop(0.7, #fff));
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#FFdded9e, endColorstr=#FFFFFFFF, GradientType=1)";
}
.gradient3{
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#7c796a, endColorstr=#b3ab87)";
    background: -webkit-gradient(linear, left top, left bottom, from(#7c796a), to(#b3ab87)); 
}
a:link{
    color:orange;
}
</style>

</head>

<body bgcolor="#b3ab87" style="font-family:'Arial';margin:0;padding:0">

<form id="form1" runat="server">
<div style="margin:0 auto;width:960px;position:relative">
    <div style="background-image:url('../SiteAssets/headerMainNEW.jpg');width:960px;height:155px;top:0;position:relative;z-index:2">
        <div style="top:40px;left:50px;font-size:2.9em;font-family:'Calibri';color:#938d81;position:relative;z-index:3">
            Site Name
        </div>
        <div style="float:right;width:195px;height:35px;margin-top:-52px;position:relative" class="gradient2">
        </div>
    </div>
    <div style="width:970px;margin-left:-5px;margin-top:-155px;height:155px;z-index:1;position:absolute" class="gradient">
    </div>
    <div style="width:970px;margin-left:-5px;margin-top:-19px;z-index:1;position:relative;overflow:auto" class="gradient3">
        <div style="margin:0 auto;width:960px;position:relative;margin-top:18px;background-color:#777777;z-index:2">

    <asp:ContentPlaceHolder id="PlaceHolderMain" runat="server">
        </asp:ContentPlaceHolder>
</div>
    </div>
    <div style="color:#ffffff;font-size:0.75em;line-height:18px;position:relative">
        <div style="margin:10px">
            <span style="float:left">
                Footer text left
            </span>
            <span style="float:right">
                Footer text right
            </span>
        </div>
    </div>

</div>

</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:45:01.063

事实证明，失败的不是 z-index，而是梯度代码。我现在将它切换为纯色背景颜色，它按预期工作。我会看看我是否可以让渐变代码工作，否则我可能只需要创建渐变图像。

# ios - 使用拆分视图控制器时，是否可以仅通过 HMDI/TV 输出详细视图控制器视图？

> ID：13324304
> 
> 赞同：1
> 
> 时间：2012-11-10T17:27:40.857
> 
> 标签：ios, uisplitviewcontroller, hdmi, uiscreen

是否可以设置 UISplitViewController 仅将 DetailViewController 视图输出到 HDMI/TV 输出？这是我迄今为止没有成功的尝试：

```
if([[UIScreen screens]count] > 1){
    CGSize max;
    UIScreenMode *maxScreenMode;

    for(int i = 0; i < [[[[UIScreen screens] objectAtIndex:1] availableModes]count]; i++)
    {
        UIScreenMode *current = [[[[UIScreen screens]objectAtIndex:1]availableModes]objectAtIndex:i];
        if(current.size.width > max.width){
            max = current.size;
            maxScreenMode = current;
        }
    }

    UIScreen *external = [[UIScreen screens] objectAtIndex:1];
    external.currentMode = maxScreenMode;

    //set the screen of a new UIWindow to the external screen
    UIWindow *newwindow = [[UIWindow alloc] init];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *detailv = [storyboard instantiateViewControllerWithIdentifier:@"extern"];

    [newwindow addSubview:[detailv view]];
    newwindow.screen = external;

    [newwindow makeKeyAndVisible];
    [newwindow setHidden:NO];
} 
```

# c++ - SDL_GetPixel 指针问题

> ID：13324305
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:27:47.297
> 
> 标签：c++, pointers, sdl, getpixel

这是我的第一个问题：

**您在下面看到的这两个功能中的第一个在某种程度上可以正常工作：**

```
Uint32 AWSprite::get_pixelColor_location(SDL_Surface * surface, int x, int y) {
int bpp = surface->format->BytesPerPixel;
/* Here p is the address to the pixel we want to retrieve */
Uint8 *p = (Uint8 *)surface->pixels + y * surface->pitch + x * bpp;

switch (bpp) {
case 1:
    return *p;
case 2:
    return *(Uint16 *)p;
case 3:
    if (SDL_BYTEORDER == SDL_BIG_ENDIAN)
        return p[0] << 16 | p[1] << 8 | p[2];
    else
        return p[0] | p[1] << 8 | p[2] << 16;
case 4:
    return *(Uint32 *)p;
default:
    return 0;       
} 
```

}

```
void AWSprite::set_all_frame_image_actual_size() {
/* This function finds an entire rows that has transparency
   then stores the amount of rows to a Frame_image_absolute structure
*/
absolute_sprite = new Frame_image_absolute*[howManyFrames];
for (int f = 0; f < howManyFrames; f++) {
    SDL_LockSurface(frames[f]);
    int top_gap = 0; int bottom_gap = 0;
    int per_transparent_px_count = 1;
    for (int i = 0; i < frames[f]->h; i++) {
        int per_transparent_px_count = 1;
            if (this->get_pixelColor_location(frames[f], j, i) == transparentColour) per_transparent_px_count++;
            if (per_transparent_px_count >= frames[f]->w) {
                if (i < frames[f]->h / 2) {
                    per_transparent_px_count = 1;
                    top_gap++; 
                } else {
                    per_transparent_px_count = 1;
                    bottom_gap++;
                }
            }
        }
    }
    int realHeight = frames[f]->h - (top_gap + bottom_gap);
    absolute_sprite[f] = new Frame_image_absolute();
    absolute_sprite[f]->offset_y = top_gap;
    absolute_sprite[f]->height = realHeight;
} 
```

}

当我运行它时，我得到：SE Game.exe 中 0x00173746 处的未处理异常：0xC0000005：访问冲突读取位置 0x03acc0b8。

当我通过调试时，我发现它崩溃了：当迭代器变量 f == 31, i == 38, j = 139 并在 AWSprite::get_pixelColor_location() 处停止在 " return *(Uint32 *)p ;

我发现如果我再次运行它并逐行调试，那么我会在某个时候工作，有时它不会！所以我的意思是“当 f > 30, i, j 迭代器值时它随机崩溃”

到底是怎么回事...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:40:25.730

我还不能对这个问题发表评论，但这里有一些问题：

j 是从哪里来的？基于该`get_pixelColor_location`函数，我假设您正在迭代表面的宽度。您发布的代码中似乎缺少这部分。

您是否确认 i 和 j 在您的表面范围内？

此外，您似乎没有解锁表面。

在这里运行你的函数似乎可以正常工作，所以我怀疑你正在使用无效参数在缓冲区之外读取。

# ruby-on-rails - 如何在 Rails 日志中包含设计用户名（使用 graylog2）

> ID：13324309
> 
> 赞同：2
> 
> 时间：2012-11-10T17:28:00.747
> 
> 标签：ruby-on-rails, ruby, devise, graylog2

有没有办法将登录用户包含在 Rails 日志中？我正在使用 devise 和 graylog2，我认为后者与答案无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:09:37.073

Devise`current_user` [在控制器中提供了一个助手，](https://github.com/plataformatec/devise#controller-filters-and-helpers)可用于访问当前登录的用户。

假设用户模型具有`name`属性，您可以执行以下操作：

```
::Rails.logger.info "The currently logged-in user is #{current_user.name}" 
```

# php - 为什么 facebook iframe 应用程序加载时间过长？

> ID：13324312
> 
> 赞同：1
> 
> 时间：2012-11-10T17:28:27.780
> 
> 标签：php, facebook-graph-api

我的 fbapp 无法快速加载，这意味着加载应用程序需要时间。甚至我也使用 gzip 来减小文本大小并减小图像大小。然后加载也需要 10-12 秒。这是现场FB应用程序。

1.  我还优化了我的数据库。
2.  我还优化了我的 CSS 和 JavaScript 文件。
3.  为了减小图像大小，我使用[了 http://www.smushit.com/ysmush.it/](http://www.smushit.com/ysmush.it/)
4.  我正在使用图形 API 来创建 fbapp。

通过这样做可以减少时间，但加载我的 fbapp 也需要 10-12 秒。

应用链接 :: [http://apps.facebook.com/giftoramalive](http://apps.facebook.com/giftoramalive)

# linux - Linux。内核源代码中的 munlockall()

> ID：13324321
> 
> 赞同：0
> 
> 时间：2012-11-10T17:29:13.657
> 
> 标签：linux, linux-kernel

我在哪里可以找到 munlockall 的实现？它在“sys/mman.h”中定义，但我不知道它是在哪里实现的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:37:50.687

它在 mm/mlock.c 中：[http](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=mm/mlock.c;hb=HEAD#l368) ://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=mm/mlock.c;hb=HEAD#l368 .

如果你已经从 git 中检查了本地树，或者使用 kernel.org 上的提交搜索（树页面的右上角），你可以通过 grepping 本地树在内核源代码中找到东西。

# java - 需要编写一个 java 正则表达式来匹配带有 http 或 https 但不包含特定文件扩展名的 url

> ID：13324323
> 
> 赞同：1
> 
> 时间：2012-11-10T17:29:28.573
> 
> 标签：java, regex, expression, regex-negation

我需要创建一个 java 正则表达式，它将 URLS 与 http 或 https 匹配，但不应将 url 与特定文件扩展名匹配。

我可以使用以下表达式获取带有 http 或 https 的 url，但我无法完成第二部分，即消除具有某些扩展名的 url（例如：-js|css|jpg 等）。我想我需要使用否定，但是我不知道该怎么做。

`String regex = "\\s*(?i)(http|https)\\s*://\\s*((\"[^\"]*\"|'[^']*'|([^'\">\\s]+)))";`

请帮我修改这个正则表达式以满足这个要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:50:24.463

在 Java 中实现这一点的一种简单方法是使用`Pattern`类（来自`java.util.regex`）。要完成您的建议，您可以使用两个单独的正则表达式对象来检查 URL 的条件。例如（使用`regex`您问题中的字符串）：

```
Scanner in = new Scanner(System.in);
String input = in.nextLine();
Pattern one = Pattern.compile(regex);
Pattern two = Pattern.compile("([^\s]+(\.(?i)(js|css|jpg|etc))$)");
if(one.matcher(input).matches() && !two.matcher(input).matches()) 
    System.out.println("It matches!");
else System.out.println("Nope!"); 
```

简而言之，使用两个 Pattern 对象使您的代码更具可读性和易于管理，因为您正在考虑有关 URL 输入字符串的多个方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:35:00.287

您需要一个锚点来向后看 - 请参阅[正则表达式以匹配](https://stackoverflow.com/questions/11290370/regex-to-match-url-not-for-certain-file-types)应该为您提供所需表达式的 url。您当前拥有的正则表达式将匹配格式错误的 url 和不允许的字符。这是一个检查表达式的好网站：[http ://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

# php - ftp_nlist 限制

> ID：13324330
> 
> 赞同：1
> 
> 时间：2012-11-10T17:30:11.317
> 
> 标签：php, linux, ftp, debian

我正在使用这样的 ftp_nlist -function：

```
 $list = @ftp_nlist($conn, $dir); 
```

但这仅在目录中的文件少于 50000 个时才有效。我使用的 FTP 服务器是 vsftpd/debian。是否有任何选项可以更改此 50000 项限制？php/apache/kernel .conf 什么的？

# c++ - 数组成员声明和初始化

> ID：13324334
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:30:37.353
> 
> 标签：c++, gcc

我想做`vertices`一个数组`Vector`。但我不知道如何声明和初始化它。我试过这个，但它抱怨：

```
class Mesh {
public:
    Vector  vertices[];
    int     verticesCount;
    Mesh();
    virtual ~Mesh();
};

Mesh::Mesh() {
    verticesCount = 4;

    vertices = new Vector[verticesCount]; // error: expected primary-expression before ']' token
    vertices[0] = new Vector(0, 0, 0);
    vertices[1] = new Vector(1, 0, 0);
    vertices[2] = new Vector(1, 1, 0);
    vertices[3] = new Vector(0, 1, 0);
}

Mesh::~Mesh() {
   delete vertices;
} 
```

**编辑**

尝试纠正，应用您的提示，我达到了这一点：

```
Vector*     vertices;
//...
vertices = new Vector[verticesCount];
vertices[0] = Vector(0, 0, 0);
vertices[1] = Vector(1, 0, 0);
vertices[2] = Vector(1, 1, 0);
vertices[3] = Vector(0, 1, 0);
//...
delete[] vertices; 
```

它奏效了。但是可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:36:49.253

C++ 中的数组成员必须具有编译时固定大小。

如果要在运行时指定数组的大小，则必须使用指针，或者最好使用`std::vector<Vector>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:37:31.903

您声明`vertices`为 的未指定数组`Vector`，然后尝试为数组中的每个条目分配内存。

首先 C++ 不支持空数组（如果我没记错的话），并且数组的数据类型不是指针，`Vector`这意味着您不能使用`new`表达式。

如果要使用动态向量数组，请`std::vector`改用：

```
std::vector<Vector> vertices; 
```

在构造函数中：

```
vertices.push_back(Vector(0, 0, 0));
// etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:37:55.617

更正：

```
Vector*  vertices;
[..]
delete[] vertices; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T17:38:28.547

您正在声明一个未定义大小的数组，编译器也可能会通过发出*字段类型不完整*错误来抱怨这一点。

数组不是指针。由于数组包含在类的内存占用中，因此在编译时必须知道大小。

您可以：

*   `std::array`如果大小是先验已知的，则使用
*   使用 a`std::vector`具有可变大小的数组
*   使用指针`Vector *vertices`（或者`Vector **vertices`因为您正在实例化单个顶点）

# python - 在 Xcode for Mac 中编译和链接 Python 的 C 扩展

> ID：13324336
> 
> 赞同：4
> 
> 时间：2012-11-10T17:30:39.003
> 
> 标签：python, c, xcode, static

我正在尝试在 Mac 中编译一个简单的 C 扩展以与 Python 一起使用，并且在命令行中一切正常。下面介绍了有效的代码和 gcc 命令。现在我正在尝试在 Xcode 4.5 (Mac OS10.8) 中构建相同的扩展，并且我尝试了 dylib 或静态库的几个目标设置，但我总是得到一个无法在 Python 中加载的文件，显示错误：

```
./myModule.so: unknown file type, first eight bytes: 0x21 0x3C 0x61 0x72 0x63 0x68 0x3E 0x0A 
```

我的最终目标是在 XCode 中使用 C/C++ 扩展的源代码创建一个工作区，并拥有在 Xcode 中调用它的 python 脚本。所以，如果我需要调试 C/C++ 扩展，我有 XCode 调试功能。我知道 XCode 不会调试到 Python 脚本，但它可以运行它，对吗？

```
gcc -shared -arch i386 -arch x86_64 -L/usr/lib/python2.7 -framework python -I/usr/include/python2.7 -o myModule.so myModule.c -v

#include <Python.h>

/*
 * Function to be called from Python
 */
static PyObject* py_myFunction(PyObject* self, PyObject* args)
{
    char *s = "Hello from C!";
    return Py_BuildValue("s", s);
}   

/*
 * Another function to be called from Python
 */
static PyObject* py_myOtherFunction(PyObject* self, PyObject* args)
{
    double x, y;
    PyArg_ParseTuple(args, "dd", &x, &y);
    return Py_BuildValue("d", x*y);
}

/*
 * Bind Python function names to our C functions
 */
static PyMethodDef myModule_methods[] = {
    {"myFunction", py_myFunction, METH_VARARGS},
    {"myOtherFunction", py_myOtherFunction, METH_VARARGS},
    {NULL, NULL}
};

/*
 * Python calls this to let us initialize our module
 */
void initmyModule()
{
    (void) Py_InitModule("myModule", myModule_methods);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:32:12.897

[这家伙似乎也有同样的问题](http://forums.macrumors.com/showpost.php?p=9880088&postcount=5)。

> 我已经弄清楚了问题所在。即使我更改了 xcode 中的设置以指定输出类型“动态库”或“捆绑”，xcode 也忽略了该设置。启动一个新的 BSD 动态库项目解决了我看到的问题。谢谢您的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T07:08:18.527

I've had success debugging unit-tested C extensions in XCode 4.6 using setuptools, virtualenv, unittest and GDB as the debugger.

I use virtualenvwrapper to create a virtualenv for the project and then set ~/.virtualenvs/module_name/bin/python as the executable to debug.

The single argument to pass to the virtualenv python interpreter in the Run configuration is the path to your test.py.

I then set GDB rather than None as the debugger launching it automatically.

The last step is to pass "setup.py install" as the arguments to your build tool (~/.virtualenvs/module_name/bin/python) on your test target's External Build Tool Configuration pane. The virtualenv provides a fairly simple way for you to install the shared object for your C extension into the test script python interpreter's library path without actually installing it into the global site-packages for your host.

With this setup I can call the extension code from a python script (the ultimate aim) and still debug the C code using XCode's GUI debug support.

If I haven't described this clearly please let me know and I'll share an example project.

# php - 匹配一个包裹的模式

> ID：13324340
> 
> 赞同：2
> 
> 时间：2012-11-10T17:31:06.000
> 
> 标签：php, regex

什么正则表达式模式可用于查找带有括号对中的以下点的单词。

> 作为。df.kj hlasfa ( asd.las **kdfh.** **)** dfs adk jfh。a (sd.kf) jhd (dsk ***fh.*** ) dskfdf asdf dfs lkjh asdfdsfjkhlkjh ( **asdf.** )as fadf asf

 *****所需结果以粗体显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:02:25.920

您可以使用[前瞻](http://www.regular-expressions.info/lookaround.html)，它断言在下一个右括号之前没有左括号：

```
preg_match_all('/[a-zA-Z]+\.(?![a-zA-Z])(?=[^()]*\))/', $input, $matches); 
```

您将在 中找到四个匹配项`$matches`。

第一次否定前瞻消除了 HamZa 在评论中提到的情况。第二个（正）前瞻尝试在下一个左括号之前找到一个右括号。

这里有一个警告。一旦你有嵌套的括号，这将开始崩溃。`some(text. (here))`不匹配`text.`。嵌套模式（可以通过使用括号出现）通常超出了正则表达式的范围，尽管一些引擎可以部分处理它们。如果你是这种情况，你最好手动遍历字符串并计算括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:48:14.730

许多选项之一是：

```
\b[a-zA-Z]+[.](?=[ )])(?=[^(]*[)]) 
```*****

# parsing - ANTLR 表达式列表冲突

> ID：13324343
> 
> 赞同：2
> 
> 时间：2012-11-10T17:31:31.793
> 
> 标签：parsing, antlr, conflict, infix-notation, postfix-notation

这是简单嵌套表达式的基本结构...

```
infix   :   prefix (INFIX_OP^ prefix)*;

prefix  :   postfix | (PREFIX_OP postfix) -> ^(PREFIX_OP postfix);

postfix :   INT (POSTFIX_OP^)?;

POSTFIX_OP : '!';
INFIX_OP :  '+';
PREFIX_OP : '-';
INT :   '0'..'9'*; 
```

如果我想创建这些表达式的列表，我可以使用以下...

```
list:   infix (',' infix)*; 
```

这里我们使用“，”作为分隔符。

我希望能够构建一个没有任何分隔符的表达式列表。

因此，如果我有字符串`4 5 2+3 1 6`，我希望能够将其解释为`(4) (5) ^(+ 2 3) (1) (6)`

问题是两者都`4`具有`2+3`相同的第一个符号（INT），所以我有冲突。我试图弄清楚如何解决这个问题。

**编辑**

我几乎想通了，只是在为某种条件想出正确的重写时遇到了麻烦……

```
expr: (a=atom -> $a)
(op='+' b=atom-> {$a.text != "+" && $b.text != "+"}? ^($op $expr $b) // infix
-> {$b.text != "+"}? // HAVING TROUBLE COMING UP WITH THIS CORRECT REWRITE!
-> $expr $op $b)*; // simple list

atom: INT | '+';
INT : '0'..'9'+; 
```

这将解析`1+2+3++4+5+`为`^(+ ^(+ 1 2) 3) (+) (+) ^(+ 4 5) (+)`，这就是我想要的。

现在我正在尝试完成我的重写规则，以便`++1+2`将其解析为`(+) (+) ^(+ 1 2)`. 总的来说，我想要一个标记列表并找到所有中缀表达式，并将其余的保留为列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:33:52.080

`INT`你的规则有问题：

```
INT : '0'..'9'*; 
```

匹配一个空字符串。它应该始终匹配至少 1 个字符：

```
INT : '0'..'9'+; 
```

除此之外，它似乎工作得很好。

给定语法：

```
grammar T;

options {
  output=AST;
}

tokens {
  LIST;
}

parse      : list EOF -> list;
list       : infix+ -> ^(LIST infix+);
infix      : prefix (INFIX_OP^ prefix)*;
prefix     : postfix -> postfix
           | PREFIX_OP postfix -> ^(PREFIX_OP postfix)
           ;
postfix    : INT (POSTFIX_OP^)?;

POSTFIX_OP : '!';
INFIX_OP   : '+';
PREFIX_OP  : '-';
INT        : '0'..'9'+;
SPACE      : ' ' {skip();}; 
```

它解析输入：

```
4 5 2+3 1 6 
```

进入以下AST：

![在此处输入图像描述](../Images/1f75ea7738cf71097db77e94160657f2.png)

## 编辑

引入既可用于后置表达式也可用于中缀表达式的运算符会使您变得`list`模棱两可（嗯，在我下面的版本中，就是... :)）。因此，我将在此演示中保留逗号：

```
grammar T;

options {
  output=AST;
}

tokens {
  LIST;
  P_ADD;
}

parse        : list EOF -> list;
list         : expr (',' expr)* -> ^(LIST expr+);
expr         : postfix_expr;
postfix_expr : (infix_expr -> infix_expr) (ADD -> ^(P_ADD infix_expr))?;
infix_expr   : atom ((ADD | SUB)^ atom)*;
atom         : INT;

ADD   : '+';
SUB   : '-';
INT   : '0'..'9'+;
SPACE : ' ' {skip();}; 
```

在上面的语法中，`+`作为中缀运算符优先于后缀版本，正如您在解析输入时看到的那样`2+5+`：

![在此处输入图像描述](../Images/127e1a42f448cb6ef1c78990929fe147.png)

# mysql - MySQL/PHP广播消息系统

> ID：13324346
> 
> 赞同：0
> 
> 时间：2012-11-10T17:31:49.970
> 
> 标签：mysql, count, message, broadcast

我正在开发一个消息传递系统，其中一个方面是让我向所有用户广播消息。我没有将消息插入到每个用户的表中，而是有一个包含消息的单个副本的表和另一个跟踪用户读取/删除的表。

**消息表**

```
message_id (primary,auto)  
dt  
message 
```

**Messages_Status 表**

```
message_id (int,11)  
user_id (int,10,indexed)  
user_read (tint,1)  
user_delete (tint,1)  
--> an index on (message_id,user_id) 
```

我正在尝试获取已登录用户的未读消息计数。如果messages_status 表中没有该特定消息和用户的记录（用户尚未阅读），或者如果该消息和用户有user_read=0 的记录，则也计算在内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:35:32.907

```
select count(m.message_id)
messages m
left outer join messages_status ms on ms.message_id = m.message_id
where user_id = 123
and (ms.message_id is null or ms.user_read = 0) 
```

# c - 如何在主函数中初始化结构

> ID：13324347
> 
> 赞同：3
> 
> 时间：2012-11-10T17:31:50.267
> 
> 标签：c, struct, initialization, pgm

我正在尝试编写简单的 pgm 文件来读取 C 程序。我必须创建简单的结构：

```
typedef struct pgmImage {
   int R; //rows
   int C; //collumns
   int G; //grey scale
   int **pix;  // array of pixels
}Image; 
```

现在我必须初始化空图像结构。我需要一个基于 *.pgm 文件在其他函数中设置所有变量。我一直在“无法读取内存”和“使用的未初始化局部变量 x”。我试图简单地做：

> 图像*x=0；

但是当读取函数尝试设置 R、C、G 值时程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:34:37.700

```
Image x = {0} 
```

它是图像元素的静态内存分配`x`

或者

```
Image *x = calloc(1,(sizeof(Image)); 
```

它是图像的动态内存分配，`x`是指向已分配内存的指针

将`calloc`分配emory并将所有内存初始化为0，因此结构中的指针将系统地初始化为NULL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:37:48.203

如果你想要一个指向 Image 的指针，你必须像这样初始化。

```
Image *x = NULL; 
```

像这样访问图像 (x) 阵营：

```
x-> C = 0;
x-> ...
x->pix = NULL; 
```

但首先您需要为图像分配内存。

```
x = (Image*) malloc(sizeof(Image)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T17:34:20.537

如果要使用指针，则必须分配足够的内存来保存结构。但是，您正在尝试取消引用空指针：这会导致未定义的行为。

```
#include <stdlib.h>
Image *x = malloc(sizeof *x); 
```

然后你可以初始化成员。注意：`calloc`在这里使用是不可移植的，因为不能保证空指针具有全位为零的内存表示。

无论如何，这里似乎不需要使用指针。

```
#include <stddef.h>
Image x = { 0, 0, 0, NULL }; 
```

# android - Android：如何使用Roboto特殊字符？

> ID：13324351
> 
> 赞同：3
> 
> 时间：2012-11-10T17:31:55.177
> 
> 标签：android, fonts, textview, special-characters

我不知道如何在我的 Textview 中使用一些 Roboto 字符。我试图将字符表中的粘贴字符复制到eclipse（Roboto也在我的ubuntu中），它适用于某些人，但适用于所有人......

希腊语 'k' 有效，但希腊语 'h' 不打印任何东西，.. 在 android 项目中使用所有特殊字符的好方法是什么？

![字符表](../Images/066ea795f33f847301bedf4e305efb65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:32:17.307

您可能需要使用这些字符的 unicode 值而不是从某处复制粘贴它们......

例如：获取一个字符的 unicode 值（例如使用 LibreOffice），并在您的 strings.xml 中使用它并带有 '\u' 前缀：

```
<string name="special_characters">\u03bb \u03ba \u03bc \u03be - special greek characters</string> 
```

看我的截图（使用 Roboto-Black.ttf） ![Roboto-Black 和希腊字符示例](../Images/5dd451f4ad2ceab23e9f7e90bd8c33a5.png)

# postgresql - Heroku PostgreSQL 连接被对等方重置

> ID：13324352
> 
> 赞同：4
> 
> 时间：2012-11-10T17:31:59.650
> 
> 标签：postgresql, heroku

我们正在使用 PostgreSQL Crane 计划，并且得到了很多这样的日志
`app postgres - - [5-1] ... LOG: could not receive data from client: Connection reset by peer`

我们正在使用大约 50 个测功机。
PostgreSQL 与一堆测功机的连接用完了吗？
有人可以帮我解释一下这个案例吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:03:02.450

从我发现错误的原因是客户端在会话结束时没有断开连接，或者没有创建新连接。

解决问题的新连接： [使用 Resque 的 Heroku 上的 Postgres 错误](https://stackoverflow.com/questions/9961044/postgres-error-on-heroku-with-resque)

显式断开连接解决问题： [https](https://github.com/resque/resque/issues/367) ://github.com/resque/resque/issues/367 （评论#2）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-21T10:19:44.960

有一个 Heroku 常见问题解答条目：[Understanding Heroku Postgres Log Statements and Common Errors: could not receive data from client: Connection reset by peer](https://devcenter.heroku.com/articles/postgres-logs-errors#log-could-not-receive-data-from-client-connection-reset-by-peer)。

> 虽然这个日志是从 postgres 发出的，但错误的原因与数据库本身无关。您的应用程序在连接到 postgres 时发生崩溃，并且没有清理其与数据库的连接。Postgres 注意到客户端（您的应用程序）在没有正确结束连接的情况下消失了，并记录了这样的消息。
> 
> 如果您没有看到应用程序的回溯，您可能需要确保您实际上正在登录到标准输出（而不是文件）并且您已同步标准输出。

# c# - 插入不创建 ID？

> ID：13324354
> 
> 赞同：8
> 
> 时间：2012-11-10T17:32:03.270
> 
> 标签：c#, mongodb, mongodb-.net-driver

我用 getter 和 setter 创建了一个简单的对象：

```
public class MemberCanonical : IMemberCanonical
{
    public ObjectId Id { get; set; }
    public String username { get; set; }
    public String email { get; set; }
    public String status { get; set; }
    public IEnumerable<string> roles { get; set; }
} 
```

现在我想在数据库中插入一个新成员：

```
try
{
    memberObj.username = username;
    memberObj.email = email;
    memberObj.status = "active";
    // memberObj.Id = new ObjectId().ToString();
    this.membershipcollection.Insert(memberObj, SafeMode.True);
    return true;
}
catch(Exception ex)
{
    return false;   
} 
```

我希望插入创建一个唯一的 _id (Id)，但这并没有发生。插入后，当我查看 _id 字段时，我得到“0000000 ....”

为了让 Mongo 在插入时生成自己的 _id，我需要做什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T22:22:23.397

只需用属性标记您的 Id`[BsonId]`属性，生成的 id 值就会出现！

```
public class MemberCanonical : IMemberCanonical
{
    [BsonId]
    public ObjectId Id { get; set; } 
```

* * *

```
this.membershipcollection.Insert(memberObj, SafeMode.True);
var idYouLookingFor = memberObj.Id; 
```

或者@Kobi建议的替代方式：“使用_id字段名称而不是Id”也应该有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-26T00:51:47.710

我使用`[BsonId]`属性和构造函数的组合来创建 Id 值。

例如

```
public class Something {

    [BsonId]
    public string Id { get; set; }

    public Something() {
        this.Id = ObjectId.GenerateNewId().ToString();
    }

} 
```

这样我总是有一个对象的填充 Id 字段。从数据库中检索实体时，Id 字段将被数据库中的实际 Id 值覆盖。赢赢。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-25T23:39:06.853

使用`[BsonId]`您想要使用的任何独特属性。您甚至可以忽略`ObjectID`类型并创建自己的类型。

例如：

```
[BsonId]
public string studentid{get; set;} 
```

# php - CodeIgniter - 嵌套 foreach - 按年份显示数据

> ID：13324360
> 
> 赞同：0
> 
> 时间：2012-11-10T17:32:59.400
> 
> 标签：php, codeigniter, loops, foreach, nested-loops

我正在编写一些必须使用年份作为暴露值的脚本。此信息保存在数据库中，我必须将其取出，但这不是问题。我必须创建将年份作为主要值公开的列表。我正在编写代码，但总是出错。

控制器：

```
$data['dbdata'] = $this->DBdata->serve_val('pc_year');
foreach ($data['dbdata']->result() as $data)
{
    $data['sheet'] = $this->DBdata->serve_val('pc');
    foreach ($data['sheet']->result() as $sht)
    {
        $data['vdata'][$data->idyr][$sht->idpc]['name'] = $sht->name;
        $data['vdata'][$data->idyr][$sht->idpc]['properties'] = $sht->properties;
    }
} 
```

看法：

```
foreach ($dbdata->result() as $data)
{
    echo $data->year."<br>";
    foreach ($sheet->result() as $sht)
    {
        echo $vdata[$data->idyr][$sht->idpc]['name']."<br>";
        echo $vdata[$data->idyr][$sht->idpc]['properties']."<br>";
        echo "<br>";
    }
} 
```

错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined offset: 1 
```

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T03:55:21.513

您需要更改控制器，因为您无法重新分配变量名称

控制器：

```
$data['dbdata'] = $this->DBdata->serve_val('pc_year');
foreach ($data['dbdata']->result() as $result)
{
    $result['sheet'] = $this->DBdata->serve_val('pc');
    foreach ($result['sheet']->result() as $sht)
    {
        $data['vdata'][$result->idyr][$sht->idpc]['name'] = $sht->name;
        $data['vdata'][$result->idyr][$sht->idpc]['properties'] = $sht->properties;
    }
} 
```

看法：

```
foreach ($dbdata->result() as $data)
{
    echo $data->year."<br>";
    foreach ($sheet->result() as $sht)
    {
        echo $vdata[$data->idyr][$sht->idpc]['name']."<br>";
        echo $vdata[$data->idyr][$sht->idpc]['properties']."<br>";
        echo "<br>";
    }
} 
```

# objective-c - 在计算器中创建 % 功能

> ID：13324361
> 
> 赞同：-3
> 
> 时间：2012-11-10T17:33:00.280
> 
> 标签：objective-c, ios, calculator

我在 xcode 中做一个简单的计算器。+、/、-、1/x、√等基本函数我都做了。现在我正在尝试执行 % 功能。不知道如何开始这个..需要一些指导...

编辑：

```
5/8% = 62.5
5x8%=0.4
5+8% = 5.4
5-8% = 4.6 
```

它应该能够在它之前处理不同的功能..这就是为什么我很困惑......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:38:49.137

如果您的意思是[**模**](http://en.wikipedia.org/wiki/Modulo_operation)运算符：

对于整数只需使用

```
int result = a % b; 
```

对于浮点数，使用[fmod](http://www.cplusplus.com/reference/clibrary/cmath/fmod/) (math.h)

```
float result = fmod(a, b); 
```

如果您的意思是**百分比**运算符，您必须记住，取 X 百分比等于将其乘以`X/100`：

```
float result = a * X / 100.f;  // result will be X percent of a. 
```

**编辑**（回答您编辑的问题）：

这不是百分比运算符在我知道的任何计算器上的工作方式。百分号只是除以 100。所以在你的例子中：

```
5/8% = 5/8/100 = 0.00625
5x8% = 5x8/100 = 0.4
5+8% = 5+8/100 = 5.08
5-8% = 5-8/100 = 4.92 
```

我认为您的意思`5+8%`实际上是`5+5x8%`or `5+5x8/100`。

# r - R中的滚动回归xts对象

> ID：13324362
> 
> 赞同：2
> 
> 时间：2012-11-10T17:33:03.973
> 
> 标签：r, time-series, regression, xts, zoo

我正在尝试对 xts 对象执行滚动 100 天回归，并返回所有日期的斜率系数的 t 统计量。我有一个 xts 对象，价格：

```
> tail(prices)
             DBC   EEM   EFA    GLD   HYG    IEF   IWM   IYR    MDY    TLT
2012-11-02 27.14 41.60 53.69 162.60 92.41 107.62 81.19 64.50 179.99 122.26
2012-11-05 27.37 41.80 53.56 163.23 92.26 107.88 81.73 64.02 181.10 122.95
2012-11-06 27.86 42.13 54.07 166.30 92.40 107.39 82.34 64.16 182.69 121.79
2012-11-07 27.34 41.44 53.26 166.49 91.85 108.29 80.34 63.84 178.90 124.00
2012-11-08 27.38 40.92 52.78 167.99 91.55 108.77 79.21 63.19 176.37 125.84
2012-11-09 27.60 41.00 52.80 167.82 91.39 108.78 79.38 62.98 176.80 125.98 
```

还有一个函数从最后 100 个价格的回归中生成 t 值，并以与价格相同的列名作为 xts 对象返回：

```
compute.regression <- function(x) 
{
  last100 = last(x,100)
  fit <- lm (last100~time(last100))
  tval <- unlist(lapply( coef(summary(fit)), "[" ,"(Intercept)"  ,"t value"))
  tval.mat <-as.matrix(tval)
  tval.mat2 <- matrix(c(tval.mat), nrow=1, ncol=10)
  new2 <- xts(tval.mat2, Sys.Date())
  colnames(new2) <- tickers
  return(new2)
}

> compute.regression(prices)
                 IWM       EFA       HYG       EEM       IYR      IEF       TLT            DBC       GLD      MDY
2012-11-10 -7.642781 -14.33474 -16.28911 -14.52982 -15.85337 5.732489 -8.026495 -1.960392 -11.82474 8.686045 
```

但是，此函数仅返回当前日期的 t 值。我需要一个 xts 对象，其中包含价格 xts 对象中包含的所有日期的 t 值。我正在尝试使用`rollapply`但没有得到任何地方：

```
fit.r <- function (x) 
{
      hard <- lm (x~time(x))
      return(hard)
}

compute.r <- function(x)
{  
  l100.ra <- rollapply(x, 100, fit.r, fill=NA, align='right')
  tval <- unlist(lapply( coef(summary(l100.ra)), "[" ,"(Intercept)"  ,"t value"))
  tval.mat <-as.matrix(tval)
  tval.mat2 <- matrix(c(tval.mat), nrow=1, ncol=10)
  new2 <- xts(tval.mat2, Sys.Date())
  colnames(new2) <- tickers
  return(new2)
} 
```

但这会返回错误：

> compute.r(prices) Zoo(rval, index(x)[i]) 中的错误：“x”：尝试定义无效的 zoo 对象

我知道问题出在 l100.ra 行，但无法解决。有什么想法吗？

**编辑 1**

下面提供的功能：

```
x <- prices
f <- function (x) {
  res <- coef(summary(lm(x ~ time(x)))
  sapply(res, "[" ,"time(x)"  ,"t value")
}
r <- rollapplyr(x, 100, f, by.column=FALSE) 
```

效果很好，但将日期/时间格式更改为以下格式：

```
> last(r,5)
           Response MDY Response TLT
1352160000     15.38380    -7.913764
1352246400     14.81888    -7.957261
1352332800     13.96203    -7.666699
1352419200     13.28624    -7.299532
1352678400     12.75266    -7.100558 
```

我一直在阅读时间戳，但不明白为什么会发生转换。另外，当我尝试时：

```
last(index(r),5)
[1] "2012-11-06 GMT" "2012-11-07 GMT" "2012-11-08 GMT" "2012-11-09 GMT" "2012-11-12 GMT" 
```

`POSIXct`它以格式显示时间戳。这里有什么线索吗？我需要转换回上面价格的格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:08:08.453

您的`rollapply`调用应该调用一个返回 t 值的函数。现在它返回一个`lm`对象，该对象不是动物园对象的有效值`coredata`。

使您的函数仅返回 t 值，它将起作用。

```
library(quantmod)
getSymbols("SPY;IEF")
x <- merge(Cl(SPY),Cl(IEF))
f <- function (x) {
  res <- coef(summary(lm(x ~ time(x))))
  sapply(res, "[" ,"(Intercept)"  ,"t value")
}
r <- rollapplyr(x, 100, f, by.column=FALSE) 
```

# marshalling - CoreDispatcher WinRT 是否等同于 win8 应用商店应用程序中的 WPF Dispatcher？

> ID：13324363
> 
> 赞同：0
> 
> 时间：2012-11-10T17:33:21.837
> 
> 标签：marshalling, observablecollection, winrt-xaml, windows-store-apps

在使用 WPF 实现生产者消费者模式时，`ObservableCollection`我使用[了本示例](http://codeblitz.wordpress.com/2009/05/27/handling-cross-threading-in-observablecollection/)中的封送处理技术，以确保在工作线程上创建项目时在 UI 线程上分派集合的事件。

在 winrt 中，我可以看到这样的封送处理`Dispatcher`方式：

```
public void AddItem<T>(ObservableCollection<T> oc, T item)
{
    if (Dispatcher.CheckAccess())
    {
        oc.Add(item);
    }
    else
    {
        Dispatcher.Invoke(new Action(t => oc.Add(t)), DispatcherPriority.DataBind, item);
    }
} 
```

可以切换成`CoreDispatcher`这样：

```
public async void AddItem<T>(ObservableCollection<T> oc, T item)
{
    if (Dispatcher.HasThreadAccess)
    {
        oc.Add(item);
    }
    else
    {
        Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => { oc.Add(item); });
    }
} 
```

*   那是适当的使用`CoreDispatcher`吗？
*   对于 winrt 中的基本并发生产者/消费者模式，是否有更好的方法来执行此操作？
*   `Dispatcher`没有与我需要`CoreDispatcher`从 UI 向下传递到编组代码相同的静态访问器方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T21:47:14.920

这是我所做的：

```
public Screen(IPreConfigurationService preConfigurationService, INavigationService navigationService)
        {
            _preConfigurationService = preConfigurationService;
            _navigationService = navigationService;
            if (!IsInDesignMode)
                _currentDispatcher = CoreWindow.GetForCurrentThread().Dispatcher;
        }

        public string UserMessage
        {
            get { return _userMessage; }
            set
            {
                _userMessage = value;
                SafelyRaisePropertyChanged("UserMessage");
            }
        }
   protected void SafelyRaisePropertyChanged(string message)
        {
            if (!IsInDesignMode)
                _currentDispatcher.RunAsync(CoreDispatcherPriority.Normal, () => RaisePropertyChanged(message));
        }
        protected void ExecuteOnDispatcher(Action action)
        {
            _currentDispatcher.RunAsync(CoreDispatcherPriority.Normal, action.Invoke);
        }

        protected void SendUserMessage(string message)
        {
            UserMessage = message;
            _currentDispatcher.RunAsync(CoreDispatcherPriority.Normal, () => AlertOnError(message));
        } 
```

# android - 如何在android中滑动视图时禁用onclick侦听器？

> ID：13324366
> 
> 赞同：4
> 
> 时间：2012-11-10T17:33:34.533
> 
> 标签：android

我有一个可以滑动到另一个页面的视图。它有一个 onClick 监听器，它显示一个对话框。

问题是，刷卡会触发这两个动作（即显示下一页和对话框）。

滑动时如何禁用 onClick 侦听器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T17:36:23.247

听起来您想使用 GestureDetector （[以及](https://stackoverflow.com/q/13324250/1267661)），[SimpleOnGestureListener](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)`onSingleTapConfirmed()`用于单击事件和滑动`onFling()`事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-30T06:39:34.287

`onClick`放置时和`swipelayout`滑动`swipelayout.getSurfaceView()`时仅触发滑动动作。请看下面的代码：

```
holder.swipeLayout.getSurfaceView().setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        //Do your onClick stuff here..
    }
} 
```

# delphi - 如何将 C 联合转换为 Delphi？

> ID：13324368
> 
> 赞同：11
> 
> 时间：2012-11-10T17:33:36.153
> 
> 标签：delphi

```
typedef struct _FILE_OBJECTID_INFORMATION {
    LONGLONG FileReference;
    UCHAR ObjectId[16];
    union {
        struct {
            UCHAR BirthVolumeId[16];
            UCHAR BirthObjectId[16];
            UCHAR DomainId[16];
        } DUMMYSTRUCTNAME;
        UCHAR ExtendedInfo[48];
    } DUMMYUNIONNAME;
} FILE_OBJECTID_INFORMATION, *PFILE_OBJECTID_INFORMATION; 
```

如何将这样的联合翻译成德尔福？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-10T17:46:43.453

C 的 Pascal 等效项`union`称为[变体记录](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Variant_Parts_in_Records)。

> 一个记录类型可以有一个变体部分，它看起来像一个**case** 语句。变体部分必须跟在记录声明中的其他字段之后。
> 
> 要声明具有变体部分的记录类型，请使用以下语法：
> 
> ```
> type recordTypeName = record
>   fieldList1: type1;
>    ...
>   fieldListn: typen;
> case tag: ordinalType of
>   constantList1: (variant1);
>    ...
>   constantListn: (variantn);
> end; 
> ```
> 
> 声明的第一部分——直到保留字**大小写**——与标准记录类型的相同。声明的其余部分——从**大小写**到可选的最后分号——称为变体部分。在变体部分，
> 
> *   *tag*是可选的，可以是任何有效的标识符。如果省略*tag*，则也省略其后的冒号 (:)。
> *   *ordinalType*表示序数类型。
> *   每个*constantList*是一个常量，表示类型为*ordinalType*的值，或以逗号分隔的此类常量列表。*在组合的constantLists*中不能多次表示任何值。
> *   每个*变体*都是一个以分号分隔的声明列表，类似于*fieldList：*记录类型主要部分中的类型构造。也就是说，变体具有以下形式：
>     
>     
>     
>     字段列表1：类型1；... 字段列表：类型；
>     
>     
> 
> 其中每个*fieldList*是一个有效的标识符或以逗号分隔的标识符列表，每个类型表示一个类型，最后的分号是可选的。类型不能是长字符串、动态数组、变体（即Variant类型）或接口，也不能是包含长字符串、动态数组、变体或接口的结构化类型；但它们可以是指向这些类型的指针。
> 
> 具有变体部分的记录在语法上很复杂，但在语义上却看似简单。记录的变体部分包含多个变体，它们共享内存中的相同空间。您可以随时读取或写入任何变体的任何字段；但是，如果您先写入一个变体中的字段，然后再写入另一个变体中的字段，则可能会覆盖您自己的数据。该标签（如果有的话）作为记录的非变体部分中的一个额外字段（类型为*ordinalType ）。*

* * *

至于其余的，这很常规：`LONGLONG`是一个 64 位整数，并且`UCHAR`是`unsigned char`, 或`AnsiChar`在 Delphi 中。

```
type
  TFileObjectIDInformation = record
    FileReference: Int64;
    ObjectID: array[0..15] of AnsiChar;
    case Integer of
    0:
      (
        BirthVolumeId: array[0..15] of AnsiChar;
        BirthObjectId: array[0..15] of AnsiChar;
        DomainId: array[0..15] of AnsiChar;
      );
    1:
      (ExtendedInfo: array[0..47] of AnsiChar);
  end; 
```

可能`Byte`比 更合适`AnsiChar`。当然，这有点难说，因为 C 与 Pascal 不同，没有单独的类型`Byte`和`AnsiChar`。但是这些数组在我看来好像它们会被当作文本来阅读，所以我的猜测是这`AnsiChar`会更合适。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T17:50:45.540

*类似*的结构可以在[JEDI API Lib](http://sourceforge.net/projects/jedi-apilib/)中找到：

```
 _FILE_OBJECTID_BUFFER = record

    //
    //  This is the portion of the object id that is indexed.
    //

    ObjectId: array [0..15] of BYTE;

    //
    //  This portion of the object id is not indexed, it's just
    //  some metadata for the user's benefit.
    //

    case Integer of
      0: (
        BirthVolumeId: array [0..15] of BYTE;
        BirthObjectId: array [0..15] of BYTE;
        DomainId: array [0..15] of BYTE);
      1: (
        ExtendedInfo: array [0..47] of BYTE);
  end; 
```

# android - 下载 Android Support v4 Jar Revision 9 (!)

> ID：13324372
> 
> 赞同：1
> 
> 时间：2012-11-10T17:33:59.587
> 
> 标签：android, android-support-library

修订版 10 是最新的 Android 支持库，但它有问题，所以我不能使用它。在哪里可以下载修订版 9？

我需要修订版 9 中的 .jar，因为在修订版 10 上，Android 3 和 3.1 上的通知被窃听。我“破解”了 Rev10 以使其工作，但 ViewPagerIndicator 不喜欢它并且无法使用此 .jar 工作（我的项目不再编译）。现在我搜索 rev9 jar。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:44:06.627

For those who are searching, here is a download [link to a fixed r10](http://code.google.com/p/yuku-android-util/source/browse/ActionBarSherlock4/libs/android-support-v4.jar) and [a r9](https://github.com/Leandros/AndroidSupportLibrary/blob/master/android-support-v4_v9.jar) (I know, I missuse GitHub as download server).

# testing - XSL xsl:when-test, 前缀

> ID：13324373
> 
> 赞同：0
> 
> 时间：2012-11-10T17:34:03.877
> 
> 标签：testing

我正在处理我的硬件 xml/xsl。我真的是这个领域的新手。这是我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"               
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:pre="/home/sbtge/Documents/1.SCHOOL/Webove_technologie/vypracovanie"
            exclude-result-prefixes="pre">
<xsl:output method="html"/>

<xsl:template match="pre:document">
    <html>
                <link rel="stylesheet" href="nutri.css" type="text/css"/>
        <head>
            <title> Nutričné hodnoty </title>

        </head>
        <body>
                            <h1> Nutričné hodnoty </h1>
            <div>   
                                <table>
                                <tr>
                <th>Name</th>
                                    <th>Kategória <br/> (g) </th>
                                    <th>Cukry <br/> (g) </th>
                                    <th>Tuky <br/> (g) </th>
                                    <th>Bielkoviny <br/> (g) </th>
                                    <th>Energia <br/> (kJ) </th>
                                </tr>
                <xsl:apply-templates select="pre:food"/>
                                </table>
            </div>
        </body>
    </html>
</xsl:template>

<xsl:template match="pre:food">     
                                <tr>
                                    <td><xsl:value-of select="pre:name"/></td>  

                                    <xsl:choose>

                                        <xsl:when test="pre:category='Zelenina'">
                                           <div class="Zelenina">
                                                 <td><xsl:value-of select="pre:category"/></td> 
                                           </div>
                                        </xsl:when>
                                        <xsl:when test="pre:category='Ovocie'">
                                            <div class="Ovocie">
                                                 <td><xsl:value-of select="pre:category"/></td>
                                            </div>
                                        </xsl:when>
                                        <xsl:when test="pre:category='Ryža'">
                                            <div class="Ryza">
                                                 <td><xsl:value-of select="pre:category"/></td>
                                            </div>
                                        </xsl:when>
                                        <xsl:when test="pre:category='Mäso'">
                                            <div class="Maso">
                                                 <td><xsl:value-of select="pre:category"/></td>
                                            </div>
                                        </xsl:when>
                                    </xsl:choose>
                                    <xsl:apply-templates select="pre:values"/>
                                </tr>

</xsl:template>

<xsl:template match="pre:values">
        <td><xsl:value-of select="pre:sacharides"/> g</td>
        <td><xsl:value-of select="pre:fat"/> g</td>
        <td><xsl:value-of select="pre:proteins"/> g</td>
        <td><xsl:value-of select="pre:energy"/> g</td>
    </xsl:template> 
```

一切正常，但 xsl:choose 被忽略。我认为这是因为糟糕的“测试”声明。我应该如何纠正它？非常感谢。我尝试了所有类似的方法：@pre:category、pre:@category、@category。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:29:58.397

xml 文件中有错误定义的属性。XSL 应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"               
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:ns= "/home/sbtge/Documents/1.SCHOOL/Webove_technologie/vypracovanie"
            exclude-result-prefixes="ns">

<xsl:output method="html"/>

<xsl:template match="ns:document">
    <html>
                <link rel="stylesheet" href="nutri.css" type="text/css"/>
        <head>
            <title> Nutričné hodnoty </title>

        </head>
        <body>
                            <h1> Nutričné hodnoty </h1>
            <div>   
                                <table>
                                <tr>
                <th>Name</th>
                                    <th>Kategória <br/> (g) </th>
                                    <th>Cukry <br/> (g) </th>
                                    <th>Tuky <br/> (g) </th>
                                    <th>Bielkoviny <br/> (g) </th>
                                    <th>Energia <br/> (kJ) </th>
                                </tr>
                <xsl:apply-templates select="ns:food"/>

                                </table>
            </div>

        </body>
    </html>
</xsl:template>

   <!-- <xsl:template match="document">
        sdafsa
        <xsl:apply-templates select="food"/>
    </xsl:template> -->

<xsl:template match="ns:food">  

                                <tr>
                                    <td><xsl:value-of select="ns:name"/></td>  
                                    <xsl:choose>    
                                        <xsl:when test="@category='Zelenina'">
                                          <div class="Zelenina">
                                                <xsl:value-of select="@category"/>
                                          </div> 
                                        </xsl:when>
                                        <xsl:when test="@category='Ovocie'">
                                            <div class="Ovocie">
                                                 <xsl:value-of select="@category"/>
                                            </div>
                                        </xsl:when>
                                        <xsl:when test="@category='Ryža'">
                                            <div class="Ryza">
                                                 <xsl:value-of select="@category"/>                                           </div>
                                        </xsl:when>
                                        <xsl:when test="@category='Mäso'">
                                            <div class="Maso">
                                                 <xsl:value-of select="@category"/>
                                            </div>
                                        </xsl:when>
                                    </xsl:choose>

                                    <xsl:apply-templates select="ns:values"/>
                                </tr>

</xsl:template>

<xsl:template match="ns:values">
        <td><xsl:value-of select="ns:sacharides"/> g</td>
        <td><xsl:value-of select="ns:fat"/> g</td>
        <td><xsl:value-of select="ns:proteins"/> g</td>
        <td><xsl:value-of select="ns:energy"/> Kj</td>
    </xsl:template> 
```

每个人都应该帮助自己：D

# c++ - 全阵列替代品

> ID：13324374
> 
> 赞同：1
> 
> 时间：2012-11-10T17:34:13.380
> 
> 标签：c++, performance, assembly

当我尝试创建自己的经典数组替代品时，我看到，在反汇编代码中添加了一条指令：`mov edx,dword ptr [myarray]`. 为什么要添加此附加说明？

我想使用我的替代功能，但又不想失去性能！如何解决这个问题？每个处理器周期对于此应用程序都很重要。

例如：

```
for (unsigned i = 0; i < 10; ++i)
{
    array1[i] = i;
    array2[i] = 10 - i;
} 
```

汇编（经典的 int 数组）：

```
mov edx, dword ptr [ebp-480h]  
mov eax, dword ptr [ebp-480h]  
mov dword ptr array1[edx*4], eax  

mov ecx, 10
sub ecx, dword ptr [ebp-480h]
mov edx, dword ptr [ebp-480h]
mov dword ptr array2[edx*4], ecx 
```

大会（我的班级）：

```
mov edx,dword ptr [array1]
mov eax,dword ptr [ebp-43Ch]
mov ecx,dword ptr [ebp-43Ch]
mov dword ptr [edx+eax*4], ecx

mov edx, 10
sub edx, dword ptr [ebp-43Ch]
mov eax, dword ptr [array2]
mov ecx, dword ptr [ebp-43Ch]
mov dword ptr [eax+ecx*4], edx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:37:11.577

对于当今的处理器来说，一条指令不会降低性能。我不会担心，而是建议您阅读 Coding Horror[关于微优化的文章](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)。

但是，该指令只是将第一个索引 (myarray+0) 移动到`edx`以便可以使用它。

# windows - 使用 Qemu 在 Windows 上运行 Chromium OS

> ID：13324376
> 
> 赞同：2
> 
> 时间：2012-11-10T17:34:34.437
> 
> 标签：windows, qemu, chromium-os

我正在尝试使用 Qemu 在 Windows 7 机器上启动 Chromium OS 的构建，但遇到了一些问题。我已经按照网站上的说明构建了操作系统，并将输出文件 ( `chromiumos_qemu_image.bin`) 与 Qemu 放在同一目录中。我修改了运行 Linux 的批处理文件以运行 chromiumos，如下所示：

```
REM Start qemu on windows.
@ECHO OFF

REM SDL_VIDEODRIVER=directx is faster than windib. But keyboard cannot work well.
SET SDL_VIDEODRIVER=windib

REM SDL_AUDIODRIVER=waveout or dsound can be used. Only if QEMU_AUDIO_DRV=sdl.
SET SDL_AUDIODRIVER=dsound

REM QEMU_AUDIO_DRV=dsound or fmod or sdl or none can be used. See qemu -audio-help.
SET QEMU_AUDIO_DRV=dsound

REM QEMU_AUDIO_LOG_TO_MONITOR=1 displays log messages in QEMU monitor.
SET QEMU_AUDIO_LOG_TO_MONITOR=0

REM PCI-based PC(default): -M pc 
REM ISA-based PC         : -M isapc
REM -M isapc is added for NE2000 ISA card.

qemu.exe -L . -m 128 -hda chromiumos_qemu_image.bin -soundhw sb16,es1370 -localtime -M pc 
```

当我运行它时，会弹出一个 GUI，似乎正在尝试运行操作系统，但它只是保持黑色。我已经在我的机器上启用了 intel-vt，但除此之外我不确定还能做什么。

# sql - 将 ER 转换为 SQL DDL

> ID：13324379
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:34:54.923
> 
> 标签：sql, ddl, entity-relationship

当我将 ER 转换为 SQL DDL 时，我是否需要仅为实体或关系创建表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T02:41:06.323

是的，您需要为实体和关系创建表。另外，请记住，您必须包含外键并链接您的表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:45:56.333

您需要为每个实体创建一个 CREATE TABLE 语句。

您的关系船通常实现为这些表之间的 FOREIGN KEY CONSTRAINTS 或 FOREIGN KEY INDEXES。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T09:40:51.747

这取决于你有什么样的关系。如果它是多对多关系，那么它必须为关系本身提供一个单独的表。您可以通过任何方式在谷歌 ER 图上搜索到关系数据库，或者查看作者 Hoffer 的现代数据库管理系统的关系模型章节的教科书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T13:27:11.833

每个实体变成一个表，每个多对多关系变成一个表。

也将子列（FK 列）添加到（子）表中。当您在例如 DeZign for Databases 中创建 N:M（多对多）关系时，您会看到一个交集表是自动创建的。自动添加的列首先是两个表的主键列。您可以在此视频中看到： [http ://www.datanamic.com/support/vd-dez001.html](http://www.datanamic.com/support/vd-dez001.html)

# jsf - 单一表单中的 primefaces 手风琴面板 - 仅在打开的选项卡上验证

> ID：13324380
> 
> 赞同：3
> 
> 时间：2012-11-10T17:35:00.893
> 
> 标签：jsf, primefaces, validation, accordion

我已经检查过了，但没有找到关于如何使用单个表单提交手风琴的明确示例。我发现的问题是当我只想处理（验证）已打开选项卡的字段时。

我的页面结构如下：

```
<h:form>
    <p:accordionPanel activeIndex="#{bean.selectedTab}">
        <p:ajax event="tabChange" listener="#{bean.tabChangeListener}"/>

        <p:tab title="Tab1" id="t1">
            <p:inputText id="reqField1" required="true"/>
        </p:tab>
        <p:tab title="Tab2" id="t2">
            <p:inputText id="reqField2" required="true"/>
        </p:tab>
   </p:accordionPanel>

   <p:commandButton update="list" immediate="true" actionListener="#{bean.addRecord}"/>                     
</h:form> 
```

方法：

```
@SessionScoped
public class Bean{
    public void tabChangeListener(AjaxBehaviorEvent evt){
        AccordionPanel panel = (AccordionPanel) evt.getComponent();
        // getLoadedTabs() returns an empty list
        String currentlyLoadedTabId = panel.getLoadedTabs().get(this.selectedTab).getClientId(); 

    }
} 
```

无论如何要在 p:commandButton 标记中将当前打开的选项卡的 id 指定为 process 属性的一部分？

***更新*** 当 Tab1 打开时，在提交时，我只想验证 reqField1 而不是 reqField2。反之亦然，当 Tab2 打开时，我只想验证 reqField2 而不是 reqField1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:14:44.203

尝试这个。

1.  将手风琴面板的 绑定`activeIndex`到支持 bean 的 int 属性

    ```
    activeIndex="#{myBean.selectedTab}" 
    ```

2.  使用 bound获取`id`当前选定选项卡的`activeIndex`。要在您的 中执行此操作，请`actionListener`在手风琴面板上找到一个句柄

    编辑：由于您`actionListener`已设置为`immediate`，`activeIndex`并且 `selectedTab`将需要通过 ajax 进行更新。将以下内容添加`<p:ajax/>`到您的手风琴面板

    ```
    <p:ajax event="tabChange" listener="#{bean.tabChangeListener}" /> 
    ```

    在您的支持 bean 中，您现在将拥有

    ```
    public void (AjaxBehaviorEvent evt){
     AccordionPanel panel = (AccordionPanel) evt.getComponent();
     String currentlyLoadedTabId = panel.getLoadedTabs().get(this.selectedTab).getClientId(); 

    } 
    ```

3.  使用`id`从上面 2 中获得的内容，您可以将其包含在 JSF 列表中，以便在服务器端使用 ajax 重新呈现。在同一个动作监听器方法中：

    ```
     FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add(currentlyLoadedTabId); 
    ```

或者，您可以考虑在每个选项卡中放置一个命令按钮，并在每个选项卡中放置一个表单。这样，每个命令按钮只处理它自己的父窗体

# oracle - Spring JdbcTemplate 查询参数类型错误：无效的列类型

> ID：13324382
> 
> 赞同：1
> 
> 时间：2012-11-10T17:35:29.880
> 
> 标签：oracle, spring, jdbc, spring-jdbc

我以这种方式使用 Spring Jdbc 模板：

```
public List<User> getUsersForGrid(int rows, int page, String sidx,
        String sord) {

    int fromRecord = 0;
    int toRecord = 0;
    toRecord = page * rows;
    fromRecord = (page - 1) * rows;

    StringBuilder sqlB = new StringBuilder();
    sqlB.append("SELECT user_id, username ");
    sqlB.append("FROM users ");
    sqlB.append("WHERE :fromRecord <= rownum AND rownum <= :toRecord ");
    sqlB.append("ORDER BY %s %s ");

    String sql = String.format(sqlB.toString(), sidx, sord);

    MapSqlParameterSource params = new MapSqlParameterSource();
    params.addValue("fromRecord", fromRecord);
    params.addValue("toRecord", toRecord);

    List<Map<String, Object>> rsRows = this.jdbcTemplate.queryForList(sql
            .toString(),params);

    List<User> users = new ArrayList<User>();
    for (Map<String, Object> row : rsRows) {
        BigDecimal id = (BigDecimal) row.get("user_id");
        String username = (String) row.get("username");

        User user = new User(id.intValue(), username);
        users.add(user);
    }

    return users;
} 
```

并得到 `java.sql.SQLException: Invalid column type`

sidx 是 nate 列（例如“user_id”） sord 是 asc/desc

不传递参数时（只执行

```
 sql.append("SELECT user_id, username ");
        sql.append("FROM users "); 
```

） 一切都好。

更新：适用于：

```
sqlB.append("WHERE ? <= rownum AND rownum <= ? "); 
```

和

```
this.jdbcTemplate.queryForList(sql.toString(),new Object[]{fromRecord, toRecord}); 
```

似乎是 Spring MapSqlParameterSource 和命名参数的问题。我使用 Spring 3.1.3

数据库是 Oracle 11.2

```
describe users;
Name                           Null     Type                                                                                                                                                                                          
------------------------------ -------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
USER_ID                        NOT NULL NUMBER                                                                                                                                                                                        
USERNAME                       NOT NULL VARCHAR2(40)                                                                                                                                                                                  
PASSWORD                       NOT NULL VARCHAR2(20)                                                                                                                                                                                  
ENABLED                        NOT NULL NUMBER 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:18:40.280

我认为问题出在您的`order by`条款上，您正在尝试动态更改您的`order by`条款。试试看嘛

```
 StringBuilder sql = new StringBuilder();
    sql.append("SELECT user_id, username ");
    sql.append("FROM users ");
    sql.append("WHERE :fromRecord <= rownum AND rownum <= :toRecord ");
    sql.append("ORDER BY user_id asc ");

    MapSqlParameterSource params = new MapSqlParameterSource();
    params.addValue("fromRecord", fromRecord);
    params.addValue("toRecord", toRecord); 
```

如果上述方法有效，那么不要使用`MapSqlParameterSource`for 更改`order by`子句，而是使用类似的东西

```
 StringBuilder sql = new StringBuilder();
    sql.append("SELECT user_id, username ");
    sql.append("FROM users ");
    sql.append("WHERE :fromRecord <= rownum AND rownum <= :toRecord ");
    sql.append("ORDER BY %s %s ");

    //Format the sql string accordingly

MapSqlParameterSource params = new MapSqlParameterSource();
params.addValue("fromRecord", fromRecord, Types.INTEGER);
params.addValue("toRecord", toRecord, Types.INTEGER); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:46:54.110

尝试这个

```
List<Map> rows = getJdbcTemplate().queryForList(sql);
    for (Map row : rows) {
           BigDecimal id = (BigDecimal) row.get("user_id");
            String username = (String) row.get("username");
            User user = new User(id.intValue(), username);
            users.add(user);
} 
```

好的试试

```
MapSqlParameterSource namedParameters = new MapSqlParameterSource();
namedParameters.addValue("fromRecord", fromRecord);
namedParameters.addValue("toRecord", toRecord);
namedParameters.addValue("sidx", sidx);
namedParameters.addValue("sord", sord);
return this.getNamedParameterJdbcTemplate().query(query,
            namedParameters, new UserElementMapper());

public class UserMapper implements RowMapper<User> {

public EmailElement mapRow(ResultSet rs, int rowNum) throws SQLException {
    User user = new User();
    emailElement.setID(rs.getInt("user_id"));
    emailElement.setUsernameo(rs.getString("username"));
    return user;
} 
```

}

# java - 使用 Libgdx 的动画背景

> ID：13324390
> 
> 赞同：6
> 
> 时间：2012-11-10T17:36:06.103
> 
> 标签：java, android, performance, opengl-es, libgdx

我正在为一个 android 游戏创建一个 UI 系统，该系统将有一个大的（高达 4096x4096）背景区域，其中菜单可以放置在该屏幕内的任何位置，并且当需要不同的菜单时，相机会飞到该位置。我不想拥有一个大的静态图像，而是希望能够稍微对其进行动画处理。我想知道的是如何在不滞后设备的情况下有效地做到这一点。这些是我到目前为止提出的方法，但也许有更好的方法..

**1）**有3个独立的4096x4096静态图层作为背景，1是天空，1是地形，1是云和树木之类的东西。每一层都被放置在彼此的顶部，在 Z 空间中略有不同，以便在相机移动时产生一点视差效果。

**2）**有一个大的静止背景图像，在其顶部有一个图层，上面有云、树木和其他应该动画的东西的特定精灵。我认为这可能是最有效的路线，因为我可以选择不对不在视野中的部分进行动画处理，但它也会限制可重用性，因为每个不同的对象都必须手动放置在空间中。我的目标是能够简单地更改资产并能够拥有一个全新的游戏。

**3)**有 1 个大背景层，其中包含几帧，几乎像视频一样播放。我觉得这将是性能上最差的（加载几个 4096x4096 帧并每秒绘制 30 次不同的帧），但会给我的场景正是我想要的直接从 After Effects 中取出的场景。我怀疑这个甚至是可行的，不仅仅是因为绘图而且 android 设备上的存储空间仅用于菜单 UI 不允许几个 6MB 帧。

这些中的任何一个都朝着正确的方向发展吗？我已经看到过一些类似的问题，但没有一个与我需要的足够接近（不是由瓷砖制成的大型移动背景）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:45:15.763

至于您的问题被标记为 Android，我会推荐第二种解决方案。

主要原因是解决方案 #1 和 #3 涉及加载大量 4096x4096 纹理。快速计算：三个具有这种分辨率的 32 位纹理将使用至少 200MB 的显存。这意味着您可以立即丢弃很多安卓设备。

另一方面，解决方案 #2 将只涉及两个大纹理：一个大的静止背景图像，以及一个包含特定云、树精灵的纹理图集……这个解决方案确实更利于内存，并且会导致相同的结果审美输出。

TL;DR：这 3 种解决方案效果很好，但只有 #2 适合嵌入式设备

# php - PHP 中的错误，内爆 - [内部]，行？

> ID：13324391
> 
> 赞同：1
> 
> 时间：2012-11-10T17:36:13.013
> 
> 标签：php, cakephp-2.1

好吧，让我从头开始，我是一个新手，正在研究一个用 cakephp 1.2 编码并试图让它工作的发票示例，但我使用的是 Cakephp 2.1 和 php 5.?? 这意味着一些代码已从原始代码更改，我正在尝试找出它们，这个错误已经查看了 3 天但没有得到任何地方，这就是我发送求救信号的原因:)。

# 私有方法

```
function __lists ()
{
    $users = $this->Invoice->User->find('list', array('fields'=> array('User.id', 'User.username')));
    $statuses = $this->Invoice->Status->find('list');
    $clients = $this->Invoice->Client->find('list');
    /*$units = $this->Invoice->Item->Unit->find('list');*/
    $this->set('units', $this->Invoice->Item->Unit->find('list'));      
    $categories = $this->Invoice->Category->find('list');
    $this->set(compact('users', 'statuses', 'clients', 'categories','units'));
}

# Tallys up invoice and alters $this->data
# adding total, subTotal and taxTotal
function __tallyUpInvoice()
{
    $this->__itemTotals();
  $subTotal = $this->__subtotal($this->data['Item']);
    $taxTotal = $this->__tax($subTotal, $this->data['Invoice']['taxRate']);
    $this->request->data['Invoice']['total'] = $subTotal + $taxTotal;
    $this->request->data['Invoice']['subTotal'] = $subTotal;
    $this->request->data['Invoice']['taxTotal'] = $taxTotal;
    return true;
}

# returns line item qty times price
function __lineItemTotal($qty, $price)
{
    $arrayjoin = array_merge((array)$qty, (array)$price);
    return array_product($arrayjoin);
    settype($arrayjoin, "integer");
    print_r($arrayjoin);

    /*return array($qty) * array($price);
    /*return array_product($qty) + array_product($price); */
}

# Alters $this->data['Item']['total'] with total of line item.
function __itemTotals()
{
    $itemsCount = isset($this->data['Item']) ? count($this->data['Item']) : 0;
  for ($i=0; $i < $itemsCount; $i++)
  {
    $this->request->data['Item'][$i]['total'] = $this->__lineItemTotal($this->request->data['Item'][$i]['qty'], $this->request->data['Item'][$i]['price']);

        // collect unit name from unit model
        $unit = $this->Invoice->Item->Unit->find('first', array('conditions' => array('Unit.id =' => $this->request->data['Item'][$i]['unit_id']), 'fields' => array('Unit.name')));
        $this->request->data['Item'][$i]['name'] = $unit['Unit']['name'];
  }
}

# returns sub total price
function __subTotal($items)
{
    $price = 0.0;

    foreach ($items as $item) 
    {
       $price += $this->__lineItemTotal($item['qty'], $item['price']);
    }
  return $price;
}

 # returns total tax amount
function __tax($subTotal, $taxRate)
{
$taxTotal = round(($taxRate * 0.01 * $subTotal) * 1000) / 1000;
    return round($taxTotal * 100) / 100; 
}   

# attaches Invoice.id to $this->data['Item']
function __attachInvoiceIdToItems($id)
{
    $itemsCount = isset($this->request->data['Item']) ? count($this->request-    >data['Item']) : 0;
  for ($i=0; $i < $itemsCount; $i++)
  {
    $this->request->data['Item'][$i]['invoice_id'] = $id;
  }
} 
```

上面的代码片段与我正在处理的代码部分有关，从头开始。 **这是原始代码**

```
# returns line item qty times price
function __lineItemTotal($qty, $price)
{

    return $qty * $price;
} 
```

阅读此处后，我收到一个错误操作数错误，这是我试图用一个字符串进行乘法和数组运算，或者这就是我的想法，所以我将其更改为下面的函数

```
# returns line item qty times price
function __lineItemTotal($qty, $price)
{

$arrayjoin = array_merge((array)$qty, (array)$price);
    return array_product($arrayjoin);
    settype($arrayjoin, "integer");
    print_r($arrayjoin);

} 
```

Now I am getting another error when there is a decimal number selected as a price, below is the notice code and context.

```
Notice (8): Array to string conversion [CORE/Cake/Model/Datasource/DboSource.php, line 1006]
 implode - [internal], line ??
DboSource::create() - CORE/Cake/Model/Datasource/DboSource.php, line 1006
Model::save() - CORE/Cake/Model/Model.php, line 1730
Model::saveMany() - CORE/Cake/Model/Model.php, line 2089
Model::saveAll() - CORE/Cake/Model/Model.php, line 2026
InvoicesController::add() - APP/Controller/InvoicesController.php, line 128
ReflectionMethod::invokeArgs() - [internal], line ??
Controller::invokeAction() - CORE/Cake/Controller/Controller.php, line 485
Dispatcher::_invoke() - CORE/Cake/Routing/Dispatcher.php, line 186
Dispatcher::dispatch() - CORE/Cake/Routing/Dispatcher.php, line 161
[main] - APP/webroot/index.php, line 92 
```

代码：

```
 'table' => $this->fullTableName($model),
        'fields' => implode(', ', $fieldInsert),
        'values' => implode(', ', $valueInsert) 
```

语境：

```
$model = object(Item) {
displayField => 'name'
belongsTo => array(
    'Invoice' => array(
        [maximum depth reached]

    ),
    'Unit' => array(
        [maximum depth reached]
    )
)
useDbConfig => 'default'
useTable => 'items'
id => false
data => array(
    'Item' => array(
        [maximum depth reached]
    )
)
schemaName => 'invoicr'
table => 'items'
primaryKey => 'id'
validate => array()
validationErrors => array()
validationDomain => null
name => 'Item'
alias => 'Item'
tableToModel => array(
    'items' => 'Item',
    'units' => 'Unit'
)
cacheQueries => false
hasOne => array()
hasMany => array()
hasAndBelongsToMany => array()
actsAs => null
Behaviors => object(BehaviorCollection) {}
whitelist => array()
cacheSources => true
findQueryType => null
recursive => (int) 1
order => null
virtualFields => array()
__backAssociation => array()
__backInnerAssociation => array()
__backOriginalAssociation => array()
__backContainableAssociation => array()
findMethods => array(
    'all' => true,
    'first' => true,
    'count' => true,
    'neighbors' => true,
    'list' => true,
    'threaded' => true
)
Unit => object(Unit) {}
tablePrefix => ''

$fields = array(
(int) 0 => 'unit_id',
(int) 1 => 'qty',
(int) 2 => 'description',
(int) 3 => 'price',
(int) 4 => 'total',
(int) 5 => 'name',
(int) 6 => 'invoice_id'
)

$values = array(
(int) 0 => '1',
(int) 1 => array(
    (int) 0 => '55.00'
),
(int) 2 => array(
    (int) 0 => ' testing ="testing "'
),
(int) 3 => array(
    (int) 0 => '10.01'
),
(int) 4 => (float) 550.55,
(int) 5 => 'Service',
(int) 6 => '49'
)
$id = null
$count = (int) 7
$i = (int) 7
$valueInsert = array(
(int) 0 => '1',
(int) 1 => array(
    (int) 0 => '55.00'
),
(int) 2 => array(
    (int) 0 => '' testing =\"testing \"''
),
(int) 3 => array(
    (int) 0 => '10.01'
),
(int) 4 => '550.55',
(int) 5 => ''Service'',
(int) 6 => '49'
)
$fieldInsert = array(
(int) 0 => '`unit_id`',
(int) 1 => '`qty`',
(int) 2 => '`description`',
(int) 3 => '`price`',
(int) 4 => '`total`',
(int) 5 => '`name`',
(int) 6 => '`invoice_id`'
 )

 } 
```

看了几个星期后，我发现保存它 mysql 正在尝试保存一个数组，那个设置在哪里？

```
 Code:
 $valueInsert = array(
 (int) 0 => '1',
 (int) 1 => array(
 (int) 0 => '55.00'
 ),
 (int) 2 => array(
 (int) 0 => '' testing =\"testing \"''
  ),
   (int) 3 => array(
 (int) 0 => '10.01'
 ),
 (int) 4 => '550.55',
 (int) 5 => ''Service'',
 (int) 6 => '49'
 ) 
```

谢谢大家希望可以解决这个问题。

干杯

萨基

# objective-c - NSUserNotification 在每个通知的基础上更改通知图像/徽标

> ID：13324393
> 
> 赞同：2
> 
> 时间：2012-11-10T17:36:33.153
> 
> 标签：objective-c, cocoa, osx-mountain-lion, nsusernotification

当安排一个 NSUserNotification 传送到 NSUserNotificationCenter 时，有没有办法在每个通知的基础上设置与通知一起显示的图像/徽标？

我希望为不同类型的通知显示一个稍微不同的徽标。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:03:04.937

对于山狮来说，它不存在。如果您愿意，可以在此处请求[https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/wa/signIn](https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/wa/signIn)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T00:22:42.340

您可以通过这种方式轻松地在 OSX 小牛中设置图像。

在 AppDelegate.h 文件中添加以下行：

```
@property (copy) NSImage *contentImage NS_AVAILABLE(10_9, NA); 
```

在 AppDelegate.m

```
notification.contentImage = [NSImage imageNamed:@"test.jpg"]; 
```

# visual-studio-2012 - SkyDrive 和 Visual Studio 2012 同步问题

> ID：13324398
> 
> 赞同：4
> 
> 时间：2012-11-10T17:36:53.293
> 
> 标签：visual-studio-2012, onedrive

我正在尝试将我的所有项目都托管在云上，但名称相互同步时遇到了问题。如果我编辑一个文件，它不知道。为什么它不推送 SkyDrive 更新？

如果 SkyDrive 和 VS 有替代品（免费），请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:51:33.510

如果您是项目的所有者，我建议您创建 Bitbucket 帐户。除非您拥有超过 3 个开发人员，否则您可以免费存储无限的私有存储库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:04:37.617

在过去的几年里，我一直在使用[DropBox来保存我的项目，而且我从来没有遇到过任何问题。](https://www.dropbox.com/)哎呀，如果您还需要一个 SVN 存储库，您可以在其上设置 TortoiseSVN 并将[Dropbox 用作存储库](http://viralpatel.net/blogs/dropbox-svn-subversion-repository/)。当然，他们只免费为您提供 2GB 的存储空间（可以通过推荐增加）。我在那里有大约 16 个网站和项目，以及其他文档，但我没有使用我所拥有的 10%（约 3.2GB）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T22:31:40.080

您还可以将代码保存在托管在云上的源代码控制中。我一直在使用免费的[在线 TFS](http://tfs.visualstudio.com/)，它也支持 Git。它与 Visual Studio 2012 无缝协作。

# windows - 试图为 Windows 商店应用程序调用 EnumFontFamilies(...) 说它是未定义的。这是为什么？有没有其他选择？

> ID：13324399
> 
> 赞同：0
> 
> 时间：2012-11-10T17:37:09.877
> 
> 标签：windows, winapi, windows-8, visual-studio-2012, windows-store-apps

我正在尝试列出 Surface 上安装的字体。但是，即使在 include 之后，我也无法调用 EnumFontFamilies。这是为什么？我怎么能，如果我不能，我能做些什么来实现类似的功能。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:58:18.230

从[开发中心论坛上的一个帖子](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/720419d2-9254-4b89-a32f-08345d5260c6)来看，您似乎可以通过 C++/DirectX 作为 WinRT 组件来执行此操作（[此处的代码](http://msdn.microsoft.com/en-us/library/dd756582%28v=VS.85%29.aspx)将是一个开始）。

或在 GitHub 上查看 Christophe Wille 的[WinRT 片段项目](https://github.com/christophwille/winrt-snippets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:04:09.500

EnumFontFamilies() 是一个 winapi 函数。 您可以在商店应用程序中使用的其中很少，当然不是这个*。*从技术上讲，您可以破解阻止您使用该功能的宏，但您将无法通过商店验证。

您将在[Windows.Globalization.Fonts](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.fonts.aspx)命名空间中找到与字体相关的方法，但不是您要查找的方法。注意命名空间名称，WinRT 不再忽略机器上可用和可用的字体与用户使用的语言有很大关系的事实。或者更确切地说，该语言的书面文本中使用的字形。对于生活在亚洲的数十亿人来说，随意选择字体并不适用。

# php - PHP + AJAX - 到目前为止传递当前的 $_GET 变量

> ID：13324406
> 
> 赞同：0
> 
> 时间：2012-11-10T17:37:37.147
> 
> 标签：php, ajax

我有一个页面，用户可以在其中为某些选项填写 $_GET 数据。我想使用 AJAX 将这些 $_GET 变量传递给 .php 脚本。但我的问题是如何在不刷新页面的情况下传递他们迄今为止填写的那些 $_GET 变量？

到目前为止，这是我的代码。

```
$.ajax({
type: "GET",
url: "serverside script to process on data",
data:{name:youwant}, // Here is where I want to take what the user has filled out so 
                     // far, and place it here all without refreshing the page
success: function(data){
     alert("return here if success")

}
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:47:06.903

我不知道你的代码，但你可以有一个**表单**，但不是提交它，而是将一个**onsubmit**方法放到一个 javascript 函数中。在该函数中，您收集所有变量并通过 ajax 传递它。

例子：`<form name="form1" method="get" onSubmit="return send()">`

```
<script>
function send() {
 $.ajax(...);

return false;

}
</script> 
```

您可以使用[seralize 函数](http://api.jquery.com/serialize/)发送**$.ajax 数据**字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:54:31.467

首先，将此任务分解为小任务：

1) 在 JavaScript 中获取/处理变量

2) 将它们发送到 PHP

3）解析/处理那些

4) 根据结果发送响应回 JavaScript

5）处理响应并向用户显示消息

看一下这个例子，假设加载了 jquery.js。假设我们要发送我们拥有的输入值 - 电子邮件和密码。

```
<script type="text/javascript">

  $("#Send").click(function(){

     $.ajax({

         type : "GET", 
         //Look carefully:
         data : {
           // it'll be PHP vars       // This is JS vars
           email                :   $("#email").val(),
           password             :   $("#password").val()
         },

         success : function(respondFromPHP){

              alert(respondFromPHP);
         }
      });

  });

</script>

<input type="text" id="email" />
<input type="password" id="password" />

<br />
<button id="Send">Send to php</button> 
```

在您的 php 脚本中，只需处理您获得的变量，如下所示：

```
<?php

print_r($_GET); // will print smth like Array("email" => "foo", "password" => "bar")

// Then create function so that you can simplify handling of the vars.
// Like this:
function validate_password($password){}
function validate_email($email){} 
```

# ruby - 无论我如何构建它们，我的 DataMapper 模型都会出现同样的错误

> ID：13324411
> 
> 赞同：3
> 
> 时间：2012-11-10T17:37:54.117
> 
> 标签：ruby, datamapper

无论我在 DataMapper 模型中使用什么列/类型/关系，我总是会遇到相同的致命错误：

```
undefined method `include?' for nil:NilClass 
```

示例模型：

```
class Book
  include DataMapper::Resource

  property :id, Serial
  property :name, String
end 
```

即使使用这个简单的模型，我也会得到那个奇怪的错误。

最新的数据映射器，重新安装以确保它没有以某种方式损坏。红宝石 1.9.3 mysql 5

Sequel 在相同的环境下运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:40:21.150

你`DataMapper.finalize`在定义你的模型后打电话了吗？

尝试：

```
class Book
  include DataMapper::Resource

  property :id, Serial
  property :name, String
end

DataMapper.finalize # this is required on any scenario 
```

官方文档： [http ://datamapper.org/getting-started.html](http://datamapper.org/getting-started.html)

请参阅底部的**完成模型**

# php - 如何将此 javascript 代码插入 php 块以作为块运行（在 Drupal 7 中）？

> ID：13324414
> 
> 赞同：0
> 
> 时间：2012-11-10T17:38:32.717
> 
> 标签：php, javascript, drupal, drupal-blocks

如何将此 javascript 代码插入 php 块？我想在 php 块中运行这个 javascript。

```
<script src="http://www.example.com/index.php?section=serve&id=1&output=js</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:41:21.430

它应该是这样的：

`<script src="http://www.example.com/index.php?section=serve&id=1&output=js" language="javascript" type="text/javascript"></script>`

无论您是在使用 php 还是其他任何东西都没有关系。事实上，只要浏览器看到这个标签，它就会从`"src"`url 加载脚本文件并执行文件中的所有内容。因此，当您想在 html 文档中加载脚本时，请放置此标签。

希望它可以帮助干杯

# ruby-on-rails-3 - Rails Link_to 图像标签不是从数据库中检索图像

> ID：13324417
> 
> 赞同：2
> 
> 时间：2012-11-10T17:38:35.083
> 
> 标签：ruby-on-rails-3

我是 Rails 的新手（和一般的编码），所以我有一个关于从数据库中检索图像的快速问题

运行轨道 3.2.8

我在数据库中有产品、代码、描述、价格和 product_image 的列表，产品图像在数据库中存储为 123.jpg，图像本身存储在 app/assets/images 文件夹中

在我看来，我有以下代码

```
 <div class="center_content">

<div class="center_title_bar">Latest Products</div>

            <% @camera_catalogues.each do |camera_catalogue| %>

    <div class="prod_box">
        <div class="top_prod_box"></div>
        <div class="center_prod_box">            
             <div class="product_title"><a href="details.html"><%= camera_catalogue.model_description %></a></div>
             <div class="product_img"><a href="details.html"><%= link_to (image_tag camera_catalogue.product_image),camera_catalogue %></a></div>
             <div class="prod_price"><span class="reduce">350$</span> <span class="price"><%=number_to_currency(camera_catalogue.price, :unit =>"&euro;")%> </span></div>                        
        </div>
        <div class="bottom_prod_box"></div>             
        <div class="prod_details_tab">
        <a href="#" title="header=[Add to cart] body=[&nbsp;] fade=[on]"><img src="assest/cart.gif" alt="" title="" border="0" class="left_bt" /></a>
        <a href="#" title="header=[Specials] body=[&nbsp;] fade=[on]"><img src="assest/favs.gif" alt="" title="" border="0" class="left_bt" /></a>
        <a href="#" title="header=[Gifts] body=[&nbsp;] fade=[on]"><img src="assets/favorites.gif" alt="" title="" border="0" class="left_bt" /></a>           
        <a href="details.html" class="prod_details">details</a>            
        </div>                     
    </div> 
```

一切都显示正确，除了图像没有从数据库中检索到这一行

```
 <div class="product_img"><a href="details.html"><%= link_to (image_tag camera_catalogue.product_image),camera_catalogue %></a></div> 
```

数据库中的图片是否需要用不同的url保存。即保存为 assets/123.jpg 而不是 123.jpg

或者我的代码中是否还有其他错误。

非常感谢帮助/建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:49:46.990

像这样使用它

```
 <div class="product_img"><%= link_to (image_tag (camera_catalogue.product_image)),camera_catalogue %></div> 
```

我想它会为你工作。你不需要使用'assets/image_name'

# python - Numpy：获取不正确的形状信息

> ID：13324428
> 
> 赞同：0
> 
> 时间：2012-11-10T17:39:41.370
> 
> 标签：python, numpy, shape

```
import numpy as np
from numpy import genfromtxt

train = genfromtxt('/Users/hhimanshu/Downloads/dataset/digitrecognizer/a.csv', delimiter=',', names=True) 
```

当我运行形状信息时，我得到

```
# if train is ndarray
print 'shape(Tuple of array dimensions) = ', train.shape
print 'dimension(Number of array dimensions) = ', train.ndim
print 'size(Number of elements in array) = ', train.size
# print 'data type = ', train.dtype
train['label']
train['pixel783'] 
```

我明白了

```
shape(Tuple of array dimensions) =  (9,)
dimension(Number of array dimensions) =  1
size(Number of elements in array) =  9
array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]) 
```

数据看起来像

```
label,pixel0,pixel1,pixel2,pixel3,pixel4,pixel5,pixel6,pixel7,pixel8,pixel9,pixel10,pixel11,pixel12,pixel13,pixel14,pixel15,pixel16,pixel17,pixel18,pixel19,pixel20,pixel21,pixel22,pixel23,pixel24,pixel25,pixel26,pixel27,pixel28,pixel29,pixel30,pixel31,pixel32,pixel33,pixel34,pixel35,pixel36,pixel37,pixel38,pixel39,pixel40,pixel41,pixel42,pixel43,pixel44,pixel45,pixel46,pixel47,pixel48,pixel49,pixel50,pixel51,pixel52,pixel53,pixel54,pixel55,pixel56,pixel57,pixel58,pixel59,pixel60,pixel61,pixel62,pixel63,pixel64,pixel65,pixel66,pixel67,pixel68,pixel69,pixel70,pixel71,pixel72,pixel73,pixel74,pixel75,pixel76,pixel77,pixel78,pixel79,pixel80,pixel81,pixel82,pixel83,pixel84,pixel85,pixel86,pixel87,pixel88,pixel89,pixel90,pixel91,pixel92,pixel93,pixel94,pixel95,pixel96,pixel97,pixel98,pixel99,pixel100,pixel101,pixel102,pixel103,pixel104,pixel105,pixel106,pixel107,pixel108,pixel109,pixel110,pixel111,pixel112,pixel113,pixel114,pixel115,pixel116,pixel117,pixel118,pixel119,pixel120,pixel121,pixel122,pixel123,pixel124,pixel125,pixel126,pixel127,pixel128,pixel129,pixel130,pixel131,pixel132,pixel133,pixel134,pixel135,pixel136,pixel137,pixel138,pixel139,pixel140,pixel141,pixel142,pixel143,pixel144,pixel145,pixel146,pixel147,pixel148,pixel149,pixel150,pixel151,pixel152,pixel153,pixel154,pixel155,pixel156,pixel157,pixel158,pixel159,pixel160,pixel161,pixel162,pixel163,pixel164,pixel165,pixel166,pixel167,pixel168,pixel169,pixel170,pixel171,pixel172,pixel173,pixel174,pixel175,pixel176,pixel177,pixel178,pixel179,pixel180,pixel181,pixel182,pixel183,pixel184,pixel185,pixel186,pixel187,pixel188,pixel189,pixel190,pixel191,pixel192,pixel193,pixel194,pixel195,pixel196,pixel197,pixel198,pixel199,pixel200,pixel201,pixel202,pixel203,pixel204,pixel205,pixel206,pixel207,pixel208,pixel209,pixel210,pixel211,pixel212,pixel213,pixel214,pixel215,pixel216,pixel217,pixel218,pixel219,pixel220,pixel221,pixel222,pixel223,pixel224,pixel225,pixel226,pixel227,pixel228,pixel229,pixel230,pixel231,pixel232,pixel233,pixel234,pixel235,pixel236,pixel237,pixel238,pixel239,pixel240,pixel241,pixel242,pixel243,pixel244,pixel245,pixel246,pixel247,pixel248,pixel249,pixel250,pixel251,pixel252,pixel253,pixel254,pixel255,pixel256,pixel257,pixel258,pixel259,pixel260,pixel261,pixel262,pixel263,pixel264,pixel265,pixel266,pixel267,pixel268,pixel269,pixel270,pixel271,pixel272,pixel273,pixel274,pixel275,pixel276,pixel277,pixel278,pixel279,pixel280,pixel281,pixel282,pixel283,pixel284,pixel285,pixel286,pixel287,pixel288,pixel289,pixel290,pixel291,pixel292,pixel293,pixel294,pixel295,pixel296,pixel297,pixel298,pixel299,pixel300,pixel301,pixel302,pixel303,pixel304,pixel305,pixel306,pixel307,pixel308,pixel309,pixel310,pixel311,pixel312,pixel313,pixel314,pixel315,pixel316,pixel317,pixel318,pixel319,pixel320,pixel321,pixel322,pixel323,pixel324,pixel325,pixel326,pixel327,pixel328,pixel329,pixel330,pixel331,pixel332,pixel333,pixel334,pixel335,pixel336,pixel337,pixel338,pixel339,pixel340,pixel341,pixel342,pixel343,pixel344,pixel345,pixel346,pixel347,pixel348,pixel349,pixel350,pixel351,pixel352,pixel353,pixel354,pixel355,pixel356,pixel357,pixel358,pixel359,pixel360,pixel361,pixel362,pixel363,pixel364,pixel365,pixel366,pixel367,pixel368,pixel369,pixel370,pixel371,pixel372,pixel373,pixel374,pixel375,pixel376,pixel377,pixel378,pixel379,pixel380,pixel381,pixel382,pixel383,pixel384,pixel385,pixel386,pixel387,pixel388,pixel389,pixel390,pixel391,pixel392,pixel393,pixel394,pixel395,pixel396,pixel397,pixel398,pixel399,pixel400,pixel401,pixel402,pixel403,pixel404,pixel405,pixel406,pixel407,pixel408,pixel409,pixel410,pixel411,pixel412,pixel413,pixel414,pixel415,pixel416,pixel417,pixel418,pixel419,pixel420,pixel421,pixel422,pixel423,pixel424,pixel425,pixel426,pixel427,pixel428,pixel429,pixel430,pixel431,pixel432,pixel433,pixel434,pixel435,pixel436,pixel437,pixel438,pixel439,pixel440,pixel441,pixel442,pixel443,pixel444,pixel445,pixel446,pixel447,pixel448,pixel449,pixel450,pixel451,pixel452,pixel453,pixel454,pixel455,pixel456,pixel457,pixel458,pixel459,pixel460,pixel461,pixel462,pixel463,pixel464,pixel465,pixel466,pixel467,pixel468,pixel469,pixel470,pixel471,pixel472,pixel473,pixel474,pixel475,pixel476,pixel477,pixel478,pixel479,pixel480,pixel481,pixel482,pixel483,pixel484,pixel485,pixel486,pixel487,pixel488,pixel489,pixel490,pixel491,pixel492,pixel493,pixel494,pixel495,pixel496,pixel497,pixel498,pixel499,pixel500,pixel501,pixel502,pixel503,pixel504,pixel505,pixel506,pixel507,pixel508,pixel509,pixel510,pixel511,pixel512,pixel513,pixel514,pixel515,pixel516,pixel517,pixel518,pixel519,pixel520,pixel521,pixel522,pixel523,pixel524,pixel525,pixel526,pixel527,pixel528,pixel529,pixel530,pixel531,pixel532,pixel533,pixel534,pixel535,pixel536,pixel537,pixel538,pixel539,pixel540,pixel541,pixel542,pixel543,pixel544,pixel545,pixel546,pixel547,pixel548,pixel549,pixel550,pixel551,pixel552,pixel553,pixel554,pixel555,pixel556,pixel557,pixel558,pixel559,pixel560,pixel561,pixel562,pixel563,pixel564,pixel565,pixel566,pixel567,pixel568,pixel569,pixel570,pixel571,pixel572,pixel573,pixel574,pixel575,pixel576,pixel577,pixel578,pixel579,pixel580,pixel581,pixel582,pixel583,pixel584,pixel585,pixel586,pixel587,pixel588,pixel589,pixel590,pixel591,pixel592,pixel593,pixel594,pixel595,pixel596,pixel597,pixel598,pixel599,pixel600,pixel601,pixel602,pixel603,pixel604,pixel605,pixel606,pixel607,pixel608,pixel609,pixel610,pixel611,pixel612,pixel613,pixel614,pixel615,pixel616,pixel617,pixel618,pixel619,pixel620,pixel621,pixel622,pixel623,pixel624,pixel625,pixel626,pixel627,pixel628,pixel629,pixel630,pixel631,pixel632,pixel633,pixel634,pixel635,pixel636,pixel637,pixel638,pixel639,pixel640,pixel641,pixel642,pixel643,pixel644,pixel645,pixel646,pixel647,pixel648,pixel649,pixel650,pixel651,pixel652,pixel653,pixel654,pixel655,pixel656,pixel657,pixel658,pixel659,pixel660,pixel661,pixel662,pixel663,pixel664,pixel665,pixel666,pixel667,pixel668,pixel669,pixel670,pixel671,pixel672,pixel673,pixel674,pixel675,pixel676,pixel677,pixel678,pixel679,pixel680,pixel681,pixel682,pixel683,pixel684,pixel685,pixel686,pixel687,pixel688,pixel689,pixel690,pixel691,pixel692,pixel693,pixel694,pixel695,pixel696,pixel697,pixel698,pixel699,pixel700,pixel701,pixel702,pixel703,pixel704,pixel705,pixel706,pixel707,pixel708,pixel709,pixel710,pixel711,pixel712,pixel713,pixel714,pixel715,pixel716,pixel717,pixel718,pixel719,pixel720,pixel721,pixel722,pixel723,pixel724,pixel725,pixel726,pixel727,pixel728,pixel729,pixel730,pixel731,pixel732,pixel733,pixel734,pixel735,pixel736,pixel737,pixel738,pixel739,pixel740,pixel741,pixel742,pixel743,pixel744,pixel745,pixel746,pixel747,pixel748,pixel749,pixel750,pixel751,pixel752,pixel753,pixel754,pixel755,pixel756,pixel757,pixel758,pixel759,pixel760,pixel761,pixel762,pixel763,pixel764,pixel765,pixel766,pixel767,pixel768,pixel769,pixel770,pixel771,pixel772,pixel773,pixel774,pixel775,pixel776,pixel777,pixel778,pixel779,pixel780,pixel781,pixel782,pixel783
1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,188,255,94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,191,250,253,93,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,123,248,253,167,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,80,247,253,208,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,29,207,253,235,77,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,54,209,253,253,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,93,254,253,238,170,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23,210,254,253,159,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,209,253,254,240,81,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,27,253,253,254,13,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,206,254,254,198,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,168,253,253,196,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,203,253,248,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,22,188,253,245,93,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,253,253,191,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,240,253,195,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,220,253,253,80,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,94,253,253,253,94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,251,253,250,131,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,214,218,95,0,0,0,0,0,0,0,0,0,0,0,0 
```

我相信形状应该是`(9, 784)`，不是吗？我在这里没有做什么？

**更新**
但是当我改为执行以下操作时（删除`names=True`）

```
train = genfromtxt(fname='/Users/hhimanshu/Downloads/dataset/digitrecognizer/a.csv', delimiter=',') 
```

并运行形状信息

```
# if train is ndarray
print 'shape(Tuple of array dimensions) = ', train.shape
print 'dimension(Number of array dimensions) = ', train.ndim
print 'size(Number of elements in array) = ', train.size
# print 'data type = ', train.dtype
train['label'] 
```

我得到了正确的尺寸，但标签信息丢失了

```
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-136-53c55437f109> in <module>()
      4 print 'size(Number of elements in array) = ', train.size
      5 # print 'data type = ', train.dtype
----> 6 train['label']
      7 # train['pixel1']

ValueError: field named label not found.

shape(Tuple of array dimensions) =  (10, 785)
dimension(Number of array dimensions) =  2
size(Number of elements in array) =  7850 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:09:01.210

`names = True`当您使用genfromtxt时，这是一种特殊情况：返回包含连续数据的结构化数组（如 @'Pierre GM' 所指）。

我建议您分别加载标题和数据（例如，使用skirows）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T13:41:29.287

在 numpy 中，a 的所有元素`ndarray`必须具有相同的类型。这种类型可以是简单的（如`float`or `int`）或更复杂的，作为几个子类型的组合（如`[('name', '|S16'),('value',float)]`。在这种情况下，我们谈论[结构化数组](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)，即`ndarray`具有结构化 dtype 的 a。请注意，您可以定义结构化 dtype其中所有子元素具有相同的类型，例如`[('first',float),('second',float)]`. 通常，结构化数组的单个元素称为记录，每个子元素称为字段。

例如考虑数组：

```
example = np.array([(1,2,3),(4,5,6)], dtype=[('A',int),('B',int),('C',int)]) 
```

`example`是一个结构化数组，由两个元素（`(1,2,3)`和`(4,5,6)`）组成，每个元素（或“记录”）有 3 个字段。因为它只有 2 个元素，所以它的形状是`(2,)`. 您可以使用 获取字段数`len(example.dtype.names)`。这个数组的大小是 2，因为我们只有两个元素。

因为它是一个结构化数组，我们可以单独访问每个字段：

```
>>> example['A']
array([1, 4]) 
```

无论如何：

* * *

如[文档中`np.genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)所述，当您使用该`names`参数时，您特别要求`np.genfromtxt`返回一个结构化数组。

输出的每个元素对应于文件的有效行，并且子元素（“字段”）与文件中的列一样多（784）。在这里，由于您有 9 个有效行，因此输出的形状为`(9,)`.

因为您没有给出 dtype，所以`genfromtxt`假设每个字段都是 a `float`，所以输出的 dtype 由下式给出：

```
np.dtype([(name, float) for name in list_of_names]) 
```

您`list_of_names`是从文件的第一个有效行中读取的。

如果现在您不使用`names=True`，您实际上会告诉`np.genfromtxt`您将文件读取为 2D 浮点数组，因此是`(9,784)`形状。但是因为在这种情况下，输出不再是结构化数组，所以您不能通过名称访问每一列（因为它没有任何列）。

请注意，在这种特殊情况下（所有字段都是浮动的），您可以使用以下命令从结构化视图切换到非结构化视图

```
train.reshape((-1,1)).view(float) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:20:38.590

正如georgesl所建议的那样，这应该可以解决它，先阅读标题，然后再阅读其余部分。我通过文件句柄传递所有内容来简化它：

```
fh=open(myfile,'r')
header=fh.readline().rstrip("\n").split(",")
data=np.genfromtxt(fh,delimiter=",")
fh.close() 
```

# linq - Linq 查询创建字典

> ID：13324429
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:39:47.393
> 
> 标签：linq, linq-to-xml

我需要简单的 linq 查询，它将创建字典 我有 Xml，其中包含客户列表，谁可以购买一些产品 对于每个客户，只能免费提供一种产品 下面是我的示例 Xml 我已经创建了一个看起来像的类

```
Public Class CustomerFreeItem
{
  public string CustomerID
  public string FreeproductName
  public string ActualPrice
}

<customers>
  <customer id="1">
    <product name="book" free="false" actualPrice="10"/>
    <product name="pen" free="true" actualPrice="10"/>
    <product name="scale" free="false" actualPrice="10"/>
  </customer>
  <customer id="2">
    <product name="book" free="true" actualPrice="10"/>
    <product name="pen" free="false" actualPrice="10"/>
    <product name="scale" free="false" actualPrice="10"/>
  </customer>
  <customer id="3">
    <product name="book" free="false" actualPrice="10"/>
    <product name="pen" free="false" actualPrice="10"/>
    <product name="scale" free="true" actualPrice="10"/>
  </customer>
</customers> 
```

Frome Above Xml 我想要一个字典，其中客户 ID 作为键，值作为 FreeProduct（CustomerFreeItem 对象）

请建议

谢谢，鲑鱼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:59:28.330

因此不清楚您使用的是什么语言（类声明在 C# 和 VB 中均无效）这里是 C# 解决方案

```
XDocument xdoc = XDocument.Load(path_to_xml_file);
var query = from c in xdoc.Descendants("customer")
            let freeProduct = c.Elements("product")
                                .Where(p => (bool)p.Attribute("free"))
                                .Single()                        
            select new CustomerFreeItem()
            {
                CustomerID = (int)c.Attribute("id"),
                FreeproductName = (string)freeProduct.Attribute("name"),
                ActualPrice = (int)freeProduct.Attribute("actualPrice")
            };

Dictionary<int, CustomerFreeItem> dictionary =  
     query.ToDictionary(x => x.CustomerID); 
```

我使用了以下类声明：

```
public class CustomerFreeItem
{
    public int CustomerID { get; set; }
    public string FreeproductName { get; set; }
    public int ActualPrice { get; set; }
} 
```

我假设每个客户都只有一种免费产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:00:25.047

使用布局制作字典并使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)，您将看到所需的格式。然后你可以反转这个过程，你的字典就会被填满。

# c++ - C++ 向量的 insert & push_back 区别

> ID：13324431
> 
> 赞同：82
> 
> 时间：2012-11-10T17:39:57.657
> 
> 标签：c++

我想知道`vector`'s`push_back`和`insert`functions 之间有什么区别。

是否存在结构差异？

性能差异真的很大吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-10T17:41:42.273

最大的区别是它们的功能。`push_back`总是在末尾放置一个新元素，`vector`并`insert`允许您选择新元素的位置。这会影响性能。`vector`只有在需要增加它的长度时才会在内存中移动元素，因为为其分配的内存太少。另一方面，`insert`强制将所有元素移动到新元素的选定位置之后。你只需要为它腾出一个地方。这就是为什么`insert`可能通常效率低于`push_back`.

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-10T17:41:52.560

这些功能有不同的用途。[`vector::insert`](http://en.cppreference.com/w/cpp/container/vector/insert)允许您在 中的指定位置插入对象`vector`，而[`vector::push_back`](http://en.cppreference.com/w/cpp/container/vector/push_back)只会将对象粘贴到末尾。请参见以下示例：

```
using namespace std;
vector<int> v = {1, 3, 4};
v.insert(next(begin(v)), 2);
v.push_back(5);
// v now contains {1, 2, 3, 4, 5} 
```

您可以使用`insert`来执行与 相同的`push_back`工作`v.insert(v.end(), value)`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-10-05T10:10:14.887

除了事实上，这`push_back(x)`与`insert(x, end())`（可能性能稍好）相同，关于这些功能还有几件重要的事情需要了解：

1.  `push_back`仅存在于`BackInsertionSequence`容器上 - 例如，它不存在于`set`. 它不能因为`push_back()`授予你它总是会在最后添加。
2.  一些容器也可以满足`FrontInsertionSequence`并且他们有`push_front`. 满足`deque`，但不满足`vector`。
3.  `insert(x, ITERATOR)`是来自，这对于和`InsertionSequence`很常见。这样，您可以使用其中一个或作为多个插入的目标。但是，has 另外，它实际上做了同样的事情（第一次插入仅意味着通过从不同的迭代器开始来加速搜索适当的位置 - 在这种情况下未使用此功能）。`set``vector``set``vector``set``insert(x)``set`

请注意最后一种情况，如果您要在循环中添加元素，那么做`container.push_back(x)`并且`container.insert(x, container.end())`将有效地做同样的事情。`container.end()`然而，如果你先得到它然后在整个循环中使用它，这将不是真的。

例如，您可能会**冒**以下代码的风险：

```
auto pe = v.end();
for (auto& s: a)
    v.insert(pe, v); 
```

**这将有效地以相反的顺序**将整个复制`a`到`v`向量中，并且只有当您足够幸运没有为扩展重新分配向量时（您可以通过先调用来防止这种情况）；如果你不是那么幸运，你会得到所谓的 UndefinedBehavior(tm)。理论上这是不允许的，因为每次添加新元素时，vector 的迭代器都被认为是无效的。**`reserve()`**

 **如果你这样做：

```
copy(a.begin(), a.end(), back_inserter(v); 
```

它将在原始顺序`a`的末尾复制`v`，这不会带来迭代器失效的风险。

[编辑] 我之前让这段代码看起来是这样的，这是一个错误，因为`inserter`实际上保持了迭代器的有效性和先进性：

```
copy(a.begin(), a.end(), inserter(v, v.end()); 
```

因此，此代码还将按原始顺序添加所有元素，没有任何风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-13T07:58:00.583

我在上面的任何评论中都没有看到它，但重要的是要知道：

如果我们希望向给定向量添加新元素并且向量的新大小（包括新元素）超过当前向量容量，则会导致分配的存储空间自动重新分配。因为内存分配是我们希望最小化的一个动作，它将以相同的方式增加**push_back 和 insert**中的容量（对于具有 n 元素的向量将增加大约 n/2）。

因此，就内存效率而言，可以肯定地说，使用你最喜欢的东西。例如：

```
std::vector<int> test_Insert = { 1,2,3,4,5,6,7 };
std::vector<int> test_Push_Back = { 1,2,3,4,5,6,7 };

std::cout << test_Insert.capacity() << std::endl;
std::cout << test_Push_Back.capacity() << std::endl;

test_Insert.push_back(8);
test_Push_Back.insert(test_Push_Back.end(), 8);

std::cout << test_Insert.capacity() << std::endl;
std::cout << test_Push_Back.capacity() << std::endl; 
```

此代码将打印：

7

7

10

10**

# jquery - jquery自动刷新不闪烁

> ID：13324432
> 
> 赞同：17
> 
> 时间：2012-11-10T17:40:01.650
> 
> 标签：jquery, refresh

```
<script type="text/javascript">
window.onload = setupRefresh;

function setupRefresh() {
  setTimeout("refreshPage();", 1000);
}
function refreshPage() {
   window.location = location.href;
} 
```

该页面现在每秒重新加载唯一的问题它闪烁如何解决这个问题

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-10T18:36:38.693

您可以使用 div 和 .get 与 jquery 从您网站上的另一个页面获取您的数据。

您可以使用 setTimeOut(function, time)

```
$(function() {
    startRefresh();
});

function startRefresh() {
    setTimeout(startRefresh,1000);
    $.get('pagelink.php', function(data) {
        $('#content_div_id').html(data);    
    });
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-12T14:51:51.697

如果页面完全重新加载并覆盖自身（包括正在重新加载的脚本，那么试试这个版本：

```
function startRefresh() {
    $.get('', function(data) {
        $(document.body).html(data);    
    });
}
$(function() {
    setTimeout(startRefresh,1000);
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-10T17:41:51.840

如果没有闪烁效果，您将无法以这种方式重新加载页面。查看 AJAX 以获取页面的更新内容并将其异步显示在“现有”页面中。

看看：[http](http://www.brightcherry.co.uk/scribbles/jquery-auto-refresh-div-every-x-seconds/) ://www.brightcherry.co.uk/scribbles/jquery-auto-refresh-div-every-x-seconds/ ，刷新部分屏幕（该部分可以是`<DIV>`页面的唯一部分）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-03T11:41:59.193

感谢您对函数的回答，但如果我想使用大约 1 分钟的延迟，我必须通过这种方式开始延迟调用函数：

```
<script type="text/javascript">
//<![CDATA[
var vTimeOut;

$(function() {
  vTimeOut= setTimeout(startRefresh, 60000)
});

function startRefresh() {
  clearInterval(vTimeOut);
  vTimeOut= setTimeout(startRefresh, 60000);
  $(<#div>).load(<loadURL>);
}

//]]>
</script> 
```

否则，startRefresh 函数会很快触发或重复更多次。

# android - 使用 IP 摄像机照片的 OpenCv

> ID：13324439
> 
> 赞同：3
> 
> 时间：2012-11-10T17:40:32.823
> 
> 标签：android, python, opencv, ip-camera

我正在尝试使用我用 Android IP 摄像头 (http://192.168.0.10:8080/shot.jpg) 拍摄的照片在 opencv 中工作，但它不起作用，我得到一个空白窗口。我尝试使用另一张图片（http://images2.wikia.nocookie.net/_ *cb20110420175105/agallas/es/images/thumb/1/11/Agallas-el-perro-cobarde-125* (1).jpg/640px- Agallas-el-perro-cobarde-125_(1).jpg) 并且效果很好。为什么它不适用于使用 ip 相机拍摄的照片？

```
 import sys, cv
  import numpy as np
  #photo = "http://images2.wikia.nocookie.net/__cb20110420175105/agallas/es/images/thumb/1/11/Agallas-el-perro-cobarde-125_(1).jpg/640px-Agallas-el-perro-cobarde-125_(1).jpg"
  photo = "http://192.168.0.10:8080/shot.jpg"
  img=cv.CaptureFromFile( photo )
  while True: 
    frame = cv.QueryFrame(img)
    cv.ShowImage('Foto',frame)
    if cv.WaitKey(30)==27:
         break 
```

两张图片的尺寸相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T20:59:22.517

这可能不是解决我的问题的一种非常有效的方法，但它确实有效。

```
import urllib
import cv 

urllib.urlretrieve("http://192.168.0.10:8080/shot.jpg", "foto.jpg")
imagen=cv.LoadImage('foto.jpg')
cv.ShowImage('Image',imagen) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:13:20.107

这是我正在使用 Andrea Diaz 的想法和带有 opencv2 的 python 从运行 Android IP 摄像头的手机中流式传输的一些代码...

```
import cv2
import urllib

while True:
    urllib.urlretrieve("http://192.168.0.10:8080/shot.jpg", "foto.jpg")
    src_image = cv2.imread('foto.jpg', 0)
    cv2.imshow('Viewer',src_image)
    # read user keyboard for 5ms, and break on any keypress.    
    if (cv2.waitKey (5) != -1):
        break; 
```

# css - 为什么 z-index 不独立于堆叠上下文？

> ID：13324442
> 
> 赞同：6
> 
> 时间：2012-11-10T17:40:47.547
> 
> 标签：css, z-index

具有高 z-index 的元素可能低于具有低 z-index 的另一个元素，这只是因为较低 z-index 的祖先的 z-index 为该元素提供了更高的堆叠上下文。

因此，如果不对 CSS 或 HTML 代码进行重大更改，就不可能从较低的堆叠上下文覆盖元素。另一方面，如果 z-index 属性是“绝对”值（更高的 z-index -> z 轴上的更高位置），则使用 z-index 属性会很简单。

我的问题是，为什么在浏览器和标准中以这种方式实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T12:33:26.667

我认为**cwolves**有正确的答案，而现在的方式可能是最合乎逻辑的。为了帮助理解，您可以将**z-index**视为 Photoshop 图层。如果您在另一个文件夹上方有一个图层文件夹，则包裹的图层显然不能排列在其父级之外，除非您将它们从一个文件夹移动到另一个文件夹。

或者想想盒子：你可以在一个盒子里安排东西，但你不能从两个不同的盒子里安排东西，除非你把它们从一个盒子移到另一个盒子。

如果您遇到需要不同安排的情况，您可能需要重新考虑您的标记以允许这样做。

# vhdl - 从 100MHz 基本时钟生成 78MHz 时钟

> ID：13324445
> 
> 赞同：5
> 
> 时间：2012-11-10T17:40:56.567
> 
> 标签：vhdl, frequency

我必须使用 VHDL 语言（因此比率为 200/156）从 100MHz 基本时钟（占空比 0.5）生成 78MHz 时钟（占空比 0.5 或 0.7）。我知道我可以使用 DCM、PLL 或类似的工具，但目前（不幸的是）我不能。

因此我想使用（不包括任何 DCM 或 PLL）一个简单的分频器，但在这种情况下，我也知道频率只能除以整数（并且最小为 2，因为我会使用计数器来做到这一点 - 并且在在我的情况下，我必须将基本时钟除以 1,2820512820512820512820512820513 ...）。

所以我不知道如何在不使用任何 DCM 或其他东西的情况下实现这一点......我想将 100MHz 时钟划分为更小的频率（如 50MHz、25MHz 等）并添加它们（例如 50+25+3），但这是正确的方式吗（逻辑上我不这么认为）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:47:05.747

这是一个通用的分数 M/​​D 时钟分频器设计，应该可以解决您的问题。几年前我写了这个供我自己使用。根据您的目标设备，您可能希望使用 std_logic 而不是 bit。

基本思想是使用累加器跟踪小数时钟相位。这与实现直接数字合成器 (DDS) 的方式非常相似，但只需要担心时钟。

享受！=)

如果不清楚如何使用它，您将使用 39 的乘数和 50 的除数的参数，如`100 * 39/100 = 78`，因此所需的操作数宽度为 6（因为`2**6 = 64`）。请注意，因为这是输入时钟速率的一半以上，所以没有同步逻辑可以生成输出时钟信号，因此该模块在该速率下的唯一有效输出将是时钟使能。

另请注意，任何可能的除数值的最坏情况是任何一个周期的 33%/66% 占空比。您对乘数和除数的特定选择可能会更好（我需要做一些数学来判断），但是对于使用有理除法的任何算法，*通常*情况下，您无法得到比最坏情况更好的选择。您可以使用真正的硬件 PLL 或 DLL 清理此模块的输出，以过滤相位噪声并将占空比纳入您的目标范围。

```
-- Copyright © 2010 Wesley J. Landaker <wjl@icecavern.net>
-- 
-- This program is free software: you can redistribute it and/or modify
-- it under the terms of the GNU General Public License as published by
-- the Free Software Foundation, either version 3 of the License, or
-- (at your option) any later version.
-- 
-- This program is distributed in the hope that it will be useful,
-- but WITHOUT ANY WARRANTY; without even the implied warranty of
-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-- GNU General Public License for more details.
-- 
-- You should have received a copy of the GNU General Public License
-- along with this program.  If not, see <http://www.gnu.org/licenses/>.

library ieee;
use ieee.numeric_bit.all;

-- Clock Divider
-- =============
--
-- Fractionally divides the input clock using simultaneous frequency
-- multiplication and division.
--
-- Outputs both a clock enable and a balanced duty-cycle clock. The clock's
-- duty-cycle is as always close to 50% as possible, worst case is 33%/66%.
--
-- Details
-- =======
--
-- Given:
--
--   Fi = input frequency Hz
--   M  = multiplier
--   D  = divisor
--   Fo = output frequency Hz
--
-- Where:
--
--   M ≤ D
--
-- Then:
--
--        ⎧    M
--        ⎪ Fi·—        if M <= D
--   Fo = ⎨    D
--        ⎪
--        ⎩ undefined   if M > D
--
--
-- If (M/D) is greater than 0.5, only the clock enable is valid.
-- If (M/D) is greater than 1.0, both outputs are invalid.

entity Clock_Divider is
  generic (
    operand_width : positive
    );
  port (
    clock : in bit;
    reset : in bit;

    multiplier : in unsigned(operand_width-1 downto 0);
    divisor    : in unsigned(operand_width-1 downto 0);

    out_enable : buffer bit;
    out_clock  : buffer bit
    );
end entity;

architecture any of Clock_Divider is
  signal enable_2x : bit;
begin

  -- Divide the clock by accumulating phase using the mulitplier and
  -- subtracting when we pass the divisor value.

  proc_enable : process is
    variable phase : unsigned(operand_width downto 0);
  begin
    wait until rising_edge(clock);
    phase := phase + multiplier;
    if phase >= divisor then
      phase := phase - divisor;
      out_enable <= '1';
    else
      out_enable <= '0';
    end if;
    if reset = '1' then
      phase := (others => '0');
      out_enable <= '0';
    end if;
  end process;

  proc_enable : process is
    variable phase : unsigned(operand_width downto 0);
  begin
    wait until rising_edge(clock);
    phase := phase + (multiplier & '0');
    if phase >= divisor then
      phase := phase - divisor;
      enable_2x <= '1';
    else
      enable_2x <= '0';
    end if;
    if reset = '1' then
      phase := (others => '0');
      enable_2x <= '0';
    end if;
  end process;

  proc_out_clock : process is
  begin
    wait until rising_edge(clock);
    if enable_2x = '1' then
      out_clock <= not out_clock;
    end if;
  end process;

end architecture; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:53:14.723

完全不合时宜的想法，有些技术特定，因此可能不适合您的目标，而且非常可怕......

很明显，如果没有 (a) PLL、(b) DLL、(c) 更高频率的时钟或 (d) 5ns pp 抖动，您将无法做到这一点。

您需要更多可用的时钟边沿，但是（假设）您没有更多的时钟边沿，您将不得不生成自己的时钟边沿。一种特定于技术（Xilinx）的方法是通过多个引脚输入时钟，并在每个引脚上使用不同的 IBUFDELAY 设置。实际设置可能会通过实验（甚至在通电时）进行校准，并且自然会随着温度而漂移。

另一种方法可能是一系列 LUT 连续延迟时钟，逻辑检测第 n 个延迟超过半个周期。（或整个周期）然后点击 n/2 大约晚 90 度，n/4 晚 45 度，依此类推（您无法确保这些时序的一致性。不过，布局规划和锁定此内核将在一定程度上有所帮助。 )

无论哪种方式，一旦您拥有多个 100MHz 时钟相位，您就可以将它们应用于上述 DDS（小数分频器）。性能不太可能稳定，但应该比目前最好的5ns更好……

（是的，我知道这无异于滚动你自己的（和劣等的）DLL。这算作弊吗？）

对于较低复杂度的方法，您可以尝试使用 Peter Alfke 的延迟/XOR 技巧从 100MHz 时钟中获得 200MHz。无法保证其 M/S 比率，但它确实为您提供了 4 个优势......

# c# - 如何从控制台读取多行用户输入？

> ID：13324451
> 
> 赞同：1
> 
> 时间：2012-11-10T17:41:36.517
> 
> 标签：c#, windows, input, console

我想从控制台读取多行用户输入，但也允许使用 CTRL-C 之类的转义序列终止输入。我的问题是在按下转义序列时取消对 ReadLine() 的最后一次调用。我尝试过多线程并强制线程关闭，但我的问题是获取用户输入的最后一行。当按下转义序列时，最后一行丢失了，我无法使用主线程中的 ReadLine() 将其取回。如果我输入这样的内容：

```
Input
Input2 [CTRL-C], 
```

我只得到'输入\ n'。有没有办法获得多行输入，但在按下转义序列时捕获最后一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:58:31.647

正如我在上面的评论中所建议的，它显然可以：

*   为[CTRL](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682066%28v=vs.85%29.aspx) +C 和
*   通过使用 Console.KeyAvailable 和 Console.ReadKey 循环剩余输入来处理 CTRL-C。

# javascript - 用不正确的符号更正 JSON 字符串？

> ID：13324456
> 
> 赞同：1
> 
> 时间：2012-11-10T17:42:08.263
> 
> 标签：javascript, json

我正在开发一个使用 javascript 的 Web 应用程序，我必须接收并解析一个如下所示的 JSON 字符串：

```
{name:"", house:""} 
```

将其转换为正确符号的最佳方法是什么？

```
{"name":"", "house":""} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:44:38.990

```
var str = '{name:"", house:""}';
var newStr = JSON.stringify( eval( '(' + str + ')' ) );
console.log(newStr); //{"name":"", "house":""} 
```

[**小提琴**](http://jsfiddle.net/Xgnzd/)

`eval`如果数据源不受信任，请不要使用。

* * *

顺便说一句，您确定您收到的是格式错误的 JSON 字符串并且它不仅仅是一个对象吗？如果您使用 jQuery，它会自动将 JSON 响应解析为对象。在这种情况下，您只需调用`JSON.stringify`传递对象以从中生成有效的 JSON 字符串，或访问请求的`responseText`. [摆弄](http://jsfiddle.net/Xgnzd/1/)jQuery Ajax。

# php - 在 php 中返回要转换为 JSON 的 SQL 结果数组

> ID：13324457
> 
> 赞同：1
> 
> 时间：2012-11-10T17:42:11.187
> 
> 标签：php, mysql, sql, arrays, return

我正在尝试从 SQL 数据库中获取一些用户条目并将其返回到它将被编码为 JSON 并发送回 android 的位置。

目前我正在构建部分来处理查询数据库的结果：

```
$result = mysql_query("SELECT * FROM users WHERE tower='$tower'") or die(mysql_error());
    $resultNo = mysql_num_rows($result);

    // check for successful store
    if ($result != null) {

        //if just one result return it
        if ($resultNo == 1) {
            // return result
            return mysql_fetch_array($result);

    //if more than one loop through
    } else {

        //add each row to an array
        while($row = mysql_fetch_array($result)) {
            $resultSet[] = $row;
        }
        return $resultSet[];

    } else {
        return false;
    }
} 
```

我要返回的代码是...

```
$result = $db->searchForPeople($tower); 
```

我可以以这种方式返回一个数组或单个结果，还是应该将单个结果添加到数组中并返回它？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:52:45.840

可以这样：

```
$resultSet['row'] = $row;
return json_encode($resultSet); 
```

或者例如：

```
function TEST()
{
$array=array();$i=0;       
while($result=mysql_fetch_row(QUERY))       
{
    foreach ($result as $key=>$value){
       if(!isset($array[$i])) $array[$i] = array();
        $array[$i][$key] = $value;
    }
    $i++;
}     
return $array;
} 
```

# javascript - 抓取指定的图像源并将其添加到输入表单中

> ID：13324458
> 
> 赞同：0
> 
> 时间：2012-11-10T17:42:17.810
> 
> 标签：javascript, jquery, input

我正在尝试执行以下操作：单击每个图像（缩略图）源时，应将其写入指定的输入。我已经做过那种......现在还不能很好地工作！

*   它不会添加正确的源，只是始终是第一个源，无论单击什么图像。

*   如果再次单击相同/不同的图像，它不会删除添加的源。

> // 一段 jQuery 脚本：

```
var imgSource = $('#textures li').find('img').attr('src');

$('ul#textures li img').on('click', function() {
    $('input#imgPath').val($('input#imgPath').val() + imgSource);
});​ 
```

Fiddle 以便更好地理解： [JS Fiddle 链接](http://jsfiddle.net/2huF2/)

PS您的答案的解释将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:47:46.070

`attr`只返回第一个匹配元素的属性，你可以使用`this`关键字来引用被点击的元素。

```
$('ul#textures li img').on('click', function() {
    $('#imgPath').val(this.src)
}); 
```

[http://jsfiddle.net/Uz6rc/](http://jsfiddle.net/Uz6rc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:48:49.707

使用： $(this) - 表示 click 元素的属性

```
 $('ul#textures li img').on('click', function() {
    $('input#imgPath').val($('input#imgPath').val() + $(this).attr('src'));
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:50:05.830

看看：http: [//jsfiddle.net/e3HzQ/](http://jsfiddle.net/e3HzQ/)

来自[jQuery 文档](http://api.jquery.com/attr/)：

> .attr() 方法仅获取匹配集中第一个元素的属性值。

您的`imgSource`变量是在事件处理程序之外声明的，因此它不会根据单击的图像改变其值 - 它只是保持第一张图像的值。

此外，不会删除先前的值，因为您将该值附加到已经存在的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T17:51:07.830

干得好：

```
$('ul#textures li img').on('click', function() {
    var imgSource = $('#textures li').find('img').attr('src');
    $('input#imgPath').val($(this).attr("src"));
}); 
```

**[演示](http://jsfiddle.net/refhat/2huF2/7/)**

它不适合你的原因是因为你已经定义了

```
var imgSource = $('#textures li').find('img').attr('src'); 
```

在 on 函数之外。然后，您每次都在文本框中设置相同的值，使用：

```
$('input#imgPath').val($('input#imgPath').val() + imgSource); 
```

我修改了这一行以使用此运算符获取 img src。

# javascript - 用 EaselJS 绘制模糊的半透明圆圈

> ID：13324461
> 
> 赞同：0
> 
> 时间：2012-11-10T17:42:24.550
> 
> 标签：javascript, html5-canvas, easeljs

我想画这样的形状： [如何在 HTML5 画布上画一个模糊的圆圈？](https://stackoverflow.com/questions/5475755/how-to-draw-a-blurry-circle-on-html5-canvas) 在我使用 EaselJs 的画布上。我会做一些基本的绘图，我需要模糊的半透明圆圈，在 Easel 中还有其他方法可以实现这一点吗？

如果我尝试在没有画架的情况下处理模糊的圆圈，有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:01:08.213

我无法对 EaselJS 发表评论，但在常规画布中，您可以绘制一个带有红色阴影的红色圆圈 - X 偏移为 0，Y 偏移为 0，模糊约为 25。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:52:48.310

您可以设置形状的[alpha](http://www.createjs.com/Docs/EaselJS/DisplayObject.html#property_alpha)以获得半透明的圆形。然后使用 BoxBlurFilter 使其变得模糊。所有这些都可以在 Easel JS[在线文档](http://www.createjs.com/Docs/EaselJS/)中找到，并且在[Github](https://github.com/CreateJS/EaselJS/blob/master/examples/Filters.html)
中提供了示例，例如获得一个半透明的圆圈，你可以这样做

```
var shape = new createjs.Shape();
var g = shape.graphics;
g.beginFill("#FFFFFF");
g.drawCircle(0,0,10);
g.endFill();
shape.alpha = 0.5;
stage.addChild(shape); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T20:18:50.680

绘制轮廓模糊的圆圈，如[如何在 HTML5 画布上绘制模糊圆圈？](https://stackoverflow.com/questions/5475755/how-to-draw-a-blurry-circle-on-html5-canvas "如何在 HTML5 画布上画一个模糊的圆圈？")，您需要使用相同的红色但不同的透明度值使用径向渐变填充 EaselJS 形状。关键是通过 rgba() 函数指定颜色，该函数可让您设置 Alpha 通道（不透明度或透明度）。

这是代码片段：

```
var circle = new createjs.Shape();

var solidRed = 'rgba(255, 0, 0, 1)';
var transparentRed = 'rgba(255, 0, 0, 0)';

circle.graphics.beginRadialGradientFill(
                  [ solidRed, solidRed, transparentRed ],
                  [ 0, 0.75, 1 ],
                  0, 0, 0,
                  0, 0, 100)
                .drawCircle(0, 0, 100); 
```

为 100px 半径圆的径向渐变填充提供 3 种“停止”颜色（由 2 个数组 [solidRed、solidRed、transparentRed] 和 [0, 0.75, 1] 指定）：中心为纯红色，75 为纯红色半径的 %，以及半径处的透明红色。

渐变将生成一个 75px 的圆形，填充纯红色，并以从 75px 的纯红色到 100px 的完全透明红色的光环为边界。

然后你可以享受调整的乐趣：

*   透明渐变开始的阈值（第二个数组的第二个元素：接近 0 会给你一个更大的模糊轮廓，接近 1 会给你一个更清晰的轮廓）
*   EaselJS Shape 的 alpha 值（现在即使是中心的实心圆也将是半透明的）
*   如果您计划有多个圆圈重叠，则 EaselJS 形状的复合操作（“较浅”会将颜色一起添加到白色）。

我使用了这 3 种技术的混合来 使用 EaselJS创建这个[图像。](https://twitter.com/herebefrogs/status/697616535246995457)

# c# - 在 SignalR 中按 UserId 查找连接

> ID：13324462
> 
> 赞同：3
> 
> 时间：2012-11-10T17:42:29.543
> 
> 标签：c#, asp.net, signalr

我有一个使用 ajax 轮询从服务器获取股市更新的网页。我想改用 SignalR，但我无法理解它如何/是否会起作用。

*好吧，这不是真正的股市更新，但类比有效。*

我见过的 SignalR 示例向当前连接、所有连接或组发送消息。在我的示例中，库存更新发生在当前连接之外，因此没有“当前连接”之类的东西。并且用户的帐户与一些股票相关联，因此向所有连接或组发送股票通知也不起作用。**我需要能够找到与某个 userId 关联的连接。**

这是一个假代码示例：

```
foreach(var stock in StockService.GetStocksWithBigNews())
{
    var userIds = UserService.GetUserIdsThatCareAboutStock(stock);

    var connections = /* find connections associated with user ids */;

    foreach(var connection in connections)
    {
        connection.Send(...);
    }
} 
```

[在这个关于过滤连接](https://stackoverflow.com/a/11159991/193896)的问题中，他们提到我可以将当​​前连接保留在内存中，但是（1）它不利于扩展，（2）它不利于多节点网站。这两点对我们当前的应用程序都至关重要。这让我觉得我必须向所有节点发送消息才能找到连接到每个节点的用户>>我的大脑在混乱中爆炸。

**问题**

如何为特定用户找到可扩展的连接？我在想这个错误的方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T05:25:32.507

我昨晚创建了一个小项目来学习这个。我使用了 1.0 alpha，它是直截了当的。我创建了一个集线器，并从那里开始工作:)

在我的项目中，我有 N 个计算单元（一些服务器处理工作），当它们启动时，它们会调用 ComputeUnitRegister。

```
await HubProxy.Invoke("ComputeUnitReqisted", _ComputeGuid); 
```

每次他们做一些他们称之为的事情

```
HubProxy.Invoke("Running", _ComputeGuid); 
```

其中 HubProxy 是：

```
HubConnection Hub = new HubConnection(RoleEnvironment.IsAvailable ?
                    RoleEnvironment.GetConfigurationSettingValue("SignalREndPoint"):
                    "http://taskqueue.cloudapp.net/");
IHubProxy HubProxy = Hub.CreateHubProxy("ComputeUnits"); 
```

我使用 RoleEnviroment.IsAvailable 是因为我现在可以将其作为 Azure Role、控制台应用程序或 .NET 4.5 中的任何内容运行。Hub 被放置在一个 MVC4 网站项目中，并像这样启动：

```
 GlobalHost.Configuration.ConnectionTimeout = TimeSpan.FromSeconds(50);
        RouteTable.Routes.MapHubs();

public class ComputeUnits : Hub
{
     public Task Running(Guid MyGuid)
     {
         return Clients.Group(MyGuid.ToString()).ComputeUnitHeartBeat(MyGuid,
                DateTime.UtcNow.ToEpochMilliseconds());            
     }
     public Task ComputeUnitReqister(Guid MyGuid)
     {
         Groups.Add(Context.ConnectionId, "ComputeUnits").Wait(); 
         return Clients.Others.ComputeUnitCameOnline(new { Guid = MyGuid,
                HeartBeat = DateTime.UtcNow.ToEpochMilliseconds() });           
     }
     public void SubscribeToHeartBeats(Guid MyGuid)
     {
         Groups.Add(Context.ConnectionId, MyGuid.ToString());
     }
} 
```

我的客户是 Javascript 客户，它们有方法（如果您也需要查看代码，请告诉我）。但基本上他们会监听`ComputeUnitCameOnline`并在其运行时调用服务器`SubscribeToHeartBeats`。这意味着每当服务器计算单元在做一些工作时，它都会调用 Running，这将触发一个`ComputeUnitHeartBeat`on javascript 客户端。

我希望您可以使用它来了解如何使用 Groups 和 Connections。最后，它还通过添加几行代码来扩展多天蓝色角色：

```
 GlobalHost.HubPipeline.EnableAutoRejoiningGroups();
    GlobalHost.DependencyResolver.UseServiceBus(
        serviceBusConnectionString,
        2,
        3,
        GetRoleInstanceNumber(),
          topicPathPrefix /* the prefix applied to the name of each topic used */
        ); 
```

您可以在 Azure 上的服务总线上获取连接字符串，记住 Provider=SharedSecret。但是在添加 nuget 打包时，连接字符串语法也会粘贴到您的 web.config 中。2 是要拆分多少个主题。主题可以包含 1Gb 的数据，因此您可以根据性能增加它。3 是拆分它的节点数。我使用了 3，因为我有 2 个 Azure 实例和我的本地主机。您可以像这样获得 RoleNumber（请注意，我将 localhost 硬编码为 2）。

```
private static int GetRoleInstanceNumber()
{
    if (!RoleEnvironment.IsAvailable)
        return 2;

    var roleInstanceId = RoleEnvironment.CurrentRoleInstance.Id;
    var li1 = roleInstanceId.LastIndexOf(".");
    var li2 = roleInstanceId.LastIndexOf("_");
    var roleInstanceNo = roleInstanceId.Substring(Math.Max(li1, li2) + 1);
    return Int32.Parse(roleInstanceNo);
} 
```

您可以在以下位置看到所有内容：http: [//taskqueue.cloudapp.net/#/compute-units](http://taskqueue.cloudapp.net/#/compute-units)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:40:55.907

使用 SignalR 时，在客户端连接到服务器后，他们会收到一个连接 ID（这对于提供实时通信至关重要）。是的，它存储在内存中，但 SignalR 也可以在多节点环境中使用。例如，您可以使用 Redis 甚至 Sql Server 背板（更多内容）。长话短说，我们通过背板/服务总线为您处理横向扩展方案，您无需担心。

# python - Python - 使用变量作为列表名称

> ID：13324465
> 
> 赞同：3
> 
> 时间：2012-11-10T17:42:55.553
> 
> 标签：python

我在python中有这段代码。

```
import sys
list1 = ["A", "B", "C"]
list2 = [1, 2, 3]

myarg = sys.argv[1]
print len(myarg) 
```

我会像这样从命令行运行这个脚本

```
python script.py list1 
```

所以我需要一种方法让 len 使用列表而不是变量，我只想在 var 中给出列表的名称。

我知道这个例子我可以做

```
if myarg == "list1":
    print len(list1)
else if myarg == "list2"
    print len(list2) 
```

但是我的脚本上有 13 个列表，我需要一种方法来通过我在命令行中给出的名称来引用它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T17:44:33.607

虽然这在 Python 中是完全可能的，但它不是必需的。这里最好的解决方案是不要这样做，而是有一本字典。

```
import sys

lists = {
    "list1": ["A", "B", "C"],
    "list2": [1, 2, 3],
}

myarg = sys.argv[1]
print len(lists[myarg]) 
```

您注意到您的脚本中有 13 个列表 - 其中有很多类似的数据（或需要以类似方式处理的数据），这表明您需要数据结构，而不是平面变量。它会让你的生活轻松很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T17:47:54.493

因为这是可能的，并且认为@Lattyware 的答案是正确的，所以你**可以**这样做：

```
import sys
list1 = ["A", "B", "C"]
list2 = [1, 2, 3]

myarg = sys.argv[1]

print len(globals().get(myarg, [])) 
```

如果它打印`0`，那么你在命令行上有一个错误的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:47:23.843

你不应该，但如果你真的想/必须这样做，你可以使用`globals()`：

```
print len(globals()[myarg]) 
```

首先确保`myarg`是声明变量的名称：`if myarg in globals(): ...`

# php - 如何抓取此类网址

> ID：13324469
> 
> 赞同：-3
> 
> 时间：2012-11-10T17:43:09.937
> 
> 标签：php, web-crawler

我正在使用 PHP Simple HTML DOM Parser。我怎样才能让它通过这样的 URL 进行爬网。 [http://www.example.com/categories/index.php?id=](http://www.example.com/categories/index.php?id=)`number from 1-1000` &article

通过 URL 爬行应该是这样的：

```
http://www.example.com/categories/index.php?id=1&article First URL
http://www.example.com/categories/index.php?id=2&article Second URL
http://www.example.com/categories/index.php?id=3&article Third URL
etc.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:49:35.633

使用`for`声明？

制作一个使用 id= 爬行的页面`$id`，带有`$id`查询字符串，并在下载后自动重新加载页面，`$id`每次递增直到 1000？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:09:00.237

您可以导出 post 方法。如果您不使用 1-500 之间的所有数字，则必须使用爆炸和列表导出

```
<?php
list($a,$b,$c)=explode(' ','number from 1-5');
list($start,$end)=explode('-',$c);
for( $i=$start ; $i<=$end; $i++)
    echo "http://www.example.com/categories/index.php?id={$i}&article".'<br/>';
?> 
```

# extjs - 组合框 在开始之前，我对我的英语感到抱歉..我说得不好..所以我在 ExtJS4 中的 Combobox 有问题..我试图在我的组合框列表中添加一个空行但它不行..我有列表有一个空行但是当我尝试选择它时我不能..所以如果有人可以帮助我或有一个例子请 Ext.require([ 'Ext.form.*', 'Ext.data.*', 'Ext. 问问题 问问题 2012-11-10T17:43:13.287 2973 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在开始之前，我对我的英语感到抱歉..我说得不好..所以我在 ExtJS4 中的 Combobox 有问题..我试图在我的组合框列表中添加一个空行但它不行..我有列表有一个空行但是当我尝试选择它时我不能..所以如果有人可以帮助我或有一个例子请 Ext.require([ 'Ext.form.*', 'Ext.data.*', 'Ext.tip.QuickTipManager' ]); Ext.onReady(function () { Ext.QuickTips.init(); var form = Ext.create('Ext.form.Panel', { renderTo: 'docbody', title: ' ', autoHeight: true, width: 600, bodyPadding: 10, defaults: { anchor: '100%', labelWidth: 100 }, items: [{ xtype: 'fieldcontainer', combineErrors: true, msgTarget: 'side', fieldLabel: ' Name', items: [{ width: 50, xtype: 'combo', mode: 'local', triggerAction: 'all', forceSelection: true, editable: false, selectOnFocus: true, name: 'title', displayField: 'name', valueField: 'value', tpl: '<tpl for=".">{name:defaultValue("--")}</tpl>', queryMode: 'local', store: Ext.create('Ext.data.Store', { fields: ['name', 'value'], data: [{ name: 'Mvr', value: 'mr' }, { name: 'Mrs', value: 'mrs' }, { name: 'Miss', value: 'miss' }], listeners: { 'load': function (store, records, options) { this.insert(0, '--'); } } }) }] }] }); }); 使用 GLSL 着色器绘制线条，如何在片段着色器中进行绘制？ 我读过一些论文，上面说他们可以检测轮廓、边缘、脊并使用 GLSL 着色器画一条线。但是在实现中，他们说他们“访问”了相邻的像素并做了一些事情。这怎么可能？ 这是有问题的论文 http://www.google.co.th/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CDEQFjAC&url=http%3A%2F%2Fcg.postech.ac.kr% 2Fresearch%2Fline_drawings_via_abstracted_shading%2Fline-drawing-s07.pdf&ei=I5GeUO-pMcKzrAf8_4DICw&usg=AFQjCNE7D9nMVKWvYwvNUaHo5S1ZfrG10A&sig2=CmnD6hbD6-0EYkvv-Bj3LQ 它在第 3 节，渲染线。他们最初说的是 GLSL 着色器，但后来他们突然谈到对像素组进行采样。 我正在研究渲染后没有图像处理的非真实感渲染。因此，如果在 GLSL 着色器中完成，GPU 的使用可能是最佳的。 extjscomboboxextjs4 4 1 回答 1 This answer is useful 0 除非向您的商店添加记录会破坏程序逻辑中的其他内容，否则我建议您这样做并摆脱模板。 Ext.require([ 'Ext.form. ', 'Ext.data. ', 'Ext.tip.QuickTipManager' ]); Ext.onReady(function() { Ext.QuickTips.init(); var form = Ext.create('Ext.form.Panel', { renderTo: Ext.getBody(), title : ' ', autoHeight: true, width : 600, bodyPadding: 10, defaults: { anchor: '100%', labelWidth: 100 }, items : [ { xtype : 'fieldcontainer', combineErrors: true, msgTarget: 'side', fieldLabel: ' Name', items : [ { width: 50, xtype: 'combo', mode: 'local', triggerAction: 'all', forceSelection: true, editable: false, selectOnFocus : true, name: 'title', displayField: 'name', valueField: 'value', //tpl: '<tpl for=".">{name:defaultValue("--")}</tpl>', queryMode: 'local', store: Ext.create('Ext.data.Store', { fields : ['name', 'value'], data : [ {name : 'Mr', value: 'mr'}, {name : 'Mrs', value: 'mrs'}, {name : 'Miss', value: 'miss'} ], listeners : { 'load' : function (store, records, options) { store.add({name: '--', value: null}); }} }) } ] } ] }); }); 于 2012-11-11T00:35:08.723 回答 Related 4 php - 将多维数组信息插入数据库 2 java - 发现一个随机加号，没有语法错误 5 amazon-ec2 - 自行终止的 AWS EC2 实例？ 4 javascript - jQuery检查每个链接的点击 1 c++ - 乌布拉斯矢量指针 2 javascript - 如何关闭rails中的javascript连接？ 2 iphone - XCode 4.3.2 中的自定义字体 1 visual-studio-2010 - 如何在 VS 2010 中让错误突出显示在滚动条附近？ 0 javascript - 像 window.showModalDialog 一样将参数数组传递给 window.open 1 python - 对相似的 URL 模式进行分组 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13324470
> 
> 赞同：2
> 
> 时间：
> 
> 标签：extjs, combobox, extjs4

在开始之前，我对我的英语感到抱歉..我说得不好..所以我在 ExtJS4 中的 Combobox 有问题..我试图在我的组合框列表中添加一个空行但它不行..我有列表有一个空行但是当我尝试选择它时我不能..所以如果有人可以帮助我或有一个例子请

```
Ext.require([
    'Ext.form.*',
    'Ext.data.*',
    'Ext.tip.QuickTipManager'
]);

Ext.onReady(function () {
    Ext.QuickTips.init();

    var form = Ext.create('Ext.form.Panel', {
        renderTo: 'docbody',
        title: ' ',
        autoHeight: true,
        width: 600,
        bodyPadding: 10,
        defaults: {
            anchor: '100%',
            labelWidth: 100
        },
        items: [{
            xtype: 'fieldcontainer',
            combineErrors: true,
            msgTarget: 'side',
            fieldLabel: ' Name',
            items: [{
                width: 50,
                xtype: 'combo',
                mode: 'local',
                triggerAction: 'all',
                forceSelection: true,
                editable: false,
                selectOnFocus: true,
                name: 'title',
                displayField: 'name',
                valueField: 'value',
                tpl: '<tpl for="."><div class="x-combo-list-item">{name:defaultValue("--")}</div></tpl>',
                queryMode: 'local',
                store: Ext.create('Ext.data.Store', {
                    fields: ['name', 'value'],
                    data: [{
                        name: 'Mvr',
                        value: 'mr'
                    }, {
                        name: 'Mrs',
                        value: 'mrs'
                    }, {
                        name: 'Miss',
                        value: 'miss'
                    }],
                    listeners: {
                        'load': function (store, records, options) {
                            this.insert(0, '--');
                        }
                    }
                })
            }]
        }]

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T00:35:08.723

除非向您的商店添加记录会破坏程序逻辑中的其他内容，否则我建议您这样做并摆脱模板。

Ext.require([ 'Ext.form. *', 'Ext.data.* ', 'Ext.tip.QuickTipManager' ]);

```
Ext.onReady(function() {
Ext.QuickTips.init();

  var form = Ext.create('Ext.form.Panel', {
    renderTo: Ext.getBody(),
    title   : ' ',
    autoHeight: true,
    width   : 600,
    bodyPadding: 10,
    defaults: {
        anchor: '100%',
        labelWidth: 100
    },
    items   : [
                {
                    xtype : 'fieldcontainer',
                    combineErrors: true,
                    msgTarget: 'side',
                    fieldLabel: ' Name',
                    items : [
                        {
                            width:          50,
                            xtype:          'combo',
                            mode:           'local',
                            triggerAction:  'all',
                            forceSelection: true,
                            editable:       false,
                             selectOnFocus : true,
                            name:           'title',
                            displayField:   'name',
                            valueField:     'value',
                            //tpl: '<tpl for="."><div class="x-combo-list-item">{name:defaultValue("--")}</div></tpl>',
                            queryMode: 'local',
                            store:          Ext.create('Ext.data.Store', {
                                fields : ['name', 'value'],
                                data   : [
                                    {name : 'Mr',   value: 'mr'},
                                    {name : 'Mrs',  value: 'mrs'},
                                    {name : 'Miss', value: 'miss'}
                                ],
                                listeners :
                                    {
                                    'load' : function (store, records, options) {
                                        store.add({name: '--', value: null});        
                                    }}
                            })
                        }
                    ]
                }
            ]

    });
});​ 
```

# opengl - 使用 GLSL 着色器绘制线条，如何在片段着色器中进行绘制？

> ID：13324471
> 
> 赞同：0
> 
> 时间：2012-11-10T17:43:13.097
> 
> 标签：opengl, glsl, shader, npr

我读过一些论文，上面说他们可以检测轮廓、边缘、脊并使用 GLSL 着色器画一条线。但是在实现中，他们说他们“访问”了相邻的像素并做了一些事情。这怎么可能？

这是有问题的论文 [http://www.google.co.th/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CDEQFjAC&url=http%3A%2F%2Fcg.postech.ac.kr% 2Fresearch%2Fline_drawings_via_abstracted_shading%2Fline-drawing-s07.pdf&ei=I5GeUO-pMcKzrAf8_4DICw&usg=AFQjCNE7D9nMVKWvYwvNUaHo5S1ZfrG10A&sig2=CmnD6hbD6-0EYkvv-Bj3LQ](http://www.google.co.th/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CDEQFjAC&url=http%3A%2F%2Fcg.postech.ac.kr%2Fresearch%2Fline_drawings_via_abstracted_shading%2Fline-drawing-s07.pdf&ei=I5GeUO-pMcKzrAf8_4DICw&usg=AFQjCNE7D9nMVKWvYwvNUaHo5S1ZfrG10A&sig2=CmnD6hbD6-0EYkvv-Bj3LQ)

它在第 3 节，渲染线。他们最初说的是 GLSL 着色器，但后来他们突然谈到对像素组进行采样。

我正在研究渲染后没有图像处理的非真实感渲染。因此，如果在 GLSL 着色器中完成，GPU 的使用可能是最佳的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:50:37.297

在不阅读论文的情况下，我认为它们可能意味着从纹理中收集读取，而不是分散写入到帧缓冲区，这对于着色器来说一直是可能的。从 OpenGL-4 开始，甚至可以从着色器进行分散写入，称为图像写入，但速度相当慢。无论如何，对于线路检测，您只需要收集读取，所以这不是问题。

# objective-c - writeToFile:atomically: 会阻止异步读取吗？

> ID：13324473
> 
> 赞同：2
> 
> 时间：2012-11-10T17:43:43.910
> 
> 标签：objective-c, ios, nsfilemanager

有几次在使用我的应用程序时，我在后台处理一些大数据。（当用户需要它时准备好。某种索引。）当这个后台进程完成时，它需要将数据保存在缓存文件中，但由于这真的很大，所以需要几秒钟。

但同时用户可能会打开一些显示从磁盘加载的图像和文本的对话框。如果在保存后台进程数据的同时发生这种情况，用户界面需要等待，直到保存过程完成。（这是不希望的，因为用户必须等待 3-4 秒才能加载磁盘中的图像和文本！）

所以我正在寻找一种限制写入磁盘的方法。我想把数据分成几块，并在保存不同的块之间插入一个短暂的延迟。在此延迟中，用户界面将能够加载所需的文本和图像，因此用户将无法识别延迟。

目前我正在使用`[[array componentsJoinedByString:'\n'] writeToFile:@"some name.dic" atomically:YES]`. 这是一个非常高级的解决方案，不允许任何定制。如何在没有大数据的情况下实现一个文件而不将所有数据保存为一次性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:58:12.423

> writeToFile:atomically: 会阻止异步读取吗？

不，这就像写入一个临时文件。成功完成后，将临时文件重命名为目标（如果存在，则替换目标中的预先存在的文件）。

你应该考虑如何分解你的数据，所以它不会那么慢。如果它全部按字符串/行划分并且需要几秒钟，那么划分数据库的简单方法是按第一个字符。当然，根据您访问、搜索和更新索引/数据库的方式，可能会想出更好的解决方案。

> …在保存不同的块之间插入一个短暂的延迟。在此延迟中，用户界面将能够加载所需的文本和图像，因此用户将无法识别延迟。

不。只需自己实现原子写入的移动/替换（在索引和写入期间写入临时文件）。然后，您的应用程序可以显式序列化读取和写入命令，以便快速、一致和正确地访问这些共享资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:57:26.033

您必须查看 NSFileHandle 类。使用 seekToEndOfFile 和 writeData:(NSData *)data 的组合，你可以做你想做的工作。

# android - Android 相机预览始终显示在 FrameLayout 中的其他 SurfaceView 上方

> ID：13324480
> 
> 赞同：1
> 
> 时间：2012-11-10T17:44:50.907
> 
> 标签：android, android-camera

在 Android 2.3 应用程序中，我曾经支持两个摄像头：一个是内置的，一个是使用 Wi-Fi 的外部 MJPG 流式传输。内置摄像头必须一直在录制视频，并且用户必须能够在这些视频之间切换视图。因此，每个相机都有一个专用的 SurfaceView 可供绘制。由于添加到 FrameLayout 的最后一个子级具有更高的 Z 顺序，因此我以编程方式将所需的相机视图添加到最后一个 FrameLayout 以使其可见。我不能跳过添加内置摄像头，因为它无法在没有预览显示的情况下录制视频。

此方案不再适用于 Android 4：内置摄像头预览始终显示，无论是先添加还是最后添加。我在视图上使用了“setVisibility”方法，并注意到如果将其中一个视图设置为不可见（或消失），那么它们都不会显示。ViewGroup 的“bringChildToFront”方法也没有效果。

那么，是否有一些解决方法可以使这项工作在 Android 4 上运行？而且我知道拥有多个 SurfaceView 被认为是不好的。一些代码如下。

框架布局：

```
<FrameLayout android:id="@id/data"
             android:layout_width="fill_parent" android:layout_height="fill_parent"/> 
```

填充布局的代码（不再适用于 Android 4）：

```
private void setCorrectView() {
    data.removeAllViews();

    List<Recorder> others = recorders.getOthers();
    for (Recorder other : others) {
        addToTheView(other);
    }

    addToTheView(recorders.getCurrent());
}

private void addToTheView(Recorder recorder) {
    View view = recorder.getView(this); // get recorder's surface view
    data.addView(view);
} 
```

如果我使用 XML 中的 FrameLayouts，效果相同：

```
<FrameLayout android:layout_width="fill_parent" android:layout_height="fill_parent"
         xmlns:android="http://schemas.android.com/apk/res/android">

    <FrameLayout
        android:id="@id/data"
        android:layout_width="fill_parent" android:layout_height="fill_parent"/>

    <FrameLayout
        android:id="@+id/data_invisible"
        android:layout_width="fill_parent" android:layout_height="fill_parent"/>

</FrameLayout> 
```

无论我把内置相机的表面视图放在哪里 - 它总是显示出来。看起来内置摄像头的预览现在始终在 Android 4 中处于首位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:26:52.977

回答我自己。为了完成这项工作，我在启动相机**之前将视图的可见性设置为 View.VISIBLE 并****在之后**将其设置为 View.INVISIBLE 。[此](http://soledadpenades.com/2011/04/07/how-to-hide-the-camera-preview-in-android/)链接可能会有所帮助。

# oop - 我应该使用哪种设计模式来执行针对不同对象的不同方法？

> ID：13324481
> 
> 赞同：1
> 
> 时间：2012-11-10T17:44:56.030
> 
> 标签：oop, design-patterns

一个类`A`有3个`boolean`字段，这个类有一组对象。我需要对每个对象执行不同的处理，就其 3 个字段的组合而言。我应该采用什么模式？

```
public class A {
    boolean a, b, c;
} 
```

谢谢你。

* * *

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:30:17.113

查找`registry`图案。本质上，您定义一个接口`AHandler`并为您要处理的每个组合实现它。

然后，创建一个`Map<A, AHandler>`并使用处理程序对其进行静态初始化。查找此地图以找到处理每个组合的处理程序。

# android - 将 ScrollView 添加到 RelativeLayout 会更改 wigdets 的位置

> ID：13324482
> 
> 赞同：1
> 
> 时间：2012-11-10T17:44:59.620
> 
> 标签：android, scrollview, android-relativelayout

以下是我的布局的 XML。它明确指出标题、时间和描述 TextView 应位于警报图像下方。但是，如屏幕截图所示，`TextView`s 已移入`ImageView`. 为什么会发生这种情况，我该如何解决？当我添加滚动视图时，问题才开始发生。

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/img_alarm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/alarm"
        android:layout_centerInParent="true"
        android:contentDescription="@string/content_description_layout_alarm"/>

    <TextView
        android:id="@+id/lbl_alarm_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20dip"
        android:textStyle="bold"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/img_alarm"
        android:layout_alignLeft="@+id/img_alarm"
        android:text="@string/empty"
        />   
        <TextView
        android:id="@+id/lbl_alarm_time"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="20dip"
        android:textStyle="bold"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/img_alarm"
        android:layout_alignRight="@+id/img_alarm"
        android:text="@string/empty"
        />  
      <TextView
        android:id="@+id/lbl_alarm_description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_below="@+id/lbl_alarm_title"
        android:layout_alignLeft="@+id/lbl_alarm_title"
        android:layout_alignRight="@+id/lbl_alarm_time"
        android:maxLines="1"
        android:ellipsize="marquee"
        android:text="@string/empty"
        />   

    <Button
        android:id="@+id/btn_stop"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/lbl_alarm_description"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="5dip"
        android:paddingLeft="20dip"
        android:paddingRight="20dip"
        android:text="@string/stop_layout_alarm"
        android:gravity="center" />

</RelativeLayout>
</ScrollView> 
```

**图片**

![在此处输入图像描述](../Images/0f5716e7bdb39f9fc2f4a7fae417c636.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:00:35.780

可爱的应用程序:)

嗯......不知道它为什么这样做，看起来你有正确的代码，没有破坏eclipse。但我也有一些奇怪的相对布局错误，我不明白，也没有时间调试。

我知道另一种方法可以完成你正在寻找的东西 -

有一个包含线性布局而不是相对布局的滚动视图。做这些事情：

1.  对于线性布局，您可以设置方向 = 垂直，以便它仍然是自上而下的顺序。
2.  对于需要两个文本视图的部分，其中一个右对齐，另一个右对齐，您需要另一个内部线性布局，其方向=水平。然后让一个元素左对齐父元素，另一个元素右对齐父元素。向这个线性布局添加一个 weightSum=1 属性，并让两个文本视图中的每一个 layout_width=0.5 使每个都是屏幕宽度的一半
3.  将 weightSum=1 属性应用于最外层的线性布局，并查看内部的每个元素，使其 layout_weight 总和为 1。 layout_weight 将允许元素占据屏幕上那么多的空间。就像如果您将 imageView 设置为 android:layout_weight=0.8 那么它将占据屏幕的 80% ......因为从数学上讲， (layout_weight/weightSum) = (.08/1) = 80%

尝试使用该机制，如果应该工作:) 如果它令人困惑，我可以给出代码示例

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:weightSum="1">

        <ImageView
            android:id="@+id/img_alarm"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:src="@drawable/alarm"
            android:layout_weight="0.7"
            android:contentDescription="@string/content_description_layout_alarm"/>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.1">

            <TextView
                android:id="@+id/lbl_alarm_title"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:textSize="20dip"
                android:textStyle="bold"
                android:text="@string/empty"
                />   
                <TextView
                android:id="@+id/lbl_alarm_time"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:textSize="20dip"
                android:textStyle="bold"
                android:text="@string/empty"
                />  

        </LinearLayout>

          <TextView
            android:id="@+id/lbl_alarm_description"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="0.1"
            android:maxLines="1"
            android:ellipsize="marquee"
            android:text="@string/empty"
            />   

        <Button
            android:id="@+id/btn_stop"
            android:layout_weight="0.1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="5dip"
            android:paddingLeft="20dip"
            android:paddingRight="20dip"
            android:text="@string/stop_layout_alarm"
            android:gravity="center" />

    </LinearLayout>
</ScrollView> 
```

我希望这至少值得为此努力：D

# java - GWT 地点与活动屏幕的比率？

> ID：13324484
> 
> 赞同：1
> 
> 时间：2012-11-10T17:45:18.087
> 
> 标签：java, gwt, gwt-places, gwt-activities

我正在尝试编写一个 GWT 应用程序，它为每个“页面”（位置）重用相同的模板。该应用程序有 4 个主要“页面”：

*   仪表板页面 ( `http://www.mywebapp.com/#dashboard`)
*   计算器页面 ( `http://www.mywebapp.com/#calc`)
*   配置器页面 ( `http://www.mywebapp.com/#config`)
*   登录页面 ( `http://www.mywebapp.com/#login`)

每个“页面”都具有相同的模板外观：(1) 包含徽标和导航菜单的标题部分，(2) 包含“页面”特定内容的内容部分（即，对于`#dashboard`place、`#login`place 等），以及 (3) 包含一些链接的页脚部分。所以你看，从页面到页面的唯一变化是内容部分。就像一个普通的模板网站。

问题是，每个“页面”（位置）实际上是一个相当复杂的 UI，其中包含许多不同的面板，其中包含许多小部件。当用户与应用程序交互时，这些面板会出现和消失，并且显示会一直在变化。例如，在`#calc`页面上，用户可以选择显示计算器的“模式”：作为*Basic*或*Advanced*。当用户选择*Advanced*时，将显示几个附加面板（除了*Basic*面板）。

能够将此类操作保留在历史记录中会很好，以便用户可以在*基本*或*高级*模式下为应用添加书签，例如：

*   `http://www.mywebapp.com/#calc/basic`; 或者
*   `http://www.mywebapp.com/#calc/advanced`

**这是问题所在：**

我们已经在这里进行了几个“级别”的活动/地点。在“app”级别，我们有下载时需要向用户显示的模板`MyWebAppModule implements EntryPoint`。这`TemplatePlace`是在调用之前向 HistoryHandler 注册的默认/初始位置：

```
public class MyWebAppModule implements EntryPoint {
    @Override
    public void onModuleLoad() {
        // ...

        // The first place we go to when this module downloads.
        TemplatePlace templatePlace = getSomehow();

        historyHandler.register(placeController, eventBus, templatePlace);
        historyHandler.handleCurrentHistory();
    }
} 
```

接下来，我们有所有不同的“页面”：`DashboardPlace`、、`CalculatorPlace`等等，它们都有自己独特的视图/显示。例如，当用户单击*Calculator*链接转到 时`CalculatorPlace`，它应该呈现与他们想要在 Basic 或 Advanced 模式下使用计算器时不同的视图。

最后，我们在每个页面/位置内都有不同的显示区域、面板等，例如`BasicCalculatorPlace`和`AdvancedCalculatorPlace`。这就是我所说的不同“级别”导航的意思：

1.  应用程序级（适用于所有页面/位置的模板）
2.  页面或地方级别
3.  显示或面板级

### 问题：

当用户执行以下所有操作时，我想实现可收藏的 URL（位置）：

*   转到主页 ( `http://www.mywebapp.com`)
*   转到任何“页面”（`http://www.mywebapp.com/#calc`等）
*   使用导致页面特定面板或显示配置（`http://www.mywebapp.com\#calc\#advanced`等）的页面/位置

**我要创建多少活动和地点？有多少个 ActivityManager？**我想我问的是每个“级别”的可书签 UI 的活动/地点需要多细。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:08:53.320

我认为每个“页面”只需要一个 ActivityManager 和一个 Activity。您可以将“页眉”和“页脚”制作成可以在每个页面中重复使用的小部件。

您可以使用标记为同一页面的不同状态添加书签。例如，您可以将标记设置为“基本” - 它会告诉 CalculatorActivity 显示基本计算器面板。URL 将如下所示：

```
www.myApp.com/?#Calculator:basic 
```

当用户单击小部件以选择高级选项时，您可以

```
PlaceController.goTo(new CalculatorPlace("advanced")); 
```

CalculatorActivity 将获得 CalculatorView（已显示），它会看到令牌设置为“高级”，它会指示该视图显示高级面板。

请注意，您可以根据需要使您的令牌尽可能详细，然后在 Activity 中解析它们。例如，你可以有类似的东西

```
www.myApp.com/?#Calculator:option=basic&position=top&theme=pink 
```

# javascript - 尝试运行简单的 hello world clojurescript 的 .js 输出时出现“无法设置未定义的属性错误”

> ID：13324490
> 
> 赞同：3
> 
> 时间：2012-11-10T17:46:09.180
> 
> 标签：javascript, node.js, clojure, clojurescript

我正在编译：

```
(ns example.hello)
(js/console.log "Hello from ClojureScript!") 
```

使用此配置：

```
(defproject lein-cljsbuild-example "1.2.3"
  :plugins [[lein-cljsbuild "0.2.9"]]
  :cljsbuild {
    :builds [{
        :source-path "src-cljs"
        :compiler {
          :output-to "war/javascripts/mainz.js"  ; default: main.js in current directory
          ;:optimizations :simple
          :target :nodejs
          ;:pretty-print true
          }}]}) 
```

它输出的文件太大而无法放在这里，但给出了错误：

```
goog.debug.Error = function(opt_msg) {
                 ^
TypeError: Cannot set property 'Error' of undefined
    at Object.<anonymous> (/Users/myuser/Clojure/cljstest/war/javascripts/mainz.js:503:18)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T01:25:39.377

好吧，在您提供的项目配置中，您的`:optimizations :simple`子句被注释掉了。这意味着它不会有任何 Google Closure 优化，这意味着输出的 JavaScript*不会*在一个足够的文件中，而是分成许多文件。`base.js`这也意味着您必须从 Google Closure 库中明确包含。

看起来这就是这里发生的事情，尽管可能还有其他事情发生......我实际上对 ClojureScript 的 node.js 输出并不熟悉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:00:13.477

该错误已通过重新安装 leiningen 并进行干净构建来解决。

# c++ - 如何在 Windows 7 中安装 MinGW 64 位

> ID：13324496
> 
> 赞同：6
> 
> 时间：2012-11-10T17:46:48.573
> 
> 标签：c++, c, windows-7, eclipse-cdt, mingw-w64

我想在 Eclipse CDT 64 位中工作，我已经将它安装在我的机器上。但在那之后我才知道它需要 MinGW 才能工作。但是我没有找到任何可以知道如何设置 MinGW64 位的网站。任何指针都会对我很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:52:38.260

第一次在谷歌上点击“mingw 64 bit eclipse”： http: [//pinyotae.blogspot.no/2010/05/eclipse-mingw-x64.html](http://pinyotae.blogspot.no/2010/05/eclipse-mingw-x64.html)

# javascript - 客户端应用程序的模块化方法

> ID：13324502
> 
> 赞同：0
> 
> 时间：2012-11-10T17:47:18.753
> 
> 标签：javascript, web-applications, client-side, modularity

[这是我之前的问题](https://stackoverflow.com/questions/13312962/how-to-make-component-based-single-page-web-application)的后续。

*假设有一个带有登录*表单和*注册*链接的网页。当用户单击该链接时，会显示一个新*的注册*表单。假设我还为这两种形式创建了单独`HTML`的`CSS`、 和`JavaScript`文件以实现模块化。

现在网页应该包含一些`JavaScript`代码来加载*登录*表单，当页面加载时，点击链接加载*注册*表单。

这种方法有意义吗？有没有实现这种方法的框架/库？你会建议如何实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:53:57.623

我认为这个想法有一些问题。首先，您应该知道有一些老式方法可以在主文档中加载另一个完全分离的页面。使用`"iframe"`标签是做这种事情的最流行和最不安全的方法之一。显示弹出窗口和使用`"window.open"`是另一种可以显示新窗口并完全分开加载特定 url 的方式。但...

有很多原因，我现在建议你不要以上述任何方式这样做。您可以简单地使用一些库，例如`"JQuery"`在当前页面中加载另一个 html，而无需加载会导致性能问题的新资源。我相信你应该搜索`"JQuery $.get"`，你会看到它是多么容易。

希望能帮助到你。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:54:04.407

是的，这对我来说很有意义。我真的很喜欢这种方法，因为我认为将应用程序分成更小的块将使开发和维护变得更加容易。

基本上，您需要通过将一个和标记分别附加到html 部分来加载`css`和文件。要加载模块的一部分，您可以按照其他答案的建议简单地使用[jQuery.get()方法。](http://api.jquery.com/jQuery.get/)`js``link``script``head``html`

我试图实现它。我最近发布了我在这方面的工作。一个小的代码库。实际上，在我的方法中，每个模块都有自己的文件夹，其中包含 js、html 和 css 文件，以及可选的服务器端文件，例如 php 或 aspx 文件，将由 javascript 调用以查询服务器。

[这是github中名为Yuva的项目页面](https://github.com/arashmilani/Yuva)

看看，让我知道这对你是否有意义。

# javascript - JavaScript 中的正则表达式如何匹配 3？

> ID：13324504
> 
> 赞同：0
> 
> 时间：2012-11-10T17:47:23.057
> 
> 标签：javascript

这是来自 JavaScript 正则表达式描述的语句：

> `^`当它作为字符集模式中的第一个字符出现时，具有不同的含义。
> 例如，`/[^a-z\s]/`匹配`'3'`in `"I have 3 sisters"`。

怎么`^`搭配`3`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:49:22.360

这里的`^`运算符表示否定，表示匹配任何不是空格或字母（az）的字符。它仍将匹配大写字母（AZ）

您可以参考这个网址：[http](http://www.regular-expressions.info/reference.html) ://www.regular-expressions.info/reference.html了解更多关于正则表达式的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:54:37.583

我猜这是一个简单的误解。^ 与“3”不匹配。/[^az\s]/ 匹配“3”。

# ios - UIScrollView 挤压 UIImageView 图像

> ID：13324512
> 
> 赞同：0
> 
> 时间：2012-11-10T17:47:51.067
> 
> 标签：ios, uiscrollview, uiimageview, uiimage

我有以下代码`ViewDidLoad`，它压缩了我的 UIImage/UIImageView。我希望图像填充 UIScrollView。

```
[super viewDidLoad];

_imageHolder = [[UIImageView alloc]initWithFrame:self.view.frame];
_scrollView = [[UIScrollView alloc]initWithFrame:self.view.frame]; 

[_scrollView setBackgroundColor:[UIColor purpleColor]];

// Tell the scroll view the size of the contents
self.scrollView.contentSize = self.view.frame.size;

self.scrollView.delegate = self;
self.scrollView.scrollEnabled = YES;

FfThumbnailData* thumbData = [self.arrayOfImages objectAtIndex:self.thisImageIndex];
UIImage* fullSizedImage = [[UIImage alloc]initWithContentsOfFile:thumbData.path];
[self.imageHolder setImage:fullSizedImage];
float x = fullSizedImage.size.width;
float y = fullSizedImage.size.height;
CGRect rect = CGRectMake(0, 0, x, y);
NSLog(@"Size of image: %@", NSStringFromCGRect(rect));
//
//[self.imageHolder setImage:[UIImage imageNamed:@"P1020486.png"]];

[self.scrollView addSubview:_imageHolder];
[self.view addSubview:self.scrollView];

_imageHolder.contentMode = UIViewContentModeScaleAspectFit; 
```

为了清楚起见，我将 UIScrollView 的背景设置为紫色：

![被 UIScrollView 压扁](../Images/9596dd0ba8c2ad7716bfd3a5063ed5a5.png)[http://i1219.photobucket.com/albums/dd427/Dave_Chambers/IMG_0315.png](http://i1219.photobucket.com/albums/dd427/Dave_Chambers/IMG_0315.png)

我应该补充一点，在我放大然后缩小之后，图像被正确地放置在滚动视图中并且没有被压扁。

奇怪的是，注释行`[self.imageHolder setImage:[UIImage imageNamed:@"P1020486.png"]];`正确显示了虚拟图像 P1020486.png。

此外，当我下载我的应用程序数据时，图像看起来正确，并且确实是 iPad 图像的正确大小 - {1936, 2592} - 我的 NSLog 行报告的大小`NSLog(@"Size of image: %@", NSStringFromCGRect(rect));`

此外，在我需要 UIScrollView（用于在全尺寸视图控制器中缩放照片）之前，我访问相同的图像并使用以下代码通过动画从一个视图控制器显示到另一个视图控制器，并且它可以正确显示。至关重要的是，这第二部分代码缺少 UIScollview。

```
-(void)animateTransition:(int)buttonInPositon {
@try {

FfThumbnailData* thumbData = [self.images objectAtIndex:buttonInPositon];
UIImage* fullSizedImage = [[UIImage alloc]initWithContentsOfFile:thumbData.path];
fullSize = [[FullSizeViewController alloc]init];
fullSize.imageHolderGhost.contentMode = UIViewContentModeScaleAspectFit;
fullSize.arrayOfImages = self.images;
fullSize.imageToPresent = fullSizedImage;
fullSize.numberOfImages = self.images.count;
fullSize.thisImageIndex = buttonInPositon;
[fullSize.imageHolderGhost setImage:fullSizedImage];

float screenWidth = self.view.bounds.size.width;
float screenHeight = self.view.bounds.size.height;

NSLog(@"ButtonFrame: %@", NSStringFromCGRect(buttonFrame));
[fullSize.view setFrame:CGRectMake(buttonFrame.origin.x, buttonFrame.origin.y, buttonFrame.size.width, buttonFrame.size.height-44)];
NSLog(@"ButtonFrame: %@", NSStringFromCGRect(fullSize.view.frame));

[self.view addSubview:fullSize.view];

fullSize.view.backgroundColor = [UIColor clearColor];
[UIView animateWithDuration:0.9 delay:0 options:UIViewAnimationCurveEaseIn animations:^{

    [fullSize.view setFrame:CGRectMake(0, 0, screenWidth, screenHeight)];

} completion:^(BOOL finished){
    [[self navigationController] pushViewController:fullSize animated:NO];
    self.navigationController.navigationBarHidden = YES;
}];
}
@catch (NSException *exception) {
    NSLog(@"%@", exception);
}
} 
```

为了完整起见，带有 UIScrollView 的代码在一个 VC 中具有以下方法：

```
-(void)presentWithScrollview:(int)buttonInPositon {

FfThumbnailData* thumbData = [self.images objectAtIndex:buttonInPositon];
UIImage* fullSizedImage = [[UIImage alloc]initWithContentsOfFile:thumbData.path];

fullSize = [[FullSizeViewController alloc]init];

fullSize.arrayOfImages = self.images;
fullSize.imageToPresent = fullSizedImage;
fullSize.numberOfImages = self.images.count;
fullSize.thisImageIndex = buttonInPositon;

[[self navigationController] pushViewController:fullSize animated:NO];
    self.navigationController.navigationBarHidden = YES;
} 
```

并且在目标 VC 中，以下方法可能与我的问题有关（`ViewDidLoad`粘贴在此问题的顶部）：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // Set up the minimum & maximum zoom scales
    CGRect scrollViewFrame = self.scrollView.frame;
    CGFloat scaleWidth = scrollViewFrame.size.width / self.scrollView.contentSize.width;
    CGFloat scaleHeight = scrollViewFrame.size.height / self.scrollView.contentSize.height;
    CGFloat minScale = MIN(scaleWidth, scaleHeight);
    //
self.scrollView.minimumZoomScale = minScale;
//Can set this bigger if needs be - match iPhoto
self.scrollView.maximumZoomScale = 2.0f;

[self centerScrollViewContents];
}

- (void)centerScrollViewContents {
CGSize boundsSize = self.scrollView.bounds.size;
//NSLog(@"boundsSize: %@", NSStringFromCGSize(boundsSize));
CGRect contentsFrame = self.imageHolder.frame;
//NSLog(@"contentsFrame: %@", NSStringFromCGRect(contentsFrame));

if (contentsFrame.size.width < boundsSize.width) {
    contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
} else {
    contentsFrame.origin.x = 0.0f;
}

if (contentsFrame.size.height < boundsSize.height) {
    contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
} else {
    contentsFrame.origin.y = 0.0f;
}

self.imageHolder.frame = contentsFrame;
}

#pragma mark - UIScrollViewDelegate

- (UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
// Return the view that we want to zoom
return self.imageHolder;
//return self.scrollViewBar;
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
// The scroll view has zoomed, so we need to re-center the contents
[self centerScrollViewContents];
    } 
```

对此的任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:55:51.343

所以，我自己找到了解决方案。出于某种原因，正如我在对问题的更新中所写的那样，任何放大，然后缩小图像都可以解决图像问题并正确呈现。`viewWillAppear`我在上面添加了这两行`[self centerScrollViewContents];`

```
self.scrollView.zoomScale = 2.0;
self.scrollView.zoomScale = 1.0; 
```

问题解决了

# javascript - kineticjs 矩形填充文本

> ID：13324514
> 
> 赞同：2
> 
> 时间：2012-11-10T17:48:11.910
> 
> 标签：javascript, canvas, kineticjs

我有 KineticJS 矩形已经填充了“蓝色”颜色，我想在这个矩形框上显示文本。但我下面的代码没有显示任何内容。我还需要在单击按钮时分配此标签文本，相同的代码也在下面。

```
drawShape = new Kinetic.Rect({
            id: shapeId,
            name: shapeName,
            x: 0,
            y: 0,
            width: 150,
            height: 40,
            fill: "#00D2FF",
            stroke: "black",
            strokeWidth: 3,
            fillText: "Step" + stepNumber            
        });

function OnApplyPropertiesClick(){
drawShape.fillText(document.getElementById("txtLabel").value);  
} 
```

有什么帮助吗？请。

谢谢比鲁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-17T15:32:22.457

我认为您不能将文本添加到矩形对象，只能添加以下填充类型：

[颜色、线性渐变、径向渐变或图案]

为了解决这个问题，我创建了一个组，然后向其中添加了一个矩形和文本对象，当我想创建一个带有文本的矩形时：

```
var group = new Kinetic.Group({

});

var rectangle = new Kinetic.Rect({

    x: 5,
    y: 5,
    width: 80,
    height: 35,
    fill: "green",
    stroke: "black",
    strokeWidth: 2

});

var rectangleText = new Kinetic.Text({

    x: 15,
    y: 10,
    text: 'test',
    fontSize: 20,
    fontFamily: 'Calibri',
    textFill: 'black'

});

group.add(rectangle);
group.add(rectangleText);
layer.add(group); 
```

您应该能够调整您的听众，然后将其应用于此。

我做了一个 jsfiddle 来说明我的意思：

[http://jsfiddle.net/B85Ff/](http://jsfiddle.net/B85Ff/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:01:08.287

您是否已将 drawShape 添加到任何图层？不会出现在您发布的片段中。此外，您需要在 OnApplyPropertiesClick() 函数的末尾绘制图层（如刷新）。

# facebook - facebook评论框错误：评论插件需要href参数

> ID：13324524
> 
> 赞同：1
> 
> 时间：2012-11-10T17:49:38.473
> 
> 标签：facebook, comments

我在我的网站上为 facebook 评论框使用 facebook 连接应用程序我在[https://developers.facebook.com/blog/post/2009/02/19/commenting-with-facebook-connect/上遵循教程](https://developers.facebook.com/blog/post/2009/02/19/commenting-with-facebook-connect/)

并将这些东西逐步放在我的网站上，它工作正常，但是当我把同样的东西放在我的另一个网站上时，它会告诉我这个错误

评论插件需要一个href参数。

我在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:20:57.873

只需使用官方生成器创建评论插件就可以了：

> [https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

当然，您需要评论插件的链接，只需获取您的实际页面即可。它是评论插件的唯一 ID，因此当您已经收到评论时，您永远不应该更改它。

顺便说一句，你发布的教程链接是 2009 年的。如果你想实现一些东西，下次尝试找到更新的源；）

# youtube-api - youtube API 有时会抛出错误：调用非对象上的成员函数 children()

> ID：13324531
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:50:33.260
> 
> 标签：youtube-api, php

当我启动 php 脚本时，有时可以正常工作，但很多时候它会检索我这个错误

> 致命错误：在第 21 行的 /membri/americanhorizo​​n/ytvideo/rilevametadatadaurlyoutube.php 中的非对象上调用成员函数 children()

这是代码的第一部分

```
// set feed URL
$feedURL = 'http://gdata.youtube.com/feeds/api/videos/dZec2Lbr_r8';

// read feed into SimpleXML object
$entry = simplexml_load_file($feedURL);

$video = parseVideoEntry($entry);

function parseVideoEntry($entry) {      
  $obj= new stdClass;

  // get nodes in media: namespace for media information
  $media = $entry->children('http://search.yahoo.com/mrss/'); //<----this is the doomed line 21 
```

更新：采用的解决方案

```
 for ($i=0 ; $i< count($fileArray); $i++)
  {

    // set feed URL
    $feedURL = 'http://gdata.youtube.com/feeds/api/videos/'.$fileArray[$i];

    // read feed into SimpleXML object
    $entry = simplexml_load_file($feedURL);

   if (is_object($entry))
   {
       $video = parseVideoEntry($entry);

       echo ($video->description."|".$video->length);
       echo "<br>";
    }
     else
     {
       $i--;
     }

 } 
```

在这种模式下，我强制脚本重新检查导致错误的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:59:02.143

您首先调用一个函数：

```
$entry = simplexml_load_file($feedURL); 
```

该函数有一个返回值。您会在该功能的手册页上找到它：

*   [http://php.net/simplexml_load_file](http://php.net/simplexml_load_file)

然后，您以变量的形式使用该返回值，`$entry`而无需验证函数调用是否成功。

因此，您接下来会遇到错误。但是，*您的*错误/错误是您如何对待函数的返回值。

不正确处理返回值就像是在找麻烦。阅读您使用的函数，检查返回值并根据成功或错误条件继续。

```
$entry = simplexml_load_file($feedURL);

if (FALSE === $entry)
{
    // youtube not available.
}
else 
{
    // that's what I love!
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-10T20:09:21.353

有时？真的吗？看看这个：

```
<?php

$dummy; //IN FACT, this var is NULL now

// Will throw exactly the same error you get
$dummy->children(); 
```

为什么？因为，我们可以从对象类型调用方法。

所以，如果你想避免这样的错误，下次你会调用这个方法，确保它是“可能的”。

```
<?php

if ( is_object($dummy) && method_exists($dummy, 'children') ){
   //sure it works
   $dummy->children();
} 
```

# java - lwjgl 为屏幕上的所有项目着色

> ID：13324533
> 
> 赞同：1
> 
> 时间：2012-11-10T17:50:38.410
> 
> 标签：java, colors, lwjgl

我有几个四边形已成功显示在屏幕上，但是当我尝试设置其中一个的颜色时，它会设置所有四边形的颜色。

```
GL11.glColor3f(red,green,blue);

    xh = getXsize() / 2;
    yh = getYsize() / 2;
    GL11.glPushMatrix();
    GL11.glTranslated(x, y, 0);
    GL11.glTranslatef(10.0f, 10.5f, -0.0f); 
    GL11.glRotated(rotate, 0.0f, 0.0f, -1.0f); 
    GL11.glTranslatef(-10.0f, -10.5f, 0.0f);
    GL11.glTranslated(-x, -y, 0);
    GL11.glBegin(GL11.GL_QUADS);
    GL11.glVertex2d(x - xh, y - yh);
    GL11.glVertex2d(x - xh, y + yh);
    GL11.glVertex2d(x + xh, y + yh);
    GL11.glVertex2d(x + xh, y - yh);
    GL11.glEnd();
    GL11.glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:05:30.330

据我所知，您发布的代码中只绘制了一个四边形。无论如何，当您调用`GL11.glColor3f(red,green,blue)`它时，它将应用于您在调用它之后绘制的所有后续四边形。基本上，如果你想要不同颜色的四边形，你需要在每次绘制新的四边形之前调用具有不同值的函数。

您应该在名为“**指定颜色和着色模型”的部分中查看**[此](http://www.glprogramming.com/red/chapter04.html)资源（不是 JWJGL，而是 OpenGL）的以下内容，它更好地解释了如何将颜色应用于简单形状。

# iphone - iOS6 中带有情节提要的模态视图控制器

> ID：13324535
> 
> 赞同：1
> 
> 时间：2012-11-10T17:51:04.383
> 
> 标签：iphone, objective-c, ios, xcode

我是故事板的新手，但在我的新应用程序中，我创建了 2 个视图控制器。在情节提要上，我将它们与模态转接联系起来。我想根据第一个视图控制器的“viewDidLoad”方法中的某个条件启动模态视图控制器。这样做的正确方法是什么，以便我可以根据需要更改 InterfaceBuilder 中的转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:57:36.737

1.  在 Interface Builder 中指定 segue 的标识符。

2.  酌情调用`[self performSegueWithIdentifier:@"yourIdentifierHere" sender:self];`。`viewDidLoad`

请参阅*View Controller Programming Guide*中的[Triggering a Segue Programmatically 。](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html%23//apple_ref/doc/uid/TP40007457-CH6-SW4)

# javascript - 使用 jQuery/CSS 缩小/增长动画

> ID：13324537
> 
> 赞同：2
> 
> 时间：2012-11-10T17:51:39.500
> 
> 标签：javascript, jquery, css, animation, jquery-animate

如何使用 jQuery 和/或 CSS 实现增长/收缩动画？[当](https://www.zaarly.com)您单击按钮时，我可以想到一个示例`Join Now`。

我查看了[animate.css](http://daneden.me/animate/)但他们没有提供这样的动画。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T18:15:25.883

**[演示](http://jsfiddle.net/eYYkS/1/)**- 使用 CSS3`transition-duration`( [W3Schools](http://www.w3schools.com/css3/css3_transitions.asp) ) 和`transform:scale(X,Y);`( [W3Schools](http://www.w3schools.com/css3/css3_2dtransforms.asp) ) 的解决方案。

*更新：*

**[DEMO](http://jsfiddle.net/eYYkS/3/)** - 更进一步，不仅仅是在动画末尾`opacity:0;`添加`display:none;`（通过 jQuery`.hide()`

# c# - 如何在空的 MVC 4 项目模板中添加 ASP.NET 成员资格提供程序？

> ID：13324544
> 
> 赞同：23
> 
> 时间：2012-11-10T17:52:43.250
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, membership-provider

我是 ASP.NET MVC4 的新手。我正在创建一个空的 MVC4 项目模板并尝试将 ASP.NET Membership Provider 添加到其中，但我不明白我该怎么做。我在 Google 中搜索，但所有演示都使用 Internet 应用程序项目模板。

我知道这个问题不好，但我已经花了两天时间。

请为此提供一些建议或教程。

**更新**

根据 Nesim Razon 的建议，我将表单身份验证部分从 MVC4 Web 应用程序（Internet 应用程序模板）复制并粘贴到我的空项目中。但现在我得到了一个例外

> 要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的一个实例。

```
[InitializeSimpleMembership]
public class HomeController : Controller
{

    public ActionResult Index()
    {
        WebSecurity.CreateUserAndAccount("Name", "Password"); // Exception is thrown from there.
        return View();
    }

} 
```

我还在 Web.config 文件中添加了以下指令：

```
<add key="enableSimpleMembership" value="true" /> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-10T20:39:19.957

### 安装它

您需要添加以下 Nuget 包：

*   [实体框架](https://nuget.org/packages/EntityFramework/5.0.0)

*   [Microsoft.AspNet.WebPages.OAuth](https://nuget.org/packages/Microsoft.AspNet.WebPages.OAuth)

    注意：此软件包将自动为您安装所有必需的依赖项。这是已安装的所有 nuget 包的详细列表：

    *   [Microsoft.AspNet.WebPages.WebData](https://nuget.org/packages/Microsoft.AspNet.WebPages.WebData)

        *   [Microsoft.AspNet.WebPages.Data](https://nuget.org/packages/Microsoft.AspNet.WebPages.Data)
    *   [DotNetOpenAuth.AspNet](https://nuget.org/packages/DotNetOpenAuth.AspNet)

        *   [DotNetOpenAuth.OpenId.RelyingParty](https://nuget.org/packages/DotNetOpenAuth.OpenId.RelyingParty)

            *   [DotNetOpenAuth.OpenId.Core](https://nuget.org/packages/DotNetOpenAuth.OpenId.Core)

                *   [DotNetOpenAuth.Core](https://nuget.org/packages/DotNetOpenAuth.Core)

                    *   [CodeContracts.非官方](https://nuget.org/packages/CodeContracts.Unofficial)
        *   [DotNetOpenAuth.OAuth.Consumer](https://nuget.org/packages/DotNetOpenAuth.OAuth.Consumer)

            *   [DotNetOpenAuth.OAuth.Core](https://nuget.org/packages/DotNetOpenAuth.OAuth.Core)

                *   [DotNetOpenAuth.Core](https://nuget.org/packages/DotNetOpenAuth.Core)

                    *   [CodeContracts.非官方](https://nuget.org/packages/CodeContracts.Unofficial)

添加对的引用

*   系统事务

### 测试它

现在为了测试它，将以下内容添加到 web.config 文件（在 下`system.web`）：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

添加以下连接字符串

```
 <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-UnitTestQueries.UI-20121105001038;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-UnitTestQueries.UI-20121105001038.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我所做的是从 Internet 模板中复制控制器、模型、过滤器和视图，然后只修改名称空间等内容，直到您启动并运行它

这是结果（没有样式）

> **登录前**

![在此处输入图像描述](../Images/4b9d8633ef117cf75dc0684acb34dcbc.png)

> **注册**

![在此处输入图像描述](../Images/39e0d81c79c795cc0252dbc07a412cd3.png)

> **登录**

![在此处输入图像描述](../Images/6beb5b2497da58cc475aee3a1858a3e6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:22:52.213

查看[SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)，以获取有关在空模板中设置 SimpleMembership 所需的信息。

你我也想看看斯科特艾伦的非常好的帖子：

[MVC4 AccountController 的风险](http://odetocode.com/Blogs/scott/archive/2012/09/23/perils-of-the-mvc4-accountcontroller.aspx)

[为 ASP.NET MVC 构建您自己的会员系统 - 第一部分](http://odetocode.com/Blogs/scott/archive/2012/10/01/build-your-own-membership-system-for-asp-net-mvc-part.aspx)

和

[为 ASP.NET MVC 构建自己的会员系统 - 第二部分](http://odetocode.com/Blogs/scott/archive/2012/10/01/build-your-own-membership-system-for-asp-net-mvc-part-again.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T04:17:24.700

如果您想使用 Universal Providers 而不是 MVC 4 Internet 模板中包含的 Simple Membership，您可以使用**Mobile 模板**创建一个新的 MVC 4 项目并复制 Account controller + views 并使用正确的 connectionString 和 Forms Auth 部分更新 web.config你应该很高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T03:11:20.497

**ASP NET MVC 5 Web 应用程序中的简单成员关系**

[https://www.youtube.com/watch?v=BsKcVbsMn6w](https://www.youtube.com/watch?v=BsKcVbsMn6w)

一旦开发完成，在项目中实施用户身份验证确实很困难。在本视频中，我演示了如何在那些从一开始就没有实施身份验证的项目中有效地利用 Microsoft 简单成员资格功能。借助此功能，您可以在项目的任何阶段实现身份验证功能。

# svg - 纯 SVG 文档可以指定 favicon.ico 吗？

> ID：13324547
> 
> 赞同：7
> 
> 时间：2012-11-10T17:53:00.340
> 
> 标签：svg, favicon

到达浏览器的纯 SVG 文档能否支持 favicon.ico 规范？我的案例是机器生成的纯 SVG，没有`<html>`或`<head>`可用的标签。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T15:44:15.930

是的，由于 SVG 是 XML，您可以在 SVG 的任何位置添加 (x)html`link`元素：

```
<link xmlns="http://www.w3.org/1999/xhtml" rel="shortcut icon" href="favicon.ico" /> 
```

完全没有必要将它包装在`foreignObject`.
我建议将链接元素作为元素的子`defs`元素，只是为了让 SVG 引擎知道它可以被跳过以进行实际的 SVG 渲染。

请注意，这不是“纯”SVG；它是 xhtml/svg 的混合体——但它应该适用于所有支持 SVG 的浏览器。

# vim - Vimrc 在 cmap 中使用变量

> ID：13324549
> 
> 赞同：4
> 
> 时间：2012-11-10T17:53:11.013
> 
> 标签：vim

我正在编写一段 vimscript 来管理会话。我想让用户配置他们希望将会话保存在哪个目录中，即：

```
let g:sessions_dir = "~/.vim/sessions" 
```

我有许多命令可以让用户创建和加载会话。但我还想提供一个`cmap`让用户通过该目录中的会话选项卡。

```
cmap GSo :wa<CR> :source ~/.vim/sessions 
```

这很有效，用户可以点击 TAB 来循环浏览他们的会话文件。但是，我想`g:sessions_dir`在 cmap 中使用该变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:06:54.400

您可以`cmap`将`execute`. 例如，

```
exe "cmap Gso :wa<CR> :so ".g:sessions_dir 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T22:30:18.817

你可以`<C-r>=`在这里使用：

```
cnoremap GSo :wa<CR> :source <C-r>=g:sessions_dir<CR> 
```

（最后`<CR>`是 for `<C-r>=`，它不会启动命令）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-20T06:53:11.583

另一个例子：

```
let g:work_dir='C:\...\'  " define a new global variable work_dir
:cmap <F1> Explore <C-r>=g:work_dir<CR> 
```

当您在命令行上单击 F1 时，然后输出 `:Ex C:\...\`

或者

```
:cmap WK_DIR Explore <C-r>=g:work_dir<CR> 
```

`WK_DIR`在命令行上键入后，结果与上面相同。

# python - Python列表排序和索引

> ID：13324550
> 
> 赞同：0
> 
> 时间：2012-11-10T17:53:18.297
> 
> 标签：python, deep-copy

我对列表、排序和索引有问题的理解和解决以下问题。这是代码示例：

```
import random as rdm
a=[]
for i in range(3):
    a.append([i,rdm.randint(-5,5)])
print a
b = sorted(a,key=lambda a:a[1])
print b
c = []
for j in range(len(b)):
    c.append(b[j])
print c
c[0][1] = 0
print a
print b
print c 
```

注意改变“C”的一个值是如何改变“b”和“a”的。我怎样才能防止它发生？换句话说。我不想改变“a”的值，不管“b”或“c”发生了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:00:05.717

在您的代码中，当您编写时：

```
c.append(b[j]) 
```

您正在添加`c`对 object 的引用`b[j]`。

如果你想独立于`b`，你必须做一个对象的**深拷贝**。`c``a`

 **```
import copy
b = sorted (copy.deepcopy(a), lambda a : a[1]) 
```**

# c# - 在 TableLayoutPanel Visual Studio 中交换控件

> ID：13324551
> 
> 赞同：6
> 
> 时间：2012-11-10T17:53:33.447
> 
> 标签：c#, vb.net, visual-studio-2010

我需要在 TableLayoutPanel 中交换控件。它们位于不同的行中。我已经尝试了建议的代码，但无济于事。除了删除所有控件并重新添加之外，还有其他解决方案吗？答案可以在 C# 或 VB 中。

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    Dim c1 As Control = Me.tlp.GetControlFromPosition(0, 0)
    Dim c2 As Control = Me.tlp.GetControlFromPosition(0, 1)

    If c1 IsNot Nothing And c2 IsNot Nothing Then
        Me.tlp.SetRow(c2, 0)
        Me.tlp.SetRow(c1, 1)
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T22:10:59.087

这是在 a 中交换控件的代码`TableLayoutPanel`- 您有两个选择。

1）**通过参考控制交换**：

```
Private Sub SwapControls(tlp As TableLayoutPanel, ctl1 As Control, ctl2 As Control)
  Dim ctl1pos As TableLayoutPanelCellPosition = tlp.GetPositionFromControl(ctl1)
  tlp.SetCellPosition(ctl1, tlp.GetPositionFromControl(ctl2))
  tlp.SetCellPosition(ctl2, ctl1pos)
End Sub 
```

它不依赖于控件所在的位置`TableLayoutPanel`- 可能是不同的行、列或两者。

示例用法：

```
SwapControls(TableLayoutPanel1, Button1, Button2) 
```

2）**按列/行索引交换**：

```
Private Sub SwapControls(tlp As TableLayoutPanel, pos1 As TableLayoutPanelCellPosition, pos2 As TableLayoutPanelCellPosition)
  Dim ctl1 As Control = tlp.GetControlFromPosition(pos1.Column, pos1.Row)
  Dim ctl2 As Control = tlp.GetControlFromPosition(pos2.Column, pos2.Row)
  SwapControls(tlp, ctl1, ctl2)
End Sub 
```

示例用法：

```
SwapControls(TableLayoutPanel1, New TableLayoutPanelCellPosition(0, 0), New TableLayoutPanelCellPosition(1, 0)) 
```

解决方案基于MSDN 上的[TableLayoutPanel.SetRow](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.setrow.aspx)帮助文章以及对其反编译表示的一些研究。两者都经过测试并被认为有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T02:14:54.663

如果你有固定长度`TableLayoutPanel`，你可以使用`FlowLayoutPanel`（那么它控制的长度必须相等`FlowLayoutPanel`）：

```
Dim c1 As Control = Button1
Dim c2 As Control = CheckBox1

Dim i1 = FlowLayoutPanel1.Controls.IndexOf(c1)
Dim i2 = FlowLayoutPanel1.Controls.IndexOf(c2)

FlowLayoutPanel1.Controls.SetChildIndex(c1, i2)
FlowLayoutPanel1.Controls.SetChildIndex(c2, i1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T13:00:28.080

在 C# 代码中相同：在任何位置 1 和 2 交换/交换控件：

```
private void SwapControls(TableLayoutPanel tlp, TableLayoutPanelCellPosition cpos1, TableLayoutPanelCellPosition cpos2)
{
    var ctl1 = tlp.GetControlFromPosition(cpos1.Column, cpos1.Row);
    var ctl2 = tlp.GetControlFromPosition(cpos2.Column, cpos2.Row);
    if (ctl1 != null) // position1 can be empty
        tlp.SetCellPosition(ctl1, cpos2);
    if (ctl2 != null) // position2 can be empty
        tlp.SetCellPosition(ctl2, cpos1);
} 
```

使用示例：

```
SwapControls(TableLayoutPanel1, new TableLayoutPanelCellPosition(0, 0), new TableLayoutPanelCellPosition(1, 0)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-10T18:35:44.407

找了一天，一无所获后，我终于在黑暗中拍了一张照片，找到了答案。您需要使用表中控件的 SetChildIndex。见下文...

注意：这仅在您将控件添加到没有行或列索引的 TableLayoutPanel 时才有效。

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    tlp.RowStyles.Clear()
    For i As Integer = 0 To 4
        Dim txt As New TextBox
        txt.Text = i
        txt.Name = "txt" & i
        tlp.Controls.Add(txt) 'this works
        'tlp.Controls.Add(txt, 0, i) 'this will not work when button is clicked
    Next
End Sub

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    Dim c1 As Control = Me.tlp.GetControlFromPosition(0, 0)
    Dim c2 As Control = Me.tlp.GetControlFromPosition(0, 1)

    If c1 IsNot Nothing And c2 IsNot Nothing Then
        tlp.Controls.SetChildIndex(c1, 1)
        tlp.Controls.SetChildIndex(c2, 0)
    End If

End Sub 
```

# redis - ServiceStack MessageFactory 发布

> ID：13324553
> 
> 赞同：4
> 
> 时间：2012-11-10T17:53:47.390
> 
> 标签：redis, messaging, servicestack

我一直在这里查看带有 Redis 的 ServiceStack 消息传递文档：

[https://github.com/ServiceStack/ServiceStack/wiki/Messaging-and-redis](https://github.com/ServiceStack/ServiceStack/wiki/Messaging-and-redis)

它似乎很好地解释了基础知识。我不太了解的是通过 MessageFactory 发布时的差异和适用用例：

```
.CreateMessageProducer.Publish() 
```

和

```
.CreateMessageQueueClient.Publish() 
```

我计划审查代码，但想在此处发布此代码以获得“官方”解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:41:05.273

以下是 和 的`IMessageProducer`API `IMessageQueueClient`：

```
public interface IMessageProducer : IDisposable
{
    void Publish<T>(T messageBody);
    void Publish<T>(IMessage<T> message);
}

public interface IMessageQueueClient : IMessageProducer
{
    void Publish(string queueName, byte[] messageBytes);
    void Notify(string queueName, byte[] messageBytes);
    byte[] Get(string queueName, TimeSpan? timeOut);
    byte[] GetAsync(string queueName);
    string WaitForNotifyOnAny(params string[] channelNames);
} 
```

基本上 a`MessageQueueClient` **也是**a `MessageProducer`，但除了 Publish 之外还包含其他细粒度的方法以从队列中**获取**消息以及发布和订阅任何 MQ 主题。

`Publish<T>`消息客户端和生产者上的类型化API 具有相同的行为。

# python - Python：想要使用字符串作为切片说明符

> ID：13324554
> 
> 赞同：4
> 
> 时间：2012-11-10T17:53:51.693
> 
> 标签：python, string, slice, specifier

假设我有一个`S`带有**字符串** `"1:3"`的变量（或者就此而言，`"1"`， or `"1:"`or `":3"`），并且我想将它用作**list** `L`上的切片说明符。您不能简单地这样做，`L[S]`因为切片所需的参数是`"int:int"`.

现在，我目前有一些丑陋的代码可以解析`S`为它的两个组成部分`int`，并处理所有边缘情况（其中 4 个）以提出正确的切片访问，但这只是丑陋且不符合 Python 标准。

如何优雅地获取字符串`S`并将其用作我的切片说明符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T18:04:05.303

这可以通过使用列表理解来完成，而无需太多黑客攻击。我们在 上拆分字符串`:`，将拆分项作为参数传递给`slice()`内置函数。这使我们能够很好地在一行中生成切片，以一种适用于我能想到的每种情况的方式：

```
slice(*[int(i.strip()) if i else None for i in string_slice.split(":")]) 
```

通过使用`slice()`内置函数，我们巧妙地避免了自己处理太多的边缘情况。

示例用法：

```
>>> some_list = [1, 2, 3]
>>> string_slice = ":2"
>>> some_list[slice(*[int(i.strip()) if i else None for i in string_slice.split(":")])]
[1, 2]
>>> string_slice = "::-1"
>>> some_list[slice(*[int(i.strip()) if i else None for i in string_slice.split(":")])]
[3, 2, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:14:39.380

这是另一个解决方案

```
eval("L[%s]" % S) 
```

*警告 -如果 S 来自外部（不可靠）来源，[则不安全。](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)*

# windows-xp - 在 WindowsXP 上运行 rundll32.exe

> ID：13324555
> 
> 赞同：0
> 
> 时间：2012-11-10T17:53:55.820
> 
> 标签：windows-xp, rundll32

[在 Windows XP 中使用 Rundll32.exe](http://best-windows.vlaurie.com/rundll32.html)

我可以将一些参数传递给这些命令吗？

就像我们在复制/粘贴文件和覆盖等时所做的那样。

**编辑**：有问题的DLL：

`C:\Program Files\Sony Ericsson\Sony Ericsson PC Suite\RasCnxMngr.dll`

使用保存的连接打开 GPRS 会话的命令是：

`C:\WINDOWS\system32\Rundll32.exe RasCnxMngr.dll,Rundll_Dial Aitel_GPRS`

我对DLL知之甚少。但是，以二进制模式打开 DLL 我可以找到下面的字符串以及“ **Rundll_Dial** ”：

> RasCnxMngr.dll
> **Rundll_Dial**
> RasCM_CreateView
> RasCM_ModuleInquire
> RasCM_RemoveAllConnection
> RasCM_RemoveConnection
> _RasCM_ClearConnectionStatistics@4
> _RasCM_Connect@16
> _RasCM_Connection@12
> _RasCM_ConnectionProperties@12
> _RasCM_ConnectionWizard@12
> _RasCM_Disconnect@4
> _RasCM_Disconnection@8
> _RasCM_EnumConnections@12
> _RasCM_EnumConnectionsEx@16
> _RasCM_GetConnectStatus@4
> _RasCM_GetConnectionStatistics@8
> _RasCM_GetConnectionStatus@8
> _RasCM_GetDefaultConnection@4
> _RasCM_GetFallbackConnection@8
> _RasCM_GetRASHandle@4
> _RasCM_HideConnections@4
> _RasCM_Init@8
> _RasCM_InitEx@12
> _RasCM_ReadConnectionData@12
> _RasCM_SetModemInfos@8
> _RasCM_Uninit@4
> _RasCM_ViewConnections@12
> _RasCM_ViewLog@12

我想断开当前连接并在一分钟后重新连接。此外，要禁止所有提示/确认。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:27:17.147

让我在到达解决方案之前解释一下场景。

1.  这是关于使用移动电话与印度电信服务提供商连接/断开 GPRS 会话。
2.  这是一个涉及PPP的拨号服务。
3.  Windows XP、SP3 和索尼爱立信 PC 套件

问题：通常当运营商服务通过 GPRS 请求时，他们会保留一个经过验证的会话以进行相应的计费。当会话关闭时，应该是连接。有时，我的操作员保持连接打开但会话关闭。所有请求都被丢弃（不知道如何）。通常的会话时间是/曾经是 50 分钟，之后我使用计划任务进行拨号呼叫。如问题中所述，DLL 方法没有帮助。

但是，几天前我遇到了“rasdial”实用程序。下面两条简单的线很容易解决这个问题：

> rasdial "AirTel_GPRS" /DISCONNECT
> 
> rasdial "AirTel_GPRS"

我用上述命令创建了一个**.bat**文件，每 50 分钟安排一次。现在我有一个几乎不间断的 GPRS 连接进行下载。:-)

[微软 WinXP - Rasdial](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/rasdial.mspx?mfr=true)

还有一些关于 rasdial的**stackoverflow帖子。**

谢谢你。

# ember.js - EmberJS pre2 将车把模板放在错误的位置

> ID：13324556
> 
> 赞同：2
> 
> 时间：2012-11-10T17:53:56.500
> 
> 标签：ember.js

我尝试在我的网络应用程序上将 EmberJS 从 pre1 更新到 pre2，但我注意到它将所有车把模板作为最后一个正文元素，有时根本没有。

我已经使用 starter-kit[创建了一个 repro](http://emberjs-pre2-bug.staticloud.com/) ，只需修改在模板之前和之后放置 div 以显示模板将被添加到错误的位置。使用 pre1 运行同一页面，一切正常。

*索引.html*

……

```
<body>
  <div>this is before the template</div>
  <script type="text/x-handlebars" data-template-name="application">
    <h1>Hello from Ember.js</h1>
  </script>
  <div>this is after the template</div> 
```

……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T20:57:03.440

text/x-handlebars 脚本标签定义了一个 Handlebar 模板，它与您在页面中放置它的位置无关（在头部，在正文中的任何位置）。

在上面的代码中，您定义了`ApplicationView`. 由于您使用路由器，ember 会自动创建`ApplicationView`并将其**附加**到您的 Ember 应用程序的根元素中。默认情况下，`rootElement`是正文：

```
App.ApplicationView.create().appendTo(rootElement) // default rootElement = 'body' 
```

并且该`appendTo`方法使用 jQuery [appendTo](http://api.jquery.com/appendTo/)：

```
this.$().appendTo(target) 
```

因此，如果您想控制`applicationView`插入的位置，您需要`rootElement`在 App 实例中设置，如下所示：

```
 window.App = Ember.Application.create({
    rootElement: '#insert_my_app_here'
  }); 
```

...

```
 <body>
    <div>this is before the template</div>
    <script type="text/x-handlebars" data-template-name="application">
      <h1>Hello from Ember.js</h1>
    </script>
    <div id="insert_my_app_here"></div>
    <div>this is after the template</div>
  </body> 
```

# oauth - Twitter PI 更新个人资料横幅

> ID：13324558
> 
> 赞同：2
> 
> 时间：2012-11-10T17:53:59.677
> 
> 标签：oauth, twitter, twitter-oauth

我无法使用 tmhoauth 更改横幅图像。每次我发布图像时，无论是本地托管还是来自 URL，我都会得到返回码 422 - 这表明图像文件的大小太大或尺寸不正确。无论图像大小或尺寸如何，都会发生这种情况。有任何想法吗？这是代码 - 我已经删除了令牌

```
<?php

$banner_image = 'image1.jpg';
$result = post_tweet($banner_image);
print "Response code: " . $result . "\n";
function post_tweet($banner_image) {
    require_once('tmhOAuth.php');
    print "Posting...\n";
    $connection = new tmhOAuth(array(
        'consumer_key' => '---',
        'consumer_secret' => '---',
        'user_token' => '---',
        'user_secret' => '---',
        'curl_ssl_verifypeer'   => false
    )); 

    $connection->request('POST', $connection->url('1/account/update_profile_banner'), array('banner'=>$banner_image), true, true);

    return $connection->response['code'];
}
?> 
```

已解决：谢谢@bdares！对于犯此愚蠢错误或需要 update_profile_banner 代码帮助的其他人，如下所示：

```
$banner_image = 'image1.jpg';
$result = post_tweet($banner_image);
print "Response code: " . $result . "\n";
function post_tweet($banner_image) {
    require_once('tmhOAuth.php');
    print "Posting...\n";
    $connection = new tmhOAuth(array(
        'consumer_key' => '---',
        'consumer_secret' => '---',
        'user_token' => '---',
        'user_secret' => '---',
        'curl_ssl_verifypeer'   => false
    )); 

    $connection->request('POST', $connection->url('1/account/update_profile_banner'), array('banner'=>'banner'=>"@{$banner_image};type=image/jpeg;filename={$banner_image}"), true, true);

    return $connection->response['code'];
}
?> 
```

# c++ - 有没有办法在 c++ #include 语句中使用通配符？

> ID：13324561
> 
> 赞同：8
> 
> 时间：2012-11-10T17:54:11.107
> 
> 标签：c++, include

这似乎是相当基本的功能，但是，无论我在哪里，答案似乎是否定的。

事情是这样的：我有一个文件夹，里面装满了我需要包含在 C++ 应用程序中的文件。它们都被命名为“FileX.h”，其中 X 是从 1 到 400 的数字。我这样做是因为我想有一种方法可以说类似的话`#include "File*.h"`，它会包含符合该模式的每个文件。包含文件的顺序无关紧要。我现在意识到我可能应该将文件制作成共享库或类似的东西，但为了将来参考，我真的很想知道这是否可能。

`#include`那么，有没有办法在一个语句中包含所有这些文件？`#include "C:/project/includes/"`或者，如果做不到这一点，有没有办法在 c++中包含整个目录的文件（即。 ）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T17:56:05.210

AFAIC，答案是否定的。

如果您在多个位置执行相同的文件列表，请创建另一个明确包含所有头文件的主头文件，然后在所有源文件中包含该主头文件。

根据你的工作，应该有一些方法可以自动创建这个主头文件。

# android - 寻找 Flash Android AS3 教程

> ID：13324562
> 
> 赞同：2
> 
> 时间：2012-11-10T17:54:12.350
> 
> 标签：android, actionscript-3, flash, air

我正在寻找一个很好的教程网站，用Flash教授Android的功能，AS3不是问题，它与Android交互的AS3功能我找不到任何教程。如果有人可以提供帮助，那就太酷了。

帆布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T23:59:35.477

Adobe 提供了大量资源。

*   [Adobe 移动和设备指南](http://cookbooks.adobe.com/mobile)
*   [使用 Flash Builder 4.5 为 Google Android 设备打包应用程序](http://www.adobe.com/devnet/air/articles/packaging-air-apps-android.html)
*   [使用 Flex 4.6 和 Flash Builder 4.6 开发移动应用程序](http://help.adobe.com/en_US/flex/mobileapps/index.html)
*   [Adobe AIR 的本机扩展](http://www.adobe.com/devnet/air/native-extensions-for-air.html)

查看[Adob​​e TV](http://tv.adobe.com/show/adc-presents/)或[Flash Platform API Reference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/index.html)以了解 AIR 和移动特定包。

# scala - 拆分多个项目玩！2（斯卡拉）

> ID：13324563
> 
> 赞同：5
> 
> 时间：2012-11-10T17:54:33.973
> 
> 标签：scala, playframework-2.0, sbt

wiki 上的示例似乎工作得很好，但是我的问题更多是关于如何实现这个结果以及如何使用 Eclipsify 实用程序最终将项目（w/子项目）放入 Eclipse。

[https://github.com/playframework/Play20/wiki/SBTSubProjects](https://github.com/playframework/Play20/wiki/SBTSubProjects)

Eclipsify-ing 这个项目（在调整 SBT 插件版本之后）导致只有 *-data 项目为 Eclipse 做好准备。我尝试从剧中切换项目！提示并使其余部分黯然失色，但无法改变结果。

有没有人找到设置这种类型的项目并将其放入 Eclipse 的好方法？

每个子项目都是使用“play new”创建的吗？哪些文件会被删除？哪个变了？我们如何才能让 eclipsify 在多个项目中正常工作。

我在 Mac OS X 上使用 play 2.0.4。我正在构建 Scala 项目。

谢谢。

==== 更新忽略父键 ======

我已经发送过几次了。我试图让它与剧中的例子一起工作！维基。我有这个：

```
import sbt._
import Keys._
import PlayProject._
import com.typesafe.sbteclipse.core.EclipsePlugin.EclipseKeys

/*
 * This contains a data project with models. It also contains a frontend web
 * app. Finally, there is a backend project. The backend project is just a copy
 * of the fronend project for demonstration purposes, but in real life may
 * contain heavy data batch processing jobs or similar. Both projects rely on
 * the same database and so must both depend on the data project which contains
 * the models. 
 */
object ApplicationBuild extends Build {

  val appName         = "example"
  val appVersion      = "1.0-SNAPSHOT"

  val dataDependencies = Seq(
  )

  val frontendDependencies = Seq(
  )

  val backendDependencies = Seq(
  )

  val dataProject = PlayProject(appName + "-data", appVersion, dataDependencies, path = file("data"), mainLang = JAVA)

  val frontend = PlayProject(appName + "-frontend", appVersion, frontendDependencies, path = file("frontend"), mainLang = JAVA).dependsOn(dataProject).aggregate(dataProject)

  val backend = PlayProject(appName + "-backend", appVersion, backendDependencies, path = file("backend"), mainLang = JAVA).dependsOn(dataProject).aggregate(dataProject)

  val main = PlayProject(appName) dependsOn(frontend,backend) aggregate (frontend,backend)

  override def settings = super.settings ++ Seq(EclipseKeys.skipParent in ThisBuild := false)
} 
```

它不会编译。你在某处有一个干净的例子，或者你能看到我有什么不正确的吗？感谢您的快速回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:58:58.883

您可以将以下命令添加到顶级项目`build.sbt`或`project/Build.scala`在顶级项目中，让 sbt 也为子项目生成项目文件。

```
EclipseKeys.skipParents in ThisBuild := false 
```

或者您可以直接从播放控制台运行以下命令：

```
eclipsify skip-parents=false 
```

然后你可以在Eclipse上单独导入子项目。

在您的情况下，您忘记在最后一行包含“skipParents”的最后一个字母“s”：

```
++ Seq(EclipseKeys.skipParent in ThisBuild := false) 
```

将其更改为：

```
++ Seq(EclipseKeys.skipParents in ThisBuild := false) 
```

# jenkins - 詹金斯的“分析收集器”还是“声纳”？

> ID：13324565
> 
> 赞同：1
> 
> 时间：2012-11-10T17:54:56.003
> 
> 标签：jenkins, sonarqube, jenkins-plugins

我正在考虑将静态代码分析添加到我们的 Jenkins 构建的 Java 项目（约 500K 行代码）中。

两种可能性是[Analysis Collector](https://wiki.jenkins-ci.org/display/JENKINS/Analysis+Collector+Plugin)或[SONAR](http://docs.codehaus.org/display/SONAR/Hudson+and+Jenkins+Plugin)。

SONAR 的优点之一是它可以显示[死代码和不推荐使用的方法](http://www.sonarsource.org/detect-dead-code-and-calls-to-deprecated-methods-with-sonar-squid/)。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T08:08:12.533

Sonar 不仅仅是将其他工具集成到统一环境中的工具。首先使用 Sonar，您不仅可以分析 Java 源代码，还可以分析以 20 多种语言开发的代码。[http://www.sonarsource.com/products/plugins/languages/](http://www.sonarsource.com/products/plugins/languages/)

然后，Sonar 的明星功能是差异视图，您可以在其中看到代码质量如何随着时间的推移而演变。老实说，这不能通过单独使用这些工具来完成。[http://docs.codehaus.org/display/SONAR/Differential+Views](http://docs.codehaus.org/display/SONAR/Differential+Views)

此外，您可以创建代码审查并将其与 Jira 集成（如果您使用它），并从 40 多个开源和商业插件中受益，这些插件为您的 Sonar 安装添加了更多功能。

所以恕我直言，您提到的两个工具甚至无法比较！我肯定会建议声纳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:23:05.833

声纳

换句话说：我建议将构建和报告任务分开。不同的功能应该由不同的系统来完成（如[Separation_of_concerns](http://en.wikipedia.org/wiki/Separation_of_concerns)原则）。我有很多次构建失败，只是因为我正在配置分析收集器报告。其次，您可以从本地 PC 或任何其他服务器开始 SONAR 分析。

# javascript - jQuery 放大缩小

> ID：13324566
> 
> 赞同：2
> 
> 时间：2012-11-10T17:55:05.550
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我正在尝试制作一个放大缩小按钮，这些按钮将放大和缩小 div 内的图片。问题是当按下放大或缩小时，图片会从 div 中消失。我觉得我做得不对。

```
image.height = image.height+50
image.width= image.height+50 
```

如果有人能给我任何提示或代码示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:12:16.073

这是一个简单的设置...

看看这个[**小提琴**](http://jsfiddle.net/videsignz/KGY7c/)

```
var imagesize = $('img').width();

$('.zoomout').on('click', function(){
    imagesize = imagesize - 5;
    $('img').width(imagesize);
});

$('.zoomin').on('click', function(){
    imagesize = imagesize + 5;
    $('img').width(imagesize);
}); 
```

# mysql - MySQL 移动平均线 - 4 周

> ID：13324568
> 
> 赞同：4
> 
> 时间：2012-11-10T17:55:14.903
> 
> 标签：mysql, moving-average

我一直在阅读有关在 mysql 查询中估计移动平均值的几篇文章，但是我的情况似乎稍微困难一些，因为该表不包含我想要计算平均值的列。我需要计算每个组的行数，并显示该组的移动平均值。

我在表中基本上只有一列相关，那就是 DATETIME 列。该表可以包含具有相同日期的多行。我想按 YEARWEEK 和 COUNT(*) 对每个 YEARWEEK 组的行数进行分组。这很容易，困难的部分是还要计算移动 4 周平均值

```
+-------------+
| DatoLagtTil |
+-------------+
| 2012-11-01  |
| 2012-10-25  |
| 2012-10-25  |
| 2012-10-11  |
| 2012-10-04  |
| ...         |
| ...         |
| ...         |
| ...         |
+-------------+ 
```

这是我要创建的输出表 - 4 周（YEARWEEK）移动平均线是困难的部分（注意：下面的示例不是基于上面的示例数据）

```
+------------+------------+-----------+
| YEARWEEK   | COUNT      | m_average |
+------------+------------+-----------+
| 201201     |     5      |     5     |
| 201202     |     10     |     7.5   |  
| 201203     |     5      |     6.6   |
| 201204     |     15     |     8.8   | 
| 201205     |     10     |     10    |
| 201206     |     5      |     8.8   |
| 201207     |     5      |     8.8   |
+------------+------------+-----------+ 
```

我找到了几个很好的资源来解释如何计算移动平均线，但是我无法让它们在我的情况下工作。我希望你们能提供帮助。

谢谢

- -状态更新 - -

自从我发布这个问题以来，一直在尝试一些解决方案。我觉得我越来越近了，但仍然缺少一些重要的东西。

通过下面的查询，我没有收到任何错误，但是对于所有 YEARWEEK 组，我的 Count(k.DatoLagtTil) 和相同的 AVG(cnt) 都太高了...我确实相信这与 WHERE 子句有关正在使用

```
SELECT YEARWEEK(k.DatoLagtTil), COUNT(k.DatoLagtTil), AVG(cnt)
  FROM  Kunder_db k, (SELECT COUNT(*) AS cnt
          FROM Kunder_db
         WHERE YEARWEEK(DatoLagtTil) BETWEEN YEARWEEK(DatoLagtTil) - 3 AND YEARWEEK(DatoLagtTil)
        GROUP BY YEARWEEK(DatoLagtTil)) x
GROUP BY YEARWEEK(k.DatoLagtTil) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:10:11.273

只需使用合适的范围标准再次将计数查询与您的表连接：

```
SELECT   t.yearweek,
         t.count,
         COUNT(*) / 4 AS m_average

FROM     my_table JOIN (
  SELECT   YEARWEEK(DatoLagtTil) AS yearweek,
           COUNT(*) AS count
  FROM     my_table
  GROUP BY yearweek
) t ON t.yearweek BETWEEN YEARWEEK(DatoLagtTil)
                      AND YEARWEEK(DatoLagtTil + INTERVAL 3 week)

GROUP BY t.yearweek 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/1ca76/1/0)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-10T22:34:13.880

在 mysql 8[窗口函数框架](https://dev.mysql.com/doc/refman/8.0/en/window-functions-frames.html)中可用于获取平均值。

```
SELECT YEARWEEK(k.DatoLagtTil) as YRWK, count(*), AVG(count(*)) OVER (ORDER BY YEARWEEK(k.DatoLagtTil) ROWS 3 PRECEDING) as m_average
FROM Kunder_db
GROUP BY YRWK 
```

这将计算当前行和前 3 行的平均值。

# php - 使用反向引用对模式进行反向引用

> ID：13324569
> 
> 赞同：-1
> 
> 时间：2012-11-10T17:55:16.187
> 
> 标签：php, regex, pcre, backreference

考虑`(\w[0-9]).*\1`RegEx，它匹配`d1akdhfafd1`,`R2ddsfasfasfdsfdR2`等。

是否可以编写一个与以下内容匹配的正则表达式：`D1dfsadfadsfE3`, `z6adfdasfdfr2`, `e3654654e0`,....？

`\w[0-9]`只是一个例子，请考虑一般形式`(::A_Complex_Pattern::).*\1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:59:58.067

PHP 的正则表达式引擎 (PCRE) 支持[递归](http://uk1.php.net/regexp.reference.recursive)。其他一些人这样做，但你通常不应该指望它。但是，如果引擎这样做，那么您可以像这样插入其他地方使用的模式：

```
(\w\d).*(?1) 
```

其中编号与反向引用的编号相同。`(?R)`将插入整个模式。

# database - 执行 PostgreSQL 查询缓慢，不明白为什么

> ID：13324571
> 
> 赞同：0
> 
> 时间：2012-11-10T17:55:23.457
> 
> 标签：database, performance, postgresql

我在使用 PostgreSQL 9 作为数据库的 rails 中有以下查询。

```
@user_random = User.where(:id => User.where(:pubic_profile_visible => true).order('random()').limit(1).select(:id).collect(&:id)).first 
```

然后在数据库服务器上：

**解释计划**

```
Query plan  Limit  (cost=48655.53..48655.53 rows=1 width=4)
Query plan    ->  Sort  (cost=48655.53..50880.35 rows=889930 width=4)
Query plan          Sort Key: (random())
Query plan          ->  Seq Scan on users  (cost=0.00..44205.88 rows=889930 width=4)
Query plan                Filter: (pubic_profile_visible AND (deleted_at IS NULL)) 
```

关于为什么这会导致瓶颈的任何建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:07:58.383

就像@wildplasser 说的那样，这个查询正在做你要求它做的事情。

如果不获取所有 800,000 行、生成随机数然后对它们进行排序，它就无法为您的“LIMIT 1”选择最低的 random()。

尝试谷歌搜索“postgresql 选择随机行”，你会得到六个有用的 stackoverflow 问题，以及 depesz.com 上一篇旧博客文章的链接，其中涵盖了各种选项：

[http://www.depesz.com/2007/09/16/my-thoughts-on-getting-random-row/](http://www.depesz.com/2007/09/16/my-thoughts-on-getting-random-row/)

# r - R Shiny 问题 - 在一张图上绘制多条线

> ID：13324579
> 
> 赞同：4
> 
> 时间：2012-11-10T17:56:19.917
> 
> 标签：r, shiny

目前，我的代码最初允许用户选择他们想要的数据集（二选一）。然后根据他们的选择，出现数据集各自子集的其他绘图变量。这很好用，除了我希望这些图全部覆盖在一个图上，而不是像默认情况下那样分开。

我有一个默认绘图 plot_Total，数据集中的其他选项正在查看它的特定子集。所以只有一个散点是有意义的。

```
 output$plot_Total <- reactivePlot(function() { 
  plot.new()
   plot.window(xlim=c(1850,2020), ylim = c(0,5000000))
   axis(1)
   axis(2)
   title(main="Numbers over the years")
   title(xlab="Year")
   title(ylab="Number of people")
   box()
   points(dat$Year, dat$Total, col="red")
   lines(dat$Year, dat$Total, col="red")
   })

 output$plot_subset1 <- reactivePlot(function() { lines(dat$Year, dat$subset1) })
 output$plot_subset2 <- reactivePlot(function() { lines(dat$Year, dat$subset2) }) 
```

为什么这个代码片段不起作用？它只是为每个（不需要的）图形创建空白空间，在其下方显示“错误：尚未调用 plot.new”。如何指定将这些线添加到默认 (plot_Total) 图中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T19:15:08.823

更新：通过玩弄闪亮主页上的图形代码，我意识到我必须这样做：

```
 output$plot_Total <- reactivePlot(function() { 
  plot.new()
   plot.window(xlim=c(1850,2020), ylim = c(0,5000000))
   axis(1)
   axis(2)
   title(main="Numbers over the years")
   title(xlab="Year")
   title(ylab="Number of people")
   box()
   points(dat$Year, dat$Total, col="red")
   lines(dat$Year, dat$Total, col="red")
  if (input$RC) {   lines(dat$Year, dat$dat)}
  }) 
```

这在两个方面与我的原始代码不同。首先，条件被添加为同一反应图函数中的一行。其次，我创建了一个仅包含子集 RC 的新 data.frame。这最初不是作为 input$dat$RC 工作的，但是当 RC 是它自己的数据框时，它作为 input$RC 工作。

指向大通引导我朝着正确的方向前进！

# javascript - 使用多层 - KineticJS

> ID：13324582
> 
> 赞同：3
> 
> 时间：2012-11-10T17:56:58.747
> 
> 标签：javascript, html, kineticjs

我正在使用 KineticJS 4.0.5，我目前正在尝试绘制几层的内容，但只绘制了添加到舞台的最后一层......如果我正确理解了文档，这应该是可能的，否则我们为什么需要一层？

我有三个不同的层：

*   只有一个 Kinectic.Rect 对象的背景层；
*   具有多种形状的元素层；
*   以及一个包含元素的顶层，我希望始终处于一切之上。

我在我创建的对象内的绘制函数中填充这些图层，该对象还具有引用背景的形状属性和包含要添加到元素图层的元素的内容属性。我的绘图功能代码如下：

```
this.draw = function() {
    var stage = E.game.stage, layers = E.game.layers;

    stage.clear();

    // Add Background
    this.shape.setSize(stage.getWidth(), stage.getHeight());
    layers.background.add(this.shape);

    // Iterate over contents
    for(var i = 0; i < this.contents.length; i++) {
        layers.elements.add(this.contents[i].shape);
    }

    // Draw Everything
    stage.add(layers.background);
    stage.add(layers.elements);
    stage.add(layers.top); // This one is currently empty
    stage.draw();
} 
```

运行此函数后，画布中只绘制了layers.top，如果我注释添加它的行，则只绘制layers.elements。然而舞台有 3 个孩子（我用 chrome 上的检查元素检查了它），并且在文档中它说绘图函数绘制所有图层......我在这里做错了吗？还是不可能？如果不可能，为什么我需要一个层和一个舞台？一个还不够吗？

先感谢您。

**编辑**：我能够解决问题，我将带有 css 的白色背景颜色应用于画布元素，并且由于每一层都在其他层之上创建了一个新的画布元素，因此我只能看到最顶层的内容（在这种情况下只是白色）。

但是，我仍然有一个与多层相关的问题，而我以前只有一层没有。当我在舞台上使用清除功能时，它应该清除图层对吗？但是相反，图层保持完全相同，即使我尝试在每个单独的图层上调用 clear 它们也不会改变......我也在清除它们后使用舞台绘制功能，但仍然没有任何变化......到目前为止，我发现的唯一解决方案是从舞台上删除图层并再次添加它：s 有没有更好的方法来重置图层内容？

再次感谢您，并对第一个问题的困惑感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:58:03.613

清除只是在重绘之前清除画布。它不会删除添加到图层的对象。因此，对于您的情况，请使用删除功能取出附加到图层的对象，或者像您正在做的那样，删除整个图层本身。

# python - python中的异或函数

> ID：13324587
> 
> 赞同：1
> 
> 时间：2012-11-10T17:57:35.420
> 
> 标签：python, xor

如果有人可以帮助使用 python 中的 XOR 函数，我会很高兴。

例如，我有两个相当大的消息（大约 300 个符号）是用十六进制代码写的，我怎样才能正确地对它们进行异或？我尝试使用通用函数并转换为其他类型，但我无法做到这一点（

我不知道我需要转换哪种类型的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T18:16:19.843

如果我正确地回答了您的问题，如果您有 2 个十六进制数字表示为字符串：

```
a = "e877a5e68bea88d61b93ac5ee0d562e8e9"
b = "23fe3231699ade23482" 
```

你可以用一些掩码对它们中的任何一个进行异或，方法是转换为 int，并应用按位异或运算符：

```
xor_result = int(a, 16) ^ int(b, 16)

print '%x' % xor_result 
```

并且，如果您想保留原始格式

```
string_xor_result = hex(xor_result)[2:] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T08:37:51.793

如果两个字符串的长度不同，您可以添加一行，循环（）

```
stra = raw_input("msg: ")
strb = raw_input("key: ")
strb = cycle(strb)

print ''.join(hex( int(a,16) ^ int(b,16) )[2:] for a,b in zip(stra, strb)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:13:44.083

遍历字符串 chars，然后将每个 char 转换为 int ( `int(a,16)`)，然后应用 xor，用 重新转换为十六进制，用 去除`hex`前导 '0x' `[2:]`，最后加入所有内容

```
stra = 'abc'
strb = 'abd'
''.join(hex( int(a,16) ^ int(b,16) )[2:] for a,b in zip(stra, strb)) 
```

请注意，正如评论中所指出的，它仅在两个字符串具有相同长度时才有效。否则，较长字符串的某些字符将被忽略。

# keyboard - ios6 中的键盘方向无法正常工作

> ID：13324603
> 
> 赞同：1
> 
> 时间：2012-11-10T17:59:31.957
> 
> 标签：keyboard, ios6

我在 iOS6 中遇到自动旋转和方向问题。他们不像以前在 iOS5 中那样工作。这是示例代码。

```
implementation mainProgram
// view controller is defined in landscape mode (.xib file)
// The preferredInterfaceOrientationForPresentation and supportedInterfaceOrientations have not been defined because they give me problems with getting the orientation right of other calling classes

-(IBAction)somButtonPressed:(id)sender{
      [self presentViewController:inputText animated:NO completion:nil];
 }
 @end

/////////////////////////////////////////////////////////
// This has has several  UITextField 
// The view of this controller is defined as landscape in .xib
implementation inputText

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (BOOL)shouldAutorotate {
    return YES;
}

#if 0  // Disabled
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationLandscapeRight;
}
#endif

#if 1  // Enabled
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationLandscapeRight;
}
#endif
@end 
```

问题/观察： 1\. 如果在 inputText 中启用了supportedInterfaceOrientations，返回值为UIInterfaceOrientationLandscapeRight，程序将失败，说preferredInterfaceOrientationForPresentation 试图设置为无效的方向，即使与supportedInterfaceOrientations 完全相同

1.  当我尝试在 inputText 的 UITextField 之一上输入文本时，键盘以纵向模式出现，而不是 LandscapeRight。inputText 控制器的视图在 LandscapeRight 方向上很好。

在我看来，它们都是 ios6 中的错误。有没有其他人遇到过这些问题？

# vb.net - 如何使用 VB 自动登录 XAML webview

> ID：13324604
> 
> 赞同：1
> 
> 时间：2012-11-10T17:59:45.500
> 
> 标签：vb.net, xaml, microsoft-metro

我正在为 Windows 8 Metro 制作一个项目，该项目要求我登录具有 Web 界面的本地设备，例如我的路由器。在我用来导航的visual basic中的webbrowser控件上`"http://username:password@192.168.1.254/"`，但在webview中我得到了一个`COMException`错误。

有谁知道如何修复它或以其他方式完成此任务？

# linux - 具有两个域的配置 Postfix

> ID：13324610
> 
> 赞同：-1
> 
> 时间：2012-11-10T18:00:15.890
> 
> 标签：linux, email, virtual, postfix-mta

我想通过 admin@xxx.pl 和 admin@yyy.pl 接收电子邮件我试图这样做，但它显示警告：

```
root@debian2008:/home/wojtek# postalias hash:/etc/postfix/virtual
postalias: warning: /etc/postfix/virtual, line 1: name must be local
postalias: warning: /etc/postfix/virtual, line 2: name must be local 
```

这是我的文件 /etc/postfix/virtual：

```
admin@xxx.pl :    root
admin@yyy.pl :    root 
```

和/etc/postfix/main.cf：

```
myorigin = /etc/mailname

smtpd_banner = $myhostname ESMTP 
biff = no

append_dot_mydomain = no
readme_directory = /usr/share/doc/postfix
smtpd_tls_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
smtpd_tls_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
smtpd_use_tls=yes
smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache
smtp_tls_session_cache_database = btree:${data_directory}/smtp_scache

virtual_alias_domains = xxx.pl,yyy.pl
virtual_alias_maps = hash:/etc/postfix/virtual

mail_owner = postfix
myhostname = debian2008
mydomain = yyy.pl
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
mydestination = localhost, debian2008, xxx.pl, yyy.pl
relayhost = 
mynetworks = 127.0.0.0/8

mailbox_command = 
mailbox_size_limit = 50000000
recipient_delimiter = 
inet_interfaces = all
html_directory = /usr/share/doc/postfix/html
inet_protocols = all
home_mailbox = Maildir/
mail_spool_directory = /home/ 
```

admin@yyy.pl 有效，但 admin@xxx.pl 无效。我怎么能做到这一点？警告有什么问题？

Ps 抱歉英语不好，但我是波兰语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:09:26.300

您需要使用`postmap`来创建别名映射，而不是`postalias`，然后您`virtual`不应该使用冒号作为分隔符：

```
admin@xxx.pl        root
admin@yyy.pl        root 
```

除此之外，它应该可以工作。

# opencart - Opencart 产品类别 - 除以零

> ID：13324614
> 
> 赞同：1
> 
> 时间：2012-11-10T18:00:29.567
> 
> 标签：opencart, division, zero

我一直在电子商务网站上工作 - www.bestbargain.lk 我在 Open Cart 1.5.2 中遇到了以下错误

> 警告：第 200 行 /home/content/43/10031243/html/vqmod/vqcache/vq2-catalog_controller_product_category.php 中除以零

此错误仅出现在具有一个或多个嵌套产品类别的产品类别页面中。没有子类别的主类别页面不存在此问题。

以下得到错误：计算机附件->鼠标| 低音炮 | 网络摄像头 [http://bestbargain.lk/index.php?route=product/category&path=18](http://bestbargain.lk/index.php?route=product/category&path=18)

但这没有错误：Mobile Phones [http://bestbargain.lk/index.php?route=product/category&path=25](http://bestbargain.lk/index.php?route=product/category&path=25)

任何帮助或解释都非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:17:53.417

您在控制器上进行了某种修改，因此它是一个 vqcache 文件而不是实际的文件路径。我建议您一一禁用您的 vqmod，直到找到罪魁祸首，从您认为正在修改类别页面的那些开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T12:14:24.003

如果限制值不是整数，则会出现此错误

全部查找

```
if (isset($this->request->get['limit'])) { 
```

全部更换

```
if (isset($this->request->get['limit']) && (int)$this->request->get['limit']) { 
```

# file - 从另一个 HTA 文件打开 HTA 文件

> ID：13324618
> 
> 赞同：0
> 
> 时间：2012-11-10T18:01:09.817
> 
> 标签：file, hta

好的，所以我正在创建一个简单的程序，当您单击链接时应该打开另一个 .HTA 文件。例如：

```
Sub RunProgram 
    Const NORMAL_WINDOW = 1
    Set objShell = CreateObject("Shell.Application")
    objShell.ShellExecute "explorer.exe", "Virus_Support.hta", , , NORMAL_WINDOW
 End Sub 
```

然后后来...

```
<body> 
<button onclick="RunProgram">Run Program</button> <p>
</body> 
```

但是，它返回“变量未定义：objShell”错误。我试图让 virus_support.hta 从 SupportMain.hta 文件中打开……而不是在 IE 或任何浏览器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T18:26:31.323

Try this:

```
Sub RunProgram
    Set objShell = CreateObject("WScript.shell")
    objShell.run("Virus_Support.hta")
End Sub 
```

# matlab - 绘制 datestr 时间

> ID：13324619
> 
> 赞同：0
> 
> 时间：2012-11-10T18:01:17.430
> 
> 标签：matlab, time

在我的 .txt 中，我有列“时间”，格式为：

2012 年 8 月 9 日 11:21:43:739

现在我想绘制数据与时间的关系，但我收到错误“无法从单元格转换为双倍”。

所以问题是我的时间戳，我该如何更改它以便我可以绘制我的数据（可能是时间戳结束时的毫秒问题）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:06:29.760

问题似乎是毫秒字段。它的格式错误。你有：

```
11:21:43:739
```

相反，你需要这个：

```
11:21:43.739
```

毫秒应该用点分隔，而不是冒号。

如果您希望保留当前格式，则在转换日期字符串时需要自定义格式说明符。例如：

```
datenum('8/9/2012 11:21:43:739', 'dd/mm/yy HH:MM:SS:FFF') 
```

# c# - ProcessCmdKey 与 ProcessDialogKey

> ID：13324620
> 
> 赞同：0
> 
> 时间：2012-11-10T18:01:20.393
> 
> 标签：c#, winforms, .net-4.0, datagridview

我有一个`DataGridView`并且我检测到何时按下输入键以验证/提交单元格的值。我检测到这个键，`ProcessCmdKey`但我知道存在另一种类似的方法`ProcessDialogKey`，那么它们之间的区别是什么？如果我使用`ProcessCmdKey`for detection`Enter`和keys 而不是 using`Tab`会发生什么？`Esc``ProcessDialogKey`

另外，我的应用程序中有一个小问题，我已将删除键关联到删除树 winforms 组件中的当前选定项目，但是当我在 a`DataGridView`的单元格中处于编辑模式并按下删除键时会引发此事件。因此，如果 a 的单元格当前处于编辑模式并且用户按下删除键，我想处理此键`DataGridView`以避免引发删除树中选定项目的事件。那么如何实现呢？我可以`ProcessCmdKey`用来检测删除键，如果可以，使用它吗？它应该工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:18:24.253

要验证 中的一行`DataGridView`，您应该使用[`RowValidating`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowvalidating.aspx)事件，这将使您免于`ProcessCmdKey`. 如果您使用鼠标、向上/向下箭头或向上/向下翻页离开该行，它还将负责验证。

关于`TreeView`，你应该更好地使用`KeyDown`event. `TreeView`没有任何额外的步骤，只有在被聚焦时才会被触发。如果你在里面工作`DataGridView`- 它不会触发。也就是说，`Del`key 在 mode 下会删除文本`Edit`，当 row 被选中时会删除行，如果坐在单元格上什么也不做。这是相关控件的默认行为 - 无需额外代码即可使其工作。

你应该避免覆盖`ProcessCmdKey`，除非它不起作用（这是罕见的情况）。

# r - 在 R 中管理句柄函数

> ID：13324621
> 
> 赞同：3
> 
> 时间：2012-11-10T18:01:27.693
> 
> 标签：r, api

我正在创建一个将管理 API 连接（oauth2）的包。

该包连接到 API，获取一些票据值并将它们存储在全局函数句柄中：

`handle <- function(login-details) { api-call }`

每当您需要通过 api 获取数据时，您都可以通过句柄来完成：

`getData <- function(handle) { foo }`

但是，handle 中存储的票证值过期，需要通过 API 使用一些 refresh-variables 来刷新句柄。

问题是，我该怎么做？我无法从 getData 函数中更新句柄。除非我使用一些技巧（全局环境中的 assign() 函数），否则不会。

必须有一些最佳实践吗？我应该创建一个函数来测试句柄是否新鲜，然后返回句柄，如果不是，刷新句柄？喜欢：

`handle <- prepare(handle)`

`getData <- function(handle) { foo }`

这似乎很愚蠢，并且会为错误增加新的可能性。

任何帮助将不胜感激！

# javascript - 替换编辑器中的内容？

> ID：13324622
> 
> 赞同：2
> 
> 时间：2012-11-10T18:01:32.227
> 
> 标签：javascript, jquery, wordpress, iframe, tinymce

我已经想出了如何在 Wpres 的编辑器中使用以下方法获取选定的文本：

我需要用链接替换一些文本工作并且不知道如何，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:50:59.217

如果要在可视化编辑器中获取当前选定文本的文本值：

```
var content = jQuery("#content_ifr").prop("contentWindow");
var selected = content.getSelection();
var selectedText = selected.toString(); 
```

如果您想用新值替换选定的文本，只需在上述变量之外使用它：

```
var newText = "This is the new text";
jQuery(selected.anchorNode).replaceWith(newText); 
```

或者在您想要使用链接的情况下：

```
var linkText = "<a href='yourlink.html'>"+selectedText+"</a>";
jQuery(selected.anchorNode).replaceWith(linkText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:49:23.597

使用 tinymce API 的简单方法：

获得选择

```
tinymce.get('your_editor_id').selection 
```

替换选择

```
tinymce.get('your_editor_id').execCommand('insertHTML',false,'your text') 
```

# iphone - 初始化一个 NSTimer 运行一定次数？

> ID：13324627
> 
> 赞同：0
> 
> 时间：2012-11-10T18:02:02.700
> 
> 标签：iphone, objective-c, ios, xcode, nstimer

是否可以在不必将计时器设置为属性的情况下将 nstimer 初始化一定次数？我想要这个的原因是因为我在我的应用程序的某些时期不断地分配新的计时器，所以我不能使用属性，因为一旦我使属性计时器无效，它就不能再使用了。

在该`[NSTimer scheduledTimerWithTimeInterval: target:selector: userInfo:nil repeats:]`方法中，我可以使用目标参数将计时器本身作为我指定的选择器中的参数传递吗？（对不起，我真的不知道目标事物在方法中的含义）。

如果这不起作用，我可以尝试 `[NSTimer scheduledTimerWithTimeInterval: invocation: repeats:]`并使用调用属性来帮助我做这件事吗？不好意思我也不知道这个方法的调用参数是什么，看了文档还是没看懂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:20:26.233

计时器的“目标”表示您要在其上运行选择器（或方法或操作）的对象。

跟踪计时器运行次数的最佳方法是实例化一些具有“计数器”或“运行次数”属性（或 ivar）的自定义 Objective C 对象，然后在每次计时器时递增它运行该对象的方法。

一旦计数器通过了您希望的次数，您就可以使计时器无效（它作为参数传递给您调用的任何方法）并释放自定义对象。

# arrays - 如何在 bash 中使用相同的排列排列 2 个相同大小的数组？

> ID：13324629
> 
> 赞同：2
> 
> 时间：2012-11-10T18:02:09.893
> 
> 标签：arrays, bash, shell, permutation

如果我有两个 bash 数组`a=(1 2 3 4 5)`和`b=(12 23 21 2 3)`. 我需要对它们进行排列，这样如果排列后，数组中的 1 排到`a`第三位，那么数组中的 12`b`也应该排到第三位。

编辑：为了让我的问题更清楚。我将尝试解释我正在尝试做的事情。我必须随机打乱数组的元素，以便元素的位置发生变化。然后，我得到另一个与第一个数组大小相同的数组。我需要将第二个数组的元素作为第一个数组进行混洗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T21:18:00.647

尝试使用`shuf`shell 命令（coreutils）对数组进行洗牌：

```
$ a=(0 1 2 3 4 5) c=0
$ for i in $(shuf -i 0-$(( ${#a[@]} -1)) ); do b[i]=${a[c++]}; done
$ echo ${b[@]}
2 1 3 0 4 5 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T21:00:03.577

如果一个索引总是 1..5 那么这应该工作

```
b=(${b[a[1-1]-1]} ${b[a[2-1]-1]} ${b[a[3-1]-1]} ${b[a[4-1]-1]} ${b[a[5-1]-1]}) 
```

如果 a 被索引为 0..4 会更容易：

```
b=(${b[a[0]]} ${b[a[1]]} ${b[a[2]]} ${b[a[3]]} ${b[a[4]]}) 
```

否则，创建第三个数组 p 将很有用，例如：其中 p 是 {0..$((n-1))} 的排列

```
p=(3 0 1 2 4)
a=(${a[p[0]]} ${a[p[1]]} ${a[p[2]]} ${a[p[3]]} ${a[p[4]]})
b=(${b[p[0]]} ${b[p[1]]} ${b[p[2]]} ${b[p[3]]} ${b[p[4]]}) 
```

如果数组可以是任意大小

```
atmp=("${a[@]}")
btmp=("${b[@]}")
for ((i=0;i<n;i++)); do
    a[i]=${atmp[p[i]]}
    b[i]=${btmp[p[i]]}
done 
```

备注这可以改变排列的方向：

```
atmp=("${a[@]}")
btmp=("${b[@]}")
for ((i=0;i<n;i++)); do
    a[p[i]]=${atmp[i]}
    b[p[i]]=${btmp[i]}
done 
```

# java - Kryonet 在连接后断开连接

> ID：13324632
> 
> 赞同：4
> 
> 时间：2012-11-10T18:02:32.607
> 
> 标签：java, kryo, kryonet

我遵循[了这个 Youtube 教程](http://www.youtube.com/watch?v=atq9hGnrvew)，涵盖了 Kryonet 的基础知识。

基本上它是一个 Kryonet Hello World，它解释了如何设置一个基本的服务器和一个客户端，允许客户端向服务器发送数据包并进行非常基本的通信。

[**源代码**](http://codeviewer.org/view/code:2b8f)的链接。服务器和客户端都具有相同的数据包类。

我可以让服务器运行，客户端要求 IP 连接。但是，当我输入 IP 时，客户端在连接后立即终止。

客户端输出：

```
00:03  INFO: Connecting: /127.0.0.1:54555
00:03  INFO: [kryonet] Connection 1 connected: /127.0.0.1
00:03  INFO: [CLIENT] You have connected.
BUILD SUCCESSFUL (total time: 3 seconds) 
```

服务器命令行日志：

```
00:00  INFO: [kryonet] Server opened.
00:04 DEBUG: [kryonet] Port 54555/TCP connected to: /127.0.0.1:53217
00:04 DEBUG: [kryo] Write: RegisterTCP
00:04  INFO: [kryonet] Connection 1 connected: /127.0.0.1
00:04  INFO: [SERVER] Someone has connected.
00:04 DEBUG: [kryonet] Connection 1 update: Se ha forzado la interrupcion de una
 conexion existente por el host remoto
00:04  INFO: [SERVER] Someone has disconnected.
00:04  INFO: [kryonet] Connection 1 disconnected. 
```

似乎系统关闭了 TCP 连接，但我真的不知道。我必须在 Windows 或/和路由器中启用某些东西以允许 Kryonet 通信吗？

有人能发现问题吗？提前致谢。

*命令行日志中以西班牙语显示的行类似于“远程主机已强制中断现有连接”。*

**在 user1816380 建议后编辑：**

大多数时候它仍然显示原始错误，但有时您会看到：

```
00:00  INFO: [kryonet] Server opened.
00:07 DEBUG: [kryonet] Port 54555/TCP connected to: /127.0.0.1:50787
00:07 DEBUG: [kryo] Write: RegisterTCP
00:07  INFO: [kryonet] Connection 1 connected: /127.0.0.1
00:07  INFO: [SERVER] Someone has connected.
00:07 DEBUG: [kryo] Read: Packet0LoginRequest
00:07 DEBUG: [kryonet] Connection 1 received TCP: Packet0LoginRequest
00:07 DEBUG: [kryo] Write: Packet1LoginAnswer
00:07 DEBUG: [kryonet] Connection 1 sent TCP: Packet1LoginAnswer (6)
00:07 DEBUG: [kryonet] Connection 1 update: Se ha forzado la interrupcion de una
 conexion existente por el host remoto
00:07  INFO: [SERVER] Someone has disconnected.
00:07  INFO: [kryonet] Connection 1 disconnected. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T18:04:03.703

为了让您的客户端保持连接，它需要发送和接收 KeepAlive 数据包。当你调用 client.start(); 客户端.connect(); 一个客户端线程在后台启动，它会自动为您处理这个问题。

似乎您正在阻止客户端线程执行此操作，因为您使用无限循环阻止它来处理用户输入（而（true）获取用户输入）。

相反，您应该有一个单独的线程来接受用户输入。这是实现客户端接收功能的一种方法（可能不是最好的）：

```
public void received(Connection c, Object o) {
    System.out.println("received something");
    if (o instanceof Packet1LoginAnswer){

        boolean answer = ((Packet1LoginAnswer) o).accepted;

        if (answer) {
          System.out.println("Please enter your message for server");
            new Thread("Get User Input") {
                public void run () {
                    try {

                      if (ChatClient.scanner.hasNext()){
                        Packet2Message mpacket = new Packet2Message();
                        mpacket.message = ChatClient.scanner.nextLine();
                        client.sendTCP(mpacket);
                        System.out.println("Please enter another message");
                      }

                    } catch (Exception ex) {
                        ex.printStackTrace();
                        System.exit(1);
                    }
                }
            }.start();

        } else {
              System.out.println("Answer is false");
          c.close();
        }
    }

    if (o instanceof Packet2Message){
        String message = ((Packet2Message) o).message;
        Log.info(message);
    }
} 
```

我还注意到您使用 Log.info()。这仅在您使用 Kryonet 的调试版本时才有效。最好只使用标准输出函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-17T20:44:24.620

我只是遇到了同样的问题，我尝试了所有其他答案，但没有奏效。结果我在 TCP 端口`1941`和 UDP 端口上托管了一个服务器`1942` 但是我的客户端正在连接到一个带有 TCP 端口的服务器`1941`（忽略 UDP 端口）。像这样添加 UDP 端口为我解决了这个问题：

```
client.connect(5000, address, 1941, 1942); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-15T15:10:40.637

我认为您没有在单独的线程中启动客户端。

“从 r122 开始，客户端更新线程被制成守护线程，导致子进程在完成初始化后立即关闭。”，解决方案是“也许你可以使用这个？new Thread(client).start();” .

所以让我们说例如你正在像这样开始你的客户

```
client.start(); 
```

而你应该使用

```
new Thread(client).start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T12:30:46.703

相同的问题和行为可能是由于使用了最新版本的 KryoNet 2.20。例如，当使用 kryonet-2.12 时，问题很可能会得到解决。

所以尝试使用 kryonet-2.12 而不是 kryonet-2.20，这个例子应该可以工作 ;-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-17T11:04:39.443

我不确定这是否相关（因为您的源代码链接不再有效）但是......

如果您将服务器配置为 TCP**和**UDP，但随后让您的客户端**仅**通过 TCP 连接，则可能会出现您所描述的问题。

如果您想利用主机发现但此后只需要 TCP 连接，那么建议您[“为 UDP 发现运行单独的服务器”](https://github.com/EsotericSoftware/kryonet/issues/35#issuecomment-38991826)。

# ios - NSDate 一天的开始和一天的结束

> ID：13324633
> 
> 赞同：120
> 
> 时间：2012-11-10T18:02:35.337
> 
> 标签：ios, nsdate, nsdatecomponents

```
-(NSDate *)beginningOfDay:(NSDate *)date
{
    NSCalendar *cal = [NSCalendar currentCalendar];
    NSDateComponents *components = [cal components:( NSMonthCalendarUnit | NSYearCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:date];

    [components setHour:0];
    [components setMinute:0];
    [components setSecond:0];

    return [cal dateFromComponents:components];

}

-(NSDate *)endOfDay:(NSDate *)date
{
    NSCalendar *cal = [NSCalendar currentCalendar];
    NSDateComponents *components = [cal components:(  NSMonthCalendarUnit | NSYearCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:date];

    [components setHour:23];
    [components setMinute:59];
    [components setSecond:59];

    return [cal dateFromComponents:components];

} 
```

当我打电话时：`[self endOfDay:[NSDate date]];` 我得到了本月的第一天......为什么会这样？我使用这两种方法是因为我需要一个从第一个日期的第一秒 (beginningOfDay:date1) 到第二个日期的最后一秒 (endOfDay:Date2) 的间隔...

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-11-23T05:29:21.817

# 一天的开始/一天的结束——Swift 4

```
 // Extension

extension Date {
    var startOfDay: Date {
        return Calendar.current.startOfDay(for: self)
    }

    var endOfDay: Date {
        var components = DateComponents()
        components.day = 1
        components.second = -1
        return Calendar.current.date(byAdding: components, to: startOfDay)!
    }

    var startOfMonth: Date {
        let components = Calendar.current.dateComponents([.year, .month], from: startOfDay)
        return Calendar.current.date(from: components)!
    }

    var endOfMonth: Date {
        var components = DateComponents()
        components.month = 1
        components.second = -1
        return Calendar.current.date(byAdding: components, to: startOfMonth)!
    }
}

// End of day = Start of tomorrow minus 1 second
// End of month = Start of next month minus 1 second 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-02-08T22:39:53.187

**Swift 5** 简单而准确的答案。

开始时间：00:00:00

结束时间：23:59:59.5

```
let date = Date() // current date or replace with a specific date
let calendar = Calendar.current
let startTime = calendar.startOfDay(for: date)
let endTime = calendar.date(bySettingHour: 23, minute: 59, second: 59, of: date) 
```

**额外的**

```
let yesterday = Calendar.current.date(byAdding: .day, value: -1, to: noon)!
let tomorrow = Calendar.current.date(byAdding: .day, value: 1, to: noon)!
let specificDate = Date("2020-01-01")

extension Date {
    init(_ dateString:String) {
        let dateStringFormatter = DateFormatter()
        dateStringFormatter.dateFormat = "yyyy-MM-dd"
        dateStringFormatter.locale = NSLocale(localeIdentifier: "en_US_POSIX") as Locale
        let date = dateStringFormatter.date(from: dateString)!
        self.init(timeInterval:0, since:date)
    }
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-11-10T18:15:26.243

你错过`NSDayCalendarUnit`了

```
NSDateComponents *components = [cal components:( NSMonthCalendarUnit | NSYearCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) fromDate:date]; 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2015-08-18T04:41:47.183

在 iOS 8+ 中，这真的很方便；你可以做：

```
let startOfDay: Date = Calendar.current.startOfDay(for: Date()) 
```

要获得一天的结束，只需使用日历方法 23 小时 59 分钟 59 秒，具体取决于您如何定义一天结束。

```
// Swift 5.0
let components = DateComponents(hour: 23, minute: 59, second: 59)
let endOfDay = Calendar.current.date(byAdding: components, to: startOfDay) 
```

[日期数学](https://stackoverflow.com/questions/24741038/creating-a-future-date-in-swift-with-nsdate)

[Apple iOS NSCalendar 文档](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/)。（见章节：**历法计算**）

[NSHipster 讨论的 NSCalendar 方法](http://nshipster.com/nscalendar-additions/)。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-04-01T07:02:15.697

我对 NSDate 的 Swift 扩展：

**斯威夫特 1.2**

```
extension NSDate {

    func beginningOfDay() -> NSDate {
        var calendar = NSCalendar.currentCalendar()
        var components = calendar.components(.CalendarUnitYear | .CalendarUnitMonth | .CalendarUnitDay, fromDate: self)
        return calendar.dateFromComponents(components)!
    }

    func endOfDay() -> NSDate {
        var components = NSDateComponents()
        components.day = 1
        var date = NSCalendar.currentCalendar().dateByAddingComponents(components, toDate: self.beginningOfDay(), options: .allZeros)!
        date = date.dateByAddingTimeInterval(-1)!
        return date
    }
} 
```

**斯威夫特 2.0**

```
extension NSDate {

    func beginningOfDay() -> NSDate {
        let calendar = NSCalendar.currentCalendar()
        let components = calendar.components([.Year, .Month, .Day], fromDate: self)
        return calendar.dateFromComponents(components)!
    }

    func endOfDay() -> NSDate {
        let components = NSDateComponents()
        components.day = 1
        var date = NSCalendar.currentCalendar().dateByAddingComponents(components, toDate: self.beginningOfDay(), options: [])!
        date = date.dateByAddingTimeInterval(-1)
        return date
    }
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-10-22T13:36:10.213

**Swift 5.1 - XCode 11**用`Date`类代替`NSDate`和`Calender`代替`NSCalender`

```
extension Date {

    var startOfDay : Date {
        let calendar = Calendar.current
        let unitFlags = Set<Calendar.Component>([.year, .month, .day])
        let components = calendar.dateComponents(unitFlags, from: self)
        return calendar.date(from: components)!
   }

    var endOfDay : Date {
        var components = DateComponents()
        components.day = 1
        let date = Calendar.current.date(byAdding: components, to: self.startOfDay)
        return (date?.addingTimeInterval(-1))!
    }
} 
```

用法：

```
 let myDate = Date()
    let startOfDate = myDate.startOfDay
    let endOfDate = myDate.endOfDay 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-04-26T14:28:39.923

我认为在 Swift 中最简洁的方法如下：

```
extension Date {
    func startOfDay() -> Date {
        return Calendar.current.startOfDay(for: self)
    }
    func endOfDay() -> Date {
        return Calendar.current.date(bySettingHour: 23, minute: 59, second: 59, of: self) ?? self
    }
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-07-24T08:24:09.387

在 Swift 3 及更高版本中

```
extension Date {
    var startOfDayDate: Date {
        return Calendar.current.startOfDay(for: self)
    }

    var endOfDayDate: Date {
        let nextDayDate = Calendar.current.date(byAdding: .day, value: 1, to: self.startOfDayDate)!
        return nextDayDate.addingTimeInterval(-1)
    }
} 
```

用法：

```
var currentDayStart = Date().startOfDayDate
var currentDayEnd = Date().endOfDayDate 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-01-02T13:01:18.113

您不必将组件设置为零，只需忽略它们：

```
-(NSDate *)beginningOfDay:(NSDate *)date
{
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:date];
    return [calendar dateFromComponents:components];
} 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-07-07T19:57:39.610

对我来说，这里和stackoverflow上的其他地方都没有答案。为了开始今天，我这样做了。

```
NSCalendar * gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian]; 
[gregorian setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];    
NSDateComponents *components = [gregorian components:NSCalendarUnitYear|NSCalendarUnitMonth|NSCalendarUnitDay fromDate:[NSDate date]]; 
[components setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
NSDate *beginningOfToday = [gregorian dateFromComponents:components]; 
```

注意这一点`[gregorian setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];`和`[components setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];`。

创建日历时，它会使用当前时区进行初始化，并且当从其组件中提取日期时，由于 NSDate 没有时区，因此当前时区的日期被视为 UTC 时区。所以我们需要在提取组件之前设置时区，然后在从这些组件中提取日期时设置时区。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-10-10T06:03:49.693

**斯威夫特 3**

```
 class func today() -> NSDate {
        return NSDate()
    }

    class func dayStart() -> NSDate {
          return NSCalendar.current.startOfDay(for: NSDate() as Date) as NSDate
    }

    class func dayEnd() -> NSDate {
        let components = NSDateComponents()
        components.day = 1
        components.second = -1
        return NSCalendar.current.date(byAdding: components as DateComponents, to: self.dayStart() as Date)
    } 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-10-23T08:51:09.403

**Swift3** Using ***XCode8**
Apple 正在`NS`从类名中删除 ，以便`NSDate`可以将其换成`Date`. 如果您尝试强制转换它们说它们总是会失败，您可能会收到编译器警告，但是当您在操场上运行它们时它们可以正常工作。

我用生成`NSDate`的核心数据模型替换了`Date`它们，它们仍然有效。

```
extension Date {
  func startTime() -> Date {
    return Calendar.current.startOfDay(for: self)
  }

  func endTime() -> Date {
    var components = DateComponents()
    components.day = 1
    components.second = -1
    return Calendar.current.date(byAdding: components, to: startTime())!
  }
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-02-27T08:55:27.333

**Objective-C**

```
NSCalendar * calendar = [NSCalendar currentCalendar];
NSDate * startDate = [calendar startOfDayForDate:[NSDate date]];
NSLog(@"start date is %@", startDate); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-11-10T18:17:50.293

您缺少`NSDayCalendarUnit`组件。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-05-29T22:03:50.203

获得结果的另一种方法：

```
NSDate *date = [NSDate date];

NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = [[NSCalendar currentCalendar] ordinalityOfUnit:(NSCalendarUnitDay) inUnit:(NSCalendarUnitEra) forDate:date];
NSDate *dayBegin = [[NSCalendar currentCalendar] dateFromComponents:components];

components.day += 1;
NSDate *dayEnd = [[NSCalendar currentCalendar] dateFromComponents:components]; 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-11-29T05:11:30.520

在 Swift 5.3 中，Calendar.current.startOfDay() 和 Calendar.current.date(bySettingHour:, minute:, second:, of:) 都是时区特定的。如果您希望无论时区如何，您的日期都标准化为同一时间，您应该像这样使用 GMT 时间。

```
// Normalize time of aDate to 12:00 GMT
let aDate = Date()
let twelveGMT = 12 + TimeZone.current.secondsFromGMT() / 3600
let normalizedDate = Calendar.current.date(bySettingHour: twelveGMT, minute: 0, second: 0, of: aDate) 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-10-09T16:00:57.907

**对于迅捷4**

```
 var calendar = Calendar.current
    calendar.timeZone = NSTimeZone(abbreviation: "UTC")! as TimeZone
    let dateAtMidnight = calendar.startOfDay(for: Date())

    //For End Date
    var components = DateComponents()
    components.day = 1
    components.second = -1

    let dateAtEnd = calendar.date(byAdding: components, to: dateAtMidnight)

    print("dateAtMidnight :: \(dateAtMidnight)")
    print("dateAtEnd :: \(dateAtEnd!)") 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-01-26T10:36:22.500

更新@Zelko 的答案以获取日历：

```
extension Date {

    func startOfDay(in calendar: Calendar = .current) -> Date {
        calendar.startOfDay(for: self)
    }

    func endOfDay(in calendar: Calendar = .current) -> Date {
        var components = DateComponents()
        components.day = 1
        components.second = -1
        return calendar.date(byAdding: components, to: startOfDay(in: calendar))!
    }

    func startOfMonth(in calendar: Calendar = .current) -> Date {
        let components = calendar.dateComponents([.year, .month], from: startOfDay(in: calendar))
        return calendar.date(from: components)!
    }

    func endOfMonth(in calendar: Calendar = .current) -> Date {
        var components = DateComponents()
        components.month = 1
        components.second = -1
        return calendar.date(byAdding: components, to: startOfMonth(in: calendar))!
    }
} 
```

## 笔记：

当您的应用支持更多地区时，使用正确的日历非常重要

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-12-01T07:40:21.280

由于`iOS 8.0+ / macOS 10.12+ / tvOS 10.0+ / watchOS 3.0+`Foundation 中有一个内置功能，您可以开箱即用。无需实现自己的功能。

`public func startOfDay(for date: Date) -> Date`

所以你可以这样使用它：

`let midnightDate = Calendar(identifier: .gregorian).startOfDay(for: Date())`

值得记住的是，这需要考虑设备时区。如果您想拥有例如 UTC 区域，您可以设置`.timeZone`为 on 。`calendar`

链接到 Apple 参考页面：[https](https://developer.apple.com/reference/foundation/nscalendar/1417161-startofday) ://developer.apple.com/reference/foundation/nscalendar/1417161-startofday 。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-03-05T08:11:35.480

这是我用于 Swift 4.2 的：

```
 let calendar = Calendar.current
    let fromDate = calendar.startOfDay(for: Date())
    let endDate = calendar.date(bySettingHour: 23, minute: 59, second: 59, of: Date()) 
```

对我来说就像一个魅力。您可以将它添加到开始日期和结束日期的扩展名中`Date`，但请记住，添加扩展名会增加编译时间（除非在与类相同的文件中），因此如果您只需要在一个地方或一个类中使用它。 ..不要使用扩展名。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-09-12T13:07:11.647

`dateInterval(of:start:interval:for:)`使用of`Calendar`和专用[DateInterval](https://developer.apple.com/documentation/foundation/dateinterval)结构的另一种方式

返回时`startDate`包含一天的开始时间和一天`interval`中的秒数。

```
func dateInterval(of date : Date) -> DateInterval {
    var startDate = Date()
    var interval : TimeInterval = 0.0
    Calendar.current.dateInterval(of: .day, start: &startDate, interval: &interval, for: date)
    return DateInterval(start: startDate, duration: interval-1)
}

let interval = dateInterval(of: Date())
print(interval.start, interval.end) 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-12-18T05:11:38.130

**仅供参考，在 Swift 4 中设置一天的开始和结束的简单方法**，

```
var comp: DateComponents = Calendar.current.dateComponents([.year, .month, .day, .hour, .minute, .second], from: Date())
comp.hour = 0
comp.minute = 0
comp.second = 0
comp.timeZone = TimeZone(abbreviation: "UTC")!

//Set Start of Day
let startDate : Date = Calendar.current.date(from: comp)!
print(“Day of Start : \(startDate)")

//Set End of Day
comp.hour = 23
comp.minute = 59
comp.second = 59

let endDate : Date = Calendar.current.date(from:comp)!
print("Day of End : \(endDate)") 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-12-31T15:12:38.937

由于`Calendar`结构包含`startOfDay(for:)`，我发现最好将`endOfDay(for:)`方法封装在扩展中`Calendar`而不是 中`Date`。

以下代码可以放在 Playground 文件中以便快速执行。

```
import Foundation

extension Calendar {

    func endOfDay(for date: Date) -> Date {

        // Get the start of the date argument.
        let dayStart = self.startOfDay(for: date)

        // Add one day to the start of the day 
        // in order to get the start of the following day.            
        guard let nextDayStart = self.date(byAdding: .day, value: 1, to: dayStart) else {
            preconditionFailure("Expected start of next day")
        }

        // Create date components that will subtract a single
        // second from the start of the next day. This will
        // allow you to get the last hour, last minute, and last
        // second of the previous day, which is the day for the 
        // date argument that was passed to this method.
        var components = DateComponents()
        components.second = -1

        // Add the date components to the date for the next 
        // day, which will perform the subtraction of the single
        // second. This will return the end of the day for the date
        // that was passed into this method.
        guard let dayEnd = self.date(byAdding: components, to: nextDayStart) else {
            preconditionFailure("Expected end of day")
        }

        // Simply return the date value.
        return dayEnd
    }

} 
```

要查看格式化的日期，请创建一个`DateFormatter`并打印输出。

```
let formatter = DateFormatter()
formatter.dateStyle = .long
formatter.timeStyle = .long
Calendar.current.endOfDay(for: Date()) // "Dec 31, 2020 at 11:59 PM" 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-11-03T07:52:03.643

```
extension Date {
    func stringFrom(dateFormat: String) -> String {
        let formatter = DateFormatter()
        formatter.dateFormat = dateFormat
        return formatter.string(from: self)
    }

    func firstSecondInDay() -> Date {
        let dayStr = self.stringFrom(dateFormat: "yyyy-MM-dd")
        let firstSecondStr = "\(dayStr) 00:00:00"
        let format = DateFormatter()
        format.dateFormat = "yyyy-MM-dd HH:mm:ss"
        return format.date(from: firstSecondStr)!
    }

    func lastSecondInDay() -> Date {
        let dayStr = self.stringFrom(dateFormat: "yyyy-MM-dd")
        let laseSecondStr = "\(dayStr) 23:59:59"
        let format = DateFormatter()
        format.dateFormat = "yyyy-MM-dd HH:mm:ss"
        return format.date(from: laseSecondStr)!
    }
} 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2019-04-21T16:21:00.220

日历单位应被视为间隔。从 iOS 10`Calendar`开始，对此有一些不错的方法

```
let day = Calendar.autoupdatingCurrent.dateInterval(of: .day, for: Date())
day?.start
day?.end.addingTimeInterval(-1) 
```

您可以使用相同的方法来获取任何日历组件（周/月/年等）的开始/结束

这里需要注意的是，没有一个时间点可以定义为结束（假设我们有一个开始）。以上将在一天结束前一秒钟（23:59:59）。

# javascript - javascript：在for循环中调用函数

> ID：13324634
> 
> 赞同：1
> 
> 时间：2012-11-10T18:02:53.277
> 
> 标签：javascript, function, for-loop

执行函数的循环。但是，以下工作 - 加载页面上的图像时计数器计数。

```
var progress = function()
 {
   for (var i = 0; i < slide.length; i++)
    slide[i].onload = function(){
         actualprogress +=1,
         loading.innerHTML = actualprogress
    };
 } 
```

虽然以下**不起作用**。当我打开页面时，计数器从一开始就显示“[n]”（幻灯片数，例如“12”）。

```
var progress = function()
 {
   var action = function(){
     actualprogress +=1;
     loading.innerHTML = actualprogress
   }
   for (var i = 0; i < slide.length; i++)
     slide[i].onload = action();
 } 
```

我想从 for 循环中调用一个函数，因为我需要在函数中做其他和更多的事情。为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:06:30.183

在第一个代码中，您将函数**指针**分配给 onload 属性。

在第二个代码中，您将函数**返回值分配给****null**的 onload 属性。

它们之间有很大的不同。**括号**在**第二个**代码中是**额外**的，在**action**之后。

 ****```
onload = action() => onload = action 
```

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:07:17.623

在第二个片段的最后一行，您正在调用该函数，而不是将其分配给`slide[i].onload`.

只需更改`slide[i].onload = action();`为`slide[i].onload = action;`.****

# c++ - 如果我将函数命名为 `swap`，为什么会出现模板错误，但 `Swap` 没问题？

> ID：13324636
> 
> 赞同：5
> 
> 时间：2012-11-10T15:59:49.350
> 
> 标签：c++, templates

好的，所以程序和工作绝对正确

```
#include <iostream>

using namespace std;

template <typename T>
void Swap(T &a , T &b);

int main(){

    int i = 10;
    int j = 20;

    cout<<"i, j = " << i <<" , " <<j<<endl;
    Swap(i,j);
    cout<<"i, j = " << i <<" , " <<j<<endl;

}
template <typename T>
void Swap(T &a , T &b){
    T temp;
    temp = a ;
    a = b;
    b= temp;
} 
```

但是当我将函数的名称从***Swap***更改为***swap*** 时，它会生成一个错误消息

> 错误：重载 'swap(int&, int&)' 的调用不明确| 注意：候选人是： void swap(T&, T&) [with T = int]| ||=== 构建完成：1 个错误，0 个警告 ===|

发生了什么是规则使用模板以大写字母开头的函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T16:07:09.500

这是因为已经存在一个名为`swap`. 它实际上是在`std`命名空间下，但是因为你有`using namespace std`一行，所以它没有`std::`前缀就存在。

如您所见，使用`using namespace std`并不总是一个好的选择，因为可能会发生名称冲突，如本例所示。`using`一般来说，除非有真正的原因——命名空间的存在是有原因的——以防止名称冲突，否则不应使用该指令。

# android - 如何在屏幕顶部显示设置/选项菜单

> ID：13324638
> 
> 赞同：0
> 
> 时间：2012-11-10T18:03:01.007
> 
> 标签：android, android-layout

我正在开发我的 android 应用程序，现在我正在创建应用程序设置菜单。我创建了一个菜单，但我想在屏幕顶部而不是底部显示菜单，因此我正在寻求帮助。

提前致谢。

阿里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:16:04.957

这是一个快速操作对话框的教程，您可以使用它。- [http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

要制作没有任何库的默认 android 弹出菜单，请使用以下代码。

在第四行，您指定的布局是您的菜单布局（见下文）

```
 public void showPopup(View v) {
    PopupMenu popup = new PopupMenu(this, v);
    MenuInflater inflater = popup.getMenuInflater();
    inflater.inflate(R.layout.menu, popup.getMenu());
    popup.show();
} 
```

调用该方法时，需要做如下操作

```
 View p = (View)findViewById(R.id.view);
showPopup(p); 
```

在此代码中，`View p`是您要显示菜单顶角位置的视图。因此，如果您碰巧在顶角有一个文本视图，请将其用作放置菜单的视图。

有关此外观的更多信息 - [android 菜单代码不起作用](https://stackoverflow.com/questions/11077982/android-menu-code-not-working) 要覆盖菜单按钮功能，请执行以下操作

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ( keyCode == KeyEvent.KEYCODE_MENU ) {
        //Put the code for an action menu from the top here
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# java - Java sqlite ch-werner Wrapper？

> ID：13324639
> 
> 赞同：0
> 
> 时间：2012-11-10T18:03:03.277
> 
> 标签：java, database, sqlite, jdbc

有人能给我一些关于如何使用[http://www.ch-werner.de/javasqlite](http://www.ch-werner.de/javasqlite)包装器的示例代码吗？

我使用 eclipse 并将 SQLite jar 文件添加到我的项目中并将其链接到构建路径。我还将数据库添加到我的工作区..

我已经在课堂上导入了 SQLite.*。

那么我现在要做什么.. 创建连接 打开连接 做我必须做的任何事情 关闭连接

我明白了这些要点，但我不知道如何为它编写代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:16:56.990

这个包装器是一个 JDBC 驱动程序；您可以像访问任何其他 JDBC 驱动程序一样访问它。只需阅读[任何随机的 JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)。

您链接到的页面上描述了连接到 SQLite 数据库文件所需的 JDBC URL。

# php - 如何在 MYSQL 中删除和插入序列号并重新排序序列号？

> ID：13324642
> 
> 赞同：0
> 
> 时间：2012-11-10T18:03:33.017
> 
> 标签：php, mysql, oracle, phpmyadmin, mysqli

```
===============
| id   | name |
===============
|    1 | Ali  |
|    2 | ahmd |
|    3 | jada |
|    4 | nisr |
|    5 | sara |
|    6 | mona |
|    7 | dana |
=============== 
```

当我删除像 id=5 这样的任何行时，我想重新排序 ID 并像那样 =>

```
===============
| id   | name |
===============
|    1 | Ali  |
|    2 | ahmd |
|    3 | jada |
|    4 | nisr |
|    5 | mona |
|    6 | dana |
=============== 
```

如果我插入一行 id=2 name=yafa 也一样，如何在不重复任何值的情况下重新排序表并像这样

```
 | id   | name |
    ===============
    |    1 | Ali  |
    |    2 | yafa |
    |    3 | ahmd |
    |    4 | jada |
    |    5 | nisr |
    |    6 | sara |
    |    7 | mona |
    |    8 | dana |
    =============== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:15:12.377

这是假设您始终知道要添加或删除的“id”。（此外，您总是一次只使用一行）。

对于删除：

```
DELETE FROM tableName WHERE id = 5;

UPDATE tableName 
SET    id = id-1
WHERE  id > 5; 
```

对于插入：

```
UPDATE tableName 
SET    id = id + 1
WHERE  id >= 2;

INSERT INTO tableName (id, name) VALUES (2, 'yafa'); 
```

顺便说一句，你为什么要这样做。将列 'id' 设置为自增字段并让数据库处理它。你在乎你是否跳过数字吗？

# html - 绝对图像位置（不允许图像超出 div）

> ID：13324643
> 
> 赞同：1
> 
> 时间：2012-11-10T18:03:33.993
> 
> 标签：html, css, image

我试图到处搜索，但无法找到当图像具有绝对定位时如何防止图像留在其父 div 中（当缩放图像时它会超出 div）。隐藏溢出此时无济于事。感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:06:43.507

当你对一个元素进行绝对定位时，它会将自己定位在最近的定位父元素中。因此，将 a 添加`position: relative`到元素父级的 CSS 中。

为了确保父元素包含定位元素，您还需要添加`overflow:auto`到父元素的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:08:56.167

将此样式添加到图像中：

```
 style="width:inherit; height:inherit;" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:09:04.720

添加`position: relative`, 到父 div ..

```
.parent_div {position: relative;}
.parent_div img {position: absolute; top: number; right: number;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-12T03:41:29.000

这对我有用。

```
max-width: 100% 
```

# r - 如何在 r 中可视化面板模型的交互项？

> ID：13324648
> 
> 赞同：1
> 
> 时间：2012-11-10T18:04:21.230
> 
> 标签：r, visualization, regression, panel-data, plm

我的目标是可视化固定效应模型的交互项。我尝试了“visreg”和“ggplot2”包，但似乎不可能。

我怎样才能做到这一点？

提前致谢。

示例数据集和面板模型：

```
library(plm)
data(EmplUK)

m1 <- plm(emp ~ wage + capital + lag(output,1) + capital:lag(output,1), 
          data = EmplUK, model="within", effect="twoway", index=c("firm","year")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T08:51:18.930

在[sjPlot](http://cran.r-project.org/web/packages/sjPlot/index.html)的当前 CRAN 版本中，该`sjp.int`函数不支持`plm`对象。

但是，我已经在当前的[GitHub-version](https://github.com/sjPlot/devel)中实现了它。

以上面的示例为例，以下代码：

`sjp.int(m1)`

产生以下情节：

![在此处输入图像描述](../Images/5b1fd87fdcaaf354b9d499e97176e0d6.png)

我不确定是否适合所有类型的设计/模型`plm`，`sjp.int`如果您发现任何错误，请随时提出问题（[在 GitHub 上](https://github.com/sjPlot/devel/issues)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T21:01:41.843

也许这里的包裹会派上用场？[http://www.strengejacke.de/sjPlot/sjp.int/](http://www.strengejacke.de/sjPlot/sjp.int/)

CRAN的`probemod`软件包也可以提供帮助。

# php - hotmail.com 收不到邮件

> ID：13324649
> 
> 赞同：2
> 
> 时间：2012-11-10T18:04:25.693
> 
> 标签：php, email

出于某种原因，我可以在 yahoo.com 上收到带有以下代码的电子邮件，但不能在 hotmail.com 上收到？有人可以解释一下吗？

```
$usr = "bob@hotmail.com";
$subject = "Test Email";
$from = "noreply@test.com";
ini_set("sendmail_from", $usr);
$message = "<html><body style=\"font-family: Tahoma, Verdana, Arial; font-size: 12px; color: #444;\">
        <h1 style=\"font-family: Tahoma, Verdana, Arial; font-size: 16px; color: #111;\">This is an email</h1>
        <span style=\"background: #CCC; display: block; padding: 20px;\"><br><br>
        <b>This is a test.</b></body></html>";
$headers  = "MIME-Version: 1.0" . PHP_EOL;
$headers .= "Content-Type: text/html; charset=ISO-8859-1" . PHP_EOL;
$headers .= "From: Test.com<$from>" . PHP_EOL;
mail($usr, $subject, $message, $headers);
echo "<b>to:</b>$usr<br>";
echo "<b>subject:</b>$subject<br>";
echo "<b>msg:</b>$message<br>";
echo "<b>headrs:</b>$headers<br>"; 
```

我试了很多次，还是不行。但它立即与 yahoo.com 合作。

注意：没有收到垃圾邮件、垃圾邮件或任何东西。我的 iPhone 上也没有收到与该帐户相关联的电子邮件。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:07:25.003

可能是垃圾邮件过滤器起作用了，因为某些标头尚未传递给它的满意。

您可以使用经过测试的现有脚本之一，例如**[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)** ，而不是编写自己的邮件脚本实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:13:37.100

这可能不正确，但并非每个邮件系统（例如 google、yahoo）都不支持这些字体。也许 Hotmail 正试图阻止我的其他问题中的字体。Hotmail 已经升级了他们的垃圾邮件过滤功能，一些来自软件的电子邮件也无法通过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T13:11:31.703

**披露：我是 AlphaMail 背后的开发者之一**

确切地说出这里的问题并不容易。这些电子邮件最终是垃圾邮件，还是 Hotmail 拒绝了您的邮件？如果邮件被拒绝，可能是由于 Hotmail 由于某种原因阻止了您的域。如果它在共享主机上，则可能是由于垃圾邮件。如果您想找出确切的原因（垃圾邮件域、缺少 SPF、缺少 DKIM），请尝试从您的服务器手动连接到 Hotmail 并[手动发送电子邮件](http://www.wikihow.com/Send-Email-Using-Telnet)。这样，您将掌握错误而不是事后猜测。

如果您不想这样做，只想让它“工作”，我建议您使用事务性电子邮件服务，例如：

*   [阿尔法邮件](http://comfirm.se/alpha-mail/)
*   邮筒
*   邮资应用

**为什么？**

*   您不必过多考虑电子邮件传递。
*   统计数据。让您跟踪总发送/点击/打开/退回。
*   通常基于 Web 服务而不是 SMTP。即更容易处理。
*   更简洁的代码（至少如果您使用 AlphaMail 将数据与表示分离）。
*   可扩展且面向未来。

如果您选择使用 AlphaMail，您可以使用[AlphaMail PHP-client](https://github.com/comfirm/alphamail-php5-client)。

**例子：**

```
include_once("comfirm.alphamail.client/emailservice.class.php");

$email_service = AlphaMailEmailService::create()
    ->setServiceUrl("http://api.amail.io/v1")
    ->setApiToken("YOUR-ACCOUNT-API-TOKEN-HERE");

$person = new stdClass();
$person->userId = "1234";
$person->firstName = "John";
$person->lastName = "Doe";
$person->dateOfBirth = 1975;

$response = $email_service->queue(EmailMessagePayload::create()
    ->setProjectId(12345) // Your AlphaMail project (determines template, options, etc)
    ->setSender(new EmailContact("Sender Company Name", "from@example.com"))
    ->setReceiver(new EmailContact("Joe Doe", "to@example.org"))
    ->setBodyObject($person) // Any serializable object
); 
```

AlphaMail 的另一个优点是您可以直接在[AlphaMail Dashboard](http://amail.io/login.php)中编辑您的模板，并且您可以使用[Comlang 模板语言](http://docs.amail.io/?section=comlang)来格式化您的电子邮件。

```
<html>
    <body>
        <b>Name:</b> <# payload.firstName " " payload.lastName #><br>
        <b>Date of Birth:</b> <# payload.dateOfBirth #><br>

        <# if (payload.userId != null) { #>
            <a href="/sign-up">Sign Up Free!</a>
        <# } else { #>
            <a href="/login?id=<# payload.userId #>">Sign In</a>
        <# } #>
    </body>
</html> 
```

# javascript - javascript迭代器和生成器

> ID：13324650
> 
> 赞同：0
> 
> 时间：2012-11-10T18:04:25.820
> 
> 标签：javascript

我写了下面的代码：

```
<script type="text/javascript">
function testGenerator()
{
yield "first";
document.write("step1");
yield "second";
document.write("step2");
yield "third";
 document.write("step3");
 }
 var g = testGenerator();
document.write(g.next());
document.write(g.next());
 </script> 
```

我想要的输出：step1step2 但是上面的代码在我的 html 上什么也没显示。谁能帮我弄清楚我在这里犯了什么错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:11:05.600

生成器/迭代器目前[仅受 Firefox 支持](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB/Using_JavaScript_Generators_in_Firefox)，要使用它们，您需要将脚本标签的`type`属性更改为`"text/javascript;version=1.7"`.

# ruby - 相交的非空数组

> ID：13324652
> 
> 赞同：4
> 
> 时间：2012-11-10T18:04:33.013
> 
> 标签：ruby

我有三个要相交的数组，但我想忽略那些为空的数组。

这段代码似乎太冗长了。有没有更有效的方法？

```
if a.empty? && b.empty?
  abc = c
elsif a.empty? && c.empty?
  abc = b
elsif b.empty? && c.empty?
  abc = a
elsif a.empty?
  abc = b & c
elsif b.empty?
  abc = a & c
elsif c.empty?
  abc = a & b
else
  abc = a & b & c
end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T18:12:02.190

怎么样

```
abc = [a,b,c].reject(&:empty?).reduce(:&) 
```

第一部分，`[a,b,c]`将您的数组放入一个数组中。第二位 with在每个元素上[`reject`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject)运行`empty?`，如果结果为真则拒绝它，返回一个数组数组，其中删除了空数组。最后一部分[`reduce`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reduce)运行与您的等效，`a & b & c`但是由于我们在上一步中丢弃了所有空数组，因此您最终不会得到空结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T22:08:53.273

派对有点晚了...

```
a = [1,3,4,5]
b = []
c = [2,3,5,6]

t = a | b | c # => [1, 3, 4, 5, 2, 6]
[a,b,c].map {|e| e.empty? ? t : e}.reduce(:&) # => [3, 5] 
```

# java - 关于 ArrayList 的几个问题

> ID：13324654
> 
> 赞同：5
> 
> 时间：2012-11-10T18:04:42.713
> 
> 标签：java, arraylist

**问题1：**

指定 ArrayList 的大小是否有意义？我知道我的 List 中将包含多少元素，事先指定大小是否好，或者甚至无关紧要。

```
List<String> list = new ArrayList<String>(1);
list.add("Hello");

List<String> newList = new ArrayList<String>();
newList.add("Hello"); 
```

**问题2：**

java.util.ConcurrentModificationException 当您在迭代同一集合时操作（添加、删除）集合时发生。`Does that mean there is a thread which is modifying the ArrayList and another Thread iterating the same object.`

**问题3**

谁能告诉我如何锁定列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T18:07:41.583

1.  如果您要添加很多项目，这很重要，因为这意味着集合不需要在进行过程中不断复制其内部缓冲区。使用一个小列表不会有太大的不同。请注意，您没有指定的大小*-*`ArrayList`您正在指定其初始*容量*：

    ```
    List<String> list = new ArrayList<String>(10000);
    System.out.println(list.size()); // 0 
    ```

    您仍然需要向其中添加项目以更改大小 - 但您可以在需要执行内部复制之前将项目添加到其容量。

2.  不，不必涉及额外的线程。这只是意味着您在迭代集合时已经修改了集合。这可以很容易地在一个线程中：

    ```
    for (String item : items) {
        items.add("Foo"); // The next iteration step will fail.
    } 
    ```

3.  您需要提供更多上下文。通常，在对列表执行*某些操作*时获取锁更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:17:38.797

Q1：这就是 ArrayList 的样子

```
public ArrayList{
    private int[] elementData;
    private int size;
} 
```

构造 ArrayList 时，会自动初始化数组的大小。当空间不足时，大小会自动调整为原始大小的 1.5 倍。

Q2：你完全正确。“例如，通常不允许一个线程在另一个线程对其进行迭代时修改集合。通常，在这些情况下，迭代的结果是不确定的。一些迭代器实现（包括所有通用集合的实现）如果检测到这种行为，JRE 提供的实现可能会选择抛出这个异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在不确定的时间冒着任意的、非确定性的行为的风险在将来。” -java 文档[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)

Q3：锁定您使用的列表

```
Collections.unmodifiableList(list); 
```

这适用于所有集合，并且它禁止用户更改数据。换句话说，它为用户提供了“只读”副本。您可以在此处阅读有关集合类的更多信息。[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:33:08.967

**关于问题 3：** 锁定列表有两种方法

1)**隐式监视器锁**：如果您使用集合的工厂方法创建一个同步列表，那么您可以使用包装器对象来创建锁。

```
 List<T> list = new ArrayList<T>();
    List<T> slist = Collections.synchronizedList(list);
    synchoronized(slist) {
    //code
    } 
```

在这种情况下，slist 将用于在迭代和任何复合操作期间进行锁定。

2）**您可以使用对象类作为锁**

```
 Object lock = new Object();
    synchronized (lock) {
       // ...
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T18:07:30.613

1.  如果列表很大，那么值得声明初始大小。为什么？因为当你创建一个 ArrayList 时，它的初始大小通常是 ~10。当您添加新项目并且初始大小不够时，ArrayList 会分配更多内存，并且所有元素都会重新定位，这需要时间。

2.  不，不需要另一个线程。当您遍历列表并在循环主体中添加或删除它的元素时，可能会发生此异常。然后你必须使用迭代器。

3.  锁定列表是什么意思？您想让它成为线程安全的还是禁用添加/删除它的元素？在第二种情况下，您想使用`unmodifiableCollection`方法 in `java.util.Collections`。

# asp.net-mvc - 将数据传递到 MVC 中的 @section

> ID：13324656
> 
> 赞同：3
> 
> 时间：2012-11-10T18:05:01.653
> 
> 标签：asp.net-mvc, razor

我知道你不能使用@RenderSection 来传递数据，但什么相当于实现以下目标？我正在尝试将 item.Enabled 的值发送回部分视图

这是下拉 DropDown.cshtml 的布局页面：

```
@foreach (var item in Model.Items){
    <li>
        @RenderSection("Item", false)//How to pass 'item.IsChecked' back ?
        <span class="key">@item.Key</span>
        <span class="value">@item.Value</span>                  
    </li>
} 
```

这种局部观点即调用上述内容。我想在专门创建带有复选框的下拉菜单时使用它。

```
@model DropDownCheckBox
@{
    Layout = "~/Views/Shared/DropDown.cshtml";
}
@section Item{
    <input type="checkbox" @(Model.IsChecked ? "checked=yes" : string.Empty) />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:37:05.497

`@RenderSection()`是同一个概念`@RenderBody()`

在你的情况下你应该使用的是`@Html.Partial("ViewName", YourModel)`或`@Html.RenderPartial("ViewName", YourModel)` 代替。

# php - 使用 pdo 在搜索变量中使用冒号 (:) 进行查询

> ID：13324660
> 
> 赞同：6
> 
> 时间：2012-11-10T18:05:44.087
> 
> 标签：php, mysql, pdo

我有一个烦人的问题。我正在尝试做一些简单的事情，例如从数据库中获取单元格值。这是您可以使用数据库做的最基本的事情...给我一个值，其中有一个具有该值的单元格...。

问题是搜索查询包含冒号 (:)。我在一个带有准备好的语句但没有运气的类中使用 pdo 函数。我已经尝试了一切，甚至将查询分开，使其不包含冒号，但仍然没有运气。我试图恢复到 mysqli 但仍然是相同的结果......

数据表包含 title -> Morlanda C:2 和 sourceID -> S11 等值。顺便说一句，如果我尝试在 phpmyadmin 中搜索标题，我会在寻找 Morlanda C:2 时得到我想要的。

但是当我调用我的函数时，这就是：

```
$sourceID = $sources->sourceAvalibe('Morlanda C:2'); 
```

我正在访问我的功能：

```
public function sourceAvalibe($sourceTitle){
    try {
        $sql = "SELECT sourceID FROM sources WHERE title=:sourceTitle";
        $core = Core::getInstance();
        $stmt = $core->dbh->prepare($sql);
        $stmt->bindParam(':sourceTitle', $sourceTitle, PDO::PARAM_STR, 32);
        $stmt->execute();
        $row = $stmt->fetch(PDO::FETCH_ASSOC);
        return $row;    
} 
```

然后结果将是空的..

但如果我这样调用函数：

```
 $sourceID = $sources->sourceAvalibe('1910 Massachusetts Census'); 
```

结果将返回我正在寻找的内容。

如果查询包含冒号 (:)，则结果将为空，但如果我包含不带冒号 (:) 的内容，则返回正确的 sourceID。

我试图以不同的方式逃避冒号，但它也不会找到结果。

在我去香蕉之前你能帮我吗？？？

### 更新 1

你好

感谢您的回答。我正在搜索的数据与数据库中的数据完全相同，使用复制/粘贴。我一直在寻找邪恶的空白，但没有发现任何额外的东西。我现在改用 bindValue 了。

关于禁用模拟准备好的语句的评论，我的回答是.. Que？:) 我现在在这篇文章中找到了你所说的关于模拟的内容：[防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)，并更新了我的构造函数类。我仍然得到相同的结果......什么都没有......

我正在为我的数据库连接使用这个构造函数类：

```
class Core {

    public $dbh;
    private static $instance;

   function __construct(){
        $this->dbh = new PDO("mysql:host=$db_host;dbname=$db_name", $db_user, $db_pass, 
        array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8", 
              PDO::ATTR_EMULATE_PREPARES => false));
    }

    public static function getInstance(){
        if (!isset(self::$instance)){
            $object = __CLASS__;
            self::$instance = new $object;
        }
        return self::$instance;
    }

} 
```

### 更新 2

你好

当我将搜索值**Morlanda C:2**硬编码到我的 sql 行中时，一切都按预期工作。所以我对我的 php 生成的标题进行了比较：

```
 $sourceTitle = $sourcePreTitle." ".$preTitleNumber[0].":". $preTitleNumber[1]; 
```

和：

```
 $orginalString = "Morlanda C:2"; 
```

他们不匹配。进行了类型检查，但两者都被刺痛了。我开始认为是旧的 UTF8 编码问题在这里困扰着我。我的数据库、表格和单元格设置为 utf8_unicode_ci。pdo 连接是 UTF8，并使用 Notepad++ 使用“ANSI with UTF-8”（无 BOM）对 php 文件进行了编码。

这里的整个项目是将家谱笔记转换为源，所以我从同一个数据库中的表中收集一个长字符串，然后分解它，然后将一些片段组装成一个像上面一样的源标题。然后我搜索数据库以查看源是否已经存在，如果不存在，那么我只需创建一个新的。数据的收集和对 sourceTilte 的搜索由同一个 pdo 类完成。

### 更新 3

你好

这是一个愚蠢的空白或类似的东西......我确实在 $sourceTitle 变量上使用了 trim，但不是在 explode 函数的数组中的每一块上使用。当我这样做时，它起作用了。我猜这是最后一个数字让我感到困惑之后的结尾或其他东西。

感谢您的帮助，我现在终于可以将我的 3000 条笔记转换为来源了 :) 下一个项目是如何防止我的脚本自定义阻塞我的 VPS...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:12:30.037

您绑定的数据不需要以任何方式进行转义。这几乎就是绑定参数的全部意义所在。您的问题不在于数据中有冒号。很可能，您在代码或实际数据库记录中打错了标题。

在不相关的说明中，最好使用`bindValue()`而不是`bindParam()`用于您的用例：

```
$stmt->bindValue(':sourceTitle', $sourceTitle); 
```

养成使用的习惯，`bindValue()`除非你知道你需要通过引用绑定（在这种情况和类似的情况下，你只使用一次值，所以你不需要通过引用绑定）。

# c++ - 在 R 中定义一个矩阵并将其传递给 C++

> ID：13324664
> 
> 赞同：5
> 
> 时间：2012-11-10T18:06:35.847
> 
> 标签：c++, r, rcpp

我在 R 中定义了一个矩阵。我需要将此矩阵传递给 C++ 函数并在 C++ 中执行操作。示例：在 R 中，定义一个矩阵，

```
A <- matrix(c(9,3,1,6),2,2,byrow=T)
PROTECT( A = AS_NUMERIC(A) );
double* p_A = NUMERIC_POINTER(A); 
```

我需要将此矩阵传递给 C++ 函数，其中类型的变量“数据”`vector<vector<double>>`将使用矩阵 A 初始化。

我似乎无法弄清楚如何做到这一点。我正在以比我应该的更复杂的方式思考，我敢打赌有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T18:48:33.580

正如保罗所说，我建议使用[`Rcpp`](http://dirk.eddelbuettel.com/code/rcpp.html)这种东西。但这也取决于你想要你`vector< vector<double> >`的意思。假设你想存储列，你可以像这样处理你的矩阵：

```
require(Rcpp)
require(inline)

fx <- cxxfunction( signature( x_ = "matrix" ), '
    NumericMatrix x(x_) ;
    int nr = x.nrow(), nc = x.ncol() ;
    std::vector< std::vector<double> > vec( nc ) ;
    for( int i=0; i<nc; i++){
        NumericMatrix::Column col = x(_,i) ;
        vec[i].assign( col.begin() , col.end() ) ;
    }
    // now do whatever with it
    // for show here is how Rcpp::wrap can wrap vector<vector<> >
    // back to R as a list of numeric vectors
    return wrap( vec ) ;
', plugin = "Rcpp" )
fx( A )
# [[1]]
# [1] 9 1
# 
# [[2]]
# [1] 3 6 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T18:31:16.190

您可能想使用 Rcpp。该包允许轻松集成 R 和 C++，包括将对象从 R 传递到 C++。该软件包可在 CRAN 上获得。此外，CRAN 上的一些包使用了 Rcpp，因此它们可以作为灵感。Rcpp的网站在这里：

[http://dirk.eddelbuettel.com/code/rcpp.html](http://dirk.eddelbuettel.com/code/rcpp.html)

其中包括一些教程。

# java - 我如何使用 java 确定某个事件是在本周、上周还是哪周发生的？

> ID：13324665
> 
> 赞同：1
> 
> 时间：2012-11-10T18:06:35.030
> 
> 标签：java, calendar

我正在开发一个简单的销售点系统，并试图生成尽可能多的销售和费用数据统计信息。我想要一种方法来显示本周的销售情况，但是，尽管我浏览了 api 并检查了一些教程，但我真的找不到方法。最后，我决定比较一下今天`DAY_OF_WEEK_IN_MONTH`发生的交易`DAY_OF_WEEK_IN_MONTH`。例如，如果它们相同，则交易必须与今天在同一周发生，即本周。起初，它似乎有效，但现在又重新考虑了。如果有人向我指出正确的方法，我将不胜感激。

```
public void getSalesTotalForWeek() throws SQLException {
    //getDatesCount() populates a collection(listDates) with dates in which
    //transactions took place
    getDatesCount();
    //sets cal with today's date
    Calendar cal = new GregorianCalendar();
    for (int i = 0; i &lt; listDates.size(); i++) {
        //set c with the date of when the transaction took place
        Calendar c = new GregorianCalendar(Integer.parseInt(listDates.get(i).substring(0, 4)),
        Integer.parseInt(listDates.get(i).substring(5, 7)), Integer.parseInt(listDates.get(i).substring(8, 10)));
        //This is like saying if the day of week in month when the transaction took place
        //is the same as that of today, then the transaction
        //must have taken place in the same week as today
        if(cal.get(Calendar.DAY_OF_WEEK_IN_MONTH) == c.get(Calendar.DAY_OF_WEEK_IN_MONTH)){
            rst = stmt.executeQuery("SELECT * FROM transaction_history where Time like '"+   listDates.get(i) + "%'");
            while (rst.next()) {
                weekSalesTotal += rst.getInt(2);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:39:53.717

您的代码中有几处需要修复：

```
public void getSalesTotalForWeek() 
```

命名的方法`get*()`并没有真正返回任何东西（违反直觉）。似乎`weekSalesTotal`是一个领域，记住线程安全。

* * *

```
Calendar cal = new GregorianCalendar(); 
```

如果有一天有人问你上周的销售额怎么办？还是三月的第一周？考虑将开始日期和结束日期都作为参数传递。您还确定要使用服务器默认时区吗？

* * *

```
Calendar c = new GregorianCalendar(Integer.parseInt(listDates.get(i).substring(0, 4)),
Integer.parseInt(listDates.get(i).substring(5, 7)), Integer.parseInt(listDates.get(i).substring(8, 10))); 
```

`listDates`是一个`List<String>`？请考虑`Date`类型，上面的代码看起来很糟糕。

* * *

```
cal.get(Calendar.DAY_OF_WEEK_IN_MONTH) == c.get(Calendar.DAY_OF_WEEK_IN_MONTH) 
```

我不太明白这个代码。我正在阅读的JavaDoc，[`DAY_OF_WEEK_IN_MONTH`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#DAY_OF_WEEK_IN_MONTH)但我仍然不明白......

* * *

```
"SELECT * FROM transaction_history where Time like '"+   listDates.get(i) + "%'" 
```

如果您只对第二个（我们称之为`value`）感兴趣，请不要选择所有列。也不要连接 SQL，SQL 注入已经在路上了。最后使用`like`运算符进行日期吗？您`DATE`在数据库中使用正确的类型吗？

* * *

是`weekSalesTotal`场吗？记住同步。并避免在循环中运行 SQL。

# TL;博士

我相信你的整个方法可以用更强大、更快、更简单的东西代替：

```
public int getSalesTotalWithin(Date start, Date end) {
  rst = stmt.executeQuery(
    "SELECT SUM(value) FROM transaction_history where Time BETWEEN ? AND ?");
  return rst.getInt(1);
} 
```

这只是伪代码，它缺少 JDBC 样板和`?`替换。但你会明白的。现在您可以使用任何日期范围调用它，例如：

```
Calendar weekAgo = new GregorianCalendar();
weekAgo.add(Calendar.DATE, -7);
getSalesTotalWithin(weekAgo.getTime(), new Date()); 
```

如果您想要自上周一以来的统计数据：

```
Calendar lastMonday = new GregorianCalendar(TimeZone.getTimeZone("GMT"));
lastMonday.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);
lastMonday.set(Calendar.HOUR_OF_DAY, 0);
//...zero other fields
getSalesTotalWithin(lastMonday.getTime(), new Date()); 
```

# android - 从数据库中提取数据以放入折线图 achartengine

> ID：13324670
> 
> 赞同：2
> 
> 时间：2012-11-10T18:06:49.747
> 
> 标签：android, sqlite, bar-chart, achartengine

我想将我的数据从 db 显示到条形图（Achartengine），我有两个字段日期和 bmi 结果。日期为字符串格式，bmi 为 double/int。

这是我迄今为止尝试过的：

```
public class BMICalculatorDB {
public static final String KEY_BMIID = "bmi_id";
public static final String KEY_BMIDATA = "bmi_data";
public static final String KEY_BMIDATE = "bmi_date";

private static final String DATABASE_NAME = "DB_bmi";
private static final String DATABASE_TABLE = "tbl_bmi";
private static final int DATABASE_VERSION = 1;

private DBHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DBHelper extends SQLiteOpenHelper{

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL( "CREATE TABLE " + DATABASE_TABLE + " (" +
        KEY_BMIID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_BMIDATA + " TEXT NOT NULL, " +
                KEY_BMIDATE + " TEXT NOT NULL );"
                );
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL( "DROP TABLE IF EXISTS " + DATABASE_TABLE );
        onCreate(db);
    }

}

public BMICalculatorDB(Context c){
    ourContext = c;
}

public BMICalculatorDB open(){
    ourHelper = new DBHelper(ourContext);
    ourDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close(){
    ourHelper.close();
}

public long createEntry( String data, String date ) {
    //, String date 
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_BMIDATA, data);
    cv.put(KEY_BMIDATE, date);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);
}

public String getBMIID() {
    // TODO Auto-generated method stub
    String[] column =
            new String[]{ KEY_BMIID };
    Cursor c = 
            ourDatabase.query(DATABASE_TABLE, column, null, null, null, null, null);

    String result = "";
    int iID = c.getColumnIndex(KEY_BMIID);

    for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
        result = result + c.getString(iID);
    }

    return result;
}

public String getBMIDataData(){

    String[] column =
                new String[]{ KEY_BMIDATA };
        Cursor c = 
                ourDatabase.query( DATABASE_TABLE, column, null, null, null, null, null );

        String result = "";
        int iData = c.getColumnIndex( KEY_BMIDATA );

        for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
            result = result + c.getString( iData );
        }

    return result;
}

public String getBMIDateData(){
    String[] column =
            new String[]{ KEY_BMIDATE };
    Cursor c = 
            ourDatabase.query( DATABASE_TABLE, column, null, null, null, null, null );

    String result = "";
    int iDate = c.getColumnIndex( KEY_BMIDATE);

    for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
        result = result + c.getString( iDate );
    }

return result;
}

public void updateEntry( long lId, String mData, String mDate ) {
    // TODO Auto-generated method stub
    ContentValues cvUpdate = new ContentValues();

    cvUpdate.put( KEY_BMIDATA, mData );
    cvUpdate.put( KEY_BMIDATE, mDate );
    ourDatabase.update( DATABASE_TABLE, cvUpdate, KEY_BMIID + " = lId", null );
}

public String getData(long l) {
    // TODO Auto-generated method stub
    return null;
}

public String getDate(long l) {
    // TODO Auto-generated method stub
    return null;
}

public XYMultipleSeriesDataset getDemoDataset(String title) {

    String[] column =
            new String[]{ KEY_BMIDATA };
    Cursor c = ourDatabase.query( DATABASE_TABLE, column, null, null, null, null, null );

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

    TimeSeries series = new TimeSeries("Line1");
    TimeSeries series2 = new TimeSeries(title);

    getBMIDataData();

    while (!c.isAfterLast()) {
        int date = c.getInt((Integer) c.getColumnIndexOrThrow("bmi_date"));
        int weight = c.getInt((Integer) c.getColumnIndexOrThrow("bmi_data"));
        series2.add(weight, date);
        c.moveToNext();
    }

    c.close();

    dataset.addSeries(series);
    dataset.addSeries(series2);

    return dataset;
}

public Intent getIntent(Context context) {

    //Lager TimeSeries for den første linja
    XYMultipleSeriesDataset dataset = getDemoDataset("Line1");

    //Kode for render
    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();

    //Optimalisering linje1
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    renderer.setColor(Color.YELLOW);
    renderer.setPointStyle(PointStyle.CIRCLE);
    renderer.setFillPoints(true);

    // Optimalisering linje2 husk rekke følgen
    XYSeriesRenderer renderer2 = new XYSeriesRenderer();
    renderer2.setColor(Color.BLUE);
    renderer2.setPointStyle(PointStyle.SQUARE);
    renderer2.setFillPoints(true);

    //Legger til render seriene
    mRenderer.addSeriesRenderer(renderer);

    //Optimalisering grafen
    mRenderer.setChartTitle("Test");
    mRenderer.setZoomEnabled(true);
    mRenderer.setZoomButtonsVisible(true);
    mRenderer.setBackgroundColor(Color.BLACK);
    mRenderer.setApplyBackgroundColor(true);
    mRenderer.setXTitle("Dager");
    mRenderer.setShowGrid(true);

    mRenderer.addSeriesRenderer(renderer2);

    Intent intent = ChartFactory.getLineChartIntent(context, dataset, 
            mRenderer, "Line Graph Title");

    return intent;

} 
```

}

但我在第 28 行遇到错误：

```
Cursor c = dbSqlite.query( DATABASE_TABLE, column, null, null, null, null, null ); 
```

和

```
XYMultipleSeriesDataset dataset = getDemoDataset("Line1"); 
```

我真的坚持这一点。任何帮助都非常感谢。

错误：

```
11-11 02:33:06.542: E/AndroidRuntime(344): FATAL EXCEPTION: main
11-11 02:33:06.542: E/AndroidRuntime(344): java.lang.NullPointerException
11-11 02:33:06.542: E/AndroidRuntime(344):  at   android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
11-11 02:33:06.542: E/AndroidRuntime(344):  at com.fps.iHealthFirst.calculators.LineGraph.getDemoDataset(LineGraph.java:53)
11-11 02:33:06.542: E/AndroidRuntime(344):  at com.fps.iHealthFirst.calculators.LineGraph.getIntent(LineGraph.java:87)
11-11 02:33:06.542: E/AndroidRuntime(344):  at com.fps.iHealthFirst.calculators.BMICalculator.onClick(BMICalculator.java:181)
11-11 02:33:06.542: E/AndroidRuntime(344):  at android.view.View.performClick(View.java:2485)
11-11 02:33:06.542: E/AndroidRuntime(344):  at android.view.View$PerformClick.run(View.java:9080)
11-11 02:33:06.542: E/AndroidRuntime(344):  at android.os.Handler.handleCallback(Handler.java:587)
11-11 02:33:06.542: E/AndroidRuntime(344):  at android.os.Handler.dispatchMessage(Handler.java:92) 
```

# java - 带有数据库的 Java 小程序

> ID：13324672
> 
> 赞同：2
> 
> 时间：2012-11-10T18:06:58.403
> 
> 标签：java, jdbc, applet

我正在尝试编写一个简单的 Applet，它必须从数据库中获取文本数据。

我有一些问题：

*   我有远程 mysql 数据库或者我可以创建一个本地数据库，什么是最正确的？
*   我已经下载了 mysql-connector-java-5.1.22-bin.jar 并把它放到我的小程序源目录

    yakoot@yakoot-home:~/java$ echo $CLASSPATH /home/yakoot/java/mysql-connector-java-5.1.22-bin.jar

但当我尝试时，

```
Class.forName("com.mysql.jdbc.Driver"); 
```

我懂了

> 错误：未报告的异常 ClassNotFoundException；必须被抓住或宣布被扔掉

```
Class.forName("com.mysql.jdbc.Driver"); 
```

我为 mysql-connector-java-5.1.22-bin.jar 尝试了一些不同的位置，但没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:15:43.327

将您的 MySQL JAR 文件放在类文件夹中。即，如果您使用的是 netbeans，您需要选择包含库/JAR 文件夹。然后浏览 mysql-connector-java-5.1.22-bin.jar 文件。然后重建源代码并再次运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:16:38.877

您可以根据需要拥有本地或远程数据库。

其次，您需要包含`Class.forName("com.mysql.jdbc.Driver");`在 try catch 块中。

```
try
{
Class.forName("com.mysql.jdbc.Driver");
}
catch(ClassNotFoundException e)
{
   e.printStackTrace();
} 
```

# android - Android SQLite 数据库 onCreate 错误

> ID：13324674
> 
> 赞同：1
> 
> 时间：2012-11-10T18:07:15.503
> 
> 标签：android, sqlite, logcat, oncreate

我是 SQLite 的新手，正在尝试创建一个用于学习目的的基本数据库。

在我的 Main 我声明了一个新的 DbHelper 和 SQLiteDatabase..

```
 // Open Database
    DbHelper dbHelper = new DbHelper(Main.this);        
    SQLiteDatabase db = dbHelper.getWritableDatabase(); 
```

我的 DbHelper 类..

```
public class DbHelper extends SQLiteOpenHelper
{
private static final String TAG = "DbHelper";

public static final String DB_NAME = "exerciseDB";
public static final int DB_VERSION = 1; // User defined - up to you
public static final String TABLE = "Exercises";

// Try keep column names consistent with object names
public static final String C_ID = "_id"; // "_id" special
public static final String C_PARENTEXERCISE = "parentExercise";
public static final String C_SETNO = "setNo";
public static final String C_REPSANDWEIGHT = "repsAndWeight";

public String sql;

Context context;

public DbHelper(Context context)
{
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db)
{
    // SQL commands
    sql = String.format(
            "CREATE TABLE %s (%s INT PRIMARY KEY %s TEXT %s INT %s TEXT);",
            TABLE, C_ID, C_PARENTEXERCISE, C_SETNO, C_REPSANDWEIGHT);

    // Prints out sql String to Logcat
    Log.d(TAG, "onCreate sql: " + sql);

    db.execSQL(sql); // Executes the SQL commands
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
    // Maintain users data first
    db.execSQL("drop table if exists " + TABLE); // Deletes table if it
                                                    // exists

    Log.d(TAG, "onUpdata dropped table" + TABLE);

    // Recreate database
    this.onCreate(db);
}

public String getSQLcmd()
{
    return sql;     
} 
```

}

sql 命令的 LogCat 输出与我认为应该是一样的。

```
onCreate sql: CREATE TABLE Exercises (_id INT PRIMARY KEY parentExercise TEXT setNo INT repsAndWeight TEXT); 
```

LogCat 还说：

```
 11-10 17:44:14.702: E/SQLiteLog(13053): (1) near "parentExercise": syntax error 
```

但我似乎看不出与 parentExercise 相关的任何问题。

任何帮助将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:11:17.847

您的查询应该看起来像

```
CREATE TABLE Exercises (_id INT PRIMARY KEY, parentExercise TEXT, setNo INT, repsAndWeight TEXT) 
```

# database-design - 谷歌分析的数据库模式/数据库设计是什么样的？

> ID：13324676
> 
> 赞同：1
> 
> 时间：2012-11-10T18:07:22.473
> 
> 标签：database-design, google-analytics, database-schema

我想跟踪发送到 GA 跟踪的相同数据，并希望拥有我们自己的本地事件表。对于他们的事件/GoogleAnalytics，Google 的数据库架构会是什么样子。

到目前为止，我有一个包含以下列的事件表，我想知道我是否缺少任何主要内容：

## 事件

```
id
event-type (ie. event, page-view, custom-var, identity)
domain (ie. sub.main.com, sub2.main.com)
page-url (ie /questions/popular)
action-name (ie. "clicked sign in", "signed up")
session_id (to keep track of entire experience)
user_id (could be nil)
utm_vars (GA source, medium, campaign, etc.)
is_mobile
created_at (timestamp)
data-properties (a hash of other random properties that are being tracked, like "clicked from header", "clicked from footer") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:47:08.253

我认为谷歌正在使用一些大规模的 noSql-thingie，所以谈论谷歌的数据库模式可能有点误导（不过，你的模式看起来很适合你想要做的事情，我想那是你的问题）。

如果您想确保您拥有与谷歌相同的数据，您可以使用以下方法将原始数据发送到您自己的服务器：

```
_gaq.push(['_setLocalGifPath', 'http://yourdomain/phpscript_masking-as-image.gif']);
_gaq.push(['_setLocalRemoteServerMode']); 
```

（这些是由自托管的、现已停产的、使用与 GA 相同格式的 urchin 分析产品处理的）。

此函数会将带有附加跟踪数据的 utm 跟踪 gif 请求发送到 GA 和您自己的服务器。您可以编写一个 PHP 脚本，将其屏蔽为 gif 并解析事件的跟踪请求（更有可能您希望将信息写入文件并在后台对其进行解析，以免服务器停机 - GA 发送大量 gif ）。这样您就无需考虑自己的数据收集机制。

# c++ - 对齐具有向量作为成员的结构（c ++）

> ID：13324684
> 
> 赞同：0
> 
> 时间：2012-11-10T18:08:13.580
> 
> 标签：c++, vector, sizeof

```
struct bar {
  int32 a;    // 4 bytes
  int32 b;    // 4 bytes
  vector<int> c;      // something like 8 or 16 bytes?
} 
```

当我执行 sizeof(bar) 时，它会给出 32 个字节！有什么办法可以将它**对齐**到更小的东西？任何潜在的惩罚？我不太确定矢量部分......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:20:15.147

的正常实现`std::vector<T, A>`是拥有一个具有三个指针的指针，对于有状态的分配器，无论维护分配器需要什么：

1.  指向向量开始的指针。
2.  指向向量末尾的指针或向量中的元素数。
3.  指向已分配内存末尾或已分配元素数的指针。

将其放入类型时，可能会填充为 4 个单词以缩短访问时间。当你将这样的向量与另外两个数据成员组合在一起时，你自然会得到一个占用 8 个字的类型，其中三个用于对齐类型以便快速访问。

如果您真的关心`struct`包含向量的 s 的大小，因为该向量通常是空的并且很少包含数据，那么您可能更喜欢具有不同布局的实现：该向量仍然需要启动上述信息，但它可以从分配的缓冲区开始数据：分配内存时，向量将分配额外的空间以将其管理信息添加到实际值并存储指向已分配数据的指针（可能指向第一个元素，但是，这会恢复管理信息不可移植）。

使用刚刚描述的表示，向量的大小将是一个单词，而您的总大小`struct`将是三个单词加上填充，即可能是 4 个单词。`begin()`当需要向量的大小或容量时（例如，使用and `end() 时），以较小的开销换取更好的大小。

通常，向量的大小往往无关紧要，因为向量的实际内存消耗取决于向量中的元素。

# c++ - 尝试声明构造函数时在输入末尾预期“{”

> ID：13324687
> 
> 赞同：0
> 
> 时间：2012-11-10T18:08:25.783
> 
> 标签：c++, constructor

尝试编译我的代码时，我每次都会收到以下错误。这些是错误：

```
C:\...\main.cpp In file included from main.cpp
C:\...\triangle.h In constructor `trianglePlus::trianglePlus(double, double, double, char*)':
C:\...\triangle.h expected `{' at end of input
C:\...\Makefile.win [Build Error]  [main.o] Error 1 
```

这是我的程序的精简版。

三角形.h：

```
class triangle { 
  double x;
  double y;
  double z;

  public:
         triangle(double a,double b,double c);
  };
class trianglePlus: public triangle {
  char * name;
  public:
         trianglePlus(double a,double b,double c,char * v):triangle(a,b,c);
  }; 
```

删除评论部分时，它给了我更多错误。主文件

```
#include <cstdlib>
#include <iostream>
#include <math.h>
#include "triangle.h"
using namespace std;

triangle::triangle(double a, double b, double c) {
    x = a;
    y = b;
    z = c;
}

/*
trianglePlus::trianglePlus(double a,double b,double c,char * v):trijsturis(a,b,c) {
    x = a;
    y = b;
    z = c;
    name = new char[20];
    strcpy(name,v);
    }
*/

int main()
{
    system("PAUSE");
    return 0;
} 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T18:11:08.650

您的构造函数需要完全定义或仅声明。由于要指定初始化列表，因此需要定义完整的构造函数。最好这样，在类定义中内联：

```
trianglePlus(double a, double b, double c, char * v)
: triangle(a,b,c)
, x(a)
, y(b)
, z(c)
{
} 
```

或者，只需将声明放在标题中，并将定义放在源文件中：

```
trianglePlus(double a, double b, double c, char * v); 
```

```
trianglePlus::trianglePlus(double a, double b, double c, char * v)
: triangle(a,b,c)
, x(a)
, y(b)
, z(c)
{
} 
```

# visual-studio-2012 - VS2012 / Windows Phone 模拟器无法启动

> ID：13324690
> 
> 赞同：3
> 
> 时间：2012-11-10T18:08:48.287
> 
> 标签：visual-studio-2012, windows-phone

我无法在 VS2012 中启动 Windows Phone 模拟器……我已经下载了 Windows Phone 8 SDK。

它启动，但在启动时给我一个错误：

“Windows Phone 模拟器无法确保虚拟机正在运行”... blalbla ...“...找不到元素 (0x80070490)

还有一些关于无法找到可用证书的事情？！

关于如何启动和运行它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T20:25:15.737

显然这是由权限问题引起的。

我的用户帐户对以下文件夹没有任何权限：“C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys”。授予我的用户帐户对此文件夹的完全访问权限，似乎已经解决了问题！

# php - 使用php自动填充html表单

> ID：13324696
> 
> 赞同：-5
> 
> 时间：2012-11-10T18:09:25.250
> 
> 标签：php, html, mysql

我有一个 HTML 表单，它有 3 个文本输入字段：`id`、`name`和`contact`. 我的数据库表具有相同的命名列，值为`id=1`, `name=mark`& `contact=1234`。现在，如果我在我的 html 表单的 id 字段中输入“1”并按回车，那么表单字段的其余部分（如：`name`、、`contact`）将如何自动填充？

到目前为止我所做的是：

我的**index.html**文件（我认为它是错误的，因为我之前没有使用过 JSON）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type = javascript>

$("#email").bind("change", function(e){
  $.getJSON("lookup.php?email=" + $("#email").val(),
        function(data){
          $.each(data, function(i,item){
            if (item.field == "first_name") {
              $("#first_name").val(item.value);
            } else if (item.field == "last_name") {
              $("#last_name").val(item.value);
            }
          });
        });
});

</script>>
</head>

<body>
<form>
<input  type="text" name="email" id="email" />
<input type="text" name="first_name" id="first_name" />
<input type="text" name="last_name" id="last_name" />

</form>
</body>
</html> 
```

我的**lookup.php**文件：

```
<?php
//look up the record based on email and get the firstname and lastname
$email=$_GET['$email'];

$con = mysql_connect("localhost", "root", "");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("json", $con); //DB name= json

 mysql_select_db("json"); //DB name= json

  $result = mysql_query("SELECT * FROM json1 
     WHERE email LIKE '$email%'");      //DB table name=json1
if (mysql_num_rows($result) == 1) {
        while ($myrow = mysql_fetch_array($result)) {
//build the JSON array for return
$json = array(array('field' => 'first_name', 
                    'value' => $firstName), 
              array('field' => 'last_name', 
                    'value' => $last_name));
echo json_encode($json );
        }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:19:39.943

尝试使用一些 php MVC 框架，例如 Codeigniter、cakephp、yii。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:21:51.833

要在不重新加载页面的情况下填写表单，您将不得不使用 Ajax 从服务器（数据库）请求数据，然后使用 javascript 填写，我建议阅读有关使用 jquery 的 ajax 函数的信息。

例如，如果您想填写 id 并单击按钮，页面将重新加载数据，请使用 php post 方法，一个简单的示例：

```
<?php
    if($_POST['getdata']){
        $id = $_POST['itemID'];
        /*
        connect to the database and get the data here and return in with an array called $data for example
        */
    }
    if($_POST['savedata']){
        /*
        use this if you want to do another action to the form, update the values for example
        */
    }
?>
<form action='' method='POST'>
    <input name="id" value="<?php echo $data['id'];?>" type="text" />
    <input name="name" value="<?php echo $data['name'];?>" type="text" />
    <input name="contact" value="<?php echo $data['contact'];?>" type="text" />
    <input name="getdata" value="Get Data" type="submit" />
    <input name="savedata" value="Save Data" type="submit" />
</form> 
```

更新：

关于你的更新

首先，您最好使用 PDO 或 MySQLi 数据库而不是 MySQL 函数，因为不再维护 mysql_* ，因为您对 php 不熟悉，而是改为学习 PDO。

对于您的代码，如果您希望数据库选择语句中有一行，则不应使用`while()`它，因为它用于循环遍历具有多行的 mysql 对象。

如果我们假设您的表已将`email, firstname, lastname`其直接提取到数组中：

```
$myrow = mysql_fetch_assoc($result); 
```

然后将该数组转换为json并打印出来

```
echo json_encode($myrow);
exit(); 
```

# mysql - 涉及同一个表的多个连接产生“列不存在”错误 - MySQL

> ID：13324719
> 
> 赞同：2
> 
> 时间：2012-11-10T18:12:43.063
> 
> 标签：mysql, sql, join

我是新加入的，我相信这非常简单。
如果我删除查询中的一个联接，则查询的其余部分将起作用，无论我删除哪个联接。但如图所示，它给出了错误说该列不存在。任何指针？

```
select 

loc_carr.address1 as carr_addr1,

loc_cust.address1 as cust_addr1

from db_name.carrier, db_name.customer

join db_name.location as loc_carr on vats.carrier.location_id=loc_carr.location_id

join db_name.location as loc_cust on vats.customer.location_id=loc_cust.location_id 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:49:23.987

我猜测有一个名为类似的列`carrier_id`可用于连接`carrier`和`customer`表。鉴于这个假设，试试这个：

```
select 
     loc_carr.address1 as carr_addr1
   , loc_cust.address1 as cust_addr1

from vats.carrier  as a

join vats.customer as b
  on b.carrier_id=a.carrier_id

join vats.location as loc_carr 
  on loc_carr.location_id=a.location_id

join vats.location as loc_cust 
  on loc_cust.location_id=b.location_id 
```

请注意对表引用使用别名以使事情更容易阅读。另请注意我如何使用显式 SQL 连接语法（而不是列出用逗号分隔的表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T22:10:52.007

@Bob Duell 可以解决您的问题。为了更好地理解为什么会产生这个错误，请注意在子句中，您使用显式语法和隐式连接使用逗号`FROM`“连接”表：（几乎）相当于 a 。然而 of 的优先级强于逗号运算符。因此，该部分解析如下：`JOIN``,``CROSS JOIN``JOIN``,`

```
FROM 
  ( db_name.carrier )
  , 
  (   ( db_name.customer
      JOIN db_name.location AS loc_carr 
          ON carrier.location_id = loc_carr.location_id      -- this line
      )                                                      -- gives the error
    JOIN join db_name.location AS loc_cust 
        ON customer.location_id = loc_cust.location_id
  ) 
```

在上面提到的行中，`vats.carrier.location_id`抛出错误，因为该范围内没有`carrier`表（在该括号内）。

# c# - Telerik CellFormatting 列颜色不起作用

> ID：13324721
> 
> 赞同：1
> 
> 时间：2012-11-10T18:13:05.190
> 
> 标签：c#, telerik, telerik-grid, radgrid, cell-formatting

我想更改 RadGrid Telerik 中列的颜色。我想给 to 一个颜色`col index 2,3`和不同的颜色 to `col Index 0,1`。

col 2,3 的颜色有效，但`Col index 0,1 is not working,`索引中没有颜色`Col index 0 & 1`

这是代码：

```
bool dontRunHandler;
private void datagridview_CellFormatting(object sender, CellFormattingEventArgs e)
{

    e.CellElement.ResetValue(LightVisualElement.DrawFillProperty, ValueResetFlags.Local);
    e.CellElement.ResetValue(LightVisualElement.NumberOfColorsProperty, ValueResetFlags.Local);
    e.CellElement.ResetValue(LightVisualElement.GradientStyleProperty, ValueResetFlags.Local);
    e.CellElement.ResetValue(LightVisualElement.BackColorProperty, ValueResetFlags.Local);

    if (dontRunHandler == false)
    {
        if (e.CellElement.ColumnIndex != 2 && e.CellElement.ColumnIndex != 3 ) return;
        e.CellElement.DrawFill = true;
        e.CellElement.NumberOfColors = 1;
        e.CellElement.BackColor = Color.LightSlateGray;
        e.CellElement.GradientStyle = GradientStyles.Linear;

    }

    else
    {
        if (e.CellElement.ColumnIndex != 0 && e.CellElement.ColumnIndex != 1 ) return;
        e.CellElement.DrawFill = true;
        e.CellElement.NumberOfColors = 1;
        e.CellElement.BackColor = Color.MediumVioletRed;
        e.CellElement.GradientStyle = GradientStyles.Linear;
    }

} 
```

![在此处输入图像描述](../Images/23b3c566f0eb9fff45c6f2948af03a7f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:25:22.580

您的代码显示它只会运行两个条件中的一个。
如果`dontRunHandler =false`它会为单元格 2 和 3 着色。
如果`dontRunHandler =true`它会为单元格 0 和 1 着色。
尝试删除 if else，看看它是否解决了问题。

现在发生这种情况是因为第一个 if 语句返回是因为它认为您的列不是 0 或 1。

我对您的建议是改用[ColunnCreated](http://www.telerik.com/help/aspnet-ajax/grid-oncolumncreated.html)事件。假设更快，更语义化。

```
 protected void RadGrid1_ColumnCreated(object sender, GridColumnCreatedEventArgs e)
    {
        if (e.Column.IsBoundToFieldName("ProductID"))
        {
            e.Column.ItemStyle.CssClass = "MyClass1";
        }
        else if (e.Column.IsBoundToFieldName("ProductName"))
        {
            e.Column.ItemStyle.CssClass = "MyClass2";
        }
    }

...
    <style type="text/css">
        .MyClass1
        {
            color: Red;
        }

         .MyClass2
        {
            color: Blue;
        }
    </style> 
```

你认为这对你有用吗？或者您出于某种原因专门使用索引？

如果你想让你的例子起作用，我会做这样的事情：

```
 e.CellElement.ResetValue(LightVisualElement.DrawFillProperty, ValueResetFlags.Local);
        e.CellElement.ResetValue(LightVisualElement.NumberOfColorsProperty, ValueResetFlags.Local);
        e.CellElement.ResetValue(LightVisualElement.GradientStyleProperty, ValueResetFlags.Local);
        e.CellElement.ResetValue(LightVisualElement.BackColorProperty, ValueResetFlags.Local);

        if (e.CellElement.ColumnIndex == 2 || e.CellElement.ColumnIndex == 3)
        {
            e.CellElement.DrawFill = true;
            e.CellElement.NumberOfColors = 1;
            e.CellElement.BackColor = Color.LightSlateGray;
            e.CellElement.GradientStyle = GradientStyles.Linear;
        }

        else if (e.CellElement.ColumnIndex == 0 || e.CellElement.ColumnIndex == 1)
        {
            e.CellElement.DrawFill = true;
            e.CellElement.NumberOfColors = 1;
            e.CellElement.BackColor = Color.MediumVioletRed;
            e.CellElement.GradientStyle = GradientStyles.Linear;
        } 
```

# eclipse - 调试 Eclipse 插件

> ID：13324722
> 
> 赞同：13
> 
> 时间：2012-11-10T18:13:20.580
> 
> 标签：eclipse, debugging, eclipse-plugin

这是我第一次尝试创建 Eclipse 插件。我已经创建了一个，以及一个功能和更新站点。我将目标平台设置为我的本地 Eclipse 安装。当我从开发环境中运行/调试插件时，一切正常。

现在，我的同事从我托管的更新站点安装了插件。当他开始使用我的插件公开的任何功能时，他会遇到运行时异常。

1.  他看到了当我从开发环境运行插件项目时没有发生的空指针异常。
2.  我有一个向导，它是我插件的一部分。当他关闭它时，他得到一个*“未处理的事件循环异常”*，并且向导没有关闭。我在开发环境中运行/调试插件时没有这个问题。

现在我很困惑为什么同一个插件在生产环境中表现不同，而不是在开发环境中以及当我从我的 IDE 调试它时。两种情况下的目标平台都是相同的 Eclipse 版本。可能是什么原因？

以及如何在生产环境中调试插件？是否有远程调试生产环境插件的能力？任何建议都会非常有用！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-11T10:41:30.540

要远程调试您的插件，首先将调试参数添加到您的目标 Eclipse .ini 文件

```
-vmargs
-Xdebug
-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1044 
```

在启动它之前。

然后打开另一个 Eclipse 实例，其工作空间包含您的插件项目。打开*Run* > *Debug Configurations...*，选择*Remote Java Application*并创建一个新配置。

作为*Project*，浏览并选择您的插件项目。还要填写您的连接属性（目标 Eclipse 的*主机*和*端口*1044）。

启动新创建的调试配置允许您以与本地调试相同的方式调试插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T12:33:10.910

> 现在我很困惑为什么同一个插件在生产环境中表现不同，而不是在开发环境中以及当我从我的 IDE 调试它时。两种情况下的目标平台都是相同的 eclipse 版本。可能是什么原因？

这是一个经典：Eclipse 插件和 RCP 应用程序在 PDT（Eclipse IDE）和导出产品之间的行为确实不同。

在您的情况下，从导出版本但不是从 Eclipse 抛出的 NullPointerException 是由您的代码加载但未在您的 build.properties 中列出的图像或其他资源文件（属性等）的 10 次中的 9 次插入。

无论如何，您需要检查日志以检索堆栈跟踪并找出其原因。此类日志可以在您朋友的工作区中的 le`.metadata/.log`文件下找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:18:42.947

从您现在的开发工作区中，使用“Debug As -> Eclipse Application”菜单项来启动一个测试工作区。当它启动时，您将运行两个工作区：原始开发工作区和新的测试工作区。您可以在开发工作区的插件代码中设置断点，并在测试工作区运行您的插件。

当您在测试工作区中的插件执行到达您的断点之一时，执行将暂停，您可以使用开发工作区中的调试视图查看变量、设置更多断点或您想要执行的任何其他操作来调试插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-09T13:06:13.870

请参阅[使用 Eclipse 进行开发的 Apache Wiki](https://wiki.apache.org/tomcat/FAQ/Developing#rd-eclipse)。

在 Windows 10 下，Tomcat 作为 Windows 服务运行，我启动了：

`tomcat8.5\bin\Tomcat8w.exe`

& 添加到**Java**选项卡中作为 Java 选项中的**第****一个**条目以启用远程调试：

 **`-agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n`**

# performance - 使用 Haskell 有效地将 [Integer] 转换为 [Float]

> ID：13324739
> 
> 赞同：1
> 
> 时间：2012-11-10T18:15:38.363
> 
> 标签：performance, haskell, type-conversion

这是我正在阅读的文本文件中的条目的简化示例——

```
Set1 1 2 3
Set2 6 7 8 
```

我正在尝试编写一个可以将上述字符串转换为元组列表的函数——

```
[("Set1", [1.0, 2.0, 3.0]), ("Set2", [6.0, 7.0, 8.0])] 
```

这是我写的函数——

```
parse_input :: String -> [(String, [Float])]
parse_input x = [ (head y, int2float (tail y)) | y <- splitinput ]
    where
        int2float x = [ read a::Float | a <- x ]
        splitinput = [ words a | a <- lines x ] 
```

这段代码最困扰我的是 int2float 部分。它梳理整数列表，并将每个整数逐一转换为浮点数。

有没有更有效的方法将整数列表转换为浮点数列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:19:59.310

对于这种情况，我不清楚您所说的“有效方式”是什么意思？

您要做的是转换`[String]`为`[Float]`. 我认为使用`read`会做得很好。如果你真的有`[Int]`那么你可以`fromIntegral`用来获取任何`Num`类型的实例。只是指出您应该更喜欢`map`而不是列表理解，因为它更具可读性。

# sql - SQL：让 SQL “计数”在数据库中执行的一些操作

> ID：13324749
> 
> 赞同：0
> 
> 时间：2012-11-10T18:16:32.127
> 
> 标签：sql

我想执行一个查询，我可以让 SQL “统计”执行的一些操作。在这种情况下，我有一个 EmpNo，它将链接到一个与多个订单相关联的 AcctNo。

有什么方法可以解决这个问题？

对不起，关于那个，我一直在想这个，老实说不知道如何设置它。但就目前而言

```
SELECT EmpNo, LastName, CustomerOrder.OrderNo AS 'Orders Handled"
FROM Employee
INNER JOIN Customer
      ON Employee.EmpNo = Customer.AcctRepNo
ORDER BY LastName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:34:02.817

您可以使用 COUNT() 和 GROUP BY 执行这种查询：

```
 SELECT EmpNo, LastName, COUNT(OrderNo) AS OrdersHandled
 FROM Employee INNER JOIN Customer ON Employee.EmpNo = Customer.AcctRepNo
 INNER JOIN Orders ON Orders.CustNo = Customer.CustNo
 GROUP BY EmpNo, LastName 
```

如果两者都有列`Customer`，您可能需要限定 SELECT 中的列名。`Employee``LastName`

# class - 使用原型添加或删除类

> ID：13324755
> 
> 赞同：3
> 
> 时间：2012-11-10T18:16:51.850
> 
> 标签：class, magento, prototypejs, prototype, removeclass

无法计算用于添加或删除基于单击功能的 css 类名称“选择”到 img 元素的 PROTOTYPE 脚本（已经为 Jquery 完成......），但它必须在 Prototype 中。它让我发疯。不能使它适用于原型......

我的原始代码是（Magento 商店）

```
<div class="block block-poll">
    <div class="block-title">
        <strong><span><?php echo $this->__('Community Poll') ?></span></strong>
    </div>
    <form id="pollForm" action="<?php echo $action ?>" method="post" onsubmit="return validatePollAnswerIsSelected();">
        <div class="block-content">
            <p class="block-subtitle"><?php echo $this->htmlEscape($poll->getPollTitle()); ?></p>
            <?php if( $poll_answers ): ?>
            <ul id="poll-answers">
                <?php foreach( $poll_answers as $answer ): ?>
                <li>
                    <input type="radio" name="vote" style ="display:none;" class="radio poll_vote" id="vote_<?php echo $answer->getId() ?>" value="<?php echo $answer->getAnswerId() ?>" />
                    <?php
                    $stripped = $answer->getAnswerTitle();
                    $stripped_final = str_replace(" ", "_", strtolower($stripped)); //Value (simplified)
                     ?>
                    <span class="label"><label for="vote_<?php echo $answer->getId() ?>"><img src="http://www.passione.pt/media/poll/<?php echo $stripped_final; ?>.png" id="chooser" class="chooser" alt="<?php echo $this->htmlEscape($answer->getAnswerTitle()) ?>" onClick="document.getElementById('vote_<?php echo $answer->getId() ?>').checked =true;"/></label></span>         
                </li>
                <?php endforeach; ?>
            </ul>
            <script type="text/javascript">decorateList('poll-answers');</script>
            <?php endif; ?>
            <div class="actions">
                <button type="submit" title="<?php echo $this->__('Vote') ?>" class="button"><span><span><?php echo $this->__('Vote') ?></span></span></button>
            </div>
        </div>
    </form>
</div>
<?php endif; ?> 
```

对于jQuery。

你能转换成 Prototype 1.7...吗？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript"> 
    var Chooser = $('#poll-answers img');
    Chooser.click(function() {
        $('.chooser').removeClass('selected');
        if(!Chooser.hasClass('selected')) {
            $(this).addClass('selected');        
        } else {
            $(this).removeClass('selected');
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T00:12:43.260

该点击处理程序的原型版本（未经测试）：

```
$('poll-answers').on('click', 'img', function(event, element) {
    $$('.chooser').invoke('removeClassName', 'selected');
    element.toggleClassName('selected');
}); 
```

编辑：`toggleClassName`根据@Victor 的建议更改为。为他 +7 分，`each`感谢`invoke`@Geek Num。他+7分，我剩下1分。

# svn - 我可以从本地签出恢复已删除的 Svn 存储库吗？

> ID：13324762
> 
> 赞同：4
> 
> 时间：2012-11-10T18:17:44.413
> 
> 标签：svn, restore

我不小心删除了服务器上的主存储库。这是个人服务器，因此不会影响其他任何人。我在我的桌面上对文件进行了本地签出（通过 svn co）。我想知道是否可以从本地签出重建 Svn 服务器存储库？

我不是一个专业的 Svn 用户，所以我真的不太了解 svn 的细节，但我知道与 Git 不同，Svn 的服务器 repo 与本地签出不同。所以它不像复制回来那么容易，至少我自己是这么认为的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:26:43.060

您可以做的最好的事情是设置一个新的 repo，删除工作副本中的 .svn 目录，然后将文件导入新的 repo。然后，您需要转到任何现有的工作副本并将它们切换到新的存储库。你可能需要做一个开关--relocate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-02T11:20:16.960

首先：没有 SVN-Repo 的备份是一种痛苦，不应该发生。但同样的事情发生在我身上。我开始再次添加数千个文件，一个文件一个文件，因为我不想签入临时文件或其他无源文件。

几乎所有的历史都消失了。但**不会丢失最后的签入状态**！我设法获得了最后一个签入状态，所以新的 repo 与旧的类似，我也得到了最后一个差异！

这是我的乌龟食谱：

1.  备份您的本地结帐
2.  清理您的本地结帐。
3.  1.  取消选中：清理工作副本状态

        查看：

    2.  删除未版本化
    3.  删除忽略
    4.  全部还原
4.  创建新的回购
5.  将新仓库签出到新的空文件夹中
6.  将旧的清理副本复制到新文件夹中
7.  简单地添加所有文件
8.  提交它
9.  使用 1 中的备份覆盖您的新结帐文件夹。

现在你已经像以前一样拥有了所有文件，最后一个差异和只有文件版本，就像以前一样。

# c# - WPF中的动画圆弧段

> ID：13324765
> 
> 赞同：1
> 
> 时间：2012-11-10T18:17:59.203
> 
> 标签：c#, wpf, animation, wpf-animation

我们如何在 WPF 中为圆弧段设置动画。下面是附上的代码。

```
PathGeometry pg = new PathGeometry();
PathFigure pf = new PathFigure();
LineSegment ls1 = new LineSegment();
LineSegment ls2 = new LineSegment();
ArcSegment arc = new ArcSegment();
double xc = canvas.Width / 2 - 50 + dx;
double yc = canvas.Height / 2 + dy;
double r = 0.7 * xc;   // To control the Explosion generally for all the slices 
pf.IsClosed = true;
pf.StartPoint = new Point(xc, yc);
pf.Segments.Add(ls1);
pf.Segments.Add(arc);
pf.Segments.Add(ls2);
pg.Figures.Add(pf);
path.Data = pg;
arc.IsLargeArc = isLargArc;

ls1.Point = new Point(xc + r * Math.Cos(startAngle), yc + r * Math.Sin(startAngle));
arc.SweepDirection = SweepDirection.Clockwise;

arc.Point = new Point(xc + r * Math.Cos(endAngle), yc + r * Math.Sin(endAngle));
arc.Size = new Size(r, r);
ls2.Point = new Point(xc + r * Math.Cos(endAngle), yc + r * Math.Sin(endAngle));

Duration duration = new Duration(TimeSpan.FromSeconds(5));

pau = new PointAnimationUsingPath();
pau.PathGeometry = pg;
pau.FillBehavior = FillBehavior.Stop;
pau.Duration = new Duration(TimeSpan.FromSeconds(5)); 
```

![附上示例图像](../Images/6661ff07fc437e973f7c3aa9773a969c.png)

我试图让圆弧段从一个位置到另一个位置进行动画处理。有一个弧段列表，它们一个接一个地动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:21:59.730

您可以使用`Storyboard`类来制作动画。例如，您可以为位置设置动画，`RenderTransform`它应该可以工作

# python - 代码在 Python shell 中有效，但在命令提示符下无效

> ID：13324766
> 
> 赞同：0
> 
> 时间：2012-11-10T18:18:02.680
> 
> 标签：python, linux, shell, operating-system, cmd

我是 python 新手，这是我的第一个真正的程序。继承人的代码：

```
def home():
    print ('game....play-1..options-2..rules-3..exit-4..')
    answer = input()
    print(repr(answer))
    if answer == '1':
        play()
    elif answer == '2':
        options()
    elif answer == '3':
        rules()
    elif answer == '4':
        end()

def rules():
    print ('rules...main menu-1...exit-2..')
    answerRules = input ()
    print(repr(answerRules))    
    if answerRules == '1':
        home()
    elif answerRules == '2':
        end()

home() 
```

我在这里遇到的主要问题是它在 python shell 中可以正常工作，但不能在命令提示符下工作。但是，在命令提示符`home()`下，一旦您输入答案，例如 3\. 程序就结束了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:22:52.043

答案是类型`int`

所以检查`if answer == 1:`
它会解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:22:41.753

当您从命令提示符运行它时，您应该检查 input() 是否返回回车符或其他字符。

# java - 运行 helloworld sphinx 时出错

> ID：13324767
> 
> 赞同：1
> 
> 时间：2012-11-10T18:18:04.897
> 
> 标签：java, exception, voice-recognition, sphinx4

嗨，我正在用 java 制作一个软件，我想在其中开发一个语音软件......我在 java 中运行“Hello”sphinx 代码：

```
import edu.cmu.sphinx.frontend.util.Microphone; 
import edu.cmu.sphinx.recognizer.Recognizer; 
import edu.cmu.sphinx.result.Result; 
import edu.cmu.sphinx.util.props.ConfigurationManager;

public class HelloWorld {

public static void main(String[] args) {
    ConfigurationManager cm;

    if (args.length > 0) {
        cm = new ConfigurationManager(args[0]);
    } else {
        cm = new ConfigurationManager(HelloWorld.class.getResource("helloworld.config.xml"));
    }

    Recognizer recognizer = (Recognizer) cm.lookup("recognizer");
    recognizer.allocate();

    // start the microphone or exit if the programm if this is not possible
    Microphone microphone = (Microphone) cm.lookup("microphone");
    if (!microphone.startRecording()) {
        System.out.println("Cannot start microphone.");
        recognizer.deallocate();
        System.exit(1);
    }

    System.out.println("Say: (Good morning | Hello) ( Bhiksha | Evandro | Paul | Philip | Rita | Will )");

    // loop the recognition until the programm exits.
    while (true) {
        System.out.println("Start speaking. Press Ctrl-C to quit.\n");

        Result result = recognizer.recognize();

        if (result != null) {
            String resultText = result.getBestFinalResultNoFiller();
            System.out.println("You said: " + resultText + '\n');
        } else {
            System.out.println("I can't hear what you said.\n");
        }
    }
}

} 
```

我收到了这个错误...

```
Exception in thread "main" java.lang.NullPointerException at 
edu.cmu.sphinx.util.props.SaxLoader.load(SaxLoader.java:74) at 
edu.cmu.sphinx.util.props.ConfigurationManager.(ConfigurationManager.java:58) at 
HelloWorld.main(HelloWorld.java:22) 
```

我已将 HelloWord.jar 文件添加到我的项目中，但我仍然得到相同的结果！请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:21:55.960

getResource("helloworld.config.xml") 指向空值。检查 url 指向的文件是否配置正确。确保它在您的类路径中。

# 3d - 投影几何：如何将 3D 中的矩形投影转换为 2D 视图

> ID：13324768
> 
> 赞同：0
> 
> 时间：2012-11-10T18:18:12.197
> 
> 标签：3d, geometry, 2d, projection, projective-geometry

所以问题是我有一个矩形的 3D 投影，我想把它变成 2D。那就是我有一张放在桌子上的纸的照片，我想将其转换为该纸的 2D 视图。所以我需要的是通过还原所有 3D/投影变换并从顶部获得一张平面视图来获得一个不失真的 2D 图像。我碰巧找到了关于这个主题的一些方向，但他们没有建议立即说明如何实现这一点。获得有关需要做什么的分步说明会非常有帮助。或者，或者，链接到将其分解为小细节的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T10:43:02.457

您需要更多信息才能做到这一点。例如纸张的大小。假设你有它。

您需要了解的内容称为“单应性”。这基本上是以下情况：

你有相同的平面（你的纸），你从两个不同的相机拍了一张照片（比如说一个是你拥有的实际图像，另一个是你想要获得的那个 - 一个带有相机的正好在纸的上方）。

存在从一个图像的 2D 空间到另一个图像的 2D 空间的转换（单应性），您的目标是找到它。找到它后，只需将其应用于图像即可获得顶视图。

为了找到您需要（至少）4 个点的单应矩阵，您在两张图像中都知道其坐标。

这些点的一个明显选择当然是纸张的顶点。在您拥有的图像中，您可以手动找到它们。在目标图像中，您可以选择那些使工作表居中的图像 (0,0)，知道它的尺寸。

网上有很多关于单应矩阵的信息4点。 [这](http://cseweb.ucsd.edu/classes/sp04/cse252b/notes/lec04/lec4.pdf)只是我遇到的第一个，所以那里一定有更好的来源:)

请注意，这些计算通常是在 2D 投影空间中完成的，因为这是一个投影变换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-03T02:58:16.387

如果您对纸的形状一无所知，Petar 的答案将是正确的——如果纸可以是任意的四边形。但是由于纸张是*矩形*，这将问题限制在足以确定单应性的程度，而无需知道矩形的纵横比。

[请参阅Microsoft Research 的“Whiteboard It！”的](http://research.microsoft.com/en-us/um/people/zhang/WhiteboardIt/WhiteboardIt.pdf)第 4 节。有关如何执行此操作的详细信息[。](http://research.microsoft.com/en-us/um/people/zhang/WhiteboardIt/WhiteboardIt.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-16T21:36:56.317

如果您对顶点进行正确的 3D --> 2D 变换，它应该可以正常工作。出发点是研究达芬奇的3D点模型-->2D点射影几何。

# android - Android onMeasure() 测量宽度但不测量高度

> ID：13324772
> 
> 赞同：1
> 
> 时间：2012-11-10T18:18:47.390
> 
> 标签：android, view, size, measure

我有一个 SurfaceView，我需要知道它的宽度和高度，代码如下所示：

```
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    screenWidth = MeasureSpec.getSize(widthMeasureSpec);
    screenHeight = MeasureSpec.getSize(heightMeasureSpec);
} 
```

出于某种原因，它设法测量了这个视图的宽度而不是它的高度，我尝试将高度测量放在宽度之前，看看它是否只是没有足够快地调用 onMeasure() 方法，但它没有工作。

编辑：

继承人所有代码：

```
public class GameView extends SurfaceView {
GameLoopThread gameLoopThread;
Integer screenWidth, screenHeight;
static Integer score;
long lastTime = 0;
byte speed = 5;

static Boolean mute;
static String textureUsed = "space";

public GameView(Context context) {
    super(context);
    mute = MainMenu.getMute();
    score = 0;
    gameLoopThread = new GameLoopThread(this);
    SurfaceHolder holder = getHolder();
    holder.addCallback(new Callback() {

        public void surfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {
        }

        public void surfaceCreated(SurfaceHolder holder) {
            gameLoopThread.setRunning(true);
            gameLoopThread.start();
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            boolean retry = true;
            gameLoopThread.setRunning(false);
            while (retry) {
                try {
                    gameLoopThread.join();
                    retry = false;
                } catch (InterruptedException e) {
                }
            }
        }
    });
}

// graphics are drawn here
@Override
protected void onDraw(Canvas canvas) {
    //covers the whole canvas in white to clear previouslly draw graphics
    canvas.drawColor(Color.WHITE);
    //set the location of the players selected texture pack
    int resID = getResources().getIdentifier(textureUsed, "drawable", "com.unreturnablestudios.FlipSide");
    //loads this texture pack
    Bitmap graphics = BitmapFactory.decodeResource(getResources(), resID);

    //src and dst are used to detarmine which parts of the image are
    //going to be used and where abouts on the screen they are going
    //to be displayed
    Rect src = new Rect(0, 0, 640, 480);
    Rect dst = new Rect(0, 0, screenWidth, screenHeight);
    canvas.drawBitmap(graphics, src, dst, null);

    // sets the style of the text up
    String scoreString = Integer.toString(score);
    Paint paint = new Paint();
    paint.setColor(Color.RED);//red font
    paint.setTypeface(Typeface.DEFAULT);//Uses the players default font
    paint.setTextSize(screenWidth / 10);//font size
    //draws the text
    canvas.drawText(scoreString,0, 0, paint);
    score -= speed;
}

// deals with user touching the screen
@Override
public boolean onTouchEvent(MotionEvent event) {
    double X = event.getX();

    long currentTime = System.currentTimeMillis();

    if (currentTime > lastTime + 100) {
        if (X < (screenWidth / 2) && X != 0) {

        } else {

        }
    }
    lastTime = System.currentTimeMillis();
    return super.onTouchEvent(event);
}

public void launchEnd() {
    Context context = getContext();
    Intent openEnd = new Intent("com.unreturnablestudios.FlipSide.END");
    context.startActivity(openEnd);
    gameLoopThread.setRunning(false);
}

public static Integer getScore() {
    // called by the End class and returns the score.
    return score;
}

public static boolean getMute() {
    // called by the End class and returns the boolean that is in control of
    // sound
    return mute;
}

// gets the measurements of the screen (width and height)
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    screenWidth = MeasureSpec.getSize(widthMeasureSpec);
    screenHeight = MeasureSpec.getSize(heightMeasureSpec);
}
} 
```

奇怪的是我之前在这个应用程序的早期版本中使用过 onMeasure() 并且它运行良好，但我决定更改大部分代码以尝试使其运行得更快，但现在它无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T20:00:41.267

OnMeasure 经常被布局过程调用多次，你检查过它没有被多次调用吗？

通常我所看到的是，对于某些布局，它被称为第一次测量视图的宽度，然后一旦所有的视图宽度都被锁定，它被称为第二次测量高度。

# authentication - 什么方法应该适合simle客户端/服务器应用程序中的用户身份验证

> ID：13324773
> 
> 赞同：0
> 
> 时间：2012-11-10T18:18:47.390
> 
> 标签：authentication, networking, client-server

我之前的问题已经结束，所以我会更具体。
我需要创建一个应用程序，一个用 C# 编写的桌面应用程序，它将要求用户提供凭据，并在验证后打开允许使用 DB 的 GUI（用户黑匣子）。它应该在任何地方使用，而不是 LAN 或 SQL 域。我认为我需要执行以下操作：

1.  创建将处理身份验证的客户端和服务器应用程序。那将意味着很多插座的东西..
2.  一旦用户被验证，客户端查询将被发送到数据库（客户端->服务器->数据库）。
3.  服务器需要将数据库数据集发送回客户端。

如您所见，这只是我的猜测，但我不知道它是否太复杂或完全错误。主要的是它必须是桌面应用程序（不是基于 Web 的应用程序）并且可以从任何地方访问。
我对如何设计系统的要点很感兴趣，对此我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T10:40:38.337

您可以使用证书服务器进行身份验证..就像 Apache 的 mod_ssl

# c# - WinForms中具有浮动精度大小的WPF自定义控件

> ID：13324774
> 
> 赞同：0
> 
> 时间：2012-11-10T18:18:57.317
> 
> 标签：c#, wpf, wpf-controls

我想知道是否可以在 wpf 中创建一个类似面板的控件，以及另一个将成为该面板的子级的 wpf 自定义控件，所有这些都在 WinForms 应用程序中。然后，是否可以将自定义控件的大小设置为浮动？我还可以旋转该自定义控件吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:26:17.487

您将需要使用[`System.Windows.Forms.Integration`](http://msdn.microsoft.com/en-us/library/ms604571.aspx)NameSpace，更具体地说是[ElementHost Control](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)，它将允许您在 Winforms 中嵌入 WPF 控件。

* * *

这是更改 WPF 用户控件子用户控件大小和位置的快速简单的演示。我会把动画留给你。

**主 Winform 窗体**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Windows.Forms.Integration;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        ElementHost host;
        WpfControlLibrary1.UserControl1 uc;
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            host = new ElementHost();
            host.Dock = DockStyle.Top;
            uc = new WpfControlLibrary1.UserControl1();
            host.Child = uc;
            this.Controls.Add(host);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            uc.SetChildLocation =  new  System.Windows.Point(uc.SetChildLocation.X + 25.5, uc.SetChildLocation.Y + 10.2);
        }

        private void button2_Click(object sender, EventArgs e)
        {
            uc.SetChildSize = new System.Windows.Size(uc.SetChildSize.Width + .25, uc.SetChildSize.Height + .25);
        }
    }
} 
```

**UserControl1.xaml**

```
<UserControl x:Class="WpfControlLibrary1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" Background="Red" xmlns:my="clr-namespace:WpfControlLibrary1">
    <Canvas>
        <my:UserControl2 HorizontalAlignment="Center"   x:Name="userControl21" VerticalAlignment="Center" Canvas.Left="0" Canvas.Top="0" />

    </Canvas>
</UserControl> 
```

**UserControl1.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfControlLibrary1  
{
    /// <summary>
    /// Interaction logic for UserControl1.xaml
    /// </summary>
    public partial class UserControl1 : UserControl
    {
        public UserControl1()
        {
            InitializeComponent();
        }

        public Point  SetChildLocation
        {
            get
            {
                return new Point(Canvas.GetLeft(userControl21), Canvas.GetTop(userControl21));
            }

            set
            {
                Canvas.SetLeft(userControl21, value.X);
                Canvas.SetTop(userControl21, value.Y);
            }
        }

        public Size SetChildSize
        {
            get
            {
                return new Size(userControl21.ActualWidth, userControl21.ActualHeight);
            }
            set
            {
                userControl21.Width = value.Width;
                userControl21.Height = value.Height;
            }
        }
    }
} 
```

**用户控件2.xaml**

```
<UserControl x:Class="WpfControlLibrary1.UserControl2"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300" SizeChanged="UserControl_SizeChanged">
    <Grid>
        <Rectangle x:Name="rect" Fill="Blue" Height="40" Width="120"></Rectangle>
    </Grid>
</UserControl> 
```

**UserControl2.xaml.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfControlLibrary1
{
    /// <summary>
    /// Interaction logic for UserControl2.xaml
    /// </summary>
    public partial class UserControl2 : UserControl
    {
        public UserControl2()
        {
            InitializeComponent();
        }

        private void UserControl_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            rect.Width = e.NewSize.Width;
            rect.Height = e.NewSize.Height;
        }
    }
} 
```

# c# - Windows Store 应用程序的 NSoup 替代方案

> ID：13324777
> 
> 赞同：2
> 
> 时间：2012-11-10T18:19:36.790
> 
> 标签：c#, .net, windows-8, jsoup, windows-store-apps

是否有 NSoup for Windows Store Apps 的替代品？

我无法发布我的应用程序，因为它未通过认证，原因如下：

发现错误：支持的 API 测试检测到以下错误：

```
API System.ICloneable in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.IO.FileStream in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.UriFormatException in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Collections.Specialized.NameValueCollection in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Collections.Specialized.NameObjectCollectionBase in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Collections.Specialized.NameObjectCollectionBase.KeysCollection in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Web.HttpUtility in SYSTEM.WEB, PUBLICKEYTOKEN=B03F5F7F11D50A3A is not supported for this application type. NSoup.dll calls this API.
API System.String.Format(System.String,System.Object) in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.String.Format(System.String,System.Object,System.Object) in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeFile in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeFtp in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeGopher in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeHttp in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeHttps in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeMailto in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeNetPipe in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeNetTcp in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeNews in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Uri.UriSchemeNntp in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.UriFormatException.#ctor(System.String) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.IO.FileStream.get_Name in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Text.StringBuilder.AppendFormat(System.String,System.Object) in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.String.Compare(System.String,System.String,System.Boolean) in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.WebRequest.GetRequestStream in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.WebRequest.GetResponse in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Text.Encoding.GetString(System.Byte[]) in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.HttpWebRequest.set_AllowAutoRedirect(System.Boolean) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.WebRequest.set_Timeout(System.Int32) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.HttpWebRequest.set_ReadWriteTimeout(System.Int32) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.WebHeaderCollection.Add(System.Net.HttpRequestHeader,System.String) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.HttpWebRequest.set_Referer(System.String) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Net.HttpWebRequest.set_UserAgent(System.String) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Collections.Specialized.NameValueCollection.Add(System.String,System.String) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Collections.Specialized.NameObjectCollectionBase.get_Keys in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Collections.Specialized.NameObjectCollectionBase.KeysCollection.GetEnumerator in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Collections.Specialized.NameValueCollection.get_Item(System.String) in SYSTEM, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls this API.
API System.Web.HttpUtility.UrlEncode(System.String,System.Text.Encoding) in SYSTEM.WEB, PUBLICKEYTOKEN=B03F5F7F11D50A3A is not supported for this application type. NSoup.dll calls this API.
API System.IO.Stream.Close in MSCORLIB, PUBLICKEYTOKEN=B77A5C561934E089 is not supported for this application type. NSoup.dll calls t 
```

他的 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:03:18.000

试试[HTML 敏捷包](http://html-agility-pack.net)。

这是一个可爱的 HTML 解析器，通常为此推荐。它将采用格式错误的 HTML 并将其转换为 XHTML，然后是可遍历的 DOM，例如 XML 类。因此，对于您在野外找到的代码非常有用。

# c# - 我的随机字符串 [] 不起作用？

> ID：13324780
> 
> 赞同：-1
> 
> 时间：2012-11-10T18:19:41.120
> 
> 标签：c#, .net

我试图编写一个随机字符串数组算法，但我得到一个空引用错误..我不知道为什么..

```
public static string[] arrRandomized;
public static string[] ShuffleWords(string[] Words)
{
    Random generator = new Random();
    for (int i=0;i < Words.Length; i++) {
        int pos = generator.Next(Words.Length);
        Console.WriteLine(Words[pos]); // I SEE RANDOM ITEM
        Console.Read(); // NULL REFERENCE ERROR AFTER THIS
        if (Words[pos] != null)
        {
            arrRandomized[i] = Words[pos];
            //remove item at pos so I get no duplicates
            Words[pos] = null;
        }
    } 
```

我不想使用 ArrayList，我有我的理由，但那是题外话我只想知道这怎么不起作用：/ 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:38:53.187

我认为你应该初始化`arrRandomized`：

```
arrRandomized = new string[Words.Length]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:40:22.497

你的 arrRandomized 永远不会被初始化。我还建议您返回一个数组而不是使用静态引用，因为随后对该方法的调用将更改对 arrRandomized 的所有引用。

```
public static string[] ShuffleWords(string[] Words)
{    
    string[] arrRandomized = new string[Words.Length];
    Random generator = new Random();
    for (int i=0;i < Words.Length; i++) 
    {
        int pos = generator.Next(Words.Length);
        Console.WriteLine(Words[pos]); // I SEE RANDOM ITEM
        Console.Read(); // NULL REFERENCE ERROR AFTER THIS
        if (Words[pos] != null)
        {
            arrRandomized[i] = Words[pos];
            //remove item at pos so I get no duplicates
            Words[pos] = null;
        }
    }
    return arrRandomized;
} 
```

# matlab - 一个巨大矩阵的matlab相关矩阵

> ID：13324781
> 
> 赞同：3
> 
> 时间：2012-11-10T18:19:51.557
> 
> 标签：matlab, matrix, correlation

我有一个尺寸为 37,000,000 x 22 的 X 矩阵，我想计算 X 的相关矩阵。

IE，

```
X_corr = corr(X,'type','Spearman'); 
```

我希望 X_corr 的大小为 22 x 22。

但这需要很长时间，对于如此长的矩阵，是否有更快的计算相关矩阵？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T19:04:02.880

受@Bitwise 解决方案的启发，我研究了`corr`. （您可以通过简单地输入来做到这一点`edit corr`。它有一个循环变量对，因为它想要处理 NaN。如果您的数据中没有 NaN，您可以简单地计算 Spearman 的相关性：

```
X = rand(3e6, 22);
R = tiedrank(X); % Elapsed time is 8.956700 seconds.
C = corrcoef(X); % Elapsed time is 0.579448 seconds. 
```

这应该与

```
C2 = corr(X, 'type', 'Spearman'); Elapsed time is 9.501480 seconds. 
```

但是速度差不多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T18:30:43.587

试试 corrcoef()：

```
>> X=rand(1000000,22);
>> tic;corr(X);toc
Elapsed time is 18.320141 seconds.
>> tic;corrcoef(X);toc
Elapsed time is 0.494406 seconds 
```

这也几乎是你想要的（我没有足够的内存用于 37e6x22）：

```
>> X=rand(10000000,22);
>> tic;corrcoef(X);toc
Elapsed time is 7.620509 seconds. 
```

**编辑：**

如果你想要Spearman，你可以转换为rank，然后计算Pearson，这是等价的。排序还不错：

```
>> X=rand(10000000,22);
>> tic;sort(X);toc
Elapsed time is 31.639637 seconds. 
```

# ios - iOS中常用于模糊图像的圆形白色捏手势叠加

> ID：13324782
> 
> 赞同：1
> 
> 时间：2012-11-10T18:19:52.220
> 
> 标签：ios, instagram, gpuimage, uipinchgesturerecognizer

我已经使用捏合手势在我的 iOS 应用程序中实现了模糊图像的功能，但是我想实现一个圆形的白色叠加层，它通常用作捏合手势的参考点，以便用户可以调整模糊量。就像下图一样：

![示例白色捏手势叠加](../Images/82cf02156df370b2fe759b6c905d5e91.png)

上图来自：[https ://media.tumblr.com/tumblr_lutwauVUW31qm4rc3.png](https://media.tumblr.com/tumblr_lutwauVUW31qm4rc3.png)

如何实现此功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:41:56.103

GPUImage lib 中的 GaussianSelectiveBlurFilter 可能对你有很大帮助。好吧，这里是[github 源代码。](https://github.com/BradLarson/GPUImage)

我认为它不难使用，希望你会喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T20:57:51.857

您可以使用 GPUImageVignetteFilter，并将晕影颜色设置为白色。

我猜您正在 GPUImage 中使用 GPUImageGaussianSelectiveBlurFilter 实现模糊（因为我看到您在问题中标记了 GPUImage）。如果是，您会注意到 GPUImageGaussianSelectiveBlurFilter 上的属性并不能完全转换为 GPUImageVignetteFilter，因此您必须做一些数学运算才能转换为新的“坐标”系统，但这相当简单。

# c - OpenSSL 中的预主密钥和主密钥

> ID：13324785
> 
> 赞同：1
> 
> 时间：2012-11-10T18:20:07.173
> 
> 标签：c, ssl, openssl, public-key-exchange

我有以下价值观：

1.  客户端随机字节
2.  服务器随机字节
3.  预主秘密

我不想使用 SSL 、 SSL_CTX 等功能。我想要的是，我只有三个数字，我想从中计算主编号。

如何使用 OpenSSL 在 c 中计算主密钥？RFC 中指定的 PRF 的 OpenSSL C 库中是否有任何函数？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:27:40.780

```
JKJS
    int master_secret(unsigned char *dest,int len,unsigned char *pre_master_secret,int pms_len,unsigned char *label,unsigned char *seed,int seed_len)
    {/*dest :where master secret will be stored
      len   :desired length of master secret
      pre_master_secret :given pre-master secret
      pms_len   :length of given pre-master secret
      label :given label to be fed to PRF
      seed  :given seed to be fed to PRF
      seed_len  :length of given seed

      finally,our function is analogus to RFC-2246 PRF definition:PRF(secret,label,seed)
      where,    secret=pre-master secret
            label=label
            seed=seed
    */
    EVP_MD *md5,*sha;
    md5=EVP_md5();
    sha=EVP_sha();

    int i=0,j,position;

    int half_secret_len=pms_len/2+pms_len%2;

    unsigned char md5_secret[half_secret_len];  //first half of the pre-master secret, analogus to S1 in RFC-2246
    for(i=0;i<pms_len/2+pms_len%2;i++)
      md5_secret[i]=pre_master_secret[i];

    unsigned char sha_secret[half_secret_len];  //second half of the pre-master secret, analogus to S2 in RFC-2246

    for(i=pms_len/2,j=i;i<pms_len;i++)
      sha_secret[i-j]=pre_master_secret[i];

    int iter_md5=len/16+(len%16?1:0);
    int iter_sha=len/20+(len%20?1:0);
    unsigned char h_md5[iter_md5*16];   //output of P_MD5(S1, label + seed) in RFC-2246
    unsigned char h_sha[iter_sha*20];   //output of P_MD5(S1, label + seed) in RFC-2246

    int actual_seed_len=strlen(label)+seed_len;
    unsigned char actual_seed[actual_seed_len];     //label+seed concatenation

    for(i=0;i<strlen(label);i++)
      actual_seed[i]=label[i];
    for(j=i;i<sizeof(actual_seed);i++)
      actual_seed[i]=seed[i-j];

    unsigned char temp_md5[16];     //A(0),A(1),A(2),... in RFC-2246
    unsigned char temp_sha[20];

    HMAC(md5,md5_secret,half_secret_len,actual_seed,actual_seed_len,temp_md5,NULL); //calculating A(0) for md5
    HMAC(sha,sha_secret,half_secret_len,actual_seed,actual_seed_len,temp_sha,NULL); //calculating A(0) for sha

    int temp_md5_seed_len=16+actual_seed_len;
    unsigned char md5_seed[temp_md5_seed_len];  //A(i)+seed to be fed to HMAC function according to RFC-2246
    for(i=16,j=i;i<temp_md5_seed_len;i++)
      md5_seed[i]=actual_seed[i-j];

    //calculating P_MD5()
    for(i=0;i<iter_md5;i++)
    {
        position=i*16;
        for(j=0;j<16;j++)
        md5_seed[j]=temp_md5[j];
        HMAC(md5,md5_secret,half_secret_len,md5_seed,temp_md5_seed_len,temp_md5,NULL);
        for(j=0;j<16;j++)
        h_md5[position+j]=temp_md5[j];
    }

    int temp_sha_seed_len=20+actual_seed_len;
    unsigned char sha_seed[temp_sha_seed_len];  //A(i)+seed to be fed to HMAC function according to RFC-2246
    for(i=20,j=i;i<temp_sha_seed_len;i++)
      sha_seed[i]=actual_seed[i-j];

    //calculating P_SHA()
    for(i=0;i<iter_sha;i++)
    {
        position=i*20;
        for(j=0;j<20;j++)
        sha_seed[j]=temp_sha[j];
        HMAC(sha,sha_secret,half_secret_len,sha_seed,temp_sha_seed_len,temp_sha,NULL);
        for(j=0;j<20;j++)
        h_sha[position+j]=temp_sha[j];
    }

    //PRF()=P_MD5() XOR P_SHA()
    for(i=0;i<len;i++)
      dest[i]=h_md5[i]^h_sha[i];

    return 1;
   } 
```

# c - 扫描数字

> ID：13324793
> 
> 赞同：2
> 
> 时间：2012-11-10T18:21:03.700
> 
> 标签：c, scanf

我是 C 语言的新手，我有一个关于 scanf 的问题，只是针对数字。我需要做的是 scanf 只输入 3 位数字，其他字符或符号应该被评估为垃圾。或者也许我需要使用`isdigit()`，但我不确定它是如何工作的。我只有那个，但我知道它不起作用：

```
scanf("%d, %d, %d", &z, &x, &y); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:47:19.040

您可以读取一个字符串，使用扫描集对其进行过滤并将其转换为整数。

见scanf：[http ://www.cplusplus.com/reference/clibrary/cstdio/sscanf/](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    char num1[256], num2[256], num3[256]; 

    scanf("%s %s %s", num1, num2, num3);
    sscanf(num1, num2, num3, "%[0-9]d %[0-9]d %[0-9]d", num1, num2, num3);

    int n1 = atoi(num1), n2 = atoi(num2), n3 = atoi(num3); // convert the strings to int

    printf("\n%d %d %d\n", n1, n2, n3);

    return 0;
} 
```

样本输入和输出：

```
2332jbjjjh 7ssd 100

2332 7 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:10:19.587

稍微复杂一点的解决方案，但可以防止数组溢出并适用于任何类型的输入。get_numbers_from_input 函数采用将放置读取数字的数组和数组中的最大数字计数，并返回从标准输入读取的数字计数。函数从标准输入中读取字符，直到按下回车键。

```
#include <stdio.h>    
//return number readed from standard input
//numbers are populated into numbers array
int get_numbers_from_input(int numbers[], int maxNumbers) {
    int count = -1;
    char c = 0;
    char digitFound = 0;
    while ((c = getc(stdin)) != '\n') {
        if (c >= '0' && c <= '9') {
            if (!digitFound) {
                if (count == maxNumbers) {
                    break; //prevent overflow!
                }
                numbers[++count] = (c - '0');
                digitFound = 1;
            }
            else {
                numbers[count] = numbers[count] * 10 + (c - '0');
            }
        }
        else if (digitFound) {
            digitFound = 0;
        }
    }

    return count + 1; //because count starts from -1
}

int main(int argc, char* argv[])
{
    int numbers[100]; //max 100 numbers! 

    int numbersCount = get_numbers_from_input(numbers, 100);
    //output all numbers from input
    for (int c = 0; c < numbersCount; ++c) {
        printf("%d ", numbers[c]);
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-07-20T13:34:57.083

试试这个。

如果第一个字符不是数字。使用 "%*[^0-9]" 跳过不是数字的字符。

' * ' 是一个可选的起始星号，表示数据将从流中读取但被忽略（即它不存储在参数指向的位置），而 ' ^ ' 表示任意数量的字符，它们都没有指定为括号之间的字符。

```
#include <stdio.h>

int main()
{
    int x,y,z;
    if(!scanf("%d",&x)==1) scanf("%*[^0-9] %d",&x);
    if(!scanf("%d",&y)==1) scanf("%*[^0-9] %d",&y);
    if(!scanf("%d",&z)==1) scanf("%*[^0-9] %d",&z);
    printf("%d %d %d\n",x,y,z);
   return 0;
} 
```

输入输出

```
fehwih 2738     @$!(#)12[3]
2738 12 3 
```

参考来自：[http ://www.cplusplus.com/reference/cstdio/scanf/](http://www.cplusplus.com/reference/cstdio/scanf/)

# django - 多个应用程序的 Django 模型

> ID：13324799
> 
> 赞同：0
> 
> 时间：2012-11-10T18:22:15.530
> 
> 标签：django, django-models

我正在从 RoR 到 Django，并且正在制作一个包含两个主要部分的站点 - 一个具有“用户”管理，另一个具有“资源”管理。

据我了解，这两个将被定义为单独的应用程序（在 RoR 中将是单独的控制器）。在 Django 中，默认似乎是每个应用程序都有一个单独的模型。

如何为这两个部分使用相同的模型？我必须将它们定义为单独的应用程序，还是可以对两者使用相同的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:44:38.433

你似乎很困惑。

模型是（或多或少）等同于数据库表的类。应用程序是模型、视图和模板的集合。您可以在一个应用程序中拥有多个模型。如果您的代码都是高度相关的，那么它属于一个应用程序。如果您的代码中有多个关注领域，则您可能应该拥有多个应用程序，尽管这不是必需的。

如果您想在另一个应用程序中使用模型，只需导入它。

# shopify - 多语言 Shopify 网站

> ID：13324801
> 
> 赞同：0
> 
> 时间：2012-11-10T18:22:22.550
> 
> 标签：shopify

知道如何运行多语言 Shopify 网站吗？JavaScript hacks 不是解决方案，因为它破坏了 SEO。我无法想象如何通过模板和页面来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T20:53:42.473

我会说：不要复制你的商店。我们做过一次，那是一场噩梦。（您需要有重复的产品、重复的集合、重复的页面、重复的设置……）这一切都取决于您的公司规模以及您可以分配给每个商店的人数。我们使用了翻译应用程序，虽然结帐不可翻译，但它运行良好。

**更新：**（2015 年 2 月）

Shopify 中有 2 个新的本地化应用程序：

a.- [Langify](https://apps.shopify.com/langify)（很好的解决方案，但它真的弄脏了你的液体代码）

b.- [Localize.js](http://localizejs.com/)（出色的解决方案和令人难以置信的干净快速的仪表板，它使用自己的字符串数据库，因此您不使用 Shopify 元字段）

回到你的问题，答案是：

1.  使用 david 选项（为每种语言开设一家商店）。
2.  使用任何 i18 可用的 Shopify 应用。
3.  没有办法使用 Liquid，因为您需要创建一个会话来设置语言，而这只能使用 JavaScript 来完成。

您可以在此处查看具有多种语言（西班牙语+加泰罗尼亚语+英语）的 Shopify 商店示例：[Pienso para perros - Dr. Pet](http://www.drpet.es)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:33:01.963

致电 Shopify。要求在需要的第二家商店进行交易。当然，您可以重复使用您的模板。现在只需编辑您的库存以获得您的第二语言翻译。进口。

您可以在商店中提供语言切换器链接。当然，如果库存盘点很重要，则将一半分配给每个商店。

要运行您的节目，请为两位管理员添加书签，然后您就可以开展业务了。

# php - PHP双重登录

> ID：13324806
> 
> 赞同：1
> 
> 时间：2012-11-10T18:22:53.057
> 
> 标签：php, html, forms, login

我的登录表单有问题。当我输入登录参数并单击提交按钮时，用户名和密码字段变为空白，然后再次单击提交按钮而不提供参数它会登录....所以我们必须单击两次在提交按钮上登录

```
 <?php
     if(isset($_POST['username']) && isset($_POST['password']))
     {
$username = $_POST['username'];
$password = $_POST['password'];

if(!empty($username) && !empty($password))
{
$query = "SELECT id FROM register WHERE username ='$username' AND password='$password'";    
    $query_run = mysql_query($query);
    if($query_run)
    {
        $query_num_rows = mysql_num_rows($query_run);

        if($query_num_rows == 0)
        {
            echo 'Invalid username/password';   
        }
        else if($query_num_rows == 1)
        {
            $user_id = mysql_result($query_run,0,'id');
            $_SESSION['user_id'] = $user_id;
            header('Locaton : index.php');
        }
    }
} 
```

} ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:34:47.760

看来你拼错了 header() 函数

改变`header('Locaton : index.php');`

到`header('Location : index.php');`

# java - GridLayout 列

> ID：13324807
> 
> 赞同：0
> 
> 时间：2012-11-10T18:22:56.833
> 
> 标签：java, swing, layout-manager, grid-layout

我最近决定开始使用 GridLayout，因为 FlowLayout 看起来有点业余。不过，我需要帮助。创建 GridLayout 时的参数是（行、列、行间距、列间距）。我有一个用于行数量的变量和 4 个用于列数量的变量，但是当我尝试在其他所有内容之后添加一个 JButton 时，有 5 列。这是我的代码：

```
byte i = 0;
    while(i < main.componentNum)
    {
        comp[i] = new JLabel("component #" + (i+1));
        box[i] = new JComboBox();
        field[i] = new JTextField(5);
        edit[i] = new JButton("edit");

        comp[i].setBackground(Color.WHITE);
        box[i].setBackground(Color.WHITE);
        field[i].setBackground(Color.WHITE);
        edit[i].setBackground(Color.WHITE);

        add(comp[i]);
        add(box[i]);
        add(field[i]);
        add(edit[i]);

        i++;
    } 
```

当我运行上面的代码时，我得到了四列，它工作正常。但是当我在末尾添加一个按钮时，我得到了五个。谁能告诉我如何给一个按钮一整行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:27:07.930

来自 Java 文档

> rows 和 cols 中的一个（但不是两个）可以为零，这意味着可以将任意数量的对象放置在一行或一列中。

现在，如果没有你的实际代码设置`GridLayout`，很难说，但是，如果你只维护 4 列之后，我会创建一个`GridLayout`如下，`new GridLayout(0, 4)`

如果您想要更灵活的东西，请查看`GridBagLayout`

# pointers - C++：只有使用指针才能进行哪些操作

> ID：13324808
> 
> 赞同：0
> 
> 时间：2012-11-10T18:22:58.727
> 
> 标签：pointers

我试图了解指针的优势。我知道定义以及如何创建一个，但我仍然不明白为什么它们很强大。

*   所以有人可以给我一个你只能用指针做的事情的例子。
*   我听说 Python 没有指针，这是否意味着有些操作无法使用 Python 完成——我的意思是编程方面，而不仅仅是访问特定的内存位置和值？例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:26:35.823

指针主要是一种实现*引用语义*的机制。如果你想引用一个存在于其他地方的现有对象，那么你可以通过传递一个指向该对象的指针来实现。

没有指针，您只能传递对象的*副本*。这将允许您交流*值，*但您不能修改*现有*对象。（当然，除非你的语言提供原生引用处理，就像 C++ 那样。）

作为测试，想象一下您将如何实现以下代码：

```
var a = 10;
var b = 20;

my_magic_swap(a, b);  // how to do this?!

assert(a == 20 && b == 10); 
```

（答案当然是`my_magic_swap`应该接受指向原始变量的*指针*（或等价物）。）

# c - 删除用户输入并释放内存

> ID：13324811
> 
> 赞同：2
> 
> 时间：2012-11-10T18:23:09.867
> 
> 标签：c, memory-management

我有一个电话簿应用程序，过去几天我一直在尝试将 malloc 添加到其中，但是由于我是 C 新手，而且我所拥有的书没有详细介绍我想要的内容，所以我不确定所有的技巧。是否可以在用户输入信息时使用 malloc，然后`free()`在用户选择从电话簿中删除个人时用作删除用户输入的方法？现在无论我是否使用`free()`，在用户删除条目然后尝试检查电话簿后，程序都会崩溃。我假设（但我们知道这意味着什么）它与不正确地释放或不释放内存有关。这是代码。

```
#include <stdio.h> 
#include <string.h>
#include <stdlib.h>
#include <conio.h>
#define BUFFER 50
//Structure for contacts
typedef struct friends_contact{

   char *First_Name;
   char *Last_Name;
   char *home;
   char *cell;
 }fr;
 //Function declarations 
 void menu(fr*friends ,int* counter,int user_entry,int i,char newbuddy[]);
 void setFirst(fr*,int *,int i,char newbuddy[]);
 char getFirst(fr*,int i);
 void setLast(fr*friends, int* counter, int i,char newbuddy[]);
 char getLast(fr*friends , int i);
 void setHome(fr*friends, int* counter, int i,char newbuddy[]);
 char getHome(fr*friends, int i);
 void setCell(fr*friends, int* counter, int i,char newbuddy[]);
 char getCell(fr*friends, int i);
 void add_contact(fr*friends,int* counter,int i,char newbuddy[]);
 void print_contact(fr*friends ,int* counter, int i);
 char delete_contact(fr*friends ,int* counter, int i);
 char show_contact(fr*friends ,int* counter, int i);

 int main() {

   int user_entry=0;
   fr friends[5];
   char newbuddy[BUFFER];
   int counter=0;
   int i=0;

   menu(friends, &counter,user_entry,i,newbuddy);

   getch();
   return 0;
  }
  //Menu function
  void menu(fr*friends,int* counter,int user_entry, int i,char newbuddy[]) {

  do{
     int result;

     printf("\nPhone Book Application\n");
     printf("1) Add friend\n2) Delete friend\n3) Show a friend\n4) Show phonebook\n5)Exit\n");   
     scanf("%d", &user_entry);

     if(user_entry==1)
       {
       add_contact(friends,counter,i,newbuddy);
       }
     if(user_entry==2)
       {
       delete_contact(friends ,counter,i);
       } 
     if(user_entry==3)
       {
       result=show_contact(friends ,counter,i);
           if(result==0){
                  printf("\nName not Found\n");
                  }else{
                        result;
                        }

       }                  
    if(user_entry==4)
      {
      print_contact(friends, counter,i);
      } 
   }while(user_entry!=5);                 
  }
 //Start of Set functions. Each entry has its own set function that gathers the data
void setFirst(fr*friends, int* counter, int i,char newbuddy[]) {

   printf("Enter a first name \n");

   scanf("%s",newbuddy);

   friends[*counter].First_Name=malloc(BUFFER*strlen(newbuddy));

   strcpy(friends[*counter].First_Name, newbuddy);

}

void setLast(fr*friends, int* counter, int i,char newbuddy[]) {

   printf("Enter a last name \n");
   scanf("%s",newbuddy);

   friends[*counter].Last_Name=malloc(BUFFER*strlen(newbuddy));

   strcpy(friends[*counter].Last_Name, newbuddy);
}
void setHome(fr*friends, int* counter, int i,char newbuddy[]) {

   printf("Enter a home number \n");
   scanf("%s",newbuddy);

   friends[*counter].home=malloc(BUFFER*strlen(newbuddy));

   strcpy(friends[*counter].home, newbuddy);
}
void setCell(fr*friends, int* counter, int i,char newbuddy[]) {

   printf("Enter a cell number \n");
   scanf("%s",newbuddy);

   friends[*counter].cell=malloc(BUFFER*strlen(newbuddy));

   strcpy(friends[*counter].cell, newbuddy);
}
//Start of Get functions. Each function sends the data to the executing function.
char getFirst(fr*friends , int pos) {

   printf("%s ", friends[pos].First_Name);
   return *friends[pos].First_Name;
 }

 char getLast(fr*friends , int pos) {

   printf("%s\n", friends[pos].Last_Name);
   return *friends[pos].Last_Name;

 }

 char getHome(fr*friends , int pos) {

   printf("(Home) ""%s\n", friends[pos].home);
   return *friends[pos].home;
 }

 char getCell(fr*friends , int pos) {

   printf("(Cell) ""%s\n", friends[pos].cell);
   return *friends[pos].cell;
 }
 //This function allows for the all the set functions to be added.
 void add_contact(fr*friends,int* counter,int i,char newbuddy[]) {

   setFirst(friends,counter,i,newbuddy); 
   setLast(friends,counter,i,newbuddy);
   setHome(friends,counter,i,newbuddy);
   setCell(friends,counter,i,newbuddy);
   (*counter)++;
}

//This is used to delete a name out of the book.
char delete_contact(fr*friends ,int* counter, int i)
{
  char name_search[50]={'\0'};
  char Delete[5]={'\0'};
  printf("Search by last name\n");
  scanf("%s",name_search);//Name entry

  for(i=0;i<*counter;i++)
    {
    if(strcmp(name_search,friends[i].Last_Name)==0)//Copys over the name entered
       {

        strcpy(friends[i].Last_Name,Delete);
        (*counter)++;

        printf("\nName has been deleted\n");
       }
     }  
} 
//This function prints out all the contact information
void print_contact(fr*friends ,int* counter, int i) {

  for( i = 0; i < *counter; i++)
    if (strlen(friends[i].First_Name) && strlen(friends[i].Last_Name)&&   strlen(friends[i].home)&& strlen(friends[i].cell ))
   {
        getFirst(friends, i);
        getLast(friends, i);
        getHome(friends, i);
        getCell(friends, i);
   }
}
//Displays the contact in which you are searching for.
char show_contact(fr*friends ,int* counter, int i) 
{  
    char name_search2[50]={'\0'};
    printf("Please enter a last name\n");
    scanf("%s",name_search2);
    for(i=0;i<*counter;i++)
      {
     //If the name is found, it reaturns the contact info.
        if(strcmp(name_search2,friends[i].Last_Name)==0)
          {

          return printf("%s " "%s" "(Home)""%s""(Cell)" "%s\n",friends[i].First_Name,     friends[i].Last_Name,friends[i].home,friends[i].cell);

           }

        }

  return 0;
} 
```

我没有添加`free()`代码，因为不管它似乎得到了相同的结果。为什么只有在我从列表中删除名称后程序才会崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:34:22.213

### 第 1 步：隔离问题：

```
//This is used to delete a name out of the book.
char delete_contact(fr*friends ,int* counter, int i)
{
  char name_search[50]={'\0'};
  char Delete[5]={'\0'};
  printf("Search by last name\n");
  scanf("%s",name_search);//Name entry

  for(i=0;i<*counter;i++)
    {
    if(strcmp(name_search,friends[i].Last_Name)==0)//Copys over the name entered
       {
        strcpy(friends[i].Last_Name,Delete);
        (*counter)++;
        printf("\nName has been deleted\n");
       }
     }
} 
```

### Step2：可能的问题

```
(*counter)++ //why do this? 
```

当找到要删除的名称时执行此操作。为什么要增加列表中所有名称的计数？我认为这应该是一个递减，或者根本不应该在循环内完成。

# java - 从扩展应用程序的类调用 AsyncTack 中的 ProgressDialog

> ID：13324812
> 
> 赞同：1
> 
> 时间：2012-11-10T18:23:20.203
> 
> 标签：java, android, android-asynctask

我用自己的数据类扩展到应用程序类。它用于在我的应用程序中存储全局对象，并使所有 Acitivites 都可以访问它们。我希望这个类在应用程序运行时初始化，通过 AsyncTask 从互联网下载数据。如何在 AsyncTask 中显示/隐藏 ProgressDialog，这需要我将正确的上下文/活动传递给它？

```
public class DataSource extends Application{
    private int userid;
    private Object[] orders;
    //initialize

    @Override
    public void onCreate() {
        // Pull data from the internet and store it in orders
        super.onCreate();
    }

    public void beginDataLoad(Activity callingActivity) {
        // HOW DO I PASS THE CORRECT ACTIVITY TO MY NEW downloadData OBJECT?
        downloadData task = new downloadData(callingActivity);
        task.execute(new String[] { "http://www.myurl.com" });
    }

    private class downloadData extends AsyncTask<String, Void, String>{
        private ProgressDialog progressDialog;
        private MainActivity activity;

        public downloadData(MainActivity activity) {
            this.activity = activity;
            this.progressDialog = new ProgressDialog(activity);
        }

        protected void onPreExecute() {
            progressDialog.setMessage("Downloading events...");
            progressDialog.show();
        }
        protected String doInBackgroun(String... params) {
            // Do AsyncTask download functions in background...
        }
        protected void onPostExecute() {
            progressDialog.dismiss();
            //Callback function in MainActivity to indicate data is loaded
            activity.dataIsLoaded();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:51:39.183

我最终以这种方式从我的 MainActivity 调用数据源加载。

```
public class MainActivity extends Activity {

    //onclick function...
    myDataSource = (DataSource)getApplicationContext();
    myDataSource.beginDataLoad(MainActivity.this);

    //Callback for AsyncTask to call when its completed
    public void dataIsLoaded() {
        //Do stuff once data has been loaded
    }
} 
```

# java - 一种更有效的方法来查找彼此相隔一个字母的英语单词

> ID：13324816
> 
> 赞同：9
> 
> 时间：2012-11-10T18:23:47.610
> 
> 标签：java, algorithm

我写了一个小程序，试图找到两个长度相等的英语单词之间的联系。单词 A 将通过一次更改一个字母来转换为单词 B，每个新创建的单词都必须是一个英文单词。

例如：

```
Word A = BANG
Word B = DUST 
```

结果：

```
BANG -> BUNG ->BUNT -> DUNT -> DUST 
```

我的过程：

1.  将英文单词表（由 109582 个单词组成）加载到 a`Map<Integer, List<String>> _wordMap = new HashMap();`中，key 将是单词长度。

2.  用户输入 2 个字。

3.  createGraph 创建一个图。

4.  计算这两个节点之间的最短路径

5.  打印出结果。

一切正常，但我对第 3 步所花费的时间不满意。

看：

```
Completely loaded 109582 words!
CreateMap took: 30 milsecs
CreateGraph took: 17417 milsecs
(HOISE : HORSE)
(HOISE : POISE)
(POISE : PRISE)
(ARISE : PRISE)
(ANISE : ARISE)
(ANILE : ANISE)
(ANILE : ANKLE)
The wholething took: 17866 milsecs 
```

**我对在步骤 3**中创建图表所花费的时间不满意，这是我的代码（我使用 JgraphT 作为图表）：

```
private List<String> _wordList = new ArrayList();  // list of all 109582 English words
private Map<Integer, List<String>> _wordMap = new HashMap();  // Map grouping all the words by their length()
private UndirectedGraph<String, DefaultEdge> _wordGraph =
        new SimpleGraph<String, DefaultEdge>(DefaultEdge.class);  // Graph used to calculate the shortest path from one node to the other.

private void createGraph(int wordLength){

    long before = System.currentTimeMillis();
    List<String> words = _wordMap.get(wordLength);
    for(String word:words){
        _wordGraph.addVertex(word);  // adds a node
        for(String wordToTest : _wordList){
            if (isSimilar(word, wordToTest)) {        
                _wordGraph.addVertex(wordToTest);  // adds another node
                _wordGraph.addEdge(word, wordToTest);  // connecting 2 nodes if they are one letter off from eachother
            }
        }            
    }        

    System.out.println("CreateGraph took: " + (System.currentTimeMillis() - before)+ " milsecs");
}

private boolean isSimilar(String wordA, String wordB) {
    if(wordA.length() != wordB.length()){
        return false;
    }        

    int matchingLetters = 0;
    if (wordA.equalsIgnoreCase(wordB)) {
        return false;
    }
    for (int i = 0; i < wordA.length(); i++) {

        if (wordA.charAt(i) == wordB.charAt(i)) {
            matchingLetters++;
        }
    }
    if (matchingLetters == wordA.length() - 1) {
        return true;
    }
    return false;
} 
```

**我的问题：**

**如何改进我的算法以加快流程？**

对于正在阅读本文的任何 redditors，是的，我在昨天看到 /r/askreddit 的线程后创建了这个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-10T18:36:17.790

这是一个开始的想法：

创建一个`Map<String, List<String>>`（或`Multimap<String, String>`如果您使用番石榴），并且对于每个单词，一次“删除”一个字母，并将原始单词添加到该被删除单词的列表中。所以你最终会得到：

```
.ORSE => NORSE, HORSE, GORSE (etc)
H.RSE => HORSE
HO.SE => HORSE, HOUSE (etc) 
```

那时，给定一个单词，您可以很容易地找到与之相似的所有单词 - 只需再次执行相同的过程，但无需添加到地图中，只需获取每个“空白”版本的所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:33:09.497

您可能需要通过分析器运行它以查看大部分时间都花在了哪里，特别是因为您正在使用库类 - 否则您可能会付出很多努力但看不到明显的改进。

您可以在开始之前将所有单词小写，以避免`equalsIgnoreCase()`每次比较时都出现。实际上，这是您的代码中的不一致 - 您`equalsIgnoreCase()`最初使用，但随后以区分大小写的方式比较字符：`if (wordA.charAt(i) == wordB.charAt(i))`. 完全消除检查可能是值得的，因为这与以下循环`equalsIgnoreCase()`基本相同。`charAt`

您可以更改比较循环，以便在找到多个不同的字母时尽早完成，而不是比较所有字母，然后才检查有多少匹配或不同。

（**更新**：这个答案是关于优化您当前的代码。我意识到，再次阅读您的问题，您可能会询问替代算法！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:43:53.910

您可以对相同长度的单词列表进行排序，然后进行 kind 的循环嵌套`for (int i = 0; i < n; ++i) for (int j = i + 1; j < n; ++j) { }`。

在 isSimilar 中计算差异，并在 2 上返回 false。

# c - 使用管道时出错，exec.Second 命令不退出

> ID：13324818
> 
> 赞同：3
> 
> 时间：2012-11-10T18:23:58.957
> 
> 标签：c, exec, piping, dup2

该代码将命令作为输入并执行它。管道也被处理。问题是假设如果我输入 ls | grep x 作为命令。进程 grep 不退出，因此程序停止。有任何想法吗。

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <signal.h>
void parse(int *cont,char *command,char **exarg)
{
    char *x=strchr(command,'&');
    if(x!=NULL)
    {
        *cont=1;
        *(--x)='\0';
    }
    x=strtok(command," ");
    while(x!=NULL)
    {
        *exarg++=x;
        x=strtok(NULL," ");
    }
    *exarg='\0';
}

int divide(char *cmd,char **cmdarr)
{
    int i=0;
    char *x;
    x=strtok(cmd,"|");
    while(x!=NULL)
    {
        i++;
        *cmdarr++=x;
        x=strtok(NULL,"|");
    }
    *cmdarr='\0';
    return i;
}

void main()
{
    pid_t pid;
    int cont;
    int i=0;
    int orgnum;
    char *cmdarr[50];
    char c[50];
    int p1[2];
    int p2[2];
    char *argument[50];
    if(pipe(p1)<0)
        printf("error\n");
    if(pipe(p2)<0)
        printf("error2\n");
    for(;;)
    {
        printf("Enter the command:");
        gets(c);
        if(!strcmp("exit",c))
            break;
        orgnum=divide(c,cmdarr);
        printf("%d\n",orgnum);
        for(i=0;i<orgnum;i++)
        {
            pid=fork();
            if(pid==0)
            {
                if(i==0)
                {
                    close(p1[0]);
                    close(p1[1]);
                    close(p2[0]);
                    if((i+1)!=orgnum)
                    {
                        dup2(p2[1],STDOUT_FILENO);
                        dup2(p2[1],STDERR_FILENO);
                    }
                    close(p2[1]);
                    parse(&cont,cmdarr[i],argument);
                    if((execvp(argument[0],argument))<0)
                    {
                        printf("Wrong cmd");
                        exit(0);
                    }
                }
                else if(i>0)
                {
                    if((i+1)%2==0)
                    {
                        close(p1[0]);
                        close(p2[1]);
                        dup2(p2[0],STDIN_FILENO);
                        close(p2[0]);
                        if((i+1)!=orgnum)
                        {
                            dup2(p1[1],STDOUT_FILENO);
                            dup2(p1[1],STDERR_FILENO);
                        }
                        close(p1[1]);
                    }
                    else if((i+1)%2==1)
                    {
                        close(p2[0]);
                        close(p1[1]);
                        dup2(p1[0],STDIN_FILENO);
                        close(p1[0]);
                        if((i+1)!=orgnum)
                        {
                            dup2(p2[1],STDOUT_FILENO);
                            dup2(p2[1],STDERR_FILENO);
                        }
                        close(p2[1]);
                    }
                    parse(&cont,cmdarr[i],argument);
                    if((execvp(argument[0],argument))<0)
                    {
                        printf("Wrng cmd");
                        exit(0);
                    }
                }
            }
            else if(pid>0){
                close(p1[0]);
                close(p1[1]);
                close(p2[0]);
                close(p2[1]);
                wait(NULL);}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T21:05:31.107

所以你有循环：

fork if child
exec
else if parent
close pipeline
wait

当你有类似“ls | grep foo”的东西时，

第 1 步：您在子进程中执行 ls，然后关闭所有管道，并在父进程中等待“ls”终止，

第 2 步：在子进程中执行 'grep'，并使用管道作为输入，但在第 1 步中关闭它们。

# ios - IOS如何等到`didReceiveData`处理程序被调用

> ID：13324821
> 
> 赞同：1
> 
> 时间：2012-11-10T18:24:08.917
> 
> 标签：ios, multithreading

我正在开发从 Web 服务器获取数据的 ios 应用程序。我希望其他一切都等待，直到调用并完成此类的处理程序之一。我知道使用调度/线程是可能的，但我就是不知道怎么做。

```
-(void)callWebService:(NSString*)URL:(NSString*)SOAP{
     NSURL *url = [NSURL URLWithString:URL];
     NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

     [req setHTTPMethod:@"POST"];
     [req setHTTPBody:[SOAP dataUsingEncoding:NSUTF8StringEncoding]];

     NSURLConnection *con = [[NSURLConnection alloc] initWithRequest:req delegate:self];
     if(con){
         [con start];
     }
} 
```

并且在这个方法的最后继续这个类之外的代码。但我想等到这个处理程序被调用（并完成）：

```
-(void)connection:(NSURLConnection *)c didReceiveData:(NSData *)data{
    NSString *res = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"%@",res);
    Ukol_Parser *parser = [Ukol_Parser alloc];
    [parser parseUkol:res];
} 
```

因为这里的解析器将数据放入 sqlite db 并且正在读取此类数据之外的数据。但是“外部”代码的执行速度比我得到响应和调用处理程序的速度要快......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:16:57.320

如果您想要“等待其他所有内容”，那么听起来您真正想要做的是同步请求。

查看[[NSURLConnection sendSynchronousRequest:returningResponse:error:]](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendSynchronousRequest:returningResponse:error:)

但是，请确保在后台线程上执行此操作，因为如果您在主线程上执行此操作，您的 UI 将阻塞，并且您的应用程序看起来对用户触摸或其他任何内容都没有响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T04:36:22.217

我很紧张您从后台队列中接受了有关的答案，因为从实际角度来看，这与您的基于 - 的实现`sendSynchronousRequest`没有什么不同。`didReceiveData`具体来说，如果您确实从后台队列执行同步请求，它*不会*让“其他一切都等待”。但是，如果您忽略了从后台队列执行此同步请求（即，如果您从主线程执行此请求），您最终会得到一个可怕的用户体验（应用程序被冻结并且用户想知道应用程序是否已崩溃），并且更糟糕的是，如果花费太长时间，您的应用程序可能会被 iOS“看门狗进程”杀死。

完全尊重各种答案，在后台队列上发送同步请求与现有`NSURLConnectionDataDelegate`的基于 - 的方法没有区别。您真正需要做的是接受应用程序的其余部分不会冻结这一事实，因此只需更新 UI 以让用户知道发生了什么，即 (a) 提供一些应用程序没有死机的视觉提示；(b) 阻止用户与您现有的 UI 进行交互。

例如，在发出网络请求之前，添加一个视图来覆盖/调暗 UI 的其余部分，防止用户与现有 UI 交互，并添加一个微调器，让用户知道应用程序正忙于做某事。因此，为 a 定义一个类属性，`UIView`它将使 UI 的其余部分变暗：

```
@property (nonatomic, strong) UIView *dimView; 
```

然后，在网络请求之前，更新 UI：

```
// add a view that dims the rest of the UI, so the user has some visual cue that they can't use the UI yet
// by covering the whole UI, you're effectively locking the user out of using the app
// until the network request is done

self.dimView = [[UIView alloc] initWithFrame:self.view.bounds];
self.dimView.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0.5];
self.dimView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[self.view addSubview:self.dimView];

// add a spinner that shows the user that something is really happening

UIActivityIndicatorView *indicatorView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
indicatorView.center = self.dimView.center;
indicatorView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
[indicatorView startAnimating];
[self.dimView addSubview:indicatorView];

[self callWebService:URL withSOAP:SOAP]; 
```

然后，在`connectionDidFinishLoading`方法中（或者如果您`sendSynchronousRequest`从后台队列中使用，则在代码的后半部分中调度到该后台队列），在完成数据解析后，您希望：

```
[self.dimView removeFromSuperview];
self.dimView = nil;

// now do what ever to need do to update your UI, e.g.:
//
// [self.tableView reloadData] 
```

但关键是您绝对不想从主队列发出同步网络请求。您应该 (a) 异步执行网络请求（在后台队列上同步或按照您最初实现的方式），以便 iOS 看门狗进程不会杀死您的应用程序；(b) 让用户知道应用程序正在发出一些网络请求并且没有冻结它们（例如 a `UIActivityIndicatorView`；和 (c) 当请求完成时，删除这些“应用程序正在发出网络请求”的 UI 元素并刷新现在您的网络请求已完成，其余的 UI。

最后，在测试您的应用程序时，请确保您在真实的网络环境中对其进行测试。我建议您安装硬件 IO 工具（可在 Xcode 菜单中的“打开开发者工具”-“更多开发者工具”下找到）并查看网络链接调节器。这让您可以在 iOS 模拟器上模拟真实世界的网络情况（例如，糟糕的 3G 或 Edge 网络条件）。当我们在具有理想网络连接的典型开发环境中测试我们的应用程序时，我们会陷入一种错误的性能感。“在野外”的设备会遭受各种网络性能下降的情况，最好在类似的、次优的网络情况下测试您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:27:39.117

一种疯狂的解决方案，但这实际上有效[https://gist.github.com/62940：D](https://gist.github.com/62940)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T19:46:10.830

使用同步调用。但它会改变你的类的设计，因为同步调用会阻塞并使应用程序挂起

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T20:49:36.803

从您的 didReceiveData: 方法发布通知，并让您的其他类观察该通知（或者您可以使用委托设置，如果很容易从其他类获取对此类的引用，那么您可以将其他类设置为这个）。在通知的选择器方法中，开始执行其余代码。

# javascript - 使用 contenteditable div 而不是 textarea 的自动完成功能似乎不起作用

> ID：13324822
> 
> 赞同：7
> 
> 时间：2012-11-10T18:24:18.607
> 
> 标签：javascript, jquery-ui, jquery-plugins, jquery

我正在使用 Andrew Whitaker 的自动完成插件，也在这个问题中引用： [jquery autocomplete @mention](https://stackoverflow.com/questions/10060536/jquery-autocomplete-mention)

如果我使用 contenteditable div 而不是 textarea，这将不起作用。这是我的代码：

```
<div id="MyText" contenteditable="true"></div>​

$("#MyText").bind("keydown", function (event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
            event.preventDefault();
        }
    }).autocomplete({
        minLength: 0,
        source: function (request, response) {
            var term = request.term,
                results = [];
            if (term.indexOf("@") >= 0) {
                term = extractLast(request.term);
                if (term.length > 0) {
                    results = $.ui.autocomplete.filter(tags, term);
                } else {
                    results = [startTyping];
                }
            }
            response(results);
        },
        focus: function () {
            return false;
        },
        select: function (event, ui) {
            if (ui.item.value !== startTyping) {
                var terms = this.value.split(' ');
                terms.pop();
                terms.push("@" + ui.item.value + "</span>");
                this.value = terms.join(" ");
            }
            return false;
        }
    }).data("autocomplete")._renderItem = function (ul, item) {
        if (item.label != startTyping) {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a><div><img src='" + item.icon + "'/></div><div>" + item.label + "</div></div></a>")
                .appendTo(ul);
        } else {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a>" + item.label + "</a>")
                .appendTo(ul);
        }
    }; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T18:05:45.937

input/textarea 和 contenteditable div 之间的主要区别在于您使用 .html() 方法（而不是 .value 或 .val() 方法）访问后者的内容。

这是自动完成代码：

```
$("#MyText")
    .bind("keydown", function (event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
            event.preventDefault();
        }
    })
    .autocomplete({
        minLength: 0,
        source: function (request, response) {
            var term = request.term,
                results = [];
            if (term.indexOf("@") >= 0) {
                term = extractLast(request.term);
                if (term.length > 0) {
                    results = $.ui.autocomplete.filter(tags, term);
                } else {
                    results = [startTyping];
                }
            }
            response(results);
        },
        focus: function () {
            return false;
        },
        select: function (event, ui) {
            if (ui.item.value !== startTyping) {
                var value = $(this).html();
                var terms = split(value);
                terms.pop();
                terms.push(ui.item.value);
                $(this).html(terms.join("@"));
                placeCaretAtEnd(this);
            }
            return false;
        }
    })
    .data("autocomplete")._renderItem = function (ul, item) {
        if (item.label != startTyping) {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a><div>" + item.label + "</div></div></a>")
                .appendTo(ul);
        } else {
            return $("<li></li>")
                .data("item.autocomplete", item)
                .append("<a>" + item.label + "</a>")
                .appendTo(ul);
        }
    }
; 
```

**编辑（2）**：这是[**jsfiddle 的链接**](http://jsfiddle.net/martyk/T45rQ/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T17:50:51.167

上面的例子不工作看到这个[http://jsfiddle.net/ipsjolly/jYJjJ/29/](http://jsfiddle.net/ipsjolly/jYJjJ/29/)

```
select: function (event, ui) {

            var value = $(this).html();
            var terms = split(value);
            terms.pop();
            terms.push(ui.item.value);
            $(this).html(terms+", ");
            placeCaretAtEnd(this);

        return false;
    } 
```

# java - Java参数签名解析

> ID：13324830
> 
> 赞同：1
> 
> 时间：2012-11-10T18:25:29.367
> 
> 标签：java, oop, generics, inheritance

为什么此代码打印 2.0 而不是 1.0？

```
abstract class B<T extends Number> {
    abstract Number f(T j);
}

class A<T extends Number> extends B<T> {
    public Number f(Float j) {
        return 1f;
    }

    public Number f(T j) {
        return j;
    }
}

public class J {
    public static void main(String[] args) {
        B<Float> a = new A<>();
        Number r = a.f(2f);
        System.out.println(r);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T18:29:06.323

你在期待什么。您在 B 类中只声明了一种方法：

```
abstract Number f(T j); 
```

A类中的方法

```
public Number f(Float j); 
```

不会覆盖前者。他们有不同的签名。所以方法

```
public Number f(T j) {
    return j;
} 
```

被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T19:06:39.300

所以这里问题的核心是你已经将变量声明`a`为 type `B`。由于`B`该类只有一种方法，因此那是获胜的方法。但是，在您的 中`main`，如果您将类型更改`a`为 type `A`，您会注意到它不会编译，因为它是模棱两可的。但是，如果您确实将类中的方法更改`A`为接受原语，并且在`main()`方法中将变量定义`a`为 type `A`，则会导致`1.0`. 即，以下将导致打印`1.0`：

```
class A<T extends Number> extends B<T> {
    public Number f(float j) {
        return 1f;
    }

    public Number f(T j) {
        return j;
    }
}

public class J {
    public static void main(String[] args) {
        A<Float> a = new A<>();
        Number r = a.f(2f);
        System.out.println(r);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:36:48.837

在您下面的代码中

```
abstract class B<T extends Number> {
 abstract Number f(T j);
}

class A<T extends Number> extends B<T> {
    public Number f(Float j) //this method does not override the superclass method

    {
        return 1f;
    }

    public Number f(T j) {
        return j;
    }
}

public class J {
    public static void main(String[] args) {
        B<Float> a = new A<>();
        Number r = a.f(2f);
        System.out.println(r);
    }
} 
```

当调用 af(2f) 时，它会调用

```
public Number f(T j)
{
return j;
} 
```

返回 j 因此提供的输出是 2.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T19:14:02.730

`float`不是一回事`Float`。

自动装箱使其*感觉*相同，但一个主要区别是您不能将 a 传递`null`给`float`参数。

我建议`@Override`在覆盖的方法上使用注释，这样编译器会告诉你签名是否正确

# algorithm - 在给定的一组数字中找到可能的 3 算术级数的个数

> ID：13324832
> 
> 赞同：2
> 
> 时间：2012-11-10T18:25:45.490
> 
> 标签：algorithm

给定一组整数，问题在于找到长度为 3 的可能算术级数的数量。整数集可能已排序，也可能未排序。

我可以实现一个简单的蛮力算法，花费时间 O(n^3)，但时间效率很重要，整数集可以大到 10^5。这意味着暴力破解显然行不通。任何人都可以在 C++ 中建议一些算法/伪代码/代码吗？

一个例子：有 4 个数字 5,2,7,8 。显然只有一种可能性 - (2,5,8)，其中公差为 3，所以我们的答案是 1。

**编辑**：我忘了提到一个重要的属性 - 每个给定的集合数在 1 到 30000 之间（包括）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:36:05.320

您可以在 O(N^2) 中执行以下操作：创建整数的哈希集，以便您可以检查`O(1)`. 之后，在所有成对的集合元素上创建两个嵌套循环`{X, Y}`。这是在`O(N^2)`.

对于每一对`{X, Y}`，假设`X < Y`，并计算两个数：

```
Z1 = X - (Y-X)
Z2 = Y + (Y-X) 
```

三元组`{X, Y, Zi}`形成一个算术序列如果`Zi != X && Zi != Y && set.contains(Zi)`

检查三元组`{X, Y, Z1}`和`{X, Y, Z2}`. 您可以`O(1)`使用哈希集来完成，算法的总运行时间为`O(N^2)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T20:54:25.863

O(N+BlogB) 的替代解决方案（其中 B 是整数的最大大小 - 在您的情况下为 30,000）是考虑直方图 H，其中 H[x] 是 x 在序列中出现的次数.

这个直方图可以在时间 N 中计算出来。

您正在寻找元素 a,b,c 使得 ba=cb。这等价于 2b=a+c。

所以想法是计算 a+c 的第二个直方图 G[x]，然后遍历所有元素 b 并将 H[b]*G[2b] 添加到总数中。这需要时间 O(B)。

（G[x] 是序列中有一对值 a,b 使得 x=a+b 的次数。）

唯一的困难是计算 G[x]，但这可以使用快速傅里叶变换在 O(BlogB) 时间内将 H[x] 与自身进行卷积来完成。

# c# - 使用 Newtonsoft 提取单个 JSON 值

> ID：13324834
> 
> 赞同：-3
> 
> 时间：2012-11-10T18:26:13.687
> 
> 标签：c#, json, parsing, console, json.net

我有：

```
[
  {
    "account": "max",
    "address": "1DjA7XoVkB8bKRzcf5oW2MFtyN92u3ssEu",
    "category": "receive",
    "amount": 0.1,
    "confirmations": 290,
    "blockhash": "000000000000040f883801bd432ae638258dd852e124f8db349a9a6afc0bd4
df",
    "blockindex": 139,
    "blocktime": 1352407188,
    "txid": "cee56f0aa97f9200e7fcb220861098bd74419cf5427e81b02870cb9baf063560",
    "time": 1352407188,
    "timereceived": 1352550395
  }
] 
```

获取 txid 值的最快方法是什么？我已经尝试了几个小时的组合。

编辑：它是一个 JArray C# 对象，如下所示：

```
o = new JArray(o.First);
return o["txid"]; 
```

返回错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:30:34.350

如果代码作为字符串接收，请尝试以下操作：

```
alert(eval('[{"account": "max","address": "1DjA7XoVkB8bKRzcf5oW2MFtyN92u3ssEu","category": "receive","amount": 0.1,"confirmations": 290,"blockhash": "000000000000040f883801bd432ae638258dd852e124f8db349a9a6afc0bd4
df","blockindex": 139,"blocktime": 1352407188,"txid": "cee56f0aa97f9200e7fcb220861098bd74419cf5427e81b02870cb9baf063560","time":1352407188,"timereceived": 1352550395}]')[0]["txid"]); 
```

如果代码是一个 javascript 对象，试试这个：

```
var obj = [
  {
    "account": "max",
    "address": "1DjA7XoVkB8bKRzcf5oW2MFtyN92u3ssEu",
    "category": "receive",
    "amount": 0.1,
    "confirmations": 290,
    "blockhash": "000000000000040f883801bd432ae638258dd852e124f8db349a9a6afc0bd4
df",
    "blockindex": 139,
    "blocktime": 1352407188,
    "txid": "cee56f0aa97f9200e7fcb220861098bd74419cf5427e81b02870cb9baf063560",
    "time": 1352407188,
    "timereceived": 1352550395
  }
];

alert(obj[0]["txid"]); 
```

希望能帮助到你。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:31:42.793

`SoapHexBinary`在命名空间中使用`System.Runtime.Remoting.Metadata.W3cXsd2001`

```
var jArr = JArray.Parse(json);
var hex = SoapHexBinary.Parse((string)jArr[0]["txid"]);
byte[] buf  = hex.Value; 
```

# java - 致命异常：主要 java.lang.RuntimeException：

> ID：13324836
> 
> 赞同：0
> 
> 时间：2012-11-10T18:26:26.237
> 
> 标签：java, android, exception, java.lang.class

我知道已经有很多关于如何解决致命异常的条目，但没有一个能解决我的问题。我正在开发一个非常简单的计算器，它有九个按钮、一个编辑文本和一个文本视图。它的全部目的是简单地输入一个数字，点击一个带有另一个数字的按钮，然后这些产品将出现在文本视图中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="16dp"
    android:text="@string/number" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="16dp"
    android:ems="10"
    android:inputType="numberDecimal" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:layout_marginLeft="16dp"
    android:layout_marginTop="23dp"
    android:text="@string/s1" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_centerHorizontal="true"
    android:text="@string/s2" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button2"
    android:layout_alignBottom="@+id/button2"
    android:layout_alignRight="@+id/textView1"
    android:text="@string/s3" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="16dp"
    android:text="@string/s4" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button4"
    android:layout_alignBottom="@+id/button4"
    android:layout_alignLeft="@+id/button2"
    android:text="@string/s5" />

<Button
    android:id="@+id/button6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button5"
    android:layout_alignBottom="@+id/button5"
    android:layout_alignLeft="@+id/button3"
    android:text="@string/s6" />

<Button
    android:id="@+id/button7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button4"
    android:layout_below="@+id/button4"
    android:layout_marginTop="22dp"
    android:text="@string/s7" />

<Button
    android:id="@+id/button8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button7"
    android:layout_alignBottom="@+id/button7"
    android:layout_alignLeft="@+id/button5"
    android:text="@string/s8" />

<Button
    android:id="@+id/button9"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button8"
    android:layout_alignBottom="@+id/button8"
    android:layout_alignLeft="@+id/button6"
    android:text="@string/s9" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button8"
    android:layout_below="@+id/button8"
    android:layout_marginTop="70dp"
     />

</RelativeLayout> 
```

我终于解决了所有的问题，或者我是这么想的，但是现在当我尝试运行程序时，它甚至在加载之前就意外停止了：

```
 11-10 11:50:13.198: E/AndroidRuntime(451): FATAL EXCEPTION: main
 11-10 11:50:13.198: E/AndroidRuntime(451): java.lang.RuntimeException: Unable to          instantiate activity         ComponentInfo{com.deitel.multiplicationtables/com.deitel.multiplicationtables.Main}:     java.lang.InstantiationException: com.deitel.multiplicationtables.Main
 11-10 11:50:13.198: E/AndroidRuntime(451):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.os.Looper.loop(Looper.java:123)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-10 11:50:13.198: E/AndroidRuntime(451):  at java.lang.reflect.Method.invokeNative(Native Method)
11-10 11:50:13.198: E/AndroidRuntime(451):  at java.lang.reflect.Method.invoke(Method.java:507)
11-10 11:50:13.198: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-10 11:50:13.198: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-10 11:50:13.198: E/AndroidRuntime(451):  at dalvik.system.NativeStart.main(Native Method)
11-10 11:50:13.198: E/AndroidRuntime(451): Caused by: java.lang.InstantiationException: com.deitel.multiplicationtables.Main
11-10 11:50:13.198: E/AndroidRuntime(451):  at java.lang.Class.newInstanceImpl(Native Method)
11-10 11:50:13.198: E/AndroidRuntime(451):  at java.lang.Class.newInstance(Class.java:1409)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-10 11:50:13.198: E/AndroidRuntime(451):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
11-10 11:50:13.198: E/AndroidRuntime(451):  ... 11 more
11-10 11:55:13.367: I/Process(451): Sending signal. PID: 451 SIG: 9 
```

我知道这可能是一些小事，但我找不到我搞砸的地方。任何帮助表示赞赏！

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.deitel.multiplicationtables"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Main"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

JAVA代码：

```
package com.deitel.multiplicationtables;

import android.os.Bundle;
import android.app.Activity;
import android.widget.Button;
import android.widget.TextView;
import android.widget.EditText;
import android.view.View;

//Implements the listener for an onclick event (implements View.onClickListener)
public abstract class Main extends Activity implements View.OnClickListener{
// creates a button 
private Button bone, btwo, bthree, bfour, bfive, bsix, bseven, beight, bnine;

// Called when the activity is first created.
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  //assigns the resource id of 1 - 9 to each button.
    bone = (Button) findViewById(R.id.button1);
    btwo = (Button) findViewById(R.id.button2);
    bthree = (Button) findViewById(R.id.button3);
    bfour = (Button) findViewById(R.id.button4);
    bfive = (Button) findViewById(R.id.button5);
    bsix = (Button) findViewById(R.id.button6);
    bseven = (Button) findViewById(R.id.button7);
    beight = (Button) findViewById(R.id.button8);
    bnine = (Button) findViewById(R.id.button9);

    //Adds the buttons to the onclicklistener
    bone.setOnClickListener(this);
    btwo.setOnClickListener(this);
    bthree.setOnClickListener(this);
    bfour.setOnClickListener(this);
    bfive.setOnClickListener(this);
    bsix.setOnClickListener(this);
    bseven.setOnClickListener(this);
    beight.setOnClickListener(this);
    bnine.setOnClickListener(this);

 }

 //creates a method (or action) for when the button is clicked.
public void onclick(View view)
{
    //Makes a variable for the entered number
    Double amount = 0.0;
    Double product = 0.0;
    Double variable = 0.0;

    // constants
    final double one = 1.0; 
    final double two = 2.0;
    final double three = 3.0;
    final double four = 4.0; 
    final double five = 5.0;
    final double six = 6.0;
    final double seven = 7.0; 
    final double eight = 8.0;
    final double nine = 9.0;

    if (view.getId() == R.id.button1)
    {
      variable = one;
    }
    if (view.getId() == R.id.button2)
    {
        variable = two;
    }
    if (view.getId()== R.id.button3)
    {
        variable = three;
    }

    if (view.getId() == R.id.button4)
    {
      variable = four;
    }
    if (view.getId() == R.id.button5)
    {
        variable = five;
    }
    if (view.getId()== R.id.button6)
    {
        variable = six;
    }

    if (view.getId() == R.id.button7)
    {
      variable = seven;
    }
    if (view.getId() == R.id.button8)
    {
        variable = eight;
    }
    if (view.getId()== R.id.button9)
    {
        variable = nine;
    }

    //creates an editext and assigns the resource id of the xml edittext.
    EditText number = (EditText)findViewById(R.id.editText1);

    //Receives the input from the edittext, converts it to a double (number).
    amount = Double.parseDouble(number.getText().toString());
    //Calculates the product
    product = variable * amount;

    //Creates a textview object, assigns the xml r.id, and then changes the text to  report the amount.
     TextView t = (TextView)findViewById(R.id.textView2); 
        t.setText("Your product is: " + product);

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:00:44.267

从您的课程中删除抽象关键字，它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:02:14.147

日志清楚地写着

```
Caused by: java.lang.InstantiationException: com.deitel.multiplicationtables.Main 
```

检查你的`Main`课程，它不应该是抽象的。

# matlab - 不使用 hist() Matlab 的灰度归一化直方图

> ID：13324840
> 
> 赞同：0
> 
> 时间：2012-11-10T18:26:42.530
> 
> 标签：matlab, image-processing

*输入*：[0..255] 中的灰度 img
*输出*：归一化的 img 直方图 - 一个 1X256 数组除以像素总数

这是我的解决方案：

```
function [h] = histImage(img)
    h=zeros(1,256)
    for i=1:size(h,2)
       h(i) = length(find(img==i));
    end
    h = h./sum(h); 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:34:57.573

“更好”总是在旁观者的眼中。无论如何，这是一种使用以下方法执行上述操作的方法`accumarray`：

```
%# each pixel contributes 1/nPixels to the counts of the histogram
%# to use graylevels as indices, we have to add 1 to make it 1...256

nPix = numel(img);
h = accumarray(img(:)+1,ones(nPix,1)/nPix,[256 1],@sum,0); 
```

# facebook - 使用 nodejs 进行 Facebook 身份验证

> ID：13324844
> 
> 赞同：0
> 
> 时间：2012-11-10T18:27:55.267
> 
> 标签：facebook, node.js, authentication, request, response

我正在尝试在 facebook 中对用户进行身份验证：

```
var querystring = require('querystring');
var http = require('http');
var fs = require('fs');

getCookies(function(cookies){
  logIn(cookies);
});

function logIn(cookies) {
  var post_data = querystring.stringify({
      'email': 'email@domain',
      'pass': 'password'
  });

  var post_options = {
      host: 'www.facebook.com',
      port: '80',
      path: '/login.php?login_attempt=1',
      method: 'POST',
      headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Content-Length': post_data.length,
          'user-agent': 'Mozilla/5.0',
          'set-cookie': cookies[0]
      }
  };

  var post_req = http.request(post_options, function(res) {
      res.setEncoding('utf8');
      console.log(res.statusCode);
      var data = '';
      res.on('data', function (chunk) {
          data += chunk;
      });
      res.on('end', function () {
          fs.writeFile("C:\\Users\\user\\Desktop\\fb.html", data, function(err) {
              if(err) {
                  console.log(err);
              } else {
                  console.log("The file was saved!");
              }
          });
      });
  });

  post_req.write(post_data);
  post_req.end();
}

function getCookies(callback){
  var get_options = {
      host: 'www.facebook.com',
      port: '80',
      path: '/',
      method: 'GET',
      headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'user-agent': 'Mozilla/5.0'
      }
  };

  var get_req = http.request(get_options, function(res) {
      var cookies = res.headers['set-cookie'];
      res.on('end', function (chunk) {
          callback(cookies);
      });
  });

  get_req.write('');
  get_req.end();
} 
```

但响应是我的浏览器中的 cookie 未启用。请不要建议使用现有的库连接到 facebook，我正在学习...提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T14:45:21.463

Facebook 使用 OAuth 身份验证对用户进行身份验证。我使用 oAuth 模块在[http://nabaruns.blogspot.in/2013/01/linkedin-api-call-using-nodejs-oauth.html](http://nabaruns.blogspot.in/2013/01/linkedin-api-call-using-nodejs-oauth.html)访问 Linkedin API 。您可以尝试相同的方法，看看是否可以调用graph facebook apis。

希望这可以帮助

# entity-framework - 使用实体框架仅插入不同记录的最佳方法

> ID：13324846
> 
> 赞同：0
> 
> 时间：2012-11-10T18:29:10.630
> 
> 标签：entity-framework

使用 EF 4.0 将差异记录插入数据库的最佳实践是什么

我在一个包含 3 条记录的对象中有一组公寓。

在插入之前，我从数据库（公寓表）中检索记录并只带回 1 条记录。1 条记录恰好是上述对象中 3 条记录中的 1 条。我不想插入重复的记录。

我可以删除一个不同的记录并再次插入所有 3 个记录...

有更好的方法吗？使用 EF 仅插入与该表不同的 2 个对象的最佳方法是什么？

# django - 在 django 中重定向而不创建视图的最聪明的方法

> ID：13324848
> 
> 赞同：1
> 
> 时间：2012-11-10T18:29:43.947
> 
> 标签：django, redirect

任务很简单：

```
If user visits site root then:
    if user is authenticated then:
        redirect to /dashboard/
    else:
        redirect to settings.LOGIN_URL 
```

有很多方法可以实现它，但我想知道是否有这种方法我**只**需要使用urls.py。

我找到了 RedirectView 的解决方案`login_required(RedirectView.as_view(url=my_url))`，但是我只能编写静态 my_url 而不是 reverse()，这不灵活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:47:43.870

您可以`reverse_lazy`在 url 配置中使用 (Django 1.4)，如下所示：

```
from django.conf.urls.defaults import url, patterns
from django.core.urlresolvers import reverse_lazy
from django.shortcuts import redirect

urlpatterns = patterns('',
    url(r'^/$', lambda request: return redirect(reverse_lazy('url_name')),
) 
```

另一种可能性是定义`LOGIN_URL`using `reverse_lazy`，因此您可以继续`settings.LOGIN_URL`在重定向中使用。

[代码未经测试，可能某处有错字。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:24:32.437

您只需要将 LoginRequired 混合到您的视图中。您可以在此处找到 mixin 的示例：

[http://djangosnippets.org/snippets/2442/](http://djangosnippets.org/snippets/2442/)

然后在定义该视图的地方，您只需执行以下操作：

```
class RedirectView(LoginRequiredMixin, DetailView):
    .... 
```

或者你继承的任何基于类的视图。希望有帮助！

# javascript - 抓取输入文件值并制作图像

> ID：13324854
> 
> 赞同：0
> 
> 时间：2012-11-10T18:30:32.770
> 
> 标签：javascript, jquery, file-upload

我正在尝试从 html 中的文件输入中获取值并将其立即放入我喜欢的 div 中：

html:

```
 <div class='pushLeft noOverflow' id='areaUpload'>
        <input type='file' id='uploadFileHere' />
    </div> 
```

jQuery：

```
 $(document).on("change", "#uploadFileHere", function(){
        $("#areaUpload").html("<img src='" + $("#uploadFileHere").val() + "' />");

    }); 
```

我遇到的问题是图像没有出现。我检查了文件路径，它正在返回：C:\fakepath\filenamehere.jpg

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:33:25.190

您需要将文件上传到服务器并将其保存在网站内的服务器目录中。然后给出图像标签的相对或绝对路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T18:40:37.603

你可以使用[FileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader)，试试这个。

```
$(document).on("change", "#uploadFileHere", function(){
      var fileInput = this;
      if (fileInput.files && fileInput.files[0]) {
            var fileReader = new FileReader();

            fileReader.onload = function (e) {
               $("#areaUpload").html("<img src='" +e.target.result + "' />");
            }

            fileReader.readAsDataURL(fileInput.files[0]);
        }
}); 
```

检查此**[演示](http://jsfiddle.net/3FX83/)**

感谢@FabrícioMatté，对于这个 JsFiddle 演示

应该注意旧的浏览器（IE < 10）不支持这个API

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T18:33:39.493

先生，我认为您应该首先使用一些 ajax 的东西（例如表单的 POST 操作）并将图像上传到服务器上，然后从服务器获取实际的 URL 并将其放入 src 属性值中。你可以搜索一个图片上传插件，看看它们在这些情况下是如何工作的。

希望它可以帮助你。干杯

# php - php foreach 中的 CodeIgniter form_checkbox 和 set_value

> ID：13324856
> 
> 赞同：0
> 
> 时间：2012-11-10T18:30:36.300
> 
> 标签：php, codeigniter

我在 php foreach 语句中有我的 form_checkbox 和 set_value，这条线不起作用：

```
form_checkbox(array("name"=>"membershiptype[]","id"=>$membership['name'],
"value"=>$membership['id'], "checked"=>set_radio("membershiptype[]", $membership['id'], 
FALSE))) 
```

我正在尝试在选中复选框时设置验证，并且在返回页面并显示其他错误时返回此值的其他内容不正确，现在它不会在验证时重新选择它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:51:53.703

我通过删除`[]`我的`set_value`

```
form_checkbox(array("name"=>"membershiptype[]","id"=>$membership['name'],
"value"=>$membership['id'], "checked"=>set_radio("membershiptype", $membership['id'], 
FALSE))) 
```

# python - 替换列表列表中的字符

> ID：13324859
> 
> 赞同：-1
> 
> 时间：2012-11-10T18:30:55.760
> 
> 标签：python

我开始了一个 suduko 项目，我需要将列表“board”中的所有 0 替换为“”。为什么它不起作用？

我收到此错误：

```
AttributeError: 'list' object has no attribute 'replace' 
```

我的代码：

```
board = [[3,7,0,0,5,0,0,0,0],
         [0,6,0,0,3,0,2,0,0],
         [0,2,9,4,0,0,0,7,8],
         [0,0,4,1,7,0,0,8,0],
         [0,0,6,3,0,5,9,0,0],
         [0,5,0,0,8,4,1,0,0],
         [7,1,0,0,0,8,5,6,0],
         [0,0,5,0,1,0,0,2,0],
         [0,0,0,0,9,0,0,1,3]]

def print_board(board):
    pass
    a=-1
    board=board.replace(0, " ")
    for i in board:
        a+=1

        if a%3==0:

            print 25*"*"+""
            print "*",i[0],i[1],i[2],"*",i[3],i[4],i[5],"*",i[6],i[7],i[8],"*"

        else:
            print "*",i[0],i[1],i[2],"*",i[3],i[4],i[5],"*",i[6],i[7],i[8],"*"
    print 25*"*"+"" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:35:55.000

尝试这样的事情，使用列表理解：

```
In [10]: board
Out[10]: 
[[3, 7, 0, 0, 5, 0, 0, 0, 0],
 [0, 6, 0, 0, 3, 0, 2, 0, 0],
 [0, 2, 9, 4, 0, 0, 0, 7, 8],
 [0, 0, 4, 1, 7, 0, 0, 8, 0],
 [0, 0, 6, 3, 0, 5, 9, 0, 0],
 [0, 5, 0, 0, 8, 4, 1, 0, 0],
 [7, 1, 0, 0, 0, 8, 5, 6, 0],
 [0, 0, 5, 0, 1, 0, 0, 2, 0],
 [0, 0, 0, 0, 9, 0, 0, 1, 3]]

In [11]: board=[[x if x!=0 else " " for x in i] for i in board]

In [12]: board
Out[12]: 
[[3, 7, ' ', ' ', 5, ' ', ' ', ' ', ' '],
 [' ', 6, ' ', ' ', 3, ' ', 2, ' ', ' '],
 [' ', 2, 9, 4, ' ', ' ', ' ', 7, 8],
 [' ', ' ', 4, 1, 7, ' ', ' ', 8, ' '],
 [' ', ' ', 6, 3, ' ', 5, 9, ' ', ' '],
 [' ', 5, ' ', ' ', 8, 4, 1, ' ', ' '],
 [7, 1, ' ', ' ', ' ', 8, 5, 6, ' '],
 [' ', ' ', 5, ' ', 1, ' ', ' ', 2, ' '],
 [' ', ' ', ' ', ' ', 9, ' ', ' ', 1, 3]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:37:54.140

您可以使用列表推导：

```
board = [[3,7,0,0,5,0,0,0,0],
         [0,6,0,0,3,0,2,0,0],
         [0,2,9,4,0,0,0,7,8],
         [0,0,4,1,7,0,0,8,0],
         [0,0,6,3,0,5,9,0,0],
         [0,5,0,0,8,4,1,0,0],
         [7,1,0,0,0,8,5,6,0],
         [0,0,5,0,1,0,0,2,0],
         [0,0,0,0,9,0,0,1,3]]

board = [[x if x else ' ' for x in line] for line in board]

board = [[3,7,' ',' ',5,' ',' ',' ',' '],
         [' ',6,' ',' ',3,' ',2,' ',' '],
         [' ',2,9,4,' ',' ',' ',7,8],
         [' ',' ',4,1,7,' ',' ',8,' '],
         [' ',' ',6,3,' ',5,9,' ',' '],
         [' ',5,' ',' ',8,4,1,' ',' '],
         [7,1,' ',' ',' ',8,5,6,' '],
         [' ',' ',5,' ',1,' ',' ',2,' '],
         [' ',' ',' ',' ',9,' ',' ',1,3]] 
```

或者你可以使用`map()`: `map(lambda line: [x if x else ' ' for x in line], board)`。

# ios - 故事板太长..如何设计标准尺寸？

> ID：13324860
> 
> 赞同：0
> 
> 时间：2012-11-10T18:31:03.750
> 
> 标签：ios, storyboard

我刚开始开发。我下载了 4.5.2 并注册了等。我在我的 3GS 上都可以使用它，但它被压扁了。显然它是新的 iPhone5 尺寸。我怎样才能让它恢复到正常尺寸？我应该考虑什么来处理这个问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:44:23.287

如果您想为较小的屏幕进行设计，那么在 IB 中，您可以将控制器的尺寸从默认的“推断”更改为“Retina 3.5 全屏”。它是 Simulated Metrics 下最顶部的下拉菜单。正如诺亚所说，你确实需要确保它也能在更大的屏幕上工作。

# objective-c - 如何将浮点数四舍五入到小数点后两位？

> ID：13324864
> 
> 赞同：1
> 
> 时间：2012-11-10T18:31:28.937
> 
> 标签：objective-c, ios, floating-point

这是我找出游戏速度的算法。

self.speed=.7-self.score/50;

现在我怎样才能让 self.speed 舍入到小数点后 2 位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T18:40:38.333

注意：我的回答假设您只关心小数位数，以便向用户显示值。

当您设置 NSNumberFormatter 以将数字格式化为字符串以进行显示时，请设置格式器最多保留两位小数。

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
[formatter setMaximumFractionDigits:2];

NSString *formattedNumber = [formatter stringFromNumber:@(self.speed)]; 
```

`setRoundingMode:`如果您需要特定的回合方法，您可以选择使用该方法。

顺便说一句 - 您不应该为此使用字符串格式，因为它没有考虑用户的语言环境来正确格式化数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T18:46:31.540

浮点数以 IEEE754 格式处理，您无法直接决定使用多少小数位。您可以直接决定使用多少位，或间接将数字的 las 部分四舍五入：

```
NSString* str=[NSString stringWithFormat: @"%.2f", number];
number= atof([str UTF8String]); 
```

但是就像 maddy 指出的那样，您只需要在向用户显示数字时才需要舍入/截断不需要的十进制数字，因此您只能在打印时使用 %.2f 格式说明符，或者使用格式化程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:42:36.037

```
self.speed = (int)(self.speed * 100 + 0.5) / 100.0; 
```

如果你想把它作为一个字符串：

```
NSString *speedString = [NSString stringWithFormat: @"%.2f", self.speed]; 
```

# iphone - CALayer colorWithPatternImage UIImageOrientation

> ID：13324865
> 
> 赞同：0
> 
> 时间：2012-11-10T18:31:39.153
> 
> 标签：iphone, ios, calayer, uiimageorientation

我已成功使用 colorWithPatternImage 在用于演示背景的 CALayer 中创建背景颜色。但是，图像以颠倒的颜色呈现。我从数小时的阅读帖子和文档中了解到，这是因为屏幕坐标相反。

因此，我尝试了在阅读帖子数小时后发现的这段代码，但它不起作用。

下面使用的 pImage 是之前从 NSURLConnection 加载的。

```
flippedImage = [UIImage imageWithCGImage:pImage.CGImage scale: 1.0f orientation: UIImageOrientationDownMirrored];

self.backgroundColor = [UIColor colorWithPatternImage:flippedImage].CGColor;

self.anchorPoint = CGPointMake(0.0,0.0); 
```

我应该说我是在后台线程中执行此操作的。我还尝试了文档中的其他方向，但它们都不适用于我的代码。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:34:55.353

翻转图层！？将 geometryFlipped 设置为 YES

# java - 将值/字符串返回到 JTextField，IndexoutofboundsException

> ID：13324866
> 
> 赞同：0
> 
> 时间：2012-11-10T18:31:47.103
> 
> 标签：java, swing, indexoutofboundsexception

根据另一个 Headfirst 练习，我在用车辆数据填充我的 GUI 时遇到了麻烦。我使用 Controller 类来管理我的车辆 Object 类。出于某种原因，我得到了一个超出范围异常的索引。

桂班

```
public class ShowroomDriver{
    public static Showroom Cars = new Showroom("Cars");
    public static void main(String[] args) {           
        Showroom Cars = new Showroom("Cars");
        Vehicle vechicle1 = new Vehicle("Ford"); 

        Cars.addVehicle(vechicle1);
        GuiInterface gui = new GuiInterface("Car Showroom");
    }

    private static class GuiInterface extends JFrame {
        private JButton saleButton, previousButton, nextButton;
        private static JTextField textField1;
        private JLabel label1;
        private JPanel[] p = new JPanel[5];
        public GuiInterface(String sTitle) {
            super(sTitle);
            setLayout(new FlowLayout());
            previousButton = new JButton("Previous Car");
            nextButton = new JButton("Next Car");
            saleButton = new JButton("Sale");          

            for(int i = 0; i < 5; i++){
                p[i] = new JPanel();
            }

            Container contentPane = getContentPane();
            contentPane.setLayout(new BorderLayout());
            JPanel formPanel = new JPanel(new GridLayout(1, 2));

            textField1 = new JTextField(10);            
            label1 = new JLabel("Manufacture");

            p[0].add(label1);
            p[1].add(textField1);

            for(int i = 0; i < 2; i++){
                formPanel.add(p[i]);
            }

            contentPane.add(formPanel, BorderLayout.CENTER);

            this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            this.setSize(300,300);
            this.setResizable(false);
            this.setLocationRelativeTo(null);
            getField();

            this.setVisible(true);
        }

        private void getField(){
            textField1.setText(Cars.currentVehicle().getManufacutre());
        }
    }
} 
```

控制器类

```
public class Showroom{
    private ArrayList<Vehicle> vehiclesSold = new ArrayList();
    private ArrayList<Vehicle> theVehicles;
    private String vechicleType;
    private int arrayPosition = 0;

    public Showroom(String type){
        vechicleType = type;
        theVehicles = new ArrayList<Vehicle>();
    }

    public boolean addVehicle(Vehicle newVehicle){
        theVehicles.add(newVehicle);
        return true;
    }

    public Vehicle currentVehicle(){
        return theVehicles.get(arrayPosition);
    }

    public void getVehicles(){
        System.out.println("---Vehicle Type: " + vechicleType +"---");
        for(Vehicle nextVehicle : theVehicles){
            System.out.println(nextVehicle.toString());
        }
    }
} 
```

车辆类别

```
public class Vehicle{
    private String Manufacture
    Vehicle(String Manufacture){ //There are more
        this.Manufacture = Manufacture;
        }
    }

    @Override
    public String toString(){
        String s = "Maufacture: " + getManufacutre()
                "\n";
        return s;
    }

    public String getManufacutre() { return this.Manufacture; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:35:34.643

如果没有更多代码，就无法判断错误来自何处。但是从这段代码中，唯一的地方`IndexOutOfBoundsException`可以来自

```
return theVehicles.get(arrayPosition); 
```

你的问题是，这`arrayPosition`是错误的。
尝试调试您的代码以找出究竟出了什么问题，或发布更多代码

编辑：您似乎对`static`关键字的作用有误解。
`static`对象或方法是在运行时只实例化一次的东西。
例如，您对`Cars`属性的声明`class ShowhroomDriver`意味着该类`ShowroomDriver`具有一个**名为**的类属性`Cars`（顺便说一下 - 不要让属性以大写字符开头。这**非常**令人困惑）。

您想要的是将`ShowRoom`（您的`Cars`属性）的实例通过其构造函数传递给您的类`GuiInterface`（也删除`static`那里的关键字），如下所示：

```
// ...
private Showroom cars;
public GuiInterface(String sTitle, Showroom cars) {
    // ...
    this.cars = cars;
    // ...
} 
```

然后，而不是

```
private void getField(){
    textField1.setText(Cars.currentVehicle().getManufacutre());
} 
```

你写

```
private void getField(){
    textField1.setText(this.cars.currentVehicle().getManufacutre());
} 
```

还要删除除方法中的关键字之外的**所有** 关键字。`static``main`

# excel - MS Excel：两列之间的差异。？

> ID：13324868
> 
> 赞同：0
> 
> 时间：2012-11-10T18:32:09.713
> 
> 标签：excel, ms-office

我有两列`A`，`B`其中包含用户名列表，列`B`中有一些用户名不在列中`A`如何找到它们并将它们存储在列中`C`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:41:42.880

对单元格 C1 使用此公式：

```
=IF(ISERROR(MATCH(B1,$A$1:$A$5,0)),B1,"") 
```

将其向下拖动到 B 列中列表的最后一行。

# php - AJAX readyState 在我的代码中没有更改为 4

> ID：13324870
> 
> 赞同：2
> 
> 时间：2012-11-10T18:32:33.070
> 
> 标签：php, javascript, xml, ajax

这是我的代码片段，无法理解这有什么问题，因为 xmlhttp.readyState 没有更改为 4。

```
document.getElementById("opencloseimg").src = "images/minus.jpg";
//The page we are loading.
var serverPage = "calendar.php";
//Set the open close tracker variable.
showCalendar = false;
var obj = document.getElementById(objID);
xmlhttp.open("GET", serverPage,true);
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        obj.innerHTML = xmlhttp.responseText;
    }
}
xmlhttp.send(null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:57:54.240

也许响应状态码不是 200，它可能是 304（未修改）等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:52:20.663

可能是因为您获取的 URL 不可用？

您在 JavaScript 控制台中看到任何错误吗？

在 statechange 函数的开头放置一条消息显示：

```
xmlhttp.onreadystatechange = function() {
    console.log ('xmlhttp : ' + xmlhttp.readyState + ', ' + xmlhttp.status);
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      obj.innerHTML = xmlhttp.responseText;
    } 
```

查看显示的内容。

# c# - 创建代码以使用来自外部库的两个相似类中的任何一个

> ID：13324881
> 
> 赞同：1
> 
> 时间：2012-11-10T18:33:29.750
> 
> 标签：c#, inheritance, abstract-class

我正在研究一种算法，该算法将被两个不同的团队使用，每个团队都有自己的算法工作对象的类类型。我想通过在两个类之间尽可能多地共享我的算法代码来减少重复。

为了使事情更具体，假设我正在制作一个名为 Drive() 的算法，该算法需要在 Cars 和 Trucks 上工作。不幸的是，没有 Truck 和 Car 都继承自 Vehicle 类，但 Trucks 和 Cars 都提供了对 Drive 算法所需的所有方法和类成员的访问。我似乎不太可能让这些外部团队就可以继承的类达成一致。

处理这种情况的最佳方法是什么？

我目前的想法是创建一个第三类车辆，它可以容纳一辆汽车或一辆卡车，然后将调用传递给我的算法所需的类成员/方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:46:11.863

这是一个接口的完美用例，而不是继承。您可以让两个团队同意使用定义您需要的方法的接口。你有 IVehicle 接口，它定义了驱动方法所需的方法。然后，您将方法设置为接受 IVehicle 而不是具体类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:38:02.313

听起来是使用 C# 动态类型的理想场所。

让 Drive 获取一个动态参数，然后传递您的 Cars 和 Trucks

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:08:51.173

如果 2 个类在同一个程序集中，您可以要求 2 个独立的团队就两个类使用的通用接口达成一致，然后您可以使您的代码依赖于该接口。如果这些类在不同的程序集中，但都引用另一个公共程序集，则接口可以驻留在该程序集中。

另一种选择是使用适配器模式，这将是更好的使用方法，`dynamic`或者如果团队自己不会就接口达成一致。为此，*您*将创建公共接口以及实现它的类，这些类可以将调用转发到定制的实现。

```
public interface IVehicle
{
    void Turn(); // specify all the methods and properties you need here.
}

public class CarAdapter : IVehicle
{
    private Car car;

    public CarAdapter(Car car)
    {
        this.car = car;
    }

    public void Turn()
    {
        this.car.Turn();
    }
}

public class TruckAdapter : IVehicle
{
    private Truck truck;

    public TruckAdapter(Truck truck)
    {
        this.truck = truck;
    }

    public void Turn()
    {
        this.truck.Turn();
    }
} 
```

然后您的代码只需要一个`IVehicle`

```
public void Drive(IVehicle vehicle) { ... } 
```

可以这样称呼：

```
Drive(new CarAdapter(car));
//or
Drive(new TruckAdapter(truck)); 
```

这种方法的一个优点是 Car 和 Truck*可能*具有稍微不同的属性、方法名称或参数等，但是您将其封装在适配器中，因此您的代码仅针对`IVehicle`. 这也比创建一个`Vehicle`接受 a的单个更好，`Car`或者`Truck`如果需要第 3 类（比如`Coach`），那么您可以创建一个`CoachAdapter`，而无需更改任何现有的`CarAdapter`或`TruckAdapter`允许您遵循 OCP（开放封闭原则 -代码应该对扩展开放，对修改关闭），这是您无法通过`Vehicle`类实现的，因为您必须修改它以支持教练。

# regex - 正则表达式查找/替换记事本++

> ID：13324885
> 
> 赞同：-1
> 
> 时间：2012-11-10T18:34:01.637
> 
> 标签：regex, notepad++

我有一个巨大的文本文件，其中包含这样的行：

```
080012;Bovalino;RC;CAL;0964;89034;B098;9021;http://www.website-most.en/000/000/ 
```

我只想提取：

```
080012;***Bovalino***;***RC***;CAL;***0964***;***89034***;B098;9021;http://www.website-most.en/000/000/ 
```

并删除所有其他文本。

这可以用正则表达式完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:36:53.563

您可以捕获要保留的内容并在替换字符串中使用反向引用：

```
Find what: ^\d*;(\w*;\w*);\w*;(\d*;\d*).*
Replace with: \1;\2 
```

并确保您**没有**勾选该`. matches newline`选项。

使用 Notepad++ 6，您也可以`$1;$2`用于替换（含义相同）。

如果不同的字段可能包含各种字符而不仅仅是数字和字母，那么这可能是您最好的选择：

```
Find what: ^[^;]*;([^;]*;[^;]*);[^;]*;([^;]*;[^;]*).* 
```

# java - java小吃机加总金额

> ID：13324889
> 
> 赞同：1
> 
> 时间：2012-11-10T18:34:37.670
> 
> 标签：java, currency

这是我在这里的第一篇文章，如果我不遵守规则，请原谅。所以我的项目是写代码来模拟零食机。小吃机里有饼干和薄荷糖。我们使用 GUI 与零食机交互，购买饼干/薄荷糖并选择要放入的硬币、镍和硬币的数量。这是以下 Snack Machine 文件和 Money 文件的代码（我没有包含 GUI 文件给我们是因为我们不会改变它，而且我不相信给我们的任何东西是错误的）。

```
 package proj3;

import java.awt.Color;
import java.util.ArrayList;

public class SnackMachine {

    private ArrayList<Mints> mints;
    private ArrayList<Cookies> cookies;
    private Cookies c;
    private Mints m;
    private Money amount;

    public SnackMachine(){
        mints = new ArrayList<Mints>();
        cookies = new ArrayList<Cookies>();
    }
    public void addCookies(CookieFlavors flavor, int nrcookies){
        for(int i = 0; i < nrcookies; i++){
            c = new Cookies(flavor);
            cookies.add(c);
        }
    }
    public void addMints(Color color, int nrmints){
        for(int i = 0; i < nrmints; i++){
            m = new Mints(color);
            mints.add(m);
        }
    }
    public Cookies buyCookies(Money money){
        if(money.getTotal() != .65){
            return null;
        }
        while(cookies.size() != 0){
            amount = money;
            amount.addMoney(money);
            return cookies.remove(0);
        }
        if(cookies.size() == 0){
            return null;
        }
        return c;
    }
    public Mints buyMints(Money money) {
        if(money.getTotal() != .35){
            return null;
        }
        if(mints.size() != 0){
            return mints.remove(0);
        }
        if(mints.size() == 0){
            return null;
        }
        return m;
    }
    public int getNrMints() {
        return mints.size();
    }
    public int getNrCookies() {
        return cookies.size();
    }
    public Money getCashOnHand() {
        return amount;
    }
}

    package proj3;

public class Money {

    private int numnickels;
    private int numdimes;
    private int numquarters;
    private final double nickel = 5;
    private final double dime = 10;
    private final double quarter = 25;

    public Money(int nickel, int dime, int quarter){
        this.numnickels = nickel;
        this.numdimes = dime;
        this.numquarters = quarter;
    }
    public Money addMoney(Money money){
        this.numnickels = numnickels + money.numnickels;
        numdimes = money.numdimes;
        numquarters = money.numquarters;
        return money;
    }
    public int getNickels(){
        return numnickels;
    }
    public int getDimes(){
        return numdimes;
    }
    public int getQuarters(){
        return numquarters;
    }
    public double getTotal(){
        double total = ((numnickels * nickel) + (numdimes * dime) + (numquarters * quarter)) / 100;
        return total;
    }
    public String toString(){
        String str = "Nickels: " + getNickels() + "\n" + "Dimes: " + getDimes() + "\n" + "Quarters: " + getQuarters() + "\n" + "Total: $" + getTotal();
        return str;
    }
} 
```

这是我遇到麻烦的地方。我不知道如何让机器添加用户输入的额外资金。金额最初设置为 null（对吗？）所以没有初始化它，我不能调用 addMoney 方法，因为它一直给我空指针错误。所以我必须将它初始化为Money的money变量。但是，这将继续将其重置为我接下来输入的任何内容，而不添加它。与我将其放入buyMints时相同。buyMints 中的金额将覆盖 buyCookies 中的金额，反之亦然。我不期待答案只是一种指针，如“我必须创建一个新方法”或类似的东西。我已经坚持了很长一段时间，非常感谢任何帮助！谢谢你们。

PS：用户必须始终输入准确的变化。饼干是 0.65 美元，薄荷糖是 0.35 美元。如果不是，则会出现购买失败错误（它在提供给我们的 GUI 文件中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:12:21.740

您说`amount`的最初为空是正确的。要摆脱 NullPointerException，您最初可以给机器 Money 但值为零，即

```
private Money amount  = new Money(0, 0, 0); 
```

我还会仔细查看`buyCookies`. 似乎您正在覆盖机器中有多少钱。

我唯一的其他想法是，从外观上看，薄荷糖和饼干之间的唯一区别是价格。你能把这两者的功能结合起来吗？

# php - Facebook 喜欢离开

> ID：13324890
> 
> 赞同：0
> 
> 时间：2012-11-10T18:34:46.323
> 
> 标签：php, facebook, facebook-graph-api

我有一个带有隐藏内容的页面，当用户单击 facebook 按钮时，内容会出现，例如，

用户点击喜欢的网址是可变的，它不是一个网址，

我怎么知道用户以前是否喜欢过这个网址？向他展示内容

我的语言是 php 和 html

我使用此代码在访问者喜欢在 url 之后重新定义页面

```
FB.Event.subscribe("edge.create", function(href) {
                var data = { action: "virallocker", myID: "'.$my_id.'"};
                jQuery.post("viral.php", data, function(response) {
                    if (virallocker_use) location.reload();
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:13:17.730

您不应该寻找用户单击按钮来显示内容。如果用户之前已经喜欢过你的页面怎么办？他应该点击不同的按钮来获取内容吗？

相反，您可以使用 FQL 或 opengraph 查询用户喜欢的内容，看看您的页面/网址是否被用户喜欢，然后向他展示内容。

**参考：** [https ://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

[https://developers.facebook.com/docs/reference/fql/like/](https://developers.facebook.com/docs/reference/fql/like/)

# android - ProGuard 强制使用“-dontwarn”导致 Android 应用程序行为不正确

> ID：13324893
> 
> 赞同：1
> 
> 时间：2012-11-10T18:35:06.030
> 
> 标签：android, proguard, itextpdf

我有一个我想用 progaurd 构建的应用程序我在这个应用程序中使用 ksoap 和 itext jar 现在问题是在以发布模式（签名 apk）构建应用程序时我收到错误（请参阅下面的错误日志）我之前尝试过通过使用 -dontwarn 解决此错误，但在我安装 apk 时使用此错误后，应用程序停止运行，我认为从 jar 文件中引用的类中很少有行为不正常或任何可能的原因。有什么有效的解决办法吗？任何帮助将不胜感激。谢谢 ！

```
[2012-11-10 23:52:17 - Nestle-SHSH] Proguard returned with error code 1\. See console
[2012-11-10 23:52:17 - Nestle-SHSH] Note: there were 4 duplicate class definitions.
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find superclass or interface java.awt.Graphics2D
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D$FakeComponent: can't find superclass or interface java.awt.Component
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D$HyperLinkKey: can't find superclass or interface java.awt.RenderingHints$Key
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfPrinterGraphics2D: can't find superclass or interface java.awt.print.PrinterGraphics
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.geom.PolylineShape: can't find superclass or interface java.awt.Shape
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.geom.PolylineShapeIterator: can't find superclass or interface java.awt.geom.PathIterator
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: library class android.content.res.XmlResourceParser extends or implements program class org.xmlpull.v1.XmlPullParser
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.AsianFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.AsianFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.AsianFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.AsianFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.DefaultFontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.FontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.FontMapper: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.BufferedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.BufferedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.BufferedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.RenderingHints
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.RenderingHints
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Graphics2D
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Graphics2D
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.BasicStroke
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.BasicStroke
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.RenderingHints
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.RenderingHints
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.AffineTransform
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.AffineTransform
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Color
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Color
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Area
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Rectangle2D$Float
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Rectangle2D$Float
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Area
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.BufferedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.BufferedImageOp
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.BufferedImageOp
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.RenderedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.RenderedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.RenderedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.ColorModel
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.ColorModel
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.RenderedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.RenderedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.BufferedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.RenderedImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.image.renderable.RenderableImage
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Color
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.AffineTransform
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.AffineTransform
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.AffineTransform
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.AffineTransform
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Color
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Color
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Rectangle2D
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.Font
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Rectangle2D
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Line2D$Double
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.geom.Line2D$Double
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced method 'java.awt.FontMetrics getFontMetrics()' in class com.itextpdf.awt.PdfGraphics2D
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: com.itextpdf.awt.PdfGraphics2D: can't find referenced class java.awt.FontMetrics
[2012-11-10 23:52:17 - Nestle-SHSH]          You must avoid such dependencies, since the program classes will
[2012-11-10 23:52:17 - Nestle-SHSH]          be processed, while the library classes will remain unchanged.
[2012-11-10 23:52:17 - Nestle-SHSH] Warning: there were 1 unresolved references to program class members.
[2012-11-10 23:52:17 - Nestle-SHSH]          Your input classes appear to be inconsistent.
[2012-11-10 23:52:17 - Nestle-SHSH]          You may need to recompile them and try again.
[2012-11-10 23:52:17 - Nestle-SHSH]          Alternatively, you may have to specify the option 
[2012-11-10 23:52:17 - Nestle-SHSH]          '-dontskipnonpubliclibraryclassmembers'.
[2012-11-10 23:52:17 - Nestle-SHSH] java.io.IOException: Please correct the above warnings first.
[2012-11-10 23:52:17 - Nestle-SHSH]     at proguard.Initializer.execute(Initializer.java:321)
[2012-11-10 23:52:17 - Nestle-SHSH]     at proguard.ProGuard.initialize(ProGuard.java:211)
[2012-11-10 23:52:17 - Nestle-SHSH]     at proguard.ProGuard.execute(ProGuard.java:86)
[2012-11-10 23:52:17 - Nestle-SHSH]     at proguard.ProGuard.main(ProGuard.java:492) 
```

这是我的 proguard.cfg 文件：-

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:37:58.930

我对应用程序崩溃的代码进行了一些调整，但我认为这是我的解决方案，只是因为我有另一种方法。是关于使用我用其他代码替换的 novocation 库获取位置。但是我仍然没有任何答案的主要问题是，当使用 proguard 构建应用程序时，为什么这些库会停止正常运行。我在我的应用程序中使用了 jar 文件的源代码，发现由于一些匿名代码的原因，一些类没有被编译，这最初是使用 proguard 构建时出现警告的原因。我只是删除了显示编译时错误的类（这些只是少数并且对代码的功能没有影响）这可以等同于 proguard.cfg 文件中的 -dontwarn。所以我认为它仍然需要一些深入的研究。感谢@pst 的宝贵建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-10T04:06:56.167

你可以添加

```
-dontwarn com.itextpdf.** 
```

到您的 proguard 文件或迁移到

```
com.itextpdf:itextg:** 
```

# android - 多个应用安装程序或多个可启动项

> ID：13324894
> 
> 赞同：1
> 
> 时间：2012-11-10T18:35:16.590
> 
> 标签：android, apk, android-install-apk

我想创建一个“应用程序加载器”（主要）应用程序，它将从服务器获取许可证——该许可证反过来将确定其他两个（次要）应用程序中可用的功能。

我想知道最好的方法。我是不是该：

1.  只需从同一服务器获取两个辅助 apk 作为许可信息，并尝试从应用加载程序代码中安装它们；
2.  将辅助 apk 打包到主应用 apk 中。然后，我能否在运行时从“父”apk 的资源/资产中安装辅助 apk？
3.  将辅助应用程序重新创建为一个父应用程序中的多个活动 - 使用多个启动器？

我需要就个别场景的可行性、偏好（有原因的）以及实际上哪些是可能的提供建议。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:09:02.447

> 然后，我能否在运行时从“父”apk 的资源/资产中安装辅助 apk？

并非没有将这些文件复制到外部存储。由于您无法在运行时修改资源或资产，因此无论好坏，您的“打包”“辅助”APK 都将保留在父 APK 中。

> 我需要关于个别场景可行性的建议

在上述限制范围内，所有这些都是可行的。

# apache - Apache 和 .htaccess，强制下载所有目录

> ID：13324896
> 
> 赞同：0
> 
> 时间：2012-11-10T18:35:28.870
> 
> 标签：apache, .htaccess, mod-rewrite

我有很多目录，每个目录都有很多图像。

```
/root
    /dir1
        img1
        img2
        ...
    ... 
```

当我单击上层目录/root 时，我想强制下载。这可能吗？或者我该怎么做？

# c++ - boost::shared_ptr 错误

> ID：13324901
> 
> 赞同：0
> 
> 时间：2012-11-10T18:35:46.007
> 
> 标签：c++, boost

```
class EntityHolder {
public:

    EntityHolder ( ) { }

    EntityHolder (
            const EntityHolder& other )  { }
    ~EntityHolder ( ) { }

    EntityHolder&
    operator = (
            const EntityHolder& other ) {
        return *this;
    } // = 
```

当我尝试创建 boost:shared_ptr 时，出现以下错误：

```
..\src\Entity.cpp:7:34: error: no matching function for call to 'boost::shared_ptr<orm::EntityHolder>::shared_ptr (orm::EntityHolder&)' 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:37:47.150

看起来您正在尝试将类型的对象`EntityHolder`直接传递给 的构造函数`shared_ptr`，但您应该给它一个指针，如下所示：

```
boost::shared_ptr<EntityHolder> p(new EntityHolder); 
```

# macos - Launchpad 图标不再显示 NSDockTile 徽章

> ID：13324902
> 
> 赞同：1
> 
> 时间：2012-11-10T18:35:52.537
> 
> 标签：macos, cocoa

Launchpad 图标（Apple 的应用程序除外）不再显示 NSDockTile 徽章（从 10.8.1 或 10.8.2 开始）有谁知道这是怎么回事以及如何让徽章再次显示在 Launchpad 图标上？

我找不到任何可能针对特定 Launchpad 支持的 API 更改，以防它随 10.8.0 更改，但我可以发誓它在 10.8 GM 上的工作与 10.7 相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:40:45.900

事实证明，现在只有使用 Developer ID 证书或 Mac App Store 签名的应用程序会在 LaunchPad 图标上显示它们的徽章，以前所有应用程序甚至是那些使用开发证书签名的应用程序。

# ruby-on-rails - 如何在 Rails 选择表单助手上设置默认属性？

> ID：13324915
> 
> 赞同：0
> 
> 时间：2012-11-10T18:36:55.950
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试`select`使用自定义表单助手覆盖 Rails 的方法，以便所有选择框`disabled`默认获取一个属性：

```
class LabelFormBuilder < ActionView::Helpers::FormBuilder

  def select(method, choices, options = {}, html_options = {})
    html_options.reverse_merge! :disabled => true
    super(method, choices, options = {}, html_options = {})
  end

end 
```

问题是代码不起作用，并且它不会改变选择框的呈现方式。它也不会抛出错误。

这将是我用来调用该函数的视图代码：

```
<%= f.select(:person_id, current_user.person_names, {:prompt => 'Please select...'}) %> 
```

我在这里想念什么？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:17:55.650

试试吧

```
<%= f.select(:person_id, current_user.person_names, {}, {:prompt => 'Please select...'}) %> 
```

# python - 使用行和列标题读取 CSV 的 Pythonic 方法

> ID：13324916
> 
> 赞同：7
> 
> 时间：2012-11-10T18:36:59.070
> 
> 标签：python, csv

让我们有一个带有行和列标题的 CSV 表，例如：

```
, "Car", "Bike", "Boat", "Plane", "Shuttle"
"Red", 1, 7, 3, 0, 0
"Green", 5, 0, 0, 0, 0
"Blue", 1, 1, 4, 0, 1 
```

我想获取行和列标题，即：

```
col_headers = ["Car", "Bike", "Boat", "Plane", "Shuttle"]
row_headers = ["Red", "Green", "Blue"]
data = [[1, 7, 3, 0, 0],
        [5, 0, 0, 0, 0],
        [1, 1, 4, 0, 1]] 
```

当然我可以做类似的事情

```
import csv
with open("path/to/file.csv", "r") as f:
    csvraw = list(csv.reader(f))
col_headers = csvraw[1][1:]
row_headers = [row[0] for row in csvraw[1:]]
data = [row[1:] for row in csvraw[1:]] 
```

...但它看起来不够 Pythonic。

这种自然操作有没有更简洁的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:38:53.590

看看[`csv.DictReader`](http://docs.python.org/3/library/csv.html#csv.DictReader)。

> 如果省略 fieldnames 参数，则 csvfile 第一行中的值将用作字段名。

然后你就可以做`reader.fieldnames`。当然，这只会为您提供列标题。您仍然需要手动解析行标题。

但是，我认为您的原始解决方案非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-15T12:33:07.257

现在我看到我想要的是用[Pandas](http://pandas.pydata.org/)完成的最简单（也是最强大）的。

```
import pandas as pd
df = pd.read_csv('foo.csv', index_col=0) 
```

如果我愿意，很容易提取：

```
col_headers = list(df.columns)
row_headers = list(df.index) 
```

否则，在“原始” Python 中，我在问题中编写的方法似乎“足够好”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:17:41.417

我知道此解决方案为您提供了不同于请求的另一种输出格式，但它非常方便。这会将 csv 行读入字典：

```
reader = csv.reader(open(parameters_file), dialect)

keys = [key.lower() for key in reader.next()]
for line in reader:
    parameter = dict(zip(keys, cells)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-15T13:58:42.860

没有 3rd 方库（如果您可以接受来自`zip`操作的元组的结果）：

```
import csv

with open('your_csv_file') as fin:
    csvin = csv.reader(fin, skipinitialspace=True)
    col_header = next(csvin, [])[1:]
    row_header, data = zip(*((row[0], row[1:]) for row in csvin)) 
```

给你`col_header`,`row_header`和`data`:

```
['Bike', 'Boat', 'Plane', 'Shuttle']
('Red', 'Green', 'Blue')
(['1', '7', '3', '0', '0'], ['5', '0', '0', '0', '0'], ['1', '1', '4', '0', '1']) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-05T12:07:10.547

同意，熊猫也是我发现的最好的。我有兴趣阅读我的数据框的特定值。这是我所做的：

```
import pandas as pd
d=pd.read_csv(pathToFile+"easyEx.csv")
print(d)
print(d.index.values)
print(d.index.values[2])
print(d.columns.values)
print(d.columns.values[2])
print(pd.DataFrame(d,index=['Blue'],columns=['Boat'])+0.333) 
```

这就是它返回的内容：

```
 Car  Bike  Boat  Plane  Shuttle                                                                                                            
Red      1     7     3      0        0                                                                                                            
Green    5     0     0      0        0                                                                                                            
Blue     1     1     4      0        1                                                                                                            
['Red' 'Green' 'Blue']                                                                                                                            
Blue                                                                                                                                              
['Car' 'Bike' 'Boat' 'Plane' 'Shuttle']                                                                                                           
Boat                                                                                                                                              
      Boat                                                                                                                                        
Blue     4.333 
```

请注意，我可以用“索引”检查行名，用“列”检查列名。另请注意，我可以根据行名和列名读取“数据框”的特定元素，并且这些值仍然是数字，这就是我在最后一次打印中添加“+0.333”的原因。

我更改了数据文件，删除了第一行逗号后的引号字符（“”）和空格。这里有“easyEx.csv”文件：

```
Car,Bike,Boat,Plane,Shuttle
Red, 1, 7, 3, 0, 0
Green, 5, 0, 0, 0, 0
Blue, 1, 1, 4, 0, 1 
```

希望这可以帮助=）

# c++ - 如何处理赛车线程（C++；TinyThread++）？

> ID：13324918
> 
> 赞同：0
> 
> 时间：2012-11-10T18:37:22.203
> 
> 标签：c++, multithreading, locking, race-condition

这是主要代码的示例（“Library/stack.h”并不重要，但无论如何，它是我的上[一个问题中](https://stackoverflow.com/questions/13222210/variable-or-field-declared-void-in-header-file)包含的最后一个来源）：

```
#include <stdlib.h>
#include <time.h>

#include <iostream>
#include <tinythread.h>

#include "Library/stack.h"

using namespace std;
using namespace tthread;

#define BOULDERspd 100

// ========================================================================= //

struct Coord {
    int x, y;
};

int randOneIn (float n) {
    return ((int) (n * (rand() / (RAND_MAX + 1.0))));
}
int randOneIn (int n) {
    return ((int) ((float) n * (rand() / (RAND_MAX + 1.0))));
}

// ========================================================================= //

#include <windows.h>
void gotoxy (int column, int line) {
    if ((column >= 0) && (line >= 0)) {
        COORD coord;
        coord.X = column;
        coord.Y = line;
        SetConsoleCursorPosition(
            GetStdHandle( STD_OUTPUT_HANDLE ),
            coord
        );
    }
}

void gotoxy (Coord pos) {
    gotoxy(pos.x, pos.y);
}

// ========================================================================= //

void render (char image, Coord pos) {
    gotoxy(pos);
    cout << image;
}

void unrender (Coord pos) {
    gotoxy(pos);
    cout << ' ';
}

// ========================================================================= //

char randimage (void) {
    return (rand() % 132) + 123;
}

mutex xylock;

class Boulder {
    char avatar;
    Coord pos;

    public:
        Boulder (int inix) {
            pos.x = inix;
            pos.y = 0;

            avatar = randimage();
        };

        void fall (void) {

            unrender(pos);
            pos.y++;
            render(avatar, pos);

            Sleep(BOULDERspd);
        };

        void live (void) {
            do {
                fall();
            } while (y() < 20);
            die();
        };

        void die (void) {
            unrender(pos);
            pos.y = 0;
        };

        int x (void) { return pos.x; };
        int y (void) { return pos.y; };
};

// ========================================================================= //

class thrStack: public Stack<thread*> {
    public:
        thrStack (): Stack<thread*> () { };

        void pushNrun (thread* elem) {
            push(elem);
            top->core->joinable();
        }
};

void randBoulder (void* arg) {
    srand(time(NULL));
    Boulder boulder(rand() % 40);

    boulder.live();
}

void Boulders (void* arg) {
    srand(time(NULL));
    thrStack stack;

    do {
        stack.pushNrun(new thread (randBoulder, 0));
        Sleep(rand() % 300);
    } while(1);
}

// ========================================================================= //
// ========================================================================= //

int main() {
    thread raining (Boulders, 0);

    raining.join();
} 
```

我是多线程的新手，所以为了摆弄它，我正在尝试制作一个程序，让随机字符不断地从屏幕顶部掉下来，就好像在下雨一样 ASCII 符号。

但是，我注意到我的编码中有一个小（大）错误：

```
bool xylock = false;

class Boulder {
    char avatar;
    Coord pos;

    public:
        Boulder (int inix) {
            pos.x = inix;
            pos.y = 0;

            avatar = randimage();
        };

        void fall (void) {

            unrender(pos);
            pos.y++;
            render(avatar, pos);

            Sleep(BOULDERspd);
        };

        void live (void) {
            do {
                fall();
            } while (y() < 20);
            die();
        };

        void die (void) {
            unrender(pos);
            pos.y = 0;
        };

        int x (void) { return pos.x; };
        int y (void) { return pos.y; };
}; 
```

因为 fall() 函数使用了改变“全局光标”的 gotoxy，所以多次调用 gotoxy 会打乱程序的预期执行。如果您尝试按原样编译代码，您会得到不断切换位置并留下垃圾的掉落字母。

是否有任何方法可以使用或实现对这种情况和未来情况的锁定，就像 TinyThread 一样？一般来说，在 C++ 中实现锁的逻辑是什么？

* * *

编辑：修改 fall(); 没事吧，驯鹿？

```
 void fall (void) {
            lock_guard<mutex> guard(xylock);

            unrender(pos);
            pos.y++;
            render(avatar, pos);

            xylock.unlock();

            Sleep(BOULDERspd);
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:42:20.973

您可以使用 tinythread 库：

[http://tinythreadpp.bitsnbites.eu/doc/](http://tinythreadpp.bitsnbites.eu/doc/)

具体看`lock_guard`和`mutex`

> 多次调用 gotoxy 会打乱程序的预期执行。如果您尝试按原样编译代码，您会得到不断切换位置并留下垃圾的掉落字母。

创建一个`mutex`要同步的对象，然后在您希望线程安全的函数中`lock_guard`使用它创建一个本地对象。这`mutex`可以在多个地方使用，也可以使用`lock_guard`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:32:47.583

在这里，我创建了一个非常基本的线程示例，没有框架或类。如您所见，线程和同步不是 C++ 工作，而是操作系统工作！;-)

这里我创建了一个简单的线程函数，我调用了两次。线程写入相同的变量，但不能同时执行，所以必须保护它。在此示例中，我使用 CRITICAL_SECTION 对象通过一个线程锁定变量。如果一个线程将其锁定，则另一个线程无法访问它，必须等到它空闲。

仔细看看，我还保护了printf操作。如果你不这样做会发生什么？你会得到一个非常有趣的印记！找出原因，你就会知道线程和锁是如何工作的。:-)

```
#include <windows.h>
#include <stdlib.h>
#include <string>
#include <iostream>
#include <process.h>

//a global variable (just do do someting):
int g_ThreadCounter = 0;

//global variable to end the threads:
bool g_Run = true;
//do not use global variables, there are better solutions! I just did it here to 
//keep it simple and focus on the issue!

//a critical section object - something like a "soft-version" of a mutex to synchronize
//write access on variables
CRITICAL_SECTION critical;
//a thread function
unsigned  __stdcall threadFunc(void *pThreadNum)
{

    unsigned int iThreadNum = reinterpret_cast<unsigned int>(pThreadNum);

    do{
    //you need the critical section only when you change values:
    EnterCriticalSection(&critical);
        g_ThreadCounter++;

        printf("from thread: ");
        printf("%d", iThreadNum);
        printf(" counter = ");      
        printf("%d", g_ThreadCounter);
        printf("\n");
    LeaveCriticalSection(&critical);

    //sleep a secound
    Sleep (1000);
}while(g_Run);

_endthreadex(0);
return 0;
}

int main()
{
unsigned int ThreadID1 = 1;

unsigned int ThreadID2 = 2;
//initialize the critical section with spin count (can be very effective in case
//of short operation times, see msdn for more information)
if(!InitializeCriticalSectionAndSpinCount(&critical, 1000))
{
    //DO NOT START THE THREADS, YOU DON'T HAVE SYNCHRONISATION!!!
    printf("someting went wrong, press any key to exit");
    //do some error handling
    getchar();
    exit(-1);
}

//start the threads
HANDLE thHandle1 = (HANDLE)_beginthreadex(NULL, 0, &threadFunc, (void*) ThreadID1, 0, NULL);

HANDLE thHandle2 = (HANDLE)_beginthreadex(NULL, 0, &threadFunc, (void*) ThreadID2, 0, NULL);

if(thHandle1 == INVALID_HANDLE_VALUE || thHandle2 == INVALID_HANDLE_VALUE)
{
    printf("something went wrong, press any key to exit");
    //do some error handling
    getchar();
    exit(-1);
}
//the main thread sleeps while the other threads are working
Sleep(5000);

//set the stop variable
EnterCriticalSection(&critical);
    g_Run = false;
LeaveCriticalSection(&critical);

//wait for the thread; infinite means, you wait as long as the 
    //thread takes to finish
WaitForSingleObject(thHandle1, INFINITE);
CloseHandle(thHandle1);

WaitForSingleObject(thHandle2, INFINITE);
CloseHandle(thHandle2);

DeleteCriticalSection(&critical);

printf("press any key to exit");
getchar();

return 0;
} 
```

研究您正在使用的操作系统！有时总比过分关注框架和外来类要好。这可以解决很多问题！

# c# - Regedit 显示未使用 GetSubKeyNames() 列出的键

> ID：13324920
> 
> 赞同：2
> 
> 时间：2012-11-10T18:37:39.677
> 
> 标签：c#, registry, regedit

我已经检查了关于 SO 的其他一些回复，但据我所知，这与我得到的点击量不同。

当我打开 RegEdit 时，我可以看到一组键，但是当我使用例如从程序中列出它们时：

```
Registry.LocalMachine.OpenSubKey(@"SOFTWARE").GetSubKeyNames() 
```

其中一些失踪了。我认为这可能与访问权限有关，所以我也检查`.CurrentUser`了。在那里可以体验到相同的行为。只是没有列出一些子项。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:55:04.353

你的操作系统是 x64 的吗？如果是这种情况，对于“LocalMachine\Software”有两个不同的节点：x64 应用程序的正常和 x86 应用程序的 Wow6432Node。

演示上述内容的示例应用程序。

```
using System;
using Microsoft.Win32;

namespace ConsoleApplication1
{
  internal class Program
  {
    public static void Main()
    {
      String[] values = Registry.LocalMachine.OpenSubKey(@"SOFTWARE").GetSubKeyNames();
      foreach (String value in values)
                Console.WriteLine(value);
    }
  }
} 
```

这是在 x86 中构建控制台应用程序时我机器上的代码输出：

*Adobe
AGEIA Technologies
Alcohol Soft
Apple Computer, Inc.
Apple Inc.
Aureal
Avira
Azureus
BazisSoft
C07ft5Y
Canon
Citrix
...* 

这是在 x64 中构建控制台应用程序时我机器上的输出：

*7-Zip
AGEIA Technologies
Apple Computer, Inc.
Apple Inc.
ATI Technologies
Canon
Classes
Clients
...* 

如您所见，根据应用程序是 x86 还是 x64，输出会有很大差异。

编辑：之前在 StackOverflow 上提出了[类似的问题。](https://stackoverflow.com/questions/8986295/weird-behaviour-when-reading-registry-in-c-sharp)

# jquery - jquery 1.8 类选择器在 Firefox 中不起作用

> ID：13324922
> 
> 赞同：1
> 
> 时间：2012-11-10T18:37:47.897
> 
> 标签：jquery, class, firefox, jquery-selectors

我写了一个非常简单的类选择器，这样我就可以让 html 输入框只接受数字输入

```
$(".numericOnly").keypress(function (e) {
   if (e.keyCode == 13) return true;
   if (String.fromCharCode(e.keyCode).match(/[^0-9]/g)) 
      return false;     
}); 
```

然后，如果您有一个输入框，您只需将其指定为 class="numericOnly"，它将只接受数字输入。

keyCode 13 为回车键，防止函数拦截拦截。

它在 Chrome 和 IE 9 中运行良好，但在 Firefox 中却失败了。不知道为什么。没有抛出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:52:52.690

`keyCode`按下（或）的键的属性名称`charCode`因浏览器而异。尝试[`event.which`](http://api.jquery.com/event.which/)改用，这会为您标准化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T20:55:22.737

`keyCode`在 keydown 和 keyup 处理程序中设置。 `charCode`在按键处理程序中设置，并指示输入了哪个字符（这与按下哪个键不同，因为存在不同的键盘布局）。

# jquery - 如何在 JQuery 中处理匹配的选择器

> ID：13324924
> 
> 赞同：3
> 
> 时间：2012-11-10T18:37:50.830
> 
> 标签：jquery

我想这很简单，而且是某种范围界定问题——但我被困住了。在下面的代码中，我希望看到带有“foo！”的警报。或“酒吧！” 当我将鼠标悬停在 div 上时。相反，我看到了空内容。如何从我有 alert() 的位置处理与选择器匹配的当前元素？TIA。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Test Case</title>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1" />

    <!-- Tooltip classes -->
    <link rel="stylesheet" href="../src/tip-yellow/tip-yellow.css" type="text/css" />

    <!-- jQuery and the Poshy Tip plugin files -->
    <script type="text/javascript" src="includes/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="../src/jquery.poshytip.js"></script>

    <script type="text/javascript">
        //<![CDATA[
        $(function(){
            $("span[name='entity']").poshytip({
                className: 'tip-yellow',
                content: function(updateCallback) {
                            var title = $(this).attr('title');
                            alert(title);
                            updateCallback(title);
                          },
                showTimeout: 1,
                alignTo: 'target',
                alignX: 'center',
                offsetY: 5,
                allowTipHover: true
            });
        });
        //              
        //]]>
    </script>   
</head>

<body>
    <p><span name="entity" title="foo!">Hover for a tooltip 1</span></p>
    <p><span name="entity" title="bar!">Hover for a tooltip 2</span></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:36:21.667

您的选择使用`$(this).attr('title')`是正确的。但是，由于 poshytip 在内部使用了 title 属性，它似乎是在临时修改 title 属性。您可以通过在此处设置断点来查看此行为：`$(this)`引用跨度，但标题为空白。

当您在内容回调之外选择跨度时，标题就在那里 - 例如，从调试器使用`$("span").attr("title")`

由于 poshytip 的目的是为您提供增强的工具提示，因此这可能是意料之中的。事实上，如果你完全删除你的内容功能，你会看到正确的标题/工具提示弹出：

```
 $(function(){
        $("span[name='entity']").poshytip({
            className: 'tip-yellow',
            showTimeout: 1,
            alignTo: 'target',
            alignX: 'center',
            offsetY: 5,
            allowTipHover: true
        });
    }); 
```

指定内容方法对于计算标题很有用（例如，如果您想从内容返回一些其他值，工具提示将显示它）。

另外，updateCallback 主要用于异步更新工具提示：http: [//vadikom.com/demos/poshytip/#async-content](http://vadikom.com/demos/poshytip/#async-content)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:40:33.983

工具提示插件通常会删除标题值，因此浏览器默认显示也不会显示它们。在这个插件的情况下，它将原始数据存储在元素本身的数据中。快速浏览插件源代码显示它被存储为`title.poshytip`使用 jQuery`data()`方法

尝试

```
alert( $(this).data('title.poshytip' )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T19:31:15.220

我相信你错过了 poshytip 的简单性。当您说警报时，您是指文字 javascript 警报还是 poshytip 消息。因为如果你想要一个 poshytip 消息，你所要做的就是添加适当的类，即`.tip-darkgray`，然后调用它的 `.poshytip' 方法，它应该为你实现所有的处理程序。

例子：

```
<script type='text/javascript'>
  $(document).ready(function() {
    $("span[name='poshy']").poshytip();
  });
</script>

<span name="poshy" title="So Poshy"></span> 
```

另外，不要忘记将所有 jQuery 包装在 DOM Ready 中。

# python - 全局变量使用

> ID：13324928
> 
> 赞同：1
> 
> 时间：2012-11-10T18:38:08.927
> 
> 标签：python

我有一个基本问题，我在 xml 函数中将 xmlfile 声明为全局，我可以在另一个子例程中使用它而没有任何问题吗？子例程的顺序重要吗？

```
 def xml():

        global xmlfile
        file = open('config\\' + productLine + '.xml','r')
        xmlfile=file.read()
 def table():
            parsexml(xmlfile) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:48:19.413

编写函数的顺序无关紧要。的值`xmlfile`将由调用函数的顺序决定。

但是，通常最好避免将值重新分配给函数内部的全局变量——这会使分析函数的行为更加复杂。最好使用函数参数和/或返回值，（或者可能使用类并将变量设为类属性）：

```
def xml():
    with open('config\\' + productLine + '.xml','r') as f:
        return f.read()

def table():
     xmlfile = xml()
     parsexml(xmlfile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:48:17.993

首先，我完全同意其他关于避免全局变量的评论。您应该从重新设计开始以避免它们。但要回答你的问题：

子例程的定义顺序无关紧要，调用它们的顺序是：

```
>>> def using_func():
...   print a
... 
>>> using_func()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in using_func
NameError: global name 'a' is not defined
>>> def defining_func():
...   global a
...   a = 1
... 
>>> using_func()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in using_func
NameError: global name 'a' is not defined
>>> defining_func()
>>> using_func()
1 
```

# jquery - getJSON 跨域请求与搜索变量

> ID：13324929
> 
> 赞同：0
> 
> 时间：2012-11-10T18:38:15.167
> 
> 标签：jquery, json, variables, cross-domain

我正在尝试将字段值用作 JSON 查询变量，但使用变量没有任何作用。我试试这个：

```
var a='ptmedia';var c='2.90';var v='ver';var n='name';
$.getJSON('http://example.com?callback=?',function(d){
    var q=d.app.a.v;
    if(c<q){alert('Some text'+d.n+'some text');}
}); 
```

但我做错了什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:41:17.933

我认为这就是你想要的：

```
d.app[a][v] 
```

和：

```
d[n] 
```

# javascript - ReferenceError：左侧分配无效

> ID：13324930
> 
> 赞同：1
> 
> 时间：2012-11-10T18:38:19.160
> 
> 标签：javascript, jquery, fullcalendar

下一个代码有什么问题？它在 $dialogContent.dialog 里面

```
buttons: {
                       save : function() {

                          calEvent.start = new Date(startdateField+' '+starttimeField.val());  // 11/25/2012 15:00
                          calEvent.end = new Date(endField.val());  
                          if($('#script_all_stores_false').attr('checked')) { /*clearChildren(document.getElementById('days'));*/ frequency_as_dayField.val() = 99; }
                        // если не заполнено поле recurring_start, то заполнить его текущей датой начала события
                          if(recurring_startField.val()!='') calEvent.recurring_start = new Date(recurring_startField.val()); else calEvent.recurring_start = new Date(startdateField+' '+starttimeField.val());
                        // если не заполнено поле recurring_end, то заполнить его текущей датой + 1год (логика: уроки вряд ли держатся в расписании больше года, когда преподаватель определится до какого числа будут занятия с этой группой, он заполнит нужной датой)  
                          var startDate = new Date(startdateField+' '+starttimeField.val()); //calEvent.recurring_start;??
                            if(recurring_endField.val()!='') calEvent.recurring_end = new Date(recurring_endField.val());
                            else if(recurring_endField.val()=='' && $("#script_all_stores_true").is(":checked")/*&& recurring_startField.val()!=''*/) calEvent.recurring_end = new Date( startDate.setDate(startDate.getDate() + 365) );
                            calEvent.frequency_as_day = frequency_as_dayField.val();
var my_query_str = ''; 
                            $dialogContent.find("input[type='checkbox'][name='days']").each( function() { 
                                if(this.checked) { my_query_str += "&bookArray[]=" + 1; }
                                else { my_query_str += "&bookArray[]=" + 0; }
                            });

                          calEvent.days = my_query_str; 
                          calEvent.title = titleField.val();
                          calEvent.body = bodyField.val();
                          calEvent.teacher_id = teacherField.val();  
    ... 
```

萤火虫 说：

```
ReferenceError: invalid assignment left-hand side
[Break On This Error]   

...e').attr('checked')) { /*clearChildren(document.getElementById('days'));*/ frequ... 
```

如果我`frequency_as_dayField.val() = 99;`改为`var frequency_as_dayField = 99;`

萤火虫 说：

```
TypeError: frequency_as_dayField.val is not a function
[Break On This Error]   

calEvent.frequency_as_day = frequency_as_dayField.val(); 
```

我不擅长 javascript，对不起。请帮忙（

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T18:41:41.917

您需要将值传递给`.val()`，而不是为返回的任何值分配值。

```
if($('#script_all_stores_false').attr('checked')) {  
   /*clearChildren(document.getElementById('days'));*/ 
   frequency_as_dayField.val(99) /* = 99*/ ; 
         // good-------------^       ^-------------bad
} 
```

# java - 找到数字在 AP 中的所有此类三元组（从给定的一组数字）的数量的有效方法？

> ID：13324931
> 
> 赞同：1
> 
> 时间：2012-11-10T18:38:30.347
> 
> 标签：java, c++, c, math

> **可能重复：**
> [数组中 3 长度 AP 的最快算法计数](https://stackoverflow.com/questions/13240330/fastest-algorithm-count-number-of-3-length-ap-in-array)

我一直在研究 CodeChef 的 Nov12 挑战中的以下问题。我尝试使用基本公式来检查三个数字 a、b、c 是否在 AP 中，如果 cb=ba 即 2b=a+c，它们是。这是问题所在：

输入的第一行包含一个整数 N (3 ≤ N ≤ 100000)。然后下一行包含 N 个空格分隔的整数 A1、A2、...、AN，它们的值介于 1 和 30000（含）之间。

输出选择三元组的方法数，使得它们是等差数列的三个连续项。例子

输入：

10

3 5 3 6 3 4 10 4 5 2

输出：9

解释：

以下是选择三胞胎的9种方法

1 : (i, j, k) = (1, 3, 5), (Ai, Aj, Ak) = (3, 3, 3)

2 : (i, j, k) = (1, 6, 9), (Ai, Aj, Ak) = (3, 4, 5)

3 : (i, j, k) = (1, 8, 9), (Ai, Aj, Ak) = (3, 4, 5)

4 : (i, j, k) = (3, 6, 9), (Ai, Aj, Ak) = (3, 4, 5)

5 : (i, j, k) = (3, 8, 9), (Ai, Aj, Ak) = (3, 4, 5)

6 : (i, j, k) = (4, 6, 10), (Ai, Aj, Ak) = (6, 4, 2)

7 : (i, j, k) = (4, 8, 10), (Ai, Aj, Ak) = (6, 4, 2)

8 : (i, j, k) = (5, 6, 9), (Ai, Aj, Ak) = (3, 4, 5)

我使用的代码是

```
#include<stdio.h>
int scan() {
    int p=0;
    char c;
    c=getchar_unlocked();
    while(c<'0' || c>'9')
        c=getchar_unlocked();
    while(c>='0' && c<='9'){
        p=(p<<3)+(p<<1)+c-'0';
        c=getchar_unlocked();
    }
    return(p);
}
int main() {
    int N, i, j, k, count=0;
    N=scan();
    int a[N];
    for(i=0;i<N;i++)
        a[i]=scan();
    for(i=0;i<N-2;i++)
        for(j=i+1;j<N-1;j++)
            for(k=j+1;k<N;k++)
                if(a[k]+a[i]==2*a[j])
                    ++count;
    printf("%d\n", count);
    return 0;
 } 
```

正如您可以看到对变量的约束，很明显我们需要快速高效的算法。为了安全起见，我什至使用了更快的 I/O，但程序仍然超时。很明显，该算法效率不高，因为我使用了三个嵌套循环。另一种减少k's数量的方法是在找到匹配项后立即打破k'循环，然后我会添加一个继续；低于 ++count 并且可以正常工作，但仍然没有问题需要的那么有效。

请告诉我一些快速算法来执行此操作，或者我是否可以在这里学习一些数学定理以更快地找到 AP 三元组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:06:00.780

我认为您不需要数组。

从方程中求解 b `2b=a+c`，结果为：

```
b = (a + c) / 2 
```

使用 4 个变量： `a, b, c, and counter`.

1.  `a, b, c`通过读取 3 个值进行初始化。
2.  如果 (a+c)/2 == b，则递增计数器，并打印 a,b,c。
3.  移位变量：a = b，b = c。
4.  而 cin >> c 做：
5.  如果 (a+c)/2 == b，则递增计数器并打印 a,b,c。
6.  移位变量：a = b，b = c；
7.  结束。
8.  计数器的输出值。

对我来说看起来非常有效。

# javascript - 当函数在另一页时调用一个函数在一个页面中

> ID：13324932
> 
> 赞同：2
> 
> 时间：2012-11-10T18:38:31.913
> 
> 标签：javascript, function, button, linker

在第一页：

```
<button type="button" onclick="myFunction()">click</button> 
```

然后在另一个页面上：

```
myFunction() {
    alert("working");
}; 
```

这是接收页面。

*   所有基本标签

```
<script>
    function alert() {
        alert("The Link Has Been Successful");
    }
</script> 
```

问题是：如何调用另一个页面上的另一个函数来提醒该页面`<button onclick="????">`？

```
<body>
    <button onclick="???" type="button">Alert on the other page</button>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:42:24.043

> 当函数在另一页时调用一个函数在一个页面中

这是不可能的。say 的定义`function`必须出现在当前页面上才能执行。

* * *

标准方法是将[您的函数提取到它自己的（或全局）JavaScript 文件](https://www.google.com/search?q=creating%20javascript%20file)中。然后在需要使用它的页面上引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:04:15.307

您可以将所有全局函数等放在 .js 文本文件中，然后在所有需要调用这些例程的页面上，您应该像这样声明它......

```
 <script src="myglobals.js" type="text/javascript"></script> 
```

现在您可以访问您的全局函数和变量。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:05:02.610

您不需要将 2 个页面链接在一起，您只需使用：将它们链接到您的 index.html：然后 js 将为您完成所有工作！

希望这可以帮助！

LucaSpeedStack

# android - 另一个适配器内的 Android 列表适配器

> ID：13324933
> 
> 赞同：1
> 
> 时间：2012-11-10T18:38:36.790
> 
> 标签：android, list, android-arrayadapter

所以我的想法是有一个列表而不是其中的另一个列表。android 分组不是我正在寻找的解决方案。我不希望他们分组。

我遇到的问题是内存泄漏和各种疯狂。就像适配器多次遍历列表一样。下面是我的适配器。

```
public class LotteryAdapter extends ArrayAdapter<LotteryBall> {

Context context;

public LotteryAdapter(Context context, int resourceId,
        List<LotteryBall> items) {
    super(context, resourceId, items);
    this.context = context;
}

/*private view holder class*/
private class ViewHolder {
    LinearLayout ballpanel;
    LinearLayout jackpotpanel;
    TextView txtTitle;
    TextView txtBall;
    TextView txtJackpot;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    LotteryBall rowItem = getItem(position);
    LayoutInflater mInflater = (LayoutInflater) context
            .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.mainrow, null);           
        convertView.setBackgroundResource(R.layout.greenbackground);    
        holder = new ViewHolder();     
        holder.txtTitle= (TextView) convertView.findViewById(R.id.LotteryTitle);           
        holder.ballpanel = (LinearLayout) convertView.findViewById(R.id.balllayout);
        holder.jackpotpanel = (LinearLayout) convertView.findViewById(R.id.jackpotlayout);
        convertView.setTag(holder);
    } else
        holder = (ViewHolder) convertView.getTag();

    holder.txtTitle.setText(rowItem.title);
    for(int i = 0;i < rowItem.balls.size();i++) 
      {
        Ball ball = rowItem.balls.get(i);
        if(ball != null){
            TextView tv = new TextView(context);  //<--problem with the context its causing the adapter to go crazy 
            tv.setText(ball.number);
            tv.setTextColor(Color.BLACK);
            tv.setBackgroundResource(R.drawable.yellowball);
            holder.ballpanel.addView(tv);

        }
      }
    //if jackpot
    TextView tvjackpot = new TextView(context);
    tvjackpot.setText("Current Jackpot: " + rowItem.amount);
    TextView tvnextdrawing = new TextView(context);
    tvjackpot.setText("Next Drawing: " + rowItem.nextdrawing);
    TextView tvpreviousjackpot = new TextView(context);
    tvjackpot.setText("Previous Jackpot: " + rowItem.lastamount);

    View ruler = new View(context); 
    ruler.setBackgroundColor(Color.WHITE);
    holder.jackpotpanel.addView(tvjackpot);
    holder.jackpotpanel.addView(ruler);
    holder.jackpotpanel.addView(tvnextdrawing);
    //holder.ballpanel.addView(ruler);
    holder.jackpotpanel.addView(tvpreviousjackpot);
    return convertView;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:43:55.177

**改写**

看起来您正在创建新的 TextView 球，而不管现有的球。您应该查看当前存在的数量，然后添加或删除差异：

```
// Loop through the existing balls to update their text

if(holder.ballpanel.getChildCount() > rowItem.balls.size()) {
    // Remove extra balls
}
else if(holder.ballpanel.getChildCount() < rowItem.balls.size()) {
    // Add new balls
} 
```

# batch-file - GNU 样式配置批处理文件问题

> ID：13324934
> 
> 赞同：1
> 
> 时间：2012-11-10T18:38:50.720
> 
> 标签：batch-file, configure

我正在尝试在批处理文件中为 Windows 创建一个类似 GNU 的配置脚本。到目前为止，它似乎工作正常，除了取决于订单选项被忽略，特别是使用“--with-smtube”选项时，它有时会获取路径，但再次取决于订单会导致它导致：

```
test.cmd --enable-portable --with-smtube=C:\svn\smtube

configure: error: unrecognized option: `C:\svn\smtube'
Try `--with-smtube --help' for more information 
```

（应该也说 Try `test.cmd --help）

我从另一个我找到但没有成功的脚本中复制了结构。参数的顺序无关紧要，参数可以省略（全部或部分）。有人可以引导我朝着正确的方向前进吗？

该脚本用于 Qt 程序，它使用命令提示符作为 shell，而不是 msys 或 cygwin 或类似的东西。

这是我到目前为止所拥有的：[http ://redxii.users.sourceforge.net/test.cmd](http://redxii.users.sourceforge.net/test.cmd)

# python - Python 的 BeautifulSoup 作为 Web 应用程序？

> ID：13324937
> 
> 赞同：2
> 
> 时间：2012-11-10T18:38:54.447
> 
> 标签：python, html, web-applications, web-scraping, urllib2

我使用 URLLIB 和 BeautifulSoup 编写了一个相当复杂的脚本，昨晚我想知道是否有任何方法可以产生与 Web 应用程序相同的结果。

我不是要教程，但是有人可以指出我需要如何/什么熟练程度来编写一个应用程序，该应用程序可以让某人输入抓取标准和 URL，并输出正确的源，所有这些都在一个网页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T19:02:54.697

对于基本的单页 Web 应用程序，我建议将您现有的代码集成到可用的 Python Web 微框架之一中。尝试[Flask](http://flask.pocoo.org/)启动；这个框架是轻量级的，看起来非常适合你的用例（另一个选择是瓶子，金字塔和 django 用于更大的应用程序）。这些框架的教程应该足以让您走上正轨。

# c# - c#中的浏览器事件

> ID：13324938
> 
> 赞同：0
> 
> 时间：2012-11-10T18:38:57.600
> 
> 标签：c#, browser, winapp

我将此事件用于 c# win 应用程序中的 webbrowser。

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    //do something
} 
```

我可以在文档完成时使用此事件。我想知道在此之前是否还有其他活动可用。我的意思是加载页面的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:42:31.463

我认为您应该[在 msdn 上](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)查看所有者的文档。我相信这`"Navigating"`就是您正在寻找的事件。[这](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigating.aspx)是相关的文件。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:42:47.260

[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser_events.aspx)有 msdn 文档。

我认为这个事件是`Navigating`。

# jquery - jquery 显示/隐藏

> ID：13324939
> 
> 赞同：1
> 
> 时间：2012-11-10T18:39:15.463
> 
> 标签：jquery

我对 JavaScript 或 jQuery 不太擅长，但我试图在将鼠标悬停在`<div>`元素上时显示图像。问题是它也发生在其他人身上。

```
$(document).ready(function () {

    $("#event .event").hover(function () {
        $(".event img").show("slow");
    },
    $(".event img").mouseout(function () {
        $(".event img").hide("slow");
    }));

}); 
```

html代码：

```
<div id="event">
    <div class="event">
         <h4>name1</h4>

        <p>some text1</p>
        <img style='position:relative; display:none;' src='img1' alt='' />
    </div>
    <div class="event">
         <h4>name2</h4>

        <p>some text2</p>
        <img style='position:relative; display:none;' src='img2' alt='' />
    </div>
</div> 
```

但是图像会同时出现，如果我有五个，或者所有五个..有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:46:16.780

函数的第二个参数`$`经常用于定义上下文。这意味着，您的选择器将相对于特定元素或选择器使用。

```
$(".event") // finds all .event elements
$(".event", this) // finds all .event elements within 'this' 
```

考虑到这一点，我们可以修改您的代码以查看`.event`当前正在输入或存在的元素以找到合适的图像：

```
​$("#event .event").on({
    mouseenter: function(){
        $("img", this).show();
    },
    mouseleave: function(){
        $("img", this).hide();
    }
});​​​ 
```

这将一些逻辑绑定到与选择器匹配的每个元素`#event .event`。这些中的每一个都将有一个绑定到它们的`mouseenter`和`mouseleave`事件的处理程序。每当您悬停与选择器匹配的元素之一时，我们都会使用`this`关键字引用该特定元素。

如果您输入`#event .event`页面上的第一个元素，则`this`指该元素。同样，如果您退出该元素，`this`则表示该元素正在退出。回想一下这个响应的第一点，这意味着`$("img", this)`将针对元素中的每个图像引发`mouseenter`or`mouseleave`事件开始。

此外，请仔细检查您对`.hover()`;的使用。这个方法有两个参数，函数，分别在鼠标进入和鼠标离开时调用：

```
$("#event .event").hover( showImages, hideImages );

function showImages () {
    $("img", this).show();
}

function hideImages () {
    $("img", this).hide();
} 
```

`.hover`或者您可以将它们作为匿名函数直接放在方法中：

```
$("#event .event").hover(
    function(){ $("img", this).show(); }, 
    function(){ $("img", this).hide(); }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:25:22.317

尝试这个。IMO 这个解决方案更容易理解。

```
$(document).ready(function () {
    $("#event .event").hover(function () {
        $(this).find('img').show();
    }, function(){
       $(this).find('img').hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:42:26.503

您正在隐藏和显示所有图像，您需要使用`this`关键字仅定位当前元素，而不是全部，这是使用切换的另一个更简单的解决方案：

```
$(document).ready(function(){
    $("#event .event").on('mouseenter mouseleave', function() {
            $('img', this).toggle(e.type=='mouseenter');
    });
}); 
```

# assembly - QTSimp MIPS 程序帮助。从 ascii 字符串转换为整数时的程序错误

> ID：13324941
> 
> 赞同：0
> 
> 时间：2012-11-10T18:39:25.977
> 
> 标签：assembly, mips

我正在开发一个 mips 程序，将数字从 ascii 字符串转换为整数，其参数应该接受正整数和负整数十进制字符串。我知道这是一个很常见的任务，但我无法在线解决我的问题。我能够得到一些提示，但在尝试运行程序时仍然收到错误。

这是我此时的代码：

```
main:    # convert string to integer
li $t6, 0x00    # $t6 = 0
li $t7, 0x09    # $t7 = 9
li $v0, 0x00    # initialize $v0 = 0
move $t0, $a0   # $t0 = pointer to string
lb $t1, ($t0)   # load $t1 = digit character

loop:
blt $t1, $t6, Done  # char < 0
bgt $t1, $t7, Done  # char > 9
subu $t1, $t1, $t6   # convert char to int
mul $v0, $v0, 10    # multiply by 10
add $v0, $v0, $t1   # $v0 = $v0 * 10 + digit
addiu $t0, $t0, 1   # point to next char
lb $t1, ($t0)        # load $t1 = next digit
bne $t1, $0, loop   # repeat if not end of string
jr $ra   # return integer

Done:          #exit program if string not a number
li $v0, -1      # return -1 in $v0
jr $ra 
```

我在尝试运行它时遇到大量错误，我只是不知道为什么。这是我第一次用mips写，所以我没有感觉。有小费吗？谢谢！

我确实修复了我能理解的错误。我所在的地区没有助教，也没有可用的导师。如果可能的话，我真的很想帮助理解这一点。我希望得到一些建设性的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:13:27.740

您提供的代码尝试将无符号（正）整数从 asciiz 缓冲区转换为整数。它失败了，因为您为数字“0”和“9”提供了错误的常量。ASCII 表中的“0”使用代码 0x30，“9”使用代码 0x39，或者仅使用“0”和“9”来加载这些立即数。

因此，要修复您的程序，您应该使用：

```
li $t6, '0'    # $t6 = 0x30
li $t7, '9'    # $t7 = 0x39 
```

要允许例程正确解析负整数，您需要：

*   读取第一个输入字符以查看它是否是减号“-”，可能会将比较结果设置在某个未使用的寄存器中。如果是负数，将指针移动到下一个字符
*   现在继续像你一样解析字符串，除了你必须考虑数字是否为负。如果数字是负数而不是发出`$v0 = $v0 * 10 + digit`，您应该发出`$v0 = $v0 * 10 - digit`

# matlab - 在 MATLAB 中为结构体数组的字段赋值

> ID：13324942
> 
> 赞同：2
> 
> 时间：2012-11-10T18:39:37.503
> 
> 标签：matlab

我想替换结构数组中字段的值。例如，我想在以下构造中将所有 1 替换为 3。

```
a(1).b = 1;
a(2).b = 2;
a(3).b = 1;

a([a.b] == 1).b = 3; % This doesn't work and spits out:
% "Insufficient outputs from right hand side to satisfy comma separated
% list expansion on left hand side.  Missing [] are the most likely cause." 
```

有一个简单的语法吗？对于这种简单的操作，我想避免丑陋的 for 循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T22:24:32.497

归功于@Slayton，但实际上您也可以使用[deal](http://www.mathworks.nl/help/matlab/ref/deal.html)来分配值：

```
[a([a.b]==1).b]=deal(3) 
```

所以分解：

```
[a.b] 
```

检索`b`数组的所有字段`a`并将此[逗号分隔列表](http://www.mathworks.nl/help/matlab/matlab_prog/comma-separated-lists.html#br2js35-4)放入数组中。

```
a([a.b]==1) 
```

使用逻辑索引仅索引`a`满足约束的元素。随后，上面的完整命令`3`根据[this](http://www.mathworks.nl/help/matlab/matlab_prog/comma-separated-lists.html#br2js35-8)将值分配给生成的逗号分隔列表的所有元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:15:48.807

`cell`您可以使用符号检索数组中每个结构的字段值。

```
bVals = {a.b};
bVals = cell2mat( bVals ); 
```

AFAIK，你不能做同样的事情来将值插入到结构数组中。您必须使用循环。

# php - 如何在php中翻转适合水平和垂直曲线的文本？

> ID：13324947
> 
> 赞同：0
> 
> 时间：2012-11-10T18:39:55.400
> 
> 标签：php, flip

我有一些适合曲线的文本，但文本被翻转。我无法将其作为图像翻转，因为它是为适应曲线而设计的。

我必须这样做，因为我需要生成一个带有一些文本的图像，并且文本应该面向我。

这就是我所拥有的：

![在此处输入图像描述](../Images/6c1c91bb32df8389fce17127b1812420.png)

# objective-c - UITableView 上的 UISearchBarDelegate 与部分问题

> ID：13324949
> 
> 赞同：0
> 
> 时间：2012-11-10T18:40:15.840
> 
> 标签：objective-c, uitableview, uisearchbar, uisearchbardelegate

我在我的 UITableView 上实现 UISearchBarDelegate 时遇到问题，每次我尝试在 UITableView 中搜索某些内容时，它要么不显示所需的结果，要么导致应用程序崩溃并显示错误消息：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]”

这是我的头文件里面：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UISearchDisplayDelegate, UISearchBarDelegate>
{
    UITableView *mainTableView;

    NSMutableArray *contentsList;
    NSMutableArray *searchResults;
    NSString *savedSearchTerm;

    NSMutableArray *ivSectionKeys;
    NSMutableDictionary *ivSectionContents;
}

@property (nonatomic, retain) IBOutlet UITableView *mainTableView;
@property (nonatomic, retain) NSMutableArray *contentsList;
@property (nonatomic, retain) NSMutableArray *searchResults;
@property (nonatomic, copy) NSString *savedSearchTerm;

@property (nonatomic, retain) NSMutableArray *sectionKeys;
@property (nonatomic, retain) NSMutableDictionary *sectionContents;

- (void)handleSearchForTerm:(NSString *)searchTerm;

@end 
```

虽然这是在我的实现文件中：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize mainTableView;
@synthesize contentsList;
@synthesize searchResults;
@synthesize savedSearchTerm;

@synthesize sectionKeys = ivSectionKeys;
@synthesize sectionContents = ivSectionContents;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSMutableArray *keys = [[NSMutableArray alloc] init];
    NSMutableDictionary *contents = [[NSMutableDictionary alloc] init];

    NSString *colorKey = @"Colors";
    NSString *clothingKey = @"Clothing";
    NSString *miscKey = @"Misc";

    [contents setObject:[NSArray arrayWithObjects:@"Red", @"Blue", nil] forKey:colorKey];
    [contents setObject:[NSArray arrayWithObjects:@"Pants", @"Shirt", @"Socks", nil] forKey:clothingKey];
    [contents setObject:[NSArray arrayWithObjects:@"Wankle Rotary Engine", nil] forKey:miscKey];

    [keys addObject:clothingKey];
    [keys addObject:miscKey];
    [keys addObject:colorKey];

    self.sectionKeys = keys;
    self.sectionContents = contents;

    // Restore search term
    if (self.savedSearchTerm)
    {
        self.searchDisplayController.searchBar.text = self.savedSearchTerm;
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];

    // Save the state of the search UI so that it can be restored if the view is re-created.
    self.savedSearchTerm = self.searchDisplayController.searchBar.text;

    self.searchResults = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self.mainTableView reloadData];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)handleSearchForTerm:(NSString *)searchTerm
{
    self.savedSearchTerm = searchTerm;

    if (self.searchResults == nil)
    {
        NSMutableArray *array = [[NSMutableArray alloc] init];
        self.searchResults = array;
        array = nil;
    }

    [self.searchResults removeAllObjects];

    if ([self.savedSearchTerm length] != 0)
    {
        for (NSString *currentString in self.sectionContents)
        {
            if ([currentString rangeOfString:searchTerm options:NSCaseInsensitiveSearch].location != NSNotFound)
            {
                [self.searchResults addObject:currentString];
            }
        }
    }
}

#pragma mark -
#pragma mark UITableViewDataSource Methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSInteger sections = [self.sectionKeys count];

    return sections;
}

- (NSString *)tableView:(UITableView *)tableView
titleForHeaderInSection:(NSInteger)section
{
    NSString *key = [self.sectionKeys objectAtIndex:section];

    return key;
}

- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section
{
    NSString *key = [self.sectionKeys objectAtIndex:section];
    NSArray *contents = [self.sectionContents objectForKey:key];

    NSInteger rows;

    if (tableView == [[self searchDisplayController] searchResultsTableView])
        rows = [self.searchResults count];
    else
        rows = [contents count];

    NSLog(@"rows is: %d", rows);

    return rows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *key = [self.sectionKeys objectAtIndex:indexPath.section];
    NSArray *contents = [self.sectionContents objectForKey:key];
    NSString *contentForThisRow = [contents objectAtIndex:indexPath.row];

    if (tableView == [self.searchDisplayController searchResultsTableView])
        contentForThisRow = [self.searchResults objectAtIndex:indexPath.row];
    else
        contentForThisRow = [contents objectAtIndex:indexPath.row];

    static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = contentForThisRow;

    return cell;
}

#pragma mark -
#pragma mark UITableViewDelegate Methods

- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

#pragma mark -
#pragma mark UISearchDisplayController Delegate Methods

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString
{
    [self handleSearchForTerm:searchString];

    // Return YES to cause the search result table view to be reloaded.

    return YES;
}

- (void)searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller
{
    self.savedSearchTerm = nil;

    [self.mainTableView reloadData];
}

@end 
```

我认为我的问题在我的 for 循环中，但我不太确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:17:08.380

您需要更新所有表视图数据源和委托方法来处理这两个表（您只在某些情况下这样做）：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSInteger sections = [self.sectionKeys count];

    return sections;
} 
```

应该：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (tableView == self.tableView) {
        NSInteger sections = [self.sectionKeys count];

        return sections;
    } else { // assume it's the search table
        // replace this with the actual result
        return numberOfSectionsForSearchTable;
    }
} 
```

# c - c语言中的多线程问题

> ID：13324951
> 
> 赞同：2
> 
> 时间：2012-11-10T18:40:29.087
> 
> 标签：c, multithreading

我正在尝试用 c 编写一个程序，该程序使用线程打印出当前工作目录的内容。当前打印了正确数量的文件，但是，有些文件会重复多次。每次我运行它时，哪些文件重复以及多少次似乎是随机的。我尝试在我认为是关键部分的地方使用互斥锁，但没有成功。

```
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

struct arg_struct
{
    struct dirent *current;
    struct stat buf;
};

void * mybackup (void *arguments)
{
    pthread_mutex_lock( &mutex );
    struct arg_struct *args = arguments;
    printf( "[THREAD %u] ", (unsigned int)pthread_self());
    printf( "%s ", args->current->d_name );
    printf( "(%lld bytes)\n", (long long) args->buf.st_size );
    total_bytes += args->buf.st_size;
    pthread_mutex_unlock( &mutex );
    return NULL;
}

int main (int argc, char **argv)
{
    if (argc == 1) //For part 1, when no cmd line argument is given
    {
        int children = 0;
        int thread, i;
        pthread_t tid[100];
        char * current_path = ".";
        DIR * dir = opendir((char*)current_path); //Opens the current directory
        if (dir == NULL)  //Detects failure to open directory
        {
            perror("opendir() Failed");
            return EXIT_FAILURE;
        }

        struct dirent *current;
        int rc = 0;

        while ((current = readdir(dir)) != NULL)
        {
            struct stat buf;
            char new[10000]; //Used to create the complete path name

            //Next few lines create the complete path name required for Stat()
            strcpy(new, current_path);
            strcat(new, "/");
            strcat(new, (char*)current->d_name);
            rc = stat(new, &buf);
            //rc = stat(current -> d_name, &buf);
            if (rc < 0) //Detects stat() failure
            {
                perror("stat() Failed");
                return 1;
            }
            else
            {
                if (S_ISREG(buf.st_mode)) //If directory entry is a regular file
                {
                    struct arg_struct args;
                    args.current = current;
                    args.buf = buf;
                    thread = pthread_create(&tid[children], NULL, mybackup, (void *)&args);
                    if ( thread != 0 )
                    {
                        perror( "MAIN: Could not create child thread" );
                    }
                    children++;
                }
            }
        }

        for (i = 0; i < children; i++)
        {
            pthread_join(tid[i], NULL);
        }
        printf("Total bytes: %lld\n", total_bytes);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T18:44:23.727

```
{
  struct arg_struct args;
  ...
  thread = pthread_create(&tid[children], NULL, mybackup, (void *)&args); 
```

这不可能。您传递给线程函数的（基于堆栈的）对象很可能在创建的线程有机会对其进行任何操作之前被覆盖。

您将需要`malloc`该结构（并处理`free`ing），或使用足够大的此类结构的数组（在堆栈或静态上），以便您可以为每个线程分配一个。

实际上，仅分配该结构是不够的，您不能将其`dirent* current`作为指针传递 - 您需要将所需的数据从它复制到您的每个线程结构中，或者可能`readdir_r`改用（仔细阅读手册页中的示例）。

# javascript - 反序列化 JSON 日期无时区

> ID：13324955
> 
> 赞同：6
> 
> 时间：2012-11-10T18:40:43.277
> 
> 标签：javascript, asp.net-mvc, json, datetime

从昨天开始，我有一个问题让我很头疼，不知道如何处理它。

*   **我的数据库中有一个包含以下值的日期字段：**

![在此处输入图像描述](../Images/7051b33217d4bb9e16af5175dcad7d55.png)

*   **然后我的应用程序获取值并将其发送到我的网络表单。**（价值还是一样的 :) 没关系！！

![在此处输入图像描述](../Images/ad41f14a4da1f90f7f06127058445f11.png)

*   **在客户端，我使用 javascript 警报中断以查看来自 JSON**的值（值仍然相同:) 很好！

![在此处输入图像描述](../Images/89e9a62410305e2505de557151eae939.png)

警报客户端的代码是这样的：

```
// transaction json model
var jsonTransaction = @(Html.Raw(Json.Encode(this.Model.Transaction))); 
alert(new Date(parseInt(jsonTransaction.Date.substr(6)))); 
```

*   **现在，当我将值发送回服务器时，这就是我得到的**

![在此处输入图像描述](../Images/fe3d72328e6acf566bb96081a37fcf77.png)

*   **最后在对 JSON 进行反序列化之后，我的日期时间是错误的！！而不是第 7 天，现在是第 8 天？？？？？？？**

![在此处输入图像描述](../Images/ed7596671ce26b14ae88d40e9015822e.png)

这是反序列化的代码：

```
public JsonResult SaveBill(string jsonTransaction, string jsonTranDetails)
{
    _appState = this.AppState;
    JsonResult returnVal = returnVal = Json(
       new { Success = true }
    );

var transaction = JsonConvert.DeserializeObject<BillTransaction>(jsonTransaction, new JsonSerializerSettings() { NullValueHandling = NullValueHandling.Ignore }); 
```

关于如何用日期解决这个问题的任何线索，我应该得到相同的日期，因为我没有改变任何东西。希望有人可以指导我解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T20:06:29.427

Java 脚本在将日期解析为 currentdate = new Date(123232) 时使用通用时间，因此当您将日期发送给客户端时，请将其转换为 ISO 日期，例如确保日期为 UTC 格式，然后再将其转换为 strong 。

```
return String.Format("{0:yyyy-MM-ddTHH:mm:ss.fffZ}", dt); 
```

顺便说一句，我已经创建了 JSON Converted 以覆盖任何日期序列化到客户端以使用上述功能。

# java - 在应用外使用电话号码？

> ID：13324956
> 
> 赞同：0
> 
> 时间：2012-11-10T18:40:46.190
> 
> 标签：java, android, phone-number

我不知道这是否可能，但在我的应用程序中，我得到了一个显示电话号码的活动（从网络上检索）。我可以将此号码发送到android的主要手机应用程序吗？例如调用它或保存它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:11:41.563

您可以创建一个`tel:...` `Uri`，其中`...`替换为您的电话号码，然后将其`Uri`与`ACTION_DIAL`or一起使用`ACTION_CALL`。例如：

```
package com.commonsware.android.dialer;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class DialerDemo extends Activity {
  @Override
  public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
  }

  public void dial(View v) {
    EditText number=(EditText)findViewById(R.id.number);
    String toDial="tel:"+number.getText().toString();

    startActivity(new Intent(Intent.ACTION_DIAL, Uri.parse(toDial)));
  }
} 
```

上面显示的代码来自[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Phone/Dialer)。

# macos - MAC Bootcamp Windows 8：Visual Studio 2012 在尝试运行 Windows 应用程序模拟器时崩溃

> ID：13324964
> 
> 赞同：1
> 
> 时间：2012-11-10T18:41:30.893
> 
> 标签：macos, visual-studio-2012, simulator, windows-applications, bootcamp

我目前在 mac、windows 8、visual studio 2012 上运行 bootcamp。每当我运行应用程序模拟器时，它都会崩溃。有什么问题，我将如何解决这个问题？

这是崩溃的屏幕截图。当我按下运行按钮时它就崩溃了。
![在此处输入图像描述](../Images/a28623a6944ac7a3cb2baaed0464e156.png)

# java - 在 JSplitPane 中动态改变 setDividerSize 的大小

> ID：13324970
> 
> 赞同：0
> 
> 时间：2012-11-10T18:41:45.937
> 
> 标签：java, swing, awt

我正在尝试做问题的标题。我还没有想出办法来做到这一点。发生的事情是我输入的数值被更改为分配给我分配的变量的 int 值的值。我正在使用 textField 框来更改 JSplitPane 的 setDividerSize 属性的大小。也就是说，int newSize = 20 //默认的分隔线大小

```
jSplitPane.setDividerSize(newSize); //using the newSize variable

textField1.addActionListener (new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                int newSize1 = new Integer(textField1.getText());
                textField1.setText(new Integer(newSize).toString());
            }
        }); //method where I am trying to assign a new value to newSize to change
              the width of the divider 
```

如果我输入“5”，我会在 textField 框中得到“20”。

我试过这个：

```
newSize.setText(new Integer(textField1).toString()); 
```

但我得到一个错误：

```
cannot find symbol
symbol  : constructor Integer(javax.swing.JTextField)
location: class java.lang.Integer 
```

在网豆中。

有人可以帮帮我吗？我会很感激。如果这还不够代码，请告诉我，我将编辑原始帖子以包含它。谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T18:48:05.697

```
int newSize1 = new Integer(textField1.getText());
textField1.setText(new Integer(newSize).toString()); 
```

请注意，在此代码片段中，您正在从文本字段中读取值，然后将文本替换为另一个值 ( `newSize`vs `newSize1`)。但是你从来没有在`JSplitPane`.

查看您发布的其余代码，我猜您尝试更新`newSize`变量的值并希望这将更新`JSplitPane`. 但是改变`newSize`变量的值对`JSplitPane`. 您应该`jSplitPane.setDividerSize`使用从文本字段中读取的值调用

# sql - SQL Developer 帮助缺少逗号错误

> ID：13324978
> 
> 赞同：1
> 
> 时间：2012-11-10T18:42:39.140
> 
> 标签：sql, oracle11g

我正在 Oracle 中创建一个表。

在执行以下插入时，我不断收到缺少逗号的错误，但我看到的内容中没有缺少逗号

```
INSERT INTO driver 
  (employee_no, first_name, last_name, ni_no, telephone, hazardous_goods)
VALUES 
  (122085,'Norris','Vasyutichev','EE 91 44 59 G',01809 7872896,07610 2265827,'Y'); 
```

即使

```
INSERT INTO driver 
  (first_name, last_name, ni_no, hazardous_goods)
VALUES
  ('Norris','Vasyutichev','EE914459G','Y'); 
```

我收到缺少的逗号错误

> *命令行错误：27 列：86
> 错误报告：
> SQL 错误：ORA-00917：缺少逗号
> 00917。00000 -“缺少逗号”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:46:09.413

试试这个：

```
INSERT INTO driver 
  (employee_no, first_name, last_name, ni_no, telephone, hazardous_goods)
VALUES 
  (122085,'Norris','Vasyutichev','EE 91 44 59 G','01809 7872896, 07610 2265827','Y'); 
```

此外，您似乎正在尝试使用逗号作为分隔符来存储多个电话号码。您应该尽量避免这种情况，而是创建一个名为employeePhoneNumbers 的新表。像这样的东西：

```
CREATE TABLE employeePhoneNumbers
( 
    employee_no    INT,
    telephone      VARCHAR2(30)
); 
```

在employee_no 上添加外键约束。

然后为每个电话号码插入一条新记录：

```
INSERT INTO employeePhoneNumbers(employee_no, telephone) VALUES (122085, '01809 7872896');
INSERT INTO employeePhoneNumbers(employee_no, telephone) VALUES (122085, '07610 2265827'); 
```

你可能会问为什么要这样做？用于数据库规范化。在此处阅读更多信息：http: [//www.informit.com/articles/article.aspx?p=30646](http://www.informit.com/articles/article.aspx?p=30646)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:46:23.783

您实际上错过了在数字之间放置空格`"01809 7872896"`，它应该`"018097872896"`没有空格，而这个`"07610 2265827"`到`"076102265827"`。如果它与列列表匹配。如果不是，请将其更改为字符串，方法是在它们周围加上单引号。喜欢`'01809 7872896,07610 2265827'`，我认为你应该做第二个，因为它似乎是用逗号分隔的电话号码作为字符串。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T17:22:05.120

我遇到了同样的错误，但我的插入语句中没有遗漏逗号，也没有使用双引号，这两者都会引发此错误。

我遗漏的是插入语句值的右括号，但 Oracle SQL Developer 给了我这个错误。

```
Error at Command Line:84 Column:40
Error report:
SQL Error: ORA-00917: missing comma
00917\. 00000 -  "missing comma" 
```

我得到的提示是它在我的陈述的末尾，显然不需要逗号。

# javascript - IE 7 中的 Javascript 错误

> ID：13324979
> 
> 赞同：0
> 
> 时间：2012-11-10T18:42:45.727
> 
> 标签：javascript

希望你能帮助我......我在 IE7 中收到以下 javascript 错误：

> 预期标识符、字符串或数字

这是我的代码：

```
<script type="text/javascript">
$(function(){
  $('#container').masonry({
    // options
    itemSelector : '.full',
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:43:31.557

从行中删除 `itemSelector : '.full',`。

JavaScript 对象中最后一个键值对后的逗号将通过 IE 7 中的异常。

```
<script type="text/javascript">
$(function(){
  $('#container').masonry({
    // options
    itemSelector : '.full'
  });
});
</script> 
```

# java - JSpinner 文字颜色

> ID：13324987
> 
> 赞同：1
> 
> 时间：2012-11-10T18:43:06.237
> 
> 标签：java, swing, netbeans, colors, jspinner

我目前正在 NetBeans 中创建一个 GUI，并且我有一个包含颜色列表的 JSpinner，但我不确定如何使文本成为每种颜色的相应颜色。

IE - 红色（应该是红色等）

下面是到目前为止 JSpinner 的代码：

`Color_Selector_Spinner = new javax.swing.JSpinner(); Color_Selector_Spinner.setModel(new javax.swing.SpinnerListModel(new String[] { "Red", "Orange", "Yellow", "Green", "Blue", "Indigo", "Violet"}));`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T19:07:37.907

您需要以下内容来制作颜色编码`JSpinner`：

1.  A`ChangeListener`用于在`JSpinner`组件值更改时更新颜色

2.  将`String`值转换为颜色。

微调器中只`JTextField`使用了一个，因此必须在每次更改事件时使用当前颜色更新它。

```
spinner.addChangeListener(new ChangeListener() {

   @Override
   public void stateChanged(ChangeEvent e) {

    try {
       String colorString = (String)spinner.getValue();

       Field field = Class.forName("java.awt.Color").getField(colorString.toLowerCase()); // toLowerCase because the color fields are RED or red, not Red
       Color color = (Color)field.get(null);

       JTextField tf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();
       tf.setForeground(color);

       } catch (Exception ex) { // handle ex }
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T19:18:20.943

我个人更喜欢设置我自己的编辑器，而不是选择现有的编辑器并希望它将来不会损坏。所以稍微修改版本的 Reimeus 代码

```
import javax.swing.*;
import java.awt.Color;
import java.lang.reflect.Field;

public class ColorSpinnerDemo {

  public static void main( String[] args ) {
    JFrame testFrame = new JFrame( "TestFrame" );

    JSpinner spinner = new JSpinner( new SpinnerListModel( new String[]{"Red", "Orange", "Yellow", "Green"} ) );
    spinner.setEditor( new SpinnerEditor( spinner ).getComponent() );

    testFrame.add( spinner );

    testFrame.pack();
    testFrame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
    testFrame.setVisible( true );
  }

  private static class SpinnerEditor{
    private JLabel label = new JLabel(  );

    public SpinnerEditor( JSpinner spinner ){
      spinner.addChangeListener( new ChangeListener() {
        @Override
        public void stateChanged( ChangeEvent e ) {
          String currentValue = ( String ) ( ( JSpinner ) e.getSource() ).getValue();
          label.setText( currentValue );

          try {
            Field field = Class.forName("java.awt.Color").getField(currentValue.toLowerCase()); // toLowerCase because the color fields are RED or red, not Red
            Color color = (Color)field.get(null);

            label.setForeground( color );
          } catch ( NoSuchFieldException e1 ) {           
          } catch ( ClassNotFoundException e1 ) {
          } catch ( IllegalAccessException e1 ) {
          }
        }
      } );
    }

    public JComponent getComponent(){
      return label;
    }
  }
} 
```

# php - 使用 PHP 将 JSON 数组从数据库返回到 android

> ID：13324989
> 
> 赞同：0
> 
> 时间：2012-11-10T18:43:20.317
> 
> 标签：php, android, mysql, json, return

我正在尝试将一组结果从 PHP 返回到 android。

我已经能够返回一个结果，但现在我试图返回多个结果，我在弄清楚如何将其作为数组执行时遇到了一些麻烦。

PHP函数：

```
 public function searchForPeople($tower) {
    $uuid = uniqid('', true);

    $result = mysql_query("SELECT * FROM users WHERE tower='$tower'") or die(mysql_error());
    $resultNo = mysql_num_rows($result);

    // check for successful store
    if ($result != null) {

        //if just one result return it
        if ($resultNo == 1) {

            // return result
            $resultSet[] = mysql_fetch_array($result);
            return $resultSet;

    //if more than one loop through
    } else {

        //add each row to an array
        while($row = mysql_fetch_array($result)) {
            $resultSet[] = $row;
        }
        return $resultSet;
        }

    } else {
        return false;
    }
} 
```

index.php 的部分，我将我的数据从 android 发布到：

```
 //SEARCH FOR PEOPLE
     else if ($tag == 'searchPeople') {

        $tower = $_POST['tower'];

        $result = $db->searchForPeople($tower);

    // check array has been created
    if ($result != false) {

        $response["success"] = 1;

        $count = 0;
        foreach($result as $row) {

        $response[$count]["user"]["name"] = $row["name"];
        $response[$count]["user"]["email"] = $row["email"];

        $count++;
        }

        echo json_encode($response);

      } else {
        $response["error"] = 2;
        $response["error_msg"] = "No users found";
        echo json_encode($response);
    }
    }

        else {
    echo "Invalid Request";
} 
```

然后，我试图在 android 中获取信息，如下所示，但是收到没有 0 值的错误，这意味着我在 PHP 中返回 json 的方式一定有问题。

```
JSONObject results  = new JSONObject(resultsString);
JSONObject json_row = results.getJSONObject("0");
JSONObject json_user = json_row.getJSONObject("user"); 
```

我确定这是返回 SQL 结果的 PHP 数组的问题。可能当我循环它们以将它们添加到 $resultSet 或 $response 时。

非常感谢任何帮助。

编辑：

以下是我得到的错误：

```
11-14 19:42:37.270: E/JSON(639): "[{\"uid\":\"4\",\"unique_id\":\"505efc638e0f48.78430999\",\"name\":\"fish\",\"email\":\"fish\",\"encrypted_password\":\"r\/Hb7uXrHN8bFuRoKlG8+Y5LdKFjM2QyZDUyYzQ1\",\"salt\":\"c3d2d52c45\",\"created_at\":\"2012-09-23 13:11:15\",\"updated_at\":\"2012-11-03 09:56:15\",\"location\":\"888\",\"tower\":\"IS\",\"base_location\":\"\",\"client_site\":\"\",\"graduate\":\"0\",\"location_updated\":\"0000-00-00 00:00:00\"}]"
11-14 19:42:37.270: E/JSON Parser(639): Error parsing data org.json.JSONException: Value [{"uid":"4","unique_id":"505efc638e0f48.78430999","name":"fish","email":"fish","encrypted_password":"r/Hb7uXrHN8bFuRoKlG8+Y5LdKFjM2QyZDUyYzQ1","salt":"c3d2d52c45","created_at":"2012-09-23 13:11:15","updated_at":"2012-11-03 09:56:15","location":"888","tower":"IS","base_location":"","client_site":"","graduate":"0","location_updated":"0000-00-00 00:00:00"}] of type java.lang.String cannot be converted to JSONArray 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:01:10.397

您应该将您的转储`resultsString`到调试`Log`以查看它的外观以及它是否是预期的 JSON 字符串。然后你可以看到，在服务器或客户端中，你必须修复代码。

我还会查看[JSONObject.getJSONArray()](http://developer.android.com/reference/org/json/JSONObject.html#JSONObject%28java.lang.String%29)，因为您发回的响应由嵌套数组 AFAICS 组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:32:02.837

我最近使用了类似于下面的例程。无论只有一个结果还是多个结果，它总是有效的。

```
$dbuser = // user name;
$dbpass = // password;
$dbhost = // host name;
$dbname = // database name;

$sql = "SELECT * FROM users WHERE tower=" . $tower;

try {
$dbh = new PDO("mysql:host=$dbhost;dbname=$dbname;charset=utf8", $dbuser, $dbpass); 
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$stmt = $dbh->query($sql);  
$results = $stmt->fetchAll(PDO::FETCH_OBJ);
$dbh = null;
echo '({"items":'. json_encode($results) .'});';
} catch(PDOException $e) {
echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T16:16:10.573

我相信你应该使用

```
mysql_fetch_assoc 
```

在 PHP 中提取行。然后你的结果就可以被 json_encoded 转换成你需要返回给 Android 的字符串了。

所以试试这个：

```
function sqlToJSON($sql){
     $sth = mysql_query($sql);

    //if this is an update or an insert nothing to return
    if($sth === false || $sth === true){    

        return null;
    }    

    $rows = array();
    while($r = mysql_fetch_assoc($sth)) {
        $rows[] = $r;
    }   
    return json_encode($rows);
 } 
```

您应该能够`new JSONObject(res);`在 Java 端运行此方法的结果，而无需进行任何额外的翻译......我是从记忆中说的，所以，它可能不是 100% 正确，但如果不是，它很漂亮关。

# android - 设备之间的 Android 套接字

> ID：13324991
> 
> 赞同：2
> 
> 时间：2012-11-10T18:43:28.623
> 
> 标签：android, sockets, networking, client-server, chat

我试图通过套接字连接 2 个设备，但它从来没有用过。其中一个设备是服务器，它将配置（IP 和监听的端口）保存在数据库上，然后另一个设备，客户端，与数据库连接并进行配置连接。

数据库查询和回显工作正常（PHP），但打开客户端套接字的方法不起作用，它没有时间连接并引发异常。我不知道是ServerSocket没有收到请愿还是ClientSocket没有发送...

下面的代码：（有点糟糕，但用于测试）。

服务器代码：

```
public class Server{

private int puerto = 4567;

private ServerSocket serverSocket;

public void conectar() {

    try {

        serverSocket = new ServerSocket(puerto);

        while (true) {

            Log.i("SocketServer", "escuchando");

            Socket cliente = serverSocket.accept(); 

            Log.i("Socket","Cliente ha conectado"); 

            BufferedReader ent = new BufferedReader(new InputStreamReader(
                    cliente.getInputStream())); 

            String linea = ent.readLine(); 

            Log.i("Cliente", "Cliente envia=" + linea);

            cliente.close(); 

            Log.i("Servidor","Cliente desconectado");
        }

    } catch (IOException e) {

        Log.e("Error", "Error en el servidor");

    }
} 
```

客户端代码：

```
public class Cliente {

private int puerto;

private InetAddress direccion;

public Cliente(int puerto, InetAddress direccion){

    this.puerto = puerto;

    this.direccion = direccion;

}

public void conectar(){

    try{

    Socket cliente = new Socket(direccion, puerto);

    Log.i("Cliente", "Conectado");

    conectado = true;

    PrintWriter salida=new PrintWriter(cliente.getOutputStream(),true);

    salida.println("Hola, soy el cliente");

    Log.i("Cliente", "Mensaje enviado");

    cliente.close();

    }catch(SocketException e){

        Log.e("ErrorSocket","Error al abrir socket " + e.getMessage());

    } catch (IOException e) {

        Log.e("ErrorSocket","Error al enviar " + e.getMessage());

    }

} 
```

}

我通过以下方法获得 InetAddress：

```
//The String result param is like: "192.168.0.1&23456"

public InetAddress getInetAddress(String result) {

    InetAddress address = null;

    //5 it an example
    if (result.length() > 5 && result != null) {

        try {

            String[] data = result.split("&");

            Log.i("Data", data[0] + " " + data[1]);

            puerto = Integer.parseInt(data[1]);

            Log.i("PUERTO", "Puerto:" + puerto);

            String ip = data[0];

            Log.i("IP", ip);

            String[] str = ip.split("\\.");

            byte[] IP = new byte[str.length];

            for (int i = 0; i < str.length; i++) {

                IP[i] = (byte) Integer.parseInt(str[i]);
            }

            address = InetAddress.getByAddress(IP);

            Log.i("InetAddress",address.getCanonicalHostName());

        } catch (Exception e) {

            Log.e("Error", "Error al conseguir InnetAddress");

        }

    } else {

        Log.e("Error", "String capturado vacio");

        return address;
    }

    return address;

} 
```

谢谢 :) 这是我的大学期末项目的一个测试项目，一个 GPS 聊天。

编辑：3G nat 打破了这种方式，通过套接字在 2 个设备之间建立 android 连接。我将研究使用 GCM 和另一台服务器的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:36:29.273

对于您的客户端代码，我发现这对我来说非常有效：

```
OutputStreamWriter wr = new OutputStreamWriter(cliente.getOutputStream()); 
```

然后发送数据使用：

```
wr.write("DATA TO SEND");
wr.flush(); 
```

看起来您正在进行良好的日志记录，我还将添加日志输出行以查看它是否通过了套接字并让它打印出您获得的所有数据。如果所有日志都显示正确的数据但客户端无法连接，请尝试我上面发布的代码，我没有遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T19:58:36.203

交换有关 GPS 位置的信息的更好选择是使用 websocket。我为这种应用程序提供了非常简单的服务器[https://github.com/yoman07/geo_server](https://github.com/yoman07/geo_server) android 演示类，您可以在这里找到[https://github.com/yoman07/PhotoShoter/blob/master/PhotoShoterModule/src/main/ java/com/photoshoter/SocketClient.java](https://github.com/yoman07/PhotoShoter/blob/master/PhotoShoterModule/src/main/java/com/photoshoter/SocketClient.java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T11:51:10.227

# 服务器应用程序.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.Iterator;

public class ServerApp {
ArrayList clientOutputStreams;
public class ClientHandler implements Runnable{
BufferedReader reader;
Socket sock;
public ClientHandler(Socket clientSocket){

try {
sock=clientSocket;
InputStreamReader isr=new InputStreamReader(sock.getInputStream());
reader=new BufferedReader(isr);
} catch (IOException e) {
 // TODO Auto-generated catch block
e.printStackTrace();
}
}
@Override
 public void run() {
 // TODO Auto-generated method stub
String message;
try {
while((message=reader.readLine())!=null)
{
System.out.println("read :"+message);
tellEveryone(message);
 }
  } catch (IOException e) {
  // TODO Auto-generated catch block
e.printStackTrace();
  }
  }
    private void tellEveryone(String message) {
   // TODO Auto-generated method stub
   Iterator itr=clientOutputStreams.iterator();
 while(itr.hasNext()){
 PrintWriter pWriter=(PrintWriter)itr.next();
 pWriter.println(message);
 pWriter.flush();
  }
  }

  }
   public static void main(String[] args) {
    // TODO Auto-generated method stub

    new ServerApp().createSocket();
  }
   private void createSocket() {
  // TODO Auto-generated method stub
   clientOutputStreams=new ArrayList();
   try {
ServerSocket socket=new ServerSocket(5000);
while(true){
Socket clientSocket=socket.accept();
PrintWriter writer=new PrintWriter(clientSocket.getOutputStream());
clientOutputStreams.add(writer);
Thread t = new Thread(new ClientHandler(clientSocket));
t.start();
System.out.println("Got a Connection to the Client");
 } 
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
}

}

 Chat Client Source Code
 ===================================================
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.ScrollPaneConstants;

public class ChatClient {
JTextField outgoing;
JTextArea incoming;
BufferedReader reader;
PrintWriter writer;
Socket sock;
public void layOutDesign(){
JFrame frame= new JFrame("Simple Chat Client");
JPanel mainPanel= new JPanel();
 incoming= new JTextArea(15,25);
incoming.setLineWrap(true);
incoming.setWrapStyleWord(true);
incoming.setEditable(false);
JScrollPane qScroller=new JScrollPane(incoming);
qScroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
qScroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
outgoing=new JTextField(20);
JButton sendButton=new JButton("Send");
sendButton.addActionListener(new SendButtonListener());
mainPanel.add(qScroller);
mainPanel.add(outgoing);
mainPanel.add(sendButton);
setupNetworking();
Thread readerThread=new Thread(new IncomingReader());
readerThread.start();
frame.getContentPane().add(BorderLayout.CENTER, mainPanel);
frame.setSize(400, 500);
frame.setVisible(true);
}
private void setupNetworking() {
// TODO Auto-generated method stub
try {
 sock=new Socket("10.30.10.156", 5000);
 InputStreamReader isR=new InputStreamReader(sock.getInputStream());
 reader=new BufferedReader(isR);
 writer=new PrintWriter(sock.getOutputStream());
  System.out.println("Network Established.");
 } catch (UnknownHostException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
 e.printStackTrace();
 }
}
 public class SendButtonListener implements ActionListener{

 @Override
 public void actionPerformed(ActionEvent ev) {
 // TODO Auto-generated method stub
 try{
 writer.println(outgoing.getText());
 writer.flush();
 }catch (Exception e1) {
  // TODO: handle exception
  e1.printStackTrace();
  }

  outgoing.setText("");
  outgoing.requestFocus();
 }

 }
 public static void main(String[] args) {
  // TODO Auto-generated method stub
  new ChatClient().layOutDesign();
  }
 public class IncomingReader implements Runnable{

  String message;
  @Override
   public void run() {
  // TODO Auto-generated method stub
  try {
  while((message=reader.readLine())!=null){
  System.out.println("Read :"+message);
   incoming.append(message+"\n");
  }
 } catch (IOException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 }
 }

  }
  } 
```

转到服务器代码...并更改系统的 IP，然后连接到客户端

并享受网络中同事之间的聊天......

# vim - Vim用键盘命令运行项目特定的make？

> ID：13324996
> 
> 赞同：1
> 
> 时间：2012-11-10T18:44:09.077
> 
> 标签：vim, makefile

我正在使用 Vim (Typescript) 编写一个编译项目。`make %`将构建一个单独的文件。我用它来检查错误。这对于错误检查非常有用，但它会在我不需要的源文件旁边创建编译文件。

对于我的实际构建过程，我有一个编译所有内容的命令。这是在 Makefile 中。

我希望能够以通用方式将一个关键命令映射到“构建我的整个项目”，所以如果我正在编辑`.ts`我的项目目录下的任何文件，它会运行该特定命令。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:48:38.697

诀窍是实际使用 Makefile：

```
all: complete.exe

complete.exe: *.ts
     somecompilation-command $^ -o $@ 
```

这样，您就可以`makeprg`在“make”处离开：

```
:set makeprg& 
```

并愉快地做：

```
:mak 
```