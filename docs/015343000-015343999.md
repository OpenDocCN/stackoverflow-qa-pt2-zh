# StackOverflow 问答 15343000-15343999

# css - Prestashop 模块的 CSS 覆盖

> ID：15343000
> 
> 赞同：0
> 
> 时间：2013-03-11T15:54:59.867
> 
> 标签：css, overriding, prestashop

我是 Prestashop 的新手。我想覆盖一个模块的 CSS 文件，比如说`blockpermanentlinks`. 官方[文档](http://doc.prestashop.com/display/PS15/Overriding+default+behaviors)说我必须把新的 CSS 文件放在 `/themes/my_theme/css/modules/my_module/my_module.css`.

它不起作用。线

`<link href="/prestashop/themes/my_theme/css/modules/blockpermanentlinks/blockpermanentlinks.css" rel="stylesheet" type="text/css" media="all" />`

已生成，但如果我使用浏览器访问该 CSS 文件，则会显示“找不到页面”。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:27:41.003

好像你已经回答了你自己的问题。说明是将您的 CSS 文件放入

```
/themes/my_theme/... 
```

你已经链接到它了

```
/prestashop/themes/my_theme/... 
```

尝试

```
<link href="/themes/my_theme/css/modules/blockpermanentlinks/blockpermanentlinks.css" rel="stylesheet" type="text/css" media="all" /> 
```

如果没有指向您网站的链接，就很难再说什么了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T19:05:10.747

您可以覆盖模块的 CSS 文件：

转到 /themes/{your_theme}/blockpermanentlinks/css/blockpermanentlinks.css

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T15:13:26.580

试试这个路径：

```
/themes/my_theme/css/modules/blockpermanentlinks/blockpermanentlinks.css 
```

删除**/cache/class_index.php**并确保从管理员打开选项为**Force Compilation**，我希望这能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-02T09:35:40.070

如果您只需要覆盖一些选择器/属性，您可以在以下位置创建一个 custom.css 文件：

```
/themes/my_theme/css/autoload/custom.css 
```

而不是覆盖整个css文件

# android - 从 IntelliJ 和 Android CassNotFoundException 开始

> ID：15343001
> 
> 赞同：0
> 
> 时间：2013-03-11T15:55:00.407
> 
> 标签：android, intellij-idea, android-maps-v2

我正在尝试从 Eclipse 切换到 IntelliJ IDEA 以进行 Android 开发。

目前我有一个依赖于 10 多个库（包括第三个库和 jars）的 Android 应用程序。

首先，当我尝试运行应用程序时，我收到了 Dalvik DEX 错误。我可以解决修改我的项目的依赖关系的范围，而不是我的。在我这样做之后，我得到了另一个错误，我不知道如何解决它......

```
03-11 16:10:10.423: ERROR/AndroidRuntime(10258): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.niula.loodic.android/com.niula.loodic.android.ui.HomeActivity}: java.lang.ClassNotFoundException: Didn't find class "com.niula.loodic.android.ui.HomeActivity" on path: /system/framework/com.google.android.maps.jar:/data/app/com.niula.loodic.android-1.apk
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.ClassNotFoundException: Didn't find class "com.niula.loodic.android.ui.HomeActivity" on path: /system/framework/com.google.android.maps.jar:/data/app/com.niula.loodic.android-1.apk
    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 
```

为什么会这样？

```
Didn't find class "com.niula.loodic.android.ui.HomeActivity" on path: /system/framework/com.google.android.maps.jar:/data/app/com.niula.loodic.android-1.apk 
```

欢迎任何帮助，我无法附上一些图片，因为我不知道问题的根源。实际上我从编辑器中收到了一些奇怪的错误，因为 Google Maps V2.

![在此处输入图像描述](../Images/882eadd63f797e6fa14ef2df8d4b36a8.png) ![在此处输入图像描述](../Images/5534e1391cc7a44ff5450631dc68374b.png) ![在此处输入图像描述](../Images/cf5b63eab63d93fa57501d26a22a8637.png) ![在此处输入图像描述](../Images/ef208813085996c35b6e505565b4b204.png)

[http://imageshack.us/f/199/captura1.png/](http://imageshack.us/f/199/captura1.png/) [http://imageshack.us/f/708/captura2zt.png/](http://imageshack.us/f/708/captura2zt.png/) [http://imageshack.us/f/571/captura3h.png/](http://imageshack.us/f/571/captura3h.png/) [http: //imageshack.us/f/835/captura4qk.png/](http://imageshack.us/f/835/captura4qk.png/)

提前致谢

编辑：如果我将所有模块（库）依赖项“范围”更改为“编译”，这是我在 DEX 执行期间遇到的错误：

```
Android Dex: [loodic] java.lang.IllegalArgumentException: already added: Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat; 
```

![在此处输入图像描述](../Images/82f83a8a7951c2bb004fb365a7458f76.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:22:02.543

啊，意外的顶级异常错误...

这篇`Android Dex: [loodic] java.lang.IllegalArgumentException: already added: Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat;`文章应该让您了解正在发生的事情。

基本上，如果您对各种模块使用相同的 android 支持库文件，请确保它们指向***相同***的.jar 文件，而不是相同文件的副本。那应该可以解决您的 Dex 错误。

# regex - 不知道为什么我的正则表达式会抓取一些空白项

> ID：15343017
> 
> 赞同：4
> 
> 时间：2013-03-11T15:55:37.830
> 
> 标签：regex

我有这个正则表达式： `([a-z]+)(?:\.)`。

像这样在Javascript中使用它：
`"test.thing.other".split(/([a-z]+)(?:\.)/);`最终给我一个这样的数组：
`["", "test", "", "thing", "other"]`。
我不知道为什么将第一个和第三个元素放入该数组中。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:11:25.377

根据您的问题和评论**“捕获 az 直到一段时间”**，我相信您应该像这样使用 String.match ：

```
arr = "test.thing.other".match(/[a-z]+(?=\.)/g); 
```

给出：

```
["test", "thing"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:00:14.730

括号是原因。这是[MDN 上`string.split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)所说的：

> 如果`separator`是包含捕获括号的正则表达式，则每次匹配分隔符时，捕获括号的结果（包括任何未定义的结果）都会拼接到输出数组中。

他们还警告说：

> 但是，并非所有浏览器都支持此功能。

所以这个结果可能不一致。如果您只想按表达式的内容进行拆分，请删除括号：

```
>> 'test.thing.other'.split(/[a-z]+\./)
["", "", "other"] 
```

这也可能不是您想要的，而是根据您的表达方式直观预期的结果。

如果你想按点分割，那么你需要在正则表达式中准确地提供：一个点。

```
>> 'test.thing.other'.split(/\./)
["test", "thing", "other"] 
```

# c# - 不要总是在 FTP 上传结束时得到 226 Transfer OK

> ID：15343022
> 
> 赞同：1
> 
> 时间：2013-03-11T15:55:47.533
> 
> 标签：c#, sockets, windows-8, ftp, windows-runtime

使用我编写的 FTP 客户端，我有时会`226 Transfer OK`在上传完成后收到来自 FileZilla 服务器的消息，有时我什么也收不到。并不是客户端在`226 Transfer OK`收到之前断开连接，因为我可以在服务器上看到 FileZilla 从未发送过它。

我需要知道服务器何时收到完整的上传，否则在关闭连接之前我不知道整个文件是否已进入网络。

任何想法可能导致`226 Transfer OK`消息的不可靠性？实际上是什么触发它被发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:59:05.427

我自己想通了！我发现是`FIN/ACK`客户端在数据套接字端口上发送的`226 Transfer OK`消息提示 FileZilla 服务器在控制套接字端口上发送消息（在数据套接字端口上发送自己`FIN/ACK`的响应之后）。

在 WinRT 中，数据套接字的关闭导致`FIN/ACK`客户端发送消息。

因此，关闭 FTP 连接的正确顺序是（在发送最后一个数据包之后）关闭数据套接字，等待`226 Transfer OK`控制套接字上的消息，发送控制套接字`QUIT`上的消息，然后关闭控制套接字。

# c# - asp.net 动态数据过滤视图

> ID：15343023
> 
> 赞同：1
> 
> 时间：2013-03-11T15:55:47.950
> 
> 标签：c#, asp.net, sql, asp.net-dynamic-data

我使用 asp.net 动态数据来显示我在 sql server 数据库中的几个表的内容，这非常酷。除此之外，我正在尝试做另一件事。

说有一张桌子

```
CustomerComplaints
    - some fields
    - CustomerName
    - ComplaintType
    - ComplaintDate
    - other fields 
```

我想向最常抱怨的客户展示一个视图

所以我创建了一个视图

```
 select CustomerName, count(*) ComplaintCount from CustomerComplaints group by CustomerName 
```

但我也希望能够传入一个可选参数`AfterDate`并`BeforeDate`在 ComplaintDate 上进行过滤以执行我的 Top Compalining Customer 视图。

在不为这个问题创建一个非常具体的页面的情况下，有什么好方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:40:53.637

您可以将参数传递给您的查询并使用它：

```
SELECT CustomerName, count(*) ComplaintCount 
FROM CustomerComplaints 
WHERE ComplaintDate BETWEEN @AfterDate AND @BeforeDate
GROUP BY CustomerName 
```

然后将这些参数的默认值设置为该列的数据类型的最小值和最大值（如果是`datetime2`，则值为`0001-01-01`and `9999-12-31`）。这样，如果您不显式传递参数，则默认值根本不会过滤您的结果。

# mysql - MySQL计算选择不适用于空子选择

> ID：15343025
> 
> 赞同：3
> 
> 时间：2013-03-11T15:55:52.460
> 
> 标签：mysql, sql, select, union

我试图通过一个 SQL 查询来获得 5 个不同表中结果的总和。我有 5 个表，每个表可能包含属于订单的记录。5 个表中所有记录的总和决定了总订单价格。

在这个论坛上搜索我想出了以下查询：

```
SELECT
  OrderTotal.total + Shipping.amount + Service.amount - Gift.amount - RMA.total as TotalCosts
FROM
  (SELECT SUM(price * amount) AS total FROM order WHERE order_id=123456) OrderTotal
  (SELECT amount FROM shipping WHERE order_id=123456) Shipping,
  (SELECT amount FROM service WHERE order_id=123456) Service,
  (SELECT SUM(price * amount) AS total FROM rma WHERE order_id=123456) RMA,
  (SELECT amount FROM gift WHERE order_id=123456) Gift 
```

我现在面临的问题是，例如，当最后一个 SELECT 返回 0 行时，不返回总 TotalCosts 。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:07:57.223

如何使用`UNION`？

```
SELECT  order_id, SUM(total) GrandTotal
FROM
        (
            SELECT  order_id, SUM(price * amount) AS total 
            FROM    `order` 
            WHERE   order_id = 123456
            UNION ALL
            SELECT  order_id, amount AS total 
            FROM    shipping 
            WHERE   order_id = 123456
            UNION ALL
            SELECT  order_id, amount AS total 
            FROM    service 
            WHERE order_id = 123456
            UNION ALL
            SELECT  order_id, SUM(price * amount) AS total 
            FROM    rma 
            WHERE   order_id = 123456
            UNION ALL
            SELECT  order_id, amount AS total 
            FROM    gift 
            WHERE   order_id=123456
        ) subTable
GROUP   BY order_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:48:33.667

您可以使用**IFNULL**函数来解决

```
SELECT
  IFNULL(OrderTotal.total,0) + IFNULL(Shipping.amount + IFNULL(Service.amount - IFNULL(Gift.amount,0) - RMA.total as TotalCosts
FROM
  (SELECT SUM(price * amount) AS total FROM order WHERE order_id=123456) OrderTotal
  (SELECT amount FROM shipping WHERE order_id=123456) Shipping,
  (SELECT amount FROM service WHERE order_id=123456) Service,
  (SELECT SUM(price * amount) AS total FROM rma WHERE order_id=123456) RMA,
  (SELECT amount FROM gift WHERE order_id=123456) Gift 
```

# linux - 最小化 Libre Office 安装以将 MS 文件转换为 PDF

> ID：15343026
> 
> 赞同：1
> 
> 时间：2013-03-11T15:55:53.237
> 
> 标签：linux, pdf-generation, libreoffice

是否有人拥有将 Microsoft .doc、.xls 文件转换为 PDF 所需的最小 Libre Office 文件列表？我计划以编程方式和无 GUI 运行转换，如下所示：`soffice -headless -convert-to pdf [inputfile]`

出于安全原因，我的系统管理员不想安装整个 Libre Office 套件。

当然，如果你们中的任何人都知道在 Linux 上将 MS 文档转换为 PDF 的另一种方法，我会全力以赴。

谢谢你。

# c++ - 重载的构造函数 - 带有 bool 参数的构造函数具有优先权

> ID：15343029
> 
> 赞同：6
> 
> 时间：2013-03-11T15:56:00.340
> 
> 标签：c++, type-conversion, overloading

我最近遇到了一个像下面这样的类

```
class Foo {
public:
    Foo(std::string msg) {}
private:
    Foo(bool b) {}
}; 
```

我注意到尝试通过以下方式创建此类的对象

```
Foo foo("blah"); 
```

导致编译错误，告诉它`Foo::Foo(bool)`是私有的。显然，如果参数不是实际的 std::string，编译器更喜欢使用带有`bool`参数的构造函数。另一方面，如果没有给出私有构造函数，上面的代码编译得很好。

为什么“-constructor `bool`”优先于`string`“-constructor”尽管传递的参数的类型不适合它们中的任何一个？这只是一个定义问题，还是有更深层次的含义和一些充分的理由？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T16:00:14.277

原因与转换运算符优先级有关。每个调用都包含一个隐式转换

1.  指针->`std::string`
2.  指针->`bool`

在这种情况下，#1 是用户定义的转换，#2 是语言/编译器定义的转换。用户定义的转换具有低得多的优先级，因此首选其他转换。

**编辑**

这是一个类似的问题，对涉及的优先级检查有更深入的解释

> [c++中的转换优先级](https://stackoverflow.com/q/1092714/23283)

# image - 从具有变化背景的两个图像中识别相同的对象

> ID：15343032
> 
> 赞同：2
> 
> 时间：2013-03-11T15:56:06.783
> 
> 标签：image, similarity, identification

当我们从向后移动的车辆中拍摄视频时，我们会看到您身后的车辆缓慢移动，而背景（树木、房屋、路标）移动得非常快。给定视频中的两个连续图像，您身后的汽车不会有太大变化，但背景会发生很大变化。我想咨询一下如何从两张图像中自动识别这辆车。它们具有相似的位置、大小和所有其他特征。

等效的问题是如何识别变化很大的背景。

我确实知道有很多算法可以识别车辆，并且已经尝试过其中的一些。但是是否可以使用连续图像中同一车辆的相似性来识别车辆？

我使用的是单目相机，更新频率为 2Hz。

六个连续的图像被上传作为参考。 ![在此处输入图像描述](../Images/9bd0e1bb71bb3aba2329ef161fa8279c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:17:35.550

在相似度方面，经典的方法是使用直方图。将您的图表分成小网格和每个网格的计算机 RGB 直方图。祝你好运。

# r - 从受密码保护的网站将文本文件读入 R

> ID：15343042
> 
> 赞同：0
> 
> 时间：2013-03-11T15:56:36.503
> 
> 标签：r, internet-explorer, dataframe

我有一个工作脚本（Windows 32 位），它成功地从带有 read.csv 的受密码保护的网站读取了一个 txt 文件。下面是一段非常简单的代码：

```
fname <- "http://www.frontierweather.com/degreedays/StatePopulationWeightedWeatherData_Since2010.txt"
dd2 <- read.csv(fname, sep=",", header=T) 
```

然后我得到了一台新计算机（Windows 64 位）并且 read.csv 似乎没有记录器能够超越网站身份验证。它不是读取数据，而是读取似乎与网站身份验证相关的乱码数据框：

```
> head(dd2)
                   X..DOCTYPE.html.PUBLIC....W3C..DTD.XHTML.1.0.Transitional..EN
1                       http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd>
2                                      <html xmlns=http://www.w3.org/1999/xhtml>
3                                                                         <head>
4                                                    <title>Please login</title>
5                                            <link rel=stylesheet type=text/css 
6         href=http://www.frontierweather.com/amember/templates/css/reset.css /> 
```

不成功，我尝试了几件事来尝试让它工作：

1.  从旧机器转移 cookie
2.  打开网站并在提示时允许 Windows 保存用户名和密码
3.  带有“user:password@”前缀的 URL（在 fname 中）
4.  在 Internet Explorer 设置的网站中，数据存储为“受信任的站点”。
5.  检查新电脑和旧电脑上的所有ackages是否相同
6.  已验证新旧机器都运行相同版本（版本 9）的 Internet Explorer

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:14:05.107

我发现了我的问题，因为我浪费了一整天的时间来解决这个问题，所以我想分享我的解决方案，希望它不会像它给我带来的那样给其他人带来同样的恐慌。

首先，据我所知，这个问题与 R 或从 32 位机器切换到 64 位机器完全无关。相反，这一切似乎都源于 Internet Explorer 中从 Internet Explorer 7 开始引入的新设置。

在 Internet Explorer 的选项中，“启用保护模式（需要重新启动 Internet Explorer）”选项默认打开（选中）。Internet Explorer 允许您更改以下每个安全区域的设置：Internet、本地 Intra Net、受信任站点和受限制站点。

将我的数据来源的 URL 添加到受信任的站点列表后，我通过取消选中该框关闭了启用保护模式。进行此更改并重新启动 Internet Explorer 后，read.csv（上图）运行良好。

在做了一些进一步的研究后，我发现了以下内容：

> 保护模式有助于防止恶意软件利用 Internet Explorer 7 中的漏洞，保护您的计算机免受黑客最常见的方式访问您的系统。-[如何在 Internet Explorer 7 中禁用保护模式](http://pcsupport.about.com/od/fixtheproblem/ht/protectmodeie7.htm)

大概是通过启用保护模式（我的新计算机附带的默认设置）；它阻止了 R 访问包含我的用户名和密码的 cookie，这些 cookie 被馈送到 R 和/或返回到 Internet Explorer 以检索数据。

# cakephp - 在 cakephp 中限制 aro 范围

> ID：15343044
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:56:52.227
> 
> 标签：cakephp, permissions, scope, acl, restrictions

好的，我先说我是蛋糕和 ACL 以及 MVC 架构的菜鸟。我正在关注其网站[http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html)上的 cakephp 教程。我了解本教程的内容，但想知道将这个基于组的简单 ACL 提升到新水平的最简单方法。我搜索了SO无济于事。所以，继续这个问题。

例如，让我们对上述教程中的函数进行稍微修改的版本。它只是为 ACO 设置 ARO 权限。

有很多区，很多部门，每个都有很多用户。

关系如下：一个区有很多部门——一对多。一个地区有很多用户，用户可能有很多地区（只要他们属于那个地区的一个部门）。一个部门有AnBelongsToMany Users——多对多。

```
public function initDB() {
    $group = $this->User->Group;

    //Allow admins to everything
    $group->id = 1;
    $this->Acl->allow($group, 'controllers');

    // issue 1) allow district managers to districts, departments, users
    $group->id = 2;
    $this->Acl->deny($group, 'controllers');
    $this->Acl->allow($group, 'controllers/Districts');
    $this->Acl->allow($group, 'controllers/Departments');
    $this->Acl->allow($group, 'controllers/Users');

    //issue 2) allow department managers to edit departments and users
    $group->id = 3;
    $this->Acl->deny($group, 'controllers');
    $this->Acl->allow($group, 'controllers/Departments');
    $this->Acl->allow($group, 'controllers/Users');
    //we add an exit to avoid an ugly "missing views" error message
    echo "all done";
    exit; 
```

}

好的，所以这些权限正在设置中，虽然它绝对方便，但确实解决了一小部分问题。就目前而言，我实际上只是阻止部门管理员执行区级职能。区管理员和部门管理员都可以不受限制地执行用户 CRUD

我想做的是将每个管理员类型 USER CRUD 的范围限制为仅居住在其部门或地区内的那些用户。例如，Department Admin Foo 不能删除另一个 Dept Admin 的用户，Dist Admin Bar 不能将所有另一个 Dist Admin 的用户名更改为 nancy。

哈哈。我对如何做到这一点感到非常茫然。

我想一种方法是获得管理员等级，例如 dist admin，然后找出他是哪个地区的用户。最后，将该地区的所有用户返回到变量 $userScope 中。同样，我是 cake php 的新手，并且不确定如何执行这个提案，即使这是一个好主意和处理这个问题的最佳方法。有什么建议么？？提前致谢！！！

**编辑：**有用的答案，@nicolae。

但是，似乎我仍然可以编写一个函数来返回允许任何给定管理员（任何给定 aco）编辑的所有用户。对我来说似乎是这样，因为我假设管理员，他/她自己是返回的用户群的一部分。例如dist 9的dist admin，驻留在dist 9；同样，部门 1 的部门管理员驻留在部门 1 中。

```
could i write something like:

 public getUserScope(){
 $id = $this->Auth->user('id');
 $dept = $this...
 $dist = $this...
 $access_level = $this->Session->read('Auth.User.group_id');
 if($access_level == 3){
      //get all users in this user's dept
 } elseif($access_level == 2) {
     //find all users in this user's dist
 } elseif($access_level == 1) {
      //find all users
 }
} 
```

哎哟。授予将这些信息组合在一起所涉及的所有连接表，这在实际输入时一定看起来像美杜莎的头发。你能看到我的逻辑吗？这对我来说有点难以表达。让我知道我是否应该进一步澄清任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:32:15.053

因此，您正在尝试建立一个 ACL 系统来管理基于**组 ID**和**控制器/操作**以外的限制- 您需要基于**部门**和**地区的**限制。
据我所知，CakePHP 中的嵌入式 ACL 系统**无法**管理这种级别的限制。

作为一种解决方案，我建议您允许用户访问他们需要访问的位置（例如，*部门管理员对**用户 CRUD*界面具有 ACL 访问权限）并在控制器中插入特定限制。

```
function editUserFromDepartment($userId = NULL) {
    // Custom ACL check
    if (! $this->__checkDepartmentByUserId($userId)) {
        // Show the user a custom error message and redirect him to index page
    }

    // User editing code ...
}

function __checkDepartmentByUserId($userId) {
    $dept = $this->Department->getByUserId($userId);

    // Check if the current user belongs to this department
    $currentUserDepartmentId = $this->Session->read('Auth.User.department_id');

    return ($dept['Department']['id'] != $currentUserDepartmentId);
} 
```

祝你好运，让我知道我的解释是否足够清楚。

尼古拉

**编辑**（试图回答@Todd 的编辑）：我明白你的意思。您的代码旨在获取当前用户有权访问的*所有*用户。而不是这样，我将采用基于事件的方法：当用户**X**尝试被编辑时，执行一个查询，以查找是否允许 Auth.User 对用户**X**执行此操作。

例如，您 (Todd) 正试图编辑我的个人资料 (NicolaeS) 以更改我的员工 ID，因为我当前的 ID 是错误的。
该功能`$this->getUserScope('user-ID-of-NicolaeS')`将检查您的部门 ID*或*地区 ID 是否与 main 相同，并根据此检查允许/禁止您继续执行操作。

这看起来足够清晰/直截了当吗？

问候，尼古拉

# axis2 - WSO2 样本失败

> ID：15343046
> 
> 赞同：0
> 
> 时间：2013-03-11T15:56:54.017
> 
> 标签：axis2, wso2, wso2esb

我正在努力设置和了解 WSO2 ESB，我正在查看示例并进行设置。我正在查看这个示例，但是，我从前四个中尝试过的任何一个都失败了：

[http://docs.wso2.org/wiki/display/ESB451/Sample+3%3A+Local+Registry+Entry+Definitions%2C+Reusable+Endpoints+and+Sequences](http://docs.wso2.org/wiki/display/ESB451/Sample+3%3A+Local+Registry+Entry+Definitions%2C+Reusable+Endpoints+and+Sequences)

所以，我启动了 ESB（管理控制台运行良好），效果很好。我可以构建 SimpleStockQuoteService 并且可以启动示例 AXIS2 服务器。我可以从浏览器中打开 wsdl，所以这块看起来不错。当我从命令行运行客户端代码时

```
ant stockquote -Daddurl=http://localhost:9000/services/SimpleStockQuoteService -Dtrpurl=http://localhost:8280/ 
```

它到达axis2服务器（我可以在日志中看到它：“Mon Mar 11 16:53:37 CET 2013 samples.services.SimpleStockQuoteService ::为：IBM生成报价”），它到达ESB（我可以也可以在日志中看到它），但是突然，当它试图转发（？）或传递（？）消息时，连接突然断开。这是我在日志中看到的：

```
[2013-03-11 16:53:37,701]  INFO - LogMediator Text = Sending quote request, version = 0.1, direction = incoming
[2013-03-11 16:53:37,830] ERROR - SourceHandler I/O error: A l├®tezo kapcsolatot a t├ívoli ├íllom├ís k├®nyszer├¡tetten bez├írta
java.io.IOException: A l├®tezo kapcsolatot a t├ívoli ├íllom├ís k├®nyszer├¡tetten bez├írta
        at sun.nio.ch.SocketDispatcher.read0(Native Method)
        at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:25)
        at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:233)
        at sun.nio.ch.IOUtil.read(IOUtil.java:206)
        at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:236)
        at org.apache.http.impl.nio.reactor.SessionInputBufferImpl.fill(SessionInputBufferImpl.java:93)
        at org.apache.http.impl.nio.codecs.AbstractMessageParser.fillBuffer(AbstractMessageParser.java:113)
        at org.apache.http.impl.nio.DefaultNHttpServerConnection.consumeInput(DefaultNHttpServerConnection.java:150)
        at org.apache.http.impl.nio.DefaultServerIOEventDispatch.inputReady(DefaultServerIOEventDispatch.java:154)
        at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:158)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:340)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:318)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:278)
        at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)
        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:542)
        at java.lang.Thread.run(Thread.java:619) 
```

"A l├®tezo kapcsolatot at├ívoli ├íllom├ís k├®nyszer├¡ tetten bez├írta java.io.IOException: A l├®tezo kapcsolatot at├ívoli ├íllom├ís k├®nyszer├¡ tetten bez├írta" 这件作品的编码不好，是匈牙利语，意思是："连接被远程主机强行关闭"

我真的不知道出了什么问题...有什么想法吗？

我在 Windows 7 上。我已经下载了最新的 WSO2 ESB (wso2esb-4.6.0.zip)

# c++ - C++中如何区分数据结构模板和函数模板？

> ID：15343049
> 
> 赞同：1
> 
> 时间：2013-03-11T15:57:04.027
> 
> 标签：c++, class, templates, data-structures, function-templates

我了解到可以通过以下方式使用模板创建数据结构：

```
template<typename T>
struct X {
   T weight;
   int age;
}; 
```

这些函数还可以通过以下方式使用模板：

```
template <class T>
T func_name(int age, T human) {
    something_here;
} 
```

不同之处之一是在第一种情况下我们使用`typename`，而在第二种情况下我们使用`class`。

我发现包含以下内容的代码：

```
template<typename S, typename T>
bool is_null(const row<T>& r) 
```

所以，我无法理解的是为什么我们将`typename`（而不是`class`）与函数结合使用。我们不应该使用`class`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:00:15.020

`typename`在这种情况下，关键字和关键字之间没有技术差异`class`。这只是风格问题。`template<class T> struct X`如果它们以and开头，则前两个代码示例的含义不会改变`template <typename T> T func_name(int age, T human)`。`class`（当我的意思是暗示模板参数应该是一个类而不是类似的东西时，我倾向于使用`int`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:23:10.607

首次引入时`template`，它只允许现有关键字`class`作为指示符“这是一个模板参数”。由于当模板参数实际上不是一个类（函数指针、整数类型或其他一些“非类”类型）时，这变得相当愚蠢，所以`typename`引入 是为了更清楚地`template<typename T> struct something { T x; };`允许.`something<int> a;``something<name_of_class> a;`

出于所有意图和目的，`class`在`typename`模板参数是可互换的情况下，这只是您选择做的样式问题[大多数人可能更喜欢如果您坚持一个，而不是混合两者 - 或者，也许`class`在type 必须是一个类，并且`typename`当它可以是“任何”类型时]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:23:39.727

在模板参数定义的上下文中，关键字`typename`和`class`是同义词。

几乎每个人都有一个他们倾向于坚持的约定。我个人更喜欢始终`class`在此处使用并将`typename`关键字保留用于其他用途。

for 的另一个用途`typename`是在模板定义或声明中消除依赖类型的歧义。

这是[维基百科](http://en.wikipedia.org/wiki/Typename)的一个例子：

```
template <typename T>
void foo(const T& t)
{
   // declares a pointer to an object of type T::bar
   T::bar * p;
}

struct StructWithBarAsType {
   typedef int bar;
};

int main() {
   StructWithBarAsType x;
   foo(x);
} 
```

如果您仔细观察，您会注意到行中的`T::bar * p;`,`bar`取决于模板参数`T`，该参数对编译器来说是模棱两可的，因为`bar`它可以是类型或值，具体取决于`T`用于实例化模板的类型的上下文。默认值是`bar`作为一个值来处理，所以意思是乘以`T::bar`哪个`p`不是我们想要的。

`typename`解决方案是使用关键字限定依赖类型。

```
typename T::bar * p; 
```

这会提醒编译器我们打算将`bar`其视为一种类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:52:17.420

它们只有一处不同（声明模板参数时），那就是使用模板模板时。

以下是定义明确的C++

```
template <template <typename> class TT> struct example_one {}; 
```

虽然这不是：

```
template <template <typename> typename TT> struct example_two {}; 
```

由于您似乎刚刚开始使用 C++/模板，因此暂时不会担心这种极端情况 :-) 除了上面的类模板、函数模板之外，没关系：typename 和 class 是同义词。

# c# - 尝试将存储条件计算转换为 NHibernate

> ID：15343050
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:05.260
> 
> 标签：c#, nhibernate

我有很多代码可以执行条件计算。用户将在 UI 上做出选择（下拉菜单、单选按钮等），并根据这些选择为他们计算结果。以前，我会使用 ViewBag 在视图上显示计算结果。但是现在我想使用 NHibernate 存储这些，并且很难将其转换为可以存储计算结果的东西。我希望这不需要完全重写。

这是我之前在 Calculate.cs 中所做的示例（一个条件示例 - 注意：PriceQuote.cs 仅包含值）：

```
public decimal decSpouseFilingChapter7(QuoteViewModel quoteData)
{
    if (quoteData.QuotePartRecord.MaritalStatusDropDown == 
        MaritalStatus.Yes && 
        quoteData.QuotePartRecord.SpouseFilingRadioButton == 
        SpouseFiling.No)
            return PriceQuote.priceNoSpouseFilingChapter7; // see below
    else if (quoteData.QuotePartRecord.MaritalStatusDropDown == 
        MaritalStatus.Yes && 
        quoteData.QuotePartRecord.SpouseFilingRadioButton == 
        SpouseFiling.Yes)
            return PriceQuote.priceSpouseFilingChapter7; // see below
    else
        return 0;
} 
```

PriceQuote.cs 会有这个（只显示两个，它拥有超过 100 多个数量）：

```
public static decimal priceNoSpouseFilingChapter7 { get { return 100; } }
public static decimal priceSpouseFilingChapter7 { get { return 300; } } 
```

在Calculate.cs中，经过一系列条件后，我会这样做以得出计算结果：

```
public decimal TotalChapter7(QuoteViewModel quoteData)
{
    decimal total = PriceQuote.priceChapter7;

    total += this.decSpouseFilingChapter7(quoteData);
    total += this.decPaymentPlanChapter7(quoteData);
    total += this.decProcessingChapter7(quoteData);
    total += this.decSubmissionChapter7(quoteData);
    total += this.decDistrictChapter7(quoteData);
    total += this.decUnsecuredCreditor(quoteData);
    total += this.decGarnishment(quoteData);
    total += this.decTaxLiability(quoteData);
    total += this.decRentalEviction(quoteData);
    total += this.decRealEstateChapter7(quoteData);
    total += this.decRealEstateIntention(quoteData);
    total += this.decVehicleChapter7(quoteData);
    total += this.decVehicleIntention(quoteData);
    total += this.decOtherAssetChapter7(quoteData);
    total += this.decOtherAssetIntention(quoteData);
    total += this.decFinancialAccount(quoteData);
    total += this.decMeansTestAnalysisChapter7(quoteData);

    return total;
} 
```

正如你所看到的，我已经添加了所有其他条件来显示我所拥有的长度 - 这只是一个总计，我还有几十个（每个都有几十个条件）。

任何人都可以提供一些关于如何转换它的示例代码，因为我正在尝试`get/set`这样做：

```
public virtual decimal SpouseFilingChapter7
{
    get
    {
        return decSpouseFilingChapter7;
    }
    set
    {
        decSpouseFilingChapter7 = value;
    }
} 
```

这样我就可以做类似的事情：

```
public virtual decimal TotalChapter7
{
    get
    {
        return SpouseFilingChapter7 + ...;
    }
} 
```

但这显然是错误的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:39:27.577

it is not clear what NHibernate has to do with this but here is a possible refactoring

```
class Calculate
{
    private QuoteViewModel _quoteData;
    private PriceQuote _prices;

    public Calculate(QuoteViewModel quoteData, PriceQuote prices)
    {
        _quoteData = quoteData;
        _prices = prices;
    }

    public decimal SpouseFilingChapter7
    {
        get
        {
            if (_quoteData.QuotePartRecord.MaritalStatusDropDown == MaritalStatus.Yes)
            {
                return _quoteData.QuotePartRecord.SpouseFilingRadioButton == SpouseFiling.Yes ?
                    _prices.priceSpouseFilingChapter7 :
                    _prices.priceNoSpouseFilingChapter7;
            }
            else
                return 0;
        }
    }

    public decimal TotalChapter7
    {
        get
        {
            return _prices.priceChapter7 +
                SpouseFilingChapter7 +
                PaymentPlanChapter7 +
                ProcessingChapter7 +
                SubmissionChapter7 +
                DistrictChapter7 +
                UnsecuredCreditor +
                Garnishment +
                TaxLiability +
                RentalEviction +
                RealEstateChapter7 +
                RealEstateIntention +
                VehicleChapter7 +
                VehicleIntention +
                OtherAssetChapter7 +
                OtherAssetIntention +
                FinancialAccount +
                MeansTestAnalysisChapter7;
        }
    }
} 
```

# paypal - 无法登录贝宝开发者网站

> ID：15343051
> 
> 赞同：4
> 
> 时间：2013-03-11T15:57:14.703
> 
> 标签：paypal

我无法使用我的贝宝开发者帐户登录，因为贝宝更改了它。我忘记了密码，当我点击登录问题时，我被重定向到 paypal.com，我被视为 paypal 用户而不是开发人员，它告诉我我的邮件不存在。我什至无法创建新的开发者帐户。我仍然可以使用其中一个测试帐户登录，当我登录它时，它会显示在记录为“mymail@site.com”的页面中，这是我用于创建我目前不记得的开发者帐户的电子邮件它的密码，如果我打开 developer.paypal.com，它表明我没有登录它，尽管在沙箱中它说我已登录。我是非美国开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:16:24.443

从上周开始，您需要使用真实的 PayPal 帐户登录到[https://developer.paypal.com/上的 PayPal 开发者门户。](https://developer.paypal.com/)这可以是您自己的（如果您是唯一的开发者）或实时交易的 PayPal 帐户。

使用此帐户登录后，您将能够使用旧的开发人员登录名导入旧的测试帐户。

# php - (400) 使用库 google-api-php-client 权限时的错误请求

> ID：15343052
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:15.790
> 
> 标签：php, google-drive-api, google-api-php-client

上传文件并立即执行权限->更新：

```
public function  sharingFile() {
    $fileId = $this->file['id'];
    $permissionId = $this->file['userPermission']['id'];
    try {
        $permission = $this->service->permissions->get($fileId, $permissionId);
        $permission->setRole('writer');
        $permission->setType('default');
        print_r($permission);
        return $this->service->permissions->update($fileId, $permissionId, $permission);
    } catch (Exception $e) {
        return "Error: " . $e;
    }
    return NULL;
} 
```

并得到一个错误：

```
Error: exception 'Google_ServiceException' with message 'Error calling PUT
https://www.googleapis.com/drive/v2/files/0B6xE_F1PfpXTbF9IdHgxbEJueEk/permissions/me:
(400) Bad Request' in Z:\home\site.com\www\google-api-php-client\src\io\Google_REST.php:66
Stack trace:
#0 Z:\home\site.com\www\google-api-php-client\src\io\Google_REST.php(36):  Google_REST::decodeHttpResponse(Object(Google_HttpRequest))
#1 Z:\home\site.com\www\google-api-php-client\src\service\Google_ServiceResource.php(186): Google_REST::execute(Object(Google_HttpRequest))
#2 Z:\home\site.com\www\google-api-php-client\src\contrib\Google_DriveService.php(774): Google_ServiceResource->__call('update', Array) 
```

这可能是图书馆的一个错误？
请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:18:59.187

您的代码正在尝试更新文档所有者的权限并使该用户成为作家。云端硬盘文档必须只有一个所有者，因此您的请求无效。

# youtube-api - 更新 youtube 视频 (api v3) 会返回“找不到视频”，但可以在他们的 API 资源管理器中使用

> ID：15343054
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:19.303
> 
> 标签：youtube-api

我正在尝试通过一些 python 代码更新我的 youtube 视频上的描述。这是我的 PUT 请求

正文（这被转换为 json 字符串）：

```
{'id': <the video's youtube id>,
 'snippet': {
    'categoryId': <category id>,
    'channelId': <channel id>,
    'description': 'new title',
    'title': 'new title'
}} 
```

标题：

```
{'Authorization': 'Bearer <access token given via the oauth flow>' 
```

网址：

```
https://www.googleapis.com/youtube/v3/videos?part=snippet&key=<my_youtube_api_key> 
```

}

我收到了这样的回复：

```
{
 "error": {
  "errors": [
   {
    "message": "Video not found"
   }
  ],
  "code": 500,
  "message": "Video not found"
 }
} 
```

奇怪的是，此页面上的 API 资源管理器使用相同的查询： [https ://developers.google.com/youtube/v3/docs/videos/update](https://developers.google.com/youtube/v3/docs/videos/update)

我正在从我的 python 代码中复制和粘贴参数，所以它不像具有该 id 的 youtube 视频实际上并不存在。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:26:16.413

我所做的唯一更改是添加以下标题： `'Content-Type':'application/json'`

并且 API 调用现在可以工作了。

# python - 我将如何告诉 Python 读取我的文本文件？

> ID：15343055
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:20.243
> 
> 标签：python

```
def inputbook():
    question1 = input("Do you want to input book?yes/no:")
    if question1 == "yes":
        author = input("Please input author:")
        bookname = input("Please input book name:")
        isbn = input("Please input ISBN code")
        f = open("books.txt", "a")
        f.write("\n")
        f.write(author )
        f.write(bookname )
        f.write(isbn )
        f.close()
    elif question1 == "no":
        input("Press <enter>")
inputbook(); 
```

所以我有这样的代码，当我写最后一个字符串（isbn）时，我想让python读取books.txt文件。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:08:36.527

您的打开有问题，导致它无法阅读。您需要使用以下命令打开它：

```
f = open("books.txt", "+r") 
```

“a”代表追加，所以你将无法阅读带有 f 的 books.txt。

其次，到目前为止，readlines 或 readline 不是您的代码的好选择。您需要更新您的写入方法。由于在 .txt 文件中，作者、书名和 isbn 将被混淆在一起，您无法将它们分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:14:38.310

```
def inputbook():

    question1 = raw_input("Do you want to input book? (yes/no):")

    if question1 == "yes":
        author = raw_input("Please input author:")
        bookname = raw_input("Please input book name:")
        isbn = raw_input("Please input ISBN code:")
        f = open("books.txt", "a+")
        f.write("%s | %s | %s\n" % (author, bookname, isbn))
        f.close()

    elif question1 == "no":
        raw_input("Press <enter>")
        try:
            print open('books.txt', 'r').read()
        except IOError:
            print 'no book'

if __name__ == '__main__':
    inputbook() 
```

# ios - 使用 CAKeyFrameAnimation 实现时变绘图的高效动画

> ID：15343057
> 
> 赞同：1
> 
> 时间：2013-03-11T15:57:25.477
> 
> 标签：ios, core-animation, cakeyframeanimation, cashapelayer

我目前的目标是在我的 iOS 应用程序中为图片绘制动画，以便用户可以在他们的屏幕上看到类似[http://www.youtube.com/watch?v=xlDmk5WdaHk的内容。](http://www.youtube.com/watch?v=xlDmk5WdaHk)

我的绘图速度会随时间而变化，因此我使用`CAKeyFrameAnimation`和构建了我的动画`keyTimes`。目前，我只有一个指定绘图的所有点的 Bezier 路径，我将路径添加到`CAShapeLayer`对象，然后在开始动画时将路径传递给动画对象。

**我的问题：**完成的绘图立即出现在屏幕上，然后我的笔光标根据我的值沿着图片移动`keyTimes`，而不是让笔触颜色与我的笔光标在屏幕上的移动同时填充以产生与视频。

我注意到这个 SO 问题，推荐的解决方案是为动画中的每个点生成一个单独的路径：[How to Animate CoreGraphics Drawing of Shape Using CAKeyframeAnimation](https://stackoverflow.com/questions/9762236/how-to-animate-coregraphics-drawing-of-shape-using-cakeyframeanimation)

鉴于我有 100-300 个单独的点，是否有一种更有效的方法来生成时变绘图，而不是使用这种形式的路径创建一个包含几百条路径（每条路径中有几百个值）的数组：

```
path0 = point0...point0...point0...point0... 
path1 = point0...point1...point1...point1...
path2 = point0...point1...point2...point2...
path3 = point0...point1...point2...point3... 
```

然后采用该路径数组，将其传递给`myAnimation.values`我`values` 的`keyTimes`? 或者这真的是解决这个问题的最好方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T20:45:51.277

如果您的点在贝塞尔路径上，肯定有一种更有效的方法。CAShapeLayer 有两个小属性，称为 strokeStart 和 strokeEnd。如果您最初将 strokeEnd 设置为零，那么您的路径将不会显示。在 1.0 时，它将完全显示。将值从零增加到一将相应地跟踪您的曲线。这是一个动画属性，因此将其值与其他动画的关键时间同步，您的绘图将随着“笔”的移动而出现。

# javascript - JavaScript 扩展 Array 并向子原型添加方法？

> ID：15343058
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:33.277
> 
> 标签：javascript, arrays

我想创建一个类似于简单音乐播放列表（数组）的 js 类。我想用 ID 实例化这个播放列表，每个 ID 都是我数据库中的轨道 ID。我有这样的界面：

```
function Playlist() {
    Playlist.prototype.current = 0;
    Playlist.prototype.prev = function() {
        if (this.current-1 < 0) {
            return null;
        }
        return this[--this.current];
    };
    Playlist.prototype.next = function() {
        if (this.current+1 >= this.length) { // length is index + 1
            return null;
        }
        return this[++this.current];
    };
    Playlist.prototype.seek = function(id) {
        for (i in this) {
            if (this[i] == id) {
                this.current = parseInt(i);
                return i;
            }
        }

        return false;
    };
    Playlist.prototype.getCurrent() {
            return this.current;
    };
}; 
```

上面的代码没有做我想要的，因为我`class`认为它定义了它的方法，可以像这样实例化：

```
var newPlaylist = Playlist(2,3,5,10/* those are my ids */); 
```

目前我发现的唯一方法是：

```
Playlist.prototype = new Array(2, 3, 5, 10/* those are my ids */); 
```

这没有任何意义，因为它可以被实例化为不同的对象。任何想法都非常受欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:17:09.780

最好的方法——嵌套数组；

```
function Playlist() {
    this.current = 0;
    this.list = Array.prototype.slice.call(arguments);;
};

Playlist.prototype.prev = function() {
    if (this.current-1 < 0) {
        return null;
    }
    return this.list[--this.current];
};
Playlist.prototype.next = function() {
    if (this.current+1 >= this.list.length) { // length is index + 1
        return null;
    }
    return this.list[++this.current];
};
Playlist.prototype.getCurrent = function() {
    return this.current;
};

var newPlaylist = new Playlist(2,3,5,10/* those are my ids */); 
```

但是您不能使用 list[i] 来按索引获取元素，但您只需要在提供类似功能的类中添加 at() 方法

```
PlayList.prototype.at(i) {
    return this.list[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:18:23.940

由于您[不能子类`Array`](http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array)化，您应该使用`Playlist`构造函数构建包装器对象：

```
Playlist = (function() {
    function Playlist(list) {
        this.list = list || [];
    }

    Playlist.prototype.current = 0;
    Playlist.prototype.prev = function() {
        if (this.current <= 0)
            return null;
        return this.list[--this.current];
    };
    Playlist.prototype.next = function() {
        if (this.current+1 >= this.length)
            return null;
        return this.list[++this.current];
    };
    Playlist.prototype.seek = function(id) {
        return this.list.indexOf(id);
    };

    return Playlist;
})(); 
```

用法：

```
var newPlaylist = new Playlist([2,3,5,10]); 
```

# ios - 如何使用 UISearchBar 搜索数组

> ID：15343062
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:40.757
> 
> 标签：ios, objective-c, xcode, uisearchbar, viewcontroller

我有多个`ViewControllers`链接到一个初始的`ViewController`. 每个额外的`ViewControllers`都充当“网球场”，将`player1`和`player2`的名称输入`UITextFields`，然后存储在数组中。

是否有可能`UISearchBar`在首字母上使用 a`ViewController`来搜索存储在各种变量之一中的玩家名称，然后将该结果链接到`ViewController`它出现的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:00:44.480

回想一下**MVC**。

您永远不会将数据或模型存储在任何视图控制器中。您将它们存储在一个模型中，该模型可以是数组、字典、plist 甚至是数据库。

因此，您需要使用 UISearchBar 从模型中进行搜索。

**如果您显示您的代码，我们可以更正它们。*

# java - 如何格式化时间，包括毫秒

> ID：15343063
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:57:40.870
> 
> 标签：java, android

我正在尝试在 Android 中获取格式为 YYYYMMDD-HHMMSSMilliseconds 的时间字符串

例如：20130312-1723437520（2013 年 3 月 12 日，17 小时 23 分 43 秒 7520 毫秒）

```
Time now = new Time();
now.setToNow();
String snapshotTime = now.format("yyyyMMdd-HHmmss"); 
```

首先，上面的代码甚至不能正常工作。`snapshotTime`始终设置为格式字符串本身。

其次，根据[Android 文档](http://developer.android.com/reference/android/text/format/Time.html)，没有办法记录毫秒。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:06:05.133

看[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)类，可以把一个Date对象格式化成需要的格式（大写的S会给出millis）

```
SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
Date now = new Date();
String str = fmt.format(now); 
```

也就是说，使用 Joda Time 通常是个好主意（Proguard 会剥离你不使用的代码）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:09:25.340

如 Android 文档中所述，您必须使用 strftime 格式。

```
Time now = new Time();
now.setToNow();
String snapshotTime = now.format("%Y%m%d-%H%M%S"); 
```

如果你真的想使用毫秒，我会推荐 SimpleDateFormat。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:23:31.417

尝试以毫秒为单位获取时间作为 unix 时间戳

```
long currentTime = System.currentTimeMillis(); 
```

或将您的时间转换为毫秒：

```
long currentTime = now.toMillis(true); 
```

然后您可以将其转换为您想要的日期：

```
Time now = new Time();
now.set(currentTime);
String snapshotTime = now.format("%Y%m%d-%H%M%S")+""+(currentTime%1000); 
```

没有测试它，但希望它有效:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:00:37.840

我建议使用[这个](http://joda-time.sourceforge.net/)小库，它在处理日期时非常有用。看看 DateTimeFormatter 类。

作为替代使用 Calendar 和 SimpleDateFormater （当然，您必须调整格式字符串，有关符号的说明，请参见[this ）](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

```
Calendar c = new GregorianCalendar();
SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy-SSSS");
String date = sdf.format(c.getTime()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T16:09:20.677

你可以试试这个：

```
public static String format() {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyyMMdd-HHmmssSSS");
        Date now = new Date();
        return simpleDateFormat.format(now);
    } 
```

# html - HTML/CSS 避免在新行上开始文本字段

> ID：15343065
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:45.993
> 
> 标签：html, css, twitter-bootstrap, inline

我正在使用引导框架，并且试图使其流畅，因此它在每个设备上都认为“完美”。但是，我目前遇到了一个我无法解决的问题。当您调整它的大小时，文本字段会在某个时间点从新行开始。（现场演示： http: [//veiling.jamieknoef.nl](http://veiling.jamieknoef.nl)，登录文本字段）它应该保持一致。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:23:31.817

尝试：

```
.login { min-width: 140px; } 
```

话虽如此。一旦屏幕开始变窄，您需要考虑重新安排布局，因为它会在较小的设备上出现各种问题 - 这就是[媒体查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)的来源。

# javascript - div中的ajax html

> ID：15343066
> 
> 赞同：0
> 
> 时间：2013-03-11T15:57:46.353
> 
> 标签：javascript, jquery, html, ajax

在我的 html 代码中，我有这个

```
<li class="register"><a href="">Registreer</a></li> 
```

和

```
<div id="content">

</div> 
```

我尝试使用头部中的以下代码将 html 文件加载到 div

```
<script type="text/javascript" src="includes/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="includes/js/navbar.js"></script> 
```

导航栏.js：

```
$(document).ready(function() {
$(function(){
  $(".register").click(function(){
    $("#content").load("/signup.html");
    document.write("test");
  });
});
}); 
```

我已经在我的网页文件夹中复制了 signup.html。但它不起作用。但是它确实显示了 1/4 秒的测试。我也尝试将我的 js 代码直接放在 html 文件中，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:58:58.593

你在重复自己：

```
$(document).ready(function() {
   $(function(){ //same as $(document).ready(function() {
     $(".register").click(function(){
       $("#content").load("/signup.html");
       document.write("test");
     });
   });
}); 
```

尝试这样**做**：

```
 $(function(){ 
     $(".register").click(function(){
       $("#content").load("/signup.html");
       document.write("test");
     });
   }); 
```

此外，您可能想尝试停止链接的默认事件：

```
 $(function(){ 
     $(".register").click(function(){
       $("#content").load("/signup.html");
       document.write("test");
     });         
     $(".register").on('click', 'a', function(e){
        e.preventDefault(); //prevents action of the link
     });
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:02:40.493

```
$(document).ready(function () {
    $(".register").click(function(){
        $("#content").load("/signup.html");
        return false;
     });
}); 
```

通过从 click 事件返回 false ，超链接元素将知道不执行其默认操作（这就是页面刷新的原因）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:03:00.673

When using a relative URL, the URL is relative to the page on which the JavaScript is run. In your case, since you are using the string '/signup.html', It will look for the singup.html file up one directory from the directory of the page currently being viewed.

Use the F12 Development Console in IE or Chrome, FireBug, of Fiddler to view your AJAX requests and results to see whether your 'singup.html' is being loading from the appropriate directory. You can also view source after the load completes to see if there is HTML beiing loaded into your DIV.

# angularjs - 在输入元素中使用 angularjs 过滤器

> ID：15343068
> 
> 赞同：74
> 
> 时间：2013-03-11T15:57:54.680
> 
> 标签：angularjs, asp.net-web-api, angularjs-directive

我希望我没有错过 doco 中的任何明显内容，如果我有，我相信有人会提供帮助。

我正在使用 asp.net webapi 返回一个带有日期字段的 DTO。这些是使用 JSON.Net 序列化的（格式为“2013-03-11T12:37:38.693”）。

我想使用一个过滤器，但在一个 INPUT 元素中，这是否可能或者我应该创建一个新的过滤器或指令来完成这个？

```
// this just displays the text value
<input ui-datetime type="text" data-ng-model="entity.date" /> 
// this doesn't work at all
<input ui-datetime type="text" data-ng-model="{{entity.date|date:'dd/MM/yyyy HH:mm:ss a'}}" /> 
// this works fine
{{entity.date|date:'dd/MM/yyyy HH:mm:ss a'}} 
```

有没有我错过的捷径？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-11T18:49:15.780

简而言之：如果您希望数据在视图和模型中具有不同的表示形式，您将需要一个**指令**，您可以将其视为**双向过滤器**。

你的指令看起来像

```
angular.module('myApp').directive('myDirective', function() {
  return {
    require: 'ngModel',
    link: function(scope, element, attrs, ngModelController) {
      ngModelController.$parsers.push(function(data) {
        //convert data from view format to model format
        return data; //converted
      });

      ngModelController.$formatters.push(function(data) {
        //convert data from model format to view format
        return data; //converted
      });
    }
  }
}); 
```

HTML：

```
<input my-directive type="text" data-ng-model="entity.date" /> 
```

这是一个有效的[jsFiddle](http://jsfiddle.net/afbh6/)示例。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-11T19:05:33.393

在输入字段和模型中使用不同的值违背了 ng-model 的本质。所以我建议你采取最简单的方法，在控制器中应用你的过滤器，使用一个单独的变量来格式化日期，并使用观察者来保持格式化日期和原始日期同步：

HTML：

```
<input ui-datetime type="text" data-ng-model="formattedDate" /> 
```

JS：

```
app.controller('AppController', function($scope, $filter){

  $scope.$watch('entity.date', function(unformattedDate){
    $scope.formattedDate = $filter('date')(unformattedDate, 'dd/MM/yyyy HH:mm:ss a');
  });

  $scope.$watch('formattedDate', function(formattedDate){
    $scope.entity.date = $filter('date')(formattedDate, 'yyy/MM/dd');
  });

  $scope.entity = {date: '2012/12/28'};

}); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-09-10T15:13:14.983

## **如果您的输入仅显示数据**

如果您确实需要一个输入来简单地**显示**一些信息，并且它是一些其他元素会**更改**Angular 模型，那么您可以进行更轻松的更改。

与其编写新指令，不如简单地不要**使用**`ng-model`and 使用 good, old `value`。

所以而不是：

```
<input data-ng-model={{entity.date|date:'dd/MM/yyyy HH:mm:ss'}}" /> 
```

这将做：

```
<input value="{{entity.date|date:'dd/MM/yyyy HH:mm:ss'}}" /> 
```

就像一个魅力:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-19T06:44:25.880

格式化数字的完整示例，每 3 个字符插入一次空格，从末尾开始：

```
'use strict'
String::reverse = ->
  @split('').reverse().join('')

app = angular.module('app', [])
app.directive 'intersperse', ->
  require: 'ngModel'
  link: (scope, element, attrs, modelCtrl) ->
    modelCtrl.$formatters.push (input) ->
      return unless input?
      input = input.toString()
      input.reverse().replace(/(.{3})/g, '$1 ').reverse()
    modelCtrl.$parsers.push (input) ->
      return unless input?
      input.replace(/\s/g, '') 
```

**用法：**

```
<input ng-model="price" intersperse/> 
```

**Plunkr 示例：[http ://plnkr.co/edit/qo0h9z](http://plnkr.co/edit/qo0h9z)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-09T19:50:43.700

Angular 内置了[日期格式](https://docs.angularjs.org/api/ng/filter/date)功能，但要将其应用于最终希望获取原始（未格式化）日期的输入，您需要创建一个自定义[指令](https://docs.angularjs.org/guide/directive)。

示例指令：

```
(function () {
    'use strict';

    angular.module('myApp').directive('utcDate', ['$filter', function ($filter) {
        return {
            restrict: 'A', //restricting to (A)ttributes
            require: 'ngModel',
            link: function (scope, elem, attrs, model) {
                if (!model) return;

                var format = 'MM/dd/yyyy h:mm:ss a';
                var timezone = 'UTC';

                //format the date for display
                model.$formatters.push(function (value) {
                    //using built-in date filter
                    return $filter('date')(value, format, timezone);
                });

                //remove formatting to get raw date value
                model.$parsers.push(function (value) {
                    var date = Date.parse(value);
                    return !isNaN(date) ? new Date(date) : undefined;
                });
            }
        };
    }]);
})(); 
```

然后应用它：

```
<input type="text" ng-model="$ctrl.DateField" utc-date /> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-03-11T16:26:44.800

您不需要从零开始创建新的过滤器，因为 Angular 已经为日期类型提供了内置过滤器。 [http://docs.angularjs.org/api/ng.filter:date](http://docs.angularjs.org/api/ng.filter:date)

我相信这正是你所需要的。

# javascript - jquery.min.js 加载资源失败

> ID：15343070
> 
> 赞同：9
> 
> 时间：2013-03-11T15:58:11.470
> 
> 标签：javascript, debugging

为什么这个链接不起作用？

**//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="Description" content=" [wstaw tu opis strony] ">
    <meta name="Keywords" content=" [wstaw tu slowa kluczowe] ">
    <meta name="Author" content=" [dane autora] ">
    <title>[tytuł strony] </title>
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".animat_kon").click(function () {
                $(".animat_text").slideToggle("slow");
            });
        });
    </script>
</head> 
```

错误示例： ![在此处输入图像描述](../Images/59d87ed0d2d1a32c2581f478402c0081.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T16:01:56.720

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

你没有包括 http://

每当您直接从服务器下载时，请使用`http://`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T16:01:02.723

改变

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

进入

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

你错过了`http:`. 您可以跳过`http:`让您的浏览器自动在 HTTPS 和 HTTP 之间进行选择。但是在您的情况下，调试工具似乎不理解这种语法。

在此处查找更多信息：[我可以将所有 http:// 链接更改为 // 吗？](https://stackoverflow.com/questions/4831741/can-i-change-all-my-http-links-to-just)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T16:01:31.337

链接必须以`http://`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-29T09:58:55.407

请将您的脚本 src 更改为：

```
 <link rel="stylesheet" href="style.css" type="text/css"> 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript"> 
```

脚本 src 应该以***`http://`***

# wordpress - Wordpress 图像和 p 解析

> ID：15343073
> 
> 赞同：0
> 
> 时间：2013-03-11T15:58:16.660
> 
> 标签：wordpress, parsing

我有一个应该浮动到文本的图像，它确实在主题内。但是在移动主题中，源代码最终是

```
<p> <img /> </p>
<p> TEXT </p> 
```

代替

```
<p> <img /> TEXT </p> 
```

我在哪里以及如何解决这个问题？

我是 wp 的新手（我知道 php），我正在修改其他人构建的主题，所以我不太了解。如果这有帮助，原来的主题是二十十，移动主题被称为移动包基础，所以我想我应该看看初始主题是如何工作和解析内容的，然后修改移动包一，但我不知道在哪里看

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:17:43.217

额外的段落可能是由`wpautop`. 您可以通过将以下内容添加到`functions.php`文件中来禁用它。

```
remove_filter( 'the_content', 'wpautop' ); // Remove auto formatting in full content 
remove_filter( 'the_excerpt', 'wpautop' ); // Remove auto formatting in post excerpts 
```

# sql - 更新plpgsql中触发器函数中的多个列

> ID：15343075
> 
> 赞同：7
> 
> 时间：2013-03-11T15:58:33.710
> 
> 标签：sql, postgresql, triggers, plpgsql, dynamic-sql

给定以下架构：

```
create table account_type_a (
  id SERIAL UNIQUE PRIMARY KEY,
  some_column VARCHAR
);

create table account_type_b (
  id SERIAL UNIQUE PRIMARY KEY,
  some_other_column VARCHAR
);

create view account_type_a view AS select * from account_type_a;
create view account_type_b view AS select * from account_type_b; 
```

我尝试在 plpgsql 中创建一个*通用*触发器函数，它可以更新视图：

```
create trigger trUpdate instead of UPDATE on account_view_type_a
for each row execute procedure updateAccount();    
create trigger trUpdate instead of UPDATE on account_view_type_a
for each row execute procedure updateAccount(); 
```

我的一个不成功的尝试是：

```
create function updateAccount() returns trigger as $$
declare
  target_table varchar := substring(TG_TABLE_NAME from '(.+)_view');
  cols varchar;
begin
  execute 'select string_agg(column_name,$1) from information_schema.columns
           where table_name = $2' using ',', target_table into cols;
  execute 'update ' || target_table || ' set (' || cols || ') =  select ($1).*
           where id = ($1).id' using NEW;
  return NULL;
end;
$$ language plpgsql; 
```

问题在于`update`声明。我无法想出在这里可以使用的语法。我已经在 PL/Perl 中成功实现了这一点，但会对仅 plpgsql 的解决方案感兴趣。
有任何想法吗？

**更新**

正如@Erwin Brandstetter 所建议的，这是我的PL/Perl 解决方案的代码。我采纳了他的一些建议。

```
create function f_tr_up() returns trigger as $$
  use strict;
  use warnings;
  my $target_table = quote_ident($_TD->{'table_name'}) =~ s/^([\w]+)_view$/$1/r;
  my $NEW = $_TD->{'new'};
  my $cols = join(',', map { quote_ident($_) } keys $NEW);
  my $vals = join(',', map { quote_literal($_) } values $NEW);
  my $query = sprintf(
    "update %s set (%s) = (%s) where id = %d",
    $target_table,
    $cols,
    $vals,
    $NEW->{'id'});
  spi_exec_query($query);
return;
$$ language plperl; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T00:32:28.600

虽然[@Gary 的回答](https://stackoverflow.com/a/15343288/939860)在技术上是正确的，但他没有提到 PostgreSQL**确实**支持这种形式：

```
UPDATE tbl
SET (col1, col2, ...) = (expression1, expression2, ..) 
```

再次阅读[手册。`UPDATE`](http://www.postgresql.org/docs/current/interactive/sql-update.html)

使用动态 SQL 完成他的工作仍然很棘手。由于您没有指定，我假设视图包含与其基础表相同的列。

```
CREATE VIEW tbl_view AS SELECT * FROM tbl; 
```

### 问题

*   里面的特殊记录`NEW`是不可见的[`EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)。我`NEW`使用. `USING`_`EXECUTE`

*   如前所述，`UPDATE`列表形式需要单独的*值*。我使用子选择将记录拆分为单独的列：

    ```
    UPDATE ...
    FROM  (SELECT ($1).*) x 
    ```

    （括号`$1`不是可选的。）这使我可以简单地使用`string_agg()`从目录表构建的两个列列表：一个有表限定，一个没有表限定。

*   无法将行值作为一个整体分配给各个列。[手册：](https://www.postgresql.org/docs/current/static/sql-update.html)

    > 根据标准，带括号的目标列名称子列表的源值可以是产生正确列数的任何行值表达式。PostgreSQL 只允许源值是行构造函数或子`SELECT`。

*   `INSERT`实现更简单。假设视图和表的结构相同，我省略了列定义列表。（可以改进，见下文。）

### 解决方案

我对您的方法进行了许多更新，以使其大放异彩。

触发功能`UPDATE`：

```
CREATE OR REPLACE FUNCTION f_trg_up()
  RETURNS TRIGGER AS
$func$
DECLARE
   tbl  text := quote_ident(TG_TABLE_SCHEMA) || '.'
             || quote_ident(substring(TG_TABLE_NAME from '(.+)_view$'));
   cols text;
   vals text;
BEGIN
   SELECT INTO cols, vals
          string_agg(quote_ident(attname), ', ')
         ,string_agg('x.' || quote_ident(attname), ', ')
   FROM   pg_attribute
   WHERE  attrelid = tbl::regclass
   AND    NOT attisdropped   -- no dropped (dead) columns
   AND    attnum > 0;        -- no system columns

   EXECUTE format('
   UPDATE %s t
   SET   (%s) = (%s)
   FROM  (SELECT ($1).*) x
   WHERE  t.id = ($2).id'
   , tbl, cols, vals) -- assuming unique "id" in every table
   USING NEW, OLD;

   RETURN NEW;
END
$func$ LANGUAGE plpgsql; 
```

触发功能`INSERT`：

```
CREATE OR REPLACE FUNCTION f_trg_ins()
  RETURNS TRIGGER AS
$func$
DECLARE
    tbl text := quote_ident(TG_TABLE_SCHEMA) || '.'
             || quote_ident(substring(TG_TABLE_NAME from '(.+)_view$'));
BEGIN
   EXECUTE 'INSERT INTO ' || tbl || ' SELECT ($1).*'
   USING NEW;

   RETURN NEW;  -- don't return NULL unless you know what you're doing
END
$func$ LANGUAGE plpgsql; 
```

触发器：

```
CREATE TRIGGER trg_instead_up
INSTEAD OF UPDATE ON a_view
FOR EACH ROW EXECUTE PROCEDURE f_trg_up();

CREATE TRIGGER trg_instead_ins
INSTEAD OF INSERT ON a_view
FOR EACH ROW EXECUTE PROCEDURE f_trg_ins(); 
```

[**SQL Fiddle**](http://www.sqlfiddle.com/#!12/bc774/1)演示`INSERT`和`UPDATE`.

### 要点

*   包括模式名称以使表引用明确。同一个数据库中的多个模式中可以有多个相同表名的实例！

*   查询`pg_attribute`而不是`information_schema.columns`. 这不太便携，但*速度*更快，并且允许我使用 table-OID。

    *   [如何检查给定模式中是否存在表](https://stackoverflow.com/questions/20582500/how-to-check-if-a-table-exists-in-a-given-schema/24089729#24089729)
*   当将表名作为字符串处理时，例如在为动态 SQL 构建查询时，**表名对****[SQLi是不安全的。](http://en.wikipedia.org/wiki/Sql_injection)**[`quote_ident()`使用或`format()`](http://www.postgresql.org/docs/current/interactive/functions-string.html)使用[对象标识符类型](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)进行转义。这包括[特殊的触发函数变量`TG_TABLE_SCHEMA`和`TG_TABLE_NAME`](http://www.postgresql.org/docs/current/interactive/plpgsql-trigger.html)！

*   转换为[对象标识符类型`regclass`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)以断言表名有效并获取目录查找的 OID。

*   可选择用于[`format()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-FORMAT)安全地构建动态查询字符串。

*   目录表上的第一个查询不需要动态 SQL。更快，更简单。

*   除非您知道自己在做什么，否则在这些触发函数中使用`RETURN NEW`而不是。`RETURN NULL`（`NULL`将取消`INSERT`当前行的。）

*   这个简单的版本假设每个表（和视图）都有一个名为`id`. 更复杂的版本可能会动态使用主键。

*   的函数`UPDATE`允许视图和表的列按*任意顺序排列*，只要集合相同即可。for 函数`INSERT`期望 view 和 table 的列*顺序相同*。如果要允许任意顺序，请在`INSERT`命令中添加列定义列表，就像使用`UPDATE`.

*   更新版本还涵盖了`id`通过`OLD`额外使用对列的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:09:39.443

Postgresql 不支持使用`set (col1,col2) = select val1,val2`语法更新多个列。

为了在 postgresql 中达到同样的效果，您可以使用

```
update target_table
set col1 = d.val1,
    col2 = d.val2
from source_table d
where d.id = target_table.id 
```

这将使动态查询的构建更加复杂，因为您需要将正在使用的列名列表迭代到各个字段中。我建议您使用`array_agg`而不是`string_agg`作为数组比再次拆分字符串更容易处理。

[Postgresql 更新语法](http://www.postgresql.org/docs/9.1/static/sql-update.html)

[关于 array_agg 函数的文档](http://www.postgresql.org/docs/9.1/static/functions-aggregate.html)

# sql - VS 2005 DateTime Picker 日期值和 SQL 比较

> ID：15343077
> 
> 赞同：1
> 
> 时间：2013-03-11T15:58:47.553
> 
> 标签：sql, vb.net, sql-server-2008, visual-studio-2005

我对 VS 和 .NET 还很陌生。

我创建了一个新表单（在现有的 VB.NET 应用程序中），它将数据从 SQL Server 2008 DB 检索到 DataGridView 控件中。

我还需要允许我的用户过滤显示的数据，所以我添加了两个 Datetimepicker 控件——一个用于开始日期，一个用于结束日期。

当用户单击“应用过滤器”按钮时，我想过滤网格客户端中的数据（仅用于复制和粘贴到 MS Excel）或使用两个日期作为过滤器重新查询数据库...

所以我在我的 VB 代码中构建了一个 SQL 查询字符串，如下所示：

```
 sSQLQry = "SELECT * FROM ReturnUnpaidData_Audit WHERE [AuditDateTime]<= " & Me.dtPicketEndDate.Value.ToString & " AND [AuditDateTime]>= " & Me.dtPicketEndDate.Value.ToString 
```

这给了我一个这样的查询字符串：

```
SELECT * FROM ReturnUnpaidData_Audit WHERE [AuditDateTime]>= 01/03/2013 15:28:09 AND [AuditDateTime]>= 01/03/2013 15:28:09 
```

这（不出所料）不起作用......

所以我有点卡住了 - 有人可以指出我正确的方向或帮助我找到最好的方法。

顺便说一句，它适用于小型应用程序，数据不多（最有可能只有几行），4 或 5 个用户......无需过多担心大数据或性能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:09:50.850

您需要在日期值周围加上引号，并在没有时间的情况下对其进行格式化？
`WHERE [AuditDateTime]<='" & Me.dtPicketEndDate.Value.ToString("yyyy-MM-dd") & "'"`

而且，`BETWEEN`稍微优雅一些​​。
[http://msdn.microsoft.com/en-us/library/ms187922.aspx](http://msdn.microsoft.com/en-us/library/ms187922.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T07:18:51.760

因为您只使用**没有时间的日期值**。您也可以使用 `DtPicketEndDate.Value.date`而不是格式化。

# macos - 在 Cocoa 中强制低分辨率？

> ID：15343087
> 
> 赞同：1
> 
> 时间：2013-03-11T15:59:27.400
> 
> 标签：macos, cocoa, retina-display

我正在**@2x**开发我的应用程序。

有时我想看看设计在低分辨率设备上的样子。
我注意到您可以右键单击应用程序，转到 Info 面板，然后选中**Open in Low Resolution**。

![在此处输入图像描述](../Images/f6c58b895c5e6be10a378f72d78eb542.png)

但是，它并不是那么容易访问。
有没有更简单的方法来强制应用程序在代码中以**@1x**运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:04:39.253

要以低分辨率打开应用程序，您需要在 Plist 中更改以下设置。

```
NSHighResolutionCapable = false 
```

# javascript - 一个简单的 JavaScript 函数，在括号之间

> ID：15343088
> 
> 赞同：3
> 
> 时间：2013-03-11T15:59:28.220
> 
> 标签：javascript, jquery, html

我已经下载了一个外部 JavaScript 文件并想为它创建一个 HTML5 用户界面。我不明白为什么 JavaScript 代码（见下文）会这样启动他的主要功能。

```
//JavaScript Code
(function(Raphael) {
      // some codes here
})(window.Raphael); 
```

为什么括号之间的函数？

“window.Raphael”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:01:36.203

这是[自调用匿名函数](https://stackoverflow.com/questions/3259496/jquery-document-ready-vs-self-calling-anonymous-function)的示例。

您正在传入`window.Raphael`这个函数，该函数本质上是在函数内部“重命名”为 Raphael。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T16:01:01.087

那是一个立即执行的功能（IIFE）。意思是之后立即定义和执行的那个。

在这种情况下，它也使用[了 RaphaelJS](http://raphaeljs.com/)，它是一个 SVG 库。IIFE 接受一个大概由 Raphael 定义的全局变量，可以在`window.Raphael`

# android - 强制动态生成的复选框只允许选择一个

> ID：15343091
> 
> 赞同：1
> 
> 时间：2013-03-11T15:59:47.337
> 
> 标签：android, checkbox

我正在动态生成一系列复选框。

![在此处输入图像描述](../Images/966741d12e729e9cdee8835488395966.png)

我可以从中选中任何一个复选框：

![在此处输入图像描述](../Images/510df7eefbd1b238670073d7de712f55.png)

单击另一个复选框时如何取消选中选中的复选框？

已编辑

在这里我添加了我的 RadioGroup 实现，我得到了 IllegalStateException final LinearLayout firstRowTxtLayout = new LinearLayout(fContext); firstRowTxtLayout.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));

```
 rbGroup.setLayoutParams(new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    rbButton = new RadioButton(fContext);
    rbButton.setLayoutParams(new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    rbButton.setId(rbTagincreament);
    rbGroup.addView(rbButton); 
```

然后我将此 radioGroup 添加到另一个主要线性布局中

```
firstRowTxtLayout.addView(rbGroup); here i am getting the exception 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:00:10.730

![在此处输入图像描述](../Images/310962ee8de84182c992e4afd5659d4f.png)

我将 RadioGroup 与自定义 RadioButton 一起使用，但我将 RadioButton 更改为 Checkbox。它将表现得像一个单选按钮，即只有一个选择。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearlayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </LinearLayout>

</LinearLayout> 
```

MainActivity.java

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LinearLayout linear=(LinearLayout) findViewById(R.id.linearlayout);

        final RadioButton[] rb = new RadioButton[5];
        RadioGroup rg = new RadioGroup(this); //create the RadioGroup
        rg.setOrientation(RadioGroup.VERTICAL);//or RadioGroup.VERTICAL
        for(int i=0; i<5; i++){
            rb[i]  = new RadioButton(this);
            rb[i].setButtonDrawable(R.drawable.single_radio_chice);
            rg.addView(rb[i]); 

        }
        LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT
        );
        p.setMargins(10, 10, 10, 10);
        linear.addView(rg,p);

    } 
```

选择器

single_radio_chice

```
<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_checked="false" 
        android:drawable="@drawable/check_off" />

    <item android:state_checked="true" 
        android:drawable="@drawable/check_on" />
</selector> 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:05:00.503

获取不同变量中所有复选框的引用。

```
satView.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

   @Override
   public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
          if(isChecked) {
            checkBox.setChecked(false); //Here call this method on all checkbox except you want to check single checkbox.
        }
   }
} 
```

但更好的方法是使用`RadioGroup`，`RadioButton`因为单选按钮允许用户从一组选项中选择一个选项。[在这里](http://developer.android.com/guide/topics/ui/controls/radiobutton.html)阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:03:03.550

将您动态创建的所有内容`RadioButtons`放入数组中。当你检查其中一个时，检查所有其他的，然后`setChecked(false);`

如前所述`RadioGroup`，也可以是一个解决方案。但是由于某种原因，如果您想将其他对象（例如.`ImageViews`或.`TextView``RadioButtons`

# c# - 从第 1131 行开始映射片段时出错：表键的潜在运行时违规.. 在概念方面，但它们不适用于

> ID：15343092
> 
> 赞同：1
> 
> 时间：2013-03-11T15:59:53.957
> 
> 标签：c#, .net, database, entity-framework

我在我的应用程序中使用 EF

我收到以下错误：

> 错误 1 ​​错误 3002：从第 1131 行开始映射片段时出现问题：表 CTIDS 的键（CTIDS.CTID、CTIDS.Carrier）的潜在运行时违规：列（CTIDS.CTID、CTIDS.Carrier）映射到 EntitySet CTIDS 的属性（CTIDS.Carrier）。 CTID1、CTIDS.Carrier）在概念方面，但它们不构成 EntitySet 的关键属性（CTIDS.AppVersion、CTIDS.CTID1、CTIDS.Carrier）。D:\MaM\Server\ClientServices\Dev\ClientService 1.6\Conduit.Mam.ClientService.DAL.EntityFramework\MamModel.edmx 1132 15 Conduit.Mam.ClientService.Common.EntityFramework

双击错误导致这部分在`edmx`：

```
 <EntitySetMapping Name="CTIDS">
        <EntityTypeMapping TypeName="MaMDBModel.CTID">
          <MappingFragment StoreEntitySet="CTIDS">
            <ScalarProperty Name="Carrier" ColumnName="Carrier" />
            <ScalarProperty Name="AppVersion" ColumnName="AppVersion" />
            <ScalarProperty Name="CTID1" ColumnName="CTID" />
          </MappingFragment>
        </EntityTypeMapping> 
```

我有一张带有composite_PK 的表

这正是我的反映`edmx`：

> ```
>  <EntityType Name="CTIDS">
>       <Key>
>         <PropertyRef Name="CTID" />
>         <PropertyRef Name="Carrier" />
>       </Key>
>       <Property Name="CTID" Type="varchar" Nullable="false" MaxLength="50" />
>       <Property Name="AppVersion" Type="varchar" Nullable="false" MaxLength="50" />
>       <Property Name="Carrier" Type="int" Nullable="false" />
>     </EntityType> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:49:01.273

您只发布了描述商店的实体，但没有发布映射到商店实体的概念实体。从异常消息看来，概念实体具有由 3 个属性（CTIDS.AppVersion、CTIDS.CTID1、CTIDS.Carrier）组成的复合键，而商店实体（您显示的那个）具有由 2 个属性组成的复合实体(CTIDS.CTID, CTIDS.Carrier) 这就是异常的原因。

# c# - 从文件中删除包含多个字符串的行的最有效方法？

> ID：15343093
> 
> 赞同：2
> 
> 时间：2013-03-11T15:59:53.980
> 
> 标签：c#

我想在读取文件（主机文件）时找到删除字符串 1 和字符串 2 的最有效方法，并删除包含字符串 1 或字符串 2 的整行。

目前我有，而且显然很迟钝。有什么更好的方法？

```
using(StreamReader sr = File.OpenText(path)){
    while ((stringToRemove = sr.ReadLine()) != null)
    {
        if (!stringToRemove.Contains("string1"))
        {
            if (!stringToRemove.Contains("string2"))
            {
                emptyreplace += stringToRemove + Environment.NewLine;
            }
        }
    }
    sr.Close();
    File.WriteAllText(path, emptyreplace);
    hostFileConfigured = false;
    UInt32 result = DnsFlushResolverCache();
    MessageBox.Show(removeSuccess, windowOffline);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:07:43.373

您遇到的主要问题是您经常使用大型常规字符串并将数据附加到末尾。这是每次都重新创建字符串并消耗大量时间，尤其是内存。通过使用`string.Join`它将避免创建（非常大量的）中间字符串值。

您还可以通过使用`File.ReadLines`而不是直接使用流来缩短代码以获取文本行。它并没有更好或更坏，只是更漂亮。

```
var lines = File.ReadLines(path)
    .Where(line => !line.Contains("string1") && !line.Contains("string2"));

File.WriteAllText(path, string.Join(Environment.NewLine, lines)); 
```

另一种选择是流式传输输出的写入。由于没有好的库方法可以在`IEnumerable<string>`不急切地评估输入的情况下写出 a ，因此我们必须编写自己的（这很简单）：

```
public static void WriteLines(string path, IEnumerable<string> lines)
{
    using (var stream = File.CreateText(path))
    {
        foreach (var line in lines)
            stream.WriteLine(line);
    }
} 
```

另请注意，如果我们正在流式传输我们的输出，那么我们将需要一个临时文件，因为我们不想同时读取和写入同一个文件。

```
//same code as before
var lines = File.ReadLines(path)
    .Where(line => !line.Contains("string1") && !line.Contains("string2"));

//get a temp file path that won't conflict with any other files
string tempPath = Path.GetTempFileName();
//use the method from above to write the lines to the temp file
WriteLines(tempPath, lines);
//rename the temp file to the real file we want to replace, 
//both deleting the temp file and the old file at the same time
File.Move(tempPath, path); 
```

与第一个选项相比，此选项的主要优点是消耗的内存要少得多*。*实际上，它一次只需要在内存中保存文件的行，而不是整个文件。不过，它确实（暂时）占用了一些额外的磁盘空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:03:07.800

让我眼前一亮的第一件事是，`string`在 while 循环 ( `emptyreplace`) 中错误地使用类型变量（效率不高），使用[StrinBuilder](http://msdn.microsoft.com/it-it/library/system.text.stringbuilder.aspx)类型，这样会**大大**提高内存效率。

例如：

```
 StringBuilder emptyreplace = new StringBuilder(); 

using(StreamReader sr = File.OpenText(path)){
    while ((stringToRemove = sr.ReadLine()) != null)
    {
        if (!stringToRemove.Contains("string1"))
        {
            if (!stringToRemove.Contains("string2"))
            {
                //USE StringBuilder.Append, and NOT string concatenation
                emptyreplace.AppendLine(stringToRemove + Environment.NewLine);
            }
        }
    }
   ...
} 
```

其余的*似乎*足够好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:02:13.020

两个建议：

1.  创建一个要检测的字符串数组（我称它们为`stopWords`）并使用 Linq 的[`Any`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)扩展方法。

2.  与其构建文件并一次全部写入，不如在读取源文件时将每一行写入输出文件，并在完成后替换源文件。

结果代码：

```
string[] stopWords = new string[]
{
    "string1",
    "string2"
}

using(StreamReader sr = File.OpenText(srcPath))
using(StreamWriter sw = new StreamWriter(outPath))
{
    while ((stringToRemove = sr.ReadLine()) != null)
    {
        if (!stopWords.Any(s => stringToRemove.Contains(s))
        {
            sw.WriteLine(stringToRemove);
        }
    }
}

File.Move(outPath, srcPath); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:05:12.227

有很多方法可以改善这一点：

*   将您要搜索的单词数组编译成正则表达式（例如，`word1|word2`注意特殊字符），这样您只需遍历字符串一次。（这也将允许您使用`\b`仅匹配单词）

*   通过 a 将每一行写入`StreamWriter`一个新文件，这样您就不需要在构建时将整个内容存储在内存中。（完成后，删除原文件并重命名新文件）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T16:05:23.317

您的主机文件真的那么大，以至于您需要逐行阅读它吗？为什么不简单地这样做呢？

```
var lines = File.ReadAllLines(path);
var lines = lines.Where(x => !badWords.Any(y => x.Contains(y))).ToArray();
File.WriteAllLines(path, lines); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T16:11:00.790

**更新**：我刚刚意识到您实际上是在谈论“主机文件”。假设您的意思`%windir%\system32\drivers\etc\hosts`是，该文件不太可能具有真正显着的大小（例如超过几个 KB）。所以就个人而言，我会采用最易读的方法。例如，[@servy](https://stackoverflow.com/a/15343247/21567)的那个。

最后，您将不得不阅读每一行并写入与您的标准不符的每一行。因此，您将始终拥有无法避免的基本 IO 开销。根据文件的实际（平均）大小，这可能会掩盖您在代码中用于实际过滤行的所有其他优化技术。

话虽如此，但是通过不在缓冲区中收集所有输出行，而是在读取它们时直接将它们写入输出文件，您可以在内存方面减少一点浪费（同样，如果你的文件不是很大）。

```
using (var reader = new StreamReader(inputfile))
{
  using (var writer = new StreamWriter(outputfile))
  {
    string line;
    while ((line = reader.ReadLine()) != null)
    {
       if (line.IndexOf("string1") == -1 && line.IndexOf("string2") == -1)
       {
          writer.WriteLine(line);
       }
    }
  }
}

File.Move(outputFile, inputFile); 
```

# java - 不同的java包和可见性

> ID：15343094
> 
> 赞同：2
> 
> 时间：2013-03-11T15:59:56.930
> 
> 标签：java, visibility, packages, naming

我要问的问题是关于一个非常常见的话题，但我没有找到我的确切问题，所以我明确地问它。

我正在用java编程，我需要实现一些类，比如A、B、C和D。它们都是SDK的一部分，只有D是公共的（对使用我的sdk的开发人员可见）。

A、B 和 C 是处理不同主题的类（比如说蓝牙通信、Web 服务使用和专有算法），尽管它们需要相互通信。我想根据包中的“技能”（公共方法、蓝牙、Web 服务、算法）来划分包中的类，但如果我创建不同的包，它们将彼此不可见。

所以，我在这里看到的唯一实现是一个独特的包并且没有修饰符（所以他们将“看到”彼此，用户只能访问 D 类）。有什么方法可以创建不同的包以便让我以更好的方式组织我的 sdk？（想象一下很多课程，它很容易变得一团糟:)）

在此先感谢您的帮助

乔治奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:03:40.437

我认为正确的方法是拥有一个包含通用接口和数据的包（如枚举、Point 等简单类......）。所有其他包都将引用这个公共包，因为它们的类将实现公共接口。

这也为您提供了不同包之间真正解耦的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:34:25.303

如果我理解你想要做什么，我认为 Java 语言没有给你提供一种方法来做到这一点。

我对您的问题的理解是“我正在开发一个 API，我只想在其中公开某些类和/或方法；包中的其他类和/或方法需要被公开的类和/或方法使用，但我不希望它们标记为公开，因此可供使用 API 的程序员使用”。

你没有说为什么这是必要的或可取的。

该语言不支持这种方式的可见性。您可以通过混淆器运行您想要隐藏的代码，以（极大地）阻止任何人理解这些方法是什么并调用它们，当然不要混淆您想要使用的那些，但这是我能想到的和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:06:41.940

你可以为你的类使用不同的包，只要确保它们是公共的，这样它们就可以对其他包中的其他类可见。

# qt - 两个程序之间的通信信号还是共享内存？

> ID：15343095
> 
> 赞同：0
> 
> 时间：2013-03-11T15:59:57.480
> 
> 标签：qt, signals, ipc

我需要实现（在 Qt 中）一些解决方案来在 Linux 机器上运行的两个程序之间进行通信。一个程序是 Worker，第二个是 Watchdog。基本上我需要看门狗定期检查 Worker，以防出现问题（没有进程，挂断 - Worker 没有回答）杀死 Worker（如果存在）并重新启动它。Worker 作为守护进程运行，所以我认为从 unix /etc/init.d/worker 启动它是合适的。我可以看到两个解决方案

1.  Unix 信号 - 它们都可以发送和接收 Unix SIGUSR1
2.  共享内存

选择哪一个？有了信号，这两个程序都必须知道其他程序的 pid，可能从文件系统 /var/run 读取，所以它看起来像一个缺点。使用共享内存，我所需要的只是程序将硬编码的“密钥”，因此无需从文件系统中读取 pid。由于 Watchdog 应该首先启动，它可以创建共享的 mem 段，而 Worker 只会附加到它并且可能会更新它的时间戳值？？？但是，通过 Watchdog 停止 Worker（在挂断的情况下）Watchdog 仍然需要 Worker pid 向他发送 SIGKILL，也许它可以从共享内存中读取它？这两个概念对我来说都是新的。

那么构建可靠看门狗的正确方法是什么，或者我错过了什么？

此致

马立克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:06:16.243

我认为这是通过 Qt 提供的最佳解决方案：

[http://qt-project.org/doc/qt-4.8/qlocalsocket.html](http://qt-project.org/doc/qt-4.8/qlocalsocket.html)

[http://qt-project.org/doc/qt-4.8/qlocalserver.html](http://qt-project.org/doc/qt-4.8/qlocalserver.html)

> QLocalSocket 类提供了一个本地套接字。在 Windows 上这是一个命名管道，在 Unix 上这是一个本地域套接字。

[http://qt-project.org/doc/qt-4.8/ipc-localfortuneserver.html](http://qt-project.org/doc/qt-4.8/ipc-localfortuneserver.html)

[http://qt-project.org/doc/qt-4.8/ipc-localfortuneclient.html](http://qt-project.org/doc/qt-4.8/ipc-localfortuneclient.html)

希望有帮助。

# sql-server - 在内置函数中使用 SQL 列别名？

> ID：15343096
> 
> 赞同：-1
> 
> 时间：2013-03-11T15:59:58.303
> 
> 标签：sql-server, sql-order-by, alias

我正在尝试根据别名订购选择，但我不知道如何。这是一个例子：

```
select distinct top 100 id, 
                    col1, 
                    col2, 
                    CASE WHEN @orderFormat = 'this' then col1
                         WHEN @orderFormat = 'that' then col2
                    END as orderby
from table
where col1 = like '%'
order by Len(orderby) asc, orderby asc 
```

每当我将别名“orderby”作为参数传递时，它都会被报告为无效列。

我的目标是能够以字母数字方式对变量列进行排序。我知道 'order by Len(orderby) asc, orderby asc 有效，但不能使用别名。

有谁知道解决这个问题的好方法，或者我做错了什么？

谢谢！

**编辑：**

我已经设法将选择功能简化为：

```
select top 200 Clip_Name as orderby
               from Clips
order by       Len(orderby) asc, orderby asc 
```

Clip_Name 被声明为`column Clip_Name(nvarchar, not null)`。Microsoft SQL Server 2008 R2 Edition 的错误是`Msg 207, Level 16, State 1, Line 1 Invalid column name 'orderby'`.

但是，这有效（没有别名）：

```
select top 200 Clip_Name 
               from Clips 
order by len(FLE_ID) desc, FLE_ID desc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:10:28.913

使用 时`DISTINCT`，只能按实际在`SELECT`列表中的表达式排序。您不能引用不存在的列、别名或表达式。这是一种可能的解决方法，尽管实际上最好简单地删除`DISTINCT`（如果您有两行相同的行，`id`那么您的架构或至少该列的名称存在严重错误）。

```
select distinct top 100 id, 
                    col1, 
                    col2, 
                    CASE WHEN @orderFormat = 'this' then col1
                         WHEN @orderFormat = 'that' then col2
                    END as orderby,
    len(CASE WHEN @orderFormat = 'this' then col1
             WHEN @orderFormat = 'that' then col2
        END) AS ignore_this_column
from table
where col1 like '%'
order by ignore_this_column, orderby; 
```

表达更简单，因此您不必重复表达式（并且也没有不必要的`DISTINCT`）：

```
;WITH x AS 
(
  SELECT id, col1, col2, 
    orderby = CASE @orderFormat
      WHEN 'this' THEN col1
      WHEN 'that' THEN col2
    END
  FROM dbo.table
  WHERE col1 LIKE '%' -- necessary?
)
SELECT id, col1, col2
  FROM x
  ORDER BY LEN(orderby), orderby; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:21:03.670

根据您的第一个查询，以及需要删除 DISTINCT 的讨论，这将起作用：

```
select top 100 id, 
        col1, 
        col2, 
        CASE WHEN @orderFormat = 'this' then col1
             WHEN @orderFormat = 'that' then col2
        END as orderby
from t
order by Len(CASE WHEN @orderFormat = 'this' then col1
                  WHEN @orderFormat = 'that' then col2
             END) asc, orderby asc 
```

# ios - 在 Cocoa Touch 应用程序上生成崩溃报告

> ID：15343116
> 
> 赞同：0
> 
> 时间：2013-03-11T16:01:03.330
> 
> 标签：ios, cocoa-touch, debugging, crash-reports

这听起来可能比实际要糟糕得多，但这是我的问题。

我正在处理我的一个测试人员正在使用的实际设备上的崩溃。目前，无法发现导致崩溃的原因。我无法在模拟器上重现它。但是，在模拟器上发生崩溃时，我会在输出窗口中获得有关它的日志信息。但我不想在连接设备的情况下继续测试。

当事情崩溃时，是否可以将崩溃异常等记录到文件中。我知道某些应用程序可以做到这一点，但我不知道怎么做？

任何信息，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:22:17.743

通常有两种方法可以做到这一点：

1.  有人让测试人员向您发送 iOS 在设备上创建的崩溃报告。这对于最终用户来说通常太棘手了，所以下一个建议效果更好。这也是为什么我没有描述如何做到这一点的原因 :) 但是你会发现很多关于这个过程的文档。

2.  集成一个崩溃报告库，该库可以捕获崩溃并允许您以各种方式接收它们。您不应该实现自己的全局崩溃异常处理程序，事情太复杂而无法正确执行（即使其他人会告诉您其他情况）。由异常引起的崩溃也只是一种类型的崩溃。

    那里有多个开源库，最安全的使用是基于 PLCrashReporter 的任何库。大多数其他人使用私有或未记录的 iOS API，或者不是异步安全的，这基本上意味着这些 API 可能会破坏应用程序数据或使崩溃更加严重。请参阅有关该主题的博客文章：http: [//landonf.bikemonkey.org/code/crashreporting/Reliable_Crash_Reporting_1.1.20130119.html](http://landonf.bikemonkey.org/code/crashreporting/Reliable_Crash_Reporting_1.1.20130119.html)

    以下链接的答案显示了有关如何将日志记录添加到您的应用程序的一些可用选项，以及有关如何接收测试版本的崩溃报告以及应用程序发布后的各种选项：将[自定义数据包含到 iOS 崩溃转储中](https://stackoverflow.com/questions/8488894/including-custom-data-into-ios-crash-dumps/8511100#8511100)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:50:27.153

如果您愿意使用第三方服务，我会使用[https://www.crashlytics.com](https://www.crashlytics.com)。使从用户设备调试崩溃变得轻松。

# editor - 如何离线编辑 OpenCart 主题？

> ID：15343118
> 
> 赞同：0
> 
> 时间：2013-03-11T16:01:06.070
> 
> 标签：editor, e-commerce, opencart

我是 OpenCart 的新手。与可以离线编辑 index.html 并在浏览器上查看更改的普通网站不同，OpenCart 没有 index.html。由于它们通过使用 php 组合 html 的“部分”来工作，我如何离线编辑我的主题而不是通过我的 ftp 编辑它们？

我的浏览器也没有打开 OpenCart 的 index.php 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:29:52.397

Opencart 使用 PHP 生成 HTML 文件。要“在浏览器中离线查看 opencart”，您需要运行 localhost。这意味着在您的计算机上使用 PHP 和 mysql 数据库运行 apache，以便 PHP 将“运行”并生成您可以在浏览器中查看的输出 HTML 文件。

如果您在 Windows 计算机上查找 XAMPP，或者如果您在 MAC 上查找 MAMP。
[Windows 说明](https://www.google.com.au/search?q=xampp&aq=0&oq=XAMP&aqs=chrome.0.0j57j5j0j61j60.2109&sourceid=chrome&ie=UTF-8#hl=en&q=Install+opencart+locally+xampp&spell=1&sa=X&ei=nvRIUemaBIaQiAeE2YDwBg&ved=0CCwQvwUoAA&bav=on.2,or.r_qf.&bvm=bv.44011176,d.aGc&fp=400aa7d3b98d6b02&biw=1329&bih=798)
[Mac 说明](https://www.google.com.au/search?q=xampp&aq=0&oq=XAMP&aqs=chrome.0.0j57j5j0j61j60.2109&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=Install+opencart+locally+mamp&oq=Install+opencart+locally+mamp&gs_l=serp.3...52832.53103.2.53381.4.4.0.0.0.0.0.0..0.0...0.0...1c.1.7.psy-ab.ocFkwNpYkhI&pbx=1&bav=on.2,or.r_qf.&bvm=bv.44011176,d.aGc&fp=400aa7d3b98d6b02&biw=1329&bih=798)

这就是开发人员为一系列基于 PHP 的 CMS 和电子商务系统离线创建和编辑模板的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:22:10.833

Opencart 没有 index.html，而是有 index.php，因此首先您需要安装 PHP xampp 或 apache 服务器和 mysql 以在本地主机上运行 opencart。Opencart 使用模板 如果您想编辑页面并查看更改，您可以编辑模板。或者如果您想在打开站点后更改默认页面，您可以为其创建一个页面和一个控制器，并在文件末尾的 index.php 中更改

```
$action = new Action('common/home'); 
```

你可以在这里给你的页面。

# php - 无法使用 php 连接到位于网络中的 MS Access 数据库

> ID：15343119
> 
> 赞同：0
> 
> 时间：2013-03-11T16:01:06.483
> 
> 标签：php, database, ms-access, odbc

我正在开发一个应该连接到 Access 数据库的 Web 应用程序。我正在使用 php。如果我的数据库是本地的，我没有任何问题。最初，数据库位于网络中。当我测试连接到网络数据库的网页时，出现此错误

```
Warning: odbc_exec() [<a href='function.odbc-exec'>function.odbc-exec</a>]: SQL error: [Microsoft][ODBC Microsoft Access Driver]  'T:\Chris\Test1.mdb' not a valid path. Make sure that the path name is spelled correctly and that you are connected to the server on which the file resides., SQL state S1009 in SQLExecDirect 
```

我知道很多人都问过这个问题，但我还不能解决我的问题。有谁知道问题发生在哪里？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:57:22.653

用户评论解决了我的问题。解决方案是不要使用网络派生名称，例如`T:`. 使用网络路径，例如`\\IP address\db_folder\db_name.mdb`. 这首先需要在网络上共享文件夹。

# xcode - What is $(inherited) in Xcode's search path settings?

> ID：15343122
> 
> 赞同：54
> 
> 时间：2013-03-11T16:01:28.643
> 
> 标签：xcode

What is the `$(inherited)` search path setting?

I've modified the header and library search path settings regarding OpenSSL for iPad and this issue along with the recursive option for given path was the main culprit.

When I rearranged my search paths to first look into directories and then into `$(inherited)`, the iPad builds were working.

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2016-06-09T09:57:06.070

If you go to Target Build Settings, and switch to Level view

![Alt text](../Images/03e40e99f91fe5d46e7bea891e58b120.png)

You can see the flow of `inherited` from right to left

```
Resolved <- Target <- xcconfig <- Project <- iOS Default 
```

So in `inherited` in Target means that Target inherits settings from xcconfig and Project

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2014-02-04T09:29:31.877

I'm looking for a documentation, too. But I made the experience, that `$(inherited)` can be used to inherit build settings from the project level to the target level. When you define library or header search paths at the project level you can use `$(inherited)` in the target build settings to use these search paths in the search paths of the project targets.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-27T17:11:03.543

**Example of Overriding** build setting variables set on the Project or Target level by reassigning the value of that variable in a xcconfig file.

```
// Variable set in the project file, previous level
OTHER_LDFLAGS = -ObjC

// lib.xcconfig
OTHER_LDFLAGS = -framework Security 
```

^ When compiling with this, the previous value of OTHER_LDFLAGS `-ObjC` is going to be overridden by the new value `-framework Security`.

**Example of Inheriting** build setting variables set on the Project or Target level by appending to the previous value of that variable in a xcconfig file. Think of `$(inherited)` as a special variable that can be used to get the existing value of a variable so that assignment to same variable isn't destructive.

```
// Variable set in the project file, previous level
OTHER_LDFLAGS = -ObjC

// lib.xcconfig
OTHER_LDFLAGS = $(inherited) -framework Security 
```

^ When compiling with this, the value of OTHER_LDFLAGS is going to be `-ObjC -framework Security`.

Example found at [https://pewpewthespells.com/blog/xcconfig_guide.html](https://pewpewthespells.com/blog/xcconfig_guide.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-24T11:57:43.687

ADDENDUM: with `$(inherited)` *Build Settings->Library Search Path* is automatically populated when you add a library to a target by clicking in the Target Membership right-hand pane. This does not happen otherwise.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-03T14:10:23.947

**Xcode $(inherited)**

[[Xcode ${<variable_name>} syntax]](https://stackoverflow.com/a/66984167/4770877)

Xcode variable can be defined on different levels(Project, .xcconfig, Target, Default). When you use `Build Settings -> Levels` tab you can check hierarchy and **Resolved** result

`$(inherited)` uses variable value from **super level**.

Please note several things:

*   It is useful when you should concatenate the result value like `$(inherited)-myPrefix`. It is not so useful to use as a standalone expression because even when you delete `$(inherited)` or any other value from successor(Target is successor of Project) Xcode automatically change this value based on predecessor

*   You are able to set `.xcconfig` on Project level and Target level, that is why the result hierarchy is not constant

```
Resolved <- Target <- Target .xcconfig <- Project <- Project .xcconfig <- Default 
```

For example Target = `$(inherited)`

`.xcconfig` on Project level [![enter image description here](../Images/4c8506fd821b486e99e64e0a853c024a.png)](https://i.stack.imgur.com/yog9W.png)

`.xcconfig` on Target level [![enter image description here](../Images/42d76e55cf7e8e50fccc6d01261d5fdb.png)](https://i.stack.imgur.com/03giO.png)

[[.xcconfig]](https://stackoverflow.com/a/64266553/4770877)

[[CocaPods inherit!]](https://stackoverflow.com/a/56273013/4770877)

# android - 如何从 http Url 获取 JSONArray 以及如何在 android 中将 JSONArray 设置为微调器？

> ID：15343128
> 
> 赞同：0
> 
> 时间：2013-03-11T16:01:37.567
> 
> 标签：android, android-listview, android-spinner, arrays

我有 JSONArray ["category_1","category_2","category_3"] 但我没有得到数据。以及我如何将这些数据设置为 Android 中的微调器或列表视图。

E：

故障在哪里？

```
public class MainActivity extends Activity {

    String urlCat = "http://tvapp.pcrevue.sk/categories.json";

    Spinner spinner;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        try {
            JSONArray jsonArray;
            jsonArray = getJSONArrayFromUrl(urlCat);

            final String[] array_spinner = new String[jsonArray.length()];

            //int show_total = jsonArray.length();

            //Toast.makeText(flash_tattoo.this, show_total + "test", Toast.LENGTH_LONG).show();

            for (int i=0; i<jsonArray.length(); i++)
            {
                String styleValue = jsonArray.getJSONArray(0).getString(i);
                array_spinner[i] = styleValue;

            }
            ArrayAdapter<String> adapter = new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item,array_spinner);

            adapter.setDropDownViewResource(R.layout.activity_main);
            spinner.setAdapter(adapter);

        } catch (JSONException e) {
            e.printStackTrace();
        }

    }

    public JSONArray getJSONArrayFromUrl(String url) {
        InputStream is = null;
        JSONArray jObj = null;
        String json = "";
        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"));
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                //json += line;
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONArray(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:09:40.980

您需要将 Json 解析为对象。 [这里](https://stackoverflow.com/questions/4308554/simplest-way-to-read-json-from-a-url-in-java)有一些方法可以做到这一点。然后您将需要创建一个 ArrayListAdapter 并用一个数组列表填充它，请参见[此处](https://stackoverflow.com/questions/2784081/android-create-spinner-programmatically-from-array)。而已。

编辑：要改为创建 JsonArray，请参阅此处以向 JSONArray 构造函数提供字符串。

# python - 在 Python 2.6.5 脚本中使用“使用 IDLE 编辑”

> ID：15343138
> 
> 赞同：2
> 
> 时间：2013-03-11T16:02:34.830
> 
> 标签：python, python-idle

我已经在 Windows 上安装了 Python 2.7.1 和 2.6.5 版本。我在环境变量中只添加了 Python 2.6.5 的路径。现在，我想`x.py`使用 Python 2.6.5 运行 Python 脚本。我知道如何使用，`cmd`但是使用 IDLE 打开它并使用该`Run Module`选项在其中运行会更方便。这应该是通过右键单击脚本然后转到`Edit with IDLE`选项来完成的，但这会打开并使用 Python 2.7.1 运行脚本。有没有办法用 Python 2.6.5 打开和运行它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:26:12.673

注册表中的标准命令`Edit with IDLE`如下：

```
"C:\Program Files\Python33\pythonw.exe" "C:\Program Files\Python33\Lib\idlelib\idle.pyw" -e "%1" 
```

现在，如您所见，路径是硬编码到其中的，所以它*不能*像这样使用不同的 Python 解释器——至少在默认情况下是这样。

但是，[PEP 397](http://www.python.org/dev/peps/pep-0397/)为 Python 引入了一个新的 Python 启动器，从而可以基于 shebang 行启动不同版本的 Python。因此，以 开头的文件`#!/usr/bin/env python2`将启动当前的 Python 2 解释器，而`#!/usr/bin/env python3`将使用 Python 3。

使用该信息，您可以为给定的 Python 版本动态启动 IDLE。例如，这将使用启动器的默认 Python 版本编辑文件：

```
 C:\Windows\pyw.exe -m idlelib.idle -e "%1" 
```

这将强制使用 Python 3

```
 C:\Windows\pyw.exe -3 -m idlelib.idle -e "%1" 
```

这将强制使用 Python 2：

```
 C:\Windows\pyw.exe -2 -m idlelib.idle -e "%1" 
```

因此，您需要做的是编写一个脚本，该脚本基本上检查文件要使用*哪个*Python 版本执行，即通过手动解析 shebang 行（遗憾的是，启动器不会在没有实际启动脚本的情况下为您提供此信息 - 尚未。我可能会发起一个拉取请求以将这样的功能纳入核心）。然后，您将使用上面的命令运行 Python 2 或 Python 3 IDLE 并完成。

您只需要更改`Edit with IDLE`命令以执行您的脚本，它就可以工作。

一个非常简单的替代方法是添加另一个启动 Python 2 IDLE 的注册表项。所以你会有`Edit with IDLE`和`Edit with IDLE (Py2)`或什么的。

为此，只需将以下内容放入`.reg`文件中并执行它：

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Python.File\shell\Edit with IDLE (Py2)]
[HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Python.File\shell\Edit with IDLE (Py2)\command]
@="C:\\Windows\\pyw.exe -2 -m idlelib.idle -e \"%1\"" 
```

*编辑：*我刚刚注意到我写这篇文章主要是关于 Python 2 与 Python 3 的；我认为启动器附带 Python 2.7，所以它的工作原理是一样的。您只需要将启动器的版本特性调整为`-2.6`和`-2.7`/或任何您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:06:32.647

您可以通过一些注册表黑客来做到这一点，使 IDLE 2.6 成为您的默认值（而不是 2.7），但这并不是您真正想要的，我认为，从那时起，当您想在 2.7 中测试某些东西时，您必须反转该过程。除非其他人知道将不同的 IDLE 安装集成到 shell 中的其他方法，否则这里有几个更好的选择：

1.  首先打开 IDLE 2.6，然后使用 GUI 中的 Open File 对话框。

2.  使用实际支持此功能的其他 IDE。带有[PyDev的](http://pydev.org/download.html)[Eclipse](http://www.eclipse.org/)将允许您在运行之间切换解释器，或者使用不同的解释器保存配置，等等。

# php - 通过设置mysql会话变量选择mysql表中的匹配数据？

> ID：15343141
> 
> 赞同：0
> 
> 时间：2013-03-11T16:02:39.410
> 
> 标签：php, mysql

我正在尝试向登录的用户显示居住在本地的用户列表。因此，如果登录的会话用户的邮政编码为“m3 4”，而其他 5 个用户的邮政编码以“m3 4”开头，那么这些用户将显示给用户。

我的桌子是这样布置的：

```
id  |   user_id  | user_postcode
1          2          M3 4
2          3          SM2 7
3          4          M3 4 
```

因此在这种情况下，用户 2 将显示给已登录的用户 4，因为他们的邮政编码匹配。

我正在尝试在 mysql 中执行此操作，并且当我手动输入邮政编码时它可以工作，如下所示：

```
AND ptb_stats.user_postcode='M3 4' 
```

但我试图使其特定于用户会话，因此如果登录用户 / $_SESSION[user_id'] 与其他用户具有相同的邮政编码。

我正在尝试这样做，但它显示所有没有邮政编码的用户。

```
function get_local_users() {
            global $connection;
            global $_SESSION;
            $query = "
            SELECT *
            From ptb_stats, ptb_users
            WHERE ptb_stats.user_id=ptb_users.id
            AND ptb_stats.user_postcode='".$_SESSION['user_postcode']."'";
            $local_set = mysql_query($query, $connection);
            confirm_query($local_set);
            return $local_set;
        } 
```

我认为它这样做是因为 ".$_SESSION['user_postcode'] 没有设置，我没有设置 ".$_SESSION['user_postcode'] 作为变量或任何东西，因为我不知道该怎么做，但是“.$_SESSION['user_id'] 被设置为一个变量，因为这是由我的一个朋友完成的，他从未向我展示过如何做到这一点。所以我不知道如何解决这个问题，我是否可以不知何故用户“.$_SESSION['user_id'].

我不能简单地将任何列名添加到 $_SESSION['columnHere'] 吗？

我已经为此工作了一天多，但我无法弄清楚，我对 php 和 mysql 真的很陌生，我知道这似乎是一个愚蠢的问题，但请有人告诉我，因为我正在尝试所有排序，无处可去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:44:58.263

PHP 和 SQL 是不同的语言。您正在使用 PHP 生成 SQL 代码，但仅此而已。所以，最后，重要的是`$query`包含什么。只需检查它的价值...

```
var_dump($query); 
```

...并使用您最喜欢的 MySQL 客户端运行生成的 SQL 代码。这会告诉你错误在哪里。

我们可以`global $_SESSION;`在您的代码中看到的事实表明这是您第一次尝试使用会话。最有可能的是，会话甚至没有工作——也许你忘记了`session_start()`——并且`$_SESSION['user_postcode']`正在触发这个通知：

```
Notice: Undefined variable: _SESSION 
```

要查看此类通知，您需要在 PHP 中配置完整的错误报告。这是一个[简短的解释](https://stackoverflow.com/a/5680885/13508)。

另外，我推荐[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php).

# file - 重命名文件的批处理脚本不起作用（有时）

> ID：15343144
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:02:56.103
> 
> 标签：file, for-loop, batch-file, special-characters, rename

我有一个批处理脚本，它遍历目录中的文件，如果它与四种模式之一匹配，它将重命名文件。当我在我的测试环境中运行它时，它可以完美运行。但是，当我自豪地运行它时，它只会重命名它遇到的第一个文件。我从我的电脑上针对映射驱动器上的目录运行它们。

我认为问题可能与我正在搜索的包含“+”号的文件名之一有关，但是当我在测试中运行脚本时这不会造成问题。

我要搜索的目录的文件路径作为参数传递。它是唯一的参数。

任何帮助是极大的赞赏。

我的代码如下：

```
@ECHO OFF
SetLocal EnableDelayedExpansion
REM ******************************************************************************************
REM 
REM            Name: get_current_foldername.bat
REM   Description: This script will rename generic loan review sample file names such as CRE.xls, 
REM                Family.xls, etc. to [docket]_[yyyymmdd]_[hhmmss]_[list type (cre, fam1-4, etc.)].xls.
REM                Ex. 13346_20121220_125930_cre.xls.  
REM                This script is used by Globalscape as part of the completed loan review sample upload.
REM    Parameters: There is one parameter passed.  
REM                The first parameter contains the path where the source file exists.
REM          Author: Joe Mannetta
REM            Date: 01/28/13
REM 
REM ******************************************************************************************
REM ******************************************************************************************
REM 
REM  Set CurrPath variable to parameter value.
REM  Set CurrDirName variable to the current directory name.  This excludes higher level folders.
REM 
REM ******************************************************************************************
SET CurrPath=%1%
FOR %%* in (%CurrPath%) DO (SET CurrDirName=%%~n*)
REM ECHO Current Path is: %CurrPath%
REM ECHO New DIR NAME is: %CurrDirName%
REM ******************************************************************************************
 CD %CurrPath% 
 REM ECHO CurrPath is %CurrPath%
 GOTO LOOP
 REM *****************************************************************************************
 REM LOOP Function
 REM Loops through files in directory and go to Rename function if the file name matches CRE.xls, FAMILY.xls, FAMILY5+.xls, or HELOCS.xls.
 REM *****************************************************************************************
 :LOOP
REM Get name of 1st file in list. Note this also returns the full file path.
 FOR /F "delims= tokens=1" %%f in ('dir /b *.xls') DO ( 
REM FOR /F "tokens=1" %%f IN ('dir /o-d /b %CurrPath%') DO ( 
  SET File=%%f
 ECHO File is: %%f
 IF %%f==CRE.xls GOTO RENAME
 IF %%f==FAMILY.xls GOTO RENAME
 IF %%f==FAMILY5+.xls GOTO RENAME
 IF %%f==HELOCS.xls GOTO RENAME
 REM ECHO %%f
 REM ECHO %ERRORLEVEL%
 GOTO END
REM ECHO Did NOT Make it to GOTO
 )
REM ******************************************************************************************
REM RENAME Function
REM Renames the file to [folder name]_[yyyymmdd]_[hhmmss]_[CRE|FAMILY|FAMILY5+|HELOCS].xls
REM  Date is reformatted to yyyymmdd.  Time is reformatted to hhmmss.  Some credit due to Jimmy Selix at http://www.tech-recipes.com/rx/956/windows-batch-file-bat-to-get-current-date-in-mmddyyyy-format/ for date and time formatting.
REM ******************************************************************************************
:RENAME
REM End loop so that File variable is set to the newest file.   
  REM Drop file path to isolate the file name.
  SET CurrFName=!File:%CurrPath%=!
  REM ECHO CurrFName is %CurrFName%
REM Set date to yyyymmdd format.
 SET dt=!date:~10,4!!date:~4,2!!date:~7,2!
REM Set time to hhmmss format. Include leading zeros for single digit times.
 SET mytime=%TIME: =0%
 SET hhmmss=!mytime:~0,2!!mytime:~3,2!!mytime:~6,2!
 SET NewFName=!CurrDirName!_!dt!_!hhmmss!_!CurrFName!
REM echo !CurrPath!\!CurrFName! !CurrPath!\!NewFName!
REM Set new file name and rename file.
 COPY "!CurrPath!\!CurrFName!" "!CurrPath!\!NewFName!"
 COPY "!CurrPath!\!NewFName!" "!CurrPath!\..\..\archive"
 DEL /Q !CurrPath!\!CurrFName!
 REM ECHO %ERRORLEVEL%
 GOTO LOOP
 REM *******************************************************************************************
 :END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:03:34.847

啊啊啊！

您的主要问题是您在 FOR/F...%%f 循环中使用 GOTO。

*   完全删除`GOTO End`。
*   将每个更改`GOTO RENAME`为`CALL :RENAME`（冒号很重要 - 它指定调用内部例程）
*   `GOTO :EOF`在 FOR/f...%%f 循环的最后一个右括号之后添加一个语句
*   将 : RENAME`GOTO LOOP`例程中的替换为`GOTO :EOF`

几点注意事项：

*   Batch 不会将标签视为过程的结束，例如 Pascal。它只是通过...充电（因此`GOTO LOOP`/REMs/`:LOOP`是多余的）
*   EOF 被预定义为“物理文件结尾”，因此不需要 :END 标签。到达文件结尾将终止批处理或导致 CALL 返回
*   `SET var=%1%`是不正确的（但不是致命的）正确的形式是`SET var=%1`
*   %%* 有效，但不是“官方” - 为什么不使用记录的 26 个小写字母和 26 个大写字母之一？
*   RENAME 是例程名称的糟糕选择，因为 REN 命令是 RENAME 的替代命令（即，它是批处理关键字）

# java - 尝试添加数据库驱动程序 (JDBC)：RmiJdbc.RJDriver - 错误，不在 CLASSPATH 中？

> ID：15343145
> 
> 赞同：7
> 
> 时间：2013-03-11T16:02:56.370
> 
> 标签：java, weka

我正在使用 Weka

```
import weka.core.Instances;
import weka.core.converters.ConverterUtils.DataSource;
.
.
DataSource source;
source = new DataSource("somecsvfile.csv"); 
```

我在 Eclipse 中以红色在控制台上打印以下内容：

```
---Registering Weka Editors---
Trying to add database driver (JDBC): RmiJdbc.RJDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): jdbc.idbDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): org.gjt.mm.mysql.Driver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): com.mckoi.JDBCDriver - Error, not in CLASSPATH?
Trying to add database driver (JDBC): org.hsqldb.jdbcDriver - Error, not in CLASSPATH? 
```

怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T23:25:56.607

没有错误。weka.jar 中有一个[DatabaseUtils.props](https://svn.cms.waikato.ac.nz/svn/weka/trunk/weka/src/main/java/weka/experiment/DatabaseUtils.props)文件。该文件在 subversion 中有以下行，因此 weka 尝试加载该驱动程序。

```
jdbcDriver=RmiJdbc.RJDriver,jdbc.idbDriver,org.gjt.mm.mysql.Driver,com.mckoi.JDBCDriver,org.hsqldb.jdbcDriver 
```

使用 zip 实用程序打开 jar 文件并查找 weka\experiment\DatabaseUtils.props 文件。

# java - 将一个 JLabel 拖到另一个 JLabel 上

> ID：15343149
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:03:01.827
> 
> 标签：java, swing, drag, jlabel, mouselistener

我正在尝试编写游戏并想在我的游戏中拖动卡片。当我将该标签拖到另一个标签时，我想删除该标签。

所有标签都是在游戏过程中动态创建的。有人可以告诉我在哪里阅读如何检测第一个标签的 mouseReleased 事件是否在不同的标签上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:15:36.257

1.  在 mouseRelease 事件中，您需要`getBounds()`在刚刚拖动的标签上使用。
2.  从 Container 类中，您可以使用它`getComponents()`来获取面板上所有组件的数组。
3.  然后循环遍历数组中的所有组件以获取每个组件的边界。
4.  您可以使用`Rectangle.intersects(...)`来确定两个标签是否相交。如果是这样，那么您删除第二个标签。

# delphi - 为什么调用 GetMem 会导致内存泄漏？

> ID：15343154
> 
> 赞同：1
> 
> 时间：2013-03-11T16:03:10.390
> 
> 标签：delphi

我有这段代码来查看我的前景窗口是否是 SDImainframe。

```
Function Active_window_mf() :Boolean;
var
  FromClass: PChar;
begin

  MFhandle := GetForeGroundWindow;
  GetMem(FromClass, 100);
  GetClassName(MFhandle, PChar(FromClass), 800);
  if StrPas(FromClass) = 'SDIMainFrame' then
    result := true;
end; 
```

但是，MADExcept 报告 Getmem 函数存在问题。谁能建议，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T16:04:45.307

您的代码中存在三个问题。**首先**，如果分配内存（`GetMem`），则需要释放它（`FreeMem`）：

```
GetMem(p, 1024);
try
  // Do sth with the memory
finally
  FreeMem(p);
end; 
```

**其次**`100`，我看不到和之间的关系`800`。事实上，你在撒谎。您分配一个 100 字节的缓冲区，然后告诉 Windows 它足够大，可以容纳 800 个 Unicode 字符。

**第三**，函数的返回值是未定义的，除非比较为真。因此，您需要添加`result := false`到程序的开头，或者将最后两行（之前`end;`）替换为

```
result := string(FromClass) = 'SDIMainFrame' 
```

无论如何，最好不要使用`GetMem`。我会这样做：

```
var
  CN: array[0..256] of char;
begin
  GetClassName(MFhandle, CN, 256) 
```

此外，您应该检查错误。如果`GetClassName`返回`0`，则发生错误。因此，你可以做类似的事情

```
function Active_window_mf(): boolean;
var
  CN: array[0..256] of char;
begin
  result := false;
  if GetClassName(GetForegroundWindow, CN, 257) > 0 then
    result := string(CN) = 'SDIMainFrame';
end; 
```

**更新：**根据大卫关于抽象级别的优秀观点，这样做会很好：

```
function ClassNameFromHWND(const Handle: HWND): string;
var
  CN: array[0..256] of char;
begin
  result := '';
  if GetClassName(Handle, CN, 257) > 0 then
    result := CN;
end;

function Active_window_mf(): boolean;
begin
  result := ClassNameFromHWND(GetForegroundWindow) = 'SDIMainForm';
end; 
```

# c# - 接口和抽象类保护级别方法

> ID：15343155
> 
> 赞同：1
> 
> 时间：2013-03-11T16:03:10.623
> 
> 标签：c#, oop, class, interface, protected

我遇到了一些代码，不太确定它为什么会起作用，或者你为什么要这样做。如果有人能为我拆掉它，我会很高兴的。我确实很了解 OOP 概念，我以前从未见过这种技术。谢谢

这是示例：

```
public interface IInterface
{
    IEnumerable<object> DoSomething();
}

public abstract class MyBase : IInterface
{
    protected MyBase()
    {
    }

    IEnumerable<object> IInterface.DoSomething()
    {
        return DoSomething();
    }

    protected virtual IEnumerable<object> DoSomething()
    {
        return new List<object>();
    }
}

public class MyClass : MyBase
{
    internal MyClass() : base() {}

    protected override IEnumerable<object> DoSomething()
    {
          return new List<object>();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:10:46.023

如果您在谈论这行代码：

```
IEnumerable<object> IInterface.DoSomething() 
```

这称为[显式接口实现](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)。

> 这迫使消费者只能通过接口访问此方法，而不是直接访问您的类。

上述方法不是私有的，只是没有在代码中明确设置为公共。事实上，通过显式接口实现，您甚至不能使用访问修饰符。

采用这种方法的原因之一是强制更好的编码实践。如果您是此类的开发人员，并且您知道只能通过接口访问它，那么这就是强制实现的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:14:19.680

在我的脑海中，我很难想到它的实际用途，但是这样做的一件事是类型的对象`MyBase`或其子类没有`public`或`internal`可见的`DoSomething()`方法：

```
MyClass a = new MyClass();
a.DoSomething();  // Compile error 
```

但是`DoSomething()`当对象被用作时，该方法是可见的`IInterface`：

```
void AMethod(IInterface i)
{
    i.DoSomething(); // compiles just fine
}

void AnotherMethod(MyBase a)
{
    AMethod(a); // as does this
} 
```

制作非显式版本`protected virtual`允许子类覆盖`DoSomething()`方法的行为。

`MyBase`这是一种实现方法的方法，在使用s as s时不能直接调用`MyBase`，但可以在将它们视为 s 时使用`IInterfaces`。没有什么可以阻止某人这样做：`((IInterface)a).DoSomething();`但似乎隐藏是出于语义原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:19:22.850

我对此的看法是，它是[此处](http://en.wikipedia.org/wiki/Template_method_pattern)描述的模板模式的实现。[通常，您会看到与策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式一起使用的模板模式。在您的特定示例中，用户`IInterface`可以调用该`DoSomething` 方法而不考虑具体子类如何实现该方法。

这种 OO 编程允许您利用很多其他模式，例如 AbstractFactory 来创建您的具体子类，`MyBase`其中实现`IInterface`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:24:43.957

需要注意的重要一点是，这两种`DoSomething`方法彼此无关——它们只是碰巧有相同的名称。

基本上，您只是获得了一个公开`DoSomething`方法的普通接口，因此拥有`IInterface`对象的调用者可以调用它。然后它将依次将调用传递给受保护`DoSomething`方法的适当实现，该方法可以来自基类或派生类。

像这样的显式实现会迫使您通过合同而不是实现来编码 - 并没有真正提供任何实际的保护，只是让您在声明变量时更难意外使用错误的类型。他们可以很容易地做到：

```
public abstract class MyBase : IInterface {
    public virtual IEnumerable<object> DoSomething() {
       // blah
    }
}

public class MyClass : MyBase {
    public override IEnumerable<object> DoSomething() {
        // blah
    }
} 
```

但这会让您调用`DoSomething`声明为`MyClass`or的变量`MyBase`，您可能不希望他们这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T16:45:04.893

在 C# 中，通过使用除了调用受保护的虚方法什么都不做的密封方法来显式实现接口允许派生类在他们想要对接口做什么方面具有很大的灵活性；该方法应命名为*other*而不是接口方法的名称（在上面的示例中，它可能是 DoSomething_Prot）。显式接口实现使得派生类的重新实现不可能链接到基类实现，但是如果基类实现唯一要做的就是链接到受保护的虚拟或抽象方法，则不需要派生类类来重新实现接口。此外，即使派生类有意或由于协变而重新实现接口，它仍然能够使用基类中的受保护方法调用基类实现的“胆量”。

将接口实现的所有代码放在隐式实现接口的公共虚拟方法中比将代码放在显式实现中要好，因为派生类代码通常可以链接到私有成员。然而，这种方法要求所有派生类公开实现具有相同签名的方法。尽管这似乎是人们自然期望的结果，但并非总是如此。例如，在上面的例子中，一个派生类可能希望它的`DoSomething`方法返回一个非类型`IEnumerable<object>`（例如它可能返回一个`IList<Kangaroo>`）。实现接口的方法仍然必须返回精确类型`IList<Kangaroo>`，但是知道它正在处理派生类型的代码可以使用返回类型作为`IList<Kangaroo>`没有类型转换。如果该方法的实际代码在一个名为 的方法中`DoSomething_Prot()`，则派生类可以覆盖`DoSomething_Prot`和声明一个`new public IList<Kangaroo> DoSomething()`. 如果调用了基类方法`DoSomething()`，则派生类将无法同时覆盖它并定义具有不同返回类型的新方法。

# php - PHP & jQuery 发送电子邮件消息的重复副本

> ID：15343158
> 
> 赞同：1
> 
> 时间：2013-03-11T16:03:11.960
> 
> 标签：php, email

我试图弄清楚为什么我的用户会收到从我的 Web 应用程序发送的电子邮件的重复副本。这是发送电子邮件的代码：

```
function _send_user_email($to, $subject, $message) {
    $this->load->library('email');
    $config['charset'] = 'utf-8';
    $config['wordwrap'] = TRUE;
    $config['mailtype'] = 'html';    
    $config['protocol'] = 'sendmail';
    $this->email->initialize($config);
    $this->email->from('support@mysite.com', 'Customer Service');
    $this->email->reply_to('support@mysite.com', 'Customer Service');
    $this->email->to($to);
    $this->email->bcc('support@mysite.com');
    $this->email->subject($subject);
    $this->email->message($message);
    $this->email->send();
    if ( ! $this->email->send())
    {
        echo $this->email->print_debugger();
        exit;
    } 
} 
```

此代码是否有任何问题可能导致消息被发送两次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:03:49.050

显然，由于

```
$this->email->send();
    if ( ! $this->email->send()) 
```

您要发送两次电子邮件。删除第一个调用，只保留`if`语句中的一个

# swt - Eclipse RCP 或 SWT/JFace 演示或“代码示例”？

> ID：15343159
> 
> 赞同：1
> 
> 时间：2013-03-11T16:03:14.650
> 
> 标签：swt, eclipse-rcp, jface

我从绝对**出色**的演示应用程序中学到了我对 wxPython 知之甚少的知识（如：用于 wx 小部件的 Python 包装器）：[http ://wxpython.org/download.php](http://wxpython.org/download.php)

使用该演示应用程序，您可以获得框架小部件的许多用途的示例：代码和运行的 UI 框架。做得这么好绝对令人惊讶。

对于 Eclipse RCP 或 SWT/JFace，有什么更接近的吗？

我必须将我在 wx 中开发的概念“移植”到 Java 中。我不确定 Swing 是否会削减它。Eclipse RCP 或 SWT/JFace 看起来非常好，但是.. 帮助我入门的材料在哪里？我用谷歌搜索，但找不到任何可以下载和运行的东西……看看它背后的代码！

注意：我当然可以“下载并运行”Eclipse 本身.. 但这要复杂得多，我目前可能可以管理。wx 演示的精彩之处在于：它们的复杂性甚至是渐进式的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:52:53.593

我将从[vogella 网站](http://www.vogella.com/eclipse.html)开始。在那里你可以找到所有你需要开始的东西。正如 Alexey Romanov 所提到的，RCP 邮件模板也是一个非常好的示例，但我不确定是否使用了 Eclipse 4.x，但我对此表示怀疑。所以开始学习4.x平台。

对于 SWT，有一个展示所有组件的[演示应用程序](http://www.eclipse.org/swt/examples.php)。对于 JFaces，我还向您推荐[JFace Snippets](http://wiki.eclipse.org/index.php/JFaceSnippets)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:58:22.827

典型示例是[RCP 邮件模板](http://www.eclipse.org/articles/Article-RCP-3/tutorial3.html)（[2.0 版](http://max-server.myftp.org/trac/rcp-mail)）。[这里](http://www.ralfebert.de/blog/eclipsercp/rcp_examples/)列出了更多示例和[JFace Snippets](http://wiki.eclipse.org/index.php/JFaceSnippets)。

# java - 如何修复客户端代码，以便通过组合获得代码重用？

> ID：15343160
> 
> 赞同：0
> 
> 时间：2013-03-11T16:03:17.147
> 
> 标签：java, design-patterns

这就是问题所在。我有一个抽象基类`Editor`。我也有两个子类`GraphEditor`和一个`TreeMapEditor`. 的实现`TreeMapEditor`基本上包装了 a`GraphEditor`并且现在基本上将所有请求转发到底层`GraphEditor`.

```
class TreeMapEditor extends Editor{
 private final Editor wrappedEditor = createWrappedEditor();

 private createWrappedEditor(){
   return new GraphEditor();
 }

 public void doA(){  //This is the abstract class defined in Editor.
   wrappedEditor.doA();
 }

 public void doB(){  //This is the abstract class defined in Editor.
   wrappedEditor.doB();
 }

 public Editor getWrappeEditor(){
  return this.wrappedEditor ;
 }

} 
```

`GraphEditor`现在我的想法是在没有真正子类化的情况下重用代码`GraphEditor`（因此是组合）。`GraphEditor`但客户端代码不仅仅是写给执行的`Editor`。我如何在这里重构这段代码？我希望所有属于的呼叫`Editor`都经过`TreeMapEditor`，只有更具体的呼叫经过`GraphEditor`.

客户端代码现在如下所示：

```
public clientCode(Editor editor){
  GraphEditor graphEditor = (GraphEditor)editor;

  graphEditor .doA(); //This method belongs to Editor()
  graphEditor .doB(); //This method belongs to Editor()

  graphEditor .doC(); //This method belongs to GraphEditor() only and not to TreeMapEditor
  graphEditor .doD();//This method belongs to GraphEditor() only and not to TreeMapEditor

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:38:30.857

您可能想在 GraphEditor 和其他两个之间寻找一个概念；您正在做的事情中是否有一个可以由扩展 GraphEditor 但不是功能齐全的 GraphEditor 或 TreeMapEditor 的类表示的构造？如果有，公共代码可能会包含在其中。

但是我会小心地继续在您的问题空间中实现某些东西的表示，而不是仅仅将方法放入继承层次结构中的类中，因为那是您需要它们的地方。这种自下而上的创建类的风格可能会导致糟糕的设计，很难理解，直到有人说“哦，他只是希望这个方法在这里可用。”。

# javascript - 在两个单词之间添加一个空格

> ID：15343163
> 
> 赞同：7
> 
> 时间：2013-03-11T16:03:26.863
> 
> 标签：javascript

我有一些像“Light Purple”和“Dark Red”这样的词，它们存储为“LightPurple”和“DarkRed”。如何检查诸如“LightPurple”之类的单词中的大写字母，并在“Light”和“Purple”两个单词之间放置一个空格以形成“Light Purple”一词。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T16:36:40.207

您可以使用正则表达式在大写字母旁边有小写字母的地方添加空格。

像这样的东西：

```
"LightPurple".replace(/([a-z])([A-Z])/, '$1 $2') 
```

**更新**：如果你有两个以上的单词，那么你需要使用`g`标志来匹配它们。

```
"LightPurpleCar".replace(/([a-z])([A-Z])/g, '$1 $2') 
```

**更新 2**：如果试图拆分单词`CSVFile`，那么您可能需要使用此正则表达式：

```
"CSVFilesAreCool".replace(/([a-zA-Z])([A-Z])([a-z])/g, '$1 $2$3') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:52:04.733

好的，分享一下我的经验。我也有其他语言的这个工具，它工作得很好。对你来说，我刚刚创建了一个带有示例的 javascript 版本，所以你试试这个：

```
var camelCase = "LightPurple";
var tmp = camelCase[0];
for (i = 1; i < camelCase.length; i++)
{
    var hasNextCap = false;
    var hasPrevCap = false;

    var charValue = camelCase.charCodeAt(i);
    if (charValue > 64 && charValue < 91)
    {
        if (camelCase.length > i + 1)
        {
            var next_charValue = camelCase.charCodeAt(i + 1);
            if (next_charValue > 64 && next_charValue < 91)
                hasNextCap = true;
        }

        if (i - 1 > -1)
        {
            var prev_charValue =  camelCase.charCodeAt(i - 1);
            if (prev_charValue > 64 && prev_charValue < 91)
                hasPrevCap = true;
        }

        if (i < camelCase.length-1 &&
            (!(hasNextCap && hasPrevCap || hasPrevCap)
            || (hasPrevCap && !hasNextCap)))
            tmp += " ";
    }
    tmp += camelCase[i];
} 
```

这是[演示](http://jsfiddle.net/ayLjY/5/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:18:41.940

您可以将每个字符与一串大写字母进行比较。

```
function splitAtUpperCase(input){  
   var uppers = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";  
   //start at 1 because 0 is always uppercase
   for (var i=1; i<input.length; i++){
      if (uppers.indexOf(input.charAt(i)) != -1){
         //the uppercase letter is at i
         return [input.substring(0,i),input.substring(i,input.length)];
      }
   }
} 
```

输出是一个包含第一个和第二个单词的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-09T16:37:56.417

我认为这绝对不是解决这个问题的最佳方法（从优化的角度来看）。但它有效:)

```
const createSpacesBetweenWords = (char, index) => {
  if (char === char.toUpperCase() && index > 0) {
    return ` ${char}`;
  }

  return char;
};

function formatString(string) {
  return string
    .split('')
    .map(createSpacesBetweenWords)
    .join('');
}

formatString('LightPurple'); //returns a new string where words are separated by spaces 
```

# javascript - 在基于事件的系统中同时处理唯一性

> ID：15343165
> 
> 赞同：0
> 
> 时间：2013-03-11T16:03:33.393
> 
> 标签：javascript, mysql, node.js, mutual-exclusion

在我现在正在进行的项目中，我们面临着我们所说的挑战。挑战有*成员*和*参与者*。成员是有权访问挑战的每个人（可以是单个用户或用户组），参与者跟踪每个用户的参与统计信息。

每次添加新的挑战成员时，都会重新计算挑战参与者。这基于事件发生，因此挑战成员触发一个`created`事件，挑战参与者监听该事件。

当同时创建两个挑战成员时会出现问题，这意味着该事件也被触发了两次，并且代码的两次执行同​​时运行。为了显示：

```
challenge.getMembers();
challenge.getParticipants();

// calculations

foreach member not in participants, create participant 
```

如前所述，当上述代码同时运行时会出现问题，更具体地说，当第二次执行`getParticipants`在第一次执行之前到达时，参与者条目丢失了。两次执行都看到一些参与者丢失，并创建它们。这意味着我们现在有一些用户的挑战参与者重复条目。

现在我们解决这个问题的方法是`challenge_id, user_id`在挑战参与者上有一个唯一的索引。但是在违反约束时忽略错误确实感觉有点脏。这也使得检查其他 SQL 错误变得更加困难，因为所有错误都只是传递给回调，然后我们必须检查错误字符串的内容以查看它是否是我们喜欢的错误（违反唯一性），或者我们不喜欢的错误（例如语法错误），应该处理。

此代码将在多个服务器上运行，因此即使使用 mutice，我们也不能保证代码不会同时运行。我们也不介意它同时运行*不同*的挑战，只要它不同时运行相同的挑战。有没有人有处理这种类型的并发合并的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T15:17:27.543

由于您说您不介意针对不同的挑战同时运行代码，因此您可以在挑战表中有一个带有状态的列。然后你会发出一个`UPDATE challenges SET state = {locked} WHERE id = {id} AND state = {unlocked}`. 如果此查询成功并且受影响的行等于 1，那么您可以继续更新参与者并在之后解锁挑战。如果查询不影响任何行，则挑战可能正在由其他执行线程更新，因此您可能希望跳过此步骤或安排稍后重新运行。

如果你走这条路，那么你需要小心解锁你的挑战，并做一些事情来防止它们在更新过程中一个线程崩溃并且没有解锁它的挑战时被卡住。例如，您可以拥有`state = {thread id}`然后您可以检测哪些线程已死并解锁它们的挑战。

# php - 计算某个日期后的周数

> ID：15343166
> 
> 赞同：1
> 
> 时间：2013-03-11T16:03:34.273
> 
> 标签：php, mysql

我目前正在尝试计算期间的数量（每个期间为 1 周，在某个日期或某天之后）。假设第一个时期从 2013 年 1 月 1 日（星期二）开始，直到 2013 年 1 月 29 日（星期二）（总共 4 个时期）。

我有一个看起来像的表：

```
id | startDate (datetime) | endDate (datetime) 
```

我有两个输入字段，用户可以在其中填写 a`start date`和`end date`。我想填写两者之间的任何日期`01-01-2013`，`29-01-2013`并决定它再次经过一个星期二（期间开始的日期）多少次。

因此，如果我选择`01-01-2013 until 07-01-2013`会导致：`1`，但如果我选择`06-01-2013 till 09-01-2013`这将导致`2`并且`06-01-2013 till 16-01-2013`会导致`3`等。

需要明确的是，我不想知道这两个日期之间的周数，只想知道它在数据库中给出的同一天（星期二）“交叉”的次数。每个周期为 1 周。有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:11:54.433

使用 PHP 的`date()`函数。

```
$startday = strtotime($start_date_from_db);//date from db;
$endday = strtotime($end_date_from_db);//date from db;
$counter = 0;
for($i=$startday; $i<=$endday; $i+=86400) {
    $current_day = date('w', $i);
    if($current_day == 2) { //0 for sunday, 1 for monday, 2 for tuesday
        $counter++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:21:53.143

比较日期时，一个好的方法是：

1-将日期转换为时间戳：

```
$timestamp1 = strtotime($date1);
$timestamp2 = strtotime($date2); 
```

2-执行所需的操作，在这种情况下：

```
$timebetween = $timestamp2 - $timestamp1; 
```

3-将结果（秒数）转换为所需值，在这种情况下：

```
$weeks= $timebetween / 604800; 
```

# c++ - C++ - 有序数组列表

> ID：15343170
> 
> 赞同：-2
> 
> 时间：2013-03-11T16:03:44.277
> 
> 标签：c++, arraylist, push

我有一个有序的arrayList。元素将在 1,2,3,4,5,6 中排序。目前推送功能不起作用。它将插入一个元素，但有一个我无法弄清楚的问题。一旦你插入一个递增的数字，推送就会起作用......所以就像 1,2,3,4,5 但一旦我插入这样的 5,2,4,3,2,1 就不起作用了。谁能帮我这个？

这是我的代码：

**初始化**

```
template <class Datatype>
//--------------------------------------------------------------------------------------------
//  Class: OrderedArray.
//--------------------------------------------------------------------------------------------
class OrderedArray
{
    //--------------------------------------------------------------------------------------------
    //  Member Variables.
    //--------------------------------------------------------------------------------------------
private:
    Datatype* m_array;
    int size;
    int g_size;
    int num_elements;
    //---------------------------------------------------------------------------------------
    //  Name:            Print Function:
    //  Description:     To print out all elemenst in the Array.
    //---------------------------------------------------------------------------------------
    void print()
    {
        for(int i=0;i< size;i++)
        {
            cout << "Position: " <<m_array[i]<<endl;
        }
    }

    //---------------------------------------------------------------------------------------
    //  Name:           Resize Function:
    //  Description:    To resize the Array.
    //---------------------------------------------------------------------------------------
    void Resize(int p_size)//resizes the array to the size of p_size
    {
        if(p_size < 0)//checks if new size is less than 0
        {
            cout << "ERROR! Size of an array can not be less than 0!" << endl;
        }
        else//else its ok to continue
        {
            Datatype* newArray = new Datatype[p_size];//creates a pointer newArray that points at a new array
            if(newArray == 0)
                return;

            int min;

            if(p_size < m_size)//checks the if the new array is smaller than the old one
                min = p_size;
            else//else its going to be bigger
                min = m_size;

            int index;
            int temp = num_elements;//puts num_elements into a temporary variable called temp
            num_elements = 0;//num_elements is set to 0
            for(index = 0; index < min; index++)
            {
                newArray[index] = m_array[index];//places everything from the old array into the new array that will fit.
                if(num_elements < temp)//if the num_elements is less than temp(the original num_elements)
                {
                    num_elements++;//increment num_elements. This will keep incrementing to create the new num_elements based the number of elements cut off in the resize
                }
            }
            m_size = p_size;//sets the old size to be equal to the new size

            if(m_array != 0)
                delete[] m_array;//deletes the old array
            m_array = newArray;//makes m_array point at the new array
            newArray = 0;//makes newArray a null pointer
        }
    }

    //---------------------------------------------------------------------------------------
// Name:             Push
// Description:      
//---------------------------------------------------------------------------------------
void push(Datatype p_item)
{
    if(num_elements == size)//checks if the array is full and needs to be resized
    {
        Resize(size + g_size);//calls the resize function
    }

    int pos = num_elements;
    for(int x=0;x<num_elements;x++)
    {
        if(p_item < m_array[x])
        pos=x;
        break;
    }

    //loops through the array from high to low moving all values to the right
    //to make space for the passed in value until it gets to the right place
    for(int index = num_elements; index >= pos; index--)
    {
        m_array[index] = m_array[index-1];//moves the values to the right
    }
        m_array[pos] = p_item;//the passed in value is positioned into its ordered position
        num_elements++;

    cout<< "Num Elements " << num_elements;
    cout<< "Size " <<size;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:17:16.530

我想我找到了问题的开始：

```
for(int x=0;x<num_elements;x++)
{
    if(p_item < m_array[x])
        pos=x;
} 
```

您`pos`将始终以这种方式位于数组的末尾（假设数组已正确排序到该点）。添加一条`break`语句，让您的循环知道何时应该停止分配越来越大的值`pos`

```
for(int x=0;x<num_elements;x++)
{
    if(p_item < m_array[x])
    {
        pos=x;
        break;
    }
} 
```

* * *

您的代码也有一些其他问题，例如

```
for(int index = num_elements; index > pos; index--)
{
    m_array[index] = m_array[index+1];//moves the values to the right
} 
```

实际上将值向左移动。将分配更改为

```
for(int index = num_elements; index > pos; index--)
{
    m_array[index] = m_array[index-1];//moves the values to the right
} 
```

# javascript - css - 100% 高度，像素最小高度

> ID：15343172
> 
> 赞同：0
> 
> 时间：2013-03-11T16:03:45.867
> 
> 标签：javascript, html, height, css

我的目标是创建一个占据 100% 窗口高度的容器，并且在其中有一个也是 100% 窗口高度的图像。但是，我还想在容器上设置一个最小高度，这样事情就不会变得*太小*。
例如：

```
<html>
    <body style="height: 100%;">
        <div style="height: 100%; min-height: 500px;">
            <img src="cool.jpg" style="height: 100%"/>
        </div>
    </body>
</body> 
```

*（我发誓我的网页比这更酷）*

好的，一切都很好。直到我们缩小窗口以便`min-height`启动。此时`div`，正如预期的那样，停止收缩，但`img`随着窗口继续收缩。

有什么想法吗？
纯 CSS 实现将是理想的，但如果需要，我对 JS 持开放态度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:06:44.827

给图像`min-height`而不是容器怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:24:23.347

**试试这个：http:** [//jsfiddle.net/NpqCW/3/](http://jsfiddle.net/NpqCW/3/)

> 如果您需要更多详细信息和示例，请使用我对以下问题的回答作为参考。[https://stackoverflow.com/a/10582476/339367](https://stackoverflow.com/a/10582476/339367)

基本上，您缺少的是根标签上的 height:100% ，即`<html>`. 所有父母都必须有这个设置才能工作，除了根元素之外，你都在做它`<html>`。

## 更新：

[http://jsfiddle.net/jDk3s/](http://jsfiddle.net/jDk3s/)

在图像上添加了 min-height:inherit 以使其在 chrome 上工作。它也可以通过**删除**IMG 父 div 上的最小高度来修复（但不确定你是否真的需要它）.. 所以你可以选择一种或另一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:50:45.427

id只是将div背景设置为目标img，然后通过jquery限制resize时的高度。

```
<html>
<head>
<style>
div#cont {
background: url(path/to/cool.jpg) no-repeat center center fixed;
-webkit-background-size: cover;
-etc-vend-pref-background-size: cover;

}
</style>
</head>
<body style="height: 100%;">

  <div id="cont" style="height: 100%; min-height: 500px;">
    <img id="bg" src="cool.jpg" style="height: 100%"/>
  </div>

<script>
  $(window).load(function(){
  $(window).resize(function(){
   var  win = $(window),
       cont = $('div.cont'),
        min = 500;

    if (win.height() <= min){
      cont.height(min);
    } else {
      cont.height(win.height());
    }

 });

});
</script>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:53:11.110

这就是你所追求的吗？

[http://jsfiddle.net/xDczp/5/](http://jsfiddle.net/xDczp/5/)

```
.container {height:100%; width:100%;}
.content {height: 100%;}
.content img {height:100%; min-height: 500px; width:100%;} 
```

图片高度不应低于 500 像素。

# asp.net - 来自链接按钮单击事件的 javascript 警报

> ID：15343173
> 
> 赞同：1
> 
> 时间：2013-03-11T16:03:45.960
> 
> 标签：asp.net

我有一个 ASP ，每次单击它时都会`LinkButton`向它添加 ID 值。`List<int>`我需要帮助的是如何在添加 20 个项目后向用户发布警报。用户不能添加超过 20 个，所以如果添加了第 21 个项目，我需要提醒他们。这是我当前的代码：

```
List<int> myList = new List<int>();

if(!String.IsNullOrEmpty(Session["mylist"] + String.Empty))
    myList = (List<int>)Session["mylist"];

//Max 20 items in MyList
if (myList.Count < 20)
{
    //Add item to list
}
else
{
    //Alert to tell user that there are 20 items selected
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:19:19.647

注册客户端脚本

```
 if (myList.Count < 20)
        {
            //Add item to list
        }
        else
        {
            var script = "alert(\"more than 20\");";
            Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "MoreThan20", script, true);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:12:32.877

## 方法一

在 html 中的某个位置放置文字。

```
//Max 20 items in MyList
if (myList.Count < 20)
{
   //Add item to list
   literal1.Text="<script>alert("your message");</script>";
} 
```

## 方法二

在您的 html 上放置一个隐藏字段。
每次添加新项目时将其增加 1
并在 java 脚本中检查最大值
如果值达到警报您的消息。

# actionscript-3 - 弹性跳跃标签文字

> ID：15343179
> 
> 赞同：0
> 
> 时间：2013-03-11T16:04:12.543
> 
> 标签：actionscript-3, apache-flex, flex4

我正在使用 Flex 构建应用程序。我添加了一些状态，以便在它们之间切换。我已经制作了一些按钮来从一种状态更改为另一种状态。每个按钮都有一个标签。单击第一个按钮以激活第一个状态时，一切正常。当单击第三个按钮切换到第三个状态时，每个按钮中的标签文本开始跳转/切换并再次向后移动。

任何想法，我该如何解决？

```
<mx:LinkButton includeIn="state1,state2,state3,state5,state6"
                   x="20" y="70" width="40" height="40"
                   toolTip="Admins" click="currentState='state2'" id="adminButton" icon="@Embed(source='static/admin.png')" skin="{null}" focusSkin="{null}"/> 
```

# iphone - 检查 last.fm 返回的 json 中是否存在键

> ID：15343183
> 
> 赞同：1
> 
> 时间：2013-03-11T16:04:23.630
> 
> 标签：iphone, ios, objective-c, xcode, last.fm

我正在编写一个 iOS 应用程序，它使用 last.fm 网络服务来搜索专辑。以下代码将返回的 json 转换为 NSArray：

```
results = (NSArray *)[[[json valueForKey:@"results"] valueForKey:@"albummatches"] valueForKey:@"album"]; 
```

这在搜索词返回结果时工作正常，但在没有返回结果时应用程序崩溃。这是因为没有找到结果时，json 中不存在键“album”。

如何让我的应用程序检查 json 中是否存在“专辑”键？

编辑：没有结果时返回示例 json。搜索字符串是“asdfgasdfg”。请注意albummatches 键下的字符返回。

```
2013-03-12 14:08:00.889 MyMusicLibrary[387:1a03] {
results =     {
    "@attr" =         {
        for = asdfgasdfg;
    };
    albummatches = "\n";
    "opensearch:Query" =         {
        "#text" = "";
        role = request;
        searchTerms = asdfgasdfg;
        startPage = 1;
    };
    "opensearch:itemsPerPage" = 50;
    "opensearch:startIndex" = 0;
    "opensearch:totalResults" = 0;
};
} 
```

编辑 2：返回结果时的示例 json：

```
2013-03-12 14:19:42.769 MyMusicLibrary[880:1a03] {
results =     {
    "@attr" =         {
        for = coldplay;
    };
    albummatches =         {
        album =             (
                            {
                artist = Coldplay;
                id = 1416655;
                image =                     (
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/34s/85845017.png";
                        size = small;
                    },
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/64s/85845017.png";
                        size = medium;
                    },
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/126/85845017.png";
                        size = large;
                    },
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/300x300/85845017.png";
                        size = extralarge;
                    }
                );
                mbid = "c67be398-9417-4c22-bc13-d6158029ae21";
                name = "A Rush of Blood to the Head";
                streamable = 1;
                url = "http://www.last.fm/music/Coldplay/A+Rush+of+Blood+to+the+Head";
            },
                            {
                artist = Coldplay;
                id = 1984;
                image =                     (
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/34s/87203265.png";
                        size = small;
                    },
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/64s/87203265.png";
                        size = medium;
                    },
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/126/87203265.png";
                        size = large;
                    },
                                            {
                        "#text" = "http://userserve-ak.last.fm/serve/300x300/87203265.png";
                        size = extralarge;
                    }
                );
                mbid = "8e602038-c0f2-3c2d-9068-a1a3daca493d";
                name = Parachutes;
                streamable = 1;
                url = "http://www.last.fm/music/Coldplay/Parachutes";
            }
        );
    };
    "opensearch:Query" =         {
        "#text" = "";
        role = request;
        searchTerms = coldplay;
        startPage = 1;
    };
    "opensearch:itemsPerPage" = 2;
    "opensearch:startIndex" = 0;
    "opensearch:totalResults" = 375;
};
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:35:52.670

有两种方法可以解决这个问题

1.  假设`"opensearch:totalResults"`实际上是正确的结果计数，那么您可以使用此值来确定您是否有结果，然后使用

    ```
    NSArray *results = nil;

    if ([[json valueForKeyPath:@"results.opensearch:totalResults"] intValue] > 0) {
      results = [json valueForKeyPath:@"results.albummatches.album"];
    } 
    ```

2.  在处理之前检查您是否有字符串或数组

    ```
    id albummatches = [json valueForKeyPath:@"results.albummatches"];

    // is this a dictionary or a string?
    // You can either ask if it implements the interface or ask what class it is. I prefer the first
    BOOL isDictionary = [albummatches respondsToSelector:@selector(objectForKey:)];

    // or
    BOOL isDictionary = [albummatches isKindOfClass:[NSDictionary class]];

    if (isDictionary) {
      results = [albummatches objectForKey:@"album"];
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:07:37.010

查看：

```
if([[json[@"result"][@"albummatches"] allKeys] containsObject:@"album"]==YES){

    //do your work here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:19:08.820

早些时候有人发布了一个非常好的答案，但随后被删除。不过，它对此有很大帮助，我对其进行了一些修改以获得下面的代码，现在可以使用了。

```
 NSDictionary *resultsDict = [json valueForKey:@"results"];
        if (resultsDict != nil) {
            //Checks to see if any results are returned
            NSDictionary *albumMatchesDict = [resultsDict valueForKey:@"albummatches"];
            NSString *albumMatchesString = [resultsDict valueForKey:@"albummatches"];
            NSCharacterSet *set = [NSCharacterSet whitespaceCharacterSet];
            albumMatchesString = [[albumMatchesString description] stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]];

            if ([[albumMatchesString stringByTrimmingCharactersInSet:set] length] != 0) {
                results = (NSArray *) [albumMatchesDict valueForKey:@"album"];
            }
        } 
```

# c# - 困惑为什么 IEnumerable 可以工作无效参数

> ID：15343185
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:04:25.483
> 
> 标签：c#, .net, linq, io, ssis

嗨，我遇到了一些麻烦，我在 SSIS 中有一个非常简单的脚本任务。这是我第一次使用 LINQ

```
string iFileName = (string)(Dts.Variables["iFileName"].Value);
string oFileName = (string)(Dts.Variables["oFileName"].Value);

try
{
   // string[] lines = File.ReadAllLines(@"\\Fcwdsqlanl01\e$\SQL_OLAP\Log\Billing_2.log");

    IEnumerable<string> stringsOut = File.ReadAllLines(iFileName)
          .Where(line => (char.IsDigit(line, 0)) && line.Contains(","))
          .Select(line => line);

    File.WriteAllLines(oFileName, stringsOut);
}
catch (Exception e)
{
    MessageBox.Show(e.Message);
} 
```

这是我得到的错误

> 'System.IO.File.WriteAllLines(string, string[])' 的最佳重载匹配有一些无效参数。

我不明白为什么它的论点有问题，因为我以与 ReadAllLines 相同的方式使用它。我已经检查过了，stringsOut 变量保存了我想要的字符串数组。我意识到有一些方法可以做到这一点，而不是使用 WriteAllLines，但我想这样做，假设我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:07:19.943

`WriteAllLines`期望 a`string[]`作为它的第二个参数，而你传递一个`IEnumerable<string>`. 那`IEnumerable<string>`可以指 a `string[]`，但也可以指任何其他类型也实现`IEnumerable<string>`.

这应该有效：

```
File.WriteAllLines(oFileName, stringsOut.ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:08:21.240

您正在为哪个版本的 .Net 编译？`WriteAllLines`接受 an作为第二个参数的重载`IEnumerable<string>`直到 .Net 4.0 才添加。该方法存在于 3.0 中，但只有以 a`string[]`作为第二个参数的重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:08:53.733

尽管您正在`ReadAllLines`执行`IEnumerable<string>`.

尝试将您的代码更改为类似

```
IEnumerable<string> stringsOut = File.ReadAllLines(iFileName)
                  .Where(line => (char.IsDigit(line, 0)) && line.Contains(","))
                  .Select(line => line)
                  .ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T16:09:39.147

> 'System.IO.File.WriteAllLines(string, string[])' 的最佳重载匹配

我假设您低于 .NET 4，在 .NET 4`WriteAllLines`中 [`IEnumerable<string>`](http://msdn.microsoft.com/en-us/library/dd383693.aspx)是新的。

所以只需使用数组版本：

```
string[] stringsOut = File.ReadAllLines(iFileName)
    .Where(line => (char.IsDigit(line, 0)) && line.Contains(","))
    .Select(line => line)
    .ToArray();
File.WriteAllLines(oFileName, stringsOut); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T16:09:53.493

该方法`File.WriteAllLines`确实将字符串数组作为第二个参数，而不是字符串

# c# - 签署从字节数组流式传输的 PDF 文档

> ID：15343190
> 
> 赞同：0
> 
> 时间：2013-03-11T16:04:44.367
> 
> 标签：c#, database, adobe, bytearray, outputstream

我从 Adob​​e Acrobat 和/或 Reader 得到的具体错误

“无法签署文档尝试提交此签名时出错。文档未保存。此文件必须以完全保存的方式保存。”

我试图签署的 PDF 是从存储在数据库中的二进制数据显示到 IFrame 的字节数组创建的。

```
 byte[] stream = (from m in db.pdf_store
                             where m.pdf_id == uid
                             select m.pdf_binary).First().ToArray();
            Response.ContentType = "application/pdf";
            Response.AddHeader("Content-Disposition", "Inline");
            Response.OutputStream.Write(stream, 0, stream.Length);
            Response.Flush();
            Response.End(); 
```

此代码可以很好地显示 PDF 以及在 Internet Explorer 中显示签名字段。我可以单击签名框，使用签名板对文档进行签名，但是当我单击接受时，我收到了上面的错误。

我相信这可能与 PDF 不是实际文件有关。任何建议或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:15:52.190

发现问题。我正在使用 Itextsharp 创建修改 PDF。我发现我必须使用附加模式来保持用户权限。我还发现，为了在创建字节数组时使用 Itextsharp 的追加模式，您必须使用 ToArray 而不是 GetBuffer 来读取它。

# php - iDeal 支付 SE2700 错误；无效的电子签名

> ID：15343191
> 
> 赞同：1
> 
> 时间：2013-03-11T16:04:44.563
> 
> 标签：php, cakephp-1.3, payment

这是一个具体的 iDeal 问题；即使我的证书有效且创建正确，我仍不断收到 SE2700 错误。证书也被上传到收单方（ING 银行），我也下载并添加了收单方的证书。

MercerReturnURL 没有任何特殊字符 ( [http://www.04dertien.com](http://www.04dertien.com) ) 并且商家 ID 有效。

有没有可能涉及expose_php设置？

这是理想的错误：

```
DOMDocument Object (
    [doctype] => 
    [implementation] => (object value omitted) 
    [documentElement] => (object value omitted)
    [actualEncoding] => UTF-8
    [encoding] => UTF-8
    [xmlEncoding] => UTF-8
    [standalone] => 1
    [xmlStandalone] => 1
    [version] => 1.0
    [xmlVersion] => 1.0
    [strictErrorChecking] => 1
    [documentURI] => /DOMAIN/public_html/beta/app/webroot/
    [config] =>
    [formatOutput] =>
    [validateOnParse] =>
    [resolveExternals] =>
    [preserveWhiteSpace] => 1
    [recover] =>
    [substituteEntities] =>
    [nodeName] => #document
    [nodeValue] =>
    [nodeType] => 9 
    [parentNode] => 
    [childNodes] => (object value omitted) 
    [firstChild] => (object value omitted) 
    [lastChild] => (object value omitted) 
    [previousSibling] => 
    [attributes] => 
    [ownerDocument] => 
    [namespaceURI] => 
    [prefix] => 
    [localName] => 
    [baseURI] => /DOMAIN/public_html/beta/app/webroot/ 
    [textContent] => 2013-03-11T15:56:17.834Z SE2700 Invalid electronic signature System generating error: Acquirer Please try again later or pay using another payment method. Betalen met iDEAL is nu niet mogelijk. Probeer het later nogmaals of betaal op een andere manier.
) 
```

这是PHP生成的错误：

```
Fatal error: 
Uncaught exception 'iDEALConnector\Exceptions\iDEALException' 
with message 'Invalid electronic signature' in 
/DOMAIN/beta/vendors/ideal/Xml/XmlSerializer.php:194 

Stack trace:
#0 /DOMAIN/beta/vendors/ideal/Xml/XmlSerializer.php(145): iDEALConnector\Xml\XmlSerializer->checkForErrorMessage(Object(DOMDocument)) 
#1 /DOMAIN/beta/vendors/ideal/iDEALConnector.php(287): iDEALConnector\Xml\XmlSerializer->deserialize(Object(DOMDocument)) 
#2 /DOMAIN/beta/vendors/ideal/iDEALConnector.php(119): iDEALConnector\iDEALConnector->sendRequest(Object(iDEALConnector\Entities\DirectoryRequest), 'https://idealte...') 
#3 /DOMAIN/beta/app/controllers/bank_controller.php(33): iDEALConnector\iDEALConnector->getIssuers() 
#4 [internal function]: BankController->index() 
#5 /DOMAIN/beta/cake/dispatcher.ph in /DOMAIN/beta/vendors/ideal/Xml/XmlSerializer.php on line 194 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T12:46:48.937

我遇到过同样的问题。事实证明，在 iDEAL v3 API（我正在从以前的版本升级到）中，不允许有效期超过 5 年的证书。

PHP 集成指南中没有提到这个（非常重要的）细节，但在一般集成指南中。

看

> 8.4 创建密钥对

在[商家集成指南 (MIG) 版本 3.3.1.pdf](http://d.pr/f/OyTG)

# c# - 类内具有nHibernate的空值属性？

> ID：15343196
> 
> 赞同：1
> 
> 时间：2013-03-11T16:05:01.293
> 
> 标签：c#, nhibernate, properties

**Frecuencia.cs**

```
public class Frecuencia : Modelo<Frecuencia>
{
    ...
    public virtual string FrecuenciaEspecifica { get; set; }
    ...

    protected virtual FrecuenciaEspecifica GetFrecuenciaEspecifica()
    {
        Console.WriteLine(FrecuenciaEspecifica);
    }
} 
```

**frecuencia.hbm.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                  assembly="Dominio"
                  namespace="Dominio">
  <class name="Frecuencia" table="frecuencias">
    ...
    <property name="FrecuenciaEspecifica" />
  </class>
</hibernate-mapping> 
```

如果我打电话`GetFrecuenciaEspecifica()`，我会得到一个空输出，但如果我尝试： `Console.WriteLine(Frecuencia.FrecuenciaEspecifica)`在**另一个**类中，我会得到输出值。请参阅下面的图片

## ![图像1](../Images/3af5c5bb37317f512444588f39d25487.png)

![图2](../Images/169de738e6921253d30f7aa9288e5160.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:22:24.863

目前尚不清楚您是如何创建每个实例的，但鉴于您使用的是 NHibernate，我猜想第一个示例（它为 null）不是从 获取的`ISession`，或者如果您这样做了，则会话已关闭，并且异常正在被 WPF 吞噬。

如果它不是从会话加载的，那么就没有代理，也没有从数据库加载值的机制。您可以通过使用即时窗口和类型来检查这一点，`this is NHibernate.Proxy.INHibernateProxy`如果该值是`false`那么您没有从会话中加载它。

如果会话已关闭，并且 WPF 正在吞噬它，则可以使用 Visual Studio 异常对话框在`ObjectDisposedException`.

# java - 将单词的第一个字母大写

> ID：15343200
> 
> 赞同：-2
> 
> 时间：2013-03-11T16:05:15.057
> 
> 标签：java

假设我有一个字符串值，即 michael 。我需要的是'Michael'形式的这个值。尽管我是 java 的初学者，但有什么更好的编程方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:08:01.550

我不会给你代码，但你可以使用以下步骤实现你想要的：

*   [**使用String#charAt(0)**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)从字符串中获取第一个字符[](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)
***   使用[**Character#toUpperCas**](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html#toUpperCase%28char%29) e 将其转换为大写*   将结果连接回原始字符串**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:10:16.087

```
String str = "abcd";
Character first = Character.toUpperCase(str.charAt(0));
str = first + str.substring(1, str.length());
System.out.println(str);  //Will print Abcd 
```

这段代码

*   获得第一个`Character`从`String`
*   将其转换为大写（使用`Character.toUpperCase(char ch)`）
*   将第一个字母（已更改为大写）与其余字母连接起来`String`

*我不喜欢使用`+`运算符来连接字符串，请考虑使用`concat`方法（或 StringBuilder，以防您想连接更多字符串..）***

# jquery - 在 Internet Explorer 9 中绑定

> ID：15343202
> 
> 赞同：0
> 
> 时间：2013-03-11T16:05:20.120
> 
> 标签：jquery, internet-explorer-9, bind, undefined

我的 jQuery 代码在 Firefox 中运行良好但在 IE9 中没有问题。在控制台中，我收到以下错误：

> SCRIPT5007：无法获取属性“绑定”对象的值 null 或未定义

这将我发送到脚本的这一部分：

```
 //upload files
    this.uploadFiles.bind('click', this, function(e){
        if(e.data.settings.enable) e.data.uploadAll();
        return false;
    });

    //remove all files from list
    this.removeFiles.bind('click', this, function(e){
        if(e.data.settings.enable) e.data.clearQueue();
        return false;
    }); 
```

整个 js 可以在这里下载 [http://tinyurl.com/c9jl2x8](http://tinyurl.com/c9jl2x8) (ajaxupload.js)

该脚本是从 [http://codecanyon.net/item/real-ajax-multi-uploader/805976下载的](http://codecanyon.net/item/real-ajax-multi-uploader/805976)

作者声称它应该适用于所有导航器......但它不是哈哈我做错了什么还是什么？

我正在使用脚本附带的 jQuery 文件（jQuery v1.7.2），我尝试使用 1.9，结果相同。在我看来，代码的语法需要更改才能使脚本正常工作，但我没有足够的 jQuery 知识来让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:06:21.860

该代码在定义 uploadFiles/removeFiles 的库中进行了注释

```
//Upload all button
this.uploadFiles = $('<a class="'+bs_upload+'" title="' + _('Upload all files') + '" />').append('<span class="'+bs_u_icon+'"></span> <span>' + _('Start upload') + '</span>').appendTo(this.fieldSet);

//remove files button
this.removeFiles = $('<a class="'+bs_remove+'" title="' + _('Remove all') + '" />').append('<span class="'+bs_r_icon+'"></span> <span>' + _('Remove all') + '</span>').appendTo(this.fieldSet); 
```

您需要取消注释它才能停止抛出该错误

![在此处输入图像描述](../Images/12189c0f2f2cf1e147584517148154d8.png)

# windows - 如何从给定的 LANGID 中正确查询语言名称字符串？

> ID：15343205
> 
> 赞同：3
> 
> 时间：2013-03-11T16:05:29.393
> 
> 标签：windows, winapi, locale, nls

**在输入时**，我有一个语言 ID。 **在输出**时，我确实期望*语言的完整本地化名称*。

我`GetLocaleInfo(..., LOCALE_SLANGUAGE, ... )`用来填充字符串。在我收到`0`输入和`GetLocaleInfo`用用户默认语言填充字符串而不是指示中性语言（预期）。据我所知，没有特殊的 LOCALE_XXX_DEFAULT 常量等于`0`.

这是一个测试用例：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  wIDLanguage: WORD;
  lpLCData: string;
  cchData: Integer;
begin
  wIDLanguage := 0;
  Assert(wIDLanguage = MAKELANGID(LANG_NEUTRAL, SUBLANG_NEUTRAL));

  cchData := GetLocaleInfo(MAKELCID(wIDLanguage, SORT_DEFAULT), LOCALE_SLANGUAGE, nil, 0);
  Win32Check(cchData <> 0);
  //Win32Check(GetLastError = ERROR_INSUFFICIENT_BUFFER);
  SetLength(lpLCData, cchData);
  Win32Check(GetLocaleInfo(MAKELCID(wIDLanguage, SORT_DEFAULT), LOCALE_SLANGUAGE, PChar(lpLCData), Length(lpLCData)) <> 0);
  SetLength(lpLCData, Length(lpLCData) - 1);

  Caption := '"' + lpLCData + '"';
end; 
```

*   **我在这里做错了什么？**
*   **如何正确检索语言名称？**

# iphone - XCode 禁用提示以恢复外部更改

> ID：15343211
> 
> 赞同：1
> 
> 时间：2013-03-11T16:05:42.747
> 
> 标签：iphone, ios, xcode, cocoapods

我有一个在 XCode 4.6 中使用 Cocoapods 的 iOS 项目。

每次我运行`pod install`XCode 时都会提示我保留 xcode 版本或恢复对**磁盘**中“App-Name.xcworkspace”的更改。

现在显然每次弹出此对话框时，我都可以单击“恢复”，但这很乏味并且会修剪错误，因为该术语令人困惑，因为此对话框中的“恢复”实际上意味着将版本保留在磁盘中。

有没有办法在 XCode 设置中禁用此提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:21:55.813

没有办法禁用我知道的对话框。

然而，下一个版本的 CocoaPods (0.17) 仅在添加或删除项目时才写入工作区，从而将 Xcode 显示提示的时间限制在极少数情况下。

# javascript - Javascript 为不同的输入重复 .keyup(function(event) 函数

> ID：15343212
> 
> 赞同：0
> 
> 时间：2013-03-11T16:05:47.507
> 
> 标签：javascript

我创建了一个小的 ajax 建议输入字段（位于此处：[https ://github.com/joyser/suggestion/](https://github.com/joyser/suggestion/) ://github.com/joyser/suggestion/ ）

Javascript 在建议框中检测到一个 keyup 事件，如下所示：

```
$("#suggestiveInput").keyup(function(event){

}) 
```

其中输入的 id 为SuggestiveInput。

我希望能够在页面上拥有多个建议框，但不想使用 php 为每个元素打印 $("#suggestiveInput").keyup(function(event){ 。

所以理想情况下，我想要一个可以处理所有输入的 javascript 函数。

另外，我不希望捕获所有击键，然后尽可能将其路由到文本字段

我试过这样的事情：

```
function suggestiveInput(inputName, options){

    suggestionCount++;
    $("#suggestiveInput"+suggestionCount).keyup(function(event){

    })

}) 
```

但这并不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:10:20.737

将类名应用于每个输入，然后将 keyup 事件绑定到该输入。您可以将一个类应用于多个元素。

# java - 在 Windows XP 中找不到 maven 项目的 Spring 类

> ID：15343213
> 
> 赞同：0
> 
> 时间：2013-03-11T16:05:49.767
> 
> 标签：java, windows, maven

我在 Windows 上运行一个 maven 项目（.jar 文件），`java -jar "/path-to-jar/myfile.jar"`但找不到`org/springframework/context/annotation/AnnotationConfigApplicationContext`.

我是否需要将 spring 之类的依赖项添加到`<build>`pom.xml 的部分中，或者确保这些依赖项包含在 .jar 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:31:08.703

通常，您不会在应用程序 jar 中包含库 jar（不使用自定义类加载器或[One-JAR](http://one-jar.sourceforge.net/)）。相反，使用您用于编译/构建 jar 文件`-classpath`的 -delimited jar 文件设置 java 命令行参数。`:`所以你的命令看起来像

```
java -classpath .:lib/spring.jar:lib/spring-context.jar:lib/others.jar -jar "/path-to-jar/myfile.jar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:13:05.087

我花了一段时间才找到，但 Maven 构建插件是我需要的......

```
 <build>
    <plugins>
        <plugin>
            <!-- Build an executable JAR -->
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <mainClass>com.production.Main</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <id>tar-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.production.Main</mainClass>
                    </manifest>
                </archive>
                <finalName>myapp</finalName>
                <descriptorRefs>
                    <descriptorRef>with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin>
    </plugins>
  </build> 
```

# jquery - 检查是否在加载时使用 jquery 检查了某些属性

> ID：15343215
> 
> 赞同：0
> 
> 时间：2013-03-11T16:05:53.713
> 
> 标签：jquery, selectedvalue

我想检查是否在加载时检查了我的 html 选择中的 3 个选项中的 2 个细节。

实际上，我的 HTML ：

```
<select name="country" id="country" tabindex="7" style="width:128px; margin-right:26px;">
            <option selected="selected" name="0">Choisir...</option>
            <option value="Canada" <?php if($pays == 'Canada'){echo "selected=selected";} ?>>Canada</option>
            <option value="États-Unis" <?php if($state == 'États-Unis'){echo "selected=selected";} ?>>États-Unis</option>
        </select> 
```

我的 jQuery 如下：

```
if($('#reference').attr('selected',true))
    {
        $('.showDetaillant').show();
    } 
```

如您所见，它只检查是否“选择”了某些内容。默认情况下，这是选项“Choisir...”。

如果选择了“Choisir ...”选项，我想要的是设置 .hide() 。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:09:49.467

您可以使用`selectedIndex`属性，如果您想在页面加载时检查所选选项，您可以`change`在 DOMReady 上触发事件。

```
$('#country').change(function(){
    if (this.selectedIndex === 0) {
        $('.showDetaillant').show();
    }
}).change(); 
```

[http://jsfiddle.net/JfDZ4/](http://jsfiddle.net/JfDZ4/)

PS：请注意，您使用`attr`的*setter*返回一个 jQuery 对象，该对象总是被评估为*`true`*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:10:18.320

```
 <select name="country" id="country" tabindex="7" style="width:128px; margin-
        right:26px;">
             <option selected="selected" value="0">Choisir...</option>
     </select>

<script>
     $(document).ready(function () {

         if($('#country').val()=="0")
           $('.showDetaillant').show();
       });

<script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:14:59.953

您可以尝试以下操作，它为您提供所选选项的索引

```
$("select#elem").get(0).selectedIndex > 0 
```

阅读此[如何使用 jquery 检查下拉列表的选定索引是否不是 0 或 -1](https://stackoverflow.com/questions/2875153/how-to-check-if-selected-index-of-dropdownlist-is-not-0-or-1-using-jquery)

# linux - 使用 getchar() 捕获 HOME 键

> ID：15343217
> 
> 赞同：2
> 
> 时间：2013-03-11T16:05:55.707
> 
> 标签：linux, terminal, keyboard, getchar

我正在为 Linux 上的控制台程序编写命令行界面。我希望能够在其中使用箭头之类的键。因此，为了捕获代码，我使用了这个简单的程序：

```
int main()
{
    int c = 0;
    while (c != 3) { // ctrl-c
        c = getchar();
        printf("%d\n", c);
    }
} 
```

这样做我在捕获 HOME 键时遇到了问题。在一台计算机上，我得到序列“27 91 72”，在另一台计算机上得到“27 79 72”，在第三台计算机上得到“27 91 49 126”。

我不知道为什么我在 HOME 和 END 键上得到如此不同的代码（箭头和 F1-F12 键在三台计算机上给出了相同的序列）。

有没有一种标准的方法来获取这个密钥，或者某种配置可以在所有机器上给我相同的序列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:27:20.537

你可以使用 curses 框架。

使用诅咒时，很容易获得特殊的按键。但缺点是你必须在链接时拉入整个curses 库（例如使用gcc -lcurses）并且你必须在初始化的curses 屏幕中使用所有curses 函数。

```
#include <stdio.h>
#include <curses.h>

int main()
{
    int c = 0;
    initscr();
    keypad(stdscr, 1);
    c = getch();
    endwin();
    printf("0x%04x\n", c);
    printf("0x%04x\n", KEY_HOME);
} 
```

这将初始化标准屏幕（stdscr），启用其中的键盘并使用 getch() 获得按键，然后再次关闭 stdscr 以恢复 tty 模式。

您还可以使用 has_key() 函数检查当前终端是否支持特殊键。

这是简单的方法..

# python - 使用 lxml 获取 divs HTML 内容

> ID：15343218
> 
> 赞同：1
> 
> 时间：2013-03-11T16:06:04.480
> 
> 标签：python, lxml

我正在使用 python 和 lxml 从大量链接中获取 div.article 的内容。我想要 div 的实际 html 标记。但到目前为止，我只能获得去除标记的链接的 text_content() 。

```
doc = html.fromstring(doc_text)

article = doc.cssselect("div.article")

if len(article) > 0:
    text = article[0].text_content()

    data = {
        'product':product,
        'content': text,
    } 
```

谁能帮我获取文章[0]的标记？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:46:51.683

您可以只使用节点的迭代功能并以这种方式构建您的字符串。

```
def innerHTML(node): 
    buildString = ''
    for child in node:
        buildString += html.tostring(child)
    return buildString 
```

# angularjs - AngularJs在表单提交中绑定集合

> ID：15343219
> 
> 赞同：1
> 
> 时间：2013-03-11T16:06:04.427
> 
> 标签：angularjs

我有 2 张桌子：（1）膳食（2）蔬菜。基本上在表单提交中，用户选择 2 个蔬菜添加到新创建的餐点中。

**一、服务端模型创建：**

```
 public class Meal{

    public Meal(
       Vegatables = new List<Vegatable>();
    }

    public int Id {get; set;}
    public string Name {get; set;}
    public virtual ICollection<Vegatable> Vegatables {get; set;}
}

 public class Vegatable{

    public Vegatable(
       Meals = new List<Meal>();
    }

    public int Id {get; set;}
    public string Name {get; set;}
    public virtual ICollection<Meal> Meals {get; set;}
} 
```

**二形式：**

```
 <div ng-controller="MealCtrl>
   <input  type="text" ng-model="meal"></select>

   <label>Choose Vegatable 1</label>
   <div ng-controller="VegatableCtrl>
   <select id="vegatable1" ng-model="vegatable" ng-options="vegatable.Name for vegatable in vegatables"></select>
   </div>      

   <label>Choose Vegatable 2</label>
   <div ng-controller="VegatableCtrl>
   <select id="vegatable2" ng-model="vegatable" ng-options="vegatable.Name for vegatable in vegatables"></select>
   </div> 

  </div> 
```

**三、问题：**

显然，当我在本地窗口中查看服务器控制器的 POST 方法时，没有为 Meal 类的 vegatable 集合分配任何值。

**关于如何在保存到服务器之前将蔬菜添加到 $scope.meal 的任何想法？**

**最后注：**

由于这是一个多对多的关系，所以会有一个连接表。这对 POST 方法有何影响？

**已解决 - 像往常一样：求救！！**

**我看到我做错的一件事是在选择中使用 VegatableCtrl。我现在看到 $scope.Vegatables 的填充实例应该在 MealCtrl 中，并使用 MealCtrl 填充 Vegatables 的选择选项。**

谢谢布莱斯！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:27:15.133

似乎您构建的对象可能提交不正确。[这是一个 plunker](http://plnkr.co/edit/Q0VHjO4kmmla0aalNXd7?p=preview)，显示了您的 MVC 方法应该接受的对象的构建。

这是HTML：

```
<form ng-controller="MealCtrl" name="MealForm" ng-submit="submitMeal()">
  <select ng-model="selectedMeal" ng-options="meal.Name for meal in Meals"></select><br/>

  <label>Choose Vegatable 1
  <select ng-model="selectedVeggie1" ng-options="vegetable.Name for vegetable in vegetables"></select></label>
  <br/>

  <label>Choose Vegatable 2
  <select ng-model="selectedVeggie2" ng-options="vegetable.Name for vegetable in vegetables"></select></label>
  <br/>

  <button type="submit">Submit</button>
</form> 
```

和示例 Angular 控制器：

```
app.controller('MealCtrl', function($scope) {
  $scope.Meals = [
    { Id: 1, Name: 'Meal 1' },
    { Id: 2,  Name: 'Meal 2' },
    { Id: 3, Name: 'Meal 3' }
  ];

  $scope.vegetables = [
    {Id: 100, Name: 'Broccoli' },
    {Id: 101, Name: 'Zucchini' },
    {Id: 102, Name: 'Green Beans' },
    {Id: 103, Name: 'Brussel Sprouts'}
  ];

  $scope.submitMeal = function (){
    //build the meal
    var meal = angular.copy($scope.selectedMeal);
    meal.Vegetables = [
      angular.copy($scope.selectedVeggie1),
      angular.copy($scope.selectedVeggie2)
      ];
    console.log(meal);
    //TODO: submit via ajax.
  }
}); 
```

# c++ - 模板类比使用相同类型的非模板类大？

> ID：15343222
> 
> 赞同：11
> 
> 时间：2013-03-11T16:06:07.340
> 
> 标签：c++, templates

我曾经在一次求职面试中被问到一个棘手的问题：一个模板化的类是否比另一个相同但没有模板化的类占用更多的内存？我的回答是否定的，但他问这个问题的事实意味着可能存在这种情况。或者，他真的想和我搞砸。什么情况下模板类会占用更多内存？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T16:21:59.860

首先要明确问题的含义。如果问题是该类型的对象是否会更大（即`sizeof(T<int>) > sizeof(T_int)`），那么答案是*否定*的。如果问题是关于应用程序本身的二进制足迹，包括函数的代码，那么答案是程序的整体大小在模板的情况下实际上可能更小，因为只会编译*使用*的成员函数（除非显式实例化）。尽管在一天结束时，链接器也可能会从非模板版本中丢弃未使用的成员。

有一个通用术语：*代码膨胀*，用于指代模板生成的代码的爆炸式增长。该术语指的是模板的每个不同实例化都将生成其自己的函数，并且与允许转换参数的较小的非模板函数集相比，这可能导致可执行文件中存在更多的函数。

考虑一个向量模板的可能接口：

```
template <typename T>
class Vector {
   template <typename U> void push_back(U u);
//.... 
```

对于每个`push_back`使用不同参数类型的调用，都会生成一个新函数，因此会有一个 for`Vector<int>::push_back('a')`和另一个 for `Vector<int>::push_back(1)`。`std::vector`与成员函数不是模板，调用者进行类型转换的接口进行比较。

虽然这可能是更大的可执行文件的来源，但我不认为这是所要求的。特别是，对于模板类型，以及为特定实例化类型手工制作的等效非模板类型，生成的代码应该是等效的（忽略模板名称往往更大的事实:)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T16:09:06.760

就记忆而言，答案是否定的。我的意思是，它不一定要占用更多内存，尽管有些邪恶的人可能会编写一个类模板只是为了证明*他的*观点，即类模板版本需要更多内存。

但是，对于类型参数的特定值，类模板的源代码可能比非模板类版本更大（或更少）。

```
template<typename T>
struct point_t
{
    T x, y, z;
};

struct point_int
{
    int x, y, z;
};

std::cout << (sizeof(point_int) == sizeof(point_t<int>)) << std::end; 
```

它将打印`true`（或`1`）。

请注意，`point_int`和的内存布局`point_t<int>`将是相同的。所以你甚至可以像这样投射：

```
point_t<int>  pt {10, 20, 30};

point_int  pi = *reinterpret_cast<point_int*>(&pt);

std::cout << "{" << pi.x <<"," << pi.y <<"," << pi.z << "}" << std::endl; 
```

它将打印`{10, 20, 30}`.

*   [在线演示](http://ideone.com/JsWc0g)

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T16:13:26.770

模板在编译时被引用的每个地方都替换为实际值。所以如果你有一个模板类说：

```
public List<T>
{
  public T* MyT;
  ...
} 
```

并且您的代码将它与特定类型一起使用说： List ，而不是使用此代码实际发生的情况：

```
public List<Point>
{
public Point *MyT;
....
} 
```

所以它基本上与任何其他非模板类的大小相同。

# netbeans - 如何在 Netbeans 中更改此文本颜色？

> ID：15343227
> 
> 赞同：3
> 
> 时间：2013-03-11T16:06:34.940
> 
> 标签：netbeans, text, colors

我已经使用 Netbeans 很长时间了，但我仍然发现很难在编辑器中更改文本颜色，最重要的是我遇到了一个新问题，我的 Java 代码颜色在旧 Nb 版本中看起来很好，但在最新版本 7.3 它们看起来不正确，请参阅附图了解详细信息。我突出显示了第二张图片中的文本，以便我们可以看到文本。

所以我的问题是：

[a] 如何将下图中的“request”和“response”文字颜色由黑色变为白色？

[b] NB 有没有办法右键单击文本并更改它的前景色/背景色？如果不存在，我可以为将来的版本建议此功能吗？

![在此处输入图像描述](../Images/317cd82ceb2abfeac73b5b2befed2ea1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:28:24.340

`Tools -> Options`然后转到选项`Fonts and Colors`卡。

[a] 对于 javadoc 参数，从下拉菜单中选择 Java 语言。它是`Javadoc Tag`.

[b] 对于选择、`Highlighting`选项卡和`Selected Text`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-21T21:37:36.410

更新此问题的 A 部分。NetBeans 使用“Javadoc 标识符”来格式化您在第一个屏幕截图中突出显示的“请求”和“响应”。这仍然可以通过

> 工具 --> 选项 --> 字体和颜色 --> 语法 --> “语言：Java”。

# python - 正则表达式贪心问题

> ID：15343228
> 
> 赞同：1
> 
> 时间：2013-03-11T16:06:35.020
> 
> 标签：python, regex

我需要使用 Python 解析一个字符串并提取 2 个用`:`（冒号）分隔的标记，这些标记可以用单引号、双引号或不带引号括起来。

工作示例：

```
# <input string> -> <tuple that should return> 

1) abc:def -> (abc, def)
2) abc:"def" -> (abc, def)
3) "abc":def -> (abc, def)
4) "abc":"def" -> (abc, def)
5) "a:bc":abc -> (a:bc, abc) 
```

示例案例不起作用：

```
# <input string> -> <tuple that should return> 

6) abc:"a:bc" -> (abc, a:bc)
7) "abcdef" -> (abcdef,) 
```

使用的正则表达式是：

```
>>> import re
>>> rex = re.compile(r"(?P<fquote>[\'\"]?)"
                     r"(?P<user>.+)"
                     r"(?P=fquote)"
                     r"(?:\:"
                     r"(?P<squote>[\'\"]?)"
                     r"(?P<pass>.+)"
                     r"(?P=squote))") 
```

我有 2 个问题，首先是样本案例 6) 和 7) 不起作用，其次是在`rex.match`我希望所有组匹配但不是`fquote`and之后`squote`。我的意思是现在`rex.match("'abc':'def').groups()`回来了`("'", "abc", "'", "def")`，我只是想要`("abc", "def")`。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:18:45.310

您可以在`csv`这里使用模块而不是正则表达式：

```
inputs = [
    'abc:def', 'abc:"def"', '"abc":def', '"abc":"def"', '"a:bc":abc', #working
    'abc:"a:bc"', 'abcdef' # not working

]

import csv
for idx, el in enumerate(inputs, start=1):
    print idx, tuple(next(csv.reader([el], delimiter=':'))) 
```

这给了你：

```
1 ('abc', 'def')
2 ('abc', 'def')
3 ('abc', 'def')
4 ('abc', 'def')
5 ('a:bc', 'abc')
6 ('abc', 'a:bc')
7 ('abcdef',) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:53:51.523

为什么必须检索所有组？只选择你感兴趣的，忽略其余的。这是一个例子：

```
rex = re.compile(
    r"""^(?:
      (?P<fquote>['"])
      (?P<user1>(?:(?!(?P=fquote)).)+)
      (?P=fquote)
      |
      (?P<user2>[^:"'\s]+)
    )
    (?:
      :
      (?:
        (?P<squote>['"])
        (?P<pass1>(?:(?!(?P=squote)).)+)
        (?P=squote)
        |
        (?P<pass2>[^:"'\s]+)
      )
    )?
    $""", 
    re.VERBOSE)

result = rex.sub(r"\g<user1>\g<user2> : \g<pass1>\g<pass2>", subject) 
```

补充说明：

*   将其拆分以分别处理带引号和不带引号的字段使工作变得更加容易。您知道每对组中的一个将始终为空，因此将它们连接起来是安全的。

*   `(?:(?!(?P=fquote)).)+`一次使用一个字符，但只有在它确认该字符与开头引号不同之后。您不必担心它会超出结束报价，就像`.+`那样。（你真的应该在`.+?`那里使用不情愿的，但这种方式更好。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:03:43.380

```
def foo(string):
    rex = re.compile(r"(?P<fquote>[\'\"]?)"
                     r"(?P<user>.+?)"
                     r"(?:(?P=fquote))"
                     r"(?:\:"
                     r"(?P<squote>[\'\"]?)"
                     r"(?P<pass>.+)"
                     r"(?P=squote))"
                     r"|(?P<sfquote>[\'\"]?)"
                     r"(?P<suser>.+)"
                     r"(?:(?P=sfquote))")
    match = rex.match(string)
    suser_match = match.group("suser")
    return (suser_match,) if suser_match else (match.group("user"), match.group("pass")) 
```

这可以完成工作，但我强烈反对它。正则表达式应尽可能简单，因为这种解决方案难以理解，因此难以维护。您可能需要一个上下文无关的语法，在我看来，它更适合您作为示例给出的模式类型（特别是对于`"abcdef"`字符串，它需要一个单独的组）。

你的第二个问题是符号组即使你把它们放在里面也会被捕获`(?:...)`。这就是为什么我认为检索它们更容易，然后使用匹配的符号组创建元组。

# php - 从 PHP 中的 xpath 查询返回原始 XML？

> ID：15343229
> 
> 赞同：2
> 
> 时间：2013-03-11T16:06:39.423
> 
> 标签：php, xml, xpath

我正在寻找 xpath 并从 PHP 中的文件中提取原始 XML，但我不希望将结果解析为数组。我只是想从原始文档中返回一个子集。

我的原始文档结构如下：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <row id="1">
        <child1>value1</child1>
        <child2>value1</child2>
        <child3>value1</child3>
    </row>
    <row id="2">
        <child1>value1</child1>
        <child2>value1</child2>
        <child3>value1</child3>
    </row>
</root> 
```

我想要做的就是能够 xpath 进入 /root/row[@id="1"] 并返回：

```
<?xml version="1.0" encoding="utf-8"?>
<row id="1">
    <child1>value1</child1>
    <child2>value1</child2>
    <child3>value1</child3>
</row> 
```

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:13:15.040

```
$doc = new DOMDocument();
$doc->loadXML('<root>...</root>'); // or $doc->load($file) if loading from file
$xpath = new DOMXpath($doc);
$elements = $xpath->query("/root/row[@id='1']");
if ($elements) {
    foreach ($elements as $item) {
        echo $doc->saveXML($item), "\n";
    }
 } 
```

感谢@fab 的评论。我忘记[了](https://stackoverflow.com/questions/983564/in-php-how-can-i-get-the-outer-xml-from-a-domnode)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:41:20.343

试着放一个这样的标题，

```
header('Content-Type: application/xml; charset=UTF-8'); 
```

# ruby-on-rails - rails 从字符串中获取方法名，然后传递参数

> ID：15343231
> 
> 赞同：0
> 
> 时间：2013-03-11T16:06:40.453
> 
> 标签：ruby-on-rails

伙计们，

我有一个如下所示的**config/settings.yml**文件：

lab_options: mappings_hash: {can_type: "Tumor::OncologyRun.basic_test"}

然后在我的模型**app/models/tumor.rb**我想做这样的事情

```
def sync_tumor_test
  Settings.lab_options.mappings_hash.to_hash[:can_type](age, demographic)
end 
```

在上述情况下，我想使用参数**age**和**人口统计数据调用方法****Tumor::OncologyRun.basic_test**。方法 Tumor::OncologyRun.basic_test 存在于 lib/tumor/oncology_run.rb 中，如下所示：

 ****```
 module Tumor
     module OncologyRun
      def OncologyRun.basic_test(age, demographics)
       #code here
      end
     end
   end 
```

我知道在 ruby​​ 方法名称是字符串，所以我如何用参数调用它，当我从 rails 控制台尝试使用类似**send(Settings.lab_options.mappings_hash.to_hash[:can_type](age, population))**我收到一个**NOMethod 错误**，非常感谢任何反馈，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:13:28.147

在这种情况下，您将对象名称和方法调用都存储在一个字符串中，因此首先您必须将它们分解，然后使用`send`，如下所示：

```
klass, meth = Settings.lab_options.mappings_hash.to_hash[:can_type].split('.')
klass.constantize.send(meth.to_sym, age, demographic) 
```

以上应该等同于调用`Tumor::OncologyRun.basic_test(age, demographic)`. 该`constantize`调用是将对象名称转换为实际 ruby​​ 对象所必需的。

注意 - 这假定这`basic_test`是一个类方法`OncologyRun`。如果它是实例方法，则需要先调用`new`，然后`send`在结果对象上使用调用。****

# wcf - WCF 中具有消息保护的相互身份验证

> ID：15343242
> 
> 赞同：1
> 
> 时间：2013-03-11T16:07:30.127
> 
> 标签：wcf, security, authentication, ws-security

我正在尝试与使用 SOAP 1.1 实现 WS-Security 并要求客户端对请求中的正文和时间戳进行签名的 Web 服务进行通信。在客户端，我使用 WCF 并且无法控制服务。代理接口`ProtectionLevel.Sign`在它们应该在的地方有它的 - 属性。

客户端还需要协商服务证书（TLS/SSL）并根据一些自定义规则验证服务签名证书。

到目前为止，我获得连接的最佳尝试是使用此绑定：

```
var b = new BasicHttpBinding(BasicHttpSecurityMode.TransportWithMessageCredential);
b.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.Certificate;
b.Security.Transport.ClientCredentialType = HttpClientCredentialType.Certificate;
b.Security.Message.AlgorithmSuite = SecurityAlgorithmSuite.Basic256Sha256;
b.TextEncoding = new UTF8Encoding(); 
```

它导致下面的请求，其中*只有*时间戳签名 - 而不是正文。服务响应签名无效。

我尝试使用 CustomBinding 和`SecurityBindingElement.CreateCertificateOverTransportBindingElement`-function 来创建安全元素，但它产生了相同的结果。

使用`SecurityBindingElement.CreateMutualCertificateBindingElement`-function，body 和 timestamp 都被签名了，但是现在 WCF 要求我指定服务证书，这应该在 TLS/SSL 握手期间进行协商。

请求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
    <o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
        <u:Timestamp u:Id="_0">
            <u:Created>2013-03-11T15:41:19.744Z</u:Created>
            <u:Expires>2013-03-11T15:46:19.744Z</u:Expires>
        </u:Timestamp>
        <o:BinarySecurityToken u:Id="uuid-75db13c1-3c82-4e31-8dbf-75af257850ac-1" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">..REMOVED..</o:BinarySecurityToken>
        <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
            <SignedInfo>
                <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                <SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"/>
                <Reference URI="#_0">
                    <Transforms>
                        <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
                    </Transforms>
                    <DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256"/>
                    <DigestValue>z2Q9Bb/I1Mo7DJFZ3uXA42JSH0AJJguvIfnYMxlKBAg=</DigestValue>
                </Reference>
            </SignedInfo>
            <SignatureValue>FgvpaSy+Zg3PHul6q2//Wc1lp+z+tuPCFKcLFp5edYvApb8yDwVDhuRuYPfn5K2TdGpQQekV095WZofIpIUV5aA+VBzf0/qVMP9hvOCqloyjJF3FWiMC829yFE8ePrYT3c1VXWSZi1172E7iRTNetz5ZmRYKAlcy6t7MaIq++q6MlM0gkK/w/W5qWVLIvopf2MQc+V+PBBmx7nWKGzF4SxIgdD4JeGOUzIND68OozBYD7jrvHLeYUjUzmBCkrLKm2bXDDksrV9rJHZdoizKrC7C59uRPh+gG5pl2pMLYtimFnwot3L4lvysBG0apAftxXat091c5a4JtKAvuDiWOFQ==</SignatureValue>
            <KeyInfo>
                <o:SecurityTokenReference>
                    <o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-75db13c1-3c82-4e31-8dbf-75af257850ac-1"/>
                </o:SecurityTokenReference>
            </KeyInfo>
        </Signature>
    </o:Security>
</s:Header>
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Request xmlns="http://theurltotheservice">
        <Value>123456789</Value>
    </Request>
</s:Body> 
```

# c# - 如何在 UserControl 中允许多个孩子？

> ID：15343244
> 
> 赞同：1
> 
> 时间：2013-03-11T16:07:32.970
> 
> 标签：c#, wpf, user-controls, dockpanel

我有以下用户控件：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
<Label Grid.Row="0" Content="USER CONTROL" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" Name="label1" 
       VerticalAlignment="Top" FontSize="26" Padding="0"/>        
<ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
    <Border BorderBrush="Black" BorderThickness="1">
        <DockPanel x:Name="dPanel" Background="White">            
        </DockPanel>
    </Border>
</ScrollViewer>        
</Grid> 
```

当我在 MainWindow.xaml 中使用以下 XAML 时：

```
<local:UserDockPanel>
    <Label ...>
    <Label ...>
</local:UserDockPanel> 
```

它说我不能生一个以上的孩子。

我的第一个问题是：我应该使用 UserControl 还是应该使用自定义控件？我认为 UserControl 最适合我在 DockPanel 上有标签、Border 和 Scrollviewer 的情况。

另外，据我了解，不能对面板进行模板化。它看起来少，因此没有风格。

第二个问题：如果我应该使用 UserControl，我怎样才能使它允许将多个孩子添加到停靠面板中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:17:16.643

您可以使用 来做到这一点`ItemsControl`，无需继承任何东西或创建自己的：

```
<Window x:Class="WpfApplication4.Window16"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window16" Height="300" Width="300">
    <Window.Resources>
        <Style TargetType="ItemsControl" x:Key="UserDockPanelStyle">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ItemsControl">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Label Grid.Row="0" Content="USER CONTROL" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" Name="label1" 
                                                VerticalAlignment="Top" FontSize="26" Padding="0"/>
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                                <Border BorderBrush="Black" BorderThickness="1">
                                    <ItemsPresenter/>
                                </Border>
                            </ScrollViewer>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <DockPanel IsItemsHost="True" Background="White"/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <ItemsControl Style="{StaticResource UserDockPanelStyle}">
        <Label DockPanel.Dock="Bottom" Content="Bottom"/>
        <Label DockPanel.Dock="Top" Content="Top"/>
        <Border Background="Blue"/>
    </ItemsControl>
</Window> 
```

# c# - 2D 矩阵可视化为热图，多线程 c#

> ID：15343246
> 
> 赞同：2
> 
> 时间：2013-03-11T16:07:41.943
> 
> 标签：c#, multithreading, winforms, heatmap

我目前正在研究 ac#winform-application，在这个应用程序中，我想将 2d 矩阵可视化为热图。矩阵在另一个线程中大约每秒更改 50 次。

我不想通过可视化减慢工作线程，所以我想使用锁会适得其反。此外，可视化可能会错过一些矩阵变化，每秒更新几次可视化就足够了。

我不确定我应该如何继续，希望有人能指出我正确的方向？！

# jquery - jQuery contenteditable - 如何在点击时激活

> ID：15343250
> 
> 赞同：-3
> 
> 时间：2013-03-11T16:07:49.033
> 
> 标签：jquery

当您将 aa div contenteditable 设置为 true 时，如何在不单击 div 而不是单击页面上的其他按钮的情况下将其作为可编辑文本区域打开？

目前我不知道如何实现这一目标，因此我没有尝试任何事情。唯一适用于可编辑内容的是当按下 div 本身时，但我想设置一些按钮，当点击时，它的行为就像你点击了 contenteditable div

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:13:14.820

我会投反对票，但我没有 125 个代表。所以我会回答，希望你能接受我的回答，所以我可以否决你的问题:)

您的代码现在包含的`$(this).attr("contenteditable","true")`位置将其删除。然后使用 id="someButton" 向您的页面添加一个按钮。在该按钮上添加一些 javascript 以将您实际要编辑的 div 的 contenteditable 属性设置为 true，如下所示：

```
$(document).ready(function(){
    $("#someButton").on("click", function(){
        $("#div-you-actually-want-ID").attr("contenteditable","true");
    });
}); 
```

由于您没有代码，也没有进一步的解释，我希望这能帮助您转发足以解决您的问题。

# java - Mahout SparseMatrix 的密度

> ID：15343251
> 
> 赞同：1
> 
> 时间：2013-03-11T16:07:50.483
> 
> 标签：java, machine-learning, mahout, sparse-matrix

关于 Mahout 的 SparseMatrix 类的一个简短的问题：

*是否有一种简单的（已经可以通过 Mahout 获得）方法来计算稀疏矩阵的密度？*

我问这个是因为我有一个标签传播算法正在运行，它是使用`SparseMatrix`. 我的程序运行`out of memory`，我认为这是因为`the density of the matrix`增长速度比我预期的要快。如果没有可用的东西，我将不得不编写自己的方法来计算密度，但是，如果答案阻止我重新发明轮子，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:11:09.987

`SparseMatrix.getNumNondefaultElements()`似乎返回非空行数和非空条目数，因此您可以通过将这两个数字相乘来计算悲观估计。

# f# - C# 库重载 ^ 运算符。如何改用**？

> ID：15343262
> 
> 赞同：6
> 
> 时间：2013-03-11T16:08:33.867
> 
> 标签：f#, symbolic-math, computer-algebra-systems, symbolic-computation

[Symbolism](https://github.com/dharmatech/Symbolism)库重载了算术运算符。虽然它是用 C# 编写的，但我可以从 F# 中使用它：

```
open Symbolism

let x = new Symbol("x")
let y = new Symbol("y")
let z = new Symbol("z")

printfn "%A" (2*x + 3 + 4*x + 5*y + z + 8*y) 
```

输出：

```
3 + 6 * x + 13 * y + z 
```

但是，它也使权力超载`^`。这当然不适用于 F#。

作为解决方法的一步，我为权力导出了一个方法组：

```
printfn "%A" (Aux.Pow(x, 2) * x) 
```

输出：

```
x ^ 3 
```

如何重载`**`以使用`Aux.Pow`方法组？

我可以做这样的事情：

```
let ( ** ) (a: MathObject) (b: MathObject) = Aux.Pow(a, b) 
```

这确实适用于`MathObject`价值观：

```
> x ** y * x;;
val it : MathObject = x ^ (1 + y) 
```

但是`Aux.Pow`也超载`int`：

```
 public static MathObject Pow(MathObject a, MathObject b)
    { return new Power(a, b).Simplify(); }

    public static MathObject Pow(MathObject a, int b)
    { return a ^ new Integer(b); }

    public static MathObject Pow(int a, MathObject b)
    { return new Integer(a) ^ b; } 
```

欢迎任何建议！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T16:30:53.277

[您可以像这样使用此处](https://stackoverflow.com/questions/12971965/overloaded-inline-operators-in-f)描述的技巧：

```
open Symbolism

type MathObjectOverloads =
    | MathObjectOverloads 
    static member (?<-) (MathObjectOverloads, a: #MathObject, b: int) = MathObject.op_ExclusiveOr(a, b)
    static member (?<-) (MathObjectOverloads, a: #MathObject, b: #MathObject) = MathObject.op_ExclusiveOr(a, b)
    static member (?<-) (MathObjectOverloads, a: System.Int32, b: #MathObject) = MathObject.op_ExclusiveOr(a, b)

let inline ( ** ) a b = (?<-) MathObjectOverloads a b

let two = Integer(2)
let three = Integer(3)

two ** three

two ** 3

2 ** three 
```

与链接的答案不同，我们必须使用 (?<-) 运算符，因为它是唯一可以接受 3 个参数而不是 2 个参数的运算符，并且我们需要在 ^ 运算符的左侧和右侧重载

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T18:50:04.843

这是相同的答案，但没有运算符。它仅适用于 F# 3.0，您可以使用任意数量的参数。

```
let inline i3 (a:^a,b:^b,c:^c) = ((^a or ^b or ^c) : (static member threeParams: ^a* ^b* ^c -> _) (a,b,c))

open Symbolism

type MathObjectOverloads =
    | MathObjectOverloads 
    static member threeParams (MathObjectOverloads, a: #MathObject , b: int        ) = MathObject.op_ExclusiveOr(a, b)
    static member threeParams (MathObjectOverloads, a: #MathObject , b: #MathObject) = MathObject.op_ExclusiveOr(a, b)
    static member threeParams (MathObjectOverloads, a: System.Int32, b: #MathObject) = MathObject.op_ExclusiveOr(a, b)

let inline ( ** ) a b = i3(MathObjectOverloads, a, b) 
```

# android - 如何在 PNG 加载的 ImageView 的透明部分防止 onClick 方法

> ID：15343266
> 
> 赞同：15
> 
> 时间：2013-03-11T16:08:42.940
> 
> 标签：android, onclick, imageview

我目前正在开发一个 Android 应用程序，该应用程序显示多个图像（如`ImageView's`）堆叠在一起。以下是当前配置层的方式：

*   背景层：缩放整个屏幕，必须是可点击的
*   前景层：缩放整个屏幕，必须是可点击的，包含透明度，允许用户看到一些背景层

我面临的问题是前景层。我将该`onClick()`方法分配给图像视图，但是无论它们是否击中可见的图像部分以及包含透明度的部分，都会调用该方法。`onClick()`我只希望在用户单击该图像视图的不透明部分时调用前景 ImageView方法。

这是场景的样子：

![在此处输入图像描述](../Images/51a8d70cb35a772d99a1099d11b4a55f.png)

对角线代表前景图像的透明部分。如果用户触摸这个空间，我希望它访问背景图像而不是前景图像。感谢您提供的任何帮助。

***这是我实施的解决方案（感谢下面的回答）：***

```
//ontouchlistener - gets X and Y from event
private void setClick(View view)
{
    view.setOnTouchListener(new View.OnTouchListener() 
    {
        public boolean onTouch(View v, MotionEvent event) 
        {
            int imageId = getImageId((int)event.getX(), (int)event.getY());
            if (imageId >= 0)
                performActions(imageId);
            return false;
        }
    });
}

//get the ID of the first imageview (starting from foreground, 
//working backwards) which contains a non-transparent pixel
private int getImageId(int x, int y)
{
    ViewGroup parent = (ViewGroup) findViewById(R.id.relative_layout);
    for (int a = parent.getChildCount()-1; a >= 0; a--)
    {
        if (parent.getChildAt(a) instanceof ImageView)
            if (!checkPixelTransparent((ImageView)parent.getChildAt(a), x, y))
                return parent.getChildAt(a).getId();
    }
    return -1;
}

//get bitmap from imageview, get pixel from x, y coord
//check if pixel is transparent
private boolean checkPixelTransparent(ImageView iv, int x, int y)
{
    Bitmap bitmap = ((BitmapDrawable) iv.getDrawable()).getBitmap();
    if (Color.alpha(bitmap.getPixel(x, y)) == 0)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-10-24T13:04:54.460

[这个示例](http://fancifulandroid.blogspot.ru/2013/01/make-imageviews-transparent-area-not.html)使 ImageView 的透明区域不可点击。

**图像视图：**

```
ImageView imgView= (ImageView) findViewById(R.id.color_blue);
imgView.setDrawingCacheEnabled(true);
imgView.setOnTouchListener(changeColorListener); 
```

**OnTouchListener：**

```
private final OnTouchListener changeColorListener = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Bitmap bmp = Bitmap.createBitmap(v.getDrawingCache());
        int color = bmp.getPixel((int) event.getX(), (int) event.getY());
        if (color == Color.TRANSPARENT)
            return false;
        else {
            //code to execute
            return true;
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T17:03:49.723

如果您的前景图像不仅仅是一个矩形，而是一个复杂的图像，并且您确实需要触摸是像素精确的，您可以使用

[http://developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

```
foregroundImage.setOnTouchListener(new View.OnTouchListener(){...}); 
```

回调中的`MotionEvent`将包含发生了什么样的动作（例如修饰）和确切的位置。

如果您知道前景图像显示时的确切大小，则可以确定单击了哪个像素，然后检查该像素的 alpha 是否为 0。或者，如果图像被缩放，您可能需要应用一些缩放。这可能会变得非常棘手，因为根据屏幕尺寸和比例，图像可能会以不同的方式缩放/定位。这也取决于您使用的布局。

为了检查像素值，您可能还需要将`Bitmap`包含前景图像数据的对象保存在内存中。

坦率地说，我怀疑你是否真的需要所有的精度，除非你的前景图像真的是非常不规则的形状。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-24T17:32:38.177

`Bitmap.createBitmap(v.getDrawingCache()`并且`imageView.setDrawingCacheEnabled(true)`已折旧，因此您可以通过以下代码段执行此操作：

```
imageView.setOnTouchListener { v, event ->
            val bmp = convertViewToDrawable(v)
            val color: Int = bmp.getPixel(event.x.toInt(), event.y.toInt())
            if (color == Color.TRANSPARENT)
                return@setOnTouchListener false
            else {
                Toast.makeText(baseContext, "image clicked", Toast.LENGTH_SHORT).show()
                return@setOnTouchListener true
            }
        }

private fun convertViewToDrawable(view: View): Bitmap {
        val b = Bitmap.createBitmap(view.measuredWidth, view.measuredHeight,
            Bitmap.Config.ARGB_8888)
        val c = Canvas(b)
        c.translate((-view.scrollX).toFloat(), (-view.scrollY).toFloat())
        view.draw(c)
        return b
    } 
```

# asp.net-mvc-3 - 循环遍历模型并构建 SqlCommand obj

> ID：15343272
> 
> 赞同：0
> 
> 时间：2013-03-11T16:09:05.583
> 
> 标签：asp.net-mvc-3, loops, model, ado.net

我有一个 MVC3 应用程序，我想将我的模型传递给一个构建命令对象的方法。原因是我有很多带有命令对象的方法，我希望代码写得更好。

```
private static SqlCommand CommandObj(vw_UserManager_Model model)
{
    SqlCommand command = new SqlCommand();
    command.CommandType = CommandType.StoredProcedure;   

    foreach (var item in model)
    {
        switch (property.PropertyType.Name)
        {
            case "String":
                command.Parameters.Add("@" + property.Name, SqlDbType.VarChar).SqlValue = property;
                break;
            case "Guid":
                command.Parameters.Add("@" + property.Name, SqlDbType.UniqueIdentifier).SqlValue = property;
                break;
            case "Int32":
                command.Parameters.Add("@" + property.Name, SqlDbType.Int).SqlValue = property;
                break;
            case "Boolean":
                //switch (property.Name.FirstOrDefault())
                //{
                //    case true:
                //        command.Parameters.Add("@isactive", SqlDbType.Bit).SqlValue = 1;
                //        command.Parameters.Add("@isapproved", SqlDbType.Bit).SqlValue = 1;
                //        break;
                //    case false:
                //        command.Parameters.Add("@isactive", SqlDbType.Bit).SqlValue = 0;
                //        command.Parameters.Add("@isapproved", SqlDbType.Bit).SqlValue = 0;
                //        break;
                //}
                break;
        }
    }

    return command;
} 
```

目前这段代码无法编译，因为我无法像这样枚举我的模型。我想要做的是遍历模型中的每个项目并执行 switch 语句来构建正确的 dbType 参数。

有人对如何更改此代码有建议吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:57:21.117

希望我理解你的问题。好像你可能正在尝试做这样的事情。这是我的模型类：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
    public bool Married { get; set; }
} 
```

这是遍历模型属性的代码：

```
public static void Main(string[] args)
{
    Person person = new Person();
    var modelProperties = person.GetType().GetProperties();

    foreach (var property in modelProperties)
    {
        switch (property.PropertyType.Name)
        {
            case "String":
                Console.WriteLine("Property {0} is a string", property.Name);
                break;
            case "Int32":
                Console.WriteLine("Property {0} is an int", property.Name);
                break;
            case "Boolean":
                Console.WriteLine("Property {0} is a boolean", property.Name);
                break;
            default:
                Console.WriteLine("Type unknown!");
                break;
        }
    } 
```

希望这可以帮助。

# c++ - 为什么左值转换有效？

> ID：15343276
> 
> 赞同：3
> 
> 时间：2013-03-11T16:09:19.367
> 
> 标签：c++, visual-studio-2010, casting, assign, lvalue

我今天第一次看到这种演员阵容，我很好奇为什么会这样。我认为以这种方式铸造会分配给临时成员，而不是班级成员。使用VC2010。

```
class A
{
public:

   A() :
      m_value(1.f)
   {
      ((float)m_value) = 10.f;
   }

   const float m_value;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:30:07.320

即使在修复了所有其他问题以使代码编译之后，它也只能在 VC2010 中工作，因为它使用了非标准扩展。如果您指定`/Wall`查看所有警告，您的编译器将发出

> 警告 C4213：使用了非标准扩展：在左值上强制转换

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T16:17:31.973

它不应该工作。显式类型转换为`float`使用强制转换表示法将是纯右值（第 5.4 节）：

> 表达式`(T)` *cast-expression*的结果是 类型`T`。如果 T 是左值引用类型或对函数类型的右值引用，则结果是左值；如果 T 是对对象类型的右值引用，则结果是 xvalue；**否则结果是纯右值**。

我的重点补充说。

赋值运算符需要一个左值作为其左操作数（第 5.17 节）：

> 所有这些都需要一个可修改的左值作为它们的左操作数，并返回一个指向左操作数的左值。

prvalue 不是左值。

# tsql - 如何编写 T-SQL 查询为每个客户端选择前 1 条记录？

> ID：15343278
> 
> 赞同：3
> 
> 时间：2013-03-11T16:09:20.830
> 
> 标签：tsql, group-by, greatest-n-per-group

我有一个简单的脚本，我试图获取每个客户的最新记录。我如何在 TSQL 中做到这一点？这是我目前的代码，但是，这仅选择了一条记录总数。这一条记录显示所有客户的最新记录，而不是每个客户！请问我该如何重新制定这个？

```
SELECT TOP 1
C.ClientID, actual_date
From ClientRecords C
WHERE (@ClientID is NULL or C.Client_ID = @ClientID)
Group by C.ClientID, actual_date
ORDER BY C.actual_date 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:10:59.593

**在actual_date*上使用`MAX()`函数 *聚合列**

 **```
SELECT  C.ClientID, MAX(actual_date) max_DATE
From    ClientRecords C
WHERE   (@ClientID is NULL or C.Client_ID = @ClientID)
Group   by C.ClientID
ORDER   BY C.actual_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:16:08.000

这尚未经过测试，但它应该类似于：

```
select 
c.clientId, max(actual_date) as Actual_date
from clientrecords C
group by c.clientID
order by c.clientID 
```

这将为您提供每个客户的最高实际日期，按 clientId 排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:54:59.643

谢谢大家，但我找到了一个更令人满意的解决方案：

```
WITH rs AS
(

SELECT 
C.ClientID, actual_date,ROW_NUMBER() OVER(ORDER BY C.ClientID, actual_date)rid
From ClientRecords C
)

SELECT * FROM rs WHERE rid =1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T07:48:33.673

您可以为此目的使用 SUBQUERY：

```
SELECT 
    C.ClientID ,
    (SELECT MAX(C1.actual_date) FROM ClientRecords C1 WHERE C1.Client_ID = C.Client_ID) AS MaxDate
FROM ClientRecords C
WHERE (@ClientID is NULL or C.Client_ID = @ClientID)
Group by C.ClientID, actual_date
ORDER BY C.actual_date 
```**

# excel - 如何以编程方式删除 Excel UDF

> ID：15343282
> 
> 赞同：0
> 
> 时间：2013-03-11T16:09:27.697
> 
> 标签：excel, add-in, user-defined-functions, excel-dna

我有一个旧的 Excel 插件（用 VBA 编写），现在我使用 .NET、ExcelDNA、NetOffice 重新编写了旧的插件。在旧插件中，有一个 UDF，比如说，OldUDF，在新插件中，有一个 NewUDF，两个 UDF 做同样的事情并接受相同的参数。但它们有不同的函数名称。由于遗留原因，一些客户端有旧插件，一些客户端有新插件。有些客户两者都有。当他们安装了两个 Excel 插件时，我想提供一个复选框，在新插件中将 oldUDF 转发到 newUDF。选中该复选框时，oldUDF 将作为 newUDF 转发。不勾选复选框时，oldUDF 不会被转发。我在新插件中定义了 oldUDF 和 newUDF，但不知道在未选中复选框时如何删除 oldUDF 的定义。谢谢

编辑：

这是我尝试过的，但它不起作用。

```
#if FORWARD
        public static object OldUDF([ExcelArgument(AllowReference = true, Name = "Symbol",
            Description = "is a futures symbol as defined in *** Database.")]string symbol,
            [ExcelArgument(AllowReference = true, Name = "Column",
                Description = "is a column associated with a symbol")]string column,
            [ExcelArgument(AllowReference = true, Name="Date",
                Description = "is the date for which you want the value")]object onDate,
                object fillOpt, object frequency)
        {
            return NewUDF(symbol, column, onDate, fillOpt, frequency);
        }
#endif 
```

在 AutoOpen() 中，我将从文件中读取转发值（真或假），如果转发为真，

```
 var forward = Helper.ReadForwardOldUDFSettingFromAFile();
        if(forward)
        {
             #define FORWARD
        } 
```

但我得到一个编译错误

再次编辑：我成功注册我将OldUDF的声明放在一个单独的dll中，比如oldUDF.dll创建另一个oldUDF.xll，oldUDF.dna。

在 AutoOpen 中，我将检查转发值（来自文件）是否为真，我将执行 Excel.Application.RegisterXLL("olderUDF.xll"); 这工作正常。

**但是，如果前向值为 false，我找不到在 C# 中取消注册或删除 XLL 的方法吗？**

编辑：我找到了[http://msdn.microsoft.com/en-us/library/office/bb687866.aspx](http://msdn.microsoft.com/en-us/library/office/bb687866.aspx)，但不知道如何在 C# 中使用它

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:37:12.980

谢谢，戈弗特。他回答了另一组的问题。有用！ [http://exceldna.codeplex.com/discussions/436393](http://exceldna.codeplex.com/discussions/436393)

```
private static void UnregisterFunction(string name) 
{ 
    // get the path to the XLL 
    var xllName = XlCall.Excel(XlCall.xlGetName); 

    // get the registered ID for this function and unregister 
    var regId = XlCall.Excel(XlCall.xlfEvaluate, name); 
    XlCall.Excel(XlCall.xlfSetName, name); 
    XlCall.Excel(XlCall.xlfUnregister, regId); 

    // reregister the function as hidden and then unregister (clears the function wizard) 
    var reregId = XlCall.Excel(XlCall.xlfRegister, xllName, "xlAutoRemove", 
    "I", name, ExcelMissing.Value, 2); 
    XlCall.Excel(XlCall.xlfSetName, name); 
    XlCall.Excel(XlCall.xlfUnregister, reregId); 
} 
```

# c - 位的高科技 C 编译器结构

> ID：15343283
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:09:31.010
> 
> 标签：c, struct

我在 PIC 控制器上使用带有 Hi-Tech C 编译器的 MPLAB X IDE。因此，重要的是有点“面向字节”。所以我尝试以下方法：

```
volatile struct{
   unsigned bit white:1;
   unsigned bit red:1;
   unsigned bit blue:1;
   unsigned bit green:1;
   unsigned bit violett:1;//Magenta
   unsigned bit yellow:1;
}ColorPick; 
```

现在我不确定它是否被正确声明以及当我在上面放置一些位移时会发生什么。在我的结果中，它应该只有一点活跃 (1) 和所有其他低 (0)。

那么“白色位 0b00000001 或 0b10000000 是什么？当我移动它 6 次时，我会变黄。然后又是白色。我可以在 ColorPick << 1; 的相同功能调用中做到这一点吗？

我猜 1 被转移到第 7 位和第 8 位，我没有这样声明。

我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:16:24.290

来自 Hi-Tech C 用户手册，第 346 页：

> **A.9.4 int (6.5.2.1) 中位域的分配顺序**
> 
> 结构中定义的第一位字段被分配在存储单元中的最低有效位位置。随后的位域被分配高阶位。

根据文档，我认为这不是`bit`编译器中的关键字。

根据我的经验，位域依赖于编译器。我确定位对齐的方法是编写一个小命令行程序，它执行以下操作：

```
union test_u {
   struct test_s {
      unsigned long bwhite : 1;
      unsigned long bred : 1;
      unsigned long bblue : 1;
      unsigned long bgreen : 1;
      unsigned long bviolet : 1;
      unsigned long byellow : 1;
      unsigned long bpink : 1;
   } bits;
   unsigned long unlong;
} bitest;

bitest.unlong = 0;
bitest.bred = 1;
printf("0x%8.8X\n", bitest.unlong); 
```

然后根据需要替换值以查看编译器将它们粘贴在哪里。如果您需要与其他计算机/编译器进行通信，您最好自己使用掩码和转换。

# maven - 即使使用 -DfailIfNoTests=false，mvn 包也会失败

> ID：15343284
> 
> 赞同：1
> 
> 时间：2013-03-11T16:09:33.110
> 
> 标签：maven, testing, jar, packaging

我有一个 Maven 构建，我想为其执行 jar 创建，但`mvn package`由于单元测试失败而失败。

尽管有些测试失败了，但我仍然想构建 jar，我试过了

```
mvn package -Dtest=false -DfailIFNoTests=false 
```

但这失败了。

`mvn jar:jar` 似乎有效，但我宁愿使用更惯用的`mvn package`方法。

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.119s
[INFO] Finished at: Mon Mar 11 12:07:16 EDT 2013
[INFO] Final Memory: 9M/234M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test) on project glusterfs: No tests were executed!  (Set -DfailIfNoTests=false to ignore this error.) -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:59:40.093

surefire[插件](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html)控制测试运行和失败报告。

`mvn package -Dmaven.test.failure.ignore=true`

应该编译并运行您的测试，但如果某些测试失败，则不会使整个构建失败。（我从来没有使用过这个，只继续阅读文档。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:14:53.637

您可以使用以下内容跳过正在运行的单元测试：

> -Dmaven.test.skip=true

# java - 清除 Java 内存

> ID：15343285
> 
> 赞同：4
> 
> 时间：2013-03-11T16:09:38.367
> 
> 标签：java, matlab

我正在使用 Matlab 2012b 连接到我从中导入数据的另一个程序 (Imaris)。通信实际上是通过 java 作为接口发生的。我遇到的问题是数据没有从 Java 内存中删除，并且随着时间的推移堆积起来，直到 Matlab 最终崩溃。“清除 Java”不起作用并产生以下警告：“Ice/ConnectionRefusedException 类的对象存在 - 未清除”

我发现真正清除 Java 内存的唯一解决方案是重新启动 Matlab，在我的情况下这不是一个选项。

在网上搜索时，我发现不少人遇到了同样的问题。（[http://www.mathworks.de/matlabcentral/newsreader/view_thread/283708](http://www.mathworks.de/matlabcentral/newsreader/view_thread/283708)）

但是我没有找到如何解决问题的答案。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T15:30:03.540

如果您从 clear java 返回消息，表明存在一个类的对象，并且 clear all 没有删除它们，那么某处的某处有对该对象的引用。这通常会发生在回调、侦听器等，或者当您将对象的引用添加到匿名函数句柄等时。

clear 命令从工作空间中删除对对象的引用，但由于回调中存在匿名（或其他）引用，因此对象不能被垃圾收集，因此保留在内存中（并且可能是孤立的）

当我懒于编写好的析构函数时，我经常看到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:03:11.943

`clear java`似乎重置了整个 Java 虚拟机。作为对开发人员的保护，当内存中有 Java 对象会被此操作破坏时，Matlab 不会执行此操作。

理想情况下，您可以找出 Matlab 项（通常是一个变量，在工作区或某个持久范围内）是该类的一个实例`Ice/ConnectionRefusedException`，并清除它。对于您可以访问的变量（例如在工作区中），您可以只运行 run `clear variablename`，或者对于在某些其他函数中作为持久性保存的变量，您可以运行`clear functionname`.

然后尝试再次呼叫`clear java`，就像您一直在做的那样。

也就是说，有时很难找到违规对象所在的位置。众所周知，我会重新启动 Matlab 作为故障安全重启；当然，如果您想处理一些最近获得的数据，那是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:31:32.183

您可以尝试调用垃圾收集器，但不能保证他会实际执行，因为您不调用收集器，而是提出请求。

从 matlab 命令行或您的 m 代码运行（由于评论而更正）

```
java.lang.System.gc() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-13T17:29:13.880

你需要设置静态java。因为你不关闭matlab。您只能处理十几个文件，因为 permgen 空间只有 4 MB。加载十次`imarislib.jar`。

您应该添加路径`javaaddpath.txt`并将其复制到 prefdir。然后删除所有`javaaddpath`扩展名中的所有行，无论是imaris嵌入它还是您编写它。

# javascript - 使用 node.js 提取所有超链接（来自外部网站）并请求

> ID：15343292
> 
> 赞同：21
> 
> 时间：2013-03-11T16:09:48.773
> 
> 标签：javascript, node.js, request

现在我们的应用程序将 nodejs.org 的源代码写入控制台。我们希望它改为编写 nodejs.org 的所有超链接。也许我们只需要一行代码就可以从`body`.

应用程序.js：

```
var http = require('http');

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');

var request = require("request");

request("http://nodejs.org/", function (error, response, body) {
    if (!error)
        console.log(body);
    else
        console.log(error);
}); 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-11T17:08:23.733

您可能正在寻找[jsdom](https://npmjs.org/package/jsdom)、[jquery](https://npmjs.org/package/jquery)或[cheerio](https://npmjs.org/package/cheerio)。您所做的称为屏幕抓取，即从站点中提取数据。jsdom/jquery 提供了一套完整的工具，但是cheerio 更快。

这是一个cheerio示例：

```
var request = require('request');
var cheerio = require('cheerio');
var searchTerm = 'screen+scraping';
var url = 'http://www.bing.com/search?q=' + searchTerm;
request(url, function(err, resp, body){
  $ = cheerio.load(body);
  links = $('a'); //jquery get all hyperlinks
  $(links).each(function(i, link){
    console.log($(link).text() + ':\n  ' + $(link).attr('href'));
  });
}); 
```

你选择最适合你的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-03T06:54:13.850

包.json

```
 {
      "name": "url_extractor",
      "version": "1.0.0",
      "description": "tool to extract all urls from website",
      "main": "index.js",
      "scripts": {
        "start": "node index.js",
        "test": "echo \"Error: no test specified\" && exit 1"
      },
      "author": "sandip shelke",
      "license": "ISC",
      "dependencies": {
        "axios": "^0.24.0",
        "cheerio": "^1.0.0-rc.10"
      }
    } 
```

索引.js

```
 const axios = require('axios');
        var cheerio = require('cheerio');

        var baseUrl = 'target website base url';

        (async () => {

            try 
            {
                let homePageLinks = await getLinksFromURL(baseUrl)
                console.log(homePageLinks);
            } catch (e) { console.log(e); }

        })();

        async function getLinksFromURL(url) {

            try {
                let links = [];
                let httpResponse = await axios.get(url);

                let $ = cheerio.load(httpResponse.data);
                let linkObjects = $('a'); // get all hyperlinks

                linkObjects.each((index, element) => {
                    links.push({
                        text: $(element).text(), // get the text
                        href: $(element).attr('href'), // get the href attribute
                    });
                });

                return links;
            } catch (e) { console.log(e) }

        } 
```

此代码将仅从主页获取链接，递归运行它以加载网页中的所有链接。

考虑到您已经安装了节点，运行 npm install 然后 npm start 运行上面的代码。

# z3 - 在 Mac Os Mountain Lion 上安装 Z3

> ID：15343293
> 
> 赞同：0
> 
> 时间：2013-03-11T16:09:49.207
> 
> 标签：z3

我似乎无法在 Max OS X Mountain Lion 上安装 Z3（4.3.1）（正确安装了 Xcode/命令行工具）。问题是 autconf 没有随 Xcode 及其命令行工具一起安装/提供。

我需要从源代码下载并安装 autoconf/automake 等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:16:49.390

是的，我们需要 autoconf 来安装 Z3 v4.3.1。下一个版本将没有这种依赖关系。同时，我们可以`unstable`在不使用 autoconf 的情况下构建 (work-in-progress) 分支。 [这](http://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)是编译`unstable`分支的指令。相同的指令也可用于编译`contrib`分支。这个分支本质上是`contrib`+ 外部（非 MS）贡献。

# javascript - 限制发布请求的数量（Javascript + node.js + jQuery）

> ID：15343295
> 
> 赞同：2
> 
> 时间：2013-03-11T16:09:50.877
> 
> 标签：javascript, jquery, ajax, node.js

基本上，我有客户端 javascript，它将用户与页面的交互触发的发布请求（通过 jQuery）发送到我的 node.js 服务器。node.js 服务器然后处理请求并更新数据库中的内容。

出于某种原因，我达到了在单个页面加载中可以发送到服务器的帖子数量的限制。此最大值为 6。从页面发送 6 个帖子后，尝试发送更多请求时出现以下错误：

编辑：

尝试发送超过 6 个请求后，这些红色错误在我的 Javascript 控制台中弹出：

```
 send jquery-latest.js:8526
    jQuery.extend.ajax jquery-latest.js:7978
    jQuery.(anonymous function) jquery-latest.js:7614
    haveLikedOrDislikedObject
    (anonymous function) localhost:33
    fire jquery-latest.js:1037
    self.fireWith jquery-latest.js:1148
    done jquery-latest.js:8074
    callback 
```

我发送帖子的代码：（基本上一个监听器附加到许多div，当它被点击时，发送一个帖子请求）

```
 //Sets on click listener for like button of content
    $(document).delegate("div[id^='likeDiv']", "click", function() {
        var el = this;
        $.getScript("public/javascripts/load_content.js", function(){
            haveLikedOrDislikedObject(0, $(el).attr('name'), theUser);
        });
    });

    function haveLikedOrDislikedObject(res, contentNumber, user){

        if(user != undefined){
            if(res == 0){
                $.post("/likeContent", { content: contentNumber, user: user.UserID });
                $("#haveLikedDiv_" + contentNumber).text("You like this.");
            } else{
                $.post("/dislikeContent", { content: contentNumber, user: user.UserID });       
                $("#haveLikedDiv_" + contentNumber).text("You dislike this.");
            }
        } else{
            $("#haveLikedDiv_" + contentNumber).text("Sorry, something went wrong.");
        }
    }; 
```

只是想知道为什么我会得到这个限制？另外，关于如何解决这个问题，或者其他方式从单个页面向我的服务器发送大量内容有什么想法吗？

**已解决：** 原来我没有从我的服务器发回任何东西，我认为这意味着每个帖子都在等待响应，因此发出 6 个打开请求。因此，请确保您从服务器发送回一些东西，即使它是这样未定义的：

```
 app.post('/likeContent', function(req, res){
       res.send(undefined);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T03:25:39.727

结果我没有从我的服务器发回任何东西，我认为这意味着每个帖子都在等待响应，因此发出 6 个打开请求。因此，请确保您从服务器发送回一些东西，即使它是这样未定义的：

```
app.post('/likeContent', function(req, res){
   res.send(undefined);
}); 
```

# hash - 反正有没有使用一些盐从 md5 哈希中获取字符串值？

> ID：15343298
> 
> 赞同：1
> 
> 时间：2013-03-11T16:09:53.937
> 
> 标签：hash, md5, salt

让我描述一下场景：

我知道散列字符串和 $salt，但不知道 $pass。md5格式为：

```
md5($salt.$pass)

example value = ae10f955a7164ba6905919e7798284ca

here $salt = q)SDs
$pass is unknown. 
```

现在，有没有办法得到**md5($pass)**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:25:24.170

缺乏蛮力技术，没有。然而，蛮力是一种有效的方法。根据此问题的范围，您有几个选择：

*   编写一个小程序来计算 md5（盐 + 随机字符串）的 MD5 哈希值。
*   使用现有的破解工具，例如[John the ripper](http://www.openwall.com/john/)。
*   使用 salt构建一个[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)，然后使用它找到适当的密码。

像 John the Ripper 这样的工具可能是最容易开始的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:12:42.417

虽然可以使用多种方法重新创建密码，但这并不是散列的目的。散列应该以不可逆的方式对有问题的字符串进行编码，因此以某种方式获得散列的人不能仅仅反转加密并掌握密码。

所以不，这真的不可能……至少不是以任何简单的方式。

# c# - 在某些情况下，组合框中的 selectedIndex 不会返回正确的整数

> ID：15343308
> 
> 赞同：4
> 
> 时间：2013-03-11T16:10:22.530
> 
> 标签：c#, .net, wpf

在 c# 中进行了一段时间的编程后，我发现当我们在组合框中有相等的项目时，我们无法获得正确的 selectedIndex。想象一下，我们有包含这些项目的 ComboBox：

![在此处输入图像描述](../Images/f4c5a7d6c89925b7b36cfcfa5c14be9a.png)

当我在 ComboBox 中选择第三项时我想收到 2，但我总是收到 0。当我在 ComboBox 中选择第五项时我想收到 4，但我总是收到 3。

我认为总是返回 ComboBox`SelectedIndex`的`ComboBox`第一个元素。

如何从具有相同项目的组合框中获取选定项目索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:26:05.873

我怀疑您正在绑定到列表字符串。
String 是一种引用类型，但它会覆盖 = 并找到第一个匹配的值。
创建一个只有一个字符串属性的简单类。

```
public class SimpleString
{
    public string StrValue { get; set; }
    public SimpleString() { }
    public SimpleString(string strValue) { StrValue = StrValue;  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:38:48.490

MainWindow.xaml.cs：

```
public partial class MainWindow : Window
{
    private List<String> list = new List<string>();

    public List<String> List { get { return this.list; } set { this.list = value; } }

    public MainWindow()
    {
        InitializeComponent();

        list.Add("methode");
        list.Add("methode");
        list.Add("methode");
        list.Add("methode2");
        list.Add("methode2");

        this.DataContext = this;
    }

    private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        MessageBox.Show(comboBox1.SelectedIndex.ToString());
    }
} 
```

MainWindow.xaml：

```
<Window x:Class="Temp2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ComboBox Height="23" HorizontalAlignment="Left" Name="comboBox1"
                  VerticalAlignment="Top" Width="120"
                  SelectionChanged="comboBox1_SelectionChanged"
                  ItemsSource="{Binding List}" />
    </Grid>
</Window> 
```

对我来说很好。你能详细说明你的问题吗？请注意，我尝试了所有不同的类型，并且到目前为止总能得到有效的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:18:10.490

您可以创建一个包含 Name 和 Id 属性的复选框模型类。然后初始化组合框的属性`DisplayMember`和`DataMember`该属性。现在将组合框的`DataSource`属性分配给您的自定义项目列表。

由于 DataSource 的元素现在不相等（通过引用），因此它们不会被视为相等，您将能够获得`SelectedValue`. `SelectedIndex`可能也会起作用，但在这种情况下这不是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:18:37.603

无论如何，我不明白使用不同值的相同文本`SelectedValue`而不是`SelectedIndex`.

如果您绝对需要索引，您可以循环组合框项目...

# android - Android：自定义 TabWidget 的 2 个问题

> ID：15343312
> 
> 赞同：0
> 
> 时间：2013-03-11T16:10:42.663
> 
> 标签：android, tabs, android-tabhost, tabwidget

我正在尝试在操作栏*下方创建自定义选项卡。*我的操作栏已被其他小部件占用，因此无法将选项卡移动到操作栏。选项卡需要同时具有图像和文本。我有两个问题：

1）当我这样做时：

```
mTabHost.addTab(mTabHost.newTabSpec("Local").setIndicator("Local", getResources().getDrawable(R.drawable.local_selector)).setContent(R.id.local_image)); 
```

我看到文字，没有图像。如果我这样做：

```
mTabHost.addTab(mTabHost.newTabSpec("Local").setIndicator("", getResources().getDrawable(R.drawable.local_selector)).setContent(R.id.local_image)); 
```

我看到了图像，但我没有包含所需的文本。

2）文字和图片的背景颜色与TabWidget的颜色不匹配。它匹配整个应用程序的默认背景颜色。

我还尝试在 RelativeLayout 中创建选项卡并像这样实现它们：

```
RelativeLayout localView = (RelativeLayout)inflater.inflate(R.layout.local_tab, null);
mTabHost.addTab(mTabHost.newTabSpec("Local").setIndicator(localView).setContent(R.id.local_image)); 
```

这为我提供了具有正确背景颜色的所需图像+文本组合，但选项卡不再看起来像选项卡。没有分隔线，选定的选项卡不会亮起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:24:51.630

试试这个可能对你有帮助。

 `````
tabHost = getTabHost();
    TabSpec spec_info = tabHost.newTabSpec(getString(R.string.info));
    spec_info.setIndicator(getString(R.string.info), null);
    Intent Intent_info = new Intent(this, RestaurantInfoActivity.class);
    spec_info.setContent(Intent_info);
    tabHost.addTab(spec_info);
    tabHost.getTabWidget().getChildTabViewAt(0).setBackgroundDrawable(getResources().getDrawable(R.drawable.tab_selector)); 
````  `xml

```
<TabHost
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@android:id/tabhost"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:orientation="vertical" 
                    android:fadingEdge="none"
                    android:overScrollMode="never"
                    >

                    <TabWidget
                        android:id="@android:id/tabs"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:tabStripEnabled="false" />

                    <FrameLayout
                        android:id="@android:id/tabcontent"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent" />
                </LinearLayout>
            </TabHost> 
```

选择器

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- When selected, use white-->
<item android:drawable="@drawable/active_tab"
      android:state_selected="true" />
<!-- When not selected, use grey -->
<item android:drawable="@drawable/in_active_tab" >
</item> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:53:29.663

我找到了解决我的问题的方法。在我的主题中，我设置的是 android:background 而不是 android:windowBackground。一旦我使用了 android:windowBackground，颜色就会更好地协同工作。

然后我创建了包含文本的新图像。经过大量的调整，我最终让它看起来像我想要的那样。``

# actionscript-3 - 滚动影片剪辑时，自定义光标会稍微扭曲

> ID：15343314
> 
> 赞同：0
> 
> 时间：2013-03-11T16:10:44.263
> 
> 标签：actionscript-3

我的 Flash 项目中有一个自定义光标。该光标由几个部分组成（即光标影片剪辑内的几个影片剪辑）。当光标在我的项目中的不同影片剪辑上滚动时，光标的部分会有点扭曲，就好像相对于彼此移动 1 个像素一样。因此整个光标的外观有点扭曲。每次光标越过项目的影片剪辑（按钮、设计片段等）之间的边界时，都会发生这种情况。如何使我的光标始终保持相同的外观？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:59:04.267

我猜你正在做这样的事情来定位你的自定义光标：

```
stage.addEventListener(MouseEvent.MOUSE_MOVE, moved);

function moved(e:MouseEvent):void {
    customCursor.x = e.stageX;
    customCursor.y = e.stageY;
} 
```

如果是这样，当您将鼠标移到一个`MovieClip`或其他元素上时，您的侦听器将从该元素接收事件，`DisplayObject`而不是从`Stage`. 出于某种原因，`DisplayObject`位于子像素值处的 s 会产生`e.stageX`与 and`e.stageY`不完全相同的值`stage.mouseX`，`stage.mouseY`因此您的自定义光标元素会随着像素值的舍入不同而略有跳跃。

尝试`Stage`直接使用鼠标位置：

```
stage.addEventListener(MouseEvent.MOUSE_MOVE, moved);

function moved(e:MouseEvent):void {
    customCursor.x = stage.mouseX;
    customCursor.y = stage.mouseY;
} 
```

# javascript - 如何从 Javascript 数组创建按钮，链接到谷歌地图标记？

> ID：15343321
> 
> 赞同：0
> 
> 时间：2013-03-11T16:10:58.933
> 
> 标签：javascript, google-maps, button

我有一张地图，里面装满了来自数组的标记。单击标记时，它们会将数据发送到 HTML 文本框，其中包含来自数组的地址数据，就像这样；

```
 document.getElementById("address_box").value = title;

    <input type = "text" id = "address_box" value = ""/> 
```

这是用于填充标记的代码

```
 for (var i = 0; i < arrMarkers.length; i++) {
        latlng = new google.maps.LatLng(arrMarkers[i].lat, arrMarkers[i].lng);
        marker = new google.maps.Marker({
            position: latlng, 
            map: map, 
            title: arrMarkers[i].title,
             icon: "http://maps.google.com/mapfiles/ms/micons/blue.png"
        }); 
```

**我想使用另一个 for 循环在页面上动态创建使用每个标记的匹配数组索引的按钮。**

据我了解，我或许应该将数组索引和标题发送到按钮，以便可以从数组中提取数据并将其发送到文本框。

这是我写的一些伪代码。我想我也需要一些 html 来接收它。

```
 for (var i = 0; i < arrMarkers.length; i++) {
        button = newButton(arrMarkers[i].title);
      }); 
```

**我可以使用什么代码将按钮添加到 javascript 之外的页面？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:48:15.550

仔细想想，你甚至不需要一个表格。对于这个例子，id 为“addresses”的无序列表会更好。

```
for (var i = 0; i < arrMarkers.length; i++) {

    document.getElementById('addresses').innerHTML += '<li><a href="javascript:show(' + i + ');return false">' + arrMarkers[i].title + '</a></li>';

    latlng = new google.maps.LatLng(arrMarkers[i].lat, arrMarkers[i].lng);
    marker = new google.maps.Marker({
        position: latlng, 
        map: map, 
        title: arrMarkers[i].title,
         icon: "http://maps.google.com/mapfiles/ms/micons/blue.png"
    }); 
```

然后，如果您希望这样做，您只需要编写一个函数来显示请求的标记。

我有 v2 的旧代码，但这在这里毫无用处。v3 标记管理器中必须有显示功能。

# sql - 添加列时 HAVING 子句不起作用（需要检查约束？）

> ID：15343326
> 
> 赞同：1
> 
> 时间：2013-03-11T16:11:10.237
> 
> 标签：sql, constraints, having-clause

SQL #1 向我返回 163 个帐户（通过 HAVING 子句），因为它给了我从 2013 年开始首次购买特定包（包 102）的帐户。

现在我想在 2013 年按会计月份细分销售额，当我添加 [Unique_Fiscal_Month_Label] 作为列时，它给了我 406 个帐户，而 HAVING 子句现在基本上不起作用。请参阅下面的 SQL #2。任何想法为什么添加 Fiscal_Month 基本上然后给我所有曾经购买过该包裹类型的帐户？我在网上读到检查条件可能会有所帮助，但写下来没有运气。

**SQL #1**

```
SELECT 

sum([FactActualDetail].[CaseAndGallonVolume]) AS [CaseAndGallonVolume],
sum([FactActualDetail].[AdjGrossMarginAmount]) AS [AdjGrossMarginAmount],
left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #]

FROM [dbo].[FactActualDetail] [FactActualDetail] 

LEFT JOIN [dbo].[DimCustomer] [DimCustomer] 
    ON ([FactActualDetail].[CustomerSK] = [DimCustomer].[CustomerSK])
LEFT JOIN [Common].[DimDate] [DimDate] 
    ON ([FactActualDetail].[DeliveryDateSK] = [DimDate].[DateSK])

WHERE [EQMultiplier] > 0 AND ([SC] = 04 OR [SC] = 06 OR [SC] = 07) 
  AND (substring([SourceCustomerProductCode],8,3) = 102) 
  AND [Fiscal_Year] IN (2013, 2012)

GROUP BY left([FactActualDetail].[SourceCustomerProductCode],7)

HAVING MIN([Fiscal_Year])=2013 
```

**SQL #2**

```
SELECT 

sum([FactActualDetail].[CaseAndGallonVolume]) AS [CaseAndGallonVolume],
sum([FactActualDetail].[AdjGrossMarginAmount]) AS [AdjGrossMarginAmount],
left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #],
[Unique_Fiscal_Month_Label] AS [Unique_Fiscal_Month_Label]

FROM [dbo].[FactActualDetail] [FactActualDetail] 

LEFT JOIN [dbo].[DimCustomer] [DimCustomer] 
    ON ([FactActualDetail].[CustomerSK] = [DimCustomer].[CustomerSK])
LEFT JOIN [Common].[DimDate] [DimDate] 
    ON ([FactActualDetail].[DeliveryDateSK] = [DimDate].[DateSK])

WHERE [EQMultiplier] > 0 AND ([SC] = 04 OR [SC] = 06 OR [SC] = 07) 
  AND (substring([SourceCustomerProductCode],8,3) = 102) 
  AND [Fiscal_Year] IN (2013, 2012)

GROUP BY 
  left([FactActualDetail].[SourceCustomerProductCode],7),
  [Unique_Fiscal_Month_Label]

HAVING MIN([Fiscal_Year])=2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:22:52.647

我假设 Fiscal_Year 在 [Common].[DimDate] 表中

```
SELECT sum([FactActualDetail].[CaseAndGallonVolume]) AS [CaseAndGallonVolume],
       sum([FactActualDetail].[AdjGrossMarginAmount]) AS [AdjGrossMarginAmount],
       left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #],
       [Unique_Fiscal_Month_Label] AS [Unique_Fiscal_Month_Label]
FROM [dbo].[FactActualDetail] [FactActualDetail] 
  LEFT JOIN [dbo].[DimCustomer] [DimCustomer] 
    ON ([FactActualDetail].[CustomerSK] = [DimCustomer].[CustomerSK])
  LEFT JOIN [Common].[DimDate] [DimDate] 
    ON ([FactActualDetail].[DeliveryDateSK] = [DimDate].[DateSK])
WHERE [EQMultiplier] > 0 AND ([SC] = 04 OR [SC] = 06 OR [SC] = 07) 
  AND (substring([SourceCustomerProductCode],8,3) = 102) 
  AND [Fiscal_Year] = 2013 AND EXISTS (
                                       SELECT 1
                                       FROM [Common].[DimDate] AS [DimDate2]  
                                       WHERE [DimDate].[DateSK] = [DimDate2].[DateSK]
                                       HAVING MIN([DimDate2].Fiscal_Year) != 2012
                                       )                                         
GROUP BY 
  left([FactActualDetail].[SourceCustomerProductCode],7),
  [Unique_Fiscal_Month_Label] 
```

简单的例子我在[**SQLFiddle上的意思**](http://sqlfiddle.com/#!3/e392e/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:50:33.980

我们需要一些样本数据来真正回答这个问题。但我猜测问题在于您现在在 SQL #2 中按帐户和月份进行聚合，而 SQL #1 仅在帐户级别聚合。由于您的 HAVING 子句，您基本上是在过滤 2013 年客户的所有销售，而在此之前您只过滤 2013 年首次销售的客户。

您应该能够使用子查询来完成您的逻辑，即

```
SELECT [Unique_Fiscal_Month_Label] AS [Unique_Fiscal_Month_Label]
    , x.[CaseAndGallonVolume]
    , x.[AdjGrossMarginAmount]
    , x.[Acct #]
FROM (
    SELECT 
    sum([FactActualDetail].[CaseAndGallonVolume]) AS [CaseAndGallonVolume],
    sum([FactActualDetail].[AdjGrossMarginAmount]) AS [AdjGrossMarginAmount],
    left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #],
    MIN([FactActualDetail].[DeliveryDateSK]) AS [minDeliveryDateSK]
    FROM [dbo].[FactActualDetail] [FactActualDetail] 
    LEFT JOIN [dbo].[DimCustomer] [DimCustomer] 
        ON ([FactActualDetail].[CustomerSK] = [DimCustomer].[CustomerSK])
    WHERE [EQMultiplier] > 0 AND ([SC] = 04 OR [SC] = 06 OR [SC] = 07) 
      AND (substring([SourceCustomerProductCode],8,3) = 102) 
      AND [Fiscal_Year] IN (2013, 2012)
    GROUP BY left([FactActualDetail].[SourceCustomerProductCode],7)
    HAVING MIN([Fiscal_Year])=2013
) AS x
LEFT JOIN [Common].[DimDate] [DimDate] 
    ON ([x].[minDeliveryDateSK] = [DimDate].[DateSK]); 
```

如果没有实际数据，这只是对查询的猜测，但希望它能让您了解如何进行。HTH。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:50:44.610

您的`having`条款不再有效，因为每个组仅针对一个帐户的一个会计月，因此您将无法判断 2013 年组内哪些帐户在 2012 年有活动。相反，请尝试使用分析函数而不是整个时期 - 比如：

```
SELECT sum([CaseAndGallonVolume]) AS [CaseAndGallonVolume],
       sum([AdjGrossMarginAmount]) AS [AdjGrossMarginAmount],
       [Acct #],
       [Unique_Fiscal_Month_Label]
FROM (SELECT [FactActualDetail].[CaseAndGallonVolume],
             [FactActualDetail].[AdjGrossMarginAmount]),
             left([FactActualDetail].[SourceCustomerProductCode],7) as [Acct #],
             [Unique_Fiscal_Month_Label],
             min([Fiscal_Year]) over (prtition by left([FactActualDetail].[SourceCustomerProductCode],7)) as min_year
      FROM [dbo].[FactActualDetail] [FactActualDetail] 
      LEFT JOIN [dbo].[DimCustomer] [DimCustomer] 
             ON ([FactActualDetail].[CustomerSK] = [DimCustomer].[CustomerSK])
      LEFT JOIN [Common].[DimDate] [DimDate] 
             ON ([FactActualDetail].[DeliveryDateSK] = [DimDate].[DateSK])
      WHERE [EQMultiplier] > 0 AND ([SC] = 04 OR [SC] = 06 OR [SC] = 07) 
        AND (substring([SourceCustomerProductCode],8,3) = 102) 
        AND [Fiscal_Year] IN (2013, 2012)
     ) sq
WHERE min_year=2013
GROUP BY 
       [Acct #],
       [Unique_Fiscal_Month_Label] 
```

# sql-server-2008-r2 - SQL Server 插入随时间变慢

> ID：15343330
> 
> 赞同：1
> 
> 时间：2013-03-11T16:11:28.037
> 
> 标签：sql-server-2008-r2, sql-insert

不确定这是这里还是 DBA 论坛的问题，但这里是我的问题的一些背景。我有一个用 C# 编写的应用程序，它使用 Gentle Framework 与我们的数据库交互。我遇到的问题出现在两台不同的服务器上，它们都运行 SQL Server 2008 R2。一台服务器运行具有 16GB RAM 的 Windows Server 2003，另一台运行具有 64GB RAM 的 Windows Server 2008 R2。此外，我们正在运行千兆内部网，所以我怀疑它是资源问题还是网络问题。

话虽这么说，我的问题是......当插入数据库时​​，每次插入都需要更多时间，从大约 30 毫秒开始，到大约 1900 毫秒，然后突然花费 189549 毫秒（3 分钟多一点）。插入 3 分钟后，时间下降到大约 10 毫秒，然后再次开始增加。[这](https://www.dropbox.com/s/ng74hrlno7ke52r/TimeTable.txt?m)是我的日志文件的链接，显示了以毫秒为单位的时间和查询。不幸的是，由于所谓的“专有”，我无法与您分享确切的插入内容，但我可以回答有关细节的一般问题。

一些额外的细节：

*   链接的日志文件仅显示超过 10 毫秒的查询，插入之间的日志中有更多查询，但它们只占用 1-2 毫秒。我可以将一个与所有查询联系起来。
*   我已经查看了有关类似问题的其他问题，但它们要么是关于 RAID，要么是关于多插入与多值语句
*   这些是参数化查询
*   这些表已编入索引，因此无法删除这些表，因为其他应用程序正在使用这些表并依赖于这些索引。
*   我认为在更改记录插入方式方面我没有太多选择，因为 Gentle 正在生成 SQL。
*   我发现[了这个](https://stackoverflow.com/questions/8635818/multiple-insert-statements-vs-single-insert-with-multiple-values)我认为很接近的问题。
*   我相信 Gentle 在 1 笔交易中完成所有这些，并且有人告诉我“应该在 1 笔交易中完成，我们不会将其拆分”

# c# - 所有返回的复选框都被选中，即使“”

> ID：15343336
> 
> 赞同：0
> 
> 时间：2013-03-11T16:11:43.433
> 
> 标签：c#, asp.net

我有一个记录列表，我使用中继器在屏幕上显示。其中一列包含一个复选框“已联系”。我已经设置了一些要检查的记录，而有些则没有。（在数据库中）......但是当页面加载时，所有记录都被检查......有人知道为什么吗？

```
<input type="checkbox" name="chkBox"
 checked='<%# SetCheckboxValue((bool)Eval("Contacted"))%>' /> 
```

“已联系”是后面代码中设置的布尔值，具体取决于是否检查记录（来自数据库）

```
protected string SetCheckboxValue(bool Contacted)
    {
        if (Contacted)
        {
            return "checked";
        }

        return String.Empty;
    } 
```

SetCheckboxValue 获取 T 或 F 并应返回“已选中”或“”然后应用程序应将每个记录显示为已选中或为空..但正如我所说的所有记录都显示为已选中？

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:14:01.763

因为属性`checked`是布尔属性，不一定需要值。

它的存在或不存在表示复选框是否被选中。

将您的标记更改为：

```
<input type="checkbox" name="chkBox" <%# SetCheckboxValue((bool)Eval("Contacted"))%> /> 
```

注意：为了符合 X/HTML，您应该将属性标记生成为：`checked="checked"`但对于 HTML，更简单`checked`就足够了。

```
protected string SetCheckboxValue(bool Contacted)
{
    if (Contacted)
    {
        return "checked=\"checked\"";
    }

    return String.Empty;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T16:15:20.367

`checked`in 值不是必需的，完全是可选的。

```
<input type='checkbox' checked /> 
```

和

```
<input type='checkbox' checked='checked' /> 
```

和

```
<input type='checkbox' checked='' /> 
```

您需要`checked`完全删除该属性才能取消选中该复选框。

# java - 如何在 jsp 上跳过 % 登录？

> ID：15343337
> 
> 赞同：0
> 
> 时间：2013-03-11T16:11:45.240
> 
> 标签：java, jsp, tags, el, aem

这是代码，我希望将所有空格字符串替换为“%20”：

问题是...它的 html 源代码显示如下 ->

它目前正在跳过我所有的 '%' 符号......而我期望得到的是这样的（'TOP%20NAV' 是硬代码，请忽略它）-->

==================================================== ====================================

这是生成 url 的代码：

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:13:35.830

在格式化字符串时`%`，用双精度替换单精度`%%`以转义百分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:45:15.200

请用

```
<c:out value="${title}"/> 
```

这将对字符串进行 HTML 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T22:53:01.710

首先，我认为 Balaji 的解决方案可能是可行的方法，但这里有另一种选择。

我之前遇到过同样的问题，最终使用 html 实体代替 % 符号。例如：

```
<c:set var="level1PageTitleFormat" value="${fn:replace(level1Page.title,' ','&#37;20') 
```

这应该可以为您完成工作。

# r - 如何将 data.frame 转换为树状结构对象，例如树状图

> ID：15343338
> 
> 赞同：15
> 
> 时间：2013-03-11T16:11:47.827
> 
> 标签：r, dataframe, dendrogram

我有一个 data.frame 对象。举个简单的例子：

```
> data.frame(x=c('A','A','B','B','B'), y=c('Ab','Ac','Ba', 'Ba','Bd'), z=c('Abb','Acc','Bad', 'Bae','Bdd'))
  x  y   z
1 A Ab Abb
2 A Ac Acc
3 B Ba Bad
4 B Ba Bae
5 B Bd Bdd 
```

实际数据中有更多的行和列。我怎么能像这样创建树状图的嵌套树结构对象：

```
 |---Ab---Abb
     A---|
     |   |---Ac---Acc
   --|                 /--Bad 
     |   |---Ba-------|
     B---|             \--Bae
         |---Bb---Bdd 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T19:44:20.257

## data.frame 到 Newick

我在计算系统发育学方面获得了博士学位，并且在我制作这段代码的过程中的某个地方，当我得到一些非标准格式的数据（在系统发育意义上）时，我使用了一次或两次。该脚本遍历数据框，就好像它是一棵树......并沿途将内容粘贴到 Newick 字符串中，这是一种标准格式，然后可以转换为任何类型的树对象。

我想脚本可以优化（我很少使用它，以至于更多的工作会降低整体效率），但至少分享比让它收集我硬盘上的灰尘更好。

```
 ## recursion function
    traverse <- function(a,i,innerl){
        if(i < (ncol(df))){
            alevelinner <- as.character(unique(df[which(as.character(df[,i])==a),i+1]))
            desc <- NULL
            if(length(alevelinner) == 1) (newickout <- traverse(alevelinner,i+1,innerl))
            else {
                for(b in alevelinner) desc <- c(desc,traverse(b,i+1,innerl))
                il <- NULL; if(innerl==TRUE) il <- a
                (newickout <- paste("(",paste(desc,collapse=","),")",il,sep=""))
            }
        }
        else { (newickout <- a) }
    }

    ## data.frame to newick function
    df2newick <- function(df, innerlabel=FALSE){
        alevel <- as.character(unique(df[,1]))
        newick <- NULL
        for(x in alevel) newick <- c(newick,traverse(x,1,innerlabel))
        (newick <- paste("(",paste(newick,collapse=","),");",sep=""))
    } 
```

主函数**`df2newick()`**有两个参数：

*   **`df`**这是要转换的数据框（类data.frame的对象）
*   **`innerlabel`**它告诉函数为内部节点编写标签（bulean）

在您的示例中演示它：

```
 df <- data.frame(x=c('A','A','B','B','B'), y=c('Ab','Ac','Ba', 'Ba','Bd'), z=c('Abb','Acc','Bad', 'Bae','Bdd'))
    myNewick <- df2newick(df)
    #[1] "((Abb,Acc),((Bad,Bae),Bdd));" 
```

`phylo`现在你可以用`read.tree()`from ape将它读入一个类的对象

```
 library(ape)
    mytree <- read.tree(text=myNewick)
    plot(mytree) 
```

如果要将内部节点标签添加到 Newick 字符串，可以使用：

```
 myNewick <- df2newick(df, TRUE)
    #[1] "((Abb,Acc)A,((Bad,Bae)Ba,Bdd)B);" 
```

希望这是有用的（也许我的博士学位不是一个完整的时间;-)

* * *

**您的数据框格式的附加说明：**

正如您所观察到的，df2newick 函数忽略了一个孩子的内部模式（无论如何最好与大多数系统发育方法一起使用......只与我有关）。`df`我最初获得并与此脚本一起使用的对象具有以下格式：

```
 df <- data.frame(x=c('A','A','B','B','B'), y=c('Abb','Acc','Ba', 'Ba','Bdd'), z=c('Abb','Acc','Bad', 'Bae','Bdd')) 
```

与您的非常相似...但是“内部单个子节点”与它们的子节点具有相同的名称，但是您对该节点也有不同的内部名称，并且名称被忽略...可能不相关，但您可以只需忽略递归函数的一部分，如下所示：

```
 traverse <- function(a,i,innerl){
        if(i < (ncol(df))){
            alevelinner <- as.character(unique(df[which(as.character(df[,i])==a),i+1]))
            desc <- NULL
            ##if(length(alevelinner) == 1) (newickout <- traverse(alevelinner,i+1,innerl))
            ##else {
                for(b in alevelinner) desc <- c(desc,traverse(b,i+1,innerl))
                il <- NULL; if(innerl==TRUE) il <- a
                (newickout <- paste("(",paste(desc,collapse=","),")",il,sep=""))
            ##}
        }
        else { (newickout <- a) }
    } 
```

你会得到这样的东西：

```
 [1] "(((Abb)Ab,(Acc)Ac)A,((Bad,Bae)Ba,(Bdd)Bd)B);" 
```

这对我来说真的很奇怪，但我添加它以防万一，因为它现在确实包含原始数据帧中的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:41:53.850

我对 R 中树状图的内部结构了解不多，但以下代码将创建一个嵌套列表结构，该结构具有我认为您要寻找的层次结构：

```
stree = function(x,level=0) {
#x is a string vector
#resultis a hierarchical structure of lists (that contains lists, etc.)
#the names of the lists are the node values.

level = level+1
if (length(x)==1) {
    result = list()
    result[[substring(x[1],level)]]=list()
    return(result)
}
result=list()
this.level = substring(x,level,level)
next.levels = unique(this.level)
for (p in next.levels) {
    if (p=="") {
        result$p = list()
    } else {
        ids = which(this.level==p)
        result[[p]] = stree(x[ids],level)
    }
}
result
} 
```

它对字符串向量进行操作。因此，对于您的数据框，您需要调用 stree(as.character(df[,3]))

希望这可以帮助。

# android - 在android中使用KSoap库读取webservice结果时出错

> ID：15343339
> 
> 赞同：0
> 
> 时间：2013-03-11T16:11:51.297
> 
> 标签：android

我正在使用 Ksoap 库从 web 服务中读取 xml。以下是我使用过的代码：

```
private static String SOAP_ACTION_Transaction = "http://tempuri.org/Trackdata";
    private static String NAMESPACE_Transaction= "http://tempuri.org/";
    private static String METHOD_NAME_Transaction = "Trackdata";
    private static String URL_Transaction = "https://devraj.charge.com/process/getAndroidData.asmx?WSDL"; 
```

我正在使用异步任务调用 showdetails() 方法。

```
 public void showdetails()
        {
            String result = "";
            SoapObject resultRequestSOAP = null;
            SoapObject resultRequestSOAPbody =null;
            SoapObject request = new SoapObject(NAMESPACE_Transaction, METHOD_NAME_Transaction);

            request.addProperty("Type","payment");
            request.addProperty("Id",53);
            request.addProperty("amount","0.02");
            request.addProperty("CCExpMonth",11);
            request.addProperty("CCExpYear",22);
            request.addProperty("Source","gg");
            request.addProperty("profileId",748);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL_Transaction);
            androidHttpTransport.debug = true;

            try 
            {
                androidHttpTransport.call(SOAP_ACTION_Transaction, envelope);
                String requestDumpString = androidHttpTransport.requestDump;
                System.out.println("requestDump : " + requestDumpString);
                resultRequestSOAP = (SoapObject) envelope.getResponse(); // Output received
                result = resultRequestSOAP.getProperty(0).toString(); // Result string
                 System.out.println("OUTPUT : " + result);

            } catch (Exception e) {
                e.printStackTrace();
            }

        } 
```

但是我收到以下错误：

```
SoapFault - faultcode: 'soap:Server' faultstring: 'System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.NullReferenceException: Object reference not set to an instance of an object. 
```

在这个语句中：resultRequestSOAP = (SoapObject) envelope.getResponse(); 有人可以告诉我我已经解析了其他 web 服务的错​​误可能是什么，但是对于这个我得到了这个错误。以下是我的 xml 数据的一部分：

```
<?xml version="1.0" encoding="utf-8"?>
<ClsProcessData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
  <ProfileId>748</ProfileId>
  <Id>53</MerchantId>
  <InvoiceNum>53-375</InvoiceNum>
  <InvoiceDescription />
  <amount>0.02</InvoiceAmount>
  <CCName />
  </ClsProcessData> 
```

任何帮助将不胜感激。如果有人能告诉我错误，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:19:33.510

```
SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
String responseLocal = resultsRequestSOAP.toString(); 
```

试试上面的而不是 resultRequestSOAP = (SoapObject) envelope.getResponse();

```
 if (envelope.bodyIn instanceof SoapFault) {
    String str= ((SoapFault) envelope.bodyIn).faultstring;
    Log.i("", str);
} else {
    SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
    Log.d("WS", String.valueOf(resultsRequestSOAP));
} 
```

或者，如果您的回答是原始的，请尝试

```
 SoapPrimitive response = (SoapPrimitive) envelope.getResponse(); 
```

# javascript - 我如何将谷歌地方上的自动完成功能限制为关键字

> ID：15343344
> 
> 赞同：0
> 
> 时间：2013-03-11T16:12:04.310
> 
> 标签：javascript, google-places-api

在 Google 提供的示例中使用 Google Places java-script 库： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/places-searchbox](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-searchbox)

我试图只得到像“墨西哥餐馆”、“快餐”、“花店”等这样的结果，而不是机构或城市/国家。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:22:33.507

根据[文档](https://google-developers.appspot.com/maps/documentation/javascript/places?hl=en#adding_autocomplete)，这是不可能的。您只能将结果限制为“机构”的类型，这意味着

> 指示 Place 服务仅返回业务结果。

# php - Codeigniter：POST数据-属性HTML5

> ID：15343345
> 
> 赞同：0
> 
> 时间：2013-03-11T16:12:08.970
> 
> 标签：php, codeigniter, post

我目前正在使用 CodeIgniter 的框架，我在 HTML5 中遇到了数据属性问题，我不知道如何从表单中的下拉输入中传递数据属性。

我知道如何使用 jQuery 来做到这一点，但我不知道是否有任何“解决方案”来获取数据属性并识别我的数据类型。

这是我的drop代码：

```
<select name="username">
<option value="1" data-attributes="users">Simon</option>
<option value="1" data-attributes="collectives">My super crew</option>
</select> 
```

如果你有一些灯给我，请提前谢谢。

西蒙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:16:06.097

`data-*`属性被设计为由客户端代码处理。

如果要在表单中提交数据，请使用`value`属性。

```
<option value="users">Simon</option>
<option value="collectives">My super crew</option> 
```

如果您愿意，您可以在那里对多个不同的数据进行编码。

例如管道分隔数据：

```
<option value="1|users">Simon</option>
<option value="1|collectives">My super crew</option> 
```

例如 JSON：

```
<option value="{&quot;number&quot;: 1, &quot;string&quot;: %quot;users%quot;}">Simon</option>
<option value="{&quot;number&quot;: 1, &quot;string&quot;: %quot;collectives%quot;}">My super crew</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:32:17.753

如前所述：浏览器仅提交“值”。

Anoter solution would be to hava a hidden input field which value gets set to the data-attributes value when the select is changed (via javascript).

# php - 使用正则表达式从谷歌地图嵌入链接中提取 src

> ID：15343348
> 
> 赞同：1
> 
> 时间：2013-03-11T16:12:18.807
> 
> 标签：php, regex, google-maps

大家好，感谢阅读。我有一个这样的链接：

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.it/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=monte+rosa&amp;aq=&amp;sll=45.454082,9.213138&amp;sspn=0.009016,0.01929&amp;t=h&amp;gl=it&amp;ie=UTF8&amp;hq=&amp;hnear=Monte+Rosa,+Province+of+Varese,+Lombardy&amp;ll=45.690627,8.824349&amp;spn=0.008978,0.01929&amp;z=14&amp;iwloc=A&amp;output=embed"></iframe><br /><small><a href="https://maps.google.it/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=monte+rosa&amp;aq=&amp;sll=45.454082,9.213138&amp;sspn=0.009016,0.01929&amp;t=h&amp;gl=it&amp;ie=UTF8&amp;hq=&amp;hnear=Monte+Rosa,+Province+of+Varese,+Lombardy&amp;ll=45.690627,8.824349&amp;spn=0.008978,0.01929&amp;z=14&amp;iwloc=A" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

我只想提取这个

```
https://maps.google.it/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=monte+rosa&amp;aq=&amp;sll=45.454082,9.213138&amp;sspn=0.009016,0.01929&amp;t=h&amp;gl=it&amp;ie=UTF8&amp;hq=&amp;hnear=Monte+Rosa,+Province+of+Varese,+Lombardy&amp;ll=45.690627,8.824349&amp;spn=0.008978,0.01929&amp;z=14&amp;iwloc=A&amp;output=embed 
```

换句话说，我想提取 src=" 之后的所有内容，直到链接结束"。我一直在尝试使用正则表达式，但我无法弄清楚正确的语法。一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:16:37.587

```
$html = '<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.it/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=monte+rosa&amp;aq=&amp;sll=45.454082,9.213138&amp;sspn=0.009016,0.01929&amp;t=h&amp;gl=it&amp;ie=UTF8&amp;hq=&amp;hnear=Monte+Rosa,+Province+of+Varese,+Lombardy&amp;ll=45.690627,8.824349&amp;spn=0.008978,0.01929&amp;z=14&amp;iwloc=A&amp;output=embed"></iframe><br /><small><a href="https://maps.google.it/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=monte+rosa&amp;aq=&amp;sll=45.454082,9.213138&amp;sspn=0.009016,0.01929&amp;t=h&amp;gl=it&amp;ie=UTF8&amp;hq=&amp;hnear=Monte+Rosa,+Province+of+Varese,+Lombardy&amp;ll=45.690627,8.824349&amp;spn=0.008978,0.01929&amp;z=14&amp;iwloc=A" style="color:#0000FF;text-align:left">View Larger Map</a></small>';
preg_match('~iframe.*src="([^"]*)"~', $html, $result);
var_dump($result[1]); 
```

# css - 当 li 悬停时如何更改 li 和 a 的背景颜色？

> ID：15343349
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:12:20.733
> 
> 标签：css, hover, html-lists

所以这是我的问题，检查这个网站：

[http://rawgameshop.com/test.php](http://rawgameshop.com/test.php)

在左侧显示“更轻松地浏览游戏！” 我有 2 个 li 元素，其中包含链接。我想要实现的是当 li 悬停时 li 和 a 都会改变它们的颜色。

如果您现在尝试它，a 元素只会在完全悬停在它上面时改变它的颜色，而不是 li。

我尝试了以下方法：

```
<a href="#"><li>UNDER 5€&lt;/li></a> 
```

但这在 li 元素（就在字母下方）留下了一些讨厌的线条，即使我认为我把 text-decoration:none 到处都是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:15:56.033

首先，列表项应该在列表元素中而不是锚点中。如果您希望它们包含链接，则将锚点放在列表项中。

为了回答你的问题，我会使用

```
ul:hover li, ul:hover li a {background:red;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:18:32.457

首先将您的标记更改为：

```
<li><a href='#'>Text</a></li> 
```

然后在你的CSS中你可以这样做：

```
li a:hover{
    background-color: blue;
} 
```

由于您`a`现在正在为`li`标签提供宽度，因此整个东西都会改变颜色。

# sql - 过程参数中的字符串连接

> ID：15343354
> 
> 赞同：3
> 
> 时间：2013-03-11T16:12:42.707
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想做这样的事情：

```
declare @var varchar(50) = '2';
exec sp_myprocedure 'first', 'sec ' + @var 
```

但我收到一个错误：

```
Incorrect syntax near '+'. 
```

当然我可以在执行过程之前设置变量：

```
set @var = 'sec ' + @var; 
```

但我不想要这个，因为我的代码中有很多执行，我不想创建数百万个变量。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T17:03:43.483

您需要修复您的代码，抱歉。没有魔法可以使这合法化：

```
EXEC dbo.procedure_name @var + 'constant'; 
```

此外，[**停止**使用`sp_`存储过程的前缀](http://www.sqlperformance.com/2012/10/t-sql-queries/sp_prefix)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-11T16:22:53.733

我认为如果您使用`EXEC`.

从此：[_](http://msdn.microsoft.com/en-us/library/ms188332.aspx)

> 执行存储过程或函数
> 
> [ { 执行 | 执行 } ]
> 
> > ```
> > { 
> >   [ @return_status = ]
> >   { module_name [ ;number ] | @module_name_var } 
> >     [ [ @parameter = ] { value 
> >                        | @variable [ OUTPUT ] 
> >                        | [ DEFAULT ] 
> >                        }
> >     ]
> >   [ ,...n ]
> >   [ WITH <execute_option> [ ,...n ] ]
> > } [;] 
> > ```

`@parameter`必须是一个**值**。但是 this:`'sec ' + @var`是一个**[表达式](http://msdn.microsoft.com/en-us/library/ms190286.aspx)**。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-11T17:27:42.183

你不需要声明一百万个变量，你只需要声明一个变量，并在每个变量之前设置它`EXEC`：

```
DECLARE @cmd nvarchar(max) = '';

declare @var varchar(50) = '2';

set @cmd = 'sec ' + @var;
exec sp_myprocedure 'first', @cmd

set @cmd = 'try ' + @var;
exec sp_myprocedure 'first', @cmd

set @cmd = 'foo ' + @var;
exec sp_myprocedure 'first', @cmd

set @cmd = 'bar ' + @var;
exec sp_myprocedure 'first', @cmd 
```

# java - Android：ScrollView 不使用键盘滚动

> ID：15343355
> 
> 赞同：54
> 
> 时间：2013-03-11T16:12:43.750
> 
> 标签：java, android, android-layout, android-softkeyboard, android-scrollview

我有一个带有一些视图的布局，其中一个是 EditText。布局很容易适合一页，但是，当软键盘退出时，布局不会滚动。这是我的布局的回顾：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background" >

    <ScrollView
        android:id="@+id/ScrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <CheckBox/>

            <TextView/>

            <LinearLayout>
                <EditText>
                    <requestFocus />
                </EditText>
            </LinearLayout>

            <TextView/>

            <LinearLayout>
                <Spinner/>
            </LinearLayout>

        </LinearLayout>

    </ScrollView>

    <Button
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

在我的清单中，我声明了该属性：

```
android:windowSoftInputMode="adjustResize|stateHidden" 
```

有谁知道它为什么不起作用以及如何确保它起作用？

提前致谢！

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-08-12T10:14:46.047

我遇到了同样的问题，我在清单中检查了我的活动，它不起作用的原因是因为我没有使用这个属性：

```
android:windowSoftInputMode="adjustResize" 
```

现在它工作得很好，不需要做额外的锚。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-15T19:38:42.170

好的，显然 ScrollView`android:layout_height`不能设置为`wrap_content`. 我将其设置为`match_parent`并将其设置`android:layout_above`为页面底部的按钮。

不要问我为什么，但这解决了问题。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-09-12T08:49:50.737

就我而言，上述方法均无效。

我有`item name="android:windowTranslucentStatus">true</item>`我的主题。它是通过`android:fitsSystemWindows="true"`在父布局中设置我的滚动视图来修复的。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-11-17T10:55:19.623

添加`android:windowSoftInputMode="stateHidden|adjustResize"`到 AndroidManifest.xml 文件中的标签。这将导致屏幕在显示软键盘后调整到左侧空间。因此，您将能够轻松滚动。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-08-16T02:34:54.487

**在我的情况下，上述任何解决方案在我删除**之前都不起作用

 **`getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);`

在我的活动中，我使用该代码来获得全屏显示。也许在某些情况下，尝试删除全屏的任何设置以使上述任何解决方案都能正常工作。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-08T05:28:44.077

如果您的第一个片段滚动完美而第二个片段没有滚动，那么您应该使用第二个片段替换并执行以下操作

1.在滚动视图中添加

```
android:fillViewport="true"
android:fitsSystemWindows="true" 
```

2.添加清单

```
android:windowSoftInputMode="adjustResize|stateVisible" 
```

如果您添加片段，那么我的建议是您需要替换片段

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-01-27T05:20:32.583

在我的情况下，我必须从我的样式中**删除**以下属性才能使其正常工作。

```
<item name="android:windowFullscreen">true</item> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-05T10:18:58.310

我的问题是水平滚动视图。就我而言，我必须将 Horizo​​ntalScrollView 设置为：

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```

并删除：

```
 android:layout_above="@+id/closeButton"
 android:layout_below="@+id/logo" 
```

在 AndroidManifest.xml 中，活动设置为：

```
android:windowSoftInputMode="" 
```

我希望这可以帮助任何遇到这个奇怪错误的人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-18T11:02:09.783

就我而言，解决这个问题的方法是在底部设置一个缺失的约束。我的 ScrollView 有顶部、右侧和左侧约束，但没有底部约束。从四面八方限制之后，它开始与上面的textview重叠，这促使我尝试将高度设置为0dp，这似乎解决了问题。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-07-10T04:30:40.367

尝试将 ScrollView 设置为您的父布局。它对我来说就像魅力！

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2018-04-22T16:47:05.313

```
<activity 
    android:windowSoftInputMode="adjustResize"
> 
```

**试试这个在android清单**中..**

# javascript - 尝试使用 jquery 从元素中删除所有 html

> ID：15343356
> 
> 赞同：1
> 
> 时间：2013-03-11T16:12:44.853
> 
> 标签：javascript, jquery, html

我有一个 DIV 元素，其中填充了我要删除的一堆 HTML 实体：

```
<div class="text">
<p>&lt;p&gt;&#8203;&lt;span style="line-height:25px;"&gt;&#8203;&lt;/span&gt;&lt;span style="line-height:25px;"&gt;&#8203;Hej hop!&lt;/span&gt;&nbsp;&lt;span style="line-height:25px;"&gt;&#8203;&lt;/span&gt;&lt;span</p>
</div> 
```

我正在使用 jQuery 并创建了这段代码，但它不起作用：

```
$('.text').each(function () {
    $(this).replace(/<\/?[a-z][a-z0-9]*[^<>]*>/ig, "");
}); 
```

我正在尝试用短语“Hej Hop！”替换文本。

正则表达式没有错..

以下是我对其他页面的处理方式：

```
 text = text.replace(/<\/?[a-z][a-z0-9]*[^<>]*>/ig, ""); 
```

但这是在一个带有返回文本的参数的 javascript 函数中。但在这个特定页面上，我需要使用 jquery 并迭代和检查......

已解决的问题：

```
$('text').each(function () {
    $(this).html(function (i, v) {
        return $('<div>').html(v).text();
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T16:13:20.973

您只需要：

```
$('.text').empty(); 
```

*编辑*——如果你想从元素的内容中删除**标记**，最简单的做法就是 Marc B 在评论中建议的：

```
$('.text').each(function() {
  $(this).text($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:30:07.977

[您可以使用.html()](http://api.jquery.com/html/#html-functionindex--oldhtml)像这样剥离它们

```
$('div.text').html(function(i,v){
    return $('<div>').html(v).text();
    // create new div - append HTML and get the text from the div
}); 
```

[http://jsfiddle.net/UA9P9/](http://jsfiddle.net/UA9P9/)

它仍然在其中留下一些字符，因此您可能需要使用正则表达式将它们正则表达式

```
$('div.text').html(function(i,v){
     return $.trim($('<div>').html(v).text().replace(/<\/?[a-z][a-z0-9]*[^<>]*>/ig, ""));
}); 
```

[http://jsfiddle.net/VfxaT/](http://jsfiddle.net/VfxaT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:17:12.600

这些是 Ascii 代码，因此正则表达式是：`/xxx[\x00-\x7F]+xxx/`

# opengl-es - 非矩形纹理的纹理映射——如何获取特定纹素的颜色

> ID：15343359
> 
> 赞同：1
> 
> 时间：2013-03-11T16:12:52.160
> 
> 标签：opengl-es, opengl-es-2.0, glsl, texture-mapping, fragment-shader

我正在尝试将使用 GLSL 版本 120 编写的着色器转换为 OpenGL ES 2.0，我遇到了如何正确映射此着色器的问题。

在原始着色器上，我使用的是 texture2DRect 并且 OpenGL ES 不支持此功能（至少在我想要的目标硬件上不支持）。

着色器有两个纹理。一个是映射到四边形的纹理，另一个只是我用来乘以纹素的一种查找。查找是 128x128 位图。

原始着色器如下所示：

```
float xx = mod(gl_FragCoord.x, 5.0);
float yy = mod(gl_FragCoord.y, 15.0);
vec4 color = texture2DRect(tex0, coord0);
vec4 lookup1 = texture2DRect(tex1, vec2(xx, yy));
gl_FragColor = color * lookup1; 
```

我已将其更改为：

```
float xx = mod(gl_FragCoord.x, 5.0) * (1.0/textsize.x);
float yy = mod(gl_FragCoord.y, 15.0) * (1.0/textsize.y);
vec4 color = texture2D(tex0, coord0);
vec4 lookup1 = texture2D(tex1, vec2(xx, yy));
gl_FragColor = color * lookup1; 
```

其中 textsize 是包含查找纹理大小 (128x128) 的 vec2，我需要在查找时使用 texel 的确切值，比如说 50,127。我想这应该是（50/128、127/128）。然而，这并没有像我预期的那样工作。我在这里想念什么？

附加信息：

**纹理参数：**

```
glTexParameterf(GL_TEXTURE_2D,
        GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D,
        GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
        GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
        GL_CLAMP_TO_EDGE) 
```

**纹理声明：**

```
uniform samplerExternalOES tex0;
uniform sampler2D tex1; 
```

**2013.03.13 更新：**

我现在实现了以下功能：

```
vec4 texelFetch(sampler2D texsampler, vec2 coord) {
    vec2 mult=(2.0*coord + 1.0)/(2.0* texWidth); // 128.0
    vec4 texel = texture2D(texsampler,mult);
    return texel;
} 
```

并将代码更改为：

```
float xx = mod(gl_FragCoord.x, 5.0);
float yy = mod(gl_FragCoord.y, 15.0);
vec4 lookup1 = texelFetch(tex1, vec2(xx, yy)); 
```

不过，它似乎没有工作。

# android - 尝试显示 Google Maps v2 时出现 ClassNotFoundException

> ID：15343361
> 
> 赞同：0
> 
> 时间：2013-03-11T16:12:58.420
> 
> 标签：android, google-maps-android-api-2, google-play-services

我试图显示一个 MapFragment，当我在调试模式下运行我的项目时，我`ClassNotFoundException`在地图尝试加载时看到 aa。（**没有向 LOGCAT 写入堆栈跟踪**）

我唯一看到的是 logcat 中的这个警告

```
03-11 11:58:52.465: W/dalvikvm(16989): VFY: unable to resolve static field 1363 (common_google_play_services_install_title) in Lcom/google/android/gms/R$string; 
```

当我在调试模式下查看错误时，它看起来像是在寻找类`com.google.android.gms.R$string`

它甚至没有达到我的断点，`onCreate`但`onCreateView`地图确实加载了。问题是调用`getMap()`总是返回 null

我认为这与谷歌播放服务有关，因为如果我打电话

```
GooglePlayServicesUtil.isGooglePlayServicesAvailable(this); 
```

我遇到同样的问题。我知道我的平板电脑上安装了谷歌播放服务，所以我不知道问题是什么？

# django - Django 中的 FK 验证

> ID：15343362
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:13:02.290
> 
> 标签：django, django-models, django-orm

下午好，

我的 django 服务器在顶部运行 REST api 来为我的移动设备提供服务。现在，在某个时候，移动设备将与 Django 进行通信。

假设设备要求 Django 在数据库中添加一个对象，并且在该对象中，我需要像这样设置一个 FK：

```
objectA = ObjectA.objects.create(title=title,
    category_id = c_id, order = order, equipment_id = e_id,
    info_maintenance = info_m, info_security = info_s,
    info_general = info_g, alphabetical_notation = alphabetical_notation,
    allow_comments = allow_comments,
    added_by_id = user_id,
    last_modified_by_id = user_id) 
```

如果从我的移动设备接收到 e_id 和 c_id，我是否应该在调用此创建之前检查它们是否仍然存在于数据库中？那是两个额外的查询......但如果他们可以避免任何问题，我不介意！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:16:50.823

它认为 Django 默认情况下会在外键上创建约束（尽管可能取决于数据库）。这意味着如果您的外键指向不存在的东西，那么保存将失败（导致 Python 端出现异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:20:43.493

您可以将其减少为单个查询（至少应该是单个查询，*警告我尚未测试代码*）：

```
if MyObject.objects.filter(id__in=[e_id, c_id]).distinct().count() == 2:
    # create the object
    ObjectA.objects.create(...)
else:
    # objects corresponding e_id and c_id do not exist, do NOT create ObjectA 
```

您应该*始终*验证来自用户或可以由确定的用户更改的任何信息。有人嗅探流量并开始构建他们自己的 REST 请求到您的服务器并不难。**始终清理和验证添加到系统中的外部数据。**

# java - 通过蓝牙将字符串从作为客户端的 PC 发送到作为服务器的移动设备

> ID：15343369
> 
> 赞同：22
> 
> 时间：2013-03-11T16:13:19.140
> 
> 标签：java, android, bluetooth, client-server, bluecove

我需要通过蓝牙将字符串从 PC 传输到 Android 移动设备的帮助。Android 移动设备应充当服务器并在设备屏幕上显示字符串消息。作为客户端的 PC 应将字符串发送到移动设备。

我希望服务器对提取的字符串（通过蓝牙传输）做出反应。这意味着一方面服务器必须始终监听新字符串的到达，但另一方面仍然必须能够对这些消息做出反应（例如从一个菜单导航到另一个菜单）。

我尝试使用 BlueCove (2.1.1) 作为 BluetoothStack（为此我将 BlueCove 中的 jar 作为库添加到两个项目中）并结合我在[此处](http://www.jsr82.com/jsr-82-sample-spp-server-and-client/)找到的服务器-客户端通信示例。

## 更新：

由于*user_CC*使用`RFComm`服务器连接更新了服务器代码：

```
public class RFCommServer extends Thread{

//based on java.util.UUID
private static UUID MY_UUID = UUID.fromString("446118f0-8b1e-11e2-9e96-0800200c9a66");

// The local server socket
private BluetoothServerSocket mmServerSocket;

// based on android.bluetooth.BluetoothAdapter
private BluetoothAdapter mAdapter;
private BluetoothDevice remoteDevice;

private Activity activity;

public RFCommServer(Activity activity) {
    this.activity = activity;
}

public void run() {
    BluetoothSocket socket = null;
    mAdapter = BluetoothAdapter.getDefaultAdapter();        

    // Listen to the server socket if we're not connected
    while (true) {

        try {
            // Create a new listening server socket
            Log.d(this.getName(), ".....Initializing RFCOMM SERVER....");

            // MY_UUID is the UUID you want to use for communication
            mmServerSocket = mAdapter.listenUsingRfcommWithServiceRecord("MyService", MY_UUID);
            //mmServerSocket = mAdapter.listenUsingInsecureRfcommWithServiceRecord(NAME, MY_UUID); // you can also try using In Secure connection...

            // This is a blocking call and will only return on a
            // successful connection or an exception
            socket = mmServerSocket.accept();

        } catch (Exception e) {

        }

        try {
            Log.d(this.getName(), "Closing Server Socket.....");
            mmServerSocket.close();

            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the BluetoothSocket input and output streams

            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();

            DataInputStream mmInStream = new DataInputStream(tmpIn);
            DataOutputStream mmOutStream = new DataOutputStream(tmpOut);

            // here you can use the Input Stream to take the string from the client whoever is connecting
            //similarly use the output stream to send the data to the client

            RelativeLayout layout = (RelativeLayout) activity.findViewById(R.id.relativeLayout_Layout);
            TextView text = (TextView) layout.findViewById(R.id.textView_Text);

            text.setText(mmInStream.toString());
        } catch (Exception e) {
            //catch your exception here
        }
    }
} 
```

SPP 客户端的代码来自[这里](http://www.jsr82.com/jsr-82-sample-spp-server-and-client/)：

```
/**
* A simple SPP client that connects with an SPP server
*/
public class SampleSPPClient implements DiscoveryListener{

//object used for waiting
private static Object lock=new Object();

//vector containing the devices discovered
private static Vector vecDevices=new Vector();

private static String connectionURL=null;

public static void main(String[] args) throws IOException {

    SampleSPPClient client=new SampleSPPClient();

    //display local device address and name
    LocalDevice localDevice = LocalDevice.getLocalDevice();
    System.out.println("Address: "+localDevice.getBluetoothAddress());
    System.out.println("Name: "+localDevice.getFriendlyName());

    //find devices
    DiscoveryAgent agent = localDevice.getDiscoveryAgent();

    System.out.println("Starting device inquiry...");
    agent.startInquiry(DiscoveryAgent.GIAC, client);

    try {
        synchronized(lock){
            lock.wait();
        }
    }
    catch (InterruptedException e) {
        e.printStackTrace();
    }

    System.out.println("Device Inquiry Completed. ");

    //print all devices in vecDevices
    int deviceCount=vecDevices.size();

    if(deviceCount <= 0){
        System.out.println("No Devices Found .");
        System.exit(0);
    }
    else{
        //print bluetooth device addresses and names in the format [ No. address (name) ]
        System.out.println("Bluetooth Devices: ");
        for (int i = 0; i <deviceCount; i++) {
            RemoteDevice remoteDevice=(RemoteDevice)vecDevices.elementAt(i);
            System.out.println((i+1)+". "+remoteDevice.getBluetoothAddress()+" ("+remoteDevice.getFriendlyName(true)+")");
        }
    }

    System.out.print("Choose Device index: ");
    BufferedReader bReader=new BufferedReader(new InputStreamReader(System.in));

    String chosenIndex=bReader.readLine();
    int index=Integer.parseInt(chosenIndex.trim());

    //check for spp service
    RemoteDevice remoteDevice=(RemoteDevice)vecDevices.elementAt(index-1);
    UUID[] uuidSet = new UUID[1];
    uuidSet[0]=new UUID("446118f08b1e11e29e960800200c9a66", false);

    System.out.println("\nSearching for service...");
    agent.searchServices(null,uuidSet,remoteDevice,client);

    try {
        synchronized(lock){
            lock.wait();
        }
    }
    catch (InterruptedException e) {
        e.printStackTrace();
    }

    if(connectionURL==null){
        System.out.println("Device does not support Simple SPP Service.");
        System.exit(0);
    }

    //connect to the server and send a line of text
    StreamConnection streamConnection=(StreamConnection)Connector.open(connectionURL);

    //send string
    OutputStream outStream=streamConnection.openOutputStream();
    PrintWriter pWriter=new PrintWriter(new OutputStreamWriter(outStream));
    pWriter.write("Test String from SPP Client\r\n");
    pWriter.flush();

    //read response
    InputStream inStream=streamConnection.openInputStream();
    BufferedReader bReader2=new BufferedReader(new InputStreamReader(inStream));
    String lineRead=bReader2.readLine();
    System.out.println(lineRead);

}//main

//methods of DiscoveryListener
public void deviceDiscovered(RemoteDevice btDevice, DeviceClass cod) {
    //add the device to the vector
    if(!vecDevices.contains(btDevice)){
        vecDevices.addElement(btDevice);
    }
}

//implement this method since services are not being discovered
public void servicesDiscovered(int transID, ServiceRecord[] servRecord) {
    if(servRecord!=null && servRecord.length>0){
        connectionURL=servRecord[0].getConnectionURL(0,false);
    }
    synchronized(lock){
        lock.notify();
    }
}

//implement this method since services are not being discovered
public void serviceSearchCompleted(int transID, int respCode) {
    synchronized(lock){
        lock.notify();
    }
}

public void inquiryCompleted(int discType) {
    synchronized(lock){
        lock.notify();
    }

}//end method

} 
```

为了测试，我使用带有最新 Android API 的 Galaxy Nexus (GT-I9250)。

感谢*user_CC*，客户端和服务器现在可以正常运行。但遗憾的是客户端无法连接到服务器（请参见下面的屏幕截图）。这是因为`connectionURL`从未设置过（因此`if(connectionURL==null)`默认情况下它会跳入此处。

如何更改客户端代码，以便我实际上可以将它与服务器连接？`connectionURL`我在以下行中需要一个正确的：

```
StreamConnection streamConnection=(StreamConnection)Connector.open(connectionURL) 
```

到目前为止，我只发现我需要以某种方式获取`ServiceRecord`，遗憾的是，[这里](http://www.jsr82.com/jsr-82-sample-spp-server-and-client/)的示例代码中也没有描述。

![在此处输入图像描述](../Images/4f8665752486a761516c62a73d54ae32.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T16:41:39.270

您将需要使用 RFComm APIS 来进行通信，我已经设法定义了一个线程类，它将充当服务器并侦听客户端连接。我也发表了一些意见让你理解。

```
 private class AcceptThread extends Thread {
    // The local server socket
    private BluetoothServerSocket mmServerSocket;

    public AcceptThread() {
    }

    public void run() {         
        BluetoothSocket socket = null;

                    BluetoothAdapter mAdapter = BluetoothAdapter.getDefaultAdapter();

        // Listen to the server socket if we're not connected
        while (true) {

            try {
                // Create a new listening server socket
                Log.d(TAG, ".....Initializing RFCOMM SERVER....");

                // MY_UUID is the UUID you want to use for communication
                mmServerSocket = mAdapter.listenUsingRfcommWithServiceRecord(NAME, MY_UUID);                    
                //mmServerSocket = mAdapter.listenUsingInsecureRfcommWithServiceRecord(NAME, MY_UUID);  you can also try using In Secure connection...

                // This is a blocking call and will only return on a
                // successful connection or an exception                    
                socket = mmServerSocket.accept();                   

            } catch (Exception e) {

            }

            try {
                Log.d(TAG, "Closing Server Socket.....";                    
                mmServerSocket.close();

                InputStream tmpIn = null;
                OutputStream tmpOut = null;

                // Get the BluetoothSocket input and output streams

                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();

                mmInStream = new DataInputStream(tmpIn);
                mmOutStream = new DataOutputStream(tmpOut); 

                // here you can use the Input Stream to take the string from the client whoever is connecting
                //similarly use the output stream to send the data to the client
            } catch (Exception e) {
                //catch your exception here
            }

        }
    }

} 
```

我希望这有帮助

对于您的另一个问题：

在客户端 (PC) UUID 类上声明 javax.bluetooth.UUID 应该来自 javax.bluetooth.UUID

```
 uuidSet2[0] = new UUID("446118f08b1e11e29e960800200c9a66", false); 
```

在服务器端声明 java.util.UUID (Android)

```
 UUID MY_UUID = UUID.fromString("446118f0-8b1e-11e2-9e96-0800200c9a66"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:24:47.280

我不是 Java 开发人员，但我在 Mono for Android (c#) 上遇到过类似的问题

SPP 的 UUID 应该是 `"00001101-0000-1000-8000-00805F9B34FB"`
这是一个众所周知的 UID，用于识别蓝牙 SPP 适配器。

在我的 C# 代码中，看起来像

```
private static UUID MY_UUID = UUID.FromString("00001101-0000-1000-8000-00805F9B34FB"); 
```

我猜您可以将 Java 代码更新为：

```
new UUID("00001101-0000-1000-8000-00805F9B34FB", true); 
```

虽然我不确定该函数接受哪些参数，但您可能需要检查一下。

我将 Android 设备用作客户端，但这些信息可能对您有用，
因此我将在此处包含我最初从 Java 示例翻译的 c# 代码，
因此您应该能够将其翻译回来：

```
btAdapter = BluetoothAdapter.DefaultAdapter;

btAdapter.CancelDiscovery(); //Always call CancelDiscovery before doing anything
remoteDevice = btAdapter.GetRemoteDevice(Settings["deviceaddress"].ToString());

socket = remoteDevice.CreateRfcommSocketToServiceRecord(MY_UUID);
socket.Connect(); 
```

基本上我得到默认适配器，取消任何正在运行的发现操作，然后创建一个到其他设备的套接字。在你的情况下，你会想听而不是连接，但只是为了你的信息。

希望对您有所帮助，抱歉，我无法为您提供更多 Java 特定信息。

'更新：'刚刚在 Java 中找到了一个小样本，它或多或少地遵循与我正在使用的方法相同的方法：[在 android 中连接蓝牙 SPP 的问题？](https://stackoverflow.com/questions/8141430/problems-with-connecting-bluetooth-spp-in-android)

# ruby-on-rails - 导轨！如何让样式最后出现而不是添加到 application.css

> ID：15343378
> 
> 赞同：0
> 
> 时间：2013-03-11T16:13:47.317
> 
> 标签：ruby-on-rails, ruby

我是 Ruby 和 Rails 的新手，想知道如何将 custom.css 添加为 DOM 中的最后一个 css 文件调用。

另外，如果我需要 Js 在最后而不是在标题之上，那么正确的方法是什么。

目前所有内容都来自 Rails 中的 assets 文件夹。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:16:57.553

在您的 layout.erb 中，您可以在布局本身下包含您需要的所有内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:31:03.787

你可以加：

```
<%= stylesheet_link_tag "custom", :media => "all" %> 
```

到布局文件的底部并添加`custom.css`到您的预编译列表中：

```
# /config/environments/production.rb

config.assets.precompile += %w( custom.css ) 
```

但是您的`application.css`文件仍将使用`custom.css`.

您可以通过设置文件中包含哪些文件来停止它在 application.css 中的编译`application.css`。改变，

```
# /app/assets/stylesheets/application.css

/*
 *= require_tree .
 */ 
```

到

```
/*
 *= require first_css
 *= require second_css
 */ 
```

which will ignore the `custom.css` file. It's very similar for the javascript. See [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html) for more info.

# image-processing - 用于测试的图像数据集

> ID：15343382
> 
> 赞同：0
> 
> 时间：2013-03-11T16:14:09.937
> 
> 标签：image-processing

有人可以向我推荐一个具有多个类的良好图像数据集，并且在同一个地方有用于训练和测试数据的图像吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:25:41.247

很高兴知道，你的意图是什么。这里有一些建议。

ALOI：[http ://staff.science.uva.nl/~aloi/](http://staff.science.uva.nl/~aloi/)

微软研究院剑桥对象识别图像数据库：[http ://research.microsoft.com/en-us/downloads/b94de342-60dc-45d0-830b-9f6eff91b301/default.aspx](http://research.microsoft.com/en-us/downloads/b94de342-60dc-45d0-830b-9f6eff91b301/default.aspx)

PASCAL 视觉对象类主页： http: [//pascallin.ecs.soton.ac.uk/challenges/VOC/](http://pascallin.ecs.soton.ac.uk/challenges/VOC/)

# jquery - 使用jquery拖放更改div的位置

> ID：15343385
> 
> 赞同：22
> 
> 时间：2013-03-11T16:14:27.873
> 
> 标签：jquery, html, jquery-mobile, drag-and-drop, draggable

我正在尝试建立一个网站，用户可以在其中将一些项目（div 中的一个项目）拖动到页面上的其他 div。它不是表格左右，只是页面上某处的 div。

使用 html5 拖放效果很好，现在我尝试为移动设备执行此操作。我可以将项目拖到 div 中，将它们放在那里并阻止这个 dropzone，因为只有一个元素应该在 dropzone 中。如果我犯了错误，我也可以将此元素拖动到另一个 div 或页面上的其他位置（可放置区域仅在第一次放置 div 时才有效），但我不能在 div 中放置另一个项目，现在是空的再次。

如何再次启用此 Dropzone 中的放置？

如果一个被拖到另一个上，是否可以改变两个 div 的位置？

这是我的代码的相关部分：

```
<script type="text/javascript">
$ (init);
function init() {
    $(".dragzones").draggable({
        start: handleDragStart,
        cursor: 'move',
        revert: "invalid",
    });
    $(".dropzones").droppable({
        drop: handleDropEvent,
        tolerance: "touch",              
    });
}
function handleDragStart (event, ui) {}       
function handleDropEvent (event, ui) {
    $(this).droppable('disable');
    ui.draggable.position({of: $(this), my: 'left top', at: 'left top'});
    ui.draggable.draggable('option', 'revert', "invalid");
}
</script>
<body>
<div id="alles">
<div class="dropzones" id="zone1"><div class="dragzones" id="drag1">Item 1</div></div>
<div class="dropzones" id="zone2"><div class="dragzones" id="drag2">Item 2</div></div>
<div class="dropzones" id="zone3"><div class="dragzones" id="drag3">Item 3</div></div>
<div class="dropzones" id="zone4"><div class="dragzones" id="drag4">Item 4</div></div>
    <div class="dropzones" id="zone11"></div>
    <div class="dropzones" id="zone12"></div>
    <div class="dropzones" id="zone13"></div>
    <div class="dropzones" id="zone14"></div>   
</div>
</body> 
```

编辑：这是现在工作的页面：[Drag&Drop Task](http://www.didaktik.physik.uni-muenchen.de/elektronenbahnen/en/e-feld/uebungen/Zuordnung.php)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-18T11:33:21.900

这是一个工作示例：http: [//jsfiddle.net/Gajotres/zeXuM/](http://jsfiddle.net/Gajotres/zeXuM/)

我想你所有的问题都在这里解决了。

*   启用/禁用丢弃作品
*   返回的元素不再将它们放在其他元素之下
*   返回的元素不再隐藏/删除它们
*   更好的元素定位（看起来更好）
*   它适用于移动设备（在 Android 4.1.1 Chrome 和 iPhone 上测试）

这是使用的jQuery代码：

```
$(document).on('pageshow', '#index', function(){       
    $(".dragzones").draggable({
        start: handleDragStart,
        cursor: 'move',
        revert: "invalid",
    });
    $(".dropzones").droppable({
        drop: handleDropEvent,
        tolerance: "touch",              
    });
});

function handleDragStart (event, ui) { }

function handleDropEvent (event, ui) {
    if (ui.draggable.element !== undefined) {
        ui.draggable.element.droppable('enable');
    }
    $(this).droppable('disable');
    ui.draggable.position({of: $(this),my: 'left top',at: 'left top'});
    ui.draggable.draggable('option', 'revert', "invalid");
    ui.draggable.element = $(this);
}

    // This is a fix for mobile devices

/iPad|iPhone|Android/.test( navigator.userAgent ) && (function( $ ) {

var proto =  $.ui.mouse.prototype,
_mouseInit = proto._mouseInit;

$.extend( proto, {
    _mouseInit: function() {
        this.element
        .bind( "touchstart." + this.widgetName, $.proxy( this, "_touchStart" ) );
        _mouseInit.apply( this, arguments );
    },

    _touchStart: function( event ) {
         this.element
        .bind( "touchmove." + this.widgetName, $.proxy( this, "_touchMove" ) )
        .bind( "touchend." + this.widgetName, $.proxy( this, "_touchEnd" ) );

        this._modifyEvent( event );

        $( document ).trigger($.Event("mouseup")); //reset mouseHandled flag in ui.mouse
        this._mouseDown( event );

        //return false;           
    },

    _touchMove: function( event ) {
        this._modifyEvent( event );
        this._mouseMove( event );   
    },

    _touchEnd: function( event ) {
        this.element
        .unbind( "touchmove." + this.widgetName )
        .unbind( "touchend." + this.widgetName );
        this._mouseUp( event ); 
    },

    _modifyEvent: function( event ) {
        event.which = 1;
        var target = event.originalEvent.targetTouches[0];
        event.pageX = target.clientX;
        event.pageY = target.clientY;
    }

});

})( jQuery ); 
```

此示例中使用的 touchFix 插件的原始作者是[Oleg Slobodskoi](https://github.com/kof)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-16T10:38:20.647

**编辑：**

在每次成功放置时，您都可以将最后放置的对象保存在可拖动对象上。因此，当可拖动对象移动到另一个放置对象时，您可以启用前一个放置对象的可放置对象。

见下文：

尝试将**handleDropEvent**修改为：

```
function handleDropEvent(event, ui) {
    if (ui.draggable.lastDropObject !== undefined) {
        ui.draggable.lastDropObject.droppable('enable');
    }
    var dropObject = $(this);
    dropObject.droppable('disable');
    ui.draggable.position({
        of: $(this),
        my: 'left top',
        at: 'left top'
    });
    ui.draggable.draggable('option', 'revert', "invalid");
    ui.draggable.lastDropObject = dropObject;
} 
```

基于您的源代码的完整工作示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
        <title>Drag & Drop with jQuery</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="title" content="" />
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <link href="http://www.didaktik.physik.uni-muenchen.de/forschung/elektronenbahnen/Betaversion/Tests/Styletest.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="http://www.didaktik.physik.uni-muenchen.de/forschung/elektronenbahnen/Betaversion/Tests/../Alle Seiten/JS/jquery.js"></script>
        <script type="text/javascript" src="http://www.didaktik.physik.uni-muenchen.de/forschung/elektronenbahnen/Betaversion/Tests/../Alle Seiten/JS/jquery-ui-1.8.23.custom.min.js"></script>
        <script type="text/javascript" src="http://www.didaktik.physik.uni-muenchen.de/forschung/elektronenbahnen/Betaversion/Tests/../Alle Seiten/JS/jquery.ui.touch-punch.min.js"></script>
        <script type="text/javascript">
            var test;
            $(init);

            function init() {
                $(".dragzones")
                    .draggable({
                    start: handleDragStart,
                    cursor: 'move',
                    revert: "invalid"
                });
                $(".dropzones")
                    .droppable({
                    drop: handleDropEvent,
                    tolerance: "touch",
                });
            };

            function handleDragStart(event, ui) {}

            function handleDropEvent(event, ui) {
                if (ui.draggable.lastDropObject !== undefined) {
                    ui.draggable.lastDropObject.droppable('enable');
                }
                var dropObject = $(this);
                dropObject.droppable('disable');
                ui.draggable.position({
                    of: $(this),
                    my: 'left top',
                    at: 'left top'
                });
                ui.draggable.draggable('option', 'revert', "invalid");
                ui.draggable.lastDropObject = dropObject;
            }

            function check() {
                var i = 1;
                var richtige = 0;
                while (i <= 10) {
                    var j = i + 10;
                    if (document.getElementById('zone' + j)
                        .innerHTML.search('drag' + i + '"') == 27) {
                        document.getElementById('zone' + j)
                            .style.border = '2px solid green';
                        richtige++;
                    } else {
                        document.getElementById('zone' + j)
                            .style.border = '2px solid red';
                    }
                    i++;
                    alert(document.getElementById(zone + j)
                        .innerHTML);
                };
            }
        </script>
    </head>

    <body>
        <div id="alles">
            <div id="hintergrundbildZuordnungsaufgaben">
                <img src="http://www.didaktik.physik.uni-muenchen.de/forschung/elektronenbahnen/Betaversion/Tests/../E-Feld/Bilder/Versuchsaufbau-Elektronenablenkroehre-unbeschriftet.png" width="740">
            </div>
            <div class="dropzones" id="zone1">
                <div class="dragzones" id="drag1">Item 1</div>
            </div>
            <div class="dropzones" id="zone2">
                <div class="dragzones" id="drag2">Item 2</div>
            </div>
            <div class="dropzones" id="zone3">
                <div class="dragzones" id="drag3">Item 3</div>
            </div>
            <div class="dropzones" id="zone4">
                <div class="dragzones" id="drag4">Item 4</div>
            </div>
            <div class="dropzones" id="zone5">
                <div class="dragzones" id="drag5">Item 5</div>
            </div>
            <div class="dropzones" id="zone6">
                <div class="dragzones" id="drag6">Item 6</div>
            </div>
            <div class="dropzones" id="zone7">
                <div class="dragzones" id="drag7">Item 7</div>
            </div>
            <div class="dropzones" id="zone8">
                <div class="dragzones" id="drag8">Item 8</div>
            </div>
            <div class="dropzones" id="zone9">
                <div class="dragzones" id="drag9">Item 9</div>
            </div>
            <div class="dropzones" id="zone10">
                <div class="dragzones" id="drag10">Item 10</div>
            </div>
            <div class="dropzones" id="zone11"></div>
            <div class="dropzones" id="zone12"></div>
            <div class="dropzones" id="zone13"></div>
            <div class="dropzones" id="zone14"></div>
            <div class="dropzones" id="zone15"></div>
            <div class="dropzones" id="zone16"></div>
            <div class="dropzones" id="zone17"></div>
            <div class="dropzones" id="zone18"></div>
            <div class="dropzones" id="zone19"></div>
            <div class="dropzones" id="zone20"></div>
            <button id="check" value="Check" onclick="check()">Check</button>
        </div>
    </body>

</html> 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T23:20:50.543

您的“示例”链接看起来工作正常。但我想为您的问题提供通用解决方案。

基本上你看dropzone的状态。当用户丢弃该项目时，您检查 dropzone 是否可用。如果未设置“还原”为真。

```
function handleDropEvent (event, ui) {
    if ($(this).hasClass('occupied')) {
        ui.draggable.draggable('option', 'revert', true);
        return false;
    }
    $(this).append(ui.draggable);
    ui.draggable.position({of: $(this), my: 'left top', at: 'left top'});
    ui.draggable.css('z-index', 0);
    setTimeout(validateDropzones, 0);
} 
```

完整的工作示例在这里：http: [//jsfiddle.net/jaygiri/SRPm2/](http://jsfiddle.net/jaygiri/SRPm2/)

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T02:17:03.757

这是据我所知：

```
$ (init);
function init() {
    $(".dragzones").draggable({
        start: handleDragStart,
        cursor: 'move',
        revert: 'invalid',
        opacity: .5,
    });
    $(".dropzones").droppable({
        drop: handleDropEvent,
        tolerance: "touch",
        out: handleDropRemove
    });

    //prevents dragging to filled default droppables on start
    $(".dropzones").each(function(){
    if ($(this).html().length) { 
        $(this).addClass('taken'); 
    }
    });
}

function handleDragStart (event, ui) {} 
function handleDropRemove(event, ui) {
        //allows drop after removal
       $(this).removeClass('taken');
}      
function handleDropEvent (event, ui) {
   if ($(this).hasClass('taken')) {
       //rejects drop if full
        ui.draggable.draggable('option', 'revert', true);
    } else {
        //accepts drop if enpty
        ui.draggable.position({of: $(this), my: 'left top', at: 'left top'});
        $(this).addClass('taken');
   }
} 
```

`[**Working Demo Here**](http://jsfiddle.net/NotInUse/KhGr4/2/)`

我还在尝试解决几个问题。似乎如果光标在填充时碰到放置区的最底部，则正在调用 out 函数。我似乎无法弄清楚如何防止这种情况。

# opengl - 如何管理透视变换？

> ID：15343388
> 
> 赞同：0
> 
> 时间：2013-03-11T16:14:43.493
> 
> 标签：opengl, matrix, webgl, perspective

如何将`(x,y,z)`透视金字塔内的坐标转换`(x',y',z')`为透视立方体内的坐标？（在右手坐标系中）

我试图将这个透视矩阵与`(x,y,z)`向量相乘，但结果不是我所期望的。

![投影矩阵](../Images/be33b49e569f6a6146431033809442ed.png)

我试过了：fov=70°，aspect=4/3，near=100，far=100；x=100，y=100，z=-300；

结果是`(158.28, 211.05, -344.44)`

我想要的是这个：

![计划](../Images/f43ad5c744424339579da4ae632e6c47.png)

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:23:46.187

虽然透视矩阵通常会转换空间，以便所需的视锥体映射到规范体积（可能是单位立方体，但并非所有图形管道都相同 - 例如，D3D 与 OpenGL 不同），但该体积是用同质的（投影）坐标。这是因为实际投影是非线性变换，但使用投影坐标系允许对大部分管道使用线性变换。

因此，如果您想要 3D（或 2D）空间中的一个点，您仍然需要执行投影。

这简直就是一个分水岭。

当你将一个点 (x, y, z, 1) 乘以一个透视矩阵时，你会得到一个向量 4 (x', y', z', w')。然后您需要将 x'、y' 和 z' 除以 w' 来进行投影。

# grails - 在 Grails 2.x 中找不到名称和路径的模板

> ID：15343399
> 
> 赞同：0
> 
> 时间：2013-03-11T16:15:23.947
> 
> 标签：grails

我正在尝试在我的控制器范围之外呈现模板。

我要渲染模板的视图位于views/home/index.gsp

**编辑：**

我尝试使用我调用的标记库来渲染位于/views 中的主布局“main.gsp”中的/views/templates 中的模板“ _list - **clients.gsp** ”**和**“ **_list** **-** hubs.gsp **”**位于**/views/client**中的视图“ **list.gsp ”**

 ******这是我如何将内容标签包含到视图中：

```
<g:pageProperty name="page.client-menu"/> 
```

在这里，我在 list.gsp 的内容标记中调用 taglib：

```
<content tag="client-menu">
    <g:createClientMenu ></g:createClientMenu>
</content> 
```

这是我的标签库：

```
package com.pmedia.taglib

import com.pmedia.domain.Company

class CreateClientMenuTagLib {

def createClientMenu = {        attrs, body ->
    def company = Company.findByName("pMediaNetwork")

    out << '<ul>'
    out << '<li class="dropdown">'
    out << '<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">'
    out << 'Select Hub or Client for ' + company?.name
    out << '<b class="caret"></b>'
    out << '</a>'
    out << '<ul class="dropdown-menu pull-right">'
    if ( company?.getHubs()) {
        out << render(template:"/templates/list-hubs", collection: company.getHubs(), var:"hubs")
    }
    if ( company?.getClients()) {
        out << render(template:"/templates/list-clients", collection: company.getClients(), var:"clients")
    }
    out << '</ul>'
    out << '</li>'
    out << '</ul>'

    }
} 
```

模板位于views/templates/_list-hubs.gsp

我不断收到此错误：

```
URI
/newLayout/home/index

Class
org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException

Message
Template not found for name [templates/list-hubs] and path [/home/templates/_list-hubs.gsp] 
```

当我用“/”引导 URL 时，我希望 grails 开始在视图文件夹中查找，但由于某些原因找不到模板。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:34:52.413

最后我发现了错误。我递归地调用了模板。在我的一个模板中，路径不正确......抱歉为这样一个愚蠢的错误而烦恼。下次我在 stackoverflow 上发布错误时，我会确保发布所有涉及的代码。无论如何感谢所有帮助过的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:52:35.273

如果我的猜测是正确的，你需要把它放到`/templates`,`/grails-app/views`而不是放到`/grails-app/views/layout/views`.

我测试了你的代码很长一段时间，但没有得到错误。实际上我删除了

```
<g:pageProperty name="page.client-menu"/> 
```

和

```
<content tag="client-menu"> 
```

并保持

```
<g:createClientMenu ></g:createClientMenu> 
```

，代码可以正常工作。

当我再次仔细阅读您的问题帖子时，我注意到了这一点：

> ...模板“_list-clients.gsp”和“_list-hubs.gsp”都**位于我的主布局中的/views/templates中** “main.gsp”位于/views ...

所以我试着把 to `_list-clients.gsp`，`/layout/views/templates`错误重现。这就是为什么我猜你将`template`文件夹放在与 taglib 不一致的路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:26:55.087

尝试`/views`从行中删除前缀`out << render(template:"...", ...)`。******

# itextsharp - 使用 iText 填充文本字段背景

> ID：15343400
> 
> 赞同：1
> 
> 时间：2013-03-11T16:15:28.097
> 
> 标签：itextsharp

我正在尝试使用 iText 填充文本字段的颜色。我尝试过 setfieldproperty，但它不适用于 bgcolor 或填充颜色属性。我正在寻找的是要设置的文本字段的属性，因为它将覆盖现有的文本或图像

最后我尝试了这两个案例..

```
 ' Create a new PDF reader based on the PDF template document
    Dim pdfReaderBG As PdfReader = New PdfReader(pdfTemplate) ' Page of Fields
    Dim pdfReaderFG As PdfReader = New PdfReader(pdfExisting) ' Image from CD Image

    'Create the stream for the new PDF Document with the BackGround PDf
    Dim writer As PdfStamper = New PdfStamper(pdfReaderBG, New FileStream("c:\temp\CDs\newMerge.pdf", FileMode.Create))

    'Get all the content of the page
    Dim content_Byte As PdfContentByte = writer.GetUnderContent(1)

    'Then get the Other PDF to overlay the other
    Dim mark_page As PdfImportedPage = writer.GetImportedPage(pdfReaderFG, 1)

    If (mark_page.Width > mark_page.Height) Then 'Check to see if it is in Landscape
        content_Byte.AddTemplate(mark_page, 0, -1, 1, 0, 0, mark_page.Width)
    Else
        'Then add the content to the new page over the Image
        content_Byte.AddTemplate(mark_page, 0, 0)
    End If

    Dim formFields As AcroFields = writer.AcroFields

    formFields.SetFieldProperty("cd28", "borderColor", BaseColor.GREEN, Nothing)
    'content_Byte.te(BaseColor.PINK)

    **formFields.SetFieldProperty("cd28", "backgroundcolor", BaseColor.YELLOW, Nothing)
    'formFields.setfieldproperty("cd28") ' SetFieldProperty("cd28", "bgColor", BaseColor.WHITE, Nothing)** 
```

我只想更改一个文本字段背景的颜色

当您手动编辑文档中的文本字段时。属性的外观选项卡。它具有填充颜色和边框颜色的属性我可以做边框颜色..我似乎无法在代码中做填充颜色属性..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:01:38.487

背景颜色存储在 MK 键下的表单字段的显示小部件中（PDF Spec 12.5.6.19）

下面是以两种不同方式设置背景颜色的示例代码。第一个块创建一个全新的 PDF 并直接向其中添加一个表单域。以这种方式完成后，您只需在`MKBackgroundColor`上设置属性即可`FormField`。第二个块编辑第一个块的 PDF，获取命名字段，创建一个新字典，为其添加颜色并将其分配给字段的小部件（销毁过程中任何现有的 MK 条目）。

第一个代码块是更简单的路线。有关更多信息，请参阅代码中的注释。

```
 ''//File to output
    Dim TestFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test.pdf")
    Dim Test2File = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test2.pdf")

    ''//Standard iTextSharp setup, nothing special
    Using FS As New FileStream(TestFile, FileMode.Create, FileAccess.Write, FileShare.None)
        Using Doc As New Document()
            Using writer = PdfWriter.GetInstance(Doc, FS)
                Doc.Open()

                ''//Add a generic paragraph
                Doc.Add(New Paragraph("Hello"))

                ''//Create our text field
                Dim TF As New iTextSharp.text.pdf.TextField(writer, New Rectangle(50, 650, 250, 600), "FirstName")

                ''//Get the raw form field
                Dim FF = TF.GetTextField()

                ''//Sat the background color
                FF.MKBackgroundColor = BaseColor.RED

                ''//Add it to the document
                writer.AddAnnotation(FF)
                Doc.Close()
            End Using
        End Using
    End Using

    ''//Read the file above
    Dim R As New PdfReader(TestFile)
    ''//Create a new output file
    Using FS As New FileStream(Test2File, FileMode.Create, FileAccess.Write, FileShare.None)
        ''//Bind a stamper
        Using stamper As New PdfStamper(R, FS)

            ''//Get all of the fields
            Dim Fields = stamper.AcroFields.Fields

            ''//Get our specific field created above
            Dim FF = stamper.AcroFields.GetFieldItem("FirstName")

            ''//Color to use for the background
            Dim ColorBase = BaseColor.GREEN

            ''//The background color is a part of the display widget's MK property
            ''//This example is going to erase any existing ones and just create a new one
            Dim NewMK As New PdfDictionary(PdfName.MK)
            ''//Put our backgroun and the RGB values into the MK dictionary
            NewMK.Put(PdfName.BG, New PdfArray({ColorBase.R, ColorBase.G, ColorBase.B}))

            ''//Get the actual widget for the field
            Dim W = FF.GetWidget(0)
            ''//Set the MK value
            W.Put(PdfName.MK, NewMK)

            ''//Save and close
            stamper.Close()
        End Using
    End Using 
```

# entity-framework - MVC 4 中的实体框架 - 包括返回错误结果

> ID：15343402
> 
> 赞同：0
> 
> 时间：2013-03-11T16:15:36.013
> 
> 标签：entity-framework, asp.net-mvc-4, include

我有两张桌子：

**产品：**
ProductID、ProductName

**化合物：**

CompoundID、ComponentID、数量

绑定为下一个：

1 产品。**ProductID** --> 许多化合物。**化合物 ID**

1 产品。**ProductID** --> 许多化合物。**组件ID**

Products 项目可以是一个化合物、一个组件或两者兼而有之。

我需要一个视图为每个化合物返回其组件名称和数量。

MyController 方法：

```
public ActionResult CompoundProduct()
    {
        var Compounds = db.Compounds.Include(s => s.Products);
        return View(Compounds.ToList());
    } 
```

MyView 代码：@model IEnumerable

```
<table>
@foreach (var item in Model) 
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.CompoundID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ComponentID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Products.ProductName)
        </td>
    </tr>
}
</table> 
```

使用这种方法，我得到一个重复的化合物名称列表，而不是每个化合物的不同组件名称，如下图所示： ![在此处输入图像描述](../Images/b98ddba81208e2411147e497c1c22c27.png)

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:56:34.737

当您从数据库创建模型时，EF 应该已经创建了**两个**导航属性`Products`并`Products1`与两个外键`CompoundID`和`ComponentID`. 您可能使用了属于 的错误导航属性，而`CompoundID`不是属于 的导航属性`ComponentID`。而不是`Products`尝试`Products1`在`Include`...中使用

```
var Compounds = db.Compounds.Include(s => s.Products1); 
```

...在视图中：

```
@Html.DisplayFor(modelItem => item.Products1.ProductName) 
```

# php - 模型参数设置最佳实践？

> ID：15343404
> 
> 赞同：4
> 
> 时间：2013-03-11T16:15:38.007
> 
> 标签：php, codeigniter

我有一个模型在 SQL 中运行带有一堆条件的查询。因此，模型需要接受很多参数，即：

```
this->model_name->method($param1, $param2, ... ) 
```

在模型方面，我通常将其设置为

```
function method($param1 = NULL, $param2 = NULL, ... ) 
```

这些参数中的每一个都是可选的，并且用例会因应用程序而异。所以我的问题是：在什么时候（如果有的话）开始通过数组将这些参数传递给方法是有意义的，例如：

```
$params = [
'param1' => 'whatever',
'param2' => 'whatever',
...
]

this->model_name->method($params) 
```

我认为最终目标是更简洁的代码和更少的实例，`method(null, null, null, null, $param)`除非这是一件可以做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:32:59.583

大多数答案都支持数组方法（一般来说，我也会同意），但我会扮演魔鬼的拥护者并列出一些负面因素：

**文档不太清楚**

大多数记录函数/方法的方法将单独列出该函数的参数。例如，具有基本[DocBlock](http://www.phpdoc.org/docs/latest/for-users/phpdoc/basic-syntax.html#what-is-a-docblock)的函数将如下所示：

```
/**
 * A function that accepts an array of params
 * @param array $param_array An array of key=>value arguments
 */
function accept_array($param_array = array('key1' => 'first_val', 'key2' => 'second_val')) {

    var_dump($param_array);

} 
```

请注意 DocBlock 如何不直接支持 的各个部分，而`$param_array`仅支持整个数组。相反，单独列出所有参数看起来像这样：

```
/**
 * A function that 'normal' params
 * @param string $key1 First argument
 * @param string $key2 Second argument
 */
function accept_normal($key1 = 'first_val', $key2 = 'second_val') {

    echo $key1;
    echo $key2;

} 
```

如果您希望您的函数是相当自记录的，这也是一个问题，因为在第一个示例中，您实际上不需要在函数本身中列出您预期的参数。

* * *

**默认值可能无法按预期工作**

“如预期”可能是一个加载短语（这可能是更明显的问题之一），但采取以下措施：

```
function accept_array($param_array = array('key1' => 'first_val', 'key2' => 'second_val')) {

    var_dump($param_array);

}

accept_array(array('key2' => 'a_different_val')); 
```

有些人可能希望 var_dump 包含 的默认值`key1`和 的新值`key2`，但是*整个数组被替换了*，这意味着您需要记住在每个函数中手动为每个键设置默认值，如下所示：

```
function accept_array($param_array = array()) {

    if (!isset($param_array['key1'])) { $param_array['key1'] = 'first_val'; }
    if (!isset($param_array['key2'])) { $param_array['key2'] = 'second_val'; }

    var_dump($param_array);

}

accept_array(array('key2' => 'a_different_val')); 
```

* * *

**没有自动过滤**

以“正常”方式列出参数还为您提供了一组内置过滤器。以这个快速而肮脏的用户搜索为例：

```
/**
 * We want to allow searching for users by user_id or email only!
 * @param array $param_array
 */
function find_user($param_array = array('user_id' => 0, 'email' => '')) {

    foreach ($param_array as $field => $value) {
        $this->db->or_where($field, $value);
    }

    $this->db->get('users');

}

find_user(array('first_name' => 'Joe', 'last_name' => 'Bloggs')); 
```

无需在 上手动添加一些“接受的键”类型验证，对该函数`$param_array`的调用基本上可以使用它喜欢的任何字段。`find_user()`更简单的版本显然是这样的：

```
/**
 * We want to allow searching for users by user_id or email only!
 * @param int $user_id
 * @param string $email
 */
function find_user($user_id = 0, $email = '') {

    $this->db->or_where('user_id', $user_id);
    $this->db->or_where('email', $email);

    $this->db->get('users');

}

// No way for me to submit any other fields, they'll just fail when they get to the query
find_user('Joe', 'Bloggs')); 
```

* * *

我接受其中一些有点入门级，可能还有更多我错过了（请随意发表评论，我会用信用将它们复制到回复中），但希望那里足以让人们三思而后行自动使用“数组方法”，无需考虑手动验证和文档等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:32:06.570

传递参数数组为自记录代码提供了更好的选择。

当我使用许多参数时，我经常发现自己使用的样式如下：

```
// do_something_model($enable_option1,$enable_option2,$enable_option3) 
   do_something_model(FALSE,          TRUE,           FALSE) 
```

我在其中带有参数名称的注释行，以提醒自己我是如何使用模型的。

在这种情况下，使用具有有意义命名键的数组提供了有用的助记符。

最近，我也在使用更多的包装函数。例如，我可能有我的基本模型方法确实从表中获取我的所有数据，并且此方法将有几个选项。

然后，我定义了一个新方法来执行特定任务，然后使用正确的选项调用其中的基本方法。

**脚注**
我发现，如果我的方法有“太多选择”，最好重新考虑方法的目的，并将其分解为两个或多个更易于使用的专门方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:28:15.027

我也会推荐阵列版本。Symfony2 也大量使用这种模式，例如在渲染模板、创建表单类和创建一般的 http 响应中。您只需确保清楚地记录所有可能的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:28:45.700

你可以走任何一条路，但数组肯定会让你的方法更干净。将参数作为数组传递是非常有意义的。

# parsing - 在shell中搜索路径的最佳方法

> ID：15343407
> 
> 赞同：1
> 
> 时间：2013-03-11T16:15:45.663
> 
> 标签：parsing, shell

我有一个名为“onewhich”的小脚本。它的目的是表现得像`which`，除了它只会第一次出现指定为选项的任何可执行文件，按照它们在路径中出现的顺序找到。

例如，如果我的路径是`/opt/bin:/usr/bin:/bin`，并且我同时拥有`/opt/bin/runme`和`/usr/bin/runme`，那么命令`onewhich runme`将返回`/opt/bin/runme`。

但是，如果我也有一个`/usr/bin/doit`，那么该命令`onewhich doit runme`将返回`/usr/bin/doit`。

这个想法是遍历路径，检查指定的每个可执行文件，如果存在，则显示并退出。

这是到目前为止的脚本。

```
#!/bin/sh

for what in "$@"; do
  for loc in `echo "${PATH}" | awk -vRS=: 1`; do
    if [ -f "${loc}/${what}" ]; then
      echo "${loc}/${what}"
      exit 0
    fi
  done
done

exit 1 
```

问题是，我想更好地处理带有特殊字符的 PATH 目录。StackOverflow 上的每一个 shell 问题都在谈论使用 awk 和 sed 等工具解析路径有多糟糕。甚至还有一个关于它的[bash 常见问题解答条目](http://mywiki.wooledge.org/ParsingLs)。（附带条件：我没有为此使用 bash，但该建议仍然有效。）

所以我尝试重写脚本以分隔管道中的路径，就像这样“

```
#!/bin/sh

for what in "$@"; do
  echo "${PATH}" | awk -vRS=: 1 | while read loc ; do
    if [ -f "${loc}/${what}" ]; then
      echo "${loc}/${what}"
      exit 0
    fi
  done
done

exit 1 
```

我不确定这是否给了我任何真正的优势（因为`$loc`仍在引号内），但它也*不起作用*，因为由于某种原因，`exit 0`似乎被忽略了。或者......它退出*了某些东西*（可能是带有终止管道的while循环的子shell），但脚本以`1`每次的值退出。

有什么更好的方法来逐步浏览目录`${PATH}`而不会有特殊字符混淆事物的风险？

或者，我是在重新发明轮子吗？是否有一种方法可以内置到现有的 shell 工具中？

这需要在 Linux 和 FreeBSD 中运行，这就是为什么我用 Bourne 而不是 bash 编写它的原因。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T13:56:38.473

另一种完全解决解析需求的方法`PATH`是在具有剥离环境的新 shell 中运行内置`type`命令（即根本没有要查找的函数或别名；参见`env -i sh -c 'type cmd 2>/dev/null`）。

```
# using `cmd` instead of $(cmd) for portability
onewhich() {
  ec=0  # exit code
  for cmd in "$@"; do
    command -p env -i PATH="$PATH" sh -c '
      export LC_ALL=C LANG=C
      cmd="$1"
      path="`type "$cmd" 2>/dev/null`"
      if [ X"$path" = "X" ]; then
        printf "%s\n" "error: command \"${cmd}\" not found in PATH" 1>&2
        exit 1
      else
        case "$path" in
          *\ /*)
            path="/${path#*/}"
            printf "%s\n" "$path";;
          *)
            printf "%s\n" "error: no disk file: $path" 1>&2
            exit 1;;
        esac
        exit 0
      fi
    ' _ "$cmd"
    [ $? != 0 ] && ec=1
  done
  [ $ec != 0 ] && return 1
}

onewhich awk ls sed
onewhich builtin 
onewhich if 
```

`which`如果将两个命令指定为参数，则成功时会返回两个完整的命令路径，因此`exit 0`在上面的第一个`onewhich`脚本中会过早地中止程序。此外，如果将两个命令指定为 的参数，则即使只有一个命令查找失败（参见） ，也会`which`将退出代码`which`设置为。为了模仿命令的这种行为，有必要打开/关闭两个变量（及以下）。`1``which awk sedxyz ls; echo $?``which``cnt``nomatches`

```
onewhich() (
   IFS=":"
   nomatches=0
   for cmd in "$@"; do
      cnt=0
      for loc in $PATH  ; do
         if [ $cnt = 0 ] && [ -x "$loc"/"$cmd" ]; then
            echo "$loc"/"$cmd"
            cnt=1
         fi
      done
      [ $cnt = 0 ] && nomatches=1
   done
   [ $nomatches = 1 ] && exit 1 || exit 0  # exit 1: at least one cmd was not in PATH
)

onewhich awk ls sed
onewhich awk lsxyz sed
onewhich builtin 
onewhich if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:36:34.553

在我看来，您的第一种方法似乎应该有效。实际上，如果它真的是`$PATH`您要搜索的内容，那么您不太可能在目录中嵌入空格和换行符。如果你这样做了，那么可能是重构的时候了。

但是，我认为您不会面临坏名可能破坏您的循环的*风险*，因为您将变量包装在引号中。在最坏的情况下，我怀疑您可能会错过奇怪的有效可执行文件，但我看不出脚本会如何产生错误。（我看不出*脚本*会如何遗漏有效的可执行文件，而且我还没有测试过——我只是说乍一看我没有发现问题。）

至于你的第二个问题，关于循环，我认为你已经一针见血了。当您运行类似的管道`this | that | while condition; do things; done`时，while 循环在管道末端的自己的外壳中运行。退出该 shell 可能会终止管道的操作，但这只会让您回到父 shell，它有自己的执行线程，以`exit 1`.

至于更好的方法，我会考虑`which`.

```
#!/bin/sh

for what in "$@"; do
  which "$what"
done | head -1 
```

如果你真的想要退出值：

```
#!/bin/sh

for what in "$@"; do
  which "$what" && exit 0
done

exit 1 
```

第二个甚至可能更少的资源，因为它不必打开文件句柄和管道通过`head`.

您还可以使用`IFS`. 例如，如果你想用另一种方式包装你的循环，你可以这样做：

```
#!/bin/sh

IFS=":"

for loc in $PATH; do
  for what in "$@"; do
    if [ -x "$loc"/"$what" ]; then
      echo "$loc"/"$what"
      exit 0
    fi
  done
done

exit 1 
```

请注意，在正常情况下，您可能希望保存 的旧值`$IFS`，但您似乎是在独立脚本中执行操作，因此脚本退出时会丢弃“新”值。

以上所有代码均未经测试。YMMV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T17:18:14.020

这并不能直接回答您的问题，但确实消除了解析的需要`PATH`：

```
onewhich () {
    for what in "$@"; do
        which "$what" 2>/dev/null && break
    done
} 
```

这只是调用`which`输入列表中的每个命令，直到找到匹配项。

* * *

要解析`PATH`，您可以简单地设置 `IFS=':'。

```
if [ "${IFS:-x}" = "${IFS-x}" ]; then
    # Only preserve the value of IFS if it is currently set
    OLDIFS=$IFS
fi
IFS=":"
for f in $PATH; do  # Do not quote $PATH, to allow word splitting
    echo $f
done
if [ "${OLDIFS:-x}" = "${OLDIFS-x}" ]; then
    IFS=$OLDIFS
fi 
```

`PATH`如果其中的任何目录实际上包含冒号，则上述操作将失败。

# sql-server - how to set SSRS Report parameters to be optional i.e Non-Mandatory field in SSRS 2005

> ID：15343417
> 
> 赞同：11
> 
> 时间：2013-03-11T16:16:26.763
> 
> 标签：sql-server, reporting-services, ssrs-2008, reportingservices-2005

Please help me to set the SSRS Report parameters to be optional i.e Non-Mandatory field in SSRS 2005.

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T22:29:29.420

Set the parameter to 'Allow null value' under General section. Null according to SSRS means it does not have to be set, thus making it optional.

Then post something like this in the predicate of your SQL syntax:

```
Where column = isnull(@Variable, column) 
```

This lets the dataset know that if the variable is set then use it, else have an operator to have the value equal itself. I am certain this works in SSRS 2008 and 2012, not sure of 2005 but I would assume it may be there.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T16:49:46.663

As Hiten suggested there is nothing exactly we can call as optional parameters but if you want users to see this parameter as optional, use formula or case statements.

[Parameterized stored procedures with some defaults or null value](http://web.archive.org/web/20150701024458/http://egiardina.bloggingabout.net/2007/06/26/sql-server-reporting-services-optional-parameters/) can be used to achieve the same goal.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-28T21:11:43.463

Further to djangojazz (dig the name, btw) - If the dataset is based on a SharePoint list (which doesn't support Query parameters, afaik), you can use the following formula in the Value box of the Filters section of the Properties dialog in whichever data region (e.g. Tablix) is invoking the parameter:

`=IIf(IsNothing(Parameters!myParam.Value),Fields!myField.Value,Parameters!myParam.Value)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-31T11:13:41.197

Neither of these answers helped, nevertheless I [found the solution here](http://blogs.msdn.com/b/axsupport/archive/2012/11/20/quot-parameter-is-missing-a-value-quot-error-running-a-customized-report-in-microsoft-dynamics-ax-2012.aspx):

> 1.  Open the report for editing in Visual Studio.
> 2.  Expand the **Parameters** node and rename the affected parameter to ParameterName**1**.
> 3.  Set **AllowBlank** and **Nullable** to **True** if not already set.
> 4.  Deploy the report.
> 5.  Rename the parameter back to ParameterName.
> 6.  Deploy the report.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-26T22:34:21.100

After adding a parameter to your report and checking 'Allow Null Value',you can then add a filter to the dataset where the below expression is added to the value field for the filter

```
=IIf(IsNothing(Parameters!Param.Value),Fields!Field.Value,Parameters!Param.Value) 
```

# c# - 从 Silverlight 中托管的 WebBrowser 从 javascript 调用 C# 方法

> ID：15343418
> 
> 赞同：-2
> 
> 时间：2013-03-11T16:16:27.717
> 
> 标签：c#, silverlight, silverlight-oob

在我的 Silverlight 应用程序中，我有一个`WebBrowser`显示随机 HTML 内容的组件。

我想从那里调用 C# 方法（例如，当我单击 [a href...] 链接时）。

编辑[添加详细信息]：

我将尝试澄清我的问题，对于最初的问题很抱歉：

在我的 XAML 文件中，我有我的 webbrowser 组件：

```
<WebBrowser  x:Name="HtmlMail" Grid.Row="1" Visibility="{Binding Visibility}" /> 
```

在后面的代码中，我有一个在网络浏览器中加载 HTML 的方法（HTML 来自外部源）：

```
void _viewModel_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
string encoded = SilverMUT.Common.Tools.CString.ToHtml(_viewModel.MailSelected.Message);
HtmlMail.NavigateToString(encoded);
} 
```

我想做的是例如在 html 视图中添加一个按钮（这部分没问题），并且单击该按钮会触发一个 C# 函数。

编辑：如果我可以从 WebBrowser 中捕获对链接的点击并在后面的代码中处理它们，这也可以

我尝试过： System.Windows.Navigation.LoadCompletedEventHandler 但无法使其工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:05:43.003

我使用了以下代码：

> WebBrowser.ScriptNotify += new EventHandler(WebBrowser_ScriptNotify);

在我添加的javascript中：

> window.external.notify（参数）；

谢谢@musefan！

# c - 无效的左值 - if 中的布尔值

> ID：15343419
> 
> 赞同：0
> 
> 时间：2013-03-11T16:16:32.390
> 
> 标签：c

我正在尝试为我的 c 程序破解一个主要测试。不幸的是，我真的遇到了问题并陷入困境。

使用这个表达式：

这是我的完整代码

```
int prim(int x)
{
 int i,j;
 for(i=x;i>0;i--)
 {
  if(x%i==0 && i=!x)
  {
   printf("%i no prime %i",x);
  }
 }
} 
```

给我这个错误： 10 D:\C\L2\main.c invalid lvalue in assignment

我不明白为什么会这样。有帮手吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:18:00.853

是的，你把运营商搞混了。

尝试这个：

```
if((x%i) == 0 && i != x) 
```

括号将确保先执行模数，然后再将其与`==`( `==`=> 比较，`=`=> 分配)

一点解释：

首先，您使用了赋值运算符（单个 =）。这意味着，您告诉计算机取 '0' 的值并将其分配给 x%i。但是，x%i 不是一个变量，而是一个方程。这就是您的编译器所抱怨的。'无效的左值' -> '无法分配给等式标记左侧的值'。在另一个错误中，您混淆了事物的顺序。这 '！' 标记的意思是“不”。所以它是 i NOT EQUAL x。你写的是：i EQUAL NOT x。这实际上可能有效，但很可能不会给你想要的结果。（因为 NOT 变量将其反转）。

`invert`在这种情况下，这意味着它需要数字中的每个 1 和每个 0 并切换它们。假设您有 1000 0001（无符号字符），则反转后将是 0111 1110。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:17:49.033

根据您的完整代码，问题是：

1）错误：你有你的`!=`倒退。这不一样`=!`

```
if(x%i==0 && i!=x)  // this is correct 
```

2）警告：你告诉 printf 你想打印两个变量，但你只给它一个：

```
printf("%i no prime",x);  // this is correct 
```

3) 警告：您已将函数标记为返回一个 int，但它什么也不返回：

```
void prim(int x)  // this is correct 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T16:17:53.413

```
if(x%i=0 && i=!x) 
```

你要：

```
if (((x % i) == 0) && (i != x)) 
```

其他一些事情：

您测试一个是否是除数，它总是如此。

为什么一开始`x`只需要测试呢？为什么不开始循环`x-1`并摆脱一半的测试`if`？

你说`prim`返回一个`int`，但它没有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T16:17:39.337

平常的那一个。您在条件中有分配，而不是相等检查。

试试这个：

```
if(x%i == 0 && i!=x) 
```

此外，即使它们是多余的，我也会使用更多的括号（这对我很有帮助）

```
if( (x%i == 0) && (i!=x) ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T16:18:00.783

仔细检查您的代码。你有`x%1 = 0`什么时候应该`==`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T16:18:04.600

`if(x%i==0 && i!=x)`用这个

`=`是赋值运算符并且`==`是比较运算符

并替换`=!`为`!=`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-11T16:18:24.660

这里有几个问题。

1.  在 C`==`中用于相等性检查，但您使用`=`的是分配。
2.  不等式（不等于）`!=`不是`=!`

因此代码应该是

```
if (x % i == 0 && i != x) { 

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T10:43:37.357

```
int prim(int x)
{
 int i,j;
 for(i=x;i>0;i--)
 {
  if(x%i==0 && i=!x)
  {
   printf("%i no prime %i",x);  // Error 1
  }
 }
} 
```

（错误 1：您试图用一个变量 x.. 打印两个整数值。

给 %i 另一个 x 或从 printf 语句中删除 %i。）

# jpa - 带有容器管理事务的 EclipseLink - persist() 不提交

> ID：15343425
> 
> 赞同：0
> 
> 时间：2013-03-11T16:17:02.653
> 
> 标签：jpa, eclipselink, weblogic-10.x

我正在使用带有 WebLogic 10.3.5 容器管理事务的 EclipseLink 2.1.3 与 Oracle 11g DB 交互。

我可以毫无问题地选择数据，但无法持久化实体。

日志中没有引发异常或错误，但没有数据提交到 ANNOUNCEMENT_DELIVERY_LOG 表。

AnnouncementDeliveryLog 实体与 Announcement 实体具有 @ManyToOne 关系。我首先检索一个现有的 Announcement Entity，然后根据查询结果创建一个 AnnouncementDeliveryLog Entity，将这两个 Entities 关联，并持久化。

任何关于我做错了什么或如何从 WebLogic 上的 EclipseLink 获取更多日志信息的建议都将不胜感激。

## AnnouncementDeliveryLog 实体：

```
@Entity
@Table(name = "ANNOUNCEMENT_DELIVERY_LOG")
public class AnnouncementDeliveryLog implements Serializable {

    @Id
    @Column(nullable = false)
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="ANNOUNCEMENT_DELIVERY_LOG_SEQ")
    @SequenceGenerator(name="ANNOUNCEMENT_DELIVERY_LOG_SEQ", sequenceName="ANNOUNCEMENT_DELIVERY_LOG_SEQ")
    private BigDecimal id;
    @Column(name = "RECIPIENT_ADDRESS ", nullable = false, unique = true, length = 240)
    private String recipientAddress;
    @ManyToOne
    @JoinColumn(name = "ANNOUNCEMENT_ID ")
    private Announcements announcement;
} 
```

## 公告实体：

```
@Entity
@Table(name = "ANNOUNCEMENTS")
public class Announcements implements Serializable {
    @Id
    @Column(nullable = false)
    private BigDecimal id;
    @OneToMany(mappedBy = "announcement")
    private List<AnnouncementDeliveryLog> announcementDeliveryLogList;
} 
```

## 会话外观 SLSB 执行事务：

```
@Stateless(name = "DeliveryEngineSessionFacade",
           mappedName = "Announcements-JMSDeliveryEngine-DeliveryEngineSessionFacade")
public class DeliveryEngineSessionFacadeBean implements DeliveryEngineSessionFacadeLocal {
    @Resource
    SessionContext sessionContext;
    @PersistenceContext(unitName = "JMSDeliveryEnginePersistenceUnit")
    private EntityManager em;

    private List<AnnouncementDeliveryLog> createNormalizedEmailADLsForAnnouncement(int announcementId) {
        List<Object[]> rawResultList;
        ArrayList<AnnouncementDeliveryLog> typedResultList = new ArrayList<AnnouncementDeliveryLog>();

        Query query =
            em.createNamedQuery(AnnouncementDeliveryLog.FIND_NORMALIZED_RECIPIENTS_FOR_ANNOUNCEMENT);
        query.setParameter(1, announcementId);
        rawResultList = query.getResultList();

        for (Object[] resultElement : rawResultList) {
            AnnouncementDeliveryLog adl = new AnnouncementDeliveryLog(getAnnouncementById(announcementId), (String)resultElement[1], (String)resultElement[2], "TO_SEND");
            adl = persistAnnouncementDeliveryLog(adl);
            typedResultList.add(adl);
        }

        return typedResultList;
    }

public AnnouncementDeliveryLog persistAnnouncementDeliveryLog(AnnouncementDeliveryLog announcementDeliveryLog) {
    em.persist(announcementDeliveryLog);
    return announcementDeliveryLog;
}

public Announcements getAnnouncementById(int announcementId) {
    Query query = em.createNamedQuery(Announcements.FIND_BY_ID);
    query.setParameter("id", announcementId);
    return (Announcements)query.getSingleResult();
}

} 
```

## SLSB 调用会话外观：

```
@Stateless(name = "RecipientsPopulationTimer",
           mappedName = "Announcements-AnnouncementDeliveryEngine-RecipientsPopulationTimer")
@Local({RecipientsPopulationTimerLocal.class})
public class RecipientsPopulationTimerBean implements RecipientsPopulationTimerLocal {
    @EJB
    DeliveryEngineSessionFacadeLocal sessionFacade;
} 
```

## 持久性.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
    <persistence-unit name="JMSDeliveryEnginePersistenceUnit">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/announcementsDS</jta-data-source>
        <class>announcements.deliveryengine.jpa.entities.AnnEmailRecipientsFlattened</class>
        <class>announcements.deliveryengine.jpa.entities.AnnImRecipientsFlattened</class>
        <class>announcements.deliveryengine.jpa.entities.AnnouncementDeliveryLog</class>
        <class>announcements.deliveryengine.jpa.entities.Announcements</class>
        <class>announcements.deliveryengine.jpa.entities.AnnouncementRecipients</class>
        <class>announcements.deliveryengine.jpa.entities.AnnouncementRecipientsFlattenedId</class>
        <properties>
            <property name="eclipselink.target-server" value="WebLogic 10"/>
            <property name="eclipselink.logging.level" value="FINE"/>
            <property name="eclipselink.logging.exceptions" value="true"/>
            <property name="eclipselink.logging.timestamp" value="true"/>
            <property name="eclipselink.logging.thread" value="true"/>
            <property name="eclipselink.logging.session" value="true"/>
            <property name="eclipselink.logging.level.sql" value="FINE"/>
            <property name="eclipselink.logging.parameters" value="true"/>
            <property name="eclipselink.target-database" value="Oracle11"/>
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:32:12.877

RecipientsPopulationTimerBean 被一个有超时的组件调用。

这意味着 EJB 事务被回滚，因为 DB 事务花费了太长时间。

设置`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`适当的 DB 事务方法可防止 EJB 超时和关联的 DB 回滚。

# php - 在 MySQL 中将网站帖子从 BBCode 转换为 HTML

> ID：15343426
> 
> 赞同：0
> 
> 时间：2013-03-11T16:17:03.790
> 
> 标签：php, html, mysql, bbcode

所以我正在将一个站点从 Xoops 迁移到 Wordpress。我已经想出了如何将我的帖子和类别放在 Wordpress 数据库中，但现在我遇到了问题。本站所有帖子均使用BBCode编辑，文章所在字段均带有BBCode标签等。我必须将该内容转换为 HTML 格式。我找到了一个 php 脚本来转换文本，但是我有 500 多篇大文章，所以我正在考虑在查询中选择所有这些并调用 PHP 脚本来进行转换，获取返回并更新字段. 但我不太清楚该怎么做。我尝试了一些没有成功的事情。我可以调用 PHP scipt 并让它返回来更新我的表吗？

谢谢！

# email - 将电子邮件注入另一个用户的 procmail

> ID：15343427
> 
> 赞同：0
> 
> 时间：2013-03-11T16:17:05.943
> 
> 标签：email, procmail

我使用第二个帐户来存档邮件列表，并通过 pop3 远程提供我的商务电子邮件。我现在使用复制到第二个电子邮件地址的 procmail 规则。这样做会导致电子邮件被病毒、垃圾邮件和其他已经通过邮件的过滤器重新处理。我正在寻找一种将消息复制到使用第二个帐户的凭据和 procmail 配置文件运行的第二个 procmail 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:00:13.463

您可以通过在转发到另一个帐户之前添加一个秘密标签来协调这两个帐户。此标志的存在将导致绕过病毒等检查。显然，任何知道秘密标签的人都可以绕过安全检查！

```
# Primary account forwards to pop3@example.com
:0c
| formail -I"X-Secret: xyzzy" | sendmail -oi pop3@example.com 
```

然后对于辅助帐户，就在顶部`.procmailrc`，

```
# Bypass virus checking if X-Secret is there
:0
* ^X-Secret: xyzzy$
$DEFAULT 
```

这是一个概念证明，而不是我特别推荐的设置。无论如何，在比个人用户`.procmailrc`文件更高的级别进行病毒和垃圾邮件检查可能是一种更好的整体方法。

# symfony - 资产和过滤器第 2 部分：明星角色

> ID：15343428
> 
> 赞同：0
> 
> 时间：2013-03-11T16:17:07.597
> 
> 标签：symfony, assetic

我有 2 个 css 文件`myBundle/Resources/public/css`和 1 个 css 文件`myBundle/Resources/public/JQMenu/css`

在我的模板中，我这样称呼那些 css：

```
{% stylesheets 
    '@myBundle/Resources/public/css/*'
    '@myBundle/Resources/public/JQMenu/css/*'
    filter='cssembed'
%} 
```

所以我想象星号的意思是：所有的css。

但最后只加载了 2 个 css，第二个有名称，`JQMenu`但第二个 css 的内容在`public/css`......奇怪吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:17:19.387

您是否尝试过指定输出文件？基于您的原始问题的更完整的代码示例：

```
{% stylesheets output='css/combined.css'
    '@myBundle/Resources/public/css/*'
    '@myBundle/Resources/public/JQMenu/css/*'
    filter='cssembed'
%}
<link href="{{ asset_url }}" rel="stylesheet" />
{% endstylesheets %} 
```

运行常用命令后，这会将组合输出转储到您的 web/css 文件夹中：

```
php app/console cache:clear
php app/console assetic:dump 
```

当您在开发模式下转储资产时（默认情况下），您应该看到组合的 css 文件及其组成部分（示例文件名）：

```
combined.css
combined_main_1.css
combined_other_2.css
combined_jqmenu_3.css 
```

这个输出加上对 combine.css 文件的手动检查应该很快告诉我们您的所有 CSS 文件现在是否都被正确包含。

# python - Python 的 OpenCV cv2.imread 总是返回 None 并且 cvFeatDetector 崩溃 python

> ID：15343431
> 
> 赞同：11
> 
> 时间：2013-03-11T16:17:15.033
> 
> 标签：python, opencv

我在 python 中用 opencv 弄湿了我的脚，我认为一个好的起点是加载图像。

我已经在我的系统上构建了 opencv，并且在与我的项目相关的目录 tpl/opencv 中有 python 绑定和 opencv dll。

这是一些演示问题的代码：

```
from tpl.opencv import cv2
from tpl.opencv.cv2 import cv
from PIL import Image

pil_img =  Image.open('C:/test_file.jpg') #Read a temp file, the input is actually a computed image chip
tmpname =  'C:/tmp.png' 
pil_img.save(tmpname,'PNG') # Write the image chip to disk

im  = cv.LoadImage(tmpname) # This seems to work
im2 = cv2.imread(tmpname)   # This always returns None 
```

没有错误消息，im2 总是无。我在导入 opencv 的方式上是否搞砸了？有简单的解决方法吗？

当我创建

```
 cvFeatDetector  = cv2.FeatureDetector_create("MSER") 
```

我明白了，所以 cv2 的一部分似乎可以工作

* * *

作为一种解决方法，我刚刚用 numpy 加载了图像

```
 im2 = numpy.imread(inname)
        im  = cv2.cvtColor(im2, cv2.COLOR_BGR2GRAY) # This works. I was able to imshow it too
        cvFeatDetector  = cv2.FeatureDetector_create("MSER") # Seems to produce a valid object
        cvFeatExtractor = cv2.DescriptorExtractor_create("SIFT") # Seems to produce a valid object
        kpts         = cvFeatDetector.detect(im)  # Crashes python 
```

我觉得这很奇怪，因为 cv2.cvtColor 成功地将图像转换为灰度。所以一些 cv2 函数确实有效，而另一些则不同程度地失败。

* * *

编辑。我通过安装已发布的 2.4 版本的 opencv 解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-01T23:48:39.573

如已编辑问题中所述，这是在 OpenCV v2.4 的较新版本中修复的错误。目前似乎没有关于该错误修复的更多信息。

# java - @MappedSuperclass 超类属性在进行选择后为空

> ID：15343436
> 
> 赞同：1
> 
> 时间：2013-03-11T16:17:24.220
> 
> 标签：java, hibernate, jpa, spring-mvc

我有以下情况：

我有一个超类，它有一个字符串属性“A”和一个子类@Entity，它从映射的超类扩展并具有另一个字符串属性 B。

我不需要进行插入，我只需要对表 B 进行选择。

但是，当我查询 B 类时，hibernate 从 B 加载所有属性，但是，映射的超类属性没有加载，所以，如果我这样做 B.getPropertyB() 包含正确的值，但是，如果我这样做 B. getPropertyA() 它总是返回 null。

这些类看起来像这样：

```
@MappedSuperclass
public abstract class BaseContributorEntity extends BaseEntity<Long> implements Comparable<BaseContributorEntity> {
    private String propertyA;

    @Column(name = "column_a", length = 450)
    public String getPropertyA() {
        return propertyA;
    }

    public void setPropertyA(String value) {
        this.propertyA = value;
    } 
}

@Entity
@Table(name = "work_contributor")
public class WorkContributorEntity extends BaseContributorEntity {
    .... Other properties, including @id ....

    private String propertyB;

    @Column(name = "column_b", length = 450)
    public String getPropertyB() {
        return propertyB;
    }

    public void setPropertyB(String value) {
        this.propertyB = value;
    }

    .... Other setters and getters ....

} 
```

有人知道为什么会这样吗？

我应该重载映射超类 A 的吸气剂吗？

我正在使用休眠 3.6.3 和 JPA 2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:23:31.963

我已经使用@MappedSuperclass 很多年了，效果很好。您的代码示例是正确的。请仔细检查您的真实代码，那里应该有一些手动错误。

# sql-update - 更新 Mysql DB 中的多行

> ID：15343437
> 
> 赞同：0
> 
> 时间：2013-03-11T16:17:28.120
> 
> 标签：sql-update

我有一个表格，我试图用它来更新 mysql 数据库中的库存水平。

在表单上，​​我有一个 jquery 插件`relcopy.js`，我用它来根据需要增加表单行的数量。我已将文本框输入附加到 [] 方括号中，以便在发布时将它们作为数组拾取，即`lst_Product[]`等等。

表单页面发布到包含以下代码的插入页面。它旨在选择我希望更新和插入新值的库存水平的所需产品。

如果我从要更新的输入表单中发布一行，则代码可以正常工作。如果我发布让我们说输入表单中的三行，它将只更新第三个条目。

我怀疑我在“foreach 或 while”场景中出错了，但我不知道如何解决它。如果你们中的一个人能指出我正确的方向，我将不胜感激。n 我宁愿继续使用 mysqli 扩展方法。

```
<?php session_start();?>

<?php require_once('../Connections/connpay.php'); ?>
<?php require_once('../functions/global_functions.php'); ?>
<?php require_once('../functions/account_functions.php'); ?> 
<?php
foreach ($_POST['lst_product']as $row=>$product_id);

//$product_id = clean_data($_POST['lst_product']);
$quantity = clean_data($_POST['txt_quantity'][$row]);
$company_id = clean_data($_POST['hidden_company_id']);
 ?>
 <?php 
 //Lets connect to the database
 if(mysqli_connect_errno()){
     exit("Failed to connect to the database".mysqli_connect_error());}
 ?>
 <?php 
    $query = "SELECT product_id,stock_level,item_cost FROM acc_stock_items WHERE company_id = '$company_id' AND product_id = '$product_id'";
 $result = $conn->query($query);
 while ($row = $result->fetch_assoc())
 if (!empty($row['product_id'])){
     $current_stock = $row['stock_level'];
      $update_quantity = ($current_stock + $quantity);

        $query = "UPDATE acc_stock_items SET stock_level = '$update_quantity' WHERE product_id = '$product_id'";

 if ($conn->query($query)===TRUE){
    //Header("Location:../view_stock_items.php");
echo"all good";}
  else {
      echo "Error:".$conn->error;
  }
   }
$conn->close();
 ?>
 <?php print_r($query)?>
 Selected list item is :<?php echo $product_id;?><br>
The company id is: <?php echo $company_id;?> 
```

那是我的问题

# html - th 元素没有 tr align 属性

> ID：15343440
> 
> 赞同：1
> 
> 时间：2013-03-11T16:17:36.190
> 
> 标签：html, html-table

我有一些简单的 html 表，在 IE9 中，TH 元素不采用包含它们的 TR 的左对齐属性。

```
<TR ALIGN="left">
  <TH>Sample 1</TH>
  <TH>Sample 2</TH>
  <TH>Sample 3</TH>
</TR> 
```

所有标题在 FF、Chrome、Opera 中显示为左对齐，但在 IE 8/9 中它们仍然居中。IE 是否再次不符合标准，还是由浏览器决定如何呈现？我在 w3c.org 上阅读它的方式是它应该像 FF 和其他一样工作。

“属性 align、char 和 charoff 的优先顺序（从最高到最低）如下：”

*   在单元格数据（例如，P）中的元素上设置的对齐属性。
*   在单元格（TH 和 TD）上设置的对齐属性。
*   在列分组元素（COL 和 COLGROUP）上设置的对齐属性。当单元格是多列跨度的一部分时，对齐属性从跨度开始处的单元格定义继承。
*   **在行或行分组元素（TR、THEAD、TFOOT 和 TBODY）上设置的对齐属性。当单元格是多行跨度的一部分时，对齐属性从跨度开始处的单元格定义继承。**
*   在表 (TABLE) 上设置的对齐属性。
*   默认对齐值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:19:32.647

这是旧版本 IE 中的一个错误。

这也是一个过时的功能。改用 CSS。

```
th { 
    text-align: left;
} 
```

# gradle - Gradle：在 Plugin-Jar 中添加资源

> ID：15343441
> 
> 赞同：0
> 
> 时间：2013-03-11T16:17:36.980
> 
> 标签：gradle

我有一个 Gradle 插件，它被构建为 Jar 并上传到存储库。现在我想将一个配置文件移动到一个插件的 src/main/resources 文件夹中。但是在项目评估期间我无法获得资源，我怀疑这是因为我只在 buildscript { } 块中引用它。

该项目的 buildscript 基本上看起来像这样

```
buildscript {
    repositories { mavenRepo url: "http://..." }
    dependencies { classpath "gradle:loadtest-plugin:0.1.0" }
}

apply plugin: "loadtest-plugin" 
```

在 loadtest-plugin.jar 中有一个 src/main/resources/config.txt ，我想从插件内部访问它，如下所示：

```
def config = ClassLoader.getResourceAsStream("config.txt").text 
```

但我只得到 NullPointerExceptions。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:11:45.143

`ClassLoader.getResourceAsStream()`是实例方法，而不是静态方法。（我希望 Groovy 以一种或另一种方式告诉你。）尝试`getClass().classloader.getResourceAsStream()`or `buildscript.classLoader.getResourceAsStream()`.

# powershell - Powershell：查找/替换 ASCII 控制字符的模式

> ID：15343442
> 
> 赞同：6
> 
> 时间：2013-03-11T16:17:38.810
> 
> 标签：powershell, scripting, ascii, control-characters

我正在尝试编写一个脚本来搜索文件的内容，并在遇到一组 ASCII 控制字符时插入 CR/LF。

我要替换的字符模式是**[ETX][NUL][STX][ETX][SOH]**

```
    $filenames = @(Get-Childitem "E:\VendorFiles\*")

    $CR = @("[char]3 [char]0 [char]2 [char]3 [char]1")
    foreach ($file in $filenames) {$outfile = "$file" + ".txt"
    获取内容 $file | Foreach 对象 {
            $_ -替换 $CR,"`r`n" `
             -替换 [char]3,"|" `
             -替换 [char]1,"{" `
             -替换“\\”，“\\” `
        } | 设置内容-编码“UTF8”$outfile}

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:52:24.247

这个表达式：

```
@("[char]3 [char]0 [char]2 [char]3 [char]1") 
```

...创建一个包含*单个*元素的*数组。*如果您真的想要一个包含 5 个项目的数组，但无论如何不支持数组，您需要在术语之间使用逗号。此外，您的单个元素包含您输入的*文字*字符；不是你所期望的。*`-replace`*

 **您需要创建一个简单的字符串来提供给`-replace`; 当您处理不可打印的字符时，这会涉及更多。你的想法是对的——你只需要告诉 PowerShell 使用每个表达式上的符号插入字符串中的代码`$()`表达式：

```
$CR = "$([char]3)$([char]0)$([char]2)$([char]3)$([char]1)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-27T16:10:52.290

[Michael Sorens 的有用回答](https://stackoverflow.com/a/15393976/45375)很好地解释了您的方法存在的问题，并提供了一个可行的解决方案。

提供一个更简单的替代方案：

```
$CR = ([char[]] (3, 0, 2, 3, 1)) -join '' 
```

*   `3, 0, 2, 3, 1`使用要创建的字符的 Unicode 代码点创建一个整数数组。

*   Cast`[char[]]`将代码点转换为实际字符 ( `[char]`)。

*   `-join ''`将字符数组（没有分隔符）连接到单个*字符串*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:55:55.847

我在一个脚本中有一个函数可以做这样的事情。不确定这是否会帮助您：

```
# This function will make a new file that has custom comments
# it will comment out "rollback tran"
# it will uncomment out "--commit tran"
function CommentAndUncomment($TheScript)
{
    PrintTextAndTime("About to run this SQL file: $TheScript")
    PrintTextAndTime("Will comment out 'rollback tran' and uncomment '--commit tran'")
    $content = Get-Content $TheScript
    $content | 
      ForEach-Object { 
        if ($_ -clike "*ROLLBACK TRAN;*") { 
          $_ -replace "ROLLBACK TRAN;", "--ROLLBACK TRAN;"
        } 
        elseif ($_ -clike "*--COMMIT TRAN;*") { 
          $_ -replace "--COMMIT TRAN;", "COMMIT TRAN;"
        }
        else{
            $_
        }
      } | 
      Set-Content $ModifiedCommentsFile
    echo $ModifiedCommentsFile
    sqlcmd -i $ModifiedCommentsFile
    del $ModifiedCommentsFile
} 
```**

# git - 从远程分支拉到本地分支

> ID：15343445
> 
> 赞同：1
> 
> 时间：2013-03-11T16:17:44.497
> 
> 标签：git, github

我在本地分支工作，团队成员对该分支进行了一些更改。我如何将他们的更改“拉/取”到我的本地分支？

我不想拉整个回购，只是这个分支。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:20:56.800

在此结帐之前，请检查您的同事使用的分支

```
git checkout [branch] 
```

如果大家都使用master分支，请跳过这一步。

并且只拉一个分支（并与您的本地分支合并）使用这个：

```
git pull [repo] [branch] 
```

例如：

```
git pull origin master 
```

如果您只想下载更改并在想要合并之后：

```
git fetch [repo] [branch]
git merge [repo]/[branch] 
```

例如：

```
git fetch origin master
git merge origin/master #the local copy of the master branch in origin repo 
```

# python - 用 Python 的 Popen 替换 Bash 风格的进程

> ID：15343447
> 
> 赞同：7
> 
> 时间：2013-03-11T16:17:51.353
> 
> 标签：python, bash, subprocess, popen

在 Bash 中，您可以轻松地将进程的输出重定向到临时文件描述符，并且所有这些都由 bash 自动处理，如下所示：

```
$ mydaemon --config-file <(echo "autostart: True \n daemonize: True") 
```

或像这样：

```
$ wc -l <(ls)
15 /dev/fd/63 
```

看看它不是标准输入重定向：

```
$ vim <(echo "Hello World") 
vim opens a text file containing "Hello world"
$ echo  "Hello World" | vim
Vim: Warning: Input is not from a terminal 
```

您可以在第二个示例中看到 bash 如何自动创建文件描述符并允许您将程序的输出传递给另一个程序。

现在我的问题是：如何在子进程模块中使用 Popen 对 Python 做同样的事情？

我一直在使用普通的 kmers 文件并将其读入，但我的程序现在根据用户参数在运行时生成一个特定的 kmers 列表。我想避免手动写入临时文件，因为处理文件权限可能会给我的原始用户带来问题。

这是我运行程序并使用实际文件“kmer_file”捕获标准输出的代码

```
input_file = Popen(["pram_axdnull", str(kmer), input_file, kmer_file], stdout=PIPE) 
```

我创建了一个名为 generate_kmers 的函数，它返回一个可以轻松写入文件（包括换行符）或 StringIO 的字符串。我也有一个独立的 python 脚本来做同样的事情

所以现在我想将它作为我的第三个参数传递：

这不起作用：

```
kmer_file = stringIO(generate_kmers(3))
input_file = Popen(["pram_axdnull", str(kmer), input_file, kmer_file], stdout=PIPE) 
```

这也不是：

```
kmer_file = Popen(["generate_kmers", str(kmer)], stdout=PIPE)
input_file = Popen(["pram_axdnull", str(kmer), input_file, kmer_file.stdout], stdout=PIPE) 
```

所以我没有想法。

有谁知道解决这个问题的好方法？我正在考虑使用 shell=True 选项并使用 <() 的实际bashism，但我还没有弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T16:30:56.230

如果将约定`pram_axdnull`理解`"-"`为：“从标准输入读取”，那么您可以：

```
p = Popen(["pram_axdnull", str(kmer), input_filename, "-"],
          stdin=PIPE, stdout=PIPE)
output = p.communicate(generate_kmers(3))[0] 
```

如果输入是由外部进程生成的：

```
kmer_proc = Popen(["generate_kmers", str(kmer)], stdout=PIPE)
p = Popen(["pram_axdnull", str(kmer), input_filename, "-"],
          stdin=kmer_proc.stdout, stdout=PIPE)
kmer_proc.stdout.close()
output = p.communicate()[0] 
```

如果`pram_axdnull` *不*理解`"-"`约定：

```
import os
import tempfile
from subprocess import check_output

with tempfile.NamedTemporaryFile() as file:
    file.write(generate_kmers(3))
    file.delete = False

try:
    p = Popen(["pram_axdnull", str(kmer), input_filename, file.name],
              stdout=PIPE)
    output = p.communicate()[0]
    # or
    # output = check_output(["pram_axdnull", str(kmer), input_filename, 
                             file.name])
finally:
    os.remove(file.name) 
```

使用外部进程生成临时文件：

```
from subprocess import check_call

with tempfile.NamedTemporaryFile() as file:
    check_call(["generate_kmers", str(kmer)], stdout=file)
    file.delete = False 
```

为了避免等待所有 kmers 生成，即同时写入/读取 kmers，您可以`os.mkfifo()`在 Unix 上使用（@cdarke 建议）：

```
import os
import shutil
import tempfile
from contextlib import contextmanager
from subprocess import Popen, PIPE

@contextmanager
def named_pipe():
    dirname = tempfile.mkdtemp()
    try:
        path = os.path.join(dirname, 'named_pipe')
        os.mkfifo(path)
        yield path
    finally:
        shutil.rmtree(dirname)

with named_pipe() as path:
    p = Popen(["pram_axdnull", str(kmer), input_filename, path],
              stdout=PIPE) # read from path
    with open(path, 'wb') as wpipe:
        kmer_proc = Popen(["generate_kmers", str(kmer)],
                          stdout=wpipe) # write to path
    output = p.communicate()[0]
    kmer_proc.wait() 
```

# stackmob - 出于安全原因，已禁用通过此 API 更新密码。改用 resetPassword API

> ID：15343452
> 
> 赞同：1
> 
> 时间：2013-03-11T16:18:07.427
> 
> 标签：stackmob

我的一些用户（实际上只有 2 个）在他们想要登录 stackmob 时遇到了我在主题中描述的错误。为什么我们会得到这个错误？

```
public void createUser(final User stackmobUser) {
    stackmobUser.save(new StackMobCallback() {
        @Override
        public void success(String arg0) {
            login(stackmobUser);
        }

        @Override
        public void failure(StackMobException arg0) {
            Toast.makeText(getApplicationContext(), "user has not been created because of: " + arg0.getMessage(), Toast.LENGTH_LONG).show();
        }
    });
} 
```

这是他们给出的例外：

```
com.stackmob.sdk.exception.StackMobHTTPResponseException: call failed with HTTP response code 400, headers Date=Mon, 11 Mar 2013 15:27:51 GMT, Content-Type=application/vnd.stackmob+json; version=0, Connection=close, Content-Length=122, body {"error":"Updating passwords via this API is disabled for security reasons. Use the resetPassword API instead."} 
```

# authentication - 卡桑德拉访问控制

> ID：15343459
> 
> 赞同：5
> 
> 时间：2013-03-11T16:18:37.530
> 
> 标签：authentication, cassandra

有没有办法限制对 Cassandra 的访问？在 mysql 中，用户需要用户名和密码才能获得访问权限，包括工作台等工具。是否有任何这样的系统，或者 CLI 和 cqlsh 工具是否可以访问 Cassandra？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:47:43.840

您使用的是哪个版本的 Cassandra？[对于 1.2.2 及更高版本，您可以使用文档 ( http://www.datastax.com/docs/1.2/security/native_authentication](http://www.datastax.com/docs/1.2/security/native_authentication) )中描述的 PasswordAuthenticator 和 CassandraAuthorizer 进行身份验证：

> 1- 将 cassandra.yaml 身份验证器设置更改为 PasswordAuthenticator：
> 
> `authenticator: org.apache.cassandra.auth.PasswordAuthenticator`

您还需要将 auhorizer 设置为 CassandraAuthorizer：

> `authorizer: com.datastax.bdp.cassandra.auth.CassandraAuthorizer`
> 
> 2-配置[键空间](http://www.datastax.com/docs/1.2/security/security_keyspace_replication#security-keyspace-replication)[的复制因子`system_auth`](http://www.datastax.com/docs/1.2/security/security_keyspace_replication#security-keyspace-replication)。
> 
> 3-重新启动卡桑德拉。
> 
> 用于启动受支持客户端的默认超级用户名和密码 (cassandra) 存储在 Cassandra 中。例如，要启动 cqlsh：
> 
> `./cqlsh -u cassandra -p cassandra`
> 
> 您现在可以设置用户帐户并授权用户访问数据库对象，方法是使用 CQL 授予他们对这些对象的权限。

当然，您需要阅读有关如何“更改超级用户密码”的信息（在上面的链接中）。

完成此操作后，可以调用 cassandra-cli 以了解 cqlsh 在上述示例中的情况：

```
./cassandra-cli -u username -pw password 
```

有关概述，您还应该查看文档：[DataStax Enterprise 和 Apache Cassandra 中的内部身份验证和授权安全性快速浏览](http://www.datastax.com/dev/blog/a-quick-tour-of-internal-authentication-and-authorization-security-in-datastax-enterprise-and-apache-cassandra)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:52:47.300

**这是我发现的[唯一与身份验证相关的资源：](http://planetca.w11.wh-2.com/blog/post/announcing-datastax-community-edition-with-apache-cassandra-122)**

> 在 1.2.2 版本中，我们提供了内部身份验证和授权，让您可以在 Cassandra 内部管理登录 ID 和密码，以及从授权（即权限）的角度来看谁可以在数据库集群中做什么。

**到处走走，这把我带到了：[http ://www.datastax.com/docs 上的 DataStax Enterprise 3.0 文档](http://www.datastax.com/docs)[安全管理](http://www.datastax.com/docs/datastax_enterprise3.0/security/security_features#security_features)部分**

> DataStax Enterprise 3.0 包括许多用于保护数据的功能。安全框架为企业级数据库提供高级数据保护。您可以使用这些功能保护 DataStax Community 或 DataStax Enterprise 集群。
> 
> 使用登录帐户和密码进行内部身份验证 基于 GRANT/REVOKE 范例的对象权限管理 使用 SSL 对从客户端到 Cassandra 集群的数据进行客户端到节点加密
> 
> DataStax Enterprise 为企业提供额外的安全性，不包含在 DataStax 社区中，以获取关键任务数据：
> 
> Kerberos 身份验证：一种网络身份验证协议，允许通过非安全网络进行通信的节点使用票证以安全的方式相互证明其身份。您还可以将 Kerberos 设置为使用 LDAP 进行身份验证。
> 
> 透明数据加密：对从系统内存中的 memtable 刷新到磁盘上的 SSTables（静态数据）的数据进行编码，使未经授权的用户无法读取。无需用户干预即可进行加密和解密。
> 
> 数据审计：管理员创建集群活动详细审计跟踪的能力。

**顺便说一句，[DataStax 社区 - DataStax 企业版和 DataStax 社区版的比较](http://www.datastax.com/products/community/compare)说：**

> DataStax 社区版：包含用于实时数据管理的最新版本的 Cassandra 数据库，以及免费版本的 DataStax OpsCenter。不支持生产系统。

**包括 DataStax 社区版：**

> 安全功能 一般安全功能

**而不是 DataStax Enterprise 提到：**

> 安全功能 一般和高级安全功能

**总之，看一下，安全功能是从 1.2.2 版本开始实施的，根据您需要的安全部件，您可能根本不需要付费。**

**其他参考： [Apache Cassandra 1.2 文档 -](http://www.datastax.com/docs/1.2/security/index)包含以下资源的安全部分：**

*   [配置和使用内部认证](http://www.datastax.com/docs/1.2/security/native_authentication)
*   [使用内部授权管理对象权限](http://www.datastax.com/docs/1.2/security/native_authorization)

# html - 3d 鼠标事件：对于 z 维度

> ID：15343463
> 
> 赞同：1
> 
> 时间：2013-03-11T16:18:46.427
> 
> 标签：html, 3d, mouseevent

我即将购买 3d 鼠标，它只是单击（请原谅双关语），javascript 或 html5 规范是否支持 z 维度的鼠标移动事件。还是网页上 3d 运动的类似替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:37:20.620

我真的很怀疑。基于 HTML 的网页几乎被假定为 2D。

# android - Android Api 4 级兼容性错误

> ID：15343469
> 
> 赞同：0
> 
> 时间：2013-03-11T16:19:12.860
> 
> 标签：android, compatibility, android-support-library

我正在使用 supportv4 兼容性库，我的应用程序的目标 Api 级别是 17，我想让它即使在 Api 级别 4 中也能工作。当我运行我的应用程序时，我只在 api 级别 4 中出现此错误：

```
03-11 16:16:01.412: E/dalvikvm(302): Could not find method android.view.Display.getSize, referenced from method com.meher.tools.menulauncher.common.MyApplicationContext.setScreenDimensions
03-11 16:16:01.412: W/dalvikvm(302): VFY: unable to resolve virtual method 3065: Landroid/view/Display;.getSize (Landroid/graphics/Point;)V
03-11 16:16:01.412: W/dalvikvm(302): VFY:  rejecting opcode 0x6e at 0x0018
03-11 16:16:01.412: W/dalvikvm(302): VFY:  rejected Lcom/meher/tools/menulauncher/common/MyApplicationContext;.setScreenDimensions (Landroid/view/Display;)V
03-11 16:16:01.412: W/dalvikvm(302): Verifier rejected class Lcom/meher/tools/menulauncher/common/MyApplicationContext;
03-11 16:16:01.422: D/AndroidRuntime(302): Shutting down VM
03-11 16:16:01.422: W/dalvikvm(302): threadid=3: thread exiting with uncaught exception (group=0x4001aa28)
03-11 16:16:01.422: E/AndroidRuntime(302): Uncaught handler: thread main exiting due to uncaught exception
03-11 16:16:01.422: E/AndroidRuntime(302): java.lang.VerifyError: com.meher.tools.menulauncher.common.MyApplicationContext
03-11 16:16:01.422: E/AndroidRuntime(302):  at com.meher.tools.menulauncher.MainActivity.onCreate(MainActivity.java:79)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1123)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2364)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2417)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.app.ActivityThread.access$2100(ActivityThread.java:116)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1794)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.os.Looper.loop(Looper.java:123)
03-11 16:16:01.422: E/AndroidRuntime(302):  at android.app.ActivityThread.main(ActivityThread.java:4203)
03-11 16:16:01.422: E/AndroidRuntime(302):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 16:16:01.422: E/AndroidRuntime(302):  at java.lang.reflect.Method.invoke(Method.java:521)
03-11 16:16:01.422: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
03-11 16:16:01.422: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
03-11 16:16:01.422: E/AndroidRuntime(302):  at dalvik.system.NativeStart.main(Native Method)
03-11 16:16:01.422: I/dalvikvm(302): threadid=7: reacting to signal 3
03-11 16:16:01.422: E/dalvikvm(302): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

这是引发错误的代码：

**MainActivity.java ：**

```
// Init application context
        myApplicationContext = new MyApplicationContext(this,
                getWindowManager().getDefaultDisplay()); 
```

**MyApplicationContext.java ：**

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
    @SuppressWarnings("deprecation")
    public void setScreenDimensions(Display display) {
        Point size = new Point();
        if (android.os.Build.VERSION.SDK_INT < 13) {
            this.screenWidth = display.getWidth();
            this.screenHeight = display.getHeight();
        } else {
            try {
                display.getSize(size);
                this.screenWidth = size.x;
                this.screenHeight = size.y;
            } catch (java.lang.NoSuchMethodError ignore) { // Older device
                this.screenWidth = display.getWidth();
                this.screenHeight = display.getHeight();
            }
        }
    } 
```

**AndroidManifest.mf：**

```
<uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="17" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:27:51.020

API 级别 4 对类中使用的每个方法进行全面检查，以确保它存在，如[本答案](https://stackoverflow.com/a/12290957/1676363)中所述。因此，您可以：

*   将所有新的 API 调用封装在单独的类中（由于条件逻辑，它们不会在 v4 运行时中加载，因此永远不会被贪婪地检查）
*   将您的最低 SDK 移至 v7 (Android 2.1)，并失去[0.2%](http://developer.android.com/about/dashboards/index.html)的 Android 用户仍在使用 v4。

# excel - Excel VBA - 将多个用户表单复选框值写入单个单元格

> ID：15343473
> 
> 赞同：1
> 
> 时间：2013-03-11T16:19:27.550
> 
> 标签：excel, vba, checkbox, concatenation, userform

我正在尝试获取从具有 4 个复选框选项的用户窗体传递的值并将它们写入单个连接单元格。

当我像这样选择我的用户表单时：

![在此处输入图像描述](../Images/0dcca1e2d8ddd84827b68707afb3bb76.png)

我想将它保存到这样的单个单元格中：

![在此处输入图像描述](../Images/c4f6353c7be9a6feade1f84cebbfe183.png)

我尝试使用以下代码完成此操作（见下文），但如果仅选择第 2、3 或第 4 项而不选择第一项，则逗号等操作不太正确。我相信有更好的方法，但我无法弄清楚或在网上找到答案。

```
Private Sub cmdSave_Click()
  Dim colors As String

   If chkRed = True Then
      colors = "Red"
   Else
      colors = colors
   End If

   If chkBlue = True Then
      colors = colors & ", Blue"
   Else
      colors = colors
   End If

   If chkGreen = True Then
      colors = colors & ", Green"
   Else
      colors = colors
   End If

   If chkYellow = True Then
      colors = colors & ", Yellow"
   Else
      colors = colors
   End If

   With colorsSheet
      .Cells(ActiveCell.Row, 1).Value = colors
   End With

   Unload Me

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:33:04.133

将框架控件重命名为，`frameColours`然后您可以循环其复选框并构建您的字符串；

```
Dim chk as Control
Dim colors as string, delimiter as string

for Each chk In Me.frameColours.Controls
    if typeOf chk Is msforms.CheckBox then
        if (chk.Value) then
            colors = colors & delimiter & chk.Caption
            delimiter = ","
        end if
    end if
next

With colorsSheet
    .Cells(ActiveCell.Row, 1).Value = colors
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T17:44:51.537

```
Private Sub Submit_Click()

Dim lngIndex As Long, strTemp As String

For lngIndex = 1 To 16

'There are 16 check boxex, hence 1 to 16 is given

If Me.Controls("CheckBox" & lngIndex) Then
    strTemp = strTemp & Me.Controls("TextBox" & lngIndex).Value & vbLf 

'Returns you the output in a new line within the same cell.

End If

Next lngIndex

Sheets("Sheet1").Range("A1").Value = Left$(strTemp, Len(strTemp) - 1)

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:39:42.253

如果您想从“、Blue、Green、Yellow”之类的输出中消除初始逗号，您将不得不更改添加这些字符串的代码以检查是否`colors`为空。就像是：

```
If chkBlue = true Then
    If colors = "" Then
        colors = "Blue"
    Else
        colors = colors & ", Blue"
    End If
End If 
```

由于“红色”是您添加的第一个颜色，您可以假设它`colors`是空的：

```
If chkRed = True Then
      colors = "Red"
End If 
```

你不需要`Else ... colors = colors`

# python - Python：变量的新实例未在类的新实例中创建

> ID：15343476
> 
> 赞同：2
> 
> 时间：2013-03-11T16:19:36.257
> 
> 标签：python, inheritance, initialization

我发现了奇怪的 Python 行为（或者我可能不明白继承和/或属性的默认值是如何工作的）。

对于给定的代码

```
class A(object):
    def __init__(self, s):
        self.s = s
        print "in init", self.s

class B(A):
    def __init__(self, s = set()):
        super(B, self).__init__(s)
        print "after super", self.s
        self.s.add('foo')
        print '--------------'

if __name__ == "__main__":
    a = B()
    b = B() 
```

我得到以下输出：

```
in init set([])
after super set([])
--------------
in init set(['foo']) # Why it has value set in other object?!
after super set(['foo'])
-------------- 
```

当然，期望的行为是使用空集在第二个对象 (b) 中初始化 self.s，但由于未知原因，它从前一个对象获取状态。为什么会这样？如何获得期望的行为？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T16:22:17.137

您已成为可变默认参数陷阱的牺牲品。`set()`您在 B 中指定为默认值的是`__init__`将传递给`B`您创建的每个新对象的相同对象。将其放入`self`不会创建新副本，它只会创建对同一对象的引用。

您可能想在每个新对象中创建一个副本，因此请明确执行：

```
class A(object):
    def __init__(self, s):
        self.s = copy.copy(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:33:00.483

当您为参数设置默认值时，该值是在您*定义*函数时计算的，而不是在您调用它时计算的。因此，它使用的`set()`是您定义类时创建的相同内容，并向其中添加越来越多的项目。

相反，典型的 Python 模式是使用`None`默认值，然后`set()`在`__init__`.

```
class B(A):
  def __init__(self, s=None):
    if s is None:
      s = set() 
```

# sql - 使用复杂的 WHERE 语句更新 Liquibase 中的行

> ID：15343481
> 
> 赞同：7
> 
> 时间：2013-03-11T16:19:45.647
> 
> 标签：sql, oracle10g, foreign-keys, foreign-key-relationship, liquibase

我以前从未使用过 Liquibase，只是不知道如何解决这个问题。我最近加入的项目是对旧项目的翻版，所以我们必须坚持使用旧数据库，它的架构设计得很糟糕。数据库不使用外键约束，因此仍有条目指向不再存在的条目。就我而言，是一位医生在数据库中不存在的银行拥有银行账户。到目前为止，我的团队处理这些问题的方式是用 NULL 覆盖 ID。所以基本上我要做的是将所有银行账户 ID 设置为 NULL，当银行不存在时。我为完成此任务而编写的 SQL 代码如下：

```
UPDATE DOCTOR SET FK_BANKID = NULL WHERE FK_BANKID NOT IN (SELECT ID FROM BANK); 
```

有人告诉我将该修复程序集成到我们的 Liquibase 变更集中，但我就是不知道该怎么做。这是我到目前为止所做的：

```
<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    <changeSet id="remove_fk_bankid" author="v7">
        <update tableName="DOCTOR">
            <column name="FK_BANKID" value="NULL" />
            <where>FK_BANKID NOT IN (SELECT ID FROM BANK)</where>
        </update>
    </changeSet>
</databaseChangeLog> 
```

Liquibase 更新运行没有错误，但是当我之后查看数据库时，什么都没有改变。有人对我如何解决这个问题有任何指示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T16:18:37.513

我终于弄清楚了问题所在。变更集本身实际上没有问题。当 Liquibase 更新数据库时，它会记录数据库中的所有变更集，以便已经执行的变更集不会再次执行。Liquibase 保存变更集内容的哈希，以便再次执行已更改的变更集。实际问题是当我第一次执行变更集时数据库是干净的，因为我使用以下 SQL 命令手动完成了它：`UPDATE DOCTOR SET FK_BANKID = NULL WHERE FK_BANKID NOT IN (SELECT ID FROM BANK);`. 之后我更改了一个医生行并将银行 ID 设置为不存在的银行并再次执行变更集，只是为了测试变更集是否真的有效。由于 Liquibase 在它的日志中有我的变更集，所以它没有再次执行。因此我看不到数据库的变化。我注意到当我回滚所有更改并再次更新数据库时。

为了完成变更集，我还必须定义回滚，因为 Liquibase 无法自动回滚行更新。由于银行账户的 ID 永远丢失了，我只是添加了一个空的回滚命令：

```
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">
    <changeSet id="remove_fk_bankid" author="v7">
        <update tableName="DOCTOR">
            <column name="FK_BANKID" value="NULL" />
            <where>FK_BANKID NOT IN (SELECT ID FROM BANK)</where>
        </update>
        <rollback>
        </rollback>
    </changeSet>
</databaseChangeLog> 
```

# javascript - 使用 OR 运算符检查变量值

> ID：15343484
> 
> 赞同：14
> 
> 时间：2013-03-11T16:20:05.860
> 
> 标签：javascript

因此，我团队中的一名初级程序员今天编写了以下代码：

```
if(status === ("incomplete" || "unknown")) 
```

这显然不会按照他的意图去做，那就是：

```
if(status === "incomplete" || status === "unknown")) 
```

但我无法解释的是为什么第一段代码不起作用！或者为什么如果“状态”设置为“不完整”则它评估为真，但当它设置为“未知”时它评估为假......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-11T16:23:10.663

在 JavaScript 中，如果`||`运算结果为`true`（即不是`false`、`null`、`undefined`、`""`或`0`），则运算符返回其第一个操作数，否则返回其第二个操作数。

在第一种情况下，`("incomplete" || "unknown")`总是评估为`"incomplete"`，因为它评估为真。

整个条件就变成了：

```
if (status === "incomplete") 
```

这解释了您正在观察的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T16:23:17.813

`("incomplete" || "unknown")`将返回`"incomplete"`比比较的`status`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T16:23:52.053

> 但我无法解释的是为什么完全`status === ("incomplete" || "unknown")`行不通

这是因为括号中的表达式首先被求值。非空字符串`incomplete`是真实的，所以[OR 表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators) `("incomplete" || "unknown")`产生`"incomplete"`并且只有它与您的`status`变量进行比较。

为了缩短条件，[有很多方法](https://stackoverflow.com/q/9121395/1048572)，包括值数组、正则表达式测试等。

# html - 是位置'初始'跨浏览器 - css

> ID：15343487
> 
> 赞同：31
> 
> 时间：2013-03-11T16:20:14.003
> 
> 标签：html, css, cross-browser, css-position

我有一个 css 冲突，所以我必须反对处理某些 class 的绝对定位属性`.myclass`。但在一种情况下，我希望一个带`.myclass`类的 div 没有绝对定位。所以我把`position: initial`, 在 Chrome 中工作，但它是跨浏览器的吗？我用谷歌搜索并没有发现任何真正精确的东西。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-11T16:23:34.897

位置的默认值是`position: static;`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-11T16:24:28.633

该[`initial`](http://www.w3.org/TR/css3-cascade/#initial)关键字于 2011 年在[级联和继承模块](http://www.w3.org/TR/css3-cascade/)中引入——它在 FF 19 ^+、Chrome、Safari、Opera 15 ^+中受支持，但目前在任何版本的 IE 中[均不支持。](http://msdn.microsoft.com/en-us/library/hh781508(v=vs.85).aspx#keywords)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-30T07:43:24.553

甚至 IE 11 也给了我这个“曲线”。更改为`static`给了我想要的行为。

![在此处输入图像描述](../Images/33e41156e9eda669f98669022ae66db7.png)

Chrome 实际上在其下拉菜单中建议它为可接受的属性

![在此处输入图像描述](../Images/ccffaba720b5af65bd5101505d1598c1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-13T00:40:22.417

`position: unset;`我遇到了与在 IE 中不为我工作的问题相同的问题。我改变了`position: static;`，它按预期工作，因为 IE 没有未设置的行为。

# xslt - 祖父母级别的 XSLT 兄弟姐妹

> ID：15343489
> 
> 赞同：0
> 
> 时间：2013-03-11T16:20:20.413
> 
> 标签：xslt, xpath, xslt-grouping

我有一个如下所示的 xml。我需要找到所有不同的货币。使用以下

```
 <xsl:for-each select="$itemPrices/Relationships/Relationship/Target
                       /Properties/PropertyItem[cs:Key='Currency']/cs:Value"> 
```

我已经能够获得所有货币类型，但有重复。我需要使用 XSLT 1.0 找到不同的值。我遇到了使用前后兄弟姐妹的解决方案，但我能够获得相同级别的兄弟姐妹。我无法构建一个 XPath，它可以升级四级中的三级，然后查看可比较的下一个兄弟。

```
 <Relationship>
    <ModelName>Entities.Relationship</ModelName>
    <Properties />
    <Target>
      <ModelName>ItemPrice</ModelName>
      <Properties>
        <PropertyItem>
          <Key>Currency</Key>
          <Value i:type="a:string" xmlns:a="http://www.w3.org/2001/XMLSchema">US</Value>
        </PropertyItem>
        <PropertyItem>
          <Key>PriceValue</Key>
          <Value i:type="a:decimal" xmlns:a="http://www.w3.org/2001/XMLSchema">13.51</Value>
        </PropertyItem>
        <PropertyItem>
          <Key>ProductId</Key>
          <Value i:type="a:string" xmlns:a="http://www.w3.org/2001/XMLSchema">0600</Value>
        </PropertyItem>
      </Properties>
    </Target>
  </Relationship>
  <Relationship>
    <ModelName>Entities.Relationship</ModelName>
    <Properties />
    <Target>
      <ModelName>ItemPrice</ModelName>
      <Properties>
        <PropertyItem>
          <Key>Currency</Key>
          <Value i:type="a:string" xmlns:a="http://www.w3.org/2001/XMLSchema">US</Value>
        </PropertyItem>
        <PropertyItem>
          <Key>PriceValue</Key>
          <Value i:type="a:decimal" xmlns:a="http://www.w3.org/2001/XMLSchema">11.82</Value>
        </PropertyItem>
        <PropertyItem>
          <Key>ProductId</Key>
          <Value i:type="a:string" xmlns:a="http://www.w3.org/2001/XMLSchema">0600</Value>
        </PropertyItem>
      </Properties>
    </Target>
  </Relationship>
  <Relationship>
    <ModelName>Entities.Relationship</ModelName>
    <Properties />
    <Target>
      <ModelName>ItemPrice</ModelName>
      <Properties>
        <PropertyItem>
          <Key>Currency</Key>
          <Value i:type="a:string" xmlns:a="http://www.w3.org/2001/XMLSchema">Canadian</Value>
        </PropertyItem>
        <PropertyItem>
          <Key>PriceValue</Key>
          <Value i:type="a:decimal" xmlns:a="http://www.w3.org/2001/XMLSchema">10.95</Value>
        </PropertyItem>
        <PropertyItem>
          <Key>ProductId</Key>
          <Value i:type="a:string" xmlns:a="http://www.w3.org/2001/XMLSchema">0600</Value>
        </PropertyItem>
      </Properties>
    </Target>
  </Relationship> 
```

所以在上面的 XML 中，我应该只得到一次美国和加拿大，而不是美国两次和加拿大一次。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:38:03.330

虽然您可以使用`preceding::`而不是`preceding-sibling::`，但在 XSLT 1.0 中选择不同值的有效方法是使用 Muenchian 分组：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kCurrency" match="PropertyItem[Key = 'Currency']/Value"
           use="."/>

  <xsl:template match="/">
    <xsl:variable name="allCurrencies"
                  select="Relationships/Relationship/Target/Properties
                          /PropertyItem[Key = 'Currency']/Value" />
    <xsl:for-each select="$allCurrencies[generate-id() = 
                  generate-id(key('kCurrency', .)[1])]">
      <currency>
        <xsl:value-of select="."/>
      </currency>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

当一个`<Relationships>`元素包裹在您的示例 XML 中并输入到此 XSLT 中时，结果是：

```
<currency>US</currency>
<currency>Canadian</currency> 
```

# c - 连接 VMCI 流套接字

> ID：15343491
> 
> 赞同：1
> 
> 时间：2013-03-11T16:20:26.910
> 
> 标签：c, sockets, vmware

我正在尝试使用 VMCI 套接字在虚拟机与其主机之间建立面向流的连接。我成功启动服务器，绑定地址，进入监听模式，调用accept等待客户端。但是，每当我`connect(...)`从客户那里打电话时，我都会收到`WSAECONNRESET`错误消息。

我的客户代码是：

```
int sockfd;    
WSADATA wsaData;
WORD wVersionRequested = MAKEWORD(2, 2);

// initialize sockets for win32
if (WSAStartup(wVersionRequested, &wsaData) != 0) {
    perror("Could not register with Winsock DLL.\n");
    exit(-1);
}

// get VMCI socket file descriptor
int afVMCI = VMCISock_GetAFValue();
if ((sockfd = socket(afVMCI, SOCK_STREAM, 0)) == -1) {
    perror("socket");
    exit(-1);
}

// initialize server address
struct sockaddr_vm their_addr = {0};
their_addr.svm_family = afVMCI;
their_addr.svm_cid = 2;
their_addr.svm_port = 1234;

// connect to server
if ((connect(sockfd, (struct sockaddr *) &their_addr, sizeof(their_addr))) == -1) {
    int e = WSAGetLastError();
    printf("Error: %d\n", e);
    exit(-1);
}

printf("Connected!\n"); 
```

每当我使用数据报套接字时，问题都不存在。（当然，无需调用listen、accept 和connect。在这种情况下，我只需使用`sendto(...)`which 就可以了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:26:17.930

从[VMware 文档](http://www.vmware.com/support/developer/vmci-sdk/VMCI-510-Relnotes.html)中，我刚刚发现：

> 在 Workstation 7.0 中，Linux 主机、Linux 来宾和 Windows 来宾支持流套接字，但 Windows 主机仅支持数据报套接字。

由于我的主机 PC 运行 Windows，因此不支持此功能。

# javascript - 使用 javascript 从一页到 div 的 HTML

> ID：15343494
> 
> 赞同：1
> 
> 时间：2013-03-11T16:20:42.023
> 
> 标签：javascript, jquery, ajax

我有一个按钮，当单击该按钮时，它会从另一个页面获取内容并将该页面中的内容放入`div`. 它从中获取内容的页面具有使文本在显示后淡出的附加代码。但是，当它从该页面获取内容时，它也不会带来该部分。有没有一种方法可以在代码、下面或页面上获取内容，使文本在显示后淡出？

```
<script type="text/javascript">
$(document).ready(function(){
$("input[name=buttonup53]").click(function(){
  $.ajax({url:"add.php?r=sbt&l=35&t=53&w=1", success:function(result){
    $("div[id=up53]").html(result);
  }});
});});
</script>
<div id="up53"></div>
<input type="image" name="buttonup53" id="buttonup53" src="button.png" width="25px"></input> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:28:49.250

如果我理解正确，您可以在成功回调中使用 setTimeout 来使 div 消失。

```
$.ajax({
 url:'',
 ...
 success:function(result){
    $("#up53").html(result);
    setTimeout(function(){$("#up53").fadeOut('slow');},2000);
 }    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:24:09.247

您可以使用 jquery 的 load() 方法。 [jQuery 加载（）](http://api.jquery.com/load/)

```
 $("Div#up53").load("add.php?r=sbt&l=35&t=53&w=1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:31:25.837

怎么样：

```
$("div[id=up53]").html(result).fadeOut(); 
```

# arrays - 绝对值最小的子序列

> ID：15343500
> 
> 赞同：2
> 
> 时间：2013-03-11T16:21:11.833
> 
> 标签：arrays, algorithm, dynamic-programming

这是一道面试题。给定一个整数数组，找到一个子序列（不一定是连续的），其元素之和的绝对值最小。

它看起来像一个DP问题。

*   Let`S1[i]`是一个子序列`a[i]`，其总和> 0且*abs*（总和）最小化。

*   Let`S2[i]`是一个子序列，在该子序列处`a[i]`其总和 < 0 并且*abs* (sum) 被最小化。

*   `S1[i]`是if > 0 && < 0`S1[j] + a[i]`的最小值`j < i``S1[j] + a[i]``a[i]`

*   `S2[i]`是if < 0 && > 0`S2[j] + a[i]`的最小值`j < i``S2[j] + a[i]``a[i]`

一旦我们现在`S1[i]`和`S2[i]`所有索引，很容易找到其元素绝对值最小的子序列。

是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:04:37.803

我假设您想要非空子序列中的最小绝对和。（否则，如评论中所述，空子序列的总和为 0。）

由于元素的顺序无关紧要，您的问题只是问：给定一组（多）元素，所有子集之间的最小绝对和是多少。很容易看出，[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)简化为这个问题。由于子集和是 NP 难的，所以这个问题也是如此。因此，很可能您的多项式时间算法是错误的。否则，P = NP。

事实上，您的算法的一个反例是输入序列 {-1, 2, -2}。

[子集和问题的标准方法](http://en.wikipedia.org/wiki/Subset_sum_problem#Pseudo-polynomial_time_dynamic_programming_solution)可用于为您的问题获取伪多项式时间算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:35:51.017

我希望我能按照你的推理，但我有点慢......你还要求DP，这里又是Haskell......但这是你的意思吗？

```
import Data.List (sortBy, subsequences)
import Data.Ord (comparing)

minValSub xs = 
  head $ sortBy (comparing snd) 
  $ map (\x -> (x, abs (sum x)) ) (filter (not . null) $ subsequences xs)

OUTPUT:
*Main> minValSub [1,2,3,-4,5]
([1,3,-4],0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T21:16:23.717

我假设非空结果集。

设整数列表为 S。考虑其中最小的**绝对值**S[k]。如果 S[K] == 0 则返回它。否则目标是找到一个小于 S[K] 的值。

如您提到的SP（非负）和SN，将整数分为两组正整数和负整数。现在找到 SP 中的总和，它与 SN 中的另一个总和小于 S[K]。这可以通过按绝对值分别对 SP 和 SN 中的元素进行排序，在每个列表上保留一个总和和一个头指针来完成。您可以填写详细信息。

这可能给出小于 S[K] 的值，否则报告 S[K]。

例如：S = {1, -4, 2, -8, 5, -7} k = 0, S[k] = 1

SP（排序）= {1, 2, 5} SN（排序）= {-4, -7, -8}

同时遍历这两个数组，你可以得到一些候选 {1,2} 和 {-4}，它们将给出与 S[k] 相同的结果。但是 {2,5} 和 {-7} 会更好地给出 0 的净总和。

# jsf - 在 jsf <h:datatable 4="" 上在丰富的="" fcaes="" 中实现="" jquery<="" h1="">> ID：15343501
> 
> 赞同：-5
> 
> 时间：2013-03-11T16:21:13.737
> 
> 标签：jsf, richfaces

在 jsf < h:datatable 上在丰富的 fcaes 4 中实现 jquery。

这是我的插件 include 和 java scrpt 它正在处理 html 页面我想在 h 数据表上对其进行隐含

```
 <script type="text/javascript" >
        $(document).ready(function() {
            $('#example').dataTable( {
                "sScrollY": 200,
                "sScrollX": "100%",
                "sScrollXInner": "110%"
            } );
        } );
    </script> 
```

...tr's 和 td's ...在我的 h 数据表中

我只需要知道如何使用 jquery 在丰富的面孔或 jsf 中调用上述函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:59:00.793

好的，这是它应该如何工作的：

```
<script type="text/javascript" >
    $.noConflict();
    jQuery(document).ready(function() {
        jQuery('#example').dataTable( {
            "sScrollY": 200,
            "sScrollX": "100%",
            "sScrollXInner": "110%"
        } );
    } );
</script> 
```

当然你需要包含 jQuery 文件，例如：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
```</h:datatable>

# .net - CollectionDataContract 用于消费 Json 数组

> ID：15343502
> 
> 赞同：3
> 
> 时间：2013-03-11T16:21:14.050
> 
> 标签：.net, json, wcf, datacontract

假设有一个服务产生了这个 json：

```
[{"key1": 12, "key2": "ab"}, {"key1": 10, "key2": "bc"}] 
```

这是否可以由 wcf rest 检索并使用 CollectionDataContract 作为列表进行解析，然后使用 DataContract 再次自动解析？

我试过这样做，但总是给出“根级别无效，第 1 行，位置 1”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:34:59.757

[CDC] 和 JSON 没有什么特别之处 - 它应该可以正常工作 - 请参阅下面的代码。尝试将其与您的进行比较，包括网络跟踪（如在 Fiddler 等工具中所见），看看有什么不同。

```
public class StackOverflow_15343502
{
    const string JSON = "[{\"key1\": 12, \"key2\": \"ab\"}, {\"key1\": 10, \"key2\": \"bc\"}]";
    public class MyDC
    {
        public int key1 { get; set; }
        public string key2 { get; set; }

        public override string ToString()
        {
            return string.Format("[key1={0},key2={1}]", key1, key2);
        }
    }

    [CollectionDataContract]
    public class MyCDC : List<MyDC> { }

    [ServiceContract]
    public class Service
    {
        [WebGet]
        public Stream GetData()
        {
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/json";
            return new MemoryStream(Encoding.UTF8.GetBytes(JSON));
        }
    }

    [ServiceContract]
    public interface ITest
    {
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        MyCDC GetData();
    }

    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebChannelFactory<ITest> factory = new WebChannelFactory<ITest>(new Uri(baseAddress));
        ITest proxy = factory.CreateChannel();
        var result = proxy.GetData();
        Console.WriteLine(string.Join(", ", result));
        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# ruby-on-rails - 运动“比赛”时间的场地，并转换为花车

> ID：15343503
> 
> 赞同：0
> 
> 时间：2013-03-11T16:21:26.013
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

**如果田径运动员在田径比赛后节省了他们的比赛时间......**

运动员选择/输入*“MM:SS:ss”*到一个字段中。

我需要将它保存为数据库中的浮点数（秒）。

800M：（*'01:48.37'--* to-- 108.37）

100M: ( *'00:10.59'* --to-- 10.59 )

10,000M: ( *'27:08.11'* --to-- 1628.11 )

--

我还没有找到一种直接或可靠的方法来允许用户输入那种时间，然后将对象转换为浮点 before_save。我可以完成这项工作，还是有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:57:01.150

Rails 允许您将数据类型存储为`float`. 你只需要处理转换。

你是如何提交数据的？作为什么类型？如果您要提交一个字符串，您可以执行以下操作：

```
min, sec, centi = "1:23:45".split(":")

seconds = (min.to_i * 60) + sec.to_i + (centi.to_f / 100) 
```

# java - 在 Intellij Idea 中混合常规导入和静态导入

> ID：15343505
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:21:33.927
> 
> 标签：java, intellij-idea, static-import

默认情况下，Intellij Idea 将常规导入和静态导入分开。像

```
 import com.a;
 import com.b;

 import static com.a.C.foo; 
```

我想要的是把它放在一起。像

```
 import com.a;
 import static com.a.C.foo;
 import com.b; 
```

如何配置这样的布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:37:56.400

您可以`Layout static imports separately`在 Settings/Code Style/Java/Import Tab 中找到一个选项（您可能必须为此水平滚动选项卡）。

![在此处输入图像描述](../Images/185f7871fbc7ad3d54b7a71c9a7e4c1d.png)

# php - 允许使用 fputcsv 下载但在输出文件中省略额外的 html 代码？

> ID：15343506
> 
> 赞同：1
> 
> 时间：2013-03-11T16:21:37.957
> 
> 标签：php, html, fputcsv

在我的代码中，我正在使用 fgetcsv 创建一个文件。我下载并打开文件，但我页面中的所有 html 都包含在 csv 文件中。无论如何，我可以只拥有我想从文件中输出的数据，而不是额外的 html。我创建 csv 的函数如下

```
function makefile()
{
    header('Content-type: text/csv');
    header("Cache-Control: no-store, no-cache"); 
    header("Content-Disposition: attachment;filename=file.csv");

    $this->filepointer  =   fopen('php://output', 'a');

    for($count=0;$count < count($this->alldata);$count++)
    {
       fputcsv($this->filepointer, $this->alldata[$count]);
    }

    fclose($this->filepointer);

} 
```

我也想知道如果我使用 $this->filepointer = fopen('file.csv', 'w') 文件是否仍会填充 html。因为我不必下载文件，所以我只是用它来检查文件是否以正确的格式创建。再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-07T13:30:18.587

你可以试试下面的代码。在设置一些标题后，您需要在末尾添加 read_file，如下所示。

```
<?php
if(isset($_GET['link']))
{
    $var_1 = $_GET['link'];
    $file = $var_1;

if (file_exists($file))
    {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename='.basename($file));
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
    }
} //- the missing closing brace
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T04:08:03.857

使用 ob_end_clean() ；在写文件之前

# accessibility - 灯箱符合 508/ADA 标准

> ID：15343507
> 
> 赞同：1
> 
> 时间：2013-03-11T16:21:44.580
> 
> 标签：accessibility, lightbox, section508, nvda

我目前正在尝试开发一个符合 508/ADA 标准的灯箱；为了实现这一点，我需要制作一个灯箱（已经完成），然后让 NVDA 等阅读器读取灯箱上的内容，而不是将焦点直接切换到灯箱后面的页面文本并阅读。以更简洁的方式 - 让灯箱出现在加载中，让焦点保持在灯箱上，让 NVDA 读取灯箱上的内容而不返回背景。如果我在其他人提供答案之前得到答案，我会继续更新。

目前这个问题没有解决方案 - 这是一个 NVDA 问题，Aria-hidden 未被正确识别。[http://www.nvda-project.org/ticket/2706](http://www.nvda-project.org/ticket/2706) // [http://www.nvda-project.org/ticket/2117](http://www.nvda-project.org/ticket/2117) -

我提出的解决方案：

创建一个 iFrame - 或 DIV - 仅在要显示消息时展开或折叠/出现或分散。这将创建一个“可聚焦”区域，然后可以作为 NVDA 的参考点。我将继续为这个问题开发一个 JavaScript/JQuery 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T17:53:18.243

我建议你使用`role="alertdialog"`or `role="dialog"`。这有助于屏幕阅读器选择阅读灯箱的内容。

# system.reactive - 响应式扩展 (UI) 增加事件调用

> ID：15343508
> 
> 赞同：0
> 
> 时间：2013-03-11T16:21:49.250
> 
> 标签：system.reactive, reactiveui

我有下面的代码。

```
this.ObservableForProperty(x => x.SelectedDay)
    .Throttle(TimeSpan.FromMilliseconds(3600))
    .Where(x => SelectedDay != null)
    .ObserveOn(CoreWindow.GetForCurrentThread().Dispatcher)
    .Subscribe(x => SomeRandomMethod()); 
```

Throttle 运行良好，在 x.SelectedDay 停止更改之前它不会调用 SomeRandomMethod。但是，每次它发生变化时都会调用它。

```
So i do this:  
Change,  
Change,  
Wait  
//SomeRandomMethod called 2 times at end of throttle  
Change  
Wait  
//SomeRandomMethod called 3 times
Change  
Change  
Change 
Wait  
//SomeRandomMethod called 6 times. 
```

我怎样才能让它忽略所有以前的更改事件，并且只在油门完成它的时候获得最新的事件。

```
So i would like this:
Change   
Change 
Wait  
//SomeRandomMethod called once
Change  
Wait  
//SomeRandomMethod called once
Change  
Change  
Change 
Wait  
//SomeRandomMethod called once 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:28:53.827

你在哪里调用这个方法？您应该只在构造函数中调用它，并且只调用一次。此外，这是上面代码的更好版本：

```
this.ObservableForProperty(x => x.SelectedDay)
    .Throttle(TimeSpan.FromMilliseconds(3600), RxApp.DeferredScheduler)
    .Where(x => SelectedDay != null)
    .Subscribe(x => SomeRandomMethod()); 
```

# java - 用于复选框检查的 Java 字符串到 JavaScript 字符串数组

> ID：15343514
> 
> 赞同：2
> 
> 时间：2013-03-11T16:22:04.877
> 
> 标签：java, javascript, checkbox

我想将字符串数组从服务器转换为客户端字符串，不使用 JSON 或外部库。服务器端，将 a 转换`String[] xArray = new String[] { "1", "2", "3" }`为`"1, 2, 3"`客户端渲染。以下 JavaScript 函数负责解析服务器字符串并将复选框与数组值进行比较。当匹配时，必须选中对应的复选框。

```
function loadCheckBoxes() {         
    var ids = '<%= request.getSession().getAttribute("idsFromServer") %>';      
    if (ids != null && ids !== '') {            
        var idsArray = String.valueOf(ids).indexOf(',') == -1 ? [ids] : ids.split(',');
        var checkboxes = document.getElementsByClassName('gridIds');
        for (var i = 0; i < checkboxes.length; i++) {
            var index = idsArray.indexOf(checkboxes[i].value);
            if (index >= 0) {
               var foundId = idsArray[index];        
                if (checkboxes[i].value == foundId) {
                    checkboxes[i].checked = true;
                }
            }
        }
    }
} 
```

这是一个用于测试执行的[JSFiddle 。](http://jsfiddle.net/axcdnt/mjvLd/9/)

**预期结果：**拆分我的数组后，必须选中相应的复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:35:03.630

您的解决方案中有两个问题：

*   你应该分开`', '`而不是`','`
*   var `foundId = ids[index];`-> 应该是`ids.split(', ')[index];`

[工作解决方案](http://jsfiddle.net/d7CCr/)：

```
function checkSelected() {
    var ids = "9, 133";
    var idsArr = ids.split(", ");
    var checkboxes = document.getElementsByClassName('gridCheck');
    for (var i = 0; i < checkboxes.length; 
        var index = idsArr.indexOf(checkboxes[i].
        if (index >= 0) {
            var foundId = idsArr[index];
            if (checkboxes[i].value == foundId) {
                checkboxes[i].checked = true;
            }
        }
    }
} 
```

# git - 基于服务器创建新的 GIT 分支，无需本地更改

> ID：15343515
> 
> 赞同：2
> 
> 时间：2013-03-11T16:22:05.437
> 
> 标签：git, git-branch

我想我缺少一些关于 GIT 分支的基本概念。

假设我在我的机器上克隆了一个存储库，并开始工作（在本地“master”上）。

现在有人告诉我生产中的一个错误。

我想停止我正在做的所有事情（修改后的提交和未推送的提交），创建一个**基于服务器的功能分支，而不需要我在本地进行的更改**，修复错误，提交和推送，然后返回 master ，变基并继续工作。

我认为以下方法会起作用：

```
$ git clone <some repo>
$ vim text.txt
$ git checkout -b bugFix 
```

问题是分支“bugFix”包括我在 master 中所做的更改。

如何创建一个干净的分支？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:33:15.287

最干净的方法是将您当前的工作提交到本地功能分支（保持 master 处于可发布状态），然后切换到 master 并在那里进行错误修复（或基于 master 的分支）。

```
git checkout -b my-feature
git commit -m "add my feature"
git checkout master
git pull --rebase
git checkout -b bugFix
... do some work ...
git checkout my-feature 
```

如果您还没有准备好（本地）提交您的工作，您可以使用 stash 来存储您的更改：

```
git stash
git fetch
git checkout origin/master
git checkout -b bugFix
... do some work ...
git checkout master
git stash pop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:45:11.930

假设远程被命名为“origin”，远程分支被称为“生产”并且您当前处于 master 状态 - 您将执行以下操作：

```
$ git stash   # move your current uncommitted stuff out of the way
$ git checkout -b bugFix remotes/origin/production
# now fix the bug, and commit (to your bugFix branch)
$ git push origin production # back to production
$ git checkout master
$ git stash pop 
```

此时，您可以删除本地 bugFix 分支，如果您愿意，可以使用：

```
$ git branch -d bugFix 
```

这样你就回到了你开始的地方（除了公司英雄！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:30:25.980

首先，隐藏你正在做的事情。

```
git stash 
```

您的存储库有一个远程跟踪分支，与您上次从 origin 获得的内容相匹配；切换到那个分支。

```
git checkout remotes/origin/master 
```

您将处于分离状态，因为您不想直接提交到远程跟踪分支。因此，基于远程跟踪分支创建一个错误修复分支。

```
git checkout -b bugFix 
```

破解

# ios - iOS UIWebView 页面加载可观察性

> ID：15343516
> 
> 赞同：2
> 
> 时间：2013-03-11T16:22:09.970
> 
> 标签：ios, uiwebview, uiwebviewdelegate

我想确定，页面加载何时完成`UIWebView`。我知道[此处概述的](https://stackoverflow.com/questions/908367/uiwebview-how-to-identify-the-last-webviewdidfinishload-message)`didStartLoad`/之间的“引用计数”方法，它有点适合我，但我对此并不十分自信。当Javascript决定与. 我不清楚以下内容：`didFinishLoad` `ifs``document.location`

1.  `UIWebViewDelegate`对于它应该处理的所有功能，非常简洁并且几乎[没有文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)。谁能确认`didStartLoad`/`didFinishLoad`真的只被称为“框架”，这很可能意味着“框架集/框架”和“iframe”？
2.  我如何区分上述 DOM 引起的负载和请求重定向（也产生事件）？
3.  我的观察是每个`didStartLoad`都以`shouldStartLoadWithRequest`, 重定向除外。这是一个可靠的行为吗？
4.  我是否遗漏了什么，或者没有办法知道是什么请求发起了特定的请求`didStartLoad`？由于`[[webView request] URL]`给出的唯一上下文，总是返回相同的 URL，即 UIWebView 最初被要求加载的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:08:06.620

1.  我不能。
2.  我不知道。
3.  我不知道。
4.  我说不出来。

有用的答案，对吧？

显然，我认为`UIWebViewDelegate`可以（应该？）对`UIWebView`.

我观察活动的尝试`UIWebView`是：

*   在加载 iOS 6 时添加观察者：从未调用过观察者。
*   尝试：

委托方法示例：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
    [self.activityIndicator startAnimating];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    if (!webView.loading) {
        [self.activityIndicator stopAnimating];
    }
} 
```

效果很好。

我认为您应该使用您提到的 JavaScript 和 iframe 技巧尝试此代码。它没有帮助，但您拥有您正在谈论的 JavaScript，您还可以考虑向您的应用程序发送信号以指示进一步的加载操作正在进行中（例如使用自定义方案调用 URL`myApp://didStartLoadingSomethingWithJavascriptDude`和`myApp://didFinishLoadingSomethingWithJavascriptDude`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T20:31:21.183

通过`UIWebViewNavigationType`from`shouldStartLoadWithRequest`至少您可以确定当前加载是来自用户点击还是页面内发生的任何其他事情。知道页面何时确实加载是无济于事的，但是您可以在用户触发新代码之前启动一些代码。这可能会有所帮助，具体取决于您必须在两页之间执行的任务的性质。

# binding - 淘汰赛绑定部分工作

> ID：15343521
> 
> 赞同：0
> 
> 时间：2013-03-11T16:22:24.657
> 
> 标签：binding, asp.net-mvc-4, knockout.js

这是服务器在 AJAX 调用时返回的 PartialView 的 HTML 代码：

```
<tbody data-bind="foreach: CoverQuotesViewModel">
    <tr>
        <td><input type="checkbox" data-bind="checked: IsSelected" /></td>
        <td  ><input type="text"  data-bind="value: Label, enable: IsSelected" /></td>        
    </tr>
</tbody> 
```

然后应用绑定：

```
$.ajax("getSelectedQuote", {
    data: ko.toJSON({ model: self.selectedQuote, model1: formData }),
    }),
    type: "post", contentType: "application/json",
    success: function (result) {

    $("#custom").html(result);

    ko.applyBindings(self.selectedQuote, $("#covers")[0]);
    }
}); 
```

我可以看到我的表格填充了正确选中的复选框。但是，对于未选中的复选框，相应的输入不会灰显（禁用）。如果我手动取消选中一个复选框，输入将被禁用。

那么为什么“启用”属性在开始时没有绑定？

**编辑**

MVC 模型类：

```
 public class CoverQuoteViewModel
{
    public CoverQuoteViewModel()
    {
        Childs = new List<CoverQuoteViewModel>();
    }

    public string ProductName { get; set; }
    public string Label { get; set; }
    public bool IsVisible { get; set; }
    public bool IsMandatory { get; set; }
    public bool IsSelected { get; set; }
    public bool IsChoice { get; set; }
    public bool IsComposite { get; set; }
    public decimal YearPrice { get; set; }
    public decimal BiannualPrice { get; set; }
    public decimal QuarterPrice { get; set; }
    public decimal MonthPrice { get; set; }

    public List<CoverQuoteViewModel> Childs { get; private set; }
    public CoverQuoteViewModel SelectedCoverQuote { get; set; }

} 
```

**编辑**

返回的 JSON 数据

```
var initialData = { "Quotes":
[{ "ProductName": null, "MonthPrice": 0, "QuarterPrice": 0, "BiannualPrice": 0, "YearPrice": 0, "CoverQuotesViewModel":

[{ "ProductName": null, "Label": "Première Assistance 24h/24 (GRATUITE)", "IsVisible":    true, "IsMandatory": true, "IsSelected": true, "IsChoice": false,   "IsComposite": false, "YearPrice": 0.97, "BiannualPrice": 0.49, "QuarterPrice": 0.25, "MonthPrice": 0.08, "Childs": [], "SelectedCoverQuote": null },
{ "ProductName": null, "Label": "Assistance PLUS 24h/24", "IsVisible": true, "IsMandatory": false, "IsSelected": false, "IsChoice": false, "IsComposite": false, "YearPrice": 36.06, "BiannualPrice": 18.22, "QuarterPrice": 9.20, "MonthPrice": 3.10, "Childs": [], "SelectedCoverQuote": null },
{ "ProductName": null, "Label": "Supplément Vol Audio", "IsVisible": true, "IsMandatory": false, "IsSelected": false, "IsChoice": false, "IsComposite": false, "YearPrice": 33.36, "BiannualPrice": 16.85, "QuarterPrice": 8.51, "MonthPrice": 2.87, "Childs": [], "SelectedCoverQuote": null }
]}]
}; 
```

数据解析如下：

```
<script type="text/javascript">
@{ var jsonData = new HtmlString(new JavaScriptSerializer().Serialize(Model)); }
var initialData = @jsonData;
</script> 
```

和完整的 ViewModel

```
$(function () {
var mvcModel = ko.mapping.fromJS(initialData);

function QuoteViewModel() {
    var self = this;

    self.customizeQuote = function (quote) {
        self.selectedQuote = quote;

        //remove the disable attribute on all form controls before serializing data
        $(".step").each(function () {
            $(this).find('input, select').removeAttr('disabled');
        });

        //convert form data to an object 
        var formData = $('#etape').toObject();

        $.ajax("getSelectedQuote", {
            data: ko.toJSON({ model: self.selectedQuote, model1: formData }),            
            type: "post", contentType: "application/json",
            success: function (result) {
                debugger
                $("#custom").html(result);
                $("#etape").formwizard("show", "customize");
                ko.applyBindings(self.selectedQuote, $("#covers")[0]);
            }
        });
    };

    self.addRemove = function (cover) {
        alert(cover.Label);
    };
}

var myViewModel = new QuoteViewModel();
var g = ko.mapping.fromJS(myViewModel, mvcModel);
ko.applyBindings(g); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:48:03.567

如果无法查看您的数据或视图模型，我建议将值设置为 IsSelected，这样您就可以看到该值是什么。如果这看起来正确，那么还有其他一些问题，但如果这些值最初不正确，我不会感到惊讶。这可能是由于您如何将数据映射到视图模型，尽管我无法知道。

```
<td><input type="text" data-bind="value: IsSelected, enable: IsSelected" /></td> 
```

我很困惑为什么你在这里的代码中使用映射插件两次，一次是在你的初始数据上生成 mvcModel，一次是映射，好吧，看起来你正在将 myViewModel 映射到 mvcModel。你的意思是这样，因为那看起来不正确吗？

在您应用绑定之前，您是否`g`在调试器中查看过，并调查了它的外观？

# xslt - Umbraco - 获取文本字符串值

> ID：15343522
> 
> 赞同：0
> 
> 时间：2013-03-11T16:22:26.513
> 
> 标签：xslt, umbraco

我正在尝试获取页面文本字符串的值，为其分配一个 url，然后使用 xslt 在不同的页面上显示结果。我不确定如何获取文本字符串的值。

这是我的宏：

```
 <!-- Input the related links property alias here -->
    <xsl:variable name="fieldName" select="/macro/fieldName"/>
    <xsl:template match="/">

        <xsl:if test="$fieldName != ''">
            <!-- The fun starts here -->

                        <xsl:element name="a">
                            <xsl:if test="./new-window[. = 'True']">
                                <xsl:attribute name="target">_blank</xsl:attribute>
                            </xsl:if>

                            <xsl:attribute name="href">
                                <xsl:value-of select="/myUrl.aspx"/>
                            </xsl:attribute>

                            <xsl:value-of select="./@title"/>
                        </xsl:element>

        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:12:12.847

找到了！`select="$parent/*[name() = $fieldName]`

# internet-explorer - 为什么 IE 会提示在 .cab 中安装 ActiveX 控件，但无论如何都会阻止它？

> ID：15343525
> 
> 赞同：2
> 
> 时间：2013-03-11T16:22:33.393
> 
> 标签：internet-explorer, activex

我将 ActiveX 控件（不是我开发的）嵌入到网站中，部署在 .cab 文件中。

起初控件没有加载，但是在将我的网络服务器添加到受信任的站点列表后，我可以让 IE 提示我是否要安装 .cab

![驾驶室安装提示](../Images/a0d1cf37269689f3d9fd8cc63c046695.png)

我单击“是”，但随后无法访问 .ocx 的控件，并且不断收到“对象不支持属性或方法...”错误。如果我在 cab 中手动注册 .ocx 和 .ax 文件，一切正常。

有没有办法理解为什么 IE 会阻止控件，尽管我告诉它运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T11:24:31.933

如果 ActiveX 控件不是从代码签名的 cab 文件安装的，则 IE 无法验证其真实性，因此会主动阻止它。

解决此问题的步骤：

1) 将网站添加到 Internet Explorer 选项 -> 安全中的受信任站点，并将安全级别设置为**低**或自定义级别，以允许运行不安全或未签名的 ActiveX 控件。

2) 向第三方控件的发布者索取代码签名的 cab 文件。许多出版商在购买许可证后会根据要求提供此选项。请与他们确认这一点。

# unit-testing - TYPO3 4.5 extbase 测试后端模块

> ID：15343527
> 
> 赞同：0
> 
> 时间：2013-03-11T16:22:35.207
> 
> 标签：unit-testing, phpunit, typo3, fluid, extbase

我正在寻找一种方法来测试我的 extbase-extension。我为前端和后端使用两种不同的模板路径。

```
module.myext{
    view {
        templateRootPath = myext/Resources/Private/Backend/Templates/
        partialRootPath = myext/Resources/Private/Backend/Partials/
        layoutRootPath = myext/Resources/Private/Backend/Layouts/
    }
} 
```

后端模块可以正常工作，但我的测试不会得到不同的模板路径。如果我将 view.templateRootPath 写入 ext_typoscript_setup.txt 中的 config.tx_extbase 它可以工作，但在这种情况下，我所有的前端测试都不再工作了。解决此问题的最简单方法是合并模板路径并仅使用一个，但必须有解决此问题的方法。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T18:12:30.723

您是否在根页面中静态包含扩展设置？

然后，只要您将后端模块包含在网络工具中并在页面树中选择根页面，它就应该可以工作......

如果您在用户工具中包含您的模块，这是一个已知错误。看这里：

[http://lists.typo3.org/pipermail/typo3-project-typo3v4mvc/2011-December/011174.html](http://lists.typo3.org/pipermail/typo3-project-typo3v4mvc/2011-December/011174.html)

你可以把这段代码放在你的 *ext_localconf.php* 中：

```
if (TYPO3_MODE === 'BE') {
    t3lib_extMgm::addTypoScript($_EXTKEY, 'constants', $tsIncludeConstants);
    t3lib_extMgm::addTypoScript($_EXTKEY, 'setup', $tsIncludeSetup);
} 
```

`$tsIncludeXX`包含扩展配置文件的 TS 代码在哪里：

```
$tsIncludeConstants = "<INCLUDE_TYPOSCRIPT: source=FILE:EXT:$_EXTKEY/Configuration/TypoScript/constants.txt>";
$tsIncludeSetup = "<INCLUDE_TYPOSCRIPT: source=FILE:EXT:$_EXTKEY/Configuration/TypoScript/setup.txt>"; 
```

这是一种蛮力，但它有效......

# php - 如何以编程方式将 css 类添加到一段代码中？

> ID：15343529
> 
> 赞同：0
> 
> 时间：2013-03-11T16:22:49.323
> 
> 标签：php, css, class, drupal

我有这段代码，只要我需要粘贴drupal(7) 搜索表单。

```
<?php print drupal_render(drupal_get_form('search_block_form')); ?> 
```

问题是我无法在`input[type="text"]`不修改页面中的其他文本输入的情况下定位该特定内容。

我试图将代码包装到一个类 DIV 中，比如说*special-search-form*，所以我可以这样做

```
.special-search-form input[type="text"] {} 
```

但这不行。有没有办法在 drupal_render() 调用中添加一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:30:30.253

有两种方法可以处理这个问题。

A) 通过一个模块

```
function hook_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case 'search_block_form':
      $form['#attributes']['class'][] = 'extra_class';
      break;
  }
} 
```

我认为这也可能有效，尽管我需要澄清...

```
function hook_search_block_form_alter(...) {
  $form['#attributes']['class'][] = 'extra_class';
} 
```

B) 通过一个主题*[search-block-form.tpl.php]*

```
<div class="extra_class">
  <?php echo $search_form; ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:45:54.210

您可以尝试使用表单 ID 作为根 CSS 类。就像是：

```
#search-block-form input {} 
```

或者更详细地定义它：

```
#search-block-form input[name="search_block_form"] {} 
```

# paypal - 我可以登录 PayPal 沙盒测试帐户，但无法进入个人资料或设置

> ID：15343534
> 
> 赞同：5
> 
> 时间：2013-03-11T16:23:06.437
> 
> 标签：paypal, paypal-sandbox

在我从 Chrome 中删除 PayPal cookie 之前，我无法登录到我的 PayPal 开发者帐户。这允许我登录，但单击“个人资料”下拉菜单中的“个人资料”或“设置”会导致错误页面显示“请登录以使用 PayPal 沙盒功能”。

再次登录没有帮助。创建一个新帐户（买方或卖方）也无济于事。

这是在新的沙盒环境中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:58:37.720

看起来很奇怪，删除你的 developer.paypal.com 应该可以解决这个问题。
这样做的原因是您从旧的开发人员门户中获得了 cookie，这会干扰新的门户/沙盒环境。
删除所有 cookie /所有 paypal.com cookie 后，您应该能够登录新的开发人员门户并访问任何沙盒帐户，而不会出现任何问题。

对此的修复很快就会发布。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T19:06:13.310

如果有人在沙箱中访问他们的我的个人资料（我的业务信息除外）仍然有问题（我只得到永久加载动画） - 那么只需使用此链接：

[https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_classic-profile-summary](https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_classic-profile-summary)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:58:35.723

Paypal 沙盒对每个人来说一般都是坏的，看到很多人抱怨它。以前充其量是绳索，现在似乎真的死了。

# extjs - 无法使用 ST2 访问 NameSpace.app 变量？

> ID：15343537
> 
> 赞同：2
> 
> 时间：2013-03-11T16:23:11.013
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在使用 Sencha 命令行 3 工具和新生成的 Sencha Touch 2 应用程序。

假设我的 app.js 文件如下所示：

```
Ext.application({
  name: "CA",
  event_code: "test123",
  launch: function() {
   console.log("application launched!");
  }
}); 
```

我的视图和对象存储依赖于生成一个基于 CA.app.event_code 等于“test123”的 URL；

在浏览器中开发期间，一切正常，CA.app 返回我需要的变量。

当我使用 sencha app build 编译我的应用程序并尝试在浏览器中运行缩小版本时，我收到如下错误：

```
Error evaluating http://localhost:8888/app.js with message: TypeError: Cannot read property 'event_code' of undefined localhost:11 
```

我不完全确定为什么会发生这种情况或如何解决它。我对任何和所有想法或建议持开放态度，任何正确方向的指示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:48:34.340

遇到完全相同的问题。您无法访问视图中的命名空间应用程序......真的很糟糕，它们让您在开发中而不是在构建时。无论如何，我通过添加一个静态助手类并在我的应用程序中使用它来解决它：

在 /app/util/Helper.js 中：

```
Ext.define('MyApp.util.Helper', {
  singleton: true,
  alternateClassName: 'Helper',
  config: {
    foo: "bar",
    bat: "baz"
  },
  staticFunction: function() {
    // whatever you need to do...
  }
}); 
```

然后在您的视图或控制器中：

```
Ext.define('MyApp.view.SomeView', {
  ...
  requires: ['Events.util.Helper'],
  ...
  someViewFunction: function() {
    var someValue = Helper.staticFunction();
    // and you can use Helper.foo or Helper.bat in here
  }
}); 
```

作为参考，这里有一些关于[Sencha Singletons](http://docs.sencha.com/touch/2-1/#!/api/Ext.Class-cfg-singleton)的文档。还有一个重要的注意事项：**确保您的 Helper 单例在它自己的文件中！**如果它很小，你可能会倾向于把它放在你的 app.js 的底部，一开始一切都会好起来的，构建过程也会起作用，但代码不会。不用担心，构建过程无论如何都会将所有 JS 代码放在一个大的压缩文件中。

# bash - Cygwin bash“无法分配内存”错误

> ID：15343540
> 
> 赞同：0
> 
> 时间：2013-03-11T16:23:21.910
> 
> 标签：bash, cygwin, tee, windows-server-2012

我有一个奇怪的问题。我在包含 cygwin 二进制文件的网络共享上有一个目录。这个 cygwin 目录曾经位于戴尔 poweredge 盒子上，并作为虚拟目录安装在 IIS8 中。Web 服务将执行一个调用，然后调用一个 bash 脚本，如下所示：

```
\\poweredgeshare\cygwin\bin\bash --login -c "//poweredgeshare/mytools/myshellscript.sh 2>&1 | tee -a //poweredgeshare/logs/logoutput.txt" 
```

在我们得到一个带有 FS7600 前端的新戴尔 Equalogic 文件服务器并尝试在 Windows Server 2012 机器上从 IIS8 执行该调用之前，这非常有效。使用这种组合，我现在收到以下错误：

```
/usr/bin/bash: //fs7600/mytools/myshellscript.sh: Cannot allocate memory 
```

如果我将完全相同的 fs7600 共享安装在我的 Windows 8 框的 IIS8 上作为虚拟目录，则此方法有效。所有网络调用都按预期运行。在我将它部署到生产（服务器 2012）机器后它就爆炸了。

我发现如果我删除`2>&1 | tee -a`并只使用`>`它，它在所有情况下都有效。所以有一些关于三通的管道会导致问题。

我不是 shell 脚本专家——我没有写这个，我只是想调试它并理解为什么完全相同的 cygwin 二进制文件调用完全相同的 shell 脚本但只是在一个新的文件系统上爆炸。

所以总结一下哪些有效，哪些无效：
- 旧文件共享适用于开发（Windows 8）和生产（服务器 2012）环境
- 新文件共享适用于开发，但不适用于服务器 2012

有没有人对为什么会发生这种情况有任何想法？

# c# - protobuf-net 使用 SerializeWithLengthPrefix 序列化嵌套的对象列表

> ID：15343550
> 
> 赞同：2
> 
> 时间：2013-03-11T16:23:39.697
> 
> 标签：c#, protobuf-net

我目前正在尝试使用 protobuf-net 序列化以下数据结构：

```
[ProtoContract]
public class Recording
{
    [ProtoMember(1)]
    public string Name;

    [ProtoMember(2)]
    public List<Channel> Channels;
}

[ProtoContract]
public class Channel
{
    [ProtoMember(1)]
    public string ChannelName;

    [ProtoMember(2)]
    public List<float> DataPoints;
} 
```

我有 12 个固定数量的通道，但是每个通道的数据点数量可能会变得非常大（所有通道的 Gb 范围内）。因此（并且因为数据是一个连续的流）我不想一次读取和保存一个记录的结构，而是利用 SerializeWithLengthPrefix （和 DeserializeItems）来连续保存它。我的问题是，甚至可以用这样的嵌套结构来做到这一点，还是我必须把它弄平？我已经看到了第一个层次结构级别中的列表示例，但没有针对我的具体情况。此外，如果我将数据点写为 10、100、...（如使用 List 而不是 List）的“块”而不是直接序列化它们，有什么好处吗？

在此先感谢您的帮助

托拜厄斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:06:18.577

您尝试做的主要挑战是它在每个对象的*内部都大量基于流。*protobuf-net 可以以这种方式工作，但它并非微不足道。还有一个问题是您希望将来自单个通道的数据交错到多个片段上，这不是惯用的 protobuf 布局。所以核心*对象物化*器代码可能并不完全符合您的要求——即将它视为一个开放流，而不是全部加载到内存中，用于读取和写入。

也就是说：您*可以*使用原始读取器/写入器 API 来实现流式传输。`BinaryWriter`您可能应该使用/与类似的代码进行比较和对比`BinaryReader`，但基本上以下工作：

```
using ProtoBuf;
using System;
using System.Collections.Generic;
using System.IO;
static class Program
{
    static void Main()
    {
        var path = "big.blob";
        WriteFile(path);

        int channelTotal = 0, pointTotal = 0;
        foreach(var channel in ReadChannels(path))
        {
            channelTotal++;
            pointTotal += channel.Points.Count;
        }
        Console.WriteLine("Read: {0} points in {1} channels", pointTotal, channelTotal);
    }
    private static void WriteFile(string path)
    {
        string[] channels = {"up", "down", "top", "bottom", "charm", "strange"};
        var rand = new Random(123456);

        int totalPoints = 0, totalChannels = 0;
        using (var encoder = new DataEncoder(path, "My file"))
        {
            for (int i = 0; i < 100; i++)
            {
                var channel = new Channel {
                    Name = channels[rand.Next(channels.Length)]
                };
                int count = rand.Next(1, 50);
                var data = new List<float>(count);
                for (int j = 0; j < count; j++)
                    data.Add((float)rand.NextDouble());
                channel.Points = data;
                encoder.AddChannel(channel);
                totalPoints += count;
                totalChannels++;
            }
        }

        Console.WriteLine("Wrote: {0} points in {1} channels; {2} bytes", totalPoints, totalChannels, new FileInfo(path).Length);
    }
    public class Channel
    {
        public string Name { get; set; }
        public List<float> Points { get; set; }
    }
    public class DataEncoder : IDisposable
    {
        private Stream stream;
        private ProtoWriter writer;
        public DataEncoder(string path, string recordingName)
        {
            stream = File.Create(path);
            writer = new ProtoWriter(stream, null, null);

            if (recordingName != null)
            {
                ProtoWriter.WriteFieldHeader(1, WireType.String, writer);
                ProtoWriter.WriteString(recordingName, writer);
            }
        }
        public void AddChannel(Channel channel)
        {
            ProtoWriter.WriteFieldHeader(2, WireType.StartGroup, writer);
            var channelTok = ProtoWriter.StartSubItem(null, writer);

            if (channel.Name != null)
            {
                ProtoWriter.WriteFieldHeader(1, WireType.String, writer);
                ProtoWriter.WriteString(channel.Name, writer);
            }
            var list = channel.Points;
            if (list != null)
            {

                switch(list.Count)
                {
                    case 0:
                        // nothing to write
                        break;
                    case 1:
                        ProtoWriter.WriteFieldHeader(2, WireType.Fixed32, writer);
                        ProtoWriter.WriteSingle(list[0], writer);
                        break;
                    default:
                        ProtoWriter.WriteFieldHeader(2, WireType.String, writer);
                        var dataToken = ProtoWriter.StartSubItem(null, writer);
                        ProtoWriter.SetPackedField(2, writer);
                        foreach (var val in list)
                        {
                            ProtoWriter.WriteFieldHeader(2, WireType.Fixed32, writer);
                            ProtoWriter.WriteSingle(val, writer);
                        }
                        ProtoWriter.EndSubItem(dataToken, writer);
                        break;
                }
            }
            ProtoWriter.EndSubItem(channelTok, writer);
        }
        public void Dispose()
        {
            using (writer) { if (writer != null) writer.Close(); }
            writer = null;
            using (stream) { if (stream != null) stream.Close(); }
            stream = null;
        }
    }

    private static IEnumerable<Channel> ReadChannels(string path)
    {
        using (var file = File.OpenRead(path))
        using (var reader = new ProtoReader(file, null, null))
        {
            while (reader.ReadFieldHeader() > 0)
            {
                switch (reader.FieldNumber)
                {
                    case 1:
                        Console.WriteLine("Recording name: {0}", reader.ReadString());
                        break;
                    case 2: // each "2" instance represents a different "Channel" or a channel switch
                        var channelToken = ProtoReader.StartSubItem(reader);
                        int floatCount = 0;
                        List<float> list = new List<float>();
                        Channel channel = new Channel { Points = list };
                        while (reader.ReadFieldHeader() > 0)
                        {

                            switch (reader.FieldNumber)
                            {
                                case 1:
                                    channel.Name = reader.ReadString();
                                    break;
                                case 2:
                                    switch (reader.WireType)
                                    {
                                        case WireType.String: // packed array - multiple floats
                                            var dataToken = ProtoReader.StartSubItem(reader);
                                            while (ProtoReader.HasSubValue(WireType.Fixed32, reader))
                                            {
                                                list.Add(reader.ReadSingle());
                                                floatCount++;
                                            }
                                            ProtoReader.EndSubItem(dataToken, reader);
                                            break;
                                        case WireType.Fixed32: // simple float
                                            list.Add(reader.ReadSingle());
                                            floatCount++; // got 1
                                            break;
                                        default:
                                            Console.WriteLine("Unexpected data wire-type: {0}", reader.WireType);
                                            break;
                                    }
                                    break;
                                default:
                                    Console.WriteLine("Unexpected field in channel: {0}/{1}", reader.FieldNumber, reader.WireType);
                                    reader.SkipField();
                                    break;
                            }
                        }
                        ProtoReader.EndSubItem(channelToken, reader);
                        yield return channel;
                        break;
                    default:
                        Console.WriteLine("Unexpected field in recording: {0}/{1}", reader.FieldNumber, reader.WireType);
                        reader.SkipField();
                        break;
                }
            }
        }
    }
} 
```

# r - RCurl::url.exists() ：如何为重定向获取非错误（在 300 范围内的 HTTP 状态代码中）

> ID：15343560
> 
> 赞同：0
> 
> 时间：2013-03-11T16:24:10.927
> 
> 标签：r, redirect, curl, error-handling, rcurl

我有一堆通过文本挖掘一些 PDF 文档提取的 URL。现在我想测试 URLS 的有效性。某些 url 内部或附加了垃圾字符，或者 URL 被截断。一种方法是通过调用它们中的每一个来过滤它们。

为此，我使用 `url.exists()` 了 RCurl 包中的函数。该函数使用 curl 向 url 发出 HTTP HEAD 请求并检查状态代码。

从文档`?url.exists`

```
 If ‘.header’ is ‘FALSE’, this returns ‘TRUE’ or ‘FALSE’ indicating
 whether the request was successful (had a status with a value in
 the 200 range). 
```

我怎样才能让它为发出重定向的 url 返回 TRUE？重定向状态代码在 300 范围内。它们并不是真正的错误。

或者，还有更好的方法？获取实际状态代码并手动处理它们？我应该在这里使用系统命令吗？

# linux - Bash：在多个内核上运行相同的程序

> ID：15343561
> 
> 赞同：15
> 
> 时间：2013-03-11T16:24:12.853
> 
> 标签：linux, bash, parallel-processing, multiprocessing

我可以访问一台可以访问 10 个内核的机器——我想实际使用它们。我习惯在自己的机器上做的事情是这样的：

```
for f in *.fa; do
  myProgram (options) "./$f" "./$f.tmp"
done 
```

我有 10 个文件要执行此操作——我们称它们为 blah00.fa、blah01.fa、... blah09.fa。

这种方法的问题是 myProgram 一次只使用 1 个核心，并且在多核机器上这样做我会一次使用 1 个核心 10 次，所以我不会使用我的机器它的最大能力。

我怎样才能更改我的脚本，以便它同时运行我的所有 10 个 .fa 文件？我查看了[Run a looped process in bash across multiple cores](https://stackoverflow.com/questions/7907406/run-a-looped-process-in-bash-across-multiple-cores)，但我无法从中获取命令来执行我想要的操作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T16:55:08.093

你可以使用

```
for f in *.fa; do
    myProgram (options) "./$f" "./$f.tmp" &
done
wait 
```

这将并行启动所有工作，然后等到它们*全部*完成后再继续。如果您的作业多于核心，您将启动所有作业并让您的操作系统调度程序担心交换进程。

一种修改是一次启动 10 个作业

```
count=0
for f in *.fa; do
    myProgram (options) "./$f" "./$f.tmp" &
    (( count ++ ))        
    if (( count = 10 )); then
        wait
        count=0
    fi
done 
```

但这不如使用`parallel`，因为您无法在旧工作完成时开始新工作，而且您也无法在开始 10 个工作之前检测旧工作是否完成。`wait`允许您等待单个特定进程或*所有*后台进程，但不会让您知道任意一组后台进程中的任何一个何时完成。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T20:56:14.170

使用 GNU Parallel，您可以：

```
parallel myProgram (options) {} {.}.tmp ::: *.fa 
```

来自： http: [//git.savannah.gnu.org/cgit/parallel.git/tree/README](http://git.savannah.gnu.org/cgit/parallel.git/tree/README)

= 完整安装 =

GNU Parallel 的完整安装非常简单：

```
./configure && make && make install 
```

如果您不是 root，您可以将 ~/bin 添加到您的路径并安装在 ~/bin 和 ~/share 中：

```
./configure --prefix=$HOME && make && make install 
```

或者，如果您的系统缺少“make”，您可以简单地将 src/parallel src/sem src/niceload src/sql 复制到路径中的目录。

= 最少安装 =

如果您只需要并行并且没有安装“make”（可能系统是旧的或 Microsoft Windows）：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem
mv parallel sem dir-in-your-$PATH/bin/ 
```

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T11:52:36.227

```
# Wait while instance count less than $3, run additional instance and exit
function runParallel () {
    cmd=$1
    args=$2
    number=$3
    currNumber="1024"
    while true ; do
        currNumber=`ps -e | grep -v "grep" | grep " $1$" | wc -l`
        if [ $currNumber -lt $number ] ; then
            break
        fi
        sleep 1
    done
    echo "run: $cmd $args"
    $cmd $args &
}

loop=0
# We will run 12 sleep commands for 10 seconds each 
# and only five of them will work simultaneously
while [ $loop -ne 12 ] ; do
    runParallel "sleep" 10 5
    loop=`expr $loop + 1`
done 
```

# php - json_decode 到一个数组？

> ID：15343562
> 
> 赞同：1
> 
> 时间：2013-03-11T16:24:20.370
> 
> 标签：php, arrays, encoding, json

```
foreach ($likes as $like) {
    // Extract the pieces of info we need from the requests above
    $id = idx($like, 'id');
    $item = idx($like, 'name');

    fwrite($fileout,json_encode($like));
    fwrite($fileout,PHP_EOL );
}

$json_string = file_get_contents('testson.json');
$get_json_values=json_decode($json_string,true);

foreach ($get_json_values as $getlikes) {  ?>
          <li>
            <a href="https://www.facebook.com/<?php echo $getlikes['id']; ?>" target="_top">
          </li>
        <?php
      } 
```

打开浏览器时，有一个`Warning: Invalid argument supplied for foreach()`. 我不明白为什么我的论点无效。

如果我添加 if，什么都不会发生，这表明实际问题是什么。但问题是这样做**的正确方法是什么**？我很确定这很简单，但我已经为此苦苦挣扎了一个多小时。我的 json 文件有这样的字段，所以我认为不会有问题：

```
{"category":"Musician\/band","name":"Yann Tiersen (official)","id":"18359161762"} 
```

请帮助我，我真的厌倦了它，我不知道该怎么办。那么...**如何将文件解码为数组？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:29:35.010

您需要`testson.json`文件的内容而不仅仅是名称！

通过 PHP 接收内容：

```
$json_string = file_get_contents('testson.json'); 
```

通过测试确保文件中有有效的 JSON 内容

```
var_dump(json_decode($json_string)); 
```

然后打电话

```
foreach (json_decode($json_string) as $getlikes) {  ?> 
```

* * *

**更新：** 当您保存文件并在几毫秒后访问它时，可能是文件系统太慢并且没有向您显示正确的内容。

添加

```
fclose($fileout);
clearstatcache(); 
```

通话前`file_get_contents();`！

> 我建议使用`file_put_contents()`并`file_read_contents()`摆脱这些问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:31:12.733

json_decode 需要一个字符串作为它的第一个参数。你正在传递我猜是一个文件名。您应该像这样首先加载文件...

```
$json = file_get_contents('testson.json');
$data = json_decode($json); 
```

# plugins - Sublime - 激活/停用 - 修改后自动保存 - 插件

> ID：15343565
> 
> 赞同：2
> 
> 时间：2013-03-11T16:24:26.220
> 
> 标签：plugins, sublimetext2, sublimetext

我已经知道 SublimeText2 中用户定义的忽略包设置。有没有办法修改这个插件——例如，使用键盘映射分配——来激活或停用这个有用的自动保存功能？也许将插件链接到包控制启用/禁用功能，并分配一个键盘映射？

这是我第一次发现这个插件的链接： [有没有办法在 sublime 中自动保存每次击键？](https://stackoverflow.com/questions/15277166/is-there-a-way-to-autosave-on-each-keystroke-in-sublime/15279948#15279948)

```
import sublime, sublime_plugin

class SaveOnModifiedListener(sublime_plugin.EventListener):
def on_modified(self, view):
    view.run_command("save") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:28:12.347

您可以在不依赖包控制命令的情况下执行此操作。我可以给你答案，但我知道你一直在探索编写插件，所以这可能是一个很好的练习。这很简单。不过，这里有一些提示。

在 on modified 命令中，您可以检查设置。如果设置不存在，您可以给它一个默认值（我会做 False）。您可以编写一个文本命令来切换设置，也可以简单地使用该`toggle_setting`命令创建一个键绑定。两者都可以，但是如果您编写命令，则可以执行诸如创建状态消息之类的操作，以便知道已修改时保存是否处于活动状态。有关切换设置的信息，请参阅[http://www.sublimetext.com/docs/2/settings.html](http://www.sublimetext.com/docs/2/settings.html)。

如果您只是想要答案，请告诉我，我会发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T07:46:09.567

你可以这样做：

1.  转到首选项-> 设置
2.  添加以下行：

    “save_on_focus_lost”：是的，

它不会自动保存当前文件，但是当您将焦点更改为其他窗口时，它会自动保存，例如 Alt + Tab 到终端。

# php - 数据库选择查询混淆

> ID：15343575
> 
> 赞同：0
> 
> 时间：2013-03-11T16:24:47.560
> 
> 标签：php, mysql, database

我需要将来自单个客户的所有购买一起保存在数据库表中（它将在我的 Orders 表中进行处理），一旦有人浏览产品，系统将搜索购买该产品的客户的 dB 并推荐其他产品他们购买了（您需要检查其他产品的受欢迎程度并避免重复）

数据将存储在名为 Orders 的表中的 mysql 数据库中。然后我需要能够搜索该数据库以查看其他人是否购买了该产品，如果购买了，他们还购买了哪些产品。

所以我想出了这个查询

从订单中选择产品名称

（我知之甚少，如果我走在正确的轨道上，我想不）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:32:26.967

> 我需要将来自单个客户的所有购买一起保存在数据库表中

对于这个，您可能需要创建一个水平视图（受您需要监控购买的客户 ID 限制）[CREATE VIEW](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)。

你能提供你的数据库模式吗？为了创建您需要的查询，您应该连接许多表，这样更容易提供模式以及您的表是如何绑定在一起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:29:34.900

尝试这个

```
 SELECT ProductName
      FROM Orders WHERE client_id in
        (SELECT client_id
         FROM Orders 
         WHERE productname="ProductName "); 
```

# python - 如何在 wxpython 中打印多个同名按钮的 ID？

> ID：15343577
> 
> 赞同：0
> 
> 时间：2013-03-11T16:24:54.683
> 
> 标签：python, wxpython, wxwidgets

我的代码，

```
self.one = wx.Button(self, -1, "Add Button", pos = 100,20)
self.one.Bind(wx.EVT_BUTTON, self.addbt)
self.x = 50
self.idr = 0
self.btarr =  []

def addbt(self.event)      

    self.button = wx.Button(self, self.idr, "Button 1", pos = (self.x,100))
    self.button.Bind(wx.EVT_BUTTON, self.OnId)
    self.idr+=1
    self.x +=150

    self.btarr.append(self.button)

def OnId(self, Event):
    print "The id for the clicked button is: %d" % self.button.GetId() 
    #I wanna print id of indivual buttons clicked 
```

我使用上面的代码动态创建多个按钮。所有创建的按钮都具有相同的参考名称。单击每个按钮时，我应该获得各自的个人 ID。但我得到的只是创建的最后一个按钮的 ID。如何打印按钮的单个 ID？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:55:42.733

你的id在这里总是0

尝试将 idr 设置为唯一的（例如`wx.NewId()`）或 -1

或者`self.idr = 0`按照你的`__init__`方法做

在旁注中，您应该将 self.button 设为列表并将新按钮附加到它...。

每次将 self.button 重新分配给新按钮可能会产生有趣的副作用 WRT 垃圾收集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:28:15.480

您必须获取产生事件的对象：

```
#create five buttons
for i in range(5):
    # I use different x pos in order to locate buttons in a row
    # id is set automatically
    # note they do not have any name ! 
    wx.Button(self.panel, pos=(50*i,50))  

#bind a function to a button press event (from any button)
self.Bind((wx.EVT_BUTTON, self.OnId)

def OnId(self, Event):
    """prints id of pressed button""" 
    #this will retrieve the object that produced the event
    the_button = Event.GetEventObject()

    #this will give its id
    the_id = the_button.GetId()

    print "The id for the clicked button is: %d" % the_id 
```

# user-interface - 获取多个表视图实例以匹配

> ID：15343585
> 
> 赞同：0
> 
> 时间：2013-03-11T16:25:15.620
> 
> 标签：user-interface, uitableview, uistoryboard, uisearchdisplaycontroller

我试图让我返回的单元格`searchResultsTableView`看起来就像“常规”非搜索表视图中的单元格。这是我的[常规观点](http://cl.ly/image/1q2d2n0Q2h0g)。

第一次搜索时，结果的样式与“常规”表格视图完全相同。然而，一旦你取消了 searchDisplayController 并再次点击 Search 按钮，[你就会得到这个](http://cl.ly/image/3n0D2Z3U030i).

在我看来，在第一次加载搜索显示控制器后没有设置背景。

我在`tableView:cellForRowAtIndexPath:`using中实例化单元格`UITableViewCell`，而不是自定义子类。这是该方法的其余部分：

```
PersonInfo *info = nil;
if (tableView == self.searchDisplayController.searchResultsTableView) {
    info = [self.filteredPeopleList objectAtIndex:indexPath.row];
} else {
    info = [self.peopleList objectAtIndex:indexPath.row];
}

cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cellBk.png"]];
cell.detailTextLabel.textColor = [UIColor whiteColor];
cell.backgroundColor = [UIColor clearColor];

cell.imageView.image = info.image;
cell.textLabel.text = info.name;
cell.detailTextLabel.text = info.title;

return cell; 
```

（`tableView`“常规”）并且`searchResultsTableView`在内部设置如下`viewDidLoad`：

```
//Set the default tableView style
self.tableView.backgroundColor = [UIColor clearColor];
self.tableView.opaque = NO;
self.tableView.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];

//Set the self.searchDisplayController background stuff
self.searchDisplayController.searchResultsTableView.backgroundColor = [UIColor clearColor];
self.searchDisplayController.searchResultsTableView.opaque = NO;
self.searchDisplayController.searchResultsTableView.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"background.png"]];
[self.searchDisplayController.searchResultsTableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];

[self.tableView reloadData]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:54:36.850

移动代码以设置`searchResultsTableView`into的样式`searchDisplayController:willShowSearchResultsTableView:`，这是 UISearchDisplayDelegate 的一种方法，可以解决这个问题。

# javascript - TypeScript 与 BreezeJS 结合

> ID：15343586
> 
> 赞同：1
> 
> 时间：2013-03-11T16:25:17.870
> 
> 标签：javascript, typescript, breeze, hottowel

我目前正在使用 TypeScript 和 BreezeJS 一起开发项目原型。我正在使用 John Papa 的 HotTowel 模板，并为每个 HTML 页面编写了我自己的 TypeScript ViewModel。

要使用普通的 Javascript 库，您需要一个 typescript 文件 file.d.ts，它是某种接口类，因此 TS（TypeScript）知道有哪些 javascript 函数。

通过这种组合，我试图创建一个新实体，但我找不到函数 CreateEntity。这位于我的微风.d.ts 文件中，但它不起作用。Intellisense 不会自动完成我的陈述。

因此，如果我键入`this.Manager.CreateEntity`它不会显示 CreateEntity，当然它也不起作用；）我相信错误在 .d.ts 文件中，但我似乎找不到它。希望有人可以帮助我；）

this.Manager 的其他功能正在工作并自动完成！

格。乐华

```
// Type definitions for Breeze 1.0
// Project: http://www.breezejs.com/
// Definitions by: Boris Yankov <https://github.com/borisyankov/>
// Definitions: https://github.com/borisyankov/DefinitelyTyped

// Updated Jan 14 2011 - Jay Traband (www.ideablade.com)

declare module BreezeCore {

    interface ErrorCallback {
        (error: Error): void;
    }

    interface IEnum {
        contains(object: any): bool;
        fromName(name: string): EnumSymbol;
        getNames(): string[];
        getSymbols(): EnumSymbol[];
    }

    class Enum implements IEnum {
        constructor(name: string, methodObj?: any);

        addSymbol(propertiesObj?: any): EnumSymbol;
        contains(object: any): bool;
        fromName(name: string): EnumSymbol;
        getNames(): string[];
        getSymbols(): EnumSymbol[];
        static isSymbol(object: any): bool;
        seal(): void;
    }

    class EnumSymbol {
        parentEnum: IEnum;

        getName(): string;
        toString(): string;
    }

    class Event {
        constructor(name: string, publisher: any, defaultErrorCallback?: ErrorCallback);

        static enable(eventName: string, target: any): void;
        static enable(eventName: string, target: any, isEnabled: bool): void;
        static enable(eventName: string, target: any, isEnabled: Function): void;

        static isEnabled(eventName: string, target: any): bool;
        publish(data: any, publishAsync?: bool, errorCallback?: ErrorCallback): void;
        publishAsync(data: any, errorCallback?: ErrorCallback): void;
        subscribe(callback?: (data: any) => void ): number;
        unsubscribe(unsubKey: number): bool;
    }
}

declare module Breeze {

    interface Entity {
        entityAspect: EntityAspect;
        entityType: EntityType;
    }

    interface ComplexObject {
        complexAspect: ComplexAspect;
        complexType: ComplexType;
    }

    interface IProperty {
        name: string;
        parentEntityType: EntityType;
        validators: Validator[];
        isDataProperty: bool;
        isNavigationProperty: bool;
    }

    interface IStructuralType {
        complexProperties: DataProperty[];
        dataProperties: DataProperty[];
        name: string;
        namespace: string;
        shortName: string;
        unmappedProperties: DataProperty[];
        validators: Validator[];
    }

    class AutoGeneratedKeyType {
        static Identity: AutoGeneratedKeyType;
        static KeyGenerator: AutoGeneratedKeyType;
        static None: AutoGeneratedKeyType;
    }

    class ComplexAspect {
        complexObject: ComplexObject;
        entityAspect: EntityAspect;
        parent: Object;
        parentProperty: DataProperty;
        propertyPath: string;
        originalValues: Object;
    }

    class ComplexType implements IStructuralType {
        complexProperties: DataProperty[];
        dataProperties: DataProperty[];
        name: string;
        namespace: string;
        shortName: string;
        unmappedProperties: DataProperty[];
        validators: Validator[];
        addProperty(dataProperty: DataProperty);
        getProperties(): DataProperty[];
    }

    class DataProperty implements IProperty {
        complexTypeName: string;
        concurrencyMode: string;
        dataType: DataTypeSymbol;
        defaultValue: any;
        fixedLength: bool;
        isComplexProperty: bool;
        isDataProperty: bool;
        isNavigationProperty: bool;
        isNullable: bool;
        isPartOfKey: bool;
        isUnmapped: bool;

        maxLength: number;
        name: string;
        nameOnServer: string;
        parentEntityType: EntityType;
        relatedNavigationProperty: NavigationProperty;
        validators: Validator[];
        constructor(config: DataPropertyOptions);
    }

    interface DataPropertyOptions {
        complexTypeName?: string;
        concurrencyMode?: string;
        dataType?: DataTypeSymbol;
        defaultValue?: any;
        fixedLength?: bool;
        isNullable?: bool;
        isPartOfKey?: bool;
        isUnmapped?: bool;
        maxLength?: number;
        name?: string;
        nameOnServer?: string;
        validators?: Validator[];
    }

    class DataService {
        adapterName: string;
        hasServerMetadata: bool;
        serviceName: string;
        constructor(config: DataServiceOptions);
    }

    interface DataServiceOptions {
        adapterName?: string;
        hasServerMetadata?: bool;
        serviceName?: string;
    }

    class DataTypeSymbol extends BreezeCore.EnumSymbol {
        defaultValue: any;
        isNumeric: bool;
    }
    interface DataType extends BreezeCore.IEnum {
        Binary: DataTypeSymbol;
        Boolean: DataTypeSymbol;
        Byte: DataTypeSymbol;
        DateTime: DataTypeSymbol;
        Decimal: DataTypeSymbol;
        Double: DataTypeSymbol;
        Guid: DataTypeSymbol;
        Int16: DataTypeSymbol;
        Int32: DataTypeSymbol;
        Int64: DataTypeSymbol;
        Single: DataTypeSymbol;
        String: DataTypeSymbol;
        Time: DataTypeSymbol;
        Undefined: DataTypeSymbol;
        toDataType(typeName: string): DataTypeSymbol;
        parseDateFromServer(date: any): Date;

    }
    declare var DataType: DataType;

    class EntityActionSymbol extends BreezeCore.EnumSymbol {
    }
    interface EntityAction extends BreezeCore.IEnum {
        AcceptChanges: EntityActionSymbol;
        Attach: EntityActionSymbol;
        AttachOnImport: EntityActionSymbol;
        AttachOnQuery: EntityActionSymbol;
        Clear: EntityActionSymbol;
        Detach: EntityActionSymbol;
        EntityStateChange: EntityActionSymbol;
        MergeOnImport: EntityActionSymbol;
        MergeOnSave: EntityActionSymbol;
        MergeOnQuery: EntityActionSymbol;
        PropertyChange: EntityActionSymbol;
        RejectChanges: EntityActionSymbol;
    }
    var EntityAction: EntityAction;

    class EntityAspect {
        entity: Entity;
        entityManager: EntityManager;
        entityState: EntityStateSymbol;
        isBeingSaved: bool;
        originalValues: any;

        propertyChanged: PropertyChangedEvent;
        validationErrorsChanged: ValidationErrorsChangedEvent;

        acceptChanges(): void;
        addValidationError(validationError: ValidationError): void;
        clearValidationErrors(): void;
        getKey(forceRefresh?: bool): EntityKey;

        getValidationErrors(): ValidationError[];
        getValidationErrors(property: string): ValidationError[];
        getValidationErrors(property: IProperty): ValidationError[];

        loadNavigationProperty(navigationProperty: string, callback?: Function, errorCallback?: Function): Promise;
        loadNavigationProperty(navigationProperty: NavigationProperty, callback?: Function, errorCallback?: Function): Promise;

        rejectChanges(): void;

        removeValidationError(validator: Validator): void;
        removeValidationError(validator: Validator, property: DataProperty): void;
        removeValidationError(validator: Validator, property: NavigationProperty): void;

        setDeleted(): void;
        setModified(): void;
        setUnchanged(): void;
        validateEntity(): bool;

        validateProperty(property: string, context?: any): bool;
        validateProperty(property: DataProperty, context?: any): bool;
        validateProperty(property: NavigationProperty, context?: any): bool;
    }

    class PropertyChangedEventArgs {
        entity: Entity;
        propertyName: string;
        oldValue: any;
        newValue: any;
    }

    class PropertyChangedEvent extends BreezeCore.Event {
        subscribe(callback?: (data: PropertyChangedEventArgs) => void ): number;
    }

    class ValidationErrorsChangedEventArgs {
        entity: Entity;
        added: ValidationError[];
        removed: ValidationError[];
    }

    class ValidationErrorsChangedEvent extends BreezeCore.Event {
        subscribe(callback?: (data: ValidationErrorsChangedEventArgs) => void ): number;
    }

    class EntityKey {
        constructor(entityType: EntityType, keyValue: any);
        constructor(entityType: EntityType, keyValues: any[]);

        equals(entityKey: EntityKey): bool;
        static equals(k1: EntityKey, k2: EntityKey): bool;
    }

    class EntityManager {
        dataService: DataService;
        keyGeneratorCtor: Function;
        metadataStore: MetadataStore;
        queryOptions: QueryOptions;
        saveOptions: SaveOptions;
        serviceName: string;
        validationOptions: ValidationOptions;

        entityChanged: EntityChangedEvent;
        // hasChanges: BreezeCore.Event;

        constructor(config?: EntityManagerOptions);
        constructor(config?: string);

        addEntity(entity: Entity): Entity;
        attachEntity(entity: Entity, entityState?: EntityStateSymbol): Entity;
        clear(): void;
        createEmptyCopy(): EntityManager;
        detachEntity(entity: Entity): bool;

        executeQuery(query: string, callback?: ExecuteQuerySuccessCallback, errorCallback?: ExecuteQueryErrorCallback): Promise;
        executeQuery(query: EntityQuery, callback?: ExecuteQuerySuccessCallback, errorCallback?: ExecuteQueryErrorCallback): Promise;

        executeQueryLocally(query: EntityQuery): Entity[];
        exportEntities(entities?: Entity[]): string;
        fetchEntityByKey(typeName: string, keyValue: any, checkLocalCacheFirst?: bool): Entity;
        fetchEntityByKey(typeName: string, keyValues: any[], checkLocalCacheFirst?: bool): Entity;
        fetchEntityByKey(entityKey: EntityKey): Entity;
        fetchMetadata(callback?: (schema: any) => void , errorCallback?: BreezeCore.ErrorCallback): Promise;
        generateTempKeyValue(entity: Entity): any;
        getChanges(): Entity[];
        getChanges(entityTypeName: string): Entity[];
        getChanges(entityTypeNames: string[]): Entity[];
        getChanges(entityType: EntityType): Entity[];
        getChanges(entityTypes: EntityType[]): Entity[];

        getEntities(entityTypeName: string, entityState?: EntityStateSymbol): Entity[];
        getEntities(entityTypeNames?: string[], entityState?: EntityStateSymbol): Entity[];
        getEntities(entityTypeName?: string, entityStates?: EntityStateSymbol[]): Entity[];
        getEntities(entityTypeNames?: string[], entityStates?: EntityStateSymbol[]): Entity[];

        getEntities(entityType: EntityType, entityState?: EntityStateSymbol): Entity[];
        getEntities(entityTypes?: EntityType[], entityState?: EntityStateSymbol): Entity[];
        getEntities(entityType?: EntityType, entityStates?: EntityStateSymbol[]): Entity[];
        getEntities(entityTypes?: EntityType[], entityStates?: EntityStateSymbol[]): Entity[];

        getEntityByKey(typeName: string, keyValue: any): Entity;
        getEntityByKey(typeName: string, keyValues: any[]): Entity;
        getEntityByKey(entityKey: EntityKey): Entity;

        hasChanges(): bool;
        hasChanges(entityTypeName: string): bool;
        hasChanges(entityTypeNames: string[]): bool;
        hasChanges(entityType: EntityType): bool;
        hasChanges(entityTypes: EntityType[]): bool;

        static importEntities(exportedString: string, config?: { mergeStrategy?: MergeStrategySymbol; }): EntityManager;
        importEntities(exportedString: string, config?: { mergeStrategy?: MergeStrategySymbol; }): EntityManager;

        rejectChanges(): Entity[];
        saveChanges(entities?: Entity[], saveOptions?: SaveOptions, callback?: SaveChangesSuccessCallback, errorCallback?: SaveChangesErrorCallback): Promise;
        setProperties(config: EntityManagerProperties): void;
    }

    interface EntityManagerOptions {
        serviceName?: string;
        dataService?: DataService;
        metadataStore?: MetadataStore;
        queryOptions?: QueryOptions;
        saveOptions?: SaveOptions;
        validationOptions?: ValidationOptions;
        keyGeneratorCtor?: Function;
    }

    interface EntityManagerProperties {
        serviceName?: string;
        dataService?: DataService;
        queryOptions?: QueryOptions;
        saveOptions?: SaveOptions;
        validationOptions?: ValidationOptions;
        keyGeneratorCtor?: Function;
    }

    interface ExecuteQuerySuccessCallback {
        (data: { results: Entity[]; query: EntityQuery; XHR: XMLHttpRequest; }): void;
    }

    interface ExecuteQueryErrorCallback {
        (error: { query: EntityQuery; XHR: XMLHttpRequest; }): void;
    }

    interface SaveChangesSuccessCallback {
        (saveResult: { entities: Entity[]; keyMappings: any; XHR: XMLHttpRequest; }): void;
    }

    interface SaveChangesErrorCallback {
        (error: { XHR: XMLHttpRequest; }): void;
    }

    class EntityChangedEventArgs {
        entity: Entity;
        entityAction: EntityActionSymbol;
        args: Object;
    }

    class EntityChangedEvent extends BreezeCore.Event {
        subscribe(callback?: (data: EntityChangedEventArgs) => void ): number;
    }

    class EntityQuery {
        entityManager: EntityManager;
        orderByClause: OrderByClause;
        parameters: Object;
        queryOptions: QueryOptions;
        resourceName: string;
        skipCount: number;
        takeCount: number;
        wherePredicate: Predicate;

        constructor(resourceName?: string);

        execute(callback?: ExecuteQuerySuccessCallback, errorCallback?: ExecuteQueryErrorCallback): Promise;
        executeLocally(): Entity[];
        expand(propertyPaths: string[]): EntityQuery;
        expand(propertyPaths: string): EntityQuery;
        static from(resourceName: string): EntityQuery;
        from(resourceName: string): EntityQuery;
        static fromEntities(entity: Entity): EntityQuery;
        static fromEntities(entities: Entity[]): EntityQuery;
        static fromEntityKey(entityKey: EntityKey): EntityQuery;
        static fromEntityNavigation(entity: Entity, navigationProperty: NavigationProperty): EntityQuery;
        inlineCount(enabled?: bool): EntityQuery;
        orderBy(propertyPaths: string): EntityQuery;
        orderBy(propertyPaths: string[]): EntityQuery;
        orderByDesc(propertyPaths: string): EntityQuery;
        orderByDesc(propertyPaths: string[]): EntityQuery;
        select(propertyPaths: string): EntityQuery;
        select(propertyPaths: string[]): EntityQuery;
        skip(count: number): EntityQuery;
        take(count: number): EntityQuery;
        top(count: number): EntityQuery;

        using(obj: EntityManager): EntityQuery;
        using(obj: MergeStrategySymbol): EntityQuery;
        using(obj: FetchStrategySymbol): EntityQuery;

        where(predicate: Predicate): EntityQuery;
        where(property: string, operator: string, value: any): EntityQuery;
        where(property: string, operator: FilterQueryOpSymbol, value: any): EntityQuery;
        where(predicate: FilterQueryOpSymbol): EntityQuery;
        withParameters(params: Object): EntityQuery;
    }

    interface OrderByClause {
    }

    class EntityStateSymbol extends BreezeCore.EnumSymbol {
        isAdded(): bool;
        isAddedModifiedOrDeleted(): bool;
        isDeleted(): bool;
        isDetached(): bool;
        isModified(): bool;
        isUnchanged(): bool;
        isUnchangedOrModified(): bool;
    }
    interface EntityState extends BreezeCore.IEnum {
        Added: EntityStateSymbol;
        Deleted: EntityStateSymbol;
        Detached: EntityStateSymbol;
        Modified: EntityStateSymbol;
        Unchanged: EntityStateSymbol;
    }
    var EntityState: EntityState;

    class EntityType implements IStructuralType {
        autoGeneratedKeyType: AutoGeneratedKeyType;
        complexProperties: DataProperty[];
        concurrencyProperties: DataProperty[];
        dataProperties: DataProperty[];
        defaultResourceName: string;
        foreignKeyProperties: DataProperty[];
        keyProperties: DataProperty[];
        metadataStore: MetadataStore;
        name: string;
        namespace: string;
        navigationProperties: NavigationProperty[];
        shortName: string;
        unmappedProperties: DataProperty[];
        validators: Validator[];

        constructor(config: MetadataStore);
        constructor(config: EntityTypeOptions);

        addProperty(property: IProperty): void;
        addValidator(validator: Validator, property?: IProperty): void;
        createEntity(initialValues?: Object): Entity;
        getDataProperty(propertyName: string): DataProperty;
        getEntityCtor(): Function;
        getNavigationProperty(propertyName: string): NavigationProperty;
        getProperties(): IProperty[];
        getProperty(propertyPath: string, throwIfNotFound?: bool): IProperty;
        getPropertyNames(): string[];
        setProperties(config: EntityTypeProperties): void;
        toString(): string;
    }

    interface EntityTypeOptions {
        shortName?: string;
        namespace?: string;
        autogeneratedKeyType?: AutoGeneratedKeyType;
        defaultResourceName?: string;
    }

    interface EntityTypeProperties {
        autogeneratedKeyType?: AutoGeneratedKeyType;
        defaultResourceName?: string;
    }

    class FetchStrategySymbol extends BreezeCore.EnumSymbol {
    }
    interface FetchStrategy extends BreezeCore.IEnum {
        FromLocalCache: FetchStrategySymbol;
        FromServer: FetchStrategySymbol;
    }
    var FetchStrategy: FetchStrategy;

    class FilterQueryOpSymbol extends BreezeCore.EnumSymbol {
    }
    interface FilterQueryOp extends BreezeCore.IEnum {
        Contains: FilterQueryOpSymbol;
        EndsWith: FilterQueryOpSymbol;
        Equals: FilterQueryOpSymbol;
        GreaterThan: FilterQueryOpSymbol;
        GreaterThanOrEqual: FilterQueryOpSymbol;
        LessThan: FilterQueryOpSymbol;
        LessThanOrEqual: FilterQueryOpSymbol;
        NotEquals: FilterQueryOpSymbol;
        StartsWith: FilterQueryOpSymbol;
    }
    var FilterQueryOp: FilterQueryOp;

    class LocalQueryComparisonOptions {
        static caseInsensitiveSQL: LocalQueryComparisonOptions;
        static defaultInstance: LocalQueryComparisonOptions;

        constructor(config: { name?: string; isCaseSensitive?: bool; usesSql92CompliantStringComparison?: bool; });

        setAsDefault(): void;
    }

    class MergeStrategySymbol extends BreezeCore.EnumSymbol {
    }
    interface MergeStrategy extends BreezeCore.IEnum {
        OverwriteChanges: MergeStrategySymbol;
        PreserveChanges: MergeStrategySymbol;
    }
    var MergeStrategy: MergeStrategy;

    class MetadataStore {
        namingConvention: NamingConvention;

        constructor(config?: MetadataStoreOptions);
        addDataService(dataService: DataService): void;
        addEntityType(structuralType: IStructuralType): void;
        exportMetadata(): string;
        fetchMetadata(dataService: string, callback?: (data) => void , errorCallback?: BreezeCore.ErrorCallback): Promise;
        fetchMetadata(dataService: DataService, callback?: (data) => void , errorCallback?: BreezeCore.ErrorCallback): Promise;
        getDataService(serviceName: string): DataService;
        getEntityType(entityTypeName: string, okIfNotFound?: bool): IStructuralType;
        getEntityTypes(): IStructuralType[];
        hasMetadataFor(serviceName: string): bool;
        static importMetadata(exportedString: string): MetadataStore;
        importMetadata(exportedString: string): MetadataStore;
        isEmpty(): bool;
        registerEntityTypeCtor(entityTypeName: string, entityCtor: Function, initializationFn?: (entity: Entity) => void ): void;
        trackUnmappedType(entityCtor: Function, interceptor?: Function);
    }

    interface MetadataStoreOptions {
        namingConvention?: NamingConvention;
        localQueryComparisonOptions?: LocalQueryComparisonOptions;
    }

    class NamingConvention {
        static camelCase: NamingConvention;
        static defaultInstance: NamingConvention;
        static none: NamingConvention;

        constructor(config: NamingConventionOptions);

        clientPropertyNameToServer(clientPropertyName: string): string;
        clientPropertyNameToServer(clientPropertyName: string, property: IProperty): string;

        serverPropertyNameToClient(serverPropertyName: string): string;
        serverPropertyNameToClient(serverPropertyName: string, property: IProperty): string;

        setAsDefault();
    }

    interface NamingConventionOptions {
        serverPropertyNameToClient?: (name: string) => string;
        clientPropertyNameToServer?: (name: string) => string;
    }

    class NavigationProperty implements IProperty {
        associationName: string;
        entityType: EntityType;
        foreignKeyNames: string[];
        inverse: NavigationProperty;
        isDataProperty: bool;
        isNavigationProperty: bool;
        isScalar: bool;
        name: string;
        parentEntityType: EntityType;
        relatedDataProperties: DataProperty[];
        validators: Validator[];

        constructor(config: NavigationPropertyOptions);
    }

    interface NavigationPropertyOptions {
        name?: string;
        nameOnServer?: string;
        entityTypeName: string;
        isScalar?: bool;
        associationName?: string;
        foreignKeyNames?: string[];
        foreignKeyNamesOnServer?: string[];
        validators?: Validator[];
    }

    class Predicate {
        constructor(property: string, operator: string, value: any, valueIsLiteral?: bool);
        constructor(property: string, operator: FilterQueryOpSymbol, value: any, valueIsLiteral?: bool);

        and: PredicateMethod;
        static and: PredicateMethod;

        static create: PredicateMethod;

        static isPredicate(o: any): bool;

        static not(predicate: Predicate): Predicate;
        not(): Predicate;

        static or: PredicateMethod;
        or: PredicateMethod;

        toFunction(): Function;
        toString(): string;
        validate(entityType: EntityType): void;
    }

    interface PredicateMethod {
        (predicates: Predicate[]): Predicate;
        (...predicates: Predicate[]): Predicate;
        (property: string, operator: string, value: any, valueIsLiteral?: bool): Predicate;
        (property: string, operator: FilterQueryOpSymbol, value: any, valueIsLiteral?: bool): Predicate;
    }

    class Promise {
        fail(errorCallback: Function): Promise;
        fin(finallyCallback: Function): Promise;
        then(callback: Function): Promise;
    }

    class QueryOptions {
        static defaultInstance: QueryOptions;
        fetchStrategy: FetchStrategySymbol;
        mergeStrategy: MergeStrategySymbol;

        constructor(config?: QueryOptionsConfiguration);

        setAsDefault(): void;
        using(config: QueryOptionsConfiguration): QueryOptions;
        using(config: MergeStrategySymbol): QueryOptions;
        using(config: FetchStrategySymbol): QueryOptions;
    }

    interface QueryOptionsConfiguration {
        fetchStrategy?: FetchStrategySymbol;
        mergeStrategy?: MergeStrategySymbol;
    }

    class SaveOptions {
        allowConcurrentSaves: bool;
        static defaultInstance: SaveOptions;

        constructor(config?: { allowConcurrentSaves?: bool; });

        setAsDefault(): SaveOptions;
    }

    class ValidationError {
        context: any;
        errorMessage: string;
        property: IProperty;
        propertyName: string;
        validator: Validator;

        constructor(validator: Validator, context: any, errorMessage: string);
    }

    class ValidationOptions {
        static defaultInstance: ValidationOptions;
        validateOnAttach: bool;
        validateOnPropertyChange: bool;
        validateOnQuery: bool;
        validateOnSave: bool;

        constructor(config?: ValidationOptionsConfiguration);

        setAsDefault(): ValidationOptions;
        using(config: ValidationOptionsConfiguration): ValidationOptions;
    }

    interface ValidationOptionsConfiguration {
        validateOnAttach?: bool;
        validateOnSave?: bool;
        validateOnQuery?: bool;
        validateOnPropertyChange?: bool;
    }

    class Validator {
        static messageTemplates: any;

        constructor(name: string, validatorFn: ValidatorFunction, context?: any);

        static bool(): Validator;
        static byte(): Validator;
        static date(): Validator;
        static duration(): Validator;
        getMessage(): string;
        static guid(): Validator;
        static int16(): Validator;
        static int32(): Validator;
        static int64(): Validator;
        static maxLength(context: { maxLength: number; }): Validator;
        static number(): Validator;
        static required(): Validator;
        static string(): Validator;
        static stringLength(context: { maxLength: number; minLength: number; }): Validator;
        validate(value: any, context?: any): ValidationError;
    }

    interface ValidatorFunction {
        (value: any, context: ValidatorFunctionContext): void;
    }

    interface ValidatorFunctionContext {
        value: any;
        validatorName: string;
        displayName: string;
        messageTemplate: string;
        message?: string;
    }
}

declare var breeze : Breeze; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:54:43.150

我没有使用过 BreezeJS - 所以我是基于[对文档](http://www.breezejs.com/documentation/creating-entities)的一瞥。

看起来定义文件中缺少定义......例如，看起来应该是可能的：

```
var myThing = manager.createEntity('Test', { id:5 , name:'test'}); 
```

但是`EntityManager`该类缺少此声明：

```
createEntity(entityTypeName: string, propertyInitializer: {}): Entity; 
```

我已经为此提交了一个[pull request到Definite Typed](https://github.com/borisyankov/DefinitelyTyped/pull/390)。

# c# - Azure Drive vs Block Blob vs Table

> ID：15343587
> 
> 赞同：2
> 
> 时间：2013-03-11T16:25:18.840
> 
> 标签：c#, .net, azure

我无法决定通过 Azure 存储处理以下场景的最佳方法。

*   ~1500+ CSV 文件在 ~1MB 到 ~500MB 之间 ~20GB 数据
*   每个文件使用完全相同的模型，每个**model.toString()**是 ~50 个字符 ~400byte
*   每个工作日，在 6 小时内，每分钟约 8000 多个新行
*   根据属性值，每一行都转到正确的文件
*   只要支持多读，就不需要多实例写入，即使快照周期有几秒钟的延迟也可以。

我想使用**Block Blob**，但将约 400MB 的单个文件下载到计算机中，只是添加一行并将其上传回来是没有意义的，我找不到其他方法。

不幸的是，有一个使用**Page Blob**的 Drive 选项不受 SDKv2 支持，这让我担心可能会停止支持

最后一个是**Table**看起来不错，除了继续读取几十万行之外可能会成为一个问题

基本上，我更喜欢在立即检索数据时写入文件。但是，如果值得放弃，我可以在一天结束时接受一次更新，这意味着每个文件大约 300-1000 行

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:46:43.760

根据您的上述要求，Azure 表是最佳选择。使用单个 Azure 存储帐户，您可以获得以下内容：

**存储事务**– 每秒最多 20,000 个实体/消息/blob

**单表分区**——表分区是表中具有相同分区键值的所有实体，大多数表都有很多分区。单个分区的吞吐量目标是：

*   每秒最多 20,000 个实体
*   请注意，这是针对单个分区，而不是单个表。因此，具有良好分区的表每秒可以处理多达几千个请求（最多存储帐户目标 20,000）。

**表**- 为表使用更细粒度的 PartitionKey，以便我们能够自动将表分区分布在更多服务器上。

关于连续读取“几十万行”，您的主要障碍是存储级别 20,000 个事务/秒，但是如果您将分区设计得如此细化以在数百台服务器上对它们进行分段，您可以在几分钟内读取“数十万行”。

来源：

1.  [Windows Azure 存储抽象及其可扩展性目标](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)
2.  [Windows Azure 的平面网络存储和 2012 年可扩展性目标](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)

# c# - 与 SSMS 相比，LINQ 查询非常慢

> ID：15343594
> 
> 赞同：8
> 
> 时间：2013-03-11T16:25:44.530
> 
> 标签：c#, sql-server, sql-server-2008, entity-framework, entity-framework-5

**主要问题** 是否存在一些已知的限制、snafu、配置问题等等，这可以解释所有事情都是平等的，从 C# linq 运行的查询可能需要比以任何其他方式运行时长一个数量级的时间才能完成？

这是 linq 中的缩写查询。这是视图和表之间非常直接的连接。

```
var query = (
    from content in context.ApprovedContentView
                where content.BucketId == 13098 && content.ContentTypeId == 5220 
    join item in context.ActiveContent
                on content.ContentId equals item.ItemId
        where
                item.IsSuchAndSuch == true && item.SomeOtherProperty == 5000 
        select new 
        {
            ItemId = item.ItemId,
            Title = item.Title,
            SubTitle = item.SubTitle,
            DescriptionText = item.DescriptionText,
            /* about 10 other scalar fields */

        });

int count = query.Count();
var data = query.OrderByDescending(item => item.ItemId).Skip(5).Take(3); 
```

这是它生成的（缩写/格式化）SQL

```
SELECT 
[GroupBy1].[A1] AS [C1]
FROM ( SELECT 
    COUNT(1) AS [A1]
    FROM       [SchemaX].[ApprovedContentView] AS [Extent1]
    INNER JOIN [SchemaX].[ActiveContent] AS [Extent2] ON [Extent1].[ContentId] = [Extent2].[ItemId]
    WHERE (13098 = [Extent1].[BucketId]) AND (5220 = [Extent1].[ContentTypeId ]) AND 
    (1 = [Extent2].[IsSuchAndSuch]) AND (5000 = [Extent2].[SomeOtherProperty ])
)  AS [GroupBy1]
GO

SELECT TOP (3) 
[Filter1].[BucketId] AS [BucketId], 
[Filter1].[ItemId] AS [ItemId], 
[Filter1].[Title] AS [Title], 
[Filter1].[SubTitle] AS [SubTitle], 
[Filter1].[DescriptionText] AS [DescriptionText], 
/* other fields */
FROM ( SELECT 
            [Extent1].[BucketId] AS [BucketId], 
            [Extent2].[ItemId] AS [ItemId], 
            [Extent2].[Title] AS [Title], 
            [Extent2].[SubTitle] AS [SubTitle], 
            [Extent2].[DescriptionText] AS [DescriptionText], 
            /* other fields */
            row_number() OVER (ORDER BY [Extent2].[DealId] DESC) AS [row_number]
    FROM  [SchemaX].[ApprovedContentView] AS [Extent1]
    INNER JOIN [SchemaX].[ActiveContent] AS [Extent2] ON [Extent1].[ContentId] = [Extent2].[ItemId]
    WHERE (13098 = [Extent1].[BucketId]) AND (5220 = [Extent1].[ContentTypeId ]) AND 
            (1 = [Extent2].[IsSuchAndSuch]) AND (5000 = [Extent2].[SomeOtherProperty ])
)  AS [Filter1]
WHERE [Filter1].[row_number] > 5
ORDER BY [Filter1].[DealId] DESC 
```

不同的场景我的速度测试基于观察使用 sql profiler 运行的查询

**当这个linq** 查询在我的 c# 应用程序中作为其正常操作的一部分执行时，我观察到在 sql profiler 中，选择计数需要整整 3 秒才能完成，奇怪的是，产生投影的查询只需要 200 毫秒，并且时间是可重复的，这似乎排除了查询执行计划缓存问题。（使用实体框架 5、sql server 2008 r2 运行）

**在 LINQPAD 中** ，当我使用 C# 应用程序的 dll 的数据上下文通过 LinqPad 执行 linq 语句时，计数和投影均在四分之一秒内完成（约 224 毫秒，总运行时间约 450 毫秒）。

**在 SSMS** 中，无论 sql 的来源如何，当我复制 sql 配置文件报告它执行并将其粘贴到管理工作室窗口并执行的实际代码时，大约需要 224 毫秒。

**数据库调整** 在 SSMS 中，当我评估从分析器（从代码或从 linqpad）复制的 sql 的实际执行计划时，我发现 sql 正在使用所有正确的索引，并且只报告索引搜索——没有表扫描，没有摆脱查找。

那么，什么给了？有人见过这样的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T16:44:41.487

我会确保您没有为您的应用程序缓存的错误执行计划。在对已使用的数据库进行架构工作时，我经常会遇到这种情况。您可能有一个已为应用程序执行上下文缓存的执行计划，该执行计划由于架构更改而效率低下，而为您的 SSMS 查询生成的执行计划是最新的，并且没有看到这些性能问题。

我会尝试使用[DBCC FREEPROCCACHE](http://msdn.microsoft.com/en-us/library/ms174283%28v=sql.105%29.aspx)来强制更新您的执行计划，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T16:24:19.247

[ARITHABORT](http://msdn.microsoft.com/en-us/library/ms190306.aspx)在 SSMS 中默认为 ON，在 SqlClient 连接中默认为 OFF。

如果问题再次出现，请添加：

```
new SqlCommand("SET ARITHABORT ON", connection).ExecuteNonQuery(); 
```

# android - Android不同的整数数组在图库中显示图像

> ID：15343597
> 
> 赞同：0
> 
> 时间：2013-03-11T16:25:56.637
> 
> 标签：android, arrays, gallery

我有不同的可绘制整数数组，如下所示：

```
 Integer[] imagesR = {
                    R.drawable.albacoretuna, R.drawable.almonds
            };

 Integer[] imagesACE = {
                    R.drawable.captopril, R.drawable.lisinopril, R.drawable.vasotec
            }; 
```

每个整数数组应该只显示基于用户点击的。

以下是我尝试过的：

```
 Gallery gallery = (Gallery) findViewById (R.id.gallery3);

    Bundle extras = getIntent().getExtras();
       if (extras != null) {
            String value = extras.getString("medication");
            if( value.equals("Angiotensin II Receptor Blockers") ){
                header.setText("Angiotensin II Receptor Blockers");
                note.setText(R.string.receptorblockers);
                gallery.setAdapter(new ImageAdapter.IMAGE_SET_ONE);

            }
            else if( value.equals("Angiotensin Converting Enzyme (ACE) Inhibitors") ){
                header.setText("Angiotensin Converting Enzyme (ACE) Inhibitors");
                note.setText(R.string.aceinhibitorsdescription);

            }

         public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;

    Integer[] mImageIds = {

    };

    public ImageAdapter(Context c) {
        mContext = c;
        TypedArray a = obtainStyledAttributes(R.styleable.HelloGallery);
        // mGalleryItemBackground = a.getResourceId(
        // R.styleable.HelloGallery_android_galleryItemBackground, 0);
        a.recycle();

    }
    public ImageAdapter(Context c,Integer gallery[]) {
        mContext = c;
        mImageIds=gallery;
    }
    public int getCount() {
        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public static final int IMAGE_SET_ONE = 1;
    public static final int IMAGE_SET_TWO = 2;

    private int mImageSet;

    public void setImageSet(int imageSet) {
        mImageSet = imageSet;
    }

    public View getView(int pos, View convertView, ViewGroup arg2) {
        ImageView i;
        //= new ImageView(mContext);

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            i = new ImageView(mContext);
            i.setLayoutParams(new GridView.LayoutParams(85, 85));
            i.setScaleType(ImageView.ScaleType.CENTER_CROP);
            i.setPadding(8, 8, 8, 8);
        } else {
            i = (ImageView) convertView;
        }

        if(mImageSet == IMAGE_SET_ONE) {
            // load the correct image in...
            Integer[] imagesACE = {
                    R.drawable.captopril, R.drawable.lisinopril, R.drawable.vasotec
            };
            i.setImageResource(imagesACE[pos]);
        } else if(mImageSet == IMAGE_SET_TWO) {
            // load the correct image in...
            Integer[] imagesR = {
                    R.drawable.albacoretuna, R.drawable.almonds
            };
            i.setImageResource(imagesR[pos]);
        }

        //i.setImageResource(mImageIds[arg0]);
        return i;
    }
} 
```

但我似乎无法弄清楚如何正确地做到这一点。有没有人已经尝试过这样的事情？你能帮我完成这个吗？我会很感激你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:56:27.807

1）改变你的构造函数`ImageAdapter`是这样的：

```
public ImageAdapter(Context c,int imageSet) {
        this.mContext = c;
        this.mImageSet=imageSet;
    } 
```

2）当您尝试将 设置`adapter`为您的`Gallery`实例时，请使用以下代码：

```
//case to display drawables in array1
gallery.setAdapter(new ImageAdapter(YourActivity.this, ImageAdapter.IMAGE_SET_ONE));

//case to display drawables in array2
gallery.setAdapter(new ImageAdapter(YourActivity.this, ImageAdapter.IMAGE_SET_TWO)); 
```

# php - 表单验证仅在用户名不存在时发送

> ID：15343600
> 
> 赞同：0
> 
> 时间：2013-03-11T16:26:02.457
> 
> 标签：php, jquery, validation

我创建了一个 JQuery 脚本，用于检查数据库中的用户名，如果您在 keyup 上键入现有名称，则会显示错误，这工作正常，但即使此错误为真，表单仍会提交。我可以添加哪些其他代码来检查此错误是否不存在？这是我到目前为止的代码：

```
<script>
        $(function()
        {
        var ck_username = /^[A-Za-z0-9_]{5,15}$/;
// Username validation
        $('#username').keyup(function()
        {
        var username=$(this).val();
        if (!ck_username.test(username))
        {
        $('.usernameStatus').removeClass("success").addClass("error");
        }
        else
        {
        $('.usernameStatus').removeClass("success").removeClass("error");
            jQuery.ajax({
                type: 'POST',
                url: 'check-users.php',
                data: 'username='+ username,
                cache: false,
                success: function(response){
                    if(response == 1){
                        $('.usernameStatus').removeClass("success").addClass("error");
                    }
                    else {
                        $('.usernameStatus').removeClass("error").addClass("success");
                    }
                }
            });
        }
        });
// Submit button action
        $('#registerButton').click(function()
        {
        var username=$("#username").val();
        if(ck_username.test(username))
        {           
            jQuery.post("register.php", {
            username:username,
            },  function(data, textStatus){
            if(data == 1){
            window.location.replace("registered.php");
            }else{}
            });
        }else{
        alert("Something went Wrong - Please Check All Fields Are Filled In Correctly");
        }
        return false;
        });
        //End
        });
        </script> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:34:59.060

请查看代码注释，假设这`data == 1`意味着该名称已注册并且您将显示错误

```
<script>
        $(function()
        {
        var name = false; // a variable that holds false as the initial value
        var ck_username = /^[A-Za-z0-9_]{5,15}$/;
// Username validation
        $('#username').keyup(function()
        {
        var username=$(this).val();
        if (!ck_username.test(username))
        {
        $('.usernameStatus').removeClass("success").addClass("error");
        }
        else
        {
        $('.usernameStatus').removeClass("success").removeClass("error");
            jQuery.ajax({
                type: 'POST',
                url: 'check-users.php',
                data: 'username='+ username,
                cache: false,
                success: function(response){
                    if(response == 1){
                        $('.usernameStatus').removeClass("success").addClass("error");
                    }
                    else {
                        $('.usernameStatus').removeClass("error").addClass("success");
                        name = true; // on success , if the name isnt there then assign it to true
                    }
                }
            });
        }
        });
// Submit button action
        $('#registerButton').click(function()
        {
        var username=$("#username").val();
        if(ck_username.test(username) && name == true) // check for the value of name
        {           
            jQuery.post("register.php", {
            username:username,
            },  function(data, textStatus){
            if(data == 1){
            window.location.replace("registered.php");
            }else{}
            });
        }else{
        alert("Something went Wrong - Please Check All Fields Are Filled In Correctly");
        }
        return false;
        });
        //End
        });
        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:36:24.660

而不是根据正则表达式检查用户名，您应该检查状态，`$('.usernameStatus')`因为它可能通过正则表达式测试但仍然无法通过从您的数据库返回的重复测试。

所以

```
$('#registerButton').click(function()
        {
        var username=$("#username").val();
        if(ck_username.test(username))
        { 
```

应该改为：

```
$('#registerButton').click(function()
        {
        var username=$("#username").val();
        if(!$('.usernameStatus').hasClass('error'))
        { 
```

更好的是引入一个变量来保存名称字段的有效性，这样您就不需要一直获取 DOM 元素并检查它的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:37:05.153

我认为您的错误可能是由于`data`语法错误

它应该是这样的：

```
data: 'username:'+ username, 
```

调试你的 PHP 代码，看看它现在是否正确接收用户名

# openscenegraph - osgText 与 getBound()

> ID：15343601
> 
> 赞同：1
> 
> 时间：2013-03-11T16:26:04.110
> 
> 标签：openscenegraph

是否可以在 osgText 上执行 getBound() 而不在此之前设置其位置，即

```
osg::ref_ptr<osgText::Text> label = new osgText::Text;
geode->addDrawable( label.get() );
label->setText("Event: 
dist = label->getBound().xMax(); 
```

在决定位置后的某个地方我会这样做

```
label->setPosition(pos); 
```

我现在面临的问题是 getBound() 似乎返回 GL 和 GLES 构建的差异值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T17:27:46.547

由于您尚未设置包围体，OSG 将返回默认的 BoundingBox 参数（xmax、xmin 等）。默认的 BoundingBox 将取决于您的 GL 构建。

理想情况下，一旦您设置了节点的边界，getBound() 就会返回它们。

# java - 从切换到分支/标签历史记录中删除 url

> ID：15343605
> 
> 赞同：1
> 
> 时间：2013-03-11T16:26:23.407
> 
> 标签：java, eclipse, svn, branch, subclipse

我的项目 -> 团队 -> 切换到另一个 Brance/Tag/revision

我想从历史记录中删除一些网址：

![在此处输入图像描述](../Images/b3231775aa400720f35859e8cc0a30c6.png)

我该怎么做？

我想了解如何创建分支以及如何从分支切换到主干......我还找不到任何好的教程或 youtube 教程。如果你知道一些，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:59:19.777

Eclipse 中没有 UI 可以编辑这些记住的值。它们只是藏在偏好商店中。它只记住少数 URL，因此当您添加更多 URL 时它们会消失。他们不应该引起任何问题。它只是为了方便而记住。

# ruby-on-rails - Rails - 从 javascript/coffeescript 数据创建多个资源

> ID：15343606
> 
> 赞同：0
> 
> 时间：2013-03-11T16:26:27.247
> 
> 标签：ruby-on-rails, resources

假设我有一个模型：**事物**

```
class Thing < ActiveRecord::Base
attr_accessible :name, :url 
```

在我的咖啡脚本中，我有一个生成 JSON 对象数组的函数，例如：

```
[{"url":"https://www.example.com/1","name":"1"},
{"url":"https://www.example.com/2","name":"2"},
{"url":"https://www.example.com/3","name":"3"}] 
```

当用户单击**Thing***索引*页面中的按钮时，将调用该函数。

 **我想要的是根据咖啡脚本函数生成的 JSON 对象创建多个**事物资源。**

最好的方法是什么？我正在考虑使用 Ajax 重定向到**Thing**的创建操作，但不确定这是最好的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:32:51.373

是的，AJAX 是要走的路。您要做的就是将这些对象提交给您将在其中制作`Thing`模型的控制器。

如果您提交所有这些对象并且一次并希望它们全部在一个镜头中创建，您可以在`create`动作中执行此操作，或者您可以在`create_all`动作中执行此操作。我喜欢`create_all`动作的概念，因为它让我们知道这不是一个简单的`create`动作，人们已经学会假设它只是使一个对象成为 1。这是个人喜好。**

# eclipse - 无法安装 Eclipse Juno CheckStyle 插件

> ID：15343609
> 
> 赞同：0
> 
> 时间：2013-03-11T16:26:32.777
> 
> 标签：eclipse, eclipse-plugin, checkstyle

我听说 Java Eclipse 的一个很好的指标插件是 CheckStyle 插件。因此，我尝试按照[他们的说明](http://bit.ly/14NWRCY)进行安装，但我不断收到以下信息：

![在此处输入图像描述](../Images/3e730e63f4aee4bef76e582ca1b11ee0.png)

有人可以指出我如何解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:52:37.657

我想我完全知道为什么它不起作用。我必须运行一个 Eclipse Juno 更新。为了进行更新，我必须以管理员身份运行 Eclipse。然后运行更新，它工作，即它更新成功。

然后我按照他们网站上的说明运行了 CheckStyle 插件安装，它运行良好。

希望这可以帮助。

# neo4j - 密码查询中无法识别索引

> ID：15343611
> 
> 赞同：4
> 
> 时间：2013-03-11T16:26:37.683
> 
> 标签：neo4j, cypher

我试图在我的本地控制台中重现[莎士比亚的数据集和查询。](http://console.neo4j.org/?id=shakespeare)我创建了节点和关系。

```
neo4j-sh (0)$ START theater=node:venues(theatre = 'Theatre Royal'), newcastle=node:cities(city = 'Newcastle'), bard=node:authors('firstname:William AND lastname:Shakespeare') MATCH (newcastle)<-[:IN*1..4]-(theater)<-[:VENUE]-(performance)-[:PERFORMED]->(play)<-[w:WROTE]-(bard)  WHERE w.date > 1608  RETURN play;
==> MissingIndexException: Index `authors` does not exist 
```

没有识别作者、地点和城市索引，所以我去***添加和删除索引***选项卡并创建了这些索引。这是屏幕转储

```
neo4j-sh (0)$ index --indexes
==> Node indexes:
==>   venues
==>   cities
==>   authors
==> 
==> Relationship indexes: 
```

但是现在，同样的查询没有错误但什么也没有返回。我究竟做错了什么。从 Web 控制台创建索引的语法不是很清楚。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:03:02.533

创建新索引时，**现有节点不会自动添加到索引中**。新创建/编辑的节点将自动添加，但您必须手动处理现有节点。

您可以通过三种方式将现有节点放入索引中：

1.  `Index`使用命令使用 Neo4j Shell 手动索引节点
2.  对您的节点进行无用的`SET`操作以强制它们被触摸（即`SET myNode.prop = myNode.prop`）
3.  删除节点并使用相同的属性和关系重新创建它们

[您可以在文档](http://docs.neo4j.org/chunked/milestone/indexing.html)中阅读有关 neo4j 索引的更多信息。

# java - URL 重写过滤器的异常行为

> ID：15343615
> 
> 赞同：0
> 
> 时间：2013-03-11T16:26:47.650
> 
> 标签：java, jsf-2, url-rewriting, tuckey-urlrewrite-filter

我正在使用[Tuckey URLRewriteFilter](http://tuckey.org/urlrewrite/)。在我的应用程序中，我有以下页面和按钮：

1.  `inside.xhtml`应用程序上下文中的页面： [http ://example.com/app/inside.xhtml](http://example.com/app/inside.xhtml)
2.  `outside.xhtml`应用程序上下文之外的页面： [http ://example.com/outside.xhtml](http://example.com/outside.xhtml)
3.  页面[http://example.com/app/login.xhtml](http://example.com/app/login.xhtml)`login.xhtml` _
4.  A `login button`on `outside.xhtml`page 转到该`login.xhtml`页面。
5.  页面[http://example.com/app/profile.xhtml](http://example.com/app/profile.xhtml)`profile.xhtml` _
6.  一个`logout button`在`profile.xhtml`页面上去的`inside.xhtml`页面。

在`umlrewrite.xhtml`文件中，我有以下规则可以重定向`inside.xhtml`到`outside.xhtml`：

```
<rule>
    <note>
        Requests to /app/inside.xhtml will be redirected to ./../../outside.html
    </note>
    <from>/app/inside.xhtml</from>
    <to type="redirect">./../../outside.html</to>
</rule> 
```

我的逻辑是用户在`login.xhtml`页面登录后，他将被重定向到`profile.xhtml`页面。我期望发生的是以下流程：

1.  冲浪到`outside.xhtml`.
2.  点击`login button`进入`login.xhtml`并登录。
3.  登录成功即可到达`profile.xhtml`。
4.  点击`logout button`前往`inside.xhtml`。
5.  被重定向到`outside.xhtml`.

然而，实际发生的是：

1.  冲浪到`outside.xhtml`.
2.  点击`login button`进入`login.xhtml`并登录。
3.  **突然被重定向回`outside.xhtml`.**
4.  **单击`login button`以转到`login.xhtml`并再次登录（该应用未记录我的登录）。**
5.  登录成功即可到达`profile.xhtml`。
6.  点击`logout button`前往`inside.xhtml`。
7.  被重定向到`outside.xhtml`.

`2`如果我一步一步地继续做，上述情况会反复发生`7`。

没有那个`<rule>`，我总是被`profile.xhtml`正确地重定向到成功登录的页面。

如果您能就这个问题给我一些建议，我将不胜感激。

**更新：**

在我的应用程序中，为了跟踪`logged in`状态，我有一个`@SessionScoped`托管 bean，其中包含一个记录状态的简单方法：

```
public void recordUserLoggedIn(HttpServletRequest request) {
    HttpSession clientSession = request.getSession();
    clientSession.setAttribute("isLogin", true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:59:23.353

您没有指定如何跟踪“登录”状态。您是否使用自定义 cookie？依赖应用服务器的内置会话处理（也可能基于 cookie）？

问题的最可能原因与您如何跟踪登录状态以及该状态如何在您的各个页面和上下文之间传递有关。（特别是在从登录状态转换到 profile.xhtml 时。）请记住，cookie 可以是基于路径的。

要调试您的问题：

*   如果您使用的是浏览器，请使用[firebug](http://getfirebug.com/network) / [developer-tools](https://developers.google.com/chrome-developer-tools/docs/overview)并观看网络选项卡。尤其要查看在流程的每个步骤中设置的各种标题。

*   如果不使用浏览器，请尝试使用[Charles](http://www.charlesproxy.com/)或[Fiddler](http://www.fiddler2.com/fiddler2/)等代理。

我认为通过在您的流程中观察 HTTP 标头，潜在的问题将变得显而易见。

# android - NFC：S-beam 和 Android Beam 有什么区别？

> ID：15343617
> 
> 赞同：12
> 
> 时间：2013-03-11T16:26:50.930
> 
> 标签：android, nfc, nfc-p2p

NFC：S-beam 和 Android Beam 有什么区别？有人可以解释激活 Wifi-Direct/蓝牙并传输数据的确切流程吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T16:12:44.070

在stackexchanged上解释......

> 尽管 Android Beam 和 S Beam 的用途相似，但它们实际上的工作方式非常不同，并且彼此不兼容。
> 
> Android Beam 使用 NFC 通过蓝牙配对您的设备，然后通过蓝牙连接传输文件。我相信它还可以直接通过 NFC 传输非常小的数据（联系人、链接等），正如冰淇淋三明治版本的亮点页面所暗示的那样：
> 
> 对于更大的负载，开发人员甚至可以使用 Android Beam 发起连接并通过蓝牙传输数据，而无需用户可见的配对。然而，S Beam 使用 Wi-Fi Direct 而非蓝牙来执行数据传输。他们这样做的原因是 Wi-Fi Direct 提供更快的传输速度（他们引用高达 300 Mbps）。因此，这仅适用于其他支持 S Beam 的设备，目前仅限于两个 Galaxy S3 之间的通信。
> 
> 但是，SGS3 也支持 Android Beam，因此您可以使用它在 GNex 和 SGS3 之间传输某些内容。这是Sprint网站上的教程（对于其他版本的SGS3应该基本相同）。

# objective-c - 哪一种是使用“arc4rand()”的正确方法

> ID：15343619
> 
> 赞同：0
> 
> 时间：2013-03-11T16:27:02.877
> 
> 标签：objective-c, random, arc4random

我是目标 C 的新手，并试图理解`arc4random()`.

网上有很多相互矛盾的解释。请清除我的困惑，以下哪个是正确的：

```
// 1.
 arc4random() % (toNumber - fromNumber) + fromNumber; 
```

或者

```
//2.
arc4random() % ((toNumber - fromNumber) + 1) + fromNumber; 

//toNumber-fromNumbers are any range of numbers like random # between 7-90. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:32:05.913

此代码将为您提供 7 到 90 之间的随机数。

```
NSUInteger random = 7 + arc4random_uniform(90 - 7); 
```

用于`arc4random_uniform`避免模偏差。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T18:25:12.990

亚当的回答是正确的。但是，只是为了澄清两者之间的区别，第二个将可能的范围提高了 1 以使范围包含在内。需要记住的重要一点是，模是余数除法，因此虽然有`toNumber`可能的结果，但其中一个是零（如果 的结果`arc4random()`是 的倍数`toNumber`）并且`toNumber`本身不能是余数。

```
// 1.
 arc4random() % (10 - 5) + 5; 
```

这导致范围`0 + 5`为`4 + 5`5 到 9。

```
//2.
arc4random() % ((10 - 5) + 1) + 5; 
```

这导致范围`0 + 5`为`(4 + 1) + 5`5 到 10。

如果您想使用模数，则既不正确也不不正确。一个不包括上限，另一个包括上限。但是，如果您考虑余数除法的工作原理并考虑任何 PRNG 返回的数字池以周期为单位的总范围长度，那么您会意识到，如果范围没有均匀地划分为最大范围你会得到有偏见的结果。例如，如果`arc4random()`返回一个从 1 到 5 的结果（显然不是）并且您想要一个从 0 到 2 的数字，并且您使用`arc4random() % 3`了 ，那么这些是可能的结果。

```
1 % 3 = 1
2 % 3 = 2
3 % 3 = 0
4 % 3 = 1
5 % 3 = 2 
```

请注意，有两个一和两个二，但只有一个零。这是因为我们的 3 范围并没有均匀地划分为 PRNG 的 5 范围。结果是（足够幽默）`PRNG range % desired range`循环结束时的数字需要被剔除，因为它们是“有偏见的”——数字本身不是确实有偏见，但从最后剔除更容易。不这样做会导致范围的较小数字变得更有可能出现。

我们可以通过计算我们可以生成的数字的上限来剔除这些数字，将其与所需的范围取模，然后将这些数字从末尾拉出。通过“从末尾拉出这些数字”，我的真正意思是“无限循环，直到我们得到一个不是末尾数字之一的数字”。

有人会说这是不好的做法；理论上你可以永远循环。然而，在实践中，预期的重试次数总是小于 1，因为模偏差永远不会超过 PRNG 数量池的一半（通常远小于该数量）。我曾经为`rand`使用这种技术编写了一个包装器。

[您可以在OpenBSD](http://www.openbsd.org/cgi-bin/cvsweb/src/sys/dev/rnd.c?rev=1.140;content-type=text/plain)的源代码中看到一个这样的示例，其中循环`arc4random_uniform`调用`arc4random`，直到确定一个数字是干净的。

# winapi - 什么是组合框消息 359 0x167？

> ID：15343628
> 
> 赞同：4
> 
> 时间：2013-03-11T16:27:33.500
> 
> 标签：winapi, combobox, controls, message

我在任何地方都找不到此信息，包括在官方 Windows API 文档中。当控件失去焦点时，它被发送到子类化过程。它没有在 winuser.h 中定义。

它是这样发送的：

```
0x02D - WM_DELETEITEM
0x167 - ???
0x202 - WM_LBUTTONUP 
```

我的编译器是MinGW，系统是Windows XP SP3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:08:16.740

`0x167`在为系统使用而保留的消息范围内。此范围内未在 SDK 中明确定义的消息是私有的，供系统内部使用。这在[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644931.aspx)中有很多说明：

> #define WM_USER 0x0400

.

> 0 到 WM_USER –1
> 
> 保留供系统使用的消息。
> 
> 第一个范围（0 到 WM_USER –1）中的消息编号由系统定义。此范围内**未明确定义**的值由系统保留。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-11T08:25:54.953

在组合编辑控件中选择文本的 0x167 消息响应

# zurb-foundation - 带有 Div 布局的 Zurb-Foundation 选项卡

> ID：15343630
> 
> 赞同：1
> 
> 时间：2013-03-11T16:27:37.743
> 
> 标签：zurb-foundation

Foundation 3 中的示例解释了如何使用列表设置选项卡，但是如何将选项卡与 div 布局一起使用？

```
<dl class="tabs">
  <dd class="active"><a href="#simple1">Simple Tab 1</a></dd>
  <dd><a href="#simple2">Simple Tab 2</a></dd>
  <dd class="hide-for-small"><a href="#simple3">Simple Tab 3</a></dd>
</dl>
<ul class="tabs-content">
  <li class="active" id="simple1Tab">This is simple tab 1s content. Pretty neat, huh?</li>
  <li id="simple2Tab">This is simple tab 2s content. Now you see it!</li>
  <li id="simple3Tab">This is simple tab 3s content.</li>
</ul>

<div class="tabs-content">
  <div class="active" id="simple1Tab">This is simple tab 1s content. Pretty neat, huh?</li>
  <div id="simple2Tab">This is simple tab 2s content. Now you see it!</div>
  <div id="simple3Tab">This is simple tab 3s content.</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:06:45.090

在列表项中添加 div。

```
<ul class="tabs-content">
  <li class="active" id="simple1Tab">
    <div>This is simple tab 1s content. Pretty neat, huh?</div>
  </li>
  <li id="simple2Tab">
    <div>This is simple tab 2s content.</div>
  </li>
  <li id="simple3Tab">
    <div>This is simple tab 3s content.</div>
  </li>
</ul> 
```

# html - 如何在移动设备上修复页眉和页脚位置？

> ID：15343635
> 
> 赞同：1
> 
> 时间：2013-03-11T16:27:51.627
> 
> 标签：html

我正在开发将在移动设备上运行的 phonegap 应用程序。但现在我有一些问题。当我向上或向下触摸手机屏幕时，页面的页眉或页脚消失了。HTML 代码如下。

```
...
<body>
   <div data-role="page" id="page1">
      <div data-role="header" data-position="fixed">
         Header!!!
      </div>
      <div data-role="footer" data-position="fixed">
         Footer!!!
      </div>
   ... ...
   </div>
</body> 
```

任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:32:35.813

这是您可以用于页脚的 css

```
footer {
width: 100%;
margin: 0%;
position: fixed;
bottom: 0%; 
```

}

对于标题，它会是这样的：

```
header {
width: 100%;
margin: 0%;
position: fixed;
top: 0%; 
```

}

# zend-framework2 - Zend Framework 2 - BjyAuthorize 总是拒绝访问

> ID：15343640
> 
> 赞同：9
> 
> 时间：2013-03-11T16:28:09.083
> 
> 标签：zend-framework2, bjyauthorize

我已经设置了[`bjyoungblood/bjy-authorize`](https://github.com/bjyoungblood/BjyAuthorize/)模块，但目前`403`每个 URL 都出现“访问被拒绝”错误，除了`home`路由中配置的 URL。

我的`module.byjauthorize.global.php`样子如下：

```
'bjyauthorize' => array(
    'guards' => array(
        'BjyAuthorize\Guard\Controller' => array(
            array('controller' => 'index', 'action' => 'index', 'roles' => array('guest','user')),
            array('controller' => 'index', 'action' => 'stuff', 'roles' => array('user')),
            array('controller' => 'zfcuser', 'roles' => array()),
            //backend
            array('controller' => 'Application\Controller\Index', 'roles' => array('admin')),
            array('controller' => 'MyModule\MyEntity\MyEntity', 'roles' => array('admin')),

        ),

        'BjyAuthorize\Guard\Route' => array(
            array('route' => 'zfcuser', 'roles' => array('user')),
            array('route' => 'zfcuser/logout', 'roles' => array('user')),
            array('route' => 'zfcuser/login', 'roles' => array('guest')),
            array('route' => 'zfcuser/register', 'roles' => array('guest')),                
            array('route' => 'home', 'roles' => array('admin')),
            array('route' => 'my-entity', 'roles' => array('admin')),
        ),
    ),
), 
```

我尝试删除该`BjyAuthorize\Guard\Route`部分，但没有任何效果。当我删除`home`路线时，主页也会被阻止。所以 Controller- 和 Route-Guard 似乎都可以工作。如何调试此行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T09:30:03.807

***注意***：以下对[BjyAuthorize有效`1.2.*`](https://github.com/bjyoungblood/BjyAuthorize/tree/1.2.1)

首先，考虑保护路由和控制器是不必要的。我个人总是只保护控制器，因为可能有多个路由到同一个控制器。

删除路由或控制器保护的配置后，您可以：

*   安装[Zend Developer Tools](https://github.com/zendframework/ZendDeveloperTools)，它可以让您对当前设置的[Acl 角色](http://framework.zend.com/manual/2.1/en/modules/zend.permissions.acl.intro.html#roles)有一个概览，如下图所示：

    ![在此处输入图像描述](../Images/d19125ec2e01c8235dcc62edffdcfdfb.png)

*   检查您是否配置了正确的身份提供者：默认使用[ZfcUser](https://github.com/ZF-Commons/ZfcUser)`user_role`的用户 id 并在表中查找他的角色。

*   检查该`guest`角色是否有权访问公共页面，例如`zfcuser`控制器（用于登录操作）或`zfcuser/login`路由。

正如 Akrabat 指出的那样， 和 的配置`BjyAuthorize\Guard\Controller`是`BjyAuthorize\Guard\Route`白[名单](http://en.wikipedia.org/wiki/Whitelist)，这基本上意味着`guest`如果您想浏览未经身份验证的页面，则必须为默认角色设置访问权限。

一旦配置了警卫，它就会阻止对任何未配置资源的访问，因此请确保您已授予该角色`guest`（或您在`$config['bjyauthorize']['default_role']`访问中配置的任何内容，至少可以访问登录控制器或路由。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T08:41:02.910

在`'BjyAuthorize\Guard\Controller'`数组中创建一个条目后，您需要为每个具有适当权限的控制器创建条目。

我有这个：

```
'BjyAuthorize\Guard\Controller' => array(
    // Access for everyone
    array('controller' => 'zfcuser', 'roles' => array('guest')),
    array('controller' => 'Application\Controller\Index', 'action' => 'index', 'roles' => array('guest')),
    array('controller' => 'error', 'roles' => array('guest')),

    // Restricted
    array('controller' => 'User\Controller\AdminUser', 'roles' => array('admin')),

), 
```

重要的是您要让访客访问 zfuser（用于登录！）和错误（否则很难调试东西）。

我没有尝试同时使用控制器和路由保护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T19:15:26.863

我有完全相同的问题。

我认为问题在于 BjyAuthorize 没有很好的文档记录，所以我们中的许多人只是简单地复制和粘贴并从提供的文件中进行处理。例如从以下：

```
'BjyAuthorize\Guard\Controller' => array(
            array('controller' => 'zfcuser', 'roles' => array()),
        ), 
```

您希望这样添加控制器：

```
array('controller' => 'controllername', 'role' => array()), 
```

但是，您需要添加完整路径，否则它将不起作用：

```
array('controller' => 'Folder/Controller/Action', 'role' => array()), 
```

我希望这可以节省一些人的工作时间，因为我完全被这个弄糊涂了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-03T09:36:05.503

通过这个在 module.php 中调试你的代码

```
public function onBootstrap($e)
    {   echo "<pre>";
        var_dump($e->getTarget()->getServiceManager()->get('BjyAuthorize\Provider\Identity\ProviderInterface'));
    } 
```

# python - Python 模块 wx.GraphicsContext 中的函数 DrawEllipse 仅适用于 Windows，但不适用于 Linux

> ID：15343643
> 
> 赞同：1
> 
> 时间：2013-03-11T16:28:17.027
> 
> 标签：python, linux, windows, wxpython, graphicscontext

大家好，愿意帮助我的人，

我写了一个为音乐绘制封面的小程序。该程序在 Windows 上运行良好，但我现在必须在 Linux 上运行它，其中一个功能似乎有些麻烦。

注意：我对 wx 和 GTK 知之甚少。

好的，让我们看看。

这就是我初始化图形的方法：

```
app         = wx.PySimpleApp()

bitmap      = wx.EmptyBitmap(width = width_bitmap, height = height_bitmap)
dc          = wx.MemoryDC(bitmap) # Dieser DC zeichnet nur im Speicher

dc.SetBackground(wx.Brush(backgroundcolor, wx.SOLID))
dc.Clear()

gc = wx.GraphicsContext_Create(dc) 
```

我从某个地方复制了它，但我真的不知道它做了什么。但它工作正常。

后来我这样做：

```
gc.SetPen(wx.Pen(actual_color,3,wx.SOLID))
gc.DrawEllipse(x, y, width, height) 
```

这导致输出只是我在内部化后设置的背景颜色。如果我将 DrawEllipse 更改为 DrawLines，一切正常，我可以看到应该存在的所有其他图形和文本。

我正在使用带有 PythonXy 工具包的 Linux Ubuntu 12.10 和 Windows 7。

请帮忙。我需要它 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T17:44:59.583

尝试使用 Refresh() 强制绘制事件。

# cakephp - ACL 允许在 Cakephp 2.x 中不起作用的操作

> ID：15343645
> 
> 赞同：1
> 
> 时间：2013-03-11T16:28:25.607
> 
> 标签：cakephp

我有一个多步骤 travelrequest 应用程序。用户被引导到第一步，例如 localhost/intraweb/travel_requests/step/1，直到他们到达最后一步 localhost/intraweb/travel_requests/step/5。我现在遇到的问题是只有管理员可以访问这些步骤而普通用户不能。在我的情况下，用户在我的组表中有一个 ID = 10

这就是我在 UsersController 中使用 ACL 的方式

```
//allow users to do a travel request
public function initDB() {
$group = $this->User->Group;
$group->id = 10;
$this->Acl->allow($group, 'controllers/TravelRequests/step($stepNumber');
} 
```

这是我的 TravelRequestsController 代码

```
public function beforeRender() {
parent::beforeRender();
$params = $this->Session->read('form.params');
$this->Auth->allow('step($stepNumber)');
$this->set('params', $params);
}

public function setup() {
$steps = 5;
$this->Session->write('form.params.steps', $steps);
$this->Session->write('form.params.maxProgress', 0);
$this->redirect(array('action' => 'step', 1));
}

public function step($stepNumber) {
if($this->Session->read('form.params.steps') != 5) {
$this->redirect(array('action'=>'index'));
}

if (!file_exists(APP.'View'.DS.'TravelRequests'.DS.'step_'.$stepNumber.'.ctp')) {
$this->redirect('/travel_requests/index');
}

$maxAllowed = $this->Session->read('form.params.maxProgress') + 1;
if ($stepNumber > $maxAllowed) {
$this->redirect('/travel_requests/step/'.$maxAllowed);
} else {
$this->Session->write('form.params.currentStep', $stepNumber);
}
} 
```

有人知道我在代码中遗漏了什么吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:52:46.183

您正在尝试允许`$this->Acl->allow($group, 'controllers/TravelRequests/step($stepNumber');`where`step($stepNumber`不是现有操作。

你应该`$this->Acl->allow($group, 'controllers/TravelRequests/step')`改用。

# ios - 在带有外部 URL 的 iOS 上使用 PhoneGap/Cordova

> ID：15343647
> 
> 赞同：11
> 
> 时间：2013-03-11T16:28:40.903
> 
> 标签：ios, cordova, plugins, apple-push-notifications

我希望我的 phonegap/cordova 应用程序加载外部页面，而不是本地页面。

现在我这样做了，但是我的插件（javascript）不起作用，因为它们是从本地 index.html 调用的。

在这种情况下我该怎么办？我应该将插件放在我的外部 URL 上并将它们加载到外部 index.html 上吗？我还应该在那里加载cordova-2.5.0.js 吗？

如果这是唯一的方法，如果我想加载一个我不拥有服务器的外部页面，但我想启用推送通知，会发生什么？

我将如何启用这些插件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T17:59:46.500

***d0nparaalias*** ,

看看这个项目：[https ://dl.dropbox.com/u/930742/so/CordovaBrowserSO.zip](https://dl.dropbox.com/u/930742/so/CordovaBrowserSO.zip)

如您所见，里面没有`index.html`or`www/`文件夹。

所有文件都已上传到服务器，应用程序将根据需要下载它们。

我已经通过执行 p.1 中的步骤来完成它。来自[https://stackoverflow.com/a/15319156/753878](https://stackoverflow.com/a/15319156/753878)的回答。

`www/`在服务器上，您可以在使用模板 Cordova 项目创建 的基本文件夹中看到所有文件：![服务器内容](../Images/cdd83d239c1248dbffedf1e1a6178c85.png)

您直接包含在服务器上的所有插件和东西`index.html`。

如果您`config.xml`从上面的存档中检查，您会看到
`<content src="http://dymv.comeze.com/www/index.html" />`

启动时的应用程序会说： ![启动示例应用程序](../Images/51645f9a94f848f456893fbd64697840.png)

希望这是你想要达到的。
如果不是 - 请提供有关您想要达到的结果的更多信息。

BR。
尤金

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:53:35.653

```
window.loadURL = function(url){
    navigator.app.loadUrl(url, { openExternal:true });
    return false;
} 
```

在标签中使用它，例如

```
<a href='#' onclick="window.loadUrl('http://google.com'); return false;">open</a> 
```

# php - 如何使用 PHP 对图像进行切片并保存？

> ID：15343652
> 
> 赞同：1
> 
> 时间：2013-03-11T16:28:57.627
> 
> 标签：php, gd

我如何将图像分成 9 个单独的切片 (3x3)，然后将每个单独的切片保存到一个文件夹中？我读过我需要使用 GD 来实现这一点，但我是这个库的新手。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:30:50.203

有几个库可以完全满足您的要求：

*   [http://www.phpclasses.org/package/4349-PHP-Slice-large-images-in-multiple-parts.html](http://www.phpclasses.org/package/4349-PHP-Slice-large-images-in-multiple-parts.html)
*   [http://www.phpclasses.org/package/1804-PHP-Generate-HTML-to-present-images-divided-in-pieces.html](http://www.phpclasses.org/package/1804-PHP-Generate-HTML-to-present-images-divided-in-pieces.html)

# regex - 如何在 Visual Studio 中替换匹配的正则表达式字符串的一部分

> ID：15343655
> 
> 赞同：2
> 
> 时间：2013-03-11T16:29:27.617
> 
> 标签：regex, visual-studio, visual-studio-2008, comments, replace

我想在我的视觉工作室项目的评论中替换一个单词。要找到那个词（让我们说它“有趣”，我可以使用如下例所示的正则表达式（仅供参考，我实际上使用的是空格而不是下划线，但在此处放置下划线，因为它们更容易看到）

```
^(:b*').*_fun_ 
```

那会找到这样的字符串

```
'Oh how fun it is to ride
'You are fun to talk to 
```

但它不会找到

```
'You are so funny! 
```

这是正确的（这正是我想要的）。我想知道的是如何在 VS 中使用 find/replace 将单词“fun”替换为其他内容（例如，为了方便说“有趣”），使得结果评论最终为：

```
'Oh how interesting it is to ride
'You are interesting to talk to
'You are so funny! 
```

无需手动单独替换每次出现的“乐趣”。

如果不清楚，我只想在评论中搜索和替换（这就是使正则表达式搜索成为必要的原因）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:49:48.093

使用覆盖之前所有内容的标签`_fun_`并在替换语句中引用它。这仍然只会替换每行出现的单词，但不会删除其他文本。

**寻找**

```
^{:b*'.*}<fun> 
```

**代替**

```
\1interesting 
```

[VS2008 中的正则表达式](http://msdn.microsoft.com/en-US/library/2k3te2cs%28v=vs.90%29.aspx)

***- 编辑 -***

使用`<`and`>`标记单词的开头和结尾。这样，当正则表达式出现在行尾时，它也应该匹配“有趣”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:46:30.647

像下面这样尝试它会帮助你

```
ctrl + F - > Quick Replace

Find What ->{fun }
Replace With -> Interesting 
Find Options
Use RegularExpressions... 
```

# perl - 将两个单行 Perl 命令组合成一个脚本

> ID：15343657
> 
> 赞同：1
> 
> 时间：2013-03-11T16:29:30.597
> 
> 标签：perl, if-statement

我正在尝试将以下两个单行 perl 代码组合成一个 perl 脚本，该脚本在文件的一行上执行，然后再进入下一行。请注意，这不是我自己的原始代码，这里提供的非常周到：[在不相关的数据条目之间添加空白行](https://stackoverflow.com/questions/14345198/adding-a-blank-line-between-unrelated-data-entries/14345412?noredirect=1#comment19941944_14345412)

# 1

```
perl -pae 'print $/ if (defined $x && $x ne $F[0]); $x = $F[0];' DF-data2pfa.csv >DF-data2pfb.txt 
```

# 2

```
perl -pae 'print $/ if (defined $x && $x ne $F[3]); $x = $F[3];' DF-data2pfb.txt >DF-data2pfc.txt 
```

该脚本完全符合我的要求（将`F[0]`我的数据集中一行的字段与`F[0]`前一行的字段进行比较，如果它们不同，则在这些条目之间添加一个空白行），但我意识到我需要它来查看`F[0]`和`F[3]`在一行上并将两者与上一行进行比较。令我尴尬的是，我尝试一个接一个地运行，并没有意识到每次脚本遇到前一个脚本添加的空行时都会添加一个额外的空行，这对于我正在尝试输入的程序来说是不可接受的数据到。

所以我尝试使用该`Deparse`工具将两者都转换为脚本格式，而不是使用`elsif`语句将第二个添加到第一个。这变得一团糟。另外我不确定如何`pae`在脚本中实现命令行的功能。我不确定`e`脚本中是否有必要，但似乎首先打印每一行，然后将其拆分为一个数组（ with `pa`）是整个代码的一个相当完整的组件，我不知道如何在这里实现。

这是我得到的：

```
while (defined($_ = <ARGV>)) {
    our(@F) = split(' ', $_, 0);
$x = $F[0];
$y = $F[3];
if defined $x and $x ne $F[0];
elsif defined $y and $y ne $F[3];
   print $/ 
}
continue {
    die "-p destination: $!\n" unless print $_;
} 
```

如果这里不需要，我也愿意不使用该`deparse`模块。感谢您提供的任何帮助/解释！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:15:55.840

对于单行来说，它有点罗嗦，但你可以这样做：

```
perl -pae 'print $/ if ((defined $x && $x ne $F[0]) && (defined $y && $y ne $F[3])); $x = $F[0]; $y = $F[3]' DF-data2pfa.csv >DF-data2pfb.txt 
```

或作为脚本

```
open my $fh, "<", "input_file_name";
open my $out, ">", "output_file_name";
my ($x, $y);
foreach (<$fh>) {
    my @F = split(' ', $_);
    if ( ( defined($x) && $x ne $F[0] ) && (defined($y) && $y ne $F[3]) ) {
        print $OUT $\;
    }
    $x = $F[0];
    $y = $F[3];
    print $OUT $_;
} 
```

我不确定我是否正确阅读了您的要求 - 如果您需要在 $F[0] 或 $F[3] 与上一行匹配时打印额外的行，那么条件将是：

```
( ( defined($x) && $x ne $F[0] ) || (defined($y) && $y ne $F[3]) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:15:02.313

我不是 100% 确定你在做什么，所以这个脚本可能不是你想要的，但它希望可以让你开始。它使用`strict`和`warnings`编译指示可以帮助您防止某些错误。

```
#!/usr/bin/env perl

use strict;
use warnings;

my ($x, $y, @F);
while ( <> ) {
  @F = split ' ';
  if ( defined $x and $x ne $F[0] ) {
    print $/;
  } elsif ( defined $y and $y ne $F[3] ) {
    print $/;
  }
  $x = $F[0];
  $y = $F[3];
  print;
} 
```

这隐式使用`$_`变量（`while`隐式设置它，`split`隐式使用它）。它还显示了条件语句的外观；当不用于 posfix 风格时，条件需要圆括号。我已经离开了`continue`块，但实际上我从来不需要使用一个，这可能是 deparse 的残余，并且可能会在 while 循环结束时进行（并且 print 也可以隐式使用`$_`）。最后这个`<>`操作符是magic-open/read操作符，它会按顺序使用ARGV中的文件或者根据需要使用STDIN。

如果您需要更多帮助，只需 ping。

# javascript - 将源分配给 html 元素

> ID：15343663
> 
> 赞同：0
> 
> 时间：2013-03-11T16:29:49.440
> 
> 标签：javascript, html

我对下面的代码有疑问。这是我从示例中复制的代码片段。我不明白它为什么会起作用，因为我不知道它为什么可以将 URL 分配给 myscript.src。[我在这里](https://developer.mozilla.org/en-US/docs/DOM/element)搜索了带有元素的属性，它没有名为 src 的属性。有人可以提供任何解释吗？谢谢！

```
if (document.createElement && document.body) 
{ 
    var myscript = document.createElement('SCRIPT'); 
    myscript.src = document.location.protocol + '//myURLhere'; 
    document.body.appendChild(myscript); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:33:00.327

`src`不是*每个*元素类型的属性，这就是为什么您在特定的 MDC 页面中看不到它的原因。[然而，它是`script`元素的属性。](https://developer.mozilla.org/en-US/docs/HTML/Element/script#Attributes)

对于这类事情，您也可以[直接参考 HTML(5) 规范。](http://www.w3.org/TR/html5/scripting-1.html#the-script-element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:31:58.630

链接到外部脚本时，您将使用该`src`属性。

例子：`<script src="myscripts.js"></script>`

编辑：

不，这不起作用，因为`<div>`没有 src 属性。为了将外部数据加载到 div 中，您需要使用 AJAX。从 ajax 加载外部数据后，您将使用`div.innerHTML = ajaxresponse;`

# java - 无空数组

> ID：15343664
> 
> 赞同：-5
> 
> 时间：2013-03-11T16:29:56.397
> 
> 标签：java

此代码显示具有“空”值的元素，

```
private Objet[] tabT = new Objet[50];
/ *** /
public void affiche() {
        for (int i = 0 ; i < tabT.length; i++)
            System.out.println(tabT[i]);
    } 
```

我的数组只包含一个元素。我可以显示没有“空”值且不使用 ArrayList 的数组元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:33:06.037

> 我可以显示没有“空”值且不使用 ArrayList 的数组元素吗？

好吧，您当然可以对打印进行条件化：

```
for (int i = 0; i < tabT.length; i++)
    Object tab = tabT[i];
    if (tab != null) {
        System.out.println(tab);
    }
} 
```

请注意，即使*您* `ArrayList`也可以有空元素。但是，对于以这种方式使用的数组，您并不真正知道元素是否为 null，因为它不是集合的“逻辑”部分，或者它是否为 null，因为它*故意*在集合中为 null 值。你最好用它`ArrayList`来跟踪它。

使用一个包含比你真正需要的更多元素的数组基本上是一个坏主意，除非你*还*跟踪你实际使用的元素数量——此时你基本上已经有了一个`ArrayList`.

（在某些情况下手动执行此操作可能很有用，特别是对于原始数组 - 但*通常*在使用类类型时，我会`ArrayList`改为使用。）

# rest - 创建新文档（实体），将其添加到集合中

> ID：15343665
> 
> 赞同：4
> 
> 时间：2013-03-11T16:29:59.580
> 
> 标签：rest

假设我们有一个集合`/items/`，我们希望允许客户向这个集合添加新项目。受 Rails 的启发，我得出以下结论：我们只需添加资源`/items/new`，想要添加项目的人首先发布问题`GET /items/new`，接收空实体（可能设置了一些默认值），然后填充所需的字段和问题`POST /items/`。

*   这种方法对真正的 REST API 有用吗？有什么可以改进/返工的？
*   如果突然这种方法很好（如果不是，无论如何）：

    > 假设每个项目都有必填字段*Title*。返回一些默认值以响应`GET /items/new`. 在这种情况下什么更好？返回`null` *Title*并在 POST 为空时返回错误？为`new`资源实现类似构造函数的逻辑，例如在查询字符串中询问必填字段？还有什么？

谢谢你。

**UPD。**澄清一下，使用`new`不是将“添加”拆分为“分配”和“写入内容”，因为没有对数据存储执行任何操作`GET /items/new`。这是一种在实体设计中实现灵活性的方法：富客户端可以根据响应新出现的内容动态呈现输入字段。那有意义吗？或者合同要修复，我们需要为这样的变化对 API 进行版本控制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:42:15.130

为什么首先返回一个空项目？我只是让客户端将一个新项目（包括其所有属性）发布到 /items/new 。至少这是我记得在 Rails 中完成的方式；）

在任何情况下，空项目的额外返回都没有用，增加了额外的网络往返，并可能通过将“添加”操作拆分为“分配”和“写入内容”来破坏 REST 方法。

如果您想进行任何唯一性检查、UID 生成等，可以通过一个“添加完整项目”操作来完成（或更好）。

*更新：*混乱可能来自这样一个事实，即 rails 控制器既充当 REST API 又充当 Web UI 的控制器。这意味着某些操作在 API 中是有用的（由某些应用程序/代码使用），而有些操作是必需的，因为表示层（由人类使用）需要它可以调用的东西。我真的不认为“新”操作在 API 中有用，但用户确实需要一些他可以调用的东西来获得一个空表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:48:30.083

通常当我创建一个 REST API 时，我使用实体名称的单数形式，所以它是

```
api.company.com/item 
```

从那里如果客户想要一个特定的项目，他们会做一个 HTTP GET

```
api.company.com/item/{id} 
```

通常你不希望动词出现在 URL 中。所以“项目/新”是糟糕的设计。标准的 HTTP 方法应该足够了（GET、POST、PUT、DELETE）

因此，对于您的情况，我建议不要执行“item/new”，而是让客户端执行 HTTP POST 到

```
api.company.com/item 
```

如果你在做 XML，你给客户一个 XSD，这样他们就知道需要什么。如果您使用的是 JSON，它可能会记录在某处。

至于强制执行所需的“标题”字段，我将对发布到您的资源的所有新实体进行验证。我假设您有一个已发布数据映射到的域模型。您可以只进行验证并返回状态为 400 的 HTTP 响应，或者如果您的 API 具有自定义错误响应，请使用它。

这是我经常查看的[资源，以记住 HTTP 状态代码及其含义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

# cocoa - 将对象添加到 NSArrayController 并将其保存到实体中

> ID：15343666
> 
> 赞同：0
> 
> 时间：2013-03-11T16:30:06.823
> 
> 标签：cocoa, core-data, nsarraycontroller

我有一个 NSArrayController 连接到我在核心数据中的实体。我有一个连接到 NSArrayController 的 IBOutlet，这样我就可以从我的委托中添加对象。

我正在尝试使用一些预设向 NSArrayController 添加一个对象。到目前为止，我已经找到了如何使用添加对象。

```
[cards add:sender]; 
```

这有效，但它添加了一个空白对象。当我退出应用程序时，它会将这个对象保存到实体中，这样当我再次希望它仍然存在时。

但我也找到了一种使用预设创建新对象的方法，但如果像最后一个方法那样保存它并不会保存。

```
NSDictionary *addedObject = [NSDictionary dictionary];
addedObject = [NSDictionary dictionaryWithObjectsAndKeys:@"TITLE", @"title",
@"CONTENT", @"content", nil];
[cards addObject:addedObject]; 
```

有没有其他方法可以使用预设创建一个新对象，但也可以保存它？我是 Core Data 的新手，所以我不是 100% 了解这一切。也许有一种方法可以创建指向实际实体的指针并从那里编辑它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:39:33.930

子类化 NSArrayController 并重新实现该`add`函数，或者子类化您的实体并重新实现`awakeFromInsert`. 两者都是预设对象值的可接受位置。

在 NSArrayController 子类化的情况下：

```
@implementation CardsArrayController

-(void) add:(id)sender {
    NSManagedObject *newItem = [self newObject];
    //do object set up here...
    [self addObject:newItem];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:08:24.790

无论您添加获取`managedObjectContext`引用并保存上下文的对象的任何方式都将保存您的对象。

如果您使用的是苹果提供的样板代码，那么您可以使用以下代码：

```
NSError *error;
AppDelegate *appD = [NSApp delegate];
[appD.managedObjectContext save:&error]; 
```

或者你可以打电话给`[appD saveAction:Nil]`. 这也尝试在保存上下文之前提交编辑。

或者您可以将一个按钮连接到`saveAction:`（它是一个`IBAction`）以在单击按钮时保存上下文。

**编辑：**从数组控制器创建的对象也不必为空。由你决定。您可以使用来自文本字段（或其他可编辑的 ui 元素）的绑定`arrayController`来执行此操作。或者您可以获取`content`数组的属性来访问该对象，然后对其进行编辑。或者您可以通过代码添加整个对象，而根本不使用数组控制器。有很多方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T07:46:45.753

同样，`NSDictionary`- 不是实体实例。实体在内存中表示为`NSMangedObject`（或其子类，但实际上不需要子类）的实例。

事实上，托管对象支持 KVC，因此对于某些事物（setValue:forKey 等），它们可能表现得像字典一样，但这就是相似性结束的地方。NSDictionary 不能插入到控制核心数据实体的 NSArrayController 中。您必须使用核心数据 API 创建实体

例如

```
NSManagedObject *myNewEntiry = [NSEntityDescription insertNewObjectForEntityForName:@"Person" inManagedObjectContext:self.managedObjectContext]; 
```

如果您以这种方式创建实体 - 使用 NSArrayController 使用的相同托管对象上下文 - 它将自动（但不是立即）添加到数组控制器的内容中。

命名的`NSArrayController`IBAction`-(void) add:(id)sender;`是一个便捷的快捷方式，它确实创建了一个指定给 的类型（和名称）的新实体`NSArrayController`，并将其添加到控制器内容中。但实际上——因为它不接收任何参数——它创建了一个“空白”实体。空白表示 - 具有模型中定义的默认值。

此页面中的第一个答案正确地建议您`add:` `IBAction`在自己的`NSArrayController`子类中覆盖 ' ，以创建和设置新实体，然后再将其插入`NSArrayControllers`' 内容。

所以它看起来像：

```
@implementation CardsArrayController

-(void) add:(id)sender {
     NSManagedObject *myNewEntity = [NSEntityDescription insertNewObjectForEntityForName:@"MyEntityName" inManagedObjectContext:self.managedObjectContext];
    //do object set up here...
    [myNewEntity setValue@"Happy Birthday" forKey:@"title"];
    [self addObject:newItem];
}

@end 
```

我希望这能澄清一点，但您需要阅读核心数据并浏览一些基于核心数据的应用程序的苹果示例代码。

# xml - 使用 DTD 和 XML 创建银行数据库

> ID：15343680
> 
> 赞同：1
> 
> 时间：2013-03-11T16:30:44.730
> 
> 标签：xml, xml-parsing, dtd

我想为以下数据（以表格表示）编写一个 XML 文件：

```
Account table:
account-number    balance
   100             1000
   719             9000
   715            -3000
   600              100

Costumers table:
account-number     street    city    id
  100               ...       ...    ...
  719               ...      ...     ...
  715               ...       ...     ...
  715               ...      ....      ...
  600              ...        ...      ... 
```

由于这是我第一次用 XML 编写，我对 DTD 文件有点困惑。这是我写的：

```
<!ELEMENT bank (costumer)*>
<!ELEMENT costumer (account, street, city, id)>
<!ELEMENT account (account-number, balance)>
<!ELEMENT account-number (#PCDATA)>
<!ELEMENT balance (#PCDATA)>
<!ATTLIST balance currency CDATA #FIXED "usd">
<!ELEMENT street (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT id (#PCDATA)> 
```

这个表格真的符合我的意图，还是我有任何错误？你有什么要在我的代码中添加/更改的，所以最适合描述这些表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:24:05.073

看起来您已经涵盖了所有内容，但只有您可以确定它是否符合您的需求。

只是一些小建议。

*   使用属性`id`代替元素。这样您就可以确定它是独一无二的，并且您可以在需要时引用它：`<!ATTLIST costumer id ID #REQUIRED>`. 您也可以对帐号执行相同的操作。

*   包裹在一个元素中`street`。这将使未来更容易扩展，而不会弄乱.`city``address``costumer`

# c - 从 C 程序更改堆栈内存

> ID：15343685
> 
> 赞同：6
> 
> 时间：2013-03-11T16:30:53.463
> 
> 标签：c

我是stackoverflow的新手，所以我提前为我犯的任何错误道歉。

我最近遇到了这个 C 难题。该程序如下所示。

```
#include<stdio.h>

void change()
{

}

int main()
{
 printf("\nHello");
 change();
 printf("\nHai");
 printf("\nHow are you?");
 return 0;
} 
```

预期的输出是，

```
Hello
Hai
How are you? 
```

问题要求我们通过在函数 change() 中添加一些代码来更改输出如下

```
Hello
How are you? 
```

您不应该在 main() 中进行任何更改。

我试图通过避免语句 printf("\nHai") 来更改存储在堆栈内存中的函数 change() 的返回地址。但是当我使用 gcc 编译时出现错误。

我在 change() 中添加的代码如下所示。

```
void change()
{
 char ch;
 *(&ch+10)+=20;
} 
```

添加到 ch (10 和 20) 的值通过使用固定

```
objdump -d ./a.out 
```

我希望收到一些解决问题的建议。提前感谢您的时间和耐心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-10T21:21:08.643

你很亲密。以下是在 x86-64 上的 linux 上。

主.c：

```
#include <stdio.h>

void change()
{
    char dummy;

    /* skip local variable and rbp */
    *(long*)(&dummy + sizeof(dummy) + sizeof(long*)) += 0x40055e - 0x400554;
}

int main()
{
    printf("Hello\n");
    change();
    printf("Hi\n");
    printf("How are you?\n");
    return 0;
} 
```

输出：

```
$ gcc -fno-stack-protector -o main main.c
$ ./main
Hello
How are you? 
```

从 objdump 我们得到：

```
 40054f: e8 c8 ff ff ff          callq  40051c <change>
->  400554: bf 1a 06 40 00          mov    $0x40061a,%edi
    400559: e8 92 fe ff ff          callq  4003f0 <puts@plt>
->  40055e: bf 1e 06 40 00          mov    $0x40061e,%edi
    400563: e8 88 fe ff ff          callq  4003f0 <puts@plt> 
```

过程：

首先在`main.c`. 然后编译并运行`objdump -d main`以获取实际偏移量并`main.c`使用它们的差异进行更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-09T21:22:33.953

下面的代码应该可以达到预期的效果。

```
#include<stdio.h>
#include <stdlib.h>

void change()
{
printf("\nHow are you?"); 
exit(0);
}

int main()
{
 printf("\nHello");
 change();
 printf("\nHai");
 printf("\nHow are you?");
 return 0;
} 
```

此代码将导致程序打印“Hello”，然后执行 change() 函数，该函数将打印“你好吗？” 在换行符上，然后退出程序。exit() 函数是 c 标准库的一部分，如下[所示](http://www.cplusplus.com/reference/cstdlib/)

# php - mysql_fetch_row 会面临连接错误吗？

> ID：15343688
> 
> 赞同：1
> 
> 时间：2013-03-11T16:31:02.030
> 
> 标签：php, mysql, database-connection

[](http://php.net/manual/en/function.mysql-fetch-row.php)**当有结果或`false`没有更多行时[**， mysql_fetch_row返回一个数组。**](http://php.net/manual/en/function.mysql-fetch-row.php)**

 **但是，当运行命令时发生与连接相关的错误时，预期的行为是什么？

或者更确切地说，我应该问...**该功能`mysql_fetch_row`是否需要数据库连接？**

在我的盒子上，我实际上可以关闭连接 ( [`mysql_close`](http://php.net/manual/en/function.mysql-close.php)) 并且仍然可以完美地获取行。但是，我找不到任何文档说明这种行为是常态，或者甚至是预期的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:33:08.223

我认为你应该调查 mysql_error

[http://php.net/manual/en/function.mysql-error.php](http://php.net/manual/en/function.mysql-error.php)

mysql_* 函数已被贬值，您应该考虑使用 PDO 或 Mysqli。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:02:08.963

有两种类型的“查询”函数：

*   [`mysql_query`](http://www.php.net/manual/en/function.mysql-query.php)每个人都使用的你的正常
*   而在很大程度上被忽视的[`mysql_unbuffered_query`](http://www.php.net/manual/en/function.mysql-unbuffered-query.php)

现在如果您使用`mysql_query`完整的结果集存储在客户端上。因此，一旦`mysql_query`返回，就不需要服务器通信。您可以获取结果集的大小并使用`mysql_seek`. 在内部使用该函数[`mysql_store_result`](http://dev.mysql.com/doc/refman/5.6/en/mysql-store-result.html)，如果在客户端获取结果时服务器死机，您的`mysql_query`调用将失败。但是，如果结果集完全存储在客户端上，`mysql_fetch_row`并且在您获取它们时服务器死机，则客户端不会失败。

如果你使用`mysql_unbuffered_query`，你需要有一个有效的链接，因为结果集没有存储在客户端上——而是在你调用时获取每一行`mysql_fetch_row`。因此，如果链接“死亡”，下一次调用`mysql_fetch_row`将失败。C 函数[`mysql_use_result`](http://dev.mysql.com/doc/refman/5.6/en/mysql-use-result.html)用于“无缓冲”调用。

我创建了一个[简单的 PHP 脚本](http://codepad.org/bncGpPJQ)来测试它（太大而无法粘贴）。

引用[`mysql_fetch_row`mysql C-Library 的 -function](http://dev.mysql.com/doc/refman/4.1/en/mysql-fetch-row.html)手册：

> 检索结果集的下一行。在 mysql_store_result() 之后使用时，mysql_fetch_row() 在没有更多行要检索时返回 NULL。在 mysql_use_result() 之后使用时，当没有更多行要检索或发生错误时，mysql_fetch_row() 返回 NULL。

这表明隐含：

*   如果`mysql_store_result`使用（缓冲正常查询），则`mysql_fetch_row`如果没有更多行要获取，则仅返回 null
*   如果`mysql_use_result`使用（无缓冲查询），则`mysql_fetch_row`在没有更多行**或**从服务器获取下一行时出错时返回 null。

没有提到任何平台特定的行为，所以我认为这适用于所有平台。当然，我们必须深入研究这些函数的源代码才能确定。

关于发生错误时的行为：`mysql_fetch_result`如果未缓冲结果集的获取失败（或者如果没有更多行），PHP 端将返回 false。-functions`mysql_*`不会抛出异常，但如果发生故障，则会发出警告 - 在我的脚本中它说`Warning: mysql_fetch_row(): 8 is not a valid MySQL result resource in ...`. 因此，如果您想检查错误，则必须执行以下操作：

```
while($row = mysql_fetch_row($result)) {
   // do stuff
}

if(mysql_errno($dbhandle) !== 0) {
    echo "there was an error: ", mysql_error($dbhandle), PHP_EOL;
} 
```

如果您想编写真正的防御性代码，则无论您使用哪种查询功能，都必须这样做。

顺便说一句：如果 mysql-connection 用 关闭，此防御性代码将不起作用`mysql_close`，因为句柄现在已关闭并`mysql_errno`返回 false （加上发出警告）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:34:34.867

如果您真的必须检查连接错误等，请使用[mysql_errno](http://www.php.net/manual/en/function.mysql-errno.php)，但您真的不应该再使用 mysql 库，因为它已被弃用；继续使用 MySQLi 或 PDO

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:35:27.313

mysql_fetch_row() 调用 mysql_query() 如果有错误则返回错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T16:49:20.493

您必须区分 的返回值`mysql_query`和 的返回值`mysql_fetch_row`。如果要检查连接相关的错误，首先检查返回值

```
$result = mysql_query(...) or die(mysql_error()); 
```

如果检查结果集的结尾，则检查`mysql_fetch_row`.**

# c++ - 我可以在调用 WSAStartup() 之前创建一个套接字实例吗？

> ID：15343692
> 
> 赞同：1
> 
> 时间：2013-03-11T16:31:15.120
> 
> 标签：c++, oop, winsock2, wsastartup

我正在为 TCP/IP 网络客户端通信编写一个类。在类头中，我创建了一个 SOCKET 成员。该类还包含一个调用 WSAStartup 和检查版本的方法。建立连接的方法首先调用 WSAStartup，然后初始化调用 socket() 函数的 SOCKET 成员。请参阅下面的代码。我想知道这是否“正确”，或者是否有更好的方法。

头文件：

```
/*network.h*/
public class IPnetwork
{
private:
    WSADATA wsaData ;
    SOCKET hSocket ;
    sockaddr_in socketAddress ;
    static const int SERVER_PORT = 502 ;
    unsigned long int = serverIP ;

public:
    IPnetwork(char* serverIPaddress) ;
    bool Connect() ;
    bool Disconnect() ;
    ~IPnetwork() ;

private:
    bool startWinSock() ;
} ; 
```

源代码：

```
/*network.cpp*/
IPnetwork::IPnetwork(char* serverIPaddress)
{
    serverIP = inet_addr(serverIPaddress) ;
}

bool IPnetwork::Connect()
{
     /* start winsock */
    if(!startWinSock())
    {
        return false ; /* winsock problem */
    }

    /* Create socket */
    if ((hSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == INVALID_SOCKET)
    {
        return false ; /* could not create socket */
    }

    /* fill socket address structure */
    socketAddress.sin_family = AFINET ;
    socketAddress.sin_port = htons(SERVER_PORT) ;
    socketAddress.sin_addr.S_un.S_addr = serverIP ;

    /* connect */
    if(connect(hSocket,reinterpret_cast<sockaddr*>(&socketAddress), sizeof(sockAddr))!=0)
    {
        return false ; /* could not connect*/
    }

    return true ;

}

bool IPnetwork::startWinSock()
{
    if(WSAStartup(MAKEWORD(REQ_WINSOCK_VER,0),&wsaData)==0)
    {
        /* Check if major version is at least REQ_WINSOCK_VER */
        if (LOBYTE(wsaData.wVersion) < REQ_WINSOCK_VER)
        {
            return false ; /* winsock started but version is too low */
        }
        else
        {
            return true ; /* winsock started with right version*/
        }
    }
    else
    {
        return false ; /* winsock not started */
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:33:58.713

您担心定义一个 type 的变量`SOCKET`，以及它的构造函数何时运行？

这不是问题，因为`SOCKET`它是一个 C 兼容的普通旧数据整数类型，它包含一个套接字标识符。它不是一个对象。没有与变量本身相关的重要构造或破坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:40:58.693

`WSAStartup()`必须在调用之前`socket()`调用，否则会返回`WSANOTINITIALISED`错误。

您可以`WSAStartup()`多次调用。最好`WSAStartup()`只调用一次，但 WinSock 是引用计数的，因此如果需要可以多次调用。您必须确保`WSACleanup()`每次`WSAStartup()`成功调用一次，否则引用计数将不平衡。例如，您可以调用`WSAStartup()`构造函数并调用`WSACleanup()`析构函数：

```
public class IPnetwork
{
private:
    WSADATA wsaData ;
    bool wsaInit;
    ...

public:
    IPnetwork(char* serverIPaddress) ;
    ~IPnetwork() ;
} ; 
```

.

```
IPnetwork::IPnetwork(char* serverIPaddress)
{
    wsaInit = (WSAStartup(MAKEWORD(REQ_WINSOCK_VER,0), &wsaData) == 0);
    ...
}

IPnetwork::~IPnetwork()
{
    if (wsaInit) WSACleanup();
}

bool IPnetwork::Connect()
{
    if (!wsaInit)
        return false ; /* winsock problem */
    ...
} 
```

虽然我通常会在单独的单例类中调用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:56:56.310

虽然我同意@Ben 的观点，即您正在做的事情很好，但我个人会尝试从您的代码主线中消除这种丑陋。IMO，这是在这样的标题中创建全局变量的罕见情况之一：

```
#ifndef WS_INITIATOR_INC_
#define WS_INITIATOR_INC_

#include <winsock2.h>
#pragma comment(lib, "ws2_32.lib")

#include <stdexcept>

struct bad_version : public std::logic_error {
    bad_version(std::string const &s) : logic_error(s) {}
};

struct winsock { 
    static const int version = 2;
    WSADATA wsaData;

    winsock() { 
        WSAStartup(MAKEWORD(2, 2),&wsaData);
        if (LOBYTE(wsaData.wVersion) != 2 || HIBYTE(wsaData.wVersion) != 2)
            throw bad_version("Could not initialize WinSock 2.2");
    }
    ~winsock() { 
        WSACleanup();
    }
} ws_initiator;

#endif 
```

将此包含在您的`main.cpp`（或您为包含 的文件提供的任何名称`main`）中，它会自动初始化/清理套接字（以及与正确的库链接）。

# zend-framework2 - 如何在 bjyauthorize 中配置 403 模板

> ID：15343699
> 
> 赞同：2
> 
> 时间：2013-03-11T16:31:49.093
> 
> 标签：zend-framework2, bjyauthorize

我只是设置[`bjyoungblood/bjy-authorize`](https://github.com/bjyoungblood/BjyAuthorize/)并想知道如何告诉 Zend Framework 2 我的`error/403`模板所在的位置。

我没有配置的初始设置`'template' => 'error/403',`

该`403.phtml`文件位于供应商目录中，但我收到以下错误消息：

> **警告**：include(C:\myproject\config\autoload/../view/error/403.phtml) [function.include]: 无法打开流：C:\myproject\vendor\zendframework\ 中没有这样的文件或目录zendframework\library\Zend\View\Renderer\PhpRenderer.php 在第 507 行

我的配置有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:13:47.713

出于性能原因（主要是避免 stat 调用），[BjyAuthorize 使用模板映射](https://github.com/bjyoungblood/BjyAuthorize/blob/1.2.1/config/module.config.php#L59-L65)来定义在`error/403`请求视图时使用哪个文件。这是`view_manager`设置的一个选项，如[`Zend\View`文档](http://framework.zend.com/manual/2.1/en/modules/zend.view.quick-start.html#configuration)中所述。

要设置自己的，您可以简单地在您的中定义如下内容`config/autoload/your-settings.local.php`：

```
'view_manager' => array(
    'template_map' => array(
        'error/403' => '/absolute/path/to/your/error/403.phtml',
    ),
), 
```

或者，在您的模块配置中：

```
'view_manager' => array(
    'template_map' => array(
        'error/403' => __DIR__ . '/view/error/403.phtml',
    ),
), 
```

我建议始终为配置提供绝对路径，因此请确保您的文件`C:\myproject\config\autoload/../view/error/403.phtml`是正确的路径。

如果您愿意，也可以对 403 错误使用不同的视图。这可以通过改变来实现`$config['bjyauthorize']['template']`：

```
'bjyauthorize' => array(
    'template' => 'my-module/unauthorized-template',
), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:31:08.177

您可以手动设置：

```
'error/403' => __DIR__ . '/../view/error/403.phtml', 
```

在 module/Application/config/module.config.php 中并在 module.bjyauthorize.global.php 中注释掉这一行。我假设您正在使用骨架。

@aravind.udayashankara，BjyAuthorize 确实与作曲家一起工作，并且骨架已经配置为在供应商中加载模块，因此无需将其移动到模块目录中。

但是，phprender 似乎无法访问供应商中的视图目录。这可能是“error/403' => **DIR** .'/../view/error/403.phtml” 在运行时实际映射/解释的方式。

# php - 如果图像存在，我如何只显示图像？

> ID：15343706
> 
> 赞同：0
> 
> 时间：2013-03-11T16:32:21.187
> 
> 标签：php, wordpress-theming, wordpress

我对 php 很陌生，并且在弄清楚我做错了什么时遇到了一些麻烦。由于某种原因`kd_mfi_the_featured_image( 'featured-image-3', 'post' );`不存在（即使它上传并且在 word press 管理面板中看起来很好）所以它不 = true 并且它不会显示。

**目标是仅在 feature-image-3 存在时才**显示所有子页面的features-image-3（我正在使用这个[插件](http://wordpress.org/extend/plugins/multiple-featured-images/installation/)来拥有多个特色图像）。我的方法如下

1.  获取当前页面ID
2.  我们当前页面ID查询子页面
3.  如果有子页面为每个子页面设置帖子数据
4.  检查子页面是否有 feature-image-3
5.  如果子页面有 features_image-3**显示它**：如果没有**查询下一篇文章**

**customPage.php 中的代码**

```
<?php if ( have_posts() ) {  /* Query and display the parent. */
while ( have_posts() ) {
the_post();
the_content();
$thispage=$post->ID;
} 
```

} ?>

```
<?php $childpages = query_posts('post_type=page&post_parent='.$thispage);
if($childpages) /* display the children content  */
        foreach ($childpages as $post) :
        setup_postdata($post); 
            if (kd_mfi_the_featured_image( 'featured-image-3', 'post' )) {

                    kd_mfi_the_featured_image( 'featured-image-3', 'post' );
                    the_post_thumbnail();

            } 
            else {
                $wp_query->next_post();
            } 

        endforeach; ?> 
```

**Functions.php 中的代码**

```
if( class_exists( 'kdMultipleFeaturedImages' ) ) {

    $args2 = array(
            'id' => 'featured-image-2',
            'post_type' => 'page',      // Set this to post or page
            'labels' => array(
                'name'      => 'Home Page Carousel',
                'set'       => 'Set Home Page Carousel',
                'remove'    => 'Remove Home Page Carousel',
                'use'       => 'Use as Home Page Carousel',
            )
    );

    $args3 = array(
            'id' => 'featured-image-3',
            'post_type' => 'page',      // Set this to post or page
            'labels' => array(
                'name'      => 'Product Category Hero',
                'set'       => 'Set Product Category Hero',
                'remove'    => 'Remove Product Category Hero',
                'use'       => 'Use as Product Category Hero',
            )
    );

    $args4 = array(
            'id' => 'featured-image-4',
            'post_type' => 'page',      // Set this to post or page
            'labels' => array(
                'name'      => 'Product Category Featured',
                'set'       => 'Set Product Category Featured',
                'remove'    => 'Remove Product Category Featured',
                'use'       => 'Use as Product Category Featured',
            )
    );

    new kdMultipleFeaturedImages( $args2);
    new kdMultipleFeaturedImages( $args3 );
    new kdMultipleFeaturedImages( $args4 ); 
```

}

# mysql - MySQL shell 将结果显示为“less”之类的内容

> ID：15343707
> 
> 赞同：1
> 
> 时间：2013-03-11T16:32:21.697
> 
> 标签：mysql, linux, shell

在 MySQL shell 中的远程登录尝试中运行以下命令。

```
show variables; 
```

该查询仅显示 233 个变量中的最后 50 个左右。我希望结果是可滚动的，以便我可以查看所有变量。类似于重定向到“少”的东西。

事实上，我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:37:41.923

您可以尝试使用以下命令在 MySQL 命令行中设置“更少”类型的行为：

`pager less`

此外，可以使用以下命令关闭此行为：

`pager`

（*注意：这可能不适用于所有类型的 MySQL...有关更多信息，[请查看文档](http://dev.mysql.com/doc/refman/4.1/en/mysql-command-options.html#option_mysql_pager)。*）

# java - 如何指定“this”指的是什么？

> ID：15343711
> 
> 赞同：1
> 
> 时间：2013-03-11T16:32:28.043
> 
> 标签：java, this, actionlistener

我有一个 JFrame，其中一个按钮必须将它自己作为父框架传递，我会使用**this**关键字，但它返回的是 actionlistener，而不是 JFrame。有解决方法还是我写得不好？

编码：

```
start.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            kMeans=new KMeans(mainWindow.table, Integer.parseInt(centroids.getText()),this);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:34:43.587

因为这段代码：

```
new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        kMeans=new KMeans(mainWindow.table, Integer.parseInt(centroids.getText()),this);
    }
} 
```

实际上已经创建了一个新对象。当您`this`在此实现的方法中使用关键字时，`ActionListener`它实际上使用`this`对象，即`ActionListener`.

如果您`this`在上述块之外使用，它将引用 JFrame 实例。

如果您想`this`在 ActionListener 中引用 AFrame 的实例，您可以`AFrame.this`按照评论中的说明进行操作。其中 AFrame 是您的框架类的名称，不确定您的代码中有哪个名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:37:33.280

有一种解决方法。要`this`在引用外部类时使用关键字，您可以使用`ClassName.this`. 例如：

```
class MyFrame extends JFrame {
    public void someMethod () {
        someButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                ActionListener thisListener = this; // obviously
                MyFrame outerThis = MyFrame.this; // here's the trick
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:41:22.690

您正在尝试将外部类的引用传递给匿名内部类。为此，您应该使用`OuterClassName.this`. 请参见下面给出的示例。

```
import javax.swing.*;
import java.awt.event.*;
class FrameExample extends JFrame
{
    private void createAndShowGUI()
    {
        JButton button = new JButton("Click");
        getContentPane().add(button);
        button.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent evt)
            {
                JOptionPane.showMessageDialog(FrameExample.this,"This is the message","Message",JOptionPane.OK_OPTION);//Passing the reference of outer class object using FrameExample.this
            }
        });
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                FrameExample fe = new FrameExample();
                fe.createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:36:40.383

你应该使用`JFrameClassName.this`. 因此，如果 JFrame 的名称是 MainWindow，您的代码将是：

```
new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        kMeans=new KMeans(mainWindow.table, Integer.parseInt(centroids.getText()), MainWindow.this);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T16:39:32.723

使用 ActionEvent 中的 getSource() 方法访问发生事件的对象。例子 ：`JMenuItem menuItem = (JMenuItem) e.getSource();`

# django - 使用 apache 为 django 1.5 提供管理员 css

> ID：15343713
> 
> 赞同：2
> 
> 时间：2013-03-11T16:32:32.040
> 
> 标签：django, apache, django-1.5

我第一次将基于 Django 1.5 构建的应用程序移动到运行 apache 的开发服务器上。我让它大部分运行正常，但我在 CSS 服务方面遇到了问题。我可以让网站的 CSS 工作但不能让管理员的 CSS 工作，或者让管理员的 CSS 工作但不能让网站的 CSS 工作。

我遵循文档并使用 collectstatic 命令将所有静态资产放入 STATIC_ROOT 文件夹。

这是我的设置文件中的相关数据

```
STATIC_ROOT = '/var/www/projectmanagement/django/static/'

STATIC_URL = '/static/'

STATICFILES_DIRS = (
     '/var/www/projectmanagement/django/projectmanagement/projects/static',
) 
```

这是来自 httpd.conf 的相关数据

```
Alias /static/admin/ /var/www/projectmanagement/django/static/admin/
Alias /static /var/www/projectmanagement/django/static/

<Directory /var/www/projectmanagement/django/static/>
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / /var/www/projectmanagement/django/projectmanagement/django.wsgi

<Directory /usr/local/wsgi/scripts> 
Order allow,deny
Allow from all
</Directory> 
```

从我的 vhost.conf

```
NameVirtualHost *:80

<VirtualHost *:80>
ServerAdmin webmaster@pmt.com
ServerName pmt.com
ServerAlias www.pmt.com
DocumentRoot /var/www/projectmanagement/html/
ErrorLog /var/www/projectmanagement/logs/error.log
CustomLog /var/www/projectmanagement/logs/access.log combined

WSGIScriptAlias /projectmanagement /var/www/projectmanagement/django/projectmanagement/django.wsgi

<Directory "/var/www/projectmanagement/html">
php_admin_value open_basedir "/var/www/projectmanagement/html/:/tmp/:/var/www/projectmanagement   /django/projectmanagement/"
php_admin_value include_path "/var/www/projectmanagement/html/:/tmp/:/var/www/projectmanagement /django/projectmanagement/"
</Directory>

</VirtualHost> 
```

当我添加行

```
 AliasMatch /([^/]*\.css) /var/www/projectmanagement/django/static/admin/css/$1 
```

在我的 httpd.conf 文件中的第一个别名之前，我让管理员 css 工作，但不是站点的 css。如果它消失了，那么该网站的 CSS 工作但不是管理员的。这让我相当难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:54:12.950

添加该别名将捕获*所有*.css 请求，但看起来只能为管理员 css 提供服务。删除它意味着 css 请求将到达你的`WSGIScriptAlias`，我想你已经得到了`DEBUG = True`......所以 django 将为你提供静态媒体。

我不知道为什么 django 的内置静态服务器不适用于您的管理员 css - 您是否设置了 STATICFILES_FINDERS？

无论如何，您的别名确实应该是这样的，因此它可以为您的所有静态文件提供服务：

```
 AliasMatch /static/ /var/www/projectmanagement/django/static/ 
```

# javascript - 使用 JWPlayer 6 在同一组中包含图像和视频的 Fancybox2

> ID：15343716
> 
> 赞同：2
> 
> 时间：2013-03-11T16:32:41.043
> 
> 标签：javascript, fancybox, jwplayer

我正在尝试创建一个混合图像和视频的画廊组，视频使用 JWPlayer6。

我让每个人都作为单独的小组工作，但我无法锻炼如何将两者结合起来。

```
<!-- FancyBox to display images -->
<script type="text/javascript">
    $(document).ready(function() {
      $(".fancybox").fancybox({
        helpers : { 
      title : { type : 'inside' }
      }, // helpers
        beforeLoad: function(){
        }
      });
    });

<!-- FancyBox to display videos -->
<script type="text/javascript">
   $(document).ready(function() {
     $(".fancybox-video").fancybox({
        content: '<div id="video_container" style="">Loading video...</div><br>',
        autoSize: true,
        helpers : { 
          title : { type : 'inside' }
           }, // helpers
        beforeLoad: function(){
           this.title = $(this.element).attr('caption');
           },
        afterShow: function(){
           jwplayer("video_container").setup({
             flashplayer: "/static/js/libs/jwplayerjwplayer.flash.swf",
             file: this.href,
             autostart: 'true'
             }); // jwplayer setup
           } // afterShow
        }); // fancybox
 }); // on
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:22:51.077

好的，我不确定这是 JFK 的建议，但这似乎可行，尽管必须有更有效的方法来做到这一点：

```
<style type="text/css">
.fancybox-nav {
height: 80%;
}
</style> 

<script type="text/javascript">
    $(document).ready(function() {
  $(".fancybox").fancybox({
        autoSize: true,
        helpers : { 
          title : { type : 'inside' }
          }, // helpers
        beforeLoad: function(){
          if($(this.element).attr('containertype')=='video'){
            this.content = '<div id="video_container" style="">Loading the player ... </div><br>';
          };
          },
        afterShow: function(){
          if($(this.element).attr('containertype')=='video'){
            jwplayer("video_container").setup({
            flashplayer: "jwplayer.flash.swf",
            file: this.href,
            autostart: 'true'
          }); // jwplayer setup 
          }; 
        }// afterShow
   }); // fancybox
 }); // on
</script> 
```

和 HTML：

```
<a class="fancybox" rel="group" title="Video 1" data-fancybox-type="anything" containertype="video" href="1.flv"><img src="1.png"/></a>
<a class="fancybox" rel="group" title="Image 2"  href="2.png"><img src="2.png"/></a> 
```

# ruby - 红宝石葡萄反应器被阻塞

> ID：15343717
> 
> 赞同：1
> 
> 时间：2013-03-11T16:32:41.777
> 
> 标签：ruby, blocked, reactor, grape

我正在使用 Ruby Grape 创建 API，但遇到以下问题。当有新的 GET 请求时，请求的数据量很大，耗时较长，同时 Reactor 被阻塞，直到请求完成后才能处理新的请求。代码非常简单：

```
class API < Grape::API
  resource :users do
    get do
      get_users()
    end
  end
end 
```

get_users 通过 TCP 连接到另一个系统，并获取大量转换为 JSON 的数据。这是使用 3rd 方 gem 完成的。处理这种情况的最佳选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:12:36.033

您的应用程序执行长时间运行的阻塞 I/O 操作。为了很好地处理这些类型的工作负载，您的系统需要支持高 I/O 并发。

传统的单线程多进程系统，如 Phusion Passenger 开源和 Unicorn 不适合这类工作负载。它们可以处理的并发量受进程数量的限制。这个问题记录在 Unicorn 的[哲学页面](http://unicorn.bogomips.org/PHILOSOPHY.html)，“Just Worse in Some Cases”部分，或者最近关于[调整 Phusion Passenger 的并发性](http://blog.phusion.nl/2013/03/12/tuning-phusion-passengers-concurrency-settings/)的 Phusion 文章中。

虽然 Thin 由于其事件 I/O 模型，理论上能够处理高 I/O 并发，但必须明确编写应用程序和框架才能利用这一点。很少有框架能做到这一点。Rails 和 Sinatra 都不支持事件 I/O。Cramp 支持它，还有另一个新的事件框架，我忘记了它的名字。但似乎 Grape 不支持事件 I/O。

解决方案是切换到支持多线程的应用程序服务器，它也能够支持高 I/O 并发。一个这样的应用服务器是[Phusion Passenger 4 Enterprise](https://www.phusionpassenger.com/enterprise)，它支持混合多线程/多进程模型。多线程是并发，而多进程是为了稳定性和利用多个 CPU 内核的能力。Phusion 博客[描述了不同工作负载的最佳并发设置。](http://blog.phusion.nl/2013/03/12/tuning-phusion-passengers-concurrency-settings/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:28:02.837

我想到了两个选择：

1.  设置乘客/独角兽等有足够的工人来处理并发请求。
2.  如果这还不够：重新制定 API 逻辑，以便长时间操作将分解为两个调用：第一个 - 留下请求，第二个 - 检查完成/检索结果。

此外，如果合适的话 - 您可以缓存 get_users() 的结果

# url - Google Analytics（分析）虚拟综合浏览量允许使用哪些格式？

> ID：15343726
> 
> 赞同：0
> 
> 时间：2013-03-11T16:33:03.307
> 
> 标签：url, google-analytics

Google Analytics（分析）虚拟网页浏览量必须是网址吗？任何其他字符串格式是否有效，是否记录了允许的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:17:34.513

就文档而言，我不确定是否有文档。事实上，如果真的需要一个，因为您只需要使用一个**STRING参数。**它可以是“任何东西”（例如：*'/downloads/dynamic-form'*），它可以补充一个唯一的 URL，由于某些技术原因不能使用但在 Google Analytics 报告中包含作为单独的页面视图是有意义的.

使用虚拟浏览量的示例：

```
_gaq.push(['_trackPageview', '/downloads/dynamic-form']); 
```

然而，在很多用例中，*Events*会做得更好，因为跟踪虚拟浏览量“将增加您的总浏览量”（请参阅[​​官方 GA 文档](https://developers.google.com/analytics/devguides/collection/gajs/asyncMigrationExamples?hl=en#VirtualPageviews)）。例如下载、出站链接、按钮等。

[但是，使用事件](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide?hl=en)时要小心，因为也有一些限制，并确保您指定它是交互事件还是非交互事件（这会影响跳出率等其他报告）。

# .net - Boo 编译器偶尔会抛出“尝试读取或写入受保护的内存”

> ID：15343736
> 
> 赞同：3
> 
> 时间：2013-03-11T16:33:19.547
> 
> 标签：.net, memory-leaks, dsl, boo, rhino-dsl

在编译 Boo 脚本时，有时会出现以下异常：

```
A unexpexted thing happened, C:\Resources\temp\de4ee12533b34facbb80d007648a48f2.BackendRole\RoleTemp
output562348dc-eaec-41d3-9463-330b8bbe7ab8.bre(1,1): BCE0055: Boo.Lang.Compiler.CompilerError: Internal compiler error: Failed to create 'output562348dceaec-41d3-9463-330b8bbe7ab8.$Prepare$locals$3' type.. ---> System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
at System.Reflection.Emit.TypeBuilder.TermCreateClass(RuntimeModule module, Int32 tk, ObjectHandleOnStack type)
at System.Reflection.Emit.TypeBuilder.CreateTypeNoLock()
at System.Reflection.Emit.TypeBuilder.CreateType()
at Boo.Lang.Compiler.Steps.EmitAssembly.TypeCreator.HandleTypeCreation(TypeDefinition  type)
at Boo.Lang.Compiler.Steps.EmitAssembly.TypeCreator.CreateType(TypeDefinition type)
— End of inner exception stack trace —
at Boo.Lang.Compiler.Steps.EmitAssembly.TypeCreator.CreateType(TypeDefinition type)
at Boo.Lang.Compiler.Steps.EmitAssembly.TypeCreator.CreateTypes()
at Boo.Lang.Compiler.Steps.EmitAssembly.TypeCreator.Run()
at Boo.Lang.Compiler.Steps.EmitAssembly.CreateTypes(List`1 types)
at Boo.Lang.Compiler.Steps.EmitAssembly.DefineTypes()
at Boo.Lang.Compiler.Steps.EmitAssembly.Run()
at Boo.Lang.Compiler.CompilerPipeline.RunStep(CompilerContext context, ICompilerStep step) 
```

这只有时会发生，通常是在远程环境中（我只能看到那里的日志）。仍然没有找到在本地重现它以调试它、监控内存消耗等的方法。

有没有人有任何线索？编译 Boo 脚本时是否需要处理一些非托管资源？

# selenium - WebDriver - 元素不是可点击的 Chrome 驱动程序

> ID：15343737
> 
> 赞同：0
> 
> 时间：2013-03-11T16:33:27.143
> 
> 标签：selenium, webdriver, selenium-chromedriver

我在 Chrome 上使用 WebDriver，单击元素时出现以下错误：

```
Clicking locator: //div[@id='tabContainer']/ul/li[3]/a/div   Element
> is not clickable at point (170, 127). Other element would receive the
> click: <ul style="left: 5px; top: 25px; display: block;"
> class="jdm_events">...</ul> (WARNING: The server did not provide any
> stacktrace information) Command duration or timeout: 32 milliseconds
> Build info: version: '2.29.0', revision: '58258c3', time: '2013-01-17
> 22:46:35' System info: os.name: 'Windows Server 2008 R2', os.arch:
> 'x86', os.version: '6.1', java.version: '1.7.0_11' Session ID:
> 740bb830a8add9463c23d4461c99acc9 Driver info:
> org.openqa.selenium.chrome.ChromeDriver Capabilities [{platform=XP,
> chrome.chromedriverVersion=26.0.1383.0, acceptSslCerts=false,
> javascriptEnabled=true, browserName=chrome, rotatable=false,
> locationContextEnabled=false, version=25.0.1364.152,
> cssSelectorsEnabled=true, databaseEnabled=false, handlesAlerts=true,
> browserConnectionEnabled=false, webStorageEnabled=true,
> nativeEvents=true, applicationCacheEnabled=false,
> takesScreenshot=true}] 
```

仅当使用 WebDriver 的 .NET 绑定通过 Grid2 同时运行多个测试时才会发生这种情况。

每次运行时，我通常会在 20 次测试中失败大约 2 次，但是一次失败的测试可能会在下一次正确运行。

我想知道这是否是 Chrome 驱动程序的一个已知问题，或者是否需要将某些内容添加到我的 click 方法中以处理导致此问题的任何原因。

这是要单击的元素所在的代码示例：

```
<li class="ui-state-default ui-corner-top">
  <a href="#fundingTab" title="">
    <div class="tab" style="float: left; padding: 0.5em 1em">
     <span style="overflow: visible;">Funding</span>
    </div>
  </a>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T23:29:23.783

因为它仅在您运行多个测试（本地或在某些 CI 机制中）时发生，所以它也可能由于**前一个测试结束状态**的结束而发生，这会影响下一个测试。例如：在测试 1 中，将组件添加到主页。执行的测试。组件被移除。在测试 2 中，组件仍然出现在页面上，这会影响测试。

因此，在您的情况下，请考虑打开菜单这样的选项，不是因为悬停，而是因为它在之前的测试中打开了。

希望能帮助到你。

PS关于更改鼠标初始位置 - 我找到了这个答案，也许它可以帮助你：[如何重置 Selenium 鼠标光标位置？](https://stackoverflow.com/questions/16606308/how-can-i-reset-the-selenium-mouse-cursor-position)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T16:15:59.553

在将 Olark 聊天功能添加到我们的网站后，我遇到了类似的问题。在这种情况下，我将测试设置为在页面加载后进行任何单独测试之前自动调用 olark 上的禁用 API。

它确实减慢了测试速度，但它解决了问题。也许您可以在页面加载后注入一些 javascript 来隐藏菜单。这假设您不需要测试该菜单。

# ruby-on-rails-3 - Rails 2.2.2 迁移到 Rails 3 - CSS 位置

> ID：15343738
> 
> 赞同：1
> 
> 时间：2013-03-11T16:33:31.480
> 
> 标签：ruby-on-rails-3

我正在将 Rails 2.2.2 项目迁移到 Rails 3，但我看到很多 404 错误：

```
 Started GET "/assets/b2b.png" for 172.20.140.52 at    2013-03-11 12:30:24 -0400
 Served asset /b2b.png - 404 Not Found (8ms)
 ActionController::RoutingError (No route matches [GET] "/assets/b2b.png"):

 Started GET "/assets/default.css" for 172.20.140.52 at 2013-03-11 11:57:29 -0400
 Served asset /default.css - 404 Not Found (5ms)
 ActionController::RoutingError (No route matches [GET] "/assets/default.css"): 
```

在我的 Rails 2.2.2 项目中，我所有的样式表都存储在 **/var/www/my_app_directory/public/stylesheets/**中，所以我只是将其移至 Rails 3，我认为这是问题所在。

我应该把我的所有 CSS for Rails 3 放在哪里才能开心？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:36:28.327

Rails 3 引入了[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)，因此您应该将所有样式表移动到

```
app/assets/stylesheets 
```

并创建`application.css`应包含：

```
// require_self
// require_tree . 
```

# c++ - 如何创建一个复杂的数组？

> ID：15343739
> 
> 赞同：-9
> 
> 时间：2013-03-11T16:33:34.160
> 
> 标签：c++

我有一个非常简单的问题要问你：

```
#include < iostream> 
#include < complex>

using namespace std;

int main()
{

    int k=200000;

    complex <double> r0[k/2],r1[k/2]; ///wrong!!!

    complex <float> r0[k/2],r1[k/2];  ///right

    return 0;
} 
```

我只想创建一个复杂的数组。`k=200000`在这里，计算机停止工作（不是错误，它显示我的文件停止工作），如果我只是`complex <double>`，它适用于`complex<float>`！可能是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T16:39:19.583

您正在“炸毁堆栈”-当您在 main 中有局部变量时，像这样，它将使用堆栈上的空间。在这种情况下，`k * sizeof double`或者`k * sizeof float`- 由于典型的编译器使用 4 个字节作为浮点数，我们说的是第二个变体为 800KB，如果堆栈只有 1MB，第一个变体为 1.6MB，那么第一个将远远超出大小的堆栈。

有几种解决方案，其中一种当然是采用正确的C++使用vector的方法：

```
vector<complex <double> > r0, r1;

r0.resize(k/2);
r1.resize(k/2); 
```

另外两个选项

动态分配：

```
complex<double> *r0 = new complex<double>[k/2];

...

delete [] r0; 
```

或者制作 r0 和 r1 全局变量。

# javascript - Javascript 单元素下拉菜单

> ID：15343740
> 
> 赞同：1
> 
> 时间：2013-03-11T16:33:34.293
> 
> 标签：javascript, jquery

我对javascript相当陌生，并且一直在尝试了解如何使代码中的每个元素在单击时下拉。

乍一看，我以为我需要添加 $(this)。对于每个事件，但刷新我的页面并不会影响行为，所有 div 都会在单击时继续向下动画。

这是脚本

```
 function slideDiv(elem) {

        if ($(".slidePanel").is(":visible")) {

            $(".contentFade").animate(
                {
                    opacity: "0"
                },

                600,

                function(){
                    $(".slidePanel").slideUp();
                }
            );
        }
        else {
            $(".slidePanel").slideDown(600, function(){
                $(".contentFade").animate(
                    {
                        opacity: "1"
                    },
                    600
                );
            });
        }   
    } 
```

我已经在这里上传了当前代码[http://jsfiddle.net/alexmk92/z59p8/](http://jsfiddle.net/alexmk92/z59p8/)所以你会看到我试图传达的问题......

有人能指出我如何解决这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:58:04.070

所有这些答案都过于复杂......

```
$('a').click(function() {
    $(this).next().slideToggle(400, function() {
        $(this).children('.contentFade').animate({opacity:'1'},400);
    });
}) 
```

我建议在你的 a 标签中添加一个需要这样做的类`class="toggle"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:55:12.947

我编辑你的一点点（大约 4-6 行）

首先将您`slidePanel`的链接和在某些 div 中向上滑动的链接包装起来

```
<div> <!-- new line-->
<a href="#" onclick="slideDiv(this);"> <p class="blueText">A post title here :</p> </a>

<div class="slidePanel">
    <div class="contentFade">
        <p class="p1">Some text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my page</p>
    </div>
    <!-- end contentFade -->
    </div>
    <!-- end sldiePanel -->
    <!-- end post1 -->
</div><!-- new line-->
<div><!-- new line-->
<!-- second post to show issue -->
<a href="#" onclick="slideDiv(this);"> <p class="blueText">A post title here :</p> </a>

<div class="slidePanel">
    <div class="contentFade">
        <p class="p1">Some text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my pageSome text I will be displaying on my page</p>
    </div>
    <!-- end contentFade -->
    </div>
    <!-- end sldiePanel -->
    <!-- end post1 -->
    </div><!-- new line--> 
```

然后为你的js代码

```
function slideDiv(elem) {

  if ($(".slidePanel").is(":visible"))//new line
      $(".slidePanel").slideUp();//new line
    if ($(".slidePanel",$(elem).parent()).is(":visible")) {//notice the $(elem).parent()
        $(".contentFade",$(elem).parent()).animate(
            {
                opacity: "0"
            },

            600,

            function(){
                $(".slidePanel",$(elem).parent()).slideUp();
            }
        );
    }
    else {
        $(".slidePanel",$(elem).parent()).slideDown(600, function(){
            $(".contentFade",$(elem).parent()).animate(
                {
                    opacity: "1"
                },
                600
            );
        });
    }   
} 
```

# c++ - 如何实现最低优先级队列

> ID：15343742
> 
> 赞同：-4
> 
> 时间：2013-03-11T16:33:35.833
> 
> 标签：c++, priority-queue

我已经知道优先级队列默认实现为 C++ 中的 max_priority 队列。但是如何制作一个最小优先级队列，而不是存储每个数字的负数。请帮忙，我找不到语法，如果能找到任何无法使用和理解的语法:(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:40:01.077

[http://www.cplusplus.com/reference/queue/priority_queue/](http://www.cplusplus.com/reference/queue/priority_queue/)

使用允许您传递自己的比较对象的构造函数。

> 模板<类T，类容器=向量，类比较=少>类priority_queue
> 
> 比较：比较类：这样的类，表达式 comp(a,b)，其中 comp 是此类的对象，a 和 b 是容器的元素，如果要在严格条件中将 a 放置在 b 之前，则返回 true弱排序操作。这可以是实现函数调用运算符的类或指向函数的指针。这默认为less，它返回与应用小于运算符相同的结果（a

# python - 使用 Python 从一个文本文件复制到另一个文本文件

> ID：15343743
> 
> 赞同：40
> 
> 时间：2013-03-11T16:33:39.430
> 
> 标签：python, text-files

我想将某些文本行从一个文本文件复制到另一个。在我当前的脚本中，当我搜索一个字符串时，它会复制所有内容，我怎样才能只复制文本的某个部分？例如，仅当其中包含“tests/file/myword”时才复制行？

当前代码：

```
#!/usr/bin/env python
f = open('list1.txt')
f1 = open('output.txt', 'a')

doIHaveToCopyTheLine=False

for line in f.readlines():

    if 'tests/file/myword' in line:
        doIHaveToCopyTheLine=True

    if doIHaveToCopyTheLine:
        f1.write(line)

f1.close()
f.close() 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-11T16:40:20.983

单线：

```
open("out1.txt", "w").writelines([l for l in open("in.txt").readlines() if "tests/file/myword" in l]) 
```

推荐`with`：

```
with open("in.txt") as f:
    lines = f.readlines()
    lines = [l for l in lines if "ROW" in l]
    with open("out.txt", "w") as f1:
        f1.writelines(lines) 
```

使用更少的内存：

```
with open("in.txt") as f:
    with open("out.txt", "w") as f1:
        for line in f:
            if "ROW" in line:
                f1.write(line) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T17:10:52.510

readlines() 将整个输入文件读入一个列表，表现不佳。只需遍历文件中的行。我在 output.txt 上使用了“with”，以便在完成后自动关闭。'list1.txt' 不需要这样做，因为它会在 for 循环结束时关闭。

```
#!/usr/bin/env python
with open('output.txt', 'a') as f1:
    for line in open('list1.txt'):
        if 'tests/file/myword' in line:
            f1.write(line) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-10-06T18:50:51.410

只是稍微清理一下这样做的方式。这与 ATOzTOA 的答案差不多，但没有理由做两个单独的 with 语句。

```
with open(path_1, 'a') as file_1, open(path_2, 'r') as file_2:
    for line in file_2:
        if 'tests/file/myword' in line:
            file_1.write(line) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-21T20:22:16.847

安全和节省内存：

```
with open("out1.txt", "w") as fw, open("in.txt","r") as fr: 
    fw.writelines(l for l in fr if "tests/file/myword" in l) 
```

它不会创建临时列表（做什么`readline`和`[]`会做什么，如果文件很大，这不是启动器），一切都是通过生成器理解完成的，并且使用`with`块确保文件在退出时关闭。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-17T12:42:48.947

```
f=open('list1.txt')  
f1=open('output.txt','a')
for x in f.readlines():
    f1.write(x)
f.close()
f1.close() 
```

这将工作 100% 尝试一次

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-20T04:29:24.590

在`Python 3.10`带括号的上下文管理器中，您可以在一个块中使用多个上下文管理器：

```
with (open('list1.txt', 'w') as fout, open('output.txt') as fin):
    fout.write(fin.read()) 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-10-24T19:44:39.363

```
f = open('list1.txt')
f1 = open('output.txt', 'a')

# doIHaveToCopyTheLine=False

for line in f.readlines():
    if 'tests/file/myword' in line:
        f1.write(line)

f1.close()
f.close() 
```

现在你的代码可以工作了。试试这个。

# java - 如何在一个程序中创建多个 GUI 表单？

> ID：15343746
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:33:50.497
> 
> 标签：java, swing

我正在做一个写入 sql 数据库的项目。我现在的问题是我不知道如何在一个程序中创建多个表单。我正在使用 JGrasp 编写程序。

我得到的错误是在我尝试添加第二种形式之后。它说：

> StartMenuOptions.java:126：错误：此处不允许修饰符 private

我的代码包括在下面：

```
public class StartMenuOptions extends javax.swing.JFrame {

/**
 * Creates new form StartMenuOptions
 */
public StartMenuOptions() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();
    jButton4 = new javax.swing.JButton();
    jLabel2 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
    jLabel1.setText("Welcome to the Entertainment Data Base");

    jButton1.setText("ADD");

    jButton2.setText("EDIT");

    jButton3.setText("DELETE");

    jButton4.setText("REPORTS");

    jLabel2.setText("What Action do you want to Perform?");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(143, 143, 143)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(jButton4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jButton3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addGroup(layout.createSequentialGroup()
                    .addGap(62, 62, 62)
                    .addComponent(jLabel1))
                .addGroup(layout.createSequentialGroup()
                    .addGap(90, 90, 90)
                    .addComponent(jLabel2)))
            .addContainerGap(44, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1)
            .addGap(31, 31, 31)
            .addComponent(jLabel2)
            .addGap(18, 18, 18)
            .addComponent(jButton1)
            .addGap(18, 18, 18)
            .addComponent(jButton2)
            .addGap(18, 18, 18)
            .addComponent(jButton3)
            .addGap(18, 18, 18)
            .addComponent(jButton4)
            .addContainerGap(63, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(StartMenuOptions.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(StartMenuOptions.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(StartMenuOptions.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(StartMenuOptions.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new StartMenuOptions().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JButton jButton4;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
// End of variables declaration 
```

}

```
private class Add extends javax.swing.JFrame {

/**
 * Creates new form Add
 */
public Add() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jRadioButton1 = new javax.swing.JRadioButton();
    jRadioButton2 = new javax.swing.JRadioButton();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jTextField3 = new javax.swing.JTextField();
    jLabel5 = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setText("ADD");

    jRadioButton1.setText("Movies");

    jRadioButton2.setText("Music");

    jButton1.setText("Back");

    jButton2.setText("Submit");

    jLabel2.setText("Title");

    jLabel3.setText("Time min.sec");

    jLabel4.setText("Year");

    jTextField1.setText("jTextField1");

    jTextField2.setText("jTextField2");

    jTextField3.setText("jTextField3");

    jLabel5.setText("ex:(10.33)");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(jButton1, javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                    .addGap(41, 41, 41)
                    .addComponent(jRadioButton1)))
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(29, 29, 29)
                        .addComponent(jButton2)
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jRadioButton2)
                        .addGap(24, 24, 24)))
                .addGroup(layout.createSequentialGroup()
                    .addGap(52, 52, 52)
                    .addComponent(jLabel1)
                    .addContainerGap())))
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(jLabel4)
                .addComponent(jLabel3)
                .addComponent(jLabel2))
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(74, 74, 74)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGroup(layout.createSequentialGroup()
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 74, Short.MAX_VALUE)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                        .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGap(30, 30, 30)
                    .addComponent(jLabel5)
                    .addGap(42, 42, 42))))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(jButton1)
                .addComponent(jLabel1))
            .addGap(20, 20, 20)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jRadioButton1)
                .addComponent(jRadioButton2))
            .addGap(21, 21, 21)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel2)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel3)
                .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jLabel5))
            .addGap(20, 20, 20)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel4)
                .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 81, Short.MAX_VALUE)
            .addComponent(jButton2)
            .addContainerGap())
    );

    pack();
}// </editor-fold>                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(Add.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(Add.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(Add.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(Add.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new Add().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JLabel jLabel5;
private javax.swing.JRadioButton jRadioButton1;
private javax.swing.JRadioButton jRadioButton2;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField2;
private javax.swing.JTextField jTextField3;
// End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:43:57.633

在 Add 类中将私有可见性更改为公共。

# ios - 计算循环中的 BIGNUM 奇怪行为

> ID：15343751
> 
> 赞同：2
> 
> 时间：2013-03-11T16:34:02.433
> 
> 标签：ios, openssl

我正在尝试实现一个基本例程来对 BIGNUM(s) 执行一些计算，但我发现了一个奇怪的行为。功能如下

```
unsigned char *char_array_as_hex(unsigned char *chr_a, int len)
{
    unsigned char *chr_s = (unsigned char *)malloc(len * 2);
    char buffer[5];

    for (int i = 0; i < len; i++)
    {
        sprintf(buffer, "%02X", chr_a[i]);
        chr_s[(2 * i) + 0] = buffer[0];
        chr_s[(2 * i) + 1] = buffer[1];
    }

    return chr_s;
} 
```

和

```
char *big_number_as_decimal_from_hex_array(unsigned char *chr_a, int len, BN_CTX *bn_ctx)
{
    unsigned char *hex_s = char_array_as_hex(chr_a, len);
    BIGNUM *big_number = BN_CTX_get(bn_ctx);
    BN_hex2bn(&big_number, (char *)hex_s);
    char *big_number_as_decimal = BN_bn2dec(big_number);

    free(hex_s);
    BN_free(big_number);

    return big_number_as_decimal;
} 
```

和

```
void test_compute_prime256v1()
{
    BN_CTX *bn_ctx = BN_CTX_new();
    BN_CTX_start(bn_ctx);

    unsigned char seed_a[20] = {
        0xC4,0x9D,0x36,0x08,0x86,0xE7,0x04,0x93,0x6A,0x66,  /* seed */
        0x78,0xE1,0x13,0x9D,0x26,0xB7,0x81,0x9F,0x7E,0x90
    };
    printf("s = %s\n", big_number_as_decimal_from_hex_array(seed_a, 20, bn_ctx));

    unsigned char p_a[32] = {
        0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x01,0x00,0x00,  /* p */
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
        0xFF,0xFF
    };
    printf("p = %s\n", big_number_as_decimal_from_hex_array(p_a, 32, bn_ctx));

    BN_CTX_end(bn_ctx);
    BN_CTX_free(bn_ctx);
} 
```

然后我在 Objective-C 方法中调用“test_compute_prime256v1”。如果我在每次调用之间以合理的延迟调用它一次或多次，它会产生正确的结果，但是，当我在循环中调用该函数时，它会产生不同的错误值

```
- (IBAction)btnOK_Clicked:(id)sender
{
    for (int i = 1; i < 10; i++)
    {
        printf("i = %d\n", i);
        test_compute_prime256v1();
    }   
} 
```

样本输出是

```
i = 1
s = 1122468115042657169822351801880191947498376363664
p = 115792089210356248762697446949407573530086143415290314195533631308867097853951
i = 2
s = 1122468115042657169822351801880191947498376363664
p = 966134380529368896499052403318808180610643774633026536153469502543482958881555881553276...
i = 3
s = 1122468115042657169822351801880191947498376363664
p = 115792089210356248762697446949407573530086143415290314195533631308867097853951 
```

注意：一些数字被修剪以适应。我遵循了[这里](http://www.openssl.org/docs/crypto/BN_CTX_start.html)的建议。我错过了什么吗？有什么地方有错误吗？任何人都可以帮忙吗？

谢谢

编辑：

我对代码进行了一些修改，但问题仍然存在。我改变`big_number_as_decimal_from_hex_array`如下

```
char *big_number_as_decimal_from_hex_array_ex(unsigned char *chr_a, int len)
{
    BN_CTX *bn_ctx = BN_CTX_new();
    BN_CTX_start(bn_ctx);
    unsigned char *hex_s = char_array_as_hex(chr_a, len);
    BIGNUM *big_number = BN_CTX_get(bn_ctx);
    BN_hex2bn(&big_number, (char *)hex_s);
    char *big_number_as_decimal = BN_bn2dec(big_number);

    free(hex_s);
    BN_free(big_number);
    BN_CTX_end(bn_ctx);
    BN_CTX_free(bn_ctx);

    return big_number_as_decimal;
} 
```

并且

```
char *big_number_as_decimal_from_hex_array_ex_2(unsigned char *chr_a, int len)
{
    BN_CTX *bn_ctx = BN_CTX_new();
    unsigned char *hex_s = char_array_as_hex(chr_a, len);
    BIGNUM *big_number = BN_CTX_get(bn_ctx);
    BN_hex2bn(&big_number, (char *)hex_s);
    char *big_number_as_decimal = BN_bn2dec(big_number);

    free(hex_s);
    BN_free(big_number);
    BN_CTX_free(bn_ctx);

    return big_number_as_decimal;
} 
```

我修改了`test_compute_prime256v1`as

```
void test_compute_prime256v1_ex()
{
    unsigned char seed_a[20] = {...};
    printf("s = %s\n", big_number_as_decimal_from_hex_array_ex(seed_a, 20));
    unsigned char p_a[32] = {...};
    printf("p = %s\n", big_number_as_decimal_from_hex_array_ex(p_a, 32));
        // or
    unsigned char seed_a[20] = {...};
    printf("s = %s\n", big_number_as_decimal_from_hex_array_ex_2(seed_a, 20));
    unsigned char p_a[32] = {...};
    printf("p = %s\n", big_number_as_decimal_from_hex_array_ex_2(p_a, 32));
} 
```

但代码在循环计算中产生相同的错误结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:52:14.380

BN_hex2bn(&big_number, (char *)hex_s); 期望 C 字符串作为第二个参数，即 '\0' 终止的一个，因为它没有其他方法可以知道字符串的大小。

# image - IE9上的GWT图像拖放不起作用

> ID：15343763
> 
> 赞同：0
> 
> 时间：2013-03-11T16:35:12.773
> 
> 标签：image, internet-explorer, gwt, drag-and-drop

我正在使用 GWT 2.5，我想在一个面板中制作一些图像，并在另一个面板中进行拖放。这在 Firefox 上运行良好，但在 IE9 上它只是不想工作。

我几乎整天都在搜索，但没有找到任何解决方案。我发现的最好的线程是这些：

[GWT 2.4 中的拖放](https://stackoverflow.com/questions/7381138/drag-and-drop-in-gwt-2-4)

[GWT 本机拖放 - DragStartEvent 未在 IE9 上触发](https://stackoverflow.com/questions/8954860/gwt-native-drag-drop-dragstartevent-not-firing-on-ie9)

不同之处在于我正在拖动图像，而不是标签。所以这可能是问题所在。

所以代码看起来像这样：

```
// Draggable Image
final Image img = new Image(imageName);
img.addDragStartHandler(new DragStartHandler() {
  @Override
  public void onDragStart(final DragStartEvent event) { 
    event.setData("text", img.getUrl());
  }
});
img.getElement().setDraggable(Element.DRAGGABLE_TRUE); 
```

然后我把它放在我的“源”面板中：

```
// Image in the source container
wunschContainer = new AbsolutePanel();
img.setPixelSize(size, size);
wunschContainer.add(img, left, top); 
```

图片正确显示（Firefox 和 IE9）

目标面板看起来像这样（它是 AbsolutePanel 的子类并实现 HasDragOverHandlers 和 HasDropHandlers）

```
// Event-handlers for the target container.
this.addDragOverHandler(new DragOverHandler() {
  @Override
  public void onDragOver(final DragOverEvent event) {
  }
});

this.addDropHandler(new DropHandler() {
  @Override
  public void onDrop(final DropEvent event) {
    event.preventDefault();
    final String data = event.getData("text");
    /* ... some more handling ..., creates an image to be displayed here */
    add(image, left, top);
  }
}); 
```

在 Firefox 中，当我拖动图像时，拖动的图像会显示在鼠标指针下方。在 IE9 上，我根本看不到图像，只有一个符号（带有斜线的圆圈，这个“不允许”符号）。当我松开鼠标按钮时，什么也没有发生。我还用“F12”检查了我使用的是 IE9 模式，没有兼容模式。

我真的不知道问题是什么。代码似乎没问题（适用于 FF）。使用 GWT-Images 制作 DnD 是否有问题？有趣的是，“onDragStart()”方法被触发了。但“拖累”并没有完成。

哦，我正在使用 GWT devmode 来测试这个。这会是个问题吗？

我想只使用 GWT 来解决这个问题。或者我应该去使用另一个库，比如 gwt-dnd？有没有人**明白**的 GWT DnD ？我不敢相信我是第一个尝试这样做的人:-(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:11:28.863

所以，我真的尝试了很多东西，我找到了一个解决方案。

问题似乎出在“onDragOver()”方法中。正如我在原始问题中发布的那样，我对该方法有一个空实现：

```
this.addDragOverHandler(new DragOverHandler() {
  @Override
  public void onDragOver(final DragOverEvent event) {
  }
}); 
```

因为这就是我在许多页面中找到的方式。该方法必须存在，否则 Drag n Drop 将不起作用。但似乎对于 IE，我什至需要阻止默认行为（或做其他事情。只是记录该方法不是“某事”）。所以我添加了一个“event.preventDefault();” 到该方法，现在它可以工作了。

```
this.addDragOverHandler(new DragOverHandler() {
  @Override
  public void onDragOver(final DragOverEvent event) {
    event.preventDefault();
  }
}); 
```

只是奇怪，我无法在任何地方找到此信息。这希望对其他人有用 8-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-06T12:01:50.660

我在使用 GWT 2.6 的 IE9 上遇到了同样的问题，我发现在 onDragStart 中设置数据会使 IE9 关闭。所有其他浏览器都可以正常工作。所以我最终做了以下事情：

```
 this.addDragStartHandler(new DragStartHandler(){

        @Override
        public void onDragStart(DragStartEvent event) {
            if(!isIE9()){
                event.setData(RangeSliderControl.KEY, key); // This causes IE9 to not work                  
            }
        }}
    ); 
```

当然，我已将 isIE9() 方法添加到我的代码中，如下所示：

```
 /**
* Gets the name of the used browser.
*/
public static boolean isIE9() {
    return (getBrowserName().indexOf("msie 9.0") != -1);
};

/**
* Gets the name of the used browser.
*/
public static native String getBrowserName() /*-{
    return navigator.userAgent.toLowerCase();
}-*/; 
```

# c# - 正则表达式在c#中查找不完整的xml标签

> ID：15343765
> 
> 赞同：1
> 
> 时间：2013-03-11T16:35:21.133
> 
> 标签：c#, xml, regex

我正在尝试使用正则表达式来查找不完整的没有属性的 xml 标记。到目前为止，我已经设法想出了这个正则表达式`</?\s*([a-zA-Z0-9]?:\s+)?[a-zA-Z0-9]*(?!>)`，但这并不能解决问题。在这样的 xml 中： `<abc> </abc> <ab> </ab <s:ab`

我想匹配`</ab`和`<s:ab`（因为它们最后都缺少“>”）。有没有办法在 c# 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:02:24.433

你很接近。您的主要问题是，当负前瞻失败时，模式会回溯。您可以通过将前瞻之前的部分放在非回溯原子组中来避免这种情况：`(?>no backtracking in here)`.

例如：

```
(?xi)                   # turn on eXtended (ignore spaces/comments) and case-Insensitive mode
(?>                     # don't backtrack
  < /?                  # tag start (no space allowed after it)
  [a-z0-9]+             # tag name/space
  (?: : [a-z0-9]+ )?
  \s*                   # optional spaces
)
(?! > )                 # no ending 
```

请注意，这将`<foo`在`<foo bar>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:05:27.617

正如人们所说，这可能是徒劳的——因为 XML 不是一种常规语言。但是，您的部分问题是您的前瞻性。你只需要确保它后面没有紧跟一个右尖括号——这意味着即使你不想要它们，类似`<ab`of 的东西也会匹配。`<abc>`所以你需要在你的前瞻中包含整个标签结构。

为了匹配您提供的确切数据，我可以使用正则表达式：

```
#</?([a-z]?:)?[a-z]*(?!/?([a-z]?:)?[a-z]*>)# 
```

您可以在[此处](http://regexr.com?3436a)查看实际操作。这里的关键是确保正则表达式引擎在任何时候都不能回溯（例如，删除一个字符）以验证前瞻。还有其他方法可以做到这一点 - 例如[所有格量词](http://regexr.com?3436g)，它拒绝在正常回溯过程中放弃其匹配的标记，但标准 .NET 引擎不支持所有格匹配。它确实支持原子组 - 其行为方式相同，但使用组而不是量词。您可以[在这里](http://regexr.com?3436m)看到，我已将标签的整个开口包裹在一个原子组中。( `(?> ... )`)

```
#(?></?([a-z]?:)?[a-z]*)(?!>)# 
```

您可以自由输入自己的正则表达式来确定标签的格式，但我必须说这个正则表达式已经在推动代码可读性的极限，而使用合法的 xml 标签名称将进一步推动它在那个方向。尽管如此，我希望这有助于阐明这个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:42:58.220

如果您只是想在单个 xml 文件中查找错误，请尝试在 Google Chrome 网络浏览器中打开它 - 它会显示错误所在的行。

但是，如果您有很多文件必须在代码中处理，那么您需要比正则表达式更强大的东西。

# android - android中的搜索功能，用于在mysql中获取数据

> ID：15343767
> 
> 赞同：1
> 
> 时间：2013-03-11T16:35:32.193
> 
> 标签：android

我想添加一个搜索功能。我已经看过教程。我尝试添加代码但仍然有错误。也许，我不明白适配器。公共类 orderActivity 扩展 ListActivity{

```
// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> ordersList;

EditText inputsearch;
 // List view
 private ListView bb;
// Listview Adapter
 ArrayAdapter<String> adapter;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_order);  

 // getting product details from intent
    Intent i = getIntent();

 // getting product id (pid) from intent
    username = i.getStringExtra(KEY_NAME);

 // Hashmap for ListView

    ordersList = new ArrayList<HashMap<String, String>>();

    // Loading orders in Background Thread
    new LoadAllOrders().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String oid = ((TextView) view.findViewById(R.id.name)).getText()
                    .toString();
                // Starting new intent
                Intent in = new Intent(getApplicationContext(),
                        orderdetailActivity.class);
                // sending pid to next activity
                in.putExtra(KEY_ID, oid);

                // starting new activity and expecting some response back
                startActivityForResult(in, 100);
            }
    });

    //the search function part!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

    bb = (ListView) findViewById(android.R.id.list);
     inputsearch = (EditText) findViewById(R.id.inputsearch);
     bb.setAdapter(adapter);

    /**
     * Enabling Search Filter
     * */
    inputsearch.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            orderActivity.this.adapter.getFilter().filter(cs);
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    });

}

    /**
     * getting All orders from url
     * */
    protected String doInBackground(String... args) {
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {

        try {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("username", username));
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_orders, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Orders: ", json.toString());

            // Checking for SUCCESS TAG
            int success = json.getInt(KEY_SUCCESS);

            if (success == 1) {
                // orders found
                // Getting Array of orders
                orders = json.getJSONArray(KEY_ORDERS);

                // looping through All Orders
                for (int i = 0; i < orders.length(); i++) {
                    JSONObject c = orders.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String name = c.getString(KEY_USERNAME);

                    // creating new HashMap
                    HashMap<String, String> map = new    HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(KEY_ID, id);
                    map.put(KEY_USERNAME, name);

                    // adding HashList to ArrayList
                    ordersList.add(map);
                }
            } else {
                // no orders found
                // Launch Add New product Activity
                Intent i = new Intent(getApplicationContext(),
                        orderActivity.class);       //  no ensure to need change
                // Closing all previous activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

            }
        });

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all orders
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        orderActivity.this, ordersList,
                        R.layout.all_list, new String[] { KEY_USERNAME,
                                KEY_ID},
                        new int[] { R.id.oid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

} 
```

}

有布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<!-- Product id (pid) - will be HIDDEN - used to pass to other activity -->
<TextView
    android:id="@+id/oid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:visibility="gone" />

<!-- Name Label -->
<TextView
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="6dip"
    android:paddingLeft="6dip"
    android:textSize="17dip"
    android:textStyle="bold" />

</LinearLayout> 
```

还有其他布局

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="10dip"
        android:text="Please enter the order number:"
        android:textSize="20dp" />
 <EditText
        android:id="@+id/inputsearch"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:hint="Search orders.."
        android:inputType="textVisiblePassword"
        android:ems="10" />
<!--  Always give id value as list(@android:id/list)   -->
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

那是我的日志

```
03-12 09:52:00.252: W/dalvikvm(295): threadid=1: thread exiting with uncaught exception    (group=0x4001d800)
03-12 09:52:00.261: E/AndroidRuntime(295): FATAL EXCEPTION: main
03-12 09:52:00.261: E/AndroidRuntime(295): java.lang.NullPointerException
03-12 09:52:00.261: E/AndroidRuntime(295):  at   com.example.androidhive.orderActivity$2.onTextChanged(orderActivity.java:125)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.widget.TextView.handleTextChanged(TextView.java:6172)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:6316)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:889)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:352)
03-12 09:52:00.261: E/AndroidRuntime(295):  at   android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:269)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:432)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:583)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.view.inputmethod.BaseInputConnection.commitText(BaseInputConnection.java:174)
03-12 09:52:00.261: E/AndroidRuntime(295):  at com.android.internal.widget.EditableInputConnection.commitText(EditableInputConnection.java:120)
03-12 09:52:00.261: E/AndroidRuntime(295):  at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:247)
03-12 09:52:00.261: E/AndroidRuntime(295):  at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:73)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.os.Looper.loop(Looper.java:123)
03-12 09:52:00.261: E/AndroidRuntime(295):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-12 09:52:00.261: E/AndroidRuntime(295):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 09:52:00.261: E/AndroidRuntime(295):  at java.lang.reflect.Method.invoke(Method.java:521)
03-12 09:52:00.261: E/AndroidRuntime(295):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-12 09:52:00.261: E/AndroidRuntime(295):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-12 09:52:00.261: E/AndroidRuntime(295):  at dalvik.system.NativeStart.main(Native   Method)
03-12 09:52:02.294: I/Process(295): Sending signal. PID: 295 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T10:09:25.733

请下载整个项目并运行它。一旦它起作用，试着把它拆开来学习点点滴滴。而且，这绝不是使用搜索功能从 mysql 获取数据。

如果你想使用 mysql 实现搜索，你需要有你的表和它的数据。在您的光标适配器上有一个过滤方法。然后在 onTextChanged() 监听器上，您必须根据用户输入的内容查询您的数据库。

```
eg. select * from table where name like "s%"; // if the user has inputted s. 
```

# wix - 修改asp文件

> ID：15343770
> 
> 赞同：0
> 
> 时间：2013-03-11T16:35:38.047
> 
> 标签：wix, windows-installer, wix3.5

我正在使用 WIX 工具集 3.5 创建用于安装网站的 msi 包。我的网站是基于 asp 的，我在 config.asp 文件中有配置。安装时，我有对话框窗口供用户插入服务器名称、数据库名称、用户名和密码。然后我必须将这些值插入（替换）到 config.asp 文件中。我有几行，例如： ConnectionString = "Provider=SQLOLEDB.1; Password=xxx; User ID=user;Initial Catalog=....

最好的方法是什么？我必须以某种方式解析文件。有什么例子吗？我所发现的只是如何在 .NET 中替换配置文件，它是基于 xml 的并且有不同的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:26:59.900

如果 config.asp 文件不是可以使用 XPATH 处理的真正 XML，则您必须编写自定义操作来进行更新。FWIW，InstallShield 具有类似于 Xml 功能的“文本替换”功能，但在常规文本上使用搜索和替换。

# ruby-on-rails - ruby - 捆绑安装/更新太慢

> ID：15343771
> 
> 赞同：41
> 
> 时间：2013-03-11T16:35:41.137
> 
> 标签：ruby-on-rails, ruby, rubygems, bundler

我刚刚在虚拟机中运行的虚拟 ubuntu 12.04 32bit 上安装了 RVM、Ruby、Rails 等。现在我遇到了我的第一个rails项目`bundle install`或者`bundle update`需要很长时间的问题。即使我用 rails 创建了一个新项目（其中包括`bundle install`）创建了一个新项目。

我只使用标准宝石：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development do
  gem 'sqlite3', '1.3.5'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

 gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2' 
```

我尝试了没有任何宝石的捆绑安装，但是`gem 'rails', '3.2.12'`. 之后，我再次输入了`bundle install`我的 gemfile 中的所有 gem。我花了 10 分钟来检查依赖项。--verbose 的输出是`HTTP success`和`HTTP redirection`的混合。

Rails 版本：Rails 3.2.12

Ruby 版本：ruby 1.9.3p392（2013-02-22 修订版 39386）

rvm：rvm 1.18.18

捆绑版本：捆绑器版本 1.3.2

我已经搜索了一个解决方案，但没有任何帮助。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-16T08:00:45.890

**我想警告：在 http 上使用 https 是出于安全目的。首先尝试此线程中提到的其他答案。**

在我的**Gemfile**中更改`https`为起到了神奇的作用。在我必须创建项目之前`http`**`rails new APP --skip-bundle`**

 *** * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-01T22:56:53.710

Bundler 刚刚[更新](https://github.com/bundler/bundler/pull/2481)了 gem 的并行处理。

```
gem install bundler --pre 
```

将目前以最好的方式解决问题。

[资源](http://www.codebeerstartups.com/2013/09/parallel-gem-installing-using-bundler/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-15T08:15:34.140

Bundler v1.12.x 于 2016 年发布，导致一些用户遇到[捆绑安装缓慢的问题](https://github.com/bundler/bundler/issues/4478#issuecomment-219263764)。

> 在这种情况下，使用 v1.11.2 是最好的选择（它很快），直到发布修复程序。

值得前往[Rubygems.org](https://rubygems.org/gems/bundler/versions)尝试不同版本的 bundler gem。

检查现有捆绑器版本，卸载现有版本，安装 1.11.2 版本示例：

```
gem list | grep bundler

gem uninstall bundler -v existing-version-number

gem install bundler -v 1.11.2 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-31T01:36:11.097

您也可以使用多个工作，它可能会改善一点

```
 bundle install --jobs 8 
```

这是一个关于它的[教程](https://robots.thoughtbot.com/parallel-gem-installing-using-bundler)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-26T15:17:16.320

如果您仍然在 Bundler 1.12.5 中看到此问题，您可能需要[尝试更新 Ruby 使用的 OpenSSL](https://github.com/bundler/bundler/issues/4478#issuecomment-222156572)。

对我来说是这样的：

```
pmorse$ bundle --version
Bundler version 1.12.5
pmorse$ ruby -ropenssl -e 'puts OpenSSL::OPENSSL_VERSION'
OpenSSL 1.0.1j 15 Oct 2014
pmorse$ openssl version
OpenSSL 0.9.8zg 14 July 2015
pmorse$ brew info openssl
openssl: stable 1.0.2h (bottled) [keg-only] 
```

[...更多`brew`输出...]

```
pmorse$ rvm reinstall ruby-2.2.2 --with-openssl-dir=`brew --prefix openssl` 
```

[...大量`rvm`输出...]

```
pmorse$ ruby -ropenssl -e 'puts OpenSSL::OPENSSL_VERSION'
OpenSSL 1.0.2h  3 May 2016 
```

这应该会`bundle`再次变得更快，而无需您从`https`到`http`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-22T06:34:16.933

一种开发人员友好的方法是使用更快的替代方法覆盖 gem 服务器。

在我们的例子中，我们可以配置`http`为镜像来解决慢速`https`连接：

```
bundle config mirror.https://rubygems.org http://rubygems.org 
```

这允许您保留原始`Gemfile`配置，同时仍使用更快`http`的连接来获取 gem。

如果您想切换回`https`：

```
bundle config --delete mirror.https://rubygems.org 
```

`bundle config`有一个默认`--global`选项。您可以指定`--local`将配置限制为本地应用程序文件夹。

配置保存在 global`~/.bundle/config`和 local`.bundle/config`中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-02T18:56:45.393

我知道这可能是基本答案，但请尝试从 Ruby 主站点安装开发人员工具。我有一个类似的问题，它确实有效。有时简单的解决方案是最好的！

祝你好运！**

# java - 使用 JMeter 调用 java 方法

> ID：15343773
> 
> 赞同：2
> 
> 时间：2013-03-11T16:35:45.280
> 
> 标签：java, jar, jmeter, beanshell

我的问题是关于 JMeter 和 BeanShell PostProcessor。

我已经用 Eclipse 开发了一个 Java 项目，并将该项目导出到一个 jar 中。我已将此 jar 放在 JMeter 的 /lib/ext 文件夹中。

当我打电话`java -jar C:\Program Files\apache-jmeter-2.9\lib\ext\myJar.jar`一切正常。

现在我想在 JMeter 中调用我的 jar 中的方法。在我的 Beanshell 处理器中，我输入了以下代码：

```
import bsh.LoadProperties;
import bsh.SSOTokenHelper;

LoadProperties loadProperties = new LoadProperties();
loadProperties.init();

result = SSOTokenHelper.getSecurityToken(); 
```

有关信息，这是我在主类中的确切代码。但是在 Jmeter 的日志文件中我有这个消息：

> jmeter.util.BeanShellInterpreter：调用 bsh 方法时出错：eval 源文件：内联评估：``import bsh.LoadProperties; 导入 bsh.SSOTokenHelper；加载属性 loadProper 。. . '' : 方法调用 SSOTokenHelper.getSecurityToken

我不明白为什么当我直接调用我的 jar 时它会起作用，为什么当我用 JMeter 做完全相同的事情时它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:34:11.317

`bsh.SSOTokenHelper`[根据http://www.beanshell.org/javadoc/index.html](http://www.beanshell.org/javadoc/index.html)上的 javadocs，它不是真正的 BeanShell 类。您可能需要更正导入，或者如果您已经创建了`SSOTokenHelper`类，请将其放在不同的包中以避免混淆并确保其类可用于 JMeter。

# matlab - 在 Matlab 中自定义光标

> ID：15343774
> 
> 赞同：1
> 
> 时间：2013-03-11T16:35:46.407
> 
> 标签：matlab, cursor, interactive

在 Matlab 2012a 中，我从以前的代码生成了一个数字，它是 SSI 作为年龄的函数。我想通过更新我自己的函数而不是默认函数来自定义数据提示。我知道如何更改 x 和 y，现在我有了 Age 和 SSI。但是，我有另一条信息 -subjectID- 我想将其添加到显示文本中。通过单击每个点，我希望数据提示显示相应数据点的年龄、SSI 和主题 ID。这就是我现在所拥有的：matlab 是我 SSI 时代的一个保存的工作场所。

```
function output_txt = myupdatefcn(obj,event_obj,...
                  matlab,labels,SubjectID)
pos = get(event_obj,'Position');
x = pos(1); 
y = pos(2);
[~, ~, raw0_0] = xlsread('Data.xlsx','CONTROLS','A2:A106');
raw = [raw0_0];
SubjectID = cell2mat(raw);
output_txt = {['AGE: ',num2str(pos(1),4)],...
    ['SSI: ',num2str(pos(2),4)],...
    ['SubjectID: ',SubjectID]};
idx = find(matlab == x,1);  
[row,col] = ind2sub(size(matlab),idx);
output_txt{end+1} = cell2mat(labels(row)); 
```

显然，这是不对的。有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:44:31.010

如果我正确阅读了您的代码，我会做出以下假设（可能不正确）： * subjectID 是包含字符串向量的单元格 * subjectID 是`X`单击点的位置

### 首先，快速题外话：让 SubjectID 进入你的情节

我注意到，在您的函数调用中，您将 SubjectID 作为输入参数之一。但是，它似乎永远不会被使用，因为使用它的下一行为它分配了一个值。如所写，每次调用更新函数时，都会从 excel 文件中读取。您可能希望将 load-from-excel 部分移动到首次加载数据的同一段代码中。如果我假设 SubjectID 是文本，您可以将其存储在时间序列的 UserData 变量中。这将使以下工作：

### 继续回答

因此，如果您在用户数据中包含您的 SubjectID 信息，那么当您第一次绘制时，如下所示：

```
% ...not shown: get the ages, SSIs and SubjectIDs ....

plot(ages, SSIs, 'UserData', SubjectIDs);   % Store SubjectIDs along with the line... 
```

那么以下应该可以工作 - 或者至少让你站在坚实的基础上。

```
function output_txt = myupdatefcn(obj,event_obj)   
  pos = get(event_obj,'Position');
  x = pos(1); 
  y = pos(2);
  allIDs = get(event_obj.Target,'UserData');
  thisSubject = event_obj.UserData{pos(1)};

  output_txt = {['AGE: ',num2str(pos(1),4)],...
    ['SSI: ',num2str(pos(2),4)],...
    ['SubjectID: ',thisSubject]}; 
```

您可能可以摆脱最后 3 行代码，因为您先验地知道所有 3 个值都是可访问的。

希望有帮助。

# javascript - Backbone 中的集合和子集合（及其相关视图）

> ID：15343778
> 
> 赞同：1
> 
> 时间：2013-03-11T16:35:59.820
> 
> 标签：javascript, backbone.js, backbone-views, backbone.js-collections

我正在使用 Backbone 创建我的第一个应用程序。基本上，我有一个两级深的无序列表。

```
<ul class="cabinet">
  <li class="drawer"> 
    <a>Drawer 1</a>
    <ul class="boxes">
      <li> Box 1 </li>
      <li> Box 2 </li>
    </ul>
  </li>
  <li class="drawer"> 
    <a>Drawer 2</a>
    <ul class="boxes">
      <li> Box 3 </li>
      <li> Box 4 </li>
    </ul>
 </li>
</ul> 
```

在 Backbone 中，我创建了两个集合（“抽屉”和“盒子”）及其关联的视图。我的问题是我不知道应该如何处理二级列表项。

此时，我有一个用于盒子的 Backbone 集合，每次我向集合中添加新的 Box 时，它都会在每个抽屉下呈现。我应该以某种方式根据父抽屉分隔一组盒子，但我不知道如何以“主干方式”做到这一点。

换句话说，假设我需要将 Box 3 和 Box 4 元素添加到 Drawer 2。如何在“Drawer 2”下渲染这两个“box”。我应该为每个抽屉的盒子组单独收集吗？如果是这样，我如何在 Backbone 中动态创建具有此目的的集合？还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:05:10.547

首先，从您的描述来看，Drawer 应该是一个模型，而不是一个集合。您可以有一个名为 Drawers 的集合，其中包含 Drawer 的实例。

其次，有两种主要方法可以做到这一点。您选择哪种方法实际上取决于您的判断，哪种方法更准确地代表了盒子和抽屉之间的关系，哪种方法可以让您有效地处理数据。

1.  If groups of boxes are primarily related to their parent drawer, then, when you initialize each drawer and give it a Boxes collection:

    ```
    var drawer_set = [];

    var args = {
      label: 'Drawer 1',
      boxes: new Boxes()
    };

    drawer_set.push(new Drawer(args));

    var drawers = new Drawers(drawer_set);
    ```

2.  If you want to be able to quickly run processes on all of your boxes, you would want two collections: one of boxes and one of drawers, where each box has an attribute saying which drawer it's in.

    ```
    var args = { drawer: 1 };
    var box = new Box(args);
    var boxes = new Boxes(boxes);
    ```

Then, you can select your drawers by box via:

```
var boxes_in_drawer_1 = boxes.where({drawer: 1}); 
```

# ruby-on-rails - 在 Rails 中优雅处理无效 UTF-8 的测试

> ID：15343781
> 
> 赞同：3
> 
> 时间：2013-03-11T16:36:18.820
> 
> 标签：ruby-on-rails, ruby, validation, utf-8, middleware

我目前正在尝试确保我的 rails 应用程序可以优雅地处理带有无效 UTF-8 数据的 POST 方法（例如 \xFF）（使用机架中间件）

不幸的是，为此编写测试非常困难。

我尝试过的一件事是使用 Capybara 用无效的 UTF-8 填写我的一个表单字段并提交，但这会在我的测试输出中导致终端中的以下输出 - 而且它不是由 Rails 打印的！

> 错误：字符串不在 utf-8 中

是否可以模拟包含无效 UTF-8 数据的 POST 以验证是否显示 400 错误（或类似错误）？

注意：我试图避免必须针对应用程序的单独运行实例运行（例如，对它使用'curl'），而只是直接使用 Capybara（或类似的）运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:12:06.663

用无效的 UTF-8 填写表格是什么意思？您填写表格的字符没有任何编码，它们在发送表格时被编码。这句话对于一些不能编码所有字符但 UTF-8*可以*的编码是有意义的。

如果您想`\xFF`从浏览器将字节发送到服务器，只需拉出该浏览器的开发人员工具，编辑表单的属性以在表单上的某处`accept-charset="ISO-8859-1"`写入`ÿ`并按发送即可。将`ÿ`被编码为`%FF`无法解码为 UTF-8 的 a：

![http://i.imgur.com/0KCpa9p.png](../Images/44d1d3551261236a8fd4282c7beb9398.png)

![在此处输入图像描述](../Images/d7467acb7102fc566f59b4e4f8d013ff.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:43:25.173

您可以尝试发布包含无效 utf-8 数据的文件附件，但这也取决于您的表单本身。但是，当您正在测试一个相当模糊的边缘情况时，您总是可以创建一个只能在开发/测试环境中访问的表单，并且该路由也只能用于测试。

这至少允许您以安全、仅测试的方式定位处理无效 utf-8 数据的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T09:54:04.600

您应该能够通过使用机架测试而不是使用水豚来构建一个帖子来做到这一点。

例如以下请求规范 ( `spec/requests/utf8_spec.rb`)：

```
require 'spec_helper'

describe "Invalid UTF-8" do
  it "handles invalid UTF-8 in post data gracefully" do
    post "/users", :user => {:name => "Test \xFF boom"}
  end
end 
```

运行时产生以下内容：

```
1) Invalid UTF-8 handles invalid UTF-8 in post data gracefully
   Failure/Error: post "/users", :user => {:name => "Test \xFF boom"}
   ArgumentError:
     invalid byte sequence in UTF-8
   # ./app/controllers/users_controller.rb:17:in `create'
   # ./spec/requests/utf8_spec.rb:5:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T11:38:26.407

正如此ThoughtBot[博客文章](http://robots.thoughtbot.com/post/42664369166/fight-back-utf-8-invalid-byte-sequences)中所述，这在单元测试中对我有用：

```
"hello joel\255".force_encoding('UTF-8') 
```

不知道你如何说服水豚这样做。

# javascript - 令人困惑的全局 JS 变量的未捕获引用错误

> ID：15343782
> 
> 赞同：1
> 
> 时间：2013-03-11T16:36:20.607
> 
> 标签：javascript, ruby-on-rails, backbone.js, coffeescript

在我尝试命名我的代码之前，在 Rails 项目中有 2 个咖啡脚本文件生成这个：

```
(function(){
  window.Investments = {};
}).call(this); 
```

然后我的骨干收藏：

```
(function(){
  Investments.InfrastructureCollection = Backbone.Collection.extend({});
}).call(this); 
```

chrome 中的控制台抛出了一个`Uncaught ReferenceError: Investments is not defined`我在页面加载时设置我的 InfrastructureCollection 的地方，但一切似乎都执行得很好，并且事情应该加载。我什至可以创建集合的新实例并在控制台中添加模型，而无需进行任何设置。控制台中发生了什么抛出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:41:47.487

首先要检查的是看看这是否有效：

```
var Investments = {};
Investments.InfrastructureCollection = Backbone.Collection.extend({}); 
```

没有它周围的所有其他东西。而且，如果这不起作用，那么看看这是否有效：

```
window.Investments = {};
window.Investments.InfrastructureCollection = Backbone.Collection.extend({}); 
```

这些将验证您创建的`.Investments`对象是否到位或是否存在问题。

然后，最后我看不出为什么你会在两个单独的实例中做这一切：

```
(function(){

}).call(this); 
```

立即执行函数通常用于为隐私或局部变量创建临时范围，但您没有这些，因此不需要它。其次，为什么`.call(this)`. 同样，这是额外的代码量，根本没有以任何方式使用。如果你想`this`保持现状，那么首先摆脱立即执行的功能块。

如果您仍然无法弄清楚这一点，那么请尝试在 jsFiddle 中创建一个简单的可重现示例，以便我们可以更准确地看到正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:43:44.900

不确定您在什么上下文中调用这些（即`this`在您的调用中指的是什么），但也许您应该更改为：

```
(function(context){
  context.Investments = {};
}).call(window); 
```

也不确定为什么不能在访问 InfrastructureCollection 之前声明投资

```
Investments = {};
Investments.InfrastructureCollection = Backbone.Collection.extend({}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:54:55.640

只要您按照这样的顺序保持自调用函数的顺序，就可以了。命名空间的声明显然必须在`Collection, Model, etc.`.

```
/**Initialize namespace */
(function(){
    window.Investments = {};
}).call(this);

/** Collection */
(function(){
    Investments.Collection = Backbone.Collection.extend({});
}).call(this);

/** Model */
(function(){
    Investments.Model = Backbone.Model.extend({});
}).call(this); 
```

**或者**只是按原样调用匿名函数并注入`Investments`对象以确保它确实在范围内（您必须额外检查特定对象是否存在）。

```
/**Initialize namespace */
(function(){
    window.Investments = {};
})();

/** Collection */
(function(inv){
    inv.Collection = Backbone.Collection.extend({});
})(window.Investments || {});

/** Model */
(function(inv){
    inv.Model = Backbone.Model.extend({});
})(window.Investments || {}); 
```

如果您担心`order`或您的模块，您可以采取的另一个选择是使用像[Require JS这样的](http://requirejs.org/)[AMD](http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition)框架，这样您就不必担心它，您可以配置依赖项，它就会运行。

# java - php json_encode 用于 android 的欧元符号

> ID：15343786
> 
> 赞同：1
> 
> 时间：2013-03-11T16:36:31.573
> 
> 标签：java, php, android, json, encoding

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:47:18.443

`\u0080` means that the input character was `\x80` which is the Euro sign in **Windows-1252**. So I assume your string is encoded in this charset, then you should convert it to UTF-8 because `json_encode` only works with UTF-8 input:

```
$string = iconv('Windows-1252', 'UTF-8', $string); 
```

# jquery - jQuery getScript() 函数在Passenger 和Apache 部署的rails 生产模式下不起作用

> ID：15343787
> 
> 赞同：4
> 
> 时间：2013-03-11T16:36:35.487
> 
> 标签：jquery, ruby-on-rails, ajax, apache, passenger

因此，我正在尝试使用 jQuery 的 getScript() 函数对我的 rails 应用程序进行一些轮询。这是我的代码：

**脚本文件**

```
function updatePredictionResults() {
    $.getScript("/predictions/pollAllResults.js?task_id=" + task_id + "&omim_id=" + omim_id);
} 
```

该脚本应该在**预测控制器中调用一个动作 (** **pollAllResults** ) ，然后渲染并执行**pollAllResults.js.erb**文件中的代码。***使用rails server***进行测试时，它在开发模式下完美运行。

 *****但是，当我使用 Phusion Passenger 和 Apache 部署我的应用程序时，getScript() 函数似乎不起作用 - 控制器或以下 javascript 文件中的代码均未执行。服务器也没有生成错误日志。有谁知道为什么？非常感谢！

**更新：**

现在我似乎知道问题所在了——这可以在 apache 日志中找到：

```
 "GET /predictions/pollAllResults.js?task_id=1363034126&omim_id=180860&_=1363034264908 HTTP/1.1" 404 227 
```

我不知道为什么会这样……奇怪的是，即使我直接访问这个 url，也可以获取并加载 javascript……，但它一直给我 404……*****

# excel - Power pivot 两个表之间的多对多关系

> ID：15343788
> 
> 赞同：4
> 
> 时间：2013-03-11T16:36:36.577
> 
> 标签：excel, relationship, powerpivot

![在此处输入图像描述](../Images/e8ab79bfa9590ea6bb9371f1c9619be1.png)

正如您从图像中看到的那样，我在这两个表之间存在一对多的关系。但我想让它成为多对多的。我使用 AssetID 作为这些关系的关键。关于我如何创建这个的任何想法？

之所以需要它作为多对多，就像我在 powerview 中使用它并使用列标题作为滑块一样。这方面的一个例子是，如果我要在 tblOperatingSystem 滑块中选择 Windows 7，我用于 tblAssets 的滑块只会显示与 Windows 7 相关的内容，而我希望能够做相反的事情并在 tblAssets silder 中选择并且只会出现与 tblOperatingSystem 滑块相关的操作系统

我已经尝试创建一个只有 AssetID 的新表，然后将 tblAssets 和 tblOperatingSystem 连接到它，但这种方法不适用于滑块。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:07:48.497

如果我正确理解了这个问题，这归结为 PowerPivot（和 SSAS 表格模型）的限制，它无法正确建模多对多关系。这种关系可以在一个方向上强制执行（正如您在操作系统滑块中看到的那样），但在另一个方向上不起作用。

过去我在 PowerPivot/PowerView 中设法解决此问题的一种方法是创建一个额外的非规范化表，其中包含操作系统和资产的所有可能组合，以及一个新的标识列（或和的`OSID`串联`AssetID`）作为钥匙。根据需要配置一对多`tblOperatingSystem`关系`tblAsset`。

对此的关键部分是在此处也包含您的数据列，使用 DAX 函数来填充值。You can then use this new de-normalised table as the source for both of your sliders (and hide the originals from the client), which will automatically filter each other when one is selected.

![非规范化表示例](../Images/249517a31bc96b73961b658fc9ea7c75.png)

现在，它的效率不是很高，因为有很多重复，所以如果其他人可以提出另一种方法来实现这一点，我很想亲自听听！请注意不要将其与非常大的数据模型一起使用，因为它会大大降低速度。

*或者*，我看到了[这篇文章](http://gbrueckl.wordpress.com/2012/05/08/resolving-many-to-many-relationships-leveraging-dax-cross-table-filtering/)（其中包含 Marco Russo 和 Alberto Ferrari 的类似帖子的良好链接），但我还没有尝试过，所以我不确定它与 PowerView 的效果如何，因为这两篇源文章都预先日期 PV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T17:15:37.153

PowerPivot 本身不支持多对多关系建模，但您可以使用 DAX 模拟它。您需要做的就是在计算语句中列出相关的多对多表。例如（来自[http://gbrueckl.wordpress.com/2012/05/08/resolving-many-to-many-relationships-leveraging-dax-cross-table-filtering/](http://gbrueckl.wordpress.com/2012/05/08/resolving-many-to-many-relationships-leveraging-dax-cross-table-filtering/)）给出如下布局：

![在此处输入图像描述](../Images/f8f2a98479fa1e6f89630b8c8be9cc0a.png)

然后在 Audience 表上编写一个度量行数但考虑到 Targets 表上的过滤的度量，您将编写：

```
RowCount_M2M:=CALCULATE(
     [RowCount], 
     'Individuals', 
     'TargetsForIndividuals', 
     'Targets') 
```

通过列出其他表，它们的过滤器上下文将重叠，您将获得您正在寻找的加入。

# c++ - 可以使用 OpenCV 函数 cvtColor 就地转换矩阵吗？

> ID：15343791
> 
> 赞同：13
> 
> 时间：2013-03-11T16:36:44.977
> 
> 标签：c++, opencv

OpenCV 函数[cvtColor](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)转换矩阵的颜色空间（例如从 RGB 到灰度）。该函数的 C++ 签名是

```
void cvtColor(InputArray src, OutputArray dst, int code, int dstCn=0 ) 
```

可以使用此函数将矩阵转换到位，即与`src`相同的对象`dst`吗？

```
cv::Mat mat = getColorImage();
cvtColor(mat, mat, CV_RGB2GRAY); 
```

（我知道无论哪种方式，由于目标的通道数与源的通道数不同，它仍然需要为目标分配一个新的内存块。）

更一般地说，OpenCV API 中是否有一个约定来确定何时可以以这种方式使用函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-03T09:45:26.150

可能回答太晚了，但是我想说我不同意这里已经写的一些东西。
即使目标矩阵没有“相同数量的通道”，或者即使目标矩阵尚未创建，您也可以将相同的 Mat 放置为源和目标，没有问题。
OpenCV 程序员对其进行了彻底的设计。
此函数的所有用户必须注意源 Mat 的正确性，包括通道数和数据类型，并记住在函数调用之后它们可能会改变。

证明来自查看[源代码](https://github.com/Itseez/opencv/blob/9b7dfd677db5818b8dd699e2059c886a1e7ce24f/modules/imgproc/src/color.cpp#l2404)，第 2406 行，只是`cv::cvtColor(…)`函数内部的第一行，

```
Mat src = _src.getMat(); 
```

被调用，然后创建 Mat dst（并且 dst=_dst=_scr）。
所以`cv::cvtColor(…)`在进行就地调用时，里面的情况如下：src指向旧矩阵，_src、_dst、dst都指向同一个新分配的矩阵，这将是目标矩阵。
这意味着比现在新变量 src 和 dst（不是来自函数调用 _src 和 _dst 的变量）已准备好传递给真正的转换函数。
函数`void cv::cvtColor(…)`完成后，src 被释放，_src、_dst 和 dst 都指向同一个 Mat，_dst 的 refcount 将变为 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T18:12:25.200

If you have a look at the code [here](https://github.com/Itseez/opencv/blob/9b7dfd677db5818b8dd699e2059c886a1e7ce24f/modules/imgproc/src/color.cpp#l2404), you will see that on line 2420, a `create` is called on the matrix `dst`. This means the data section as well as the headers for this matrix is rewritten. So it might not be advisable to call this function with the same matrix in `src` and `dst`.

As for a convention in OpenCV, have a look at the [InputArray and OutputArray](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=inputarray#InputArray), these seem to suggest that whenever function calls exist with these as data types of input and output, you should probably use different `Mat` variables.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T20:58:01.427

`dst`它必须在调用后包含正确转换的矩阵的意义上就地工作`cv::cvtColor`。但是如果输入的通道数与输出的通道数不同，那么矩阵的数据将被重新分配。

如果您有一个`dst`在就地调用后没有正确转换图像的示例，请在[http://code.opencv.org](http://code.opencv.org)`cvtColor`上将其作为错误提交

> 更一般地说，OpenCV API 中是否有一个约定来确定何时可以以这种方式使用函数？

没有这样的约定。但是您可以期望大多数基本图像处理功能都可以就地工作。因此，已知所有转换、过滤器、阈值、仿射/透视转换都支持就地调用。

# android - 如何在android中显示2个警报对话框

> ID：15343792
> 
> 赞同：1
> 
> 时间：2013-03-11T16:36:45.267
> 
> 标签：android, android-alertdialog

我正在尝试根据条件显示两个警报框，但我没有得到解决方案，这是我的代码：

```
AlertDialog.Builder B = new AlertDialog.Builder(this);
final AlertDialog dialogue = B.create();
B.setTitle("Welcome !");
B.setMessage("Please enter a number :");
// Set an EditText view to get user input
final EditText input = new EditText(this);
input.setRawInputType(InputType.TYPE_CLASS_NUMBER);
B.setView(input);
B.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

  public void onClick(DialogInterface dialog, int whichButton) {
    if(input.getText().toString().trim().length()==0)
    {
      dialogue.dismiss();

      final AlertDialog.Builder Be = new AlertDialog.Builder(this);
      Be.setTitle("Error !");
      Be.setMessage("Please enter a valid number !");
      Be.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
      @Override
      public void onClick(DialogInterface dialog, int which) {
          inal AlertDialog dialogue2 = Be.create();
          dialogue2.dismiss();
          dialogue.show();}
      });
    }
    else
       {//Do some stuff}
    });
B.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:53:19.577

**this**在您的第二个 Dialog 的构造函数中引用前一个 Dialog 上下文，更改它并使用活动之一。

PS：我会改变它并寻找一种不同的方法，对话框中的对话框有点混乱。查看 EditTexts 的 .setError [http://developer.android.com/reference/android/widget/TextView.html#setError](http://developer.android.com/reference/android/widget/TextView.html#setError)

# jquery - jQuery - 使用 .mouseout 或更合适的方法关闭下拉菜单，提示？

> ID：15343793
> 
> 赞同：1
> 
> 时间：2013-03-11T16:36:45.287
> 
> 标签：jquery, drop-down-menu, filter, mouseout

我有以下代码：

```
$(".option_box .option_name").click(function () {
    $(this).siblings(".collapsible").toggle();
    $(this).toggleClass("hided");
});

$(".option_box .attribute_group_name").click(function () {
    $(this).siblings(".attribute_box").toggle();
    $(this).toggleClass("hided");
}); 
```

与之关联的 HTML 代码是：

```
<div class="option_box" style="left:140px;">
    <div class="option_name">Gama</div>
    <table class="collapsible">
        <tr>
            <td><input id="gama_1" class="gama_value filtered" type="checkbox" name="gama[]" value="1" /></td>
            <td><label for="gama_1">Correcta</label></td>
        </tr>
        <tr>
            <td><input id="gama_2" class="gama_value filtered" type="checkbox" name="gama[]" value="2" /></td>
            <td><label for="gama_2">Aficionado</label></td>
        </tr>
        <tr>
            <td><input id="gama_3" class="gama_value filtered" type="checkbox" name="gama[]" value="3" /></td>
            <td><label for="gama_3">Entusiasta</label></td>
        </tr>
        <tr>
            <td><input id="gama_4" class="gama_value filtered" type="checkbox" name="gama[]" value="4" /></td>
            <td><label for="gama_4">Purista</label></td>
        </tr>
        <tr>
            <td><input id="gama_5" class="gama_value filtered" type="checkbox" name="gama[]" value="5" /></td>
            <td><label for="gama_5">Exclusive</label></td>
        </tr>
    </table>
</div> 
```

其中，视觉上产生了这个：

![下拉式过滤器的视图](../Images/acf2f07a527b74db111acb6adf7141f1.png)

我的问题是，当我将鼠标移出下拉菜单时，我希望下拉菜单（实际上是一个带有表格的**div**元素）关闭，但正如您所见，这并不容易，因为它不是像我一开始那样声明一个 .mouseout 事件的问题。

下拉菜单由两部分组成，“标题”和“正文”，我希望整个下拉列表在我放弃其中之一时自行关闭，但到目前为止还没有运气。我在 jQuery 方面缺乏一些真正的知识（这里和那里只是一点点接触，但目前还没有什么出色的），所以我很困惑。我尝试了.mouseout、.mouseleave、.focusout 和其他方法。

我什至求助于 jQuery++ 来使用**.within**方法，但我同样迷失了方向。你们中的任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:41:55.437

据我了解：您想用鼠标悬停折叠表格。你为什么不添加这样的东西：

```
$(".collapsible").mouseleave(function() {
    $(".collapsible").hide();
}) 
```

它不适合你吗？

# javascript - 为什么我的 div 填充了我的整个页面？

> ID：15343794
> 
> 赞同：0
> 
> 时间：2013-03-11T16:36:46.027
> 
> 标签：javascript, jquery, browser-history

我正在尝试使用 ajax 从另一个页面加载 div，但使用 History API 维护 URL 完整性。ajax 和历史部分正在工作（即 div 正在加载并且 url 正在更改），但由于某种原因，我的 div 包含我的整个页面，而不仅仅是 div 中的内容！

原始页面和正在加载的页面 div 都是这种情况。

剥离 HTML

```
<!DOCTYPE html>
<html>
  <body>
    <div id="slider">
        ... all the page content
        <a rel='tab' href="p/password.jsf">Forgot password?</a>
    </div>
  </body>
</html> 
```

JS

```
<script>
    $(function(){
        $("a[rel='tab']").click(function(e){

            //get the link location that was clicked
            pageurl = $(this).attr('href');

            //to get the ajax content and display in div with id 'content'
            $.ajax({
                url:pageurl + '?rel=tab',
                success: function(data){
                    $('#slider').html(data);
                }});

            //to change the browser URL to 'pageurl'
            if(pageurl!=window.location){
                window.history.pushState({path:pageurl},'',pageurl);    
            }
            return false;  
        });
    });

    /* the below code is to override back button to get the ajax content without reload*/
    $(window).bind('popstate', function() {
        $.ajax({
            url:location.pathname+'?rel=tab',
            success: function(data){
                $('#slider').html(data);
            }});
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:45:22.677

如果你想用 ajax 获取页面的一部分，那么你可以使用元素的`load`方法`id`来获取内容。

```
$('#slider').load(pageurl + '?rel=tab #container_with_content_to_fetch', function() {
  alert('callback after success.');
}); 
```

更多信息`load()`：[信息](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:40:40.473

您可能需要停止默认的单击操作。看起来好像您的链接充当...链接。

```
$("a[rel='tab']").click(function(e){
    e.preventDefault();
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:41:18.303

如果您想选择使用 ajax 响应接收的页面的特定部分，请执行以下操作

```
 /* the below code is to override back button to get the ajax content without reload*/
    $(window).bind('popstate', function() {
        $.ajax({
            url:location.pathname+'?rel=tab',
            success: function(data){
               var mydiv = $('#my_div_id' , data ) // this will get the div with an id of #my_div_id
                $('#slider').html(mydiv );
            }});
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:50:42.980

`$.ajax`加载整个页面。您可以使用`.load()`

代替

`$.ajax({ url:pageurl + '?rel=tab', success: function(data){ $('#slider').html(data); }});`

您可以使用

`$('#slider').load(pageurl + ' [rel=tab]');`

文档在[这里](http://api.jquery.com/load/)。

# iphone - 如何在没有 .mobileprovision 的情况下分发临时 OTA 应用程序？

> ID：15343798
> 
> 赞同：1
> 
> 时间：2013-03-11T16:36:54.630
> 
> 标签：iphone, ios, ipad, adhoc, ota

我遵循了一组来自多个来源的说明，关于如何在不需要 iTunes 的情况下临时部署应用程序；但是，我遇到了差异。我获得了必要的分发证书，制作了一个临时配置文件，使用该配置文件构建和存档，共享应用程序，填写必要的字段，将 .ipa 和 .plist 文件上传到我的服务器，并进行了测试。我无法安装该应用程序，因为设备上没有配置文件。我上传了配置文件，尝试从设备下载它，它工作。现在我可以在不连接电脑的情况下下载和安装应用程序。

但是，在其他设备上进行测试时，该应用程序拒绝运行。我发现这是因为移动配置文件拒绝安装，那是因为设备上没有打开开发者模式。然后我发现为了打开开发者模式，我必须连接到电脑。

有没有办法解决这个问题，或者在不连接到计算机的情况下打开开发者模式，或者不需要安装配置文件安装，或者在没有打开开发者模式的情况下以某种方式在设备上安装配置文件？

我没有在此页面上看到开发人员模式或配置文件的提及：http: [//developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)

我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:53:11.197

使用包含您想要支持的所有设备 UDID 的配置文件归档您的应用程序。这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T17:12:36.327

[TestFlightApp.com](http://testflightapp.com)

您可以分发临时（仅限于 100 台设备）或企业（在公司范围内部署自定义应用程序 > 100 台设备）。此外，Apple 刚刚收购了他们，因此他们的服务会变得更好，或者他们会将其与 Xcode 6 集成。

在工作中使用 TestFlight，真是太棒了！跟踪谁下载了您的构建、收集反馈、导入 TestFlight SDK，它甚至会报告崩溃。

# jquery - Woocommerce Jquery 不工作

> ID：15343799
> 
> 赞同：2
> 
> 时间：2013-03-11T16:36:56.360
> 
> 标签：jquery, woocommerce

我有一个使用 woocommerce 插件开发的自定义 wordpress 主题。

它是使用 twitter bootstrap 构建的，carousel 和其他 jquery 依赖的东西工作得很好。但是，它看起来与特定于 woocommerce 插件的 jquery 有任何关系，例如选项卡不起作用。

我上传了这个网站，这样你就可以看到这些标签是如何在这里不起作用的：http: [//www.caimanmedia.com/rjipublishing/shop/on-the-raft/](http://www.caimanmedia.com/rjipublishing/shop/on-the-raft/)

我在我的functions.php文件中调用jQuery，如下所示：

```
wp_deregister_script('jquery'); // initiate the function  
wp_register_script('jquery', get_template_directory_uri().'/library/js/libs/jquery.1.9.1.min.js', false, '1.9.1'); 
```

我想知道这两者之间是否存在冲突？我不确定为什么 woocommerce jquery 部分不起作用，但 twitter 引导部分是。

当我查看我的源代码时，我在第 56 行看到了这一点：

```
<script type='text/javascript' src='http://www.caimanmedia.com/rjipublishing/wp-content/themes/rjipublishing/library/js/libs/jquery-1.9.1.min.js?ver=1.9.1'></script> 
```

然后在第 79 行我看到了这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

我想知道我是否需要禁用一个？如果是这样，我会禁用哪一个？

非常感谢任何帮助或指导！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:00:31.217

我建议使用与 WordPress 捆绑的 jQuery，并禁用包含其他 jQuery 的行。请参阅[http://www.mojowill.com/developer/using-javascript-with-wordpress-correctly/](http://www.mojowill.com/developer/using-javascript-with-wordpress-correctly/)了解更多详情。

# linux - linux自动更改权限和更改所有权：指定文件夹中的组

> ID：15343800
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:37:00.363
> 
> 标签：linux, permissions, virtualbox, archlinux

**我的情况** 是，我正在使用 Windows 8，并在虚拟框中使用 archlinux（只是一个简单的设置...... LAMP 和 Ruby 用于 sass 和 compass）构建一个本地 Web 开发框。我使用 samba 在 Linux 中共享了我的一个文件夹，以便能够在 Windows 8 中查看和编辑它。我将 Linux 中的文件夹设置为 http:http 和 0777 写入权限，以便我能够在 Windows 中对其进行编辑。

**我的问题：** 每当我在 Windows 中创建新文件（例如...图像、文件夹、文件）时，所有权和组都设置为nobody：nobody。

**我的问题：** 当我在 Windows 中创建一个新文件时，有没有办法将所有者和组自动设置为 http:http 和 0777 写入权限？

我是 Linux 新手，我知道这是一个安全风险，但这只是一个 Web 开发盒。只是为了让我能够玩 ruby​​ 和 rails、sass 或 compass，当然还可以从头开始扩展我对 Linux 的一点了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:56:28.470

编辑 smb.conf

*   出于安全原因，在 Windows 8 上设置一个静态 IP，例如（192.168.1.50），这样任何人都无法访问您的 samba 共享目录。在您的 smb.conf 中取消注释**`host allow`**并将其设置为您的 Windows 静态 IP。

例子：

```
host allow = 192.168.1.50 
```

接下来向下导航到共享部分并设置要共享的目录。

例子：

```
[www]
comment = www
path = /www
writable = yes
guest ok = yes
public = yes
created mask = 0777
directory mode = 0777 
```

然后保存。

接下来是 setui 和 setgid 更多信息[在这里](http://www.omnisecu.com/gnu-linux/redhat-certified-engineer-rhce/linux-setuid-and-setgid.htm)

```
$sudo chmod -R g+s /www 
```

接下来是设置访问控制列表。* 我刚从[这里得到这个](https://superuser.com/questions/435285/default-permissions-with-setfacl)

```
$sudo setfacl -R -m d:g:http:rwx /www 
```

而已！

输出样本，通过 windows 8 和 virtualbox 测试

从linux创建的目录

```
drwxrwsrwx+ 2 devbox http 4096 Mar 12 10:18 testfromnix 
```

从linux创建的文件

```
-rw-rw-rw-+ 1 devbox http 1 Mar 12 10:20 testfromnix.file 
```

（我在 setfacl 设置了 rwx，但文件只显示读取和写入。我可能遗漏了一些东西。但它可以满足您的目的。如果有人知道为什么它打开以供澄清。）

从windows创建的目录

```
drwxrwsrwx+ 2 nobody http 4096 Mar 12 10:27 testfromwin 
```

从windows创建的文件

```
-rwxrwxrw-+ 1 nobody http 0 Mar 12 10:29 testfromwin.file 
```

现在您可以毫无问题地在两台机器上编辑或添加文件/目录...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:54:17.250

您可以在目录（=文件夹）上设置“setgid”标志，这将更改之后在其下创建的所有文件和目录的所属组。有关更详细的说明，请参阅[http://en.wikipedia.org/wiki/Setuid#setuid_and_setgid_on_directories 。](http://en.wikipedia.org/wiki/Setuid#setuid_and_setgid_on_directories)

除非您需要完全满足您需求的特殊东西。只需为目录设置适当的组权限即可。

另一种方法可能是更改 samba 配置以使用不同的用户来创建新文件。但那是别人来回答的:)

# android - 如何在 Android 中检测拨出电话的回铃音

> ID：15343803
> 
> 赞同：1
> 
> 时间：2013-03-11T16:37:07.577
> 
> 标签：android, telephonymanager, tone-generator

我想知道如何检测呼出呼叫的回铃音，以便计算检测到呼出呼叫和回铃音之间的时间段。现在，我可以检测到拨出电话，但不能检测到回铃音。

# c++ - 与 typedef 一起使用时出现 C++ 模板错误

> ID：15343804
> 
> 赞同：1
> 
> 时间：2013-03-11T16:37:07.703
> 
> 标签：c++, templates

我正在尝试使用 g++ 4.7.2 编译最后一次更新于 2003 年的隐写术包。在头文件中，有以下语句：

```
typedef AudioDataImpl<AuMuLaw,BYTE> AuMuLawAudioData;
inline BYTE AuMuLawAudioData::readValue(BinaryIO *) const {return (io->read8());} 
```

还有其他几个类似的语句用于读取和写入各种格式的数据。编译时，会产生以下错误消息：

> AuData.h:29:13：错误：专门成员“AudioDataImpl::readValue”需要“模板<>”语法。

同样，对于头文件中的每一行都会产生这样的错误消息。

我最初认为编译器忽略了似乎适当地专门化模板的 typedef 语句，所以我用实际的模板表达式替换了 typedef 值，但我得到了相同的错误，所以导致问题的不是 typedef 本身。从 2003 年到今天，模板的处理是否发生了变化，以至于这段代码不再编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:45:09.117

更有可能的是，代码之前根本没有在严格符合的编译器上编译。

将每一行替换为，例如

```
template<> inline BYTE AuMuLawAudioData::readValue(BinaryIO *) const {return (io->read8());} 
```

应该没问题。`typedef`唯一影响符号的是`AuMuLawAudioData`它不会改变整体声明的语法，所以你需要在`typedef<>`那里表明它是一个模板专业化。

# haskell - 不能在数据声明中使用类型类列表

> ID：15343806
> 
> 赞同：1
> 
> 时间：2013-03-11T16:37:12.723
> 
> 标签：haskell, typeclass

我是 Haskell 的新手，我非常喜欢它的编程方法！

在过去的两天里，我一直遇到这个问题，无论我尝试什么，它都无法正常工作。我想我对 Haskell 的性质感到困惑。

这是我的代码（不起作用）：

```
data Part = Part {partName :: String, events :: [Event]}

class Event e where
   getChildren :: e -> [e] 
```

这是一个音乐应用程序。`Event`可以是 a `NoteEvent`、 a `DecrescendoEvent`、 a `VolumeEvent`、 a`KeyEvent`或任何会在一首音乐中“发生”的东西。

A`NoteEvent`将没有孩子，而A`DecrescendoEvent`将有孩子事件，它会逐渐减少其数量。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:48:41.737

您遇到的问题是像 [a] 这样的序列只能包含一种类型。有两种方法可以解决这个问题。

1) 将所有事件组合成一个代数数据类型，它可能看起来像这样：

```
data Event = NoteEvent {note :: Int; duration :: Int} 
             | DecrescendoEvent {getChildren :: [Event]} 
             | VolumeEvent {change :: Double, getChildren :: [Event]} 
```

...等等。现在您可以使用 [Event] 类型的数据。您可以像这样包括孩子：

2）将事件类型包装在某种“包装器”类型中，并创建*该*类型的集合。有关这方面的更多信息，请参阅[http://www.haskell.org/haskellwiki/Heterogenous_collections](http://www.haskell.org/haskellwiki/Heterogenous_collections)。

# mysql - 与同一实体的记录的数据库关联关系

> ID：15343808
> 
> 赞同：2
> 
> 时间：2013-03-11T16:37:16.097
> 
> 标签：mysql, database, database-design, relational-database

我可能没有想清楚，但我在工作中被要求直观地表示现有数据库的关系。我习惯于关联多对多关系，例如“ **Person - PersonProfession - Profession** ”（PersonProfession 是关联的）。

现在我遇到了“ **Person - PersonAssociation - Person** ” 之类的关系。仍然是多对多的，但每个人都与一个或多个……**人**（同一实体）相关联。

恢复，我只有 2 个表（**Person**和**PersonAssociation**）。PersonAssociation 仅包含字段 [personA] 和 [personB]

如果我在它们之间画一条一对多的线，我只会说每个人都有多个关联，而不是说“它们与什么相关联”。

这种方法对我来说看起来不错，到目前为止效果很好，但我不知道如何表示它。有类似经验的人对如何表示这种情况有想法吗？

提前致谢， 劳尔·卡多索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:45:37.457

这是 ERD 上的样子。对于多对多，还有另一种选择——取决于您是否要明确显示关系实体。我会在以下任何一种情况下展示这样的实体：如果我的目的更多地基于实现，我会展示它（但如果我的意图更“合乎逻辑”/概念性，则不会。此外，如果关系本身具有某些属性，我会显示它（例如，“友谊实体可能会显示友谊何时开始等内容）

![样品 ERD](../Images/a7b622b9add302355f5c976d1e8c1e0f.png)

谷歌搜索，我[从 ERDs 的课程中​​找到了这个 PDF](http://www.msit2005.mut.ac.th/msit_media/1_2549/ITEC3610/Lecture/20060610221816yB.pdf)。你可能会发现它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:34:42.503

来表示它......如何？你的意思是在某种图表中？像实体关系图？

如果这就是您的意思，那么表示这一点的传统方式是：

(a) 从实体到自身画一条线；

(b) 画一条从实体回到它自己的线，并在线上贴上一个标签，表明关系的性质，比如“报告给”或“是表亲”或其他什么。

(c) 画一个菱形来表示关系，然后画一条从实体到关系菱形的线，再从关系菱形画一条线回到实体。在钻石内贴上适当的标签。

顺便说一句：这被称为“递归关系”，并不少见。

# vba - 突出显示其他工作表中不存在的行的宏

> ID：15343811
> 
> 赞同：0
> 
> 时间：2013-03-11T16:37:28.397
> 
> 标签：vba, excel

我有一个包含两个工作表的文件，都充满了姓名和地址。如果该行的单元格 A 与第二张表的 A 列中的任何行都不匹配，我需要一个宏来突出显示第一张表中的行。

因此，如果行中的第一个单元格在 sheet2 的 A 列中的任何数据中都没有匹配数据，则该行将突出显示为红色。

另外，我将来可能想扩展它，所以我是否还可以指定 Sheet1 可以是活动工作表，但 sheet2 由工作表名称调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:11:33.710

试试下面的代码：

```
Sub Sample()

    Dim lastRow As Integer
    Dim rng As Range
    lastRow = Sheets("Sheet1").Range("A65000").End(xlUp).Row

    For i = 1 To lastRow
        Set rng = Sheets("sheet2").Range("A:A").Find(Sheets("Sheet1").Cells(i, 1))
        If rng Is Nothing Then
            Sheets("Sheet1").Cells(i, 1).EntireRow.Interior.Color = vbRed
        End If
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:15:43.130

这是使用工作表公式的方法：

```
=IF(ISERROR(VLOOKUP(A:A,Sheet2!A:A,1,FALSE)),"NOT FOUND",VLOOKUP(A:A,Sheet2!A:A,1,FALSE)) 
```

那么如果 A 列未找到匹配项，您将使用条件格式将单元格变为红色！

高温高压

菲利普

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:59:36.140

这是一个丑陋的蛮力方法：

```
Dim r As Range
Dim s As Range

For Each r In ActiveSheet.UsedRange.Rows
  For Each s In Sheets("Sheet2").UsedRange.Rows
    If r.Cells(1, 1).Value = s.Cells(1, 1).Value Then
      r.Interior.ColorIndex = 3
    End If
  Next s
Next r 
```

这是一个更流畅的方法：

```
Dim r As Range
Dim s As Range

Set s = Sheets("Sheet2").Columns(1)

For Each r In ActiveSheet.UsedRange.Rows
  If Not (s.Find(r.Cells(1, 1).Value) Is Nothing) Then
    r.Interior.ColorIndex = 3
  End If
Next r 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:30:20.217

这个怎么样：

```
Sub CondFormatting()

Range("D1:D" & Range("A1").End(xlDown).Row).Formula = "=IF(ISERROR(VLOOKUP(A:A,Sheet2!A:A,1,FALSE)),""NOT FOUND"",VLOOKUP(A:A,Sheet2!A:A,1,FALSE))"

With Columns("D:D")
    .FormatConditions.Delete
    .FormatConditions.Add Type:=xlCellValue, Operator:=xlEqual, Formula1:="=""NOT FOUND"""
    .FormatConditions(1).Interior.ColorIndex = 3
End With

    Range("I16").Select
End Sub 
```

# jquery - Jquery dynatree 在第一次单击单选按钮时没有反应

> ID：15343814
> 
> 赞同：1
> 
> 时间：2013-03-11T16:37:36.523
> 
> 标签：jquery, ruby-on-rails, ruby, dynatree

我使用 click 功能将编辑菜单移动到 rails 应用程序中的单选按钮旁边。除了第一次单击单选按钮没有效果外，它工作正常。然而，第二次单击和另一个或相同的按钮会移动菜单。每个扩展的子菜单也会发生这种情况。

任何帮助将不胜感激

这是一些代码

```
 $("#document_tree").dynatree({
         checkbox: true,
          classNames: {checkbox: "dynatree-radio"},
          selectMode: 1,
          onActivate: function(node) {

                if( node.attr("href") ){
                    window.location.href = node.attr("href"); }
          },
          onSelect: function(select, node) {
            var selectedNode = node;
                $("#show_button").attr("href","/documents/"+selectedNode.data.key+"?documented_type=<%=@documented_type%>");    
                $("#edit_button").attr("href","/documents/"+selectedNode.data.key+"/edit"+"?documented_type=<%=@documented_type%>");    
                $("#new_folder_button").attr("href","/documents/new?id="+selectedNode.data.key+"&kind=folder"+"&documented_type=<%=@documented_type%>");
                $("#new_document_button").attr("href","/documents/new?id="+selectedNode.data.key+"&kind=document"+"&documented_type=<%=@documented_type%>");
                $("#new_link_button").attr("href","/documents/new?id="+selectedNode.data.key+"&kind=link"+"&documented_type=<%=@documented_type%>");
                $("#destroy_button").attr("href","/documents/"+selectedNode.data.key+"?documented_type=<%=@documented_type%>"); 
```

// 这里是我使用 click 函数查找单选按钮坐标的地方。我曾尝试将此代码放在许多其他地方，但它只在这里有效

```
 $(".dynatree-radio").click(function(e){
               var mouseX=e.pageX;
               var mouseY=e.pageY-10;
            $("#tree_menu").css({left:'25px',top:mouseY});
                });

      }, 
```

很抱歉用这个问题打扰您。我在上次尝试谷歌时找到了解决方案。解决方案是使用 $(".dynatree-radio").live('click', function(e){ 而不仅仅是 ' $(".dynatree-radio").click(function(e){

# ios - OpenSSL 从证书中获取主题备用名称

> ID：15343818
> 
> 赞同：8
> 
> 时间：2013-03-11T16:37:44.450
> 
> 标签：ios, objective-c, openssl, x509certificate

我正在开发一个需要从证书 (.pfx) 中读取主题备用名称的 iOS 应用程序。

Security.framework 没有办法获取这些信息，所以你我使用的是 OpenSSL(openssl-1.0.1e)

要阅读主题名称，我使用的是 X509_get_subject_name(certificate)，对于颁发者，我使用的是 X509_get_issuer_name(certificate) 并且正在工作。

问题是主题备用名称。我找不到任何函数来返回此信息。

是否可以使用 OpenSSL 获取主题备用名称？如何？

**编辑：**

我将证书导入 MAC 钥匙串。在主题备用名称上，我看到 NT 主体名称和 RFC 822 名称。

我试过了，但它返回 NULL：

```
GENERAL_NAME *name = (GENERAL_NAME*)X509_get_ext_d2i(cert,NID_subject_alt_name, NULL, NULL) 
```

我正在阅读证书：

```
X509 *cert;
CFDataRef der = SecCertificateCopyData(certificate);
const unsigned char * ptr = CFDataGetBytePtr(der);
int len = CFDataGetLength(der);
d2i_X509(&cert,&ptr,len); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:53:12.277

您可以使用 X509_get_ext_by_NID() 然后 X509_get_ext() 获得 x509 主题替代名称：

```
int loc = X509_get_ext_by_NID(X509 *, NID_subject_alt_name, -1);

if (loc >= 0) {
  X509_EXTENSION * ext = X509_get_ext(X509 *, loc); 
```

那么您必须使用 sk_GENERAL_NAME_num() 和 sk_GENERAL_NAME_value() 或 X509_get_ext_d2i() 解析扩展名。

# ios - 核心数据实体重命名

> ID：15343819
> 
> 赞同：15
> 
> 时间：2013-03-11T16:37:45.423
> 
> 标签：ios, objective-c, core-data

我创建了一个名为“MyObject”的核心数据实体。然后我将实体重命名为“ThatObject”。但是每次我创建一个 NSManagedObject 子类时，它仍然会创建 .h/.m 文件作为 MyObject。

我将“MyObject”文件重命名为“ThatObject”，一切正常，但每次更改实体属性时都必须这样做，这很烦人。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-11T16:50:26.520

当您重命名实体时，请确保`Name`在`Class`Data Model Inspector 中重命名。在我的项目中，如果两者都被重命名，则新的自动生成的 NSManagedObject 子类将使用新名称创建。

[![重命名实体和类的对话框选项](../Images/29cd2f1627bb62d38c54cc281ab8fc1f.png)](https://i.stack.imgur.com/EZdY6.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-14T12:45:44.827

对于未来的读者：请注意模型版本，如果您的应用程序已经发布，更新应用程序可能会破坏您用户设备上的数据库架构，从而导致启动时崩溃。[Core Data 可以自动为这个简单的案例找到迁移，您可以在此处](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)找到有关轻量级迁移的更多信息。您基本上必须**设置一个重命名 ID**，以便 CD 知道什么被重命名为什么，即使在两者之间跳过版本也是如此。

# c# - 用户存在评估发生在登录之前

> ID：15343824
> 
> 赞同：1
> 
> 时间：2013-03-11T16:37:59.980
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

在我的注册`HttpPost`方法中

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                string ret=WebSecurity.CreateUserAndAccount(model.UserName, model.Password);

                if (WebSecurity.Login(model.UserName, model.Password))
                {}
            }
            return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }            
        return View(model);
    } 
```

无论我用什么用户名注册，我总是得到一个异常，指出“该名称已被使用。请选择另一个用户名”。错误发生在`string ret=WebSecurity.CreateUserAndAccount(model.UserName, model.Password);`它将用户名和密码添加到我的 DBtable 中，但之后立即引发异常。

[**更新**]我`RegisterModel`长这样

```
public class RegisterModel
{
    [Required]
    [Remote("IsUserAvailable", "UserExistsValidation")]
    [Display(Name = "User name")]
    [StringLength(30,MinimumLength=2)]
    public string UserName { get; set; }
} 
```

和`IsUserAvailable`方法`UserExistsValidationControler`

```
[OutputCache(Location = OutputCacheLocation.None, NoStore = true)]
public class UserExistsValidationControler: Controller
{
    public JsonResult IsUserAvailable(string username)
    {
        if (!WebSecurity.UserExists(username))
        {
            return Json(true, JsonRequestBehavior.AllowGet);
        }
        string suggestedUsername = string.Format(CultureInfo.InvariantCulture, "'{0}' is not available", username);

        for (int i = 0; i < 100; i++)
        {
            string candidate = username + i.ToString();
            if (!WebSecurity.UserExists(candidate))
            {
                suggestedUsername = string.Format(CultureInfo.InvariantCulture, "'{0}' is not available. Try {1}.", username, candidate);
                break;
            }
        }
        return Json(suggestedUsername, JsonRequestBehavior.AllowGet);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:20:50.220

`WebSecurity.CreateUserAndAccount`请执行下列操作：

```
this.CreateUserRow(database, userName, values);
this.CreateAccount(userName, password, requireConfirmation); 
```

2 操作不在事务中，这就是您最终在用户配置文件表中记录的原因。开头有一个检查，msdn是这样
描述[的](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.createaccount%28v=vs.111%29.aspx)：`CreateAccount()`

> 当您调用此方法时，会员系统会验证是否存在与您在 username 中传递的名称匹配的用户配置文件记录。（当您调用 InitializeDatabaseConnection() 方法以初始化成员资格时，该方法会查询您在 userTableName 参数中指定的表和在 userNameColumn 列中指定的列。）然后它使用用户在成员资格表中创建一个新条目用户档案表中对应记录的ID。

有可能是您的连接设置有问题，因此最好从检查您的设置开始。

# symfony - Symfony2：记录编辑功能测试失败

> ID：15343830
> 
> 赞同：0
> 
> 时间：2013-03-11T16:38:48.010
> 
> 标签：symfony, phpunit, functional-testing

我正处于功能测试学习曲线的陡峭部分。在更改机构状态（是->否、否->是）的简单表单上，记录编辑失败。测试代码为：

```
$crawler = $client->request('GET', '/agency/manage');
//read agency table
$nodeValues = $crawler->filter('td')->each(function ($node, $i) {
    return $node->nodeValue;
});

//$initial = number of Active=Yes agencies
$initial = 0;
foreach ($nodeValues as $node) {
    if ($node == 'Yes') {
        $initial ++;
    }
}
//edit agency to Active=No
$crawler = $client->request('GET', '/agency/1/edit');
$form = $crawler->selectButton('Edit')->form();
$form['agency[active]'] = 'No';
$crawler = $client->submit($form);

$crawler = $client->request('GET', '/agency/manage');

$nodeValues = $crawler->filter('td')->each(function ($node, $i) {
    return $node->nodeValue;
});

//$final = number of Active=Yes agencies
$final = 0;
foreach ($nodeValues as $node) {
    if ($node == 'Yes') {
        $final ++;
    }
}

$this->assertTrue($initial > $final); 
```

对于我的测试用例，初始值和最终值都是 2。我已经构建了一个正确添加代理的测试，所以我知道我并没有完全偏离轨道。（我还想有更简单的方法来计算“是”出现在表格中的次数。）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:25:26.990

答案：修复编辑操作的路由！现在测试通过了。

# ios - 徽章在右栏按钮项目上的稳定位置

> ID：15343835
> 
> 赞同：0
> 
> 时间：2013-03-11T16:38:55.793
> 
> 标签：ios, objective-c, orientation, uibarbuttonitem

我的应用程序在右栏按钮项目上有一个徽章，[自定义徽章](http://www.spaulus.com/2011/04/custombadge-2-0-retina-ready-scalable-light-reflex/?lang=en)，当方向更改时，徽章转到导航栏的中间

肖像

![在此处输入图像描述](../Images/ce343c582d5e54811c53331cf218f932.png)

景观：

![在此处输入图像描述](../Images/82d849c040cc2d919431087cb4631c8f.png)

```
-(void)viewDidAppear:(BOOL)animated
{
    _customBadge1 = [CustomBadge customBadgeWithString:@"2"
                                       withStringColor:[UIColor whiteColor]
                                        withInsetColor:[UIColor redColor]
                                        withBadgeFrame:YES
                                   withBadgeFrameColor:[UIColor whiteColor]
                                             withScale:1.0
                                           withShining:YES];

    // Set Position of Badge
    CGRect frameimgback2 = CGRectMake(742, 0, 20, 20);
    _customBadge1.frame=frameimgback2;
    [self.navigationController.navigationBar addSubview:_customBadge1];

} 
```

我怎样才能稳定这个始终保持在同一位置的徽章（在右栏按钮的右上方。）？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:43:13.507

尝试

```
_customBadge1.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin |
               UIViewAutoresizingFlexibleTopMargin); 
```

# eclipse - 如何在现有的 Eclipse 4.2.2 之上安装 RAD 版本 8.0.3

> ID：15343836
> 
> 赞同：0
> 
> 时间：2013-03-11T16:39:10.717
> 
> 标签：eclipse, websphere-8

我想使用 IBM Rational Application Developer for WebSphere，它带有 Eclipse 版本 3，它非常旧且笨重。

有没有人有让 RAD 与较新版本的 Eclipse（例如 4.2.2）一起工作的经验？

我找到的只是[这个页面](https://www.ibm.com/developerworks/mydeveloperworks/wikis/home/wiki/Rational%20Installation%20Wiki/page/Install%20into%20an%20Existing%20Eclipse%20instance?lang=en#InstallintoanexistingEclipseinstance-linkRad4ws803)，它描述了如何在现有的 3.6.2 上运行 RAD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:19:00.133

我在另一个论坛上得到了答案。简短的回答是否定的，我需要使用 RAD 9.0

来自[https://www.ibm.com/developerworks/forums/thread.jspa?threadID=479652](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=479652)

> 无法将 Rational Application Developer v8.x 安装到 4.2.2 的现有 Eclipse 实例中。...如果您有兴趣，可以尝试基于 Eclipse 4.2.2 的 Rational Application Developer v9.0 beta：
> 
> 公告： [https ://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/article_announce_v85next_beta?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/article_announce_v85next_beta?lang=en)

# javascript - 占位符评估后的AngularJS事件

> ID：15343838
> 
> 赞同：2
> 
> 时间：2013-03-11T16:39:12.917
> 
> 标签：javascript, angularjs, angularjs-directive

我在模板中有一个带有占位符的指令（ {{ }} ）。我需要在评估占位符后触发一个函数。有什么办法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:25:47.357

是这样的吗：

```
scope.$watch('binded_var', function(){
            // Do stuff here
        }); 
```

# android - 活动开始时缺少意图附加功能

> ID：15343840
> 
> 赞同：11
> 
> 时间：2013-03-11T16:39:23.420
> 
> 标签：android, android-intent

在广播接收器中，我想启动我的应用程序（活动）并传递一些数据。

我的问题是额外的东西似乎没有延续到活动中。我正在尝试获取`onNewIntent(Intent i)`函数内的数据。

有任何想法吗？

***这是我目前在BroadcastReceiver*****中的尝试**：

```
Intent intSlider = new Intent();
intSlider.setClass(UAirship.shared().getApplicationContext(), SliderMenuActivity.class);
intSlider.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

intSlider.putExtra("action", ScreensEnum.Object);
intSlider.putExtra("objectId", objectId);
intSlider.putExtra("objectCode", objectCode);
intSlider.putExtra("userId", userId);

UAirship.shared().getApplicationContext().startActivity(intSlider); 
```

**编辑 - 添加了 onNewIntent() 和 onCreate() 中使用的代码**

以下代码`onCreate()`在应用程序当前未运行时工作得很好。因为当应用程序已经在运行时，相同的代码在函数中不起作用（即没有额外内容）`onNewIntent()`。

```
Intent intent = getIntent();

if(intent.hasExtra("objectId")) {

    loadDetail(intent.getStringExtra("objectId"), "2w232");
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T17:16:57.957

问题是`getIntent()`方法。它总是返回**启动**活动的意图，而不是最近的。您应该使用传递给`onNewIntent`方法的意图作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T01:55:54.443

您必须在清单文件中设置标志 FLAG_ACTIVITY_SINGLE_TOP 或设置 launchMode singleTop。

当然，当调用 onNewIntent 时，您不使用 getIntent 而是使用 Intent 作为参数接收。当活动实例已经存在时，将调用 onNewIntent。例如，如果您上次按下主屏幕按钮。

我在这里写了一个对我有用的解决方案：[Intent with old extra in onCreate() for singleTask Activity](https://stackoverflow.com/questions/24208245/intent-with-old-extra-in-oncreate-for-singletask-activity/25858508#25858508)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:49:41.417

从文档中提取

> 如果活动在其包中将 launchMode 设置为“singleTop”，或者客户端在调用 startActivity(Intent) 时使用了 FLAG_ACTIVITY_SINGLE_TOP 标志，则会调用此方法。在任何一种情况下，当活动在活动堆栈的顶部而不是正在启动的活动的新实例时重新启动时，onNewIntent() 将在具有用于重新启动的 Intent 的现有实例上调用它。
> 
> 在接收到新意图之前，活动将始终暂停，因此您可以指望在此方法之后调用 onResume()。
> 
> 请注意，getIntent() 仍然返回原始 Intent。您可以使用 setIntent(Intent) 将其更新为这个新的 Intent。

我认为最后一段解释了你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-05T17:42:35.677

当我们尝试启动/调用`onNewIntent`Activity 以响应本地通知点击时，我们偶然发现了这个问题。我们在 Intent 上添加的额外内容在`onNewIntent`收到它时正在消失。

我不记得当时在任何地方都记录了这一点，但“问题”是我们没有在我们准备的 Intent 上设置操作字段。事实证明，如果您的 Activity 接收到的 Intent 没有使用 设置的操作`setAction`，系统仍会将 Intent 传递到其目的地，但不会传输您在创建 Intent 时设置的附加内容。

**TL;博士：**

如果您在没有操作的 Intent 中遇到此问题，则`setAction`在发送 Intent 之前调用设置任意操作值可能会解决此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T22:17:14.707

您可以将最后收到的意图存储在成员变量 (mLastIntent) 中。然后你可以在你的 onResume() 方法中使用这个成员来查询你的额外数据。

```
private Intent mLastIntent;
@Override
protected void onNewIntent(Intent intent) {
    mLastIntent = intent;
}; 
```

# python - 诞生 numpy 和 scipy

> ID：15343843
> 
> 赞同：-2
> 
> 时间：2013-03-11T16:39:36.303
> 
> 标签：python, numpy, scipy

我下载了 numpy 和 scipy 但我无法安装它。有人可以指导如何在Windows上安装它吗？

我安装了 python 2.7 和 3.3。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:58:35.900

确保下载正确的二进制文件

[http://sourceforge.net/projects/scipy/files/scipy/0.12.0b1/scipy-0.12.0b1-win32-superpack-python2.7.exe/download](http://sourceforge.net/projects/scipy/files/scipy/0.12.0b1/scipy-0.12.0b1-win32-superpack-python2.7.exe/download)

[http://sourceforge.net/projects/numpy/files/NumPy/1.6.1/numpy-1.6.1-win32-superpack-python2.7.exe/download](http://sourceforge.net/projects/numpy/files/NumPy/1.6.1/numpy-1.6.1-win32-superpack-python2.7.exe/download)

在终端中打开 python

`import numpy,scipy` 如果没有错误，请输入你很高兴

# c# - C# 和 aspx 中的邮政编码为 VarChar 而不是 int

> ID：15343846
> 
> 赞同：1
> 
> 时间：2013-03-11T16:39:47.270
> 
> 标签：c#, asp.net, sql

我正在尝试在 SQL 数据库类型中将邮政编码设为 VarChar，并将其与字母和数字一起提交到数据库中。当邮政编码具有 int SQL 数据库类型时，表单将提交到数据库中的 zip 列，但当邮政编码的值为 VarChar 50 时，该值不会提交到名为 zipPostal 的数据库中的新列。

这是aspx中的代码：

```
 <asp:Label runat="server" ID="zipLabel" AssociatedControlID="zip">Zip/Postal 
     Code</asp:Label>     
    <asp:TextBox ID="zip" name="zip" runat="server"></asp:TextBox> 
```

以下是 C# 中的代码片段：

```
 /// Form post data from registration form
    string username = Request.Form["UserName"];
    string first = Request.Form["first"];
    string last = Request.Form["last"];
    string zip = Request.Form["zip"];

    sqlCommand.Parameters.Add(new SqlParameter("@email", SqlDbType.VarChar, 50,  
    ParameterDirection.Input, false, 0, 0, "", DataRowVersion.Proposed, emails));

    sqlCommand.Parameters.Add(new SqlParameter("@username", SqlDbType.VarChar, 15,   
    ParameterDirection.Input, false, 0, 0, "", DataRowVersion.Proposed, username));

    sqlCommand.Parameters.Add(new SqlParameter("@firstName", SqlDbType.VarChar, 20,    
    ParameterDirection.Input, false, 0, 0, "", DataRowVersion.Proposed, first));

    sqlCommand.Parameters.Add(new SqlParameter("@lastName", SqlDbType.VarChar, 20,      
    ParameterDirection.Input, false, 0, 0, "", DataRowVersion.Proposed, last));

sqlCommand.Parameters.Add(new SqlParameter("@zip", SqlDbType.VarChar, 50, 
    ParameterDirection.Input, false, 0, 0, "", DataRowVersion.Proposed, zip)); 
```

SQL 命令类型：

```
 int chk = sqlCommand.ExecuteNonQuery();

     public string CheckEmail(string Email)
     {

     string returnValue = string.Empty;
     SqlConnection conn = new SqlConnection(strConnection);
     SqlCommand sqlCommand = new SqlCommand

     ("CheckEmailAvailability", conn);
     try
     {
        sqlCommand.CommandType = 

     CommandType.StoredProcedure;
     sqlCommand.Parameters.AddWithValue("@Email", 

     Email.Trim());
        conn.Open();
        returnValue = sqlCommand.ExecuteScalar().ToString();
        conn.Close();
     }
     catch
     {

     }

     finally
     {
        conn.Close();
        sqlCommand.Dispose();
     }

     return returnValue;
     } 
```

////

```
 public string CheckUsername(string Username)
    {

    string returnValue = string.Empty;
    SqlConnection conn = new SqlConnection(strConnection);
    SqlCommand sqlCommand = new SqlCommand

    ("CheckUsernameAvailability", conn);
    try
    {
        sqlCommand.CommandType = 

    CommandType.StoredProcedure;
        sqlCommand.Parameters.AddWithValue("@UserName", 

    Username.Trim());
        conn.Open();
        returnValue = sqlCommand.ExecuteScalar().ToString();
        conn.Close();
    }
    catch
    {

    }

    finally
    {
        conn.Close();
        sqlCommand.Dispose();
    }

    return returnValue;
    }

    } 
```

//存储过程

```
 if (username != "")
   {
        string checkUN = CheckUsername(username);

        if (checkUN == "true")
        {
            Label2.Text = "Username already exists.";
            gotoauth = 0;
            return;

        }
    }
    //[ckc] end check username 

    if (password != confirmpwd)
    {
        Label2.Text = "The Password and Confirmation 

   Password must match.";
       gotoauth = 0;
        return;
    }

   //connection with db and call procedure.
    SqlConnection conn = new SqlConnection(strConnection);
    SqlCommand sqlCommand = new SqlCommand

    ("customers_insert", conn);
    sqlCommand.CommandType = CommandType.StoredProcedure;
    conn.Open();

    try
    {

    if (gotoauth == 0) 
     {}

    else
        {

var customerGateway = new 

    CustomerGateway(_loginApikey, _TransactionKey, 

    ServiceMode.Live);
    var NewCustomer = customerGateway.CreateCustomer

    (emails, "Live User Account");
    var datetime = DateTime.Now.ToString(); 

string proid = NewCustomer.ProfileID;
    Session["Customerproid"] = proid; 
```

/// SQL过程

```
 SET QUOTED_IDENTIFIER ON
    GO
    ALTER PROCEDURE [dbo].[customers_insert]
    @email varchar(50) ,
    @username varchar(15) ,
    @firstName varchar(20) ,
    @lastName varchar(20) ,
    @country varchar(50) ,
    @address varchar(100) ,
    @city varchar(100) ,
    @state varchar(50) ,
    @account bigint = null ,
    @profileID bigint = null ,
    @password varchar(20) ,
    @customerNumber int = null ,
    @question varchar(50)  ,
    @answer varchar(50) ,
    @dob varchar(50) ,
    @AccountNumber varchar(50) = null ,
    @PinNumber varchar(50) = null ,
    @PhoneNumber varchar(50) = null, 
    @ApprovalID int,
    @DateTime varchar (50) = null,
    @thoughts varchar (100) = null,
    @zip varchar (50) = null

    AS

    INSERT [dbo].[customers]
    (
    [email],
    [username],
    [firstName],
    [lastName],
    [country],
    [address],
    [city],
    [state],
    [account],
    [profileID],
    [password],
    [customerNumber],
    [question],
    [answer],
    [dob],
    [AccountNumber],
    [PinNumber],
    [PhoneNumber],
    [ApprovalID],
    [DateTime],
    [thoughts],
    [zip]

    )
    VALUES
    (
    @email,
    @username,
    @firstName,
    @lastName,
    @country,
    @address,
    @city,
    @state,
    @account,
    @profileID,
    @password,
    @customerNumber,
    @question,
    @answer,
    @dob,
    @AccountNumber,
    @PinNumber,
    @PhoneNumber,
    @ApprovalID,
    @DateTime,
    @thoughts,
    @zip

    ) 
```

在 SQL 数据库中，有一列用于 zip（int，not null）和一列用于 zipPostal（varChar(50)，null）。我希望邮政编码数据进入 zipPostal 列，以便它接受字母和数字。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:50:23.283

您很可能有一个查询——在后端数据库中以存储过程的形式，或者在你的 c# 代码中以 a 的形式`SqlCommand`——引用该`zip`列。您需要更改该查询/过程以引用正确的字段。如果您的代码说该值应该插入到`zip`中，那么它永远不会插入到`zipPostal`.

编辑：现在我们可以看到您的存储过程，它确认这是问题所在。以下是解决方法：

```
ALTER PROCEDURE [dbo].[customers_insert]
@email varchar(50) ,
@username varchar(15) ,
@firstName varchar(20) ,
@lastName varchar(20) ,
@country varchar(50) ,
@address varchar(100) ,
@city varchar(100) ,
@state varchar(50) ,
@account bigint = null ,
@profileID bigint = null ,
@password varchar(20) ,
@customerNumber int = null ,
@question varchar(50)  ,
@answer varchar(50) ,
@dob varchar(50) ,
@AccountNumber varchar(50) = null ,
@PinNumber varchar(50) = null ,
@PhoneNumber varchar(50) = null, 
@ApprovalID int,
@DateTime varchar (50) = null,
@thoughts varchar (100) = null,
@zip varchar (50) = null

AS

INSERT [dbo].[customers]
(
[email],
[username],
[firstName],
[lastName],
[country],
[address],
[city],
[state],
[account],
[profileID],
[password],
[customerNumber],
[question],
[answer],
[dob],
[AccountNumber],
[PinNumber],
[PhoneNumber],
[ApprovalID],
[DateTime],
[thoughts],
[zipPostal] /*Here's what I changed*/

)
VALUES
(
@email,
@username,
@firstName,
@lastName,
@country,
@address,
@city,
@state,
@account,
@profileID,
@password,
@customerNumber,
@question,
@answer,
@dob,
@AccountNumber,
@PinNumber,
@PhoneNumber,
@ApprovalID,
@DateTime,
@thoughts,
@zip

) 
```

您也可以以更复杂的方式编辑它，将邮政编码放入`Zip`或`zipPostal`取决于其值，但我认为您应该将所有内容放入`zipPostal`. 您应该将所有数据放在一个地方，并且邮政编码数据应始终存储为字符串，而不是数字，正如 Galactic Cowboy 在下面的评论中所写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:29:15.657

您还没有发布相关的 SQL 代码。

您已经发布了调用“CheckUserNameAvailability”存储过程的代码和另一个调用名为“CheckEmailAvailability”的存储过程的代码。这些存储过程似乎都与尝试设置邮政编码的代码无关。

我怀疑您正在调用另一个以@Zip 作为参数的存储过程。必须编辑该存储过程以更新正确的列。

更新：

改变

```
INSERT [dbo].[customers]
(
[email],
[username],
[firstName],
[lastName],
[country],
[address],
[city],
[state],
[account],
[profileID],
[password],
[customerNumber],
[question],
[answer],
[dob],
[AccountNumber],
[PinNumber],
[PhoneNumber],
[ApprovalID],
[DateTime],
[thoughts],
[zip]

)
VALUES
(
@email,
@username,
@firstName,
@lastName,
@country,
@address,
@city,
@state,
@account,
@profileID,
@password,
@customerNumber,
@question,
@answer,
@dob,
@AccountNumber,
@PinNumber,
@PhoneNumber,
@ApprovalID,
@DateTime,
@thoughts,
@zip

) 
```

至

```
INSERT [dbo].[customers]
(
[email],
[username],
[firstName],
[lastName],
[country],
[address],
[city],
[state],
[account],
[profileID],
[password],
[customerNumber],
[question],
[answer],
[dob],
[AccountNumber],
[PinNumber],
[PhoneNumber],
[ApprovalID],
[DateTime],
[thoughts],
[zipPostal]

)
VALUES
(
@email,
@username,
@firstName,
@lastName,
@country,
@address,
@city,
@state,
@account,
@profileID,
@password,
@customerNumber,
@question,
@answer,
@dob,
@AccountNumber,
@PinNumber,
@PhoneNumber,
@ApprovalID,
@DateTime,
@thoughts,
@zip

) 
```

# c# - 当数据库中的值为真或假时如何显示图像

> ID：15343848
> 
> 赞同：1
> 
> 时间：2013-03-11T16:39:53.353
> 
> 标签：c#, database, image

我想知道如何设置图片框，它会显示 2 张图片。值为 True 图像编号 1，值为 False，图像编号 2。我是编程的菜鸟......我的记录名称是“奇数”数据类型是“位”

这是我的代码

```
 namespace WindowsFormsApplication1
    {
public partial class Form1 : Form
{
    SqlConnection cn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\MSI\Documents\Visual Studio 2010\Projects\Baza z własnymi batonami\Baza z własnymi batonami\Database1.mdf;Integrated Security=True;User Instance=True");
    SqlCommand cmd = new SqlCommand();
    SqlDataReader dr;
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        cmd.Connection = cn;
        pokazliste();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (textid.Text != "" & textimie.Text != "")
        {
            cn.Open();
            cmd.CommandText = "Insert into Table1 (id,imie) values('" + textid.Text + "','" + textimie.Text + "')";
            cmd.ExecuteNonQuery();
            cmd.Clone();
            MessageBox.Show("Wpis Wprowadzony","Vindykacja by Brzoska");
            cn.Close();
            textid.Text = "";
            textimie.Text = "";
            pokazliste();
        }
    }

        private void pokazliste()
        {
            listBox1.Items.Clear();
            listBox2.Items.Clear();
            cn.Open();
            cmd.CommandText = "Select * From Table1";
            dr = cmd.ExecuteReader();
            if (dr.HasRows)
            {
                 while(dr.Read())
                 {
                     listBox1.Items.Add(dr[0].ToString());
                     listBox2.Items.Add(dr[1].ToString());

                 }
            }
            cn.Close();  
        }

        private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
            ListBox l = sender as ListBox;
            if (l.SelectedIndex != -1)
            {
                listBox1.SelectedIndex = l.SelectedIndex;
                listBox2.SelectedIndex = l.SelectedIndex;
                textid.Text = listBox1.SelectedItem.ToString();
                textimie.Text = listBox2.SelectedItem.ToString();

            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (textid.Text != "" & textimie.Text != "" & listBox1.SelectedIndex!=-1 )
            {
                cn.Open();
                cmd.CommandText = "delete from Table1 where id='" + listBox1.SelectedItem.ToString() + "' and imie= '" + listBox2.SelectedItem.ToString() + "'";
                cmd.ExecuteNonQuery(); 
                cn.Close();
                MessageBox.Show("Wpis Uaktualniony", "Vindykacja by Brzoska");
                pokazliste();
                textid.Text = "";
                textimie.Text = "";

            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            if (textid.Text != "" & textimie.Text != "")
            {
                cn.Open();
                cmd.CommandText = "Update Table1 set id='" + textid.Text + "', imie= '" + textimie.Text + "'Where id'" + textid.Text + "'and imie= '" + textimie.Text + "'";
                cmd.ExecuteNonQuery();
                cn.Close();
                MessageBox.Show("Wpis Usuniety", "Vindykacja by Brzoska");
                pokazliste();
                textid.Text = "";
                textimie.Text = "";

            }
        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {

        }
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:17:26.457

```
 SqlConnection cn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\MSI\Documents\Visual Studio 2010\Projects\Baza z własnymi batonami\Baza z własnymi batonami\Database1.mdf;Integrated Security=True;User Instance=True");
    SqlCommand cmd = new SqlCommand();
    SqlDataReader dr;
    cn.Open();
    cmd.CommandText = "SELECT oddal FROM TableName WHERE (Your = Condition)";
    dr = cmd.ExecuteReader();
    if dr.Read()
    {
            if dr("oddal")
            {
            //Set picture box to image 1
            } 
            else 
            { //Set picture box to image 1
            }
    }
    cn.Close(); 
```

确保在 SELECT 中指定您的条件。此外，为了将来，为控件分配有意义的名称。而不是button1，说btnInsert ...

# c# - 我需要重建我的整个解决方案以让 Visual Studio 测试资源管理器注意到更改

> ID：15343850
> 
> 赞同：0
> 
> 时间：2013-03-11T16:39:57.020
> 
> 标签：c#, unit-testing, visual-studio-2012

正如标题所说。在对测试进行更改后，如果不重建整个解决方案，我似乎无法让测试资源管理器注意到这些更改。由于这需要大约 20 分钟，因此不太实用。

我尝试了一个简单的演示项目，它似乎可以正常工作，但不适用于我们的代码库。

我已经阅读了很多关于 Visual Studio 的有用问题，因此似乎有些人在这方面知识渊博。如果有人有任何想法我可以尝试或检查，他们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T10:22:03.110

这已在 Visual Studio 2013 更新 2 中修复：

[http://connect.microsoft.com/VisualStudio/feedback/details/809777/running-a-single-unit-test-in-visual-studio-2013-causes-entire-solution-to-be-built](http://connect.microsoft.com/VisualStudio/feedback/details/809777/running-a-single-unit-test-in-visual-studio-2013-causes-entire-solution-to-be-built)

我遇到了同样的问题，刚刚从 VS 2013 Update 1 升级到 Update 4。我可以确认我现在可以通过测试资源管理器运行单个单元测试，而无需重建我的整个解决方案。

# javascript - 任何编号的 li 的 JavaScript

> ID：15343852
> 
> 赞同：0
> 
> 时间：2013-03-11T16:39:57.497
> 
> 标签：javascript, jquery, css, list

我不知道这是否奇怪，但有没有可能有这样的事情：

```
 <li id="something-1"> </li>
   <li id="something-2"> </li>
   <li id="something-3"> </li> 
```

并使用 javascript

```
 $("#something-"+ANYNUMBER).click(function() {
    alert("Boom");
} 
```

这可能吗？我该怎么做？

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:42:36.347

你可以这样做：

```
$('[id=^"something-"]').click(function() {
    alert("Boom");
}); 
```

但这是您需要使用类时的情况：

```
<li id="something-1" class="something"></li>
<li id="something-2" class="something"></li>
<li id="something-3" class="something"></li> 
```

并像这样选择它们：

```
$('.something').click(function() {
    alert("Boom");
}); 
```

事实上，它比通过属性选择器选择元素更有效`[id=^"something-"]`。而且它更加灵活和不引人注目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T16:42:29.733

您可以使用属性[starts-with 选择器来做到这一点](http://api.jquery.com/attribute-starts-with-selector/)

```
$("li[id^=something-]") 
```

或为元素分配一个类并使用类选择器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:41:50.677

对所有 li 应用一个类

```
 <li id="something-1" class="className"> </li>
   <li id="something-2" class="className"> </li>
   <li id="something-3" class="className"> </li>

$('.className').click(function() {
    alert("Boom");
} 
```

或者

```
$('li').click(function() {
    alert("Boom");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:41:47.923

如果您只想`alert('boom')`在单击时显示每个列表项，请尝试以下操作：

```
$('li').click(function () {
    alert("Boom");
}); 
```

# jquery - _doPostBack 传递参数

> ID：15343854
> 
> 赞同：1
> 
> 时间：2013-03-11T16:40:03.660
> 
> 标签：jquery, asp.net, json, jquery-ui, c#-4.0

我正在尝试使用 _doPostBack() 将参数从 JQuery 传递到 C#，但是由于某种原因，我无法捕获实际参数。

我的 JQuery 如下：-

```
 function SearchText() {
    $("#persons").autocomplete({
        source: function (request, response) {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "JQAutoComplete2.aspx/FetchPersons",
                data: "{'name':'" + document.getElementById('persons').value + "'}",
                dataType: "json",
                success: function (data) {
                    response(data.d);
                    var val = document.getElementById('persons').value;
                    _doPostBack('UpdatePanel1', val);
                },
                error: function (result) {
                    alert("Error");
                }
            });
        },
        messages: {
            noResults: '', results: function () {
            }
        }

    });
} 
```

我的代码隐藏如下： -

```
 protected void UpdatePanel1_Load(object sender, EventArgs e)
    {
        var value = Request.Params["__EVENTARGUMENT"];

        RadGrid1.DataSource = ctx.GetDataFromXML(false, 0);
        RadGrid1.DataBind();
    } 
```

虽然调用了这个方法，但是 val 并没有传递给方法，EventArgument 仍然是“”。

我尝试了 Request.Forms["_ *EVENTARGUMENT"]，也尝试了 Request[* "_EVENTARGUMENT "] 但我仍然得到一个空字符串。

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:53:16.777

在客户端：

__doPostBack('id', 'value');

正如 sll 提到的 =>**两个**下划线

在服务器端：

```
Request["__EVENTARGUMENT"] 
```

这里还有**两个**下划线

你写了你已经尝试过 Request["_EVENTARGUMENT"] => 但你没有使用两个下划线！

# php - 像 Wordpress 上的 PHP 短 URL

> ID：15343855
> 
> 赞同：1
> 
> 时间：2013-03-11T16:40:04.667
> 
> 标签：php, mysql, url-rewriting

有谁知道如何拥有一种 URL Shortner？

例如，使用 PHP 而不是 www.domain.com/page.php?seq=1435 拥有 www.domain.com/rGhpf

有没有人对我能做些什么有任何想法 - 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:45:55.710

您可以使用 Apache 的 Rewrite urls 来做到这一点。

```
RewriteEngine On
RewriteRule ^seq/([0-9/]+)$ /page.php?seq=$1 [L] 
```

这意味着您可以转到[http://domain.com/seq/1435](http://domain.com/seq/1435)而不是[http://www.domain.com/page.php?seq=1435](http://www.domain.com/page.php?seq=1435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:50:07.723

确保 Apache 的 mod_rewite 可用[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

在站点的 docroot 中创建一个名为 .htaccess 的文件（您也可以在其他目录中使用其他规则执行此操作）

如果脚本是 index.php 一切都好。无需继续 L=last

如果脚本不存在或目录不存在重定向到 index.php（我们知道它没问题）并将请求的脚本放入 $_GET['seq']

```
RewriteEngine On
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?seq=$1 [L] 
```

# python - python返回函数

> ID：15343856
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:40:06.337
> 
> 标签：python, return

我有一个程序来生成 1-5 之间的 10 个随机数的列表，然后计算每个数字出现的次数，然后创建一个删除重复项的新列表。我不断得到某些全局名称没有定义。我似乎对返回函数感到困惑。不过我需要这种格式，所以我不能把打印语句放在每个函数的末尾。有什么帮助吗？

```
def main():
    """print output of program"""
    firstList= []
    randomTen(firstList)
    countInts(firstList)
    removeDuplicates(firstList)
    print(firstList)
    print('The number of times one appears is', ones)
    print('The number of times two appears is', twos)
    print('The number of times three appears is', threes)
    print('The number of times four appears is', fours)
    print('The number of times five appears is', fives)
    print(secondList)

def randomTen(firstList):
    """return list of ten integers"""
    for num in range(1,11):
        x= int(random.randint(1,5))
        firstList.append(x)
    return firstList

def countInts(firstList):
    """count the number of times each integer appears in the list"""
    ones= firstList.count(1)
    twos= firstList.count(2)
    threes= firstList.count(3)
    fours= firstList.count(4)
    fives= firstList.count(5)
    return ones, twos, threes, fours, fives

def removeDuplicates(firstList):
    """return list of random integers with the duplicates removed"""
    secondList=set(firstList)
    return secondList 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:42:54.000

问题是您忽略了函数的返回值。例如，

```
countInts(firstList) 
```

应该读

```
ones, twos, threes, fours, fives = countInts(firstList) 
```

没有这个，`ones` *等人*不存在`main()`。

其他函数也是如此（除了`randomTen()`返回之外`firstList`，它还修改了它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:54:38.437

[NPE 的答案](https://stackoverflow.com/a/15343913/1322401)完全正确，您需要将函数的返回值分配给局部变量。

也就是说，这里有一种更 Pythonic 的方式来完成相同的任务。

```
from collections import Counter
from random import randint

nums = [randint(1, 5) for _ in range(10)]
counts = Counter(nums)
uniq_nums = set(nums) # or list(counts.keys()) 
```

要显示值，请执行

```
print nums
for word, num in (('one', 1), ('two', 2), ('three', 3), ('four', 4), ('five', 5)):
    print 'The number of times %s appears is %s' % (word, counts[num])
print uniq_nums 
```

哪个打印：

```
[4, 5, 1, 4, 1, 2, 2, 3, 2, 1]
The number of times one appears is 3
The number of times two appears is 3
The number of times three appears is 1
The number of times four appears is 2
The number of times five appears is 1
set([1, 2, 3, 4, 5]) 
```

# jquery - jQuery ui $([])

> ID：15343857
> 
> 赞同：5
> 
> 时间：2013-03-11T16:40:08.597
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

这只是一个快速的（我希望）。

我最近在 jquery ui 对话框页面上查看在对话框中使用表单[http://jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)并且我注意到一些我以前没有见过的代码：

```
var allFields = $([]).add(#input1).add(input2).add(input3).... 
```

我只是想知道 $([]) 是什么意思？

起初我认为这是在 jquery 中创建数组的一种方法，但是当我尝试时：

```
allFields.add(input4) 
```

声明变量后没有添加任何其他内容？！？

任何帮助将不胜感激！:) 我试过用谷歌搜索这个，但是，我运气不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:47:09.830

该[`jQuery()`](http://api.jquery.com/jQuery/)函数接受许多不同的参数，其中一个是 DOM 元素数组。传递这样一个数组将导致返回一个包含这些元素的新 jQuery 对象。在这种情况下，他们传递一个空数组，因此它返回一个包含零个元素的 jQuery 对象。

该[`.add()`](http://api.jquery.com/add/)函数将向现有集合添加更多元素。

因此，`$([])`创建一个不包含任何元素的 jQuery 对象，`.add('#input1')`将带有`id`of的元素添加`input1`到该集合中。再次调用`.add('#input1')`不会添加任何内容，因为该元素已经存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:44:01.197

```
var allFields = $([]);
allFields.add() 
```

在您的问题中，您将变量等同于 .add() 方法的返回值

# assembly - 找不到可启动媒体！加载自定义操作系统时出错

> ID：15343863
> 
> 赞同：0
> 
> 时间：2013-03-11T16:40:25.243
> 
> 标签：assembly, virtualbox, boot, bootloader

我正在尝试使用虚拟软盘映像加载我在 Virtualbox 中制作的一个非常小的、简单的操作系统，但我得到了“ `FATAL: No bootable medium found!`”错误。操作系统本身只是用来测试引导加载程序的，它所做的只是在屏幕上写一个“7”。我用 FASM 编写了引导加载程序/操作系统，使用 CMD 复制命令 (C:>copy /b bootloader.bin bootload.img) 创建了一个映像文件 (.img)，将其加载到虚拟软盘中，当我尝试启动它时起来，它不会加载。为什么是这样？扫描日志对我没有帮助，因为他们没有告诉我 Virtualbox 在哪里寻找图像文件，至少从我对它们的理解来看。查看几个 SO 线程会发现很多很好的信息，但所有这些信息都适用于我目前没有运行的 Linux。引导加载程序的代码位于此处：[http://pastebin.com/Qnf8DBgQ](http://pastebin.com/Qnf8DBgQ)

**简短版：**制作一个操作系统，将其加载到 Virtualbox，`FATAL: No bootable medium found!`为什么？

我正在使用这个特定的引导加载程序配置，因为我正在关注 YouTube 上的操作系统开发视频系列，并且我希望能够真正关注它：[http ://www.youtube.com/watch?v=GOmPPmINoUs](http://www.youtube.com/watch?v=GOmPPmINoUs)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:44:57.170

读取第一个软盘扇区（前 512 个字节）- BIOS 查找所谓的引导扇区，将其加载到内存中并跳转到它。例如，在网上找到可引导的 fdd 映像并查看第一个扇区

UPD： http: [//www.ata-atapi.com/hiwdos.html](http://www.ata-atapi.com/hiwdos.html)

# dynamics-crm-2011 - AdxStudio CrmEntityFormView 吞咽 Microsoft.Xrm.Sdk.SaveChangesException

> ID：15343870
> 
> 赞同：1
> 
> 时间：2013-03-11T16:40:46.973
> 
> 标签：dynamics-crm-2011

我在 AdxStudio 论坛上发布了这个并且得到了完全零响应，所以我希望你们能帮助我调试这个。

我正在使用 CrmEntityFormView 在 CRM 中创建新联系人，如下所示：

```
<adx:CrmDataSource ID="FormViewDataSource" runat="server" />
    <adx:CrmEntityFormView runat="server" ID="UserCreateForm" EntityName="contact" FormName="User Edit Form" DataSourceID="FormViewDataSource"
        RecommendedFieldsRequired="true" ValidationGroup="NewUser" ValidationText="* This field is required" EnableValidationSummaryLinks="false" 
        OnItemInserting="UserCreateForm_ItemInserting" OnItemInserted="UserCreateForm_ItemInserted">
        <InsertItemTemplate></InsertItemTemplate>
</adx:CrmEntityFormView>

<asp:Button ID="SubmitButton" Text='Create User' CssClass="button" ValidationGroup="NewUser" runat="server" OnClick="SubmitButton_Click" /> 
```

我正在使用 SubmitButton_Click 处理程序同时处理表单上的其他一些字段，如下所示：

```
 protected void SubmitButton_Click(object sender, EventArgs e)
 {
    if (!Page.IsValid)
        {
            return;
        }

    # Handle other form fields not on the FormView ...
    UserCreateForm.InsertItem();
 } 
```

当我提交有效表单时，我的数据库中没有任何反应。所以我调试了 ItemInserted 事件，在处理程序的单行上放置了一个断点

```
 protected void UserCreateForm_ItemInserted(object sender, CrmEntityFormViewInsertedEventArgs e)
    {
        Contact newUser = XrmContext.ContactSet.Where(c => c.ContactId == e.EntityId).FirstOrDefault();
    } 
```

事实证明，在这种情况下，e.Exception 不是 null，而是标题中 SaveChangesException 的一个实例，消息是“处理此请求时发生错误”。和 e.ExceptionHandled == true，我猜这就是我什么都没看到的原因。

这个异常有一个 InnerException，一个实例`System.ServiceModel.FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>`

带有始终只包含 FormView 中第一个字段的提交值的消息。我完全不知道为什么这不起作用，而且我不清楚如何进一步调试它并且可以使用一些指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T21:17:55.833

`System.ServiceModel.FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>`吃堆栈跟踪。请参阅[此博客](http://www.dotnetdust.blogspot.com/2014/11/how-to-prevent-faultexception-from.html)作为实际记录堆栈跟踪的方法，以便能够找到发生错误的位置。

# c# - 是否有用于添加 HttpResponseHeader 的内容头类型？

> ID：15343872
> 
> 赞同：10
> 
> 时间：2013-03-11T16:40:55.163
> 
> 标签：c#, .net, http-response-codes

我在 HttpResponseHeaders 中看到的唯一方法是 Add，它采用字符串类型作为标头类型。我只是想知道.NET 是否提供了字符串中的 HttpResponseHeader 类型内容列表？

所以我可以这样做：

```
HttpResponseMessage response = Request.CreateResponse.........;
response.Headers.Add(xxxxx.ContentRange, "something"); 
```

我可以看到 HttpResponseHeader 中有一个枚举列表，但它没有相应地提供字符串值......

即HttpResponseHeader.ContentRange，但正确的标头字符串应该是Content-Range

如果我错了，请纠正我...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T18:06:49.507

System.Net.Http.Headers 命名空间中有三个强类型 HTTP 标头类：

*   [HttpContentHeaders](http://msdn.microsoft.com/en-us/library/system.net.http.headers.httpcontentheaders.aspx)
*   [HttpRequestHeaders](http://msdn.microsoft.com/en-us/library/system.net.http.headers.httprequestheaders.aspx)
*   [HttpResponseHeaders](http://msdn.microsoft.com/en-us/library/system.net.http.headers.httpresponseheaders.aspx)

HttpContentHeaders （可通过任何 System.Net.Http.HttpContent 类型的属性访问）具有*Content-Type*、*Content-Length*、*Content-Encoding*`Headers`等的预定义属性......（这似乎是你的标题之后）。

 ***您可以像这样设置它们：

```
var content = new StringContent("foo");
content.Headers.Expires = DateTime.Now.AddHours(4);
content.Headers.ContentType.MediaType = "text/plain"; 
```

...并且标题名称将正确设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:22:59.947

也许你可以尝试这样的事情。

```
var whc = new System.Net.WebHeaderCollection();
whc.Add(System.Net.HttpResponseHeader.ContentRange, "myvalue");
Response.Headers.Add(whc); 
```

在 webapi 上下文中，最后一行可能是：

```
HttpContext.Current.Response.Headers.Add(whc); 
```

无论如何，@ServiceGuy 的答案是进入 webapi/mvc 上下文的方式

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T17:25:37.363

您可以通过 WebRequest 和 WebResponse 上的属性获取和设置公共标头，例如[HttpWebRequest.ContentType](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contenttype.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T17:34:38.980

C# 具有从枚举到字符串的内置转换。考虑这些任务：

```
int val = 5;
HttpResponseHeader header = HttpResponseHeader.Allow 
```

现在，`val.ToString()`将返回字符串`"5"`，但`header.ToString()`会返回`"Allow"`。所以我谦虚地建议使用

```
response.Headers.Add(HttpResponseHeader.ContentRange.ToString(), "something"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T21:25:28.190

使用 ContentType 属性：[https](https://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contenttype.aspx) ://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.contenttype.aspx 。

通过执行以下操作，我能够在我的 WCF 服务实现中做到这一点：

```
// Get the outgoing response portion of the current context
var response = WebOperationContext.Current.OutgoingResponse;

// Add ContentType header that specifies we are using JSON
response.ContentType = new MediaTypeHeaderValue("application/json").ToString(); 
```***

# html - Table Thead 与 TD Cells 不匹配且不尊重表格大小

> ID：15343876
> 
> 赞同：1
> 
> 时间：2013-03-11T16:41:10.110
> 
> 标签：html, css

如何修改下面的代码以使 Table THead 与 TD 匹配并尊重表格的大小（宽度）？现在发生的情况是表头扩展超出了 div 的大小，并且表格水平横跨页面。

```
<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<style type="text/css">

/*------------------------------------------------------------------
Table Style
------------------------------------------------------------------ */
table a:link {
    color: #666;
    font-weight: bold;
    text-decoration:none;
}
table a:visited {
    color: #999999;
    font-weight:bold;
    text-decoration:none;
}
table a:active,
table a:hover {
    color: #bd5a35;
    text-decoration:underline;
}
table {
    font-family:Arial, Helvetica, sans-serif;
    color:#666;
    font-size:12px;
    background:#eaebec;
    border-radius:3px;
    border-collapse:collapse; border-spacing: 0; 
    box-shadow: 0 1px 2px #d1d1d1;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
    table-layout: fixed;

}
table th {
    border-bottom:1px solid #ccc;
    border-left: 1px solid #ccc;
    background: #ededed;
}   
table tr {
    text-align: center;
}   
table td {
    border-bottom:1px solid #ccc;
    border-left: 1px solid #ccc;
    background: #fafafa;
        text-align: left;
}   
table tr:hover td {
    background: #f2f2f2;
}
table th, table td {
    height: 20px;
    width: 200px;
}
#container {
    width : 98.7%;
    height: 300px;
    overflow-x: scroll;
    overflow-y: scroll;
}
table tr td:first-child, table tr th:first-child {
    border-left: 0;
}

table thead {
    _position: fixed;
    _position: relative;
    _position: absolute;

}

TABLE THEAD TR TH {
    top:expression(this.offsetParent.scrollTop);
    border-top:1px solid #ccc;
    _position:relative;
    _position: absolute;
    _position: fixed;
}

table tr:first-child td {
    border-top: 0;
}
</style>

</head>

<body>

<div id="container">

<table id="data">

    <!-- Table Header -->
    <thead>
        <tr>
            <th>File Number</th>
            <th>&nbsp;</th>
            <th>&nbsp;</th>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Progress</th>
            <th>Vital Task</th>
        </tr>
    </thead>
    <!-- Table Header -->

    <!-- Table Body -->
    <tbody>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Table Row -->

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr><!-- Darker Table Row -->

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>20%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>100%</td>
            <td>Yes</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>23%</td>
            <td>yes</td>
        </tr>

        <tr>
            <td>ABC-123-123456</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td>No</td>
        </tr>

        <tr>
            <td><a href="#yep-iit-doesnt-exist">Hyperlink Example</a></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>80%</td>
            <td><a href="#inexistent-id">Another</a></td>
        </tr>

    </tbody>
    <!-- Table Body -->

</table>
  <script>
  $(function() {
    $( "#data tr th" ).resizable({
      handles: 'e'
    });
  });
  </script>
</div>

</body>
</html> 
```

预计[到达 http://jsfiddle.net/KrB79/](http://jsfiddle.net/KrB79/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:02:23.190

将容器的 CSS 编码修复为：

```
#container {
    width : 98.7%;
    height: 300px;
    overflow-x: scroll;
    overflow-y: scroll;

    position: fixed;
} 
```

用IE7解决了问题。

# django - 处理 HttpResponseRedirect 的正确方法

> ID：15343883
> 
> 赞同：1
> 
> 时间：2013-03-11T16:41:24.453
> 
> 标签：django, django-forms, django-views

我有一个我正在尝试部署的 Django 应用程序。Apache 设置以我通过以下 URL 访问我的 wsgi 应用程序的方式进行配置：

```
sitename.com/~amartino 
```

这意味着我的 public_html 目录中只有一个 wsgi.py 文件。我通过 URL 访问我的 Django 站点：

```
sitename.com/~amartino/expofit 
```

因为这就是在 urls.py 中设置的方式。

```
urlpatterns = patterns('',
('/param_select/$',session_check(param_select)),
('registration/$',registration),
('result_show/(\d+)',session_check(result_show)),
('^expofit/$',media_clean(start)),
('result_pick/$',session_check(result_pick)),
('mail_report/$',session_check(mail_report)),
('notification/$',session_check(notification)), 
```

但是，我遇到的问题（在开发中没有出现:)）是我在views.py 中使用了硬编码的HttpResponseRedirect。

```
...
#If all fields are valid
return HttpResponseRedirect('/expofit/param_select/')
#else reload page
... 
```

由于生产环境没有将我的站点放在 URL 的根目录中，因此我现在遇到错误，因为上`HttpResponseRedirect`转换为

```
sitename.com/expofit/param_select/ 
```

Apache 无法识别。

我想我可以删除斜线并拥有：

```
return HttpResponseRedirect('expofit/param_select/') 
```

这将导致：

```
sitename.com/~amartino/expofit/registration/expofit/param_select/ 
```

但这似乎不是正确的方法，因为我很快就会得到一个巨大的 URL。这里的设计/配置缺陷在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:52:10.293

> “我遇到的问题是我正在使用硬编码的 HttpResponseRedirect”

好吧，那就不要那样做。这就是 Django 提供该[`reverse`](https://docs.djangoproject.com/en/1.5/topics/http/urls/#reverse-resolution-of-urls)函数的原因，该函数获取您的 url 名称并计算正确的绝对 URL。

# windows-phone-7 - Windows Phone 7.5 处理 webrequest 重定向

> ID：15343884
> 
> 赞同：1
> 
> 时间：2013-03-11T16:41:24.663
> 
> 标签：windows-phone-7, redirect, httpwebrequest

今天我在 WP7.5/7.8 中发现了非常奇怪的行为

我正在实施身份验证，我必须发出发布请求，之后我将被重定向到结果页面。

在 WP8 中，我在重定向后得到结果页面。在 WP7.5/7.8 - 我得到重定向结果（StatusCode - 302）。

```
public void MakeRequest() {
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(Consts.Url);
    request.AllowAutoRedirect = true;
    request.Method = "POST";

    request.Headers[HttpRequestHeader.Cookie] = cookie;
    request.BeginGetResponse(new AsyncCallback(ProcessRequest), request);
} 
```

处理响应

```
private void ProcessRequest(IAsyncResult callbackResult) {
     HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
     using (HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult)) {

         if (myResponse.StatusCode != HttpStatusCode.OK) {
             RaiseConnectionError(string.Format("Response from server {0}\n{1}", myResponse.StatusCode, myResponse.StatusDescription));
             return;
            }
      }
 } 
```

我在当前项目的支持中注意到了这种情况。当我使用 ASP.NET MVC 在我的支持上创建相同的情况时，

```
[HttpPost]
public ActionResult Redirect() {
   return RedirectToAction("Index");
}

// index returns simple view 
```

它适用于 WP7.5 和 8。这很奇怪，因为后端适用于 iOS 和 Android。我看到了类似的问题，人们建议使用自定义 UserAgent（如普通浏览器），但它对我不起作用。

# php - bindParam 没有完成 sql 查询

> ID：15343885
> 
> 赞同：0
> 
> 时间：2013-03-11T16:41:26.020
> 
> 标签：php, sql, pdo

我是 PDO 语句的新手，到目前为止，我已经设法使用它，使用准备好的语句和许多东西，直到今天。

我有两个查询，第一个检索一些数据，存储结果，然后第二个查询使用该数据检索最终数据。我正在研究一个设计糟糕的数据库，这就是为什么我必须做一些奇怪的事情。

第一个查询获取体育联赛的开始年份和结束年份。然后，将年份传递给第二个查询以获取这些年份之间的数据（WHERE）。

问题是bindParam似乎不起作用，它没有绑定参数，显示一个？，然后SQL抛出以下异常：

```
Connection failed: SQLSTATE[42000]: Syntax error or access violation:
1064 You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use
near ''0701' AND ?'0630' ORDER BY e.FECHA DESC' at line 5 
```

SQL：

```
$sqlQueryAuxiliar = "SELECT ano_inicio, ano_fin
                     FROM TEMPORADAS
                     ORDER BY ano_inicio DESC
                     LIMIT 1;";

$sqlQuery = "SELECT  e.id, e.JORNADA, DATE_FORMAT(e.FECHA, '%Y-%m-%d'),
             e.HORA, c1.nombre_temporada, c2.nombre_temporada
             FROM    ENCUENTROS AS e
             JOIN    CLUBS AS c1 ON (e.COD_EQUIL = c1.siglas)
             JOIN    CLUBS AS c2 ON (e.COD_EQUIV = c2.siglas)
             WHERE   e.FECHA BETWEEN :anoInicio'0701' AND :anoFinal'0630'
             ORDER BY e.FECHA DESC;"; 
```

这是PHP代码：

```
$this->_db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$stmtAux = $this->_db->prepare($sqlQueryAuxiliar);
$stmtAux->execute();
$fetched = $stmtAux->fetchAll();
$stmtAux = null;
$stmt = $this->_db->prepare($sqlQuery);
$stmt->bindParam(':anoInicio', $fetched[0][0], PDO::PARAM_STR, 12);
$stmt->bindParam(':anoFinal', $fetched[0][1], PDO::PARAM_STR, 12);
$stmt->execute();
while ($row = $stmt->fetch()) {
    $partidos[] = $row;
}
$stmt = null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:43:43.337

您不能以这种方式在查询中连接字符串。将您的查询更改为

```
SELECT  e.id, e.JORNADA, DATE_FORMAT(e.FECHA, '%Y-%m-%d'), e.HORA, c1.nombre_temporada, c2.nombre_temporada
              FROM    ENCUENTROS AS e
              JOIN    CLUBS AS c1 ON (e.COD_EQUIL = c1.siglas)
              JOIN    CLUBS AS c2 ON (e.COD_EQUIV = c2.siglas)
              WHERE   e.FECHA BETWEEN :anoInicio AND :anoFinal
              ORDER BY e.FECHA DESC 
```

和`bindParam`s

```
$stmt->bindValue(':anoInicio', $fetched[0][0] . '0701', PDO::PARAM_STR);
$stmt->bindValue(':anoFinal', $fetched[0][1] . '0630', PDO::PARAM_STR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:43:37.940

按理说，您正在构建无效的 sql：

```
 WHERE   e.FECHA BETWEEN :anoInicio'0701' AND :anoFinal'0630' 
```

将基本建成

```
 WHERE e.FETCHA BETWEEN foobar'0701' AND barbaz'0630' 
```

这是一个语法错误。

你可能想要

```
WHERE e.FETCH BETWEEN concat(:anoInicio, '0701') AND concat(:anoFinal, '0630') 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:43:36.090

如果您使用绑定参数，您也不应该在查询中传递硬编码值。

```
"SELECT  e.id, e.JORNADA, DATE_FORMAT(e.FECHA, '%Y-%m-%d'), e.HORA, c1.nombre_temporada, c2.nombre_temporada
          FROM    ENCUENTROS AS e
          JOIN    CLUBS AS c1 ON (e.COD_EQUIL = c1.siglas)
          JOIN    CLUBS AS c2 ON (e.COD_EQUIV = c2.siglas)
          WHERE   e.FECHA BETWEEN :anoInicio AND :anoFinal
          ORDER BY e.FECHA DESC;"; 
```

# javascript - 清除表单提交上的输入字段

> ID：15343890
> 
> 赞同：38
> 
> 时间：2013-03-11T16:41:46.957
> 
> 标签：javascript, forms, input

我知道这个问题不断被重新提出，我检查了不同的答案并尝试了不同的解决方案，但无济于事。在某些情况下，根据代码的编辑方式，这可能是逐案处理的。

当我点击提交时，我想简单地让我的页面中的两个输入字段清除（&& enter - 除非它是一个单独的事件，那是另一个线程），考虑到我总是按 enter 而不是点击 - 这是一个网站只是为了我的使用。

我当然有一个输入标签，类型提交，它工作正常。但我也已经有了一个特定的 onSubmit 函数：

```
function onSubmitForm(e) {
    e.preventDefault();
    var var1 = document.getElementById("name");
    var var2 = document.getElementById("review");
    arrayOne.push( {name:var1.value,review:var2.value} );
    localStorage.filmDatabase = JSON.stringify(arrayOne);
    document.getElementById("eyedee").innerHTML += '<p>' + '<span class=name>' + var1.value + '</span>' + '<span class=review>' + var2.value + '</span>';
} 
```

我猜它只是放置一行（正确的）代码，很可能是在块的末尾，但我就是想不通。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-11T16:52:04.680

使用表单元素上提供的[重置功能。](https://developer.mozilla.org/en-US/docs/DOM/form.reset)

```
var form = document.getElementById("myForm");
form.reset(); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-11T16:47:24.817

您可以通过将 value 设置为空字符串来清除它们的值：

```
var1.value = '';
var2.value = ''; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-13T13:26:33.027

您可以通过事件访问表单：

```
e.target.reset(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-12T20:41:29.977

仍然使用空字符串，您可以使用：

```
document.getElementById("name").value = '';
document.getElementById("review").value = ''; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-04T14:30:43.893

通过这种方式，您通过他的ID持有一个表格并抛出他的所有内容。这个技术是最快的。

```
document.forms["id_form"].reset(); 
```

# javascript - 我可以通过单击表单 input[type="file"] 来触发双击吗？

> ID：15343895
> 
> 赞同：6
> 
> 时间：2013-03-11T16:41:59.633
> 
> 标签：javascript, jquery, css

我有一个`input`提交文件的表单，我设置了它的样式，因为我不喜欢原生样式。现在，我有一个按钮，单击该按钮会打开对话框以选择文件。在 Firefox 和 Chrome 上单击即可正常工作，但在 IE 中不起作用。该*按钮*需要双击才能在 IE 中打开对话框。

我尝试使用 jQuery 通过单击触发双击：

```
$("input").click(function() { 
    $(this).dblclick(); 
}); 
```

但是，它似乎不起作用。是否有任何其他方法可以触发 IE 双击？

这是演示：http: [//jsfiddle.net/HAaFb/](http://jsfiddle.net/HAaFb/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T16:44:31.403

像这样的东西怎么样：

```
var count=0;
$("input").click(function(e) { 
    count++;
    if(count==2){
         count=0;
    }else{
        e.preventDefault();
    }
}); 
```

演示：http: [//jsfiddle.net/HAaFb/1/](http://jsfiddle.net/HAaFb/1/)

[http://jsbin.com/ukotit/17/edit](http://jsbin.com/ukotit/17/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-07T15:44:31.997

我发现 jQuery 文件上传演示页面实际上重新定位了文件输入字段（在“隐藏”时），以便“浏览”按钮很好地位于“添加文件”按钮的区域内。因此，当您使用 IE 8/9/10 单击该按钮时，只需单击一下即可打开。

[http://blueimp.github.io/jQuery-File-Upload/](http://blueimp.github.io/jQuery-File-Upload/)

在我看到的一个 CSS 中：

```
.fileinput-button input {
...
right: 0px;
...
transform: translate(300px, 0) scale(4);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T16:49:35.940

答案不是触发 dblclick，而是使用 IE 打开文件对话框……对吗？所以我认为解决办法是触发对文件输入的点击（将被隐藏？）

```
$("#formId").find("input[type='file']").trigger('click'); 
```

在你的小提琴中，我这样做：

```
$("input").click(function() { 
    $('input[type="file"]').click(); 
}); 
```

我试试这个

```
$('input[type="file"]').hide().parent().append($('<span />').attr('class', 'filebutton').text('Upload'));
$(".filebutton").click(function() { 
    $('input[type="file"]').click(); 
}); 
```

有了这个 CSS

```
form {
    color:#666;
}
.filebutton {
    content:'upload';
    font:small-caps 15px Georgia;
    letter-spacing:1px;
    border-radius:10px;
    border:1px solid #eee;
    width:100px;
    padding:10px;
    margin:20px;
    text-align:center;
    position:absolute;
    left:0;
    top:0;
    z-index:1;
    background-color:#f8f8f8;
}

.filebutton:hover {
    background-color:#f3f3f3!important;
    color:#c00;
     cursor : pointer;
} 
```

它的工作...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T16:48:26.897

文件输入是 IE 中的本机/ActiveX 组件，因此不能对它们执行事件 - 对于选择输入也是如此。

您真正需要双击做什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-16T12:31:15.093

我知道我可能迟到了，但以防万一其他人偶然发现这篇文章，我能够用这个解决类似的问题：

```
$("#uploadInput").bind('mousedown', function (event) {
    $(this).trigger('click')
}); 
```

在 IE10 和 IE11 上工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T16:47:12.960

我没有检查这个，但我想你需要使用这样的东西：

```
$('input').on('click', function() {
  $(this).trigger('dblclick');
}); 
```

我希望那不是愚蠢的，哈哈。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T16:56:20.120

这是您的 CSS...如果您在 IE 中禁用不透明度和剪辑内容，您将看到实际的浏览按钮位于右侧。

确保在 IE9 中没有使用 filter:opacity，它对我有用。JSFiddle 在 IE7/8 中不起作用，所以我无法测试这些。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-11T16:44:20.397

```
$("input").click(function() { 
    $(this).trigger('dbclick');
}); 
```

# arrays - 用于多个文件夹的 Powershell 备份脚本

> ID：15343896
> 
> 赞同：1
> 
> 时间：2013-03-11T16:42:01.823
> 
> 标签：arrays, function, variables, powershell

我遇到了一个应该作为备份替换的脚本的问题。这只是漏洞的一部分，其他东西有效但依赖于它。

```
$datum = get-date -uformat "%Y-%m-%d"
$backupsrv = "\\192.168.0.5\"
$logpath = "$backupsrv\logs\$datum"
$test1 = "d:\test1","$backupsrv\b2d\test1","Test1"
$test2 = "c:\test2","$backupsrv\b2d\test2","Test2"
$programs = ($test1,$test2)

if (!(test-path -path $logpath))
{new-item $logpath -type directory}

function backup{
    param
    (
        [Parameter(Position=0,Mandatory=$true)]
        [String] $Source,

        [Parameter(Position=1,Mandatory=$true)]
        [String] $Target,

        [Parameter(Position=2,Mandatory=$true)]
        [String] $Name
    )

    if (!(test-path -path $target))
    {new-item $target -type directory}

    $LogFile = "$logpath\$name.log"

    robocopy "$Source" "$Target" /e /mir /np /ns /z /r:3 /w:30 /xf thumbs.db >>$logfile
}
foreach ($program in $programs){
    backup $program} 
```

参数处理总是出错。

谁能帮我解决这个问题？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:41:09.550

它认为您正在传递一个 string[] （实际上是）而不是三个单独的字符串。这实际上有效：

```
foreach ($program in $programs){
    backup $program[0] $program[1] $program[2]
} 
```

如果您*愿意，可以*将您的函数设置为接受字符串数组。

# sql - 如何连接两个表并计算出现的一些值？

> ID：15343897
> 
> 赞同：0
> 
> 时间：2013-03-11T16:42:06.807
> 
> 标签：sql, join, count

我请求帮助是因为我不太了解 SQL。

我需要连接两个表并计算第二个表中的一些值的出现次数，以达到统计表的效果，该表将具有列：

结果表：

*   国家 varchar(20),
*   网站 varchar(20),
*   长时间怀疑违反，
*   确认违规时间长，
*   Confirm_no_violation long,
*   not_determined long,
*   总长

我的结果表需要有前两列（contry 和 site）来自第一个表“Violations”，接下来的 5 列将包含 Status 表中每个可能的 id 值中的“Violations”中出现的 status_id 的数量（计数）。

现在我可以上传我想要实现的表格结果图像： ![结果表](../Images/b3205f59ec5cdfb3e8d325bc0f2841db.png)

所以，我有两个表：违规和状态。

违规行为：

*   身份证长，
*   国家 varchar(20),
*   网站 varchar(20),
*   status_id long, <--这是状态表中的状态id。
*   ...在这种情况下其他列不重要

地位：

*   身份证长，
*   status long 列“status”具有映射到字符串值的值 (1-4)：Suspected Violation (1)、Confirmed Violation (2)、Confirmed No Violation (3)、未确定 (4)

我加入的结果是拥有应该包含列的表：

*   来自违规表：“国家/地区”和“网站”
*   来自状态表：“怀疑违规”、“确认违规”、“确认无违规”、“未确定”、“总计”（其中此列是违规表中出现的计数器）。

我的伪代码和抽象尝试：

```
SELECT v.country, v.site, count(v.status_id == 1), count(v.status_id == 2), count(v.status_id == 3), count(v.status_id == 4)
FROM Violations v JOIN Status s 
ON v.status_id=s.id
GROUP BY v.country, v.site 
```

请帮助我编写正确的 sql 查询，因为这样做有很大的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:52:11.687

您应该能够使用带有`CASE`表达式的聚合函数来获得结果：

```
select v.country,
    v.site,
    SUM(case when s.id = 1 then 1 else 0 end) Total_SuspectedViolations,
    SUM(case when s.id = 2 then 1 else 0 end) Total_ConfirmedViolations,
    SUM(case when s.id = 3 then 1 else 0 end) Total_ConfirmedNoViolations,
    SUM(case when s.id = 4 then 1 else 0 end) Total_NotDetermined,
    COUNT(*) Total
from violations v
inner join status s
    on v.status_id = s.id
group by v.country, v.site 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5d188/1)

这也可以写成没有`JOIN`：

```
select v.country,
    v.site,
    SUM(case when v.status_id = 1 then 1 else 0 end) Total_SuspectedViolations,
    SUM(case when v.status_id = 2 then 1 else 0 end) Total_ConfirmedViolations,
    SUM(case when v.status_id = 3 then 1 else 0 end) Total_ConfirmedNoViolations,
    SUM(case when v.status_id = 4 then 1 else 0 end) Total_NotDetermined,
    COUNT(*) Total
from violations v
group by v.country, v.site 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/5d188/2)

# java - 媒体播放器示例应用程序崩溃

> ID：15343902
> 
> 赞同：1
> 
> 时间：2013-03-11T16:42:18.890
> 
> 标签：java, android

我正在编写一个应用程序，当我尝试通过按主菜单上的按钮加载类/布局时，我收到以下 logcat 错误，我不知道它们是什么意思，谁能告诉我为什么我的应用程序崩溃了？

```
03-11 16:40:06.955: E/AndroidRuntime(18456): FATAL EXCEPTION: main
03-11 16:40:06.955: E/AndroidRuntime(18456): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.famouspeople/com.example.famouspeople.Music}: java.lang.InstantiationException: can't instantiate class com.example.famouspeople.Music; no empty constructor
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.os.Looper.loop(Looper.java:137)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at java.lang.reflect.Method.invokeNative(Native Method)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at java.lang.reflect.Method.invoke(Method.java:511)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at dalvik.system.NativeStart.main(Native Method)
03-11 16:40:06.955: E/AndroidRuntime(18456): Caused by: java.lang.InstantiationException: can't instantiate class com.example.famouspeople.Music; no empty constructor
03-11 16:40:06.955: E/AndroidRuntime(18456):    at java.lang.Class.newInstanceImpl(Native Method)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at java.lang.Class.newInstance(Class.java:1319)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.app.Instrumentation.newActivity(Instrumentation.java:1057)
03-11 16:40:06.955: E/AndroidRuntime(18456):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
03-11 16:40:06.955: E/AndroidRuntime(18456):    ... 11 more
03-11 16:40:16.560: I/Process(18456): Sending signal. PID: 18456 SIG: 9 
```

代码：

```
public class Music implements OnCompletionListener{
MediaPlayer mediaPlayer;
boolean isPrepared = false;

public Music(AssetFileDescriptor assetDescriptor){
    mediaPlayer = new MediaPlayer();
    try{
        mediaPlayer.setDataSource(assetDescriptor.getFileDescriptor(), assetDescriptor.getStartOffset(), assetDescriptor.getLength());
        mediaPlayer.prepare();
        isPrepared = true;
        mediaPlayer.setOnCompletionListener(this);
    } catch(Exception ex){
        throw new RuntimeException("Couldn't load music, uh oh!");
    }
}

public Music(FileDescriptor fileDescriptor){
    mediaPlayer = new MediaPlayer();
    try{
        mediaPlayer.setDataSource(fileDescriptor);
        mediaPlayer.prepare();
        isPrepared = true;
        mediaPlayer.setOnCompletionListener(this);
    } catch(Exception ex){
        throw new RuntimeException("Couldn't load music, uh oh!");
    }
}

public void onCompletion(MediaPlayer mediaPlayer) {
    synchronized(this){
        isPrepared = false;
    }
}

public void play() {
    if(mediaPlayer.isPlaying()){
        return;
    }
    try{
        synchronized(this){
            if(!isPrepared){
                mediaPlayer.prepare();
            }
            mediaPlayer.start();
        }
    } catch(IllegalStateException ex){
        ex.printStackTrace();
    } catch(IOException ex){
        ex.printStackTrace();
    }
}

public void stop() {
    mediaPlayer.stop();
    synchronized(this){
        isPrepared = false;
    }
}

public void switchTracks(){
    mediaPlayer.seekTo(0);
    mediaPlayer.pause();
}

public void pause() {
    mediaPlayer.pause();
}

public boolean isPlaying() {
    return mediaPlayer.isPlaying();
}

public boolean isLooping() {
    return mediaPlayer.isLooping();
}

public void setLooping(boolean isLooping) {
    mediaPlayer.setLooping(isLooping);
}

public void setVolume(float volumeLeft, float volumeRight) {
    mediaPlayer.setVolume(volumeLeft, volumeRight);
}

public void dispose() {
    if(mediaPlayer.isPlaying()){
        stop();
    }
    mediaPlayer.release();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:46:17.923

您需要定义无参数构造函数，否则系统不知道如何实例化它。Dalvik VM 正在寻找零参数构造函数。如果您在服务中定义一个或多个参数。

```
public Music() {
   ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:46:45.020

Android 工具正在尝试创建一个实例，`com.example.famouspeople.Music`为此它需要一个默认构造函数。这就是它失败的原因。`public com.example.famouspeople.Music(){}`在 Music 类中创建一个默认构造函数会有所帮助。

```
public class Music implements OnCompletionListener{
  public Music ()
  {
  }
  public boolean  setFileDescriptor(FileDescriptor fileDescriptor){
    //set file descriptor for the current instance
  }
  public boolean   init(){
    //do initialisation of player
  }
} 
```

`init()`设置文件描述符后调用。但是整个命名约定对您的包/类来说似乎很混乱。

# orm - 添加到 ArrayCollection 时，教义未链接到拥有对象

> ID：15343903
> 
> 赞同：1
> 
> 时间：2013-03-11T16:42:19.373
> 
> 标签：orm, doctrine, mapping, associations

尝试`Requirement`在我的网站上创建新对象时遇到问题。在我的`Requirement`对象中，我有以下 Doctrine 字段：

```
/**
 * @ORM\OneToMany(targetEntity="Verification", mappedBy="requirement", cascade="persist", orphanRemoval=true)
 */
private $verifications; 
```

我有以下方法：

```
public function addVerification($verification) {
    $this->verifications->add($verification);
} 
```

在对象的构造函数中，我初始化`ArrayCollection`：

```
/**
 * Constructor
 */
public function __construct() {
    parent::__construct();
    $this->verifications = new ArrayCollection();
} 
```

但是，当尝试创建一个新`Requirement`对象时，一切正常，除了`Verifications`创建的对象没有链接到该`Requirement`对象。`Requirement`对象和对应的对象都`Verification`被插入到数据库中，但是对象的`requirement_id`字段`Verification`是`NULL`.

我需要手动设置对象`requirement`中的字段`Verification`吗？`add`当我使用方法时，Doctrine 不会自动为我做这件事`ArrayCollection`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:52:12.667

不，它们不一定会更新。如果您有双向关系，您必须自己维护非欠方。您可以在文档中阅读此内容：

[http://docs.doctrine-project.org/en/2.1/reference/association-mapping.html](http://docs.doctrine-project.org/en/2.1/reference/association-mapping.html)

我很难在没有看到需求和验证定义的情况下给你详细信息。

# c++ - Linux 上缺少包含文件的编译器选项

> ID：15343905
> 
> 赞同：0
> 
> 时间：2013-03-11T16:42:32.883
> 
> 标签：c++, linux, gcc

自从我处理 C/C++ 以来已经有一段时间了，如果这是一个非常容易回答的问题，请原谅我——我只是不太知道如何“谷歌”它。

我有一个文件，`"MyFile.h"`其中包括 file `"includedFile.h"`。但是，编译器找不到该文件。请看下图：

![项目 foo 的文件/文件夹结构。](../Images/3ea9b7c489c3b4c632c6a87ab74f3e92.png)

我正在做的是将项目从旧的 Solaris 机器转移到 Linux 机器。奇怪的是它可以在 Solaris 机器上按原样运行，但 Linux 有点混乱。

我用于该项目的`makefile`那个也没有改变，这让我认为它可能是一个编译器选项......

那么我如何告诉 Linux 上的编译器该包含文件在哪里，或者我如何在其中指定它`"MyFile.h?"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:44:54.910

使用 gcc 和 clang，您可以使用以下命令指定包含路径`-I`：

`g++ -o myprogram main.cc extra.cc -I/usr/include/boost -I/my/extra/include/files`

您*可以**在*文件中指定完整路径，如`#include "/path/to/my/includedfile.h"`，但我强烈反对这样做，因为它会强制所有想要编译您的代码的人都遵守该目录布局。

也相关：阅读以下链接了解gcc`#include <file>`之间的区别：http: [//gcc.gnu.org/onlinedocs/cpp/Include-Syntax.html](http://gcc.gnu.org/onlinedocs/cpp/Include-Syntax.html)`#include "file"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:46:29.013

假设您使用的是 g++，则传递带有`-I`标志的路径。

```
g++ ..... -I<a path to your includes> -I<another path to includes> 
```

# python - 这个python电话簿程序有一些问题

> ID：15343909
> 
> 赞同：0
> 
> 时间：2013-03-11T16:42:37.687
> 
> 标签：python

我想写一个python程序，但是当我输入s或S时，就出错了。

```
#!/usr/bin/python

phonebook = {}

while True:
    option = raw_input('Welcome use pyphonebook: add(A) / search(S)?')
    if option == 'A' or 'a':
        print 'Add a contact'
        name = raw_input('Enter a name:')
        if phonebook.__contains__(name):    
            print 'Contact %s is already in phonbook' % name
        else:
            num = raw_input('Enter phone number:')
        phonebook[name] = num

elif option == 'S' or 's':  
    print 'Search a contact'
    name = raw_input('Enter a name:')
    if name in phonebook:
        print "%s's phone number is %s" % (name, phonebook[name])
    else:
        print 'Not found'       
print phonebook 
```

当我输入 S 或 s 时，它会打印“添加联系人”。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:45:37.903

你的测试：

```
if option == 'A' or 'a': 
```

实际上是这样工作的：

```
if (option == 'A') or 'a': 
```

由于 'a' 始终为 True，因此此测试始终通过。

你想要

```
if (option == 'A') or (option == 'a') 
```

或者

```
if option in ('A', 'a'): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:44:39.527

您正在测试错误的东西，请使用：

```
if option.lower() == 'a': 
```

也许：

```
if option in ('A', 'a'): 
```

表达式`option == 'A' or 'a'`被解释为：

```
(option == 'A') or 'a' 
```

`True`并且在 python中始终考虑非空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:46:22.870

if`a == 7 or 5` 并不意味着如果`a == 7 or if a == 5` 它意味着`(a==7) or 5` 因为 5 是非假的，所以它总是真的

与您的比较相同的是它的'A'和'a'而不是7和5....

# python - 将函数 = 设置为变量，这会导致函数在每次调用变量时执行吗？

> ID：15343911
> 
> 赞同：1
> 
> 时间：2013-03-11T16:42:49.203
> 
> 标签：python

这是一个菜鸟问题，我相当确定该功能只会执行一次，但我想清楚。我正在使用 python 和 urllib 登录网站。登录后，有一个与我的帐户关联的用户 ID，可让我浏览该网站。但是我不想在每次调用变量时都登录，所以我想知道调用变量是否会导致再次登录，或者登录函数是否仅在我显式运行我的登录函数时才执行？

```
def login(username,pw):
     #some calls to HTTP server using urllib
     return user_id

user_id = login('abc@hotmail.com','mypassword') 

def search():
    #calls to HTTP to perform a search on a page on the website
    #I need to reference user_id and I want to know if user_id will simply be 
    # the integer user_id or if it will call the login function each time I reference it 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:45:02.830

引用`user_id`只会返回您分配给它的原始值；该`login()`函数不会被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:45:29.303

像您所做的那样分配一个变量会立即评估右侧部分，并且只评估一次。使用该变量时不会有进一步的重新评估。

# iis - IIS7.5：有没有办法将 Require SSL 和 URL Rewrite Module 一起用于 https？

> ID：15343915
> 
> 赞同：2
> 
> 时间：2013-03-11T16:42:59.693
> 
> 标签：iis, ssl, url-rewriting, iis-7.5, url-rewrite-module

在 IIS7.5 中，我有一个将 http 请求重定向到 https 的 URL 重写规则。如果我选中“需要 SSL”，我会得到 403 Unauthorized 而不是重定向，这是有道理的。

有没有办法一起使用它们？还会有好处吗？我假设没有，因为每个 http 请求都会被重定向，但我在这里检查以防我错了。

这安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:53:24.997

这两个选项的工作方式非常不同。

如果您使用 Require SSL 选项，则必须通过 HTTPS 访问您网站的每个页面，这意味着（如您所见），如果您忘记了 HTTPS 并尝试使用 HTTP 访问，您将获得 403 Unauthorized .

如果您使用 URL 重写模块，您可以将某些页面或整个网站设置为重定向到 HTTPS（如果需要，部分返回到 HTTP），如果用户忘记了 HTTPS 并点击了 HTTP，他/她将重定向到 HTTPS 网址。

至于让他们一起工作，有一个解决方案，但我真的不明白这一点：

> [...] 您需要禁用网站的“要求 SSL”复选框。如果您不想这样做，那么您可以在 IIS 中创建两个网站——一个使用 http 绑定，另一个使用 https 绑定——然后将此规则添加到使用 http 绑定的站点的 web.config 文件中。

[http://blogs.iis.net/ruslany/archive/2009/04/08/10-url-rewriting-tips-and-tricks.aspx](http://blogs.iis.net/ruslany/archive/2009/04/08/10-url-rewriting-tips-and-tricks.aspx)
（部分`4\. Redirect to HTTPS`）

# python - 识别具有连续大写字母的行

> ID：15343918
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:43:06.137
> 
> 标签：python, regex

我正在寻找在 python 的一行中搜索大写单词的逻辑，就像我有一个 *.txt：

```
aaa
adadad     
DDD_AAA    
Dasdf Daa 
```

我只想搜索彼此后面有 2 个或更多大写单词的行（在上述情况下`DDD_AAA`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:53:11.013

干得好：

```
import re

lines = open("r1.txt").readlines()

for line in lines:
    if re.match(r'[^\w]*[A-Z]+[ _][A-Z]+[^\w]*', line) is not None:
        print line.strip("\n") 
```

输出：

```
DDD_AAA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:51:20.093

假设您对“大写单词”的定义是由两个或多个大写字母（非数字）字符组成的字符串，*即* 对字母数字字符的补充集，*即*，您正在寻找*像这样的正则表达式*`[A-Z]``[^A-Z]` *`[^a-zA-Z0-9]`*

 **```
\b[A-Z]{2,}\b.*\b[A-Z]{2,}\b 
```

我说*喜欢*是因为上述内容并不完全正确：`\b`将下划线计`_`为单词字符。将`\b`s替换为`[^a-zA-Z0-9]`s 包裹在环视断言中（使它们的宽度为零，如`\b`），您就有了正确的正则表达式：

```
(?<=[^a-zA-Z0-9]|^)[A-Z]{2,}(?=[^a-zA-Z0-9]).*(?<=[^a-zA-Z0-9])[A-Z]{2,}(?=[^a-zA-Z0-9]|$) 
```

[这是一个 Rubular 演示。](http://rubular.com/r/BXws7Zff2X)

最后，如果你考虑一个单字符的词，一个“词”，那么就简单地`{2,}`去掉量词：

```
(?<=[^a-zA-Z0-9]|^)[A-Z]+(?=[^a-zA-Z0-9]).*(?<=[^a-zA-Z0-9])[A-Z]+(?=[^a-zA-Z0-9]|$) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:49:13.853

```
print re.findall("[A-Z][a-zA-Z]*\s[A-Z][a-zA-Z]",search_text) 
```

应该可以匹配两个都以大写字母开头的单词

对于您的具体示例

```
lines = []
for line in file:
   if re.findall("[A-Z][a-zA-Z]*\s[A-Z][a-zA-Z]",line): lines.append(line)

print lines 
```

基本上研究正则表达式！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T16:50:00.297

正则表达式是要走的路：

```
import re
pattern = "([A-Z]+_[A-Z]+)" # matches CAPITALS_CAPITALS only
match = re.search(pattern, text)
if match: print match.group(0) 
```

你必须弄清楚你到底在寻找什么。**

# c# - 使用 JQuery 构建 Windows 软件

> ID：15343919
> 
> 赞同：0
> 
> 时间：2013-03-11T16:43:06.757
> 
> 标签：c#, java, jquery, eclipse, visual-studio

有没有办法让 Windows 独立程序让 JQuery 为其 UI 提供动力？由于它将是一个文件管理器，我需要能够访问本地文件和文件夹，因此由于访问本地文件系统的限制，在浏览器中使用 HTML5+CSS+JQuery 是不可能的。如果可能的话，我会最舒服地使用 c# 和 VS2008 环境。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T16:45:32.367

[您可以在HTA 小程序](http://msdn.microsoft.com/en-us/library/ms536496%28v=VS.85%29.aspx)中使用 jQuery 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:30:03.283

如果你准备好尝试java，你可以试试javaFX。使用 jQuery UI 的 JavaFX 示例 DatePicker 可以在这里找到[DatePicker](https://gist.github.com/jewelsea/1422815)

# python - 为某些点着色不同的颜色矩阵 matplotlib

> ID：15343923
> 
> 赞同：0
> 
> 时间：2013-03-11T16:43:18.157
> 
> 标签：python, colors, matplotlib

我有一个我在 matplotlib 中绘制的矩阵`self.ax.imshow(arr,cmap=plt.cm.Greys_r, interpolation = 'none')`，目前我使用它们都是相同的颜色。但是我有另一个数组，它的大小与为矩阵绘制的大小相同。该数组包含从 0 到 1 的数字。该数组中的每个数字对应于矩阵上的一个图。我怎样才能使数字0到1的数组对应于矩阵上绘图的颜色

我有一个`numberlist = [(1,34),(2,35),(5,78) etc]`到 310 的数组然后我做

```
data = np.array(number list)
N=data.max()+5
arr=np.ones((N,N),dtype='bool')
arr[data[:,1],data[:,0]]=0 
```

然后是上面的 imshow

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:53:07.880

根据您的编辑，我相信您的意思是：

*   你有一个`boolean`数组告诉你是否应该绘制一个点。
*   你有一个`float`数组，告诉你该点应该是什么颜色，如果它被绘制的话。

我想调用这些数组：`arr_bool`和`arr_val`.

将它们相乘，你会得到一个 float when`True`但一个零 when `False`，我们可以使用他们的产品着色：

```
N = 10
arr_bool = np.random.random_integers(0,1,(N,N))
arr_val  = np.random.rand(N,N)
imshow(arr_bool*arr_val, cmap = cm.spectral_r, interpolation = 'nearest') 
```

因此，如果我们只绘制`arr_bool`它，它将如下所示： ![布尔数组](../Images/9ffba72d7c3c48f9ed4cb9997908de85.png) 如果我们只绘制颜色，或者`arr_val`: ![值数组](../Images/55e54cb44e43ccad4a0a54f904468e16.png) 将它们放在一起，`arr_bool * arr_val`: ![彩色阵列](../Images/5e3216b10377dba566761935faa1f0e9.png)

# javascript - 为什么我的像素操作脚本这么慢？

> ID：15343934
> 
> 赞同：2
> 
> 时间：2013-03-11T16:43:58.680
> 
> 标签：javascript, html, html5-canvas

我试图创建一些蓝色波浪，但如果我运行它，浏览器就会释放。仅当我将画布的大小减小到 80 和 60 时，它才有效。

```
<canvas id="canvas" width="800" height="600"></canvas> 
```

脚本：

```
var canvas=document.getElementById('canvas'), ctx = canvas.getContext('2d');
var imageData = ctx.createImageData(canvas.width, canvas.height);

for(var i=0; i<imageData.width; i++) {
    for(var j=0; j<imageData.height; j++) {
        imageData.data[((imageData.width * j) + i) * 4] = 0;
        imageData.data[((imageData.width * j) + i) * 4+1] = 0;
        imageData.data[((imageData.width * j) + i) * 4+2] = 127*Math.sin(i/100)+128;
        imageData.data[((imageData.width * j) + i) * 4+3] = 255;
        ctx.putImageData(imageData, 0, 0);
    }
} 
```

我错了什么？为什么这么慢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T17:02:40.643

主要的减速是因为您在每次迭代时都在绘制图像。

移动这条线

```
ctx.putImageData(imageData, 0, 0); 
```

在你的循环之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:52:22.067

**查看疯狂的快速测试**：http: [//jsfiddle.net/powtac/t8JA2/8/](http://jsfiddle.net/powtac/t8JA2/8/)

```
 imageData.data[((imageData.width * j) + i) * 4] = 0;
    imageData.data[((imageData.width * j) + i) * 4+1] = 0;
    imageData.data[((imageData.width * j) + i) * 4+2] = 127*Math.sin(i/100)+128;
    imageData.data[((imageData.width * j) + i) * 4+3] = 255; 
```

可以写成：

```
 tmp = ((imageData.width * j) + i) * 4;
    imageData.data[tmp] = 0;
    imageData.data[tmp + 1] = 0;
    imageData.data[tmp + 2] = 127*Math.sin(i/100)+128;
    imageData.data[tmp + 3] = 255; 
```

我还包括了 not_john 将繁重的任务移出循环的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T16:49:51.687

它缓慢的一个原因是因为您正在冗余地执行某些计算。

```
var value = (imageData.width * j) + i); // <--- cache this value 
```

保存属性查找

```
for(var j=0, k=imageData.height; j<k; j++) { 
```

# box-api - 启用仅发送电子邮件地址作为协作者？

> ID：15343936
> 
> 赞同：0
> 
> 时间：2013-03-11T16:44:02.320
> 
> 标签：box-api

我们通过电子邮件访问共享了一个文件夹。希望通过电子邮件地址将接收限制为协作者列表。默认情况下，Box.com 要求每个协作者回复邀请电子邮件并创建 Box.com 帐户。

我们的合作者之一将是一个使用仅发送电子邮件地址发送的系统。

是否可以将只发送电子邮件地址设置为协作者？也许是我们可以“自动接受”它们的一种方式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:51:35.233

目前，所有电子邮件地址都必须是确认的 Box 帐户。一种可能的解决方法是手动确认这些 Box 帐户的电子邮件地址。

# wpf - WPF MVVM 实现

> ID：15343939
> 
> 赞同：-1
> 
> 时间：2013-03-11T16:44:22.360
> 
> 标签：wpf, mvvm

我刚刚开始使用`WPF`MVVM 模式。我浏览了一些与 MVVM 相关的材料。

但是，我必须从事的项目有一个 MVVM 的实现，它似乎与我读过的非常不同（可能也不正确，不确定）。

该实现将所有视图（控件或窗口）实现为 ResourceDictionary，其中视图中的所有控件都位于“样式”元素中。

此类 ResourceDictionary 背后的代码具有所有 DependencyProperty 和命令（ViewModel 没有其他类）。此外，类（背后的代码）如何从 Windows.Controls.Control 类继承。

这是正确的实现吗？如果不是，您认为证明这是错误实现的原因是什么。

我可能错了，但我看到的原因如下：

1.  实现视图`ResourceDictionary`是不正确的，资源不是用于创建自定义视图。
2.  在后面的代码中包含最少的代码是 MVVM 的重要方面之一，它允许松散耦合的架构。
3.  由于所有视图都继承自 Windows.Controls.Control，因此为视图编写单元测试用例会很困难。

我是正确的还是有其他一些原因导致这个实现不正确（或者我错了，这可能是在 MVVM 中实现 MVVM 的一种方式`WPF`）。

您的意见受到高度赞赏。

下面是一个示例代码：（XAML）

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:Presentation"
>
<Style TargetType="{x:Type local:FirstControl}">
    <Setter Property="IsTabStop" Value="False"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:FirstControl}">
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="490" DataContext="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneTime}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="TEST TEXT" FontWeight="DemiBold"/>

                        <Button Command="{Binding Path=CloseCommand, Mode=OneTime}"
                                        Width="48" Height="30"/>
                    </StackPanel>
                </ScrollViewer>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

代码背后：

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Input;

namespace Presentation
{
    /// <summary>
    /// View-model
    /// </summary>
    public class FirstControl : Control
    {
        static FirstControl()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(FirstControl), new FrameworkPropertyMetadata(typeof(FirstControl)));
        }

        public FirstControl()
        {
            CloseCommand = new DelegateCommand(OnCloseCommand);
        }

        private void OnCloseCommand()
        {
            // Write code to close application.
        }

        public static readonly DependencyProperty CloseCommandProperty = DependencyProperty.Register("CloseCommand", typeof(ICommand), typeof(FirstControl));
        public ICommand CloseCommand
        {
            get { return (ICommand)GetValue(CloseCommandProperty); }
            set { SetValue(CloseCommandProperty, value); }
        }
    }
} 
```

希望这可以帮助。

这`DelegateCommand`是一个允许将命令逻辑委托给作为参数传递的方法的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:08:59.180

MVVM 的主要目的是让每一层都得到充分的测试，而不需要“更高”的层。

您应该能够测试模型，并且在该测试中，您应该能够成功完成从数据存储中发送和检索数据所需的所有任务。您的模型测试不应该需要任何视图或视图模型来完成。

您应该能够在不需要任何 UI 代码或其他视图级别代码的情况下测试您的视图模型。您的视图模型应该能够在逻辑上执行您的应用程序需要执行的所有操作，而无需任何用户交互或 UI 代码。理想情况下，您应该能够使用提供可预测响应的模拟模型类来测试您的 ViewModel。

# mysql - 如何在 Maven 中启动 MySQL 数据库以用于我们的 JUnit 测试？

> ID：15343940
> 
> 赞同：1
> 
> 时间：2013-03-11T16:44:24.853
> 
> 标签：mysql, maven, testing, junit, liquibase

我们正在使用 Maven 3.0.3、MySql 5.5、JUnit 4.8.1 和 Liquibase。这就是我们想要做的。我想启动一个 MySQL 数据库，针对它运行我们的 liquibase 数据库脚本，然后运行我们的 JUnit 测试，使用这个新创建的数据库作为数据源。如果有人知道使用 Maven 执行此操作的方法，请知道您发布的任何示例脚本都会获得比您知道如何处理更多的选票——以及您应得的尊重。

我意识到 H2 内存数据库支持 MySQL 模式，但我们不想使用它。我们希望尽可能接近真实的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:20:58.130

脚步：

1.  使用[Maven SQL 插件](http://mojo.codehaus.org/sql-maven-plugin/)创建数据库。
2.  使用[Maven liquibase 插件](http://www.liquibase.org/manual/maven)来运行你的脚本。
3.  运行你的测试（标准的肯定）。
4.  再次使用 Maven SQL 插件删除数据库，以便下次重新开始。

# c# - 使用 MediaElement 在 Windows Phone 8 上流式传输音频

> ID：15343943
> 
> 赞同：0
> 
> 时间：2013-03-11T16:44:34.223
> 
> 标签：c#, windows-phone-8, audio-streaming

我正在尝试使用 MediaElement 将音频从在线源流式传输到 Windows Phone 8 应用程序。

我在可视化树中有 MediaElement，它适用于本地文件，但是当我尝试通过 URL 使用文件时，没有任何播放，并且出现 MediaFailed 异常。媒体失败错误的代码为 3100。它既不适用于 AAC 或 MP3，也适用于视频。

我的代码：

```
sound.Source = new Uri(url, UriKind.RelativeOrAbsolute);
      sound.MediaFailed += sound_MediaFailed;
      sound.AutoPlay = true; 
```

也许不可能以这种方式做到这一点，但如果有人能提供帮助，将不胜感激。

更新：

我尝试使用的文件是[http://rapidshare.com/files/2276097672/firework.aac](http://rapidshare.com/files/2276097672/firework.aac)。此文件可在手机本地工作，但不能在线工作。也许我误解了，我不能直接从这个网络位置流式传输。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:55:55.350

该文件无法访问。不是真正的答案，因为这是一个愚蠢的错误，但问题已经解决。

# javascript - 在backbone.js 中指定一个url 函数

> ID：15343944
> 
> 赞同：0
> 
> 时间：2013-03-11T16:44:34.223
> 
> 标签：javascript, backbone.js

我正在尝试为这样的骨干模型指定一个函数 url：

```
var Directory = Backbone.Model.extend({
defaults: {
  path: '/',
  entries: new DirectoryEntries
},

initialize: function() {
  this.listenTo(this, 'change:path', this.fetch);
  this.fetch();
},

parse: function(response, options) {
  if (response != null) {
    for (var i = 0; i < response.length; ++i) {
      this.get('entries').add(new DirectoryEntry(response[i]));
    }
  }
  this.trigger('change');
},

url: function() {
  return '/svn-ls.php?path=' + this.get('path');
}, 
```

在我的初始化函数中对 fetch() 的初始调用似乎工作正常，但是当在路径更改时调用 fetch 时，主干会尝试发出以下 JSON 请求：`http://localhost:8000/function%20()%20%7B%20%20%20%20%20%20return%20'/svn-ls.php?path='%20+%20this.get('path');%20%20%20%20}`

即，它似乎试图使用 this.url 而不是实际调用它。

有人知道这里有什么问题吗？

**编辑：**我将`listenTo`调用更改为以下内容：

```
 var self = this;
  this.listenTo(this, 'change:path', function() { self.fetch(); }); 
```

现在一切似乎都正常了。不过，我不知道为什么绑定 this.fetch 会直接搞砸。

# c - 文件存在时 fopen 失败

> ID：15343952
> 
> 赞同：3
> 
> 时间：2013-03-11T16:44:54.970
> 
> 标签：c, linux, fopen, file-permissions

我在一个大型 Linux 守护程序中运行了以下代码片段。我正在尝试调试到日志文件，但是当日志文件存在时，`fopen`失败

```
if ( ( debugFILE = fopen( "/home/lala/debug.log", "a" ) ) == NULL )
{
    perror("error: ");
} 
```

我得到的错误是：“权限被拒绝”。

这是特定文件的 ls 的输出：

```
----rw---- 1 lala lala 0 Mar 11 18:26 debug.log 
```

首先，为什么首先使用这些权限创建文件。第二，为什么 fopen 在创建时成功，但在打开时没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T16:56:38.403

如果文件不存在，“a”选项将始终创建一个文件，如果成功则返回一个有效指针。它是根据进程的 umask 设置创建的 - 在您的情况下，该进程正在创建一个没有适当权限的文件，因此下一次`fopen`失败。如果您不想弄乱 umask，只需在以下代码之前和之后调用它`fopen`：

```
chmod("/home/lala/debug.log", 0644); 
```

`chmod`如果文件不存在，以这种方式调用就可以了，它什么也不做（除了`errno`适当的设置）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T20:33:17.543

> `fopen``0666`创建具有由进程修改的权限的文件`umask`。

因此，如果您没有在程序中或在程序完成后手动更改文件权限。

该过程很可能有一个错误的umask。

您是`umask`在程序中还是在调用进程的上下文中设置？您的`umask -S`输出实际上看起来不错（看起来像 umask `002`）。

# javascript - 嵌套 iframe，又名 iframe Inception

> ID：15343955
> 
> 赞同：43
> 
> 时间：2013-03-11T16:45:01.447
> 
> 标签：javascript, jquery, iframe

使用 jQuery 我正在尝试访问 div id="element"。

```
<body>
    <iframe id="uploads">
        <iframe>
            <div id="element">...</div>
        </iframe>
    </iframe>
</body> 
```

所有 iframe 都在同一个域上，没有 www / non-www 问题。

我已经成功地选择了第一个 iframe 中的元素，但没有选择第二个嵌套 iframe 中的元素。

我已经尝试了一些事情，这是最近的（也是一次非常绝望的尝试）。

```
var iframe = jQuery('#upload').contents();
var iframeInner = jQuery(iframe).find('iframe').contents();
var iframeContent = jQuery(iframeInner).contents().find('#element');

// iframeContent is null 
```

编辑：为了排除时间问题，我使用了点击事件并等待了一段时间。

```
jQuery().click(function(){
   var iframe = jQuery('#upload').contents().find('iframe');
   console.log(iframe.find('#element')); // [] null
}); 
```

有任何想法吗？谢谢。

更新：我可以像这样选择第二个 iframe...

```
var iframe = jQuery('#upload').contents().find('iframe'); 
```

现在的问题似乎是 src 是空的，因为 iframe 是用 javascript 生成的。所以选择了 iframe 但内容长度为 0。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-21T19:11:50.373

问题是，您提供的代码将不起作用，因为`<iframe>`元素必须具有“src”属性，例如：

```
<iframe id="uploads" src="http://domain/page.html"></iframe> 
```

可以`.contents()`用来获取内容：

`$('#uploads).contents()`将允许您访问第二个 iframe，但如果该 iframe 是“INSIDE”`http://domain/page.html`文档，则 #uploads iframe 已加载。

为了测试我是对的，我创建了 3 个名为 main.html、iframe.html 和 noframe.html 的 html 文件，然后选择了 div#element 就好了：

```
$('#uploads').contents().find('iframe').contents().find('#element'); 
```

由于您需要等待 iframe 加载资源，因此该元素将不可用会有延迟。此外，所有 iframe 都必须在同一个域中。

希望这可以帮助 ...

这是我使用的 3 个文件的 html（将“src”属性替换为您的域和 url）：

main.html

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>main.html example</title>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script>
        $(function () {
            console.log( $('#uploads').contents().find('iframe').contents().find('#element') ); // nothing at first

            setTimeout( function () {
                console.log( $('#uploads').contents().find('iframe').contents().find('#element') ); // wait and you'll have it
            }, 2000 );

        });
    </script>
</head>
<body>
    <iframe id="uploads" src="http://192.168.1.70/test/iframe.html"></iframe>
</body> 
```

iframe.html

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>iframe.html example</title>
</head>
<body>
    <iframe src="http://192.168.1.70/test/noframe.html"></iframe>
</body> 
```

noframe.html

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>noframe.html example</title>
</head>
<body>
    <div id="element">some content</div>
</body> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-25T06:21:21.450

`var iframeInner = jQuery(iframe).find('iframe').contents();`

`var iframeContent = jQuery(iframeInner).contents().find('#element');`

iframeInner 包含来自

```
<div id="element">other markup goes here</div> 
```

和 iframeContent 将找到里面的元素

```
 <div id="element">other markup goes here</div> 
```

（find 不在当前元素上搜索）这就是它返回 null 的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T19:21:17.067

嘿，我得到了一些似乎在做你想做的事情。它涉及一些肮脏的复制，但有效。[你可以在这里](http://champi.alwaysdata.net/Test.html)找到工作代码

所以这是主要的html文件：

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            Iframe = $('#frame1');

            Iframe.on('load', function(){
                IframeInner = Iframe.contents().find('iframe');

                IframeInnerClone = IframeInner.clone();

                IframeInnerClone.insertAfter($('#insertIframeAfter')).css({display:'none'});

                IframeInnerClone.on('load', function(){
                    IframeContents = IframeInner.contents();

                    YourNestedEl = IframeContents.find('div');

                    $('<div>Yeepi! I can even insert stuff!</div>').insertAfter(YourNestedEl)
                });
            });
        });
    </script>
</head>
<body>
    <div id="insertIframeAfter">Hello!!!!</div>
    <iframe id="frame1" src="Test_Iframe.html">

    </iframe>
</body>
</html> 
```

正如你所看到的，一旦第一个 iframe 被加载，我就会得到第二个并克隆它。然后我将它重新插入到 dom 中，这样我就可以访问 onload 事件了。加载此内容后，我会从非克隆内容中检索内容（也必须加载，因为它们使用相同的 src）。然后，您可以随心所欲地处理内容。

这是 Test_Iframe.html 文件：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div>Test_Iframe</div>
    <iframe src="Test_Iframe2.html">
    </iframe>
</body>
</html> 
```

和 Test_Iframe2.html 文件：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div>I am the second nested iframe</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T06:31:56.647

您应该对稍后渲染的元素使用 live 方法，例如颜色框、隐藏字段或 iframe

```
$(".inverter-value").live("change",function() {
     elem = this
    $.ajax({
      url: '/main/invertor_attribute/',
      type: 'POST',
      aysnc: false,
      data: {id: $(this).val() },
      success: function(data){
       // code
      },
      dataType: 'html'
    });
  }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T16:48:29.690

你可能有时间问题。您的 document.ready 推荐可能在第二个 iFrame 加载之前触发。您没有足够的信息来提供更多帮助 - 但如果这似乎是可能的问题，请告诉我们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-28T15:56:10.547

我猜你的问题是 jQuery 没有加载到你的 iframe 中。

最安全的方法是依靠纯基于 DOM 的方法来解析您的内容。

或者，从 jQuery 开始，然后在你的 iframe 中，测试一次 if `typeof window.jQuery == 'undefined'`，如果它是真的，jQuery 没有在它里面启用并且回退到基于 DOM 的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T11:33:13.380

I think the best way to reach your div:

```
var your_element=$('iframe#uploads').children('iframe').children('div#element'); 
```

It should work well.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-28T15:17:57.007

如果浏览器支持 iframe，则 iframe 内的 DOM 来自相应标签的 src 属性。iframe 标签内的内容用作浏览器不支持 iframe 标签的后备机制。

参考：[http ://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

# magento - 在 magento 1.7 中搜索销售订单网格重定向到仪表板

> ID：15343967
> 
> 赞同：2
> 
> 时间：2013-03-11T16:45:32.093
> 
> 标签：magento, magento-1.7

我使用自定义模块在 Magento 中向 Sales_Order_Grid 添加新列，但如果我搜索 Order_Id，页面将​​重定向到仪表板。

如果我再次尝试选择销售/订单，我会收到错误消息：

```
a:5:{i:0;s:104:"SQLSTATE[23000]: Integrity constraint violation: 1052 Column 'increment_id' in where clause is ambiguous";i:1;s:6229:"#0 
```

我不知道如何解决这个问题，真的可以请一些指导吗？

这是 Grid.php 代码：

```
<?php
class Excellence_Salesgrid_Block_Adminhtml_Sales_Order_Grid extends Mage_Adminhtml_Block_Sales_Order_Grid
{

    protected function _addColumnFilterToCollection($column)
    {
        if ($this->getCollection()) {
            if ($column->getId() == 'shipping_telephone') {
                $cond = $column->getFilter()->getCondition();
                $field = 't4.telephone';
                $this->getCollection()->addFieldToFilter($field , $cond);
                return $this;
            }else if ($column->getId() == 'shipping_city') {
                $cond = $column->getFilter()->getCondition();
                $field = 't4.city';
                $this->getCollection()->addFieldToFilter($field , $cond);
                return $this;
            }else if ($column->getId() == 'shipping_region') {
                $cond = $column->getFilter()->getCondition();
                $field = 't4.region';
                $this->getCollection()->addFieldToFilter($field , $cond);
                return $this;
            }else if ($column->getId() == 'shipping_postcode') {
                $cond = $column->getFilter()->getCondition();
                $field = 't4.postcode';
                $this->getCollection()->addFieldToFilter($field , $cond);
                return $this;
            }else if($column->getId() == 'product_count'){
                $cond = $column->getFilter()->getCondition();
                $field = ( $column->getFilterIndex() ) ? $column->getFilterIndex() : $column->getIndex();
                $this->getCollection()->getSelect()->having($this->getCollection()->getResource()->getReadConnection()->prepareSqlCondition($field, $cond));
                return $this;
            }else if($column->getId() == 'skus'){
                $cond = $column->getFilter()->getCondition();
                $field = 't6.sku';
                $this->getCollection()->joinSkus();
                $this->getCollection()->addFieldToFilter($field , $cond);
                return $this;
            }else{
                return parent::_addColumnFilterToCollection($column);
            }
        }
    }

    protected function _prepareColumns()
    {

        $this->addColumnAfter('shipping_description', array(
                'header' => Mage::helper('sales')->__('Shipping Method'),
                'index' => 'shipping_description',
        ),'shipping_name');
        $this->addColumnAfter('method', array(
                'header' => Mage::helper('sales')->__('Payment Method'),
                'index' => 'method',
                'type'  => 'options',
                'options' => Mage::helper('payment')->getPaymentMethodList()
        ),'shipping_description');

        $this->addColumnAfter('shipping_city', array(
                'header' => Mage::helper('sales')->__('Shipping City'),
                'index' => 'shipping_city',
        ),'method');

        $this->addColumnAfter('shipping_telephone', array(
                'header' => Mage::helper('sales')->__('Shipping Telephone'),
                'index' => 'shipping_telephone',
        ),'method');

        $this->addColumnAfter('shipping_region', array(
                'header' => Mage::helper('sales')->__('Shipping Region'),
                'index' => 'shipping_region',
        ),'method');

        $this->addColumnAfter('shipping_postcode', array(
                'header' => Mage::helper('sales')->__('Shipping Postcode'),
                'index' => 'shipping_postcode',
        ),'method');

        /*$this->addColumnAfter('product_count', array(
                'header' => Mage::helper('sales')->__('Product Count'),
                'index' => 'product_count',
                'type' => 'number'
        ),'increment_id');

        /*$this->addColumnAfter('skus', array(
                'header' => Mage::helper('sales')->__('Product Purchased'),
                'index' => 'skus',
        ),'increment_id');*/

        return parent::_prepareColumns();

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T07:23:17.437

这就是我的情况：

$collection->addFilterToMap('increment_id', 'main_table.increment_id');

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T17:33:59.213

看起来您正在向管理销售网格添加更多列？听起来您正在使用包含针对第二个表的连接的集合，您需要将表别名添加到 where 语句中，并使用 increment_id 列定义，所以`table_alias.increment_id`.

要检查这一点，并假设调用`$this->getCollection()`from`Excellence_Salesgrid_Block_Adminhtml_Sales_Order_Grid`返回集合，请从集合中获取选择对象：

`$select = $this->getCollection()->getSelect();`

希望您在 IDE 中使用 xdebug，并且可以在代码中设置断点。如果是这样设置一个断点并检查`$select`上面的行所拉的对象。在此对象中，您将看到一个`_parts`数组，该数组描述了您的 select 语句的构造方式。在其中，您将看到一个`from`数组，其中包含有关作为语句一部分的表的信息。如果您有`JOIN`，这将包含多个条目。

在此处，您还可以看到`where`哪个将描述作为语句一部分的 where 子句 - 这可能是问题所在。您需要识别`from`数组中正确表的别名，然后在其中`where`添加子句，而不是执行以下操作：

`$this->getCollection()->getSelect()->where('increment_id = ?', $id);`

而是这样做：

`$this->getCollection()->getSelect()->where('table_alias.increment_id = ?', $id);`

# flash - AS3 ArgumentError：错误 #1063：预期为 2，得到 0

> ID：15343973
> 
> 赞同：0
> 
> 时间：2013-03-11T16:45:57.980
> 
> 标签：flash, actionscript, argument-error

我不断收到此错误：ArgumentError：错误＃1063：代码上的参数计数不匹配：：SimonPad（）。预期为 2，得到 0。我不知道发生了什么，尤其是 uint。任何帮助将不胜感激。我在下面显示了两个代码块。它们基于 Actionscript 3.0 当我试图运行这些代码时，我没有在舞台上得到任何东西。该代码应该显示四个不同颜色的框，但它根本不起作用。请帮忙。

```
package code 
```

{

```
import flash.display.MovieClip;
import flash.events.Event;

public class Main extends MovieClip
{

    private var pads:Array = new Array();

    public function Main()
    {
        var pad:SimonPad;

        pad = new SimonPad(0xAA0000, 0xFF0000);
        pad.x = 5;
        pad.y = 5;
        addChild(pad)
        pads.push(pad)

        pad = new SimonPad(0x0000AA, 0x6666FF);
        pad.x = 205;
        pad.y = 205;
        addChild(pad)
        pads.push(pad)

        pad = new SimonPad(0xAAAA00, 0xFFFF00);
        pad.x = 5;
        pad.y = 205;
        addChild(pad)
        pads.push(pad)

        pad = new SimonPad(0x00AA00, 0x00FF00);
        pad.x = 205;
        pad.y = 205;
        addChild(pad)
        pads.push(pad)

        addEventListener(Event.ENTER_FRAME, theFrame);
    }

    private function theFrame(e:Event):void
    {
        for (var i:int = 0; i < pads.length; i++) 
        {
            (pads[i] as SimonPad).update();
        }
    }
} 
```

}

```
package code 
```

{

```
import flash.display.Sprite;
import flash.display.Shape;
import flash.events.MouseEvent;

public class SimonPad extends Sprite
{

    private var dark:Shape;
    private var light:Shape;

    public function SimonPad(darkColor:uint, lightColor:uint)
    {
        dark = new Shape();
        dark.graphics.beginFill(darkColor, 1);
        dark.graphics.drawRect(0,0,190,190);
        dark.graphics.endFill();
        addChild(dark);

        light = new Shape();
        light.graphics.beginFill(lightColor, 1);
        light.graphics.drawRect(0,0,190,190);
        light.graphics.endFill();
        addChild(light);

        light.alpha = 0;

        mouseChildren = false;

        addEventListener(MouseEvent.CLICK, downClicked);
    }

    private function downClicked (e:MouseEvent):void
    {
        flash();
    }

    public function flash():void
    {
        light.alpha = 2;
    }

    public function update():void
    {
        if (light.alpha > 0)
        {
            light.alpha *= 0.85;

            if (light.alpha < 0.0125)
            {
                light.alpha = 0;
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:50:09.520

看起来`SimonPad`您在设计时确实在您的舞台上手动放置了一个实例。请跟踪您的 Flash 项目中手动放置的`SimonPad`实例。此外，为了获得框架，您可以尝试这个技巧：在`SimonPad()`函数中，除了为构造函数参数提供默认值之外，您还可以添加以下行：

```
var e:Error=new Error();
trace(e.getStackTrace()); 
```

这将为您提供一个跟踪，`at MainTimeline.frameXXX`其中包含具有帧号的某些内容，或者`at Sprite.constructChildren() at Sprite() at SomeClass()`为您提供有关哪个类的库原型具有`SimonPad`引用的提示。

# android - 在位图上绘制背景，我将在其中绘制要导出到文件的视图

> ID：15343974
> 
> 赞同：0
> 
> 时间：2013-03-11T16:46:02.433
> 
> 标签：android, canvas, view, bitmap, drawable

我正在将视图导出到文件中。

我的问题是我使用的是 Holo Light 主题，但导出的文件有深色背景。

编码：

```
Bitmap b = Bitmap.createBitmap(totalWidth, totalHeight, Bitmap.Config.ARGB_8888);
Canvas mCanvas = new Canvas(b);
miVista.draw(mCanvas);          
FileOutputStream fos = new FileOutputStream(file);
b.compress(Bitmap.CompressFormat.JPEG, 100, fos); 
```

我已经尝试了很多方法来将它涂成黑色以外的其他颜色，例如`drawcolor`,`setpixels`等，但我找不到我的问题的正确答案。

[链接到您在终端中可以看到的图片](https://lh6.googleusercontent.com/-Ph9F5sPUWNU/UT7gify4eDI/AAAAAAAAE0o/KrdfZ5mLpvE/s651/CapturaPantalla.PNG)。

[链接到导出的图片](https://lh5.googleusercontent.com/-ZMJjxXP1jl8/UT7giQnxpeI/AAAAAAAAE0s/t5p4DgVRJF4/s628/Ju_2013_03_12_07_48_38.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:08:14.503

清除画布例如

```
mCanvas.drawColor(Color.WHITE); 
```

那么它将有白色背景。你期待什么样的背景？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:10:11.947

我在另一篇文章中找到了解决方案： [将视图转换为位图...](https://stackoverflow.com/questions/5536066/convert-view-to-bitmap-on-android?rq=1)

```
Bitmap b = Bitmap.createBitmap(totalWidth, totalHeight, Bitmap.Config.ARGB_8888);
Canvas mCanvas = new Canvas(b);
Drawable bgDrawable =miVista.getBackground();
if (bgDrawable!=null) 
    bgDrawable.draw(mCanvas);
else 
    mCanvas.drawColor(Color.WHITE);
miVista.draw(mCanvas); 
```

解决方案是使用 Drawable 对象...

# c# - 使用什么类型将 FileUpload 数据传递给类

> ID：15343981
> 
> 赞同：1
> 
> 时间：2013-03-11T16:46:27.643
> 
> 标签：c#, webforms, asp.net-4.5

我正在创建一个独立的类文件，它将处理我网站的文件上传，因此任何页面都可以调用它，而无需我一遍又一遍地重写代码，但我不确定将什么对象类型传递给我构建的函数在我的独立类中，因此它将传递用户选择上传的一个或多个文件（我允许多文件上传）。谁能帮我吗？我正在构建一个 Web Forms asp.Net 4.5 Web 应用程序。

当前 FuleUploader.cs 中的代码由于“找不到 httpPostedFile”错误而无法构建。FileUploader.cs 文件是构建到我的网络应用程序中的类库项目的一部分

```
using System; 
```

使用 System.Web；

命名空间 FFInfo.Classes { 公共类 FileUploader {

```
 public void UploadFile(HttpPostedFile File)
    {
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:59:02.183

我会选择`Stream`,`byte[]`或`HttpPostedFile`对象。您现在可以多次调用您的方法进行多次上传

```
public void UploadFile(HttpPostedFile myFile)
{
   myFile.SaveAs(....); //Save to location
} 
```

用法

```
myFileUploader.UploadFile(postedFiles[i]); 
```

字节和流应该可以在任何地方工作 - Windows、控制台或 Web

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:00:24.447

这是一个非常笼统的问题，所以这里有一个非常笼统的答案：

如果您正在处理未知类型`byte[]`的文件，请使用 来表示文件数据。毕竟，每个文件都由字节组成，因此这是您可以使用的最佳通用表示。它还允许您使用最相关的类，例如 System.IO.File。

# linux - Bash 算术表达式 (( 在复合语句 [[ 返回 true？

> ID：15343989
> 
> 赞同：0
> 
> 时间：2013-03-11T16:46:38.507
> 
> 标签：linux, bash, shell, math, expression

包含在 '((' 中的简单算术表达式在复合条件表达式 '[[' 中时计算结果为真

```
HAVE_SRC=1
[[ (( $HAVE_SRC == 1 )) && -d $( pwd ) ]]
echo $? # returns 0 => true

HAVE_SRC=0
[[ (( $HAVE_SRC == 1 )) && -d $( pwd ) ]]
echo $? # returns 1 => false

HAVE_SRC=1
[[ (( $HAVE_SRC )) && -d $( pwd ) ]]
echo $? # returns 0 => true 
```

**问题：**

```
HAVE_SRC=0
[[ (( $HAVE_SRC )) && -d $( pwd ) ]]
echo $? # returns 0 => true ???? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T17:01:58.390

不要`(( ... ))`在里面使用`[[ ... ]]`：

```
(( HAVE_SRC == 1 )) && [[ -d $pwd ]] 
```

要查看 bash 如何解释您给出的表达式，请尝试运行它们

```
set -xv 
```

# javascript - 视图中的脚本仅影响列表中的一项

> ID：15343991
> 
> 赞同：0
> 
> 时间：2013-03-11T16:46:44.820
> 
> 标签：javascript, jquery, asp.net-mvc, list

我在这里有这个视图，它会根据单选按钮的状态影响文本框字段：

```
<script src="/Scripts/jquery-1.7.1.min.js"
        type="text/javascript"></script>
<script type="text/javascript">
    function doState1() {
        alert("state1 radio button has been clicked");
        $("#field1").attr("disabled", "disabled");
        $("#field2").removeAttr("disabled");
        $("#field3").removeAttr("disabled");
    }
    function doState2() {
        alert("state2 radio button has been clicked");
        $("#field1").removeAttr("disabled");
        $("#field2").attr("disabled", "disabled");
        $("#field3").attr("disabled", "disabled");
    }

    $(document).ready(function ()
    {
        alert("The document is ready");
        if ($("#state1").is(":checked")) {
            doState1();
        } else {
            doState2();
        }

        $("#state1").click(function (){
            doState1();
        });
        $("#state2").click(function () {
            doState();
        });
    });
</script> 
```

主要问题是我的视图由项目列表填充，并且只有列表中的第一项实际受此脚本影响。为什么？我试过在这里和那里放（这个）声明，认为它会影响提到的项目，但它并没有改变任何事情。

这是 for 循环，以便您了解实际发生的情况：

```
<p>
    @using (Html.BeginForm("ConfirmSendItems", "Inventory"))
    {
        (...)

        <table>

           (...)

            @for (int i = 0; i < Model.Count; i++)
            {
                <p>
                    <tr>
                        <td>@Html.DisplayFor(x => x[i].otrObj.objName)</td>
                        <td>@Html.RadioButtonFor(x => x[i].m_state1, "State 1", new {id = "state1", style ="width: 50px"})</td>
                        <td>@Html.RadioButtonFor(x => x[i].m_state1, "State 2", new {id = "state2", style ="width: 50px"})</td>
                        <td>
                            @Html.TextBoxFor(x => x[i].m_Field1, new{id = "field1", style = "width:200px"})
                        </td>
                        <td>
                            @Html.TextBoxFor(x => x[i].m_Field2, new {id = "field2", style = "width:200px"})
                        </td>
                        <td>
                            @Html.TextBoxFor(x => x[i].m_Field3, new {id ="field3", style = "width:200px" })
                            @Html.ValidationMessageFor(x => x[i].m_FixedPrice, "Fixed Price must be a number.")
                        </td>
                    (...)
                </p>
            }
        </table>
        <input type="submit" value="Ready!"/>
    }
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:52:35.540

ID 是单数的。只有一个项目可以有 id。

您将不得不在选择器中使用类名，并且必须构建逻辑来选择正确的项目。

# eclipse-plugin - 适用于 Juno 的 Glassfish 3.1.2.2 Eclipse 插件

> ID：15343993
> 
> 赞同：0
> 
> 时间：2013-03-11T16:46:48.883
> 
> 标签：eclipse-plugin, glassfish-3, eclipse-juno

不知何故，在某个时候，我为 Juno 安装了这个版本的 Eclipse Glassfish 插件：

Oracle GlassFish 服务器工具 2.0.1.201207240829

我也在尝试帮助同事安装它。但是市场上的最新版本是

Oracle GlassFish 服务器工具 2.0.1.201201241920

我想我一定是从[这里得到的，在](http://dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/)[这个接受的分析器](https://stackoverflow.com/a/13771636/19269)中引用了它，但那个站点现在已经死了。[这个问题](https://stackoverflow.com/questions/12623190/glassfish-adapter-in-eclipse-juno-missing)也提到了那个网站

有谁知道适用于 Juno 和 Glassfish 3.1.2.2 的 Eclipse Glassfish 插件到底发生了什么，和/或我们可以获得我似乎拥有的版本的不同地方？

或者，告诉我在哪里可以向维护这个插件的团队报告这个问题，而不是 SO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:59:03.530

Oracle 当前正在迁移 GlassFish 插件 - 有关详细信息，请参阅 [https://blogs.oracle.com/piotrik/entry/migration_of_eclipse_plugins_java](https://blogs.oracle.com/piotrik/entry/migration_of_eclipse_plugins_java) 。

旧的更新站点[http://dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/](http://dlc.sun.com.edgesuite.net/glassfish/eclipse/juno/)再次运行（尽管在 Web 浏览器中打开 URL 时显示为空）。

# google-reseller-api - 将 PHP 与 Google 应用转销商 API 结合使用的凭据无效

> ID：15343994
> 
> 赞同：1
> 
> 时间：2013-03-11T16:46:50.280
> 
> 标签：google-reseller-api

我正在尝试构建几个网页来收集有关我们 GApps 客户的信息。

我拥有获取 Oauth 令牌所需的所有代码，它甚至似乎可以工作（至少我可以使用日历 API 读取我的所有日​​历事件）。当我尝试访问经销商 api 时，我得到了令牌，但是如果我尝试访问[userinfo](https://www.googleapis.com/oauth2/v1/userinfo/)，传递 access_token 参数我得到一个`Invalid Credentials`错误。

不幸的是，我还没有找到太多关于 PHP 的可用文档，但是在完成所有身份验证程序之后，我试图通过 CURL 获取数据......

有什么想法有什么问题或我应该做些什么不同的事情吗？

* * *

仍然卡住了，所以我想我会添加我现在正在运行的代码：

```
<?php
require_once '../google-api-php-client/src/Google_Client.php';
require_once '../google-api-php-client/src/contrib/Google_Oauth2Service.php';
require_once '../google-api-php-client/src/contrib/Google_ResellerService.php';
session_name('reseller');
session_start();

$debug=1;

$clientId='******.apps.googleusercontent.com';
$clientSecret='******';
$redirectURI='*****'; //links to the directory wehere the script is
$key='********';
$scopes='https://www.googleapis.com/auth/apps.order.readonly';
n
$client = new Google_Client();
$client->setApplicationName("Google Reseller PHP Starter Application");

$client->setClientId($clientId);
$client->setClientSecret($clientSecret);
$client->setRedirectUri($redirectURI);
$client->setDeveloperKey($key);
$client->setScopes($scopes);

if (isset($_GET['code'])) {
if($debug)  echo "we have a code! <br />";

  $client->authenticate($_GET['code']);
  $_SESSION['token'] = $client->getAccessToken();
  //echo $_SESSION['token']."<br/>";
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
  exit();
}

if (isset($_SESSION['token'])) {
  $client->setAccessToken($_SESSION['token']);
echo "access token settato<br/>";
}

if ($client->getAccessToken()) {
  $mytoken=json_decode($_SESSION['token'], true);

  echo "DEBUG SESSION token:".$_SESSION['token']."<br />";
  echo "DEBUG token: ".$mytoken['access_token']."<br />";

  $domain='******'; //mydomain
  //key id defiend above
  $fields=array('customerId');
  $url="https://www.googleapis.com/oauth2/v1/userinfo/?access_token=".$mytoken['access_token'];

  echo $url."<br />";

  $ch = curl_init($url);
  $scopes&state=antani&access_type=online&approval_prompt=auto");
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_HTTPHEADER, array(
    'Authorization: Bearer: '.$mytoken['access_token'],
    ));
  curl_setopt($ch, CURLOPT_REFERER, "*******"); //server URL
  $data = curl_exec($ch);
  curl_close($ch);

 $resellerService = new Google_ResellerService($client);

if ($debug){
echo "<pre>";
  print_r($data);
echo "</pre>";
}

} else {
  $authUrl = $client->createAuthUrl();
  print "<a class='login' href='$authUrl'>Connect Me!</a>";
}

if (isset($_GET['logout'])) {
  unset($_SESSION['token']);
}

session_destroy();
?> 
```

关于为什么我仍然收到“权限不足”错误的任何想法？

谢谢！