# StackOverflow 问答 13394000-13394999

# c++ - c++ find_if lambda

> ID：13394000
> 
> 赞同：41
> 
> 时间：2012-11-15T08:45:26.693
> 
> 标签：c++, lambda

下面的代码有什么问题？如果结构的第一个成员等于 0，它应该在结构列表中找到一个元素。编译器抱怨 lambda 参数不是谓词类型。

```
#include <iostream>
#include <stdint.h>
#include <fstream>
#include <list>
#include <algorithm>

struct S
{
    int S1;
    int S2;
};

using namespace std;

int main()
{
    list<S> l;
    S s1;
    s1.S1 = 0;
    s1.S2 = 0;
    S s2;
    s2.S1 = 1;
    s2.S2 = 1;
    l.push_back(s2);
    l.push_back(s1);

    list<S>::iterator it = find_if(l.begin(), l.end(), [] (S s) { return s.S1 == 0; } );
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-15T09:02:58.007

代码在 VS2012 上运行良好，只有一个建议，通过引用传递对象而不是通过值传递：

```
list<S>::iterator it = find_if(l.begin(), l.end(), [] (const S& s) { return s.S1 == 0; } ); 
```

# java - “LocalBean”和“Remote”都可以在一个bean上注释吗？

> ID：13394002
> 
> 赞同：4
> 
> 时间：2012-11-15T08:45:31.450
> 
> 标签：java, jakarta-ee, ejb

我知道这听起来可能很初级，但我想知道以下单例 bean：

```
@Startup
@Singleton
@LocalBean
public class MyServiceBean {
    public String sayHello() { return "Hello"; }
} 
```

现在我认为“远程”客户端可能需要使用这个 bean，所以我想给这个 bean 添加一个远程接口：

```
@Remote
public interface MyService {
    String sayHello();
} 
```

我可以让我的 bean 实现新的远程接口吗？

如果“MyServiceBean”实现了“MyService”远程接口，它会变成一个带有“remote-interface-view”的bean……但是我在网上搜索后，你们都说带有注解“LocalBean”的bean是一个“无界面视图”。

那能行吗？或者我应该创建一个本地接口并删除 LocalBean 注释？

更深层次的思考......如果“远程视图”，“本地视图”和“无界面视图”是三种类型的视图，它们都可以存在于一个bean中......？我可以有一个实现所有这些的 bean 吗？

```
@Local
@Remote
@LocalBean
public class Possible implements PosLoca, PosRemote {} 
```

....我真的很困惑...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:15:47.767

是的，一个 bean 可以公开多个视图（远程业务、本地业务、无接口）。

该组件可以是相同的 - 您只需添加另一种访问它的方式。

看一下*EJB 3.1 FR*规范：

**4.4.2.2 会话 bean 公开多个客户端视图（第 86 页）。**

```
package com.acme;

@Singleton(name="Shared")
@LocalBean
@Remote(com.acme.SharedRemote.class)
public class SharedBean { ... } 
```

一个注意事项 - 我认为您发布的示例不会开箱即用。您正在使用`@Remote`并且`@Local`未指定接口引用。我不认为容器现在将哪个接口是什么。指定`@Remote(clazz)`或将接口本身注释为`@Remote`。

# c++ - 内存泄漏 C++ 字符串

> ID：13394008
> 
> 赞同：4
> 
> 时间：2012-11-15T08:46:00.367
> 
> 标签：c++, string

我有一堂课，例如

```
class test{

   public:
      somedatahere
      test();
     ~test();
   private:
       string mystring;

} 
```

在此类中，构造函数读取变量 mystring 中文件的内容。我的问题是：

当类破坏时 mystring 会被释放还是我必须手动释放它？我怎样才能释放 mystring ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T08:48:20.093

由于`mystring`它是对象的一部分，因此当对象出现时，它将超出范围。没有必要“手动”释放它，事实上你不能。

如果是指向使用(or )`mystring`分配的内存的指针，这将有所不同，那么您必须从析构函数中手动(or ) 它。`new``new[]``delete``delete[]`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T08:48:16.217

你只需要释放你分配的东西。`new`应与 匹配，`delete`并由`new[]`匹配`delete[]`。

如果你不做任何一个，那么一个表现良好的班级不应该要求你做另一个。是的，标准库表现良好。

所以不，你不需要做任何事情。让`std::string`实例自行清理。（当然，按照它的例子，并确保你自己的类也这样做）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:50:02.143

假设您的构造函数只是直接分配到`mystring`没有任何其他分配或做一些奇怪的事情，那么是的，它将被析构函数正确释放。

# java - android中的onlongclicklistener和计时器

> ID：13394011
> 
> 赞同：0
> 
> 时间：2012-11-15T08:46:15.427
> 
> 标签：java, android, timer, onclicklistener, onlongclicklistener

我正在尝试编写一个android游戏，

我希望我的人在我按下时会跳舞。

并且在压制过程中得分不断增加。

如何解决分数问题？

计时器可以帮忙吗？

onlongclick 和 onclick 之间有什么区别？

这是我的代码：

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.FrameLayout;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.support.v4.app.NavUtils;
import android.text.Layout;

public class pi extends Activity {
     OnTouchListener listen1;  
     RelativeLayout f1;
     int count = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_pi);
        listen1 = new OnTouchListener() {       
            private TextView txt;
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                txt = (TextView)findViewById(R.id.textView1);
                txt.setText("aaaaa");
                        return false;
            }

        };

        f1 = (RelativeLayout)findViewById(R.id.titlescreenframe);
        f1.setOnTouchListener(listen1);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_pi, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:00:56.110

onTouch 是点击和释放。onLongClick 是单击并按住，直到 onLongClick 事件触发。

要保持分数，请覆盖 onTouch()。当手指放下时，启动一个开始增加分数的计时器。当手指向上。停止任务。

看[这里](https://stackoverflow.com/questions/4597690/android-timer-how)和[这里](http://www.androidsnippets.com/handle-touch-events-ontouchevent)

# sorting - 快速排序的实现

> ID：13394014
> 
> 赞同：0
> 
> 时间：2012-11-15T08:46:23.367
> 
> 标签：sorting, quicksort

```
#include<stdio.h>
#include<iostream.h>
#include<conio.h>

void quicks(int *arr,int x,int pivot,int lo,int hi);
void swap1(int *x,int *y);
int main()
{
int *arr = new int[7];
arr[0] = 23;
arr[1] = 3;
arr[2] = -23;
arr[3] = 45;
arr[4] = 12;
arr[5] = 76;
arr[6] = -65;
quicks(arr,7,0,1,6);
for(int i = 0;i<7;i++)
    std::cout << arr[i] <<"\t";
getch();
return 0;
 }
 void quicks(int *arr,int x,int pivot,int lo,int hi)
 {
int i = lo,j = hi;
if(pivot < x-1)
{
while(i <= hi)
{
    if(arr[i] <= arr[pivot])
        i++;
    else
        break;
}
while(j >= lo)
{
    if(arr[j] >= arr[pivot])
        j--;
    else    
        break;
}
if( i > j)
{
    swap1(&arr[j],&arr[pivot]);
    lo = pivot+1;
    hi = x - 1;
    quicks(arr,x,pivot,lo,hi);
}
else if(i == j)
{
    pivot = pivot + 1;
    lo = pivot+1;
    hi = x - 1;
    quicks(arr,x,pivot,lo,hi);
}
else if(i < j)
{
    swap1(&arr[j],&arr[i]);
    lo = i + 1;
    hi = j - 1;
    quicks(arr,x,pivot,lo,hi);
}
}
else
{
    printf("\nDONE\n");
}
}

void swap1(int *x,int *y)
{
int temp;
temp = *x;
*x = *y;
*y = temp;
} 
```

嗨，我写了一个程序来实现快速排序。但是程序进入了一个无限循环。在 Quicks 函数中，用于递增和递减 i 和 j 的 while 循环是问题。谁能告诉我这有什么问题快速排序的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:14:36.390

使用您的输入和算法进行快速试运行，您会注意到一段时间后您会进入无限循环。

您正在从 开始循环`quicks(arr,7,0,1,6);`。尝试通过将“最右边”元素设置为低，即 0。这肯定不能解决您的问题，因为该算法似乎确实存在缺陷，高的位置根本没有改变，并且我一直移动到高。你试图使一个非常简单的任务复杂化。

`i`会从`lo`到`pivot`。`j`从`hi`到`pivot`。_ 找到正确的位置后`pivot`，您将向前移动1，`pivot`并`lo`重复该过程。

看一下这张图片，您将了解所需的算法： ![在此处输入图像描述](../Images/5c1592f781653c5b14c706c8bd8d4e34.png)

# jquery - 不工作 jQuery.get()

> ID：13394023
> 
> 赞同：0
> 
> 时间：2012-11-15T08:47:14.830
> 
> 标签：jquery, ajax, get

```
$.get('./mods/webim_offline_email.php', {firstname: $('#webim_firstname').val(), email: $('#webim_email').val(), message: $('#webim_message').val()}, function (data){
    alert(1);
    $('#webim_offline_inputs').fadeOut(200);
    $('#webim_message_div').fadeOut(200);
    $('#webim_buttons').fadeOut(200);
    $('#webim_offline_sent').fadeIn(200);
}).success(function(){
    alert("second success");
}).error(function(){
    alert("error");
}).complete(function(){
    alert("complete");
}); 
```

请求 *.php 通过，函数内部的所有内容都可以正常工作。电脑上好友请求也通过了，但是jQuery认为他没有通过，功能没有通过，`alert("error")`. 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:16:10.347

问题解决了。对不起。朋友有没有端口的链接，答案不是来自页面。

# asp.net - 在 ASP.Net 中以编程方式更改控件的 ID 是否可以

> ID：13394024
> 
> 赞同：1
> 
> 时间：2012-11-15T08:47:17.140
> 
> 标签：asp.net, clientid

以编程方式编辑 ASPX 文件中控件的 ID 是否错误？

例如，如果我有一个这样定义的 aspx 页面：

```
<div runat="server" ID="id1" ClientIDMode="Static"> 
```

如果我在我的代码隐藏文件的 page_load() 中执行以下操作，我会遇到任何问题：

```
Control c = Page.FindControl("id1");
c.ID = "id2"; 
```

我这样做没有任何错误，我只是想知道使用上面的代码是否会遇到问题。

您可能会问我为什么要更改 id，答案是我有一个包含上述元素的 MasterPage。使用此母版页的每个内容页面都需要该 div 的不同 id，因为该 id 在我的 css 文件中用作选择器。

另一个问题是：我已阅读 MSDN 中的“只有字母数字字符和下划线字符 (_) 的组合是此属性的有效值”。那是因为当您在 aspx 页面中指定 id 而不是以编程方式分配的 id 时，我认为这只是一个限制。任何人都可以确认吗？

非常感谢

# java - Java：提高同步函数的线程速度

> ID：13394025
> 
> 赞同：1
> 
> 时间：2012-11-15T08:47:22.377
> 
> 标签：java, multithreading, synchronized

```
for(int ii = 0; ii < 3; ii++)
    executor.execute(new someClass); 
```

对比

```
someFunction();
someFunction();
someFunction(); 
```

在哪里

```
public static void someFunction(){
    synchronized(lock){
       for(int ii = 0; ii < long.MAX_VALUE; ii++);
    }
}

private class someClass implements Runnable {

   public void run() {          
     someFunction(); //someFunction() is  a synchronized function
   }
} 
```

抱歉，这可能是一个相当模糊的问题。我有一个同步的 someFunction()，我想依次调用 3 次，另一次使用 3 个线程，每个线程运行 someFunction() 的任务。由于它是同步的，一次只能访问 1 个线程，因此 3 个线程与 1 个线程的速度差异几乎相同。我也不允许修改或不同步 someFunction()。我想知道是否有任何方法可以从我使用线程的方式加速多线程方式？也许通过线程如何排队或其他什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T08:53:41.373

不可以。没有办法在同一时间多次运行同步方法（在同一个对象上）。这就是 synchronized 关键字的意义所在。

同步可能成为性能瓶颈，但减少这种瓶颈的唯一方法是减少需要在这些关键部分完成的工作量。通常代码过于保守，也许并不是所有的东西都需要在那个同步块中。但这需要对代码有深入的理解和重写，没有什么可以通过一些神奇的设置来调整（如果你删除了太多的同步，你可能会破坏事情；获得正确的多线程代码是很困难的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:00:24.453

想一个最能描述您想要实现的实际情况。给我们一个你正在尝试实施的例子。这将有助于理解，从而为您提供有用和实用的解决方案。

这个问题很模糊，可以有多种解释。

# listview - XAML：使用语义缩放和 ListView MakeVisible 不会滚动

> ID：13394028
> 
> 赞同：3
> 
> 时间：2012-11-15T08:47:45.050
> 
> 标签：listview, window, microsoft-metro, winrt-xaml, semantic-zoom

我在语义缩放控件中嵌入了一个 ListView 控件：

```
<SemanticZoom x:Name="diarySemanticZoom" Grid.Row="1">
            <SemanticZoom.ZoomedOutView>
                <GridView>
                    ...
                </GridView>
            </SemanticZoom.ZoomedOutView>
            <SemanticZoom.ZoomedInView>
                    <ListView 
                        x:Name="diaryListView" 
                        AutomationProperties.AutomationId="diaryListView"
                        AutomationProperties.Name="Grouped Items"
                        Grid.Row="1" 
                        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
                        SelectionMode="Single" 
                        ScrollViewer.IsHorizontalScrollChainingEnabled="False"
                        ScrollViewer.IsVerticalScrollChainingEnabled="False"
                        ScrollViewer.HorizontalScrollBarVisibility="Visible"
                        >
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapGrid Orientation="Vertical" 
                                MaximumRowsOrColumns="1" x:Name="insideWrapGrid"/>
                        </ItemsPanelTemplate> ... 
```

当 XAML 加载时，我想滚动到 Listview 内的项目

```
protected override void LoadState(Object navigationParameter, 
                     Dictionary<String, Object> pageState)
{
    var diaryDaysModel = DiaryDays.DiaryDayList;
    /* Group the days */
    var daysViewModelGroup = from ddm in diaryDaysModel
                             group ddm by new { ddm.MonthName, ddm.DayNo } into grp
                             orderby grp.Key.DayNo
                             select new { Key = grp.Key, Items = grp };

    itemsViewSource.Source = daysViewModelGroup;
    diaryListView.SelectedIndex = 5;
    var zoomLoc = new SemanticZoomLocation() { Item = diaryListView.SelectedItem };
    diarySemanticZoom.ZoomedInView.MakeVisible(zoomLoc);
    diaryListView.MakeVisible(zoomLoc);

} 
```

到目前为止我已经尝试了很多选项，但似乎没有一个可以移动滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T21:31:10.897

您应该可以滚动。如果要垂直滚动，请编辑 ScrollViewer.IsVerticalScrollBarEnabled="Enabled"。

# android - 如何为 ActionBar 元素设置文本颜色？

> ID：13394029
> 
> 赞同：0
> 
> 时间：2012-11-15T08:47:46.623
> 
> 标签：android

我需要更改操作栏中项目的文本颜色：

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#FFFFFF</item>
    <item name="android:actionBarTabTextStyle">@style/CustomTabTextStyle</item>
    <item name="android:textColor">#000000</item>
</style>

<style name="CustomTabTextStyle" parent="@android:style/TextAppearance.Holo">
    <item name="android:actionMenuTextColor">#000000</item>
</style> 
```

我可以更改背景颜色，但我无法更改文本颜色。请问，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T21:32:39.723

actionMenuTextColor 需要设置在样式的顶层，而不是嵌套样式中。此外，如果您使用的是 ActionBarSherlock，则 <v11 的前面不需要“android:”，>=v11 的前面不需要。

对于 <v11：

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#FFFFFF</item>
    <item name="actionMenuTextColor">#000000</item>
</style> 
```

对于 >v11：

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#FFFFFF</item>
    <item name="android:actionMenuTextColor">#000000</item>
</style> 
```

# android - 关于 LayoutInflater 和 inflate

> ID：13394031
> 
> 赞同：2
> 
> 时间：2012-11-15T08:48:00.393
> 
> 标签：android

我有一个 TextView 组件。我想在每个 Activity 中显示 TextView，并且不想在每个布局中编写此组件。

```
public class Test extends Activity {
     /** Called when the activity is first created. */
     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.alarm);

        LayoutInflater flater = LayoutInflater.from(this);
         View view = flater.inflate(R.layout.toolbar_clearbalk, null);
         TextView text=(TextView)view.findViewById(R.id.now_time);

     } 
```

now_time 是我找到的组件。我该怎么做才能让 TextView 在当前界面中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:16:54.433

如果您不想在所有布局中添加包含标签，

您可以使用抽象基类，然后从抽象类扩展您的所有新类，

```
import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.TextView;

abstract class BaseActivity extends Activity {

    public View view;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LayoutInflater flater = LayoutInflater.from(this);        
        view = flater.inflate(R.layout.toolbar_clearbalk, null);
        TextView text=(TextView)view.findViewById(R.id.now_time);
        text.setText("bla bla bla");        

    }   

}

import android.os.Bundle;
import android.widget.RelativeLayout;

    public class MainActivity1 extends BaseActivity 
{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout parent = (RelativeLayout) findViewById(R.id.container);
        parent.addView(view);
    }

}

import android.os.Bundle;
import android.widget.RelativeLayout;

public class MainActivity2 extends BaseActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout parent = (RelativeLayout) findViewById(R.id.container);
        parent.addView(view);
    }

}

import android.os.Bundle;
import android.widget.RelativeLayout;

public class MainActivity3 extends BaseActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RelativeLayout parent = (RelativeLayout) findViewById(R.id.container);
        parent.addView(view);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:50:48.130

您可以将此布局包含在任何其他带有`<include>`元素的布局文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include layout="@layout/toolbar_clearbalk" />

    ...

</LinearLayout> 
```

# java - 使用压缩文件

> ID：13394042
> 
> 赞同：0
> 
> 时间：2012-11-15T08:48:27.060
> 
> 标签：java, compression, zip

我想知道在 java 中处理打包文件的最佳方法。我知道我可以使用 ZIP，但我对压缩不感兴趣.. ZIP 是最快的方式吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:54:21.433

检查此链接 [Class ZipOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipOutputStream.html)

**设置级别**

```
public void setLevel(int level) 
```

为 DEFLATED 的后续条目设置压缩级别。默认设置为 DEFAULT_COMPRESSION。参数：level - 压缩级别 (0-9) 抛出：IllegalArgumentException - 如果压缩级别无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:50:37.710

Zip 格式具有“存储”压缩级别，这实际上意味着*没有压缩*- 它只是打包文件。因此速度很快。同时，zip 是一种非常流行的格式，几乎可以在任何系统上读取它。

# jquery - for循环中的jQuery延迟行为

> ID：13394043
> 
> 赞同：3
> 
> 时间：2012-11-15T08:48:35.267
> 
> 标签：jquery, jquery-deferred, deferred

我最近问了一个关于在 for 循环中延迟的 jquery 行为的问题。[链接在这里](https://stackoverflow.com/questions/13368836/using-jquery-when-with-array-of-deferred-objects-causes-weird-happenings-with-lo/13369602#13369602)

我收到了一个有效的答案，但我不明白它为什么有效。

如果我有以下代码：

```
function update(callbacks) {
    return $.Deferred(function(dfr) {
        setTimeout(function() {
            callbacks.success()
        }, 1000);
        dfr.resolve();
    }).promise();
}

function updateElements(deferreds) {
    for (var i = 0; i < 5; i++) {
        (function() {
            var index = i;
            deferreds.push(update({
                success: function() {
                    alert(index);
                }
            }));
        })();
    }
};

(function() {
    var deffereds = [];
    updateElements(deffereds);
    $.when.apply($, deffereds).then(function() {}, function() {});
})();​ 
```

它返回 5 个警报窗口，其值从 0 到 4。如果我将 updateElements 方法更改为：

```
function updateElements(deferreds) {
    for (var i = 0; i < 5; i++) {
        var index = i;
        deferreds.push(update({
            success: function() {
                alert(index);
            }
        }));
    }
}; 
```

它返回 5 个警报窗口，其值仅为 4。有人可以解释这种行为吗？我正在努力理解差异来自哪里。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:00:25.040

它这样做的原因是因为你已经关闭了一个循环

```
(function() {
        var index = i;
        deferreds.push(update({
            success: function() {
                alert(index);
            }
        }));
})(); 
```

这个自执行块变成了一个静态值，因为它没有传入外部值。正如您链接的答案，您需要传入该值。请注意在 IEFE 末尾给出的值的关键区别（立即执行函数表达式）。对不起上限，但这需要强调。

```
(function(VALUE_ACCEPTED){
  //VALUE_ACCEPTED accepts the passed value of VALUE_PASSED
})(VALUE_PASSED) 
```

这样你的代码就变成了这样：

```
function updateElements(deferreds) {
for (var i = 0; i < 5; i++) {
    (function(valueAccepted) { // valueAccepted = the passed in value from i
        var index = valueAccepted;
        deferreds.push(update({
            success: function() {
                alert(index);
            }
        }));
    })(i); // pass in i to valueAccepted
 }
}; 
```

# python - 在 python 中的 __str__ 方法中返回或打印

> ID：13394046
> 
> 赞同：2
> 
> 时间：2012-11-15T08:48:50.013
> 
> 标签：python

在我陷入的多项选择题中，有三个选项。问题来了：

以下哪一项是_str_方法的*定义*？

```
1\. def __str__(self):
      print "(%s, %s, %s)" % (self._n, self._p, self._b)

2\. def __str__(self):
      return "(%s, %s, %s)" % (self._n, self._p, self._b)

3\. Both 
```

我对它们都进行了测试，并且都有效，但据说（2）是答案。

所有其他类似问题的答案也表明带有“打印”的功能不是正确的。

答案错了吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T08:51:56.693

从[官方文档](http://docs.python.org/2/reference/datamodel.html#object.__str__)（强调我的）：

> `object.__str__(self)`
> 
> 由`str()`内置函数和`print`语句调用以计算对象的“非正式”字符串表示。这与`__repr__()`它不必是有效的 Python 表达式不同：可以使用更方便或更简洁的表示。**返回值必须是字符串对象。**

由于第一个版本没有返回字符串对象，所以它一定是错误的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T08:52:07.003

只有第二种方法实际上返回任何东西。这意味着如果您`str`显式使用，例如这样：

```
>>> a = str(myobj) 
```

那么只有第二种方法允许您将结果存储在`a`. 使用第一种方法，将*打印*字符串（这已经是错误的），并将`a`设置为`None`.

如果您刚刚使用，您甚至会注意到这一点

```
>>> print(myobj) 
```

虽然这更容易错过：如果该`__str__()`方法是根据您的第一个示例定义的，则调用`print()`您的对象将执行该方法，打印字符串，然后返回`None`该`print`函数然后打印一个空行。所以你会得到一个额外的、不需要的换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:53:19.893

[这](http://docs.python.org/2/reference/datamodel.html#object.__str__)是蟒蛇说的

> object.__str__(self)
> 由 str() 内置函数和 print 语句调用以计算对象的“非正式”字符串表示。这与 __repr__() 的不同之处在于它不必是有效的 Python 表达式：可以使用更方便或更简洁的表示来代替。返回值必须是字符串对象。

只有选项 2 返回一个字符串。

这也是有道理的， __str__ 应该为您提供对象的字符串表示形式。如果您想获取 object 的字符串表示形式，有时将其放在数据库中，有时写入文件，那么您有一个 __str__ 方法将其打印到屏幕/标准输出是没有意义的。

# django - 有没有更好的方法在 Django 模板中显示 ete2 树？

> ID：13394049
> 
> 赞同：2
> 
> 时间：2012-11-15T08:49:13.783
> 
> 标签：django, web-applications, tree, etetoolkit

我正在使用[Django](http://www.djangobook.com/en/2.0/chapter01.html)框架构建一个 WebApplication。在服务器端，我正在根据用户使用浏览器给出的输入构建[ete2 树。](http://packages.python.org/ete2/tutorial/tutorial_trees.html)现在我的问题是我需要在客户端（浏览器）中以树格式显示这棵树，每个节点作为超链接（单击以树格式显示的节点应该调用服务器端的函数，将节点名称作为参数传递，这就是我提到的原因它作为超链接）。

我想到的一个解决方案是在[视图函数中解析](http://www.djangobook.com/en/2.0/chapter03.html)[ete2.tree](http://packages.python.org/ete2/tutorial/tutorial_trees.html)并构建一个包含所有需要的 html 标签的字符串，在浏览器上显示如下所示。

```
 + root
               + child1
                   + grandson
               + child2 
```

执行此操作的代码： from ete2 import Tree

```
def display_view(request):
      global tree
      string = tree2str(tree)
      return render_to_response('index.html', {'string': string} )

def tree2strtr():
  global tree
  tmp = ''
  for node in tree.traverse():
    if node.name != 'NoName':
      tmp += '<a href="/process/?objectName=%s">%s</a>' % (node.name, node.name)
      tmp += '</br>'
  return tmp 
```

有更好的方法吗？有什么建议请..

# math - 四元分量插值

> ID：13394052
> 
> 赞同：1
> 
> 时间：2012-11-15T08:49:27.690
> 
> 标签：math, quaternions

我试图通过使用轨迹（曲线）而不是关键帧来优化我的骨骼动画系统。每条曲线都处理一个特定的组件，然后（现在）我线性插值这些值。适合我的骨骼位置，但是我很难摆脱四元数分量插值的“锯齿状”......

基本上，每个骨骼四元数的每个分量（XY 和 Z）都有 1 条曲线，我使用以下代码独立插入 XY 和 Z 曲线：

```
// Simple lerp... (f is always a value between 0.0f and 1.0f)
return ( curve->data_array[ currentframe ].value * ( 1.0f - f ) ) +
       ( curve->data_array[ nextframe ].value * f ); 
```

当我对四元数 XYZ 进行插值时，我使用以下代码在对其进行归一化之前重建四元数的 W 分量，并在绘制之前将其影响到我的骨骼：

```
Quaternion QuaternionW( const Quaternion q )
{
    Quaternion t = { q.x, q.y, q.z };

    float l = 1.0f - ( q.x * q.x ) - ( q.y * q.y ) - ( q.z * q.z );

    t.w = ( l < 0.0f ) ? 0.0f : -sqrtf( l );

    return t;
} 
```

绘图看起来很好，只是骨头有时会变得很生涩，是不是因为浮点精度？还是重新计算 W 分量？或者我绝对没有办法以这种方式线性插值四元数的每个分量？

ps：附带说明一下，如果我将上面的代码替换为以下代码，则在我的曲线插值函数中：

```
return curve->data_array[ currentframe ].value; 
```

相反或线性插值，一切都很好......所以数据显然是正确的......我很困惑......

**[ 编辑 ]**

经过更多研究，我发现问题来自帧数据......我得到了以下内容：

帧 0：quat.x = 0.950497

帧 1：quat.x = -0.952190

帧 2：quat.x = 0.953192

这就是导致反转和锯齿状的原因......我试图检测这种情况并反转数据的符号，但它仍然不能完全解决问题，因为某些帧现在看起来很奇怪（在绘图时视觉上）。

任何想法如何正确修复曲线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:38:11.393

你的数据可能没有错。方向的四元数表示具有 2 倍冗余的有趣特性。如果你否定一个四元数的所有四个元素，你就会留下相同的方向。*如果您将四元数视为轴/角度*表示，则很容易看出这一点：围绕轴**a**旋转**Θ**与围绕轴**-a旋转****-Θ**相同。

 ******那么你应该怎么*做*呢？如前所述，*slerp*是正确的做法。四元数方向存在于单位超球面上。如果在球体上的点之间进行线性插值，则会离开球体。但是，如果这些点彼此靠近，则通常没什么大不了的（尽管之后您仍应重新归一化）。你绝对需要确保你做的是在插值之前检查你的两个四元数的内积：例如*，*

```
k=q0[0]*q1[0] + q0[1]*q1[1] + q0[2]*q1[2] + q0[3]*q1[3]; 
```

如果`k<0`，则否定其中一个四元数：`for (ii=0;ii<4;++ii) q1[ii]=-q1[ii];` 这可确保您不会尝试在圆周围进行很长的插值。然而，这确实意味着您必须将四元数视为一个整体，而不是部分。完全丢弃一个组件尤其成问题，因为您需要它的符号来防止四元数模棱两可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:26:35.700

# 幼稚的考虑

线性插值适用于加法运算的事物，即每次执行相应操作时都会将某些事物添加到其他事物中。然而，Queternions 是乘法的：你将它们相乘以链接它们。

出于这个原因，我最初建议计算以下内容：

```
pow(secondQuaternion, f)*pow(firstQuaternion, 1\. - f) 
```

维基百科有一[节](https://en.wikipedia.org/wiki/Quaternion#Exponential.2C_logarithm.2C_and_power)关于四元数的计算能力等。正如您在下面的评论指出这不起作用，以上仅供参考。

# 适当的插值

自从写这篇文章以来，我阅读了更多关于 slerp （球面线性插值）的内容，并发现维基百科有一个[关于四元数 slerp 的部分](http://en.wikipedia.org/wiki/Slerp#Quaternion_Slerp)。您上面的评论表明您已经熟悉该术语。这个公式比我上面写的要复杂一些，但由于它使用权力的方式，它仍然相当相关。我想你最好通过调整或移植该公式的可用实现来做到最好。[例如，此页面](http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/)带有一些代码。

# 修复数据

至于你更新的问题

> 任何想法如何正确修复曲线？

在维护正确数据的同时修复错误需要了解确实发生了哪些类型的错误。因此，如果可能的话，我会首先尝试找到该错误的根源。如果可以修复它以生成正确的数据，那么很好。如果没有，它仍然应该让您更好地了解预期的内容和时间。******

# extjs4 - 在加载表单时添加 Ext JS 加载时钟图标

> ID：13394053
> 
> 赞同：0
> 
> 时间：2012-11-15T08:49:36.947
> 
> 标签：extjs4, extjs4.1

我想添加一个`clock`类似的动画时钟来显示，同时用数据填充特定的表单。谁能告诉我这是怎么做到的。

当表单开始加载时，我会显示一个带有时钟图像的小窗口，然后在加载数据后关闭该窗口。我认为这不是正确的方法，所以有人可以告诉我如何完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:56:44.317

您可以使用表单的 setLoading 方法。看着：

```
http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Panel-method-setLoading 
```

# android - Android：限制用户选择自动完成建议以外的选择？

> ID：13394054
> 
> 赞同：33
> 
> 时间：2012-11-15T08:49:43.593
> 
> 标签：android, autocompletetextview

我提供了一个`AutoCompleteTextView`向用户显示建议。根据用户选择的项目，我正在获取项目的 ID 并在数据库端使用它。现在我的问题是强制用户只从`AutoCompleteTextView`（即用户不应该输入他自己的文本）中进行选择。这是客户的要求。这个怎么做？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-26T22:08:32.450

这是一个非常简单的解决方案：

您可以通过`setOnItemClickListener`在`AutoCompleteTextView`. 然后`null`，只要用户在字段中键入，您就可以通过添加 a`TextWatcher`来获得该值。最后，您可以在继续之前验证您的变量不为空。

```
String my_var; //keep track!
AutoCompleteTextView tv = (AutoCompleteTextView) layout.findViewById(R.id.tv);
tv.setAdapter(my_adapter);  
tv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        my_var = my_adapter.getItem(position).toString();
    }
});
/**
 * Unset the var whenever the user types. Validation will
 * then fail. This is how we enforce selecting from the list.
 */
tv.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        my_var = null;
    }
    @Override
    public void afterTextChanged(Editable s) {}
}); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-06-03T21:28:29.690

对于我正在从事的项目，我碰巧需要这样的要求，尽管我会以我实现所需的方式与大家分享。

我为自动完成文本视图添加了焦点更改侦听器，并检查了用户何时从自动完成中更改了焦点，并直接处理了这种情况。

```
autoTextViewCountry.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View view, boolean b) {
            if(!b) {
                // on focus off
                String str = autoTextViewCountry.getText().toString();

                ListAdapter listAdapter = autoTextViewCountry.getAdapter();
                for(int i = 0; i < listAdapter.getCount(); i++) {
                    String temp = listAdapter.getItem(i).toString();
                    if(str.compareTo(temp) == 0) {
                        return;
                    }
                }

                autoTextViewCountry.setText("");

            }
        }
    }); 
```

所以我的实现是：如果数组适配器中不存在键入的文本，则焦点更改为空文本视图，然后在继续说注册的下一阶段时，检查此文本视图是否为空。

希望这种方法可以帮助某人。

快乐编码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-29T03:20:21.857

[NiceAutoCompleteTextView](https://ranyalbegwein.silvrback.com/niceautocompletetextview)将使您能够检查是否从下拉弹出窗口中进行了选择，方法是调用`isSelectionFromPopup()`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-20T04:03:16.470

只需将此属性添加到您的 AutoCompleteTextView。

> 安卓：可聚焦=“假”

我的代码如下所示：

```
 <com.google.android.material.textfield.TextInputLayout
        android:id="@+id/menu"
        style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Mode">

        <AutoCompleteTextView
            android:id="@+id/mode"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:focusable="false"
            />

    </com.google.android.material.textfield.TextInputLayout> 
```

在 Java 方面：

```
AutoCompleteTextView mode = findViewById(R.id.mode);
   final List<String> modeList = new ArrayList();
    modeList.add("YEARLY");
    modeList.add("HALF-YEARLY");
    modeList.add("QUARTER-YEARLY");
    modeList.add("MONTHLY");
    mode.setAdapter(new ArrayAdapter(getApplicationContext(),R.layout.list_item,modeList)); 
```

获取 AutoCompleteTextView 的文本：

```
mode.getText().toString() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T07:24:53.680

好的，我假设您希望将用户的输入限制为建议框中列出的项目列表中包含的文本。

例如，如果您有：

*   一
*   二
*   三

那么用户只能输入第一个字符“O”和“T”。依此类推之前输入的文字。

为此，您可以利用*TextView的***setFilters**方法：

 *```
editBox = (TextView) findViewById(R.id.editBox);
editBox.setFilters(getFilters());
editBox.addTextChangedListener(this);
editBox.setOnFocusChangeListener(this); 
```

此外，您可能需要*文本更改侦听*器和*焦点侦听*器在输入新字符时做出反应并更新过滤列表......加上更新过滤器。

这是我在项目中使用的十进制数过滤器的示例：

```
protected InputFilter[] getFilters()
    {
        InputFilter[] filters = new InputFilter[1];

        filters[0] = new InputFilter()
        {
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend)
            {
                // limit input to digits and decimal / thousand separator only
                // in case thousand separator is pressed, change it to decimal
                // separator instead
                String output = "";

                if (number.isFocused())
                {
                    for (int i = start; i < end; i++)
                    {
                        char c = source.charAt(i);

                        if (isDecimalOrThousandSeparator(c))
                        {
                            output = output + Character.toString(decimalSeparator);
                        }
                        else if (Character.isDigit(c))
                        {
                            output = output + Character.toString(c);
                        }
                    }

                    return output == "" ? null : output;
                }

                return null;
            }
        };

        return filters;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-20T07:25:37.637

这是该专业`AutoCompleteTextView.Validator`人士确保有效值的另一种解决方案。当编辑文本失去焦点时调用验证器。

```
autoCompleteTextView.validator = object : AutoCompleteTextView.Validator {
        override fun isValid(text: CharSequence?): Boolean {
            return optionsList.contains(text.toString())
        }

        override fun fixText(invalidText: CharSequence?): CharSequence {
            return ""
        }
    } 
```

`optionsList`有效值列表在哪里。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-26T08:59:18.987

一个简单的解决方案是只检查当前输入是否是适配器中的项目之一。你可以这样做：

```
val AutoCompleteTextView.isValid: Boolean
    get() {
        for (i in 0 until adapter.count) {
            if (adapter.getItem(i) == text.toString()) {
                return true
            }
        }

        return false
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-28T13:55:48.993

我有同样的要求，所以这是我的实现：

```
autoCompleteTextView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                autoCompleteTextView.showDropDown();
            }
        }); 
```

在 xml 集`focusable=false`和`focusableInTouchMode=false`.

快乐编码

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-29T08:30:01.703

为了使 AutoCompleteTextView 具有不可编辑的变体，您应该在 AutoCompleteTextView 中禁用用户输入。这可以通过在 AutoCompleteTextView 上设置 android:inputType="none" 来实现。*

# ajax - Django - Ajax 模式登录/注册

> ID：13394057
> 
> 赞同：13
> 
> 时间：2012-11-15T08:49:54.753
> 
> 标签：ajax, django, twitter-bootstrap, django-templates, django-registration

我有一个项目，我需要为未经过身份验证的用户弹出一个模式窗口。

此模式将允许直接登录**或**创建帐户。

所以它将包含两种形式：

*   `django.contrib.auth.forms.AuthenticationForm`
*   `registration.forms.RegistrationForm`

![模态选项卡式表单](../Images/a14ebdc734f181dace98bbc1404d0779.png)

这是我对两种形式的看法：

```
def ajax_registration(request):
    obj = {
        'login_form': AuthenticationForm(),
        'registration_form': RegistrationForm(),
    }
    return render(request, 'common/ajax_registration.html', obj) 
```

我的模板显示了选项卡式的表单

```
<ul class="nav nav-tabs">
  <li><a href="#tab1" data-toggle="tab">{% trans 'Login' %}</a></li>
  <li><a href="#tab2" data-toggle="tab">{% trans 'Registration' %}</a></li>
</ul>
<div class="tab-content">
  <div class="tab-pane active" id="tab1">
    {{ login_form|bootstrap }}
  </div>
  <div class="tab-pane" id="tab2">
    {{ registration_form|bootstrap }}
  </div>
</div> 
```

问题是：由于我使用 ajax 来显示此模式，如何验证所选表单，最好使用已经编写的[`django-registrations register`](http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register)&[`django.contrib.auth login`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.login)视图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T09:18:51.557

除了 Maddog 的回答之外，您还需要一些 javascript 来将表单提交回呈现表单的 URL。使用 jquery 它可能是这样的：

```
$('form').submit(function(e){
        e.preventDefault();
        var form = $(e.target);

        $.ajax({
            url: '{% url YOUR_REGISTRATION_URL %}',
            type: 'post',
            data: account_form.serialize() + '&' + form.serialize(),
            error: function(xhr, ajaxOptions, thrownError){ alert(thrownError); },
            success: function(){}
        })
 }) 
```

您不需要使用表单提交元素来执行此操作，当然，您可以使用任何带有 $().click() 的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:07:29.097

像这样的东西？

```
def ajax_registration(request):
    login_form, registration_form = False, False
    if request.method == "POST":
        if "email" in request.POST: # some condition to distinguish between login and registration form
            login_form = AuthenticationForm(request.POST)
            if login_form.is_valid():
                # log in
        else:
            registration_form = RegistrationForm(request.POST)
            if registration_form.is_valid():
                # register

    obj = {
        'login_form': login_form if login_form else AuthenticationForm(),
        'registration_form': registration_form if registration_form else RegistrationForm(),
    }
    return render(request, 'common/ajax_registration.html', obj) 
```

# c++ - 写入管道的最快方法

> ID：13394064
> 
> 赞同：0
> 
> 时间：2012-11-15T08:50:20.283
> 
> 标签：c++, linux, pipe, fifo

我编写了这个程序，其中一个线程获取 char* 缓冲区并将它们写入创建如下的管道：

```
 ret_val = mkfifo(lpipename.c_str(), 0666);
 pipehandler = open(lpipename.c_str(), O_RDWR); 
```

然后我一个接一个地向管道写入缓冲区，如下所示：

```
 int size = string(pcstr->buff).length()
 numWritten = write(pipehandler, pcstr->buff, size); 
```

每个 pcstr->buff 是一个指向预先配置大小为 1-5 MB 的 malloc 大小的指针

但是，写入 pipe 比填充 pcstr->buff （来自另一个来源）花费的时间太长，并且它使我的程序运行速度太慢。

有人知道更快的写作方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:16:50.900

> 每个 pcstr->buff 是一个指向预先配置大小为 1-5 MB 的 malloc 大小的指针

只需将长度保存在某处。复制它`std::string`只是为了找出它的大小是相当浪费的。或使用`strlen()`.

> 但是，写入管道需要很长时间，而不是填充 pcstr->buff （来自另一个来源），这会使我的程序运行速度太慢。

[在 Linux 中，截至今天，默认的最大管道缓冲区大小为 1Mb](http://lxr.linux.no/linux+v3.6.6/fs/pipe.c#L28)。您提到您在管道中写入了超过 1Mb 的数据。当这种情况发生时，写入线程会阻塞，直到管道中的一些数据被消耗。

> 有人知道更快的写作方法吗？

`/dev/shm`在或中使用纯文件`/tmp`。在最新的 Linux`/tmp`上是一个内存文件系统。但这仅适用于通过管道发送的数据量可以保存在文件中而不会溢出可用磁盘空间或内存量的情况。

# rest - Restlet 路由

> ID：13394065
> 
> 赞同：2
> 
> 时间：2012-11-15T08:50:22.860
> 
> 标签：rest, restlet

我正在尝试找出最好/性能最好/最容易维护的版本，以处理restlet中的许多不同的URL。

例如，如果我想要一个 Item 资源，有没有比这更好的方法呢？

```
router.attach("/items", ItemResource.class);
router.attach("/item/{itemid}", ItemResource.class);
router.attach("/items/list", ItemResource.ItemListResource.class);
router.attach("/items/weapons", ItemResource.WeaponListResource.class);
router.attach("/items/armours", ItemResource.ArmourListResource.class);
... 
```

（我尝试使用 /items/{itemid}，但随后 /items/weapons 等无法访问。）

ItemResource 然后有 @Get 用于获取单个项目，但也有 @Put 用于在仅使用 /items 时保存项目。这里感觉有点不对劲......在这种情况下，有没有更好的方法来获取/插入/更新/列出项目？

此外，这个 router.attach 列表很长，大约有 100 项。由于这必须在每个请求上运行，它可能会相当慢。我知道我可以将多个路由器连接在一起，但我找不到有关如何很好地做到这一点的文档。链接路由器并保持可维护性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-13T20:45:55.937

只需将

```
router.attach("/item/{itemid}", ItemResource.class); 
```

在路由的最低部分，因为它会捕获所有路径参数，所以在它匹配所有内容之前，首先路由输入的路径。这应该根据我的经验解决它。

# resharper - ReSharper 搜索并替换为模式

> ID：13394071
> 
> 赞同：3
> 
> 时间：2012-11-15T08:50:39.760
> 
> 标签：resharper, code-formatting, structural-search

我想使用 ReSharper 7.1 Search / Replace with pattern 在整个项目中重构各种代码块。

代码块类似于以下简化示例：

```
someControl.StatusProgressBar.IsIndeterminate = false;
someControl.StatusProgressBar.Visibility = Visibility.Visible;
someControl.StatusProgressBar.Minimum = 0;
someControl.StatusProgressBar.Maximum = 100;
someControl.StatusProgressBar.Value = percentage; 
```

我想将它们更改为：

```
someControl.StatusProgressBar.Use(p =>
{
  p.IsIndeterminate = false;
  p.Visibility = Visibility.Visible;
  p.Minimum = 0;
  p.Maximum = 100;
  p.Value = percentage;
}); 
```

*“使用”是一种扩展方法*

如果所有代码块都设置相同数量的属性，这很容易。以下搜索和替换模式将完成这项工作：

搜索

```
$someControl$.$SomeProperty$.$SubProperty1$ = $val1$;
$someControl$.$SomeProperty$.$SubProperty2$ = $val2$;
$someControl$.$SomeProperty$.$SubProperty3$ = $val3$;
$someControl$.$SomeProperty$.$SubProperty4$ = $val4$;
$someControl$.$SomeProperty$.$SubProperty5$ = $val5$; 
```

代替

```
$someControl$.$SomeProperty$.Use(p=>
{
    p.$SubProperty1$ = $val1$;
    p.$SubProperty2$ = $val2$;
    p.$SubProperty3$ = $val3$;
    p.$SubProperty4$ = $val4$;
    p.$SubProperty5$ = $val5$;
}); 
```

但是，如果我还有一个代码块，例如：

```
someControl.StatusProgressBar.IsIndeterminate = false;
someControl.StatusProgressBar.Visibility = Visibility.Visible;
someControl.StatusProgressBar.Minimum = 0;
someControl.StatusProgressBar.Maximum = 100;
someControl.StatusProgressBar.Value = percentage;
someControl.StatusProgressBar.Orientation = Vertical; 
```

使用 ReSharper 是否可以用一种模式捕获和替换两个代码块？后者有一个额外的属性设置，但很容易超过一个或更少。

我认为这是不可能的。它需要能够创建某种变量模式，而我看不到这样做的方法，无论是使用正则表达式还是其他方式。

有任何想法吗？

# jquery - 在第 10 个字符后添加一个 html 元素

> ID：13394073
> 
> 赞同：-2
> 
> 时间：2012-11-15T08:50:45.087
> 
> 标签：jquery, html

我们如何在第 10 个字符之后在句子中添加 html 元素

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T08:52:55.363

```
var $element = $(someselector);
var text = $element.text();
$element.html(text.slice(0, 10) + '<span>new thing</span>' + text.slice(10)); 
```

[示范](http://jsfiddle.net/dystroy/CjNpD/)

*请注意，这仅在 $element 仅包含一个对象时才有效。对于集合，您将使用每个（如果需要，我将详细说明此代码）。*

# c# - 阻止 iPad 复制图像

> ID：13394076
> 
> 赞同：0
> 
> 时间：2012-11-15T08:50:56.773
> 
> 标签：c#, asp.net, ipad

我正在创建一个摄影网站，所以我已经阻止 PC/Mac 上的浏览​​器下载图像。当我在 iPad 上查看该网站时，我能够复制图像。有没有办法阻止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:03:36.850

你在这里为一个失败的原因而战：你不能赢。这有点像经典的 DRM/数据加密问题：如果你想使用它，你必须解密它。如果您可以解密它，它就不再受到保护。

您可以避免用户热链接图像（仍然可以被伪造/规避），并且您可以尝试使用标准工具（例如浏览器的上下文菜单）使下载图像变得更加困难，但通常您不能避免它，因为您无法控制客户端。

你能做的——这将使下载更难而不用拧基本功能等——不是使用`<img/>`，而是`<div/>`将图像设置为它的`background-image`.

但是，如果您真的关心自己的图像，我会做以下事情，而不是试图与仅仅欣赏您的作品的用户搞砸（他们可能想将一张漂亮的图片设置为他们的桌面背景，这甚至可能让他们告诉其他人您的网站）：

*   为您的图像添加一个小水印，例如签名行或仅提供有限的分辨率。您可以根据要求提供更高质量/无水印的副本（或链接某些打印服务）。
*   邀请喜欢您的照片的人下载它们以供私人、非商业用途。
*   为他们提供一种简单的联系方式，以防他们想将图像用于其他用途。
*   添加社交网络按钮，方便访问者向他们的朋友展示您的作品。如果他们能以简单的方式链接这些东西，他们就不必复制任何东西——另外，这将为您带来更多的免费流量！

允许人们分享他们的照片、艺术品等（deviantART、instagram 等）的网站如此受欢迎是有原因的：人们喜欢使用它们，他们欣赏所涉及的工作等。别忘了：只是因为你不要用一些讨厌的技巧“保护”您的内容并不意味着您不拥有权利或不再被允许与其他滥用它的人作斗争。即使您提供免费下载，您仍然可以合法地打击侵犯您的版权或其他权利的其他人（除非您给予他们适当的许可，例如使用一些知识共享许可）。

# github - 有没有办法为 GitHub 增加 API 速率限制或完全绕过它？

> ID：13394077
> 
> 赞同：26
> 
> 时间：2012-11-15T08:51:00.213
> 
> 标签：github

我正在开发一个需要向 GitHub 发送大量 HTTP 请求的 Web 应用程序。在 n 次成功请求后，我收到`HTTP 403: Forbidden`消息`API Rate Limit Exceeded`。

有没有办法为 GitHub 增加 API 速率限制或完全绕过它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-03-14T23:23:51.217

这是一个相对的解决方案，因为限制仍然是每小时 5000 次 API 调用，或每分钟约 80 次调用，实际上并没有那么多。

我正在编写一个工具来比较一个组织中的 350 多个存储库并找到它们的相关性。好的，该工具使用 python 进行 git/github 访问，但我认为这不是相关点，这里。

在一些初步成功之后，我发现 GitHub API 的功能在调用次数和带宽方面都太有限了，如果你真的想向 repos 提出很多深入的问题的话。

因此，我转换了概念，使用了不同的方法：

我没有使用 GitHub API 做任何事情，而是编写了一个 GitHub Mirror 脚本，该脚本能够使用我的并行 python 脚本通过 pygit2 在不到 15 分钟内镜像所有这些 repos。

然后，我使用本地存储库和 pygit2 编写了所有可能的内容。该解决方案的速度提高了 100 倍或更多，因为既没有 API 也没有带宽瓶颈。

当然，这确实需要付出额外的努力，因为 pygit2 API 与我在 GitHub 解决方案部分首选的 github3.py 有很大不同。

这实际上是我的结论/建议：处理大量 Git 数据的最有效方法是：

*   在本地克隆您感兴趣的所有存储库

*   在本地使用 pygit2 编写所有可能的内容

*   使用 github3.py API 或您喜欢的方式编写其他内容，例如公共/私人信息、拉取请求、访问 wiki 页面、问题等。

这样，您可以最大限度地提高吞吐量，而您的限制现在是程序的质量。（也很重要）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-05T10:37:10.480

为了提高 API 速率限制，您可以

*   通过您的 OAuth2 令牌在 Github 上进行身份验证，或者

*   使用密钥/秘密来[增加未经身份验证的速率限制](https://developer.github.com/v3/#increasing-the-unauthenticated-rate-limit-for-oauth-applications)。

有多种方法可以做到这一点：

**[基本身份验证 + OAuth2Token](https://developer.github.com/v3/auth/#via-oauth-tokens)**

`curl -u <token>:x-oauth-basic https://api.github.com/user`

**[在标头中设置和发送 OAuth2Token](https://developer.github.com/v3/#oauth2-token-sent-in-a-header)**

`curl -H "Authorization: token OAUTH-TOKEN" https://api.github.com`

**[设置并发送 OAuth2Token 作为 URL 参数](https://developer.github.com/v3/#oauth2-token-sent-as-a-parameter)**

`curl https://api.github.com/?access_token=OAUTH-TOKEN`

**[为 Server-2-Server 通信设置 Key & Secret](https://developer.github.com/v3/#oauth2-keysecret)**

`curl 'https://api.github.com/users/whatever?client_id=xxxx&client_secret=yyyy'`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-15T10:40:42.350

解决方案：添加身份验证详细信息或客户端 ID 和密码（在 GitHub 上[注册应用程序时生成）。](https://github.com/settings/applications/new)

[在此处](http://developer.github.com/v3/#rate-limiting)和[此处](http://developer.github.com/changes/2012-10-14-rate-limit-changes/)找到详细信息

“如果您需要进行未经身份验证的调用，但需要使用与您的 OAuth 应用程序相关的更高速率限制，您可以在查询字符串中发送您的客户端 ID 和密码”

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-05-03T00:06:21.317

[只需在此处](https://github.com/settings/tokens)创建新的“个人访问令牌”并使用简单的 fetch 方法（如果您当然是在 JS 中编码：D）并将 YOUR_ACCESS_TOKEN 替换为您的令牌。

最好的测试方法是使用[Postman](https://i.stack.imgur.com/iTRWD.png)

```
async function fetchGH() {
    const response = await fetch('https://api.github.com/repos/facebook/react/issues', {
        headers: {
            'Authorization': 'token YOUR_ACCESS_TOKEN',
        }
    })
    return await response.json()
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-05-21T06:31:39.073

虽然似乎仍然没有办法提高速率限制，但 GitHub 现在有一个 GraphQL API，它可能允许您降低 API 调用。

请记住，GitHub 在 GraphQL 和 REST API 之间计算速率限制的方式不同。GraphQL API 速率限制为 5000 点/小时（不是每小时 5000 次调用！所以 1 次 GraphQL 调用可能会花费您超过 1 点）您可以在此处阅读更多信息：[https ://docs.github.com/en/graphql/overview/资源限制](https://docs.github.com/en/graphql/overview/resource-limitations)（TL；DR 是要在查询中获取的更多资源 = 更多点）

例如，如果您有与 Christian 的回答类似的用例，而不是多次调用多个端点

```
GET /repos/{owner}/{repoA}
GET /repos/{owner}/{repoB} 
```

您可以`https://api.github.com/graphql`使用此查询执行一次 GraphQL 调用：

```
query {
  repoA: repository(owner:"owner", name:"repoA") {
    ...
  }
  repoB: repository(owner:"owner", name:"repoB") {
    ...
  }
} 
```

根据存储库查询的内容，您仍然可以在一次调用中添加更多存储库，并且每次调用仍使用 1 点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-01T14:18:21.373

我在詹金斯的多分支管道配置期间观察到了这个错误

我选择了源作为 github。将其更改为 git 并传递guthub repo 详细信息后，它起作用了。（在 jenkins 中配置了 git 可执行路径，并设置了用于向 github 进行身份验证的凭据）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-09T12:04:02.123

我可以建议“成为存档者” [https://github.com/github/site-policy/issues/56](https://github.com/github/site-policy/issues/56)

顺便说一句，即使是“非存档者”也可以访问公共数据......

所有工具都在 github 上。

# webdriver - Selenium WebDriver - 更改 firefox 文件保存位置的方法

> ID：13394078
> 
> 赞同：0
> 
> 时间：2012-11-15T08:51:05.873
> 
> 标签：webdriver

有没有办法改变firefox使用selenium webdriver保存下载文件的位置？

任何人都有硒网络驱动程序代码来更改Firefox保存下载文件的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:39:59.103

如果您知道如何使用带有自定义首选项的 Firefox 配置文件，那么您正在寻找的设置是“browser.download.dir”

```
fProfile.setPreference("browser.download.dir", @your_dir); 
```

查看更多 Firefox 下载选项和其他配置 @ [http://kb.mozillazine.org/About:config_entries](http://kb.mozillazine.org/About:config_entries)

# gnuplot - gnuplot——填充两个函数之间的空间

> ID：13394080
> 
> 赞同：16
> 
> 时间：2012-11-15T08:51:39.313
> 
> 标签：gnuplot

我有两个功能，例如：

```
f(x)=2**x
g(x)=1024 
```

如何使用 gnuplot 为 x 从 0 到 10 绘制这两个函数并填充它们之间的空间？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-15T08:58:52.690

不幸的是，gnuplot 不为函数提供这种特性，而只为数据集提供。现在有两种方法可以做到这一点，我推荐其中一种：

```
f(x)=2**x
g(x)=1024
xmax=10
set xrange [0:xmax]
plot '+' using 1:(f($1)):(g($1)) with filledcurves closed 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T13:29:54.887

@toxicate20 的回答展示了 pseudofile 的良好用法`+`。对于这种特殊情况，这实际上不是必需的，因为您的函数之一只是一个常量：

```
set xrange [0:10]
plot 2**x w filledcurves y1=1024 
```

# windows-mobile - 新应用程序上的 Windows Phone 8 错误

> ID：13394092
> 
> 赞同：4
> 
> 时间：2012-11-15T08:52:46.393
> 
> 标签：windows-mobile, visual-studio-2012, windows-phone-8

我正在使用visual studio 2012 n windows 8 企业版来创建一个windows phone 8 应用程序！当我创建一个新的应用程序并想运行它只是为了看看它是否工作时，这个错误会立即弹出！

```
 System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous(Action action, Int32 targetApartmentId, WaitHandle aborted, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1 targetObject, Action action, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func, CallSynchronizationMode syncMode)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CreateDesignerImpl(IHostSourceItem item, IHostTextEditor editor, RemoteCancellationToken remoteCancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner>b__11(RemoteCancellationToken remoteToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.CallWithCancellation[TResult](CancellationToken cancelToken, Func`2 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.CreateDesignerViewInfo(CancellationToken cancelToken)

System.NullReferenceException
Object reference not set to an instance of an object.

Server stack trace: 
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalIn(Action action, Int32 targetApartmentId)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn(IRemoteObject targetObject, Action action)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn[TResult](IRemoteObject targetObject, Func`1 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor, IRemoteCancellationToken remoteToken)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor, IRemoteCancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass8.<CreateDesignerImpl>b__6(IRemoteDesignerService d)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass4`2.<MarshalOut>b__3()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

System.NullReferenceException
Object reference not set to an instance of an object.
   at Microsoft.Expression.Platform.PlatformService.PlatformEntry.get_PlatformCreator()
   at Microsoft.Expression.Platform.PlatformService.GetPlatformCreator(String frameworkSpec)
   at Microsoft.Expression.Platform.PlatformService.IsCompatibleFramework(FrameworkName hostFramework, FrameworkName guestFramework)
   at Microsoft.Expression.DesignSurface.Project.ProjectContextManager.GetProjectContext(IHostProject project, IPlatform platform, Boolean create)
   at Microsoft.Expression.DesignSurface.Project.ProjectContextManager.GetSourceItemContext(IHostSourceItem sourceItem)
   at Microsoft.Expression.DesignSurface.DesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor, CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.<>c__DisplayClass10.<>c__DisplayClass12.<Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner>b__f(CancellationToken cancelToken)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.CallWithCancellation[TResult](IRemoteCancellationToken remoteToken, Func`2 func)
   at Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.<>c__DisplayClass10.<Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner>b__e()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass16`1.<MarshalIn>b__15()
   at Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker() 
```

有人有同样的问题吗？也许有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T17:29:13.780

这就是我所做的！，我重新安装了 Windows 8 SDK，然后我更新了 Visual Studio 并成功了，希望这对每个人都有效！

编辑：

我所做的更新是 Visual Studio 的第一个“服务包”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T09:03:05.610

现在问题已经解决了。

按照论坛中的建议，这是我所做的：

1.  卸载 WP8 SDK
2.  卸载 Silverlight SDK 和 Rutime 的所有实例。
3.  重新安装 WP8 SDK。

我修复 VS 设计器问题的确切顺序：

1.  卸载所有 WP7 SDK：
2.  重新启动计算机（此步骤后设计器仍然失败）
3.  已卸载 WP8 SDK（可能这里选择修复就够了，但我选择卸载 SDK）
4.  重新启动计算机
5.  安装了 WP8 SDK

设计师现在工作得很好:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-29T12:28:53.963

只需安装最新的 Visual Studio 更新，它应该可以工作。您可以通过转到**Tools 菜单**并选择**Extension and Updates**来安装它们。Visual Studio 更新应位于产品更新类别中。

![在此处输入图像描述](../Images/a3b552cf9a8187009ee5ed793d5741c1.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-13T17:52:22.983

这对我有用：未安装的**NuGet**（因为它的更新不起作用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-23T20:16:04.100

更新 NuGet 包对我有用！

# php - $_SERVER['REQUEST_URI'] 可靠性？

> ID：13394094
> 
> 赞同：0
> 
> 时间：2012-11-15T08:52:47.413
> 
> 标签：php, webserver

在我的一个网站中，我`$_SERVER['REQUEST_URI']`用来确定非注册用户是否可以看到页面内容。

在手册中有关于`$_SERVER['REQUEST_URI']`：

> 为访问此页面而提供的 URI；例如，'/index.html'。

我的问题是，客户端是否可以通过任何客户端方式访问，例如。index.php 即使`$_SERVER['REQUEST_URI']`包含不同的值？

我知道其中`$_SERVER['REQUEST_URI']`包含客户端询问的页面和服务器返回的页面，但如果我不时不时问自己这些问题，我会不高兴

`$_SERVER['REQUEST_URI']`以这种方式使用也被认为是好的做法吗？

**编辑：我包含了我使用的脚本，因为它太通用了**

```
list($c_page) = explode('.',substr($_SERVER['REQUEST_URI'],1));
define('C_PAGE',$c_page ?: 'index');
define('LOGGED',$_SESSION['user']['id'] ?: 0);
if(in_array(C_PAGE,array('page_1','page_2','page_3')) && !LOGGED){ header('Location: login.html'); exit; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:11:34.933

您应该使用会话变量（或 cookie）真正跟踪他们的入口。其中任何一个都可以被阻止......但它们更接近“万无一失”。也就是说，任何东西都可以伪造......所以如果安全性至关重要，请使用组合和/或强大的唯一字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:07:52.257

就个人而言，我发现声明一个或多个应该有权访问文件的用户组（类）更可靠，然后包含一个页面，如果登录用户不在这些组中，则返回 401 错误。例如

```
session_start();
...
$access = 'admin';
include 'inc/guard.php'; 
```

听起来在您的情况下，您想要“公共”和“登录”，这略有不同，但我的警卫脚本也涵盖了这种情况。在那里，我只是检查`$_SESSION`变量是否为空（我在登录时将内容插入其中）：

```
if($access != 'public' && empty($_SESSION)) {
    header('HTTP/1.1 401 Unauthorized', true);
    include 'inc/login.php';
    exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:14:13.777

根据您使用的服务器端软件堆栈，此变量由网络服务器或 fastcgi 包装器设置。

硬件/软件堆栈中的 URL 重写和不透明代理会影响您在脚本中看到的值。

例如，Nginx 可以将 URL 从 /test.html 重写为 /index.php?action=test，然后将其传递给您的网络服务器。当您的应用程序看到 /index.php?action=test 时，用户会调用 /test.html

结论：REQUEST_URI 是传递给网络服务器的 URI，可以作为基于 URL 的访问控制的参考。

编辑：

只是为了避免混淆，因为我已经看到了其他回复......

据我了解，您的问题是：您想检查当前请求且已获得密码授权的用户是否有足够的权限来访问特定的 URL。同样，是的，您可以使用请求 uri 作为参考值

# php - 如果我给出相对路径但我可以使用直接路径找到它，为什么我找不到该文件？

> ID：13394096
> 
> 赞同：0
> 
> 时间：2012-11-15T08:52:52.063
> 
> 标签：php, mime

我正在尝试使用 mime->addAttachment() 将附件添加到我要发送的电子邮件中

相对路径：`../../clientdata/client1/attachments/file.txt`

直接路径：`/home/hosting/site.eu/html/ssl/clientdata/client1/attachments/file.txt`

脚本位置：`/home/hosting/site.eu/html/ssl/work/php_scripts/send_email.php`

send_email.php 使用以下命令执行：

```
exec("php /home/hosting/site.eu/html/ssl/work/php_scripts/send_email.php"); 
```

我在这里缺少什么吗？

我用来添加附件的代码：

```
$f = 'ssl.site.eu/clientdata/client1/attachments/file1.txt';  
$arr_file = explode('/', $f, 2);
$file_path = '/home/hosting/site.eu/html/ssl/'.$arr_file[1]; //this works
// $file_path = '../../'.$arr_file[1]; // this doesn't work;
$mime->addAttachment($file_path,'application/octet-stream'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:57:02.937

注意你的进程的工作目录。

现在下面的代码是否给出了正确的路径？ `echo getcwd().$relative_path;`

[PHP getcwd()](http://php.net/manual/en/function.getcwd.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:35:37.947

如果您包含一些与代码执行文件相关的 PHP 文件，您必须确保包含这些文件相对于进程的当前目录，而不是该文件包含当前正在执行的代码。

# html - 在typo3中以编程方式扩展href

> ID：13394098
> 
> 赞同：0
> 
> 时间：2012-11-15T08:53:01.447
> 
> 标签：html, typo3, usability

在 Typo3 中以编程方式扩展属性 href 的最佳方法是什么？

链接是由 RTE 设置的，例如

```
<a class="download" target="_blank" href="fileadmin/ablage/test_material/pdf_1.pdf"> 
```

并应改为

```
<a class="download" target="_blank" href="fileadmin/ablage/test_material/pdf_1.pdf#zoom=100"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:08:58.157

未经测试的代码：

您可以尝试将该部分添加到参数中

```
lib.parseFunc_RTE.tags.link.typolink.parameter.append = TEXT
lib.parseFunc_RTE.tags.link.typolink.parameter.append {
  value = #zoom=100
  if.equals.data = parameters:0
  if.equals.substring = -3,3
  if.value = pdf
} 
```

或者您可以尝试使用“部分”

```
lib.parseFunc_RTE.tags.link.typolink.section.cObject = TEXT
lib.parseFunc_RTE.tags.link.typolink.section.cObject {
  value = zoom=100
  if.equals.data = parameters:0
  if.equals.substring = -3,3
  if.value = pdf
} 
```

但最重要的问题是“if”语句。我假设第一个参数是文件名（我不记得了）。最后 3 个字符应为“pdf”。如果您使用 DAM，则需要检索 UID 并从那里获取文件类型。

只是一个粗略的猜测，这可以给你一个提示，你有哪些参数：

```
lib.parseFunc_RTE.tags.link.typolink.parameter.append = TEXT
lib.parseFunc_RTE.tags.link.typolink.parameter.append {
  data = parameters : allParams
  htmlSpecialChars = 1
  wrap = ?debug=|
} 
```

附带说明：这将影响所有 RTE 字段！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:13:44.957

如果该链接有固定类，则可以使用 jQuery ...

```
jQuery(document).ready(function(){
  $('.download').each(function(){
    var linkhref = $(this).attr('href');
    $(this).attr('href', linkhref + '#zoom=100');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:23:24.860

这段代码做到了。

```
parseFunc_RTE.tags.link.typolink.parameter.append = TEXT
parseFunc_RTE.tags.link.typolink.parameter.append {
    value = #zoom=100
    if.equals.data = parameters : allParams
    if.equals.substring = -3,3
    if.value = pdf
} 
```

# xcode - UIViewController _loadViewFromNibNamed:bundle 加载了“XXXViewController”笔尖，但未设置视图出口。-*使用故事板*

> ID：13394099
> 
> 赞同：2
> 
> 时间：2012-11-15T08:53:09.920
> 
> 标签：xcode, uinavigationcontroller, storyboard, nib

我正在使用 Storyboard 浏览我的视图控制器。我有一个名为（RootVC）的根视图控制器，我已经通过“推送”segue 连接到下一个视图控制器（称为 SecondVC）。我在 RootVC 中有一个按钮，按下时会调用`pushViewController`。当我运行它时，我最终看到以下错误：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“SecondVC”笔尖，但未设置视图出口。

我环顾四周，看到很多人建议 UIView 没有正确连接到 xib 中。我正在使用 Storyboard，所以它有点不同，但我仍然可以看到我的 SecondVC 的视图插座连接到属于它的 UIView。从外观上看，Storyboard 默认情况下会建立这种关联。

有人对可能出现的问题有任何想法吗？如果需要我的 Storyboard 的屏幕截图，我可以提供。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-29T06:19:08.027

我有同样的问题，确保你没有

```
@synthesize view; 
```

在你的 viewcontroller .m 文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T15:17:05.807

在您的故事板中，右键单击文件的所有者并选择您的视图作为它的视图出口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-27T15:00:09.693

视图的名称“视图”是保留名称。当您想要合成一个名为“视图”的视图时，将发生此错误。

解决方案是将视图重命名为您自己的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T02:34:30.403

我不知道只是提供想法

你可能已经看到这个 ['NSInternalInconsistencyException'，原因：'-[UIViewController _loadViewFromNibNamed:bundle:] 加载了 GameView 笔尖，但没有设置视图出口](https://stackoverflow.com/questions/5464010/nsinternalinconsistencyexception-reason-uiviewcontroller-loadviewfromnib)

它与连接有关。界面构建器中的视图控制器元素的类名应与从 UIViewController 派生的适当类的类名（区分大小写）匹配。您不需要创建命名视图的 IBOutlet。进行清洁可能会有所帮助。这也可能是您的代码中的错字。

# c - 将格式化文件读入C中的char数组

> ID：13394102
> 
> 赞同：3
> 
> 时间：2012-11-15T08:53:16.907
> 
> 标签：c, arrays, file, char

我有一个非常简单的问题。我需要将文件的内容读入 C 中的 char 数组。该文件将始终格式化为两列字母，例如：

```
A B
B C
E X
C D 
```

每个字母代表图上的一个顶点，我稍后会处理。我学习过使用 C++ 和 Java 进行编程，但我对 C 并不是特别熟悉。

导致我无法弄清楚的问题是文件有多行长的事实。我需要每个字母占据数组中的一个槽，所以在这种情况下它会是： `array[0] = 'A', array[1] = 'B', array[2] = 'B', array[3] = 'C'`等等。

最终我需要数组不包含重复项，但我可以稍后处理。这个学期早些时候我写了一个程序，它从一个文件中读取一行整数，它工作得很好，所以我复制了大部分代码，但在这种情况下它不起作用。这是我到目前为止所拥有的：

```
#include <stdio.h>
#include <stdlib.h>

int main (int argc, char *argv[])
{
   int i;
   int count = 0;
   char * vertexArray;
   char ch = '\0';

// open file
   FILE *file = fopen( argv[1], "r" );

// count number of lines in file
   while  ((ch=fgetc(file)) != EOF)
        if(ch == '\n') count++;

// numbers of vertices is twice the number of lines
   int size = count*2;

// declare vertex array
    vertexArray = (char*) calloc(size, sizeof(char));

// read in the file to the array
   for(i=0; i<size; i++)
        fscanf(file, "%c", &vertexArray[i]);

// print the array
   for(i=0; i<size; i++)
        printf("%c\n", vertexArray[i]);

   fclose( file );
} 
```

我知道我需要测试文件打开和正确读取等等，但我稍后会添加。现在只是尝试读取数组。在这种情况下，我的输出是 8 个空行。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:21:14.913

当您遍历文件以计算行数时，文件指针已经位于`EOF`，因此您不会将任何内容读入数组。充其量它与您最后一个字符的值相同，但它可能会向您显示分段错误。

你想做的是

```
rewind(file); 
```

在你面前

```
//read file into the array 
```

那么您将从文件的开头开始。另外，我不确定如何`fgetc`处理行尾，因为通常会有尾随`'\0'`坐在那里。您可以这样做的另一种方法是`fscanf`像这样使用

```
i = 0;
while (!feof(file)){
   fscanf(file, "%c %c", &vertexArray[i], &vertexArray[i+1]);
   i++;
} 
```

该函数`feof(FILE *)`检查`EOF`标志是否已设置，并在您点击 时停止`EOF`。

**更新：**我认为如果您定义`ch`为`int ch`，它应该可以工作。看看[这个](https://stackoverflow.com/questions/4278845/count-the-lines-of-a-file-in-c)线程。

这是对我有用的代码：

```
int main (int argc, char *argv[])
{
    int i;
    int count = 0;
    char * vertexArray;
    int ch, size;

    FILE *file;
    file = fopen(argv[1], "r");

    while ((ch = fgetc(file) != EOF))
       count++;

    size = count*2;
    vertexArray = (char*) calloc(size, sizeof(char));
    rewind(file);

    for(i=0; i<size; i++)
       fscanf(file, "%c ", &vertexArray[i]);

    for(i=0; i<size; i++)
       fprintf(stderr, "%c\n", vertexArray[i]);

    fclose(file); 
```

}

**新编辑**注意 . 之后的空格`fscanf(file, "%c ", &vertexArray[i]);`。这`C`表明您想在阅读字符后跳过所有空格。如果没有空格，它也会将空格作为字符读取。这应该解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:56:54.450

`fgetc`推进文件位置指示器。您需要使用当前代码返回 0，或者在不关心行数的情况下读取行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:57:10.463

当你开始读入数据时，你已经用尽了文件的行数。您必须倒带或重新打开文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-13T18:44:44.133

您需要添加`fseek(file, 0, SEEK_SET);`

您的代码必须看起来：

```
//Some stuff

// declare vertex array
vertexArray = (char*) calloc(size, sizeof(char));

fseek(file, 0, SEEK_SET);
// read in the file to the array
   for(i=0; i<size; i++)
        fscanf(file, "%c", &vertexArray[i]);

//Some stuff 
```

# python - 如何在 Python 中找到装饰方法的包含类

> ID：13394103
> 
> 赞同：9
> 
> 时间：2012-11-15T08:53:17.733
> 
> 标签：python

我正在尝试实现一个装饰器类，它将装饰其他类中的方法。但是，我需要包含装饰器中可用的装饰方法的类。我似乎无法在任何地方找到它。

这是一个例子：

```
class my_decorator(object):

  def __init__(self, arg1, arg2):
    print(self.__class__.__name__ + ".__init__")
    self.arg1 = arg1
    self.arg2 = arg2

  def __call__(self, my_callable):
    print(self.__class__.__name__ + ".__call__")
    print(type(my_callable))
    self.my_callable = my_callable
#    self.my_callable_method_class = ?where to get this?

    def function_wrapper(*args, **kwargs):
      print(self.__class__.__name__ + ".function_wrapper")
      print(self.arg1)
      self.my_callable.__call__(*args, **kwargs)
      print(self.arg2)

    return function_wrapper

class MyClass(object):

  @my_decorator(arg1="one", arg2="two")
  def decorated_method(self):
    print(self.__class__.__name__ + ".decorated_method")
    print(type(self.decorated_method))
    print("hello")

m = MyClass()
m.decorated_method() 
```

这将打印出：

```
my_decorator.__init__
my_decorator.__call__
<type 'function'>
my_decorator.function_wrapper
one
MyClass.decorated_method
<type 'instancemethod'>
hello
two 
```

在装饰器类中，可调用对象是函数类型，而在类本身中，它是实例方法类型。我可以从 instancemethod 中获取 im_class，但函数中没有这样的东西。

如何从装饰器中获取包含装饰方法的类？

我可以这样做：

```
class my_decorator(object):

  def __init__(self, cls, arg1, arg2):

.
.

class MyClass(object):

  @my_decorator(cls=MyClass, arg1="one", arg2="two")
  def decorated_method(self):

.
. 
```

但我不想这样做，因为它是多余的而且不好。

或者我应该以其他方式实现这一点？我基本上需要装饰器的几个参数，并且我需要装饰器中的装饰方法的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:57:30.050

你可以装饰*班级*：

```
@decorate
class MyClass(object):

  @my_decorator(arg1="one", arg2="two")
  def decorated_method(self): 
```

并使用外部装饰器将类参数发送到内部。

* * *

您的任何提议都不起作用，因为它们需要在类*存在之前访问它*。当您定义一个类时，您首先在其主体内执行代码（定义函数等），然后将结果范围分配给该类作为其`__dict__`. 所以在`decorated_method`定义的时候，`MyClass`还不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:35:26.863

这是一个有效的修订版本。

```
# This holds all called method_decorators
global_method_decorator_list = []

class class_decorator(object):
  def __init__(self, arg1, arg2):
    print(self.__class__.__name__ + ".__init__")
    self.arg1 = arg1
    self.arg2 = arg2

  def __call__(self, my_class):
    print(self.__class__.__name__ + ".__call__")
    print(repr(my_class))
    print(my_class.__name__)
    self.cls = my_class
    class_decorators[my_class] = self
    self.my_class = my_class

    # Call each method decorator's second_init()
    for d in global_method_decorator_list:
      d._method_decorator_.second_init(self, my_class)

    def wrapper(*args, **kwargs):
      print(self.__class__.__name__ + ".wrapper")
      print(self.arg1)
      retval = self.my_class.__call__(*args, **kwargs)
      print(self.arg2)
      return retval

    return wrapper

class method_decorator(object):
  def __init__(self, arg1, arg2):
    print(self.__class__.__name__ + ".__init__")
    self.arg1 = arg1
    self.arg2 = arg2

  def __call__(self, my_callable):
    print(self.__class__.__name__ + ".__call__")
    print(repr(my_callable))
    self.my_callable = my_callable

    # Mark the callable and add to global list
    my_callable._method_decorator_ = self
    global_method_decorator_list.append(my_callable)

    def wrapper(*args, **kwargs):
      print(self.__class__.__name__ + ".wrapper")
      print(self.arg1)
      retval=self.my_callable.__call__(*args, **kwargs)
      print(self.arg2)
      return retval

    return wrapper

  def second_init(self, the_class_decorator, the_class):
    print(self.__class__.__name__ + ".second_init")
    print("The Class: " + repr(the_class))**

@class_decorator(arg1="One", arg2="Two")
class MyClass(object):

  @method_decorator(arg1="one", arg2="two")
  def decorated_method(self):
    print(self.__class__.__name__ + ".decorated_method")
    print(type(self.decorated_method))
    print("hello")

m = MyClass()
m.decorated_method() 
```

输出如下所示：

```
class_decorator.__init__
method_decorator.__init__
method_decorator.__call__
<function decorated_method at 0x3063500>
class_decorator.__call__
<class '__main__.MyClass'>
MyClass
method_decorator.second_init
The Class: <class '__main__.MyClass'>
class_decorator.wrapper
One
Two
method_decorator.wrapper
one
MyClass.decorated_method
<type 'instancemethod'>
hello
two 
```

不同之处在于该类现在有一个单独的装饰器。类装饰器的**call** () 将调用每个方法装饰器的“second_init()”方法，并在那里传递类。

有趣的是，method_decorator 的**call** () 将在 class_decorator 之前被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:22:52.687

如果将装饰器返回的对象设置为[描述符](http://docs.python.org/2/howto/descriptor.html)，则可以挂钩属性查找以返回链接方法和类（或实例）的其他对象。

对于方法样式描述符，您只需要实现该`__get__`方法。在类上查找方法时，下面两个是等价的：

```
m = MyClass.decorated_method
# It will actually get the object from any parent class too.  But this will do for a simple example
m = MyClass.__dict__['decorated_method'].__get__(MyClass) 
```

例如，以下是等价的：

```
instance = MyClass()
m = instance.decorated_method
m = type(instance).__dict__['decorated_method'].__get__(instance, type(instance)) 
```

所以表达式`instance.decorated_method(...)`实际上调用了你的`__get__`方法返回的对象。这与允许简单函数对象转换为添加隐式`self`参数的绑定方法对象的过程相同。

创建此可调用对象时，您应该拥有所需的所有信息。

# c++ - 向量的通用排序

> ID：13394105
> 
> 赞同：2
> 
> 时间：2012-11-15T08:53:20.687
> 
> 标签：c++, templates, sorting, stdvector

我想创建一个通用的排序函子，我可以用它来对我的向量进行排序。根据我的研究，我想出了以下代码。但是当我实现排序时，我得到一个如下所述的错误。请就如何做到这一点提出建议。我需要一个通用的排序，因为我有几个不同的用户定义对象，我需要使用不同的标准进行排序。

我的模板.h

```
template<typename T, typename M, template<typename> class C = std::less>
struct method_comparer : std::binary_function<T, T, bool>
{
explicit method_comparer(M (T::*p)() const) : p_(p) { }

bool operator ()(T const& lhs, T const& rhs) const
{
    return C<M>()((lhs.*p_)(), (rhs.*p_)());
}

private:
M (T::*p_)() const;
};

template<typename T, typename M>
method_comparer<T, M> make_method_comparer(M (T::*p)() const)
{
return method_comparer<T, M>(p);
}

template<template<typename> class C, typename T, typename M>
method_comparer<T, M, C> make_method_comparer2(M (T::*p)() const)
{
return method_comparer<T, M, C>(p);
} 
```

主文件

```
std::sort(vec_p2d.begin(),vec_p2d.end(),make_method_comparer(&Point2D::getX())); //ASC
std::sort(vec_p2d.begin(),vec_p2d.end(),make_method_comparer(&Point2D::getX(), std::greater<int>())); //DESC 
```

错误：

Assn3.cpp:379:115：错误：无法在没有对象的情况下调用成员函数 'int Point2D::getX() const'

# c - 检索文件/文件夹的图标/图像（CentOS）

> ID：13394113
> 
> 赞同：1
> 
> 时间：2012-11-15T08:53:55.943
> 
> 标签：c, gtk

有人可以建议我如何检索新创建的文件夹的图标或图像吗？请注意，我在 CentOS 上使用 GTK 和 C，我有这样的情况：我以编程方式使用`mkdir()`系统调用创建文件夹。创建新文件夹时，我需要从 GUI 角度查找为此文件夹创建的图标，但我不知道从哪里加载图像/图标。比如我们一般使用`GdkPixbuf`函数来显示/叠加图标。所以我的问题是，当创建一个新文件/文件夹时，我将如何获取为它们创建的图标（谁将创建这些图标），以便我可以使用图标的路径并使用它进行覆盖`GdkPixbuf`？

如果需要更多详细信息，请返回。

谢谢。

# java - JSP 和 Servlet 设置属性

> ID：13394117
> 
> 赞同：0
> 
> 时间：2012-11-15T08:54:24.707
> 
> 标签：java, jsp, servlets

我的问题很简单，但我对此感到困惑，请帮助我。

在 JSP 中，我从 Servlet1 接收一个 Attribute(idsList)，我想将此 Attribute(idsList) 发送到另一个 servlet，Servlet2，但我可以使用 session.setAttribute() 来做到这一点。我的问题是，我们如何在 JSP 本身中发送到 Servlet2？

这是我的代码，但它不起作用，因为相同的请求用于设置和获取。请帮个忙。

在 Servlet1 中：

```
request.setAttribute("idsList",idsList);---is null 
```

在 JSP 中

```
List<Integer> idsList =(List<Integer>)request.getAttribute("idsList");
System.out.println("size of ids list :"+idsList.size());
request.setAttribute("idsList",idsList); 
```

在 Servlet2 中：

```
request.getAttribute("idsList");---is null 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T09:05:41.003

[`RequestDispatcher`](http://docs.oracle.com/javaee/5/api/javax/servlet/RequestDispatcher.html)使用如下所示转发您的请求：

```
request.setAttribute("idsList",idsList);
RequestDispatcher rd = getServletContext().getRequestDispatcher("servlet2");
rd.forward(request, response); 
```

您可以`request.getAttribute("idsList")`在 servlet2 上使用。

不要`response.sendRedirect()`用于发送`request`对象。

**编辑 ：**

我在您的问题下方找到了一条评论：

*ru 使用 setAttribute 在 JSP 中获取价值？是的*

一般来说，JSP 被用作**VIEW**透视图，所以，

**它不应包含业务逻辑**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:58:35.763

如果使用 RequestDispatcher 转发请求，那么请求对象是相同的。

但是如果你使用response.sendRedirect()，将会创建一个新的请求对象，并且无法检索之前请求对象中设置的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:00:24.863

您在其中设置属性的请求对象，请求将结束，并在您提交 jsp 时创建一个新的请求对象。

您可以使用会话来设置属性，也可以在表单中设置一个隐藏字段，当提交给 servlet

正如 Munesh 建议的那样，您需要再次确认，您如何将控件转发到 JSP 1) SendRedirect 2) Request Dispatcher

# geolocation - 在 Firefox getCurrentPosition 中使用 Dart 进行地理定位不是函数

> ID：13394124
> 
> 赞同：4
> 
> 时间：2012-11-15T08:54:48.167
> 
> 标签：geolocation, dart, dart-html

我已经在 Dart 中编写了这段代码

```
window.navigator.geolocation.getCurrentPosition((Geoposition position) {
    window.alert(position.coords.latitude.toString());
}); 
```

当我在 Dantium 或 Google Chrome 中运行它时，它运行良好，但如果我尝试在 Firefox 中运行它，我会收到这个 JavaScript 错误

```
Timestamp: 15/11/12 21:36:19
Error: TypeError: getCurrentPosition$1 is not a function 
```

这很奇怪，好像我只是使用 html5 JavaScript 编写的

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
}

function showPosition(position) {
    var latlon=position.coords.latitude+","+position.coords.longitude;
    alert(latlon);
} 
```

它在 Firefox 中运行良好。

Firefox 版本为 16.0.2，Dart Editor 版本为 0.2.3_r14669，Dart SDK 版本为 0.2.3.0_r14669。

这是一个错误还是我做错了什么？

编辑：

这是一个错误[http://code.google.com/p/dart/issues/detail?id=6733&q=getCurrentPosition&colspec=ID%20Type%20Status%20Priority%20Area%20Milestone%20Owner%20Summary](http://code.google.com/p/dart/issues/detail?id=6733&q=getCurrentPosition&colspec=ID%20Type%20Status%20Priority%20Area%20Milestone%20Owner%20Summary)，但它被标记为已修复现在，@Pete Blois 如下所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:10:23.447

Issue has been fixed, as well as an issue causing it to not work on IE10.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:43:18.377

请提交一个错误，我们会处理它。谢谢！

[http://dartbug.com/new](http://dartbug.com/new)

# asp.net-mvc - 当用户单击 WebGrid 中的添加新行时，我们如何添加新行？

> ID：13394126
> 
> 赞同：1
> 
> 时间：2012-11-15T08:54:59.653
> 
> 标签：asp.net-mvc, razor, webgrid

当用户单击“添加新行”时，我遇到了一个问题，需要使用 MVC3 Razor 在 Web 网格的底部添加一个行。我通过显示模态弹出对话框并在数据库中添加记录添加新记录来完成此要求最后在启用分页时。但客户端需要在表格底部添加一行并授予在输入字段中输入数据并保存的权限。

当在 Web 网格中启用分页时我们可以这样做吗？我们是否有任何内置属性来添加行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:47:46.923

我在一篇文章中发现我们无法在 WebGrid 中创建行。所以我已经像这样使用 jQuery

```
$('#btnCreateUser').click(function () {
            var newRow = "<tr> <td></td> <td><input type='text' id='tbNameDyn'/></td> <td> <input type='text' id='tbAgeDyn'/></td> <td><input type='checkbox' id='tbResultDyn'/></td><td><input type='submit' name='submitButton' value='Save Row' id='btnSaveRowDyn' onclick='DynButtonClick();'> </td></tr>";
            //  $('#webgrid > tbody:last').
            $('#webgrid tbody:last').append(newRow);
            $('#btnSaveRow').removeAttr('disabled');

        }); 
```

# parse-platform - 使用 parse.com 查询 2 个字段

> ID：13394127
> 
> 赞同：0
> 
> 时间：2012-11-15T08:55:15.600
> 
> 标签：parse-platform

我需要对同一类的 2 个字段进行查询。我在用着：

```
PFQuery *fewWins = [PFQuery queryWithClassName:@"FlightsDB"];

[fewWins whereKey:@"Name" containsString:searchText];

PFQuery *lotsOfWins = [PFQuery queryWithClassName:@"FlightsDB"];

[lotsOfWins whereKey:@"IATA" containsString:searchText]; 
```

问题是我得到不一致的结果或根本没有正确的结果。

# javascript - 插入到数组的隐藏字段数组

> ID：13394128
> 
> 赞同：2
> 
> 时间：2012-11-15T08:55:20.977
> 
> 标签：javascript, arrays, post

我有：

```
<form id="postform" action="order_total.php" method="POST">
<input type="hidden" name="post_data[]" id="post_data" value="">
</form> 
```

在一些javascript函数中，我填充了一个这样的数组：

```
var postdata = [];
var article = [];
article.push('a','b','c');  
postdata.push(article);
article = [];
article.push('a','b','c');  
postdata.push(article);
article = [];
article.push('a','b','c');  
postdata.push(article); 
```

在此之后我会这样做：

```
$("#post_data").val(postdata);
$("#postform").submit(); 
```

但是当我试图在“order_total.php”中显示“postdata”时，它看起来像一个字符串：

```
Array ([0] => a,b,c,a,b,c,a,b,c) 
```

但我需要将这些数据作为数组发布：

```
Array ([0] => Array ([0] => a, [1] => b, [2] => c),
[1] => Array ([0] => a, [1] => b, [2] => c),
[2] => Array ([0] => a, [1] => b, [2] => c)); 
```

我做错了什么？

使用 ajax 的 PS 很好，但我需要发布重定向到此页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:01:52.317

If`postdata`是一个数组（或对象），并且您尝试将其设置为输入字段中的值，例如：

```
$("#post_data").val(postdata); 
```

你会得到意想不到的行为，因为输入字段的值通常只能包含字符串。解决这个问题的最简单（也是最安全）的方法是将对象字符串化为 JSON：

```
$("#post_data").val(JSON.stringify(postdata)); 
```

然后在服务器或中间件中再次对其进行解码。

# objective-c - iOS / 越狱上的 tcpdump

> ID：13394130
> 
> 赞同：3
> 
> 时间：2012-11-15T08:55:23.643
> 
> 标签：objective-c, ios, jailbreak, libpcap, tcpdump

是否有与 iOS 兼容的`tcpdump`C 源的 Objective-C 端口或`tcpdump`适用于 iOS 的二进制文件？如果是这样，它是否会捕获来自*所有*网络设备的流量？还是仅捕获以太网设备？`libpcap`iOS有吗？我知道，这需要越狱的电话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:00:17.780

两者都是：

[http://planet-iphones.com/cydia/id/tcpdump](http://planet-iphones.com/cydia/id/tcpdump)

[http://planet-iphones.com/cydia/id/libpcap](http://planet-iphones.com/cydia/id/libpcap)

但是我不明白你为什么想要一个 Objective-C 端口？

# objective-c - ScrollRectToVisible 函数

> ID：13394132
> 
> 赞同：1
> 
> 时间：2012-11-15T08:55:34.443
> 
> 标签：objective-c, ios, uiscrollview

我有一个`UIScrollview`，其中包含`UIView`一个子视图，例如，

![带有 uiview 的滚动视图](../Images/f8664aba6442155de271b3f4ce8622b6.png)

在这里我可以拖动`UIView`里面`ScrollView`，当uiview转到**END RIGHT**或**END LEFT**时，uiview在scrollview内消失，之后我必须滚动scrollview然后我才能看到uiview，这里我需要**滚动`SCROLLVIEW`**当 uiview 出现在右侧或左侧时，为此我使用了此代码但无法正常工作。

```
[myscrollview scrollRectToVisible:myview.frame animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T12:34:13.120

在这里，我在 UIButton 上使用过（因为它已经在我的一个应用程序中使用过，我不需要再次编写整个代码）

```
[cropRectangleButton addTarget:self action:@selector(imageMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside]; 
```

`cropRectangleButton`是一个UIButton，方法`imageMoved:withEvent:`如下

```
- (IBAction) imageMoved:(id)sender withEvent:(UIEvent *)event
{
    CGPoint point = [[[event allTouches] anyObject] locationInView:self.view];

    CGPoint prev = lastTouchDownPoint;
    lastTouchDownPoint = point;
    CGFloat diffX = point.x - prev.x;
    CGFloat diffY = point.y - prev.y;

    UIControl *button = sender;
    CGRect newFrame = button.frame;
    newFrame.origin.x += diffX;
    newFrame.origin.y += diffY;
    scrollView.contentSize = CGSizeMake(2*scrollView.frame.size.width, scrollView.frame.size.height);
    [scrollView scrollRectToVisible:newFrame animated:YES];
    button.frame = newFrame;
} 
```

在这里，我更改了 scrollView 的 contentSize，因为测试 scrollView 是否正在滚动非常狭窄，您不需要那行代码。

当我向左拖动按钮时，scrollView 也会自动滚动到按钮框架以显示整个按钮尝试使用 UIView 实现这一点，如果不可能，只需在您的视图上放置一个透明的 UIButton 完全覆盖视图，然后您就可以执行拖 ：）

# java - 在索引中搜索作为搜索词前缀的词，反之亦然 (!)

> ID：13394134
> 
> 赞同：7
> 
> 时间：2012-11-15T08:55:35.610
> 
> 标签：java, lucene

如果我搜索“bahnhofstrasse”，我希望 Lucene 找到包含术语“bahnhofstr”的文档，即，我不仅想查找包含我的搜索词作为前缀的术语的文档，还想查找包含术语的文档它们本身就是我的搜索词的前缀......

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:57:25.743

如果我对您的理解正确，并且您的搜索字符串是一个确切的字符串，您可以`queryParser.setAllowLeadingWildcard(true);`在 Lucene 中设置以允许前导通配符搜索（这可能会或可能不会很慢 - 我已经看到它们相当快，但在有只有 60,000 多个 Lucene 文档）。

您的示例查询语法可能类似于：

```
*bahnhofstr bahnhofstr* 
```

或者可能（没有测试过）只是：

```
*bahnhofstr* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:35:45.863

我认为模糊查询可能对您最有帮助。这将根据与您的查询的 Levenshtein 距离对术语进行评分。如果没有指定最小相似度，它将有效地匹配每个可用的术语。这可能会使其性能不佳，但确实可以完成您正在寻找的东西。

模糊查询由 ~ 字符表示，例如：

```
firstname:bahnhofstr~ 
```

或具有最小相似性（0 到 1 之间的数字，0 是最松散的，没有最小值）

```
firstname:bahnhofstr~0.4 
```

或者，如果您正在构建自己的查询，请使用[FuzzyQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/FuzzyQuery.html)

这与您指定的不太完全一致，但却是最简单的接近方式。

至于你正在寻找什么，我不知道一个简单的 Lucene 调用来完成它。我可能只是将术语拆分为一系列术语查询，您可以在查询字符串中表示如下：

```
firstname:b
firstname:ba
firstname:bah
firstname:bahn
firstname:bahnh
firstname:bahnho
firstname:bahnhof
firstname:bahnhofs
firstname:bahnhofst
firstname:bahnhofstr* 
```

顺便说一句，我自己实际上不会为它生成查询字符串。我只是自己构建 TermQuery 和 PrefixQuery 对象。

评分会有点扭曲，我可能会更高地提升更长的查询以获得更好的排序，但这是我想到的方法，可以很容易地完成你正在寻找的东西。[DisjunctionMaxQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/api/core/org/apache/lucene/search/DisjunctionMaxQuery.html)将帮助您将此类内容与其他术语一起使用并获得更合理的评分。

希望模糊查询对您有用。似乎是一个更好的解决方案。

如果您对这种性质的查询有很多需求，另一种选择可能是在索引时将字段标记为 n-gram（请参阅[NGramTokenizer](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/api/all/org/apache/lucene/analysis/ngram/NGramTokenizer.html)），这将允许您有效地使用[NGramPhraseQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/NGramPhraseQuery.html)来实现您想要的结果。

# android - finish() 和 ActivityName.this.finish() 有什么区别？

> ID：13394136
> 
> 赞同：0
> 
> 时间：2012-11-15T08:55:59.273
> 
> 标签：android, android-activity, activity-finish

`finish()`和有什么区别`ActivityName.this.finish()`吗？如果我们有带有 name 的活动`SampleActivity`，我们可以通过调用`finish()`和 by来完成它`SampleActivity.this.finish()`。有什么不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T08:57:07.100

大多数时候它是相同的，除非你在一个内部类中。

在这种情况下，第二种表示法用于消除对包含活动方法的调用的歧义。

例如：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    finish(); // the activity's finish()

    new Runnable() {

        private void finish() {
            ...
        }

        @Override
        public void run() {
            SampleActivity.this.finish(); // the activity's finish()
            finish(); // the runnable's finish()
        }
    };

    new Runnable() {

        @Override
        public void run() {
            SampleActivity.this.finish(); // the activity's finish()
            finish(); // the activity's finish() (because the inner class doesn't hide it
        }
    };
} 
```

# ruby-on-rails - 一些调整后，设计注册路径为编辑操作生成不正确的路由

> ID：13394138
> 
> 赞同：1
> 
> 时间：2012-11-15T08:56:19.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我试图重命名 Devise 提供的所有注册路线，但现在我无法再更新帐户信息了。它通过 GET 请求呈现`registrations#edit`操作没有问题，但 PUT 和 DELETE 请求都以某种方式进入 sign_up 路径。

这是我当前的路线文件：

```
...

devise_for :users, path: '', path_names: { sign_in: 'login', sign_out: 'logout', sign_up: 'signup' }, controllers: { registrations: "registrations" }, skip: [:registrations]

as :user do
    get '/admin/cancel' => 'registrations#cancel', as: :cancel_user_registration
    post '/signup' => 'registrations#create', as: :user_registration
    get '/signup' => 'registrations#new', as: :new_user_registration
    get '/admin/settings/account' => 'registrations#edit', as: :edit_user_registration
    put '/admin/settings/account' => 'registrations#update', as: :update_user_registration
    delete '/admin/settings/account' => 'registrations#destroy', as: :destroy_user_registration
end 
```

现在，当我访问“/admin/settings/account”时，它会按预期呈现编辑帐户视图。但是“更新”按钮使用 PUT 方法指向“/signup”，而“取消我的帐户”链接也指向“/signup”，但使用方法 DELETE。

然后我深入研究了渲染“注册/编辑”的视图，发现了这些

`<%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %> ...`

`... <%= link_to "Cancel my account", registration_path(resource_name), confirm: "Are you sure?", method: :delete %> ...`

所以`registration_path(resource_name)`实际上负责为 PUT 和 DELETE 生成正确的路由。但是由于我更改了默认的设计注册路线，它不再能够识别和吐出正确的路径。

有谁知道我该如何解决这个问题？实际上是什么`registration_path(resource_name)`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:55:50.203

您应该将表单路径更改为您创建的路径。像这样：

```
<%= simple_form_for(resource, as: resource_name, url: update_user_registration_path, html: { method: :put }) do |f| %>

<%= link_to "Cancel my account", destroy_user_registration_path, confirm: "Are you sure?", method: :delete %> 
```

当我写我的答案时，我尝试用谷歌搜索源代码，这样我就可以给你看，但我找不到。无论如何，`registration_path`接收一个参数，它是您要创建、更新或销毁的模型的名称，然后返回适当的 url 以进行调用。因此，假设您有 2 个角色或模型：用户和管理员。现在，使用相同的代码，您可以使用该路径销毁两者。为用户返回并`<%= link_to "Cancel my account", registration_path(resource_name), method: :delete %>`为管理员返回。`/users/cancel``/admins/cancel`

在您的 routes.rb 文件中，您正在为某个模型定义路线的名称，对吗？这就是你对 line 所做的事情`as :user do`。您正在为用户定义路线的名称。因此，让我们继续以取消帐户为例。有了这个：

```
as :user do
  delete 'delete_account' => 'registrations#destroy', as: :destroy_user_registration
end 
```

您可以`destroy_user_registration_path`不通过就使用，`resource_name`因为设计人员已经知道此 url 与 User 模型相关。

编辑：即使您有多个模型，您也可以在视图中更改`registration_path(resource_name)`为`update_user_registration_path`。请记住，所有这些方法所做的只是创建一个您提交表单的 url，仅此而已。

您唯一需要注意的是编辑您的路线文件。

# jquery - jQuery多重选择器与否决

> ID：13394139
> 
> 赞同：0
> 
> 时间：2012-11-15T08:56:21.190
> 
> 标签：jquery

我有一个 div 列表，我想使用 2 组复选框进行过滤：`Type`和`Category`.

当检查2个类别时，应显示DIV至少包含1个类别的DIV。

检查类型时，它应该只显示该类型的 DIV。即使它包含选中的类别。

```
<input type="checkbox" name="type[]" value="Type 1">
<input type="checkbox" name="type[]" value="Type 2">
<input type="checkbox" name="type[]" value="Type 3">

<input type="checkbox" name="category[]" value="1">
<input type="checkbox" name="category[]" value="2">
<input type="checkbox" name="category[]" value="3">
<input type="checkbox" name="category[]" value="4"> 
```

DIV的：

```
<div data-type="Type 1" data-cat="1 4">
<div data-type="Type 2" data-cat="1 2 3"> 
```

我到目前为止的代码（仅过滤器类型）：

```
$('form input:checkbox').change(function(){
  var type = [];
  var checked = $(':checkbox:checked').length;

  // Hide all
  $('#videoHolder').children('div').hide();

  $(':checkbox:checked').each(function(i){
    type[i] = $(this).val();
    $('#videoHolder').children('div[data-type="' + type[i] + '"]').fadeIn();
  });

  // Show all
  if(checked==0){
      $('#videoHolder').children('div').fadeIn();
  } 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:12:31.347

您需要手动检查每个类别属性。或者你可以考虑使用 jQuery 的[regEx](https://stackoverflow.com/questions/345194/regular-expression-field-validation-in-jquery)插件。

```
// select only category check box-es!!
$(':checkbox:checked').each(function(i, checkBox){

    var search = $(checkBox).val();

    $('#videoHolder').children('div').each(function(index, divTag) {
      var category = $(divTag).attr("data-cat");
      var dataType = $(divTag).attr("data-type");

     if (isOfType(search, dataType) || containsCategory(search, category))
         $(divTag).fadeIn();
     });
  }); 
```

# markdown - 生成 Markdown 表？

> ID：13394140
> 
> 赞同：6
> 
> 时间：2012-11-15T08:56:22.047
> 
> 标签：markdown, pandoc

有没有办法从对象（Python/Ruby/Java/C#）生成表？

我想以编程方式创建一个简单的表。我有一些对象，我想将一些属性映射到标题并将集合映射到行。

为什么要降价？因为我想稍后手动编辑该文档。现在，整个过程是这样的：

*   报告引擎在 C# 中
*   有从中生成 DOCX 的对象（有中间 XML 或类似的东西）
*   几乎总是我必须做一些小的修复，我必须在 MS Word 中打开那个 docx 文档
*   要求开发团队修复每一个错误是很麻烦的，因为他们根本没有时间立即修复，我必须等待下一个版本。

我发现如果我能得到 Markdown 文档，我可以轻松地编辑它，插入一些变量并使用 pandoc 用给定的数据替换这些变量。但要获得 Markdown，我必须知道开发人员如何在 Markdown 中生成表格。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T05:29:08.977

我需要做几乎相同的事情来生成 Doxygen Markdown 表，所以我想我会分享。我已经在 Python 2.7 和 3.3 中成功运行了示例代码，尽管我不能声称我已经对其进行了严格的测试。

```
# Generates tables for Doxygen flavored Markdown.  See the Doxygen
# documentation for details:
#   http://www.doxygen.nl/manual/markdown.html#md_tables

# Translation dictionaries for table alignment
left_rule = {'<': ':', '^': ':', '>': '-'}
right_rule = {'<': '-', '^': ':', '>': ':'}

def evalute_field(record, field_spec):
    """
    Evalute a field of a record using the type of the field_spec as a guide.
    """
    if type(field_spec) is int:
        return str(record[field_spec])
    elif type(field_spec) is str:
        return str(getattr(record, field_spec))
    else:
        return str(field_spec(record))

def table(file, records, fields, headings, alignment = None):
    """
    Generate a Doxygen-flavor Markdown table from records.

    file -- Any object with a 'write' method that takes a single string
        parameter.
    records -- Iterable.  Rows will be generated from this.
    fields -- List of fields for each row.  Each entry may be an integer,
        string or a function.  If the entry is an integer, it is assumed to be
        an index of each record.  If the entry is a string, it is assumed to be
        a field of each record.  If the entry is a function, it is called with
        the record and its return value is taken as the value of the field.
    headings -- List of column headings.
    alignment - List of pairs alignment characters.  The first of the pair
        specifies the alignment of the header, (Doxygen won't respect this, but
        it might look good, the second specifies the alignment of the cells in
        the column.

        Possible alignment characters are:
            '<' = Left align (default for cells)
            '>' = Right align
            '^' = Center (default for column headings)
    """

    num_columns = len(fields)
    assert len(headings) == num_columns

    # Compute the table cell data
    columns = [[] for i in range(num_columns)]
    for record in records:
        for i, field in enumerate(fields):
            columns[i].append(evalute_field(record, field))

    # Fill out any missing alignment characters.
    extended_align = alignment if alignment != None else []
    if len(extended_align) > num_columns:
        extended_align = extended_align[0:num_columns]
    elif len(extended_align) < num_columns:
        extended_align += [('^', '<')
                           for i in range[num_columns-len(extended_align)]]

    heading_align, cell_align = [x for x in zip(*extended_align)]

    field_widths = [len(max(column, key=len)) if len(column) > 0 else 0
                    for column in columns]
    heading_widths = [max(len(head), 2) for head in headings]
    column_widths = [max(x) for x in zip(field_widths, heading_widths)]

    _ = ' | '.join(['{:' + a + str(w) + '}'
                    for a, w in zip(heading_align, column_widths)])
    heading_template = '| ' + _ + ' |'
    _ = ' | '.join(['{:' + a + str(w) + '}'
                    for a, w in zip(cell_align, column_widths)])
    row_template = '| ' + _ + ' |'

    _ = ' | '.join([left_rule[a] + '-'*(w-2) + right_rule[a]
                    for a, w in zip(cell_align, column_widths)])
    ruling = '| ' + _ + ' |'

    file.write(heading_template.format(*headings).rstrip() + '\n')
    file.write(ruling.rstrip() + '\n')
    for row in zip(*columns):
        file.write(row_template.format(*row).rstrip() + '\n') 
```

这是一个简单的测试用例：

```
import sys

sys.stdout.write('State Capitals (source: Wikipedia)\n\n')

headings = ['State', 'Abrev.', 'Capital', 'Capital since', 'Population',
            'Largest Population?']

data = [('Alabama', 'AL', '1819', 'Montgomery', '1846', 155.4, False,
         205764),
        ('Alaska', 'AK', '1959', 'Juneau', '1906', 2716.7, False, 31275),
        ('Arizona', 'AZ', '1912', 'Phoenix', '1889',474.9, True, 1445632),
        ('Arkansas', 'AR', '1836', 'Little Rock', '1821', 116.2, True,
         193524)]

fields = [0, 1, 3, 4, 7, lambda rec: 'Yes' if rec[6] else 'No']

align = [('^', '<'), ('^', '^'), ('^', '<'), ('^', '^'), ('^', '>'),
         ('^','^')]

table(sys.stdout, data, fields, headings, align) 
```

给出这个输出：

```
State Capitals (source: Wikipedia)

|  State   | Abrev. |   Capital   | Capital since | Population | Largest Population? |
| :------- | :----: | :---------- | :-----------: | ---------: | :-----------------: |
| Alabama  |   AL   | Montgomery  |     1846      |     205764 |         No          |
| Alaska   |   AK   | Juneau      |     1906      |      31275 |         No          |
| Arizona  |   AZ   | Phoenix     |     1889      |    1445632 |         Yes         |
| Arkansas |   AR   | Little Rock |     1821      |     193524 |         Yes         | 
```

Doxygen 将其呈现为：

![样本](../Images/c5ddefa1a1e6dc150a19e86a637ac6d8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T17:33:56.093

我需要为[最近的一个项目](http://shoppingukapp.com)以编程方式生成 Markdown，所以我构建了一个库并将其发布在 GitHub 上。希望您会发现它很有用。

该项目称为[MarkdownLog](http://markdownlog.com)，它是一个轻量级（即最小依赖项）、可移植的 .NET 库 (PCL)，可以从 .NET 数据结构（如集合和字典）生成 Markdown。我使用它来记录内部程序数据结构以进行诊断，但它也应该满足您的需求。

以下是从集合构建 Markdown 表的方式：

```
var data = new[]
{
    new{Year = 1991, Album = "Out of Time", Songs=11, Rating = "* * * *"},
    new{Year = 1992, Album = "Automatic for the People", Songs=12, Rating = "* * * * *"},
    new{Year = 1994, Album = "Monster", Songs=12, Rating = "* * *"}
};

Console.Write(data.ToMarkdownTable());

// Produces:
//
//     Year | Album                    | Songs | Rating   
//     ----:| ------------------------ | -----:| --------- 
//     1991 | Out of Time              |    11 | * * * *  
//     1992 | Automatic for the People |    12 | * * * * *
//     1994 | Monster                  |    12 | * * * 
```

*请注意，当使用 GitHub 风格的 Markdown 解析器解析此输出时，它将生成一个 HTML 表格。*

默认情况下，列根据其数据类型对齐（数字右对齐，字符串左对齐），标题名称由对象的属性名称生成。如果这不是您想要的，那么有许多覆盖可以让您更好地控制输出。

内置支持所有[标准 Markdown 元素](http://daringfireball.net/projects/markdown/syntax)和[GFM 表格](https://help.github.com/articles/github-flavored-markdown#tables)。我还添加了一些我需要的额外元素类型（条形图、iOS UITableView），它们以[代码块](http://daringfireball.net/projects/markdown/syntax#precode)的形式实现，因此它们仍然符合 Markdown 标准。

我最近才将代码上传到 GitHub，所以文档现在是基本的。话虽如此，项目中有大量的单元测试，应该可以演示它是如何工作的。

我很感激自从提出这个问题以来已经有一段时间了，但我希望这个项目对某人有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-26T11:36:38.810

使用 Apache Freemarker 通过 Java 代码呈现 HTML，然后将其转换为 Markdown。这是将 HTML 表格转移到 markdown 的地方。

[Flexmark-java 将 HTML 表格转换为 Markdown](https://github.com/vsch/flexmark-java/blob/master/flexmark-java-samples/src/com/vladsch/flexmark/java/samples/HtmlToMarkdownSample.java)

# jquery - Jquery附加元素不显示样式

> ID：13394144
> 
> 赞同：-5
> 
> 时间：2012-11-15T08:56:38.333
> 
> 标签：jquery, html, css

所以说我有：

```
$('#content').append('<div id="groups" style="width: 300px; background-color: #888;"><ul class="leftnav" style="list-style-type: none;">'); 
```

但是它的样式不正确，类和样式本身都有效，看起来就像我刚刚做的那样：

```
$('#content').append('<div id="groups"><ul>'); 
```

我宁愿让类样式工作而不是使用 style="" 因为我有 :hover 事件等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T09:01:58.290

您编写的代码将附加一个仅包含空 UL 的 DIV。该元素没有高度，因此不会显示背景颜色。该样式`list-style-type: none;`也将不可见，因为您没有列表项。

如果您将项目添加到列表中，它们将具有您指定的样式。

[演示](http://jsfiddle.net/yyb2e/)

但是请注意，这`append`将插入*实际的 DOM 节点*，而不仅仅是 HTML 文本片段。这意味着这`$('<div>')`将是一个实际的 DIV，而不仅仅是一个开始标签。

如果您希望您的标签在文档中保持打开状态，以便您可以以某种方式继续以`#content` [这种方式](http://jsfiddle.net/Sbaj7/)添加元素，您会看到元素被添加到外部`#groups`（因为组在 UL 之后立即关闭)，并且您的样式将不会被应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:02:31.597

设置div的高度

```
height:100px;  // You will see the difference
               // as the UL is currently empty 
```

你需要`set the height`的 div 因为它是静态的并且里面的内容是空的..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:02:59.053

您应该放置结束标签。高度也是相当的点

```
 $('#content').append('<div id="groups" style="width: 300px; height:200px; background-color: #888;"><ul class="leftnav" style="list-style-type: none;"></ul></div>'); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-15T09:07:46.483

```
$('#content').append('<div id="groups"><ul class="leftnav" style="list-style-type: none;"/></div>');​ 
```

代码如上更改

[http://jsfiddle.net/sameerast/U3qbB/1/](http://jsfiddle.net/sameerast/U3qbB/1/)

# html - 使用 html5 模式在 tinymce 中的标头之外写入

> ID：13394149
> 
> 赞同：1
> 
> 时间：2012-11-15T08:57:01.337
> 
> 标签：html, tinymce

我已将 tinymce 架构更改为 HTML5。当我插入一个`header`或任何其他 HTML5 元素时，我无法从中写出一些东西。

无法在外部单击、按 Enter 甚至无法使用键盘键（向上、向下、...等）。

唯一的方法是打开`html`代码并将我的代码手动放在之前或之后，这是不理智的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T09:18:15.670

我自己发现的，

`end_container_on_empty_block`初始化 TinyMCE 时必须设置为 true：

```
tinyMCE.init({
    end_container_on_empty_block: true
}); 
```

然后双击`Enter`意志解决问题。

**编辑**
按主页，然后双击`Enter`将允许您插入之前的任何内容。

# c# - 区分用户输入“0”或将 TextBox 留空的情况

> ID：13394162
> 
> 赞同：0
> 
> 时间：2012-11-15T08:58:06.960
> 
> 标签：c#, asp.net, type-conversion

好吧，问题标题可能无法自我解释，所以让我继续详细说明。

考虑一个仅接受*数值或留空的**TextBox*。输入的值（文本）存储在一个整数（*int32*）变量中。当用户输入数字 0 或将*TextBox*留空时，就会出现问题，因为从字符串到 int 的转换也会将空字符串转换为“0”。

 *****所以我的问题**是：*如何区分这两种情况？*

**编辑我认为****代码**和确切问题可能会回答很多问题（*如我所见*）

```
 if (txtOtherId.Text == string.Empty)
    {
        otherId = Convert.ToInt32(null);
    }
    else
    {
        otherId = Convert.ToInt32(txtOtherId.Text);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:03:18.923

扩展方法怎么样？

```
public static class Extensions
{
  public static bool TryGetInt(this TextBox tb, out int value)
  {
    int i;
    bool parsed = int.TryParse(tb.Text, out i);
    value = i;

    return parsed;
  }
} 
```

用法：

```
int i;

if (textBox1.TryGetInt(out i))
{
    MessageBox.Show(i.ToString());
}
else
{
    // no integer entered
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:01:10.850

您可以使用可为[空的 int](http://msdn.microsoft.com/en-us/library/2cf62fcy%28v=vs.80%29.aspx)，然后将空白字符串设为空。

```
int? myValue = String.IsNullOrEmpty(myTextbox.Text) 
        ? (int?)null 
        : int.Parse(myTextbox.Text); 
```

为清楚起见，上述等价于

```
int? myValue = null;
if(!String.IsNullOrEmpty(myTextbox.Text))
{
    myValue = int.Parse(myTextbox.Text);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:18:33.290

你试过什么？我们可以看看你的代码吗？

现在，*我*尝试了以下方法：

```
int i;
i = Convert.ToInt32("");  // throws, doesn't give zero
i = int.Parse("");         // throws, doesn't give zero
bool couldParse = int.TryParse("", out i);   // makes i=0 but signals that the parse failed 
```

所以我无法重现。但是，如果我使用`null`而不是`""`，则`Convert.ToInt32`确实会转换为零 ( `0`)。但是，`Parse`仍然`TryParse`失败`null`。

更新：

现在我看到了你的代码。考虑将`otherId`from的类型更改`int`为**`int?`**问号使其成为可为*空*的类型。然后：

```
if (txtOtherId.Text == "")
{
    otherId = null;  // that's null of type int?
}
else
{
    otherId = Convert.ToInt32(txtOtherId.Text);   // will throw if Text is (empty again or) invalid
} 
```

如果您想确保不会发生异常，请执行以下操作：

```
int tmp; // temporary variable
if (int.TryParse(txtOtherId.Text, out tmp))
    otherId = tmp;
else
    otherId = null;   // that's null of type int?; happens for all invalid input 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:01:36.060

假设它确实是一个文本框......

```
string result = myTextBox.Text;

if (string.IsNullOrEmpty(result))
    // This is an empty textbox
else
    // It has a number in it.
    int i = int.Parse(result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T09:05:31.060

有两种简单的方法可以做到这一点：

```
string inputText="";

int? i=null;
if (!string.IsNullOrWhiteSpace(inputText))
i = int.Parse(inputText);

int i2;
bool ok = int.TryParse(inputText, out i2); 
```***

# c# - ASP.NET C# Eval 没有从数据库中读取值

> ID：13394163
> 
> 赞同：0
> 
> 时间：2012-11-15T08:58:10.657
> 
> 标签：c#, asp.net, listview, eval

请帮助-我有一个列表视图从数据库中查找整数值，然后将其传递给代码隐藏以检查数据库值是否为0-在这种情况下，它将显示适当的消息。

它看起来像这样： 在 aspx 页面上：

```
<ItemTemplate>
   <ul>
     <%# List(Eval("p1", "Personal Info Verification")) %>
     <%# List(Eval("p2", "Medical History Part One")) %> 
     <%# List(Eval("p3", "Medical History Part Two")) %>
   </ul>
</ItemTemplate> 
```

在cs页面上：

```
public string List(string input)
   {
     if (input == "0")
        return "<li>" + input + "</li>";
     return "<li>value not 0</li>";
   } 
```

但它不起作用 - 即使数据库记录肯定包含几个 0，也会返回“值不是 0”。不确定它是否与 db 值是整数而不是 nvarchar 有关？有什么建议或其他我可能会遗漏的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:25:05.007

您也可以[`Eval`](http://msdn.microsoft.com/en-us/library/3d2sz789.aspx)在数据绑定的代码隐藏中使用（始终为真`%#`）。我会尝试解析它：

```
private string List(string key)
{
     int input = int.Parse(Eval(key).ToString()); // note that the second argument is the format
         return "<li>" + input + "</li>";
     return "<li>value not 0</li>";
} 
```

aspx

```
<ItemTemplate>
   <ul>
     <%# List("p1") %>
     <%# List("p2") %> 
     <%# List("p3") %>
   </ul>
</ItemTemplate> 
```

# c++ - 检查文件夹结构并移动空的

> ID：13394168
> 
> 赞同：0
> 
> 时间：2012-11-15T08:58:43.197
> 
> 标签：c++, windows, directory

好的，下面的问题。我们有一个包含多个子文件夹的相当大的文件夹结构，并且想要检查其中一个子文件夹是否为空，如果是，程序应将该文件夹移动到另一个文件夹中。

我试着这样解释

```
go into main folder
search in subfolders for an empty folder
if there is an empty folder move the complete folder into a different directory 
```

所以有一个主文件夹可能有 100 个子文件夹，每个子文件夹都有另外 3 个文件夹。如果一个特殊的“完成”是空的，那么带有 3 个子文件夹的整个文件夹应该被移动到“尚未完成”

我是新手，所以请温柔；）

# git - 撤消推送后的问题

> ID：13394171
> 
> 赞同：0
> 
> 时间：2012-11-15T08:58:58.017
> 
> 标签：git

推错东西后，我使用以下方法撤消它：

```
git reset --hard HEAD~1 
```

之后，日志的编号在提示符中。我怎样才能删除它？

另外，现在当我现在尝试提交时，我收到此错误：

> 目前不在任何分支机构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:59:37.367

正如[rlegendi 所](https://stackoverflow.com/users/981284/rlegendi)提到的，您必须调用`git checkout <branchname>`才能退出分离模式。

如果您想从之前推送到的存储库中删除最后一次提交，则必须调用`git push -f`以强制执行推送。

但请注意：之前拉出您意外推送的提交的其他人可能不得不重新设置其本地分支（请参阅 recovery_from_upstream_rebase 的“困难案例[”](http://git-scm.com/docs/git-rebase#_recovering_from_upstream_rebase)）

举个例子，考虑一下

1.  您和您的合作者正在处理*master*分支，
2.  您将其推送到引用为*origin*的远程仓库。
3.  您删除了 origin 的 master 上的最后一次提交，并且
4.  合作者将旧版本拉到它仍然存在的地方。

在这种情况下，他们必须执行

```
git fetch origin
git rebase --onto origin/master master 
```

在另一种情况下，协作者在原始删除的提交之上没有*额外*提交，他们必须执行

```
git fetch origin
git rebase --onto origin/master master~n 
```

# c# - 这种日期怎么转换（不知道是什么格式）？

> ID：13394173
> 
> 赞同：-1
> 
> 时间：2012-11-15T08:59:27.570
> 
> 标签：c#, date

我从 XML 文档中得到这种数据：

```
2012-08-29T18:18:00+02:00 
```

我想用 DateTime 对象转换它。所以我可以随心所欲地管理它，只得到一天和/或一个月。

但如果我这样做：

```
DateTime.Parse("2012-08-29T18:18:00+02:00").Date 
```

我得到类似的东西`\/Date(1346191200000)\/`：O

我哪里错了？我想我需要在解析时指定日期类型？

* * *

提出建议后，我尝试了以下数据：

```
string dataStr = "2012-11-15T13:50:58+01:00";
DateTime data = DateTime.Parse(dataStr).Date;
Response.Write(data.Hour + "<br />"); 
```

但输出是`0`，所以时间丢失了。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:03:15.543

根据您的最新更新：

```
DateTime d = DateTime.ParseExact("2012-11-15T13:50:58+01:00", "yyyy-MM-ddTHH:mm:ssK", null);

Response.Write(d.Hour + "<br />"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:07:20.860

它是 xmls 中使用的标准格式，所有 xml 解析器都应该正确处理它。你不需要解析它。例如，使用 Linq2Xml，您所要做的就是将其转换为 DateTime 对象

```
XElement xElem = new XElement("Time", "2012-08-29T18:18:00+02:00");
var dt = (DateTime)xElem; 
```

# android - 单击任意点时如何在谷歌地图中显示地址？

> ID：13394174
> 
> 赞同：-1
> 
> 时间：2012-11-15T08:59:37.640
> 
> 标签：android, google-maps, popup

我如何在地图应用程序中显示弹出消息，如这张图片[http://imgur.com/FubOy](http://imgur.com/FubOy)

我做了一个护目镜地图应用程序，但没有显示任何地址这是我的代码当单击该位置时如何显示任何点的地址消息，如该图像中？

```
 import java.util.List;

import android.graphics.drawable.Drawable;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
 import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

public class AndroidGoogleMapsActivity extends MapActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Displaying Zooming controls
    MapView mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    /**
     * Changing Map Type
     * */
    // mapView.setSatellite(true); // Satellite View
    // mapView.setStreetView(true); // Street View
    // mapView.setTraffic(true); // Traffic view

    /**
     * showing location by Latitude and Longitude
     * */        
    MapController mc = mapView.getController();
    double lat = Double.parseDouble("48.85827758964043");
    double lon = Double.parseDouble("2.294543981552124");
    GeoPoint geoPoint = new GeoPoint((int)(lat * 1E6), (int)(lon * 1E6));
    mc.animateTo(geoPoint);
    mc.setZoom(15);
    mapView.invalidate(); 

    /**
     * Placing Marker
     * */
    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.mark_red);
    AddItemizedOverlay itemizedOverlay = 
         new AddItemizedOverlay(drawable, this);

    OverlayItem overlayitem = new OverlayItem(geoPoint, "Hello", "Sample Overlay  
  item");

    itemizedOverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedOverlay);

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
 }

         import java.util.ArrayList;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.util.Log;
import android.view.MotionEvent;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

   private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;

   public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public AddItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   protected OverlayItem createItem(int i) {
      return mapOverlays.get(i);
   }

   @Override
   public int size() {
      return mapOverlays.size();
   }

   @Override
   protected boolean onTap(int index) {
      Log.e("Tap", "Tap Performed");
      return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
       this.populate();
   }

   /**
    * Getting Latitude and Longitude on Touch event
    * **/
   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView) 
   {   

       if (event.getAction() == 1) {                
           GeoPoint geopoint = mapView.getProjection().fromPixels(
               (int) event.getX(),
               (int) event.getY());
           // latitude
           double lat = geopoint.getLatitudeE6() / 1E6;
           // longitude
           double lon = geopoint.getLongitudeE6() / 1E6;
           Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon,    
    Toast.LENGTH_SHORT).show();
       }                            
       return false;
   } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:08:17.387

```
package com.pocketjourney.view;

import java.util.ArrayList;

import com.hws.AmpleHarvest.MoreInformation;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Point;
import android.graphics.RectF;

import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.hws.AmpleHarvest.AmpleHarvestActivity;
import com.hws.AmpleHarvest.PantryLocation;
import com.hws.AmpleHarvest.R;

public class MapLocationOverlay  extends Overlay  {

    private boolean isNameAddHold=true;

     private Bitmap bitmap,bitCross,bitMoreInformation;
    int testX,testY,count=0;
    int infoWindowOffsetX,infoWindowOffsetY;
    public String name,address,argName,argAddress,argid;
    //  Store these as global instances so we don't keep reloading every time
    private Bitmap bubbleIcon, shadowIcon;

    private MapLocationViewer mapLocationViewer;
    double toLat, toLng;

    private Paint   innerPaint, borderPaint, textPaint;
    private boolean isRemovePriorPopup=false;
    private boolean temp=true,first=true, firstDraw = true;
    public boolean tempDefaule=true;
    public MoreInformation myMoreInformation;
    public PantryLocation location;

    //  The currently selected Map Location...if any is selected.  This tracks whether an information  
    //  window should be displayed & where...i.e. whether a user 'clicked' on a known map location
    private PantryLocation selectedMapLocation;  

    public MapLocationOverlay(MapLocationViewer mapLocationViewer,PantryLocation arglocation) {

        this.mapLocationViewer = mapLocationViewer;
        location=arglocation;
        bubbleIcon = BitmapFactory.decodeResource(mapLocationViewer.getResources(),R.drawable.bubble);
        shadowIcon = BitmapFactory.decodeResource(mapLocationViewer.getResources(),R.drawable.shadow);
        bitmap = BitmapFactory.decodeResource(mapLocationViewer.getResources(),R.drawable.infowindow);
        bitCross = BitmapFactory.decodeResource(mapLocationViewer.getResources(),R.drawable.crass);
        bitMoreInformation = BitmapFactory.decodeResource(mapLocationViewer.getResources(),R.drawable.more_informations_new
                );

    }

    @Override
    public boolean onTouchEvent(MotionEvent e, MapView mapView) {
        // TODO Auto-generated method stub
         if (e.getAction() == 0)
         {
             this.tempDefaule=false;
         }
         if (e.getAction() == 1)
         {
             this.tempDefaule=false;
         }
         if (e.getAction() == 2)
         {
             this.tempDefaule=false;
         }
        return super.onTouchEvent(e, mapView);

    }

    @Override
    public boolean onTap(GeoPoint p, MapView    mapView)  {
        //this.tempDefaule=false;
        //  Store whether prior popup was displayed so we can call invalidate() & remove it if necessary.

        //  Next test whether a new popup should be displayed

            selectedMapLocation = getHitMapLocation(mapView,p);

            mapView.invalidate();

//      if (selectedMapLocation != null || isRemovePriorPopup==true) {
//          
//          mapView.invalidate();
//      }       

        //  Lastly return true if we handled this onTap()
        return selectedMapLocation != null;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {

        drawMapLocations(canvas, mapView, shadow);
        //this.tempDefaule=false;
        drawInfoWindow(canvas, mapView, shadow);
        //this.tempDefaule=false;
        }

    /**
     * Test whether an information balloon should be displayed or a prior balloon hidden.
     */
    private PantryLocation getHitMapLocation(MapView    mapView, GeoPoint   tapPoint) {

        //  Track which MapLocation was hit...if any
        PantryLocation hitMapLocation = null;

        RectF hitTestRecr = new RectF();
        Point screenCoords = new Point();
        ArrayList<PantryLocation> iterator =mapLocationViewer.getMapLocations();
        for(int i=0;i<iterator.size();i++) {       
            PantryLocation testLocation = iterator.get(i);

            //  Translate the MapLocation's lat/long coordinates to screen coordinates
            mapView.getProjection().toPixels(testLocation.getPoint(), screenCoords);

            // Create a 'hit' testing Rectangle w/size and coordinates of our icon
            // Set the 'hit' testing Rectangle with the size and coordinates of our on screen icon
            hitTestRecr.set(-bubbleIcon.getWidth()/2,-bubbleIcon.getHeight(),bubbleIcon.getWidth()/2,0);
            hitTestRecr.offset(screenCoords.x,screenCoords.y);

            //  Finally test for a match between our 'hit' Rectangle and the location clicked by the user
            mapView.getProjection().toPixels(tapPoint, screenCoords);
            //hitMapLocation = testLocation;
            if (hitTestRecr.contains(screenCoords.x,screenCoords.y)) {
                hitMapLocation = testLocation;
                first = true;
                isNameAddHold = true;
                break;
            }
        }
        testX=(int)screenCoords.x;
        testY=(int)screenCoords.y;
        //  Lastly clear the newMouseSelection as it has now been processed
        tapPoint = null;
        if(hitMapLocation==null && selectedMapLocation!=null)
        return selectedMapLocation; 

        return hitMapLocation;

    }

    private void drawMapLocations(Canvas canvas, MapView    mapView, boolean shadow) {
        int i=0;count++;
        ArrayList<PantryLocation> iterator =mapLocationViewer.getMapLocations();
        Point screenCoords = new Point();
        for(i=0;i<iterator.size();i++) {       
            PantryLocation location = iterator.get(i);
            mapView.getProjection().toPixels(location.getPoint(), screenCoords);
            //mapView.getController().setCenter(location.getPoint());
            if (shadow) {
                //  Only offset the shadow in the y-axis as the shadow is angled so the base is at x=0; 
                canvas.drawBitmap(shadowIcon, screenCoords.x, screenCoords.y - shadowIcon.getHeight(),null);
            } else {
                canvas.drawBitmap(bubbleIcon, screenCoords.x - bubbleIcon.getWidth()/2, screenCoords.y - bubbleIcon.getHeight(),null);
            }

        }
//      if(i==iterator.size()){
//          this.tempDefaule=false;}
if(tempDefaule==true)
{

            PantryLocation location1 = this.location;
            //mapView.getProjection().toPixels(location.getPoint(), screenCoords);
            Point screenCoord = new Point();
            mapView.getController().setCenter(location1.getPoint());
            mapView.getController().setZoom(15);
        //  tempDefaule=false;
                //mapView.getController().setCenter(location.getPoint());   

        }

            //tempDefaule=false;    
}           //mapView.getProjection().toPixels(location.getPoint(), screenCoord);
            //canvas.drawBitmap(bubbleIcon, screenCoord.x - bubbleIcon.getWidth()/2, screenCoord.y - bubbleIcon.getHeight(),null);
            //mapView.invalidate();

    private void drawInfoWindow(Canvas canvas, MapView  mapView, boolean shadow) {
        //this.tempDefaule=false;
        if ( selectedMapLocation != null) {
            if ( shadow) {
                //  Skip painting a shadow in this tutorial
            } else {
                //  First determine the screen coordinates of the selected MapLocation
                isRemovePriorPopup=true;
                Point selDestinationOffset = new Point();

//              if(first){
//                  //mapView.getController().setCenter(selectedMapLocation.getPoint());
//                  first = false;
//                  //mapView.getController().setZoom(15);
//              }
                mapView.getProjection().toPixels(selectedMapLocation.getPoint(), selDestinationOffset);

                //  Setup the info window with the right size & location
                int INFO_WINDOW_WIDTH = 125;
                int INFO_WINDOW_HEIGHT = 25;
                RectF infoWindowRect = new RectF(0,0,100,20);   
                RectF closeRect = new RectF(0,0,20,20); 
                 infoWindowOffsetX = selDestinationOffset.x-INFO_WINDOW_WIDTH/2;
                 infoWindowOffsetY = selDestinationOffset.y-INFO_WINDOW_HEIGHT-bubbleIcon.getHeight();
                 infoWindowRect.offset(infoWindowOffsetX+95,infoWindowOffsetY-45);
                 closeRect.offset(infoWindowOffsetX+160,infoWindowOffsetY-90);
//
//               int TEXT_OFFSET_X = 10;
//                  int TEXT_OFFSET_Y = 15;
//                  
                 Paint myPaintBlack=new Paint();
                    Paint myPaintWhite=new Paint();

                    myPaintWhite.setARGB(255, 255, 255, 255);

                //  Draw inner info window
                canvas.drawRoundRect(infoWindowRect, 5, 5, getInnerPaint());

                //  Draw border for info window
                canvas.drawRoundRect(infoWindowRect, 5, 5, getBorderPaint());

                //  Draw the MapLocation's name

                myPaintBlack.setColor(Color.BLACK);
                myPaintBlack.setTextSize(20);

//              canvas.drawText(selectedMapLocation.getAddress(),infoWindowOffsetX+TEXT_OFFSET_X,infoWindowOffsetY+TEXT_OFFSET_Y,getTextPaint());
                canvas.drawBitmap(bitmap, infoWindowOffsetX-50, infoWindowOffsetY-100,getInnerPaint());
                //canvas.drawBitmap(bitmap1, infoWindowOffsetX-45, infoWindowOffsetY-80,getInnerPaint());
                if(isNameAddHold)
                {
                argid=selectedMapLocation.getID();
                argName=selectedMapLocation.getName();
                name=selectedMapLocation.getName();
                toLat = selectedMapLocation.getLatitude();
                toLng = selectedMapLocation.getLongitude();
                if(name.length()>18)
                name=selectedMapLocation.getName().substring(0,18)+"..";
                argAddress=selectedMapLocation.getAddress();
                address=selectedMapLocation.getAddress();
                if(address.length()>30)
                address=selectedMapLocation.getAddress().substring(0,30)+"..";
                }
                canvas.drawText(name,infoWindowOffsetX-45,infoWindowOffsetY-70,myPaintBlack);
                myPaintBlack.setTextSize(13);
                canvas.drawText(address,infoWindowOffsetX-45,infoWindowOffsetY-55,myPaintBlack);

            //  Draw inner info window
                canvas.drawRoundRect(infoWindowRect, 5, 5, getInnerPaint());

                //  Draw border for info window
                canvas.drawRoundRect(infoWindowRect, 5, 5, getBorderPaint());

                //CloseRect
//              canvas.drawRoundRect(closeRect, 5, 5, getInnerPaint());
//              canvas.drawRoundRect(closeRect, 5, 5, getBorderPaint());

                //  Draw the MapLocation's name
                myPaintBlack.setColor(Color.CYAN);
                myPaintBlack.setTextSize(11);
                //canvas.drawText("Click for more info..",infoWindowOffsetX+105,infoWindowOffsetY-33,myPaintBlack);
                canvas.drawBitmap(bitMoreInformation, infoWindowOffsetX+95, infoWindowOffsetY-45,getInnerPaint());
                //canvas.drawBitmap(bitCross, infoWindowOffsetX+160, infoWindowOffsetY-90,getInnerPaint());

            }
        }
        if(isRemovePriorPopup)
        {
        if(((testX>(infoWindowOffsetX+95)&&testX<(infoWindowOffsetX+195)))&&(testY>(infoWindowOffsetY-45)&&testY<(infoWindowOffsetY-25)))
            {
            if(temp){
                try
                {
                    temp=false;
                    isNameAddHold=false;
                isRemovePriorPopup=false;
                Context context=mapLocationViewer.cn;
                Toast.makeText(context, "Loading...", Toast.LENGTH_SHORT).show();
                Intent intent=new Intent(context, MoreInformation.class);
                intent.putExtra("Id",argid);
                intent.putExtra("Name",argName);
                intent.putExtra("Address",argAddress);
                intent.putExtra("Latitude",toLat);
                intent.putExtra("Longitude",toLng);

                context.startActivity(intent);

                }
                catch (Exception ex)
                {
                    Log.d("Redirected Error :", ex.getMessage());
                }
        //canvas.drawText("This is for Testing",testX,testY,myPaintBlack);
            }}
            else if(((testX>(infoWindowOffsetX+160)&&testX<(infoWindowOffsetX+180)))&&(testY>(infoWindowOffsetY-90)&&testY<(infoWindowOffsetY-70)))
            {

                if(isRemovePriorPopup)
                {
                 isRemovePriorPopup=false;                  
                 selectedMapLocation=null;
                 draw(canvas, mapView, shadow);
                // mapLocationViewer.setDZoom();
                }

            }
        }
    }

    public Paint getInnerPaint() {
        if ( innerPaint == null) {
            innerPaint = new Paint();
            innerPaint.setARGB(225, 75, 75, 75); //gray
            innerPaint.setAntiAlias(true);
        }
        return innerPaint;
    }

    public Paint getBorderPaint() {
        if ( borderPaint == null) {
            borderPaint = new Paint();
            borderPaint.setARGB(255, 255, 255, 255);
            borderPaint.setAntiAlias(true);
            borderPaint.setStyle(Style.STROKE);
            borderPaint.setStrokeWidth(2);
        }
        return borderPaint;
    }

    public Paint getTextPaint() {
        if ( textPaint == null) {
            textPaint = new Paint();
            textPaint.setARGB(255, 255, 255, 255);
            textPaint.setAntiAlias(true);
        }
        return textPaint;
    }

} 
```

# objective-c - Objective-C 如何获取抛出异常的行号

> ID：13394176
> 
> 赞同：0
> 
> 时间：2012-11-15T08:59:56.900
> 
> 标签：objective-c, exception, line

我在 try-catch 结构中使用它来了解抛出异常的方法：

```
NSLog(@"%@", NSStringFromSelector(_cmd)); 
```

我想知道 Xcode 4 中是否还有一种方法可以获取发生错误的行号。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:05:03.917

有一个`__LINE__`您可能会觉得有用的宏，请参阅这个[先前的问题](https://stackoverflow.com/questions/1597007/creating-c-macro-with-and-line-token-concatenation-with-positioning-macr)以获得灵感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:05:59.467

在`@catch`子句中试试这个：

```
NSLog(@"Stacktrace: %@", [NSThread callStackSymbols]); 
```

在开发过程中，您可以在 Xcode 调试器中设置符号断点`objc_exception_throw`并查看错误发生的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T13:00:24.310

您可以在 Xcode 左侧的 Break Point Navigator 菜单中添加一个异常断点，这将使您停在异常发生的位置

# flash - 使用 adobe flash AS2 获取 TextField 尺寸

> ID：13394179
> 
> 赞同：0
> 
> 时间：2012-11-15T09:00:06.983
> 
> 标签：flash, adobe, actionscript-2

我正在尝试创建一个 TextField，用一些文本填充它并获取此文本尺寸，但是当我尝试这样做时：

```
var baka:TextField = new TextField();
baka.autoSize = true;
baka.htmlText = 'Hello World!';
trace(baka.textWidth); // undefined
trace(baka._width); // undefined 
```

我得到`.textWidth`的`._width`只是`undefined`。为什么会这样以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:12:26.753

AS2 需要使用`createTextField`方法调用。AS3 提供了实例化 TextField 对象并将其添加到舞台的能力，就像您尝试做的那样。

这是一个 AS2 示例，它应该适用于您尝试使用 AS2 执行的操作。

```
var baka:TextField = _root.createTextField("baka",stage.getNextHighestDepth(),10,10,200,50);
baka.autoSize = true;
baka.htmlText = 'Hello World!';
trace(baka.textWidth);
trace(baka._width); 
```

请注意以下事项：

1.  您需要进行更改`_root`以匹配您尝试添加的对象`TextField`。
2.  如果将 TextField 的属性设置为 true ，则方法调用中的 width 和 height 参数`createTextField`将没有任何意义`autoSize`

# android - 覆盖 onMeasure 时，自定义 LinearLayout 的膨胀子代不显示

> ID：13394181
> 
> 赞同：2
> 
> 时间：2012-11-15T09:00:09.747
> 
> 标签：android, custom-controls

我试图展示一个`MyCustomLinearLayout`which extends `LinearLayout`。我`MyCustomLinearLayout`用`android:layout_height="match_parent"`属性夸大了。我想要的是`ImageView`在这个`MyCustomLinearLayout`. 这个的高度`ImageView`应该是`match_parent`，宽度应该等于高度。我试图通过覆盖该`onMeasure()`方法来实现这一点。发生的情况是，它`MyCustomLinearLayout`确实像它应该的那样变成了正方形，但`ImageView`没有显示出来。

在我使用的代码下方。*请注意，这是我的问题的一个极其简化的版本。将`ImageView`被更复杂的组件取代。*

```
public MyCustomLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

private void init(Context context) {
    final LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate(R.layout.view_myimageview, this);

    setBackgroundColor(getResources().getColor(R.color.blue));
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int height = getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec);
    setMeasuredDimension(height, height);
} 
```

`view_myimageview.xml`文件：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <ImageView
        android:id="@+id/view_myimageview_imageview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/ic_launcher" />

</merge> 
```

因此，当我覆盖该`onMeasure()`方法时，`ImageView`不显示，当我不覆盖该`onMeasure()`方法时，`ImageView`显示，但是太小了，因为`MyCustomLinearLayout`' 的宽度太小了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T09:53:59.040

这不是您覆盖该`onMeasure`方法的方式，尤其是默认 SDK 布局的方法。现在使用您的代码，您刚刚制作了`MyCustomLinearLayout`正方形，并为其分配了一定的值。但是，你没有测量它的孩子，所以他们是没有大小的，不会出现在屏幕上。

我不确定这是否可行，但试试这个：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    int size = getMeasuredHeight();
    super.onMeasure(MeasureSpec.makeMeasureSpec(size, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(size, MeasureSpec.EXACTLY));
} 
```

当然，这基本上会完成`onMeasure`两次的工作，但`ImageView`现在应该可以看到填充它的父级。还有其他解决方案，但您的问题在细节上有点缺乏。

# javascript - 如何让我的 javascript 超时仅 3 秒？

> ID：13394182
> 
> 赞同：4
> 
> 时间：2012-11-15T09:00:12.390
> 
> 标签：javascript, function, timeout, seconds

如果 4e3 等于 4 秒。3秒我会用什么？还是 2 秒？

```
<SCRIPT LANGUAGE="javascript">
$( function() {
 setTimeout(function() {
        $('#loadingque').trigger('click');
    }, 4e3);
});
</script> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T09:02:03.167

如果您*了解*为什么`4e3`是 4000，那么您可以弄清楚 3000 的样子。`eN`表示`10 to the power N`，所以 3 乘以 10 的 3 次方是 3000，或`3e3`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:03:34.917

```
setTimeout(function() {
      // Do something after 5 seconds
}, 5000);

jQuery(document).ready(function () {`enter code here`
    //hide a div after 3 seconds
    setTimeout( "jQuery('#div').hide();",3000 );
}); 
```

希望这些对你有帮助..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T09:04:45.507

需要几毫秒

```
setTimeout(function() {
    document.write(new Date());
}, 3000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:13:53.933

```
var runCount = 0;
var maxCount = 1000000;

function timerMethod()
{
    runCount++;
    if(runCount >= maxCount)
    {
        clearInterval(timerId);
    }
    $('#loadingque').trigger('click');
    console.log(runCount + "of" + maxCount);
}

var timerId = setInterval(timerMethod, 3000); 
```

这是每 3000 毫秒运行一次 maxCount 次

# tfs - 我如何为 tfs alerts 编辑我的服务器插件。因为它只在分配给我的东西时发送电子邮件

> ID：13394188
> 
> 赞同：0
> 
> 时间：2012-11-15T09:00:24.410
> 
> 标签：tfs

对不起，我的英语不好。我有用于 tfs 警报的服务器插件，提到它在分配给我的东西时发送邮件。现在，我希望更改字段也将通过插件邮寄给我。like , state , triage 等或所有字段都将通过电子邮件发送。任何人都可以分享我这样做的逻辑。对不起，如果我不能定义你我的问题，因为我的英语很糟糕。如果需要代码，那么我也会发送代码。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:11:17.590

在您的 tfs 安装目录中搜索 *.xsl 文件。应该有一堆 xsl 转换来生成 tfs 发送的电子邮件。

# javascript - 在 jQuery 中绑定 ctrl + u 击键

> ID：13394189
> 
> 赞同：1
> 
> 时间：2012-11-15T09:00:32.850
> 
> 标签：javascript, jquery, onkeyup

我正在尝试在*jQuery中将**热键*构建到我的 Web 应用程序中。我正在尝试绑定+击键。这是我所拥有的：*`Ctrl``U`*

 *```
$(document).keypress(function(e) {
    if(e.ctrlKey && e.which == 117) {
      if($("#nav-user-details").length > 0) {
        $("#nav-user-details").find(".dropdown-menu").toggle();
      }
    }
}); 
```

这虽然行不​​通。如何绑定此击键？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:03:47.913

**请试试这个** [http://jsfiddle.net/TN7GZ/](http://jsfiddle.net/TN7GZ/)

按`Ctrl`+ `U`，屏幕将发出警报。

这将满足您的需求`:)`

**代码**

```
var isCtrl = false;
document.onkeyup=function(e){
    if(e.which == 17) isCtrl=false;
}
document.onkeydown=function(e){
    if(e.which == 17) isCtrl=true;
    if(e.which == 85 && isCtrl == true) {
        //run code for CTRL+U -- ie, whatever!
        alert('CTRL + U stuff');
        return false;
    }
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:11:35.227

我很确定`85`是 的键码`u`，还是我遗漏了什么？

如果你也想要 mac 支持（命令键），它可能会变得混乱。我之前写了一个片段可能会对您有所帮助，但它涉及浏览器检测（恶心）：

```
var cmd = false;

$(document).on('keydown', function(e) {

    if(detectMacCommand(e.which)) {
        cmd = true;
        return;
    }

    // now detect print (ctr/cmd + p)
    if ( e.which == 85 && ( e.ctrl || cmd ) ) {
        e.preventDefault();
        alert('ctrl/cmd + u');
    }

}).on('keyup', function(e) {

    if(detectMacCommand(e.which)) {
        cmd = false;
        return;
    }

});

function detectMacCommand(key) {
    return ( $.browser.mozilla && key == 224 ||
             $.browser.opera   && key == 17 ||
             $.browser.webkit  && ( key == 91 || key == 93 ));
} 
```

演示：http: [//jsbin.com/afijam/2](http://jsbin.com/afijam/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:02:36.247

您必须使用 keydown 而不是 keypress。Keypress 不会触发非字符键。

```
$(document).keydown(function (e) {
  if (e.ctrlKey && e.which === 81) {
    alert("key pressed");
    return false;
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:03:16.127

```
$(document).keypress("u",function(e) {
  if(e.ctrlKey)
    alert("Ctrl+U was pressed!!");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T09:04:43.090

尝试这个：

```
var prevKey = null;
$(document).keydown(function (e) {
  var thisKey = e.which;

  if (prevKey && prevKey == 17) {
    if (thisKey == 85) {
      // Your code.
    }
  }

  prevKey = thisKey;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-21T10:34:17.740

如果您在`Xhtml`文件中工作并且遇到错误`The entity must immediately follow the &`，那么您应该使用`&&amp;&amp;`而不是`&&`.*

# bash - 如何做 grep 以便结果与周围环境一起显示

> ID：13394194
> 
> 赞同：1
> 
> 时间：2012-11-15T09:00:54.270
> 
> 标签：bash, grep, find

我什至不确定这是否可以使用 grep 或是否需要任何其他工具。我会解释我想做什么。

如果我有一个文件 foo.txt，如下所示：

```
a
b
c
d
e 
```

这样做时，`grep c foo.txt`我希望结果是这样的：

```
b
c
d 
```

作为结果及其环境。

这可能吗？使用哪个选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:04:14.650

使用`-C`grep 的（上下文）标志。类似的标志是`-A`（之后）和`-B`（之前）。参数是上下文中的行数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:04:30.703

```
grep -1 c foo.txt 
```

`-1`表示前后各一行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:05:33.367

除此之外，`-C`您还可以使用方向选项`-B <number>` 并`-A <number>`指定匹配前后的行数。

# powershell - 如何检查 Powershell 脚本是否正在远程运行

> ID：13394196
> 
> 赞同：7
> 
> 时间：2012-11-15T09:01:04.633
> 
> 标签：powershell, powershell-remoting

我有一个可以在本地或远程（通过 WinRM）运行的脚本，但是我希望它在远程计算机上运行时的行为略有不同。我意识到我可以将开关传递给脚本以识别它是在本地运行还是远程运行，但我想知道脚本本身是否可以检测它是否在远程运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T10:04:52.530

`Get-Host`返回，除其他信息外`Name`：

```
PS> (Get-Host).Name
控制台主机
PS> (Invoke-Command -ComputerName dev2 -Script {Get-Host}).Name
服务器远程主机

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-02T23:41:25.797

```
 if ($PSSenderInfo) {
        "Running remote"
    }
    else {
        "Running local"
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-27T13:11:04.417

检查是否`$profile`已定义对我有用。我不知道这有多可靠，但[各种](https://stackoverflow.com/a/14997258/738851) [消息来源](http://windowsitpro.com/blog/guest-column-dude-wheres-my-profile)表明远程会话中没有加载任何配置文件。我无法检查计算机名，因为我无法提前知道哪台机器是本地机器，哪台机器是远程机器。

```
$RunningLocally = $profile -ne $null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:09:56.140

您可以在 $MyInvocation 中检查计算机名：

```
PS>Invoke-Command -ComputerName smacnt01 -ScriptBlock {$MyInvocation}

PSComputerName   : smacnt01
RunspaceId       : 333f5333-0ca5-4461-8f38-cb086fbd1ea4
MyCommand        : $MyInvocation
BoundParameters  : {}
UnboundArguments : {}
ScriptLineNumber : 0
OffsetInLine     : 0
HistoryId        : -1
ScriptName       :
Line             :
PositionMessage  :
InvocationName   :
PipelineLength   : 1
PipelinePosition : 1
ExpectingInput   : False
CommandOrigin    : Runspace 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T10:04:02.293

我认为如果你的脚本测试有可能

```
$myinvocation.mycommand.path -eq $null 
```

然后如果是`true`通过调用命令远程运行。

我没有准确地测试它，但我认为它可以工作。

# php - Mysql复合条目按参数（按日期）

> ID：13394200
> 
> 赞同：0
> 
> 时间：2012-11-15T09:01:11.233
> 
> 标签：php, mysql

我有一个mysql表：

```
+----+----------------------------+
| id | name | datetime            |
+----+----------------------------+
|  1 | Qwe  | 2012-11-20 08:00:00 |
|  2 | Foo  | 2012-11-20 05:00:00 |
|  3 | Bar  | 2013-01-01 08:00:00 |
+----+----------------------------+ 
```

如何使用 mysql 从 db 获取它，如下所示：

```
date
id - time - name

2012-11-20
2 - Foo - 05:00
1 - Qwe - 08:00

2013-01-01
3 - Bar - 08:00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:03:43.020

一种方法

```
$sql = "SELECT id, name, 
      DATE_FORMAT(`datetimecol`, '%Y-%m-%d') mydate, 
      DATE_FORMAT(`datetimecol`, '%H:%i') mytime 
      FROM yourtabe";
$result = mysql_query($sql);
$dataarr = array();
if($result && mysql_num_row($result) > 0) {
    while($row2 = mysql_fetch_assoc($result)) {
    $dataarr[$row2['mydate']][] = $row2;    
    }
}

if(count($dataarr) > 0 )
    foreach($dataarr as $key => $data) {
        echo '<h3>'.$key.'</h3>';
        foreach($data as $row) {
        echo  '<p>'. $row['id'].', '.$row['name'].', '.$row['mytime'].'</p>'; 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:12:35.933

```
$sql="SELECT extract(datetime) as date,id,name,time(datetime) as time from
       tablename";
$result=mysql_query($sql); 
```

上面的查询使用 mysql date 和 tme 函数来了解它们更多见

[http://phpdynamic.blogspot.in/2012/11/php-myssql.html](http://phpdynamic.blogspot.in/2012/11/php-myssql.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:44:28.127

我不确定你到底要做什么，但这可以给你一个关于如何进行初始排序的基本示例：

`select date(datetime), id, name, TIME_FORMAT(datetime, '%H:%i') from tmp order by datetime`

# ruby-on-rails - 为什么 rake db:migrate 有时会在 structure.sql 中添加尾随空格？

> ID：13394201
> 
> 赞同：27
> 
> 时间：2012-11-15T09:01:14.093
> 
> 标签：ruby-on-rails, postgresql

在我们的一些开发人员机器上`rake db:migrate`添加了尾随空格，`structure.sql`这真的很烦人，因为每次对数据库进行更改时，我们都必须首先从文件中删除所有尾随空格。

任何人都知道这可能是怎么回事？空白从哪里来？它与PostgreSQL有关还是其他？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-07-06T17:26:32.970

这是您可以提交给版本控制的解决方案：将尾随空格修剪为`db:migrate`钩子。

在`lib/tasks/db.rake`：

```
namespace :db do
  def remove_whitespace_in_structure
    if Rails.env.development?
      `sed -i '' -e's/[[:space:]]*$//' db/structure.sql`
    end
  end

  task :migrate do
    remove_whitespace_in_structure
  end
end 
```

上面的代码可能看起来像是在覆盖`db:migrate`，但它是一个将在正常`db:migrate`任务之后立即运行的钩子。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-24T00:18:57.533

我只是为此设置了一个 git 过滤器。不幸的是，这不是您可以添加到存储库中的东西；每个团队成员都必须进行设置。

### 在`.gitconfig`（或`.git/config`）

```
[filter "remove-trailing-whitespace"]
  clean = sed -E 's/[[:space:]]*$//'
  smudge = cat 
```

### 在`.gitattributes`或`.git/info/attributes`

```
db/structure.sql filter=remove-trailing-whitespace 
```

有关git 的更多信息，请参阅[有关 gitattributes 的文档](http://git-scm.com/docs/gitattributes)`filters`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-25T12:57:19.607

遇到同样的问题，我通过a添加了有实际效果的更改`git add -i db/structure.sql`然后`git checkout db/structure.sql`省略了空格的差异。

我们在团队中考虑的替代方案是使用另一个 gem 来跟踪数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-30T09:11:12.303

这是我一生中最美好的一天，也许是你的：

在**PG 11**中，此错误不再存在，因为`Tablespace`未写入转储。因此，您可以升级您的 PG 版本并摆脱删除空间的钩子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-22T15:00:32.377

发生这种情况是因为每台机器上的数据库版本不同。

您可以都拥有相同的版本，或者在您的文本编辑器中让它在保存时修剪尾随空格。在崇高的将此行添加到您的设置中： `"trim_trailing_white_space_on_save": true`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-07-27T19:58:49.253

我在我的一个项目中使用了这个 gem，它完成了这项工作。

[https://github.com/jakeonrails/fix-db-schema-conflicts](https://github.com/jakeonrails/fix-db-schema-conflicts)

当你运行`rake db:migrate`它时，它会运行一些好东西；其中之一是`sed`删除不必要的空格的命令。

# c# - 在另一个方法正在运行时调用一种方法时阻塞主线程

> ID：13394202
> 
> 赞同：0
> 
> 时间：2012-11-15T09:01:23.237
> 
> 标签：c#, user-interface, .net-3.5, thread-safety

在我的应用程序中有一个`ListView`文件和文件夹。用户可以将它们加载到服务器上。加载在单独的线程中执行，但我在窗体的进度条中显示进程的状态，使用`Control.Invoke(ShowProgressMethod...`方法，因此`ShowProgressMethod`在主线程上调用。

一切正常，但是当我尝试在主线程中执行其他操作（例如删除一个文件）时，UI 被阻止。通常在刷新进程时发生`ShowProgressMethod`，在此期间我从同一个线程调用了另一个方法。

我怎样才能解决这个问题？

# ruby-on-rails-3 - FactoryGirl、Rspec2 和设计 rails 3

> ID：13394203
> 
> 赞同：2
> 
> 时间：2012-11-15T09:01:24.830
> 
> 标签：ruby-on-rails-3, rspec, devise, tdd, factory-bot

我正在使用 Rspec、FactoryGirl 和 Spork 进行测试。有两件事我不太清楚，首先是我的 factory.rb 文件的位置。目前我有它位于

```
spec/support/factories.rb 
```

它看起来像这样

```
 FactoryGirl.define do
 factory :user do
 email                 "example@yahoo.com"
 password              "password"
 password_confirmation "password"
 confirmed_at           Time.now

 end 
 end 
```

在我的 spec_helper 我有

```
config.include FactoryGirl::Syntax::Methods 
```

其次，我想在开始对控制器进行测试之前登录用户，这个特定的控制器有一个前置过滤器：authenticate_user！

我正在使用设计进行身份验证，因此添加了

```
config.include Devise::TestHelpers, :type => :controller 
```

阅读设计文档，您可以添加一个 controller_macros.rb 并指定这样的方法来使用

```
 def login_user
 before(:each) do
  @request.env["devise.mapping"] = Devise.mappings[:user]
  user = FactoryGirl.create(:user)
  user.confirm! # or set a confirmed_at inside the factory. Only necessary if you are      using the confirmable module
  sign_in user
  end
  end 
```

所以我也将它添加到我的 spec_helper

```
config.include ControllerMacros, :type => :controller 
```

因此，当我在控制器测试之前添加 login_user 时，我得到未定义的方法 login_user。我在这里使用两个工具来做同样的事情吗？我真的需要设计方法还是可以用 factoryGirl 来完成。如果是这样，我如何在测试控制器之前设置登录过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:09:43.643

工厂位置应该在`spec/factories`。查看此示例应用程序[https://github.com/RailsApps/rails3-devise-rspec-cucumber/tree/master/spec](https://github.com/RailsApps/rails3-devise-rspec-cucumber/tree/master/spec)。

对于登录，通常您似乎做得对。在此处再次检查示例应用程序：[https ://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29](https://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)

对于`undefined method login_user`错误，请务必

```
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f} 
```

和

```
config.extend ControllerMacros, :type => :controller 
```

在 spec_helper 中。设计方法应适用于主题：

```
subject.current_user.should_not be_nil 
```

# c++ - 为什么构造 std::string(0) 不会发出编译器警告？

> ID：13394212
> 
> 赞同：3
> 
> 时间：2012-11-15T09:02:06.870
> 
> 标签：c++, compiler-construction, stl, compiler-warnings

假设我有这段代码。

```
#include <string>

int main()
{
    std::string(0);
    return 0;
} 
```

写入`std::string(0)`导致`std::basic_string<char>::basic_string(const char*)`被调用，with`0`作为此构造函数的参数，它试图将参数视为指向 C 字符串的指针。

运行此代码显然会导致`std::logic_error`被抛出。但我的问题是：为什么 GCC 和 MSVC 8.0 都不发出任何警告？我希望看到类似于“从没有强制转换的整数制作指针”的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T09:03:23.277

`0`是一个值为 0 的整数常量表达式，因此它是一个空指针常量。使用 0 值常量作为空指针不是强制转换。

C++11 引入了`nullptr`(and `nullptr_t`)，但`0`作为空指针的处理方式在不久的将来不太可能改变，因为大量代码依赖于它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:07:10.017

因为那些编译器似乎错过了这个特性。我建议给他们写一份功能报告。

编译器可以轻松地在内部重新识别 std 字符串类并发出合理的警告。

我不知道您为什么要将警告仅限制在无演员表的情况下。在那里进行强制转换或以其他方式传递空指针同样是不明智的。

# c# - 将当前页面作为邮件发送或获取当前页面 html

> ID：13394215
> 
> 赞同：3
> 
> 时间：2012-11-15T09:02:25.013
> 
> 标签：c#, asp.net, email

我需要将当前页面内容作为邮件发送。任何想法我们如何做到这一点。我的想法是获取页面的 html 代码并将其发送。但是不知道如何获取页面的html代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T09:10:57.053

如果您想获取页面服务器端的 HTML 以便可以邮寄，试试这个

```
StringWriter str_wrt = new StringWriter();
HtmlTextWriter html_wrt = new HtmlTextWriter(str_wrt);
Page.RenderControl(html_wrt);
String HTML =  str_wrt.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:06:26.407

您可以使用 document.documentElement.innerHTML 来获取页面 html。

假设您正在通过电子邮件发送服务器端，那么您需要将其发回以便可以发送。

# c# - DirectShow：检测相关过滤器，并添加那些？

> ID：13394221
> 
> 赞同：1
> 
> 时间：2012-11-15T09:02:42.640
> 
> 标签：c#, .net, directshow, video-capture, directshow.net

目前我正在开发一个 DirectShow 应用程序来帮助用户配置他们的电视采集卡。此配置稍后将在另一个程序中使用。

我使用[ICaptureGraphBuilder2::RenderStream](http://msdn.microsoft.com/en-us/library/windows/desktop/dd311924%28v=vs.85%29.aspx)方法来渲染视频和音频。我的图表的来源取决于用户选择的设备，但这主要是[WDM Video Capture Filter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390974%28v=vs.85%29.aspx)类别中的设备。

这是我的问题。有些设备无法工作，因为它们需要的不仅仅是源过滤器。例如，我有一个网络摄像头，它有一个单独的音频过滤器。另一个例子，我有一个电视调谐器卡，它有自己的编码器/复用器。

由于我的应用程序应该与那里的大多数捕获设备一起使用，是否有一种**通用**的方法来检测源过滤器旁边是否存在图表工作所需的其他过滤器？

我可以枚举所有过滤器并检查它们的名称是否彼此相似，但名称不能被信任......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:18:57.463

DirectShow 作为一个框架基本上是一套灵活的 DIY 过滤器。您有一组分散的它们，并且它们（一些）也被分类，在枚举一个类别时，您可能会对包含的特征集做出一些假设。

特别是，视频和音频（以及其他媒体类型）源之间没有直接对应关系。您可以做的是提示用户选择设备（例如应用程序配置的一部分）并假设它们是相关的并发送同步的内容（如果适用）。

另一个常见任务是连接交叉开关，您可能对使用电视调谐器感兴趣。Capture Graph Builder 对象中有一个帮助器，您可以利用它。[请参阅ICaptureGraphBuilder2::FindInterface](http://msdn.microsoft.com/en-us/library/windows/desktop/dd376363%28v=vs.85%29.aspx)中的“支持过滤器”备注。

# java - Java 的 DebuggerStepThrough 等效项

> ID：13394228
> 
> 赞同：8
> 
> 时间：2012-11-15T09:03:16.680
> 
> 标签：java, debugging, jvmti, jdi

.NET 有几个方便的注释，它们指示调试器单步执行/跳过某些方法。我想知道是否有适用于 Java 平台的等价物。

例如：

```
@DebuggerStepThrough
public void foo() {
  ..
} 
```

会导致调试器在单步执行时**不会**停止。`foo`

### 我试过的

*   在类文件中使用 SYNTHETIC 标志。这会导致 javac 禁止用户代码调用此类方法。
*   自定义属性。没有用于检索注释的[JDI API 。](http://docs.oracle.com/javase/6/docs/jdk/api/jpda/jdi/)[在这个论坛](https://forums.oracle.com/forums/thread.jspa?messageID=6369885)上也提到过。

PS。我正在实现一个调试器并控制发出的字节码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-19T16:15:55.747

AFAIK，不是作为股票功能，不是。

否则我也可以推荐看看 eclipse 调试器的“Step filter”和“conditional breakpoint”特性。它允许您忽略某些类型（步骤过滤器）或仅在某些运行时条件下停止（条件断点）。

# android - 如何解析作为多维数组表示的字符串

> ID：13394230
> 
> 赞同：2
> 
> 时间：2012-11-15T09:03:19.207
> 
> 标签：android

我现在正在 Android 平台上使用 Java 并面临从字符串中提取字符串的问题，如下所示

```
result.toString(); 
```

预计`toString`返回结果如下：

```
[ search[name = Tulsa, code = 1234], search[name = Victo, code = 1232] ] 
```

然后，我可以知道将返回的结果存储到如下数组中的最佳和有效方法是什么：

```
array[0][0] = "Tulsa";
array[0][1] = 1234;
array[1][0] = "Victo";
array[1][1] = 1232; 
```

或者有没有更有效、更好的存储方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:07:47.107

那么你可以使用`result.toString().split(",")`它将返回一个字符串数组。但似乎不是你的情况。

PS你能指定toString方法中的“代码”是什么吗？

PS我认为最有效的方法是使用Map。在这种情况下，您可以使用

```
map.put("Tulsa",1234)

map.put("Victo",1234) 
```

ETC

# php - 我真的需要指定 php 头内容类型吗？

> ID：13394232
> 
> 赞同：1
> 
> 时间：2012-11-15T09:03:23.250
> 
> 标签：php, header, content-type

我的服务器上同时有 .mp3 和 .pcm 音频格式，当我不知道用户请求哪种类型时，我应该如何设置 php 标头内容类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:08:00.583

是的，您必须..您可以使用[`mime_content_type`](http://php.net/manual/en/function.mime-content-type.php)Detect MIME Con​​tent-type for a file 简化标题中的过程

例子

```
header(sprintf('Content-type: %s',mime_content_type($filename))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:05:49.357

我想您可以将“Application/octet-stream”用于任何类型的二进制文件格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:09:55.067

当您说您设置标题时，我认为您将**.mp3**和**.pcm**重写为 PHP 脚本。

在这种情况下，您应该使用文件扩展名重写它。然后您可以检查**$_GET**变量中的扩展名。

```
if(strpos('.mp3', $_GET['filename']) !== false) {
   header('Content-Disposition: inline;filename="test.mp3"');
}

if(strpos('.pcm', $_GET['filename']) !== false) {
   header("Content-type: application/octet-stream;");
} 
```

PCM 数据是 RAW-Data，所以我认为您可以使用**八位字节流**或 Baba 的酷解决方案

因此，您可以检查它是哪种格式并为指定文件设置标题。

这是针对此问题的另一篇文章： [Output mp3 with php](https://stackoverflow.com/questions/5275126/output-mp3-with-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:01:04.130

在我的网站中，我使用了这种类型的标题。我建议这个。

例子

header("内容类型：文本/xml；charset=utf-8；charset=windows-1256");

# jquery - jQuery高度有时不工作

> ID：13394233
> 
> 赞同：1
> 
> 时间：2012-11-15T09:03:28.080
> 
> 标签：jquery, wordpress

大家好，我遇到了一个 jQuery 问题。有时它会起作用，并给我正确的高度和其他人完全不同的高度。也许它与正在加载的订单有关，或者我只是做错了什么。如果您发现那里有错误或者您会做出什么不同，请您看一下并告诉我吗？我会很感激。它在 Wordpress 站点中，并且在标题中....

```
 <script type="text/javascript">

jQuery(document).ready(function( $ ) {

// boxen gleiche hoehe

    if($(window).width() >= 1600)  {
        $(".home #fb").height($("#homebox").innerHeight(true) + $("#homebox2").innerHeight(true) - 45) +'px';
        }

    $(".home #twitter, .page-template-homeLayout-php #twitter").height($("#homebox").innerHeight(true) + $("#homebox2").innerHeight(true));
 });

 $(window).resize(function() {

        if($(window).width() >= 1600)  {
        $(".page-id-1235 #fb").height($("#homebox").innerHeight(true) + $("#homebox2").innerHeight(true) - 45) +'px';
        }

        $(".home #twitter, .page-template-homeLayout-php #twitter").height($("#homebox").innerHeight(true) + $("#homebox2").innerHeight(true));

});

});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:07:07.490

在我看来，这个问题是你的 if 语句中的错误代码的结果，这可以解释这个问题看似随机发生的情况。

这是不准确的：

```
if($(window).width() >= 1600)  {
 $(".home #fb").height( $("#homebox").innerHeight(true) + $("#homebox2").innerHeight(true) - 45) +'px';
} 
```

应该是这样的：

```
if($(window).width() >= 1600)  {
 $("#fb").height( 
  $("#homebox").innerHeight(true) + 
  $("#homebox2").innerHeight(true) - 45
 );
} 
```

请注意，每页只允许一个 id，因此选择器只使用 id 就足够了。而且，`height()`采用 int 值，不需要`'px'`像 css 属性。

同样适用

```
if($(window).width() >= 1600)  {
 $(".page-id-1235 #fb").height($("#homebox").innerHeight(true) + $("#homebox2").innerHeight(true) - 45) +'px';
} 
```

应该是

```
if($(window).width() >= 1600)  {
 $("#fb").height(
  $("#homebox").innerHeight(true) + 
  $("#homebox2").innerHeight(true) - 45);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:08:15.507

这是因为您使用 $(window) 作为宽度的基础。而是将您的网站放入容器中

**HTML**

```
<div class="container">
 <div>your content</div>
</div> 
```

**CSS**

```
.container {
 width: 100%;
 margin: 0 auto;
} 
```

然后在你的 JS 中切换 $(window) 与 $(.container) 加上来自 TravisJ 的编辑

# ruby-on-rails - Rails 服务器正在运行，但无法连接到 localhost:3000

> ID：13394238
> 
> 赞同：17
> 
> 时间：2012-11-15T09:03:40.280
> 
> 标签：ruby-on-rails, localhost

我正在通过 railstutorial.org 学习 Ruby on Rails 从第 1 章开始我已经设置好一切并且工作正常。但是，突然之间，我的下一个应用程序出现了问题。

我运行“rails 服务器”

```
=> Booting WEBrick
=> Rails 3.2.9 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-11-15 00:45:08] INFO  WEBrick 1.3.1
[2012-11-15 00:45:08] INFO  ruby 1.9.3 (2012-11-10) [x86_64-linux]
[2012-11-15 00:45:08] INFO  WEBrick::HTTPServer#start: pid=2752 port=3000 
```

似乎工作正常，就像我以前的应用程序一样。

但是，我尝试在各种浏览器上连接到 localhost:3000 、 0.0.0.0:3000 、 127.0.0.1:3000 ，它们都无法建立与服务器的连接。

需要注意的一些事项：

- 不久前我能够连接到本地主机 - 似乎它突然停止工作了。

- 我的第一个应用程序运行良好，但现在它也不适用于我的第一个应用程序。

-我没有防火墙阻止端口，我的主机文件不是问题。

-我在 Ubuntu 12.10

我几乎总是通过搜索找到解决方案，但这次不是......所以我需要一些帮助。这非常令人沮丧，因为我觉得这是一个简单的问题，我花了太长时间被困在上面。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T10:03:20.407

尝试在其他端口（例如 3001）中运行它：
rails server -p 3001
如果它工作得比上面的命令在 3000 上再次尝试。
我认为其他一些软件正在使用您的 3000 端口，这就是它没有响应的原因。
或者对于一些高级的东西看[这里](https://stackoverflow.com/questions/3842818/how-to-change-rails-3-server-default-port-in-develoment)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-11-09T22:44:38.220

对于 rails 4.2.0，服务器`localhost`默认绑定到，而不是`0.0.0.0`. 在虚拟盒子中使用rails时，从主机访问服务器，绑定地址需要为0.0.0.0

启动 rails server`-b0.0.0.0`以使 rails 服务器可从主机/浏览器访问。

[http://guides.rubyonrails.org/4_2_release_notes.html#default-host-for-rails-server](http://guides.rubyonrails.org/4_2_release_notes.html#default-host-for-rails-server) [https://github.com/samuelkadolph/unicorn-rails/issues/12#issuecomment-60875268](https://github.com/samuelkadolph/unicorn-rails/issues/12#issuecomment-60875268)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-23T18:18:40.270

确保`rake db:create`在启动 rails 之前运行。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-06T09:17:45.647

我正在使用 rails 5.0.0.beta3 并且遇到了这个问题。@andrewleung 的回答对我帮助很大。

我的电脑上好像 Rails 默认绑定地址搞砸了（macOS 10.11.6）；在其他一些上，它工作正常。

简单的解决方案就是使用`rails server -b 127.0.0.1`. 然后，您可以访问您的`localhost:3000`.

我的猜测是（从[https://serverfault.com/a/544188](https://serverfault.com/a/544188)提示）`localhost`绑定在我的计算机上搞砸了，而`127.0.0.1`更具体。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-31T11:16:16.263

我有同样的问题，我意识到它在必须更改为的`config/environment/production.rb`文件中`config.assets.compile = false``config.assets.compile = true`

然而，这可能会导致一些 javascript 和 sass 元素无法正常工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-17T20:56:08.480

对我来说......我在工作的代理人背后，不得不做`rails s -b 0.0.0.0 -p 3000`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-07T22:02:55.370

原来我遇到的问题是我的虚拟机已经用完了硬盘空间，甚至没有足够的空间来创建 server.pid 文件。但由于某种原因，它并没有为此引发错误，因为正在创建文件，但被留空。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-07T05:01:01.807

我遇到了同样的问题。事实证明，浏览器同步也在 localhost:3000 上运行。

由于一些 Rails 开发人员会使用浏览器同步来快速测试前端脚本，我认为这可能是使用端口 3000 的一个普遍原因。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-07T05:46:42.810

检查您的 /etc/hosts 文件..是 ip 0.0.0.0 或 localhost 指向其他地址。

# asp.net - 如何设置利用浏览器缓存 asp.net

> ID：13394242
> 
> 赞同：1
> 
> 时间：2012-11-15T09:03:49.233
> 
> 标签：asp.net, iis-7, web-config

如何在 ASP.net IIS 7.0 中设置利用浏览器缓存 在 HTTP 标头和 web.config 文件中的图片中设置到期日期或最长期限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T15:29:13.073

对于 ASP.net，在 global.asax 文件中，在 Application_PreRequestHandlerExecute 函数中调用 Response.Cache.SetExpires 和 Response.Cache.SetMaxAge 方法。对于图片或静态内容，在 IIS 7 web.config 中使用

```
<staticContent>
    <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="7.00:00:00" />
</staticContent> 
```

用所需的持续时间替换 7 天。

# windows-phone-7 - 通过 USB 电缆连接时如何监控 WP7 HTTP 流量

> ID：13394243
> 
> 赞同：3
> 
> 时间：2012-11-15T09:04:10.480
> 
> 标签：windows-phone-7, fiddler

我使用 Fiddler2 来监视来自 Windows Phone 7 应用程序的 HTTP 流量，方法是将手机的 wifi 连接代理到运行 Fiddler2 的 PC。奇迹般有效。但是，这仅在手机未通过 USB 电缆连接时有效。显然这是不可接受的，因为您不能以这种方式调试电话应用程序。

您如何使用通过 USB 电缆连接的手机实现相同的功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:53:10.053

Windows Phone 团队决定在端口 8888 上托管他们的调试桥，窃取所有打算发送给 Fiddler 的流量。

您可以在 Fiddler 中通过单击工具 > Fiddler 选项 > 连接将 Fiddler 移动到不同的端口（例如 8887）来解决此问题。

另请参阅[https://groups.google.com/forum/#!topic/httpfiddler/-Ja4L_tezOc](https://groups.google.com/forum/#!topic/httpfiddler/-Ja4L_tezOc)

# php - 获取 mysql_fetch_row() 期望参数 1 是资源，给定的布尔值

> ID：13394246
> 
> 赞同：-1
> 
> 时间：2012-11-15T09:04:17.787
> 
> 标签：php

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我收到以下警告：

> 警告：mysql_fetch_row() 期望参数 1 是资源，
> 在第 355 行的 /home/content/97/9548797/html/test/index.php 中给出布尔值

代码：

```
$gresrow = mysql_fetch_row($gresult1); 
while( $row = mysql_fetch_row( $gresult1 ) ){ $GDs[] = $row[0]; } 
```

如何删除此警告消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:09:06.497

我会打印出 a`mysql_error()`以查看错误消息是什么。

```
echo mysql_error(); 
```

就个人而言，我认为将 SQL 查询打印出来会有所帮助，尤其是在向其中添加动态变量的情况下。这样您就可以准确地读取正在生成的 SQL 并将其发送到 MySQL。

```
$query = "SELECT id FROM users where parentid=$display";
echo $query; 
```

通过这样做，它将允许您检查是否`$display`已设置..

最后，我强烈建议您避免使用这些`mysql_`函数，因为它们很快就会被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:07:37.857

你可能有一个 MySQL 错误。试着把你的 -line放在`or die(mysql_error());`后面`mysql_query()`，告诉我们错误信息是什么！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:07:43.447

它在抱怨，因为它`gresult1` *是*一个布尔值。它是布尔值的*原因*是因为当您之前的调用（几乎可以肯定`mysql_query`）失败时它被设置为 false。

你需要解决*这个*问题。或者至少检测到它而不是盲目地使用返回值，比如：

```
$gresult1 = mysql_query("some dodgy non-functional query");
if (!$gresult1) {
    # handle error elegantly, then return
}
# NOW you can use gresult1 safely. 
```

要寻找的一件事是，假设您在其他地方的评论中的查询不仅仅是一个错字，那就是使用`$diplay`. 您可能需要检查您的意思是否`$display`（使用`"s"`），因为不存在或格式`$diplay`错误的变量几乎肯定会使查询无法解析，从而导致失败。

但是，即使情况并非如此，您也需要弄清楚早期调用失败的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:09:00.903

您的变量`$gresult1`似乎是一个布尔值，但它必须是来自`mysql_query()`.

我猜，`mysql_query()`返回 FALSE。您应该首先检查您的查询是否成功。

# c# - 如何为 WPF 4 使用 WinRT 转换

> ID：13394247
> 
> 赞同：2
> 
> 时间：2012-11-15T09:04:20.913
> 
> 标签：c#, xaml, windows-7, windows-runtime, wpf-4.0

我想为我的 WPF 4 项目使用新的 Metro 过渡（AddDeleteThemeTransition、ContentThemeTransition、...）。

我可以使用 dll 吗？我在哪里可以下载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:00:35.243

WinRT/XAML 是一种与 WPF 不同的技术，其 WinRT UI 都不能与 WPF 一起使用。此外，这些转换似乎使用了与常规 Storyboard 不同的机制，因此可能无法将它们提取到可以与 WPF 一起使用的东西。

你唯一的选择是自己实现一些东西并让它看起来不错。或者放弃对 Windows 7 的支持，并将您的应用程序实现为 Windows 8 的 WinRT 应用程序。

# delphi - 打印机设置对话框启动打印机

> ID：13394248
> 
> 赞同：4
> 
> 时间：2012-11-15T09:04:25.157
> 
> 标签：delphi, delphi-xe2

我正在 Embarcadero Delphi XE2 中制作应用程序。

我正在使用 PrinterSetupDialog 将打印机名称选择到 TEdit 中，例如：

```
if PrinterSetupDialog1.Execute() then begin

txtPrinterName.Text := Printer.Printers[Printer.PrinterIndex];
ConfigINI.modified := true;

end; 
```

我遇到的问题是，执行此 PrinterSetupDialog 时，总是在启动时选择同一台打印机。我可以切换到另一个好的，TEdit 被填满了。

* * *

我想做的是：

在执行 PrinterSetup 对话框之前

将对话框的选定打印机设置为 TEdit 中的打印机，例如：

```
PrinterSetupDialog.PrinterSelectedAtExecute := txtPrinterName.Text; 
```

帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T14:03:11.520

[`Printer`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Printers.Printer)您可以使用该功能设置打印机设置对话框的初始选择打印机。

```
uses
  Printers;
 ...
 ...
 begin
   Printer.PrinterIndex:=Printer.Printers.IndexOf(txtPrinterName.Text);
   PrinterSetupDialog1.Execute;
 end; 
```

# sql-server - 传输 SQL Server 登录名（Windows 身份验证）

> ID：13394261
> 
> 赞同：0
> 
> 时间：2012-11-15T09:05:25.863
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我们正在将数据库从一台服务器迁移到另一台服务器。我们使用微软提供的[脚本。](http://support.microsoft.com/kb/918992)该脚本为 SQL 登录生成带有 SID 的 CREATE LOGIN 语句，并且在这一点上是成功的。但是，它没有为 Windows 身份验证登录生成 SID。我知道那些登录使用的是 windows SID。无论如何转移这些登录名并保留SID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:15:20.310

如果您害怕新服务器上的孤儿用户，这不是 Windows 身份验证登录的问题。将它们复制过来应该没有问题，因为 sid 将登录名与 sql 登录用户联系起来，但在 Windows 身份验证的情况下则不然。

如果还有其他原因想要为身份验证用户传输 sid，这可能不正确，但我认为没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T19:34:20.160

没有必要。脚本中的“FROM WINDOWS”子句告诉 SQL Server 向操作系统询问 SID。只要新服务器与旧服务器在同一个域中，它就会从 OS/AD 获得正确的 SID。如果新服务器位于不同的域中，则 SID 将不同，然后您必须解决...请参阅 KB 240872。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:46:51.897

您可以在 SSIS（Sql Server 集成服务）中使用 Transfer Logins 任务

# php - 强制 PHP json_encode() 将索引编码为字符串

> ID：13394263
> 
> 赞同：4
> 
> 时间：2012-11-15T09:05:30.157
> 
> 标签：php, json

我有一个数组设置如下：

```
$myArray = array();
$myArray[] = "New array item 1";
$myArray[] = "New array item 2";
$myArray[] = "New array item 3"; 
```

当我在其上运行 json_encode() 时，它会输出以下内容：

```
["New array item 1","New array item 2","New array item 3"] 
```

我想要的是函数将索引编码为字符串：

```
{"0":"New array item 1","1":"New array item 2","2":"New array item 3"} 
```

这样以后我可以删除说第一项而不影响第二项的索引。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T09:08:58.477

使用`JSON_FORCE_OBJECT`：

```
json_encode( $data, JSON_FORCE_OBJECT ); 
```

需要 PHP 5.3+

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T09:10:16.280

不完全是您想要的，但您可以使用`JSON_FORCE_OBJECT`选项：

```
json_encode($myArray, JSON_FORCE_OBJECT); 
```

这将产生：

```
{"0":"New array item 1","1":"New array item 2","2":"New array item 3"} 
```

如果您将数组转换为对象，则相同：

```
json_encode((object)$myArray); 
```

或者：

```
$myArray = array(
  "0" => "New array item 1",
  "2" => "New array item 2",
  "3" => "New array item 3"
  );

 echo json_encode($myArray); 
```

会给出相同的：

```
{"0":"New array item 1","2":"New array item 2","3":"New array item 3"} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T09:18:55.520

对于 PHP < 5.3，请使用此方法：

```
<?php   

$myArray = array();
$myArray[] = "New array item 1";
$myArray[] = "New array item 2";
$myArray[] = "New array item 3";

echo json_encode((object)$myArray); // typecast the array as object

?> 
```

# spring - 什么是 Spring 中的“SessionManagementFilter - 请求的会话 ID XXX 无效”？

> ID：13394267
> 
> 赞同：4
> 
> 时间：2012-11-15T09:05:41.590
> 
> 标签：spring, session, spring-mvc, spring-security

例如，我有时在调试中看到过这种情况，

```
调试 2012-11-15 08:58:26：org.springframework.security.web.session.SessionManagementFilter - 请求的会话 ID198F14EA1B74CB1377D895C812345678 无效。

```

谁能解释它的含义，以及它发生的原因？（很抱歉问了这个基本问题。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:22:43.623

这意味着已经请求的http会话已经失效。这通常是由于超时造成的，即距离上次使用该会话已经太久，并且它已被丢弃。在更实际的情况下，这通常是因为您连接的浏览器已被单独放置太久。

您可以通过在过滤器上设置 InvalidSessionStrategy 来配置您希望在发生这种情况时看到的行为。

# c# - Excel 添加事件在打开新工作表后停止触发

> ID：13394273
> 
> 赞同：1
> 
> 时间：2012-11-15T09:05:55.473
> 
> 标签：c#, excel, events

我正在开发一个 excel 插件。当我的功能区加载时，我添加了一个带有按钮的单元格上下文菜单。我将处理程序附加到按钮的单击事件以选择文件。当我运行 excel 时，它适用于默认的第一张工作表。但是，如果我打开一个新工作表，单击时没有任何反应。为什么？

我的色带加载功能：

```
 private void Ribbon1_Load(object sender, RibbonUIEventArgs e)
    {
        Helper.SetVar(Globals.ThisAddIn.Application, Globals.Factory);
    } 
```

我有几个在那个引用中添加了一个工具箱 dll。所以这是我的 Toolbox dll 的公共静态 Helper 类中的 setVar 函数：

```
 public static void SetVar(Excel.Application appSource, Microsoft.Office.Tools.Excel.ApplicationFactory FactorySource)
    {
        if(path=="")
        {
            string fullPath = typeof(Helper).Assembly.CodeBase;
            string theDirectory = Path.GetDirectoryName(fullPath);
            path = new Uri(theDirectory).LocalPath;
        }
        if (app == null)
            app = appSource;
        if (Factory == null)
            Factory = FactorySource;
        rightClickMenu();
    } 
```

它调用rightClickMenu，即：

```
 public static void rightClickMenu()
    {
        bool val = false;
        removeRightClickMenu(ref val);
        Office.CommandBarPopup ctrl = (Office.CommandBarPopup)app.CommandBars["Cell"].Controls.Add(Type: Office.MsoControlType.msoControlPopup, Before: 1);
        ctrl.Caption = "Perso";
        Office.CommandBarButton btn = (Office.CommandBarButton)ctrl.Controls.Add(Type: Office.MsoControlType.msoControlButton);
        btn.Caption = "Sélectionner un fichier";
        btn.Click += new Office._CommandBarButtonEvents_ClickEventHandler(selectFile);
    } 
```

点击处理程序是：

```
 public static void selectFile(Office.CommandBarButton ctrl, ref bool Cancel)
    {
        OpenFileDialog openFileDialog1 = new OpenFileDialog();
        openFileDialog1.InitialDirectory = "c:\\";
        openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
        openFileDialog1.FilterIndex = 2;
        openFileDialog1.RestoreDirectory = true;
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            var filename = openFileDialog1.FileName;
            //var filename = openFileDialog1.SafeFileName;
            app.ActiveCell.Value = filename;
        }
    } 
```

# ruby - 无法在 Ruby 中比较 UTF-8 字符

> ID：13394275
> 
> 赞同：2
> 
> 时间：2012-11-15T09:06:01.900
> 
> 标签：ruby, cucumber

我正在使用 Ruby - Cucumber 进行自动化。

我正在尝试将日文字符作为参数发送给用户定义的函数以在 db 中进行验证。

下面是我使用的语句： x=$objDB.run_select_query_verifyText('select name from xxxx where id=1','ごせり槎ゃぱ')

在 run_select_query_verifyText() 函数中，我有连接 db 并从 db 获取记录的代码，它将验证作为参数传递的文本（日文字符。）

如果字符串与 DB 中的表数据匹配，则此函数返回 true，否则返回 false。

但我总是出错，我发现日文字符串正在转换为“??????” 在比较数据时。

注意：我的程序可以正常使用英文字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:55:07.137

您的问题很可能与字符编码有关。数据库以与您正在使用的 Ruby 字符串不同的编码返回内容。您需要弄清楚 db 编码是什么，并确保两者相同。

如果您使用的是 ruby​​ 1.9，您可以使用 .检查当前编码的编码`yourstring.encoding`并将其更改为例如 UTF-8 和`yourstring.encode("UTF-8")`. 如果您使用的是 ruby​​ 1.8，则事情会更加棘手，因为 String 类本身不支持编码。您可以使用例如[字符编码](http://rubygems.org/gems/character-encodings)gem 来解决这个问题。

# image - Safari 忽略画布中图像的色彩空间

> ID：13394276
> 
> 赞同：1
> 
> 时间：2012-11-15T09:06:09.060
> 
> 标签：image, canvas, safari, drawimage, color-space

我有以下问题：

我在`<img>`网站上的元素中有图片。它们都在 srgb 颜色空间中，这些信息都包含在它们中。
它们看起来就像在 Safari、Chrome 和 Firefox 中一样。
然后我使用`drawImage(imageObject)`. 这些图像看起来与`<img>`chrome 和 firefox 中的 -elements 中的图像完全一样（据我所知，这是 w3c 的预期行为）。
但是，canvas-element 中的这些图像在 safari 中看起来不同！从我发现的情况来看，颜色空间似乎正在被丢弃/忽略，因此颜色的变化非常糟糕。

我在 OSX 10.8.2 上使用 Safari 6.0.2

对于这种不良行为，是否有任何已知的解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:16:06.077

规范说：

画布 API 必须仅在两点执行颜色校正：在将具有自己的伽马校正和颜色空间信息的图像渲染到画布上时，将图像转换为画布使用的颜色空间（例如，使用 2D 上下文的 drawImage() 方法使用 HTMLImageElement 对象），以及在将实际画布位图渲染到输出设备时。

[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#color-spaces-and-color-correction](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#color-spaces-and-color-correction)

那么这是一个Safari错误。

我不相信有解决方法，除非您通过实现自己的过滤器手动调整像素颜色以匹配 Safari 中的颜色空间。

# java - java内存泄漏。如何打破对象的可达性以及如何最小化克隆方法？

> ID：13394277
> 
> 赞同：-4
> 
> 时间：2012-11-15T09:06:09.943
> 
> 标签：java, memory-leaks, jvm

我正在开发一个遭受内存泄漏的 java web start 应用程序。我使用了许多工具并找到了可疑对象。我的应用程序使用了许多对象的克隆方法。现在的问题是如何解决它......当它最后使用时将 null 放入对象不起作用......任何形式的帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:12:49.200

启动[VisualVM](http://visualvm.java.net/)，它应该可以让你看到周围有什么物体。它是调试内存相关问题的宝贵工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:21:00.250

当您有一个长时间运行的进程包含对应该消失的对象的引用时，就会发生内存泄漏。

例如，我发现 Swing 应用程序中的已关闭文档保存在内存中，因为键盘和鼠标侦听器（应用程序的全局）仍然持有对显示它们的面板的引用。

如上所述，JVisualVM 可以通过引用链帮助找到保留对象的根。找到根，切断那里的链接。

如果您的克隆方法保留引用/与原始对象共享对象，则意味着您的克隆编码错误（它们应该进行深度复制，AFAIK）。有关正确的 clone() 编写方法（或使用替代方法，如复制构造函数），请参阅 Effective Java 书。

# smartgwt - 如何从 smartGWT 中的 gridList 中检索数据

> ID：13394278
> 
> 赞同：0
> 
> 时间：2012-11-15T09:06:16.847
> 
> 标签：smartgwt

我从 Smart GWT 创建了一个 ListGrid

附上截图

我无法获取 gridList 的值。

附上我的gridList img

```
 ListGrid countryGrid = new ListGrid(); 
```

现在我将如何获得这个“我的测试”？

谢谢

![在此处输入图像描述](../Images/8374d84880e66514a3489f4ea3d0b462.png)

# iphone - UICollectionView：如何获取部分的标题视图？

> ID：13394282
> 
> 赞同：32
> 
> 时间：2012-11-15T09:06:29.340
> 
> 标签：iphone, ios, uicollectionview

有一种方法可以通过`indexPath`( `UICollectionView cellForItemAtIndexPath:`) 获取单元格。但我找不到一种方法来获取一个补充视图，如页眉或页脚，在创建后。有什么想法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-16T04:40:36.197

## 更新

从 iOS 9 开始，您可以使用[`-[UICollectionView supplementaryViewForElementKind:atIndexPath:]`](http://mayoff-imac.local:53048/Dash/xxeuovbv/documentation/UIKit/Reference/UICollectionView_class/index.html#//apple_ref/occ/instm/UICollectionView/supplementaryViewForElementKind:atIndexPath:)通过索引路径获取补充视图。

## 原来的

您最好的选择是制作自己的字典映射索引路径到补充视图。在您的`collectionView:viewForSupplementaryElementOfKind:atIndexPath:`方法中，在返回之前将视图放入字典中。在您的`collectionView:didEndDisplayingSupplementaryView:forElementOfKind:atIndexPath:`中，从字典中删除视图。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-07-12T02:47:24.597

我想分享我对**rob mayoff**提供的解决方案的见解，但我不能发表评论，所以我把它放在这里：

对于每一个试图保持对集合视图正在使用的补充视图的引用，但由于以下原因而遇到过早丢失跟踪的问题的每一个人

```
collectionView:didEndDisplayingSupplementaryView:forElementOfKind:atIndexPath: 
```

被调用太多次，尝试使用 NSMapTable 而不是字典。

我用

```
@property (nonatomic, strong, readonly) NSMapTable *visibleCollectionReusableHeaderViews; 
```

像这样创建：

```
_visibleCollectionReusableHeaderViews = [NSMapTable mapTableWithKeyOptions:NSMapTableStrongMemory valueOptions:NSMapTableWeakMemory]; 
```

这样当您保留对补充视图的引用时：

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
{
    // ( ... )
    [_visibleCollectionReusableHeaderViews setObject:cell forKey:indexPath]; 
```

它在 NSMapTable 中只保留对它的 WEAK 引用，并且只要对象没有被释放，它就会一直保留它！

您不再需要从中删除视图

```
collectionView:didEndDisplayingSupplementaryView:forElementOfKind:atIndexPath: 
```

因为一旦视图被释放，NSMapTable 就会丢失条目。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-16T04:29:19.363

您要做的第一件事是在集合视图的属性检查器中选中“Section Header”框。然后添加一个集合可重用视图，就像您将单元格添加到集合视图一样，编写一个标识符并在需要时为其创建一个类。然后实现方法：

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath 
```

从那里开始就像你对 cellForItemAtIndexPath 所做的那样指定它是你正在编码的页眉或页脚也很重要：

```
if([kind isEqualToString:UICollectionElementKindSectionHeader])
{
    Header *header = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"headerTitle" forIndexPath:indexPath];
    //modify your header
    return header;
}

else
{

    EntrySelectionFooter *footer = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:@"entryFooter" forIndexPath:indexPath];
    //modify your footer
    return footer;
} 
```

使用 indexpath.section 来了解这是在哪个部分，还请注意 Header 和 EntrySelectionFooter 是我制作的 UICollectionReusableView 的自定义子类

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-12T08:20:10.303

这种方法通常足以达到重新加载屏幕补充视图的目的：

```
collectionView.visibleSupplementaryViews(ofKind: UICollectionElementKindSectionHeader) 
```

# ruby - 在 capybara 中获取屏幕截图的“原始”内容，而不将图像保存到磁盘

> ID：13394284
> 
> 赞同：0
> 
> 时间：2012-11-15T09:06:45.037
> 
> 标签：ruby, capybara

有没有办法`session.driver.render('test.png')`在水豚中获取图像的“原始”字符串内容，而无需实际将图像保存到磁盘并随后将其加载回内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:15:32.487

PhantomJS 提供了一个`renderBase64`方法。[API 参考](https://github.com/ariya/phantomjs/wiki/API-Reference)

然而，Poltergeist 不提供任何约束力。我只是快速浏览了一下，但我认为您应该能够 fork/patch Poltergeist 以在[driver.rb](https://github.com/jonleighton/poltergeist/blob/master/lib/capybara/poltergeist/driver.rb)和[browser.rb中包含绑定](https://github.com/jonleighton/poltergeist/blob/master/lib/capybara/poltergeist/browser.rb)

这里已经有关于这个的讨论：[https ://github.com/jonleighton/poltergeist/issues/189](https://github.com/jonleighton/poltergeist/issues/189)

# javascript - 存储 cookie 电子商务网站

> ID：13394297
> 
> 赞同：0
> 
> 时间：2012-11-15T09:07:38.357
> 
> 标签：javascript, html, cookies, e-commerce

如何存储cookies，以便用户下次不需要存储。

我想为现在和下次用户访问该网站时存储 cookie 进行自动化处理。

目前我找到了一个例子：

```
 function readCookie(name)
   {
     var cookieValue = "";
     var search = name + "";
     if (document.cookie.lengt >0)
       {
         offset = document.cookie.indexOf(search);
         if(offset != -1)
           {
             offset +=search.length;
             end = document.cookie.indexOf(";", offset);
             if (end == -1) end = document.cookie.length;
             cookieValue = unescape(document.cookie.substring(offset, end))
            }
         }

      return cookieValue;

    } 
```

有人可以解释这里发生了什么。据我所知，这只读取数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:16:38.233

您显示的示例中有拼写错误（长？）。如果您继续搜索，您可能会发现大量关于此主题的示例，从该站点开始...

为了部分回答您的问题，大多数时候用户甚至不知道存储了 cookie，尽管我看到最近的趋势是向用户请求许可（这是新的法律义务吗？）。

您的问题有点含糊：您可以获得存储和检索 cookie 的代码，但您必须在您的网站上调用一些 JavaScript，知道要存储什么等。

# c++ - 当程序作为服务运行时重定向 std::cout

> ID：13394298
> 
> 赞同：1
> 
> 时间：2012-11-15T09:07:39.853
> 
> 标签：c++, windows, cout

我有一个使用 std::cout 打印到屏幕的 c++ 程序。

有时我需要将它作为服务运行。当它作为 Windows 服务运行时，有什么方法可以查看 cout 输出？

将输出重定向到文件或某种调试程序将是理想的。

显然，我可以用写入文件的函数替换 cout，这可能就是我要做的，但我很想知道是否有其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:10:03.887

基本上有无限的选择。最先想到的几个：

**传递 ostream 引用**

您可以传递 std::ostream 参考：

```
void someFunc(std::ostream& out) {
    //someFunc doesn't need to know whether out is a file, cout, or whatever
    out << "hello world" << std::endl;
} 
```

**用文件替换`cout`底层缓冲区**

来自[cplusplus.com](http://www.cplusplus.com/reference/iostream/ios/rdbuf/)的示例：

```
streambuf *psbuf, *backup;
ofstream filestr;
filestr.open ("test.txt");

backup = cout.rdbuf();     // back up cout's streambuf

psbuf = filestr.rdbuf();   // get file's streambuf
cout.rdbuf(psbuf);         // assign streambuf to cout

cout << "This is written to the file"; 
```

有一个带有 freopen 的 1-liner，但我有一种令人毛骨悚然的感觉（[这](https://stackoverflow.com/a/5257664/567864)似乎在评论中强化了它）这是未定义的行为，因为 stdin 和 cout 可以不同步。

```
freopen("/path/to/file", "r", stdout);
//cout is now writing to path/to/file 
```

**一个日志库**

不确定我的头上是否有一个好的，但你可以全力以赴并使用某种类型的日志库。（还有 Windows 事件，但取决于您输出的内容，这可能没有意义。）

**管道**

我怀疑这对于 Windows 服务是可能的，但如果是的话，总会有经典的重定向：

```
blah.exe > C:\path\file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:54:47.057

简单的解决方案是`SetStdHandle(STD_OUTPUT_HANDLE, your_new_handle)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-06T03:40:34.350

你可以这样做：

```
class MyTerminal {
    std::stringstream terminalText;
}

class MyWindow {
public:
     void OnUpdate();
protected:
CTextbox m_textbox;
MyTerminal m_terminal;
}

void MyWindow::OnUpdate()
{
    m_textBox.setText(m_terminal.terminalText.str());
    m_terminal.terminalText.str(std::string());
} 
```

# smb - 计算 SPNEGO GSS-API(NTLMSSP_AUTH) 接受完成(0) 状态的“mechListMIC”的方法

> ID：13394303
> 
> 赞同：2
> 
> 时间：2012-11-15T09:07:54.690
> 
> 标签：smb, cifs, spnego

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:39:00.393

[请在 MSDN 网站http://social.msdn.microsoft.com/Forums/gu-IN/os_fileservices/thread/d00b4e1a-077b-4620-99c7-da7bf86d5212](http://social.msdn.microsoft.com/Forums/gu-IN/os_fileservices/thread/d00b4e1a-077b-4620-99c7-da7bf86d5212)中找到答案

# asp.net - 查找有关 IIS 线程池的信息

> ID：13394310
> 
> 赞同：0
> 
> 时间：2012-11-15T09:08:19.890
> 
> 标签：asp.net, asp.net-mvc-3, iis-7.5, windows-server-2008-r2, resource-monitor

我正在开发网络应用程序`ASP.NET MVC`并将其托管在`IIS7.5`我想知道我的应用程序使用`Thread Pool`多少线程以及剩余多少线程。

我一直在寻找有关监视 IIS7.5 线程池的信息，但没有任何运气。我找不到任何可以显示此数据的资源监视器计数器，也找不到`Thread Pool`从 ASP.NET 应用程序本身访问信息的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T19:57:31.347

我发现以下内容很有帮助（即使它被标记为可能已过时）：[如何：使用自定义计数器监视 ASP.NET 线程池](http://msdn.microsoft.com/en-us/library/ff650682.aspx)

另外：[关于stackoverflow的类似问题](https://stackoverflow.com/questions/338884/monitor-net-threads)

# android - ViewFlipper 不加载位图图像

> ID：13394313
> 
> 赞同：0
> 
> 时间：2012-11-15T09:08:38.383
> 
> 标签：android, imageview, viewflipper, db4o

大家好，当我尝试将图像添加到 viewflipper 页面时遇到了一些麻烦，我正在从 db4o 数据库中提取位图（不确定是编码还是它使用的东西让我感到困惑）。

```
private void setImageView() {
    page = (ViewFlipper) findViewById(R.id.viewFlipper1);

    int temp = DigPlayDB.getInstance(getBaseContext()).getPlaysDBSize();

    for(int j = 0; j < temp; ++j){
        test.add(DigPlayDB.getInstance(getBaseContext()).getPlayByInt(j).getImage());
        test1.add(DigPlayDB.getInstance(getBaseContext()).getPlayByInt(j).getPlayName());
    }

    for(int i=0;i<temp; i++)
    {
        //  This will create dynamic image view and add them to ViewFlipper
        setFlipperImage(test.get(i));
    } 
```

然后设置图像并将视图添加到页面

```
private void setFlipperImage(Bitmap image){
    ImageView _image = new ImageView(getApplicationContext());
    //_image.setBackgroundDrawable(new BitmapDrawable(getResources(), image));
    _image.setImageBitmap(image);
    page.addView(_image);
    Log.d("db", "" + image);

} 
```

它在我将图像添加到数据库后立即工作，但只是该图像，旧图像以及当我重新启动应用程序时不会加载，即使它说它们是从我设置的调试日志中加载的。我认为最后一个出现了，因为它仍然可能在某个地方的缓存中，但是存储在数据库中而不是缓存中的旧的没有正确编码或其他东西。任何帮助都是极好的。谢谢！

编辑：我应该提到“测试”是位图的数组列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:01:23.973

好的，您在评论中说您将对象存储为 Bitmap 实例。我猜那是一个 Android 或库类。

不要那样做。仅存储您自己的类的实例。存储类、java.util.collections、数组和原语的实例是可以的。其他一切都必然会出现问题：db4o 将急切地尝试存储任何对象。这是库实例的问题。您无法控制它们的作用、它们在内部的工作方式以及它们在加载后是否仍然工作。

我认为这就是这里发生的事情。只要应用程序正在运行，db4o 就会返回对象的缓存实例，这很好。重新启动应用程序后，db4o 加载 Bitmap 对象。然而，位图对象不打算与 db4o 一起存储，因此它会因错误存储的内部状态而绊倒。

因此，将您的图片存储在字节数组中。或者就像 SD 卡上的普通文件一样。

# plugins - 声纳 3.1 javascript 问题

> ID：13394317
> 
> 赞同：5
> 
> 时间：2012-11-15T09:09:01.807
> 
> 标签：plugins, sonarqube

在声纳 2.5 中，javascript 文件夹中有 jit-yc.js 文件。
这个js文件用于开发散热器插件。但此文件已从声纳 3.1 中删除。
sonar3.1 中是否还有其他与 jit.jy.js 相同的 js 文件。我需要这个文件来构建一个插件。
有没有其他方法可以使用这个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:32:26.413

插件可以提供静态文件，如图像、CSS 或 JS 文件。它们必须在 src/main/resources/static 中复制，然后可以从公共 URL 访问：http:///static//

你可以在这里阅读更多：http: [//docs.codehaus.org/display/SONAR/Extend+Web+Application#ExtendWebApplication-Staticfiles](http://docs.codehaus.org/display/SONAR/Extend+Web+Application#ExtendWebApplication-Staticfiles)

# php - PHP中PDO的奇怪行为

> ID：13394318
> 
> 赞同：-1
> 
> 时间：2012-11-15T09:09:02.580
> 
> 标签：php, mysql, debugging, pdo

我有一个 PDO 语句，由于某种原因拒绝正确执行。它返回假。但是，当使用 PDO 的 query() 运行完全相同的语句时，它的工作方式就像它应该的那样。. .

这是相关代码：

```
// Prepare PDO statement
$getStatus = $dbHandle->prepare("SELECT `active` FROM `teachers`
                                 WHERE `id` = :teacher LIMIT 1;");
$getStatus->setFetchMode(PDO::FETCH_ASSOC);
$getStatus->bindParam(':teacher', $teacher_id, PDO::PARAM_INT);

// This statement retrieved the relevant teacher id;
// or false, if an invalid teacher was specified; in this
// case, we specify a valid teacher
$teacher_id = array_search($_POST['teacherName'], $acronyms);

// For debugging: show $teacher_id
echo("$teacher_id<br />");

// Execute query; should return an associative array
$newStatusArray = $getStatus->fetch();

// Nothing . . .
print_r($newStatusArray);

// returns "bool(false):
var_dump($newStatusArray);

// Trying with a query
foreach ($dbHandle->query("SELECT `active` FROM `teachers`
                           WHERE `id` = $teacher_id LIMIT 1;") as $row) {
  // This loop runs only once because of the LIMIT 1
  $newStatus = $row['active'];
}

// This prints the new status (was changed before, is always 0 or 1)
echo("$newStatus<br />"); 
```

正常的查询，虽然它*应该*完全按照准备好的语句做，但它是有效的；但是准备好的语句什么也不返回。. .

`$getStatus->errorCode()`是空的 。. . 所以 MySQL 很高兴。此外，`$getStatus->debugDumpParams()`显示它应该做什么：

```
SQL: [62] SELECT `active` FROM `teachers` WHERE `id` = :teacher LIMIT 1;
Params: 1 Key: Name: [8] :teacher paramno=-1 name=[8] ":teacher"
is_param=1 param_type=1 
```

我一直试图让它工作一个多小时，但我真的不明白出了什么问题。任何人都可以看到这里有什么问题吗？

我将不胜感激任何指针！

/////////////////////////////////////////////// 编辑： / //////////////////////////////////////

谢谢您的回答！太愚蠢了——事实上，我忘记了执行语句。呃。. . 非常非常尴尬。很抱歉占用了您的时间！！！像这样，它确实有效：

```
if (!$getStatus->execute()) {
  errorHandler("Errorcode: {$getStatus->errorCode()},
                errorinfo: {$getStatus->errorInfo ()}.");
}
$newStatusArray = $getStatus->fetch();
var_dump($newStatusArray); 
```

bindParam*可以*留在顶部；这符合我对这种方法价值的理解；您可以在 PDO 语句中将一个变量指定给一个槽，并且每当执行查询时，该变量的值就会被传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:15:29.587

你忘了`->execute()`你的陈述。

```
$getStatus->execute(); // added
$newStatusArray = $getStatus->fetch(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:11:56.443

我很好奇为什么你的指示：

```
$teacher_id = array_search($_POST['teacherName'], $acronyms); 
```

在绑定指令之后：

```
$getStatus->bindParam(':teacher', $teacher_id, PDO::PARAM_INT); 
```

也许这是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:14:02.760

在从参数中`$teacher_id`检索值之前进行绑定。`$_POST`如果你移动`bindParam()`之后它应该工作。

# apache - Apache Tomcat - 两因素身份验证

> ID：13394323
> 
> 赞同：4
> 
> 时间：2012-11-15T09:09:23.100
> 
> 标签：apache, tomcat6, saml, saml-2.0, tomcat-valve

我正在尝试将两因素身份验证解决方案与托管在 Apache Tomcat 上的邮件服务器集成。现在，该应用程序正在使用基于表单的身份验证，用户输入他的用户名和密码，并针对作为后端的 openLDAP 进行身份验证。

我们想要的是以下内容 -

1）。用户输入他的 Un 和 PWD
2)。该请求被“拦截”并被“搁置”
3）。生成一次性密码 (OTP) 并将其作为 SMS 发送给用户。
4）。用户会看到一个新页面，其中包含一个用于输入该 OTP 的框。
5）。用户输入作为 SMS 发送的他/她的 OTP
6)。验证 OTP，如果为真，则转发步骤“2”中的“保留”请求以进行进一步验证

问题是我无法访问邮件服务器应用程序的源代码。

我可以使用 ISAPI 过滤器在 IIS(Microsoft) 中实现非常相似的功能，但需要知道如何在 Apache 中实现此功能？

我正在查看 Valve/Filter 和 SAML 的行，但不知道如何以及在哪里进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:34:33.767

我联系了 logintc 人员以获取他们的 2 因素凭证，并使用他们的应用程序解决了我的 2 因素问题。去看一下。

[https://cloud.logintc.com](https://cloud.logintc.com)

LoginTC 平台服务对 1,000 名以下的用户免费。那太好了。

我按照此 URL 中的说明进行操作：[https ://cloud.logintc.com/help/developers](https://cloud.logintc.com/help/developers)

基本上，我在 logintc 云控制面板中为我的域创建了一个管理员帐户。然后我使用服务器端身份验证指令通过 logintc 按钮启用我的 Apache 网站，并在我的身份验证页面中添加代码片段。

我的用户从 Appstore、Android 或 Blackberry 市场下载 logintc 应用程序，我向他们发出确认码，然后他们使用 PIN 码（与 ATM 卡相同）在应用程序中创建他们的凭证令牌

整个配置不到 1 小时。我的用户收到带外通知，用 PIN 解锁他们的凭证，宾果游戏，他们实现了 2FA。

你必须检查他们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:24:43.097

我建议使用来自 Sun 的[OpenAM](http://forgerock.com/what-we-offer/open-identity-stack/openam/ "开放式")前 OpenSSO

它有一个可以部署在 apache 上的过滤器/代理，它对包括 SMS 身份验证模块在内的多因素身份验证有很好的支持。

# c# - 空空错误

> ID：13394324
> 
> 赞同：0
> 
> 时间：2012-11-15T09:09:37.010
> 
> 标签：c#, xna

有没有办法告诉程序我不在乎类引用是否为空。例如：

```
if (playermove[i].name == "punch" || ispunchactivated == true)
{
    Do the punch;
} 
```

为什么他要搜索 playermove（可以为空）并给我一个空异常错误？我真的不在乎 ispunchactivated 是否为真。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T09:12:32.937

如果你把你的两个条件反过来：

```
ispunchactivated /*== true*/ || playermove[i].name == "punch"
                 // this isn't necessary 
```

那么，如果第一个为真，则不会检查第二个。

但是，除非您*知道* `playermove[i]`如果为 false 不会为 null ，否则`ispunchactivated`您确实应该也进行 null 检查，否则您仍然会遇到异常：

```
ispunchactivated ||
    (playermove[i] != null && playermove[i].name == "punch") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T09:11:55.887

您只需先检查它是否为空。
这里没有捷径。

```
if (playermove == null || playermove[i].name == "punch" || ispunchactivated == true)
{
    Do the punch;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T09:12:21.363

您可以按如下方式修改 if 条件：

```
if (ispunchactivated == true || (playermove!=null && playermove[i].name == "punch" )) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T09:12:46.487

尝试这个，

```
if ((ispunchactivated == true) || (playermove[i] != null && playermove[i].name == "punch" ))
{
    Do the punch;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-15T09:13:11.213

只需交换条件，短路就会为您做到这一点：

```
if (ispunchactivated == true || playermove[i].name == "punch")
{
    Do the punch;
} 
```

`playermove[i]`仅在`ispunchactivated`为 false 时评估。`ispunchactivated`话虽如此，如果为假且为空，您仍然可以遇到空指针异常`playermove[i]`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T09:13:41.340

改变你的条件如下：

```
if(playermove !=null && playermove[i] != null)
{
    if (playermove[i].name == "punch" || ispunchactivated == true)
    {
        Do the punch;
    }
} 
```

# magento - 停止 Magento 在静态块中“修复”html

> ID：13394325
> 
> 赞同：7
> 
> 时间：2012-11-15T09:09:37.197
> 
> 标签：magento, tinymce

有谁知道是否有某种方法可以阻止通过静态块添加的 Magento “修复” html？

例如，如果我想在现有菜单中有一个空间来添加静态块，我不想使用完整的 <ul> 列表，因为它已经存在，所以我只想要一些额外的 <li> 标签块内。

但是，Magento*非常有*帮助地决定始终为您添加“缺少的” < ul > 标签。比较烦人。

我试过自己追溯这件事，但就是找不到它发生的地方。我认为这可能与 TinyMce 相关，因为如果您隐藏/显示编辑器而不刷新页面，则会发生修复。我尝试将我发现的 cleanup:1 更改为 cleanup:0 的不同实例，但到目前为止它们都没有工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T09:33:29.343

进行此清理的不是 magento，而是所见即所得的编辑器：tiny_mce

您可以通过添加以下内容来停用此行为：

```
cleanup : false 
```

在 js 配置文件 (js/mage/adminhtml/wysiwyg/tiny_mce/setup.js)

但这完全不推荐，因为它可能会破坏您的所有页面，因为在块或页面中注入了 HTML 错误，并且您的项目中没有任何其他 HTML 整理器......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:28:57.150

查看 tinymce 配置参数[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)和[valid_children](http://www.tinymce.com/wiki.php/Configuration%3avalid_children)。您可以在那里将`li`-tags 定义为有效元素，并定义`li`-tags 可能是其他 thml 节点的子节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T19:20:10.777

您还可以添加

```
 valid_elements: '*[*]', 
```

到*js/mage/adminhtml/wysiwyg/tiny_mce/setup.js*以允许一切。

# javascript - 清除矩形不起作用

> ID：13394335
> 
> 赞同：0
> 
> 时间：2012-11-15T09:10:27.153
> 
> 标签：javascript

我想在绘图程序中添加具有不同功能的按钮。但我当然遇到了第一个问题。我试图有一个按钮来清除整个画布。但不知何故，它不起作用。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {

var cb_canvas = null;
var cb_ctx = null;
var cb_lastPoints = null;
var cb_easing = 0.4;

// Setup event handlers
window.onload = init;
function init(e) {
cb_canvas = document.getElementById("cbook");

cb_lastPoints = Array();

if (cb_canvas.getContext) {
    cb_ctx = cb_canvas.getContext('2d');
    cb_ctx.lineWidth = 2;
    cb_ctx.strokeStyle = "rgb(0, 0, 0)";
    cb_ctx.beginPath();

    cb_canvas.onmousedown = startDraw;
    cb_canvas.onmouseup = stopDraw;
    cb_canvas.ontouchstart = startDraw;
    cb_canvas.ontouchstop = stopDraw;
    cb_canvas.ontouchmove = drawMouse;
}
}

function startDraw(e) {
if (e.touches) {
    // Touch event
    for (var i = 1; i <= e.touches.length; i++) {
        cb_lastPoints[i] = getCoords(e.touches[i - 1]); // Get info for 
finger #1
    }
}
else {
    // Mouse event
    cb_lastPoints[0] = getCoords(e);
    cb_canvas.onmousemove = drawMouse;
}

return false;
}

// Called whenever cursor position changes after drawing has started
function stopDraw(e) {
e.preventDefault();
cb_canvas.onmousemove = null;
}

function drawMouse(e) {
if (e.touches) {
    // Touch Enabled
    for (var i = 1; i <= e.touches.length; i++) {
        var p = getCoords(e.touches[i - 1]); // Get info for finger i
        cb_lastPoints[i] = drawLine(cb_lastPoints[i].x, cb_lastPoints[i].y, 
p.x, p.y);
    }
}
else {
    // Not touch enabled
    var p = getCoords(e);
    cb_lastPoints[0] = drawLine(cb_lastPoints[0].x, cb_lastPoints[0].y, p.x,     
p.y);
}
cb_ctx.stroke();
cb_ctx.closePath();
cb_ctx.beginPath();

return false;
}

// Draw a line on the canvas from (s)tart to (e)nd
function drawLine(sX, sY, eX, eY) {
cb_ctx.moveTo(sX, sY);
cb_ctx.lineTo(eX, eY);
    return { x: eX, y: eY };
}

// Get the coordinates for a mouse or touch event
function getCoords(e) {
if (e.offsetX) {
        return { x: e.offsetX, y: e.offsetY };
    }
    else if (e.layerX) {
        return { x: e.layerX, y: e.layerY };
    }
    else {
        return { x: e.pageX - cb_canvas.offsetLeft, y: e.pageY -     
cb_canvas.offsetTop };
}
}

$("clear").onclick=function(){clearAll()};

function clearAll() {
        var canvas = $("#cbook");
        var ctx = canvas.get(0).getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);   
}

});

</script>
</head>
<body>
<canvas id="cbook" width="500" height="333"></canvas>

<button id="clear">Clean Up</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:23:38.013

你说的很对，有几个问题...

```
$("clear").onclick=function(){clearAll()}; 
```

应该读

```
$("#clear").click(clearAll); 
```

您需要将选择器标记为 id，并且您还试图将本机元素事件放在 jQuery 对象上。

另一个问题与您使用包含画布而不是本机元素的 jQuery 对象类似，而是更改...

```
var canvas = $("#cbook");
var ctx = canvas.get(0).getContext("2d");
ctx.clearRect(0, 0, canvas.width, canvas.height); 
```

至...

```
var canvas = $("#cbook");
var ctx = canvas.get(0).getContext("2d");
ctx.clearRect(0, 0, canvas.get(0).width, canvas.get(0).height); 
```

或者更简单...

```
var canvas = $("#cbook").get(0);
var ctx = canvas.getContext("2d");
ctx.clearRect(0, 0, canvas.width, canvas.height); 
```

一个小提琴...

[http://jsfiddle.net/zZhfE/](http://jsfiddle.net/zZhfE/)

哦，完全忘记了，`window.onload`处理程序是不必要的，因为您在 jQuery 的文档就绪功能中运行它，无论如何一切都应该准备就绪。我只是将所有内容移出函数并删除了`window.onload`处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:21:40.023

我可以看到您的代码存在三个主要问题。首先，您正在混合和匹配 Javascript 和 jQuery，这会导致问题（使用 Canvas 时，请尝试坚持使用原版 Javascript）。

您没有在`clearAll()`函数中获取上下文，因为您正在尝试使用 jQuery：

```
var canvas = $("#cbook"); 
```

当您应该使用普通 ol' JS 时，例如在您的绘图功能中：

```
var canvas = document.getElementById("cbook"); 
```

其次，您要像这样调用 clear 函数：

```
$("clear").onclick=function(){clearAll()}; 
```

什么时候应该是这样的：

```
$("#clear").on('click', function(){clearAll()}); 
```

（注意`#`前面`clear`- 您需要使用它来引用元素的 ID。）

最后，您正在画布内寻找画布的第一个实例，但它不起作用：

```
 var ctx = canvas.get(0).getContext("2d"); 
```

所有你需要的是：

```
var ctx = canvas.getContext("2d"); 
```

这是一个有效的 JSFiddle：

[http://jsfiddle.net/hGjDR/](http://jsfiddle.net/hGjDR/)

# bigdata - Jaql - 顶级操作员默认顺序

> ID：13394344
> 
> 赞同：0
> 
> 时间：2012-11-15T09:11:27.677
> 
> 标签：bigdata, jjaql, biginsights

根据IBM 文档 - [http://publib.boulder.ibm.com/infocenter/bigins/v1r1/index.jsp?topic=%2Fcom.ibm.swg.im.infosphere.biginsights.doc%2Fdoc%2Fc0057749.html](http://publib.boulder.ibm.com/infocenter/bigins/v1r1/index.jsp?topic=%2Fcom.ibm.swg.im.infosphere.biginsights.doc%2Fdoc%2Fc0057749.html) Jaql 的顶级运算符的默认顺序是升序。但是当我运行它时，我看到默认顺序为降序。我正在使用 BigInsights 1.4 版。我想知道是否有人知道这是文档问题还是这种看似差异背后的其他原因-

```
jaql> nums = [2,1,3];

jaql> nums -> top 2;
[
  2,
  1
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T06:17:45.203

Top 不对输入数组强加任何排序。它转换为 slice(array, 0, n); 函数调用。它需要前 n 个元素，除非您运行它 MR 模式，而您在本示例中没有这样做。Top 只是转换为 slice()，它不查看值。如果要强加确定性顺序，则必须附加一个比较器。

在这种情况下，由于示例使用了 [2,1,3]，因此看起来好像是按降序排列的，但 Top 只返回了数组中的前两个值。您是否要求：

jaql> 数字 -> 前 3 名；

它会返回：[ 2, 1, 3 ]

# android - 如何在android中使用相机来捕捉图像和视频？

> ID：13394345
> 
> 赞同：7
> 
> 时间：2012-11-15T09:11:28.720
> 
> 标签：android, android-camera

如何在 android 中使用相机，以便用户可以在同一个相机应用程序中在相机模式和录像机模式之间切换，如下图右侧中央的小滑动控件。

![滑动控件以红色圈出。](../Images/7722cf17719feecf23c348e4b976cf79.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T09:25:55.660

库存相机应用程序是开源的。为什么不[看看](https://stackoverflow.com/questions/1105196/where-can-i-get-the-android-camera-application-source-code)它是如何实现的呢？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-24T06:54:43.457

在 UI 中使用拖车按钮一用于图像，其他用于视频....

```
/****  Camera / Video Demo ****************/
public class CameraDemoActivity extends Activity {
    // Activity request codes
    private static final int CAMERA_CAPTURE_IMAGE_REQUEST_CODE = 100;
    private static final int CAMERA_CAPTURE_VIDEO_REQUEST_CODE = 200;
    public static final int MEDIA_TYPE_IMAGE = 1;
    public static final int MEDIA_TYPE_VIDEO = 2;

    // directory name to store captured images and videos
    private static final String IMAGE_DIRECTORY_NAME = "Hello Camera";

    private Uri fileUri; // file url to store image/video

    private ImageView imgPreview;
    private VideoView videoPreview;
    private Button btnCapturePicture, btnRecordVideo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        imgPreview = (ImageView) findViewById(R.id.imgPreview);
        videoPreview = (VideoView) findViewById(R.id.videoPreview);
        btnCapturePicture = (Button) findViewById(R.id.btnCapturePicture);
        btnRecordVideo = (Button) findViewById(R.id.btnRecordVideo);

        /*
         * Capture image button click event
         */
        btnCapturePicture.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // capture picture
                captureImage();
            }
        });

        /*
         * Record video button click event
         */
        btnRecordVideo.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // record video
                recordVideo();
            }
        });

        // Checking camera availability
        if (!isDeviceSupportCamera()) {
            Toast.makeText(getApplicationContext(),
                    "Sorry! Your device doesn't support camera",
                    Toast.LENGTH_LONG).show();
            // will close the app if the device does't have camera
            finish();
        }
    }

    /**
     * Checking device has camera hardware or not
     * */
    private boolean isDeviceSupportCamera() {
        if (getApplicationContext().getPackageManager().hasSystemFeature(
                PackageManager.FEATURE_CAMERA)) {
            // this device has a camera
            return true;
        } else {
            // no camera on this device
            return false;
        }
    }

    /*
     * Capturing Camera Image will lauch camera app requrest image capture
     */
    private void captureImage() {
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);

        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

        // start the image capture Intent
        startActivityForResult(intent, CAMERA_CAPTURE_IMAGE_REQUEST_CODE);
    }

    /*
     * Here we store the file url as it will be 
     * null after returning from camera
     * app
     */
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        // save file url in bundle as it will be null on scren orientation
        // changes
        outState.putParcelable("file_uri", fileUri);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

        // get the file url
        fileUri = savedInstanceState.getParcelable("file_uri");
    }

    /*
     * Recording video
     */
    private void recordVideo() {
        Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);

        // set video quality
        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);

        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the 
                                                           // image file
                                                           // name

        // start the video capture Intent
        startActivityForResult(intent, CAMERA_CAPTURE_VIDEO_REQUEST_CODE);
    }

    /**
     * Receiving activity result method 
     * will be called after closing the camera
     * */
    @Override
    protected void onActivityResult(int requestCode, 
                                    int resultCode, Intent data) {

        // if the result is capturing Image
        if (requestCode == CAMERA_CAPTURE_IMAGE_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                // successfully captured the image
                // display it in image view
                previewCapturedImage();
            } else if (resultCode == RESULT_CANCELED) {
                // user cancelled Image capture
                Toast.makeText(getApplicationContext(),
                        "User cancelled image capture", Toast.LENGTH_SHORT)
                        .show();
            } else {
                // failed to capture image
                Toast.makeText(getApplicationContext(),
                        "Sorry! Failed to capture image", Toast.LENGTH_SHORT)
                        .show();
            }
        } else if (requestCode == CAMERA_CAPTURE_VIDEO_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                // video successfully recorded
                // preview the recorded video
                previewVideo();
            } else if (resultCode == RESULT_CANCELED) {
                // user cancelled recording
                Toast.makeText(getApplicationContext(),
                        "User cancelled video recording", Toast.LENGTH_SHORT)
                        .show();
            } else {
                // failed to record video
                Toast.makeText(getApplicationContext(),
                        "Sorry! Failed to record video", Toast.LENGTH_SHORT)
                        .show();
            }
        }
    }

    /*
     * Display image from a path to ImageView
     */
    private void previewCapturedImage() {
        try {
            // hide video preview
            videoPreview.setVisibility(View.GONE);

            imgPreview.setVisibility(View.VISIBLE);

            // bimatp factory
            BitmapFactory.Options options = new BitmapFactory.Options();

            // downsizing image as it throws OutOfMemory Exception for larger
            // images
            options.inSampleSize = 8;

            final Bitmap bitmap = BitmapFactory.decodeFile(fileUri.getPath(),
                    options);

            imgPreview.setImageBitmap(bitmap);
        } catch (NullPointerException e) {
            e.printStackTrace();
        }
    }

    /*
     * Previewing recorded video
     */
    private void previewVideo() {
        try {
            // hide image preview
            imgPreview.setVisibility(View.GONE);

            videoPreview.setVisibility(View.VISIBLE);
            videoPreview.setVideoPath(fileUri.getPath());
            // start playing
            videoPreview.pause();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * ------------ Helper Methods ---------------------- 
     * */

    /*
     * Creating file uri to store image/video
     */
    public Uri getOutputMediaFileUri(int type) {
        return Uri.fromFile(getOutputMediaFile(type));
    }

    /*
     * returning image / video
     */
    private static File getOutputMediaFile(int type) {

        // External sdcard
        // location.getExternalStoragePublicDirectory(
        // Environment.DIRECTORY_PICTURES),IMAGE_DIRECTORY_NAME);
        File mediaStorageDir = new File(
                Environment
                        .getExternalStorageDirectory(),
                IMAGE_DIRECTORY_NAME);

        // Create the storage directory if it does not exist
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d(IMAGE_DIRECTORY_NAME, "Oops! Failed create "
                        + IMAGE_DIRECTORY_NAME + " directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMddHHmmss",
                Locale.getDefault()).format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator
                    + "IMG_" + timeStamp + ".jpg");
        } else if (type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator
                    + "VID_" + timeStamp + ".mp4");
        } else {
            return null;
        }

        return mediaFile;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T20:04:20.623

添加切换按钮并在其中设置一些值。假设 0 或 1，然后捕获图像/录制视频按钮。当切换值为 0 时调用相机方法，当切换值为 1 时调用视频方法。

这是相机和视频录制的代码

[捕获图像](http://java2s.com/Code/Android/Hardware/Camera.htm)

[录视频](http://www.java2s.com/Open-Source/Android/App/android-in-practice/com/manning/aip/media/VideoRecorderActivity.java.htm)

在一个类中实现两个类的方法。然后为相机调用 onSnapClick，为视频调用 startRecording()。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-03T11:56:47.487

尝试像这样使用相机和视频的默认功能-

```
Intent intent1    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                    String fileName = "KeyICamImage"+System.currentTimeMillis()+".JPG";
                    String mPathImage = Environment.getExternalStorageDirectory()+ "/" + fileName;
                    file = new File(mPathImage);
                    mImageCaptureUri= Uri.fromFile( file );

                    try 
                    {

                        intent1.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,mImageCaptureUri);
                        startActivityForResult(intent1, PICK_FROM_CAMERA);
                    } 

                    catch (Exception e) 
                    {
                    e.printStackTrace();
                    }
                }
            }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T23:27:48.390

我不知道它是否有效，但试试这个

你应该有 `MediaRecorder recorder; Camera camera;`

尝试使用 `camera.setPreviewDisplay(holder);` 或`recorder.setPreviewDisplay(holder);`在您的`surfaceCreated(SurfaceHolder holder)`. 当您切换时，您应该重新创建surfaceView。股票相机应用程序重新创建整个活动。

# ubuntu-server - 我可以将 JBOSS SOA-P 安装到现有的 JBOSS EAP 5.1 中吗？

> ID：13394352
> 
> 赞同：2
> 
> 时间：2012-11-15T09:11:59.110
> 
> 标签：ubuntu-server, jboss-esb

在我的服务器 UBUNTU SERVER 12.04 LTS 上，我安装了**JBoss EAP 5.1**，一切正常。现在我需要安装 JBOSS ESB、JBPM 和 JBoss Web 服务。这 3 个包（可能除了 JBoss Web 服务）包含在**JBoss SOA-P 5.2**中。鉴于 JBoss SOA-P 还包含 JBoss EAP，我该如何进行？有没有办法安装缺少的单个软件包，或者我可以在 EAP 上安装 SOA-P？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T04:21:29.300

如果您有 SOA-P 5.2，那么我会安装并使用它。EAP 包含在 SOA-P 中，您需要的所有其他内容，即 Web 服务等都应该包含在 jboss 工具中（我从 nightlies 更新站点又名 jboss soa 工具中获取它们）。你的最终目标是什么？您是否有一个特定项目或一组特定于 EAP 的项目？

另请参阅：[JBoss Enterprise Application Platform vs JBoss Enterprise SOA Platform](https://stackoverflow.com/questions/4148735/jboss-enterprise-application-platform-vs-jboss-enterprise-soa-platform/4154256#4154256)

# ios - 用于 iPad 中横向方向的 ZBar

> ID：13394354
> 
> 赞同：2
> 
> 时间：2012-11-15T09:12:16.010
> 
> 标签：ios, uiinterfaceorientation, zbar-sdk

我曾在 iPhone 和 iPad 上使用过 Zbar，它可以正常工作，没有任何问题，但在 iPad 的横向模式下却不行。当我`ZBarReaderViewController`在 iPad 中以横向模式显示弹出框时，视图会发生 90 度偏移，如下图所示，

![横向 Zbar](../Images/e1536527c110356348a92e5930717d8b.png)

包放在桌子上的地方，图像是用 iPad 在横向模式下拍摄的。我希望包的图像不那么移动。

我已经尝试设置`supportedOrientationsMask`为

```
reader.supportedOrientationsMask = ZBarOrientationMask(UIInterfaceOrientationLandscapeLeft || UIInterfaceOrientationLandscapeRight); 
```

但它没有以正确的方向显示，而是偏移了 90 度。有人可以帮我解决这个问题吗？非常感谢任何及时的帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T06:34:20.530

我遇到了几乎相同的问题，我通过添加以下代码解决了它。我的应用仅支持横向：

```
UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
if (UIDeviceOrientationLandscapeLeft == orientation) {
    //Rotate 90
    reader.cameraViewTransform = CGAffineTransformMakeRotation (3*M_PI/2.0);
} else if (UIDeviceOrientationLandscapeRight == orientation) {
    //Rotate 270
    reader.cameraViewTransform = CGAffineTransformMakeRotation (M_PI/2.0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T20:25:54.920

这个解决方案的问题是它只修复了问题的视觉部分。用户看到正确的方向，但是 ZBarReader 仍然“看到”相同的图像，因为您正在转换预览图像。有效的是：

```
[self.readerView willRotateToInterfaceOrientation:[[UIApplication sharedApplication] statusBarOrientation] duration:0]; 
```

在`viewDidLoad`包含 ZBarReaderView 的 ViewController 的方法中。

# jquery - 将文本放入 div

> ID：13394357
> 
> 赞同：2
> 
> 时间：2012-11-15T09:12:23.867
> 
> 标签：jquery, html, css

如何在固定大小的 div 中放置大量文本？我想当达到这个 div 的文本最大宽度时，然后用点打破文本......

我试过这个，我没有看到我想要的结果

```
.description {
  max-width:590px;
  max-height:100px;
  float:left;
} 
```

![结果我现在得到的](../Images/b427f0bdfbe030abf8078fc486285583.png)

![在此处输入图像描述](../Images/90eacaa41ff779de752aad53b2dc8ef8.png)

我想要这张图片

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T09:14:21.723

给它一个固定宽度并使用`text-overflow`CSS 属性 width 一个值`ellipsis`

[演示](http://jsfiddle.net/MBdBk/)

```
text-overflow: ellipsis; 
```

注意：这将仅对单行有效

如果您希望这应该在多行上工作，那么您需要使用 jQuery

[**演示**](http://jsfiddle.net/rXY4R/)（[来源](https://stackoverflow.com/questions/3404508/cross-browsers-mult-lines-text-overflow-with-ellipsis-appended-within-a-widthhe)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:15:55.697

使用`text-overflow`属性

```
text-overflow:ellipsis; 
```

你应该保留。

```
overflow:hidden;
white-space:nowrap; 
```

这是使用溢出内容的参考。

[https://developer.mozilla.org/en-US/docs/CSS/text-overflow](https://developer.mozilla.org/en-US/docs/CSS/text-overflow)

[演示](http://jsfiddle.net/ThinkingStiff/Dc7UA/)

这是一个处理多行文本的 jquery 插件。一个似乎有效的方法是： http: [//pvdspek.github.com/jquery.autoellipsis/](http://pvdspek.github.com/jquery.autoellipsis/)

一个例子：http: [//jsfiddle.net/VpmbL/](http://jsfiddle.net/VpmbL/)

# python - 在不知道列表大小的情况下将列表的元素分配给变量？

> ID：13394358
> 
> 赞同：2
> 
> 时间：2012-11-15T09:12:25.003
> 
> 标签：python

新手来了
假设您想在事先不知道列表大小的情况下将列表的元素分配给变量，您是如何做到的，特别是在 Python 中？
例如。`list`有 5 个元素，程序创建 5 个变量（var1、var2、var3、var4、var5）并将元素分配给它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T09:18:27.003

也许你应该使用`dict`

```
>>> lst = [0, 1, 2, 3, 4]
>>> d = {}
>>> for i, item in enumerate(lst):
...     d['var' + str(i)] = item
... 
>>> d
{'var4': 4, 'var1': 1, 'var0': 0, 'var3': 3, 'var2': 2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:49:17.587

如果您要问的是有效的-我想要一个包含 0-n 个元素的列表，但我只会知道元素的值 5、20 和 67，其他一切都应该是默认值，那么您可以使用`dict`带有整数键的 a 作为稀疏列表。

```
d = {}
d[5] = 34.7
d[20] = 68.1
d[67] = 9.13 
```

然后，您可以用作：

```
d.get(5, 'default')
# 34.7
d.get(6, 'default')
# default 
```

如果您想将该字典具体化为一个列表，那么您可以使用 list-comp *：*

```
mylist = [d.get(i, 'default') for i in range(max(d))]
print len(mylist), mylist[:10]
# 67 ['default', 'default', 'default', 'default', 'default', 34.700000000000003, 'default', 'default', 'default', 'default'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:14:30.447

您可以只创建一个空列表并向其中添加任意数量的元素，而不必担心大小。

```
mylist = [] #empty list, list is not constrained to be any particular size

mylist.append(some_var) #add a variable to list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T23:02:19.667

我的答案是建立在 black_dragon 的答案之上的。我处理列表的方法是他的回答。

由于您想根据列表中的值创建变量，因此可以使用[globals() （](http://docs.python.org/2/library/functions.html#globals)用于获取全局符号表的内置函数）来更新全局字典。更新全局符号字典将创建或修改变量。

```
l = [10, 20, 30]

d = {}
for i,v in enumerate(l):
    d ['var'+str(i)] = v

globals().update(d)

print var0
print var1
print var2 
```

# c# - 如何在代码隐藏中更改 jQuery 日期选择器选项

> ID：13394362
> 
> 赞同：0
> 
> 时间：2012-11-15T09:12:36.003
> 
> 标签：c#, jquery, asp.net

我正在创建一个使用 jQuery 日期选择器小部件的用户控件，如下所示：

```
$(function () {
    $("#datePickerYearMonth").datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd-M-yy',
    });
}); 
```

但是，我不想对选项进行硬编码，而是想创建属性或类似的东西，以便我可以从后面的代码动态更改属性。

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T09:16:37.787

您可以使用内联代码，如下所示：

在后面的代码中：

```
 protected bool ChangeMonth
   {
          get{
                 return true;
          }
   } 
```

这在javascript中：

```
 $(function () {
        $("#datePickerYearMonth").datepicker({
            changeMonth: <%=ChangeMonth%>,
            changeYear: true,
            dateFormat: 'dd-M-yy',
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:16:19.217

如果您创建一个匿名对象，例如

```
var myAO = new { changeMonth = true, changeYear = true, dateFromat = "dd-M-yy" }; 
```

您可以将其转换为 JSON 字符串[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
var myJsonString = new JavaScriptSerializer().Serialize(myAO); 
```

然后你可以使用这个字符串来构建你的 JavasSript，例如你可以把它放在你的代码隐藏中的一个属性中，然后在你的 ASPX 中有一个脚本块：

```
<script type="text/javascript">
    $(function () {
        $("#datePickerYearMonth").datepicker(<%= MyJsonStringProperty %>);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:15:15.530

从后面的代码中渲染一些具有变量列表的 JavaScript 块，并在 datepicker 选项中使用相同的

在 asp.net 后面的代码中检查这个[Create javaScript 变量](https://stackoverflow.com/questions/4398338/create-javascript-variable-in-code-behind-of-asp-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:16:05.403

`$.fn.datepicker`是在服务器完成处理后在客户端运行的函数。您总是可以编写生成相应 JavaScript 的服务器代码。

例如，如果您想在 AJAX 调用中更改这些属性，则必须确保 AJAX 调用产生您需要的代码，以便重新执行该`datepicker`函数。

# android - 始终在 ActionBar 中显示完整标题

> ID：13394366
> 
> 赞同：8
> 
> 时间：2012-11-15T09:13:06.400
> 
> 标签：android, android-layout, android-actionbar

我有一个带有徽标、标题、三个选项卡和一个操作项的 ActionBar。

在纵向模式下，一切看起来都不错，因为选项卡已移动到堆叠的 ActionBar，如下所示： __ ***_* __ *_* __ *_* __ *_* __ *_* __** **# 我的标题 ¤
_* ***_* __ *_* __ *_* __ *_* __ *_* __ *_***
Tab 1 | 选项卡 2 | 表 3
__ ***_* __ *_* __ *_* __ *_* __ *_* __***

 *但在横向模式下，标题会被截断，因为选项卡被移动到顶部操作栏，如下所示： __ ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __**
选项卡 1 | 选项卡 2 | 选项卡 3 | ¤
__ ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __**

无论如何我可以告诉 ActionBar 标题永远不应该被截断？如果没有，我至少可以设置标题的宽度吗？（即使在横向模式下，如果选项卡移动到堆叠的 ActionBar 对我来说也可以）

编辑：

请求的代码。这里是：

```
public class MyActivity extends SherlockFragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar actionBar = super.getSupportActionBar();
    actionBar.setHomeButtonEnabled(true);
    actionBar.setDisplayHomeAsUpEnabled(true);
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    actionBar.setTitle("My Long Title");

    actionBar.addTab(actionBar
            .newTab()
            .setText("Tab 1")
            .setTabListener(
                    new TabListener<MyFragment>(this, "tab1",
                            MyFragment.class, null)));
    actionBar.addTab(actionBar
            .newTab()
            .setText("Tab 2")
            .setTabListener(
                    new TabListener<MyFragment>(this, "tab2",
                            MyFragment.class, null)));
    actionBar.addTab(actionBar
            .newTab()
            .setText("Tab 3")
            .setTabListener(
                    new TabListener<MyFragment>(this, "tab3",
                            MyFragment.class, null)));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:49:33.313

我想如果你想要固定的标题，那么在菜单文件夹下你会有一个 xml 文件，比如

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <group android:id="@+id/group" >
        <item
            android:id="@+id/menu1"
            android:orderInCategory="100"
            android:showAsAction="ifRoom"
            android:title="@string/menu1"/>

        <item 
            android:id="@+id/Search"
            android:actionViewClass="android.widget.SearchView"
            android:icon="@drawable/ic_action_search"
            android:orderInCategory="100"
            android:showAsAction="always"
            android:title="@string/menu3">
        </item>

        <item
           ..............
         </item>

    </group>

</menu> 
```

在上面的代码中，**android:showAsAction**起着至关重要的作用。如果您想要任何应该始终显示的项目，那么您应该使用 android:showAsAction="always"。这肯定会解决您的问题。

我没有使用过 SherlockFragmentActivity，但我认为这对你有很大帮助。

我建议您通过菜单文件夹的 xml 文件处理该问题，并在您的 java 文件中进行以下处理。代码如下：- 在您的 onCreate() 中尝试以下操作：-

```
setContentView(R.layout.activity_action_bar_eg);//this is the xml file name inside the menu folder
getActionBar().setHomeButtonEnabled(true);
getActionBar().setDisplayShowTitleEnabled(false);
ActionBar bar=getActionBar();
bar.show(); 
```

有了这个改变你的问题的解决方案

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_action_bar_eg, menu);
} 
```*

# javascript - crossdomain.xml 配置

> ID：13394368
> 
> 赞同：1
> 
> 时间：2012-11-15T09:13:13.320
> 
> 标签：javascript, ajax, cross-domain

我必须使用 ajax 从 javascript 调用 Web 服务：

```
$.ajax({
    type: "GET",
    url: "http://[REMOTE-SERVER-IP]:8080/api/service",
    contentType: "application/jsonp",   
    crossDomain: true,
    success: successFunc,
    error: errorFunc
}); 
```

我读到要授予对该方法的访问权限，必须在服务器 http://[REMOTE-SERVER-IP]:8080/crossdomain.xml 中创建一个“crossdomain.xml”：

```
<cross-domain-policy>
   <allow-access-from domain="[SERVICE-CALLER-IP]"/>
</cross-domain-policy> 
```

但是在这样做之后，当我尝试调用该方法时，我从 javascript 调试器中收到了这个错误：

```
XMLHttpRequest cannot load http://[REMOTE-SERVER-IP]:8080/[URL]. Origin http://localhost:8080 is not allowed by Access-Control-Allow-Origin 
```

我在做什么坏事？

非常感谢你！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:59:00.813

您可以在这里选择两个选项，并且都假定您可以访问服务器。

*   第一个选项是向`callback=?`请求 url 添加参数，并修改服务器响应。服务器应按以下格式将回调函数添加到响应中

    callback_function_coming_from_url([your_server_response])

*   第二个选项是将`Access-Control-Allow-Origin: *`标头添加到您的服务器响应中。或者您可以指定地址，例如`Access-Control-Allow-Origin: [your_client_address]`

我更喜欢选项 2，因为它是完成任务的便捷方式，而且您可以控制服务器响应，比选项 1 更安全。

您可以从[CORS获取更多信息](http://www.w3.org/TR/cors/)

# mysql - MySQL返回唯一ID的最新行

> ID：13394370
> 
> 赞同：1
> 
> 时间：2012-11-15T09:13:34.567
> 
> 标签：mysql

我想做一个查询，返回客户最近的销售订单。

我有一个以 ID 连接的客户和订单表，并且我进行了以下查询以返回所有值。谁能帮我修改它以仅返回每个 ID 的最新值？Orders.created_at 的格式如下 yyyy-MM-dd HH:mm:ss

```
SELECT Customers.ID, Customers.Name, Customers."Sales Responsible US", Customers."Sales     Responsible", Customers."Website", ISNULL(Orders.row_invoiced, '-1'), Orders.status, Orders.created_at
FROM "Customers"
LEFT JOIN Orders
On Customers.ID=Orders.customer_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:17:07.660

尝试将 MAX 放在创建的订单上。按客户 ID 分组。（错字）

PS：我是手机。没有代码片段格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:17:58.457

试试这个 ：：

```
 SELECT Customers.ID, 
Customers.Name, 
Customers."Sales Responsible US", 
Customers."Sales     Responsible", 
Customers."Website", 
IFNULL(Orders.row_invoiced, '-1'), 
Orders.status, MAX(Orders.created_at)
    FROM "Customers"
    LEFT JOIN Orders On Customers.ID=Orders.customer_id

    group by Orders.customer_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:18:46.183

我将加入您已经拥有的所有子查询，以获取`max(created_at)`每个客户 ( `group by customer_id`) 的最新 () 订单日期。

```
SELECT Customers.ID, 
    Customers.Name, 
    Customers."Sales Responsible US", 
    Customers."Sales     Responsible", 
    Customers."Website", 
    ISNULL(Orders.row_invoiced, '-1'), 
    Orders.status, 
    Orders.created_at
FROM "Customers"
LEFT JOIN Orders On Customers.ID=Orders.customer_id
left join (
    select customer_id, max(created_at) as created_at
    from Orders 
    group by customer_id
) as t on Orders.customer_id = t.customer_id and Orders.created_at = t.created_at 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:29:34.403

嗨希望这会满足你的要求

```
SELECT Customers.ID, Customers.Name, Customers."Sales Responsible US", Customers."Sales     Responsible", Customers."Website", ISNULL(Orders.row_invoiced, '-1'), Orders.status, MAX(Orders.created_at)
FROM "Customers"
LEFT JOIN Orders
On Customers.ID=Orders.customer_id 
GROUP BY Orders.customer_id 
```

# c++ - Gnuplot 持久化图形窗口

> ID：13394371
> 
> 赞同：2
> 
> 时间：2012-11-15T09:13:38.543
> 
> 标签：c++, visual-c++, graph, charts, gnuplot

我正在使用以下命令`sin(x)`在 gnuplot 上绘制一个简单的图，并使用来自 VS2010 C++ 的管道

```
set terminal windows
set title 'Graph of velocity versus time'
set xrange[0:10]
plot sin (x) 
```

问题是窗口关闭得太快了。我不想使用“暂停”命令，因为它会停止整个代码。

有没有其他方法可以在没有暂停命令的情况下保持此窗口打开？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:23:26.687

我不能尝试，但你试过了吗

1.  将终端设置为“设置终端 x11”
2.  使用“设置终端窗口 0”将终端设置为多个用户屏幕
3.  将输出设置为 png 或其他图像，然后使用管道打开图像查看器程序

问题是您通过管道设置的命令可能是通过 cmd.exe 执行的，一旦 gnuplot 返回 1 就退出（这完全是在成功绘制之后）。这样，窗口的实例也被破坏了。

# android - 来自应用程序的 Android 显示通知

> ID：13394377
> 
> 赞同：0
> 
> 时间：2012-11-15T09:14:00.890
> 
> 标签：android, notifications, alarms

我有需要在状态栏中显示通知的应用程序。我必须在我的应用程序中设置时间和日期，并且需要在状态栏中显示时间和日期通知作为某种提醒。

我已经尝试过本教程，但根本没有触发预定事件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:21:44.843

我建议您将[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)与 SQL 数据库结合使用来处理通知。您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)安排从数据库中获取的警报。您应该使用[广播](http://developer.android.com/reference/android/content/BroadcastReceiver.html)接收器在手机启动时添加警报，以处理用户重启手机或系统故障的情况。

这个[howto](http://smartandroidians.blogspot.dk/2010/04/alarmmanager-and-notification-in.html)解释了如何使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

# javascript - 在 ASP.NET MVC 中生成它自己的会话 ID#

> ID：13394380
> 
> 赞同：0
> 
> 时间：2012-11-15T09:14:04.540
> 
> 标签：javascript, asp.net-mvc-3, sessionid

我需要帮助，我正在 asp.net MVC3 中创建一个应用程序，我想设置生成的自定义会话 ID

```
var str = Math.floor(Math.random() * (2000 - 1000 + 1)) + 1000;

 document.write("Session ID::" + str); 
```

以上代码用java脚本函数编写，现在我想在ASP.NET MVC3的会话ID中设置该数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:33:49.963

一个快速的谷歌搜索显示了这个博客条目，它解释了如何在 asp.net 中覆盖会话 ID：

[http://weblogs.asp.net/anasghanem/archive/2008/12/16/programmatically-sharing-the-session-id.aspx](http://weblogs.asp.net/anasghanem/archive/2008/12/16/programmatically-changing-the-session-id.aspx)

简而言之：使用类[SessionIDManager](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.aspx)并调用方法[SaveSessionId](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionidmanager.savesessionid.aspx)来设置您自己的会话 id：

```
SessionIDManager manager = new SessionIDManager();
string mySessionId = ...calculateYourOwnSessionId...;
bool redirected = false;
bool IsAdded = false;
manager.SaveSessionID(Context, mySessionId, out redirected, out IsAdded); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T22:29:06.770

应该不惜一切代价避免这种情况，因为您的自定义会话值不是使用加密安全随机数生成器生成的，并且您将在您的应用程序中引入会话管理漏洞。

如果您需要获取当前会话标识符，可以通过以下两种方式之一进行：

```
// If in a page or user control:
string sessionId = this.Session.SessionID; 

// In ASP.NET in a normal class:
string sessionId = System.Web.HttpContext.Current.Session.SessionID; 
```

[在此处](https://msdn.microsoft.com/en-us/library/ms153034(v=vs.110).aspx)阅读更多相关信息。

# php - PHP 的 cURL 问题

> ID：13394383
> 
> 赞同：0
> 
> 时间：2012-11-15T09:14:11.120
> 
> 标签：php, curl

以前我一直在使用此代码从 BBC 网站通过 CURL 提取一些页面内容，

```
 $c = curl_init('http://news.bbc.co.uk/sport1/hi/football/eng_conf/conference_north_table/default.stm');

    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
    $html =  curl_exec ($c);
    if (curl_error($c))
        die(curl_error($c));

    $startpos = strpos($html, '<table border="1" cellpadding="1" cellspacing="0" class="fulltable">');

    $endpos = strpos($html, '<!-- E IINC -->');
    $length = $endpos - $startpos;
    $rest = substr($html, $startpos,$length);
    $rest = str_replace("border=\"1\" cellpadding=\"1\" cellspacing=\"0\"","border=\"0\" cellpadding=\"0\" cellspacing=\"0\"", $rest);
    $rest = str_replace('<tr><td colspan="15"><hr/></td></tr>',"", $rest);

    $rest = str_replace('<tr>
      <td colspan="15">
         <div style="padding: 10px 0 0 0;"><img src=" http://newsimg.bbc.co.uk/sol/shared/img/tbl_spc.gif" height="2px" width="100%"></div>
      </td>
   </tr>
',"", $rest);

    echo $rest;
    curl_close($c); 
```

**以前在旧**服务器上使用 php 5.1.3 可以正常工作，我们已经将站点迁移到运行 5.4.8 的服务器，但是上面的代码不再工作，有什么原因吗？我看不出有什么问题。

如果我杀死脚本，`$html`我会得到以下响应，

> 联赛表
> 
> 永久移动
> 
> 文档已移至此处。

但是，如果我通过浏览器导航到 URL，我可以很好地查看页面，所以它显然没有移动到任何地方（在我们迁移服务器之前，Curl 请求正在工作的事实支持了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:36:29.003

地址实际上已经移动了。将第一行更改为：

```
$c = curl_init('http://news.bbc.co.uk/sport2/hi/football/eng_conf/conference_north_table/default.stm'); 
```

上面的代码现在向我展示了带有结果的表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:39:03.677

你必须使用

```
curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1); 
```

跟随重定向。

有关选项的完整列表，请参阅[PHP：curl_setopt](http://www.php.net/manual/en/function.curl-setopt.php)。

# android - Theme.NoTitleBar.Fullscreen 和首选项按钮

> ID：13394391
> 
> 赞同：0
> 
> 时间：2012-11-15T09:14:42.440
> 
> 标签：android, fullscreen, android-4.0-ice-cream-sandwich, preferences

我正在开发一个平板电脑应用程序，它使用`Theme.NoTitleBar.Fullscreen`：我的平板电脑在 android 4.1.1 下，设置按钮应该在应用程序的右上角，但是使用这种样式，按钮（三个垂直对齐的小方块）不可见...我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:54:43.747

您可以使用上下文菜单来解决此问题...我遇到了同样的问题...如果您想使用旧版溢出按钮（三个点），请参阅此链接[http://android-developers.blogspot。在/2012/01/say-goodbye-to-menu-button.html](http://android-developers.blogspot.in/2012/01/say-goodbye-to-menu-button.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:18:49.483

您正在谈论的按钮是标题栏的一部分。因此，如果您要求隐藏该按钮，您的按钮当然无法再访问。

您必须在布局中提供一个按钮才能访问您的设置屏幕。或显示标题栏。

# matlab - 在 Matlab 中运行代码的不同部分

> ID：13394393
> 
> 赞同：0
> 
> 时间：2012-11-15T09:14:58.997
> 
> 标签：matlab

我不知道我该如何正确地问这个问题。希望你能明白我的意思。我在 Matlab 中有一个代码，我有不同的过程。例如，如果我使用某种类型的图像（例如，*.bmp），我*必须在 Matlab 中运行一些代码，如果我有另一种类型的图像*(*.jpg)，我想运行另一部分代码。

但是，我想做的是在代码的开头 Matlab 询问“什么样的图像？” （例如，使用命令“disp”），然后我会编写“bmp”或“jpg”并运行相关代码。我不喜欢使用循环，只是“写”这个词，它可以识别过程。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T09:21:14.687

使用函数式结构化编程：

```
function [some output args] = someFunction([some input args])

    answer = [ask question here]

    switch lower(answer)
        case 'bmp'
            [some (other) output args] = bmpfunction([some (other) input args]);
        case 'jpg'
            [some (other) output args] = jpgfunction([some (other) input args]);
        otherwise
            error('Unsupported image format.');
    end

end

function [some output args] = bmpfunction([some input args])
    ...
    [bmp operations]
    ...
end

function [some output args] = jpgfunction([some input args])
    ...
    [jpg operations]
    ...
end 
```

把这一切都放在一个文件中。然后您可以通过键入在 Matlab 中调用该函数

```
someFunction([some input args]) 
```

当然，`[some input args]`等等应该在任何地方用实际有用的实体替换:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:19:46.127

您可能想要使用以下内容：

```
prompt = "What type of image? "
strResponse = input(prompt, 's')

switch strResponse
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:39:47.050

一种优雅的方法是面向对象工作。然后您可以使用函数重载 - 并完全保存 switch 语句。

像这样：

```
classdef JpegImage    
    methods
        function myFunction(obj)
            ...
            jpegfunction
        end
    end
end

classdef BmpImage    
    methods
        function myFunction(obj)
            ...
            bmpfunction
        end
    end
end 
```

在您的代码中，您可以在`myFunction(x)`不检查 x 类型的情况下使用。

# php - Windows 上的 LDAP 身份验证

> ID：13394394
> 
> 赞同：4
> 
> 时间：2012-11-15T09:14:59.603
> 
> 标签：php, apache, authentication, ldap

我安装了 64 位 Windows 平台和 Postgresql 8.4（作为 Apache，EnterpriseDB-ApachePHP 安装在 Pstgres 上）。我需要使用 Active Directory（或 LDAP？）凭据对系统进行身份验证，但即使我启用了 LDAP 并重新启动 Apache**错误**日志我看到 PHP 致命错误：调用***path/to/my/phpfile*****中未定义的函数 ldap_connect()** *.. 我使用的 PHP 脚本如下，*

 *```
<?php

$user = $_POST["myUserName@mydomain.com"];
$pass = $_POST["muPassword"];
//in our system, we already use this account for LDAP authentication on the server above
$ldap_serv = 'ldap://192.168.69.10';
$ldap_port = '389';
$lc = ldap_connect($ldap_serv, $ldap_port);
ldap_set_option($lc, LDAP_OPT_REFERRALS, 0);
ldap_set_option($lc, LDAP_OPT_PROTOCOL_VERSION, 3);
$ldapbind = ldap_bind($lc,$user,$pass);
if ($ldapbind == false) {
  echo 'username or password is wrong';
}
else
{
echo "You Logged in";
echo "<br><br><br>Wellcome<br><br><br>";
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T09:58:07.720

使用 LDAP 函数需要 PHP LDAP 扩展。只需检查它在您的 php.ini ( `extension=php_ldap.dll`)中是否未注释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:19:58.560

PHP 扩展显然没有加载。有几件事可以尝试：

*   从命令行运行“php -m”并确保 ldap 在模块列表中，并且没有与 ldap 相关的错误。
*   确保 apache php 模块正在使用您修改的 php.ini（并在页面上查找 php.ini）*

# ios - 当用户滚动太快时如何停止服务器调用？

> ID：13394395
> 
> 赞同：3
> 
> 时间：2012-11-15T09:15:02.113
> 
> 标签：ios, asynchronous, uitableview, scroll

我正在开发一个 iPhone 应用程序，它从服务器检索照片并将它们呈现在屏幕上，类似于 Pulse News Reader 呈现其文章的方式。我有一个垂直滚动`UITableView`，每个都`UITableViewCell`包含自己的自定义`UITableView`实例，允许用户水平浏览照片。

我目前填充水平滚动表的`cellForRowAtIndexPath`方式是在垂直滚动表的方法中进行服务器调用。每当一个新单元格进入视图时，我都会发送对该特定单元格照片的请求，如下面的代码所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"EventCell";

    EventViewCell *cell = (EventViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[EventViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Event *event = [self.fetchedResultsController objectAtIndexPath:indexPath];

    [self performPhotoFetchForEventID:event.id inCell:cell withRetries:3];

    return cell;
} 
```

当用户缓慢滚动垂直表格时，此解决方案非常有效，但是如果用户快速滚动或“轻弹”列表，它就会开始崩溃。本质上，如果用户快速滚动浏览 X 事件，应用程序将触发 X 服务器请求并返回所有结果，即使应用程序的视图最多只需要其中三个请求的结果。这有时会导致图片显示在错误的行中，或者显示延迟。

**如果用户滚动得太快，我如何防止/取消我的服务器请求。或者有没有更好的方法来实现这个以获得预期的效果？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:34:56.937

> 这有时会导致图片显示在错误的行中

在解决问题的其他部分之前，您应该尝试了解为什么会发生这种情况。

根据我的经验，（当然取决于图像的大小），最好从服务器获取图像而不是取消它。虽然你应该记住一些事情：

*   拥有它后将其缓存，并确保在请求新缓存之前检查您的缓存。您可以使用 a`NSDictionary`和密钥作为图像的 URL。

*   异步调用。您不应该使用请求/缓存部分阻塞/强调您的 UI 线程。使用`NSOperations`和`NSOperationQueue`创建小型工作人员来处理请求和缓存。一旦你得到它，只需更新你的`UIImageView`.

*   在获取图像时留下占位符。这向用户显示正在发生的事情。

*   更新您的数据源而不是您的单元格。原因是，如果您看到行 [0,1,2,3,4,5] 并且您滚动，现在您看到行 [40,41,42,43,44,45]，当响应带有第一行的图像，单元格早已消失（可能是您在错误位置使用图像时遇到的问题）。

*   最后，因为你提到了 Pulse News，为什么不跟他们学一点呢？使用[此](http://eng.pulse.me/concurrent-downloads-using-nsoperationqueues/)链接访问他们的工程页面并了解有关下载图像的一些信息。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:27:41.723

如果您使用 NSUrlConnection 在延迟加载模式下检索图像，您可以将以下命令发送到连接：

```
[connection cancel]; 
```

[这里是苹果文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T09:27:36.823

无论如何，您不应该在每个 cellForRowAtIndexPath: 上创建照片请求。您应该使用异步图像缓存库，其中很少：我使用 JMImageCache。

# c# - Json.net 反序列化列表给出重复项

> ID：13394401
> 
> 赞同：23
> 
> 时间：2012-11-15T09:15:35.840
> 
> 标签：c#, json, json.net

我刚刚开始使用 Newtonsoft.Json (Json.net)。在我的第一个简单测试中，我在反序列化通用列表时遇到了问题。在下面的代码示例中，我序列化了一个对象，其中包含三种类型的简单整数列表（属性、成员 var 和数组）。

生成的 json 看起来不错（列表被转换为 json 数组）。但是，当我将 json 反序列化回相同类型的新对象时，所有列表项都会重复，期望数组。我已经通过第二次序列化它来说明这一点。

通过四处搜索，我了解到反序列化器也填充的列表可能有一个“私有”支持字段。

所以我的问题是：在以下情况下是否有（最好是简单的）避免重复项目的方法？

### 代码

```
using System;
using System.Collections.Generic;
using Newtonsoft.Json;

namespace JsonSerializeExample
{
    public class Program
    {
        static void Main()
        {
            var data = new SomeData();
            var json = JsonConvert.SerializeObject(data);
            Console.WriteLine("First : {0}", json);
            var data2 = JsonConvert.DeserializeObject<SomeData>(json);
            var json2 = JsonConvert.SerializeObject(data2);
            Console.WriteLine("Second: {0}", json2);
        }
    }

    public class SomeData
    {
        public string SimpleField;
        public int[] IntArray;
        public IList<int> IntListProperty { get; set; }
        public IList<int> IntListMember;

        public SomeData()
        {
            SimpleField = "Some data";
            IntArray = new[] { 7, 8, 9 };
            IntListProperty = new List<int> { 1, 2, 3 };
            IntListMember = new List<int> { 4, 5, 6 };
        }
    }
} 
```

### 结果输出

```
First : {"SimpleField":"Some data","IntArray":[7,8,9],"IntListMember":[4,5,6],"IntListProperty":[1,2,3]}
Second: {"SimpleField":"Some data","IntArray":[7,8,9],"IntListMember":[4,5,6,4,5,6],"IntListProperty":[1,2,3,1,2,3]} 
```

这里可能与[Json.Net 重复私有列表项](https://stackoverflow.com/questions/12615462/json-net-duplicates-private-list-items "Json.Net 复制私人列表项")有一些重叠。但是，我认为我的问题更简单，我仍然没有弄清楚。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-15T09:18:32.980

那是因为您在构造函数中添加项目。处理列表时反序列化器的一种常用方法基本上是：

*   通过 getter 读取列表
    *   如果列表为空：创建一个新列表并通过属性设置器分配，如果有
*   依次反序列化每个项目，并将 ( `Add`) 附加到列表中

这是因为大多数列表成员**没有设置器**，即

```
public List<Foo> Items {get {...}} // <=== no set 
```

与数组对比，数组必须有一个 setter 才能有用；因此该方法通常是：

*   依次反序列化每个项目，并将 ( `Add`) 附加到临时列表
*   将列表转换为数组 ( `ToArray`)，并通过 setter 分配

一些序列化程序为您提供控制此行为的选项（其他序列化程序没有）；并且一些序列化程序使您能够完全绕过构造函数（其他序列化程序则没有）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-11-13T21:47:26.137

我很确定这篇文章不再相关，但为了将来参考，这里有一个可行的解决方案。只需指定`ObjectCreationHandling`设置为`Replace`，即始终创建新对象而不是`Auto`（这是默认设置）即重用现有对象，在需要时创建新对象。

```
var data = new SomeData(); 
var json = JsonConvert.SerializeObject(data);
Console.WriteLine("First : {0}", json);
var data2 = JsonConvert.DeserializeObject<SomeData>(json, new JsonSerializerSettings() { ObjectCreationHandling = ObjectCreationHandling.Replace });
var json2 = JsonConvert.SerializeObject(data2);
Console.WriteLine("Second: {0}", json2); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-08T17:35:58.027

我遇到了类似的问题，但根本原因不同。我正在序列化和反序列化一个看起来像这样的类：

```
public class Appointment
{
    public List<AppointmentRevision> Revisions { get; set; }

    public AppointmentRevision CurrentRevision
    {
        get { return Revision.LastOrDefault(); }
    }

    public Appointment()
    {
        Revisions = new List<AppointmentRevision>();
    }
}

public class AppointmentRevision
{
    public List<Attendee> Attendees { get; set; }
} 
```

当我序列化这个时， CurrentRevision 也被序列化了。我不确定如何，但是当它反序列化时，它正确地保留了 AppointmentRevision 的单个实例，但在与会者列表中创建了重复项。解决方案是在 CurrentRevision 属性上使用 JsonIgnore 属性。

```
public class Appointment
{
    public List<AppointmentRevision> Revisions { get; set; }

    [JsonIgnore]   
    public AppointmentRevision CurrentRevision
    {
        get { return Revision.LastOrDefault(); }
    }

    public Appointment()
    {
        Revisions = new List<AppointmentRevision>();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-24T17:14:24.750

[反序列化 JSON 时如何将 ObjectCreationHandling.Replace 应用于选定的属性？](https://stackoverflow.com/questions/33744236/how-to-apply-objectcreationhandling-replace-to-selected-properties-when-deserial)

事实证明（我在 2019 年），您可以像在问题中所做的那样在构造函数中设置列表项。我在列表声明上方添加了 ObjectCreationHandling.Replace 属性，然后序列化应该用 JSON 替换列表中存储的任何内容。

# php - Wordpress 的插件开发：register_activation_hook() 不能与 register_deactivation_hook() 一起使用？

> ID：13394414
> 
> 赞同：0
> 
> 时间：2012-11-15T09:16:30.380
> 
> 标签：php, wordpress

WordPress 版本 3.4.2

这是最简单的插件形式，只有两个钩子：

```
register_activation_hook(__FILE__, sbv_activate());
register_deactivation_hook(__FILE__, sbv_deactivate());

function sbv_activate() {
  add_option('sbv_opt1', 'test');
}

function sbv_deactivate() {
  delete_option('sbv_opt1');
} 
```

激活此插件后，我去检查了选项表，似乎该选项不存在，如果我从停用功能中删除 delete_option() 行，它将起作用。如果我错了，请纠正我，好像 wordpress 正在调用 sbv_activate() 然后 sbv_deactivate()，因此撤消了我在激活中所做的事情，我认为它不应该像这样。我要疯了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:22:08.897

您应该只使用函数的名称而不是函数本身：

```
register_activation_hook(__FILE__, 'sbv_activate');
register_deactivation_hook(__FILE__, 'sbv_deactivate'); 
```

WP Codex 参考： [http ://codex.wordpress.org/Function_Reference/register_activation_hook](http://codex.wordpress.org/Function_Reference/register_activation_hook)

# jquery - 如何从位于不同域的 iframe 内容中触发 FancyBox 关闭？

> ID：13394419
> 
> 赞同：2
> 
> 时间：2012-11-15T09:16:39.567
> 
> 标签：jquery, iframe, fancybox, cross-domain

我在某个网站中有一个 webpart，它必须在fancybox iframe 中加载（一旦打开）一个登录页面（与网站位于不同的域），然后在第一次登录时它应该显示在该 iframe 中（fancybox）使用“是/否”选项授予访问权限的消息。所以我希望一旦我单击“是/否”的任何按钮来关闭fancybox iframe。我试图访问父页面，但由于域名问题，它当然不允许我访问。我想要的只是能够关闭fancybox弹出窗口（iframe）。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T13:06:56.757

我修复了它，并希望如果您遇到类似情况，该解决方案会对您有所帮助。我使用“postMessage”解决了它，这是解决方案：

1- 在我的 webpart 中：我放了以下 javascript：

```
window.addEventListener('message', function (event) {
        if (event.data == 'close') {                
            $.fancybox.close();
        }
    }, false); 
```

2-在我的网站上：

```
parent.postMessage("close", "*"); 
```

我希望它能澄清事情。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T04:12:34.593

如果您有权访问 iFrame 及其父级中的代码，则可以使用`window.postMessage(...)`

我相信 IE8+ 和任何其他当前浏览器都会支持这一点。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

# visual-studio-2010 - WPF Datagrid 在安装 VS 2012 后改变了它的行为

> ID：13394420
> 
> 赞同：3
> 
> 时间：2012-11-15T09:16:40.423
> 
> 标签：visual-studio-2010, reference, visual-studio-2012, wpfdatagrid, migrate

到目前为止，我们有一个 WPF 项目一直在 VS2010 中编译。我们安装了 VS2012 并在其中打开了我们的项目，然后我们检测到以下问题：

我们有一些将 AutogenerateColumn 属性设置为 true 的数据网格。当我们向这个数据网格添加新列时，只显示这些新列（它必须是错误的行为）。安装 VS2012 后，新列和自动生成的列都会显示（如预期的那样）。从那时起，它也发生在 VS2010 中编译我们的项目，就像在 VS2012 中一样。我们确信我们所有直接引用的程序集仍在 .NET Framework 的 4.0 版本中，而不是在 4.5 版本中，并且我们完全没有更改任何代码。

我们并不担心 WPF DataGrids 中的这个特殊问题，因为它很容易通过将 AutogenerateColumns 设置为 false 来修复。我们担心在 VS2012 安装过程中会更改哪些间接引用，以及它会对我们的应用程序产生什么其他影响。

我们知道，从理论上讲，预计不会产生影响，但我们已经看到了这个问题，我们的信念现在正在摇摇欲坠。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:57:18.940

我刚刚以两种不同的方式测试了您所说的内容，并且在这两种方式中，应用程序都使用 VS2010 IDE 并针对 .NET Framework 4.0 客户端配置文件在同一台机器上**编译**（安装了 VS2012 和 VS2010）。

在第一个场景中，我在安装了 VS2012 的机器上**执行**了这个应用程序（它被编译的那个），结果如下：

![在此处输入图像描述](../Images/6ad395bfaf791f72212ba73c663a317d.png)

正如您在此图像中看到的，有两个明确添加的列（“CANTIDAD PENDIENTE”和“FECHA”）和两个自动生成的列（“P1”和“P2”基于我用作 ItemsSource 的匿名对象的实际属性）。这就是您在问题中解释的内容。

第二种情况有点不同。我在另一台安装了 VS2012（既没有 .NET 4.5 Framework）的机器上执行了**相同的编译应用程序，得到的结果令人担忧：**

![在此处输入图像描述](../Images/4ab2d4522fc76a4df61d10765fddb6a7.png)

我认为你应该测试你的整个应用程序，以确保你没有交付错误的应用程序，具体取决于客户环境中安装的框架，但显然这可能是一个真正令人头疼的问题。

我真的希望这有助于澄清您的问题。

# objective-c - 贝塞尔路径看看它是否交叉

> ID：13394422
> 
> 赞同：2
> 
> 时间：2012-11-15T09:16:45.120
> 
> 标签：objective-c, ios, polygon, uibezierpath

我有一个代码可以让用户绘制一个形状，我为此使用 UIBezierPath。但我需要看看形状是否交叉，例如像这样： http: [//upload.wikimedia.org/wikipedia/commons/0/0f/Complex_polygon.svg](http://upload.wikimedia.org/wikipedia/commons/0/0f/Complex_polygon.svg) 那么它不是一个有效的形状。我怎样才能找到这个？

编辑：我还没有解决这个问题。我将路径中行之间的所有点保存在一个数组中。然后我遍历数组并尝试查找是否有任何线相交。但它不起作用，有时它说有一个交叉点，而不是。

我认为问题出在这种方法的某个地方。

```
-(BOOL)pathIntersects:(double *)x:(double *)y {
int count = pathPoints.count;
CGPoint p1, p2, p3, p4;
for (int a=0; a<count; a++) {

    //Line 1
    if (a+1<count) {
        p1 = [[pathPoints objectAtIndex:a] CGPointValue];
        p2 = [[pathPoints objectAtIndex:a+1] CGPointValue];
    }else{
        return NO;
    }

    for (int b=0; b<count; b++) {

        //Line 2
        if (b+1<count) {
            p3 = [[pathPoints objectAtIndex:b] CGPointValue];
            p4 = [[pathPoints objectAtIndex:b+1] CGPointValue];
        }else{
            return NO;
        }

        if (!CGPointEqualToPoint(p1, p3) && !CGPointEqualToPoint(p2, p3) && !CGPointEqualToPoint(p4, p1) && !CGPointEqualToPoint(p4, p2)
            && !CGPointEqualToPoint(p1, p2) && !CGPointEqualToPoint(p3, p4)) {

            if (LineIntersect(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y, p4.x, p4.y, x, y)) { 
                return YES;
            }

        }

    }
}
return NO;
} 
```

这是我发现的用于查看两条线是否相交的代码，它在 C 中，但我应该工作。

```
int LineIntersect(
              double x1, double y1,
              double x2, double y2,
              double x3, double y3,
              double x4, double y4,
              double *x, double *y)
{
double mua,mub;
double denom,numera,numerb;

denom  = (y4-y3) * (x2-x1) - (x4-x3) * (y2-y1);
numera = (x4-x3) * (y1-y3) - (y4-y3) * (x1-x3);
numerb = (x2-x1) * (y1-y3) - (y2-y1) * (x1-x3);

/* Are the line coincident? */
if (ABS(numera) < 0.00001 && ABS(numerb) < 0.00001 && ABS(denom) < 0.00001) {
    *x = (x1 + x2) / 2;
    *y = (y1 + y2) / 2;
    return(TRUE);
}

/* Are the line parallel */
if (ABS(denom) < 0.00001) {
    *x = 0;
    *y = 0;
    return(FALSE);
}

/* Is the intersection along the the segments */
mua = numera / denom;
mub = numerb / denom;
if (mua < 0 || mua > 1 || mub < 0 || mub > 1) {
    *x = 0;
    *y = 0;
    return(FALSE);
}
*x = x1 + mua * (x2 - x1);
*y = y1 + mua * (y2 - y1);
return(TRUE);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:51:41.277

这取决于用户绘制的多边形有多复杂以及路径中的点数。理想情况下，形状中的所有顶点都会有一个点，仅此而已。从 UIBezierPath 获取 CGPath 并使用 GCPathApply 将元素传递给函数，该函数将每个点添加到数组中。使用两个 for 循环遍历数组，一个嵌套在另一个循环中，它使用标准的线-线相交测试检查每个线段与之后的每个线段。一旦找到交叉点，就从循环中中断。或者，如果这是一种方便的方法，则返回一个 BOOL。这是最简单的方法。

编辑：这是一个线-线相交函数的示例，它返回一个 BOOL，告诉您两个线段是否交叉。传入创建第一段的两个点，然后传入创建第二段的两个点。它是我从网上快速找到的一段源代码匆忙修改的，但它确实有效。

```
CGPoint lineSegmentsIntersect(CGPoint L1P1, CGPoint L1P2, CGPoint L2P1, CGPoint L2P2) 
{ 
    float x1 = L1P1.x, x2 = L1P2.x, x3 = L2P1.x, x4 = L2P2.x;
    float y1 = L1P1.y, y2 = L1P2.y, y3 = L2P1.y, y4 = L2P2.y;

    float bx = x2 - x1; 
    float by = y2 - y1; 
    float dx = x4 - x3; 
    float dy = y4 - y3;

    float b_dot_d_perp = bx * dy - by * dx;

    if(b_dot_d_perp == 0) {
        return NO;
    }

    float cx = x3 - x1;
    float cy = y3 - y1;
    float t = (cx * dy - cy * dx) / b_dot_d_perp;

    if(t < 0 || t > 1) {
        return NO;
    }

    float u = (cx * by - cy * bx) / b_dot_d_perp;

    if(u < 0 || u > 1) { 
        return NO;
    }

    return YES;
} 
```

你可以像这样使用它。

```
if (lineSegmentsIntersect(lineOnePointOne,lineOnePointTwo,lineTwoPointOne,lineTwoPointTwo)){
     //segments intersect
} else {
     //segments did not intersect
} 
```

创建双循环以相互检查正确的段由您决定。

# nsis - 如何在 NSIS 脚本中使用 REMOVE 或 REPAIR 功能？

> ID：13394423
> 
> 赞同：1
> 
> 时间：2012-11-15T09:16:49.787
> 
> 标签：nsis

我已经使用 nsis 脚本来创建安装程序。当我以相同的名称第二次运行我的安装程序时，应该检查 REPAIR 和 REMOVE 并执行相应的操作。我发现我的应用程序已经安装或未使用以下代码，

```
Function checkinstall
   ReadRegStr $R0 HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\My app" "UninstallString" 
   IfFileExists $R0 +1 NotInstalled
   call nsDialogpage
   NotInstalled:
FunctionEnd

Function nsDialogpage
   nsDialogs::Create 1018
    Pop $Dialog
    ${If} $Dialog == error
        Abort
    ${EndIf}
    ${NSD_CreateRadioButton} 0 5u 100% 10u "Repair"
        Pop $hwnd
        ${NSD_AddStyle} $hwnd ${WS_GROUP}
        ${NSD_OnClick} $hwnd ???
    ${NSD_CreateRadioButton} 0 25u 100% 56u "Remove"
        Pop $hwnd
        ${NSD_OnClick} $hwnd ???
    nsDialogs::Show 
```

如果用户选择修复按钮，它应该覆盖现有的安装路径，否则卸载现有的安装并继续使用新的。我需要做什么来替换上述代码的（？？？）

```
page custom checkinstall
!insertmacro MUI_PAGE_DIRECTORY 
```

我的下一页是目录选择。所以我需要调用此页面吗？如何做到这一点？

1.如果用户选择删除按钮，我如何调用uninstaller函数？

```
 Function un.Init, section /o -un.Main UNSEC000,section -un.post UNSE001 
```

这些是联合国安装程序的功能。我如何调用这些功能？我尝试过调用方法，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:53:44.167

您需要指定一个回调函数，就像在[nsDialogs 文档](http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html)`nsDialogsPageLeave`中一样，在此示例中查找该函数：

```
!include nsDialogs.nsh
!include LogicLib.nsh

Name nsDialogs
OutFile nsDialogs.exe

XPStyle on

Var Dialog
Var Label
Var Text

Page custom nsDialogsPage nsDialogsPageLeave
Page instfiles

Function nsDialogsPage

    nsDialogs::Create 1018
    Pop $Dialog

    ${If} $Dialog == error
        Abort
    ${EndIf}

    ${NSD_CreateLabel} 0 0 100% 12u "Hello, welcome to nsDialogs!"
    Pop $Label

    ${NSD_CreateText} 0 13u 100% -13u "Type something here..."
    Pop $Text
    ${NSD_OnChange} $Text nsDialogsPageTextChange

    nsDialogs::Show

FunctionEnd

Function nsDialogsPageLeave

    ${NSD_GetText} $Text $0
    MessageBox MB_OK "You typed:$\n$\n$0"

FunctionEnd

Function nsDialogsPageTextChange
    Pop $1 # $1 == $ Text
    ${NSD_GetText} $Text $0
    ${If} $0 == "hello"
        MessageBox MB_OK "right back at ya!"
    ${EndIf}
FunctionEnd

Section
    DetailPrint "hello world"
SectionEnd 
```

# javascript - 是否可以使用 Angular 场景编写单元测试？

> ID：13394428
> 
> 赞同：2
> 
> 时间：2012-11-15T09:17:00.367
> 
> 标签：javascript, testing

我正在用 Jasmine 在 javascript 上编写单元测试。但是有没有办法用 Angular 场景编写它们？我知道我们可以使用 Angular 场景编写 e2e 测试。单元测试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T13:52:24.647

有。

从来没有在javascript中完全这样做过，但是在coffeescript（~javascript）中有一个unit和e2e的例子，也许你有兴趣

[https://github.com/PavelVanecek/angular-coffee-seed/tree/master/test](https://github.com/PavelVanecek/angular-coffee-seed/tree/master/test)

# cakephp - 如何从一个类别中获取书籍，不包括其他类别（通过交叉表）

> ID：13394429
> 
> 赞同：1
> 
> 时间：2012-11-15T09:17:05.227
> 
> 标签：cakephp, cakephp-2.1

现在我正在使用以下代码来获取特定类别的书籍：

```
$options['conditions']['Category.id'] = $category_id;
$options['joins'] = array(
    array(
        'table' => 'books_categories',
        'alias' => 'BookCategory',
        'type' => 'inner',
        'conditions' => array('Book.id = BookCategory.id_book'),
    ),
    array(
        'table' => 'categories',
        'alias' => 'Category',
        'type' => 'inner',
        'conditions' => array('BookCategory.kat = Category.id'),
    ),
);

$this->Book->find('all',$options); 
```

这只是从给定的 category_id 中找到所有书籍。

所以有 3 个表`categories`：`books`和`books_categories`。books_categories 有两个文件：`book_id`所以`category_id`基本上它只是 HABTM 关系。问题是一本书可能属于许多类别，例如，我想找到第 5 类的所有书，但不包括第 5,6 和 7 类的书。我该怎么做？

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - ------------------------------

好的，所以我想出了它在纯 SQL 中的外观 - 条件应该是这样的：

```
where
  category_id = <given category>
  and books.book_id not in
(
 select book_id from book_categories
  where category_id in (<given set of cat>)
)
order by books.inserted 
```

这将获得一个类别的所有书籍，但不包括一组其他类别的书籍。现在我想强制 Cake 生成类似的 SQL 查询。到目前为止我尝试过：

```
$options['conditions']['Category.id'] = $category_id;       
$options['conditions']['AND'][] = 'Book.id NOT IN (SELECT id_book FROM book_categories WHERE kat IN (133,134))';

$options['order'] = array('Book.inserted' => 'desc');
$options['joins'] = array(
            array(
                'table' => 'book_categories',
                'alias' => 'BookCategory',
                'type' => 'inner',
                'conditions' => array('Book.id = BookCategory.id_book'),
            ),
            array(
                'table' => 'categories',
                'alias' => 'Category',
                'type' => 'inner',
                'conditions' => array('BookCategory.kat = Category.id'),
            ),
        ); 
```

这会生成这个查询（很抱歉 - 表名有点不同）：

```
SELECT `Book`.`id`, `Book`.`OK`, `Book`.`price`, `Book`.`link`, `Book`.`title`, 
`Book`.`author`, `Book`.`img`, `Book`.`inserted`, `Book`.`checked`, `Book`.`big_img`, `Book`.`lang`, `Book`.`asin`, `Book`.`description`, `Book`.`last_update`, `Book`.`review`, `Book`.`changed` 
FROM `amazon`.`linki` AS `Book` 
inner JOIN `amazon`.`cross_kategorie_full` AS `BookCategory` ON (`Book`.`id` = `BookCategory`.`id_book`) 
inner JOIN `amazon`.`kategorie` AS `Category` ON (`BookCategory`.`kat` = `Category`.`id`) 
WHERE `Category`.`id` = 4 
AND `Book`.`OK` = 'OK' 
AND ((`Book`.`big_img` NOT LIKE '%no-image%') 
AND (`Book`.`id` NOT IN (SELECT id_book FROM cross_kategorie_full WHERE kat IN (133,134)))) 
ORDER BY `Book`.`inserted` desc LIMIT 20 
```

但是有错误：超过 30 秒的最大执行时间 - 所以这个 sql 语句中有一些没有结束（循环？）的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:27:23.437

*相对于更新的问题进行更新*
为了使 sql 产生正确的结果（在可接受的时间内），您需要`Categories`再次加入，并为其提供另一个别名。由于这会导致另一个问题，我建议您将其贴上`mysql`和标记`query-optimization`。
*结束更新*

事实上，**HABTM 关系有点曲折**（因为它真的不是 HABTM）。如果您在每个图书类别匹配中只有一行，`books_categories`则您无法知道某本书属于哪些其他类别，因此您无法真正分辨出您真正想要哪些（即不属于其他类别） . CakePHP 的数据层和模型在幕后为您解决了这个问题 :)

我看到的唯一解决方案是用于[`Set::extract`](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3aextract)进一步查询您获得的结果并过滤掉属于您不想包含的类别的书籍。（就像是：

```
// returns all books not belonging to categories 3,4
$new_result = Set::extract('/Books/Category[id!=3][!=4]', $results); 
```

附带说明一下，我发现它在这种情况下非常有用，可以查询数据库并可视化 SQL 查询的复杂性，从而获得所需的结果。此外，您应该激活 CakePHP 调试工具栏以查看发送到数据库的 SQL 查询，以便您更好地了解幕后发生的事情。

[CakePHP 书在“关联：将模型链接在一起”](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3aextract)部分（重点是我的）的末尾提出了以下建议。

> 使用连接允许您在 CakePHP 如何处理关联和获取数据方面拥有最大的灵活性，但是*在大多数情况下，您可以使用其他工具来实现相同的结果*，例如正确定义关联、动态绑定模型和使用可包含行为。*应谨慎使用此功能，*因为在少数情况下，如果与之前描述的用于关联模型的任何技术结合使用，它可能会导致格式错误的 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:55:20.993

我认为那里有一个错字。您想获取第 5 类的所有书籍，而不是第 5、6 和 7 类的所有书籍？

没关系。Cake convensions 指出，HABTM 表中应该始终有一个主键，因此您可以添加一个“id”列。有了这个，接下来的步骤就容易多了，或者我应该说：“他们正在成为可能”。

接下来要做的是，创建一个名为“BooksCategory”的关联模型。使用此处解释的“with”索引将您的 Book 和 Category 模型在该新模型上相互链接。不要忘记使用插件语法（PluginName.ModelName），以防链接模型属于插件。您现在在链接模型中为您要链接的每个模型放置两个 belongsTo 关联。这样可以确保在查找时获取这些内容。

接下来你要做的是：

```
$this->Book->BooksCategory->find(
    'all',
    array(
        'conditions' => array(
            'BooksCategory.category_id' => 5
        )
    )
); 
```

完成 ;) 不，你只得到第 5 类的书。

问候 func0der

# c# - 右键单击后禁用的上下文菜单不会消失

> ID：13394434
> 
> 赞同：1
> 
> 时间：2012-11-15T09:17:42.667
> 
> 标签：c#, wpf, contextmenu, tabcontrol

我有一个`ContextMenu`作为的一部分，`TabControl`例如：

```
<TabControl Name="MyTabControl">
    <TabControl.ContextMenu>
        <ContextMenu Name="MyContextMenu" IsEnabled="False" StaysOpen="True">
            <MenuItem Header="Item1"></MenuItem>
            ...
        </ContextMenu>
    </TabControl.ContextMenu>
</TabControl> 
```

如您所见，菜单已禁用。稍后将在程序中启用它，但是现在，它应该保持在禁用状态。问题是，当我右键单击`TabControl`并显示禁用的菜单时，它只是停留在第一次打开的位置，没有其他右键单击会移动它，也不会左键单击某处使其消失。

摆脱它的唯一方法是启用它然后右键/左键单击，或者使用`MyContextMenu.Visibility = Visibility.Collapsed/Hidden;`

我尝试将`StaysOpen`-property 设置为`False`. 然后菜单将在其禁用状态下打开一次。左键单击后消失，然后即使启用也不会再次出现。

解决它的唯一方法可能是更改`StaysOpen`-property 以及`IsEnabled`-property，但有点奇怪的是，菜单在禁用状态下仅打开一次，然后不再打开。

我希望任何人都可以向我解释，为什么禁用的菜单不会关闭，而`StaysOpen`false 的属性使它只打开一次，因为这对我来说似乎是一种奇怪的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:55:23.373

上下文菜单项的行为似乎很奇怪 - 你所描述的是.Net 4.0，如果你将你的应用程序定位到 .Net 3.5 例如你会注意到相反的行为 - 你不能让菜单停留如果单个项目被禁用，则打开，它在右键单击后立即消失。

但是，我认为管理上下文菜单项的启用状态（以及它应该执行的 OnClick 操作）的首选方法是通过`Command`.

首先，您应该为您的视图指定一个数据上下文，假设它是 class `ViewModel.cs`。然后通过实现接口创建一个命令`ICommand`，如下所示：

```
public class MyCommand : ICommand 
```

然后你有一个`CanExecute`方法可以完全按照它的名字说 - 决定命令是否可以执行。并且菜单项的启用状态也取决于该方法的返回值。`false`因此，只要您需要，您就可以让它返回，并且菜单将正常运行并且菜单项将被禁用。然后，当您需要时，您可以使其返回`true`（通过方法本身的某些逻辑），您将再次拥有一个正常工作的上下文菜单，其中启用了菜单项。

如果要禁用整个菜单，请使用相同的方法，但用于菜单。

如果您需要禁用菜单中的所有项目（我认为这与整个菜单不同），那么您可以使用以下内容：

```
<TabControl Name="MyTabControl" Background="Green">
            <TabControl.ContextMenu>
                <ContextMenu Name="MyContextMenu"  StaysOpen="True" ItemsSource="{Binding  Items}">
                    <ContextMenu.ItemTemplate>
                        <DataTemplate >
                            <MenuItem Header="{Binding Header}"  IsEnabled="False" />
                        </DataTemplate>
                    </ContextMenu.ItemTemplate>
                </ContextMenu>
            </TabControl.ContextMenu>
        </TabControl> 
```

例如，您的`ItemsSource`( )将是您的每个菜单项的模型（在 MVVM 中思考），它应该具有包含您希望在每个菜单项中看到的标题的属性。您可以将其绑定到一个属性，以便控制它何时必须为真和假，而不是像我的虚拟示例中那样设置为。`Items``List<MenuItem>``MenuItem``Header``IsEnabled``false`

# php - Magento：所有页面永远加载

> ID：13394436
> 
> 赞同：2
> 
> 时间：2012-11-15T09:17:50.257
> 
> 标签：php, magento

问题是当我在浏览器中打开任何 Magento 页面（包括 /admin）时，它无法正确加载并一直加载。没有文件更改 - 昨天它正在工作，今天它停止工作。

谁能推荐如何调试它？这可能是什么原因？

日志中没有任何错误，php 工作正常，我们尝试重新启动服务器。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:10:07.973

除非您的服务器资源不足，否则不会有任何错误，或者您可能有一些来自外部服务器的内容，这些内容现在可能已经关闭。第一次快速调试 - 在 chrome 中打开页面并检查元素，您将看到页面变慢的原因。或者您可以检查顶部，没有 IO 问题，足够的 RAM，没有进程运行 >100% CPU？重新启动服务器永远不会解决您的问题。检查您是否启用了缓存。这里没有太多信息可以告诉你到底发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-28T14:56:47.863

我最近也遇到了这个问题。我的 Magneto 2 站点（在 Ubuntu 16.04 上）一天运行良好，然后会持续加载下一个。清理缓存和删除/重建静态文件使其工作短暂，但它会回到不加载页面的几次点击......甚至是管理员。

我的修复恰好是磁盘已满。直到我进入命令行并更新作曲家，这一直给我一个磁盘已满错误，我才意识到这一点。

我切换到 Ubuntu 上的桌面并运行了一个磁盘分析器，它准确地指出了我所有空间的使用位置。

```
gksudo baobab 
```

我没有安装 gksu，所以我必须先输入：

```
sudo apt install gksu 
```

原来我有没有被删除的备份。我不再需要的大型 tar 文件。

我希望这有帮助！

*编辑以包括我正在使用的操作系统。*

# jquery - 提高大型选择列表的性能

> ID：13394439
> 
> 赞同：1
> 
> 时间：2012-11-15T09:18:14.790
> 
> 标签：jquery, asp.net, performance, internet-explorer

在我的 asp.net (c#) web-forms 应用程序中，我必须使用非常大的 jquery-dropdown 列表（在表格内）。为此，我正在使用 jquery 插件“select2”，其中包含一个搜索字段，因此我可以搜索特定条目...

在我的 ddl 的后端，我有一个 sqldatasource，它返回 >1000 个条目。在 Firefox 中，此标签的呈现需要 2 秒，但在 IE 中需要 6 秒。

我已经在我的数据源上使用缓存，但这并没有太大帮助，因为我认为瓶颈是我的情况下的渲染。

您对如何提高性能有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:19:59.837

如果不确切地知道您在做什么以及您正在使用什么工具，就很难说清楚。但是你可以：

*   按需加载，当有人在您的列表中向下滚动添加额外项目时。
*   让你的列表更短。
*   使用具有更好性能的不同表格控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:42:55.807

看看您是否可以将下拉列表更改为自动完成框，并尝试根据用户的击键加载结果。

如果您已经在使用缓存，请尝试以 JSON 字符串的形式缓存它并使用它发送到客户端并在客户端使用自动完成功能。

# android - ndk-build 与 sqlite 库错误

> ID：13394441
> 
> 赞同：0
> 
> 时间：2012-11-15T09:18:19.453
> 
> 标签：android, sqlite, android-ndk

我正在创建一个具有本机 C 代码和 sqlite 数据库的 android 应用程序。当我从我的 jni 文件夹执行 ndk-build 时，我收到以下错误。

```
undefined reference to `sqlite3_open'
peard.c:(.text+0x588): undefined reference to `sqlite3_exec'
peard.c:(.text+0x5f8): undefined reference to `sqlite3_exec'
peard.c:(.text+0x668): undefined reference to `sqlite3_exec'
peard.c:(.text+0x6d8): undefined reference to `sqlite3_prepare_v2'
peard.c:(.text+0x720): undefined reference to `sqlite3_column_count'
peard.c:(.text+0x734): undefined reference to `sqlite3_step'
peard.c:(.text+0x774): undefined reference to `sqlite3_column_text'
peard.c:(.text+0x78c): undefined reference to `sqlite3_column_name'
peard.c:(.text+0x800): undefined reference to `sqlite3_close' 
```

我也尝试与 -lsqlite3 命令一起运行，但不起作用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:26:22.600

我通过将 sqlite3.c 源文件添加到我的 Android.mk 文件中的依赖文件列表中解决了这个问题。特别感谢 hirschhomsalz。

纳兰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:28:07.410

您需要**为 android**`sqlite3`构建或安装（以及您项目所依赖的所有其他非标准库） ，并使用指向您的 sqlite 库和标头的 arm 版本的参数构建您的项目。**`-L``-I`**

# php - 跟踪代理 Hotmail 后面的 IP 地址

> ID：13394442
> 
> 赞同：0
> 
> 时间：2012-11-15T09:18:23.237
> 
> 标签：php, proxy, hotmail

我正在尝试使用图像来触发 PHP 脚本来记录电子邮件收件人的 IP 地址。

我提到了[这个](https://stackoverflow.com/questions/5349604/how-to-track-the-real-ip-address-behind-the-proxy) ，但没有检测到代理。

Hotmail 如何克服这一挑战？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:38:32.383

如果您试图获取电子邮件阅读器的 IP 地址，这应该不起作用。据我了解，Hotmail 服务器会在后端获取图像，然后在安全的情况下将其呈现给用户。用户绝不应该加载远程图像。

记下电子邮件中图像的 URI，例如：

```
https://blu002.mail.live.com/Handlers/ImageProxy.mvc?bicild=&canary=QS3sf5XTfvb0EhoYPqKqj%sdgsdgg%2bk7%2fUeHzTVkYo31k%3d0&url=http%3a%2f%2fo2.mypubliceye.com%2fextranet%2fclient%2f35%2fimages%2fo2-masthead.jpg 
```

如果电子邮件阅读器正在使用 Hotmail 客户端，例如来自电话或 Thunderbird，那么这可能是一个选项。但可能由于明显的原因而被不赞成。

# asp.net - 在 iis 7 中设置网站路径

> ID：13394445
> 
> 赞同：0
> 
> 时间：2012-11-15T09:18:27.753
> 
> 标签：asp.net, .net, web-services, iis

我在 IIS 上创建了一些站点，它的路径是`http://localhost:13080/Broker.asmx` 但我希望它位于`http://localhost:13080/saCore/ws/Broker.asmx`.

如何`/saCore/ws/`在 IIS 中的站点下设置此部分？或者也许可以在我的 web.config 中设置它。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:20:11.320

将您网站的根目录（IIS 管理器 > 网站 > 基本设置）更改为包含“saCore”的文件夹。

如果“saCore”不是真正的目录，那么您需要使用 URI 重写模块。可从 Iis.net 免费下载。

# python - 如何获取字符串的大小？

> ID：13394448
> 
> 赞同：2
> 
> 时间：2012-11-15T09:18:34.087
> 
> 标签：python

我有一个 TCP 客户端服务器通信。我正在发送字符串，我想测量包裹的大小，我该怎么做？

就我而言，[sys.getsizeof](http://docs.python.org/2/library/sys.html#sys.getsizeof)不好，因为

```
getsizeof() calls the object’s __sizeof__ method and adds an additional garbage collector
overhead if the object is managed by the garbage collector. 
```

一个字符的大小是多少，2 字节还是 4 字节？在这种情况下，我可以简单地测量 as `msg_size = x * len(msg)`，但我不知道有多少字节`x`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:22:58.347

在 Python 2.x 中，`str`对象是 8 位的，即每个项目 1 个字节。在 3.x 中，您可以`bytes`再次使用每个项目 1 个字节的对象。

对于处理数据，通常最好使用[`bytearray`](http://docs.python.org/2/library/functions.html#bytearray); 这是可变的，并且在 2.x 和 3.x 中的工作方式相同。

# extjs4 - 如何以编程方式确定应用程序是使用 sencha-touch 还是 extjs 4.1

> ID：13394455
> 
> 赞同：1
> 
> 时间：2012-11-15T09:18:51.907
> 
> 标签：extjs4, sencha-touch, sencha-touch-2

在这里，我正在实现一个 sample.js 文件，其中设计了一个浮动组件。此 sample.js 文件独立于任何其他应用程序。这意味着当我将此文件添加到 sencha-touch 项目时，它应该显示浮动组件，如果我将此 sample.js 添加到 ext4.1 项目，那么它也应该显示该组件。

为此，我想知道应用程序使用的是 Sencha touch sdk 还是 ext 4.1 sdk？

我怎样才能做到这一点？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:37:59.040

我们可以通过执行以下条件来知道是touch还是extjs

```
if( Ext.versions.touch ){
    //write your touch related code here
}else if( Ext.versions.extjs ){
    //write your extjs code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:50:20.970

`Ext.version`记录了 Sencha Touch，`Ext.versions`不是。url 解决方案的替代方案是：

```
if(window.Ext) {
   if(Ext.version) {
      // Touch
   }
   else {
      // Extjs
   }
} 
```

# html - 简单的html5投票系统

> ID：13394456
> 
> 赞同：1
> 
> 时间：2012-11-15T09:18:54.350
> 
> 标签：html, vote

前段时间，我创建了一个简单的 Cocoa (OSX) 应用程序，它有 5 个按钮，允许用户对 5 个选项之一进行投票。当一个按钮被点击时，应用程序会给出一些关于点击哪个按钮的反馈，感谢用户的投票并返回初始状态以允许下一个投票者。投票被写入一个简单的文本文件，以便在所有投票后检索。非常简单但就其目的而言还可以（一种在我女儿学校投票给班级代表的奇特方式）。

现在我被要求为使用 html5 的 Web 浏览器开发相同的系统。学校希望该设置同时在多台计算机上运行。所以我们有一个本地服务器和两三台计算机连接到它。来自投票的数据需要写入服务器。

有人可以指出我已经这样做的示例的正确方向吗？我找到了一些投票系统，但它们都可以使用单选按钮或复选框，我需要在（也是动画的）背景上使用 5 个大图形（如果可能的话是动画的）。我认为对于经验丰富的 HTML5 编辑器来说这一切都非常简单，但我是初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T16:31:21.140

好的，您提到您是“初学者”（仅供参考，我也不是专业开发人员），但我假设您知道表单是什么以及它们如何工作。下面是超级简单的，我什至不会使用 AJAX。（评论中的解释。）

代码将在一个文件中。您提到了 PHP，所以我假设您可以使用它。这就是我在下面使用的：

```
<?

if (isset($_POST['vote'])) { // Check if there is a vote POSTed to our page
    // Store the vote. I don't know how you did it the previous time, I'm just going to write it to a text file
    $file = fopen("votes.txt", "w");
    fwrite($file, $_POST['vote']);
    fclose($file);
}

?>

<!-- the voting page -->

<HTML>
    <HEAD>
        <title>Vote</title>
    </HEAD>
    <BODY>
        <!-- Create a form to be able to send the vote to the server in the simplest way, but don't display it -->
        <form action="thispage.html" method="post" style="display:none;">
            <!-- I don't know what possible values there are. I'll just take 'foo' and 'bar'. Of course you can add more. -->
            <input type="radio" name="vote" value="foo" />
            <input type="radio" name="vote" value="bar" />
        </form>

        <!-- The images representing the (invisible) radio button -->
        <!-- I use the data-value attribute to store to which radio button this image corresponds -->
        <img src="path/to/foo/image" data-value="foo" />Vote FOO<br />
        <img src="path/to/bar/image" data-value="bar" />Vote BAR<br />

        <!-- Import jQuery for the sake of simplicity. -->
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <!-- The trickiest part. The script. -->
        <script>
            $("img").click(function() {
                 var value = $(this).data('value');        // Get the value
                 $("input[value='" + value + "']").click();// Click the corresponding radio button
                 $("form").submit(); // Submit the form.
            });
        </script>
    </BODY>
</HTML> 
```

未测试。

# android - 对话框的边框和分隔符颜色

> ID：13394459
> 
> 赞同：0
> 
> 时间：2012-11-15T09:19:01.073
> 
> 标签：android, dialog

我想创建一个包含 SingleChoiceItems 但带有橙色边框和分隔符颜色的对话框，如下图所示。

![在此处输入图像描述](../Images/ab8d6b974187f3937d0cb7fceeb68ebc.png)

这是我的对话框代码：

```
new AlertDialog.Builder(GameDetailsScreen.this)
.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
@Override
        public void onClick(DialogInterface dialog, int which) {

}
})
.create().show(); 
```

如何设置对话框的分隔符颜色和边框颜色。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:42:06.443

您可以为对话框创建自己的样式。查看这些链接： [attrs](https://stackoverflow.com/questions/3441396/defining-custom-attrs)！ [款式](http://developer.android.com/guide/topics/ui/themes.html)！ [自定义列表首选项](https://stackoverflow.com/questions/4549746/custom-row-in-a-listpreference)！这需要大量的工作，但值得学习。

# wordpress - 动态文本，如 wordpress 中的动态标题

> ID：13394462
> 
> 赞同：1
> 
> 时间：2012-11-15T09:19:05.300
> 
> 标签：wordpress, plugins, dynamic, header

我正在使用带有以下插件的动态标题图像，该插件会更改所有内页的标题图像。

[http://wordpress.org/extend/plugins/dynamic-headers/](http://wordpress.org/extend/plugins/dynamic-headers/)

但我没有得到任何类似的插件，它也会像它一样改变标题文本。任何人都可以建议我什么应该是我的程序以及如何使用 nicasio 动态标题之类的管理面板实现动态文本。

# php - preg_split 与正则表达式给出不正确的输出

> ID：13394463
> 
> 赞同：0
> 
> 时间：2012-11-15T09:19:07.727
> 
> 标签：php, regex, preg-split

我正在使用 preg_split 到一个字符串，但我没有得到想要的输出。例如

```
$string = 'Tachycardia limit_from:1900-01-01 limit_to:2027-08-29 numresults:10 sort:publication-date direction:descending facet-on-toc-section-id:Case Reports';
$vals = preg_split("/(\w*\d?):/", $string, NULL, PREG_SPLIT_DELIM_CAPTURE); 
```

正在生成输出

```
 Array
(
    [0] => Tachycardia 
    [1] => limit_from
    [2] => 1900-01-01 
    [3] => limit_to
    [4] => 2027-08-29 
    [5] => numresults
    [6] => 10 
    [7] => sort
    [8] => publication-date 
    [9] => direction
    [10] => descending facet-on-toc-section-
    [11] => id
    [12] => Case Reports
) 
```

哪个错了，欲望输出吧

```
Array
(
    [0] => Tachycardia 
    [1] => limit_from
    [2] => 1900-01-01 
    [3] => limit_to
    [4] => 2027-08-29 
    [5] => numresults
    [6] => 10 
    [7] => sort
    [8] => publication-date 
    [9] => direction
    [10] => descending
    [11] => facet-on-toc-section-id
    [12] => Case Reports
) 
```

正则表达式有问题，但我无法修复它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T09:29:55.383

我会用

```
$vals = preg_split("/(\S+):/", $string, NULL, PREG_SPLIT_DELIM_CAPTURE); 
```

输出和你想要的完全一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:24:13.043

试试这个正则表达式，而不是在拆分模式中包含“-”或其他字符： [http ://regexr.com?32qgs](http://regexr.com?32qgs)

```
((?:[\w\-])*\d?): 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:25:10.373

这是因为`\w`该类不包含字符`-`，所以我也会用它扩展 \w ：

```
/((?:\w|-)*\d?):/ 
```

# c++ - 变量在未初始化的情况下使用

> ID：13394468
> 
> 赞同：0
> 
> 时间：2012-11-15T09:19:35.410
> 
> 标签：c++, visual-c++

我有

```
run(){
...
struct sockaddr_in from;
int i = recvpacket(buffer,from, fromlen)
...
}

recvpacket(char *buffer, struct sockaddr_in from, int fromlen)
{
//udp recvfrom stores the address of the sender in from
} 
```

我在 VC++ 中得到以下运行时错误

```
runtime check failure - the variable 'from' is used without being initialized 
```

我应该通过引用传递，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:30:01.633

要解决的两件事：

*   要删除警告，您必须`from`像这样初始化，例如：

    `struct sockaddr_in from= {0};`

*   要在调用时获取地址，`recvpacket`您必须将其声明为引用

    `recvpacket(char *buffer, struct sockaddr_in& from, int fromlen)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:25:04.477

在你的 run() 方法中：`struct sockaddr_in from = {0};`并通过引用传递它以在被调用的方法中更新

# caching - ColdFusion中的缓存是否会再次返回更新的数据和缓存？

> ID：13394474
> 
> 赞同：0
> 
> 时间：2012-11-15T09:20:06.673
> 
> 标签：caching, cfquery

不需要代码..只是问。（请耐心等待，英语不是我的主要语言）

这是场景。

我缓存一个查询2小时，2小时前数据库中的数据更新完毕。所以我的问题是数据库中的新数据会被包含在缓存中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:29:12.950

答案是**否定**的。如果您指定缓存超时，这就是它的样子。它甚至**不会**检查数据库的超时时间。

通常，如果您的数据可能会更改，则不应使用 cachedWithin，因为此属性告诉 CF 在不检查数据库的情况下使用**缓存****数据**。如果您**使用**了 cachedWithin 并且您以某种方式发现数据已更改，则您没有简单的方法来强制重新查询

# cluster-analysis - 为什么我们需要在研究中训练和测试数据集？

> ID：13394478
> 
> 赞同：2
> 
> 时间：2012-11-15T09:20:14.940
> 
> 标签：cluster-analysis

我是数据挖掘（文本聚类）研究领域的新手，我有几个关于训练和测试数据集的问题。

1.  聚类需要训练和测试数据集吗？
2.  为什么我们需要分成训练和测试数据集？

很抱歉这个菜鸟问题希望这个小组的专家可以帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T10:21:04.100

由于您的问题是关于集群的：

**在聚类分析中，通常没有训练或测试数据拆分**。

因为您在**没有标签**时进行聚类分析，所以您无法“训练”。

训练是来自机器学习的一个概念，训练-测试拆分用于*避免过拟合*。

但是**如果你不学习标签，你就不能过拟合**。

正确使用聚类分析是一种*知识发现*方法。您想在数据中发现一些新结构，而不是重新发现已经标记的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:16:18.363

1.  要训​​练您的数据，您需要一组与您的测试数据相似但不相同的相关数据。例如，您可以拆分数据，其中 0.7 个数据是训练数据，其余数据是测试数据。这将使您的算法能够了解它应该寻找的内容。其余数据 0.3 可用于测试，因为它是一组不同的信息（希望如此），应该允许算法进行自我测试。

2.  为什么要拆分？好吧，如果您在数据 A 上训练您的数据，然后在数据 A 上测试您的算法，您的算法将能够正确识别所有信息，因为这是它所训练的。

例如，如果在学习加法时，你得到了 3+4、4+5、6+9 的和，你正确地解决了，那么使用相同的和来测试你的加法知识将是多余的。

更多信息：

[http://en.wikipedia.org/wiki/Natural_language_processing](http://en.wikipedia.org/wiki/Natural_language_processing)

[http://www.nltk.org/book](http://www.nltk.org/book)

希望这可以帮助。

# mysql - 按两列排序

> ID：13394480
> 
> 赞同：2
> 
> 时间：2012-11-15T09:20:25.783
> 
> 标签：mysql, sorting

我有一个包含以下列的站点访问表：

```
timestamp
host
url 
```

我想查看最后几次（例如 200 次）访问，但同时查看同一主机的组访问（查看他/她访问的页面顺序）。

如果我做：

```
... SORT BY timestamp DESC, host 
```

如果多个访问者同时在线，我会混淆主机

如果我做：

```
... SORT BY host, timestamp DESC 
```

我没有得到最新的访问（只有每个主机的最新访问）

我想看看例如

```
9:01 | a.com | /index
9:05 | a.com | /interesting
9:07 | a.com | /contact
9:02 | b.com | /index
9:03 | b.com | /product-a
9:08 | b.com | /thanks-for-buying 
```

这在 Mysql 中是可能的还是我应该在 php 中进一步处理结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:25:31.503

尝试这个：：

```
Select *, MAX(timestamp_col) as lastVisit from site_table

GROUP BY HOSTS order by lastVisit desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:31:08.320

你不能做`ORDER BY`follow by`LIMIT`然后 another `ORDER BY`，所以你必须使用一个子查询：

```
SELECT * FROM (SELECT * 
    FROM visits
    ORDER BY timestamp DESC
    LIMIT 200
) visits2
ORDER BY host 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T22:30:54.147

上面的答案为我指明了正确的方向，谢谢。这个有效。LIMIT 1000 是将查询时间从近 3 分钟减少到 7 秒（40000 条记录）。

```
SELECT v1.stamp, v1.host FROM visits AS v1 
   LEFT JOIN (SELECT MIN(date) AS firstVisit, host
              FROM visitor AS v2 
              GROUP BY v2.host
              ORDER BY firstVisit DESC
              LIMIT 1000) AS j
       ON v1.host=j.host 
       ORDER BY firstVisit DESC, v1.host, v1.date DESC
       LIMIT 100; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:26:39.667

如果你想要最后 200 个，你必须限制结果

```
 SORT BY timestamp DESC, host LIMIT 0, 200 
```

如果您没有再次出现同一个访客，请使用

```
SELECT DISTINCT visitor FROM .... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T09:31:24.320

我认为不可能在一个查询中使正常。你可以试试这个：

```
SELECT * 
FROM table AS t1 
WHERE t1.timestamp_col >= (SELECT MIN(tstamp) 
    FROM (SELECT t2.timestamp_col 
        FROM tables AS t2 
        WHERE t2.host = t1.host 
        ORDER BY timestamp_col DESC 
        LIMIT 200
    )
) 
```

我不测试这个疯狂的代码......但我希望它能给你方法:)

# sql - 使用数据在现有表上创建主键

> ID：13394481
> 
> 赞同：1
> 
> 时间：2012-11-15T09:20:32.443
> 
> 标签：sql, sql-server, sql-server-2008

作为迁移项目的一部分，我们从 JDE iSeries DB2 数据库中导入了数据。创建了一个 SSIS 包来创建目标表和导入数据。导入成功。

现在问题来了 - 客户希望在目标数据库 (SQL 2008 R2) 中创建主键。在这种情况下，问题表将是一个包含 104 列和 750 万行数据的表。此表所需的 PK 是复合的，有 7 列。

我们正在考虑这个：

```
BEGIN TRANSACTION
GO
    ALTER TABLE [dbo].[F0911] ADD  CONSTRAINT [F0911_PK] PRIMARY KEY CLUSTERED 
    (
        [GLDCT] ASC,
        [GLDOC] ASC,
        [GLKCO] ASC,
        [GLDGJ] ASC,
        [GLJELN] ASC,
        [GLLT] ASC,
        [GLEXTL] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    GO
COMMIT 
```

或这个：

```
-- Rename existing tables
        sp_RENAME '[F0911]' , '[F0911_old]'
        GO

    -- Create new table
        SELECT * INTO F0911 FROM F0911_old WHERE 1=0
        GO

    --Create PK constraints
        ALTER TABLE [dbo].[F0911] ADD  CONSTRAINT [F0911_PK] PRIMARY KEY CLUSTERED 
        (
            [GLDCT] ASC,
            [GLDOC] ASC,
            [GLKCO] ASC,
            [GLDGJ] ASC,
            [GLJELN] ASC,
            [GLLT] ASC,
            [GLEXTL] ASC
        )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
        GO

    --Insert data into new tables
        INSERT INTO F0911
        SELECT * FROM F0911_old
        GO

    -- Drop old tables
        DROP TABLE F0911_old
        GO 
```

在性能方面，哪种方法更有效？我有一种直觉，两者都是相同的，甚至第一种方法也隐含地与第二种方法做同样的事情。这种理解正确吗？

请注意，所有这些列都已存在于表中，我们无法修改表定义。

谢谢，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:25:37.150

他们是一样的。创建聚集索引的效果是安排在这两种情况下都会发生的页面。对于非聚集索引，它有助于禁用索引，然后将其重新打开并重建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:31:25.823

我认为第一种方法是对的，但我不明白BEGIN Transaction和END transaction的原因。我不认为 Transaction 关键字是必要的，因为您没有修改表的数据。事务用于我们必须锁定数据并且我们正在修改实时数据以便不使用旧数据的地方。

# c# - 在 Drive 菜单上使用 Event

> ID：13394482
> 
> 赞同：-3
> 
> 时间：2012-11-15T09:20:38.043
> 
> 标签：c#

我收到几个编译错误，我不知道为什么，我做错了什么？

```
static void Main(string[] args)
{
    DriveInfo[] drives = DriveInfo.GetDrives();

    foreach (DriveInfo drive in drives)
    {
        Menu startMenu = new Menu() { Title = "Enter a drive" };

        // The error is here: Invalid initializer member declarator
        MenuItem d = new MenuItem() {Text = "{0}" , drive.Name};

        if (drive.IsReady)
        {
            Console.CursorLeft = 5;
            Console.Write(drive.VolumeLabel);
        }

        // another error: 'System.IO.DriveInfo' does not contain a definition for 'Selected' and no extension method 'Selected' accepting a first argument of type 'System.IO.DriveInfo' could be found (are you missing a using directive or an assembly reference?)
        drive.Selected += drive_Selected;

        startMenu.Items = new[] {d};
        startMenu.Show();
    }
}

private static void drive_Selected()
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:29:59.487

**第一个错误**`MenuItem`- 您应该在类初始化程序中提供属性名称

```
MenuItem d = new MenuItem() {Text = "{0}" , YourPropertyName = drive.Name}; 
```

或者只是将驱动器名称分配给`Text`属性（如果您只是尝试进行一些格式化，因为文本的“{0}”对我来说看起来很奇怪）

```
MenuItem d = new MenuItem() {Text = drive.Name }; 
```

**第二个错误**-`DriveInfo`没有`Selected`事件或任何其他事件。它只保存有关驱动器的信息。并且驱动器不知道您在某处“选择”了它。假设您需要将`Selected`事件添加到您的`MenuItem`班级。

但无论如何，为什么不使用 WinForms 或 WPF 来完成这项任务呢？您必须做很多工作才能在控制台应用程序中创建这种菜单。

# freebase - freebase MQL 会为此查询什么？

> ID：13394483
> 
> 赞同：0
> 
> 时间：2012-11-15T09:20:44.050
> 
> 标签：freebase, mql

我想找IBM的CEO。对此的 MQL 查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T20:09:31.620

此搜索的 MQL 如下所示。
这个特定的实例可能比必要的更复杂，因为我最初是从 Freebase 交互式搜索生成的，然后手动添加/改进了过滤器。
我用各种公司名称验证了它并取得了相对的成功，即它的工作原理是在 Freebase 中正确编码了基础数据（一些公司丢失，一些公司的领导数据不完整等）
这个查询有一些技巧：

*   fitler中的公司名称需要与*Freebase 中记录*`u0`的公司名称精确匹配。您可以使用谓词而不是谓词，但这可能会引入许多不相关的命中。例如，您需要使用“IBM”、“Apple Inc.”、“General Motors”而不是这些名称的常见替代品（“International Business Machines”、“Apple”、“GM”...”）*`contains``equal`*
**   *关于领导角色*的`u1`过滤器以广泛的谓词表达，因为不幸的是，这些角色的命名相对宽松，有重复（例如可能是或），而且 CEO 的角色通常与其他公司角色相结合，例如主席 [董事会] 和/或总裁等。我通过首先查找（在 Freebase 中）包含“CEO”或“首席执行官”的领导角色实例来手动选择此列表。*`One of``CEO``Chief Executive Officer`***   `u2`过滤器表示日期应该为`to`空，仅选择当前在职的人，而不是前任 CEO（希望 Freebase 记录其任期的结束日期）。**

 **根据您的应用程序，您可能需要测试查询是否返回一条且恰好一条记录，如果没有则相应地进行调整。

[**Freebase MQL 编辑器**](http://www.freebase.com/queryeditor)是一种方便的工具测试和编辑这种查询。

```
[
  {
    "from": null,
    "id": null,
    "limit": 20,
    "organization": {
      "id": null,
      "name": null,
      "optional": true
    },
    "person": {
      "id": null,
      "name": null,
      "optional": true
    },
    "role": {
      "id": null,
      "name": null,
      "optional": true
    },
    "s0:type": [
      {
        "id": "/organization/leadership",
        "link": [
          {
            "timestamp": [
              {
                "optional": true,
                "type": "/type/datetime",
                "value": null
              }
            ],
            "type": "/type/link"
          }
        ],
        "type": "/type/type"
      }
    ],
    "sort": "s0:type.link.timestamp.value",
    "title": null,
    "to": null,
    "type": "/organization/leadership",
    "u0:organization": [
      {
        "id": null,
        "name": "IBM",
        "type": "/organization/organization"
      }
    ],
    "u1:role": [
      {
        "id": null,
        "name|=": ["Chief Executive Officer", "President and CEO", "Chairman and CEO", "Interim CEO", "Interim Chief Executive Officer", "Founder and CEO", "Chairman, President and CEO", "Managing Director and CEO", "Executive Vice President and Chief Operating Officer", "Co-Founder, Chairman and Chief Executive Officer"],
        "type": "/organization/role"
      }
    ],
    "u2:to": [
      {
      "value": null,
      "optional": "forbidden"
      }
    ]
  }
]​ 
```

样品退货（专门针对“IBM”）

```
{
  "code":          "/api/status/ok",
  "result": [{
    "from":  "2012-01-01",
    "id":    "/m/09t7b08",
    "organization": {
      "id":   "/en/ibm",
      "name": "IBM"
    },
    "person": {
      "id":   "/en/virginia_m_rometty",
      "name": "Virginia M. Rometty"
    },
    "role": {
      "id":   "/en/chairman_president_and_ceo",
      "name": "Chairman, President and CEO"
    },
    "s0:type": [{
      "id":   "/organization/leadership",
      "link": [{
        "timestamp": [{
          "type":  "/type/datetime",
          "value": "2010-01-23T08:02:57.0006Z"
        }],
        "type": "/type/link"
      }],
      "type": "/type/type"
    }],
    "title": "Chairman, President and CEO",
    "to":    null,
    "type":  "/organization/leadership",
    "u0:organization": [{
      "id":   "/en/ibm",
      "name": "IBM",
      "type": "/organization/organization"
    }],
    "u1:role": [{
      "id":   "/en/chairman_president_and_ceo",
      "type": "/organization/role"
    }],
    "u2:to": []
  } 
```**

# django - 如何允许新用户重置密码？

> ID：13394484
> 
> 赞同：1
> 
> 时间：2012-11-15T09:20:44.487
> 
> 标签：django

我创建一个新用户并为该用户指定密码：

```
user = User(username = username, email = email)
user.set_unusable_password()
user.save() 
```

当这个新用户尝试重置密码时，他们会收到错误消息：

> 与此电子邮件地址关联的用户帐户无法重置密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:36:29.090

`set_unusable_password`设置一个永远不会是有效密码哈希的值，并使用户自己无法更改密码。

我认为您应该生成一个复杂的密码（使用[`make_random_password`](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#django.contrib.auth.models.BaseUserManager.make_random_password)）并向用户发送重置密码的链接。

# mysql - “写入网络”期间会发生什么？（无复制，无外部访问）

> ID：13394485
> 
> 赞同：1
> 
> 时间：2012-11-15T09:20:51.380
> 
> 标签：mysql

我们的一个网络服务器最近出现故障，查询堆积如山等......

我们注意到mysql进程在状态“ `writing to net`”中的时间相当长。我以前从未见过这种情况（虽然我不是数据库管理员......）。通常我会看到诸如执行、写入临时表、发送数据之类的东西......

这甚至发生在同一台服务器上的一个简单的 php 测试脚本中，就像一个查询

```
SELECT * FROM old_unoptimized_middle_largish_myIsam_table 
```

并在结果集上循环。

有人可以告诉我或指向我解释在这种状态下会发生什么的资源吗？从 MySQL 文档中，我认为此状态仅适用于从远程服务器或复制期间启动的请求 - 但这里也不是这种情况。我们确实将绑定地址设置为 0.0.0.0，以允许从集群中的其他服务器访问。

我感觉自己像个菜鸟一样问这个问题，但是我们的管理员会失踪很长一段时间，而且我的 google fu 失败了……

# fonts - 为什么 sublime text 2 编辑器看不到字体？

> ID：13394487
> 
> 赞同：1
> 
> 时间：2012-11-15T09:21:00.413
> 
> 标签：fonts, sublimetext2

我最近安装了一些老式的 DOS 样式字体（以 ttf 格式）。现在我正在尝试将它们设置为崇高文本中的默认字体，通过用户设置文件中的“font_face”参数传递相应的字体名称，但似乎我的名称拼写错误，或者字体不知何故无法识别由 ST2 .. 我尝试以不同的方式编写字体名称，但没有运气。

那么，有没有办法知道我应该传递给这个参数的确切字体名称？ST2 如何通过给 font_face 参数提供一个字符串来搜索已安装的字体？我在[这里](https://dl.dropbox.com/u/943359/dosfonts.zip)上传了字体。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T17:51:46.360

You need add these to user-settings:

```
{
  "font_face": "keyrus",
  "font_size":  12,
  "font_options": ["directwrite"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:13:32.393

我试过你的字体文件：keyrusMedium.ttf 在 Windows 中双击它（我使用 XP），它会打开一个窗口，其中包含字体详细信息和字体中的一些示例文本。

“字体名称”旁边是您需要在 ST2 设置文件中使用的名称。

对于这种字体，它是 keyrus

我在我的 ST2 设置文件中尝试过它并且它有效

**更新**：道歉 - 它实际上并没有工作。字体发生了变化，我认为它看起来像 keyrus 字体，但事实证明这是 ST2 使用的一些默认字体。

我进一步查看了您的字体文件，字体文件中唯一的“脚本”是“西里尔字母”

我的大多数其他字体都将“西方”作为字体文件中的“脚本”之一。所以我想知道 ST2 是否在字体文件中寻找“西方”脚本并且它不存在所以它不显示字体。

我已经尝试了一些我拥有的字体，如果它们有“西方”作为脚本，它们都可以工作。我尝试了一个只有“阿拉伯语”作为脚本的脚本，但它不起作用。

关于如何将字体文件转换为包含“西方”脚本的深度超出我的理解。

# jquery - jQuery更改功能在功能中不起作用

> ID：13394495
> 
> 赞同：0
> 
> 时间：2012-11-15T09:21:32.877
> 
> 标签：jquery, function, select, bind, onchange

si 有以下脚本：

```
function getInputString() {
//dropdown value
$('#dropdown').bind('change', function(event) {
    var dValues = $('#dropdown:selected').val();

   //the standard form should hide if nothing is choosen
   if("" != dValues) { 
       $('.shop_search').hide();
   }else {
       $('.shop_search').show();
   }
   //if first 2 letters are not MZ cValue changes, else it is the selected one 
   if (dValues.substr(0, 2) != "MZ") {
       var cValues = "simson " + dValues;
   }else {
       var cValues = dValues;
   }
});
return cValues ;
}

function getSearchString() {        
//searchform value
$('#merkmalsuche').keyup(function () {
   var sValues = $(this).val();
}).keyup();
return sValues;
}

function generateURL() {
   var mString = getSearchString();
   var vString = getInputString();
   window.location = "http://www.akf-shop.de/tag/" + vString + " " + mString;
}

$('#merkmalsuche').submit(function() { generateURL(); }); 
```

有一个带有选项的生成选择，设置第一个变量。更改后，应隐藏普通搜索表单并显示镜像搜索表单。在 keyup 上，输入的单词是第二个 var。

如果您单击提交，您现在应该链接到生成的 URL。但是，如果更改选择字段中的值，则不会发生任何事情。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:32:15.477

检查你的 var 的范围，你在一个函数中定义你的 var 并且不能在外部访问......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:33:21.383

什么都没有发生，因为调用了这两个函数

```
var mString = getSearchString();
   var vString = getInputString(); 
```

只是要**评估处理程序..**

此外，您将在页面上出现错误，因为**cValues**未在函数范围之外定义..它将是事件处理程序的本地..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:26:56.290

尝试更改 `var dValues = $('#dropdown:selected').val();` 为`var dValues = $('#dropdown option[selected=selected]').val();`或只是

```
var dValues = $('#dropdown').val(); 
```

# android - 是否可以同时查看图形布局和 layout.xml？

> ID：13394498
> 
> 赞同：3
> 
> 时间：2012-11-15T09:21:35.817
> 
> 标签：android, eclipse

我是 Android 开发的新手，对我来说，了解图形布局和 xml 如何相互关联的好方法是尝试 xml 属性并查看图形 UI 中的变化。有没有一种方法可以同时并排查看，而不必从一个切换到另一个？图片显示了我想要实现的目标。

![例子](../Images/e2bd8ca60b5b31cc2c248fdbac4d2bbf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-16T06:49:10.840

这是一个更好的答案。

1.  打开布局
2.  Windows -> 新编辑器
3.  将一个窗口设置为图形，将另一个窗口设置为 xml

[Eclipse IDE - Android 图形布局和 XML 布局并排](https://stackoverflow.com/questions/13169743/eclipse-ide-android-graphical-layout-and-xml-layout-side-by-side)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:23:07.927

使用[IntelliJ 理念](http://www.jetbrains.com/idea/download/)。它是具有此功能的 IDE。

**编辑：**我不确定我是否很好地理解了您的问题，但我得到的是您想要进行更改并看到它们自动更新。此功能存在于 Idea 中： ![预览窗格可以满足您的需要](../Images/ca575b7121927cd3025981f05087f1e4.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-25T11:22:53.963

与此同时，我发现了一种不同且更优雅的拆分方式（仍在 Eclipse R 4.4.0 + ADT 23.0.3.1327240 中）：

1.  打开布局 XML 文件。
2.  窗口 > 编辑器 > 切换拆分编辑器（垂直）
3.  在右侧窗格中选择图形布局。

这种方法的巧妙之处在于两个拆分窗格保留在编辑器选项卡中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T10:07:16.573

目前 Eclipse 中不存在同一窗口中的图形编辑器和 xml 编辑器。

将您的 Android SDK 工具更新到修订版 21

此更新包括新的工具和功能，可帮助您在创建应用程序时更高效地工作。新的多配置编辑器和新的 Lint 规则等工具将为您提供帮助。

参考这里：在此处[输入链接描述](http://android-developers.blogspot.com.br/2012/11/android-sdk-tools-revision-21.html)

**多配置编辑器** 新的多配置编辑器允许您跨各种方向、屏幕尺寸和语言环境开发和原型化您的 UI。例如，在纵向模式下编辑布局时，您可以查看您的编辑是否在较短的横向模式下不可见。 ![在此处输入图像描述](../Images/a4b7b95a118fe9e4cb519f378795b859.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-08T16:16:37.240

以下是在 Eclipse Luna R 4.4.0 + ADT 23.0.3.1327240 中的操作方法：

1.  打开布局 XML 文件。
2.  窗口 -> 编辑器克隆
3.  拖动新的编辑器选项卡并将其放在当前编辑器窗口旁边。
4.  将一个编辑器窗口设置为图形布局，另一个设置为 XML。

我可以推荐一个 Eclipse 设置，其中三个窗口彼此相邻：

1.  包资源管理器，通常折叠）| 2\. XML | 3\. 图形，其大纲结构面板打开。

注意事项：

1.  在 XML 中所做的更改不会自动反映在图形窗口中；您需要在此处执行一些操作，单击即可。
2.  在 Package Explorer 中选择一个新的 XML 文件只会在一个（例如 XML）编辑器窗口中打开它，而不是同时在两个窗口中打开；您将需要选择另一个（例如图形）编辑器窗口并在此处打开文件。值得庆幸的是，两个窗口都有最近打开的文件的选项卡，所以这不是*那么*麻烦。
3.  通常的大纲窗口（窗口>显示视图>大纲）与当前选定的编辑器链接；如果您不在图形和 XML 编辑器窗口中显示相同的文件，事情可能会变得混乱。

# wcf - ADO.net 连接超时前的连接超时值

> ID：13394499
> 
> 赞同：0
> 
> 时间：2012-11-15T09:21:35.903
> 
> 标签：wcf, sql-server-2008, ado.net

我们有一个连接到 SQL Server 2008 R2 数据库的 WCF 数据服务。当服务尝试从数据库访问数据时，连接在连接超时值之前超时，并引发超时异常。

这是连接字符串：

```
Data Source=XXXX;Initial Catalog=XXXX;MultipleActiveResultSets=False;
Connection Timeout=80;Integrated Security=false;User ID=XXX;Password=XXX 
```

在此连接字符串中，即使我们将 80 秒作为`Connection Timeout`，连接也会在 700 毫秒左右超时并抛出异常

> *System.Data.SqlClient.SqlException (0x80131904)：超时已过期。
> 在操作完成之前超时时间已过或服务器没有响应。*

这仅发生在某些查询上。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:31:48.593

这不是[`ConnectionTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)导致错误的原因；这是[`CommandTimeout`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx). 另请参阅[此问题](https://stackoverflow.com/questions/847264/what-is-the-difference-between-sqlcommand-commandtimeout-and-sqlconnection-conne)。

`CommandTimeout`因此，解决方案是为更昂贵的查询设置更高的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:28:27.603

这种类型的超时可能有三个原因；

1.  某处出现了僵局

2.  数据库的统计信息和/或查询计划缓存不正确

3.  查询太复杂，需要调优

取自以下链接

[超时已过。在操作完成之前超时时间已过或服务器没有响应。该语句已终止](https://stackoverflow.com/questions/8602395/timeout-expired-the-timeout-period-elapsed-prior-to-completion-of-the-operation)

尝试优化这里提到的查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T10:20:06.923

我有同样的问题，谷歌把我带到了这里。

> 超时已过。在操作完成之前超时时间已过或服务器没有响应。

就我而言，数据库服务器上尚未打开 mssql 防火墙端口（默认 = 1433 TCP）。

# ruby-on-rails - 如何删除 Rails 拥有的静态 html 缓存文件？

> ID：13394504
> 
> 赞同：3
> 
> 时间：2012-11-15T09:22:00.963
> 
> 标签：ruby-on-rails, capistrano

我已经设置了页面缓存，可以在公用文件夹中动态创建 HTML 文件。我正在使用 Capistrano 部署 Rails 应用程序。

当您需要**清理**Capistrano 中的旧版本时，问题就开始了。缓存文件**归 rails 所有**，这意味着部署用户无法删除这些文件。

我没有对服务器的 root 权限，因此不能选择使用提升的权限。

建议的一种可能性是将缓存符号链接到**共享文件夹**中。但是，这不会清除版本之间的缓存，这可能很危险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:44:06.733

好吧，主要问题是当你运行 capistrano 任务时，你有一个用户（通常是 deploy 用户），所以为了创建/删除文件，你的 deploy 用户应该对它们具有权限。

因此，您的网络用户（在本例中为 rails）与部署用户无关，正如您所说，您不能在服务器上拥有 root 权限（可能是托管公司，对吗？）

您可以在您的网站上创建一个只有您可以访问的操作，例如 [http://mywebsite.com/clear_cache](http://mywebsite.com/clear_cache)

在该操作中，您实际上编写代码来列出每个较旧的部署，并清除旧部署中的缓存文件，通过这样做，将删除文件的用户将是 Web 用户 (rails)。

# rubymotion - 如何以编程方式更改选项卡？

> ID：13394505
> 
> 赞同：1
> 
> 时间：2012-11-15T09:22:01.063
> 
> 标签：rubymotion

我正在使用 RubyMotion 创建一个 iOS 应用程序。我想创建一个自定义的 tabBar，因此我需要知道如何以编程方式更改选项卡以及如何获取当前选项卡。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:30:59.270

您可以尝试使用[motion-tab](https://github.com/clearsightstudio/motion-tab)创建标签栏。

**基本用法**（来自自述文件）

```
def application(application, didFinishLaunchingWithOptions:launchOptions)
  @window = UIWindow.alloc.initWithFrame(UIScreen.mainScreen.bounds)

  tabs = [
    {
      systemIcon: UITabBarSystemItemContacts,
      navigationController: true,
      viewController: ContactsViewController
    }, {
      title: "Custom",
      icon: "custom.png",
      navigationController: false,
      viewController: CustomViewController.alloc.initWithCustomInit(true)
    }, {
      title: "Settings",
      icon: "settings.png",
      navigationController: true,
      viewController: SettingsViewController
    }
  ]

  tabBarController = MotionTab::TabBar.createTabBarControllerFromData(tabs)
  MotionTab::TabBar.select(tabBarController, title: "Settings")
  # MotionTab::TabBar.select(tabBarController, tag: 0) # Selects first tab

  @window.rootViewController = tabBarController
  @window.makeKeyAndVisible
end 
```

`MotionTab::TabBar`gem 现在没有当前选项卡功能，但是添加一个返回当前选项卡的类属性不会太难。

# android - 在 Android 中使用 PhoneGap 打开 PDF

> ID：13394507
> 
> 赞同：2
> 
> 时间：2012-11-15T09:22:07.033
> 
> 标签：android, pdf, cordova

我需要打开一个 url 中的 PDF 文件。我需要用 PDF 查看器打开它...

有可能的？

谢谢大家。

此致。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:17:02.717

我建议使用[ChildBrowser 插件](https://build.phonegap.com/blog/childbrowser-plugin)并使用 Google 的查看器来实际打开 PDF（因为 Android 没有默认的 PDF 查看器）。

因此，您可以像这样打开 PDF：

```
onclick='window.plugins.childBrowser.showWebPage(encodeURI("http://docs.google.com/viewer?url=' + pdfLink + '")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:34:19.477

在 android 中（我不知道 phonegap）有很多 pdf 查看器库。

像[Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library)

或[机器人文本](http://code.google.com/p/droidtext/)

或[MuPDF](http://www.mupdf.com/)

或[APV Pdf 查看器](http://code.google.com/p/apv/)

如果您开发您的应用程序商业并且不想支付任何费用

使用第一个。

# kendo-ui - Kendo UI - 如何在 WEB API 上实现错误处理，非 MVC 使用 Kendo Grid

> ID：13394510
> 
> 赞同：2
> 
> 时间：2012-11-15T09:22:09.677
> 
> 标签：kendo-ui

我的场景是我创建了一个返回 Active Directory 对象的 Web API。

我有这个 WEB API 函数创建 Active Directory 用户并创建一个用户，该用户返回包含`First Name , Last Name, Email, UserName, Etc.`.. 的 Active Directory 对象。如果出现错误我将如何处理？

我正在使用 Kendo Grid InLine Edit [http:](http://demos.kendoui.com/web/grid/editing-inline.html)
//demos.kendoui.c​​om/web/grid/editing-inline.html 我想将错误消息显示为弹出窗口

我该怎么做？？？

选项

1.  尝试捕获错误并将 Active Directory 对象作为异常放入？？？

    *   我怎样才能捕捉到这是 Kendo UI？
2.  抛出响应并获取错误消息并在 Kendo Grid 中显示

    //HttpResponseMessage msg = new HttpResponseMessage(HttpStatusCode.OK) //{ // Content = new StringContent(string.Format("No User with ID = {0}.{1}", businessObject.UserName, ex.InnerException.ToString () )), // ReasonPhrase = "数据库中未找到客户 ID！" //}; //抛出新的HttpResponseException(msg);

或者

```
 //var message = string.Format("Error Message: {0}", taskCreateADUser.ADExceptionDescription);
                //throw new HttpResponseException(
                //    Request.CreateErrorResponse(HttpStatusCode.OK, message)); 
```

谢谢，马克莱文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:40:51.223

每当 KendoUI 通过 Ajax 绑定时，它依赖于在 json 响应中发送的 ModelState 的序列化版本。本质上，如果 ModelState 无效，则返回到小部件（在本例中为网格）的 json 响应将包含如下内容：

```
{
  "Errors":{
     "PropA":{
        "errors":[
           "Error1",
    "Error2"
        ]
     },
     "PropB":{
        "errors":[
           "FUBAR"
        ]
     }
  }
} 
```

本质上，如果您希望网格对其进行响应，您的 WebAPI 将需要返回类似的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T21:14:20.213

这是关于您的选项 2。您需要将以下内容正确应用于您的特定场景。这只是一个非常简单的响应解析示例，并在检测到错误时显示警报。此示例需要一个包含 Items 数组的 JSON 对象。一旦你有了基本的想法，你肯定可以应用更高级的处理。

```
 $("#grid").kendoGrid({
                dataSource: {
                    schema: {
                        data: function(data) {
                            if (data.Items[0].substring(0,37) == "allmyerrormessagesstartwiththisphrase"){
                            alert(data.Items[0];
                            } else {
                                return data.Items;
                            }
                        }
                    },
                    transport: {
                        read: "http://myurl.com/something/"
                    }
                }
            }
        ); 
```

# ios - 核心数据：有序关系中第一个元素的谓词

> ID：13394513
> 
> 赞同：2
> 
> 时间：2012-11-15T09:22:25.580
> 
> 标签：ios, core-data, many-to-many, predicate, nsorderedset

我有这种包含至少一个元素的多对多关系：

```
Appointment <<------>> Invitee 
```

`appointment.invitees`是一个**有序的关系**，导致`NSOrderedSet`.

在一个由获取结果控制器控制的表格视图中，我列出了约会以及受邀者集的第一个元素。

现在我想通过被邀请者的名字*搜索*这个列表，使用`NSPredicate`. 但是如何在谓词中引用有序列表的*第一个元素呢？*

我试过：

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:
       @"invitees[FIRST].lastName CONTAINS[cd] %@", searchTerm]; 
```

但我得到了`unimplemented SQL generation for predicate`错误。这是有道理的，因为结果是一个集合，但严格来说不是一个数组。不过，我认为 sqlite 商店必须对订单进行建模，所以它应该是可检索的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T19:08:54.380

显然，即使是最专业的核心数据专家也无法回答这个问题。

解决方法是将第一个元素建模为单独的一对一关系，将其余元素建模为基于相同相关实体的可选多对多关系。

```
Appointment <<------>  mainInvitee        (Invitee)
            <<------>> additionalInvitees (Invitee) 
```

# optimization - 一点点 SEO：如何让一个非常简单的网站在搜索引擎结果中更漂亮？

> ID：13394514
> 
> 赞同：-1
> 
> 时间：2012-11-15T09:22:26.943
> 
> 标签：optimization, seo, sitemap

![截屏](../Images/f5af8565dec692b7a0ab8821f7be5e6c.png)

看，在页面标题下有一个非常漂亮的链接，包括网站的类别。

我真的很想在我的网站上放那个东西。问题是我网站的语法：

```
Main page: index.php
Category: index.php?p=part&id=[ID]
Subcategory: index.php?p=cat&id=[ID]
Article: index.php?p=post&id=[ID] 
```

我该怎么办？改变语法对我没有好处，但我很确定我可以用 htaccess RewriteEngine 做一些魔术，但它看起来不会好得多。

非常感谢提前:)

* * *

哎呀，差点忘了。我可以提供一些正确站点地图的指南吗？我自己已经搜索过了，但是每个指南都提供了自己的制作方法，我完全糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:23:53.883

SERPS 中的这些面包屑链接不仅来自微数据，而且来自网站页面上的面包屑导航链接。（确实可以用微数据标记，但不必如此）如果根据我的经验，url 很长，Google 会倾向于使用它们。

更多信息在这里：

[http://googleblog.blogspot.com/2009/11/new-site-hierarchies-display-in-search.html](http://googleblog.blogspot.com/2009/11/new-site-hierarchies-display-in-search.html)

和这里：

[http://www.youtube.com/watch?feature=player_embedded&v=-LH5eyufqH0#！](http://www.youtube.com/watch?feature=player_embedded&v=-LH5eyufqH0#!)

和这里

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=185417](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=185417)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:28:22.163

它被称为微数据。[您可以在schema.org](http://schema.org/docs/gs.html)找到官方支持的微数据。请记住，使用微数据并不能保证您的搜索结果会受到影响。

# c# - 在我的部分观点中，语言没有改变？

> ID：13394522
> 
> 赞同：2
> 
> 时间：2012-11-15T09:23:02.343
> 
> 标签：c#, .net, asp.net-mvc

我已经为我的 MVC 3 项目实现了语言支持。

```
 protected void Application_AcquireRequestState(object sender, EventArgs e)
    {
        //It's important to check whether session object is ready
        if (HttpContext.Current.Session != null)
        {
            CultureInfo ci = (CultureInfo)this.Session["Culture"];
            //Checking first if there is no value in session 
            //and set default language 
            //this can happen for first user's request
            if (ci == null)
            {
                //Sets default culture to english invariant
                string langName = "en";
                //Try to get values from Accept lang HTTP header
                if (HttpContext.Current.Request.UserLanguages != null &&
   HttpContext.Current.Request.UserLanguages.Length != 0)
                {
                    //Gets accepted list 
                    langName = HttpContext.Current.Request.UserLanguages[0].Substring(0, 2);
                }
                ci = new CultureInfo(langName);
                this.Session["Culture"] = ci;
            }
            //Finally setting culture for each request
            Thread.CurrentThread.CurrentUICulture = ci;
            Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(ci.Name);
        }
    } 
```

然后我通过这个选择我的语言：

```
 [AllowAnonymous]
    public ActionResult ChangeLanguage(string lang, string returnUrl)
    {
        Session["Culture"] = new CultureInfo(lang);

        return Redirect(returnUrl);
    } 
```

它在主视图中加载正确的语言，而不是在部分视图中。我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T12:25:58.633

达林是对的，代码是正确的。

# php - 在 PHP 中使用新设备提示登录

> ID：13394524
> 
> 赞同：4
> 
> 时间：2012-11-15T09:23:25.227
> 
> 标签：php, user-agent

当您在新设备上登录 Facebook 时，他们会提示您为设备命名。他们如何检测新设备？他们只是`user agents`为每个帐户存储，还是有更好的方法来做到这一点？我想在我的`php`应用程序中实现这个功能。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:30:43.650

这很普通：
第一次遇到它时，在浏览器的 cookie 中存储一个唯一的 id。没有 cookie == 新浏览器。

# asp.net - 在 VB.Net 中更改日期格式

> ID：13394531
> 
> 赞同：0
> 
> 时间：2012-11-15T09:23:55.790
> 
> 标签：asp.net, gridview

如何更改显示从数据库填充的日期格式的 asp 网格中的日期格式。数据库以“2009-08-23 10:24:00.000”格式存储值，但网格中的值显示为“Sun 23-08-2009 10:24:00”我想将其显示为“23-AUG- 2008' VB .Net 代码

```
"Dim dv As DataView1 = ds.Tables(0).DefaultView" 
```

标记是

```
<asp:BoundColumn    DataField="DateFormat"  HeaderText="Day&amp;Date">    
<ItemStyle Wrap="False" /> 
```

如何显示为“23-AUG-2008”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:31:03.750

您可以使用`DataFormatString`. `BoundColumn`那里只是指定所需的格式。

在你的情况下：

```
<asp:BoundColumn DataField="DateFormat" DataFormatString="{0:dd-MMM-YYYY}" HeaderText="Day&amp;Date"> 
```

顺便说一句，`DataGridView`是来自 Winforms 的控件，而不是 webforms...在 webforms 中它被称为`GridView`. 这与javascript或vb.net无关，所以我也删除了标签。该解决方案特定于GridView控件，无论代码隐藏语言如何，它都属于asp.net。是的，您可以使用 javascript 来格式化这些字符串，但是...

# php - 检查变量是否为空

> ID：13394533
> 
> 赞同：0
> 
> 时间：2012-11-15T09:24:35.263
> 
> 标签：php, isset, isnull

> **可能重复：**
> [is_null($x) vs $x === null 在 PHP](https://stackoverflow.com/questions/8228837/is-nullx-vs-x-null-in-php)

在以下上下文中`!== null`，`!is_null()`并且`isset()`都产生相同的结果：

```
$foo = null;

function foo() {
    if ($this->foo !== null) {
        ...
    }
    if (!is_null($this->foo)) {
        ...
    }
    if (isset($this->foo)) {
        ...
    }
} 
```

哪一个是最快的，在这种情况下你会推荐哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:27:50.867

如果您不确定变量是否存在，请使用`isset`.

例子：

```
$content = (isset($_POST['content'])) ? $_POST['content'] : null; 
```

否则，使用与 null 的严格比较。

```
if ($content === null) { } 
```

（真的，我只是通过严格的比较来推动我对你的看法。我只是认为它看起来比 is_null 更好，而且它可能快一点。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:27:39.523

`isset`仅在*可能未设置*变量时使用。即，如果您不知道此时变量是否存在。由于您确实知道此时它应该存在，因此不要使用`isset`.

`!== null`和之间的差异`!is_null`可以忽略不计，主要取决于您的偏好。就个人而言，我喜欢`!== null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:28:12.290

```
if ($this->foo !== null) {
      //...
} 
```

我更喜欢这个条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:57:23.127

据我说

```
 if($this->foo!=""){ 
```

//... }

这是最快的，并且可以快速产生结果

# ruby-on-rails - Symfony2+Doctrine vs Rails 如何从相关表中检索数据

> ID：13394534
> 
> 赞同：1
> 
> 时间：2012-11-15T09:24:37.120
> 
> 标签：ruby-on-rails, symfony, doctrine-orm

我是 Symfony2 的新手，但我使用 Rails。我想在 Symfony2 中做这样的事情：

```
class Manager < ActiveRecord::Base
    has_many :employees
end 
```

然后像这样询问对象：

```
m = Manager.find(1)
# Sends SQL query SELECT COUNT * FROM EMPLOYEES WHERE MANAGER_ID = 1
count = m.employees.count

# Sends SQL query SELECT * FROM EMPLOYEES WHERE MANAGER_ID = 1
m.employees.each do |e|
    puts e.name
end 
```

我在 Symfony2 中有这个代码...

```
/**
 * @Entity @Table(name="Manager")
 */
class Manager
{
    /**
     * @Id @Column(type="integer") @GeneratedValue
     */
    public $id;

    /**
     * @Column(type="string")
     */
    public $description;

   /**
    * @OneToMany(targetEntity="User", mappedBy="manager")
    * @var User[]
    */
    private $employees;
} 
```

如何在 Symfony2 中实现这些（上述）功能（在 RoR 中很容易由其 ORM 制作）？

感谢帮助...

神话冲刺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:53:16.730

```
m = Manager.find(1)
# Sends SQL query SELECT * FROM EMPLOYEES WHERE MANAGER_ID = 1
m.employees.each do |e|
    puts e.name
end 
```

似乎我们正在根据经理 ID 寻找员工。

让我们从一对多的双向关系开始（[学说文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional)）

```
<?php
/** @Entity **/
class Manager
{
    // ...
    /**
     * @OneToMany(targetEntity="Employee", mappedBy="manager")
     **/
    private $employees;
    // ...

    public function __construct() {
        $this->employees = new \Doctrine\Common\Collections\ArrayCollection();
    }
}

/** @Entity **/
class Employee
{
    // ...
    /**
     * @ManyToOne(targetEntity="Manager", inversedBy="employees")
     * @JoinColumn(name="manager_id", referencedColumnName="id")
     **/
    private $manager;
    // ...
} 
```

控制器

```
<?php
  // src/Acme/DemoBundle/Controller/ManagerController.php

  // ...
  public function showAllEmployeesForManagerAction($managerId)
  {
    $repo = $this->getDoctrine()->getRepository('AcmeDemoBundle:Manager');

    $manager         = $repo->find(managerId);
    $employees       = $manager->getEmployees();
    // counting employees
    $employeesNumber = count($employees); // not passed to template

    return $this->render('AcmeDemoBundle:Employees:list.html.twig', array(
        'manager' => $manager,
        'employees' => $employees,
    ));
  } 
```

模板

```
{# src/Acme/DemoBundle/Resources/views/Employees/list.html.twig #}

{% extend '::base.html.twig' %}

{% block body -%}
    <h2>Employees depending on Manager {{manager.name}}</h2>
    <p>Number of employees : {{employees|length}}</p>
    <ul>
    {% for employee in employees %}
       <li>{{ employee.name }}</li>
    {% endfor %}
    </ul>
{% endblock %} 
```

希望这对你有用。

大卫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:23:23.997

如果你使用 Dcotrine2 orm，它看起来像这样：

```
<?php
// src/Acme/DemoBundle/Controller/ManagerController.php

// ...
public function showAllAction()
{
    $repo = $this->getDoctrine()->getRepository('AcmeDemoBundle:Manager');
    $managers = $repo->findAll();

    return $this->render('AcmeDemoBundle:Manager:list.html.twig', array(
        'managers' => $managers,
    ));
} 
```

```
{% extend '::base.html.twig' %}

{% block body -%}
    {% for manager in managers -%}
        {{ manager.name }}
    {% endfor %}
{% endblock %} 
```

更多信息可以在[Symfony2 教义文档](http://symfony.com/doc/current/book/doctrine.html)和[模板文档](http://symfony.com/doc/current/book/templating.html)中找到。

* * *

但是，RoR 使用 Active Record 来持久化从数据库中读取的信息。在 Symfony2 中没有“模型”。你可以使用任何你想要的东西。默认情况下它使用 Doctrine2，但也包括[Propel 。](http://symfony.com/doc/current/book/propel.html)

您也可以使用自己喜欢的“模型”库。如果您正在寻找[PHP 中的活动记录](http://google.com/search?q=php+active+record)之类的东西，您会发现很多有用的库可以使用。

# php - 如何在 Codeigniter 中将页面（视图）回显到 Ajax 函数

> ID：13394536
> 
> 赞同：1
> 
> 时间：2012-11-15T09:24:43.160
> 
> 标签：php, ajax, codeigniter, jquery, zurb-foundation

我正在将 Codeigniter 与 Zurb Foundation 框架一起使用。我正在尝试使用 AJAX 在显示框（花式弹出窗口）中加载数据。诀窍是，我不只是加载内部 html 内容，而是加载 HTML 本身。我的意思是，我希望控制器中的函数返回 php文件到ajax调用函数，其内容将显示在弹出窗口中。我的代码是

Ajax 函数调用

```
function ajaxfunct() {
            $.ajax({
                type: "POST",
                url: "welcome/test",
                data: { name: "Jigar", location: "jain" }
            }).done(function( html ) {
                $("#tagUser").append(html);

            });
        } 
```

我的控制器代码是

```
public function test() {
    $data['name'] = $_POST['name'];
    $data['location'] = $_POST['location'];
    $this->load->view('index', $data);
    echo 'WHAT SHUD I ECHO HERE ?'
} 
```

我知道我的控制器代码的最后两行是错误的。我只是不知道如何从视图文件夹中获取 php 文件，对其进行处理并将其作为预处理的 html（字符串）传递给 ajax。

我不是在寻找完整的代码..只是参考一些功能或在线教程会很棒..thanx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:28:19.243

您已经从 Controller 中的 views 文件夹中获取了 PHP 文件。

线

```
$this->load->view('index', $data); 
```

加载 /application/views/index.php 文件并使用 $data 数组中的数据对其进行处理。

因此，对于您的 AJAX 调用，您可以创建一个与 index.php 不同的视图文件，例如 test.php，其中包含 AJAX 的正确 HTML，并使用以下行调用它

```
$this->load->view('test', $data); 
```

并跳过 ECHO 部分...

# objective-c - 将具有目标 c 的文件复制到具有不同凭据的 smb 共享？

> ID：13394540
> 
> 赞同：1
> 
> 时间：2012-11-15T09:25:10.290
> 
> 标签：objective-c, macos, file, copy, smb

我目前正在使用 FSCopyObjectAsync 来复制文件。我想做的是将文件复制到共享中，但使用不同的凭据。一种方法是我可以挂载特定的共享，但我不希望用户看到挂载的驱动器。那么是否可以在不挂载的情况下访问 smb 共享？提前致谢。

# android - Android：点击一张图片切换到另一张图片

> ID：13394553
> 
> 赞同：0
> 
> 时间：2012-11-15T09:26:05.497
> 
> 标签：android

在布局和代码方面，什么是完成以下任务的好方法：

*   在屏幕上显示一幅或多幅可点击的图像。
*   默认情况下，图像是默认图像（duh）
*   单击它们时，它们会变为指定的图像
*   再次点击时，变回默认图片

我无法在 xml 布局文件中设置所有图像，因为我必须能够在单击时以编程方式设置和更改图像，并记录显示的图像等。

如果有人想知道：是的，这应该是一个简单的“记忆”游戏，我在其中显示 x 个图像，然后单击其中两个以显示它们，如果它们相同则给出结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:29:33.920

我建议您使用 ImageSwitcher 作为视图，并在 ImageSwitcher 上使用 setOnClickListener，以便在单击操作时应用图像更改。

# oracle - 选择常数值

> ID：13394555
> 
> 赞同：0
> 
> 时间：2012-11-15T09:26:23.117
> 
> 标签：oracle, select, constants

我有两个观点：

1.  包含所有项目（汽车）价格总和的视图`VIEW5_SUMA`，它是一行，并且它是恒定的我需要“加入”
2.  `VIEW4_SUMA_AUTA`包含特定项目（汽车）所有收入总和的视图

`SQL> SELECT * FROM VIEW5_SUMA ;`

```
CELKOVA_TRZBA
-------------
         5806

SQL> SELECT * FROM VIEW4_SUMA_AUTA ;

TRZBA_AUTA    ID_AUTO
---------- ----------
       360          1
       ...        ... 
```

我需要创建另一个视图，它将包含每个项目的收入百分比。问题是，我不知道如何将这一行从`VIEW5_SUMA`（总收入的常数）“加入”到我的选择中，以便我可以用它来计算。

这是我到目前为止得到的，但它返回错误：

```
CREATE VIEW VIEW6 AS
SELECT
  t1.typ,
  t1.specifikacia_typu,
  t1.SPZ,
  t2.trzba_auta/(t3.celkova_trzba/100) AS percenta
FROM AUTA t1, VIEW5_SUMA t3
JOIN VIEW4_SUMA_AUTA t2 ON t1.id_auto = t2.id_auto
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:54:48.040

您看到的问题是由于`JOIN`绑定比逗号更紧密，因此您编写的内容相当于

```
FROM AUTA t1, (VIEW5_SUMA t3 JOIN VIEW4_SUMA_AUTA t2 ON t1.id_auto = t2.id_auto) 
```

看到`t1`括号内没有表格，这是行不通的。

这意味着您所要做的就是更改顺序，以便绑定按您的意愿工作：

```
CREATE VIEW VIEW6 AS
 SELECT
  t1.typ,
  t1.specifikacia_typu,
  t1.SPZ,
  t2.trzba_auta/(t3.celkova_trzba/100) AS percenta
 FROM AUTA t1 JOIN VIEW4_SUMA_AUTA t2 ON t1.id_auto = t2.id_auto,
 VIEW5_SUMA t3
 ; 
```

或者，您可以使用`CROSS JOIN`与逗号相同的 a ，因为它会产生笛卡尔积或变为`inner join`if`where`子句。

```
 FROM AUTA t1 CROSS JOIN VIEW5_SUMA t3 JOIN VIEW4_SUMA_AUTA t2 ON (...)

 FROM AUTA t1 JOIN VIEW4_SUMA_AUTA t2 ON (...) CROSS JOIN VIEW5_SUMA t3 
```

这`CROSS JOIN`是 a`JOIN`所以你有预期的括号`((CROSS JOIN) JOIN )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:31:23.383

哦，我在发布我的问题后找到了一种方法。如果我`JOIN`根本不使用，而是指定多个表，`FROM`然后用`WHERE`它连接表。

```
SELECT
  t1.typ,
  t1.specifikacia_typu,
  t1.SPZ,
  t2.trzba_auta/(t3.celkova_trzba/100) AS percenta
FROM AUTA t1, VIEW4_SUMA_AUTA t2, VIEW5_SUMA t3
WHERE
  t1.id_auto = t2.id_auto
; 
```

但我仍然很好奇是否有办法做到这一点`JOIN`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:56:08.340

“返回错误”对诊断问题没有帮助。我猜它说这`t1.id_auto`是一个无效的标识符。

混合[旧的连接语法](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries006.htm)（子句中的多个逗号分隔的表和`from`子句中的连接条件`where`）和[“新”语法](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#i2080416)（`join`and `on`）会令人困惑并且并不总是有效；无论如何，我建议始终使用“新”语法。

您可以使用 来执行此操作`join`，但您只能使用该表单。`t1`由于和之间没有连接条件`t3`，因此您需要一个[`cross join`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#sthref6758). 这会产生两个表的笛卡尔积，这通常不是您想要的，但在这种情况下，由于其中一个表只有一行，它似乎是合适的。

```
CREATE VIEW VIEW6 AS
SELECT
  t1.typ,
  t1.specifikacia_typu,
  t1.SPZ,
  t2.trzba_auta/(t3.celkova_trzba/100) AS percenta
FROM AUTA t1
CROSS JOIN VIEW5_SUMA t3
JOIN VIEW4_SUMA_AUTA t2 ON t1.id_auto = t2.id_auto 
```

在视图之上构建视图并不总是一个好主意，并且可能会导致性能问题。

# java - QueueBrowser 不返回所有消息

> ID：13394556
> 
> 赞同：8
> 
> 时间：2012-11-15T09:26:26.267
> 
> 标签：java, jms, activemq, message-queue

我列出了来自每个队列的队列和消息。以下是我的代码。但是，QueueBrowser 无法正确检索消息。

假设我有一个名为 TestQueue 的队列，其中包含 1000 条消息。

我第一次运行我的程序时它只显示 200 条消息。第二 - 400 第三 - 600 第四 - 800 第五 - 1000

你能告诉我如何解决这个问题吗？

```
ConnectionFactory out = new ActiveMQConnectionFactory("tcp://localhost:61616?jms.prefetchPolicy.all=10000");
ActiveMQConnection connection = (ActiveMQConnection) out.createConnection();

connection.start();
Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

Set<ActiveMQQueue> amqs = connection.getDestinationSource().getQueues(); 
Iterator<ActiveMQQueue> queues = amqs.iterator(); 

while ( queues.hasNext() ) 
{ 
    ActiveMQQueue queue_t = aqueues.next(); 
    String q_name = queue_t.getPhysicalName();
    List<ActiveMQMessage> msgList = ((ActiveMQSession) session).getUnconsumedMessages();

    System.out.println( "\nQueue = " + q_name);

    QueueBrowser queueBrowser = session.createBrowser(queue_t);
    Enumeration e = queueBrowser.getEnumeration();

    int numMsgs = 0;
    while(e.hasMoreElements()) 
    {
         Message message = (Message) e.nextElement();
         numMsgs++;
    }
    System.out.println("No of messages = " + numMsgs);
    queueBrowser.close();
}                    
session.close();
connection.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:55:07.427

从`javax.jms.QueueBrowser`API：

> 扫描完成时，邮件可能会到达并过期。JMS API 不要求枚举的内容是队列内容的静态快照。这些更改是否可见取决于 JMS 提供程序。

您是否尝试过指定[预取策略](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T14:23:02.480

只需使用 JMX 连接到 Broker（例如使用 jconsole）。在特定队列设置 MaxPageSize 属性超过 200 时，您可以列出更多消息。

# linux - CentOS Subversion，基本身份验证密码文件不起作用

> ID：13394558
> 
> 赞同：3
> 
> 时间：2012-11-15T09:26:30.360
> 
> 标签：linux, apache, svn, centos, .htpasswd

所以我安装了 SVN 并将 HTTPD 用于远程存储库。一切正常，直到我使用密码文件。这根本行不通。Apache 的 error_log 说

`(13) Permission Denied: Could not open password file`

我已将 passwd 文件的 chmod 设置为 777 并将 chown 设置为 apache，我还将 repo 和 passwd 文件的父文件夹设置为 chown apache 和 chmod 777 ...

我不知道这是一个权限问题了......请帮助！

### 更新

我从中取出了 SVN，并在我的一个域上实现了标准的基本身份验证

```
<VirtualHost *:80>
    ServerName domain.com
    ServerAlias www.domain.com
    DocumentRoot "/var/www/www.domain.com/public_www"
    <Directory "/var/www/www.domain.com/public_www">
        Options -Indexes
        Order allow,deny
        Allow from all
        AllowOverride All
        AuthType Basic
        AuthName "Basic Authentication"
        AuthUserFile /path/to/authfile.htpasswd
        Require valid-user
    </Directory>
</VirtualHost> 
```

我像这样创建了密码文件

```
htpasswd -cm /path/to/authfile.htpasswd username
password (and retype) 
```

最后

```
service httpd restart 
```

瞧，auth 提示符像以前一样工作，但用户名和密码却没有！这很令人沮丧，我已经仔细检查了密码文件和父文件夹的所有权限、所有者等，但我仍然得到

```
(13) Permission Denied: Could not open password file 
```

在 Apache 的 error_log 中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-09T20:28:45.877

如果您使用的是 Red Hat Enterprise Linux/Centos/Fedora 系统，并且在 apache 拥有的 /var/www/html 目录之外创建 htpasswd 文件，那么您还会遇到 htpasswd 文件的 SELinux 上下文/标签问题. 您可以使用传递给 ls 命令的 -Z 选项检查 htpasswd 的当前上下文/标签。

```
ls -Z 
```

htpasswd 文件的类型应该是**httpd_sys_content_t**。你可以用这个命令改变它：

```
chcon -t httpd_sys_content_t htpasswd 
```

有关为 SELinux 重新标记文件的更多信息：

[https://wiki.centos.org/HowTos/SELinux#head-0f6390ddacfab39ee973ed8018a32212c2a02199](https://wiki.centos.org/HowTos/SELinux#head-0f6390ddacfab39ee973ed8018a32212c2a02199)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T22:41:31.150

也许在我脸上有点明显的*耳光：*

当我将密码文件放在 /var/www/svn-auth/*.htpasswd 中时，我之前一直将 /path/to/authfile.htpasswd 放在 apache 的主文件夹 /var/www 之外。

无论 chown （apache 拥有 /svn-auth 和 .htpasswd 文件），它都可能被拒绝，因为 apache（作为用户）的主文件夹很可能是 /var/www/* 并且被拒绝访问它之外.. .

学过的知识

# c++ - 使用 WinAPI 在运行时将字符串添加到资源

> ID：13394561
> 
> 赞同：1
> 
> 时间：2012-11-15T09:26:43.537
> 
> 标签：c++, winapi

是否可以在运行时将字符串添加到 STRINGTABLE 资源？我有一个连接到主机应用程序的插件，它需要使用 LoadString 方法传递的字符串。就我而言，我只能在运行时准备数据（通常在启动时准备一次）。我已经在准备 DLGTEMPLATE 结构，是否有类似的方法来处理 STRINGTABLE？还有其他解决方案吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T08:37:45.927

正如 enhzflep 建议的那样，我更新了一个单独的 PE 文件。需要一些尝试和错误才能正确更新字符串，所以我在这里发布我的解决方案。

注意事项：我正在按顺序编写字符串。用 16 个字符串的块更新资源很重要，因此编写具有预定义 ID 的字符串将涉及编写一些空字符串。

```
const int RESOURCE_STRING_START = 1 << 14; /// custom start ID value
std::vector<std::wstring> m_resource_strings;

/// add strings ///

HANDLE lib_handle = BeginUpdateResource( library_name, TRUE);

size_t string_section_size = 0;
for (int i = 0; i < m_resource_strings.size(); i++)
    string_section_size += m_resource_strings[i].length() * sizeof(WCHAR);

HGLOBAL heap = GlobalAlloc(GMEM_ZEROINIT, string_section_size); 
if (!heap) {
    return false;
}
/// Create temporary memory pool ///
WORD* heap_start = (WORD*)GlobalLock(heap);
if (!heap_start) {
    return false;
}
WORD* pos = NULL;

for (int i = 0; i < m_resource_strings.size(); i+=16)
{
    pos = heap_start;
    const int section = 1 + ((RESOURCE_STRING_START + i) >> 4);
    for (int j = 0; j < 16; j++)
    {
        if ( i+j < m_resource_strings.size() ) {
            std::wstring& str = m_resource_strings[j+i];
            *pos++ = str.length(); /// Write string length
            memcpy( pos, str.data(), str.length() * sizeof(WCHAR) ); /// Copy string
            pos += str.length();
        }
        else *pos++ = 0;
    }
    if (!UpdateResource(lib_handle, RT_STRING, (LPTSTR)(ULONG_PTR)section, MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), heap_start, DWORD(pos) - DWORD(heap_start) ))
    {
        GlobalFree(heap);
        return false;
    }
}
GlobalFree(heap);

if (!EndUpdateResource( lib_handle, FALSE )) {
    return false;
} 
```

# ios - iOS：自定义 UITextField 的 inputView 大小

> ID：13394564
> 
> 赞同：5
> 
> 时间：2012-11-15T09:27:01.600
> 
> 标签：ios, ipad, uitextfield, inputview

我需要自定义`UITextField's` `inputView`. 分配给我的自定义视图`inputView`的大小已经是`260x220`260x768 `inputView`( `Portrait`) 和 260x1024( `Landscap`)。我尝试改变`inputView's` `Frame`但仍然没有改变。无论如何我可以修改`UITextField's` `inputView` `Frame`它只占用底部屏幕的某些空间吗？

```
textField.inputView = numPadViewController.view;
[textField.inputView setFrame:CGRectMake(0, 0, 260, 220)]; 
```

[编辑]

从此[，](https://stackoverflow.com/questions/6042060/custom-keyboard-inputview-how-to-change-the-keyboard-size)我也尝试了以下操作，但没有成功！

```
numPadViewController.view.autoresizingMask = UIViewAutoresizingNone;
textField.inputView = numPadViewController.view; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:10:12.570

你用笔尖吗？确保笔尖中的框架设置正确。此外，您不能设置`inputView`. 您只能在`view`将其`inputView` *设置*为`inputView`. 否则我需要查看更多代码。

此外，最好使`inputView`屏幕具有相同的宽度（768 纵向，1024 横向）。您仍然可以将视图居中，并在两侧留出透明空间。希望有帮助！

# c# - IDataErrorInfo - 它是如何工作的

> ID：13394566
> 
> 赞同：4
> 
> 时间：2012-11-15T09:27:15.367
> 
> 标签：c#, wpf, mvvm

昨天，我问了一个关于 MVVM 验证的问题，有人回复了一段代码：[https ://stackoverflow.com/a/13387724/](https://stackoverflow.com/a/13387724/)

我试图理解这段代码，但我只是不理解索引器部分。有人可以向我解释该代码是如何工作的吗？使用 IDataErrorInfo 时究竟何时调用 get/set，为什么他在 get-part 中返回 this[columnName]？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:31:20.650

我写这篇文章时，他的代码有问题。`get`如果调用， ter 会抛出 StackOverflowException 。

当绑定配置为执行验证时

```
<TextBox Text="{Binding Hurr, ValidatesOnDataErrors=true}" /> 
```

[如果数据源对象实现了IDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx) ，绑定系统将使用该接口的两种方法来执行验证。

接口的索引器接受一个字符串，该字符串是要验证的属性的名称，并返回一个字符串，该字符串是该属性当前值的验证错误（如果有）。

这方面的一个例子可能是......

```
var pet = new Pet();
var error = pet["Name"]; //"Your pet has no name!"
pet.Name = "Fido";
error = pet["Name"]; //"Come on, how unoriginal is that?" 
```

他的特定代码示例正在处理 getter/setter 类型的验证。这不是一个如何实现的通用示例`IDataErrorInfo`，但更有可能是通过他自己的个人风格从他自己的个人代码中剪下。大多数人都有自己的实现方式，但 9/10 次它会是一个`switch`声明，属性名称都是 individual `case`s。

# android - 如何在 SlidingMenu 上放置一个 ActionBar（就像在 Evernote 应用程序中一样）？

> ID：13394568
> 
> 赞同：8
> 
> 时间：2012-11-15T09:27:29.047
> 
> 标签：android, user-interface, android-actionbar

![在此处输入图像描述](../Images/835a2144f1b4636d992f6029ffc8a0be.png)

我想制作像 Evernote 中一样具有 ActionBar 的幻灯片菜单。在这个应用程序中，似乎它有 2 个动作条（我不确定）。一个在主菜单中，另一个在滑动菜单中。

**反正有没有像这样构建2个ActionBars？**或者它只是一个类似于 ActionBar 外观的布局安排。

感谢您的所有帮助，并为我的英语感到抱歉。

附言。我使用 ActionBarSherlock 和 SlidingMenu 来实现这一点，但我找不到像在 Evernote 中那样的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T10:51:12.113

你写了：

> 我使用（...）SlidingMenu

如果`SlidingMenu`您的意思是[Jeremy Feinstein](https://github.com/jfeinstein10)的[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)，并且您想继续使用此菜单库，则不能使用 'real' `ActionBar`，因为`SlidingMenu's`menu 实现为 a ，在库中`Fragment`命名。`SlidingMenuFragment`A`Fragment`无法容纳`ActionBar`.

您可以创建一个看起来像`ActionBar`. 在`SlidingMenuFragment's`您设置布局文件时，如下所示：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ViewGroup viewGroup = (ViewGroup) inflater.inflate(R.layout.sliding_menu,null); 
```

例如，在菜单的布局文件（此处称为`sliding_menu.xml`）中，您可以通过将其嵌套在顶部的布局中来使其`SearchView`看起来像在一个 `ActionBar`然后，将该布局的背景颜色/可绘制对象设置为与列表其余部分不同的颜色。请参见下面的示例（我知道嵌套 LinearLayouts 并不漂亮......只是一个使用示例应用程序中的快速示例来`LinearLayout`理解`SlidingMenu`这个想法）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#333333" >

        <SearchView
            android:id="@+id/searchView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:paddingLeft="@dimen/list_padding"
        android:paddingRight="@dimen/list_padding" />

</LinearLayout> 
```

这看起来像：

![在此处输入图像描述](../Images/e5b1ea2042cb988027ce9467b4677928.png)

打开时，右侧的浅灰色框是“真实”的一部分`ActionBar`。

*编辑：*您在评论中写道：

> searchView 示例有效 我无法让下拉菜单以相同的方式工作。

EverNote 应用程序中的下拉菜单看起来像是使用 Holo 主题实现的[`Spinner`](http://developer.android.com/reference/android/widget/Spinner.html)。Android Developers对如何向布局添加 a 进行了详尽的[介绍。](http://developer.android.com/guide/topics/ui/controls/spinner.html)`Spinner`Spinner 的逻辑/java 代码将被放入`SlidingMenuFragment`（如果您使用`SlidingMenu`库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:16:53.120

好的，我在 Gunnar Karlsson 的帮助下成功做到了，他把我推向了正确的方向，而不是 SearchView

我像这样实现了一个 ImageButton：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#333333" >

        <ImageButton
                android:layout_width="wrap_content" 
                android:layout_height="60dp" 
                android:src="@drawable/ic_launcher"
                android:onClick="showPopup" />

</LinearLayout>

<ListView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@android:id/list"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:paddingLeft="@dimen/list_padding"
   android:paddingRight="@dimen/list_padding" />

</LinearLayout> 
```

在我的 mainActivity 中，我只是从谷歌示例代码中提取了这个来创建弹出菜单：

```
public void showPopup(View v) {
    PopupMenu popup = new PopupMenu(this, v);
    MenuInflater inflater = popup.getMenuInflater();
    inflater.inflate(R.menu.actions, popup.getMenu());
    popup.show();
} 
```

它奏效了。谢谢贡纳尔卡尔森。

# cmake - 使用 cmake 处理 pascal 源文件

> ID：13394572
> 
> 赞同：4
> 
> 时间：2012-11-15T09:27:40.053
> 
> 标签：cmake, pascal, freepascal

有没有办法告诉 CMake 使用标准 add_executable 和 target_link_libraries 调用（如 c 和 c++ 项目）编译 .pas 源文件？

目前我们只是列出文件并使用 add_custom_command/add_custom_target 并手动设置链接器标志，但如果有更多集成的东西会很好。

源文件：[http ://code.google.com/p/hedgewars/source/browse/hedgewars/CMakeLists.txt](http://code.google.com/p/hedgewars/source/browse/hedgewars/CMakeLists.txt)

# objective-c - 我正在尝试制作一个类似于查找我的朋友的 iphone 应用程序我如何在地图上找到我朋友的位置？

> ID：13394575
> 
> 赞同：0
> 
> 时间：2012-11-15T09:27:52.363
> 
> 标签：objective-c, ios, cocoa, core-location

我正在尝试制作像谷歌纬度这样的 iphone 应用程序或找到我的朋友。我可以找到我当前的位置，但我如何找到我的朋友？还有我如何在地图上显示那个位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:53:34.993

您可以参考[此处](https://stackoverflow.com/questions/4152003/how-can-i-get-current-location-from-user-in-ios)了解有关获取用户当前位置的信息。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    NSLog(@"OldLocation %f %f", oldLocation.coordinate.latitude, oldLocation.coordinate.longitude);
    NSLog(@"NewLocation %f %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude);
} 
```

您必须在应用程序运行时存储每个设备的位置的网络服务，然后从您的应用程序向网络服务发送查询，从那里您将找到使用该应用程序的设备列表。

这不是一个非常优雅的解决方案，因为用户总是在轮询服务器，并且 Web 请求失败的频率可能比您想要的要高。我听说过套接字编程，用户与服务器保持实时连接，当服务器发生变化时，用户会收到通知，这听起来更像是正确的方法，但听起来更难：P

[在此处](https://stackoverflow.com/questions/12155753/any-demo-example-multiple-map-annotation-using-plist/12156477#12156477)查看我的答案以在 MAP 上显示多个注释。

# android - 从 Facebook 获取相册

> ID：13394577
> 
> 赞同：3
> 
> 时间：2012-11-15T09:27:55.153
> 
> 标签：android, facebook

我尝试使用以下代码从 facebook 获取所有专辑 ID。但只有前 25 张专辑被退回。我错过了什么？

```
response = facebook.request("me/albums");
json = Util.parseJson(response);
albums = json.getJSONArray("data");
for (int i =0; i < albums.length(); i++) {
    JSONObject album = albums.getJSONObject(i);
    String album_name = album.getString("name");
    String album_id = album.getString("id");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:59:49.913

> 但只有前 25 张专辑被退回。我错过了什么？

是的 - 25 是`limit`此类请求的默认参数值。

要么使用分页链接检索下一个 25 等，要么自己设置更高的限制。

[https://developers.facebook.com/docs/reference/api/pagination/](https://developers.facebook.com/docs/reference/api/pagination/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:46:43.600

我使用以下方法来获取专辑列表的其余部分。

```
next_page_URL = null; 
next = json.getJSONObject("paging"); 
next_page_URL = next.getString("next"); 
response = facebook.request("me/albums&"+next_page_URL); 
```

# javascript - 使用 javascript 验证路径

> ID：13394586
> 
> 赞同：0
> 
> 时间：2012-11-15T09:28:36.153
> 
> 标签：javascript

我要求用户输入控制器文件的路径，例如

```
abc/cab
cde/ter/tyu 
```

我无法使用它来验证它

```
var regexString =/^([a-zA-Z\]+)*$/; 
```

你能帮我纠正一下吗？`abc//text`类似and`abc/text/`和`abc/text//`and 的文本`/abc/text`也应该返回 false。开头和结尾也不应该有斜线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:33:20.217

这应该可以正常工作：

```
var regexString =/^[a-zA-Z]+(\/[a-zA-Z]+)*$/; 
```

并且会匹配

```
abc
abc/cab
cde/ter/ger 
```

但不是

```
/abc/sucks
abc//text
abc/text/
abc/text// 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:38:34.303

试试这样：

```
var regexString = /^([a-z]+\/)*[a-z]+$/i; 
```

将为：

```
abc/cab
abc/cab/bla 
```

但不会：

```
abc/cab/
/abc/cab
/abc/cab/
abc//sdgf
abc//sdgf/
/abc//sdgf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:54:42.343

这是一个正则表达式，它将与您描述的参数匹配一个字符串：

```
/^([a-zA-Z]+\/[a-zA-Z]+)+$/ 
```

这是一个例子：

```
var r = /^([a-zA-Z]+\/[a-zA-Z]+)+$/;
r.test('/ad/sd'); //false
r.test('as//sd'); //false
r.test('as/sd/'); //false
r.test('as/sd'); //true 
```

# android - 如果我们手动强制停止应用程序，推送通知不起作用

> ID：13394587
> 
> 赞同：2
> 
> 时间：2012-11-15T09:28:40.600
> 
> 标签：android, push-notification, xtify

我已将我的应用通知代码从 C2DM 移至 GCM。在这个我有一个通知收件箱。一切都按预期工作。但通知在以下情况下不起作用：

我已经安装了应用程序。如果我发送通知，它也会出现在通知栏和收件箱中。如果我从设置中强制关闭应用程序。现在，如果我们尝试再次向设备发送通知，那么我们不会在通知栏中收到通知，但它会出现在通知收件箱中。

注意：我使用的是安卓 2.3。
对于 ICS 和 Jelly Bean：我在这篇[文章](https://groups.google.com/group/android-gcm/tree/browse_frm/month/2012-08/7e74aab31da818e1?rnum=11&lnk=nl&pli=1) 中读到，如果您从设置中强制停止应用程序，那么您将不会收到通知。这里是同样的问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T14:15:11.020

是的，这是真的。如果您强制停止应用程序，则无法接收到消息（与 iOS/APNS 不同）。当用户重新打开应用程序或用户重新启动他/她的设备时，Xtify 服务将重新启动并收到消息。

# visual-studio-lightswitch - Lightswitch 2012，使用 EF 查询未附加的数据源

> ID：13394590
> 
> 赞同：0
> 
> 时间：2012-11-15T09:29:03.897
> 
> 标签：visual-studio-lightswitch

我有`LightSwitch project`一个**附加的数据库**，但我想用来自数据源的数据填充我的一个屏幕的控件`can't be attached`。

要连接此数据源，我必须使用`value of my model as Connection string`.

哪个是最好的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:42:02.310

为什么不只使用模型层，并使用 RIA 服务进行连接？

[http://lightswitchhelpwebsite.com/Forum/tabid/63/aft/89/Default.aspx](http://lightswitchhelpwebsite.com/Forum/tabid/63/aft/89/Default.aspx)

# web-services - 我们是否需要安装网络服务器才能让网络服务正常工作？

> ID：13394592
> 
> 赞同：1
> 
> 时间：2012-11-15T09:29:27.007
> 
> 标签：web-services, web, webserver

我将拥有一个软件，它将在服务器端为我提供有关移动车辆的信息，我需要根据需要将此信息传递给客户端计算机。

将有一个网站将充当服务器，而另一个网站将充当客户端。客户端网站将要求来自服务器网站的数据。

从这里：[https ://stackoverflow.com/a/2849683/462608](https://stackoverflow.com/a/2849683/462608)

> 由于协议可能不是 HTTP，您可以通过邮件或其他协议提供 WebServices，并且您不需要 Web 服务器。

我要求对上述报价作出解释。在我的情况下，我需要一个网络服务器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:50:39.267

有一堆[webservice 协议](http://en.wikipedia.org/wiki/List_of_web_service_protocols)，其中一些可能使用，一些可能不用`http`作[传输层](http://en.wikipedia.org/wiki/Web_services_protocol_stack)。何时`http`使用 - 您需要在服务的服务器端使用网络服务器，并使用网络浏览器作为客户端。如果传输不是`http`，则需要其他类型的服务器和其他客户端，例如邮件服务器和邮件客户端，以防运行服务超过`smtp`。

# php - 在单个页面中列出每个类别标题下的产品

> ID：13394599
> 
> 赞同：-1
> 
> 时间：2012-11-15T09:29:49.080
> 
> 标签：php, mysql, arrays, select, categories

我有两个表第一个是**类别**，第二个是**产品**。Categories 表包含`cat_id, cat_name, Cat_desc.` Products 表包含`product_id, product_name, Product_desc and cat_id`

我想将所有类别显示为标题，并在每个类别标题下仅列出 4 个相关产品。

例如：

```
Category1
 Product 1, Product 2, product 3

Category 2
  Product 4, product 5 
```

我该如何编写这个脚本。我是新手请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:44:32.497

好的，我认为您的问题可以。试试这个...

```
$sql = "SELECT cat_id, cat_name FROM  categories ";
$query = mysql_query($sql);
while($result = mysql_fetch_array($query)){
   echo $result['cat_name'];
   $sql1 = "SELECT * FROM products WHERE cat_id=".$result['cat_id'];
   $query1 = mysql_query($sql1);
   while($row  = mysql_fetch_array($query1)){
      echo $row['product_name'];
   }
} 
```

并参考这个[http://php.net/manual/en/book.mysql.php](http://php.net/manual/en/book.mysql.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:37:18.600

在 Nytram 的帖子的帮助下，我只是更改了代码。所以这个答案 99% 归功于 Nytram。

```
 $sql = "SELECT cat_id, cat_name FROM  categories ";
$query = mysql_query($sql);
while($result = mysql_fetch_array($query)){
   echo $result['cat_name']; 
```

更改后的行是：

```
$sql1 = "SELECT * FROM products WHERE cat_id='".$result['cat_id']."' LIMIT 0,10"; 
```

然后使用相同的代码

```
 $query1 = mysql_query($sql1);
       while($row  = mysql_fetch_array($query1)){
          echo $row['product_name'];
       }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:34:43.737

试试这个 ：：

```
Select * from 

categories c left join products p on (p.catId = c.catId)

order by c.catId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:37:01.687

你可以参考这个教程你需要为此做一个递归**函数**
我称之为这个***类别树***

[http://codeassembly.com/How-to-display-inifinit-depth-expandable-categories-using-php-and-javascript/](http://codeassembly.com/How-to-display-inifinit-depth-expandable-categories-using-php-and-javascript/)

# android - 背景颜色图 Android

> ID：13394600
> 
> 赞同：0
> 
> 时间：2012-11-15T09:29:50.173
> 
> 标签：android, graph, background-color, achartengine

如何在 Android 中更改图形的背景颜色。含义：图表的背景是黑色的，图表本身是白色的，活动的背景也是白色的。好像没找到把黑改白的地方。。。

我可以更改图形本身的颜色，但不能更改显示它的背景

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:58:33.507

您可以使用以下方法更改颜色

```
renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.WHITE);
renderer.setMarginsColor(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:56:36.413

找到解决方案，不得不使用`mRenderer.setMarginsColor`感谢答案！

# iphone - 如何控制ScrollView，不再重复

> ID：13394604
> 
> 赞同：0
> 
> 时间：2012-11-15T09:30:01.210
> 
> 标签：iphone, ios, uiscrollview, scroll, scrollview

你知道吗，如何控制ScrollView，所以就不再赘述了。例如我有 5 张图片（如添加的图），它们应该从 1-5 可见，并且应该在最后一张图片之后立即停止，同时它应该能够向后滚动并在第一张图片之后立即停止。总而言之，它应该只能从 1-5 开始，而不会在第 5 张图片之后和第 1 张之前重复。

现在的问题是，它在第​​ 5 张之后滚动得更远，所以它再次从第 1 张图片开始，反之，当它滚动回第 1 张图片时，它会继续滚动到第 5 张，依此类推。

我用于此的代码是： [“InfinitePagingView”](https://github.com/caesarcat/InfinitePagingView/blob/master/Classes/InfinitePagingView.m/)页面！。

禁用滚动：

```
 scrollEnabled = NO; 
```

![在此处输入图像描述](../Images/4bbd34c6ba15f8655fce14c137991549.png)
我想知道的是，如果我能够在第五张图片之后立即停止滚动，但它应该只能在右侧进行。那么是否有任何代码，例如：“scrollEnable right = NO & scrollEnable left = NO”。如果没有，我可以使用哪个代码。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:34:30.867

所以你想要在右侧无限滚动，而不是在左侧？您需要自定义`InfinitePagingView`正在使用的 ,。查看代码，尤其是方法`scrollView:didScroll`并在左侧禁用它。

这不是默认行为，因此没有要设置的简单属性。但你不觉得这是一种奇怪的行为吗？如果您向右滚动并越过第 5 张图片，那么您又是第 1 张并且您不能再向左滚动？虽然你刚从那个地方来？

如果您不想要任何无限滚动，只需使用默认的滚动视图！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:26:25.623

我使用以下代码在 Scrollview 中显示 5 个 UIButtons，它可以根据需要使用。您可以将其用于 5 张图片检查它。

```
- (void)viewDidLoad 
 {

UIScrollView *scrollview = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 407, 320, 80)]; 
[self.view addSubview:scrollview];
int i;
int spacex = 5;
int spacey=5;
for ( i = 0; i <5; i++) 
{   
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    btn = [[UIButton alloc] initWithFrame:CGRectMake(spacex, spacey, 115, 45)];
    btn.backgroundColor = [UIColor greenColor]; 
    [btn setTitleColor: [UIColor blackColor] forState: UIControlStateNormal];
    spacex = spacex + 120;
    [scrollview addSubview:btn];
}
  scrollview.contentSize = CGSizeMake(scrollview.frame.size.height*(i+2) , scrollview.frame.size.height); 
 [super viewDidLoad];
} 
```

您可以根据您的要求更改它。希望它对您有用。谢谢。

# python - 与 Mturk 的 boto 连接错误

> ID：13394605
> 
> 赞同：1
> 
> 时间：2012-11-15T09:30:03.957
> 
> 标签：python, python-2.7, boto, mechanicalturk

我正在研究 boto 版本的 2.6.0 。我在连接到 mturk 时遇到问题。
我的代码是：

```
mturk_connection = MTurkConnection(aws_access_key_id=ACCESS_ID, aws_secret_access_key=SECRET_KEY, is_secure = True, host = HOST)
print mturk_connection.get_account_balance() 
```

我得到的错误信息是：

```
boto.mturk.connection.MTurkRequestError: MTurkRequestError: 200 OK  
<?xml version="1.0"?>
    <GetAccountBalanceResponse>

            <OperationRequest>
            <RequestId>06783745-3810-49d3-8235-d8a95f36b747</RequestId>
            <Errors>
                <Error>
                    <Code>AWS.BadClaimsSupplied</Code>
                    <Message>The specified claims are invalid.   Based on your request, your signature should be generated using the following string: ActionGetAccountBalanceAWSAccessKeyIdAKIAQEQC5M72KQQSignatureVersion1Timestamp2012-11-15T06:10:07ZVersion2012-03-25\.  Check to make sure your system clock and timezone is not incorrect.  Our current system time: 2012-11-15T06:10:07Z.  (1352959808079 s)</Message>        
                    <Data>
                            <Key>CustomerSignature</Key>
                            <Value>eMfIjDkM7v2/4fp4WqTOjtaFGDp1/Ydr2TTVV+oP5m0=</Value>
                            </Data><Data>
                            <Key>StringToSign</Key>
                                <Value>ActionGetAccountBalanceAWSAccessKeyIdAKIAJD3HEQEQC5M72KQQSignatureVersion1Timestamp2012-11-15T06:10:07ZVersion2012-03-25</Value>
                            </Data><Data>
                            <Key>SystemTime</Key>
                            <Value>2012-11-15T06:10:07Z</Value>
                    </Data>
            </Error>
        </Errors>
    </OperationRequest>

</GetAccountBalanceResponse> 
```

我试图找出错误的根源，但失败了。请提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:07:58.363

我猜你有较旧版本的 boto，其中 bug 修复 #1057 尚未更新。请检查第 525 行的**“init”**方法。如果找不到.. 再次从[github](https://github.com/boto/boto) 重新克隆 boto 存储库并使用命令安装 -

```
python setup.py install 
```

希望你的问题得到解决。

# youtube-api - YouTube 统计数据（API 调用）中的 FavoritesCount 和 YouTube Analytics Dashbord Favorites Metrics 之间的区别？

> ID：13394609
> 
> 赞同：0
> 
> 时间：2012-11-15T09:30:21.187
> 
> 标签：youtube-api, favorites

我正在使用以下 API 调用来检索 FavoritesCount ：-

[https://gdata.youtube.com/feeds/api/videos/](https://gdata.youtube.com/feeds/api/videos/) {$video_ID}?v=2&alt=json

我正在解析 API 的响应以从 statistics 检索 Favorites Count 。

但是，当我登录 YouTube 帐户并转到该视频的分析时：-

当我单击仪表板上的收藏夹时，我可以看到以下指标 -

*   收藏夹净变化
*   已添加收藏夹
*   收藏夹已删除

我对来自 Analytics Dashbord 的上述三个指标计数（值）和来自 API 调用（统计）的收藏夹计数感到困惑。我的问题是来自 Analytic DashBoard 的这些指标与来自 API 调用的 fav 计数之间有什么区别或联系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:33:24.620

在 Youtube 分析中：

favoritesAdded 用户将视频标记为收藏视频的次数。

favoritesRemoved 用户从他们最喜欢的视频列表中删除视频的次数。

收藏夹报告（以前是 Insight 社区的一部分）显示有多少用户收藏了您的内容、有多少用户将其从收藏夹中删除以及净变化的摘要。

[http://support.google.com/youtube/bin/static.py?hl=en&topic=1715146&guide=1714169&page=guide.cs](http://support.google.com/youtube/bin/static.py?hl=en&topic=1715146&guide=1714169&page=guide.cs)

在 YouTube 数据 API V2 中

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:statistics](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:statistics)

最爱计数：

favoriteCount 属性指定了将视频添加到他们喜爱的视频列表中的 YouTube 用户的数量。仅当标签出现在视频条目中时才指定 favoriteCount 属性。

# erlang - 如何检测erl_call断开连接

> ID：13394612
> 
> 赞同：0
> 
> 时间：2012-11-15T09:30:52.893
> 
> 标签：erlang, call, erl

我有一个由 erl_call 触发的 erlang 服务。erl_call 将进行一个长调用，例如 "gen_server:call(?SERVER, do, infinity)" 以等待结果。如果 erlang 服务关闭，则 erl_call 将返回。但是如果 erl_call 被中断（使用 CTRL-C），erlang 服务不会收到任何消息。

我检查了 appmon 和 pman。erl_call 启动的进程在 erl_call 断开后不会死掉。所以链接/监控到那个过程是行不通的。如何检测 erl_call 已断开连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:18:28.337

在您的 handle_call 函数中有第二个。参数来自 :: {pid(), tag()}

您可以在处理请求之前在handle_call 中调用monitor(process, FromPid)，以便在您的erl_call 节点断开连接时收到DOWN 消息。但请注意，除非您生成一个单独的进程或使用带有 gen_server:reply() 的延迟回复，否则您将无法在当前的 handle_call 完成之前处理 DOWN 消息。

例如：这是我们的 handle_call 子句：

```
handle_call(test, {From, _}=X, State) ->
    erlang:monitor(process, From),

    spawn(fun() ->
       timer:sleep(10000),
       io:format("### DONE~n", []),
       gen_server:reply(X, ok) end),

    {noreply, State}. 
```

接下来我们赶上DOWN：

```
handle_info(Info, State) ->
    io:format("### Process died ~p~n", [Info]),
    {noreply, State}. 
```

接下来我从命令行生成 erl_call： erl_call -c 123 -n test -a 'gen_server call [a, test, infinity]'

然后按 Ctrl-C

10 秒后在 gen_server 控制台中，我看到：

```
### DONE            
### Process died {'DOWN',#Ref<0.0.0.41>,process,<0.44.0>,normal} 
```

# montecarlo - .net 中用于蒙特卡罗模拟的可靠且快速的伪随机数生成器 (PRNG)

> ID：13394614
> 
> 赞同：4
> 
> 时间：2012-11-15T09:31:04.040
> 
> 标签：montecarlo, prng

我使用伪随机数生成器 (PRNG) 来蒙特卡罗模拟排队类型的系统。我使用 System.Random，因为它很快，但发现它在随后的抽奖之间有一些奇怪的相关性，这会干扰结果（它不够随机）。

现在我正在使用 Mersenne Twister (http://takel.jp/mt/MersenneTwister.cs)，它（到目前为止）已被证明对于我的目的来说足够随机。它慢了 50%，但这是我愿意为获得可靠结果而付出的代价。

.net 的什么 PRNG 最适合蒙特卡洛模拟？我正在寻找一个不太慢的可靠 PRNG。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T10:56:06.873

Mersenne Twister 已针对多个领域的蒙特卡洛模拟进行了优化，所以我会坚持使用那个。

如果性能是一个问题并且并行化不是一个选择，我会选择`XORshift`发电机。来自 Geroge Marsaglia 的一个非常好的（快速）随机数生成器。

这是[论文](http://www.jstatsoft.org/v08/i14/paper)：

如果您需要一个良好且快速的 PRNG 来进行某些 monte carlo 或其他统计模拟，而不是密码学，这可能是您最好的选择。

在这篇[SO 帖子](https://stackoverflow.com/questions/13213395/adjusting-xorshift-generator-to-return-a-number-within-a-maximum)中，您可以在 JAVA 中找到一个非常简单的端口，但应该不难重写或在网上找到 C# 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-15T11:55:26.813

你也可以使用面向 SIMD 的 Fast Mersenne Twister (SFMT)，它非常快，它使用 SIMD 指令并行生成随机数。可以在松本诚的主页上找到：

[http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/SFMT/index.html](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/SFMT/index.html)

# c# - 使用“mailto”打开客户端邮件 Outlook 仅在调试模式下工作，但在部署到“localhost”后不起作用

> ID：13394620
> 
> 赞同：1
> 
> 时间：2012-11-15T09:31:27.010
> 
> 标签：c#, asp.net, email, smtp, mailto

您好，这是我一段时间以来面临的问题。我不明白为什么，但是在我的帖子 localhost 上部署了我的 Web 应用程序后，打开电子邮件客户端不起作用。但是，一切都在 Visual Studio 的调试模式下工作！

预先感谢您的帮助;-）

这是我的简单代码：

```
try
{
    string dataBaseName = string.Empty;
    string serverName = ttbx_ServerName.Text;
    //get item from radcombobox to make the body message
    foreach (RadComboBoxItem item in cbx_DbName.Items)
    {
        if (item.Checked)
        {
            dataBaseName += "[#] : " + item.Text + "\n";
        }
    }

    string Body = "Last name: " + ttbx_YourName.Text + "\nFirst name: " + ttbx_YourFirstName.Text + "\nServer Name: " + serverName + "\nDataBase(s) name: \n" + dataBaseName + "\nSID: " + getMd5Hash(ttbx_sidSqlServer.Text);
    string command = "mailto:register@arms.ch?subject=A.R.M.S%20Customer%20Key%20Request&body=" + Body.Replace("\n", "%0D%0A");
    Process.Start(command);
}
catch (Exception)
{
    lbl_Error.ForeColor = System.Drawing.Color.Red;
    lbl_Error.Text = "No smtp mail client found , please send manually the informations";
    lbl_Error.Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:04:56.820

您无法在客户端上执行进程 (Process.Start)，因为它将通过 Web 界面。它在调试中工作，因为它在您的本地计算机上启动进程，但不适用于“真实”客户端。

相反，您必须在浏览器中显示一个 mailto 链接，如下所示：

```
<a href="mailto:admin@domain.com?subject=" + subjectFromCode + " id="email-link">Send Email</a> 
```

**编辑**

如果你想以编程方式运行它，你可以通过 jquery 来做：

```
$(document).ready(function(){
   $("#email-link").click();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:40:08.933

部署后，Process.Start 将尝试在 IIS 进程正在调整的任何帐户的用户帐户下运行电子邮件客户端。这很可能与登录的用户帐户不同，因此您不会看到电子邮件客户端运行。

老实说，我不完全确定您为什么要尝试从 Web 应用程序运行电子邮件客户端，我正在努力了解它是如何工作的。

如果您希望网站用户看到电子邮件客户端正在运行，您需要在客户端的实际网页中使用 mailto HTML 元素。

使用 asp.net 这可能是这样的控件

```
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl = "" Text = ""></asp:HyperLink> 
```

然后在后面的代码中，在 PageLoad 中，您可以使用所需的电子邮件地址、主题和正文设置 NavigateUrl。

# facebook - 作为 FB 页面发布不起作用

> ID：13394623
> 
> 赞同：1
> 
> 时间：2012-11-15T09:31:33.850
> 
> 标签：facebook, api, post, sdk

我使用 wordpress 社交登录插件登录我的页面。它也可以使用 fb 页面登录，但如果我想分享（作为用户它工作正常）它不起作用我异步加载 SDK 并使用 JS SDK 发布如下：

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        FB.api('/me/feed', 'post', {
            link: MYLINK
        }, function(response) {
            if (!response || response.error) {
               jQuery('#warning').html(errorwarning);
            }
        else {
           alert('response.id')
        }
    else
    ...
    ...
    ... 
```

我得到了帖子的 ID 作为响应，但是 FB 页面墙上没有帖子以用户身份登录它可以工作。我添加了这些权限：publish_stream、manage_pages 和offline_access。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:55:09.830

你必须使用你的页面 ID 而不是我

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        FB.api('/'+page_id+'/feed', 'post', {
            link: MYLINK
        }, function(response) {
            if (!response || response.error) {
               jQuery('#warning').html(errorwarning);
            }
        else {
           alert('response.id')
        }
    else
    ...
    ...
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T07:10:20.567

您的回答只会让用户以“用户”而不是“页面”的身份发布到 FB 页面。

我认为问题是“如何发布为 PAGE”

# android - 为什么服务会在 ICS 上销毁，而不是以前的版本？

> ID：13394624
> 
> 赞同：0
> 
> 时间：2012-11-15T09:31:39.047
> 
> 标签：android, service

我编写了一项服务来管理位置问题。它完美地在 2.3.3 (Galaxy S2) 上运行，但是当我在 ICS (Galaxy s3) 上运行应用程序时，会调用 onDestroy 方法。两者之间可能存在哪些差异？

**编辑1：下一** **行的问题。为什么或如何强制销毁服务？**

`_locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME, MIN_DISTANCE, this);`

**编辑 2（问题）**

1.  如果 gps 被禁用，它不会打开 gps 并转到 onDestroy
2.  如果网络提供商是选定的提供商，则再次转到 onDestroy。

我无法理解所有这些如何在 2.3.3 上正确运行？

```
 private void turnGPSOn(){
        String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

        if(!provider.contains("gps")){ //if gps is disabled
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider");
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3"));
            sendBroadcast(poke);
        }
    } 
```

getBestProvider()

```
private String getBestProvider(){
    //gps açıksa fine'a göre ara, değilse dandik providerı dön.
    return isGpsEnabled()==true ? _locationManager.getBestProvider(getFineCriteria(), false) : _locationManager.getBestProvider(getCoarseCriteria(), false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:36:23.153

它们之间最可能的区别是 RAM 管理，因为 ICS 占用更多 RAM 空间 Android 进程管理器会破坏一些服务，在您的情况下，您调用的服务就是其中之一。

# matlab - 使用matlab绘制和估计图像中线条的长度

> ID：13394625
> 
> 赞同：2
> 
> 时间：2012-11-15T09:31:43.653
> 
> 标签：matlab, line, draw

我想在灰度图像的两个边缘之间画一条线并估计它的长度。需要估计股骨头的直径。我尝试使用 houghlines 并最终绘制（见下文），但无法正确编写代码。我是matlab的新手，这可能就是原因。将感谢任何提示！

```
for img = imread(sample);
figure,imshow(img)
hold on
p1 = [10,100];
p2 = [100,20];
plot([p1(2),p2(2)],[p1(1),p2(1)],'Color','r','LineWidth',2);
hold off;
pause;
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:05:31.993

如果你知道线的起点和终点

```
p1 = [ 10 100];
p2 = [100  20]; 
```

那么像素距离将简单地遵循勾股定理：

```
dist = sqrt( (p2-p1) * (p2-p1).' ); 
```

然后将其乘以一个像素代表的多少毫米以获得实际距离。

如果您不知道要点，但手动绘制它们（可能*借助*计算机视觉，但从不完全依赖它:)，请参阅 bdecaf 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:29:32.550

我不确定你是如何获得积分的。假设它不是微不足道的。

对于类似的问题，我的用户总是希望能够手动标记点（他们不太信任计算机视觉）。代码如下所示：

```
pos = ginput(2);
l = line(pos(:,1),pos(:,2),'Color','r','Marker','o'); % just for visualization
distance = norm(pos(1,:)-pos(2,:)); 
```

# c - TCP Keep-alive 未检测到死客户端

> ID：13394626
> 
> 赞同：1
> 
> 时间：2012-11-15T09:31:45.400
> 
> 标签：c, networking, tcp, keep-alive

我在服务器中添加了 Keep-alive 消息以了解客户端。在我的程序中，服务器继续运行并向客户端发送数据。我的问题是，如果客户端断开服务器永远不会知道客户端断开连接。

下面是我添加keepalive的代码片段

```
if ((newConnSD = ::accept(sockDesc, NULL, 0)) < 0) {
        throw SocketException("Accept failed (accept())", true);

 //TIMEOUT SETTING
 int buffersize = 4096;  

  setsockopt(sockDesc, SOL_SOCKET, SO_SNDBUF, (char *)&buffersize, 4);

 // KEEP ALIVE IMPLEMENTATION
  struct tcp_keepalive alive;
  DWORD dwBytesRet = 0;

    alive.onoff = TRUE;
    alive.keepaliveinterval = 1000;

    alive.keepalivetime = 60000;

    if (WSAIoctl(sockDesc, SIO_KEEPALIVE_VALS, &alive, sizeof(alive), NULL, 0,
    &dwBytesRet, NULL, NULL) == SOCKET_ERROR)
    {
        printf("WSAIotcl(SIO_KEEPALIVE_VALS) failed; ");
        LOG4CXX_INFO(loggerToFile,"WSAIotcl(SIO_KEEPALIVE_VALS) failed ");
        cout<<WSAGetLastError()<<endl;

    }
    else
    {
        LOG4CXX_INFO(loggerToFile,"WSAIotcl(SIO_KEEPALIVE_VALS) Success ");
        cout<<"WSAIotcl(SIO_KEEPALIVE_VALS) Success " <<endl;
    }

  int optval;
   socklen_t optlen = sizeof(optval);
  /* Set the option active */
   optval = 1;
   optlen = sizeof(optval);
   if(setsockopt(sockDesc, SOL_SOCKET, SO_KEEPALIVE,(char*)&optval, optlen) < 0) {

       cout<<"Error while setting KEEP_ALIVE Message"<<endl;
       LOG4CXX_INFO(loggerToFile,"Error while setting KEEP_ALIVE Message");

   }
   else
   {
       LOG4CXX_INFO(loggerToFile,"SO_KEEPALIVE set on socket");
        cout<<"SO_KEEPALIVE set on socket"<<endl;
   }

 printf("SIO_KEEPALIVE_VALS set:\n"); 
```

# android - 使用 ant 构建包含 ActionBarSherlock 的 Android 项目

> ID：13394635
> 
> 赞同：0
> 
> 时间：2012-11-15T09:32:13.757
> 
> 标签：android, ant, actionbarsherlock

我在使用 Ant 构建包含 ActionBarSherlock 的项目时遇到问题。

实际上，编译过程中剩余的错误如下

```
-dex:
      [dex] Converting compiled files and external libraries into C:\ProjetsECLIPSE\SEMobile_BP\bin\classes.dex...
       [dx] 
       [dx] UNEXPECTED TOP-LEVEL EXCEPTION:
       [dx] java.lang.IllegalArgumentException: already added: Landroid/support/v4/app/Watson$OnCreateOptionsMenuListener;
       [dx]     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
       [dx]     at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
       [dx]     at com.android.dx.command.dexer.Main.processClass(Main.java:486)
       [dx]     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
       [dx]     at com.android.dx.command.dexer.Main.access$400(Main.java:67)
       [dx]     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
       [dx]     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
       [dx]     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
       [dx]     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
       [dx]     at com.android.dx.command.dexer.Main.processOne(Main.java:418)
       [dx]     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
       [dx]     at com.android.dx.command.dexer.Main.run(Main.java:206)
       [dx]     at com.android.dx.command.dexer.Main.main(Main.java:174)
       [dx]     at com.android.dx.command.Main.main(Main.java:91)
       [dx] 1 error; aborting 
```

我删除了我的 libs 文件夹的每个文件“android-supportv4.jar”，并且在 Eclipse 中，我确保在我的库和我的主项目中没有指向该库的链接，但错误仍然存​​在。

我可以通过 Eclipse 构建我的项目，但 Ant 无法构建它（在调试或发布模式下）。

我试过 ant clean 并没有改变任何东西。

如何避免这种令人沮丧的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:52:02.450

Check your project's libs folder and if there is duplicate jar remove it. I found actionbarsherlock.jar in my project's libs folder and after i'd deleted it, problem solved.

Also check those out; [this blog](http://blog.zasadnyy.org.ua/2012/10/action-bar-sherlok-maven-eclipse.html), [this question](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar), and [this page](http://android.foxykeep.com/dev/fix-the-conversion-to-dalvik-format-failed-with-error-1-with-adt-14)

# iphone - CoreMotion 崩溃：CLMotion 核心、CLGeomagneticModelProvider_Type

> ID：13394638
> 
> 赞同：1
> 
> 时间：2012-11-15T09:32:18.297
> 
> 标签：iphone, augmented-reality, core-motion, cmmotionmanager

```
Application crashes when CLGeomagneticModelProvider_Type notification is received. Cmmotionmanager object would be listening to notification. 
```

< 崩溃日志：异常类型：EXC_BAD_ACCESS (SIGSEGV) 崩溃线程：0

```
//Thread 0 crash onGeomagneticModelNotification
    Thread 0 name:  Dispatch queue: com.apple.main-thread
    Thread 0 Crashed:
    0   libobjc.A.dylib                 0x37cf6edc objc_retain + 12
    1   libsystem_blocks.dylib          0x35eb1aca _Block_object_assign + 114
    2   libsystem_blocks.dylib          0x35eb1212 _Block_call_copy_helper + 18
    3   libsystem_blocks.dylib          0x35eb19b0 _Block_copy_internal + 172
    4   libsystem_blocks.dylib          0x35eb1ae2 _Block_object_assign + 138
    5   libsystem_blocks.dylib          0x35eb1212 _Block_call_copy_helper + 18
    6   libsystem_blocks.dylib          0x35eb19b0 _Block_copy_internal + 172
    7   CoreFoundation                  0x30aa626a CFRunLoopPerformBlock + 410
    8   CoreMotion                      0x32404648 CLMotionCore::executeBlockOnMotionThread(void ( block_pointer)()) + 124
    9   CoreMotion                      0x323f122a onGeomagneticModelNotification(int, CLGeomagneticModelProvider_Type::Notification const&, CLGeomagneticModelProvider_Type::NotificationData const&, void*) + 74
    10  CoreMotion                      0x3242887a CLNotifier<CLGeomagneticModelProvider_Type::Notification, CLGeomagneticModelProvider_Type::NotificationData, char, char>::invokeClientWithData(std::_Rb_tree_iterator<std::pair<int const, CLNotifier<CLGeomagneticModelProvider_Type::Notification, CLGeomagneticModelProvider_Type::NotificationData, char, char>::Client> > const&, std::_Rb_tree_iterator<std::pair<CLGeomagneticModelProvider_Type::Notification const, CLNotifier<CLGeomagneticModelProvider_Type::Notification, CLGeomagneticModelProvider_Type::NotificationData, char, char>::Notification> > const&, CLGeomagneticModelProvider_Type::NotificationData const&) + 134
    11  CoreMotion                      0x324289ec CLNotifier<CLGeomagneticModelProvider_Type::Notification, CLGeomagneticModelProvider_Type::NotificationData, char, char>::invokeClientsWithData(CLGeomagneticModelProvider_Type::Notification const&, CLGeomagneticModelProvider_Type::NotificationData const&) + 348
    12  CoreMotion                      0x32429f96 CLNotifier<CLGeomagneticModelProvider_Type::Notification, CLGeomagneticModelProvider_Type::NotificationData, char, char>::onDpcSource(void*) + 186 
```

>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T07:25:55.717

我遇到了同样的问题，最后，我发现原因是 CMAttitudeReferenceFrameXTrueNorthZVertical

您可以尝试其他 CMAttitudeReferenceFrame 。

我猜这种行为是 CoreMotion 框架的错误。

# iphone - 是否可以在 xcode 中创建新的基于 cordova 的 ipad 应用程序

> ID：13394645
> 
> 赞同：0
> 
> 时间：2012-11-15T09:32:37.640
> 
> 标签：iphone, ipad, cordova, xcode4.2

我正在使用 Xcode 4.2 进行 ios 开发，并为 phonegap 安装了 cordova 1.5.0。

安装成功。

我按照[本](http://docs.phonegap.com/en/1.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)网站上的教程进行操作。

但它只支持 iPhone，如何在基于 Cordova 的应用程序中为 ipad 创建项目，如基于 Singleview 或 xcode 4.2 中的 Empty 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:47:29.620

在目标设置的摘要部分，有一个下拉菜单，其中包含 iPhone、iPad 和通用选项。

但是，该教程已经过时了——对于一个新项目，此时您确实应该使用 Cordova 2.2，它具有完全不同的设置过程。

[http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/2.2.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

# google-chrome - 无法在 chrome 中使用选项卡

> ID：13394647
> 
> 赞同：0
> 
> 时间：2012-11-15T09:32:47.593
> 
> 标签：google-chrome, browser, keydown

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:49:13.077

在 .investButtonTitle div 中使用 tabindex 属性

```
<div id="conservativeTitleNew" class="investButtonTitle" tabindex="1">Option 1</div> 
```

像这样[http://jsfiddle.net/hbuz3/1](http://jsfiddle.net/hbuz3/1)

# android - 如何创建适用于所有屏幕尺寸的启动画面？

> ID：13394648
> 
> 赞同：0
> 
> 时间：2012-11-15T09:32:49.963
> 
> 标签：android, layout

我有屏幕的设计。例如 - 我的设计有两层（深绿色和浅绿色）和文字或标志。

![在此处输入图像描述](../Images/4aba60edf5bf76f32024d196deb2aaa8.png)

如何为所有屏幕创建此徽标？我认为，一个大图像（以及 hdpi mdpi 等的副本，因为此应用程序可用于 320x240 屏幕和具有视网膜样式显示的 google nexus 上）- 不是一个好主意。如何创建一个背景、一个矩形和徽标图层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:38:20.310

你必须看看 LayerDrawable ：

> `Drawable`管理其他数组的A `Drawables`。这些是按数组顺序绘制的，因此索引最大的元素将被绘制在顶部。
> 
> 它可以在带有`<layer-list`> 元素的 XML 文件中定义。层中的每个 Drawable 都定义在一个嵌套的`<item>`.

[更多细节](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)

[指导](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# javascript - json remove element by value

> ID：13394653
> 
> 赞同：1
> 
> 时间：2012-11-15T09:33:10.173
> 
> 标签：javascript, json, getjson

I have a json object :

```
myJson = [
{"id":"001", "name":"AAA"},
{"id":"002", "name":"BBB"},
{"id":"003", "name":"CCC"},
{"id":"004", "name":"DDD"}
] 
```

How I can remove an element by value of id?

thank for your helps

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T09:35:32.500

you can filter your array... as example: you want to remove every object with the id "003" use this:

```
myJson = myJson.filter(function(jsonObject) {
    return jsonObject.id != "003";
}); 
```

# ruby-on-rails - params[:something] 中的字符串操作

> ID：13394654
> 
> 赞同：1
> 
> 时间：2012-11-15T09:33:12.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

`params[:svn_path]`正在返回这样的 URL

```
http://svn.repos.mywebsite.com/testingtitle.documents 
```

现在我只需要获取 url 的最后一部分，即`testingtitle`.

我们如何得到它？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:46:41.913

您可以使用ruby​​ 的[Uri 模块](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)

```
uri = URI.parse("http://svn.repos.mywebsite.com/testingtitle.documents")

path = uri.path #"/testingtitle.documents"
path_with_no_slash = path.gsub("/", "") #"testingtitle.documents"
array = path_with_no_slash.split(".") #["testingtitle", "documents"]
result = array[0] #"testingtitle" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:45:42.523

您应该使用正则表达式来获得您所期望的。

[这是一个很好的例子](http://rubular.com/r/irmRo84IFF)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T09:49:26.437

您可以使用`File.basename`; 例如

```
url = "http://svn.repos.mywebsite.com/testingtitle.documents"
ext = File.extname(url)
result = File.basename(url, ext) 
```

的第二个参数`basename`负责删除文件扩展名。`result`将保持所需的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T10:04:42.257

**使用正确的 URI 解析器 -**

正如您所说，这将为您提供网址的最后一部分。

```
require 'uri'

url       = "http://svn.repos.mywebsite.com/testingtitle.documents"    
last_part = URI(url).path.split('/').last # => testingtitle.documents 
```

但是，您提供的输出将需要对最后一部分进行更多操作，即拆分`.`

```
last_part.split('.').first # => testingtitle 
```

**简单的字符串操作 -**

```
url = "http://svn.repos.mywebsite.com/testingtitle.documents"
url.split('/').last.split('.').first # => testingtitle 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T09:44:18.180

试试这个：

`params[:svn_path].match(/.*\.com\/(.*)\..*$/)[1]`

```
1.9.3p194 :009 > params[:svn_path].match(/.*\.com\/(.*)\..*$/)[1]
 => "testingtitle" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T09:53:22.350

您可以使用`URI`解析此网址：

```
url = URI.parse('http://svn.repos.mywebsite.com/testingtitle.documents') 
```

这将为您提供一个包含以下变量的对象：

```
url.instance_variables #> [ :@scheme, :@user, :@password, :@host, :@port, :@path, :@query, :@opaque, :@registry, :@fragment, :@parser ] 
```

然后在`path`组件上使用一个简单的正则表达式，如下所示：

```
url.path.match(/\w+/) #> #<MatchData "testingtitle"> 
```

这将匹配任何单词字符的第一次出现（不包括 / 或 .）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-15T10:21:08.437

`Regexp`+`groups`

```
url = 'http://svn.repos.mywebsite.com/testingtitle.documents'
puts url.match(/com\/([a-z]+)/)[1]
#=> testingtitle 
```

# sql - 所需输出所需的数据库操作

> ID：13394655
> 
> 赞同：0
> 
> 时间：2012-11-15T09:33:16.843
> 
> 标签：sql

我有 3 个表，必须组合起来才能获得所需的数据集，如下所示。一些指向所需数据库操作的指针将不胜感激。

表格1

```
EBELN   EBELP   EKORG

4500020014  10  100
4500020014  20  100
4500020015  10  100
0       0       0       
4500020016  10  100 
```

表 2

```
EBELN           EBELP   BELNR

4500020014  10  1000000000
4500020014  20  1000000001
4500020015  10  1000000002
4500020015  10  1000000003
                1000000004
4500020016  10  0 
```

表3

```
BELNR   NETPR

1000000000  119
1000000001  129
1000000002  139
1000000003  149
1000000004  159 
```

预期结果表

```
EBELN   EBELP   EKORG   BELNR   NETPR

4500020014  10  100 1000000000  119
4500020014  20  100 1000000001  129
4500020015  10  100 1000000002  139
4500020015  10  100 1000000003  149
                    1000000004  159
4500020016  10  100     0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:02:05.940

以下查询完成了工作

```
SELECT DISTINCT t1.Ebeln, t2.Ebelp, t1.Ekorg, t2.belnr, t3.netpr FROM TABLE1 t1
RIGHT JOIN TABLE2 t2 ON t1.EBELN = t2.EBELN
FULL JOIN table3 t3 ON t2.belnr = t3.belnr 
```

# iphone - 需要有关在 iphone 中捕获 UIImage 和 UIView 的帮助

> ID：13394656
> 
> 赞同：0
> 
> 时间：2012-11-15T09:33:17.423
> 
> 标签：iphone, objective-c, ios, xcode, uiview

我正在`UIImage`动态添加并移动它`UIView`，底部也有 4 个按钮。
我想要保存`UIView`为图像，但我不想在保存时保存按钮，`UIView`我想`UIImageView`添加到按钮后面。

截图代码

```
UIGraphicsBeginImageContext(self.view.frame.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

添加 UIImageView

```
UIImage* image = [UIImage imageNamed:[NSString stringWithFormat:@"lam.jpg"]];

    CGRect cellRectangle;
    cellRectangle = CGRectMake(20 ,50,image.size.width/6 ,image.size.height/6 );

    //[[self view] addSubview:blockView];
    UIImageView *dragger = [[Draggable alloc] initWithFrame:cellRectangle];
    [dragger setImage:image];
    [dragger setUserInteractionEnabled:YES];

    [self.view addSubview:dragger]; 
```

我已经保存`UIView`为这样的图像，但我不想保存按钮。我也使用过另一个`UIView`，但我希望整个屏幕都可以拖动图像，这是我的限制。我希望每个人都能得到我想要的。 ![截图](../Images/af5ce0edb1fb986622ac0ff1568d220d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:46:39.690

你不能隐藏按钮吗？

```
 for(UIButton *b in view.subviews) {
    if([b isKindOfClass:[UIButton class]]) {
        b.hidden = YES;
    }
}

//capture view

for(UIButton *b in view.subviews) {
    if([b isKindOfClass:[UIButton class]]) {
        b.hidden = NO;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:38:25.613

我不太明白。但据我了解，您想要汽车视图的屏幕截图，但没有按钮。最简单的解决方案是在 mainView 上放置全屏视图。在该 fullscreenView 上，您可以放置​​您的汽车图像。这些按钮也直接在 mainView 上。比在您的屏幕截图方法中，您只需使用 fullscreenView 而不是`self.view`.

# c - 带大括号的一维和二维数组初始化

> ID：13394660
> 
> 赞同：3
> 
> 时间：2012-11-15T08:55:59.927
> 
> 标签：c

以下代码给出了“无效的初始化程序”错误：

```
 int a[]=(1,2,3); 
```

但是以下编译成功，尽管它认为 ',' 作为逗号 OPERATOR 而不是 SEPARATOR：

```
 int a[][2]={(1,2),(3,4)}; 
```

那么为什么`()`对于一维数组无效而不是二维数组呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T09:08:58.233

在第一个示例中：

```
int a[]=(1,2,3); 
```

初始化器是一个（相当奇怪的）类型表达式`int`。（它包含两个逗号运算符，并产生值`3`。）对象是一个数组。初始化无效，因为它是类型不匹配。

第二：

```
int a[][2]={(1,2),(3,4)}; 
```

相当于：

```
int a[][2] = { 2, 4 }; 
```

这是有效的，因为允许在初始化程序中省略嵌套的花括号；元素用于初始化对象的连续元素。第一个和第三个逗号是逗号运算符；第二个是分隔符。

如果初始值设定项只是目标类型的表达式（无论它是标量、结构还是联合），则最外面的花括号是*可选的。*例如，您可以编写：

```
int x = 42;
int y = { 42 }; 
```

指定元素值（对于数组、结构或联合对象）的初始化程序*需要*最外面的花括号。

例如：

```
struct foo {
    int x;
    int y;
};

 struct foo arr[2] = { 1, 2, 3, 4 }; 
```

是有效的——但它更清楚地写成：

```
 struct foo arr[2] = { { 1, 2 }, { 3, 4 } }; 
```

除了第一个示例无效外，两者的风格都很差。第一个可能是为了：

```
int a[] = { 1, 2, 3 }; 
```

第二个：

```
int a[][2] = { 2, 4 }; 
```

或者

```
int a[][2] = {{1, 2}, {3, 4}}; 
```

取决于意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:58:43.993

您忘记了第一个示例中的花括号。荣誉（花括号）表示数组内容的初始化，然后由您在这些荣誉中的声明处理内容。基本上，您没有在第一个示例中初始化数组。括号表示评估的顺序，而不是与函数一样的参数。

# c# - 将站点的手动版本号添加到 web.config

> ID：13394666
> 
> 赞同：5
> 
> 时间：2012-11-15T09:33:35.537
> 
> 标签：c#, asp.net-mvc

我需要在站点徽标附近显示站点的版本号。我可以在 web.config 中的哪个位置保存此版本号？在 web.config 中保存站点版本号是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:42:03.513

好吧，您似乎会为这个问题得到减分。但无论如何，这是我的建议：

将您的网站版本存储在 web.config`appSettings`部分，例如：

```
<appSettings>
  <siteVersion>v1.0</<siteVersion>
</appSettings> 
```

并且由于您使用的是 mvc 添加到常见的 _layout 视图代码以显示此版本：

```
Site version : @ConfigurationManager.AppSettings["siteVersion"] 
```

是的，这是个好主意，因为 web.config 的这一部分用于存储您的应用程序的常用设置，并且动态更改它们会导致 IIS 重新启动您的应用程序以应用设置。但不确定您是否只会在部署时更改站点版本。

# php - Neo4j 空间 php 示例

> ID：13394667
> 
> 赞同：0
> 
> 时间：2012-11-15T09:33:36.373
> 
> 标签：php, geospatial, neo4j

我正在寻找一个使用 php 中的 neo4j 空间特征的非常基本的示例，最好使用这个库[neo4jphp](https://github.com/jadell/neo4jphp)

我想存储带有纬度和经度的场地列表

我如何存储这些信息？lat 和 long 可以与其他场地信息一起存储在一个节点中吗？

你如何在某个给定点周围找到场地？

谢谢

编辑：空间特征我的意思是neo4j的空间插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:47:56.807

我建议为每个场地创建一个节点，然后为这种类型的节点创建属性纬度和经度。然后，您还必须索引这些属性。

为了解决给定点周围的场地问题，也许创建一些国家的超级节点会有所帮助——例如欧洲、中欧、捷克共和国、布拉格。但这需要此类国家名称的数据库。我宁愿创建虚拟国家部分：将世界地球想象为 2d 地图。而不是在其上制作一个网格以获得 NxM 正方形的矩阵 - 最好通过使用一些全局模式来划分它，例如纬度和经度的每个 +1 是一个虚拟国家部分。

在你得到这个虚拟国家部分之后，而不是简单地将你的所有场地节点连接到它的超级节点，这些节点在这个虚拟国家部分中具有属性 lat's+long's。比，在搜索您的半径内的所有节点时，您必须首先找到国家部分（或跨境时的更多部分），然后手动检查该部分内的所有节点是否适合您的半径。

至少您不需要检查所有节点，而只需要检查一个子集。我不知道这种可以处理半径问题的索引解决方案，只有手动检查是唯一的方法。

你需要一个使用neo4jphp的例子吗？如果是这样，我会找时间做一个。

**编辑：**我发现一些解决方案已经存在，比如[https://github.com/neo4j/spatial](https://github.com/neo4j/spatial)所以我的回答可能不合适，你应该等待领域专家的回答。

# android - 自定义按钮布局的阴影-Android

> ID：13394668
> 
> 赞同：2
> 
> 时间：2012-11-15T09:33:38.527
> 
> 标签：android, button, shadow

这是我的 Button.xml 文件：

```
<Button android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#ffffff"
            android:id="@+id/tv4"

            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:layout_below="@id/tv3"
            android:textStyle="bold"
            android:text="Contact"
            android:background="@drawable/custom_button"
            android:textSize="24sp"
            android:typeface="serif"
            android:layout_marginTop="2dip"
            android:layout_marginBottom="2dip"/> 
```

这是我的 custom_button.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>        
    <shape>
        <gradient
            android:startColor="#48b7f4"
             android:endColor="#48b7f4"
            android:angle="270" />
        <!--stroke
            android:width="1dp"
            android:color="#000000" /-->
        <corners
            android:radius="6dp" />
    </shape>
</item></selector> 
```

如何为我的按钮添加阴影效果？我在 xml 中尝试了 shadowcolor 选项，但它不起作用。我在相同的布局中有 4 个这样的按钮。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T14:03:43.617

您可以使用 layer-list 资源来添加多个 xml 文件，例如 stack.xml 文件。shadow_button.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
   <item android:drawable="@drawable/shadow"/>
   <item
     android:drawable="@drawable/custom_button"
     android:bottom="4px" 
     android:right="4px"/>  
</layer-list> 
```

shadow.xml

```
<item>        
    <shape>
        <gradient
            android:startColor="#000000"
            android:endColor="#000000"
            android:angle="270" />
        <corners
            android:radius="6dp" />
    </shape>
 </item>
</selector> 
```

您可以根据需要在渐变中提供颜色。将 shadow.xml 设置为按钮背景。

# android - Android：停止点击延迟

> ID：13394673
> 
> 赞同：1
> 
> 时间：2012-11-15T09:33:53.130
> 
> 标签：android, onclicklistener

我想在点击 5 次时触发一个意图。问题是当我点击 3 次并暂停一段时间然后再次点击 2 次时，意图被触发......

我只有在连续点击 5 次时才想要它..

```
static int i = 0;

public void onClick(View view) {
    i++;
    if (i == 5) {
        i = 0;
        Intent myIntent = new Intent(activity, loginActivity.class);
        activity.startActivity(myIntent);
    }
} 
```

是否可以配置点击之间的最大延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:40:22.910

您可以存储上次点击的时间戳，并在自上次点击后的延迟高于阈值时重置点击计数器：

```
private static final double MAX_CLICK_DELAY = 500; // 500ms
private double lastClickTime = 0;
private int i = 0;

public void onClick(View view) {
    double currentTime = System.currentTimeMillis();

    if(currentTime - lastClickTime > MAX_CLICK_DELAY) {
        i = 0;
    }

    lastClickTime = currentTime;

    i++;
    if (i == 5) {
        i = 0;
        Intent myIntent = new Intent(activity, loginActivity.class);
        activity.startActivity(myIntent);
    }
} 
```

# magento - Magento : Mage::getModel 清除数据

> ID：13394674
> 
> 赞同：2
> 
> 时间：2012-11-15T09:33:55.920
> 
> 标签：magento, model, product

我必须开发一个 Magento 插件来导出产品。我知道其他插件已经存在，但我必须这样做。

出口产品并不难，我使用类似的东西（浓缩）：

```
public function __construct()
{
    $this->_productModel = Mage::getModel('catalog/product');

    //Other actions ..
}

public function _toHtml()
{
    $products = $this->_productModel->getCollection()
    ->addStoreFilter($storeId)
    ->addAttributeToFilter('type_id',array('in'=>$_types))
    ->joinTable('cataloginventory/stock_item', 'product_id=entity_id', array('qty'=>'qty','is_in_stock' => 'is_in_stock'), $this->_getStockSQL(), 'inner');

    foreach($product_list as $product)
    {
        $_p = $this->_productModel->load($product);
        $p = $_p->getData();

        //Export data, parse and return it ..
    }
} 
```

如您所见，我使用私有变量来存储 Mage::getModel('catalog/product') 对象。我想每次调用这个方法都会消耗很多资源，这就是我想要存储这个变量的地方。

但是在这个过程中，如果产品是可配置产品的子产品，那么数据就是父产品的数据。

那么，我可以清除这个对象吗？叫 Mage::getModel('catalog/product') 他需要很多资源？我可以强制它加载子数据吗？

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:29:22.847

是的你可以。

看一下`Mage_Catalog_Model_Convert_Adapter_Product`标准示例。

你会看到他们：

1）缓存产品型号：

```
public function getProductModel() {
  if (is_null($this->_productModel)) {
    $productModel = Mage::getModel('catalog/product');
    $this->_productModel = Mage::objects()->save($productModel);
  }
  return Mage::objects()->load($this->_productModel);
} 
```

2）并在每次需要时重置它（在 saveRow 方法的开头）：

`$product = $this->getProductModel()->reset();`

# mysql - MySQL IFNULL 不返回默认值

> ID：13394676
> 
> 赞同：1
> 
> 时间：2012-11-15T09:34:04.677
> 
> 标签：mysql, count, ifnull

```
id 类别活跃
----------------------
1 1 1
2 3 0
3 3 1
4 3 1
5 1 0

```

我想选择`total count of each category`和`count of active in each cateogry`。

由于没有category=2，所以我使用了IFNULL，但它没有返回0

```
选择
    IFNULL(COUNT(id), 0) AS 总计，
    SUM(CASE WHEN 激活 = 1 THEN 1 ELSE 0 END) 激活
从
    桌子
在哪里
    类别 IN (1,2,3)
通过...分组
    类别
```

结果返回了 2 个数组，而不是预期的 3 个

```
// 类别=1的结果
大批
(
    [总计] => 2
    [活跃] => 1
)
// 结果来自类别 = 3
大批
(
    [总计] => 3
    [活跃] => 2
)
```

我怎样才能让 category=2 进入结果

```
// 类别=2的结果
大批
(
    [总计] => 0
    [活跃] => 0
)
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:39:13.240

您的查询返回了正确的结果，而不是您期望的结果， COUNT 是一个分组子句，只对现有值进行分组，它不会返回 = 到 category=2 因为这个类别不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:49:29.567

数据库引擎应该在哪里获取 id=2 的行？

您需要从类别表中进行选择，然后从另一个表中进行计数。

至于您的需求查询应该是这样的（我没有检查，因为我的数据库中没有您的表和数据）

```
SELECT
    c.id,
    COUNT(t.id) AS total,
    SUM(CASE WHEN t.active = 1 THEN 1 ELSE 0 END) AS active
FROM
    categories_table AS c
LEFT JOIN table AS t ON c.id=t.category
WHERE
    c.id IN (1,2,3)
GROUP BY
    t.category 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:50:07.160

你怎么能指望一个不存在的组 ;-) 除非你有一个类别 PARENT 表，你想在这里加入以获得你想要的东西。

否则，您可以使用额外的子句来验证您的数组是否存在不可用的类别，并手动注入代码行以在最终输出中显示它们。

因此，当所有类别都可用时，其他快乐日子，您的验证就可以完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:44:32.833

实际上不可能生成包含表中不存在的类别的行。

您应该有另一个包含所有类别的表，然后使用`LEFT JOIN`这样的：

```
SELECT categories.category, 
    COUNT(*) AS total,
    SUM(`table`.active)
FROM categories
LEFT JOIN `table` USING (category)
WHERE categories.category IN (1,2,3)
GROUP BY categories.category; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T09:37:57.573

Count(*) 永远不会返回 null

尝试这个：

```
SELECT
    COUNT(id) AS total,
    SUM(CASE WHEN active = 1 THEN 1 ELSE 0 END) AS active
FROM
    table
WHERE
    category IN (1,2,3)
GROUP BY
    category 
```

# python - Python，Django：捕获 SMTPRecipientsRefused。取而代之的是“未定义的变量”

> ID：13394681
> 
> 赞同：2
> 
> 时间：2012-11-15T09:34:21.427
> 
> 标签：python, django, exception-handling, smtp

尝试发送电子邮件时出现以下异常：

```
Traceback (most recent call last):
  my_own_functions ...
  File "C:\Python27\lib\site-packages\django\core\mail\message.py", line 248, in send
    return self.get_connection(fail_silently).send_messages([self])
  File "C:\Python27\lib\site-packages\django\core\mail\backends\smtp.py", line 92, in send_messages
    sent = self._send(message)
  File "C:\Python27\lib\site-packages\django\core\mail\backends\smtp.py", line 110, in _send
    email_message.message().as_string())
  File "C:\Python27\lib\smtplib.py", line 733, in sendmail
    raise SMTPRecipientsRefused(senderrs)
SMTPRecipientsRefused: {'aaa': (553, "5.1.2 We weren't able to find the recipient domain. Please check for any\n5.1.2 spelling errors, and make sure you didn't enter any spaces, periods,\n5.1.2 or other punctuation after the recipient's email address. q10sm6381464wie.2")} 
```

我想捕获该异常并尝试过：

```
try:
    sendActivationEmail()
except SMTPRecipientsRefused:
    return "error" 
```

但是，这给了我一个“未定义的变量”错误。它无法识别 SMTPRecipientsRefused。在 Eclipse 中显示“未定义的变量：SMTPRecipientsRefused”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T09:53:33.143

异常就像 Python 中的任何其他类一样：您需要先将其导入代码中，然后才能引用它。你需要`from smtplib import SMTPRecipientsRefused`.

# android - 如何判断按钮事件listview自定义布局中的重复数据

> ID：13394683
> 
> 赞同：0
> 
> 时间：2012-11-15T09:34:25.440
> 
> 标签：android, listview

我目前开发了一个小项目；我在 listview 自定义布局中使用按钮事件，并将数据添加到 listview 中。但是现在如何判断数据已经添加（如何判断重复数据？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:59:48.687

1> 使用列表的contain() 方法检查数据是否添加到列表中。

2> 此函数返回布尔值。因此，使用它可以防止列表视图中的重复数据。

# umbraco - 在 BeginRequest 事件中出现 Node.NiceUrl、Url 的 ArgumentNullException 异常

> ID：13394685
> 
> 赞同：0
> 
> 时间：2012-11-15T09:34:33.973
> 
> 标签：umbraco

我在每个请求上都需要一个节点的 URL，最好是在 BeginRequest 事件中，或者在请求管道中尽早。

以下是 BeginRequest 事件中的代码，但有例外：

var节点=新节点（1059）；

NiceUrl = 'node.NiceUrl' 引发了“System.ArgumentNullException”类型的异常

关于最早访问它的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:29:35.057

这里没有太多细节，但如果实例化节点没问题，但访问 NiceUrl 会抛出空异常，这表明节点存在但从未发布过 - 发布节点应该生成漂亮的 url。

也许您可以考虑始终存储节点 ID（而不是节点的 NiceUrl？） - 在最初保存后应该始终存在。

当然，您可以使用 http:///.aspx 之类的东西来预览页面，而不是 NiceUrl，我认为这将是您在那个阶段可以拥有的最接近实际 URL 的东西 - 因此存储类似 '/1234\. aspx'有什么用？

# c# - 格式化 asp:DataPager 以显示在 ul li

> ID：13394686
> 
> 赞同：13
> 
> 时间：2012-11-15T09:34:39.797
> 
> 标签：c#, asp.net, twitter-bootstrap, datapager

我正在使用 Twitter Bootstrap 和 ASP.Net C# Webforms 构建一个网站。我的页面上有一个 ListView，其中绑定了一个 DataPager，但我需要更改 .Net 呈现 DataPager 的 HTML 的方式。

目前，所有寻呼机项目都显示如下：

```
<div class="clearfix pagination pagination-centered"> <span id="cpBody_dpListing"> <a class="aspNetDisabled">First</a>&nbsp;<span>1</span>&nbsp; <a href="javascript:__doPostBack('ctl00$cpBody$dpListing$ctl02$ctl01','')">2</a>&nbsp; <a href="javascript:__doPostBack('ctl00$cpBody$dpListing$ctl03$ctl00','')">Last</a>&nbsp; </span> </div> 
```

但是我需要将我的所有项目包装在一个无序列表而不是 span 和标签中。我当前的标记如下所示：

```
<div class="clearfix pagination pagination-centered">
<asp:DataPager ID="dpListing" runat="server" PagedControlID="lvListing" PageSize="10" OnPreRender="dpListing_PreRender">
    <Fields>
        <asp:TemplatePagerField>
            <PagerTemplate>
                <asp:BulletedList ID="listPages" runat="server" DisplayMode="LinkButton" OnClick="listPages_Click"></asp:BulletedList>
            </PagerTemplate>
        </asp:TemplatePagerField>
        <asp:NextPreviousPagerField ButtonType="Link" ShowFirstPageButton="true" ShowNextPageButton="false" ShowPreviousPageButton="false" />
        <asp:NumericPagerField PreviousPageText="&lt; Prev 10" NextPageText="Next 10 &gt;" ButtonCount="10" />
        <asp:NextPreviousPagerField ButtonType="Link" ShowLastPageButton="true" ShowNextPageButton="false" ShowPreviousPageButton="false" />
    </Fields>
</asp:DataPager> 
```

我不知何故需要覆盖 NextPreviousPagerField 和 NumericPagerField，以便它们输出 <li> 标签而不是 <span> 和 <a>。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T13:57:03.500

开箱即用`DataPager`不支持此功能，因此您将需要一个自定义控件。幸运的是，实施起来相当东方！

对于 each `DataPagerField`，`DataPager`将一个`DataPagerFieldItem`控件添加到它自己的控件集合中，然后告诉该字段在该项目中创建它的控件。内置字段将在按钮之间添加不间断的空格（除非您将`RenderNonBreakingSpacesBetweenControls`属性设置为`false`），但它们很容易识别和抑制。

此控件仍将呈现已`<a>`启用按钮的`<span>`标签和当前页码的标签，但应该接近您的需要：

```
public class UnorderedListDataPager : DataPager
{
   protected override HtmlTextWriterTag TagKey 
   {
      get { return HtmlTextWriterTag.Ul; }
   }

   protected override void RenderContents(HtmlTextWriter writer)
   {
      if (HasControls())
      {
         foreach (Control child in Controls)
         {
            var item = child as DataPagerFieldItem;
            if (item == null || !item.HasControls())
            {
                child.RenderControl(writer);
                continue;
            }

            foreach (Control button in item.Controls)
            {
               var space = button as LiteralControl;
               if (space != null && space.Text == "&nbsp;") continue;

               writer.RenderBeginTag(HtmlTextWriterTag.Li);
               button.RenderControl(writer);
               writer.RenderEndTag();
            }
         }
      }
   }
} 
```

HTML 输出：

```
<ul id="dpListing">
   <li><a class="aspNetDisabled">First</a></li>
   <li><span>1</span></li>
   <li><a href="javascript:__doPostBack('ctl00$cpBody$dpListing$ctl02$ctl01','')">2</a></li>
   <li><a href="javascript:__doPostBack('ctl00$cpBody$dpListing$ctl03$ctl00','')">Last</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-07T10:10:50.733

我对此有一个稍微不同的解决方案。我没有更改 DataPager 的呈现，而是稍微调整了标记，并且在呈现方面，它仍然看起来“类似引导程序”，即使它没有带有分页类的 UL/LI 标记。

一件非常重要的事情（如[https://stackoverflow.com/a/19398488/1948625](https://stackoverflow.com/a/19398488/1948625)中所解释的）正在更改类 asp.net 输出以禁用控制，它默认为“aspNetDisabled”，但对于引导程序，最好简单地使用“禁用”。在 Global.asax 的 Application_Start 中执行此操作。如果您不这样做，则第一页、上一页、下一页和最后一页按钮不会显示为禁用。

```
void Application_Start(object sender, EventArgs e)
{
    WebControl.DisabledCssClass = "customDisabledClassName";
} 
```

来源：[WebControl.DisabledCssClass 属性 (MSDN)](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.disabledcssclass.aspx)

```
 <asp:DataPager ID="it" runat="server" class="btn-group btn-group-sm">
        <Fields>
            <asp:NextPreviousPagerField PreviousPageText="<" FirstPageText="|<" ShowPreviousPageButton="true"
                ShowFirstPageButton="true" ShowNextPageButton="false" ShowLastPageButton="false"
                ButtonCssClass="btn btn-default" RenderNonBreakingSpacesBetweenControls="false" RenderDisabledButtonsAsLabels="false" />
            <asp:NumericPagerField ButtonType="Link" CurrentPageLabelCssClass="btn btn-primary disabled"  RenderNonBreakingSpacesBetweenControls="false"
                NumericButtonCssClass="btn btn-default" ButtonCount="10" NextPageText="..." NextPreviousButtonCssClass="btn btn-default" />
            <asp:NextPreviousPagerField NextPageText=">" LastPageText=">|" ShowNextPageButton="true"
                ShowLastPageButton="true" ShowPreviousPageButton="false" ShowFirstPageButton="false"
                ButtonCssClass="btn btn-default" RenderNonBreakingSpacesBetweenControls="false" RenderDisabledButtonsAsLabels="false"/>
        </Fields>
    </asp:DataPager> 
```

上面的 Asp.net 服务器标记呈现为这个寻呼机： ![asp.net 服务器标记呈现为此寻呼机](../Images/a2f1cf7e4223316396cfffc808c1c963.png)

这是呈现的 html：

```
<span id="ctl00_Body_CaseList918421504_ListControl_Pager_it" class="btn-group btn-group-sm">
    <a class="disabled btn btn-default">|&lt;</a>
    <a class="disabled btn btn-default">&lt;</a>
    <span class="btn btn-primary disabled">1</span>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl01','')">2</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl02','')">3</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl03','')">4</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl04','')">5</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl05','')">6</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl06','')">7</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl07','')">8</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl08','')">9</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl09','')">10</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl01$ctl10','')">...</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl02$ctl00','')">&gt;</a>
    <a class="btn btn-default" href="javascript:__doPostBack('ctl00$Body$CaseList918421504_ListControl$Pager$it$ctl02$ctl01','')">&gt;|</a>
</span> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-28T14:38:27.023

除了理查德的回答......我使用了他的方法并添加了对“禁用”和“活动”类以及周围的 div-Tag- 的支持

**更新：**我添加了 John 对 active-Label 的特殊渲染的建议作为正确渲染*pagination-sm*和*pagination-lg*的超链接。所以也要感谢约翰。

**更新 2：**为控件添加了*id*渲染。感谢 DGibbs。

```
 [
    Bindable(false),
    Category("Appearance"),
    DefaultValue("pagination pagination-centered"),
    Description("Css class for the surrounding div")
    ]
    public virtual string CssClass {
        get {
            if (ViewState["CssClass"] == null) {
                ViewState["CssClass"] = "pagination pagination-centered";
            }
            return (string)ViewState["CssClass"];
        }
        set {
            ViewState["CssClass"] = value;
        }
    }

    protected override HtmlTextWriterTag TagKey {
        get {
                return HtmlTextWriterTag.Div;
        }
    }

    protected override void AddAttributesToRender(HtmlTextWriter writer) {
            if (HasControls()) {
                writer.AddAttribute("id", base.ClientID);
                writer.AddAttribute(HtmlTextWriterAttribute.Class, CssClass);
            }
    }

    protected override void RenderContents(HtmlTextWriter writer) {
        if (HasControls()) {
            writer.RenderBeginTag(HtmlTextWriterTag.Ul);

            foreach (Control child in Controls) {
                var item = child as DataPagerFieldItem;
                if (item == null || !item.HasControls()) {
                    child.RenderControl(writer);
                    continue;
                }

                foreach (Control ctrl in item.Controls) {
                    var space = ctrl as LiteralControl;
                    if (space != null && space.Text == "&nbsp;")
                        continue;

                    // Set specific classes for li-Tag
                    bool isCurrentPage = false
                    if (ctrl is System.Web.UI.WebControls.WebControl) {
                        // Enabled = false -> "disabled"
                        if (!((System.Web.UI.WebControls.WebControl)ctrl).Enabled) {
                            writer.AddAttribute(HtmlTextWriterAttribute.Class, "disabled");
                        }

                        // there can only be one Label in the datapager -> "active"
                        if (ctrl is System.Web.UI.WebControls.Label) {
                           isCurrentPage = true;                     
                           writer.AddAttribute(HtmlTextWriterAttribute.Class, "active");
                        }
                    }
                    writer.RenderBeginTag(HtmlTextWriterTag.Li);
                    // special rendering as hyperlink for current page
                    if (isCurrentPage) {
                        writer.AddAttribute(HtmlTextWriterAttribute.Href, "#");
                        writer.RenderBeginTag(HtmlTextWriterTag.A);
                    }
                    ctrl.RenderControl(writer);
                    if (isCurrentPage) {
                        writer.RenderEndTag(); // A
                    }
                    writer.RenderEndTag();
                }
            }

            writer.RenderEndTag();
        }
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-18T15:10:28.907

我对安德烈亚斯的回答做了额外的修改。Bootstrap 示例将当前页面（活动）页面包装在超链接标记内，因此我注意到某些 Bootstrap 模板在选择大小变化（例如 pagination-lg 或 pagination-sm）时无法正确格式化活动标记。这是我的 RenderContents 版本，添加了额外的超链接包装：

```
 protected override void RenderContents(HtmlTextWriter writer)
    {
        if (HasControls())
        {
            foreach (Control child in Controls)
            {
                var item = child as DataPagerFieldItem;
                if (item == null || !item.HasControls())
                {
                    child.RenderControl(writer);
                    continue;
                }

                foreach (Control ctrl in item.Controls)
                {
                    var space = ctrl as LiteralControl;
                    if (space != null && space.Text == "&nbsp;")
                        continue;

                    // Set specific classes for li-Tag
                    var isCurrentPage = false;
                    if (ctrl is WebControl)
                    {
                        // Enabled = false -> "disabled"
                        if (!((WebControl)ctrl).Enabled)
                            writer.AddAttribute(HtmlTextWriterAttribute.Class, "disabled");

                        // there can only be one Label in the datapager -> "active"
                        if (ctrl is Label)
                        {
                            isCurrentPage = true;
                            writer.AddAttribute(HtmlTextWriterAttribute.Class, "active");
                        }
                    }

                    writer.RenderBeginTag(HtmlTextWriterTag.Li);
                    if (isCurrentPage)
                    {
                        writer.AddAttribute(HtmlTextWriterAttribute.Href, "#");
                        writer.RenderBeginTag(HtmlTextWriterTag.A);
                    }
                    ctrl.RenderControl(writer);
                    if (isCurrentPage)
                        writer.RenderEndTag();
                    writer.RenderEndTag();
                }
            }
        }
    } 
```

# ruby-on-rails - 如何在集合中旋转，导致布局动态更改显示顺序？

> ID：13394690
> 
> 赞同：3
> 
> 时间：2012-11-15T09:34:56.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, partial-views

标题很别扭，但这就是我想做的。

假设我有 4 张图片。每个图像都有两种文件大小 ( `770 x 350`&& `370 X 110`) -[与此类似](http://jsfiddle.net/RaDWv/)。

我想要做的是循环浏览一组`@products`（每个`product`都有一个具有多种尺寸的图像），以便`770 image`在每个页面加载时都不同。

即我想给所有产品 1/4 的机会出现在我视图的 770 插槽中 - 无需我手动更改它（比如给一个`product`特殊的“特色”标志）。

所以我收集了 4 个产品，每个产品有 2 个不同尺寸的 2 个图像。我希望页面上图像的布局在每次重新加载页面时都发生变化 - 不像轮播。

假设`image_tag`我要使用的两个语句是：

```
<%= image_tag product.image_url(:main_banner).to_s %>

<%= image_tag product.image_url(:banner_thumb).to_s %> 
```

在哪里`product`循环遍历集合的迭代器实例`@products`。

我很想尽可能地干——我试着用 1 个部分来做，但这变得很乱，而且不像我希望的那样工作。

让我知道是否应该添加任何说明。

对于它的价值，这就是我正在尝试的：

**首页#index**

```
<%= render :partial => 'home/featured', :collection => @products, :as => :product %> 
```

**首页#_精选**

```
<div class="span8 featured">
  <%= image_tag product.image_url(:main_banner).to_s %>
 </div>
<div class="span4" >
  <div class="side-img"><%= image_tag product.image_url(:banner_thumb).to_s %></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:42:56.017

`ActiveRecord`results 是一个数组，因此您可以使用数组方法，例如[sample](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sample)或[shuffle](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-shuffle)。

您可以将 locals 传递给部分，例如从您的产品集合中随机选择的产品：

```
<%= render [...] locals => { :featured_product => @products.sample } %> 
```

**首页#_精选**

```
<div class="span8 featured">
  <%= image_tag featured_product.image_url(:main_banner).to_s %>
</div> 
```

或者您可以随机循环浏览集合：

```
<%= render [...] :collection => @products.shuffle [...] %> 
```

# asp.net - 如何获取gridview行的索引

> ID：13394695
> 
> 赞同：10
> 
> 时间：2012-11-15T09:35:05.240
> 
> 标签：asp.net

如何获取子控件正在回发的网格视图的行索引。*我知道获得控制的方式导致回发并找到返回网格视图行的父容器，然后找到它的索引。* 我希望在 RowDataBound 事件中检查 selectedrow 索引和相同的格式。是否有任何其他属性或设置直接在任何子控件回发时发出网格视图的选定索引

编辑：

例如，如果一行中有一个下拉列表，并且网格视图中有某些行。然后我想要gridview rowindex 由于gridview 行中的dropdowlist 而发生回发。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T09:37:45.863

`RowDataBound`您可以通过[`RowIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.rowindex.aspx)属性获取行的索引：

```
protected void gridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        int index = e.Row.RowIndex;
    }
} 
```

您可以通过以下方式获取 GridView 中任何子控件的索引

*   `childControl.NamingContainer`=>
*   `GridViewRow`=>
*   `RowIndex`

例如在一个`DropDownList.SelectedIndexChanged`事件中：

```
protected void DropDownList1_SelectedIndexChanged(Object sender, EventArgs e)
{
    DropDownList ddl = (DropDownList) sender;
    GridViewRow row  = (GridViewRow)  ddl.NamingContainer;
    int index        = row.RowIndex;
} 
```

**最后**：既然你提到*了“检查 selectedrow 索引”*，如果你实际上是在寻找`GridView`自身的选定行索引，那么有一个属性就是为了这个：

*   [`GridView.SelectedIndex`财产](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindex.aspx)

# javascript - 如何使用 selenium IDE 自动选择复选框

> ID：13394700
> 
> 赞同：3
> 
> 时间：2012-11-15T09:35:36.183
> 
> 标签：javascript, checkbox, selenium-ide

我正在尝试创建一个自动选择五个复选框中的一个复选框的代码。我该怎么做？是否可以在 Selenium IDE 中这样做。如果是，请与我分享代码。是否需要在用户 extensions.js 中更改/编辑。如果我想在用户扩展中创建一个函数来处理所有复选框，可以吗？请与我分享处理这种情况的 IDE 和用户 extensions.js 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:54:35.347

如果以下提到的不同方式，您可以选择复选框

```
1.click  name=abc
2.click  xpath=(//input[@name='vehicle'])
3.click  //input[@type='checkbox'] 
```

我希望你正在寻找相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:55:00.237

如何检查 Selenium IDE 中的复选框：

强制它始终开启：

```
command: check
target: <locator>, id=my_checkbox, name=the_checkbox (or whatever you have)
value: 
```

强制它始终关闭：

```
command: uncheck
target: <locator>, id=my_checkbox, name=the_checkbox (or whatever you have)
value: 
```

而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T04:56:19.480

是的。您可以通过 Selenium ide 选中该复选框

```
command: check
target:  id , name or Xpath of the check box (or whatever you have)
value : 
```

第二种解决方案，您可以使用点击命令

```
command: Click
target:  id or Xpath of the check box (or whatever you have)
value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T04:59:24.537

我只能使用“clickAt”命令及其 Xpath 检查特定的复选框。

# c++ - 为什么 C++ 运算符重载必须存在“ostream & os”？

> ID：13394703
> 
> 赞同：0
> 
> 时间：2012-11-15T09:35:44.950
> 
> 标签：c++, overloading

```
// The original code is from link: http://hoeven.blogbus.com/logs/37324287.html
#include<iostream>
#include<vector>
#include <stdlib.h>

using namespace std;

class test{
public:
     int v;
   /*构造函数*/
     test():v(0){}
     test(const int &a):v(a){}
     test(const test &t1):v(t1.v){}

   /*以下重载小于号 < */
     //比较两个对象的大小
     bool operator<(const test &t1) const{
         return (v < t1.v);
     }
     //比较对象和int的大小
     bool operator<(const int &t1) const{
         return (v < t1);
     }
     //友元函数，比较int和对象的大小
     friend inline bool operator<(const int &a, const test & t1){
         return (a < t1.v);
     }

   /*以下重载赋值号 = */
     //对象间赋值
     test & operator=(const test &t1){
         v = t1.v;
         return *this;
     }
     //int赋值给对象
     test & operator=(const int &t1){
         v = t1;
         return *this;
     }

   /*以下重载加号 + */
     //对象加上 int
     test operator+(const int & a){
         test t1;
         t1.v = v + a;
         return t1;
     }
     //对象加对象
     test operator+(test &t1){
         test t2;
         t2.v = v + t1.v;
         return t2;
     }

   /*以下重载加等号 += */  
     //对象加上对象
     test &operator+=(const test &t1){
         v += t1.v;
         return *this;
     }  
     //对象加上int
     test &operator+=(const int &a){
         v += a;
         return *this;
     }

   /*以下重载双等号 == */  
     //对象==对象
     bool operator==(const test &t1)const{
         return (v == t1.v);
     }  
     //对象==int
     bool operator==(const int &t1)const{
         return (v == t1);
     }  

   /*以下重载 输入>> 输出<< */
     /*友元函数，输出对象*/
     friend inline ostream & operator << (ostream & os, test &t1){
         cout << "class t(" << t1.v << ")" << endl;
         return os;
     }
     /*友元函数，输入对象*/
     friend inline istream & operator >> (istream & is, test &t1){
         cin >> t1.v;
         return is;
     }
};

int main(){
     test t0, t1(3);  // t0 has no initial value, so use default value 0
     test t2(t1);
     cout << t0 << t1 << t2;
     cin >> t1;
     t2 = t1;
     t2 += t1;
     t1 += 10;
     cout << t2;
     if(t1 < t2) cout << "t1 < t2";
     else if(t1 == t2) cout << "t1 = t2";
     else /* t1 > t2*/ cout << "t1 > t2";
     cout <<endl;
     system("echo Tom");
     return 0;
}

/*
 $ ./a.out 
 class t(0)
 class t(3)
 class t(3)
 45
 class t(90)
 t1 < t2
 Tom
 */ 
```

完整的代码在上面。但我不明白为什么括号中必须有“ostream & os”（见下文）？如果我删除“ostream & os”，就会出现很多错误。

```
 friend inline ostream & operator << (ostream & os, test &t1){
     cout << "class t(" << t1.v << ")" << endl;
     return os;
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T09:39:20.167

因为你粘贴的代码是错误的。

<< 运算符应写入其参数。即你的功能应该是

```
inline ostream & operator << (ostream &os, test &t1) {
    os << "class t(" << t1.v << ")" << endl;
    return os;
} 
```

这使您能够写入任何 ostream，而不仅仅是`cout`. 在前面的代码中，如果您编写`ofile << t1;`（考虑`ofile`是文件流），则不会写入文件，但仍然在标准输出上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:44:07.717

您有两种重载方式`operator<<`：

1.  **一元**( `this->operator<<(other_object)`),
2.  **二进制**( `operator<<(ostream& os, other_object`)。

**其中只有一个是可能的**（第二个），第一个是不可能的，因为要实现它，您必须重载 ostream 类 operator<< 的函数，这是无法完成的。
当您编写像`cout << "some text";` **二元运算符**这样的语句时，它会作为参数获取：类`ostream`的对象和另一个类的对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:38:07.033

是的`ostream & os`左侧`operator <<`。即`cout << myObject;`。在这种情况下，`cout`是`ostream`. 但是，在您的重载中，您忽略了`os`变量并`cout`无条件地使用。你应该在你的超载中替换`cout`为。`os``operator <<`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T09:51:17.753

只有将`ostream`变量传递给方法，方法才会知道输出到哪里。您也可以打开一个文件流并将其传递给该方法。然后输出将被写入文件而不是标准输出。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T17:44:43.010

ostream 参数使您可以更灵活地选择将输出定向到何处。它还允许链接，以便可以在同一语句中输出多个项目：

```
test t1;
test t2(5);
test t3(-4);

// Write "0 5 -4\n" to standard output
cout << t1 << " " << t2 << " " << t3 << endl;

// Write "0 5 -4\n" to the file my_file.txt
ofstream ofs("my_file.txt");
ofs << t1 << " " << t2 << " " << t3 << endl;

// Write "0 5 -4\n" to oss, which is then written to standard output
ostringstream oss;
oss << t1 << " " << t2 << " " << t3 << endl;
cout << oss.str() << endl; 
```

# drupal - Drupal 分析站点结构/反向工程站点结构

> ID：13394707
> 
> 赞同：-1
> 
> 时间：2012-11-15T09:36:01.937
> 
> 标签：drupal

我被指派支持一个 Drupal 站点，这实际上是一团糟。我无法理解节点的结构和内容的类型以及它最终是如何出现的。我想知道您是否知道任何分析工具 - 对站点结构以及内容的分类和显示方式进行逆向工程。提前致谢。PS：有些节点/页面（例如：/用户）我找不到编辑的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:09:33.977

我不确定是否有任何站点结构分析工具，但 /user 是 Drupal 核心生成的允许用户登录的页面。它不是可编辑的页面（至少不是直接的）。听起来您以前也没有使用过 Drupal。我建议建立一个操场 Drupal 站点，以便您在尝试进行任何更改之前熟悉 Drupal。

**自定义/用户：**

如果您只想更改用户个人资料页面（不是登录页面）上的一些 HTML，可以使用[user-profile.tpl.php 模板](http://api.drupal.org/api/drupal/modules!user!user-profile.tpl.php/6)。

您还可以为[登录页面设置主题模板](http://drupal.org/node/19855)。

如果您想向用户的配置文件添加更多字段（例如电话号码或位置字段），您可以使用核心配置文件模块来完成。

如果您想对登录表单进行更高级的自定义，则必须考虑创建自己的模块并使用[hook_form_alter()](http://drupal.org/node/651106)。

# php - 保护我的 php 免受注入

> ID：13394708
> 
> 赞同：0
> 
> 时间：2012-11-15T09:36:12.593
> 
> 标签：php, mysql, security

> **可能重复：**
> [防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

我知道有很多关于这个主题的指南，我已经阅读了很多关于它的内容，但我想直接询问某人并得到确认。

好的，我的问题。首先，你需要多久使用一次mysql_real_escape_string。

例如，如果我有一个查询：

```
"SELECT * FROM tabel WHERE id = $_POST['id'] and email LIKE '%hotmail.com' and row = 2" 
```

我到底需要什么才能逃离这里？$_POST 就足够了，还是我应该使用查询中的所有变量？`(saferize(2), saferize(%hotmail.com))`?

我的另一个问题是这个功能是否适合消毒？

```
function saferize($string) {
    if(get_magic_quotes_gpc() == true) { 
        $string = stripslashes($string);
    }
    $string = htmlspecialchars($string);
    if(strpos($string, '&lt;br /&gt;')){
        $string = str_replace('&lt;br /&gt;', '<br />', $string);
    }
    return mysql_real_escape_string($string);
} 
```

我`<br />`直接插入到数据库中，所以我`htmlspecialchars($string)`为此目的做了一个例外。对此有何安全考虑？

谢谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:46:55.930

如果 $_POST['id'] 是整数，您可以将其显式转换为整数并在查询中使用结果

```
$id = (int)$_POST['id']
"SELECT * FROM tabel WHERE id = $id and email LIKE '%hotmail.com' and row = 2" 
```

或使用 PDO 准备好的语句

```
$stmt = $dbh->prepare("SELECT * FROM tabel WHERE id = ? and email LIKE '%hotmail.com' and row = 2");
if ($stmt->execute(array($_POST['id']))) {
  while ($row = $stmt->fetch()) {
    print_r($row);
  }
} 
```

# asp.net-mvc-3 - 在休眠排序中保持空值最后

> ID：13394712
> 
> 赞同：0
> 
> 时间：2012-11-15T09:36:23.177
> 
> 标签：asp.net-mvc-3, nhibernate

无论排序顺序（asc 或 desc）如何，我都必须将 null 值始终保持在排序的最后。

我使用了类似这样的代码。

```
criteria
   .AddOrder(Order.Desc(
          Projections.Cast(
                 NHibernateUtil.Decimal, 
                 Projections.Property("col1"))));

criteria
     .AddOrder(Order.Asc(
           Projections.Cast(
                 NHibernateUtil.Decimal, 
                 Projections.Property("col1")))); 
```

我已阅读此链接：

[http://www.techrepublic.com/blog/datacenter/control-null-data-in-oracle-using-the-order-by-clause/121](http://www.techrepublic.com/blog/datacenter/control-null-data-in-oracle-using-the-order-by-clause/121)

# 更新

在此链接中，您可以看到最后一个用于排序的**空值。**我如何在上面的代码中在 nhibernate 中实现这一点？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:13:06.837

我们可以使用标准 SQL 函数`COALESCE`并将其用作`ORDER BY`

```
using NHibernate.Dialect.Function;
using NHibernate.Criterion;
...

// sql function definition
var sqlFunction = new SQLFunctionTemplate(NHibernateUtil.String
                                         , "COALESCE(Col1, 'zzzz')");
// create projection
var projection = Projections.SqlFunction(sqlFunction, NHibernateUtil.String);

// order by projection
criteria.AddOrder(new Order(projection, false)); 
```

这取决于您的需要如何`NULL`替换（“zzzzz”或“000”或..）以在末尾或开头移动它。因此，如果订单是升序，则投影将使用高字符，如果降序低字符。虽然有一些开销，但它会完成这项工作

# android - 在android中将设备时区更改为GMT

> ID：13394715
> 
> 赞同：0
> 
> 时间：2012-11-15T09:36:41.873
> 
> 标签：android, gmt, timestamp-with-timezone

“13-11-2012 09:14:39”是从我的应用程序中的服务器获取的示例时间戳字符串。我需要计算该时间与当前设备时间之间的差异。我的服务器以 GMT 格式发送时间。我需要将设备时区更改为 GMT 以计算 GMT 的当前时间吗？我怎样才能得到这两次准确的黑白差异。请帮我。
这是我到目前为止所尝试的：

```
SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");

Date requestDate = formatter.parse(serverDateString);

Calendar requestDateCal = formatter.getCalendar();
requestDateCal.setTime(requestDate);

Calendar currentDateCal = Calendar.getInstance();
calculateTimeDiff(currentDateCal.getTimeInMillis(), requestDateCal.getTimeInMillis()); //finds diff between two timestamps 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:57:45.130

试试这个，

```
 SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");

 formatter.setTimeZone(TimeZone.getTimeZone("GMT"));
 Date requestDate = formatter.parse(serverDateString);

 Calendar requestDateCal = formatter.getCalendar();
 requestDateCal.setTime(requestDate);

 Calendar currentDateCal = Calendar.getInstance();
 currentDateCal.setTimeZone(TimeZone.getTimeZone("GMT"));
 calculateTimeDiff(currentDateCal.getTimeInMillis(), requestDateCal.getTimeInMillis()); //finds diff between two timestamps 
```

# objective-c - Google OAuth 2.0 时的 iOS Objective C 授权问题

> ID：13394716
> 
> 赞同：0
> 
> 时间：2012-11-15T09:36:55.180
> 
> 标签：objective-c, google-api, oauth-2.0, google-tasks-api

我目前正在使用带有 Objective C 和 OAuth 2.0 api 的 Google API 让我整天头疼

我一直在看[谷歌的文档](http://code.google.com/p/gtm-oauth2/wiki/Introduction)

我已经成功进入了一个可以登录和“允许访问”的阶段

问题出现在以下步骤。

从 API，我得到身份验证令牌。并根据我正在关注的文档（上面的链接）

我可以用方法授权请求

```
[auth authorizeRequest:myNSURLMutableRequest
          delegate:self
 didFinishSelector:@selector(authentication:request:finishedWithError:)]; 
```

那么我不知道“myNSURLMutableRequest”是什么。

非常感谢任何建议

顺便说一句，我将使用 Google Task API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:32:12.777

您可以使用现有库来使用具有 OAuth 协议的服务。您不必重新发明轮子！

[https://github.com/leebyron/cocoa-oauth2](https://github.com/leebyron/cocoa-oauth2)

[https://github.com/lukeredpath/LROAuth2Client](https://github.com/lukeredpath/LROAuth2Client)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T11:49:55.883

使用此方法从钥匙串中挫败您保存的身份验证对象

GTMOAuth2Authentication *authObj; authObj = [GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:kKeychainItemName clientID:GoogleClientID clientSecret:GoogleClientSecret];

BOOL isSignedIn = [authObj canAuthorize];

# ubuntu - JAVA_HOME 未正确定义

> ID：13394722
> 
> 赞同：2
> 
> 时间：2012-11-15T09:37:12.503
> 
> 标签：ubuntu, java-home

我对 Ubuntu 很陌生，所以我会很感激一些帮助。

我正在安装 Apache ActiveMQ，为此我需要安装 maven。首先我安装了 jdk 和 jre java 包，并编辑 /etc/profile 如下：

```
JAVA_HOME=/usr/local/java/jdk1.7.0_09 
PATH=$PATH:$HOME/bin:$JAVA_HOME/bin 
JRE_HOME=/usr/local/java/jre1.7.0_09 
PATH=$PATH:$HOME/bin:$JRE_HOME/bin 
export JAVA_HOME 
export JRE_HOME 
export PATH 
```

但是当我安装 maven 时，它给了我 JAVA_HOME 的定义不正确。因此，经过小小的研究，我编辑了 /etc/bash.bashrc 并包含以下内容：

```
JAVA_HOME=/usr/local/java/jdk1.7.0_09 
export JAVA_HOME
PATH=$PATH:$JAVA_HOME/bin 
export PATH 
```

现在它显示：

```
Error: JAVA_HOME is not defined correctly.
  We cannot execute /usr/local/java/jdk1.7.0_0.9/bin/java/bin/java 
```

我确定我的错误是微不足道的，但这是我第一次使用 ubuntu 所以我无法弄清楚......我感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T17:35:43.897

在我的情况下，错误是由于回车符被附加到声明 JAVA_HOME 变量的文件中，使得错误更难追踪：

```
cat -A /etc/environment 
```

输出：

```
JAVA_HOME=/usr/java/jdk1.6.0_25^M$
TOMCAT_HOME=/usr/tomcat7^M$
M2_HOME=/usr/maven 
```

修复：

```
perl -pi -e "s/\015//g" /etc/environment 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T09:43:57.863

明确提到 `we cannot execute /usr/local/java/jdk1.7.0_0.9/bin/java/bin/java`

这条路确实不存在。如果您下载了 JDK 1.7 的 zip 发行版，请将您的路径指向解压缩的 Java 文件夹 bin 目录。

如果您已经能够从 运行`java`，`bash`只需键入`which java`，它应该会打印`installed folder`

# magento - Magento 安装从配置到管理屏幕需要一段时间 - 正常吗？

> ID：13394723
> 
> 赞同：0
> 
> 时间：2012-11-15T09:37:18.447
> 
> 标签：magento

`configuration`我刚开始使用 magento 1.7，当我在页面上输入内容（mysql db stuff 等）并单击`next`继续时，在我的本地主机上`Create admin account`，它可以工作并继续，但需要几分钟。

这对你们来说也很正常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:18:21.553

@Vojislav - 这取决于您在本地主机上运行的服务器的性能（后者主要取决于您机器的强度）。例如，如果您在安装在不太强大的计算机上的 apache+mysql 服务器（或使用 XAMPP 等软件预编译的 apache+mysql）上运行您的 magento，则 DB 步骤可能需要几分钟（在我的情况下实际上是这样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:53:24.897

当然不。您的 MySql 服务器是否在同一台机器上？这听起来像是延迟问题，或者服务器非常慢...尝试在后端启用缓存，看看是否有帮助

# android - 首先显示错误的图像，然后在滚动列表视图期间显示正确的图像

> ID：13394724
> 
> 赞同：3
> 
> 时间：2012-11-15T09:37:22.357
> 
> 标签：android, android-listview, android-adapter

> 我在我的应用程序中使用带有图像的列表视图。但是每当我滚动列表时，首先显示错误的图像，然后显示正确的图像。我不知道为什么会这样。我认为已经加载的图像显示直到位置已设置。这是我的适配器类，请帮助我哪里出错了

```
 public class MySimpleArrayAdapter extends ArrayAdapter<String> {
    private Activity context;
    ArrayList<String> namear,msgar,idar,profimage,postimage,commentsnum,objectid,urlString;
  ImageLoader imageLoader;
  Bitmap[] bitdata;

  public MySimpleArrayAdapter(Activity c,int i,ArrayList<String> postpic, ArrayList<String> names,ArrayList<String> msg,ArrayList<String> id,ArrayList<String> proimg,Bitmap[] bit,ArrayList<String> comment,ArrayList<String> objid,ArrayList<String> web) {

      super(c, i, names);
    Log.e("adapter","adap");
    this.context = c;
    this.namear = names;
    this.msgar = msg;
    this.idar = id;
    this.profimage=proimg;
    this.postimage=postpic;
    this.bitdata=bit;
    this.commentsnum=comment;
    this.objectid=objid;
    this.urlString=web;
   this.imageLoader = new ImageLoader(context);
  }

  @Override
  public View getView(final int position, View convertView, ViewGroup parent) {
  View rowView=convertView;
  ViewHolder holder = new ViewHolder();
      if(convertView == null) {
  LayoutInflater inflator = getLayoutInflater();
  rowView = inflator.inflate(R.layout.walldata, null);

  holder.name1 = (TextView) rowView.findViewById(R.id.name);
  holder.message1 = (TextView) rowView.findViewById(R.id.msg);
  holder.profimg= (ImageView) rowView.findViewById(R.id.profile_pic);
  holder.postimg= (ImageView) rowView.findViewById(R.id.picpost);
  holder.comments = (TextView) rowView.findViewById(R.id.comment);
  rowView.setTag(holder);
     Log.e("user",idar.get(position));
      }
      else
         {
          holder = (ViewHolder) rowView.getTag();
         }
    Log.e("adapter","adap");
    holder.name1.setText(namear.get(position));
    if(msgar.get(position)!=""){
        holder.message1.setText(msgar.get(position));

    }
    else
    {
        holder.message1.setVisibility(View.GONE);
    }
    if(!postimage.get(position).equals(""))
    {try{
         imageLoader.DisplayImage(postimage.get(position).replace(" ", "%20"), holder.postimg) ;

    }
    catch(Exception e){
        e.printStackTrace();
    }
    }
    else
    {
         holder.postimg.setVisibility(View.GONE);
    }
    try{
      imageLoader.DisplayImage(profimage.get(position).replace(" ", "%20"), holder.profimg) ;
    }
    catch(Exception e){
       e.printStackTrace();
    }

    holder.comments.setText(commentsnum.get(position)+"\t"+"Comments");
    holder.comments.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent myintent=new Intent(Wall.this,Comments.class);
            myintent.putExtra("name", namear.get(position));
            myintent.putExtra("profimg", profimage.get(position));
            myintent.putExtra("message", msgar.get(position));
            myintent.putExtra("postpic", postimage.get(position));
            myintent.putExtra("objectid", objectid.get(position));
            myintent.putExtra("commentsnum",commentsnum.get(position));
            myintent.putExtra("webservice", urlString.get(position));
            startActivity(myintent);

        }
    });

    return rowView;
  }

}
public class ViewHolder{
    TextView name1, message1,comments;
    ImageView profimg,postimg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:41:15.920

确保在 getView 方法中尽早将 ImageView 中的图像设置为 null。由于 ListView 正在重用列表项，因此将显示旧的，直到设置了新的。

# mysql - 如何从数据库中选择工作日范围？

> ID：13394725
> 
> 赞同：0
> 
> 时间：2012-11-15T09:37:22.293
> 
> 标签：mysql, sql

我有类似的查询

```
SELECT uq.timespan, COALESCE(tsq.TotalClicks, 0) as Clicks FROM (
SELECT '22-28 days' as timespan
union SELECT '15-21 days'
union SELECT '8-14 days'
union SELECT 'up to 7 days'
)uq LEFT JOIN (
SELECT CASE 
    WHEN submitdate >= NOW() - INTERVAL 4 WEEK
                AND submitdate < NOW() - INTERVAL 3 WEEK THEN '22-28 days'
    WHEN submitdate >= NOW() - INTERVAL 3 WEEK
                AND submitdate < NOW() - INTERVAL 2 WEEK THEN '15-21 days'
    WHEN submitdate >= NOW() - INTERVAL 2 WEEK
        AND submitdate < NOW() - INTERVAL 1 WEEK THEN '8-14 days'
    WHEN submitdate >= NOW() - INTERVAL 1 WEEK THEN 'up to 7 days'
           END Weeksubmitdate, 
           count(id) TotalClicks
FROM $survey
WHERE submitdate >= NOW() - INTERVAL 4 WEEK
GROUP BY Weeksubmitdate
)tsq ON uq.timespan = tsq.Weeksubmitdate 
```

它的输出就像

```
22-28 days  4
15-21 days  1
8-14 days   1
up to 7 days    11 
```

现在我想用工作日改变输出

```
mon-sun     2
mon-sun     0
mon-sun     7
mon-sun     5 
```

假设现在我在星期四，这应该算在这周的星期一。

# asp.net - 是否有适用于 .NET 的 OpenSocial 插件

> ID：13394727
> 
> 赞同：1
> 
> 时间：2012-11-15T09:37:29.673
> 
> 标签：asp.net, webforms, opensocial

是否有一个好的 NET 框架 opensocial nuget 包或插件可用。在 stackoverflow 上搜索，似乎这个问题是 3 年前提出的，并且没有成熟的活动库。

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T12:04:07.290

这是 MySpace [http://code.google.com/p/negroni/曾经使用的那个](http://code.google.com/p/negroni/)

# c# - 将列值从表复制到表，跳过前 3 行

> ID：13394730
> 
> 赞同：0
> 
> 时间：2012-11-15T09:37:38.657
> 
> 标签：c#, datatable, copy, two-columns

我有个问题。我有 2 个数据表，想将第一个表的 3 列复制到另一个表的 3 列。我怎样才能跳过 3 第一行然后将值添加到 2.table？

我的代码如下所示：

```
 foreach (DataRow ex1 in excelTb1.Rows)
            {
                foreach (DataRow ex2 in excelTb2.Rows)
                {                      

                    //ex2["ABC"] = ex1["ABC"];      // with skip(3) ?
                    //ex2["Name"] = ex1["Name"];
                    //ex2["ID"] = ex1["ID"];
                }
            } 
```

我的 1.table：***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_ _* _**我的 2.table 应该看起来像这样：

```
 Table1                               Table2
ABC   Name   ID  ...                     ABC   Name   ID    ...                     
 a     lola   2  ...                     ...   ...    ...   ... 
 b     kiki   6  ...                     ...   ...    ...   ... 
...    ...   ... ...                     ...   ...    ...   ... 
                                         a     lola   2     ...
                                         b     kiki   6     ...        
                                         ...   ...    ...   ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:40:14.767

> 跳过前 3 行

使用 For 循环而不是 foreach。

```
for(int i=3; i < excelTb2.Rows.Count; i++) //start the loop with index 3 => Row 4
{
    DataRow ex2 = exceltb2.Rows[i];
    //ex2["ABC"] = ex1["ABC"];      // with skip(3) ?
    //ex2["Name"] = ex1["Name"];
    //ex2["ID"] = ex1["ID"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:46:28.387

```
for (int i = 0; i < excelTb1.Rows.Count; i++)
{
     DataRow dr1 = excelTb1.Rows[i];

     if (excelTb2.Rows.Count > i + 3)
     {
         DataRow dr2 = excelTb2.Rows[i + 3];
         dr2["ABC"] = dr1["ABC"];
         dr2["Name"] = dr1["Name"];
         dr2["ID"] = dr1["ID"];
     }
     else
         break;
} 
```

# asp.net - 运行 SignalR 时对象不支持属性或方法“hubConnection”

> ID：13394735
> 
> 赞同：0
> 
> 时间：2012-11-15T09:37:49.320
> 
> 标签：asp.net, signalr

我正在用 SignalR 润湿我的腿，并从一个简单的教程开始。

问题是，当我运行应用程序时，我收到以下错误消息：

> 对象不支持属性或方法“hubConnection”

我的HTML如下：

```
<script src="/Scripts/jquery-1.8.2.js"></script>
<script src="/Scripts/jquery.signalR-0.5.2.js"></script>
<script src="/signalr/hubs" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {

        var test = $.connection.messagesHub;

        test.addNewMessage = function (message) {
            $('#messages').append('<li>' + message + '');
        };

        $('#broadcast').click(function () {
            test.addMessage($('#message').val());
        });

        $.connection.hub.start();

    });
</script> 
```

Hub的代码是：

```
[HubName("messagesHub")]
public class MessagesHub : Hub
{
    public void addMessage(string message)
    {            
        Clients.addNewMessage(message);
    }
} 
```

如果我尝试直接浏览到 /signalr/hubs，我会得到 js 内容。

我错过了什么？我就是找不到问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:58:56.207

根据[宣布 SignalR 0.5.3 发布](http://blogs.msdn.com/b/webdev/archive/2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx)hubConnection 对象是 v0.5.3 中的新对象，但您使用的是 v0.5.2。

# javascript - 在 drupal 7 中播放视频

> ID：13394737
> 
> 赞同：0
> 
> 时间：2012-11-15T09:38:03.413
> 
> 标签：javascript, html, drupal, drupal-7

我想在基于 Drupal 7 的站点中播放视频。我的要求很简单。应该有一个播放按钮来播放视频。视频将在托管网站的同一台服务器上。没有选择使用 HTML 5。视频必须在 IE8 和其他主要浏览器（如 firefox 和 chrome 等）中播放。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:42:44.310

嗨检查这个[JW 播放器](http://drupal.org/project/jw_player)希望它会帮助你 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:39:04.937

我过去（Drupal 6）在 Drupal 的 flowplayer 和 flowplayer 模块方面有过很好的经验：

*   [http://flowplayer.org/](http://flowplayer.org/)
*   [http://drupal.org/project/flowplayer](http://drupal.org/project/flowplayer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:46:55.920

我会选择[mediaelement.js](http://mediaelementjs.com/)，它可以很好地支持支持 HTML5 的浏览器以及旧浏览器

# iphone - 如何在 WEPopover 中删除或不显示箭头

> ID：13394740
> 
> 赞同：1
> 
> 时间：2012-11-15T09:38:07.877
> 
> 标签：iphone, ios, xcode, popup, popover

我的问题是是否可以使用 WEPopover 不显示箭头，或者是否有任何方法可以在 Iphone 中显示不带箭头的弹出框。我可以用子视图做到这一点，但我知道如何对其进行编程。

# python - 如何使用 django 将我的 sqlite3 数据库转储到 UTF8 中的 SQL？

> ID：13394741
> 
> 赞同：3
> 
> 时间：2012-11-15T09:38:13.540
> 
> 标签：python, unicode, utf-8, sqlite

有没有人知道如何解决下一个问题？

现在我正在使用这段代码：

```
def databasedump(request):
    # Convert file existing_db.db to SQL dump file dump.sql
    con = sqlite3.connect('database.sqlite')
    with open('dump.sql', 'w') as f:  
        for line in con.iterdump():
            f.write('%s\n' % line) 
```

我得到这个错误：

> 异常类型：
> UnicodeEncodeError
> 
> 异常值：
> 'ascii' 编解码器无法对位置 112 中的字符 u'\xe9' 进行编码：序数不在范围内（128）

无法编码/解码的字符串是：（Arivé，PAK

感谢您查看这个！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:43:33.357

`sqlite3`转储代码中有一个错误，在 Python 错误跟踪器中被跟踪为[问题 15019 。](http://bugs.python.org/issue15109)

您可以通过编辑`sqlite3/dump.py`文件并在顶部添加以下行来解决此问题：

```
from __future__ import unicode_literals 
```

通过运行以下命令找到该文件：

```
python -c 'import sqlite3.dump; print sqlite3.dump.__file__.rstrip("c")' 
```

您必须调整行编写代码以编码现在将从`.iterdump()`方法返回的 unicode 值：

```
with open('dump.sql', 'w') as f:  
    for line in con.iterdump():
        f.write('%s\n' % line.encode('utf8')) 
```

如果您对编辑 Python 标准库源文件感到不舒服，请改用以下（固定和缩短的）函数：

```
def iterdump(connection):
    cu = connection.cursor()
    yield(u'BEGIN TRANSACTION;')

    q = """
        SELECT "name", "type", "sql"
        FROM "sqlite_master"
            WHERE "sql" NOT NULL AND
            "type" == 'table'
        """
    schema_res = cu.execute(q)
    for table_name, type, sql in sorted(schema_res.fetchall()):
        if table_name == 'sqlite_sequence':
            yield(u'DELETE FROM "sqlite_sequence";')
        elif table_name == 'sqlite_stat1':
            yield(u'ANALYZE "sqlite_master";')
        elif table_name.startswith('sqlite_'):
            continue
        else:
            yield(u'{0};'.format(sql))

        table_name_ident = table_name.replace('"', '""')
        res = cu.execute('PRAGMA table_info("{0}")'.format(table_name_ident))
        column_names = [str(table_info[1]) for table_info in res.fetchall()]
        q = """SELECT 'INSERT INTO "{0}" VALUES({1})' FROM "{0}";""".format(
            table_name_ident,
            ",".join("""'||quote("{0}")||'""".format(col.replace('"', '""')) for col in column_names))
        query_res = cu.execute(q)
        for row in query_res:
            yield(u"{0};".format(row[0]))

    q = """
        SELECT "name", "type", "sql"
        FROM "sqlite_master"
            WHERE "sql" NOT NULL AND
            "type" IN ('index', 'trigger', 'view')
        """
    schema_res = cu.execute(q)
    for name, type, sql in schema_res.fetchall():
        yield(u'{0};'.format(sql))

    yield(u'COMMIT;') 
```

像这样使用上面的：

```
con = sqlite3.connect('database.sqlite')
with open('dump.sql', 'w') as f:  
    for iterdump(con):
        f.write('%s\n' % line.encode('utf8')) 
```

# android - WiFi模块与Android手机通信

> ID：13394745
> 
> 赞同：2
> 
> 时间：2012-11-15T09:38:25.870
> 
> 标签：android, wifi, gpio

我正在做一个项目，它是一个 android 控制的 LED 灯。该 LED 连接到 LED 控制器，该控制器连接到 WiFi 模块 ( [WizFi220](http://www.wiznet.co.kr/Sub_Modules/en/product/Product_Detail.asp?cate1=&cate2=&cate3=&pid=1134) )。WiFi 模块使用 GPIO 接口向 LED 控制器发送数据。Android 手机通过 TCPSocket 发送数据。

到目前为止，我已经实现了编写一个简单的服务器-客户端通信，并且服务器是在普通 PC 上用 Java 实现的。它运作良好。（例如，如果我按下 android 设备上的按钮，PC 上的服务器程序会向控制台打印一些内容）

问题是我应该向 WizFi 模块发送什么才能理解......如果它来自 GPIO 接口，“命令”会到达 LED 控制器，例如它打开/关闭、改变颜色或任何东西。（因为 LED 是 RGB LED）

感谢您的回答和帮助。

# objective-c - TableViewCell displays incorrectly in iOS 6

> ID：13394752
> 
> 赞同：3
> 
> 时间：2012-11-15T09:39:00.153
> 
> 标签：objective-c, uitableview, ios6, uiactivityindicatorview

I have an annoying problem with displaying `UITableViewCell` with `UIActivityIndicatorView` inside. My tableView delegate loads portions of data. The last cell always indicates loading process while new portion is not loaded. Loading starts in `tableView: willDisplayCell: forRowAtIndexPath:`.So in iOS 5 (or iOS 5 simulator) it works perfectly, but in iOS 6 (or iOS 6 simulator) `UIActivityIndicatorView` displays only for the first time. Maybe something was deprecated since iOS 6 or it's iOS 6 bug?

Here is my dataSource:

```
- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
    UITableViewCell* cell = nil;
    if (_callback != nil && !_noMoreBooks && indexPath.row == [_books count])
    {
        cell = [tableView dequeueReusableCellWithIdentifier:LTTableViewLoadMoreCellIdentifier];
        if (cell == nil)
        {
            cell = [[[LTLoadMoreCell alloc] initWithStyle:UITableViewCellStyleDefault
                                          reuseIdentifier:LTTableViewLoadMoreCellIdentifier] autorelease];
            [(LTLoadMoreCell*)cell setRowTag:-1];
        }
    }
    else
    {
        cell = [tableView dequeueReusableCellWithIdentifier:LTTableViewCellIdentifier];
        if (cell == nil)
        {
            cell = [[[LTBookCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:LTTableViewCellIdentifier] autorelease];
            cell.selectionStyle = UITableViewCellSelectionStyleGray;
            ((LTBookCell*)cell)._hidePrice = NO;
        }
    }
    return cell;
} 
```

Here's my delegate:

```
- (void)tableView:(UITableView*)tableView willDisplayCell:(UITableViewCell*)cell forRowAtIndexPath:(NSIndexPath*)indexPath
{
    if ([LTTableViewLoadMoreCellIdentifier isEqualToString:[cell reuseIdentifier]]
        && [(LTLoadMoreCell*)cell rowTag] != indexPath.row)
    {
        [(LTLoadMoreCell*)cell setRowTag:indexPath.row];
        NSUInteger remain = LT_STORE_BOOK_LIST_LIMIT - rowsLoaded;
        NSUInteger by = remain < LT_STORE_BOOKS_LOAD_PORTION ? remain : LT_STORE_BOOKS_LOAD_PORTION;
        _currentError = _callback(_genres, rowsLoaded, by);
        if (_currentError == LTNoInternetError)
        {
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YES];
        }
        else if (_currentError != LTErrorNone)
        {
            _noMoreBooks = YES;
        }
    }
    else if ([LTTableViewCellIdentifier isEqualToString:[cell reuseIdentifier]])
    {
        if ((indexPath.row == rowsLoaded-1) && _currentError == LTNoInternetError)
        {
            NSUInteger remain = LT_STORE_BOOK_LIST_LIMIT - rowsLoaded;
            NSUInteger by = remain < LT_STORE_BOOKS_LOAD_PORTION ? remain : LT_STORE_BOOKS_LOAD_PORTION;
            _currentError = _callback(_genres, rowsLoaded, by);
            if (_currentError == LTErrorNone)
                [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewScrollPositionBottom];
        }
        LTBook* rowBook = [_books extraObjectAtIndex:indexPath.row];
        if (rowBook != nil)
        {
            ((LTBookCell*)cell)._book = rowBook;
            ((LTBookCell*)cell).isOdd = (indexPath.row % 2);
        }
    }
} 
```

And this is LoadMoreCell.m:

```
#import "LTLoadMoreCell.h"

@implementation LTLoadMoreCell

@synthesize rowTag;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString*)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self)
    {
        _activityIndicatorView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
        [_activityIndicatorView startAnimating];
        [[self contentView] addSubview:_activityIndicatorView];
        [self setUserInteractionEnabled:NO];
    }

    return self;
}

- (void)dealloc
{
    [_activityIndicatorView release];
    [super dealloc];
}

#pragma mark -
#pragma mark *** UITableViewCell methods ***
#pragma mark -

- (void)layoutSubviews
{
    [super layoutSubviews];
    [_activityIndicatorView setAutoresizingMask:UIViewAutoresizingNone];
    CGSize cellSize = [[self contentView] frame].size;
    [_activityIndicatorView setCenter:CGPointMake(cellSize.width / 2, cellSize.height / 2)];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T11:21:31.327

Apparently animation stops in some moment, i don't understand why this happens only in iOS 6\. So I removed `[_activityIndicatorView startAnimating];` from init method and added to `layoutSubviews` this:

```
if(![_activityIndicatorView isAnimating])
       [_activityIndicatorView startAnimating]; 
```

I think it's iOS 6 bug.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:53:40.603

you call [activyView startAnimating] in your cell's INIT method only.. try calling it before you want it to animate :: willDisplayCell or even viewForCell

# c# - 使用 SemanticZoom 控件滚动滞后

> ID：13394754
> 
> 赞同：1
> 
> 时间：2012-11-15T09:39:03.257
> 
> 标签：c#, xaml, windows-8, windows-store-apps, semantic-zoom

我使用 SemanticZoom 控件来显示大约 350 个项目，并使用名称的首字母对它们进行分组。这些项目没有很多信息，实际上它们只有文本，因此它会尽可能轻。

该应用程序运行良好，因为它非常快速地加载数据并正确显示它们而没有任何延迟。我的问题是当我尝试向右或向左滚动时会有很大的滞后并且滚动不流畅。

我应该怎么做才能优化滚动的性能才能正常工作？我有一个 i7 处理器，所以我想它在旧电脑中会最差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:07:05.123

将 ItemsPanel 中的 VirtualizingStackPanel 替换为普通的 StackPanel。

# c# - 如何在 linq-to-Nhibernate 中使用多个条件连接

> ID：13394759
> 
> 赞同：14
> 
> 时间：2012-11-15T09:39:14.443
> 
> 标签：c#, linq, nhibernate, join, linq-to-nhibernate

我有两个课程（Request 和 RequestDetail）。我需要`Linq To NHibernate`通过连接在两个类之间进行查询。

```
var q = SessionInstance.Query<Request>()
       .Where(x => x.State == "Init");

var q2 = SessionInstance.Query<RequestDetail>();
q2 = q2.Where(xx => xx.Purpose.Contains("Purpose Sample")); // This line has a error When execution ‍‍`q.ToList()‍`

q = q.Join(q2, request => request.Id, detail => detail.Id, (request, detail) => request);

return q.ToList(); 
```

当我向 中添加`Where`条件时`q2`，结果出现运行时错误。异常消息是：`Specified method is not supported.`

堆栈跟踪 ：

```
 at NHibernate.Hql.Ast.ANTLR.PolymorphicQuerySourceDetector.GetClassName(IASTNode querySource)
   at NHibernate.Hql.Ast.ANTLR.PolymorphicQuerySourceDetector.Process(IASTNode tree)
   at NHibernate.Hql.Ast.ANTLR.AstPolymorphicProcessor.Process()
   at NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(IASTNode ast, String queryIdentifier, String collectionRole, Boolean shallow, IDictionary`2 filters, ISessionFactoryImplementor factory)
   at NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(String queryIdentifier, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 filters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.QueryPlanCache.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow, IDictionary`2 enabledFilters)
   at NHibernate.Impl.AbstractSessionImpl.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow)
   at NHibernate.Impl.AbstractSessionImpl.CreateQuery(IQueryExpression queryExpression)
   at NHibernate.Linq.NhQueryProvider.PrepareQuery(Expression expression, IQuery& query, NhLinqExpression& nhQuery)
   at NHibernate.Linq.NhQueryProvider.Execute[TResult](Expression expression)
   at Remotion.Data.Linq.QueryableBase`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
```

为什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-16T05:33:30.860

这可能是一个错误。

这是您的问题的解决方法：

```
var q = (from request in session.Query<Request>()
        join detail in session.Query<RequestDetail>() on request.Id equals detail.Id
        where request.State == "Init" && detail.Purpose.Contains("Purpose Sample")
        select request).ToList(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-03T12:56:40.893

用流利的符号：

```
var q = session.Query<Request>()
        .Join(session.Query<RequestDetail>(), request => request.Id, detail => detail.Id, (request, detail) => new {
            r = request,
            d = detail
        })
        .Where(rd => rd.r.State == "Init" && rd.d.Purpose.Contains("Purpose Sample"))
        .Select(rd => rd.r)
        .ToList(); 
```

# reporting-services - Dynamics AX 2009 SSRS 2008 报告邮件订阅

> ID：13394766
> 
> 赞同：0
> 
> 时间：2012-11-15T09:39:42.727
> 
> 标签：reporting-services, axapta, subscription, dynamics-ax-2009

我在为 AX SSRS 报告创建邮件订阅时遇到了一些问题。

我在报告中放入了集成凭据，但订阅仍然返回异常：

> 报告处理过程中发生错误。

报告在浏览器中使用报告参数的值工作。从日志文件中我提取了错误：

```
e ERROR: An exception has occurred in data source 'AutoGen___Query'. Details: Microsoft.ReportingServices.ReportProcessing.ReportProcessingException: Failed to close connection for data source 'AutoGen___Query'. ---> System.TypeInitializationException: The type initializer for 'Container' threw an exception. ---> System.Security.SecurityException: Request failed.
processing!WindowsService_0!f48!11/15/2012-03:35:04:: i INFO: Some other thread has already aborted processing.
processing!WindowsService_0!f48!11/15/2012-03:35:04:: e ERROR: Throwing Microsoft.ReportingServices.ReportProcessing.ProcessingAbortedException: , Microsoft.ReportingServices.ReportProcessing.ProcessingAbortedException: An error has occurred during report processing. ---> Microsoft.ReportingServices.ReportProcessing.ReportProcessingException: Query execution failed for dataset 'BankAccountParam'. ---> System.TypeInitializationException: The type initializer for 'Container' threw an exception. ---> System.Security.SecurityException: Request failed.
--- End of inner exception stack trace ---; 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:02:11.467

不幸的是，在 2009 年，您将不得不重新编写报告以避免使用数据源“AutoGen___Query”——业务逻辑、AX 查询等

或创建批处理作业以通过电子邮件发送报告。

# c# - 在覆盖的 SaveChanges 方法中使用 ChangeTracker 时引发 ArgumentException

> ID：13394767
> 
> 赞同：0
> 
> 时间：2012-11-15T09:39:51.040
> 
> 标签：c#, entity-framework, entity-framework-5, change-tracking

我覆盖了 SaveChanges 方法来审核 EntityFramework 中的更改。在我尝试更新关联对象之前，它工作正常。当我尝试更新关联对象时，我得到 ArgumentException。我发现从 ChangeTracker 读取实体后会引发异常。如果我在覆盖的 SaveChanges 方法中对 ChangeTracker 不执行任何操作，则对象将成功更新。我使用 EntityFramework 5.0。

你不知道这是一个错误还是我做错了什么？

抛出异常：

> System.ArgumentException 被捕获 HResult=-2147024809
> Message=定义 EntityKey 的键值对不能为 null 或空。参数名称：记录 Source=System.Data.Entity
> ParamName=record StackTrace：在 System.Data.EntityKey.GetKeyValues(EntitySet entitySet, IExtendedDataRecord record, String[]& keyNames, Object& singletonKeyValue, Object[]&compositeKeyValues) at System.Data .EntityKey..ctor(EntitySet entitySet, IExtendedDataRecord 记录) 在 System.Data.Objects.ObjectStateManager.PerformDelete(IList`1 entries) at System.Data.Objects.ObjectStateManager.DetectChanges() at System.Data.Objects.ObjectContext.DetectChanges() at System.Data.Entity.Internal.InternalContext.DetectChanges(Boolean force) at System.Data.Entity.Internal.InternalContext.GetStateEntries(Func`2 谓词）在 System.Data.Entity.Infrastructure.DbChangeTracker.Entries() 的 System.Data.Entity.Internal.InternalContext.GetStateEntries() 在 System.Data.Entity.DbContext.GetValidationErrors() 在 System.Data.Entity。 Internal.InternalContext.SaveChanges() 在 System.Data.Entity.Internal.LazyInternalContext.SaveChanges() 在 System.Data.Entity.DbContext.SaveChanges() 在 EFTest2.BlogContext.SaveChanges() 在 c:\Projects\EF22\EFTest2Solution \EFTest2\Context.cs：EFTest2.Program.Main(String[] args) 中的第 37 行：\Projects\EF22\EFTest2Solution\EFTest2\Program.cs:第 42 行

我的代码是这样的：Program.cs

```
 class Program
  {
    static void Main(string[] args)
    {
      var configuration = new Configuration();
      configuration.TargetDatabase = new DbConnectionInfo("Data Source=server;Initial Catalog=EntityFramework;Integrated Security=True", "System.Data.SqlClient");
      var migrator = new DbMigrator(configuration);

      var scriptor = new MigratorScriptingDecorator(migrator);
      var script = scriptor.ScriptUpdate(sourceMigration: null, targetMigration: null);
      Console.WriteLine(script);

      var pending = migrator.GetPendingMigrations();

      migrator.Update();

      using (var ctx = new BlogContext())
      {
        Post post = new Post { Content = "Content", SpecialBlog = new Blog() { Title = "SpecialBlog" } };
        ctx.Posts.Add(post);
        ctx.SaveChanges();

        post.SpecialBlog = new Blog() { Title = "Update SpecialBlog" };

        ctx.SaveChanges(); // ArgumentException is thrown when using ChangeTracker
      }
    }
  } 
```

模型

```
 public class Blog
  {
    public int? BlogId { get; set; }
    public string Title { get; set; }
    public ICollection<Post> Posts { get; set; }
  }

  public partial class BlogMap : EntityTypeConfiguration<Blog>
  {
    public BlogMap()
      : base()
    {
      HasKey(c => c.BlogId);
      Property(c => c.Title).IsRequired().HasMaxLength(40);
      ToTable("Blog");
    }
  }

  public class Post 
  {
    public int? PostId { get; set; }
    public string Content { get; set; }

    public int? BlogId { get; set; }
    public Blog Blog { get; set; }
    public int? SpecialBlogId { get; set; }
    public Blog SpecialBlog { get; set; }
  }

  public partial class PostMap : EntityTypeConfiguration<Post>
  {
    public PostMap()
      : base()
    {
      HasKey(c => c.PostId);

      Property(c => c.Content);

      HasOptional(m => m.Blog)
                    .WithMany(t => t.Posts)
                    .HasForeignKey(m => m.BlogId)
                    .WillCascadeOnDelete(false);

      HasOptional(m => m.SpecialBlog)
                    .WithMany()
                    .HasForeignKey(m => m.SpecialBlogId)
                    .WillCascadeOnDelete(false);

      ToTable("Post");
    }
  } 
```

语境：

```
 public class BlogContext : DbContext
  {
    public DbSet<Blog> Blogs { get; set; }
    public DbSet<Post> Posts { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
      Database.SetInitializer(new DropCreateDatabaseAlways<BlogContext>());

      modelBuilder.Configurations.Add(new PostMap());
      modelBuilder.Configurations.Add(new BlogMap());
    }

    public override int SaveChanges()
    {
      var entries = ChangeTracker.Entries(); // causes ArgumentNullException after calling base.SaveChanges();

      return base.SaveChanges();
    }
  } 
```

配置

```
 public class Configuration : DbMigrationsConfiguration<BlogContext>
  {
    public Configuration()
    {
      AutomaticMigrationsEnabled = true;
      AutomaticMigrationDataLossAllowed = true;
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:49:21.140

来自 msdn 的反应......这是一个错误。要解决此问题，必须使用不可为空的主键。

EF codeplex 站点报告了错误：[使用可为空的主键调用两次检测更改时引发的异常](http://entityframework.codeplex.com/workitem/663)

# java - 在 Maven 子项目中需要不同版本的相同依赖项

> ID：13394768
> 
> 赞同：3
> 
> 时间：2012-11-15T09:39:56.017
> 
> 标签：java, maven, dependencies

我想在 Eclipse 中测试 Java 休息服务器和休息客户端的集成。hello-client 和 hello-server 项目都依赖于同一个 hello-model jar 文件（包含 POJO）。

问题是我想检查客户端或服务器的不同版本，能够在 eclipse 中编辑代码并能够调试测试——即使它们依赖于不同版本的 hello-model。

我尝试使用 Maven shade 插件来重命名服务器中的模型包：

hellopojo.model -> hellopojo.server.model

但它不会影响 Eclipse（我想是错误的 Maven 阶段）。

```
<build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version>2.0</version>
    <executions>
      <execution>
        <phase>package</phase>
        <goals>
          <goal>shade</goal>
        </goals>
        <configuration>
          <relocations>
            <relocation>
              <pattern>hellopojo.model</pattern>
              <shadedPattern>hellopojo.server.model</shadedPattern>
            </relocation>
          </relocations>
        </configuration>
      </execution>
    </executions>
  </plugin>
</plugins>
</build> 
```

下面是单元测试代码：

```
@Parameters({"port"})
@BeforeClass
public static void startWebapp(
@Optional("8081") int port) throws Exception {

    restUri = "http://localhost:"+port+"/rest";
    client = new HelloClient(new URI(restUri));

    server = new Server(port);
    server.setHandler(createWebAppContext());
    server.start();
}

private static ServletContextHandler createWebAppContext() {
    ServletContextHandler handler = new ServletContextHandler(ServletContextHandler.SESSIONS);
    handler.setContextPath("/");
    ServletHolder servlet = new ServletHolder(new ServletContainer());
    servlet.setInitParameter(
        "com.sun.jersey.config.property.packages", 
        HelloResource.class.getPackage().getName());
    servlet.setInitParameter(
        "com.sun.jersey.api.json.POJOMappingFeature" ,
        "true");
    handler.addServlet(servlet, "/rest/*");
    return handler;
}

@AfterClass
public static void stopWebapp() throws Exception {
    server.stop();
} 
```

关于 stackoverflow 的相关问题： [测试不同客户端和服务器版本的最佳 Git 策略](https://stackoverflow.com/questions/13314017/best-git-strategy-for-testing-different-client-and-server-versions)

完整代码： [https ://github.com/itaifrenkel/hellopojo/blob/master/hellopojo-test/src/test/java/hellopojo/test/HelloTest.java](https://github.com/itaifrenkel/hellopojo/blob/master/hellopojo-test/src/test/java/hellopojo/test/HelloTest.java)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:26:21.010

我们使用 Maven 项目的 dependencyManagement 概念来处理这个问题。

第 1 步 - 在客户端和服务器项目的父 pom 中声明dependencyManagement。

第 2 步 - 在客户端和服务器项目的依赖项部分覆盖版本信息。

这可能会帮助您通过测试范围类路径。我不确定它会对编译范围类路径做什么。

# activerecord - 在 Yii 中覆盖 ActiveRecord 获取属性

> ID：13394779
> 
> 赞同：2
> 
> 时间：2012-11-15T09:40:25.297
> 
> 标签：activerecord, yii, overriding

在我的某些属性的 Yii 模型中，当真实属性为空或为空时，我想返回一些默认值。

例如说我有一个`display_name`财产。当它还没有设置时，我想退回`first_name`.

到目前为止，我一直在使用的工作是创建一个具有不同名称的新方法并改为调用这个方法。但是，如果我可以通过简单地调用`$model->display_name`正常方式来实现这一点，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:53:51.370

我可能已经找到了自己的答案。我正在`__get()`检查这是否是我正在寻找的财产。我不确定这是否被认为是“最佳实践”。

```
public function __get($name) {
            $current = parent::__get($name);
            switch($name){
                case 'display_name':
                    if(empty($current)){
                        return $this->first_name;
                    }
                    else{
                        return $current;
                    }
                    break;
                default:
                    return $current;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:14:10.930

扩展的类`CComponent`，包括`CModel`，`CActiveRecord`首先会寻找一个 getter 方法。

在您的示例中，您将必须定义一个 getter 函数：

```
public function getdisplay_name() {
    if (! empty($this->display_name)) {
        return $this->display_name;
    } else {
        return $this->first_name;
    }
} 
```

# magento - 升级magento的事实上的方法

> ID：13394780
> 
> 赞同：1
> 
> 时间：2012-11-15T09:40:42.597
> 
> 标签：magento

如果有的话，将 Magento 升级到新版本的事实标准方法是什么。

我知道有很多变数在起作用。但肯定必须有一套必须遵循的标准步骤。

到目前为止，我认为它是这样的：

```
Create a mirror of the site
Disable all 3rd party modules
Do the upgrade
Fix any issues
Enable 3rd party modules
Fix any issues 
```

但是我很想听听其他经历过这个过程并且有经验在这里做什么的人，因为那里有很多相互矛盾的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:48:07.103

我们的数据库大约有 10 个演出，我们有大约 800,000 种“产品”（其中许多实际上是捆绑产品中的选项，但在大多数情况下相当于相同的东西）。所以这对你来说可能不是必需的......几周前我们从 1.9 升级到了 1.12。我进行了无数次彩排，在此过程中我不得不修复不良数据。

1.  确保您是唯一能够访问服务器的人。例如让 apache 监听一个奇怪的端口。
2.  我们从 1.9 升级到 1.12 大约需要 3.5 小时，因此请相应地延长您的超时时间。

我不得不修改一些核心文件来关闭唯一和外键检查。您应该能够通过修改 config.xml 或 local.xml 来做到这一点，但这对我们不起作用。

./app/code/core/Mage/Core/Model/Resource/Type/Db/Pdo/Mysql.php：

```
$configArr['initStatements'] = 'SET NAMES utf8; SET FOREIGN_KEY_CHECKS=0; SET UNIQUE_CHECKS=0;'; 
```

./app/code/core/Mage/Core/Model/Resource/Type/Db/Mysqli.php：

```
$configArr['initStatements'] = 'SET NAMES utf8; SET FOREIGN_KEY_CHECKS=0; SET UNIQUE_CHECKS=0;'; 
```

./app/code/core/Mage/Core/Model/Resource.php：

```
$config['initStatements'] = 'SET NAMES utf8; SET FOREIGN_KEY_CHECKS=0; SET UNIQUE_CHECKS=0;'; 
```

我需要运行的数据库查询

```
-- Log tables to truncate
truncate log_url;
truncate log_url_info;
truncate log_visitor;
truncate log_visitor_info;
truncate log_visitor_online;

-- Truncate other large unnecessary tables
truncate op_imagecdn_cache;
truncate core_session;
truncate report_viewed_product_index;
truncate report_compared_product_index;
truncate core_cache;
truncate core_cache_tag;

-- Delete old quotes
DELETE FROM sales_flat_quote WHERE updated_at < DATE_SUB(Now(),INTERVAL 60 DAY);

truncate core_url_rewrite; -- You may not want to do this. We had 2.5 million entries...
truncate report_event;
truncate index_process_event;
truncate index_event;
truncate amazonpayments_api_debug;

-- drop all flat category and flat product tables 
drop table catalog_category_flat_store_1; -- etc.

drop table catalog_product_flat_1; --etc. 
```

然后运行你的索引器。

# php - 删除标题标签

> ID：13394782
> 
> 赞同：-6
> 
> 时间：2012-11-15T09:40:51.970
> 
> 标签：php

任何人都可以帮助使用可以删除的常规快递： `[caption id="attachment_116" align="alignnone" width="300"]`

可能`*`是什么： `[caption * ]`

干杯 - 在 PHP 中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:16:36.240

然后试试这个模式：

```
(\[caption\s+?[^]]+\]) 
```

用这个模式替换将删除所有`[caption * ]`

# java - java.io.IOException：发布的内容类型不是 multipart/form-data

> ID：13394784
> 
> 赞同：2
> 
> 时间：2012-11-15T09:41:02.417
> 
> 标签：java, jsp

我已经编写了一个jsp页面，用于使用POST方法上传图像，`com.oreilly.servlet.multipart.MultipartParser`实际使用文件成功上传并且发布值也正确但它抛出异常

```
java.io.IOException: Posted content type isn't multipart/form-data 
MultipartParser mp = null;
try{
 mp = new MultipartParser(request, 1*1024*1024); // 10MB
 }
 catch(Exception e){
 out.println("Exception1:"+e);
 }
while ((part = mp.readNextPart()) != null) {
        name = part.getName();
        if (part.isParam()) {
            ParamPart paramPart = (ParamPart) part;
            value = paramPart.getStringValue();
            if(name.equals("companyname") && value != null){                

            }

            if(name.equals("version") && value != null && name != null){

            }

        }
        else if (part.isFile()) {
            String getimagelogovalue="";
            FilePart filePart = (FilePart) part;
            String fileName = filePart.getFileName();
            if (fileName != null) {

            }
            else {}
            out.flush();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:52:07.170

我认为您在这里编写的代码是服务器端代码，假设您正在做一个发布表单 JSP，您的代码应该如下所示

```
<FORM action="http://server.com/cgi/handle"
       enctype="multipart/form-data"
       method="post">
   <P>
   What is your name? <INPUT type="text" name="submit-name"><BR>
   What files are you sending? <INPUT type="file" name="files"><BR>
   <INPUT type="submit" value="Send"> <INPUT type="reset">
 </FORM> 
```

请参阅 enctype 属性。我们还可以看到客户端（JSP）代码吗？

代码片段取自 [http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:47:11.120

你有：

```
mp = new MultipartParser(request, 1*1024*1024); // 10MB 
```

但根据我的计算，实际上只有 1Mb。您要上传的图像实际上是否太大？尝试较小的图像，修复您的评论或修复您的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-29T07:33:42.557

我刚变

```
enctype="multipart/form-data" 
```

至 **`ENCTYPE="multipart/form-data"`**

在表单标签中

异常已解决，表单标签如下

```
 <form method="POST"  name="form1"  action="1StudentDVerify.jsp" ENCTYPE="multipart/form-data">

</form> 
```

# javascript - JQUERY：使用 OR 运算符组合 2 个函数

> ID：13394785
> 
> 赞同：0
> 
> 时间：2012-11-15T09:41:03.710
> 
> 标签：javascript, jquery

我如何将两个函数与一个运算符`OR ( || )` 结合起来我想在脚本中结合 2 个 ifs 语句 [这](http://jsfiddle.net/andrewvmail/emeYT/7/)是小提琴

**HTML**

```
<form name="formName" method="post" action="#">
<input type="text" name="attendant[email]" size="13" value="">  
<input type="text" name="attendant[email]" size="13" value="">
<input type="text" name="attendant[email2]" size="13" value="">
<input type="text" name="attendant[email2]" size="13" value="">
<input type="submit" name="submit"> 
</form> 
```

**脚本**

```
$("form").submit(function(event) {
    if ($("input:text[name='attendant\\[\email\]']", this).filter(function() {
            return $.trim(this.value) == "";
        }).length) {
        window.alert("No member email1 should be empty.");
        event.preventDefault();
    }
        if ($("input:text[name='attendant\\[\email2\]']", this).filter(function() {
            return $.trim(this.value) == "";
        }).length) {
        window.alert("No member email2 should be empty.");
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:01:35.900

像这样的东西：

```
$("form").submit(function(event) {
    var email1Validation = function() {
        if($("input:text[name='attendant\\[\email\]']", this).filter(function() {
            return $.trim(this.value) == "";
        }).length) {
            window.alert("No member email1 should be empty.");
            return true;
        }
    },
    email2Validation = function() {
        if ($("input:text[name='attendant\\[\email2\]']", this).filter(function() {
            return $.trim(this.value) == "";
        }).length) {
            window.alert("No member email2 should be empty.");
            return true;
        }
    }
    if(email1Validation() || email2Validation()) {
        event.preventDefault();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:04:26.987

```
$("form").submit(function(event) {
    if ($("input:text[name='attendant\\[\email\]']", this).filter(function() {
            return $.trim(this.value) == "";
        }).length) {
        window.alert("No member email1 should be empty.");

        event.preventDefault();
    }
       else if ($("input:text[name='attendant\\[\email2\]']", this).filter(function() {
            return $.trim(this.value) == "";
        }).length) {
        window.alert("No member email2 should be empty.");

        event.preventDefault();
    }
}); 
```

这是你需要做的..希望它可以帮助你。

# php - php while 和 for 循环填充数组不起作用

> ID：13394786
> 
> 赞同：0
> 
> 时间：2012-11-15T09:41:04.413
> 
> 标签：php, mysql, loops, while-loop, nested

我有一个产品主控，其中有 2 个字段，一个用于主产品（字段名称为“下”），第二个用于子产品（字段名称为“Prod_desc”）我想要的是一个嵌套循环，我可以在其中捕获所有代码（字段名称为 Cylno）来自事务表 (ECR_CBDC)。

我有 2 个嵌套循环，第一个 while 循环用于 PRODUCT_MASTER，其中根据用户对主产品的选择选择子产品，第二个循环用于收集所有子产品的代码。

现在的问题是它只收集 1 个值，因为 FOR 循环会覆盖以前的值。是否有任何其他循环可以保存每个子产品的先前值。

```
$p=mysql_query("SELECT * FROM PRODMAST WHERE Under='$product'");
while ($p2=mysql_fetch_assoc($p))
{
    $prodesc=$p2['Prod_desc'];

    $dc=mysql_query("SELECT * FROM ECR_CBDC WHERE Prod_desc='$prodesc'  AND usr='$user'");
    $num_rows = mysql_num_rows($dc);
    $fill_from_array = array(); /* as "value"=>"option" */
    for($i = 1; $i <= $num_rows; $i++)
    {
        $row = mysql_fetch_assoc($dc);
        $fill_from_array[$row['Cylno']] = $row['Cylno'];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:47:23.540

如果我明白你在问什么 - $fill_from_array 只收集一行的价值 - 我认为你需要在第一个循环之外定义 $fill_from_array ，所以......

```
$p=mysql_query("SELECT * FROM PRODMAST WHERE Under='$product'");
$fill_from_array = array(); /* as "value"=>"option" */
while ($p2=mysql_fetch_assoc($p))
{
    $prodesc=$p2['Prod_desc'];

    $dc=mysql_query("SELECT * FROM ECR_CBDC WHERE Prod_desc='$prodesc'  AND usr='$user'");
    $num_rows = mysql_num_rows($dc);
    for($i = 1; $i <= $num_rows; $i++)
    {
        $row = mysql_fetch_assoc($dc);
        $fill_from_array[$row['Cylno']] = $row['Cylno'];
    }
} 
```

这样，每次 while() 循环循环时都不会覆盖 $fill_from_array 。你是这个意思吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:59:59.167

不要在代码中模拟连接，而是使用`JOIN`语法来减少循环和数据传输的数量：

```
SELECT * FROM PRODMAST 
INNER JOIN ECR_CBDC ON PRODMAST.Prod_desc=ECR_CBDC.Prod_desc AND usr='$user'
WHERE Under='$product' 
```

# php - 使用 php 查找 html 源的类名

> ID：13394788
> 
> 赞同：1
> 
> 时间：2012-11-15T09:41:13.470
> 
> 标签：php, parsing, xpath

我是 PHP 新手。我想写代码找到`id`下面html代码中指定的，即`1123`. 任何人都可以给我一些想法吗？

```
<span class="miniprofile-container /companies/1123?miniprofile="
      data-tracking="NUS_CMPY_FOL-nhre"
      data-li-getjs="http://s.c.lnkd.licdn.com/scds/concat/common/js?h=dyt8o4nwtaujeutlgncuqe0dn&amp;fc=2">
    <strong>
        <a href="http://www.linkedin.com/nus-trk?trkact=viewCompanyProfile&pk=biz-overview-public&pp=1&poster=&uid=5674666402166894592&ut=NUS_UNIU_FOLLOW_CMPY&r=&f=0&url=http%3A%2F%2Fwww%2Elinkedin%2Ecom%2Fcompany%2F1123%3Ftrk%3DNUS_CMPY_FOL-nhre&urlhash=7qbc">
        Bank of America
        </a>
    </strong>
</span> has a new Project Manager 
```

注意：我不需要 span 类中的内容。我需要`id`跨度类名中的 。

我尝试了以下方法：

```
$dom = new DOMDocument('1.0', 'UTF-8');
@$dom->loadHTML($html);
$xmlElements = simplexml_import_dom($dom);
$id = $xmlElements->xpath("//span [@class='miniprofile-container /companies/$data_id?miniprofile=']"); 
```

...但我不知道如何进一步进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:04:22.080

取决于你的需要，你可以做

```
$matches = array();
preg_match('|<span class="miniprofile-container /companies/(\d+)\?miniprofile|', $html, $matches);
print_r($matches); 
```

这是一个非常简单的正则表达式，但可以作为第一个建议。如果你想通过 DomDocument 或 simplexml，你不能像在你的例子中那样混合两者。您的首选方式是什么，我们可以缩小范围。

//编辑：几乎是@fireeyedboy所说的，但这是我刚刚摆弄的：

```
<?php
$html = <<<EOD
<html><head></head>
<body>
<span class="miniprofile-container /companies/1123?miniprofile="
      data-tracking="NUS_CMPY_FOL-nhre"
      data-li-getjs="http://s.c.lnkd.licdn.com/scds/concat/common/js?h=dyt8o4nwtaujeutlgncuqe0dn&amp;fc=2">
    <strong>
        <a href="#">
        Bank of America
        </a>
    </strong>
</span> has a new Project Manager

</body>
</html>
EOD;

$domDocument = new DOMDocument('1.0', 'UTF-8');
$domDocument->recover = TRUE;
$domDocument->loadHTML($html);

$xPath = new DOMXPath($domDocument);
$relevantElements = $xPath->query('//span[contains(@class, "miniprofile-container")]');
$foundId = NULL;
foreach($relevantElements as $match) {
    $pregMatches = array();
    if (preg_match('|/companies/(\d+)\?miniprofile|', $match->getAttribute('class'), $pregMatches)) {
        if (isset($pregMatches[1])) {
            $foundId = $pregMatches[1];
            break;
        }
    };
}

echo $foundId;

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:20:22.197

这应该做你所追求的：

```
$dom = new DOMDocument('1.0', 'UTF-8');
@$dom->loadHTML( $html );
$xpath = new DOMXPath( $dom );

/*
 * the following xpath query will find all class attributes of span elements
 * whose class attribute contain the strings " miniprofile-container " and " /companies/"
 */
$nodes = $xpath->query( "//span[contains(concat(' ', @class, ' '), ' miniprofile-container ') and contains(concat(' ', @class, ' '), ' /companies/')]/@class" );
foreach( $nodes as $node )
{
    // extract the number found between "/companies/" and "?miniprofile" in the node's nodeValue
    preg_match( '#/companies/(\d+)\?miniprofile#', $node->nodeValue, $matches );
    var_dump( $matches[ 1 ] );
} 
```

# mysql - mysql中select子查询的结果用在哪里？

> ID：13394789
> 
> 赞同：2
> 
> 时间：2012-11-15T09:41:14.470
> 
> 标签：mysql, select, subquery, where

非常简单的问题（对于某些人）：是否可以在 where 子句中使用 select 子查询结果？

我目前正在使用这样的东西：

```
SELECT companies.id
    , companies.name
    , (SELECT COUNT(*)
    FROM orders
    WHERE
        orders.company_id = companies.id
        AND
        orders.scheduled_at BETWEEN '2012-08-01 00:00:00' AND '2012-10-31 23:59:59'
    ) AS number_of_rides
FROM companies
WHERE
    (SELECT COUNT(*)
    FROM orders
    WHERE
        orders.company_id = companies.id
        AND
        orders.scheduled_at BETWEEN '2012-08-01 00:00:00' AND '2012-10-31 23:59:59'
    ) != 0
    AND
    companies.affiliate = 0
    AND
    companies.id = 346 
```

这使得相同的查询运行两次，一次在 select 中，另一次在 where 中。是否有可能在 where 中引用 select 子查询，如下所示：

```
SELECT companies.id
    , companies.name
    , (SELECT COUNT(*) AS number_of_rides
    FROM orders
    WHERE
        orders.company_id = companies.id
        AND
        orders.scheduled_at BETWEEN '2012-08-01 00:00:00' AND '2012-10-31 23:59:59'
    ) AS x
FROM companies
WHERE
    x.number_of_rides != 0
    AND
    companies.affiliate = 0 
```

目前这不起作用，这也不起作用：

```
SELECT companies.id
    , companies.name
    , (SELECT COUNT(*)
    FROM orders
    WHERE
        orders.company_id = companies.id
        AND
        orders.scheduled_at BETWEEN '2012-08-01 00:00:00' AND '2012-10-31 23:59:59'
    ) AS number_of_rides
FROM companies
WHERE
    number_of_rides != 0
    AND
    companies.affiliate = 0 
```

是否有可能在查询中不运行两次？

编辑：好的。尽管在某些情况下无法使用 GROUP BY，但它完成了我在这种情况下需要实现的目标。这就是我所做的：

```
SELECT companies.id
    , companies.name
    , (SELECT COUNT(*)
    FROM orders
    WHERE
        orders.company_id = companies.id
        AND
        orders.scheduled_at BETWEEN '2012-08-01 00:00:00' AND '2012-10-31 23:59:59'
    ) AS number_of_rides
FROM companies
WHERE
    companies.affiliate = 0
GROUP BY companies.id
HAVING number_of_rides != 0 
```

我仍然想知道是否有关于为什么 WHERE 无法访问 SELECT 中的子查询结果和 HAVING 可以...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:49:05.760

试试这个

```
Select 
    companies.id  , 
    companies.name,
    Tcount as number_of_rides
FROM companies
left join (
        select 
            id , 
            COUNT(*) as Tcount 
        FROM orders 
        where orders.scheduled_at BETWEEN '2012-08-01 00:00:00' AND '2012-10-31 23:59:59'
        ) as orders on orders.company_id = companies.id
WHERE companies.affiliate = 0 AND companies.id = 346
group by companies.id 
having number_of_rides != 0 
```

# visual-studio-2010 - 如何使用并行 nsight 在 Visual Studio 2010 中调试 cuda 推力功能

> ID：13394791
> 
> 赞同：5
> 
> 时间：2012-11-15T09:41:16.123
> 
> 标签：visual-studio-2010, cuda, thrust, nsight

我正在使用 Visual Studio 2010、并行 nsight 2.2 和 cuda 4.2 进行学习。我的系统是 Windows 8 pro x64。我在VS中打开了cuda计算SDK包含的基数排序项目，编译没有错误。排序代码使用推力库：

```
if(keysOnly)
    thrust::sort(d_keys.begin(), d_keys.end());
else 
    thrust::sort_by_key(d_keys.begin(), d_keys.end(), d_values.begin()); 
```

我想知道推力如何将排序功能分派给 cuda 内核，所以我尝试在上面的行前添加断点并在调试模式下编译项目。但是当我使用并行nsight进行cuda调试时，总是出现“断点没有源对应”的错误。

所以，我的问题是：

1.  如何在具有并行 nsight 的 Visual Studio 中调试 cuda 推力程序？
2.  或者有没有人可以指导我使用另一种方式来了解 cuda 推力 dipatch 如何对 cuda 内核或其他功能起作用？

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T16:05:07.653

通常，要在 CUDA 中调试设备代码，需要通过：

```
-G -g 
```

切换到 nvcc。[但是，推力代码不支持](http://code.google.com/p/thrust/wiki/Debugging)这种方式。您可以通过遵循推力包含文件中的结构来了解推力代码是如何分派到设备的。由于推力完全是模板化代码，因此无需担心库。然而，这是一个具有挑战性的提议。您还可以告诉编译器生成 ptx：

```
-ptx 
```

这是 cuda 代码编译成[的中间代码类型之一。](http://docs.nvidia.com/cuda/parallel-thread-execution/index.html)然而，这也不是一件容易解析的事情。 [此链接](http://code.google.com/p/thrust/wiki/Debugging)提供了一些使用 Thrust 进行调试的替代想法。

# sql - SQL - 获取上个月的数据

> ID：13394792
> 
> 赞同：1
> 
> 时间：2012-11-15T09:41:32.767
> 
> 标签：sql, sql-server

我一直在使用这个查询来提取上个月的信息

```
SELECT * 
FROM Member
WHERE DATEPART(m, date_created) = DATEPART(m, DATEADD(m, -1, getdate())) 
```

随着年底的临近，当我在 2013 年 1 月运行它时，这会自动拉到 2012 年 12 月吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:44:49.257

是的。您的 getdate() 函数将在查询运行时给出当前日期。并且您将 -1 添加到月份并比较 date_created 列的月份和上个月。但我认为你也应该做年份的比较。您应该同时添加两个条件月份和年份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:45:38.747

是的，它将提取 12 月的数据。**但**它会从任何一年中提取 12 月的数据，而不仅仅是 2012 年

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:47:08.567

是的，它会。DATEADD 是一个 SQL 内部函数，它添加到完整日期，而不仅仅是选定的部分（日、月、年）。

# javascript - Javascript/JQuery 按字母顺序对带有锚的列表进行排序

> ID：13394796
> 
> 赞同：4
> 
> 时间：2012-11-15T09:41:50.910
> 
> 标签：javascript, jquery, sorting, anchor

我有这个清单：

```
<ul id="demoOne" class="demo">
    <li><a href='http://site/Service.aspx?shId=1154'>Dhenie fotokopje aktesh nga dosja 12</a></li>
    <li><a href='http://site/Service.aspx?shId=1155'>Depozitim kerkesash Ankimore/Rekurse
        kunder vendimeve civile/penale 12</a></li>
    <li><a href='http://site/Service.aspx?shId=1156'>Dhenie Vendimesh12</a></li>
    <li><a href='http://site/Service.aspx?shId=1157'>Integrimi i Ish te Perndjekurve Polikite
        12</a> </li>
    <li><a href='http://site/Service.aspx?shId=1158'>Dhenie Drejtesie</a></li>
    <li><a href='http://site/Service.aspx?shId=1159'>Gjykata e Rrethit Gjyqësor Lezhë ushtron
        juridiksionin gjyqësor civil dhe penal në territorin e qarkut Lezhë të Republikës
        së Shqipërisë.</a></li>
</ul> 
```

我想按字母顺序排序这个列表，使用锚文本，而不是 li 文本。怎么做？

我正在使用此脚本按 li 文本对它们进行排序

```
function sortUnorderedList(ul, sortDescending) {
        var items = $('.demo li').get();
        items.sort(function(a,b){ 

          var keyA = $(a).text();
          var keyB = $(b).text();

          if (keyA < keyB) return -1;
          if (keyA > keyB) return 1;
          return 0; 

          var keyA = $(a).text();
          var keyB = $(b).text();

          if (keyA < keyB) return -1;
          if (keyA > keyB) return 1;
          return 0;

        });
        var ul = $('.demo');
        $.each(items, function(i, li){
          ul.append(li);
        });
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T09:56:34.527

试试这个：

```
$(function() {
    $.fn.sortList = function() {
    var mylist = $(this);
    var listitems = $('li', mylist).get();
    listitems.sort(function(a, b) {
        var compA = $(a).text().toUpperCase();
        var compB = $(b).text().toUpperCase();
        return (compA < compB) ? -1 : 1;
    });
    $.each(listitems, function(i, itm) {
        mylist.append(itm);
    });
   }

    $("ul#demoOne").sortList();

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T09:49:09.887

你可以使用`sort`方法。

```
$('#demoOne li').sort(function(a, b){
     return $('a', a).text() > $('a', b).text()
}).appendTo('#demoOne'); 
```

[http://jsfiddle.net/w3jfF/](http://jsfiddle.net/w3jfF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:45:24.443

您可以使用 jQuery 来获取所有`li`. 然后用于 [`toArray`](http://api.jquery.com/toArray/)获取一个 javascript 原生数组。您可以使用该`sort`方法对数组进行排序，并提供与您的需求相对应的排序功能。

# c# - RowDefinition 上的 MaxHeight，Height=Auto 被忽略

> ID：13394803
> 
> 赞同：1
> 
> 时间：2012-11-15T09:42:09.473
> 
> 标签：c#, .net, wpf, grid

属性 MaxHeight 似乎在 RowDefinitions 上被忽略`Height="Auto"`：

考虑以下 XAML：

```
<Grid>
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto" MaxHeight="100"/>
  </Grid.RowDefinitions>
  <ListBox>
    <ListBox.Items>
      <ListBoxItem>a</ListBoxItem>
      <ListBoxItem>b</ListBoxItem>
      <ListBoxItem>c</ListBoxItem>
      <ListBoxItem>d</ListBoxItem>
      <ListBoxItem>e</ListBoxItem>
      <ListBoxItem>f</ListBoxItem>
      <ListBoxItem>g</ListBoxItem>
      <ListBoxItem>h</ListBoxItem>
      <ListBoxItem>i</ListBoxItem>
      <ListBoxItem>j</ListBoxItem>
    </ListBox.Items>
  </ListBox>
</Grid> 
```

网格将大于 100 倾角。

**如何将 RowDefinition 限制在其高度？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:47:29.283

一定是别的东西。在干净的窗口中尝试过，列表框停在 100 像素处。也许检查你的造型。

![](../Images/ae2e4f30f233c3875c635667875bee40.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:49:14.533

将网格上的高度设置为自动并将 maxheight 保留在行定义上。

例如：

```
<Grid Height="Auto" Width="Auto">
    <Grid.RowDefinitions>
        <RowDefinition Height="20" MinHeight="20" MaxHeight="20"/> 
```

# php - PHP 博客错误“意外结束”

> ID：13394804
> 
> 赞同：0
> 
> 时间：2012-11-15T09:42:14.880
> 
> 标签：php, html

您好，我目前正在尝试为学校项目创建一个博客，这是我想出的代码。

```
<html>
<?php
$connection['host'] = '127.0.0.1';
$connection['user'] = 'root';
$connection['password'] = 'ascent';
$connection['webdb'] = 'login';
$connection['newstable'] = 'news';

if (isset($_GET['newsid']))
{
    $id = (int)$_GET['newsid'];
    connect::selectDB('webdb');

    $result = mysql_query("SELECT * FROM news WHERE id='".$id."'");
    $row = mysql_fetch_assoc($result); ?>
    <div class='box_two_title'><?php echo $row['title']; ?></div>

    <?php 
    Some cool way to post the "body" row here.
    ?>
</html> 
```

基本上我只是想让它在网站上发布新闻，我从这里和那里借了一些代码，每当我尝试时都会出现一些错误。非常感谢您的帮助。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:44:01.840

您忘记了结束大括号，`<? } ?>`在结束`<html>`标记之前添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:56:34.760

我已经看到您的代码实际上您的代码中有一些错误，所以首先您必须连接 mysql 数据库连接，然后选择 DB。我给了你正确的代码，所以试试这个肯定会有助于创建你的博客。

```
<html>
<?php
$connection['host'] = '127.0.0.1';
$connection['user'] = 'root';
$connection['password'] = 'ascent';
$connection['webdb'] = 'login';
$connection['newstable'] = 'news'; 
if (isset($_GET['newsid']))
{
//code to set database connection
$link = mysql_connect($connection['host'], $connection['user'], $connection['password']);
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
// make login the current db
$db_selected = mysql_select_db($connection['webdb'], $link);
if (!$db_selected) {
    die ('Can\'t use db : ' . mysql_error());
}
//get news id
$id = (int)$_GET['newsid'];
$result = mysql_query("SELECT * FROM news WHERE id='".$id."'");
$row = mysql_fetch_assoc($result); ?>
<div class='box_two_title'><?php echo $row['title']; ?></div>
<?php //    Some cool way to post the "body" row here. } ?> </html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:44:27.727

PHP 基本上是在抱怨，因为您没有关闭 if 子句的大括号`{`。

```
<html>
<?php
$connection['host'] = '127.0.0.1';
$connection['user'] = 'root';
$connection['password'] = 'ascent';
$connection['webdb'] = 'login';
$connection['newstable'] = 'news';

if (isset($_GET['newsid']))
{
    $id = (int)$_GET['newsid'];
    connect::selectDB('webdb');

    $result = mysql_query("SELECT * FROM news WHERE id='".$id."'");
    $row = mysql_fetch_assoc($result); ?>
    <div class='box_two_title'><?php echo $row['title']; ?></div>

    <?php 
//    Some cool way to post the "body" row here.
}
    ?>
</html> 
```

此外，虽然您是刚开始使用 PHP，但您应该使用[PDO](http://php.net/pdo)或[mysqli](http://php.net/mysqli)来访问数据库。这些`mysql_X`功能已弃用。

至少在开发过程中检查错误时，MySQL 可能会返回查看查询失败的原因。

# ocr - Tesseract OCR 训练给出“APPLY_BOXES”错误

> ID：13394807
> 
> 赞同：5
> 
> 时间：2012-11-15T09:42:33.060
> 
> 标签：ocr, tesseract

我正在为 digital-7 字体训练 Tesseract 3，并且我在输出中遇到了一些错误（来自 stderr）：

```
APPLY_BOXES: boxfile line 35/I ((735,7860),(737,7890)): FAILURE! Couldn't find a matching blob 
```

和

```
APPLY_BOXES: Unlabelled word at :Bounding box=(7523,-910)->(7549,-906) 
```

他们的意思是什么？

我正在使用的命令行是：

```
tesseract eng.digital-7.exp0.tif eng.digital-7.exp0 nobatch box.train 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:59:19.037

仔细检查您的 .tif 文件字符间距：第一个错误可能是由于两个字符太近，并产生了一个单独的边界框（另请参阅此[线程](https://code.google.com/p/tesseract-ocr/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary&groupby=&sort=&id=698)）。

我想第二个错误是第一个错误的结果。

# perl - perltidy 格式复杂的 if

> ID：13394808
> 
> 赞同：6
> 
> 时间：2012-11-15T09:42:36.490
> 
> 标签：perl, perl-tidy

如何配置 perltidy 以格式化长 if 语句，如下所示：

```
if (
    ('this is an example' =~ /an.*example/ and 1 * 2 * 3 == 6) or
    ('hello world' =~ /world/ and 6 = 3 * 2 * 1)
) {
    print "hello\n";
} 
```

或者像这样

```
if (
    ('this is an example' =~ /an.*example/ and 1 * 2 * 3 == 6)
    or ('hello world' =~ /world/ and 6 == 3 * 2 * 1)
) {
    print "hello\n";
} 
```

* * *

编辑1：perltidyrc

```
--maximum-line-length=100
--indent-columns=4
--default-tabsize=4
--continuation-indentation=4
--closing-token-indentation=0

--no-indent-closing-brace

--paren-tightness=2
--square-bracket-tightness=2
--block-brace-tightness=0

--trim-qw

--nospace-terminal-semicolon
--nospace-for-semicolon

--indent-spaced-block-comments
--ignore-side-comment-lengths

--cuddled-else

--no-opening-brace-on-new-line
--no-opening-sub-brace-on-new-line
--no-opening-anonymous-sub-brace-on-new-line
--no-brace-left-and-indent

--blanks-before-comments
--blank-lines-before-subs=1
--blanks-before-blocks
--maximum-consecutive-blank-lines=1 
```

* * *

Edit2：这个想法是在第一行之后有一个新行，`(`最后`)`一个与`{`. 如果这是不可能的，任何其他更好的格式建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:00:11.430

perltidy 的默认样式是尽可能遵循[Perl 样式指南](http://perldoc.perl.org/perlstyle.html)。这导致此输出：

```
if (   ( 'this is an example' =~ /an.*example/ and 1 * 2 * 3 == 6 )
    or ( 'hello world' =~ /world/ and 6 == 3 * 2 * 1 ) )
{
    print "hello\n";
} 
```

您可以控制花括号是否在新行上。您可以控制括号的松紧度。但是，您不能控制代码块中括号的新行。

默认样式尽可能接近您想要的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T11:08:14.547

如果它长得令人讨厌，一个想法可能是用 限制每行的最大长度`-l=n`，其中`n`是每行的最大长度：

```
$ cat perltidy_test.pl
if (
    ('this is an example' =~ /an.*example/ and 1 * 2 * 3 == 6) or('hello world' =~ /world/ and 6 = 3 * 2 * 1)
) {
    print "hello\n";
}

$ perltidy -l=60 perltidy_test.pl
$ cat pertidy_test.pl.tdy
if (
    (
        'this is an example' =~ /an.*example/
        and 1 * 2 * 3 == 6
    )
    or ( 'hello world' =~ /world/ and 6 == 3 * 2 * 1 )
  )
{
    print "hello\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:58:42.447

尝试

**$ perltidy -bli -wba='or' perltidy_test.pl**

这适用于这个例子......

# r - 使用 ggplot 在图例中拥有所有图层

> ID：13394809
> 
> 赞同：7
> 
> 时间：2012-11-15T09:42:40.347
> 
> 标签：r, ggplot2, legend

我如何制作一个图例来代表我的图表中绘制的所有曲线？目前，为第一层生成了一个自动图例（基于“颜色”美学），但另一层（表示所有观察中“价格”变量的密度的黑色曲线）未包含在此图例中。

我认为我的问题肯定来自对 ggplot 包的概念的不完全理解。

```
ggplot(diamonds) + 
  geom_density(aes(x = price, y = ..density.., colour = cut)) +
  geom_density(aes(x = price,y = ..density..)) 
```

![在此处输入图像描述](../Images/40f2d60fda36c715ad20afdc370d8cff.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T09:55:09.677

原则`ggplot2`是，每种美学都映射到一个比例。因此，如果您想在`colour`比例中包含一个图层，您需要将该图层映射到`colour`.

像这样：

```
ggplot(diamonds, aes(x=price)) + 
  geom_density(aes(colour = cut)) +
  geom_density(aes(colour="Overall"), size=1.5) 
```

![在此处输入图像描述](../Images/0c17bdfac061f1cd1039f335d8c24297.png)

* * *

注意：您可以通过指定手动色标来额外控制颜色：

```
ggplot(diamonds, aes(x=price)) + 
  geom_density(aes(colour = cut)) +
  geom_density(aes(colour="Overall"), size=1.5) +
  scale_colour_manual(
    limits=c("Overall", levels(diamonds$cut)),
    values=c("black", 2:6)
    ) 
```

![在此处输入图像描述](../Images/4937cfa1c00ef0b801f2f601b9d4eff4.png)

# wordpress - wp_nav_menu 添加里面的标签父标签

> ID：13394810
> 
> 赞同：1
> 
> 时间：2012-11-15T09:42:42.620
> 
> 标签：wordpress, menu, navigation

我找到了将类添加到顶级项目的示例，因此我们可以在带有子项目的菜单项中显示箭头，但是对于已经内置的 WordPress 类来说似乎很糟糕，无法在当前和 CSS 悬停时显示箭头，它只会破坏所有状态。

当前的导航菜单是这样的`<li><a>Text</a></li>`

`<span class="arrow"></span>`有没有办法在父`<a></a>`标签中添加一个？！

添加 -> " `<span class="arrow"></span>`" -> 内部`<a/></a>`标签

因此->`<li><a>Text<span class="arrow"></span></li></a>`那是父母。

当前代码在`<span></span>`标签外添加`<a></a>`标签

```
class My_Walker_Nav_Menu extends Walker_Nav_Menu {
    function start_lvl(&$output, $depth, $args) {
        $indent = str_repeat("\t", $depth);
        if('primary' == $args->theme_location && $depth ==0){
            $output .='<span class="arrow"></span>';
        }
        $output .= "\n$indent<ul class=\"sub-menu\">\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:08:53.637

您正在覆盖不正确的方法。你需要的`start_el`。这是它的代码：

```
class add_span_walker extends Walker_Nav_Menu {
    function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {
        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;
        $classes[] = 'menu-item-' . $item->ID;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
        $class_names = $class_names ? ' class="' . esc_attr( $class_names ) . '"' : '';

        $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
        $id = $id ? ' id="' . esc_attr( $id ) . '"' : '';

        $output .= $indent . '<li' . $id . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;

        if ( 'primary' == $args->theme_location ) {
            $submenus = 0 == $depth || 1 == $depth ? get_posts( array( 'post_type' => 'nav_menu_item', 'numberposts' => 1, 'meta_query' => array( array( 'key' => '_menu_item_menu_item_parent', 'value' => $item->ID, 'fields' => 'ids' ) ) ) ) : false;
            $item_output .= ! empty( $submenus ) ? ( 0 == $depth ? '<span class="arrow"></span>' : '<span class="sub-arrow"></span>' ) : '';
        }
        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

此代码将从`<span class="sub-arrow"></span>`为主题位置选择的菜单中添加一个顶级菜单项`primary`，以防此菜单项具有任何子项。

# java - 实现自己的类java时出现NullPointerException错误

> ID：13394814
> 
> 赞同：2
> 
> 时间：2012-11-15T09:43:15.290
> 
> 标签：java, nullpointerexception

我正在开发一个纸牌计数程序。我已经让主程序在运行，但是当我尝试实现自己的类时，我在第 19 行得到一个 NullPointerException 错误（只要它到达`c.getRank`）。

请注意，我首先在导入一个名为的类时创建了我的主程序，该类`CardDeck`具有我工作所需的所有功能，但现在我应该创建自己的类来完成完全相同的事情。（请注意，我无权访问导入的`CardDeck`类）。

这是主要代码：

```
import se.lth.cs.ptdc.cardGames.Card;

public class Patiens {
public static void main(String[] args) {
    double good = 0;
    double bad = 0;
    double result = 0;

    for (int a = 0; a < 1000000; a++) {
        CardDeck deck = new CardDeck();
        deck.shuffle();
        double fail = 0;
        while (deck.moreCards()) {

            for (int i = 1; i <= 3 && deck.moreCards(); i++) {

                Card c = deck.getCard();

                if (i == 1 && c.getRank() == 1) {
                    fail++;
                }

                if (i == 2 && c.getRank() == 2) {
                    fail++;
                }

                if (i == 3 && c.getRank() == 3) {
                    fail++;
                }
            }
        }
        if (fail >= 1) {
            bad++;      
        }
        else{
            good++;
        }
    }
    System.out.println("Good: " + good + " Bad: " + bad);
    result = good / bad;
    System.out.println("Result= " + result);
}

} 
```

它的作用是计算我的套牌成功完成的概率：

它一边数1-2-3、1-2-3，一边抽牌。现在，如果卡片在计数为“1”时恰好是 ACE，则当前牌组将失败。当程序计数“2”等时，等级 2 的卡片也是如此。它完成而不会失败一次的概率是 0.8% 。

这是我正在创建的 CardDeck 类：

```
import se.lth.cs.ptdc.cardGames.Card;

import java.util.Random;

public class CardDeck {
    private Card[] cards;
    private int current;
    private static Random rand = new Random();

    public CardDeck() {
        cards = new Card[52];
        for(int suit = Card.SPADES; suit <= Card.CLUBS; suit++) {
            for (int i = 0; i < 13; i++) {
                cards[i * suit] = new Card(suit, i);
            }
        }
        current = 0;
    }

    public void shuffle() {
        Card k;
        for(int i = 1000; i > 0; i--) {
            int nbr = rand.nextInt(52);
            int nbr2 = rand.nextInt(52);
            k = cards[nbr2];
            cards[nbr2] = cards[nbr];
            cards[nbr] = k;
        }
    }

    /**
     *Checks for more cards
     */
    public boolean moreCards() {
        if(current > 51) {
            return false;
        } else {
            return true;
        }
    }

    /**
     *Draws the card lying on top.
     */
    public Card getCard() {
        return cards[current++];

    }
} 
```

这是`import se.lth.cs.ptdc.cardGames.Card;`如果需要，它是创建卡片的类。

```
package se.lth.cs.ptdc.cardGames;

public class Card {
    public static final int SPADES = 1;
    public static final int HEARTS = SPADES + 1;
    public static final int DIAMONDS = SPADES + 2;
    public static final int CLUBS = SPADES + 3;

    private int suit;
    private int rank;

    public Card(int suit, int rank) {
        this.suit = suit;
        this.rank = rank;
    }

    public int getSuit() {
        return suit;
    }

    public int getRank() {
        return rank;
    }
} 
```

（请注意，我不应该更改上述课程）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:52:19.730

你的问题在这里：

```
cards[i * suit] = new Card(suit, i); 
```

如果您将其更改为：

```
cards[i + ((suit - 1) * 13)] = new Card(suit, i); 
```

它会做你所期望的。

有两件事要考虑：首先，数组是**从零开始的**，所以你的第一张牌需要在索引 0 处。其次，乘以花色，你会得到该数字的倍数，例如：

*   黑桃：1、2、3、4、5、6、7、8、9、10、11、12、13
*   心：2、4、6、8、10 ...
*   钻石：3、6、9、12 ...
*   俱乐部：4、8、12、16 ...

所以有些元素会被多次填充（12 被填充四次），而一些（特定的素数> 13）元素（例如 23）将为空。一般来说，用另一个变量表示索引可能就足够了，如下所示：

```
int cardIndex = 0;
for (int suit = Card.SPADES; suit <= Card.CLUBS; suit++) {
    for (int i = 0; i < 13; i++) {
        cards[cardIndex++] = new Card(suit, i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:49:55.937

该数组`CardDeck.cards`包含`null`元素，因为`i * suit`当您使用基于 1 的索引时（您`Card.SPADES`在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:49:29.347

似乎您`getCard()`的`CardDeck`类方法返回`null`而不是返回 Card 对象。在返回之前检查`getCard()`方法并打印 Card obj。

# python - PyXB 说 AttributeError: 'module' object

> ID：13394819
> 
> 赞同：0
> 
> 时间：2012-11-15T09:43:27.287
> 
> 标签：python, xml, binding, wsdl

我在使用 PyXB 为 WSDL 文件创建 python 绑定时遇到问题。我愿意：

*   pip install pyxb (当前版本 1.1.5)
*   pyxbwsdl [http://dic.googlecode.com/files/GoogleSearch.wsdl](http://dic.googlecode.com/files/GoogleSearch.wsdl)

我得到“AttributeError：'module'对象没有属性'CreateFromDOM'”并且没有生成代码。对于另一个 WSDL 文档，我得到了同样的错误。

有人可以给我一个线索吗？谢谢！

完整的堆栈跟踪：

```
ERROR: Unable to convert DOM node {http://www.w3.org/2001/XMLSchema}schema to Python instance
Traceback (most recent call last):
  File "/home/boehlke/.virtualenvs/env/local/lib/python2.7/site-packages/pyxb/binding/basis.py", line 2047, in append
    value = mr.module().CreateFromDOM(node)
AttributeError: 'module' object has no attribute 'CreateFromDOM' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:27:04.927

原来“AttributeError: 'module' object...”是一个预期的错误。我在发生错误的源代码中找到了这条评论:-)

> ```
>  # The module holding XMLSchema bindings
>                                 # does not have a CreateFromDOM method,
>                                 # and shouldn't since we need to convert
>                                 # schema instances to DOM more carefully.
>                                 # Other namespaces won't have a module if
>                                 # the bindings were not imported; this is
>                                 # probably worth a warning. 
> ```

# c++ - 如何在 borland c++ 5.02 中使用 ROM BIOS 中断？

> ID：13394820
> 
> 赞同：0
> 
> 时间：2012-11-15T09:43:26.983
> 
> 标签：c++

我正在使用 Borland C++ 5.02，我试图在 C++ 程序中制作 ROM BIOS 中断。（我使用 REGS 和 regs）。但是当我编译程序时，它说未定义的结构 REGS（对于所有中断）。

```
int numlock() {
    union REGS in,out;
    in.h.ah=2;
    int86(0x16,&in,&out);
    return out.h.al;
}
union REGS in,out;  //**error line** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T20:07:19.160

这是 Borland 5.2 中的一个问题。更适合使用中断，与 Borland 4.5 一起使用。我使用了 Borland 4.5 并回答了。

# android - 我如何学习 android UI 创建的基础知识？

> ID：13394835
> 
> 赞同：-5
> 
> 时间：2012-11-15T09:44:02.430
> 
> 标签：android

我是安卓新手。有什么方法可以在没有任何控件的情况下设计我们的布局。我正在使用相对布局，但如果我更改一个按钮，整个布局都会受到干扰。以自定义方式对齐按钮变得非常困难。我们是否有任何其他布局允许用户将视图保持在他想要的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:47:29.690

您始终可以手动编辑 xml，而不是使用所见即所得的 ui 编辑器。这样你就可以更好地理解布局和小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:48:42.110

请阅读此文档[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)。对于 android 的初学者来说，这里有你所需要的一切。这可能有点无聊，但真的很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:50:57.253

在 android 开发环境中，程序员更喜欢相对布局来制作 GUI/屏幕，因为它们非常灵活且独立于设备，但在您的情况下，您制作布局并更改按钮，这肯定会导致问题。在相对布局中，一切都依赖于其他一些小部件，因此从上到下和从左到右构成您的层次结构。从左上角开始，到右下角。

相对布局的基础知识使用 toLeftOf、toRightOf、alignParentRight、centerInParent、centerHorizo​​ntal、centerVertical。

除此之外，如果您使用自定义图形，则使用小部件的宽度和高度作为包装内容，否则在 dp 中使用小部件的宽度/高度，在 sp 中使用字体。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:56:12.827

您说您正在使用`RelativeLayout`，这就是您现在遇到麻烦的根本原因。

在 a`RelativeLayout`中，所有元素都定义了它们相对于父元素或布局中其他元素的位置。因此，如果您有 10 个元素，它们在 order 中相互依赖`1 <- 2 <- 3 <- 4 <- 5 <- 6 <- 7 <- 8 <- 9 <- 10`，并且您更改了元素 5 的位置。这将直接影响元素 6 的位置，并导致多达 10 个的多米诺骨牌效应，有效地弄乱了您的布局。

但是，`RelativeLayouts`一旦您掌握了使用它们的窍门，它们就会非常灵活且有用。另一方面，如果您只是将视图堆叠在另一个之上，请考虑使用`LinearLayout`.

[此处](http://developer.android.com/guide/topics/ui/declaring-layout.html)的文档在选择布局时特别有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T10:02:53.887

是的，有许多可用的布局。相对布局是所有东西都相对于彼此定位的布局。这显然意味着对一个元素的更改往往会影响其他元素。如果你想要更健壮的布局，你可以使用 LineraLayout、FrameLayout、TableLayout、GridLayout 和 RelativeLayout 的任意组合。您可以在完全不使用 RelativeLayouts 的情况下构建任何东西，但话又说回来，这可能意味着您的布局 XML 将变得非常臃肿（并且可能呈现缓慢）。请记住，您可以混合搭配。因此，如果您想在屏幕上的某个点定位事物列表，您可以使用顶级 RelativeLayout 来定位嵌套的 LinearLayout（垂直）。通过这种方式更改顺序和/或从列表中添加/删除内容并不是那么乏味。

# iphone - 减少具有 videoQuality:UIImagePickerControllerQualityTypeIFrame960x540 的视频的内存大小

> ID：13394841
> 
> 赞同：0
> 
> 时间：2012-11-15T09:44:18.087
> 
> 标签：iphone, objective-c, ios5, iphone-5

我正在从我的 iPhone 应用程序录制视频并将其上传到服务器。视频需要有 16:9 的宽高比，所以我设置

```
[videoRecorderController setVideoQuality:UIImagePickerControllerQualityTypeIFrame960x540] 
```

但几秒钟的视频需要几 MB 的空间。

有没有办法减少视频的内存大小并保持 16:9 的纵横比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T06:42:50.880

这帮助了我：

```
- (void)convertVideoToLowQuailtyWithInputURL:(NSURL*)inputURL
                               outputURL:(NSURL*)outputURL
                                 handler:(void (^)(AVAssetExportSession*))handler

{

AVURLAsset *asset = [AVURLAsset URLAssetWithURL:inputURL options:nil];
AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetMediumQuality];
exportSession.outputURL = outputURL;
exportSession.outputFileType = AVFileTypeQuickTimeMovie;

[exportSession exportAsynchronouslyWithCompletionHandler:^(void)
 {
     handler(exportSession);
 }];
} 
```

# c# - 使用 TransactionScope 时如何配置 MySQL 回滚？

> ID：13394842
> 
> 赞同：3
> 
> 时间：2012-11-15T09:44:18.290
> 
> 标签：c#, mysql, transactionscope

我花了一周的时间试图让事务为我的 MySQL 数据库工作。仍然没有成功。运行`Windows 7 x64`，`MySQL Server 5.6.7-rc`和`MySQL .NET Connector 6.6.4`。

MySQL 声称它`TransactionScope`是受支持的（我现在已经阅读了整个 Internet），所以我猜我需要一些特殊的配置才能让它工作。这是我到目前为止所尝试的：

**自动提交=0**

*   在`my.ini`我`autocommit=0`在该部分下方添加`[mysqld]`。
*   在`my.ini`我`init_connect='SET autocommit=0'`在该部分下方添加`[mysqld]`。
*   在 Service Manager 中，我已将其添加`--autocommit=0`为命令行参数。
*   我已经验证`SELECT @@autocommit`返回 0。

**sql_mode=传统**

*   在`my.ini`我`sql-mode="TRADITIONAL"`在该部分下方添加`[mysqld]`。
*   在 Service Manager 中，我已将其添加`--sql-mode=TRADITIONAL`为命令行参数。

**分布式事务协调器**

*   我试过启用/禁用 DTC 服务。

下面的示例在调用时立即引发异常（`System.Transactions.TransactionException`必须通过 Ctr+Alt+E 启用异常）`Open()`。错误消息是**操作对于事务的状态无效。**. 显然，服务器对事务的东西不满意——这可以通过没有发生回滚的事实来证明。

```
var factory = System.Data.Common.DbProviderFactories.GetFactory("MySql.Data.MySqlClient");

using (var transaction = new System.Transactions.TransactionScope())
{
    var connection = factory.CreateConnection();
    connection.ConnectionString = "Server=localhost;Port=3306;Database=test;User ID=user;Password=user";
    connection.Open(); // <-- silent TransactionException here!

    var command = connection.CreateCommand();
    command.CommandText = "CREATE TABLE TestTable (ID INT) ENGINE = InnoDB DEFAULT CHARSET=utf8;";

    command.ExecuteNonQuery();

    command.CommandText = "INSERT INTO TestTable (ID) VALUES (123);";
    command.ExecuteNonQuery();

    // ATTENTION! This should imply a rollback!
    // transaction.Complete();
} 
```

示例代码适用，`SQL Server`所以我确定这个问题与`MySQL`.

**问：**我什么都试过了。我需要做什么才能使此`TransactionScope`代码起作用`MySQL`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:01:36.583

MySQL 将在执行 DDL 语句时自动提交活动事务（请参阅[http://dev.mysql.com/doc/refman/5.5/en/cannot-roll-back.html](http://dev.mysql.com/doc/refman/5.5/en/cannot-roll-back.html)）。因此 CREATE TABLE 之后的任何内容都不会成为事务的一部分。

如果您按如下方式执行 SQL 语句，也会发生同样的事情：

```
START TRANSACTION;
CREATE TABLE TestTable (ID INT) ENGINE = InnoDB DEFAULT CHARSET=utf8;
INSERT INTO TestTable (ID) VALUES (123);
ROLLBACK; 
```

尝试将您的代码更改为：

```
var factory = MySqlClientFactory.Instance;
string connectionString = "Server=localhost;Port=3306;Database=test;User ID=user;Password=user";

// DDL cannot be performed in transaction as will commit
using (var connection = factory.CreateConnection())
{
    connection.ConnectionString = connectionString;
    connection.Open();

    var command = connection.CreateCommand();
    command.CommandText = "CREATE TABLE TestTable (ID INT) ENGINE = InnoDB DEFAULT CHARSET=utf8;";
    command.ExecuteNonQuery(); // will always commit here
}

// DML can be performed in transaction
using (var transaction = new System.Transactions.TransactionScope())
using (var connection = factory.CreateConnection())
{
    connection.ConnectionString = connectionString;
    connection.Open();   

    var command = connection.CreateCommand();
    command.CommandText = "INSERT INTO TestTable (ID) VALUES (123);";
    command.ExecuteNonQuery();

    // should rollback here
    //transaction.Complete();
} 
```

# c# - 自动调整图片框中的图像大小

> ID：13394850
> 
> 赞同：2
> 
> 时间：2012-11-15T09:44:39.167
> 
> 标签：c#, image

我正在做一个图像查看器。我已经在图片框中导入了图像。

应该使用哪个代码来自动调整图片框中的图像大小？这是我在图片框中查看图像的代码。

```
 private void button1_Click(object sender, EventArgs e)
    {
        OpenFileDialog openFileDialog = new OpenFileDialog();
        openFileDialog.Multiselect = true;
        openFileDialog.Filter = "JPEG|*.jpg|Bitmaps|*.bmp";

        if (openFileDialog.ShowDialog() == DialogResult.OK)
        {
            pFileNames = openFileDialog.FileNames;
            pCurrentImage = 0;
            ImageView();
        }
    }

    protected void ImageView()
    {
        if (pCurrentImage >= 0 && pCurrentImage <= pFileNames.Length - 1)
        {
            pictureBox1.Image = Bitmap.FromFile(pFileNames[pCurrentImage]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T09:50:42.230

看看`SizeMode`属性：http `PictureBox`: [//msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)

将此设置为`AutoSize`，您就可以开始了。

[在这里检查你可以设置什么](http://msdn.microsoft.com/en-us/library/system.windows.forms.pictureboxsizemode.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:57:18.127

检查[PictureBox.SizeMode 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)并通过[PictureBoxSizeMode 枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.pictureboxsizemode.aspx)设置它，就像您希望 PictureBox 控件在显示图像时所做的那样。

*   AutoSize 意味着 PictureBox 将适合图像。

如果您希望图像适合图片框，则将 sizemode 设置为*StretchImage*

```
// Set the SizeMode property to the StretchImage value.  
// This will enlarge the image as needed to fit into 
// the PictureBox.
    PictureBox1.SizeMode = PictureBoxSizeMode.StretchImage; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:49:22.950

您可以尝试将 PictureBox 上的 SizeMode 属性设置为 AutoSize。

# c# - 更新 IQueryable 对象中的值

> ID：13394851
> 
> 赞同：5
> 
> 时间：2012-11-15T09:44:43.253
> 
> 标签：c#, .net, linq, linq-to-sql

我有一个 IQueryable 对象，我想手动更新一些值，但是执行循环后不会反映更改：

```
 IQueryable<myModel> items;
 items = GetItems();   

 foreach (myModel row in items)
 {
        row.field10 = "new value";
 }

 objDataContext.SubmitChanges(); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:06:20.820

方法是否`GetItems()`使用完全相同的实例`objDataContext`从数据库中获取项目？它必须使用相同`ObjectContext`的方法来跟踪更改。另一种选择是使用以下`ToList()`方法：

```
List<myModel> items = GetItems().ToList(); 
```

# mysql - mysql删除语法错误

> ID：13394853
> 
> 赞同：2
> 
> 时间：2012-11-15T09:44:50.920
> 
> 标签：mysql, database, syntax, sql-delete

我正在尝试从具有相同条件的多个表中删除多行，但总是会返回语法错误。

这是代码：

```
DELETE FROM table1,table2,table3
WHERE guid = 'CE4EF453-937F-C7F9-7AE429VB0128' 
```

错误代码是：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法使用
> 
> 在第 2 行的 'WHERE guid = 'CE4EF453-937F-C7F9-7AE429VB0128'' 附近

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:51:38.500

您缺少 INNER JOIN。可能类似于**以下内容**。

```
DELETE FROM table1,table2,table3
USING table1 INNER JOIN table2 INNER JOIN table3
WHERE table1.guid = 'CE4EF453-937F-C7F9-7AE429VB0128'
    AND table2.guid  = table1.guid 
    AND table3.guid = table1.guid 
```

**[（参考）](http://dev.mysql.com/doc/refman/5.1/en/delete.html)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:50:29.103

试一试：

```
DELETE FROM table1,table2,table3
WHERE table1.guid = 'CE4EF453-937F-C7F9-7AE429VB0128'
  AND table1.guid = table2.guid
  AND table1.guid = table3.guid 
```

# php - 如何从 symfony2 中的现有表生成实体？

> ID：13394855
> 
> 赞同：10
> 
> 时间：2012-11-15T09:45:02.037
> 
> 标签：php, symfony

我有一些字段的表“my_table”。我想在 MyBundle 中使用“my_table”生成实体。但我不想重新创建 MyBundle 中的所有实体。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T09:49:53.997

这是你可以做到的方法，

**第一步**，让Doctrine自省数据库，生成对应的xml或yml元数据文件。

```
php app/console doctrine:mapping:convert [xml|yml] Path/To/MyBundle/Resources/config/doctrine/metadata/orm --from-database --force --filter=MyTable 
```

**第二步**，让Doctrine通过执行以下两条命令导入schema并构建相关实体类。

```
php app/console doctrine:mapping:import MyBundle [xml|yml|annotation] --filter=MyTable

php app/console doctrine:generate:entities Path\To\MyBundle\EntityFolder\\MyTable 
```

查看文档的[How to generate Entities from an Existing Database](http://symfony.com/doc/2.0/cookbook/doctrine/reverse_engineering.html)部分

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-14T15:50:47.620

Symfony 2.7 选项注释和 [/xml/yml] 的简单工作解决方案参见[http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)

分 3 步执行 3 个命令：

**命令#1：**

```
$ php app/console doctrine:mapping:import --force AppBundle xml --filter="Meeting" 
```

输出：

> 写 C:\xampp\htdocs\localxyz\src\AppBundle/Resources/config/doctrine/Meeting.orm.xml

**命令#2：**

```
$ php app/console doctrine:mapping:convert annotation ./src/AppBundle/Entity --from-database --filter="Meeting" 
```

输出：

> 处理实体“会议”
> 
> 将“注释”映射信息导出到“C:\xampp\htdocs\localxyz\src\Entity”

**命令#3：**

```
$ php app/console doctrine:generate:entities AppBundle:Meeting --no-backup 
```

输出：

> 生成实体“AppBundle\Entity\Meeting”生成 AppBundle\Entity\Meeting

在哪里：

AppBundle 正是你在 2.7 symfony 中的“AppBundle” 会议是目标表（区分大小写）

可以肯定的是，检查这个目录：

C:\xampp\htdocs\myproj\src\AppBundle/Resources/config/doctrine/Meeting.orm.xml

C:\xampp\htdocs\myproj\src\AppBundle/Resources/config/doctrine/MeetingOriginal.orm.xml

并确保您只有要创建实体类文件的表的 .xml 文件，而没有其他文件。

它对我来说效果很好。

有关解释，请阅读：[http ://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T09:52:21.233

```
php app/console doctrine:mapping:import "MyCustomBundle" xml --filter=MyMatchedEntity 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-05T14:48:26.290

虽然这是一个旧帖子，但如果有人收到以下错误，

`Database does not have any mapping information.`

查看

**如果您的表名`blog_post`在过滤器选项中使用`BlogPost`而不是`blog_post`**

参考：[https ://stackoverflow.com/a/27019561/6504104](https://stackoverflow.com/a/27019561/6504104)

虽然上面的答案涵盖了这一点，但我错过了它并且收到了这个错误

所以我想明确这一点

同样在 symfony >= 3.4 中，`php bin/console`例如

```
php bin/console doctrine:mapping:import --force AppBundle xml --filter="BlogPost" 
```

接着

```
php bin/console doctrine:mapping:convert annotation ./src/AppBundle/Entity --from-database --filter="BlogPost" 
```

谢谢...

# javascript - 如何使用android phonegap在状态栏中显示通知数量

> ID：13394856
> 
> 赞同：0
> 
> 时间：2012-11-15T09:45:01.470
> 
> 标签：javascript, cordova

我正在 android phonegap 中做一个项目。这里我想在状态栏中显示通知的数量。我已经使用链接[Status Bar Notification](https://github.com/phonegap/phonegap-plugins/tree/master/Android/StatusBarNotification)实现了状态栏通知。我为显示通知而更改的代码如下所示。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Cordova</title>

<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8" src="statusbarnotification.js"></script>

<script type="text/javascript">

var count = 0;

function show_notify(){
    count = count+1 ;
    //alert(count);
    var title = "message";
    var alerts = "You have "+count+ " message";
    window.plugins.statusBarNotification.notify(title, alerts);
}

</script>

</head>
<body>
<a href="#" onclick='show_notify()'>Click!</a>
</body>
</html> 
```

在这里，对函数 show_notify() 的每次调用都会增加**count的值，并以“****您有 [1 or 2 or 3...] 消息**”的格式显示通知的数量。我的问题是如何设置 varibale 的值清除状态栏中的通知后**计数**为零，单击通知时我应该在哪里更改代码以重定向到特定页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:33:02.020

您应该有一个包含所有通知的页面。您可以在读取通知时重置或减少计数变量。或者当通知页面打开时。

我正在用我真的推荐的 JQ-mobi 构建一个应用程序。他们提供数据属性“数据加载”。这是您可以运行重置通知的方法的时候。

[http://www.jqmobi.com/index.php](http://www.jqmobi.com/index.php)

# mongodb - MongoDB 过滤复制集合

> ID：13394857
> 
> 赞同：1
> 
> 时间：2012-11-15T09:45:05.113
> 
> 标签：mongodb, replication

我已经限制了本地 MongoDB 集合 A，我想复制到云服务器上的 MongoDB 集合 B。现在，我想保留 A 中由于大小上限而将被删除的文档。

```
集合 A 复制集合 B
-------------- ----------> --------------
上限为 50MB 无限大小！
本地云服务器

```

这在 MongoDB 中是否可行（就像在 CouchDB 中使用过滤器一样）？

还是我应该寻找一种完全不同的方法？

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:12:34.363

上限集合中的删除不是操作，因此它们不会通过 oplog 复制。因此，您需要做的就是使集合在辅助节点上不受限制，并且随着您将数据添加到有上限的集合并复制这些操作，它只会继续增长。尝试这样的事情：

1.  照常在云服务器上添加辅助
2.  停止那个新的辅助，在没有 replset 参数的集合之外重新启动它
3.  删除上限集合，使用与常规非上限集合相同的名称重新创建
4.  （可选）使用 mongodump/mongorestore 手动重新导入数据
5.  使用原始副本集参数重新启动辅助节点
6.  新常态系列将继续增长

如果要删除集合或进行其他更改，则每次都需要取出辅助对象，否则应该按照您的意愿行事。我自己并没有明确地这样做，但我偶然看到这种情况发生并且不得不做相反的事情:)

# php - 如何从前一个div中获取隐藏的输入值

> ID：13394858
> 
> 赞同：2
> 
> 时间：2012-11-15T09:45:15.580
> 
> 标签：php, javascript, jquery

我需要通过单击文本“上传个人资料照片”来获取隐藏的输入值。我对这些东西很陌生。

```
 <div>
            <input type="hidden" value='<?php echo $list['profilePitcureID'];?>'
          name="profilePitcureID" id="profilePitcureID<?php echo $j; ?>" 
              class="profilePitcureID" /></div>
           <div id="meTwo" class="styleall" style=" cursor:pointer;font-family:Verdana, 
         Geneva, sans-serif; font-size:9px;">Click Here To Upload Profile Photo</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:47:43.510

尝试一下：

```
$('#meTwo').prev('div').find('input[type="hidden"]').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:48:21.417

```
$('#meTwo').click(function(){
   alert( $(this).prev().find('input.profilePitcureID').val() );
   // or
   alert( $(this).prev().find('input[name="profilePitcureID"]').val() );
}); 
```

不确定这是否是您想要的，但它应该可以工作。

您可能也想更改`Pitcure`为`Picture`。

# parallel-processing - 如何判断程序是否已成功并行化？

> ID：13394861
> 
> 赞同：-2
> 
> 时间：2012-11-15T09:45:22.163
> 
> 标签：parallel-processing

测量在并行机器上运行的程序对于增加处理器数量 P 具有以下效率值。

```
P 1 2 3 4 5 6 7
E 100 90 85 80 70 60 50 
```

使用上述结果，绘制加速图。

使用图表说明程序是否已成功并行化。

```
P E    Speedup
1 100% 1
2  90% 1.8
3  85% 2.55
4  80% 3.2
5  70% 3.5
6  60% 3.6
7  50% 3.5 
```

这是过去一年的考试题，我知道如何计算加速比并绘制图表。但是我不知道如何判断程序是否成功并行化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:07:53.253

[阿姆达尔定律](https://en.wikipedia.org/wiki/Amdahl%27s_law)

```
I think the idea here is that not all portion can be parallelized. 
```

例如，如果一个程序需要 20 小时使用单个处理器内核，而***1 小时的特定部分无法并行化***，而 19 小时（95%）的剩余有希望的部分可以并行化，那么无论我们投入多少处理器对于该程序的并行执行，最短执行时间不能少于关键的 1 小时。因此加速比被限制在 20 倍

![在此处输入图像描述](../Images/d876e98339cab48c1863d2c8b6c0c463.png)

在此示例中，使用 6 个处理器时加速比达到最大值 3.6。所以平行部分约为 1-1/3.6 约为 72.2%。

# heroku - 从命令行登录 Heroku 时出现错误

> ID：13394866
> 
> 赞同：0
> 
> 时间：2012-11-15T09:45:46.003
> 
> 标签：heroku, facebook-apps

当我尝试从 Windows 中的命令行登录 Heroku 时出现此错误： ![在此处输入图像描述](../Images/b1a14b3a5875d683e8a32c64ed7dd856.png)

我通过浏览器登录时很好。

我应该怎么办？或者这背后的问题是什么？

# java - 程序有时无法保持输出流。为什么会这样？

> ID：13394867
> 
> 赞同：0
> 
> 时间：2012-11-15T09:45:49.270
> 
> 标签：java

我有两个程序，它们位于网络套接字的两侧。我让他们互相交谈。其中一个是聊天机器人，它会根据我在另一个程序中输入的内容给出一些响应。大多数时候它确实完美无缺。但有时，聊天机器人一直在等待，我没有得到任何回复。然而，这种情况很少发生。但是有谁知道，为什么会这样？我怎样才能摆脱这个明显的错误？

我确实在这里检查了大多数异常，i/o 异常是最主要的异常。但我真的没有任何例外。程序系统挂在一个线程上，这是我在调试它时发现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:47:42.307

确保你没有吞下任何异常。当出现问题时，代码会抛出一个异常，告诉你哪里出了问题（希望它能给你提供如何修复它的线索）。

# php - php 会话不会使用 ajax 上传器更新

> ID：13394868
> 
> 赞同：0
> 
> 时间：2012-11-15T09:45:52.447
> 
> 标签：php, ajax, session, cookies, upload

我的 index.php 中的 php 脚本和 ajax 上传器有问题，有这个类似的脚本：

```
'onUploadComplete':function(file,response) { $('body').append('+response+'<br/>Delete code: <?php echo $_SESSION['deletetoken'];$_SESSION['deletetoken'] = '?';unset($_SESSION['deletetoken']);session_unset(); ?>')} 
```

可能不完全正确，并且会话已经在`<head></head>`php 脚本中开始

和我的 upload.php 脚本：

```
if(move_uploaded_file($temp,$locate)){
$_SESSION['deletetoken'] = substr(md5('swvybkl.signature/481651561.55r'),5,6);
echo $url;
} 
```

但是当我上传多个文件时会回显

> [http://xx.xx/abc.jpg](http://xx.xx/abc.jpg)
> 
> 删除代码：示例
> 
> [http://xx.xx/123.jpg](http://xx.xx/123.jpg)
> 
> 删除代码：示例

问题是删除代码是一样的，如何只使用没有javascript/mysql的php来更新它？

# android - 创建的文件夹在文件资源管理器中不可见..

> ID：13394870
> 
> 赞同：7
> 
> 时间：2012-11-15T09:46:02.890
> 
> 标签：android, file, sd-card, createfile, create-directory

我在 sdcard 上创建文件夹和文件时遇到问题。

这是代码：

```
 File folder = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString() + "/folder");
    boolean success;
    if (!folder.exists()) {
        success = folder.mkdirs();
    }
    File obdt = new File(folder, "file.txt");
    try {
        success = obdt.createNewFile();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

使用此代码，我希望在 sdcard`folder`的文件夹中创建文件夹，并在此文件中创建文件夹。我希望用户可以访问该文件。所以我想把它放在一个共享文件夹中。变量是， 当我再次运行代码时，文件夹已经存在并且不在 if 块中。 但是我在文件资源管理器中看不到 sdcard 上创建的文件夹和文件。 信息：退货`Download``file`
`success``true`

`getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString()``storage/sdcard/Download`

我使用 Galaxy Nexus。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:46:16.757

该死！:)

现在我解决了我的问题......我误解了在文件系统中创建文件的操作。
当我谈到文件资源管理器时，我指的是操作系统的文件资源管理器，而不是 DDMS 中的文件资源管理器 :)。
我想当我创建一个文件时，我会在操作系统的文件资源管理器中看到它，但是当设备连接到 PC 时，文件只能在 DDMS 文件资源管理器中看到。
抱歉，我是 Android 新手 ;)

当应用程序在没有 PC 连接的情况下独立运行，然后我与 PC 连接时，我当然会看到创建的文件和文件夹 :)

感谢帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:49:09.793

如果您还没有这样做，则需要通过将以下行添加到您的清单中，为您的应用授予正确的写入 SD 卡的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

如果您已经这样做了，请查看：

```
File obdt = new File(/sdcard/folder/file.txt)
try {
    success = obdt.createNewFile();
} catch (IOException e1) {
    e1.printStackTrace();
} 
```

作品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:06:16.360

您在资源管理器中看不到文件夹/文件？也许是因为 MediaScanner 处于活动状态，但没有添加您的文件。您可以在程序中执行此操作，也可以在手机设置中切换某处的媒体扫描仪。

[媒体扫描仪](http://developer.android.com/reference/android/media/MediaScannerConnection.html)

[触发媒体扫描仪](https://stackoverflow.com/questions/9414955/trigger-mediascanner-on-specific-path-folder-how-to)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:51:13.930

logcat有什么错误吗？
其他：尝试类似 Log.I("PATHNAME",folder.absolutePath()); 然后查看您的 logcat 以确保您在哪里创建您认为的文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T09:55:47.213

试试这个。

```
 File dir = new File(Environment.getExternalStorageDirectory()
                + "/XXX/Wallpapers/");
        File[] files = dir.listFiles();

        if (files == null)

        {
            int numberOfImages = 0;
            BitmapDrawable drawable = (BitmapDrawable) imageView
                    .getDrawable();
            Bitmap bitmap = drawable.getBitmap();
            File sdCardDirectory = Environment
                    .getExternalStorageDirectory();
            new File(sdCardDirectory + "/XXX/Wallpapers/").mkdirs();
            File image = new File(sdCardDirectory
                    + "/XXX/Wallpapers/Sample" + numberOfImages + ".JPG");

            boolean success = false;
            FileOutputStream outStream;
            try {
                outStream = new FileOutputStream(image);
                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outStream);
                outStream.flush();
                outStream.close();
                success = true;
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();

            }
            if (success) {
                Toast.makeText(
                        getApplicationContext(),
                        "Image saved successfully in Sdcard/XXX/Wallpapers",
                        Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(getApplicationContext(),
                        "Error during image saving", Toast.LENGTH_LONG)
                        .show();
            } 
```

不要忘记在清单中添加权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-09T22:07:07.290

我遇到了同样的问题：创建的文件和文件夹在写入 sdcard 后不会立即显示，尽管文件已被刷新和关闭！

它们不会通过 USB 或手机上的文件浏览器显示在您的计算机上。

**我观察到三件事：**

1.  如果文件的绝对路径以它开头`/storage/emulated/0/`并不意味着它会在您的 SD 卡上 - 它可能会在您的主存储上。
2.  如果您等待大约 5 分钟，文件会开始通过 USB 显示（即 Windows 资源管理器和内置文件资源管理器）
3.  如果您`adb shell ls /sdcard`从终端使用，则文件会显示！您可以使用`adb pull ...`立即获取文件。您也可以使用 DDMS。

**我使用的代码是：**

```
 Gson gson = new GsonBuilder().setPrettyPrinting().create();
        String json = gson.toJson(myArrayList);

        try {
            File externalDir = getExternalStorageDirectory();
            File newFile = new File(externalDir, "myfile.txt");
            FileOutputStream os = new FileOutputStream(newFile);
            os.write(json.getBytes());
            os.flush();
            os.close();
            Timber.i("saved file to %s",newFile.getAbsoluteFile().toString());
        }catch (Exception ex)
        {
            Toast.makeText(getApplicationContext(), "Save to private external storage failed. Error message is " + ex.getMessage(), Toast.LENGTH_LONG).show();
        } 
```

和

```
 Gson gson = new GsonBuilder().setPrettyPrinting().create();
        String json = gson.toJson(myArrayList);

        try {
            File externalDir = getExternalStorageDirectory();
            File newFile = new File(externalDir, "myfile.txt");
            FileWriter fw = new FileWriter(newFile);
            fw.write(json);
            fw.flush();
            fw.close();
            Timber.i("saved file to %s",newFile.getAbsoluteFile().toString());
        }catch (Exception ex)
        {
            Toast.makeText(getApplicationContext(), "Save to private external storage failed. Error message is " + ex.getMessage(), Toast.LENGTH_LONG).show();
        } 
```

为什么会这样？似乎是您第一次体验它时必须遭受的另一种“Android-isms”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-09T01:10:05.807

显然，MTP 中有一个已知的错误。

[问题 195362](https://code.google.com/p/android/issues/detail?id=195362) 当手机使用 USB 电缆连接到计算机时，所有使用 MTP 而非 USB 大容量存储的手机都无法正确显示文件列表。在设备上运行的 Android 应用程序也无法看到这些文件。

它实际上和 2012 年一样古老

# c++ - 使用向量中的对象进行排序

> ID：13394871
> 
> 赞同：0
> 
> 时间：2012-11-15T09:46:07.757
> 
> 标签：c++, templates, sorting, stdvector

我想修改以下代码，以便可以使用对象进行排序。当前代码在对返回单个值的单个方法进行排序时很好。如何使用返回对象的方法来实现；

```
template<typename T, typename M, template<typename> class C = std::less>
struct method_comparer : std::binary_function<T, T, bool>
{
explicit method_comparer(M (T::*p)() const) : p_(p) { }

bool operator ()(T const& lhs, T const& rhs) const
{
return C<M>()((lhs.*p_)(), (rhs.*p_)());
}

private:
M (T::*p_)() const;
};

template<typename T, typename M>
method_comparer<T, M> make_method_comparer(M (T::*p)() const)
{
return method_comparer<T, M>(p);
}

template<template<typename> class C, typename T, typename M>
method_comparer<T, M, C> make_method_comparer2(M (T::*p)() const)
{
 return method_comparer<T, M, C>(p);
 } 
```

主文件

```
// works well
std::sort(vec_p2d.begin(),vec_p2d.end(),make_method_comparer(&Point2D::getX)); 
```

// 想实现这个

```
 std::sort(vec_l2d.begin(),vec_l2d.end(),make_method_comparer(&Line2D::getPt1)); 
```

getPt1() 方法返回一个 Point2D 对象，其中包含 int x 和 int y 的值；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:06:23.357

AFAICS，您可以保留您的代码。您唯一必须定义的是比较运算符`Point2D`或您要返回的任何对象：

```
class Point2D {
public:
    friend bool operator<(const Point2D &p1, const Point2D &p2) { ...; }
    ...
}; 
```

您还可以删除您的`method_comparer`类，并提供适当的比较器函数进行排序：

```
bool compare_line_points(const Line2D &l1, const Line2D &l2) {
    return l1.getPt1() < l2.getPt1();
} 
```

和

```
std::sort(vec_l2d.begin(), vec_l2d.end(), compare_line_points); 
```

根据您的要求，这些只是一堆单行或两行。不需要模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:51:42.577

如果您可以使用 boost，如何：

`std::sort(vec_p2d.begin(), vec_p2d.end(), boost::bind( &Point2D::getX, _1 ) < boost::bind( &Point2D::getX, _2 ) );`

&

`std::sort(vec_p2d.begin(), vec_p2d.end(), boost::bind( &Point2D::getPt1, _1 ) < boost::bind( &Point2D::getPt1, _2 ) );`?

# r - 正态概率图上的累积频率

> ID：13394875
> 
> 赞同：1
> 
> 时间：2012-11-15T09:46:21.837
> 
> 标签：r, plot, probability

如何获得绘制在正态概率（非线性）y 轴上的每个唯一 X 值的累积频率。使用过 probplot(x) 但它没有累积相同的值。我的数据是一个带有血液结果的数据框。probplot 绘制每个单独的血液结果，而不是每个独特结果的累积频率。

小数据示例：

```
V1
7.1
7.2
7.2
7.6
6.8
6.9
6.8
7.4 
7.0 
```

我可以计算累积频率，但不能用正确的正态概率轴绘制它：

```
tabvals <- table(data$V1)

tabvals <- cbind.data.frame(tabvals)

tabvals$frequency <- tabvals$Freq/sum(tabvals$Freq)

tabvals$kummulated <- NA

for (i in 1:nrow(tabvals)){
if (i == 1) {
     tabvals$kummulated[i] <- tabvals$frequency[i]
   } else {
       tabvals$kummulated[i] <- tabvals$kummulated[i-1] + tabvals$frequency[i]
     }}

plot(tabvals$Var1, tabvals$kummulated , type="l") 
```

获得正确 Y 轴的唯一方法是：

```
library(e1071)

probplot(data$V1) 
```

但这将 7.2 和 7.2 绘制为两个不同的点，而不是累积它们。

# java - 在 VideoView 中静音视频

> ID：13394876
> 
> 赞同：10
> 
> 时间：2012-11-15T09:46:25.510
> 
> 标签：java, android, video-streaming, audio-streaming

我正在使用 VideoView 播放视频（来自 youtube），如下所示：

```
VideoView video = (ViewView) this.findViewById(R.id.youtube_video);
MediaController controllers = new MediaController(this);
controllers.setAnchorView(video);
video.setMediaController(controllers);

video.setVideoURI(videoUri);
video.start() 
```

我希望能够使视频静音，但到目前为止我发现的唯一一件事是：

```
AudioManager audioManager = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
audioManager.setStreamMute(AudioManager.STREAM_MUSIC, true); 
```

哪个工作正常，因为视频被静音，但问题是所有流媒体音乐都被静音，如果我想播放另一个视频（或音频），它也会被静音。

有没有办法只针对要静音的特定流？
谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-15T13:03:36.063

在深入挖掘了我设法找到的所有可能的信息来源后，我想出了以下解决方案，并认为它将来可能会使其他人受益：

```
public class Player extends VideoView implements OnPreparedListener, OnCompletionListener, OnErrorListener {
    private MediaPlayer mediaPlayer;

    public Player(Context context, AttributeSet attributes) {
        super(context, attributes);

        this.setOnPreparedListener(this);
        this.setOnCompletionListener(this);
        this.setOnErrorListener(this);
    }

    @Override
    public void onPrepared(MediaPlayer mediaPlayer) {
        this.mediaPlayer = mediaPlayer;
    }

    @Override
    public boolean onError(MediaPlayer mediaPlayer, int what, int extra) { ... }

    @Override
    public void onCompletion(MediaPlayer mediaPlayer) { ... }

    public void mute() {
        this.setVolume(0);
    }

    public void unmute() {
        this.setVolume(100);
    }

    private void setVolume(int amount) {
        final int max = 100;
        final double numerator = max - amount > 0 ? Math.log(max - amount) : 0;
        final float volume = (float) (1 - (numerator / Math.log(max)));

        this.mediaPlayer.setVolume(volume, volume);
    }
} 
```

它似乎对我来说效果很好，就像具有静音/取消静音功能的*VideoView一样。*
可以将*setVolume*方法公开，以便可以在类范围之外控制音量，但我只需要公开静音/取消静音。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-01-05T06:54:52.397

> 将此代码放入 oncreate() 和 onresume() 以更好地处理视频视图...

```
 VideoView videoview = (VideoView) findViewById(R.id.videoview);
  videoview.setVideoPath(videopath);
  videoview.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
                    @Override
                    public void onPrepared(MediaPlayer mp) {
                        mp.setVolume(0f, 0f);
                        mp.setLooping(true);
                    }
                });
 videoview.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-08T08:21:52.693

如果你在 kotlin 中编码，只需使用这行代码

```
videoView.setOnPreparedListener { video->
            video.setVolume(0f,0f)
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T04:54:25.000

我有一个更简单的方法，这样做你会有一个静音/取消静音按钮（这可以用于音频和视频）；

```
//set global variable
//private Button mMuteButton;
//private static int aux = 0;
//private AudioManager mAudioManager;
//set the Mute button on clickListener 

  mMuteButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            mAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

            if(aux % 2 == 0){

                mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 100, 0);
                aux++;

            } else {

                mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0);
                aux++;

            }

        }
    }); 
```

}

# msbuild - CCnet 通过 MSBuild 向 App.config 发送一个值

> ID：13394879
> 
> 赞同：1
> 
> 时间：2012-11-15T09:46:36.727
> 
> 标签：msbuild, app-config, cruisecontrol.net

好的，伙计们，我是新来的，所以我需要一点帮助。我在 C# 中为 Nunit 进行了自动化测试，并将其用于 CruiseControl CCnet.config：

```
<msbuild>
            <executable>C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
            <projectFile>ClassParseMicroData.sln</projectFile>
            <buildArgs> /t:Build </buildArgs>
            <targets>Build</targets>
            <timeout>600</timeout>
            <logger>C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
</msbuild>

<nunit>
            <path>C:\Program Files (x86)\NUnit 2.6.2\bin\nunit-console.exe</path>
            <assemblies>
            <assembly>D:\SeleniumProject\microdata-csharp\test-class\ClassParseMicroData\ClassParseMicroData\bin\Debug\ClassParseMicroData.dll</assembly>
            </assemblies>
            <timeout>180000</timeout>                   
</nunit> 
```

我想从我的测试中发送到 App.config 的 MSbuild 属性，这样的东西`<buildArgs> /t:Build /p:link=test </buildArgs>`将在测试中使用，问题是我不知道如何正确编写 App.config 来发送这个值。在测试中我会这样使用`ConfigurationManager.AppSettings["link"];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:45:50.370

您可能必须重写 ccnet.config 才能调用自定义 MSBuild 脚本。在自定义 MSBuild 脚本中，您可以使用[MSBuild 社区任务](https://github.com/loresoft/msbuildtasks)，通过 XMLQuery 或 XMLUpdate 任务从 app.config 文件中获取值。获取 app.config 中的值后，可以将其传递到 MSBuild 的调用中以编译解决方案文件。

有关创建自定义 MSBuild 脚本的更多信息，[Microsoft Build Engine 内部：使用 MSBuild 和 Team Foundation Build](https://rads.stackoverflow.com/amzn/click/com/0735645248)一书是一个很好的指南。或者，您可以使用[MSDN MSBuild 参考](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)。

# php - 禁用/启用从数据库登录 Magento

> ID：13394886
> 
> 赞同：7
> 
> 时间：2012-11-15T09:46:58.690
> 
> 标签：php, magento

我知道要通过管理员启用日志记录，您可以转到：
系统 > 配置 > 高级 > 开发人员 > 日志设置 > 启用

但是有没有办法通过数据库启用它？因为我无权访问管理员。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T10:22:57.887

系统/配置中出现的所有设置都存储在`core_config_data`表格中。

您正在搜索的是`dev/log/active`.

请注意，在此表中，您可以为每个商店设置不同的值

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T21:24:40.377

将文件 lib/Varien/Db/Adapter/Pdo/Mysql.php 中的变量值更改为

```
$_debug               = true;
$_logQueryTime        = 0.05;
$_logAllQueries       = true;
$_logCallStack        = false;
$_debugFile           = 'var/debug/pdo_mysql.log'; 
```

这将打印出 sql 查询

# geoip - GeoIP 的 Web 服务

> ID：13394889
> 
> 赞同：2
> 
> 时间：2012-11-15T09:47:10.833
> 
> 标签：geoip

是否有**可靠**的网络服务提供 API 将 IP 地址转换为位置，即`city, region, country`. 愿意支付，但需要可靠的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-25T17:05:05.800

我的服务[http://ipinfo.io](http://ipinfo.io)包括位置信息、主机名、网络所有者和其他一些详细信息：

```
$ curl ipinfo.io/8.8.8.8
{
  "ip": "8.8.8.8",
  "hostname": "google-public-dns-a.google.com",
  "loc": "37.385999999999996,-122.0838",
  "org": "AS15169 Google Inc.",
  "city": "Mountain View",
  "region": "CA",
  "country": "US",
  "phone": 650
} 
```

这是一个 PHP 示例：

```
$ip = $_SERVER['REMOTE_ADDR'];
$details = json_decode(file_get_contents("http://ipinfo.io/{$ip}"));
echo $details->city; // -> "Mountain View" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T08:09:37.610

我发现了这些免费的 Geo-Ip 服务：

[http://freegeoip.net](http://freegeoip.net)

[http://www.telize.com](http://www.telize.com)

这是两个非常快速的演示安装（我的）：

[http://bric.lepus.uberspace.de:61165](http://bric.lepus.uberspace.de:61165)

[https://oo.bootes.uberspace.de](https://oo.bootes.uberspace.de)

如果您想长期实施服务，请与我联系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-24T14:49:26.293

取决于您想要返回给您的信息量以及您获得的流量。你可以使用Maxmind GeoIPCityLite 提供的免费服务，FreeGeoIP 还不错，ipinfodb..

如果您想尝试一下，我正在启动我自己的名为[http://www.snoopi.io的 GeoIP 服务。](http://www.snoopi.io)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T19:17:41.977

关于 ipinfo.io，它不是完全免费的！核实：

“您每天限制为 1,000 个 API 请求。如果您需要发出更多请求，或需要 SSL 支持，请参阅我们的付费计划。”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-23T03:02:59.177

[http://www.ipinfodb.com](http://www.ipinfodb.com)有免费的地理定位 API。它的速率限制为每秒 2 个查询。

[http://api.ipinfodb.com/v3/ip-city/?key=your_api_key&ip=74.125.45.100](http://api.ipinfodb.com/v3/ip-city/?key=your_api_key&ip=74.125.45.100)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-21T14:55:22.547

*我个人可以（由于我的公司）建议 Netacuity - 它非常可靠（我真的*想强调一下），但我不知道他们是否提供 API（或者您需要手动下载/更新）。

或者，您可以看一下 Maxmind，它是 FreeGeoIp.net 背后的“工具”（即使用 Maxmind 的 GeoLite2），它更精确，具有更多数据，并且每个请求的成本为 0.01 美元左右 - 好消息是您可以缓存结果。

# c# - 如何在 C# XNA 中创建计时器/计数器

> ID：13394892
> 
> 赞同：1
> 
> 时间：2012-11-15T09:47:25.030
> 
> 标签：c#, timer, xna, clock, game-development

我对 C# 编程相当陌生，这是我第一次在 XNA 中使用它。我正在尝试与朋友创建游戏，但我们正在努力制作基本的计数器/时钟。我们需要的是一个从 1 开始的计时器，每 2 秒 +1，最大容量为 50。对编码的任何帮助都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:05:12.143

要在 XNA 中创建计时器，您可以使用如下内容：

```
int counter = 1;
int limit = 50;
float countDuration = 2f; //every  2s.
float currentTime = 0f;

currentTime += (float)gameTime.ElapsedGameTime.TotalSeconds; //Time passed since last Update() 

if (currentTime >= countDuration)
{
    counter++;
    currentTime -= countDuration; // "use up" the time
    //any actions to perform
}
if (counter >= limit)
{
    counter = 0;//Reset the counter;
    //any actions to perform
} 
```

我也不是 C# 或 XNA 方面的专家，所以我很感激任何提示/建议。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T10:09:48.487

如果您不想使用 XNA ElapsedTime，您可以使用 c# timer。你可以找到关于那个的教程，这里是[计时器的 msdn 参考](http://msdn.microsoft.com/en-us/library/0tcs6ww8%28v=vs.71%29.aspx)

无论如何，这里有一些代码或多或少地做你想要的。

首先，您需要在您的类中声明如下内容：

```
 Timer lTimer = new Timer();
    uint lTicks = 0;
    static uint MAX_TICKS = 50; 
```

然后你需要在任何你想要的地方初始化计时器

```
 private void InitTimer()
    {
        lTimer       = new Timer();
        lTimer.Interval = 2000; 
        lTimer.Tick += new EventHandler(Timer_Tick);
        lTimer.Start();
    } 
```

然后在 Tick 事件处理程序中，您应该每 50 个刻度做任何您想做的事情。

```
 void Timer_Tick(object sender, EventArgs e)
    {
        lTicks++;
        if (lTicks <= MAX_TICKS)
        {
            //do whatever you want to do
        }
    } 
```

希望这可以帮助。

# mysql - 存储压缩文件的数据库

> ID：13394897
> 
> 赞同：0
> 
> 时间：2012-11-15T09:47:35.390
> 
> 标签：mysql, database, redis, storage, bigdata

我们使用 Redis 数据库作为：

```
key -> (file1, file2, file3) 
```

该值始终是三个压缩文件的列表。

并非所有的键都有 3 个文件，即

```
key2 -> (file4, file5) 
```

文件使用 zlib 压缩。压缩后的文件大小在 50 - 120 K 之间。

我想将“完整”键（列表中有 3 个文件的键）存储在数据库中。

到目前为止，我将数据存储在 MySQL 表中：

```
key_id : INTEGER , PRIMARY KEY
first : BLOB
second : BLOB
third : BLOB 
```

这工作得很好，除了慢速插入（Mysql Server 同时做其他事情）。

我将非常罕见地查询数据，但我希望能够轻松地一一获取。

Redis 是一个数据库，我知道我可以转储到一个文件（rdb 文件）。

所以我认为使用另一个 DBMS 是多余的。但是 redis 数据库是内存有限的，所以我不能等待完成值（文件）的生成，然后转储到一个 rdb 文件。

我想创建仅包含“完整”键的较小 rdb 文件。IE

在时间 1，redis 包含以下内容：

```
key3 -> (a, b, c)
key14 -> (e, f)
key1 -> (g, h, i) 
```

那么如果我决定将转储文件转储到 1.rdb 应该只包含：

```
key3 and key14 
```

如果转储成功，我将删除转储的密钥（key3，key4）

并且redis应该有：

```
key14 -> (e, f) 
```

现在在时间 5，redis 包含：

```
key5 -> (i, j , k)
key14 -> (d, e, f)
key6 -> (l, m) 
```

所以如果我保存到 2.rdb 文件应该只包含：

键 5、键 14

然后应该从redis中删除上述键。

那可能吗？如果重要，我正在使用python。

您对这项任务有其他想法吗？另一个 DBMS，直接存储到文件系统等。

PS 忘了提，总共会有大约 15.000.000 个密钥，所以会有 15.000.000 * 3 个文件。

我也使用带有 ext3 文件系统的 Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:00:01.663

我会尝试将所有内容保存在一个系统中。你真的需要 Redis 来管理密钥集吗？经常访问的数据库表应该大部分都缓存在内存中。

# java - 文件传输时如何创建进度条

> ID：13394898
> 
> 赞同：0
> 
> 时间：2012-11-15T09:47:39.877
> 
> 标签：java, swing, progress

```
import java.awt.Component;
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import javax.swing.JOptionPane;
import javax.swing.ProgressMonitorInputStream;

public class buckUpFile {
    private Component parentComponent;

    public void copyFile() {
        File srcFolder = new File(
                "C:\\Users\\ALLEN\\Workspace\\FINAL_LCTP_WORKBENCE_1.5");
        File destFolder = new File(
                "C:\\Data Programing\\COPY_OF_FINAL_LCTP_WORKBENCE_1.5");

        if (!srcFolder.exists()) {
            JOptionPane.showMessageDialog(null, "Directory does not exist.");
            System.exit(0);
        } else {
            try {
                copyFolder(srcFolder, destFolder);
            } catch (IOException e) {
                e.printStackTrace();
                System.exit(0);
            }
        }

        JOptionPane.showMessageDialog(null,
                "Back up request has been completed");
    }

    public void copyFolder(File src, File dest) throws IOException {
        if (src.isDirectory()) {
            if (!dest.exists()) {
                dest.mkdir();
            }

            String files[] = src.list();

            for (String file : files) {
                File srcFile = new File(src, file);
                File destFile = new File(dest, file);
                copyFolder(srcFile, destFile);
            }
        } else {
            InputStream in = new BufferedInputStream(
                    new ProgressMonitorInputStream(parentComponent, "Reading "
                            + src, new FileInputStream(src)));

            OutputStream out = new FileOutputStream(dest);

            byte[] buffer = new byte[1024];

            int length;
            while ((length = in.read(buffer)) > 0) {
                out.write(buffer, 0, length);
            }

            in.close();
            out.close();
        }
    }
} 
```

我上面的代码工作得很好，它允许我将文件的数据从一个目录复制到另一个目录。我的问题是，如何创建进度条？我可以附加到我的代码中，以使我的程序更加用户友好。我尝试使用 ProgressMonitorInputStream 但看起来我走错了路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T09:58:27.047

我可以想到两种方法。

## 摇摆工人

首先将复制代码包装到一个[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)中，使用`setProgress`更新进度的方法和一个属性更改侦听器来监视对进度属性的更改。

当进度属性更改时，您将更新 UI。

此解决方案将要求您提供自己的 UI

## 进度监视器

使用带有自己的 UI的[ProgressMonitorInputStream 。](http://docs.oracle.com/javase/7/docs/api/javax/swing/ProgressMonitorInputStream.html)

```
InputStream in = new BufferedInputStream(
    new ProgressMonitorInputStream(
        parentComponent,
        "Reading " + fileName,
        new FileInputStream(fileName))); 
```

（从 Java Docs 窃取的示例）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:55:03.410

在这里您可以找到相同的示例。[使用 Swing 的进度监控 API 取得进展](https://blogs.oracle.com/CoreJavaTechTips/entry/making_progress_with_swing_s)。

# php - mysql使用where获取重复行

> ID：13394904
> 
> 赞同：0
> 
> 时间：2012-11-15T09:47:58.413
> 
> 标签：php, mysql, sql

```
pid fid
6   19
7   19
8   19
9   19
7   30
6   30 
```

我有一张这样的桌子。我想选择重复的行，当我发送 19、30 个 id 时使用如下`IN`子句：

```
Select pid from tablename where fid IN (19,30); 
```

我想要这些结果

```
pid
7
6 
```

是否有任何 mysql 语句来获得这些结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:49:23.620

```
SELECT pid
FROM tableName
WHERE fid IN (19,30)
GROUP BY pid
HAVING COUNT(*) = 2 
```

`fid`如果没有为每个定义唯一约束`pid`，那么你需要在`DISTINCT`里面`COUNT`

```
SELECT pid
FROM tableName
WHERE fid IN (19,30)
GROUP BY pid
HAVING COUNT(DISTINCT fid) = 2 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/cea8a/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:48:51.313

利用`distinct`

```
Select distinct pid from tablename where fid IN (19,30); 
```

或查找重复项

```
select pid from tablename group by fid having count(*)>1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:54:41.877

首先，您应该对pid进行分组并计数，然后取出出现多次的pid

```
SELECT pid, count(*) AS cnt
FROM tablename
WHERE fid IN (19,30)
GROUP BY pid
HAVING cnt > 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:50:49.623

```
SELECT 
    pid 
FROM tablename 
where fid IN (19,30)
group by 
pid 
```

# java - 将小程序添加到网站

> ID：13394906
> 
> 赞同：4
> 
> 时间：2012-11-15T09:48:06.823
> 
> 标签：java, html, jar, applet, jnlp

第一次在这里发帖。我用java做了一个简单的计算器程序，我正试图把它放到我的网站上。从我从以前的帮助帖子中收集到的信息是，我需要使用我的所有程序内容创建一个 JApplet 并将其压缩成一个 .jar 文件。然后我需要创建一个 .JNLP 文件，该文件描述了应如何启动小程序。

所以这就是我遇到麻烦的地方。

```
package calculator;
import javax.swing.JApplet;
import javax.swing.SwingUtilities;

public class CalculatorApplet extends JApplet {

public void init()
{
    try
    {
        SwingUtilities.invokeAndWait(new Runnable()
        {
        public void run() {
            Calculator calc = new Calculator();
            add(calc);
        }
        });
    }
    catch(Exception e)
    {
        System.err.println("GUI creation failed");
    }
}
} 
```

看来我的小程序没有正确构建。每当我运行它时，都会抛出“java.lang.reflect.InvocationTargetException”。每当我独立于小程序运行我的计算器类时，它都会按预期工作。任何想法我的错误的根源在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:58:09.297

我认为 JNLP 文件用于 Java Web Start。这对于普通的 Java 小程序来说是不需要的。如果我错了，请纠正我。

If you have the working .jar file, an HTML file that calls the applet will be sufficient to run the applet. Insert the code `<applet width="300" height="300" archive="jar.jar" code="class.class"></applet>` into an HTML file, where `class.class` is the class extending Applet or JApplet and `jar.jar` the location of the jar file. Loading the HTML file in a browser will display the applet.

Alternatively, you can use Java's Applet Viewer to open the HTML page and open the applet locally.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T12:02:17.203

You can certainly use JNLP with applets. See [https://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/runAppletFunction.html](https://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/runAppletFunction.html) and [https://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/embeddingJNLPFileInWebPage.html](https://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/embeddingJNLPFileInWebPage.html)

# c - 如何为词法分析器创建makefile？

> ID：13394915
> 
> 赞同：0
> 
> 时间：2012-11-15T09:48:53.903
> 
> 标签：c, makefile, lex, lexical-analysis

我想使用 flex 为我的词法分析器制作一个 make 文件，我尝试了许多 make 文件的模板，但它没有工作，所以请帮我建立一个这里是编译代码的行：

```
lex -t lexical.l > lexical.c
cc -c -o lexical.o lexical.c
cc -o lexy lexical.o -ll 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T10:06:39.970

如果您使用 GNU make，则根本不需要 makefile。内置规则涵盖您的用例。

让我们打印内置规则，看看 make 是否知道如何将 '%.l' 转换为 '%.c'。

```
$ make -p | grep -A6 '\.l\.c'
make: *** No targets specified and no makefile found.  Stop.
.l.c:
#  Implicit rule search has not been done.
#  Modification time never checked.
#  File has not been updated.
#  recipe to execute (built-in):
    @$(RM) $@ 
     $(LEX.l) $< > $@ 
```

确实如此。以类似的方式，您可以检查 GNU make 是否知道如何从 '%.c' 构建 '%.o' 以及从 '%.o' 构建 '%' 可执行文件。

假设`lexical.l`当前目录中有 a 并且没有 makefile 让我们看看如何 make build `lexical`。

```
$ make -n lexical
rm -f lexical.c 
lex  -t lexical.l > lexical.c
cc    -c -o lexical.o lexical.c
cc   lexical.o   -o lexical
rm lexical.c lexical.o 
```

伟大的。我们错过的只是`-ll`您要求的链接标志。让我们将它添加到`LDLIBS`.

```
$ make -n lexical LDLIBS=-ll
rm -f lexical.c 
lex  -t lexical.l > lexical.c
cc    -c -o lexical.o lexical.c
cc   lexical.o  -ll -o lexical
rm lexical.c lexical.o 
```

瞧！因此，您的 makefile 可以短至

```
LDLIBS=-ll
all: lexical 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:06:04.283

一个起点是

```
LEX = lex

.l.c:
        $(LEX) -t $< >$@

.c.o:
        $(CC) -o $@ -c $<

lexy: lexical.o
        $(CC) -o $@ $^ -ll 
```

这需要通过`clean`规则、依赖跟踪等进行扩展，但我认为您应该能够了解 Makefile 的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:18:26.517

GNU make 已经为此定义了必要的规则。只需将它放在一个名为`Makefile`

```
LDLIBS = -ll

lexy: lexical.o

lexical.o: lexical.l 
```

并运行

> $ 制作

你就完成了。

# dart - Dart 导入显示窗口导致 NoSuchMethodError

> ID：13394916
> 
> 赞同：2
> 
> 时间：2012-11-15T09:48:59.370
> 
> 标签：dart, dartium

我试图使用新的**show**语法来减小编译的 js 代码的大小。只要我不需要任何类型的**窗口事件**，它就可以正常工作。

当我添加要显示的**窗口**时，编辑器说一切都很好。然后当我运行应用程序时，我得到：

```
Exception: NoSuchMethodError : method not found: 'get:window'
Receiver: Instance of 'Toolbar'
Arguments: []
Stack Trace: #0      Object._noSuchMethod (dart:core-patch:1261:3)
#1      Object.noSuchMethod (dart:core-patch:1264:25)
#2      Toolbar._init (...toolbar.dart:93:5)
#3      Toolbar.Toolbar.initialize (...toolbar.dart:47:10)
#4      main (...toolbar.dart:29:21) 
```

有没有其他方法可以在不使用**窗口**变量的情况下获取**窗口实例？**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:15:34.930

您确定使用 show 实际上有助于减小已编译 JavaScript 代码的大小吗？你不应该这样做。由于 tree-shaking 和死代码消除，只有您使用的内容才会显示在编译输出中。

你使用 show 来严格控制你导入的内容，很明显什么东西来自什么库。如果您在不使用 show 的情况下导入大量库，则很难分辨出什么来自哪里，这对于非常大的代码库可能是一个挑战。

如果您导入两个具有使用相同名称的函数或类的不同库，您也可以使用 show。通过使用 show，您可以指定您想要的。**

# php - PHP $_SERVER['DOCUMENT_ROOT']

> ID：13394924
> 
> 赞同：1
> 
> 时间：2012-11-15T09:49:14.463
> 
> 标签：php

```
 $username;
        $welcomeMessage;
        if( isset( $_SESSION['username'] ) ){
            $username = $_SESSION['username'];
            $welcomeMessage = "Hello $username! | ";
            $welcomeMessage .= '<a href="'.$_SERVER['DOCUMENT_ROOT'].'/nmc/Admin/LogoutProcessor.php">Logout</a>';
        } else {
            $welcomeMessage = "Welcome | ";
            $welcomeMessage .= '<a href="'.$_SERVER['DOCUMENT_ROOT'].'/nmc/Admin/LoginPage.php">Login</a>';
        } 
```

上面的代码返回“file:///C:/xampp/htdocs/nmc/Admin/LoginPage.php”

我正在使用xampp开发一个网站，基本上使用它自己的服务器处理，所以我不能使用上面的链接。我在不同的目录中有几个网页必须链接到 LoginPage.php，我需要一个标准链接。上面的代码在一个Class中，不同目录下的其他页面都可以调用它。

谁能告诉我如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T09:53:28.483

$_SERVER['DOCUMENT_ROOT'] 返回

> 当前脚本在其下执行的文档根目录，如服务器的配置文件中所定义。

您可以使用`$_SERVER['HTTP_HOST']`或绝对路径，例如`<a href="/nmc/Admin/LoginPage.php">Login</a>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-15T09:58:09.997

在这种情况下，最好创建一个 config.php 文件并将其保存在您的根目录中。在配置文件中，您定义了几个参数。

在每个页面中调用此配置文件。您的配置文件可能类似于以下配置文件。

```
define('APP_NAME',"beta");  
define('HTTP_SERVER', 'http://localhost/'); 
define('SITE_NAME', 'http://localhost/');   
define('DOCUMENT_ROOT',$_SERVER['DOCUMENT_ROOT'].APP_NAME); 
```

您还可以为您认为将在多个地方使用的图像、css 等定义目录。

所以而不是

```
$welcomeMessage .= '<a href="'.$_SERVER['DOCUMENT_ROOT'].'/nmc/Admin/LogoutProcessor.php">Logout</a>'; 
```

你可以写，

```
$welcomeMessage .= '<a href="'.HTTP_SERVER.'/nmc/Admin/LogoutProcessor.php">Logout</a>'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T09:54:40.513

```
 $_SERVER['DOCUMENT_ROOT'] 
```

返回物理文件系统路径。它不是 HTTP URL。

尝试删除它以使用绝对 URL 路径：

```
 <a href="/nmc/Admin/LoginPage.php">Login</a> 
```

或尝试改用 $_SERVER['HTTP_HOST'] 。

顺便说一句，[阅读 $_SERVER 文档](http://php.net/manual/en/reserved.variables.server.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T16:29:39.913

如果您使用 Wamp Server 或类似服务器，“ `/`”是**“www”文件夹**的文档根目录，因此您必须编写`"/yoursitesfoldername/nmc/Admin/LogoutProcessor.php"`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T20:11:32.683

我继承了一个到处使用它的站点，所以当我用 xampp 对其进行测试时，我最终创建了一个虚拟主机来加载该站点。

详情见这篇文章： [http ://www.dreamincode.net/forums/topic/307265-change-serverdocument-root-path-for-xammp-light/](http://www.dreamincode.net/forums/topic/307265-change-serverdocument-root-path-for-xammp-light/)

这是我的`httpd-vhosts.conf`文件：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot "C:/xampp/htdocs/examplesite/nested/path/to/content"
    ServerName example.localhost
    ErrorLog "logs/example.localhost-error.log"
    CustomLog "logs/example.localhost-access.log" common
</VirtualHost> 
```

# sql - 将值插入从两个表的连接中获得的列中？

> ID：13394934
> 
> 赞同：0
> 
> 时间：2012-11-15T09:49:34.457
> 
> 标签：sql, sql-server, sql-server-2008

如何根据两个表上的简单连接条件的结果将值插入到列中？

我已经设法为 UPDATE 执行此操作，但不是 INSERT，因为所有值都以逗号分隔在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:19:06.297

```
with expr(a,b) as (
   select t.val, u.val 
    from (values(0,1)) as t(id,val) 
     join (values(0,2)) as u(id,val)
      on t.id = u.id
) insert into table(column) select a as vals from expr union all select b from expr 
```

# sql - 返回前 10 名的最佳方法，但第一行需要是所有行的总和

> ID：13394941
> 
> 赞同：1
> 
> 时间：2012-11-15T09:50:16.187
> 
> 标签：sql, sum

我有一张有 2 张钞票的桌子。行。我无法在没有崩溃的情况下在浏览器中显示它们，因此只会返回前 10 行，但我的表格的第一行需要是所有 2 个账单的总和。行。

我的想法是选择所有行并计算总数，然后在同一张表上仅使用前 10 行进行联合。这样我就不需要两次运行相同的查询。

但是你的经验和想法是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:08:40.673

你可以试试这个

```
select SUM(total) from bill
union
select top (10) * from bill 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:30:50.557

SQLServer2005+

在我的示例中，我对行函数 ROW_NUMBER() 进行了编号，如果 rows = 11 然后将 SUM(total) 上的总计替换为 OVER() 子句

```
SELECT TOP(11) CASE WHEN (ROW_NUMBER() OVER (ORDER BY (SELECT 1))) = 11 THEN SUM(total) OVER() ELSE total END
FROM dbo.your_table 
```

# html - html中元素的定位

> ID：13394942
> 
> 赞同：0
> 
> 时间：2012-11-15T09:50:25.903
> 
> 标签：html, css, positioning

是否可以相对于其子元素定位父元素？

我的意思是，例如：`<dt>`and `<dd>`,`<dt>`位于`<dd>`' 高度的中心，因为我的高度`<dd>`不同。

这样的事情甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:02:28.753

一切都可以用 javascript 来实现，但从逻辑上讲，**你不希望**这样。将父母相对于孩子定位是没有意义的，因为无论您想要什么效果，都可以通过其他方式实现。

你在概念上问的是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:07:41.940

您可以使用 jquery 高度功能。通过使用每个功能，您可以实现这一点

[http://api.jquery.com/height/](http://api.jquery.com/height/) http://api.jquery.com/each/

# asp.net-mvc - 为什么在 Orchard 中使用 ContentParts？

> ID：13394944
> 
> 赞同：0
> 
> 时间：2012-11-15T09:50:28.087
> 
> 标签：asp.net-mvc, orchardcms

我有一些使用 ASP.NET MVC 的经验，但是几周以来我一直在为 Orchard 开发一个模块。

我无法理解的是，您几乎被强制在 Orchard 中使用 Content Parts 或 Content Types，而我只想从数据库中获取我的数据并以我的方式展示，而不是在某些文章中。

为什么是这样？有什么方法可以像在 ASP.NET MVC 中那样构建模块，而不使用所有 Orchard 的东西？我一直在看几个教程，但它们都是使用部件和驱动程序等。

编辑：

*机器.cs*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace PowerAll.Voorraad.Models
{
  public class MachineRecord
  {
    public int Id { get; set; }
    public int MachineNumber { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public char PriceType { get; set; }
    public decimal Price { get; set; }
    public int Year { get; set; }
  }
} 
```

*迁移.cs*

```
namespace PowerAll.Voorraad
{
  public class Migrations : DataMigrationImpl
  {
    public int Create()
    {
      SchemaBuilder.CreateTable("MachineRecord", table => table
        .Column<int>("Id", column => column.PrimaryKey().Identity())
        .Column<int>("MachineNumber", column => column.NotNull())
        .Column<string>("Title", column => column.NotNull().WithLength(40))
        .Column<string>("Description", column => column.WithLength(70))
        .Column<char>("PriceType", column => column.NotNull().WithLength(1))
        .Column<decimal>("Price", column => column.NotNull())
        .Column<int>("Year", column => column.WithLength(4))
      );

      // Return the version that this feature will be after this method completes
      return 1;
    }
  }
} 
```

*机器控制器.cs*

```
namespace PowerAll.Voorraad.Controllers
{
  [Themed]
  public class MachineController : Controller
  {
    private readonly IRepository<MachineRecord> machineRecords;

    public MachineController(IRepository<MachineRecord> MachineRecords) {
        machineRecords = MachineRecords;
    }

    public ActionResult Index() {
        // Here we're just grabbing records based on some fictional "Deleted" flag
        var items = machineRecords.Table;
        // Items is now an IEnumerable<MachineRecord>

        return View(items);
    }
  }
} 
```

*索引.cshtml*

```
@model IEnumerable<PowerAll.Voorraad.Models.MachineRecord>

<ul>
    @foreach(var item in Model) {
        <li>@item.Id</li>
        <li>@item.MachineNumber</li>
        <li>@item.Title</li>
        <li>@item.Description</li>
        <li>@item.PriceType</li>
        <li>@item.Price</li>
        <li>@item.Year</li>
    }
</ul>
Hello from view 
```

'Hello from view' 是可见的，所以我真的进入了我的视野。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:25:17.983

假设您的所有记录都是通过 Orchard 迁移创建的，那么您可以使用该`IRepository<>`界面访问您的数据。

例如

记录控制器.cs：

```
public class RecordController : Controller {
    private readonly IRepository<CustomRecord> _customRecords;

    public RecordController(IRepository<CustomRecord> customRecords) {
        _customRecord = customRecords;
    }

    public ActionResult Index() {
        // Here we're just grabbing records based on some fictional "Deleted" flag
        var items = _customRecords.Fetch(r => r.Deleted == false);
        // Items is now an IEnumerable<CustomRecord>

        return View(items);
    }
} 
```

视图/记录/Index.cshtml：

```
@model IEnumerable<CustomRecord>
<ul>
    @foreach(var item in Model) {
        <li>@item.Name</li>
    }
</ul> 
```

过去我遇到过问题，主键没有从我的迁移中正确设置（仅使用 .PrimaryKey() 是不够的），我使用基于以下内容的东西来创建非内容记录：

```
SchemaBuilder.CreateTable(typeof(CountryRecord).Name,
                                  table => table.Column<int>("Id", c => c.PrimaryKey().Identity())
                                                .Column<string>("Code")
                                                .Column<string>("Name")); 
```

# sql - 不同用户的SQL Server执行计划不同

> ID：13394947
> 
> 赞同：1
> 
> 时间：2012-11-15T09:50:33.643
> 
> 标签：sql, sql-server, tsql

我有一个由托管数据库应用程序 (ASP) 执行的选择查询。两个在各方面都相同的组使用相同的选择查询。两者都使用相同的应用程序和相同的服务器（SQL 和应用程序）。

除了最终用户的登录详细信息和他们连接的机器之外，一切都是相同的。

无论最终用户的登录详细信息如何，所有查询都使用相同的 SQL 登录名执行。然而，出于某种原因，对于某些用户来说，查询始终比其他用户运行得慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:24:57.133

我在这里解决了同样的问题：[MS SQL - different execution plan for different schemas?](https://stackoverflow.com/questions/15766583/ms-sql-different-execution-plan-for-different-schemas/15790876#15790876)

SQL 服务器上不同会话的不同选项导致存储过程使用不同的查询计划进行编译。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-30T13:35:30.107

在我的情况下，解决方案是更新执行计划中使用的索引之一的统计信息。

如果您知道/怀疑某些索引来更新统计信息，请尝试[`sp_updatestats`](http://msdn.microsoft.com/en-us/library/ms173804.aspx)对整个数据库执行或运行。[`UPDATE STATISTICS table_name index_or_statistics_name`](http://msdn.microsoft.com/en-us/library/ms187348.aspx)

# c# - 如何安全地保护我的离线 Windows 商店应用凭据？

> ID：13394948
> 
> 赞同：0
> 
> 时间：2012-11-15T09:50:37.377
> 
> 标签：c#, windows-runtime, winrt-xaml

我正在做 Windows 商店离线应用程序，出于某种原因，我需要在应用程序中存储我的应用程序的 clientid 和 secretid，所以如何安全地保护它们免受逆向工程等攻击，请注意我没有从用户输入中获取这些值，我需要在 c# 代码中使用这些值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:54:16.887

在 WinRT 中，最好的选择是[`PasswordCredential`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordcredential.aspx)在[`PasswordVault`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordvault.aspx).

```
var vault = new PasswordVault();

var credential = new PasswordCredential("yourapp", "clientid", "secretid");
vault.Add(credential);

// Later
credential = vault.Retrieve("yourapp", "clientid");
credential.RetrievePassword();
string password = credential.Password; 
```

# xsd - 下载所有导入的 XSD

> ID：13394950
> 
> 赞同：5
> 
> 时间：2012-11-15T09:50:39.983
> 
> 标签：xsd, download, zip

我在 XSD 中为我的应用程序使用 gml (3.1.1) XSD。我想下载 3.1.1 版中的所有 gml XSD，例如 zip 文件。换句话说：base xsd 在[这里](http://schemas.opengis.net/gml/3.1.1/base/gml.xsd)，我想下载这个 XSD，所有导入都在 zip 文件或类似 zip 文件的文件中。有没有支持它的应用程序？我找到了这个[下载](http://bloggingabout.net/blogs/wellink/archive/2010/09/30/download-all-files-referenced-in-an-xsd-locally.aspx)器，但它对我不起作用（我认为这个应用程序不支持在 gml.xsd 3.1.1 中出现的导入中的相对路径）。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T02:39:41.477

[QTAssistant](http://paschidev.com)的 XSR（我与它相关联）有一个易于使用的功能，它允许将 XSD 内容自动导入和重构为来自各种来源的本地文件。在此过程中，它将更新架构位置引用等。

我对完成此类任务所涉及的步骤进行了简单的[屏幕截图，以展示其可用性。](http://paschidev.com/videos/DownloadXSDFiles/DownloadXSDFiles_player.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-08T10:37:27.153

基于mschwehl的解决方案，我做了一个改进的类来实现fetch。它很适合这个问题。见[https://github.com/mfalaize/schema-fetcher](https://github.com/mfalaize/schema-fetcher)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-21T07:08:31.517

您可以使用 SOAP UI 来实现这一点。

跟着这些步骤 ：

1.  使用 WSDL 创建项目。
2.  选择您的界面并在界面查看器中打开。
3.  导航到“WSDL 内容”选项卡。
4.  使用“WSDL 内容”选项卡下的最后一个图标：“将整个 WSDL 和包含/导入的文件导出到本地目录”。
5.  选择要将 XSD 导出到的文件夹。

注意：SOAPUI 将删除所有相对路径并将所有 XSD 保存到同一文件夹中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-14T08:12:15.317

我编写了一个简单的 java-main 来完成这项工作并更改为相对 url

```
package dl;

import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.Authenticator;
import java.net.PasswordAuthentication;
import java.net.URI;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Scanner;
import java.util.Set;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class SchemaPersister {

    private static final String EXPORT_FILESYSTEM_ROOT = "C:/export/xsd";

    // some caching of the http-responses
    private static Map<String,String> _httpContentCache = new HashMap<String,String>();

    public static void main(String[] args) {
        try {
            new SchemaPersister().doIt();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void doIt() throws Exception {

//      // if you need an inouse-Proxy
//      final String authUser = "xxxxx";
//      final String authPassword = "xxxx"
//
//      System.setProperty("http.proxyHost", "xxxxx");
//      System.setProperty("http.proxyPort", "xxxx");
//      System.setProperty("http.proxyUser", authUser);
//      System.setProperty("http.proxyPassword", authPassword);
//
//      Authenticator.setDefault(
//        new Authenticator() {
//          public PasswordAuthentication getPasswordAuthentication() {
//            return new PasswordAuthentication(authUser, authPassword.toCharArray());
//          }
//        }
//      );
//      

        Set <SchemaElement> allElements = new HashSet<SchemaElement>() ;

//      URL url = new URL("file:/C:/xauslaender-nachrichten-administration.xsd");
        URL url = new URL("http://www.osci.de/xauslaender141/xauslaender-nachrichten-bamf-abh.xsd");

        allElements.add ( new  SchemaElement(url));

        for (SchemaElement e: allElements) {

            System.out.println("processing " + e);
            e.doAll();
        }

        System.out.println("done!");

    }

    class SchemaElement {

        private URL    _url;
        private String _content;

        public List <SchemaElement> _imports ;
        public List <SchemaElement> _includes ;

        public SchemaElement(URL url) {
            this._url = url;
        }

        public void checkIncludesAndImportsRecursive() throws Exception {

            InputStream in = new ByteArrayInputStream(downloadContent() .getBytes("UTF-8"));

            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();

            Document   doc = builder.parse(in);
            List<Node> includeNodeList = null;
            List<Node> importNodeList  = null;

            includeNodeList = getXpathAttribute(doc,"/*[local-name()='schema']/*[local-name()='include']");
            _includes = new ArrayList <SchemaElement> ();

            for ( Node element: includeNodeList) {

                Node sl = element.getAttributes().getNamedItem("schemaLocation");
                if (sl == null) {
                    System.out.println(_url + " defines one import but no schemaLocation");
                    continue;
                }

                String asStringAttribute = sl.getNodeValue();

                URL url = buildUrl(asStringAttribute,_url);

                SchemaElement tmp = new SchemaElement(url);
                tmp.setSchemaLocation(asStringAttribute);

                tmp.checkIncludesAndImportsRecursive();
                _includes.add(tmp);

            }

            importNodeList =  getXpathAttribute(doc,"/*[local-name()='schema']/*[local-name()='import']");
            _imports = new ArrayList <SchemaElement> ();

            for ( Node element: importNodeList) {

                Node sl = element.getAttributes().getNamedItem("schemaLocation");
                if (sl == null) {
                    System.out.println(_url + " defines one import but no schemaLocation");
                    continue;
                }

                String asStringAttribute = sl.getNodeValue();
                URL url = buildUrl(asStringAttribute,_url);

                SchemaElement tmp = new SchemaElement(url);
                tmp.setSchemaLocation(asStringAttribute);

                tmp.checkIncludesAndImportsRecursive();

                _imports.add(tmp);
            }

            in.close();

        }   

        private String schemaLocation;

        private void setSchemaLocation(String schemaLocation) {
            this.schemaLocation = schemaLocation;

        }

        // http://stackoverflow.com/questions/10159186/how-to-get-parent-url-in-java
        private URL buildUrl(String asStringAttribute, URL parent) throws Exception {

            if (asStringAttribute.startsWith("http")) {
                return new URL(asStringAttribute);
            }

            if (asStringAttribute.startsWith("file")) {
                return new URL(asStringAttribute);
            }

            // relative URL
            URI parentUri = parent.toURI().getPath().endsWith("/") ? parent.toURI().resolve("..") : parent.toURI().resolve(".");
            return new URL(parentUri.toURL().toString() + asStringAttribute );

        }

        public void doAll() throws Exception {

            System.out.println("READ ELEMENTS");
            checkIncludesAndImportsRecursive();

            System.out.println("PRINTING DEPENDENCYS");
            printRecursive(0);

            System.out.println("GENERATE OUTPUT");

            patchAndPersistRecursive(0);

        }

        public void patchAndPersistRecursive(int level) throws Exception {

            File f = new File(EXPORT_FILESYSTEM_ROOT + File.separator + this.getXDSName()  );

            System.out.println("FILENAME: " + f.getAbsolutePath());

            if (_imports.size() > 0) {

                for (int i = 0; i < level; i++) {
                    System.out.print("   ");
                }

                System.out.println("IMPORTS");
                for (SchemaElement kid : _imports) {
                    kid.patchAndPersistRecursive(level+1);
                }

            }

            if (_includes.size() > 0) {

                for (int i = 0; i < level; i++) {
                    System.out.print("   ");
                }

                System.out.println("INCLUDES");
                for (SchemaElement kid : _includes) {
                    kid.patchAndPersistRecursive(level+1);
                }

            }

            String contentTemp = downloadContent();

            for (SchemaElement i : _imports ) {

                if (i.isHTTP()) {
                    contentTemp = contentTemp.replace(
                            "<xs:import schemaLocation=\"" + i.getSchemaLocation() ,        
                            "<xs:import schemaLocation=\"" + i.getXDSName() );
                }

            }

            for (SchemaElement i : _includes ) {

                if (i.isHTTP()) {
                    contentTemp = contentTemp.replace(
                            "<xs:include schemaLocation=\"" + i.getSchemaLocation(),        
                            "<xs:include schemaLocation=\"" + i.getXDSName() );
                }

            }

            FileOutputStream fos = new FileOutputStream(f);     
            fos.write(contentTemp.getBytes("UTF-8"));
            fos.close();

            System.out.println("File written: " + f.getAbsolutePath() );

        }

        public void printRecursive(int level) {

            for (int i = 0; i < level; i++) {
                System.out.print("   ");
            }

            System.out.println(_url.toString());

            if (this._imports.size() > 0) {

                for (int i = 0; i < level; i++) {
                    System.out.print("   ");
                }

                System.out.println("IMPORTS");
                for (SchemaElement kid : this._imports) {
                    kid.printRecursive(level+1);
                }

            }

            if (this._includes.size() > 0) {

                for (int i = 0; i < level; i++) {
                    System.out.print("   ");
                }

                System.out.println("INCLUDES");
                for (SchemaElement kid : this._includes) {
                    kid.printRecursive(level+1);
                }

            }
        }

        String getSchemaLocation() {
            return schemaLocation;
        }

        /**
         * removes html:// and replaces / with _
         * @return
         */

        private String getXDSName() {

            String tmp = schemaLocation;

            // Root on local File-System -- just grap the last part of it
            if (tmp == null) {
                tmp = _url.toString().replaceFirst(".*/([^/?]+).*", "$1");
            }

            if ( isHTTP() ) {

                tmp = tmp.replace("http://", "");
                tmp = tmp.replace("/", "_");

            } else {

                tmp = tmp.replace("/", "_");
                tmp = tmp.replace("\\", "_");

            }

            return tmp;

        }

        private boolean isHTTP() {
            return _url.getProtocol().startsWith("http");
        }

        private String downloadContent() throws Exception {

            if (_content == null) {

                System.out.println("reading content from " + _url.toString());

                if (_httpContentCache.containsKey(_url.toString())) {
                    this._content = _httpContentCache.get(_url.toString());
                    System.out.println("Cache hit! " + _url.toString());
                } else {

                    System.out.println("Download " + _url.toString());
                    Scanner scan =  new Scanner(_url.openStream(), "UTF-8");

                    if (isHTTP()) {
                        this._content = scan.useDelimiter("\\A").next();    
                    } else {
                        this._content = scan.useDelimiter("\\Z").next();
                    }

                    scan.close();

                    if (this._content != null) {
                        _httpContentCache.put(_url.toString(), this._content);
                    }

                }

            }

            if (_content == null) {
                throw new NullPointerException("Content of " + _url.toString() + "is null ");
            }

            return _content;

        }

        private List<Node> getXpathAttribute(Document doc, String path) throws Exception {

            List <Node> returnList = new ArrayList <Node> ();

            XPathFactory xPathfactory = XPathFactory.newInstance();

            XPath xpath = xPathfactory.newXPath();

            {
                XPathExpression expr = xpath.compile(path);

                NodeList nodeList = (NodeList) expr.evaluate(doc, XPathConstants.NODESET );

                for (int i = 0 ; i < nodeList.getLength(); i++) {

                    Node n = nodeList.item(i);

                    returnList.add(n);

                }
            }

            return returnList;

        }

        @Override
        public String toString() {

            if (_url != null) {
                return _url.toString();
            }

            return super.toString();

        }

    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-18T20:48:52.077

`import`我创建了一个 python 工具来递归下载标签中具有相对路径的 XSD （例如`<import schemaLocation="../../../../abc`：）

[https://github.com/nate/xsd_download](https://github.com/n-a-t-e/xsd_download)

下载架构后，您可以使用它`xmllint`来验证 XML 文档

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-28T13:06:36.550

我正在使用 xmlbeans 项目中的 org.apache.xmlbeans.impl.tool.SchemaResourceManager。这个类快速且易于使用。

例如：

```
 SchemaResourceManager manager = new SchemaResourceManager(new File(dir));
    manager.process(schemaUris, emptyArray(), false, true, true);
    manager.writeCache(); 
```

此类有一个 main 方法，用于记录可用的不同选项。

# ssas - 如何创建基于过滤维度的计算度量？

> ID：13394954
> 
> 赞同：2
> 
> 时间：2012-11-15T09:50:52.587
> 
> 标签：ssas, mdx, sql-server-2012, olap, ssas-2012

我对 MDX 相对较新（刚刚在订购一本书的过程中）并且在创建计算度量时有所突破，该度量应该根据一组日期范围（来自我的时间维度），应该由另一个维度的属性过滤。不幸的是，我似乎陷入了困境，看不到明确的出路。我查看了其他类似的问题，但没有看到任何尝试做同样的事情，只有单维度测量。

我有一个测量组，其中包含物理测量`SourceMeasure`。

我有一个名为 的时间维度，`[Time]`我想用它来指定我的计算范围。这与我的日期键与上述度量组有关。

我有一个名为 的 Account 维度，`[Dim Account]`其中包含两个日期属性：`[Account Start Date]`和`[Account End Date]`。这通过帐户 ID 与上述度量值组相关。

我想要做的是将`[Time]`维度过滤到基于`[Account Start Date]`and的范围内，并返回为该帐户指定的期间`[Account End Date]`的总和。`[SourceMeasure]`

显然，这对于每个帐户都会有所不同，因此不应聚合，除非按`[Dim Account]`维度进行聚合（如果未应用，可能返回 0 或 null）。

下面的示例测试表达式，由于 FORMAT_STRING 语法错误（根据 MDX Studio），目前无法正常工作。

```
WITH 
  MEMBER [Measures].[LifetimeMeasure] AS 
    Sum
    (
      {
          StrToMember
          (
        "[Time].[Date].&[" 
            + Format([Dim Account].[Account Start Date].CurrentMember.MemberValue,"yyyy-MM-ddThh:mm:ss")
            + "]"
          )
        : 
          StrToMember
          (
            "[Time].[Date].&[" 
            + Format([Dim Account].[Account End Date].CurrentMember.MemberValue,"yyyy-MM-ddThh:mm:ss")
            + "]"
          )
      }
     ,[Measures].[SourceMeasure]
    ) 
SELECT 
{
    [Measures].[LifetimeMeasure]
    ,[Measures].[SourceMeasure]
}
ON COLUMNS
,{
    [Dim Account].[Account].[AccountName]
} 
ON ROWS
FROM 
    [MyCube] 
```

我尝试了几种不同的方法（SCOPE、过滤器、IIF），但每次我似乎回到同一个症结点 - 如何根据 [Dim Account] 开始和结束的值过滤 [时间] 维度日期。

现在，可能是我完全误解了维度之间的关系如何工作和/或 SSAS 如何计算计算的度量，但我还没有达到我确定要寻找什么的水平，所以我我在转圈。

我正在尝试做的事情是否可能，如果是这样，是否有任何关于在哪里寻找帮助我找出哪里出错的指示？我是否应该改用计算维度？

我希望这一切都有意义，让我知道我是否遗漏了什么或者是否需要更多细节。我正在使用[MDX Studio](http://www.sqlbi.com/tools/mdx-studio/)进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:10:19.323

我通过将 CONSTRAINED 标志添加到 StrToMember 函数来发现错误。

我的 [Time] 维度的日期条目似乎默认为时间“00:00:00”，而我的 [Dim Account] 维度的日期条目默认为“12:00:00”。它看起来像 24 小时制和 12 小时制之间的不匹配。我在 [Dim Account] 维度上的日期字段被标记为“常规”，而不是“日期”，因为该维度不是自然时间维度。我认为这可能是导致不匹配的原因。

为了暂时解决这个问题，我从我的格式表达式中删除了时间格式，并在搜索根本原因时将“00:00:00”附加到字符串中。解决后我会更新。

更新：不匹配的原因不是维度，而是我在`StrToMember`表达式中使用的格式字符串。MSDN 上没有记录，但以下字符串输出 12 小时时间格式：

```
"yyyy-mm-ddThh:mm:ss" 
```

虽然此字符串输出 24 小时时间格式：

```
"yyyy-mm-ddTHH:mm:ss" 
```

# wordpress - NGINX 和 memcached - 全页缓存和 TTL

> ID：13394958
> 
> 赞同：2
> 
> 时间：2012-11-15T09:51:12.627
> 
> 标签：wordpress, nginx, memcached, vbulletin

我的所有网站都使用 nginx、memcached 和 APC。我托管的是一个 wordpress 网站、一个 vBulletin 论坛和其他一些网站。

我已经设置了 nginx 和 memcached，以便 nginx 首先检查 memcached 服务器以查看它是否有完整页面的条目，如果它没有将请求传递给 PHP 并缓存整个页面 - 然后将其显示给用户，配置见链接：http: [//pastebin.com/ZFSrA9e5](http://pastebin.com/ZFSrA9e5)

目前 vBulletin 论坛正在使用“$config['Datastore']['class'] = 'vB_Datastore_Memcached';” 并且 WP 博客正在使用 Memcached 对象缓存 (http://wordpress.org/extend/plugins/memcached/)

我目前仅将 WP 缓存为 memcached 中的整页（如上所述），以查看是否遇到任何问题 - 到目前为止一切都很好。

我想要实现的是良好的加载时间和低负载。我遇到的问题/我遇到的问题是：

1.  我怎么知道例如用户第一次登录，memcached 缓存了第一个用户的请求。然后下一个用户来了，memcached 为第一个用户提供缓存页面 - 有什么考虑/防止这种情况吗？

2.  memcached/nginx 如何/何时刷新全站点缓存以更新缓存？

3.  我是否建议同时运行 APC 和 memcached？据我所知；memcached 缓存小值，apc 缓存编译后的 PHP 代码，对吗？

如果有人能在这些问题上启发我，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:44:29.360

1）您的缓存响应完全取决于此：

```
set $memcached_key "wordpress:$request_uri"; 
```

因此，每个缓存条目仅依赖于 URI，而用户身份验证信息没有意义。第二个请求将与第一个请求相同，因为它将具有相同的内存缓存键。如果要为每个登录的用户存储单独的缓存键，则需要设置更多不同的键，如下所示：

```
set $memcached_key "wordpress:$request_uri$scheme$host$cookie_PHPSESSID"; 
```

2) 这取决于 WP 插件。Nginx 从不刷新缓存，要进行强制刷新，您需要重新启动 memcache。

3) 是的，它们都做不同的事情，APC 缓存已编译的 PHP 代码，因此不必每次请求都编译（它只在服务器重启或更改 php 文件时重新编译）。Memcache 将页面的某些部分或整个页面（您的场景）存储在内存中，当在 memcache 中找到 nginx 提供的 KEY 时，甚至不涉及 PHP - 整个页面直接从 memcahced 内存提供。

希望这可以帮助）

# python - 如何将基于 NLTK 的 ML（机器学习）Python 脚本公开为 Web 服务？

> ID：13394969
> 
> 赞同：4
> 
> 时间：2012-11-15T09:51:44.963
> 
> 标签：python, machine-learning, cherrypy

让我解释一下我想要实现的目标。过去在 Java 平台上工作时，我曾经编写 Java 代码（例如，从 MySQL 数据库推送或拉取数据等），然后创建一个 war 文件，该文件基本上捆绑了所有类文件、支持文件等，并将其放在一个像 Tomcat 这样的 servlet 容器，它变成了一个 Web 服务，可以从任何平台调用。

在我目前的情况下，我的大部分工作都是在 Java 中完成的，但是自然语言处理（NLP）/机器学习（ML）部分是在 Python 中使用 NLTK、Scipy、Numpy 等库完成的。我正在尝试在现有 Java 代码中使用这个 Python 引擎的服务。通过 Jython 之类的东西将 Python 代码集成到 Java 并不是那么简单（因为据我所知，Jython 不支持调用任何具有基于 C 的扩展的 Python 模块），所以我认为下一个选择是让它一个 Web 服务，类似于我过去使用 Java Web 服务所做的事情。现在问题的真正症结出现了，我如何将 ML 引擎作为 Web 服务运行并从任何平台调用它，在我当前的场景中，这恰好是 Java。我试着在网上看，寻找各种选项来实现这一点，并找到了 CherryPy、Werkzeug 等，但找不到正确的方法或任何示例代码或任何显示如何调用 NLTK-Python 脚本并通过 Web 提供结果并最终复制功能的东西Java Web 服务提供。在 Python-NLTK 代码中，ML 引擎在大型语料库上进行数据训练（这需要 3-4 分钟），我们不希望 Python 代码在每次调用方法时都经过这一步。如果我将其设为 Web 服务，则数据训练将只发生一次，即服务启动时服务已准备好被调用并使用已训练的引擎。并最终复制 Java Web 服务提供的功能。在 Python-NLTK 代码中，ML 引擎在大型语料库上进行数据训练（这需要 3-4 分钟），我们不希望 Python 代码在每次调用方法时都经过这一步。如果我将其设为 Web 服务，则数据训练将只发生一次，即服务启动时服务已准备好被调用并使用已训练的引擎。并最终复制 Java Web 服务提供的功能。在 Python-NLTK 代码中，ML 引擎在大型语料库上进行数据训练（这需要 3-4 分钟），我们不希望 Python 代码在每次调用方法时都经过这一步。如果我将其设为 Web 服务，则数据训练将只发生一次，即服务启动时服务已准备好被调用并使用已训练的引擎。

现在回到问题上来，我对 Python 中的这个 Web 服务的东西还很陌生，并且希望能提供任何关于如何实现这一点的指针。此外，任何关于实现从 Java 调用基于 NLTK 的 python 脚本的目标的指针，而不使用 web服务方法并且可以部署在生产服务器上以提供良好的性能也将是有帮助和可观的。提前致谢。请注意，我目前正在一台安装了 Python 2.6、JDK 1.6 的 Linux 机器上运行我的所有代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:21:13.933

基于 NLTK 的系统对每个请求的响应往往很慢，但如果有足够的 RAM，则可以实现良好的吞吐量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:05:07.623

一种方法是构建一个 XML-RPC 服务器，但您可能希望为每个连接派生一个新进程以防止服务器阻塞。我已经写了一个关于如何去做的详细教程：[https](https://speakerdeck.com/timclicks/case-studies-of-python-in-parallel?slide=68) ://speakerdeck.com/timclicks/case-studies-of-python-in-parallel?slide=68 。

# html - 使用时如何在 IE 中隐藏正文边框？

> ID：13394970
> 
> 赞同：2
> 
> 时间：2012-11-15T09:52:16.970
> 
> 标签：html, internet-explorer, border, margin, doctype

我有一个页面，里面除了这个 CSS 什么都没有：

```
body
{
    margin:0px;
    padding:0px;
    border:0px;
    background-color:black;
} 
```

它应该隐藏页面上的所有边框。

当我使用 !DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" 或根本不使用 DOCTYPE 时，它在所有浏览器中都可以正常工作。当我使用 !DOCTYPE html 时，它适用于除 IE 之外的所有浏览器。

任何想法为什么？

更新：我不知道为什么，但我看不到生产现场的边界，只有本地。代码在这里和那里都是一样的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:16:34.180

而不是身体使用*

```
* {

    border: 0px;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T17:09:07.877

我估计。我的 IE 在本地站点的兼容模式下运行。

# mobile - 如何覆盖保存按钮以在自定义页面上进行更改？

> ID：13394973
> 
> 赞同：0
> 
> 时间：2012-11-15T09:52:26.407
> 
> 标签：mobile, salesforce, apex-code, visualforce

当我在 commandButton 中使用标准保存操作时，它每次都会转到默认页面。

但是当我单击保存按钮时，我想切换到自定义页面..如何？

我尝试了很多这样的事情......

```
public Pagereference goHome(){

Pagereference to = Apexpages.currentPage();
     to.setRedirect(true);
return to;
} 
```

或者

```
public Pagereference goHome(){

Pagereference to = new Pagereference('/apex/mypage?user=guest');    return to;
}

<apex:commandButton value="Save"  action="{!goHome}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:24:27.757

标准`save()`方法可以使用`ApexPages.StandardController`. 这是一个如何实现它的简单示例：

顶点页面：

```
<apex:page standardController="Account" extensions="AccountExtension">
    <apex:form >

        <apex:pageMessages />

        <apex:pageBlock title="Account">
            <apex:pageBlockSection title="Account Details">
                <apex:inputField value="{!account.Name}" />
            </apex:pageBlockSection>

            <apex:pageBlockButtons >
                <apex:commandButton action="{!Save}" value="save" />
                <apex:commandButton action="{!Cancel}" value="cancel" />
            </apex:pageBlockButtons>
        </apex:pageBlock>
    </apex:form>

</apex:page> 
```

扩展类：

```
public class AccountExtension {

    ApexPages.StandardController stdController;

    public AccountExtension(ApexPages.StandardController controller) {
        stdController = controller;
    }

    public PageReference save() {
        stdController.save(); // calling standard save() method
        return null; // return 'null' to stay on same page
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:29:09.453

应该很简单！检查此示例如何为您工作（您需要通过添加`?id=006...`URL 将页面关联到有效的机会）。

```
public class redirectTestCtrl{
    public Opportunity o {get;set;}

    public redirectTestCtrl(ApexPages.StandardController ctrl){
        o = (Opportunity)ctrl.getRecord();
    }

    public PageReference save(){
        upsert o;
        //return new PageReference('/home/home.jsp'); // go to home page
        return new PageReference('/' + o.AccountId);  // or to the related Account's page
    }
} 
```

* * *

```
<apex:page standardController="Opportunity" extensions="redirectTestCtrl">
    <apex:outputField value="{!o.AccountId}" />
    <apex:form>
        <apex:inputField value="{!o.Name}" />
        <apex:commandButton value="Save" action="{!save}" />
    </apex:form>
    <span style="visibility:hidden">{!Opportunity.Name} {!Opportunity.AccountId}</span>
</apex:page> 
```

# facebook - facebook oauth 网址问题

> ID：13394974
> 
> 赞同：0
> 
> 时间：2012-11-15T09:52:28.310
> 
> 标签：facebook, oauth-2.0, facebook-login

我有以下代码，部分工作

```
<?php

   require_once 'facebook.php';

   $app_id = 'MY_APP_ID';
   $app_secret = 'MY_APP_SECRET';
   $app_url = 'http://mysite.com/index.php/';
   $scope = 'user_about_me';

   // Init the Facebook SDK
   $facebook = new Facebook(array(
     'appId'  => $app_id,
     'secret' => $app_secret,     
     'cookie' => true
   ));

   // Get the current user
   $user = $facebook->getUser();

   // If the user has not installed the app, redirect them to the Auth Dialog
   if (!$user) {
     $loginUrl = $facebook->getLoginUrl(array(
       'scope' => $scope,
       'redirect_uri' => $app_url,
     ));

     print('<script> top.location.href=\'' . $loginUrl . '\'</script>');
   } 

    $user_profile = $facebook->api('/me');
    echo "id: " . $user_profile['id'];   

 ?> 
```

我在此页面上打印出正确的 ID，但在其他几个页面上，我进入了 if(!$user)。

但是oauth url中有一个错误：

API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

我在stackoverflow上发现了类似的问题，但似乎无法解决：/

在我的设置下，我有相同的 url 和 $app_url

带有 facebook 的网站 -> 网站网址 -> [https://www.facebook.com/pages/myappname/373671679372127/](https://www.facebook.com/pages/myappname/373671679372127/)

编辑：我编辑了我的 app_url，所以它现在与我在应用设置下的画布 url 相同：http: [//mysite.com/index.php/](http://mysite.com/index.php/)

现在我没有收到错误。我只是得到一个空白窗口:(

编辑：在测试时偶尔清除 cookie 很重要。其他一些非常随机的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:27:56.597

检查您是否在开发设置中为“使用 Facebook 登录的网站”设置了正确的 URL。这不能是 facebook.com 上的页面，它必须是指向您的域的链接。

此外，我会将代码的最后 2 行包含在“else”块中。JavaScript 代码是错误的。这是正确的：

```
print('<script> top.location.href="' . $loginUrl . '";</script>'); 
```

（用双引号更容易理解，你错过了一个分号。即使它并不总是需要，你最好使用它）

试试这个代码：

```
$user = $facebook->getUser();

   // If the user has not installed the app, redirect them to the Auth Dialog
   if (!$user) {
     $loginUrl = $facebook->getLoginUrl(array(
       'scope' => $scope,
       'redirect_uri' => $app_url,
     ));
     print('<script> top.location.href=\'' . $loginUrl . '\';</script>');
   }
   else {
    echo 'User ID: ' . $user;
   } 
```

另外，去掉“index.php”之后的斜线。那不是我的文件夹（我希望/猜测）。

# javascript - 在 iOS 中使用 Javascript 构建一个简单的 WebView APP

> ID：13394976
> 
> 赞同：2
> 
> 时间：2012-11-15T09:52:40.203
> 
> 标签：javascript, iphone, ios, uiwebview, ios6

好的，伙计们，所以我是 iOS 编程的新手。

我正在尝试构建一个非常简单的 WebView iOS 应用程序来加载外部 URL 以及与之关联的所有 Javascript（@external 服务器）。

下面的代码完美地加载了页面，但是当我点击“登录”按钮时，它调用的 Javascript 似乎没有做任何事情。

```
- (void)loadView
{
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    UIWebView *webView =[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
    webView.scalesPageToFit = YES;
    [[self view] addSubview:webView];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://mywebsitehere.com/mob/"
                                                       ]]];
} 
```

这是外部 HTML 文件中登录按钮的代码：

```
<a id="btnLogin" data-role="button" data-icon="star" href="javascript:__doPostBack(&#39;btnLogin&#39;,&#39;&#39;)"><span>Login</span></a> 
```

我也尝试过使用不同的 PhoneGap/Cordova/ChildBrowser 教程，但一切似乎都非常过时/不起作用。

如果可能，我还需要 GeoLocation（网页请求某些功能的当前位置）。我基本上只需要它像在 Safari 中一样工作。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:06:06.033

默认情况下，Xcode 会将任何 javascript 资源文件添加到项目的**Compile Sources中。**它们应该从这里移除并放置在项目的**Copy Bundle Resources**中。当您选择项目时，您可以在 Target的**Build Phases**选项卡中找到这些。每次我的 JS 没有响应时，这就是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:03:02.640

经过大量研究，我发现 UIWebView 的 User-Agent 没有被 ASP.NET 正确识别。这会导致 ASP.NET 应用程序出现身份验证问题。

```
NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"User Agent Here", @"UserAgent", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionary]; 
```

更改用户代理后，身份验证过程成功运行。

# jquery - IE，jquery复选框不会改变

> ID：13394977
> 
> 赞同：0
> 
> 时间：2012-11-15T09:52:41.373
> 
> 标签：jquery, asp.net, html

我有这个 html 语法：

```
<input type="checkbox" id="openInNewWindowCheckBox" value ="some_value"  /> 
```

和一个jQuery脚本：

```
$("#openInNewWindowCheckBox").change(function(){

            if($(this).is(':checked'))
            { 

            }
            else
            { 

            }   

            return false; 
        }); 
```

在 IE 中我无法更改或取消更改复选框，html 看起来像这样：

```
<input id="openInNewWindowCheckBox" type="checkbox" _just_changed="true" jQuery18203967820199374023="133" value="some_value"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:58:35.487

返回 false 会阻止默认操作。您尝试为此返回 true 。

```
 $("#openInNewWindowCheckBox").change(function(){

        if($(this).is(':checked'))
        { 
            console.log('a');
        }
        else
        { 
            console.log('b');
        }   

        return true; 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:56:31.720

据我所知，复选框更改仅在您从 IE 中的复选框模糊后触发。将其绑定为单击。

# querydsl - 使用路径查询将 BooleanExpression 附加到现有 BooleanExpression 的 DSL

> ID：13394979
> 
> 赞同：1
> 
> 时间：2012-11-15T09:52:43.723
> 
> 标签：querydsl

我正在尝试附加两个 BooleanExpression。一个是规范的 BooleanExpression，另一个是由 Path 创建的。我认为我对路径的使用是错误的。我的代码：

```
public static Path<?> getPathByColumnName(String columnName) {
    Path<?> retval = null;      

    QProfile p = QProfile.profile;

    if (columnName.equals("name")) {
        retval = p.name;
    } else if (columnName.equals("account")) {
        retval = p.account.name;    
    } else if (columnName.equals("isPublic")) {
        retval = p.isPublic;
    } else if (columnName.equals("datavendors")) {
        retval = p.dataVendors.any().name;
    }

    return retval;
} 
```

然后将路径发送到以下方法

public static BooleanExpression getFilterPredicateByFilterAndPath(Path path, FilerType type, String filter) { BooleanExpression retval = null;

```
 if (path instanceof StringPath) {
        if (FilerType.CONTAIN.equals(type)) {
            retval = ((StringPath)path).like(filter);
        }               
    } else if (path instanceof BooleanPath) {
        if (FilerType.EQUAL.equals(type)) {
            retval = ((BooleanPath)path).eq(Boolean.valueOf(filter));
        }
    }       

    return retval;
} 
```

然后我试图将接收到的 BooleanExpression 加入到正则表达式中。这不起作用。任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:05:20.177

我的错。Path 的使用是正确的，错误在代码的不同部分。

# jsf - EL 可以调用公共接口的非公共实现者吗？

> ID：13394981
> 
> 赞同：1
> 
> 时间：2012-11-15T09:53:00.663
> 
> 标签：jsf, el

爪哇：

```
public class MyBean {
  ...
  public Handler getHandler(){  
    return new Handler(){  
      public void handle(ActionEvent e){...}  
    }
  }
  ...
}

public interface Handler{
  void handle(ActionEvent e);
} 
```

xhtml:

```
<h:commandButton ... actionListener="#{myBean.handler.handle}"/> 
```

我在tomcat 6.0环境中。这是 java 中的一种常见模式，但它似乎不适用于 EL 方法绑定。我得到一个例外：

```
javax.faces.event.MethodExpressionActionListener processAction SEVERE): Received 'java.lang.IllegalAccessException' when invoking action listener '#{myBean.handler.handle}' for component 'j_id115'
javax.faces.event.MethodExpressionActionListener processAction SEVERE): java.lang.IllegalAccessException: Class org.apache.el.parser.AstValue can not access a member of class MyBean$1 with modifiers "public"
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:53:07.283

是的，它可以，但你做错了一些事情。

首先`#handle()`-method 必须声明为 public，因为它是你接口的公共方法的实现。

```
public class MyBean {
  ...
  public Handler getHandler(){  
    return new Handler(){  
      public void handle(){...}  
    };
  }

} 
```

第二点是，您将 Handler 称为您的 actionListener，但您想要的是调用 #handle() 方法：

```
<h:commandButton actionListener="#{myBean.handler.handle}"/> 
```

您还应该从接口（和实现）的方法签名中省略 ActionEvent

```
public interface Handler {
  public void handle();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:58:53.770

这比我想象的要微妙……

从java中调用内部类中的public方法是没有问题的：

```
MyBean myBean = getMyBean();
Handler handler = myBean.getHandler();
handler.handle(event); // OK 
```

使用反射，这取决于它是如何完成的。可以按照声明 (1) 调用该方法：

```
Method getHandlerMethod = MyBean.class.getMethod("getHandler");
Method handleMethod = getHandlerMethod.getReturnType().getMethod("handle", ActionEvent.class);
handleMethod.invoke(handler, event); // OK, invoking declared method works 
```

或者可以按照内部类 (2) 中的定义调​​用它：

```
Method handleMethod = handler.getClass().getMethod("handle", ActionEvent.class);
handleMethod.invoke(handler, event) // throws IllegalAccessException 
```

显然，还有第三种选择，它可以工作 (3)：

```
Method handleMethod = handler.getClass().getDeclaredMethod("handle", ActionEvent.class);
handleMethod.invoke(handler, event) // OK 
```

不幸的是，我的 JSF 环境（带有 JSF mojarra 1.2 和 icefaces 1.8.2 的 Tomcat 6.0）实现了方法（2）而不是（3），因此我的示例不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:50:00.753

如果您将 handle() 方法指定为 ActionListener，它应该可以工作，例如

```
<h:commandButton ... actionListener="#{myBean.handler.handle}"/> 
```

要指定 ActionListener 接口的实现类，您可以使用“f:actionListener”标签，例如

```
<h:commandButton>
    <f:actionListener type="com.bla.SomeActionListenerImplementation" />
</h:commandButton> 
```

但这不适用于您的情况，因为您的 MyBean 类没有实现 ActionListener 接口......

# java - 值自动从哈希图中删除

> ID：13394983
> 
> 赞同：0
> 
> 时间：2012-11-15T09:53:14.913
> 
> 标签：java, android

我在哈希图中添加了几个键值对。

添加键值对后，当我打印 hashmap 的大小时，我得到的大小为 1。当我在另一个地方打印值时（将值添加到 key-hashmap 之后），我得到 hashmap 的大小为零。我不会从此类或任何其他外部类中删除添加到此哈希图中的值。那么，hashmap 大小是如何变为零的呢？有人可以解释一下吗？

任何帮助表示赞赏。

代码在这里：

```
private HashMap <Context,BLEEventListeners> mHashMapCallbacks = new HashMap<Context,BLEEventListeners>();
public void startTimeServer(BLEEventListeners eventListener,Context context) {
    mHashMapCallbacks.put(context, eventListener);
    Log.d(TAG,"****Inside startTimeServer,mHashMapCallbacks size: " +mHashMapCallbacks.size());// I get 1 as size
    Intent cmn_intent = new Intent(IServerCommon.class.getName());
    Intent time_intent = new Intent(ITimeServer.class.getName());
    mContext.bindService(time_intent, time_connection, Context.BIND_AUTO_CREATE);
    mContext.bindService(cmn_intent, cmn_connection, Context.BIND_AUTO_CREATE);
}

private ICommonResultCallback callback = new ICommonResultCallback.Stub() {
    public void receiveMessage(Bundle value) throws RemoteException {
        Log.d(TAG,"****Inside connected,mHashMapCallbacks size: "   +mHashMapCallbacks.size());// I get 0 as size
 }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:02:12.380

ICommonResultCallback() 看起来像一个回调函数。如果是，则在调用此函数时将再次初始化 hashmap。这是因为还为回调创建了一个新的类实例。

您可以通过使用将 hashmap 设置为“静态”来验证这一点。然后它应该保留该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:23:07.317

通用 Java 基础知识

```
private HashMap <Context,BLEEventListeners> mHashMapCallbacks = new HashMap<Context,BLEEventListeners>(); 
```

这里 Context 是您的键，每次都必须是唯一的，否则单个哈希图不包含您的数据，如果您只使用侦听器，为什么不使用 List 或 ArrayList，

你仍然必须做一些有上下文的事情做这样的事情

```
 private ArrayList<HashMap> tempArray = new ArrayList<HashMap>();
    public void startTimeServer(BLEEventListeners eventListener,Context context) {
        HashMap <Context,BLEEventListeners> mHashMapCallbacks = new HashMap<Context,BLEEventListeners>();
        tempArray.add(mHashMapCallbacks);
        Log.d(TAG,"****Inside startTimeServer,mHashMapCallbacks size: " +mHashMapCallbacks.size());// I get 1 as size
        Intent cmn_intent = new Intent(IServerCommon.class.getName());
        Intent time_intent = new Intent(ITimeServer.class.getName());
        mContext.bindService(time_intent, time_connection, Context.BIND_AUTO_CREATE);
        mContext.bindService(cmn_intent, cmn_connection, Context.BIND_AUTO_CREATE);
    }

    private ICommonResultCallback callback = new ICommonResultCallback.Stub() {
        public void receiveMessage(Bundle value) throws RemoteException {
            Log.d(TAG,"****Inside connected,Array size: "   +tempArray.size());// I get 0 as size
     }
            } 
```

# iphone - 在imageview中为图像透明部分着色

> ID：13394984
> 
> 赞同：0
> 
> 时间：2012-11-15T09:53:19.237
> 
> 标签：iphone, ios, uiimageview, uiimage

以下图像棕色部分是透明的，我尝试使用参考[http://www.edumobile.org/iphone/iphone-beginner-tutorials/digital-signature-application-in-iphone/](http://www.edumobile.org/iphone/iphone-beginner-tutorials/digital-signature-application-in-iphone/)着色，![在此处输入图像描述](../Images/de4f35e1fb5a08e6aa6fe3be0f7ddc0a.png)

是否可以仅在 uiimage 视图的透明部分着色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:34:40.863

非常简单的解决方案是`UIView`在您的 后面设置一个`UIImageView`，确保将`UIImageView`背景设置为清除，然后您将能够通过图像的透明区域看到背景视图中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:58:38.327

查看 Mike Ash 的[实施洪水填充](http://www.mikeash.com/pyblog/friday-qa-2012-09-14-implementing-a-flood-fill.html)和[优化洪水填充](http://www.mikeash.com/pyblog/friday-qa-2012-09-28-optimizing-flood-fill.html)。您必须将 NSGraphicsContext 的东西换成 CGContext。

# excel - 用于资源计划的 Excel 日历（使用宏）

> ID：13394985
> 
> 赞同：1
> 
> 时间：2012-11-15T09:53:19.907
> 
> 标签：excel, vba

我想使用 Excel 日历进行资源规划，我已经准备了 11 月的 Excel 日历。当您插入带有活动、开始日期和结束日期的项目计划时，我想编写一个宏来突出显示单元格的范围（开始日期到结束日期）。

我想将每人每天的工作限制为 4（例如，对于 2012 年 1 月 11 日，我已包括 4 行（`J7:J10`）。

在突出显示单元格之前，需要检查这 4 个单元格是否已填充，如果没有突出显示最后一个可用的单元格。如果所有 4 个都已突出显示，则显示一条消息。

# asp.net-mvc - ASP.NET MVC - 创建自定义 Uri 到路由映射处理程序

> ID：13394989
> 
> 赞同：1
> 
> 时间：2012-11-15T09:53:30.997
> 
> 标签：asp.net-mvc, database, asp.net-mvc-routing, custom-routes

我希望大量自定义我的应用程序处理路由的方式。本质上，我想实现这样的过程：

*   用户请求 URL：/custom-url-part-1/custom-url-part-2/gallery/1/date
*   应用程序在 Routes 的数据库表中查找匹配项
*   应用程序返回匹配的路由记录，包括：
    *   路由网址
    *   控制器
    *   行动
    *   参数
    *   默认值
*   应用程序查看 RouteUrl 并解析任何可选参数 {pagenum}、{orderby}
*   应用程序检查这些是否已在请求的 Url 中提供
*   如果没有提供它们，它会检查 Route 记录的“默认值”以获取它们
    *   然后这些在 RouteData 默认值中传递
*   参数在 RouteData 默认值中传递
*   返回路由数据

这样做的核心原因是我想要一个动态的路由表，由 CMS 修改，以便针对路由存储某些数据。

我的问题是：

如何复制 MVC 将 Uri 匹配到 Route 的方式？我基本上需要查看数据库表并根据 Uri 带回适当的 Route。与标准 ASP.NET MVC 功能通过 RouteCollections 进行查看并使用正确路由的方式非常相似。

我意识到我实际上是在重写 MVC 内置的一些功能，并用数据库替换 RoutesCollection ......但我需要这样做以实现两件事：

1.  路线完全是动态的、流动的并由 CMS 控制。
2.  针对那些无法从 Uri 本身推断出的路由存储的数据（例如，我可能希望在用户点击特定路由时发送一个 PageId，但我不希望 Uri 中的那个 PageId）。

# .net - Web API 帮助页面显示每种方法的两个版本

> ID：13394993
> 
> 赞同：3
> 
> 时间：2012-11-15T09:53:44.740
> 
> 标签：.net, asp.net-web-api, asp.net-web-api-helppages

如何避免显示我的方法的两个版本的帮助页面？

![](../Images/98d76cc3203af710eba19e305cb702cc.png)

如您所见，我为 设置了自定义路由`/api/property/search/{finnId}`，但我不希望使用查询参数的路由显示在帮助页面中。有什么办法可以解决这个问题？我正在使用 ASP.NET Fall 2012 BUILD preview 中的内置帮助页面。

顺便说一句，不要担心它说的事实`POST`，我已经把它切换到了`GET`，但我得到了相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T23:30:29.743

如果您只是想在“帮助”页面中隐藏此路线，而不是在应用程序中实际禁用它，您可以随时调整显示模板中的逻辑。

您可以通过添加逻辑来修改“ **...\DisplayTemplates\ApiGroup.cshtml** ”文件，以查看将要呈现的每个 api，并根据 URL 中是否存在查询字符串来决定是否要包含它.

不过，需要注意的重要一点是，这不会禁用路由。您只是将其隐藏在此帮助页面上。如果要禁用路由，我认为您需要定义自己的自定义路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T02:42:11.300

由于 Api 的路由请求组合不同，帮助页面默认显示所有组合。如果我们只是想在 UI 上隐藏显示，我们可以从 HelpController.cs 中的集合中删除项目

```
//helpcontroller.cs 
        public ActionResult Index()
        {
            ViewBag.DocumentationProvider = Configuration.Services.GetDocumentationProvider();
            //return View(Configuration.Services.GetApiExplorer().ApiDescriptions); 
            var apiExplorer = Configuration.Services.GetApiExplorer();
            for (int i = apiExplorer.ApiDescriptions.Count - 1; i >= 0; i--)
            {
                if (apiExplorer.ApiDescriptions[i].RelativePath.Contains("?")) { apiExplorer.ApiDescriptions.RemoveAt(i); }
            }
            return View(apiExplorer.ApiDescriptions);
        }
```

# android - Android 自定义 ListView 项目不可点击

> ID：13394998
> 
> 赞同：1
> 
> 时间：2012-11-15T09:54:00.973
> 
> 标签：android, android-listview

我有一个自定义 listView，我用这个项目布局填充。问题是 ListView 的 OnItemClickListener 甚至处理程序只捕获对 imageView 的点击，而不是对其他 2 个 textViews 的点击。有任何解决这个问题的方法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="@dimen/Fourdp"
    android:layout_marginLeft="@dimen/Fourdp"
    android:layout_marginRight="@dimen/Fourdp"
    android:layout_marginTop="@dimen/Fourdp"
    android:gravity="left|center"
    android:paddingBottom="5px"
    android:paddingLeft="5px"
    android:paddingTop="5px" 
    android:descendantFocusability="blocksDescendants">

    <ImageView
        android:id="@+id/color"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="@dimen/Fourdp"
        android:layout_marginLeft="@dimen/Fourdp"
        android:layout_marginRight="@dimen/Fourdp"
        android:layout_marginTop="@dimen/Fourdp"/>

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_gravity="left"
        android:layout_weight="1"
        android:longClickable="true"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/task"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textSize="20sp" />

        <TextView
            android:id="@+id/date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#336699" />
    </LinearLayout>

</LinearLayout> 
```

我尝试将 android:focusable="false" 和 android:clickable="false" 设置为 ImageView，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:59:42.847

那是因为包含 TextViews 的 LinearLayout 具有该`android:longClickable="true"`属性。

如果您删除它，它会起作用。

你为什么需要它 ？您可以使用`setOnLongClickListener()`ListView 的方法来检测对项目的长时间点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:59:03.183

您需要为适配器中的项目实现 onclicklistner（在其中膨胀行视图）

```
public View getView(int position, View convertView, ViewGroup parent) 
        {

             View v = convertView;
             if (v == null) 
             {
                 LayoutInflater vi = (LayoutInflater)InAppPurchaseActivity.this.getParent().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                 v = vi.inflate(R.layout.list_item_product, null);
             }

            // add your view with onclicklistner here

             return v;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:25:00.947

//在你的两个文本视图中添加这一行`android:duplicateParentState="true"`这将起作用。

```
<LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_gravity="left"
        android:layout_weight="1"
        android:longClickable="true"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/task"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:duplicateParentState="true"
            android:textSize="20sp" />

        <TextView
            android:id="@+id/date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:duplicateParentState="true"
            android:textColor="#336699" />
    </LinearLayout> 
```

# c# - 表单认证和 URL 重写

> ID：13394999
> 
> 赞同：1
> 
> 时间：2012-11-15T09:54:07.987
> 
> 标签：c#, asp.net, url-rewriting, forms-authentication

我正在尝试将**[自定义表单身份验证](http://www.codeproject.com/Articles/408306/Understanding-and-Implementing-ASP-NET-Custom-Form)**应用于我已经应用 URL 重写的网站。`Application_Start`在`global.asax`文件中使用此代码。

```
routes.MapPageRoute("bill-details",                 //Route Name
                    "{billno}",                     //URL with Parameters
                    "~/CallCenter/BillDetails.aspx" //Webforms page to Handle it.
                    ); 
```

但是当我尝试重写 Loginpage Url 时，我无法重写它。

```
<forms loginUrl="/Login.aspx" name="MyCustomAuthentication" timeout="30"/> 
```

实际问题是，当我打开一个页面时，它会检查身份验证，如果它没有经过身份验证，那么它会重定向到 Login.aspx 页面。

它表明`mywebsite.com/Login.aspx?ReturnUrl="..."` 我无法重写它。如果我不能删除返回 URL，那么我可以放置`Login`而不是`Login.aspx`??

如果我在这篇文章中使用此代码->[如何从 url 中删除 returnurl？](https://stackoverflow.com/questions/3716153/how-to-remove-returnurl-from-url/9796693#9796693)

如果我使用它，那么控制会一遍又一遍地循环并显示 - 重定向太多。我认为问题是，当控件像 一样进入`Login`页面时`mywebsite.com/Login`，它会检查身份验证并重定向到`Login.aspx`页面。并且您的代码再次重定向到登录页面。这个循环继续。

我也不需要返回 URL，因为我的用户必须先登录才能访问我的网站。

那么你能帮我删除返回网址吗？还有在 URL 重写 ??

这个我解决不了！！

检查我的网站。-> [http://orders.maabookings.com](http://orders.maabookings.com) `UserId - temp Password - temp`

在这个登录页面中，它显示为 `http://orders.maabookings.com/Login.aspx?ReturnUrl=%2f` 我需要这个我该`http://orders.maabookings.com/Login` 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-30T11:15:43.690

将 web.config 添加到您的 Login.aspx 放置的文件夹中

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>
  <location path="Login.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
</configuration> 
```

在 Global.asax 中

```
Sub Application_AuthenticateRequest(ByVal sender As Object, ByVal e As EventArgs)
    ' Fires upon attempting to authenticate the use

    Dim _URL As String = Request.Url.ToString

    If _URL.Contains("ReturnUrl") Then
        Response.Redirect("/Login")
    End If
End Sub 
```

我认为这对你有帮助。