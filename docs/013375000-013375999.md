# StackOverflow 问答 13375000-13375999

# android - android http请求在设备上不起作用，在模拟器中有效

> ID：13375000
> 
> 赞同：0
> 
> 时间：2012-11-14T08:06:00.937
> 
> 标签：android, request

我知道还有其他类似的帖子，但它没有帮助。

我的代码在模拟器中运行，但在设备上出现异常：java.lang.IllegalArgumentException：主机名可能不为空

权限设置：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

这是代码：

```
package com.example.testapp;

import java.net.URI;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

import android.annotation.TargetApi;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;

public class mainAct extends Activity {

    public void onCreate(Bundle savedState) {
        super.onCreate(savedState);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
        ARequestTask task = new ARequestTask();

        task.execute(new String[] {});

    }

    class ARequestTask extends AsyncTask<String, String, String> {

        @Override
        protected String doInBackground(String... params) {

            String hallo = "test";
            Log.d("EMAIL", hallo);

            try {
                HttpClient client = new DefaultHttpClient();
                URI uri = new URI("http://.../android/index.php");
                HttpGet get = new HttpGet(uri);

                HttpResponse responseGET = client.execute(get);
                HttpEntity resEntity = responseGET.getEntity();

                if (resEntity != null) {
                    Log.i("RESPONSE", EntityUtils.toString(resEntity));
                }
            } catch (Exception e) {
                e.printStackTrace();
            }

            return null;

        }

        @Override
        protected void onPostExecute(String result) {
            // use the result as you wish
        }
    }

} 
```

每次执行 HttpGet 时，都会出现异常，但仅在设备上出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:21:46.870

尝试使用：

```
URI uri = URI.parse("http://.../android/index.php"); 
```

完成后查看调试器中的 uri 对象。检查它是否有效。祝你好运。

# android - Android 在执行后台任务时显示进度对话框

> ID：13375009
> 
> 赞同：0
> 
> 时间：2012-11-14T08:06:57.733
> 
> 标签：android, progressdialog, android-progressbar

我正在构建一个 android 应用程序，它将下载一些数据并将其显示给用户。现在我需要显示一个圆形进度条，直到下载数据。单击按钮即可开始下载。我怎样才能做到这一点？示例代码将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:15:39.353

您需要使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来执行下载和[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)实例以显示循环进度。

您可以找到许多资源，它们准确地描述了如何使用该组合来做您想做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T08:14:55.487

检查 Android AsyncTask 类以了解您想要实现的目标。

基本上，您开始在 AsyncTask 的 onPreExecute 中显示 ProgressDialog，并在后台作业完成后在 onPostExecute 中将其关闭。

也检查这些。

[android如何使用asynctasks进度对话框](https://stackoverflow.com/questions/6450275/android-how-to-work-with-asynctasks-progressdialog)

[http://twigstechtips.blogspot.com/2011/11/for-my-app-moustachify-everything-i-was.html](http://twigstechtips.blogspot.com/2011/11/for-my-app-moustachify-everything-i-was.html)

[http://javatech.org/2011/02/discovering-android-opening-a-progress-dialog-with-asynctask/](http://javatech.org/2011/02/discovering-android-opening-a-progress-dialog-with-asynctask/)

# html - 具有 3 列的 Html 表单

> ID：13375012
> 
> 赞同：-1
> 
> 时间：2012-11-14T08:07:03.700
> 
> 标签：html

我正在考虑创建具有 4 列的表单，例如

```
Name Phone City Remarks

<html>
  <body>
<form id="myform" action="/" method="post" enctype="application/x-www-form-urlencoded">
  <input type="text" name="Name" id="mytext" />
  <input type="text" name="Phone number" id="mytext" />
  <input type="text" name="City" id="mytext" />
  <input type="text" name="remarks" id="mytext" />
  <input type="submit" id="mysubmit" />
</form>
  </body>
</html> 
```

在我的代码中，他们看起来已经分开了。我想要表格/网格，你能告诉我怎么做吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:10:41.363

使用表格

```
<table>
<tr>
<td>Column 1</td>
<td>Column 2</td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:10:36.637

在form里面你可以使用html table、tr和td标签来实现输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:11:28.263

您可以使用 CSS`column-count`属性：

```
#myform {
    -moz-column-count: 3;
    -moz-column-gap: 10px;
    -webkit-column-count: 3;
    -webkit-column-gap: 10px;
    column-count: 3;
    column-gap: 10px;
}​ 
```

示例在这里 - [http://jsfiddle.net/4yVGb/](http://jsfiddle.net/4yVGb/)

或者

在表单内制作另一个标记

# c# - 用 php 读取 SQLite blob，用 c# 编写

> ID：13375018
> 
> 赞同：1
> 
> 时间：2012-11-14T08:07:35.690
> 
> 标签：c#, php, sqlite

我用 c# 在 SQlite db 中编写了一个图像 blob，并尝试用 PHP 读取，但我遇到了一些问题。

PHP 不显示图像。

如果我将文件写入磁盘，则图像已损坏......

```
string queryInsertAnagraficaSqlLite = @"INSERT INTO utentiLite (user_name,first_name,last_name,SQL_iscrizione_num,SQL_iscrizione_prov,SQL_bcode,SQL_codice_fiscale,image,conferma) VALUES
(@username,@nome,@cognome,@numIscrizione,@provIscrizione,@barCode,@codiceFiscale,@Foto,@conferma)";

SQLiteCommand cmdInsertAnagrafica = new SQLiteCommand(queryInsertAnagraficaSqlLite, conn);
cmdInsertAnagrafica.Parameters.AddWithValue("@username", username);
cmdInsertAnagrafica.Parameters.AddWithValue("@nome", nome);
cmdInsertAnagrafica.Parameters.AddWithValue("@cognome", cognome);
cmdInsertAnagrafica.Parameters.AddWithValue("@numIscrizione", Iscrizione);
cmdInsertAnagrafica.Parameters.AddWithValue("@provIscrizione", provIscrizione);
cmdInsertAnagrafica.Parameters.AddWithValue("@barCode", barCode);
cmdInsertAnagrafica.Parameters.AddWithValue("@codiceFiscale", codiceFiscale);
cmdInsertAnagrafica.Parameters.AddWithValue("@conferma", conferma);
cmdInsertAnagrafica.Parameters.AddWithValue("@Foto", image); 
```

图像是一个字节数组。

这是读取图像的 PHP 代码。

```
<?php 
//header('Content-Type:image/jpeg;base64');
$id = $_GET['id'];
$dbFile = realpath('./').'/includi.db' ;
ob_end_flush();
$dbLink=sqlite3_open($dbFile) or   die("Could not open database");
$query = "SELECT image FROM utentiLite WHERE user_name='$id'";
$result = sqlite3_query($dbLink, $query);
while($row = sqlite3_fetch_array($result)) { 
    file_put_contents($id.".jpg",$row['image']);
    echo "<img src='".$id.".jpg'> <br/>";
}
?> 
```

# hibernate - 没有新类的休眠复合密钥

> ID：13375019
> 
> 赞同：3
> 
> 时间：2012-11-14T08:07:41.193
> 
> 标签：hibernate, composite-key

我有简单的休眠映射

```
 <class name="com.domain.OtherAccount" table="ACCOUNT">
          <composite-id >
            <key-property name="acctype" column="acctype" type="java.lang.Character"></key-property>
            <key-property name="accnum" column="accnum" type="java.lang.Integer"></key-property>
          </composite-id>
         <property name="accholder"></property>
      </class> 
```

我不想为复合键创建单独的类。因此，acctype 和 accnum 只是 OtherAccount 类的一部分。类实现可序列化接口和 hashCode() 和 equals() 方法。

我能够创建新对象并使用 session.save() 将其持久化。但是如何检索现有对象？在 session.get() 方法中如何指定复合键？

```
 In session.get(OtherAccount.class, HOW TO SPECIFY COMPOSITE KEY HERE ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T08:38:05.453

创建一个实例`OtherAccount`并仅设置这两个字段。Hibernate 并不关心实例是否具有比它需要的更多的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:33:39.040

@Aaron 提出了正确的方法。有效。我只是在这里详细说明一下，以便将来用户完全了解。

关于上面的映射，假设我有一个带有复合键值 Accnum 的 ACCOUNT 表记录：- 777

账户类型：- X

非关键列 Accholder :- Kaushik

我以这种方式检索和打印对象：-

```
 OtherAccount oa1 = new OtherAccount();
    oa1.setAccholder("before retrieving");
    oa1.setAccnum(777);
    oa1.setAcctype('X');
    System.out.println("oa1.Accholder " + oa1.getAccholder());

    session.get(OtherAccount.class, oa1);

    System.out.println("oa1.Accholder " + oa1.getAccholder()); 
```

它检索到正确的记录，并且“oa1”实例加载了数据库数据。所以 oa1.getAccholder() 的第一个 SOP 打印“检索之前”，第二个 SOP 打印来自 DB 的“Kaushik”ig 值。

不要忘记实现 hashCode() 和 equals() 方法，因为它是比较复合键所必需的。

# java - 本地线程变量或新线程 - Java

> ID：13375022
> 
> 赞同：0
> 
> 时间：2012-11-14T08:08:05.237
> 
> 标签：java

我有一个实现 Runnable 的类。出于日志记录的原因，我想知道用于运行该类的线程。在这种情况下，最好这样做

```
public class WebSocketHandle implements Runnable {
   private Thread myThread; // access to thread for logging

   public void start() {
      myThread = new Thread(this);
      myThread.start();
   }
} 
```

然后在创建这些的方法中，我执行以下操作：

```
 public void newSocket(Socket socket)
{
    WebSocketHandle handle = new WebSocketHandle(this, socket,_identity);
    _sockets.add(handle);

    EventLog.write("Socket assigned for new connection (" + _sockets.size() + ") "  + handle.toString() +  ". No value received yet yet...", getClass().getName(), "register");

    // Start thread listening for data
    new Thread(handle).start();
} 
```

或者最好有类似的东西：

```
public class WebSocketHandle implements Runnable {
   private String myThread;

   public void setThreadOwner(string threadId) {
      myThread = threadId;
   }
} 
```

然后它会被这样使用：

```
WebSocketHandle handle = new WebSocketHandle();
Thread newThread = new Thread(handle);

newThread.start();

handle.setThreadOwner(handle.toString()); 
```

我不禁觉得第二种选择是更好的做法，但编写的代码似乎更笨拙？？

编辑：回应亚伦的评论：

1.  这是针对 Web 服务器套接字处理代码的，因此线程将无限期地运行。我没有考虑过使用 ThreadPools 所以也许这是我需要考虑的事情

2.  我在 WebSocketHandle 类中记录各种活动（即接收和发送的数据），因此我想将日志记录事件与它正在运行的 Thread 实例联系起来。为此，我发现最简单的方法是将 thread.toString() 记录为日志输出的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:10:28.170

您可以简单地调用`Thread.currentThread()`以获取正在执行代码的线程。

为了帮助识别线程，请使用`new Thread("some useful name");`

**[编辑]**你的两种方法都有一些缺点。第一种方法总是创建一个线程，因此您不能在线程池中执行可运行文件。最终，你会想要这样做。不幸的是，当您发现您这样做时，您的应用程序将变得非常复杂并且很难更改。

“线程”也对您没有多大帮助；哪个线程开始某事通常无关紧要。在查找错误时，您想知道哪段代码执行了某个方法。所以将 a 传递`Logger`给`start()`.

也就是说，“访问线程以进行日志记录”是什么意思？创建的匿名线程`start()`包含哪些可能对日志记录有用的信息？由于它有一个生成的名称，而您仍然不知道谁打电话`start()`给我，所以第一种方法对我来说完全没用。

第二种方法允许您给出`Runnable`a 名称，但 a) 它不能编译并且 b) 也没有任何意义（更不用说变量名称令人困惑的事实）。

要获取某物的类别，您可以调用`getClass().getName()`; 使用 setter 设置实例的类名是没有意义的。所以第二种方法很容易混淆，它违反了[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

此外，它没有为您提供太多有用的日志信息：它没有告诉您谁创建了 的实例，`MyClass`如果您想要一个 logger `MyClass`，您可以简单地使用这一行：

```
private Logger log = LoggerFactory.getLogger(getClass()); 
```

不需要二传手。

所以我的结论是这两种方法都应该避免。

# mysql - 用于匹配多个列值的 SQL 查询

> ID：13375028
> 
> 赞同：2
> 
> 时间：2012-11-14T08:08:22.690
> 
> 标签：mysql, sql

我无法解决以下问题。

给定以下表结构和数据，我如何选择匹配两个标签的记录。例如：

```
+-----------------+------------------+
|  collection_id  |         tag      |
+-----------------+------------------+
|        1        |    advertising   |
|        1        |     tutorials    |
|        2        |    advertising   |
|        2        |       coding     |
+-----------------+------------------+ 
```

如果我搜索广告 && 教程，它应该返回`collection_id`= 1，而不是`collection_id`= 2。

任何指针最受欢迎。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:11:20.860

```
SELECT collection_ID
FROM tableName
WHERE tag IN ('advertising','tutorials')
GROUP BY collection_ID
HAVING COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/960fd/2)

如果`unique`没有在每个标签上指定约束`collection_ID`

```
SELECT collection_ID
FROM tableName
WHERE tag IN ('advertising','tutorials')
GROUP BY collection_ID
HAVING COUNT(DISTINCT tag) = 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/960fd/3)

# javascript - JavaScript：将文件发送到定义的网络打印机

> ID：13375030
> 
> 赞同：0
> 
> 时间：2012-11-14T08:08:38.510
> 
> 标签：javascript, ajax, networking, printing

有人问我是否可以开发一个 JS 解决方案，让我通过客户端访问网络打印机。所以，假设我有一个可供某些客户使用的网络服务，它提供了向用户定义的网络打印机打印报告（或类似的东西）的功能（用户告诉要在哪个域和打印机名称上打印）......

这有可能吗？最好的解决方案是，如果它可以通过 Ajax 请求之类的东西来完成；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:27:34.223

这是可能的，但可能不是您想要的方式。最好的办法是使用服务器端脚本打印到打印机。问题是，现代网络浏览器有很多不允许这样的安全功能。

我能想到解决这个问题的唯一方法是使用打印机：
1) 接受 HTTP 或 FTP 上传的打印作业。
2) 作为网站位于某个 DNS 域中，因此浏览器上的反跨站点脚本保护不会阻止您。

不过，再一次，您最好使用某种服务器端解决方案，或者编写一个程序或自定义插件以在客户端上运行。

# php - 复制递归文件和文件夹但跳过父级

> ID：13375033
> 
> 赞同：0
> 
> 时间：2012-11-14T08:08:52.720
> 
> 标签：php

```
function copy_directory( $source, $destination ) {
    if ( is_dir( $source ) ) {
        @mkdir( $destination );
        $directory = dir( $source );
        while ( FALSE !== ( $readdirectory = $directory->read() ) ) {
            if ( $readdirectory == '.' || $readdirectory == '..' ) {
                continue;
            }
            $PathDir = $source . '/' . $readdirectory; 
            if ( is_dir( $PathDir ) ) {
                copy_directory( $PathDir, $destination . '/' . $readdirectory );
                continue;
            }
            copy( $PathDir, $destination . '/' . $readdirectory );
        }

        $directory->close();
    }else {
        copy( $source, $destination );
    }
} 
```

这是我将整个目录和文件复制到另一个目的地的脚本。但我有一个小问题

我的文件夹如下：

```
cinch.v2.1.1\cinch\cinch\other folders and files
loopy.v2.1.3\loopy\loopy\other folders and files
musy.v3.1.4\musy\musy\other folders and files
... 
```

我只需要复制最后一个（深度 3）cinch、loopy、musy 文件夹，其中包含子文件夹和文件，而不是整个结构。怎么改剧本。

和复制结构应该是这样的：

```
cinch\other folders and files
loopy\other folders and files
musy\other folders and files 
```

我从

```
if (strpos($readdirectory, '.') === false && strpos($readdirectory, '_') === false) { 
```

但这不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:28:21.563

您必须首先查找 3 级目录，然后将这些目录复制到您的目的地：

```
function copy_directory(...) {
...
}

function copy_depth_dirs($source, $destination $level)
{
    $dir = dir($source);
    while (($entry = $dir->read()) !== FALSE) {
        if ($entry != '.' && $entry != '..' && is_dir($entry)) {
            if ($level == 0) {
                copy_directory($source . '/' . $entry, $destination);
            } else {
                copy_depth_dirs($source . '/' . $entry, $destination, $level - 1);
            }
        }
    }
}

copy_depth_dirs('cinch.v2.1.1', $destination, 3); 
```

# r - 用最后一个有效值替换列中一段 NA 的最后一个 NA

> ID：13375034
> 
> 赞同：3
> 
> 时间：2012-11-14T08:08:54.680
> 
> 标签：r, dataframe

这是一个示例数据框：

```
> df = data.frame(rep(seq(0, 120, length.out=6), times = 2), c(sample(1:50, 4), 
+ NA, NA, NA, sample(1:50, 5)))
> colnames(df) = c("Time", "Pat1")
> df
     Time Pat1
1     0   33
2    24   48
3    48    7
4    72    8
5    96   NA
6   120   NA
7     0   NA
8    24    1
9    48    6
10   72   28
11   96   31
12  120   32 
```

必须替换的 NA 由`which`和 逻辑运算符标识：

```
x = which(is.na(df$Pat1) & df$Time == 0) 
```

我知道该`locf()`命令，但它正在替换所有 NA。如何仅替换多列 df 中位置 x 的 NA？

* * *

编辑：这是我原始数据集的链接：[link](https://www.dropbox.com/s/o9qdkorjnozvwmh/pad_88.csv)

这就是我能走多远：

```
require(reshape2)
require(zoo)

pad.88 <- read.csv2("pad_88.csv")
colnames(pad.88) = c("Time", "Increment", "Side", 4:length(pad.88)-3)
attach(pad.88)

x = which(Time == 240 & Increment != 5)

pad.88 = pad.88[c(1:x[1], x[1]:x[2], x[2]:x[3], x[3]:x[4], x[4]:x[5], x[5]:x[6],x[6]:x[7], x[7]:x[8], x[8]:nrow(pad.88)),] 

y = which(duplicated(pad.88))
pad.88$Time[y] = 0

pad.88$Increment[y] = Increment[x] + 1

z = which(is.na(pad.88[4:ncol(pad.88)] & pad.88$Time == 0), arr.ind=T)
a = na.locf(pad.88[4:ncol(pad.88)]) 
```

我的下一步是类似的`pat.cols[z] = a[z]`，它不起作用。

* * *

结果应该是这样的：

```
Time Increment Side      1       2       3       4       5    ...

150     4       0   27,478  24,076  27,862  20,001  25,261
165     4       0   27,053  24,838  27,231  20,001  NA
180     4       0   27,599  24,166  27,862  20,687  NA
195     4       0   27,114  23,403  27,862  20,001  NA
210     4       0   26,993  24,076  27,189  19,716  NA
225     4       0   26,629  24,21   26,221  19,887  NA
240     4       0   26,811  26,228  26,431  20,001  NA
  0     5       1   26,811  26,228  26,431  20,001  25,261
 15     5       1   .... 
```

第 5 列中的最后一个有效值为 25,261。此值替换时间 0/Col 5 处的 NA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:17:06.593

您可以更改它以`x`记录所有`NA`值并使用其中的第一个和最后一个来识别您想要的位置。

```
df
   Time Pat1
1     0   36
2    24   13
3    48   32
4    72   38
5    96   NA
6   120   NA
7     0   NA
8    24    5
9    48   10
10   72    7
11   96   25
12  120   28

x <- which(is.na(df$Pat1))
df[rev(x)[1],"Pat1"] <- df[x[1]-1,"Pat1"]
df
   Time Pat1
1     0   36
2    24   13
3    48   32
4    72   38
5    96   NA
6   120   NA
7     0   38
8    24    5
9    48   10
10   72    7
11   96   25
12  120   28 
```

对于多列示例，在`sapply`调用中使用相同的想法：

```
cbind(df[1],sapply(df[-1],function(x) {y<-which(is.na(x));x[rev(y)[1]]<-x[y[1]-1];x}))
   Time Pat1 Pat2
1     0   41   42
2    24    8   30
3    48    3   41
4    72   14   NA
5    96   NA   NA
6   120   NA   NA
7     0   14   41
8    24    5   37
9    48   29   48
10   72   31   11
11   96   50   43
12  120   46   21 
```

# javascript - Javascript计算较深的颜色

> ID：13375039
> 
> 赞同：4
> 
> 时间：2012-11-14T08:09:38.623
> 
> 标签：javascript, jquery, colors, calculator

如何将此计算更改为更暗而不是更亮的颜色？

```
function increase_brightness(hex, percent){
    // strip the leading # if it's there
    hex = hex.replace(/^\s*#|\s*$/g, '');

    // convert 3 char codes --> 6, e.g. `E0F` --> `EE00FF`
    if(hex.length == 3){
        hex = hex.replace(/(.)/g, '$1$1');
    }

    var r = parseInt(hex.substr(0, 2), 16),
        g = parseInt(hex.substr(2, 2), 16),
        b = parseInt(hex.substr(4, 2), 16);

    return '#' +
       ((0|(1<<8) + r + (256 - r) * percent / 100).toString(16)).substr(1) +
       ((0|(1<<8) + g + (256 - g) * percent / 100).toString(16)).substr(1) +
       ((0|(1<<8) + b + (256 - b) * percent / 100).toString(16)).substr(1);
} 
```

**src** = [JavaScript 计算更亮的颜色](https://stackoverflow.com/questions/6443990/javascript-calculate-brighter-colour)

**演示** [http://jsbin.com/utavax/3/edit](http://jsbin.com/utavax/3/edit)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:31:14.240

你可以改变

```
return '#' +
   ((0|(1<<8) + r + (256 - r) * percent / 100).toString(16)).substr(1) +
   ((0|(1<<8) + g + (256 - g) * percent / 100).toString(16)).substr(1) +
   ((0|(1<<8) + b + (256 - b) * percent / 100).toString(16)).substr(1); 
```

到

```
return '#' +
   ((0|(1<<8) + r * (1 - percent / 100)).toString(16)).substr(1) +
   ((0|(1<<8) + g * (1 - percent / 100)).toString(16)).substr(1) +
   ((0|(1<<8) + b * (1 - percent / 100).toString(16)).substr(1); 
```

将解决您的问题。[演示](http://jsbin.com/utavax/7/)。

但较深的颜色不是一个好的定义。较暗可以解释为亮度较低或饱和度较低。所以更好的方法是将 RGB 颜色空间转换为 HSB 颜色空间，并调整 S/B 通道，然后将它们转换回来。

* * *

关于为什么对原始代码负值不可行的一点解释。

给出 -100 作为百分比，并且某个通道，比如 r，小于 128。然后

```
r + (256 - r) * percent / 100 
```

小于 0，加后`1 << 8`= 256

```
((0|(1<<8) + r + (256 - r) * percent / 100) 
```

小于 256。

取一个小于 256 的数字将通过调用最多生成两个十六进制数字`toString(16)`，因此`.substr(1)`将仅包含 0 或 1 个数字。通过将所有这些错误的数字组合在一起，不会在十六进制表示中生成正确的颜色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-27T05:53:07.797

我更新了您的原始函数，通过基本上将原始 RGB 值乘以一个百分比（向上或向下）来进行廉价版本的变亮/变暗。

```
function adjust(hexInput: string, percent: number) {
    let hex = hexInput;

    // strip the leading # if it's there
    hex = hex.replace(/^\s*#|\s*$/g, "");

    // convert 3 char codes --> 6, e.g. `E0F` --> `EE00FF`
    if (hex.length === 3) {
        hex = hex.replace(/(.)/g, "$1$1");
    }

    let r = parseInt(hex.substr(0, 2), 16);
    let g = parseInt(hex.substr(2, 2), 16);
    let b = parseInt(hex.substr(4, 2), 16);

    const calculatedPercent = (100 + percent) / 100;

    r = Math.round(Math.min(255, Math.max(0, r * calculatedPercent)));
    g = Math.round(Math.min(255, Math.max(0, g * calculatedPercent)));
    b = Math.round(Math.min(255, Math.max(0, b * calculatedPercent)));

    return `#${r.toString(16).toUpperCase()}${g.toString(16).toUpperCase()}${b
        .toString(16)
        .toUpperCase()}`;
}

console.log(adjust("#49D174", -14)) // Darken by 14% = #3FB464 
console.log(adjust("#49D174", -27)) // Darken by 27% = #359955 
```

该函数将百分比作为整数，但可以很容易地修改为小数。负变暗，正变亮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T09:56:00.723

我从[Stylus](http://learnboost.github.io/stylus/) ( [1](https://github.com/LearnBoost/stylus/blob/master/lib/functions/index.styl#L130) , [2 ) 中汲取了主要思想，并从](https://github.com/LearnBoost/stylus/blob/master/lib/functions/index.js#L815)[Stack Overflow 答案](https://stackoverflow.com/a/9493060/330471)中获取了一些代码部分，并生成了一个库[darken_color.js](https://github.com/shybovycha/darken_color.js)。

以下是一些使用示例：

```
darken('lightgreen', '0.1'); // -> #63e763 
darken('lightgreen', '10'); // -> #63e763
darken('#90EE90', '10'); // -> #63e763
darken('#9e9', '10%'); // ->  #98ed98 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T08:16:52.550

```
return '#' +
   ((0|(1<<8) + r + (256 - r) * percent / 100).toString(16)).substr(1) +
   ((0|(1<<8) + g + (256 - g) * percent / 100).toString(16)).substr(1) +
   ((0|(1<<8) + b + (256 - b) * percent / 100).toString(16)).substr(1); 
```

在这里，您将和的一些百分比添加到当前值`r`，这会使颜色变浅。如果您对百分比使用负值，它将从当前值减小并使颜色更深。`g``b`

# seo - 图像分辨率 - 对 Google 上的 SEO 很重要？

> ID：13375040
> 
> 赞同：2
> 
> 时间：2012-11-14T08:09:43.280
> 
> 标签：seo, google-image-search

我通常将网络图像分辨率设置为 72 像素/英寸。谷歌是否将图像分辨率视为排名信号？我应该以更高的分辨率保存我的图像还是没关系？更高分辨率的图像意味着更大的 k 尺寸，但我不确定什么是可以接受的。

我发现有用的其他链接：

[http://youtu.be/h2Zaj0CAUoU](http://youtu.be/h2Zaj0CAUoU) （最有帮助的）

[http://youtu.be/Sj5Ny21q3oY](http://youtu.be/Sj5Ny21q3oY)

[http://youtu.be/3NbuDpB_BTc](http://youtu.be/3NbuDpB_BTc)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:31:26.067

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:12:20.303

72 dpi 是标准的网络分辨率。就影响这些图像所在的任何网站的 SEO 而言，图像大小会影响页面加载的速度，而这确实会影响您的 SEO。

# android - 支持在 Android 中编码/解码视频文件

> ID：13375042
> 
> 赞同：0
> 
> 时间：2012-11-14T08:09:56.103
> 
> 标签：android, audio, video, video-encoding, decoding

我想知道 Android 2.2、2.3 和 3,4 支持的音频/视频格式列表。我也想知道哪些安卓版本支持视频编解码。我浏览了[这个链接](http://developer.android.com/guide/appendix/media-formats.html)，但我对编码和解码并不清楚。

任何人的回答都是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:31:36.457

**空**表示“不支持”
**圆点**表示
**括号中**的“支持” ：（支持从“android 版本”开始）

在不指定“起始版本”的情况下支持编码器/装饰，仅表示：从 Android 的第一个发布版本开始支持

# ant - Jenkins/Hudson JBoss 插件关闭不起作用

> ID：13375057
> 
> 赞同：0
> 
> 时间：2012-11-14T08:11:18.997
> 
> 标签：ant, jboss, jenkins, hudson, shutdown

我有一个 JBoss 实例正在运行，并且是通过 JBoss 插件中的 Jenkins 启动命令启动的。在我的测试运行后，我想关闭 JBoss 服务器。然而在这个阶段詹金斯告诉我

```
SHUTDOWN: Checking if server is running (max 20 seconds)...
SHUTDOWN: JBoss AS is not working. 
```

我在运行后验证了 JBoss 确实仍在运行。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:43:13.527

问题解决了，我的 JNDI 端口 Jenkins JBoss 设置错误。

# php - 在 MySQL Linux 服务器上安装 PDO 驱动程序

> ID：13375061
> 
> 赞同：110
> 
> 时间：2012-11-14T08:11:22.083
> 
> 标签：php, mysql, pdo, phpmyadmin, installation

不久前，有人建议我更改我的代码以使用 PDO，以便参数化我的查询并将 HTML 安全地保存在数据库中。

好吧，这里是主要问题：

1.  我查看了[http://php.net/manual/en/ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)，我真的不知道应该把那个`$ ./configure --with-pdo-mysql`字符串放在哪里......

2.  我正在构建的站点实际上只需要一页的 PDO。虽然我可能会考虑重写它，但这需要一段时间，而且我需要页面尽快运行，所以我不能完全关闭 MySQL。如果我安装了 PDO，我还能使用`mysql_*`处理程序吗？

有问题的服务器正在运行 PHP 版本 5.4.6-1ubuntu1 和 Apache/2.2.22 (Ubuntu)。如果重要的话，我也在运行一个 phpMyAdmin 数据库。

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-11-14T08:14:48.457

在 Ubuntu 上，您应该能够使用 apt 安装必要的 PDO 部件`sudo apt-get install php5-mysql`

同时使用 PDO 和 mysql_ 没有限制。但是，您需要创建两个到数据库的连接，一个使用 mysql_，一个使用 PDO。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-14T08:19:49.730

这是一个很好的问题，但我认为您只是误解了您阅读的内容。

# 安装 PDO

**只有**当`./config --with-pdo-mysql`您编译自己的 PHP 代码时，您才需要使用它。如果你用包管理器安装它，你只需要使用 Jany Hartikainen 给出的命令行：**`sudo apt-get install php5-mysql``sudo apt-get install pdo-mysql`**

 **# 与mysql_的兼容性

除了 mysql_ 确实不受欢迎之外，它们都是独立的。如果您使用 PDO mysql_ 不涉及，如果您使用 mysql_ 则不需要 PDO。

如果您关闭 PDO 而不更改代码中的任何行，则不会有问题。但是既然你开始用PDO连接和写查询，你就不得不保留它，放弃mysql_。

几年前，MySQL 团队发布了一个[迁移到 MySQLi](http://lists.mysql.com/announce/400)的脚本。我不知道它是否可以定制，但它是官方的。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-12-14T09:46:51.590

基本上 Jani Hartikainen 的答案是正确的！我赞成他的回答。我的系统（基于 Ubuntu 15.04）缺少的是在我的 php.ini 中启用 PDO 扩展

```
extension=pdo.so
extension=pdo_mysql.so 
```

重新启动网络服务器（例如，使用“sudo service apache2 restart”）-> 每次罚款 :-)

要查找当前活动的 php.ini 文件所在的位置，您可以使用 phpinfo() 或此处的其他提示：[https ://www.ostraining.com/blog/coding/phpini-file/](https://www.ostraining.com/blog/coding/phpini-file/)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-12-10T10:29:50.233

首先通过运行命令安装必要的 PDO 部件

```
sudo apt-get install php*-mysql 
```

其中 * 是 php 的版本名称，例如**5.6、7.0、7.1、7.2**

安装后需要提这两条语句

```
extension=pdo.so
extension=pdo_mysql.so 
```

在您的 .ini 文件中*（如果已经存在，请取消注释）*并通过命令重新启动服务器

```
sudo service apache2 restart 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-08-27T13:22:49.250

1.  PDO 代表 PHP 数据对象。
2.  PDO_MYSQL 是实现数据对象（数据库）和用户输入（用户接口下的一层称为“代码隐藏”）之间的接口的驱动程序，用于访问您的数据对象，MySQL 数据库。

使用它的目的是在用户界面和数据库之间实现额外的安全层。通过使用这一层，数据可以在插入数据结构之前进行规范化。（大写字母是大写字母，没有前导或尾随空格，所有日期格式正确。）

但是有一些你可能不知道的细微差别。

首先，到目前为止，您可能已经用类似于 URL 的方式编写了所有查询，并使用 URL 本身传递参数。使用 PDO，所有这些都在用户界面级别下完成。用户界面将球交给 PDO，PDO 将球传到场上并将其放入数据库中进行 7 点 TOUCHDOWN。他得到 7 分，因为他把球拿到了那里，并且比通过 URL 传递信息安全得多.

您还可以通过使用数据层来强化您的站点以进行[SQL 注入。](http://en.wikipedia.org/wiki/SQL_injection)通过使用这个作为唯一与数据库本身对话的“玩家”的中间层，我相信您可以看到这会更加安全。接口到数据层到数据库，数据层到数据库到数据层到接口。

和：

通过在编写代码时实施最佳实践，您将对结果感到更加满意。

其他来源：

回复：url php dot net/manual/en/ref dot pdo-mysql dot php 中的 MySQL 函数

回复：三层架构 - 为您的应用程序添加安全性 [https://blog.42.nl/articles/introducing-a-security-layer-in-your-application-architecture/](https://blog.42.nl/articles/introducing-a-security-layer-in-your-application-architecture/)

回复：使用 UML 的面向对象设计如果你真的想了解更多，这是市场上最好的书，Grady Booch 是 UML 之父 [http://dl.acm.org/citation.cfm?id=291167&CFID =241218549&CFTOKEN=82813028](http://dl.acm.org/citation.cfm?id=291167&CFID=241218549&CFTOKEN=82813028)

或者用bitmonkey检查。那里有一个小组，我相信你可以从中学到很多东西。

>

## 如果我们知道术语的真正含义，我们就不需要学习任何东西。

>

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-20T15:33:57.517

如果你需要一个带有 MySQL 的 CakePHP Docker 容器，我已经为此创建了一个 Docker 镜像！无需担心设置。它只是工作！

*   GitHub：[https ://github.com/marcellodesales/php-apache-mysql-4-cakephp-docker](https://github.com/marcellodesales/php-apache-mysql-4-cakephp-docker)
*   DockerHub：[https ://hub.docker.com/r/marcellodesales/php-apache-cakephp-mysql/](https://hub.docker.com/r/marcellodesales/php-apache-cakephp-mysql/)

以下是我在基于 Ubuntu 的映像中的安装方式：

[https://github.com/marcellodesales/php-apache-mysql-4-cakephp-docker/blob/master/Dockerfile#L8](https://github.com/marcellodesales/php-apache-mysql-4-cakephp-docker/blob/master/Dockerfile#L8)

```
RUN docker-php-ext-install mysql mysqli pdo pdo_mysql 
```

构建和运行您的应用程序只是一个 2 步过程（考虑到您在应用程序的当前目录中）：

```
$ docker build -t myCakePhpApp .
$ docker run -ti myCakePhpApp 
```**

# javascript - JW Player 电影数据库服务不适用于 safari（所有其他浏览器都可以）

> ID：13375066
> 
> 赞同：1
> 
> 时间：2012-11-14T08:11:27.883
> 
> 标签：javascript, vb.net, web-services, safari, jwplayer

我有一个脚本，可以播放服务提供给它的电影。

```
<div id="player1">Loading the player ...</div> 
<script type="text/javascript">
    jwplayer('player1').setup({
        file: "downloadvideo.aspx",
        width: "296",
        height: "240",
        type: "mp4",
    });
</script> 
```

这是提供电影文件的表单加载事件：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles     Me.Load

    Dim filePath As String = "C:\websites\Website2\wdo.mp4"
    Dim Buffer As Byte() = File.ReadAllBytes(filePath)

    Context.Response.Clear()
    Context.Response.Cache.SetCacheability(HttpCacheability.Public)
    Context.Response.Cache.SetLastModified(DateTime.Now)
    Context.Response.AppendHeader("Content-Type", "video/mp4")
    Context.Response.AddHeader("Content-Disposition", "attachment;filename=wdo.mp4")
    Context.Response.AppendHeader("Content-Length", Buffer.Length.ToString())

    Context.Response.BinaryWrite(Buffer)

End Sub 
```

这适用于 Internet Explorer、Google Chrome、Firefox。但不是 Safari。

在 Safari 中，它只有一个永远旋转的进度圈。

如果你直接给脚本一个电影文件，它在 safari 中可以正常播放，但我需要用这种方法给脚本电影，因为我的电影将存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:16:18.010

试试这个它的工作

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 处理 Me.Load

```
Dim filePath As String = "C:\websites\Website2\wdo.mp4"
Dim Buffer As Byte() = File.ReadAllBytes(filePath)

Context.Response.Clear()
Context.Response.AddHeader("Content-Disposition", "attachment;filename=wdo.mp4")
Response.ContentType = "video/mp4"
Context.Response.BinaryWrite(Buffer) 
```

结束子

# objective-c - NSDateFormatter 转换时间

> ID：13375071
> 
> 赞同：0
> 
> 时间：2012-11-14T08:11:55.970
> 
> 标签：objective-c, ios5, nsdate, nsdateformatter

我有(2012-11-14 08:08:16 +0000) 的**NSDate**并且想要显示小时、分钟和秒。

所以我使用**了 NSDateFormatter**

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"hh:mm:ss aaa"]; 
```

我的电话时间是（10:08:16），但我想显示的不是电话时间，而是我拥有的 NSDate，但是之后

```
[dateFormatter stringFromDate:myDate] 
```

它给了我**10:08:16**但我想要**08:08:16** 我怎么能显示时间？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:44:06.390

如果要显示原始时间 (UTC)，请手动设置时区：

`[dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];`

那应该这样做。

# javascript - 通过javascript切换html内容的最佳方法

> ID：13375072
> 
> 赞同：2
> 
> 时间：2012-11-14T08:12:13.610
> 
> 标签：javascript, jquery, html, css

你能告诉我如何通过javascript切换html内容吗？

例如：

```
if($sid == 0)
 {one html code}
else
 {another html code 2} 
```

LESS、jQuery、CSS3 等——哪种方式更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:21:10.377

您应该使用 jQuery`load`并将`HTML`内容传回，例如：

```
if($sid == 0) {
  $('#result').load('ajax/test.html', function() {
     alert('Load was performed. (sid equals 0');
  });
} else {
  $('#result').load('ajax/othercontent.html', function() {
     alert('Load was performed. (sid is not equal to 0');
  });
} 
```

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:15:19.103

jQuery 旨在以非浏览器特定的方式执行您所要求的（并且更明显）。

```
<html>
<head>
<style>
  .hidden { display: none; }
</style>

<script type="text/javascript">
  $(function() {
    if(somecondition) $('#div1').show();
     else $('#div2').show();
  }); 
</script>
</head>

<body>
  <div id="div1" class="hidden">...</div>
  <div id="div2" class="hidden">...</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:15:59.890

我不确定是什么

```
if($sid == 0) 
```

应该是，但如果你想改变你可以使用的 html 内容

```
$("#id").html("<span>your html</span>"); 
```

# javascript - 在父级之外切换 Javascript

> ID：13375075
> 
> 赞同：1
> 
> 时间：2012-11-14T08:12:25.070
> 
> 标签：javascript, jquery, html

尝试放置事件以`div`使用父容器外部的元素切换 a 时遇到问题。

我试图使用`span`标签从父元素外部定位相同的行为。

任何帮助将不胜感激。

**HTML：**

```
<div class='toggle_parent'>
    <div class='toggleHolder'>
      <span class='toggler'>Open</span> 
      <span class='toggler' style='display:none;'>Close</span>
    </div>

    <div class='toggled_content' style='display:none;width:100%;height:400px;'>
        <h2>Hello This Is My Content Right Here</h2>
        <span class='toggler btn btn-large'>Close</span>      
    </div>
</div>

 <!-- I need this element to trigger from outside -->
 <span class="toggler btn btn-large btn-info">Gain Early Access</span> 
```

**Javascript：**

```
$('.toggler').live('click',function(){
/*   $(this).parent().children().toggle();  //swaps the display:none between the two spans */
$(this).parent().parent().find('.toggled_content').slideToggle();  //swap the display of the main content with slide action

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:17:52.423

只需使用全局父 div。

```
<div id="container">
    <div class='toggle_parent'>
        <div class='toggleHolder'>
          <span class='toggler'>Open</span> 
          <span class='toggler' style='display:none;'>Close</span>
        </div>

        <div class='toggled_content' style='display:none;width:100%;height:400px;'>
            <h2>Hello This Is My Content Right Here</h2>
            <span class='toggler btn btn-large'>Close</span>      
        </div>
    </div>

    <!-- I need this element to trigger from outside -->
    <span class="toggler btn btn-large btn-info">Gain Early Access</span>
</div> 
```

你可以这样做：

```
var container = $('#container');
container.on('click', '.toggler', function() {
    container.find('.toggleHolder .toggler').toggle();
    container.find('.toggle_content').slideToggle();
}); 
```

顺便说一句，如果您使用 jQuery 1.7 或更高版本，`live`则不推荐使用。见[http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:28:42.020

修改了您的示例以适应目的。

```
<div id="container">
    <div>
        <div>
          <span class='open'>Open</span> 
          <span class='close' style='display:none;'>Close</span>
        </div>

        <div class='content' style='display:none;width:100%;height:400px;'>
            <h2>Hello This Is My Content Right Here</h2>
            <span class='close'>Close</span>      
        </div>
    </div>
    <!-- I need this element to trigger from outside -->
    <span class="toggle">Gain Early Access</span>
</div>

$(".toggle").click( function( ) {
    $(".content").slideToggle();
});
$(".open").click( function( ) {
    $(".content").slideDown();
});
$(".close").click( function( ) {
    $(".content").slideUp();
}); 
```

# c++ - imread(openCV),QString unicodes

> ID：13375076
> 
> 赞同：3
> 
> 时间：2012-11-14T08:12:27.917
> 
> 标签：c++, qt, opencv

```
cv::Mat img = cv::imread("../赤月/lena.jpg");
if(img.empty()) std::cout<<"empty image"<<std::endl; 
```

或者

```
QString const image_name = "../赤月/lena.jpg";
cv::Mat img = cv::imread(image_name_.toAscii().constData());
if(img.empty()) std::cout<<"empty image"<<std::endl; 
```

imread的api接受std::string，如果需要unicode支持怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:02:38.140

Niko 显示链接后，我知道如何通过 Qt 解决问题

```
QTextCodec *codec = QTextCodec::codecForName("UTF-8");
QTextCodec::setCodecForLocale(codec);
QTextCodec::setCodecForCStrings(codec);
QTextCodec::setCodecForTr(codec);

QString const image_name = "../赤月/lena.jpg";
cv::Mat img = cv::imread(image_name_.toAscii().constData()); 
```

现在代码完美运行，感谢大家。

# redis - 在 Redis 中检查 [当达到最大内存时] 的正确条件是什么

> ID：13375077
> 
> 赞同：0
> 
> 时间：2012-11-14T08:12:37.520
> 
> 标签：redis

我从 Redis 的配置文件中引用了以下内容：

```
...
maxmemory

MAXMEMORY POLICY: how Redis will select what to remove when maxmemory
is reached? You can select among five behavior:
... 
```

我的问题是：检查何时`maxmemory`达到的正确条件是什么？

首先，我认为答案是命令显示的`[used_memory >= maxmemory]`位置。`used_memory``INFO`

但是，现在我对答案可能感到困惑`[used_memory_rss >= maxmemory]`。

正确答案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:08:11.530

金。我觉得你是韩国人。

所以看看这篇博文。

[http://charsyam.wordpress.com/2012/11/14/%EC%9E%85-%EA%B0%9C%EB%B0%9C-redis%EC%97%90%EC%84%9C% EC%9D%98-max-memory-%EC%A0%95%EC%B1%85-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/](http://charsyam.wordpress.com/2012/11/14/%EC%9E%85-%EA%B0%9C%EB%B0%9C-redis%EC%97%90%EC%84%9C%EC%9D%98-max-memory-%EC%A0%95%EC%B1%85-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0/)

这是我的，而且是用韩文写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:23:48.583

maxmemory 参数与从 used_memory 而不是 used_memory_rss 计算的值进行比较。

现在，确切的行为并不是微不足道的，因为 Redis 尝试估计考虑到主/从复制和 AOF 缓冲的内存量。该值是 used_memory（由分配器包装器计算得出）减去从属输出缓冲区的大小，再减去 AOF 缓冲区的大小。然后将该值与 maxmemory 进行比较。

# version-control - Mercurial [HG] - 获取 .hgignore 排除文件的列表

> ID：13375078
> 
> 赞同：0
> 
> 时间：2012-11-14T08:12:45.560
> 
> 标签：version-control, mercurial, tortoisehg, hgignore

我在我的项目中大量使用[这个](https://stackoverflow.com/a/4233274/11545) `.hgignore`文件，到目前为止它已被证明是值得的。

然而，每隔一段时间我都会做一次现实检查，以确保它没有吃掉有价值的东西。

我的问题是：我怎样才能找到排除文件的确切列表？（实际匹配`.hgignore`模式的文件）

欢迎使用 TortoiseHg 或命令行回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:20:48.890

命令`hg status --ignored`（或`hg status -i`）列出已被忽略的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:17:06.640

当我完成这个问题时（又一次），答案击中了我。

其实很简单：

*   首先确保没有待处理的提交。 ![在此处输入图像描述](../Images/2d2883562a665b394c23475cc03c1d42.png)

*   （重新）移动/重命名`.hgignore`文件

*   在 TortoiseHg 的提交窗口中点击“刷新”。 ![在此处输入图像描述](../Images/9ff089053eade7a425968e47f48ca695.png)

您现在将获得被忽略文件的确切列表（+ 对`.hgignore`文件本身的更改）。

橡胶闪避处于最佳状态。（嗯，所以应该为此添加一个徽章：）

# ios - Ad hoc 应用程序在启动时挂起，“有活动的断言，但正在调试中”

> ID：13375084
> 
> 赞同：1
> 
> 时间：2012-11-14T08:13:38.267
> 
> 标签：ios, xcode, cocoa-touch

当我在我的设备或模拟器上以调试模式运行该应用程序时，它运行良好。但是当我为临时分发构建它时，应用程序启动但停留在初始启动屏幕上。当我拉起控制台时，它说应用程序“有活动的断言，但正在调试中”。有没有人遇到过这种情况？谷歌搜索这个短语会带来零结果......

我之前已经成功地为 ad-hoc 构建了它，所以我不确定这里发生了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:44:13.687

我仍然不确定是什么原因造成的，但退出并重新启动 Xcode 似乎可以解决问题。现在已经发生了不止一次，重新启动总是可以解决它。

# jquery - Firefox 内部错误：递归过多

> ID：13375085
> 
> 赞同：4
> 
> 时间：2012-11-14T08:13:48.757
> 
> 标签：jquery, ajax

我`Internal Error: too much recursion`从 Firefox 收到错误消息。我正在尝试使用 jquery 进行 ajax 调用。使用 Internet Explorer 可以正常工作。

我没有递归调用任何函数。

请给我一些建议。谢谢

```
 $(function(){
      $('#delivery').accordion({
           header: '.accTrigger',
           autoHeight: false,
           animated: 'easeslide',
           change: function(event, ui) {
                alert("here");
                event.preventDefault();
                $.ajax({
                     url: URL,
                     type: 'GET',
                     dataType: 'html',
                     timeout: 18000,
                     success: function(data, textStatus, xhr) {
                          alert("sus");
                     },
                     error: function(xhr, textStatus, errorThrown) {
                          alert("err" + errorThrown);
                     }
                });     

                $("input",ui.newHeader).prop("checked","checked");
                $("input",ui.newHeader).trigger('click');

                $(".accSection").each(function() {
                     $(this).removeClass("active");
                });

                ui.newHeader.parent().addClass("active");
                fitContentBackground();
           }
      });

      /**
      * Loop through all the payment types and enable the respective accordin
      */
      $.each($('.accSection'), function(index, value) {
           if ($('input[type="radio"]', value).is(':checked') == true) {
                $('#delivery').accordion('activate',index);
                $(this).addClass("active");
           } 
           else {
                $(this).removeClass("active");
           }
      });
 }); 
```

谢谢大家的回复

我很抱歉添加了整个代码，它引发了很多混乱..

即使是这个简单的片段也会产生同样的错误（InternalError: too much recursion）

```
$(document).ready(function() {
$("#buttontest123").click(function(evt){
  alert("herepavan");
  evt.preventDefault();

  setPayment();

});

function setPayment()
{   
      alert("here1");
    $.ajax({
        url: 'URL',
        type: 'GET',
        dataType: 'html',

        success: function(data, textStatus, xhr) {

           alert("sus");
        },
        error: function(xhr, textStatus, errorThrown) {
           alert("err"+errorThrown);
        }
    });

}

});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T23:38:59.197

我认为为 newHeader 元素中的元素触发 click 事件会导致 change 事件（这将是 recusive）

```
 $("input",ui.newHeader).trigger('click'); 
```

尝试用任何其他逻辑替换上面的行（不要触发'click'，只需调用你想要的代码）

# ruby-on-rails - Koala Facebook api 调用有时会返回 500 错误

> ID：13375086
> 
> 赞同：0
> 
> 时间：2012-11-14T08:13:52.400
> 
> 标签：ruby-on-rails, facebook, koala

基本上，我试图从 Facebook 获取用户的相册并用封面照片显示它们。

在我的用户控制器中，我有：

```
def facebook(token)
  @facebook ||= Koala::Facebook::API.new(token)
end

def get_photo_albums
  albums = self.facebook.get_connection(uid, "albums")
  albums.map { |h| { id: h["id"], name: h["name"], count: h["count"], cover_photo: self.facebook.get_picture(h["cover_photo"]) } }
end 
```

这段代码大部分时间都可以正常工作，但偶尔会出现以下错误：

```
Koala::Facebook::APIError (HTTP 500: Response body: {"error":{"message":"No node specified","type":"Exception"}}):
app/models/user.rb:79:in `block in albums'
app/models/user.rb:79:in `map'
app/models/user.rb:79:in `albums' 
```

我的应用程序在画布上，每次用户访问应用程序时，我都会通过解析 signed_request 来获得新的访问令牌，这应该持续 2 小时。

我无法弄清楚为什么某些用户会出现此错误，因为它在大多数情况下都可以正常工作？任何改进此代码的想法或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T11:49:20.390

我遇到了同样的问题，如果响应中没有照片/封面照片，似乎会发生这种情况。

```
, cover_photo: fb_cover_photo(h) } } 
```

我使用了这个救援声明：

```
def fb_cover_photo(photo)
    begin
      self.facebook.get_picture(photo["cover_photo"])
    rescue Exception => e
      nil
    end     
end 
```

# php - 付款过程失败后，通过电子邮件中的单个链接继续为购物车付款

> ID：13375087
> 
> 赞同：-1
> 
> 时间：2012-11-14T08:13:58.070
> 
> 标签：php, paypal

考虑以下场景：在电子商务网站上，由于某种原因，一些用户在填写了所有必要的信息后未能完成订单（“仅”缺少付款）。

为了不丢失他们的习惯，该网站希望在 24 小时内向每个用户发送一封提醒电子邮件，其中包含他们的订单摘要和一个 PayPal 链接，以便他们完成交易。

*   如何构建此链接？
*   会有什么问题？
*   该链接将如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:22:25.303

普通的电子邮件不是最安全的地方，所以我建议不要只放入其中： - PayPal 链接 - 完整的订单详细信息

但是您*可以*做的是存储有关会话的所有信息并通过“简单链接”将其检索到您的安全应用程序，然后可以生成一个新的 Paypal 交易页面：

```
<a href="https://yourapp.com/retrieve-transaction?id=ENCRYPTED_ID">...</a> 
```

单击链接后，您需要**要求用户登录。**即使交易本身没有风险（需要独立支付），链接本身也会暴露交易*内容*；考虑药品或其他敏感或机密的购买。出于同样的原因，您不想将这些详细信息放入邮件中，您也不希望*仅*通过单击即可访问它们。

然后，您将通过登录创建一个有效会话，这将提供对帐户信息、订单历史记录等的访问权限。通过添加来自 ENCRYPTED_ID 的信息，您可以将来自“冻结”购买会话的所有信息注入会话。

现在，您拥有重新创建快速订购页面所需的一切，并带有 PayPal 链接。

最后，您应该在预设时间后和交易完成后提供链接失效，以防用户（或其他人）再次点击同一链接。

# 可能的工作流程

*   您在第一个 Paypal 链接提案*之前*准备“冻结会话”
*   如果付款成功，您将删除冻结的会话

*   每隔一小时（比如说），您检查是否有超过 48 小时的未完成的冻结会话。这些已*过期*，您将其删除。

*   如果有其他会话早于 24 小时但新于 48 小时，则没有“已发送邮件！” 标志，您发送带有该会话链接的电子邮件，并设置标志。

*   在收到对该链接的点击时，您请求登录（并提醒如果该链接超过 24 小时，它将无法正常工作）。

*   登录成功后，检查会话是否存在。
*   如果没有，“抱歉，过期了 - 你想继续购物吗？”
*   如果存在，则重新生成订单页面并返回列表的开头。没错，这样，如果您单击链接，*不付款*，然后离开，另一封电子邮件将发送给您——但您需要故意这样做。如果滥用的可能性（例如惹恼*我知道密码的*人）困扰您，请在冻结会话中添加一个计数器（“这是您第三次重新打开此订单。为避免潜在的滥用，我们不会发送你还有什么提醒”）。当然，除非你出售治疗粗心或短暂失忆症。

# iphone - 如何正确转换 UIWebView 并将内容更改为 UIImages

> ID：13375093
> 
> 赞同：2
> 
> 时间：2012-11-14T08:14:28.037
> 
> 标签：iphone, uiwebview, uiimage, nsthread

我要做的是每次更改/加载 webview 的内容时将 UIWebView 转换为 UIImage 。

这是代码：

```
- (void)viewDidLoad {
    [self.tmpWebView loadHTMLString:[NSString stringWithFormat:@"Some %i HTML", 0,baseURL:nil];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {

    if (webView==tmpWebView && pngCount<[self.arrayOfHtmlContent count]) {
        UIGraphicsBeginImageContext(webView.frame.size);
        {
            [webView.layer renderInContext: UIGraphicsGetCurrentContext()];
            UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
            UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
            imageView.frame = CGRectMake(10, 10+((pngCount==1)?0:(pngCount-1)*100), 400, 200);
            [imageView setBackgroundColor:[UIColor redColor]];
            [_someScrollView addSubview:imageView];
            //NSString  *pngPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat: @"Documents/Test-%i.png",pngCount]];
            //[UIImagePNGRepresentation(image) writeToFile:pngPath atomically:YES];
        }
        UIGraphicsEndImageContext();

        [self performSelector:@selector(loadWebViewWith:) withObject:[[NSArray alloc] initWithObjects:webView, [[NSNumber alloc] initWithInt:pngCount], nil ] afterDelay:0.3];//DELAY INCREASING DOES NOT CHANGE ANYTHING

        pngCount++;
        //NSLog(@"Finish%i: %@",(pngCount-1),[webView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML"]);
    }
}

- (void) loadWebViewWith:(NSArray*)array {
    [(UIWebView*)[array objectAtIndex:0] loadHTMLString:[NSString stringWithFormat:@"Another %i HTML", [[array objectAtIndex:1] intValue]] baseURL:nil];
} 
```

我不知道为什么，但一些创建的 UIImages 是重复的。可能是因为 Thread 没有完成向 UIImage 的转换，但是延迟开始加载 webview 的新内容（即使我将其设置为 5 秒）并没有改变任何东西。

谁能解释我为什么会得到重复的 UIImages？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:58:48.083

我让它工作... WebView 必须添加到 ViewController.view。显然原因是主线程的优先级......

所以，这里是代码：

```
- (void)viewDidLoad {

    pngCount = 0;

    [self.tmpWebView loadHTMLString:[NSString stringWithFormat:@"Some %i HTML", pngCount] baseURL:nil];

    [self.view insertSubview:self.tmpWebView atIndex:0];/////////
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    if (webView==self.tmpWebView && pngCount<[self.arrayOfHtmlContent count]) {

        [self performSelector:@selector(webViewToImage) withObject:nil afterDelay:0.05];

        [self performSelector:@selector(loadWebViewContent) withObject:nil afterDelay:0.1];
    }
}

- (void) webViewToImage {

    UIGraphicsBeginImageContext(self.tmpWebView.frame.size);
    {
        [self.tmpWebView.layer renderInContext: UIGraphicsGetCurrentContext()];
        UIImage* image = UIGraphicsGetImageFromCurrentImageContext();

        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        imageView.frame = CGRectMake(10, 110+((pngCount==1)?0:(pngCount-1)*100), 200, 90);
        [imageView setBackgroundColor:[UIColor clearColor]];

        UIControl *mask = [[UIControl alloc] initWithFrame:imageView.frame];

        imageView.frame = CGRectMake(0, 0, imageView.frame.size.width, imageView.frame.size.height);
        [mask addSubview:imageView];

        [mask addTarget:self action:@selector(showOnMainWebView:) forControlEvents:UIControlEventTouchUpInside];
        mask.tag = pngCount;

        [_someScrollView addSubview:mask];
    }
    UIGraphicsEndImageContext();

    pngCount++;
}

- (void) loadWebViewContent {

    if (pngCount < [self.arrayOfHtmlContent count]) {
        [self.tmpWebView loadHTMLString:[NSString stringWithFormat:@"Another %i HTML", pngCount] baseURL:nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:57:24.587

`webViewDidFinishLoad:``WebView`在完成加载帧后调用。因此，您获得重复的那些页面可能包含多个框架。

# security - z/OS 中的程序属性表是什么？

> ID：13375100
> 
> 赞同：0
> 
> 时间：2012-11-14T08:14:53.893
> 
> 标签：security, operating-system, zos

我知道PPT有应用程序访问受保护资源的条目。它维护什么样的条目？是这样的，哪个程序可以访问，哪个程序不能访问。应用程序也需要绕过密码。绕过密码是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:53:58.803

PPT 首字母缩略词超载。

的确，有一个称为 PPT（处理程序表）的 CICS 结构，但我相信 Pravin 是在询问 MVS 程序属性表。这是[z/OS 文档](http://publib.boulder.ibm.com/infocenter/zos/v1r13/topic/com.ibm.zos.r13.ieae200/iea2e2c3538.htm)必须说的：

> [PPT] 允许安装指定需要特殊属性的程序列表。
> 
> 有时，您的应用程序需要具备特殊属性才能尽可能高效和安全地运行。例如，需要访问受获取保护的系统数据的应用程序将需要系统密钥 (0-7)，而不是通常的问题程序密钥 8。或者，例如，不能运行 V=R，但必须出于实时考虑而不会被换出，需要向系统标识为不可换出。这些程序的条目在程序属性表 (PPT) 中创建。

PPT 设置之一（在 SCHEDxx parmlib 成员中指定）允许指定的程序绕过安全保护。这意味着标记为 NOPASS 的程序可以访问它想要的任何数据集。

您不想将该权限授予用户程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:18:06.090

PPT 与 CICS 应用程序有关。在您了解 CICS 是什么之前，任何关于 PPT 是什么的解释都不会对您有多大用处。我建议您看一下这本 IBM 红皮书：[CICS Transaction Server](http://www.redbooks.ibm.com/redbooks/pdfs/sg247952.pdf) ，以获得一般的 CICS 概述。这份文件没有太多解释什么是PPT，但它是有价值的背景。

回答您的直接问题，PPT（Program Process Table）的主要功能是注册所有CICS应用程序和BMS映射集。PPT 跟踪在 CICS 地址空间中加载了哪些应用程序。CICS 使用此信息来确定程序的新副本是需要加载还是已经从辅助存储（例如磁盘）加载。PPT 包含诸如当前程序在内存中的位置、其在磁盘上的库地址和正在使用的语言（例如 COBOL）等信息。

CICS维护了很多资源表，PPT只是其中之一。CICS 资源表的其他示例包括：

*   程序控制表 (PCT)
*   文件控制表 (FCT)
*   终端控制表 (TCT)
*   DB2 资源控制表 (RCT)
*   目的地控制表 (DCT)

# java - 线程转储分析器

> ID：13375105
> 
> 赞同：7
> 
> 时间：2012-11-14T08:15:04.297
> 
> 标签：java, multithreading, analyzer, thread-dump

你知道一些好的线程转储分析工具吗？完美的是：

*   自由
*   可以读取一些线程转储并进行比较
*   指出哪些线程花费的时间最长，线程被锁定的类是什么等。
*   显示线程、锁、死锁和等待获取单个锁的多个线程

编辑：

*   离线分析 - 使用一个或多个线程转储加载文件并对其进行分析。

**编辑：** 我的选择是：武士。它具有我需要的所有功能：加载日志文件，并比较几个线程转储。分析并指出：

*   等待线程
*   阻塞的线程
*   阻塞线程
*   僵局

我将问题保留为已回答，因为 TDA 是给出的最佳答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T08:18:57.470

你可以使用 TDA - Thread Dump Analyser，一个 Visual VM 的插件。

Visual VM 也是免费的。我认为这是你最好的选择。

> 如果您在 Linux 上，您可以使用 kill -3 获取线程转储并使用 Thread Dump Analyzer 查找死锁。
> 
> VisualVM 现在作为 JDK 的一部分提供，可用于监控内存使用情况、线程，还包括一个分析器。
> 
> jmap 可用于从 Java 进程获取堆直方图和堆转储。然后，您可以使用 Eclipse Memory Analyzer 之类的工具对其进行调查。
> 
> 正如另一个答案提到的那样，您可以查看 JMX 和 JConsole。对于我们应用程序中的每个服务，我们都有一个 MBean，因此我们可以查看诸如队列大小之类的键统计信息，以检查是否有任何异常。

来自ServerFault 上[Sun JVM 故障排除的工具和技巧。](https://serverfault.com/questions/5944/tools-and-tips-for-sun-jvm-troubleshooting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T10:25:44.400

如果您使用 IBM JRE，您应该使用**[IBM Thread and Monitor Dump Analyzer for Java](https://www.ibm.com/developerworks/community/alphaworks/tech/jca)**，它提供了您真正需要的东西（离线使用、比较等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T18:02:56.043

你可以试试我的[Dump Analyzer](http://java-apps.org/content/show.php/Dump+Analyzer?content=164188)。我有同样的需求并开发了自己的转储分析器。它具有您列表中的一些功能。

# iphone - UIImagePickerController 卡在关闭状态

> ID：13375106
> 
> 赞同：1
> 
> 时间：2012-11-14T08:15:07.473
> 
> 标签：iphone, xcode

这是我的代码：

```
-(IBAction)addUserChooseImage:(id)sender{    
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.allowsEditing = YES;
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:picker animated:YES];
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:     (UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    uploadedImage.image = image;
    [picker dismissModalViewControllerAnimated:YES];
}
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

试图关闭选择器时它会粘住。我相信原因是图像选择器是由一个按钮激活的，该按钮位于视图控制器本身的加载 nib 视图上。

谁能告诉我什么是解雇它的正确方法？我想代表应该还是指自我，对吧？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:18:33.773

您不能使用该`[picker dismissModalViewControllerAnimated:YES];`方法关闭选择器。

替换`[picker dismissModalViewControllerAnimated:YES];`为`[self dismissModalViewControllerAnimated:YES];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:30:15.147

在这里你错过了一些东西见下文

你应该使用。 `[self dismissModalViewControllerAnimated:YES];`

而不是下面。

```
 [picker dismissModalViewControllerAnimated:YES]; 
```

# facebook - Facebook 使用 http 协议打开我的应用程序，尽管在应用程序设置中配置了 https

> ID：13375107
> 
> 赞同：1
> 
> 时间：2012-11-14T08:15:11.940
> 
> 标签：facebook, http, https

我创建了一个在必须通过 https 访问的服务器上运行的 facebook 应用程序。否则它将重定向到 https 并且 signed_request 会丢失。

在应用程序设置中，我可以编辑的所有 URL 都使用 https 协议。没有以 http:// 开头的 URL（没有 s）——除了画布页面 url，我无法更改该值（它是[http://facebook.com/myappname](http://facebook.com/myappname)）。

但是，当我打开一个以不安全模式 (http) 安装我的应用程序的 facebook 页面时，facebook 接缝以从配置的 facebook 页面 URL 中删除该“s”并调用`http://myappdomain`而不是`https://myappdomain`.

我的第一个问题：我能做些什么来告诉 Facebook 不要重写我配置的 URL？（或者我在其他地方犯了错误）

我的第二个问题：如果signed_request 丢失，我想我可以加载一个空页面，并在那里放置一个javascript代码 window.top.location = [https://facebook.com/somewhere](https://facebook.com/somewhere)。但是如果没有签名的请求，我不知道这个“某处”。是否可以使用 apaches mod rewrite 将 post 参数作为 get 参数传递？

提供应用程序的 http 版本对我来说不是解决方案（客户要求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:49:11.093

> 如果signed_request 丢失，我想我可以加载一个空页面并在其中放置一个javascript代码 window.top.location = `https://facebook.com/somewhere`。但是如果没有签名的请求，我不知道这个“某处”。是否可以使用 apaches mod rewrite 将 post 参数作为 get 参数传递？

不是我现在……但是你为什么不只通过 HTTP 提供那个小脚本呢？您可以访问其中的 signed_request，找出您的 HTTPS 目标 URL，并通过 JavaScript 重定向到那里。

> 提供应用程序的 http 版本对我来说不是解决方案（客户要求）。

这样，*只有*重定向本身会通过 HTTP 提供服务——一旦客户端被重定向，就会使用 HTTPS，如果你只展示你的“真实”应用程序，那会满足客户的要求吗？

# php - 我从这个 foreach 语句中得到两个结果。

> ID：13375115
> 
> 赞同：0
> 
> 时间：2012-11-14T08:15:36.510
> 
> 标签：php

我有一组用户。如果 user_login 与表中的行匹配，它将从中选择 id 和 name 等。通过我的以下查询，它返回两个指向“个人资料”的链接，一个正确，一个错误。我如何摆脱错误的？

```
 function fetch_new_users()
        {
            $result = mysql_query("SELECT `id`, `username` FROM `users` WHERE username='{$_SESSION['user_login']}'");
            $mysql = mysql_fetch_assoc($result);

            return $mysql;
        }

        $users = fetch_new_users();
        ?>
        <?
        if (isset($_SESSION["user_login"])) {

        ?>
        <div class="fnav">

                 <?php foreach($users as $user): ?>
                            <p>
                                <a href="profile.php?id=<?php echo $user['id']; ?>" >Profile</a>
                            </p>
                        <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:31:17.397

`mysql_fetch_assoc()`返回一个包含第一个返回行的选定字段的数组，即`$users`一个包含两个键“id”和“username”的数组。因此，在这里使用 foreach 循环是没有意义的：

```
<div class="fnav">
    <p>
        <a href="profile.php?id=<?php echo $users['id']; ?>">Profile</a>
    </p>
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:32:28.103

您的函数返回一个包含两个变量的数组，`id`并且`username`.

通过你如何称呼它，你期待一个*数组 arrays*，所以：

```
function fetch_new_users()
{
    $result = mysql_query("SELECT `id`, `username` FROM `users` WHERE username='{$_SESSION['user_login']}'");
    $user = mysql_fetch_assoc($result);
    mysql_free_result($result);
    return array ( $user );
}

<?php php foreach($users as $user): ?> 
```

另请注意，您没有检查数据是否确实存在；`fetch_new_users`可能会回来`False`。

最后，这里的 foreach 循环没有太多用处，因为该函数可能会返回一个项目。不过，我希望您在其他地方重用该代码。

所以总结一下：

```
<?php

// If user_login is unset, fetch_new_users will fail, so it makes sense
// to check it *before* calling.

if (isset($_SESSION["user_login"])
{
    $users = fetch_new_users();
    if (false === $users)
    {
         // The query failed. Output something to explain why we won't display profiles
    }
    else
    {    // This section will have to be closed later on

?>

    <div class="fnav">
    <?php foreach($users as $user): ?>
        <p>
            <a href="profile.php?id=<?php echo $user['id']; ?>" >Profile of <?php echo $user['username']; ?></a>
        </p>
    <?php endforeach; ?> 
```

或者您可以检查是否`count($users)`为 1。然后，上面的代码将允许用于显示单个用户的信息，或来自多个用户的信息（必须由不同的函数或不同的实现提供`fetch_new_users()`）。

# sql - 在 SQL 中自定义输出

> ID：13375118
> 
> 赞同：0
> 
> 时间：2012-11-14T08:15:52.587
> 
> 标签：sql, db2

我对 SQL 有一个小问题。

我有以下 SQL 输出

```
XSTOREATTR_ID    STORE_ID    STRINGVALUE    FLOATVALUE
  0               123          asdf           null
  0               124          awer           null
  1               123          null           20
  1               124          null           30 
```

我希望我的 sql 的输出是

```
XSTOREATTR_ID      123        124
  0                asdf       awer
  1                20          30 
```

有人可以帮助我吗？我知道它可以在 Pivot 中完成，但我正在努力获得这个输出。

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:58:04.613

DB2 在动态设置列名方面非常有限：

如果你只有几个不同的值`STORE_ID`，你可以创建一个硬编码查询：

```
with vals as (
    select xstoreattr_id,
           store_id,
           case when xstoreattri_id = 0
               then stringvalue
               else char(floatvalue)
           end as value
        from table
)
select xstoreattri_id,
       max(case when store_id=123 then value else null end) as 123,
       max(case when store_id=124 then value else null end) as 124
              --and so on...
    from vals
    group by xstoreattr_id 
```

这不是很优雅，但它通常对快速任务很有用。

除此之外，如果您想坚持使用纯 SQL 解决方案，则需要使用[动态 SQL](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0000948.html)，其中包括在字符串中创建 SQL 语句，然后运行它。这很乱。如果可能的话，通常最好使用外部编程语言来做这样的事情。

# android - 无法更改 onCreateView 中的 EditText

> ID：13375121
> 
> 赞同：0
> 
> 时间：2012-11-14T08:15:59.350
> 
> 标签：android

每次调用我的片段时，我都想重置我的文本输入。

我的 onCreateView 方法到此结束：

```
 txtValue.setText("");
    Log.d("debug", "Hello");

    txtValue.addTextChangedListener(tx);
    tx.onTextChanged(txtValue.getText(), 0, 0, 0);      

    InputMethodManager mgr = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
    mgr.toggleSoftInput(0, 0); 
```

我每次都打招呼，但文字永远不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:49:17.897

根据我的经验 - 它很可能是由您的实例化引起的。

每次调用 setText 时，您的 txtValue 是本地的并重新分配吗？如果是 - 将其移动到全局对象，您可能不止一次实例化它，这会导致您的 setText 故障。

另外，你确定你的 onCreate 方法被调用了吗？你总是得到那个日志输出吗？通常，在 onCreate 方法中调用的方法中分离 gui 对象实例化并在 onResume 中调用操作是一种很好的做法。

# html - 在 Django if/else 语句中用 CSS 替换图像

> ID：13375126
> 
> 赞同：0
> 
> 时间：2012-11-14T08:16:15.357
> 
> 标签：html, css, django, image, if-statement

我正在尝试创建一个类似于 stackoverflow 的投票系统，但我不知道如何调用 css 而不是图像。

我有以下代码：

```
 <input type="image" id="uparrow{{ vote.id }}" src="{{ MEDIA_URL }}static/img/aup{% if vote and vote.is_upvote %}mod{% else %}grey{% endif %}.PNG"> 
```

如何更改代码使其调用 css 类而不是 img src？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:25:22.143

您正在寻找类似的东西：

```
<input type="image" id="uparrow{{ vote.id }}" 
       src="{{ MEDIA_URL }}static/img/vote.png"
       class="otherclass {% if vote and vote.is_upvote %}upvote{% else %}novote{% endif %}" /> 
```

在一种情况下，图像将具有“otherclass”和“upvote”类，在另一种情况下具有“otherclass”和“novote”类。

# html - @MediaQuery 在 CSS 中调用

> ID：13375127
> 
> 赞同：2
> 
> 时间：2012-11-14T08:16:21.673
> 
> 标签：html, css, wordpress, stylesheet, media-queries

我一直在调整网站以使其更具响应性，并且我一直在关注发送给我的演示中的代码。

但是由于某种原因，它似乎没有像移动浏览器中所说的那样调整大小。

我认为这是因为 Wordpress 调用样式表的方式略有不同，我需要某种形式的插件来做到这一点吗？

请参阅下面我的文档的标题引用了另一个样式表，但是当浏览器不同时它似乎没有调用它（但是它在不同的分辨率下有效地调整大小）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php bloginfo('name'); ?> <?php if ( is_single() ) { ?> &raquo; Blog Archive <?php } ?> <?php wp_title(); ?></title>
<meta name="keywords" content="Holiday, free CSS template, clean, neat, aqua, white, templatemo" />
<meta name="description" content="Holiday is a clean and neat free CSS template using aqua and white colors." />
<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" />
<!-- Include jQuery -->
<?php wp_enqueue_script('jquery'); ?>
<?php wp_head(); ?>
<!-- Include the Nivo Slider CSS file -->
<link rel="stylesheet" href="<?php bloginfo("template_url"); >/scripts/nivoslider/nivo-slider.css" type="text/css" media="screen" />
<!-- Include the Nivo Slider JS file -->
<script src="<?php bloginfo("template_url"); ?>/scripts/nivoslider/jquery.nivo.slider.js" type="text/javascript"></script>
<!-- Set up the Nivo Slider -->
<script type="text/javascript">
jQuery(window).load(function() {
jQuery('#slider').nivoSlider();
});
</script>
<!-- media queries css -->
<link href="media-queries.css" rel="stylesheet" type="text/css">

<!-- html5.js for IE less than 9 -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- css3-mediaqueries.js for IE less than 9 -->
<!--[if lt IE 9]>
<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:12:03.483

你确定你的道路`media-queries.css`是正确的吗？首先确保 CSS 正在加载，然后我们可以开始讨论实际的媒体查询本身。

如果您的文件在**主题**文件夹中，那么它将类似于：

```
/wp-content/themes/media-queries.css 
```

或者：

```
<link href="<?php bloginfo('template_url'); ?>/media-queries.css" 
    rel="stylesheet" type="text/css" media="screen" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:56:59.823

这可能会比您想要的更多，但让我们从[CSS3 Media Query spec](http://www.w3.org/TR/css3-mediaqueries/)开始。

一些不应该有问题的事情，但我会解决： 1\. 如果你希望旧版本的 IE 识别新的 HTML5 元素，你只需要谷歌的 html5shim ——从技术上讲，这不应该出现在 XHTML 2 中。你的链接“ media-queries.css" 样式表缺少自闭括号 '/>'

根据我的阅读，这些小不一致不会导致浏览器出现很多问题，但是如果您的代码开始做一些有趣的事情，您应该始终仔细检查是否不准确。

我在头部下方看不到任何东西，但我认为您只是在粘贴内容的底部。也就是说，您粘贴的内容应该是功能性 (X)HTML，但没有包含实际的 CSS 媒体查询。

这是一个响应式 CSS3 @Media Query 样式表到 Github 上的 repo（基于 Twitter Bootstrap 的 WordPress 主题）[https://github.com/retlehs/roots/blob/master/assets/css/bootstrap-responsive.css](https://github.com/retlehs/roots/blob/master/assets/css/bootstrap-responsive.css)

在这些文档和实际的 Twitter Bootstrap（也在 Github 上，CSS 是相同的）文档之间，您应该能够看到其他人是如何做的以及为什么这样做。

希望它有所帮助，但如果不查看实际的 CSS，我无法猜测它为什么不起作用。

# php - jQuery序列化数组中的选择和输入如何在PHP循环中获取它们

> ID：13375128
> 
> 赞同：1
> 
> 时间：2012-11-14T08:16:34.257
> 
> 标签：php, jquery, loops, serialization

我正在尝试创建一个函数，用户应该从 a 中选择一个选项`<select>`并将日期添加到所选值（在`<input type='text'>`同一行内）。然后，当输入字段后，将其作为数组发送到`PHP`文件并插入数据库。

我在表的同一行上动态创建`<select>`, 和。`<input type='text'>`

选择看起来像这样：`<input type='select' class='add_absence_type'>`
输入字段：`<input type='text' class='add_absence_date'>`

我正在处理的脚本目前看起来像这样：

```
$('#save').click(function() {
function serealizeSelects (select)
    {
        var array = [];
        select.each(function(){ array.push($(this).val()) });
        return array;
    }
function serealizeInputs (input)
    {
        var array = [];
        input.each(function(){ array.push($(this).val()) });
        return array;
    }
    var student_id = $('#student_id').val();
    var add_absence_type = serealizeSelects($('.add_absence_type'));
    var add_absence_date = serealizeInputs($('.add_absence_date'));

    $.post('../updateAbsence.php', {

    student_id: student_id,
    add_absence_type: add_absence_type,
    add_absence_date: add_absence_date

    }, function(data) {
        location.reload();
    });
}); 
```

`$_POST`数据如下所示：

```
student_id  1
add_absence_date[]  2012-11-13
add_absence_date[]  2012-11-14
add_absence_type[]  1
add_absence_type[]  2 
```

我需要做什么来创建一个`mysql_query`像这样创建的 PHP 循环？见下文：

`"INSERT INTO my_table (student_id, absence_type_id, absence_date) VALUES ('1', '1', '2012-11-13')"`

`"INSERT INTO my_table (student_id, absence_type_id, absence_date) VALUES ('1', '2', '2012-11-14')"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:45:52.820

试试这个方法

```
<?php
$student_id = $_POST['student_id'] ;
$absence_date_arr = $_POST['add_absence_date'] ;
$absence_type = $_POST['add_absence_type'] ;

foreach($absence_date_arr as $key=> $absence_date){
    mysql_query("INSERT INTO my_table (student_id, absence_type_id, absence_date) VALUES ('".$student_id."', '".$absence_type[$key]."', '".$absence_date."')");  
}
?> 
```

# java - 在Java中将2的补码字节转换为无符号正值

> ID：13375133
> 
> 赞同：1
> 
> 时间：2012-11-14T08:16:53.720
> 
> 标签：java, android, bytearray, byte, twos-complement

我在 Java 中有一个 8 位字节数组。字节数组由它从外部传感器接收的 16 位数字的高字节和低字节组成。

例如，字节数组可能如下：

```
00 00 00 01 00 02 00 03
0  1  2  3  4  5  6  7 
```

在上面的字节数组中，每个偶数索引是 16 位数字的高字节，每个奇数索引是低字节。

我遇到的问题是当数字大于 127 时，导致数字的 2 的补码表示占上风。我真正想做的是保持正数无符号数。因此我不关心 2 的补码。这是我试图做的没有成功的事情。

```
byte[] buffer = new byte[1024]; 

//SOME CODE SNIPPET THAT PUTS NUMBERS B/W 0-500 INTO THE BUFFER RANDOMLY

for(int i = 0; i < 1024; i+=2) {
    int twoByte = 0;
    short high = 0, low = 0;
    high = (short)buffer[i];
    low = (short)buffer[i+1];
    twoByte = ((high << 8) | low);
    System.out.println(twoByte);
} 
```

我试图转换为短以使 8 位数字无符号，但似乎 java 截断了前导 0 的广告将其视为 8 位并保留负号。有谁知道也许更好的方法？

**## 编辑：我不知道这是否重要，但值得一提的是，这是一个在 Android 上运行的应用程序。##**

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:25:07.767

尝试：

```
int high = ((int)buffer[i]) & 0xff;
int low = ((int)buffer[i+1]) & 0xff;

int twoBytes = (high << 8) | low; 
```

* * *

示例代码：

```
byte[] buffer = new byte[] { (byte) 0x16, (byte) 0xfa };

int high = ((int)buffer[0]) & 0xff;
int low = ((int)buffer[1]) & 0xff;
int twoBytes = (high << 8) | low; 
```

价值观：

```
buffer   = [ 22, -6 ]
high     = 22
low      = 250
twoBytes = 5882 
```

5882 是十六进制的 0x16fa，它可以工作。

检查您是否正确读取了传感器中的字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:27:58.487

要将数字从二进制补码转换为无符号数：

```
if(x<0)
{
    x=256+x;
} 
```

# java - 带有外部java文件的jsp中的计数器

> ID：13375134
> 
> 赞同：0
> 
> 时间：2012-11-14T08:17:04.730
> 
> 标签：java, html, jsp, package

我想用jsp写一个计数器。这是我的代码：

Countinghilfe.java：

```
package Counting;
import java.io.*;
import java.util.*;

public class Countinghilfe{

public static int getCount(){
String s="";
try {
BufferedReader in = new BufferedReader(new FileReader("Anzahl.txt"));
s=in.readLine();

} catch (IOException e) {
    e.printStackTrace();
}
Integer zahl=new Integer(s);
return zahl;
}

public static void increase(){

String s="";
try {
BufferedReader in = new BufferedReader(new FileReader("Anzahl.txt"));
s=in.readLine();
Integer zahl=new Integer(s);
zahl++;
BufferedWriter output=new BufferedWriter(new FileWriter("Anzahl.txt"));
output.write(String.valueOf(zahl));
output.close();
 } catch (IOException e) {
    e.printStackTrace();
}
}   
 } 
```

在 counter.jsp 文件中：

```
<html>
<head>
<title>Counter</title>
</head>
<body>
<%@ page import="Counting.Countinghilfe" %>
<%
Countinghilfe cl = new Countinghilfe();
out.println("<h2>Sie sind der ");
out.println( cl.getCount());
out.println(". Besucher auf unserer Site!</h2>");
cl.increase();
%>
</body>
</html> 
```

显示的错误是：org.apache.jasper.JasperException: org.apache.jasper.JasperException: Unable to load class for JSP。还有这些：

org.apache.jasper.JasperException: Unable to compile class for JSP: An error occurred at line: 6 in the generated java file 只能导入一个类型。Counting.Countinghilfe 解析为一个包

Countinghilfe 无法解析为类型

我该如何解决这个问题？

# xcode - 切换 NSWindows

> ID：13375142
> 
> 赞同：1
> 
> 时间：2012-11-14T08:18:00.797
> 
> 标签：xcode, macos, cocoa, nswindow, nspanel

我有两个`NSWindows`，都带有一个`NSPanel`。我想在按下按钮时切换窗口。如何才能做到这一点？我不再需要旧窗口，所以我只想展示新窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:24:50.547

要聚焦第二个窗口，只需调用：

```
[window2 makeKeyWindow]; 
```

# iphone - 无法显示 XCode 的 GUI 和版本

> ID：13375143
> 
> 赞同：0
> 
> 时间：2012-11-14T08:18:01.937
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

我正在使用 XCode 4.3 并且我正在按照我书中的示例创建一个选项卡栏应用程序（可能用于 XCode 版本 < 4.3）但是当我添加一个新选项卡并打开复选标记以在添加新文件时生成 XIB 文件在 Cocoa Touch 中，GUI 不会出现，而是显示其生成的 XML 文件内容。你知道如何解决这个问题吗？

我发现每次有新版本的 XCode 时，gui 和定义的函数似乎都发生了很大的变化，这对像我这样的低级程序员来说是不是很烦？（*低*，我的意思是新手和那些跟不上如此快速变化的人）。谢谢你。

你可以在这里查看我的照片 [http://imageshack.us/photo/my-images/685/appleimg.png/](http://imageshack.us/photo/my-images/685/appleimg.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:34:30.797

右键单击 .xib 文件并选择 Open as...

将有一个选项列表。目前您正在使用“源代码”，它显示为 XML。请改用 Interface Builder - iOS。

这将在会话之间被记住。我不知道它最初是如何设置的。

或者，您可能在版本编辑器而不是标准编辑器中 - 这会将 xibs 显示为 XML，以便正确显示更改。

# php - 如何在 php 中处理 box.net 下载响应

> ID：13375149
> 
> 赞同：0
> 
> 时间：2012-11-14T08:18:27.850
> 
> 标签：php, api, curl, download, box-api

我正在尝试使用 php 中的 API 使用 box.net 下载文件。根据文档，我编写了代码。

但作为回应，我收到了一些奇怪的短信。这是我的代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.box.com/2.0/files/3934139624/content ");
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_HTTPGET,true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: BoxAuth api_key={MyApikey}&auth_token={Mytoken}"));
$result = curl_exec($ch);
die('DIE'); 
```

我得到这样的回应：

> PK!Ðòš-[Content_Types].xml ¢( ´UËNÃ0¼#ñ'¯¨qË!Ô´G¨Dù×Þ´‰mÙÛ×ß³IšA›ˆ†^"EÎÎÌÎÎnÆÓ]žEðA[“°QH¯~ÉŸb üv8¼ãÒƒ,0ØdüF¼VÍ „ÇW'ßZ¯xj-‹b,cÑcUWP'L8—i)„óQ?H6Mµeå:'ª¸€sÞJZË³¸¾) ùdü©Xg=ïH[e‡‡,üõÐfL•¥²°Ò.´0´· uPvÒž¦»v~3Üis¡Mÿ¤³ÎàÉ×ÿSÝ)"à>»DP*ÜNz0êBI'Û$Ð¼fÞºÀi+zŠ P ´0"f3°£\...È¾TºI S'ÌõŒ«º¾ÇôWš™¦ÚY igï@µÇX6_Ö]7~ fïØË‰ÈaoÙ.b*lIÆrj)õ,l0Ï%'b¬ 6ài¢ÕõDÿ_‹Ž..., ¡ ‰Ïó|uœZ^tÙ¢yÇ¯;!Y,}{ûCƒ³/h>ÿÿPK!¿hJä1>word/*rels/document.xml.rels ¢( ¬"ËNÃ0E÷HüCä=qR q'æ>¾ƒ"'ˆsµà©WÃ-ŽÌEî›nâ>ðÍqã¨Í§y±3ÆóüükeìE±ty'àÕ³üÍé»¦ÏÖ¤KLÏhóÊŸi¾IàˆpzÒŽ¹ç?}xÛxx ;ùgïÐ¥f7Yô KéMèwÄÆÇÐEïúÃF§³ß9ètÏ7ÌKWxÐ/žñ¡“ùéâ;W...—Ô•¯bú%B×óù§ìv îãã¡ˆ“ô£ 8ÜílìÐqq~x|!Ã4Á1Nâ ñaãVš+¾•ËÓr¤ØLe'õc”ójS“ Œ(ñR'»>wbriê'6œ,•ôçPøH†.ÔO«<çµ¼G›[¯ ‹<code>Ÿ~ëÈŒcñ)“ )ò<4/nÌ—ôEÛþßpÄÙ÷æ¬Û?xg«\Ã–îÐƒSäÀ• Ç°tÒ(¾‹³ƒwïg~³ÕKøŒ;ù¾.†ì, l©´ªµÐm¯]‰ŠTíßnÁ¿·ß¤/ë»–ª"ì§“6õ”^Qð-wô—Qð]6bé à²@ÆûÍ# ¡™∼×Fa'™Â†êMî'ÂÛ¿U*XÆÞ/¾\ÁÜl X5HñKÕ~sØ8EÌ/!Ð²ÃÐeq”µ±dº¨É…â›,R—7ÐŠU¹iØF:h±FÎç¢àõð¾ôÈ!~&æ', ADSÈP¸L'M.úìäpow* ½Ý(¥Ú·R ãpK0è7^;¿Lë4f¤P3Ì...#M s´ï¡Ü:...(@à(1ß;9|÷S½°T4Ï¹F²ì%“$åÁf“tÖØ©â¼ªR& 〜æÖQ `nn†)@éóÒfŽBC?‰ð€()ÄÝ(%LNËñ)V^«ÞÛ¶[5+Í>jÀ£WlŽ÷¡¿)ÁoôFBû›CÕ©ë­Ü™ÖI¦`×Æ¤HX-Ä³ž^ÀDûs“ ...Ø}

谁能告诉我如何处理这种回应？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:16:57.113

@GBD 以下来自响应标头：

> HTTP/1.1 302 找到服务器：nginx 日期：星期三，2012 年 11 月 14 日 09:11:51 GMT 内容类型：文本/html；charset=utf-8 Connection: keep-alive Cache-control: private Location: [https://dl.boxcloud.com/bc/1/85f471520cf611a05025a5f/JolueqOGpciD6dgYhecNBoVpYxkvmYe1ZLheZor6BF4DUBIelMQTkFwYIys3nIibNIIEHUp447tBZLaXDzIbNQ,,/a44510a2b21219463fade41d6b36dabf/](https://dl.boxcloud.com/bc/1/85f471520cf611a05025a5f/JolueqOGpciD6dgYhecNBoVpYxkvmYe1ZLheZor6BF4DUBIelMQTkFwYIys3nIibNIIEHUp447tBZLaXDzIbNQ,,/a44510a2b21219463fade41d6b36dabf/) Content-Length: 0
> 
> HTTP/1.1 200 OK 服务器：nginx 日期：2012 年 11 月 14 日星期三 09:11:52 GMT 内容类型：application/vnd.openxmlformats-officedocument.wordprocessingml.document 内容长度：19944 连接：keep-alive 缓存控制：私有接受范围：字节内容处置：附件；文件名=“云计算提案.docx”；文件名*=UTF-8''cloud%20computing%20proposal.docx X-内容类型选项：nosniff 接受范围：字节

并将文件保存在 xml 中，无法打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:39:07.817

根据 box.net api 文档：

> 对该请求的响应将只是文件本身的完整数据。

因此，您只需要在本地保存文件内容。

在响应标头中，您需要`check content-type`，现在它是`XML`

```
$result = curl_exec($ch);
$fp = fopen('test.xml','wb');
fwrite($fp, $result);
fclose($fp); 
```

# sql-server - 每行的 Sql Server

> ID：13375152
> 
> 赞同：0
> 
> 时间：2012-11-14T08:18:54.880
> 
> 标签：sql-server, sql-server-2008, triggers

我正在使用 Sql Server 和触发器。

过去我使用 Oracle 和触发器。在 Oracle 中有一个 FOR EACH ROW 触发器的功能。

Sql Server 2000 和 2005 不支持这个，但是这个支持哪个版本。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:25:43.297

SQL Server 中没有等价物。您只有 INSERTED 和 DELETED 表可以使用，您必须显式匹配它们才能获得逐行关联。在某些情况下，表没有不可变的 GUID 或标识列（代理键），可能无法匹配它们。

如果需要使用触发器，或者确保涉及标识符键更改的更新一次只能发生一行，则取决于模式的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:26:28.187

不，SQL Server 没有`FOR EACH ROW`触发器。您需要检查`inserted`和`deleted`虚拟表 - 对它们执行基于集合的操作，或者使用游标对它们进行迭代。

# forms - 验证码错误后如何保存和重置表单输入？

> ID：13375157
> 
> 赞同：0
> 
> 时间：2012-11-14T08:19:11.790
> 
> 标签：forms, cookies, input, session-cookies, save

我有一个表格，人们必须在其中填写几个输入字段。问题是：如果有人输入了错误的验证码或任何其他输入字段出错，那么他们必须重新开始，再次填写表格。我知道可以使用 cookie 来保存输入并将其重新设置，但是我找不到任何代码来解决这个问题？我有 7 个输入字段和 2 个选择字段....

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:34:49.900

为此使用 Ajax，网上有很多代码。

使用 Jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:13:40.150

查看这些链接中的任何一个都可以帮助您

[http://www.webdesignbeach.com/beachbar/ajax-fancy-captcha-jquery-plugin](http://www.webdesignbeach.com/beachbar/ajax-fancy-captcha-jquery-plugin) http://demos.myjqueryplugins.com/qaptcha/ [http://tympanus.net/codrops/2009/09/22/21 -免费验证码来源/](http://tympanus.net/codrops/2009/09/22/21-free-captcha-sources/)

# exchangewebservices - 仅从 EWSJavaAPI 的收件箱中检索电子邮件

> ID：13375159
> 
> 赞同：1
> 
> 时间：2012-11-14T08:19:20.553
> 
> 标签：exchangewebservices, ewsjavaapi

我正在使用 EWS Java API 来阅读 Outlook 收件箱。收件箱可以包含联系人项目和日历项目。

我只想检索电子邮件，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:19:20.553

这可以通过检查项目类型来完成，如下所示：

```
if(myItem.getItemClass().equals("IPM.Note")){
   // this is an email
} 
```

所有项目类型都可以在这里找到：

[http://msdn.microsoft.com/en-us/library/office/bb176446(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb176446(v=office.12).aspx)

# php - 我可以在打开的购物车中为不同国家/地区单独收取运费吗？

> ID：13375166
> 
> 赞同：2
> 
> 时间：2012-11-14T08:19:49.513
> 
> 标签：php, opencart

我需要针对不同国家/地区单独收取运费，是否可以在开放式购物车中进行，如何更改运费页面？

例子

*   加拿大、墨西哥、阿拉斯加 - 运费 9.99 美元`
*   夏威夷和国际 - 运费 $19.99

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T13:19:19.573

是的，这是可以做到的。

查看[http://www.18aproductions.co.uk/news/view/how-to-get-different-shipping-rates-on-your-opencart-shop](http://www.18aproductions.co.uk/news/view/how-to-get-different-shipping-rates-on-your-opencart-shop)

摘要：即使您的运输成本不取决于重量，也要使用基于重量的运输。基于重量的运输模块允许不同的区域。只需输入一个极高的重量限制，即可以一种运费覆盖所有重量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:14:55.590

扩展商店中有可用的扩展来处理这个问题。特别是您想要寻找基于统一费率地理区域的运输

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T13:21:28.247

您需要首先将每个运输区域设置为地理区域。

包含的统一运费模块匹配一个地理区域。

（目前）不可能在 OpenCart 中添加模块的多个实例。

结果，允许设置多个地理区域的类似模块在扩展商店中如雨后春笋般涌现。

您可以编写自己的模块，但另一个（繁琐但免费的）选项是为每个额外的 GeoZone 克隆 flat.php 文件（或相关的运输模块）。

逻辑在catalog\model\shipping；管理控件位于 admin\controller\shipping 和 admin\view\template\shipping 中。在所有这些文件夹中，您需要复制原始文件并在每个文件夹中为其赋予相同的新文件名（例如 flat2、flat3）。在 catalog\language\english\shipping 和 admin\language\english\shipping 中也有语言，但您可以对所有人使用相同的语言文件。

然后，您必须编辑每个以修改类名称（例如，更改 ModelShippingFree、ControllerShippingFree 中的 Free 部分以匹配您的 Free2）。

然后您可以进入管理员并将每个设置为不同的地理区域。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T12:26:44.687

转到管理面板 -> 用户管理 -> 扩展 -> 运费 - 在这里您可以查看基于地理位置的运费。

# google-maps-api-3 - 使用 Google Maps API v3 在 HTTPS 网站中加载 KMZ 文件，但 Google 正在通过 HTTP 调用 KMZ 文件所具有的图像覆盖

> ID：13375168
> 
> 赞同：7
> 
> 时间：2012-11-14T08:19:54.530
> 
> 标签：google-maps-api-3, https, internet-explorer-8

正如标题所说，我有一个 KMZ 文件，它在 Google Maps API V3 中加载良好，但在 KMZ 文件中找到的图像是通过 HTTP 调用的，但我拥有的站点是 HTTPS。

API 脚本是通过 HTTPS 调用的，甚至 KMZ Url 也是一个 HTTPS 链接。但是当 API 调用在 KMZ 文件中找到的图像文件时，它会调用一个 HTTP 链接，如下所示： `http://maps.google.com/mapsatt?id=xxxxxxxxxx&f=files/xxxxxx.png&token=`

这会导致浏览器中出现不安全内容的警告，并阻止使用 IE8 的人查看谷歌地图。是否有解决此问题的方法，因为到目前为止我所能想到的只是使用 KML 文件自己指定 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T07:54:30.223

感谢您注意到这一点。这现在应该适用于 https 图像。如果不是这种情况，请发表评论。

# jquery - 如何使用 jquery 选择 td 中的第一个元素？

> ID：13375171
> 
> 赞同：2
> 
> 时间：2012-11-14T08:20:11.683
> 
> 标签：jquery, jquery-selectors

这是我的 html 的样子：

```
<table border="1">
        <th></th>
        <th>ID</th>
        <th>Name</th>
        <tr>
            <td><input type="button" value="btn1"><input type="button" value="btn2"></td>
            <td>22</td>
            <td>Hello</td>
        </tr>
        <tr>
            <td><input type="button" value="btn1"><input type="button" value="btn2"></td>
            <td>25</td>
            <td>HTML</td>
        </tr>
        <tr>
            <td><input type="button" value="btn1"><input type="button" value="btn2"></td>
            <td>45</td>
            <td>CSS</td>
        </tr>

    </table> 
```

基于由asp.net发出的html的这种结构，我只想在每行的第一个btn上添加类。

我尝试使用它，但发生的情况是，甚至 td 的第二个按钮也被选中：

```
 $(function () {

            $t = $('#GridView1 td').children().addClass('first');

        }) 
```

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T08:24:12.063

`td`如果我理解正确，您需要在每个 tr的第一个输入中选择第一个输入。尝试：

```
$("#GridView1 tr > td:nth-child(1) > input:nth-child(1)").addClass("first"); 
```

当然，越不严格但越简洁

```
$("#GridView1 input:nth-child(1)").addClass("first"); 
```

也可以使用，但这假设您没有在表中的其他任何地方使用输入。

[演示](http://jsfiddle.net/EKFkt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:23:15.497

```
$("tr > td:first").addClass('first'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:06:07.593

```
$("tr > td").addClass('first'); 
```

# javascript - Javascript 参数首选项

> ID：13375175
> 
> 赞同：3
> 
> 时间：2012-11-14T08:20:45.940
> 
> 标签：javascript, function, parameters, styles, arguments

只是风格问题。

你们是否喜欢将变量传递给像这样的函数

```
function (a, b) {
    return a + b;
}(1,2);

or 

function (args){
    return args.a + args.b;
}({a:1;b:2}); 
```

?

两者之间是否存在性能问题？

我决定以某种方式标准化我的功能，因此我在问这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:24:35.507

如果只是几个参数，我会使用第一个以获得更好的可读性（文档）。

如果有很多参数，我会使用第二个（例如选项对象）。

我不认为两者之间有任何主要的性能差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:31:52.580

我发现使用哪种风格完全取决于情境。我认为没有人会争辩说第一种方法是最可取的，并且可读性最好，并且会为大多数功能推荐这种方法。

在处理 JSON 数据和使用 Backbone 中的模型之类的东西时，我更喜欢添加第二种风格的属性。

在性能方面，第一种风格更快。

我清理了您的函数并将它们添加到您可以在此处查看的测试中：

[http://jsperf.com/declared-args-vs-lookup](http://jsperf.com/declared-args-vs-lookup)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:29:44.553

我认为您不必担心这里的性能。即使有一些差异，它们对于常规脚本也不是很重要。

至于编码风格，只要您确定函数 api 应该是什么样子，我都会使用第一个版本（传递固定数量的参数）（其他人也更容易了解什么是某些论据）。

如果假设该函数充当插件的入口点，请使用第二种方法 - 添加/减去可能在对象中传递给该函数的选项会容易得多，因此 API 不会对人们改变太多已经在使用脚本。

# jpa-2.0 - 从 BMT bean 调用 CMT bean 导致“本地事务已经有 1 个非 XA 资源”

> ID：13375176
> 
> 赞同：3
> 
> 时间：2012-11-14T08:20:46.430
> 
> 标签：jpa-2.0, eclipselink, glassfish-3, ejb-3.1, jta

我有一个带有 Bean 管理事务的 EJB：

```
@Singleton
@TransactionManagement(TransactionManagementType.BEAN)
public class BmtBean {

  @Resource
  private DataSource ds1;

  @Resource
  private SessionContext sessionCtx;

  @EJB
  private CmtBean cmtBean;

  public void callCmtBean() {
    Connection conn1 = null;
    try {
      conn1 = ds1.getConnection();
      // create a PreparedStatement and execute a query
      // process result set
      while(resultSet.next()) {
        // map resultSet to an entity
        Entity entity = mapResultSetToEntity(resultSet);
        sessionCtx.getUserTransaction().begin();
        // pass an entity to another EJB,
        // that operates on a different JTA data source
        cmtBean.call(entity);
        sessionCtx.getUserTransaction().commit();
      }
    } finally {
      // release connection
    }
  }
} 
```

还有另一个具有容器管理事务的 bean：

```
@Singleton
@TransactionManagement(TransactionManagementType.CONTAINER)
public class CmtBean {

  @PersistenceContext
  private EntityManager em;

  @TransactionAttribute(TransactionAttributeType.MANDATORY)
  public void call(Entity entities) {
    //persist passed entities
    //em.flush()
    //em.clear();
  }

} 
```

调用`cmtBean#call`不会导致`TransactionRequiredException`，因为在此之前我开始了`UserTransaction`. 但是当`em#flush`被调用时，会抛出这个异常：

> 原因：javax.resource.spi.ResourceAllocationException：分配连接时出错。原因：java.lang.IllegalStateException：本地事务已经有 1 个非 XA 资源：无法添加更多资源。

在挖掘了一些 EclipseLink 代码后，我看到调用`em#flush()`它时会尝试从中获取新连接`dataSource`，但没有成功。

这是错误还是预期行为？我怎样才能解决这个问题？

**更新：**
查看更新的代码示例。

另外，我必须强调，**我确实使用了 2 个非 XA JTA 数据源**。但是由于`BmtBean`默认情况下的连接设置为`autocommit`，因此在`CmtBean`调用时，事务必须已经提交。

# jquery - jQuery切换3状态与初始状态

> ID：13375178
> 
> 赞同：3
> 
> 时间：2012-11-14T08:21:01.833
> 
> 标签：jquery

jQuery toggle() 支持多种状态，它可以循环通过尽可能多的状态

从[文档](http://api.jquery.com/toggle-event/)中：

> 如果提供了两个以上的处理程序， .toggle() 将在所有处理程序之间循环。例如，如果有三个处理程序，那么第一个处理程序将在第一次单击、第四次单击、第七次单击时调用，以此类推。

以下代码运行良好，循环通过所有三种状态。

```
$('#tag').toggle(function() {
  //set cssClass to 'on'
  //remove all other classes
}, function() {
  //set cssClass to 'off'
  //remove all other classes
}, function() {
  //set cssClass to 'none'
  //remove all other classes
}); 
```

我的问题是，在初始页面加载时，该类被后端设置在#tag 上，但是当单击标签时，toggle() 从第一个切换状态“on”开始循环，而不管初始状态如何。

我想我正在寻找的是一个智能切换，它基于传入的当前状态的选项进入下一个状态。

我可能要添加四个状态，所以我不想要复杂的 if else 语句。

nb 类设置和删除只是一个示例。我正在做其他事情。请不要给出添加和删除类的示例 - 尽管您可以检查类以找到初始状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:26:44.147

在我看来，您需要对 jQuery 进行破解，这肯定是不礼貌的，但确实有效。

我查看了 jQuery 源代码，这就是它的基本功能：

1.  生成一个新的唯一 id 并将其存储为`guid`在您的第一个函数中命名的属性
2.  存储最后调用的函数的索引`jQuery._data(element, 'lastToggle'+guid, index)`
3.  使用`lastToggle`值和函数数组切换函数

因此，为了更改切换索引，您只需`guid`从第一个函数中读取并使用元素上的 jQuery._data 设置所需的值。

我在这里给你做了一个简单的例子：http: [//jsfiddle.net/2gJdG/](http://jsfiddle.net/2gJdG/)

这是要点：

```
var fn1 = function (){
    console.log(1);        
};

$('button').toggle(fn1, function (){
    console.log(2);
}, function(){
    console.log(3);
}, function(){
    console.log(4);
});

jQuery._data($('button').get(0), 'lastToggle' + fn1.guid, 2); 
```

正如您通过单击按钮所看到的，它将调用第三个函数，依此类推。您至少需要在变量中定义您的第一个函数，以便稍后访问它的属性。

请记住，这只是一个 hack，有朝一日可能会因升级 jQuery 而中断。

# c++ - 带有 ncalrpc 的 RPC 端点列表

> ID：13375179
> 
> 赞同：1
> 
> 时间：2012-11-14T08:21:02.743
> 
> 标签：c++, rpc, endpoint

我有一个关于 RPC 端点列表的问题。我想使用 ncalrpc 协议序列（本地 RPC 端点）获取端点，但要远程执行！我的局域网中有远程机器的 IP 地址，我的目的是列出 ncalrpc RPC 端点。我该怎么做？

ncacn_np 和 ncacn_ip_tcp 协议序列没有任何问题。但如果我使用 ncalrpc，该函数`RpcBindingFromStringBinding()`会出现 1707 错误。我知道这是可能的，因为 Metasploit 的插件 - endpoint_mapper 可以做到。但是这个插件的语言是 Ruby，而不是 C++。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T18:19:23.837

ncalrpc 的要点是您不能远程使用端点。

您可以拥有一个可以为您枚举 ncalrpc 端点的远程服务，但它不会在外部工作。

# java - weblogic中的类转换异常

> ID：13375185
> 
> 赞同：4
> 
> 时间：2012-11-14T08:21:42.613
> 
> 标签：java, exception, casting, jersey, weblogic

我有一个使用 jersey jars 的 web 应用程序（WAR 文件）。现在，当我尝试部署它时，我得到类转换异常（一些 bootstrap servlet 使用 jersey）..分析我发现 weblogic 本身有 jersey jars 共同\模块..和我的网络应用程序有不同版本的球衣罐。现在，如果我删除 common/modules jersey jar，那么我的 web 应用程序就被部署了。我想知道如何让我的 web 应用程序使用它自己的 jersey jars 版本，以便在不删除 common/module jars 的情况下部署它。PS我的 .war 文件没有 weblogic.xml 并且 weblogic 正在动态生成它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:48:45.170

获取`weblogic.xml`WebLogic 动态生成的并修改它以添加：

```
<container-descriptor>
   <prefer-web-inf-classes>true</prefer-web-inf-classes>
</container-descriptor> 
```

现在确保在您的 war 文件中有这个 weblogic.xml 并重新部署应用程序。

将 prefer-web-inf-classes 设置为 true[将优先](http://docs.oracle.com/cd/E15051_01/wls/docs103/webapp/weblogic_xml.html#wp1067857)考虑应用程序的 WEB-INF 目录中存在的类。

`prefer-web-inf-classes`可能不会一直工作。如果您使用的是 10.3.4+ 的 WebLogic 版本，则使用删除 prefer-web-inf-classes 设置并改用[prefer-application-packages](http://docs.oracle.com/cd/E24329_01/web.1211/e21049/weblogic_xml.htm#autoId24)。还可以通过[这个](http://www.youtube.com/watch?feature=player_detailpage&v=ArLTKapjV_8#t=306s)视频了解 WebLogic 中的类加载是如何工作的。

# java - 如何防止在winrun4j中显示控制台窗口

> ID：13375189
> 
> 赞同：4
> 
> 时间：2012-11-14T08:21:48.463
> 
> 标签：java, launcher, winrun4j

我在 java 中创建了一个桌面 gui 应用程序，并使用 WinRun4J 创建了一个本地 Windows 启动器。

我的ini文件看起来像这样

```
working.directory=.
classpath.1=oze.jar
main.class=pl.emag.oze.Run
vm.version.min=1.6
vm.location=.\jre6\bin\client\jvm.dll
log.level=none
java.not.found=Nie znaleziono platformy JAVA 
```

我关闭了控制台日志记录（log.level=none），但它一直显示额外的控制台窗口（在屏幕截图上标记为红色，我的应用程序的窗口在后台）。如何预防？

![在此处输入图像描述](../Images/1e4485a0c30e203e562e9637b7da375c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T08:44:16.197

您可能使用（复制）了 WinrRun4J 的控制台版本。有两个 .exe 文件（实际上是四个，因为 32/64 位）。

WinRun4Jc.exe（或 WinRun4J64c.exe）用于控制台应用程序。

WinRun4J.exe（或 WinRun4J64.exe）用于 Swing/GUI 应用程序（注意`c`名称末尾的缺失）

# c# - 桌面应用程序和 Windows Mobile Compact Framework c# 之间的通信

> ID：13375193
> 
> 赞同：1
> 
> 时间：2012-11-14T08:22:13.140
> 
> 标签：c#, windows-mobile, desktop

我正在编写一个桌面应用程序，它必须与紧凑框架 3.5 中的 Windows 移动应用程序进行通信。如果连接可用，则必须在这两个应用程序之间通过 Internet 进行通信，以便根据命令在它们之间发送数据。

系统将在设备和桌面应用程序之间发送消息和对象（如图像），并通过发送命令检查桌面是否可以看到设备并在响应时超时。（然后应用程序将知道该设备不可用）。移动设备在线时也会向桌面应用程序发送消息，桌面知道移动设备已连接（通信注册类型）

有人可以告诉我完成此任务的最佳方法。

我做了一些研究，发现这个[站点](http://msdn.microsoft.com/en-us/magazine/cc164240.aspx)接近于我想要的基于事件的驱动通信，但没有在每台设备上设置电子邮件的可用性。

电池寿命和设备上的互联网开放不是问题。

我是否应该检查使用 System.Net.Socket 类在两个应用程序之间进行这种类型的通信，如果是这样，我将如何设置防火墙不会干扰并让移动应用程序通过 Internet 看到我的桌面应用程序?

希望有人可以为我传播一些信息，如果您有答案，请提供链接，以便我阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:26:58.873

你的描述是基本的。好的，无论您决定使用哪种 TCP/IP 通信（HTTP、套接字），您都必须始终让 Internet 路由器将指定传入端口上的包转发到您的 PC，并且防火墙必须接受这些传入请求。

因此，设备必须向 PC 发送数据，反之亦然。因此，您需要在 PC 和 PC 上安装服务器和客户端。

您可能可以使用 Dropbox 等已经可用的云在 PC 和设备之间交换文件。

您在套接字编程方面的技能如何？主服务器 (PC) 必须编写为多线程，以便能够为多个设备客户端请求提供服务。

在我的 SocketWedge [http://www.hjgode.de/wp/2010/05/27/transmit-data-from-winmo-device-to-pc-socketwedge-and-socketsend/] 中完成了一个简单的套接字通信。此处提供了一种使用设备上的 Web 服务器进行多线程通信的方法 [http://www.hjgode.de/wp/2012/10/19/windows-mobile-a-simple-web-server-with-extended-特征/]。

带有数据同步的 SQL 会是一个可能的选择吗？

你能更详细地描述一下这个应用程序吗？

~约瑟夫

# c# - C# 中的 Apriori - 错误：索引超出范围

> ID：13375199
> 
> 赞同：-1
> 
> 时间：2012-11-14T08:22:26.863
> 
> 标签：c#, indexoutofboundsexception

我的解决方案在这里：[http](http://www.mediafire.com/?rzrhvc71musz793)
://www.mediafire.com/?rzrhvc71musz793 我在第 238 行文件 Apriori.cs 中收到错误“其他信息：索引超出范围。必须是非负数且小于集合的大小”

```
private List<Rule> GenerateRules()
{
    var rules = new List<Rule>();

    foreach (var item in _allFrequentItems)
    {
        if (item.val.Count > 1)
        {
            int maxCombinationLength = item.val.Count / 2;
            GenerateCombination(item.val, maxCombinationLength, ref rules);
        }
    }

    return rules;
}
private void GenerateCombination(List<int> item, int combinationLength, ref List<Rule> rules)
{
    int itemLength = item.Count;

    switch (itemLength)
    {
        case 2:
            AddItem(new List<int>(){item[0]}, item, ref rules);
            break;
        case 3:
            for (int i = 0; i < itemLength; i++)
            {
                AddItem(new List<int>{item[i]}, item, ref rules);
            }
            break;
        default:
            for (int i = 0; i < itemLength; i++)
            {
                GetCombinationRecursive(new List<int>() { item[i] }, item, combinationLength, ref rules);
            }
            break;
    }
} 
```

在 GenerateRules() 我有检查 item.val.Count>1 和 GenerateCombination itemLength = item.Count..为什么在我的调试 item.Count =1 ， itemLength =3????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:36:50.573

列表是引用类型。因此，当您修改`item`in`GetRemaining`方法时，您会从原始列表中删除元素。

```
for (int i = 0; i < itemLength; i++)
{
    AddItem(new List<int>{item[i]}, item, ref rules);
} 
```

`i = 0`，您从项目中删除一个元素。`item.Count = 2`;

`i = 1`，你删除了更多的元素。`item.Count = 1`;

`i = 2`; 您尝试访问`item[2]`，但其中只有一个元素

# solr - Solr4 空间故障排除多边形

> ID：13375200
> 
> 赞同：3
> 
> 时间：2012-11-14T08:22:28.930
> 
> 标签：solr

我正在尝试对 Solr4 及其空间功能进行故障排除。我有一个用“geo”字段索引的文档。

在里面我有以下

纬度 -34.7413

经度 149.7102

```
Stored as <geo>-34.741328,149.710238</> 
```

我也尝试过索引相同的文档

```
<geo> 149.710238 -34.741328 
```

如果您不是用逗号分隔值，则建议这样做（颠倒纬度/经度顺序并在值之间放置一个空格）。

文档索引就好了。

我正在尝试向它发送多边形搜索。多边形是三角形，如果您可以想象三角形的以下 3 个点按顺时针顺序排列。这是一个非常大的三角形，目标坐标在中间某处。我选择了一个三角形以希望进行简单的调试，我打算为这些搜索绘制更复杂的形状

```
(-34.580136904223494, 149.6165823974609)

(-34.84203933395146, 150.0175833740234)

(-34.84654761634415, 149.4627738037109) 
```

我已向 Solr 发送以下查询并收到错误。

```
fq=geo:"Intersects(POLYGON(-34.5801 149.6165, -34.8420 150.0175, -34.8465 149.4627))" 
```

我对三角形的尝试。

```
fq=geo:"Intersects(POLYGON(-34.5801 149.6165, -34.8420 150.0175, -34.8465 149.4627, -34.5801 149.6165))" 
```

我尝试在三角形上再次添加最后一个坐标以“关闭”多边形。上述 2 个查询仅返回以下错误，不返回任何结果。

错误 500 无法读取：多边形（-34.5801 149.6165，-34.8420 150.0175，-34.8465 149.4627，-34.5801 149.6165）

我想我的问题是首先看哪里？我安装了 JTS 库。Solr Log 记录了这一点。

```
19:11:50

SEVERE

SolrDispatchFilternull:com.spatial4j.core.exception.InvalidShapeException: Unable to read: POLYGON((-34.5801 149.6165, -34.8420 150.0175, -34.8465 149.4627)) 
```

感谢任何人都可以提供的任何指示。我认为问题要么是 solr 配置问题，要么是某些东西没有正确安装，要么是我发送坐标和形状的方式，要么是我缺少的其他东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:09:19.077

好的，所以我想在这几天之后，我在 David Smiley 的帮助下修复了它，他在互联网上出现，帮助我自己和其他人解决 Solr 空间问题 - 如果我们见面，我会给你倒很多啤酒 - 谢谢你的帮助。

您必须颠倒每个坐标的纬度/经度（而不是经度/纬度）并且它起作用了。马上。很简单。

```
fq=geo:"Intersects(POLYGON((149.4023 -34.6072, 149.4023 -34.8690, 149.9022 -34.8690, 149.9022 -34.6072, 149.4023 -34.6072)))" 
```

而不是这个

```
fq=geo:"Intersects(POLYGON((-34.6072 149.4023, -34.8690 149.4023, -34.8690 149.9022, -34.6072 149.9022, -34.6072 149.4023)))" 
```

希望这个线程可以帮助其他人。

当有疑问时，我尝试调试如下。1.解压solr.war文件，将其保存为文件夹而不是文件。有很多方法可以做到这一点，具体取决于您的服务器。对于像我这样的业余爱好者，configserver explorer，一个 whm 插件，是你的朋友 :)。2\. 下载 jts 插件，解压，在 /lib/ 文件夹中有一个文件 jts-1.12.jar - 这是钱文件。3\. 将此上传到您的 solrinstall/solr.war/WEB-INF/lib/ 位置 - 当您在其中看到许多其他 .jar 文件时，您知道您在正确的位置 4\. 如果您愿意，可以重新打包 war 文件，或者它应该像这样解压。5\. 确保您的架构与此处的 solr wiki 中所说的完全一致。默认情况下它不存在。检查并再次检查。添加这个

```
<fieldType name="location_rpt"   class="solr.SpatialRecursivePrefixTreeFieldType"
           spatialContextFactory="com.spatial4j.core.context.jts.JtsSpatialContextFactory"
           distErrPct="0.025"
           maxDistErr="0.000009"
           units="degrees"
        /> 
```

并以下列方式添加您的字段“geo”。

```
<field name="geo"  type="location_rpt"  indexed="true" stored="true"  multiValued="true" /> 
```

索引您的数据。我的数据按纬度/经度排列，看起来像这样。地理：-34.741328,149.710238 记住纬度=水平，长=垂直线。6\. 使用 Lucene 搜索方法测试您的搜索。您可以进行非常简单的矩形搜索。找到您的目标文档 GEO 点，然后在左下角和右上角找到坐标。一个矩形只需要 2 个点，您只需进行范围搜索。对我来说，它看起来像这样。

```
fq=geo:[-34.8690,149.4023 TO -34.6072,149.9022] 
```

如果那行得通，那么您就可以进行基本的 GEO 搜索了。

1.  现在让我们用这些坐标制作一个多边形。要制作一个多边形（在这种情况下为矩形），我们需要 5 个坐标，矩形的起始点，3 个其他点，然后再次开始坐标以闭合形状（多边形）。无论出于何种原因，多边形搜索使用不同的纬度/经度布局。你必须扭转这一点。你把经度放在第一位。您还必须以逆时针格式构造此形状。因此，使用由上述坐标构成的点的多边形搜索看起来像这样。

    fq=geo：“相交（多边形（（149.4023 -34.6072、149.4023 -34.8690、149.9022 -34.8690、149.9022 -34.6072、149.4023 -34.6072）））”

如您所见，lat/long 是 long/lat，每个 long/lat 用空格分隔，每个坐标对用逗号“，”分隔。

希望这个线程可以帮助其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:07:55.303

> fq=geo：“相交（多边形（-34.5801 149.6165，-34.8420 150.0175，-34.8465 149.4627，-34.5801 149.6165））”

你几乎是对的。是的，你需要关闭多边形，你在这里做了。但是您在坐标列表周围缺少一对额外的括号：

fq=geo：“相交（多边形（（-34.5801 149.6165，-34.8420 150.0175，-34.8465 149.4627，-34.5801 149.6165）））”

额外的括号是因为可能有多个坐标列表。第一个列表是外环，随后的列表是内环，AKA 孔。这是标准的 WKT。

# stl - stl格式的3ds max导出模型

> ID：13375204
> 
> 赞同：0
> 
> 时间：2012-11-14T08:23:05.493
> 
> 标签：stl, export, 3dsmax

我想将我在 3ds max 中的模型导出为 stl 格式。到目前为止非常容易。但我想稍微旋转和移动我的模型，当将模型导出为 stl 格式时，stl 数据文件应该反映旋转和平移，但事实并非如此。似乎无论我在 3ds max 中对模型做什么，stl 导出文件都包含面的原始坐标。

我能做些什么？有谁知道该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:10:58.977

将 xForm 修改器应用于对象并使用它来转换您的模型。 *这将更改相对于枢轴的顶点坐标，您应该能够导出此编辑的几何图形。*

# java - 如何创建按需实例？

> ID：13375205
> 
> 赞同：4
> 
> 时间：2012-11-14T08:23:05.480
> 
> 标签：java, jakarta-ee, servlets, asynchronous, cdi

在调用必须将新实例作为参数传递的 Java 方法时，这个新实例怎么可能由 CDI 容器创建？

在以下示例中：我正在向异步 servlet 上下文添加一个侦听器：

```
@WebServlet(value = "/example", asyncSupported = true)
public class ExampleServlet extends HttpServlet {

    @Override
    protected void doPost(final HttpServletRequest req,
        final HttpServletResponse resp) throws ServletException,
        IOException {

        // ... some code

        AsyncContext aCtx = req.startAsync(req, resp);
        aCtx.addListener(**new AsyncListener()** {
             // implementation of the async listener
        });
        // ...
    }
} 
```

因此，我希望它由 CDI 容器创建，而不是手动执行这个新的 AsyncListener() 实例化。

当然，我希望每个 aync 上下文都有自己的侦听器实例，否则我只会注入一个带有 @Inject 的 AsyncListener 作为 servlet 类的字段。

目前，找不到任何方法来做到这一点。有人有想法可以分享吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:44:55.130

注入[`Instance`](http://docs.oracle.com/javaee/6/api/javax/enterprise/inject/Instance.html)你的听众。如果侦听器类在依赖范围内，那么每次调用`get()`都会产生一个新实例。

```
@Inject
private Instance<MyAsyncListener> listenerFactory; 
```

和：

```
 aCtx.addListener(listenerFactory.get()); 
```

我已经调用了这个变量`listenerFactory`，因为这就是它在这里的使用方式。

我在 JBoss AS7.1.1 上对此进行了测试，它使用 Weld 1.1.5 作为其 CDI 提供程序，但我相信这是标准行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:35:43.513

实例化 bean 时会处理 bean 的注入点，因此很遗憾您无法显式触发注入。这可能（并且希望会）在 CDI 的后续版本中发生变化。

我知道在某些情况下可以用来解决该限制的一种方法是封装或派生要注入的类，为其提供可注入字段或初始化方法。在这种情况下，它将是`AsyncContext`，但您无法控制`HttpServletRequest`将返回的内容，因此此选项在这里不适用。

也许您可以使用[CDI BeanManager](http://docs.jboss.org/cdi/api/1.0/javax/enterprise/inject/spi/BeanManager.html)解决一些问题- 但我担心这需要比调用更多的努力`new`

# jquery - 安装 jquery 包后的错误

> ID：13375208
> 
> 赞同：0
> 
> 时间：2012-11-14T08:23:13.663
> 
> 标签：jquery, asp.net-mvc, autocomplete, asp.net-mvc-4

我创建了一个非常小的 mvc4 互联网应用程序，它在主页上有一个自动完成文本框。一切正常，直到我使用 nuget 包管理器将 jquery 更新到版本 1.8.2，从那时起我收到`Microsoft JScript runtime error: Object doesn't support this property or method`此函数引发的错误：

```
function reduce( elem, size, border, margin ) {
    $.each( side, function() {
    size -= parseFloat( $.curCSS( elem, "padding" + this, true) ) || 0;
        if ( border ) {
            size -= parseFloat( $.curCSS( elem, "border" + this + "Width", true) ) || 0;
        }
        if ( margin ) {
            size -= parseFloat( $.curCSS( elem, "margin" + this, true) ) || 0;
        }
    });
    return size; 
```

在`jquery-ui-1.8.20.js`文件中。

这就是我在`_Layout.cshtml`页面中调用脚本和样式的方式：

```
@Styles.Render("~/Content/css")
@Styles.Render("~/Content/themes/base/css")
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui")
@RenderSection("scripts", required: false) 
```

和带有文本框的主页：

```
 @using (Html.BeginForm("AutoComplete", "Home", FormMethod.Get, new { style = "text-align: center;" }))
{
    <input  type="text"  id="autocomplete"  name="key"  data-autocomplete=" @Url.Action("AutoCompleteData", "Home")"  /> 
}
@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $('#autocomplete').each(function () {
                $(this).autocomplete({
                    source: $(this).attr('data-autocomplete')
                });
            });
        });
    </script>
} 
```

我尝试更改脚本和样式调用的顺序，但没有帮助。
相同的代码在更新之前完美运行。
任何帮助，将不胜感激。

**编辑：** 我下载了最新的 jquery-ui 文件并将它们添加到我的项目中。我现在没有收到任何错误，但是当在文本框中输入内容时，它看起来像这样：（![自动完成](../Images/f26e3f671a3c2e2a7b8abfd086489f7a.png)
建议隐藏了文本框的一部分并且项目符号可见），刷新后建议位置很好，但项目符号仍然可见.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:33:02.583

.curCSS() 已被弃用一段时间，现在已从 jQuery 中移除。
必须用 .css() 方法替换它。尝试使用最新版本的 jQuery UI。
见[http://bugs.jquery.com/ticket/11921](http://bugs.jquery.com/ticket/11921)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:26:11.887

所以我下载了最新的 jquery 文件并替换了 nuget 安装的那些，不走运！最终我复制了内容目录和脚本目录形成一个新的 mvc4 项目，一切正常。

# wordpress - 为客户使用内容管理系统

> ID：13375214
> 
> 赞同：0
> 
> 时间：2012-11-14T08:23:44.137
> 
> 标签：wordpress, content-management-system

我是一名网络开发人员。现在我的问题是我的许多客户都想自己更新他们的网页，但我不想让他们编辑我的 html/css/javascript 原始代码，甚至教他们已经很麻烦了。所以我想可能是使用 CMS（当然，这与我的喜好相反，因为我喜欢从头开始编码）。

现在这是唯一的途径（CMS）吗？最好使用哪种 CMS？据我所知，Wordpress 是最受欢迎、最灵活/用户友好的

你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:51:38.830

您可能想要这篇文章[http://sixrevisions.com/web-development/how-to-evaluate-what-c](http://sixrevisions.com/web-development/how-to-evaluate-what-cms-to-use/) ​​ms-to-use/他们对什么 CMS 适合您有很好的解释。

# c++ - 如果我们关闭主应用程序，以 QProcess 启动的进程不会退出

> ID：13375215
> 
> 赞同：0
> 
> 时间：2012-11-14T08:23:47.977
> 
> 标签：c++, linux, qt

假设我在 Linux 的终端中启动一个进程，如果终端关闭，则在终端中启动的子进程也会退出（即使进程是使用 sudo 启动的）。但是如果我在应用`p1`程序中启动一个进程（比如说），然后关闭应用程序，进程仍然会继续运行，就好像它是一个守护进程一样，即使我没有使用.`QProcess``GUI``gui``p1``QProcess::startDetached()`

```
process1->start("gksudo",args); 
```

和

```
process1->terminate();
process1->close(); 
```

在关闭事件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:25:25.073

Try adding

```
delete process1; 
```

in GUI class destructor.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:03:38.760

你是如何初始化你的 QProcess 的？`mainwindow.cpp`当我在关闭主应用程序时关闭子进程中执行以下操作（在 Windows 上）时。

```
QProcess* proc = new QProcess(this);
proc->start("notepad.exe q:/blah2.txt"); 
```

通过使 MainWindow 成为 QProcess 的父级，MainWindow 将在其 QObject 析构函数期间销毁并关闭它。

# iphone - xcode iphone更改默认开始视图

> ID：13375225
> 
> 赞同：2
> 
> 时间：2012-11-14T08:24:30.873
> 
> 标签：iphone, xcode, views

我正在使用 xcode 4.5.2，并且在 Iphone 的应用程序中有 3 个不同的视图。

MainWindow.xib
View1.xib
View2.xib

当应用程序在模拟器中启动时，会显示 View1.xib。
我希望在应用程序启动时显示 View2.xib 而不是 View1.xib。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:32:15.347

如果您查看 Storyboard，您会在窗口前面（左侧）看到一个箭头。您可以将此箭头拖动到另一个视图。您还可以在所需视图的**属性**部分（情节提要）中选中“是初始视图控制器”复选标记。

![Xcode 故事板](../Images/e64a82fb5e6c21dd0c0c9b1f581a6b1e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:28:45.340

转到您的应用程序 delegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
  {
    [self.window addSubview:viewController.view];
    [self.window makeKeyAndVisible];
    [self.window setRootViewController:viewController];
    return YES;
} 
```

在`.h`添加变量，如：

```
View2 *viewController; 
```

并添加如下属性：

```
@property (nonatomic, strong) 
View2 *viewController; 
```

# asp.net - 在 Crystal Reports 中使用交叉表

> ID：13375226
> 
> 赞同：1
> 
> 时间：2012-11-14T08:24:32.653
> 
> 标签：asp.net, crystal-reports

我正在尝试使用 Crystal Reports 为我的 ASP.NET 网站生成报告。不幸的是，它看起来像这样。导出到其他扩展时，它会正确显示。我尝试过修补每一件事，但它不会按预期显示。有人能解决这个吗？非常感谢！！

截图可以在这里找到：http: [//imgur.com/RGn4q](http://imgur.com/RGn4q)

# c# - 如果我们在c#中将两个整数相除，如何总是得到一个整数

> ID：13375227
> 
> 赞同：5
> 
> 时间：2012-11-14T08:24:33.637
> 
> 标签：c#, c#-4.0, c#-3.0, c#-2.0

我有三个整数类型变量

1.  Totallistcount
2.  总页数
3.  每页数

假设在初始级别我有这个

```
Totallistcount = 14;
perpagecount = 9; 
```

现在我有一个公式可以找到可能的总页数

```
totalpagescount = Totallistcount / perpagecount ; 
```

但是在这种情况下，我进入`1`但`totalpagescount`我需要`2`进入`totalpagescount`，因为第一页上有 9 个项目，其余项目将显示在最后一页，我该怎么做

谢谢 ，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T08:26:39.667

```
totalpagescount = (Totallistcount + perpagecount - 1) / perpagecount ; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:27:40.827

这就是整数除法的**工作**方式，您需要[`double`](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.71%29.aspx)先将其转换为能够获取数字，然后用于[`Ceiling`](http://msdn.microsoft.com/en-us/library/zx4t0t48.aspx)“四舍五入”：

```
(int)Math.Ceiling( (double)Totallistcount / perpagecount); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T08:26:57.210

如果要四舍五入，则需要将除法作为浮点数执行，然后调用`Math.Ceiling`以获取下一个最大的整数。

```
double quotient = Totallistcount / (double)perpagecount;
double ceiling = Math.Ceiling(quotient);
int totalpagescount = (int)ceiling; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T08:33:58.503

另一个解决方案：

> int pageCount = (records - 1) / recordsPerPage + 1;

int pageCount = (14 - 1) / 9 + 1; => 页数 = 2

# android - 如何在 Phonegap 应用程序中打开下载的文件（pdf、zip、docx 等）？

> ID：13375234
> 
> 赞同：10
> 
> 时间：2012-11-14T08:24:53.213
> 
> 标签：android, jquery, cordova

目前我正在下载模块。一旦用户单击下载按钮，文件（pdf、zip 文件或 docx 格式）将从服务器下载并存储在本地存储中。我可以使用 FileTransfer.Download() 方法下载文件，但无法通过传递文件路径来打开它。

下面是我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta name = "viewport" content = "user-scalable=no,width=device-width" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Test Page</title>
<script type="text/javascript" charset="utf-8" src="js/cordova-2.0.0.js"></script>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <style type="text/css">
        * {
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);  
        }
    </style>
  <script type="text/javascript" charset="utf-8">
      function init() {
          document.addEventListener("deviceready", ready, true);
      }

      function ready() {
          console.log("App is ready.");
      }

      function download() {

       //   var remoteFile = "https://dl.dropbox.com/u/6731723/a.zip";
          var remoteFile = "https://dl.dropbox.com/u/6731723/Beaver.pdf";
          var localFileName = remoteFile.substring(remoteFile.lastIndexOf('/') + 1);

          window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function (fileSystem) {
              fileSystem.root.getFile(localFileName, { create: true, exclusive: false }, function (fileEntry) {
                  var localPath = fileEntry.fullPath;
                  console.log("localPath1:" + localPath);
                  if (device.platform === "Android" && localPath.indexOf("file://") === 0) {
                      localPath = localPath.substring(7);
                  }
                  console.log("localPath2 save:" + localPath);
                  var ft = new FileTransfer();
                  ft.download(remoteFile,
                      localPath, function (entry) {
                          console.log("file path:" + entry.fullPath);
                          var linkopen = document.getElementById("openlink");
                          linkopen.style.display = "block";
                          linkopen.href = entry.fullPath;

                          // var dwnldImg = document.getElementById("dwnldImg");
                          //dwnldImg.src = entry.fullPath;
                          //dwnldImg.style.visibility = "visible";
                          //dwnldImg.style.display = "block";
                      }, fail);
              }, fail);
          }, fail);
      }

      function fail(error) {
          console.log("error:" + error.code);
      }
  </script>
</head>

<body onload="init();">
    <a href="#" onclick="download();">Download file</a>

    <br />
    <br />
    <br />
    <a href="#" id="openlink" style="display:none;font-size:larger;">open</a>
</body>
</html> 
```

知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:16:14.803

本机 PhoneGap 不允许在您的 sd 卡上下载 pdf 文件，也不会自动显示 PDF 文件。

1.  请在您的智能手机上安装pdf阅读器。

2.  创建一个用于下载文件的插件。
3.  使用步骤 1 中安装的程序创建一个用于打开 pdf 的插件。

**Step 2 和 3 的细节**：在Eclipse 中
设置开发环境 [PhoneGap 。](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)[从HERE](https://docs.google.com/file/d/0B_TYS8wHcgB7MTJkMWY4MGQtM2JiYS00MzE3LThjMWQtMDFlNWI5YjM0N2Iw/edit?hl=en_US&pli=1)
下载 示例的 java 类 在文件夹“ **src** ”中解压缩下载的文件 从[HERE](https://docs.google.com/file/d/0B_TYS8wHcgB7N2I5N2I2OWMtM2I1Mi00NWYxLTk4NzMtM2JiNWIyMTJkZWU2/edit?hl=en_US&pli=1) 的示例中下载 javascript 在“ **assets** / www”文件夹中解压缩 index html 文件中的下载文件。调用js：

 ****```
<script charset="utf-8" src="main.js"> </script>
<script charset="utf-8" src="pdfviewer.js"> </script>
<script charset="utf-8" src="downloader.js"> </script>
```

在“ **res/xml/plugins.xml** ”中添加：

```
<plugin name="Downloader" value="com.phonegap.plugins.downloader.Downloader"/>
<plugin name="PdfViewer" value="com.phonegap.plugins.pdfViewer.PdfViewer"/>
```

要调用插件中定义的方法，请在 index.html 中测试以下代码：

```
<! DOCTYPE HTML>
<html>
<head>
<title> PhoneGap-Android PDF Opening App</title>
<script charset="utf-8" src="phonegap-1.0.0.js"></script>
<script charset="utf-8" src="main.js"></script>
<script charset="utf-8" src="pdfviewer.js"></script>
<script charset="utf-8" src="downloader.js"></script>
</Head>

<body>
<h1> Hello World </ h1>
<a href = "#" 'sampleurf.pdf', true, downloadOkCallbak, downloadErCallbak) "> Download pdf </a> <br>
<a href="#" onclick="window.plugins.pdfViewer.showPdf('/sdcard/download/sample/samplesurf.pdf');"> open </a>
</body>
</html>
```

归功于[http://www.giovesoft.com/2011/08/download-and-open-pdf-with-phonegap.html](http://www.giovesoft.com/2011/08/download-and-open-pdf-with-phonegap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T10:41:17.873

使用文件打开器插件（[https://github.com/markeeftb/FileOpener](https://github.com/markeeftb/FileOpener)），但它需要一些 pdf 阅读器或办公室来阅读 psf 和 doc 文件。但首先我们必须安装这两个。然后使用这个插件打开 downloaderd 文件。但是这个插件只在本地存储而不是内部存储的情况下工作。[https://github.com/markeeftb/FileOpener](https://github.com/markeeftb/FileOpener)上的插件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T12:10:29.277

您可以使用 Cordova 的全局 FileOpener 插件。它用于打开所有类型的文件

> [http://plugins.cordova.io/#/package/fr.smile.cordova.fileopener](http://plugins.cordova.io/#/package/fr.smile.cordova.fileopener)

支持的扩展

该插件管理这些扩展：

.doc、.docx、.xls、.xlsx、.rtf、.wav、.gif、.jpg、.jpeg、.png、.txt、.mpg、.mpeg、.mpe、.mp4、.avi、.ods , .odt, .ppt, .pptx, .apk

它现在不支持 .pdf 扩展名。（2014 年 9 月 25 日）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-02T12:19:22.187

我见过的这个问题的一个不优雅但非常简单的解决方案是链接到 Google docs pdf 查看器服务； [https://docs.google.com/viewer?url=https://dl.dropboxusercontent.com/u/6731723/Beaver.pdf](https://docs.google.com/viewer?url=https://dl.dropboxusercontent.com/u/6731723/Beaver.pdf)

您当然必须使用[inappbrowser](http://docs.phonegap.com/en/3.3.0/cordova_inappbrowser_inappbrowser.md.html)链接到此页面，否则在 iOS 中，用户将无法退出 PDF 视图。****

# magento - 如何将 HTML 注入 Magento 1.4.0 插件？

> ID：13375237
> 
> 赞同：2
> 
> 时间：2012-11-14T08:25:08.027
> 
> 标签：magento, magento-1.4

我们正在编写一个将 HTML 代码注入商店页面的 Magento 扩展。我们目前正在挂钩`core_block_abstract_to_html_after`事件以注入我们的 HTML。

Magento 1.4.0 似乎不支持此事件，只有 1.4.1 及更高版本。

在 Magento 1.4.0 中将 HTML 注入所有商店页面（但不是管理页面）的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:00:31.040

所以你想在你的页面中添加谷歌分析代码。

您不需要任何代码来执行此操作，因为它是标准的 magento 功能。转到系统/配置/谷歌分析。您只需要激活功能并输入您的帐户 ID

顺便说一句，如果您真的想编写代码，则不需要观察者来执行此操作（尽管，可以使用观察者来完成）。您需要做的是 XML 布局更新：

```
<reference name="before_body_end">
    <block type="module/block" template="module/template.phtml" name="my.block" />
</reference> 
```

您的块将自动附加到您的身体标签的末尾

# iphone - 最大限度地减少本地化和 iPhone 4/5 的 xibs 种类

> ID：13375239
> 
> 赞同：0
> 
> 时间：2012-11-14T08:25:20.433
> 
> 标签：iphone, ios, localization, interface-builder, xib

正如我从官方消息中得知的那样，当我们本地化`xib`文件时，我们需要复制它们并在 Interface Builder 中替换已翻译的字符串。

为了支持 iPhone 的 4" 屏幕，我们需要制作`xib`高度为 586 像素的单独版本（我在没有相应视图控制器的情况下自动调整顶级视图时遇到了问题`xib`）。在这种情况下，在以后的更新中调整界面几乎是不可能的.

如何最小化这种多样性（完美到单个`xib`文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:32:53.443

1.  不要为每种语言使用额外的 xib，在代码中设置标签等（并使用 Localizable.strings 文件）

2.  了解如何在 xib 中使用布局约束来支持 3,5" 和 4" 显示器

我就是这样做的，而且有效

# jquery - jQueryUI选项卡：选择选项卡时清除其他选项卡的div

> ID：13375242
> 
> 赞同：1
> 
> 时间：2012-11-14T08:25:31.707
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我有一个页面，其中包含多个显示相似内容的选项卡，为了确保访问正确选项卡中的正确字段，我想在用户单击选项卡后立即清除其他选项卡的 div 内容。

这是我使用的代码：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>WebShop</title>
     <link rel="stylesheet" type="text/css" href="/includes/igepa.css" />
     <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
     <link rel="stylesheet" href="/resources/demos/style.css" />

    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>    

    <script>
    $(function() {
        $( "#tabs" ).tabs({
            beforeLoad: function( event, ui ) {
                ui.jqXHR.error(function() {
                    ui.panel.html(
                        "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                        "If this wouldn't be a demo." );
                });
            },
            load: function(event, ui){
               $('.ui-tabs-hide').empty();  
            }                          
        });
    });
    </script>
</head>
<body>

<div id="tabs">
    <ul>
        <li><a href="/itemStructPaper/Enveloppen">Enveloppen</a></li>
        <li><a href="/itemStructPaper/GrafischKarton">Grafisch karton</a></li>
    </ul>
</div>

</body>
</html> 
```

我在这里添加了一个示例：[http ://www.igepa.be/phdj/tabs/index.htm](http://www.igepa.be/phdj/tabs/index.htm)

page1.htm 和 page2.htm 都有一个带有相同字段但值不同的表单，但是当您选择第二页的选项卡时，您将获得第一页字段的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:33:38.400

您可以使用`ui`参数并引用其兄弟姐妹来执行此操作，如下所示：

```
 beforeLoad: function(event, ui){
      $(ui.panel).siblings('.ui-tabs-panel').empty();
    } 
```

**Update:** I've just updated my code above to just change `load` for `beforeLoad` event so the siblings tab contents are removed before the page of the current tab is executed.

# html - jQuery，Prepend data strips html标签，输出变得混乱

> ID：13375243
> 
> 赞同：1
> 
> 时间：2012-11-14T08:25:40.230
> 
> 标签：html, jquery

我有以下代码从 php 文档中检索一些文本：

```
$.get("server/test.php", function(data){
    $('#thumbdest').prepend(data);
    // $('#thumbdest').html(data);
}); 
```

注释行按预期返回所有内容，但`prepend`数据没有。插入时似乎会去除 HTML 标签。我不能使用注释行，因为我必须一个接一个地插入多个项目。按预期`$('#thumbdest').html(data);`替换 div 中的所有内容。`thumbdest`

下面是我在使用时应该得到的 HTML`prepend`

```
<tr>
    <td>
        <a href="#modal" class="thumbnail tableimg"  role="button" class="btn" data-toggle="modal">           
            <img src="assets/img/huvudbilder/thumbs/img.png" class="tableimg" alt="">
        </a>
    </td>
    <td>Test1</td>
    <td>Test2</td>                
</tr> 
```

这就是我真正从使用中得到的`prepend`

```
<a href="#modal" class="thumbnail tableimg"  role="button" class="btn" data-toggle="modal">
    <img src="assets/img/huvudbilder/thumbs/img.png" class="tableimg" alt="">
</a>
Test1
Test2 
```

这反过来又搞砸了整张桌子。所有表格元素都消失了，这是为什么呢？

编辑：在`alert(data)`前置后进行测试时，我得到以下信息：

```
<tr>
    <td>
        <a href="#editImage_1222866094" class="thumbnail tableimg"  role="button" class="btn" data-toggle="modal">

            <img src="assets/img/huvudbilder/thumbs/favicon32.png" class="tableimg" alt="">
        </a>
    </td>
    <td>Test1</td>
    <td>Test2</td>                     
</tr> 
```

的结构`#thumbdest`：

```
 <table class="table table-hover">
          <p>&nbsp;</p>
            <thead>
                <tr>
                    <th></th>
                    <th>Namn</th>
                    <th>Tid</th>
                </tr>
            </thead>
            <tbody id="thumbdest"></tbody>
            <tbody>
                <?php getImageList($conn); ?>
            </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:38:12.993

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Script Test</title>
    <script src="jquery.min.js"></script>
    <script>

    // example

        $(function() {
            $('.button').click(function(e) {
                e.preventDefault();
                var $mytext = "<a href=\"#\">Test</a>";
                    $("#key").prepend($mytext);

                });
        });

    </script>
</head>
<body>

    <a href="" class="button">Test</a>
    <div id="key"></div>

</body>
</html> 
```

在这里，`prepend()`按预期工作，而不是剥离标签。

**您需要做**的是将`<tbody>`内部放置`<div id="thumbdest">`，然后将以下脚本行从更改`$('#thumbdest').prepend(data);`为`$('#thumbdest tbody').prepend(data);`

来源：http: [//forum.jquery.com/topic/prepend-stripping-out-html-table-tags](http://forum.jquery.com/topic/prepend-stripping-out-html-table-tags)

# c++ - read() 调用总是返回 0 作为读取的字节数

> ID：13375245
> 
> 赞同：0
> 
> 时间：2012-11-14T08:25:42.697
> 
> 标签：c++, linux, ace

我有这种奇怪的情况，read(2) 系统调用总是返回读取为 0 的字节数。我知道当到达 EOF 或要读取的字节指定为 0 时会发生这种情况。我很确定没有在这种情况下，上述情况都是正确的。

这是可能有助于理解问题陈述的代码片段。

```
 po=ACE_OS::lseek(file_hand,-(offset+4),SEEK_CUR);
    cout<<"po:"<<po<<endl;
    cout<<"file_hand: "<<file_hand<<endl;
    // Read message number.
    if (!(nobr = ACE_OS::read(file_hand,(char*)buffer,1)))
    {
            cout << "errno " << errno << endl;
            cout<<"Failed to read the message number"<<endl;
            ERROR("%s", "Failed to read the message number");
            ACE_OS::close(file_hand);
            return 0;
    } 
```

fd以以下方式打开。file_hand = ACE_OS::open(getFullPathName().c_str(), O_RDONLY,ACE_DEFAULT_OPEN_PERMS);

# java - 在一个属性不存在后继续读取 XML

> ID：13375247
> 
> 赞同：1
> 
> 时间：2012-11-14T08:25:53.667
> 
> 标签：java, android, xml, try-catch

我有这个用于读取 XML 文件的代码：

```
try {

            File fXmlFile = new File(fullFilePath);
            DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                    .newInstance();
            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
            Document doc = dBuilder.parse(fXmlFile);
            doc.getDocumentElement().normalize();

            NodeList nList = doc.getElementsByTagName("task");

            for (int temp = 0; temp < nList.getLength(); temp++) {

                Node nNode = nList.item(temp);
                if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                    Element eElement = (Element) nNode;

                    int i = temp;

                    MyTasks.customers[i][11] = getTagValue("att1", eElement);
                    MyTasks.customers[i][12] = getTagValue("att8", eElement);
                    MyTasks.customers[i][13] = getTagValue("att2", eElement);
                    MyTasks.customers[i][14] = getTagValue("att7", eElement);
                    MyTasks.customers[i][15] = getTagValue("att3", eElement);
                    MyTasks.customers[i][16] = getTagValue("att4", eElement);
                    MyTasks.customers[i][18] = getTagValue("att5", eElement);
                    MyTasks.customers[i][19] = getTagValue("att6", eElement);
                    //ect
                }
            }
        } catch (Exception e) {
            CreateLog.addToLog("[ReadXML]" + e.toString());

        } 
```

发生错误后是否可以继续读取 XML 文件。如果一个属性不存在，则整个脚本将停止读取并捕获错误。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:29:51.103

有可能的。在内部添加一个`try-catch`语句`for-loop`，如果捕获异常，只需使用该`continue;`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:30:29.643

放入`try-catch`循环内。

```
 for (int temp = 0; temp < nList.getLength(); temp++) {
           try{
            Node nNode = nList.item(temp);
            if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                Element eElement = (Element) nNode;
                ...
            }
          }catch(Exception ex){...}
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:31:38.330

像这样的东西？

```
MyTasks.costumers[i][19] = callGetTagValue("x", eElement)

...

private callGetTagValue(String x, Object element){
try{
//foo
}catch(Exception e){
return "not found";
}
} 
```

这样你就不会丢失可用的数据，当你调用 continue 时就是这种情况；

编辑：例如，您也可以这样：

```
try{
     for (int temp = 0; temp < nList.getLength(); temp++) {

                Node nNode = nList.item(temp);
                if (nNode.getNodeType() == Node.ELEMENT_NODE) {

                    Element eElement = (Element) nNode;

                    int i = temp;

                    MyTasks.customers[i][11] = getTagValue("att1", eElement);
                    MyTasks.customers[i][12] = getTagValue("att8", eElement);
                    MyTasks.customers[i][13] = getTagValue("att2", eElement);
                    MyTasks.customers[i][14] = getTagValue("att7", eElement);
                    MyTasks.customers[i][15] = getTagValue("att3", eElement);
                    MyTasks.customers[i][16] = getTagValue("att4", eElement);
                    MyTasks.customers[i][18] = getTagValue("att5", eElement);
                    MyTasks.customers[i][19] = getTagValue("att6", eElement);
                    //ect
                }}catch(Exception e){
continue;
} 
```

但是当异常发生在

```
MyTasks.customers[i][13] = getTagValue("att2", eElement); 
```

您将不会收到其余数据

# javascript - 根据内部宽度显示脚本 - 没有“潜在危险的 request.form”

> ID：13375248
> 
> 赞同：1
> 
> 时间：2012-11-14T08:25:55.393
> 
> 标签：javascript, jquery, asp.net, xss, validate-request

**我想要的是：**

我有一种情况，我想在我的网站上展示联属网络营销广告。这些基本上是javascript，其中包含内容。由于我的网站采用响应式设计，我想根据 jQuery 的 innerwidth 属性加载不同的广告。总结一下：我想根据 innerwidth 属性加载不同的 javascript。

**我做了什么：**

我在隐藏字段中加载了两种不同的 javascript，并根据内部宽度，使用 div.html() 命令显示其中一种。但是，这会在用户提交帖子时出现“潜在危险的 request.form”错误（ASP.NET 对 XSS 的防御），因为加载的内容具有危险字符，这是有道理的。

我可以在所有页面上都说“ValidateRequest=false”，但这是一个可怕的解决方案，会引发很多安全问题。

**我的想法...**

最好的方法是从服务器端加载广告，但我们不知道这里的浏览器宽度。从我能够阅读的内容来看，似乎很难/不可能在 page_load 处获得内部宽度值。

但我想在不提出潜在危险请求的情况下加载我的广告。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:10:46.673

我最终得到的解决方案是在 Page_Load 将 HTML 设置为不可见的 div、DivA 和 DivB。

然后，在 JavaScript 中，根据 innerwidth 属性（以及 resize 事件），我可以将 div 设置为可见/不可见。

与我尝试做的相比，非常简单的解决方案。是的，它提供了更多呈现的 HTML，但至少它可以工作并且速度很快。

# grails - Grails 2.0.3多数据源gorm新实例不保存

> ID：13375249
> 
> 赞同：2
> 
> 时间：2012-11-14T08:26:14.920
> 
> 标签：grails, datasource

我创建一个具有多个数据源的应用程序。我在控制器中使用 before 方法来了解使用哪个数据源。我在变量中保留数据源的前缀以根据数据源动态使用它当我在对象或对象列表中检索时没有问题：示例

```
def P = Person.class
def onePerson = p."${varPrefix}".list().get(0) 
```

但是当我尝试创建新对象来保存它时：

```
def p = new Person()
p.nom = "jean"
p.renom = "dujardin"
p."${varPrefix}".save(failOnError:true, flush:true) 
```

我有一个错误，说我的数据库中没有表“Person”

所以我试试这个

```
def p = Person.class
p.nom = "jean"
p.renom = "dujardin"
p."${varPrefix}".save(failOnError:true, flush:true) 
```

then I have another error which said Person have no property nom solution: nom, prenom etc..

I do not find any solution in the web. According to grails documentation namespace strategy should work but it doesn't

# magento - Magento：使用 Authorize.net 网关检索付款信息

> ID：13375250
> 
> 赞同：1
> 
> 时间：2012-11-14T08:26:15.940
> 
> 标签：magento, magento-1.7

我在基于 magento 的购物车中使用 Authorize.net 支付网关。它是仅授权，这意味着我首先对卡进行授权，然后在将产品运送给客户后，我会获取金额。

授权 paygate 以序列化形式将 cc_exp_month、cc_exp_year 等信息存储在表 sales_flat_order_payment 的“additional_information”字段中。

magento 中是否有任何方法可以从附加信息列中简单地检索这些值（cc_exp_month，cc_exp_year）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:58:25.510

我相信接下来的两行会成功：

```
$ccExpMonth = $order->getPayment()->getAdditionalInformation('cc_exp_month');
$ccExpYear = $order->getPayment()->getAdditionalInformation('cc_exp_year'); 
```

当然 $order 是 Mage_Sales_Model_Order 的实例。

作为参考，您还可以查看：[如何获取 Magento 的付款信息？](https://stackoverflow.com/questions/4669099/how-to-get-payment-information-on-magento)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T17:46:29.273

magento 中是否有任何方法可以从附加信息列中简单地检索这些值（cc_exp_month，cc_exp_year）？

不，没有。您需要深入了解 additional_information 数组。这是我添加的用于检索 cc_type 值的方法。它可以很容易地调整为返回所有数据或只是另一部分：

```
public function getCcType(Mage_Sales_Model_Order_Payment $payment)
{
    if(count($payment->getAdditionalInformation()))
    {
        foreach($payment->getAdditionalInformation() as $auth_cards)
        {
            foreach($auth_cards as $ac_id)
            {
                if(isset($ac_id['cc_type']))
                {
                    return $ac_id['cc_type'];
                }
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:09:43.133

尝试

```
$order_id = 113
$order = Mage::getModel('sales/order')->load($order_id); 
```

如果存储信息 cc_exp_month 和 cc_exp_year

```
$ccExpMonth = $order->getPayment()->getCcExpMonth();
$ccExpYear = $order->getPayment()->getCcExpYear(); 
```

如果信息存储在附加信息中

```
$ccExpMonth = $order->getPayment()->getAdditionalInformation('cc_exp_month');
$ccExpYear = $order->getPayment()->getAdditionalInformation('cc_exp_year'); 
```

# javascript - 更改视图框后使对象居中

> ID：13375252
> 
> 赞同：0
> 
> 时间：2012-11-14T08:26:24.567
> 
> 标签：javascript, raphael, viewbox

我正在使用 Raphael 构建一个类似地图的站点。平移和缩放时，我希望一些对象位于中间，因为我需要知道当前视图框（而不是纸张）的中间位置在哪里。经过大量操作后，我如何知道纸张视图框的中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:44:22.910

可以通过将视图框的宽度和高度除以 2 并添加 x/y 偏移量来计算视图框的中心。

```
//  viewbox x + half viewbox width
var vx = (paper._viewBox[0] + (paper._viewBox[2] / 2))

// viewbox y + half viewbox height
var vy = (paper._viewBox[1] + (paper._viewBox[3] / 2)) 
```

# c++ - 指针算法和可移植性

> ID：13375259
> 
> 赞同：2
> 
> 时间：2012-11-14T08:26:54.050
> 
> 标签：c++, pointers, embedded, pointer-arithmetic

我正在编写一个应用程序，我不得不做一些指针算术。然而，这个应用程序将在不同的架构上运行！我不确定这是否会有问题，但在阅读[了这篇文章](http://www.codeproject.com/Articles/6262/Pointer-Arithmetic-and-Portable-Code)后，我认为我必须改变它。

这是我不太喜欢的原始代码：

```
class Frame{
  /* ... */
protected:
  const u_char* const m_pLayerHeader; // Where header of this layer starts
  int m_iHeaderLength;                // Length of the header of this layer
  int m_iFrameLength;                 // Header + payloads length
};

/**
 * Get the pointer to the payload of the current layer
 * @return A pointer to the payload of the current layer
 */
const u_char* Frame::getPayload() const
{
  // FIXME : Pointer arithmetic, portability!
  return m_pLayerHeader + m_iHeaderLength;
} 
```

很糟糕是不是！向指针添加`int`值！`u_char`但后来我改成这样：

```
const u_char* Frame::getPayload() const
{
  return &m_pLayerHeader[m_iHeaderLength];
} 
```

我想现在，编译器能说多少就跳转了！对？对数组的操作是否`[]`被视为指针算术？它是否解决了便携性问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T08:41:07.157

`p + i`和是指针和整数类型的值`&p[i]`时的同义词。这么多，你甚至可以写，它仍然有效（就像你可以写一样）。`p``i``&i[p]``i + p`

您链接的示例中的可移植性问题来自`sizeof(int)`不同平台。您的代码很好，假设`m_iHeaderLength`是`u_char`您要跳过的 s 数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:30:00.880

在您的代码中，您将 m_pLayerHeader 推进 m_iHeaderLength u_chars。只要写入您指向的数据的任何内容都具有相同的 u_char 大小，并且 i_HeaderLength 是您安全的标题区域中的 u_char 数。

但是如果`m_iHeaderLength`真的指的是字节，而不是 u_chars，那么如果`m_iHeaderLength`应该将指针推进到除 char 之外的其他类型之外，您可能会遇到问题。

假设您正在将数据从 16 位系统发送到 32 位系统，您的标头区域是这样定义的

```
struct Header {
    int something;
    int somethingElse;
}; 
```

假设这只是 struct Frame 定义的全部消息的一部分。

在 32 位机器上，您将数据写入 16 位机器将从中读取的端口。

```
port->write(myPacket, sizeof(Frame)); 
```

在 16 位机器上，您具有相同的 Header 定义，并尝试读取信息。

```
port->read(packetBuffer, sizeof(Frame)); 
```

您已经遇到了麻烦，因为您尝试读取的数据量是发件人写入的数据量的两倍。在 16 位机器上进行读取的 int 大小为 2，而 header 的大小为 4。但是发送机器上的报头大小是 8，每个 4 字节的两个整数。

现在你试图推进你的指针

```
m_iHeaderLength = sizeof(Header);
...
packetBuffer += m_iHeaderLength; 
```

`packetBuffer`仍将指向从始发者发送的帧中的标头中的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:36:15.333

*如果*存在可移植性问题，那么不，那不会解决它。`m_pLayerHeader + m_iHeaderLength`并且`&m_pLayerHeader[m_iHeaderLength]`是完全等价的（在这种情况下）。

# ruby-on-rails - RoR：使用 Bitly 搜索和缩短评论中的所有链接

> ID：13375269
> 
> 赞同：1
> 
> 时间：2012-11-14T08:27:23.497
> 
> 标签：ruby-on-rails, hyperlink, url-shortener

新手问题再次...我已经有以下代码用于使用 Bitly 缩短链接。

```
def bitly_links(url)                                     
 bitly ||= begin                                            
  Bitly.use_api_version_3                                     
  Bitly.new('username', 'key')
  bitly.shorten(url)
 end
end 
```

这次我想做的是在评论创建后搜索并缩短评论中的所有链接。这类似于这篇博客文章**[Using bitly in rails 3](http://tedhealey.blogspot.com/2011/01/using-bitly-in-rails-3.html)**，但发现它有点混乱，因为使用**for**循环而不是**do** ... **end**块。另外，我注意到该方法甚至没有被调用。

**网站上的示例评论：**

> 嘿，你应该看看这个帖子[http://vox4life.blogspot.com/2012/11/4Life-2012-Growth-is-strong.html](http://vox4life.blogspot.com/2012/11/4Life-2012-Growth-is-strong.html)和这个.. [http://vox4life.blogspot.com/2012/ 11/dengue-outbreak-peoples-journal.html](http://vox4life.blogspot.com/2012/11/dengue-outbreak-peoples-journal.html)还有这个 [http://vox4life.blogspot.com/2012/02/transfer-factor-immunotherapy.html](http://vox4life.blogspot.com/2012/02/transfer-factor-immunotherapy.html)

**会变成：**

> 嘿，你应该看看这个帖子[http://bit.ly/ZHdLTa](http://bit.ly/ZHdLTa)和这个.. [http://bit.ly/TZ6Nrj](http://bit.ly/TZ6Nrj)还有这个[http://bit.ly/ZrnWMj](http://bit.ly/ZrnWMj)

先感谢您。

*[与此类似的问题](https://stackoverflow.com/questions/13295076/detect-and-shorten-all-urls-in-string)，但在 Java 中*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:08:06.590

如果您不想要 for 循环，我想您可以修改该方法。我认为正文是带有 URL 的整个文本。

```
def bitly_body(body)
    matches = body.scan(/((http|https):\/\/(\&|\=|\_|\?|\w|\.|\d|\/|-)+(:\d+(\&|\=|\?|\w|\.|\d|\/|-)+)?)/)
    Bitly.use_api_version_3

    bitly = Bitly.new("thealey", "bitly_api_key")

    (0..matches.length).each do |i|    # <-- changed here.
      if matches[i].to_s.size > 0
        logger.info("url " + matches[i][0])
        if matches[i][0].include? "bit.ly"
          logger.info("already a bitly url " + matches[i][0])
        else
          u = bitly.shorten(matches[i][0])
          body[matches[i][0]] = u.short_url
        end
      end
    end
    body
end 
```

# ios6 - 如何在 iOS 6 上更改方向之前关闭弹出框？

> ID：13375275
> 
> 赞同：3
> 
> 时间：2012-11-14T08:28:06.287
> 
> 标签：ios6, orientation, popover, dismiss

有没有人知道如何在 iOS 6 上更改方向**之前**关闭弹出框。我尝试了以下方法：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    if ([self.popoverController isPopoverVisible]) {
        [self.popoverController dismissPopoverAnimated:NO];
    }
} 
```

但这对我不起作用。旋转后弹出框仍然存在。

```
- (BOOL) shouldAutoRotate 
```

在我的 viewController 中没有调用，因为它在 SplitViewController 和 NavController 中。我读过我可以从这个容器子类化来转发 shouldAutorotate，但由于不同的原因我不想这样做。我不想在orientationchange（在didRotateFrom ...）之后关闭popover，因为它很难看。

你有什么想法，我怎么能在 iOS 6 上的方向改变之前关闭弹出框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T23:23:22.870

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(deviceOrientationDidChange:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil]; 
```

一旦旋转确实发生了变化，这将执行此操作，然后您可以在设备方向上执行您想要的操作。否则你需要监听视图控制器并在那里发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T07:14:59.157

尝试这个

```
- (void)viewDidLayoutSubviews
{
    [popOverController dismissPopoverAnimated:YES];
} 
```

# sql-server - SQL Server：模拟全文搜索 - 进行类似搜索的其他方法

> ID：13375278
> 
> 赞同：2
> 
> 时间：2012-11-14T08:28:19.350
> 
> 标签：sql-server, full-text-search

我创建了全文目录并尝试创建全文索引，但是我尝试过的任何方法都失败了。好吧，我联系了我的网络托管支持以寻求帮助，并了解到他们尚未安装该功能。

现在我应该以某种方式模拟全文搜索。我想要做的是，在文本中搜索多个单词。我知道一些方法来做到这一点，但性能是我关心的。

```
select * 
from messages 
where msgbody like '%word1%' 
  and msgbody like '%word2%' 
  and ... 
  and msgbody like '%wordn%' 
```

我想到的另一种方法（因为我的搜索只有`and`type 而没有`or`）是搜索一个单词，然后在第一次搜索的结果中搜索第二个单词，在第二次搜索的结果中搜索第三个单词，依此类推。但这看起来也不是一个好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:43:08.373

如果您决定*不*找到新的主机（不要怪罪您），您可以使用类似`String.Split()`给您一个数组的方法（拆分空格字符）。然后，您会将所有这些字符串添加到“单词”表或类似的东西中。建立一个单一的“单词”表和一个链接表会更合适，如下所示：

```
create table TheWords
    (
    TheWord NVARCHAR(32) NOT NULL ,
        CONSTRAINT PKC_TheWords
        PRIMARY KEY CLUSTERED ( TheWord ) ,
    TheWordID INT IDENTITY (1,1) NOT NULL
    )

create table WordsInMsgBody
    (
    MsgBodyID INT NOT NULL ,
        CONSTRAINT FK_MsgBodyID@WordsInBody
        FOREIGN KEY ( MsgBodyID )
        REFERENCES dbo.MsgBody ( MsgBodyID ) ,
    TheWordID INT NOT NULL ,
        CONSTRAINT FK_TheWordID@WordsInBody
        FOREIGN KEY ( TheWordID )
        REFERENCES dbo.TheWords ( TheWordID ) ,
        CONSTRAINT PKC_WordsInBody
        PRIMARY KEY CLUSTERED ( MsgBodyID , TheWordID )
    ) 
```

*如果您对消息中包含多少*特定单词感兴趣，可以省略最后一个约束 ( PKC_WordsInBody ) 。如果不是，请将其设为主键并仅将单词的单个实例插入链接表。

但是，您将不得不做一些工作来实现这一点 - 解析消息正文，插入以前从未见过的单词，并将记录插入链接表中需要工作。

# solr - 无法获得突出显示的 Solr 响应

> ID：13375280
> 
> 赞同：3
> 
> 时间：2012-11-14T08:28:20.927
> 
> 标签：solr, highlighting

我正在使用 Solr 示例服务器进行调查。在将所有缓存的文档（主要是 html 文件）提供给它之后，除了突出显示部分之外，它工作正常。

我使用的请求 URL 如下，

```
http://localhost:8983/solr/collection1/select?q=keyword&wt=xml&hl=true 
```

XML响应如下，

```
<response>
<lst name="responseHeader">...</lst>
<result name="response" numFound="371" start="0">
    <doc>
        <arr name="links">
            <str>rect</str>
            <str>FJU_KDJFJJ_DJ_13</str>
        </arr>
        <str name="id">
            F:\SkyDrive\funproj\cache\adfadf\asdff.htm
        </str>
        <arr name="title">
            <str>asdff.htm</str>
        </arr>
        <arr name="content_type">
            <str>text/html; charset=ISO-8859-1</str>
        </arr>
        <str name="resourcename">
            F:\SkyDrive\funproj\cache\adfadf\asdff.htm
        </str>
        <arr name="content">
            <str>...</str>
        </arr>
        <long name="_version_">1418589758873927680</long>
    </doc>
    <doc>...</doc>
</result>
<lst name="highlighting">
    <lst name="F:\SkyDrive\funproj\cache\adfadf\asdff.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\cvzcv\c58053e10vq.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\hgdfhdfgh\c00302e10vq.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\asdfasdf\c00945e10vq.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\hjmyukt\asfdf06113002_03312010.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\nmvbmnm\saf0q033111.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\lkiullkl\a10-5974_110q.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\jhlhjkl\fdfinal.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\vcbxcbvcx\zynex10q33110_5132010.htm"/>
    <lst name="F:\SkyDrive\funproj\cache\yuiuiou\v185403_10q.htm"/>
</lst>
</response> 
```

响应，无论是 JSON 还是 XML，**根本没有**高亮部分。我已经在本地文件系统和示例服务器的管理页面中检查了 solrconfig.xml。突出显示是默认开启的，并且前/后设置为“ **”/“** ”。示例搜索门户本身可以正常工作，并在其结果中突出显示。但由于它不是 AJAX，我无法通过 chrome 检查其结果。

我做错什么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T18:14:50.453

您必须定义`hl.fl`需要突出显示的字段。例如，如果要搜索并突出显示`content`字段中的匹配项，可以使用以下查询：

```
http://localhost:8983/solr/collection1/select?q=content:keyword&wt=xml&hl=true&hl.q=content:keyword&hl.fl=content 
```

默认情况下，突出显示响应仅返回一个片段，即使您的字段有多个命中。此外，snippet(fragsize) 的长度默认设置为 100 个字符。

您可以使用`hl.snippets`和`hl.fragsize`修改它们。

例如，要修改**fragsize**：

```
http://localhost:8983/solr/collection1/select?q=content:keyword&wt=xml&hl=true&hl.q=content:keyword&hl.fl=content&hl.fragsize=5000 
```

通过`hl.fragsize=0`将使fragsize无限。

对于更改**片段**数量：

```
http://localhost:8983/solr/collection1/select?q=content:keyword&wt=xml&hl=true&hl.q=content:keyword&hl.fl=content&hl.snippets=10 
```

有关更多参数，请参阅[solr wiki](http://wiki.apache.org/solr/HighlightingParameters)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:39:27.367

您需要添加需要启用突出显示的字段[hl.fl。](http://wiki.apache.org/solr/HighlightingParameters#hl.fl)
参数的默认值为空白。

# c - 内联函数与宏函数

> ID：13375288
> 
> 赞同：25
> 
> 时间：2012-11-14T08:28:59.973
> 
> 标签：c, macros, inline

> **可能重复：**
> [内联函数与预处理器宏](https://stackoverflow.com/questions/1137575/inline-functions-vs-preprocessor-macros)

我想知道内联函数和宏函数的区别。

1）内联函数和宏函数一样吗？

2）我知道两者都没有被调用，但它们在编译阶段被其代码替换。不是？

3）如果有区别，你能指定吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-14T08:36:10.847

内联用函数的主体替换对函数的调用，但是，内联只是对编译器的一个可以被忽略的*请求*（您仍然可以将一些标志传递给编译器以强制内联或使用带有 gcc 的*always_inline*属性）。

另一方面，宏在编译之前由*预处理器*扩展，所以它就像文本替换一样，宏也不是类型检查，内联函数是。[维基](http://en.wikipedia.org/wiki/Inline_function#Comparison_with_macros)上有一个比较。

为了完整起见，您仍然可以使用宏具有某种类型的安全性，`__typeof__`例如使用 gcc，以下代码生成几乎相同的代码，并且如果与错误的类型一起使用都会导致警告：

```
#define max(a,b) \
  ({ __typeof__ (a) _a = (a); \
      __typeof__ (b) _b = (b); \
    _a > _b ? _a : _b; })

__attribute__((always_inline)) int max(int a, int b) {
   return (a > b ? a : b);
} 
```

注意：有时无类型宏正是我们所需要的，例如，看看[uthash](https://troydhanson.github.io/uthash/)如何使用宏使任何 C 结构可散列化，而无需借助强制转换。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-11-14T09:04:29.453

1) 没有。

2) C 中的宏只是在编译器处理源代码*之前展开的文本。*inline 关键字用作对编译器的提示，即该函数可以内联放置，而无需设置调用堆栈。

因此，例如，假设您有以下两个代码片段（首先是宏，然后是内联函数）：

```
#define MAX(x,y)     (x > y ? x : y) 
```

和

```
inline int max(int x, int y) { return x > y ? x : y; } 
```

当预处理器在您的代码中发现以下调用时：

```
int highest = MAX (var_1, var_2); 
```

它用

```
int highest = (var_1 > var_2 ? var_1 : var_2); 
```

以上是编译器在编译过程中最终得到的结果，因此由 MAX(x,y) 定义的代码段是 MAX(var_1, var_2) 的*替换*。当编译器发现函数调用时

```
int highest = max (var_1, var_2); 
```

然后函数“max”被调用。您必须假设它以正常方式被调用，因为编译器可以自由地忽略您的“内联”提示并使对函数的调用通过正常的调用堆栈，而不是简单地将函数的代码放在它所在的位置遭遇。

宏的最后一个警告：因为它是所有文本替换而不是代码替换，如果您执行以下操作：

```
int highest = MAX (v1++, v2++); 
```

预处理器会将其扩展为：

```
int highest = (v1++ > v2++ ? v1++ : v2++); 
```

这可能不是你想要的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-14T08:40:47.203

*宏是由预处理器（在实际编译*之前）替换的声明，它们根本不是函数。在实际*编译*阶段开始之前，宏早已不复存在，剩下的就是它们的扩展（包括扩展为空）。

事实上，内联函数是符合语言的*函数*，具有范围规则、变量声明、逻辑构造（循环等）等等。内联函数不像宏那样在预编译步骤中扩展。它们像常规代码一样被*编译*，但随后可以注入（因为没有更好的术语）到编译后的代码中并根据需要进行优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T08:38:33.040

否`inline`与`macro`定义不同，因为宏是预处理的，但内联只是指示编译器将函数的整个主体放在调用它的位置。

将 inline 关键字放在任何函数定义之前只是指示或请求，编译器可以自由选择是使该函数内联还是保持正常

宏替换：（`preprocessing phase`即编译前）

`test.c`--在linux中输入文件结果文件`test.i`

内联替换：`compilation phase`

# c - 冒泡排序错误。输入错误

> ID：13375289
> 
> 赞同：2
> 
> 时间：2012-11-14T08:29:14.077
> 
> 标签：c, sorting

我有以下来源，当我执行它时，值的符号会发生变化。我无法找出我哪里出错了。任何建议都有帮助

**代码**

```
#include <stdio.h>
#include <stdlib.h>
int arrsort(int *arr, int size);
int display(int *arr, int size);

int main()
{
    int s_o_1=0, s_o_2=0;
    int i; //index for arrays
    int a[s_o_1],b[s_o_2];

    printf("enter the size of the first array\n");
    scanf("%d",&s_o_1);

    printf("Enter the values of the first array\n");
    for (i=0;i<s_o_1;i++)
    {
        scanf("%d",&a[i]);
    }

    printf("enter the size of the second array\n");
    scanf("%d",&s_o_2);

    printf("Enter the values of the second array\n");
    for (i=0;i<s_o_2;i++)
    {
        scanf("%d",&b[i]);
    }

    //sort the first array

    arrsort(a,s_o_1);
    printf("The sorted first array is\n");
    display(a,s_o_1);

    //sort the second array

    arrsort(b,s_o_2);
    printf("The sorted second array is\n");
    display(b,s_o_2);

}

int arrsort(int *arr, int size)
{
    int temp; //for holding the temp value
    int i; //for indexing
    int j;

    for(j=0;j<size;j++)
    {
        for(i=0;i<size;i++)
        {
            if(arr[i]>arr[i+1])
            {
            temp=arr[i];
            arr[i]=arr[i+1];
            arr[i+1]=temp;
            }
        }   
    }
}

int display(int *arr, int size)
{
    int i; //array index
    for (i=0;i<size;i++)
    {
        printf("%d\t",i);

    }
    printf("\n");
    for (i=0;i<size;i++)
    {
        printf("%d\t",arr[i]);
    }
    printf("\n");
} 
```

**输出**

```
enter the size of the first array
5
Enter the values of the first array
1 5 -10 -15 3
enter the size of the second array
5
Enter the values of the second array
-3 -5 15 9 10
The sorted first array is
0   1   2   3   4   
-15 -10 3   5   10  
The sorted second array is
0   1   2   3   4   
-15 -10 -5  -3  9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:33:21.493

问题是数组声明：

```
int s_o_1=0, s_o_2=0;
int i; //index for arrays
int a[s_o_1],b[s_o_2]; 
```

数组可能以大小 0 声明。要么以适当的最大大小声明，要么在读取数组的大小后声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:33:41.243

您的代码具有未定义的行为。在这一行：

```
int a[s_o_1],b[s_o_2]; 
```

它声明大小为零的数组。稍后获取 s_o_1 和 s_o_2 的值时，数组大小不会改变。所以你所有的读写都会导致未定义的行为。

C 标准要求数组的长度应为非零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:38:32.853

您保留内存的方式不正确`int a[s_o_1],b[s_o_2];`

您必须使用`int *a, *b;`and 稍后`scanf("%d",&s_o_1);`需要执行类似`a = (int*)malloc(sizeof(int)*s_o_1);` 的操作 为 b 分配内存。

冒泡排序算法也应该像下面这样

```
 for(j=0;j<size - 1;j++)
    {
        for(i=j + 1;i<size;i++)
        {
            if(arr[i]>arr[j])
            {
            temp=arr[i];
            arr[i]=arr[j];
            arr[j]=temp;
            }
        }   
    } 
```

# ios - UIBarButtonItem tintColor iOS4

> ID：13375291
> 
> 赞同：2
> 
> 时间：2012-11-14T08:29:23.310
> 
> 标签：ios, cocoa-touch, ios4

我正在使用以下代码创建 UIBarButtonItem：

```
UIBarButtonItem* searchBarButton = [[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"search_picto"] style:UIBarButtonItemStyleBordered target:self action:@selector(actionSearch:)] autorelease];
searchBarButton.tintColor = [UIColor colorWithRed:0.27 green:0.60 blue:0.20 alpha:1.00]; 
```

我将这个和另一个按钮添加到 UIToolbar，不确定这是否相关。这很好用，给了我想要的外观：

![UIButtonBarItem 截图](../Images/473c2854df84797db5c642d3f70e7994.png)

问题是使用 iOS 4（我必须支持）我无法设置 tintColor。无法识别的选择器。如何为 iOS 4 创建这样的按钮？我需要能够设置 tintColor 并拥有 UIBarButtonItemStyleBordered。

谢谢你的帮助。

* * *

我让它像这样工作：

```
UISegmentedControl* searchButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"", nil]];
[searchButton setImage:[UIImage imageNamed:@"search_picto"] forSegmentAtIndex:0];
searchButton.momentary = YES;
searchButton.segmentedControlStyle = UISegmentedControlStyleBar;
searchButton.tintColor = [DELEGATE.config getColor:IFXShopConfigScopeShop name:@"navigationTint"];
[searchButton addTarget:self action:@selector(actionSearch:) forControlEvents:UIControlEventValueChanged]; 
```

你必须用一个空的 NSString 来初始化它，否则你不能设置一个图像。addTarget 也必须使用`UIControlEventValueChanged`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:34:45.950

`tintColor`是在 iOS5 中添加的，对于 iOS4[在这里](http://charles.lescampeurs.org/2011/02/10/tint-color-uibutton-and-uibarbuttonitem)你有一个解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:36:15.503

您需要创建一个`UIButton`并自己绘制按钮使其看起来像这样，或者使用它设置背景图像并`UIBarButtonItem`使用自定义视图（您的`UIButton`）初始化。

PS 从 iOS6 版本开始，您无法再编译为 armv6，您可以支持的最低版本是 4.3，在我看来这不值得...

# css - Firefox 和 Chrome 的保证金值

> ID：13375292
> 
> 赞同：0
> 
> 时间：2012-11-14T08:29:24.203
> 
> 标签：css, internet-explorer, firefox, google-chrome, margin

我有以下页面

```
http://www.javaexperience.com/java-externalizable-vs-serializable-interfaces/ 
```

最右边的提示部分在 Firefox 中运行良好，但在 Chrome 和 IE 中超出了可视区域。目前左边距值设置为 1290px。如果我将其更改为 1150px，那么它会在 Chrome 和 IE 中得到修复，但会导致 Firefox 渲染出现问题。

是否有任何可用的修复程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:26:07.007

不是在 上提供较大的边距`<div id="tips">`，而是将 附加`<div id="tips">`到父容器，即相应地`<div id="contents-b">`调整同级容器的宽度。

所以，

```
<div id="contents-b">
    <div id="content-b">
        <!-- CONTENT -->
    </div>
    <div id="sidebar">
        <!-- sidebar CONTENT -->
    </div>
    <div id="tips">
        <!-- TIPS CONTENT -->
    </div>
</div> 
```

和CSS之类的

```
#contents-b {
    width:100%;
}

#content-b {
    display: inline-block;
    width:50%;
}
#sidebar {
    display: inline-block;
    width:30%;
}
#tips {
    display: inline-block;
    width:20%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-05T06:34:41.653

**Firefox 的保证金 css Hack**

**它适用于 Chrome 和所有其他**

```
 .inbox_notify span {
    background: #f30 none repeat scroll 0 0;
    border-radius: 50%;
    color: #fff;
    font-size: 10px;
    line-height: 14px;
    margin: -33px 0px 0px 32px;
    padding: 2px;
    position: absolute;
    text-align: center;
    min-width: 17px
} 
```

**对于火狐**

```
@-moz-document url-prefix() {
    .inbox_notify span {
        margin: -6px 0px 0px 0px;
    }
} 
```

# excel - 跨两个工作表的 VLOOKUP（带有 IF？）

> ID：13375294
> 
> 赞同：2
> 
> 时间：2012-11-14T08:29:28.460
> 
> 标签：excel, excel-formula

对单元格执行简单`VLOOKUP`操作以从另一个工作表返回日期，如下所示

`=VLOOKUP(A46,'ECA AW12'!B92:AO133,15, 0)`

本质上，查找单元格 A46，并`B92:AO133`在工作表 ECA AW12 上对其进行检查，如果为真，则在表的同一行中返回单元格 15 的值作为匹配项

但是……如果 A46 不在该工作表上怎么办？它可以出现在两个电子表格之一中。

我想在逻辑上解决它，需要一个函数来搜索第一个电子表格中的值，如果它不存在，则`VLOOKUP`在第二张表上执行。

任何帮助是极大的赞赏，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:33:04.170

因此，您正在寻找`ISERROR`与`IF`.

看起来像这样

```
=IF(ISERROR(VLOOKUP(A46,'ECA AW12'!B92:AO133,15, 0)),        
    VLOOKUP(A46,'OtherWorksheet'!B92:AO133,15, 0),
    VLOOKUP(A46,'ECA AW12'!B92:AO133,15, 0), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:38:53.883

您可以先测试 A46 是否确实存在于 中，`'ECA AW12'!B92:AO133`然后决定是在此页面上搜索还是回退到第二个页面。最简单的方法是使用该`MATCH`函数在原始数组中查找值，并测试`ISERROR`是否确实找到了它。如果`MATCH`返回错误，则`VLOOKUP`在另一个工作表中，如果不是，则`VLOOKUP`在原始工作表中。

```
=IF(ISERROR(MATCH(A46,`'ECA AW12'!B92:AO133`,0)),VLOOKUP(A46,'OTHER SHEET'!B92:AO133,15, 0),VLOOKUP(A46,'ECA AW12'!B92:AO133,15, 0)) 
```

# c# - WinSCP .NET 程序集：在哪里定义代理？

> ID：13375300
> 
> 赞同：8
> 
> 时间：2012-11-14T08:30:03.947
> 
> 标签：c#, proxy, ftp, winscp, winscp-net

我可以使用 WinSCP GUI 定义代理服务器。如果我这样做，我可以连接到远程主机。但是在代码中我找不到为 WinSCP 声明代理服务器的方法。

在这种情况下，我收到

> 远程服务器返回错误 (407) 需要代理身份验证。

我的代码：

```
SessionOptions sessionOptions = new SessionOptions
   {
       Protocol = protocol,
       HostName = hostname,
       UserName = user,
       Password = pass,
       PortNumber = portnumber
   };

using (Session session = new Session())
{
    session.ExecutablePath = @"C:\Program Files (x86)\WinSCP\WinSCP.exe";
    session.Open(sessionOptions);

    TransferOptions options = new TransferOptions();
    options.FileMask = mask;

    SynchronizationResult synchronizationResult;
    synchronizationResult =
        session.SynchronizeDirectories(mode, local, path, deletefiles, options: options);

    synchronizationResult.Check();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T13:45:02.823

使用[`SessionOptions.AddRawSettings`](https://winscp.net/eng/docs/library_sessionoptions_addrawsettings)配置适合您的代理类型的原始会话设置。

例如：

```
sessionOptions.AddRawSettings("ProxyMethod", "3");
sessionOptions.AddRawSettings("ProxyHost", "proxy"); 
```

[查看原始会话设置](https://winscp.net/eng/docs/rawsettings)的完整列表。

* * *

虽然更简单的方法是在 WinSCP GUI 中[配置代理](https://winscp.net/eng/docs/ui_login_proxy)并让它为您[生成代码模板](https://winscp.net/eng/docs/ui_generateurl#code)。

# python - Python中键是整数对的字典

> ID：13375301
> 
> 赞同：13
> 
> 时间：2012-11-14T08:30:10.560
> 
> 标签：python, string, performance, dictionary, tuples

如何在 Python 中创建一个字典，其中键是整数对？

例如，如果我这样做：

```
mydict=dict()
mydict[ [1,2] ] = 'xxx' 
```

我得到错误`TypeError: unhashable type: 'list'`

所以我想出了两种不同的解决方案：字符串或元组作为键。

第一个解决方案似乎将整数对转换为字符串表示形式：

```
mydict=dict()
mydict[ str(1)+" "+str(2) ] = 'xxx' 
```

而第二种解决方案涉及元组：

```
mydict=dict()
mydict[ tuple([1,2]) ] = 'xxx' 
```

从一些实验中，我发现元组解决方案比字符串解决方案慢。有没有更有效和快速的方法来使用简单的两个整数作为键？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T08:31:35.863

# java - 在 jPanel 上绘制并获取绘制的内容

> ID：13375304
> 
> 赞同：0
> 
> 时间：2012-11-14T08:30:19.327
> 
> 标签：java, swing, networking, graphics, jpanel

我目前正在从事专注于协作绘图应用程序的项目。

我想要做的是当我在我身边绘制一些东西（在 jPanel 上绘制）时，当我按下发送按钮时，通过网络将绘制的内容发送到另一台机器。

绘图部分已经完成。有什么方法可以获取内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:38:19.123

您只需调用 Panel 的 paint 方法，传递您自己的图形并将其转换为图像。

已经回答了：[Convert JPanel to image](https://stackoverflow.com/questions/1349220/convert-jpanel-to-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:29:38.927

您可以绘制到后备缓冲区（例如`BufferedImage`），然后将其绘制到您的窗格中，`BufferedImage`然后可以将其传递给网络上的任何其他人。

这可能有点繁重，最好设计一个解决方案，在客户端之间传递一系列描述需要实现的操作的命令。如果操作正确，您最终可以简单地传递基于矢量的命令，然后在每个客户端上进行缩放，这样如果我在我的 uber 4k 屏幕和您的笔记本电脑上运行该应用程序，它仍然会相应地呈现。

# google-maps - 限制 Google Map API 只显示城市、州和国家

> ID：13375306
> 
> 赞同：3
> 
> 时间：2012-11-14T08:30:23.770
> 
> 标签：google-maps, google-maps-api-3, geolocation, geocoding

我是谷歌地图 API 的新手。我希望使用下拉菜单，用户将在其中输入位置，相应地谷歌会给出建议。但问题是我不希望谷歌给出街道和地区名称。我只想要城市、州和国家要自动建议的名称..我的代码如下

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&language=en-AU"></script>
    <script>
        var autocomplete = new google.maps.places.Autocomplete($("#address")[0], {});

        google.maps.event.addListener(autocomplete, 'place_changed', function() {
            var place = autocomplete.getPlace();
            console.log(place.address_components);
        });
    </script>
</body> 
```

如何从 API 中仅获取城市和国家名称？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-05T03:43:41.607

如果有人需要当前答案：

在您的 Google Maps API 调用中添加**types=(cities) ，如下所示：**

```
<script src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&types=(cities)&language=en-AU"></script> 
```

[在此处](https://developers.google.com/places/documentation/autocomplete)查看官方文档中的“地点类型”部分以获取更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:47:39.750

将“区域”添加到构造函数中的选项：

```
var acOptions = {
        types: ['(regions)']
    };

var autocomplete = new google.maps.places.Autocomplete($("#address")[0], acOptions); 
```

# css - 如何为移动设备加载一份样式表，为台式机加载一份？

> ID：13375307
> 
> 赞同：4
> 
> 时间：2012-11-14T08:30:28.287
> 
> 标签：css

我想这样做的原因是我们的“桌面版本”上有我想隐藏的下拉菜单（因为它们在触摸屏设备上不能很好地工作）并显示一个简化的菜单“基本”链接。

在检测设备时，我无法使媒体查询工作，因为其中一些设备的分辨率太高（例如三星 Galaxy S3）。

有 Javascript 或我可以使用的东西吗？类似的东西（我不知道 Javascript，所以这只是想法）：

```
if mobileDevice then load mobile.css
else
load desktop.css 
```

只是基本的想法:-)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T08:34:13.423

使用`media`特定于屏幕的属性，例如

```
<link rel="stylesheet" type="text/css" href="stylesheet.css" media="screen" /> 
```

对于手持设备，您可以使用它

```
<link rel="stylesheet" media='screen and (min-width: 200px) and (max-width: 400px)' href='stylesheet.css' /> 
```

或者

```
<link rel="stylesheet" type="text/css" href="stylesheet.css" media="handheld" /> 
```

或者，如果您愿意，可以使用@media 查询来定位特定的屏幕分辨率，而不是简单地拥有 1 个样式表，但您可以像这样为不同的屏幕定义样式

```
@media screen {
      /* Styles for screen goes here */
}

@media print {
      /* Styles for print goes here */
}

@media all and (min-width: 600px) {
  /* Styles for specific screen resolutions */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T13:34:06.553

我发现了一些代码“片段”，我想知道它们是否可以组合成一个工作脚本？

```
if(Browser.Platform.name == 'android' || Browser.Platform.name == 'ios') window.location = dir+mobileFolder+"/index.html"+page;

//*** Could the above be combined with the below in some way? ***

function loadcssfile(filename, filetype){
// if (filetype=="css"){
  var fileref=document.createElement("link")
  fileref.setAttribute("rel", "stylesheet")
  fileref.setAttribute("type", "text/css")
  fileref.setAttribute("href", filename)
 }
 if (typeof fileref!="undefined")
  document.getElementsByTagName("head")[0].appendChild(fileref)
//}

loadcssfile("stylesheet.css", "css") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:47:29.543

**尝试这个：**

```
<link rel="stylesheet" type="text/css" href="mobile.css" media="handheld"/>
<link rel="stylesheet" type="text/css" href="screen.css" media="screen"/> 
```

# lambda - 需要了解包含 lambda 的函数

> ID：13375311
> 
> 赞同：0
> 
> 时间：2012-11-14T08:31:02.217
> 
> 标签：lambda, python-2.7

我找到了一个函数，它接受一个列表并返回一个字符串。但是我很难理解它到底在做什么？请评论以下代码：

```
def getAsTable(self, arrays):
    """ This method takes an array of arrays and returns string (which is really a table) 
    :param arrays: An array of arrays 
    :returns: string (this is really a table of the input)

    >>> [[a, b, b], [1, 2, 3], [4, 5, 6]]
    >>> a    b    c
    >>> 1    2    3
    >>> 4    5    6

    """
    def areAllEqual(lst):
        return not lst or [lst[0]] * len(lst) == lst

    if not areAllEqual(map(len, arrays)):
        return "Cannot print a table with unequal array lengths"

    verticalMaxLengths = [max(value) for value in map(lambda * x:x, *[map(len, a) for a in arrays])]
    spacedLines = []

    for array in arrays:
        spacedLine = ''
        for i, field in enumerate(array):
            diff = verticalMaxLengths[i] - len(field)
            spacedLine += field + ' ' * diff + '\t'
        spacedLines.append(spacedLine)

    return '\n  '.join(spacedLines) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:58:18.327

一个简短的解释[`map`](http://docs.python.org/2/library/functions.html#map)使我不必在下面的代码中乱扔注释：

该`map`函数将其第一个参数（通常是一个函数，但它也可以是一个类或任何其他可调用的东西）应用于第二个参数中的每个值并返回结果列表。将其视为使用给定函数转换每个元素。与两个参数一起使用，它的工作原理如下：

```
def map(fct, iterable): return [fct(x) for x in iterable] 
```

与三个或更多参数一起使用，`map`假定第一个参数之后的所有参数都是可迭代的，并并行迭代它们，将每个可迭代的第 n 个元素传递给第 n 次传递的函数：

```
def p(a,b,c): print "a: %s, b:%s, c:%s"
map(p, "abc", "123", "456") #-> prints "a 1 4", then "b 2 5", then "c 3 6" 
```

您的代码的注释版本：

```
def getAsTable(self, arrays):

    #helper function checking that all values contained in lst are equal
    def areAllEqual(lst):
        #return true for the empty list, or if a list of len times the first
        #element equals the original list
        return not lst or [lst[0]] * len(lst) == lst

    #check that the length of all lists contained in arrays is equal
    if not areAllEqual(map(len, arrays)):
        #return an error message if this is not the case
        #this should probably throw an exception instead...
        return "Cannot print a table with unequal array lengths"

    verticalMaxLengths = [max(value) for value in map(lambda * x:x, *[map(len, a) for a in arrays])] 
```

让我们把这条线分成几个部分：

```
(1) [map(len, a) for a in arrays] 
```

这会将 len 映射到数组中的每个列表 - 这意味着您将获得元素长度列表的列表。例如，对于输入`[["a","b","c"], ["1","11","111"], ["n", "n^2", "n^10"]]`，结果将是`[[1, 1, 1], [1, 2, 3], [1, 2, 4]]`.

```
(2) map(lambda *x:x, *(1)) 
```

展开 (1) 中获得的`*`列表，这意味着每个元素都作为单独的参数传递给 map。如上所述，使用多个参数，map 将 a 传递给函数。此处定义的 lambda 仅将其所有参数作为元组返回。继续上面的例子，对于输入`[[1, 1, 1], [1, 2, 3], [1, 2, 4]]` 结果将是`[(1, 1, 1), (1, 2, 2), (1, 3, 4)]` 这基本上导致输入的矩阵转置

```
(3) [max(value) for value in (2)] 
```

这将对 (2) 中返回的列表的所有元素调用 max （记住元素是元组）。对于输入`[(1, 1, 1), (1, 2, 2), (1, 3, 4)]`，结果将是`[1, 2, 4]`.

因此，在此处的上下文中，整行采用输入数组并计算每列中元素的最大长度。

其余代码：

```
 #initialize an empty list for the result
    spacedLines = []

    #iterate over all lists
    for array in arrays:
        #initialize the line as an empty string
        spacedLine = ''
        #iterate over the array - enumerate returns position (i) and value
        for i, field in enumerate(array):
            #calculate the difference of the values length to the max length
            #of all elements in the column
            diff = verticalMaxLengths[i] - len(field)
            #append the value, padded with diff times space to reach the
            #max length, and a tab afterwards
            spacedLine += field + ' ' * diff + '\t'
        #append the line to the list of lines
        spacedLines.append(spacedLine)

    #join the list of lines with a newline and return
    return '\n  '.join(spacedLines) 
```

# php - 如何从mysql表中仅检索唯一条目

> ID：13375312
> 
> 赞同：1
> 
> 时间：2012-11-14T08:31:04.207
> 
> 标签：php, mysql

我正在尝试从以下数据库中获取一些字段：

```
CREATE TABLE `messages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `message` text,
  `date` datetime DEFAULT NULL,
  `fra` int(11) DEFAULT NULL,
  `til` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ; 
```

Fra = 发件人 ID；
til = Receiver ID

例如具有以下值：

```
(1, 'This is a message for Obama', '2012-11-14 01:12:06', 1, 3),
(2, 'Hello John! How are you?', '2012-11-14 01:23:43', 3, 1),
(3, 'Hey Jack', '2012-11-14 01:28:11', 1, 2),
(4, 'How are you son?', '2012-11-14 01:28:15', 1, 2),
(5, 'everything allright for you?', '2012-11-14 01:28:23', 1, 2); 
```

我想从数据库中获取字段的方式如下：
我想从一个用户到另一个用户的唯一对话。如果用户 1 给用户 3 发送了一条消息，用户 3 回复了用户 1，那么我只想选择最后一个字段进入数据库；或者，如果用户 1 已向用户 2 发送了 3 条消息，那么我只想从用户 1 向用户 2 获取第三条消息。这意味着我应该只得到 2 行结果

我努力了：

```
SELECT DISTINCT * FROM messages WHERE fra='".$_SESSION['userid']."' OR til='".$_SESSION['userid']."' GROUP BY fra,til" 
```

和

```
"SELECT DISTINCT(til) AS til FROM messages WHERE fra='".$_SESSION['userid']."' OR til='".$_SESSION['userid']."'  ORDER BY id DESC" 
```

但我无法得到我想要的结果。

有人可以解释我该怎么做吗？

编辑：我只想构建将显示两个用户之间发送的最后一条消息的用户消息**线程（这是查询的范围）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:09:35.197

我认为您可以使用 group-by 也可以获取值..

select * from messages where ID in (select max(ID) from messages where fra='".$_SESSION['userid']."' OR til='".$_SESSION['userid']."' GROUP BY fra ,直到)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:54:17.337

这是 sql 语句的答案/示例： [http ://sqlfiddle.com/#!2/ae56b/10](http://sqlfiddle.com/#!2/ae56b/10)

```
select * 
from messages m1
where m1.date = (select max(m2.date) 
    from messages m2 
    where 
    case when m2.fra < m2.til then m2.fra else m2.til end = 
    case when m1.fra < m1.til then m1.fra else m1.til end
    and 
    case when m2.fra > m2.til then m2.fra else m2.til end = 
    case when m1.fra > m1.til then m1.fra else m1.til end
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T08:37:26.327

这并不是真正的 DISTINCT 情况，更多的是您希望将结果限制为 1 条记录的情况。尝试这个：

```
SELECT * FROM messages WHERE fra='".$_SESSION['userid']."' OR til='".$_SESSION['userid']."' ORDER BY `date` DESC LIMIT 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:40:42.800

我认为你可以使用某种“key=>value”集合来模拟它

您的查询可以是

```
SELECT @discution := (MAX(til,Fra)+","+MIN(til,Fra)) AS key , messages.* FROM messages
 ORDER BY id DESC LIMIT 1 OFFSET 0 GROUP BY @discution 
```

# javascript - 将两种类型的高图与一个图例结合在一起？

> ID：13375313
> 
> 赞同：0
> 
> 时间：2012-11-14T08:31:06.210
> 
> 标签：javascript, highcharts

如何在一页中组合两种类型的高图（列和行）？所以它只有一个传说。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:50:16.573

I think this is not supported by default by HighCharts (unless Jugal can give us an example).

The only possibility I can imagine is to hide one of the legends, then suscribe to the event 'legendItemClick' in the chart with the legend enabled, and when that legend is clicked hide/show both charts.

check this fiddle: [http://jsfiddle.net/b3AF9/7/](http://jsfiddle.net/b3AF9/7/)

The important code is here:

```
series: [{
          type: 'line',
          data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 23.3, 18.3, 13.9, 9.6],
          events: {
             legendItemClick: function(event) {
                this.visible? 
                   this.chart.get('myColumnChar').hide():
                   this.chart.get('myColumnChar').show();
             }
          }
      },{
          type: 'column',
          id: "myColumnChar",
          data: [4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8],
          showInLegend: false
        }
       ] 
```

# html - 如何将视图中的响应保存到 django 中的数据库

> ID：13375315
> 
> 赞同：-1
> 
> 时间：2012-11-14T08:31:07.753
> 
> 标签：html, django

# 模型.py

```
from django.db import models
from django.contrib.auth.models import User

from registeredmember.models import Registeredmember

# Create your models here.

class Carloan_form(models.Model):
    cost_of_vehicle_Naira               = models.DecimalField(max_digits=10, decimal_places=2)
    loan_repayment_tenure_Months        = models.DecimalField(max_digits=10, decimal_places=2)
    interest_rate_Percentage            = models.DecimalField(max_digits=10, decimal_places=2)
    equity_contrib_rate_Percentage      = models.DecimalField(max_digits=10, decimal_places=2)
    depreciation_rate_Percentage        = models.DecimalField(max_digits=10, decimal_places=2)
    user                                = models.ForeignKey(User, null=True)
    time                                = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
            return unicode(self.user) 
```

# 表格.py

```
from django import forms
from django.forms import ModelForm

from models import Carloan_form

class Carloan_formForm(ModelForm):
    cost_of_vehicle_Naira           = forms.DecimalField(label=(u'Cost of vehicle (in Naira)'))
    loan_repayment_tenure_Months    = forms.DecimalField(label=(u'Loan tenure (in Months)'))
    interest_rate_Percentage        = forms.DecimalField(label=(u'Interest rate (in %)'))
    equity_contrib_rate_Percentage  = forms.DecimalField(label=(u'Equity contribution rate (in %)'))
    depreciation_rate_Percentage    = forms.DecimalField(label=(u'Depreciation rate (in %)'))
    class Meta:
        model = Carloan_form
        exclude = ('user',) 
```

# 视图.py

```
from django.contrib.auth.models import User
from django.shortcuts import render_to_response
from django.template import RequestContext
from django.http import HttpResponseRedirect, HttpResponse
from django.contrib.auth.decorators import login_required

from forms import Carloan_formForm
@login_required
def index(request):
    form = Carloan_formForm()
    if request.POST:
        form = Carloan_formForm(request.POST)
        if form.is_valid():
            form.save()

            #Collection and Assignment of User input
            amount_of_vehicle = float(form.cleaned_data['cost_of_vehicle_Naira'])
            tenure = float(form.cleaned_data['loan_repayment_tenure_Months'])
            interest_rate = float(form.cleaned_data['interest_rate_Percentage'])
            equity = float(form.cleaned_data['equity_contrib_rate_Percentage'])
            depreciation_rate = float(form.cleaned_data['depreciation_rate_Percentage'])
            carloan = form.save(commit=False)
            carloan.user = request.user
            carloan.save()

            #Class Definition
            class LoanCalc:
                def __init__(self,amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate):
                    self.amount_of_vehicle = amount_of_vehicle
                    self.tenure = tenure
                    self.interest_rate = interest_rate
                    self.equity = equity
                    self.depreciation_rate = depreciation_rate
                def interest(self):
                      return((self.interest_rate/100) * self.amount_of_vehicle *(self.tenure/12))
                def management_fee(self):
                    return 0.01 * (self.amount_of_vehicle + self.interest())
                def processing_fee(self):
                    return 0.0025 *(self.amount_of_vehicle + self.interest())
                def legal_fee(self):
                    return 0.0075 *(self.amount_of_vehicle + self.interest())
                def residual_amount(self):
                    return 0.01 * (self.amount_of_vehicle - ((self.depreciation_rate/100) * self.amount_of_vehicle *(self.tenure/12)))
                def equity_contribution(self):
                    return (self.equity/100) * self.amount_of_vehicle
                def total_amount(self):
                    return self.amount_of_vehicle+self.interest()+self.management_fee()+self.processing_fee()+self.legal_fee()+self.residual_amount() 
                def upfront_payment(self):
                    return self.management_fee() + self.processing_fee() + self.legal_fee() + self.equity_contribution() + self.residual_amount()
                def opening_balance(self):
                    return self.total_amount() - self.upfront_payment()
                def monthly_instalment(self):
                    return self.opening_balance()/self.tenure
                def LoanPaymentPlan(self):
                    months = 1
                    total_amount = self.amount_of_vehicle+self.interest()+self.management_fee()+self.processing_fee()+self.legal_fee()+self.residual_amount()
                    upfront_payment = self.management_fee()+self.processing_fee()+self.legal_fee()+self.equity_contribution()+self.residual_amount()
                    opening_balance = total_amount - upfront_payment
                    balance = opening_balance
                    while months <= self.tenure:
                        if balance > 0:
                            monthly_instalment =(opening_balance/self.tenure)
                            monthly_interest = (((self.interest_rate/100) * balance)/ 12)
                            loan_payment = monthly_instalment - monthly_interest
                            closing_balance = balance - monthly_instalment
                            print '  ',months,'  ',round(balance,2),'   ', round(monthly_instalment,2),'        ',round(monthly_interest,2) \
                            , '       ',' ',round(loan_payment,2),'     ',round(closing_balance,2)
                            balance = closing_balance
                            months += 1
                    return 'Thank you for using the Loan Calc App'

            #Creation of an instance with the name 'calc'
            calc = LoanCalc(amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate)
            amountofVehicle = amount_of_vehicle
            interest = calc.interest()
            managementFee = calc.management_fee()
            processingFee = calc.processing_fee()
            legalFee = calc.legal_fee()
            residualAmount = calc.residual_amount()
            equityContribution = calc.equity_contribution()
            totalAmount = calc.total_amount()
            upfrontPayment = calc.upfront_payment()
            openingBalance = calc.opening_balance()
            loanpaymentplan =calc.LoanPaymentPlan()

            #An empty form to be displayed alongside the result
            forms = Carloan_formForm()

            #Renders a template that displays the result
            return render_to_response('carloan/result.html', {'form': forms, 'result':amountofVehicle , 'result1': interest, 'result2': managementFee, 'result3': processingFee,
                                                              'result4': legalFee, 'result5': residualAmount, 'result6': equityContribution, 'result7': totalAmount,
                                                              'result8': upfrontPayment, 'result9':openingBalance, 'result10': loanpaymentplan},
                          context_instance=RequestContext(request))
    #If the user doesn't submit the form, it displays an empty form
    else:
        form = Carloan_formForm()
    #Rendering a that template that displays an empty form
    return render_to_response('carloan/index.html', {'form': form},
                          context_instance=RequestContext(request)) 
```

# 我的问题是；

1.  有没有办法可以保存传递给模板的结果？
2.  有没有办法可以发送我在第一季度保存的结果。以上，并通过电子邮件发送给用户（仅在用户需要时）？

3.'result10'：我传递给模板的loanpaymentplan`，只打印一行，不通过循环打印所有内容，但同时在命令提示符下打印所有内容（仍在开发中）。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:13:20.647

你可以看看这样的东西：

**该模型**

```
from django.db import models
class LoanCalc(models.Model):
    amount_of_vehicle = models.DecimalField()
    tenure = models.DecimalField()
    interest_rate = models.DecimalField()
    equity = models.DecimalField()
    depreciation_rate = models.DecimalField()

    def interest(self):
        return((self.interest_rate/100) * self.amount_of_vehicle *(self.tenure/12))
    def management_fee(self):
        return 0.01 * (self.amount_of_vehicle + self.interest()) 
```

**风景**

```
# views.py
from django.core.mail import send_mail
from django.template.loader import get_template
from django.template import Context

from .models import LoanCalc

def loan_calc(request, **kwargs):
    calc = LoanCalc.objects.create(**kwargs)

    # Render your calc model in a template and use send_mail to email it
    send_mail(
        'This is your loan calculation!',
        get_template('carloan/email.txt').render(
            Context({
                'calc': calc,
            })
        ),
        'you@example.com',
        ['receiver@gexample.com']
    )

    return render_to_response('carloan/result.html',
                              {'form': forms, 'calc': calc}
                              context_instance=RequestContext(request)) 
```

**视图模板**

```
# result.html
<table>
    <tr>
       <td>Interest</td>
       <td>{{ calc.interest }}</td>
    </tr>
    <tr>
       <td>Management fee</td>
       <td>{{ calc.management_fee }}</td>
    </tr>
</table> 
```

**电子邮件模板**

```
# email.txt
Hi, this is your loan calculation overview:

Interest: {{ calc.interest }}
Management fee: {{ calc.management_fee }} 
```

# java - 使用相同的资源位置执行和构建 maven2 java jar 项目

> ID：13375318
> 
> 赞同：1
> 
> 时间：2012-11-14T08:31:15.663
> 
> 标签：java, maven-2, jar

我对 maven2 和 java jar 项目有一点问题。

这是我的项目文件系统：

```
MyApp
  -- /src/main/java
    -- my.package
      -- Main.java
  -- /src/main/resources 
    -- application.properties 
```

Pom.xml 使用标准 maven 插件配置为具有自定义包阶段：

```
<!-- copy resources from /src/main/resource to target -->
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-resources-plugin</artifactId>
  <version>2.4</version>
  <configuration>
    <outputDirectory>${project.build.directory}</outputDirectory>
    <overwrite>true</overwrite>
  </configuration>
  <executions>
    <execution>
      <phase>package</phase>
      <goals>
        <goal>resources</goal>
      </goals>
    </execution>
  </executions>
</plugin>

<!-- create an executable jar -->
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-jar-plugin</artifactId>
  <version>2.4</version>
  <configuration>
    <finalName>${project.artifactId}-${project.version}</finalName>
    <archive>
      <manifest>
        <addClasspath>true</addClasspath>
        <classpathPrefix>lib/</classpathPrefix>
        <mainClass>my.package.Main</mainClass>
      </manifest>
    </archive>
  </configuration>
  <executions>
    <execution>
      <phase>package</phase>
      <goals>
        <goal>jar</goal>
      </goals>
    </execution>
  </executions>
</plugin>

<!-- copy dependencies jars to target/lib folder -->
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <version>2.5.1</version>
  <configuration>
    <outputDirectory>${project.build.directory}/lib</outputDirectory>
    <overWriteReleases>false</overWriteReleases>
    <overWriteSnapshots>false</overWriteSnapshots>
    <overWriteIfNewer>true</overWriteIfNewer>
  </configuration>
  <executions>
    <execution>
      <phase>package</phase>
      <goals>
        <goal>copy-dependencies</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

使用此配置并调用 mvn package 一切正常：在目标文件夹中创建一个新 jar，并复制资源和依赖项。文件 application.properties 是通过 new File("application.properties") 引用的，它是由 JRE 找到的。如果我从目标文件夹手动运行 jar，它就可以工作！

现在我的问题：我想添加 exec-maven-plugin 来直接在 eclipse 中执行我的项目。这是我在 pom.xml 中的新插件：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>exec-maven-plugin</artifactId>
  <version>1.2.1</version>
  <configuration>
    <executable>java</executable>
    <mainClass>my.package.Main</mainClass>
  </configuration>
</plugin> 
```

通过这种方式，我的类被执行并且所有的依赖项都得到了满足，但是我的资源（特别是 application.properties）没有找到，因为我的程序工作目录是 MyApp/target 的 MyApp。使用配置是没有用的。

我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:24:44.420

好吧，有两件事浮现在脑海。

a）不要通过 maven exec 运行，而只是通过 Eclipse 作为独立应用程序运行（IE。运行主类）。您的 Eclipse 项目应该是 mavenized 以便设置正确的类路径。

b) 不要使用常规的文件系统访问，而是将要加载的文件放在类路径上并使用 getClass().getClassLoader().getResourceAsStream() 来加载它。

# shell - 使用Shell分析文件：while和if的组合

> ID：13375321
> 
> 赞同：1
> 
> 时间：2012-11-14T08:31:22.203
> 
> 标签：shell

我有这样的文件：

```
1\. blah zend blahblahblahblah

2\. blahblahblah blahblahblah Zend

3\. Zend blahblahblahblahblahblah blah

4\. Yii blahblahblahblahblahblah

5\.  blahblahblahblahblahblah  Yii

6\. CI blahblahblahblahblahblahblahblah

7\. blahblahblahblahblahblahblahblah CI 
```

我想要的是：使用shell读取该文件的每一行，当该行包含Zend时，它将在行尾附加一个“a”，当行包含Yii时附加一个'b'并附加一个' c' 当该行包含 CI 时。

我真的不知道如何在一个 shell 命令中执行此操作，有人可以切碎吗？

不过，我设法一一做到了，例如：

```
cat test2 | while read line; do echo "$line a" | grep Zend || echo $line; done  > test 
```

我想我需要的是“while”和“if”的组合

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:52:41.430

你可以`sed`这样使用：

```
sed -e 's/\(^.*Zend.*$\)/\1 a/g;s/\(^.*Yii.*$\)/\1 b/g;s/\(^.*CI.*$\)/\1 c/g' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:54:00.033

你可以这样做`awk`：

```
#!/bin/bash

awk '// {found=0}
     /Zend/ {print $0 " a"; found=1}
     /Yii/ {print $0 " b"; found=1}
     /CI/ {print $0 " c"; found=1}
     // {if (found==0) {print $0}}' 
```

我假设您想要在每行末尾和 , 或 之间留`a`一个`b`空格`c`。如果没有，您可以将其从脚本中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:36:30.177

```
while read line; do
  case $line in 
    *Zend*) suffix=" a" ;;
    *Yii*) suffix=" b" ;;
    *CI*) suffix=" c" ;;
    *) suffix="" ;;
  esac
  echo "$line$suffix"
done < filename 
```

如果您想要不区分大小写的匹配并且您正在使用 bash，`shopt -s nocasematch`请先添加。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-14T08:52:04.380

试试 awk；它以非常好的方式处理这种情况。一个非常好的 awk 资源是[GNU Awk 用户指南。](http://www.gnu.org/software/gawk/manual/gawk.html)

可以在您的情况下使用 awk，如下所示：

```
cat test2 | awk '{ if ( $0 ~ ".*Zend.*" ) { print $0 "a" } else if ($0 ~ ".*Yii.*") { print $0 "b" } else if ($0 ~ ".*CI.*") { print $0 "c" } else { print $0 } }' 
```

# javascript - 如何将图像对象转换为二进制 blob

> ID：13375333
> 
> 赞同：13
> 
> 时间：2012-11-14T08:32:23.867
> 
> 标签：javascript, image, html, blob, exif

是否可以解析`<img>`DOM 中的图像对象 ( )，就好像它已被上传并使用 FileReader 打开一样？我正在尝试使用[jpegmeta.js](http://benno.id.au/blog/2009/12/30/html5-fileapi-jpegmeta)从 JPEG 中提取 EXIF 元数据，但它需要 FileReader 返回的二进制字符串。

可以使用 XHR 从其 URL 加载图像并使用 FileReader 对其进行解析。但是，如果每个图像都必须下载两次，这将产生大量开销。另一种选择可能是使用画布，但在转换时会丢失 exif 数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T13:40:25.043

普遍的共识似乎总结在这个答案中：[Get image data in JavaScript?](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)

因此，如果您需要 exif 数据，则需要使用 XHR 技术。希望浏览器会缓存图像，因此不会对性能造成太大影响。否则，画布技术应该可以完成这项工作。

# facebook - Facebook 用户级别限制

> ID：13375335
> 
> 赞同：-1
> 
> 时间：2012-11-14T08:32:44.410
> 
> 标签：facebook

我正在尝试在 Facebook 上开发一个社区页面。每个 Facebook 页面都提供了一些由 Facebook 预先定义的限制功能。它包含国家限制年龄限制等。现在我想使用 facebook 编程手动定义限制。我想要的限制：

1.  我的页面按特定性别喜欢（如仅限男性或仅限女性）
2.  受限性别无法查看页面内容
3.  受限制的性别无法评论页面的任何内容

我在 Facebook 上没有看到任何提及此类限制的内容。如果有人知道然后指导我完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:37:17.600

不，对性别没有限制。我很确定这在某些地方是一种歧视性违规行为......但无论如何，在用户“喜欢”页面之前，您无法知道用户的性别......之后您就可以看到它在[`signed_request`](https://developers.facebook.com/docs/howtos/login/signed-request/).

# java - findViewById 在片段内的静态函数中不起作用

> ID：13375337
> 
> 赞同：6
> 
> 时间：2012-11-14T08:32:50.790
> 
> 标签：java, android, android-fragments

在我的 android 应用程序中，我有一个 fragment-fragment1。在该片段中，我有一个静态函数'function1'。我尝试在该静态函数中定义一个按钮，使用，

```
button=(Buton)getActivity().findViewById(R.id.button1); 
```

但是 Eclipse 会抛出一个错误，例如“无法从类型 Fragment 对非静态方法 getActivity() 进行静态引用”。我做错了什么？我需要这个function1是静态的，这样我就可以从另一个类中调用它。我的意思是，当我选择一个特定的片段时，我必须从主要活动中填充列表视图。

片段1=>

```
public class Fragment1 extends Fragment{

public static String feedurl="http://www.abcd.com/en/rssfeeds/1_2_3_5/latest/rss.xml";
static String URL = "";
static final String KEY_HEAD = "item"; // parent node
static final String KEY_DATE = "pubDate";
public static String headflag="";
int f=0;
static Button button;
    HeadlinesAdapter adapter;
    private TextView mMessageView;
private Button mClearButton;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View v = inflater.inflate(R.layout.first_fragment, container, false);

    return v;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

    function1();
    populate_listview();

    }

 public static void function1()
 {

     URL="http://www.abcd.com/en/rssfeeds/1_2_3_5/latest/rss.xml";
     ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL);
    Document doc = parser.getDomElement(xml);
    NodeList nl = doc.getElementsByTagName(KEY_HEAD);
    NodeList itemLst = doc.getElementsByTagName("item");
    String MarqueeStr="";

    for (int i = 0; i < nl.getLength(); i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
                    newsList.add(map);

 }
    button=(Buton)getActivity().findViewById(R.id.button1);;// Here it shows error.
    adapter=new Adapter1(getActivity(), newsList);        
            list.setAdapter(adapter);

  } 
```

}

我的主要活动是，

ViewpagerActivity=>

```
public class ViewPagerActivity extends FragmentActivity {

    private ViewPager mViewPager;
    private MessageLoader mLoader;
    private Button mSenderButton, mReceiverButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // We get UI references
        mViewPager = (ViewPager) findViewById(R.id.viewPager);
        mSenderButton = (Button) findViewById(R.id.sender_button);
        mReceiverButton = (Button) findViewById(R.id.receiver_button);
        // We set pager adapter
        mViewPager.setAdapter(new MyAdapter(this));
        // We set receiver button listener

        mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) 
            {

            }

            int i=0;
            public void onPageSelected(int position) {
                   if(position==0){

                   }else if(position==1 && i==0){
                       Fragment1.function1(); // Here Iam calling function1

                       i++;
                   }

            }

            public void onPageScrollStateChanged(int state) {

            }
            });

        mReceiverButton.setOnClickListener(new OnClickListener() {          

            public void onClick(View v) {
                mViewPager.setCurrentItem(0);
            }
        });
        // We set sender button listener
        mSenderButton.setOnClickListener(new OnClickListener() {            

            public void onClick(View v) {
                mViewPager.setCurrentItem(1);

            }
        });
    }

    /**
     * Adapter for ViewPAger that manages background interactions with fragments
     */
    private class MyAdapter extends FragmentPagerAdapter{

        private Context mContext;
        private String[] frags = {Headlines.class.getName(), Kerala.class.getName()};

        public MyAdapter(FragmentActivity activity) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
        }

        @Override
        public Object instantiateItem(ViewGroup container, int position) {
            Fragment frag = (Fragment) super.instantiateItem(container, position);
            if(frag instanceof MessageLoader){
                mLoader = (MessageLoader) frag;
            }
            return frag;
        }

        @Override
        public Fragment getItem(int pos) {
            return Fragment.instantiate(mContext, frags[pos]);
        }

        @Override
        public int getCount() {
            return frags.length;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:38:27.860

将签名更改`function1()`为：

```
public static void function1(Fragment f) 
```

并使用：

```
button = (Buton) f.getActivity().findViewById(R.id.button1); 
```

代替：

```
button = (Buton) getActivity().findViewById(R.id.button1); 
```

并像这样调用方法：

```
function1(this); 
```

* * *

但是，如果没有目的，该方法应该是实例方法而不是静态方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:39:39.870

不要使用静态方法，因为它不能引用`Fragment1`实例，除非您将其作为输入参数提供。除了改变按钮的发现如下：

```
button = (Buton) getView().findViewById(R.id.button1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:40:20.497

您目前拥有：

```
static Button button; 
```

您应该删除 static 关键字，而是编写：

```
private Button button; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:48:42.283

这里没有理由让任何东西都是静态的（除了你放在大写字母中的常量应该被声明`static` **和** `final`）。

从代码中删除所有`static`关键字，它应该可以工作（除了大写变量）：

```
private Button button;

// ...

public void function1() {
  // ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-08T19:52:14.517

@Override public View onCreateView(LayoutInflater inflater, ViewGroup 容器, Bundle savedInstanceState) {

```
View v = inflater.inflate(R.layout.first_fragment, container, false);
button=(Button) v.findViewById(R.id.button1);

return v; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-26T10:27:03.537

您必须膨胀该特定布局并使用该布局来查找 id。

**

```
View v = inflater.inflate(R.layout.first_fragment, container, false);
button=(Button) v.findViewById(R.id.button1);
return v; 
```

**

# actionscript-3 - AS3 矩阵变换

> ID：13375341
> 
> 赞同：0
> 
> 时间：2012-11-14T08:32:57.173
> 
> 标签：actionscript-3, matrix, transformation

我不擅长矩阵变换，因此我需要帮助。请参考以下链接

[http://img402.imageshack.us/img402/9610/sampleyn.png](http://img402.imageshack.us/img402/9610/sampleyn.png)

假设左右红框在同一个舞台上，但形状和位置不同。

我需要获得将 shape2 转换为 shape1 所需的矩阵转换，这也包括 x & y 位置。

点“a”将映射到点“a”
点“b”将映射到点“b”
点“c”将映射到点“c”
点“d”将映射到点“d”

请帮我解决这个问题，因为我不确定要搜索什么关键字。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:47:17.983

尝试[绕 y 轴旋转它](http://www.siggraph.org/education/materials/HyperGraph/modeling/mod_tran/3drota.htm)：

![在此处输入图像描述](../Images/e6eaff4445201f26d6061fc94e911c94.png)

[在此处](http://megaswf.com/s/2519173)查看实时示例。

# php - 显示一定数量的数组唯一值

> ID：13375344
> 
> 赞同：0
> 
> 时间：2012-11-14T08:33:05.347
> 
> 标签：php, arrays

我有一个像这样的数组：

```
$names = array(
    "Skyler",
    "Jesse",
    "Walter",
    "Skyler",
    "Hank",
    "Marie",
    "Walter",
    "Walter",
    "Jesse",
    ); 
```

为了检查数组中相等值的频率，我用`array_count_values`. 要按我使用的每个值的频率对列表进行排序`arsort`：

```
$count = array_count_values($names);

foreach ($count as $key => $value) {
    echo $value . ' – ' . $key . '<br />';
} 
```

所以我明白了：

```
3 – Walter
2 – Skyler
2 – Jesse
1 – Hank
1 – Marie 
```

现在我只想显示频率最高的 3 个值，即 Walter、Jesse 和 Skyler。但我不知道如何......感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T08:35:58.757

尝试

```
$count = array_count_values($names);
arsort($count, SORT_NUMERIC);
$result = array_slice($count, 0, 3);
print_r($result); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:36:30.210

你可能想调查一下`array_slice()`。

```
$highest = array_slice($count, 0, 3); 
```

这将返回该数组的前三个元素。文档可以在**[这里找到](http://php.net/manual/en/function.array-slice.php)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T08:36:02.417

试试这个

```
$i = 0;
foreach ($count as $key => $value) {
    if($i == 3){
        break;
    }
    echo $value . ' – ' . $key . '<br />';
    $i++;
} 
```

# c# - 在调用存储过程之前设置当前数据库？

> ID：13375349
> 
> 赞同：0
> 
> 时间：2012-11-14T08:33:36.197
> 
> 标签：c#, mysql, sql-server

考虑 C# 中的这段代码：

```
var command = connection.CreateCommand();
command.CommandType = CommandType.StoredProcedure;
command.CommandText = "usp_my_procedure"; 
```

当我执行这个命令时，`SQL Server`（或`MySQL`服务器）会*知道*我想在哪个数据库中运行这个存储过程吗？

**这里最好的约定是什么（考虑到性能和安全性）？**我是不是该...

1.  明确指定数据库名称？
2.  [每次创建连接后使用USE](http://msdn.microsoft.com/en-us/library/ms188366.aspx)命令设置默认数据库？
3.  假设当前数据库已经设置了连接？（例如`Database=mydb`）
4.  其他？

此外，在 SQL Server 中，我认为最好明确指定数据库所有者：

```
command.CommandText = "dbo.usp_my_procedure"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:41:53.750

```
objSqlConnection.ChangeDatabase("Database"); 
```

或者

```
command.CommandText = "database.dbo.usp_my_procedure"; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T11:22:52.663

如果您打算对一个数据库使用连接，并且您确定它不会被更改，那么您可以设置当前数据库一次 - 使用 USE 命令或仅使用连接字符串。在这种情况下，您可以省略对象全名 - write`dbo.table1`而不是`db_name.dbo.table1`.

如果您要修改/引用某些数据库中的对象，那么您有一个选择：在语句之前执行 USE 命令，或使用全名 - `db_name.dbo.table1`。你可以自己回答这个问题——哪一个更适合你。

# java - Android UserManager.isUserAGoat() 的正确用例？

> ID：13375357
> 
> 赞同：3871
> 
> 时间：2012-11-14T08:34:01.523
> 
> 标签：java, android, usermanager

我正在查看[Android 4.2](http://en.wikipedia.org/wiki/Android_version_history#Android_4.1.2F4.2_Jelly_Bean)中引入的新 API 。在查看[`UserManager`](http://developer.android.com/reference/android/os/UserManager.html)课程时，我遇到了以下方法：

> ```
> public boolean isUserAGoat() 
> ```
> 
> 用于确定进行此呼叫的用户是否会受到传送。
> 
> 返回进行此调用的用户是否是山羊。

应该如何以及何时使用它？

* * *

## 回答 #1

> 赞同：1928
> 
> 时间：2012-11-14T08:40:30.647

### Android R 更新：

在 Android R 中，此方法始终返回 false。谷歌表示这样做是为了“保护山羊隐私”：

```
/**
 * Used to determine whether the user making this call is subject to
 * teleportations.
 *
 * <p>As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can
 * now automatically identify goats using advanced goat recognition technology.</p>
 *
 * <p>As of {@link android.os.Build.VERSION_CODES#R}, this method always returns
 * {@code false} in order to protect goat privacy.</p>
 *
 * @return Returns whether the user making this call is a goat.
 */
public boolean isUserAGoat() {
    if (mContext.getApplicationInfo().targetSdkVersion >= Build.VERSION_CODES.R) {
        return false;
    }
    return mContext.getPackageManager()
            .isPackageAvailable("com.coffeestainstudios.goatsimulator");
} 
```

* * *

### 上一个答案：

从他们的**[来源](https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r6/core/java/android/os/UserManager.java#433)**，该方法用于返回`false`，直到它在 API 21 中被更改。

```
/**
 * Used to determine whether the user making this call is subject to
 * teleportations.
 * @return whether the user making this call is a goat 
 */
public boolean isUserAGoat() {
    return false;
} 
```

看起来该方法对我们作为开发人员没有真正的用途。之前有人说它可能是一个**[复活节彩蛋](http://en.wikipedia.org/wiki/Easter_egg_(media))**。

在 API 21 中，实现已更改为检查是否安装了包含该软件包的应用程序`com.coffeestainstudios.goatsimulator`

```
/**
 * Used to determine whether the user making this call is subject to
 * teleportations.
 *
 * <p>As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can
 * now automatically identify goats using advanced goat recognition technology.</p>
 *
 * @return Returns true if the user making this call is a goat.
 */
public boolean isUserAGoat() {
    return mContext.getPackageManager()
            .isPackageAvailable("com.coffeestainstudios.goatsimulator");
} 
```

这是[来源](https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r6/core/java/android/os/UserManager.java#442)和[变化](https://android.googlesource.com/platform/frameworks/base/+/e4ab16ad98b183afbf7a21ad7314372de41a8b57%5E%21/#F1)。

* * *

## 回答 #2

> 赞同：1016
> 
> 时间：2012-11-14T14:47:29.780

我不知道这是否是“官方”用例，但以下会在 Java 中产生警告（如果与`return`语句混合会进一步产生编译错误，导致代码无法访问）：

```
while (1 == 2) { // Note that "if" is treated differently
    System.out.println("Unreachable code");
} 
```

但是这是合法的：

```
while (isUserAGoat()) {
    System.out.println("Unreachable but determined at runtime, not at compile time");
} 
```

因此，我经常发现自己编写了一个愚蠢的实用程序方法，以最快的方式模拟出一个代码块，然后在完成调试时找到对它的所有调用，所以只要实现不改变，就可以使用它。

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)指出`if (false)`不会触发“无法访问的代码”，具体原因是这会破坏对调试标志的支持，即基本上是这个用例（h/t @auselen）。（`static final boolean DEBUG = false;`例如）。

我替换`while`了 for `if`，产生了一个更晦涩的用例。我*相信*你可以用这种行为来绊倒你的 IDE，比如 Eclipse，但是这个编辑是 4 年后的未来，而且我没有 Eclipse 环境可以玩。

* * *

## 回答 #3

> 赞同：791
> 
> 时间：2012-11-14T09:03:07.070

这似乎是谷歌的一个内部笑话。它也出现在 Google Chrome 任务管理器中。它没有任何目的，只是一些工程师觉得它很有趣。如果您愿意，这本身就是一个目的。

1.  `Shift`在 Chrome 中，使用+打开任务管理器`Esc`。
2.  右键单击以添加 `Goats Teleported`列。
3.  想知道。

甚至还有一个巨大的 Chromium 错误报告，关于[太多被传送的山羊](http://code.google.com/p/chromium/issues/detail?id=31482)。

![铬合金](../Images/8cc7161df74794119956feccb01c0560.png)

以下 Chromium[源代码片段是从](http://git.chromium.org/gitweb/?p=chromium.git;a=blob;f=chrome/browser/task_manager/task_manager.cc;h=ad46354259ec8687c8665820f9f53bf89ccc715d;hb=HEAD#l599)[HN](http://news.ycombinator.com/item?id=4782574)注释中窃取的。

```
int TaskManagerModel::GetGoatsTeleported(int index) const {
  int seed = goat_salt_ * (index + 1);
  return (seed >> 16) & 255;
} 
```

* * *

## 回答 #4

> 赞同：307
> 
> 时间：2012-11-21T16:55:12.603

作为@djechlin[答案](https://stackoverflow.com/a/13381101/956397)的补充（顺便说一句，答案很好！），当您想在某些特定迭代或特定递归调用中停止时，此函数调用也可以**用作**在 IDE 中保存断点的虚拟代码，例如：

![在此处输入图像描述](../Images/0a89362b6640a80e6fc889ec34b33065.png)

`isUserAGoat()`可以用来代替将在 IDE 中显示为警告的虚拟变量声明，并且在 Eclipse 特定情况下，将阻塞断点标记，使其难以启用/禁用。如果将该方法用作约定，则所有调用稍后都可以通过某些脚本过滤（可能在提交阶段？）。

![在此处输入图像描述](../Images/30f313774872e1d1039357b1ca9e44b1.png)

谷歌的家伙是 Eclipse 的重度用户（他们将他们的几个项目作为 Eclipse 插件提供：Android SDK、GAE 等），所以@djechlin 的答案和这个互补的答案很有意义（至少对我来说）。

* * *

## 回答 #5

> 赞同：159
> 
> 时间：2012-11-14T17:26:04.803

在每个版本的 Android 中都有一个有趣的命名方法/常量/任何东西。

我见过的唯一实际用途是在 Last Call for [Google I/O](http://en.wikipedia.org/wiki/Google_I/O)竞赛中，他们询问特定版本是什么，以查看参赛者是否阅读了每个版本的 API 差异报告。比赛也有编程问题，但通常一些琐事可以首先自动评分，以将提交的数量降低到更容易检查的合理数量。

* * *

## 回答 #6

> 赞同：151
> 
> 时间：2013-05-31T09:33:44.150

在语音识别学科中，用户分为*山羊*和*绵羊*。

例如，**[在第 89 页](http://books.google.de/books?id=QWJ7KVMQk0cC&lpg=PR1&dq=voice%20enabling%20web&hl=de&pg=PA89#v=onepage&q=voice%20enabling%20web&f=false)**：

> 绵羊是语音识别工作异常出色的人，山羊是语音识别工作异常糟糕的人。只有语音识别器知道它们之间的区别。人们无法预测谁的声音会被轻松识别，谁的声音不会。最好的策略是设计界面，使其能够处理各种环境中的各种声音

也许，未来计划将Android用户标记为山羊，以便能够根据山羊的需求配置语音识别引擎。;-)

* * *

## 回答 #7

> 赞同：137
> 
> 时间：2014-10-20T10:00:29.570

[从 API 21（第一个 Android 5.0/Lollipop SDK）开始](https://android.googlesource.com/platform/frameworks/base/+/android-5.0.0_r1/core/java/android/os/UserManager.java#433)，它会检测是否安装了[Goat Simulator](https://play.google.com/store/apps/details?id=com.coffeestainstudios.goatsimulator&hl=en)应用程序：

```
/**
 * Used to determine whether the user making this call is subject to
 * teleportations.
 *
 * <p>As of {@link android.os.Build.VERSION_CODES#LOLLIPOP}, this method can
 * now automatically identify goats using advanced goat recognition technology.</p>
 *
 * @return Returns true if the user making this call is a goat.
 */
public boolean isUserAGoat() {
    return mContext.getPackageManager()
            .isPackageAvailable("com.coffeestainstudios.goatsimulator");
} 
```

这应该清楚地表明，[djechlin](https://stackoverflow.com/questions/13375357/proper-use-cases-for-android-usermanager-isuseragoat/13381101#13381101)将其用作无警告的建议`if (false)`是一种潜在的灾难性策略。以前`false`为每个设备返回的值现在返回一个看似随机的值：如果它在您的代码中埋得足够深，则可能需要*很长时间*才能找出新错误的来源。

底线：如果您不控制方法的实现并决定将其用于 API 文档中未说明的目的，那么您将遇到麻烦。

* * *

## 回答 #8

> 赞同：132
> 
> 时间：2012-11-15T10:33:43.987

谷歌非常喜欢山羊和山羊[复活节彩蛋](http://en.wikipedia.org/wiki/Easter_egg_%28media%29#Software)。甚至[以前的 Stack Overflow 上也有过关于它的帖子](https://stackoverflow.com/questions/3350892/graph-goat-teleportation-data-with-google-vis-api-via-chrome-extension)。

正如在之前的帖子中提到的，它也存在于 Chrome 任务管理器中（[它于 2009 年首次出现](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/app/generated_resources.grd?r1=27169&r2=27216)）：

```
<message name="IDS_TASK_MANAGER_GOATS_TELEPORTED_COLUMN" desc="The goats teleported column">
    Goats Teleported
</message> 
```

[然后在 2010 年初的 Windows、Linux 和 Mac 版本的 Chrome 中](http://techie-buzz.com/featured/google-chrome-goats-teleported-easter-egg.html)）。“Goats Teleported”的数量实际上是[随机](http://git.chromium.org/gitweb/?p=chromium.git;a=blob;f=chrome/browser/task_manager/task_manager.cc;h=ad46354259ec8687c8665820f9f53bf89ccc715d;hb=HEAD#l599)的：

```
 int TaskManagerModel::GetGoatsTeleported(int index) const {
     int seed = goat_salt_ * (index + 1);
     return (seed >> 16) & 255;
 } 
```

其他谷歌对山羊的引用包括：

*   [用山羊割草](http://googleblog.blogspot.co.uk/2009/05/mowing-with-goats.html)
*   [山羊是 baaaahk](http://googleblog.blogspot.co.uk/2010/04/goats-are-baaaahk.html)

据我所知，goats 和 Google 最早的关联属于原始的“Mowing with goats”博客文章。

我们可以放心地假设它只是一个复活节彩蛋，除了返回之外没有任何实际用途`false`。

* * *

## 回答 #9

> 赞同：114
> 
> 时间：2012-11-16T21:33:43.937

有一个类似的调用，如果正在使用[MonkeyRunner 工具](http://developer.android.com/tools/help/monkeyrunner_concepts.html)`isUserAMonkey()`，则返回 true 。SDK 的解释和这个一样好奇。

> ```
> public static boolean isUserAMonkey(){} 
> ```
> 
> `true`如果用户界面当前正被猴子弄乱，则返回。

[这](http://developer.android.com/reference/android/app/ActivityManager.html)是来源。

我希望这是在一个名为 something with a goat的新[SDK工具的预期中添加的，并且](http://en.wikipedia.org/wiki/Software_development_kit)*实际上*可以用于测试该工具的存在。

另请参阅类似的问题，**[ActivityManager 中的奇怪函数：isUserAMonkey。这是什么意思，它有什么用？](https://stackoverflow.com/questions/7792123/strange-function-in-activitymanager-isuseramonkey-what-does-this-mean-what-i)**.

* * *

## 回答 #10

> 赞同：44
> 
> 时间：2014-02-06T10:35:13.650

有趣的复活节彩蛋。
在 Ubuntu 版本的 Chrome 中，在任务管理器 ( `shift`+ `esc`) 中，您可以通过右键单击添加一个在意大利语版本中为“Capre Teletrasportate”（传送山羊）的科幻专栏。

关于它的一个有趣的理论就在[这里](http://news.softpedia.com/news/Chrome-s-quot-Goats-Teleported-quot-Easter-Egg-Hints-at-a-Wonderful-Future-323197.shtml)。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-11-17T19:11:42.240

**这不是一个内部笑话**

[显然它只是山羊模拟器](https://play.google.com/store/apps/details?id=com.coffeestainstudios.goatsimulator)的应用程序检查 器 - 由 Coffee Stain Studios

如果您安装了山羊模拟器，那么您就是山羊。如果你没有安装它，你就不是山羊。

我想这更像是一位开发人员的个人实验，最有可能找到有共同兴趣的人。

# java - spring 应用程序的 java 泛型绑定不匹配

> ID：13375359
> 
> 赞同：2
> 
> 时间：2012-11-14T08:34:06.437
> 
> 标签：java, spring, generics

我正在尝试使用 Spring MVC 创建一个 REST api。我没有为每个控制器编写 CRUD 方法，而是创建了一个抽象类来处理典型的 REST CRUD 场景。所以我创建了以下这些类

```
public interface DomainObject<ID extends Serializable> {}

public class Apps implements DomainObject<String>{}

public interface AppsRepository extends PagingAndSortingRepository<Apps, String> {}

public abstract class AbstractController<T extends PagingAndSortingRepository<DomainObject<Serializable>, Serializable>> {} 
```

使用上面的类/接口定义，我如何声明一个扩展 AbstractController 的类？

我尝试使用声明 AppsController

```
public class AppsController extends AbstractController<AppsRepository>{} 
```

没有任何运气。Eclipse 显示以下错误

```
Bound mismatch: The type AppsRepository is not a valid substitute for the bounded parameter <T extends PagingAndSortingRepository<DomainObject<Serializable>,Serializable>> of the type AbstractController<T> 
```

我完全被困住了。我已经尝试了一段时间没有任何运气的不同方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:03:04.310

同样， as`List<String>`不是 的子类型`List<Object>`，`PagingAndSortingRepository<Apps, String>`（因此`AppsRepository`）不是 的子类型`PagingAndSortingRepository<DomainObject<Serializable>, Serializable>`

`PagingAndSortingRepository<? extends DomainObject<? extends Serializable>,? extends Serializable>>`您可以`AbstractController`使用通配符，因为它是在一般情况下不知道该类型是什么。

您需要在以下位置声明相关类型变量`AbstractController`：

```
public abstract class AbstractController<IDT extends Serializable, KT extends Serializable,
    Dom extends DomainObject<IDT>, T extends PagingAndSortingRepository<Dom, KT>> {

  private T repository;

  public AbstractController(T repository) {
    this.repository = repository;
  }

  public Dom get(IDT objectId) {
    return repository.get(objectId);
  }
} 
```

并使`AppsController`扩展`AbstractController<String, String, Apps, AppsRepository>`。

# xslt - 需要帮助编写常见的 xsl

> ID：13375360
> 
> 赞同：-2
> 
> 时间：2012-11-14T08:34:11.083
> 
> 标签：xslt, xslt-1.0, jsonx

我必须生成 XML 输出。它应该显示数组，如下所示。我无法以正确的方式呈现数组。

输入 XML：

```
<accounts>
    <displayOrdinal>0</displayOrdinal>
    <name>String</name>
    <account>
        <accountNumber>String</accountNumber>
        <name>String</name>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <usage>
            <type>String</type>
        </usage>
        <usage>
            <type>String</type>
        </usage>
    </account>
    <account>
        <accountNumber>String</accountNumber>
        <name>String</name>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <balance>
            <balanceAmount>0.0</balanceAmount>
        </balance>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <properties>
            <displayOrdinal>0</displayOrdinal>
        </properties>
        <usage>
            <type>String</type>
        </usage>
        <usage>
            <type>String</type>
        </usage>
    </account>
</accounts> 
```

我的预期输出应如下所示：

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <json:object name="accounts">
        <json:string name="displayOrdinal">0</json:string>
        <json:string name="name">String</json:string>
        <json:array name="account">
            <json:object>
                <json:string name="accountNumber">String</json:string>
                <json:string name="name">String</json:string>
                <json:array name="balance">
                    <json:object>
                        <json:string name="balanceAmount">0.0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="balanceAmount">0.0</json:string>
                    </json:object>
                </json:array>
                <json:array name="properties">
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                </json:array>
                <json:array name="usage">
                    <json:object>
                        <json:string name="type">String</json:string>
                    </json:object>
                    <json:object name="usage">
                        <json:string name="type">String</json:string>
                    </json:object>
                </json:array>
            </json:object>
            <json:object>
                <json:string name="accountNumber">String</json:string>
                <json:string name="name">String</json:string>
                <json:object name="balance">
                    <json:string name="balanceAmount">0.0</json:string>
                </json:object>
                <json:array name="balance">
                    <json:object>
                        <json:string name="balanceAmount">0.0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="displayOrdinal">0</json:string>
                    </json:object>
                </json:array>
                <json:array name="usage">
                    <json:object>
                        <json:string name="type">String</json:string>
                    </json:object>
                    <json:object>
                        <json:string name="type">String</json:string>
                    </json:object>
                </json:array>
            </json:object>
        </json:array>
    </json:object>
</json:object> 
```

我使用的 XSL 如下：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
    <xsl:output method="xml" indent="yes" encoding="UTF-8" omit-xml-declaration="yes"/>
    <xsl:strip-space elements="*"/>
    <!-- Array -->
    <xsl:template match="*[*[2]][name(*[1])=name(*[2])]">
        <json:object name="{name()}">
            <json:array name="{name(*[1])}">
                <xsl:apply-templates/>
            </json:array>
        </json:object>
    </xsl:template>
    <!-- Array member -->
    <xsl:template match="*[parent::*[ name(*[1])=name(*[2]) ]] | /">
        <json:object>
            <xsl:apply-templates/>
        </json:object>
    </xsl:template>
    <!-- Object -->
    <xsl:template match="*">
        <xsl:choose>
            <xsl:when test="text()">
                <json:string name="{name()}">
                    <xsl:value-of select="."/>
                </json:string>
            </xsl:when>
            <xsl:otherwise>
                <json:object name="{name()}">
                    <xsl:apply-templates/>
                </json:object>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <!-- String -->
    <xsl:template match="*[not(*)]">
        <xsl:choose>
            <xsl:when test="not(boolean(text()))">
                <xsl:element name="json:null">
                    <xsl:attribute name="name"><xsl:value-of select="name()"/></xsl:attribute>
                </xsl:element>
            </xsl:when>
            <xsl:otherwise>
                <xsl:choose>
                    <xsl:when test="text()= 'false' or text()='true'">
                        <xsl:element name="json:boolean">
                            <xsl:attribute name="name"><xsl:value-of select="name()"/></xsl:attribute>
                            <xsl:value-of select="text()"/>
                        </xsl:element>
                    </xsl:when>
                    <xsl:otherwise>
                        <json:string name="{name()}">
                            <xsl:if test="@*">
                                <xsl:attribute name="{name(@*)}"><xsl:value-of select="@*"/></xsl:attribute>
                            </xsl:if>
                            <xsl:value-of select="."/>
                        </json:string>
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:47:45.443

恭喜蒂姆第一个正确的解决方案。

我的解决方案并没有更好，但我将其作为一个感兴趣的问题提出。它产生与 Tim 相同的输出，而且我已经合并了 OP 的原始解决方案尝试建议的 null 和 boolean 类型。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx"
  exclude-result-prefixes="xsl xs">
<xsl:output indent="yes" encoding="UTF-8" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" /> 

<xsl:template match="/" name="nameless-object">
  <json:object>
    <xsl:apply-templates />    
  </json:object>
</xsl:template>

<!-- Array -->
<xsl:template match="*
  [     following-sibling::*[1][name()=name(preceding-sibling::*[1])] ]
  [not( preceding-sibling::*[1][name()=name(following-sibling::*[1])])]">
  <xsl:variable name="array-name" select="name()" />  
  <xsl:variable name="followers" select="
    (.|following-sibling::*)[name()=$array-name]" />
  <xsl:variable name="stop" select="
     (following-sibling::*[name()!=$array-name][1] |
      ../*[last()])[1]" />
  <xsl:variable name="preceders" select="
    ($stop| $stop/preceding-sibling::*)[name()=$array-name]" />
  <xsl:variable name="members" select="
      $preceders[count(.|$followers)=count($followers)]" />
  <json:array name="{$array-name}">
    <xsl:for-each select="$members">
      <xsl:call-template name="nameless-object" />
    </xsl:for-each>  
  </json:array>
</xsl:template>

<xsl:template match="*
    [preceding-sibling::*[1][name()=name(following-sibling::*[1])] ]" />

<!-- Object -->  
<xsl:template match="*">
  <json:object name="{name()}">
    <xsl:apply-templates />
  </json:object>
</xsl:template>

<!-- String -->
<xsl:template match="*[not(*)]">
  <json:string name="{name()}">
    <xsl:value-of select="." />
  </json:string>
</xsl:template>

<!-- Null -->
<xsl:template match="*[not(*)][.='']">
  <json:null name="{name()}" />
</xsl:template>

<!-- Boolean -->
<xsl:template match="*[not(*)][.='true' or .='false']">
  <json:boolean name="{name()}">
    <xsl:value-of select="." />
  </json:boolean>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:46:57.860

我认为您将需要一些模板。首先，对于数组元素，您需要匹配具有不同前面兄弟但匹配命名的后面兄弟的元素（即它们是数组的第一个元素）

```
<xsl:template 
      match="*
         [local-name() != local-name(preceding-sibling::*[1])]
         [local-name() = local-name(following-sibling::*[1])]" priority="2">
   <json:array name="{local-name()}">
      <xsl:apply-templates select="self::*" mode="array" />
   </json:array>
</xsl:template> 
```

此处使用优先级是因为在最终的 XSLT 中，将有两个模板可能匹配相同的元素，并且需要首先选择一个数组。

然后，您可以通过将元素输出为 json 对象来处理数组中的元素，然后匹配以下同级，但前提是它具有名称 name。

```
<xsl:template match="*" mode="array">
   <json:object>
      <xsl:apply-templates />
   </json:object>
   <xsl:apply-templates select="following-sibling::*[1][local-name() = local-name(current())]" mode="array" />
</xsl:template> 
```

还需要一个模板来阻止数组中的元素独立于数组处理进行匹配，以免输出两次。

```
<xsl:template match="*[local-name() = local-name(preceding-sibling::*[1])]" /> 
```

需要的其他模板将是一个用于字符串元素的模板，它们是没有子元素的元素

```
<xsl:template match="*[not(*)]" priority="1">
   <json:string name="{local-name()}">
      <xsl:value-of select="." />
   </json:string>      
</xsl:template> 
```

最后一个匹配其他元素，这些元素将作为对象输出。

```
<xsl:template match="*">
   <json:object name="{local-name()}">
      <xsl:apply-templates />
   </json:object>      
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/">
      <json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
         <xsl:apply-templates />
      </json:object>
   </xsl:template>

   <xsl:template match="*[local-name() != local-name(preceding-sibling::*[1])][local-name() = local-name(following-sibling::*[1])]" priority="2">
      <json:array name="{local-name()}">
         <xsl:apply-templates select="self::*" mode="array" />
      </json:array>
   </xsl:template>

   <xsl:template match="*" mode="array">
      <json:object>
         <xsl:apply-templates />
      </json:object>
      <xsl:apply-templates select="following-sibling::*[1][local-name() = local-name(current())]" mode="array" />
   </xsl:template>

   <xsl:template match="*[local-name() = local-name(preceding-sibling::*[1])]" />

   <xsl:template match="*[not(*)]" priority="1">
      <json:string name="{local-name()}">
         <xsl:value-of select="." />
      </json:string>      
   </xsl:template>   

   <xsl:template match="*">
      <json:object name="{local-name()}">
         <xsl:apply-templates />
      </json:object>      
   </xsl:template>

   <xsl:template match="@*|node()[not(self::*)]">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx">
   <json:object name="accounts">
      <json:string name="displayOrdinal">0</json:string>
      <json:string name="name">String</json:string>
      <json:array name="account">
         <json:object>
            <json:string name="accountNumber">String</json:string>
            <json:string name="name">String</json:string>
            <json:array name="balance">
               <json:object>
                  <json:string name="balanceAmount">0.0</json:string>
               </json:object>
               <json:object>
                  <json:string name="balanceAmount">0.0</json:string>
               </json:object>
            </json:array>
            <json:array name="properties">
               <json:object>
                  <json:string name="displayOrdinal">0</json:string>
               </json:object>
               <json:object>
                  <json:string name="displayOrdinal">0</json:string>
               </json:object>
            </json:array>
            <json:array name="usage">
               <json:object>
                  <json:string name="type">String</json:string>
               </json:object>
               <json:object>
                  <json:string name="type">String</json:string>
               </json:object>
            </json:array>
         </json:object>
         <json:object>
            <json:string name="accountNumber">String</json:string>
            <json:string name="name">String</json:string>
            <json:array name="balance">
               <json:object>
                  <json:string name="balanceAmount">0.0</json:string>
               </json:object>
               <json:object>
                  <json:string name="balanceAmount">0.0</json:string>
               </json:object>
            </json:array>
            <json:array name="properties">
               <json:object>
                  <json:string name="displayOrdinal">0</json:string>
               </json:object>
               <json:object>
                  <json:string name="displayOrdinal">0</json:string>
               </json:object>
            </json:array>
            <json:array name="usage">
               <json:object>
                  <json:string name="type">String</json:string>
               </json:object>
               <json:object>
                  <json:string name="type">String</json:string>
               </json:object>
            </json:array>
         </json:object>
      </json:array>
   </json:object>
</json:object> 
```

# c# - C# 匿名类型列表作为参数

> ID：13375362
> 
> 赞同：0
> 
> 时间：2012-11-14T08:34:15.430
> 
> 标签：c#

有一种方法可以声明一个带有匿名类型集合作为参数的方法吗？

例如像这样的伪语法：

```
private void dosomething ( List<class with { string Name, string Lastname, int Age }> persons) {
... 
} 
```

避免创建单次使用类。

**更新** 我想要的是避免定义一个我将仅用于将数据传递给此方法的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:37:12.600

**更新**

你的问题有点令人困惑。

根据您问题的第一部分，我认为您需要一个通用方法。

```
private void dosomething<T>(List<T> items) {
... 
} 
```

但是在查看了您编写的代码之后，您只需要一个界面`IPerson`

```
public interface IPerson
{
   Name { get; set; }
   LastName { get; set; }
   Age { get; set; }
}

private void dosomething(List<IPerson> persons) {
    ... 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:37:34.877

您应该`make a class`使用此匿名类型，因为无法在单个方法范围之外以强方式传递匿名类型，因为在方法范围之外无法表示它。但如果你真的不想，你可以使用动态：

```
public void DoSomething (IEnumerable<dynamic> list)
{
    foreach (dynamic item in list)
    {
        string name = item.Name;
        string lastName = item.LastName;
        int age = item.Age;
    }
} 
```

**请注意，这不是强类型的，因此，例如，如果 Name 更改为 EmployeeName，直到运行时您才会知道存在问题。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:38:35.473

您可以使用动态关键字来执行此操作，尽管您会丢失强类型属性。

```
private void doSomething (List<dynamic> persons)
{
var name = persons.FirstOrDefault().Name;
} 
```

# c++ - BGL 图与边列表上的地图

> ID：13375368
> 
> 赞同：2
> 
> 时间：2012-11-14T08:34:47.467
> 
> 标签：c++, boost, map, boost-graph

我正在尝试使用 Boost Graph Library 创建一些特定的结构。我需要有输入和输出端口的节点（顶点）。每个输出端口可以连接到其他节点的任何输入端口。我希望能够检查特定的输出或输入端口是否连接到任何其他端口。

这个想法是在 adjacency_list 中使用 std::map 作为 OutEdgeList。

根据：[http](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/using_adjacency_list.html#sec:choosing-graph-type) ://www.boost.org/doc/libs/1_52_0/libs/graph/doc/using_adjacency_list.html#sec: choosing-graph-type 我只能选择 std::vector 之一， std::list、std::slist、std::set、std::multiset 和 std::hash_set。（您可以选择 mapS 作为一种类型，但它是作为 std::set 实现的，我无法通过键获取值）

我有几个问题：

1.  可以使用 std::map 吗？如果是怎么办？
2.  使用 std::map 时如何遍历顶点的输入？
3.  如果以上是不可能的，我该如何实现适合该问题的结构？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:12:22.343

我终于切换到了不像 BGL 那样 hacky 的[Lemon 图形库](http://lemon.cs.elte.hu/trac/lemon)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:13:23.013

我看不出为什么 map 不能用作存储传出边的数据结构。Map 有迭代器，其工作方式与 say`std::vector`等类似。要处理传入的边，每个顶点需要 2 个映射。AFAIK BGL 支持两个顶点列表。

我建议你修改（hack）BGL，看看会发生什么。变化可能不小。您必须为您的新型容器提供 adjacency_list 特化。这很可能会奏效。

# asp.net-mvc - Mvc 中的 DataTable 模型绑定

> ID：13375370
> 
> 赞同：2
> 
> 时间：2012-11-14T08:34:56.163
> 
> 标签：asp.net-mvc, datatable, controller, model-binding

我正在使用带有aspx视图引擎的asp.net mvc从excel文件中读取，从中提取联系信息，将其显示给用户，当他\她确认它将保存在数据库中时。

现在在我的页面中，我将 DataTable 作为模型，并通过 foreach 循环向用户展示。然后我有一个提交按钮，当用户单击它时，我希望我的数据表返回到控制器中的操作。但我的数据表为空。

我怎样才能让我的数据表回到我的控制器？

aspx 第一行：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Authenticated.master"
Inherits="System.Web.Mvc.ViewPage<System.Data.DataTable>" %> 
```

控制器动作定义：

```
public virtual ActionResult SaveExcelContacts(DataTable dt) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:18:41.237

我认为您无法`DataTable`在提交时绑定，或者至少这不是一个很好的概念。查看`DataTable` [http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)的文档。将所有数据发送到客户端并在服务器上取回以重建`DataTable`对象太复杂了。
您最好从`DataTable`自己的模型类中提取数据，然后尝试在提交时绑定它。不要忘记以视图的形式包含隐藏的输入，这样数据将被发布到服务器并可以被绑定。

**更新 - 刚刚添加了一些可以帮助您解决问题的代码片段**

```
// some service for data retrieval
public interface IUserService{
    /// <summary>
    /// Extracts MyUserInfo object from DataTable (or excel)
    /// </summary>
    MyUserInfo GetUserInfo(int id);
    void SaveUserInfo(MyUserInfo userInfo);
}

// model class
public class MyUserInfo
{
    public int UserId { get; set; }
    public string Name { get; set; }
}

//controller
public class MyController : Controller
{
    IUserService userService;

    [HttpGet]
    public ActionResult UserInfo(int userId)
    {
        var user = userService.GetUserInfo(userId);

        return View(user);
    }

    [HttpPost]
    public ActionResult UserInfo(MyUserInfo myUserInfo)
    {
        userService.SaveUserInfo(myUserInfo);
        return RedirectToAction("SomeOtherAction","OnControllerOfYourChoice");
    }
} 
```

*看法*

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<MyUserInfo>" %>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <% using (Html.BeginForm("UserInfo","MyController"))
       { %>
       <label>UserName:</label>
       <%= Model.Name %>
       <%= Html.HiddenFor(m => m.UserId) %>
       <%= Html.HiddenFor(m => m.Name) %>
       <input type="submit" name="ConfirmUser" value="Confirm" />
    <%} %>
</asp:Content> 
```

# c# - 如何将变量从一个场景中的一个对象传递到 Unity3D 中另一个场景中的另一个对象？

> ID：13375372
> 
> 赞同：2
> 
> 时间：2012-11-14T08:35:02.363
> 
> 标签：c#, object, unity3d

是否可以将变量从一个场景中的一个对象传递到另一个场景中的另一个对象？如果是这样，我需要将 unityNameSelected 全局变量从附加在场景 2 中的对象中的第一个脚本（如下所列）传递到附加到场景 1 中另一个对象的第二个脚本。感谢您的帮助。

```
{

        while ( reader.Read() ) 
        {
            if ( reader.NodeType == XmlNodeType.Element ) 
            {
                if ( reader.HasAttributes ) 
                {
                    if ( reader.GetAttribute("UnityName") != null ) 
                    {
                        unityName = reader.GetAttribute("UnityName");
                        if(!values.Contains(unityName))
                        {
                   values.Add(unityName);
                   DontDestroyOnLoad(GameObject.Find("unityName")); 

                         unityNameSelected = unityName;
                    //string[]  unityNameSelected3 = {unityName};
                    //   unityNameSelected =unityNameSelected3;
                           print(unityNameSelected.ToString());

          }
                   }
                            }
                    }
                }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:48:40.820

看起来您已经知道如何防止对象被统一（`DontDestroyOnLoad`）破坏。所以你现在需要做的就是将它存储在某个地方，在下一个关卡加载后仍然可以访问它。一个简单的方法是使用静态变量：

```
public class MyScript : MonoBehaviour
{
    public static GameObject unityNameSelected;
} 
```

# servicestack - 服务堆栈剃须刀

> ID：13375373
> 
> 赞同：1
> 
> 时间：2012-11-14T08:35:10.867
> 
> 标签：servicestack

ServiceStack Razor 是否支持完整的 ASP.NET MVC razor 语法？我没有看到一些辅助方法，例如`@Html.DropDownlist...`

如果它支持完整的语法，我必须在我的 Web.config 文件中包含什么命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:02:19.400

ServiceStack 确实使用了 Microsoft 的 Razor 版本，但您正在寻找的`@Html.DropDownList`是尚未全部导入 ServiceStack的**ASP.NET MVC Html 扩展。**

# java - 如何将焦点放在“org.eclipse.jface.dialogs.MessageDialog”上的第二个按钮

> ID：13375374
> 
> 赞同：0
> 
> 时间：2012-11-14T08:35:12.423
> 
> 标签：java, eclipse-plugin

我正在尝试使用以下代码显示消息对话框：

```
MessageDialog dialog = new MessageDialog(shell, "My Title", null,
             "Are you Sure?", MessageDialog.CONFIRM, 
              new String[] { "Yes","No" }, 0); 
```

唯一的问题是当显示消息对话框时，它会显示`"Yes"`按钮上的焦点，因此如果用户默认按下回车`"Yes"`键。 **我怎样才能将焦点放在“否”按钮上**，以便当用户点击输入“否”时被按下。

**请注意**，我不想更改按钮的顺序。它应该首先是 Yes 和 Than No。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:53:21.097

只需将最后一个构造函数参数设置为您希望成为默认按钮的索引即可。根据Javadoc：

```
public MessageDialog(Shell parentShell,
                 String dialogTitle,
                 Image dialogTitleImage,
                 String dialogMessage,
                 int dialogImageType,
                 String[] dialogButtonLabels,
                 int defaultIndex) 
```

**defaultIndex** - 默认按钮的按钮标签数组中的索引

# codeigniter - 如何在插入之前使用 Codeigniter 在多条记录上验证数据

> ID：13375377
> 
> 赞同：0
> 
> 时间：2012-11-14T08:35:24.903
> 
> 标签：codeigniter

我正在使用 Codeigniter 构建一个接口来在数据库中创建多个记录。

输入是从 Excel 文件复制和粘贴的文本，字段名称位于顶行。

解析该文本并将其转换为数组很容易。但是我尝试考虑在将数据插入数据库之前验证数据的最佳方法是什么（确保所有非空字段都已填充，所有整数字段都是数字，所有外键都是有效的，等等） .

我正在寻找类似于 CI 中的表单验证规则的东西。关于我应该从哪里开始寻找的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:28:56.117

出色地！这只是一些想法，我没有在这里发布任何代码。
创建一个库并定义整数、数字和外键的方法。
如果任何不包含任何数据，则使用默认值填充它，如果是字符串，则使用 ''，如果是整数，则使用 0，依此类推。现在创建方法来运行验证并根据您希望如何显示错误执行一些逻辑。我也做过同样的事情。

# iphone - 我应该发布一个应用程序如果我需要测试 phonegapp 应用程序内购买？

> ID：13375379
> 
> 赞同：2
> 
> 时间：2012-11-14T08:35:40.333
> 
> 标签：iphone, ios, cordova

我需要在应用购买插件中测试 phonegap。

在 iTunes 连接站点上，我不确定是否应该选择管理您的应用程序 >> 添加新应用程序按钮以在应用程序购买中进行测试。

我没有发布应用程序或通知应用程序启动日期的目的。我只需要测试应用内购买。我应该怎么做才能让苹果知道我只需要在应用购买中测试我正在开发的应用？
还是有什么我想念的？
我可以在不发布到 itunesconnect 的情况下在应用购买中进行测试吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:38:57.173

您需要使用 iTunes Connect 来测试应用内购买。但是您不需要将二进制文件传输到 iTunes Connect 来测试应用内购买。

这是一个很好的[教程](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)，请参考。

# git - git pre-commit 代码修改在提交之后而不是之前应用

> ID：13375380
> 
> 赞同：1
> 
> 时间：2012-11-14T08:35:41.763
> 
> 标签：git, sh, githooks, pre-commit

我编写了一个预提交挂钩来增加源中的版本号。为什么在提交**后应用更改？**在提交之前我能做些什么呢？

```
#!/bin/sh
# Hook to increment version number before checkin

REPO_DIR=$(cd `dirname $0`/../.. && pwd)
VERS_FILE="${REPO_DIR}/version.php"
CUR_DATE=`date -u '+%Y-%m-%d %H:%M:%S'`
HOOK=`basename $0`

if [ -w ${VERS_FILE} ]; then
    # increment last digit of version string
    perl -i -pe 's/(\$version\s?=\s?['\''|"][\d\.]+)(\d+)/"$1".($2+1)/e' "${VERS_FILE}"
    RV=$?
    if [ 0 -ne ${RV} ]; then
        echo "ERROR: Updating version in ${VERS_FILE} failed"
        exit $RV
    fi
    echo "INFO: Increment version in file ${VERS_FILE}"
fi

echo "Finish $HOOK at $CUR_DATE"
exit 0 
```

我知道不建议进行此类自动更改。但从技术上讲，无论如何这应该是可能的。我在 Ubuntu 9.10 上使用 git 1.6.3.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:45:56.240

您的预提交脚本会修改文件的工作树副本，但不会修改索引中的版本。后一个是实际承诺的。

您需要`git add`修改后的文件。但是，这样做意味着对该文件的所有更改都将包含在每次提交中，即使您尝试仅提交工作树中的一些更改。

# php - 确定一个项目可能在哪个页面上？

> ID：13375382
> 
> 赞同：1
> 
> 时间：2012-11-14T08:35:49.260
> 
> 标签：php, codeigniter

给定分页结果集中特定元素的 MySQL 主键，是否有一个函数可以获取该元素所在的页码？

如果没有，有什么伪代码可以帮助我到达那里？请注意，可以删除主键，并且序列中会有“间隙”，因此仅靠简单的算术可能无法工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:39:01.130

```
SELECT COUNT(*) as amountBefore FROM `table` WHERE `id` <= 'id'

page = ceil(amountBefore / amountPerPage) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:46:00.420

像这样的东西：

```
SELECT FLOOR(POSITION/15) FROM (
    SELECT @rownum:=@rownum+1 as POSITION, id 
    FROM table_name, (SELECT @rownum:=0) r
    ORDER BY published DESC
 ) t WHERE id = 17; 
```

（给定您的 id`17`和您每页的商品`15`以及您订购的属性是`published`）

但请注意，任何解决方案（如果你在 PHP 中更是如此）有点浪费，因为大量数据是临时收集的 - 如果以任何方式可能尝试通过路由/获取参数/url 接收当前页面.

# makefile - Makefile 中用于链接 C++ 目标文件的默认链接器设置

> ID：13375394
> 
> 赞同：29
> 
> 时间：2012-11-14T08:36:18.520
> 
> 标签：makefile

考虑这个`Makefile`

```
% cat Makefile
main: main.o add.o 
```

它使用`cc`而不是`g++`链接目标文件

```
% make
g++ -Wall -pedantic -std=c++0x   -c -o main.o main.cpp
g++ -Wall -pedantic -std=c++0x   -c -o add.o add.cpp
cc   main.o add.o   -o main
main.o:main.cpp:(.text+0x40): undefined reference to `std::cout'
... 
```

我如何告诉 (GNU) Make to use `g++`(链接 C++ 库) 而不是`cc`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-14T08:36:18.520

(GNU) Make 有内置的规则，这很好，因为它足以提供没有规则的依赖：

```
main: main.o add.o
    # no rule, therefore use built-in rule 
```

但是，这种情况下的内置规则`$(CC)`用于链接目标文件。

```
% make -p -f/dev/null
...
LINK.o = $(CC) $(LDFLAGS) $(TARGET_ARCH)
...
LINK.cc = $(CXX) $(CXXFLAGS) $(CPPFLAGS) $(LDFLAGS) $(TARGET_ARCH)
...
%: %.o
#  recipe to execute (built-in):
        $(LINK.o) $^ $(LOADLIBES) $(LDLIBS) -o $@ 
```

要让 Make 选择正确的链接器，设置`LINK.o`为`LINK.cc`. 因此，最小`Makefile`可以看起来像

```
% cat Makefile
LINK.o = $(LINK.cc)
CXXFLAGS=-Wall -pedantic -std=c++0x

main: main.o add.o 
```

# c++ - C++ 隐式内联函数

> ID：13375400
> 
> 赞同：3
> 
> 时间：2012-11-14T08:36:42.790
> 
> 标签：c++, inline

我在我的文档中读到了关于内联函数的内容。我的文件说：有两种类型的内联函数：`implicity function`和`explicity function`.

`Explicity function`：您`inline`在函数之前使用关键字，并在类之外使用。例如：

```
inline int Math::add(int a, int b){ return a + b; } 
```

`Implicity function`：类中的每个方法都是隐式的。例如：

```
class Math {
   int add(int a, int b) { return a + b;}   // implicity inline function
}; 
```

所以，如果这是真的，那么，我不想使用的每个方法，我都`inline`必须在类之外声明，对吗？如果这是真的，我可以在类中实现一个方法并且不想要内联函数。

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T08:48:19.313

保证它不是内联的唯一方法是使其在编译时无法访问，例如，将其主体定义放入 cpp 文件而不是头文件。

更新：一位评论者说，即使将函数体放入不同的编译单元也不能保证有帮助。他是完全正确的。通常它会有所帮助，但一些编译器仍然可能内联该函数。**因此，没有可靠的方法来禁用不依赖于编译器的内联。**

所有的内联只是优化的问题。如果启用了适当的优化，通过编写一个 inline 关键字，您只需告诉编译器您建议内联该函数。您既不能强制编译器内联函数，也不能强制编译器不内联它。对于某些编译器，例如 VC++，有一些方法可以做到这一点（`__declspec(noinline)`），但它们都依赖于编译器。

为什么需要禁用内联？编译器通常知道得更好......如果是出于调试目的，只需禁用优化，或者至少禁用函数内联。您甚至可以在单个文件中使用编译指示来执行此操作。无论如何，通常应该避免调试发布版本，尽管有时当然是无法避免的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T08:58:07.493

阅读[C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)，如何定义“隐式内联函数”：

> **成员函数可以在其类定义中定义（8.4），在这种情况下，它是一个内联成员函数**（7.1.2），或者如果它已经被声明但未在其类定义中定义，则它可以在其类定义之外定义类定义。出现在类定义之外的成员函数定义应出现在包含类定义的命名空间范围内。除了出现在类定义之外的成员函数定义，以及出现在类定义之外的类模板和成员函数模板 (14.7) 的成员函数的显式特化之外，不得重新声明成员函数。

编译器也不保证它真的会执行替换：

> 带有 inline 说明符的函数声明（8.3.5、9.3、11.4）声明了一个内联函数。inline 说明符向实现表明，在调用点对函数体进行内联替换优于通常的函数调用机制。 在调用点**执行此内联替换不需要实现；**然而，即使省略了这个内联替换，7.1.2 中定义的内联函数的其他规则仍应得到遵守。

尽管打开优化后可能会发生许多奇怪的事情，但其他所有功能都可能是“非内联”的，例如查看[`gcc`- 优化选项](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)：

*   `-finline-small-functions` [作为一部分`O2`]

    > 当函数体小于预期的函数调用代码时，将函数集成到调用者中（因此程序的整体大小变得更小）。编译器启发式地决定哪些函数足够简单，值得以这种方式集成。这种内联适用于所有函数，甚至那些未声明为内联的函数。

*   `-finline-functions` [作为一部分`O3`]

    > 考虑所有的内联函数，即使它们没有被声明为内联。编译器启发式地决定哪些函数值得以这种方式集成。
    > 如果对给定函数的所有调用都被集成，并且该函数被声明为静态，那么该函数通常不会作为汇编代码本身输出。

*   `-finline-functions-called-once` [作为一部分`O1`]

    > 考虑所有调用一次的静态函数以内联到它们的调用者，即使它们没有标记为内联。如果集成了对给定函数的调用，则该函数本身不会作为汇编代码输出。

另一方面，您可以告诉编译器不要内联函数 ( `-fno-inline`)：

> 除了用 always_inline 属性标记的函数外，不要展开任何内联函数。这是不优化时的默认值。
> 单个函数可以通过用 noinline 属性标记来免除内联。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T08:38:38.960

是的，这是真的，在类定义中定义的所有方法都是隐式**的**`inline`。

请注意，`inline`这并不意味着编译器实际上会在代码中内联它。如果您不希望它是内联的，只需在实现文件中分离实现即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T10:01:32.577

`inline`首先，对类中定义的函数使用关键字是完全合法的：

```
struct MyClass
{
    inline int someFunctions() { return 42; }
}; 
```

这里的关键字是多余的，但不是非法的。

其次，虽然`inline`关键字是对编译器的提示，但它唯一正式的、必需的含义是允许函数的多个定义，而不会由于违反一个定义规则而导致未定义的行为。编译器在某些情况下会忽略它：

*   当为调试设计的选项被提供（或优化被关闭）时，大多数编译器会忽略它，并且实际上不会内联任何东西。

*   当打开最大优化时，最好的编译器会完全忽略它；函数是否内联将唯一取决于编译器对代码和分析数据的分析，并且给定函数将内联在一个位置（它位于紧密循环的中间），而不是在另一个位置。（与其他一些发帖人所说的不同，即使调用站点和函数定义位于两个不同的翻译单元中，也会发生这种情况。）

在这两个极端之间，许多编译器*不*进行模块间分析，并且至少在开启某种程度的优化时会“接受提示”，至少大部分时间是这样。例如， 如果编译器无法在编译时确定递归的深度，则几乎可以肯定*不会内联生成递归内联函数。*大多数编译器如果无法通过局部静态分析确定对象的实际类型，则无法内联生成虚函数，尽管其中一些最好的，给定的分析器输出显示，99% 的时间将调用一个特定的重载, 可能会生成一个`if`, 并内联该情况。

通常，您希望在头文件中定义尽可能少，因此对于“导出”类，`inline`除非分析器说绝对必要，否则您不会使用（显式或隐式）。对于在源文件中定义的本地类，是否在类定义中定义函数更多的是风格问题（编译器是否内联它们可能会或可能不会有所不同——正如我所说，使用通常的调试选项，大多数编译器不会内联任何东西）。

# java - 文本字段只接受数字输入

> ID：13375402
> 
> 赞同：0
> 
> 时间：2012-11-14T08:36:43.717
> 
> 标签：java, swing, jframe, document, jtextfield

我有一个带有文本字段的 jframe。我想问一下怎么只能接受包含数字的输入文本字段，所以当用户输入字母时不会被接受

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:42:31.737

使用[`DocumentFilter`](http://download.oracle.com/javase/6/docs/api/javax/swing/text/DocumentFilter.html)：[例子](https://stackoverflow.com/a/8017847/597657)。

另见：

*   [如何使用格式化文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)
*   [验证输入](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification)

# c++ - 网络上的分布式标识符

> ID：13375403
> 
> 赞同：1
> 
> 时间：2012-11-14T08:36:45.867
> 
> 标签：c++, networking, synchronization, distributed, identity

我需要创建一个基于标识符（自动生成、数字、可重用）相互通信的分布式对象网络。如何在图形的每个节点上创建对象而不产生冲突？

目前，我使用*主*节点来分配 ID，但此解决方案涉及在其他节点上异步创建对象，我想将其删除。特别是因为应用程序是实时的，所以 RDBMS 是不行的。

我知道这是一个相当经典的分布式计算问题，但我可能缺乏正确搜索的词汇。

TCP 是我可以使用的唯一协议，并且网络存在延迟。万一这很重要，我正在使用 C++，但我正在寻找一种算法，而不是库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T23:58:56.197

您可以让它一次为每个节点分配一个块或一系列 ID，而不是主节点一次分配一个 ID。然后每个节点根据需要从该块内分配 ID。

当一个节点的 ID 变低时，它会向主节点请求另一个块。通过这种方式，节点可以异步创建对象，并且仍然有保证的唯一 ID。

我假设当对象被删除时，ID 会返回到池中以供重复使用。

如果您不希望主节点负责分配 ID，另一种选择是使用以太网 MAC 地址或 IP 地址等附加计数器来组成 ID。这要求网络上不会出现重复的 IP 或 MAC 地址。此 ID 将大于 16 位。

但是，如果所有节点都在同一个网络上，例如 IP 地址 AA.BB.CC.DD，那么您可以使用 DD 作为前 8 位，然后使用接下来的 8 位作为计数器。这只会为每个节点提供 256 个 ID，这可能还不够。如果子网更小，那么计数器可用的位数显然会增加，也许这足以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:42:48.260

您可能喜欢使用[UUID](http://en.wikipedia.org/wiki/Universally_unique_identifier)作为标识符，它们在设计上是独一无二的，因此您不需要任何额外的算法支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:46:41.460

只是随机创建它。使用 128 位的随机值，发生冲突的机会非常小，您可以假设它为零。在 128 位 uuid 空间上，碰撞概率为 2^64（生日悖论）

显然你需要一个好的熵源，经典`sha1(time(NULL))`是不行的；）

更重要的是：如果节点随机选择它们的 UUID，则绝对不需要中央协调器来创建 UUID 并将其提供给节点。每个节点自己创建自己的 UUID。

# iphone - Xcode：在 webview 中加载 json 链接

> ID：13375406
> 
> 赞同：1
> 
> 时间：2012-11-14T08:37:08.533
> 
> 标签：iphone, xcode, json, webview

我想在 webview 中从我的 Json 数据库加载一个链接。但我不知道我该怎么做。

这是我的 json 的一部分：

```
{
    "ID": "6173",
    "Name": "Heuriger Christine Haller",
    "BeschreibungApp": "Heuriger Christine Haller, 2102 Bisamberg",
    "Link": "http://heurigenapp.nocache.gugler.at/app.php?id=6173",
    "Icon": "Weintraube",
    "Latitude": "48.33284",
    "Longitude": "16.36383",
    "Altitude": "0",
    "Ort": "Bisamberg"
} 
```

我想在网络视图中打开“链接”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:08:37.267

使用像[json-framework](https://github.com/stig/json-framework)这样的解析器来解析接收到的 json。然后，您将很容易从中提取所需的项目。

代码将是这样的：

```
SBJsonParser* parser = [[[SBJsonParser alloc] init] autorelease];
NSDictionary* dict = [parser objectWithString:jsonString];
NSString* url = [dict objectForKey:@"Link"]; 
```

现在您可以使用 NSString url 在 web 视图中加载内容。

编辑：

您可以更好地使用来自 ios5 的 json 序列化。检查这个 tut：[http ://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:57:44.737

您可以使用 Mac OS >10.7 和 iOS >5 中包含的[NSJSONSecialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)类。从您的示例中获取链接的代码如下所示：

```
NSString* jsonString = @"your json as a string";
NSData* jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary* jsonDict = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:NULL];
NSString* link = [jsonDict objectForKey:@"Link"];
NSURL* linkUrl = [NSURL URLWithString:link]; 
```

# linux - 录制网络流媒体广播

> ID：13375407
> 
> 赞同：2
> 
> 时间：2012-11-14T08:37:11.343
> 
> 标签：linux, streaming, gstreamer, radio, recording

我正在为 linux 编写一个简单的应用程序，它将连接到网络无线电并将流记录到文件中。但是，当我录制时，我希望将流拆分为较小的文件（例如，拆分在每个包含 3 分钟音频的文件中捕获的流）。此外，我的应用程序必须能够处理各种流媒体系统（例如，shoutcast、icecast、mms 等）。

到目前为止，我已经查看了各种框架。起初 Gstreamer 似乎是一个很好的解决方案，但我还没有设法创建一个可以在不丢失任何数据的情况下进行拆分的工作管道。我知道 MPlayer 和 vlc 可以将流转储到文件中，但不能即时进行拆分。Stremripper 不适用于 mms 流。谁能指出我正确的方向。我更喜欢使用 C 或 python 框架，但我愿意接受任何建议:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:10:12.227

gstreamer 可用于这种情况。

*   对于输入，您可以使用 - souphttpsrc 元素，它支持（icecast、shoutcast）
*   对于 mms - 可以使用 mmsrc 源元素。
*   要将文件拆分为多个小文件，请使用“multifilesink”元素。

gstreamer 也有 python 绑定。

# javascript - 如何让图片随机移动并转向页面周围不断变化的方向？（使用 jQuery 和 CSS）

> ID：13375413
> 
> 赞同：2
> 
> 时间：2012-11-14T08:37:32.937
> 
> 标签：javascript, jquery, css, animation

我制作了一张蝴蝶图片在页面上随机移动，模拟一只真正的蝴蝶。

```
$(document).ready(function(){
    animateIMG();
});

function makeNewPosition(){
    // Get viewport dimensions (remove the dimension of the div)
    var h = $(window).height() - 50;
    var w = $(window).width() - 50;
    var nh = Math.floor(Math.random() * h);
    var nw = Math.floor(Math.random() * w);
    return [nh,nw];
}

function animateIMG(){
    var newq = makeNewPosition();
    var oldq = $('img').offset();
    var speed = calcSpeed([oldq.top, oldq.left], newq);
    $('img').animate({ top: newq[0], left: newq[1] }, speed, function(){
      animateIMG();        
    });
};

function calcSpeed(prev, next) {
    var x = Math.abs(prev[1] - next[1]);
    var y = Math.abs(prev[0] - next[0]);
    var greatest = x > y ? x : y;
    var speedModifier = 0.1;// control the speed here 
    var speed = Math.ceil(greatest/speedModifier);
    return speed;
} 
```

但我不知道如何将方向（旋转角度）更改为移动方向。也许我应该计算旧点和新点之间的角度。然后使用[这个插件](https://code.google.com/p/jqueryrotate/wiki/Examples) 来旋转角度？

有人可以帮忙修改代码吗？

谢谢！ ![在此处输入图像描述](../Images/7d859d8b240eb1f170287ecc9f47deac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:30:22.383

要计算新角度的度数，您可以使用以下函数：

```
function getNewAngle(prev, next){
   var x = prev[1] - next[1];
   var y = prev[0] - next[0];
   var ang = Math.atan(Math.abs(y)/Math.abs(x))/(Math.PI/180)
   if(x>0&&y>0)
   return ang;
   else if(x<0&&y>0)
   return ang+90;
   else if(x>0&&y<0)
   return ang-90;
   else
   return ang+180
} 
```

之后你可以使用

```
-webkit-transform: rotate(angle);
-moz-transform: rotate(angle); 
```

适用于所有浏览器的 FF 和 Chrome 或 JS

# iphone - 如何在uitextfield中输入文本

> ID：13375416
> 
> 赞同：-3
> 
> 时间：2012-11-14T08:37:52.847
> 
> 标签：iphone, objective-c, uitextfield

我已经为这些文本字段实现了代表`UITextField`和方法。以下是方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [textField resignFirstResponder];
}

- (BOOL)textFieldShouldReturn:(UITextField *)aTextField
{

    [aTextField resignFirstResponder];
    return YES;
} 
```

我的问题是，当我想在`UITextField`其委托中输入文本时，不允许我将文本输入到文本字段中。请告诉我如何将数据输入文本字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:40:59.960

删除 textFieldDidBeginEditing 代码。

```
[textField resignFirstResponder]; 
```

告诉应用程序文本字段不再需要键盘。

所以你说...

当我开始编辑文本字段时，隐藏键盘并停止编辑文本字段。

您还需要添加...

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T08:43:40.767

当您点击 textField 时，此`- (void)textFieldDidBeginEditing:(UITextField *)textField`委托方法将首先起作用。

您正在解除该委托方法中的键盘，例如：`[textField resignFirstResponder];`删除该行。一切都会好起来的。

# visual-studio-lightswitch - Lightswitch - 通过代码更改数据项的相关属性

> ID：13375432
> 
> 赞同：0
> 
> 时间：2012-11-14T08:38:48.063
> 
> 标签：visual-studio-lightswitch

这是类似于我的问题的简化示例。假设你有 2 个 sql 表：Car 和 Owner

表 Car 具有外键 IDOwner。Lightswitch 数据模型具有数据项 Car 和 Owner，以及

dataitem Car 有子对象 Owner，默认情况下为 null。我想通过代码设置 Onwer 子对象，而不是通过自动生成的 AutoCompleteBox 或类似的东西。我这样写代码：

所有者 ow = this.DataWorkspace.MyData.Owners.Where(x => x.IDOnwer = SOME_ID).First(); //此时变量 ow 是常规加载的非空对象 - 我在调试器中看到它

this.CarDataItem.Owner = ow;

//此时 ow 仍然加载不是 null 对象但是 this.CarDataItem.Owner 仍然是 null - //也在调试器中检查

我的问题是通过代码更改此类数据项的子对象的正确方法是什么？

如果我打开屏幕设计器并在屏幕上拖动 CarDataItem 的 Owner 属性，我将得到 AutoCompleteBox ，我可以在其中选择 Owner 子对象，但我不希望这样。我想做这个

自动通过代码。非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:00:10.633

我不明白为什么*CarDataItem*存在。我知道您有一个*Car*实体，并且您有一个*Owner*实体。你定义了它们之间的关系吗？在您的情况下，由于您没有指定必须有所有者，因此您的关系将是 0..1-Many。

如果您添加了该关系，则*Car*实体将获得一个名为*Owner*的导航属性（除非您更改了名称）。然后，您的代码执行以下操作将是一件简单的事情：

//这比您拥有 Owner ow = this.DataWorkspace.MyData.Owners_SingleOrDefault(SOME_ID); 的行更可取

this.Car.Owner = ow;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:47:35.540

您是否有模型层并首先使用数据注释（例如 EF 代码）来建立关联？

这是一个人为的 msdn 示例 [http://msdn.microsoft.com/en-us/library/ff422034%28v=VS.91%29.aspx](http://msdn.microsoft.com/en-us/library/ff422034%28v=VS.91%29.aspx)

# c - VS2005+WinSock: 警告 C4018: '<' : 有符号/无符号不匹配

> ID：13375434
> 
> 赞同：0
> 
> 时间：2012-11-14T08:38:49.437
> 
> 标签：c, visual-studio-2005, winsock

我没有设法`warning C4018: '<' : signed/unsigned mismatch`从此代码中删除 a ：

```
SOCKET s;
fd_set set;
FD_CLR(s,&set); 
```

在我看来，问题出在 VS2005 的 FD_CLR 实现内部，实际上这不是什么大问题，只是很烦人。是否有此代码的可移植等效版本不会产生警告？（注意：我知道有一个 #pragma 可以关闭警告。我也知道 FD_CLR 宏实际上可以完美运行。我只是在寻找一种编写代码而不发出警告的方法）

编辑：最终，我发现了发生了什么：第三方 .h 包含（错误！！！）将“u_int”重新定义为“int”。这就是为什么编译器抱怨 FD_CLR 中的 u_int 之间的比较。真丢人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:36:25.897

与其在每次调用时全局或本地禁用警告`FD_CLR()`，不如为该调用编写一个包装器，为您在本地禁用该特定警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:51:57.410

也许您可以重写宏 FD_CLR 并修改循环变量的 int/uint，但这会导致宏重新定义警告。我认为#pragma 更好。

# php - php中foreach的问题

> ID：13375440
> 
> 赞同：1
> 
> 时间：2012-11-14T08:39:07.720
> 
> 标签：php, mysql

我有这段代码，我使用它来首先提取我的数据库中存在的所有用户，然后，我查询他们每个人，看看他们计算了多少点。我的问题是，分配了查询的积分的用户提取了正确的信息，但是如果一个用户没有任何积分，那么，所有这些用户都不会出现 0 分，而是给了另一个用户的积分.. 出了什么问题用我的代码？

```
//here i get all user id's
$query = 'SELECT * FROM users';
    $result = mysql_query($query) or die(mysql_error());
    $id_user = array();
    $phone = array();
    $name = array();
    while($row = mysql_fetch_array($result)){
        $id_user[]=$row['user_id'];
        $phone[]=$row['phone'];
        $name[]=$row['first_name'];
    }
//here i get all points collected for each user
    foreach ($id_user as $user_id) {
    $queryuser ='SELECT SUM(basket_value) as total_sum FROM retailer WHERE user_id="'.$user_id.'"';
    $resultuser = mysql_query($queryuser) or die(mysql_error());
    echo "<table>";
    while($row = mysql_fetch_array($resultuser)){

            $total += $row['total_sum'];
            echo "<tr>";
            echo "<td>";
            echo $total;
            echo "</td>";
            echo "<td>";
            echo $user_id;
            echo "</td>";
            echo "</tr>";
        }
    }
    echo "<table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:42:21.007

你的问题：`all those users won't appear 0 points, but another user's points are given to them`

`$total=0;`因为之前需要初始化`while($row = mysql_fetch_array($resultuser)){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:43:01.453

您必须在循环之前重置`$total`为 0 。`while`

当您加入两个表时，您还可以简化计算：

```
select u.user_id, u.phone, u.first_name, sum(r.basket_value) as total_sum
from users u
left join retailer r on r.user_id = u.user_id
group by u.user_id, u.phone, u.first_name; 
```

然后，您可以只循环一次结果集并保存所有这些额外的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:44:38.500

您忘记在 foreach 循环中初始化 $total 。

```
foreach ($id_user as $user_id) {
  $total = 0;
  ... 
```

# unix - 是否有可靠的方法来唯一地标识一个进程？

> ID：13375441
> 
> 赞同：0
> 
> 时间：2012-11-14T08:39:11.067
> 
> 标签：unix

我正在使用服务器端脚本从数据库发送电子邮件。我想检查我为每个电子邮件列表创建的进程是否仍在运行，因此如果不是，我可以重新启动该特定列表的脚本。我考虑过使用 PID，但我想知道是否有更可靠的方法来识别它们，而不用担心 PID 回收和具有相同 PID 的不同进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T02:11:04.950

如果您的服务器端脚本被命名为“db_email.sh”，您的监控脚本可以只查找这些进程并计算结果。

```
PROCESS_COUNT=$(ps -eaf | grep "[d]b_email.sh" | wc -l)
if [[ $PROCESS_COUNT -eq 0 ]]; then
   echo "He's dead, Jim"
fi 
```

grep 命令使用正则表达式，将其中一个字母括在方括号中，这样它就不会在进程列表中找到自己并将您的计数增加 1。

# git - 如何在 Trac 1.0 中浏览 git 分支？

> ID：13375446
> 
> 赞同：0
> 
> 时间：2012-11-14T08:39:31.097
> 
> 标签：git, branch, trac

我设置了 Trac 1.0，添加了条目`tracopt.versioncontrol.git.* = enabled`并`[components]`使用管理面板添加了我的存储库。虽然分支出现在时间线中，但源浏览器不提供浏览不同分支、标签或修订的方法，例如[此处](https://code.flumotion.com/trac/browser)（该站点使用 Trac 0.12 和[GitPlugin](http://trac-hacks.org/wiki/GitPlugin)，已包含在 1.0 中）。是否有我错过的设置或 1.0 git 集成缺少此功能？手动输入时，该`?rev=...`参数将被忽略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:36:34.773

它应该可以工作，但与 GitPlugin 略有不同。他们现在允许在顶层存储各种类型的存储库。因此，您需要单击顶级 repo 名称，然后您会看到“访问”下拉框出现在页面顶部附近。这将允许您选择特定的分支或标签。

您可以在 Trac 自己的存储库中看到这一点。[浏览器](http://trac.edgewall.org/browser)也将您带到顶级，并显示一系列存储库。现在单击一个。例如，[`cboos.git`](http://trac.edgewall.org/browser/cboos.git)。您应该会看到“访问”下拉菜单并能够选择一个分支。

# lotus-notes - Lotus @command 脚本，用于不带附件的回复/全部回复

> ID：13375447
> 
> 赞同：1
> 
> 时间：2012-11-14T08:39:32.337
> 
> 标签：lotus-notes, lotus-formula

我经常在 Lotus Notes 中使用“使用不带附件的历史回复”和“使用不带附件的历史回复所有人”，并希望在工具栏上为它们创建按钮。有人可以为此提供@Command 脚本吗？

我试过使用`@Command([Compose];"Reply With History")`，但它只回复发件人，并***带有***附件。

或者，有没有办法将键序列分配给按钮？例如`Alt+A-R-R`/`Alt+A-P-R`

我在 Lotus Notes 8.5 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:56:29.223

你正在寻找的是

```
@Command([ComposeWithReference]; server : database ; form ; flags) 
```

来自 Notes 帮助：标志：

数字。选修的。以下一项或多项参考属性。通过添加来组合属性。默认为标志 3 加 4。您必须在 Web 应用程序中提供此参数。... 16 -- 从参考副本中删除附件、图像和其他大型对象，用括号中的文本语句替换它们（Web 上除外）。

示例代码：@Command([ComposeWithReference];"":"";"Reply"; 19) => flags 3 + 16

编辑：如果您自定义邮件文件/邮件模板，请在 @Command 之前添加以下公式：

```
@Environment("MailStEd";"9"); 
```

这可以确保您做出回复所有

所以工作代码应该或多或少像这样（自定义标志以满足您的需求）：

```
@Environment("MailStEd";"9");
@Command([ComposeWithReference];"":"";"Reply"; 19) 
```

# database-connection - 如何在 MS Dynamics CRM 2011 中显示我的数据库连接？

> ID：13375453
> 
> 赞同：1
> 
> 时间：2012-11-14T08:39:52.493
> 
> 标签：database-connection, dynamics-crm-2011

我找不到在 MS Dynamics CRM 2011 中显示我的数据库连接的方法。有没有办法做到这一点？我确实拥有系统管理员的权利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:17:58.817

最简单的方法是打开部署管理器。

*   以部署管理员身份登录您的 CRM 计算机（安装 CRM 的用户应该是其中之一）。
*   开始/程序/Microsoft Dynamics CRM 2011 并打开部署管理器。
*   单击组织，右键单击组织上的属性，它将显示 SQL Server。

![在此处输入图像描述](../Images/eac760af518b5e69e1ae8a4539ba4db1.png)

![在此处输入图像描述](../Images/938664825aa80eda1ce68f385ee459e0.png)

（图片来自[xrmadventures](http://xrmadventures.wordpress.com/2011/07/13/editing-ms-crm-2011-organizations-in-deployment-manager/)）

或者您可以查看注册表。再次登录 CRM 机器，开始 > Regedit，转到：Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSCRM

并且看看`configdb`关键，会给你完整的数据源连接。

# java - Java 文本文件解析错误

> ID：13375454
> 
> 赞同：-4
> 
> 时间：2012-11-14T08:39:54.363
> 
> 标签：java

如果文件有一个空行作为文件的最后一行，它会在 while 语句之后爆炸。有人可以帮忙吗？

```
while(in.hasNext())
{
   tempPropID = in.nextInt();
   tempPropType = in.next().toUpperCase();
   tempPropCost =  in.nextDouble();
   tempAgentID = in.nextByte(WIDTH);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:02:28.397

当此代码对错误负责时，您应该尝试分析您正在使用的方法。例如，`in.next().toUppercase()`很容易抛出`NullPointerException`.

# c - 通过 C 控制硬件

> ID：13375455
> 
> 赞同：0
> 
> 时间：2012-11-14T08:39:57.513
> 
> 标签：c

我想使用 C 语言（ANSI/标准 C）控制硬件。我不是在问接口。我想通过 C 代码管理我的计算机资源。比如我怎样才能弹出我的 DVD ROM 驱动器。从扬声器发出哔声的代码。和类似的事情。我需要一个好的教程，或者任何免费的学习材料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:45:06.943

硬件输入/输出控制的基本入口点是[`ioctl`](http://en.wikipedia.org/wiki/Ioctl)（或`DeviceIoControl`在 Windows 上，在同一篇 Wikipedia 文章中进行了描述）。

# asp.net - 为单个用户分配多个角色

> ID：13375457
> 
> 赞同：1
> 
> 时间：2012-11-14T08:40:03.123
> 
> 标签：asp.net, database-design, relational-database, normalization, database-normalization

我目前正在设计一个具有以下要求的角色驱动菜单的数据库。

```
 1\. Menu items can be assigned to a certain 'role'
 2\. A role will be assigned to a user
 3\. A user can have multiple roles 
```

我已经设计了数据库，但是在当前设计中我无法将多个角色映射到单个用户。此外，即使我以某种方式将其包含在我的设计中，我也不明白如何在查询时映射重复的菜单项（当用户被分配多个角色时）。

我虽然将角色存储为逗号分隔值，但这会进一步引入复杂性。他们是更好的解决方案吗？ ![在此处输入图像描述](../Images/0f784eec21955d7e1386c08259acb03a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:04:00.093

用户和角色之间的关系是多对多关系，因此您将不得不在具有两个外键的表中对关系进行建模。就像是：

```
UserToRole
====================
UserToRoleId INTEGER
UserId(FK)   INTEGER
RoleId(FK)   INTEGER 
```

然后，您可以使用此表将用户表和角色表连接在一起并获取多个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T13:01:42.500

C. Trimble 是正确的 (+1)。如果您的菜单项可用于多个角色并且您的用户可以具有多个角色，那么您实际上有两个需要记录**的多对多关系。**

这意味着您需要再添加一个表，如下所示：

![ERD](../Images/6d824c54d396c0e57b2a2c51b3bdb4de.png)

根据 C.Trimble 的回答，该表可以有列，或者您可以有一个只有 UserId + RoleId 的复合主键 - 类似于您的`MenuItemRoles`表。后者将是我的设计偏好，因为该表是一个纯粹的交集，并且没有特别的理由期望它`UserRoles`会有与之相关的孩子。

`UserRoles`请注意，当您检索用户菜单项访问权限时，您可以将链接从to短路，`MenuItemRoles`因为它们都有一个`RoleId`列。这意味着您可以直接在交集表之间加入，而不必`Roles`考虑它。在 TSQL 中，它看起来像：

```
select I.*   -- Never select * in the real world.
from MenuItem I
  inner join MenuItemRoles IR
  on I.ItemId = IR.ItemId
  inner join UserRoles UR
  on IR.RoleId = UR.RoleId
where
  UR.UserId = @TheUserImLookingFor 
```

你可以在 LINQ 中做同样的事情。如果您使用的是 EF，那么您将不得不走很长一段路（通过`Roles`）。

# linux - 创建新的卷组和逻辑卷时，我的物理卷上的数据不会被删除吗？

> ID：13375459
> 
> 赞同：0
> 
> 时间：2012-11-14T08:40:17.700
> 
> 标签：linux, filesystems, sysadmin, hard-drive

[基本上我的问题是安装我在另一个问题https://stackoverflow.com/questions/13356555/how-to-mount-logical-volume](https://stackoverflow.com/questions/13356555/how-to-mount-logical-volume)上发布的逻辑卷。问题主要出在无法识别的卷组上。运行 fdisk -l 时，其中一个分区被清楚地识别为 LVM。并且运行 pvs 显示两个现有的物理卷。

然后我在恢复卷创建时遇到了同样的问题，它只是重新创建 PV 并创建新的 VG。所以我想到了通过一些修改来遵循该解决方案 [http://thuannvn.blogspot.com/2009/10/lvm-volume-group-recovery.html](http://thuannvn.blogspot.com/2009/10/lvm-volume-group-recovery.html)。由于我的 PV 被识别，我正在考虑创建卷组和逻辑卷。

但我不太确定创建 VG 和 LV 是否不会从我打算在 VG 和 LV 上添加的物理上的数据/文件中删除。

请帮帮我。我已经研究了两天了。任何帮助，将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:48:53.450

如果数据在驱动器上，则在其上扩展或设置 lvg 和 lvm 将清除数据。在开始之前，请确保您将所有数据都保存在其他 2 个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:57:15.573

您在该问题上得到的答案在技术上是正确的。

您可以使用链接中有关如何安装逻辑卷的说明强制导入脏卷或不导入卷。

不过老实说，我对数据丢失感到偏执。我敢肯定，在继续之前，您已经将驱动器映像到暂存介质。

将驱动器作为物理块设备镜像到另一个驱动器将做两件事，让您高枕无忧，并且它会在复制过程中读取整个表面。如果存在问题（我怀疑确实存在），您将不得不多次通过才能使您的数据成像。

如果我错了，您仍然会拥有所有内容的副本，以防止您丢失数据。

在继续之前，我会使用 dd_rescue 并对底层媒体进行映像。

# android - 在设备旋转中存活的 AsyncTask 和 Dialog

> ID：13375467
> 
> 赞同：0
> 
> 时间：2012-11-14T08:40:45.690
> 
> 标签：android, dialog, android-asynctask, orientation

我有一个显示对话框的 AsyncTask。我不希望它在设备旋转时消失。

我的解决方案是将它存储在 Application 类中，这样当 Activity 死亡时它就不会死亡。当活动结束时，我只是关闭对话框，当它恢复时，我只是显示对话框。

这似乎有效。当设备旋转时，Dialog 消失，然后重新出现新的 Activity。唯一的问题是，旋转后对话框不再动画。更奇怪的是，重新旋转到原来的方向会导致动画从它停止的地方继续。

为什么会这样？我该如何解决这个问题？卡塔尔

```
public class OrientationActivity extends Activity {
    MyApplication application;

    public class LongOperation extends AsyncTask<String, Void, String> {
          private ProgressDialog dialog;

          public LongOperation(Context context) {
              dialog = new ProgressDialog(context);
              dialog.setCanceledOnTouchOutside(false);
          }

          @Override
          protected void onPreExecute() {
              this.dialog.setMessage("Busy!");
              this.dialog.show();
          }

          @Override
          protected String doInBackground(String... params) {
              while(true){

              }
          }      

          @Override
          protected void onPostExecute(String result) {                           
              if(dialog != null && dialog.isShowing())
                  dialog.dismiss();
          }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        application = (MyApplication) getApplication();

        if(application.longOperation == null) {
            application.longOperation = new LongOperation(this);
            application.longOperation.execute();
        }
    }

    @Override
    public void onPause() {
        super.onPause();

        application.longOperation.dialog.dismiss();
    }

    @Override
    public void onResume() {
        super.onResume();

        application.longOperation.dialog.show();
    }
}

public class MyApplication extends Application 
{
    LongOperation longOperation = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:53:37.883

您是否尝试添加 onConfigurationChanged？

```
@Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);

            if(newConfig.orientation==Configuration.ORIENTATION_LANDSCAPE){

                Log.e("TAG","LANDSCAPE");

            }else{

                Log.e("TAG","PORTRAIT");

            }

        } 
```

如果你添加这个，你可以处理方向，如果你没有添加这个，如果你改变了方向，活动将在你添加后重新创建，活动不会被重新创建，但会保持当前状态与之前的方向相同

如果您有任何问题，请随时在评论中问我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:42:37.607

好的，看来以下是最好的解决方案。欢迎评论这是否被认为是最佳实践。请注意，我已包含 v4 支持库以实现向后兼容性。

我的活动

```
package ie.cathalcoffey.android.orientation;

import android.content.Context;
import android.content.res.Configuration;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.FragmentActivity;

public class OrientationActivity extends FragmentActivity implements FireMissilesDialogFragment.NoticeDialogListener{
    MyApplication application;
    boolean rotated;
    public class LongOperation extends AsyncTask<String, Void, String> {
          private FireMissilesDialogFragment dialog;

          public LongOperation(Context context) {
              dialog = new FireMissilesDialogFragment();
              dialog.show(getSupportFragmentManager(), "");
          }

          @Override
          protected void onCancelled() {
              if(dialog != null && dialog.isVisible())
                  dialog.dismiss();
          }

          @Override
          protected void onPreExecute() {
          }

          @Override
          protected String doInBackground(String... params) {
              while(true){

                  if(this.isCancelled())
                      break;

              }

              return null;
          }      

          @Override
          protected void onPostExecute(String result) {                           

          }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        application = (MyApplication) getApplication();

        if(application.longOperation == null) {
            application.longOperation = new LongOperation(this);
            application.longOperation.execute();
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        if(application.longOperation != null)
        {
            application.longOperation.cancel(true);
            application.longOperation = null;
        }
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    }

    @Override
    public void onDialogPositiveClick(DialogFragment dialog) {
        if(application.longOperation != null)
        {
            application.longOperation.cancel(true);
            application.longOperation = null;
        }
    }

    @Override
    public void onDialogNegativeClick(DialogFragment dialog) {
        if(application.longOperation != null)
        {
            application.longOperation.cancel(true);
            application.longOperation = null;
        }
    }
} 
```

我的对话片段

```
package ie.cathalcoffey.android.orientation;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;

public class FireMissilesDialogFragment extends DialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the Builder class for convenient dialog construction
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
        builder.setMessage("Whatever")
               .setPositiveButton("fire", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       mListener.onDialogPositiveClick(FireMissilesDialogFragment.this);
                   }
               })
               .setNegativeButton("cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       mListener.onDialogNegativeClick(FireMissilesDialogFragment.this);
                   }
               });
        // Create the AlertDialog object and return it
        return builder.create();
    }

    /* The activity that creates an instance of this dialog fragment must
     * implement this interface in order to receive event callbacks.
     * Each method passes the DialogFragment in case the host needs to query it. */
    public interface NoticeDialogListener {
        public void onDialogPositiveClick(DialogFragment dialog);
        public void onDialogNegativeClick(DialogFragment dialog);
    }

    // Use this instance of the interface to deliver action events
    NoticeDialogListener mListener;

    // Override the Fragment.onAttach() method to instantiate the NoticeDialogListener
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        // Verify that the host activity implements the callback interface
        try {
            // Instantiate the NoticeDialogListener so we can send events to the host
            mListener = (NoticeDialogListener) activity;
        } catch (ClassCastException e) {
            // The activity doesn't implement the interface, throw exception
            throw new ClassCastException(activity.toString()
                    + " must implement NoticeDialogListener");
        }
    }
} 
```

我的应用程序

```
package ie.cathalcoffey.android.orientation;
import ie.cathalcoffey.android.orientation.OrientationActivity.LongOperation;
import android.app.Application;

public class MyApplication extends Application 
{
    LongOperation longOperation = null;
} 
```

最后我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="ie.cathalcoffey.android.orientation"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:name=".MyApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".OrientationActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

# ios - 将“在 iBooks 中打开”添加到 UIWebView

> ID：13375472
> 
> 赞同：8
> 
> 时间：2012-11-14T08:41:09.803
> 
> 标签：ios, uiwebview

我正在为网站开发一个包装应用程序。基本上，它会在 UIWebView 中打开网站的移动版本。网站上的一些链接指向 PDF。

当在 Safari 中打开同一个站点并点击指向 PDF 的链接时，PDF 上会显示一条带有“在 iBooks 中打开”的漂亮黑色条纹。如下图所示：

![在此处输入图像描述](../Images/edde74127a51f4bfec54c3259f8f9f4a.png)

我怎样才能在我的应用程序中实现相同的条纹？

编辑：

我*不是*在问如何在半透明背景上创建一个黑色按钮。

我有兴趣重现整个工作流程：

*   用户导航到 PDF
*   **当且仅当**条带（视图）弹出**安装了 iBooks 应用程序（或任何其他 PDF 查看器）**
***   点击弹出窗口中的按钮将文档传输到该应用程序并打开该应用程序。**

 *** * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-16T11:49:18.947

要检查是否安装了 iBooks，您可以调用：

```
BOOL iBooksInstalled = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"ibooks://"]]; 
```

您可以使用以下方式显示应用程序列表（为什么仅限于 iBooks？；））：

```
//use the UIDocInteractionController API to get list of devices that support the file type
NSURL *pdfURL = // your pdf link.
UIDocumentInteractionController *docController = [UIDocumentInteractionController interactionControllerWithURL:pdfURL];

//present a drop down list of the apps that support the file type, click an item in the list will open that app while passing in the file.
 [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
```

请注意，除非您制作了一个读取 PDF 的应用程序，否则这在 iOS 模拟器上不起作用！

如果您真的只想提供让 PDF 在 iBooks 中打开的选项，您可能需要尝试将文件的 URL 附加到 @"ibooks://" 方案或 iBooks 提供的其他两种方案之一（这适用于 iBook Store 中的书籍，但我不确定它是否也适用于其他 URL），即 @"itms-books://" 和 @"itms-bookss://"。然后，您可以执行以下操作：

```
NSURL *iBooksURLScheme = [NSURL URLWithString:@"ibooks://"];
NSString *fileURLString = // your file URL as *string*
NSURL *finalURL = [iBooksURLScheme URLByAppendingPathComponent:fileURLString];

[[UIApplication sharedApplication] openURL:finalURL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T01:21:18.773

（再次回答，因为我之前的回答不包括代码。抱歉）

对于解决我的问题的解决方案，我[在这里](http://absoluteripple.com)找到了一个很好的示例。

我已将其剪切并粘贴在这里，以防它对某人有所帮助。完全归功于[absoluteripple.com](http://absoluteripple.com)

假设你的类叫做 ViewController，那么在 ViewController.h 文件中：        

```

@interface 视图控制器：UIViewController
            {
                UIDocumentInteractionController *docController;
            }

```

在 ViewController.m 中添加以下方法： //- 设置 UIDocumentInteraction 控制器并将其委托设置为 self 以便我们可以处理回调事件        

```

```
- (UIDocumentInteractionController *) setupControllerWithURL:(NSURL *)fileURL
                                               usingDelegate:(id <UIDocumentInteractionControllerDelegate>)         interactionDelegate {

            UIDocumentInteractionController *interactionController =
            [UIDocumentInteractionController interactionControllerWithURL:fileURL];
            interactionController.delegate = interactionDelegate;

            return interactionController;
            } 
```

        //- 这里的关键实例方法是presentOptionsMenuFromBarBUttonItem //- 这里假设有一个名为_btnActions的BarButtonItem

```

    - (void)showOptionsMenu
            {
                NSURL *fileURL = [NSURL fileURLWithPath:@"THE_FILE_URL_PATH"];
                docController = [自我 setupControllerWithURL:fileURL
                                       usingDelegate:self];
                bool didShow = [docController presentOptionsMenuFromBarButtonItem:_btnActions
                                                                 动画：是];
                如果（！didShow）{
                        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@""
                                                            消息：@“对不起。在此设备上找不到合适的应用程序。”
                                                           代表：无
                                                  取消按钮标题：@“确定”
                                                  其他按钮标题：无]；
                        [警报显示]；
                }
            }

```

1.  当您想显示可以将文件发送到的应用程序时，添加一个调用上述方法的方法 在此示例中，UIBarButton 连接到以下 IBAction：

```
    - (IBAction)ActionButtonClicked:(id)sender {
            [自我显示选项菜单];}

```

这就对了。单击按钮时，将出现一个操作表（全部由 Apple 的 UIDocumentInteractionController 类提供支持），其中显示您可以将文件发送到的应用程序（如果有的话）。

您可以选择实现以下委托方法：

```
- (void)documentInteractionController:(UIDocumentInteractionController *)controller willBeginSendingToApplication:(NSString *)application

- (void)documentInteractionController:(UIDocumentInteractionController *)controller didEndSendingToApplication:(NSString *)application

- (void)documentInteractionControllerDidDismissOpenInMenu:(UIDocumentInteractionController *)controller 
```

```**

# node.js - 如何让 Chai.js 例外包含堆栈跟踪信息？

> ID：13375474
> 
> 赞同：4
> 
> 时间：2012-11-14T08:41:18.657
> 
> 标签：node.js, exception, stack-trace, chai

我在节点上使用 Chai.js。`console.log(e)`e 是 Chai.js 抛出的异常的行打印类似`expected a to be within 0..3`. 如何让 Chai.js 例外包含堆栈跟踪信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T11:49:27.207

我找到了答案。我可以配置 chai 以启用堆栈跟踪。这是 chai的[断言样式页面上的代码。](http://chaijs.com/guide/styles/)

```
var chai = require('chai');
chai.Assertion.includeStack = true; // defaults to false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:59:07.107

我不使用 Chai.JS。但是如果*e*是一个*Error*对象，则可以使用该对象的属性*stack*来获取堆栈跟踪。

核心模块“util”也可以帮助你： [http ://nodejs.org/api/util.html](http://nodejs.org/api/util.html)

# usb - 从 FoxPro 2.6 打印到 USB 打印机

> ID：13375475
> 
> 赞同：0
> 
> 时间：2012-11-14T08:41:21.133
> 
> 标签：usb, foxpro

我的 XP 机器上的 foxpro 中有一个应用程序，需要打印到 USB 打印机。我发现这篇文章对所有人都有帮助，但对我没有帮助。可能是我在某个地方搞砸了。

当我将**NET USE LPT1: \MYCOMPUTERNAME\MYPRINTERNAME 添加**到登录脚本时，我收到无法识别或错误的命令错误。什么应该是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:05:55.393

您需要在 LPT1 之后删除分号，并在“mycomputername”之前使用双反斜杠。

```
net use lpt1 \\mycomputername\myprintername 
```

还要记住，即使这种方法也并不总是有效 - 您很可能永远无法让它工作，并且不得不求助于像[dos2usb](http://www.dos2usb.com/)这样的软件解决方案。

# web-services - 使用 Jersey 和 Eclipse 的简单 RESTful 服务

> ID：13375477
> 
> 赞同：4
> 
> 时间：2012-11-14T08:41:41.283
> 
> 标签：web-services, rest

我一直在尝试使用 Jersey 和 Eclipse 创建一个简单的 RESTful 服务。我已经从[http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/#ibm-pcon](http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/#ibm-pcon)复制了代码。当我尝试运行该服务时，我得到了 HTTP 状态 404-/Jersey/

服务：`HelloResource.java`

```
package sample.hello.resources;

import javax.ws.rs.GET; 
import javax.ws.rs.Path; 
import javax.ws.rs.PathParam; 
import javax.ws.rs.Produces; 
import javax.ws.rs.core.MediaType; 

@Path("/hello")
public class HelloResource {
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String sayHello() {
        return "Hello Jersey";
    }
} 
```

`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">
  <display-name>Jersey</display-name>
  <servlet>
    <servlet-name>REST Service</servlet-name>
    <servlet-class>
      com.sun.jersey.spi.container.servlet.ServletContainer
    </servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>sample.hello.resources</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping> 

  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

请帮助成功运行上述服务......不知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:08:36.443

您应该使用以下 URL 来访问资源，

```
http://127.0.0.1:8080/<app_name>/rest/hello 
```

以下包含良好/简单示例的站点，如果上述方法不起作用，您可以尝试一下。 [http://lasithtechavenue.blogspot.com/2012/12/implementing-rest-service-with-java.html](http://lasithtechavenue.blogspot.com/2012/12/implementing-rest-service-with-java.html)

# crystal-reports - 水晶报表 ExportFormatType.EditableRTF

> ID：13375480
> 
> 赞同：1
> 
> 时间：2012-11-14T08:41:57.620
> 
> 标签：crystal-reports

我正在使用 VS2010 和 CR 11 版本：11.5.12.1838（即 SP6）。

我想以编程方式将报告导出为 EditableRTF 格式。但我在“ExportFormatType”中找不到“EditableRTF”。“EditableRTF”只能从 Crystal Report Viewer 的导出按钮中选择。

在 BusinessObject 网站中，“EditableRTF”可用于 CR11。 [http://devlibrary.businessobjects.com/businessobjectsxi/en/en/crystalreports_dotnet_sdk/crystalreports_net_doc/doc/crsdk_net_doc/html/crlrfexportformattypeenumerationtopic.htm](http://devlibrary.businessobjects.com/businessobjectsxi/en/en/crystalreports_dotnet_sdk/crystalreports_net_doc/doc/crsdk_net_doc/html/crlrfexportformattypeenumerationtopic.htm)

# idl-programming-language - 如何删除 ENVI 5.0 API 中的中间文件？

> ID：13375484
> 
> 赞同：2
> 
> 时间：2012-11-14T08:42:21.163
> 
> 标签：idl-programming-language, envi

ENVI 5.0 API 存在以下问题： 我经常在脚本中使用 ENVI_DOIT 批处理例程来生成中间图像，并通过 /IN_MEMORY 开关将它们留在内存中。当我完成了他们，我摆脱了他们

ENVI_FILE_MNG，id=FID，/删除。

在 ENVI 5.0“经典”中运行良好。然而，新的 ENVI 5.0 GUI 似乎不得不将所有以这种方式创建的图像放置在“视图”中，并完成构建金字塔，我收到警告

“处理金字塔时无法关闭栅格”

因此，不能以编程方式删除中间文件。我尝试将它们作为临时文件放在磁盘上，但是当我尝试从脚本中删除文件时会弹出相同的错误。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:11:16.337

我确信这目前已被打破。我尝试了很多方法，包括尝试手动触发金字塔的创建，测试它是否存在，然后关闭栅格，如下所示：

```
raster_file.createpyramid
print, raster_file.pyramid_exists ; prints '1'
raster_file.close 
```

而且我仍然收到错误消息，“处理金字塔时无法关闭栅格。”

我正在切换回 ENVI 经典版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-23T03:21:41.473

这个对我有用：

```
;pro closeall
fid=envi_get_file_ids()
if fid[0] ne -1 then begin
    for i=0, n_elements(fid)-1 do begin
        envi_file_mng, id=fid[i], /remove
    endfor
endif
;end 
```

来源：</p>

1.  [https://www.harrisgeospatial.com/Support/Forums/tabid/2342/aft/2798/](https://www.harrisgeospatial.com/Support/Forums/tabid/2342/aft/2798/)
2.  [http://etangutmann.com/pages/idl/envilib.pro](http://ethangutmann.com/pages/idl/envilib.pro)

# php - 无法获取查询字符串参数值

> ID：13375487
> 
> 赞同：7
> 
> 时间：2012-11-14T08:42:31.063
> 
> 标签：php, wordpress, opayo

我已将 sage pay 与我的 wordpress 网站集成在一起。我目前正在模拟器模式下运行 sagepay。

付款成功后，sagepay 重定向到我网站的成功页面。重定向网址是这样的。

```
mysite.com/?page_id=632&crypt=@7564ASKJjkkjh....encrypted string. 
```

当我试图通过 $_REQUEST 或 $_GET 在我的成功页面上获取查询字符串参数时，我只能获取 page_id。

但我无法获得 'crypt' 参数。

我也试过 var_dump($_REQUEST)。它也只给出 page_id 而不是 crypt 参数。

我不想从查询字符串中检索“crypt”参数。

**注意：它在本地主机上正常工作。我得到了两个参数。但是当我在实时服务器上上传我的网站时，我只能获得 page_id，但不能获得“crypt”参数。**

有任何想法吗？

更新：Sage pay 给出的我的查询字符串是这样的：

mysite.com/?page_id=632&crypt=@

但它在本地主机上工作正常

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T10:05:11.487

## 回答

您似乎正在运行 Suhosin 安全补丁。此补丁将您的`$_GET`参数限制为最多 512 个字节。

为了解决这个问题，您需要为您的`php.ini`.

```
suhosin.get.max_value_length = LIMIT_HERE 
```

## 参考

来源：[http ://www.php.net/manual/en/reserved.variables.get.php#101469](http://www.php.net/manual/en/reserved.variables.get.php#101469)

> 请注意，安装了 suhosin 补丁的 PHP 设置对于获取参数的默认限制为 512 个字符。虽然是不好的做法，但大多数浏览器（包括 IE）最多支持大约 2000 个字符的 URL，而 Apache 的默认值为 8000。
> 
> 要使用 suhosin 添加对长参数的支持，请添加 `suhosin.get.max_value_length = <limit>`php.ini

**更新 1**

由于您没有访问权限`php.ini`，因此您需要更改`.htacess`文件中的值（如果您使用的是 Apache），或者，您可以使用内置的 PHP 函数来完成`ini_set()`。

.htacess 方法：

```
php_value suhosin.get.max_value_length 8000 
```

ini_set 方法：

```
ini_set('suhosin.get.max_value_length', '8000'); 
```

**但是，很可能*（但不确定）*您的 PHP 安装不允许在每个目录的基础上修改 Suhosin 变量。为了解决这个问题，您必须请求将其放入您的`php.ini`.，否则您无能为力。**

```
suhosin.perdir = "p" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T08:51:58.210

我认为您的生产环境在 php.ini 中为 $_REQUEST 配置了过滤器，请检查 php.ini 的过滤器部分，更多信息：[http ://www.php.net/manual/en/filter.configuration.php](http://www.php.net/manual/en/filter.configuration.php)

如果您不想在生产环境中更改此配置，可以使用 filter_input 访问该值，更多信息：[http ://www.php.net/manual/en/function.filter-input.php](http://www.php.net/manual/en/function.filter-input.php)

# javascript - 不接受 Android Webview Cookie

> ID：13375492
> 
> 赞同：1
> 
> 时间：2012-11-14T08:43:04.703
> 
> 标签：javascript, android, jquery, webview

首先我很抱歉我的英语不好，我希望你能理解我。

我的代码在 Android 2.3 VM 等中运行绝对没有错误。我遇到的问题是我的 via JS ( jQuery ) 设置的 cookie 在 Android 4.x 中不被接受。

我如何通过 jQuery 设置 Cookie：

```
$.cookie('test', 'blabla', { expires: 999999, path: '/' }); 
```

我的 Java 源代码：

```
setContentView(R.layout.activity_main);
ConnectivityManager cm = (ConnectivityManager)
this.getSystemService(Activity.CONNECTIVITY_SERVICE); mWebView =
(WebView) findViewById(R.id.webView1);

if(cm != null && cm.getActiveNetworkInfo() != null &&   cm.getActiveNetworkInfo().isConnected()){ 
mWebView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT); 
} else {
mWebView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
} 

mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setRenderPriority(WebSettings.RenderPriority.HIGH);
CookieManager.getInstance().setAcceptCookie(true);
CookieSyncManager.createInstance(this);
CookieSyncManager.getInstance(); 
mWebView.setWebViewClient(new WebViewClient()); 
mWebView.loadUrl("URL HERE"); 
```

我真的希望你们能帮助我:)

# objective-c - 如何仅在每次导航时更改内容，同时保持用户对象不变

> ID：13375497
> 
> 赞同：1
> 
> 时间：2012-11-14T08:43:24.993
> 
> 标签：objective-c, ios, nsmutabledictionary, touchxml, uiswipegesturerecognizer

我使用了一个使用 touchXML 并解析特定网站的在线教程，以便它为我提供所有元素及其值

```
// Convert the supplied URL string into a usable URL object

    NSURL *url = [NSURL URLWithString: blogAddress];

// Create a new rssParser object based on the TouchXML "CXMLDocument" class, this is the
// object that actually grabs and processes the RSS data

    CXMLDocument *rssParser = [[[CXMLDocument alloc] initWithContentsOfURL:url options:0 error:nil] autorelease];

// Create a new Array object to be used with the looping of the results from the rssParser

    NSArray *resultNodes = NULL;

// Set the resultNodes Array to contain an object for every instance of an  node in our RSS feed

    resultNodes = [rssParser nodesForXPath:@"//item" error:nil];

// Loop through the resultNodes to access each items actual data

 for (CXMLElement *resultElement in resultNodes) {

    // Create a temporary MutableDictionary to store the items fields in, which will eventually end up in blogEntries

 NSMutableDictionary *blogItem = [[NSMutableDictionary alloc] init];

    // Create a counter variable as type "int"

 int counter;

    // Loop through the children of the current  node
    for(counter = 0; counter < [resultElement childCount]; counter++) {

        // Add each field to the blogItem Dictionary with the node name as key and node value as the value
        [blogItem setObject:[[resultElement childAtIndex:counter] stringValue] forKey:[[resultElement childAtIndex:counter] name]];

    }

    // Add the blogItem to the global blogEntries Array so that the view can access it.
    [blogEntries addObject:[blogItem copy]]; 
```

现在，因为我在 blogEntries mutableDictionary 中拥有所有数据，所以我有一个标签对象和顶部的 2 个条形按钮项目，然后 **我真正想要做的是**

**1）点击下一步使用相同的标签对象并从 blogEntries mutableDictionary 加载下一个数据**

**2）点击返回使用相同的标签对象并从 blogEntries mutableDictionary 加载以前的数据**

如果假设有人除了在不使用栏按钮项目的情况下加载新内容之外还有其他想法，那么欢迎您，我的项目基本上处理 rss 提要，所以我要做的就是通过单击下一步或使用滑动手势浏览下一个新闻。 。谢谢

# mvvmcross - 我应该等待 AutoView 吗？

> ID：13375499
> 
> 赞同：5
> 
> 时间：2012-11-14T08:43:29.973
> 
> 标签：mvvmcross

我现在正在做一个项目，我们正在使用 MvvmCross 框架。该项目应在二月完成。我们想知道我们是否应该等待 AutoView 作为跨平台 UI 解决方案，还是 2 月即将到来？

我们现在遇到的问题是我们希望能够动态地构建一个 BindableListView。然后列表中的每个项目都可以有不同的布局及其视图集，例如，当我有一个按任何顺序排列的字符串和整数列表时，BindableListView 将为每个字符串显示一个 TextView，为每个 int 显示一个数字选择器。

像这样的东西：

```
public ElementDescription DefaultView()
{
    var auto = new RootAuto(caption: "TestRootElement")
    {
        new SectionAuto(header: "Test Info")
            {
                foreach(item s in list)
                {
                    if(s.GetType() == typeof(string) )
                        new StringAuto();
                    if(s.GetType() == typeof(int)
                        new IntAuto();
                }              
            };

        return auto.ToElementDescription();
    }
} 
```

这甚至可以通过 AutoView 实现吗？还是我们应该寻找不同的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:16:22.263

简单的答案 - 如果它是一个截止日期紧迫的真实项目......可能不会。

* * *

更长的答案...

**什么时候可以使用自动查看？**

AutoViews 将在“本周”仅适用于 Droid - 这包括对话框、菜单和列表屏幕的自动选项。

对于 Touch，我预计 AutoViews 将在 2-3 周内到达 - 但这项工作可能会在某些方面影响 Droid 工作 - 例如，某些类和方法可能需要调整。

对于 WP 和 WinRT，时间表目前不太清楚。有几个人在 WP.Dialog 端口上工作，这些端口的时间表尚不清楚......

整个 AutoView 包何时可用？API什么时候会稳定？会有多少样本？什么时候提供文件？我不知道。希望 12 月下旬，1 月初 - 但这里有一些外部因素需要考虑（包括当 MonoTouch/Droid 的 async/await 到达时将发生的一些 MvvmCross 添加）。

* * *

**自动视图将用于什么？**

[我对 autoviews 的主要关注](http://slodge.blogspot.co.uk/2012/10/cross-platform-views-for-mvvmcross-ideas.html)是允许快速的跨平台开发——因此它们将提供一种快速的方法来让 UI 启动并在 4 个平台上运行。

这些 UI 将是可换肤的 - 例如在 MonoTouch 上使用 UIAppearance 并在 MonoDroid 上使用自定义 axml。这些 UI 也将是可扩展的和可覆盖的 - 不会锁定 AutoView 方法。

很可能这些用户界面“足够好”，可以为许多客户提供——例如，像 TweetStation 这样的应用程序（以及更多其他应用程序）已经展示了 MonoTouch.Dialog 如何生成非常漂亮的成品应用程序，我希望 AutoViews 也能做到这一点.

但是，AutoView UI 永远不会像每个平台上的完全自定义 UI 那样强大或灵活——因此许多应用程序也不想使用 AutoViews——或者想要覆盖其中的重要部分。

* * *

**我今天可以使用 AutoViews 吗？**

是的。

但：

*   仅在机器人上
*   您需要乐于使用 PCL 进行开发（AutoViews 目前仅存在于 vNextDialog 分支中）
*   你需要在接下来的几周内期待一些命名空间、类和方法的变化（例如，目前我们在 FooBar 命名空间中使用 MonoDroid.Dialog）
*   您可能想要分叉存储库以将自己与这些更改隔离开来。
*   使用 AutoViews 也有一些小的性能损失 - UI 是使用反射构建的，它总是比直接代码慢（这不是一个巨大的损失，但如果你是一个喜欢让你的代码真正飞起来的低级开发人员，那么你会更愿意避开反射）。

# android - 在 android.mk 中执行 shell 命令 tar

> ID：13375502
> 
> 赞同：0
> 
> 时间：2012-11-14T08:43:41.693
> 
> 标签：android, shell, makefile, tar

我想使用 tar 命令将 .tar.gz 文件提取到 android.mk 文件中。我已经在 android.mk 之后尝试了这个：

```
LOCAL_PATH := $(call my-dir)

MY_LOCAL_PATH := $(LOCAL_PATH)/../..

$(shell tar xvzf $(MY_LOCAL_PATH)/abc.tar.gz) 
```

但它显示以下错误：

```
/path_to_jni/jni/Android.mk:4: *** missing separator.  Stop. 
```

我怎样才能让它工作？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:49:49.990

`make`是基于规则的系统：Makefile 必须以描述如何创建目标的规则形式指定其操作：文件或仅指示要执行哪些规则的符号目标。你没有提供目标。在这种情况下，您的命令不会生成单个文件，因此您可能想要使用符号目标，例如

```
LOCAL_PATH := $(call my-dir)
MY_LOCAL_PATH := $(LOCAL_PATH)/../..

all: $(MY_LOCAL_PATH)/abc.tar.gz
    tar xvzf $< 
```

请注意之前的标签`tar`（我无法在此处复制它）。

# user-interface - 配置基于 GUI 的程序

> ID：13375504
> 
> 赞同：0
> 
> 时间：2012-11-14T08:43:54.573
> 
> 标签：user-interface, configuration-files

我有一个程序具有相当复杂的数字运算逻辑和相当多的配置参数。该程序（几乎）是非交互式的，并通过命令行参数和配置文件进行配置。

我被要求为这个程序添加 GUI。自然地，这个 GUI 必须包含一个带有所有必需参数的配置屏幕（选项卡等）。我以前从未做过任何严肃的 GUI，所以我不知道如何处理这项任务。

当然，可以加载配置文件并创建所需的小部件。然而，使用这种方法，小部件标签将是“技术性的，而不是信息性的”。我正在寻找一种方法来存储人类可读的参数名称，并且工具提示只会为维护参数、标签和工具提示文本带来最小的额外负担。使用自制格式将这些信息与默认配置文件一起存储是一种好方法吗？

FWIW 我正在用 wxPython 编写 GUI，我的配置文件是[ConfigObj](http://www.voidspace.org.uk/python/configobj.html)文件。该程序将被我的队友使用，因此不考虑恶意用户场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:03:44.033

通常的方法使用几个部分。

首先，您拥有构建 UI 的代码。这会读取一个包含所有标签、按钮和工具提示的文本的文件，并将它们放在正确的位置。

第二部分是读取和写入配置文件的代码。您希望在配置文件中使用技术键（= 仅对某些人可读）以避免向 UI 添加新语言时出现问题（您不希望在有人将 UI 翻译成德语时更改配置键）。

所以每个 UI 元素都会有一个技术 ID。在文本的配置中，您将使用`ID.label`和`ID.tooltip`。在“真实”配置（又名首选项）中，您将使用 ID 将所选值映射到 UI 元素。

# java - 用Java在一个CompressedFolders.rar文件中压缩多个文件夹

> ID：13375506
> 
> 赞同：0
> 
> 时间：2012-11-14T08:43:59.097
> 
> 标签：java, compression

再会！

假设我有一个名为**“Data”**的文件夹，其中包含多个文件夹：

*   数据 1_文件夹。
*   数据2_文件夹。
*   数据3_文件夹。
*   Data4_文件夹。

我只需要压缩 Data2_Folder 和 Data3_Folder，换句话说，用户将决定他要压缩哪些文件夹。

我正在使用**for 循环**从数据库中读取所选 ID 的数据，并将这些数据写入单独的**Excel**工作表中。所有文件都将存储在主**Data文件夹下的****ID 名称文件夹**( **Data#_Folder** ) 下。

 **在循环结束时，这些是创建文件并压缩它们的语句。

```
Excel.writeFile((String)DataID.get(i),TempArray);
Folder2Compress = new String[]{CompressingFolders.CompressFiles("D:\\Data/"+DataID.get(i).toString())}; 
```

不幸的是，只有最后创建的文件夹会被压缩。我怎样才能压缩所有选择的文件夹？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:52:57.693

您只需将一个文件夹添加到数组`Folder2Compress`中。改用 a`List<String>`并将所有文件夹添加到列表中：

```
List<String> folders = new ArrayList<String>();
for( .... ) {
    ...
    folders.add("D:\\Data/"+DataID.get(i));
} 
```

现在您可以更改`CompressingFolders.CompressFiles()`以将此列表作为输入并将所有文件夹添加到结果中。

注意：您可能需要查看[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。**

# objective-c - 通过调度队列在 2 个块中运行服务器和客户端

> ID：13375511
> 
> 赞同：1
> 
> 时间：2012-11-14T08:44:38.453
> 
> 标签：objective-c, ios, xcode

我想编写一个可以运行两个不同“线程”的应用程序，一个用于服务器，一个用于客户端。我听说，Objective-C 调度队列和块是要走的路。我已经阅读了有关 Blocks and Dispatch Queues 的 Apple 文档，但是我在编码的一开始仍然失败了。

我是对的，我需要创建 2 个块，一个用于我的服务器代码，一个用于我的客户端代码，然后将这些块放入调度队列以同时运行？

我现在正试图为我的服务器创建一个块，但惨遭失败。我尝试了以下方法：

```
#import <Foundation/Foundation.h>

@interface Server : NSObject {
    void (^server)(NSString*, int);
}

@end 
```

接着

```
 #import "Server.h"

@implementation Server
   server = ^(NSString* host, int port) {
};

@end 
```

我想我必须先在头文件中声明块变量，以便以后可以在我的 ViewController 中引用它。任何关于带有一些代码示例的一般结构的答案将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:49:46.523

我建议创建一个`typedef`，这样您就可以轻松地创建该类型的块。像这样：

```
typedef void (^ServerBlock)(NSString *host, int port); 
```

在您的 .h 上：

```
ServerBlock myServerBlock; 
```

在您的 .m 上：

```
myServerBlock = ^(NSString* host, int port) {}; 
```

您可以将您`typedef`放入一个名为常量的 .h 文件中，然后将其导入您的 .pch 文件中（这只是建议......）

# php - Silverstripe 自定义控制器和视图（模板）如何工作？

> ID：13375517
> 
> 赞同：1
> 
> 时间：2012-11-14T08:45:18.020
> 
> 标签：php, url-routing, silverstripe

我使用以下代码创建了控制器`./mysite/code/FileManager.php`...

```
class FileManager_Controller extends Controller
{
    public function upload()
    {
        echo 'It works!!';
    }
} 
```

当我输入`http://example.com/filemanager/upload`.

我创建了模板文件`themes/simple/templates/FileManager.ss`。我想在这里编写要上传的 HTML，它应该会在我输入`http://example.com/filemanager/upload`. 这个怎么做？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:48:38.493

“上传”是 SilverStripe 中的一项操作 - 您是否尝试过创建 FileManager_upload.ss 文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T05:29:02.963

因为您使用的是直接控制器来处理请求，所以系统不知道您要呈现什么或如何呈现。在使用 CMS 并渲染 a 时，`Page`这通常会为您处理好。

所以你必须告诉它要渲染什么以及如何渲染。在最简单的形式中，这看起来像：

```
class FileManager_Controller extends Controller
{
    public function upload()
    {
        return $this->renderWith('FileManager');
    }
} 
```

这将使用模板呈现您的`FileManager_Controller`课程。`FileManager.ss`

# magento - magento中的联系人页面在哪里

> ID：13375518
> 
> 赞同：0
> 
> 时间：2012-11-14T08:45:39.607
> 
> 标签：magento

magento在哪里`contacts` **（即联系我们页面） ？**

请任何人帮我找出`contacts page`和`xml which calling cntacts`

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:47:39.113

联系页面 xml 位置（复制到本地布局文件夹）/app/design/frontend/base/default/layout/contacts.xml

```
<reference name="content">
     <block type="core/template" name="contactForm" template="contacts/form.phtml"/>
</reference> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:46:58.890

默认 Magento 主题中的`\contacts`页面是从`app\design\frontend\base\default\template\contacts\form.phtml`. 但是，如果您安装了不同的主题，那么那里应该有一个相应的 form.phtml 文件。

如果您想知道 Magento 页面的来源，一个有用的技巧是打开“模板路径提示”。在 Magento admin 中转到 System->Configuration->Developer，将“当前配置范围：”（左上角下拉菜单）更改为相关网站（可能是“主网站”），并在“调试”设置下设置“模板路径提示” " 为 Yes 并保存配置。

然后，您在前端访问的任何页面都会显示哪些模板文件已用于生成页面的各个部分。

# c - 从共享/动态库加载符号表结构的可移植性如何？

> ID：13375523
> 
> 赞同：3
> 
> 时间：2012-11-14T08:45:57.317
> 
> 标签：c, shared-libraries

在 Windows 和 linux 上使用 GetProcAddress() 或 dlsym() 来返回一个填充有函数指针的结构似乎可以正常工作，以便从动态库中使用。

...但是，似乎有很多人提出问题并抱怨将 void * 指针转换为函数指针，并谈论使用 dlfunc，而这种相对简单的方法似乎工作得很好。

那么，有什么特别的理由让你不想这样做吗？

由于某种原因，这样的代码是否不可移植？

我意识到这种方法仅适用于共享明确命名的函数和绑定函数，但对于加载就我而言很好的插件......？

标头.h：

```
/* C++ safety & windows support */
#ifdef __cplusplus
  #if _WIN32 || _WIN64
    #define __EXT extern "C" __declspec(dllexport)
  #else
    #define __EXT extern "C"
  #endif
#else
  #if _WIN32 || _WIN64
    #define __EXT __declspec(dllexport)
  #else
    #define __EXT extern
  #endif
#endif

struct a_sym_table {
  int (* action) (int argc, char *argv[]);
};

__EXT struct a_sym_table liba_symbols; 
```

来源.c：

```
int perform_action_lib_a(int argc, char *argv[]) {
  int rtn = perform_action_lib_b() + perform_action_lib_c();
  return(rtn);
}

struct a_sym_table liba_symbols = {
  &perform_action_lib_a
}; 
```

编辑：为了清楚起见，*显然**加载符号*的代码在不同的平台上会有所不同，但这种方法允许*共享库*无需更改即可移植到不同的平台。

这就是我要问的问题，你有理由不这样做吗？

我想知道的是，是否有充分的理由不为*可移植性*而像这样构建*共享库*。

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:53:40.843

您正在访问共享库中的数据。这就是 dlsym() 的用途。动态链接器应该能够很好地处理传递库边界的函数指针。至少在类 Unix 系统上。我不了解 Windows，但我可以想象如果某些类型的指针起作用而其他类型的指针不起作用，那么很多事情都会崩溃。

在可移植性方面，您已经被限制在具有“#if _WIN32 || _WIN64”背后已有的东西或实现dlsym的系统中。这应该已经暗示您正在做的事情是通过测试而不是遵循一些严格的标准文档来实现的。因此，您可以移植到“无论它如何工作”。*

# jsp - 如何响应 JSP Servelet 请求的自定义字符串

> ID：13375525
> 
> 赞同：1
> 
> 时间：2012-11-14T08:45:57.617
> 
> 标签：jsp, servlets

```
protected void doPost(HttpServletRequest request, 
            HttpServletResponse response) throws ServletException, IOException {
....
....
getServletContext().getRequestDispatcher("/output.jsp").forward(request, response);
} 
```

我需要的是不要在`doPost`. 我有一个字符串（平面文本），我需要像 Servlet 请求一样响应它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T06:50:54.160

你可以这样做：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
  response.setContentType("text/html");
  PrintWriter out = response.getWriter();
  out.append("Your string goes here");
  out.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:56:05.330

```
//getServletContext().getRequestDispatcher("/message.jsp").forward(request, response);
response.getWriter().println(output); // output is the custom string 
```

[可以从http://devzone.skillfusion.com/ajaxArticle8.php](http://devzone.skillfusion.com/ajaxArticle8.php)找到更多信息

# c# - 单击链接按钮后在gridview上分页

> ID：13375527
> 
> 赞同：0
> 
> 时间：2012-11-14T08:46:18.640
> 
> 标签：c#, asp.net, pagination

我有一个网格视图，它在单击链接按钮时生成。我无法在 gridview 上坚持分页。顺便说一下，生成的网格视图是嵌套的网格视图。这里有一些代码示例。

链接按钮点击事件：

```
 protected void lbtnBOLNo_Click(object sender, EventArgs e)
{
    LinkButton btn = (LinkButton)(sender);
    string yourValue = btn.CommandArgument;
Session["globalselected"] = yourValue;
    populategridview1(ddl_market.SelectedItem.Text, dt_to_integer(Picker1.CalendarDateString), dt_to_integer(Picker2.CalendarDateString), ddl_metric.SelectedItem.Text, yourValue, cond1.SelectedValue, cond2.SelectedValue, cond3.SelectedValue);
} 
```

页面加载

```
 protected void Page_Load(object sender, EventArgs e)
{

    if (IsPostBack)
    {
        lbl_status.Text = "";

        populategridview3(ddl_days.SelectedItem.Text, ddl_days1.Text);

            populategridview1(ddl_market.SelectedItem.Text, dt_to_integer(Picker1.CalendarDateString), dt_to_integer(Picker2.CalendarDateString), ddl_metric.SelectedItem.Text, Session["globalselected"].ToString(), cond1.SelectedValue, cond2.SelectedValue, cond3.SelectedValue);

    }
} 
```

网格视图分页

```
protected void GridView3_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView gvTemp = (GridView)sender;
    GridView3.PageIndex = e.NewPageIndex;
    populategridview3(ddl_days.SelectedItem.Text, ddl_days1.Text);
} 
```

我的问题是单击链接按钮时，我的网格视图会引发错误，因为 Session["globalselected"] 在页面加载中为空，稍后会对其进行初始化。但是，我需要在页面加载中调用此方法 populategridview1 以确保分页适用于 gridview。在这种情况下，如何为子网格启用分页？

# c++ - 创建集合时出错

> ID：13375534
> 
> 赞同：3
> 
> 时间：2012-11-14T08:46:55.330
> 
> 标签：c++, set

我想知道为什么我无法创建一个集合。我收到以下错误

这是我的代码。

Point.cpp 我的点类

```
bool Point::operator<(const Point& p2)const {
return p21.length < p2.getScalarValue();
}

bool Point::operator>(const Point p2) {
bool result;
result = length > p2.getScalarValue();
return result; 
```

}

在我的 main.cpp

```
set<Point> s_p2;
Point tempp2;
s_p2.insert(tempp2); 
```

遵循您的输入后，我编辑了代码，但出现以下错误

Point.cpp:56:46：错误：将 'const Point' 作为 'double Point::getScalarValue()' 的 'this' 参数传递会丢弃限定符 [-fpermissive]

这是因为我有两个比较陈述吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:50:34.330

没有将 bool 作为第二个参数的[std::set::insert](http://en.cppreference.com/w/cpp/container/set/insert)重载。你可以这样插入：

```
s_p2.insert(tempp2); 
```

您`operator<`也可以通过将其设为`const`方法并采用`const`参考参数来改进：

```
class Point {
  // as before
  bool operator<(const Point& p) const;
};  //                            ^ here, const method

bool Point::operator<(const Point& p2) const {
  return length < p2.length;
} 
```

您还可以选择使其成为非成员函数：

```
bool operator<(const Point& lhs, const Point& rhs) {
  return lhs.getScalarValue() < rhs.getScalarValue();
} 
```

这具有与 LHS 和 RHS 完全对称的优点。如果您有隐式转换`Point`或从`Point`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:51:29.867

*   插入只需要1个参数（在你的情况下）
*   `Point::operator<`应该是一个 const 成员函数并以一个 const Point 作为参数（可能是一个 const 引用）
*   您无需指定`less<Point>`（在您的情况下）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T08:50:01.623

的签名`insert`是以下之一：

```
std::pair<iterator,bool> insert( const value_type& value );
(1) 
std::pair<iterator, bool> insert( value_type&& value );
(2) (since C++11)
iterator insert( iterator hint, const value_type& value );
iterator insert( const_iterator hint, const value_type& value );
(3) (until C++11) 
(since C++11)
iterator insert( const_iterator hint, value_type&& value );
(4) (since C++11)
template< class InputIt >
void insert( InputIt first, InputIt last );
(5) 
void insert( std::initializer_list<value_type> ilist );
(6) (since C++11) 
```

读`value_type`作`Point`. 你用`Point, bool`. 这些都不匹配。你觉得这个`true`参数有什么作用？

只需将其称为

```
s_p2.insert(tempp2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:47:45.363

设法解决它。我还需要让我的 getScalarValue() 常量。因为它只返回值。

它符合并运行没有错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T08:51:05.243

没有`insert()`in `set`which 需要一个元素 and `bool`。做吧`s_p2.insert(tempp2);`。

# ruby - 为什么需要 GCC 才能安装 ruby ？

> ID：13375536
> 
> 赞同：1
> 
> 时间：2012-11-14T08:47:06.780
> 
> 标签：ruby, gcc

我正在尝试在我使用 OS X 10.7.5 的 Mac 机器上安装 Ruby 1.9.2。在安装过程中，安装程序要求我先安装 GCC。安装 GCC 后，Ruby 安装成功。

为什么 Ruby 依赖于 GCC？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:50:29.983

有些 gem 需要原生 C 扩展，因此为了安装这些 gem，需要安装 GCC。

此外，如果您从源代码安装 Ruby，那么您将需要 GCC 来编译。

# javascript - 读取图像 src 的脚本

> ID：13375538
> 
> 赞同：0
> 
> 时间：2012-11-14T08:47:13.207
> 
> 标签：javascript

我是脚本新手，花了很多时间尝试编写一些代码。

我想读取某个图像的动态写入源，然后在页面下方写下另一个具有稍微不同来源的图像，例如 -

这张图片是动态写在页面顶部的

```
<img src="chrome.jpg" id="test1"> 
```

然后降低我想写 -

```
<img src="chrome2.jpg"> 
```

非常感谢艾米对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:55:19.267

我*假设*您使用“页面”指的是一个 html 页面...并且我进一步假设您想在客户端执行此操作...

为此，您将需要 javascript，将 javascript 库用于此类任务是有意义的，这样事情会变得更容易。例如，使用 jQuery 库，您可以使用“选择器”来识别和使用 dom 树元素并添加或更改您想要的所有内容。就像是：

```
source=$('img#test1').attr('src');
// do something with the source url contained now inside source
$('p#further_down').append('<img>).attr('src',source); 
```

* * *

```
<html>
<head>  

  <!-- inclusion of the jQuery Javascript library -->
  <script 
    type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
  </script>

  <!-- this is 'your' function -->
  <script type="text/javascript">
    function doubleImg(){
      // you 'get' the source url of the upper image:
      var topSrc=$('#top img').attr('src');
      // no you can do something with that url
      // for this demo I replace the 'direction' inside the icons name: 
      var bottomSrc=topSrc.replace(/up/, 'down');
      // now you create a new <img> tag 
      // and 'set' the changed url as 'src' attribute:
      var img=$('<img width="100">').attr('src',bottomSrc);
      // and finally you 'add' that <img> tag into your dom tree ("the page"): 
      $('#bottom').append(img);
    }
  </script>

  <!-- this gets 'your' function executed ->
  <script type="text/javascript">
    $(window).load(doubleImg);
  </script>
</head>

<body>
  <!-- the "top" frame, note that it DOES hold an <img> inside -->
  <fieldset id="top" style="border=2px solid green;">
    <legend>TOP</legend>
    <img width="100" src="http://icons.iconarchive.com/icons/oxygen-icons.org/oxygen/128/Actions-arrow-up-icon.png">
  </fieldset>
  <br>
  <!-- the "bottom" frame, note that it DOES NOT hold an <img> inside -->
  <fieldset id="bottom" style="border=2px solid blue;">
    <legend>BOTTOM</legend>
  </fieldset>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:55:34.823

我不确定你所说的仅脚本是什么意思，所以我提供了两种方法可以实现你想要的结果，通过`DOM`& through `jQuery`。

*   `Using jQuery:`

检索图像的`src：

```
var src = $(“#test1”).attr('src'); 
```

更改`src`图像的：

```
$("# test1").attr("src","chrome2.jpg"); 
```

*   `Using DOM:`

检索图像的`src：

```
document.getElementById("test1").src; 
```

更改`src`图像的：

```
document.getElementById("test1").src="chrome2.jpg"; 
```

希望能帮助到你。

# jquery - JAWS 未读取更新的输入值

> ID：13375540
> 
> 赞同：0
> 
> 时间：2012-11-14T08:47:14.927
> 
> 标签：jquery, html, accessibility, jaws-screen-reader

我有一个按钮，当使用 jQuery JAWS 更新该值时，无法读取更新后的值。它仍然读取旧值。

```
<input id="save" type="button"  value= "Save" onClick="saveValues()" />

$("#save").attr('value', 'Update'); 
```

值已更改为“更新”，但 JAWS 仍显示为“保存”。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:08:12.593

当我添加“标题”属性并使用 jquery 更新相同时，它可以工作

```
$('#save').attr('title', 'Update'); 
```

# android - ActivityThread.java:2524 中的空指针

> ID：13375541
> 
> 赞同：0
> 
> 时间：2012-11-14T08:47:15.837
> 
> 标签：android

我的崩溃报告工具发生了崩溃，我不知道如何解决。堆栈跟踪如下：

```
java.lang.NullPointerException
at android.app.ActivityThread.handleWindowVisibility(ActivityThread.java:2524)
at android.app.ActivityThread.access$1900(ActivityThread.java:121)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:963)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3701)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
at dalvik.system.NativeStart.main(Native Method) 
```

我没有日志，我无法重现它。当用户返回应用程序时，它似乎正在发生。它发生在运行 2.3.6 和 2.3.7 的不同手机上。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:31:13.510

它似乎是自定义 ROM，因为 2.3.6 和 2.3.7 的源代码`ActivityThread.java:2524`不在. 检查[android.app.ActivityThread](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/app/ActivityThread.java?av=f#2524)的源代码。我的建议是，如果这些崩溃的发生率不是很大，您可以忽略它们，因为您需要知道确切的 ROM 才能知道崩溃的原因，这将非常困难。如果您想大胆猜测，请检查您在活动中所做的可能导致 NullPointerException 的活动`deliverResults()``handleWindowVisibility()``handleWindowVisibility`

# c# - 比较通用列表和过滤不匹配的值

> ID：13375543
> 
> 赞同：2
> 
> 时间：2012-11-14T08:47:27.750
> 
> 标签：c#, asp.net

我想与通用列表进行比较，并过滤不匹配的值。我目前正在使用 foreach 循环，但我想知道是否有办法使用 lambda 表达式解决这个问题？在下面的示例中，我想要一个仅包含“4”的结果列表。

```
List<string> foo = new List<string>() { "1", "2", "3" };
List<string> bar = new List<string>() { "1", "2", "3", "4" }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:49:01.220

使用 Linq`Except<>`扩展：

```
var result = bar.Except(foo); 
```

在内部，这会将所有内容添加`foo`到 a `Set<>`（类似于 a 的内部 .Net 类型`HashSet<T>`）中，然后生成所有`bar`成功添加的项目。

注意 - 如果您需要不区分大小写的比较，您可以传递一个特定的`StringComparer`：

```
var result = bar.Except(foo, StringComparer.OrdinalIgnoreCase); 
```

结果是一个and，与许多其他 Linq 扩展方法一样，在您通过调用or或其他`IEnumerable<string>`方法迭代或“实现”结果之前，它不会开始做任何事情。`foreach``ToArray``ToList`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:31:02.730

如果您不想使用`Except`两次，请考虑以下内容：

```
var listOld = new SortedSet<string> { "1", "2", "3", "4", };
var listNew = new SortedSet<string> { "1", "1½", "2", "4", "5", }; 
```

然后简单的说

```
listNew.SymmetricExceptWith(listOld); 
```

将修改`listNew`，因此它现在包含两个原始列表之间的“差异元素”。

# couchbase - Couchbase View 不会立即更新？

> ID：13375546
> 
> 赞同：5
> 
> 时间：2012-11-14T08:47:43.063
> 
> 标签：couchbase, couchbase-view

我只是按照这篇[文章](http://nitschinger.at/Using-Couchbase-as-a-flexible-session-store)来测试 Couchbase 视图。当编辑视图使用 Couchbase GUI 并保存时，视图没有立即更新。

例如。使用 php 脚本将一些数组存储到 Couchbase。并在“dev_sessions”文档中定义一个名为“last”的视图：

```
function (doc) {
if(doc.namespace == 'sessions') {
emit(doc.lastSeen, 1);
}
} 
```

然后使用 curl 获取 json 结果。第一次：

```
$ curl
http://192.168.228.134:8092/default/_design/dev_sessions/_view/last/?group_level=1&reduce=true'
{"rows":[ ] } 
```

第二：

```
$ curl 'http://192.168.228.134:8092/default/_design/dev_sessions/_view/last/?group_level=1&reduce=true'
{"rows":[
{"key":1352872218,"value":1},
{"key":1352879418,"value":3}
]
} 
```

另一个测试，在 php 脚本中添加一个新数组：

```
'eb255262434407766f212d1b6f23' => array(
'namespace' => 'sessions',
"type" => "user",
"userID" => "1107",
'lastSeen' => time(),
'firstSeen' => time(),
"remoteAddress" => "2.3.4.5",
"location" => "Vienna/Austria",
"name" => "Golden K" 
```

再次运行 curl，第一次：

```
$ curl 'http://192.168.228.134:8092/default/_design/dev_sessions/_view/last/?group_level=1&reduce=true'
{"rows":[
{"key":1352872218,"value":1},
{"key":1352879418,"value":3}
]
} 
```

第二次：

```
$ curl 'http://192.168.228.134:8092/default/_design/dev_sessions/_view/last/?group_level=1&reduce=true'
{"rows":[
{"key":1352875163,"value":1},
{"key":1352882363,"value":4}
]
} 
```

如果更改数据或查看脚本，请单击`Views - 'Show Results'`Couchbase GUI 中的按钮，第一次和第二次不一样。为什么 View 不立即更新？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T09:04:32.517

这是预期的行为。默认情况下，Couchbase 在调用视图后“更新”索引。这有更快的响应时间。

执行视图时，您可以使用 stale 参数控制视图的状态（实际上是它的索引）。

在您的情况下，只需执行以下操作：

```
curl 'http://192.168.228.134:8092/default/_design/dev_sessions/_view/last/?group_level=1&reduce=true&stale=false' 
```

它会在将数据返回到您的应用程序之前更新索引。

您可以在文档中找到有关此参数以及视图如何工作的所有信息：

[http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-stale.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-stale.html)

# php - 如何使用 php 发出获取请求，然后使用 jquery 访问它？

> ID：13375547
> 
> 赞同：0
> 
> 时间：2012-11-14T08:47:45.923
> 
> 标签：php, jquery, ajax, json

我需要向 google places api 发出获取请求，但是我不能只使用 javascript，因为它不支持 jsonp。我读到我可以使用 php 文件执行获取请求，然后对其执行正常的 jquery ajax 调用以获取 json 数据。但是我使用创建了 php 文件

```
<?php
echo file_get_contents("https://maps.google...");
?> 
```

然后对托管在我的 ubuntu 发行版上的 http:localhost/ 服务器上的该文件使用 jquery ajax 请求，但我收到 500 http 服务器错误。我做错了什么或者我该如何正确地做这件事？

```
</script>

      <script>
      $(document).ready(function(){

      $.ajax({
      url: 'http://localhost/places.php',
      dataType: "json",
      type: "GET",
      success: function( data){
      document.getElementById("paragraph").innerHTML= data.result[0].name;
      },
      error: function(request, status, error){
      document.getElementById("paragraph").innerHTML= "error";
      }
      })

      });

</script>
    <body>
    <p id="paragraph">
       Untouched Text.
    </p>
    <button id="b1">Click Me!</button>
    </body> 
```

我使用 firebug 得到的唯一错误消息是 500 Internal Server Error 所以我不认为它是我的 html、javascript 或 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:15:10.027

您正在调用 Google API 并且必须返回一个 JSON，所以这应该足够了：

```
<?php
    $json = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true_or_false");

    $data = json_decode($json);

    // manipulate data and rebuild json with $json = json_encode($data) if needed

    Header("Content-Type: application/json");
    die($json);
?> 
```

这很有效，因为谷歌用正确格式的 JSON 来回答我：

```
{

    "results": [ ],
    "status": "REQUEST_DENIED"
} 
```

通过正确的 API Key 配置，您应该可以正常工作。检查调用是否在您的浏览器中运行（没有 cookie 等 - 一个干净的会话，这`file_get_contents()`将给您）并且您的 PHP 安装能够恢复 SSL 数据（它应该，但让我们检查一下），即,

```
file_get_contents("https://www.google.com/"); 
```

应该恢复谷歌的主页。

此呼叫不需要身份验证（有速率限制，但我认为您不太可能进行所有需要的呼叫以将您拒之门外）：

```
http://maps.googleapis.com/maps/api/directions/json?origin=Toronto&destination=Montreal&sensor=false 
```

上面将返回一个*非常*复杂的 JSON，其中可能包含重音字符。现在我想到它，`Header`上面会更好：

```
 Header('Content-Type: application/json;charset=UTF-8'); 
```

# android - 设计android弹出窗口

> ID：13375549
> 
> 赞同：0
> 
> 时间：2012-11-14T08:47:51.007
> 
> 标签：android, layout, popup

为我的应用创建弹出窗口时出现问题。我正在尝试显示一个填充我屏幕总大小的弹出窗口。问题是我在左侧得到了 1px 线，但没有填充。

我的弹出 xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
  android:id="@+id/popup"
 android:layout_height="match_parent"
 android:orientation="vertical" >
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginBottom="20dp"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="20dp"
    android:background="@drawable/popup_round_corners"
    android:orientation="vertical"
    android:padding="5dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="5dp"
        android:text="@string/zm_main_uvod" />
 <Button
        android:id="@+id/close"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_marginTop="10dp"
        android:paddingLeft="3dp"
        android:paddingRight="3dp"
        android:text="Ok" />
</LinearLayout>
</LinearLAyout> 
```

和我显示弹出窗口的功能：

```
 private void showPopup(final Activity context) {         
       // Inflate the popup_layout.xml
       LinearLayout viewGroup = (LinearLayout)findViewById(R.id.popup);
       LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       View layout = layoutInflater.inflate(R.layout.startpopup, viewGroup);

       // Creating the PopupWindow
       final PopupWindow popup = new PopupWindow(context);
       popup.setContentView(layout);
       Display display = getWindowManager().getDefaultDisplay(); 
       int width = display.getWidth();
       int height=display.getHeight();
       popup.setWidth(width+5);
       popup.setHeight(height+5);
       popup.setFocusable(true);
       popup.showAtLocation(layout, Gravity.FILL, 0, 0);
       Button close = (Button) layout.findViewById(R.id.close);
           close.setOnClickListener(new OnClickListener() {

             @Override
             public void onClick(View v) {
               popup.dismiss();
             }
           });
 } 
```

我尝试使用gravity.center 并尝试将偏移量设置为-30，-30，但没有任何反应。有任何想法吗？

# css - 具有内容响应的固定位置侧边栏

> ID：13375552
> 
> 赞同：0
> 
> 时间：2012-11-14T08:48:27.603
> 
> 标签：css

我在理解一些带有响应式设计的 css 时遇到了一些麻烦。基本上我想要一个固定位置的侧边栏在左边，右边的内容，右边的内容是响应式的。当我缩放浏览器时，内容框位于侧边栏后面，而不是缩小自身。我只是无法获得正确的CSS。

这是我到目前为止所拥有的。

```
.sidebar {
position: absolute;
left: 0;
top:0;
height: 100%;
background: url(../images/sidebar.png) repeat-y top left;
width: 225px;
}

.content {
width: 45%;
float: left;
}

.container {
width: 100%;
height:100%;
} 
```

侧边栏 div 位于容器 div 上方和内容 div 上方，任何帮助都会令人惊叹，因为我开始掉头发 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:59:02.530

你不在这里写你的html。

我想您可以通过以下方式解决问题：

```
.content {
width: 45%;
float: left;
margin-left:230px;
} 
```

# android - 通过Android中的位置从时间选择器更改时间

> ID：13375554
> 
> 赞同：2
> 
> 时间：2012-11-14T08:48:42.440
> 
> 标签：android

我使用此代码但在其他时区无法正常工作。如何通过更改时区或当前系统时区来更改此时间

小时；整数分钟；

```
 Calendar cal = Calendar.getInstance();
        cal.set(Calendar.HOUR, 16);
        cal.set(Calendar.MINUTE, 30);
        cal.set(Calendar.SECOND, 0);
        cal.set(Calendar.AM_PM, Calendar.PM);

        TimePicker asarTime=(TimePicker)findViewById(R.id.asarTime);
        asarTime.setCurrentHour(16);
        asarTime.setCurrentMinute(30);

        Date currentLocalTime = cal.getTime();
        SimpleDateFormat date = new SimpleDateFormat("HH:mm:ss z");

        date.setTimeZone(TimeZone.getTimeZone("UTC"));
        String localTime = date.format(currentLocalTime);           
        TextView timeShow=(TextView)findViewById(R.id.textView1);

        timeShow.setText(currentLocalTime.toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:52:05.753

首先，像这样设置时区：

```
 TimeZone tz = cal.getTimeZone();
    date.setTimeZone(tz); 
```

您可以添加一个检查时区的服务来更新您的应用程序。实际上，用户在使用应用程序时必须更改时区的情况并不经常发生，因此您可以在每次应用程序启动时检查这一点。

# javascript - ajax 调用 mvc 操作中的空数据

> ID：13375557
> 
> 赞同：1
> 
> 时间：2012-11-14T08:48:55.590
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3

我正在使用 asp.net mvc。我有这个动作：

```
[HttpPost]
public ActionResult Create(MyData myData)
{
   .... // For some reason data is always empty. The attributes are all null
} 
```

我的数据是：

```
public class MyData {
    public string prop1 {get;set;}
    public IEnumerable<int> prop2 {get;set;}
} 
```

我这样称呼它：

```
 var specificData = { prop1: 'abc', prop2: [1,2,3] }

   $.ajax({
        type: 'POST',
        dataType: 'json',
        url: '/MyController/Create',
        data: { myData: specificData }, //data contains the same attributes as MyData class
        success: function (data, b,c,d) {
            alert("success!");
        },
        error: function (data, b, c, d) {
            alert('fail');
        }
    }); 
```

问题是在 Create 操作中，“数据”变量被实例化，但它的属性都是空的。难道我做错了什么？

**更新**
根据@Rory McCrossan，我通过使用`data: specificData`而不是`data: { myData: specificData }`. 但现在我在不同的地方遇到了这个问题。与 MyData 类相关的序列化问题，因为现在我使用的是更复杂的类： public class Person { public string name{get;set;} }

```
public class MyData {
    public string prop1 {get;set;}
    public IEnumerable<Person> prop2 {get;set;}
} 
```

具体数据是：

```
var specificData = { prop1: 'abc', 
                     prop2:  [ 
                         {name:'a'},
                         {name:'b'},
                         {name:'c'}]
                   }; 
```

在操作中，myData.prop2.ElementAt(0).name 为空。现在有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:00:31.813

创建要发送的 JS 对象时，您将属性包装在`myData`不需要的属性中。尝试这个：

```
$.ajax({
    data: specificData
    // other settins...
}); 
```

# c# - 如何在 C# 中处理大文件？

> ID：13375561
> 
> 赞同：2
> 
> 时间：2012-11-14T08:49:08.567
> 
> 标签：c#, out-of-memory, iso

我想使用 C# 中的大型 .ISO 文件。我想操作它，从中添加和删除文件，并从中创建一个新的 iso。我已经尝试过 DiscUtils 库，但似乎我无法让它工作。当我加载它（使用标准 C# 函数）时，我总是得到 OutOfMemoryException。这是一个 600MB 的 ISO（或多或少），我有 2GB 的 RAM。

我目前正在这样做：

```
 FileStream fs = new FileStream(FileDialog.FileName, FileMode.Open, FileAccess.Read);
                BinaryReader b = new BinaryReader(fs);

                byte[] buffer = b.ReadBytes((int)fs.Length);

                int count;                            // actual number of bytes read
                int sum = 0;
                while ((count = b.Read(buffer, (int)sum, (int)(buffer.Length - sum))) > 0)
                {
                    sum = sum + count;  // sum is a buffer offset for next reading
                } 
```

它在“byte[] buffer = b.ReadBytes((int)fs.Length);”处抛出 OutOfMemoryException。当我在 ISO 中删除/添加内容时，我可以将其加载到部分中，还是必须是整个文件？

UPDATE1：我限制了缓冲区：

```
FileStream fs = new FileStream(FileDialog.FileName, FileMode.Open, FileAccess.Read,FileShare.Read,4096); 
```

但还是一无所获。

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:01:19.563

在 C# 中处理大文件的常用方法是使用 a[`FileStream`](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)并一次处理小块。但这取决于您的库是否可以处理 FileStreams，您是否可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:06:11.967

[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)是有效处理因太大而无法驻留在内存中的文件的方法。

# c# - 文件属性标志由代码或操作系统控制？

> ID：13375564
> 
> 赞同：2
> 
> 时间：2012-11-14T08:49:17.463
> 
> 标签：c#, file-attributes

我正在学习文件属性枚举，并且有两个问题我找不到具体答案（尽管我有自己的看法）。

我的应用程序检查是否已设置存档标志。在我的测试过程中，我在桌面上创建了一个 .txt 文件，并删除了要存档的标志。然后我打开文件，添加一行文本并保存文件。属性存档已重新设置。这是合乎逻辑的和可取的。

我的第一个问题是，设置标志、程序或操作系统是什么？

我的第二个问题是，我应该设置标志还是在大多数情况下我可以依赖操作系统（假设操作系统是设置标志的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:10:47.660

`ATTRIB`您可以使用命令行或底层 Windows API控制存档文件属性标志（例如，允许“您的代码”完全控制标志）。但是，当文件被修改时，归档标志被设置。这不是您必须在应用程序或代码中执行的操作。预期的使用场景是这样的：

*   操作系统将在创建或修改文件时设置标志

*   备份应用程序（例如“您的代码”）将在备份文件时重置标志

但是，依赖存档标志进行备份可能会出现问题，因为多个独立的备份应用程序可能正在使用该标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:02:39.683

如果自上次备份后文件已被“触及”，则 DOS 设置此存档位。

例如，当具有明确归档位的文件从文件系统上的一个位置移动到另一个位置时，归档位将恢复为设置状态。

# objective-c - 当点击叠加层中的按钮时，带有 cameraOverlayView 的 UIImagePickerController 会聚焦

> ID：13375568
> 
> 赞同：3
> 
> 时间：2012-11-14T08:49:41.763
> 
> 标签：objective-c, ios, uiimagepickercontroller, camera-overlay

我是 Objective C 的新手，这是我在这里发布的第一个问题，所以这可能是世界上最容易回答的问题，但我无法弄清楚这个问题。

我正在尝试创建一个使用相机的 iOS 应用程序。我正在使用 UIImagePickerController 类来显示相机并拍照，但我创建了一个自定义 UIView，其中包含一堆 UIButton 实例，这些实例覆盖相机预览帧，使用 cameraOverlayView 属性。我正在使用 a 方法通过以下代码将相机放在屏幕上：

```
- (BOOL) startCameraControllerFromViewController: (UIImagePickerController*) imagePickerController
                               usingDelegate: (id <UIImagePickerControllerDelegate,
                                               UINavigationControllerDelegate>) imagePickerControllerDelegate {

if (([UIImagePickerController isSourceTypeAvailable:
      UIImagePickerControllerSourceTypeCamera] == NO)
    || (imagePickerController == nil)
    || (imagePickerControllerDelegate == nil))
    return NO;

imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;

imagePickerController.mediaTypes = [[NSArray alloc] initWithObjects: (NSString *) kUTTypeImage, nil];

imagePickerController.allowsEditing = NO;
imagePickerController.showsCameraControls = NO;
imagePickerController.wantsFullScreenLayout = YES;

imagePickerController.delegate = imagePickerControllerDelegate;

self.cameraOverlayViewController = [[CameraOverlayViewController alloc] initWithImagePickerControllerDelegate:imagePickerController nibName:@"CameraOverlayView" bundle:nil];
self.cameraOverlayViewController.view.frame = CGRectMake(0, 0, imagePickerController.view.frame.size.width, imagePickerController.view.frame.size.height);
imagePickerController.cameraOverlayView = self.cameraOverlayViewController.view;

[self presentViewController:imagePickerController animated:self.showCameraAnimation completion:^(void) {
    [self.view bringSubviewToFront:self.cameraOverlayViewController.view];
}];

return YES; 
```

}

当我按下位于相机预览窗口顶部的按钮时，相应的 IBAction 会被触发，但底层的相机视图也会被点击并重新聚焦。因此，每次按下按钮时，我都必须手动重新对焦相机预览，然后才能拍照。如您所见，我尝试使用bringSubViewToFront:，但这似乎不起作用。

当我点击 cameraOverlayView 上的按钮时，如何防止相机对焦？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:37:05.203

将此添加到您的代码中：[hitTest:withEvent:](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    UIView *hittedView = [super hitTest:point withEvent:event];
    return hittedView == self.button ? hittedView : nil;
} 
```

我参考了这个： [UserInteraction enable for subview only](https://stackoverflow.com/questions/13414108/userinteraction-enable-for-subview-only)。我已经测试了代码。它有效！

# java - 在 Lucene 3.6 中找不到 TokenSources 类？

> ID：13375571
> 
> 赞同：0
> 
> 时间：2012-11-14T08:49:53.700
> 
> 标签：java, android, lucene, highlighting

我在我的 Android 应用程序中使用 Lucene 来构建字典。我想要完成的是，当用户键入一个单词时，它不仅会查询字典条目，还会查询它们的内容。输出将是动态更新`ListView`，其中包含第一行中的单词，第二行中包含单词出现的定义部分。为此，我正在关注本教程：[http ://hrycan.com/2009/10/25/lucene-highlighter-howto/](http://hrycan.com/2009/10/25/lucene-highlighter-howto/)

但是，我找不到课程`TokenSources`。我正在使用 Lucene 3.6。事实上，整个父包`org.apache.lucene.search.highlight`似乎在这个版本中不可用。我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:49:58.617

org.apache.lucene.search.highlight 与 Lucene 一起分发，但在与 lucene-core jar 不同的 jar 中。您应该在 contrib 目录中找到（即 lucene/contrib/highlighter/lucene-highlighter-3.6.1.jar）。

# php - PDO 课堂上的良好实践和指导

> ID：13375572
> 
> 赞同：1
> 
> 时间：2012-11-14T08:49:56.117
> 
> 标签：php, class, pdo

大家好，我已经苦苦挣扎了一两个星期，试图了解整个 PDO、单身或非 MVC 等等。我现在已经编码了 3 个月，我想知道我是否最终做到了这一点。

我正在为班级成绩等构建一个简单的学校应用程序......并制作了一个名为 section 的课程，我现在已经将 PDO 纳入其中。到目前为止，它的工作和功能与 id 一样，但在我以同样的方式制作更多课程之前，我想知道是否有任何错误以及如何改进。尽管我写了其他所有内容，但我自己并没有正确的 DB 类。

```
class pdoDB {

/*** Declare instance ***/
private static $db = NULL;

/**
*
* the constructor is set to private so
* so nobody can create a new instance using new
*
*/
private function __construct() {
/*** maybe set the db name here later ***/
}

/**
*
* Return DB instance or create intitial connection
*
* @return object (PDO)
*
* @access public
*
*/
public static function getInstance() {

 if (!self::$db)
{
self::$db = new PDO('mysql:host=localhost;dbname=attendance_ksu','root','root');;
self::$db-> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
}
return self::$db;
}

/**
*
* Like the constructor, we make __clone private
* so nobody can clone the instance
*
*/
private function __clone(){
}

} /*** end of class ***/ 
```

现在我的部分类。

```
class Section  {

// if protected can't loop through on html page into table
    // I don't want to make getter method for each attribute.
    // all data will be coming from the db

public $id;
public $section_number;
public $subject;
public $classroom;
public $level_id;
public $shift;
public $course;
public $campus;
public $times;
public $academic_year;
public $start_date;
public $end_date;
public $max_st_number;
public $status;

// retrieve all sections in db

public static function get_all_sections() {

try {

    // maybe a waste of time doing this bit?? not sure!! the " if(!isset($db)) "

if(!isset($db)) {
$db = pdoDB::getInstance();

/*** echo a message saying we have connected for testing reasons only ***/
echo 'Connected to database <br />';
}

/*** The SQL SELECT statement ***/
$sql = "SELECT * FROM sections";
$stmt = $db->query($sql);
$objs = $stmt->fetchALL(PDO::FETCH_CLASS, 'Section');

// 1\. return the complete array of data so I can loop through it later

return $objs;  

// 2\. Or echo out a loop immediately where this method is called

   /*

foreach ($objs as $section) {
echo "Section:" . $section->section_number . " | " . 
     "Subject: {$section->subject}" . "<br/>";
}

    */

$db = null;   
    }

catch(PDOException $e)
{
echo $e->getMessage();
}

}

// Get the section details by id from db
// will be passed via the URL as $_GET

public static function get_section_by_id($id) {

try {

if(!isset($db)) {
$db = pdoDB::getInstance();

/*** echo a message saying we have connected ***/
echo 'Connected to database<br />';
}   
     /*** prepare the SQL statement ***/
$stmt = $db->prepare("SELECT * FROM sections WHERE id = :id");

/*** bind the paramaters ***/
$stmt->bindParam(':id', $id, PDO::PARAM_INT);

/*** execute the prepared statement ***/
$stmt->execute();

/*** fetch the results and give it a class ***/
$section = $stmt->fetchObject('section');
return $section;

$db = null;   
    }

catch(PDOException $e)
{
echo $e->getMessage();
}   

}
} 
```

我打算只在页面上调用 get_all_sections() 方法并将结果循环到表中。其他页面也将使用此方法完成。如果不将我的学习曲线扩展到 MVC 等......这是一种可以接受的方法吗？我是否朝着正确的方向前进？

例如：

```
<?php
// some code
$sections = Section::get_all_sections();

// any other necessary code
?>

<html> 
<body>

    <table class="table table-striped table-bordered table-highlight" id="example">
<thead>
<tr>
<th>#</th>
<th>Section Number</th>
<th>Subject</th>
<th>Course</th>
<th>Students</th>
<th>Level</th>
<th>Campus</th>
<th>Classroom</th>
<th>Shift</th>
<th>Start date</th>
<th>End date</th>
<th>Teacher</th>
<th>&nbsp;</th>
</tr>
</thead>

<tbody>
<?php 
$key =  1;
foreach($sections as $section) {
?>
<tr>
<td><? echo $key++ ?></td>
<td><a href=""><?php echo $section->section_number ?></a> </td>
<td><?php echo $section->subject ?> </td>
<td><?php echo $section->course ?> </td>
<td><?php echo $section->no_students ?> sts</td>
<td><?php echo $section->level_id ?> </td>
<td><?php echo $section->campus ?> </td>
<td> <?php echo $section->classroom ?></td>
<td><?php echo $section->shift ?> </td>
<td><?php echo date("d-M-Y",strtotime($section->start_date ))?></td>
<td><?php echo date("d-M-Y",strtotime($section->end_date ))?></td>
<td>

<?php 
if($section->username  =="")
{
echo "<a href=\"add_section_teacher.php?id=".urlencode($section->id )."&section_number=".urlencode($section->section_number )."\">Not assigned</a>";

} else {
echo "<a href=\"edit_section_teacher.php?ts_id=".urlencode($section->ts_id )."\">";
echo $section->username ; 
echo "</a>";
}       
?>  
</td>
<td><a href="delete.php?id=<?php echo $section->id ; ?>" 
onclick="return confirm('Are you sure you want to delete section <?php echo $section->section_number ; ?> ?');">Delete</a></td>
</tr>
<? }?></tbody>
</table> 
```

提前感谢您的任何反馈和建议。我想正确地学习这一点，因此任何详细的反馈:)都会受到赞赏，因为这里的目标是学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T15:51:50.043

尽管 Artragis 的上述回答确实是要走的路（长期），但我感到 OP'er 努力将自己的思想围绕整个 OOP 之谜包裹起来的痛苦——在过去的两年里，我一直在断断续续地与这个作斗争几年没有真正得到任何地方。

我对他简单的 Section-class 的观察：

*   单例模式还可以
*   单例的用法不好：单例本身被设计为仅“实例化”一次（可能是错误的单词选择），然后在需要时保持打开状态。

我建议执行以下操作：

*   删除测试以检查 $db isset - 如果连接不存在，则单例仅创建连接
*   删除 $db 变量的取消设置 - 只需保持连接打开，直到垃圾收集通过
*   一个可选步骤是将您的 $db_handle 注入到 Section-class 中（通过构造函数最简单） - 这将使您的 Section-class 仅与 pdoDB-class 松散耦合（好的，好的 - 也许您需要一个中间接口这是由 pdoDB 类首先实现的，但你明白了）并且更容易测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:10:58.957

我认为您的 PDO 工厂还可以。您的课程部分不好，因为它不尊重单一责任原则。

部分应该只是一个具有属性、getter 和 setter（如果需要）和一些计算方法的类。必须没有到数据库的链接。您应该使用存储库模式来放置 bdd 访问方法，如 find、findAll...

然后你应该在你的控制器中调用你的存储库。

```
class SectionRepository{
    public function findAll(){
       $db = pdoDB::getInstance();
       $result = $bd->query(SELECT * FROM sections);
       return $result->fetchAll(PDO::FETCH_CLASS,Section);  
    }
} 
```

关于您正在使用的 PDO 工厂：

```
class PDOFactory{
    private static $connection = null;
    public static function getConnection(){
        if(self::$connection === null){
             self::$connection = new PDO();//here you can use a config file if you want
             self::$connection -> setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
        }
        return self::$connection;
} 
```

它不是一个真正的单例，因为没有任何私有构造（在 php 中不可能重载）并且因为 PDOFactory 不扩展 PDO 但行为完全相同。

# php - 如何使用 PHP 上传文件

> ID：13375575
> 
> 赞同：6
> 
> 时间：2012-11-14T08:50:00.157
> 
> 标签：php, box-api

在本页面：`http://developers.box.com/docs/`

使用 cURL 上传文件：

```
METHOD
POST /files/content
EXAMPLE REQUEST
curl https://api.box.com/2.0/files/content \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" \
-F filename1=@FILE_NAME1 \
-F filename2=@FILE_NAME2 \
-F folder_id=FOLDER_ID 
```

但是现在，我想使用 php 上传文件，我该怎么做呢？我的代码：

```
<?php     
$params = array();
$params['folder_id'] = '485272014';

$u_file = fopen("D:\code\php\bcs\test.data", "r");

$params['filename1'] = $u_file;

$params = json_encode($params);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.box.com/2.0/files/content");
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $params);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);

curl_setopt($ch, CURLOPT_UPLOAD, true);

curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: BoxAuth api_key=API_KEY&auth_token=TOKEN"));
$result = curl_exec($ch);
curl_close($ch);
print_r($result);

fclose($u_file);

?> 
```

它没有用，我使用以下命令运行脚本：`php -f test.php`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T10:38:52.300

1.  我不认为 POST 表单数据可以接受使用创建的文件处理程序
    `fopen("D:\code\php\bcs\test.data", "r");`

    尝试使用 @ 而不是访问文件处理程序。顺便说一句，将 \ 更改为 / 这样你就不会不小心将某些字符作为转义字符：
    `$u_file = "@D:/code/php/bcs/test.data";`

2.  你不应该`json_encode`是内容，如果你的文件内容不是文本（比如，图像/二进制文件）。

3.  我认为这条线也给你带来了问题。使用此选项尝试了我的代码，向我抛出了一个奇怪的“441 Required length”错误。没有此选项，我的代码可以正常工作：
    `curl_setopt($ch, CURLOPT_UPLOAD, true);`

最后，这是我的工作代码：

```
<?php
public function upload_file()
{
   $url = 'https://api.box.com/2.0/files/content';

   $ch = curl_init();
   curl_setopt($ch, CURLOPT_URL, $url);
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
   curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
   curl_setopt($ch, CURLOPT_ENCODING, "UTF-8");

   //this is my method to construct the Authorisation header
   $header_details = array($this->default_authen_header());
   curl_setopt($ch, CURLOPT_HTTPHEADER, $header_details);

   $post_vars = array();
   $post_vars['filename'] = "@C:/tmp_touch.txt";
   $post_vars['folder_id'] = 0;

   curl_setopt($ch, CURLOPT_POST, true);
   curl_setopt($ch, CURLOPT_POSTFIELDS, $post_vars);
   curl_setopt($ch, CURLOPT_URL, $url);

   $data = curl_exec($ch);
   curl_close($ch);
   return $data;
}
?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-31T12:23:05.950

```
<?php
    // ENTER YOUR DEVELOPER TOKEN
    $token = "ekdfokeEdfdfkosdkoqwekof93kofsdfkosodSqd";

    $url = "https://upload.box.com/api/2.0/files/content";
    if (isset($_POST['btnUpload'])) {
        $file_upload = $_FILES['file']['tmp_name'];
        $json = json_encode(array(
                                'name' => $_FILES['file']['name'], 
                                'parent' => array('id' => 0)
                            ));
        $fields = array(
                      'attributes' => $json,
                      'file'=>new CurlFile($_FILES['file']['tmp_name'],$_FILES['file']['type'],$_FILES['file']['name'])
                  );

        try {
            $ch = curl_init();
            curl_setopt($ch,CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_HTTPHEADER, array(
                'Authorization: Bearer '.$token, 
                'Content-Type:multipart/form-data'
            ));
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
            $response = curl_exec($ch);
            curl_close($ch);
        } catch (Exception $e) {
            $response = $e->getMessage();
        }

        print_r($response);
    }

?>

<form method="post" name="frmUpload" enctype="multipart/form-data">
    <tr>
        <td>Upload</td>
        <td align="center">:</td>
        <td><input name="file" type="file" id="file"/></td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td align="center">&nbsp;</td>
        <td><input name="btnUpload" type="submit" value="Upload" /></td>
    </tr>
</form> 
```

# facebook - $facebook->getUser() 返回零

> ID：13375576
> 
> 赞同：0
> 
> 时间：2012-11-14T08:50:11.733
> 
> 标签：facebook, facebook-graph-api

我对 Facebook PHP API 有疑问。这是我的代码：

```
<?php
$facebook = new Facebook(array(
    'appId'  => 'MY_APP_ID',
    'secret' => 'MY_SECRET'
));

$uid = $facebook->getUser();
if ($uid) {
    try{
        $user = $facebook->api('/me');
    } catch (Exception $e){
        error_log($e);
        $user = null;
    }
}

if (!$uid) {
    $login_url = $facebook->getLoginUrl(array(  
        'next' =>   'http://www/mywebsite.com', 
        'redirect_uri' =>   'http://www/mywebsite.com', 
        'scope' => 'email,publish_stream,user_birthday,user_location'
    ));

    echo '<a href="'.$login_url.'">TEST TO CONNECT</a>';
} else {
    print_r($user);
} 
```

我一直有 TEST TO CONNECT 行，所以它看起来像 $facebook->getUser(); 总是返回 0。有什么想法吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:06:48.390

你能看到任何错误吗？您是否被带到登录页面并返回？还是一切都好？

您的代码中的错误似乎`if (!$uid)`在您生成登录 url 的部分之下。

我真的不知道`'next' => 'http://www/mywebsite.com',`那里有什么。

尝试使用这个：

```
$loginUrl = $facebook->getLoginUrl(
                array(
                   'scope'         => 'publish_stream,read_friendlists,user_photos',
                   'redirect_uri'  => $redirecturi
                )
            ); 
```

另外，不要忘记包含 Facebook PHP SDK 文件。

`require_once("facebook.php");//or full location if the file is placed elsewhere.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T13:04:30.410

我遇到了类似的问题。我搜索了整个互联网，访问了博客、论坛，但一切都是徒劳的。所以，我决定使用 facebook 的 JS SDK 而不是 PHP SDK。当我这样做时，JS SDK 通过说我的帐户是从其他浏览器访问来扩展登录过程的。这个扩展显示没有从 php sdk 端出现。我想我应该恢复原状并再次尝试使用 PHP SDK ......然后它就成功了。

所以基本上不是你的代码错误，而是fb的登录过程导致了这个错误。您有两个选择：i）请您的朋友参与测试登录 ii）使用 js sdk

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:03:29.807

如果这是您的完整代码，那么存在一个主要问题：您一开始没有包含 facebook 类：

```
include 'Facebook.php'; 
```

还要确保您的 App ID 和 App Secret 正确无误。并使用“publish_actions”而不是“publish_stream”。

如果这没有帮助，请调试。facebook 通常会告诉你什么是错的。

# javascript - 如何在对话框按钮函数中获取JS变量

> ID：13375577
> 
> 赞同：1
> 
> 时间：2012-11-14T08:50:13.567
> 
> 标签：javascript, jquery-ui, get

我有一个对话框，对话框中有动态按钮。在每个按钮中，`$.get()`都会生成 a。

文件的路径部分是可变的，函数（将在成功时执行）也是可变的。

但我无法让它工作。控制台说变量是`undefined`. 我知道为什么，因为它在一个`function`. 但是我在全局范围内设置了变量。

谁能解释我如何让这些变量起作用？

我将提供我的源代码，以便您了解我的意思。

* * *

## 源代码

```
 var dialog_buttons = {};

    for(var i=0;i<socialMediaServ.length;i++)
    {
        dialog_buttons["Upload naar "+socialMediaServ[i]]= function()
        {
            $("#wait-dialog").dialog(
            {
                modal: true,
                resizable: false, 
                draggable: false,
                width:305,
                height:125,
                my:'center',
                at:'center',
                open: function(){}
            });

            $.get("../includes/social/"+socialMediaServ[i]+"/upload.php",{functie: "checkUser", fotonaam: fotoNaam}, window['users_'+socialMediaServ[i]+'_check'], 'json');
        }
    };
    dialog_buttons["Sluiten"]= function() 
    {
        $(this).dialog("close");
    };
    $("#dialog-foto").dialog("option", "buttons", dialog_buttons);
    $("#dialog-foto").dialog("open"); 
```

* * *

该变量`socialMediaServ`设置在我的页面顶部。`socialMediaServ`是一个数组：`Facebook,Twitter`

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:06:57.887

我确信我完全理解问题所在。我假设 $.get 中的 socialMediaServ[i] 值是未定义的。

我会尝试将每个数组值存储在循环范围内的变量中：

```
 for(var i=0;i<socialMediaServ.length;i++)
{
   (function(){
    dialog_buttons["Upload naar "+socialMediaServ[i]]= function()
    {
        $("#wait-dialog").dialog(
        {
            modal: true,
            resizable: false, 
            draggable: false,
            width:305,
            height:125,
            my:'center',
            at:'center',
            open: function(){}
        });

        $.get("../includes/social/"+socialMediaServ[i]+"/upload.php",{functie: "checkUser", fotonaam: fotoNaam}, window['users_'+socialMediaServ[i]+'_check'], 'json');
    }
  })(i);
}; 
```

# regex - 在第一行或 / （正则表达式）之后删除某些内容

> ID：13375578
> 
> 赞同：2
> 
> 时间：2012-11-14T08:50:18.070
> 
> 标签：regex, python-3.x

我正在尝试使用匹配 /../ 之前的子字符串的正则表达式从字符串中删除某些内容，这些子字符串要么从开头开始，要么在 / 之后。

到目前为止我有

```
re.sub('(?<=[/]|\A).+(?=[/][.][.][/])', '', str) 
```

虽然当我尝试这个或其他变体时，我不断收到错误，从删除第一个 / 之后的所有项目到不删除分组的第一个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T08:59:12.510

看来`/`自己永远不可能成为比赛的一部分。因此，尝试

```
re.sub(r'[^/]*(?=/\.\./)', '', mystr) 
```

`[^/]`匹配任何不是 a 的字符`/`，因此它从字符串的开头开始匹配，直到遇到`/../`，除非中间有一个`/`，在这种情况下，匹配将在那之后开始。

# php - 有没有办法将当前时间与mysql保存的时间进行比较

> ID：13375581
> 
> 赞同：1
> 
> 时间：2012-11-14T08:50:33.620
> 
> 标签：php, mysql, datetime

因此，在我的 php 脚本中，我将当前时间 (date()) 与 mysql 数据库中的时间进行比较，但它不起作用。我该怎么做呢？PHP

```
if($row['Datum'] < date(Y-m-d-H-i-s)) { Code to execute} 
```

mysql日期时间

```
2012-11-13 17:00:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:54:49.623

您可以将其添加到 SQL 查询中吗？

```
SELECT * FROM tablename WHERE Datum < now(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:01:04.977

您当前的代码有语法错误，但它非常接近可以工作的东西：

```
if ($row['Datum'] < date('Y-m-d H:i:s')) {
    // Code to execute
} 
```

这很可能在循环内，因此您应该缓存以下输出`date()`：

```
$now = date('Y-m-d H:i:s');

// loop here
foreach ($rows as $row) {
    if ($row['Datum'] < $now) {
        // code to execute
    }
} 
```

您也可以直接在查询中进行比较：

```
$now = date('Y-m-d H:i:s');
$db->query("SELECT * FROM whatever WHERE Datum < '$now'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T08:56:15.903

如果您的日期与 ISO 8601 格式匹配：“YYYY-MM-DD HH:II:SS”，则可以使用**strtotime**函数将字符串转换为 Unix 时间戳。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T08:52:00.870

mysql日期格式是

```
$date = new DateTime();
$date = $date->format('Y-m-d H:i:s');

if ( $row['Datum'] < $date) { Code to execute } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T08:53:36.047

首先，您的 php 调用中日期的格式错误，mysql 日期的格式为`"Y-m-d H:i:s"`。其次，您不需要这样做。您可以改为使用以下内容：

```
if(strtotime($row['Datum']) < time()) { // Code to execute } 
```

这会将 mysql 日期转换为时间戳，并将其与当前时间戳进行比较。

# xml - 如何减小 okwix 维基百科转储的大小？

> ID：13375586
> 
> 赞同：0
> 
> 时间：2012-11-14T08:51:04.633
> 
> 标签：xml, mediawiki, wikipedia

Okawax 有一个适用于 Android 的应用程序。我有一个 12 GB 纯文本 Wikipedia 转储，但它太大而无法放入 SD 卡。

有没有办法从这个 Okwix 转储创建一个新的转储，只选择计算机或 IT 相关的文章？（我不想要其他文章）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:04:53.513

改用[Kiwix](http://kiwix.org/)，它是完全免费的软件，使用 ZIM，它具有更好的压缩率，并且在 Wikimedia 项目中包含一些较小的文件（例如，如果您需要大量删除图像，则没有图像）。

# java - vaadin 中的 generateCell

> ID：13375588
> 
> 赞同：1
> 
> 时间：2012-11-14T08:51:15.053
> 
> 标签：java, user-interface, vaadin, vaadin-touchkit

我有一个包含组合框列的表，在组合框的 valueChange 侦听器中我生成另一列。所有人都认为没问题，添加了第二列，但我失去了组合框的价值，它被重置了。据我了解， generateCell 函数运行两次。你可以帮帮我吗？你可以在下面看到我的代码：

```
getTable().addGeneratedColumn("action", new Table.ColumnGenerator() {  
    @Override
    public Object generateCell(Table source, Object itemId, Object columnId) {
        ComboBox comboBox = new ComboBox();    
        comboBox.addListener(new Property.ValueChangeListener() {
            @Override
            public void valueChange(Property.ValueChangeEvent event) {
                taskTable.getTable().addGeneratedColumn("rejectReason", 
                    new Table.ColumnGenerator() {
                        @Override
                        public Object generateCell(final Table source1, final Object itemId1, Object columnId1) {
                            ComboBox comboBox1 = new ComboBox();
                            comboBox1.select((comboBox1.getContainerDataSource()).firstItemId());
                            return comboBox1;
                        }
                    }
                );
            }
        });
        return comboBox;
    }
}); 
```

# html - 图片在您的网站上下载的顺序是什么？

> ID：13375592
> 
> 赞同：3
> 
> 时间：2012-11-14T08:51:27.400
> 
> 标签：html, css, image, browser

图像是按照它们在标记中显示的顺序下载的，还是显示的项目按照字母数字顺序下载？

我想知道，因为我想在精选图片之前订购我的网站资产精灵。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T08:54:53.470

很难说，标记中有图像，CSS中有图像。实际上没有任何规则，这取决于浏览器。

如果它们是按源顺序请求的，则不能保证响应（所有图像数据）将按照请求的顺序接收。浏览器可以同时发出多个请求，因此这取决于提供图像的位置以及图像的大小。

它们也可能已经被缓存了，我认为你可能对不必要的东西过分大惊小怪。

您可以试验或查看一些 JavaScript 预加载程序或其他东西，但老实说，这不是需要担心的事情。用户已经习惯了这种体验。

最简单的实现是隐藏所有这些图像（使用 JavaScript 以使非 JS 不受影响）并等待页面的 onload 事件，然后您可以使用 JavaScript 计时器使图像按您希望的顺序显示出现在。

一旦所有相关的页面工件完成加载，onload 事件就会触发，有时这种情况永远不会发生（希望很少发生），或者需要很长时间。好吧，你也可以有一个超时来触发 onload 事件处理程序作为回退，以防万一发生这种情况，然后只显示你所拥有的。这种事情会让我根本不费心去做任何花哨的事情，而只是让事情变得简单。

如果问题是您的页面在加载图像时正在重排，那是因为您没有指定图像占位符的尺寸（例如 IMG 元素的宽度和高度属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:54:27.013

Firefox**似乎**按照它们在标记中显示的顺序加载图像。我相信 Chrome 和 Internet 也一样。

您可以在 Firefox 或 Chrome 控制台中使用 Firebug 自行测试。

# mysql - mysql中两个大表之间的连接查询

> ID：13375595
> 
> 赞同：1
> 
> 时间：2012-11-14T08:51:36.320
> 
> 标签：mysql, join, bigtable

我必须在 mysql 中的两个大表之间运行一个连接查询，每个表的大小是 300MB，mysql 中的执行时间问题，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:37:11.137

您可能会考虑使用外部工具：

[谷歌大查询](https://developers.google.com/bigquery/docs/overview)

# swfupload - 使用 Google Closure Library 上传多个文件

> ID：13375600
> 
> 赞同：1
> 
> 时间：2012-11-14T08:51:42.493
> 
> 标签：swfupload, google-closure, plupload, yui3, google-closure-library

如何使用 Google Closure 处理多个文件上传？

*   是否可以将[YUI3 Uploader](http://yuilibrary.com/yui/docs/uploader/)与[Google Closure Library](http://code.google.com/p/closure-library/)一起使用？是否有可用于 YUI3 的外部文件？是否可以将 YUI3 Uploader 放在 iframe 中并访问 iframe 父框架中的上传处理程序返回的变量？使用 iframe，也许我可以为 YUI 上传器创建一个隔离的环境。

*   有没有人有使用[SWFUpload](http://code.google.com/p/swfupload/)、[Plupload](http://www.plupload.com/)或其他使用 Google Closure Library 的经验？

*   作为替代方案，我可以使用[Google Picker](https://developers.google.com/picker/)将文件上传到 Google Drive，然后使用 Google Drive SDK 将这些文件下载到我的网络主机。缺点是我无法更改 Google Picker 的样式以匹配我网站的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T11:54:58.893

编写一个使用 SWFUpload 进行多文件上传的 Google Closure Library 组件实际上相当容易。我使用 Closure Compiler 创建了一个用于高级编译的 externs 文件：

```
var SWFUpload = {
    "instances": function () {},
    "movieCount": {},
    "version": {},
    "QUEUE_ERROR": {
        "QUEUE_LIMIT_EXCEEDED": {},
        "FILE_EXCEEDS_SIZE_LIMIT": {},
        "ZERO_BYTE_FILE": {},
        "INVALID_FILETYPE": {}
    },
    "UPLOAD_ERROR": {
        "HTTP_ERROR": {},
        "MISSING_UPLOAD_URL": {},
        "IO_ERROR": {},
        "SECURITY_ERROR": {},
        "UPLOAD_LIMIT_EXCEEDED": {},
        "UPLOAD_FAILED": {},
        "SPECIFIED_FILE_ID_NOT_FOUND": {},
        "FILE_VALIDATION_FAILED": {},
        "FILE_CANCELLED": {},
        "UPLOAD_STOPPED": {}
    },
    "FILE_STATUS": {
        "QUEUED": {},
        "IN_PROGRESS": {},
        "ERROR": {},
        "COMPLETE": {},
        "CANCELLED": {}
    },
    "BUTTON_ACTION": {
        "SELECT_FILE": {},
        "SELECT_FILES": {},
        "START_UPLOAD": {},
        "JAVASCRIPT": {}
    },
    "CURSOR": {
        "ARROW": {},
        "HAND": {}
    },
    "WINDOW_MODE": {
        "WINDOW": {},
        "TRANSPARENT": {},
        "OPAQUE": {}
    },
    "completeURL": function () {},
    "Console": {
        "writeLine": function () {}
    }
},
FileProgress = {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:22:28.507

你看过`goog.net.iframeIo`Google Closure Library 中的类吗？您可以在单个表单中呈现多个文件输入元素，然后使用此组件通过隐藏的 IFrame 将这些表单中的每一个发布到 Web 服务器。

以下是关于如何实现它的 Google 文档的链接：

[http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/net/iframeio.js#48](http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/net/iframeio.js#48)

# c - 当我将它用作函数返回类型或参数时，为什么要 typedef enum

> ID：13375605
> 
> 赞同：0
> 
> 时间：2012-11-14T08:52:01.243
> 
> 标签：c, enums

我想使用***枚举***作为函数返回类型或作为参数。但是当我按原样给出时，它会给出错误消息。但如果我***typedef***相同，它工作正常。

```
#include <stdio.h>

enum        // if *typedef enum* is used instead, it's working fine
{
    _false,
    _true,
} bool;

bool func1(bool );

int main()
{
    printf("Return Value = %d\n\n", func1(_true));

    return 0;
}

bool func1(bool status)
{
    return status;
} 
```

请帮助我理解这一点。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:54:21.187

你的语法错误。

如果你不使用，`typedef`那么它应该是这样的：

```
enum bool
{
    _false,
    _true,
};
enum bool func1(enum bool );

enum bool func1(enum bool status)
{
    return status;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:55:04.557

您不是在创建新类型*，* `bool`而是在声明一个*名为*`bool`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T08:56:48.840

这段代码：

```
enum
{
    _false,
    _true,
} bool; 
```

声明一个匿名枚举类型的*变量* `bool`。 `typedef enum { ... } bool;`定义了一个`bool`可以用来引用枚举类型的类型。

你也可以写

```
enum bool
{
    _false,
    _true,
}; 
```

但是您必须将类型称为`enum bool`. 最便携的解决方案是编写

```
typedef enum bool
{
    _false,
    _true,
} bool; 
```

即定义一个称为枚举类型和一个称为引用它`bool`的通用类型。`bool`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T08:59:38.780

您使用的语法是错误的。如下使用它。

```
#include <stdio.h>

enum bool        // if *typedef enum* is used instead, it's working fine
{
    _false,
    _true,
} ;

enum bool func1(enum bool );

int main()
{
    printf("Return Value = %d\n\n", func1(_true));

    return 0;
}

enum bool func1(enum bool status)
{
    return status;
} 
```

相反，如果您使用 typedef，您可以直接使用`bool`而不是`enum bool`.

还要引用 C99 标准：

```
Section 7.16 Boolean type and values < stdbool.h >

1 The header <stdbool.h> deﬁnes four macros.
2 The macro
bool expands to _Bool.
3 The remaining three macros are suitable for use in #if preprocessing directives. They are
true : which expands to the integer constant 1,
false: which expands to the integer constant 0, and
__bool_true_false_are_defined which expands to the integer constant 1.
4 Notwithstanding the provisions of 7.1.3, a program may undeﬁne and perhaps then redeﬁne the macros bool, true, and false. 
```

如果你有一个**编译为 C99**标准的编译器，那么你可以只包含`stdbool.h`和使用 bool like `bool b = true;`.

# java - 从双链表中删除

> ID：13375607
> 
> 赞同：-2
> 
> 时间：2012-11-14T08:52:02.870
> 
> 标签：java, android

我是java，我正在尝试实现从双链表中删除的方法，但我很挣扎，不知道如何推进。该方法删除存储在列表中给定节点的数据。我已经读到我需要考虑被删除的元素是开始或结束的情况，但我不知道该怎么做。一般来说，我不确定这是否是正确的方法。我的代码/进度发布在下面。如果有任何帮助，将不胜感激。谢谢

PS我在班级中有一个开始和一个结束参考以及一个尺寸参考

```
 public type removeAtTheIndex(int index) 
  {
     type theData = null;
    Node <type> current= start;
    Node temp= new Node();
    if (index >= 0 && index < size && start !=null)
    {

        for (int i=0; i < index && current.getNext()!= null; i++)
        {
            current=current.getNext();
        }
        if (current != null)
        {
        if (current == start)
        {

        }

        else if (current == end)
        {

         }

        else
        {
            theData= current.getData();
            temp= current.getPrev();
            temp.setNext(current.getNext());
            current.getNext().setPrev(temp);
            current.setData(null);
            size--;

        }

    }

    return theData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:11:25.227

我已将`type`. `Type`在 Java 中不推荐使用小写的类名。我已经添加了大量的评论，希望你能理解发生了什么。

请注意，这不是经过测试的代码。您可能会在其中发现错误，但我相信流程的本质就在那里。

```
public Type removeAtTheIndex(int index) {
  // I want to return the data that was removed.
  Type theData = null;
  // Sanity checks.
  if (index >= 0 && index < size && start != null) {
    // Find the entry with the specified index.
    Node<Type> current = start;
    for (int i = 0; i < index && (current = current.getNext()) != null; i++) {
    }
    // Did we find it?
    if (current != null) {
      // Yes! Gather the contents.
      theData = current.getData();
      // Clear it.
      current.setData(null);
      // Special?
      if (current == start) {
        // Its the start one.
        start = start.getNext();
        // Detach it.
        start.setPrev(null);
      } else if (current == end) {
        // Step end back one.
        end = end.getPrev();
        // Detach it.
        end.setNext(null);
      } else {
        // Remove from within list.
        Node prev = current.getPrev();
        // Point it at my next.
        prev.setNext(current.getNext());
        // Point my next to new prev.
        current.getNext().setPrev(prev);
      }
      // One less now.
      size--;
    }
  }
  return theData;
} 
```

# javascript - 使用 android 原生播放器播放 vimeo 视频？

> ID：13375609
> 
> 赞同：4
> 
> 时间：2012-11-14T08:52:08.570
> 
> 标签：javascript, android, mobile, video, vimeo

我正在开发一个使用 vimeo 的网站，对于移动设备，我希望使用手机的本机播放器播放视频。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:54:58.100

**在安卓中**

**首先**。在您的项目中添加 io.vov.vitamio.widget 包。

**2.**然后在你的xml布局文件中定义一个videoview ...

**3.**然后在您的 java 文件中使用此代码。确保您正在导入 vimeo 包中可用的包

```
 videoView.setVideoURI(Uri.parse(path)); 
 videoView.setMediaController(new MediaController(this)); 
 videoView.requestFocus(); 
 videoView.start(); 
```

它完成了。

# asp.net - 如何增加会话的生命周期？

> ID：13375611
> 
> 赞同：-2
> 
> 时间：2012-11-14T08:52:26.043
> 
> 标签：asp.net, webserver

我当前的属性： `Session.Timeout = 500;`- 忽略；在服务器属性 - `Session State Time-out`= 500 - 没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:02:42.953

您是否尝试在 web.config 中设置 sessionState 元素的超时：

```
<sessionState 
    mode="[Off|InProc|StateServer|SQLServer|Custom]"
    timeout="number of minutes"
    cookieName="session identifier cookie name"
    cookieless=
         "[true|false|AutoDetect|UseCookies|UseUri|UseDeviceProfile]"
    regenerateExpiredSessionId="[True|False]"
    sqlConnectionString="sql connection string"
    sqlCommandTimeout="number of seconds"
    allowCustomSqlDatabase="[True|False]"
    useHostingIdentity="[True|False]"
    stateConnectionString="tcpip=server:port"
    stateNetworkTimeout="number of seconds"
    customProvider="custom provider name">
    <providers>...</providers>
</sessionState> 
```

[看这里](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:02:43.153

您是否在[`web.config`](http://msdn.microsoft.com/en-us/library/aa306178.aspx)文件中设置了会话超时？

```
<configuration>
  <system.web>
     <sessionState timeout="500"></sessionState>
  </system.web>
</configuration> 
```

由于其他原因，您可能还想看看这个网站：http: [//patelshailesh.com/index.php/session-expires-before-timeout-value-specified-in-web-config](http://patelshailesh.com/index.php/session-expires-before-timeout-value-specified-in-web-config)

正如@Hans 所建议的那样，您还可以使用“保持活动”机制而不是增加会话的大锤方法。这是一个：[“会话除颤器”](http://www.codeproject.com/Articles/10550/The-Defibrillator-Keeping-ASP-NET-Session-Alive-Ad)

# javascript - 如何将 CodeMirror 集成到 KnockoutJS 中？

> ID：13375612
> 
> 赞同：8
> 
> 时间：2012-11-14T08:52:28.350
> 
> 标签：javascript, knockout.js, codemirror

我想将[CodeMirror](http://codemirror.net/) JavaScript 编辑器集成到 KnockoutJS 中。我知道还有 Ace，但在我看来，使用 CodeMirror 会更容易。

我已经为 JQueryUI 小部件和 QTip 集成了自定义绑定，但这些是我在 Internet 上找到的代码片段，然后我只需要修改非常小的部分。

不幸的是，我似乎已经达到了 Javascript 的极限，所以我在这里转向 JavaScript Sith Masters。我不一定想要为我写的全部内容，关于如何继续的指针和建议会有很大帮助。

我有一段代码：

HTML（我删除了我在 textarea 上已有的自定义绑定，它们在这里无关紧要）

```
<body>
    <textarea id="code" cols="60" rows="8" 
              data-bind="value: condition, 
              tooltip: 'Enter the conditions', 
              codemirror: { 'lineNumbers': true, 'matchBrackets': true, 'mode': 'text/typescript' }"></textarea>
</body> 
```

我的 CodeMirror 自定义绑定处理程序的开始：

```
ko.bindingHandlers.codemirror = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var options = valueAccessor() || {};
        var editor = CodeMirror.fromTextArea($(element)[0], options);
    }
}; 
```

目前，这不会产生 JS 错误，但会显示 2 个文本区域而不是 1 个。

那么接下来我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T12:55:38.590

Jalayn 列出的代码（或 jsfiddle 中的代码）不会更新观察变量，编辑器也不会显示加载值。这是我更新的代码

```
 ko.bindingHandlers.codemirror = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var options = valueAccessor();
            var editor = CodeMirror.fromTextArea(element, options);
            editor.on('change', function(cm) {
                allBindingsAccessor().value(cm.getValue());
            });
            element.editor = editor;
            if(allBindingsAccessor().value())
                editor.setValue(allBindingsAccessor().value());
            editor.refresh();
            var wrapperElement = $(editor.getWrapperElement());

            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                wrapperElement.remove();
            });
        },
        update: function (element, valueAccessor) {
            if(element.editor)
                element.editor.refresh();
        }
    }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-28T00:19:05.500

之前发布的解决方案似乎有点过时了，对我不起作用，所以我以一种有效的形式重写了它们：

```
// Example view model with observable.
var viewModel = {
    fileContent: ko.observable(''),
    options: {
        mode:  "markdown",
        lineNumbers: true
    }
};

// Knockout codemirror binding handler
ko.bindingHandlers.codemirror = {
    init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {

        var options = viewModel.options || {};
        options.value = ko.unwrap(valueAccessor());
        var editor = CodeMirror(element, options);

        editor.on('change', function(cm) {
            var value = valueAccessor();
            value(cm.getValue());
        });

        element.editor = editor;
    },
    update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        var observedValue = ko.unwrap(valueAccessor());
        if (element.editor) {
            element.editor.setValue(observedValue);
            element.editor.refresh();
        }
    }
};

ko.applyBindings(viewModel); 
```

将`<div data-bind="codemirror:fileContent"></div>`代码镜像作为附加到此的目标将创建一个新的代码镜像实例，并传入视图模型中的选项（如果已设置）。

[**编辑**] 我已经修改了 codemirror 绑定处理程序的更新方法来解开传递的 valueAccessor，如果没有该行敲除将不会在更新 observable 时触发更新方法 - 它现在可以按照您的预期工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-28T00:56:50.313

我在将光标设置为第一个位置时遇到问题。[这个小提琴](https://jsfiddle.net/bbolgradov/qnda6vu8)解决了这个问题，它还接受 CodeMirror`options`对象作为绑定值，并且内容绑定到一个`options.value`observable（我发现这不那么令人困惑，因为这实际上是 CM 从中获取其[起始值](https://codemirror.net/doc/manual.html#config)的属性名称）

```
ko.bindingHandlers.codemirror = {
    init: function(element, valueAccessor) {
        var options = ko.unwrap(valueAccessor());
        element.editor = CodeMirror(element, ko.toJS(options));
        element.editor.on('change', function(cm) {
            options.value(cm.getValue());
        });

        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            var wrapper = element.editor.getWrapperElement();
            wrapper.parentNode.removeChild(wrapper);
        });
    },
    update: function(element, valueAccessor) {
        var value = ko.toJS(valueAccessor()).value;
        if (element.editor) {
            var cur = element.editor.getCursor();
            element.editor.setValue(value);
            element.editor.setCursor(cur);
            element.editor.refresh();
        }
    }
}; 
```

示例 HTML：

```
<div data-bind="codemirror: {
    mode: 'javascript',
    value: text
}"></div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-14T11:51:51.847

好吧，我终于设法做到了（请参阅更新的[小提琴](http://jsfiddle.net/SKZSm/10/)）。

我很快设法在自定义文本区域中设置了初始值。但在那之后，绑定的元素没有被更新。

然而，CodeMirror 的 API 允许您向`onChange`事件注册一个回调方法，以便在修改 textarea 的内容时调用。因此，只需实现更新绑定元素值的回调即可。这是在选项中创建自定义文本区域时完成的。

这是自定义绑定：

```
ko.bindingHandlers.codemirror = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        var options = $.extend(valueAccessor(), {
            onChange: function(cm) {
                allBindingsAccessor().value(cm.getValue());
            }
        });
        var editor = CodeMirror.fromTextArea(element, options);
        element.editor = editor;
        editor.setValue(allBindingsAccessor().value());
        editor.refresh();
        var wrapperElement = $(editor.getWrapperElement()); 

        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            wrapperElement.remove();
        });
    }
}; 
```

它可能缺少一些功能，但是对于我需要的东西，它可以完美地工作。

编辑：根据 Anders 的评论，我添加了在`addDisposeCallback`重新渲染模板时有效地破坏 CodeMirror 生成的 DOM 元素的部分。由于 CodeMirror 生成的所有内容都在一个节点内，因此只需删除该节点即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T12:47:50.873

我正在尝试使用上面的绑定处理程序，但是在输入某些内容（空格或任何其他字符）之前，我遇到了 TextArea 中看不到任何文本的问题。

加载完成后它是空白的，只要我在该区域输入内容，所有绑定的数据就会变得可见。

还有一个问题，如果我将一个简单的 ko.observable() 绑定到 TextArea 的值，一切正常，但如果我用 ko.observableArray 中的一列替换它，例如 value: selectedProfile().QueryString，我'从绑定处理程序中得到以下错误：

有问题的行： editor.setValue(allBindingsAccessor().value()); 错误：未捕获的类型错误：对象# 的属性“值”不是函数

想法？

/LM

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-03T17:07:42.223

我在上面的一个答案中遇到了与 Lars 相同的问题，即 codemirror 在第一次交互之前最初没有加载数据。我通过添加一个标志来解决它，以确定 codemirror 值是否通过键入或以编程方式更改并订阅该值。

```
ko.bindingHandlers.codemirror = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            var typed = false;
            var options = $.extend(valueAccessor(), {
                onChange: function (cm) {
                    typed = true;
                    allBindingsAccessor().value(cm.getValue());
                    typed = false;
                }
            });
            var editor = CodeMirror.fromTextArea(element, options);
            element.editor = editor;
            editor.setValue(allBindingsAccessor().value());
            editor.refresh();
            var wrapperElement = $(editor.getWrapperElement());
            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                wrapperElement.remove();
            });

            allBindingsAccessor().value.subscribe(function (newValue) {
                if (!typed) {
                    editor.setValue(newValue);
                    editor.refresh();
                }
            });
        }
    }; 
```

我相信会有一种“更清洁”的方法来实现同样的效果，但这暂时看起来还不错。

# unix - if语句bash中的多个和or

> ID：13375619
> 
> 赞同：5
> 
> 时间：2012-11-14T08:52:56.160
> 
> 标签：unix

嗨，我正在做一些事情，我需要创建一个 if 语句，它将在 '&&' 和 '||' 中采用多个变量 组合 。现在我正在尝试这个简单的任务，但我收到错误“找不到命令”。我想先 && 两个比 || 它带有我在代码中设置的标志。以下是我正在尝试的代码

```
if [[$pcount -eq 0 ] && [$ucount -eq 0]] ||  [test $flag -eq 1]
then 
do my stuff 
else 
exit 1
fi 
```

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T09:06:23.573

您不能嵌套`[ ... ]`，因为`[`它是一个 shell 命令，而不是一个单独的语法结构。在 Bash 中，您可以使用`[[ ... ]]`支持嵌套的语法结构，在可移植中，`sh`您可以使用`( ... )`括号作为优先级：

```
if ([ $pcount -eq 0 ] && [ $ucount -eq 0 ]) ||  [ $flag -eq 1 ] 
```

补充说明：

*   `[test condition]`没有意义，因为`[`运算符已经是`test`. 写要么`[ condition ]`要么`test condition`。

*   `[`和测试前留一个空格，否则`sh`无法识别`[`为命令名。`[`是一个和其他命令一样的命令，并且与特殊的解析规则无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:02:42.170

在 bash 中，你可以这样做：

```
if [[ ( $pcount == 0  &&  $ucount == 0 ) || ( $flag == 1 ) ]]
then
    echo "do stuff"
fi 
```

或者：

```
if [ "$pcount" -eq 0 -a "$ucount" -eq 0 ] || [ "$flag" -eq 1 ]
then
     echo "do stuff"
fi 
```

但是，我会推荐第一种方法。

# javascript - 防止委托提交事件多次触发

> ID：13375622
> 
> 赞同：0
> 
> 时间：2012-11-14T08:52:58.217
> 
> 标签：javascript, jquery, ajax, delegates, jquery-events

我的页面上有几个动态创建的表单，每个表单都有一个 jQuery 提交事件：

```
$('table').on('submit','form',function(e){
  e.preventDefault();
  console.log('hello');
  var form = $(e.target);
  if(typeof operation != 'undefined'){
operation.abort();
return;
  }
  var operation = $.ajax(
    //rest of my logic
  )l  
});

<form action="/update_cart/12" method="post">
    <input name="utf8" type="hidden" value="✓">
    <input class="quantity_field text_field" id="quantity" name="quantity" type="text" value="1">
</form> 
```

问题是表单提交事件为选择器中的每个表单触发一次，并启动使服务器超载的 ajax。我怎样才能让它只有我点击的表单触发ajax？

# jquery - 带有可拖动元素的 JQuery 工具栏，后跟弹出窗口

> ID：13375623
> 
> 赞同：0
> 
> 时间：2012-11-14T08:53:00.763
> 
> 标签：jquery, jquery-ui, drag-and-drop, widget, toolbar

我想开发一个花哨的功能来向我的网页添加小部件。计划是在页面顶部添加一个带有图标的工具栏。例如，这些图标之一可以代表一个图表。如果工具栏中的元素可以拖放到网页上的特定位置，那就太好了。释放鼠标按钮后，应该会打开一个弹出表单，可以在其中设置元素的详细信息。按下完成/保存后，元素应固定在释放鼠标的位置。

那是我的想法，但现在现实主义开始了……我怎样才能实现这样的目标？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:04:33.743

最简单的解决方案是使用 jquery + jquery-ui。

```
$('.move').draggable().mouseup(function(e) { 
var $t = $(this);        
var p = $('<div></div>');
p.addClass('pop');
p.css('top', e.pageY).css('left',e.pageX);
$('body').append(p);
$t.unbind('mouseenter mouseleave mousedown mouseup');
});​ 
```

演示：http: [//jsfiddle.net/DVHuY/1/](http://jsfiddle.net/DVHuY/1/)

# web-services - 如何查看 Tomcat 上可用的 Web 服务？

> ID：13375633
> 
> 赞同：4
> 
> 时间：2012-11-14T08:54:05.890
> 
> 标签：web-services, tomcat, jboss, jmx

我们的项目中部署了两个应用程序，一个在 JBoss 和 Tomcat 上（使用专有的 FAST 堆栈框架）。以下 URL 列出了 JBoss 上可用的 Web 服务/jmx-console：

Web 服务 := http://server:port/ **jbossws**

JMX 控制台 := http://server:port/ **jmx-console**

相同的格式不适用于 Tomcat。是否有不同的模块（在上述 URL 中以粗体显示），我可以使用它查看 Tomcat 上可用的 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:58:47.440

不

有`http://server:port/manager/html`它允许您管理已部署的 WAR 档案。每个 WAR 存档可能包含使用不同堆栈的 Web 服务。例如 CXF 或 Spring-WS。这些堆栈中的每一个都有不同的方法来列出可用服务。

例如，CXF 允许您输入映射到的主 URL `CXFServlet`，您将获得可用的服务。

# android-ndk - 在 Windows 7 上为 Android 编译 Gstreamer SDK

> ID：13375635
> 
> 赞同：0
> 
> 时间：2012-11-14T08:54:13.433
> 
> 标签：android-ndk, gstreamer

尝试做*GStreamer SDK for Android*的 Tutorial5 。

当我进入 Cygwin 1.7 终端上的项目目录并执行 `ndk-build`

我明白了

```
make: -n: Command not found
GStreamer      : [GEN] => gst-build/gstreamer_android.c
/bin/sh: i: command not found
/cygdrive/c/gstreamer-sdk-android-arm-debug-2012.10/share/gst-android/ndk-build/gstreamer.mk:151: recipe for target `genstatic' failed
make: [genstatic] Error 127 (ignored)
/bin/sh: i: command not found
/cygdrive/c/gstreamer-sdk-android-arm-debug-2012.10/share/gst-android/ndk-build/gstreamer.mk:151: recipe for target `genstatic' failed
make: [genstatic] Error 127 (ignored)
/bin/sh: i: command not found
/cygdrive/c/gstreamer-sdk-android-arm-debug-2012.10/share/gst-android/ndk-build/gstreamer.mk:151: recipe for target `genstatic' failed
make: [genstatic] Error 127 (ignored)
/bin/sh: i: command not found
/cygdrive/c/gstreamer-sdk-android-arm-debug-2012.10/share/gst-android/ndk-build/gstreamer.mk:151: recipe for target `genstatic' failed
make: [genstatic] Error 127 (ignored)
GStreamer      : [COMPILE] => gst-build/gstreamer_android.c
gst-build/gstreamer_android.c:1:17: fatal error: jni.h: No such file or directory
compilation terminated.
/cygdrive/c/gstreamer-sdk-android-arm-debug-2012.10/share/gst-android/ndk-build/gstreamer.mk:161: recipe for target `gst-build/gstreamer_android.o' failed
make: *** [gst-build/gstreamer_android.o] Error 1 
```

有人知道出了什么问题吗？我检查了，我*做了（版本 3.82.90）*

`gstreamer.mk:151`是第二行

```
# Generates a source file that declares and registers all the required plugins
genstatic:
    @$(HOST_ECHO) "GStreamer      : [GEN] => $(GSTREAMER_ANDROID_C)"
    @$(call host-mkdir,$(GSTREAMER_BUILD_DIR))
    @$(call host-cp,$(GSTREAMER_ANDROID_C_IN),$(GSTREAMER_ANDROID_C))
    @$(HOST_SED) -i "s/@PLUGINS_DECLARATION@/$(GSTREAMER_PLUGINS_DECLARE)/g" $(GSTREAMER_ANDROID_C)
    @$(HOST_SED) -i "s/@PLUGINS_REGISTRATION@/$(GSTREAMER_PLUGINS_REGISTER)/g" $(GSTREAMER_ANDROID_C)
    @$(HOST_SED) -i "s/@G_IO_MODULES_LOAD@/$(G_IO_MODULES_LOAD)/g" $(GSTREAMER_ANDROID_C)
    @$(HOST_SED) -i "s/@G_IO_MODULES_DECLARE@/$(G_IO_MODULES_DECLARE)/g" $(GSTREAMER_ANDROID_C) 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T15:31:40.823

添加

```
ifeq ($(HOST_OS),cygwin)
  HOST_SED := $(GSTREAMER_NDK_BUILD_PATH)/tools/windows/sed
  GSTREAMER_LD :=
else
endif 
```

到您的 gstreamer.mk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T10:50:39.150

确保*shell* in`tools.mk`指向您的环境 shell。

即 cygwin 中的 /usr/bin/bash 或 /bin/bash。

# r - 在 centOS 上安装 rJava

> ID：13375636
> 
> 赞同：6
> 
> 时间：2012-11-14T08:54:15.823
> 
> 标签：r, rjava

我在 centOS VM (cloudera cdh3u4) 上安装 rJava 时遇到问题。

我先这样做了：sudo R CMD javareconf

```
[cloudera@localhost ~]$ sudo R CMD javareconf
Java interpreter : /usr/bin/java
Java version     : 1.6.0_31
Java home path   : /usr/java/jdk1.6.0_31/jre
Java compiler    : /usr/bin/javac
Java headers gen.:
Java archive tool: /usr/bin/jar
Java library path: $(JAVA_HOME)/lib/amd64/server:$(JAVA_HOME)/lib/amd64:$(JAVA_HOME)/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
JNI linker flags : -L$(JAVA_HOME)/lib/amd64/server -L$(JAVA_HOME)/lib/amd64 -L$(JAVA_HOME)/../lib/amd64 -L/usr/java/packages/lib/amd64 -L/usr/lib64 -L/lib64 -L/lib -L/usr/lib -ljvm
JNI cpp flags    : -I$(JAVA_HOME)/../include -I$(JAVA_HOME)/../include/linux

Updating Java configuration in /usr/lib64/R
Done. 
```

但是当我想安装 rJava 时，我得到了这个：

```
> install.packages( c('rJava'),
+ repos='http://cran.revolutionanalytics.com')

    ...
    configure: error: One or more Java configuration variables are not set.
    Make sure R is configured with full Java support (including JDK). Run
    R CMD javareconf
    as root to add Java support to R.

    If you don't have root privileges, run
    R CMD javareconf -e
    to set all Java-related variables and then install rJava.

    ERROR: configuration failed for package ‘rJava’
    * removing ‘/home/cloudera/R/x86_64-redhat-linux-gnu-library/2.15/rJava’

    The downloaded source packages are in
            ‘/tmp/RtmpR5V6t5/downloaded_packages’
    Warning message:
    In install.packages(c("rJava"), repos = "http://cran.revolutionanalytics.com") :
      installation of package ‘rJava’ had non-zero exit status 
```

我不确定，但这是否意味着我需要安装 JDK？如果是，您是否知道一个好的站点，我可以在其中找到为我的案例安装正确 JDK 的分步信息？（我的最终目的是安装 rhdfs 和 rjava 是需要的依赖项）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-01T15:34:50.997

试试这个它为我解决了配置问题 [http://www.ibm.com/support/knowledgecenter/SSPT3X_3.0.0/com.ibm.swg.im.infosphere.biginsights.install.doc/doc/install_install_r.html](http://www.ibm.com/support/knowledgecenter/SSPT3X_3.0.0/com.ibm.swg.im.infosphere.biginsights.install.doc/doc/install_install_r.html)

我努力安装 rJava 并且几乎没有学习。让我解释。当您在 R 中发出 install package 命令时

```
install.packages("rJava") 
```

查找在 R 环境中设置的以下变量。

> 检查 R 中的 Java 支持...存在：解释器：'/usr/java/jre/bin/java' 归档器：'/usr/java/jdk1.8.0_111/jre/../bin/jar ' 编译器： '/usr/java/jdk1.8.0_111/jre/../bin/javac' 头文件准备： '/usr/java/jdk1.8.0_111/jre/../bin/javah' cpp 标志： '-I/usr/lib/jvm/java/include -I/usr/lib/jvm/java/include/linux' java 库：'-L/usr/java/jdk1.8.0_111/jre/lib/amd64/服务器 -ljvm -ldl'

我的java安装在/usr/java/jdk1.8.0_111。验证变量指定的每个路径是否正确。接下来寻找你的LD_LIBRARY_PATH。我认为它在这条路径中寻找“libjvm.so”。对我来说是

```
export LD_LIBRARY_PATH=/usr/lib/jvm/jdk1.8.0_111/jre/lib/amd64/server:/usr/lib/jvm/jdk1.8.0_111/jre/lib/amd64/ 
```

设置你的 JAVA_HOME 环境变量

首先发出命令

```
R CMD javareconf -e 
```

它将设置以下变量 JAVA_HOME JAVA JAVAC JAVAH JAR JAVA_LIBS JAVA_CPPFLAGS JAVA_LD_LIBRARY_PATH 修改 JAVA_LIBS 目录

```
export JAVA_LIBS="$JAVA_LIBS -ldl" 
```

再次发出不带 -e 的 javareconf 命令

```
R CMD javareconf 
```

现在进入 R shell 并发出 rJava install 命令，它应该找到所有的环境变量并且它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T19:11:55.857

是的，您确实需要 JDK。

对于它的价值，我的 Debian / Ubuntu 包`openjdk-6-jdk`在构建我们的`r-cran-rjava`包时安装。

看起来这个`java-1.6.0-openjdk.x86_64`包应该适合你，你也可以试试`java-1.7.0-openjdk.x86_64`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-30T03:45:37.350

早期版本会出现间歇性问题。镜像不是最新的，因此请访问 www.rforge.net 的源代码：[http](http://www.rforge.net/rJava/files/) ://www.rforge.net/rJava/files/ 。请用

`install.packages('rJava',,'http://www.rforge.net/')`

安装。” 这几乎是正确的。这实际上有效：

install.packages('rJava', .libPaths()[1], 'http://www.rforge.net/')

“.libPaths()[1]”只是告诉 R 将包安装在主库目录中。出于某种原因，将值留空不起作用，即使它应该作为默认值工作。

# html - 特定输入的html表单大小

> ID：13375639
> 
> 赞同：0
> 
> 时间：2012-11-14T08:54:20.313
> 
> 标签：html

我有一个输入如下的表格：

```
id="mytext" size="35" 
```

这给了我一个包含 35 个字符的框。

我想要一个大小为 35 个字符的 Box，但有 2 行。如何在 HTML 中设置它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:55:54.277

只是困惑，你想要`size`还是你想要`limit`你的角色？

`maxlength`如果要将`limit`字符设置为 35 ，请使用属性

```
<input type="text" maxlength="35" /> 
```

或者如果你想要 2 行，你可以使用 textarea

```
<textarea rows="2" cols="20" maxlength="35"></textarea> 
```

注意：`size`不是 的有效属性`<textarea>`，如果要增加宽度，请使用`cols`

```
<textarea row="2" cols="35"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:58:12.423

像这样：

```
<textarea id="mytext" rows="2" size="35"></textarea>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:04:42.323

对于两行，您可以使用两个输入字段

```
<input type="text" name="line[]" maxlength="35" />
<input type="text" name="line[]" maxlength="35" /> 
```

[] 字符会将其组合成服务器端的类似数组。

例如，PHP 可以让您以这种方式访问​​这两行

```
$line1 = $_POST['line'][1];
$line2 = $_POST['line'][2]; 
```

您也可以将 textarea 标签用于多行，但据我所知，这本身不能限制为两行

编辑：

textarea 属性 cols 和 rows 仅定义显示大小。输入长度不受限制。

[http://www.htmlref.com/reference/appa/tag_textarea.htm](http://www.htmlref.com/reference/appa/tag_textarea.htm)

# objective-c - __block 到底是做什么的？

> ID：13375643
> 
> 赞同：1
> 
> 时间：2012-11-14T08:54:34.947
> 
> 标签：objective-c, block, xcode4.5

是的，如果块可能会更改变量，我们会这样做。

但幕后究竟发生了什么？

谁“拥有”这个对象？块或功能，或谁？

__block 如何使它与众不同？

这是一些示例：

```
__block NSError * error=nil;
__block NSURLResponse *urlresponse=nil;
__block NSData *response = nil;
NSString *json_string=nil;

[BGHPTools computeTimeWithName:FUNC block:^{
    response= [NSURLConnection sendSynchronousRequest:request returningResponse:&urlresponse error:&error];

}]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T08:59:10.270

来自应用[文档](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html)

__block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。因此，如果在帧中声明的块的任何副本在帧结束后仍然存在（例如，通过在某处排队以供稍后执行），则存储将在堆栈帧的破坏中幸存下来。给定词法范围内的多个块可以同时使用一个共享变量。

# android - 我真的需要另一个框架来进行 android 游戏编程吗

> ID：13375644
> 
> 赞同：1
> 
> 时间：2012-11-14T08:54:37.777
> 
> 标签：android

我最近开始使用 android 游戏编程。我觉得可以使用 OpenGL java。我可以在不使用其他框架（如 unity3d 和许多其他框架）的情况下开发游戏。

我觉得如果我开始使用任何框架，它会让我的工作变得更快。但是当谈到性能时，我发现框架会消耗资源......

**我真的需要为安卓游戏开发选择任何框架吗？如果是的话，最好的选择是什么（最好的免费和最好的付费）**

非常感谢您阅读和回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:25:46.733

为 Android 创建游戏的引擎和框架：

*   **Unity 3D Android / IOS（300 美元）**（如果你能负担得起，那就太好了） 编辑：现在免费 :)。
*   AndEngine [http://www.andengine.org/blog/](http://www.andengine.org/blog/)
*   **LibGDX [http://code.google.com/p/libgdx/](http://code.google.com/p/libgdx/)** <-- 我更喜欢这个
*   角度[http://code.google.com/p/angle/](http://code.google.com/p/angle/)
*   Rokon [http://www.rokonandroid.com/](http://www.rokonandroid.com/)
*   湿婆[http://www.stonetrip.com/](http://www.stonetrip.com/)

您不必选择框架。但是为安卓创建游戏是一项艰巨的工作。当您想编写 3D 游戏时，我希望您知道自己在做什么。自己编写高质量的 3D 游戏几乎是不可能的（享受绘制 3D 模型和优化代码的乐趣。）。这就是我现在停留在 2D 的原因。

# android - 使用服务手动调用 getLastKnownLocation

> ID：13375649
> 
> 赞同：1
> 
> 时间：2012-11-14T08:55:19.740
> 
> 标签：android, gps, location, locationmanager

我想按特定的时间间隔（例如每 30 秒获取一次）获取用户的当前位置，我编写了一个管理此调用操作的服务。按特定时间间隔调用 getLastKnownLocation 是可以的，但每次它都会给我相同的位置信息。我运行应用程序并开始开车，但没有任何改变。

如果我实现 LocationListener 并使用 onLocationChanged，那么即使我将位置管理器设置如下，这次特定的时间间隔也不起作用。

```
_locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, (1 * 20 * 1000), 1, this); // recall in every 20 seconds or distance between 200 meters 
```

为什么即使我改变了我的位置，我总是得到相同的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:07:56.483

也许您没有设置任何标准或有一个糟糕的提供者。您是否记得在清单中设置必要的权限？

您可以使用它来请求位置更新：

```
// Get best providers and set criteria
LocationManager lm;
Criteria crit = new Criteria();
crit.setAccuracy(Criteria.ACCURACY_FINE);
String towers = lm.getBestProvider(crit, false);

// Set provider and update interval
lm.requestLocationUpdates(towers, 5000, 20, this); // minimum 5 seconds, 20 meters 
```

请记住，在 requestLocationUpdates 中设置的时间间隔是最小的，并且不准确。

要获取最后一个已知位置：

```
LocationManager locationManager = ((LocationManager) getSystemService(Context.LOCATION_SERVICE));
Location location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

获取经度和纬度：

```
location.getLatitude();
location.getLongitude(); 
```

这对我有用。

# internet-explorer - 如何创建 IE 浏览器帮助对象以响应特定的 MIME 文件类型（例如 .helloword 文件）？

> ID：13375652
> 
> 赞同：4
> 
> 时间：2012-11-14T08:55:37.167
> 
> 标签：internet-explorer, pdf, browser, helper

当 IE 遇到 .PDF 文件时，它会在 IE 中打开 Adob​​e PDF Reader，用户可以阅读 PDF 内容。

我想要做的是让 IE 行为相同，但使用我自己的 MIME 类型，比如说 .helloworld 文件扩展名。

那么，是不是我必须做以下事情：

1.  为 IE 创建一个 IE 浏览器帮助器对象以响应特定的 MIME 类型 (.helloworld)
2.  在注册表系统中注册/安装插件
3.  创建一个由 IE 调用的程序。

就这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T19:40:39.783

您可能想看看异步可插入协议和 MIME 类型过滤器：http: [//msdn.microsoft.com/en-us/library/ie/aa767916 (v=vs.85).aspx#Creating_a_Pluggable](http://msdn.microsoft.com/en-us/library/ie/aa767916(v=vs.85).aspx#Creating_a_Pluggable)

# ios - 打印 NSMutableURLRequest 内容

> ID：13375658
> 
> 赞同：15
> 
> 时间：2012-11-14T08:55:59.923
> 
> 标签：ios, nslog, nsmutableurlrequest

我想问一下是否有人尝试过打印出 NSMutableURLRequest *request; 的值。

这是我的场景，我已经形成了我的 XML 并尝试使用 Firefox Poster 插件发送它，我成功地使用了有效和无效的内容，所以是时候进入 iOS 了，不幸的是，iOS 似乎无法正常工作，但我总是收到错误请求 (400) 的响应，我怀疑这是由格式错误的 xml 内容引起的；所以我在发送请求之前想检查它是否在正确的形式上。

所以它归结为“我怎样才能打印出（nslog等）*请求的内容”

下面的示例代码：

```
 NSURL *URL = [NSURL URLWithString:@"http://xxx.xxx.xxx.xxx/ps"];

    NSMutableURLRequest *request = [NSMutableURLRequest                                         requestWithURL:URL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60];
    NSString *msgLength = [NSString stringWithFormat:@"%d", [self.xmlLogin length]];

    //NSString *params = [[NSString alloc] initWithFormat:@"%@",[self xmlLogin]];
    [request addValue:@"application/xxx.ven.xml" forHTTPHeaderField:@"Content-Type"];
    [request addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"identity" forHTTPHeaderField:@"Accept-Encoding"];
    [request setValue:@"windows-1251" forHTTPHeaderField:@"Accept-Charset"];
    [request setCachePolicy:NSURLRequestReturnCacheDataElseLoad];
    [request setHTTPBody:[[self xmlLogin] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

这个代码片段

```
NSLog(@"Request %@\n",request); 
```

结果到

```
<NSMutableURLRequest http://xxx.xxx.xxx.xxx/ps> 
```

在做类似的事情时

```
NSLog(@"Request %@\n",[request HTTPBody]); 
```

结果到

```
<4c697665 3e383634 30303c2f 54696d65 546f4c69 76653e20 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 203c5365 7373696f 6e436f6f 6b69653e 436f6c69 62726961 494d5053 5f333734 36323032 39322e34 38373931 345f3737 33313c2f 53657373 696f6e43 6f6f6b69 653e2020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 3c2f4c6f 67696e2d 52657175 6573743e 3c2f5472 616e7361 6374696f 6e436f6e 74656e74 3e3c2f54 72616e73 61637469 6f6e3e20 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 20202020 203c2f53 65737369 6f6e3e3c 2f57562d 4353502d 4d657373 6167653e> 
```

我知道这个十六进制值的集合可以转换；如何？（发现如何只是一个愿望清单）

真正的问题在于请求的内容，我很想知道如何查看原始内容并检查它是否真的以正确的形式出现。

谢谢，

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-10-07T13:21:40.447

```
NSLog(@"Request body %@", [[NSString alloc] initWithData:[request HTTPBody] encoding:NSUTF8StringEncoding]); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-30T21:31:33.867

```
- (NSString *)formatURLRequest:(NSURLRequest *)request
{
    NSMutableString *message = [NSMutableString stringWithString:@"---REQUEST------------------\n"];
    [message appendFormat:@"URL: %@\n",[request.URL description] ];
    [message appendFormat:@"METHOD: %@\n",[request HTTPMethod]];
    for (NSString *header in [request allHTTPHeaderFields])
    {
        [message appendFormat:@"%@: %@\n",header,[request valueForHTTPHeaderField:header]];
    }
    [message appendFormat:@"BODY: %@\n",[[NSString alloc] initWithData:[request HTTPBody] encoding:NSUTF8StringEncoding]];
    [message appendString:@"----------------------------\n"];
    return [NSString stringWithFormat:@"%@",message];
}

- (NSString *)formatURLResponse:(NSHTTPURLResponse *)response withData:(NSData *)data
{
    NSString *responsestr = [[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSUTF8StringEncoding];
    NSMutableString *message = [NSMutableString stringWithString:@"---RESPONSE------------------\n"];
    [message appendFormat:@"URL: %@\n",[response.URL description] ];
    [message appendFormat:@"MIMEType: %@\n",response.MIMEType];
    [message appendFormat:@"Status Code: %ld\n",(long)response.statusCode];
    for (NSString *header in [[response allHeaderFields] allKeys])
    {
        [message appendFormat:@"%@: %@\n",header,[response allHeaderFields][header]];
    }
    [message appendFormat:@"Response Data: %@\n",responsestr];
    [message appendString:@"----------------------------\n"];
    return [NSString stringWithFormat:@"%@",message];
} 
```

# java - 获取字段名称和值并将其存储在地图中

> ID：13375659
> 
> 赞同：0
> 
> 时间：2012-11-14T08:56:02.930
> 
> 标签：java

这是我获取字段值和注释值的代码，我将值放入地图中，但问题是地图中有一个`$this`。

```
Map doc = null;
        String kind = null;
        Class classObj = obj.getClass();
        Annotation[] annotations = classObj.getAnnotations();
        for (Annotation annotation : annotations) {
                Entity entityAnnotation = (Entity)annotation; 
                kind = entityAnnotation.name();
                if (entityAnnotation != null){
                        if (doc == null){
                            doc = new LinkedHashMap();
                        }
                        Field[] fields = classObj.getDeclaredFields();
                        for (Field field : fields){
                                annotations = field.getDeclaredAnnotations();
                                String value = null;
                                String fieldName = field.getName();
                                try {
                                        boolean access = field.isAccessible();
                                        field.setAccessible(true);
                                        Object fieldValue = field.get(obj); 
                                        doc.put(fieldName, fieldValue);
                                        field.setAccessible(access);
                                } catch (Exception e) {
                                        e.printStackTrace();
                                }                               
                                // Process fields with annotation
                                for(Annotation fieldAnnotation : annotations){
                                    if (annotation instanceof Id){
                                        Id idAnnotation = (Id) fieldAnnotation;
                                        log.info("Field name="+fieldName+" "+ value + " Annotation value: " + idAnnotation.value()); 
                                        doc.put("_id", value);
                                    }                                   
                                }
                        }                               
                }
        } 
```

测试输出：

```
Key=id value=id1
Key=name value=Eli
Key=age value=25
Key=this$0 value=org.goo.AnnotationTest@7f5227 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:00:33.883

该字段`this$0`是对外部类的引用。

如果你想避免这种情况，请制作课程`static`。恕我直言，您应该尽可能将嵌套类设为静态，部分是为了性能，但主要是为了清晰。如果这不是一个选项，您可以显式忽略该字段。

顺便说一句：如果您创建一个名为`this$0`它的字段，它将使用该字段`this$$0`或`this$$$0`或`this$$$$0`等来代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:24:04.163

您可以使用获取类变量并存储在 Map 中。字段[] 字段 = YourClassName.class.getFields();

# ruby-on-rails - 设计不识别路线

> ID：13375663
> 
> 赞同：0
> 
> 时间：2012-11-14T08:56:13.570
> 
> 标签：ruby-on-rails, devise

我正在使用设计进行身份验证，现在，我可以注册一个自动登录的用户。

但是，设计无法识别路径`localhost:3000/users/sign_out`

它给出了一个错误

```
No route matches [GET] "/users/sign_out" 
```

在我的路线中，当我为用户生成设计时，我有 devise_for :users 语句。

我也在我的用户模型中设计了很好的设置，user.rb 如下

```
class User < ActiveRecord::Base
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable
attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

我的 rake 路线显示以下内容

```
destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy 
```

任何人都知道为什么我的 URL 路径没有被识别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:03:22.893

这是因为路由需要 DELETE HTTP 操作而不是 GET 操作。

destroy_user_session**删除**/users/sign_out(.:format) 设计/会话#destroy

通过在浏览器中输入 URL，您将向该 URL 发送 GET 操作。

为了使 devise.rb 中的 sign_out 路由更改接受 GET 操作：

```
config.sign_out_via = :delete

to 

config.sign_out_via = :get 
```

另一种方法是向视图中的链接添加一个`:method => :delete`，这样 DELETE 操作将按照 Devise 的预期发送到您的服务器。

# c - c: 我不明白的东西

> ID：13375673
> 
> 赞同：-1
> 
> 时间：2012-11-14T08:56:56.790
> 
> 标签：c

我有这个代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int i,j;
long int maxc=0,nn;

long int max(long int n)
{
    maxc=0;nn=n;i=1;

    if(n<10 && n>=0) 
        return n;

    while(nn!=0)
    {
        if(maxc<nn%10) 
        { 
            maxc=nn%10;
            j=i;
        }
        i++;
        nn/=10;
    }

    return maxc*(pow(10,i-2))+max(n/(pow(10,j))*(pow(10,j-1))+n%((int)pow(10,j-1)));
}

int main()
{
    long int n;
    printf("Dati n: ");
    scanf("%d",&n);
    printf("%ld",max(n));
    return 0;
} 
```

n= 由用户给出的数字 max= 返回最大数字的函数由 n 的数字组成。EG：对于 n=1234.max 应该返回 4321，对于 n=26341，max 应该返回 64321

问题是有时编译器可以工作，我的意思是对于某些数字，它返回我期望的值，但有时不是。通常返回相同的位数，但将 (a) digit/s 替换为 9 或 4...我无法找到解决此问题的规则。

谢谢 ！我为 ubuntu 使用了代码块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:42:54.413

远离`pow`。*它是一个近似*结果的浮点函数。如果它返回的值稍微太小（比如 2.9999 而不是 3.00000），您的代码会将其截断为最接近的较低值 (2)。

我强烈建议使用整数或字符解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:32:49.673

我不会给你完整的解决方案，但我会给你这个想法。

*   从键盘扫描数字并将它们存储在一个 long int 变量中。
*   将数字转换为数组中的字符。（不要忘记 ASCII 码）。
*   按降序对数组进行排序。
*   打印处理 ASCII 代码的数组（在我的示例中，我存储的值不是字符，这就是我可以将它们打印为 %d 的原因）。

    ```
    /* Prototypes*/
    int stringConverter( char const * a, long int val );
    void decsort( int * const a, int digits);

    int main( void )
    {
        char a[ SIZE ];
        int digits;
        long int val;

        printf( "Enter the number: " );
        scanf( "%ld", &val );

        digits = stringConverter( a, val );
        decsort( a, digits );

            /* Printer */
            for( i = SIZE - digits - 1; i < SIZE; i++){
                printf( "%d", a[ i ] );
            }
            return 0;
    }

    int stringConverter( char * const a, long int val )
    {
        int i, int j = 0;

        for( i = ( SIZE - 1 ); i >= 0; i-- ){
            *( a + i ) = ( val % 10 );
            j++;
            val = val / 10;

            if( val < 10 ){
                i--;
                *( a + i ) = val;
                j++;
                break;
            }
        }
        return j;
    }

    void decsort( char * const a, int digits ){
    /* Any sort */
    } 
    ```

# nhibernate - 更新使用 Fluent NHibernate 映射的组件时避免删除并重新插入

> ID：13375675
> 
> 赞同：4
> 
> 时间：2012-11-14T08:57:02.420
> 
> 标签：nhibernate, fluent-nhibernate

考虑以下场景：用户有一组香料，每个香料可以是“有货”或“用完”（由布尔 RunOut 属性表示）。

我已经使用这样的组件将这种关系映射到 FluentNHibernate

```
public UserMappings()
{
   Id(x => x.Id);
   Map(x => x.FirstName);
   Map(x => x.LastName);
   Map(x => x.Email).Length(255).Unique();
   HasOne(x => x.Credentials).Cascade.SaveUpdate().Fetch.Select();
   HasMany(x => x.Spices)
      .Component(c =>
          {
              c.Map(x => x.RunOut);
              c.References(x => x.BaseSpice).Fetch.Join();
          }).Table("User_Spices").Fetch.Join();

} 
```

上述映射中的“Spices”集合指向 UserSpice 类（一个值对象）：

```
public class UserSpice
{
    public virtual Spice BaseSpice { get; protected set; }
    public virtual bool RunOut { get; protected set; }

    public static UserSpice Create(Spice baseSpice, bool runOut)
    {
        var userSpice = new UserSpice {BaseSpice = baseSpice, RunOut = runOut};
        return userSpice;
    }
} 
```

这“很好” - 但是当我更新任何组件时（例如，将香料更改为 RunOut = true），所有用户的香料都会被删除并重新插入。

我知道发生这种情况是因为 NHibernate 无法唯一标识它应该更新的用户香料引用。

如何以不同的方式对此进行建模以避免这种删除并重新插入行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:25:00.307

NHibernate 有不同类型的集合。他们中的一些人从更复杂的映射（如`<list>`or ）中获利`<idbag>`。请从有关集合类型问题的文档中阅读此部分：

[http://nhibernate.info/doc/nh/en/index.html#performance-collections-mostefficientupdate](http://nhibernate.info/doc/nh/en/index.html#performance-collections-mostefficientupdate)

*短提取物*

> 可以说，索引集合对于多对多关联或值集合具有优于集合的另一个优势。由于 ISet 的结构，NHibernate 不会在元素“更改”时更新一行。对 ISet 的更改始终通过 INSERT 和 DELETE（单个行）进行。再一次，这种考虑不适用于一对多关联。

因此，如果您将使用索引列表（甚至 idbag），NHibernate 可以了解更改了哪个集合项，甚至可以调用 UDPATE

还有另一个问题，您可以在其中找到如何映射索引列表

[Fluent Nhibernate - 映射列表会导致 NullReferenceException？](https://stackoverflow.com/questions/3417427)

*简短的摘要：*

> HasMany(x => x.MyChildren).AsList(x => x.Column("Ordinal")).KeyColumn("AId").Not.KeyNullable();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:12:01.273

在 UserSpice 中实现 Equals/GetHashcode 并使用唯一性业务规则，例如 BaseSpice 相等并添加`.AsSet()`到`HasMany(x => x.Spices)`. Spices 的数据类型必须是`ICollection<>`or `Iesi.Collections.Generic.ISet<>`，需要[额外的努力](http://nhforge.org/blogs/nhibernate/archive/2011/03/15/using-lt-set-gt-in-mappings-without-iesi-collections-net-4.aspx) `System.Collection.Generic.ISet<>`。

# asp.net-mvc-3 - foreach 通过 ICollection 问题

> ID：13375678
> 
> 赞同：0
> 
> 时间：2012-11-14T08:57:16.770
> 
> 标签：asp.net-mvc-3, linq

我看了一下这个，但对于我想要实现的目标来说太复杂了： [how to iterate through an Icollection In MVC3 nhibernate](https://stackoverflow.com/questions/10136094/how-to-iterate-through-an-icollection-in-mvc3-nhibernate)

我的控制器中有：

```
 public ActionResult UserDetails(int id)
{
  var user = ZincService.GetUserForId(id);
  if (user == null || user.Customer.CustomerId != CurrentCustomer.CustomerId)
    return DataNotFound();

  ManageUserViewModel viewModel = new ManageUserViewModel();
  ScormModule scormModule = new ScormModule();

  viewModel.User = user;
  viewModel.IsLockedOut = MembershipService.IsUserLocked(user.Email);
  viewModel.IsActivated = user.DateTimeActivated.HasValue && MembershipService.IsUserApproved(user.Email);
  viewModel.IsArchived = user.IsArchived;
  viewModel.TrainingModulesForUser = user.UserScormModules;
  foreach (int moduleId in user.UserScormModules)
  {
    var name = scormModule.GetScormModuleTitle(moduleId);
    viewModel.TrainingModuleName.Add(name);
  }

  return View(viewModel);
} 
```

然后是 ManageUserViewModel：

```
public class ManageUserViewModel
{
 public Entities.User User { get; set; }
 public bool IsLockedOut { get; set; }
 public bool IsActivated { get; set; }
 public bool IsArchived { get; set; }\
 public ICollection<Entities.Scorm.UserScormModule> TrainingModulesForUser { get; set; }
 public List<string> TrainingModuleName { get; set; }
} 
```

和实体.用户：

```
private ICollection<Entities.Scorm.UserScormModule> _userScormModules;
public virtual ICollection<Entities.Scorm.UserScormModule> UserScormModules
{
  get
  {
    if (_userScormModules == null)
      _userScormModules = new List<Entities.Scorm.UserScormModule>();
    return _userScormModules;
  }
  set
  {
    _userScormModules = value;
  }
} 
```

和 Entities.Scorm.UserScormModule：

```
 public class UserScormModule
 {
   public virtual int UserScormModuleId { get; set; }
   public virtual int Users_UserId { get; set; }
   public virtual int TrainingModuleArtifactScormModules_TrainingModuleArtifactId { get; set; }
   public virtual TrainingModuleArtifactScormModule TrainingModuleArtifactScormModule { get; set; }
   public virtual User User { get; set; }
 } 
```

我怎样才能通过 foreach 来`(int moduleId in user.UserScormModules)`获取`name`模块的而不是`id`. 我想将名称传递给我的视图

```
var name = scormModule.GetScormModuleTitle(moduleId);
viewModel.TrainingModuleName.Add(name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:34:42.557

我想我明白了，我将代码更改为：

```
foreach (var row in user.UserScormModules)
{ 
   int moduleId = row.UserScormModuleId;
   var name = scormModule.GetScormModuleTitle(moduleId);    
   viewModel.TrainingModuleName.Add(name); 
 } 
```

# mysql - 数百万人的高效私人消息传递解决方案？

> ID：13375680
> 
> 赞同：1
> 
> 时间：2012-11-14T08:57:24.097
> 
> 标签：mysql, cassandra, messaging, pusher

我有一个应用程序，包括网络和移动应用程序，它需要一个高效的私人消息系统，最终可能会有数百万用户。所有浮现在脑海中的是每个人都在某个时间或另一个地方使用的留言板的 PM 系统以及 Jabber/XMPP 即时消息协议。

理想情况下，它在最终用户布局方面类似于 Facebook 的聊天系统（来自特定朋友的所有消息都放在同一页面上），但这几乎只是调整 UI 的问题。

最令人生畏的是这个 PM 系统需要为潜在的数百万用户工作的想法。有这么多用户，我应该尝试实现什么？

目前正在检查 Pusher，但我担心成本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:48:07.010

你可以从 PlayOrm 和 Cassandra 和 playframework 开始，只需要一个非常简单的表格。如果您使用 playframework，它可以很容易地为长轮询执行 websockets，并且 playframework 可以在几个线程上执行 1000 个套接字。为数百万用户设计似乎与为数千用户设计一样容易，所以虽然我同意为 1000 用户设计，因为成功可以帮助您雇用更多人并将解决方案更改为可扩展的解决方案，但并不难这些天来设计一个可扩展的解决方案。

我认为您真正需要解决的唯一另一件事是，当一个请求进入一个播放服务器时，您需要将消息发送到所有其他服务器，因为您不知道哪个服务器有 websocket 监听事件。 ..那里有一些图书馆可以帮助解决这个问题。

所以

1.  将项目存储在用户消息队列中
2.  向所有其他网络服务器发送消息有用户 X、Y、Z 的消息（在一条消息中分组大量传入以减少负载）
3.  为用户 X、Y、Z 提供 websocket 的服务器可以轻松地立即使用刚收到的消息响应各自的用户。

这是一个有趣的问题。

院长

# c# - 在 DB first 方法中为 Entity Framework 5 中的所有实体创建基类

> ID：13375682
> 
> 赞同：4
> 
> 时间：2012-11-14T08:57:33.137
> 
> 标签：c#, entity-framework

我在每个表上都有几个属性，如 CreatedDate、ModifiedDate、VersionNo。每次修改实体时，我都需要更改/添加这些属性的值。我想我可以用这些属性创建一个基类，让实体从这个基类派生，在基于 ObjectState 的 SavingChanges 期间我可以更改值和保存，这样我的审计条目将与实体隔离，事情将是抽象的。但是由于我是 Entity Framework 的新手，我发现很难理解我将如何处理映射等。

如果有人可以提出实现这一点的想法，那将非常有帮助。存储库代码如下：

```
public class GeneralRepository<T> : IRepository<T> where T : class
{
    private ObjectSet<T> _set;
    private ObjectContext _context;

    public GeneralRepository(ObjectContext context)
    {
        if (context == null) throw new ArgumentNullException("context");
        _context = context;                 // sets the context
        _set = context.CreateObjectSet<T>(); // returns the Object Set
    }

    #region Methods to override to work with ObjectGraphs .

    /// <summary>
    /// To insert data from entity into a table.
    /// </summary>
    /// <param name="entity"></param>
    public virtual void Insert(T entity)
    {
        if (entity == null) throw new ArgumentNullException("entity");
        _set.AddObject(entity);
    }

    /// <summary>
    /// To delete entity from a table. 
    /// </summary>
    /// <param name="entity"></param>
    public virtual void Delete(T entity)
    {
        if (entity == null) throw new ArgumentNullException("entity");
        _set.Attach(entity);
        _set.DeleteObject(entity);
    }

    /// <summary>
    /// To update Entity into the table
    /// </summary>
    /// <param name="entity"></param>
    public virtual void Update(T entity)
    {
        if (entity == null) throw new ArgumentNullException("entity");
        _set.Attach(entity);
        _context.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);
    }

    /// <summary>
    /// To get th entire table contents
    /// </summary>
    /// <returns></returns>
    public IQueryable<T> GetAll()
    {
        return _set;
    } 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-04T01:42:18.780

如果你先做数据库，你总是可以编辑 T4 模板来做你想做的事。在您的解决方案资源管理器中，展开 MyEntities.edmx 文件并找到 MyEntities.tt 文件并将其打开。

在第 307 行，您应该有以下方法：

```
public string EntityClassOpening(EntityType entity)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1}partial class {2}{3}",
        Accessibility.ForType(entity),
        _code.SpaceAfter(_code.AbstractOption(entity)),
        _code.Escape(entity),
        _code.StringBefore(" : ", _typeMapper.GetTypeName(entity.BaseType)));
} 
```

您需要将其更改为：

```
public string EntityClassOpening(EntityType entity)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1}partial class {2}{3}",
        Accessibility.ForType(entity),
        _code.SpaceAfter(_code.AbstractOption(entity)),
        _code.Escape(entity),
        _code.StringBefore(" : ", _typeMapper.GetTypeName(entity.BaseType) ?? "MyBaseClass"));
} 
```

您可以看到，如果没有提供 BaseType（您可以在 GUI 中这样做，但这是为了让单个实体从另一个实体继承），那么我们希望实体从 MyBaseClass 继承。

现在，当您保存它时，它将重新生成您的所有实体，它们现在将从 MyBaseClass 继承。就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:10:11.127

我认为您是正确的，创建一个名为“EntityBase”的基类或任何适合您偏好的名称并添加这些属性。

然后我会将上面的存储库类声明代码更改为：

```
public class GeneralRepository<T> : IRepository<T> where T : EntityBase 
```

然后，您将能够根据需要在存储库中设置公共属性。

就映射而言，我肯定会看看 Entity Framework 5 Power Tools，因为您提到您首先是数据库，但是我的经验一直是使用流式 API 进行映射。

另外...一定要看看 DBContext 将为您提供的一些好处，而不是您当前在存储库中使用的 ObjectContext。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T01:50:59.540

创建一个像 BaseEntity 这样的基类，并在该类中包含您想要的属性。从 BaseEntity 派生您的实体并像这样定义您的存储库：

```
public class GeneralRepository<T> : IRepository<T> where T : BaseEntity 
```

对于映射，有 3 种变体：每个层次结构的表、每个类型的表和每个具体类型的表。您可以在 Msdn 中找到有关它们的信息。

如果您有大部分不相关的实体，我会使用每个具体类型的表，并通过调用`ToTable("Apples")`您的`EntityTypeConfiguration`类（Fluent API）为每个实体创建单独的表。

# wordpress - WORDPRESS：尝试按照教程中的步骤操作，但弹出致命错误警告

> ID：13375684
> 
> 赞同：0
> 
> 时间：2012-11-14T08:57:51.490
> 
> 标签：wordpress, function, plugins, fatal-error, meta-boxes

## ==问题已解决==

我正在尝试按照本教程中的步骤//

[http://tatiyants.com/how-to-use-wordpress-custom-post-types-to-add-events-to-your-site/](http://tatiyants.com/how-to-use-wordpress-custom-post-types-to-add-events-to-your-site/)

但我遇到了`Fatal Error`第 2 步之后的情况。

`Fatal error: Call to undefined function format_date() in /functions.php on line 134`

**错误线//**
`echo format_date($custom["event_date"][0]) . '<br /><em>' .`

**Functions.php//** [http://pastebin.com/FvqvE187中当前的内容](http://pastebin.com/FvqvE187)

究竟是什么问题？＆我怎样才能解决这个问题？

# 编辑//

添加 `function format_date($unixtime) { return date("F", $unixtime)." ".date("d", $unixtime).", ".date("Y", $unixtime); }` 到我的functions.php 以解决`Fatal Error`发生的另一个问题。

在错误之前，在帖子编辑屏幕中有一个`Event Detail`Metabox。但是在此更改之后，该框不再存在。它允许我添加位置和时间等。现在我无法添加这些额外的信息。很明显是新代码导致了这种情况，但为什么呢？

# 编辑2//

我第一次编辑的答案是简单地添加其余代码（输入框等）添加其余代码后，此错误会在元框中弹出`Event Detail`。

`Fatal error: Call to undefined function format_date() in /functions.php on line 172`

这是行`172`//

```
$ret = '<p><label>Date: </label><input type="text" name="event_date" value="' . format_date(get_event_field("event_date")) . '" /><em>(mm/dd/yyy)</em>'; 
```

# 编辑3//

我所要做的就是`format_date`从行中删除`172`，并在最后删除一个括号。这样做会再次启用事件详细信息:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:46:37.347

第一个答案`Fatal Error`//

`Fatal error: Call to undefined function format_date() in /functions.php on line 134`

添加

`function format_date($unixtime) { return date("F", $unixtime)." ".date("d", $unixtime).", ".date("Y", $unixtime); }`

在这段代码的顶部//

```
function events_custom_columns($column){
global $post;
$custom = get_post_custom();

switch ($column) {
case "event_date":
        echo format_date($custom["event_date"][0]) . '<br /><em>' .
        $custom["event_start_time"][0] . ' - ' .
        $custom["event_end_time"][0] . '</em>';
        break;

case "event_location":
        echo $custom["event_location"][0];
        break;

case "event_city":
        echo $custom["event_city"][0];
        break;
}
} 
```

**NOTE://**出于某种原因，我不确定将代码添加到底部对我不起作用。

**下一个编辑//** 回答这个`Fatal Error`//

`Fatal error: Call to undefined function format_date() in /functions.php on line 172`

在这条线上//

`$ret = '<p><label>Date: </label><input type="text" name="event_date" value="' . format_date(get_event_field("event_date")) . '" /><em>(mm/dd/yyy)</em>';`

只需`format_date`从`(event_date"))`.

现在活动详细信息可用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T05:07:26.420

function format_date($unixtime) { } is already define above check this function

# ios - 以编程方式检测正在使用的开发或生产推送通知证书

> ID：13375685
> 
> 赞同：3
> 
> 时间：2012-11-14T08:57:55.257
> 
> 标签：ios, push-notification, apple-push-notifications

我正在尝试实现推送通知服务器。

到目前为止，我已经准备好推送服务器代码和推送反馈服务代码。

我在 Stackoverflow 的其他帖子中读到的关于推送通知的一件事是，我们不应该在生产证书环境中使用开发证书签名的推送令牌，否则 Apple 的推送服务器将断开我们的推送通知服务器并阻止进一步的推送通知通过。

我的问题是，是否可以使用 Objective C 来检测应用程序在启动时签署的证书？

在我的服务器上，我有一个 Token 实体，其中一个属性是“环境”（开发或生产）。

目前，我假设所有提交的令牌都是“开发”令牌。

如果我能够在应用启动期间找出应用签署的证书（开发或产品），那么我可以相应地设置实体的环境属性。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:06:01.217

我为此使用了一个预定义的宏。在使用沙盒环境的调试构建中，我在构建设置中定义 SANDBOX_ENVIRONMENT。

这样我就可以在服务器调用中添加一个参数，其中令牌在服务器上注册。

# forms - Extjs 4 行编辑自定义验证

> ID：13375686
> 
> 赞同：1
> 
> 时间：2012-11-14T08:57:57.590
> 
> 标签：forms, extjs, grid

在网格上使用插件 RowEditing 如何在取消验证时在“validateedit”上显示自定义错误消息？

```
validateedit :  function(editor, e) {

     if (condition) {
    e.cancel = true;
    // how to add an error message to a field 
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T13:46:43.573

您可以使用内置的模型验证，并将整个 Errors 集合发送到`form.markInvalid()`. 这样您就不需要单独处理每个字段。

```
validateedit: function(editor, e, eOpts){
    var newModel = e.record.copy(); //copy the old model
    newModel.set(e.newValues); //set the values from the editing plugin form

    var errors = newModel.validate(); //validate the new data
    if(!errors.isValid()){
      editor.editor.form.markInvalid(errors); //the double "editor" is correct
      return false; //prevent the editing plugin from closing
    }
} 
```

[参考](http://extjs-tutorials.blogspot.com/2012/06/rowediting-plugin-validateedit-event.html)

确保使用`return false`而不是`e.cancel = true`. `e.cancel = true`将导致在仍然打开的行编辑器上的后续编辑也失败。然后，您必须单击取消按钮并重新编辑该行才能继续编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:45:10.047

只需使用与表单和字段关联的选择器和方法

`editor.editor.getForm().findField('fieldName').markInvalid('Message here');`

# c# - DirectShow：如何更改过滤器属性？

> ID：13375690
> 
> 赞同：2
> 
> 时间：2012-11-14T08:58:08.373
> 
> 标签：c#, .net, properties, directshow, directshow.net

我正在开发一个帮助用户配置他们的电视调谐器卡的应用程序。基本上，用户选择一个设备，应用程序生成一个[图形文件 (.GRF)](http://msdn.microsoft.com/en-us/library/aa451348.aspx)作为输出。但是，用户应该能够更改一些设置。这些设置包括视频标准（PAL、NTSC、SECAM）、视频输入（Tuner、Composite、SVideo）等。

在 GraphEdit 中，这可以通过右键单击所需的过滤器来完成，然后选择“过滤器属性...”。但是，我不知道如何在代码中实现相同的目标。

**问题 1**：如何在代码中更改 DirectShow 过滤器的属性？

因为我使用[ICaptureGraphBuilder2::RenderStream](http://msdn.microsoft.com/en-us/library/aa930715.aspx)来构建我的图表，所以我只持有对源过滤器和渲染器的引用。我希望能够更改的大多数属性都可以在其他过滤器上找到，例如交叉条过滤器，它是由 RenderStream 方法自动添加的。

**问题 2**：如何获取对图表中其他过滤器的引用，以便更改它们的属性？

*注意：我不会使用[FindFilterByName](http://msdn.microsoft.com/en-us/library/ee496718.aspx)，因为我的应用程序应该与大多数电视调谐器卡一起使用，并且每张卡都具有不同的名称。*

**编辑**：我找到了一种通过枚举[EnumFilters](http://msdn.microsoft.com/en-us/library/aa924010.aspx)来获取对这些过滤器的引用的方法。然后我在每个过滤器上使用[QueryFilterInfo](http://msdn.microsoft.com/en-us/library/aa920715.aspx)来查找它的名称。这与使用 FindFilterByName 不同，因为我现在可以使用[Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)来查找某些单词（例如“Crossbar”）。但是，我已经有一个名为 crossbar 过滤器的示例（“... Xbar”），因此我仍在寻找一种更通用的方法来执行此操作。我希望我能按[类别](http://msdn.microsoft.com/en-us/library/microsoft.office.server.search.webcontrols.filtercategory_members.aspx)找到过滤器...

顺便说一句，我目前正在使用[DirectShow.Net 库](http://directshownet.sourceforge.net/)，但我相信该方法应该与 C++ 库相同。但是，我并不完全理解 C++ 语法，因此**如果**您打算发布（参考）代码示例，那么如果它是在 C# 或 VB.NET 中将有很大帮助。

**解决方案**：查看接受的答案评论。我需要将过滤器的哪些属性需要更改为它们各自的接口。例如，crossbar 过滤器需要强制转换为[IAMCrossbar 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389171(v=vs.85).aspx)。有了这个界面，我现在可以更改所有与交叉开关相关的属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:54:51.640

2 -`EnumFilters`是正确的方法。您不应该信任名称，因为它们只是为了对开发人员友好，以便能够轻松地区分图中的过滤器，但不能保证它们是全局持久性和一致的。这同样适用于引脚名称。

1 - 在本机 API 中，您创建带有[`OleCreatePropertyFrame`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678437%28v=vs.85%29.aspx)功能的属性页的 UI。另请参阅[显示过滤器的属性页](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375480%28v=vs.85%29.aspx)。

我不认为 DirectShow.NET 有一个包装器，所以你需要像这样通过 P/Invoke 调用这个 API：[C# : How to use directshow.net to show this dialog?](https://stackoverflow.com/questions/4754971/c-sharp-how-to-use-directshow-net-to-show-this-dialog)

设置是特定于过滤器的，通常通过私有接口公开，因此没有统一的访问权限。尽管如此，如果过滤器支持从流中加载/保存到流中，您可以以统一的方式一次保存/恢复设置。GraphEdit 使用 .GRF 文件保存/加载的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:36:03.023

2 - 您是否尝试过查看过滤器 IMoniker 提供的设备名称？我个人发现它对于将过滤器列入黑名单非常有用，而且您似乎可以通过其 IMoniker::DeviceName 了解设备类型。我不确定它是否足以满足您的需求，但这可能是一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T13:22:33.913

对于问题一，要“查找”自动插入的横杆过滤器，请使用 ICaptureGraphBuilder2::FindInterface 然后您可以显示其本机属性页面“gui popup”（请参阅​​ Roman 的答案）并允许用户使用它来控制它，或者使用普通crossbar 枚举/选择 API 以编程方式进行。

# php - 带有 stdClass 对象的 PHP foreach 数组

> ID：13375691
> 
> 赞同：3
> 
> 时间：2012-11-14T08:58:09.303
> 
> 标签：php, arrays, object, multidimensional-array, foursquare

我需要帮助尝试获取数组和 stdClass 对象中的值。

仅供参考：我正在使用foursquare API ...

我有这样的事情：

```
`$fsq_groups = $venues->response->groups;`

    echo "<pre>";
    print_r($fsq_groups);
    echo "</pre>"; 
```

从`print_r($fsq_groups);`

```
Array
(
    [0] => stdClass Object
        (
            [type] => Recommended Places
            [name] => recommended
            [items] => Array
                (
                    [0] => stdClass Object
                        (
                            [reasons] => stdClass Object
                                (
                                    [count] => 2
                                    [items] => Array
                                        (
                                            [0] => stdClass Object
                                                (
                                                    [type] => general
                                                    [message] => Lots of people have mentioned "burgers" here
                                                )

                                            [1] => stdClass Object
                                                (
                                                    [type] => general
                                                    [message] => This spot is popular on Foursquare
                                                )

                                        )

                                )

                            [venue] => stdClass Object
                                (
                                    [id] => 4afe5a4bf964a520372f22e3
                                    [name] => Stout Burgers & Beer
                                    [contact] => stdClass Object
... 
```

我怎么去`name`下面`venue`

我尝试了这样的事情，但没有奏效：

```
foreach($fsq_groups as $groups)
{
    foreach($groups->items->venue as $venue)
    {

            echo $venue->name;
                echo "<pre>";
                print_r($venue);
                echo "</pre>";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:59:27.077

```
$fsq_groups = $venues->response->groups;
if(isset($fsq_groups[0])){
    $groups = $fsq_groups[0];
    foreach($groups->items as $key => $place){
        $venue = $place->venue;
        echo $venue->name;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T09:01:38.703

```
foreach($fsq_groups as $groups)
{
    foreach($groups->items as $item)
    {

            echo $item->venue->name;
                echo "<pre>";
                print_r($item);
                echo "</pre>";
    }
} 
```

试试看.. 物品是数组，所以你不能使用“items->venue”去场地

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:02:42.507

请试试这个，

```
foreach($fsq_groups as $key=>$groups)
{
    foreach($key->$groups as $venue)
    {

            echo $venue->name;
                echo "<pre>";
                print_r($venue);
                echo "</pre>";
    }
} 
```

# tomcat - 无法在 tomcat 中取消部署和部署 Web 应用程序

> ID：13375694
> 
> 赞同：0
> 
> 时间：2012-11-14T08:58:31.793
> 
> 标签：tomcat

当我停止并取消部署旧版本并尝试使用 tomcat 管理器部署新版本时，消息显示正常，但应用程序未显示在应用程序列表中。然后我删除了webapps和work目录中的war文件和目录，再次部署，还是这样。我用谷歌搜索，但找不到有用的答案。所以我现在只能部署不同名称的war文件。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T07:25:37.043

在取消部署之前停止应用程序。它帮助了我。

# unix - 是否有允许递增持久数字的 unix/gnutool？

> ID：13375695
> 
> 赞同：1
> 
> 时间：2012-11-14T08:58:33.570
> 
> 标签：unix, persistence, increment

在我找到我的编辑器并自己编写一个小工具之前：

是否有一个简单的 unix/gnutool 可以持续增加数字。类似于以下内容：

```
 $ increment 
  #=> 1
  $ increment
  #=> 2
  $ exit
  $ increment
  #=> 4 
```

它可以将数字存储在磁盘（~/.increment）或其他任何地方。“命名”数字的奖励积分，例如`$ increment --name=foo`; 每个名称都有增量器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:09:41.220

```
#!/bin/bash

readonly myfile=${0%.sh}.store

[[ ! -s $myfile ]] echo '0' >> $myfile

read myid < $myfile
((++myid))

echo $myid
echo $myid > $myfile 
```

# javascript - jQuery中的“空或不是对象”错误

> ID：13375696
> 
> 赞同：0
> 
> 时间：2012-11-14T08:58:37.410
> 
> 标签：javascript, jquery, internet-explorer-8

我的网站适用于除 IE8 之外的所有浏览器。第四行代码中的以下代码错误`position().left`为 null 或不是对象。有没有人看到修复了这种类型的 IE8 jQuery 错误？

```
$(".navref").click(function(){
    var m = Math.floor(($(window).width()-997)/2);
    m = m < 0 ? 0 : m;  //if screen is smaller than 997, force align to left
    var l = $("#"+$(this).attr('rel')).position().left;
    var lt = 200;
    if($(this).attr('rel') == 'page1') lt = 400;
    l = l+(lt-m);
    l = l < 0 ? 0 : l;

    //,onAfter:function(){checkScreens()}
    $('html, body').stop(true,false).scrollTo(l,2000,{easing:'easeInOutCubic'});

    return false;
 }); 
```

该网站是[http://sputtens.com](http://sputtens.com)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:01:38.693

这告诉您`$("#"+$(this).attr('rel'))`不匹配任何元素，因此`position()`返回`null`. 如果你找出原因，它应该解决它。

只需将代码更改为：

```
var id = $(this).attr('rel');
var element = $("#"+id);
var l = element.position().left; 
```

...并使用 F12 调试工具进行检查，查看`id`DOM 并将其与您在 DOM 中的内容进行比较，查看具有该 ID 的元素的查询结果等。

# android - ExpandableListView 总是折叠的

> ID：13375702
> 
> 赞同：6
> 
> 时间：2012-11-14T08:59:16.040
> 
> 标签：android, android-layout, android-listview, expandablelistview

我正在尝试使用 ExpandableListView 构建基本的 android 应用程序。将数据放入视图后，我只看到组，如果我单击组，它们不会展开。

这是我的代码，有人可以帮忙吗？

适配器

```
 public class PhraseAdapter extends BaseExpandableListAdapter {

        private LayoutInflater inflater;

        private List data;

        public PhraseAdapter(Context context) {
            inflater = LayoutInflater.from(context);

        }

        public void setData(List data) {
            this.data = data;
        }

        public View inflate(int viewId) {
            View view = inflater.inflate(viewId, null);
            return view;
        }

        public void updateView(List categories) {
            setData(categories);
            notifyDataSetChanged();
        }

        static class ViewHolder {
            TextView name;
        }

        static class ViewChildHolder {
            TextView phonetix;
            TextView orginal;
        }

        @Override
        public Object getChild(int groupPosition, int childPosition) {
            return data.get(groupPosition);
        }

        @Override
        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        @Override
        public View getChildView(int groupPosition, int childPosition,
                boolean isLastChild, View convertView, ViewGroup parent) {
            final ViewChildHolder holder;
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.phrases__extra_item, null);
                holder = new ViewChildHolder();
                holder.phonetix = (TextView) convertView
                        .findViewById(R.id.phrases_phonetix);
                holder.orginal = (TextView) convertView
                        .findViewById(R.id.phrases_original);

                convertView.setTag(holder);
                convertView.setClickable(true);

            } else {
                holder = (ViewChildHolder) convertView.getTag();
            }

            holder.phonetix.setText(data.get(groupPosition).getPhonetix());
            holder.orginal.setText(data.get(groupPosition).getOriginal());
            convertView.setFocusableInTouchMode(true);
            return convertView;
        }

        @Override
        public int getChildrenCount(int groupPosition) {
            return 1;
        }

        @Override
        public Object getGroup(int groupPosition) {
            return data.get(groupPosition);
        }

        @Override
        public int getGroupCount() {
            return data.size();
        }

        @Override
        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        @Override
        public View getGroupView(int groupPosition, boolean isExpanded,
                View convertView, ViewGroup parent) {
            final ViewHolder holder;

            if (convertView == null) {
                convertView = inflater.inflate(R.layout.phrases_item, null);
                holder = new ViewHolder();
                holder.name = (TextView) convertView
                        .findViewById(R.id.phrases_text);
                convertView.setTag(holder);
                convertView.setClickable(true);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            holder.name.setText(data.get(groupPosition).getName());
            return convertView;

        }

        @Override
        public boolean hasStableIds() {
            return true;
        }

        @Override
        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }
    } 
```

短语活动

```
 public class PhrasesActivity extends Activity {
        private PhraseAdapter phraseAdapter;
        private PhraseDao dao;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.phrases);
            dao = new PhraseDao();

            final ExpandableListView mainListView = (ExpandableListView) findViewById(R.id.phrases_list);
            phraseAdapter = new PhraseAdapter(this);
            phraseAdapter.setData(dao.getPhrasesByCategoryId(1));
            mainListView.setAdapter(phraseAdapter);

        }
    } 
```

和简单的 xml 布局

短语.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ExpandableListView
    android:id="@+id/phrases_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:groupIndicator="@null"
    android:clickable="true" />

</LinearLayout> 
```

短语_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:clickable="true"
android:gravity="center_vertical|left"
android:orientation="vertical"
android:paddingBottom="0dip"
android:paddingLeft="20dip"
android:paddingRight="20dip"
android:paddingTop="0dip" >

<TextView
    android:id="@+id/phrases_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="0dip"
    android:paddingLeft="0dip"
    android:paddingRight="0dip"
    android:paddingTop="0dip" >
</TextView>

</LinearLayout> 
```

短语__extra_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:clickable="true"
android:gravity="center_vertical|left"
android:orientation="vertical"
android:paddingBottom="0dip"
android:paddingLeft="20dip"
android:paddingRight="20dip"
android:paddingTop="0dip" >

<TextView
    android:id="@+id/phrases_phonetix"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="0dip"
    android:paddingLeft="0dip"
    android:paddingRight="0dip"
    android:paddingTop="0dip" >
</TextView>

<TextView
    android:id="@+id/phrases_original"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingBottom="0dip"
    android:paddingLeft="0dip"
    android:paddingRight="0dip"
    android:paddingTop="0dip" >
</TextView>

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-07T08:48:08.937

嗨，我认为下面的代码可以帮助你。这可以防止折叠列表视图。

```
 int count = exadapter.getGroupCount();

    for (int i = 0; i < count; i++)
    {
        expListView.expandGroup(i);
    } 
```

在您的可扩展列表视图中使用上面的代码。它可以解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:26:44.173

```
public int getChildrenCount(int groupPosition) {
 return 1;
 } 
```

这将返回 1 作为孩子。那可能是个问题。而不是返回子元素的数量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-07T09:04:50.647

要默认展开所有组，请添加以下行。

```
((ExpandableListView) parent).expandGroup(groupPosition); 
```

到你的`getGroupView()`方法。

这必须在 if 子句中完成，`if (convertView == null)`否则您将无法折叠视图。

```
 @Override
    public View getGroupView(int groupPosition, boolean isExpanded,View convertView, ViewGroup parent) 
    {
        final ViewHolder holder;

        if (convertView == null) 
        {
            ((ExpandableListView) parent).expandGroup(groupPosition);

            convertView = inflater.inflate(R.layout.phrases_item, null);
            holder = new ViewHolder();
            holder.name = (TextView) convertView.findViewById(R.id.phrases_text);
            convertView.setTag(holder);
            convertView.setClickable(true);
        } 
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.name.setText(data.get(groupPosition).getName());
        return convertView;
    } 
```

# iphone - 获取组列表用户 Yammer Rest Services

> ID：13375704
> 
> 赞同：4
> 
> 时间：2012-11-14T08:59:31.443
> 
> 标签：iphone, objective-c, ios, json, yammer

是否有 REST 服务来获取特定用户的加入组列表？我通过使用服务[https://www.yammer.com/api/v1/groups.json](https://www.yammer.com/api/v1/groups.json)（未记录 yammer API 参考）来获取当前网络中的所有组。但我的要求是用户已经加入的组。给予的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:00:52.360

尝试使用值为“1”的查询字符串“mine”：[https ://www.yammer.com/api/v1/groups.json?mine=1](https://www.yammer.com/api/v1/groups.json?mine=1)

# bash - bash 通过电子邮件发送错误

> ID：13375711
> 
> 赞同：3
> 
> 时间：2012-11-14T09:00:06.523
> 
> 标签：bash, error-handling, bash-trap

我写了一些 bash 脚本来做一些备份工作。我使用 errexit 和 pipefail 运行脚本，所以我不会错过任何错误。我现在想要的是脚本在发生错误时向我发送电子邮件。我得到了这个工作。但我希望将脚本错误包含在电子邮件正文中。我怎样才能做到这一点？

这是脚本：

```
#!/bin/bash
# exit script if an error occures
set -o errexit
# even exit if an error in passed through a pipe
set -o pipefail

trap 'ERRORMESSAGE_HERE | mailx -s "Something went wrong on srv-002" mymail@mycompany.ch' ERR

# the backup job here

# if script reaches this point everything went perfectly good
echo "all good!" 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:26:22.263

怎么样（未经测试）：

```
{
    # do the work here
} 2> >(mailx -s "job errors" recipient@example.com) 
```

# sql-server - 使用 TADStoredProcedure 执行存储函数失败

> ID：13375712
> 
> 赞同：0
> 
> 时间：2012-11-14T09:00:11.687
> 
> 标签：sql-server, delphi, sql-server-2008-r2, delphi-xe2

我在 SQL Server 2008 R2 中有一个非常简单的函数，我使用`TADStoredProcedure`.

函数定义如下：

```
CREATE FUNCTION [dbo].[GetNextAvailableNo] 
(
    @APrefix nvarchar(10)
)
RETURNS int
AS
BEGIN
    DECLARE @Result int
    SELECT @Result = MAX([No])+1 FROM [Table1] WHERE [Prefix] = @APrefix
    RETURN @Result    
END 
```

我面临一个奇怪的问题。第一次尝试调用此函数时，出现此错误：

> 异常类：EOleException
> 异常消息：第 1 行：无效的过程号 (0)。必须介于 1 和 32767 之间。

第一次是指 SQL 服务启动后的第一次。之后，一切正常。起初我认为这是我的 SQL Server 2008 R2 安装的问题，但我在每个可用的安装中都看到了这个问题。

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:37:41.207

在选择语句中使用该函数。

喜欢

```
<TAdoQuery>.Sql.Add('SELECT dbo.GetNextAvailablePatNo('+QuotedStr('XX')+')'); 
```

为了优化服务器：

```
const
  cNextAvailablePatNoScript='SELECT dbo.GetNextAvailablePatNo(:Param)';

...
<TAdoQuery>.Sql.Text:= cNextAvailablePatNoScript;
<TAdoQuery>.Parameters.ParamByName('Param').Value:= 'XX';
<TAdoQuery>.Open; 
... 
```

# c++ - 如何知道 const 数组的大小？

> ID：13375713
> 
> 赞同：17
> 
> 时间：2012-11-14T09:00:19.217
> 
> 标签：c++, c, arrays, sizeof

给出以下代码：

```
const myStr codesArr[] =  {"AA","BB", "CC"}; 
```

myStr 是一个包装类`char*`。我需要遍历数组中的所有项目，但我不知道项目的数量。我不想定义一个`const`代表大小的值（在本例中为 3）

使用类似的东西是否安全：

```
const int size = sizeof(codesArr) / sizeof(myStr); 
```

该怎么办？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-14T09:08:03.940

执行此操作的安全且清晰的方法是使用[`std::extent`](http://en.cppreference.com/w/cpp/types/extent)（C++11 起）：

```
const size_t size = std::extent<decltype(codesArr)>::value; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-14T09:01:33.040

`int size = sizeof(codesArr) / sizeof(myStr);`只要不将它作为参数传递给函数，就可以使用，因为这样数组将衰减为指针并丢失大小信息。

您还可以使用模板技巧：

```
template<typename T, int sz>
int size(T(&)[sz])
{
    return sz;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:19:24.860

[此链接](http://blogs.msdn.com/b/the1/archive/2004/05/07/128242.aspx)给出了获取数组大小的最佳方法（pre c++11）。这是一个**复杂的模板技巧**，但与上面链接中讨论的其他方法相比具有许多优点。方法是使用下面的宏+函数：

```
template <typename T, size_t N>
char ( &_ArraySizeHelper( T (&array)[N] ))[N];

#define countof( array ) (sizeof( _ArraySizeHelper( array ) )) 
```

除其他外，它的优点是它纯粹是一个**编译时操作**，比在运行时执行它要好，并且**在 c++11 的 constexpr 之前**，它是唯一允许您将操作结果**用作的方法另一个数组的大小**（因为它是一个**编译时间常数**

# php - 使正则表达式中的运算符 OR 变得贪婪

> ID：13375717
> 
> 赞同：0
> 
> 时间：2012-11-14T09:00:34.633
> 
> 标签：php, regex, preg-match

我必须在`asd["]"]`里面匹配`asd["]"] asd`

我使用正则表达式：

```
/([a-z]+?(\[[^,\]]*?\]|\[\".*\"\]))/u 
```

但它给了我`asd["]`

如果我在正则表达式中更改 OR 元素的顺序：

```
/([a-z]+?(\[\".*\"\]|\[[^,\]]*?\]))/u 
```

我可以得到想要的结果，但我相信这样一些其他情况是行不通的。这是我的正则表达式的缩小版本。

我怎么能指向正则表达式来选择最长的匹配（贪婪）？

编辑：

使用正则表达式：

```
/{((\"a\")|([^b]*)})/u 
```

我明白了

```
{c {"a"} 
```

从

```
{b{c {"a"} b} 
```

在这种情况下，正则表达式选择了比第一个更长的第二个 OR 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:06:44.413

出于某种原因，在您的两个替代方案中，您使一个不需要它的不贪心，而留下一个实际上需要不贪心的贪心。要使用正则表达式解决您的问题（尽管它会有一些警告），您可能应该在任何情况下使用否定字符类：

```
'/([a-z]+?)\[([^"\[\]]*|"[^"]*")\]/' 
```

对于您给定的示例，这应该可以正常工作。它会找到最里面的`asd[something here]`or `asd["something with [][] here"]`。

我说的是注意事项。对于未引用的情况，这找不到嵌套的事件。`asd[b efg[something]]`它将匹配而`efg[something]`不是外部括号。**但是**，即使可以，您也会失去内部匹配，因为*匹配不能重叠*。如果您希望找到最外面的有效括号（因此只有给定示例中的完整字符串），您应该查看 PCRE 的[递归功能](http://www.php.net/manual/en/regexp.reference.recursive.php)。请注意，您必须决定最内层或最外层。也`preg_match`不会`preg_match_all`找到你所有的嵌套匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T23:05:40.677

这个正则表达式似乎对我有用：

```
/([a-z]+(\[[^,]*\]|\[\".*\"\]))/ 
```

在其中，我只是删除了原始正则表达式 [^,\]] 部分中的 \]，并删除了所有非贪婪通配符，尽管它们似乎无论如何都没有效果。
如果您正在寻找嵌套结构，则寻找“*非关闭符号*”永远不会找到您最长的匹配项，因为它总是会在第一个（最里面的）关闭字符处停止，因此您必须选择外壳内唯一的其他东西.

# jquery - jQuery 一次连续旋转多个元素

> ID：13375718
> 
> 赞同：0
> 
> 时间：2012-11-14T09:00:38.963
> 
> 标签：jquery, continuous

我有这段代码，一次淡入和淡出一个 div 效果很好。我需要一次淡出两个 div，并用接下来的两个替换它们。

```
$(function() {
    // Set first div to show
    $('.testimonials div:first').show();

    // Begin the loop, fade out, find next div, fade that div in, end the process and append back to main div.
    setInterval(function() {
        $('.testimonials div:first-child').fadeOut().next('div').fadeIn().end().appendTo('.testimonials');
    }, 5000);
)}; 
```

我试图改进脚本：

淡入淡出工作 - 它淡出前两个，并淡出接下来的两个。但它永远不会循环！

```
$(function() {
    // Set first div to show
    $('.testimonials .quote:lt(2)').show();

    // Begin the loop, fade out, find next div, fade that div in, end the process and append back to main div.
    setInterval(function() {
        $('.testimonials .quote').slice(0,2).fadeOut().nextAll('.quote').slice(3,4).(.fadeIn().end().appendTo('.testimonials');
    }, 5000);
)}; 
```

淡入淡出工作 - 它淡出前两个，并淡出接下来的两个。但它永远不会循环！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:33:18.087

一种有点不同的方法：

```
$(function () {
  (function anim(num, delay) {
    $('.testimonials .quote').slice(0, num).fadeIn().delay(delay).fadeOut().promise().done(function () {
      $('.testimonials').append(this);
      anim(num, delay);
    });
  }(2, 2000)); // change these values to fade another number of elements, or
               // have a longer delay between the fades
}); 
```

演示：http: [//jsbin.com/ivuyex/5/](http://jsbin.com/ivuyex/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:20:31.300

使用 setInterval，您总是将前两个淡出，第三个和第四个淡入淡出。它确实循环，但在第一次迭代之后，就没有什么可以改变的了。

您可以在初始设置状态后尝试 fadeToggle()：

```
setInterval(function() {
    $('.testimonials .quote').fadeToggle().end().appendTo('.testimonials');
 }, 5000); 
```

# php - bash脚本循环遍历数组并使用arg运行php脚本

> ID：13375720
> 
> 赞同：1
> 
> 时间：2012-11-14T09:00:50.280
> 
> 标签：php, bash, unix

我有一个 bash 脚本，它每天凌晨 1:01 在 cron 中运行，bash 脚本是：

```
array_of_clients=(2 187 317 927 1863 2993 3077 3440 3444 3457 3459 3469 3484 3487 3494 3497 3522 3544 3551 3553)

for i in "${array_of_clients[@]}"
do
    echo "\nRunning Client - $i"
    php -f "/mnt/www/bin/scheduled/import_client.php" $i
    echo "\nFinished Client - $i"
done 
```

这个问题是我不知道 $i 是否作为参数传递给 php 脚本。难道我做错了什么 ？如果我将 $i 放在 "" 中，它说它找不到文件，因为文件名变为 /mnt/www/bin/scheduled/import_client.php 2 例如

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:08:08.463

您可以在预定义的全局变量中访问 PHP 脚本中的命令行参数`$argv`。在这种情况下，您`$i`会发现`$argv[1]`.

试试这个脚本：

```
<?php
global $argv;
var_dump($argv);
?> 
```

运行它`php -f test.php A B C defgh`产生：

```
array(5) {
  [0]=>
  string(8) "test.php"
  [1]=>
  string(1) "A"
  [2]=>
  string(1) "B"
  [3]=>
  string(1) "C"
  [4]=>
  string(5) "defgh"
} 
```

# sql - 使用 SQL 交易进行扑克和在底池中处理资金以保持一致性

> ID：13375722
> 
> 赞同：3
> 
> 时间：2012-11-14T09:01:05.147
> 
> 标签：sql, transactions, poker

我想知道如何在 SQL 数据库中处理资金以保持一致性。我想这些表格看起来像下面这样。

考虑以下场景：如果有两个玩家在玩，那么他们下注的钱已经从他们俩中扣除`balance_usd`并添加到`pot_usd`. 但是假设服务器在牌局中宕机了。这里的数据库的一致性大概意味着`pot_usd`应该将钱退还给两个玩家，`balance_usd`从而有效地取消这手牌。似乎单靠交易不能解决这个问题。扑克服务器的后端应该如何构建来处理这个问题？

```
table user
    user_id
    balance_usd

table game
    game_id
    pot_usd
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:27:57.387

为了应对这种可能性，您可以有一个表格，`CurrentGameStakes`其中包含 playerID 和投注金额的字段。然后当手牌结束时，您将总赌注转移给获胜者，如果游戏由于某种原因没有完成，您将赌注金额返还给每个玩家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:28:42.710

您需要在游戏开始时跟踪 balance_usd 和 pot_usd。如果游戏被取消，那么只需恢复这些值。如果它运行完成，则从您用来跟踪它们的表中清除记录。

# regex - RewriteCond 不匹配，而实际上它应该

> ID：13375724
> 
> 赞同：0
> 
> 时间：2012-11-14T09:01:25.687
> 
> 标签：regex, mod-rewrite

目标是从

```
/Swiss+Military/something.. 
```

至

```
/Swiss+Military+Hanowa/something.. 
```

我试过了：

```
RewriteCond %{REQUEST_URI} /Swiss+Military/(.*)
RewriteRule .* /Swiss+Military+Hanowa/%1 [R=301,L] 
```

级别 9 的重写日志显示以下内容：

```
RewriteCond: input='/Swiss+Military/' pattern='/Swiss+Military/(.*)' => not-matched 
```

我不知道为什么它不匹配..有什么想法吗？

**已解决 - 需要在模式上转义 + 符号**（我怎么没有提醒自己）

**编辑** 对于这种情况有更好的解决方案（我没有放在开头，因为它不起作用 - 与发布的原因相同） - 只是一个 RewriteRule：

```
RewriteRule /Swiss\+Military/ /Swiss+Military+Hanowa/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:52:18.137

RewriteCond 对该模式使用 Perl 语法。这意味着您的模式中的“+”表示“匹配 1 个或更多”（前一个字符）。尝试通过在其前面放置一个斜杠来转义模式中的“+”，如下所示：“\+”。

# javascript - 使用javascript从html textarea获取多行数据

> ID：13375728
> 
> 赞同：0
> 
> 时间：2012-11-14T09:01:44.570
> 
> 标签：javascript, html, textarea

嗨，
我在从 html textarea 获取数据时遇到了麻烦。textarea 定义如下：

```
<textarea id="ta" cols=30 rows=15> 
</textarea> 
```

在这里，textarea 限制为 30 个字符。因此，如果每行的字符数超过 30 个字符，则光标将移动到下一行。效果很好。但是问题是，当我尝试使用 获取该值`javascript`时，整个 textarea 内容显示为单行（连续字符串），尽管它有多个。
这是[我的小提琴](http://jsfiddle.net/VdXVy/)

*它显示多行，如果行被`ENTER`键分隔。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:15:58.143

如果`ENTER`在输入 a 时按下，`<textarea>`则会插入换行符。JavaScript 中的换行符是`\n`. 您不需要对此做任何事情，JavaScript 应始终将其视为换行符。就像 jsshah 一样，您粘贴的代码也适用于我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:33:46.123

默认情况下，浏览器会在需要时自动对文本进行换行，但这种换行只是视觉上的，或者说是“软”的。它不影响发送到服务器的数据（提交表单时）或内部表示。

如果您使用 in 中的`wrap=hard`属性`textarea`，则自动换行在向提交的数据中添加换行符的意义上变得“困难”。但是在我测试的浏览器上，换行符不会出现在您可以在 JavaScript 中访问的内部表示中。（据推测，浏览器在提交时会重新包装文本。）

因此，如果您真的需要包装文本，就像在 JavaScript 中访问的那样，您需要自己做。另一方面，由于自动换行不是实际的用户输入，因此很少有理由将其视为真实的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:19:11.417

按“回车键”将包含在警报中。

即使使用“新行”，该值仍然是单个字符串。例如：“堆栈溢出”而不按回车键。

"Stack[ENTER KEY]Overflow" 按下回车...仍然会产生一个字符串 "Stack\nOverflow"

```
var x = "Stack\nOverflow";
alert(x); 
```

元素属性 COLS -> 列，而 ROWS -> 行，很像宽度和高度，但不是真的。

```
<textarea id="ta" cols=30 rows=15></textarea> 
```

# android - Textview 中的长 HTML 源代码

> ID：13375729
> 
> 赞同：0
> 
> 时间：2012-11-14T09:01:58.277
> 
> 标签：android, textview

我的应用程序能够在 textview 中显示简短的 HTML 源代码。但是，对于较长的 HTML 源代码，它就是行不通的。HTML 在 Web 浏览器中正确显示。

示例 HTML：

```
<font color='#26D4CB' /><u>Title</u></font><br>Text<br><br><font color='#26D4CB' /><u>Title Title Title Title Title Title</u></font><br>some long text some long text some long text some long text <br><br><font color='#26D4CB' /><u>Title Title Title Title Title Title</u></font><br><br><font color='#26D4CB' /><u>Title Title Title Title Title Title</u></font><br>+ rework of the emoji picker<br>some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text 
```

我同时使用

```
tvChangelog.setText(Html.fromHtml(changelog),TextView.BufferType.SPANNABLE); 
```

和

```
tvChangelog.setText(Html.fromHtml(changelog)); 
```

然而两者都没有取得任何成果。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:12:38.700

您的 HTML 似乎不正确（尤其是`<font>`元素）。尝试将其替换为以下内容：

```
<font color='#26D4CB'><u>Title</u></font><br>Text<br><br><font color='#26D4CB'><u>Title Title Title Title Title Title</u></font><br>some long text some long text some long text some long text <br><br><font color='#26D4CB'><u>Title Title Title Title Title Title</u></font><br><br><font color='#26D4CB'><u>Title Title Title Title Title Title</u></font><br>+ rework of the emoji picker<br>some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text some long text</u></font> 
```

# c++ - C 或 C++ 中的任何可克隆对象池实现？

> ID：13375731
> 
> 赞同：5
> 
> 时间：2012-11-14T09:02:10.073
> 
> 标签：c++, boost, clone, pool, object-pooling

这可能看起来很奇怪，但我会尝试使其合理化。我目前将**boost.object_pool**与**shared_ptr**一起广泛使用，最近我遇到了一种情况，我需要对当前程序状态进行快照，以便实现像全面**重放/回滚/快进**这样的功能。

所以我不想克隆一个对象池以在其他地方使用，这显然不会起作用，因为即使我被 boost.pool 的接口（我不是）允许这样做，也不会有指向块的有效指针在那个新克隆的池中，这将毫无意义。但是我在这里的用例是如果有重播/回滚需求，我想将其“**粘贴**”回原始池中。

我当然可以手动复制和克隆所有状态、对象和子状态、子对象和子子...然后将它们打包到快照中，并希望一切顺利，但考虑到复杂性，这很容易出错项目已经搞定了，比直接复制内存要慢很多。使用命令模式（或类似模式）来实现撤消重做也是不可能的，因为撤消重做机制不是我的意图。

我只是想知道我是否使用顽固的传统 C 方式再次从头开始执行该项目，并且一个简单的 memcpy(snapshot, all_states, size) 调用几乎可以完成所有工作。

我还有其他选择吗？是否有任何类似 boost.object_pool 的实现允许您克隆底层内存区域？考虑到这种情况，侵入式破解 boost.object_pool 是一个合理的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:42:38.013

从来没听说过。

正如您所指出的，这里的主要问题是对象之间可能存在相互依赖关系，这需要在复制时更新指针。当然不是微不足道的。

我可以想到两种可能的解决方案：

*   持久性
*   序列化

*持久性*是永不改变现有状态。因此，当您更改状态时，您会创建一个新快照，该快照引用旧状态，但新位除外。例如，它通常用于数据库的 MVCC 实现中，并且在函数式编程世界中无处不在。如果您尝试保留太多引用，这也是获得空间泄漏的好方法。最后，它需要进行深入的重新设计。

*序列化*是关于持久化状态，但格式不同。您以序列化格式（无论是文本还是二进制）转储当前状态，并且可以通过读取序列化缓冲区来重新创建它。您甚至可以在序列化缓冲区上应用压缩通道以节省一些内存。

既然您已经在使用 Boost，那么很高兴知道它会`Boost.Serialization`自动处理对象图（嗯！），我认为已经正确处理了`boost::shared_ptr`. 这里可能是你最好的选择。

# jquery - jQuery grayscale.js 和基本滑块的问题

> ID：13375733
> 
> 赞同：0
> 
> 时间：2012-11-14T09:02:12.967
> 
> 标签：jquery, slider, grayscale

希望有人会同情我并可以提供一些建议——我对 jQuery 的了解充其量是有限的，我只知道基本的东西（如何应用 CSS 类等），而不是自己编写/调试代码。

我正在为朋友的婚礼（我的订婚礼物）开发一个网站，但我在尝试让 grayscale.js 和基本滑块正常播放时遇到问题。一旦我添加了滑块功能，灰度效果就会中断。

该网站 - 仍处于开发阶段，因此未在任何 PC 浏览器中进行测试，在这里 - [http://www.elandsebswedding.co.uk/wp-content/themes/weddingTheme/index.html](http://www.elandsebswedding.co.uk/wp-content/themes/weddingTheme/index.html)

当页面加载时，您可以看到彩色图像，然后变灰 - 但鼠标悬停时它们不会恢复颜色。

任何建议 - 或其他插件的建议将实现相同的目标 - 将不胜感激。

谢谢

* * *

grayscale.js 似乎有一个错误 - 萤火虫说索引或大小大于允许的数量并突出显示以下问题？

imageData = ctx.getImageData(0, 0, 宽度, 高度);

* * *

更新

好的 - 似乎取得了轻微的进展 - 滑块（场地部分）中的图像上没有高度/宽度的事实似乎导致了问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:14:13.543

滑块上缺少高度/宽度属性是导致问题的原因。我怀疑 grayScale 插件不能很好地配合响应式设计......

# android - 谷歌地图显示在模拟器上，但不显示在设备上

> ID：13375734
> 
> 赞同：2
> 
> 时间：2012-11-14T09:02:15.637
> 
> 标签：android, google-maps, google-maps-api-3, android-maps

我正在使用我的谷歌地图应用程序并获取谷歌地图 api 密钥
“0o8CRg5BhPmqQB1pvyYZQNfJ2ZbpDMa6XFunRwA”我使用相同的密钥登录我的应用程序，但问题是地图显示在模拟器上但没有显示在我的 HTC 野火 S 设备上告诉我有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:11:54.927

这可能发生在许多情况下，您可以尝试以下可能解决此问题的案例列表

*   尝试打开 WiFi Gps 或数据交换以访问互联网
*   检查位置基础设置并打开与应用程序访问位置相关的所有内容。设置>位置>切换...
*   检查 manifest.Internet,Access_fine_location, Access_coarse_location 中的所有权限
*   检查生成的地图密钥。
*   检查网络是否具有良好的获取地图的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:10:10.113

您使用的 API 密钥很可能与您签署应用程序的密钥无关。

您将需要使用与您的生产证书相关联的另一个 API 密钥（用于签署 APK 的那个），而不是调试密钥。

尝试使用[本指南](https://developers.google.com/maps/documentation/android/mapkey?hl=da#getfingerprint)而不是 SDK 调试证书中的指南

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:24:45.613

A point to note is that (if debugging) you should have a separate debug-key generated for each of the machines you're using to install your app from. Only once you plan to release your app is when you can refer to @Thomas' answer and generate a release key.

In the meantime to locate any api-key related problem just check your Logcat output for `java.io.IOException: Server returned: 3`, which would mean the debug key you used is not valid for the machine you've installed the app from.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:52:52.087

使用这个链接

C:\Program Files\Java\jdk1.6.0_20\bin> keytool -list -alias androiddebugkey -keystore "C:\Documents and Settings\Nazeer.android\AndroidGoogleMaps.keystore" -storepass android -keypass android

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-26T08:14:32.803

您必须将与您的 releaseKey.jks（用于签署 apk）关联的 SHA-1 证书指纹添加到您的地图 api 密钥：

*   打开终端
*   假设您的 releaseKey.jks 位于：/Users/macbook/Downloads/Files/releaseKey.jks 并且您的 releaseKey.jks 的别名是 demilaram，打开终端并输入：

    keytool -list -v -keystore /Users/macbook/Downloads/Files/releaseKey.jks -alias demilaram

*   复制 SHA1 并导航到 Google 控制台并打开您的 api 密钥，然后添加指纹和包名称。在名为“SHA-1 证书指纹”的列下粘贴 SHA1，在名为“包名称”的列下输入您的包名称。

*   点击保存，一段时间后（可能 10 分钟），您将能够在您的设备上看到安装了发布模式 apk 的地图。

# node.js - 节点 js cpu 100%

> ID：13375735
> 
> 赞同：34
> 
> 时间：2012-11-14T09:02:16.993
> 
> 标签：node.js

我们遇到了一个问题，我们的节点应用程序每隔一段时间就会在 100% CPU 上运行一个环境。服务器不是很活跃，通常在 0%-2% CPU 上运行。我想知道可能导致此问题的常见问题是什么，以及找出导致此问题的原因的最佳方法是什么。

服务器规格：

> 节点版本 0.8.14
> ubuntu 11.10
> Intel(R) Xeon(R) CPU E5645 @ 2.40GHz

使用的节点包：

```
"express" : 2.5.x,
"log" : "1.2.x",
"redis" : "0.8.x",
"socket.io" : "0.9.x",
"mongodb": ">= 0.9.6-7",
"passport" : "0.x.x",
"passport-local" : "0.x.x", 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-14T09:39:05.187

您可以使用[node-tick](https://github.com/sidorares/node-tick)分析您的应用程序。

1.  安装`node-tick`方式`npm -g install tick`
2.  使用启用的配置文件运行您的应用程序`node --prof ./app.js`
3.  在 CPU 100% 使用一段时间后停止您的应用程序
4.  您可以在您的应用目录中看到 v8.log，现在您可以使用 node-tick-processor 读取它
5.  运行`node-tick-processor`并解释结果

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-01-22T16:49:02.637

**2019 年更新！！**

您最好使用内置`--prof-process`来处理 v8 分析数据，生成的文件不再是 v8.log 并且`node-tick-processor`不会对您有太大帮助，因此要分析您的应用程序并读取 v8 分析数据，您可以按照以下步骤进行：

```
node --prof your_script.js 
```

Node 会`isolate-0x103800000-v8.log`在你的当前目录中生成一个类似这样名字的文件，现在你使用这个文件来生成一个分析报告

```
node --prof-process isolate-0x103800000-v8.log > processed.txt 
```

**[简单的分析](https://nodejs.org/en/docs/guides/simple-profiling/)**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-09-22T15:43:46.903

持续以 100% CPU 运行是无限循环的典型特征。这是单线程 nodejs 中的一个真正问题，但不幸的是，它缺乏相关信息。

最终我找到了唯一有用的[文章](https://medium.com/the-node-js-collection/live-debugging-node-js-apps-at-the-command-line-cd5b58f883e1)：如何在 nodejs 中跟踪死循环：

通过 SSH 连接到您的服务器。识别 nodejs 进程 ID（例如，让它为 4702）。现在，让我们告诉进程监听调试请求。是的，我们正在使用一个名为 kill 的命令。不，我们不会终止进程。我们正在向它发送不同的信号。

```
kill -SIGUSR1 4702 
```

执行此操作后，该过程将打开调试器连接。实际上，它会在其控制台日志中打印一个特殊的 URL，您可以在 Chrome 中打开该 URL 来调试进程！但是，也许您不想为了建立连接而在防火墙和容器配置中钻一个洞。是的，我也没有。因此，让我们在命令行中进行调试：

```
node inspect -p 4702 
```

你会看到这个提示：

```
debug> 
```

然后输入：

```
pause 
```

你回来了：

```
break in file:///somewhere/something.js:555
>555         for (prop in inputObject) {
510             if (hasOwnProp(inputObject, prop)) {
511                 normalizedProp = normalizeUnits(prop); 
```

是的！我们有第一个提示。该应用程序正在执行文件 something.js 中的第 555 行。这可能足以立即看到错误。但通常我们需要比这更多的信息。您可以键入 backtrace 以获取完整的堆栈跟踪：

```
#0 someFunctionName file:///somewhere/somefile.js:444:22
#1 someFunctionName file:///somewhere/somefile.js:555:33
#2 someFunctionName file:///somewhere/somefile.js:666:44 
```

… 等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-13T13:14:47.423

如果你正在使用带有 webpack 的 UI 应用程序，请注意`watchOptions`或`watch` 对我来说，禁用 poll 解决问题

```
watchOptions: {
   poll: false
} 
```

[https://webpack.js.org/configuration/watch/#watchoptionsignored](https://webpack.js.org/configuration/watch/#watchoptionsignored)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-30T22:53:47.500

这就是我发现的：

```
 #!/usr/bin/env node

require(__dirname+"/processor-usage.js").startWatching();

var shouldRun = true;
var desiredLoadFactor = .5;

function blockCpuFor(ms) {
    var now = new Date().getTime();
    var result = 0
    while(shouldRun) {
        result += Math.random() * Math.random();
        if (new Date().getTime() > now +ms)
            return;
    }   
}

function start() {
    shouldRun = true;
    blockCpuFor(1000*desiredLoadFactor);
    setTimeout(start, 1000* (1 - desiredLoadFactor));
}

setInterval(function() {
    console.log("current process cpu usage: "+(global.processCpuUsage || 0)+"%");}
, 1000);

if (process.argv[2]) {
    var value = parseFloat(process.argv[2]);
    if (value < 0 || value > 1) {
        console.log("please give desired load value as a range [0..1]");
    process.exit(-1);
    } else {
        desiredLoadFactor = value;
    }
}
start(); 
```

在[http://blackholethought.blogspot.de/2012/08/measuring-cpu-usage-of-nodejs-from.html](http://blackholethought.blogspot.de/2012/08/measuring-cpu-usage-of-nodejs-from.html)

# java - 在 Java NIO 中使用 ByteBuffer 读写 Int

> ID：13375742
> 
> 赞同：3
> 
> 时间：2012-11-14T09:02:41.750
> 
> 标签：java, networking, nio, bytebuffer, data-conversion

我想使用 Java NIO API 中的数据报通道通过网络传输一个 int 数组。但是，读/写函数只能将 a`ByteBuffer`作为输入。所以我需要将 int 数据存储到 a 中`ByteBuffer`，然后在接收器处将其读回。我正面临着`java.nio.BufferUnderflowException`。这是我在发件人端所做的事情：

```
for(i = 0; i < send_data.length; i++)
{
          //Write the data onto Buffer
          ByteBuffer buffer1 = ByteBuffer.allocate(send_data[i].length*4);
          for(j = 0; j < send_data[i].length; j++)
                     buffer1.putInt(send_data[i][j]);
          buffer1.flip();
          //Transmit the data
          while(buffer1.hasRemaining())
                 channel.write(buffer1);
} 
```

这里，`send_data`是一个二维数组，其中每一行都被视为一个单独的数据包。

在接收方

```
for(i = 0; i < k; i++)
{
           ByteBuffer buffer = ByteBuffer.allocate((recvpkt[0].length)*4);
           channel.receive(buffer);
           j = 0;
           while(buffer.hasRemaining())
           {
                  recvpkt[i][j] = buffer.getInt();
                  j = j+1;
           }
 } 
```

同样，`recvpkt`是一个二维数组，它的每一行都会从网络接收一个数据包。

我读到`getInt()`从 中读取 4 个字节`ByteBuffer`并将当前位置移动 4 个字节。是不是我使用`buffer.flip()`错误的方式。我是新手，`NIO`并且在如何调试此类问题时遇到困难。

更新：

错误不再发生。但是现在接收者得到的都是零。而我在每个数据包中传输一个二进制序列。当我从发送方本身的缓冲区读回时，所有条目都正确显示，但接收方接收到的缓冲区全为零。不知道为什么会这样。

更新 2：

最后，经过几个小时的努力，问题得到了解决。当您收到缓冲区时，您需要将其倒回。

```
 channel.receive(buffer);
  buffer.rewind(); 
```

如果您现在对缓冲区使用 getInt 方法，您将能够成功读取缓冲区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T09:07:21.403

每次从写入切换到读取以及从读取切换到写入时，您都有 th flip() 缓冲区。将翻转（）添加到第二个示例之后`receive()`

一旦你完成了这项工作，你应该看看如何重用你的 ByteBuffers 和 EJP 建议。

# database - Sharepoint 2010 数据库 - 如何从 SQL 2012 AlwaysOn 迁移到独立 SQL 2012

> ID：13375750
> 
> 赞同：3
> 
> 时间：2012-11-14T09:03:32.660
> 
> 标签：database, sharepoint, alias, sql-server-2012, high-availability

我们最近购买了一个著名的备份解决方案，即使在保证它可以备份 SQL 2012 数据库并且我们的 SQL 2012 AlwaysOn HA 解决方案不会成为问题之后，他们现在实际上并不支持它。

所以我唯一的选择似乎是放弃 AlwaysOn 设施，直到他们支持它（作为参考，这家公司不提供他们的软件退款！！）。

我应该提到，我们拥有的 SharePoint 2010 环境是一个实时生产环境，而不是一个测试环境。

我的问题是，我的 SharePoint 2010 安装当前正在引用 SQL2012 AlwaysOn 侦听器以连接到数据库（在本例中为 SP-SQL-AG1CA）。我已经阅读了将 SharePoint 数据库从一台 SQL 服务器传输到另一台的方法，但如果您只想引用托管现有 SQL 数据库的服务器而不是引用 AlwaysOn 侦听器，则一无所获。如果可能的话，我宁愿不必设置一个新的 SQL 服务器来移动数据库，因为它们在它们所在的位置非常好！

在将 Active Directory DNS 条目更改为指向现在的独立 SQL Server (即在 DNS NH-SQLSVR-01 = 10.1.10.150 中，所以将 SP-SQL-AG1CA 更改为也指向 10.1.10.150）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:27:41.780

是的，这很好用，我们经常使用 DNS cnames 来合理地迁移服务器。

我会做的是：

*   从可用性组中删除数据库
*   删除监听器
*   创建一个与旧侦听器同名的 DNS cname，指向托管数据库的服务器
*   在共享点服务器上执行 ipconfig /flushdns 命令以确保它们注意到 IP 地址更改

# maven - 从声纳目标执行中忽略项目

> ID：13375751
> 
> 赞同：1
> 
> 时间：2012-11-14T09:03:40.047
> 
> 标签：maven, sonarqube

我已经为我们的多模块 Maven 项目在 Maven 构建中包含了声纳：声纳目标。对于没有 Java 类的项目，构建失败并出现错误：

> 无法在项目 PROJECT 上执行目标 org.codehaus.sonar:sonar-maven3-plugin:3.3:sonar (sonar)：执行目标 org.codehaus.sonar:sonar-maven3-plugin:3.3:sonar 的声纳失败：不是根项目：org.sonar.api.batch.bootstrap.ProjectDefinition

有没有办法从声纳目标执行中排除项目？还有一种方法可以忽略构建中与声纳相关的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T06:08:01.913

当在父项目上运行声纳执行时，所有子模块都会得到审查，因此无需将继承的这个目标放在子模块上 - 为 maven 插件设置继承为 false 为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:28:59.647

它对我有用。谢谢。我的例子（pom）：

```
<plugins>
    <plugin>
        <groupId>org.codehaus.sonar</groupId>
        <artifactId>sonar-maven3-plugin</artifactId>
        <version>3.5</version>
        **<inherited>false</inherited>**
        ...
    </plugin>
</plugins> 
```

# javascript - gRaphael 弹出位置

> ID：13375754
> 
> 赞同：1
> 
> 时间：2012-11-14T09:04:02.043
> 
> 标签：javascript, raphael, graphael

据我所见，gRaphael 仅支持 4 个位置来放置弹出窗口，、`up`和，通常这已经足够了，但我的折线图空间有限，因此弹出窗口在 SVG 内部被切断。我的问题是，如何将弹出窗口放置在（右上角）、（左上角）、（右下角）或（左下角）位置？`down``left``right``up right``up left``down right``down left`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:22:15.780

*自定义工具提示*怎么样，创建一个简单的`div`并将其附加到您的图表容器中，就像我在饼图中所做的那样？

[带有工具提示的交互式饼图](http://jsfiddle.net/vedmack/cuaBX/)，这样您就可以控制一切......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:44:48.833

我最终使用了qTip，就像这样......

```
//show the tooltip
showTip(column.node,column.symbols[0].node,"label",tailPos,tipPos);

function showTip(selector,target,content,tailPosition,tipPosition)
{
    $(selector).qtip({
        content: content,
        position: {
            my: tailPosition,   //tip tail position
            at: tipPosition,    //tip body position
            target: $(target)   //position the tip at this element
        },
        show: {
            ready: true //show popup
        },
        style: {
            classes: 'ui-tooltip-rounded ui-tooltip-dark'
        }

    });
} 
```

完美地工作。:)

# c# - 以编程方式启用禁用的设备

> ID：13375755
> 
> 赞同：3
> 
> 时间：2012-11-14T09:04:24.780
> 
> 标签：c#, device-manager

我正在使用此答案中的代码：[Win32 API function to programmatically enable/disable device](https://stackoverflow.com/questions/1438371/win32-api-function-to-programatically-enable-disable-device/1610140#1610140)

该代码有效，但有点。只有在之前已被相同代码禁用时，它才会成功启用设备。如果设备在程序启动前被“禁用”，则无法成功启用，但不会抛出任何异常。代码运行正常，我在设备管理器中看到“刷新”，但它仍然被禁用。

只有当我先手动启用设备时，代码才能成功禁用和启用它。有没有办法以从禁用设备开始的方式正确使用这段出色的代码？

可能是小东西，但我看不到。

# sitecore - Sitecore - 创建数据源父“发生错误”SetSublayout

> ID：13375758
> 
> 赞同：2
> 
> 时间：2012-11-14T09:04:32.950
> 
> 标签：sitecore, sitecore6, page-editor

我试图让 Sitecore 在向页面添加新渲染时从页面编辑器打开的“选择数据源”对话框之前创建一个新项目。

我们正在构建一个多站点解决方案，其中每个站点都像这样表示（概念）

```
site1 (template = website)
    Datasources (template = datasourcefolder)
        Module X Sources (template = module1container)
            Module Source 1 (template = module1)
        Module Y Sources (template = module2container)
        ...
    Home (template = startpage) 
```

这些站点将使用分支模板创建，该模板将基于模板网站、数据源文件夹和起始页创建项目。

这就是我想要发生的事情：

添加新的子布局时，检查源是否存在，如果不存在，则根据指定的模板（定义为父*数据源模板*并添加到*子布局*模板）在*site1/Datasources/[Module name]中创建一个新项。*然后将此新项目添加到对话框 DatasourceRoots 以允许用户在其下方创建数据源项目。

 **我已经成功实现了一个管道来检查项目，如果项目不存在则创建它，并且“*选择呈现数据源*”对话框显示新创建的项目并允许用户在其下方创建一个新的数据源项目，正如预期的那样。但是，单击“确定”后，会显示一条警报，并显示“发生错误”消息。关闭此对话框并再次执行操作（当数据源根目录已经存在时）工作正常。

使用反射器，我已经验证了从对话框创建的项目 (Sitecore.Shell.Applications.Dialogs.SelectRenderingDatasourceForm) 是否正确返回，并且使用正确的参数和使用预期项目的 SetDialogValue 调用关闭了对话框。

我想我的问题是；关闭此对话框后会发生什么？触发什么管道来实际设置渲染上的数据源？我需要弄清楚这个错误是在哪里引发的，当然，修复任何错误......

我意识到这可能有点难以理解，如果需要，我很乐意提供代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:48:35.190

我们做一些非常相似的事情，但作为当前项目的子项。参考这里的代码：

[https://github.com/techphoria414/pageeditor-unleashed/blob/master/PageEditor.Unleashed.Classes/Pipelines/GetRenderingDatasource/CreateContentFolder.cs](https://github.com/techphoria414/pageeditor-unleashed/blob/master/PageEditor.Unleashed.Classes/Pipelines/GetRenderingDatasource/CreateContentFolder.cs)

我会确保您在创建项目时使用 SiteContextSwitcher。否则，PageEditor 的事件处理程序可能会产生未知的副作用。其中一些事件处理程序是由 Sitecore 在代码中创建的，不能在配置中禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:21:28.783

我认为这是导致错误的事件，而不是管道处理器。可能是 OnItemSaving 事件。

默认情况下，Sitecore 已配置`Sitecore.Tasks.ItemEventHandler.OnItemSaving`为在保存项目时执行。**

# python - 有没有办法用 python 开发 OS X 应用程序？

> ID：13375760
> 
> 赞同：2
> 
> 时间：2012-11-14T09:04:35.490
> 
> 标签：python, objective-c, macos

> **可能重复：**
> [Mac OS X 的 Python GUI 框架](https://stackoverflow.com/questions/2393514/python-gui-framework-for-mac-os-x)

有没有办法用 python 为山狮开发 OS X 应用程序？我找到了两个专用于此的库 - pyObjC 和 py2app，但它们都非常过时。

是否还有任何使用 python 构建 OS X 应用程序的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:54:48.403

OSX 的好处之一是对 Python 的原生支持。您在 Windows 或 Linux 上编写的几乎所有 Python 代码都可以在 OSX 上运行（平台相关函数除外）。

有许多库可以让您编写图形应用程序。[http://www.riverbankcomputing.co.uk/software/pyqt/intro](http://www.riverbankcomputing.co.uk/software/pyqt/intro)是 PyQt，它允许您编写 Qt 应用程序并支持 OSX。如果你想做任何类型的网络应用程序，有像 Django 这样的库。

# python-sphinx - 有没有办法在 reStructuredText 的表格单元格中跨多行拆分单词，使其在输出中显示为单个单词？

> ID：13375766
> 
> 赞同：4
> 
> 时间：2012-11-14T09:04:53.827
> 
> 标签：python-sphinx, restructuredtext

假设我有一张桌子`reStructuredText`：

```
+---------------+---------------------------+
| key           | value                     |
+===============+===========================+
| short_word    | value_1                   |
+---------------+---------------------------+
| really_long_  | value 2                   |
| word_I_want_  |                           |
| to_break      |                           |
+---------------+---------------------------+ 
```

有没有办法打破左下角单元格中的单词，即使用续行转义字符或类似的东西，以便它仍然在输出中显示为单个单词？

特别是我使用 Sphinx 来记录我的 Python 文档，并且由于尾随下划线字符，它将第一行解释为生成错误的链接目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:11:39.530

好的，经过一些实验，它看起来像通常的反斜杠 \ 行继续字符工作，即

```
+---------------+---------------------------+
| key           | value                     |
+===============+===========================+
| short_word    | value_1                   |
+---------------+---------------------------+
| really_long\  | value 2                   |
| _word_I_want\ |                           |
| _to_break     |                           |
+---------------+---------------------------+ 
```

我发现我仍然必须将下划线字符移动到下一行，否则第一行仍然被解释为链接目标，尽管生成的 HTML 表中的单词被写为连续单词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-15T02:37:14.700

查看[此建议](https://stackoverflow.com/a/35167476/647002)，以使用[reST 替换](http://www.sphinx-doc.org/en/stable/rest.html?#substitutions)来通过较短的事物引用较长的事物。

```
+---------------+---------------------------+
| key           | value                     |
+===============+===========================+
| short_word    | value_1                   |
+---------------+---------------------------+
| |long_word|   | value 2                   |
+---------------+---------------------------+

.. |long_word| replace:: really_long_word_I_want_to_break 
```

我在表格中遇到了类似的问题`:ref:`Long Title <even-longer-name>``，你真的不能轻易地跨行。换人解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T16:54:53.297

在您的行前添加一个栏和一个空格：

```
+------------------+---------------------------+
| key              | value                     |
+==================+===========================+
| short_word       | value_1                   |
+------------------+---------------------------+
| | really_long    | value 2                   |
| | _word_I_want   |                           |
| | _to_break      |                           |
+------------------+---------------------------+ 
```

# c++ - 如何在 C++ 中正确处理 const char*

> ID：13375767
> 
> 赞同：1
> 
> 时间：2012-11-14T09:04:55.557
> 
> 标签：c++, char, constants

```
bool check(const char* pass); 
```

1.  const 是否意味着我不能在函数内部修改 char*？

2.  char* c 是否有类似 contains(char c) 的函数来检查 char 是否在 char* 中？

3.  如何到达 char* 中的第 4 个字符？

4.  是否有任何函数可以给出该 char* 的长度。除了检查'\0'在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T09:06:56.550

**改为使用`std::string`。**

1.  不，这意味着您不能修改`char`s.

2.  `char*`是一个指针，它没有任何功能。你可以抬头看看`strchr`。

3.  `pass[3]`

4.  `strlen``'\0'`，但它会在内部进行检查。

# android - 滚动时 ListView 项目闪烁

> ID：13375769
> 
> 赞同：0
> 
> 时间：2012-11-14T09:05:07.503
> 
> 标签：android, android-layout, android-widget

请帮我解决这个问题。我有一个 ListView 我这样声明：

```
 <ListView
    android:id="@+id/listViewContactList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:cacheColorHint="@android:color/transparent"
    android:choiceMode="singleChoice"
    android:divider="@null"
    android:dividerHeight="0dip"
    android:scrollingCache="false" >
</ListView> 
```

这是列表视图项：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/contact_list_item_normal_bg"
android:orientation="vertical"
android:padding="5dip" >

<FrameLayout
    android:id="@+id/loadingPart"
    android:layout_width="@dimen/avatar_list_size"
    android:layout_height="@dimen/avatar_list_size" >

    <ProgressBar
        android:id="@+id/progressBar"
        style="@android:style/Widget.ProgressBar.Inverse"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/contact_default_ic" >
    </ProgressBar>

    <ImageView
        android:id="@+id/imageViewIcon"
        android:layout_width="@dimen/avatar_list_size"
        android:layout_height="@dimen/avatar_list_size"
        android:background="@drawable/image_rounded_coner_bg"
        android:contentDescription="@string/image_content_description"
        android:padding="3dip"
        android:src="@drawable/contact_default_ic" />
</FrameLayout>

<LinearLayout
    android:id="@+id/li1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_marginLeft="10dip"
    android:layout_toRightOf="@+id/loadingPart"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/draft_text" />

    <TextView
        android:id="@+id/textViewGroupName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/draft_text"
        android:textColor="@android:color/black"
        android:textStyle="bold" />
</LinearLayout>

<ImageView
    android:id="@+id/imageViewEmail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="20dp"
    android:contentDescription="@string/image_content_description"
    android:src="@drawable/contact_list_item_imail_ic" />

</RelativeLayout> 
```

加载 imageViewIcon 时出现进度条。问题是当进度条显示时，如果我滚动列表视图，列表视图项目将被削减。仅当我将项目背景设置为此图像时才会发生

![在此处输入图像描述](../Images/07dbb7bbc6baa3b3f231c6abacc78639.png)

非常感谢您为解决问题提供的任何帮助。

注意：如果项目背景是白色的，它工作正常。或者，如果我将进度条设置为不可见，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:42:44.493

不看代码很难分辨，但听起来进度条没有在后台加载。查看异步任务，您可以在其中在另一个线程的后台启动进度条。

# android - 如何在屏幕上实现音乐播放自定义通知栏

> ID：13375771
> 
> 赞同：0
> 
> 时间：2012-11-14T09:05:16.603
> 
> 标签：android, android-layout, android-gui

我正在开发音乐应用程序，我想在主屏幕上显示正在播放 xyz 音乐的通知（弹出通知栏，如 spotify）。

如何在播放列表末尾显示这样的弹出通知栏？当音乐播放时，当用户点击该栏时，它将重定向到音乐播放屏幕。

当没有音乐播放时，该栏会自动隐藏，并且还想在隐藏期间为该栏设置动画，我如何在底部的列表视图上显示它

作为一个例子，请看下面 ![在此处输入图像描述](../Images/3138b0c6459df8f588327eb51288a40a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T22:30:05.777

使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)的力量：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <ListView
            android:id="@+id/playlist"
            android:layout_above="@+id/notification"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

    <RelativeLayout
            android:id="@+id/notification"
            android:layout_alignParentBottom="true"
            android:layout_height="wrap_content"
            android:layout_width="match_parent">

            <ImageView
                    android:id="@+id/imgview_album_art"
                    android:src="image"
                    android:layout_centerVertical="true"
                    android:layout_alignParentLeft="true"
                    android:layout_width="48dp"
                    android:layout_height="48dp"/>

            <LinearLayout
                    android:orientation="vertical"
                    android:layout_height="wrap_content"
                    android:layout_width="wrap_content"
                    android:layout_centerVertical="true"
                    android:layout_toLeftOf="@+id/btn_play_pause"
                    android:layout_toRightOf="@+id/imgview_album_art">

                <TextView
                        android:text="Paradise"
                        android:id="@+id/textview_song_name"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>

                <TextView
                        android:text="Coldplay - Mylo Xyloto"
                        android:id="@+id/textview_artist_album"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"/>

            </LinearLayout>

            <ImageButton
                    android:id="@+id/btn_play_pause"
                    android:padding="8dp"
                    android:background="@android:color/transparent"
                    android:src="@android:drawable/ic_media_pause"
                    android:layout_centerVertical="true"
                    android:layout_alignParentRight="true"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

    </RelativeLayout>

</RelativeLayout> 
```

# c# - 有谁知道用于将 ppt 文件转换为 HTML5 的好的 C# 或 PHP 库

> ID：13375773
> 
> 赞同：1
> 
> 时间：2012-11-14T09:05:26.037
> 
> 标签：c#, html, powerpoint

在服务器上将 ppt 或 pptx 文件升级为 html5 后，我想将其转换为 html5。有谁知道用于转换的好的 C# 或 PHP 库？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:12:43.083

也许这可以被集成/使用： http: [//ppt-to-html5.com/](http://ppt-to-html5.com/)

# java - 我可以在 LDAP/Active Directory 中验证用户的密码而无需以该用户身份登录吗？

> ID：13375774
> 
> 赞同：1
> 
> 时间：2012-11-14T09:05:28.240
> 
> 标签：java, active-directory, ldap

对于当前项目，我需要针对 Java 中的 Active Directory 对用户进行身份验证。到目前为止，我一直在做简单的方法：尝试使用用户提供的用户名/密码组合连接到 AD。虽然这在我的开发系统上运行良好，但如果软件尝试通过简单地登录 AD 来验证用户凭据，我的网络管理员不愿意授予对 AD 的实时系统访问权限。他建议创建另一个 AD 用户，其访问权限仅限于一个特定的 OU。我的软件应该以这个受限用户的身份连接到 AD，然后以某种方式验证真实用户的密码。（不过，我不认为这是一种安全收益，我不是网络管理员。）

现在我想知道：当我以另一个用户身份登录 AD 时，如何验证用户的密码？这可能吗？

亲切的问候，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:08:18.787

这个问题毫无意义。LDAP 中没有“登录”步骤。有一个“绑定”步骤，这就是您必须用来验证用户名和密码的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:22:17.610

供您参考。AD 身份验证不是 LDAP 绑定。这是关于交换 Kerberos 票证的。

# jquery-ui - JqueryUI：对话框打开导致选择列表关闭

> ID：13375777
> 
> 赞同：0
> 
> 时间：2012-11-14T09:05:54.253
> 
> 标签：jquery-ui, jquery-ui-dialog

我的选择有一个 .on("click"... 事件，可以打开一个对话框。

问题是对话框的打开关闭了用户刚刚单击的选择。

如何停止选择列表的关闭？我正在测试 FF16 和 jqueryui 1.9

这是问题的示例和JSfiddle：http: [//jsfiddle.net/HqfvP](http://jsfiddle.net/HqfvP)

```
$(function(){
  $('#theDialog').dialog( {
      autoOpen : false,
      resizable : false,
      stack : false, position: ['right','center']
  });
  $("#theSelect").on("click", function(){
      $(".ui-dialog-content").dialog("close");//closes all open dialogs
      $('#theDialog').dialog("open");
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:37:41.747

选择选项关闭的原因是因为`.dialog("open")`自动将焦点设置到对话框上的元素。不想将焦点放在新打开的对话框上是一个不寻常的用例，因此您必须进行一些自定义：http: [//jsfiddle.net/HqfvP/3/](http://jsfiddle.net/HqfvP/3/)

链接的代码看起来可能需要做很多工作，但实际上并不难想出： 1\. 像这样扩展 jQuery 对话框：

```
$.widget("ui.my_dialog", $.ui.dialog, { 
}); 
```

1.  将所有`.dialog`引用更改为`.my_dialog`
2.  `open`将jQuery UI[源](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js)中的函数复制到我的新对象中。
3.  *（可选）*重命名`open`为`open_nofocus`（或其他名称）并更新`open`.

# java - Java中的TypeMap

> ID：13375781
> 
> 赞同：4
> 
> 时间：2012-11-14T09:06:03.583
> 
> 标签：java, generics, map

我想实现这样的地图，

`Map<Class<T>, T> m;`

其中，给定 T 的类，我可以得到一个 T 类型的通用对象。

我知道你可能会说，你可以包装 a`Map<String, Object>`并使用强制转换来归档它。

我知道这个。

但是想象一下地图是`Map<Class<T>, Collection<T>>`，其中，值是一个非常大的集合。

我不想遍历集合并转换每个对象，因为集合太大了。

所以？我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:07:59.413

[Guava](https://code.google.com/p/guava-libraries/)也有类似的东西，它叫做[ClassToInstanceMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ClassToInstanceMap.html)。

[您可以在专门的 Wiki 部分中](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#ClassToInstanceMap "新的集合类型：ClassToInstanceMap")阅读有关它的更多信息。

但显然你需要的是一个`ClassToInstanceMultimap`. 目前还没有，但您可以提交功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:12:21.877

> 我不想遍历集合并转换每个对象，因为集合太大了。

我不会担心，因为

*   你永远不需要这样做
*   泛型是编译时检查，因此转换为泛型在运行时不会做任何事情。

例如 If `T extends Object`，强制转换 a`Object`不会`T`做任何事情。类似地 cast `Collection`to`Collection<T>`在运行时不做任何事情。

> 但是想象一下map是Map<Class<T>，Collection<T>>，其中，值是一个非常大的集合。

如果您认为这会有所作为，那么强制转换不是答案。您可能需要转换 Collection 的内容，但这在 Java 中完全不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:18:23.390

请注意，由于 Java 使用类型擦除，因此实现实际上将具有

```
Map<?, ?> = Map<Object, Object> 
```

您可以轻松编写一个安全的访问器方法，为您提供所需的类型安全性，例如进行`instanceOf`检查：

```
public class InstanceMap extends HashMap<Class<?>, Object> {
    public <T> T getInstance(Class<T> cls) {
        Object o = super.get(cls);
        if (o != null && cls.isInstance(o)) {
            return (T) o;
        } else {
            return null;
        }
    }

    public <T> void putInstance(Class<T> cls, T value) {
        super.put(cls, value);
    }

    @Deprecated
    public Object get(Object key) {
        return super.get(key);
    }
} 
```

除非您开始使用本身是通用的类型，否则这将正常工作。`Class<? super T>`然后会有所帮助。但总的来说，它主要给你一种*类型安全的错误感觉*。这种映射不会为您提供您习惯的强类型安全性。最后，它只不过是一个演员表。

我以前使用过这样的地图，但在使用了 1-2 年后，我最终在清理阶段再次从我的代码中删除了它们。他们是个黑客，并没有像我预期的那样给我带来很多好处。

# database-project - 是否有解析 SQLCMD 变量的选项，在 Visual-Studio 模式比较中进行比较？

> ID：13375788
> 
> 赞同：6
> 
> 时间：2012-11-14T09:06:36.343
> 
> 标签：database-project, schema-compare

看起来`Visual Studio Database Project`不解析`SQLCMD`-variables 进行模式比较。

我所有的同义词看起来像

```
CREATE SYNONYM [dbo].[addressesExtDB] FOR [$(ExtDB)].[dbo].[addresses]; 
```

但它们一直被报告为与数据库不同。

当我使用正确的 -settings 进行架构更新时，`'Specify SQLCMD Variabeles...'`其中 var ExtDB 设置为`'ExtDBnn'`导致`Synonym`数据库正确设置为：

```
CREATE SYNONYM [dbo].[addressesExtDB] FOR [ExtDBnn].[dbo].[addresses]; 
```

重新比较操作再次错误地将所有同义词显示为不同。所以比较应该解析 sqlcmd-variabeles 并使用结果与数据库进行比较。我是否错过了执行此操作或其他操作的选项，或者您是否遇到过同样的问题并以某种方式找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T17:14:20.437

不，变量根本不会传递给 VS 中的模式比较（您可以通过例如将您自己的贡献者添加到项目中来验证这一点）。

有趣的是，即使使用 SqlPackage.exe，变量也只传递给源，而不是目标。

面对这种情况，我结束了在从数据库中获取的 .dacpac 文件中进行数据库名称 -> 变量替换 - 一切都以这种方式工作，即使它是一个相当黑客。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-12T13:44:04.140

在项目设置中为变量设置默认值。然后 SchemaCompare 将假定它们是相等的。

![SQLCMD 变量](../Images/2594d108ef1b17c3ed2705ee47c9ffd2.png)

[没有 sqlcmd 变量的模式比较默认值](https://i.stack.imgur.com/9G5PA.png)

[Schema-与 sqlcmd 变量默认比较](https://i.stack.imgur.com/66JgN.png)

如果这不是你所得到的，你能告诉我并提供一些澄清吗？干杯

# html - 2 列绝对布局都需要为 100% 高度

> ID：13375791
> 
> 赞同：3
> 
> 时间：2012-11-14T09:06:51.693
> 
> 标签：html, css

我简化了下面的布局以显示我的意思。两列都需要为 100%，但问题是如果 1 列中的内容将其拉伸到 100% 高度以下导致滚动条，那么另一列将保持 100% 的窗口高度。有没有办法确保两个 div 始终占据文档的整个高度？如果您使用下面的 html，您会看到当您向下滚动时，左列高度保持在窗口的原始高度。有没有没有javascript的解决方案？谢谢！

```
<!DOCTYPE html>
<html>  
<head>
<style>
    html,body {
        min-height: 100%;
    }

    * {
        margin: 0;
        padding: 0;
    }

    .column {
        min-height: 100%;
        background: red;
        position: absolute;
        width: 200px;
    }

    #left {

        left: 100px;
    }

    #right {
        left: 400px;
    }

    #content {
        /* This height will be unknown. 2000px is just for example to push right column down*/
                height: 2000px;
    }

</style>
</head>
<body>
<div id="left" class="column"></div>
<div id="right" class="column">
    <div id="content"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:28:44.667

试试这个 Css-

```
.column {
        height: 100%;
        background: red;
        position: absolute;
        width: 200px;
    }

#left {

    left: 100px;
    margin-bottom: -1000px;
    padding-bottom: 1000px;
}

#right {
    left: 400px;
    margin-bottom: -1000px;
    padding-bottom: 1000px;
} 
```

工作小提琴- [http://jsfiddle.net/vR4eU/](http://jsfiddle.net/vR4eU/)

以及为什么会这样：

我们通过添加 padding-bottom: 1000px 使两个 div 看起来很长，然后使用 margin-bottom: -1000px 欺骗浏览器它不是真的。请参阅此[博客](http://www.ejeliot.com/blog/61)以更好地解释解决方案。

* * *

**更新：**可能`Faux columns`是一种更好的跨浏览器兼容方式，可以帮助您。看到这个 - [http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:31:33.367

如果它只是推动高度的内容，您可以通过将其设置为 max-height: 100% 或将其设置为溢出来解决它：隐藏以阻止它发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:32:10.480

```
<!DOCTYPE html>
<html>  
<head>
<style>
body, html {
  height: 100%; /* make it fill up the screen, when content longer than 100%, will cause overflow as expected */
}

.wrapper {
  min-height: 100%; /* we don't want overflow in this layer. so make it flexible */
  position: relative;
}

.column {
  border: 4px red dashed; /* to see the moving of the block when scroll. */
  width: 200px;
}

#left {
  /* this need to be always the same height of .wrapper, which is at least 100% in height. */
  position: absolute;
  top: 0;       
  bottom: 0;
  left: 100px;
}

#content {
  /* this can have any height you want it will change the height of .wrapper when it grows. but you can't use percent unit! */
  margin-left: 400px;
  min-height: 600px;
}

</style>
</head>
<body>
<div class="wrapper">
  <div id="left" class="column"></div>
  <div id="content" class="column"></div>
</div>
</body>
</html> 
```

这应该适用于所有现代浏览器（IE7 可能不适用于此版本，因为它不支持最小高度，但它在 IE9 的 IE7 模式下工作正常。查看[上一个](http://jsfiddle.net/vR4eU/2/)）。此方案使左列始终保持 的高度`.wrapper`，这将自动适应内部内容的高度，并且无论高度`#content`是多少，都保持至少 100% 的高度。

查看[演示](http://jsfiddle.net/vR4eU/4/)。

如果您需要一些视觉效果，例如在右侧显示背景或边框，以使内容看起来像拉伸到至少 100% 的高度。您可以使用另一个装饰盒，喜欢`#left`并使其放在后面`#content`。这在视觉上满足了您的需求，并且您不必编写任何脚本 XD。请享用

查看[演示](http://jsfiddle.net/vR4eU/6/)。

# java - Jasper Report：文档根元素“jasperReport”，必须匹配 DOCTYPE 根“null”

> ID：13375805
> 
> 赞同：1
> 
> 时间：2012-11-14T09:08:02.940
> 
> 标签：java, jasper-reports

我使用`iReport`版本（4.7.1）设计了碧玉报告。通过 iReport 它工作正常。当我从 java servlet 调用时，出现错误：

```
Error : `Document root element "jasperReport", must match DOCTYPE root "null".`

net.sf.jasperreports.engine.JRException: Document root element "jasperReport", 
must match DOCTYPE root "null".

        at net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:242)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:225)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:213)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:167)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:151)
        at com.crmreport.controller.ReportServlet.processRequest(ReportServlet.java:124)
        at com.crmreport.controller.ReportServlet.doPost(ReportServlet.java:505)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:165)
        at java.lang.Thread.run(Thread.java:619)
        Caused by: org.xml.sax.SAXParseException: Document root element "jasperReport",must match DOCTYPE root "null".
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Err
orHandlerWrapper.java:131)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(
XMLErrorReporter.java:384)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(
XMLErrorReporter.java:318)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.rootEleme
ntSpecified(XMLDTDValidator.java:1621)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleSta
rtElement(XMLDTDValidator.java:1900)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElem
ent(XMLDTDValidator.java:764)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanStartElement(XMLDocumentFragmentScannerImpl.java:1357)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Conten
tDriver.scanRootElementHook(XMLDocumentScannerImpl.java:1289)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3084)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Prolog
Driver.next(XMLDocumentScannerImpl.java:912)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(X
MLDocumentScannerImpl.java:645)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanDocument(XMLDocumentFragmentScannerImpl.java:508)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(X
ML11Configuration.java:807)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(X
ML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.
java:107)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Ab
stractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.p
arse(SAXParserImpl.java:522)
        at org.apache.commons.digester.Digester.parse(Digester.java:1745)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:
238) 
```

这是我的 JRXML 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
              name="BusinessUnitDetail" 
              pageWidth="595" 
              pageHeight="842" 
              columnWidth="535" 
              leftMargin="20" 
              rightMargin="20" 
              topMargin="20"
              bottomMargin="20" 
              uuid="22e233b2-d42c-4a93-87c6-a1d23bd3f7ca">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <style name="Title" forecolor="#FFFFFF" fontName="Times New Roman" fontSize="50" isBold="false" pdfFontName="Times-Bold"/>
    <style name="SubTitle" forecolor="#CCCCCC" fontName="Times New Roman" fontSize="18" isBold="false" pdfFontName="Times-Roman"/>
    <style name="Column header" forecolor="#666666" fontName="Times New Roman" fontSize="14" isBold="true" pdfFontName="Times-Roman"/>
    <style name="Detail" mode="Transparent" fontName="Times New Roman" pdfFontName="Times-Roman"/>
    <style name="Row" mode="Transparent" fontName="Times New Roman" pdfFontName="Times-Roman">
        <conditionalStyle>
            <conditionExpression><![CDATA[$V{REPORT_COUNT}%2 == 0]]></conditionExpression>
            <style mode="Opaque" backcolor="#F0EFEF"/>
        </conditionalStyle>
    </style>
    <parameter name="dateFrom" class="java.util.Date">
        <property name="dateFrom" value="new java.util.Date()"/>
        <defaultValueExpression><![CDATA[new java.util.Date()]]></defaultValueExpression>
    </parameter>
    <parameter name="dateTo" class="java.util.Date">
        <property name="dateTo" value="new java.util.Date()"/>
        <defaultValueExpression><![CDATA[new java.util.Date()]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT
     BusinessUnit AS BusinessUnit,
     CallStart AS CallStart,
     CallEnd AS CallEnd,
     CallTakenBy AS CallTakenBy,
     CalledDate AS CalledDate,
     CallPersonName AS CallPersonName,
     Duration AS Duration
FROM
    crmcalldetail
WHERE CalledDate > $P{dateFrom} AND CalledDate < $P{dateTo}
ORDER BY BusinessUnit]]>
    </queryString>
    <field name="BusinessUnit" class="java.lang.String"/>
    <field name="CallStart" class="java.sql.Time"/>
    <field name="CallEnd" class="java.sql.Time"/>
    <field name="CallTakenBy" class="java.lang.String"/>
    <field name="CalledDate" class="java.sql.Date"/>
    <field name="CallPersonName" class="java.lang.String"/>
    <field name="Duration" class="java.lang.Integer"/>
    <variable name="duration_sum" class="java.lang.Integer" resetType="Group" resetGroup="BusinessUnit" calculation="Sum">
        <variableExpression><![CDATA[$F{Duration}]]></variableExpression>
    </variable>
    <variable name="duration_tot" class="java.lang.Integer" calculation="Sum">
        <variableExpression><![CDATA[$F{Duration}]]></variableExpression>
    </variable>
    <group name="BusinessUnit">
        <groupExpression><![CDATA[$F{BusinessUnit}]]></groupExpression>
        <groupHeader>
            <band height="37">
                <frame>
                    <reportElement uuid="e53feaa2-4fce-4233-873c-4c5b1d87bd09" mode="Opaque" x="0" y="7" width="555" height="24" forecolor="#B89F7D" backcolor="#000000"/>
                    <textField isStretchWithOverflow="true">
                        <reportElement uuid="8a34951d-becf-4676-801f-1cbfd81518b9" style="SubTitle" isPrintRepeatedValues="false" x="2" y="0" width="479" height="24" forecolor="#FF6600"/>
                        <textElement>
                            <font isBold="false"/>
                        </textElement>
                        <textFieldExpression><![CDATA[$F{BusinessUnit}]]></textFieldExpression>
                    </textField>
                </frame>
            </band>
        </groupHeader>
        <groupFooter>
            <band height="26">
                <textField pattern="###0">
                    <reportElement uuid="6a2e9f4f-bc0c-4deb-a861-9d30221cc566" x="481" y="9" width="48" height="15" forecolor="#FF3300"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="true" isUnderline="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$V{duration_sum}]]></textFieldExpression>
                </textField>
            </band>
        </groupFooter>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="194" splitType="Stretch">
            <image>
                <reportElement uuid="97326b0b-4f59-45fa-bab1-82019da4a8f6" x="456" y="0" width="99" height="117"/>
                <imageExpression><![CDATA["cherry.jpg"]]></imageExpression>
            </image>
            <frame>
                <reportElement uuid="643a9f59-1f72-4def-a457-944bebb9111a" mode="Opaque" x="0" y="0" width="451" height="95" backcolor="#000000"/>
                <staticText>
                    <reportElement uuid="c2fa629b-41e3-4ea6-ba69-458367963aac" style="Title" x="0" y="0" width="451" height="66"/>
                    <textElement>
                        <font isBold="false"/>
                    </textElement>
                    <text><![CDATA[Call Tracker Report]]></text>
                </staticText>
                <staticText>
                    <reportElement uuid="a01a3826-af92-4941-ab2b-41cb1da3f9a6" style="SubTitle" x="157" y="66" width="249" height="29"/>
                    <textElement>
                        <font size="22" isBold="false"/>
                    </textElement>
                    <text><![CDATA[X-ONT Software (Ltd) Ltd]]></text>
                </staticText>
            </frame>
            <frame>
                <reportElement uuid="3d131a89-bb0f-4d0a-8085-85ef01af5910" mode="Opaque" x="0" y="96" width="451" height="21" forecolor="#000000" backcolor="#CC0000"/>
                <textField pattern="EEEEE dd MMMMM yyyy">
                    <reportElement uuid="580213d0-b1fc-4725-b311-c89e960a4ce0" x="303" y="1" width="144" height="20" forecolor="#FFFFFF"/>
                    <textElement textAlignment="Right">
                        <font size="12"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
                </textField>
            </frame>
            <staticText>
                <reportElement uuid="99c5e0a7-c15a-4072-b1ff-8b83a347f161" x="2" y="121" width="74" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Customer  ]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="cfe1a411-8270-4b02-947c-a699ff86c385" x="205" y="121" width="56" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Called By]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="bc57e2ae-3f68-4376-9d87-97c2c984a679" x="363" y="121" width="100" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Called Taken By]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="ba3f773c-9145-4e37-9ffe-70dc2e1acefd" x="204" y="143" width="65" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Report Type]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="948a2d75-1716-414e-b2e9-4b3ab44382ca" x="2" y="143" width="74" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Group Type]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="1eb88a37-9aa5-4368-8e4d-fcf02b95a6bb" x="85" y="121" width="67" height="20"/>
                <textElement/>
                <text><![CDATA[ALL]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="b4d0efcf-fc10-4cd7-a946-786ee3d7865f" x="284" y="121" width="48" height="20"/>
                <textElement/>
                <text><![CDATA[ALL]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="b4d0efcf-fc10-4cd7-a946-786ee3d7865f" x="473" y="121" width="48" height="20"/>
                <textElement/>
                <text><![CDATA[ALL]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="37f5f2ec-f1c2-4837-b0bb-3b4dfde170d0" x="282" y="143" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Detail]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="2be6789f-c973-417f-b32a-44822d417a98" x="84" y="143" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[CustomerCalled]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="f40bab96-7309-41d1-a874-f2b99a9f16bc" x="2" y="165" width="74" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Date From]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="692e0148-3beb-4c22-b193-36e37254421e" x="205" y="167" width="63" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Date To]]></text>
            </staticText>
            <textField pattern="yyyy-MM-dd">
                <reportElement uuid="d0e85180-f225-4a6a-ae0d-7927da8212db" x="84" y="167" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{dateFrom}]]></textFieldExpression>
            </textField>
            <textField pattern="yyyy-MM-dd" isBlankWhenNull="true">
                <reportElement uuid="43ea7f44-ebfd-459e-a9c1-dbbe89168f0b" x="282" y="167" width="83" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{dateTo}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <pageHeader>
        <band splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="29" splitType="Stretch">
            <staticText>
                <reportElement uuid="3284a455-7c75-40df-838b-34ec9fc5489e" style="Column header" x="297" y="5" width="76" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Satrt]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="c41f01fd-3417-4cd2-a8d9-296069637903" style="Column header" x="384" y="5" width="67" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[End]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="95576a18-8fe1-4d57-bef4-c3361481475c" style="Column header" x="107" y="5" width="92" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[CallTakenBy]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="1ff784cc-a3ab-4f0e-931d-6924a48e5299" style="Column header" x="199" y="5" width="92" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Date]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="4c7fd897-81e9-4711-99d1-de26c6f86a47" style="Column header" x="2" y="4" width="92" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Called By]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="6033972d-b1d4-4154-9df2-24cba2a403dd" style="Column header" x="471" y="5" width="58" height="18" forecolor="#000000"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[Duration]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="18" splitType="Stretch">
            <frame>
                <reportElement uuid="ccc5fd50-0293-441b-b783-e95672e038a1" style="Row" mode="Opaque" x="0" y="0" width="555" height="18"/>
                <textField isStretchWithOverflow="true" pattern="h.mm a">
                    <reportElement uuid="a317f374-5796-43c4-99d6-10a3af7ee4db" style="Detail" positionType="Float" x="297" y="0" width="92" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{CallStart}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement uuid="442d310e-4052-4ccb-96e0-636b268a55e7" style="Detail" positionType="Float" x="107" y="0" width="92" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{CallTakenBy}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" pattern="dd-MMM-yy">
                    <reportElement uuid="74fca3b3-8be6-40b5-8556-eddf64295fd3" style="Detail" positionType="Float" x="199" y="0" width="92" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{CalledDate}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true">
                    <reportElement uuid="2dcf814d-af5b-4aa9-9fb3-a70948156bf3" style="Detail" positionType="Float" x="2" y="0" width="92" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{CallPersonName}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" pattern="###0">
                    <reportElement uuid="b0db0027-f5f2-4126-a400-16e0b5a1d0ba" style="Detail" positionType="Float" x="481" y="0" width="48" height="18"/>
                    <textElement textAlignment="Right">
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{Duration}]]></textFieldExpression>
                </textField>
                <textField isStretchWithOverflow="true" pattern="h.mm a">
                    <reportElement uuid="89479c74-1d4f-4e50-bc8c-3577a6081433" style="Detail" positionType="Float" x="389" y="0" width="92" height="18"/>
                    <textElement>
                        <font size="14"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{CallEnd}]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </detail>
    <columnFooter>
        <band height="35" splitType="Stretch">
            <line>
                <reportElement uuid="4de509a0-2c1a-494e-80ba-26495de7e795" positionType="FixRelativeToBottom" x="0" y="3" width="555" height="1"/>
                <graphicElement>
                    <pen lineWidth="0.5" lineColor="#999999"/>
                </graphicElement>
            </line>
            <textField pattern="###0" isBlankWhenNull="true">
                <reportElement uuid="daab26a1-72f8-48bb-aea6-3265520641c2" x="458" y="4" width="71" height="20" forecolor="#990000"/>
                <textElement textAlignment="Right">
                    <font size="14" isBold="true" isUnderline="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{duration_tot}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement uuid="aecf8666-74fc-4ff3-8a1b-3a4e548d5d69" x="307" y="4" width="149" height="20" forecolor="#990000"/>
                <textElement>
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Net Total Minutes]]></text>
            </staticText>
        </band>
    </columnFooter>
    <pageFooter>
        <band height="25" splitType="Stretch">
            <frame>
                <reportElement uuid="57d220fb-781d-4991-a9e4-1b7006fea841" mode="Opaque" x="0" y="1" width="555" height="24" forecolor="#D0B48E" backcolor="#000000"/>
                <textField evaluationTime="Report">
                    <reportElement uuid="59953dfc-6b53-4411-a003-74cd5d551432" style="Column header" x="513" y="0" width="40" height="20" forecolor="#FFFFFF"/>
                    <textElement verticalAlignment="Middle">
                        <font size="10" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement uuid="8a2577bd-ce1b-47e5-87bf-74e7627e89a3" style="Column header" x="433" y="0" width="80" height="20" forecolor="#FFFFFF"/>
                    <textElement textAlignment="Right" verticalAlignment="Middle">
                        <font size="10" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
                </textField>
                <textField pattern="EEEEE dd MMMMM yyyy">
                    <reportElement uuid="c36f2f3c-cae1-4e1a-889e-37c3a5862d5f" style="Column header" x="2" y="1" width="197" height="20" forecolor="#FFFFFF"/>
                    <textElement verticalAlignment="Middle">
                        <font size="10" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </pageFooter>
    <summary>
        <band splitType="Stretch"/>
    </summary>
</jasperReport> 
```

这就是我运行的：

```
 JasperReport jasperReport = null;
        JasperDesign jasperDesign = null;
        Map parameters = new HashMap();
        parameters.put("dateFrom", dateFrom);
        parameters.put("dateTo", dateTo);
        String path = getServletContext().getRealPath("/WEB-INF/");
        System.out.println("==Path==" + path);
        String filePath = path+"\\classes\\com\\crmreport\\controller\\BusinessUnitDetail.jrxml";
         System.out.println("==filePath==" + filePath);
        jasperDesign = JRXmlLoader.load(filePath);
        jasperReport = JasperCompileManager.compileReport(jasperDesign);
        byte[] byteStream = JasperRunManager.runReportToPdf(jasperReport, parameters, new JREmptyDataSource());
        OutputStream outStream = response.getOutputStream();
        response.setHeader("Content-Disposition","inline, filename=BusinessUnitDetail.pdf");
        response.setContentType("application/pdf");
        response.setContentLength(byteStream.length);
        outStream.write(byteStream,0,byteStream.length); 
```

是什么导致了这些错误？我用谷歌搜索了它，它说错误在 XML 上。但是使用 iReport 可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:24:23.960

假设 jrxml 文件已添加到您的 jar 文件中，您应该像这样加载它：

```
InputStream is = ReportServlet.class.getResourceAsStream(themeDesignName);
jasperDesign = JRXmlLoader.load(is); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T02:39:46.113

JasperReport 的早期版本使用 DOCTYPE。较新的版本使用 XMLNS。当您打开 .JRXML 时，iReport 使用 XMLNS 将其保存并删除了文档开头的先前 DOCTYPE 标记。更新您的 Jasper JARS 版本，或将您的 JRXML 保存为旧版本。

# c# - WorkflowRuntime.StopRuntime 卡住

> ID：13375810
> 
> 赞同：1
> 
> 时间：2012-11-14T09:08:13.037
> 
> 标签：c#, .net, windows-services, workflow, workflow-foundation

我有一个非常基本的工作流托管在 Windows 服务（C#、.net 3.5）中，但有一个奇怪的问题。

配置：

*   运行时和工作流实例在同一个线程中创建。
*   我有一个后台线程在“无限”循环中在实例上执行 Start ，以使其连续运行。

当工作流抛出异常时，我想清理并关闭服务。问题是，它不起作用:)

我有一个基本上可以做到的停止方法：

> ...
> backgroundThread.Join(..);
> if (workflowRuntime.isStarted)
>   workflowRuntime.StopRuntime();
> ...

这里的问题是 workflowRuntime.StopRuntime()。调用时，它只是卡住了。没有返回值、异常或超时。它只是停止。我也尝试过使用 workFlowInstance.TryUnload()，但同样的事情。它只是卡住了。

我检查了线程 ID，它与创建和启动工作流的停止方法中的相同。

有什么想法吗？如果我只是跳过工作流运行时的所有清理，服务最终会处于僵尸状态并且无法关闭。

# objective-c - 西班牙语 unicode 字符 SQLite

> ID：13375815
> 
> 赞同：1
> 
> 时间：2012-11-14T09:08:33.890
> 
> 标签：objective-c, ios, sqlite

我有一个带有西班牙省份名称的 SQLite 数据库，但我无法将 unicode 字符解码为 NSString 以正确显示。例如 ：`Guip&uacute;zcoa`

有了这个：

```
self.provincia.text =[[NSString alloc] initWithCString:[[[provinciaArray objectAtIndex:row] objectForKey:@"name"] UTF8String] encoding:NSUTF8StringEncoding]; 
```

但我仍然看到 unicode 字符。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:16:51.993

" `&uacute;`" 不是一个“unicode 字符”，`NSString`没有理由将它显示为任何东西，而是它实际上是什么。毕竟不是`NSHTML`

您需要用*实际*字符替换所有出现的字符。您可以使用`stringByReplacingOccurrencesOfString:withString:`来进行实际更换。

# sql - 在 SQL Server 中使用字符串转换按条件排序

> ID：13375820
> 
> 赞同：3
> 
> 时间：2012-11-14T09:08:55.997
> 
> 标签：sql, sql-server

当我尝试使用查询从 SQL Server 数据库中获取金额和日期值时

```
select Amount, RunDate
  from zComm
 WHERE ID = '1339812' 
```

它不返回任何数据。但是当我将日期转换为字符串时，它的工作查询是

```
select Amount, convert(varchar, RunDate) as RunDate
  from zComm
 WHERE ID = '1339812' 
```

现在我想`Amount`按降序显示`RunDate`，我使用了查询

```
select Amount, convert(varchar, RunDate) as RunDate 
  from zComm 
 WHERE ID = '1339812'
 order by RunDate; 
```

但是我得到的结果不是按降序排列的。我附上了结果查询的屏幕截图。

![](../Images/752624392ab2c0ad40076dc345ec3f65.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:17:42.953

正在对日期的字符串表示进行排序，试试这个。

```
select Amount, convert(varchar, RunDate) as RunDateVarchar
  from zComm 
 WHERE ID='1339812'
 order by RunDate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:20:42.783

尝试使用`DESC`关键字。所以你的查询会变成

```
SELECT Amount, convert(varchar, RunDate) as RunDateChar  
FROM zComm  
WHERE ID = N'1339812'
ORDER BY RunDate DESC; 
```

它很可能是按`CHAR`表示而不是按日期排序的。

我希望这有帮助。

# xamarin.ios - 单触。从文本文件中拆分信息

> ID：13375821
> 
> 赞同：2
> 
> 时间：2012-11-14T09:08:55.463
> 
> 标签：xamarin.ios

几天前我只使用 MonoTouch，现在我遇到了一个小问题，所以我需要帮助。

在我的主视图中，我创建了一个文本文件，其中给出了不同的信息，例如“姓名、姓氏、电话号码”

所有这些信息都用“，”分隔

现在我想处理这些信息，所以我必须加载文本文件，直到这里一切正常。

我遇到的问题是，我不希望将文本文件的全部内容放在一个标签中。Name 应该有一个标签，Lastname 应该有一个标签，依此类推。

我尝试使用正则表达式，但不工作。

希望你能理解我的问题，对不起我的英语不好；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:28:35.987

尝试这样的事情：

```
string line;
using (var fs = new StreamReader (filename)) {
    while ((line = fs.ReadLine ()) != null) {
        var fields = line.Split (',');
        var name = fields [0];
        var lastname = fields [1];
        var phonenumber = fields [2];
        ...
    }
} 
```

# excel - 尽管使用了 FreeFile，但出现 EOF 错误

> ID：13375822
> 
> 赞同：0
> 
> 时间：2012-11-14T09:08:58.333
> 
> 标签：excel, vba, eof

我在 VBA 中遇到以下问题

```
Dim backupFile As Integer
Dim backupFName As String

backupFName = xBackupDirName & "\" & "swap_backup_cf_" & xSwapID & ".txt"
backupFile = fopenForReading(backupFName)

Dim tmp  As String
tmp = getLine(backupFile)

Dim b As Boolean
b = EOF(backupFile) 
```

`fopenforReading`and`getLine`正是您所期望的（我刚来自 C++ 背景，这些名字会更快地浮现在脑海中）。问题是最后一行给了我“错误的文件名或编号”错误。但是，`tmp=getLine(backupFile)`读取`backupFile`成功。我究竟做错了什么？

PS 只是为了完整性：

```
Public Function fopenForReading(xFname As String) As Integer
    Dim iFile As Integer
    iFile = FreeFile            
    Open xFname For Input As #iFile
    fopenForReading = iFile
End Function

Public Function getLine(iFile As Integer) As String
   Dim line As String
   Line Input #iFile, line
   getLine = line
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:28:43.257

它对我来说很好（Excel 2010），唯一的修改是文件名。我最好的猜测是（假设是一个提取，这可能是一个安全的假设）backupFile 的值被更改或丢失或文件已经以某种方式关闭的过程中的某个地方。

我建议在代码中放置两个断点，一个在 Freefile 命令以检查返回的数字（很可能它将为“1”，但无论如何都要检查），一个在 EOF 命令，以便您可以检查backupFile 执行前的值。

我想到的另一件事是 getLine 函数调用可能在循环内的某个地方。确保在循环内也不会再次调用 fopenforReading 。只是一种可能。

# regex - Tcl 等价于 Perl 单行

> ID：13375823
> 
> 赞同：5
> 
> 时间：2012-11-14T09:09:04.497
> 
> 标签：regex, tcl

当我需要对不想打开进行编辑的 ASCII 文件进行一些小处理时，我发现自己在代码中使用了很多 Perl 单行正则表达式。

是否有与此 Perl 单行命令等效的 Tcl？

```
perl -i.bak -pe 's/old/new/gi' filename 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:51:08.787

查看 Richard Suchenwirth [http://wiki.tcl.tk/906](http://wiki.tcl.tk/906)的 owh 脚本，它提供了这种功能。约阿希姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:59:36.960

我曾经写过一个 Tcl 脚本来提供类似 Perl 的命令行选项。我自己从来没有经常使用它——它最终成为了将代码发送到 Tcl interp 的练习。如果您有兴趣，代码位于[https://bitbucket.org/glenn_j/tcl-command-line-one-liners/src](https://bitbucket.org/glenn_j/tcl-command-line-one-liners/src)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T03:03:36.113

我使用此脚本在文件上就地执行**shell 管道**，但您可以更改`commands="$1"`为`printf '%s' "$1" > sometemporaryfile`和.`sh -c "$commands"``tclsh sometemporaryfile`

```
#!/bin/sh -e

# =====================================================
# filter file(s) without having to use a temporary file
# =====================================================

# EXAMPLE - remove first line and b-tags:
#   in-place 'tail -n +2 | sed "s/<[Bb]>//g"' *.html *.htm
#   # check that the commands did what you intended
#   rm *.html~ *.htm~

if [ $# -lt 1 ]; then
  printf '%s\n' "$0: usage: in-place commands [file ...]" >&2
  exit 1
fi

commands="$1"
shift
for file; do
  cp -fp -- "$file" "$file~"
  sh -c "$commands" < "$file~" > "$file"
done 
```

# linux - 使用 bash/awk 合并具有困难字段分隔符的 fileA 和 fileB

> ID：13375825
> 
> 赞同：3
> 
> 时间：2012-11-14T09:09:07.257
> 
> 标签：linux, bash, configuration, merge, awk

类似于我的旧问题： [如何合并 FileA.txt 和 FileB.txt，使用 bash 脚本赋予 FileB.txt 覆盖能力？](https://stackoverflow.com/questions/10845601/how-do-i-merge-filea-txt-and-fileb-txt-giving-fileb-txt-overwrite-power-using-a)

我想合并两个配置值文件，我又有fileA和fileB。我想要fileA中fileB中的所有行，如果两个文件中出现相同的配置键，我希望fileB中的值覆盖fileA中的值。

每行总是以'config'开头，然后是一个键，最后是一个值。使它变得困难的部分是该值可以是带有空格的带引号的字符串以分隔多个值（请参阅“网站”值）。

我有一些使用 awk 的经验和相当多的 bash 经验，但我一辈子都想不出办法来做到这一点。感谢所有帮助。谢谢

文件A：

```
config lanIP 10.1.1.1
config wanIP 1.1.1.1
config wanIPMask 255.255.255.255
config website "http://google.com http://yahoo.com" 
```

文件B：

```
config lanIP 192.168.1.1
config wanIP 1.1.1.1
config website "http://google.com http://yahoo.com"
config moreWebsite "http://google.com http://msn.com" 
```

预期输出：

```
config lanIP 192.168.1.1
config wanIP 1.1.1.1
config wanIPMask 255.255.255.255
config website "http://google.com http://yahoo.com"
config moreWebsite "http://google.com http://msn.com" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:40:17.767

这个单线可能会有所帮助：

```
awk '{a[$2]=$0}END{for(x in a)print a[x]}' fileA fileB 
```

**注意**：上面的行很短，但不保持行的顺序。（你没有提到排序标准）

测试：

```
kent$  head a b
==> a <==
config lanIP 10.1.1.1
config wanIP 1.1.1.1
config wanIPMask 255.255.255.255
config website "http://google.com http://yahoo.com"

==> b <==
config lanIP 192.168.1.1
config wanIP 1.1.1.1
config website "http://google.com http://yahoo.com"
config moreWebsite "http://google.com http://msn.com"

kent$  awk '{a[$2]=$0}END{for(x in a)print a[x]}' a b                       
config wanIP 1.1.1.1
config lanIP 192.168.1.1
config moreWebsite "http://google.com http://msn.com"
config wanIPMask 255.255.255.255
config website "http://google.com http://yahoo.com" 
```

如果您想在问题中使用相同的顺序，请尝试以下单行：

```
awk '!($2 in a){i[NR]=$2}{a[$2]=$0}END{for(x=1;x<=NR;x++)if(x in i)print a[i[x]]}' a b 
```

测试

```
kent$  awk '!($2 in a){i[NR]=$2}{a[$2]=$0}END{for(x=1;x<=NR;x++)if(x in i)print a[i[x]]}' a b
config lanIP 192.168.1.1
config wanIP 1.1.1.1
config wanIPMask 255.255.255.255
config website "http://google.com http://yahoo.com"
config moreWebsite "http://google.com http://msn.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:39:47.420

Perl 解决方案：

```
#!/usr/bin/perl
use warnings;
use strict;

sub get_key_value {
    my $line = shift;
    die "Invalid line $line" unless $line =~ /^config /;
    chomp $line;
    return (split / /, $line, 3)[1, 2];
}

my %result;

open my $MINOR, '<', 'fileA' or die "Cannot open fileA: $!";
while (<$MINOR>) {
    my ($key, $value) = get_key_value($_);
    $result{$key} = $value;
}

open my $MAJOR, '<', 'fileB' or die "Cannot open fileB: $!";
while (<$MAJOR>) {
    my ($key, $value) = get_key_value($_);
    delete $result{$key};
    print "config $key $value\n";
}

for my $rest (keys %result) {
    print "config $rest $result{$rest}\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:35:59.690

如果您不介意使用 Python，这里有一个小脚本可以做您想做的事情。把它翻译成 awk 应该很简单。一般的想法是您按顺序处理文件并填充字典，稍后处理的文件中的值会覆盖先前处理的文件中的值：

```
import sys

options = {}
for fileName in sys.argv[1:]:
    with open(fileName) as f:
        for line in f:
            parts = line.strip().split(' ', 2)
            if len(parts) == 3:
                options[parts[1]] = parts[2]

for k in options:
    print 'config', k, options[k] 
```

您可以像这样调用脚本：

```
python merge.py fileA fileB 
```

# c#-4.0 - 使用管道将数据从 C# 4.0 发送到 VLC

> ID：13375828
> 
> 赞同：3
> 
> 时间：2012-11-14T09:09:13.157
> 
> 标签：c#-4.0, pipe, vlc

我正在尝试将视频流从 C# 程序发送到 VLC，但我没有到达链接两个应用程序...注意：应用程序在同一台计算机上运行。

我在 C# 中使用此代码在 C# 中声明管道服务器

`NamedPipeServerStream pipeServer = new NamedPipeServerStream(pipeName, PipeDirection.Out); pipeServer.WaitForConnection();`

仅供参考：我在 C# 中开发了一个 Pipe 客户端来测试 Pipe Server，它们可以一起工作。

我的管道名称是“truc”。

在 VLC 我尝试使用打开播放器

`vlc -`

`vlc fd://truc`

`vlc stream://truc`

`vlc stream://\.\pipe\truc`

`vlc file://truc`

`vlc file://\.\pipe\truc`

但总是同样的错误：VLC 无法打开“...”。

有人知道我哪里错了吗？

谢谢若瑟林

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:35:24.287

```
vlc.exe stream://\\\.\pipe\truc 
```

不要问我为什么，但是有了这么多的斜线，我的 VLC 非常高兴。

# sql - 非预定义 pl/sql 异常的例子？

> ID：13375829
> 
> 赞同：0
> 
> 时间：2012-11-14T09:09:21.650
> 
> 标签：sql, database, oracle, exception, plsql

是否有任何站点具有非预定义的 oracle 服务器错误列表？预定义的错误很容易找到（zero_divide、no_data_found 等），但非预定义的错误，我找不到它的列表。

所以我想问一下这些错误是否真的无法在互联网上搜索到，我知道它们的唯一方法是当我遇到它们时。

建议任何人？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T09:27:29.180

它们在文档中，每个版本都有不同的集合。

这是 11gR2：[http ://www.oracle.com/pls/db112/lookup?id=ERRMG](http://www.oracle.com/pls/db112/lookup?id=ERRMG)

# java - 如何在没有 web.xml 的情况下实现 jaxrs 应用程序

> ID：13375831
> 
> 赞同：5
> 
> 时间：2012-11-14T09:09:38.393
> 
> 标签：java, rest, jersey, jax-rs

我正在尝试在没有 web.xml 配置的情况下部署一个非常简单的 jaxrs 应用程序，并且无法使其正常工作。我希望访问的 URL 是 serverandport/{appname}/rest/welcomes/hello ，我想我一定遗漏了一些明显的东西。

应用

```
@ApplicationPath("/rest")
public class EngineApp extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> s = new HashSet<Class<?>>();
        s.add(RestTestImpl.class);
        return s;
    }

} 
```

资源

```
@Path("/welcomes")
public class RestTestImpl {
    @GET
    @Path("hello")
    public String sayPlainHello() {
        return "Hi from Rest";
    }
} 
```

POM 片段

```
<groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1.1</version>
    <configuration>
        <failOnMissingWebXml>false</failOnMissingWebXml>
    </configuration> 
```

编辑：除了下面的响应，我尝试了一个空的 web.xml 和下面的 web.xml。打扰也返回 404，但是下面的 xml 声明“Servlet javax.ws.rs.core.Application 不可用”：

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" >
    <servlet> 
        <servlet-name>javax.ws.rs.core.Application</servlet-name> 
        <load-on-startup>1</load-on-startup> 
    </servlet> 
    <servlet-mapping>
        <servlet-name>javax.ws.rs.core.Application</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:18:25.760

您需要将应用程序部署到符合 Servlet 3.0 的容器中才能利用此功能。尝试[GlassFish 3.x](http://glassfish.java.net/)或[Tomcat 7](http://tomcat.apache.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:03:13.540

我发现了一个非常相似的问题，在那里发现的问题也可以帮助你。我肯定会尝试使用具有 3.0 架构版本的空 web.xml 来查看它是否有帮助。

[JBoss AS 7 Restful Webservices 不自动部署](https://stackoverflow.com/questions/11405158/jboss-as-7-restful-webservices-not-auto-deploying)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-15T10:28:18.893

对于那些希望使用 Servlet 2.0 规范的人，创建一个 web.xml 并添加 jersey servlet maven 依赖项：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>javax.ws.rs.Application</param-name>
            <param-value>com.mycompany.rest.engine.EngineApp</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

给 pom 添加依赖

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-servlet</artifactId>
    <version>1.13</version>
</dependency> 
```

# excel - VBA图表集源数据

> ID：13375833
> 
> 赞同：2
> 
> 时间：2012-11-14T09:09:41.017
> 
> 标签：excel, charts, datasource, vba

我必须编写一个 VBA 脚本来定义图表的数据源，但我不是 VBA 程序员。在我的工作簿中，我有许多工作表，许多工作表有许多图表。在我的 VBA 中，我必须为每个图表定义数据源。为此，我想知道是否可以在我的模块中编写以下语句：

```
<sheet-name>.<chart-name>.SetSourceData Source ='CPU_UTIL'!$A$1:$A$31,'CPU_UTIL'!$N$1:$O$31 
```

这个语法是否正确，可以直接使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:41:32.823

首先，我有点犹豫要不要回答这个问题，因为你可以找到很多资源。作为一个基本的开始，您可以使用以下代码为基于 B 到 H 列数据的图表设置“SetSourceData”源。为此，您应该已经在 Sheet1 中有图表，并且已经使用图表向导选择了它的图表类型。否则，您可以编写添加图表、设置图表类型、设置源数据、格式/颜色，以及使用 VBA 的所有内容。（鉴于所需的技术可用，一切都取决于您的意图）

```
Sub SetMyChartSourceData()
  With Sheets("Sheets1)
    .ChartObjects(1).Chart.SetSourceData Source:= .Range("B2:H100"), PlotBy:=xlColumns
  End With
End Sub 
```

您提到了“VBA”脚本，但查看您的代码，它是“VB”脚本。然后您可以搜索如何在 Excel 中使用 VBSCript 修改现有图表。但是，如果确实需要编码，我建议您坚持使用 VBA。

首先，您可以在没有 vba 代码的情况下设置源代码。所以请让我们知道您为什么打算使用 VBA？通常大多数问题都会很快得到回答。但是你应该想知道为什么你的一个相对简单的问题在两个小时内没有得到任何回应......

Excel中VBA图表的一些主要（MSDN）和良好参考：

*   [微软图表库](http://msdn.microsoft.com/en-us/library/office/ff841196.aspx)

*   我最喜欢的[Excel 图表博客：](http://peltiertech.com/)

# android - Android中的半透明对话框

> ID：13375834
> 
> 赞同：3
> 
> 时间：2012-11-14T09:09:43.650
> 
> 标签：android, android-layout, android-alertdialog

![在此处输入图像描述](../Images/25dd5f60143c02c6c2d93d102ecee3c7.png)

嗨，我希望为我的警报对话框实现这种外观，但不确定我应该如何做。我确实知道如何在 android 中获得透明警报对话框的外观，但我找不到任何线索让它是半透明的。请就我应该如何开始做一些意见或指导。非常感谢！

更新：对不起，我忘记包含实际上我正在使用带有警报对话框主题的 xml，而不是普通的警报对话框。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T09:15:57.250

要查看未变暗的基础活动：

```
dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

要使对话框的背景半透明，您必须设置 alpha < 255 的背景颜色（请参阅`Color`API）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:36:44.283

您可以创建自定义对话框并将其引用到样式：

```
 final Dialog dialog = new Dialog(context,R.style.cust_dialog); 
```

然后在名为 dialog_style.xml 的值文件夹中创建 xml：

```
 <?xml version="1.0" encoding="utf-8"?>

<resources>   
   <style name="cust_dialog"> 
    <item name="android:windowFrame">@null</item>
    <item name="android:windowIsFloating">true</item> 
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowBackground">@color/transparent_color</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:colorBackgroundCacheHint">@null</item> 
    <item name="android:textSize">30dp</item>
   <item name="android:gravity">left</item>
  </style>
</resources> 
```

还创建 color.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
 <resources>   
     <color name="transparent_color">#00000000</color>
  </resources> 
```

通过这个你会得到半透明对话框，

您可以根据需要控制半透明。

希望能帮到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T10:42:39.023

添加这一行。

```
 dialog.setBackgroundColor(Color.argb(0,0,0,0); 
```

# yii - 在 YII 中创建仅限管理员的表单？

> ID：13375835
> 
> 赞同：0
> 
> 时间：2012-11-14T09:09:51.943
> 
> 标签：yii

我知道如何创建标准表单，就像您创建联系表单或任何其他用户输入表单一样。但是，我希望创建一个允许用户在我们的网站上创建“产品”的表单。问题是，此表单只能由管理员访问。我该如何限制这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:22:37.623

```
class SomeController extends Controller {
   public function filters()
    {
        return array(
            'accessControl',
        );
    }

    public function accessRules()
    {
        return array(
            array('allow',
                'actions' => array('actions_with_public_access'),
                'users' => array('*'),
            ),
            array('allow',
                'actions' => array('action_with_form'),
                'roles' => array('admin')

            ),
            array('deny',
                'users' => array('*'),
            ),
        );
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:01:43.603

为什么不检查其主控制器中的 rbac 呢？像这样的东西：

```
public function YourAdminOnlyController(){
   public function init(){
     if(Yii::app()->user->checkAccess('your_role_admin')){
     }else
     $this->redirect(array('/site/message','txt'=>'access denied. only admins.'));
   }
} 
```

这是一种简单的方法，可能不使用 init()，但我的目的是传达主要思想。 **您也可以简单地使用 accessControl 规则来做到这一点**。

# ios - 滚动视图滚动时如何调用 uipangesture？

> ID：13375838
> 
> 赞同：1
> 
> 时间：2012-11-14T09:10:11.023
> 
> 标签：ios, uiscrollview, uipangesturerecognizer

我想`UIScrollView`通过`UIPanGestureRecognizer`. 滚动视图垂直滚动。我水平平移它。问题是如何检测`UIPanGestureRecognizer`滚动视图何时仍在滚动？？？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:01:21.353

**编辑：**您可以自定义`UIScrollView`并覆盖此方法：

```
#import "MyScrollView.h"

@implementation MyScrollView

- (BOOL)touchesShouldCancelInContentView:(UIView *)view
{
    return YES;
}

@end 
```

* * *

```
self.panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
self.panGesture.delegate = self;
[self.view addGestureRecognizer:self.panGesture];

- (void)handlePan:(UIGestureRecognizer *)gestureRecognizer
{
    if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        CGPoint offset = self.scrollView.contentOffset;
        offset.y = self.scrollView.contentSize.height/2;
        self.scrollView.contentOffset = offset;
    }
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    return YES;
} 
```

# xslt - 如何使用 XSLT 替换 XML 文件中的文本

> ID：13375840
> 
> 赞同：1
> 
> 时间：2012-11-14T09:10:33.747
> 
> 标签：xslt

我有一个 XML 文件和一个 XSLT 文件，如下所示

检查.xml

```
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
</catalog> 
```

检查.xsl

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" encoding="utf-8" indent="no"/>
<xsl:for-each select="/">
<xsl:choose>
      <xsl:when test="country='USA'">
         <xsl:copy-of select="CHK"/>
      </xsl:when>
      <xsl:otherwise>
         <xsl:copy-of select="*"/>
      </xsl:otherwise>
      </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

当我尝试对其进行转换时，出现以下错误

```
Error:XSLTProcessor::transformToXml() [<a href='xsltprocessor.transformtoxml'>xsltprocessor.transformtoxml</a>]: No stylesheet associated to this object 
```

我在这里尝试做的是检查值是否为“USA”，如果是，则将 USA 替换为“CHK”字符串。

如果我没有使用正确的语法，我没有找到我要去的地方。我是 XSLT 的新手，刚刚开始使用它。任何帮助是极大的赞赏！！！我期待的输出是

```
<catalog>
        <cd>
            <title>Empire Burlesque</title>
            <artist>Bob Dylan</artist>
            <country>**CHK**</country>
            <company>Columbia</company>
            <price>10.90</price>
            <year>1985</year>
        </cd>
        <cd>
            <title>Hide your heart</title>
            <artist>Bonnie Tyler</artist>
            <country>UK</country>
            <company>CBS Records</company>
            <price>9.90</price>
            <year>1988</year>
        </cd>
</catalog> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:38:19.637

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="country[. = 'USA']">
    <country>**CHK**</country>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Edited by XMLSpyÂ® -->
<catalog>
  <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
  <cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>9.90</price>
    <year>1988</year>
  </cd>
</catalog> 
```

**...产生所需的输出：**

```
<catalog>
  <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>**CHK**</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
  <cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>9.90</price>
    <year>1988</year>
  </cd>
</catalog> 
```

**解释：**

*   第一个模板是[`Identity Transform`](http://www.dpawson.co.uk/xsl/sect2/identity.html)- 它的工作是将源文档中的所有节点和属性按原样输出到结果文档。
*   第二个模板通过匹配`<country>`值为“USA”的任何元素来覆盖身份转换。在这种情况下，将创建一个新`<country>`元素并为其赋予所需的值。

我建议您查看[此链接](https://stackoverflow.com/questions/339930/any-good-xslt-tutorial-book-blog-site-online/341589#341589)以获取一些很棒的 XSLT 学习资源。

# c# - Win 8 RT路由参数

> ID：13375845
> 
> 赞同：3
> 
> 时间：2012-11-14T09:10:58.813
> 
> 标签：c#, xaml, windows-runtime

我必须通过不同的页面进行路由并在它们之间传递路由参数。我已经做到了，我正在传递参数，但我无权访问对象属性。

```
void itemClick(object sender, ItemClickEventArgs e)
        {

            this.Frame.Navigate(typeof(Views.SongPicker) , e.ClickedItem );
        } 
```

在另一页上，我将参数对象作为导航参数接收。

```
 protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
        {

        } 
```

我无权访问对象的属性。我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:20:43.313

尝试将对象转换为您的类型，例如：

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        var param = navigationParameter as MyType;
    } 
```

如果类型不可为空：

```
var param = (MyType)navigationParameter; 
```

# iphone - 一个接一个地执行方法，执行之间有停顿

> ID：13375846
> 
> 赞同：2
> 
> 时间：2012-11-14T09:11:03.573
> 
> 标签：iphone, objective-c, ios, xcode, method-call

新手 obj-c 问题。我正在为 Appstore 编写一个简单的 iPad 演示文稿。我的任务是实现几个方法一个接一个地执行，它们之间几乎没有停顿。主要结构如下所示：

*   查看负载
*   暂停两秒，然后执行method1
*   暂停两秒，然后执行method2
*   暂停两秒，然后执行 method3 等...

我从 -viewDidLoad 调用的第一种方法：

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(firstCountStarts) userInfo:nil repeats:NO]; 
```

这里一切正常，方法在视图加载后 2 秒开始。从method1内部，我尝试以相同的方式调用方法2，但它开始与method1同时执行。同样的方式触发了method3（从method2调用）和它们之后的所有方法都没有执行。我试图将所有这些方法放在 -ViewDidLoad 中并延迟调用它们：

```
 [self method1];
 [self performSelector:@selector(method2) withObject:nil afterDelay:2];
 [self performSelector:@selector(method3) withObject:nil afterDelay:4];
 etc... 
```

但是在method2调用所有方法之后没有执行。如果我正确理解线程中的问题。我需要使用 GCD 来执行不同队列中的方法吗？或者可能在其他方面有问题？

谢谢各位同事！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-14T09:18:50.540

您可以将这些添加到 NSOperation 队列中...

```
NSOperationQueue *queue = [NSOperationQueue new];

queue.maxConcurrentOperationCount = 1;

[queue  addOperationWithBlock:^{
    [self method1];
}];

[queue  addOperationWithBlock:^{
    [NSThread sleepForTimeInterval:2.0];
    [self method2];
}];

[queue  addOperationWithBlock:^{
    [NSThread sleepForTimeInterval:2.0];
    [self method3];
}];

... 
```

这将仅在前一个完成后运行每个，并为您设置 2 秒延迟。

不过要小心使用它来做 UI 的东西。这将在后台线程中运行，因此您可能需要处理它。

也许这可能会更好，您可以通过子类化 NSOperation 来做到这一点，但这需要做很多工作而没有太多好处。

从你想要的任何地方运行它，我建议将所有这些放入一个名为 setUpQueue 或其他东西的函数中。

然后从 viewWillAppear 或 viewDidLoad 或其他地方，按下按钮等......做......

```
[self setUpQueue]; 
```

您所要做的就是将东西添加到队列中，然后队列将自行管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T03:09:20.967

您可以使用单个计时器，并按照您想要执行的顺序围绕您想要执行的方法编写一个 switch 语句。例如

```
int turn = 0;
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(runmethod) userInfo:nil repeats:NO]; 
```

然后在运行方法中

```
switch(turn)
{
  case 0:
        // do method 1 stuff
        ++turn;
        break;
  case 1:
        // do method 2 stuff
        ++turn;
        break;
    .
    .
    .
}

NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(runmethod) userInfo:nil repeats:NO]; 
```

# bash - 当前活动记录器

> ID：13375847
> 
> 赞同：-2
> 
> 时间：2012-11-14T02:29:05.117
> 
> 标签：bash, cron, alert

有人知道每隔一小时左右询问我当前活动的应用程序（适用于 iOS 或 Mac）吗？我看到大量的应用程序可以让你记录你的活动，但没有一个使用弹出窗口/通知来主动询问你。

我找到了一个看起来很有前途的脚本（[source](http://www.terminally-incoherent.com/blog/2006/08/11/time-logging-script/)），但我在实现它时遇到了麻烦，因此它每小时重复一次：

```
#!/bin/bash
echo What are you doing right now?
read -e what
echo `date` - $what >> timelog.txt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T20:42:42.233

使用 zenity 获得图形对话框的改进（使用 GTK+）。对于 Mac OS [cocoaDialog](http://mstratman.github.io/cocoadialog/)可能是要使用的东西。

```
#!/bin/bash

while true
do
    input=$(zenity --text "What are you doing?" --entry --width 400)
    retval=$?
    case $retval in
    0)
    what=$input;;
    1)
    what="";;
    esac
    echo `date` - $what >> ~/Documents/timelog/timelog_`date +%F`.txt
    sleep 3600
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:13:35.240

您可以将整个事情包装在一个 while 循环中，并在询问后让它休眠 1 小时：

```
#!/bin/bash
while true
do
    echo What are you doing right now?
    read -e what
    echo `date` - $what >> timelog.txt
    sleep 3600
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T23:51:34.907

您可以将该脚本设置为 cron 作业。这是一个关于如何做的SE问题

[https://apple.stackexchange.com/questions/9373/how-do-i-run-a-cron-job-on-a-mac](https://apple.stackexchange.com/questions/9373/how-do-i-run-a-cron-job-on-a-mac)

# google-chrome - 如何使用 webkit-mask-image 使 CSS3 圆角隐藏 Chrome/Opera 中的溢出？

> ID：13375849
> 
> 赞同：0
> 
> 时间：2012-11-14T09:11:21.230
> 
> 标签：google-chrome, css, webkit, rounded-corners, image-masking

我在哪里可以生成这种类型的 CSS 来制作右下边框？？？

```
 -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
    } 
```

这几乎可行，但我需要更多圆角

这是我到目前为止的代码：

```
.container {
    width: 960px;
    height: 700px;
    background:#FFF;
    position:absolute;
    top: 0px;
    left: 50%;
    overflow:hidden;
    margin: 70px 0px 0px -480px;
    border: 0px solid #900;
    border-right: 15px solid #900;
    border-bottom: 15px solid #900;
    -webkit-border-radius-bottom-right: 100px;
    -moz-border-radius-bottomright: 100px;
    border-bottom-right-radius: 100px;
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
    z-index: 55;
}

.slideshow {
    position:relative;
    width: 960px;
    height: 700px;
    top: -1600px;
    left: 0px;
    z-index: 51;
} 
```

在除 Chrome 之外的所有设备上都运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:17:23.883

Chrome 有一个 Webkit 错误...

CSS边框半径没有在Webkit上修剪图像

错误报告...

[错误网络工具包](https://bugs.webkit.org/show_bug.cgi?id=30475)

这意味着，如果您有一个绝对位置的 div，其边框半径和溢出隐藏，则图像或里面的内容不尊重溢出。一种解决方案是将图像插入主 div 的背景图像中，它可以工作。

# java - 在存储过程中插入 Blob null 时参数的数量或类型错误

> ID：13375850
> 
> 赞同：1
> 
> 时间：2012-11-14T09:11:26.993
> 
> 标签：java, database, oracle, stored-procedures, jdbc

我在 oracle 数据库中有以下存储过程

```
 create or replace procedure cust_details(idValue    Custdetails.id_value%type,
                                                     idUser    Custdetails.id_user%type,
                                                     idType    Custdetails.id_type%type,
                                                     nickName  Custdetails.nickname%type,
                                                     imageData Custdetails.IMAGE%type) IS
  bene_id     number(10);
  current_seq number(10);
  isExist     number(2);
BEGIN

  select count(*)
    into isExist
    from iddetails
   where id_value = idValue;

  if isExist = 0 then
    select beneficiary_seq.nextval into current_seq from dual;
    insert into details
      (beneficiary_id, date_added)
    values
      (current_seq, sysdate);
    insert into Custdetails
      (beneficiary_id, id_user, nickname,image)
    valuesnumber 
      (current_seq, idUser, nickName,imageData);
    insert into iddetails
      (beneficiary_id, id_type, id_value)
    values
      (current_seq, idType, idValue);
  else
    select beneficiary_id
      into bene_id
      from iddetails
     where id_value = idValue;
    insert into Custdetails
      (beneficiary_id, id_user, nickname,image)
    values
      (bene_id, idUser, nickName,imageData);
  end if;
END;

--Custdetails.idValue is varchar2(40)
--Custdetails.IMAGE is Blob 
```

我从java类中调用它，如下所示：

```
 CallableStatement callableStatement = con.prepareCall("{CALL cust_details(?,?,?,?,?)}");
    callableStatement.setString(1, "9855154");
callableStatement.setString(2, "123");
callableStatement.setString(3, "sdsd");
callableStatement.setString(4, "ssdsd");
    byte [] imageData = l_rs.getBlob  (0); // setting bytes
    if(// if byte array has data){ 
        Blob imgDataBlob = con.createBlob();
        imgDataBlob.setBytes(1, imageData);
        callableStatement.setBlob(5, imgDataBlob);
    }
    else{
        // even this is giving same error i also tried OracleTypes.Blob
        callableStatement.setNull  (2,  java.sql.Types.BLOB); 
    }
        callableStatement.execute(); 
```

但是在 if 和 else 情况下调用此过程都会出现以下错误

> 引起：java.sql.SQLException：ORA-06550：第 1 行，第 7 列：PLS-00306：调用“CUST_DETAILS”时参数的数量或类型错误

知道我在这里做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:21:08.190

我有以下工作正常，我正在使用的驱动程序`Ojdbc14.jar`

```
CREATE OR REPLACE PROCEDURE my_proc (idvalue      NUMBER,
    imagedata     tobedeleted.img%TYPE
                                                )
IS
BEGIN
    INSERT INTO tobedeleted
      VALUES   (idvalue, imagedata
                  );
END my_proc; 
```

Java 代码

```
 ResultSet res = sta.executeQuery(
            "SELECT * FROM TOBEDELETED for update "); 
          while (res.next()) {
             myblob = res.getBlob("IMG");

          }       
    callablestatement = 
            conn.prepareCall("{CALL my_proc(?,?)}");
    callablestatement.setInt(1, 100);        
            if(myblob==null){            
        callablestatement.setNull(2,java.sql.Types.BLOB); 

    }
    else {
        byte[] chuck = {(byte)0x00, (byte)0x00, (byte)0x00,
                  (byte)0x00, (byte)0x00, (byte)0x00};
                myblob.setBytes(1,chuck);
    callablestatement.setBlob(2,myblob); 
    }
    int affectedRows = callablestatement.executeUpdate(); 
```

# matlab - 应该先进行哪个操作

> ID：13375856
> 
> 赞同：1
> 
> 时间：2012-11-14T09:11:49.137
> 
> 标签：matlab

我正在做我的matlab工作，问题是

**在 x 轴上剪切 0.8，然后旋转 45° (cc)**

如果我的观点是`[X] = [x;y]`

那么我应该先采取什么顺序，意味着如果剪切矩阵是`[S]`，旋转矩阵是`[R]`，我会这样做

`[Result] = [S] X [R] X [X]`

或者我需要这样做

`[Result] = [R] X [S] X [X]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:16:25.533

正如你所说，你正在做 [S] 和 [R] 的矩阵乘法。如您所知，矩阵乘法不能通勤，即您不能切换位置。

**正确的**

```
[Result] = [R] x [S] x [x] 
```

**错误的**

```
[Result] = [S] x [R] x [x] 
```

# asp.net - 使用 ASP.Net MasterPage

> ID：13375857
> 
> 赞同：0
> 
> 时间：2012-11-14T09:11:49.573
> 
> 标签：asp.net

我是 ASP.Net 的新手，我为我的网站和 3 个内容页面定义了一个 MasterPage，默认、登录和注册。在调试中，Masterpage 渲染了 DefaultPage。我想要的是 Masterpage 应该首先加载以呈现 LoginPage 而不是 defaultPage。任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:17:14.867

只需右键单击您的 login.aspx 并将其设置为启动页面..

# file-upload - 将数据写入数据库，包括图像

> ID：13375862
> 
> 赞同：0
> 
> 时间：2012-11-14T09:12:01.697
> 
> 标签：file-upload, asp.net-mvc-4, form-data

我有一个 mvc 4 项目，我需要将数据写入数据库，包括“创建”视图中的图像。

我找到了一些有关如何上传图像的示例。但是这些示例都没有一些额外的输入字段以及 html 文件上传控件。

让我想知道是否可以浏览到图像并填写其他字段并按“发送”按钮，并接收控制器中的所有数据，特别是此方法：

```
 [HttpPost]
 public ActionResult Create(FormCollection formCollection) 
 { 
  foreach (var key in formCollection.AllKeys)
  {
     if (key == "file")
     {
        foreach (string s in Request.Files)
        {
           HttpPostedFileBase file = Request.Files[s];
           if (file.ContentLength > 0)
           {
           }
        }
      }
   }
} 
```

这是视图：

```
 @using (Html.BeginForm("Create", "Item", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Item</legend>

        <div class="editor-label">
            Description:
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Description)
            @Html.ValidationMessageFor(model => model.Description)
        </div>
         <div class="editor-label">
            Image:
        </div>

        <input type="file" name="file" id="file" />

        <p>
            <input type="submit" value="send" />
        </p>
    </fieldset>
} 
```

`Request.Files`在这种情况下总是空的。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:01:06.987

您还应该能够使用强类型编辑模型来做到这一点：

```
public class MyDataEditModel
{
    public string Description { get; set; }
    public HttpPostedFileBase File { get; set; }
}

[HttpPost]
public ActionResult Create(MyDataEditModel model) 
{ 
    // is model.File null here?  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:18:22.893

您可以按照[本教程](http://yassershaikh.com/how-to-upload-and-display-an-image-using-html-beginform-in-razor-view-mvc-3/)学习如何在 ASP.NET MVC 中上传图像

这里的动作如下图所示。

```
[HttpPost]
public ActionResult Index(UserModel model, HttpPostedFileBase file)
{} 
```

与发布的文件一起，还发布了一个 UserModel，它从页面获取其他数据，这就是您想要的。

# iphone - 在标签中打印值时重叠

> ID：13375863
> 
> 赞同：0
> 
> 时间：2012-11-14T09:12:02.407
> 
> 标签：iphone, uilabel, sum

我想打印最后一个值的总和，但是下面的代码通过重叠打印显示标签中的所有值，所以我怎样才能只显示标签中的最后一个值总和

```
-(void)dataPrinting
{
int total=0;
for (int i = 0; i < [totalData count]; i++)
{
    total +=i;
}
UILabel * lbl=[[UILabel alloc]initWithFrame:CGRectMake(100,75, 200, 60)];
lbl.text=[NSString stringWithFormat:@"%d",total];
lbl.font=[UIFont fontWithName:@"Arial" size:60];
lbl.textColor=[UIColor whiteColor];
lbl.backgroundColor=[UIColor clearColor];
[scrollView addSubview:lbl];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:24:09.203

```
 -(void)dataPrinting
   {
 int total=0;
  for (int i = 0; i < [totalData count]; i++)
     {
     total += [totalData  objectAtindex:i];  /// you need to access value in the array
   }
UILabel * lbl=[[UILabel alloc]initWithFrame:CGRectMake(100,75, 200, 60)];
lbl.text=[NSString stringWithFormat:@"%d",total];
lbl.font=[UIFont fontWithName:@"Arial" size:60];
lbl.textColor=[UIColor whiteColor];
lbl.backgroundColor=[UIColor clearColor];
[scrollView addSubview:lbl];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:46:33.207

不确定“最后一个值的总和”是什么意思。但是，您可以使用*lastObject*访问数组的最后一个元素。

```
int total = [[totalData lastObject] intValue]; 
```

**更新：**

您在代码中所做的是将索引添加`i`到`total`. 请改用以下内容：total += [[totalData objectAtIndex:i] intValue];

如果您看到标签相互重叠，您可能会`dataPrinting`多次调用该方法。而且由于您不删除旧的，因此它们将保留。您创建标签的属性或给标签添加标签并重复使用相同的标签并简单地更改标签上的文本。

在您的标题中：

```
@property (strong, nonatomic) UILabel *totalLabel; 
```

在您的实施中：

```
-(UILabel)totalLabel
{
    if (_totalLabel == nil)
    {
        _totalLabel = [[UILabel alloc]initWithFrame:CGRectMake(100,75, 200, 60)];
        _totalLabel.font=[UIFont fontWithName:@"Arial" size:60];
        _totalLabel.textColor=[UIColor whiteColor];
        _totalLabel.backgroundColor=[UIColor clearColor];
        [scrollView addSubview:_totalLabel];
    }
    return _totalLabel;
}

-(void) dataPrinting
{
    int total=0;
    for (int i = 0; i < [totalData count]; i++)
    {
        total += [[totalData objectAtIndex:i] intValue];
    }
    self.totalLabel.text = [NSString stringWithFormat:@"%d",total];;
} 
```

# mvel - 如何为 MVEL 创建自定义 Orb 标签

> ID：13375868
> 
> 赞同：2
> 
> 时间：2012-11-14T09:12:27.880
> 
> 标签：mvel

我正在使用 MVEL 2.x 生成一些电子邮件，并且想知道是否可以创建自定义 Orb 标签。我在 stackoverflow 和 google 上搜索过，但找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:58:07.983

为了在模板的编译过程中添加新的 Orb 标签，您只需使用`org.mvel2.templates.TemplateCompiler.compileTemplate(String template, Map<String, Class> customNodes)`

`customNodes`将 orb 标签名称映射到节点类。例如`@encode{}`，是一个名称的球体标记，`encode`将由自定义节点类处理`HtmlEncodingNode`。

要查找有关该主题的更多信息，请直接转到代码（到 little doc）。这`org.mvel2.templates.TemplateCompiler.compileFrom`是 Orb 标签被识别的地方。

最好的问候，蒂姆。

# sql-server - 在存储过程中初始化输出参数

> ID：13375873
> 
> 赞同：4
> 
> 时间：2012-11-14T09:12:49.373
> 
> 标签：sql-server, stored-procedures

我有一个带有输出参数的存储过程，我用“0”初始化：

```
ALTER PROCEDURE dbo.SomeProcedure
    @someparam INT = 0 OUT
... 
```

但是，当过程在执行期间没有修改或设置该参数时，输出值为 NULL，而不是预期的“0”。

是否必须在程序代码中设置默认值

```
SET @someparam = 0; 
```

并避免在声明中初始化？

那么为什么 SQL Server 允许在声明输出参数时使用默认值呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T10:13:21.707

您显示的语法不是用于*初始化*，而是[*用于缺少参数的默认值*](http://msdn.microsoft.com/en-us/library/ms187926.aspx)：

> `default`参数的**默认**值。如果为参数定义了默认值，则可以在**不为该参数指定值的情况下**执行过程。

因此，应该清楚的是，如果您可以读取输出值，则一定是您为 @someparam 提供了一个参数，因此它不是“缺失”的。如果不是“缺失”，则不会为其分配默认值，因为它必须已经有一个值，即来自调用者框架的值（可能为 NULL）。QED。

以下代码显示了差异并举例说明了您看到的行为：

```
create procedure usp_test
    @p int = 0 output
as
    set @p += 1;
    select @p;
go

exec usp_test;
go

declare @unitialized int;
exec usp_test @unitialized output;
go 
```

# apache-flex - Flex 更改图表的 dataProvider

> ID：13375880
> 
> 赞同：0
> 
> 时间：2012-11-14T09:13:22.300
> 
> 标签：apache-flex

当我双击图表时，我想更改 dataProvider：

```
 public function myListener(e:ChartItemEvent):void {
    mainDataProvider = e.hitData.item.costsByNature;
    pieSeries.nameField="natureLabel";
    pieSeries.field="amount";
 } 
```

当我执行时，我得到一个错误：在 ProjectDTO 上找不到 amount 属性并且没有默认值。

以前的 dataProvider 是一个元素类型为 ProjectDTO 的 arrayCollection，但我想将其更改为元素类型为 CostByNatureDTO 的 arrayCollection。

CostByNatureDTO 具有数量作为属性

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:08:01.327

就个人而言，我会创建一个接口，这两个模型都会实现。例如，

```
public interface IFooBar {
  function get myLabel():String;
  function get myAmount():Number;
}

public class CostsByNature implements IFooBar {
  //your code here
  public var natureLabel:String;
  public var amount:String;

  public function get myLabel():String {
     return this.natureLabel;
  }

  public function get myAmount():Number {
    return this.amount;
  }
}

public class ProjectDTO implements IFooBar {
  //your code here
  public var projectLabel:String;
  public var projectAmount:String;

  public function get myLabel():String {
     return this.projectLabel;
  }

  public function get myAmount():Number {
    return this.projectAmount;
  }
} 
```

在您的饼图中，始终绑定到“myLabel”和“myAmount”。在您的饼图监听器中，在 dataProviders 之间切换。

```
public function myListener(e:ChartItemEvent):void {
    mainDataProvider = e.hitData.item.costsByNature;
 } 
```

祝你好运！

# java - 在 android 中使用 jni/ndk：UnsatisfiedLinking 错误和强制关闭应用程序

> ID：13375883
> 
> 赞同：2
> 
> 时间：2012-11-14T09:13:22.087
> 
> 标签：java, android, android-ndk, java-native-interface

我在 ndk/jni android 上试用 Hello World 程序。

这是我的java代码：

```
package com.example.myndkapp;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity {
    // load the library - name matches jni/Android.mk
    static {
        Log.d("TAG1","Before Load");
        System.loadLibrary("ndkfoo");
        Log.d("TAG2","After Load");
    }

    // declare the native code function - must match ndkfoo.c
    private native String invokeNativeFunction();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Log.d("TAG3","Set Content View Called");
        // this is where we call the native code
        try{
            String hello = invokeNativeFunction();
            Log.d("TAG4","InvokeFunc Called..");
            new AlertDialog.Builder(this).setMessage(hello).show();
        }catch(Exception e){
            e.printStackTrace();
        }

    }
} 
```

ndkfoo.c 代码：

```
#include <string.h>
#include <jni.h>

jstring Java_com_example_ndkfoo_MAinActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis) {
  return (*env)->NewStringUTF(env, "Hello from native code!");
} 
```

我的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# Here we give our module name and source file(s)
LOCAL_MODULE    := ndkfoo
LOCAL_SRC_FILES := ndkfoo.c

include $(BUILD_SHARED_LIBRARY) 
```

我的 AndroidMainfest.xml 文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myndkapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我收到错误 UnsatisfiedLinking Error 并且应用程序强制关闭。另外，我没有找到本机功能的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:18:33.267

您的包名称不完全相同。将 ndkfoo.c 中的名称更改为

```
 #include <string.h>
  #include <jni.h>

  jstring Java_com_example_myndkapp_MainActivity_invokeNativeFunction(JNIEnv* env, jobject      javaThis) {
  return (*env)->NewStringUTF(env, "Hello from native code!");
 } 
```

# bash - 如何在 bash 4.2 中使用二元运算符

> ID：13375884
> 
> 赞同：0
> 
> 时间：2012-11-14T09:13:29.663
> 
> 标签：bash

我尝试使用二元运算符来使用正则表达式功能，

```
 [[ wwwebhost@all =~ "^.+@.+$" ]] 
```

不在 bash 4.2 中工作，在 bash 3.2 中工作

但这适用于 bash 4.2（去掉双引号）：

```
 [[ wwwebhost@all =~ ^.+@.+$ ]] 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:45:18.003

`=~`在 bash 4 中（实际上我认为这是在 3.2 中添加的，但可能没有）中的or`==`运算符右侧的引号`[[`...`]]`告诉`bash`进行简单的字符串比较而不是正则表达式匹配。您可能认为这不会是显式的“嘿，做一个正则表达式匹配！”的情况。运算符`=~`，但它是。

# c++ - C++ 设置比较器上的 Visual Studio 断言失败

> ID：13375885
> 
> 赞同：1
> 
> 时间：2012-11-14T09:13:34.690
> 
> 标签：c++, visual-studio-2010, set, assertion

我的代码在我的 Visual Studio 2010 上存在一些问题，但在 DevCPP 上没有。继承人的情况，我在我的代码中使用 C++ STL`set`插入`pair<string, double>`，但我希望我`set`使用值而不是键对它们进行排序，所以我使用自定义比较器来实现这一点。

```
struct sortPairSecond
{
   bool operator()(const pair<string, double> &lhs, const pair<string, double> &rhs)
   {
    return lhs.second >= rhs.second;
   }
}; 
```

该代码在 DevCPP 中运行良好，但在使用 VS2010 的 xtree 上遇到了 Debug Assertion Failed。我做了一些调试，我意识到错误是由在自定义比较器中使用 >= 引起的，消除 = 使代码工作但不正确的结果，因为在我的程序中应该允许重复值。因此，任何人都可以在这件事上帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T09:28:12.220

您的 using`>=`和 not`>`可能是无效的，因为它需要是严格的排序，因此`op(a,b)`不能`op(b,a)`同时为真（但如果它们相等，它们会是真的）。

这只是一个断言错误，但`set`不能包含重复值。只需使用排序`vector`或您可以使用`multiset`（并使用'>'）

当然，我们知道第一个值是唯一的，我们可以在第二个值等于时扩展谓词来比较第一个值。这将保证您具有独特的价值，然后您仍然可以使用`std::set`.

```
struct sortPairSecond
{
   bool operator()(const pair<string, double> &lhs, const pair<string, double> &rhs) const
   {
    return (lhs.second > rhs.second) || (lhs.second == rhs.second && lhs.first > rhs.first) ;
   }
}; 
```

本质上，不要试图`std::set`通过试图操纵您的谓词来“破坏”预期的用途。

# ios - 从 NSArray 获取行

> ID：13375886
> 
> 赞同：1
> 
> 时间：2012-11-14T09:13:49.303
> 
> 标签：ios, json, nsarray, row

你好我得到一个看起来像这样的json：

```
 features: (
    {
    attributes =         {
        Gecontroleerd = Ja;
    };
    geometry =         {
        x = "5.968097965285907";
        y = "52.50707112779077";
    };
}
) 
```

从这段代码：

```
NSDictionary *root = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
NSArray *data = [root objectForKey:@"features"];
NSLog(@"features: %@", data );

for (NSArray *row in data) {
    NSString *latitude = row[5];
    NSString *longitude = row[7];
    NSString *crimeDescription = @"test";
    NSString *address = @"banaan"; 
```

你需要 x 值 5.968097965285907 纬度和 y 值 52.50707112779077 经度

但我得到这个错误：

```
 [__NSCFDictionary objectAtIndexedSubscript:]: unrecognized selector sent to instance   0x14831450
 2012-11-14 10:10:59.000 ArrestPlotter[6330:c07] *** Terminating app due to uncaught  exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary objectAtIndexedSubscript:]: unrecognized selector sent to instance 0x14831450'
 *** First throw call stack:
(0x1860012 0x1655e7e 0x18eb4bd 0x184fbbc 0x184f94e 0x2dbc 0x3b8f 0x1cc1e 0x16696b0 0xfa0035 0x17e3f3f 0x17e396f 0x1806734 0x1805f44 0x1805e1b 0x224a7e3 0x224a668 0x4a765c 0x25bd 0x24e5 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我需要选择哪一行？

我想唯一的事情是需要更改行号。或者也许应该有这样的东西：[1][5]。我不太确定这是如何工作的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:23:51.473

```
NSArray *data = [root objectForKey:@"features"];
NSLog(@"features: %@", data );

for (NSDictionary *dic in data) {
  NSDictionary geometry = [dic objectForKey:@"geometry"];
  // Do what you want..
  NSString *myAwesomeX = [geometry objectForKey:@"x"];
  NSString *myAwesomeY = [geometry objectForKey:@"y"];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T09:30:41.980

这里的问题是您试图将选择器消息发送到对象行，即内存中的*NSDictionary* (NSCFDictionary?) 对象，并且您正试图像*NSArray*一样管理它。

该方法`objectAtIndexedSubscript`（由 row[5] 和 row[7] 调用）存在于 NSDictionary 中，但不存在于 NSArray 中。

改变

```
for (NSArray *row in data) { 
```

经过

```
for (NSDictionary *row in data) { 
```

此外，您必须更改内部数据的管理，查看您的日志语句的结果并按照它进行操作。

我希望这个能帮上忙！

# uilabel - iOS slider to change a color changes wrong label

> ID：13375894
> 
> 赞同：0
> 
> 时间：2012-11-14T09:14:22.063
> 
> 标签：uilabel, uistoryboard, uislider, uicolor, rgba

Am using Xcode 4.5, targeting iOS5 and above. I am updating an app, using Storyboard for all scenes. Have a previous XIB and controller that I converted, but it is not functioning the same way. The controller allows changing the color of text and creating new colors. Creating new RGB colors relies on 3 Horizontal Sliders to change a swatch of color and the corresponding RGB values on 3 separate labels, before saving the new color. The sliders are Value Changed Sent Events and are hooked up to one action. The issue: when I change any of the sliders, ONLY the red label and red color value. I've tried changing the individual cases for the sliders into separate actions, and moving the setPreviewImage into a method of its own, but then, it does not change the swatch. Any help would be greatly appreciated. Thanks in advance.

```
-(IBAction)RGBSliderChange:(UISlider *)sender {
   switch ([sender tag])
  {
      case 0: {
         self.rLabel.text = [NSString stringWithFormat:@"%d", (int)[sender value]];
         break;
      }
      case 1: {
         self.gLabel.text = [NSString stringWithFormat:@"%d", (int)[sender value]];
         break;
      }
      case 2: {
         self.bLabel.text = [NSString stringWithFormat:@"%d", (int)[sender value]];
         break;
      }
      default:
         break;
  }
      self.colorPreviewImage.backgroundColor = [UIColor colorWithRed:(CGFloat)[self.rLabel.text floatValue]/256
           green:(CGFloat)[self.gLabel.text floatValue]/256
           blue:(CGFloat)[self.bLabel.text floatValue]/256
           alpha:1.0];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:39:40.637

I have solved this issue. It turns out that I did not have the tag set for each slider and label. They were all set to 0, hence any change only affected the Red color label. Setting each slider and label to a different tag solved the problem! Cheers!

# javascript - 选择某些元素时，slideToggle 或任何 jquery 动画不起作用

> ID：13375895
> 
> 赞同：1
> 
> 时间：2012-11-14T09:14:27.713
> 
> 标签：javascript, jquery, html, css

当像这样从页面中选择元素时：

```
$('.offers')[count - 1].slideToggle(500); 
```

slideToggle 停止与任何其他动画一起工作，但这确实有效：

```
$('.offers')[count - 1].style.display = 'block'; 
```

所以元素被正确地拉出，但 jQuery 动画对它们不起作用。

任何帮助将不胜感激。

干杯，

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:21:37.483

那是因为您将 jQuery 对象转换为 DOM Element 对象，您可以使用[`eq`](http://api.jquery.com/eq/)方法来代替：

```
$('.offers').eq(count-1).slideToggle(500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:19:56.013

```
$('.offers')[count - 1] 
```

这不会返回 jQuery 对象，而只会返回 HTML 元素。您需要再次将其包装在 jQuery 对象中，如下所示：

```
$($('.offers')[count - 1]).slideToggle(500); 
```

# c# - SignalR C# 客户端 407 需要代理身份验证

> ID：13375897
> 
> 赞同：4
> 
> 时间：2012-11-14T09:14:45.950
> 
> 标签：c#, winforms, signalr, signalr.client

我正在尝试构建一个 C# SignalR 应用程序（服务器上的控制台应用程序，客户端上的 winforms 应用程序），当客户端和服务器都在同一台 PC 上时它工作得很好（在 Visual Studio 中），但是当我部署服务器并将客户端重新指向服务器，我在尝试启动时收到“需要 407 代理身份验证”异常。

这是我的代码...

```
 var _connection = new HubConnection("http://www.redacted.com:8088/");
        var _hub = _connection.CreateProxy("MyHub");
        _connection.Start().ContinueWith(task =>
        {
            if (task.IsFaulted)
                MessageBox.Show(string.Format("Could not connect - {0}", task.Exception.ToString()));
        }).Wait(); 
```

我注意到 HubConnection 有一个 Credentials 属性，所以我想我会尝试替换一些在处理代理时用于 WebServices 的代码（如下所示，我只是发出一个 HTTP 请求，然后获取代理设置和凭据），但我得到了同样的例外。

```
 var _connection = new HubConnection("http://www.redacted.com:8088/");

        var req = (HttpWebRequest)WebRequest.Create("http://www.google.com");
        var proxy = new WebProxy(req.Proxy.GetProxy(req.RequestUri).AbsoluteUri) {UseDefaultCredentials = true};
        _connection.Credentials = proxy.Credentials;

        var _hub = _connection.CreateProxy("MyHub");
        _connection.Start().ContinueWith(task =>
        {
            if (task.IsFaulted)
                MessageBox.Show(string.Format("Could not connect - {0}", task.Exception.ToString()));
        }).Wait(); 
```

这是我为客户所做的一些工作所必需的，他们希望他们的本地 PC 能够从公司外部托管的远程系统接收消息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T11:09:33.977

尝试设置 DefaultWebProxy：

```
WebProxy wproxy = new WebProxy("new proxy",true);
wproxy.Credentials = new NetworkCredential("user", "pass");
WebRequest.DefaultWebProxy = wproxy; 
```

# asp.net-mvc-3 - 在 nhibernate 中对整数或小数列进行排序

> ID：13375898
> 
> 赞同：1
> 
> 时间：2012-11-14T09:14:55.380
> 
> 标签：asp.net-mvc-3, nhibernate

我正在尝试对十进制或整数列进行排序。但是在排序升序零时排在最后。

代码是：

```
criteria.AddOrder(Order.Asc(Projections.Cast(NHibernateUtil.Decimal,  Projections.Property("cloumn1"))))); 
```

输出：

```
35342860
36870852
87654321
213123213
0
0 
```

代码有问题吗？或者什么是解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:21:31.797

这些很可能是空值。您可以考虑使用条件限制或使其成为默认值为 0 的不可为空的列，这似乎就是您所追求的。

有条件的限制是这样的

```
.AddOrder
    (
        Order.Asc
        (
            Projections.Conditional
            (
                Restrictions.IsNull("cloumn1"),
                Projections.Constant(1),
                Projections.Constant(0)
            )
        )
    ) 
```

如果您按第一个顺序输入，会将空值放在顶部并显示为 0

# java - 使用 solrj 和 schema.xml 将实体添加到 solr

> ID：13375899
> 
> 赞同：0
> 
> 时间：2012-11-14T09:14:55.880
> 
> 标签：java, solr, solrj

我想将实体添加到文档中，就像您可以使用数据配置一样。目前，我正在将文档的每一页作为单个文档进行索引。

现在 ：

```
<solrDoc>
<id>1</id>
<docname>test.pdf</docmname>
<pagenumber>1</pagenumber>
<pagecontent>blablabla</pagecontent>
</solrDoc>

<solrDoc>
<id>2</id>
<docname>test.pdf</docmname>
<pagenumber>2</pagenumber>
<pagecontent>blablabla</pagecontent>
</solrDoc> 
```

如您所见，与文档相关的数据存储了 x 页次。我想得到这样的文件：

```
<doc>
<id>1</id>
<docname>test.pdf</docmname>
<pageEntries> //multivaluefield
<pageEntry><pagenumber>1</pagenumber><pagecontent>blablabla</pagecontent></pageEntry>
<pageEntry><pagenumber>2</pagenumber><pagecontent>blablabla</pagecontent></pageEntry>
</pageEntries>
</doc> 
```

**我不知道如何制作类似 pageEntry 的东西。我看到 solr 可以从数据库中导入实体，但我想知道如何做同样的事情？**（或类似的东西）

我正在使用 solr 3.6.1。页面提取是我自己使用pdfbox完成的。

Java代码：

```
SolrInputDocument solrDoc = new SolrInputDocument();
solrDoc.setField("id", 1);
solrDoc.setField("filename", "test");
            for (int p : pages) {
                solrDoc.addField("page", p);
            }
            for (String pc : pagecont) {
                solrDoc.addField("pagecont", pc);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:57:03.530

如果提取是由您执行的，您可以合并所有页面并将其作为单个 Solr 文档提供，其中 pagenumber 和 pagecontent 是多值字段。

您可以对所有页面使用相同的 id（id 不是架构定义中的主要字段），并使用 Grouping ( [Field Collapsing](http://wiki.apache.org/solr/FieldCollapsing) ) 对文档的结果进行分组。

# json - 从 GWT 到 Spring MVC 控制器的 JSON 消息发布

> ID：13375901
> 
> 赞同：2
> 
> 时间：2012-11-14T09:15:04.683
> 
> 标签：json, spring, gwt, post, controller

我正在尝试将一条 JSON 消息从 GWT 发布到 Spring MVC 框架中的控制器。spring 控制器正在接收来自 GWT 的请求，但是当我打印出请求内容长度和 request.toString() 时，内容长度显示为 0，并且 request.toString() 的输出没有任何内容。

**以下是我的代码和输出：**

以下是我执行 JSON 消息发布的 GWT 代码：

```
@UiHandler("saveButton")
void onClick(ClickEvent e) {

    UserAddJSO jso = (UserAddJSO)JavaScriptObject.createObject().cast();
    jso.setFirstName("Alex");
    jso.setLastName("Cheng");

    RequestBuilder builder = new RequestBuilder(RequestBuilder.POST, "addUser.aj");
    builder.setHeader("Content-Type", "application/json");
    builder.setRequestData(new JSONObject(jso).toString());
    System.out.println("request data :"+builder.getRequestData());

    try
    {
        builder.sendRequest(null, new RequestCallback()
        {
            public void onError(Request request, Throwable exception)
            {
                Window.alert("on error");
            }
            public void onResponseReceived(Request request, Response response)
            {
                Window.alert("response received :"+response.getStatusCode());
                Window.alert(response.getText());
            }
        });
    }
    catch (RequestException excp)
    {
        Window.alert("exception catched");
    }
} 
```

从上面的代码中，您可以看到我在请求数据上打印了一个 json 字符串。

以下是我的 Spring 控制器：

```
@RequestMapping(value = "**/addUser.aj", method = RequestMethod.POST, produces = "application/json")
@ResponseBody
public List<UserAddDTO> getPostStocks(HttpServletRequest request, HttpServletResponse response) throws IOException
{
    List<UserAddDTO> userDTO = new ArrayList<UserAddDTO>();

    JSONObject jObj;
    jObj = new JSONObject(request.getParameterMap());
    System.out.println(jObj.toString());
    System.out.println("xxxxxxxxxxxxx "+request.toString());
    System.out.println("content type :"+request.getContentType());
    System.out.println("inside post method");

    return userDTO;
} 
```

以下是上述打印输出的输出：

```
request data :{"firstName":"Alex", "lastName":"Cheng"}
content type :application/json
content length :0
inside post method
{}
xxxxxxxxxxxxx POST /addUser.aj HTTP/1.1
Accept: */*
Referer: http://127.0.0.1:8888/AlliumApp.html?gwt.codesvr=127.0.0.1:9997
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; OfficeLiveConnector.1.3; OfficeLivePatch.0.0; Tablet PC 2.0; BRI/2)
Accept-Encoding: gzip, deflate
Host: 127.0.0.1:8888
Connection: Keep-Alive
Content-Type: application/json
Content-Length: 0
Cache-Control: no-cache 
```

从上面的输出中，您可以看到请求中包含 JSON 消息。但是当它到达控制器时，JSON 消息不再存在。那么我在为 json 消息发布和接收做正确的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:36:43.510

尝试这个：

POST 方法

```
builder.setRequestData("jsonParam=" + new JSONObject(jso).toString()); 
```

控制器：

```
@RequestMapping(value = "**/addUser.aj", method = RequestMethod.POST, produces =       "application/json")
@ResponseBody
public List<UserAddDTO> getPostStocks(HttpServletRequest request, HttpServletResponse response, @RequestParam("jsonParam") String jsonParam) {
    ...
    JSONObject jObj;
    jObj = new JSONObject(jsonParam);
} 
```

获取方法：

```
RequestBuilder builder = new RequestBuilder(RequestBuilder.GET,
                              "addUser.aj?jsonParam=" + new JSONObject(jso).toString()); 
```

在你的控制器中：

```
@RequestMapping(value = "**/addUser.aj", method = RequestMethod.GET, produces =   "application/json")
@ResponseBody
public List<UserAddDTO> getPostStocks(HttpServletRequest request, HttpServletResponse response, @RequestParam("jsonParam") String jsonParam) {
    ...
    JSONObject jObj;
    jObj = new JSONObject(jsonParam);
} 
```

# java - Java 序列化（X509CertificateObject）

> ID：13375906
> 
> 赞同：1
> 
> 时间：2012-11-14T09:15:19.830
> 
> 标签：java, serialization, apache-commons, bouncycastle, x509

我正在尝试`X509CertificateObject`使用`org.apache.commons.lang3.SerializationUtils`. 显然，反序列化对象的类型 ( `sun.security.x509.X509CertImpl`) 与原始序列化对象 ( `org.bouncycastle.jce.provider.X509CertificateObject`) 不同。因此铸造失败。我究竟做错了什么？

```
public static void test(X509CertificateObject certObj) {
    byte[] serializedObj;
    Object deSerializedObj;
    X509CertificateObject deSerializedCertObj;
    X509Certificate deSerializedCert;

    System.out.println("certObj type: " + certObj.getClass().getName());
    serializedObj = SerializationUtils.serialize(certObj);
    deSerializedObj = SerializationUtils.deserialize(serializedObj);
    System.out.println("deSerializedObj type: " + deSerializedObj.getClass().getName());
    deSerializedCert = (X509Certificate) deSerializedObj;
    System.out.println("deSerializedCert type: " + deSerializedCert.getClass().getName());
    deSerializedCertObj = (X509CertificateObject) deSerializedObj;
    System.out.println("deSerializedCertObj type: " + deSerializedCertObj.getClass().getName());
} 
```

结果是：

```
certObj type: org.bouncycastle.jce.provider.X509CertificateObject
deSerializedObj type: sun.security.x509.X509CertImpl
deSerializedCert type: sun.security.x509.X509CertImpl 
```

最后在

```
java.lang.ClassCastException: sun.security.x509.X509CertImpl cannot be cast to org.bouncycastle.jce.provider.X509CertificateObject
at Test.test(Test.java:1010)
at Test.main(Test.java:153) 
```

这是因为 的上层类`X509CertificateObject`是`X509Certificate`抽象的和/或因为`X509CertificateObject`没有定义自己的`serialVersionUID`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:18:00.933

只需转换为`java.security.cert.X509Certificate`，所有其他类都应该扩展。你当然不应该期待或使用`sun.*`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:07:27.000

我终于找到了解决方法/解决方案。Java 序列化问题似乎是由于 BC 和 Java JCE 之间的冲突。我现在将[XStream](http://xstream.codehaus.org/)与A [​​pache Commons Codec](http://commons.apache.org/codec/)结合使用：

```
import org.apache.commons.codec.binary.StringUtils;
import com.thoughtworks.xstream.XStream;

public static byte[] serializeToXML(Object obj, XStream xStreamConfig)
    throws Exception
{
    XStream xstream;
    String certObjString;
    byte[] certObjByte;

    if(xStreamConfig == null) {
        xstream = new XStream();
    } else {
        xstream = xStreamConfig;
    }

    certObjString = xstream.toXML(obj);

    certObjByte = StringUtils.getBytesUtf8(certObjString);

    return certObjByte;
}

public static Object deserializeFromXML(byte[] objectByteArray, XStream xStreamConfig)
{
    String objectString;
    Object object;
    XStream xstream;

    if(xStreamConfig == null) {
        xstream = new XStream();
    } else {
        xstream = xStreamConfig;
    }

    objectString = StringUtils.newStringUtf8(objectByteArray);

    object = xstream.fromXML(objectString);

    return object;
} 
```

# java - 如何让 DeckPanel 像从左向右滑动一样动画？

> ID：13375907
> 
> 赞同：1
> 
> 时间：2012-11-14T09:15:26.460
> 
> 标签：java, gwt

我将使用[DeckPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/DeckPanel.html)在两个视图之间提供过渡动画。

但是，当我移动视图时，只是从下到上或从上到下移动。

我可以让视图移动吗`from left to right`？`from right to left`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:51:53.233

我认为使用`DeckPanel`.
您必须继承`DeckPanel`并覆盖该`showWidget()`方法以支持新的动画模式。或者，您可以使用`DeckLayoutPanel`. 它有一个设置动画方向的选项。有关更多详细信息，请参见[此处](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/DeckLayoutPanel.html#setAnimationVertical%28boolean%29)。

# r - 如何在 Iris 数据集上计算混淆矩阵？

> ID：13375908
> 
> 赞同：5
> 
> 时间：2012-11-14T09:15:28.223
> 
> 标签：r, lda

数据集：Iris 如何为 LDA（线性判别分析）模型计算数据集上的混淆矩阵？

```
>iris.lda = lda(Species ~ . , data = iris)

>table(predict(iris.lda, type="class"), iris$Species)
Error in sort.list(y) : 'x' must be atomic for 'sort.list'
Have you called 'sort' on a list? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T09:22:34.920

试试这个

```
library(MASS)
iris.lda <- lda(Species ~ . , data = iris)
table(predict(iris.lda, type="class")$class, iris$Species)

          setosa versicolor virginica
  setosa         50          0         0
  versicolor      0         48         1
  virginica       0          2        49 
```

# android - 我在哪里可以找到类似 MBProgressHUD 之类的库，适用于 ios，但适用于 android？

> ID：13375909
> 
> 赞同：3
> 
> 时间：2012-11-14T09:15:32.437
> 
> 标签：android, android-progressbar

对于 iOS，我使用 MBProgressHUD 显示进度指示器，我喜欢它。

对于 android，我使用标准进度对话框，但我想创建一些带有微调器的漂亮进度条，就像在 ios 中一样。

我想加载这样的图像![ios 微调器](../Images/be888733fc2f3799960ebf5c381aa701.png)

如果您有任何相关信息，请回答。

对不起我的英语，不是我的母语。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T09:17:56.240

您可以使用 ProgressDialog 以这种方式执行此操作：

```
dialog = ProgressDialog.show(MainSite.this, null, "Loading.... Please Wait..."); 
```

android 开发者声明：http: [//developer.android.com/reference/android/app/ProgressDialog.html](http://developer.android.com/reference/android/app/ProgressDialog.html)

还有一个例子： [http ://thedevelopersinfo.wordpress.com/2009/10/16/showing-progressdialog-in-android-activity/](http://thedevelopersinfo.wordpress.com/2009/10/16/showing-progressdialog-in-android-activity/)

# wpf - 从 MFC 和键盘事件处理程序弹出的 WPF 窗口对话框

> ID：13375911
> 
> 赞同：1
> 
> 时间：2012-11-14T09:15:43.247
> 
> 标签：wpf, mfc

我有一些 MFC 应用程序（本机 C++），在某些情况下会弹出 WPF 窗口对话框。当我在 MFC 应用程序上按 F1 时，我会弹出一些帮助文件。当显示 WPF 对话框并且用户按下 F1 时，我还需要弹出一些帮助文件（MFC 中的其他帮助文件）。

所以我在 WPF 对话框上添加了键盘事件 - 它工作正常。问题是当我按下 F1 时，两个帮助文件都跳了起来……WPF 对话框和 MFC 应用程序。

我将 MFC 应用程序定义为 WPF 对话框的所有者 - 但这对我没有帮助......

该怎么办 ？

谢谢

# linux - urllib.urlopen() 给出套接字错误：名称或服务在 python2.7 上未知

> ID：13375912
> 
> 赞同：1
> 
> 时间：2012-11-14T09:15:53.167
> 
> 标签：linux, python-2.7, urlopen

我才刚刚开始使用和学习 Python，所以问这个问题似乎有些天真。在我的 Linux 系统上，如果我尝试使用来获取网页，`urllib.urlopen()`则会出现错误

```
Traceback (most recent call last):  
  File "<stdin>", line 1, in <module>  
  File "/usr/lib/python2.7/urllib.py", line 86, in urlopen  
    return opener.open(url)  
  File "/usr/lib/python2.7/urllib.py", line 207, in open  
    return getattr(self, name)(url)  
  File "/usr/lib/python2.7/urllib.py", line 344, in open_http  
    h.endheaders(data)  
  File "/usr/lib/python2.7/httplib.py", line 954, in endheaders  
    self._send_output(message_body)  
  File "/usr/lib/python2.7/httplib.py", line 814, in _send_output  
    self.send(msg)  
  File "/usr/lib/python2.7/httplib.py", line 776, in send
    self.connect()   
  File "/usr/lib/python2.7/httplib.py", line 757, in connect  
    self.timeout, self.source_address)  
  File "/usr/lib/python2.7/socket.py", line 553, in create_connection  
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):  
IOError: [Errno socket error] [Errno -2] Name or service not known  
>>> 
```

如果我尝试在我的 Windows 7 系统中安装的 Python 2.7 中执行相同的操作，它可以正常工作。
由于我是新手，我很难诊断问题。我试图研究它，但仍然没有任何答案。

所以我的问题是：

1.  `urlopen()`在那里工作但在 Linux 上没有 的 Windows 系统有什么不同。
2.  需要做些什么来确保它`urlopen()`在 Linux 系统上工作。它对我来说很有必要，因为我正在开发的程序有一些 bash 命令调用，并且该程序广泛依赖于`urllib`.

# sql-server-2008 - 使用循环游标更新表

> ID：13375918
> 
> 赞同：2
> 
> 时间：2012-11-14T09:16:17.747
> 
> 标签：sql-server-2008

为了帮助理解，我有一张这样的表格：

```
itemcode itemname icode serialnum
1        A        10    0
2        B        10    0
3        C        10    0
4        D        11    0
5        E        13    0
6        F        20    0
7        G        20    0 
```

我希望在循环游标的帮助下使用单个更新查询的结果如下表所示：

```
itemcode itemname icode serialnum
1        A        10    1
2        B        10    2
3        C        10    3
4        D        11    1
5        E        13    1
6        F        20    1
7        G        20    2 
```

项目代码是此表中的主键。生成序列号背后的逻辑是，每当 icode 更改序列号时，序列号就会重置为 1。如果有人可以提供解决方案，我需要一个更新查询来借助游标更新表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:22:18.263

[SQL小提琴](http://sqlfiddle.com/#!3/ed64f/1)

**MS SQL Server 2008 架构设置**：

```
create table Item
(
  itemcode int,
  itemname char(1),
  icode int,
  serialnum int
)

insert into Item values
(1, 'A', 10, 0),
(2, 'B', 20, 0),
(3, 'C', 11, 0),
(4, 'D', 10, 0),
(5, 'E', 20, 0),
(6, 'F', 10, 0),
(7, 'G', 13, 0) 
```

**查询 1**：

```
update I
set serialnum = rn
from
  (
    select serialnum,
           row_number() over(partition by icode order by itemcode) as rn
    from Item
  ) I

select *
from Item 
```

**[结果](http://sqlfiddle.com/#!3/ed64f/1/0)**：

```
| ITEMCODE | ITEMNAME | ICODE | SERIALNUM |
-------------------------------------------
|        1 |        A |    10 |         1 |
|        2 |        B |    20 |         1 |
|        3 |        C |    11 |         1 |
|        4 |        D |    10 |         2 |
|        5 |        E |    20 |         2 |
|        6 |        F |    10 |         3 |
|        7 |        G |    13 |         1 | 
```

# ****更新****

**使用游标而不是不使用游标的版本。**

 **[SQL小提琴](http://sqlfiddle.com/#!3/ed64f/2/0)

```
declare @itemcode int
declare @rn int

declare ItemCursor cursor local static forward_only read_only for 
select itemcode,
       row_number() over(partition by icode order by itemcode) as rn
from Item

open ItemCursor

fetch next from ItemCursor
into @itemcode, @rn

while @@fetch_status = 0
begin
  update Item
  set serialnum = @rn
  where itemcode = @itemcode

  fetch next from ItemCursor
  into @itemcode, @rn
end

close ItemCursor
deallocate ItemCursor 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T09:24:02.260

因此，您需要每个 icode 组的序列号。然后你可以[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)使用`PARTITION BY icode`：

```
WITH CTE AS
(
  SELECT itemcode, itemname, icode, serialnum,
     ,   ROW_NUMBER() OVER (PARTITION BY icode ORDER BY itemcode) AS RN
  FROM dbo.TableName 
)
UPDATE CTE SET serialnum = RN; 
```

如果您希望在每次更新时重新计算它，您可以使用触发器：

```
CREATE TRIGGER dbo.TableName_Updated
ON dbo.TableName 
FOR UPDATE /* Fire this trigger when one or multiple rows are UPDATEd */
AS BEGIN
    WITH CTE AS
    (
      SELECT itemcode, itemname, icode, serialnum,
         ,   ROW_NUMBER() OVER (PARTITION BY icode ORDER BY itemcode) AS RN
      FROM dbo.TableName t INNER JOIN INSERTED i 
        ON t.itemcode = i.itemcode
    )
    UPDATE CTE SET serialnum = RN
END 
```**

# unit-testing - 在单元测试中编译 JSF 2 facelets 以确保正确性

> ID：13375921
> 
> 赞同：5
> 
> 时间：2012-11-14T09:16:24.020
> 
> 标签：unit-testing, jsf, jsf-2, facelets, mojarra

我正在尝试以编程方式使用 Mojarra JSF 2 编译器，以检查任何页面的 xhtml 的正确性。

我到目前为止，但编译器不会为特定标签库中不存在的标签出错。它执行标准的 XML 命名空间检查，但如果说 rich:spacer 存在，它应该会出错（它在 Richfaces 4.x 中被删除）。在运行时，确实会进行此检查。

有什么想法吗？这是我的代码：

```
@RunWith( PowerMockRunner.class )
@PrepareForTest( { WebConfiguration.class, FacesContext.class } )
public class XhtmlValidatorTest
{

    @Test
    public void test() throws IOException
    {
        WebConfiguration webConfiguration = PowerMock.createMock( WebConfiguration.class );
        PowerMock.mockStatic( WebConfiguration.class );
        WebConfiguration.getInstance();
        PowerMock.expectLastCall().andReturn( webConfiguration ).anyTimes();

        FaceletsConfiguration faceletsConfiguration = PowerMock.createMock( FaceletsConfiguration.class );
        webConfiguration.getFaceletsConfiguration();

        PowerMock.expectLastCall().andReturn( faceletsConfiguration ).anyTimes();
        faceletsConfiguration.isProcessCurrentDocumentAsFaceletsXhtml(EasyMock.isA( String.class ) );
        PowerMock.expectLastCall().andReturn(true).anyTimes();
        faceletsConfiguration.isConsumeComments( EasyMock.isA( String.class) );
        PowerMock.expectLastCall().andReturn(false).anyTimes();
        faceletsConfiguration.isConsumeCDATA( EasyMock.isA( String.class ) );
        PowerMock.expectLastCall().andReturn(false).anyTimes();

        webConfiguration.isOptionEnabled(BooleanWebContextInitParameter.EnableMissingResourceLibraryDetection);
        PowerMock.expectLastCall().andReturn( false ).anyTimes();
        webConfiguration.isOptionEnabled(BooleanWebContextInitParameter.EnableCoreTagLibraryValidator );
        PowerMock.expectLastCall().andReturn( true ).anyTimes();

        FacesContext facesContext = PowerMock.createMock( FacesContext.class );
        PowerMock.mockStatic( FacesContext.class );
        FacesContext.getCurrentInstance();
        PowerMock.expectLastCall().andReturn( facesContext ).anyTimes();

        facesContext.isProjectStage( ProjectStage.Development );
        PowerMock.expectLastCall().andReturn( false ).anyTimes();

        Application application = PowerMock.createMock( Application.class );
        facesContext.getApplication();
        PowerMock.expectLastCall().andReturn( application ).anyTimes();

        application.getExpressionFactory();
        PowerMock.expectLastCall().andReturn( new org.jboss.el.ExpressionFactoryImpl() ).anyTimes();

        PowerMock.replayAll();

        long refreshPeriod = -1;
        com.sun.faces.facelets.compiler.Compiler compiler = new SAXCompiler();
        compiler.setValidating( true );
        System.out.println( "Compiler.isValidating() " + compiler.isValidating() );

        FaceletCache cache = new UnittestFaceletCacheFactory().getCache( refreshPeriod );
        ResourceResolver resolver = new ResourceResolver()
                {
                    @Override
                    public URL resolveUrl(String path)
                    {   
                        URL url = null;
                        try
                        {
                            url = new URL( BASE_PATH + path );
                        }
                        catch (MalformedURLException e)
                        {
                            throw new RuntimeException( e );
                        }
                        return url;
                    }
                }; 

        DefaultFaceletFactory defaultFaceletFactory = new DefaultFaceletFactory( compiler, resolver, refreshPeriod, cache );
        File file = new File( "WebContent" );
        File[] files = file.listFiles();
        for( File xhtmlFile : files )
        {
            if( xhtmlFile.isFile() )
            {
                String name = xhtmlFile.getName();
                if( name.endsWith(".xhtml" ) )
                {
                   System.out.println( "compiling: " + name );
                   defaultFaceletFactory.getFacelet( name );
                }
            }
        }
    } 
```

代码中使用的 facelet 缓存工厂是一个 hack：

```
package com.sun.faces.facelets.impl;

import javax.faces.view.facelets.FaceletCache;

public class UnittestFaceletCacheFactory
{
    public FaceletCache getCache( long refreshPeriod )
    {
        return new DefaultFaceletCache( refreshPeriod );
    }
} 
```

# php - 命名空间如何在 PHP 中工作

> ID：13375926
> 
> 赞同：0
> 
> 时间：2012-11-14T09:16:48.630
> 
> 标签：php, namespaces

我正在尝试实例化一个使用命名空间的类。

```
<?php
namespace CFPropertyList;   

require_once('CFPropertyList/CFPropertyList.php');

$plist = new CFPropertyList();
?> 
```

那行得通！

但是当我尝试将该代码放入我的班级时，我会遇到语法错误。我不能使用“命名空间 CFPropertyList；” 在课堂上？

```
 <?php
class Plist{
    public function test(){
       namespace CFPropertyList;    

       require_once('CFPropertyList/CFPropertyList.php');

       $plist = new CFPropertyList();
   }

}
?> 
```

更新：

感谢所有我得到这个工作。

```
<?php
namespace CFPropertyList;
require_once('CFPropertyList/CFPropertyList.php');

 class Plist{
    public function test(){
      //some code
    }
 }

} 
```

但是我自己的类现在在命名空间中吗？对不起菜鸟问题。我做不到。

```
 $plist = new Plist;
   $plist->test(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:19:21.783

您的命名空间应该在您的类之前声明，因此该类将属于该命名空间：

plist.php

```
 <?php
  namespace CFPropertyList; 

  class Plist{
      public function test() {
          echo 'Test';
      }
  }
?> 
```

其他.php

```
 <?php
  require_once('plist.php');

  $plist = new CFPropertyList::Plist();
  $plist.test();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:18:22.767

您必须将命名空间定义放在类定义之外。（除了你的类定义似乎很乱。你没有任何类方法吗？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:22:15.900

从[`Defining namespaces`](http://www.php.net/manual/en/language.namespaces.definition.php)

> 命名空间是使用命名空间关键字声明的。包含命名空间的文件必须在任何其他代码之前在文件顶部声明命名空间 - 有一个例外：declare 关键字。

所以你必须在文件的顶部声明它。

# jquery - 如何将 jQuery UI 选项卡设置为垂直？

> ID：13375930
> 
> 赞同：0
> 
> 时间：2012-11-14T09:17:01.403
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery Ui 选项卡：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

但我想这样设置标签，我该怎么做？

![在此处输入图像描述](../Images/966734f12859f58f496b7f32f8db3ba8.png)

`what i tired is` ：http: [//jsfiddle.net/s766A/](http://jsfiddle.net/s766A/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:27:00.303

```
use this css 
<style>
.ui-tabs-vertical { width: 55em; }
.ui-tabs-vertical .ui-tabs-nav { padding: .2em .1em .2em .2em; float: left; width: 12em; }
.ui-tabs-vertical .ui-tabs-nav li { clear: left; width: 100%; border-bottom-width: 1px !important; border-right-width: 0 !important; margin: 0 -1px .2em 0; }
.ui-tabs-vertical .ui-tabs-nav li a { display:block; }
.ui-tabs-vertical .ui-tabs-nav li.ui-tabs-active { padding-bottom: 0; padding-right: .1em; border-right-width: 1px; border-right-width: 1px; }
.ui-tabs-vertical .ui-tabs-panel { padding: 1em; float: right; width: 40em;}
</style> 
```

# php - php, substr 编辑

> ID：13375932
> 
> 赞同：0
> 
> 时间：2012-11-14T09:17:05.770
> 
> 标签：php

好的，所以我制作了一个文件系统查看器。不过，我坚持这一点，除了单击我制作的 gui 上的后退按钮外，我一切正常。

所以我有一个这样的字符串

[http://www.grubber.co.nz/update/index.php?dir=../developer/_social_development](http://www.grubber.co.nz/update/index.php?dir=../developer/_social_development)

该脚本将转到文件夹**/developer/_social_development**

但是当我想返回时，我按下返回按钮，它会返回到顶层目录，所以它会一直返回到第一个“/”，例如**http://www.grubber.co.nz/update/ index.php?dir=../** 我使用此代码返回到最后一页不起作用

```
$dir = $_GET['dir'];
$marker = "/";
echo $str = (substr($dir, 0, (strpos($dir, $marker) + strlen($marker)))); 
```

它所做的只是将所有内容都删除到第一个“/”，但我希望它转到最后一个“/”，例如这是**/developer/_social_development**，当我单击上一个文件夹时，我希望它也是**/developer**字符串会根据你所在的文件夹而改变，所以我不能只删除一定数量的字符

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:26:51.310

使用另一种方法str pos，您可以使用explode。这里完整的代码：

```
$dir = '../developer/_social_development';
$marker = "/";
$arrDir = explode('/', $dir);
array_pop($arrDir);
$dir2 = implode( '/', $arrDir);
echo $dir2; 
```

结果：../开发者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:22:49.050

而不是使用 strpos() 来为您提供字符串中第一次出现的字符的位置，您应该使用[strrchr()](http://php.net/manual/en/function.strrchr.php)来为您提供字符串中最后一次出现的字符的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:23:46.403

不是一个最好的解决方案，我个人会使用 RegEx 方法，但如果你想使用 str 位置，你可以这样做：

```
$dir = $_GET['dir'];
$marker = "/";
echo $str = strrev(substr(strrev($dir), (strpos($dir, $marker) + strlen($marker)))); 
```

或基于 RegEx 的解决方案：

```
$dir = $_GET['dir'];
echo $str = preg_replace("/\/[^\/]+$/", "", $dir); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T09:24:23.183

```
$path = '/foo/bar';
$path = $path . '/..'; // /foo/bar/..
echo realpath($path); // Shows /foo 
```

# java - 计算数组java中int的出现次数

> ID：13375935
> 
> 赞同：-5
> 
> 时间：2012-11-14T09:17:16.777
> 
> 标签：java

我有一个数组存储为：

```
 static int[] number = new int[50]; 
```

我想编写一段代码来计算某些整数在数组中出现的次数。说数字 1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T09:18:42.983

在这种情况下，我建议您尝试这样做。从一个简单的例子开始，添加一个循环来遍历数组并计算出现次数。最后打印答案。

下一步是使“countOccurances”成为一个方法，该方法采用数组、搜索的值并返回出现次数。

顺便说一句：除非您无法避免，否则我不会将数组设为静态。

如果你想要一个具体的答案，我建议就你编写的代码提出一个具体的问题，包括你期望发生的事情和实际发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:18:54.970

在循环上迭代您的数组并检查是否增加您的计数器。

# java - Java 在 MimeMessage 消息中添加标头

> ID：13375936
> 
> 赞同：4
> 
> 时间：2012-11-14T09:17:21.593
> 
> 标签：java, jakarta-mail, email-headers, mime-message

我正在解决的问题是，当我发送邮件时，如果收件人（邮件，抄送/密送）不存在，我不希望发件人收到传递状态通知（失败）邮件。

我正在实施的解决方案是在邮件*Prevent-NonDelivery-Report中添加新标头*

我想在 java 中的 MimeMessage msg 中添加新标头

```
// this is part of the code that defined the mime message 
Session session = Session.getDefaultInstance(props, null);

// we create message
Message msg = new MimeMessage(session);

// this code is not working for me
msg.addHeader("Prevent-NonDelivery-Report", ""); 
```

我找到了解决方案，我将 props.setProperty("mail.smtp.dsn.notify", "NEVER") 添加到会话的属性中并解决了我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-23T09:50:44.163

代表 OP：

*我找到了解决方案。我加：*

```
props.setProperty("mail.smtp.dsn.notify", "NEVER") 
```

*到会话的属性，这解决了我的问题。*

# c# - 为什么我的自定义助手围绕我网站上的其他元素呈现 html

> ID：13375940
> 
> 赞同：0
> 
> 时间：2012-11-14T09:17:34.520
> 
> 标签：c#, asp.net-mvc-3, html-helper

我遇到了一个奇怪的错误。我的 html 助手应该为菜单、简单的 ul 和 li 呈现 html。现在问题变成了它开始在其他元素周围呈现标签。从 html 返回的字符串是正确的，之后似乎是什么导致了问题。我只是想不通为什么。所以我想也许一双新鲜的眼睛可以发现它。

方法

```
public static MvcHtmlString TopMenuLinks(this HtmlHelper helper, List<IMenuItemNodeViewData> menuItem)
        {
            if (menuItem != null && menuItem.Count > 0)
            {
                var count = 0;
                var resultString = "";

                var ulTag = new TagBuilder("ul");

                foreach (var item in menuItem.Where(x => x.IsVisibleInMenu))
                {
                    count++;
                    var liTag = new TagBuilder("li")
                                    {
                                        InnerHtml = string.Format("<a href=\"{0}\"><img src=\"{1}\" alt=\"{1}\" />{2}", item.URL, "/Content/images/image.png", item.Name)
                                    };

                    ulTag.InnerHtml += liTag.ToString();

                    if (count % 3 == 0 || count == menuItem.Where(x => x.IsVisibleInMenu).Count())
                    {
                        resultString += ulTag.ToString(TagRenderMode.Normal);
                        ulTag = new TagBuilder("ul");
                    }
                }

                return MvcHtmlString.Create(resultString);
            }

            return null;
        } 
```

局部视图

```
<div class="top-columns link-container">

        <div class="links">

            <%= Html.TopMenuLinks(Model.MenuItems) %>

        </div>

    </div>

    <div class="top-columns icons">

        <div class="icons-contain">
            <img src="/Content/images/image.png" alt="image" />
        </div>

    </div> 
```

它呈现以下内容

```
<div class="links">
    <ul>
        <li>..</li>
        <li>..</li>
        <li>..</li>
    </ul>
    <ul>
        <li>..</li>
        <li>..</li>
    </ul>
    <a href="url"></a>
</div>

<a href="url"></a>
</div>
<a href="url">

    <div class="top-columns icons">

        <div class="icons-contain">
        </div>

</a>
</div>
<a href="url"></a> 
```

应该是

```
<div class="links">
    <ul>
        <li>..</li>
        <li>..</li>
        <li>..</li>
    </ul>
    <ul>
        <li>..</li>
        <li>..</li>
    </ul>
</div>
<div class="top-columns icons">

        <div class="icons-contain">
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:29:35.320

您忘记`<a>`在以下行中关闭标签：

```
 InnerHtml = string.Format("<a href=\"{0}\"><img src=\"{1}\" alt=\"{1}\" />{2}", item.URL, "/Content/images/image.png", item.Name) 
```

试试这个 ：

```
 InnerHtml = string.Format("<a href=\"{0}\"><img src=\"{1}\" alt=\"{1}\" />{2} </a>", item.URL, "/Content/images/image.png", item.Name) 
```

# javascript - javascript读取文件并将内容作为变量

> ID：13375941
> 
> 赞同：1
> 
> 时间：2012-11-14T09:17:35.243
> 
> 标签：javascript, variables, readfile

我是 javascript 的初学者，所以在说重复或任何内容之前，请尝试通过将我指向正确的方向来帮助我找到我应该寻求答案的地方。我看到很多这样的问题，但没有一个与我的需要有关。所以，我不得不问..

我有一个javascript，有

```
this.a.$a = "content"; 
```

现在在那个脚本的某个地方，我有

```
a.target_url = this.a.$a; 
```

this.a. *$a*是我们通过输入框手动添加的字符串。

我需要一个函数来读取文件内容，将其转换为字符串，并将值作为变量打印在`this.a.$a`.

文件名为Test.txt，URI长为[http://www.mydomain.com/test.txt](http://www.mydomain.com/test.txt)

文件内容为：*Neque porro quisquam est qui dolorem ipsum quia dolor sit amet*

我努力了

```
$.get("http://www.mydomain.com/test.txt", function(data) { 
    this.a.$a = data
}); 
```

但我得到的是`[object] [Object]`。

有人可以向我解释一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:22:09.863

您应该尝试使用 console.log 输出变量，然后检查 firebug 以查看对象的外观。尽管我的直觉告诉我这应该可以解决您的问题：

```
$.get("http://www.mydomain.com/test.txt", function(data) { 
    this.a.$a = data.d
}); 
```

# asp.net - 我可以从 asp.net gridview 编辑单击中获得模态对话框吗？

> ID：13375942
> 
> 赞同：1
> 
> 时间：2012-11-14T09:17:41.167
> 
> 标签：asp.net, gridview, modal-dialog, jquery-dialog

我想知道是否可以通过单击内置 gridview 控件的 asp.net 上的编辑按钮来创建模式对话框（如 JQuery）。如果是的话，可以再指出如何完成它的简短过程。请参阅下面的图片以进行说明。

谢谢。

![在此处输入图像描述](../Images/b54b78e3a820c940bb3199b852ab4d4a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:38:40.313

我看到几种方法可以做到这一点：

使用`OnEditCommand`属性（假设您正在使用`<asp:EditCommandColumn`绘制该编辑链接）：您可以使用服务器端处理程序显示弹出窗口（例如，包含在 ajaxcontroltoolkit.dll 中的弹出窗口允许在页面重新加载时轻松显示来自服务器端的弹出窗口）

另一种选择：为每个项目创建带有编辑链接的列。它可以具有 OnClientClick 处理程序，该处理程序将直接在客户端上打开 jQuery 弹出窗口（但您需要以某种方式从服务器获取当前行的行信息：使用您自己的 ajax 调用，或者假设使用带有 webmethod 的 web 服务会更好）

可以修改第二个选项：您可以在默认编辑链接上添加具有相同 jquery 的单击甚至处理程序，而不是创建自己的列，并返回 false，因此它将阻止表单提交。

我从来没有亲自做过这样的事情，甚至更新看到了这种事情的实现，但我会从上面列出的选项中选择一些选项。我不认为有一些非常简单的内置方法可以做到这一点。

**UPD：** 这是一个使用自己的编辑按钮和来自 ajax 控制工具包的 modalpopupextender 打开弹出窗口的示例（类似于我的第一个选项，除了它们使用自己的编辑按钮，我认为可以很容易地用默认按钮和 OnEditCommand 甚至处理程序替换） ： [http ://www.c-sharpcorner.com/UploadFile/krishnasarala/edit-gridview-row-with-model-popup-extender-in-Asp-Net-ajax/](http://www.c-sharpcorner.com/UploadFile/krishnasarala/edit-gridview-row-with-model-popup-extender-in-Asp-Net-ajax/)

# php - Symfony2 反向代理有一个私有的缓存控制

> ID：13375945
> 
> 赞同：2
> 
> 时间：2012-11-14T09:17:45.873
> 
> 标签：php, http, caching, symfony, reverse-proxy

我正在使用 Symfony2 反向代理和 HTTP 缓存，我对这个主题进行了很多阅读。但是，我对它在我的情况下的工作方式感到困惑。

这是一个用例。

`GET /api/articles`返回类似：

```
HTTP/1.1 200 OK
Content-Encoding: gzip
Content-Type: application/json
Set-Cookie: PHPSESSID=12345; expires=Thu, 14-Nov-2013 14:50:35 GMT; path=/
age: 0
allow: GET, POST
cache-control: must-revalidate, no-cache, private
etag: "da4b6c4f1540a12a112936e58db06df8c95fd3c4"
vary: Accept,Accept-Encoding
x-content-digest: enbf30f962b06f99bd91843741537e112fbd3300c8
x-symfony-cache: GET /api/articles: miss, store 
```

如您所见，`Cache-Control`标头与 no-cache & must-revalidate 一起被标记为私有。**但是**，我认为我设置`Response`正确：

```
 $response = clone $view->getResponse();
    $response
        ->setPublic()
        ->setEtag($etag)
        ->setSharedMaxAge(60)
        ->setVary(array('Accept'))
    ;
    if ($response->isNotModified($this->getRequest())) {

        return $response;
    } 
```

我将它设置为公开，所以它应该可以工作。您可能已经注意到`Set-Cookie`标题，我不知道它是否重要，但只要我将缓存设置为公共它不应该，不是吗？

现在，如果我得到`GET /api/articles`一个`If-None-Match: {etag}`正确的 304，但`Cache-Control`标题是相同的。

请注意，如果我禁用反向代理，则 Cache-Control 是正确的并向我显示：

`Cache-Control: public, s-maxage=60`这是我除了。

# c# - System.Xml.Serialization.XmlSerializer 是否会转义多余的 xml 元素？

> ID：13375946
> 
> 赞同：0
> 
> 时间：2012-11-14T09:17:49.923
> 
> 标签：c#, xml, serialization

基本上，我有一个类可以从我的程序中的一系列文本框检索用户输入，这些文本框稍后会被序列化以保存。如果出于某种原因，用户决定添加如下内容：

```
<element></element> 
```

会`System.Xml.Serialization.XmlSerializer`逃避，还是我必须自己处理？

# c++ - Microsoft SQL Server 2000 文件记录不是标准的 unicode，而是用 Borland C++ 制作的

> ID：13375947
> 
> 赞同：0
> 
> 时间：2012-11-14T09:17:49.357
> 
> 标签：c++, sql-server, unicode, c++builder

我最近试图改变我们公司的旧程序。对我来说最大的困难之一是旧程序是用 Borland C++ 编写的，它有自己的方式连接到 SQL Server 2000 数据库。

8 年后，我正试图退出这个项目。但是当我查看数据库时，我吓坏了！

整个数据库使用的是一种模糊的语言，应该是波斯语。

我将给您部分数据库转换为 SQL Server 2005，以便您自己查看。我花了很多天试图弄清楚如何解码这些数据。但到目前为止，还没有任何结果。

[链接到示例数据库文件](http://clickasun.ir/clickasun/SalesDB.rar)

因此，如果您能告诉我如何在 Microsoft C#.net 中使用它们，我们将不胜感激。

这些是用于它们的数据类型： ![在此处输入图像描述](../Images/db71e925210790bcdcdd2101786341dc.png)

这就是它的外观：

![在此处输入图像描述](../Images/72ccec97c40db828bc8523ce5a83112a.png)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:57:02.723

1）分析现有程序和原始数据库

尝试弄清楚 C++ 程序如何在数据库中存储波斯语文本。在原始服务器、数据库和列级别上定义的排序规则是什么。

C++ 程序是否转换要从数据库存储和检索的数据？如果是这样，找出方法。

该程序很可能以波斯语显示数据，但没有以兼容的方式存储它。或者它使用支持自定义编码的自定义字体。这一切都需要分析。

2) 屏幕截图看起来好像所有波斯语都被编码为高于 CHAR(128) 的 ASCII 字符。

如果这是标准化编码还是自定义创建的？

3) 要迁移数据库，您很可能需要将映射原始字符的数据转换为 Unicode 字符。

首先使用支持 Unicode 的列 (NVARCHAR, NVARCHAR(MAX)) 而不是 CHAR 和 VARCHAR 重新创建表，后者仅支持拉丁语或扩展拉丁语。

4) 即使您成功迁移数据，由于字体设置或操作系统支持，SSMS 也可能无法正确显示存储的数据。

[我在我的博客](http://devio.wordpress.com/2012/09/17/why-cant-i-storedisplay-insert-name-language-data-in-sql-server/)上总结了在 SSMS 中显示 Unicode 的困难。

但首先，您需要调查原始数据库和应用程序。

# c# - 更改 WPF 页面代码的基类

> ID：13375950
> 
> 赞同：6
> 
> 时间：2012-11-14T09:18:01.027
> 
> 标签：c#, wpf

我有一个名为 CustomPage 的简单类，它继承自 Window：

```
public class CustomPage : Window 
{
    public string PageProperty { get; set; }
} 
```

我希望我的 MainWindow 代码隐藏从 CustomPage 继承如下：

```
public partial class MainWindow : CustomPage
{
    public MainWindow()
    {
        InitializeComponent();
    }
} 
```

不幸的是，我收到以下错误：

```
Partial declarations of 'WpfApplication1.MainWindow' must not specify different base classes 
```

我可以在 MainWindow.xaml 中将 x:Class 设置为“WpfApplication1.CustomPage”，但是看起来我无法访问 MainWindow.xaml 中定义的 UI 元素...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T09:29:25.057

```
public partial class MainWindow 
{
    public MainWindow()
    {
        InitializeComponent();

    }
}

public class CustomPage : Window
{
    public string PageProperty { get; set; }
}

<myWindow:CustomPage x:Class="WpfApplication4.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:myWindow="clr-namespace:WpfApplication4"
    Title="MainWindow" Height="800" Width="800">
<Grid>
</Grid>
</myWindow:CustomPage> 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T09:25:11.767

您需要像这样更新您的 xaml -

```
<local:CustomPage x:Class="WpfApplication4.MainWindow"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
                  xmlns:local="clr-namespace:WpfApplication1">
</local:CustomPage> 
```

在这里，`local`是您的命名空间`CustomPage`和`MainWindow`所在的位置。

正如错误提示的那样，您不能为类的部分声明声明不同的基类。因此，在 XAML 中，您也需要使用`CustomPage`WPF 而不是`Window`

# highcharts - 更改导航器的颜色

> ID：13375952
> 
> 赞同：1
> 
> 时间：2012-11-14T09:18:11.720
> 
> 标签：highcharts

我改变了导航线的颜色：颜色：`'rgba(255, 255, 255, 0.00)'` 我改变了线的颜色：`lineColor: 'red'` 这是我的[图表](http://regexinfo.ru/my_infa/chart/chart_good_scale1.php)

但我无法更改导航器行下的颜色：[ScreenShot](http://regexinfo.ru/my_infa/chart/change_color.JPG)

导航器的所有代码：

```
navigator: {
    maskFill: 'rgba(255, 255, 255, 0.45)',
    series: {
        type: 'areaspline',
        color: 'rgba(255, 255, 255, 0.00)',
        fillOpacity: 0.4,
        dataGrouping: {
            smoothed: false
        },
        lineWidth: 2,
        lineColor: 'red',
        marker: {
            enabled: false
        },
        shadow: true
    },
    yAxis: {
        reversed: true
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T10:21:17.413

你可能想试试这个：

```
navigator: {
    maskFill: 'rgba(255, 255, 255, 0.45)',
    series: {
        type: 'areaspline',
        color: 'rgba(255, 255, 255, 0.00)',
        fillOpacity: 0.4,
        dataGrouping: {
            smoothed: false
        },
        lineWidth: 2,
        lineColor: 'red',
        fillColor : {
            linearGradient : {  
                x1 : 0, 
                y1 : 0, 
                x2 : 0, 
                y2 : 1 
            }, 
            stops : [[0, '#FF8000'], [1, '#FFFF00']] 
        },
        marker: {
            enabled: false
        },
        shadow: true
    },
    yAxis: {
        reversed: true
    }
} 
```

# python - Python 在 mac 上运行 matplotlib.nxutils points_inside_poly

> ID：13375957
> 
> 赞同：1
> 
> 时间：2012-11-14T09:18:27.650
> 
> 标签：python, numpy, matplotlib, osx-lion

我的 ubuntu 机器上的代码一切正常，但是当我在我的 mac 上运行相同的代码时，我得到了 ValueError。我正在运行 python 2.7.3

```
inside = points_inside_poly(coord, x[:,0:2])
ValueError: Argument verts must be a Nx2 array. 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:06:06.500

nxutils 模块[在 1.2.0 版本中已弃用](http://matplotlib.org/api/nxutils_api.html)。您可以使用以下内容进行遏制测试：

```
>>> from matplotlib.path import Path
>>> Path([[0, 0], [0, 1], [1, 1], [1, 0], [0, 0]]).contains_point([0.5, 0.5])
1
>>> Path([[0, 0], [0, 1], [1, 1], [1, 0], [0, 0]]).contains_point([0.5, 2.5])
0 
```

高温高压

# visual-studio - Visual Studio 2012 - Intellisense 有时会消失/损坏

> ID：13375961
> 
> 赞同：133
> 
> 时间：2012-11-14T09:18:46.223
> 
> 标签：visual-studio, visual-studio-2012, intellisense

我和我的同事已经使用 VS2012 几个星期了。有时在工作几个小时后，智能感知就坏了。关闭所有打开的选项卡后，它再次工作。

有更多人有同样的问题吗？这不可能是扩展问题，因为我在家里也有同样的问题。也许有一个解决方法？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-11-14T10:11:33.050

这些是让 Visual Studio 2012 intellisense 重回正轨的几个顶级解决方案，一一尝试，希望其中一个能解决问题：

`When the problem occurs next time follow these:` *从 #1 开始，当前一个不适合您时移至下一个*

1：`Close all the tabs`然后再次打开您的文件。*（感谢 russds）*

2：`Clean the Build`> `Close the Solution`> `Restart Visual Studio`>`Open the Solution`再次

3：转到： `Edit`> `IntelliSense`>`Refresh Local Cache`

4：关闭 Visual Studio 2012 并删除此文件夹：`%AppData%\Microsoft\VisualStudio\11.0\ReflectedSchemas`

5：转到：`TOOLS`> `Import and Export Settings`>`Reset all settings`

6：删除`.suo`项目文件夹中的文件。*（感谢杰森斯蒂尔）*

我希望您的问题将通过上述六个步骤中的任何一个得到解决。但如果这一切都不是，我认为你应该考虑重新安装你的 VS2012。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-28T13:42:07.783

我使用 Visual Studio 2012，我遇到了同样的问题。要修复它（当 Intellisense 不再工作时），我只需关闭当前选项卡（其中 Intellisense 不工作）并重新打开它。无需关闭 Visual Studio 或所有选项卡。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-28T17:54:53.453

您无需重新启动 Visual Studio。相反，请关闭当前解决方案，然后再次重新打开它。我希望有一个更简单的解决方案。

**4/16 更新**：对于 XAML 用户，一个有效的解决方案就像故意破坏你的代码一样简单；这应该足以检索智能感知。[更多在这里](https://stackoverflow.com/a/34071333/2093880)。

无法验证这是否也适用于其他类型的代码，但如果可以，请发表评论。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-01-07T14:27:42.857

什么都试过了。工作的事情是删除**SUO**文件。它是解决方案目录中名为 SolutionName.v11.suo 的隐藏文件：

1.  关闭解决方案
2.  确保您可以看到隐藏文件。
3.  擦除 suo 文件。
4.  重新打开解决方案。

您将失去解决方案桌面（不会在编辑器中自动打开任何文件），但要获得智能感知，这是一个很小的代价:)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-11-30T17:16:51.147

删除 .suo 文件。试试这个，在所有其他方法都失败后它对我有用。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-06-14T18:04:14.387

我也有同样的问题。对我来说，选择文件最后一行的结尾，然后保存文件（ctrl-s）可以解决问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-14T22:20:26.533

我首先要注意的是，自从我的 RAM 升级到 16GB 后，这种情况就没有发生在我身上。

当我在页面上复制/粘贴控件时似乎会发生这种情况。这样做的另一个副作用是designer.vb 文件没有立即更新，我无法访问后面代码中的这些控件。

这是我经历的步骤顺序：

*   如果似乎只有 1 个文件/窗口受到影响，请关闭/重新打开该文件。

在 Visual Studio 中：

1.  单击工具->选项->文本编辑器->所有语言->常规
2.  取消选中“自动列出成员”
3.  取消勾选“参数信息”
4.  选中“自动列出成员”（是的，您刚刚取消选中的那个）
5.  检查“参数信息”（再次，您刚刚取消选中的那个）
6.  点击确定

如果这不起作用，请尝试以下几个步骤：

1.  如果仍然无法正常工作，请关闭所有窗口并重新打开
2.  如果仍然无法正常工作，请关闭/重新打开解决方案
3.  如果仍然无法正常工作，请重新启动 VS。

**对于 C++ 项目：**
MSDN 有一些事情可以尝试：[MSDN 建议](https://msdn.microsoft.com/en-us/library/ks1ka3t6%28v=vs.90%29.aspx?f=255&MSPPError=-2147217396)

损坏的`.ncb`文件似乎很可能。

来自 MSDN：

1.  关闭解决方案。
2.  删除`.ncb`文件。
3.  重新打开解决方案。（这会创建一个新`.ncb`文件。）

（我还没有弄清楚为什么在某些情况下需要更激烈的步骤。）

*   在 VS 2013/15 测试
*   自从升级我的 RAM 后我就没有遇到过这个问题

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-03T23:56:53.813

我有一些糟糕的 xaml 代码。编译时它没有给出错误，但它仍然阻止智能感知在 xaml 文件中正常工作。

我删除了以下代码来解决问题：Binding="{Binding ReturnCode & Info}"

'&' 是问题

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-22T18:36:33.290

这些都不适合我，但我终于通过禁用 Resharper 让它工作了。我不确定为什么有必要，因为我有另一个 LS 解决方案，其中智能感知工作正常。只是以为我会发布它以防其他人遇到与我相同的问题。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-22T12:29:04.707

我遇到同样的问题并解决它。请记住，如果您使用 Silverlight，任何不正确的 XAML 代码都可能导致 IntelliSense 崩溃。我建议如果您正在使用 Silverlight，请编译您的项目以检测不正确的 XAML 代码并在第一步中解决它们，如果问题仍然存在，请使用上述步骤。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-12T11:43:31.680

问题出在 .vcproj 文件上。

你会发现如果你从调试模式切换到发布模式，构建，然后尝试智能感知，它通常可以工作。

关闭 Visual Studio。如果您在项目中搜索 .vcproj 文件，请编辑它们并搜索 AdditionalIncludeDirectories 的前两个实例。此值应类似于“..\,..\”而不是“../..”。

重新打开您的项目，让 Intellisense 完成构建，然后应该修复它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-03-11T11:51:07.910

要遵循的步骤：

1.  转到工具菜单
2.  点击“导入和导出设置”
3.  选择“重置所有设置”。点击下一步
4.  备份您的设置。点击下一步
5.  选择您的环境设置（例如 Visual C# 开发设置）。单击完成。

无需重新启动 Visual Studio。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-04-24T15:48:22.147

我有一个问题，剃须刀 Intellisense 在我的一个项目中根本不起作用。上述修复均不适合我。我终于能够通过将 web 配置中的网页版本更改为 2.0.0.0 而不是 3.0.0.0 来解决问题，如下所示：

```
<appSettings>
   <add key="webpages:Version" value="2.0.0.0" />
   ...
</appSettings> 
```

我希望这对其他人有帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-11-30T03:32:15.283

以上都没有帮助修复我的 devbox（VS2012）上的 Intellisense。我什至尝试了“devenv /resetuserdata”，这导致需要重新安装所有插件。

尽管如此，在 C++ 项目中，#if ABC ... #endif 块中的代码仍然是灰色的。

作为临时解决方法，我将#if ABC 修改为#if 1//ABC，然后在完成编辑块后恢复更改。恼人的...

编辑：几个小时后，我找到了更好的解决方案。我在头文件中注释掉了“#define ABC 1”，并添加了“ABC=1;” 到项目属性->C/C++->预处理器->预处理器定义。然后 Intellisense 开始正常工作！代码块没有变灰。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-03-07T22:02:08.007

我在 Visual Studio 2013 中遇到了类似的问题，我刚刚清理了解决方案，然后删除了 4：关闭 Visual Studio 2013 并删除此文件夹：`%AppData%\Microsoft\VisualStudio\12.0`它解决了问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-07-19T17:37:02.263

我已将我的问题与 VS Power Tools 损坏 *.suo 隔离开来。关闭 VS，删除 .suo，然后重新打开可以解决问题。它还会删除该解决方案的所有个人设置。

我遇到的另一个破坏性较小的解决方案是使用“编辑项目文件”电源命令，然后重新加载项目以让智能感知再次工作。

希望这对其他人有帮助。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-09-29T08:48:47.663

对于 VS2013 - ASP.NET MVC 5 项目，解决此问题的一种简单方法是卸载并重新加载特定项目。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-10-07T17:56:59.987

对于 Python 项目，我最终删除了隐藏的 .vs 文件夹、.sln 文件和 .pyproj 文件。然后，我从现有代码重新创建了项目，Intellisense 再次工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-02-21T08:30:25.617

关闭不起作用的选项卡对我有用。

ps我会提前保存，以防VS很奇怪；）

哦，快捷键是 Ctrl+Alt+Space（在建议和标准完成模式之间切换）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-02-26T07:45:07.743

我多次面临这个问题，我仍然面临着它。

对我有用的解决方案是减少放置解决方案的路径的长度。我将解决方案放在更靠近 C 驱动器 (c:/code/your_project.sln) 的位置，它刚刚解决了智能感知问题，这总能解决问题。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-10-10T07:23:12.967

以上都不适合我。仔细检查时，我注意到智能感知对某些文件有效，但并非对所有文件有效。然后发现它只有一个文件。最后打开 .proj 文件，其中包含：

```
 <ItemGroup>
<None Include="App.config" />
<None Include="packages.config" />
<Compile Include="Generator.cs" />
<Compile Include="PDFDocument2.cs" />
<None Include="PDFDocument.cs" />
<Compile Include="PdfDaemon.cs" />
<Compile Include="Properties\AssemblyInfo.cs" /> 
```

当然，智能感知不适用于未标记为要编译的文件。

# html - CSS页脚定位

> ID：13375962
> 
> 赞同：0
> 
> 时间：2012-11-14T09:18:46.920
> 
> 标签：html, css, css-float, positioning, footer

正如您在[演示](http://www.olmasigereken.com/demo1/)中看到的那样，我的页脚栏不是它必须在的地方。我不知道为什么页脚在内容 div 之后没有解决。页脚必须在文章之后。我试图找到在谷歌上搜索的特定关键字，但我做不到。

另外，我不能将样式应用于[about page](http://www.olmasigereken.com/demo1/?view=about)。我认为这与第一个问题有关。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" lang="en"/>
<title>Title</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="style.css" />  
</head>
<body> 
<div id="containerANA">

    <div id="header">
            <div class="headerAlt">

            </div>
    </div>
     <div class="temizle"></div>
<!--End of the header.php-->
<div id="content">
    <div class="findler">
    <div class="find"><a href="#" title="Find">Find</a></div>
        <p>
                                            <a href="#">insaf sahipleri</a>
                                                            <a href="#">BEN VE OLRİC</a>
                                                            <a href="#">insaf sahipleri</a>
                                                            <a href="#">BEN VE OLRİC</a>
                                                            <a href="#">insaf sahipleri</a>
         </p>
    </div>
</div>
<div class="temizle"></div> 
    <!--Begining of the footer.php-->
    <div id="footer">
        <ul>
            <li><a href="http://www.olmasigereken.com/demo1/?view=about" title="about us">about us</a></li>
            <li><a href="http://www.olmasigereken.com/demo1/?view=terms" title="terms of use">terms of use</a></li>
            <li><a href="http://www.olmasigereken.com/demo1/?view=contact" title="contact">contact</a></li>
        </ul>
    </div>
</div>  
</body>
</html> 
```

样式.css：

```
 html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td,
    article, aside, canvas, details, embed, 
    figure, figcaption, footer, header, hgroup, 
    menu, nav, output, ruby, section, summary,
    time, mark, audio, video {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
    }
    /* HTML5 display-role reset for older browsers */
    article, aside, details, figcaption, figure, 
    footer, header, hgroup, menu, nav, section {
        display: block;
    }
    body {
        line-height: 1;
        background:#000000;
        color:#fff;
    }
    ol, ul {
        list-style: none;
    }
    blockquote, q {
        quotes: none;
    }
    blockquote:before, blockquote:after,
    q:before, q:after {
        content: '';
        content: none;
    }
    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    .temizle{clear:both;}

    #containerANA{
    width:%100px;
    height:auto;
    margin: 0 auto;
    font:13px arial, helvetica, Geneva, sans-serif;
    margin-left:15px;
    margin-right:15px;
}

.temizle{
    clear:both;
}

#header{
    height:212px;
    width:%100px;
    margin:0 auto;
    border-bottom:2px solid #66675e;
}

.headerAlt{
    height:55px;
    width:490px;
    margin:0 auto;
    margin-top:10px;
    float:center;
}

#content{
    width:%100px;
    margin-top:35px;
}

.findler{

    height:80px;
    width:%100px;

}

.find{
    background:url(img/find.jpg) no-repeat;
    width:87px;
    height:54px;
    margin-top:26px;
    margin-left:610px;

}

.find a{
    width:87px;
    height:54px;
    display:block;
    text-indent:-9999px;
}

#content p{
  position: relative;
  margin-left:auto;
  margin-right:auto;
  top:0px;
  display: block;
  padding: 5px;    
  color: #769B4E;
  font-size:18px; 
  text-align:justify;   
  border: 0px solid #769B4E;
  margin-top: 10px;
  margin-bottom: 10px;
}

#content p a{
    color:#ccc;
    text-decoration:none;
}

#content p a:hover{
    background:#e5da5f;
    color:#000;
}

#footer{
    margin-top:50px;
    margin-bottom:20px;
}

#footer ul{
    margin-left:35px;
}
#footer ul li{
    display:inline;
    margin-right:30px;
    font-family:Verdana, Geneva, sans-serif;
    font-size:11px;
}

#footer ul li a{
    text-decoration:none;
    color:#FF0000;
}

#footer ul li a:hover{
    background:#e5da5f;
    color:#000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T09:25:23.013

您已经在 CSS 中定义了

```
.find {
  background: url(img/find.jpg) no-repeat;
  width: 87px;
  height: 54px;
  margin-top: 26px;
  margin-left: 610px;
}

.findler {
  height: 80px;
  width: %100px;
} 
```

他们`#content`只做了 80px 的高度，但是里面的内容占用的空间比提供的要多，导致内容溢出。

所以`.footer`位于 的下方`#content`，但视觉上位于 中的溢出内容下方`#content`。

只需`height`从 CSS 规则中删除 s，让浏览器决定高度应该是多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:23:05.827

从中删除高度值`.findler`并使其自动。

由于您的内容 div 的高度是固定的，因此内容超出了 div，因此您会看到页脚问题。

```
.findler {
height: auto;
width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T09:24:29.607

添加`clear:both;`到页脚的 css。

如果它仍然不起作用，`<div class="clearer"></div>`请在 html 中的页脚之前添加。并在 css 中声明`.clearer{clear:both;}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T09:34:59.957

....你好现在添加这个

`min-height:80px;`在你的`.findler` **课上**

**像这样**

```
.findler {
height:80;  // remove this line
    min-height: 80px;  //  add this line
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T12:56:17.413

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/) - 这可能会有所帮助，他们很好地解释了页脚定位

# alloy - 了解合金中的谓词

> ID：13375969
> 
> 赞同：1
> 
> 时间：2012-11-14T09:19:23.773
> 
> 标签：alloy

有人可以使用以下示例帮助我理解谓词：

```
sig Light{}
sig LightState { color: Light -> one Color}
sig Junction {lights: set Light}
fun redLigths(s:LightState) : set Light{ s.color.Red}
pred mostlyRed(s:LightState, j:Junction){
    lone j.lights - redLigths(s)
} 
```

我对上述代码有以下问题：

1) 如果上述谓词为真，会发生什么？

2）如果它是假的会发生什么？

3）谁能给我看一些合金代码，使用上面的代码并通过代码阐明谓词的含义。

我只是想了解我们如何使用上述谓词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:16:57.017

除非您在命令中调用谓词或函数以查找示例或反例，否则不会“发生”任何事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T21:36:50.527

首先，使用正确的术语，当谓词为真时，什么都不会发生；相反，它更像是一个实例（将原子分配给集合）满足（或不满足）某些条件，从而使谓词为真（或假）。

此外，您的模型不完整，因为没有`sig`声明`Color`（应该包括一个名为 的属性`Red`）。

我假设您想模拟一个包含交通信号灯的十字路口的世界，如果是这样，我将使用以下模型：

```
abstract sig Color {}

one sig Red,Yellow,Green extends Color {}

sig Light {
    color: Color
}

sig Junction {
    lights : set Light
}

// This is just for realism, make sure each light belongs to exactly one junction
fact {
    Light = Junction.lights
    no x,y:Junction | x!=y and some x.lights & y.lights
}

fun count[j:Junction, c:Color] : Int { 
    #{x:Light | x in j.lights and x.color=c}
}

pred mostly[j:Junction, c:Color] {
    no cc:Color | cc!=c and count[j,cc]>=count[j,c]
}

run{
    some j:Junction | mostly[j,Red]
} for 10 Light, 2 Junction, 10 int 
```

查看上面的内容，我使用 # 运算符来计算集合中的原子数，并且我将 10 的位宽指定为整数，这样我在使用 # 运算符时不会偶然发现溢出大套。

当您执行此操作时，您将获得一个实例，其中至少有一个路口大部分为红灯，它将`$j`在可视化工具中标记为。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:31:22.303

```
sig Light{}
sig LightState { color: Light -> one Color}
sig Junction {lights: set Light}
fun redLigths(s:LightState) : set Light{ s.color.Red}
pred mostlyRed(s:LightState, j:Junction){
lone j.lights - redLigths(s)
} 
```

在您给出的示例中，谓词的简单含义是；

从函数 redligths 返回的集合 A（在本例中为关系 (j.lights) 和另一个集合 B 之间的差异，其中 Predicate 将始终约束约束分析器在运行 Predicate 时仅返回红光”多为红色”。

请注意，您添加到谓词主体的多重性“**孤独**”仅在评估集合 A 和 B 之间的差异（如我所假设的）之后评估，以确保**最多**返回一个红色原子。我希望我的解释是有帮助的。我会欢迎积极的批评。谢谢

# java - 带有参数 Content-Type 和 text/html;charset=iso-8859-1 的 setRequestProperty 不起作用

> ID：13375980
> 
> 赞同：0
> 
> 时间：2012-11-14T09:20:30.920
> 
> 标签：java, httpurlconnection

Ia 正在尝试获取具有以下内容类型的页面的内容：

元内容=“文本/html；字符集=iso-8859-1”http-equiv=“内容类型”

对于这个我使用类 HttpConnection 像这样

```
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.setRequestProperty("Content-Type", "text/html;charset=iso-8859-1");
BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));

StringBuilder response = new StringBuilder();
String inputLine;

while ((inputLine = in.readLine()) != null){
        response.append(inputLine);
    }
in.close(); 
```

在响应中有很多“？” 所以我认为文本没有用字符集编码。id 可以做些什么来获得用 charset iso-8859-1 编码的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:55:40.343

我知道了。编码是对的。InputstreamReader 需要第二个参数，即编码。然后它工作

# iphone - Iphone 5 默认日历中未添加的事件

> ID：13375982
> 
> 赞同：0
> 
> 时间：2012-11-14T09:20:33.590
> 
> 标签：iphone, ios

在我的应用程序中，我必须将事件添加到 Iphone 默认日历。我编写的代码如下

```
EKEventStore *eventStore = [[EKEventStore alloc] init]; 
EKEvent *event1  = [EKEvent eventWithEventStore:eventStore];
event1.notes=descriptionStr;
event1.startDate =edate;
event1.endDate=fdate;
[event1 setTimeZone:[NSTimeZone systemTimeZone]];
[event1 setCalendar:[eventStore defaultCalendarForNewEvents]]; 
```

问题出在iphone5上。对于 4S 及以前的版本，事件正在完美添加。请指导我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:40:42.737

根据 EKEventStoreClassRef 的 Apple 文档：

> 在 iOS 5 及更高版本上，使用默认的 init 方法初始化事件存储对象。在 iOS 6 及更高版本上，您必须在使用 requestAccessToEntityType:completion: 初始化事件存储后请求访问实体类型才能返回数据。

安装 iOS 6 的 4S 上能用吗？

# ruby-on-rails - Rails：使用link_to（链接）而不是复选框过滤内容

> ID：13375988
> 
> 赞同：0
> 
> 时间：2012-11-14T09:20:42.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想根据标签过滤我的内容。我宁愿使用链接而不是复选框表单，该表单根据用户检查的标签过滤内容。我目前使用以下代码生成链接：

```
link_to tag.name, user_path(tags: tag.id) 
```

这将创建格式的 url`?tag=15`

这适用于显示标签=15 的所有内容，但用户应该能够选择多个标签。

当用户单击第二个过滤器链接时，新标签应附加到标签参数，现在应显示带有两个标签的内容。基本上，我想生成如下所示的网址：

```
?tag[]=15&tag[]=1 
```

甚至可以将标签参数指定为link_to中的数组吗？如果是这样，我如何将后续标签附加到网址的末尾？有没有更好的方法来完成通过链接过滤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:25:17.963

I would create the links like this:

```
link_to tag.name, user_path(tags: "#{params[:tags]},#{tag.id}) 
```

And then in the controller use

```
@tags = params[:tags].split(',') 
```

# ruby-on-rails - 推送到heroku失败

> ID：13375991
> 
> 赞同：1
> 
> 时间：2012-11-14T09:21:14.717
> 
> 标签：ruby-on-rails, git, heroku

我是在 Rails 中编程的 Heroku 应用程序的合作者，我在尝试推送到暂存环境时遇到此错误。我只是应用程序暂存环境的合作者，而不是生产 repo。当我尝试时`git push heroku master`，出现以下错误：

```
Hugos-MacBook-Air:app_name hugo$ git push heroku master
To git@heroku.com:app_name-test.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@heroku.com:app_name-test.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

我不明白输入 git help 命令时得到的信息。我已经设置了远程heroku repo，我也已经登录了。我还将我的 ssh 密钥添加到了 heroku。

```
heroku  git@heroku.com:app_name-test.git (fetch)
heroku  git@heroku.com:app_name-test.git (push) 
```

以上是heroku repos。这也是我与 heroku 应用程序关联的存储库。`git@github.com:app_name/app_name.git`我还没有推送到 github 仓库，那是我的问题吗？

任何人都可以提供帮助吗？我真的很感激谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:38:40.810

您可以运行`git fetch heroku && git merge heroku/master`以确保您的本地 repo 与 heroku 上的远程 repo 是最新的。

# c# - 在 C# 中运行 Web 应用程序时出现服务器错误

> ID：13375997
> 
> 赞同：0
> 
> 时间：2012-11-14T09:21:37.377
> 
> 标签：c#, asp.net, web-services, web-applications, upload

我在 ASP.NET 2010 中编写了 Web 应用程序。在 iis 中运行时，在 Web 配置中，显示服务器错误，第 13 行（）身份验证模式）。我不知道原因。请帮助我。这段代码是：

```
webconfig:
    Line 11:     <httpRuntime requestValidationMode="2.0" />
    Line 12:     <compilation debug="true" targetFramework="4.0"/>
    Line 13:        <authentication mode="Forms">
    Line 14:       <forms loginUrl="~/Login.aspx" defaultUrl="~/Home.aspx" timeout="30" protection="All" slidingExpiration="true"/>
    Line 15:        </authentication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:44:39.863

尝试将 .dll 文件从您的 bin 文件夹（在您的源位置）复制到为您的项目创建的文件夹 IIS。不知道为什么在部署时有时会忽略它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:13:02.113

您应该在系统中安装了 .Net 4.0。并且需要将您的项目的应用程序池更改为 .Net 4.0。目前 DafultAppPool。

更改值。在 ISS 管理器中选择您的网站，您可以在右侧看到高级设置。单击此将应用程序池更改为 .Net 4.0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T09:58:38.183

您仍然没有发布*“黄页”的确切错误*

您可以尝试删除一些参数，例如

```
<forms loginUrl="~/Login.aspx" defaultUrl="~/Home.aspx" timeout="30" protection="All" slidingExpiration="true"/> 
```

至

```
<forms loginUrl="~/Login.aspx"  timeout="30" slidingExpiration="true"/> 
```

然后尝试删除完整的身份验证标签

```
<authentication mode="Forms">
<forms loginUrl="~/Login.aspx" defaultUrl="~/Home.aspx" timeout="30" protection="All" slidingExpiration="true"/>
</authentication> 
```

一步一步你可以理解确切的错误。

# debugging - gdb找不到cc编译的源文件

> ID：13375998
> 
> 赞同：0
> 
> 时间：2012-11-14T09:21:43.617
> 
> 标签：debugging, gdb, cc

我有一个源文件 testcc.c，它只打印一个“Hello, World”，我用 cc 编译它，如下所示

```
cc -g -o testcc testcc.c 
```

当我运行它时它工作正常。现在我想使用以下命令使用 gdb 对其进行调试。

```
gdb testcc 
```

我可以看到 gdb 的输出。

> GDB 是免费软件，欢迎您在特定条件下分发它的副本；键入“显示复制”以查看条件。GDB 绝对没有任何保证；键入“显示保修”以获取详细信息。GDB 4.16 (sparc-sun-solaris2.6)，版权所有 1996 Free Software Foundation, Inc...

但是，当我尝试在第 5 行设置断点时，我收到以下消息

```
(gdb) break 5
Breakpoint 1 at 0x10814: file /home/users/xxx/C, line 5.
(gdb) 
```

问题是 /home/users/xxx/C 是我当前的工作目录，而不是源文件！

然后，我尝试使用 file:line-number 选项

```
(gdb) break testcc.c:5
No source file named testcc.c. 
```

因此，我包含文件名的完整路径，如下所示

```
(gdb) break /home/users/xxx/testcc.c:5
No source file named /home/users/xxx/testcc.c. 
```

我一头雾水，文件在那里，为什么gdb找不到呢？我也尝试在启动gdb时指定目录来搜索源文件

```
gdb -d /home/users/xxx/C testcc 
```

它仍然无法正常工作，有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:16:08.487

经过一整天的努力，我终于发现我们应该使用dbx来调试Sun cc编译器编译的程序。这是链接说的。

[http://www.cs.cmu.edu/~gilpin/tutorial/](http://www.cs.cmu.edu/~gilpin/tutorial/)