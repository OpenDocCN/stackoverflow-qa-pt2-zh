# StackOverflow 问答 14396000-14396999

# nosql - 如果它们可以有不同数量/类型的列，那么将行划分为列族的目的是什么？

> ID：14396001
> 
> 赞同：0
> 
> 时间：2013-01-18T09:36:14.103
> 
> 标签：nosql, cassandra, conceptual

鉴于列族可以包含具有任意结构的行，我们可以将所有行存储在单个“存储”中（故意避免使用名称“列族/表”）。那么列族的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T22:54:09.157

最简单的原因在名称本身“列族”中显而易见。列族将一堆相关的列组合在一起。您可以将其视为包含相关列的命名空间。

例如，列“名称”本身缺乏上下文，可以由 ColumnFamilies 提供，如“员工”或“城市”。或者每个列都需要自己携带所有上下文，而没有相关列的概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:44:32.860

原子性

在 Cassandra 1.1 及更低版本中，您拥有的唯一原子保证是写入同一行（即使用相同的键）将是原子的。

因此，您要非常仔细地考虑您想要在列中包含什么，以及这些列应该在哪一行，以便您的应用程序在写入失败时能够正常运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T21:51:30.860

原因：

*   为一行中的列设置不同的排序顺序。比较器在列族创建时指定，之后无法更改。因此，如果您有哪些列必须按字母或数字排序的行，您必须创建不同的列族。
*   自定义可以在每个列族基础上设置的存储选项。例如缓存或行、压缩、过期列的删除等。每个列族的存储选项可以在[这里找到](http://www.datastax.com/documentation/cassandra/1.2/index.html#cassandra/configuration/configStorage_r.html)
*   不能在同一列族中混合计数器和非计数器列
*   如其他答案中所述，由于逻辑内聚 - 列表示由行 ID 标识的某些实体的属性。

# wcf - SharePoint - Wcf 编码

> ID：14396005
> 
> 赞同：0
> 
> 时间：2013-01-18T09:36:34.173
> 
> 标签：wcf, sharepoint, encoding, url-encoding

字符串编码的最佳实践是什么？我有搜索过滤器用户控件和按钮单击事件，最后，我有：

```
Response.Redirect("....page.aspx?filterField=companyName&fieldValue=unilever"); 
```

我尝试了“Server.UrlEncode”、“Server.UrlPathEncode”、“SPEncode.UrlEncode”、“SPEncode.UrlEncodeAsUrl”，但我仍然遇到字符“、&、<、>的问题

有谁知道如何为所有角色解决这个问题？也许是 SP 和 WCF 的第三方库......？？？（WCF 是 4.0 .net 框架，SP 是 3.5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:47:32.030

查询字符串中的键和值必须是 url 编码的，所以它就像：

```
UrlEncode(key) '=' UrlEncode(value) [ '&' UrlEncode(key) '=' UrlEncode(value)] ... 
```

但是，在此处理之后，您的特定示例保持不变。所以让我们说`"filterField"`must be`"lö&l"`和`"fieldValue"`must be `"ä&sd"`。那么编码后的字符串是：

```
filterField=l%C3%B6%26l&fieldValue=%C3%A4%26sd 
```

请注意，整个事情不是一次编码的，而是单独编码的键和值。

# maven - 存储库和插件存储库之间的区别

> ID：14396017
> 
> 赞同：60
> 
> 时间：2013-01-18T09:37:45.330
> 
> 标签：maven

我的 Android Maven 项目 pom.xml 包含以下条目。现在一切正常。`<repositories>`条目和条目之间有什么区别`<pluginRepositories>`。

```
<repositories>
        <repository>
            <id>my-repo</id>
            <url>http://10.10.10.230:8081/nexus/content/groups/public</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
                <updatePolicy>always</updatePolicy>
            </snapshots>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <id>my-repo</id>
            <name>my-repo</name>
            <url>http://10.10.10.230:8081/nexus/content/groups/public/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T09:51:49.870

正如@otakun85 所说，根本没有技术差异。这是为了让插件具有不同的配置-> 与正常工件相反的行为。有关更多详细信息，请参阅[存储库与 pluginRepository](https://stackoverflow.com/a/12045065/1626878)。

还要检查[maven-users mailing list archives](http://mail-archives.apache.org/mod_mbox/maven-users/200604.mbox/%3C443CA75A.4010309@web.de%3E)，它提供了很好的解释。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-25T19:37:34.533

Maven 将使用配置的`pluginRepository`. 其他工件依赖项（例如父 pom）使用`repository`. 注意：maven central 上可用的东西将默认解决，因此您通常不需要包含`repository`这些内容。

例如，如果你的 pom.xml 指定了一个父 pom 和一个插件依赖，它们都存在于同一个存储库中，你仍然必须**同时** `repository`指定AND `pluginRepository`。如果您只配置一个，那么 maven 会抱怨“无法解决的*X* ”错误。

# javascript - 如何在html页面上实现不同的语言

> ID：14396034
> 
> 赞同：0
> 
> 时间：2013-01-18T09:38:34.783
> 
> 标签：javascript, html, multilingual

我只是一个通过 phonegap 使用 html/css/js 开发应用程序的新手。我一直在搜索有关如何使我的应用程序以不同语言显示的信息，但 Google 不理解我。所以想法是在 index.html 上有一个按钮，让用户选择显示应用程序的语言，在这种情况下是西班牙语/英语，没有什么像阿拉伯语 blablabla 这样奇怪的......所以我想解决方案必须与将我在 html 中加载的所有文本转换为变量有关，然后根据选择的语言显示正确的文本。我不知道怎么做，我也找不到例子。所以这就是我所要求的......如果有人可以提供一些代码片段来查看 html 变量的工作原理以及我应该如何保存用户语言选择......

赞赏的家伙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:42:29.400

这可以通过国际化（例如 i18N）来完成。为此，您需要为每种语言提供单独的文件并将所有文本放入其中。在 Google 上搜索国际化。

否则你可以考虑嵌入谷歌翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:59:34.793

这取决于应用程序中语言依赖性的复杂性。如果您在强图形应用程序中只有少量短文本，您可以将文本存储在 JavaScript 变量中，或者更好的是，存储在对象的属性中，每种语言一个对象。

但是，如果您还希望遇到更深层次的语言依赖性（例如，显示动态计算的十进制数字，例如英语中的 1.5 和西班牙语中的 1,5），那么使用[Globalize.js](https://github.com/jquery/globalize)之类的库可能会更好（描述在我的[《使用 JavaScript 和 Globalize.js 走向全球](http://www.bytelevelbooks.com/books/global_javascript.html)》一书中有一些详细信息）。这样，您可以使用统一的方法，例如使用字符串编写字符串`Globalize.localize('greeting')`，使用数字，使用`Globalize.format(x, 'n1')`日期编写日期`Globalize.format(date, 'MMM d')`。

# ruby-on-rails - Ruby/Rails：为所有方法添加、添加代码

> ID：14396035
> 
> 赞同：2
> 
> 时间：2013-01-18T09:38:41.310
> 
> 标签：ruby-on-rails, ruby

我编写了一个小型基准测试类来测试我的代码进行开发。目前我必须将类添加到每个方法的开头和结尾。是否可以预先添加、附加，这样我就不必弄乱我的代码了？

```
class ApplicationController    
    before_filter :init_perf
    after_filter :write_perf_results_to_log!

    def init_perf
      @perf ||= Perf.new
    end

    def write_perf_results_to_log!
      @perf.results
    end
end

class Products < ApplicationsController    
    def foo      
      @perf.log(__methond__.to_s)
      caculation = 5 *4
      @perf.write! 
    end

    def bar      
      @perf.log(__methond__.to_s)
      caculation = 1 / 5
      @perf.write! 
    end
end 
```

这是 Perf 类。它位于服务文件夹中。

```
class Perf
  def initialize
    @results = []
  end

  def log(note)
    @start = Time.now
    @note = note
  end

  def write!
    if @results.find {|h| h[:note] == @note } # Update :sec method exists in results 
      @results.select { |h| h["note"] == @note; h[":sec"] = (Time.now - @start).round(3) }
    else # Add new Hash to results
      @results << { :note => @note, :sec => (Time.now - @start).round(3) }
    end
  end

  def results
    content = "
    PERFORMANCE STATISTICS!
    "
    @results.each do |r|
      content += r[:note] + "   " + r[:sec].to_s + "
      "
    end
    content += "
    "
    Rails.logger.info content
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T10:58:56.277

在一般计算术语中，您想要做的称为[代码检测](http://en.wikipedia.org/wiki/Instrumentation_%28computer_programming%29)。有几种方法可以实现这一点，但是这里有一个使用一些元编程的（粗略的）示例：

首先定义一个新方法，我们将使用它来注入我们的检测代码：

```
class ApplicationController
  def self.instrument_methods(*methods)
    methods.each { |m|
      # Rename original method
      self.send(:alias_method, "#{m}_orig", m)

      # Redefine old method with instrumentation code added
      define_method m do
        puts "Perf log #{m}"
        self.send "#{m}_orig"
        puts "Perf write"
      end
    }
  end
end 
```

如何使用它：

```
class Product < ApplicationController
  def foo
    puts "Foo"
  end

  def bar
    puts "Bar"
  end

  # This has to be called last, once the original methods are defined
  instrument_methods :foo, :bar
end 
```

然后：

```
p = Product.new
p.foo
p.bar 
```

将输出：

```
Perf log foo
Foo
Perf write
Perf log bar
Bar
Perf write 
```

以下是检测 ruby​​ 代码和测量性能的其他一些方法：

[http://ruby-prof.rubyforge.org/](http://ruby-prof.rubyforge.org/)
[http://www.igvita.com/2009/06/13/profiling-ruby-with-googles-perftools/](http://www.igvita.com/2009/06/13/profiling-ruby-with-googles-perftools/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T22:44:19.650

我是[aspector](https://github.com/gcao/aspector) gem的作者。感谢 dimuch 提到它。

我想出了一个使用aspector的解决方案。以下是高级步骤：

1.  创建一个方面作为 Aspector::Base 的子类
2.  在方面内部，定义建议（之前/之后/周围是主要的建议类型）
3.  在目标类（或模块/对象）上应用方面

完整的代码可以在[这个 gist](https://gist.github.com/4614761)中找到。如果您有任何问题或解决方案无法达到您的预期，请随时告诉我。

```
类 PerfAspect < Aspector::Base
  围绕 options[:action_methods] 做 |proxy|
    @perf ||= Perf.new
    代理调用
    @perf.results
  结尾

  围绕 options[:other_methods], :method_arg => true do |method, proxy, *args, &block|
    @perf.log（方法）
    结果 = proxy.call *args, &block
    @perf.write！
    结果
  结尾
结尾

action_methods = [:action]
other_methods = Products.instance_methods(false) - action_methods

PerfAspect.apply（产品，：action_methods => action_methods，：other_methods => other_methods）

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:38:17.660

有更好的解决方案。

```
class ApplicationController
    def self.inherited(klass)
        def klass.method_added(name)
            return if @_not_new
            @_not_new = true
            original = "original #{name}"
            alias_method original, name
            define_method(name) do |*args, &block|
                puts "==> called #{name} with args: #{args.inspect}"
                result = send original, *args, &block
                puts "<== result is #{result}"
                result
            end
            @_not_new = false
        end
    end
end

class Product < ApplicationController

    def meth(a1, a2)
        a1 + a2
    end
end

product = Product.new
puts product.meth(2,3) 
```

结果：

```
==> called meth with args: [2, 3]
<== result is 5
5 
```

来源和解释在这里： http: [//pragprog.com/screencasts/v-dtrubyom/the-ruby-object-model-and-metaprogramming](http://pragprog.com/screencasts/v-dtrubyom/the-ruby-object-model-and-metaprogramming)。我建议花不多的钱来学习这门课程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T10:58:10.367

猜测[aspector](https://github.com/gcao/aspector) gem可以提供帮助。它没有很好的文档记录，但有有用的例子。

# kendo-ui - 从网格中的数字字段中删除微调器

> ID：14396036
> 
> 赞同：3
> 
> 时间：2013-01-18T09:38:48.567
> 
> 标签：kendo-ui

我在 kendoNumericTextBox 文档中注意到有一个名为 spinners 的属性 **可以**启用或禁用微调器。

问题是如何在网格上的数字字段上访问并将此属性设置为 false。在当前阶段，我将我的字段声明为数字。

我不知道这个[http://demos.kendoui.c​​om](http://demos.kendoui.com/web/grid/editing-custom.html) /web/grid/editing-custom.html在这种情况下是否有任何帮助，或者有更简单的解决方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T10:33:19.367

`spinners`的初始化中有一个标志`kendoNumericTextBox`。

```
$("#numeric").kendoNumericTextBox({
    spinners : false
}); 
```

**编辑**

要在其中使用它，`grid`您应该[`editor`](http://docs.kendoui.com/api/web/grid#columnseditor-function)在列定义中定义一个函数。例子：

```
{ field: "number", title: "Number", editor: editNumberWithoutSpinners } 
```

并定义`editNumberWithoutSpinners`为：

```
function editNumberWithoutSpinners(container, options) {
    $('<input data-text-field="' + options.field + '" ' +
            'data-value-field="' + options.field + '" ' +
            'data-bind="value:' + options.field + '" ' +
            'data-format="' + options.format + '"/>')
            .appendTo(container)
            .kendoNumericTextBox({
                spinners : false
            });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-26T16:46:30.327

游戏迟到了，但我只是摆弄 CSS，这似乎可以解决问题：

1\. 隐藏数字文本框内的选择区域 2\. 删除添加以允许选择器的右侧填充

```
 .k-numerictextbox .k-select { display: none; }
 .k-numerictextbox .k-numeric-wrap { padding-right: 2px; } 
```

显然检查您的 html 以确保这些样式存在，并根据您的情况使其或多或少具有包容性。

# javascript - 一旦 Javascript 变量达到特定数字，使内容可见

> ID：14396043
> 
> 赞同：0
> 
> 时间：2013-01-18T09:39:21.287
> 
> 标签：javascript

我是一个 javascript 菜鸟。一旦用户点击了页面上的 3 个链接，我想让不同的内容出现在我的页面上。因此，我假设我想要一个在每次单击链接时都会增加的变量，以及一个 if 语句，该语句仅在变量达到我想要的数字时才显示内容。这是我到目前为止所得到的：

```
<script>
var pass = 0;
function clicked() {
pass = pass + 1;
}
</script> 
```

然后在链接上：

```
<a href="example.com" onclick="clicked();">LINK</a> 
```

然后在内容上

```
<script>    
if (pass > 1) {
document.write('<a href="first.html">First</a><br>') }
else {document.write('<a href="second.htm">Second</a><br>') }
</script> 
```

它不起作用，变量始终等于 0。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:42:36.400

您的“内容脚本”仅被调用一次（何时`pass`仍为零）。

每次点击链接时都需要检查：

```
var pass = 0;
function clicked() {
   pass = pass + 1;
   if (pass > 1) {
      document.write('<a href="first.html">First</a><br>');
   } else {
      document.write('<a href="second.htm">Second</a><br>');
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:44:50.687

这是一个例子：

```
var count = 1,
    topics = ['Hello', 'Well...', 'Goodbye'];
function clickHandler() {
  if (count >= 3) {
    changeText(Math.round((Math.random() * 2)));
    count = 1;
  } else {
    count += 1;
  }
}

function changeText(idx) {
  document.getElementById('content').innerHTML = topics[idx]; 
} 
```

当链接被按下 3 次时，您将从列表 ( `topics`) 中获得随机内容。

改变了什么

1.  在`clickHandler`计数器中正在重置，因此每 3 次点击都会显示随机内容
2.  我使用`innerHTML`而不是`document.write`- 更好的做法
3.  `count`每次点击都会检查一次，而不是像你检查一次`pass`。

**[这里](http://jsfiddle.net/FgyqW/2/)**的例子。

# python - 关于生成器表达式中 Python 从内到外的求值顺序

> ID：14396044
> 
> 赞同：4
> 
> 时间：2013-01-18T09:39:23.637
> 
> 标签：python, generator, operator-precedence

在迭代以下生成器表达式时，

```
fun(i) for i in mylist if i not in setA.union(setB) 
```

是`setA.union`在每次迭代中调用的方法，还是只调用一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:30:46.943

验证它的另一种方法是对其进行概要分析。借用@AshwiniChaudhary 的示例，我将通过 cProfile 运行它

```
>>> def func():
     a=set([1,2,3])
     b=set([3,4,5])
     c=[i for i in xrange(10) if i in a.union(b)]

>>> import cProfile
>>> cProfile.run("func()")
         13 function calls in 0.000 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 <pyshell#1045>:1(func)
        1    0.000    0.000    0.000    0.000 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
       10    0.000    0.000    0.000    0.000 {method 'union' of 'set' objects} 
```

这里清楚地提到，工会被称为`10`时代

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T09:40:44.883

是的，`setA.union(setB)`在迭代中每次都被调用，

您应该在生成器表达式之前执行此操作并将其存储在变量中

```
setvalues = setA.union(setB)

fun(i) for i in mylist if i not in setvalues 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T09:51:22.207

`dis`使用模块的简单证明：

```
In [24]: def func():
   ....:     a=set([1,2,3])
   ....:     b=set([3,4,5])
   ....:     c=[i for i in xrange(10) if i in a.union(b)]
   ....:     

In [25]: dis.dis(func)

  4          42 BUILD_LIST               0
             45 LOAD_GLOBAL              1 (xrange)
             48 LOAD_CONST               6 (10)
             51 CALL_FUNCTION            1
             54 GET_ITER                          #iterator returned from xrange

        >>   55 FOR_ITER                33 (to 91) #until the iterator is not exhausted
             58 STORE_FAST               2 (i)
             61 LOAD_FAST                2 (i)
             64 LOAD_FAST                0 (a)
             67 LOAD_ATTR                2 (union)
             70 LOAD_FAST                1 (b)
             73 CALL_FUNCTION            1      #union() is being called in each iteration
             76 COMPARE_OP               6 (in)
             79 POP_JUMP_IF_FALSE       55
             82 LOAD_FAST                2 (i)
             85 LIST_APPEND              2
             88 JUMP_ABSOLUTE           55
                                                         #end of loop    
        >>   91 STORE_FAST               3 (c)
             94 LOAD_CONST               0 (None)
             97 RETURN_VALUE 
```

因此，对于您的示例，它将在每次迭代中被调用，即`len(mylist)`时间。

# sugarcrm - 自定义 SugarCRM 6.5 主题

> ID：14396045
> 
> 赞同：1
> 
> 时间：2013-01-18T09:39:24.470
> 
> 标签：sugarcrm

我是 SugarCRM 6.5 CE 的新手。我一直在尝试通过复制已经可用的主题并更改文件夹名称来制作自定义主题。该主题现在在下拉菜单中可用，但我对其 CSS 所做的任何更改都没有发生。提前致谢。这是我的主题定义文件

```
 $themedef = array(
    'name'  => "Test",
    'description' => "Default theme from Sugar 5",
    'version' => array(
        'regex_matches' => array('6\.*.*'),
        ),
    'group_tabs' => true,
    'parentTheme' => "Test",
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:21:23.940

您必须像这样设置父主题：

'parentTheme' => "Sugar5", // 这是您要覆盖的标准主题。

# dynamic - Coldfusion动态查询输出

> ID：14396048
> 
> 赞同：3
> 
> 时间：2013-01-18T09:39:34.187
> 
> 标签：dynamic, coldfusion, concatenation, cfoutput

不确定这是否可能。我想做的是通过查询构建输出字符串。我正在连接输出“名称”并将“值”附加到末尾。然后输出字符串。我不认为这是可能的。但我正在寻找任何替代方案。

所以这就是我所拥有的：

`qry1`是主要查询。`qry2`获取要附加到字符串末尾的值。所以变量的值`test`看起来像这样：`"variables.qry1.100"`

这是有意义的，`qry1`因为这是查询对象的一部分。那么这个字符串将从数据库中返回一个正确的值，因为有一个名为 100 的子查询

```
<cfoutput>
<cfloop query="variables.qry2">
    <cfset test = variables.qry1\. & variables.qry2.#valueID#>
<td>#test#</td> 
</cfloop>
</cfoutput> 
```

非常感谢。

JC

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T11:23:40.810

所以基本上 - 给定你的例子 - 你有一个`qry1`名为`100`（等，也许还有`200`，`300`等等）的列，值 100、200、300 等是列中的行`valueID`值`qry2`？并且`qry1`是单行查询？是对的吗？

如果您在动态字符串中有列的名称，则使用以下语法：

```
queryName[columnName][rowNumber] 
```

where`queryName`是查询的变量，是`columnName`保存列名的字符串，`rowNumber`是行号（实际数字或包含一个的变量）。

因此，使用您的示例变量，您的代码将是：

```
<td>#variables.qry1[variables.qry2.valueID][1]#</td> 
```

没有必要使用`evaluate()`它来执行此操作，在这里也不是一个好的解决方案。`evaluate()`自 CF5 时代以来，很少需要在 CFML 中使用。

我不知道您的数据结构是如何变成现在这样的背景的，但是如果您需要编写您建议您需要的那种代码......我会很长时间地努力研究如何你在做事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T10:30:58.503

您尝试做的事情是可能的，但您需要先构建一个变量名。

代替

```
<cfset test = variables.qry1\. & variables.qry2.#valueID#> 
```

尝试

```
<cfset test = "variables.qry1.#variables.qry2.valueID#"> 
```

然后将进行测试`variables.qry1.[valueID value]`。请注意，[valueID value] 是从查询中返回的内容，因此是变量中的实际值。

然后显示 的值`variables.qry1.[valueID value]`。

```
#evaluate(test)# 
```

**更新**正如亚当卡梅伦的回答所述。你真的应该尽量避免使用这个`evaluate()`功能，它会影响性能，而不是被认为是好的做法。而是使用以下代码（这是从亚当卡梅隆的回答中复制的）

```
#variables.qry1[variables.qry2.valueID][1]# 
```

注意：请查看 Adam Cameron 的答案，以更好地描述正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T12:31:29.273

亚当有正确的解决方案。这是您的原始代码的修改版本，可以执行我认为您正在尝试做的事情。

```
<cfoutput query="variables.qry1">
<tr>
<cfloop query="variables.qry2">
    <cfset test = variables.qry1[variables.qry2.valueID][variables.qry1.currentrow]>
    <td>#test#</td> 
</cfloop>
</tr>
</cfoutput> 
```

# java - Java和与串口通信

> ID：14396050
> 
> 赞同：1
> 
> 时间：2013-01-18T09:39:37.320
> 
> 标签：java, serial-port

我对此了解不多，所以这将是一个非常基本的问题。

我有一个漂亮的 USB 小东西，它可以模拟 COM 端口。这是一个简单的开关，我可以向其发送三种不同的信号：ON、OFF 和 GET STATUS

我已经使用名为 RealTerm 的终端程序对其进行了测试。在这里，我可以以设置的波特率和其他选项打开端口，然后将 bin 文件发送到端口。当我得到这个东西时，我还下载了三个不同的 .bin 文件——一个用于 ON，一个用于 BREAK，一个用于 GET STATUS。这就像一个魅力，端口返回相应的代码等。

现在，我想在 Java 中尝试这个（首先，然后可能是 C/C++）。所以我得到了一个名为 JSSC (v0.9) 的库，这使得这很容易。这就是我所做的：

```
public static void main(String[] args) {
    String[] portNames = SerialPortList.getPortNames();

    for(int i = 0; i < portNames.length; i++){
        System.out.println(portNames[i]);
    }

    SerialPort serialPort = new SerialPort("COM10");

    try {
        serialPort.openPort();//Open serial port
        serialPort.setParams(SerialPort.BAUDRATE_9600, 
                             SerialPort.DATABITS_8,
                             SerialPort.STOPBITS_1,
                             SerialPort.PARITY_NONE);

        serialPort.writeBytes("0x55 01 01 02 00 00 00 59".getBytes());
        serialPort.closePort();
    }
    catch (SerialPortException ex) {
        System.out.println(ex);
    }
} 
```

波特率、数据和停止位是正确的。当我插入设备时，system.out.prinln 列出了端口，所以看起来设备被检测到了。

现在，该设备具有以下代码字：

```
Make:         0x55 01 01 02 00 00 00 59
Break:        0x55 01 01 01 00 00 00 58
Check status: 0x55 01 01 00 00 00 00 57 
```

然后我是否应该能够将这些十六进制字符串传递给 java 程序中的设备，并获取/观察结果？如果是这样，我该怎么做？只是像上面那样的 writeBytes() 或 writeString() 不会做任何事情。（当 MAKE 或 BREAK 信号起作用时，我会听到设备发出咔哒声）。

或者有没有办法将这些 .bin 文件传递​​到端口，就像我在 RealTerm 中所做的那样？

另外，有谁知道这些 .bin 文件可能是什么类型的文件？我从（便宜）那里买的那个人信息量不大，不想帮助解决与设备没有直接关系的问题或回答问题（当然，这是可以理解的）。

我不需要在这里深入研究微处理器编程或类似主题，因为我实际上只是在尝试完成一些基本操作。但是，一些洞察力或概述当然是必要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:47:33.880

在我看来，这些代码：

```
Make:         0x55 01 01 02 00 00 00 59
Break:        0x55 01 01 01 00 00 00 58
Check status: 0x55 01 01 00 00 00 00 57 
```

你必须像字节数组一样发送。它们看起来像十六进制数字，所以尝试这样做：

```
byte[] mike = new byte[]{0x55, 0x01, 0x01, 0x02, 0x00, 0x00, 0x00, 0x59};
serialPort.writeBytes(mike);
serialPort.flush(); // is this method available? I think you should invoke it, if it is present
serialPort.closePort(); 
```

# web-scraping - 使用 HtmlUnit 获取页面源：URL 卡住了

> ID：14396052
> 
> 赞同：2
> 
> 时间：2013-01-18T09:39:39.350
> 
> 标签：web-scraping, monitoring, htmlunit

我正在尝试使用 Html-Unit get 方法获取以下 URL 的页面源。

[http://denydesigns.com/collections/barbara-sherman-fleece-throw-blanket/products/barbara-sherman-antique-fleece-throw-blanket](http://denydesigns.com/collections/barbara-sherman-fleece-throw-blanket/products/barbara-sherman-antique-fleece-throw-blanket)

它卡在某个地方。我试图找出原因，但我没有得到它。我还尝试查看由 HtmlUnit 创建的线程是否被 BLOCKED ar WAITING，但事实并非如此。

## **以下是我的 HTML Unit 生成的日志。**

```
18 Jan 2013 04:14:47,832 -  main - ERROR - com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:79) - runtimeError: message=[The data necessary to complete this operation is not yet available.] sourceName=[http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js] line=[16] lineSource=[null] lineOffset=[0]
18 Jan 2013 04:14:47,924 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.html.HTMLDocument.jsxFunction_getElementById(HTMLDocument.java:1049) - getElementById(script1358500487923) did a getElementByName for Internet Explorer
18 Jan 2013 04:14:49,498 -  main - ERROR - com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:79) - runtimeError: message=[The data necessary to complete this operation is not yet available.] sourceName=[http://code.jquery.com/jquery-latest.js] line=[911] lineSource=[null] lineOffset=[0]
18 Jan 2013 04:14:49,565 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.html.HTMLDocument.jsxFunction_getElementById(HTMLDocument.java:1049) - getElementById(sizzle-1358500489525) did a getElementByName for Internet Explorer
18 Jan 2013 04:14:53,047 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.ActiveXObject.jsConstructor(ActiveXObject.java:128) - Automation server can't create object for 'ShockwaveFlash.ShockwaveFlash.7'.
18 Jan 2013 04:14:53,048 -  main - ERROR - com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:79) - runtimeError: message=[Automation server can't create object for 'ShockwaveFlash.ShockwaveFlash.7'.] sourceName=[http://www.google-analytics.com/ga.js] line=[18] lineSource=[null] lineOffset=[0]
18 Jan 2013 04:14:53,060 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.ActiveXObject.jsConstructor(ActiveXObject.java:128) - Automation server can't create object for 'ShockwaveFlash.ShockwaveFlash.6'.
18 Jan 2013 04:14:53,061 -  main - ERROR - com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:79) - runtimeError: message=[Automation server can't create object for 'ShockwaveFlash.ShockwaveFlash.6'.] sourceName=[http://www.google-analytics.com/ga.js] line=[18] lineSource=[null] lineOffset=[0]
18 Jan 2013 04:14:53,061 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.ActiveXObject.jsConstructor(ActiveXObject.java:128) - Automation server can't create object for 'ShockwaveFlash.ShockwaveFlash'.
18 Jan 2013 04:14:53,062 -  main - ERROR - com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:79) - runtimeError: message=[Automation server can't create object for 'ShockwaveFlash.ShockwaveFlash'.] sourceName=[http://www.google-analytics.com/ga.js] line=[18] lineSource=[null] lineOffset=[0]
18 Jan 2013 04:14:53,829 -  main - ERROR - com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:79) - runtimeError: message=[The data necessary to complete this operation is not yet available.] sourceName=[http://chat.livechatinc.net/licence/1051689/script.cgi?lang=en&groups=0] line=[60] lineSource=[null] lineOffset=[0]
18 Jan 2013 04:14:54,878 -  main - ERROR - com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:79) - runtimeError: message=[The data necessary to complete this operation is not yet available.] sourceName=[http://platform.twitter.com/widgets.js] line=[5] lineSource=[null] lineOffset=[0]
18 Jan 2013 04:14:56,215 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.html.HTMLDocument.jsxFunction_getElementById(HTMLDocument.java:1049) - getElementById(sizzle-1358500496196) did a getElementByName for Internet Explorer
18 Jan 2013 04:14:56,458 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.html.HTMLDocument.jsxFunction_execCommand(HTMLDocument.java:1590) - Nothing done for execCommand(BackgroundImageCache, ...) (feature not implemented)
18 Jan 2013 04:14:58,086 -  main -  WARN - com.gargoylesoftware.htmlunit.javascript.host.html.HTMLDocument.jsxFunction_getElementById(HTMLDocument.java:1049) - getElementById(sizzle-1358500489525) did a getElementByName for Internet Explorer 
```

* * *

## 以下是我创建的进程的线程转储（使用 jstack）

```
2013-01-18 04:17:46
Full thread dump Java HotSpot(TM) 64-Bit Server VM (22.1-b02 mixed mode):

"Attach Listener" daemon prio=10 tid=0x0000000002955000 nid=0x16dd waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Service Thread" daemon prio=10 tid=0x00007feca00cc800 nid=0x154f runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x00007feca00ca000 nid=0x154e waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x00007feca00c7000 nid=0x154d waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00007feca00c5000 nid=0x154c runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x00007feca007c800 nid=0x154b in Object.wait() [0x00007fec9fffe000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000000c2369e20> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:135)
        - locked <0x00000000c2369e20> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:151)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

"Reference Handler" daemon prio=10 tid=0x00007feca007a000 nid=0x154a in Object.wait() [0x00007feca4157000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00000000c23699e0> (a java.lang.ref.Reference$Lock)
        at java.lang.Object.wait(Object.java:503)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
        - locked <0x00000000c23699e0> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x00000000025d9000 nid=0x1546 runnable [0x00007fecaa8b6000]
   java.lang.Thread.State: RUNNABLE
        at net.sourceforge.htmlunit.corejs.javascript.ScriptableObject.getTopLevelScope(ScriptableObject.java:2007)
        at com.gargoylesoftware.htmlunit.javascript.SimpleScriptable.getWindow(SimpleScriptable.java:303)
        at com.gargoylesoftware.htmlunit.javascript.SimpleScriptable.getWindow(SimpleScriptable.java:293)
        at com.gargoylesoftware.htmlunit.javascript.SimpleScriptable.getPrototype(SimpleScriptable.java:251)
        at com.gargoylesoftware.htmlunit.javascript.host.html.HTMLCollection.<init>(HTMLCollection.java:99)
        at com.gargoylesoftware.htmlunit.javascript.host.html.HTMLCollection.<init>(HTMLCollection.java:110)
        at com.gargoylesoftware.htmlunit.javascript.host.HTMLCollectionFrames.<init>(Window.java:1751)
        at com.gargoylesoftware.htmlunit.javascript.host.Window.getFrames(Window.java:759)
        at com.gargoylesoftware.htmlunit.javascript.host.Window.jsxGet_length(Window.java:749)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at net.sourceforge.htmlunit.corejs.javascript.MemberBox.invoke(MemberBox.java:172)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptableObject$GetterSlot.getValue(ScriptableObject.java:342)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptableObject.getImpl(ScriptableObject.java:2523)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptableObject.get(ScriptableObject.java:438)
        at com.gargoylesoftware.htmlunit.javascript.SimpleScriptable.get(SimpleScriptable.java:75)
        at com.gargoylesoftware.htmlunit.javascript.host.Window.get(Window.java:1226)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptableObject.getProperty(ScriptableObject.java:2088)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1527)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getObjectProp(ScriptRuntime.java:1513)
        at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpretLoop(Interpreter.java:1398)
        at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpret(Interpreter.java:854)
        at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:164)
        at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.doTopCall(ContextFactory.java:429)
        at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.doTopCall(HtmlUnitContextFactory.java:267)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3183)
        at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(InterpretedFunction.java:162)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$4.doRun(JavaScriptEngine.java:538)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:589)
        - locked <0x00000000c274d308> (a com.gargoylesoftware.htmlunit.html.HtmlPage)
        at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:537)
        at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:538)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:545)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.callFunction(JavaScriptEngine.java:520)
        at com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScriptFunctionIfPossible(HtmlPage.java:896)
        at com.gargoylesoftware.htmlunit.javascript.host.EventListenersContainer.executeEventListeners(EventListenersContainer.java:162)
        at com.gargoylesoftware.htmlunit.javascript.host.EventListenersContainer.executeBubblingListeners(EventListenersContainer.java:221)
        at com.gargoylesoftware.htmlunit.javascript.host.Node.fireEvent(Node.java:735)
        at com.gargoylesoftware.htmlunit.html.HtmlElement$2.run(HtmlElement.java:866)
        at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:537)
        at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(ContextFactory.java:538)
        at com.gargoylesoftware.htmlunit.html.HtmlElement.fireEvent(HtmlElement.java:871)
        at com.gargoylesoftware.htmlunit.html.HtmlPage.executeEventHandlersIfNeeded(HtmlPage.java:1162)
        at com.gargoylesoftware.htmlunit.html.HtmlPage.initialize(HtmlPage.java:202)
        at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:440)
        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:311)
        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:389)

"VM Thread" prio=10 tid=0x00007feca0072800 nid=0x1549 runnable

"GC task thread#0 (ParallelGC)" prio=10 tid=0x00000000025e4000 nid=0x1547 runnable

"GC task thread#1 (ParallelGC)" prio=10 tid=0x00000000025e5800 nid=0x1548 runnable

"VM Periodic Task Thread" prio=10 tid=0x00007feca00d7800 nid=0x1550 waiting on condition

JNI global references: 317 
```

* * *

我不确定为什么 URL 卡住了。它不是从方法中出来的。任何机构都可以调查一下。

**更新** ***com.gargoylesoftware.htmlunit.html.HTMLParser.HtmlUnitDOMBuilder.parse(XMLInputSource)*** @Override

```
 public void parse(final XMLInputSource inputSource) throws XNIException, IOException {
        final HtmlUnitDOMBuilder oldBuilder = page_.getBuilder();
        page_.setBuilder(this);
        try {
            super.parse(inputSource);
        }
        finally {
            page_.setBuilder(oldBuilder);
        }
    } 
```

我附加了来自 HtmlUnit 和调试的 HtmlUnit 源代码。上述方法未完全执行。

另外，我设置了超时如下：

```
webClient.setTimeout(120000); 
```

那么为什么它在 2 分钟后没有出现并说 SomeThingTimeOutException 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T14:05:29.067

我已经跟进了 HtmlUnit 用户组。他们已经在 2.12 版本的 HtmlUnit 中解决了这个问题。请检查。

# php - 为什么 onclick 不起作用？

> ID：14396060
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:40:16.557
> 
> 标签：php, javascript, onclick

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

```
if($sendmail) {
  echo "<div class=\"success\" class=\"regdet\">Congratulations $name! You have successfully registered for <span>AADAB 2013</span>! An email has been sent to your email with the details of your form.<br><br>If the page does not automatically redirect you in 5 seconds, click <input type=\"button\" value=\"Here\" onclick=\"window.close()\"> to continue.</div>";
  header (refresh: 5, url="form.php");
} else {
  echo "<span style=\"color: red; background: rgba(219,219,219,0.7);\">There was an error in submitting your form. Click <a href=\"form.php\">here</a> to try again!</span>";
} 
```

我试图在 5 秒后将用户重定向到表单（这是同时具有表单和 PHP 命令的当前表单）......因为它没有发生，我试图包含一个按钮来关闭在表单确认页面上按下后的窗口。

这也没有发生。

正在显示消息，并且表单正在完美地将电子邮件发送到我的电子邮件帐户，但这一小部分让我很烦！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:45:16.140

您应该将参数`header()`作为字符串传递（实际上您是在发送原始标头字符串）。

所以像这样：

```
header('refresh:5;url=form.php'); 
```

至于`window.close()`. 如果您没有使用 Javascript 打开窗口并尝试使用窗口处理程序将其关闭，您实际上可能会遇到问题。由于安全原因，Javascript 不会让您关闭用户看到的任何窗口。理论上你应该看到一个浏览器警告告诉你 JS 想要关闭这个窗口（但我没有设法让它在 IE 9 或 FF 上运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:52:50.323

如果您尚未向浏览器输出任何内容，则只能输出标题。在你的情况下，你的`echo`东西，然后尝试发送一个`header()`.

你也应该引用你的论点：

```
// no output so far....
header ('refresh: 5; url=form.php'); 
```

如果您查看错误日志，您应该会发现：

> PHP 警告：无法修改标头信息 - 标头已由...发送

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:51:10.510

“仅允许对使用 window.open 方法由脚本打开的窗口调用此方法。如果该窗口不是由脚本打开的，则 JavaScript 控制台中会出现以下错误：脚本可能无法关闭已打开的窗口不是由脚本打开的。”

当您打开窗口时，这应该被分配给一个变量。

```
openedWindow = window.open('moreinfo.htm'); 
```

然后当你想关闭它时......

```
openedWindow.close(); 
```

如果你想用 JS 关闭窗口，你也可以用 JS 重定向...

```
location.href = 'form.php'; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T09:41:50.643

window.close() 在许多现代浏览器中不能单独工作。

有一些解决方法：[window.close 和 chrome 的问题](https://stackoverflow.com/questions/2032640/problem-with-window-close-and-chrome)

或者您是否可以使用模式弹出窗口而不是新窗口？

# c# - 参数字典包含方法的不可空类型“System.Int32”的参数“foo”的空条目

> ID：14396061
> 
> 赞同：0
> 
> 时间：2013-01-18T09:40:20.023
> 
> 标签：c#, asp.net-mvc, facebook, facebook-c#-sdk

从我在其他帖子中看到的内容来看，此错误是因为方法签名中给出的参数与发布的输入名称不匹配。或者以某种方式甚至没有发送值。

首先这个页面是一个登录Facebook的测试页面。它检索用户的 uid 和访问令牌，然后将其发送到服务器以存储在会话中并重定向到另一个页面。所有的 javascript 都取自 C# FB sdk，服务器端非常基础。

我感到困惑的真正问题是，如果我在 FB 上以我自己的帐户登录但测试用户，而不是 API 生成的临时测试用户帐户的朋友，它会在弹出窗口要求用户授予应用程序权限。我在提交表单数据之前查看了它，它隐藏了与服务器上的参数对应的名称和值的输入。

知道为什么它不会通过帖子与测试用户一起发送 foo 变量吗？

编辑：这是适用于我的帐户的 javascript，无法为测试用户发送 uid。我重命名了一些查询字符串参数，但是

```
var uid = response.authResponse.userID;
var accessToken = response.authResponse.accessToken;

// Do a post to the server to finish the logon
// This is a form post since we don't want to use AJAX
var form = document.createElement("form");
form.setAttribute("method", 'post');
form.setAttribute("action", 'BAR>');

var tField = document.createElement("input");
tField.setAttribute("type", "hidden");
tField.setAttribute("name", 'RAHR');
tField.setAttribute("value", accessToken);
form.appendChild(tField);

var uField = document.createElement("input");
uField.setAttribute("type", "hidden");
uField.setAttribute("name", 'foo');
uField.setAttribute("value", uid);
form.appendChild(uField);

document.body.appendChild(form);
form.submit();

//Server side
public ActionResult BAR(string RAHR, int foo) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T20:57:44.663

将您的方法从 --> public ActionResult BAR(string RAHR, int foo) 替换为 --> public ActionResult BAR(string RAHR, int? foo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:57:10.807

事实证明，进来的价值太大了。我猜是导致 int 参数溢出而不是给出一个奇怪的值 MVC 将其归零。

# playframework-2.0 - 为什么在 [myDomain]/_stax/status 调用我的 WebApp？

> ID：14396066
> 
> 赞同：0
> 
> 时间：2013-01-18T09:40:30.243
> 
> 标签：playframework-2.0, cloudbees

我有一个在 Cloudbees 上运行的 Play-2.0.4-WebApp，它从 Cloudbees 内部服务器 ( `10.204.X.Y`) 上被调用（大约每天一次） `http://myDomain/_stax/status`。

但由于这条路线在我的 Play-App 中不存在，它显然会抛出一个`RouteNotFound`-Exception。

到目前为止，我已经在网上搜索了“_stax/status”，但除了[这个](https://stackoverflow.com/questions/11957578/app-runs-locally-but-returns-404-running-on-cloudbees)之外什么也没找到。但这并没有让我走得更远。

我还有两个问题：

*   他们为什么叫它？
*   他们期望得到什么作为回应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:01:57.390

正如您可能猜到的那样，这只是对应用程序的活动性检查。命名空间中的 URL`_stax/*`不应该由用户的应用程序处理，而是由 ClickStack 处理，即通用应用程序框架（此处为 Play2）和 CloudBees 监控和管理基础架构之间的适配器。

我不确定为什么在这种情况下，这个请求被传递到应用程序的路由逻辑，而不是在较低级别处理。您无需对应用程序进行任何更改即可处理它 - 无论如何细节都可能发生变化 - 但如果访问日志提及令人恼火（或者您怀疑它会导致其他问题），只需打开支持票。

# jquery - jQuery 在比较相似字符串时给出错误答案

> ID：14396068
> 
> 赞同：0
> 
> 时间：2013-01-18T09:40:52.193
> 
> 标签：jquery, string

首先，我检查了关于 SO 的类似主题，例如：[Comparing similar strings in jquery](https://stackoverflow.com/questions/9195918/comparing-similar-strings-in-jquery) 但它们没有帮助。

这是我的代码：

```
 //jQuery functions
    (function($)
        {
            arrayToString = function(array)
            {
                var s = "";
                var a = [];
                $.each(array, function(i, el){
                    if($.inArray(el, a) === -1)
                        {
                            a.push(el);
                            if (s!="")
                                {
                                    s += "@~@~@";
                                }
                            s += el;
                        }
                });
                return s;
            };
        })(jQuery);

    (function($)
        {
            intersectionOfArrays = function(a,b)
            {
                var array = [];
                $.each(a, function(i, el){
                    if($.inArray(el, array) === -1 && $.inArray(el, b) != -1) array.push(el);
                });
                return array;
            };
        })(jQuery);    

var intersection = arrayToString(intersectionOfArrays(selectionOf("produitcartesien").split("@~@~@"),tripletsOfCollection.split("@~@~@")));
alert("intersection = '"+intersectionOfArrays(selectionOf("produitcartesien").split("@~@~@"),tripletsOfCollection.split("@~@~@"))+"'");
alert("selectionOf(produitcartesien) = '"+selectionOf("produitcartesien")+"'");
alert("They are different: '"+intersection!=selectionOf("produitcartesien")+"'"); 
```

尽管警报有时会显示相同的字符串，但使用**!=**和**!==**的比较总是返回**true** !?

我尝试使用其他一些我不记得的东西，但没有奏效。如何修改上述代码以获得正确答案？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:44:35.330

而不是使用`s != ""`你可以使用的`if (s.length)`. 当长度为 0（无内容）时，它将评估为 false，当填充字符串时，长度将 > 0 并且评估为 true。

编辑：

```
$.each(array, function(i, el){
                    if($.inArray(el, a) === -1)
                        {
                            a.push(el);
                            if (s.length)
                                {
                                    s += "@~@~@";
                                }
                            s += el;
                        }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:25:03.687

这是我用来使它工作的：

```
(function($)
        {
            arraysAreEqual = function(arr1,arr2)
            {
                if ($(arr1).not(arr2).length == 0 && $(arr2).not(arr1).length == 0)
                    {
                        return true;
                    }
                return false;
            };
        })(jQuery);

var intersection = arrayToString(intersectionOfArrays(selectionOf("produitcartesien").split("@~@~@"),tripletsOfCollection.split("@~@~@")));
alert("intersection = '"+intersectionOfArrays(selectionOf("produitcartesien").split("@~@~@"),tripletsOfCollection.split("@~@~@"))+"'");
alert("selectionOf(produitcartesien) = '"+selectionOf("produitcartesien")+"'");
alert("They are equal: "+arraysAreEqual(intersection.split("@~@~@"),selectionOf("produitcartesien").split("@~@~@"))); 
```

# tridion - SDL Tridion 2011 中 MultiLineText 字段的 MaxLength 限制

> ID：14396071
> 
> 赞同：5
> 
> 时间：2013-01-18T09:41:14.133
> 
> 标签：tridion, tridion-2011, xsd-validation, maxlength

我的架构源如下所示：

```
<xsd:schema xmlns="uuid:b8fd4596-56ec-4718-ad00-bf2a70a148c2" xmlns:tcmi="http://www.tridion.com/ContentManager/5.0/Instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" targetNamespace="uuid:b8fd4596-56ec-4718-ad00-bf2a70a148c2">
<xsd:import namespace="http://www.tridion.com/ContentManager/5.0/Instance"></xsd:import>
<xsd:annotation>
    <xsd:appinfo>
        <tcm:Labels xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
            <tcm:Label ElementName="description" Metadata="false">Description</tcm:Label>
            <tcm:Label ElementName="multiline" Metadata="false">Multiline</tcm:Label>
        </tcm:Labels>
    </xsd:appinfo>
</xsd:annotation>
<xsd:element name="Blog">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="description" minOccurs="0" maxOccurs="1">
                <xsd:annotation>
                    <xsd:appinfo>
                        <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0"></tcm:ExtensionXml>
                    </xsd:appinfo>
                </xsd:annotation>
                <xsd:simpleType>
                    <xsd:restriction base="xsd:normalizedString">
                        <xsd:minLength value="1"></xsd:minLength>
                        <xsd:maxLength value="20"></xsd:maxLength>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
            <xsd:element name="multiline" minOccurs="0" maxOccurs="1" type="tcmi:MultiLineText">
                <xsd:annotation>
                    <xsd:appinfo>
                        <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
                            <configuration xmlns="http://www.sdltridion.com/2011/SiteEdit">
                                <field>
                                    <editable>true</editable>
                                </field>
                            </configuration>
                        </tcm:ExtensionXml>
                        <tcm:Size xmlns:tcm="http://www.tridion.com/ContentManager/5.0">5</tcm:Size>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element></xsd:schema> 
```

我可以对“xsd:normalizedString”类型字段使用**maxlength**和**minLength**限制，但不能对“tcmi:MultiLineText”类型使用相同的限制。任何人都知道我怎样才能在那种类型的领域使用它们？

如果无法在该领域使用该限制，我知道还有其他方法可以验证 Tridion 中保存的内容（正如 Nuno 和 Robert 在[http://nunolinhares.blogspot.com.es/2012/07/validating中解释的那样-content-on-save-part-1-of.html](http://nunolinhares.blogspot.com.es/2012/07/validating-content-on-save-part-1-of.html)和[http://www.curlette.com/?p=913](http://www.curlette.com/?p=913)，感谢您的工作！）但我想找到一个避免使用事件的解决方案。还有其他想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T14:07:22.493

Unfortunately this can not be done on multi-line fields. This holds true for both RTF enabled fields and multi-line plain text fields.

This is by design (and actually makes a lot of sense), as trying to limit text is normally to do with the amount of space used by the text, and these fields support line breaks (and other formatting in the case of RTF enabled fields) so the string length has little to do with the space used by the text.

If your field is an RTF field, you could write a "Truncate" XSLT to apply to the text. Otherwise you will need to use one of the solutions you have referenced above.

Alternatively you might consider truncating the text with your output templates if it is too long.

# arrays - 二维数组中的递归

> ID：14396077
> 
> 赞同：0
> 
> 时间：2013-01-18T09:41:28.357
> 
> 标签：arrays, recursion, boolean, graph-algorithm, depth-first-search

我有一个二维布尔数组：

布尔 [][] 字段 = 新布尔[7][11]；

我想要做的是检查是否存在从字段 [0] [0] 到字段 [7] [11] 的有效“路径”。

例如，这将是从开始到结束的有效路径：0 = false，1 = true

```
1 1 0 0 0
0 1 0 0 0
1 1 0 0 0
1 0 0 0 0
1 1 1 1 1 
```

我们可以用真值连接 0,0 到 4,4。

无效路径示例：

```
1 1 0 0 0
0 1 0 0 0
1 0 0 0 0
1 0 0 0 0
1 1 1 1 1 
```

我们无法从 0,0 连接到 4,4。（只有垂直和水平值是有效路径，而不是对角线）

我认为解决这个问题的最好方法是递归。从 0,0 开始，检查邻居是否为“真”，如果是则继续。然后再次检查邻居。如果所有邻居都是假的，则向后移动并找到另一条路径。

解决这个问题的最佳方法是什么？

**编辑 ：**

这就是我到目前为止所拥有的。该算法打印出完全正确的路径，但我的返回值并不总是正确的。

谁能看到错误在哪里？

```
static boolean isValidPath(boolean [][] field, int i, int j, int previ, int prevj) {

        if(i >= field.length && j >= field[0].length) return true;

        if(field[i][j] == true) {

            System.out.println("Valid i: " + i + ", j: " + j);
            if(i + 1 < field.length && i + 1 != previ) isValidPath(field, i + 1, j, i, j);
            if(j + 1 < field[0].length && j + 1 != prevj) isValidPath(field, i, j + 1, i, j);
            if(i - 1 >= 0 && i - 1 != previ) isValidPath(field, i - 1, j, i, j);
            if(j - 1 >= 0 && j - 1 != prevj) isValidPath(field, i, j - 1, i, j);

            return true;

        } else return false;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        boolean[][] field = new boolean[][] { { true,  true, false, false, false}, 
                                              { false, true, false, false, false},
                                              { true,  true, false, false, false},
                                              { true, false, false, false, false}, 
                                              { true, true, true, true, true }};

        System.out.println("Is this path valid: " + isValidPath(field, 0, 0, 0, 0));
    } 
```

这是输出：

```
Valid i: 0, j: 0
Valid i: 0, j: 1
Valid i: 1, j: 1
Valid i: 2, j: 1
Valid i: 2, j: 0
Valid i: 3, j: 0
Valid i: 4, j: 0
Valid i: 4, j: 1
Valid i: 4, j: 2
Valid i: 4, j: 3
Valid i: 4, j: 4
Is this path valid: true 
```

如您所见，算法在整个数组上运行，并打印出有效路径。但是，如果我例如将 [4][4] 中的值更改为 false，结果仍然是 true。

我真的不知道在哪里返回 false 和 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:55:47.340

你在这里所拥有的只是一个以更非规范的方式呈现的图表。任何类型的图形搜索都可以解决您的问题。我建议您使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)或[DFS](http://en.wikipedia.org/wiki/Depth-first_search)。实际上 DFS 通常是使用递归来实现的，所以，是的，你可以使用递归来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:54:11.947

这是一个广为人知的编程任务，有许多现成的算法。您建议的称为[深度优先搜索](http://ultrastudio.org/en/Depth_first_search)。我会说，使用[A*](http://ultrastudio.org/en/A_star_algorithm)或[Dijkstra](http://ultrastudio.org/en/Dijkstra_algorithm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:01:58.233

在我看来，它就像一个经典的 TSP 问题 ( [http://en.wikipedia.org/wiki/Travelling_salesman_problem](http://en.wikipedia.org/wiki/Travelling_salesman_problem) )。

递归可能是最好的方法，如下所示：

```
bool right_path(int x, int y)
{
// check whether you have a true neighbors 
// (you can do it by yourself I hope ;)
....
// if yes, call recursive the next one

if (right_path(x+1, y) || right_path(x, y+1))
   return true;
else
   return false;
} 
```

# .htaccess - MAMP：文件显示在 htdocs 但不在/ http://localhost:8888/ 页面的索引上？

> ID：14396084
> 
> 赞同：0
> 
> 时间：2013-01-18T09:42:01.047
> 
> 标签：.htaccess, codeigniter, localhost, mamp

我已经使用 MAMP 一年多了，并且使用 Codeigniter 并且通常在设置网站时没有问题。我刚刚完成了一个网站并更改了基本 URL 和 .htaccess 文件，以便正确托管它。我更改了设置，这就是问题所在：

主文件显示在我的 htdocs 文件夹中（还有许多其他网站保存在本地），但是当我加载 MAMP 的起始页并且出现 dfile 名称列表时，除了这个文件之外，它们都在那里！我试图重命名它，检查了我的配置基 URL，这一切都很好....为什么文件不显示？！其他文件可以，当我单击链接时它们可以正常工作。

我也尝试在没有文件的情况下输入 url，这就是我得到的：

```
The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, you@example.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log. 
```

所以当你这样做时，我检查了我的错误日志，在 apache_error.log 这是我收到的消息：

```
[Fri Jan 18 09:37:54 2013] [alert] [client 127.0.0.1] /Applications/MAMP/htdocs/website-name/.htaccess: <IfModule takes one argument, Container for directives based on existance of specified modules
[Fri Jan 18 09:37:55 2013] [alert] [client 127.0.0.1] /Applications/MAMP/htdocs/website-name/.htaccess: <IfModule takes one argument, Container for directives based on existance of specified modules 
```

我的 .htaccess 文件和往常一样...

.htaccess 文件：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php
#controller, previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /website-name/index.php?/$1 [L]
#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends
#the request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /website-name/index.php?/$1 [L]
</IfModule>
<IfModule !mod_rewrite.c>
ErrorDocument 404 /index.php
</IfModule> 
```

这个文件会损坏吗？或者我在这个文件中的整个网站都损坏了？如果我能得到一些建议那就太好了，因为我以前从来没有遇到过这个问题

谢谢

# google-chrome-extension - 为什么这个 Google Chrome Extensions 示例 CatBlock 不起作用？

> ID：14396087
> 
> 赞同：0
> 
> 时间：2013-01-18T09:42:10.157
> 
> 标签：google-chrome-extension

我想使用一些 chrome.webRequest API，例如 chrome.webRequest.onBeforeRequest.addListener()，google 提供了一些简单的示例来演示它们的用法。就像下面的扩展插件[CatBlock](https://developer.chrome.com/extensions/examples/extensions/catblock.zip)

我在 background.js 中放置了断点，但似乎 chrome 从未进入该函数，并且没有行为显示 CatBlock 有效。

谁能告诉我原因？谢谢！

# ruby-on-rails - rails 3.2 select form helper set readonly true 不工作

> ID：14396092
> 
> 赞同：1
> 
> 时间：2013-01-18T09:42:37.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在表单助手上设置 readonly => true 时遇到问题。它仍然允许我更改选择。这是我的代码。

```
<%= f.date_select :date_of_birth, {:order => [:day, :month, :year]}, {:readonly => true} %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:59:44.383

该选项在 HTML [-tag](http://www.w3schools.com/tags/tag_select.asp)或[-tag](http://www.w3schools.com/tags/tag_option.asp)`readonly`中不存在，甚至 Rails 也无法神奇地将这样的选项添加到 HTML..！[`<select>`](http://www.w3schools.com/tags/tag_select.asp)[`<otption>`](http://www.w3schools.com/tags/tag_option.asp)

相反，您可以使用`:disabled => true`, 将选择字段显示为“已禁用”：

```
f.date_select :date_of_birth, {:disabled => true, :order => [:day, :month, :year]} 
```

有关详细信息，请参阅[`date_select`文档](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)。

# c++ - Doxygen 可以配置为从协作图中省略基本的 C++ 类型吗？

> ID：14396099
> 
> 赞同：6
> 
> 时间：2013-01-18T09:43:02.117
> 
> 标签：c++, documentation, doxygen

有没有办法阻止 Doxygen 在它生成的图表中包含基本的 C++ 类型（`int`、`float`等）？例如，当协作图包含大量用户定义的类型时，知道它们都在`int`内部使用不如查看类型之间的关系以及从图的所有部分到`int`type 使图表在视觉上“忙碌”并且更难阅读。

理想情况下，代码应该设计得足够好和模块化，协作图会小而简单，并且包含基本类型不会成为问题。但 Doxygen 真正大放异彩的一种情况是，当用户必须掌握并尽快处理大量写得不好的代码时，最好简化其中的协作图案子。

我知道减少`MAX_DOT_GRAPH_DEPTH`可以简化协作图，但这会减少用户定义类型和基本类型的数量。为了充分利用图表中的可用空间，我想只包括用户定义的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T20:51:50.640

在配置文件中`HIDE_UNDOC_RELATIONS`设置为`YES`，doxygen 应该从图中省略基本类型和其他未记录的类型。

# linux - 如何将 linux 可执行文件（二进制）转换为 windows exe 文件？

> ID：14396103
> 
> 赞同：7
> 
> 时间：2013-01-18T09:43:09.820
> 
> 标签：linux, windows, binary

有没有办法将 Linux 二进制文件转换为 windows exe 文件？例如，如果在 Linux 中创建一个非常简单的二进制文件，如下所示：

```
echo "main(){int i; i=i+1;}" >> main.c

gcc main.c -o main 
```

有什么方法可以将主二进制文件转换为 windows exe 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:54:24.797

您不能将 linux 可执行文件转换为 windows 可执行文件。但是您可以使用交叉编译器编译源代码。

例如：[MinGw32](http://www.mingw.org/%29)

如果你在 ubuntu 中：

```
sudo apt-get install mingw32
i586-mingw32msvc-cc main.c -o main.exe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:50:15.543

没有办法转换二进制文件。

常规的方法是：

*   为其他平台重新编译，但这需要源（源中的跨平台支持或使用的库也必须在其他平台上可用）。`cygwin`/`mingw`例如，可以帮助提供所需的支持/库。

*   `wine`可用于在 Linux 上运行 Windows 二进制文件（但不能反过来）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-08T14:49:45.853

如果你有最新的 windows 10。只需在 appstore 中安装 linux 子系统。你可以在windows中运行任何你想要的linux二进制文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-17T10:58:25.243

如果您需要在另一个操作系统下运行您的代码/应用程序/程序在 linux/mac/windows 下（linux 以 win 或反向 exc..），但您不想使用虚拟机或 wsl 系统，您可以使用 docker。这是链接：[https](https://www.docker.com) ://www.docker.com 但您需要先学习。 **什么是 Docker？** Docker 在概念上类似于虚拟机，只是它更轻量级。Docker 不是运行一个完整的独立操作系统（这是一个巨大的开销），而是运行容器，这些容器使用相同的主机操作系统，并且只**在软件级别进行虚拟化**

# emacs - 风筝现场编辑

> ID：14396108
> 
> 赞同：1
> 
> 时间：2013-01-18T09:43:19.873
> 
> 标签：emacs, swank, kite, swank-js

[我真的很喜欢Kite](https://github.com/jscheid/kite)背后的想法——使用 WebKit 自己的协议进行远程调试。不需要代理套接字服务器或书签来连接网页（这就是[swank-js](https://github.com/swank-js/swank-js)的操作方式）。

该项目的自述文件指出风筝...

> “启用...实时编辑网页”。

然而，虽然工作正常，但我不能在*没有*风筝划痕的情况`kite-scratch`下评估 defuns 或整个缓冲区。

 ***是否可以在 kite-scratch 以外的任何缓冲区中使用 Kite 评估 JavaScript？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:56:29.760

它看起来像是`kite-scratch-mode`一种派生自 的模式`javascript-mode`，因此您可能只能`M-x kite-scratch-mode`用于启用`kite-scratch`javascript 文件中的绑定。

不过，我确信它不是为此而设计的，因此您可能会考虑向作者询问提供与`swank-js`or类似的绑定的次要模式`js-comint`。*

# java - 来自 PMD 的 DD/DU 警告

> ID：14396111
> 
> 赞同：2
> 
> 时间：2013-01-18T09:43:38.983
> 
> 标签：java, pmd, dataflow

> **可能重复：**
> [这些 PMD 规则的原因是什么？](https://stackoverflow.com/questions/1615419/what-is-the-reason-for-these-pmd-rules)

为什么我会收到 DD/DU 警告？

这是我的代码：

```
// DD warning from PMD
public Object foo() {
  Object result = null;
  if (condition) {
    // code block, no accec to result
    result = newResult;
  }
  return result;
}
// DU warning from PMD
List<Object> data = new ArrayList<Object>(anotherList);
anotherList.remove(1);
// some other modification of anotherList
if (condition) {
  // some code. no access to data
  for (Object o : data) {
    // loop for original content of the list
  }
} 
```

这里有什么问题吗？或者它是一个PMD错误？我可以忽略这些警告吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:51:00.077

您的 DD 异常确实可以写得更好，错误的机会更少：

```
return condition? newResult : null; 
```

或者，如果您对语法比较保守，

```
if (condition)
  return newResult;
return null; 
```

在第二个示例中，您将`data`无条件地创建，但只能有条件地使用它。重写为

```
if (condition) {
  List<Object> data = new ArrayList<>(anotherList);
  // or maybe just use anotherList without copying
  ...
}
else {
  anotherList.remove(1);
  // some other modifications of anotherList
} 
```

# php - 返回新创建的字符串

> ID：14396112
> 
> 赞同：1
> 
> 时间：2013-01-18T09:43:44.703
> 
> 标签：php, string

我对 php 很陌生，我正在尝试连接三个字符串。这有效，如果我这样做：

```
echo Test::getBaseUrl() , '/' , $append_url; 
```

但这发生在方法内部，我希望将其返回给被调用者，但是当我添加`return`而不是`echo`这样时：

```
return Test::getBaseUrl() , '/' , $append_url; 
```

我收到这样的错误：

```
PHP Parse error:  syntax error, unexpected ',' in /home/ubuntu/Test.php on line 31 
```

我在哪里犯错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:45:55.067

`echo`是一种语言结构，它支持一种特殊的语法，允许链接多个`echo`“动作”。这表示

```
echo $a, $b; 
```

实际上是

```
echo $a; echo $b; 
```

（不是真的，它有点不同，但这并不重要）

你*真正*要找的是串联

```
echo $a . $b; 
```

哪个（因为这是一个常规运算符）适用于所有可以处理字符串的东西

```
return $a . $b; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T09:44:39.057

用它`.`来连接`PHP`

```
return Test::getBaseUrl() . '/' . $append_url; 
```

正如**囚犯所建议的那样**

**附加：它适用于 echo $x, $y, $z 的原因是因为您可以传递一个逗号列表，该列表基本上输出多个回声（例如`echo $x; echo $y;`）。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T09:48:09.437

我不认为 , 用于连接任何编程语言中的字符串。

在 PHP 中，连接运算符 (.) 用于将两个字符串值放在一起。

```
echo Test::getBaseUrl() . '/' . $append_url;

return Test::getBaseUrl() . '/' . $append_url; 
```

请参阅：[PHP 字符串](http://www.w3schools.com/php/php_string.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T09:45:08.153

PHP 字符串连接使用 .

```
echo Test::getBaseUrl() . '/' . $append_url; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T09:48:44.387

如果你想在字符串中使用逗号：

```
 echo Test::getBaseUrl().','.'/'.', '.$append_url; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T09:48:55.763

当您使用时，`echo Test::getBaseUrl() , '/' , $append_url;`您实际上是在说

```
echo Test::getBaseUrl();
echo '/';
echo $append_url; 
```

如果要创建单个字符串，则必须使用`.` 示例连接 3 个字符串：

```
return Test::getBaseUrl() . '/' . $append_url; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-18T09:55:55.957

所有包含关键字*语言构造*和*常规构造*的答案都是正确的，但只是为了澄清一点：
函数不能返回超过**1 个**值（仅此而已……在某个低级别，函数完成后*确实*返回一些信号。换句话说，如果`return`它是一个函数，它将被定义为：

```
function return($value)
{//written in PHP-style, obviously
    fwrite(php://stdout, $value, sizeof($value));
} 
```

简而言之：一个只接受一个参数的函数，因此用逗号分隔多个参数根本不起作用

# jquery - Ruby on rails 表单提交到 js

> ID：14396121
> 
> 赞同：0
> 
> 时间：2013-01-18T09:44:24.563
> 
> 标签：jquery, ruby-on-rails, forms

我在 Ruby on Rails 上有这段代码：

```
 simple_form_for :projectssss, :html => {:id => 'projectsssss_opt'} do |f|            
  f.input :name, :label => ("name")                                  
  f.input :title, :label => ('title')                                      
  f.submit "Submit", :id => 'btn' 
```

而这个Javascript：

```
$.ajax({                                                                     
  type: "POST",                                                            
  url: api_url,                                                            
  data: [ what to put here ???],                                                               
  success: function ( status ) {                            
 alert("HAHA");                                                                                                       }}); 
```

如何在 Ruby on Rails 上的 JS 中从简单表单中获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:22:52.947

ajax 帖子中的数据属性是您的参数所在。

假设您在这样的数据项目值中有一个项目ID

```
<input class="form-input" id="" data-project="<%=@project.id.to_s %>"> 
```

然后你可以这样做

```
$(".form-input").focusout(function(){

    var project     = $(this).attr("data-project")
    var params      = {project_id: project}

    $.ajax({
        url: "/some_url/",  
        type: "POST",
            data: params,
            chache:false,
            dateType: "JSON"
         });    
}); 
```

如果您有提交的表格，我会这样做。将此添加到 application.js 文件的顶部

```
jQuery.ajaxSetup({ 
  'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript")}
}) 
```

添加此功能

```
jQuery.fn.submitWithAjax = function() {
  this.submit(function() { 
    $.post(this.action, $(this).serialize(), null, "script");
    return false;
  })
  return this;
}; 
```

当 dom 准备好时，调用该函数。

```
$(document).ready(function() {
  $('#projectsssss_opt').submitWithAjax()
}) 
```

# extjs4 - 颜色选择器实现

> ID：14396122
> 
> 赞同：1
> 
> 时间：2013-01-18T09:44:28.690
> 
> 标签：extjs4

```
Ext.create('Ext.form.field.Picker', {
    renderTo: Ext.getBody(),
    id: 'colorpicker',

    createPicker: function() {
        return Ext.create('Ext.picker.Color', {
            resizable: true,
            floating: true,

            select: function(selColor) {
                Ext.getCmp('colorpicker').setValue("#" + selColor);
                var x = Ext.getCmp('colorpicker').getValue();
                alert(x);
                Ext.getCmp('colorpicker').setFieldStyle('background-color:x ;background-image: none;');
            }
        });
    }
}); 
```

`EXt.form.field.Picker`在上面的代码示例中，我通过实现根据[ExtJS 4.0.7 sencha docs](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Picker)的创建选择器方法创建了一个颜色选择器。

## 第一个问题

只有当我将浮动配置指定为 true 时（如上面示例中所述），我才能获得输出。如果我删除配置或将其设为假，我无法在输出中看到颜色选择器，那么背后的原因是什么，谁能解释为什么浮动配置应该为真？

## 第二个问题

通过使用上面的示例代码，我得到了输出，但是颜色选择器渲染有一些问题，有一次它会在单击选择器字段下拉时正确显示，但有时颜色选择器会出现在字段上方或下拉时页面上的某个位置是点击。那么如何避免这种情况呢？单击选择器下拉菜单时，我想在下面显示它。

## 第三个问题

我想应用带有所选颜色值的选择器的背景，所以我添加了以下代码行：

```
Ext.getCmp('colorpicker')
   .setFieldStyle('background-color:x ;background-image: none;');` 
```

选择的颜色值在哪里`x`（比如`#000000`我们从颜色选择器中选择黑色时的颜色值），但它没有将颜色应用于文本字段

当我用那行代码替换`x`value 时说：`#000000`

```
Ext.getCmp('colorpicker')
    .setFieldStyle('background-color:#000000 ;background-image: none;'); 
```

然后它为归档背景显示黑色，但我希望将颜色更改为选定的颜色，所以我不能给出静态颜色值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:20:10.107

关于第二个问题：而不是将字符串'x'传递给函数......

```
Ext.getCmp('colorpicker').setFieldStyle('background-color:x ;background-image: none;'); 
```

你应该尝试类似：

```
Ext.getCmp('colorpicker').setFieldStyle('background-color:' + x + ' ;background-image: none;'); 
```

# image - 安全处理上传的图像

> ID：14396128
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:44:39.070
> 
> 标签：image, security, file-upload

我正在阅读这篇关于如何保护我的网站免受攻击者攻击的文章我停在这些线上，我试图弄清楚它们的意思

> 您不能依赖文件扩展名或 mime 类型来验证文件是否为图像，因为这些很容易被伪造。即使打开文件并读取标题，或使用功能检查图像大小也不能完全证明。大多数图像格式允许存储评论部分，其中可能包含可由服务器执行的 PHP 代码。

大多数图像格式允许存储评论部分是什么意思？

链接： http: [//www.netmagazine.com/features/10-essential-security-tips-protect-your-site-hackers](http://www.netmagazine.com/features/10-essential-security-tips-protect-your-site-hackers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:13:48.860

好吧，就像您可以在 MP3 文件中存储评论一样，许多图像格式也为评论腾出空间。注释只是描述文件的一小段文字。

现在许多应用程序只能从许多不同的文件类型中提取一点点信息，风险在于您的 PHP 代码在从图像文件中提取注释（相对容易的任务）时可能会冒以下风险：将存储在注释中的任何 PHP 代码合并到您的 PHP 代码中。

本质上，这利用了 PHP 中的一个错误，类似于 SQL 注入利用。然而，大多数 HTTP 服务器在发送图像时，以二进制形式发送它们，因此您不必太担心网页上的图像文件会构成威胁。

只需确保您所做的任何图像工作都不会尝试解释评论部分，而是将其传递给格式化程序/清理程序，以确保图像评论部分的内容（如果检索到）不只是插入到 HTML 中显示它的点。

# python - 奇怪的 Python 行为递归

> ID：14396130
> 
> 赞同：0
> 
> 时间：2013-01-18T09:44:46.080
> 
> 标签：python, function, recursion

我对递归函数的返回有一个奇怪的问题。它总是返回“无”而不是 temp_blocks。他将在其他情况下编写 temp_blocks （块列表，而不是无），但如果我调用该函数，它似乎不会返回列表`blocks = _searchblocks(roots, left_edge, right_edge)`。这是一个普遍的问题，还是我的错？

```
def _searchblocks(blocks, left_edge, right_edge):
    temp_blocks = []
    for block in blocks:
        if np.any(block.left_edge >= left_edge) \
        and np.any(block.right_edge <= right_edge):
            temp_blocks.append(block)

    if len(temp_blocks) == 1:
        _searchblocks(temp_blocks[0].children, left_edge, right_edge)
    else:
        print(temp_blocks)
        return temp_blocks 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T09:46:03.330

你需要一个明确的`return`声明：

```
if len(temp_blocks) == 1:
    return _searchblocks(temp_blocks[0].children, left_edge, right_edge)
    ^^^^^^ 
```

没有这个，你的函数会递归调用自身，*丢弃结果*，然后隐式返回`None`。

# cognos - 限制在 cognos 搜索和选择提示中输入的字符数

> ID：14396132
> 
> 赞同：1
> 
> 时间：2013-01-18T09:44:48.710
> 
> 标签：cognos, cognos-8

限制在 cognos 搜索和选择提示中输入的字符数

```
`The below script works for text box.
<script>
// The ASDF here comes from the Name property of the prompt
var fW = (typeof getFormWarpRequest == "function" ? getFormWarpRequest() :
document.forms["formWarpRequest"]);  
fW._textEditBoxASDF.maxLength = 3;  
</script>` 
```

我需要一段类似的代码来处理搜索和选择提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:19:30.343

我面前没有 cognos，但让我告诉你我是如何用 Javascript 做这样的事情的。请完整阅读，因为有几种方法。

1.  在您的本机 Cognos 选择和搜索提示周围放置一个唯一命名/id 的 DIV 标记（您输入的那个。这将便于在接下来的步骤中参考 Java 的 dom 模型。我们最终将使这个默认搜索提示不可见/隐藏但现在保持它可见，直到对以下步骤进行编码/调试。

2.  以与本机 Select 类似的样式创建 HTML 控件，并使用所需的正确最大长度设置进行搜索。使用更改事件上的文本框来更新本机 Cognos 选择和搜索提示。对于调试故障排除，我发现让 javascript 提醒 DIV innerHTML 很方便，这样您就可以使用 Cognos 控件查看引擎盖下的内容。有时我使用这个 innerHTML 作为我可以控制的“克隆/阴影”HTML 提示的起点。

3.  一旦您的新 HTML 控件有效地更改了 Cognos 控件，您就可以使其不可见。

    *   *   在复杂的仪表板/记分卡上，我编写了例程来克隆 cognos 提示并公开它们的 HTML，这样我就可以创建自己的控件来悄悄地操纵实际隐藏的控件。这让我可以完全控制演示和功能。
    *   *   一旦您拥有控件innerhtml，就会有很多变体，例如在页面加载后立即用您自己的控件替换innerHTML，该控件有长度限制。或者只是看看你是否可以按摩从innerhtml学习的属性。
    *   *   在 Cognos 8.4 和 10 中，有一种新方法可以动态地将方法添加到要在任何其他方法之前调用的控件。这很棘手，但它在 IBM 的网站上。我可能会在 10 中更干净地实现，而且 IBM 也不羞于在他们的网站上展示这些解决方案。

# c-preprocessor - 如何在不插入空格的情况下将两个宏与它们之间的点连接起来？

> ID：14396139
> 
> 赞同：2
> 
> 时间：2013-01-18T09:45:06.407
> 
> 标签：c-preprocessor

我正在预处理我的 InfoPlist 文件以包含我的修订号。我的标题如下所示：

```
#import "svn.h"

#define APP_VERSION 1.0
#define APP_BUILD APP_VERSION.SVN_REVISION 
```

当我从程序中检查我的构建版本时，它是`1.0 . 123456`. 但如果我试试这个：

```
#import "svn.h"

#define APP_VERSION 1.0
#define APP_BUILD APP_VERSION ## . ## SVN_REVISION 
```

我明白了

```
error: pasting formed 'APP_VERSION.', an invalid preprocessing token
error: pasting formed '.SVN_REVISION', an invalid preprocessing token 
```

我见过[这个问题](https://stackoverflow.com/questions/10085594/how-to-concatenate-strings-with-c-preprocessor-with-dots-in-them)，但实际上并没有给出答案；OP 实际上并不需要连接标记。我愿意。如何在不插入空格的情况下将两个宏与它们之间的点连接起来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T23:45:47.840

这个问题看起来是由[预处理器的一个怪癖引起的](http://gcc.gnu.org/onlinedocs/cpp/Argument-Prescan.html#Argument-Prescan)：连接运算符的参数没有首先展开（或者......无论如何，规则很复杂），所以目前预处理器没有尝试连接`1.0`and `.`，它实际上是在尝试将单词粘贴`APP_VERSION`到输出标记中。在 C 中，单词中没有点，所以这不是一个有效的标记，因此是错误的。

您通常可以通过几层包装宏来强制解决问题，以便将串联操作隐藏在至少两个替换之后，如下所示：

```
#define APP_VERSION 1.0
#define SVN_REVISION 123456

#define M_CONC(A, B) M_CONC_(A, B)
#define M_CONC_(A, B) A##B

#define APP_BUILD M_CONC(APP_VERSION, M_CONC(.,SVN_REVISION))

APP_BUILD    // Expands to the single token 1.0.123456 
```

您很幸运，[允许 C 预处理器编号具有任意数量的点](http://gcc.gnu.org/onlinedocs/cpp/Tokenization.html#Tokenization)，即使 C 浮点常量可能只有一个。

# ios - 如何通过 Interface Builder 在 UIButton 中存储辅助信息？

> ID：14396141
> 
> 赞同：4
> 
> 时间：2013-01-18T09:45:08.417
> 
> 标签：ios, objective-c, cocoa-touch, interface-builder

我正在构建一个自定义键盘，其中大约有 50 个`UIButton`键。我想为每个键放置一些*分组*信息，例如数字、字母、光标等。

首先想到的是`tag`字段（字母100，数字200，......等等）

另一种选择是通过[具有关联引用的类别](https://stackoverflow.com/a/5500525/88597)。

但是，这两种方法对 Interface Builder 都不是很*友好*。还有其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T02:41:39.107

你写了

> 我想为每个键放置一些分组信息，例如数字、字母、光标等。

为什么不使用`IBOutletCollection`s？

您可以为每个“数字、字母、光标”声明数组：

```
@property (nonatomic) IBOutletCollection(UIButton) NSArray *numberButtons;
@property (nonatomic) IBOutletCollection(UIButton) NSArray *letterButtons;
@property (nonatomic) IBOutletCollection(UIButton) NSArray *cursorButtons; 
```

并轻松地将它们连接到界面生成器中：

![在此处输入图像描述](../Images/dbba49cdd8dfeab4949dddaa73f9c0f2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T02:32:19.183

可能最干净的方法是使用它*并*处理同一子类/类别中的所有内容`User Defined Runtime Attributes`

![在此处输入图像描述](../Images/b079906cab5b542af709ab5b2296eae2.png)

对于上面的示例，您应该至少有一种方法：

```
-(void) setLocalizedKey:(NSString *) key;
//(NSString *) localizedKey; this is optional 
```

或财产：

```
@property(nonatomic, strong) NSString * localizedKey; 
```

如果您喜欢关联引用（或者您不需要存储或无权访问类本身）`@synthesize`，请在您的子类或类别中声明和实现（或）。`UIButton`

在上面的示例中， 的值`key`将`HOW_IT_WORKS`针对该特定实例。这是我通常处理本地化的方式，但也应该服务于您的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T02:01:04.383

也许我误解了您的问题，但该`tag`属性绝对可以`UIButtons`通过 XCode/Interface Builder 设置。

![在此处输入图像描述](../Images/1db680adf936560751c2256aed6966a3.png)

# database - 数据库如何使用聚集索引定位记录？

> ID：14396147
> 
> 赞同：1
> 
> 时间：2013-01-18T09:45:19.603
> 
> 标签：database, performance, indexing

在非聚集索引中，每个条目都是固定长度的，因此数据库可以使用二进制搜索在 O(nlogn) 时间内找到记录地址。

由于表具有可变长度记录，并且聚集索引使用基础表本身进行搜索（或者我错了吗？），数据库如何在 O(nlogn) 时间内找到特定键的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:31:08.463

> 每个条目都是固定长度的

对于现实世界的数据库而言并非如此。

行被分成称为页的组。页面具有固定大小 (~8KB)。它们形成一个树结构，顶层链接到底层页面的物理位置。

这允许树从上到下遍历，在每一步进入相关分支。

聚集索引通常具有与非聚集索引完全相同的物理结构。

# jenkins - 添加构建后操作声纳会导致 Jenkins 构建失败

> ID：14396148
> 
> 赞同：1
> 
> 时间：2013-01-18T09:45:19.827
> 
> 标签：jenkins, sonarqube, jenkins-plugins

使用 Jenkins 版本。1.494; [詹金斯声纳插件 2.0.1](http://docs.codehaus.org/pages/viewpage.action?pageId=116359341)；声纳服务器 3.4.1。 [马文工作。](http://docs.codehaus.org/display/SONAR/Triggering+Sonar+on+Jenkins+Job#TriggeringSonaronJenkinsJob-TriggeringaSonarAnalysiswithMaven)

添加构建后操作`Sonar`会导致 Jenkins 构建失败（错误：无法解析 POM）。然后再次删除声纳动作使其通过。

```
Sync complete, took 35 ms
Parsing POMs
[Atlas_Phevos] $ java -Xmx512m -XX:MaxPermSize=128m -cp /home/jenkins/jenkins-home/plugins/maven-plugin/WEB-INF/lib/maven3-agent-1.2.jar:/home/jenkins/jenkins-home/tools/Maven/Maven304/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /home/jenkins/jenkins-home/tools/Maven/Maven304 /usr/local/tomcat-6.0.32/webapps/jenkins/WEB-INF/lib/remoting-2.19.jar /home/jenkins/jenkins-home/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-1.2.jar 60147
ERROR: Failed to parse POMs
java.io.IOException: Cannot run program "java" (in directory "/home/jenkins/jenkins-home/workspace/Atlas_Phevos"): java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at hudson.Proc$LocalProc.<init>(Proc.java:244)
    at hudson.Proc$LocalProc.<init>(Proc.java:216)
    at hudson.Launcher$LocalLauncher.launch(Launcher.java:763)
    at hudson.Launcher$ProcStarter.start(Launcher.java:353)
    at hudson.maven.AbstractMavenProcessFactory.newProcess(AbstractMavenProcessFactory.java:223)
    at hudson.maven.ProcessCache.get(ProcessCache.java:231)
    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:670)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:586)
    at hudson.model.Run.execute(Run.java:1543)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:148)
    at java.lang.ProcessImpl.start(ProcessImpl.java:65)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 12 more
Skipping sonar analysis due to bad build status FAILURE
Sending e-mails to: ____
Finished: FAILURE 
```

我没有在 Jenkins 服务器上放置[更新的 setting.xml](http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Maven)，我猜 Jenkins 应该为 Sonar（服务器、JDBC 连接等）采用自己的配置

更新：问题仍然存在。我尝试了几项工作来开始声纳分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:42:17.953

从您的异常来看，Jenkins 似乎找不到您的 JDK。在您的作业配置中，您可以展开声纳属性。确保在`JDK`选项下选择了 Jenkins 配置中的有效 JDK。

在查看属性时，请确保下面指定的 pom 文件`Root POM`是正确的。

试试那个...

# javascript - SoapUI 中的 Javascript

> ID：14396149
> 
> 赞同：7
> 
> 时间：2013-01-18T09:45:22.943
> 
> 标签：javascript, soapui

SoapUI 中的 Javascript 如何？

在 SoapUI 中，您可以编写 Groovy 脚本！但是由于即使在 SoapUI 中也支持 javascript，我们如何在 SoapUI 中编写 javascript 是否有一个简单的示例可以详细解释这一点。是否有任何简单的代码用于自动化使用 javascript 进行测试的过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T14:23:00.573

要将项目切换到 JavaScript，请单击该项目，然后转到左下角的窗口。选择脚本语言字段并将其更新为 JavaScript。

至于你能用它做什么，你真的可以做任何事情。您可以创建脚本步骤或断言。一些示例包括创建脚本以创建变量或循环通过响应以验证信息。我也没有发现太多关于使用带有soapUI 的JavaScript 的内容，最后还是坚持使用Groovy。如果需要，我发现它很强大并且可以通过 Java 进行扩展。

如果你想要一个关于如何做某事的具体例子。我建议您就到目前为止所尝试的内容提出一个更具体的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T08:36:40.370

到目前为止，我已经...

```
function myFunction() {
log.info('Hello');
}
myFunction(); 
```

输出显示在脚本日志中，当我弄清楚如何循环测试等时，将发布......</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-19T18:10:24.913

我没有尝试过 JavaScript，但我开发了自己的 java 类，用于复杂的响应检查。

您不必更改 SoapUI 中的脚本语言。为了调用 Java 类，我在测试中有一个常规步骤，它从我的 java 类中实例化一个对象，然后我在该对象上调用一个关键方法。您可以将 SoapUI 传递到 groovy 脚本中的对象传入，以便随后处理响应。

Java 脚本本身位于 SoapUI 下的 bin/scripts 文件夹中。

在处理 java 类时，我使用像 Brackets 这样的外部编辑器。当我保存更改时，SoapUI 会检测到该更改并重新编译 java 类，因此不需要在每次调整类后重新启动 SoapUI。

智能熊网站和其他地方都有教程可以帮助您启动和运行。

# ios - 如何支持 iPhone 4S，但不支持 iPhone 4？

> ID：14396151
> 
> 赞同：2
> 
> 时间：2013-01-18T09:45:40.060
> 
> 标签：ios, device, iphone-4

我的游戏以每秒 60 帧的速度运行非常重要。它在 iPhone 4S 和 5 上确实如此，但 4 与 60 年相差甚远。

那么 - 不考虑这是否是一个好主意 - 我如何阻止 iPhone 4 用户购买游戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:53:46.587

使用`UIRequiredDeviceCapabilities`，您可以锁定某些不支持所需功能的设备。这确实是阻止应用程序运行老一代设备子集的唯一方法。

要使用它，您需要在`Info.plist`. 您使用该`UIRequiredDeviceCapabilities`键，并使用一组功能键。请参阅有关[iOS 密钥](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)的文档。

例如，要支持 iPhone 4S、iPod Touch 第 5 代和 iPad 第 3 代，您可以声明您需要该`bluetooth-le`功能，即低功耗蓝牙。[可以在此处找到](http://blog.manbolo.com/2012/10/30/uirequireddevicecapabilities-and-device-compatibility-matrix)将功能与设备联系起来的兼容性矩阵。

**注意：**这并不意味着我建议您这样做；只是你可以。这是一种非常老套的方法，我不能保证苹果不会打击它。理想情况下，您应该能够回退到较低（但可接受）的性能，以便更广泛的受众可以使用您的应用程序。

# perl - 从 perl 创建一个灵活的乳胶表

> ID：14396152
> 
> 赞同：1
> 
> 时间：2013-01-18T09:45:43.893
> 
> 标签：perl, latex

我有一个 perl 脚本，可以从数据库中输出每月的统计数据。使用以下代码片段在表格中汇总了这些内容

```
print $fh <<END; 
This report details clinical and imaging statistics from $date_start to $date_stop.

\\large \\bf Clinical Statistics

\\normalsize \\rm 

\\begin{table}[h]
\\centering 
\\begin{tabular}{p{4cm}cccccccc} 
\\hline
  & $operator[0] & $operator[1] & $operator[2] & $operator[3] & $operator[4] & $operator[5] & $operator[6] & $operator[7] \\\\
\\hline

    Cannulations & $venflons[0] & $venflons[1] & $venflons[2] & - & $venflons[4] & $venflons[5] & $venflons[6] & $venflons[7] \\\\
    Clinical Assessments & $clin_ass[0] & $clin_ass[1] & $clin_ass[2] & - & $clin_ass[4] & $clin_ass[5] & $clin_ass[6] & - \\\\
    Lead Stressor & $etlead[0] & $etlead[1] & $etlead[2] & - & $etlead[4] & $etlead[5] & $etlead[6] & $etlead[7] \\\\
    Assistant Stressor & $etass[0] & $etass[1] & $etass[2] & - & $etass[4] & $etass[5] & $etass[6] & - \\\\
    ECG Preparation & $ecg_prep[0] & $ecg_prep[1] & $ecg_prep[2] & $ecg_prep[3] & $ecg_prep[4] & $ecg_prep[5] & $ecg_prep[6] & - \\\\Patient Identification & $patient_id[0] & $patient_id[1] & $patient_id[2] & $patient_id[3] & $patient_id[4] & $patient_id[5] & $patient_id[6] & - \\\\
    \\hline
    \\end{tabular}
    \\end{table}

    END 
```

基本上 perl 脚本会查询每个运算符的各种任务，并在每个字段中存储计数的数量。运算符是一个 perl 数组，它的大小可能会改变 1 或 2 个值，即很可能运算符数组可能会随时间变化（即添加或删除新的首字母）。在这种情况下，我会重写我的脚本的乳胶表部分，即添加 $operator[8] 等。我确信使用循环有一个更明智的方法来解决这个问题，但我不知道如何实现这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:15:20.020

定义一个函数，打印一行

```
sub print_row
{
    my($fh) = shift;
    print $fh join(' & ', @_), "\\\\\n";
} 
```

此函数将一行打印到`$fh`，由 的所有参数组成`print_row`。如果您想打印更多列，只需提供更多参数。

现在在你的表中使用它

```
print $fh <<END; 
This report details clinical and imaging statistics from $date_start to $date_stop.

\\large \\bf Clinical Statistics

\\normalsize \\rm 

\\begin{table}[h]
\\centering 
\\begin{tabular}{p{4cm}cccccccc} 
\\hline
END

print_row($fh, '', @operator);
print $fh "\\hline\n";
print_row($fh, 'Cannulations', @venflons, '-');
print_row($fh, 'Clinical Assessments', @clin_ass, '-');
print_row($fh, 'Lead Stressor', @etlead);
print_row($fh, 'Assistant Stressor', @etass, '-');
print_row($fh, 'ECG Preparation', @ecg_prep, '-');
print_row($fh, 'Patient Identification', @patient_id, '-');

print $fh <<END; 
\\hline
\\end{tabular}
\\end{table}

END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:01:54.437

您可以使用`join`：

```
print '&', join('&', @operator), '\\'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:37:20.613

用破折号分隔每三个项目添加到 printrow 函数

```
#inserts dash if no remainder from division of four of the array index  
for (0..$#columns){
splice(@columns,$_,0,'-') unless ($_ % 4)
} 
```

在打印语句之前。

郊狼

# android - 将部分数据库模型从服务器同步到客户端

> ID：14396157
> 
> 赞同：14
> 
> 时间：2013-01-18T09:46:00.107
> 
> 标签：android, database, client-server, offline-caching

这更多是一个概念问题，不一定与任何特定技术有关。假设您在服务器上有一些数据库，一些 REST/JSON API 来访问该数据库中的内容，以及一些显示通过 API 检索的数据的移动客户端。

最好在客户端上有一些缓存机制，并且只要客户端只读取数据就能够启用对数据的脱机访问（在我的情况下，拒绝对脱机客户端的写访问是很好的，以避免不得不管理所有可能发生的令人讨厌的冲突）。

似乎解决这个问题的一个好方法是在客户端上存在服务器数据库模型的一个子集，并将数据从服务器同步到客户端。对本地数据库的访问可能会立即返回结果，但也会触发对服务器的更新请求。如果服务器返回修改后的数据，客户端模型会同步它的本地数据库并通知数据更改的显示。

最终的目标当然是用户可以浏览信息而不管他的互联网连接的稳定性，并且只要他不修改任何数据，就不会被连接对话框或类似内容所困扰。

现在从实现的角度来看......一方面，将服务器数据库直接耦合到客户端数据库似乎是一个坏主意，因为它们可能来自不同的供应商。我想至少在两个数据库实现之上都需要一个独立于供应商的模型。另一方面，将服务器数据库中的数据转换为某种传输格式，然后再将其放回客户端数据库似乎需要很多开销。

任何建议如何以优雅和可维护的方式解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T20:48:11.483

我正在开发一个将大型数据库的一小部分本地同步到手机上的应用程序。必须在手机上进行初始预加载，但之后更新在后台异步进行。

首先，强烈建议使用 JSON 或 XML 将服务器和手机解耦。锁定一种技术总是会导致问题，因为无论平台如何，您都被迫使用相同的技术。也就是说，如果您计划扩展到其他平台（Web、iOS 等），您将被迫使用服务器指定的格式。从长远来看，选择通用格式将使这一切变得更简单。实际上，随着公共图书馆数量的增加，读/写 JSON 是一件小事。

我们使用两种方式来同步数据；

**1.报警管理器**

我们安排 AlarmManager 以定期触发服务唤醒（假设每 6 小时）。唤醒启动与服务器联系的后台服务，以 JSON 格式下载更改并更新本地 SQLite DB。如果没有连接，则跳过更新并安排下次唤醒。我们添加了一个 ConnectivityChanged 接收器，以在连接恢复时自动重新启动同步。

**2\. GCM**

如果仅在发生更改时更新本地数据库，则工作量会增加一些，但可以节省大量电池和数据使用量。Google Cloud Messaging 可以向设备发送唤醒消息并告诉它启动同步服务。同步服务的运行方式与上面的 AlarmManager 方法相同。

根据您需要数据的“新鲜程度”以及数据更改的频率，我们会结合使用上述两种方法。像 RSS 提要这样的东西可能应该每 30 分钟更新一次，而天气数据可能不需要每 4 小时更新一次。

所以要运行我们使用的数据库同步；

接收器 -> 监听系统事件并触发服务服务 -> 连接到服务器，下载 JSON 并更新 SQLite 提供者 Providers -> 将记录插入数据库并将内容更改广播到 ContentObservers ContentObservers -> 当应用程序运行时， ContentObservers 使用新数据更新 UI

上面的每个组件都有很多技术细节，但这应该为您提供一个非常强大的架构，用于将服务器数据与本地数据库同步。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T17:38:34.203

我正在做一个有类似要求的项目。我们希望在某处的服务器上拥有一个可用的大型数据库，然后移动设备从中获取数据。如果设备离线也没关系，因为他们已经在本地保存了自己的数据副本。

我们决定使用 BigCouch（支持集群的 Apache CouchDb 的分支）作为服务器技术，然后在移动设备上使用 Couchbase Mobile。（需要注意的是，TouchDB for Android 将取代 Couchbase Mobile，但它还不稳定。）

我们采用 Couch* 技术的原因是 Couch 通过 HTTP 具有良好的复制能力。您可以在移动设备上以编程方式启动同步事件，它将为您复制所有插入、更新和删除。它将信息存储在移动设备上自己的嵌入式 CouchDb 上，因此可以离线阅读。

如果您不想走 Couch 之路，您可以简单地使用 SQLlite 之类的东西来存储 REST/API 调用的结果。然后，您必须编写自己的复制逻辑，用于移动设备何时脱机然后又回来。有一些创造性的方法可以做到这一点，所以也许这是一个选择。

# eclipse - 上传jar文件到svn

> ID：14396160
> 
> 赞同：1
> 
> 时间：2013-01-18T09:46:14.000
> 
> 标签：eclipse, svn

我在 Eclipse 中有一个使用 SVN 的项目。我需要将 jar 文件上传到“引用库”，但我所做的只是将它上传到主目录。

![在此处输入图像描述](../Images/55d42a3bce109be6776cf137eab8825b.png)

由于某种原因，该文件被上传到主服务器目录，而不是被上传到本地的引用库。我认为我正确地构建了文件路径。首先，JAR 文件仅在引用的库中。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:51:36.927

尝试使用[TortoiseSVN](http://tortoisesvn.net/)。它将显示您放置罐子的位置，您可以相应地进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:49:24.570

我一般把需要引用库的.jar放在项目主目录下的一个lib目录下。这样，当我将项目签入到 SVN 时，lib 目录也会到达那里。

# nhibernate - Lambda 字符串作为 VARCHAR

> ID：14396166
> 
> 赞同：0
> 
> 时间：2013-01-18T09:46:28.160
> 
> 标签：nhibernate, lambda, varchar, string-literals, nvarchar

我的一个 Join 键选择器如下所示：

```
x => x.A + "-" + x.B 
```

NHibernate 做`"-"`了一个额外的参数。此参数获取 SQL 类型`nvarchar`，因此整个语句在 SQL Server 上从 转换`varchar`为`nvarchar`。

这样做的问题是，如果查询的列是 type**而**`varchar`不是`nvarchar`. 这是因为该列的类型不是参数，因此**不能使用索引**。

我无法更改列的类型，因此我需要以某种方式定义 NHibernate在转换 lambda**时应将 varchar 用于字符串文字。**

有什么办法可以做到这一点？

## 更新

在 Oskar Berggren 的帮助下，我设置了这些课程：

```
public static class VarcharFix
    {
        /// This method returns its argument and is a no-op in C#.
        /// It's presence in a Linq expression sends a message to the NHibernate Linq Provider.
        public static string AsVarchar(string s)
        {
            return s;
        }
    }

public class MyHqlIdent : HqlExpression
    {
        internal MyHqlIdent(IASTFactory factory, string ident)
            : base(HqlSqlWalker.IDENT, ident, factory)
        {
        }

        internal MyHqlIdent(IASTFactory factory, System.Type type)
            : base(HqlSqlWalker.IDENT, "", factory)
        {
            if (IsNullableType(type))
            {
                type = ExtractUnderlyingTypeFromNullable(type);
            }

            switch (System.Type.GetTypeCode(type))
            {
                case TypeCode.Boolean:
                    SetText("bool");
                    break;
                case TypeCode.Int16:
                    SetText("short");
                    break;
                case TypeCode.Int32:
                    SetText("integer");
                    break;
                case TypeCode.Int64:
                    SetText("long");
                    break;
                case TypeCode.Decimal:
                    SetText("decimal");
                    break;
                case TypeCode.Single:
                    SetText("single");
                    break;
                case TypeCode.DateTime:
                    SetText("datetime");
                    break;
                case TypeCode.String:
                    SetText("string");
                    break;
                case TypeCode.Double:
                    SetText("double");
                    break;
                default:
                    if (type == typeof(Guid))
                    {
                        SetText("guid");
                        break;
                    }
                    if (type == typeof(DateTimeOffset))
                    {
                        SetText("datetimeoffset");
                        break;
                    }
                    throw new NotSupportedException(string.Format("Don't currently support idents of type {0}", type.Name));
            }
        }

        private static System.Type ExtractUnderlyingTypeFromNullable(System.Type type)
        {
            return type.GetGenericArguments()[0];
        }

        // TODO - code duplicated in LinqExtensionMethods
        private static bool IsNullableType(System.Type type)
        {
            return (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(Nullable<>));
        }
    }

    public class MyHqlCast : HqlExpression
    {
        public MyHqlCast(IASTFactory factory, IEnumerable<HqlTreeNode> children)
            : base(HqlSqlWalker.METHOD_CALL, "method", factory, children)
        {

        }

        public static MyHqlCast Create(IASTFactory factory, HqlExpression expression, string targetType)
        {
            return new MyHqlCast(factory,
                                new HqlTreeNode[]
                                {
                                    new MyHqlIdent(factory, "cast"),
                                    new HqlExpressionList(factory, expression,
                                    new MyHqlIdent(factory, targetType))
                                });
        }
    }

    public class MyBaseHqlGeneratorForMethod : BaseHqlGeneratorForMethod
    {
        public MyBaseHqlGeneratorForMethod()
            : base()
        {
            SupportedMethods = new MethodInfo[] { typeof(VarcharFix).GetMethod("AsVarchar") };
        }

        public override HqlTreeNode BuildHql(MethodInfo method, System.Linq.Expressions.Expression targetObject, System.Collections.ObjectModel.ReadOnlyCollection<System.Linq.Expressions.Expression> arguments, HqlTreeBuilder treeBuilder, global::NHibernate.Linq.Visitors.IHqlExpressionVisitor visitor)
        {
            return MyHqlCast.Create(new ASTFactory(new ASTTreeAdaptor()),
                        visitor.Visit(targetObject).AsExpression(),
                        "varchar");
        }
    }

public class ExtendedLinqtoHqlGeneratorsRegistry : DefaultLinqToHqlGeneratorsRegistry
    {
        public ExtendedLinqtoHqlGeneratorsRegistry()
        {
            this.Merge(new MyBaseHqlGeneratorForMethod());
        }
    } 
```

现在它仍然无法正常工作，但我看到了光 ;)

## 更新 2：查询

```
var query = aQueryable
            .Join(bQueryable,
        x => x.AB, x => x.A + VarcharFix.AsVarchar("-") + x.B,
                                (head, middle) => new ...) 
```

## 更新 3：

随着**优化到**我们需要一个**虚拟参数**，它不能像这样优化- 这样 Linq 扩展就会启动`"-".AsVarchar()`！ **`"-"`**`"-".AsVarchar(x.A)`****

 ****```
var query = aQueryable
            .Join(bQueryable,
        x => x.AB, x => x.A + "-".AsVarchar(x.A) + x.B,
                                (head, middle) => new ...) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:14:08.630

可能有多种方法可以做到这一点，但这里有一种：

发明自己的方法，例如：

```
/// This method returns its argument and is a no-op in C#.
/// It's presence in a Linq expression sends a message to the NHibernate Linq Provider.
public static string AsVarchar(string s)
{
    return s;
} 
```

还要创建一个类来表示 HQL 表达式片段：

```
public class MyHqlCast : HqlExpression
{
    private MyHqlCast(IASTFactory factory, IEnumerable<HqlTreeNode> children)
        : base(HqlSqlWalker.METHOD_CALL, "method", factory, children)
    {
    }

    public static MyHqlCast Create(IASTFactory factory, HqlExpression expression,
                                   string targetType)
    {
        return new MyHqlCast(factory,
                             new [] {
                                 new HqlIdent(factory, "cast")),
                                 new HqlExpressionList(factory, expression,
                                         new HqlIdent(factory, targetType)),
                             });
    }
} 
```

然后从 BaseHqlGeneratorForMethod 派生一个类。在其构造函数中，将 SupportedMethods 属性设置为 AsVarchar() 方法。覆盖 BuildHql() 方法。它应该输出等效于 cast(@param as varchar) 的 HQL 转换构造。通常你会在 treeBuilder 参数上使用 Cast() 方法，但不幸的是它只接受一个 System.Type，这对于这种情况来说还不够好。而是创建并返回 MyHqlCast 的一个实例：

```
return MyHqlCast.Create(new ASTFactory(new ASTTreeAdaptor()),
                        visitor.Visit(arguments[0]).AsExpression(),
                        "varchar"); 
```

然后需要通过从 DefaultLinqToHqlGeneratorsRegistry 派生来注册 BaseHqlGeneratorForMethod 的实现。调用 this.Merge(new MyGenerator()); 在构造函数中。然后通过以下方式注册您的注册表类型

```
nhibernateConfiguration.LinqToHqlGeneratorsRegistry<MyRegistry>(); 
```****

# opencv - OpenCV SIFT vs David Lowe 的 SIFT 实现，OpenCV 差很多

> ID：14396168
> 
> 赞同：5
> 
> 时间：2013-01-18T09:46:36.037
> 
> 标签：opencv, image-recognition, sift

[我尝试使用David Lowe 的实现](http://www.cs.ubc.ca/~lowe/keypoints/)和[OpenCV 实现](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/tutorial_code/features2D/SURF_FlannMatcher.cpp?rev=6445)对几个不同的对象进行对象检测（只是在此代码中更改了 'SurfFeatureDetector' -> 'SiftFeatureDetector' 和 'SurfDescriptorExtractor' -> 'SiftDescriptorExtractor'）。

看来opencv的实现要差得多！检测到大量误报和更少的关键点！我尝试使用 'SiftFeatureDetector' 参数，如 sigma/contrastThreshold 等，但结果总是比原始 David 的版本差得多。

*   SIFT 的 opencv 实现与最初的 David Lowe 的实现是否完全“不同”？

*   有谁知道“SiftFeatureDetector”的一个好的参数集，以便大卫的实现提供的对象图像的结果（如 box.pgm/basmati.pgm..）可能看起来类似于大卫的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T18:05:25.310

[VLFeat](http://www.vlfeat.org/)的[SIFT 实现](http://www.vlfeat.org/api/sift.html)与原始实现非常[接近](http://www.vlfeat.org/overview/sift.html)（在特征输出方面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:56:38.187

我正在使用 OpenCV 的 SIFT 实现，并与 David Lowe 在他的网站上提供的实现进行比较。调整一些参数我得到了很好的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-09T13:00:59.997

这是我在 Python 中使用的：

```
 detector = cv2.xfeatures2d.SIFT_create(
        nfeatures = 0,  # def 0 
        nOctaveLayers = 3,  # def 3
        contrastThreshold = 0.04,  # def 0.04 
        edgeThreshold = 10,  # def 10 
        sigma = 1.6)  # def 1.6 
```

所有默认值。我得到了很好的结果，尽管执行速度很慢。

# php - PHP 和从任何地方访问全局对象

> ID：14396169
> 
> 赞同：0
> 
> 时间：2013-01-18T09:46:41.697
> 
> 标签：php

我有一个全局对象，一个“注册表”，它是一个包含其他重要对象的容器：

*   输入对象。
*   输出对象。
*   具有连接的数据库对象。
*   记录对象。
*   会话对象。

我需要在处理我的请求的每个地方（对象）都有这个全局对象。

就像在我的 JBoss 环境中，我有一个有状态会话 Bean 作为前端控制器，它将处理引导到一个特殊的无状态会话 Bean，我有一个入口点，“facade.php”。

在这个facade.php 中，我创建了全局对象并将其他对象（输入对象，...）放入其中。

然后是一个大的 switch 语句，我将请求重定向到特殊的处理对象。

是否有一种方法、机制可以从处理对象访问这个通用对象而不将其作为参数传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:52:38.263

你可以做什么：

*   将对象放入会话中。[http://php.net/manual/en/book.session.php](http://php.net/manual/en/book.session.php)（但这将在“请求”中存活）
*   使对象成为单例。[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)（我推荐这个，如果它适合这种情况。不要只使用单例来避免将参数传递给类/函数。）
*   `global`用关键字标记对象。[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:49:00.807

要让变量随处可用，您可以使用`$_SESSION`如下变量：

```
session_start();
$_SESSION['registry'] = // Your data 
```

确保`session_start()`在您想要访问会话变量时使用该函数。

# android - 打开一个新活动：动画开始但活动显示在动画之前

> ID：14396172
> 
> 赞同：0
> 
> 时间：2013-01-18T09:46:47.937
> 
> 标签：android, animation, android-activity

我愿意：

```
startActivityForResult(i, NEW_ACTIVITY);
overridePendingTransition(R.anim.fade_in, R.anim.fade_out); 
```

新的 Activity 开始了，但它会立即显示出来……而且只有第二次，它才会消失，然后按要求淡入。也就是说，当我执行上面的代码时，新的动画

1.  闪烁一次
2.  消失
3.  淡入

**我不想要第 1 步。**

PS： *淡入：*

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="750" /> 
```

*消退：*

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_interpolator"
    android:fromAlpha="1.0" android:toAlpha="0.0" android:duration="750" /> 
```

## ****编辑****

我意识到只有在活动的 onCreate() 中有 ProgressDialog.show() 命令时才会发生这种情况！如果我在 te onCreate 中显示 ProgressDialog，这会使动画出错！任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:49:05.780

也许您可以使用 AnimationListener 并在 onAnimationEnd() 中启动您的活动。

# python - 在 Python 中，如何反转这个调用：long("1234", 16)？

> ID：14396178
> 
> 赞同：0
> 
> 时间：2013-01-18T09:46:58.113
> 
> 标签：python, binary, hex

我希望能够做相反的事情：

`foo = long(binarystring.encode('hex'), 16)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:49:27.660

```
In [7]: long("1234", 16)
Out[7]: 4660L

In [8]: hex(4660L)[2:-1]
Out[8]: '1234' 
```

`[2:-1]`丢弃前导和`0x`尾随`L`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T09:51:42.113

您可以使用字符串格式，然后解码结果。

```
>>> binarystring = "asddfsdf"
>>> tmp = long(binarystring.encode('hex'),16)
>>> ( "%x" % tmp ).decode('hex')
'asddfsdf' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:53:02.843

使用 binascii.hexlify() - 应该这样做

# xml - 如何使用 xsl:for-each 和 XSL 1.0 对数据进行分组

> ID：14396191
> 
> 赞同：3
> 
> 时间：2013-01-18T09:47:45.970
> 
> 标签：xml, xslt, loops, grouping

我正在尝试根据以下答案使用 XSLT 为 XML 文档中的每个用户获取多个 html 文档：[how to apply group by on xslt elements](https://stackoverflow.com/questions/2146648/how-to-apply-group-by-on-xslt-elements)但是没有成功。

XML:

```
<root>
  <ArrayOfResult>
    <Result>
      <Men>
        <BowlerResult>
          <Person>
            <Name>name 1</Name>
          </Person>
          <Data>
            <Score1>1</Score1>
            <Score2>1</Score2>
            <Score3>1</Score3>
          </Data>
        </BowlerResult>
        <BowlerResult>
          <Person>
            <Name>name 2</Name>
          </Person>
          <Data>
            <Score1>2</Score1>
            <Score2>2</Score2>
            <Score3>2</Score3>
          </Data>
        </BowlerResult>
      </Men>
      <Women>
        <BowlerResult>
          <Person>
            <Name>name 3</Name>
          </Person>
          <Data>
            <Score1>3</Score1>
            <Score2>3</Score2>
            <Score3>3</Score3>
          </Data>
        </BowlerResult>
      </Women>
    </Result>
    <Result>...</Result>
  </ArrayOfResult>
  <ArrayOfResult>...</ArrayOfResult> 
```

人可以在更多的联赛

我想要实现的目标：对于每个人（不同的人/姓名），我想从所有“BowlerResult”元素中积累数据

我现在拥有的 XSLT：

```
<xsl:key name="keyPerson" match="BowlerResult" use="Person/Name" />

<xsl:template match="text()" />

<xsl:template match="/root">
  <root>
    <xsl:apply-templates />
  </root>
</xsl:template>

<xsl:template
 match="BowlerResult[generate-id(.)=generate-id(key('keyPerson',Person/Name)[1])]">
  <Person value="{Person/Name}">
    <xsl:for-each select="key('keyPerson', Person/Name)">
      <Result>
        <id>
          <xsl:value-of select="Person/Name" />
        </id>
      </Result>
    </xsl:for-each>
  </Person>
</xsl:template> 
```

但这只是给了我第一个 Person 的迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:27:54.343

您的 XSLT 有很多问题，但这里的主要问题是第一个模板的路径不匹配任何内容（TeamResult 不在根目录下，并且没有 Result 元素。此外，密钥名为“keyPerson”，不是“keyBowler”。

此 XSLT 成功地将每个玩家分组一次。你能试一试吗？（注意，实际输入 XML 使用元素名称 BowlerResult 和 Bowler）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:key name="keyPerson" match="BowlerResult" use="Bowler/Name" />

  <xsl:template match="text()" />

  <xsl:template match="/root">
    <root>
      <xsl:apply-templates />
    </root>
  </xsl:template>

  <xsl:template
   match="BowlerResult[generate-id(.)=generate-id(key('keyPerson',Bowler/Name)[1])]">
    <xsl:variable name="name" select="Bowler/Name" />
    <Person value="{$name}">
      <xsl:for-each select="key('keyPerson', $name)">
        <Result>
          <id>
            <xsl:value-of select="$name" />
          </id>
        </Result>
      </xsl:for-each>
    </Person>
  </xsl:template>

</xsl:stylesheet> 
```

# ruby-on-rails - multi_json gem 上的 gem 冲突 oa-oauth 和 fb_graph

> ID：14396192
> 
> 赞同：0
> 
> 时间：2013-01-18T09:47:46.927
> 
> 标签：ruby-on-rails, rubygems, fb-graph

我该如何解决这种冲突？

```
Bundler could not find compatible versions for gem "multi_json":
  In Gemfile:
    fb_graph (= 2.6.2) ruby depends on
      multi_json (>= 1.3) ruby

    oa-oauth (= 0.3.2) ruby depends on
      multi_json (1.0.4) 
```

我的宝石文件：

```
# oauth authentication
gem 'oa-oauth', '0.3.2', :require => 'omniauth/oauth'
gem 'oa-openid', '0.3.2'
gem 'fb_graph', '2.6.2'
gem 'twitter', '4.4.4'
gem "koala", '1.6.0' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T15:23:30.100

尝试：添加`gem "multi_json`您的 Gemfile，删除您的 Gemfile.lock 文件，然后`bundle`再次运行。

# mysql - MYSQL如何声明一个日期时间变量？

> ID：14396196
> 
> 赞同：16
> 
> 时间：2013-01-18T09:47:57.843
> 
> 标签：mysql, sql

我的代码：

```
DECLARE report_date DATETIME;
set report_date='2013-01-17 00:00:00';

SELECT  *
  FROM `NMPP`.`capacitypersecond` 
  WHERE `StreamDT` >=report_date and `StreamDT` < '2013-01-18 00:00:00'  ;

SELECT  *
  FROM `NMPP`.`capacityperHr` 
  WHERE `StreamDT` >=report_date and `StreamDT` < '2013-01-18 00:00:00'  ;

SELECT  *
  FROM `NMPP`.`capacityperDay` 
  WHERE `TJLDate` >=report_date and `TJLDate` < '2013-01-18 00:00:00'  ; 
```

-

```
DECLARE report_date DATETIME;
/* SQL Error (1064): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE report_date DATETIME' at line 1 */
/* Affected rows: 0  Found rows: 0  Warnings: 0  Duration for 0 of 5 queries: 0.000 sec. */ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-30T16:00:29.853

或与演员：

```
set @report_date = cast('2013-01-17 00:00:00' as datetime); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-18T09:52:11.070

摆脱`declare`：

```
set @report_date = '2013-01-17 00:00:00';

SELECT  *
  FROM `NMPP`.`capacitypersecond` 
  WHERE `StreamDT` >= @report_date and `StreamDT` < '2013-01-18 00:00:00'  ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-15T07:38:13.340

所有的 DECLARE 都应该在触发器的开始处，存储过程。

这不是一种类似 C++ 的语言，您可以混合使用声明和语句，而更像 C，所有声明必须在所有语句之前完成。

# php - PHP 和下载 Excel 表

> ID：14396199
> 
> 赞同：0
> 
> 时间：2013-01-18T09:48:01.080
> 
> 标签：php, export-to-excel

当我在 php 中下载 excel 表时遇到问题（代码如下）。我有一个日期字段，但在数据库中的日期是“YYYY-MM-DD”格式，我将此格式转换为“d/m/Y”。

然后下载并打开一个excel表格，表格到现在为止都很好。当我们使用“格式刷”工具（在剪切和复制按钮下方找到）时，日期会将日期格式转换为一些数字，有时还会转换为一些有趣的字符。

如何使用“格式刷” - 首先选择非日期列，然后按“格式刷”按钮，然后单击日期字段列，它将一些日期转换为数字。

代码如下

```
$filename = "Report_name.xls";

if ( $html == "" ) 
{
    echo "<br>ERROR: No input provided";
    exit;
}
@header ("Content-type: application/x-msexcel");
@header("Content-Disposition: attachment; filename=$filename");
@header("Expires: 0");
print "$header\n$html"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:53:11.497

默认情况下，MS excel 选择系统日期时间格式的日期格式。因此，将您的系统日期时间更改为 YMD 格式，以避免日期字段中出现奇怪的字符和数字。

# c# - 回发时的会话错误

> ID：14396200
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:48:07.793
> 
> 标签：c#, asp.net, .net

```
if (!IsPostBack)
{
        try
        {
            Label1.Text = Session["user.transaction.id"].ToString(); //Error Line
        }
        catch (Exception a8)
        {
            Label1.Text = a8.Message;
        }
 } 
```

我用来将信息存储到 Session 中的代码

尝试 {

```
 _conn = new OdbcConnection(DatabaseManager.getConnectionString());
        if (_conn.State == ConnectionState.Closed)
            _conn.Open();
        OdbcCommand cmd = _conn.CreateCommand();
        cmd.CommandText = "{call vam_gen_new_card3(?,?,?,?,?,?,?,?,?,?,?)}";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("@personal_card", OdbcType.Char, 1).Value = 'Y';
        cmd.Parameters.Add("@holder_surname", OdbcType.VarChar, 50).Value = tbSurname.Text.ToString();
        cmd.Parameters.Add("@holder_name", OdbcType.VarChar, 100).Value = tbName.Text.ToString();
        cmd.Parameters.Add("@holder_cname", OdbcType.Char, 10).Value = tbCname.Text.ToString();
        cmd.Parameters.Add("@date_of_birth", OdbcType.VarChar, 11).Value = tbDOB.Text.ToString();
        cmd.Parameters.Add("@travel_document_no", OdbcType.VarChar, 20).Value = tbTravelDocNo.Text.ToString();
        cmd.Parameters.Add("@nationality", OdbcType.VarChar, 40).Value = tbNationality.Text.ToString();
        cmd.Parameters.Add("@email", OdbcType.VarChar, 50).Value = tbEmail.Text.ToString();
        cmd.Parameters.Add("@telephone", OdbcType.VarChar, 20).Value = tbTelephone.Text.ToString();
        cmd.Parameters.Add("@mobilephone", OdbcType.VarChar, 20).Value = tbMobile.Text.ToString();
        cmd.Parameters.Add("@card_remark", OdbcType.VarChar, 255).Value = card_remark;
        OdbcDataReader rs = cmd.ExecuteReader();

        while (rs.Read())
        {
            Session["user.transaction.id"] = "SVC0" + rs["card_no"].ToString();   //get the transaction no.
            Session["user.total_amount"] = Convert.ToDecimal(tbAmount.Text);
        } 
```

我最初在`Session["user.transaction.id]`. 但是当我将信息发布到支付网关并回发时。我无法找回`Session["user.transaction.id"]`并得到错误。我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:55:38.387

`NullReferenceException`s 比他们应该的要普遍得多。

你不能`ToString()`什么都不叫。您应该进行检查，例如：

```
if (Session["user.transaction.id"] != null) {
    Session["user.transaction.id"].ToString();
} 
```

这是你应该习惯记住的事情，并且学会不要假设任何事情都会成为事情。看看`Label.Text`and ：在这些情况下， and是`a8.Message`更清晰和“安全”的东西，但是每次你访问引用类型的成员时，你应该知道你的变量引用了一个实例。因此，这些异常很容易追踪。`Label``a8`

如果您在将用户发送到某个地方然后让他们返回的过程中遇到此问题，那么用户离开的时间很可能比分配的会话超时时间更长，因此在他们返回时开始一个新会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:51:22.257

创建会话变量的正确方法是：

```
Session["VarName"] = value; 
```

从会话中读取项目：

```
Label1.Text = Session["VarName"].ToString(); 
```

或者您可以使用 Add 方法：

```
Session.Add("VarName", value); 
```

无论哪种方式都会奏效。

接下来从会话状态中删除项目：

```
Session.Remove("VarName"); 
```

要从会话状态中清除所有项目，请使用：

```
Session.Clear(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:59:51.600

您的会话为空。您必须先检查会话中的空值，然后使用会话变量中存在的值。

尝试这个

```
if (!IsPostBack)
                {
                    try
                    {
                        if (Session["user.transaction.id"] != null && !string.IsNullOrEmpty(Session["user.transaction.id"].ToString()))
                        {
                            Label1.Text = Session["user.transaction.id"].ToString(); //Error Line
                        }

                    }
                    catch (Exception a8)
                    {
                        Label1.Text = a8.Message;
                    }
                } 
```

# c - 无法修改字符数组

> ID：14396202
> 
> 赞同：5
> 
> 时间：2013-01-18T09:48:11.980
> 
> 标签：c, arrays, memory-management, compiler-errors, mplab

考虑以下代码。

```
char message[]="foo";

void main(void){
    message[] = "bar";
} 
```

为什么 MPLAB IDE v8.63 中存在语法错误？我只是想改变字符数组的值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T09:53:22.073

声明后不能使用这样的字符数组。如果要为字符数组分配新值，可以这样做：-

```
strcpy(message, "bar"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-18T09:53:34.247

像这样的作业

```
message[] = "bar"; 
```

或者

```
message = "bar"; 
```

C 不支持。

初始赋值起作用的原因是它实际上是伪装成赋值的数组初始化。编译器解释

```
char message[]="foo"; 
```

作为

```
char message[4] = {'f', 'o', 'o', '\0'}; 
```

这里实际上没有`"foo"`涉及字符串文字。

但是当你尝试

```
message = "bar"; 
```

“bar”被解释为实际的字符串文字，不仅如此，而且`message`不是可修改的左值，即。你不能给它分配东西。如果要修改数组，则必须逐个字符地进行：

```
message[0] = 'b';
message[1] = 'a'; 
```

等，或者（更好地）使用为您执行此操作的库函数，例如 strcpy()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:52:13.377

您只能在声明 char 数组时的初始化中执行此操作

```
message[] = "bar"; 
```

你不能在你的代码中做到这一点

要修改它，您可以使用`strcpy`from`<string.h>`

```
strcpy(message, "bar"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:04:18.523

你不能像这样改变字符数组。如果要更改字符数组的值，则必须通过修改单个字符来更改它，或者可以使用

```
strcpy(message,"bar"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T10:43:12.803

```
char message[]="foo"; 
```

该语句使编译器创建 4 个字符变量的内存空间。该内存簇的起始地址是 的指针值`message`。address of`message`是不可更改的，您不能更改它指向的地址。在这种情况下，您唯一的机会是更改指向的数据`message`。

```
char* message="foo" 
```

这时候会创建内存来存储指针的地址，所以`message`在执行过程中指针所在的地址可以改变。然后你可以安全地做`message="bar"`

# uitableview - UITableView 编辑静态单元格

> ID：14396204
> 
> 赞同：1
> 
> 时间：2013-01-18T09:48:20.507
> 
> 标签：uitableview, uitextfield

我有一个关于从 UITableView 保存数据的最佳实践问题。

我有一个包含多个部分和单元格的 UITableView，其中大部分我已经实现了一个自定义 UITableViewCell，它在“显示”模式下显示一个标签，在“编辑”模式下显示一个 UITextField。

当 UIViewController 显示表格视图时，我使用来自对象的数据填充 NSMutableDictionary。然后我在屏幕上显示数据和更新字段时使用这个字典。通过拥有这个缓冲区，我可以取消编辑，而无需点击核心数据来重新加载我的对象。

处理此问题的另一种方法是直接更新我的对象，然后如果用户单击取消，我会从 SQLite 重新加载数据。

有这样做的“标准”方式吗？

谢谢，乔丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:22:34.857

我发现最好的方法是使用 NSUndoManager。

这样我可以直接更新我的对象，如果用户点击取消，我只需撤消更改。

为我工作。

干杯，MJ

# md5 - 使用 jython 进行 MD5 加密

> ID：14396205
> 
> 赞同：0
> 
> 时间：2013-01-18T09:48:21.617
> 
> 标签：md5, jython, encoder, hashlib

我需要在 Jython 中使用 hashlib 加密来加密一些数据。变量“output”的输出是一组垃圾字符“¦?ìîçoÅ”w2?¨?¼?6”

```
m=hashlib.md5()

m.update(unicode(input).encode('utf-8'))

output = m.digest()

grinder.logger.info(digest= " + str(output)) 
```

如何将输出作为上述代码的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:28:58.770

`digest()`方法返回的字节可用于其他需要字节的函数（例如 base64 或压缩它）。为了简单地将 MD5 结果显示为十六进制使用`hexdigest()`方法：

```
output = m.digest()
hexoutput = m.hexdigest()
print("digest= " + str(hexoutput)) 
```

# c++ - 如果应用程序有内存泄漏，这些是否会在终止时解决？

> ID：14396206
> 
> 赞同：-2
> 
> 时间：2013-01-18T09:48:27.563
> 
> 标签：c++, windows, memory-leaks

> **可能重复：**
> [Windows 7 清理 C++ 内存泄漏？](https://stackoverflow.com/questions/9987008/windows-7-cleans-up-c-memory-leaks)

我正在与同事讨论一个案例，其中一个例外情况导致 Windows C++ 应用程序快速退出，而我们代码的性质意味着这似乎可能导致内存泄漏。

如果应用程序无论如何都要关闭，这有关系吗？进程结束时，泄漏的内存是否会返回给系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:51:07.547

现代桌面操作系统，如 Linux、OSX 和 Windows，都会在进程退出时释放分配的资源。

在嵌入式系统上可能不会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T09:51:21.727

```
Will leaked memory be returned to the system when the process ends? 
```

是的，系统将收回动态分配的内存。一些系统资源不会被释放，例如：共享内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T09:49:52.557

是的，当应用程序退出时，操作系统将释放与退出进程相关的资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T09:50:01.700

应用程序分配的内存分配在进程内存中。它在进程终止时释放。

# c# - 如何在 Snapped 模式下直接启动 MetroApp？

> ID：14396210
> 
> 赞同：3
> 
> 时间：2013-01-18T09:48:39.373
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, winrt-xaml

> **可能重复：**
> [强制 WinRT 应用程序捕捉视图](https://stackoverflow.com/questions/11907058/force-winrt-app-to-snapped-view)

是否可以直接在快照模式下启动 MetroApp？

我想通过协议调用另一个应用程序，该应用程序应该以 Snapped 模式打开。

通过协议调用应用程序没有问题，它工作正常，但应用程序以全屏或主内容模式打开。

我还没有找到任何配置说“从侧边栏开始”。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T12:37:26.980

截至目前，答案是否定的。由于捕捉模式功能取决于用户，您不能使用代码跳过它/限制它，希望 MS 可能会进一步提供此功能。

正如@Hermit Dave 提到的，取消捕捉是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:11:54.190

我遇到的 ApplicationView 类只公开了 TryUnsnap 和 Value（当前视图值），用于请求从捕捉到未捕捉视图的更改。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh701658.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh701658.aspx)

我不认为你想要什么是可能的。

# php - 如何以编程方式识别成人内容？

> ID：14396211
> 
> 赞同：17
> 
> 时间：2013-01-18T09:48:41.610
> 
> 标签：php, asp.net, image, image-processing, verification

我目前正在为客户开发一个网站。它包括用户能够上传图片以显示在网站的画廊中。

我们遇到的问题是，当用户上传图片时，显然需要对其进行验证以确保网站安全（没有色情或露骨图片）。但是，我的客户不希望手动接受正在上传的每张图片，因为这会很耗时，而且用户的图片不会立即在线。

我正在用 PHP 编写代码。如果需要，我可以更改为 ASP.net 或 C#。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-18T09:56:30.123

**2019 更新**

自 2013 年这个原始答案方式以来，发生了很多变化，主要是机器学习。现在有许多库和 API 可用于以编程方式检测成人内容：

[Google Cloud Vision API](https://cloud.google.com/blog/products/gcp/filtering-inappropriate-content-with-the-cloud-vision-api)，它使用与 Google 用于安全搜索的相同模型。

[NSFWJS](https://github.com/infinitered/nsfwjs)使用 TensorFlow.js 声称可以达到约 90% 的准确度，并且在 MIT 许可下是开源的。

Yahoo在 BSD 2 条款许可下有一个名为[Open NSFW的解决方案。](https://github.com/yahoo/open_nsfw)

**2013年答案**

有一个名为**[nude.js](http://www.patrick-wied.at/static/nudejs/)**的JavaScript 库就是为此而生的，尽管我从未使用过它。[这是它的使用演示](http://www.patrick-wied.at/static/nudejs/demo/)。

还有**[PORNsweeper](http://www.dansdata.com/pornsweeper.htm)**。

**[另一种选择是使用诸如Amazon Mechanical Turk](https://www.mturk.com/mturk/welcome)**之类的东西“外包”审核工作，这是一个众包平台，“*使计算机程序能够协调使用人类智能来执行计算机无法完成的任务*”。因此，您基本上会为每个审核项目支付少量费用，并让外包的实际人员为您审核内容。

我能想到的唯一其他解决方案是让图像用户审核，用户可以标记不适当的帖子/图像以进行审核，如果没有人想要手动审核它们，可以在一定数量的标记后简单地删除它们。

以下是有关该主题的其他一些有趣的链接：

*   [http://thomas.deselaers.de/publications/papers/deselaers_icpr08_porn.pdf](http://thomas.deselaers.de/publications/papers/deselaers_icpr08_porn.pdf)
*   [http://www.naun.org/multimedia/NAUN/computers/20-462.pdf](http://www.naun.org/multimedia/NAUN/computers/20-462.pdf)
*   [以编程方式检测色情图片的最佳方法是什么？](https://stackoverflow.com/questions/713247/what-is-the-best-way-to-programatically-detect-porn-images)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-11T12:14:30.830

如果您正在寻找基于 API 的解决方案，您可能需要查看[Sightengine.com](https://sightengine.com)

它是一种自动化解决方案，用于检测图像和视频中的成人内容、暴力、名人等内容。

这是一个使用 SDK 的 PHP 示例：

```
<?php
$client = new SightengineClient('YourApplicationID', 'YourAPIKey');

$output = $client>check('nudity')>image('https://sightengine.com/assets/img/examples/example2.jpg'); 
```

然后输出将返回分类：

`{ "status": "success", "request": { "id": "req_VjyxevVQYXQZ1HMbnwtn", "timestamp": 1471762434.0244, "operations": 1 }, "nudity": { "raw": 0.000757, "partial": 0.000763, "safe": 0.999243 }, "media": { "id": "med_KWmB2GQZ29N4MVpVdq5K", "uri": "https://sightengine.com/assets/img/examples/example2.jpg" } }`

查看文档以获取更多详细信息：[https](https://sightengine.com/docs/#nudity-detection) ://sightengine.com/docs/#nudity-detection （免责声明：我在那里工作）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-17T14:30:45.197

下面的示例不会为您提供 100% 准确的结果，但它应该至少对您有所帮助并且开箱即用。

```
<?php
$url = 'http://server.com/image.png';
$data = json_decode(file_get_contents('http://api.rest7.com/v1/detect_nudity.php?url=' . $url));

if (@$data->success !== 1)
{
    die('Failed');
}
echo 'Contains nudity? ' . $data->nudity . '<br>';
echo 'Nudity percentage: ' . $data->nudity_percentage . '<br>'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-26T19:50:37.993

有一个免费的 API 可以检测成人内容（色情、裸露、NSFW）。

[https://market.mashape.com/purelabs/sensitive-image-detection](https://market.mashape.com/purelabs/sensitive-image-detection)

我们已经在我们的生产环境中使用它，我会说它到目前为止工作得很好。虽然有一些错误检测，但如果他们不确定，他们似乎更愿意将图像标记为不安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-06T03:52:25.773

这完全取决于您正在寻找的准确度水平，简单的肤色检测（如nude.js）可能会在大量样本集上为您提供60-80％的准确度，比这更准确的东西，比如说90-95 %，您将需要一些专门的计算机视觉系统，其模型会随着时间的推移而不断改进。对于后者，您可能需要查看[http://clarifai.com](http://clarifai.com)或[https://scanii.com](https://scanii.com)（我正在研究）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-07T14:00:27.517

Microsoft Azure 有一个非常酷的 API，称为**计算机视觉**，您可以免费使用（通过 UI 或以编程方式），并且有大量文档，[包括 PHP](https://docs.microsoft.com/en-us/azure/cognitive-services/computer-vision/quickstarts/php)。

它有一些非常准确（有时是幽默）的结果。

除了检测成人和“色情”材料之外，它还会读取文本、猜测您的年龄、识别原色等。

您可以在**[azure.microsoft.com](https://azure.microsoft.com/en-us/services/cognitive-services/computer-vision/)**上试用。

**“活泼”图像的示例输出：**

```
FEATURE NAME:               VALUE:
Description                 { "tags": [ "person", "man", "young", "woman", "holding",
                              "surfing", "board", "hair", "laying", "boy", "standing", 
                              "water", "cutting", "white", "beach", "people", "bed" ], 
                              "captions": [ { "text": "a man and a woman taking a selfie", 
                              "confidence": 0.133149087 } ] }
Tags                        [ { "name": "person", "confidence": 0.9997446 }, 
                              { "name": "man", "confidence": 0.9587285 }, 
                              { "name": "wall", "confidence": 0.9546831 }, 
                              { "name": "swimsuit", "confidence": 0.499717563 } ]
Image format                "Jpeg"
Image dimensions            1328 x 2000
Clip art type               0
Line drawing type           0
Black and white             false
Adult content               true
Adult score                 0.9845981
Racy                        true
Racy score                  0.964191854
Categories                  [ { "name": "people_baby", "score": 0.4921875 } ]
Faces                       [ { "age": 37, "gender": "Female",
                                "faceRectangle": { "top": 317, "left": 1554, 
                                                   "width": 232, "height": 232 } } ]
Dominant color background   "Brown"
Dominant color foreground   "Black"
Accent Color                #0D8CBE 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-14T06:38:57.203

我最近发现自己需要一个系统来检测成人内容。

我最终构建了[这个项目](https://github.com/EugenCepoi/nsfw_api)，这是一个可以轻松部署到 Herkou（或任何可以运行 docker 容器的地方）的 API，并允许您为成人内容的图像评分。

它基于[open_nsfw](https://github.com/yahoo/open_nsfw)一个开源模型，该模型经过训练可以检测不适合工作的图像。上面的项目基本上是一个基于 open_nsfw 的 python API，可以部署。

# sql-server-2008 - sql server 2008 内存缓存

> ID：14396222
> 
> 赞同：0
> 
> 时间：2013-01-18T09:49:05.520
> 
> 标签：sql-server-2008, caching, memorycache

我有一个正在运行并连接到 sql server 2008 数据库的服务，问题是我的查询在第一次运行时需要很长时间，但是在缓存时它完成得非常快。SQL server 2008是否每隔一段时间自动清除缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:07:54.340

SQL Server 不会释放内存，除非服务器上存在内存压力或者您明确告诉它这样做。

请参阅 Microsoft 支持：

[http://support.microsoft.com/kb/321363](http://support.microsoft.com/kb/321363)

另一个原因可能是其他需要放入内存的数据库对象正在将您正在使用的数据库对象推出缓冲区。在这种情况下，分配给实例的更多内存或更高效的查询将有所帮助。

因此，要么存在来自服务器上其他应用程序的内存压力，要么没有为当前工作负载分配给实例的足够内存，但*本身*并没有定期计划的进程来清除 SQL Server 内存缓冲区。

# c# - jquery post 进入循环

> ID：14396223
> 
> 赞同：0
> 
> 时间：2013-01-18T09:49:13.930
> 
> 标签：c#, jquery, asp.net

我有这段代码，用于在“Enter”键上发布消息，但它正在循环中，而不是发布一条消息，而是随机发布多次。

这是我在`<input id='txtsendmsg" + i + "' placeholder=\"Write a comment...\" onkeypress='PostMessage(event,"+i+");' class='msgtxt'></input>`任何帮助中调用的功能，将不胜感激。

```
function PostMessage(event,key) {
    $('#txtsendmsg'+key).on("keypress", function (e) {
        if (e.which == 13) {
            var msgid = $(this).siblings('.msgid').val();
            var msgtxt = $(this).val();
            $.ajax({
                url: "student_post_login.aspx/funPostMessage",
                data: 'postd=' + "Y" + '&msgid=' + msgid + '&msgtxt=' + msgtxt,
                success: function (data) {
                    if (data) {
                        displayData();
                    }

                },
                failure: function (response) {
                    alert("Faliure:");
                },
                error: function (response) {
                    alert(response);
                }
            });
            e.preventDefault();
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T09:53:33.847

问题是因为您每次在输入字段中点击 a 键时都附加了一个事件处理程序。按一个键两次，你会收到两次请求，三次；三等。

尝试仅使用 jQuery 而不是`onclick`属性分配处理程序：

```
<input id='txtsendmsg" + i + "' placeholder=\"Write a comment...\" class='msgtxt' /> 
```

```
$('.msgtxt').on('keypress', function (e) {
    var $el = $(this);
    if (e.which == 13) {
        var msgid = $el.siblings('.msgid').val();
        var msgtxt = $el.val();

        $.ajax({
            url: "student_post_login.aspx/funPostMessage",
            data: 'postd=' + "Y" + '&msgid=' + msgid + '&msgtxt=' + msgtxt,
            success: function (data) {
                if (data) {
                    displayData();
                }
            },
            failure: function (response) {
                alert("Faliure:");
            },
            error: function (response) {
                alert(response);
            }
        });
        e.preventDefault();
    }
}); 
```

# java - 重复磁盘写入

> ID：14396227
> 
> 赞同：0
> 
> 时间：2013-01-18T09:49:22.617
> 
> 标签：java, c++, file-io, disk

我需要将单词列表写入文件，然后将文件保存在磁盘上。以下两种方法中的一种是否比另一种更好？第二个显然使用更多的主内存，但速度有区别吗？

（这只是伪代码）

```
for i = 0 to i = n:
    word = generateWord();
    FileWriter.println(word);
end loop 
```

相对

```
String [] listOfWords = new List
for i = 0 to i = n:
    word = generateWord();
    listOfWords.add(word)
end loop
for i = 0 to n:
    FileWriter.println(listOfWords[i]);
end loop 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:16:37.737

您展示的这两种方法在磁盘使用效率方面完全一样。

在考虑磁盘写入速度时，您必须始终考虑您使用的是哪种写入器对象。有许多类型的写入器对象，当涉及到实际的磁盘写入时，它们中的每一种都可能表现不同。

如果您正在使用的对象是写入您告诉它的确切数据的对象之一，那么您的写入方式非常低效。您应该考虑切换到另一个写入器（例如 BufferedWriter）或在写入之前构建更长的字符串。

通常，您应该尝试将数据写入适合磁盘块大小的块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:23:32.250

在您的代码和磁盘之间，您有一个类似于以下内容的堆栈：Java 库代码、虚拟机运行时、C 运行时库、操作系统文件缓存/虚拟内存子系统、操作系统 I/O 调度程序、设备驱动程序和物理磁盘固件。

除非分析显示有问题，否则请尽可能做最简单的事情。其中几个层已经调整为处理缓冲、批处理和调度顺序写入，因为它们是如此常见的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:10:30.287

从`FileWriter`s 的角度来看，您在两个示例中都在做完全相同的事情，因此显然文件 I/O 没有任何区别。而且，正如您所说，第一个的空间复杂度是 O(1)，而第二个的空间复杂度是 O(N)。

# api - 在 iPhone <5 设备下无法设置 setPausesLocationUpdatesAutomatically

> ID：14396229
> 
> 赞同：1
> 
> 时间：2013-01-18T09:49:25.333
> 
> 标签：api, ios6, location, tracking, iphone-4

我的定位服务遇到了一些问题...我找到了一个可以在 iPhone 5 设备上正常运行的策略... 情况是 - 用户开始工作 -> gps 硬件应该关机 -> 何时醒来继续。对于这个 iam，使用 setPausesLocationUpdatesAutomatically 委派东西。但是为了醒来，我使用自己的策略。

我在我公司的 iPhone 5 上进行了所有测试，效果很好 - 现在我对 8 个人进行了更大的测试，所有 iPhone 4 的人都哭了......

有人可以选择在 iPhone4 上启用它吗？

```
 if(isIOS6) {
        [m_locationManager setActivityType:CLActivityTypeFitness];
        [m_locationManager setPausesLocationUpdatesAutomatically:NO];
        [m_locationManager setPausesLocationUpdatesAutomatically:YES];

        logff(@"autopause flag %i",[m_locationManager pausesLocationUpdatesAutomatically]); 
```

}

这段代码告诉我，我在 iphone 4 上设置了标志，而 api 忽略了它或将其更改回 NO.... 这是什么一致的 api 狗屎？...

也许有人可以帮助问候和谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T10:20:52.933

```
if ([m_locationManager respondsToSelector:@selector(setPausesLocationUpdatesAutomatically:)]) {
    [m_locationManager setPausesLocationUpdatesAutomatically:YES];
} 
```

# listview - WinRT 中的 MvvmCross 和 ListBox / ComboBox 绑定

> ID：14396231
> 
> 赞同：1
> 
> 时间：2013-01-18T09:49:27.890
> 
> 标签：listview, binding, combobox, mvvmcross, selectionchanged

我需要为 WinRT 应用程序中的列表和组合框实现选择更改事件。我正在使用 MvvmCross 但 AFAIK 这是一个 WinRT 而不是 Mvx 特定的问题。System.Windows.Interactivity 不适用于 WinRT 应用程序，因此我无法使用基于 i:Interaction.Triggers 的技术。我想以真正的 MVVM 方式实现绑定，而无需切换到代码隐藏，因此我可以在其他平台上尽可能多地重用。在 WinRT 应用程序中实现它的合理方法是什么？我在 MvvmCross 示例中没有找到任何示例。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T22:13:54.690

如果您正在使用 MvvmCross 在 WinRT 中寻找行为，您现在可以使用 Windows.UI.Interactivity nuget 包（[https://nuget.org/packages/Windows.UI.Interactivity](https://nuget.org/packages/Windows.UI.Interactivity)）。

在将它与 MvvmCross 一起使用时，我对现有的 MvxEventToCommand 类做了一些小改动（继承自 TriggerAction(FrameworkElement) 而不是 TriggerAction(DependencyObject)）。奇迹般有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:00:41.317

我认为这是 WinRT 上 Mvvm 的普遍问题

由于某些未知原因，Microsoft 没有在 WinRT 中包含行为。（有这样的理论，比如他们没有时间了，他们不想因为 Expression Blend 的变化等等......）

有很多关于如何解决这个问题的博客文章和文章——其中大部分都围绕着 Joost van Schaik 的优秀库：

*   [http://dotnetbyexample.blogspot.co.uk/2012/07/a-winrt-behavior-to-mimic-eventtocommand.html](http://dotnetbyexample.blogspot.co.uk/2012/07/a-winrt-behavior-to-mimic-eventtocommand.html)
*   [http://blog.tattoocoder.com/2012/08/getting-started-w-windows-8-mvvm-light.html](http://blog.tattoocoder.com/2012/08/getting-started-w-windows-8-mvvm-light.html)

我自己没有这样做 - 我倾向于不使用 SelectionChanged 而是将`ICommand`s 放在每个 ListItem 中。如果你让 Joost 的图书馆工作，我很乐意看到一个样本 :)

# iphone - 检测在 UITableview 中单击了哪个按钮并更改按钮图像

> ID：14396236
> 
> 赞同：0
> 
> 时间：2013-01-18T09:49:49.613
> 
> 标签：iphone, ios, objective-c

我在我的视图中使用了三个表，并使用标签将它们分开。在我的第二个表格视图中，我制作了一个自定义 uitableview 并在其中添加标签和按钮。

这是我在 cellforrowatindexpath 中写的按钮

```
followingButton = [UIButton buttonWithType:UIButtonTypeCustom];

  [followingButton addTarget:self action:@selector(followingButtonpressed:)forControlEvents:UIControlEventTouchUpInside];

 [followingButton setImage:[UIImage imageNamed:@"following12.png"] forState:UIControlStateNormal];

following.tag=indexpath.row;

 [followingButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];

followingButton.frame = CGRectMake(220.0 ,20.0, 100, 40.0);

 [cell.contentView addSubview:followingButton]; 
```

======

```
-(void)followingButtonpressed:(id)sender
{

 UIView *contentView1 = (UIView *)[sender superview];

 UITableViewCell *cell1= (UITableViewCell *)[contentView1 superview];

 NSIndexPath *indexPath1 = [followingTable indexPathForCell:cell1];

[sender tag];

NSLog(@"sender tag --%d",[sender tag]);

 // UIButton *button = (UIButton *)sender;

 // UITableViewCell *cell = (UITableViewCell*)[button superview];

  UIButton *tempButtom = (UIButton *)[cell1 viewWithTag:[sender tag]];

  [tempButtom setImage:[UIImage imageNamed:@"following_off12.png"] 

forState:UIControlStateNormal];

} 
```

但是它崩溃了，我无法更改所选按钮的图像，请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:53:24.220

```
Use this to detect which button has been pressed

    UIView *senderButton = (UIView*) sender;
    NSIndexPath *indexPath = [(UITableView *)self.superview indexPathForCell: (UITableViewCell*)[[senderButton superview]superview]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:00:48.543

给`Tag`每个`UIButton`并编写以下代码以检测按下哪个按钮

```
 - (void)buttonPressedAction:(id)sender
{
   UIButton *button = (UIButton *)sender;
   // Get the UITableViewCell which is the superview of the UITableViewCellContentView which is the superview of the UIButton
   (UITableViewCell*)cell = [[button superview] superview];
   int row = [myTable indexPathForCell:cell].row;

  // Here **row** give you tad of specific UIButton that you tapped

  if (row == yourTag )
  {
     // write code for action
  }
} 
```

**或者您可以每次为单元格设置标签，但不能设置 UIButton。您的操作将如下所示：**

```
- (void)buttonPressedAction:(id)sender
{ 
   UIButton *button = (UIButton *)sender;
   int row = [button superview].tag;

   // Here **row** give you tad of specific UIButton that you tapped

  if (row == yourTag )
  {
     // write code for action
  }

} 
```

# ios - 使用 AIR for Mobile (AS3) 更改 iOS 顶栏背景颜色

> ID：14396239
> 
> 赞同：1
> 
> 时间：2013-01-18T09:50:07.623
> 
> 标签：ios, mobile, user-interface, air, ios6

是否可以使用 AIR for Mobile 更改 iOS 6 中顶部栏的背景颜色，或者只能在本机 Objective-C 中完成？

我的意思是说：

[http://shurl.be/uLwt](http://shurl.be/uLwt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:45:56.090

我为此找到了一个简单易行的解决方案。默认状态栏样式 ( `UIStatusBarStyle`) 设置为`UIStatusBarStyleBlackOpaque`。只需将值更改为`UIStatusBarStyleBlackTranslucent`并将 SWF 的背景颜色设置为您希望状态栏具有的颜色。

所以我所做的就是这样：在应用程序描述符中添加了以下设置

```
 <key>UIStatusBarStyle</key>
  <string>UIStatusBarStyleBlackTranslucent</string> 
```

并更改了 SWF 背景颜色

```
 [SWF(backgroundColor="#ff6a00")] 
```

结果：

![当我来到这里](../Images/c55ef32da7c6fd449deb464e568b4f45.png) VS ![现在，（固定）](../Images/e639fe7788dac28f0320c0bcf700be3b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:16:52.753

在objective-c中解决这个问题：

你可以改变它，目标设置 -> 夏季 -> 状态栏的色调

或者

您可以从 info.plist -> 将状态栏样式的值设置为不透明黑色样式将其更改回黑色。

# android - 我可以将支付宝用于 android 应用程序，该应用程序对视频上传服务收费吗

> ID：14396241
> 
> 赞同：0
> 
> 时间：2013-01-18T09:50:07.883
> 
> 标签：android, paypal

如[Android 开发者政策](http://play.google.com/about/developer-content-policy.html) 所述

> 应用内购买：在从 Google Play 下载的应用程序中提供额外内容、服务或功能的开发者必须使用 Google Play 的支付系统作为支付方式，但以下情况除外：
> 
> 主要是为实物商品或服务付款（例如购买电影票；例如购买价格还包括纸质订阅的出版物）；或者
> 
> 支付可能在应用程序本身之外消费的数字内容或商品（例如购买可以在其他音乐播放器上播放的歌曲）

以下应用程序是否属于`except`条款或`services`上面提到的

视频上传应用

1.  用户录制视频

2.  在将视频上传到服务器之前，用户必须使用 paypal 支付一些费用

3.  为此，我打算使用`PayPal`图书馆。

    这个应用程序背后的概念类似于`Audition`可能包含或可能不包含的费用`Reality Shows` 。`American Idol`所以用户为了提交他/她`audition video`通过他/她的手机记录的他/她，他/她必须通过支付一些费用`Paypal`。所以，今年秋天下`payment for services`或不下。意思是，我可以使用`Paypal`还是必须选择。`Google checkout`最后，我需要在上发布这个应用程序`Play Store`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T07:02:25.470

您必须使用谷歌计费，因为他们不会从应用程序中拿走任何东西来付款。

例如，如果用户正在购买视频，那么他/她将能够使用任何支付网关进行支付。

但在您的情况下，用户付费使用该服务上传视频。所以你必须使用谷歌播放计费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T20:30:43.323

因此，如果用户使用该应用程序购买许可证密钥并且该许可证密钥仅用于桌面电脑应用程序（不在应用程序中，尽管该应用程序可能与桌面软件相关），那么他们使用 Paypal 付款？

# metadata - 是否可以在 SSAS 中“取消处理”多维数据集以仅检索元数据？

> ID：14396242
> 
> 赞同：1
> 
> 时间：2013-01-18T09:50:08.937
> 
> 标签：metadata, ssas, cube, ssas-2008, ssas-2012

我想知道是否可以在 SSAS 中“取消处理”多维数据集。我想这样做，以便我可以在两个不同的服务器之间执行“同步”。这（我认为）会删除所有数据并保留要同步的元数据吗？我对吗？

你知道这样做的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:05:36.020

可以取消处理，尽管这会使您的多维数据集未处理。右键单击数据库，选择进程，在下一个窗口中将进程类型更改为 Unprocess 和右上角的“脚本到新窗口”。

但是，如果您只想要一个模式，您可以不编写“脚本数据库作为创建”XMLA 的脚本吗？然后删除您的目标并针对目标服务器运行 Create XMLA？

# html-lists - 响应式列表和第 n 个子选择器

> ID：14396245
> 
> 赞同：2
> 
> 时间：2013-01-18T09:50:15.923
> 
> 标签：html-lists, responsive-design, sass, media-queries, zurb-foundation

为了使用媒体查询设置列表样式，我在理解 nth-child 时遇到问题。我有一个 6 个项目的无序列表，它`display:inline-block;`以以下方式水平显示项目：

**[项目1] [项目2] [项目3] .... [项目6]**

```
ul {
    list-style-type: none;
    margin-left: auto;
    padding:0;
    text-align:center;
    li {
        display:inline-block;
        font-size: ms(3);
        padding-left: 0.5em;
        margin-left: 0.5em;
        margin-bottom: 0.2em;
        border-left: 1px dotted #d1d1d1;
        &:first-child {border:none; margin-left:0;};
        a {text-decoration:none;} 
```

}

我正在使用 Foundation 3.2 和 Sass，这个无序列表位于 12 列的 div 中。理想情况下，当浏览器宽度小于 768px 时，我希望列表分解如下：

**[项目 1] [项目 2] [项目 3]**

**[项目4] [项目5] [项目6]**

此外，当屏幕小于 320 像素时，我希望列表显示如下：

**[项目1] [项目2]**

**[项目3] [项目4]**

**[项目5] [项目6]**

我怎样才能实现这样的事情？

另外，我`border-left: 1px dotted #d2d2d2`用来在列表项之间制作分隔符，而第一项没有边框。我如何利用 nth-child 以便在 768 的情况下我没有得到第 1 项和第 4 项的左边框？此外，在 320 的情况下，我应该如何实现 nth-child 以便项目 1,3 和 5 中没有左边框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:52:32.473

您是否考虑过使用 CSS Columns 模块？它将为您完成所有数学运算（填充、分隔线出现的位置等）。唯一的问题是它以与您想要的顺序不同的顺序对项目进行排序。

如果您使用特定宽度的列宽，它将根据设备宽度的需要添加/删除列，而无需媒体查询。

[http://jsfiddle.net/W84Ja/](http://jsfiddle.net/W84Ja/)

```
ul {
    padding: 0;
    columns: 8em;
    column-rule: 1px solid;
    column-gap: 2em;
    list-style-type: none;
} 
```

如果您正在寻找百分比样式划分，请结合媒体查询使用特定数量的列。

[http://jsfiddle.net/W84Ja/1/](http://jsfiddle.net/W84Ja/1/)

```
ul {
    padding: 0;
    columns: 2;
    column-rule: 1px solid;
    column-gap: 2em;
    list-style-type: none;
}

@media (min-width: 25em) {
    ul {
        columns: 3;
    }
} 
```

如果您仍然设置使用内联块列表项，这将是这样做的方法：

[http://jsfiddle.net/W84Ja/2/](http://jsfiddle.net/W84Ja/2/)

```
@media (max-width: 20em) {
    li:nth-child(even) {
        border-left: 1px solid;
    }
}

@media (min-width: 20em) and (max-width: 30em) {
    li:nth-child(3n+2), li:nth-child(3n+3) {
        border-left: 1px solid;
    }
} 
```

# jquery - Spry 选项卡式面板 - 无需单击即可选择菜单项

> ID：14396249
> 
> 赞同：0
> 
> 时间：2013-01-18T09:50:34.800
> 
> 标签：jquery, spry, panels, tabbed

我正在使用 Spry 选项卡式面板。我想选择一个菜单而不点击。我已将一个菜单设置为默认菜单。

当我单击一个链接或按钮时，应该激活默认菜单而无需重新加载页面。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:25:22.250

这是参考您的后续问题：

> 例如，我有 3 个菜单项说：menu1、menu2 和 menu3..menu1 设置为默认菜单..现在，我选择 menu3 并且在 menu3 内容区域中有一个按钮。当我单击该按钮时，我想要默认菜单(manu1) 激活..

在你的第三个选项卡式面板内容中，把这个`<a href="#" onclick="TabbedPanels1.showPanel(0); return false;">Go to Menu 1</a>`

为了更清楚地理解，请看下面的代码：

```
<body>
<div id="TabbedPanels1" class="TabbedPanels">
  <ul class="TabbedPanelsTabGroup">
    <li class="TabbedPanelsTab" tabindex="0">Menu 1</li>
    <li class="TabbedPanelsTab" tabindex="0">Menu 2</li>
    <li class="TabbedPanelsTab" tabindex="0">Menu 3</li>
  </ul>
<div class="TabbedPanelsContentGroup">
    <div class="TabbedPanelsContent">Content 1</div>
    <div class="TabbedPanelsContent">Content 2</div>
    <div class="TabbedPanelsContent">Content 3 <a href="#" onclick="TabbedPanels1.showPanel(0); return false;">Go to Menu 1</a> </div>
  </div></div>
<script type="text/javascript">
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1");
</script>
</body> 
```

PS。（并加强 Joonas 的回答）[http://adobe.github.com/Spry/samples/tabbedpanels/tabbed_pa ​​nel_sample.htm](http://adobe.github.com/Spry/samples/tabbedpanels/tabbed_panel_sample.htm)

希望这能回答您的疑问！

# facebook - Janrain 参与不适用于 facebook 登录

> ID：14396252
> 
> 赞同：0
> 
> 时间：2013-01-18T09:50:46.080
> 
> 标签：facebook, magento, janrain

我在我的 magento 站点中安装了 janrain 参与插件，对其进行了配置，并且它可以在 live、yahoo 和 google 上正常工作，但是当涉及到 fb 时，它给了我一个错误。有人第一次登录时它工作得很好，但是当他们注销并尝试使用同一个 Facebook 帐户重新登录时，他们会被重定向到 mysite/janrain-engage/rpx/duplicate/ 并显示一条错误消息（已经有一个帐户与此电子邮件地址。如果您确定这是您的电子邮件地址，请单击此处获取您的密码并访问您的帐户。）如果他们使用他们的电子邮件和他们通过电子邮件获得的密码，他们可以登录，所以我认为我在我的脸书应用。任何人都可以给我一份关于如何正确配置 fb-app 的完整指南，或者我是否必须在 janrain 管理面板中进行更改？

# php - 使用 php 选择 div 的内容

> ID：14396257
> 
> 赞同：1
> 
> 时间：2013-01-18T09:51:06.520
> 
> 标签：php

我的页面中有一个名为“main”的 div。我在页面末尾使用 php 将 html 转换为 pdf 的代码。我想选择内容（名为 main 的 div 包含段落、图表、表格等）。

如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:36:46.217

下面的代码将向您展示如何`DIV`使用代码获取标签的内容`PHP`。

**PHP代码：**

```
 <?php
    $content="test.html";
    $source=new DOMdocument();
    $source->loadHTMLFile($content);
    $path=new DOMXpath($source);
    $dom=$path->query("*/div[@id='test']");
    if (!$dom==0) {
       foreach ($dom as $dom) {
          print "
    The Type of the element is: ". $dom->nodeName. "
    <b><pre><code>";
          $getContent = $dom->childNodes;
          foreach ($getContent as $attr) {
             print $attr->nodeValue. "</code></pre></b>";
          }
       }
    }
  ?> 
```

我们正在获取`DIV`带有“test”的标签`ID`，您可以将其替换为您想要的标签。

**测试.html**

```
<div id="test">This is my content</div> 
```

**输出：**

```
The Type of the element is: div
This is my content 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:58:52.900

您应该将 php 代码放入与 html 不同的文件中，并使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)之类的东西从 div 中获取内容。

```
$dom = new DOMDocument();
$dom->loadHTMLFile('yourfile.html');
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:56:35.547

您不能通过 PHP 直接与 HTML DOM 交互。您可以做的是将 a 与包含您的内容的输入一起使用。提交表单时，您可以通过 PHP 访问数据。

但也许您想使用 Javascript 来完成该任务？

尽管如此，一个快速的'n'dirty PHP示例：

```
<form action="" method="post">
    <textarea name="content">hello world</textarea>
</form>

<?php
   if (isset($_POST['content'])) {
       echo $_POST['content'];
   }
?> 
```

# java - 将背景图像添加到背景 xml 布局

> ID：14396261
> 
> 赞同：4
> 
> 时间：2013-01-18T09:51:11.400
> 
> 标签：java, android, drawable

我正在使用可绘制的 xml 文件来使我的应用程序中的按钮“漂亮”。

![在此处输入图像描述](../Images/1cdcc57499da9569b4993261e592fe16.png)

^ 就这样。

它工作正常，但是我想在按钮上添加一个勾号或叉号（以标记完成与否） - 我不太确定它是否可能。

这是我的按钮 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#449def" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="5dp"
                android:top="5dp"
                android:right="5dp"
                android:bottom="5dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#449def"
                android:endColor="#2f6699"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="5dp"
                android:top="5dp"
                android:right="5dp"
                android:bottom="5dp" />
        </shape>
    </item>
</selector> 
```

我正在按钮上设置背景元素以使用上面的`@drawable/bluebuttons`

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:58:43.477

如果您使用的是按钮，那么您可以在 XML 文件中使用 Button 的属性。

`android:drawableRight="@drawable/ANY_DRAWABLE_IMAGE"`

就我而言，它是这样的：

```
<Button android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ...
    ...
    android:drawableRight="@drawable/ic_tick" /> 
```

或者在你的代码中，你可以这样写：

```
// PUT ZERO FOR NO DRAWABLE
textView1.setCompoundDrawablesWithIntrinsicBounds(LEFT_DRAWABLE, TOP_DRAWABLE,RIGHT_DRAWABLE, BOTTOM_DRAWABLE); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:13:56.397

如果您有兴趣在**按钮上动态设置图像，**则`Activity`可以使用：

```
Drawable iconTick= getApplicationContext().getResources().getDrawable(R.drawable.icon_tick);
mBtnTaks1.setCompoundDrawablesWithIntrinsicBounds(iconTick, null, null, null); // left,top,right,bottom 
```

谢谢。

# validation - 使用正则表达式进行 URL 验证

> ID：14396263
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:51:19.887
> 
> 标签：validation, url, jquery-validate

我需要根据正则表达式验证 URL。问题是，是否可以有像[http://www.google.12.com](http://www.google.12.com)这样的网址？

我使用了 jquery 插件，它验证了上面的 URL，但在我的应用程序中，这被认为是无效的。

有没有办法我可以应用额外的验证。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:26:25.660

你说你使用[了 jQuery Validate 插件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js)。

这是此插件中包含的默认 URL 规则：

```
function (value, element) {
    // contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/
    return this.optional(element) || /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);
} 
```

您可以修改它以满足您的需要，然后使用[内置`addMethod()`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)将其用作自定义规则：

```
jQuery.validator.addMethod("custom_rule", function(value, element) { 
    return this.optional(element) || /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);
}, "your message"); 
```

回调的参数是：

*   已验证元素的当前值
*   要验证的元素

# python - Celery：使用多个参数链接任务

> ID：14396267
> 
> 赞同：9
> 
> 时间：2013-01-18T09:51:21.777
> 
> 标签：python, celery

celery 文档告诉我，如果多个任务链接在一起，第一个任务的结果将是下一个任务的第一个参数。我的问题是，当我有一个返回多个结果的任务时，我无法让它工作。

例子：

```
@task()
def get_comments(url):
    #get the comments and the submission and return them as 2 objects
    return comments, submission

@task
def render_template(threadComments, submission):
    #render the objects into a html file
    #does not return anything 
```

现在，如果我在 (get_comments(url) | render_template()).apply_asnc() 之类的链中调用它们，python 将抛出一个`TypeError: render_template() takes exactly 2 arguments (0 given)`.

我可以看到结果没有展开并应用于参数。如果我只调用 get_comments，我可以这样做：

```
result = get_comments(url)
arg1, arg2 = result 
```

并得到两个结果。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-21T15:29:06.990

这里有两个错误。

首先，您不必调用`get_comments()`and `render_template()`。相反，您应该使用`.s()`任务方法。像：

```
( get_comments.s(url) | render_template.s()).apply_async() 
```

在您的情况下，您首先启动该函数，然后尝试将函数结果连接到一个链中。

其次，实际上，您不会从第一个任务中返回“两个结果”。相反，您返回一个包含两个结果的元组，并且该元组作为单个对象传递给第二个任务。

因此，您应该将第二个任务重写为

```
@task
def render_template(comments_and_submission):
   comments, submission = comments_and_submission 
```

如果你修复了这些，它应该可以工作。

# android - 三星 Galaxy Tab 2 上可能的 glsl 编译器错误？

> ID：14396269
> 
> 赞同：1
> 
> 时间：2013-01-18T09:51:28.700
> 
> 标签：android, opengl-es-2.0, galaxy-tab, glsles

这是取自一些真实代码的示例。这不能在我的三星 Galaxy Tab 2 上编译：

```
#define some_macro(x_)

void some_function(vec4 some_arg some_macro(FOO))
{

} 
```

这个想法是参数列表中的“some_macro(FOO)”部分应该扩展为空。相反，这会生成一条错误消息，例如“错误：0：520：'（'：语法错误”，我假设它指的是宏调用中的左父级。无参数宏（简单的#define）在同一个地方工作正常.

我并不十分担心必须重构我的代码以避免这种语法，但我想知道是否有人知道这段代码*是否应该*根据 GLSL ES 规范工作。这在其他设备上编译得很好（比如 Galaxy Note II）。

# mysql - 将我的 MyISAM 转换为 InnoDB

> ID：14396279
> 
> 赞同：-4
> 
> 时间：2013-01-18T09:51:58.807
> 
> 标签：mysql, innodb, myisam

我在表中没有记录。将 MyISAM 转换为 InnoDB 时出现此错误

SQL 查询：编辑

```
ALTER TABLE `vocabulary` ENGINE = InnoDB 
```

MySQL 说：文档

> `#1214`- 使用的表类型不支持 FULLTEXT 索引

## 表的表结构`vocabulary`

如果不存在则创建表`vocabulary`（ `id`int(10) unsigned NOT NULL AUTO_INCREMENT, `usr`char(10) NOT NULL, `word`char(10) NOT NULL, `meaning`char(10) NOT NULL, `synonym`char(10) NOT NULL, `Date`char(10) NOT NULL,主键 ( `id`), 全文键`usr`( `usr`) ) ENGINE=MyISAM 默认字符集=latin1 AUTO_INCREMENT=1 ;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:21:27.227

在 MySQL 中只有 MyISAM 存储引擎支持全文索引

Innodb 将不支持全文索引

所以为了转换表使用

```
 alter table vocabulary drop key usr;

  alter table vocabulary engine=innodb; 
```

# iphone - 我们是否需要提供请求类型“json/xml”

> ID：14396290
> 
> 赞同：0
> 
> 时间：2013-01-18T09:52:25.410
> 
> 标签：iphone, ios, objective-c, json, xml-parsing

我的客户获得了一项用于我注册的 Web 服务。我需要发布值。我正在使用以下代码发布：

```
-(IBAction)testingPurpose:(id)sender{

    NSMutableDictionary *finalQuoteDict = [[NSMutableDictionary  alloc] init];
    [finalQuoteDict setValue:@"It is an Error Message" forKey:@"ErrorMsg"];
    [finalQuoteDict setValue:@"json" forKey:@"ReturnVal"];
    [finalQuoteDict setValue:@"john@live.com" forKey:@"Email"];
    [finalQuoteDict setValue:@"David John" forKey:@"FullName"];
    [finalQuoteDict setValue:@"2147483647" forKey:@"UserID"];
    [finalQuoteDict setValue:@"john" forKey:@"UserName"];
    [finalQuoteDict setValue:@"qqqqqq" forKey:@"UserPassword"];
    SBJsonWriter *jsonWriter = [[SBJsonWriter alloc] init];    
    NSString *jsonRequest = [jsonWriter stringWithObject:finalQuoteDict];  
    jsonRequest = [jsonRequest stringByReplacingOccurrencesOfString:@"<" withString:@""];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@Register",MainUrl1,jsonRequest]];
    NSLog(@"url is---%@",url);
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                           cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

    [request setHTTPMethod:@"POST"];

       [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: requestData];

    NSError* error = nil;
    NSURLResponse* response;
    NSData* result = [NSURLConnection sendSynchronousRequest:request  returningResponse:&response error:&error];

    NSString *dataString=[[NSString alloc]initWithData:result encoding:NSUTF8StringEncoding];
    NSMutableDictionary *getResponseDict = [[NSMutableDictionary alloc] init];
    [getResponseDict addEntriesFromDictionary:[dataString JSONValue]];

} 
```

但它抛出一个错误说 **“错误跟踪是：（“错误域=org.brautaset.JSON.ErrorDomain代码=3\”无法识别的前导字符\“用户信息=0x856ac50 {NSLocalizedDescription=无法识别的前导字符}”**

请检查图像，即发布值..

我们是否需要提供请求类型“json/xml”

![在此处输入图像描述](../Images/0ec3e8d392d19c2338ed647c9854f2ab.png)

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:09:44.967

尝试使用这里 httpMethod 是“POST”。postData 是您的所有 Post 数据，其 Key 值与 Web 服务请求相同。

aUrl 是你的服务 url

```
-(void)WebService:(NSString *)httpMethod DataDictionary:(id)postData RequestAction:(NSString *)aUrl
{
    // Check internet Connection
    //Use Reachability class for this==============
        Reachability *r = [Reachability reachabilityWithHostName:@"www.google.com"];
    NetworkStatus internetStatus = [r currentReachabilityStatus];
    if ((internetStatus != ReachableViaWiFi) && (internetStatus != ReachableViaWWAN))
    {
      NSLog("No Internet Connection Available");    
           return;
    }

    self.identifier = serviceIdentifier;

    NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:aUrl] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:10.0 ];

        NSLog(@"final request is %@",request);

        [request setHTTPMethod:@"POST"];

        [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

//set body in JSON formate

        [request setHTTPBody:[[self convertToJSON:postData] dataUsingEncoding:NSUTF8StringEncoding]];  
        NSString    *contentLength = [NSString stringWithFormat:@"%d",[[request HTTPBody] length]]; 
        [request setValue:contentLength forHTTPHeaderField:@"Content-Length"];

        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 

        if (connection) 
        {
            self.responseData = [NSMutableData data]; //Its a mutable Data object
        }
}

//Convert data into JSOn format

//use JSON classes for this 
-(NSString *)convertToJSON:(id)requestParameters
{
    NSData *jsonData   = [NSJSONSerialization dataWithJSONObject:requestParameters options:NSJSONWritingPrettyPrinted error:nil];

    NSLog(@"JSON DATA LENGTH = %d", [jsonData length]);

    NSString *jsonString    = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    NSLog(@"JSON STR LENGTH = %d", [jsonString length]);

    return jsonString;

} 
```

//你会在 NSURLConnection 中得到响应

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

    [self.responseData appendData:data];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog("Failed to get Result......");

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *jsonString = [[[NSString alloc] initWithData:self.responseData encoding:NSUTF8StringEncoding] autorelease];

    NSDictionary    *aDic = [jsonString JSONValue];

   NSLog("Your Response Data is ==>> %d",aDic);

} 
```

希望这会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:07:49.210

您不需要在请求类型中提供 json 或 xml，除非或直到 web 服务明确需要它。如果webservice处理它会更好。

**但我认为问题在于解析响应。**

首先确保它`dataString`不为 null 或为空，或者您正在从服务器获得一些响应。

如果它有一些值，那么返回值或**服务器响应可能不是有效的 JSON 格式**。

您可以通过将 json 响应粘贴到 [http://jsonlint.com/](http://jsonlint.com/)来验证它。

# http - 跨域cookies - 必须是可能的

> ID：14396294
> 
> 赞同：3
> 
> 时间：2013-01-18T09:52:33.830
> 
> 标签：http, cookies, session-cookies

> **可能重复：**
> [跨域 cookie](https://stackoverflow.com/questions/1084114/cross-domain-cookies)

如果我理解正确，则无法为不同的域保存 cookie：仅相同根的子域。

但是，在查看某些网站时，我看到这种情况正在发生。

最明显的例子是在 youtube 上存在 youtube.com 和 google.com 的 cookie。

这怎么可能？他们是如何实现这一目标的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:56:01.777

例如，如果 youtube.com 包含来自 google.com 的图像，则 google.com 可以将 cookie 放置在“页面上”。单个 cookie 不在域之间共享。

有关如何实现此目的的更多信息，请参见例如此答案： [跨域 cookie](https://stackoverflow.com/questions/1084114/cross-domain-cookies)

# mysql - 两次加入两个表并返回重复的列名

> ID：14396296
> 
> 赞同：0
> 
> 时间：2013-01-18T09:52:41.337
> 
> 标签：mysql, codeigniter

假设我有两个表 USER 和 MESSAGE

```
USER -  id,name
MESSAGES - id,message_from,message_to,message_message 
```

所以为了加入我使用这个合作

```
SELECT m.*,u1.*,u2.* FROM MESSAGES m
    INNER JOIN USER as u1
       ON(m.message_from = u1.id)  
    INNER JOIN USER as u2
       ON(m.message_to = u2.id) 
```

所以现在当我在 codeigniter 中 print_r 输出结果时，它没有用户 message_to 的用户数据。

而且我猜即使它为两个用户返回数据，它也应该有一些**前缀来区分**

那么我该怎么做呢？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:55:54.580

使用别名：

```
SELECT m.id,
    u1.id as u1id,
    u1.name as u1name,
    u2.id as u2id,
    u2.name as u2name
FROM MESSAGES m
INNER JOIN USER as u1
    ON(m.message_from = u1.id)  
INNER JOIN USER as u2
    ON(m.message_to = u2.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:56:45.367

最好避免使用 SELECT * 语法。

我建议您指定要返回的列，并为名称不唯一的列提供别名。

```
SELECT m.id AS MessageId,m.message_from,m.message_to,m.message_message,
    u1.id AS FromId, u1.name AS FromName,
    u2.id AS ToId,u2.name AS ToName FROM MESSAGES m
INNER JOIN USER as u1 ON(m.message_from = u1.id)  
INNER JOIN USER as u2 ON(m.message_to = u2.id) 
```

# javascript - 获取应用的 css 属性标识符

> ID：14396299
> 
> 赞同：0
> 
> 时间：2013-01-18T09:52:46.813
> 
> 标签：javascript, css, properties, matrix, transform

如何`CSS`从元素（不包括值）中获取当前应用的属性标识符？

或者更确切地说：如何获取元素，例如`translate`,或? 我不是指完整的返回字符串，例如：。我的意思是...`skew``rotate``rect``rect(300px 0px 0px 300px)``property-identifiers`

我对 RegExp 不是很熟悉，但也许可以做到这一点？

所以为了更好的解释目的：

我需要检查一下，更改一些值（通过矩阵数组）并再次将它们重新应用回元素。

```
// http://stackoverflow.com/a/5968313/1250044
function matrixToArray(matrix) {
    return matrix.substr(7, matrix.length - 8).split(', ');
}

$("#foo").css("clip","rect(300px 0px 0px 300px)");
var matrix = matrixToArray($("#foo").css("clip"));

                              // If `#foo` has something else
                              // applied than `clip`, then
                    --- ˅ --- // is that not really dynamically
$("#bar").css("clip", "rect(" + matrix[0] + matrix[1] + matrix[2] + matrix[3] + ")"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:56:07.607

您可以使用[`window.getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)：

```
// your elemenet
var el;

// get the transformations applied:
var transform = window.getComputedStyle( el ).transform; 
```

但是，这将`matrix`在大多数情况下为您提供，而不是应用单个转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:00:08.607

例如，

```
$(ele).css('rotate') 
```

要检测，请检查返回长度是否 > 0

```
$(ele).css('rotate').length 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:26:42.463

知道了...

非常简单：

```
var getIdentifier = function(str) {
    return str.split('(')[0];
}; 
```

`getIdentifier( 'rect(300px 0px 0px 300px)' ) // => 'rect'`

# javascript - 立即执行的功能性能

> ID：14396301
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:52:58.963
> 
> 标签：javascript, performance, self-invoking-function

我正在测试两对场景：

1.) 将全局变量作为参数传递...

```
(function(d){
   //do some stuff with d
   return //something
})(document); 
```

...或将全局分配给局部变量。

```
(function(){
   var d = document;
   //do the same stuff
   return //something
})(); 
```

结果因浏览器而异，从版本到版本，甚至从测试到测试！

2.) 我有一个通过 XMLHttpRequest 获得的大数据对象。假设这个对象被几种方法访问，但只有一个在父函数的范围内是相关的。

```
(function(){
   //get data object
   var data = response;
   //change GUI, assign events, do some other stuff
   var searchInData = function(id){ //this will be used often
      //code
   };
   //data object won't be accessed any more
   //a lot of code
   return //something
})(); 
```

...或者使用这个？

```
(function(){
   var search = (function(){
      var data = response;
      //change GUI, assign events, do some other stuff
      return function(id){
         //code
      }
   })();
   //other stuff
   return //something
})(); 
```

同样，我无法得到明确的结果：使用哪个，为什么以及何时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:03:53.457

> 1 结果因浏览器而异，因版本而异，甚至因测试而异！

然后使用您认为更好的阅读方式。例如，选项 #1 编写起来会更少，但没有描述性参数，对于长函数来说很难理解（您需要向下滚动才能知道变量包含的内容）。

> 2 使用闭包？

我认为这`//a lot of code`是相关的事情。这两个函数都可以访问该代码范围内的变量，并且如果您不使用闭包（选项＃2），很多代码都在范围内具有局部变量。如果您使用闭包，浏览器可能能够优化垃圾收集并进行更好的内存管理。但是，这将取决于`//other stuff`实际情况 - 对于异步代码，我建议关闭。

# sql - Microsoft Access VBA 弹出警报日期临近

> ID：14396303
> 
> 赞同：1
> 
> 时间：2013-01-18T09:53:03.797
> 
> 标签：sql, ms-access, vba

我正在尝试在 Microsof Access 中编写一些 VBA（如果 VBA 是要走的路？）。我需要的是一条弹出消息，提醒某人下周内正在进行部署。

我的表名为 Tasks_List，并且有一个名为 Deployment_Date 的字段。

我想我需要的是为初始表单组合一个 OnLoad 。它将检查今天的日期并检查Deployoment_Date 并在下周内发生任何部署时显示一个弹出窗口。弹出窗口应显示正在发生的部署，例如 Initiating_System、Deployment_Date 和描述。

提前谢谢你，我在这件事上碰了壁。我将发布我尝试过的内容，但我没有 VBA 知识，而且非常糟糕。

我尝试了什么：

```
Private Sub Report_Open(Cancel As Integer)
Dim varX As Variant
varX = DLookup(Tasks_List.[Deployment_Date]< Now - 20)
If varX > 0 Then GoTo line2

line1: msgbox "Deployment approacing for: "

line2:

End Sub 
```

编辑：在下面的帮助之后，我为此创建了一个查询和表单。使用 Dcount：

```
Private Sub Detail_OnLoad()
    Deploy = DCount("*", "Tasks_List_Popup_Query")

    If Deploy <> 0 Then
        DoCmd.OpenForm "Tasks_List_Popup_Query_Form"
        DoCmd.GoToRecord , , acNewRec

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:03:37.177

您不需要任何 VBA。创建一个选择相关记录的查询并基于该查询创建一个表单。您可以使用 DCount 确保在启动表单之前有记录，这需要一点 VBA。

```
SELECT * FROM Tasks_List WHERE [Deployment_Date]< (Date - 20) 
```

对于 DCount：

```
Deploy = DCount("*","TheQuery") 
```

# unity3d - 如何使用 unity3d 读写系统注册表？

> ID：14396305
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:53:06.003
> 
> 标签：unity3d, registry

我为mac和pc开发了一个游戏。您能帮我了解如何使用 Unity3D 读取和写入系统注册表的代码吗？我对 Unity Script（Java Script）、C# 和 Boo Script 感到满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T05:11:21.427

我认为您想在 Unity 中使用[PlayerPrefs](http://docs.unity3d.com/Documentation/ScriptReference/PlayerPrefs.html)。

在 Windows 机器上，它将读取/写入注册表。在 Mac 上，它会将所有内容存储到 ~/Library/Preferences/unity.[company name].[product name].plist

阅读整页的描述，但这应该适合您的需要。

# jquery - 在 Rails 应用程序中使用 jquery 显示文本文件内容

> ID：14396306
> 
> 赞同：0
> 
> 时间：2013-01-18T09:53:06.827
> 
> 标签：jquery, ruby-on-rails

我正在尝试使用 jquery `$.get`/`$.load`函数加载文本文件的内容，但由于路由规则而出现错误。

我的代码如下：

```
$.get(
    '/root/test.txt',
    function(data) {        
        $('#textfile').html("");
        lines = data.split("\n");
        for (i = 0; i < lines.length; i++) {    
            $('#textfile').append("<div class='row-fluid'>");   
            $('#textfile').append(lines[i]);
            $('#textfile').append("</div>");    
        }
    }
); 
```

我收到此错误：

> 在 2013-01-18 14:36:30 +0700
> 由 ErrorsController#routing 作为 TEXT
> 参数处理 127.0.0.1 开始 GET "/root/test.txt" 参数：{"a"=>"root/test"}
> 呈现公共/404.html.erb 在 layouts/responsive (0.6ms)

有什么建议可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:59:53.213

你不能像这样加载任何文件.....这将调用get方法，这将是ajax调用......所以如果你想加载放在根目录中的文本..只需使用$.load()加载那个文件...！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:00:19.523

在 Rails 中，我假设您已经拥有 MVC 架构。创建一个控制器（或该控制器内的函数）并向该控制器发送 GET 请求以返回文本文件内容。

所以你想做

jQuery AJAX 请求

```
$.get("/readText", function(data){
    console.log(data);   //text file content
}); 
```

从您的控制器（Rails），使用 Rails 框架提供的 IO API 并读取您的文本文件并打印出文件的内容，就像您通常使用其他视图文件一样。`data`来自 jquery ajax 的参数将包含文本文件内容

* * *

或者您可以直接映射到文本文件的位置，例如

```
$.get("resources/test.txt", function(data){
   console.log(data);
}); 
```

* * *

您提到您收到 404 错误。这意味着它无法根据您指定的 URL 路径找到文本文件（或 MVC 应用程序的控制器）。检查您是否可以访问您的公共资源的快速有效的方法是通过在您的网络浏览器上输入 URL（例如 localhost:8080/yourapp/resources/test.txt）。但是，我认为从服务器读取资源然后打印出来比公开访问更安全。

# iphone - 不使用 NavigationController 的 UIViewController 的 Push-Pop 类动画

> ID：14396308
> 
> 赞同：1
> 
> 时间：2013-01-18T09:53:08.263
> 
> 标签：iphone, ios, uinavigationcontroller, uiviewanimation

我想在我的应用程序中实现**Push/Pop 类型的动画**。目前在我的应用程序中，我只是使用 addsubview 和 removesubview 添加和删除视图控制器，没有任何动画。

**添加导航控制器将是应用程序的重大变化，因为它将改变应用程序的整个结构**。有没有办法使用导航控制器来实现这种动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:29:52.167

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        viewSecond.frame = CGRectMake(330, 0, 320, 548);
    }

- (IBAction)onBtnClick:(id)sender
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    viewFirst.frame = CGRectMake(-330, 0, 320, 548);
    viewSecond.frame = CGRectMake(0, 0, 320, 548);
    [UIView commitAnimations];
}
- (IBAction)onBtnClick2:(id)sender
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    viewFirst.frame = CGRectMake(0, 0, 320, 548);
    viewSecond.frame = CGRectMake(330, 0, 320, 548);
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:08:31.113

尝试这个

首先给你的子视图一个框架

```
 secondview.frame=CGRectMake(330, 0, 320, 460); 
```

然后当你添加它时

```
 [self.view addSubView:secondview];

   [UIView beginAnimations:@"bringViewDown" context:nil];
   [UIView setAnimationDuration:0.2];
   firstview.frame=CGRectMake(-330, 0, 320, 460);
   secondview.frame=CGRectMake(0, 0, 320, 460);
   [UIView commitAnimations]; 
```

希望这可以帮助.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:52:21.850

实施自定义容器控制器请参阅 Session 102 - 在 WWDC 2011 中实施 UIViewController Containment

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T08:49:18.167

添加带有推送动画的子视图

```
//push animation
CATransition *transition = [CATransition animation];
transition.duration = 0.5;
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromRight;
[transition setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[self.view.layer addAnimation:transition forKey:nil];
[self addSubview:subView]; 
```

并删除带有弹出动画的子视图

```
//pop animation
CATransition *animation = [CATransition animation];
[animation setDuration:0.5];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromLeft];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[[self.superview layer] addAnimation:animation forKey:@"SlideView"];
[self removeFromSuperview]; 
```

# bash - 在 if 循环中 ping 输出

> ID：14396315
> 
> 赞同：0
> 
> 时间：2013-01-18T09:53:20.133
> 
> 标签：bash, ping

使用下面的脚本，我希望能够获取在其末尾输出的 IP 地址，然后对其进行 ping 操作。

```
#!/usr/local/bin/bash

echo -n "Enter server number:"
read userinput

lookupip="d $userinput"

if [[ $userinput -lt 0 || $userinput -gt 9999 ]] #checks that the input is within the desired range
 then
   echo "Input outside acceptable range."
 else

#grep gets just the IP address

$lookupip | grep -E -o '(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)' | sed '1 ! d' 
```

我不知道如何用输出做到这一点：

```
> or >> filename | xargs ping 
```

就像在 grep 命令周围使用 " 或 ` （或将其放入变量中，如下所示：

```
ipgrep=$(grepcommand)
ipgrep=`grepcommand` 
```

或变量似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:42:09.717

Derp，我只需要添加：

```
| xargs ping -c 1 
```

后：

```
sed '1 ! d' 
```

# delphi - 应用程序设置 + IniFile + 用户权限

> ID：14396319
> 
> 赞同：1
> 
> 时间：2013-01-18T09:53:24.660
> 
> 标签：delphi, ini, rights

你能告诉我吗？我编写了一个使用“Settings.ini”来保存设置的应用程序。该应用程序是使用 InnoSetup 安装的。如果有多个用户帐户并且应用程序安装在其中一个帐户中，那么，如果我尝试从另一个帐户运行应用程序，我会收到错误“无法写入......”。也就是说，如果从另一个帐户运行，应用程序无权写入设置文件。我不知道在 Windows XP 中会发生什么，但这就是应用程序在 Windows 7 中的行为方式。所以请你告诉我，我应该在我的应用程序中定义一些东西以使其适用于多个用户还是应该在安装，在 InnoSetup 参数的某个地方？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:29:56.080

您应该 - 将程序安装到 Program Files 或其他一些公共文件夹中 - 任何用户都有权读取和运行但无权写入或删除的文件夹。通常安装程序会允许覆盖文件夹，但规则仍然存在：每个用户都应该具有非破坏性权限（读取和执行）和非破坏性权限（删除、覆盖）

这意味着您的安装程序应该请求管理员权限和 UAC 提升 - 询问 InnoSetup 论坛或文档如何做到这一点。这可能涉及将清单资源包含到安装程序中。当普通用户运行安装程序并且安装程序然后要求另一个具有管理员权限的用户名和密码时，这是正常的。

* * *

设置和其他用户唯一数据应保存到特殊的每个用户数据文件夹中。通常是用户配置文件下的 AppLocal 文件夹。但是，这是您的应用程序而不是安装程序的任务。安装程序可以创建全局设置模板，应用程序将在给定用户的第一次运行时将其复制到用户本地设置中，或者如果实施级联设置存储，则将由用户本地设置覆盖。

*   [http://msdn.microsoft.com/en-us/library/windows/apps/hh465094.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465094.aspx)
*   [http://blogs.msdn.com/b/patricka/archive/2010/03/18/where-should-i-store-my-data-and-configuration-files-if-i-target-multiple-os-版本.aspx](http://blogs.msdn.com/b/patricka/archive/2010/03/18/where-should-i-store-my-data-and-configuration-files-if-i-target-multiple-os-versions.aspx)

运行命令提示符，发出`set`命令 - 你会看到所有需要的路径作为环境变量，名称如 AppPath、LocalAppPath 和 UserProfile

*   [http://greatis.com/delphicb/tips/lib/systemifo-envstrings.html](http://greatis.com/delphicb/tips/lib/systemifo-envstrings.html)
*   [http://www.delphidabbler.com/articles?article=6](http://www.delphidabbler.com/articles?article=6)

# ios - 可以在滚动视图中查看一个视图但它不会滚动吗？

> ID：14396336
> 
> 赞同：0
> 
> 时间：2013-01-18T09:54:20.723
> 
> 标签：ios, scrollview

我在滚动视图中创建了一个视图，但我不希望它使用滚动视图滚动，它可以在底部修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:50:24.690

是的，在 scrollViewdidScroll 委托方法中更新您需要修复的子视图的框架。

# javascript - 一个 JavaScript 正则表达式，只允许拉丁字符和其他有用的键

> ID：14396338
> 
> 赞同：0
> 
> 时间：2013-01-18T09:54:25.047
> 
> 标签：javascript, regex

对于 HTML 输入值，是否可以使用 JavaScript 定义一个只接受拉丁字符（任何大小写）和所有其他键（如退格键、删除键、箭头键以及 .dot、@at）的正则表达式？是否用于事件键评估，而不是事后，这就是我需要箭头和其他键的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:24:07.507

除非您提供更多详细信息，否则我认为正则表达式不会帮助您。

我不知道你需要使用的关键事件的细节，但我给自己写了一个像字典一样的对象，在我的一个项目中运行良好，但当然它不是失败证明，而且很难做到 100%，因为那里有许多键盘布局和语言，以及 javascript 和浏览器实现中不规范的事件处理。我建议先阅读这篇文章，它对我有很大帮助[http://unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

我对 en-US 英语键盘的解决方法。

```
var Keys = { "BACKSPACE":8, "TAB":9,"ENTER":13,"SHIFT":16,"CTRL":17,"ALT":18, "PAUSEBREAK":19, "CAPSLOCK":20,"ESC":27, "SPACE":32, "PAGEUP":33, "PAGEDOWN":34, "END":35, "HOME":36, "LEFT":37, "UP":38, "RIGHT":39, "DOWN":40, "PRNTSCRN":44, "INSERT":45, "DELETE":46, "0":48, "1":49, "2":50, "3":51, "4":52, "5":53, "6":54, "7":55, "8":56, "9":57, "A":65, "B":66, "C":67, "D":68, "E":69, "F":70, "G":71, "H":72, "I":73, "J":74, "K":75, "L":76, "M":77, "N":78, "O":79, "P":80, "Q":81, "R":82, "S":83, "T":84, "U":85, "V":86, "W":87, "X":88, "Y":89, "Z":90, "WINKEY":91, "WINKEYR":92, "APPLICATION":93, "NUM0":96, "NUM1":97, "NUM2":98, "NUM3":99, "NUM4":100, "NUM5":101, "NUM6":102, "NUM7":103, "NUM8":104, "NUM9":105, "MULTIPLY":106, "ADD":107, "SUBTRACT":109, "DECIMALPOINT":110, "DIVIDE":111, "F1":112, "F2":113, "F3":114, "f4":115, "F5":116, "F6":117, "F7":118, "F8":119, "F9":120, "F10":121, "F11":122, "F12":123, "NUMLOCK":144, "SCROLLLOCK":145, "SEMICOLON":186, "EQUAL":187, "COMMA":188, "DASH":189, "PERIOD":190, "SLASH":191, "GRAVE":192, "OPENBRAKET":219, "BACKSLASH":220, "CLOSEBRAKET":221, "SINGLEQUOTE":222, "MMNEXT":176, "MMPREVIOUS":177, "MMSTOP":178, "MMPLAY":179, "MMREWIND":227, "MMFORWARD":228, "MYCOMPUTER":182, "MYCALCULATOR":183, "HELP":225, "Invalid!":0
} 
```

你可以使用喜欢

```
if(event.keyCode == Keys['RIGHT']) //go right
if(event.keyCode == Keys['LEFT']) //go left
if(event.keyCode == Keys['ENTER']) //do something
if(event.keyCode == Keys['ESC'] || event.keyCode == Keys['BACKSPACE']) //exit 
```

您提到了箭头和其他键，如果您使用键来绑定游戏之类的东西，请避免使用诸如 CTRL ALT WINKEY ALTGR APPLICATION OPTION COMMAND 之类的修饰符，它们一团糟，有很多不一致之处，例如 Command 键伪装成应用程序键, 正确的 alt 作为另一个控件等，还有一些键盘没有第二个 alt 或 ctrl。所以这是一个地狱般的例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:04:15.793

你可以使用类似的东西：

**JavaScript**

```
document.getElementById('foo').onkeydown = function (e) {
  if (e.keyCode < 65 || e.keyCode > 90) {
    e.preventDefault();
    return false;
  }
}; 
```

**HTML**

```
<textarea id="foo"></textarea> 
```

这将限制您仅输入小写字母。它应该稍微修改一下也可以与鞋面一起使用。

[JSfiddle](http://jsfiddle.net/mgechev/2EJzM/)。

# javascript - Qt 5.0：向 Java 脚本公开 C++ 方法

> ID：14396340
> 
> 赞同：6
> 
> 时间：2013-01-18T09:54:40.993
> 
> 标签：javascript, qt, qt5

我尝试将对象作为全局属性公开给具有以下方法的 Java Script：

```
Q_INVOKABLE MyObject* createMyObject(); 
```

MyObject 派生自 QObject。

当我在 Java Script 中调用此方法时，它返回一个类型的对象：

```
QVariant(MyObject*) 
```

我想知道是否可以自动将其转换为 QJSValue 以便我可以在脚本中进一步使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:15:14.967

似乎 Java Script 使用 QVariant 作为任何“未知”类型的不透明包装器。该值可以很容易地传递，但不能使用它的任何属性，也不能调用它的任何方法。要在脚本中使用，它应该转换为 QJSValue。我发现的唯一方法是像这样声明辅助函数：

```
Q_INVOKABLE QJSValue convert(QVariant var)
{
    return _engine.newQObject(var.value<QObject*>());
} 
```

那么可以将 QVariant 转换为 QJSValue：

```
var obj = convert(createMyObject()); 
```

并且 obj 将是类型

```
MyObject 
```

所以现在它可以在脚本中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T13:41:41.893

所有需要做的就是在脚本中引用**MyObject之前在某处调用下面的方法。**

```
qmlRegisterType<MyObject>("", 1, 0, "MyObject"); 
```

然后**createMyObject**方法将返回正确的类型，无需任何转换：

```
var obj = createMyObject();

MyObject 
```

实际上如果我们改变下面方法的类型

```
Q_INVOKABLE MyObject* createMyObject(); 
```

到

```
Q_INVOKABLE QObject* createMyObject(); 
```

即使没有它也会开始工作

```
qmlRegisterType 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T08:36:53.283

你可以使用`QJSEngine::newQObject()`方法。

> 使用*newQObject()*来包装*QObject*（或子类）指针。*newQObject()*返回一个代理脚本对象；*QObject*的属性、子项以及信号和槽可用作代理对象的属性。不需要绑定代码，因为它是使用 Qt 元对象系统动态完成的。

请在[QJSEngine 类：QObject 集成](http://qt-project.org/doc/qt-5.0/qtqml/qjsengine.html#qobject-integration)中阅读更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T16:58:24.500

我处于类似情况，尝试使用 QJSEngine 进行脚本编写（目前卡在尝试将 QList 暴露给 QJSEngine ...）

我认为将现有 C++ 对象公开给脚本的最简单方法是：

```
//create c++ file object
MyObject* anObject = new MyObject();

//make c++ object available to script
QJSValue scriptObject = myEngine.newQObject(anObject);
myEngine.globalObject().setProperty("obj", scriptObject); 
```

您现在应该能够从脚本访问“obj”。

**顺便问一下，如何找出脚本中的类型 (QVariant(MyObject*))？**

# java - 在 Debian 服务器上安装 Hibernate3 时遇到问题

> ID：14396341
> 
> 赞同：2
> 
> 时间：2013-01-18T09:54:44.813
> 
> 标签：java, linux, hibernate, debian

我正在尝试安装`Hibernate3`到我的 linux 服务器上，但我很难弄清楚该怎么做才能让它工作。我尝试了以下方法：

*   将所需的罐子复制到一个文件夹中并通过“ `java -classpath etc.`”调用该文件夹并得到

> java -classpath /home/mcmaster/javalibs/* -jar craftbukkit.jar 错误：无法找到或加载主类 .home.mcmaster.javalibs.dom4j-1.6.1.jar

*   在仅调用核心休眠时加载 java 命令，导致未找到正常类错误
*   一时兴起安装到系统 java lib 位置而没有影响
*   `apt-get to install libhibernate3-java`原封不动地使用
*   我已经尝试过`export $CLASSPATH=~/javalibs`拥有所有必需的罐子

作为一名中级 Java 用户，我确实在努力学习一些更高级的东西（对我来说）。

这是我在尝试调用会话类时遇到的错误：

> 引起：java.lang.ClassNotFoundException：org.hibernate.Session

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:57:53.093

看起来你忘记了引号。尝试 `java -classpath '.:/home/mcmaster/javalibs/*' -jar craftbukkit.jar`（见[维基百科](https://en.wikipedia.org/wiki/Classpath_%28Java%29#Adding_all_JAR_files_in_a_directory)）。

编辑：我猜craftbukkit.jar 是可执行的。

# find - 通过inode编号进入目录的两种方法？

> ID：14396345
> 
> 赞同：0
> 
> 时间：2013-01-18T09:54:55.987
> 
> 标签：find, inode

如果我想通过它的 inode 号进入一个目录，为什么

```
cd $(find . -inum $inode_num) 
```

有效，但以下命令无效：

```
find . -inum $inode_num -exec cd {} \; 
```

这两者有什么区别，为什么第二个错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:57:10.753

`cd`不是一个可以使用的程序`exec`，它是一个内置的shell命令。*必须如此，因为在父进程中更改当前目录*太难了。

# amazon-dynamodb - DynamoDB 中的分页

> ID：14396346
> 
> 赞同：6
> 
> 时间：2013-01-18T09:54:58.730
> 
> 标签：amazon-dynamodb

我需要在 maxcount 为 10 的 jsp 上显示搜索结果，并且它应该有一个分页来作为分页功能来回遍历。

Dynamodb 有一个 lastevaluatedkey **，**但返回上一页并没有帮助，尽管我可以移动到 lastevaluatedKey 的下一个结果**集**。

有人可以帮忙吗？

我使用 Java SPRING 和 DynamoDB 作为堆栈。

谢谢萨蒂亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-04-09T18:39:09.173

要启用前进/后退，您只需保持

`the first key`，这是`hash key + sort key`先前返回页面的第一条记录（如果您要查询第一页，则为null）。

和

`the last key`检索到的页面，它是`hash key + sort key`之前返回页面的最后一条记录

然后向前或向后导航，您需要在查询请求中传入以下参数：

`Forward: last key as the ExclusiveStartKey, order = ascend`

`Backward: first key as the ExclusiveStartKey, order = descend`

我在 2016 年的一个项目中实现了这一点。DynamoDB 现在可能会提供一些类似的方便 API，但我不确定，因为我很长时间没有检查过 DynamoDB。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-12T18:01:43.417

基于雷的回答，这就是我所做的。 `sortId`是排序键。

```
// query a page of items and create prev and next cursor
// cursor idea from this article: https://hackernoon.com/guys-were-doing-pagination-wrong-f6c18a91b232
async function queryCursor( cursor) {
  const cursor1 = JSON.parse(JSON.stringify(cursor));
  const pageResult = await queryPage( cursor1.params, cursor1.pageItems);

  const result = {
    Items: pageResult.Items,
    Count: pageResult.Count
  };

  if ( cursor.params.ScanIndexForward) {
    if (pageResult.LastEvaluatedKey) {
      result.nextCursor = JSON.parse(JSON.stringify(cursor));
      result.nextCursor.params.ExclusiveStartKey = pageResult.LastEvaluatedKey;
    }
    if ( cursor.params.ExclusiveStartKey) {
      result.prevCursor = JSON.parse(JSON.stringify(cursor));
      result.prevCursor.params.ScanIndexForward = !cursor.params.ScanIndexForward;
      result.prevCursor.params.ExclusiveStartKey.sortId = pageResult.Items[0].sortId;
    }
  } else {
    if (pageResult.LastEvaluatedKey) {
      result.prevCursor = JSON.parse(JSON.stringify(cursor));
      result.prevCursor.params.ExclusiveStartKey = pageResult.LastEvaluatedKey;
    }
    if ( cursor.params.ExclusiveStartKey) {
      result.nextCursor = JSON.parse(JSON.stringify(cursor));
      result.nextCursor.params.ScanIndexForward = !cursor.params.ScanIndexForward;
      result.nextCursor.params.ExclusiveStartKey.sortId = pageResult.Items[0].sortId;
    }
  }

  return result;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T21:38:46.737

您必须在会话 var、查询字符串或稍后可以访问的类似内容中记录前一个键，然后在您想要后退时使用该键执行查询。Dynamo 不会为您跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T23:17:20.587

要使用 dynamodb 进行简单的无状态正向和反向导航，请查看我对类似问题的回答：[https](https://stackoverflow.com/a/64179187/93451) ://stackoverflow.com/a/64179187/93451 。

总之，它在每个响应中返回反向导航历史记录，允许用户明确地向前或向后移动直到任一端。

```
GET /accounts                -> first page
GET /accounts?next=A3r0ijKJ8 -> next page
GET /accounts?prev=R4tY69kUI -> previous page 
```

# highcharts - Highcharts 使用 json 对象为饼图填充数据

> ID：14396348
> 
> 赞同：0
> 
> 时间：2013-01-18T09:55:17.433
> 
> 标签：highcharts

嗨，我的 json 对象看起来像这样

```
[
  {"name":"Tokyo","data":3.0},
  {"name":"NewYork","data":2.0},
  {"name":"Berlin","data":3.5},
  {"name":"London","data":1.5}
] 
```

如何使用 highcharts 填充系列点以制作饼图

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:31:03.933

试试下面的代码。这将解析所有值并创建一个名为`dataArrayFinal`.

```
var d = [{"name":"Tokyo","data":3.0},{"name":"NewYork","data":2.0}, {"name":"Berlin","data":3.5},{"name":"London","data":1.5}]
var name = Array();
var data = Array();
var dataArrayFinal = Array();
for(i=0;i<d.length;i++) { 
   name[i] = d[i].name; 
   data[i] = d[i].data;  
}

for(j=0;j<name.length;j++) { 
   var temp = new Array(name[j],data[j]); 
   dataArrayFinal[j] = temp;     
} 
```

您的系列内容应如下所示。即，您应该`dataArrayFinal`像下面这样传递数组。

```
series: [{
      type: 'pie',
      name: 'Browser share',
      data: dataArrayFinal
}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:08:03.847

实际上，您的数据定义和 Highcharts 要求的格式之间的唯一区别是，您的数据定义有一个名为“data”的属性，Highcharts 需要“y”。因此，您只需要遍历数据并设置该属性。[在http://jsfiddle.net/highcharts/uTyZk/](http://jsfiddle.net/highcharts/uTyZk/)现场观看。

```
// Original data
var data = [{
    "name": "Tokyo",
    "data": 3.0
}, {
    "name": "NewYork",
    "data": 2.0
}, {
    "name": "Berlin",
    "data": 3.5
}, {
    "name": "London",
    "data": 1.5
}];

// Highcharts requires the y option to be set
$.each(data, function (i, point) {
    point.y = point.data;
});

var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        type: 'pie'
    },

    series: [{
        data: data
    }]

}); 
```

# php - Smarty 模板 - 为动态复选框名称选择复选框值时遇到问题

> ID：14396349
> 
> 赞同：1
> 
> 时间：2013-01-18T09:55:24.470
> 
> 标签：php, smarty

我有几个字段，例如个人资料，每个字段都有几个选项。

例如

```
Age (10-15, 15-20, 20-25) 
Category (X, Y, Z) 
```

和其他几个领域。

我的搜索页面包含所有这些字段以及它们的选项值作为复选框。所以我目前正在使用下面的 for-each 循环打印这些值

```
{foreach from=$field.options item=options}
<input name="{$field.field_search_name}[]" type="checkbox" value="{$options.url}" />
{$options.caption}
{/foreach} 
```

现在的问题是在提交之前选择所有字段，我需要显示为从 POST 数组中选择的。

我知道如果我们有像“category []”这样的静态复选框名称，我可以像下面那样做

```
{if in_array($options.url, $smarty.post.category)} checked {/if} 
```

但在我的情况下，复选框名称也是动态的，它仅在 smarty 模板中定义，所以我不知道如何解决这个问题。必须进行以下类似的工作，如果可以在 smarty 中执行此操作，请告诉我。

```
{if in_array($options.url, $smarty.post.$field.field_search_name)} checked {/if} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T05:12:07.857

如果您想根据请求中设置的 POST 字段检查复选框，您可以通过以下方式访问它们：

```
{if array_key_exists({$smarty.request, $field.field_search_name)}
    checked
{/if} 
```

但是，这取决于输入名称的唯一性。如果您在`[]`提交表单时使用字段名称使其成为数组，则应检查该值是否在数组中。

这需要一点技巧来访问数组：

```
{assign var=tempFieldName value=`$field.field_search_name`}

{if in_array({$smarty.request.$tempFieldName, $options.url)}
    checked
{/if} 
```

不过老实说，我建议为每个输入生成一个唯一名称，而不是将多个输入放在同一个名称中，然后使用`fieldName[]`匿名将值推送到数组中来分隔它们。这样做会减少您看到的无法直接访问 POSTed 变量的问题。

# html - 强制 Firefox 在 CSS 指定的尺寸内呈现空图像

> ID：14396356
> 
> 赞同：7
> 
> 时间：2013-01-18T09:55:49.733
> 
> 标签：html, css, image, alt

除 FF 之外的所有主要浏览器都会在其尺寸内呈现具有无效 src 属性的图像，该尺寸由 CSS 或宽度/高度属性指定。只有 FF 会将 alt 属性渲染为文本节点，忽略尺寸，这在许多情况下会破坏布局。

有没有办法强制 FF 在指定尺寸内渲染图像？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T13:46:09.217

您应该更改 DOM 元素表示

```
img{
 display:block;
} 
```

或者

```
img{
 display:inline-block;
} 
```

或者

```
img{
 float:left;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:18:01.847

尝试将此规则添加到css：

```
 @-moz-document url-prefix(http), url-prefix(file) {
  img:-moz-broken{
    -moz-force-broken-image-icon:1;
    width:100px;
    height:100px;
  }
} 
```

[jsfiddle 示例](http://jsfiddle.net/v5wqf/)

来源：[https ://stackoverflow.com/a/6744791/1915183](https://stackoverflow.com/a/6744791/1915183)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:09:49.977

尝试在标签本身中写入`width:`和`height`属性，或者 在 CSS 中使用for和`img``!important``width``height`

# ios - NSMutableDictionary 更新在 UItableview 中不起作用

> ID：14396357
> 
> 赞同：0
> 
> 时间：2013-01-18T09:55:54.663
> 
> 标签：ios, nsmutabledictionary

我使用 ***NSMutableDictionary *articleDictionary***作为 tableview 的数据源。我在 tableview 页面中有不同的选项卡，每个选项卡我使用不同的 xml 文件 [https://domain.com/api/categories/3/user/xml]。我在**(void)viewDidUnload** 区域收到了不同的值集，但没有反映在表格视图中。Tableview 仍然显示旧值。请帮助我。谢谢

```
 self.articleDictionary = [NSDictionary dictionaryWithContentsOfURL: [NSURL URLWithString:urlString]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:19:23.233

完成解析后尝试触发重新加载表视图。那就是从更新 NSMutableDictionary 的相同方法重新加载表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T09:59:03.607

打电话`[self.tableView reloadData];`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T09:59:18.980

你必须告诉`tableview`更新。`tableview`无法猜测您的值已更新；）

类似的东西应该有帮助

```
// Update your files normally...
// ...
// Trigger the reload
[self.tableView reloadData]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:40:24.437

您可以将大量调试内容放入表视图控制器类中。这里有一些提示：

*   当您调用 reloaddata 时，您是否观察到 tableView:cellForRowAtIndexPath 被调用了多少次？你在那里得到正确的索引值吗？

*   您是否更新了 tableView:numberOfRowsInSection: 以反映数据源的变化？即最新的 NSMutableDictionary 计数？

*   在你的tableView:cellForRowAtIndexPath 中，放上关于NSMutableDictionary 的NSLog 看看是否反映了最新的状态？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T16:35:39.920

我解决了这个问题。我将 UiviewController 超类更改为**UITableViewController**。感谢您的帮助。

# python - 如何使用 python 有效地加载这种 ASCII 文件？

> ID：14396362
> 
> 赞同：2
> 
> 时间：2013-01-18T09:56:03.430
> 
> 标签：python, numpy, io

我有大的 fortran 生成的 ASCII 文件，格式如下：

```
x y z  num_line index
1 float
2 float
...
num_line float
x2 y2 z2 num_line2 index2
1 float
2 float
...
num_line2 float
... 
```

块的数量可以达到数千，每个块中的行数可以达到数百。

让我们举一个我得到的例子：

```
0.0 0.0 0.0  4 0
1 0.5
2 0.9
3 0.4
4 0.1
0.0 0.0 1.0  4 1
1 0.2
2 0.2
3 0.4
4 0.9
0.0 1.0 2.0  5 2
1 0.7
2 0.6
3 0.9
4 0.2
5 0.7 
```

而我想要的（作为一个numpy矩阵）：

```
0.5 0.2 0.7
0.9 0.2 0.6
0.4 0.4 0.9
0.1 0.9 0.2
nan nan 0.7 
```

当然，我可以使用：

```
my_mat = []
with open("myfile", "r") as f_in:
    niter = int(f_in.readline().split()[3])
    while niter:
        curr_vect = zeros(niter)
        for i in xrange(niter):
            curr_vect[i] = float(f_in.readline().split()[1])
        my_mat.append(curr_vect)
        line = f_in.readline()
        if line is not None:
            niter = int(line.split()[3])
        else:
            niter = False
my_mat = array(my_mat) 
```

问题是这不是很有效，而且对于它的本质来说太复杂了。我已经知道 numpy `loadtxt`，`genfromtxt`但它们似乎不适用于那里。

我正在寻找更快、更具可读性的东西。任何的想法？

**编辑：**

请原谅我，我的问题不完整，你们中的一些人因为我而浪费了他的时间。这是这样一个块的真实示例：

```
3.571428571429E-02 3.571428571429E-02-3.571428571429E-02         1   35  
       1 -0.493775207966779     
       2  0.370269037864060     
       3  0.382332033744703     
       4  0.382332033744703     
       5  0.575515346181205     
       6  0.575515346181216     
       7  0.575562530624028     
       8  0.639458035564442     
       9  0.948445367602052     
      10  0.948445367602052     
      11  0.975303238888803     
      12   1.20634795229899     
      13   1.21972845646758     
      14   1.21972845646759     
      15   1.52659950368213     
      16   2.07381346028515     
      17   2.07629743909555     
      18   2.07629743909555     
      19   2.15941179949552     
      20   2.15941179949552     
      21   2.30814240005132     
      22   2.30814240005133     
      23   2.31322868361483     
      24   2.53625115348660     
      25   2.55301153157825     
      26   2.55301153157826     
      27   2.97152031842301     
      28   2.98866790318661     
      29   2.98866790318662     
      30   3.24757159459268     
      31   3.27186643004142     
      32   3.27186643004143     
      33   3.37632477135298     
      34   3.37632477135299     
      35   3.55393884607834 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:12:04.523

您可以使用 numpy.genfromtxt：

1.  读取**一**列，由**换行符分隔** `\n`
2.  提供自定义转换器功能

例子：

```
import numpy as np
from StringIO import StringIO

# your data from above as string
raw = '''0.0 0.0 0.0  4 0
1 0.5
...
5 0.7
''' 
```

这是转换器：

```
def custom_converter(line):
    token = line.split()
    if len(token) == 2:
        return float(token[1])
    else:
        return np.NaN 
```

加载数据：

```
data = np.genfromtxt(StringIO(raw),
                     delimiter='\n',
                     converters={0: custom_converter})

print data 
```

打印：

```
[ nan  0.5  0.9  0.4  0.1  nan  0.2  0.2  0.4  0.9  nan  0.7  0.6  0.9  0.2
  0.7] 
```

现在你建立了最终的数据结构：

```
delims, = np.where(np.isnan(data))
max_block = np.max(np.diff(delims))
nblocks = delims.size
final_data = np.empty([max_block, nblocks]) + np.NaN

delims = delims.tolist()
delims.append(data.size)
low = delims[0] + 1
for i, up in enumerate(delims[1:]):
    final_data[0: up-low , i] = data[low:up]
    low = up + 1

print final_data 
```

哪个打印

```
[[ 0.5  0.2  0.7]
 [ 0.9  0.2  0.6]
 [ 0.4  0.4  0.9]
 [ 0.1  0.9  0.2]
 [ nan  nan  0.7]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T11:36:47.273

```
import numpy as np
from itertools import groupby,izip_longest

def f1(fname):
    with open(fname) as f:
        return np.matrix(list(izip_longest(
               *(map(lambda x: float(x[1]),v)
               for k,v in groupby(map(str.split,f),
               key=lambda x: len(x) == 2) if k),
               fillvalue=np.nan)))
d1('testfile') 
```

*出去：*

```
matrix([[ 0.5,  0.2,  0.7],
        [ 0.9,  0.2,  0.6],
        [ 0.4,  0.4,  0.9],
        [ 0.1,  0.9,  0.2],
        [ nan,  nan,  0.7]]) 
```

*编辑：*

至于性能，我针对`np.genfromtxt`解决方案*@TheodrosZelleke*对其进行了测试，它似乎快了大约五倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:32:56.740

如果您确保每个块具有相同数量的行（即使用零填充），它会快得多。这样你就可以重塑一个用`loadtxt`. 但是考虑到这个限制，这里有一个可能会更快的例子：

```
import numpy as np

data = np.loadtxt("myfile", usecols=(0, 1), unpack=True)
nx = np.sum(data[0] == 0)
ny = np.max(data[0])
my_mat = np.empty((nx, ny), dtype='d')
my_mat[:] = np.nan   # if you really want to populate it with NaNs for missing
tr_ind = data[0, list(np.nonzero(np.diff(data[0]) < 0)[0]) + [-1]].astype('i')
buf = np.squeeze(data[1, np.nonzero(data[0])])

idx = 0
for i in range(nx):
    my_mat[i, :tr_ind[i]] = buf[idx : idx + tr_ind[i]]
    idx += tr_ind[i] 
```

您可以检查结果：

```
>>> print my_mat.T
array([[ 0.5,  0.2,  0.7],
       [ 0.9,  0.2,  0.6],
       [ 0.4,  0.4,  0.9],
       [ 0.1,  0.9,  0.2],
       [ nan,  nan,  0.7]]) 
```

**更新：**正如 TheodrosZelleke 所指出的，当`x2`（第一列）非零时，上述解决方案失败。我第一次没有注意到这一点。这是解决此问题的更新：

```
# this will give a conversion warning because column number varies
blk_sizes = np.genfromtxt("myfile", invalid_raise=False, usecols=(-2,))

nx = blk_sizes.size
ny = np.max(blk_sizes)

data = np.loadtxt("myfile", usecols=(1,))
my_mat = np.empty((nx, ny), dtype='d')
my_mat[:] = np.nan

idx = 1
for i in range(nx):
    my_mat[i, :blk_sizes[i]] = data[idx : idx + blk_sizes[i]]
    idx += blk_sizes[i] + 1 
```

（然后采取`my_mat.T`。）

# html - Outlook 2007 或 2010 不支持背景属性

> ID：14396369
> 
> 赞同：0
> 
> 时间：2013-01-18T09:56:28.687
> 
> 标签：html, outlook, background-color, newsletter, fieldset

我正在创建一个通过电子邮件发送的时事通讯，在这个时事通讯中，我尝试使用`<fieldset></fieldset>` or`<legend></legend>`标签，当我在浏览器上赋予背景颜色时，但是当我在 Outlook 2007 和 2010 上看到它时，它在下面不起作用是我的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <fieldset style="border-left: 1px solid #99CCFF; border-right: 1px solid #99CCFF;
        border-bottom: 1px solid #99CCFF; border-top: 1px solid #99CCFF; padding-left: 10px;
        padding-right: 10px; background-color:#CD853F; height:300px; width:300px;">
        <legend style="font-weight: bold; text-transform: uppercase;">Warranty Items</legend>
        <span style="padding-bottom: 300px;">** Content here ***</span>
    </fieldset>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:36:31.593

没用过`<fieldset>`or`<legend>`标签，但是你需要使用`<body>`标签或者MS VML来让Outlook显示背景图片。这可能对您有用：[emailbg.net](http://emailbg.net/)

# ruby-on-rails - Rails 模型：对于众多角色、带有附加子角色的多个用户模型，正确的设计是什么？

> ID：14396371
> 
> 赞同：0
> 
> 时间：2013-01-18T09:56:33.597
> 
> 标签：ruby-on-rails, database-design, model, role

我正在编写我的第一个 Ruby On Rails 应用程序——一个用于封闭式住宅社区的网站。

社区区域由空地组成，在建成地块中有一个或多个房屋。地块只有一个所有者，但地块中的多个房屋可以各自拥有不同的所有者。有不同角色的选举产生的办公室负责人（在居民协会中）和物业管理人员等。最终会有用户组（仅限业主或仅限租户或混合等）。

Owner 和 Tenant 往往是完全不同的，因此我将它们保留为单独的类。同样，他们的家庭成员也往往不同 - OwnerFamilyMember 和 TenantFamilyMember 类。

我的第一个设计是有一个单一的用户和一个角色和一个分配模型——角色变得太多了。因此，我如上所述拆分了用户模型（我不想使用 STI 或多态关联，我想先把它弄好）。

模型类：

```
# All classes below inherit from ActiveRecord::Base, removed other attributes for compactness

class Owner
    has_many :plots    
    has_many :houses   
    has_many :owner_family_members    
end

class Tenant
    belongs_to :house    # declare house_id in table
    has_many :tenant_family_members
end

class Staff ...

class Plot
    belongs_to :owner    # declare owner_id in table
end

class House
    belongs_to :owner    # declare owner_id in table
end

class OwnerFamilyMember
    belongs_to :owner    #  declare owner_id in table
end
class TenantFamilyMember
    belongs_to :tenant    #  declare tenant_id in table
end 
```

*   租户或业主居住在房屋中。
*   业主或租户的家庭成员将参与社区，但他们依赖于主要业主或租户的某些特权行动

我知道，通过这种设计，不同的用户模型具有隐含的角色，并且可以根据需要具有额外的子角色 - 业主可以是居民协会的财务主管，租户可以领导一个节水团体等。我预计角色要进一步发展，因此我认为保留多个用户模型会更好。

我在正确的轨道上吗？我在这个食谱中混淆了错误的东西吗？热衷于听取任何可以帮助我更好地理解这一点的反馈、概念或具体实施。

我了解数据库概念、OO 编程，但我是生产级数据库设计或 RoR 应用程序的新手。感谢您阅读这篇长文。- 贾亚万特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:44:25.610

欢迎来到 Rails 社区！你会喜欢这里的。

首先，您无需回避 STI 或多态关联，它们在 Rails 世界中是非常有价值的工具。您的用户/角色/分配（连接表）策略似乎可以合理地处理良好的规范化身份验证和基于角色的授权方法。我会将用户模型与您的应用程序的其他逻辑完全分开，并使用 Ryan Bates 的[CanCan](https://github.com/ryanb/cancan)库进行授权，并通过 Plataforma 的[Devise](https://github.com/plataformatec/devise)库进行身份验证。

现在您有了一个很好的身份验证/授权设置，它不依赖于大量不同的 User/Admin/GuyWhoAuthenticates 模型，并且应用程序更加简单。前任：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new
    ...
    if user.has_role? 'plot_owner'
      can :manage, Plot, user_id: user.id
    end
    ...
  end
end

class User < ActiveRecord::Base

  has_many :assignments
  has_many :roles, through: :assignments

  ...

  def has_role? role
    roles.where(label: role)
  end    

  ...

end 
```

关于其他模型，一个很好的经验法则是：它们共享多少逻辑？如果它们具有相同的属性，共享大量的应用程序逻辑并且在概念上相似（例如，作为家庭成员），那么我会选择 STI / 多态关联。如果没有，您可以将通用逻辑提取到单独的模块中，并将其包含在两个模型中。

由于您是 Rails 世界的新手，我还强烈建议您查看[Railscasts](http://www.railscasts.com)和[Peepcode](http://www.peepcode.com)，这两个很棒的截屏网站可以让您立即像老板一样制作 Rails 应用程序：D

干杯!

# ios6 - 如果指定了affectedStores，NSFetchedResultsController 在 iOS 6 中崩溃

> ID：14396375
> 
> 赞同：3
> 
> 时间：2013-01-18T09:56:45.140
> 
> 标签：ios6, nsfetchedresultscontroller

我看到的问题与此处描述的完全一样：http: [//fingertwister.tumblr.com/post/323​​41639626 /coredata-problem-with-multiple-stores-using](http://fingertwister.tumblr.com/post/32341639626/coredata-problem-with-multiple-stores-using)

即，两个商店，一个是静态的，另一个是用户生成的。设置一个 NSFetchedResultsController 以仅从其中一个商店中获取。当控制器被释放时，应用程序在 NSArray 实例上崩溃并出现 EXC_BAD_ACCESS。该代码在 iOS 4 和 5 中运行良好；崩溃仅发生在 iOS 6 中。

Zombie 分析表明，被释放的 NSArray 是 NSFetchedResultsController 的 NSFetchRequest 的“affectedStores”属性。就像上面的链接一样，如果我删除 [fetchRequest setAffectedStores:...] 命令，问题就会消失。而且，就像在链接的示例中一样，就该数组的内存管理而言，我看不出我自己的代码有任何问题。

文档似乎没有说 iOS 6 在这方面有什么变化。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:08:26.840

之所以出现这个问题，是因为 CoreData 中的某处内存管理出现问题，导致受影响的Stores-array 被提前释放。

您可以通过增加引用计数器作为 hack 来解决此问题： [https ://gist.github.com/maruno/5451607](https://gist.github.com/maruno/5451607)

# c# - 如何在不杀死 C# 中的 OOPS 的情况下重构以下代码

> ID：14396377
> 
> 赞同：2
> 
> 时间：2013-01-18T09:56:49.930
> 
> 标签：c#

我有 3 个接口和 2 个方法，每个方法都做同样的工作。

```
Interface A
{
   Void M1()
   Void M2()
}

Interface B
{
   Void M1()
   Void M2()
}

Interface C
{
   Void M1()
   Void M2()
} 
```

现在，有 3 个类实现了这些接口中的每一个。

```
Public Class A1:A
{
  Public void M1()
  {

  }
  Public void M2()
  {

  }
}

Public Class B1:B
{
  Public void M1()
  {

  }
  Public void M2()
  {

  }
}

Public Class C1:C
{
  Public void M1()
  {

  }
  Public void M2()
  {

  }
} 
```

M1 和 M2 的功能在 3 个类中完全相同。接口是库的一部分，我不能更改接口，也不能声明新接口。

我想重构此代码，以便可以删除此重复项。我想创建一个包含此功能的公共类，然后从这些类中的每一个调用公共类。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:00:42.473

听起来您应该声明*自己的*接口，然后创建一个适配器 - 或者可能是多个适配器。例如：

```
public interface IUnified
{
    void M1();
    void M2();
}

public class UnifiedAdapter : IUnified
{
    private Action m1;
    private Action m2;

    public UnifiedAdapter(A a)
    {
        m1 = () => a.M1();
        m2 = () => a.M2();
    }

    public UnifiedAdapter(B b)
    {
        m1 = () => b.M1();
        m2 = () => b.M2();
    }

    public UnifiedAdapter(C c)
    {
        m1 = () => c.M1();
        m2 = () => c.M2();
    }

    public M1()
    {
        m1();
    }

    public M2()
    {
        m2();
    }
} 
```

（这使用委托来避免创建多个适配器类。最好的方法取决于您的具体情况。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:33:52.757

如果您只想避免重复这些方法的实现，那么您的初始方法是正确的。

```
public class HelperClass
{
   public static void M1()
   {
      // implementation code
   }
   public static void M2()
   {
      // implementation code
   }
}

public class A1:A
{
   public void M1()
   {
       HelperClass.M1();
   }
   public void M2()
   {
       HelperClass.M2();
   }
}

public class B1:B
{
   public void M1()
   {
       HelperClass.M1();
   }
   public void M2()
   {
       HelperClass.M2();
   }
}

public class C1:C
{
   public void M1()
   {
       HelperClass.M1();
   }
   public void M2()
   {
       HelperClass.M2();
   }
} 
```

即使接口 A、B 和 C 具有相同的方法，它们也可能具有不同的语义，并且将它们作为单独的接口可能是有意义的。也就是说，让一个类实现 A，可能意味着与实现 B 不同的东西，即使它们的方法具有相同的签名。

添加额外的接口或公共基类是多余的，并增加了不必要的耦合。正如我之前所说，如果您只需要避免重复方法的实现，辅助类是最简单和最干净的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:02:30.757

```
public class BaseClass : A, B, C
{
   public void M1()
   {    
   }

   public void M2()
   {    
   }
} 
```

然后从 BaseClass 继承：

```
public class A1 : BaseClass
{
}

public class B1 : BaseClass
{
}

public class C1 : BaseClass
{
} 
```

`A1`仍然会实现接口`A`。`B1`将实现接口`B`。与 相同`C1`。因此，您现有的所有代码都将继续工作：

```
A a = new A1();
a.M1(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:03:38.103

```
public abstract class XX : X
{
    public void M1()

    {

    }

    public void M2()
    {

    }
}

public interface X : A, B, C
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T10:04:10.460

鉴于奇怪的限制（如果可以的话，我真的建议尝试更改接口）我认为这是你能做的最好的：

```
public class Base : A, B, C {
  public void M1(){}
  public void M2(){}
} 
```

现在从 A1、B1 和 C1 中的 Base 继承。

但是，如果 a`A`不能或不应该也是 a，`B`那么这种模式将不起作用。

因此，您确实必须选择下一个最好的东西 - 具有通用功能的通用基础：

```
public class Base {
  protected void M1Impl() { /* put your common implementation in here */ }
  protected void M2Impl() { /* put your common implementation in here */ }
} 
```

正如评论所说 - 将重复的`M1`和`M2`代码放在`M1Impl`and`M2Impl`方法中。

现在您可以将此基础用于`A`,`B`和`C`实现：

```
//common base for any implementation of A
//repeat for B and C
public class A1Base : Base, A
{ 
  public void M1() { M1Impl(); }
  public void M2() { M2Impl(); }      
}

public class A1 : A1Base { } 
```

我在这里工作的基础是，您可能有许多`A`or`B`或其他的实现，因此您希望每个实现都有一个共同的起点。如果不是这种情况，那么您可以取消`A1Base`并简单地调用它`A1`。

# api - 如何使用 API 获取 LinkedIn 个人资料统计信息（视图、搜索中的外观）？

> ID：14396378
> 
> 赞同：0
> 
> 时间：2013-01-18T09:56:51.713
> 
> 标签：api, linkedin

我想显示一个与 LinkedIn 的 Profile Stats 页面中显示的图表类似的图表，您可以在其中查看带有数字个人资料视图和搜索中的数字外观的图表。我可以使用linkedin api实现这一点吗？

像这样

[http://farm9.staticflickr.com/8081/8391002635_586c722eb6_o.png](http://farm9.staticflickr.com/8081/8391002635_586c722eb6_o.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:56:34.363

目前，个人资料统计信息不会通过 LinkedIn API 公开

# php - 为什么fadeIn在加载时闪烁？

> ID：14396379
> 
> 赞同：0
> 
> 时间：2013-01-18T09:56:56.227
> 
> 标签：php, jquery, menu, fadein, flicker

我已经根据 youtube 教程制作了一个网站。[这是我的测试站点](http://superfresh.se/laddasidan/)。如果 有帮助，[这里是教程（第 3 步的最后一步） 。](http://youtu.be/H0XnZsxxKFQ)还没有使用 CSS。

当我单击菜单中的链接时。一切都像想象的那样消失。但在淡入淡出动画结束时，上一页闪烁。

**我**
对 JavaScript 完全陌生。

*索引.php：*

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>SuperFresh</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body>
<a class="menu_top" href="pages/home.php">Home</a> /
<a class="menu_top" href="pages/portfolio.php">Portfolio</a> /
<a class="menu_top" href="pages/contact.php">Contact</a> /

<div id="content_area"></div>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="js/nav.js"></script>
</body>
</html> 
```

*导航.js：*

```
$(document).ready(function () {
    $('#content_area').load($('.menu_top:first').attr('href'));
});

$('.menu_top').click(function () {
    var href=$(this).attr('href');
    $('#content_area').hide('slow').load(href).fadeIn('slow');

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:59:51.167

代替：

```
var href=$(this).attr('href');    
$('#content_area').hide('slow').load(href).fadeIn('slow'); 
```

和：

```
$('#content_area').hide('slow', function(){
    $(this).load($(this).attr('href')).fadeIn('slow');
}); 
```

这会将其淡出并等待动画完成，然后再调用该函数并加载新内容。

查看[文档](http://api.jquery.com/hide/)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:21:42.047

您可以使用具有自己功能的处理程序...

例如：

```
$('#show').click(function() {
    $('#myDiv').show(0, onDivShow);
});

$('#hide').click(function() {
    $('#myDiv').hide(0, onDivHide);
});

function onDivShow() { alert('is shown'); }
function onDivHide() { alert('is hidden'); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:08:45.317

你可以试试这个：

```
$('.menu_top').click(function () {
    var href=$(this).attr('href');
    var page = $('<div/>').attr('id','page').load(href);
    $('#content_area').fadeOut('slow').html('').html(page).fadeIn('slow');

    return false;
}); 
```

# cordova - 使用 PhoneGap 的 FileTransfer().download() 时如何设置 HTTP 标头？

> ID：14396380
> 
> 赞同：3
> 
> 时间：2013-01-18T09:57:00.990
> 
> 标签：cordova

调用 FileTransfer 类的 download() 方法时是否可以设置 HTTP 标头？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:06:41.133

看起来[提到的错误](https://issues.apache.org/jira/browse/CB-861)现在已解决 - 这意味着可以使用最新版本的 PhoneGap 设置标题。

# java - 以不可见模式启动 java 应用程序

> ID：14396387
> 
> 赞同：3
> 
> 时间：2013-01-18T09:57:14.223
> 
> 标签：java, user-interface

根据命令行参数或虚拟机参数，我希望我的应用程序以**不可见模式**启动。它在两种情况下都做同样的事情，除了在不可见模式下它根本不显示任何东西。

我可以使用 使主程序窗口不可见`JFrame.setVisible(false)`。但是，然后我必须找到代码中的每个地方，例如打开警告消息弹出窗口等（有很多！）。

有没有更通用的方法来做到这一点？可能类似于无头模式（当然会抛出`HeadlessExceptions`这不是我想要的）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:08:25.107

您的应用程序架构是什么样的？如果它被干净地分开，则创建一个什么都不做的新视图层。

如果它被缠在一起，最好的选择是解开它，然后创建一个什么都不做的新视图层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:06:50.990

这样做。

```
public static void main(String[] args){
    boolean gui = true;
    for (String s : args){
        if (s.equals("--nogui")){
            // Do not create GUI
            gui = false;
            break;
        }
    }
    if (gui){
        // Create the gui
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:11:48.887

如果您的表示层与业务逻辑紧密耦合，您将必须检查所有表单和其他可见类。您应该将您的应用程序解耦，并且它会像调用一种方法一样简单。

在其他情况下...好吧，您将拥有一堆`if else if`.

# java - 如何在 android 集成中使用 MECL 在 Paypal 中设置商家帐户 ID？

> ID：14396389
> 
> 赞同：3
> 
> 时间：2013-01-18T09:57:18.090
> 
> 标签：java, android, paypal, paypal-sandbox

我想为贝宝集成制作一个示例代码。它已经完成，但我不明白我需要将商家帐户 ID 放在代码中的哪个位置。我有销售商 ID 和商家 ID，但我不知道我想把这个商家 ID 放在哪里。所以请任何朋友帮助我。

```
 package com.paypal.android.pizza;

    import java.util.Vector;

    import android.app.Activity;
    import android.app.ProgressDialog;
    import android.os.Bundle;
    import android.os.Handler;
    import android.os.Message;
    import android.view.KeyEvent;
    import android.view.View;
    import android.webkit.WebView;
    import android.webkit.WebViewClient;
    import android.widget.Toast;

    import com.paypal.android.MECL.PayPal;

    public class Pizza extends Activity {

        // The instance of our activity
        private static Pizza _instance;

        // The reference token that we get from initializing the MECL library
        public static String _deviceReferenceToken;

        // The PayPal server to be used - can also be ENV_NONE and ENV_LIVE
        private static final int server = PayPal.ENV_SANDBOX;
        // The ID of your application that you received from PayPal
        private static final String appID = "APP-80W284485P519543T";

        public static final String build = "11.01.04.8174";

        // The possible results from initializing MECL
        protected static final int INITIALIZE_SUCCESS = 0;
        protected static final int INITIALIZE_FAILURE = 1;

        // The pages of our application
        public static final int PAGE_HOME = 0;
        public static final int PAGE_CUSTOMIZE = 1;
        public static final int PAGE_FINALIZE = 2;
        public static final int PAGE_WEB = 3;

        // The currently shown page
        private BasePage currentPage;

        // The pizza sizes
        public static final int SIZE_SMALL = 0;
        public static final int SIZE_MEDIUM = 1;
        public static final int SIZE_LARGE = 2;

        // The pizza toppings
        public static final int TOPPING_EXTRA_CHEESE = 0;
        public static final int TOPPING_PEPPERONI = 1;
        public static final int TOPPING_MUSHROOMS = 2;
        public static final int TOPPING_ONIONS = 3;

        // The pizza acquiring methods
        public static final int METHOD_PICKUP = 0;
        public static final int METHOD_DELIVERY = 1;

        // Our current selections that are given defaults to start
        private int currentSize = SIZE_SMALL;
        private Vector<Integer> currentToppings = new Vector<Integer>();
        private int currentCount = 1;
        private int currentMethod = METHOD_PICKUP;

        // The WebView that we'll use to display MECL
        private WebView _webView;

        // The popup we'll use to show loading when initializing the library
        private ProgressDialog mProgDialog;

        // This handler will allow us to properly update the UI. You cannot touch
        // Views from a non-UI thread.
        Handler hRefresh = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                switch (msg.what) {
                case INITIALIZE_SUCCESS:
                    // We have initialized the application, close the dialog and
                    // launch the WebView
                    mProgDialog.cancel();
                    launchWeb();
                    break;
                case INITIALIZE_FAILURE:
                    // Initialization failure, close the dialog, update the page and
                    // show a toast
                    mProgDialog.cancel();
                    currentPage.update();
                    Toast.makeText(Pizza.getInstance(),
                            "Failed to initialize PayPal", Toast.LENGTH_SHORT)
                            .show();
                    break;
                }
            }
        };

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Set the instance
            _instance = this;

            // Set our defaults
            currentSize = SIZE_SMALL;
            currentToppings = new Vector<Integer>();
            currentCount = 1;
            currentMethod = METHOD_PICKUP;

            // Set our page
            currentPage = new HomePage(this);
            setContentView(currentPage);
        }

        /*
         * This method will be used every time we want to change the page
         */
        public void changePage(int page) {
            switch (page) {
            case PAGE_HOME:
                // Change to the home page
                currentPage = new HomePage(this);
                setContentView(currentPage);
                break;
            case PAGE_CUSTOMIZE:
                // Change to the customize page
                currentPage = new CustomizePage(this);
                setContentView(currentPage);
                break;
            case PAGE_FINALIZE:
                // Change to the finalize page
                currentPage = new FinalizePage(this);
                setContentView(currentPage);
                break;
            case PAGE_WEB:
                // Time to launch the library but first we need to initialize

                // Show the loading popup
                mProgDialog = ProgressDialog.show(this, "", "Loading");

                // Create a separate thread to do the initialization
                Thread libraryInitializationThread = new Thread() {
                    public void run() {
                        // Initialize the library
                        initLibrary();

                        // The library is initialized so let's launch it by
                        // notifying our handler
                        if (PayPal.getInstance().isLibraryInitialized()) {
                            hRefresh.sendEmptyMessage(INITIALIZE_SUCCESS);
                        } else {
                            hRefresh.sendEmptyMessage(INITIALIZE_FAILURE);
                        }
                    }
                };
                libraryInitializationThread.start();
                break;
            }
        }

        private void initLibrary() {
            // This is the main initialization call that takes in your Context, the
            // Application ID, the server you would like to connect to, and your
            // PayPalListener
            PayPal.fetchDeviceReferenceTokenWithAppID(this, appID, server,
                    new ResultDelegate());

            // -- These are required settings.
            PayPal.getInstance().setLanguage("en_US"); // Sets the language for the
                                                        // library.

        }

        private void launchWeb() {
            // Setup the url for our pizza app to connect to
            String buf = new String(
                    "http://paydemo.sms4me.com/ECDemo-server/cart.jsp?");
            buf += "delivery="
                    + (currentMethod == METHOD_PICKUP ? "false" : "true");
            buf += "&count=" + currentCount;
            String size = new String("Small");
            if (currentSize == SIZE_MEDIUM)
                size = "Medium";
            else if (currentSize == SIZE_LARGE)
                size = "Large";
            buf += "&size=" + size;
            if (currentToppings.size() > 0) {
                buf += "&toppings=";
                for (int i = 0; i < currentToppings.size(); i++) {
                    if (i != 0)
                        buf += ",";
                    String topping = "Extra%20Cheese";
                    if (currentToppings.elementAt(i) == TOPPING_PEPPERONI)
                        topping = "Pepperoni";
                    else if (currentToppings.elementAt(i) == TOPPING_MUSHROOMS)
                        topping = "Mushrooms";
                    else if (currentToppings.elementAt(i) == TOPPING_ONIONS)
                        topping = "Onions";
                    buf += topping;
                }
            }
            buf += "&drt=" + _deviceReferenceToken;

            android.util.Log.d("PIZZA_REQUEST", buf.replaceAll("&", "\n&"));

            // Construct the WebView
            _webView = new WebView(this);

            // Set our view to the WebView
            _webView.getSettings().setJavaScriptEnabled(true);
            setContentView(_webView);

            // Setup a WebViewClient so we know when the url changes
            _webView.setWebViewClient(new WebViewClient() {
                public boolean shouldOverrideUrlLoading(WebView view, String url) {
                    // Our servlet only uses one url for both success or failure
                    if (url.equals("http://paydemo.sms4me.com/ECDemo-server/cancel.html")) {
                        // The url was hit so it's time to go back to our home page
                        changePage(PAGE_HOME);
                        return true;
                    }
                    return false;
                }
            });

            // Load our url
            _webView.loadUrl(buf);

            // The android WebView sometimes does not have focus and this affects
            // different UI elements so we'll force the focus to work around this
            _webView.requestFocus(View.FOCUS_DOWN);
        }

        public static Pizza getInstance() {
            return _instance;
        }

        public int getCurrentSize() {
            return currentSize;
        }

        public void setCurrentSize(int currentSize) {
            this.currentSize = currentSize;
        }

        public Vector<Integer> getCurrentToppings() {
            return currentToppings;
        }

        public void setCurrentToppings(Vector<Integer> currentToppings) {
            this.currentToppings = currentToppings;
        }

        public int getCurrentCount() {
            return currentCount;
        }

        public void setCurrentCount(int currentCount) {
            this.currentCount = currentCount;
        }

        public int getCurrentMethod() {
            return currentMethod;
        }

        public void setCurrentMethod(int currentMethod) {
            this.currentMethod = currentMethod;
        }

        @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {
            // We need to manually handle the back key for WebView
            if (keyCode == KeyEvent.KEYCODE_BACK) {
                if (_webView != null && _webView.canGoBack()) {
                    // It's the WebView and we can navigate back with it so let's do
                    // so
                    _webView.goBack();
                    return true;
                } else if (_webView != null) {
                    // It's the WebView but we can't navigate back, so let's go to
                    // the pizza home page
                    changePage(PAGE_HOME);
                    _webView = null;
                    return true;
                } else {
                    // It's not the WebView so let's save the values and move back a
                    // page
                    if (currentPage instanceof CustomizePage) {
                        currentPage.saveValues();
                        changePage(PAGE_HOME);
                    } else if (currentPage instanceof FinalizePage) {
                        currentPage.saveValues();
                        changePage(PAGE_CUSTOMIZE);
                    }
                    return true;
                }
            }
            return super.onKeyDown(keyCode, event);
        }
    } 
```

# sql - 如何删除子查询？

> ID：14396396
> 
> 赞同：0
> 
> 时间：2013-01-18T09:58:11.507
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我必须获取所有订单的所有计数，这些订单已传递给查询，即使是 null 也是如此。我在 SQL Server 2008R2 中开发了这样的查询：

```
SELECT COUNT(UserId), b.OrderId
FROM @OrderList b
LEFT JOIN 
(
    SELECT DISTINCT pat_base.UserId, prov_list.OrderId
    FROM Users pat_base
    LEFT JOIN Assetments hlth_asmt ON hlth_asmt.UserId = pat_base.UserId
        AND hlth_asmt.Date BETWEEN @StartDate AND @EndDate
    LEFT JOIN Logs proc_log ON proc_log.UserId = pat_base.UserId 
        AND proc_log.PLDATE BETWEEN @StartDate AND @EndDate
    LEFT JOIN Encounter med_enc_log ON med_enc_log.UserId = pat_base.UserId
        AND med_enc_log.EncounterDate BETWEEN @StartDate AND @EndDate
    LEFT JOIN @OrderList prov_list ON
        hlth_asmt.OrderId = prov_list.OrderId
        OR proc_log.OrderId = prov_list.OrderId
        OR med_enc_log.OrderId = prov_list.OrderId
    WHERE hlth_asmt.UserId IS NOT NULL
        OR proc_log.UserId IS NOT NULL
    OR med_enc_log.UserId IS NOT NULL
) a ON a.OrderId=b.OrderId
GROUP BY b.OrderId 
```

如果我删除加入的子查询，订单将被多对多关系切割。是否可以用连接替换子查询？

PS这是现在的输出：

```
 OrderId
----------- -----------
8           10001
0           10003 
```

没有子查询的输出：

```
 OrderId
----------- -----------
8           10001 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:07:35.690

你必须改变

```
LEFT JOIN @OrderList prov_list ON 
```

到

```
RIGHT JOIN @OrderList prov_list ON 
```

如果您使用左连接，您会过滤掉 @OrderList 中但没有预期用户的订单

所以查询就像

```
SELECT COUNT(UserId), prov_list.OrderId
    FROM Users pat_base
    LEFT JOIN Assetments hlth_asmt ON hlth_asmt.UserId = pat_base.UserId
        AND hlth_asmt.Date BETWEEN @StartDate AND @EndDate
    LEFT JOIN Logs proc_log ON proc_log.UserId = pat_base.UserId 
        AND proc_log.PLDATE BETWEEN @StartDate AND @EndDate
    LEFT JOIN Encounter med_enc_log ON med_enc_log.UserId = pat_base.UserId
        AND med_enc_log.EncounterDate BETWEEN @StartDate AND @EndDate
    RIGHT JOIN @OrderList prov_list ON
        hlth_asmt.OrderId = prov_list.OrderId
        OR proc_log.OrderId = prov_list.OrderId
        OR med_enc_log.OrderId = prov_list.OrderId
    WHERE hlth_asmt.UserId IS NOT NULL
        OR proc_log.UserId IS NOT NULL
    OR med_enc_log.UserId IS NOT NULL
group by prov_list.OrderId 
```

编辑

是的，这意味着这些行在 where 子句中被过滤掉了

将其更改为

```
WHERE hlth_asmt.UserId IS NOT NULL
OR proc_log.UserId IS NOT NULL
OR med_enc_log.UserId IS NOT NULL
OR pat_base IS NULL 
```

但我认为这意味着您在 db 中有不一致的数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:12:44.107

You can return the result from a single query, but I'd recommend not using a join. Instead, remove your outer query, and change to inner query to use a windowing function on the count. So your SELECT clause would be something similar to:

```
SELECT DISTINCT
   pat_base.UserId,
   prov_list.OrderId,
   COUNT(pat_base.UserId) OVER (PARTITION BY prov_list.OrderId) as UserCount 
```

# mongodb - GridFS 文件检索策略

> ID：14396398
> 
> 赞同：0
> 
> 时间：2013-01-18T09:58:24.143
> 
> 标签：mongodb, cpu-usage, gridfs, fetching-strategy

我一直在寻找 GridFS 来存储图像和其他文件。

它有一些非常好的功能，但是我们必须在某个临时位置检索和存储文件来渲染 html，这会花费我们的 cpu 时间。

什么是使用 GridFS 并最小化成本的好策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:21:49.203

MongoDB 支持 REST。因此，您不必将文件下载到临时存储中。使用 rest，您只需要将文件的 REST 链接附加到您的 html。

[在这里查看mongodb简单的rest接口](http://docs.mongodb.org/ecosystem/tools/http-interfaces/#simple-rest-interface)

# c++ - UDP recvfrom 线程占用过多 CPU 资源

> ID：14396401
> 
> 赞同：2
> 
> 时间：2013-01-18T09:58:29.693
> 
> 标签：c++, multithreading, sockets, udp, winsockets

我正在编写一个 Windows 7 可视化 C++ 服务器应用程序，它应该接收 3.6 MB/s 的 UDP 数据报。我有一个主线程，recvfrom() 接收数据。该套接字是一个非阻塞套接字，具有 64kB 的接收缓冲区。如果套接字上没有接收到数据，则线程执行 sleep(1)。

我的问题是线程占用了我双核处理器的近 50%，我不知道如何减少它。Wireshark 只使用了 20%，所以我的主要目标是达到类似的百分比。

你有什么想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:20:26.480

您可以使用类似选择的方法来等待数据到达您的套接字或客户端决定关闭，而不是轮询：

首先使您的套接字非阻塞：

```
u_long nonBlocking = 0;
WSAEventSelect(sock, NULL, 0);
ioctlsocket(sock, FIONBIO, &nonBlocking); 
```

然后使用[WSAWaitForMultipleEvents](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms742219(v=vs.85).aspx)等待数据到达或您想取消接收：

```
int32_t MyRecv(THandle sock, WSAEVENT* recvCancelEvt,
               uint8_t* buffer, uint32_t bufferBytes)
{
    int32_t bytesReceived;
    WSAEVENT evt;
    DWORD ret;
    HANDLE handles[2];

    event = WSACreateEvent();
    if (NULL == evt) {
        return -1;
    }
    if (0 != WSAEventSelect(handle->iSocket, evt, FD_READ|FD_CLOSE)) {
        WSACloseEvent(evt);
        return -1;
    }

    bytesReceived = recv(sock, (char*)buffer, bufferBytes, 0);
    if (SOCKET_ERROR==received && WSAEWOULDBLOCK==WSAGetLastError()) {
        handles[0] = evt;
        handles[1] = *recvCancelEvt;
        ret = WSAWaitForMultipleEvents(2, handles, FALSE, INFINITE, FALSE);
        if (WAIT_OBJECT_0 == ret) {
            bytesReceived = recv(handle->iSocket, (char*)buffer, bufferBytes, 0);
        }
    }
    WSACloseEvent(evt);
    return bytesReceived;
} 
```

如果要取消recv，客户端代码会调用`WSASetEvent`。`recvCancelEvt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:41:07.313

虽然基于 Select 或阻塞套接字的解决方案是正确的方法，但您以 100% 运行一个内核的原因是由于 Sleep 的行为：-

查看[WinAPI sleep()](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms686298%28v=vs.85%29.aspx)的文档：

> 此函数使线程放弃其时间片的剩余部分，并在基于 dwMilliseconds 值的时间间隔内变得不可运行。系统时钟以恒定速率“滴答”。***如果 dwMilliseconds 小于系统时钟的分辨率，则线程可能休眠的时间少于指定的时间长度。***

因此，如果您正在轮询，您要么需要使用更大的睡眠时间（可能是 20 毫秒，这通常比 Windows 滴答率大一点），要么使用更准确的多媒体计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:24:15.003

看起来大多数时候您对 recvfrom 的调用不会返回数据。睡眠 1 毫秒并不多。您应该考虑增加睡眠时间（便宜，但不是最佳解决方案），或者更好的解决方案，考虑使用事件驱动的方法。使用`select()`或 Windows API 阻塞，直到套接字发出信号或发生您感兴趣的其他事件，然后调用`recvfrom`. 您可能需要为此重新设计程序的主循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:19:08.483

I would recommend using a boost::asio::io_service. We receive about 200MB/s of UDP multicast traffic while maxing out a modern CPU. This includes a full reliability protocol and data dispatch to the application. The bottleneck in profiling is the processing, not the boost::asio receive. [Code here](https://github.com/Eyescale/Collage/blob/master/co/rspConnection.cpp)

# ruby-on-rails-3 - 为什么rails在生产中找不到图像时会出现错误500？

> ID：14396402
> 
> 赞同：1
> 
> 时间：2013-01-18T09:58:30.693
> 
> 标签：ruby-on-rails-3, heroku

我尝试添加一些图像来测试一些页面。在一个循环中，我调用尚不存在的图像（也许永远不会存在！我不知道我的用户是否会给我们一个图像）。

我正等着在 heroku 上有一个破碎的图像，就像在我当地的开发环境中一样。但看起来我有一个很大的错误：

```
ActionView::Template::Error (tmptodelete/icon6.png isn't precompiled): 
```

所以现在，我无法访问我的在线页面，因为无法加载图像的 rails 会生成...... 500 错误！看起来真的反应过度了！！

我的问题是如何防止这种行为？

我不希望我的服务器因为缺少图像而产生错误 500...

# listview - Windows 8 ListView 不会以 100% 的高度呈现

> ID：14396403
> 
> 赞同：3
> 
> 时间：2013-01-18T09:58:39.570
> 
> 标签：listview, windows-8, winjs

因此，我正在制作一个可视页面，该页面需要一个可变增长和缩小的分组 ListView，可以添加或删除组。[这](https://dl.dropbox.com/u/11830885/windows8tracksscreenshot1.PNG)是我想要的样子（供参考）

各种列表视图项目（混合）被很好地分组，有些跑掉了页面。这是 Windows 应用商店应用程序中非常常见的设计模式。

`height`现在，这是我的问题：如果和`width`属性设置为确定的像素数，我只能让我的 ListView 正确显示，例如：

```
#myListView {
height: 700px;
width: 2000px; } 
```

将`height`和设置`width`为 100% 或值 from`calc()`不可避免地会导致 ListView**不填充也不呈现**。根据[快速入门：在 MSDN 上添加 ListView](http://msdn.microsoft.com/en-us/library/windows/apps/hh465496.aspx#styling_the_listview)页面：

> 对于要呈现的 ListView，您必须为其高度指定一个绝对值。

这一切都很好，除了这个应用程序将出现在各种屏幕上并且需要可变高度。这是特别相关的，因为 ListView 将水平滚动。我希望滚动条出现在页面的最底部，就像它在商店应用程序中一样。

我试过以`height`编程方式重置，但没有奏效。**那么，我怎样才能让这个 ListView 在各种屏幕上正确呈现呢？**下面是我的 HTML 代码供参考。

```
<div id="allMixesListView" data-win-control="WinJS.UI.ListView" 
data-win-options="
 {
  itemTemplate: select('#myTemplate'),
  groupHeaderTemplate: select('#myHeaderTemplate'), 
  layout: {type: WinJS.UI.GridLayout}, 
  selectionmode: 'none', 
  itemDataSource: dummyData.placeholderData.dataSource
 }" 
class="myListView"> 
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T16:52:04.670

完全可以将 设置`WinJS.UI.ListView`为`height: 100%`。然而，它参与的布局也必须有一些“定义”的高度。它不需要是明确的（例如 not `700px`），但它*确实*需要产生一些明确的空间。

例子; 给定这个 HTML：

```
<body>
    <div>
        <div data-win-control="WinJS.UI.ListView" style="height: 100%"></div>
    </div>
</body> 
```

列表视图所在的 DIV 的高度*不是*页面的 100%。它是 100% 的*父*级。没有高度。所以它把自己设置得尽可能小。哎呀。

如果将高度从 100% 更改为`height: 100vh`，则此布局将起作用，因为 listview 的高度已计算到父 div 占用空间的程度，并且 ListView 有一些空间可以布局。

请注意，答案并不是严格“将其设置为 100vh”。它是“确保布局有足够的空间来布局你的项目”。如果您在父元素上使用了 -ms-grid，那么您也已被设置（假设行、列设置正确）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-18T15:43:07.560

您的 Windows 8 应用程序的高度永远不会改变。微软将其设计为用户水平滚动，而不是垂直滚动。因此，它要求 LiveView 具有确定的高度。我不相信它需要一个确定的宽度虽然..

# hibernate - JPA 合并和 Hibernate 更新 API 之间的区别？

> ID：14396408
> 
> 赞同：1
> 
> 时间：2013-01-18T09:58:50.907
> 
> 标签：hibernate, jpa

我会说到点子上。我是`Hibernate`JPA 的新手。我不知道 Hibernate `update()`API 和 JPA `merge()`API 之间的区别。这两个API之间有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:04:51.473

检查这两个链接，[SaveOrUpdate vs Merge in Hibernate](http://www.stevideter.com/2008/12/07/saveorupdate-versus-merge-in-hibernate/)和[Hibernate：Merge vs SaveOrUpdate](http://blog.tallan.com/2008/09/18/hibernate-merge-vs-saveorupdate/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T16:11:41.903

*   更新

    *   在瞬态：异常
    *   在分离状态：
        *   如果附加的实例已经存在：异常
        *   否则更新持久状态并附加给定的实例
*   合并

    *   在瞬态：更新持久状态，返回一个附加的实例，让给定的实例保持不变（和分离）
    *   在分离状态：
        *   如果附加实例已经存在：将给定分离实例的值复制到附加实例，让给定实例保持不变（并分离）
        *   否则更新持久状态，返回一个附加的实例，让给定的实例保持不变（和分离）

另请参见[分离实例上的休眠更新与 JPA 合并](https://stackoverflow.com/questions/22459233/hibernate-update-vs-jpa-merge-on-detached-instance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T09:02:40.120

update() 方法可用于持久和分离状态的对象。但是，实际上我无法想象在持久状态下使用 update() 的场景，其中您将对象加载到会话中修改它并在同一会话中使用 update()。

就 merge() 而言，它仅用于分离的对象。update() 和 merge() 方法在分离状态下的工作方式略有不同。此差异通过以下位置的示例进行了详细说明：

[http://javahotpot.blogspot.in/2014/03/hibernate-difference-between-update-and.html](http://javahotpot.blogspot.in/2014/03/hibernate-difference-between-update-and.html)

# mysql - MySQL基于字段的自动增量？

> ID：14396410
> 
> 赞同：0
> 
> 时间：2013-01-18T09:58:56.903
> 
> 标签：mysql

是否可以根据特定字段创建自动增量？例如，我有`UserId`和`Status`字段，因此对于具有相同字段的每一行，`UserId`我需要自动递增**其** `Status`，而不是全局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:17:33.033

当我读到你的问题时，我想到了三件事。一个是自动递增字段，用作您的 ID 号。使用没有唯一 ID 号的数据更新表。搜索与 Mt First 示例相同的字段`Userid`是`Status` 创建表和您的`AUTO_INCREMENT`编号 ID：

```
CREATE TABLE tableNameHere
(
UniqueID int NOT NULL AUTO_INCREMENT,
FirstName varchar(255) NOT NULL,
StatusOrYourColumn int(100) NOT NULL,
PRIMARY KEY (UniqueUD)
) 
```

[更多关于自动增量的信息。](http://www.w3schools.com/sql/sql_autoincrement.asp)

您可能已经建立了表格，现在想要“添加”额外和/或修改您的字段`ALTER`：

```
ALTER TABLE tableNameHere StatusOrYourColumn INT AUTO_INCREMENT PRIMARY KEY 
```

但请注意，您不想覆盖已设置的设置。

阅读时我想到的另一件事是您所说的状态和用户ID相同的地方。您可以使用这样的`WHERE`子句找到这些：

```
SELECT * FROM tableName WHERE tableName.Userid = anotherTableOrTableName.Status 
```

使用这些查询，您可以更新、重新制作、更改和查询您的数据库表。

# firefox - 在 Firefox 插件中使用 simple-prefs 模块

> ID：14396411
> 
> 赞同：2
> 
> 时间：2013-01-18T09:58:57.187
> 
> 标签：firefox, firefox-addon, preferences, firefox-addon-sdk

`simple-prefs`我的插件中的模块有问题（ [simple-prefs 文档](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/simple-prefs.html)）。我正在尝试使用`menulist`或`radio`类型。问题是**插件未加载或启动**-`main`未调用函数。
当我使用命令时，我没有这个问题`cfx run`，它启动新的、清晰的 Firefox 实例 - 一切正常。我尝试在两台不同的计算机上运行这个插件，不幸的是结果相同。
下面我放代码片段：

主.js：

```
var prefs = require("simple-prefs").prefs;
...
exports.main = function (options, callbacks) {
    console.log("Addon loaded: " + self.loadReason);
    var modLogic = pageMod.PageMod({
        include: "*",
        contentScriptWhen: "start",
        contentScriptFile: data.url("myContentScript.js"),
        onAttach: function (worker) {
            console.log("Page worker attached to: " + worker.tab.url);
            // here I'm using prefs object: if(prefs.decision === "Y")
        }
    });
} 
```

包.json：

```
{
    "name": "myaddon",
    ...
    "preferences" : [{
        "name": "decision",
        "title": "someTitle",
        "type": "radio", // or menulist
        "value": "D",
        "options": [{
                "value": "D",
                "label": "Default"
            },
            {
                "value": "Y",
                "label": "Yes"
            },
            {
                "value": "N",
                "label": "No"
            }
        ]
    }]
} 
```

我正在使用 addon-sdk 1.12 和 Firefox 18.0。在我的代码片段中可能是错误 - 我刚刚在这里写了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:55:11.433

不久前我创建了这个示例仓库：

[https://github.com/canuckistani/jp-prefs-example](https://github.com/canuckistani/jp-prefs-example)

所有功能都对我有用，请参阅此屏幕截图：

[https://dl.dropbox.com/u/44296964/Screen%20Shot%202013-01-18%20at%201.50.31%20PM.png](https://dl.dropbox.com/u/44296964/Screen%20Shot%202013-01-18%20at%201.50.31%20PM.png)

我也在使用 Firefox 18 和 SDK 1.12。在您的示例中，您的 JSON 中有一条评论，这可能会给您带来问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:30:35.120

该模块将在未来的版本中更改，所以我不知道使用它有多安全。我使用简单存储在浏览器会话之间保存数据。此外，cfx 环境有时会出现一些未正确注册类型的奇怪行为。我使用 JSON.parse() 只是为了确保。

# php - SQL Server 等效于 mysql_data_seek

> ID：14396413
> 
> 赞同：0
> 
> 时间：2013-01-18T09:59:05.313
> 
> 标签：php, sql-server

我正在开发一个 Web 应用程序，该应用程序使用 SQL Server（不是我的电话）从数据库返回大型统计表。在我的代码中，我有几个带有 while 循环类型的函数：

```
while($row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) 
```

但是，由于表太大，我希望尽可能少地调用数据库以最小化加载时间。这意味着我想在这些while循环之后以某种方式重置数据库语句的内部指针。至少可以说，我对 SQL Server 的经验是有限的，谷歌搜索表明在 MySQL 中我应该能够使用 mysql_data_seek 函数。SQL Server 中是否有等价物？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T10:05:27.397

```
sqlsrv_fetch($stmt,SQLSRV_SCROLL_FIRST); 
```

在[http://www.php.net/manual/en/function.sqlsrv-fetch.php](http://www.php.net/manual/en/function.sqlsrv-fetch.php)

# mysql - 按有序列分组

> ID：14396418
> 
> 赞同：1
> 
> 时间：2013-01-18T09:59:32.003
> 
> 标签：mysql, group-by

这是我的查询：

```
SELECT p.*,r.* 
FROM products p 
left join p_images r 
  on (p.id=r.product) 
```

结果：

```
id | name | img    | nu
25 | shoe | a1.jpg | 1
25 | shoe | a2.jpg | 0
26 | elbs | r3.jpg | 1 
```

我想要这个结果

```
shoe a2.jpg 0
elbs r3.jpg 1 
```

当我`group by p.id`在查询中使用时，它输出`a1.jpg`.
我想用`min("nu")`列值订购。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:08:18.397

您可以使用子查询来获取该`min(nu)`值，然后将其连接回您的`p_image`表，以确保您返回正确的图像：

```
select p.id,
  p.name,
  i.img,
  r.minnu
from products p 
left join
(
  select min(nu) MinNu, product
  from p_images
  group by product
) r 
  on p.id=r.product
left join p_images i
  on r.minnu = i.nu
  and r.product = i.product
order by i.nu; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/99cf8/14)

结果：

```
| ID | NAME |    IMG | MINNU |
------------------------------
| 25 | shoe | a2.jpg |     0 |
| 26 | elbs | r3.jpg |     1 | 
```

~~您可以添加一个`ORDER BY`该值。由于您使用的是 order by 子句，因此您可以使用别名，也可以将聚合放在其中。~~

按别名排序：

SELECT p.id, p.name, r.img, min(r.nu) MinNu FROM products p left join p_images r on p.id=r.product group by p.id order by MinNu

按聚合排序：

SELECT p.id, p.name, r.img, min(r.nu) MinNu FROM products p left join p_images r on p.id=r.product group by p.id order by min(r.nu);

请参阅带有两个查询的演示的SQL [Fiddle](http://www.sqlfiddle.com/#!2/99cf8/2)

结果是：

| 身份证 | 姓名 | 图片 | 闽南语 | ------------------------------ | 25 | 鞋| a1.jpg | 0 | | 26 | 矮人 | r3.jpg | 1 |

 ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:11:06.290

这是你需要的吗？这里错了，因为我将您之前产生的结果作为表格.. :)

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/82728/2)

```
select id, name, img, 
min(nu)
from t1
group by id
; 
```

那么我不妨据此给出答案：

```
select x.id, x.name, x.img, min(x.nu)
from( 
SELECT p.,r. FROM products p 
left join p_images r 
on (p.id=r.product)) x
group by x.id
order by x.nu

| ID | NAME |    IMG | MIN(NU) |
--------------------------------
| 26 | elbs | r3.jpg |       1 |
| 25 | shoe | a1.jpg |       0 | 
```

* * *

好吧，您的预期结果说`r2.jpg and 0`，所以我认为这是您真正需要的。这次使用了正确的表，这要感谢@bluefeet 的 sql fiddle。

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/99cf8/7)

```
select p.id, p.name, x.img, x.mn
from products p
left join (select i.product, i.img, 
           min(i.nu) mn
           from p_images i
           group by i.nu, i.product)
x on p.id = x.product
group by x.product
order by x.mn
;

| ID | NAME |    IMG | MN |
---------------------------
| 25 | shoe | a2.jpg |  0 |
| 26 | elbs | r3.jpg |  1 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:14:19.180

尝试：

```
SELECT * 
FROM products p 
LEFT JOIN p_images r ON (r.product=p.id) 
WHERE r.nu = (SELECT MIN(nu) FROM p_images m WHERE m.product = p.id)
ORDER BY nu 
```~~

# workflow-foundation - Windows Workflow 3 状态机 - 将对象与 WF 状态一起保留？

> ID：14396419
> 
> 赞同：0
> 
> 时间：2013-01-18T09:59:39.533
> 
> 标签：workflow-foundation, state-machine-workflow

我正在维护一个基于 WWF3 状态机构建的应用程序。是的，我知道，我很幸运。我们正在尝试做的是能够持久化 WF 并将其重新加载到另一台机器上。我正在努力解决的问题是如何保持 WF 作用的对象以及 WF。

我们正在使用标准的 SQL Server 持久性服务。我们在 Workflow 类中有一个名为“Customer”的公共属性，当我们启动工作流时（通过传入参数）填充该属性。

我的问题是：

1.  公共属性 Customer 是否与 WF 状态一起持续存在？
2.  如果是这样，当重新加载 WF 时，如何获取对 Customer 对象的引用？
3.  如果不是，我是否只是单独保留我的域对象，然后在重新加载 WF 本身时重新加载并将其与 WF 重新关联？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:27:00.880

我认为更好的方法是仅保留客户 Id ，然后在需要时加载它，因为客户详细信息（可能在其他数据库中）可以在 WF 实例被保留时更改。

# c# - 使用 C# 释放错误

> ID：14396420
> 
> 赞同：-1
> 
> 时间：2013-01-18T09:59:40.657
> 
> 标签：c#

为什么我在修改集合时收到错误，在 C# 中发布应用程序时枚举操作可能无法执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:07:59.360

这意味着您直接/间接尝试更改对集合中对象的引用之一。

在一次迭代中：

```
foreach(var item in myCollection)
{
    item = new Item(); // Error
    item.Prop = "Something"; //OK
} 
```

# emacs - Emacs下用多行表达式对行进行排序

> ID：14396426
> 
> 赞同：2
> 
> 时间：2013-01-18T09:59:59.430
> 
> 标签：emacs

我正在寻找一种`M-x sort-lines`可以正确处理多行表达式的变体。例如：

```
this is the first line
this is the second lien
this is the (third 
             line
             spanning multiple lines because of parens) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:27:17.837

[这](https://stackoverflow.com/questions/7616911/whats-the-best-way-to-sort-class-definitions-in-a-python-source-file)是以类似方式解决的类似问题

```
(defun end-of-chunk ()
  "forward line or to ends of mid-expression."
  (interactive)
  (goto-char (point-at-eol))
  (let ((limit (point-at-bol))
        temp
        expr-beg)
    (while (and (setq temp (nth 1 (syntax-ppss)))
                (<= limit temp))
      (goto-char temp)
      (setq expr-beg (point)))
    (when expr-beg
        (goto-char expr-beg)
      (forward-sexp))))

(defun sort-lines-as-exprs (reverse beg end)
  "sort lines, or whole expression if line ends mid-expression."
  (interactive "P\nr")
  (save-excursion
    (save-restriction
      (narrow-to-region beg end)
      (goto-char (point-min))
      (sort-subr reverse
                 'forward-line
                 'end-of-chunk)))) 
```

# eclipse-plugin - Eclipse 向导窗口中未显示进度

> ID：14396431
> 
> 赞同：0
> 
> 时间：2013-01-18T10:00:24.880
> 
> 标签：eclipse-plugin

我正在开发一个在当前工作区中创建一个项目的 Eclipse 插件。我想在向导窗口中显示一个进度条（在 next-previous-finish 按钮上方）来表示创建进度。但是，当按下完成按钮时，不会显示进度条。下面是我的代码。

```
 @Override
    WorkspaceModifyOperation op = new WorkspaceModifyOperation() {

        @Override
        protected void execute(IProgressMonitor monitor) throws CoreException,
                InvocationTargetException, InterruptedException {

            monitor.beginTask("Create *** Project", 100);

            try {
                ProjectUtil.createProject(monitor);
            } catch (Exception e) {
            } finally {
                monitor.done();
            }
            monitor.done();
        }
    };
    try {
        getContainer().run(true, true, op);
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

`createProject(IProgressMonitor monitor)`在class的方法里面`ProjectUtil`，我`monitor.worked(someWork)`每次操作后都有。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:44:14.677

尝试设置 setNeedsProgressMonitor(true); 在类中，它扩展了向导。希望这可以帮助。

# eclipse - 是否可以在 Eclipse 中自动为 wikitext 项目创建 ant-build 文件？

> ID：14396433
> 
> 赞同：0
> 
> 时间：2013-01-18T10:00:32.767
> 
> 标签：eclipse, ant, mylyn-wikitext

我的 Eclipse 项目中有几百个纺织文件，并且我编写了一个 ant-build xml 文件来创建输出 html 文件。这正常工作。但是，每次我向项目中添加一些 .textile 文件时，如果必须生成输出，我还必须手动编辑 projectBuilder.xml 文件。eclipse中有没有一种方法可以自动生成projectBuilder.xml文件？也就是说，我添加了一个新文件夹，其中包含大约 50 个子文件夹，其中包含 .textile 文件，我希望 eclipse 检测到这一点并将这些路径添加到构建文件中。

*以下是构建文件的一部分，用于说明目的：*

```
<?xml version="1.0"?>
<project name="ALM" default="generate-html">
<property name="wikitext.standalone" value="jar" />
<path id="wikitext.classpath">
    <fileset dir="${wikitext.standalone}">
        <include name="org.eclipse.mylyn.wikitext.*core*.jar" />
    </fileset>
</path>
<taskdef classpathref="wikitext.classpath" resource="org/eclipse/mylyn/wikitext/core/util/anttask/tasks.properties" />
<target name="generate-html" description="Generate HTML from textile source">
  <wikitext-to-html markupLanguage="Textile">
    <fileset dir="${basedir}/..">
      <include name="Docu/*.textile" />
      <include name="Add-Ons/*.textile" />
      <include name="uC1/asv/ASD/doc/*.textile" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:49:58.167

我不确定，你有这两个问题中的哪一个。

*   要**自动化转换过程**，请选择 Project->Properties->Builder。添加一个 Ant 构建器并为其提供您已有的 Ant 脚本。这会导致在项目中的每一次更改上运行您的脚本（就像普通的 Java 编译器一样）。如果您只想在您的纺织文件更改时运行 Ant 脚本，那么在配置该构建器时查看最后一个选项卡“构建选项”，您可以将其限制为“相关资源的工作集”。

*   要动态**获取目录列表**，有多个可用的 ant 任务，它可能取决于您的项目布局使用什么：使用`fileset`您可以找到所有纺织文件，然后使用文件集内容进行生成：[查找所有目录文件存在，因此该文件包含搜索字符串](https://stackoverflow.com/questions/9255127/find-all-directories-in-which-a-file-exists-such-that-the-file-contains-a-searc)或者如果目录结构非常简单，那么您可以使用以下命令对其进行迭代`foreach`：[Ant：我如何遍历所有子文件夹并在 ant 中执行任务](https://stackoverflow.com/questions/6254109/ant-how-do-i-interate-over-all-subfolders-and-perform-a-task-in-ant)。

# ruby-on-rails-3 - Rails3.2 未定义方法

> ID：14396440
> 
> 赞同：0
> 
> 时间：2013-01-18T10:00:48.183
> 
> 标签：ruby-on-rails-3, activerecord

我有一个名为 Status 的模型，它处理一个包含两列 Stat 和 Colour 的表。

由于这些列也是模型方法，我希望以下内容可以正常工作

```
@a = Status.where(:stat => "Operational")
@a.colour = "Green" 
```

但是，当我调用 @a.colour 时，我收到一条错误消息，指出方法 'colour=' 不存在。

我从种子中调用@a.colour。这只是一个模型，它没有控制器。

我究竟做错了什么？

- 编辑 -

模型

```
class Status < ActiveRecord::Base
end 
```

图式

```
 create_table "statuses", :force => true do |t|
    t.string   "stat"
    t.string   "colour"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

这是你要求的吗？我没有完全理解这个要求，

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:05:53.093

我想`Status.where()`返回不止一条记录。所以你试图`color=`在一个显然不存在的数组上调用该方法！

所以你需要遍历所有找到的记录，使用

```
Status.where(:stat => "Operational").each do |a|
   a.colour = "Green"
end 
```

有关更多信息，请查看[Rails ActiveRcord 查询接口指南](http://guides.rubyonrails.org/active_record_querying.html#conditions)，它告诉您：

> 如果您想为您的查找添加条件，您可以在其中指定它们，就像 Client.where("orders_count = '2'") 一样。这将找到orders_count 字段值为 2 的**所有客户端。**

# web-services - 使用 GWT 的休息服务代理访问错误

> ID：14396446
> 
> 赞同：1
> 
> 时间：2013-01-18T10:01:05.060
> 
> 标签：web-services, rest, gwt, proxy

我有一个 Rest 网络服务。我使用 java 应用程序访问它，它的包结构如下所示。

src.app -> App.gwt.xml

src.app.source->RestProxyClass.java// 访问Rest Application

以下是 App.gwt.xml 文件内容

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to="App">
    <source path="source"/>
</module> 
```

使用这个 java 应用程序，我可以访问 Rest web 服务。

我拿了这个项目的 jar 并添加到 GWT 项目中。我将此 jar 文件添加到库中，然后从 Order and Export 中选择 jar。我在引用的库中得到了这个包

然后我在 .gwt.xml 文件中添加以下代码

```
<inherits name="app.App" /> 
```

但是运行时出现以下错误：

```
No source code is available for type app.source.RestProxyClass; did you forget to inherit a required module? 
```

以下是 GWT 代码

```
public class RestProxyAccessClient implements EntryPoint {

    public void onModuleLoad() {
RestProxyClass app=new RestProxyClass();
        try {
            //restProxy.check();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:24:48.397

确保`*.java`文件打包在 JAR 中。

# c# - 为什么在 .NET 响应式扩展中不推荐主题？

> ID：14396449
> 
> 赞同：124
> 
> 时间：2013-01-18T10:01:20.830
> 
> 标签：c#, system.reactive, reactivex

我目前正在掌握 .NET 的反应式扩展框架，并且正在通过我找到的各种介绍资源（主要是[http://www.introtorx.com](http://www.introtorx.com)）

我们的应用程序涉及许多检测网络帧的硬件接口，这些将是我的 IObservables，然后我有各种组件将消耗这些帧或对数据执行某种方式的转换并生成一种新类型的帧。例如，还有其他组件需要显示每第 n 帧。我确信 Rx 将对我们的应用程序有用，但是我正在为 IObserver 接口的实现细节而苦苦挣扎。

我一直在阅读的大多数（如果不是全部）资源都说我不应该自己实现 IObservable 接口，而是使用提供的函数或类之一。根据我的研究，创建一个似乎可以满足`Subject<IBaseFrame>`我的需求，我将拥有从硬件接口读取数据然后调用`Subject<IBaseFrame>`实例的 OnNext 函数的单线程。然后，不同的 IObserver 组件将接收来自该主题的通知。

我的困惑来自[本教程](http://www.introtorx.com)附录中给出的建议，其中说：

> 避免使用主题类型。Rx 实际上是一种函数式编程范式。使用主题意味着我们现在正在管理状态，这可能会发生变化。同时处理变异状态和异步编程是非常困难的。此外，许多运算符（扩展方法）都经过精心编写，以确保订阅和序列的正确和一致的生命周期得以维持；当你介绍主题时，你可以打破这个。如果您明确使用主题，未来的版本也可能会出现显着的性能下降。

我的应用程序对性能非常关键，我显然会在使用 Rx 模式之前测试它的性能，然后再将其用于生产代码；但是我担心我正在使用 Subject 类做一些违背 Rx 框架精神的事情，并且该框架的未来版本会损害性能。

有没有更好的方法来做我想做的事？无论是否有任何观察者，硬件轮询线程都将持续运行（否则硬件缓冲区将备份），因此这是一个非常热的序列。然后我需要将接收到的帧传递给多个观察者。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-01-22T14:16:40.513

好的，如果我们忽略我的教条方式并忽略“主题是好/坏”。让我们看看问题空间。

我敢打赌，你要么拥有 2 种系统风格中的 1 种，要么需要迎合。

1.  消息到达时系统引发事件或回调
2.  您需要轮询系统以查看是否有任何消息要处理

对于选项 1，很简单，我们只需用适当的 FromEvent 方法包装它就可以了。去酒吧！

对于选项 2，我们现在需要考虑如何轮询以及如何有效地执行此操作。此外，当我们获得价值时，我们如何发布它？

我想你会想要一个专用的轮询线程。您不希望其他编码人员敲打 ThreadPool/TaskPool 并让您处于 ThreadPool 饥饿的境地。或者，您不想要上下文切换的麻烦（我猜）。所以假设我们有自己的线程，我们可能会有某种 While/Sleep 循环，我们坐在那里进行轮询。当检查发现一些消息时，我们会发布它们。好吧，所有这些听起来都非常适合 Observable.Create。现在我们可能不能使用 While 循环，因为它不允许我们返回 Disposable 以允许取消。幸运的是，您已经阅读了整本书，因此精通递归调度！

我想这样的事情可能会奏效。#未测试

```
public class MessageListener
{
    private readonly IObservable<IMessage> _messages;
    private readonly IScheduler _scheduler;

    public MessageListener()
    {
        _scheduler = new EventLoopScheduler();

        var messages = ListenToMessages()
                                    .SubscribeOn(_scheduler)
                                    .Publish();

        _messages = messages;
        messages.Connect();
    }

    public IObservable<IMessage> Messages
    {
        get {return _messages;}
    }

    private IObservable<IMessage> ListenToMessages()
    {
        return Observable.Create<IMessage>(o=>
        {
                return _scheduler.Schedule(recurse=>
                {
                    try
                    {           
                        var messages = GetMessages();
                        foreach (var msg in messages)
                        {
                            o.OnNext(msg);
                        }   
                        recurse();
                    }
                    catch (Exception ex)
                    {
                        o.OnError(ex);
                    }                   
                });
        });
    }

    private IEnumerable<IMessage> GetMessages()
    {
         //Do some work here that gets messages from a queue, 
         // file system, database or other system that cant push 
         // new data at us.
         // 
         //This may return an empty result when no new data is found.
    }
} 
```

我真的不喜欢主题的原因是，这通常是开发人员对问题没有真正清晰设计的情况。攻入一个主题，到处戳它，然后让可怜的支持开发者猜测 WTF 正在继续。当您使用 Create/Generate 等方法时，您正在本地化对序列的影响。您可以通过一种方法查看所有内容，并且您知道没有其他人会产生令人讨厌的副作用。如果我看到一个主题字段，我现在必须去寻找一个班级中所有正在使用它的地方。如果某个 MFer 公开暴露了一个，那么所有的赌注都没有了，谁知道这个序列是如何使用的！异步/并发/接收很难。你不需要让副作用和因果关系编程更让你头晕目眩，让事情变得更难。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-18T19:56:31.403

一般来说，您应该避免使用`Subject`，但是对于您在这里所做的事情，我认为它们工作得很好。当我在 Rx 教程中遇到“避免主题”消息时，我问了一个[类似的问题。](https://stackoverflow.com/questions/12053709/how-to-expose-iobservablet-properties-without-using-subjectt-backing-field)

引用[Dave Sexton](http://social.msdn.microsoft.com/Forums/en-US/rx/thread/654e0f0d-f660-479c-9200-742b1f7db21e)（来自 Rxx）

> “主题是 Rx 的有状态组件。当您需要创建类似事件的可观察对象作为字段或局部变量时，它们非常有用。”

我倾向于将它们用作 Rx 的入口点。因此，如果我有一些代码需要说“发生了一些事情”（就像你有的那样），我会使用 a `Subject`and call `OnNext`。然后将其公开`IObservable`为其他人订阅（您可以`AsObservable()`在您的主题上使用以确保没有人可以投射到主题并搞砸事情）。

您也可以通过 .NET 事件和 use 来实现这一点`FromEventPattern`，但如果我只想将事件变成一个`IObservable`无论如何，我看不到有一个事件而不是 a 的好处`Subject`（这可能意味着我错过了这里有东西）

但是，您应该非常强烈地避免`IObservable`使用 a 订阅 a `Subject`，即不要将 a 传递给`Subject`该`IObservable.Subscribe`方法。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-08-06T06:58:29.210

通常，当您管理一个主题时，您实际上只是在重新实现 Rx 中已经存在的功能，而且可能不是以一种健壮、简单和可扩展的方式。

当您尝试将一些异步数据流调整到 Rx 中（或从当前非异步的数据流创建异步数据流）时，最常见的情况通常是：

*   **数据源是一个事件**：正如 Lee 所说，这是最简单的情况：使用 FromEvent 并前往酒吧。

*   **数据源来自同步操作，并且您想要轮询更新**，（例如 Web 服务或数据库调用）：在这种情况下，您可以使用 Lee 建议的方法，或者对于简单的情况，您可以使用类似`Observable.Interval.Select(_ => <db fetch>)`. 您可能希望使用 DistinctUntilChanged() 来防止在源数据中没有任何更改时发布更新。

*   **数据源是某种调用您的回调的异步 api**：在这种情况下，使用 Observable.Create 连接您的回调以在观察者上调用 OnNext/OnError/OnComplete。

*   **数据源是一个阻塞直到有新数据可用的调用**（例如一些同步套接字读取操作）：在这种情况下，您可以使用 Observable.Create 包装从套接字读取并发布到 Observer.OnNext 的命令式代码读取数据时。这可能类似于您对主题所做的事情。

使用 Observable.Create 与创建一个管理 Subject 的类相当等同于使用 yield 关键字与创建一个实现 IEnumerator 的整个类。当然，你可以把 IEnumerator 写得像 yield 代码一样干净和好公民，但是哪个封装更好，感觉设计更整洁呢？Observable.Create 与管理 Subjects 也是如此。

Observable.Create 为您提供了一个干净的模式，用于惰性设置和干净的拆卸。您如何通过包装主题的类来实现这一点？你需要某种 Start 方法......你怎么知道什么时候调用它？还是你总是启动它，即使没有人在听？完成后，如何让它停止从套接字读取/轮询数据库等？你必须有某种 Stop 方法，而且你不仅要访问你订阅的 IObservable，还要访问最初创建 Subject 的类。

使用 Observable.Create，一切都集中在一个地方。Observable.Create 的主体在有人订阅之前不会运行，所以如果没有人订阅，你就永远不会使用你的资源。并且 Observable.Create 返回一个 Disposable ，它可以干净地关闭您的资源/回调等 - 当 Observer 取消订阅时调用它。你用来生成 Observable 的资源的生命周期与 Observable 本身的生命周期紧密相关。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-18T18:02:26.463

引用的块文本几乎解释了为什么您不应该使用[`Subject<T>`](http://msdn.microsoft.com/en-us/library/hh229173.aspx)，但更简单地说，您正在结合观察者和可观察者的功能，同时在两者之间注入某种状态（无论您是封装还是扩展）。

这就是你遇到麻烦的地方；这些责任应该彼此分开和区别开来。

也就是说，在您的*具体*情况下，我建议您将您的担忧分解为更小的部分。

首先，您的线程很热，并且始终监视硬件以获取发出通知的信号。你通常会怎么做？ [事件](http://msdn.microsoft.com/en-us/library/aa645739.aspx)。所以让我们从那个开始。

让我们定义[`EventArgs`](http://msdn.microsoft.com/en-us/library/system.eventargs.aspx)您的事件将触发。

```
// The event args that has the information.
public class BaseFrameEventArgs : EventArgs
{
    public BaseFrameEventArgs(IBaseFrame baseFrame)
    {
        // Validate parameters.
        if (baseFrame == null) throw new ArgumentNullException("IBaseFrame");

        // Set values.
        BaseFrame = baseFrame;
    }

    // Poor man's immutability.
    public IBaseFrame BaseFrame { get; private set; }
} 
```

现在，将触发事件的类。请注意，这可能是一个静态类（因为您总是有一个线程在运行监视硬件缓冲区），或者您按需调用的订阅*该*. 您必须根据需要进行修改。

```
public class BaseFrameMonitor
{
    // You want to make this access thread safe
    public event EventHandler<BaseFrameEventArgs> HardwareEvent;

    public BaseFrameMonitor()
    {
        // Create/subscribe to your thread that
        // drains hardware signals.
    }
} 
```

所以现在你有一个公开事件的类。Observables 可以很好地处理事件。如此之多，以至于[`IObservable<T>`](http://msdn.microsoft.com/en-us/library/dd990377.aspx)如果您遵循标准事件模式，通过 class 上的[静态`FromEventPattern`方法](http://msdn.microsoft.com/en-us/library/hh229251.aspx)将事件流（将事件流视为事件的多次触发）转换为实现的[`Observable`一流](http://msdn.microsoft.com/en-us/library/hh244252.aspx)支持。

使用您的事件源和`FromEventPattern`方法，我们可以轻松地创建一个`IObservable<EventPattern<BaseFrameEventArgs>>`（[`EventPattern<TEventArgs>`该类](http://msdn.microsoft.com/en-us/library/hh229009.aspx)体现了您在 .NET 事件中看到的内容，特别是派生自的实例`EventArgs`和表示发送者的对象），如下所示：

```
// The event source.
// Or you might not need this if your class is static and exposes
// the event as a static event.
var source = new BaseFrameMonitor();

// Create the observable.  It's going to be hot
// as the events are hot.
IObservable<EventPattern<BaseFrameEventArgs>> observable = Observable.
    FromEventPattern<BaseFrameEventArgs>(
        h => source.HardwareEvent += h,
        h => source.HardwareEvent -= h); 
```

当然，你想要一个`IObservable<IBaseFrame>`, 但这很简单，使用类上的[`Select`扩展方法](http://msdn.microsoft.com/en-us/library/system.reactive.linq.observable.select.aspx)`Observable`来创建一个投影（就像你在 LINQ 中一样，我们可以将所有这些包装在一个易于使用的方法中）：

```
public IObservable<IBaseFrame> CreateHardwareObservable()
{
    // The event source.
    // Or you might not need this if your class is static and exposes
    // the event as a static event.
    var source = new BaseFrameMonitor();

    // Create the observable.  It's going to be hot
    // as the events are hot.
    IObservable<EventPattern<BaseFrameEventArgs>> observable = Observable.
        FromEventPattern<BaseFrameEventArgs>(
            h => source.HardwareEvent += h,
            h => source.HardwareEvent -= h);

    // Return the observable, but projected.
    return observable.Select(i => i.EventArgs.BaseFrame);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-14T06:07:08.107

概括主题不适合用于公共接口是不好的。虽然这肯定是正确的，但这不是反应式编程方法的样子，但对于您的经典代码来说，它绝对是一个很好的改进/重构选项。

如果您有一个带有公共 set 访问器的普通属性并且您想通知更改，那么没有什么反对用 BehaviorSubject 替换它的。INPC 或其他其他事件并不是那么干净，它让我个人感到厌烦。为此，您可以并且应该将 BehaviorSubjects 用作公共属性而不是普通属性，并放弃 INPC 或其他事件。

此外，主题界面使您界面的用户更加了解您的属性的功能，并且更有可能订阅而不是仅仅获得价值。

如果您希望其他人收听/订阅属性的更改，最好使用它。

# java - 使用适配器设置不带 TextView 的列表视图高度

> ID：14396451
> 
> 赞同：0
> 
> 时间：2013-01-18T10:01:30.100
> 
> 标签：java, android, listview, adapter, android-arrayadapter

我有一个`ListView`应该成为一个菜单，每行有两个可绘制对象和两个文本视图。

活动代码：

```
ArrayList<MenuItem> itemArray = new ArrayList<MenuItem>();
        itemArray.add(new MenuItem("Headertexxt", "subbtexdt"));
        itemArray.add(new MenuItem("asf", "asf"));

        ListView listView = (ListView) findViewById(R.id.listViewCM);

        String[] array = getResources().getStringArray(R.array.buttonsCM);
        int[] images =  new int[] { R.drawable.btn_car, R.drawable.btn_star, R.drawable.btn_bag};
        listView.setAdapter(new HomeScreenButtonsAdapterSubtext(this, R.layout.row,
                itemArray, images, R.drawable.list_arrow));

        Utils.setListViewHeightBasedOnChildren(listView);
        listView.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                switch (position) {
                case 0:
                    findViewById(R.id.buttonCreditCompilation).performClick();
                    break;
                case 1:
                    findViewById(R.id.buttonYourCredits).performClick();
                    break;

                }
            }
        }); 
```

适配器代码：

```
public class HomeScreenButtonsAdapterSubtext extends ArrayAdapter<MenuItem> {

        private Drawable[] drawables;

        private Drawable arrowDrawable;
        private ArrayList<MenuItem> items;

        public HomeScreenButtonsAdapterSubtext(Context context, int resourceId,
                ArrayList<MenuItem> items, int[] images, int arrowImage) {
            super(context, resourceId, items);
            this.items = items;

            Resources resources = context.getResources();
            if (images != null) {
                drawables = new Drawable[images.length];
                int i = 0;
                for (int id : images) {
                    Drawable drawable = resources.getDrawable(id);
                    drawable.setBounds(0, 0, drawable.getIntrinsicWidth(),
                            drawable.getIntrinsicHeight());
                    drawables[i++] = drawable;
                }
            }

            arrowDrawable = resources.getDrawable(arrowImage);
            arrowDrawable.setBounds(0, 0, arrowDrawable.getIntrinsicWidth(),
                    arrowDrawable.getIntrinsicHeight());
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
             View v = super.getView(position, convertView, parent);
             if (v instanceof TextView) {
             Drawable dr = drawables != null ? drawables[position %
             drawables.length] : null;
             ((TextView) v).setCompoundDrawables(dr, null, arrowDrawable, null);
             Utils.setFont((TextView) v);
             }

//          View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.row, null);
            }

            MenuItem station = items.get(position);
            if (station != null) {
                TextView tt = (TextView) v.findViewById(R.id.headerText);
                TextView bt = (TextView) v.findViewById(R.id.subText);

                if (tt != null) {
                    tt.setText(station.getHeaderText());
                }
                if (bt != null) {
                    bt.setText(station.getSubText());
                }

            }

            return v;
        } 
```

我现在遇到的问题是我无法设置`listview height`基于孩子。我在这里尝试这样做：`Utils.setListViewHeightBasedOnChildren(listView);`但收到错误：`arrayadapter requires the resource id to be a textview`在这一行。有谁知道这个的解决方案？

我可以使用其他方法来设置`ListView`高度吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:07:48.347

实际上，`ListView`根据其内容设置高度并没有什么意义。

因为 a 的全部意义在于`ListView`使其内容可滚动（无论它有多大）......所以它应该有一个固定的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:11:59.620

> 但收到错误：arrayadapter 要求资源 id 是这一行的文本视图。

`R.layout.row`是一个布局文件，它不只是一个`TextView`. 如果您调用您使用的超级构造函数并且您还调用了适配器`super.getView`中的（`getView`方法中）方法，那么`ArrayAdapter`会抱怨，因为它期望布局文件中的单个小部件传递给它（单个`TextView`）。

当您确切知道`getView`该行不能是`Textview`.

我不确定设置两者的高度`ListView`，如果你想显示 的所有行`ListView`，不要这样做（因为你`ListView`基本上没用）。如果您仍然想这样做，那么最好`ListView`手动丢失并构建行布局。

# php - 避免多次运行同一个 MySQL 脚本

> ID：14396452
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:01:30.850
> 
> 标签：php, mysql, optimization

我有一个这样的脚本：

```
$result = array();
$sql = "SELECT DISTINCT Name FROM servers"; //doesn't really matter what this MySQL script is

//storing the same query in two different variables
$result[0] = mysql_query($sql);
$result[1] = $result[0];

for($i = 0; $i < 3; $i++) {

    $result[0] = $result[1];

    while($ret = mysql_fetch_array($result[0]) {
        //run some code
    }

} 
```

不幸的是，上面的代码执行一次，然后在下一次迭代中什么也不返回。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:32:23.857

我不太确定你想做什么。但如果我明白，试试这个。删除 for 循环，只需放置 while 循环并做任何你想做的事情。

```
$sql = "SELECT DISTINCT Name FROM servers";
$result = mysql_query($sql);
    while($ret = mysql_fetch_array($result) {
        //run some code
        echo $ret['Name'];
    }
} 
```

您将在每次迭代中获得所有 3 条记录，并为每条记录执行您想要执行的任何处理。无需对 3 条记录进行三 3 查询。一个查询将包含所有记录并执行 while 循环以获取每条记录。希望能帮助到你。

# c# - Live Silverlight 应用程序不会显示数据

> ID：14396453
> 
> 赞同：1
> 
> 时间：2013-01-18T10:01:35.700
> 
> 标签：c#, sql, wpf, silverlight

我有一个 silverlight 应用程序，它在本地运行良好，所有数据都显示在应用程序上，但是当我将相同版本发布到 Live 时，应用程序上的大部分字段都不会显示数据。

我检查了所有内容、存储过程、连接字符串和所有其他可能的东西，但有些字段根本不会显示数据。该应用程序使用存储的过程，当我在服务器上运行相同的返回数据时。

我已经尝试了所有可能性，但找不到任何解决方案，有没有人对此有任何想法。

谢谢

# eclipse - Eclipse 中的休眠 jar 文件

> ID：14396454
> 
> 赞同：1
> 
> 时间：2013-01-18T10:01:41.847
> 
> 标签：eclipse, hibernate, jar

我是 hibernate 和 eclipse 的新手，并尝试使用[教程编写“hello world”程序](http://www.java4s.com/hibernate/hibernate-hello-world-program-in-eclipse/)

我也在使用休眠 4.1.8 版本。当我尝试运行该程序时，第一个错误是“无法解析导入 org.hibernate”。搜索它，我发现我缺少 jar 文件。这些 jar 文件在我下载的 4.1.8 hibernate 中为 .rar 格式。当我提取时，我找不到 .jar 文件。提取后在哪里可以找到 .jar 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:30:46.797

您可以从 hibernate 官方网站下载 jars：http: [//sourceforge.net/projects/hibernate/files/hibernate4/](http://sourceforge.net/projects/hibernate/files/hibernate4/)

下载 jars 后；请将它们放在您的**CLASSPATH**中，以便您在 eclipse 中的代码可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T09:23:29.653

从此[链接](http://sourceforge.net/projects/hibernate/files/hibernate4/4.1.8.Final/)下载hibernate Jar 。

下载 zip 后将其解压缩并将 jar 复制`hibernate-release-4.1.8.Final/lib`到您的`classpath`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T09:17:07.133

[请从http://www.hibernate.org/downloads](http://www.hibernate.org/downloads)下载最新的 jars

添加那些罐子游览类路径和快乐的 ORM 持久性！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-06T05:24:21.097

**右键单击您的项目 -> 属性 -> 构建路径 -> 配置构建路径 -> 选择 Librey。**

在右侧角落你看到一个内容添加外部 jarfile 选择它。然后复制所有你想要**的jar文件。**然后来到你的项目并粘贴它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-12-03T16:27:56.853

转到您的项目 web-inf 然后您将获得 lib 文件夹。复制所有的休眠和 jdbc 文件并简单地粘贴到那里。

# knockout.js - Kendo Knockout：使用 kendo.data.dataSource 加载 treeView

> ID：14396455
> 
> 赞同：0
> 
> 时间：2013-01-18T10:01:44.417
> 
> 标签：knockout.js, kendo-ui

目前 kendo-knockout 库不支持将 kendo.data.dataSource 传递到绑定中。我能够使用我的帖子更新中的小部件参考示例加载带有 kendo 数据源的 treeView：[Kendo-Knockout：使用带有 kendo 数据源的敲除视图模型来填充 kendoTreeView](https://stackoverflow.com/questions/14331804/kendo-knockout-use-knockout-view-model-with-kendo-datasource-to-populate-kendot)。但是无法向其中添加和删除项目以及其他一些问题。我正在根据 RP Niemeyer 在 github 上的评论写这个问题：

[https://github.com/rniemeyer/knockout-kendo/issues/6](https://github.com/rniemeyer/knockout-kendo/issues/6)

说如果我通过类似的东西`data: false, dataSource: yourDataSource`和这个小提琴这应该是可能的：

[http://jsfiddle.net/rniemeyer/s5G5k/](http://jsfiddle.net/rniemeyer/s5G5k/)

按照这个例子，我尝试实现treeView：

[http://jsfiddle.net/s5G5k/6/](http://jsfiddle.net/s5G5k/6/)

但我收到一个错误：`Cannot call method 'toLowerCase' of undefined`

所以我的问题是这可以工作吗，然后我可以向数据源添加/删除对象并相应地查看视图更新吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:33:19.320

我真的需要重新考虑添加将数据源直接传递到小部件的功能。

目前的一种解决方案是将树视图包装在“with”绑定中，并在添加/删除项目时重新渲染它。

也许像：

```
<div data-bind="with: treeView">
    <div id="reportGrid" data-bind="kendoTreeView: { dataSource: treeViewDataSource }"></div>
</div> 
```

[http://jsfiddle.net/rniemeyer/6VZxB/](http://jsfiddle.net/rniemeyer/6VZxB/)

# php - 如何 preg_split 字符串？

> ID：14396456
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:01:47.120
> 
> 标签：php

我希望使用 preg_split 像电话号码一样显示一个数字：

```
$number = '1234567890';
// preg_split
$number = '123 456 7890'; 
```

例如也许：

```
implode(' ', preg_split('/pattern/', $number)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:06:31.153

```
$number = '1234567890';
$number = preg_replace('/(\d{3})(\d{3})(\d{4})/','$1 $2 $3',$number); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:05:54.003

试试这个-

```
$str = "1234567890";
$split = str_split($str, 3);
echo $split[0]." ".$split[1]." ".$split[2].$split[3]; 
```

或者

```
 $number= "1234567890";
    echo substr($number,0,3)." ".substr($number,3,3)." ".substr($number,5); 
```

# javascript - 简单的 javascript 浏览器检查器

> ID：14396461
> 
> 赞同：1
> 
> 时间：2013-01-18T10:01:57.120
> 
> 标签：javascript, html, browser

我知道这很简单，但我似乎无法让它发挥作用。当页面加载时，它会检查浏览器。如果它的 chrome 我希望它隐藏一个 div，但如果它有任何其他内容则显示它。

它检测到浏览器正常，因为我使用警报进行了检查，但隐藏位没有。你能帮我吗

```
function browserTest() {
    var browser = /Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent);
    if (browser) {
        document.getElementById("chromeBox").style.visibility = "hidden";
        //alert("chrome");
    }
    else {
        document.getElementById('chromeBox').style.visibility = 'visible';
        //alert("not chrome");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:33:07.240

非常感谢大家。它现在可以工作了，只需要在 div 之后调用该函数。我是 javascript 的新手，所以我仍然会犯这样的基本错误。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:15:16.210

似乎我们无法弄清楚您的 DOM 会发生什么，所以这里有一个例子：http: [//jsfiddle.net/mgechev/uwc3B/2/](http://jsfiddle.net/mgechev/uwc3B/2/)

这是代码：

**JavaScript**

```
function browserTest() {
    var browser = /Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent);
    if (browser) {
        document.getElementById("chromeBox").style.visibility = "hidden";
        //alert("chrome");
    }
    else {
        document.getElementById('chromeBox').style.visibility = 'visible';
        //alert("not chrome");
    }
}
browserTest(); //should be called on DOM ready 
```

**HTML**

```
<div id="chromeBox">
It's not Chrome!
</div> 
```

**CSS**

```
#chromeBox {
  width: 100px;
  height: 100px;
  background: #ccc;
  position: absolute;
} 
```

您应该`browserTest`在正文末尾或准备好 DOM 时调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:18:34.923

您可能在这里遇到一些问题：

1)`browserTest`在 div 实际加载之前执行（`<head>`例如，如果它在代码如下的部分中执行）：

```
<head>
  <script>
     function browserTest() { .... }
     browserTest(); - div is not loaded here yet and getElementById will return nothing.
  </script> 
```

要解决这个问题 - 将该脚本部分放在 chromeBox div html 标记之后或在 onload 事件中执行 browserTest（这将保证 div 已经加载并且 getElementById 会找到它）：

```
<head>
  <script>
     function browserTest() { .... }         
  </script>
....
</head>
<body onload="browserTest()">
  .... 
```

2）检查您的 div 是否真的有 ID `chromeBox`。ID 区分大小写，所以`document.getElementById("chromeBox")` 找不到`<div id="ChromeBox">`

请记住，visibility:hidden 将使 div 不可见，但仍会为其保留空间。也许你应该更好地使用 style.display = "none"/style.display = "block"

另外，学习如何使用开发者工具。所有浏览器都有。对于 firefox，您可能需要安装 Firebug。只需使用 F12 调用它并检查控制台以查看那里是否显示任何错误。

# android - MonoDroid - 如何以编程方式获取布局中定义的小部件的自定义属性值

> ID：14396472
> 
> 赞同：3
> 
> 时间：2013-01-18T10:02:50.787
> 
> 标签：android, android-widget, xamarin.android

我正在尝试以编程方式获取自定义小部件的自定义属性的值。

小部件扩展了 LinearLayout，我定义了自定义属性如下：

```
<declare-styleable name="CustomWidget">
    <attr name="customProperty" format="string" />
</declare-styleable> 
```

并且当前正在尝试访问“customProperty”的值，如下所示：

```
public CustomWidget(Context context, IAttributeSet attrs)
    : base(context, attrs)
{
    var a = context.ObtainStyledAttributes(attrs, Resource.Styleable.CustomWidget);
    var s = a.GetString(Resource.Styleable.CustomWidget_customProperty);
} 
```

我也尝试在 OnFinishInflate() 方法中调用此代码，但没有运气。

值得一提的是，这个小部件位于一个单独的 android 库项目中，而不是它正在使用的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:51:04.567

我在[MonoDroid.ActionBar](https://github.com/Cheesebaron/MonoDroid.ActionBar)中工作得很好。因此，当您尝试使用自定义属性时，您可能会陷入困境。您必须记住在您的 XML 中声明一个 xmlns 命名空间并将其引用到您的应用程序的正确命名空间。

因此，假设您的命名空间是`My.Awesome.App`您包含`CustomWidget`某处的位置，那么您的`axml`布局可能如下所示：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:cs="http://schemas.android.com/apk/res/my.awesome.app"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <my.awesome.app.CustomWidget
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        cs:customProperty="Awesome!"
        />
</LinearLayout> 
```

因此请注意，`cs`已经声明了一个 xmlns 命名空间，并且在您的`CustomWidget`声明中使用它`axml`来将字符串传递`Awesome!`给您的自定义布局。

现在你应该能够`customProperty`在你的构造函数中获得`CustomWidget`：

```
//Custom Attributes (defined in Attrs.xml)
var a = context.ObtainStyledAttributes(attrs, Resource.Styleable.CustomWidget);

var awesomeProperty = a.GetString(Resource.Styleable.CustomWidget_customProperty);
if (null != awesomeProperty)
    //do something with it...

//Don't forget to recycle it
a.Recycle(); 
```

# jasper-reports - iReport：如何硬固定细节带的高度，独立于它的内容

> ID：14396475
> 
> 赞同：0
> 
> 时间：2013-01-18T10:03:08.697
> 
> 标签：jasper-reports, height, ireport

我使用 iReport 并尝试独立于其内容来修复细节带的高度。我的问题是，如果我的一个文本字段超过一行，则乐队*“增长”*，因此我得到第二页。

那么是否有可能硬固定细节带的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:01:08.947

尝试将文本字段的拉伸类型设置为“No Stretch”，并将详细信息带的拆分类型（请参阅属性菜单）设置为“Prevent”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T06:15:27.023

Since we could not find any direct options, We are doing this in an indirect method, having PLSQL Procedure for data fetching, different sub-datasets are used for filling fixed height detail areas, so each fixed datasets are filled with max.rows which it can accomodate (within sub procedures). Hope it helps someone.

# php - 理解异常

> ID：14396476
> 
> 赞同：4
> 
> 时间：2013-01-18T10:03:13.513
> 
> 标签：php, exception

我已经阅读了有关试图了解 php 中使用哪些异常的文章的文章，并且我已经阅读了论坛中已经给出的答案。对我来说至少有一些意义的答案之一是：[php 中的异常真的那么有用吗？](https://stackoverflow.com/questions/3549344/are-exceptions-in-php-really-that-useful)

这是一个简单的函数，用于在使用和不使用异常（[source](http://ulyssesonline.com/2009/10/18/understanding-php-exception-handling/)）的情况下查找整数的倒数：

**除了：**

```
function inverse($x) {
  if ($x==0) { 
     throw new Exception('Division by zero.');
  } else { 
     return 1/$x;
  }
}    

try {
  inverse();
} 
catch (Exception $e) {
  echo $e->getMessage();
} 
```

**没有例外：**

```
function inverse($x) {
  if ($x==0) { 
     echo "I'm zero. Don't let me be the denominator."; 
  } else { 
     return 1/$x;
  }
} 
```

所以这是我的问题，**为什么以及何时应该使用一个而不是另一个**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:06:16.660

> 为什么以及何时应该使用其中一个？

哦，这很简单：你永远不应该使用“无例外” :) 不要滥用返回值作为状态标志。这是早期的一个坏习惯，只会让事情变得更加复杂，因为你必须一遍又一遍地检查返回值甚至它们的类型。

如果你有一个函数`inverse()`，它唯一应该做的就是“逆”。如果它做不到，那就是例外情况，因此（您可能会猜到）例外。

总结一下：当出现阻止函数/方法正常工作并且函数/方法无法自行处理的情况时，抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:13:20.790

关于“何时使用异常”有各种意见。我个人的看法是：

*   如果您正在*使用自己的代码*，则基本上不需要抛出异常，因为您需要为它编写自己的处理程序 - 这也可以在不抛出异常的情况下完成。
*   如果您正在开发*其他*程序员正在使用的 API，那么抛出异常可能很有用，因此使用*您的*代码的开发人员知道，他必须处理错误，并了解错误原因。（而不仅仅是让`null`他可能会抓住`NumberToSmallException`, `NotANumberException`, ....）

换句话说：当您已经知道如何处理出现的异常时 - 不要抛出它。如果处理应该由另一个开发人员决定，请使用您的代码 - 扔掉它。

*不应*使用异常来控制应用程序逻辑的流程。因此使用 if / else 语句。

但这些只是我的十美分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:06:44.823

尤其是当您使用面向对象编程时，异常非常方便。例如，在您使用数据库库的应用程序中，当它无法建立连接时会引发异常。在这种情况下，您可以在某处捕获该异常，并显示一个特殊页面，告诉用户数据库不工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:06:48.673

当一个方法调用多个级别时，异常的最佳用法可能会发生。

想像我调用方法A，然后调用方法B，然后调用方法C。发生这种情况时，如果不使用异常，方法A必须知道方法B的所有不同类型的错误消息。而方法B必须知道C也是一样的。但是通过使用异常，可以很容易地捕获方法 C 的错误，而无需方法 A 和 B 的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T10:07:22.700

当您的脚本遇到错误时，应该使用异常，在示例中，您不能除以零，因此您有一个逻辑错误，因此异常是合适的。

使用异常可以让您看到更好的错误消息，并且在调试时会有所帮助，而不是简单地打印出可能是任何内容的字符串。此外，您可以**捕获**异常，以便检测何时出现问题，而简单地输出字符串并没有多大帮助。

查看[有关此的 PHP 文档以](http://php.net/manual/en/language.exceptions.php)获取更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T10:14:07.317

在编写复杂和/或可扩展的软件时，异常是一种非常宝贵的工具，但是说返回值不利于报告异常，恕我直言，这是一种过于简单甚至教条的方法。

在这种特定情况下，返回一个`null`值是完全合理的，如“不存在反参数”。对我来说，最重要的一点是它`inverse`实际上并没有*做*任何事情；它只是*提供一些信息*（即它是“只读的”，它绝对没有副作用）。

请注意，“绝对没有副作用”也是一个很好的经验法则，这意味着您绝对不应该`echo`在函数内部，除非回显是它首先存在的原因。

如果期望在`inverse`成功调用后程序的状态会发生变化并且`inverse`由于任何原因无法执行此更改（也许它传递了错误的参数；也许它需要的资源不可用；等等）那么你绝对应该抛出一个异常并让调用者决定如何处理错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T10:15:45.757

可以这样想：

有时，值`$x`来自用户（例如，来自 HTML 表单或其他东西），在这种情况下，您希望显示错误（可能类似于`"The frobing level needs to be different than zero"`）。

其他时候，您从数据库中获取值，在这种情况下，告诉用户有关 frobing 级别或类似的东西是无用的，您将希望在服务器上的某处显示错误页面并记录详细信息（甚至向管理员发送电子邮件）。

对于第二个示例，实际上不可能控制发生错误时发生的情况（每次都打印相同的消息）。

正确的做法是让调用函数的代码决定发生错误时会发生什么。例外是这样做的一种方式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-18T10:20:15.803

使用异常有两个主要好处：

1.  它们通过执行堆栈（这意味着如果您有几个嵌套函数，则不必重新传递错误值，这是自动完成的。
2.  语句之后的第一段代码是`throw()`语句中的代码`catch()`。这意味着您不必对您拥有的每个嵌套函数/方法进行数百次检查。

考虑到此功能，使用返回值在简单情况下（例如您的情况）很有用。在复杂的情况下，你有 10-20-30 条不同的错误消息可以出现在执行堆栈的不同级别，使用异常是必须的，否则其他开发人员（/甚至你几个月后）在调试时会遇到重大问题.

这是我在这个问题上的 2 美分，希望它有所帮助。

PS：将异常记录在`exceptions.log`.

# c# - Nservice 总线端点命名

> ID：14396477
> 
> 赞同：2
> 
> 时间：2013-01-18T10:03:18.003
> 
> 标签：c#, asp.net, nservicebus

我正在尝试掌握 NSerivceBus，虽然它大部分进展顺利，但我正在努力了解如何配置 EndPointName。

因此，例如，在遵循几个示例之后，我设法提出了以下内容，但是我更改端点名称的任何尝试都失败了。

所以 myServer 队列目前是它的名字，我认为是从这里的命名空间中获取的：

```
 namespace MyServer
{
    class EndPointConfig : IConfigureThisEndpoint, AsA_Server
    {
    }
} 
```

但是当我放置 [EndpointName("AnotherQueue")] 时，没有任何变化（除了它没有填充 myServer 队列。

我还尝试更改 Global.ASAX：

```
public static IBus Bus { get; set; }
        void Application_Start(object sender, EventArgs e)
        {
            Bus = NServiceBus.Configure.With()
                .Log4Net()
                .DefaultBuilder()
                .DefineEndpointName("AnotherQueue")
                .XmlSerializer()
                .MsmqTransport()
                    .IsTransactional(false)
                    .PurgeOnStartup(false)
                .UnicastBus()
                    .ImpersonateSender(false)
                .CreateBus()
                .Start();
        } 
```

但同样，它没有工作。

我正在通过查看 mmc 并检查在那里排队的消息来测试它。

最后我尝试改变 web.config

```
<configSections>
        <section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NserviceBus.Core"/>
        <section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core"/>
    </configSections>

    <MsmqTransportConfig ErrorQueue="error" NumberOfWorkerThreads="1" MaxRetries="5"/>

    <UnicastBusConfig>
        <MessageEndpointMappings>
            <add Messages="MyMessage" Endpoint="AnotherQueue"></add>
        </MessageEndpointMappings>
    </UnicastBusConfig> 
```

仍然一无所有。

有人能帮忙吗？我仍在努力解决这个问题（这对我来说是一项新技术），所以如果我问得不好这个问题，我很抱歉。

提前感谢莱克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T19:24:48.487

几件事：

我不是 100% 确定，但如果您在 Web 应用程序中托管，我认为您不想使用 IConfigureThisEndpoint 和 AsA_Server。我相信您在 Application_Start 中拥有的配置代码就是您所需要的。另一种配置方式是当您在 NSB 自己的进程中托管时（作为 Windows 服务或控制台）。

尝试将`DefineEndPointName("AnotherQueue")`作为第一个命令放在`NServiceBus.Configure.With()`. 这就是我设置它的方式并且它可以工作，我相信 With() 之后的命令顺序确实很重要，并且可以静默失败（我认为这将在未来的版本中解决）。

根据您要完成的任务，您可能根本不需要 unicastbus 配置。这用于在*客户*端定义端点——换句话说，使用它来定义您的应用程序想要与之通信的端点。

最后，在运行 Web 应用程序时使用它的调试窗口来查找可能出现问题的线索。NSB 在调试模式下会产生很多非常有用的日志信息，所有这些都应该发送到调试窗口。可能是您的应用程序没有创建队列的权限，或者类似的东西。一旦我弄清楚了这一点，解决许多“学习曲线问题”就变得容易多了。

# c# - c#根据模式生成随机字符串

> ID：14396482
> 
> 赞同：2
> 
> 时间：2013-01-18T10:03:35.227
> 
> 标签：c#, regex

我正在尝试基于模式进行简单的字符串生成。
我的想法是使用正则表达式进行简单的替换。我从简单的方法开始：

```
private static string parseTemplate(string template)
{
    return Regex.Replace(template, @"(\[d)((:)?([\d]+)?)\]", RandomDigit());
}

private static string RandomDigit()
{
    Random r = new Random();
    return r.Next(0, 9).ToString();
} 
```

现在这样做是用应该是随机数字的组来替换`[d]`,之类的组。 不幸的是，每个组都被相同的数字替换，例如，如果我把我的方法将返回。 我想在每个地方得到不同的数字，比如.`[d:3]`
`test [d][d][d:3]``test 222`
`test 361`

我遇到的第二个问题是处理长度的方法：

现在我必须`[d]`为我想要的每个数字指定，但指定`[d:3]`并获得相同的输出会更容易。

**我知道有一个名为[Fare](https://github.com/moodmosaic/Fare)的项目，但我想在没有这个库的情况下这样做**

现在我只搜索`[d]`，但是这种方法可以正常工作吗？添加其他组不会有问题，例如：`[s]`对于特殊字符或任何其他类型的模式。

**编辑1**

正如建议的那样，我将 Random 更改为静态变量，如下所示：

```
private static string parseTemplate(string template)
    {
        return Regex.Replace(template, @"(\[d)((:)?([\d]+)?)\]", RandomDigit());
    }

    private static Random r = new Random();

    private static string RandomDigit()
    {
        return r.Next(0, 9).ToString();
    } 
```

问题是当我这样调用我的代码时：

```
Console.WriteLine(parseTemplate("test [d:2][d:][d]"));
Console.WriteLine(parseTemplate("test [d:2][d:][d]")); 
```

我得到这样的输出

```
test 222
test 555 
```

我想要这样的输出（例如）：

```
test 265
test 962 
```

我认为这个问题是`Regex.Replace`我只调用`RandomDigit`一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:05:45.287

对于您的第一个问题：当您调用`new Random()`时，每次调用函数时都使用相同的值进行播种 - 初始化一个静态`Random`成员变量，然后返回`r.Next(0,9).ToString();`

## 编辑：

在回答您的评论时，请尝试将 MatchEvaluator 与委托一起使用，如下所示（未经测试）：

```
static string RandomReplacer(Match m)
{
    var result = new StringBuilder();
    foreach (char c in m.ToString())
        result.Append(c == 'd' ? RandomDigit() : c);
    return result.ToString()
}

private static string parseTemplate(string template)
{
    return Regex.Replace(template, @"(\[d)((:)?([\d]+)?)\]", new MatchEvaluator(RandomReplacer));
} 
```

然后，您可以扩展此方法以匹配`[d:3]`并相应地在您的 MatchEvaluator 中解析它，从而解决您的第二个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:31:03.187

Assumnig`[d:3]`表示“三个随机数字”，下面`MatchEvaluator`使用长度（从第 4 组读取）生成随机数字字符串：

```
static string ReplaceSingleMatch(Match m)
{
    int length;
    if (!int.TryParse(m.Groups[1].Value, out length))
        length = 1;
    char[] chars = new char[length];
    for (int i = 0; i < chars.Length; i++)
        chars[i] = RandomDigit()[0];
    return new string(chars);
} 
```

然后，您可以按如下方式调用它：

```
private static string parseTemplate(string template)
{
    return Regex.Replace(template, @"\[d(?::(\d+))?\]", ReplaceSingleMatch);
} 
```

然后，您可能希望更改`RandomDigit`为返回单个`char`而不是字符串，或者采用`int`并返回多个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:48:39.540

```
private static string GenerateMask(string mask)
{
    StringBuilder output = new StringBuilder();
    for (int i = 0; i < mask.Length; i++)
    {
        if (mask[i] == 'd' && mask[i - 1] != '\\')
        {
            int quantifier = 1;

            if (mask[i + 1] == ':')
                Int32.TryParse(mask[i + 2].ToString(), out quantifier);

            output.Append(GetRandomDigit(quantifier));
            i += 2;
        }
        else
        {
            if(mask[i] != '\\')
            output.Append(mask[i]);
        }
    }

    return output.ToString();
}

private static string GetRandomDigit(int length)
{
    Random random = new Random();
    StringBuilder output = new StringBuilder();
    while (output.Length != length)
        output.Append(random.Next(0, 9));
    return output.ToString();
} 
```

有一个自定义算法我只是为了好玩而放在一起，这里是实现：

```
Console.WriteLine(GenerateMask(@"Hey Da\d, meet my new girlfrien\d she's d:2"));
//Output: Hey Dad, meet my new girlfriend she's 44 
```

# javascript - 动态计算并显示列表中的列表项总数？

> ID：14396483
> 
> 赞同：1
> 
> 时间：2013-01-18T10:03:35.437
> 
> 标签：javascript, jquery, html, html-lists, nested-lists

我在边栏中使用列表，我想显示该列表中有多少项目的标签编号。

我在这里创建了一个 JSFiddle [http://jsfiddle.net/WRVgW/](http://jsfiddle.net/WRVgW/)来演示列表和我想要实现的目标。我确信这可以通过 Jquery 实现，但我不确定如何以及正在寻找一些指导。

在我的示例中，我已经硬编码了`34`我希望根据下面的列表动态生成数字的数字。

我评论的 HTML 代码粘贴在下面，但可能更容易在[http://jsfiddle.net/WRVgW/中的结果中看到它](http://jsfiddle.net/WRVgW/)

```
<div id="sidebar">
<ul class="sidebarSections">
    <li class="submenu">
    <a href="#"><span>Design Projects</span><!--This is the name of the project-->
    <span class="label">34</span></a><!--This is the number which I want to display the number of li items below dynamically (should be 3)-->
        <ul>
            <li><a>Project x</a></li>
            <li><a>Project y</a></li>
            <li><a>Project z</a></li>
        </ul>
    </li>

    <li class="submenu">
    <a href="#"><span>Tech Projects</span><!--This is the name of the project-->
    <span class="label">34</span></a><!--This is the number which I want to display the number of li items below dynamically (should be 5)-->
        <ul>
            <li><a>Project x</a></li>
            <li><a>Project y</a></li>
            <li><a>Project z</a></li>
            <li><a>Project y</a></li>
            <li><a>Project z</a></li>
        </ul>
    </li>

    <li class="submenu">
    <a href="#"><span>IA Projects</span><!--This is the name of the project-->
    <span class="label">34</span></a><!--This is the number which I want to display the number of li items below dynamically (should be 7)-->
        <ul>
            <li><a>Project x</a></li>
            <li><a>Project y</a></li>
            <li><a>Project z</a></li>
            <li><a>Project y</a></li>
            <li><a>Project z</a></li>
            <li><a>Project y</a></li>
            <li><a>Project z</a></li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:06:16.887

一种可能的解决方案：

```
$(".submenu .label").text(function() {
  return $(this).closest(".submenu").find("li").length;
}); 
```

**演示：http:** [//jsfiddle.net/WRVgW/1/](http://jsfiddle.net/WRVgW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:09:35.573

代码 (javascript) & id 你的 uls

```
var ul = document.getElementById("myul");
var liNodes = [];

for (var i = 0; i < ul.childNodes.length; i++) {
  if (ul.childNodes[i].nodeName == "LI") {
    liNodes.push(ul.childNodes[i]);
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:11:08.633

另外一个选项

```
$('.sidebarSections ul').each(function(){
    var liCount = $(this).find('li').length;
    $(this).closest('.submenu').find('span.label').text(liCount);
}); 
```

# java - 根据使用的操作系统在 Swing 中加载图像图标

> ID：14396487
> 
> 赞同：1
> 
> 时间：2013-01-18T10:03:44.267
> 
> 标签：java, swing, operating-system, imageicon

关于java中的图像图标以及如何限制可以从我的swing应用程序的下拉菜单中选择的图像图标有一个小问题。

我正在开发一个多平台java程序，并且无法根据使用的操作系统来限制您可以从下拉菜单中选择的图标。

例如。如果我在基于 Windows 的 PC 上选择一个 linux 图标，用户应该会收到一条小消息，说这不是 linux，而是再次选择 Windows。

到目前为止，我的代码的工作原理是它将加载图标没有错误等

```
 private String img[] = {
    "default.png",
    "window.png",
    "linix.png",
    "macos.png",
    "solaris.png"};

private ImgIcon[] icon = {
    new ImageIcon(getClass().getResource(img[0])),
    new ImageIcon(getClass().getResource(img[1])),
    new ImageIcon(getClass().getResource(img[2])),
    new ImageIcon(getClass().getResource(img[3])),
    new ImageIcon(getClass().getResource(img[4]))};

private void jComboBox1ActionPerformed(java.awt.event.ActionEvent evt)
{
if (IsWin())  {
    jTextArea1.setText("Detected OS : " + os);
    }
else if (IsMac()) {
    jTextArea1.setText("Detected OS : " + os);
    }
else if (IsLin()) {
    jTextArea1.setText("Detected OS : " + os);
    }
else  if(IsSol()) {
    jTextArea1.setText("\Detected OS : " + os);
    }
} 
```

![在此处输入图像描述](../Images/fb52f10fb65262fa55f6b8766bbab7a7.png)

到目前为止，它工作得很好，当您选择它显示的图标时，您会在 JTextArea 中收到一条小消息，告诉您您的操作系统是什么......只需要以某种方式提醒用户他们选择了错误的操作系统图标，如果他们是在另一个操作系统上！

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:13:20.373

```
 String osName = System.getProperty("os.name");
    if (osName.indexOf("Mac OS") > -1) {
        // Mac OS
    } else if (osName.indexOf("Windows") > -1) {
        // Windows
    } else if (osName.indexOf("Linux") > -1) {
        // Linux
    } else if (osName.indexOf("Solaris") > -1) {
        // Solaris
    } else {
        // Something else
    } 
```

[您可以在此处](http://www.javaneverdie.com/java/java-os-name-property-values/)获得这些值的更完整列表

在我看来，如果您不希望用户选择错误的值并且您知道您在哪个操作系统上，那么您的组合框是不必要的。

# facebook - Facebook FQL 多查询与批量请求

> ID：14396490
> 
> 赞同：1
> 
> 时间：2013-01-18T10:03:51.387
> 
> 标签：facebook, facebook-fql

我正在开发一个 Facebook 应用程序，我需要从用户那里获取大量数据。我担心 Facebook 的限制。我无法一一发送查询，我很快就会收到错误 4 “API Too Many Calls”。所以我想知道什么是更好的方法，如果将查询分组到多查询或批量发送它们。顺便说一句，我将不得不在批处理请求中使用多查询。所以这是一个例子:)

假设 USER_A 和 USER_B 是朋友，所以我可以使用 1 个访问令牌访问它们。

```
multiquery for USER_A:
"Q0":"SELECT post_id FROM stream WHERE source_id=<USER_A>",
"Q1":"SELECT id FROM comment WHERE post_id IN (SELECT post_id FROM #Q0)"

multiquery for USER_B
"Q2":"SELECT post_id FROM stream WHERE source_id=<USER_B>",
"Q3":"SELECT id FROM comment WHERE post_id IN (SELECT post_id FROM #Q2)" 
```

那么有什么更好的方法，将这 2 个多查询分组为 1 个更大的多查询或将它们放入批处理请求中？在哪种情况下，Facebook 会将其计为 1 个 API 调用？Facebook 有一些限制，例如每天 1 亿次 API 调用。因此，如果我批量发送我的 2 个多查询/更大的多查询，facebook 会将其计为 1 个 API 调用吗？

编辑：批量请求我的意思是这个[https://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

我不是在问我是否应该使用 FQL 或 Graph API，我想知道批量发送多查询和将它们作为 1 个更大的多查询发送之间是否有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:04:26.060

如果你可以用一个来做任何事情`access_token`，根据我的经验，一个大型的 FQL 多查询比批处理请求更快地返回结果。

此外，查看您的示例查询，您可以通过组合这些来减少查询数量：

```
'User_A_Comments': 
  "SELECT id, post_id FROM comment WHERE post_id IN (SELECT post_id FROM 
  (SELECT post_id FROM stream WHERE source_id=<USER_A>) )" 
```

批处理请求会给您带来的好处是您可以使用多个访问令牌一次性获取此信息。

# coldfusion - 使用数据格式时逗号无效

> ID：14396499
> 
> 赞同：2
> 
> 时间：2013-01-18T10:04:19.470
> 
> 标签：coldfusion, export-to-excel, coldfusion-10, dataformat, cfspreadsheet

这是我将查询输出到电子表格的代码。

```
<cfscript> 
  //Use an absolute path for the files. ---> 
  theDir=GetDirectoryFromPath(GetCurrentTemplatePath()); 
  theFile=theDir & "getTestInv.xls"; 
  //Create an empty ColdFusion spreadsheet object. ---> 
  theSheet = SpreadsheetNew("invoicesData"); 
  //Populate the object with a query. ---> 
  SpreadsheetAddRows(theSheet,getTestInv);
</cfscript>

<cfset format = StructNew()>
<cfset format.dataformat = "#,###0.00">
<cfset SpreadsheetFormatColumn(theSheet,format,10)

<cfspreadsheet action="write" filename="#theFile#" name="theSheet" sheetname="getTestInv" overwrite=true> 
```

我得到的错误是：

```
Invalid CFML construct found on line 125 at column 32.
ColdFusion was looking at the following text:

,

The CFML compiler was processing:

An expression beginning with /", on line 125, column 30.This message is usually caused by a problem in the expressions structure.
A cfset tag beginning on line 125, column 4.
A cfset tag beginning on line 125, column 4.

125: <cfset format.dataformat = "#,###0.00"> 
```

出于某种原因，它不喜欢逗号，即使根据[文档](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6747.html)它是有效的。如果我把逗号去掉，它会起作用，但我需要它来进行数千个分组。

有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T10:25:03.397

在 ColdFusion 中，# 是保留字符。要逃脱它，您必须将它们加倍以逃脱它们：

```
<cfset format.dataformat = "##,######0.00"> 
```

愚蠢的是，他们既没有在文档中说明这一点，也没有使用 9s 而不是 #s 遵循 ColdFusion 的格式化规则。

这是我完整的独立测试代码：

```
<cfset myQuery = QueryNew('number')>
<cfset newRow = QueryAddRow(MyQuery, 2)> 
<cfset temp = QuerySetCell(myQuery, "number", "349348394", 1)> 
<cfset temp = QuerySetCell(myQuery, "number", "10000000", 2)> 

<cfscript> 
  //Use an absolute path for the files. ---> 
  theDir=GetDirectoryFromPath(GetCurrentTemplatePath()); 
  theFile=theDir & "getTestInv.xls"; 
  //Create an empty ColdFusion spreadsheet object. ---> 
  theSheet = SpreadsheetNew("invoicesData"); 
  //Populate the object with a query. ---> 
  SpreadsheetAddRows(theSheet,myQuery,1,1);
</cfscript>

<cfset format = StructNew()>
<cfset format.dataformat = "##,######0.00">
<cfset SpreadsheetFormatColumn(theSheet,format,1)>

<cfspreadsheet action="write" filename="#theFile#" name="theSheet" sheetname="theSheet" overwrite=true> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:26:33.567

应该是这样的

```
<cfset format = StructNew()>
<cfset format.dataformat = "##,####0.00"> 
```

# jquery - jquery mobile listview隐藏和显示然后无法搜索

> ID：14396500
> 
> 赞同：2
> 
> 时间：2013-01-18T10:04:21.410
> 
> 标签：jquery, listview, search, mobile, hide

使用 Jquery Mobile 1.2 存在一个问题，如果您有一个列表视图，并且您隐藏然后显示子项，则无法搜索所述子项。

无需用文字解释，请参阅：http: [//jsfiddle.net/bodgybrothers/bw2ZV/](http://jsfiddle.net/bodgybrothers/bw2ZV/)

加载时它会创建两个列表视图子项和搜索框。然后它隐藏并显示第二个孩子。通过搜索此列表，即使没有搜索匹配，也始终显示第二个孩子。

我相信这是 jquery mobile 中的一个错误，但想知道是否有一种解决方法可以在 show 方法之后使所有元素都可搜索。

```
$('#li-nav').append('<li id="1"><a href="#page1">Page 1</a></li>')
$('#li-nav').append('<li id="2"><a href="#page2">Page 2</a></li>').listview('refresh');
$('#2').hide();
$('#2').show(); 
```

编辑：我制定了一种可以追溯到 javascript 而不是使用 jquery 库的方法。隐藏和显示功能如下所示：

```
function showStuff(id) {
    document.getElementById(id).style.display = '';
}
function hideStuff(id) {
    document.getElementById(id).style.display = 'none';
} 
```

更新了 JSfiddle [http://jsfiddle.net/bodgybrothers/uwnCY/](http://jsfiddle.net/bodgybrothers/uwnCY/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T19:09:58.090

您已经有一个解决方法，但另一个更简单的解决方法（对于那些有同样问题的人） - 是执行 addClass("hide") 或 removeClass("hide") 而不是 .show / .hide。这不再中断搜索。

```
css:
.hide {display:none;}   

JQuery: 
$('#li-nav').append('<li id="1"><a href="#page1">Page 1</a></li>');
$('#li-nav').append('<li id="2"><a href="#page2">Page 2</a></li>');
$('#li-nav').listview('refresh');
$('#2').addClass('hide');
$('#2').removeClass('hide');
('<li>').listview('refresh'); 
```

见jsfiddle：http: [//jsfiddle.net/Q8Cfj/1/](http://jsfiddle.net/Q8Cfj/1/)

# java - 如何在多对多关系中使用现有记录并避免违反唯一约束（休眠）

> ID：14396501
> 
> 赞同：2
> 
> 时间：2013-01-18T10:04:23.650
> 
> 标签：java, hibernate, many-to-many, unique-constraint

 在多对多关系中有两个类，Person 和 Vehicle。如果创建了新人员或更新了现有人员的记录（例如添加了车辆记录），则最好使用现有的车辆记录（如果存在）。

 问题是如何实现它。插入或更新之前的查询不是一个选项，因为有许多线程可以更新或插入。

 此时应用程序检查唯一约束异常，当它被捕获时，新的现有车辆对象被替换为“注册”列从数据库中查询的对象。这个解决方案正在工作，但它似乎有点笨拙，因为必须为每个车辆记录创建一个单独的会话。

有什么方法可以通过休眠注释来实现所需的行为？还是完全不同的解决方案？谢谢。

```
@Entity
@Table(name="PERSON", uniqueConstraints = { @UniqueConstraint(columnNames = "name", name="NAME_KEY") })
public class Person  implements Serializable {
  private static final long serialVersionUID = 3507716047052335731L;

  @Id
  @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="PersonIdSeq")
  @SequenceGenerator( name = "PersonIdSeq", sequenceName="PERSON_ID_SEQ")
  private Long id;

  @Index(name="PERSON_NAME_IDX")
  private String name;

  @ManyToMany(targetEntity=Vehicle.class, cascade={CascadeType.PERSIST, CascadeType.MERGE})
  @JoinTable(name="PERSON_VEHICLE_LNK", joinColumns=@JoinColumn(name="PERSON_ID"),inverseJoinColumns=@JoinColumn(name="VEHICLE_ID"),
     uniqueConstraints = { @UniqueConstraint(columnNames = {"PERSON_ID", "VEHICLE_ID"}, name="person_vehicle_lnk_key")})
  @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="PersonVehicleLnkIdSeq")
  @SequenceGenerator(name = "PersonVehicleLnkIdSeq", sequenceName="PERSON_VEHICLE_LNK_ID_SEQ")
  @CollectionId(columns = @Column(name="ID"), type=@Type(type="long"), generator = "PersonVehicleLnkIdSeq")
  private List<Vehicle> vehicle = new ArrayList<>();
  ...

@Entity
@Table( name = "VEHICLE", uniqueConstraints = {@UniqueConstraint(columnNames="registration", name="REGISTRATION_KEY")}  )
public class Vehicle implements Serializable {
  private static final long serialVersionUID = -5592281235230216382L;

  @Id
  @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="VehicleIdSeq")
  @SequenceGenerator( name = "VehicleIdSeq", sequenceName="VEHICLE_ID_SEQ")
  private Long id;

  @Index(name="REGISTRATION_IDX")
  private String registration;
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:37:59.550

> 插入或更新之前的查询不是一个选项，因为有许多线程可以更新或插入。

但这是如何做到的。

如果是性能问题（我不这么认为），那么考虑使用二级缓存。第一级无法处理此问题，因为它绑定到一个会话，并且每个线程至少需要一个会话。

`Person`然后您需要在和中都有一个版本列`Vehicle`。

在您的应用程序中，您已经遇到了以下问题： 1\. 用户 A 加载了个人记录。2\. 用户 B 加载相同的人员记录。3\. 用户A修改电话号码并保存Person记录。4\. 用户 B 修改了地址，也保存了人员记录。=> 结果：用户A的修改（电话号码更改）被覆盖，记录有旧的电话号码，没有人知道这个问题。

版本列避免了这个问题。当有版本列时，Hibernate 在步骤 4 中发现记录同时被修改并抛出异常。必须捕获此异常，并且必须告知用户 B 重新加载记录并重做他的地址更改。这迫使用户 B 做一些额外的工作（不多，因为这种情况很少发生），但不会丢失任何信息，并且数据库包含正确的信息。

当第一次阅读时没有找到记录时，您必须做同样的事情，但在插入时发现约束违规。你已经发现了这个错误，但你没有通知用户，你可能应该这样做。

在 Hibernate 级别对此没有简单的解决方案，因为应用程序逻辑必须处理这种情况（例如通知用户）。

# internet-explorer - 使用 webdriver 在 IE8 上启动应用程序后无法执行任何操作

> ID：14396507
> 
> 赞同：0
> 
> 时间：2013-01-18T10:05:11.907
> 
> 标签：internet-explorer, internet-explorer-8, automation, webdriver, selenium-webdriver

我正在使用
Selenium 独立服务器 - 2.25.0
IE - 8.0.6001.18702（32 位）
IEDriverServer - 2.25.1.0
Java - SDK6
OS - Win Xp 32 位

代码：

```
 System.setProperty("webdriver.ie.driver", "Path to IEDriverServer.exe");
    driver.get("http://www.naukri.com/");
     // Used Wait before entering text.
    driver.findElement(By.id("qp")).clear();
    driver.findElement(By.id("qp")).sendKeys("java j2ee");
    driver.findElement(By.id("ql")).clear();
    driver.findElement(By.id("ql")).sendKeys("chennai");
    driver.findElement(By.linkText("Create a new Job Alert")).click(); 
```

我使用上面的代码来启动 IE8。我能够在 IE 中成功启动并打开应用程序。但是，之后我无法在打开的网页上执行任何操作。

1.  我将 IE 保护模式设置为所有四个高级别的。
2.  设置 IEDriverServer.exe 的路径
3.  将浏览器缩放级别设置为 100%

我做了以上所有，我阅读了很多论坛，但我没有得到答案。

我使用相同的代码并在另一台机器上运行。它在那里工作得很好。第二台机器配置是

Selenium 独立服务器 - 2.25.0
IE - 8.0.7601.17514（64 位）
IEDriverServer - 2.25.1.0
Java - SDK7
操作系统 - Win 7 专业版

我不知道确切的问题是什么？我试图找到根本原因，但我没有。
请帮我解决问题。
提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:45:15.587

有很多事情要考虑：

更新 Selenium，它是**v2.28**。

切换到使用**Chrome**或**Firefox**驱动程序，以查看是否存在 IEDriver 或其他问题。

您也误解了 IE 的“保护模式”的含义。您正在破坏安全区域，这是不同的。

参考这张图片：

[http://www.ivertech.com/images/internetExplorer7/IE7UncheckEnableProtectedModeCheckBox.gif](http://www.ivertech.com/images/internetExplorer7/IE7UncheckEnableProtectedModeCheckBox.gif)

每个区域都有自己的**保护模式**设置。取消选中所有区域。

如果你没有那个复选框，有两件事：它可能被你的 IT 管理员禁用，如果你有一个，因此我们无能为力 - 你必须与你的 IT 团队交谈，**并**截图显示你有*什么*。

而不是使用隐式超时，实际上将其包装在一个`WebDriverWait`条件中：

[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html)

如果它在合理的超时（1 分钟）后失败，那么我们知道还有其他问题。不要使用隐式等待函数。

还可以看看你是否可以通过不同的方式访问元素，例如使用这个 CSS 选择器：

```
input.w327 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:46:15.723

根据您收到的错误消息，您是在页面完全加载之前在字段中输入值。您使用的等待时间足以加载页面。用这个

```
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS); 
```

或者

增加等待时间。如果您使用的是 Thread.sleep(10000); 在您的代码中，然后将其增加到 Thread.sleep(20000); 它会起作用的。

# struts2 - 删除默认操作验证

> ID：14396508
> 
> 赞同：0
> 
> 时间：2013-01-18T10:05:11.957
> 
> 标签：struts2, struts-validation

我通过将操作扩展到 ActionSupport 来使用 Struts 验证。

当我尝试在 UI 上放置特殊字符时，默认 actionErrors 在集合中添加，例如**在输入中检测到非法字符，请删除它们并重试。**

然后我需要删除 UI 上出现的默认验证。我不知道如何处理它。

我的代码是这样的：

```
void validate(){  
    if (locationBean.getReasonTypeId() == 0)  
   {  
     addActionError("Error in reason");  
    }  
      if (ValidationHelper.checkRequiredField(locationBean.getName()))  
    {  
      addActionError("Error in Location name");  
    }  
} 
```

我的验证动作类是这样的：

```
public class ValidationErrorJSONAction extends ActionSupport  
{  
  private JSONObject jsonObject;  

  @SuppressWarnings("unchecked")  
  public String execute() throws Exception  
  {    
    jsonObject = new JSONObject();  
    jsonObject.put("actionErrors", new JSONArray(getActionErrors()));  
    jsonObject.put("fieldErrors",new JSONObject(getFieldErrors()));  
    TokenHelperJSON.appendToken(jsonObject);  

    return SUCCESS;  
  } 
```

希望它能帮助您理解问题。

# eclipse - Eclipse 靛蓝无法启动

> ID：14396510
> 
> 赞同：2
> 
> 时间：2013-01-18T10:05:36.230
> 
> 标签：eclipse

这是日志文件中的内容：

```
eclipse.buildId=M20120208-0800
java.version=1.7.0_11
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Command-line arguments:  -os win32 -ws win32 -arch x86

!ENTRY org.eclipse.osgi 4 0 2013-01-18 09:16:30.495
!MESSAGE Startup error
!STACK 1
java.lang.UnsatisfiedLinkError: sun.nio.ch.IOUtil.iovMax()I
    at sun.nio.ch.IOUtil.iovMax(Native Method)
    at sun.nio.ch.IOUtil.<clinit>(Unknown Source)
    at sun.nio.ch.Util.<clinit>(Unknown Source)
    at sun.nio.ch.FileChannelImpl.<clinit>(Unknown Source)
    at java.io.RandomAccessFile.getChannel(Unknown Source)
    at org.eclipse.core.runtime.internal.adaptor.Locker_JavaNio.lock(Locker_JavaNio.java:39)
    at org.eclipse.osgi.storagemanager.StorageManager.lock(StorageManager.java:389)
    at org.eclipse.osgi.storagemanager.StorageManager.open(StorageManager.java:702)
    at org.eclipse.osgi.internal.baseadaptor.BaseStorage.initFileManager(BaseStorage.java:220)
    at org.eclipse.osgi.internal.baseadaptor.BaseStorage.initialize(BaseStorage.java:154)
    at org.eclipse.osgi.baseadaptor.BaseAdaptor.initializeStorage(BaseAdaptor.java:123)
    at org.eclipse.osgi.framework.internal.core.Framework.initialize(Framework.java:190)
    at org.eclipse.osgi.framework.internal.core.Framework.<init>(Framework.java:162)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.startup(EclipseStarter.java:261)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:175)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

这发生在我进行系统还原之后（我认为）恢复了 Java 更新。我该如何解决这个问题？我在eclipse中有很多东西，我不想再重做一遍。

ADD：
与此同时，我得到了 Juno，它似乎正在工作。但是，在我的 PC 上，juno 的快捷键和我使用的大约 12 个插件存在一些问题（它们还没有更新）。这些信息有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T12:48:44.227

似乎 Eclipse 正在使用 java 1.7。尝试使用不同的 vm 运行 Eclipse。安装 java 1.6 并编辑 eclipse.ini 添加下面的对应参数，如此处[所述](http://wiki.eclipse.org/Eclipse.ini#-vm_value%3a_Windows_Example)

-vm C:\Java\JDK\1.6\bin\javaw.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:24:50.040

备份您的 .metadata 文件夹，将其删除，然后尝试启动 Eclipse。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:57:31.707

最后我做到了！

我更新了java，重新启动，然后卸载了java，重新启动然后安装了java。

（重启是必要的，我试过不重启但没用）

现在它可以正常工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-02T13:40:49.073

遵循的步骤打开 eclipse.ini 文件您可以看到以下 2 行：

--launcher.defaultAction 打开文件

现在在 Blockquote 之间添加以下行，以根据您的 jdk 版本正确设置 vm

> 块引用

-vm

C:\Program Files\Java\jdk1.7.0_79\bin\javaw.exe

-XX:-UserCompressedOops

-vm

C:\Program Files\Java\jdk1.7.0_79\jre\bin\server\jvm.dll

> 块引用

-vmargs 之前

# c# - 删除参数后出错（“方法参数”错误）

> ID：14396512
> 
> 赞同：1
> 
> 时间：2013-01-18T10:05:45.277
> 
> 标签：c#, visual-studio-2010, constructor, arguments

我建立了一个名为“MemoryDB”的类（其 c'tor 接受 6 个参数）并为她创建了单元测试。直到今天一切正常 - 我尝试删除其中一个参数，所以它们仍然是 5。即使（在重新构建、保存、重新创建 MemoryDB 类等之后），单元测试也无法识别更改并且出现错误消息：`TimeTable.DB.MemoryDB does not contain a constructor that takes 5 arguments.` 我也尝试重新创建单元测试，但由于某种原因，它创建的自动 c'tor 是旧的 c'tor，有 6 个参数。

我是否以错误的方式删除了论点？我怎样才能解决这个问题？项目中的其他错误是否可能导致这个奇怪的问题？

ps这里是旧的c'tor：

```
 public MemoryDB(List<Grade> allGrades, List<Teacher> allTeachers, ForbiddenHours forbiddenHours, List<Group> allGroups, List<List<Teacher>> staffs, List<List<Group>> parallelGroups)
    {
        CheckParametersValidation(allGrades, allTeachers, forbiddenHours, allGroups, staffs, parallelGroups);

        this.allGrades = allGrades;
        this.allTeachers = allTeachers;
        this.forbiddenHours = forbiddenHours;
        this.allGroups = allGroups;
        this.staffs = staffs;
        this.parallelGroups = parallelGroups;
    } 
```

删除“forbiddenHours”后的新c'tor：

```
 public MemoryDB(List<Grade> allGrades, List<Teacher> allTeachers, List<Group> allGroups, List<List<Teacher>> staffs, List<List<Group>> parallelGroups)
    {
        CheckParametersValidation(allGrades, allTeachers, allGroups, staffs, parallelGroups);

        this.allGrades = allGrades;
        this.allTeachers = allTeachers;
        this.allGroups = allGroups;
        this.staffs = staffs;
        this.parallelGroups = parallelGroups;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:33:39.497

很难说出*为什么*会发生这种情况，但在解决此类问题时需要注意以下事项：

*   如果将库作为 DLL 引用，则 DLL 可能尚未更新。
    *   如果是这种情况，请重建库 - 如果有任何错误，它还没有构建。修复错误。
    *   重建后，删除现有引用并重新添加它（不是严格需要，您可以简单地替换文件系统上的 DLL）
*   如果库被作为项目引用：
    *   确保库正在构建且没有错误。
    *   一些缓存问题可能正在发生。重新启动 Visual Studio。

# java - 添加搜索插件后搜索菜单与其上一个菜单之间的差距

> ID：14396517
> 
> 赞同：2
> 
> 时间：2013-01-18T10:05:55.170
> 
> 标签：java, swt, eclipse-rcp, rcp, jface

我将搜索插件添加到我的 RCP 应用程序中。添加此插件后，它会在主菜单栏中添加搜索菜单。

我观察到搜索菜单与其上一个菜单之间存在一些像素差距。请看图片。

![在此处输入图像描述](../Images/15d92eb3ac3e73147098b711d8ad3d03.png)

有谁知道这是怎么回事以及如何删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T13:12:18.233

我通过修改 RCP 应用程序的 ApplicationWorkbenchWindowAdvisor 类的 postWindowCreate 方法解决了这个问题。

```
IWorkbenchPage page = this.getWindowConfigurer().getWindow().getActivePage();
MenuManager menuBarManager = ((ApplicationWindow)page.getWorkbenchWindow()).getMenuBarManager();
menuBarManager.remove("navigate"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-29T12:12:08.947

*在ActionBarAdvisor*实现中插入“**导航**”路径：

 *受保护的无效填充菜单栏（IMenuManager menuBar）{

menuBar.add(createFileMenu());
menuBar.add(createEditMenu());
**menuBar.add(new GroupMarker(IWorkbenchActionConstants.M_NAVIGATE));**
menuBar.add(new GroupMarker(IWorkbenchActionConstants.MB_ADDITIONS));
menuBar.add(createHelpMenu());

}*

# c# - 带有 foreach 的 IndexOutOfRangeException

> ID：14396520
> 
> 赞同：5
> 
> 时间：2013-01-18T10:06:07.183
> 
> 标签：c#, asp.net, exception

***编辑：**看看底部为什么会发生这种情况*

我有一个非常奇怪的 IndexOutOfRangeException （如标题中所述）。当我使用 foreach 遍历控件的控件（递归 FindControl）时会发生这种情况。

![奇怪的错误1](../Images/1fc10895d329a8f55aef1baea4d2cefd.png)

然后我想添加一个额外的检查来确保`root.Controls.Count > 0`. 但是我不断收到异常，而调试器清楚地说`Count == 0`.

![奇怪的错误2](../Images/90fd9d64d8d4d7af9d6ad54d0cef6bc9.png)

有问题的根是 FormView。如果有人知道为什么简单的属性检查会引发 IndexOutOfRangeException，请赐教！

异常stackTrace（是的，它是完整的）：

```
 at System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value) 
```

代码：

```
public static Control FindControlRecursive(this Control root, string id)
{
    if (root.ID == id)
    {
        return root;
    }

    if (root.Controls.Count > 0)
    {
        foreach (Control c in root.Controls)
        {
            Control t = c.FindControlRecursive(id);
            if (t != null)
            {
                return t;
            }
        }
    }

    return null;
} 
```

* * *

**编辑：**

我尝试使用本机`FindControl`函数，这会引发相同的错误。

* * *

具体问题：

foreach 如何在本机集合上抛出 IndexOutOfRangeException。

* * *

**编辑2：**

不知何故，这似乎与使用 ObjectDataSource 有关，我没有正确填写输入参数，但我没有得到任何错误。也许这以某种方式破坏了 FormView（使用该数据源）。我仍然很想知道如何在访问子控件之前不抛出错误的情况下发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:53:25.603

[尝试使用Control.HasControls()](http://msdn.microsoft.com/en-us/library/system.web.ui.control.hascontrols.aspx)而不是 Controls.Count可能会解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:13:22.503

> 具体问题：foreach 如何在本机集合上抛出 IndexOutOfRangeException

它与 foreach 无关；异常只是在访问控件的 Controls 属性时发生。这就是为什么当您尝试获取 root.Controls.Count 时也会发生这种情况，因为 Count 是 Controls 集合的属性，因此您尝试先访问该集合，然后再询问它的 Count。

您需要检查调用此函数的控件以及调用时间。也许控件是从损坏的资源加载的，或者您试图在它正确加载之前访问它的控件集合，或者类似的东西。很难说没有看到更多的代码。

尝试在普通表单上使用此函数，并确保在正确加载后调用它并查看它是否有效。

# iphone - 我怎样才能在导航控制器中弹出

> ID：14396522
> 
> 赞同：2
> 
> 时间：2013-01-18T10:06:11.703
> 
> 标签：iphone, ios, objective-c, ipad

我有六个`viewControllers`。在`viewController1`我有一个`button`带我到`viewController6`.

现在从我想分别`viewController6`弹回到`viewController5`、`viewController4`、`viewController3`和。`viewController2``viewController1`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:26:02.150

尝试这个，

```
NSMutableArray *allViewControllers = [NSMutableArray arrayWithArray: self.navigationController.viewControllers]; 
```

按顺序插入所需的视图控制器

```
[allViewControllers insertObject:viewControllerX atIndex:requiredIndex]; 
```

如果您只想替换以前使用的 viewController，

```
 [allViewControllers replaceObjectAtIndex:indexRequired withObject:viewControlerX]; 
```

然后设置回导航栈，

```
self.navigationController.viewControllers = allViewControllers; 
```

然后您可以使用以下内容弹回任何 viewController ：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:10:40.213

`[self.navigationController popViewControllerAnimated:YES];`如果您只想弹出 1 ，则可以使用`ViewController`，或者使用`[self.navigationController popToRootViewControllerAnimated:YES];`回到拳头`ViewController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:46:14.143

使用任一

```
popToViewController：动画
```

或者

```
setViewControllers：动画
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:04:21.030

按以下顺序使用 [self.navigationController pushViewController:]：从 ViewController1、6、5、4、3、2 开始。

并使用 [self.navigationController popToRootViewControllerAnimated:] 从 ViewController2 转到 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T10:13:29.517

是的，这是可能的。

如果你想`1 ViewController`从控制器堆栈中弹出

`[self.navigationController popViewControllerAnimated:YES];`

回到`fist ViewController`.

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

欲了解更多信息，请使用此链接

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# java - 警告 避免使用像 'HashMap' 这样的实现类型；改用界面

> ID：14396529
> 
> 赞同：7
> 
> 时间：2013-01-18T10:06:34.127
> 
> 标签：java

我在声纳上收到此警告：

> 避免使用像“HashMap”这样的实现类型；改用界面

这是什么意思？

我收到此警告的课程如下：

```
class A {
   private HashMap<String, String> map=new HashMap<String, String>();

   //getters and setters

} 
```

拜托，我想要适当的解决方案来避免对声纳发出警告。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-18T10:07:23.487

您应该始终对接口进行编码。IE。在这种情况下，您应该像这样声明您的字段：

```
private Map<String, String> map= new HashMap<String, String>(); 
```

这样，任何使用该`map`变量的东西都会将其视为 type`Map`而不是`HashMap`.

这使您可以在以后更换地图的底层实现，而无需更改任何代码。你不再被束缚`HashMap`

通读这个问题：[“编程到接口”是什么意思？](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)

另外我不确定你在做什么`Set`？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-18T10:07:37.900

我不使用声纳，但警告的基本意思是

> 始终编​​程到接口而不是实现类

```
private Map<String, String> map= new HashMap<String, String>();
        Interface                    Implementing class 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T10:07:50.973

通常，您应该始终针对接口而不是具体类型来实现。在此示例中，这意味着您应该这样编写代码：

```
private Map<String, String> map= new HashMap<String, String>(); 
```

最大的优势是您以后可以随时更改 Map 的具体实现，而不会破坏代码。

要了解有关它的更多详细信息，请查看以下问题：[程序员说“针对接口而不是对象的代码”是什么意思？](https://stackoverflow.com/questions/4456424/what-do-programmers-mean-when-they-say-code-against-an-interface-not-an-objec)

# c# - SOAP 服务的后台发生了什么

> ID：14396530
> 
> 赞同：1
> 
> 时间：2013-01-18T10:06:34.320
> 
> 标签：c#, soap, wsdl, ws-addressing

我在使用 Web 服务时遇到了一些奇怪的问题。一个问题是我不完全理解 SOAP 是如何工作的。

似乎有可能两个不同的应用程序可以连接到例如 127.0.0.1:8000，至少这对于使用 .NET WSDL 工具生成的代码来说是可能的。但是 IMO 只允许一个应用程序绑定到一个端口并监听 HTTP 响应。.NET 类是否默默地做某事？

对于一个小测试，我尝试使用 HttpWebRequest 类自己做所有事情，看看问题出在哪里。我从 Web 服务器获得了大约 500 个 StatusMessages，表明 EndpointDistpacher 无法找到 AddressFilter（我认为这可能是通过 HTTP 传输的服务器的 .NET 异常）。我从另一个有效的客户端复制了 SOAP 请求。我在这里不明白。服务器是否可能打开另一个与客户端的新连接，而不是回答已经打开的连接？

我不会为我的问题寻求直接的答案。我真的很想知道如何在后台将 TCP/HTTP 用于原始 SOAP 和 WS-Adressing。我要做的是创建一个简单的愚蠢客户端，假设我只有一个 TCP/HTTP 类。

# eclipse-plugin - 使用命令动态填充视图菜单

> ID：14396531
> 
> 赞同：0
> 
> 时间：2013-01-18T10:06:36.767
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在使用以下代码动态（在运行时）创建命令（STYLE_CHECK）并将这些添加到查看菜单。

```
final IMenuService menuService = (IMenuService) PlatformUI.getWorkbench().getService(IMenuService.class);
AbstractContributionFactory viewMenuAddition = new AbstractContributionFactory("menu:show?after=additions",
        null) {
    @Override
    public void createContributionItems(IServiceLocator serviceLocator, IContributionRoot additions) {
    List<String> hardLabels = ReadVzFile.getHwLabels();
    LinkedHashSet<String> sections = new LinkedHashSet<String>();
    //List will be poulated here
    for (Iterator<String> iterator = sections.iterator(); iterator.hasNext();) {
        String hardLabel = iterator.next();

        ICommandService commandService = (ICommandService) serviceLocator.getService(ICommandService.class);
        Command command = commandService.getCommand(hardLabel);
        RegistryToggleState registryToggleState = new RegistryToggleState();
        registryToggleState.setInitializationData(null, null, "true");
        registryToggleState.setShouldPersist(false);
        System.out.println(registryToggleState.getValue());
        command.addState("org.eclipse.ui.commands.toggleState", registryToggleState);
        command.define(hardLabel, hardLabel + "command created dynamically", commandService
            .getCategory("org.eclipse.ui.category.window"));
        IHandlerService handlerService = (IHandlerService) serviceLocator.getService(IHandlerService.class);
        handlerService.activateHandler(command.getId(), new AbstractHandler() {

        @Override
        public Object execute(ExecutionEvent event) throws ExecutionException {
            System.out.println("Command executed !" + event.getCommand().getId());
            System.out.println(event.getCommand().getState("org.eclipse.ui.commands.toggleState")
                .getValue());
            return null;
        }

        });

        // build a couple of command-based contribution parameters
        CommandContributionItemParameter pAA = new CommandContributionItemParameter(serviceLocator,
            hardLabel + " command menu", hardLabel, CommandContributionItem.STYLE_CHECK);
        pAA.label = hardLabel;
        CommandContributionItem itemAA = new CommandContributionItem(pAA);
        itemAA.setVisible(true);
        additions.addContributionItem(itemAA, null);
    }
    }
};
menuService.addContributionFactory(viewMenuAddition); 
```

但是当我在视图菜单中看到所有菜单项都未检查（已选择）。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:39:23.680

Tru 使用 HandlerUtil，就像那样

```
HandlerUtil.toggleCommandState(command); 
```

希望能帮助到你。

# ember.js - 具有动态段的资源并在嵌套路径中检索模型

> ID：14396533
> 
> 赞同：3
> 
> 时间：2013-01-18T10:06:43.190
> 
> 标签：ember.js, ember-router

我有以下路线：

```
@resource 'groups', {path: 'events/:event_id/groups'}, ->
  @route 'new' 
```

在我的新路线中，为了构建一个新的 App.Group 对象，我需要知道我们所在的事件是什么。

所以我有以下路线，对应于资源：

```
App.GroupsRoute = Ember.Route.extend
  model: (params) ->
    App.Event.find params.event_id 
```

与路线相对应的那个：

```
App.GroupsNewRoute = Ember.Route.extend
  model: ->
    App.store.createRecord App.Group 
```

我需要在创建组时指定组的事件。但是，在 GroupsNewRoute 中，我似乎无法检索该事件。参数不包括`event_id`.

如何从路由中的父资源获取模型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T16:16:22.830

这里有几个不同的问题：

你不应该使用`App.store`. 商店应该在路线上可用`this.get('store')`。

我不确定你为什么要命名你的路线`GroupsRoute`。既然它代表一个事件，你应该命名它`EventRoute`。这不是必需的，但它会更惯用。此外，您不需要为`GroupsRoute`. 您正在做的是默认行为。

`this.modelFor('groups')`最后，您可以通过：在您的路线中获取另一条路线的模型。那应该在这里解决您的问题。

# excel - VBA代码查找所选行中最后使用的列索引的最大值

> ID：14396534
> 
> 赞同：0
> 
> 时间：2013-01-18T10:06:44.420
> 
> 标签：excel, vba

我有一个工作表，其中有很多行。我需要在指定的选定行范围内获取最后一个非空列的最大列索引。

例如，工作表包含 200 行，每行包含 26 列，但目前只选择了第 20 到 30 行。我需要在这些行中找到上次使用的最大列索引。

请注意，连续的非空单元格之间可以有空单元格。我只需要考虑最后一个非空单元格。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:33:27.077

那么你可以试试这个：假设你想得到范围内的最后一`"A2:X50"`列`Sheet1`

```
Dim LastColumn as Long    
lastCol = Sheets(1).Range("A2:X50").Columns.Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T07:24:44.637

试试这个，lngMaxColumIndex 是最后一列索引，lngMaxRowIndex 是最后一行索引

子 pFindLastCells()

```
Dim rngRange                As Range
Dim wksWorksheet            As Worksheet
Dim lngMaxColumIndex        As Long
Dim lngMaxRowIndex          As Long

'Set 'Sheet1' worksheet
Set wksWorksheet = Worksheets("Sheet1")

With wksWorksheet
    'Check for last non-empty cell
    Set rngRange = .Cells.Find("*", .Cells(1, 1), xlFormulas, xlWhole, xlByRows, xlPrevious)
End With

If Not rngRange Is Nothing Then
    'if found then assign last non-empty cell row and colum index to the variable
    lngMaxColumIndex = rngRange.Column
    lngMaxRowIndex = rngRange.Row
Else
    'if not found gives message
    MsgBox "No Data in " & wksWorksheet.Name, vbCritical + vbInformation, "Error"
End If

Set rngRange = Nothing 
```

结束子

# sql-server-2008 - SSIS中从多个源到单个目的地的数据流

> ID：14396539
> 
> 赞同：0
> 
> 时间：2013-01-18T10:06:56.560
> 
> 标签：sql-server-2008, ssis

我需要将数据从多个分布式数据库（大约 70 个）导入单个源表。那么如何通过 SSIS 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:37:07.393

假设您可以对 70 个源服务器中的每一个运行相同的查询，您可以将 ForEach 循环与单个数据流任务一起使用。源连接管理器`ConnectionString`应该是使用循环变量的表达式。

`INFORMATION_SCHEMA.COLUMNS`这是一个从多个数据库读取视图的示例。我在本地实例上创建了以下表：

```
<!-- language: lang-sql -->
CREATE TABLE [MultiDbDemo].[SourceConnections](
    [DatabaseKey] [int] IDENTITY(1,1) NOT NULL,
    [ServerName] [varchar](50) NOT NULL,
    [DatabaseName] [varchar](50) NOT NULL,
 CONSTRAINT [PK_SourceConnections] PRIMARY KEY CLUSTERED 
(
    [DatabaseKey] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

CREATE TABLE [MultiDbDemo].[SourceColumns](
    [ColumnKey] [int] IDENTITY(1,1) NOT NULL,
    [ServerName] [varchar](50) NOT NULL,
    [DatabaseName] [varchar](50) NOT NULL,
    [SchemaName] [varchar](50) NOT NULL,
    [TableName] [varchar](50) NOT NULL,
    [ColumnName] [varchar](50) NOT NULL,
 CONSTRAINT [PK_SourceColumns] PRIMARY KEY CLUSTERED 
(
    [ColumnKey] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

这是 SSIS 包的控制流程： ![在此处输入图像描述](../Images/9c0c47d17a2a62a6c78587d7dcade754.png)

Source_AdoDotNet 连接管理器的`ConnectionString`属性设置为以下表达式：
![在此处输入图像描述](../Images/fab961b49f3c0305803121dae42c6e3d.png)

SQL_GetSourceList 的`SQLStatement`属性是`SELECT ServerName, DatabaseName FROM MultiDbDemo.SourceConnections`，并且`ResultSet`映射到`User::SourceList`变量。

ForEach 循环任务是这样配置的：
![在此处输入图像描述](../Images/67fbb6c704a82f7e923f42b945117065.png) 请注意，ADO 对象源变量设置为`User::SourceList`SQL_GetSourceList 任务中填充的变量。
![在此处输入图像描述](../Images/4806ca1bfb0d35928fc2417cd3cf1c17.png)

数据流如下所示：
![在此处输入图像描述](../Images/ea21a15744523aeaf6e1e08ac267c024.png)

ADO_SRC_SourceInfo 是这样配置的：
![在此处输入图像描述](../Images/70828f5ff8e237e2d9acdec44774da56.png)

所有这一切的下一个效果是，对于 SourceConnections 表中列出的每个数据库，我们执行查询`SELECT LEFT(TABLE_SCHEMA, 50) AS SchemaName, LEFT(TABLE_NAME, 50) AS TableName, LEFT(COLUMN_NAME, 50) AS ColumnName FROM INFORMATION_SCHEMA.COLUMNS`并将结果保存在 SourceColumns 表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T14:16:57.907

您仍然需要 70 个目标组件。只需在所有这些中指定同一个表。

# php - 重定向页面

> ID：14396541
> 
> 赞同：0
> 
> 时间：2013-01-18T10:07:05.543
> 
> 标签：php, redirect, base-url

案子：

主页 - 下拉菜单 -item1 - 将选择 item1 -item2 -item3

item page - 显示 item1 的内容并隐藏 item2 和 item3 的内容

(action) - 去选择另一个项目，比如 item2

问题：项目页面仍然显示项目 1 的内容而不是项目 2，但 url 地址现在更改为 www.website.com/itempage#item2 它只显示当我刷新页面时选择的项目的内容，如单击 f5

这是我调用页面的代码。

```
 <a href="<?php echo $this->url(array('controller'=>'ProductItem', 
                                            'action'=>'index')); ?>#callplus">Call Plus</a> 
```

# android - 如何在android的customview上设置textview的位置

> ID：14396545
> 
> 赞同：0
> 
> 时间：2013-01-18T10:07:27.437
> 
> 标签：android, drawing, android-canvas

我正在使用下面的代码在画布上设置文本..但现在我想知道如何在布局底部设置文本的位置..

```
 LinearLayout layout = new LinearLayout(getContext());
    TextView textView = new TextView(getContext()); 
    textView.setVisibility(View.VISIBLE);
    textView.setText(DetailsActivity.temp_desc);
    textView.setLines(10);
    textView.setSingleLine(false);
    layout.addView(textView);
    layout.measure(canvas.getWidth(), canvas.getHeight());
    layout.layout(0,100, canvas.getWidth(), canvas.getHeight());
    layout.draw(canvas); 
```

使用此代码，我在 (0,0) 的位置上获取文本，但我想将其设置为 (0,400) 我怎样才能满足我的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:24:01.023

如果您不想将视图设置到特定位置，请不要使用线性布局。使用相对布局，LinearLayout 顾名思义，Linear...
无论如何在java中做布局是非常糟糕的做法，你应该在xml中做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:37:01.000

这是在画布上绘制文本的两个示例代码..

**1)在Canvas上绘制TextView**

```
TextView textView = new TextView(getContext()); 

textView.setText(DetailsActivity.temp_desc);
textView.setMinLines(1);

canvas.translate(0,bitmap.getHeight());
textView.layout(0, 0, 500, 150);
textView.draw(canvas); 
```

**2）在画布上绘制文本**

```
canvas.drawText("Value",x_position, y_position, your paint object); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-18T10:30:23.193

您可以设置视图的 x 和 y 坐标

[在这里](http://developer.android.com/reference/android/view/View.html#setX)看到这个链接

或将此代码与绝对布局一起使用

```
TextView txt = new TextView(screenContext);
txt.setLayoutParams(new AbsoluteLayout.LayoutParams(width,height, calculatedX,calculatedY)); 
```

或者对于画布使用这个

```
 canvas.drawText(text, x, y, paint); 
```

# c - 一个代码中的多个小程序::blocks项目

> ID：14396552
> 
> 赞同：5
> 
> 时间：2013-01-18T10:07:52.483
> 
> 标签：c, codeblocks

我是 Code::Blocks 的新手。对于我的学习，我正在用 C 编写几个小程序（只是为了尝试一下）。我试图将它们全部放在一个项目中，因为它们属于同一个主题，但这不起作用，因为它们每个都有一个主要功能。

有什么想法可以以某种方式将这些文件放在一起，但不依赖于彼此？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-29T15:28:09.860

假设您的源文件被称为

*   程序1.c
*   程序2.c
*   mylib.c
*   mylib.h

其中 prog1.c 和 prog2.c 每个都包含一个 main() 函数，而 mylib.c（带有相应的头文件 mylib.h）包含一些应该链接到每个程序的库函数。在您的 Code::Blocks 项目中，您现在需要创建多个目标。从菜单中选择“文件/新建/构建目标...”并将它们命名为“prog1”和“prog2”。现在将所有源文件添加到项目中（以防您尚未这样做）。

现在右键单击 prog1.c 并从上下文菜单中选择“属性...”。在对话框中选择“构建”选项卡并确保在“属于目标”下仅选中“prog1”。对 prog2.c 和目标“prog2”执行相同的操作。对于“mylib.c”，请确保检查“prog1”和“prog2”。

现在您可以轻松地在 UI 中选择要构建和运行的构建目标。请注意，如果您添加另一个目标，例如“prog3”，那么您必须再次转到 prog1.c 和 prog2.c 的构建属性并取消选中“prog3”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:10:06.750

一个**C**程序应该只包含一个主函数。将所有单独的程序划分为**函数**并将它们放在一个 C 程序中，或者您甚至可以将它放在多个文件中并编译它们。

您可以使用 a`switch case`来调用不同的功能..

从所有程序中删除`main function`并将它们转换为`functions`..

在需要的地方给他们打电话..这将对您有所帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:18:46.243

在我看来，好像您开始构建一些不错的实用程序功能。因此，请遵循 raghu-srikanth-reddyce 提供的建议，并为每个小程序创建单独的函数。但是我要补充一点，最好为自己创建一个简单的 C 库，以将它们全部保存在其中，您可以随时链接到其中。大多数专业程序员都保留这样的库。

一个简单的 makefile 将使您能够构建可以链接到的最终二进制文件。

祝你编程好运；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T10:34:18.773

假设您的项目包含 3 个 c 文件，每个 c 文件都是一个单独的程序，并且它包含自己的`main`功能：

*   程序1.c
*   程序2.c
*   程序3.c

因此，您可以编写一个 Makefile（它在您的计算机中的名称应该是**"Makfile"**）。它将单独构建您想要的程序

这是您的 makefile 的外观：

```
all: program1 program2 program3

%.o: %.c
    $(CC) $(CFLAGS) -c -o $@ $^

program1: program1.o
    $(CC) $(LDFLAGS) -o $@ $^

program2: program2.o
    $(CC) $(LDFLAGS) -o $@ $^

program3: program3.o
    $(CC) $(LDFLAGS) -o $@ $^

clean:
    rm -f *.o program1 program2 program3 
```

使用上面的 Makefile，您可以单独构建每个程序

例子

```
$ make program1 
```

将仅构建 program1

或者你可以用

```
$make all 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-23T05:13:41.140

如果要在一个文件中编译，则不需要**项目文件**。只需创建一个**New File**，然后将所有代码写入一个文件中。如果需要，也可以使用**函数**和**过程。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-13T12:59:12.780

这已经很晚了，但是因为我曾经在这里问过同样的问题，而且我相信大多数学生都有/曾经/将会有同样的问题，让我详细说明一下你在哪里玩过。

在教育课程和现实世界中，项目（通常）是您处理的一些问题，找到解决方案，然后对其进行报告（+文档）。

在 Programming IDE 中，项目本身就是问题的解决方案。因此，虽然您可能在任何 Python IDE 中的一个项目中遇到多个单独的问题，但任何标准 C/C++ IDE 项目都必须只有一个“main()”来解决所有问题（除非您知道如何创建 makefile）。

AP 试图做的是将几个不同问题的解决方案放在一个解决方案的空间内——这在 Code::Blocks 中是不可能的。即使所有问题可能共享同一个主题（例如图论），它们本身也是个别问题（Dijkstra vs Floyd）。

# jquery - jQuery验证器绕过表单中某个字段的验证

> ID：14396556
> 
> 赞同：1
> 
> 时间：2013-01-18T10:07:57.643
> 
> 标签：jquery, jquery-validate

当单击某个按钮时，我无法弄清楚如何绕过表单内的表单字段。

例子：

就我而言，我想绕过`newpassword`and `newpassword2`（如果用户想要更改密码，则需要它），因为我有一个按钮，因此用户可以删除他的帐户。没有绕过，他必须填写一个`newpassword`并确认，然后才能删除他的帐户。

这些是id：

*   删除按钮：`deletemyacc`
*   表格名称：（`updelacc`因为此表格中的更新/删除帐户选项）
*   要绕过的表单字段名称：`newpassword`和`newpassword2`

现在这段代码有效，但它跳过了所有验证，而我仍然希望`old password`验证表单字段和 users `email`。

```
$("#deletemyacc").click(function () {
  $("#updelacc").validate().cancelSubmit = true;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:14:05.560

尝试：

```
$("#deletemyacc").click(function () {
  $("#updelacc").validate({ignore: ".ignore"}).cancelSubmit = true;
}); 
```

这种方式会忽略所有具有“忽略”类的元素

来源：[http ://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)

# java - jdbc odbc 连接使用密码和 ms 访问

> ID：14396558
> 
> 赞同：0
> 
> 时间：2013-01-18T10:08:00.537
> 
> 标签：java, jdbc

我正在尝试在 jdbc 中与 MS Access 建立连接。连接已成功建立，但未使用连接字符串中的密码。我正在使用以下代码。

```
try 
 {
  Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
  String connquery="jdbc:odbc:Driver={Microsoft Access Driver(*.mdb)};
  DBQ=d:/newfolder/db11.mdb";

  Connection c=DriverManager.getConnection(connquery,"","securityserver");
  Statement st=c.createStatement();
 }
 catch(Exception ex)

 {
 ex.printStackTrace();

 } 
```

此连接无需密码即可正常工作，但在应用密码后会引发异常。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-18T10:29:13.240

你已经在这几天了。老实说，使用 Java 连接到关系数据库并不难。

我不知道与 Microsoft Access 有什么关系。我以前曾在小问题上使用过它，但效果并不好，但现在我不推荐它，因为有很多其他替代方案可用。

MySQL 或 PostgreSQL 可能超出你的能力范围，但我想说你会更好地使用 JDK 中内置的 Derby 数据库。

JDBC-ODBC驱动有问题；如果您使用的是 64 位操作系统，则它不可用。访问仅供个人使用；我不会相信它的共享访问。您遇到密码问题；其他人不会那么不愿意接受密码。

如果可以，请更改您的数据库，看看是否有帮助。

# mule - Mule 3.3.0 POP3 连接器配置不起作用

> ID：14396563
> 
> 赞同：0
> 
> 时间：2013-01-18T10:08:16.637
> 
> 标签：mule

我正在尝试一个简单的 Mule 3.3.0 配置，它将下载每封电子邮件并将其传递给我的自定义处理器类。检索到电子邮件后，应将其从 gmail 收件箱中删除。但这似乎不起作用。下面是我的 mule-config.xml

```
 ```
<spring:beans>
    <spring:import resource="classpath:spring/applicationContextServices-core.xml"/>
    <spring:import resource="classpath:spring/applicationContextServices-configuration.xml"/>
    <spring:bean id="emailSender" name="emailSender" class="com.test.EmailSender"/>
    <spring:bean id="retrieveEmailProcessor" name="retrieveEmailProcessor" class="com.test.RetrieveEmailProcessor"/>
</spring:beans>

<jms:activemq-connector name="Active_MQ" specification="1.1" username="[username]" password="[password]" brokerURL="tcp://localhost:61616" validateConnections="true" doc:name="Active MQ">
    <reconnect/>
</jms:activemq-connector>

<pop3s:connector name="pop3Connector" checkFrequency="45600" deleteReadMessages="true"/>

<flow name="1_SendMessageToOwner" doc:name="1_SendMessageToOwner" doc:description="This is to confirm that your email was received successfully">
    <jms:inbound-endpoint topic="PoolMessage" connector-ref="Active_MQ" doc:name="JMS"/>
    <component doc:name="Build Email Message">
        <spring-object bean="emailSender"/>
    </component>
    <smtps:outbound-endpoint host="smtp.gmail.com" port="465" user="[username]%40gmail.com" password="[password]" from="[username]@gmail.com" responseTimeout="50000" doc:name="SMTP"/>
</flow>

<flow name="2_ReceiveConfirmation" doc:name="2_ReceiveConfirmation" doc:description="Retrieving Email">
    <pop3s:inbound-endpoint connector-ref="pop3Connector" host="pop.gmail.com" port="995" user="[username]%40gmail.com" password="[password]" responseTimeout="10000" doc:name="Pop3"/>
    <component doc:name="Process Transaction - Confirmation Message" doc:description="Recieve confirmation from member.">
        <spring-object bean="retrieveEmailProcessor"/>
    </component>
</flow>

</mule> 
```  和 RetrieveEmailProcessor 类

 ``package com.test;

import java.util.Map;

import org.mule.api.MuleEventContext;
import org.mule.api.lifecycle.Callable;

public class RetrieveEmailProcessor implements Callable {

`public Object onCall(MuleEventContext eventContext)
        throws Exception
{
    System.out.println("########## Entering RetrieveEmailProcessor.OnCall ##########");
    Map dataMapMessage = (Map)eventContext.getMessage().getPayload();

    String subject = (String)dataMapMessage.get("subject");
    String toAddressList = (String)dataMapMessage.get("toAddressList");
    String fromAddress = (String)dataMapMessage.get("fromAddress");

    eventContext.getMessage().setOutboundProperty(
      "toAddresses", 
      toAddressList);

    eventContext.getMessage().setOutboundProperty(
      "subject", 
      subject);

    eventContext.getMessage().setOutboundProperty(
      "replyToAddresses", 
      fromAddress);

    System.out.println("########## Exiting RetrieveEmailProcessor.OnCall ##########");
    return dataMapMessage.get("mailBody");
}``` 
```

 ``}`  `我有什么明显的遗漏吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:42:00.630

您的 Mule 配置很好。

您需要检查 Gmail 的配置：
设置 -> 转发和 POP/IMAP -> 在 POP 下载中：--> 2\. 使用 POP 访问邮件时

如果您希望在 POP 连接器读取邮件后删除或存档邮件，则需要在此处选择“删除 Gmail 的副本”。``

# sql - 在一行 SQL 上合并结果

> ID：14396574
> 
> 赞同：1
> 
> 时间：2013-01-18T10:09:11.357
> 
> 标签：sql, sql-server

我想将在不同行上输出的一对多关系合并到一行。

```
(select rate_value1 
      FROM xgenca_enquiry_event 
       INNER JOIN  xgenca_enquiry_iso_code_translation 
             ON 
       xgenca_enquiry_event_rate.rate_code_id 
           = xgenca_enquiry_iso_code_translation.id  
       where xgenca_enquiry_event_rate.event_id = xgenca_enquiry_event.id 
              and ISO_code = 'PDIV') as PDIVrate, 
(select rate_value1 
       FROM xgenca_enquiry_event 
        INNER JOIN xgenca_enquiry_iso_code_translation 
              ON 
         xgenca_enquiry_event_rate.rate_code_id 
           = xgenca_enquiry_iso_code_translation.id  
        where xgenca_enquiry_event_rate.event_id = xgenca_enquiry_event.id 
              and ISO_code = 'TAXR') as TAXrate

PDIVrate    TAXrate
NULL        10.0000000
0.0059120   NULL 
```

我想要一行的结果。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:20:56.333

您可以使用聚合函数来执行此操作：

```
select 
  max(case when ISO_code = 'PDIV' then rate_value1 end) PDIVRate,
  max(case when ISO_code = 'TAXR' then rate_value1 end) TAXRate
FROM xgenca_enquiry_event_rate r 
INNER JOIN  xgenca_enquiry_iso_code_translation t
  ON r.rate_code_id = t.id  
INNER JOIN xgenca_enquiry_event e
  ON r.event_id = e.id 
```

看起来您要加入的三个表在查询中是相同的。这使用连接将其合并为单个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:07:35.010

看这里： [我可以用逗号将多行分隔成一列吗？](https://stackoverflow.com/questions/2046037/sql-server-can-i-comma-delimit-multiple-rows-into-one-column)

使用 STUFF 在 SQL Server 中模拟 Oracle 的 LISTAGG()：

```
SELECT Column1,
  stuff((
   SELECT ', ' + Column2
     FROM tableName as t1
      where t1.Column1 = t2.Column1
       FOR XML PATH('')
     ), 1, 2, '')
 FROM tableName as t2
GROUP BY Column1
/ 
```

从这里复制：[https ://github.com/jOOQ/jOOQ/issues/1277](https://github.com/jOOQ/jOOQ/issues/1277)

# c++ - Run-Time Check Failure #2 - Stack around the variable 'temp' was corrupted

> ID：14396575
> 
> 赞同：1
> 
> 时间：2013-01-18T10:09:20.767
> 
> 标签：c++, c, visual-studio-2010

When i am running this code I am getting below error as

`Run-Time Check Failure #2 - Stack around the variable 'temp' was corrupted`

```
int main()
{
    UINT8 temp[7];
    for (int i = 0; i <= 7; i++)
    {
        temp[i] = 0x01;
    }
    return 0;
}//The error falls here 
```

Please help me.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:10:54.767

you are accessing array out of boundry

change:

```
for (int i = 0; i <= 7; i++) 
```

to

```
for (int i = 0; i < 7; i++) 
```

Or more C++ way:

```
std::fill_n(temp, 7, 0x01); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:10:27.787

the size of `temp` is `7` and the for loop reach `8` elements and not `7`

change

```
for (int i = 0; i <= 7; i++) 
```

by

```
for (int i = 0; i < 7; i++) 
```

The array index in c start from 0\. so if you go from index 0 to index 7 in your array that means you reach the `8th` element in your array, but your array size is 7

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T10:10:37.030

The cycle should be excluding 7 - your array is of size 7, so there is no element with index 7 in it.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-18T10:11:35.930

Declaring UINT8 temp[7]; creates an array of 7 variables. Starting from temp[0] to temp[6]

Your for loop however tries to access temp[7] which is undefined. The below loop will work

```
for (int i = 0; i < 7; i++)
{
    temp[i] = 0x01;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T10:11:19.300

There are 7 elements in the array ([0..6]), your for loop tries to access 8 elements [0..7], therefore you get a corrupted stack.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T10:15:52.637

```
for (int i = 0; i < 7; i++)
{
    temp[i] = 0x01;
} 
```

This will help you.. you are writing back to the temp again.. that is the error you are getting

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T10:21:50.823

Note that in C and C++, **array indexes are 0-based**. So, if you have an array of *N* items, valid index values are 0,1,2,...,(*N*-1).

In your case, *N* = 7, so valid index values are 0,1,2,3,4,5,6.

So, substitute `<=` with `<` in your for loop:

```
UINT8 temp[7];
for (int i = 0; i < 7; i++)  // Use <, not <=
 .... 
```

Moreover, there is a convenient [`_countof()` macro](http://msdn.microsoft.com/en-us/library/ms175773%28v=vs.80%29.aspx) available with VS in `<stdlib.h>`, which makes your code easier to *read* and *maintain* (instead of using the "magic number" 7 in your `for` loop):

```
for (int i = 0; i < _countof(temp); i++) 
```

Using `_countof()`, if you change the size of the array, your loop code will still work, without modifying 7 to the new array size.

Note also that in C++11 it's possible to use *range-based for loops* (but they are not available in VC10/Visual Studio 2010, which you used as a tag in this question).

Note that if you want to fill a buffer with a given byte sequence you can use `memset` (a C-like way):

```
memset(temp, 0x01, sizeof(temp)); 
```

Or, more generally (even for elements larger than one byte), you can use C++ `std::fill` from `<algorithm>`:

```
fill(begin(temp), end(temp), 0x01); 
```

Using an explicit algorithm like `std::fill` makes your code more readable, because it rises the "semantic level" of the source code (you just read "*fill*" instead of reading a "raw" `for` loop, the meaning of which you have to interpret).

# jquery - 在 jQuery POST 之后调用方法

> ID：14396577
> 
> 赞同：0
> 
> 时间：2013-01-18T10:09:27.260
> 
> 标签：jquery

当我使用 .click 事件时，我可以调用该方法。
**在职的**

```
$("#signin").live('click',function(){
    jsTouch.loadPage('pages/tabs.html', { transition: 'pop-in' });
}); 
```

当我使用 jQuery.post 时，它无法加载该方法。
**失败的**

```
$("#signin").live('click',function(){       
$.post("http://localhost/myAPI/index.php/api/requestlogin", { username: "admin", password: "test" },
function(data) {
        if(data.response == 'success')
            {                   
            jsTouch.loadPage('pages/tabs.html', { transition: 'pop-in' });
                     }else{
                        alert(data.response);               
                          }
});
}); 
```

**控制台错误**类型错误 ：无法调用未定义的方法“loadPage”

这是 jstouch 库。 [https://github.com/vitmalina/Web-2.0-Touch/blob/master/includes/jsTouch.js](https://github.com/vitmalina/Web-2.0-Touch/blob/master/includes/jsTouch.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:14:50.510

首先`.live()`是贬值。改用`.on()`：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

好的，所以我用我使用的 AJAX 函数重写了你的代码。$.POST 是，是的，$.ajax 的简写，但还是试试看吧 :)

* * *

```
$("body").on('click', '#signin', function(){       
    $.ajax({
        url: "http://localhost/myAPI/index.php/api/requestlogin",
        type: 'POST',
        data: {username: "admin", password: "test"},
        success: function(response) 
        {           
            jsTouch.loadPage('pages/tabs.html', { transition: 'pop-in' });
        },
        error: function(response)
        {
            alert('error');
        }
    });
}); 
```

一旦我们知道您使用的代码肯定可以正常工作，但仍然没有任何反应，您需要按以下顺序检查以下内容：

*   点击确实在注册，所以在点击之后发出警报。
*   POST 确实正在通过，所以在成功函数中添加一个警报。
*   如果仍然没有任何反应，那是你`jsTouch.loadPage()`的不工作。

# java - ZapOfDingBats 字体在输出 pdf 中不正确可见

> ID：14396578
> 
> 赞同：0
> 
> 时间：2013-01-18T10:09:30.673
> 
> 标签：java, fonts, itext

我在 itext 中使用 ZapfDingBats 字体在 Pdf 上显示文本。我按照通用代码使用 ZapfDingBats 字体显示文本，如下所示：-

```
import java.awt.Color;
import java.io.FileOutputStream;
import java.io.IOException;

import com.lowagie.text.*;
import com.lowagie.text.pdf.PdfWriter;

public class Chap0201 {

    public static void main(String[] args) {

        System.out.println("Chapter 2 example 1: Chunks and fonts");

        // step 1: creation of a document-object
        Document document = new Document();

        try {

            // step 2:
            // we create a writer that listens to the document
            // and directs a PDF-stream to a file
            PdfWriter.getInstance(document, new FileOutputStream("C://Chap0201.pdf"));

            // step 3: we open the document
            document.open();

            // step 4: we add content to the document
            Font fonts;
            fonts = FontFactory.getFont(FontFactory.ZAPFDINGBATS, 12, Font.NORMAL);
           // for (int i = 0; i < fonts.length - 1; i++) {
                Chunk chunk = new Chunk("This is some", fonts);
                document.add(new Phrase(chunk));
               // document.add(new Phrase(new Chunk(" font. ",
                //fonts[i]).setTextRise((i % 2 == 0) ? -6 : 6)));
          //  }
            document.add(new Phrase(new Chunk("This text is underlined",
            FontFactory.getFont(FontFactory.HELVETICA, 12, Font.UNDERLINE))));
            document.add(new Phrase(new Chunk("This font is of type ITALIC | STRIKETHRU",
            FontFactory.getFont(FontFactory.HELVETICA, 12, Font.ITALIC | Font.STRIKETHRU))));
            Chunk ck = new Chunk("This text has a yellow background color", FontFactory.getFont(FontFactory.HELVETICA, 12));
            ck.setBackground(new Color(0xFF, 0xFF, 0x00));
            document.add(new Phrase(ck));
        }
        catch(DocumentException de) {
            System.err.println(de.getMessage());
        }
        catch(IOException ioe) {
            System.err.println(ioe.getMessage());
        }

        // step 5: we close the document
        document.close();
    }
} 
```

我只是按照上面的文字在 Pdf 中显示文本。但是所有使用 ZapOfDingBats 字体打印的文本都以深色填充形状（即正方形、三角形等）的形式出现。 ![在此处输入图像描述](../Images/65758c676e498aa50477e57b701eb519.png)

请提出为什么会这样。当我正确地遵循每件事时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:31:59.693

ZapfDingbats 是一个 dingbat 字体。

*该术语在计算机行业中继续用于描述在为字母或数字字符指定的位置具有符号和形状的字体。*

（维基百科，[http](http://en.m.wikipedia.org/wiki/Dingbat) ://en.m.wikipedia.org/wiki/Dingbat ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:01:17.157

哦，我想它会显示一些字母。它以子弹和三角形的形式出现。

# ruby - 将弹性搜索限制设置为“无限制”

> ID：14396582
> 
> 赞同：54
> 
> 时间：2013-01-18T10:09:48.320
> 
> 标签：ruby, elasticsearch

我如何从弹性搜索中获取所有结果，因为结果仅显示限制为 10。我有一个像这样的查询：

```
@data = Athlete.search :load => true do
          size 15
          query do
            boolean do
              must { string q, {:fields => ["name", "other_names", "nickname", "short_name"], :phrase_slop => 5} }
              unless conditions.blank?
                conditions.each do |condition|
                  must { eval(condition) }
                end
              end
              unless excludes.blank?
                excludes.each do |exclude|
                  must_not { eval(exclude) }
                end
              end
            end
          end
          sort do
            by '_score', "desc"
          end
        end 
```

我已将限制设置为 15，但我不想使其无限制，以便我可以获取所有数据我无法设置限制，因为我的数据不断变化，我想获取所有数据。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-18T14:46:10.177

您可以使用`from`和`size`参数来分页浏览所有数据。这可能会非常慢，具体取决于您的数据和索引中有多少。

[http://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html](http://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-09-23T19:26:33.133

另一种方法是先执行 a `searchType: 'count'`，然后使用`size`set to执行普通搜索`results.count`。

这里的优点是它避免了依赖于[类似 SO question](https://stackoverflow.com/questions/8829468/elasticsearch-query-to-return-all-records)`UPPER_BOUND`中所建议的幻数，并避免了 Shay Banon[在此处](http://elasticsearch-users.115913.n3.nabble.com/Non-Paged-Query-And-Performance-td2648246.html)描述的构建过大的优先级队列的额外开销。与.`scan`

最大的缺点是它需要两个请求。根据您的情况，这可能是可以接受的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-28T22:42:31.660

从[文档](http://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html)中，“请注意，`from + size`不能超过`index.max_result_window`默认为 10,000 的索引设置”。因此，我公认的非常特别的解决方案是，如果我使用该论点，则只需通过*或*减去10,000 `size: 10000`。*`from`*

 *请注意，在下面 Matt 的评论之后，如果您有大量文档，正确的方法是使用[scroll api](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-scroll.html)。我已经成功地使用了它，但仅限于 python 接口。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-18T10:14:05.313

使用扫描方法，例如

```
 curl -XGET 'localhost:9200/_search?search_type=scan&scroll=10m&size=50' -d '
 {
    "query" : {
       "match_all" : {}
     }
 } 
```

看[这里](http://www.elastic.co/guide/en/elasticsearch/guide/master/scan-scroll.html)*

# python - Django 交互式 html 表单

> ID：14396583
> 
> 赞同：0
> 
> 时间：2013-01-18T10:09:48.677
> 
> 标签：python, django, django-forms

我今天开始使用 Django，并尝试构建一个 html 表单

views.py 的代码是

```
def home(request): 
    t = get_template('home.html')
    html = t.render(Context({ "GetLabel": 'Welcome to the SPACE program.',
                              "GetInput": '',
                              "Next": './get_machine' }))
    return HttpResponse(html)     

def get_machine(request):
    t = get_template('home.html')
    html = t.render(Context({ "GetLabel": 'Enter the name of the machine: ',
                              "GetInput": '<input type="text" name="machine_name">',
                              "Next": './get_beamlines'}))
    return HttpResponse(html)

def get_beamlines(request):
    machine_name = request.POST["machine_name"] 
    Context({ "GetLabel": 'Machine already installed<br> Overwrite Existing file',
                  "GetInput": '<select name="check" >  <option value="Yes">Yes</option>    <option value="No">No</option> </select>',
                  "Next": './get_beamline' })
    t = get_template('home.html')
    html = t.render(Context({"GetLabel": 'Enter the number of beamlines: ',
                             "GetInput": '<input type="text" name="beamline_no"',
                             "Key":'Machine Name: ',
                             "Value": machine_name,
                             "Next": './get_beamline_name'}))
    return HttpResponse(html) 
```

它是这样的；现在我不知道如何进一步获取光束线的名称（如果超过 1 个）

我是django的新手，如果我错了，请纠正我。

有没有其他更好的方法来做同样的事情。

注意：最后，我想将所有用户输入写入一个 xml 文件。通过从 raw_imput() 获取用户输入，我对普通的 python 程序做了同样的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:18:46.560

[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)中介绍了有关表单的一些基础知识，您可能还想使用Django 中可用的[表单框架。](https://docs.djangoproject.com/en/1.4/topics/forms/)

# javascript - 控制台中显示的主干模型错误

> ID：14396586
> 
> 赞同：0
> 
> 时间：2013-01-18T10:09:57.397
> 
> 标签：javascript, backbone.js

我正在学习Addy Osmani 的[开发 Backbone.js 应用程序](http://addyosmani.github.com/backbone-fundamentals/)，但我被卡住了。

这是我的看法：

```
var TodoView = Backbone.View.extend({
    tagName: 'li',
    className: 'todo_list',
    todoTpl: _.template($('#item-template').html()),
    events:{
        'dblclick label': 'edit',
        'keypress .edit':'updateOnEnter',
        'blur .edit':'closed'
    },
    initialize:function(){
        _.bindAll(this, 'edit','render','updateOnEnter','closed');
        this.render();
    },
    render: function(){
        this.$el.html(this.todoTpl(this.model.toJSON()));
        this.input = this.$('.edit');
        return this;
    },
    edit: function(){},
    updateOnEnter: function(){},
    closed: function(e){}
});

var todoView = new TodoView();
console.log(todoView.el); 
```

这是我的错误：

```
 TypeError: this.model is undefined
 this.$el.html(this.todoTpl(this.model.toJSON())); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:16:19.217

您没有将任何模型传递给您的视图，因此*`this.model`未定义*

尝试

```
var myModel  = // define your model
var todoView = new TodoView({
    model: myModel
}); 
```

# android - 如何从 Android Google Maps API V2 获取 MapView 的位图

> ID：14396587
> 
> 赞同：10
> 
> 时间：2013-01-18T10:09:59.713
> 
> 标签：android, bitmap, android-maps-v2

我正在将我的应用程序更新到新的 Android Maps API V2 并在尝试获取当前显示地图的位图图像时遇到问题。在 API V1 中，我这样做了：

```
Bitmap mBitmap;
MapViwe mMapView;
// ...
mBitmap = Bitmap.createBitmap(MAP_WIDTH, MAP_HEIGHT, Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(mBitmap);
mMapView.draw(canvas); 
```

在 API V1 中，这给了我一张地图的位图，在 API V2 中，我得到的只是一个黑色矩形。

同样对于 API V2，我使用的是`MapView`，而不是，`MapFragment`所以这不是问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-24T10:54:07.020

[GoogleMap.snapshot()](https://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#snapshot%28com.google.android.gms.maps.GoogleMap.SnapshotReadyCallback%29)方法可以完成这项工作。

# vala - Vala 引用计数和参数传递

> ID：14396588
> 
> 赞同：3
> 
> 时间：2013-01-18T10:10:00.453
> 
> 标签：vala, reference-counting

在尝试了 Vala 并检查了生成的 C 源代码后，我想出了以下 Vala 代码：

```
class Foo : GLib.Object {
    public string baz;
}

class Main : GLib.Object {
    public static Foo foo;

    public static void bar(Foo f) {
        foo = null;
        f.baz = "Hi";
    }

    public static int main(string[] args) {
        foo = new Foo();
        bar(foo);
        return 0;
    }
} 
```

检查生成的 C 代码后，我意识到 Vala 编译器在将*foo*传递给*bar*时没有插入引用计数（RC）增量。据我了解，*bar中的第一行会将**foo*的 RC 递减为 0，这反过来应该释放*foo*，从而有效地使传递的变量*f*成为悬空指针，然后在*bar*的第二行中访问它. 但是，程序执行没有问题，所以我不确定我是否在这里遗漏了一些东西，或者它只是出于巧合。这里生成的C代码供参考：

```
void main_bar (Foo* f) {
    Foo* _tmp0_;
    gchar* _tmp1_;
    g_return_if_fail (f != NULL);
    _g_object_unref0 (main_foo);
    main_foo = NULL;
    _tmp0_ = f;
    _tmp1_ = g_strdup ("Hi");
    _g_free0 (_tmp0_->baz);
    _tmp0_->baz = _tmp1_;
}

gint main_main (gchar** args, int args_length1) {
    gint result = 0;
    Foo* _tmp0_;
    Foo* _tmp1_;
    _tmp0_ = foo_new ();
    _g_object_unref0 (main_foo);
    main_foo = _tmp0_;
    _tmp1_ = main_foo;
    main_bar (_tmp1_);
    result = 0;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:33:15.003

这是正确的行为。仅`owned`计算引用。参数是`unowned`，除非另有明确说明。所以`f`in `bar`, 永远不会被引用计数，因为调用者负责维护引用计数。变量存储位置（类字段、堆栈变量、全局变量）都是`owned`.

所以，让我们分别检查`main`一下`bar`：

`main`创建一个 的实例`Foo`，该实例需要放在某处。它将它放在`foo`拥有它的全局变量中。现在对通过创建的对象有一个引用`foo`。然后我们调用`bar`，它接受一个参数`foo`。我们知道`foo`已经引用了该对象，并且将它作为参数传递不需要我们增加引用，除非参数是`owned`. 因此，我们只需将指针传递`foo`给`bar`.

`bar`接受一个`Foo`名为`f`is 不拥有的类型的参数。它将 null 分配给一个名为 的完全不相关的全局变量`foo`，这会减少对象的引用计数，并在必要时对其进行清理。然后它对`f`.

为了“正确”地完成这项工作，编译器必须 1) 理解这一点`foo`并且`f`是相同的，即使您可以`bar`使用任何参数调用，2) 知道`foo`在某些情况下将引用计数递减与将其递减为零略有不同. 对于任何无法解决停机问题的编译器来说，这太复杂了。

要使您的代码按预期工作，您有两种选择：

1.  将新对象分配给全局变量`foo`和传递给的堆栈变量`bar`。您现在已确保变量通过调用`bar`.

2.  `bar`取而代之。_ `owned Foo f`_ `Foo f`这将导致调用者`foo`在传递它之前增加引用，并`bar`在完成时减少引用。

简而言之，调用者有责任确保在将变量传递给方法时该变量在该方法的生命周期内保持有效。你可以想象当那个方法是`async`.

# c# - DropDownList 将所选项目设置为 true

> ID：14396591
> 
> 赞同：1
> 
> 时间：2013-01-18T10:10:20.243
> 
> 标签：c#, asp.net

我在 ASP.net 中添加了 DropDownList。

```
<asp:DropDownList  ID="DropDownList1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged" > 
<asp:ListItem Text="Name" Value="jsh" Selected="true" /> 
<asp:ListItem Text="hhh" Value="sds"/> 
</asp:DropDownList> 
```

而不是`Selected="true"`在 ASP.net 中说我想在

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e) 
{
    DropDownList1 // THE SELECTED ITEM NEEDS TO BE SET TO TRUE
    Response.Redirect(Request.RawUrl);
} 
```

更新

```
<asp:DropDownList  ID="DropDownList1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged" OnTextChanged="DropDownList1_onChanged"> 

</asp:DropDownList> 
```

C＃

```
protected void Page_Load(object sender, EventArgs e)
{

    if(!Page.IsPostBack)
{
    DropDownList1.Items.Add(new ListItem("En", "en-US"));
    DropDownList1.Items.Add(new ListItem("Fr", "fr-FR"));
}

} 
```

// 我也复制了`InitializeCulture()`

```
protected override void InitializeCulture() 
{

string Kultur = "en-US"; 
if (Session["lang"] != null)
{

    Kultur = Session["lang"].ToString();
}

this.UICulture = Kultur;
this.Culture = Kultur;
base.InitializeCulture();

} 
```

//

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e) 
{
DropDownList1.Items.FindByValue(DropDownList1.SelectedValue).Selected = true;
  Response.Redirect(Request.RawUrl);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:25:06.393

实际上，您的问题没有任何意义。如果用户选择了它，则它已经被选中。当您刷新页面时，`DropDownList1`将再次加载值。所以你`DropDownList1`选择的项目会丢失

你可以这样做，

在`aspx`文件中

```
 <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
    </asp:DropDownList> 
```

在`aspx.cs`文件中

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if(!Page.IsPostBack)
        {
            DropDownList1.Items.Add(new ListItem("Name", "jsh"));
            DropDownList1.Items.Add(new ListItem("hhh", "sds"));
        }
    } 
```

下面的代码是选择项目

```
DropDownList1.Items.FindByValue(DropDownList1.SelectedValue).Selected = true; 
```

或者

```
DropDownList1.Items.FindByText(DropDownList1.SelectedItem.Text).Selected = true; 
```

或者

```
DropDownList1.SelectedItem.Selected = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:15:32.583

```
DropDownList1.SelectedValue = "value";

Or

DropDownList1.SelectedIndex= 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:26:04.187

您也可以通过这种方式进行选择。

```
if (ddl.Items.FindByValue("value") != null && !string.IsNullOrEmpty("value"))
{
  ddl.Items.FindByValue("value").Selected = true;
} 
```

# node.js - Openshift - 当我访问应用程序时，503 服务暂时不可用

> ID：14396597
> 
> 赞同：2
> 
> 时间：2013-01-18T10:10:39.927
> 
> 标签：node.js, openshift, paas

我在[这里](https://news-mithunsatheesh.rhcloud.com/)使用 node.js 和 mongo db 在 Openshift 上托管了一个应用程序。它昨天和今天运行得很好，当我访问它时，我得到了

服务暂时不可用错误

我搜索了一些线程并尝试了这个命令

```
rhc tail -a news 
```

结果是

> npm 错误！节点 -v v0.6.20 npm 错误！npm -v 1.1.37 npm 错误！代码
> 
> 生命周期 npm 错误！消息 OpenShift-Sample-App@1.0.0 开始：`node
> 
> server.js `npm ERR! message`sh "-c" "node server.js"` 以 1 失败
> 
> npm 错误！npm 错误！可以在以下位置找到其他日志记录详细信息：npm ERR！
> 
> /var/lib/openshift/4eb0c449f78a4d7e937726185b5e636e/app-root/runtime/repo/npm-debug.log
> 
> npm 错误！不好的代码未定义的 npm ERR！不好的代码 1

我也试过

```
rhc app status -a news 
```

结果是

> 结果：Geargroup nodejs-0.6+mongodb-2.2 启动

我也尝试重新启动我的应用程序

```
rhc app restart 
```

它重新启动正常。你能建议我是什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T11:00:02.807

正如[Hardy](https://stackoverflow.com/users/115835/hardy)所提到的，我仍然不知道超出了哪个资源。不过现在已经修好了。

这就是我所做的。

1.  [只需按照此处](https://openshift.redhat.com/community/developers/remote-access)所述远程访问您的应用程序控制台。

2.  使用 PuTTy 或 Cygwin 等客户端 ssh 进入控制台。

3.  只需通过键入来检查您的应用程序的状态`ctl_app status`。对我来说它就像： **应用程序当前无法访问或停止。**

4.  只需键入即可开始`ctl_all start`

现在应用程序像以前一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:38:04.427

您使用的是免费的 OpenShift 帐户（免费 grear）吗？如果是这样，您的应用程序在做什么？它是否非常占用 CPU 或内存。您的设备使用 cgroups 进行监控，一旦您超过任何资源限制（cpu、内存、线程），您的应用程序就会被杀死。在这种情况下，您将收到您描述的消息。不幸的是，无法告诉您超出了哪个资源，并且您没有收到有关这是问题的通知。至少这是我使用我的应用程序所经历的。当然，您的应用程序可能还有其他问题。

# arm - 手臂皮质 m0 的引导代码

> ID：14396600
> 
> 赞同：0
> 
> 时间：2013-01-18T10:10:47.770
> 
> 标签：arm

我正在开发基于 ARM CORTEX M0 的微控制器。

我已将内核与 ROM 集成在一起。我现在必须编写启动代码/引导代码来检查内核是否能够从 ROM 启动。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-30T20:31:29.167

如果这是一个选择，使用 CMSIS（Cortex 微控制器软件接口标准）将使事情变得更容易：在调用 main 之前实现导入的函数 SystemInit() 来做任何你想做的事情。一旦重新启动微控制器，就会在 Reset_Handler() 弱函数中调用该函数。

; 重置处理程序

Reset_Handler PROC EXPORT Reset_Handler [WEAK] IMPORT SystemInit IMPORT __main LDR R0, =SystemInit BLX R0 LDR R0, =__main BX R0 ENDP

# java - Struts 2 请求参数验证（Int 和字符串）

> ID：14396601
> 
> 赞同：1
> 
> 时间：2013-01-18T10:10:50.550
> 
> 标签：java, jsp, validation, struts2, url-parameters

假设我在这里有这个 URL

```
<s:url action ="profile" var ="profile_url">
  <s:param name = "id">${user.userId}</s:param>
</s:url>
<s:a href = "%{profile_url}">My Profile</s:a> 
```

其中参数 id 将只有一个`int`值。所以在我的 Action 课程中。

```
public class ViewProfileAction extends ActionSupport{

    public String execute(){
       //someServiceLayer.getUser(id);
       return "success";
    }

    public int getId() {
       return id;
    }

    public void setId(int id) {
       this.id = id;
    }

    private int id;
} 
```

只要用户点击链接，一切似乎都很顺利，所以如果用户点击链接，网址将是这样的

```
localhost:8090/HelloStruts2/profile?id=1 
```

但是如果用户直接操作 URL 会怎样？他在浏览器中手动输入了一个字母或字符？像这样

```
localhost:8090/HelloStruts2/profile?id=b 
```

如果用户这样做，我相信会有异常或会发生错误。

我的问题是如何验证 URL 参数？或者如果用户做了这样的事情（在参数中输入字母或负数`id`），我会将他重定向到另一个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:54:37.393

您有一个参数字段，`int`但您已将其设置为`String`URL。为了消除这种错误，您需要在拦截器之前（或之后）放置一些拦截`params`器以检查该值。例如你把`validation`拦截器。

```
@Action(value = "youraction", results = {
  @Result(location = "/path/to/page.jsp"),
}, interceptorRefs = {@InterceptorRef("validation"), @InterceptorRef("basicStack")}) 
```

那么你需要`validate()`在你的动作中实现方法

```
public void validate() {} 
```

最后添加处理错误和好的结果的方法*，*所以OGNL不会抱怨

```
public void setId(String id) {
    try {
      this.id = Integer.parseInt(id);
    } catch (NumberFormatException nfe){}
} 
```

就是这样，您不再有例外，并且`String`在 setter 中检查了类型参数。

对于您的问题：如果您的参数未正确解析，您将`0`在`execute()`方法中获得价值。因此，您决定返回什么结果。您还可以检查`validate()`方法中的值，如果放置在拦截`validation`器之后的`params`拦截器进行解析或`GenericValidator.isInt`在此之后将其`setFieldError()`显示在 JSP 中或在验证后立即重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:54:19.980

使用[XWorkConverter的](http://struts.apache.org/2.3.4/xwork-core/apidocs/com/opensymphony/xwork2/conversion/impl/XWorkConverter.html)[ParametersInterceptor](http://struts.apache.org/2.3.4/xwork-core/apidocs/com/opensymphony/xwork2/interceptor/ParametersInterceptor.html)会引发 Exception 类型

> ognl.MethodFailedException: java.lang.NoSuchMethodException setId(java.lang.String);

因为它会（通过反射）在 a 中搜索`Setter`a `String`，而不是 a `int`。

此错误将在 InterceptorStack 中间停止调用，并将其与`input`结果一起发回，这是请求中输入错误的默认结果。

如果您没有`input`在您的 中声明结果`struts.xml`，您将得到一个 Exception 类型

> 没有为操作 your.package.your.Action 和结果输入定义结果

如果你有它，那么你将被重定向回在你的`struts.xml` （同一个 JSP、另一个 JSP 或一个动作）中声明的结果。

您可以通过在 JSP 中通过`<s:fielderror />`标记输出字段错误来处理此问题，并最终使用 javascript 用红色边框为字段着色（在您的情况下不是，因为它们是 URL 参数）。

要正确验证此类内容（而不是要求 Struts2 失败并为您引发错误），您可以使用`XML Validation`，在 Action 的同一包中声明一个 XML 文件，其名称为`YourActionName-validation.xml`

在您的情况下，您应该使用[**Required Validator**](http://struts.apache.org/2.3.4/docs/required-validator.html)和[**Int Validator**](http://struts.apache.org/2.3.4/docs/int-validator.html)

（并在您的 , 中指定`0`为`min`参数`Int Validator`，以防止出现负值）

# perl - 读取带有嵌入换行符的 CSV 文件

> ID：14396605
> 
> 赞同：3
> 
> 时间：2013-01-18T10:11:05.307
> 
> 标签：perl, csv, newline

我正在处理从网站上抓取的文件，该文件保存为带有引号字段的分号 csv。最后一个字段包含嵌入的换行符。我一直在编写一个脚本来处理该文件。我对 perl 还很陌生，起初是用普通的 perl 脚本尝试它，但很快发现它不起作用。我做了研究，发现我应该改用 Text::CSV 模块。我遇到了这些解释如何使用该模块的网站：

[http://perlmaven.com/how-to-read-a-csv-file-using-perl](http://perlmaven.com/how-to-read-a-csv-file-using-perl)

[http://perlmeme.org/tutorials/parsing_csv.html](http://perlmeme.org/tutorials/parsing_csv.html)

[http://metacpan.org/pod/Text::CSV#Embedded-newlines](http://metacpan.org/pod/Text::CSV#Embedded-newlines)

基本上我想要完成的是正确读取文件，以便所有字段都得到正确分隔，而不是在换行符处中断。然后从该字段中删除换行符并将其写入新文件。

以下是原始数据的示例：

```
 "2030";"NH Amersfoort";"Stationsstraat 75";"3811 MH AMERSFOORT";"033-4221200";"www.nh-hotels.nl";"52.154316";"5.380036";"<UL class=stars><LI>
 <LI>
 <LI>
 <LI></LI></UL>"
 "2031";"NH Amsterdam Centre";"Stadhouderskade 7";"1054 ES AMSTERDAM";"020-6851351";"www.nh-hotels.com";"52.363075";"4.879458";"<UL class=stars><LI>
 <LI>
 <LI>
 <LI></LI></UL>"
 "2032";"NH Atlanta Rotterdam Hotel";"Aert van Nesstraat 4";"3012 CA ROTTERDAM";"010-2067800";"www.nh-hotels.com";"51.921028";"4.478619";"<UL class=stars><LI>
 <LI>
 <LI>
 <LI></LI></UL>" 
```

我想要的是这个：

```
 "2030";"NH Amersfoort";"Stationsstraat 75";"3811 MH AMERSFOORT";"033-4221200";"www.nh-hotels.nl";"52.154316";"5.380036";"<UL class=stars><LI><LI><LI><LI></LI></UL>"
 "2031";"NH Amsterdam Centre";"Stadhouderskade 7";"1054 ES AMSTERDAM";"020-6851351";"www.nh-hotels.com";"52.363075";"4.879458";"<UL class=stars><LI><LI><LI><LI></LI></UL>"
 "2032";"NH Atlanta Rotterdam Hotel";"Aert van Nesstraat 4";"3012 CA ROTTERDAM";"010-2067800";"www.nh-hotels.com";"51.921028";"4.478619";"<UL class=stars><LI><LI><LI><LI></LI></UL>" 
```

到目前为止，这是我的完整脚本。我尝试了 10 种不同的选项和建议，但都不起作用！

```
 use strict;
 use warnings;    
 use Text::CSV;

 my $inputfile  = shift || die "Give input and output names!\n";
 my $outputfile = shift || die "Give output name!\n";

 open my $infile,  '<', $inputfile   or die "Sourcefile in use / not found :$!\n";
 open my $outfile, '>', $outputfile  or die "Outputfile in use :$!\n";

    my $csv = Text::CSV->new ({
binary => 1,
sep_char => ';'
});

while (my $elements = $csv->getline( $infile )) {
        my $stars = $elements->[8];
        #$ster =~ s/[\r\n]//g
        print "$stars\n\n";
        }

 close $infile;
 close $outfile; 
```

这将正确打印带有换行符的字段，但并未将它们从课程中删除。我怎么做？使用正则表达式替换换行符不起作用。下一个问题是当我弄清楚如何清理该字段时。我如何打印新文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:32:56.233

我不确定您在这里问什么，因为您似乎已经有了答案。但是，此代码确实有效：

```
use strict;
use warnings;
use Text::CSV;

my $csv = Text::CSV->new ({
    binary => 1,
    sep_char => ';',
    eol => $/,                # to make $csv->print use newlines
    always_quote => 1,        # to keep your numbers quoted
});

while (my $row = $csv->getline( *DATA )) {
    $row->[8] =~ s/[\r\n]+//g;
    $csv->print(*STDOUT, $row);
}

__DATA__
"2030";"NH Amersfoort";"Stationsstraat 75";"3811 MH AMERSFOORT";"033-4221200";"www.nh-hotels.nl";"52.154316";"5.380036";"<UL class=stars><LI>
<LI>
<LI>
<LI></LI></UL>"
"2031";"NH Amsterdam Centre";"Stadhouderskade 7";"1054 ES AMSTERDAM";"020-6851351";"www.nh-hotels.com";"52.363075";"4.879458";"<UL class=stars><LI>
<LI>
<LI>
<LI></LI></UL>"
"2032";"NH Atlanta Rotterdam Hotel";"Aert van Nesstraat 4";"3012 CA ROTTERDAM";"010-2067800";"www.nh-hotels.com";"51.921028";"4.478619";"<UL class=stars><LI>
<LI>
<LI>
<LI></LI></UL>" 
```

**指针：**

使用`eol`带有`Text::CSV`'s print 的选项可以做到你所期望的，即打印换行符。我用作`STDOUT`输出句柄，但你可以使用任何你想要的文件句柄。

我不知道你为什么说替换对你“不起作用”，但我怀疑也许你做了这样的事情：

```
my $foo = $row->[8];
$foo =~ s/[\r\n]//g;
print @$row; 
```

这不会更改 中的值`$row`，只会更改 中的副本`$foo`。

# batch-file - NSIS - 在编译之前运行批处理文件

> ID：14396608
> 
> 赞同：0
> 
> 时间：2013-01-18T10:11:16.273
> 
> 标签：batch-file, nsis

我想在编译 NSIS 脚本之前运行一个批处理。

我找到了 execWait。这将在安装我的应用程序时启动批处理文件。

我也试过 !execute 'batch.bat' 但编译时出现错误。

这是我的批处理文件的内容：

```
@echo off
@type file.txt > destination.txt
@echo. >> destination.txt
@svnversion.exe >> destination.txt 
```

**1.更新**

这是我放在我的 nsi 文件中的内容，但它不起作用。

```
!tempfile BAT
!appendfile "${BAT}.cmd" "@echo off$\r$\n"
!appendfile "${BAT}.cmd" "@type file.txt > destination.txt$\r$\n"
!appendfile "${BAT}.cmd" "@echo. >> destination.txt$\r$\n"
!appendfile "${BAT}.cmd" "@svnversion.exe >> destination.txt$\r$\n"
!system '"${BAT}.cmd"'
!delfile "${BAT}.cmd"
!undef BAT 
```

错误是“无法打开输出文件”“错误 - 正在中止创建过程”

我在源代码中有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:19:50.770

试试`!system`。

您甚至可以在 .nsi 中创建批处理文件：

```
!tempfile BAT
!appendfile "${BAT}.cmd" "@echo off$\r$\n"
!appendfile "${BAT}.cmd" "@echo Hello$\r$\n"
!system '"${BAT}.cmd"'
!delfile "${BAT}.cmd"
!undef BAT 
```

# windows-7 - 从 UAC 对话框中隐藏特定用户帐户

> ID：14396609
> 
> 赞同：0
> 
> 时间：2013-01-18T10:11:17.070
> 
> 标签：windows-7, uac

`Users`我通常在本地组成员的帐户下使用 Windows 7 。当我需要安装程序或进行其他特权操作时，我有第二个帐户，使用不同的密码，它是该`Administrators`组的成员。这很好用——每当我安装一个新程序时，例如，当 UAC 对话框出现时，它会显示一个本地管理员帐户列表。我可以选择一个并输入密码，然后在该帐户下运行操作。此列表只有一项（我的管理员帐户），因此我可以立即开始输入密码并按 Enter。

但是，我安装了一个程序，它安装了自己的服务帐户（Cygwin SSHD），现在它出现在列表的首位。当 UAC 对话框出现时，我必须在输入密码之前选择正确的帐户，我忘记/减慢我的速度/有点烦人，因为就我而言，服务帐户永远不会用于交互式登录。

是否可以从 UAC 对话框中隐藏特定帐户，或调整此新服务帐户的组成员身份/登录权限以使其隐藏？（这是一个独立的工作站；它不是域的一部分。）

附言。据我了解，对于那些熟悉 Cygwin SSHD 安装过程的人来说，这是`cyg_server`SSHD 在登录时模拟系统上的其他用户所需的帐户。这是否意味着它确实需要交互式登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T23:45:12.850

`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon\SpecialAccounts\UserList`在以您的帐户命名的 下创建一个 DWORD `cyg_server`，并将其设置为 0。这将在登录屏幕和 UAC 中隐藏该帐户。

来源：[https ://superuser.com/questions/66400/hide-account-from-login-screen-but-can-be-used-in-uac](https://superuser.com/questions/66400/hide-account-from-login-screen-but-can-be-used-in-uac)

# html - 这种情况下正确的 html5 元素是什么？

> ID：14396613
> 
> 赞同：1
> 
> 时间：2013-01-18T10:11:32.473
> 
> 标签：html

我是 html 的新手，所以对新的 html5 元素有点挣扎。

我有两种情况，我无法决定是否应该使用`article`or `section`。

### 场景一：

我有一个主页，其中包含许多不同的部分（我不一定指 html 部分）。举个例子，主页的 1 部分包含使用我的公司/网站的理由 - 它也有一个`header`.

这显示在主页上，但也显示在侧边栏中的许多其他页面上。如果我理解正确，这将属于`article`，但我不完全确定。

### 场景二：

我有一个常见问题页面。每个问题都有一个答案，并且可以将许多问题分组在一个特定的主题下。

那么，每个主题是 a `section`，每个问题/答案是 a`article`吗？也是`header`文章的问题吗？

任何帮助和建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:26:17.703

**部分标签**

标签定义文档中的部分。例如章节、页眉、页脚或文档的任何其他部分。

**文章标签**

标签指定独立的、自包含的内容。

一篇文章本身应该是有意义的，并且应该可以独立于网站的其余部分进行分发。

元素的潜在来源：

*   论坛帖子
*   博文
*   新闻故事
*   评论

**一般评论**

你使用什么仍然完全取决于你。尽管如此，您必须记住，并非所有浏览器都支持 HTML5 中包含的所有标签。例如，该标签将适用于所有最近的浏览器（Firefox、Chrome、Safari、Opera 和 IE9）。许多人仍然使用旧版本的 Internet Explorer（IE8 或 IE7 或 IE6），这意味着这些旧版浏览器不会知道这个标签。

这并不是那么糟糕，因为总有一种解决方案可以让它在所有浏览器中运行，例如您可以使用[html5shiv](http://code.google.com/p/html5shiv/)脚本。

不知道标签或 HTML5 中的任何其他标签的浏览器将它们视为普通的内联元素。所以你应该包括以下css规则：

```
article, aside, figure, footer, header, hgroup,
menu, nav, section { display: block; } 
```

希望这个对你有帮助 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:20:55.000

对于常见问题解答，我建议`section`为每个主题（包括标题）使用一个描述列表`dl`，其中`dt`包含每个问题和一个或多个答案，每个都包含在它自己的`dd`. 您也可以省略`section`s 并使用嵌套的描述列表。

根据规范，这里的使用`article`没有意义。想想`article`博客文章等用例的元素。

我不明白你的第一个场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:22:09.313

一般来说，an`article`用于不需要额外上下文来理解的自包含文档。A`section`是页面的一部分，在该页面之外没有意义。

在您的主页上，您的部分看起来很可能是 html 部分。在您的其他页面中，您可能也希望将它们设为部分，而不是文章。如果它们只是小项目，您可能只想将它们包装在侧边栏中的 div 中，而根本不赋予它们任何特定的语义含义。

在您的常见问题解答页面上，我会说每个问题/答案都是一个`article`（例如，您可以想象它们是 RSS 提要中的单独文章）。主题不是真正的`article`a 或 a `section`，我认为它们不需要任何特定的语义含义，因此您可以将它们分组在 div 中进行布局。问题不是文章的标题，标题用于可能包含导航等的页面标题。您的问题可能只是 aa head* *ing* * ( `h1`/ `h2`/ `h3`etc)。

不要过度使用 html5 元素，试图将任何块元素放入一个部分或文章中，只有在有真正的语义目的时才使用它们。页面布局应该只用好的旧`div`的。

[有一篇很好的文章在这里](http://www.brucelawson.co.uk/2010/html5-articles-and-sections-whats-the-difference/)更深入地解释了这些差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:25:43.740

通常 a`section`应该是 a 的子节点`article`。

[W3C 标准](http://www.w3.org/TR/html5/sections.html#the-article-element)说（我强调）：

> article 元素表示文档、页面、应用程序或站点中的自包含组合，并且**原则上是可独立分发或可重复使用**的，例如在联合中。这可以是论坛帖子、杂志或报纸文章、博客条目、用户提交的评论、交互式小部件或小工具，或任何其他独立的内容项目。

因此，当在不提供任何上下文的情况下将文本发布到其他地方有意义时，您可以将其设为文章。

**场景 1** 当文本打算出现在您网站的不同页面上时，它似乎满足了这个条件。

**场景 2** 通常，每个常见问题解答问题/答案对都是关于一个单独的主题并且本身就有意义，因此它们将是一篇文章。但是，如果您的问题的结构只有在一个接一个地阅读时才有意义，那么您可以将它们分成几个部分。

顺便说一句：这个答案将是一个部分，因为不阅读您的问题就没有意义。他们将共同组成一篇文章。

# javascript - 使用 onclick 旋转图像

> ID：14396614
> 
> 赞同：0
> 
> 时间：2013-01-18T10:11:34.120
> 
> 标签：javascript, jquery, toggle

我尝试制作一个切换按钮，每次单击我的图像（箭头）将旋转 180 度：

```
<a href='#' onclick='$(\"#divToggle\").slideToggle(\"slow\");'>
<img src='blue_down_arrow.png' onclick='$(this).rotate(180);' /></a>

<div id='divToggle' style='display:none;'>...CONTENT...</div>"; 
```

此代码切换我的 div，但图像仅在第一次单击时旋转，然后保持“向上”。我正在使用这个：[http ://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:30:40.517

你可以这样写。[演示](http://jsfiddle.net/pJ7Dw/)

```
jQuery(document).ready(function(){
   var deg_temp =45;
  jQuery("#image1").click(function(){
     deg_temp = deg_temp+30;
  jQuery(this).rotate(deg_temp);
  })

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:25:21.680

这是因为旋转角度的值是绝对的，而不是基于最后一次旋转。

工作代码：

**jQuery**

```
var rotate_factor = 0;

function rotateMe(e) {
    rotate_factor += 1;
    var rotate_angle = (180 * rotate_factor) % 360;
    $(e).rotate({angle:rotate_angle});
} 
```

**HTML**

```
<img src='blue_down_arrow.png' onclick='rotateMe(this);' /></a> 
```

**更新**：更短的代码

```
var rotate_angle = 0;

<img src='blue_down_arrow.png' onclick='rotate_angle = (rotate_angle + 180) % 360; $(this).rotate(rotate_angle);' /></a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-28T20:39:45.667

这将使您能够对每个单击执行额外的旋转

```
var degrees = 0;
  $('.img').click(function rotateMe(e) {

    degrees += 90;

    //$('.img').addClass('rotated'); // for one time rotation

    $('.img').css({

      'transform': 'rotate(' + degrees + 'deg)',
      '-ms-transform': 'rotate(' + degrees + 'deg)',
      '-moz-transform': 'rotate(' + degrees + 'deg)',
      '-webkit-transform': 'rotate(' + degrees + 'deg)',
      '-o-transform': 'rotate(' + degrees + 'deg)'
    }); 
```

[https://jsfiddle.net/Lnckq5om/1/](https://jsfiddle.net/Lnckq5om/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T10:28:55.523

[点击查看 CSS3 过渡演示](http://jsfiddle.net/2BWm8/1/)

看看这个演示。它使用 CSS3 进行过渡 + 变换旋转

```
.testRotate{
  -moz-transition: transform 1s;
  -webkit-transition: transform 1s;
  transition: transform 1s;
}

.testRotate:hover{
  transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -webkit-transform: rotate(45deg);
} 
```

这些是这个演示的重要部分 =)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-18T10:46:19.377

尝试这个：

```
$('img').click(function(){
$('img').rotate({ angle: 0, bind:{
    "click":function(){
      $(this).rotate({animateTo:360});
    }
  }
 });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-18T10:18:50.623

使用 CSS3 进行旋转：

1.  在 Mozilla Firefox 中，这将是 -moz-transform: rotate(180deg)
2.  在基于 Webkit 的浏览器中，即 Chrome：-webkit-transform: rotate(180deg)
3.  在 Opera 中：-o-transform: rotate(180deg)
4.  在 IE 中：-ms-transform: rotate(180deg)（仅限 IE9）
5.  在 IE9 之前：不太可能，需要使用 Matrix Filter

使用[jQuery rotate 插件](http://archive.plugins.jquery.com/project/rotate)统一所有浏览器差异。

# spring-security - 并发控制是否可覆盖

> ID：14396621
> 
> 赞同：2
> 
> 时间：2013-01-18T10:12:08.303
> 
> 标签：spring-security

我在我的 applicationContext-security.xml

```
<session-management session-authentication-error-url="/genesis"> 
        <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" expired-url="/genesis?sessionExpired=true"/> 
    </session-management> 
```

这将用户限制为单个会话。但是，我现在要求一个帐户必须允许多个会话，同时仍将所有其他帐户限制为单个会话。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:34:55.087

覆盖默认并发过滤器。为您的特殊用户跳过处理：

```
public class CustomConcurrentSessionFilter extends ConcurrentSessionFilter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException,
        ServletException {
        Authentication auth = SecurityContextHolder.getContext().getAuthentication();
        if (!auth.getName().equals("bob")) {
            super.doFilter(req, res, chain);
        }
    }

} 
```

用conf中的自定义过滤器替换默认过滤器：

```
<security:http ... >
    <security:custom-filter position="CONCURRENT_SESSION_FILTER" ref="customConcurrentSessionFilter"/>
</security:http>

<bean id="customConcurrentSessionFilter" class="com.domain.CustomConcurrentSessionFilter"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:45:08.987

*（我在这里扩展我的评论，为这个问题提供更完整的解决方案。）*

只需`getMaximumSessionsForThisUser()`在`ConcurrentSessionFilter`子类中覆盖（在我使用的下面`com.example.CustomConcurrentSessionFilter`）和 XML 配置中添加：

*   `SessionAuthenticationStrategy`豆（带有 id `"sas"`），
*   `<session-management session-authentication-strategy-ref="sas" />`在`<http>`,
*   `<bean:property name="sessionAuthenticationStrategy" ref="sas" />`给你的`UsernamePasswordAuthenticationFilter`

完整的设置应该类似于[docs 中显示的](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#concurrent-sessions)设置：

```
<http>
  <custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
  <custom-filter position="FORM_LOGIN_FILTER" ref="myAuthFilter" />

  <session-management session-authentication-error-url="/genesis"
      session-authentication-strategy-ref="sas"/>
</http>

<beans:bean id="concurrencyFilter"
   class="com.example.CustomConcurrentSessionFilter">
  <beans:property name="sessionRegistry" ref="sessionRegistry" />
  <beans:property name="expiredUrl" value="/genesis?sessionExpired=true" />
</beans:bean>

<beans:bean id="myAuthFilter"
    class="o.s.s.web.authentication.UsernamePasswordAuthenticationFilter">
  <beans:property name="sessionAuthenticationStrategy" ref="sas" />
  <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<beans:bean id="sas"
    class="o.s.s.web.authentication.session.ConcurrentSessionControlStrategy">
  <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
  <beans:property name="exceptionIfMaximumExceeded" value="true" />
  <beans:property name="maximumSessions" value="1" />
</beans:bean>

<beans:bean id="sessionRegistry"
    class="o.s.s.core.session.SessionRegistryImpl" /> 
```

# javascript - 如何使用 jsFiddle 选择多个框架？

> ID：14396624
> 
> 赞同：71
> 
> 时间：2013-01-18T10:12:25.023
> 
> 标签：javascript, jquery, knockout.js, jsfiddle

我如何真正让 jsfiddle 使用超过 1 个库？我似乎只能让它使用 jquery 或淘汰赛，但不能同时使用两者。然而，当我看其他人的小提琴时，他们似乎没有这个问题。真的很烦人，不知道为什么它这么难，而且在互联网上没有任何搜索结果！！！

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-18T10:13:08.283

您只能通过侧边栏中的下拉菜单分配一个框架。如果您需要添加另一个框架，则需要使用指向 CDN 的链接添加资源。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T06:35:46.000

使用它来添加另一个框架。显示淘汰赛 CDN 的示例

```
$.getScript("//cdnjs.cloudflare.com/ajax/libs/knockout/2.2.1/knockout-min.js", function(){
    /* Lines of code */
    }); 
```

# excel - 将数据表单 Excel 插入 Access 2010

> ID：14396627
> 
> 赞同：1
> 
> 时间：2013-01-18T10:12:39.443
> 
> 标签：excel, vba, ms-access, import

我正在寻找一种将数据从 Excel 插入 Access 2010 的解决方案。Excel 中的数据在一个表单中。填写表格后，Excel中的VBA会将数据作为新记录插入到Access表中。

1.  我不想在 Access 中使用函数 - 从 Excel 导入。
2.  我不想将数据存储在 Excel - 对象表中。

我查看了几个主题，但没有一个是我想要的。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:59:16.037

[使用 DAO 通过打开的 Excel 工作表 ( http://support.microsoft.com/kb/319998](http://support.microsoft.com/kb/319998) )避免内存泄漏，例如：

```
'Reference: Microsoft Office x.x Access Database Engine Object Library
Dim ws As DAO.Workspace
Dim db As DAO.Database
Dim sDb As String
Dim sSQL As String
Dim qdf As QueryDef

sDb = "Z:\Docs\Test.accdb"

Set ws = DBEngine.Workspaces(0)
Set db = ws.OpenDatabase(sDb)

''A stored query would be better
sSQL = "Parameters p1 Text, p2 Datetime; " _
& "INSERT INTO Table1 (AText,ADate) Values ([p1],[p2])"

Set qdf = db.CreateQueryDef("", sSQL)

qdf.Parameters!p1 = "ABC"
qdf.Parameters!p2 = #2013/1/17#
qdf.Execute dbFailOnError
Debug.Print qdf.RecordsAffected 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-31T10:21:03.697

您可以参考 [https://stackoverflow.com/a/61950934/12289278](https://stackoverflow.com/a/61950934/12289278)

```
Sub ImportJEData()
Dim cnn As ADODB.Connection 'dim the ADO collection class
Dim rst As ADODB.Recordset 'dim the ADO recordset class
Dim dbPath
Dim x As Long
Dim var
Dim PayIDnxtRow As Long

'add error handling
On Error GoTo errHandler:

'Variables for file path and last row of data
dbPath = Sheets("Update Version").Range("b1").Value
Set var = Sheets("JE FORM").Range("F14")

PayIDnxtRow = Sheets("MAX").Range("c1").Value

'Initialise the collection class variable
Set cnn = New ADODB.Connection

'Create the ADODB recordset object.
'Set rst = New ADODB.Recordset 'assign memory to the recordset

'Connection class is equipped with a —method— named Open
'—-4 aguments—- ConnectionString, UserID, Password, Options
'ConnectionString formula—-Key1=Value1;Key2=Value2;Key_n=Value_n;
cnn.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & dbPath
'two primary providers used in ADO SQLOLEDB —-Microsoft.JET.OLEDB.4.0 —-Microsoft.ACE.OLEDB.12.0
'OLE stands for Object Linking and Embedding, Database

Do
On Error Resume Next 'reset Err.obj.

     'Get the Max ID +1
    Set rst = Nothing
    Set rst = New ADODB.Recordset 'assign memory to the recordset
    SQL = "SELECT Max(ApNumber)+1 FROM PayVoucherID "
    rst.Open SQL, cnn

    'Check if the recordset is empty.
    'Copy Recordset to the Temporary Cell
    Sheets("MAX").Range("A2").CopyFromRecordset rst

    'Insert the Data to Database And Check If no Errors
    Sql2 = "INSERT INTO PayVoucherID(ApNumber)Values('" & Sheets("MAX").Range("A2") & "') "
    cnn.Execute Sql2

Loop Until (Err.Number = 0)

xlFilepath = Application.ThisWorkbook.FullName

SSql = "INSERT INTO PaypaymentID(Apnumber) " & _
"SELECT * FROM [Excel 12.0 Macro;HDR=YES;DATABASE=" & xlFilepath & "].[MAX$G1:G15000] where APNumber > 1"

cnn.Execute SSql

 Set rst = Nothing
Set rst = New ADODB.Recordset 'assign memory to the recordset

 SQL = "Select PayID From PayPaymentID where APNumber = " & _ 
Sheets("LEDGERTEMPFORM").Range("B8") & " order by PayID "

rst.Open SQL, cnn
Sheets("PaySeries").Range("B2").CopyFromRecordset rst

rst.Close
' Close the connection
cnn.Close
'clear memory
Set rst = Nothing
Set cnn = Nothing

'communicate with the user
'MsgBox " The data has been successfully sent to the access database"

'Update the sheet
Application.ScreenUpdating = True

On Error GoTo 0
Exit Sub
errHandler:

'clear memory
Set rst = Nothing
Set cnn = Nothing
MsgBox "Error " & Err.Number & " (" & Err.Description & ") in procedure Export_Data"
End Sub 
```

# python - 在 PyML 中设置 SVM 判别值

> ID：14396632
> 
> 赞同：0
> 
> 时间：2013-01-18T10:13:01.280
> 
> 标签：python, svm, pyml

我正在使用 PyML 的 SVM 对读取进行分类，但想将判别式设置为高于默认值（我假设为 0）的值。我该怎么做？

附言。如果重要的话，我正在使用带有 liblinear-optimizer 的线性内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:26:55.550

迂回的做法如下：

使用`result.getDecisionFunction()`方法，根据自己的喜好选择。

返回值列表，例如：

`[-1.0000000000000213, -1.0000000000000053, -0.9999999999999893]`

更好的答案仍然值得赞赏。

# rest - Salesforce 中的 Rest API 发布方法标注

> ID：14396638
> 
> 赞同：-2
> 
> 时间：2013-01-18T10:13:13.533
> 
> 标签：rest, salesforce

我叫休息。让方法正常运行，但是当我运行 post 方法时，它显示以下错误，

02:08:09.159 (1159191000)|USER_DEBUG|[139]|DEBUG|Message Body:[{"message":"不支持 HTTP 请求中指定的 Content-Type 标头：application/x-www-form-urlencoded", "errorCode":"UNSUPPORTED_MEDIA_TYPE"}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:21:49.510

将内容类型设置为`application/json`

# project-server - 从 Project Server 2007 升级到 Project Server 2010

> ID：14396639
> 
> 赞同：0
> 
> 时间：2013-01-18T10:13:16.770
> 
> 标签：project-server, ms-project-server-2010

我这几天正在学习 Project Server 2010，想知道我是否必须从现有的 Project Server 2007 升级到 2010 版本，需要多少天？

考虑以下因素，这不是一天或最多 2 天的工作：

1.  当前的 Project Server 2007 由一个服务器场、一台 SQL Server 计算机和一台 Project Server 计算机组成
2.  未进行第 3 方 Web 部件安装或自定义

或者它可能需要更长的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T21:59:02.710

> 我已经启动并运行了 Project Server 2010 和 SharePoint Server 2010 演示虚拟机；在 10 分钟内，我的 PWA 2007 实例升级到 2010 ！！！是的，你听到了，几乎没有时间喝杯咖啡。想要现场演示来新奥尔良亲眼看看！
> 
> -Christophe（他是产品组的产品经理）

[http://blogs.msdn.com/b/chrisfie/archive/2010/05/27/how-to-upgrade-from-project-server-2007-to-project-server-2010-in-10min.aspx](http://blogs.msdn.com/b/chrisfie/archive/2010/05/27/how-to-upgrade-from-project-server-2007-to-project-server-2010-in-10min.aspx)

我有过类似的经历。如果您没有任何 3rd 方应用程序或自定义设置，那就轻而易举了。

# jquery - 在 opacity = 0 后加载 html

> ID：14396645
> 
> 赞同：1
> 
> 时间：2013-01-18T10:13:42.017
> 
> 标签：jquery

我有这个代码。不透明度 0 和不透明度 1 有效！但加载（页面）不加载。为什么？

```
function cargarContenido(pagina) {
    $('#content').animate({"opacity":"0"});
    if ($('#content').css('opacity') == 0) {
        $("#content").load(pagina);
    }
    $('#content').animate({ "opacity": "1" });
} 
```

如果我只放这个，它工作正常

```
function cargarContenido(pagina) {
    $("#content").load(pagina);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T10:16:39.353

您需要使用`animate`和`load`方法的回调参数来按顺序执行您的代码。试试这个：

```
function cargarContenido(pagina) {
    $('#content').animate(
        { "opacity": "0" }, 
        function() {
            $("#loadimage").show(); // show a loading image
            // load content when opacity = 0 animation finished
            $("#content").load(
                pagina, 
                function() {
                    $("#loadimage").hide(); // hide a loading image
                    // make opacity = 1 when content has been loaded
                    $('#content').animate({ "opacity": "1" });
                }
            )
        }
    );
} 
```

注意我已经扩展了这段代码的格式，以明确发生了什么。如果需要，您可以删除很多间距以使其更短。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:16:45.777

`animate()`是异步的，因此当您检查不透明度时，它不为零，因为动画功能尚未完成。在不透明度完成动画后，您可以使用 animate 中的回调来执行相同的操作：

```
function cargarContenido(pagina) {
    $('#content').animate({"opacity":"0"}, function() {
        $(this).load(pagina, function() {
            $(this).animate({ "opacity": "1" });
        });
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:17:41.073

我认为你应该在回调函数中完成动画后做这些事情，因为它会在完成动画后运行。[阅读](http://api.jquery.com/animate/)有关该`complete`功能的文档，

```
 $('#content').animate({"opacity":"0"},500,function(){
                     $("#content").load(pagina,function(){
                         $('#content').animate({ "opacity": "1" });
                     });             
     }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:19:36.940

我想你想要做的是在#content的不透明度为0之后加载任何“pagina”？您应该使用完整参数而不是询问不透明度是否为 0：

功能 cargarContenido(pagina){

```
$('#content').animate({"opacity":"0"}, 1000, function(){

    $("#content").load(pagina, function(){

          $('#content').animate({ "opacity": "1" });

    });

}); 
```

}

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-18T10:16:55.977

尝试使用 animate 的附加参数：

```
$('#content').animate({"opacity":"0"}, slow, function() {
    $("#content").load(pagina);
    $('#content').animate({ "opacity": "1" });
}); 
```

# javascript - 使用 eval 将字符串转换为函数是邪恶的吗？

> ID：14396647
> 
> 赞同：0
> 
> 时间：2013-01-18T10:13:50.347
> 
> 标签：javascript

我听到了很多关于 eval() 的不同意见，并且有点不确定在这种情况下使用 eval() 是否可以：

假设我有一个这样的对象：

```
var bla = {
blubb: function (callback) {
       //GET some stuff via ajax
       //call the callback
    }
} 
```

还有这样的字符串：

```
 var someString = "bla.blubb"; 
```

评估字符串以调用函数（和回调）是邪恶的吗？

```
var callMe = eval(someString)
callMe(function(){
   alert('yay')!
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T10:34:40.897

> 我听到了很多关于 eval() 的不同意见

`eval`一般不是邪恶的，有它的应用程序。

> 不确定在这种情况下是否可以使用 eval()

不，这样不行。[使用简单的括号符号 member operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)有一个更好的解决方案。由于每天都会在 SO 上询问这个问题，我可以在这里列出数百个骗子（只是谷歌的前几个结果）：

*   [以点表示法转换字符串以获取对象引用](https://stackoverflow.com/questions/10934664/convert-string-in-dot-notation-to-get-the-object-reference)
*   [将javascript点符号对象转换为嵌套对象](https://stackoverflow.com/questions/7793811/convert-javascript-dot-notation-object-to-nested-object)
*   [使用字符串键访问嵌套的 JavaScript 对象](https://stackoverflow.com/questions/6491463/accessing-nested-javascript-objects-with-string-key)
*   [通过点语法字符串路径访问对象](https://stackoverflow.com/questions/9338192/access-object-through-dot-syntax-string-path)
*   [将点符号的 JavaScript 字符串转换为对象引用](https://stackoverflow.com/questions/6393943/convert-javascript-string-in-dot-notation-into-an-object-reference)
*   [使用点符号字符串访问对象子属性](https://stackoverflow.com/questions/8051975/access-object-child-properties-using-a-dot-notation-string)
*   [通过 Javascript 中的 keyPath 访问属性？](https://stackoverflow.com/q/17683616/1048572)
*   …</li>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:21:07.627

让我们假设您的整个设计并不完全是邪恶的（但有一点）。

这意味着您限制并指定您在`someString`. 例如，它可以是一个对象及其函数的路径，您可以在**没有任何参数**的情况下调用它（这使得它的危险性降低了很多），并且在上下文中是全局对象。

然后很容易解析字符串并调用没有`eval`. 这样会更安全。例如 ：

```
window.a = {b:{c:function(){console.log('here')}}};
var someString = "a.b.c";

var path = someString.split('.');
var f = window;
for (var i=0; i<path.length; i++) f = f[path[i]];
f.call(null); 
```

一个改进是修复根对象（而不是窗口）以避免任何类型的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:20:58.727

这又是邪恶的，因为它很难调试。更好的方法是使用类似的东西：

```
function getValue(namespace, parent) {
    var parts = namespace.split('.'),
        current = parent || window;
    for (var i = 0; i < parts.length; i += 1) {
        if (current[parts[i]]) {
            current = current[parts[i]];
        } else {
          if (i >= parts.length - 1)
            return undefined;
        }
    }
    return current;
}
var foo = {
    bar: {
        baz: function () { alert('baz'); }
    }
};
var f = getValue('foo.bar.baz'); //true
if (typeof f === 'function') {
    f();
} 
```

代码不止一个`eval('foo.bar.baz')`，但您可以弄清楚实际发生了什么，甚至可以使用断点对其进行调试。

如果我们在这里谈论性能，那么这里有几个 jsperf 示例：

1.  [http://jsperf.com/eval-vs-loop](http://jsperf.com/eval-vs-loop)
2.  [http://jsperf.com/eval-vs-loop/2](http://jsperf.com/eval-vs-loop/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:28:13.483

如果你知道你的对象会是什么样子，不要忘记你可以在 javascript 中使用“安全评估”。

在范围内：

```
this.foo = { bar:function(){return "baz"}};

// some code.
var obj = "foo";
var param = "bar";

this[obj][param](); // same as this.foo.bar(); 
```

除非您正在处理一些特定的事情（例如模板），否则您不需要使用 eval 来调用对象。

# c# - SQLite 更新后：无法在 DLL 'SQLite.Interop.dll' 中找到名为 'sqlite3_changes_interop' 的入口点

> ID：14396656
> 
> 赞同：15
> 
> 时间：2013-01-18T10:14:21.007
> 
> 标签：c#, sqlite, dll, dllimport, system.data.sqlite

在我决定更新 SQLite DLL（从 1.0.82.0 到 1.0.84.0）之前，我的 C#/SQLite 工作正常。现在我得到了这个崩溃：

> 无法在 DLL“SQLite.Interop.dll”中找到名为“sqlite3_changes_interop”的入口点

```
A first chance exception of type 'System.EntryPointNotFoundException' occurred in System.Data.SQLite.dll
System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unhandled exception</Description><AppDomain>SparkleShare.vshost.exe</AppDomain><Exception><ExceptionType>System.EntryPointNotFoundException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Unable to find an entry point named 'sqlite3_changes_interop' in DLL 'SQLite.Interop.dll'.</Message><StackTrace>   at System.Data.SQLite.UnsafeNativeMethods.sqlite3_changes_interop(IntPtr db)
   at System.Data.SQLite.SQLite3.get_Changes()
   at System.Data.SQLite.SQLiteStatement.TryGetChanges(Int32&amp;amp; changes)
   at System.Data.SQLite.SQLiteDataReader.NextResult()
   at System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior behave)
   at System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.SQLite.SQLiteCommand.ExecuteNonQuery() 
```

代码没有改变，所以我认为这不是代码问题（无论如何，这[是发生的那一行）。](https://github.com/nicolas-raoul/CmisSync/blob/master/SparkleLib/Cmis/CmisDatabase.cs#L178)

我下载的新版本有问题吗？我在[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)`sqlite-netFx40-static-binary-Win32-2010-1.0.84.0.zip`的`Precompiled Statically-Linked Binaries for 32-bit Windows (.NET Framework 4.0)`段落下载了

编辑：我恢复到以前的 DLL，但问题仍然存在，可能是因为 Visual C# 在某处有一些缓存没有被清理。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T01:40:30.307

确保项目的 x64 和 x86 文件夹中的 SQLite.Interop.dll 已更新到版本 1.0.84.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:35:01.983

你有源代码控制吗？因此，您可以将文件回滚到其工作状态。

清理并构建您的解决方案，然后将您的 SQLite.Interop.DLL 设置为更新的副本。并确保它位于您的 bin 文件中。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T07:38:55.470

我邀请您从 Nuget 包管理器更新 Sqlite 库。它对我有用。

# c# - 在 C# 中对队列进行排序

> ID：14396657
> 
> 赞同：4
> 
> 时间：2013-01-18T10:14:28.310
> 
> 标签：c#, .net, collections, queue, priority-queue

尽管这个问题听起来像是重复的，但我进行了很多搜索，但找不到合适的解决方案。

我有以下课程

```
public enum ChangeType
{ 
    Add,
    Modify,
    Delete
}

public enum ChangedObjectType
{ 
    Project,
    Customer,
    Border,
    Photo
}

public struct ChangeInfo
{
    public ChangeType typeofChange { get; private set; }
    public ChangedObjectType objectType { get; private set; }

    public string objectID { get; private set; }

    public ChangeInfo(ChangeType changeType, ChangedObjectType changeObj, string objectId):this()
    {
        typeofChange = changeType;
        objectType = changeObj;
        objectID = objectId;
    }

} 
```

线 ：

```
public class ChangeInfoUploader
{ 
    static Queue<ChangeInfo> changeInfoQueue = new Queue<ChangeInfo>();
    static Thread changeInfoUploaderThread = new Thread(new ThreadStart(ChangeInfoUploaderProc));
    static bool isStarted = false;
    static Project currentProject;

    public static void Initialize(Project curproject)
    {
        currentProject = curproject;
        isStarted = true;
        changeInfoUploaderThread.Start();
        ResumeData();
    }

    static void ChangeInfoUploaderProc()
    {
        while (isStarted)
        {
            if (currentProject != null)
            {
                ChangeInfo? addToDb = null;

             // I need to sort changeInfoQueue before dequeue
                lock (changeInfoQueue)
                {
                    if (changeInfoQueue.Count != 0)
                        addToDb = changeInfoQueue.Dequeue();
                }
            }
        }
        Logdata();
        changeInfoUploaderThread.Abort();
    }
} 
```

这是 changeInfoQueue 队列的示例数据。

```
<Info TypeofChange="Add" ObjectType="Customer" ObjectId="0005" />
<Info TypeofChange="Add" ObjectType="Customer" ObjectId="0006" />
<Info TypeofChange="Add" ObjectType="Customer" ObjectId="0007" />
<Info TypeofChange="Add" ObjectType="Photo" ObjectId="01a243f5-4894-4d99-8238-9c4cd3" /> 
```

我的问题 ：

*   我需要根据 ObjectType 来整理 changeInfoQueue。我怎样才能做到这一点？

我的发现：

*   我找到了[OrderBy](http://msdn.microsoft.com/en-us/library/bb534966%28v=vs.100%29.aspx)。可以使用吗？如果是这样，怎么做？

除此之外，我还找到了priorityQueue。对我来说最好的解决方案是什么？

**编辑：**

此队列的值在创建相关对象时添加。（项目、边界等）并将其保存在本地 XML 文件中。之后，它需要写入数据库。这是通过使用线程来完成的，当我们保存这些数据时，必须特别保存它以避免外键违规。所以这个线程用来调用那些相关的方法。

我使用 orderby 如下：

```
Queue<ChangeInfo> changeInfoQueue2 = changeInfoQueue.OrderBy(ChangeInfo => ChangeInfo.ObjectType); 
```

然后它抛出以下异常：

无法将类型“System.Linq.IOrderedEnumerable”隐式转换为“System.Collections.Generic.Queue”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-18T10:19:24.497

为什么要按**队列**中的对象类型排序？根据其定义，队列并不意味着以这种方式排序，而是旨在作为先进先出的元素工作。

如果您只想要一个能够被排序的集合和有序列表，请使用列表，或者为您拥有的不同类型的对象创建多个队列。

例如，如果你去超市，你有几个队列，每个不同的部分一个......将所有人放在同一个队列中然后根据他们是否在“排序”他们是没有意义的对于屠夫或面包店。

当您需要“排队”事物时，您有一个队列......如果您不使用适当的构造，请不要尝试将其强制放入队列中。（“如果你有一把锤子，一切看起来都像钉子”......但它不应该）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T10:38:46.497

尽管关于使用队列的所有内容`OrderBy`都是有效的，但您仍然可能希望对队列中的元素进行排序。

您可以基于 a 构建一个新队列`IOrderedEnumerable`：

```
Queue<string> queue = new Queue<string>();
queue.Enqueue("first");
queue.Enqueue("second");
queue.Enqueue("third");
queue.Enqueue("fourth");

// Builds a new queue. Items are now alphabetically ordered
Queue<string> orderedQueue = new Queue<string>(queue.OrderBy(z => z)); 
```

# database - 大数据：存储和查询

> ID：14396663
> 
> 赞同：0
> 
> 时间：2013-01-18T10:15:08.920
> 
> 标签：database

有一个类似的问题[Large data - storage and query](https://stackoverflow.com/questions/352895/large-data-storage-and-query) 但我认为我的问题更难。

我有一个庞大的数据集，为了简化问题，假设每条记录有 3 个字段，

日期、地点、对象

表示在哪一天，对象访问了哪个地方。

每天可以有 5000 万条新记录。我需要保留 100 天的数据。

查询如下：

1.  给定一个日期范围，列出所有访问过特定位置 X 的对象；
2.  给定日期范围，列出特定对象访问过的所有位置。

我应该如何设计这个？有没有可能给出解决方案？我应该尝试任何工具吗？我可以使用 mongodb 或 hadoop 吗？

更重要的是，查询应该不会花费很长时间，因为它将从前端查询。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:20:22.300

您描述的查询非常适合关系数据库。虽然您将拥有大量数据，但查询很适合相当简单的索引方案。

一些商业数据库具有地理空间扩展，允许您将查询扩展到“给定日期范围，告诉我哪些对象位于位置 x 的 20 公里范围内”。

看起来虽然您有大量行，但实际数据大小相当有限；期望它适合高端机器的内存并不是没有道理的。

大多数数据库系统可以处理非常大的表——RDBMS 保存的记录数量没有逻辑限制，但显然存在实际限制。Oracle 在处理大型数据集的性能方面享有盛誉，但绝对值得有经验丰富的 Oracle DBA 提供帮助。处理大量数据时的一种常见策略是“[分片](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)”——将不同的记录放在不同的表和/或服务器中。例如，如果您的所有查询都是基于日期的，您可能会将每个月的数据放在不同的物理服务器上。

我将从 RDBMS 开始，创建一个测试数据集以通过运行和调整示例查询来确定它是否满足您的可伸缩性需求。调整硬件，如果你负担得起，可以添加更多。

我认为你不会从 Hadoop 中获得太多好处——你没有做太多的处理，你只是在搜索一个大型数据集。

MongoDB 旨在处理文档样式的数据；您的数据在本质上似乎是相关的，而不是文档。你可以在 MongoDB 中构建它，但我不确定你会得到多少好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:05:06.213

这个问题并不像听起来那么难。您需要两个索引：

```
(Location, Date, Object)
(Object, Date, Location) 
```

这两个索引可以最佳地满足您的查询。您无需担心固有的可扩展性限制。

您可能会考虑分区，`Date`以便您可以有效地删除旧分区。

# java - Android 应用程序已停止

> ID：14396664
> 
> 赞同：0
> 
> 时间：2013-01-18T10:15:09.590
> 
> 标签：java, android

我是 android 开发的新手，我遇到了一个我无法解决的问题。该应用程序停止工作，我得到一个“错误膨胀类”。我只是想将启动器 xml 文件更改为另一个文件。

这是我的 splash.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" 
  android:background="@drawable/background">

</LinearLayout> 
```

这是我的 Splash.java 文件：

```
package com.carpool.jad;

import android.app.Activity;
import android.os.Bundle;

public class Splash extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
}

} 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.carpool.jad"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是 logcat 报告：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.carpool.jad/com.carpool.jad.Splash}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 
```

谁能告诉我为什么会这样？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:33:18.653

试试这个，只需将其复制并粘贴到您的 xml 中......替换您以前的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="@drawable/background">

</LinearLayout> 
```

# eclipse - Eclipse GDB 与 OpenOCD 结合

> ID：14396665
> 
> 赞同：2
> 
> 时间：2013-01-18T10:15:11.550
> 
> 标签：eclipse, eclipse-cdt, stm32, openocd

我正在`eclipse CDT`制作软件，用于`stm32f0-discovery`使用`ST-link`USB 对该控制器进行编程。

几天前，`OpenOCD6.0.1`我按照本教程开始调试我的芯片：

[调试器教程](http://thehackerworkshop.com/?p=602)

几个小时后，我完成了这项工作，能够逐步实现我的程序设置断点和所有其他通常的调试内容。现在，奇怪的事情发生了。我开始将我的配置从 -> Monitor reset halt 更改为 -> monitor soft_reset_halt 。我这样做是因为我最终想开发一个带有 stm32f0 系列芯片的电路板，我只能使用三根线进行编程（SWD 编程）。因为我没有让它工作，所以我恢复了设置以监控重置暂停。

今天我想调试我的芯片，我遇到了以下问题，当我开始调试时，eclipse告诉我我的设备在它的重置处理程序中（这对我来说似乎是正确的，因为monitor reset halt命令）此时openocd输出是：

```
Open On-Chip Debugger 0.6.1 (2012-10-07-10:34)
Licensed under GNU GPL v2
For bug reports, read
    http://openocd.sourceforge.net/doc/doxygen/bugs.html
adapter speed: 1000 kHz
srst_only separate srst_nogate srst_open_drain
Info : clock speed 1000 kHz
Info : stm32f0x.cpu: hardware has 4 breakpoints, 2 watchpoints
Info : accepting 'gdb' connection from 3333
Info : device id = 0x20006440
Info : flash size = 64kbytes
Warn : acknowledgment received, but no packet pending
undefined debug reason 6 - target needs reset
target state: halted
target halted due to debug-request, current mode: Thread 
xPSR: 0xc1000000 pc: 0x0800291c msp: 0x20002000
Info : Padding image section 0 with 4 bytes
target state: halted
target halted due to breakpoint, current mode: Thread 
xPSR: 0x61000000 pc: 0x2000003a msp: 0x20002000
Warn : stepi ignored. GDB will now fetch the register state from the target. 
```

现在，我想跨过重置处理程序来启动我的程序，然后我收到这个警告：

> 警告：stepi 被忽略。GDB 现在将从目标中获取寄存器状态。

经过一番谷歌搜索后，我找不到任何导致此问题的原因。有没有人有解决这个问题的线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:23:43.923

好的，我发现了这个。因为我使用了不止一个 stm32f0discovery 板（一个用于我的工作，一个用于家庭爱好）。板的配置是不同的。因此，我不得不更新不工作的主板固件。固件比我家里的固件旧 2 个版本。

问题解决了 ：）

# glassfish - Glassfish javaagent 检测类经验 NoClassDefError

> ID：14396672
> 
> 赞同：0
> 
> 时间：2013-01-18T10:15:31.570
> 
> 标签：glassfish, osgi, classloader, instrumentation, javaagents

我的 Oracle GlassFish 3.1.2.2 (build 5) 服务器插入了我自己的 javaagent。

javaagent 通过注入一段引用javaagent.jar 中可用类的字节码来检测特定类（比如servlet）。当注入的片段被执行时，glassfish 会抛出 NoClassDefError。

我想知道预期的类已经由基类加载器加载，并且应该对子加载器可见。尝试过 OSGi 引导委托，但没有用。我要去哪里穿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:29:13.253

将 javaagent.jar 保存在 domain/domain1/lib/ext 中可以解决此问题。希望该解决方案对将来的某人有所帮助..

# sharepoint - SharePoint 2010 - 缺少网站页面/home.aspx

> ID：14396674
> 
> 赞同：1
> 
> 时间：2013-01-18T10:15:32.667
> 
> 标签：sharepoint, sharepoint-2010

我正在创建 SharePoint 2010 网站集并面临一个问题，当我创建一个成功创建的网站集但当我浏览该网站时它显示错误页面。

我输入像**http://computername:81**这样的 URL并按 Enter 按钮，它会自动更改为 URL **http://computername:81/SitePages/Home.aspx**并显示错误页面。

当我将 URL 更改为**http://computername:81/Default.aspx**时，它运行良好。

我注意到**站点页面**目录中缺少 Home.aspx 页面。

我还检查**了 Wiki Page 主页**功能是否已启用。

任何帮助，将不胜感激。

问候：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:55:46.640

你想让我做什么 ？

我的意思是你想让 Home.aspx 可用，你必须再次创建它。

如果没有，则将您网站的欢迎页面从 Home.aspx 更改为 default.aspx

转到站点操作 > 站点设置 > 在外观下单击欢迎页面。

将其从 Home.aspx 更改为 default.aspx

希望这可以帮助

谢谢

# php - 使用 PHP 的动态表列

> ID：14396676
> 
> 赞同：0
> 
> 时间：2013-01-18T10:15:43.223
> 
> 标签：php, mysql, sql

我想使用一个 MySQL 查询创建一个包含 2 个动态列的表。我能够制作第一行列，但第二行只是空白。有任何想法吗？这是我当前的代码：

```
<?php
$query_dates ="SELECT uploadedby, count(item) as item, date_format(uploaddate, '%m-%d-%y') as date FROM `imsexport` WHERE uploadedby='Gerry Dellosa' and uploaddate between '2012-12-25' and '2013-01-15' GROUP BY date ORDER BY uploaddate ASC";
$result = mysql_query($query_dates,$prepress) or die(mysql_error());
$row_dates = mysql_fetch_assoc($result);
?>

<html>
<head>
</head>
<body>
<table width="200" border="1">
  <tr>
    <td>NAME</td>
<?php do{?>
    <td><?php echo $row_dates['date']?></td>
<?php } while ($row_dates = mysql_fetch_assoc($result)); ?>
 </tr>
 <tr>//This is the second row set of dynamic columns
   <?php do{?>
    <td><?php echo $row_dates['date']?></td>
   <?php } while ($row_dates = mysql_fetch_assoc($result)); ?>  
 </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:20:35.973

```
<?php
$query_dates ="SELECT uploadedby, count(item) as item, date_format(uploaddate, '%m-%d-%y') as date FROM `imsexport` WHERE uploadedby='Gerry Dellosa' and uploaddate between '2012-12-25' and '2013-01-15' GROUP BY date ORDER BY uploaddate ASC";
$result = mysql_query($query_dates,$prepress) or die(mysql_error());
while($row_dates = mysql_fetch_assoc($result)) {
    $record[] = $row_dates;
}
?>

<html>
<head>
</head>
<body>
<table width="200" border="1">
  <tr>
    <td>NAME</td>
<?php foreach($record as $rec ) { ?>
    <td><?php echo $rec['date'] ?></td>
<?php } ?>
 </tr>
 <tr>//This is the second row set of dynamic columns
   <?php foreach($record as $rec ) { ?>
    <td><?php echo $rec['date'] ?></td>
   <?php } ?>
 </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T10:22:24.553

在第二行之前重置获取循环

```
mysql_data_seek($result,0); 
```

# php - 在php中打印类的所有函数输出？

> ID：14396681
> 
> 赞同：0
> 
> 时间：2013-01-18T10:15:59.150
> 
> 标签：php, class

嗨朋友们，我是**php**新手，我正在尝试学习类我正在尝试使用以下代码获取类中**描述的所有****函数****名称**任何人都可以告诉我**如何**打印**类**中**函数**的**输出**

 ******```
<?php
    class dog {
                    public function bark() {
                    print "Woof!\n";
                    }

                    public function legs() {
                    print "four!\n";
                    }
             }

    class poodle extends dog {
      public function yip() {
            print "Yipppppppp!\n";
        }
    }

    $poppy = new poodle;

    //$poppy->bark();
    $class_methods = get_class_methods(new poodle());
    //echo    $class_methods;
        foreach($class_methods as $class_methods1)
        {
        echo $class_methods1.'<br/>';
        }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:21:05.953

这应该有效：

```
$poodle = new poodle();
$class_methods = get_class_methods($poodle);
//echo    $class_methods;
foreach($class_methods as $class_method)
{
    echo $class_method.'\'s Output: '.$poodle->$class_method()."<br />"; 
} 
```

一般来说：

如果你有一个值，`$test = "abc"`你可以将它（在 php 中）评估为变量名或函数等：

```
$test = "abc";
$test() // equal to abc() - if function abc exists.

echo $$test // equal to echo $abc - if $abc is defined.

$anotherTest = new $test(); // equal to new abc() - if class exists. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:19:50.050

```
$poppy = new poodle;

$class_methods = get_class_methods($poppy);

foreach($class_methods as $class_method_name)
{
    echo $class_methods_name.' => '
        // Either:
        .$poppy->$class_method_name()
        // OR (prefered method, but more typing)
        .call_user_func(array($poppy, $class_method_name))

        .'<br/>';

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:21:11.677

可以使用变量代替方法名称来执行您想要的操作。注意：您不需要`echo`方法调用的结果，因为您的方法都是`print`一些东西，但它们实际上并没有返回任何东西。

**[演示](http://codepad.org/2JRLtrQV)**

```
$poppy = new poodle;

$class_methods = get_class_methods($poppy);

foreach($class_methods as $class_methods1)
{
   $poppy->$class_methods1() . '<br/>';
} 
```

**输出**

```
Yipppppppp!
Woof!
four! 
```******

# oracle - Oracle 可变数组，无效的数据类型

> ID：14396685
> 
> 赞同：0
> 
> 时间：2013-01-18T10:16:23.983
> 
> 标签：oracle, stored-procedures, user-defined-types

我有这个功能

```
TYPE TEST_DATA IS VARRAY(100) OF NUMBER;
function TEST(p IN NUMBER)
return TEST_DATA ; 
```

在函数体中

```
function TEST(p IN NUMBER)
return TEST_DATA is
test_exit TEST_DATA;

begin
   test_izlaz := TEST_DATA();
    test_izlaz.extend;
    test_izlaz(1) := 5;    
return test_izlaz;
end TEST; 
```

当我尝试从命令行调用函数时，我得到“ORA-00902：无效数据类型”？我究竟做错了什么 ？我需要 varray 因为这将获取复杂的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:37:35.147

请澄清你是如何称呼它的。“命令行”是SQLPLUS？好像是这样，那么它对我有用：

```
SQL> create or replace package foo
  2  as
  3    TYPE TEST_DATA IS VARRAY(100) OF NUMBER;
  4    function TEST(p IN NUMBER)
  5      return TEST_DATA ;
  6  end;
  7  /

Package created.

SQL> create or replace package body foo
  2  as
  3    function TEST(p IN NUMBER)
  4    return TEST_DATA
  5    is
  6      test_izlaz TEST_DATA;
  7    begin
  8      test_izlaz := TEST_DATA();
  9      test_izlaz.extend;
 10      test_izlaz(1) := 5;
 11      return test_izlaz;
 12    end TEST;
 13  end;
 14  /

Package body created.

SQL> set serverout on
SQL> declare
  2    t foo.test_data;
  3  begin
  4    t := foo.test(1);
  5    for idx in 1..t.count
  6    loop
  7      dbms_output.put_line(t(idx));
  8    end loop;
  9  end;
 10  /
5

PL/SQL procedure successfully completed.

SQL> 
```

# jasper-reports - Nexus 存储库不镜像 jasperreports 5.0.0 jar

> ID：14396686
> 
> 赞同：1
> 
> 时间：2013-01-18T10:16:28.803
> 
> 标签：jasper-reports, nexus

我正在尝试为 maven 项目设置一个 nexus 存储库。我有 nexus 工作，我在 eclipse 中创建了一个简单的 maven 项目。好像没问题。

问题是当我在我的 pom.xml 中添加 jasperreports 5.0.0 依赖项时，maven 没有下载 jar。

```
 <dependency>
    <groupId>net.sf.jasperreports</groupId>
    <artifactId>jasperreports</artifactId>
    <version>5.0.0</version>
  </dependency> 
```

我已将[http://jasperreports.sourceforge.net/maven2/](http://jasperreports.sourceforge.net/maven2/)添加为 nexus 的代理存储库，并将其配置为公共组的成员，但没有任何反应。

这是我的 Maven settings.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository>E:\mavenRep\repository</localRepository>
  <mirrors>
   <mirror>
      <id>NexusEGEA</id>
      <mirrorOf>*</mirrorOf>
      <name>Nexus en la máquina de desarrollo de EGEA.</name>
      <url>http://geades.adm.es/nexus/content/groups/public/</url>
    </mirror>
  </mirrors> 

  <profiles>
    <profile>
      <id>NexusEGEA</id>
      <repositories>
        <repository>
          <id>central</id>
          <url>http://geades.adm.es/nexus/content/groups/public</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://geades.adm.es/nexus/content/groups/public</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>

  <activeProfiles>
    <activeProfile>NexusEGEA</activeProfile>
  </activeProfiles>
</settings> 
```

有人知道我在做什么错吗？

[为添加关联信息而编辑]

在 nexus 管理应用程序上浏览公共索引时，我看不到 de jar 文件。我只在 net.sf.jasperreports.jasperreports.5.0.0 下看到 jasperreports-5.0.0-javadoc.jar 、 jasperreports-5.0.0-sources.jar 和 jasperreports-5.0.0.pom。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:07:08.097

该存储库不包含您要求的依赖项。`net.sf.jasperreports:jasperreports:5.0.0`应该在[http://jasperreports.sourceforge.net/maven2/net/sf/jasperreports/jasperreports/5.0.0](http://jasperreports.sourceforge.net/maven2/net/sf/jasperreports/jasperreports/5.0.0)，但这并不存在。

也就是说，您要查找的工件[位于 central 上](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22net.sf.jasperreports%22%20AND%20a%3A%22jasperreports%22)，默认情况下应该可以从您的公司 Nexus 获得。

# jquery - 通过在 mysql 数据库中插入值来更改 jquery 事件日历事件的背景颜色

> ID：14396688
> 
> 赞同：0
> 
> 时间：2013-01-18T10:16:31.067
> 
> 标签：jquery, mysql, events, background, fullcalendar

我有一个 JQuery 事件日历，其中显示了事件我想要一个单击功能来更改事件的背景颜色并插入一个永久颜色更改的值。我还想要一个运行更改颜色事件日历的代码。这是我的活动日历代码...

```
$(document).ready(function () {

    $('#Uploaded').hide();

    $('#chang').click(function () {
        $('#Uploaded').show('slow');
    });

    $('#chang2').click(function () {
        $('#Uploaded').show('slow');
    });

    $('.fc-event-skin').live("click", function () {
        $(this).css('background-color', '#090');
        $(this).css('border-color', '#090');
    });

    $('#calendar').fullCalendar({

        editable: true,
        eventColor: '#cd3427',    
        events: "json-events.php",    
        buttonText: {
            today: 'idag'
        },
        monthNames: ['Januari', 'Februari', 'Mars', 'April', 'Maj', 'Juni', 'Juli',
                     'Augusti', 'September', 'Oktober', 'November', 'December'],    
        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday',
                   'Thursday', 'Friday', 'Saturday'],

        eventDrop: function (event, delta) {

            $.ajax({
                type: "POST",
                url: "drag.php",
                data: "date=" + delta + "&id=" + event.id,
                success: function (msg) {
                    //alert( "Data Saved: " + "id="+ event.id +"&date="+ delta );
                }
            });

        },

        loading: function (bool) {
            if (bool) $('#loading').show();
            else $('#loading').hide();
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:44:08.143

你读过 API 吗？

[http://arshaw.com/fullcalendar/docs/event_data/Event_Source_Object/#options](http://arshaw.com/fullcalendar/docs/event_data/Event_Source_Object/#options)

以下是使用事件生成功能的方法：

```
......
events: function (start, end, callback) {
    $.ajax({
        url: url,
        data: "json-events.php",
        success: function (data) {
            console.log(data);
            //console.log is to see what you are receiving from server actually (event text,color,id....whaever you send), use google chrome, press F12 to open console
            //here you do whatever you want with your data fetched from server if any modification required
            //just make it look like this finally
            //[event0,event1,event2,.....]
            //Where your event array elements are javascript objects
            //finally give the array to the calendar:

            //callback([event0,event1,event2,.....])
        },
        dataType: /* xml, json, script, or html */
    });
},
.... 
```

数组中的每个事件对象是什么样的？ [http://arshaw.com/fullcalendar/docs/event_data/Event_Object/](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/) 事件属性在我在上面发布的页面上，但无论如何是一个带有可选和必需属性的javascript对象！我正在举一个列出所有的例子！您自己决定哪些对您的情况有用：

```
{
    id: "id value", 
    end: "end date", //when event ends - required field
    start: "start date", // when event starts - required field
    title: "title value",
    textColor: "color value",
    className: "add your style Class",
    backgroundColor: "color value",
    borderColor: "color value",
    editable: "boolean value"
} 
```

# c++ - 声明结构时的向量分配

> ID：14396690
> 
> 赞同：1
> 
> 时间：2013-01-18T10:16:34.257
> 
> 标签：c++, vector, struct

您可以创建一个包含数组的 C++ 结构：

```
struct foo{
    int bar[42];
}; 
```

我想做的是：

```
struct foo{
    std::vector<int> bar(42);
}; 
```

当然这不会编译，但你明白了。我知道 .reserve() 等，但我希望在声明 .reserve() 时已经分配了空间`foo`。

原因是我应该修改一个相当复杂的 Perl 脚本，该脚本在结构中生成带有数组的 C 代码。这些数组应替换为`std::vector`s。该脚本随后根据 XML 文件初始化数组，我不想`push_back`在脚本中乱用，因为结构是深度嵌套的（数组结构和结构数组）。数组的大小当然会有所不同。

感谢您的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:18:17.393

使用构造函数：

```
struct foo{
    std::vector<int> bar;
    foo() : bar(32) {}
}; 
```

创建实例时将自动分配向量的内存。初始化列表在构造函数主体执行之前初始化成员。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T10:18:24.347

添加一个构造函数并使用初始化列表：

```
struct foo {
    foo() : bar(42) {}
    std::vector<int> bar;
}; 
```

如果您的编译器支持 C++11 功能，请[`std::array<>`](http://en.cppreference.com/w/cpp/container/array)改用。

```
struct foo {
    std::array<int, 42> bar;
}; 
```

或者[`boost::array<>`](http://www.boost.org/doc/libs/1_52_0/doc/html/array.html)如果 C++11 不可用并且允许 boost。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T10:48:33.503

现有的答案已经解释了如何做你想做的事，但我认为他们错过了解释原因的重要部分。您需要掌握的是，`struct`在 C++ 中，它只是一个近乎同义的同义词，`class`唯一的*区别*是结构默认具有公共成员，而类默认具有私有成员。`class`您可以将代码中的每个实例替换为

```
struct X
{
    private:
    ...
} 
```

它的工作原理完全相同，*反之亦然*，替换`structs`为`class`. 这意味着就像您使用构造函数对类执行所需的操作一样，您将构造函数与结构一起使用：

```
struct foo
{
    std::vector<int> bar;
    foo() : bar(42) {}
} 
```

顺便说一句，这个[构造函数](http://www.cplusplus.com/reference/vector/vector/vector/)还需要`std::vector`几个参数，第二个参数是填充向量的值，因此你可以`foo() : bar(42, -1) {}`用 的值填充向量`-1`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:18:08.310

您应该在结构的构造函数中（最好在其初始化列表中）设置向量的大小（即 call`std::vector`的构造函数）。

像这样：

```
struct foo{
    foo() : bar(42) {}
    std::vector<int> bar;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T10:27:34.340

使用构造函数，如其他答案中所建议的那样。但我必须解决你：

1.  空间将在定义*后*“已经分配” （在使用构造函数的情况下）；
2.  你不应该使用 .reserve()，只能使用 .resize()（**在你理解差异之前**）；
3.  您可以在声明后安全地调用 .resize() 并且几乎没有开销（而不是使用构造函数）。**但无论如何，学习和使用构造函数。**

# javascript - 检索一个数组中所有输入的值 - Jquery

> ID：14396695
> 
> 赞同：0
> 
> 时间：2013-01-18T10:16:50.607
> 
> 标签：javascript, jquery, arrays

> **可能重复：**
> [JQuery。如何将输入值加载到数组中？](https://stackoverflow.com/questions/1859363/jquery-how-to-load-inputs-values-to-an-array)

我想检索一个数组中所有输入的值，所以我把

```
var inputs = $('input').val();
    var store = [];
    $(inputs).each(function(){
            $(store).push($(this));
            }
    ); 
```

但是，当我将它放入控制台并提醒内容时，我收到一条未定义的消息。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:18:27.837

`$('input').val();`返回第一个匹配元素的值，而不是数组。

```
 var store = [];
    $('input').each(function() {
          store.push($(this).val());
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:20:08.163

您可以使用[`.map()`](http://api.jquery.com/map/)方法：

```
var store = $("input").map(function() {
    return this.value;
}).get(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:21:20.310

需要在不同的地方进行更改...重写为

```
var store = [];
$("input").each(function(){
        store.push($(this).val());
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:20:03.670

你可以这样做：

```
var store = $.map($('input'), function(elm) { return elm.value }); 
```

它将所有值映射到一个数组。

# kineticjs - Kineticjs：如何识别哪个组被拖了？

> ID：14396697
> 
> 赞同：1
> 
> 时间：2013-01-18T10:16:54.737
> 
> 标签：kineticjs

我正在使用 Kineticjs。

我有一些组到一个图层中，它们是可拖动的。当我拖动一个组时，我想知道哪个组被拖动了。有什么办法知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:44:45.363

是的，假设你给你的组一个名字或一些标识符，你可以这样做：

```
group.on('dragend', function(){
    var name = this.getName(); //or any other variable of the group config, like x/y values
    alert(name);
});

group.on('dragend', function(){
    var id = this.getId(); //unique id
    alert(id);
}); 
```

如果你不给它一个标识符，你可以这样做：

```
group.on('dragend', function(){
    var draggedGroup = this; // Identifies your group with 'this'
}); 
```

总而言之，您必须将一个事件附加到该组，例如 dragstart、dragmove 或 dragend 以识别您是否需要该函数来返回某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T20:23:21.250

我知道它的回答，但也可以如下所示或@EliteOctagon 的评论中提到的那样做。

```
layer.on('mousedown', function (evt) {

var SelectedGroup = evt.targetNode.getParent();

}); 
```

来源： [http ://www.html5canvastutorials.com/kineticjs/html5-canvas-get-event-shape-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-get-event-shape-with-kineticjs/)

# tfsbuild - 在 TFS 构建中，工作目录是否可以位于与 $(SystemDrive) 不同的分区上

> ID：14396700
> 
> 赞同：0
> 
> 时间：2013-01-18T10:17:08.007
> 
> 标签：tfsbuild

是否可以设置 TFS2010 构建规则/模板以在 $(SystemDrive) 的不同分区上创建构建工作区？

现在，我们已经建立了一个专用的构建服务器，所有工具等都安装到了 c:\ 分区。我们为所有数据创建了一个 D:\ 分区。

理想情况下，我希望所有构建都在 D:\Builds\$(BuildAgentId)\$(BuildDefinitionPath) 中构建，但仍然从 C:\ 驱动器引用所有 MS 链接、依赖项等。

我不确定这是如何完成的

我尝试将代理工作区更改为 D:\Builds，但构建随后会在 D:\ 驱动器上查找工具。

我还尝试将模板中的 Build Agent 文件夹更改为 D:\Builds，结果相同。

我必须遗漏一些东西，因为我怀疑这样做应该可以吗？

任何帮助/建议/指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T15:08:17.307

打开 Visual Studio TeamExplorer 并转到任何 TeamProject 中的构建。右键单击它，然后`Manage Build Controllers...`选择`Build Agent`您正在使用的并按`Properties..`。在这里您可以设置`Working Directory`为`d:\Builds\$(BuildAgentId)\$(BuildDefinitionPath)`. 这在我工作过的所有公司都很好用。

构建需要什么样的工具？也许使用了相对路径，它在实际位置之外的其他位置不起作用。

# java - jqgrid如何显示服务器端消息

> ID：14396701
> 
> 赞同：5
> 
> 时间：2013-01-18T10:17:09.920
> 
> 标签：java, javascript, servlets, jqgrid, response

我`jqGrid`用来以表格格式显示数据，使用`JSP`和`servlet`。

**编辑**

当执行类似的操作时，我想显示来自服务器的错误`insert, update, delete`。`(datatype: "xml")`

**JQGrid**

```
jQuery("#list10_d").jqGrid({
                height:250,
                width:600,
                url:'Assignment?action=Assign',
                datatype: "xml",
                colNames:['Sr. No.','PID',  'DATE',  'EMPID'],
                colModel:[{name:'srNo',index:'srNo', width:30,sortable:false},
                           {name:'PID',index:'PID',width:0, sortable:true,editable:false},
                           {name:'DATE',index:'DATE', width:75,sortable:true,editable:true,editoptions: { dataInit: function(el) { setTimeout(function() { $(el).datepicker({dateFormat:"dd-M-yy",showButtonPanel: true,changeYear: true,changeMonth: true}).attr('readonly','readonly'); }, 200); }}},
                           {name:'EMPID',index:'EMPID', width:150,sortable:true,editable:true}
                           ],
                rowNum:10,
                rowList:[10,20,50,100],
                pager: '#pager10_d',
                sortname: 'PID',
                viewrecords: true,
                sortorder: "asc",

                    },
                multiselect: true,
                editurl: "Assignment?action=Edit",
                caption:"Assignment"
            } ).navGrid('#pager10_d',{edit:false,add:true,del:false,addtext:'Assign '},
                    {},
                    {modal:true,jqModal: false,closeOnEscape:true,savekey: [true,13],closeOnEscape:true, recreateForm: true,width:500,mtype:'POST', url: 'Assignment',editData:{action: 'Assign',PID: function () {return PID;}}, 
                afterSubmit: function (response) {
                        alert('After Submit \n' +'statusText: '+ response.statusText);
                        var myInfo = '<div class="ui-state-highlight ui-corner-all">'+
                                     '<span class="ui-icon ui-icon-info" ' +
                                         'style="float: left; margin-right: .3em;"></span>' +
                                     response.statusText + 'Inserted'+
                                     '</div>',
                             $infoTr = $("#TblGrid_" + $.jgrid.jqID(this.id) + ">tbody>tr.tinfo"),
                            $infoTd = $infoTr.children("td.topinfo"); 
                        $infoTd.html(myInfo);
                        $infoTr.show();

                        // display status message to 3 sec only
                        setTimeout(function () {
                            $infoTr.slideUp("slow");
                        }, 5000);

                        return [true, "", ""]; // response should be interpreted as successful
                    },
                    errorTextFormat: function (response) {
                    alert('Error Text Format: \n' +'statusText: '+ response.statusText);

                        return '<span class="ui-icon ui-icon-alert" ' +
                                     'style="float:left; margin-right:.3em;"></span>' +
                                    response.statusText;},
                    {closeOnEscape:true, recreateForm: true,mtype: 'POST',url: 'Assignment',delData: {action: 'Delete',PID: function () {return PID;}}},
                    {}) ; 
```

**小服务程序代码**

```
if(request.getParameter("action").equalsIgnoreCase("Assign"))
        {
            PID = request.getParameter("PID");
            String DATE= request.getParameter("DATE");
            String EMPID= request.getParameter("EMPID");

            String query = "insert into ASSIGN(PID,DATE,EMPID) values('"+ PID +"','"+ DATE +"','"+ EMPID"')";
            boolean b = insert.InsertData(query);
            if(b)
            {
                System.out.println("New record added successfully! : "+query);
                response.setContentType("text/xml");
                response.setCharacterEncoding("UTF-8");

                //response.sendError(200, "success");
                response.setStatus(200, "Inserted successfully");

            }
            else
            {
                System.out.println("Failed to add Record! : "+query);
                response.setContentType("text/xml");
                response.setCharacterEncoding("UTF-8");

                //response.sendError(399, "not Inserted successfully");   
                response.setStatus(404, "Error while inserting");   
            }           
        }//INSERT 
```

对于上面的例子

*   `inserting`从 jqgrid 记录后，如果`No message is shown`记录是，则在网格中`inserted successfully`
*   `error Status: 'Unauthorized'. Error code: 401`如果 servlet 无法在数据库中插入记录，则会显示。

我的问题是：

*   从 jqgrid 记录后`inserting`，如果插入了记录，那么我应该如何向用户显示已插入数据的信息。
*   以及我应该如何向用户发送消息`Error while inserting`（`error code`我应该使用哪个？）

提前致谢.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T22:26:19.260

我在[旧答案](https://stackoverflow.com/a/6803206/315935)和[另一个](https://stackoverflow.com/a/13912926/315935)答案中建议使用现有的隐藏行网格形式 ( `tr.tinfo`) 来显示不是错误的信息。因为答案并不为人所知，所以我在这里重复相同的信息，但我会尝试更详细地解释所有内容。

首先，重要的是要了解哪些元素具有标准的编辑/添加表单。使用 IE 或 Chrome、Firebug 或许多其他工具的开发人员工具可以很容易地发现 jqGrid 创建的添加/编辑表单在表单**顶部包含两个隐藏行**：

![在此处输入图像描述](../Images/ad20dd757a2c2aa1e76f0017094c2498.png)

默认情况下，第一行将用作错误消息的位置。可以使用`errorTextFormat`一点点自定义信息。

如果服务器响应包含错误 HTTP 状态代码 (>=400)，则将调用回调`errorTextFormat`，您可以使用

```
errorTextFormat: function (response) {
    return response.responseText;
} 
```

或类似的东西

```
errorTextFormat: function (response) {
    return '<span class="ui-icon ui-icon-alert" ' +
                 'style="float:left; margin-right:.3em;"></span>' +
                response.responseText;
} 
```

显示错误消息，如

![在此处输入图像描述](../Images/9912d7b2d6d88a0d939f41b20f1d9609.png)

[同样，如果服务器响应包含成功的HTTP 状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)`afterSubmit`，则可以在提交编辑/添加的数据后使用回调显示状态消息。的实施可能是关于以下`afterSubmit`

```
afterSubmit: function (response) {
    var myInfo = '<div class="ui-state-highlight ui-corner-all">'+
                 '<span class="ui-icon ui-icon-info" ' +
                     'style="float: left; margin-right: .3em;"></span>' +
                 response.responseText +
                 '</div>',
        $infoTr = $("#TblGrid_" + $.jgrid.jqID(this.id) + ">tbody>tr.tinfo"),
        $infoTd = $infoTr.children("td.topinfo");
    $infoTd.html(myInfo);
    $infoTr.show();

    // display status message to 3 sec only
    setTimeout(function () {
        $infoTr.slideUp("slow");
    }, 3000);

    return [true, "", ""]; // response should be interpreted as successful
} 
```

该代码将仅显示 3 秒 abd 的状态消息，然后使用[jQuery.slideUp](http://api.jquery.com/slideUp/)动画将其隐藏。它看起来像

![在此处输入图像描述](../Images/708ad91e28566ec7e62b31cce3b49780.png)

我希望这是你需要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T13:48:01.947

我在对我的服务器的编辑调用中做了类似的事情，所以我认为这将以与添加非常相似的方式工作。

在编辑/删除/添加调用之后的控制器上，您将确定是否有要传递给用户的消息，如果是，则通过 JSON（在您的情况下为 XML）将其传递回网格。

前任

```
 if (infoDialogTrigger) { 
       return Json(new { success = true, showMessage = true, message = "Updating your Inventory and we are displaying this info box" }); 
    }//if
    else { 
       return Json(new { success = true, showMessage = false, message = "" }); 
    }//else 
```

在您的 jqGrid 中，您将拥有编辑/删除/添加功能：

```
 function EditCollectionItem (rowid, grid){
        $(grid).jqGrid('editGridRow', rowid,
        {
            viewPagerButtons: false,
            editData: { },
            afterComplete: function (response) {
                var DialogVars = $.parseJSON(response.responseText); //parse the string that was returned in responseText into an object
                //if there was a failure with the update, or there was information to pass to the user
                if (!DialogVars.success || DialogVars.showMessage) {
                    alert(DialogVars.message);
                }
            } //afterComplete
        }); //$(grid).jqGrid('editGridRow
    }//function EditCollectionItem (rowid, grid){ 
```

因此，在上面的示例中，如果操作失败，您可以显示一条带有 a 的消息，`success = false`或者如果操作已完成，但您想将一些额外信息传递给用户，您也可以使用`sucess = true`&& `showMessage = true`。

这是一个 JSON 编辑示例，但概念和逻辑对于 XML 和添加/删除操作应该是相同的。

# java - 使用 Dom Parser 在 Java 中解析不同的结构化 XML？

> ID：14396704
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:17:21.900
> 
> 标签：java, xml, dom, xml-parsing

我正在尝试使用 Java 中的 Dom Parser 解析 XML 数据。

我成功解析了以下 XML 数据 -

```
<note>
<to>Tove</to>
<from>Jani</from>
<heading>Reminder</heading>
<body>Don't forget me this weekend!</body>
</note> 
```

我使用了[**HERE**](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)中的代码。

但是当我试图解析以下 XML 数据时 -

```
<body message="hello">
<mainData data1="XYZ" data2="ABC" data3="PQR"></mainData>
</body> 
```

它给出了空指针异常。

两种 XML 都有不同的结构，第一个很常见，但第二个我不知道。

请帮助我使用 Java 解析第二种结构中的 XML。

我的代码是 -

```
try

{
    String strUrl = "http://someurl";
    URL url = new URL(strUrl);
    InputStream inStream = url.openStream();

    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(inStream);

    NodeList nList = doc.getElementsByTagName("body");

    for (int i = 0; i < nList.getLength(); i++) 
    {
           Node nNode = nList.item(i);
           if (nNode.getNodeType() == Node.ELEMENT_NODE)
           {
              Element eElement = (Element) nNode;

              NodeList nListRoute = eElement.getElementsByTagName("mainData");
              for (int j = 0; j < nListRoute.getLength(); j++)
              {
                   Node nNodeRoute = nListRoute.item(j);
                   if (nNodeRoute.getNodeType() == Node.ELEMENT_NODE)
                   {
                      Element eElementRoute = (Element) nNodeRoute;

                      NodeList nlList = eElementRoute.getElementsByTagName("data1").item(0).getChildNodes();
                      Node nValue = (Node) nlList.item(0);
                      System.out.println("data1 : " + nValue.getNodeValue());
                  }                        
             }                           
          }                
    }           
}
catch (Exception e) 
{
    e.printStackTrace();
} 
```

我得到了错误 -

```
java.lang.NullPointerException 
```

在行“ ***NodeList nlList = eElementRoute.getElementsByTagName("data1").item(0).getChildNodes();*** ”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-05T06:24:50.967

好吧，您正在尝试获取元素，并且正在获取属性。所以我的建议是，尝试清除基本原理，如果你想获取元素，那么你必须这样写

```
nodeobject.getElementsByTagName("Elementobject"); 
```

因为没有标签，所以这给了你

```
NUll POINTER 
```

`FOR loop`如果属性存在，则必须选择属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:47:06.100

data1 不是元素，而是属性。因此，当使用 getElementByTagName() 方法然后在其上调用方法 item() 时，不检查第一个是否返回任何内容会导致 NullPointerException。

尝试获取属性。例如，请在此处查看： [http ://www.drdobbs.com/jvm/easy-dom-parsing-in-java/231002580](http://www.drdobbs.com/jvm/easy-dom-parsing-in-java/231002580)

# php - 尝试在 CakePHP 中显示表单时，为什么会出现“调用未定义的方法”错误？

> ID：14396705
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:17:24.013
> 
> 标签：php, cakephp

嗨，我在我的 cakephp 中编写了以下代码。

```
<?php
    //Posts is the name of my View folder, add, edit arethe pages in Posts folder.
echo $this->Posts('add_or_edit');
?>
<fieldset>
<legend>
<?php  _('Add a Post'); ?>
</legend>
Please fill in all the fields.
<?php
echo $form->create('Post');
echo $form->error('Post.title');
echo $form->input('Post.title',array('id'=>'posttitle','label'=>'title','size'=>'50','maxlength'=>'255','error'=>false));
echo $form->error('Post.content');
echo $form->input('Post.content',array('id'=>'postcontent','type'=>'textarea','label'=>'Content:','rows'=>'10','error'=>false));
echo $form->end(array('label'=>'Submit Post'));
?>
</fieldset> 
```

好吧，每当我尝试显示上面的代码时，我都会收到这样的错误

```
 Call to undefined method View::Posts() in C:\wamp\www\cake_php\app\View\Posts\add.ctp on line 2 
```

我的代码有问题还是我需要更改我的视图文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:37:52.607

我希望这对你有用......你错过了 $this

```
 <fieldset>
        <legend>
        <h2> Add a Post Here </h2>
        </legend>
        Please fill in all the fields.
        <?php
        echo $this->form->create('Post');
        echo $this->form->error('Post.title');
        echo $this->form->input('Post.title',array('id'=>'posttitle','label'=>'title','size'=>'50','maxlength'=>'255','error'=>false));
        echo $this->form->error('Post.content');
        echo $this->form->input('Post.content',array('id'=>'postcontent','type'=>'textarea','label'=>'Content:','rows'=>'10','error'=>false));
        echo $this->form->end(array('label'=>'Submit Post'));
        ?>
        </fieldset> 
```

# android - 在新的 android 地图 api 中首次启动没有互联网连接的应用程序后地图不绘制

> ID：14396706
> 
> 赞同：3
> 
> 时间：2013-01-18T10:17:24.317
> 
> 标签：android, google-maps

我现在正在使用来自新谷歌地图 api v2 的 MapFragment。一切正常，除非我第一次在没有互联网的情况下启动我的应用程序，然后当互联网恢复并再次打开地图时，地图一直显示为空白。

谁能帮我解决这个问题？这个问题也可以在谷歌的示例地图应用程序中找到。

AndroidManifest.xml

 `````
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >
<permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<!-- Maps API needs OpenGL ES 2.0\. -->
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="[map_key]" />

    <activity
        android:name="com.example.test.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
````  `MainActivity.java

 `````
package com.example.test;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
````  `activity_main.xml

 `````
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:map="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"
    map:uiCompass="false"
    map:uiZoomControls="false" />

</RelativeLayout> 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:26:25.233

我认为这是谷歌服务的一个错误。他们已经在新的 Google play 服务中修复了它。您需要在 Android SDK 中更新您的 Google Play 服务和 API。然后尝试将更新后的 Google Play 服务库导入到您的项目中。重新编译你的项目。我认为它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:12:10.377

地图活动在模拟器上不起作用。此外，除非您使用有效的密钥库导出应用程序，否则它不会运行。最后是清单文件上正确的 mapAPI 密钥。``````

# php - 如何在 YII 设置 CGridView 的分页样式？

> ID：14396708
> 
> 赞同：3
> 
> 时间：2013-01-18T10:17:31.233
> 
> 标签：php, yii

如何在 YII 设置 CGridView 的分页样式？

在 cgridview 中，它按图片显示寻呼机。

我想通过以下方式显示寻呼机位置。

第一个 上一个 1 2 3 4 5 6 7 8 9 10 下一个 最后一个

我想删除“转到页面：”。

我应该怎么做？

![在此处输入图像描述](../Images/eb8f944885baa11d3dd8d43c5f097309.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:33:53.323

只需将[`header`](http://www.yiiframework.com/doc/api/1.1/CLinkPager#header-detail)寻呼机的属性设置为空字符串。

例子：

```
$this->widget('zii.widgets.CGridView', array(
        // ...other properties here...
        'pager' => array('class' => 'CLinkPager', 'header' => ''),
    )); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T10:26:38.760

如果您只需要更改样式，则应编写自己的 css 文件并将其应用到 gridView（见文末）。但是，如果您的更改比这更深，您将不得不扩展寻呼机。

我很久以前就这样做了：我扩展了 Link Pager 以满足我的需要。在`components`目录中，我创建了一个新的寻呼机：

```
class PagerSA extends CLinkPager 
```

我重写了一些方法以适应我想要的（修改真的很小）。这是我的代码，您可以作为示例。正如我所说，我从原始寻呼机中修改了很少的东西。如果您的寻呼机与 a`CLinkPager`或 a有很大不同，`CListPager`您应该扩展`CBasePager`

```
class PagerSA extends CLinkPager
{
    const CSS_FIRST_PAGE='first';
    const CSS_LAST_PAGE='last';
    const CSS_PREVIOUS_PAGE='previous';
    const CSS_NEXT_PAGE='next';
    const CSS_INTERNAL_PAGE='page';
    const CSS_HIDDEN_PAGE='hidden';
    const CSS_SELECTED_PAGE='selected';

    /**
     * @var integer maximum number of page buttons that can be displayed. Defaults to 10.
     */
    public $maxButtonCount=5;
    /**
     * @var string the text label for the next page button. Defaults to 'Next &gt;'.
     */
    public $nextPageLabel;
    /**
     * @var string the text label for the previous page button. Defaults to '&lt; Previous'.
     */
    public $prevPageLabel;
    /**
     * @var string the text label for the first page button. Defaults to '&lt;&lt; First'.
     */
    public $firstPageLabel;
    /**
     * @var string the text label for the last page button. Defaults to 'Last &gt;&gt;'.
     */
    public $lastPageLabel;
    /**
     * @var string the text shown before page buttons. Defaults to 'Go to page: '.
     */
    public $header;
    /**
     * @var string the text shown after page buttons.
     */
    public $footer='';
    /**
     * @var mixed the CSS file used for the widget. Defaults to null, meaning
     * using the default CSS file included together with the widget.
     * If false, no CSS file will be used. Otherwise, the specified CSS file
     * will be included when using this widget.
     */
    public $cssFile;
    /**
     * @var array HTML attributes for the pager container tag.
     */
    public $htmlOptions=array();

    /**
     * Initializes the pager by setting some default property values.
     */
    public function init()
    {
        if($this->nextPageLabel===null)
            $this->nextPageLabel=Yii::t('yii','Suivante &gt;');
        if($this->prevPageLabel===null)
            $this->prevPageLabel=Yii::t('yii','&lt; Précédente');
        if($this->firstPageLabel===null)
            $this->firstPageLabel=Yii::t('yii','&lt;&lt; Première');
        if($this->lastPageLabel===null)
            $this->lastPageLabel=Yii::t('yii','Dernière &gt;&gt;');
        if($this->header===null)
            $this->header=Yii::t('yii','');

        if(!isset($this->htmlOptions['id']))
            $this->htmlOptions['id']=$this->getId();
        if(!isset($this->htmlOptions['class']))
            $this->htmlOptions['class']='yiiPager';
    }

    /**
     * Creates the page buttons.
     * @return array a list of page buttons (in HTML code).
     */
    protected function createPageButtons()
    {
        if(($pageCount=$this->getPageCount())<=1)
            return array();

        list($beginPage,$endPage)=$this->getPageRange();
        $currentPage=$this->getCurrentPage(false); // currentPage is calculated in getPageRange()
        $buttons=array();

        // first page
        $buttons[]=$this->createPageButton($this->firstPageLabel,0,self::CSS_FIRST_PAGE,$currentPage<=0,false);

        // prev page
        if(($page=$currentPage-1)<0)
            $page=0;
        $buttons[]=$this->createPageButton($this->prevPageLabel,$page,self::CSS_PREVIOUS_PAGE,$currentPage<=0,false);

        //2 first pages
        if($currentPage==3)
        {
            $buttons[]=$this->createPageButton(1,0,self::CSS_INTERNAL_PAGE,false,0==$currentPage);
            $buttons[]= ' ... ';
        }

        if($currentPage>3)
        {
            $buttons[]=$this->createPageButton(1,0,self::CSS_INTERNAL_PAGE,false,0==$currentPage);
            $buttons[]=$this->createPageButton(2,1,self::CSS_INTERNAL_PAGE,false,1==$currentPage);
            $buttons[]= ' ... ';
        }

        // internal pages
        for($i=$beginPage;$i<=$endPage;++$i)
            $buttons[]=$this->createPageButton($i+1,$i,self::CSS_INTERNAL_PAGE,false,$i==$currentPage);

        //3 lasts pages
        if($endPage<$pageCount-2)
        {
            $buttons[]= ' ... ';
            for($i=$pageCount-2;$i<=$pageCount-1;++$i)
            $buttons[]=$this->createPageButton($i+1,$i,self::CSS_INTERNAL_PAGE,false,$i==$currentPage);
        }

        if($endPage==$pageCount-2)
        {
            $buttons[]= ' ... ';
            $buttons[]=$this->createPageButton($pageCount,$pageCount-1,self::CSS_INTERNAL_PAGE,false,$pageCount-1==$currentPage);
        }   

        // next page
        if(($page=$currentPage+1)>=$pageCount-1)
            $page=$pageCount-1;
        $buttons[]=$this->createPageButton($this->nextPageLabel,$page,self::CSS_NEXT_PAGE,$currentPage>=$pageCount-1,false);

        // last page
        $buttons[]=$this->createPageButton($this->lastPageLabel,$pageCount-1,self::CSS_LAST_PAGE,$currentPage>=$pageCount-1,false);

        return $buttons;
    }

} 
```

然后要将它应用到您的 c 网格视图中，您必须输入以下内容：

```
'pager' => array(
    'class' => 'SaAdminPager',
    'cssFile'=>'/themes/version_3/css/widgets/adminPager.css',
    'header'=>'',
     ),
'pagerCssClass'=>'pagination pagination-centered', 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T10:21:24.973

```
 $this->widget('bootstrap.widgets.TbGridView',array(
        'id'=>'grid-view',
        'htmlOptions'=>array('style'=>'margin-top:95px;'),
        'dataProvider'=>$model->search(),
        'type'=>'striped bordered condensed',
    'filter'=>$model,
    'columns'=>array(
    ......
.......
    ));
    echo 'Goto Page '.CHtml::textField(ucfirst(Yii::app()->controller->id)."_page",'1',
            array('id'=>'jump-to-page',
            ));
    ?>
    <script>
        $('#jump-to-page').change(function(e){
            $.fn.yiiGridView.update('grid-view', {
                data: $(this).serialize()
            });
            e.preventDefault();
        });
    </script> 
```

# android - 权限 ACCESS_MOCK_LOCATION 被忽略？

> ID：14396712
> 
> 赞同：6
> 
> 时间：2013-01-18T10:17:38.263
> 
> 标签：android, geolocation, gps

我没有进行广泛的测试，但有证据表明应用程序清单中的 android.permission.ACCESS_MOCK_LOCATION 不像人们假设的那样工作（即，如果存在 - 允许模拟位置提供程序，否则不允许）。[因此，像https://play.google.com/store/apps/details?id=com.lexa.fakegps](https://play.google.com/store/apps/details?id=com.lexa.fakegps)这样的虚假 GPS 应用程序可以与任何应用程序一起使用，无论它是否设置了 ACCESS_MOCK_LOCATION。如果用户在设备设置中允许虚假位置似乎就足够了。

也许 ACCESS_MOCK_LOCATION 真的意味着应用程序本身可以是模拟位置提供者？如果是这样，那么它应该更像 WRITE_MOCK_LOCATION 读取，而不是顾名思义的访问（读取）。听起来更像是错误而不是功能。如果这是真的，那么有没有办法真正确保 GPS 位置是真实的，而不是假的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-16T03:29:23.460

在[http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)中，它说`Allows an application to create mock location providers for testing`，所以我认为你认为是正确的。

事实上，只有拥有root权限`com.lexa.fakegps`才能模拟位置。`ACCESS_MOCK_LOCATION`此外，即使它具有 root 权限，它也需要切换`Allow mock locations`到模拟位置。所以，我认为权限是针对普通应用程序而不是系统应用程序的。系统应用程序无需在`AndroidManifest.xml`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-13T01:05:29.060

由于没有人真正回答您的问题，我将提供一个答案：

> 也许 ACCESS_MOCK_LOCATION 真的意味着应用程序本身可以是模拟位置提供者？

是的。该权限允许应用“访问”“模拟位置”开发人员功能。这允许开发人员创建看起来真实的模拟位置，以便开发/测试具有基于位置的功能的应用程序，而无需实际移动或更改（例如硬连线假 GPS）设备。

因为 Google 不知道您要测试什么应用程序，也不知道您将如何提供虚假数据，所以它这样做了。作为开发人员功能，它减少了此功能对一般人群的曝光。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T05:19:01.423

您首先需要启用开发人员模式，在 Android 4.2.1 中，通过转到`Settings` -> `About Tablet`（靠近底部；对于手机可能称为类似的东西）并点击`Build number`底部七次来完成。一旦你开始点击，就会出现一个倒计时，向你展示成为一名开发人员还需要多少时间。

点击后退按钮返回`Settings`，现在您将在`Developer options`您所在的关于菜单上方找到一个项目 - 单击它，然后`Allow mock locations`在 下进行检查`DEBUGGING`。您的设备现在应该正确尊重`ACCESS_MOCK_LOCATION`.

（如果您这样做的动机是诱使 Ingress 相信您在某个门户附近，那么您就不走运了 - 任何应用程序当然都能够检测到此设置已被启用并告诉您禁用它，所以您充其量可以用它来补充你的 XM 供应。:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-26T22:25:31.490

禁用该特定权限的 MockLocation lint 检查，即

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">
    <uses-permission
        android:name="android.permission.ACCESS_MOCK_LOCATION"
        tools:ignore="MockLocation" />  
</manifest> 
```

# configuration - Log4net：在日志消息后添加带字符的行

> ID：14396715
> 
> 赞同：1
> 
> 时间：2013-01-18T10:17:51.593
> 
> 标签：configuration, log4net

我喜欢文件中每个日志消息后的断线。

此时我设置了一个threadcontext-property并在patternLayout中使用它。

C＃：

```
log4net.ThreadContext.Properties["break"] = "###########################################"; 
```

log4net.config：

```
<layout type="log4net.Layout.PatternLayout">
  <param name="ConversionPattern"  value="%date - %property{Guid} [%level] %newline  %message %newline %newline %property{break} %newline" />
</layout> 
```

是否可以在 log4net 的配置文件中定义它？它不必是同一个字符。我只需要一种可见的方式来查看消息已经结束并开始新的消息，因为消息本身非常大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:44:17.610

为什么不将它添加到您的 ConversionPattern：

```
<layout type="log4net.Layout.PatternLayout">
   <param name="ConversionPattern"  value="%date - %property{Guid} [%level] %newline  %message %newline %newline %property{break} %newline ########################################### %newline " />
</layout> 
```

# javascript - javascript拆分，每个，检查是否存在选择如果不添加选项

> ID：14396720
> 
> 赞同：0
> 
> 时间：2013-01-18T10:18:07.853
> 
> 标签：javascript, jquery

谁能看到我在这里做错了什么？

我正在尝试拆分`tag_filter`，然后对于每个`tag_filter`值，我想检查选项值是否已存在于`tag_select_dropdown_filter`. 如果它不存在，则将选项添加到`tag_select_dropdown_filter`.

```
var tag_filter = new1,new2,new3;
var arraylist = tag_filter.Split(",");

jQuery.each(arraylist, function(index, item) {

   if ($('select#tag_select_dropdown_filter option[value="'+item+'"]').length) {
     // it exists
   } else { var o = new Option("option text", item);
     $(o).html("option text");
     $("#tag_select_dropdown_filter").append(o);
   }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:21:24.523

您只能拆分字符串，所以它必须是：

```
var tag_filter = 'new1,new2,new3'; 
```

如果这些实际上是变量，您可以这样做：

```
var arraylist = [ new1, new2, new3 ]; 
```

它应该是`string.split()`（小写），除非这是您决定不向我们展示的一些自定义功能？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:23:49.747

您的代码中有一些拼写错误/错误：

*   我认为`tag_filter`应该这样声明：`var tag_filter = 'new1,new2,new3';`. 在您的代码中，您只为其分配*变量* `new1`的值。
*   [`split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)开始时较低`s`。
*   甚至设置了`length`属性，当之前的查询没有返回结果时。所以检查它是否大于1。

正确的代码可能如下所示：

```
var tag_filter = 'new1,new2,new3';
var arraylist = tag_filter.split(",");

jQuery.each(arraylist, function(index, item) {

   if ($('select#tag_select_dropdown_filter option[value="'+item+'"]').length > 0) {
     // it exists
   } else { 
     var o = new Option("option text", item);
     $(o).html("option text");
     $("#tag_select_dropdown_filter").append(o);
   }

}); 
```

我假设你`tag_filter`是从代码中的其他地方得到的。如果没有，使用它会更容易：

```
// if new1 to new3 shall be strings
var array_list = [ 'new1', 'new2', 'new3' ];

// if new1 to new3 are variables
var array_list = [ new1, new2, new3 ]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T10:22:39.497

我猜问题是 tag_filer 应该是这样的字符串：

```
var tag_filter = "new1,new2,new3"; 
```

# html - Vb - 使用程序调用按钮

> ID：14396723
> 
> 赞同：1
> 
> 时间：2013-01-18T10:18:16.563
> 
> 标签：html, vb.net, web

我正在使用下面的代码导航到使用 vb.net 的 url

```
wb.Navigate("https://irctc.co.in", False)
While wb.ReadyState <> WebBrowserReadyState.Complete
    Application.DoEvents()
End While 
```

稍后我在表单中填写用户名和密码文本框

```
If CType(elm, System.Windows.Forms.HtmlElement).Name = "userName" Then 'Get User ID Element
    CType(elm, System.Windows.Forms.HtmlElement).InnerText = "text"
ElseIf CType(elm, System.Windows.Forms.HtmlElement).Name = "password" Then 'Get Password Element
    CType(elm, System.Windows.Forms.HtmlElement).InnerText = "text"
End If 
```

在使用以上行填写表单后，我使用以下代码提交按钮

```
wb.Document.All("button").Focus()
wb.Document.All("button").InvokeMember("click") 
```

按钮的 html 部分

```
<input type="submit" name="button" id="button"  class="buttonSubmit" value="Login" onclick="return validate();" >   </td> 
```

但是它似乎没有调用任何东西，尝试分配 Invokemember 方法的结果对象，结果为“Nothing”。它不会进入文档完成程序。我必须填写单击提交按钮后出现的下一个表格。同样在调用成员之后，我如何告诉程序等到下一页加载？加载后，下一个表单的 html 详细信息会在 webbrowser 对象 wb 中更新吗？还是我必须分配给一个新对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:47:32.350

我不认为使用 of`All`是合适的解决方案，主要是因为它总是会返回一个元素的集合，即使它只找到一个。

相反，试试这个：

```
wb.Document.GetElementById("button").InvokeMember("click") 
```

# asp.net-mvc-3 - 带有多个提交按钮的 MVC 3 视图问题

> ID：14396732
> 
> 赞同：0
> 
> 时间：2013-01-18T10:18:38.087
> 
> 标签：asp.net-mvc-3

我现在对某些事情有点困惑，我有一个视图，顶部有一个下拉列表，当客户端从列表中选择时，我在 javascript 中从数据库中填充 3 个文本框。下面我有一个客户必须填写的文本框列表，当他完成时，他单击一个进行一些计算的按钮，我希望它们出现在同一页面的表格中。当一切都完成后，他可以点击保存。所以我在同一个视图上有 2 个提交按钮，我尝试了从这里找到的东西，但是当我按下计算按钮时，它会刷新整个页面并删除以前的值。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:21:11.330

提交按钮正是这样做的——提交表单，这意味着表单将被发布到服务器，响应将被加载到浏览器中。

代替提交按钮，使用常规按钮 -`<input type="button">`并在 JavaScript (jQuery) 中附加到`click`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:06:39.003

有很多可能性。你可以做以下事情。

1.  使用 Ajax.BeginForm 将不同的提交按钮放在不同的表单中（如果可能的话）。
2.  如果您不能以不同的形式使用不同的按钮，请点击此 [链接](http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/)
3.  您也可以尝试 Oded 解决方案。

# wordpress - URL 中的 WooCommerce 自定义价格范围

> ID：14396735
> 
> 赞同：3
> 
> 时间：2013-01-18T10:18:49.117
> 
> 标签：wordpress, woocommerce

我正在开发使用 WooCommerce 的项目，并且需要添加一个自定义链接，该链接会导致具有某些价格限制的商店页面 - 我不能使用内置的 WooCommerce 价格过滤器小部件，但添加了一个带有以下 URL 的静态链接：

```
http://my.domain.com/shop?min_price=0&max_price=2000 
```

`shop`WooCommerce Shop 页面的页面在哪里，我只是在 URL 中添加了其余参数。

当商店页面打开时，产品仍然存在，但没有过滤任何内容 - 我做错了什么？这与价格过滤器小部件使用的原理相同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T20:02:43.533

您的 url 参数没有做任何事情的原因是 WooCommerce 仅在价格过滤器小部件处于活动状态时才运行价格过滤器。

为了解决这个问题，使用初始化价格过滤器的 woocommerce 函数，更改名称，并修改它以运行过滤器，即使小部件未处于活动状态。然后解开 woocommerce 价格过滤器初始化函数并挂上你的。

也就是说，将其放入您的 functions.php 文件中：

```
function my_price_filter_init() {
    global $woocommerce;

    if ( ! is_admin() ) {

        unset( $_SESSION['min_price'] );
        unset( $_SESSION['max_price'] );

        if ( isset( $_GET['min_price'] ) )
            $_SESSION['min_price'] = $_GET['min_price'];

        if ( isset( $_GET['max_price'] ) )
            $_SESSION['max_price'] = $_GET['max_price'];

        add_filter( 'loop_shop_post_in', 'woocommerce_price_filter' );
    }
}
remove_action('init', 'woocommerce_price_filter_init');
add_action( 'init', 'my_price_filter_init' ); 
```

这是对 widget-price_filter.php 的 woocommerce_price_filter_init 的修改。上面的函数不会加载运行价格过滤器小部件的 javascript，所以如果你需要小部件也可以工作，你必须把它放回去（或者让我知道，我会重新编辑它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-06T11:14:18.223

## 您还可以根据需要使用 woocommerce 自定义价格过滤器 html 页面或 woocommerce 存档页面或侧边栏。（jquery 和 php）

```
<script>
<?php
global $wp;
$current_url = home_url( add_query_arg( array(), $wp->request ) );
?>      
        $('select').change(function() {
            //alert("document ready occurred!");
            var min = $( "#min_price" ).val();
            var max = $( "#max_price" ).val();
            //alert(min);
            if(min!=''&& max!=''){
                 var url = "<?php echo $current_url;?>/?min_price="+min+"&max_price="+max;
                window.location.href = url;
            }
        });
    </script> 
```

# log4j - 日志框架中重要但非致命的日志消息（log4j、log4net、log4php、log4cxx、NLog）

> ID：14396742
> 
> 赞同：2
> 
> 时间：2013-01-18T10:19:29.187
> 
> 标签：log4j, log4net, nlog, log4cxx, log4php

在某些应用程序中，无论当前的日志级别设置如何，您总是希望记录一些重要消息（例如应用程序启动和关闭）。确保使用框架（例如`log4j`和）记录重要消息的唯一方法`log4net`是将引发的消息的日志级别设置为`FATAL`.

有没有更好的方法来做到这一点，`FATAL`当应用程序启动正常且没有错误时，这似乎是一个误导性的类别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:31:43.723

对于 log4j（以及类似的 log4cxx），您可以执行以下操作：

```
public class Always {
  private static Logger logger = Logger.getLogger("logAlways");

  public static void log(String message) {
      logger.info(message);
  }
} 
```

然后配置`logAlways`记录器以记录以上所有内容`INFO`：

```
log4j.logger.logAlways=INFO 
```

这也可以通过 API 进行配置，以避免有人（非）故意更改配置文件：

```
public class Always {
  private static Logger logger = null;

  static {
     logger = Logger.getLogger("logAlways");
     logger.setLevel(Level.INFO);
  }

  public static void log(String message) {
      logger.info(message);
  }
} 
```

使用它然后喜欢

```
Always.log("Starting up"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:29:34.950

log4net 提供了关于如何记录和记录在哪里的各种配置。您可以对某些消息进行过滤器和特殊的附加程序来记录级别信息的一些消息。您想要做的事情在 log4X 框架中已经成为可能。查看文档以了解如何执行此操作。

[log4net 手册](http://logging.apache.org/log4net/release/manual/configuration.html)

```
ILog log = LogManager.GetLogger("MyAllwaysLogMessages");
log.Info(.... 
```

现在您可以过滤 MyAllwaysLogMessages 以将它们添加到您的日志中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:03:51.997

不，将消息日志记录设置为最高可用日志记录级别只是为了确保它们始终被记录是错误的方法。

首先，定义你想要拥有的东西。例如，为什么记录应用程序的启动和停止很重要？

请注意，有多种日志记录。在调查出了什么问题时，通常的日志记录是对开发人员的某种帮助。这是调试日志，它通常是可选的，因为如果应用程序工作与否，它对于日志部分并不重要。如果可用，可以通过不同的方式进行调试。

另一种日志记录是审计日志记录。如果用户登录或注销、更改密码或稍后执行任何其他感兴趣的操作，可能需要登录，以便能够验证每个操作是否正确启动和完成。

任何 Log4X 框架都应该能够支持这两种日志记录要求，但不同之处在于您应该对它们进行不同的配置。审计日志不允许任何消息不发送到日志附加器，但很可能附加器与调试日志不同。利用您将拥有多个记录器并可以以不同方式配置它们的事实。

# c# - asp.net图片源来自ftp地址

> ID：14396744
> 
> 赞同：1
> 
> 时间：2013-01-18T10:19:37.590
> 
> 标签：c#, asp.net, image, ftp, ftpwebrequest

使用 C# ASP.Net 和 Visual Studio 2012 Ultimate。

我重新使用了表单中的一些代码。从 ftp 服务器下载图像。

```
public class FTPdownloader
{
    public Image Download(string fileName, string ftpServerIP, string ftpUserID, string ftpPassword)
    {
        FtpWebRequest reqFTP;
        Image tmpImage = null;
        try
        {
            reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServerIP + "/" + fileName));
            reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
            reqFTP.UseBinary = true;
            reqFTP.Credentials = new NetworkCredential(ftpUserID, ftpPassword);

            FtpWebResponse response = (FtpWebResponse)reqFTP.GetResponse();
            Stream ftpStream = response.GetResponseStream();

            tmpImage = Image.FromStream(ftpStream);

            ftpStream.Close();
            //outputStream.Close();
            response.Close();
        }
        catch (Exception ex)
        {
            //MessageBox.Show(ex.Message);
        }
        return tmpImage;
    }
} 
```

效果很好，我所做的就是在我的表格上这样称呼它。

```
imgPart.Image = ftpclass.Download("" + "" + ".jpg", "address/images", "user", "pass"); 
```

现在这对winforms很有用。我的新项目是一个 asp.net 网络表单。我需要它来做同样的事情。我已经重新使用了这段代码，看起来还可以，但是当我调用 img.Image 的方法时，我发现 img.Image 在 asp.net 中不存在。基本上我返回一个图像，我能找到的最接近的是一个 Img.ImageUrl，它当然是一个字符串。

所以我希望这是对这段代码的轻微改动，我缺少调用中的某些内容（asp.net 的新手）。

任何帮助都会很棒。多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:39:44.357

`System.Drawing.Image`您的下载函数返回的和`System.Web.UI.Webcontrols.Image`ASP.NET 的 Image 控件 ( )之间存在冲突。

您可以通过稍微修改 FTP 下载功能来简化问题，以便下载并保存文件以供您的 Image Web 控件使用。

将下载功能更改为：

```
private void Download(string fileName, string ftpServerIP, string ftpUserID, string ftpPassword, string outputName)
{
    using(WebClient request = new WebClient())
    {
        request.Credentials = new NetworkCredential(ftpUserID, ftpPassword);
        byte[] fileData = request.DownloadData(string.Format("ftp://{0}{1}", ftpServerIP, filename));

        using(FileStream file = File.Create(Server.MapPath(outputName)))
        {
            file.Write(fileData, 0, fileData.Length);
        }
    }
} 
```

您可以使用此代码来获取您的图像：

```
// Download image
ftpclass.Download("/images/myimage.jpg", "server-address", "user", "pass", "/mysavedimage.jpg");

// Now link to the image
imgPart.ImageUrl = "/mysavedimage.jpg"; 
```

希望这可以帮助。

# android - SQLite 查询中的 Android Distinct

> ID：14396746
> 
> 赞同：0
> 
> 时间：2013-01-18T10:19:42.567
> 
> 标签：android, sqlite

```
return mDb.query(DATABASE_TABLE, new String[] {rfrom
}, null, null, null, null, null); 
```

下面的查询是通过使用 sqlite 的 rawquery 标签的方式正确的语句。我想要的是我想使用现有 sqlite 的查询将以下查询语句替换为上述查询。反正有没有可以完成的？

```
select distinct col from 
(
    SELECT classa col FROM school 
    union all 
    SELECT classb col FROM school
) a 
order by col 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:50:29.380

您可以尝试如下使用`SQLiteQueryBuilder`：

> ```
> public void testUnionQuery() {
>     String expected;
>     String[] innerProjection = new String[] {"name", "age", "location"};
>     SQLiteQueryBuilder employeeQueryBuilder = new SQLiteQueryBuilder();
>     SQLiteQueryBuilder peopleQueryBuilder = new SQLiteQueryBuilder();
>     employeeQueryBuilder.setTables("employee");
>     peopleQueryBuilder.setTables("people");
>     String employeeSubQuery = employeeQueryBuilder.buildUnionSubQuery(
>             "_id", innerProjection,
>             null, 2, "employee",
>             "age=25",
>             null, null, null);
>     String peopleSubQuery = peopleQueryBuilder.buildUnionSubQuery(
>             "_id", innerProjection,
>             null, 2, "people",
>             "location=LA",
>             null, null, null);
>     expected = "SELECT name, age, location FROM employee WHERE (age=25)";
>     assertEquals(expected, employeeSubQuery);
>     expected = "SELECT name, age, location FROM people WHERE (location=LA)";
>     assertEquals(expected, peopleSubQuery);
>     SQLiteQueryBuilder unionQueryBuilder = new SQLiteQueryBuilder();
>     unionQueryBuilder.setDistinct(true);
>     String unionQuery = unionQueryBuilder.buildUnionQuery(
>             new String[] { employeeSubQuery, peopleSubQuery }, null, null);
>     expected = "SELECT name, age, location FROM employee WHERE (age=25) " +
>             "UNION SELECT name, age, location FROM people WHERE (location=LA)";
>     assertEquals(expected, unionQuery);
> } 
> ```

更多详情请访问[链接](http://www.java2s.com/Open-Source/Android/android-core/platform-cts/android/database/sqlite/cts/SQLiteQueryBuilderTest.java.htm)

# android - Listview 像分页一样滚动直到结束

> ID：14396747
> 
> 赞同：0
> 
> 时间：2013-01-18T10:19:47.540
> 
> 标签：android, json, android-listview

在 SO 和 Google 中进行大量搜索和试用后，我又回来了，没有在列表视图中无限滚动:(...当我滚动到列表视图的末尾时，它应该在列表视图中加载更多项目，如分页。以下是我的代码可以任何一个帮助解决这个问题？答案将非常感激。

```
public class MainActivity extends ListActivity implements OnScrollListener{
//implement onScrollListener for scrolling {

ArrayList<HashMap<String, String>> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;

/*
* some private variables to implement endless scrolling
*/
private int visibleThreshold = 3;
private int previousTotal = 0;
private boolean loading = true;

// All static variables
static final String URL = "siteurl";

 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

public void onScroll(AbsListView view, int firstVisibleItem,
int visibleItemCount, int totalItemCount) {

if(loading){
//if trying to loading
if(totalItemCount > previousTotal){

loading = false;
previousTotal = totalItemCount;
}
}

if(!loading && ((totalItemCount - visibleItemCount) <= (firstVisibleItem + visibleThreshold))){
new LoadMoreEntries().execute();
loading = true;
}
}

@Override
protected Dialog onCreateDialog(int id) {
// TODO Auto-generated method stub
Dialog loadingDialog = ProgressDialog.show(MainActivity.this, "", "Loading.Please wait...",false);

return loadingDialog;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

         final ListView  list=(ListView)findViewById(android.R.id.list);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter);

    // Launching new screen on Selecting Single ListItem
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.date)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),SampleDesp.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_DATE, date);
            in.putExtra(KEY_NAME, name);
            in.putExtra(KEY_CONTENT, content);

            startActivity(in);

        }
    });

}
class LoadMoreEntries extends AsyncTask<String, Void, String>{

                        @Override
                        protected void onPreExecute() {
                        // show your dialog
                        super.onPreExecute();
                        showDialog(1);
                        }

                        protected String doInBackground(ArrayList... params) {
                        // do your request here

                         ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

                            // Creating JSON Parser instance
                                    JSONParser jParser = new JSONParser();

                                    // getting JSON string from URL
                                    JSONObject json = jParser.getJSONFromUrl(URL);
                                    try {
                                         posts = json.getJSONArray(KEY_POSTS);

                            // looping through all song nodes <song>
                                    for(int i = 0; i < posts.length(); i++){
                                        JSONObject c = posts.getJSONObject(i);
                                        // Storing each json item in variable
                                        String id = c.getString(KEY_ID);
                                        String title = c.getString(KEY_TITLE);
                                        String date = c.getString(KEY_DATE);
                                        String content = c.getString(KEY_CONTENT);
                                        // to remove all <P> </p> and <br /> and replace with ""
                                         content = content.replace("<br />", "");
                                         content = content.replace("<p>", "");
                                         content = content.replace("</p>", "");

                                        //authornumber is agin  JSON Object
                                        JSONObject author = c.getJSONObject(KEY_AUTHOR);
                                        String name = author.getString(KEY_NAME);

                                        String url = null;
                                        String slug = null;
                                        try {
                                        JSONArray atta = c.getJSONArray("attachments");
                                        for(int j = 0; j < atta.length(); j++){
                                            JSONObject d = atta.getJSONObject(j);

                                            slug = d.getString(KEY_SLUG);

                                            JSONObject images = d.getJSONObject(KEY_IMAGES);

                                            JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                                            url = thumbnail.getString(KEY_URL);

                                        }
                                        } catch (Exception e) {
                                            e.printStackTrace();

                                        }

                                // creating new HashMap
                                HashMap<String, String> map = new HashMap<String, String>();

                                // adding each child node to HashMap key => value
                                map.put(KEY_ID, id);
                                map.put(KEY_TITLE, title);
                                map.put(KEY_DATE, date);
                                map.put(KEY_NAME, name);
                                map.put(KEY_CONTENT, content);
                                map.put(KEY_SLUG, slug);
                                map.put(KEY_URL, url);

                                // adding HashList to ArrayList
                                songsList.add(map);
                                    }   
                                    }catch (JSONException e) {
                                        e.printStackTrace();

                                        }

                        return null;
                        }

                        protected void onPostExecute(String result) {
                        // close the dialog and notify adapter for data
                        super.onPostExecute(result);
                        Dialog loadingDialog = null;
                        loadingDialog.dismiss();
                        adapter.notifyDataSetChanged();
                        //dismiss the progress dialog
                        }

                        @Override
                        protected String doInBackground(String... params) {
                            // TODO Auto-generated method stub
                            return null;
                        }
                        }
@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
    // TODO Auto-generated method stub

}
   } 
```

# sql - sys.objects 中的 CreateDate 和 ModifyDate 到底是什么

> ID：14396750
> 
> 赞同：2
> 
> 时间：2013-01-18T10:19:52.170
> 
> 标签：sql, sql-server, sql-server-2008-r2

我继承了以下管理查询，并在完全了解它返回的内容的情况下不时运行它：

```
--Loop until the Cursor was not able to fetch
WHILE (@@Fetch_Status >= 0)
BEGIN
    --Dump the results of the sp_spaceused query to the temp table
    INSERT  #TempTable
        EXEC sp_spaceused @TableName

    --Get the next table name
    FETCH NEXT FROM tableCursor INTO @TableName
END

--get rid of the Cursor
CLOSE tableCursor
DEALLOCATE tableCursor

--Select TABLE properties with SIZE -- Final step
SELECT name, 
convert(date,create_date) as CreateDate, 
convert(date,modify_date) as ModifyDate, 
numberofRows, 
dataSize

FROM sys.objects
join #temptable tm on
tm.tablename = sys.objects.name
WHERE type  in ('U')

order by modify_date 
GO 
```

以下字段是什么？：

1.  “create_date” ...我猜什么时候运行“CREATE TABLE ...”
2.  "modify_date" ...这是上次更改表模式的时间吗？

他们中的任何一个是否告诉我数据最后一次进入`DELETED`或`INSERTED`进入表格？
如果没有，那么我如何获得这些信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:24:42.863

[BOL](http://msdn.microsoft.com/en-us/library/ms190324.aspx)说什么

> 修改日期 - 上次使用 ALTER 语句修改对象的日期。如果对象是表或视图，则 modify_date 也会在创建或更改表或视图上的聚集索引时更改。

所以这是某人添加列或更改表架构的时刻

默认情况下，不存储信息（当有人插入/删除值时）

如果您想要有人在表中插入值的时间，您必须实现它，您可以在`ChangeDate datetime`表中添加列并添加触发器，该触发器将插入适当的值，但在删除数据时它不会保留

通常，如果您想记录数据更改，您可以通过创建与要记录的表类似的表来实现它，添加“DataChange、操作、用户”等列并为 UPDATE、INSERT、DELETE 实现 DML 触发器

或使用 sql server 更改数据来跟踪数据更改，但我个人从未使用过那个 :)

# objective-c - 添加新对象后更新 NSMutableArray

> ID：14396751
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:19:59.417
> 
> 标签：objective-c, xcode, nsmutablearray, nsmutabledictionary

我有一个`NSMutableArray`包含一些`NSMutableDictionary`对象类型的。在某些情况下，我必须为`NSMutableDictionary`这个数组中的每个字段添加一个字段，但我不知道怎么做？

我确实将对象（字段）添加到我的`NSMutableDictionary`喜欢中。

```
NSMutableDictionary *item = [[NSMutableDictionary alloc]initWithDictionary:[timeSlots objectAtIndex:indexPath.row]];

[item setObject:cell forKey:@"cell"]; 
```

现在我将如何更新数组（timeSlots）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:24:37.063

更改可变字典后只需添加此行：

```
[timeSlots replaceObjectAtIndex:indexPath.row withObject:item]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:24:49.070

当然取决于您的需求，但这将是一个起点：

```
for (NSMutableDictionary *aDictionary in array) {
    [aDictionary setObject:cell forKey:@"cell"];
} 
```

# ios - 获取 exif 版本 - iOS

> ID：14396769
> 
> 赞同：1
> 
> 时间：2013-01-18T10:20:42.217
> 
> 标签：ios, image, exif

我有一个 jpeg 图像，我正在尝试向其中添加 exif 信息。有一个名为“Exif Version”的字段，其键表示为`kCGImagePropertyExifVersion`。我从哪里得到它的价值？是不是因手机而异？还是在不同的操作系统版本之间有所不同？或者不同的相机有什么不同？但是我如何知道特定设备的版本？

（我试图在互联网上搜索很多，但我没有得到任何信息）

# javascript - 在浏览另一个页面时检查弹出窗口是否已经打开

> ID：14396770
> 
> 赞同：1
> 
> 时间：2013-01-18T10:20:46.853
> 
> 标签：javascript, jquery

如何检查弹出窗口是否已打开？

```
var popup = null;
$('#menu').bind('click', function(e) {
    if (popup == null || popup.closed )
        popup = window.open (...);
}); 
```

上面的 JQuery 代码在同一页面中时有效。当用户浏览到另一个页面时，仍然使用 element `#menu`，弹出变量将为`null`。对此有任何想法吗？

当弹出窗口已经打开时，我不希望打开相同的弹出窗口。

如何检查具有给定名称的窗口是否已经打开？

谢谢

# java - 启用安全检查以访问 wsdl url

> ID：14396771
> 
> 赞同：2
> 
> 时间：2013-01-18T10:20:49.093
> 
> 标签：java, web-services, http-authentication

我在我的机器上创建了一个 Web 服务。它的网址是

```
http://localhost:8080/aaa/test?wsdl 
```

我想为其启用一项功能。一旦用户在浏览器中输入 url，它应该要求提供凭据。它可以在Web服务中完成。

如果是，有人可以指导如何实现它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T10:33:33.817

如果您已经在使用 Spring，则可以使用 Spring Security 轻松地将[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)应用于特定的 URL 模式。在您的`applicationContext.xml`中，只需添加：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/security
http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

<!-- HTTP basic authentication in Spring Security -->
<http>
    <intercept-url pattern="/*wsdl?" access="ROLE_USER" />
    <http-basic />
</http>

<authentication-manager>
   <authentication-provider>
       <user-service>
       <user name="someUser" password="somePassword" authorities="ROLE_USER" />
       </user-service>
   </authentication-provider>
</authentication-manager>

</beans:beans> 
```

示例取自[Mkyong 的*Spring Security HTTP Basic Authentication Example*](http://www.mkyong.com/spring-security/spring-security-http-basic-authentication-example/)。

如果您想在数据库中查找用户，则需要使用不同的身份验证提供程序。如果您想查询[标准 Spring Security 用户数据表](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#db_schema_users_authorities)，[Spring Security 参考](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#ns-auth-providers)中提到。如果您已经有了自己的结构，您可能有兴趣改用它，您可以自己在其中查找用户。`data-source-ref``user-service-ref`

```
<authentication-manager>
  <authentication-provider user-service-ref='myUserDetailsService'/>
</authentication-manager>

<beans:bean id="myUserDetailsService"
    class="mypackage.MyUserDetailsService">
  <beans:property name="dataSource" ref="dataSource"/>
</beans:bean> 
```

`mypackage.MyUserDetailsService`以及扩展[JdbcDaoImpl](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/jdbc/JdbcDaoImpl.html)和实现的代码[`UserDetailsService`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html)。

# mysql - 优化 mysql 架构，需要建议

> ID：14396776
> 
> 赞同：0
> 
> 时间：2013-01-18T10:21:05.977
> 
> 标签：mysql

我被要求帮助检查表格并提高性能。该表是一个有 2.000.000 行的大表，并且正在快速增长。有很多用户正在使用此表进行大量更新/插入和删除查询。

也许你可以给我一些好的建议来提高性能和真实性

这是表定义：

```
创建表`计算`（
  `GROUP_LINE_ID` BIGINT(250) NOT NULL DEFAULT '0',
  `GROUP_LINE_PARENT_ID` BIGINT(250) NOT NULL DEFAULT '0',
  `MOEDER_LINE_CODE` BIGINT(250) NOT NULL DEFAULT '0',
  `CALC_ID` BIGINT(250) NOT NULL DEFAULT '0',
  `GROUP_ID` BIGINT(250) NOT NULL DEFAULT '0',
  `CODE` VARCHAR(250) 默认为空，
  `DESCRIPTION` VARCHAR(250) 默认空值，
  `RAW_AMOUNT` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `AMOUNT` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `UNIT` VARCHAR(100) 默认为空，
  `MEN_HOURS` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `PRICE_PER_UNIT` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `CONTRACTOR_UNIT` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `POSTS_PER_UNIT` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `SORT_INDEX` BIGINT(250) NOT NULL DEFAULT '0',
  `FACTOR` DECIMAL(50,4) NOT NULL DEFAULT '0.0000',
  `FACTOR_TYPE` INT(2) NOT NULL DEFAULT '0',
  `ROUND_AT` DECIMAL(50,2) NOT NULL DEFAULT '0.00',
  `MATERIAL_ID` BIGINT(250) NOT NULL DEFAULT '0',
  `MINIMUM` DECIMAL(50,2) NOT NULL DEFAULT '0.00',
  `LINE_TYPE` INT(1) NOT NULL DEFAULT '0',
  `ONDERDRUKT` INT(5) NOT NULL DEFAULT '0',
  `MARKED` INT(5) NOT NULL DEFAULT '0',
  `IS_TEXT` INT(5) NOT NULL DEFAULT '0',
  `BRUTO_PRICE` DECIMAL(20,2) NOT NULL DEFAULT '0.00',
  `AMOUNT_DISCOUNT` DECIMAL(20,3) NOT NULL DEFAULT '0.000',
  `FROM_CONSTRUCTOR` INT(5) NOT NULL DEFAULT '0',
  `CHANGE_DATE` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
  `BEREKENING_VALUE` INT(5) NOT NULL DEFAULT '0',
  `MAATVOERING_ID` BIGINT(250) NOT NULL DEFAULT '0',
  `KOZIJN_CALC_ID` BIGINT(250) NOT NULL DEFAULT '0',
  `IS_KOZIJN_CALC_TOTALS` INT(5) NOT NULL DEFAULT '0',
  `EAN_CODE` VARCHAR(150) 默认为空，
  `UURLOON_ID` BIGINT(20) NOT NULL DEFAULT '0',
  `ORG_PRICE_PER_UNIT` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `ORG_CONTRACTOR_UNIT` DECIMAL(50,3) NOT NULL DEFAULT '0.000',
  `BTWCode` INT(5) NOT NULL DEFAULT '0',
  `IS_CONTROLE_GETAL` INT(5) NOT NULL DEFAULT '0',
  `AttentieRegel` INT(5) NOT NULL DEFAULT '0',
  `KozijnSelectionRowId` BIGINT(250) NOT NULL DEFAULT '0',
  `OfferteTekst` 文本，
  `VerliesFactor` DECIMAL(15,4) NOT NULL DEFAULT '0.0000',
  主键（`GROUP_LINE_ID`），
  KEY `GROUP_LINE_PARENT_ID`（`GROUP_LINE_PARENT_ID`），
  KEY `MOEDER_LINE_CODE`（`MOEDER_LINE_CODE`），
  KEY `CALC_ID`（`CALC_ID`），
  KEY `GROUP_ID`（`GROUP_ID`），
  KEY `MATERIAL_ID`（`MATERIAL_ID`），
  KEY `MAATVOERING_ID`（`MAATVOERING_ID`），
  KEY `KOZIJN_CALC_ID`（`KOZIJN_CALC_ID`），
  键 `IS_KOZIJN_CALC_TOTALS` (`IS_KOZIJN_CALC_TOTALS`)
) 引擎=MyISAM 默认字符集=utf8;

```

在我看来

*   将表引擎更改为 InnoDB
*   bigint(250) 可以改成 bigint(10) 的 int(10) 吗？

请给我一些建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:46:04.837

是的，你是对的..

1.请记住，表中的主键是在所有其他键的最后分配的，所以保持主键尽可能小，我认为 int 就足够了，它可以处理多达 20 亿条记录，不需要大 int

2.更改 key_buffer_size（最多 25% 的内存）如果您的服务器有很多 Myisam 或只有 myisam 表，您可以将其增加到 60-70% 尝试手动 chache

```
SET GLOBAL keycache1.key_buffer_size=256*1024;
CACHE INDEX t1,t2 IN keycache1;
LOAD INDEX INTO CACHE t1, t2 IGNORE LEAVES; 
```

（IGNORE LEAVES 修饰符仅导致重新加载索引的非叶节点的块）

3.正如您提到的，您的表增长得更快，最好对表进行分区，这将提高性能

4.执行表维护任务，例如经常分析表，这将更新索引，优化表并检查并修复它，如果有任何错误（经常优化表，因为你说的删除很多）

5.如果您不想更改引擎，请打开 delay_key_write 变量（特定于 myisam），这会使密钥在表关闭后更新

6.运行程序分析（），建议您最好的数据类型

7.如果可能且仅在有用的情况下，创建全文索引以利用 myisam

8.Examine your Query cache (set the Query cache limit to on demand ) and make slow query log is actvated

9.Once examine ( and rewrite if needed ) all the queries using the table

finally if you want to change engine change your table storage engine to innodb and increase the innodb_buffer_pool_size it may help you little bit

if number of accesses on the table are more then better to shift to innodb because myisam will implement table level locking due to which some queries are not logged in slow query log ( the initial time required to aquire the lock is not treated in execution time in MySQL )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:38:01.013

1.  打开[MySQL 慢查询日志](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)以查找最慢的查询。

2.  如果它们是选择，则通过[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)运行它们以找出正在使用的索引（如果有的话）。您也许可以将一些索引转换为多列索引并通过这种方式找到一些改进。有关差异的详细讨论，请参阅[多索引与多列索引](https://stackoverflow.com/questions/179085/multiple-indexes-vs-multi-column-indexes)。

3.  由于您的索引，插入、更新和删除可能会变慢。您需要找出哪些索引没有被使用并删除它们。不幸的是，除了运行最流行的查询之外，没有简单的方法可以做到这一点。

4.  减小过大的列的大小是一个好主意。

5.  我知道这些天使用 MyISAM 的唯一原因是在进行全文搜索时。您应该按照您的建议切换到 InnoDB。（更改表`calculate`引擎 = InnoDB；）

6.  这是避免连接的扁平表吗？您必须`OfferteTekst`在此表中有列吗？即使将其提取到相关表中也可能会有所帮助，但如果您最终只是加入反对它，则不会。

# c# - ASP.NET MVC：将复杂的视图模型传递给控制器

> ID：14396781
> 
> 赞同：2
> 
> 时间：2013-01-18T10:21:20.077
> 
> 标签：c#, asp.net-mvc, kendo-ui, model-binding, kendo-treeview

首先，我搜索了我的问题，但找不到任何可以帮助我更进一步的东西。

我正在尝试实现一个允许我为当前用户设置权限的视图。

作为数据结构，我使用以下递归类，其中每个 PermissionTree-Object 引用子权限（权限在我的应用程序中是分层结构的）：

```
public class PermissionTree
{
        public Permission Node; //the permission object contains a field of type SqlHierarchyId if that is relevant
        public bool HasPermission;
        public IList<PermissionTree> Children;
   //i cut out the constructors to keep it short ...
} 
```

这是控制器的样子：

```
//this is called to open the view
 public ActionResult Permissions()
    {
        //pass the root element which contains all permission elements as children (recursion)
        PermissionTree permissionTree = PopulateTree();//the fully populated permission-tree
        return View(permissionTree);
    }

//this is called when i submit the form
    [HttpPost]
    public ActionResult Permissions(PermissionTree model)
    {
        SetPermissions(model);
        ViewData["PermissionsSaved"] = true;

        return View(model);//return RedirectToAction("Index");
    } 
```

我正在使用这样的强类型视图：

```
@model PermissionTree
//....
 @using (Html.BeginForm("Permissions", "Permission", null, FormMethod.Post, new { @class = "stdform stdform2" }))
{    
<input name="save" title="save2" class="k-button" type="submit" />

<div class="treeview">
//i am using the telerik kendoUI treeview
    @(Html.Kendo().TreeView()
            .Name("Permissions")
            .Animation(true)
            .ExpandAll(true)
            .Checkboxes(checkboxes => checkboxes
                .CheckChildren(true)
            )
            .BindTo(Model, mapping => mapping
                .For<PermissionTree>(binding => binding
                .Children(c => c.Children)
                .ItemDataBound( (item, c) => {
                    item.Text = c.Node.PermissionName;
                    item.Checked = c.HasPermission;
                })

                )
            )
      ) 
```

好的，所以当我单击按钮时，我希望将我的视图模型发送到用`[HttpPost]`. 但是当我调试应用程序时，接收到的模型并没有真正包含我的数据（虽然它不是空的）。有谁知道我如何实现我的目标并获得整个视图模型？

最好的问候， r3try

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:31:54.133

我认为最好在这里使用 JSON 帖子，然后很容易在 javascript 端准备对象。

我不知道您的 HTML 的外观或元素的名称，您可以轻松地使用 javascript/Jquery 来构建具有相似名称和更纤细的层次结构/数据类型的客户端 json 对象，就像在`PermissionTree`类中一样。然后使用 Ajax post 以 JSON 格式发布

```
 var PermissionTree={Node:{},HasPermission:false,Children:{}}
 $.ajax({  data:PermissionTree
                            type: "POST",
                            url: 'YourController/Permissions',
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: function (result) {   
               }
); 
```

重要的是您需要找到一种更好的方法来遍历树视图并在 javascript 中构建对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:04:34.523

因为我无法让它工作，所以我尝试了一种稍微不同的方法：

添加节点的示例： - 按添加按钮 -> 执行 ajax 调用 -> 在 nhibernate 中添加节点 -> 使用新数据再次调用视图（包括新节点）

ajax 请求调用的控制器动作：

```
[Authorize]
    [HttpPost]
    public ActionResult AddPermission(string parentPermissionName, string permissionName)
    {
        var pd = ServiceContext.PermissionService.permissionDao;
        Permission parentPermission = pd.GetPermissionByName(parentPermissionName);
        if (parentPermission == null) {
            parentPermission = pd.GetRoot();
        }

        if (parentPermission != null && !string.IsNullOrEmpty(permissionName) && !pd.PermissionExists(permissionName))//only add with a name
        {
            pd.AddPermission(parentPermission, permissionName);
        }
        //refresh data
        PermissionTree permissionTree = LoadTreeSQLHierarchy(null, false);//start at root
        return View("Permissions", permissionTree);
    } 
```

视图中的 Ajax 请求：

```
function addNode() {
    //... get the data here
    var addData = { parentPermissionName: selectedNodeName, permissionName: newNodeName };

    $.ajax(
       {
           data: addData,
           type: "POST",
           url: '@Url.Action("AddPermission", "Permission")',
           dataType: "json",
           success: function (result) {
               //$('.centercontent').html(response);//load to main div (?)
               return false;
           },
           error: function (xhr, ajaxOptions, thrownError) {
               alert(xhr.status + ":" + thrownError);
               return false;
           }
       }
    );
    return false;
} 
```

But when i execute this i get an error stating that json.parse hit an invalid character (i get this error at the alert in the ajax's error function). Judging from that message i would say that the problem is that i am returning html but the ajax call expects json or so... But what is the correct way to just reload my view with the new data? Can i somehow tell the ajax call to not go back at all and just execute the called controller-method?

# android - 通话的背景音乐

> ID：14396783
> 
> 赞同：0
> 
> 时间：2013-01-18T10:21:21.720
> 
> 标签：android

我正在做一个在后台播放音乐以供通话的应用程序，我的应用程序有一个主要活动，一个广播监听器和一个服务。

广播监听器的代码是

```
public class CallBrdcstListener extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    PhoneStateDisplay phoneListener=new PhoneStateDisplay();
    TelephonyManager telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

    telephony.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);
}
} 
```

电话状态监听器是

```
 public class PhoneStateDisplay extends PhoneStateListener{

 private Context context;
public void onCallStateChanged(int state,String incomingNumber){
    switch(state)
    {
       case TelephonyManager.CALL_STATE_IDLE:
            Log.d("DEBUG", "IDLE");
            break;
       case TelephonyManager.CALL_STATE_OFFHOOK:

            Log.d("DEBUG", "OFFHOOK");
             System.out.println("Calling Intent");
            Intent musicIntent = new Intent(context,MusicService.class); 
            context.startService(musicIntent);  

            break;

       case TelephonyManager.CALL_STATE_RINGING:
           Log.d("DEBUG", "RINGING");
           break;
    }
}   
} 
```

它在意图创建部分显示错误......谁能告诉我错误是什么

logcat 输出是

```
01-18 15:45:57.250: I/System.out(2822): Calling Intent
01-18 15:46:30.453: E/AndroidRuntime(2857): FATAL EXCEPTION: main
01-18 15:46:30.453: E/AndroidRuntime(2857): java.lang.NullPointerException
01-18 15:46:30.453: E/AndroidRuntime(2857):     at android.content.ComponentName.<init>(ComponentName.java:75)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at android.content.Intent.<init>(Intent.java:2823)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at com.example.backgroundmusicplay.PhoneStateDisplay.onCallStateChanged(PhoneStateDisplay.java:22)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at android.telephony.PhoneStateListener$2.handleMessage(PhoneStateListener.java:319)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at android.os.Looper.loop(Looper.java:130)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at android.app.ActivityThread.main(ActivityThread.java:3687)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at java.lang.reflect.Method.invokeNative(Native Method)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at java.lang.reflect.Method.invoke(Method.java:507)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-18 15:46:30.453: E/AndroidRuntime(2857):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
 01-18 15:46:30.453: E/AndroidRuntime(2857):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:29:36.850

看看这个[https://stackoverflow.com/a/14393912/1697047](https://stackoverflow.com/a/14393912/1697047) 如果你想为你的应用播放背景音乐，然后在你的应用启动的线程中播放它/使用 AsyncTask 类为你做。

```
 public class BackgroundSound extends AsyncTask<Void, Void, Void> {
  @Override
 protected Void doInBackground(Void... params) {
 MediaPlayer player = MediaPlayer.create(YourActivity.this, R.raw.test_cbr); 
 player.setLooping(true); // Set looping 
 player.setVolume(100,100); 
 player.start(); 

 return null;
}

} 
```

# 3d - 如何在线性时间内从顶点列表生成索引？

> ID：14396788
> 
> 赞同：7
> 
> 时间：2013-01-18T10:21:26.980
> 
> 标签：3d, directx

它适用于我的 3D 应用程序导出器插件。我当前的解决方案运行良好，但速度很慢（复杂度 O(n^2 * log n) ）。

它应该是一个函数，其中输入是对象顶点的数组，输出为不重复的顶点列表和索引列表。

此外，当两个顶点彼此非常非常接近时（例如，差异约为 0.001 ），算法会将其标记为重复。

我的问题是，有没有办法在线性时间内完成，或者至少比我的解决方案更快？非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T18:08:08.790

您可以使用[来自 STL 的 set container](http://www.cplusplus.com/reference/set/set/)在 O(n log n) 中执行此操作。你基本上做的是：

1.  从空对（顶点、整数）、空索引数组和索引 = 0 开始。
2.  对于每个顶点，检查它是否在集合中。如果不是，则将一对（顶点，索引）添加到集合和增量索引中。否则，从集合中获取顶点的索引。在这两种情况下，都将顶点的索引添加到索引缓冲区。
3.  最后，您获得索引缓冲区，集合中的顶点是顶点缓冲区。

在 C++ 中的实现：

```
#include<set>
#include<vector>
#include<cmath>
using namespace std;

struct Vertex
{
    float x, y, z;
};

typedef pair<Vertex, int> VPair;

float eps = 0.001;

struct CmpClass // class comparing vertices in the set
{
    bool operator() (const VPair& p1, const VPair& p2) const
    {
        if (fabs(p1.first.x-p2.first.x) > eps) return p1.first.x < p2.first.x;
        if (fabs(p1.first.y-p2.first.y) > eps) return p1.first.y < p2.first.y;
        if (fabs(p1.first.z-p2.first.z) > eps) return p1.first.z < p2.first.z;
        return false;
    }
};

vector<Vertex> input, vbuffer;
set<VPair, CmpClass> vertices;
vector<int> indices;
int index = 0;

void ComputeBuffers()
{
    for (int i=0; i<input.size(); i++)
    {
        set<VPair>::iterator it = vertices.find(make_pair(input[i], 0/*this value doesn't matter*/));
        if (it!=vertices.end()) indices.push_back(it->second);
        else
        {
            vertices.insert(make_pair(input[i], index));
            indices.push_back(index++);
        }
    }

    // Notice that the vertices in the set are not sorted by the index
    // so you'll have to rearrange them like this:
    vbuffer.resize(vertices.size());
    for (set<VPair>::iterator it=vertices.begin(); it!=vertices.end(); it++)
        vbuffer[it->second] = it->first;
} 
```

# html - 为什么我不能让按钮形成内联？

> ID：14396794
> 
> 赞同：0
> 
> 时间：2013-01-18T10:21:43.337
> 
> 标签：html, css

我想要字符串旁边的 btn。即使使用 CSS 内联我也无法弄清楚

![在此处输入图像描述](../Images/5183c71838428ed603806a355a64d09f.png)

```
 <span class="subscribe_button"> <h3>Books</h3> <%= render 'follow_form' %></span> 
```

CSS：

```
.subscribe_button {
display: inline;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:34:13.707

这里有一些无效的 HTML。

块级元素不能在内联元素中，这是基本的 HTML 知识。

我建议您将两个元素都包装在 a 中`div`并使用 float: left;

```
<div class="wrap">

<h3>Books</h3>
<span class="subscribe_button"> unsubscribe</span>

</div> 
```

CSS：

```
.wrap
{
    width: 300px;
}

.wrap h3, 
.wrap span
{
    float: left;
}

.wrap span
{
    margin-left: 10px/*your value*/;
} 
```

我还建议您阅读 HTML 规则，在哪里允许什么以及为什么允许或不允许。

[http://jsfiddle.net/Kyle_Sevenoaks/zJUZs/](http://jsfiddle.net/Kyle_Sevenoaks/zJUZs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:22:56.257

该`Books`部分（也）是一个块（由于`<h1>`），因此您需要将其设置`inline`为同样（如[limelights](https://stackoverflow.com/users/441387/limelights)的注释所示），否则您的按钮仍将被推到下一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:24:17.250

尝试将此添加到您的 CSS

```
.subscribe_button h3 {
    float: left;
} 
```

如果您浮动一个元素，则意味着它之后的其他元素将与它换行到同一行（只要它们的宽度不会使它们太宽）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:27:19.037

Span 是内联元素，h3 是块元素。内联元素应该在块元素内。您是否尝试过验证您的 html 代码？[http://validator.w3.org/](http://validator.w3.org/)

尝试：显示：内联块；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T10:27:30.173

我认为您可以使用以下代码执行此操作：

```
.subscribe_button > * {
  display: inline;
} 
```

'>' 是一个子选择器， * 匹配所有元素。

你可以阅读更多关于 CSS2 选择器的信息：[CSS2 选择器](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-18T10:27:40.850

试试下面的代码

```
.subscribe_button h3{
display: inline;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-18T10:29:32.290

用于`float:left`两者`h3`和`button`

# java - 按下 Tab 时在 JComboBox 中设置插入符号位置

> ID：14396796
> 
> 赞同：1
> 
> 时间：2013-01-18T10:21:50.880
> 
> 标签：java, swing, jcombobox, caret

我想创建一个 jcombobox，在按下选项卡时将插入符号位置设置为 0 位置。即，当您的面板中有不同的组件并且当您按 Tab 时，它会选择 jcombobox，并且由于它是可编辑的 jcombobox，如果我在任何插入符号位置单击 jcombobox 的文本字段，当我按下标签时，它将停留在该插入符号位置并切换到其他组件，最后到达组合框，插入符号的位置保持不变。当我使用选项卡按钮时，我想将组合框文本字段中插入符号的位置设置为 0 位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:33:03.307

您可以将插入符号设置为`0`获得焦点的位置。但这也会在鼠标单击时设置插入符号。如果没问题？看：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;

import javax.swing.Box;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JPanel;
import javax.swing.text.JTextComponent;

public class BorderPanel extends JFrame{

    public BorderPanel() {

        JButton btn0 = new JButton( "Hilfe" );
        JButton btn1 = new JButton( "Apply" );
        JButton btn2 = new JButton( "Cancel" );
        JButton btn3 = new JButton( "OK" );

        JPanel sub1 = new JPanel(new FlowLayout( FlowLayout.TRAILING, 5, 5 ));
        JPanel sub2 = new JPanel(new FlowLayout( FlowLayout.TRAILING, 5, 5 ));

        JMenuBar mnu = new JMenuBar();
        mnu.add( new JMenu( "File" ) );
        mnu.add( new JMenu( "Insert" ) );
        mnu.add( new JMenu( "Edit" ) );
        mnu.add( new JMenu( "Help" ) );

        JComboBox<String> cmb = new JComboBox<String>();
        cmb.getEditor().getEditorComponent().addFocusListener( new FocusAdapter() {
            @Override
            public void focusGained( FocusEvent e ) {
                if(e.getSource() instanceof JTextComponent) {
                    ((JTextComponent)e.getSource()).setCaretPosition( 0 );
                }
            }
        } );

        cmb.setEditable( true );
        cmb.addItem( "Lorem" );
        cmb.addItem( "Ipsum" );
        cmb.addItem( "Dolor" );
        cmb.addItem( "Sit Amet" );

        JPanel pnl = new JPanel();
        pnl.add(cmb);

        sub1.add( btn0 );
        sub2.add( btn1 );
        sub2.add( btn2 );
        sub2.add( btn3 );

        JPanel bar = new JPanel();
        bar.setLayout( new BorderLayout( 20, 20 ) );
        bar.add( sub1, BorderLayout.WEST );
        bar.add( Box.createHorizontalGlue(), BorderLayout.CENTER );
        bar.add( sub2, BorderLayout.EAST );

        setDefaultCloseOperation( EXIT_ON_CLOSE );
        getContentPane().setLayout( new BorderLayout() );
        getContentPane().add( mnu, BorderLayout.NORTH );
        getContentPane().add( pnl, BorderLayout.CENTER );
        getContentPane().add( bar, BorderLayout.SOUTH );
        setSize( new Dimension( 600, 400 ) );
        setLocationRelativeTo( null );
    }

    public static void main( String[] args ) {
        EventQueue.invokeLater( new Runnable() {
            @Override
            public void run() {
                new BorderPanel().setVisible( true );
            }
        } );
    }
} 
```

# android - 无法从 Android 中的 LinkedIn 获取公共个人资料网址（BufferedInputStream 已关闭）

> ID：14396800
> 
> 赞同：6
> 
> 时间：2013-01-18T10:22:09.973
> 
> 标签：android, linkedin, linkedin-j

我无法从 Android 中的 LinkedIn api 获取公共个人资料 url 并获取或发布。我正在使用linkedin-j-android 源。我能够获得成功的访问令牌，但是当从`OnNewIntent`.

编辑：我的应用程序有互联网权限。所以这不会是一个问题。

```
Person profile = client.getProfileForCurrentUser(EnumSet.of(ProfileField.PUBLIC_PROFILE_URL)); 
```

* * *

```
 @Override
    protected void onNewIntent(Intent intent) {     

        String verifier = intent.getData().getQueryParameter("oauth_verifier");
        LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(liToken, verifier);
        client = factory.createLinkedInApiClient(accessToken);      
        Person profile = client.getProfileForCurrentUser(EnumSet.of(ProfileField.PUBLIC_PROFILE_URL));
        Log.v("","PUBLIC_PROFILE_URL:" + profile.getPublicProfileUrl());
    } 
```

应用程序崩溃。下面是日志跟踪。

```
FATAL EXCEPTION: main
com.google.code.linkedinapi.client.LinkedInApiClientException: java.io.IOException: BufferedInputStream is closed
at com.google.code.linkedinapi.client.impl.LinkedInApiXppClient.unmarshallObject(LinkedInApiXppClient.java:167)
at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.readResponse(BaseLinkedInApiClient.java:3710)
at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.callApiMethod(BaseLinkedInApiClient.java:3777)
at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.callApiMethod(BaseLinkedInApiClient.java:3725)
at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.getProfileForCurrentUser(BaseLinkedInApiClient.java:1122) 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:44:39.340

此代码片段是否适合您：

```
 Person profile = client.getProfileForCurrentUser();
   Log.v("","PUBLIC_PROFILE_URL:" + profile.getPublicProfileUrl()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:48:47.743

我正在回答我自己的问题，因为它可能对某些人有所帮助。代码是正确的，问题出在`intent-filter`. `android:scheme`并且`android:host`与 OAUTH_CALLBACK_URL 不匹配。更改此设置时，问题解决了。

# image - 在不丢失透明度的情况下调整 png 图像的大小

> ID：14396808
> 
> 赞同：0
> 
> 时间：2013-01-18T10:22:42.867
> 
> 标签：image, png, transparency

我正在尝试使用 C# 在数据库中保存一个 png 文件。

位图缩略图 = new Bitmap(file.InputStream); thumbnail = ImageUtilities.ResizeImage(thumbnail, Convert.ToInt32(width),Convert.ToInt32(height)); ImageUtilities.SaveJpeg(路径,缩略图,Convert.ToInt32(Resources.AppConstants.ExtractThumbnailQuality);

图像保存在数据库中，但图像周围有黑色背景。简而言之，它失去了透明度。如果我跳过图像大小的调整，而不是黑色背景，图像周围会出现白色背景。

谁能建议，如何保持图像的透明度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:12:45.393

您将调整大小的图像另存为 JPEG。JPEG 不支持透明度。将其另存为 PNG

# php - 循环多个文本框代码点火器php

> ID：14396816
> 
> 赞同：0
> 
> 时间：2013-01-18T10:23:01.870
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我的视图页面中有一个表单，其中连续有两个选择框和三个输入框。我将它们放在一个 for 循环中并制作五行，其中每行有两个选择框和 3 个简单文本框。我写**jquery**中的一个函数，如果我从一个选择框中选择值，它将出现在第二个选择框中。但是在循环中制作五行之后，此函数仅在第一行而不是其他四行中工作。我不知道该怎么做。如果有人可以为我编码，那么感谢他...

这是我的查看页面

```
 <tr>
 <th>Category:</th>
   <th>Items:</th>
   <th>Selling Price:</th>
    <th>quantity:</th>
   <th> total:</th>
</tr>

<?php for ($i = 0; $i < 5; $i++) {
    ?>
    <tr>
           <td>     

    <?php echo form_dropdown('cat_id', $records2, '#', 'id="category"');?>
    </td>
   <td>                 

    <?php echo form_dropdown('item_id', $records3, '#', 'id="items"'); ?>

     </td>           

    <td><?php echo form_input($price); ?> </td>

       <td><?php echo form_input($quantity); ?></td>

       <td> <?php echo form_input($total); ?>
        </td></tr>

     <?php }?></table> 
```

我的两个选择框的**JavaScript**。

```
 $(document).ready(function(){  
      $('#check').click(function(){
     alert("hello");
     return false;
 });
      $('#category').change(function(){ 
    $("#items > option").remove();
    var category_id = $('#category').val();  
    $.ajax({
        type: "POST",
        url: "stockInController/get_Items/"+category_id, 

        success: function(items) //we're calling the response json array 'cities'
        {
            $.each(items,function(item_id,item_name) 
            {
                var opt = $('<option />'); 
                opt.val(item_id);
                opt.text(item_name);
                $('#items').append(opt);
            });
        }

    });

 });
  }); 
```

**用于向控制器发送值的**JavaScript****

 **```
 <script type="text/javascript">
       $('#btn').click(function() { //  $("#form").serialize()

var cust_id = $('#cust_id').val();
var item_id = $('#items').val();

var sales_date = $('#sales_date').val();
var sales_bill_no = $('#sales_bill_no').val();
var price = $('#price').val();
var quantity = $('#quantity').val();

var form_data = {
        cust_id: $('#cust_id').val(),
        sales_date: $('#sales_date').val(),
        sales_bill_no: $('#sales_bill_no').val(),
        price: $('#price').val(),
        quantity: $('#quantity').val(),
        item_id: $('#items').val(),

};

$.ajax({
    url: "<?php echo site_url('salesController/addSales'); ?>",
    type: 'POST',
    data: form_data,
    dataType: 'json',
    success: function(msg) {
        if(msg.res == 1)
        {
            $(".success").fadeIn(500).delay(2000).fadeOut(500);
            alert("true");
        }
        else{
            alert("false");          
          }

    }
});

return false;
   });

  </script> 
```

我已经这样做了，但这不起作用

```
 <?php echo form_dropdown('cat_id', $records2, '#', "id='category_".$i."'");?>

  <?php echo form_dropdown('item_id', $records3, '#', "id='items_".$i."'"); ?>

        <script type="text/javascript">// <![CDATA[
$(document).ready(function()
    {  
     for (var i= 0; i<5; i++)
          {
    $('#category_'+ i).change(function(){

        $('#items_'+ i > option").remove(); 
        var category_id = $('#category_'+ i).val(); 
        $.ajax({
            type: "POST",
            url: "stockInController/get_Items/"+category_id, 

            success: function(items)
            {
                $.each(items,function(item_id,item_name) 
                {
                    var opt = $('<option />'); 
                    opt.val(item_id);
                    opt.text(item_name);
                    $('#items_'+ i).append(opt); 
                });
            }

        });

    });
}

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:38:51.770

我认为这里的问题是，在每一行中，您必须输入具有 ID 的“类别”和“项目”的输入。页面上的每个元素都应该有一个唯一的 ID。也许对于第 1 行，它们是“cat_1”和“item_1”或类似的东西。现在有点像你有一个有 10 个人的房间，其中 5 个人叫 Johnny，5 个人叫 Sarah。如果你走进去问约翰尼，你会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:39:34.050

```
<?php for ($i = 0; $i < 5; $i++) {
?>
<tr>
       <td>     

<?php echo form_dropdown('cat_id', $records2, '#', "id='category".$i."'");?>
</td> 
```

```
<?php echo form_dropdown('item_id', $records3, '#', "id='items".$i."'"); ?>

 </td> 
```

同样，在您的 javascript 中运行一个循环并获取类别和项目的值

编辑：

```
for(i=0;i < 5; i++){
$("#category"+i).change(function(){ 
$("#items"+i+" > option").remove();
var category_id = $("#category"+i).val();  
$.ajax({
    type: "POST",
    url: "stockInController/get_Items/"+category_id, 

    success: function(items) //we're calling the response json array 'cities'
    {
        $.each(items,function(item_id,item_name) 
        {
            var opt = $('<option />'); 
            opt.val(item_id);
            opt.text(item_name);
            $("#items"+i).append(opt);
        });
    }

});
} 
```**

# jquery - Jquery 不会影响动态加载的内容

> ID：14396818
> 
> 赞同：0
> 
> 时间：2013-01-18T10:23:07.650
> 
> 标签：jquery, ajax, forms, dynamic

我正在制作一个动态加载到内容区域的表单。单击链接时，jQuery 应复制该表单的一部分，以添加更多参与者。麻烦的是，它不会响应。我在这里和谷歌上搜索过，但由于某种原因，那里给出的答案不起作用。

这是html（或至少是重要的部分）：

```
<div id="container">
    <div id="main">
        <div id="content">
            <div> 
                <h1>Hello, I am a form!</h1>
                <form id="contactform">
                    <p class="respondent">
                        <input type="text" value "first name" />
                        <input type="text" value="last name" />
                    </p>
                    <span id="addRespondent">add respondent</span>
                </form>
            </div>
        </div>
    </div>
</div> 
```

表单通过 .load() 函数从外部 html 文件动态加载到包含在“内容”div 中的 div 中。它替换了该 div 中先前存在的其他内容。

我用 jQuery 尝试过这样的事情：

```
$(document).ready(function (e){
    $('#main').on('click','#addRespondent', function(e) {
        $('p.respondent').clone().prependTo('#addRespondent');
        e.preventDefault();
    });
}); 
```

这不是错误使用 .clone() 或 .prependTo() 函数的问题，即使我在函数中添加了一个简单的警报，也没有任何反应。我试过摆弄查找和过滤，但没有结果。如果有人指出我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:02:30.000

我在您的代码中看到的唯一问题是

```
$('p.respondent').clone().prependTo('#addRespondent'); 
```

（将每个添加`p.respondent`到的开头`#addRespondent`），您可能想要

```
$('p.respondent:first').clone().insertBefore('#addRespondent'); 
```

`p.respondent`（在之前添加第一个`#addRespondent`）。也许您也想清理表格？

```
$('p.respondent:first')
  .clone().insertBefore('#addRespondent')
  .find("input").val(""); 
```

* * *

另外，是否有机会`#main`在准备好的文件中不存在？如果是这样，而不是

```
$('#main').on('click', ... 
```

你应该委托给其他一些元素：

```
$(document).on('click', ... 
```

# php - ORA-08177: 无法序列化此事务的访问 - Oracle 11g

> ID：14396820
> 
> 赞同：2
> 
> 时间：2013-01-18T10:23:18.307
> 
> 标签：php, oracle, oracle11g

我正在为 PHP 应用程序使用 ADOdb 库。

这个应用程序可以在 Oracle 9g 上顺利运行，但是当我们将它转​​移到新服务器时，它经常会抛出以下错误：

> ORA-08177: 无法序列化此事务的访问

我正在使用的 oci_8.dll 可能有问题吗？我应该将其更新为 php_oci8_11g.dll 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T10:43:14.290

如果您的隔离级别设置为`serializable`并且您正在对其他也在执行 DML 的表执行 DML，则会发生此错误。

您是否设置了这样的隔离级别 + 执行 DML，如果是，为什么标准不`read committed`适合您？

例如：

有人删除了一行

```
ANOTHER SESSION                   YOUR SESSION

SQL> delete from a where id = 1;

1 row deleted. 
```

提交尚未完成..同时，您的 SERIALIZED 事务尝试删除同一行...

```
SQL> alter session set isolation_level=serializable;

Session altered.

SQL> delete from a where id = 1; 
```

此时您的会话将挂起，因为另一个会话已锁定。如果该其他会话现在提交：

```
SQL> commit;        

Commit complete. 
```

您的会话遇到了该错误：

```
delete from a where id = 1
*
ERROR at line 1:
ORA-08177: can't serialize access for this transaction 
```

# python - 在 python 中创建文件管理器

> ID：14396821
> 
> 赞同：0
> 
> 时间：2013-01-18T10:23:18.483
> 
> 标签：python, pydev, glade

祝大家有美好的一天。这实际上是我第一次发布问题，所以我会直奔主题。我和我的团队成员实际上正在使用 python 作为我们的编程语言来开发一个应用程序，我们一直在寻找如何使用上述语言创建文件管理器的方法。

我们一直在网上搜索和搜索，但似乎找不到问题的合适答案。

`python`我们正在尝试使用in`eclipse`或使用 glade来实现这样的目标。

```
.-root
.  - dir_one
.    -file_one
.    -file_two
.    -file_three
.  -dir_two
.    -image_one
.    -image_two 
```

抱歉，我目前似乎无法发布图片。任何帮助将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:56:39.797

由于您指定了 glade，我假设您使用的是 GTK+。

在我看来，确实有两个问题需要您解决：

*   如何列出/移动/删除/复制文件和目录。`os`使用 python 的模块 ( [http://docs.python.org/2/library/os.html](http://docs.python.org/2/library/os.html) ) 和 GLib 的 GIO实际上为您解决了这个问题。（没有文档 AFAIK，我发现根据 C 函数确定要做什么非常简单）

*   如何制作你的界面。根据您建议的布局，我认为 Gtk.TreeView 模型/小部件是您所追求的：[https ://python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html](https://python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html)

此外，这里有一个相对简单的预制示例：http: [//zetcode.com/gui/pygtk/advancedwidgets/](http://zetcode.com/gui/pygtk/advancedwidgets/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:58:50.750

如果您只想打印您在帖子中显示的内容，那么您正在搜索的是[os.walk。](http://docs.python.org/2/library/os.html)

这是一个关于如何使用它**[的好例子。](http://www.saltycrane.com/blog/2007/03/python-oswalk-example/)**

正如 Michael 所提到的， os 模块可能满足了您对文件管理器操作的大部分需求。

# android - Logcat 过滤器显示来自 A 的所有内容，但仅显示来自 B 的以 XYZ 开头的消息

> ID：14396824
> 
> 赞同：1
> 
> 时间：2013-01-18T10:23:37.153
> 
> 标签：android, eclipse, logcat, android-logcat

我想在 Eclipse 中创建一个 logcat 过滤器，它将显示来自日志标签 A 的所有消息，但只显示来自日志标签 B 的以 XYZ 开头的消息。这可能吗？如何？

# xaml - RichTextBlock 溢出，将段落保持在一页上（在一个溢出控制中）

> ID：14396827
> 
> 赞同：0
> 
> 时间：2013-01-18T10:23:59.013
> 
> 标签：xaml, windows-8, windows-runtime, windows-store-apps

我正在打印 RichTextBlock 内容，使用 RichTextOverflow 进行分页，效果很好，但我想将段落放在一页上，现在有时我在段落中间有分页符。

这是示例：

![打印问题](../Images/4f7ec3b8cd3fdb3517e3d648bdc8be95.png)

第 3 段应该在下一页，似乎 ITextParagraphFormat.KeepTogether 正是我所需要的，但不知道如何为 RichTextBlock 获取它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:46:35.260

如果您将段落放在 InlineUIContainer 内的 TextBlock/RTB 中，它将被视为单个元素，并在需要时完整地延续到下一页。这种方法可能有一些副作用，但我相信它应该适用于打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:16:21.847

毕竟我做了一个方法，将在两页上被打破的段落“推”到下一页，我对这个解决方案不是很满意，但我没有找到另一种方法

```
public static void BreakBeforeLastParagraph(RichTextBlockOverflow rto)
{
  if (!rto.HasOverflowContent)
    return;

  var pageBreak = rto.ContentEnd.Offset;
  var brokenPar = rto.ContentSource.Blocks.FirstOrDefault(pr => pr.ElementStart.Offset <= pageBreak && pr.ElementEnd.Offset >= pageBreak);
  if (brokenPar != null)
  {
    double spacerSize = pageBreak - brokenPar.ElementStart.Offset;
    var spacer = new Paragraph();
    spacer.Margin = new Windows.UI.Xaml.Thickness(0,spacerSize, 0,0);
    rto.ContentSource.Blocks.Insert(rto.ContentSource.Blocks.IndexOf(brokenPar), spacer);
  }
  rto.UpdateLayout();      
} 
```

# java - Android：对另一个类中的Activity对象的引用变为NULL

> ID：14396829
> 
> 赞同：2
> 
> 时间：2013-01-18T10:24:04.210
> 
> 标签：java, android, android-intent

我想要做的是将 mainactivity 的引用传递给另一个类并使用它。

当我第一次传递引用时，它不为空。但后来当我在事件处理程序中使用它时，它变为空。

这是代码：

```
public class MainActivity extends MapActivity implements SmsReceivedListener {
    SmsReceiver smsreceiver = new SmsReceiver();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        smsreceiver.setSmsReceivedListener(this);
    }

    public void drawme() {
        // do smth
    }

    @Override
    public void onSmsReceived(String id, String lon, String lat) {
        Toast.makeText(this, "SMS delivered", Toast.LENGTH_LONG).show();

    }
} 
```

我获得参考的另一个类：

```
public class SmsReceiver extends BroadcastReceiver {
    private SmsReceivedListener listener;
    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";

    @SuppressLint("NewApi") 
    @Override
    public void onReceive(final Context context, final Intent intent) {
        // Here it is NULL
        if(listener!=null)
            listener().onSmsReceived(carNumber, lon,lat);
    }

    public void setSmsReceivedListener(SmsReceivedListener mainActivity) {
        //It is no null when I first set the object here
        listener = (mainActivity);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:26:55.057

它只会“变成” null 如果你

*   将其设置为空
*   以非线程安全的方式使用它，并且您正在阅读不同的线程来设置
*   您正在使用相同的字段，但在不同的对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:38:41.403

您没有注册 SmsReceiver，因此我猜如下：

SmsReceiver 在 Manifest 中注册。因此，当检测到广播时，系统会创建一个接收器的实例，它与您创建的实例不是同一个实例。

建议：在活动中注册接收者，而不是在清单中。

# php - 忽略错误的好主意？

> ID：14396847
> 
> 赞同：4
> 
> 时间：2013-01-18T10:25:08.547
> 
> 标签：php, error-reporting

我发现在我的系统上“error_reporting”已关闭。所以我打开它（E_ALL），现在我有很多错误。

如果你对我的错误感兴趣：

```
Notice: Undefined index: page in …path/file.php on line 22
Notice: Undefined offset: 1 in …path/file.php on line 49
Notice: Undefined offset: 2 in …path/file.php on line 57
Notice: Undefined offset: 3 in …path/file.php on line 58
Notice: Undefined variable: out in …path/file.php on line 85
Notice: Undefined variable: out in …path/file.php on line 109
Notice: Use of undefined constant M_DESCRIPTION - assumed 'M_DESCRIPTION' in …path/file.php on line 181
Notice: Use of undefined constant GA_TRACKER - assumed 'GA_TRACKER' in …path/file.php on line 291
Notice: A session had already been started - ignoring session_start() in …path/file.php on line 12
Notice: Undefined variable: attributes in …path/file.php on line 86
Notice: Undefined variable: li in …path/file.php on line 129
Notice: Undefined index: breakafterlabel in …path/file.php on line 175
Notice: Undefined index: afterlabel in …path/file.php on line 167
Notice: Undefined index: attributes in …path/file.php on line 188
Notice: Undefined index: value in …path/file.php on line 191
Notice: Undefined index: for in …path/file.php on line 163
Notice: Undefined index: attributes in …path/file.php on line 249
Notice: Undefined index: value in …path/file.php on line 299
Notice: Undefined variable: out in …path/file.php on line 109
Notice: Undefined offset: 0 in …path/file.php on line 418
Notice: Undefined index: maxlength in …path/file.php on line 368
Notice: Undefined index: accept in …path/file.php on line 372
Notice: Undefined variable: out in …path/file.php on line 93
Notice: Undefined index: accept in …path/file.php on line 378
Notice: Undefined index: title in …path/file.php on line 379
Notice: Undefined index: accept in …path/file.php on line 402
Notice: Undefined index: fp in …path/file.php on line 624
Notice: Undefined variable: alert_msg in …path/file.php on line 246
Notice: Undefined variable: returner in …path/file.php on line 87
Notice: Undefined index: body in …path/file.php on line 309
Notice: Undefined variable: out in …path/file.php on line 81
Notice: Undefined variable: defaults in …path/file.php on line 121 
```

首先我想“哦，你最好再把它关掉”，但我不确定后果！

所以一个非常简单的问题是：我是否忽略所有错误是否重要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T10:28:25.897

在开发环境中最好使用`error_reporting(E_ALL)`，因此您也可以看到通知。这鼓励您拥有更高的编码标准。

运行实时站点时，您必须有`display_errors off`，但记录您的错误（就像您正在做的那样）。

这样，您只会看到有意义的错误，而不仅仅是“注意：未定义...”。如果网站已经完成，你应该花一些时间重构你的代码，长期的好处是值得的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T10:41:40.667

如果您只想暂时隐藏一些消息错误，请使用 @ ：

```
echo @$undefined;
@session_start; 
```

**这不会解决您的错误，但会在您****修复它**时让您的错误列表更加清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T10:30:49.643

**答案是不！** 忽略错误可能会导致意外行为。此外，它可能会减慢程序/脚本的执行速度。所以你最好不要忽略，而是修复它们。

做的更详细：`Undefined offset`在大多数情况下错误是没有问题的，`Use of undefined constant`常量或失败`session_start`可能是危险的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T10:33:15.113

您应该注意错误和警告。他们是在说你做错了什么。

这些错误在开发环境中非常有用。但是当你发布代码时，最好禁用它们。

# blackberry - 在黑莓上获取处理资源请求的绝对网址

> ID：14396850
> 
> 赞同：1
> 
> 时间：2013-01-18T10:25:20.917
> 
> 标签：blackberry, java-me, absolute-path, browserfield

我使用这种方法获取网页上包含的资源的网址

```
public InputConnection handleResourceRequest(BrowserFieldRequest request) throws Exception 
{
    final String url = request.getURL();
    return super.handleResourceRequest(request);
} 
```

但是，我`request.getURL();`让它返回相对 url 而不是绝对 url。

如何更改它以获取绝对 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T23:12:23.320

当我运行你的代码时，它**确实**返回了绝对 URL，即使我的网页包含*相对*链接。也就是说，如果有时它不会让我感到惊讶，它不会。我还没有完全测试过这段代码，但我认为你可以尝试这样的事情。

基本上，您检查 URL 是否是绝对 URL，如果不是，则使用父`BrowserField`文档 URL 组合一个绝对 URL：

```
 ProtocolController controller = new ProtocolController(_browserField) {

     public InputConnection handleResourceRequest(BrowserFieldRequest request) throws Exception {
        String absoluteUrl = null;
        URI uri = URI.create(request.getURL());
        if (uri.isAbsolute()) {
           absoluteUrl = request.getURL();
        } else {
           String docUrl = _browserField.getDocumentUrl();
           String url = request.getURL();
           if (url.startsWith("/")) {
              // the URL is relative to the server root
              URI docUri = URI.create(docUrl);
              absoluteUrl = docUri.getScheme() + "://" + docUri.getHost() + url;
           } else {
              // the URL is relative to the document URL
              absoluteUrl = docUrl + url;
           }
        }
        System.out.println("   requesting: " + absoluteUrl);
        return super.handleResourceRequest(request);
     }
  } 
```

同样，对我来说，我得到的是绝对 URL，所以我不能轻易地测试 URL 是相对的分支中的代码。所以，我有可能在某个地方丢了一个`"/"`地方，或者没有`file:///`正确处理 URL。

但是，这是解决您的问题的起点。

# c# - 反射以查找方法是否使用任何特定方法

> ID：14396854
> 
> 赞同：4
> 
> 时间：2013-01-18T10:25:26.470
> 
> 标签：c#, reflection

我有一个 dll 有一些类，这些类有一些方法。其中一些方法内部还有另一个方法调用。

如何检查类中的方法是否具有特定方法。我对此进行了一些谷歌搜索，并且能够在 dll 中找到如下类：

```
public List < string > GetClassFromDlLstring(string dllName)
{
    Assembly assemblies = null;
    try
    {
        assemblies = Assembly.LoadFrom(dllName);
    }
    catch (Exception ex)
    {

    }
    var allTypes = assemblies.GetTypes();

    return (from allType in allTypes where allType.IsClass select allType.ToString()).ToList();
} 
```

类似地，查找类中所有方法的方法如下：

```
public List <string> GetAllTMethodClass(string dllName, string className)
{
    var assemblies = Assembly.LoadFrom(dllName);

    Type type = assemblies.GetType(className);

    var temp = new List <string> ();

    try
    {
        MethodInfo[] methods = type.GetMethods();
        //MethodInfo[] methods = type.GetMethods(BindingFlags.Instance);

        foreach(MethodInfo meth in methods)
        {
            if (meth.MemberType == MemberTypes.Method && meth.MemberType != MemberTypes.Property) 
                temp.Add(meth.Name);
        }
    }
    catch (Exception ex)
    {

    }

    return temp;
} 
```

我现在有一个问题，上面的函数也返回属性名称。
此外，我想查看功能列表并检查该功能是否包含特定功能。我怎样才能做到这一点？

## 编辑1：

我发现了类似的帖子，其链接如下
-[查看是否在使用反射的方法内部调用方法](https://stackoverflow.com/questions/5741350/look-if-a-method-is-called-inside-a-method-using-reflection)
-[获取 C# 方法体内使用的类型](https://stackoverflow.com/questions/5667816/get-types-used-inside-c-sharp-method-body/5668079#5668079)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:32:18.667

您必须查看方法的 IL。IMO，[Mono.Cecil](http://www.mono-project.com/Cecil)是最好的方法。

# android - android 如何在物理按钮上执行反馈触觉？

> ID：14396856
> 
> 赞同：0
> 
> 时间：2013-01-18T10:25:41.087
> 
> 标签：android

查看android源码后，我知道当一个按钮执行点击时，它会调用视图的performHapticFeedback方法，让手机执行一个BZZZTT效果。performHapticFeedback 代码如下：

```
public boolean performHapticFeedback(int feedbackConstant, int flags) {
    if (mAttachInfo == null) {
        return false;
    }
    //noinspection SimplifiableIfStatement
    if ((flags & HapticFeedbackConstants.FLAG_IGNORE_VIEW_SETTING) == 0
            && !isHapticFeedbackEnabled()) {
        return false;
    }
    return mAttachInfo.mRootCallbacks.performHapticFeedback(feedbackConstant,
            (flags & HapticFeedbackConstants.FLAG_IGNORE_GLOBAL_SETTING) != 0);
} 
```

但是，我想知道 android 如何对物理按钮（例如 key_home、key_Back、key_menu）执行反馈触觉。导致物理按钮不基于视图。找了整整一个下午的源代码，但没有找到关于物理按钮如何执行触觉反馈的有价值的代码行~~~~ 谁能给我一些提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:26:54.603

相关代码行位于`PhoneWindowManager.java`-> `public int interceptKeyBeforeQueueing(KeyEvent event, int policyFlags, boolean isScreenOn)`.（在其他高级应用程序处理之前调用）；判断 KeyEvent 代码后，就会调用`mVibrator.vibrate(pattern[0]);`mVibrator 所在的地方，方法是调用`mVibrator = (Vibrator)context.getSystemService(Context.VIBRATOR_SERVICE);`

# c++ - 右移开头的零

> ID：14396858
> 
> 赞同：7
> 
> 时间：2013-01-18T10:25:52.733
> 
> 标签：c++, c, bit-manipulation, bit-shift

我正在尝试做一种左移，它会在开头添加零而不是一。例如，如果我离开 shift `0xff`，我会得到：

```
0xff << 3 = 11111000 
```

但是，如果我右移它，我会得到：

```
0xff >> 3 = 11111111 
```

我可以使用任何操作来获得相当于左移的操作吗？即我想得到这个：

```
00011111 
```

有什么建议吗？

**编辑**

为了回答评论，这是我正在使用的代码：

```
int number = ~0;
number = number << 4;   
std::cout << std::hex << number << std::endl;

number = ~0;
number = number >> 4;
std::cout << std::hex << number << std::endl; 
```

输出：

```
fffffff0
ffffffff 
```

由于它似乎通常应该起作用，我对为什么这个特定代码不起作用感兴趣。任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T10:52:03.103

这就是 C 和二进制算术的工作原理：

如果你离开 shift `0xff << 3`，你会得到二进制：`00000000 11111111 << 3 = 00000111 11111000`

如果你右移`0xff >> 3`，你会得到二进制：`00000000 11111111 >> 3 = 00000000 00011111`

`0xff`是一个（有符号的）整数，具有正值`255`。由于它是正数，因此转换它的结果是 C 和 C++ 中定义明确的行为。它不会做任何算术移位，也不会做任何种类或定义不明确的行为。

```
#include <stdio.h>

int main()
{

  printf("%.4X %d\n", 0xff << 3, 0xff << 3);
  printf("%.4X %d\n", 0xff >> 3, 0xff >> 3);

} 
```

输出：

```
07F8 2040
001F 31 
```

所以你在你的程序中做了一些奇怪的事情，因为它没有按预期工作。也许您正在使用 char 变量或 C++ 字符文字。

* * *

来源：ISO 9899:2011 6.5.7。

* * *

**问题更新后编辑**

`int number = ~0;`假设二进制补码，给你一个等于 -1 的负数。

`number = number << 4;`调用未定义的行为，因为您左移了一个负数。该程序正确地实现了未定义的行为，因为它要么做某事，要么什么都不做。它可能会打印 fffffff0 或者可能会打印粉红色的大象，或者它可能会格式化硬盘驱动器。

`number = number >> 4;`调用实现定义的行为。在您的情况下，您的编译器会保留符号位。这称为[算术移位](http://en.wikipedia.org/wiki/Arithmetic_shift)，算术右移以这样一种方式工作，即 MSB 用移位前的任何位值填充。因此，如果您有一个负数，您将体验到该程序正在“移入”。

在现实世界中 99% 的情况下，对有符号数使用位运算符是没有意义的。因此，请始终确保您使用的是无符号数，并且 C/C++ 中没有任何危险的隐式转换规则将它们转换为有符号数（有关危险转换的更多信息，请参阅“整数提升规则”和“通常的算术转换”，关于 SO 的大量好信息）。

**编辑 2**，来自 C99 标准的基本原理文档 V5.10 的一些信息：

> 6.5.7 移位运算符
> 
> K&R 中移位运算符的描述表明，移位长计数应该迫使左操作数在移位之前扩大到长。C89 委员会认可的一种更直观的做法是，移位计数的类型与结果的类型无关。
> 
> C89 中的安静变化
> 
> 移位长计数不再将移位的操作数强制为长。C89 委员会肯定了 K&R 授予的实现自由，不需要符号右移操作来符号扩展，因为这样的要求可能会减慢快速代码，并且符号扩展移位的有用性是微不足道的。（将负的二​​进制补码整数算术右移一位与除以二不同！）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T10:27:15.947

如果您明确地转移 0xff 它会按预期工作

```
cout << (0xff >> 3) << endl; // 31 
```

仅当`0xff`是有符号宽度为 8 的类型（`char`并且`signed char`在流行的平台上）时才可能。

* * *

因此，在常见情况下：

您需要使用无符号整数

`(unsigned type)0xff`

右移用作除以 2（如果我理解正确，则向下舍入）。

所以当你有 1 作为第一位时，你有**负值**，在除法之后它又是**负数**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T10:36:39.813

您正在谈论的两种右移称为[Logical Shift](http://en.wikipedia.org/wiki/Logical_shift)和[Arithmetic Shift](http://en.wikipedia.org/wiki/Arithmetic_shift)。C 和 C++ 对无符号整数使用逻辑移位，大多数编译器将对有符号整数使用算术移位，但这并不能由标准保证，即右移负符号整数的值是实现定义的。

由于您想要一个逻辑移位，您需要切换到使用无符号整数。您可以通过将常量替换为`0xffU`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T12:58:47.350

要解释您的真实代码，您只需要 Lundin 在评论中给出的 C 标准中引用的 C++ 版本：

```
int number = ~0;
number = number << 4; 
```

未定义的行为。[expr.shift] 说

> E1 << E2 的值是 E1 左移 E2 位位置；空出的位是零填充的。如果 E1 具有无符号类型，则结果的值为 E1 × 2 ^(E2)，比结果类型中可表示的最大值多模一减少。否则，**如果 E1 具有带符号类型和非负值**，并且 E1×2 ^(E2)在结果类型中是可表示的，那么这就是结果值；**否则，行为未定义**。

```
number = ~0;
number = number >> 4; 
```

实现定义的结果，在这种情况下，您的实现为您提供了算术移位：

> E1 >> E2 的值是 E1 右移 E2 位位置。如果 E1 具有无符号类型或 E1 具有带符号类型和非负值，则结果的值是 E1/2 ^(E2)的商的整数部分。**如果 E1 具有带符号类型和负值，则结果值是实现定义的**

您应该使用无符号类型：

```
unsigned int number = -1;
number = number >> 4;
std::cout << std::hex << number << std::endl; 
```

输出：

```
0x0fffffff 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-19T11:04:27.800

在这里加上我的 5 美分……我面临与 this.lau 完全相同的问题！我对此做了一些敷衍的研究，这些是我的结果：

```
typedef unsigned int Uint;
#define U31 0x7FFFFFFF
#define U32 0xFFFFFFFF

printf ("U31 right shifted: 0x%08x\n", (U31 >> 30));
printf ("U32 right shifted: 0x%08x\n", (U32 >> 30));

Output:
U31 right shifted: 0x00000001 (expected)
U32 right shifted: 0xffffffff (not expected) 
```

看起来（在没有任何人有详细知识的情况下）XCode for Mac OS X v5.0.1 中的 C 编译器将 MSB 保留为随着每次移位而被拉出的进位位。

有点烦人的是，反之亦然：-

```
#define ST00 0x00000001
#define ST01 0x00000002

printf ("ST00 left shifted: 0x%08x\n", (ST00 << 30));
printf ("ST01 left shifted: 0x%08x\n", (ST01 << 30));

Output:
ST00 left shifted: 0x40000000
ST01 left shifted: 0x80000000 
```

我完全同意上面的人断言操作数的符号与移位运算符的行为无关。

任何人都可以阐明 C 的 Posix4 实现的规范吗？我觉得一个明确的答案可能就在那里。

与此同时，似乎唯一的解决方法是按照以下思路构建；-

```
#define CARD2UNIVERSE(c) (((c) == 32) ? 0xFFFFFFFF : (U31 >> (31 - (c)))) 
```

这行得通 - 令人恼火但必要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-14T13:46:41.123

以防万一如果您希望在右移后负数的第一位为 0，我们可以做的是将该负数与 INT_MIN 进行 XOR，这将使其 msb 为零，我知道它不合适的算术移位但会完成工作

# android - 如何设置进度条直到使用 json 从服务器获取数据？

> ID：14396859
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:25:57.873
> 
> 标签：android, android-asynctask

> **可能重复：**
> [Android AsyncTask 进度条](https://stackoverflow.com/questions/9157515/android-asynctask-progress-bar)

我正在使用登录过程，在 tat 时间我从服务器获取数据是延迟的。所以我想为 tat 延迟设置一个进度条。如何设置进度条直到得到服务器的响应。任何知道答案的请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T10:28:07.260

```
private class LongOperation extends AsyncTask<String, Void, String> 
{
    protected void onPreExecute() 
    { 
        progressDialog = new ProgressDialog(activity.this); 
        progressDialog.setTitle("Processing...");
        progressDialog.setMessage("Please wait...");
        progressDialog.setCancelable(true);
        progressDialog.show();
    }

    protected String doInBackground(String... params) 
    {
        try 
        {
            //Getting data from server
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
    protected void onPostExecute(String result) 
    {

        progressDialog.dismiss();
        Intent n = new Intent(firstactivity.this, secondactivity.class);
        startActivity(n);
    }
  } 
```

**这个怎么称呼**

```
ProgressDialog progressDialog;
LongOperation mytask = null;
mytask = new LongOperation();
mytask.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:29:26.727

在您的代码中使用 AsyncTask 并将您的代码放入 doInBackground(....) 进程中。

在 onPreExecute 中显示您的进度对话框并在 onPostExecute(...) 中将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:29:42.030

将无限进度条视图添加到您的布局中，并首先使其不可见。

创建一个`AyncTask`来做服务器通信。

在`onPreExecute()`使进度条可见。

`onPostExecute()`再次隐藏进度条。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:30:24.627

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)`onProcessupdate`的方法

```
private class GetLogin extends AsyncTask<String, Integer, String> {
            ProgressDialog progressDialog;
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = ProgressDialog.show("Downloading...");
        }

        @Override
        protected String doInBackground(String... params) {
            for (String myUrl : params) {

                try {

                    URL url = new URL(myUrl);
                    URLConnection ucon = url.openConnection();
                    ucon.setRequestProperty("Accept", "application/xml");

                    InputStream is = ucon.getInputStream();
                    BufferedInputStream bis = new BufferedInputStream(is);

                    ByteArrayBuffer baf = new ByteArrayBuffer(50);
                    int current = 0;
                    while ((current = bis.read()) != -1) {
                        baf.append((byte) current);
                    }
                    String str = new String(baf.toByteArray(), "UTF8");

                    return str;

                } catch (MalformedURLException e) {
                    //error
                } catch (IOException e) {
                    //error
                }
            }
            return "All Done!";
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            super.onProgressUpdate(values);
                    pd.setMessage("Downloading... (" + values[0] + "%)");
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
             progressDialog.dismiss();

        }
    } 
```

# java - 如何将 ContentProvider 与在线数据库一起使用

> ID：14396860
> 
> 赞同：0
> 
> 时间：2013-01-18T10:25:57.993
> 
> 标签：java, android, database, android-contentprovider

据我了解，扩展`ContentProvider`有助于与存储在设备中的本地数据库进行交互。但我不确定如何`ContentProvider`使用在线数据库来实现。`ContentProvider`仅适用于本地数据库吗？我正在考虑将两者与缓存一起使用，但我在这方面非常缺乏经验。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:28:36.100

The [Contentprovider](http://developer.android.com/reference/android/content/ContentProvider.html) interface design actually abstracts the actual persistence details away from your data access, in theory making any kind of data source possible. In practice, the performance of a contentprovider accessing it's data over the network will be poor at best due to the overhead compared to a local datasource such as SQLite / files.

Preloading/cacheing is probably a good idea!

# cruisecontrol.net - Cruise Control .Net - 关闭版本控制

> ID：14396864
> 
> 赞同：1
> 
> 时间：2013-01-18T10:26:02.690
> 
> 标签：cruisecontrol.net

每次巡航控制执行构建时，它都会使用标签更新每个文件的历史记录，即更新到版本 14 等。

如何将其关闭以使其不更新文件而仅执行构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:48:31.220

首先检查配置文件中是否有`<labeller>`块。如果你有，这会覆盖默认的标注器，它只是将一个构建与另一个构建区分开来。

# http - HTTP 内容范围标头是否与分块传输编码兼容？

> ID：14396865
> 
> 赞同：6
> 
> 时间：2013-01-18T10:26:03.233
> 
> 标签：http, networking

如上所述，在 HTTP 标准中字节服务分块传输是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-26T03:22:15.543

从 RFC2616 开始，Transfer-Encoding 是消息的属性，而不是实体。Content-Range 是一个实体标头。所以原则上它们可以一起使用，除非存在两者冲突的极端情况。

这是它应该如何发生的：使用星号“*”作为实例长度。省略 content-length 标头并发送 Transfer-Encoding: chunked。

# drupal - 对 Drupal 分期的建议？

> ID：14396869
> 
> 赞同：1
> 
> 时间：2013-01-18T10:26:22.613
> 
> 标签：drupal, drupal-7, staging

我需要有关**Drupal 7**上的分期的参考。

我的要求是：

*   内容管理员可以在**STAGING**实例中执行内容编辑

*   可以在不影响访问者看到**的 PROD 服务器的情况下****预览**更改

***   只有当管理员说“ **DEPLOY/PUBLISH** ”时，更改才会推送到 PROD** 

 **关于我应该使用什么模块的任何建议？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T14:25:14.437

Why should this be a module at all?

Staging should be a different deployment with a separate database and url.

If you've crossed that option out because you haven't found a way to move across "build" information stored within the database, then look at the [features](http://drupal.org/project/features) module.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:29:51.980

我不确定是否有这样的解决方案准备好，您可以尝试使用域模块制作内容管理员只能在暂存域中发布而管理员可以发布到所有域的内容。[http://drupal.org/project/domain](http://drupal.org/project/domain)

编辑：更详细地说，管理员可以转到节点列表并选择要发布到生产环境中的节点，或者编辑节点并更改该节点发布的域。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T10:23:22.480

如果您只想为管理员提供编辑内容而不影响实时内容的能力，您可以使用修订模块：[http ://drupal.org/project/revisioning](http://drupal.org/project/revisioning)

不需要单独的登台服务器，毕竟这是 cms 的目的。**

# ios - 如何在应用商店获取应用价格？

> ID：14396870
> 
> 赞同：0
> 
> 时间：2013-01-18T10:26:25.620
> 
> 标签：ios, objective-c, app-store

我想获取几个应用程序的价格以在我的应用程序中显示它们。

我可以在不解析 AppStore 应用程序页面的情况下做到这一点吗？

商店套件是否仅适用于应用内功能？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:40:08.920

我知道的最简单的方法是使用[iTunes 搜索 API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)。您可以 JSON 格式获取应用程序价格和更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:41:14.130

我们可以使用这个请求[https://itunes.apple.com/lookup?id=284910350](https://itunes.apple.com/lookup?id=284910350)

有价格字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:28:34.670

除非您建立自己的提要，它会告诉您应用程序的价格，否则您不走运。

`StoreKit`仅适用于应用内购买。

# jquery - 在 div 中添加成本

> ID：14396871
> 
> 赞同：0
> 
> 时间：2013-01-18T10:26:29.287
> 
> 标签：jquery, html

我创建了具有成本属性的图像，例如

```
 <img src="http://www.macnetwork.org/images/icon_linkedIn.png" cost="280" alt=''/> 
```

在这里，我将在每个成本中添加各种 img 标签。但是当我选择一个 img 时，它的成本必须添加到一个`<div>`名为`.cost`

此处为 HTML

```
 <div id="main">

<img src="http://www.small-icons.com/stock-icons/small-toolbar40.gif" cost="100" alt=''/>
 <img src="http://www.homeworldbusiness.com/media/icons/icon_mini_linkedin.png" cost="200" alt=''/>
 <img src="http://www.driscoll-const.com/images/skin/feed_icon.png" cost="300" alt=''/>
 <img src=" http://www.isos.com/sites/default/files/icon_images/cabling-small.png" cost="400" alt=''/>

 </div>
<div id="secondary">

<img src="http://www.macnetwork.org/images/icon_linkedIn.png" cost="280" alt=''/>
<img src="http://www.macnetwork.org/images/icon_rss.png" cost="140" alt=''/>
<img src="http://www.gogrid.com/gg/images/products/gg_prod_icon.png" cost="80" alt=''/>
<img src="http://www.lateralpaymentsolutions.com/images/contact_small_icon.jpg" cost="20" alt=''/>
 </div> 

 <div id="preview_section" style="clear:both">
 <div class="cost"></div>
<div id="main_img"></div>
  <div id="secondary_img"></div>
 </div> 
```

在这个成本 div 中，我必须添加和减去每个所选图像的值。

如果 选择主 div 中的**图像 1和辅助 div 中的****图像 2**，则成本应为**240**

同样，当图像更改时，必须降低其先前的成本，并且应该添加所选的图像成本。

我试图更改脚本中的文本

```
 $(document).ready(function(){
      $("#main img").click(function(){
          var src = $(this).attr('src');
          $("#main_img").css("background-image",'url('+src+')');

          var cost = $(this).attr("cost");
          $(".cost").text(cost);
      });

       $("#secondary img").click(function(){
        var src1 = $(this).attr('src');
        $("#secondary_img").css("background-image",'url('+src1+')');

        var cost = $(this).attr("cost");
       $(".cost").text(cost);
      });

 }); 
```

在这种情况下如何使用 jquery 添加或减去值....我做了一个[**小提琴**](http://jsbin.com/igopoc/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:35:17.840

最简单的方法是存储单独的成本。然后适当更新全局成本变量并重新计算总成本：

```
cost1 = parseInt($(this).attr("cost"));
var totalCost = cost1 + cost2;
$(".cost").text(totalCost); 
```

注意：您需要`parseInt()`将成本字符串转换为整数的函数。

注意2：可能还有其他（取决于您的实际要求更好？）方法。例如，您可以使用选择器来查找选定的图像，这样您就不必将成本值存储在（全局）变量中。

请参阅[更新的小提琴](http://jsbin.com/igopoc/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:37:36.800

您的错误是因为您使用的是文本并且没有使用任何添加。那么也许使用一个函数来计算成本？

```
function workOutCost(updatedPrice){
    var newPrice = Math(parseFloat($('.cost').innerHTML)+updatePrice);
    $('.cost').HTML(newPrice);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:38:40.613

解析成本并将主要和次要成本存储在单独的变量中。这样，您可以轻松计算一张图像更改时的成本：

```
$(document).ready(function(){

  var cost1 = 0, cost2 = 0;

  $("#main img").click(function(){
    var src = $(this).attr('src');
    $("#main_img").css("background-image",'url('+src+')');

    cost1 = parseInt($(this).attr("cost"), 10);
    updateCost();
  });

  $("#secondary img").click(function(){
    var src1 = $(this).attr('src');
    $("#secondary_img").css("background-image",'url('+src1+')');

    cost2 = parseInt($(this).attr("cost"), 10);
    updateCost();
  });

  function updateCost(){
    $(".cost").text(cost1 + cost2);
  }

}); 
```

# php - 查找Json中是否存在密钥--- php

> ID：14396874
> 
> 赞同：0
> 
> 时间：2013-01-18T10:26:36.230
> 
> 标签：php, json, search

我对php很陌生，我有一个这样的Json：

```
{
  "customer_id": "guest_user_101",
  "merchantId": "guest",
  "cards": 
  [
    {
      "card_token": "0784ba0c-dc07-489e-a57d-16dfcb39868f"
    },
    {
      "card_token": "fe4ebe01-bbb6-46b6-8e49-5c572ee20bc7"
    }
  ]
} 
```

我想查找是否有`card_token`in `cards`。有没有简单而优雅的方法来做到这一点？请注意，也可能存在`cards`列表为空的情况。

目前我这样做：

```
$json->cards[0]->card_token 
```

但我想这个问题会有更好的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:28:49.300

```
function is_card_token_present($json)
{   
    $present = false;
    foreach($json['cards'] as $card)
        if(isset($card['card_token'])) 
            $present = true;

    return $present;
} 
```

应该可以工作:) 可能需要进行一些调整，因为我目前无法对其进行测试，但概念就在那里。

# java - 如何防止 JNI 覆盖 GetLastError()

> ID：14396877
> 
> 赞同：2
> 
> 时间：2013-01-18T10:26:41.010
> 
> 标签：java, c, winapi, java-native-interface

[我们正在为xidobi](https://code.google.com/p/xidobi/)串口项目实现一些`winapi`方法的一对一映射。方法到 java的映射按预期工作，但由于未知原因被清除。`C``GetLastError()`

这是**C代码**：

```
// CreateFile ////////////////////////////////////////////////////////////
JNIEXPORT jint JNICALL
Java_org_xidobi_OS_CreateFile(JNIEnv *env, jobject this,
    jstring lpFileName,
    jint dwDesiredAccess,
    jint dwShareMode,
    jint lpSecurityAttributes,
    jint dwCreationDisposition,
    jint dwFlagsAndAttributes,
    jint hTemplateFile) {

const char* fileName = (*env)->GetStringUTFChars(env, lpFileName, NULL);

HANDLE handle = CreateFile(fileName,
                            dwDesiredAccess,
                            dwShareMode,
                            (LPSECURITY_ATTRIBUTES) lpSecurityAttributes,
                            dwCreationDisposition,
                            dwFlagsAndAttributes,
                            (HANDLE) hTemplateFile);

(*env)->ReleaseStringUTFChars(env, lpFileName, fileName);

return (jint) handle;
}

// GetLastError ////////////////////////////////////////////////////////////
JNIEXPORT jint JNICALL
Java_org_xidobi_OS_GetLastError(JNIEnv *env, jobject this) {
    return (jint)  GetLastError();
} 
```

在**Java**中，我们这样调用映射的本地方法：

```
int handle = os.CreateFile("\\\\.\\" + portName, GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, FILE_FLAG_OVERLAPPED, 0);

if (handle != INVALID_HANDLE_VALUE)
    return handle;
int lastError= os.GetLastError(); //-> sometimes 0 (ERROR_SUCCESS) 
```

我们发现如果我们在返回正确的错误代码`GetLastError()`后立即调用 C。`CreateFile(..)`由于一对一的映射非常简单，我们假设 JNI 或 VM 调用`SetLastError()`自身并清除我们的最后一个错误。

我们不想放弃一对一的映射设计，那么我们能做些什么来解决这个难题呢？

这是一个在这种情况下无济于事的类似问题：[CreateFile() 返回 INVALID_HANDLE_VALUE 但 GetLastError() is ERROR_SUCCESS](https://stackoverflow.com/questions/7665384/createfile-returns-invalid-handle-value-but-getlasterror-is-error-success?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T13:27:31.760

无论`GetLastError()`JVM 在您的本机调用`CreateFile`和本机调用`GetLastError`. 因此，您应该立即调用并将值保存在您自己的线程本地插槽中`GetLastError`。`CreateFile`

然后，您的实现`GetLastError`将从您存储它的任何地方检索它。

您可能希望将其重命名为 LastXidobiError 或一些诸如它只会检索由您的库中的调用设置的错误。

```
// Space to store last error ////////////////////////////////////////////
static DWORD dwTlsIndexLastError = 0;

BOOL WINAPI DllMain(
  _In_  HINSTANCE hinstDLL,
  _In_  DWORD fdwReason,
  _In_  LPVOID lpvReserved
){

    switch(fdwReason){
    case DLL_PROCESS_ATTACH:
        dwTlsIndexLastError = TlsAlloc();
        break;
    case DLL_PROCESS_DETACH:
        TlsFree(dwTlsIndexLastError);
        dwTlsIndexLastError = 0;
        break;
     }
     return TRUE;
}

///// Save the last error. 
///// Call this function after the "real" function whose error you want to report.
void SaveLastError()
{
    TlsSetValue(dsTlsIndexLastError, (LPVOID)(DWORD_PTR)GetLastError());
} 
// GetLastError ////////////////////////////////////////////////////////////
JNIEXPORT jint JNICALL
Java_org_xidobi_OS_GetLastError(JNIEnv *env, jobject this) {
    return (jint)  TlsGetValue(dsTlsIndexLastError);
}

// CreateFile ////////////////////////////////////////////////////////////
JNIEXPORT jint JNICALL
Java_org_xidobi_OS_CreateFile(JNIEnv *env, jobject this,
    jstring lpFileName,
    jint dwDesiredAccess,
    jint dwShareMode,
    jint lpSecurityAttributes,
    jint dwCreationDisposition,
    jint dwFlagsAndAttributes,
    jint hTemplateFile) {

const char* fileName = (*env)->GetStringUTFChars(env, lpFileName, NULL);

HANDLE handle = CreateFile(fileName,
                            dwDesiredAccess,
                            dwShareMode,
                            (LPSECURITY_ATTRIBUTES) lpSecurityAttributes,
                            dwCreationDisposition,
                            dwFlagsAndAttributes,
                            (HANDLE) hTemplateFile);

// Save the value of GetLastError for the relevant function
SaveLastError();

(*env)->ReleaseStringUTFChars(env, lpFileName, fileName);

return (jint) handle;
} 
```

# c# - DataBinding：“System.Data.DataRowView”不包含名为“AddDate”的属性

> ID：14396880
> 
> 赞同：0
> 
> 时间：2013-01-18T10:26:46.283
> 
> 标签：c#, asp.net, sql-server-2008

我在生产中的 ASP.NET 应用程序中遇到问题。我正在使用 SQL Server 2008 数据库和 IIS 7.0。

我的问题是：我的网站在一段时间内运行良好，但一段时间后它抛出“An unhandlednException”。异常消息如下

DataBinding：“System.Data.DataRowView”不包含名为“AddDate”的属性。

但是，数据库中有一个名为“AddDate”的字段。

此异常是随机发生的，并且在某个时间后网站自行再次正常运行或当我回收应用程序池时

我无法找出这种行为的原因。

请在这方面帮助我。提前致谢....

**HTML 代码：**

```
 <asp:Repeater ID="rptrNewsTitles" runat="server">
    <ItemTemplate>
    <li class="news-item"><font style="font: 11px 'verdana'; color:#b5202b"><%#(Convert.ToDateTime(Eval("AddDate")).ToUniversalTime().Equals(DateTime.Now.ToUniversalTime())) ? " " + Convert.ToDateTime(Eval("AddDate")).ToUniversalTime().ToShortTimeString() : " " + Convert.ToDateTime(Eval("AddDate")).ToString("dd MMM yyyy")%> : </font><a href='showsubject.aspx?id=<%# Eval("subjectid")%>' style="text-decoration:none;"><%#Eval("SubjectTitle") %></a></li>
    </ItemTemplate>
    </asp:Repeater> 
```

**C#代码：**

```
 DataTable dt = new DataTable();
    dt = ControlsDB.GetTableFromProc("GetNewsTitles", new string[] { "@Lang" }, new SqlDbType[] { SqlDbType.NVarChar }, new object[] { "En" }, conn);
    rptrNewsTitles.DataSource = dt;
    rptrNewsTitles.DataBind(); 
```

**从过程返回的字段：**

SubjectID, SubjectTitle, SubjectDetails, AddDate, Category, ViewsNo, addedBy, Tip, Active, SubjectLanguage, Photo, SubjectBrief, HotNews, Country, CountryID, CountryName, CountryComment, CountryFlag, Code, Active, Lang

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:49:50.583

有许多可能性。这里有几个：

1.  如果您的过程具有复杂的逻辑，包括 IF-THEN-ELSE 逻辑，您可能偶尔会执行一个省略该字段的 SELECT，或者给它一个不同的别名。

2.  如果`ControlsDB.GetTableFromProc`通过首先实例化（new-ing） a`DataTable`然后从 a 填充它来`SqlDataAdapter`工作，这似乎是一种常见的做法，那么由于多种原因（由于数据库锁定而超时是一种很可能的可能性），该表可能不是从 proc 中填充，但该方法仍在返回`DataTable`. 这会给你一个`DataTable`没有列，如果你试图绑定它肯定会抛出那个错误。

    为了发生这种情况，您需要捕获并抑制在 上发生的 SQL 错误`SqlDataAdapter.Fill`，但仍要返回`DataTable`.

# wcf - WCF RESTful 服务 - JSONP 绑定（服务器关闭连接异常）

> ID：14396881
> 
> 赞同：0
> 
> 时间：2013-01-18T10:26:49.240
> 
> 标签：wcf, web-services, rest, .net-4.0, jsonp

我的项目有一个带有 JSONP 绑定的 WCF Web 服务（.Net 框架 4.0），用于跨域通信。

我的服务中有几种方法，有几种使用 DataContract 和 DataMember 属性的复杂类型。

**问题**我面临的问题是：当我尝试调用服务（运行 Visual Studio）时，除了一种返回的特定方法之外，我能够获得几种方法的 JSONP 响应：***Error 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而没有任何响应... ***

谁能解释我可能做错了什么或我可能缺少什么配置？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:25:19.497

对此问题进行了更多研究。发现该方法中使用的 DateTime 对象之一具有默认分配值：'01/01/0001'。将其值设置为 Now.Date 解决了这个问题

# web-services - 在 Powershell 中使用 WebRequest 代理

> ID：14396885
> 
> 赞同：2
> 
> 时间：2013-01-18T10:26:55.530
> 
> 标签：web-services, powershell, proxy, webrequest, connectivity

我在脚本 powershell 中使用 WebRequest 来检查 url 是否有效并且检测 web 服务是否可用。

我的脚本 WebRequest

```
$request = [System.Net.WebRequest]::Create($WebServiceSSRSRDL)
$request.Method = 'HEAD'

$request.Credentials = [System.Net.CredentialCache]::DefaultCredentials
if ($request.Proxy -ne $null) 
{
    $request.Proxy.Credentials = [System.Net.CredentialCache]::DefaultNetworkCredentials
}

$response = $request.GetResponse()
$httpStatus = $response.StatusCode
$urlIsValid = ($httpStatus -eq 'OK')
$tryError = $null
$response.Close() 
```

但我收到错误**远程服务器返回错误：（500）内部服务器错误。**

如果我使用 WebClient，我不会出错，一切都很好。

我的脚本 WebClient

```
$webclient = New-Object Net.WebClient
$webclient.Credentials = [System.Net.CredentialCache]::DefaultCredentials
if($webclient.Proxy -ne $null)     
{
   $webclient.Proxy.Credentials = [System.Net.CredentialCache]::DefaultNetworkCredentials
}

$webclient.DownloadString($WebServiceSSRSRDL) | Out-Null 
```

我想在我的脚本中使用 WebRequest。有什么建议吗？

# objective-c - 如何在 NSLog 中打印 int * & unsigned int*？

> ID：14396886
> 
> 赞同：32
> 
> 时间：2013-01-18T10:26:55.917
> 
> 标签：objective-c, nslog

如何使用打印`int*`（int指针）和`unsigned int*`日志`NSLog`？

```
- (int) doSomethingWith:(unsigned int)Msg withWparam:(unsigned int*)wParam withParameter:(int *) lParam
{
    NSLog(@"MSg:%d wParam:%u lParam:%u",Msg,wParam,lParam);
//not working
    return 1;
} 
```

**警告：** `Format specifies type 'unsigned int' but the argument has type 'unsigned int *'`

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-18T10:29:57.773

用于. `%d`_ `int`而且参数是指针，所以`*`用来访问指向的值。

```
NSLog(@"MSg:%d wParam:%u lParam:%d",Msg,*wParam,*lParam); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-06-24T09:36:41.983

`%@`是为对象。`BOOL`不是一个对象。你应该使用`%d`.
基于数据类型`%@`更改如下

```
For Strings you use %@
For int  you use %i
For float you use %f
For double you use %lf 
```

# javascript - 为什么 parseFloat 在移动浏览器上返回一个整数？

> ID：14396888
> 
> 赞同：1
> 
> 时间：2013-01-18T10:27:03.093
> 
> 标签：javascript, jquery

```
parseFloat($(this).css('left') 
```

这在移动浏览器上返回一个整数，在桌面上返回一个浮点数。为什么？即使我将浏览器窗口设置为被测移动设备的确切尺寸，它也会发生。jQuery 版本是 1.8.3。我在桌面上使用 Chrome Canary，在 android / iPhone 设备上使用 Webkit。

如果问题不是 parseFloat() 为什么会`$(this).css('left')`在移动设备上返回整数而不是浮点数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:58:39.683

这不仅仅是移动浏览器的问题。这也一样`PC`。`Firefox`处理这些属性（顶部、左侧等）`with decimals in pixels`。但是在渲染 Firefox 时将其设置为整数值。

但是在 中`Chrome`，它们保留不带小数位的值（作为整数）并按原样呈现。

我不确定其他支持像素数据小数位的浏览器。但是没有注意到任何其他支持小数位的浏览器，如 Firefox。

# android - Android EditText onTouch 事件

> ID：14396889
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:27:04.233
> 
> 标签：android, android-edittext, touch-event

我有这样的布局：

家长：`RelativeLayout`与`onTouchListener`

孩子：`EditText`女巫比赛`RelativeLayout`

因此，`EditText`填充`RelativeLayout`. 我现在不想在`EditText`. 我的目标是触发`onTouchListener`布局。但它不会火。我尝试了不同的选项`EditText`：

1.  `setEditable(false)`和`setFocusable(false)` -> 好的，所以没有输入，但也没有`onTouch()`

2.  `setOnTouchListener(new OnTouchListener){return false});` -> 据我了解，这应该与选项 1 结合使用。但仍然不能`TouchEvent`在`RelativeLayout`.

`TextViews`工作没有问题，但我认为这是因为他们不使用`onTouch`oder `onClick`。我该怎么做才能使 EditViews（或拦截 touchEvents 的视图）不拦截 touchEvent？

为什么这一切：我想`RelativeLayout`在用户触摸它时移动它。只要我不将与父母匹配的孩子放入其中，这就可以正常工作。

也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-26T09:25:15.447

您应该覆盖 EditText 的 onTouchEvent 方法并返回 false。它对我有用！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T10:34:48.270

如果没有看到一些代码，很难给出一个很好的例子。你可以这样做：

```
 yourEditText.setEnabled(false); 
```

并在需要时启用它(setEnabled(true);)

或覆盖 OnTouchListener：

```
 yourEditText.setOnTouchListener(new OnTouchListener(){

                 @override
                 public boolean onTouch(){

                 }
       }); 
```

不要在 onTouch() 之外写任何东西。但这意味着永远不会发生任何事情，即使您需要它。

# image - OpenGL：在纹理中设置图像

> ID：14396896
> 
> 赞同：0
> 
> 时间：2013-01-18T10:27:31.703
> 
> 标签：image, opengl-es

这是我的代码：

```
-(void) mergeWithImage:(UIImage*) image{
    if(image==nil){
        return;
    }
glPushMatrix();
    glColor4f(256,
              256,
              256,
              1.0);
    glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
    glGenTextures(1, &stampTexture);
    glBindTexture(GL_TEXTURE_2D, stampTexture);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); 
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);

    GLuint imgwidth = CGImageGetWidth(image.CGImage);
    GLuint imgheight = CGImageGetHeight(image.CGImage);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    void *imageData = malloc( imgheight * imgwidth * 4 );
    CGContextRef context2 = CGBitmapContextCreate( imageData, imgwidth, imgheight, 8, 4 * imgwidth, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big );
    CGContextTranslateCTM (context2, 0, imgheight);
    CGContextScaleCTM (context2, 1.0, -1.0);
    CGColorSpaceRelease( colorSpace );
    CGContextClearRect( context2, CGRectMake( 0, 0, imgwidth, imgheight ) );
    CGContextTranslateCTM( context2, 0, imgheight - imgheight );
    CGContextDrawImage( context2, CGRectMake( 0, 0, imgwidth, imgheight ), image.CGImage );

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, imgwidth, imgheight, 0, GL_RGBA, GL_UNSIGNED_BYTE, imageData);

    CGContextRelease(context2);

    free(imageData);

    static const GLfloat texCoords[] = {
        0.0, 1.0,
        1.0, 1.0,
        0.0, 0.0,
        1.0, 0.0
    };

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glTexCoordPointer(2, GL_FLOAT, 0, texCoords);   

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    /*

     These array would need to be changed if the size of the paintview changes. You must make sure that all image imput is 64x64, 256x256, 512x512 or 1024x1024\.  In this we are using 512, but you can use 1024 as follows:

     use the numbers:
     {
     0.0, height, 0.0,
     1024, height, 0.0,
     0.0, height-1024, 0.0,
     1024, height-1024, 0.0
     }
     */

    static const GLfloat vertices[] = {
        0.0, 1024, 0.0,
        1024, 1024, 0.0,
        0.0, 0, 0.0,
        1024, 0, 0.0
    };

    static const GLfloat normals[] = {
        0.0, 0.0, 1024,
        0.0, 0.0, 1024,
        0.0, 0.0, 1024,
        0.0, 0.0, 1024
    };

glBindTexture(GL_TEXTURE_2D, stampTexture);
    glVertexPointer(3, GL_FLOAT, 0, vertices);
    glNormalPointer(GL_FLOAT, 0, normals);
    glTexCoordPointer(2, GL_FLOAT, 0, texCoords);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

glPopMatrix();

glDeleteTextures( 1, &stampTexture );
//set back the brush
glBindTexture(GL_TEXTURE_2D, brushTexture);

glColor4f(lastSetRed,
          lastSetGreen,
          lastSetBlue,
          1.0);

// Display the buffer
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES]; 
```

如果我的图像是 1024x1024，它可以正常工作，但是如果我有一个大小为 1024x768 的图像，那么在顶点和法线处分配的值是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T11:06:08.897

> 在顶点和法线处分配的值是什么？

这些无关紧要，因为它们不会（直接）干扰纹理坐标。顺便说一句，法线应该始终是单位长度。此外，如果您不想应用照明，则不需要法线。如果您确实要应用照明法线，则必须是单位长度。

无论图像的纵横比如何，常规纹理的纹理坐标始终在 [0;1] 范围内。应根据您使用的投影选择顶点位置。例如，您可以使用

```
glOrtho(0, texture_width, 0, textture_height, …) 
```

投影，然后您的顶点将是 {0, texture_width}×{0, texture_height} 。你的问题没有明确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:40:41.507

绑定纹理时添加这些行

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); //IMPORTANT FOR NON POWER OF 2 TEXTURES
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

# android - 如何在 android 应用程序中使用现有的 .so 文件

> ID：14396898
> 
> 赞同：7
> 
> 时间：2013-01-18T10:27:33.743
> 
> 标签：android, pdf, java-native-interface, pdftron, pdfnet

我正在寻找应该在 android 平台上将 .doc/.docx 转换为 .pdf 的库。

我得到了 PdFTron android sdk，因为他们提供了 libPDFNetC.so 文件。

对于转换，有一个名为 Convert 的类，其中有一个方法 toPDF()，在该方法中，他们在内部调用了本机方法 FileToPdf()。我尝试了该代码，但无法调用该本机方法并出现错误

我想知道是否存在现有的 .so 文件，并且如果您想调用 .so 文件中存在的本机方法，那么是否需要使用 JNI？我不太了解JNI。任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T08:41:53.980

您必须将由 Android NDK 生成的最终共享库链接到您说***您已经为 ARM 架构编译***`ndk-build`的 PDF 共享库。（**确保是这种情况，否则该库将无法在 Android 上运行！**）

 ***为此，例如，如果您具有以下目录结构：

```
jni
└── libs
└────── my_shared_lib.so
└── Android.mk
└── Application.mk 
```

您需要在**Android.mk**文件中包含以下内容：

```
LOCAL_PATH := $(call my-dir)

# define our prebuilt shared library as a module to the build system
include $(CLEAR_VARS)
LOCAL_MODULE := mysharedlib
LOCAL_SRC_FILES := libs/my_shared_lib.so
include $(PREBUILT_SHARED_LIBRARY)

# The final shared library that will be bundled inside the .apk
include $(CLEAR_VARS)
LOCAL_MODULE := mynativelib
LOCAL_LDLIBS := -landroid -llog
LOCAL_CPPFLAGS := -O0 -g3 -std=c++11 -Wall -Wextra 
LOCAL_SHARED_LIBRARIES := mysharedlib
LOCAL_C_INCLUDES := myheader1.h myheader2.h
LOCAL_SRC_FILES := src_file1.cpp src_file2.cpp
include $(BUILD_SHARED_LIBRARY) 
```

以及**Application.mk**文件的内容（用于使用 C++ 标准库，并为两个不同版本的 ARM 架构构建最终的共享库）：

```
APP_OPTIM := debug
APP_PLATFORM := android-14
APP_STL := gnustl_static
APP_ABI := armeabi armeabi-v7a 
```

**然后，在您从 Eclipse 中或使用ndk-build**脚本从命令行编译代码后，它将编译您最终的共享库并将其链接到您的预构建共享库（即您说您正在尝试使用的 PDF 共享库） .

**对于共享库，生成并部署到设备/模拟器的 apk 包含最终共享库以及您链接的所有预构建共享库**，与链接到未捆绑在 apk 内的静态库相反。

对于您的用例，在设备上解压缩 apk 后，您的 Android 应用程序的 lib 目录中应该有两个共享库。您可以通过从终端运行以下命令来检查这一点：

```
adb shell ls -l /data/data/com.company.myapp/lib 
```

将 com.company.myapp 替换为您的应用程序的包名称。

另外，不要忘记将以下内容放在 Java 类的静态上下文中：

```
class MyClass
{
      static
      {
            try
            {
                System.loadLibrary("mynativelib");
            }
            catch (UnsatisfiedLinkError ule)
            {
               Log.e(TAG, "WARNING: Could not load native library: " 
                      + ule.getMessage());
            }
      }

       // other code here...
} 
```

请注意在System.loadLibrary 方法调用中使用与最终共享库名称**相同**的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T10:40:07.543

您需要确保映射到本机接口的 .so 文件在您的系统上可用，并且可以被 Java 找到。

在您的 Java 代码中应该有类似`System.loadLibrary("<libraryname>")`或某处的调用。`System.load("/path/to/libs/lib<libraryname>.so")`这将指示 JVM 搜索具有给定名称的库并加载它。

*   `System.load("/path/to/libs/lib<libraryname>.so")`只会查找指定为参数的文件，然后加载它。
*   `System.loadLibrary("<libraryname.")`将在配置的库路径中查找名为 的库`lib<libraryname>.so`。库路径取自系统变量`java.library.path`。

还要确保您正在加载的库版本与 Java JNI 映射兼容！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:43:01.703

要在 ndk 上工作，有一个在 JNI 下编译的 .mk（make 文件）来获取 .so 文件。

.mk 文件是使用 c /c++ 片段以本机代码编写的。

现在使用 JNI 编译，有两种常见的方式：

1.**在使用旧的 ADT + SDK 版本时：** 您需要在 windows 配置上配置一个 linux 环境，以便在 shell 上运行 JNI 命令。这个环境可以通过网上的各种软件来实现，比如cygwin setup。

2.**如果您使用的ADT+SDK版本更新：** 那么ADT本身就有NDK插件可用。因此更容易在 ndk 和原生库上工作。 [有关 NDK 的更多详细信息，请访问此处](http://developer.android.com/tools/sdk/ndk/index.html)***

# ios - 带有小列表的登录页面

> ID：14396909
> 
> 赞同：0
> 
> 时间：2013-01-18T10:28:17.097
> 
> 标签：ios, objective-c, xcode4

我刚刚开始学习目标 C。想要创建一个小应用程序，其中应该有一个登录页面，并且只有当它的长度大于或等于 8 时才应该接受密码。一旦你提交了下一页应该是一个列表电影，并且在该页面中应该有一个搜索按钮以及可以使该列表可编辑的添加和删除按钮。我创建了登录页面，并直接将提交按钮与电影列表页面链接起来，因为我对如何验证密码长度和用户名的条件感到困惑。请帮助我这样做并为我的电影列表页面获取正确的编辑按钮。

谢谢

“视图控制器.m”

```
#import "ViewController.h"
#import "MovieList.h"
@interface ViewController ()
@end
@implementation ViewController
-(void)loadView{
self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view.backgroundColor = [UIColor cyanColor];
UILabel *name=[[UILabel alloc] init];
UILabel *pass=[[UILabel alloc] init];
UITextField *username = [[UITextField alloc]init];
UITextField *password = [[UITextField alloc]init];
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[name setBackgroundColor:[UIColor cyanColor]];
[name setText:@"UserID"];
[name setTextColor:[UIColor blackColor]];
[pass setBackgroundColor:[UIColor cyanColor]];
[pass setText:@"Password"];
[pass setTextColor:[UIColor blackColor]];
[button setTitle:@"SUBMIT" forState:UIControlStateNormal];
username.delegate = self;
password.delegate = self;
username.borderStyle = UITextBorderStyleRoundedRect;
password.borderStyle = UITextBorderStyleRoundedRect;
name.frame = CGRectMake(20, 15, 80, 20);
pass.frame = CGRectMake(15, 55, 80, 20);
username.frame = CGRectMake(100, 10, 200, 30);
password.frame = CGRectMake(100, 50, 200, 30);
button.frame = CGRectMake(130, 90, 80, 30);
[self.view addSubview:button];
[self.view addSubview:username];
[self.view addSubview:password];
[self.view addSubview:name];
[self.view addSubview:pass];
[button addTarget:self action:@selector(gotosecondpage)  forControlEvents:UIControlEventTouchUpInside];
}
-(void)gotosecondpage
{
Movielist *secondViewcont = [[Movielist alloc] init];
[self.navigationController pushViewController:secondViewcont animated:YES];
}
- (void)viewDidLoad
{
[super viewDidLoad];
}
- (void)viewDidUnload
{
[super viewDidUnload];
}
- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range   replacementString:(NSString *)string{
return YES;
}
- (BOOL)textFieldShouldClear:(UITextField *)textField{
return YES;
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField{
[textField resignFirstResponder];
return YES;
}
@end 
```

“电影列表.m”

```
#import "MovieList.h"
@interface Movielist()
@end
@implementation Movielist
-(void)loadView{
self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
self.view.backgroundColor = [UIColor cyanColor];
}
-(id)init{
[self.navigationItem setTitle:@"Movie List"];
return self;
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    [self.view setBackgroundColor:[UIColor cyanColor]];
}
return self;
}
- (void)viewDidLoad
{
[super viewDidLoad];
CGRect frame = self.view.frame;
UITableView *tableView = [[UITableView alloc] initWithFrame:frame   style:UITableViewStylePlain];

tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
tableView.backgroundColor = [UIColor cyanColor];
tableView.delegate = self;
tableView.dataSource = self;
[self.view addSubview:tableView];
[tableView setScrollEnabled:YES];
[tableView setUserInteractionEnabled:YES];
[tableView setRowHeight:35];
}
- (void)viewDidUnload
{
[super viewDidUnload];
}
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 20;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cellIDent"];
char ch = 'a' + indexPath.row;
cell.textLabel.text = [NSString stringWithFormat:@"%c" , ch];
    return cell;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:05:24.220

检查长度非常直。重要的是如何从登录页面导航。目前我看到 gotosecondpage 功能负责。您可能可以编写一个 validateParams 方法，如果满足所有条件，您可以在该方法下调用 gotosecondpage。

此代码将告诉您密码长度：

```
-(void) validateParams 
{
    NSString * password = [password text];
    if ([password length] < 8) //and maybe other conditions, too
    {
       [self gotosecondpage];
    }    
    else
    {
       //report error - maybe show some UILabel near username / password fields to show which one of them went wrong
    }
} 
```

请注意，您还可以做很多其他事情——比如告诉用户哪个字段需要更正，还有很多更好的方法。由于您的要求非常基本，因此上述内容现在应该有所帮助。

# javascript - 在 HTML5 中通过 JavaScript 自动调整 P 或 Div 标签中的字体大小，无需外部插件

> ID：14396918
> 
> 赞同：0
> 
> 时间：2013-01-18T10:28:56.877
> 
> 标签：javascript, css, html

正如问题所述，我希望自动调整 p 标签或 DIV 标签内的文本，

例如，我将文本字体大小设置为 30px，
那么如果 div/p 足够大甚至很大，则文本将始终在其 30px 中，
另一方面，如果 div/p 变小（不管是因为宽度/height)，
文本字体大小也会缩小，因此它可以在小 div/p 内 100% 显示自己

我一直在寻找解决方案，但其中许多都需要外部 jQuery，
有没有简单的方法或没有外部插件的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:37:01.540

尝试使用媒体查询。然后，当 P 或 DIV 在不同的高度和宽度范围内时，您可以设置不同的字体大小。

这可能会有所帮助： http: [//blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)

# jsf - JSF初学者，如何获得这种布局？

> ID：14396921
> 
> 赞同：-4
> 
> 时间：2013-01-18T10:29:16.020
> 
> 标签：jsf

我是 jsf 和 richfaces 的新手。目前我正在开发我的 firstr jsf 应用程序（计费应用程序），我需要为插入订单和账单创建页面，页面应该具有以下布局

[我的布局](http://imageshack.us/photo/my-images/856/immagineifl.png/)

如何得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:45:28.140

您仍然必须使用 CSS 来实现这种布局，它（几乎）与 JSF 无关。[在这里](http://www.maxdesign.com.au/articles/css-layouts/)您可以找到一些不错的示例和教程。

对于 JSF 部分，您将拥有模板页面，您将在其中定义要在每个页面上保持相同的部分（如菜单和页脚）以及要在每个页面上替换的部分（通常是内容）。例如，您可以按照Mkyong 的[本教程进行操作。](http://www.mkyong.com/jsf2/jsf-2-templating-with-facelets-example/)

# r - 使用带有 geom_raster 的 annotation_raster 的彩色栅格的位置不精确

> ID：14396923
> 
> 赞同：0
> 
> 时间：2013-01-18T10:29:19.143
> 
> 标签：r, ggplot2

使用 geom_raster 生成背景后，许多使用 annotation_raster 创建的评估者被附加在背景上。但是，新栅格的位置并不总是正确的——尽管 annotation_raster 的位置代码是正确的，但某些栅格并未正确位于其理想或目标位置。

经过一些测试，调整 PlotMargin 和栅格在背景网格中的位置会使栅格倾斜。

我希望使光栅的位置正确。

以下是光栅倾斜的 3 个示例：
位于背景中间网格的 光栅

```
PlotMargin (0,0,0.2,0): 
```

[http://i.imgur.com/aS7OC.png](http://i.imgur.com/aS7OC.png)

光栅位于背景的上下网格中

```
PlotMargin (0,0,0.2,0): 
```

[http://i.imgur.com/FJdOw.png](http://i.imgur.com/FJdOw.png)
栅格位于背景的上下网格中

```
PlotMargin (0.2,0,0.2,0): 
http://i.imgur.com/uFX0G.png 
```

.csv 数据：

```
https://www.dropbox.com/s/ik3q8ppo5qgahx1/CubicLateralRootLengthDensityPlantLayerOrder_4Layer.csv 
```

示例代码：

```
library(ggplot2)
library(grid)
require("gridExtra")
require("reshape")

setwd("F:\\Code\\R\\viRoot_R\\RLD")

###### png("RLD_Lateral_10cm_LayerAndOrder_rasterUpAndBottom_200.png",height=1300,width=1840, res = 200)
png("RLD_Lateral_10cm_LayerAndOrder_rasterUpAndBottom_100.png",height=650,width=920, res = 100)

dataLateralAll = read.csv("CubicLateralRootLengthDensityPlantLayerOrder_4Layer.csv", header = TRUE) 

dataLateralAll$LinkLengthSumCM = ifelse(dataLateralAll$Layer < 4 | dataLateralAll$Layer > 8 , 0, dataLateralAll$LinkLengthSumCM)
# write.csv(dataLateralAll, "dataLateralAll.csv", row.names=FALSE)

subDataLayerAll = data.frame(dataLateralAll[c('YCenter', 'ZCenter','XCenter','Layer','LinkLengthSumCM')])
mSubDataLayerAll = melt(subDataLayerAll, measure.var = 'LinkLengthSumCM')
castMSubDataLayerAll = cast(mSubDataLayerAll, YCenter + ZCenter + XCenter ~ variable, sum )

df <- expand.grid(x = seq(-40,40,10), y =seq(-30,30,10) )
df <- data.frame(df, YCenter = castMSubDataLayerAll$YCenter)
#df$YCenter <- factor(df$YCenter, levels = seq(-2.5,-37.5,-5))

df2 <- df

df2$Length = castMSubDataLayerAll$LinkLengthSumCM / 1000
# write.csv(df2, "dataNewSum.csv", row.names=FALSE)

df2$YCenter <- as.character(df2$YCenter)
df2$YCenter[df2$YCenter == "-5"] <- "0 - 10 cm"
df2$YCenter[df2$YCenter == "-15"] <- "10 - 20 cm"
df2$YCenter[df2$YCenter == "-25"] <- "20 - 30 cm"
df2$YCenter[df2$YCenter == "-35"] <- "30 - 40 cm"

df2$YCenter <- as.factor(df2$YCenter)
# To change plot order of facet wrap,
# change the order of varible levels with factor()
df2$YCenter <- factor(df2$YCenter, levels = c("0 - 10 cm","10 - 20 cm","20 - 30 cm","30 - 40 cm"))

# temp = annotation_raster(colorOrder, 5,15, 11.66, 15) + annotation_raster(colorType, 5,15, 5, 8.33)

p1 <- ggplot(subset(df2, YCenter == "0 - 10 cm"), aes(x, y)) + geom_raster(aes(fill = Length)) + facet_wrap(~YCenter) +
  coord_fixed(ratio = 1) + xlab(NULL) + ylab(NULL) + 
  ylim(-35,35) + xlim(-45, 45) + 
  scale_fill_continuous(name = expression( paste ("RLD \n(cm ", cm^-3, ")"  )), limits=c(0.0001, 13),trans = "log", low = "white", high = "blue", breaks=c(0.0001,0.001,0.01,0.1,1,12),labels=c("0.0001","0.001","0.01","0.1","1","12"), na.value = "white") + 
  scale_x_continuous(breaks = seq(-45, 45, by = 10), expand=c(0.03, 0.03)) + scale_y_continuous(breaks = seq(-35, 35, by = 10), expand=c(0.03, 0.03)) +
  theme(plot.margin = unit(c(0,0,0.2,0.2), "lines") ) + theme(panel.margin = unit(0, "lines") ) + theme(legend.margin = unit(0, "cm")) + 
  ######   theme(plot.margin = unit(c(0,0,0.2,0), "lines") ) + theme(panel.margin = unit(0, "lines") ) + theme(legend.margin = unit(0, "cm")) + 
  theme(axis.title.x=element_text(size=15), axis.title.y=element_text(size=15), axis.text.x=element_text(size=13, colour = "white"), axis.text.y=element_text(size=13) ) +
  theme(legend.title = element_text(size = 13), legend.text = element_text(size=11),  legend.key.height=unit(1.2, "cm")  ) +
  theme(strip.text.x = element_text(size = 13), strip.background=element_rect(fill="white"))+
  theme(panel.background=element_rect(colour="white") )
#   theme(panel.grid.minor = element_line(colour = NULL, linetype = NULL, size = NULL), panel.grid.major = element_line(colour = NULL, linetype = NULL, size = NULL)) + 
#   theme(panel.grid.minor = element_blank(), panel.grid.major = element_blank(), panel.grid.minor.x = element_blank(), panel.grid.minor.y = element_blank(),panel.grid.major.x = element_blank(), panel.grid.major.y = element_blank()) + 
#   
# + theme(legend.position="none")

p2 <- ggplot(subset(df2, YCenter == "10 - 20 cm"), aes(x, y)) + geom_raster(aes(fill = Length)) + facet_wrap(~YCenter) +
  coord_fixed(ratio = 1) + xlab(NULL) + ylab(NULL) + 
  ylim(-45,45) + xlim(-45, 45) + 
  scale_fill_continuous(name = expression( paste ("RLD \n(cm ", cm^-3, ")"  )), limits=c(0.0001, 13),trans = "log", low = "white", high = "blue", breaks=c(0.0001,0.001,0.01,0.1,1,12),labels=c("0.0001","0.001","0.01","0.1","1","12"), na.value = "white") + 
  scale_x_continuous(breaks = seq(-45, 45, by = 10), expand=c(0.03, 0.03)) + scale_y_continuous(breaks = seq(-35, 35, by = 10), expand=c(0.03, 0.03)) +
  theme(plot.margin = unit(c(0,0.2,0.2,0), "lines") ) + theme(panel.margin = unit(0, "lines")) + theme(legend.margin = unit(0, "cm")) + 
  ######   theme(plot.margin = unit(c(0,0,0.2,0), "lines") ) + theme(panel.margin = unit(0, "lines")) + theme(legend.margin = unit(0, "cm")) + 
  theme(axis.title.x=element_text(size=15), axis.title.y=element_text(size=15), axis.text.x=element_text(size=13, colour = "white"), axis.text.y=element_text(size=13, colour = "white"), legend.title = element_text(size = 13), legend.text = element_text(size=11),  legend.key.height=unit(1, "cm")  ) +
  theme(strip.text.x = element_text(size = 13), strip.background=element_rect(fill="white")) 
#   annotate("point", x = -15, y = 0, size = 7, colour = "deeppink")+ annotate("point", x = 15, y = 0, size = 7, colour = "deeppink")
# + theme(legend.position="none")

p3 <- ggplot(subset(df2, YCenter == "20 - 30 cm"), aes(x, y)) + geom_raster(aes(fill = Length)) + facet_wrap(~YCenter) +
  coord_fixed(ratio = 1) + xlab(NULL) + ylab(NULL) + 
  ylim(-45,45) + xlim(-45, 45) + 
  scale_fill_continuous(name = expression( paste ("RLD \n(cm ", cm^-3, ")"  )), limits=c(0.0001, 13),trans = "log", low = "white", high = "blue", breaks=c(0.0001,0.001,0.01,0.1,1,12),labels=c("0.0001","0.001","0.01","0.1","1","12"), na.value = "white") + 
  scale_x_continuous(breaks = seq(-45, 45, by = 10), expand=c(0.03, 0.03)) + scale_y_continuous(breaks = seq(-35, 35, by = 10), expand=c(0.03, 0.03)) +
  theme(plot.margin = unit(c(0,0,0.2,0.2), "lines") ) + theme(panel.margin = unit(0, "lines")) + theme(legend.margin = unit(0, "cm")) + 
  ######   theme(plot.margin = unit(c(0,0,0.2,0), "lines") ) + theme(panel.margin = unit(0, "lines")) + theme(legend.margin = unit(0, "cm")) + 
  theme(axis.title.x=element_text(size=15), axis.title.y=element_text(size=15), axis.text.x=element_text(size=13), axis.text.y=element_text(size=13), legend.title = element_text(size = 13), legend.text = element_text(size=11),  legend.key.height=unit(1, "cm")  ) +
  theme(strip.text.x = element_text(size = 13), strip.background=element_rect(fill="white"))+ 
  annotate("point", x = -15, y = 0, size = 2, colour = "deeppink")+ annotate("point", x = 15, y = 0, size = 2, colour = "deeppink")
# + theme(legend.position="none")

p4 <- ggplot(subset(df2, YCenter == "30 - 40 cm"), aes(x, y)) + geom_raster(aes(fill = Length)) + facet_wrap(~YCenter) +
  coord_fixed(ratio = 1) + xlab(NULL) + ylab(NULL) + 
  ylim(-45,45) + xlim(-45, 45) + 
  scale_fill_continuous(name = expression( paste ("RLD \n(cm ", cm^-3, ")"  )), limits=c(0.0001, 13),trans = "log", low = "white", high = "blue", breaks=c(0.0001,0.001,0.01,0.1,1,12),labels=c("0.0001","0.001","0.01","0.1","1","12"), na.value = "white") + 
  scale_x_continuous(breaks = seq(-45, 45, by = 10), expand=c(0.03, 0.03)) + scale_y_continuous(breaks = seq(-35, 35, by = 10), expand=c(0.03, 0.03)) +
  theme(plot.margin = unit(c(0,0.2,0.2,0), "lines") ) + theme(panel.margin = unit(0, "lines")) + theme(legend.margin = unit(0, "cm")) + 
  ######   theme(plot.margin = unit(c(0,0,0.2,0), "lines") ) + theme(panel.margin = unit(0, "lines")) + theme(legend.margin = unit(0, "cm")) + 
  theme(axis.title.x=element_text(size=15), axis.title.y=element_text(size=15), axis.text.x=element_text(size=13), axis.text.y=element_text(size=13, colour = "white"), legend.title = element_text(size = 13), legend.text = element_text(size=11),  legend.key.height=unit(1, "cm")  ) +
  theme(strip.text.x = element_text(size = 13, colour = "black"), strip.background=element_rect(fill="white") ) + 
  annotate("point", x = -15, y = 0, size = 2, colour = "deeppink")+ annotate("point", x = 15, y = 0, size = 2, colour = "deeppink")

dataLateralLayerOrder = read.csv("CubicLateralRootLengthDensityPlantLayerOrder_4Layer.csv", header = TRUE) 
colnames(dataLateralLayerOrder)[9] = "Len"

# Layer;
subDataLayer = data.frame(dataLateralLayerOrder[c('YCenter', 'ZCenter','XCenter','Layer','Len')])
mSubDataLayer = melt(subDataLayer, measure.var = 'Len')
castMSubDataLayer = cast(mSubDataLayer, YCenter + ZCenter + XCenter ~ Layer + variable, sum )
# write.csv(castMSubDataLayer, "dataLayer.csv", row.names=FALSE)

# Order;
# subDataLayerOrder = dataLateralLayerOrder[!(dataLateralLayerOrder$Layer == 1 & dataLateralLayerOrder$Layer == 100 ), ]

# subDataLayerOrder = subset(dataLateralLayerOrder, Layer >=4 & Layer <100 & Layer ==0 )
subDataLayerOrder = subset(dataLateralLayerOrder, Layer == 0 | Layer == 4 | Layer == 5 | Layer == 6  | Layer == 7  | Layer == 8 )
subDataOrder = data.frame(subDataLayerOrder[c('YCenter', 'ZCenter','XCenter','OrderRank','Len')])
mSubDataOrder = melt(subDataOrder, measure.var = 'Len')
castMSubDataOrder = cast(mSubDataOrder, YCenter + ZCenter + XCenter ~ OrderRank + variable, sum )
# write.csv(castMSubDataOrder, "dataOrder.csv", row.names=FALSE)

# write.csv(dataLateralLayerOrder, "dataLateralLayerOrder.csv", row.names=FALSE)

sumRowOrder = apply(castMSubDataOrder[5: length(castMSubDataOrder)], 1, sum)
sweptOrder = round(sweep(castMSubDataOrder[5: length(castMSubDataOrder)], 1, sumRowOrder, "/"), 3) * 1000
sweptXYZOrder = data.frame(castMSubDataOrder[1:3], sweptOrder)
sweptXYZOrderNoNaN = na.omit(sweptXYZOrder)
sweptXYZOrderNoNaN5 = subset(sweptXYZOrderNoNaN, YCenter == -5)
sweptXYZOrderNoNaN15 = subset(sweptXYZOrderNoNaN, YCenter == -15)

### the background of the band is white;
# for(i in 1:nrow(sweptXYZOrderNoNaN5)) {
#   row <- sweptXYZOrderNoNaN5[i,]
#   xMinBackground = row[[3]] - 5
#   xMaxBackground = row[[3]] + 5
#   yMinBackground = row[[2]] - 1.5
#   yMaxBackground = row[[2]] + 1.5
#   colorBackground = matrix(c(rep("white",10)), nrow = 1)
#   p1 = p1 + annotation_raster(colorBackground, xMinBackground,xMaxBackground, yMinBackground, yMaxBackground)
# }
# 
# for(i in 1:nrow(sweptXYZOrderNoNaN15)) {
#   row <- sweptXYZOrderNoNaN15[i,]
#   xMinBackground = row[[3]] - 5.5
#   xMaxBackground = row[[3]] + 5.5
#   yMinBackground = row[[2]] - 1.5
#   yMaxBackground = row[[2]] + 1.5
#   colorBackground = matrix(c(rep("white",10)), nrow = 1)
#   p2 = p2 + annotation_raster(colorBackground, xMinBackground,xMaxBackground, yMinBackground, yMaxBackground)
# }

##########################################################
for(i in 1:nrow(sweptXYZOrderNoNaN5)) {
  row <- sweptXYZOrderNoNaN5[i,]
  xMin = row[[3]] - 5
  xMax = row[[3]] + 5
  yMin = row[[2]] - 5 
  yMax = row[[2]] - 3.5
#   colorOrder = matrix(c(rep("#FF0000FF",row[[4]]), rep("#FF9900FF",row[[5]]), rep("papayawhip",row[[6]]),rep("hotpink",row[[7]])), nrow = 1)
  colorOrder = matrix(c(rep("#FF0000FF",row[[4]]), rep("#FF9900FF",row[[5]]), rep("black",row[[6]]),rep("chartreuse",row[[7]])), nrow = 1)
  p1 = p1 + annotation_raster(colorOrder, xMin,xMax, yMin, yMax)
}
for(i in 1:nrow(sweptXYZOrderNoNaN15)) {
  row <- sweptXYZOrderNoNaN15[i,]
  xMin = row[[3]] - 5
  xMax = row[[3]] + 5
  yMin = row[[2]] - 5 
  yMax = row[[2]] - 3.5
#   colorOrder = matrix(c(rep("#FF0000FF",row[[4]]), rep("#FF9900FF",row[[5]]), rep("papayawhip",row[[6]]),rep("hotpink",row[[7]])), nrow = 1)
  colorOrder = matrix(c(rep("#FF0000FF",row[[4]]), rep("#FF9900FF",row[[5]]), rep("black",row[[6]]),rep("chartreuse",row[[7]])), nrow = 1)
  p2 = p2 + annotation_raster(colorOrder, xMin,xMax, yMin, yMax)
}

sumRowLayer = apply(castMSubDataLayer[8: 12], 1, sum)
sweptLayer = round(sweep(castMSubDataLayer[8: 12], 1, sumRowLayer, "/"), 3) * 1000
sweptXYZLayer = data.frame(castMSubDataLayer[1:3], sweptLayer)
sweptXYZLayerNoNaN = na.omit(sweptXYZLayer)
sweptXYZLayerNoNaN5 = subset(sweptXYZLayerNoNaN, YCenter == -5)
sweptXYZLayerNoNaN15 = subset(sweptXYZLayerNoNaN, YCenter == -15)

for(i in 1:nrow(sweptXYZLayerNoNaN5)) {
  row <- sweptXYZLayerNoNaN5[i,]
  xMin = row[[3]] - 5
  xMax = row[[3]] + 5
  yMin = row[[2]] + 3.5
  yMax = row[[2]] + 5
  #cadetblue1 cyan turquoise1 lightcyan

#   colorType = matrix(c(rep("grey0",row[[4]]), rep("paleturquoise",row[[5]]), rep("darkgreen",row[[6]]),rep("green2",row[[7]]), rep("yellow",row[[8]])), nrow = 1)
  colorType = matrix(c(rep("blue",row[[4]]), rep("turquoise1",row[[5]]), rep("darkgreen",row[[6]]),rep("green2",row[[7]]), rep("darkmagenta",row[[8]])), nrow = 1)
  p1 = p1 + annotation_raster(colorType, xMin,xMax, yMin, yMax)
}

for(i in 1:nrow(sweptXYZLayerNoNaN15)) {
  row <- sweptXYZLayerNoNaN15[i,]
  xMin = row[[3]] - 5
  xMax = row[[3]] + 5
  yMin = row[[2]] + 3.5
  yMax = row[[2]] + 5
#   colorType = matrix(c(rep("grey0",row[[4]]), rep("paleturquoise",row[[5]]), rep("darkgreen",row[[6]]),rep("green2",row[[7]]), rep("yellow",row[[8]])), nrow = 1)
  colorType = matrix(c(rep("blue",row[[4]]), rep("turquoise1",row[[5]]), rep("darkgreen",row[[6]]),rep("green2",row[[7]]), rep("darkmagenta",row[[8]])), nrow = 1)
  p2 = p2 + annotation_raster(colorType, xMin,xMax, yMin, yMax)
}

p1 + annotate("point", x = -15, y = 0, size = 2, colour = "deeppink") + annotate("point", x = 15, y = 0, size = 2, colour = "deeppink")
p2 + annotate("point", x = -15, y = 0, size = 2, colour = "deeppink") + annotate("point", x = 15, y = 0, size = 2, colour = "deeppink")

tmp <- ggplot_gtable(ggplot_build(p1)) 
leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box") 
legend <- tmp$grobs[[leg]] 

#grid.arrange(arrangeGrob(p1, p2, p3, p4, nrow = 2))

grid.arrange(arrangeGrob(p1 + theme(legend.position="none"), p2 + theme(legend.position="none"), p3 + theme(legend.position="none"), p4 + theme(legend.position="none"), 
                         left = textGrob("Perpendicular to the row (cm)", x = unit(0.5, "npc"), y = unit(0.5, "npc"), rot = 90, gp=gpar(font=2)), sub = textGrob("Parallel to the row (cm)", x = unit(0.5, "npc"), y = unit(0.7, "npc"), gp=gpar(font=2))), 
             Legend = legend,  
             widths=c(7/8, 1/8), 
             nrow=1
)

dev.off() 
```

# java - 如何用一个字符串匹配多个规则？

> ID：14396927
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:29:30.947
> 
> 标签：java, regex

**条件：**

1.  有很多规则，可能有数百条，例如：
    `{aab*, aabc*, aabcdd*, dtctddds*, *ddt*, *cddt*, *bcddt*, *t, *ttt, *ccddttt}`

2.  每次我会得到一个字符串，那么我应该找到最长的匹配规则。

**例子：**

示例 1.string 是`aabcddttt`匹配的规则应该是：`aabcdd*`

示例 2\. string 是`accddttt`匹配的规则应该是`*ccddttt`

**问题：** 我不想用长数组中的规则来一一匹配字符串，这是低效的方法。也许我应该使用字符串作为正则表达式来匹配一百条规则。但是我找不到一个优雅的方式来解决这个问题。

1.  我可以使用一些正则表达式来获得结果吗？
2.  哪种匹配方式最好/最快？

首选 Java、纯 C 或 shell，请不要使用 C++ STL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:33:46.887

[最长公共子串](http://en.wikipedia.org/wiki/Longest_common_substring_problem)

也许这个算法就是你要找的=）。

* * *

为什么不简单地做呢？

```
String[] rules = {"^aab", "bcd", "aabcdd$", "dtctddds$", "^ddt$", "^cddt$", "^bcddt$", "^t", "^ttt", "^ccddttt"};
        String testCase = "aabcddttt";

        for (int i = 0; i < rules.length; i++) {
            Pattern p = Pattern.compile(rules[i]);
            Matcher m = p.matcher(testCase);
            if (m.find()) {
                System.out.println("String: " + testCase + " has matched the pattern " + rules[i]);
            }
        } 
```

所以基本上在这种情况下，rules[0]，它是 ^aab 找到的，因为胡萝卜 (^) 意味着字符串必须以 ^aab 开头。另一方面，bba$ 表示字符串必须以 bba 结尾。并且找到了规则[1](http://en.wikipedia.org/wiki/Longest_common_substring_problem)，因为这意味着该规则可以出现在 testCase 的任何位置（例如 bcd）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:32:12.110

您可以尝试一次将它们全部匹配，并在每个子规则周围加上括号。您可以使用该组来确定哪个匹配。

```
public static void main(String... ignored) {
    for (String test : "aabaa,wwwaabcdddd,abcddtxyz".split(",")) {
        System.out.println(test + " matches " + longestMatch(test, "aab*", "aabc*", "aabcdd*", "dtctddds*", "ddt"));
    }
}

public static String longestMatch(String text, String... regex) {
    String[] sortedRegex = regex.clone();
    Arrays.sort(sortedRegex, new Comparator<String>() {
        @Override
        public int compare(String o1, String o2) {
            return o2.length() - o1.length();
        }
    });
    StringBuilder sb = new StringBuilder();
    String sep = "(";
    for (String s : sortedRegex) {
        sb.append(sep).append('(').append(s).append(')');
        sep = "|";
    }
    sb.append(")");
    Matcher matcher = Pattern.compile(sb.toString()).matcher(text);
    if (matcher.find()) {
        for (int i = 2; i <= matcher.groupCount(); i++) {
            String group = matcher.group(i);
            if (group != null)
                return sortedRegex[i - 2];
        }
    }
    return "";
} 
```

印刷

```
aabaa matches aabc*
wwwaabcdddd matches aabcdd*
abcddtxyz matches ddt 
```

# java - 如何在java中输入excel

> ID：14396932
> 
> 赞同：3
> 
> 时间：2013-01-18T10:29:39.737
> 
> 标签：java, excel

我们如何使用java代码在excel表格中输入数据，excel表格格式如下图所示。

只要我在上面的列中输入，总天数和小时数就会在工作表中自动计算，请告诉我如何开始。这些输入也与另一个 sheet(sheet2) 相关联。所以请告诉我方法，这样它也很灵活，我可以修改 sheet2 中的数据。

！[[需要自动化的Excel工作表][2]](http://i.stack.imgur.com/rMFFO.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:30:51.070

使用第三方库如[apache poi](http://poi.apache.org/)来读取 Java 中的 Excel 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:33:02.723

您可能想尝试在 sourceforge 上找到的 jexcelapi：[JExcelApi](http://sourceforge.net/projects/jexcelapi/)

非常易于使用从 java 读取和写入 excel 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:42:20.033

您使用 Java Excel API。这是一篇出色的文章，演示[了如何使用 Java 读取和写入 Excel](http://www.vogella.com/articles/JavaExcel/article.html)。

这是 Java Excel API[下载](http://jexcelapi.sourceforge.net/)。

# php - 由于 m:n 关系，带有构造函数的无限循环

> ID：14396935
> 
> 赞同：1
> 
> 时间：2013-01-18T10:29:47.640
> 
> 标签：php, orm, persistent-object-store

我有一个包含作者和书籍的数据库，m:n authors (a_id, ...) authors_books (a_id, b_id) books (b_id, ...)

我的问题是，我不能使用构造函数将作者/书籍数据获取到数组中，因为我会得到一个无限循环。

```
class Book
{

    public $name;
    public $authors;

    public function __construct($name)
    {
        $this->name=$name;
        $this->authors=$this->Get_Authors();
    }

    public function Get_Authors()
    {
        $authors=array();
        /* ... (database) */
        $authors[]=new Author($name_from_db);
        return $authors;
    }

}

class Author
{

    public $name;
    public $books;

    public function __construct($name)
    {
        $this->name=$name;
        $this->books=$this->Get_Books();
    }

    public function Get_Books()
    {
        $books=array();
        /* ... (database) */
        $books[]=new Book($name_from_db);
        return $books;
    }

} 
```

例子：

```
new Book('book_1'); 
```

-> 将获取 'author_1' 并使用 Author 类的 __constructor

```
new Author('author_1'); 
```

-> 将获取 'book_1 并使用 Book 类的 __constructor ...

解决 PHP 类中 am:n 关系的“最佳实践”是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:36:31.677

您可以在此处使用延迟加载：

```
class Book {

    public $name;
    private $_authors = null;

    public function __constructor($name) {
        $this->name = $name;
    }

    public function getAuthors() {
        if ($this->_authors === null) {
            $this->_authors = array();
            /* database */
            $this->_authors[] = new Author(/**/);
        }
        return $this->_authors;
    }

    // You can add some magic getter if you want to access authors as property
    public function __get($key) {
        if ($key === 'authors') {
            return $this->getAuthors();
        }
        throw new Exception('Unknown property '.$key);
    }
}

class Authors {

    public $name;
    private $_books = null;

    public function __constructor($name) {
        $this->name = $name;
    }

    public function getBooks() {
        if ($this->_books === null) {
            $this->_books = array();
            /* database */
            $this->_books[] = new Book(/**/);
        }
        return $this->_books;
    }

    // You can add some magic getter if you want to access books as property
    public function __get($key) {
        if ($key === 'books') {
            return $this->getBooks();
        }
        throw new Exception('Unknown property '.$key);
    }
} 
```

这将导致作者/书籍仅在您需要时才会加载并且不会无限循环，但您可以在此处遇到另一个问题：

```
$author = new Author("Jon Doe");
$book = $author->books[0];
// assuming that book has one author
// $book->authors[0] will not be same object as $author 
```

解决方案是使用第三个对象来加载书籍和作者，它将存储已加载的对象并将它们注入适当的位置

```
class Library {

    private $_books = array();
    private $_authors = array();

    public function getBooksForAuthor($authorId) {
        /* db query... */
        $books = array();
        while ($row = $stmt->fetch()) {
            if (isset($this->_books[$row['id']]) {
                $books[] = $this->_books[$row['id']];
            } else {
                $book = new Book($row);
                $this->_books[$row['id']] = $book;
                $books[] = $book;
            }
        }
        return $books;
    }

    /* and similar authorsForBook() method */
}

class Author {

    private $_data;
    private $_library;
    private $_books = null;

    public function __constructor($data, $library) {
        $this->_data = $data;
        $this->_library = $library;
    }

    public function getBooks() {
        if ($this->_books === null) {
            $this->_books = $this->_library->getBooksForAuthor($this->_data['id']);
        }
        return $this->_books;
    }

    public function __get($key) {
        if ($key === 'books') {
            return $this->getBooks();
        }
        if (isset($this->_data[$key]) {
            return $this->_data[$key];
        }
        throw new Exception('Unknown property '.$key);
    }
}

/* and similar for book */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:35:35.743

为什么要加载所有相关对象？使用“延迟加载”——在需要之前不要加载所有相关对象。在您的情况下，这意味着通过他们的 getter 方法获取相关对象。如果您需要通过属性获取它们，您可以通过魔术方法实现 getter。

# python - 没有换行的 Python 输入

> ID：14396937
> 
> 赞同：0
> 
> 时间：2013-01-18T10:29:55.040
> 
> 标签：python, python-3.x

> **可能重复：**
> [python中的raw_input而不按回车键](https://stackoverflow.com/questions/3523174/raw-input-in-python-without-pressing-enter)

如何在不按 ENTER 的情况下捕获 python 输入。

例如，如何使用户按数字和程序在不按 ENTER 的情况下打印它的循环

# javascript - 如何在主干中维护多个集合和视图实例？

> ID：14396940
> 
> 赞同：0
> 
> 时间：2013-01-18T10:29:57.930
> 
> 标签：javascript, jquery, html, backbone.js

**我的应用程序的简要结构**

-->主视图

-->模型

-->集合

-->子视图

主视图创建许多带有集合实例的子视图。

**主视图里面**

```
newTable:function(){

var collection=new Collection;
var subview=new SubView({collection:collection});

} 
```

1.  我需要从服务器获取发送请求。
2.  我需要根据响应更新集合。

对于那些要求

1.  我需要维护来自哪个集合的哪个请求
2.  哪个集合必须在响应时更新。

如何维护请求和响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:58:00.157

Backbone.sync 的重点是为您处理。当您有一个集合时，您可以像这样对其执行提取：

```
 collection.fetch() 
```

然后该集合将通过 Backbone.sync 向其 url 发出 ajax 请求，并在它返回时更新自身。然后它将触发“重置”事件，让您知道它已被更新。将子视图绑定到它们各自集合上的“重置”事件，如下所示：

```
SubView = Backbone.View.extend({

    initialize: function(){
        this.collection = this.options.collection;
        this.collection.bind("reset", this.render, this);
    }
}) 
```

这个特定的子视图应该像这样实例化`new SubView({collection: yourCollection})`。然后，当您执行`yourCollection.fetch()`. 您当然可以绑定到您喜欢的任何功能！

# c# - 使用wget下载wordpress文章

> ID：14396945
> 
> 赞同：-3
> 
> 时间：2013-01-18T10:30:15.647
> 
> 标签：c#, wget

我`wget`用来自动从网上下载一些网站、博客文章。

我将一些带有链接的列表（动态和可变的）传递给`wget`它，它应该从传递的链接下载内容。

我看到了很多例子，用户成功下载了带有`wget`.

但是所有这些方法都不适用于 Wordpress 文章或任何其他网站，其中 js、css 文件托管在不同的域中。

例如，如果博客 url 包含 wordpress.com，但 css、js 文件托管在 wp.com 的某个位置。

另外，如果我有，`http://www.example.com/2013/01/04/article-title/`我只需要下载那篇文章而不需要下载其他文章，但是 `--no-parent` wget 属性根本不下载 JS 和 CSS，因为这些文件的级别高于文章路径。

也许有人知道任何替代方案，因为`wget`它适合单个文件下载，而不是 html？

我试过：

```
wget -Ep --convert-links http://www.example.com/2013/01/04/article-title/ 
```

这仅返回 html，没有 js、css。

**更新：** 问题：是否有任何工具，.net 框架，可以下载网站内容并具有与 wget 相同的功能。

**更新 2：** 好的，我发现 wget 下载更好（更干净，需要更少的空间）。感谢您链接到 superuser.com，我在那里找到了 wget 的解决方案：

```
wget -H -N -k -p --no-check-certificate -U "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:6.0a2) Gecko/20110613 Firefox/6.0a2" someurl --content-disposition 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T10:33:50.710

要创建站点镜像，请检查[httrack](http://www.httrack.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T10:38:04.820

对于在线阅读，我推荐[Pocket](http://getpocket.com/)。

两者都有 chrome 的扩展和 firefox 的插件。

对于存储文章的副本，使用[Evernote](http://evernote.com/)和[Clearly](http://evernote.com/clearly/)可以获得很好的效果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-18T10:42:48.210

你自己说：“wget 适合单个文件下载，而不是 html”。好吧，它可以下载单个文件（或批处理文件，取决于命令行选项），它只是**不会解析它们**。这似乎就是你想要的。

看看这个建议使用该选项的[答案](https://unix.stackexchange.com/questions/42636/how-to-get-text-of-a-page-using-wget-without-html)，它的优点是可以从脚本或程序中调用，而我给你的另一个答案只能手动使用。`lynx``-dump`

# asp.net-mvc-4 - 从手机上的应用程序登录 MVC 4 simplemembership

> ID：14396946
> 
> 赞同：0
> 
> 时间：2013-01-18T10:30:16.610
> 
> 标签：asp.net-mvc-4, windows-phone-8, simplemembership

我有一个使用 simplemembership 提供程序运行 mvc4 的站点。

我想让我的用户在手机（ios、android、wp8）上访问与网页上相同的数据，因此我需要他们登录到与我的 MVC 相同的用户数据库。

如何根据数据库验证来自应用程序的密码？手机应用程序不是来自手机上的网络浏览器......本机手机应用程序:)

不知道问题是否清楚，如果不是，请告诉我:)

更加具体：

我需要从我的应用程序登录，使用与在网站上相同的用户名和密码...我正在使用 simplemembership 提供程序，它是网页上 webmatrix.webdata.websecurity 的一部分，它显然不适用于手机sdk ...有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:19:39.293

您应该像使用网络应用程序一样使用您的 bdd 来检索您的密码。对于网站来说也是如此。或者我需要更多解释

# opencv - Open CV中Mat对象的标题和指针？

> ID：14396962
> 
> 赞同：-1
> 
> 时间：2013-01-18T10:30:49.673
> 
> 标签：opencv

**Mat中的Header**和**pointer**术语是什么意思，请通过一些例子详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:15:33.613

经过一番谷歌搜索后，我在[本文](http://docs.opencv.org/doc/tutorials/core/mat_the_basic_image_container/mat_the_basic_image_container.html#mat)中找到了您问题的答案：

> Mat 基本上是一个具有两个数据部分的类：矩阵头（包含诸如矩阵大小、用于存储的方法、存储的矩阵的地址等信息）和指向包含像素的矩阵的指针值（可能采用任何维度，具体取决于选择的存储方法）。

# c# - C# .NET 中可滚动控件的最佳实践方法

> ID：14396964
> 
> 赞同：2
> 
> 时间：2013-01-18T10:30:57.867
> 
> 标签：c#, .net, custom-controls, scrollable

我正在为语法编辑设计一个 Windows 窗体控件。我知道那里已经有很多了，比如[Scintilla](http://scintillanet.codeplex.com/)、[FastColoredTextBox](http://www.codeproject.com/Articles/161871/Fast-Colored-TextBox-for-syntax-highlighting)、 Actipro [Syntax Edito](http://www.actiprosoftware.com/products/controls/windowsforms/syntaxeditor) r、[Avalon Edit](https://github.com/icsharpcode/SharpDevelop/wiki/AvalonEdit)等。我有自己设计的理由，所以这不是问题。

到目前为止，我一直在设计控件的外观和感觉。它需要能够垂直和水平控制。

**我遇到的选项是：**

1.  我的控件扩展[了 ScrollableControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollablecontrol.aspx)或[ContainerControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.aspx)
2.  我的控件实例化了一个[HScrollBar](http://msdn.microsoft.com/en-us/library/system.windows.forms.hscrollbar.aspx)和[VScrollBar](http://msdn.microsoft.com/en-us/library/system.windows.forms.vscrollbar.aspx)控件并相应地放置它们
3.  我的控件使用[ScrollBarRenderer](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollbarrenderer.aspx)自定义绘制滚动条

我不确定这些选项中的哪一个是我控制的最佳实践。

我尝试使用[ScrollableControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollablecontrol.aspx)和[ContainerControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.aspx)，但这有一些非常不希望的结果，可能是因为控件`DisplayRectangle`正在滚动......我不想要这个。我想滚动一个包含文本的自定义绘制矩形。

我尝试实例化 HScrollBar 和 VScrollBar，但这似乎非常有问题，并且无法很好地处理焦点，我无法弄清楚如何正确捕获 VScroll 和 HScroll 事件。

我尝试使用[ScrollBarRenderer](http://msdn.microsoft.com/en-us/library/system.windows.forms.scrollbarrenderer.aspx)，但这似乎只是为了实现滚动条而付出了巨大的努力，并且使用这种方法，我仍然必须适当地捕获和处理事件。

那么我应该使用哪些方法，或者确实是我可能忽略的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T14:35:52.030

ScrollBarRenderer 仅用于绘制滚动条，它实际上并不执行任何滚动计算或动作。

就个人而言，我发现 HScrollBar 和 VScrollBar 的控件工作起来相当笨拙。

从 ScrollableControl（或 Panel 以获取内置的 windows 控件边框）继承可能是最简单的。您使用 AutoScrollMinSize 属性设置内部表面的大小，然后使用 AutoScrollPosition 属性对图形对象执行 TranslateTransform 以处理绘制控件部分的“位置”：

```
public class ScrollControl : ScrollableControl {

  public ScrollControl() {
    this.DoubleBuffered = true;
    this.ResizeRedraw = true;
    this.AutoScrollMinSize = new Size(0, 600);
  }

  protected override void OnPaint(PaintEventArgs e) {
    base.OnPaint(e);

    e.Graphics.Clear(Color.White);
    e.Graphics.TranslateTransform(this.AutoScrollPosition.X, 
                                  this.AutoScrollPosition.Y);
    e.Graphics.FillRectangle(Brushes.Red, new Rectangle(16, 32, 64, 32));
  }
} 
```

不过要小心，语法文本编辑器与绘图控件是不同的野兽。我建议为此使用 RichTextBox 控件。

# c# - 如何解决 Enumerable 和 MoreLINQ 之间的模糊 ZIP 调用？

> ID：14396971
> 
> 赞同：12
> 
> 时间：2013-01-18T10:31:11.077
> 
> 标签：c#, .net, linq, ambiguous-call, morelinq

我遇到了扩展方法解析的问题。LINQ 和 MoreLINQ 包含`zip`方法，它从**4.0**版本开始存在于 .NET 中，并且始终存在于[MoreLINQ](http://code.google.com/p/morelinq/)库中。但是您不能使用带有旧扩展方法语法的实现之一。所以这段代码不会编译

```
using MoreLinq;
using System.Linq;

var students = new [] { "Mark", "Bob", "David" };
var colors = new [] { "Pink", "Red", "Blue" };

students.Zip(colors, (s, c) => s + c ); 
```

错误：

```
The call is ambiguous between the following methods or properties: 
'MoreLinq.MoreEnumerable.Zip<string,string,string>
(System.Collections.Generic.IEnumerable<string>, 
System.Collections.Generic.IEnumerable<string>, System.Func<string,string,string>)' and 
'System.Linq.Enumerable.Zip<string,string,string>
(System.Collections.Generic.IEnumerable<string>, 
System.Collections.Generic.IEnumerable<string>, System.Func<string,string,string>)' 
```

我在[这篇文章](https://stackoverflow.com/questions/610870/when-do-extension-methods-break/610908#610908)中找到了 Jon Skeet 为 MoreLINQ 制作的`Concat`方法的良好分辨率，但我不知道方法的良好分辨率。`string``zip`

**注意：**您始终可以使用静态方法调用语法，并且一切正常

```
MoreEnumerable.Zip(students, colors, (s, c) => s + c ) 
```

但有点错过了扩展语法糖的意义。如果您使用 LINQ 和 MoreLINQ 调用进行大量数据转换 - 您不想在中间使用静态方法调用。

有没有更好的方法来解决这种歧义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T10:50:13.343

您可以使用相同的方法创建包装类，但名称不同。这有点脏，但如果你真的喜欢扩展语法，那是唯一的方法。

```
public static class MoreLinqWrapper
{
    public static IEnumerable<TResult> MlZip<TFirst, TSecond, TResult>(this IEnumerable<TFirst> first, IEnumerable<TSecond> second, Func<TFirst, TSecond, TResult> resultSelector)
    {
        return MoreLinq.Zip(first, second, resultSelector);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T11:18:00.503

使其编译的一种方法是：

```
var students = new[] { "Mark", "Bob", "David", "test" }.AsQueryable();
var colors = new[] { "Pink", "Red", "Blue" };

students
    .Zip(colors, (s, c) => s + c)
    .Dump(); 
```

`students`对象必须转换为对象`IQueryable`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-29T12:37:00.963

更新你的 morelinq，从现在开始

*   用于`Zip`.NET 4.0 Zip
*   用于`ZipShortest`MoreLinq 邮编

问题已在[88c573f7中修复](https://github.com/morelinq/MoreLINQ/commit/88c573f7bbcd15d0cd09f22e9b73b62dce9b66ed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T10:46:35.627

不幸的是，静态方法调用语法是这里唯一的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-25T16:53:00.687

前几天我遇到了这个问题，我只是直接调用了 MoreLinq 方法。

```
MoreLinq.MoreEnumerable.Zip(students, colors, (s, c) => s + c); 
```

# c# - 使用单个应用程序 C# 在 LAN 中的所有计算机上启动 TCPListener

> ID：14396972
> 
> 赞同：0
> 
> 时间：2013-01-18T10:31:18.990
> 
> 标签：c#, tcp

我已经浏览了 [http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener(v=vs.100).aspx) 并且还参考了许多关于 TCPListener 的文章/帖子。但我我无法理解是否可以使用 C# 从本地计算机启动 TCP 侦听器到连接到我的 LAN 端口 8888 的所有计算机？

我有两台计算机连接在 LAN 中，说 compA(192.168.1.1) 和 compB(192.168.1.2)。现在我想从 compA 在 compB 上启动 TCPListener。换句话说，如果我在 compA 中启动一个应用程序（window C#），它应该在 compB 中启动监听器，比如在（192.168.1.2:888）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:55:15.053

您不能随意`TcpListener`在另一台机器上启动 a，除非您已经为此目的在该机器上安装了特定软件；能够做到这一点将是一个明显的安全问题。

地址/端点参数`TcpListener`是**本地**地址/端点。一台机器可以有多个 IP 地址，并且该参数仅允许您绑定到特定的 IP 地址，而不是响应所有绑定。

如果您只是希望其他机器能够连接到 compA，那很好也很简单：只需在 compA 上启动侦听器，告诉它绑定到端口 8888，或者如果您想更具体：端口上的 192.168.1.1 8888。但这对 compB 没有任何作用，直到 compB 尝试打开与 compA 的 TCP 连接。

# java - 使用 MapReduce 规范化

> ID：14396976
> 
> 赞同：0
> 
> 时间：2013-01-18T10:31:25.933
> 
> 标签：java, hadoop, mapreduce

有这个样本记录，100,1:2:3

我想标准化为
100,1
100,2
100,3

我的一位同事编写了一个猪脚本来实现这一点，而我的 MapReduce 代码花费了更多时间。我之前使用的是默认的 TextInputformat。但是为了提高性能，我决定编写一个自定义的输入格式类，带有一个自定义的 RecordReader。以 LineRecordReader 类为参考，我尝试编写以下代码。

```
import java.io.IOException;
import java.util.List;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FSDataInputStream;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.InputSplit;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.TaskAttemptContext;
import org.apache.hadoop.mapreduce.lib.input.FileSplit;
import org.apache.hadoop.util.LineReader;

import com.normalize.util.Splitter;

public class NormalRecordReader extends RecordReader<Text, Text> {

    private long start;
    private long pos;
    private long end;
    private LineReader in;
    private int maxLineLength;
    private Text key = null;
    private Text value = null;
    private Text line = null;

    public void initialize(InputSplit genericSplit, TaskAttemptContext context) throws IOException {
        FileSplit split = (FileSplit) genericSplit;
        Configuration job = context.getConfiguration();
        this.maxLineLength = job.getInt("mapred.linerecordreader.maxlength", Integer.MAX_VALUE);

        start = split.getStart();
        end = start + split.getLength();

        final Path file = split.getPath();

        FileSystem fs = file.getFileSystem(job);
        FSDataInputStream fileIn = fs.open(split.getPath());

        in = new LineReader(fileIn, job);
        this.pos = start;
    }

    public boolean nextKeyValue() throws IOException {
        int newSize = 0;
        if (line == null) {
            line = new Text();
        }

        while (pos < end) {
            newSize = in.readLine(line);
            if (newSize == 0) {
                break;
            }
            pos += newSize;
            if (newSize < maxLineLength) {
                break;
            }

            // line too long. try again
            System.out.println("Skipped line of size " + newSize + " at pos " + (pos - newSize));
        }
        Splitter splitter = new Splitter(line.toString(), ",");
        List<String> split = splitter.split();

        if (key == null) {
            key = new Text();
        }
        key.set(split.get(0));

        if (value == null) {
            value = new Text();
        }
        value.set(split.get(1));

        if (newSize == 0) {
            key = null;
            value = null;
            return false;

        } else {
            return true;
        }
    }

    @Override
    public Text getCurrentKey() {
        return key;
    }

    @Override
    public Text getCurrentValue() {
        return value;
    }

    /**
     * Get the progress within the split
     */
    public float getProgress() {
        if (start == end) {
            return 0.0f;
        } else {
            return Math.min(1.0f, (pos - start) / (float)(end - start));
        }
    }

    public synchronized void close() throws IOException {
        if (in != null) {
            in.close(); 
        }
    }
} 
```

虽然这可行，但我没有看到任何性能改进。在这里，我打破了“，”的记录，并将 100 设置为键，将 1,2,3 设置为值。我只调用执行以下操作的映射器：

```
public void map(Text key, Text value, Context context) 
        throws IOException, InterruptedException {

    try {
        Splitter splitter = new Splitter(value.toString(), ":");
        List<String> splits = splitter.split();

        for (String split : splits) {
            context.write(key, new Text(split));
        }

    } catch (IndexOutOfBoundsException ibe) {
        System.err.println(value + " is malformed.");
    }
} 
```

拆分器类用于拆分数据，因为我发现 String 的拆分器速度较慢。方法是：

```
public List<String> split() {

    List<String> splitData = new ArrayList<String>();
    int beginIndex = 0, endIndex = 0;

    while(true) {

        endIndex = dataToSplit.indexOf(delim, beginIndex);
        if(endIndex == -1) {
            splitData.add(dataToSplit.substring(beginIndex));
            break;
        }

        splitData.add(dataToSplit.substring(beginIndex, endIndex));
        beginIndex = endIndex + delimLength;
    }

    return splitData;
} 
```

可以以任何方式改进代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:03:52.120

让我在这里总结一下我认为您可以改进的地方，而不是在评论中：

*   如前所述，目前您正在为`Text`每条记录创建多次对象（次数将等于您的令牌数）。虽然对于少量投入来说可能并不重要，但对于体面的工作来说，这可能是一件大事。要解决此问题，请执行以下操作：

    ```
    private final Text text = new Text();

    public void map(Text key, Text value, Context context) {
        ....
        for (String split : splits) {
            text.set(split);
            context.write(key, text);
        }
    } 
    ```

*   对于您的拆分，您现在正在为每条记录分配一个新数组，填充该数组，然后遍历该数组以写入您的输出。实际上，在这种情况下，您实际上并不需要数组，因为您没有维护任何状态。使用`split`您提供的方法的实现，您只需对数据进行一次传递：

    ```
    public void map(Text key, Text value, Context context) {
        String dataToSplit = value.toString();
        String delim = ":";

        int beginIndex = 0;
        int endIndex = 0;

        while(true) {
            endIndex = dataToSplit.indexOf(delim, beginIndex);
            if(endIndex == -1) {
                text.set(dataToSplit.substring(beginIndex));
                context.write(key, text);
                break;
            }

            text.set(dataToSplit.substring(beginIndex, endIndex));
            context.write(key, text);
            beginIndex = endIndex + delim.length();
        }
    } 
    ```

*   我真的不明白你为什么要编写自己的`InputFormat`，这似乎`KeyValueTextInputFormat`正是你所需要的，并且可能已经被优化了。以下是你如何使用它：

    ```
    conf.set("key.value.separator.in.input.line", ",");
    job.setInputFormatClass(KeyValueTextInputFormat.class); 
    ```

*   根据您的示例，每条记录的键似乎是一个整数。如果总是这样，那么使用 a`Text`作为您的映射器输入键并不是最佳选择，它应该是 a`IntWritable`甚至可能是 a ，`ByteWritable`具体取决于您的数据中的内容。

*   同样，您希望使用`IntWritable`or`ByteWritable`作为映射器输出键和输出值。

此外，如果您想要一些有意义的基准，您应该在更大的数据集上进行测试，如果可能的话，像几个 Gbs。1 分钟的测试并没有真正的意义，尤其是在分布式系统的上下文中。一项工作在小投入上可能比另一个工作运行得更快，但对于更大的投入，趋势可能会逆转。

话虽如此，您还应该知道 Pig 在转换为 Map/Reduce 时在后台做了很多优化，所以我并不感到惊讶它比您的 Java Map/Reduce 代码运行得更快，而且我在过去。尝试我建议的优化，如果它仍然不够快，这里有[一个关于使用一些更有用的技巧分析 Map/Reduce 作业的链接](http://blog.cloudera.com/blog/2009/12/7-tips-for-improving-mapreduce-performance/)（特别是关于分析的技巧 7，我发现它很有用）。

# r - ggplot2 + 使用比例 X 的日期结构

> ID：14396977
> 
> 赞同：5
> 
> 时间：2013-01-18T10:31:28.640
> 
> 标签：r, ggplot2

我在这里真的需要帮助，因为我已经迷路了。

我正在尝试创建一个折线图，显示几个团队在一年内的表现。我将一年分为几个季度：2012 年 1 月 1 日、2012 年 4 月 1 日。2012 年 8 月 1 日。12/1/12 并将 csv 数据帧加载到 R 中。

```
 Month               Team Position
1   1/1/12       South Africa       56
2   1/1/12             Angola       85
3   1/1/12            Morocco       61
4   1/1/12 Cape Verde Islands       58
5   4/1/12       South Africa       71
6   4/1/12             Angola       78
7   4/1/12            Morocco       62
8   4/1/12 Cape Verde Islands       76
9   8/1/12       South Africa       67
10  8/1/12             Angola       85
11  8/1/12            Morocco       68
12  8/1/12 Cape Verde Islands       78
13 12/1/12       South Africa       87
14 12/1/12             Angola       84
15 12/1/12            Morocco       72
16 12/1/12 Cape Verde Islands       69 
```

当我尝试使用 ggplot2 生成图表时，第四季度 12/1/12 莫名其妙地移动到了第二个位置。

```
ggplot(groupA, aes(x=Month, y=Position, colour=Team, group=Team)) + geom_line() 
```

然后我将此图放入变量 GA 中，以尝试使用 scale_x 格式化日期：

```
GA + scale_x_date(labels = date_format("%m/%d")) 
```

但我不断收到此错误：

```
Error in structure(list(call = match.call(), aesthetics = aesthetics,  : 
```

找不到函数“date_format”

如果我运行这段代码：

```
GA + scale_x_date() 
```

我收到此错误：

```
Error: Invalid input: date_trans works with objects of class Date only 
```

我正在使用运行 R 2.15.2 的 Mac OS X

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:47:30.727

这是因为 , `df$Month`（假设您`data.frame`是`df`），它是 a`factor`的级别按此顺序排列。

```
> levels(df$Month)
# [1] "1/1/12"  "12/1/12" "4/1/12"  "8/1/12" 
```

解决方案是重新排序因子的水平。

```
df$Month <- factor(df$Month, levels=df$Month[!duplicated(df$Month)])
> levels(df$Month)
# [1] "1/1/12"  "4/1/12"  "8/1/12"  "12/1/12" 
```

![ggplot2_factor_levels](../Images/ac190f83f897bc27b3b6ac0dc723d2a1.png)

**编辑：**使用替代解决方案`strptime`

```
# You could convert Month first:
 df$Month <- strptime(df$Month, '%m/%d/%y') 
```

然后你的代码应该可以工作。检查下面的情节：

![ggplot2_strptime_solution](../Images/132d5638d79893ab8c2e431069f345e9.png)

# anythingslider - AnithingSlider - 如何将幻灯片更改为“不间断”滑动？

> ID：14396980
> 
> 赞同：1
> 
> 时间：2013-01-18T10:31:30.957
> 
> 标签：anythingslider

我对 JS 比较陌生，我开始使用“AnythingSlider”JavaScript。

我面临的一个问题是我希望幻灯片按顺序“不间断”显示，例如，我希望幻灯片不断移动。

我曾尝试使用 .js 文件中的“Times”设置，但无法达到预期的效果。

```
 // Times
    delay               : 3000,      // How long between slideshow transitions in AutoPlay mode (in milliseconds)
    resumeDelay         : 15000,     // Resume slideshow after user interaction, only if autoplayLocked is true (in milliseconds).
    animationTime       : 600,       // How long the slideshow transition takes (in milliseconds)
    delayBeforeAnimate  : 0,         // How long to pause slide animation before going to the desired slide (used if you want your "out" FX to show). 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T02:32:27.947

试试这些选项（[演示](http://jsfiddle.net/Mottie/ycUB6/3901/)）：

```
$('#slider').anythingSlider({

    // If true, builds the forwards and backwards buttons
    buildArrows: false,
    // If true, builds a list of anchor links to link to each panel
    buildNavigation: false,
    // If true, builds the start/stop button
    buildStartStop: false,

    // if false, keyboard arrow keys will not work for this slider.
    enableKeyboard: false,

    // If true, the slideshow will start running; replaces "startStopped" option
    autoPlay: true,
    // If true, user changing slides will not stop the slideshow
    autoPlayLocked: true,

    // If true & the slideshow is active, the slideshow will pause on hover
    pauseOnHover: false

}); 
```

*   请注意，这些选项是唯一不同于默认设置的选项。我保留了演示中的所有选项，所以你可以玩:)
*   如果我完全误解了你，你的意思是让滑块连续滑动，那么请注意，幻灯片之间总会有一个非常短暂的停顿；如果这是不可接受的，那么您可能需要找到另一个插件。抱歉 =(... 试试这些额外的设置（[更新的演示](http://jsfiddle.net/Mottie/ycUB6/3902/)）：

    ```
    delay: 100,
    resumeDelay: 15000,
    animationTime: 3000,
    delayBeforeAnimate: 0 
    ```

# google-chrome - 3d 对象中的 Chrome 大型对象消失

> ID：14396981
> 
> 赞同：2
> 
> 时间：2013-01-18T10:31:42.220
> 
> 标签：google-chrome, rendering, scale, translate3d

我不知道这是一个错误还是只需要称为渲染问题，但这很烦人。

如果您有一个 3d 平移对象，其中您有一个缩放对象，如果该缩放对象超过一定大小，它就会消失。这就是我的意思：[http](http://dabblet.com/gist/4563584) ://dabblet.com/gist/4563584 （将 a 悬停并等待它消失）

我用谷歌搜索并搜索了很多，但无济于事。

你可能会想：*为什么？*因为我正在制作一个 impress.js 幻灯片，它需要放大很多，但是当使用 3d 转换来硬件加速时，对象被缓存为图像以节省内存或其他东西，我明白了，但大的仍然可见当完全放大时，它变得模糊（因为它以小尺寸缓存），缩放和缩小解决了这个问题，但它消失了......

我还没有找到任何其他方法来解决没有比例尺的模糊文本问题，也欢迎任何帮助。

*   使用谷歌浏览器 24.0.1312.52
*   Firefox 16.0.2 运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T18:22:11.983

是的，这是一个 Chrome 错误，不会发生在 Firefox/IE/Safari 中。有一段时间了。

该问题已多次向 Chromium 报告，这是最近的一个：

[https://code.google.com/p/chromium/issues/detail?id=337493](https://code.google.com/p/chromium/issues/detail?id=337493)

# github - hudson.plugins.git.GitException：无法从任何存储库中获取

> ID：14396988
> 
> 赞同：4
> 
> 时间：2013-01-18T10:31:57.403
> 
> 标签：github, maven-2, hudson

我想配置 hudson+git 并想创建一个构建。但我得到以下异常：

```
Started by user nitish
Checkout:workspace / /root/.hudson/jobs/NightlyGit/workspace - hudson.remoting.LocalChannel@dd7efd
Using strategy: Default
Checkout:workspace / /root/.hudson/jobs/NightlyGit/workspace - hudson.remoting.LocalChannel@dd7efd
Fetching changes from the remote Git repository
Fetching upstream changes from https://github.com/test/eng.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
ERROR:  (Underlying report) : Error performing command: /usr/bin/git fetch -t https://github.com/test/eng.git +refs/heads/nightly:refs/remotes/origin/nightly
Command "/usr/bin/git fetch -t https://github.com/test/engile.git +refs/heads/nightly:refs/remotes/origin/nightly" returned status code 128: error: The requested URL returned error: 401 while accessing https://github.com/test/eng.git/info/refs

fatal: HTTP request failed

ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
    at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:887)
    at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:845)
    at hudson.FilePath.act(FilePath.java:758)
    at hudson.FilePath.act(FilePath.java:740)
    at hudson.plugins.git.GitSCM.gerRevisionToBuild(GitSCM.java:845)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:622)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1483)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:507)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:424)
    at hudson.model.Run.run(Run.java:1366)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:145) 
```

我是 git 的新手，我不知道确切的问题是在将 git 与 hudson 一起使用时是否需要任何凭据？现在我已经创建了 hudson 作业并提供了 git 存储库链接，但它抛出了异常。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:03:24.150

我已经在 hudson 服务器上创建了 SSH 密钥并将其添加到我的 github 帐户中，从而解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-06T14:29:05.573

试试这个：

1.  转到作业的“**配置**”页面。

2.  在**Source Code Management** → **Git** → **Additional Behaviors**下，添加行为“ **Wipe out repository & force clone** ”：

[![在此处输入图像描述](../Images/fcdbcab8fb0bb62c894dee5f5b218594.png)](https://i.stack.imgur.com/FeH6m.png)

[![在此处输入图像描述](../Images/0d19973cae6bd529714c8674fe74dedb.png)](https://i.stack.imgur.com/PmpjI.png)

3.  点击**保存**按钮。

4.  再次尝试**构建**。

# php - 用php连接水晶报表

> ID：14396990
> 
> 赞同：3
> 
> 时间：2013-01-18T10:32:06.763
> 
> 标签：php

我想用php连接水晶报表，但这似乎是不可能的。是否有任何替代报告查看工具，如 php 水晶？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T10:36:08.207

我认为您可以使用[Reportico，](http://www.reportico.org/swsite/site/home/index.php) 它是一个开源软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:46:25.207

[http://www.dbfacephp.com](http://www.dbfacephp.com)可能是您的解决方案。您还可以将它与 [诸如 Crystal Reports for PHP 之类的东西联系起来吗？](https://stackoverflow.com/questions/747103/something-like-crystal-reports-for-php)

# wordpress - Timthumb 上传后无法显示图片

> ID：14396991
> 
> 赞同：6
> 
> 时间：2013-01-18T10:32:07.490
> 
> 标签：wordpress, timthumb

我正在使用名为 User Avatar 的 Wordpress 插件，该插件使用 Timthumb 进行图像显示。当我打开页面显示图像时，它在控制台中出现错误 500，当我在新选项卡中使用该图像链接时，出现以下错误：

```
A TimThumb error has occured

The following error(s) occured:
Could not create the index.html file - to fix this create an empty file named index.html file in the cache directory.
Could not create cache clean timestamp file.

Query String : src=http://my.domain.com/wp-content/uploads/avatars/1/1358504649-bpfull.jpg&w=150&id=1&random=1358504649
TimThumb version : 2.8.10 
```

我认为这是服务器错误或配置错误，所有内容都被上传到文件夹`uploads`，然后进入`avatars`具有`0777`权限的子文件夹，文件夹`1`也有`0777`.

Insinde，有`cache`和`temp`文件夹，都有`0777`权限。GD Image Lib 在服务器上启用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T13:20:08.177

查看您的 timthumb-config.php，检查是否`FILE_CACHE_DIRECTORY`设置为您认为的目录。

您还可以删除 tim thumb 缓存目录中的现有 index.html 文件，因为 tim thumb 会自动创建它（先备份它以防万一）

您可能还需要检查配置文件以查看是否`MEMORY_LIMIT`为您的特定图像设置了足够高的值。

您还应该检查缓存文件夹是否属于网络服务器而不是您。

其他故障排除帮助：http: [//www.binarymoon.co.uk/2010/11/timthumb-hints-tips/](http://www.binarymoon.co.uk/2010/11/timthumb-hints-tips/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-23T20:52:01.827

就像@jopacic 说的那样。以下内容也对我有用：

*   将“缓存”目录权限更改为 777
*   删除“缓存”目录中的 index.html 文件

试试看，应该可以的

# php - mysql_query() 期望参数 2 是资源，布尔值

> ID：14396996
> 
> 赞同：0
> 
> 时间：2013-01-18T10:32:20.860
> 
> 标签：php, mysql

我查看了与我的类似问题的其他答案，但似乎无法解决这个问题。

这是代码。

```
 $connection = mysql_connect("localhost","root","starwars");
  $conn = mysql_select_db("project", $connection);

        // This code assumes $itemID is set to that of 
   // the item that was just rated. 
   // Get all of the user's rating pairs
   $sql = "SELECT DISTINCT r.itemID, r2.ratingValue - r.ratingValue 
               as rating_difference
               FROM rating r, rating r2
               WHERE r.userID=$userID AND 
                       r2.itemID=$itemID AND 
                       r2.userID=$userID;";

   $db_result = mysql_query($sql, $conn);
   echo "The result is {$db_result}";
   $num_rows = mysql_num_rows($db_result)or die('Cannot Execute:'. mysql_error()); 
```

显示的错误是：

> 警告：mysql_query() 期望参数 2 是资源，布尔值在第 177 行的 C:\xampp\htdocs\recomender\ratingfiles\class.rating.php 中给出

第 177 行是

```
 $db_result = mysql_query($sql, $conn); 
```

如果我回`$conn`显它会给出“1”的值，我认为它等于真，因此是布尔值，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:33:55.373

这可能意味着`$conn`是错误的，意味着它没有正确设置。您可能需要检查您是如何设置的，并确保数据库连接详细信息正确，并且正在运行的服务器可以访问数据库服务器。

看看这个页面上的返回值：

[http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:34:10.533

`$connection`作为第二个参数传递，而不是`$conn`.

您将结果分配`mysql_select_db`给 $conn，并`mysql_select_db`返回 true 或 false，而不是连接资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T10:34:12.160

将前 2 行更改为

```
$conn = mysql_connect("localhost","root","starwars");
mysql_select_db("project", $conn); 
```

或者，更好的是，根本不要使用连接变量

```
mysql_connect("localhost","root","starwars");
mysql_select_db("project");
...
$db_result = mysql_query($sql); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T10:35:53.763

```
$db_result = mysql_query($sql, $connection); 
```

`mysql_connect`必须有的第二个参数

MySQL 连接。如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。如果未找到或建立连接，则会生成 E_WARNING 级别错误。

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

# excel - 如何清除内存以防止excel vba中的“内存不足错误”？

> ID：14396998
> 
> 赞同：26
> 
> 时间：2013-01-18T10:32:32.613
> 
> 标签：excel, vba, memory

我在一个大型电子表格上运行 VBA 代码。如何清除过程/调用之间的内存以防止发生“内存不足”问题？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-11-20T14:11:44.580

我找到了解决方法。起初它似乎会花费更多时间，但实际上由于更少的交换和更多的可用内存，它使一切工作更顺畅、更快。这不是一种科学的方法，它需要一些测试才能起作用。

在代码中，让 Excel 时不时地保存工作簿。我不得不遍历一张有 360 000 行的纸，它严重窒息。每 10 000 次后，我让代码保存工作簿，现在即使在 32 位 Excel 上它也能像魅力一样工作。

如果您同时启动任务管理器，您可以看到每次保存后内存利用率急剧下降。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-18T10:36:34.810

帮助释放内存的最佳方法是使大对象无效：

```
Sub Whatever()
    Dim someLargeObject as SomeObject

    'expensive computation

    Set someLargeObject = Nothing
End Sub 
```

另请注意，全局变量仍然从一个调用分配到另一个调用，因此如果您不需要持久性，则不应使用全局变量或在不再需要它们时将它们无效。

但是，如果出现以下情况，这将无济于事：

*   你需要在程序之后的对象（显然）
*   您的对象不适合内存

另一种可能性是切换到 64 位版本的 Excel，它应该能够在崩溃之前使用更多 RAM（32 位版本通常限制在 1.3GB 左右）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-18T10:39:24.827

答案是你不能明确地但你应该在你的例程中释放内存。

一些提示虽然可以帮助记忆

*   确保在退出例程之前将 object 设置为 null。
*   如果需要，请确保在对象上调用 Close。
*   除非绝对必要，否则不要使用全局变量

我建议在一次又一次地执行例程后检查内存使用情况，您可能会遇到内存泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-16T01:11:34.873

如果您对大型数据集进行操作，则很可能会使用数组。对我来说，从 500 000 行和 30 列工作表创建几个数组导致了这个错误。在创建另一个之前，我通过使用下面的行来摆脱对我来说不再需要的数组来解决它：

```
Erase vArray 
```

此外，如果仅使用 30 列中的 2 列，则创建两个 1 列数组而不是一个具有 30 列的数组是一个好主意。它不影响速度，但内存使用量会有所不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-08T06:53:57.943

发现这个线程正在寻找解决我的问题的方法。我的需要一个不同的解决方案，我发现它可能对其他人有用。我的宏正在删除行、向上移动并将行复制到另一个工作表。在仅处理了大约 4000 条记录后，内存使用量激增至数次，并导致“内存不足”。什么为我解决了？

应用程序.screenupdating = false

在我的代码开头添加了这一点（一定要在最后再次使它成为真的）我知道这会使它运行得更快，它确实做到了..但不知道内存的事情。

进行这个小改动后，内存使用量没有超过 135 mb。为什么这行得通？真的不知道。但它值得一试，可能适用于你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-18T20:16:24.300

我可以通过简单地初始化一个稍后在我的程序中使用的变量来修复这个错误。当时，我没有在我的类/模块中使用 Option Explicit。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-24T17:46:41.117

我有一个类似的问题，我自己解决了......我认为部分原因是我的代码占用了太多的内存，而太多的“大事”

在我的应用程序中 - 工作簿出来并获取另一个部门的“每日报告”......我提取了我们团队需要的所有信息（以尽量减少错误和数据输入）。

我直接拉入他们的床单......但我讨厌他们使用合并单元格的事实......我摆脱了（即取消合并，然后找到生成的空白单元格，并填充上面的值）

我让我的问题消失了

a）仅取消合并“使用的单元格” - 而不是仅仅尝试执行整个列......即找到列中最后使用的行，并仅取消合并这个范围（我抓住的每张纸上都有 1000 行)

b）知道撤消只关注最后的〜16个事件......在每个“取消合并”之间 - 我放置了15个事件来清除“撤消”中存储的内容，以最大限度地减少占用的内存量（即转到一些包含数据的单元格..并复制//粘贴特殊值...我猜测 30 张每张有 3 列数据的累积总和可能会对作为撤消的一侧的内存集征税

是的，它不允许任何撤消的机会......但整个目的是清除旧信息并提取新的时间敏感数据进行分析，所以这不是问题

听起来老土 - 但我的问题消失了

# php - 如果我在 mongodb 中将日期存储为 datetime，如何在 json 中显示日期？

> ID：14396999
> 
> 赞同：0
> 
> 时间：2013-01-18T10:32:33.083
> 
> 标签：php, mongodb, datetime

如果 mongodb 中的变量类型是 datetime，返回的变量类型是什么？

当我把它转换成json时，会显示什么？会是像unix时间戳这样的大数字还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:35:33.010

文档说它是 UTC 日期时间。所以期望它是一个字符串，例如： `2010-10-28T23:07:11Z`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:46:50.157

最好使用 mongos 本机 JavaScript Date 对象。

您可以使用 'getTime()' 方法或 'Date(milliseconds)' 将日期对象与 Unix 时间戳转换

请记住，由于 Unix 纪元，JavaScript Date 对象以毫秒为单位。