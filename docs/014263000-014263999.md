# StackOverflow 问答 14263000-14263999

# android - AIDL 找不到 Parcelable 类的定义

> ID：14263005
> 
> 赞同：5
> 
> 时间：2013-01-10T16:47:57.803
> 
> 标签：android, class, parcelable, aidl

我有以下项目结构。

![在此处输入图像描述](../Images/a7c0b430931935c29440a4aa4a4a898a.png)

我`StockInfo.java`的很好。

## StockInfo.java（没有错误）

```
package org.yccheok.jstock.engine;

import android.os.Parcel;
import android.os.Parcelable;

public class StockInfo implements Parcelable {
    ...
    ... 
```

## StockInfo.aidl（无错误）

```
package org.yccheok.jstock.engine;

parcelable StockInfo; 
```

## StockInfoObserver.aidl（错误！）

```
package org.yccheok.jstock.engine;

interface StockInfoObserver {

    void update(StockInfo stockInfo);
} 
```

## AutoCompleteApi.aidl（错误！）

```
package org.yccheok.jstock.engine;

interface AutoCompleteApi {

    void handle(String string);
    void attachStockInfoObserver(StockInfoObserver stockInfoObserver);
} 
```

但是，Eclipse 抱怨`StockInfoObserver.aidl`（它也抱怨`AutoCompleteApi.aidl`，因为它无法处理`StockInfoObserver.aidl`），

**参数 stockInfo (1) 未知类型 StockInfo**

我尝试了一个小时，但仍然无法找出，为什么在aidl中，`StockInfo`虽然我有

1.  假如`StockInfo.aidl`
2.  假如`StockInfo.java`

任何想法？

这是完整的错误。

![在此处输入图像描述](../Images/a0eac121113221dd3d917fafb86c35fa.png)

注意，`AutoCompleteApi.aidl`非常依赖于`StockInfoObserver.aidl`. 这就是为什么你会看到错误。

我分享整个项目供您参考：[https ://www.dropbox.com/s/0k5pe75jolv5mtq/jstock-android.zip](https://www.dropbox.com/s/0k5pe75jolv5mtq/jstock-android.zip)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:04:06.283

根据Android文档`You must include an import statement for each additional type not listed above, even if they are defined in the same package as your interface`

尝试将此行添加到`StockInfoObserver.aidl`

```
import org.yccheok.jstock.engine.StockInfo; 
```

# sql - sql和excel之间的平均时间差？

> ID：14263006
> 
> 赞同：1
> 
> 时间：2013-01-10T16:48:01.170
> 
> 标签：sql, average

我有这些时间值（varchar）：[hh:mm]

> ```
> 2:41
> 2:31
> 1:46
> 21:41
> 18:19
> 17:56
> 18:4
> 17:17
> 17:2
> 16:39
> 0:40
> 0:38
> 0:38
> 0:29
> 1:19
> 2:52
> 0:15
> 16:55
> 17:25
> 17:15
> 3:31
> 2:7
> 2:21
> 1:35
> 1:38
> 0:17
> 0:28
> 18:40
> 2:54
> 18:14
> 2:31
> 18:9
> 18:10
> 0:39
> 0:38
> 3:5
> 3:20
> 3:6
> 2:58
> 2:31
> 2:4
> 1:54
> 2:2
> 1:44
> 1:39
> 1:22
> 1:6
> 1:15
> 0:53
> 1:13
> 20:32
> 1:11
> 0:36
> 0:35
> 0:26
> 1:3
> 4:20
> 3:42
> 3:7
> 3:16
> 2:44
> 2:30
> 0:40
> 2:5
> 4:21
> 2:6
> 3:54
> 3:45
> 3:31
> 18:59
> 18:59
> 18:47
> 18:43
> 19:40
> 19:29
> 2:19
> 1:9
> 4:10
> 3:50
> 2:20
> 1:16
> 4:33
> 21:23
> 20:57
> 16:31
> 1:51
> 5:15
> 1:48
> 3:15
> 1:32
> 4:19
> 4:17
> 1:59
> 3:38
> 1:55
> 2:11
> 1:26 
> ```

现在，当我在 excel 中做平均时，结果是：`6:14`

如果我在 sql 中执行此操作：（使用：[This](https://stackoverflow.com/questions/1005782/sql-average-time)）

```
select 
    Month(OperationDate) [Month], count(distinct IdOrder) OrderQty,
    avg(DATEPART(hh,TimeSpent)*60 + DATEPART(mi,TimeSpent)) % 24 as AvgHour,
    avg(DATEPART(hh,TimeSpent)*60 + DATEPART(mi,TimeSpent)) / 24 as AvgMinute

from @tmp1 tmp1
inner join tblCheckList tcl on tmp1.IdCheckList = tcl.IdCheckList
where TimeSpent<>'0:0'
group by Month(OperationDate) 
```

它返回平均值：`10:15`

为什么有区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:52:26.473

为什么`% 24`和`/ 24`？

您不会将平均分钟数除以 60 以得到平均小时数吗？

```
avg(DATEPART(hh,TimeSpent)*60 + DATEPART(mi,TimeSpent)) / 60.0 as AvgHour,
avg(DATEPART(hh,TimeSpent)*60 + DATEPART(mi,TimeSpent)) as AvgMinute 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:25:23.213

这也会照顾你。

```
Select  Convert(Varchar(5),Convert(Time,DateAdd(mi,Avg(DateDiff(mi,0,Convert(DateTime,TimeColumn))),0)))
From    TableName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:58:07.990

解决方案是使用分钟，然后将这些分钟转换为小时和分钟：

```
avg(DATEPART(hh,TimeSpent)*60 + DATEPART(mi,TimeSpent)) / 60 as AvgHour,
avg(DATEPART(hh,TimeSpent)*60 + DATEPART(mi,TimeSpent)) % 60 as AvgMinute 
```

# ios - RNCryptor 不适用于 JSON 字符串

> ID：14263007
> 
> 赞同：7
> 
> 时间：2013-01-10T16:48:06.090
> 
> 标签：ios, encryption, encoding, rncryptor

这是我使用 RNCryptor 加密/解密我发送到 Web 服务的 JSON 字符串的方法。我正在使用静态 IV 变量，这可能是不好的做法，但请不要专注于此。这是我的做法：

注意：我使用的是 Matt Gallagher 的 NSData+Base64 类别，可在[此处](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)找到（在页面底部）

```
-(NSString*)encryptString:(NSString*)plaintext withKey:(NSString*)key error:(NSError**)error{
    NSData *data = [plaintext dataUsingEncoding:NSUTF8StringEncoding];
    NSData *encryptionKey = [NSData dataFromBase64String:key];
    NSData *IV = [NSData dataFromBase64String:ENCRYPTION_IV];

    RNCryptorEngine *engine = [[RNCryptorEngine alloc] initWithOperation:kCCEncrypt settings:kRNCryptorAES256Settings key:encryptionKey IV:IV error:error];
    [engine addData:data error:error];
    NSData *encryptedData = [engine finishWithError:error];

    NSString *based64Encrypted = [encryptedData base64EncodedString];
    NSLog(@"Encrytped: %@", based64Encrypted);
    return based64Encrypted;
}
-(NSString*) decryptString:(NSString*)cipherText withKey:(NSString*)key error:(NSError**)error;{
    NSData *data = [NSData dataFromBase64String:cipherText];
    NSData *encryptionKey = [NSData dataFromBase64String:key];
    NSData *IV = [NSData dataFromBase64String:ENCRYPTION_IV];

    RNCryptorEngine *engine = [[RNCryptorEngine alloc] initWithOperation:kCCDecrypt settings:kRNCryptorAES256Settings key:encryptionKey IV:IV error:error];
    [engine addData:data error:error];
    NSData *decryptedData = [engine finishWithError:error];
    NSString *decryptedString = [[NSString alloc] initWithData:decryptedData encoding:NSUTF8StringEncoding];
    NSLog(@"Decrypted: %@", decryptedString);
    return decryptedString;
} 
```

当我使用类似的字符串时，`hello world`它可以正常工作。当我像我想象的那样使用一个字符串时`{"username":"developer","password":"abcdefG*12"}`，它与编码有关，但我真的知道该使用什么。

当我加密该字符串时，我得到一个 base64 字符串，当我尝试解密时，我得到一个空字符串。

**更新**

~~**`:`**由于json 字符串中的 ，它看起来失败了。~~ 更奇怪的是，它仅在字符串为 json 格式时失败，我认为这是我首先尝试的原因`:`，但经过进一步调查，如果我破坏了任何 JSON 要求`,`，它就会停止工作。它适用于但是，所以我不确定我做错了什么。无论哪种方式，我认为我们可以重新设计当前流程`{``}``RNEncryptor`

**更新 2**

这是我调用这些方法的地方：

```
NSDictionary *credentials = @{@"username":@"developer",@"password":@"abcdefG*12"};
NSString *jsonString = [ credentials JSONStringWithOptions:JKSerializeOptionNone error:&error];
NSLog(@"json string: %@", jsonString); //OUTPUTS: {"username":"developer","password":"abcdefG*12"}
CCGEncryption *encryptionObject = [[CCGEncryption alloc] init]; //THIS IS THE OBJECT WHERE THE encrypt/decrypt methods are

NSString *encrypted = [encryptionObject encryptString:jsonString withKey:ENCRYPTION_KEY error:&error];
if(error){
    NSLog(@"Error:%@", error); //NO ERROR
}
NSString *decrypted = [encryptionObject decryptString:encrypted withKey:ENCRYPTION_KEY error:&error];
if(error){
    NSLog(@"Error:%@", error);  //NO ERROR
}
NSLog(@"decrypted: %@", decrypted); //OUTPUT: decrypted: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:38:12.427

您没有收集`addData:`. 引擎会随时加密/解密，这样您就不必将整个明文和密文保存在内存中。除非必须（出于填充原因），否则它不会累积数据。我怀疑正在运行的测试与没有运行的测试的长度不同。

你是正确的，使用固定的 IV 是不好的做法。如果您在多条消息中使用相同的 IV 和密钥，那么攻击者就有可能通过比较密文来恢复您的部分消息。如果您使用没有随机 IV 和 HMAC 的 AES-CBC，那么您的 AES 在几个方面是不安全的。这就是 RNCryptor 旨在解决的问题，以及为什么数据格式看起来如此。

@jbtule 是正确的，我并不是特别希望人们直接使用引擎并且没有大量记录它，但是使用它没有问题，我可以更好地记录它来支持它。也就是说，引擎本身非常简单。我只是将它创建为在加密器和解密器之间共享代码的一种方式。如果您要绕过它提供的大部分安全性，则没有太多理由使用 RNCryptor。对于上面的代码，调用 one-shot 会简单得多`CCCrypt()`。

# regex - 如果前面的文本不是“class=”，则匹配一个单词

> ID：14263011
> 
> 赞同：0
> 
> 时间：2013-01-10T16:48:20.840
> 
> 标签：regex, regex-negation, regex-lookarounds

我正在尝试为搜索创建一个正则表达式，它将查看以下代码并仅返回 id 而不是类：

```
1   id="contact"
2   class="contact"
3   #contact
4   .contact 
```

我想`contact`从第 1 行和第 3 行返回，而不是第 2 行和第 4 行。

这是为了跨多个文件进行搜索，以避免单独检查每个文件并检查它是否需要更改。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:52:44.603

干得好：

```
/(?:#|id=")(\w+)"?/g 
```

以任一开头`#`或`id="`后跟单词字符的字符串。我敢打赌，您可能希望增强它以处理破折号和下划线。

在这种情况下，第一个组是非捕获的，ID 文本将是您的第一个捕获组`$1`。

**更新**

这个：

```
(?:(?<=id=")|(?<=#))(contact) 
```

使用积极的后向查找来查找您的前缀并仅匹配字符串“contact”。这在 JavaScript 中不起作用（因此您无法在线测试它），但可以在文本编辑器或 CLI 工具（如`ack`.

# javascript - nodeJS ejs link_to undefined 不是函数

> ID：14263014
> 
> 赞同：2
> 
> 时间：2013-01-10T16:48:34.863
> 
> 标签：javascript, node.js, express, ejs

我得到的错误是“未定义不是函数”。我认为问题出在 app.local 部分，app.js 大约有 10 行。我是新手，正在学习教程并尝试将翡翠转换为 ejs。我有 ejs 和 express-helpers。我有一些问题已经解决，因为东西贬值了。问题在于link_to。任何想法或任何人都会遇到类似的问题这是我的 app.js

```
var express = require('express');
var helpers = require('express-helpers');
var ArticleProvider = require('./articleprovider-memory').ArticleProvider;

var app = module.exports = express();

app.configure(function(){
  app.locals({
    link_to : helpers.link_to
  });

  app.set('views', __dirname + '/views');
  app.set('view engine', 'ejs');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(require('stylus').middleware({ src: __dirname + '/public' }));
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

var articleProvider= new ArticleProvider();

app.get('/', function(req, res){
    articleProvider.findAll( function(error,docs){
        res.render('index.ejs', {
            title: 'Blog',
            articles:docs
        });
    });
}); 
```

和我的 index.ejs

```
<html>
<body>
        <h1> <%= title %> </h1>
    <% for (var i = 0; i < articles.length; i++) { 
        var article = articles[i]; %>
        <%= created_at = article.created_at %> <br>
        <%= link_to(title, 'blog/'+article._id) %> <br>
        <%= article.body %>
    <% } %>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:16:31.033

答案在这里[https://github.com/tanema/express-helpers](https://github.com/tanema/express-helpers)

我需要

```
require('express-helpers')(); 
```

不知道我需要额外的括号

# android-ndk - 在android ndk项目中添加libpng

> ID：14263016
> 
> 赞同：11
> 
> 时间：2013-01-10T16:48:37.050
> 
> 标签：android-ndk, libpng

我已经搜索了很多关于将 libpng 链接到我的 android ndk 项目的主题，但我找到了解决我的问题的正确答案，我希望有人能帮助我。

这是我的项目的层次结构：

杰尼

```
different_cpp_files
different_hpp_files
Android.mk
libpng
    different_cpp_files
    different_hpp_files
    Android.mk 
```

libpng 文件夹中的 Android.mk：

* * *

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LS_C=$(subst $(1)/,,$(wildcard $(1)/*.c))

LOCAL_MODULE := png

LOCAL_SRC_FILES := \

$(filter-out example.c pngtest.c,$(call LS_C,$(LOCAL_PATH)))

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)

LOCAL_EXPORT_LDLIBS := -lz

include $(BUILD_STATIC_LIBRARY) 
```

* * *

我想一切都在这里..

jni 文件夹中的 Android.mk：

* * *

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LS_CPP=$(subst $(1)/,,$(wildcard $(1)/*.cpp))

LOCAL_MODULE    := pacman

LOCAL_CFLAGS    := -Wno-psabi

LOCAL_SRC_FILES := $(call LS_CPP,$(LOCAL_PATH))

LOCAL_LDLIBS    := -landroid -llog -lEGL -lGLESv1_CM -lOpenSLES

LOCAL_STATIC_LIBRARIES := android_native_app_glue png

include $(BUILD_SHARED_LIBRARY)

$(call import-module,android/native_app_glue)

$(call import-module,libpng) 
```

* * *

最后一行显示我得到了像 native_app_glue lib 一样的 libpng（在 android-ndk 源目录中）现在我想从我的项目中编译 libpng。我需要在 Android.mk 文件中更改什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T17:00:50.893

我有另一种方式给你：

1.  从此处下载所有文件并将其粘贴到系统上任何位置的新文件夹中：
    [https ://github.com/julienr/libpng-android](https://github.com/julienr/libpng-android)

2.  进入文件夹并运行：
    `./build.sh`

3.  `[YOUR_FOLDER]/obj/local/armeabi/libpng.a`
    您将在Copy this file into中获得一个 libpng.a 文件：
    `[YOUR_ANDROID_NDK_FOLDER]/platforms/[ALL_FOLDERS_IN_HERE]/arch-arm/usr/lib/`

4.  现在你可以在你的所有项目中使用 libpng 了：
    `LOCAL_LDLIBS += -lpng`

5.  您只需将其包含在您的 cpp 中：
    `#include <png.h>`

玩得开心！

# css - Twitter Bootstrap 和更少的文件

> ID：14263019
> 
> 赞同：6
> 
> 时间：2013-01-10T16:48:44.280
> 
> 标签：css, twitter-bootstrap, less

我编写了一个登陆页面，只是为了尝试使用较少文件的 Twitter Bootstrap。我不确定我是否按照应有的方式组织了较少的文件。

在我的 index.html 的头部：

```
<link rel="stylesheet/less" type="text/css" href="bootstrap.less" /> 
```

这里是我的 bootstrap.less 的内容

```
// Core variables and mixins
@import "less/variables.less"; // Modify this for custom colors, font-sizes, etc
@import "less/mixins.less";

// CSS Reset
@import "less/reset.less";

// Grid system and page structure
@import "less/scaffolding.less";
@import "less/grid.less";
@import "less/layouts.less";

// Base CSS
@import "less/type.less";

// Utility classes
@import "less/utilities.less"; // Has to be last to override when necessary 
```

在我的文件夹“less”中，我有以下文件

*   实用程序.less
*   实用程序.css
*   变量.less
*   变量.css
*   无网格
*   网格.css
*   无类型
*   布局.less
*   mixins.less
*   脚手架.less
*   重置.less

它们实际上都是使我的登录页面正常工作所必需的，但我不确定这种文件组织是否是最佳解决方案。我对此有点困惑，你能帮我看看我做得好吗？有没有更好的方法来组织文件？

[在这里](http://experiments.hostzi.com/Landing/)你可以看到登陆页面

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T17:22:53.687

你如何组织你的文件完全取决于你，但这是我在开发过程中通常的做法：

```
public/
    css/
        layout.css  (compiled from main.less)
        less/
            main.less  (imports bootstrap/bootstrap.less)
            bootstrap/
                bootstrap.less
                ...etc... 
```

通常 main.less 还会导入 blog.less、forum.less 等文件（取决于站点内容）。这个模式让我可以在 HTML 中包含 layout.css，并通过观察者或按需编译 lesscss。

# java - 我可以从 Java 中使用 Mountain Lion 的通知中心吗？

> ID：14263020
> 
> 赞同：1
> 
> 时间：2013-01-10T16:48:44.233
> 
> 标签：java, macos, user-interface, notifications, integration

我们的应用程序目前使用内部解决方案进行通知。我们使用了一些透明的帧和一点点动画。

但是，对于下一个版本，我们计划在 Windows 和 OS X 上实现更多*的原生通知。*

有什么方法可以从 Java 应用程序向通知中心发送通知？

Java 应用程序将使用 Java 7 的捆绑版本，而不是 Apple 提供的默认 JVM，因为它仍然是 1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:02:21.263

您可以使用可用的 Java 绑定之一与 Growl (growl.info) 集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:37:28.033

是的，您可以通过 JNA 使用通知中心。[这个问题](https://stackoverflow.com/questions/11720652/using-10-8-notification-center-in-java)提供了一个很好的讨论。本质上，您创建一个 .dylib 来包装每个本机方法，为 .dylib 创建一个 Java 接口，并通过 JNA 访问 .dylib。

在我的解决方案中，我成功地包装和使用了[NSUserNotification](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotification_Class/Reference/Reference.html)和[NSUserNotificationCenter](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSUserNotificationCenter_Class/Reference/Reference.html)类中的每个方法。

# sql-server - Grails：如何使用 SQL Server 在 Grails 查询中按多列排序

> ID：14263023
> 
> 赞同：0
> 
> 时间：2013-01-10T16:48:57.693
> 
> 标签：sql-server, grails, sql-order-by

我正在尝试在按**多列排序的****grails**中执行查询，但这似乎不适用于**SQL Server**数据库（适用于 Oracle）。

 ****```
def criteria = DomainObject.createCriteria()
results = criteria.list() {

    or {
        eq("field", valueA)
        eq("field", valueB)
    }

    order("field", "asc")
    order("lastUpdated", "desc")
} 
```

我试图将排序放在“和”子句中。

**更新：**看来我的问题不是由于多列排序失败，而是排序时 Oracle 和 SQL Server 表示 NULL 值的方式。“asc”NULLS 在 SQL Server 上首先出现，但在 Oracle 上最后出现。

我想我需要对返回的 grails 列表进行一些后期处理（排序），但如果有人有更好的想法，将不胜感激。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:12:47.903

我采用了使用多个表的单独方法，因此 NULL 值不会引起任何问题，因为似乎没有任何简单的解决方案。

然而，Hibernate 问题 465（上面链接）现在似乎已经修复：http: [//in.relation.to/Bloggers/HibernateORM420CR1Released](http://in.relation.to/Bloggers/HibernateORM420CR1Released)****

# javascript - 将方程字符串转换为方程

> ID：14263024
> 
> 赞同：4
> 
> 时间：2013-01-10T16:49:11.147
> 
> 标签：javascript

> **可能重复：**
> [在文本字段中使用 Javascript 运行方程式](https://stackoverflow.com/questions/10857726/running-an-equation-with-javascript-from-a-text-field)

如何转换以下内容：

```
var n = "2x^3+3x+6"; 
```

到

```
var x = a number
var n = 2x^3+3x+6; 
```

在 JavaScript 中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T17:06:25.343

很难猜测确切的要求和上下文是什么，但如果你想大致坚持你的变量所展示的语法，我建议使用数学表达式解析器。

使用[js-Expression-eval](https://github.com/silentmatt/js-expression-eval)，它可能看起来像这样：

```
var formula = "2*x^3+3*x+6";
var expression = Parser.parse(formula);
var result = expression.evaluate({ x: 3 }); 
```

运行[小提琴](http://jsfiddle.net/ZBp2D/)

如果您想拥有自己的语法 - 例如，省略 * 符号以与变量相乘 - 您必须滚动自己的解析器，例如使用[jison 之](http://zaach.github.com/jison/)类的东西。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-10T16:53:25.617

```
var x = a number;
var n = eval("2*Math.pow(x,3)+3*x+6") 
```

# javascript - 如何使用图像对表格进行排序 jquery tablesorter

> ID：14263025
> 
> 赞同：5
> 
> 时间：2013-01-10T16:49:10.260
> 
> 标签：javascript, jquery, sorting, tablesorter

我正在尝试对表列进行排序，无论它是否包含`img`。所以我的表格 html 看起来像这样：

```
<table>
<thead>
<th>One</th><th>Two</th><th>Three</th>
</thead>
<tbody>
<tr>
<td><span class="raw"><img src="path/to/image.png" /></span></td>
<td><span class="raw">text 1</span></td>
<td><span class="raw">text 2</span></td>
</tr>
<tr>
<td><span class="raw"></span></td>
<td><span class="raw">text 4</span></td>
<td><span class="raw">text 5</span></td>
</tr>
<tr>
<td><span class="raw"><img src="path/to/image.png" /></span></td>
<td><span class="raw">text 22</span></td>
<td><span class="raw">text 111</span></td>
</tr>
</tbody>
</table> 
```

我将如何对这样的表结构进行排序？排序的最终结果是，图像在顶部或底部的列，反之亦然

我正在使用这个插件：

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T17:24:14.020

Tablesorter 是一个很棒的插件 - 您可以通过定义自己的文本提取函数来按“alt”文本对图像进行排序，如下所示：

```
$("#table_id").tablesorter({
    textExtraction:function(s){
        if($(s).find('img').length == 0) return $(s).text();
        return $(s).find('img').attr('alt');
    }
}); 
```

不包含图像的单元格将按文本排序。

（*）感谢[jQuery 论坛](http://forum.jquery.com/topic/tablesorter-sort-image)的这个答案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T20:01:38.237

最简单的做法是将隐藏内容添加到图像单元格（[演示](http://jsfiddle.net/Mottie/eY8uH/347/)）：

```
$(function () {
  $('table img').each(function () {
    $(this).after('<span style="display:none">1</span>');
  });

  $('table').tablesorter();
}); 
```

此外，由于您看起来像是在进行字母数字排序，您可能想试试我[的 tablesorter 分支](http://mottie.github.com/tablesorter/docs/)。它将在“文本 4”之后正确排序“文本 22”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:22:09.170

```
$("table").tablesorter().on("sortStart",function() { 
                  //prepend a sortable string before the image
            }).on("sortEnd",function() { 
                  //remove added string
         }); 
```

# c# - WPF Dock 面板布局，顶部的扩展器，底部的 Windows 窗体主机和填充

> ID：14263026
> 
> 赞同：0
> 
> 时间：2013-01-10T16:49:13.857
> 
> 标签：c#, .net, wpf, telerik, dockpanel

我试图让我的 Expander 控件出现在我的主页上的 Windows 窗体主机的顶部，并让 Windows 窗体主机填充所有剩余区域。

但是，扩展器出现在它的一侧，而不是顶部。

基本上，这就是我到目前为止所拥有的。我省略了额外的东西。

```
<telerik:RadDockPanel x:Name="LaunchScreenDockPanel" LastChildFill="True">
    <telerik:RadExpander x:Name="UserInfo" ExpandDirection="Up" IsExpanded="True"></telerik:RadExpander>
    <WindowsFormsHost HorizontalAlignment="Stretch" Name="windowsFormsHost1" VerticalAlignment="Stretch" >           
        <wincontrols:RadPanorama x:Name="LaunchPadPanorama" Size="200,400" RowsCount="2" MinimumColumns="2" ShowGroups="True" Dock="Fill"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:27:09.790

尝试这个：

```
<telerik:RadExpander telerik:RadDockPanel.Dock="Top" .../> 
```

# c# - 我正在尝试使用自定义验证器来检查文本框是否为空，然后向用户显示必须填写该字段的消息

> ID：14263027
> 
> 赞同：0
> 
> 时间：2013-01-10T16:49:16.693
> 
> 标签：c#

这就是我所拥有的。我很感激任何建议。

```
protected void CustomValidator4_ServerValidate(object sender, ServerValidateEventArgs e)
{
    string n;
    e.IsValid = string.Empty(e.Value, out n);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:51:19.193

改用 a [`RequiredFieldValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.aspx)。

```
<asp:TextBox id="TextBox1"  runat="server"/>
<asp:RequiredFieldValidator id="RequiredFieldValidator1"
                    ControlToValidate="TextBox1"
                    Display="Static"
                    ErrorMessage="Please enter something here"
                    runat="server"/> 
```

请注意，`CustomValidator`当用户没有输入任何内容时，甚至不会触发。因此，您必须设置[`ValidateEmptyText="True"`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx).

# javascript - 无法使用 jquery 从外部 url 获取 json

> ID：14263032
> 
> 赞同：0
> 
> 时间：2013-01-10T16:49:26.277
> 
> 标签：javascript, ajax, json, jquery

这是我的代码

```
 $.ajax({
    type:"GET", 
    url: "http://fantasy.premierleague.com/web/api/elements/100/", 
    success: function(data) {
            alert(JSON.stringify(data));
        }, 
    error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.status);
        },
   dataType: "json"
}); 
```

但是当我运行它时出现错误`jqXHR.status is 0`。 textStatus 是`Error`并且 errorThrown 是`No Transport`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:03:24.857

您可以尝试使用 Yahoos YQL 作为 JSONP 代理。 [http://developer.yahoo.com/yql/](http://developer.yahoo.com/yql/)

```
$.getJSON("http://query.yahooapis.com/v1/public/yql", {
    q: "select * from json where url=\"http://fantasy.premierleague.com/web/api/elements/100/\"",
    format: "json"
},

function (data) {
    console.log(data.query.results.json.transfers_out);
}); 
```

[http://jsfiddle.net/zZy77/](http://jsfiddle.net/zZy77/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:52:42.323

这是不可能的，因为您正在尝试发出跨域请求。

您可能想查看 JSONP 作为解决方案。

看看这个[http://remysharp.com/2007/10/08/what-is-jsonp/](http://remysharp.com/2007/10/08/what-is-jsonp/)

# html - 锚标签在几个月后停止工作并且没有改变

> ID：14263035
> 
> 赞同：-3
> 
> 时间：2013-01-10T16:49:37.057
> 
> 标签：html, http, anchor

我创建了一个带有锚标签的常见问题列表。他们已经工作了几个月。前几天我去检查了所有东西，他们没有工作。他们开始将我重定向到我的主页。我使用了一个名称，所以我将其更改为 h3 id，但仍然无法正常工作。什么是交易？

```
<h2>
    Frequently Asked Questions</h2>
<p>
    <strong><a href="#Question3">sample question?</a></strong></p>
<p>

<h2>Answers</h2>
<p>
    <h3 id="Question3">sample question?</h3></p> 
```

这是我被重定向的地方（我们的主页）：

> `http://www.newhorizonsinc.com/index.php#Question3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:05:48.520

您的常见问题解答页面`<base href="http://www.newhorizonsinc.com/index.php" />`位于头部。

所有链接都将相对于那里而不是`http://www.newhorizonsinc.com/index.php?option=com_content&view=article&id=78:foster-faqs&catid=2:new-horizons`

# c# - 页面上的标签栏 - Metro App

> ID：14263047
> 
> 赞同：0
> 
> 时间：2013-01-10T16:50:06.047
> 
> 标签：c#, xaml, tabs, microsoft-metro, tabbar

我想在页面上创建一个标签栏；标签栏由 2 个或更多按钮组成，这些按钮在同一页面上加载不同的内容（表单或表格）。我怎样才能做到这一点？谢谢你。

我从 Microsoft Windows 商店应用程序开发部分下载了一些项目示例；其中一些有一个类似的标签栏解决方案。我正在研究代码，但我想在示例或文档方面有一些替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:07:28.427

我认为这个解决方案是合理的：[http](http://blog.davemdavis.net/2012/10/03/simulating-a-tab-control-in-a-windows-8-application/) ://blog.davemdavis.net/2012/10/03/simulating-a-tab-control-in-a-windows-8-application/您可能需要调整它。但他为你做了很多工作。

如果是我，我会做更多这样的事情：

```
<Grid Width="400" Height="500">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100" />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Rectangle Grid.Column="0" Fill="SteelBlue" />
    <ListBox x:Name="ItemList" Margin="0,50,0,0"
                xmlns:sys="clr-namespace:System;assembly=mscorlib">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}" Margin="10" />
            </DataTemplate>
        </ListBox.ItemTemplate>
        <sys:String>One</sys:String>
        <sys:String>Two</sys:String>
        <sys:String>Three</sys:String>
        <sys:String>Four</sys:String>
        <sys:String>Five</sys:String>
    </ListBox>
    <!-- http://msdn.microsoft.com/en-us/library/ms742554(v=vs.85).aspx -->
    <Rectangle Grid.Column="1" Fill="LightSteelBlue" x:Name="RightArea" />
    <ContentControl Content="{Binding SelectedItem, ElementName=ItemList}" 
            Style="{StaticResource ContentControlStyle2}" Grid.Column="1">
        <ContentControl.ContentTemplate>
            <DataTemplate>
                <Grid Width="300" Height="500">
                    <TextBlock Text="{Binding}" Margin="40" 
                        FontSize="50" Foreground="Black" />
                </Grid>
            </DataTemplate>
        </ContentControl.ContentTemplate>
    </ContentControl>
</Grid> 
```

看起来像这样：

![在此处输入图像描述](../Images/94ed935fe403103b6d8b8f3ed8c79f9e.png)

祝你好运！

# android - 调用 setListAdapter 时 SherlockListFragment 不更新

> ID：14263048
> 
> 赞同：0
> 
> 时间：2013-01-10T16:50:07.060
> 
> 标签：android, android-fragments, actionbarsherlock, android-arrayadapter, android-listfragment

对于我的 SherlockListFragment，我有以下代码，

```
public class RoutesListFragment extends SherlockListFragment {

    private ArrayList<Route> mItems;
    private static final String TAG = "ROUTES LIST";

    RoutesAdapter mAdapter;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstaceState) {

        View view = inflater.inflate(R.layout.fragment_main_lists, container,
                false);

            // When the setListAdapter is called here,
            // it works without any problems

        return view;
    }

    public void updateAdapter() {
        // populate the list
        mItems = Route.getRouteList();
        Log.d(TAG, "Size of mItems : " + mItems.size());
        mAdapter = new RoutesAdapter(getActivity(), R.layout.list_item_routes,
                mItems);

        this.setListAdapter(mAdapter);

    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Log.d(TAG, "Clicked item " + position);
    }

    private class RoutesAdapter extends ArrayAdapter<Route> {

        private ArrayList<Route> mItems;
        private Context mContext;
        int mTextViewResource;

        public RoutesAdapter(Context context, int textViewResource,
                ArrayList<Route> items) {
            super(context, textViewResource);

            this.mItems = items;
            this.mContext = context;
            this.mTextViewResource = textViewResource;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = convertView;

            if (view == null) {
                LayoutInflater inflater = (LayoutInflater) mContext
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = inflater.inflate(mTextViewResource, null);
            }

            Route route = mItems.get(position);

            ((TextView) view.findViewById(R.id.route_name)).setText(route
                    .getRouteName());
            ((TextView) view.findViewById(R.id.route_number)).setText(Integer
                    .toString(route.getRouteNumber()));
            ((TextView) view.findViewById(R.id.direction)).setText(route
                    .getDirection().toString());
            ((TextView) view.findViewById(R.id.start_end)).setText(route
                    .getStartingStop() + " - " + route.getEndingStop());

            return view;
        }

    }
} 
```

# 更多细节

*   我已经检查以确保它`ArrayList<Route> mItems`不为空。

*   该`updateAdapter()`函数`onPostExecute`从`AsyncTask`.

*   这`SherlockListFragment`在`ViewPagerIndicator`选项卡中使用。

*   它在`setListAdapter() is called from the`onCreateView`` 函数时起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:52:38.677

您可以更改适配器中的数组，然后调用

适配器.notifyDataSetChanged();

而不是创建一个新的适配器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:30:51.353

我必须添加到 jiduvah 的答案。

显然它`ArrayAdapter`有它自己的项目副本`ArrayList<Route>`。所以。我必须先打电话`mAdapter.addAll(Route.getRouteList())`再打电话`mAdapter.notifyAll()`。

现在`updateAdapter`函数的代码是。

```
public void updateAdapter() {
    mAdapter.addAll(Route.getRouteList());
    mAdapter.notifyDataSetChanged();
} 
```

**参考**

[列表视图未使用 notifydatasetchanged() 调用进行更新](https://stackoverflow.com/questions/9747553/listview-not-updating-with-notifydatasetchanged-call)

# python - 使用 python 和 PIL 分割图像以计算多个矩形对象的质心和旋转

> ID：14263050
> 
> 赞同：4
> 
> 时间：2013-01-10T16:50:10.890
> 
> 标签：python, image-processing, python-imaging-library, image-segmentation

我正在使用 python 和 PIL 在 640x480 图像中查找各种矩形（和正方形）的质心和旋转，类似于这个![在此处输入图像描述](../Images/a7cb488174534038a6a7468a011689ba.png)

到目前为止，我的代码适用于图像中的单个矩形。

```
import Image, math

def find_centroid(im):
    width, height = im.size
    XX, YY, count = 0, 0, 0
    for x in xrange(0, width, 1):
        for y in xrange(0, height, 1):
            if im.getpixel((x, y)) == 0:
                XX += x
                YY += y
                count += 1
    return XX/count, YY/count

#Top Left Vertex
def find_vertex1(im):
    width, height = im.size
    for y in xrange(0, height, 1):
        for x in xrange (0, width, 1):
            if im.getpixel((x, y)) == 0:
                X1=x
                Y1=y
                return X1, Y1

#Bottom Left Vertex
def find_vertex2(im):
    width, height = im.size
    for x in xrange(0, width, 1):
        for y in xrange (height-1, 0, -1):
            if im.getpixel((x, y)) == 0:
                X2=x
                Y2=y
                return X2, Y2

#Top Right Vertex
def find_vertex3(im):
    width, height = im.size
    for x in xrange(width-1, 0, -1):
        for y in xrange (0, height, 1):
            if im.getpixel((x, y)) == 0:
                X3=x
                Y3=y
                return X3, Y3

#Bottom Right Vertex
def find_vertex4 (im):
    width, height = im.size
    for y in xrange(height-1, 0, -1):
        for x in xrange (width-1, 0, -1):
            if im.getpixel((x, y)) == 0:
                X4=x
                Y4=y
                return X4, Y4

def find_angle (V1, V2, direction):
    side1=math.sqrt(((V1[0]-V2[0])**2))
    side2=math.sqrt(((V1[1]-V2[1])**2))
    if direction == 0:
        return math.degrees(math.atan(side2/side1)), 'Clockwise'
    return 90-math.degrees(math.atan(side2/side1)), 'Counter Clockwise'

#Find direction of Rotation; 0 = CW, 1 = CCW
def find_direction (vertices, C):
    high=480
    for i in range (0,4):
        if vertices[i][1]<high:
            high = vertices[i][1]
            index = i
    if vertices[index][0]<C[0]:
        return 0
    return 1

def main():
    im = Image.open('hopperrotated2.png')
    im = im.convert('1') # convert image to black and white
    print 'Centroid ', find_centroid(im)
    print 'Top Left ', find_vertex1 (im)
    print 'Bottom Left ', find_vertex2 (im)
    print 'Top Right', find_vertex3 (im)
    print 'Bottom Right ', find_vertex4 (im)
    C = find_centroid (im)
    V1 = find_vertex1 (im)
    V2 = find_vertex3 (im)
    V3 = find_vertex2 (im)
    V4 = find_vertex4 (im)
    vertices = [V1,V2,V3,V4]
    direction = find_direction(vertices, C)
    print 'angle: ', find_angle(V1,V2,direction)

if __name__ == '__main__':
  main() 
```

我遇到问题的地方是图像中有多个对象。

我知道 PIL 有一个 find_edges 方法，它只给出边缘的图像，但我不知道如何使用这个新的边缘图像将图像分割成单独的对象。

```
from PIL import Image, ImageFilter

im = Image.open('hopperrotated2.png')

im1 = im.filter(ImageFilter.FIND_EDGES)
im1 = im1.convert('1')
print im1
im1.save("EDGES.jpg") 
```

如果我可以使用边缘将图像分割成单独的矩形，那么我可以在每个矩形上运行我的第一个代码来获得质心和旋转。

但更好的是能够使用边缘来计算每个矩形的旋转和质心，而无需拆分图像。

非常感谢大家的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:47:48.890

您需要在找到角落之前识别每个对象。您只需要对象的边框，因此您也可以减少初始输入。然后只需按照每个不同的边界找到你的角，在你知道每个不同的边界后直接找到质心。

使用下面的代码，您会得到以下结果（质心是红点，白色文本是旋转度数）：

![在此处输入图像描述](../Images/6296af9d82aad4ea98652bd76af11ae7.png)

请注意，您的输入不是二进制的，因此我为此使用了一个非常简单的阈值。此外，以下代码是实现此目的的最简单方法，任何体面的库中都有更快的方法。

```
import sys
import math
from PIL import Image, ImageOps, ImageDraw

orig = ImageOps.grayscale(Image.open(sys.argv[1]))
orig_bin = orig.point(lambda x: 0 if x < 128 else 255)
im = orig_bin.load()

border = Image.new('1', orig.size, 'white')
width, height = orig.size
bim = border.load()
# Keep only border points
for x in xrange(width):
    for y in xrange(height):
        if im[x, y] == 255:
            continue
        if im[x+1, y] or im[x-1, y] or im[x, y+1] or im[x, y-1]:
            bim[x, y] = 0
        else:
            bim[x, y] = 255

# Find each border (the trivial dummy way).
def follow_border(im, x, y, used):
    work = [(x, y)]
    border = []
    while work:
        x, y = work.pop()
        used.add((x, y))
        border.append((x, y))
        for dx, dy in ((1, 0), (-1, 0), (0, 1), (0, -1),
                (1, 1), (-1, -1), (1, -1), (-1, 1)):
            px, py = x + dx, y + dy
            if im[px, py] == 255 or (px, py) in used:
                continue
            work.append((px, py))

    return border

used = set()
border = []
for x in xrange(width):
    for y in xrange(height):
        if bim[x, y] == 255 or (x, y) in used:
            continue
        b = follow_border(bim, x, y, used)
        border.append(b)

# Find the corners and centroid of each rectangle.
rectangle = []
for b in border:
    xmin, xmax, ymin, ymax = width, 0, height, 0
    mean_x, mean_y = 0, 0
    b = sorted(b)
    top_left, bottom_right = b[0], b[-1]
    for x, y in b:
        mean_x += x
        mean_y += y
    centroid = (mean_x / float(len(b)), mean_y / float(len(b)))
    b = sorted(b, key=lambda x: x[1])
    curr = 0
    while b[curr][1] == b[curr + 1][1]:
        curr += 1
    top_right = b[curr]
    curr = len(b) - 1
    while b[curr][1] == b[curr - 1][1]:
        curr -= 1
    bottom_left = b[curr]

    rectangle.append([
        [top_left, top_right, bottom_right, bottom_left], centroid])

result = orig.convert('RGB')
draw = ImageDraw.Draw(result)
for corner, centroid in rectangle:
    draw.line(corner + [corner[0]], fill='red', width=2)
    cx, cy = centroid
    draw.ellipse((cx - 2, cy - 2, cx + 2, cy + 2), fill='red')
    rotation = math.atan2(corner[0][1] - corner[1][1],
            corner[1][0] - corner[0][0])
    rdeg = math.degrees(rotation)
    draw.text((cx + 10, cy), text='%.2f' % rdeg)

result.save(sys.argv[2]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T00:56:39.493

这是一个示例，说明如何通过标记图像来做到这一点，然后将质心作为中心，这一切都内置在[scipy](http://docs.scipy.org/doc/scipy/reference/ndimage.html)中的 ndimage 中（以及一堆其他很酷的图像内容）。对于角度，我使用了矩形角截距和边界切片的边缘。

```
import numpy as np
import scipy
from scipy import ndimage

im = scipy.misc.imread('6JYjd.png',flatten=1)
im = np.where(im > 128, 0, 1)
label_im, num = ndimage.label(im)
slices = ndimage.find_objects(label_im)
centroids = ndimage.measurements.center_of_mass(im, label_im, xrange(1,num+1))

angles = []
for s in slices:
    height, width = label_im[s].shape
    opp = height - np.where(im[s][:,-1]==1)[0][-1] - 1
    adj = width - np.where(im[s][-1,:]==1)[0][0] - 1
    angles.append(np.degrees(np.arctan2(opp,adj)))
print 'centers:', centroids
print 'angles:', angles 
```

输出：

```
centers: [(157.17299748926865, 214.20652790151453), (219.91948280928594, 442.7146635321775), (363.06183745583041, 288.57169725293517)]
angles: [7.864024795499545, 26.306963825741803, 7.937188000622946] 
```

# google-visualization - Google 可视化 API - 堆积条形图 - 自定义工具提示

> ID：14263051
> 
> 赞同：9
> 
> 时间：2013-01-10T16:50:18.440
> 
> 标签：google-visualization

我一直在尝试为堆积条形图获取自定义工具提示。

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Units');
data.addColumn('number', '1');
data.addColumn('number', '2');
data.addColumn('number', '3');
data.addColumn('number', '4');

_1 = 0.123
_2 = 0.23
_3 = 0.3
_4 = 0

data.addRow([_units, _1, _2, _3, _4,]);

var options = {
        isStacked: true,
        height: 150,
        chartArea: { height: 50 },
        legend: { position: 'top' },
};

bchart = new google.visualization.BarChart(bcontainer);
bchart.draw(data, options); 
```

那么我的问题是如何为每个：_1、_2、_3、_4 创建一个工具提示？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T00:21:45.290

[这在DataTable Roles](https://developers.google.com/chart/interactive/docs/roles#tooltiprole)下的 Google 文档中有所介绍

在条形图文档中，它[在此处解释了该图表可用的角色](https://developers.google.com/chart/interactive/docs/gallery/barchart#Data_Format)

您需要做的是向您的数据添加额外的列并添加 {role: tooltip}，该列显示您希望工具提示说的内容。

例如：

```
 var data = new google.visualization.DataTable();
  data.addColumn('string', 'Year');
  data.addColumn('number', 'Sales');
  data.addColumn({type: 'string', role: 'tooltip'});
  data.addColumn('number', 'Expenses');
  data.addColumn({type: 'string', role: 'tooltip'});
  data.addRows([
    ['2004', 1000, '1M$ sales in 2004', 400,  '$0.4M expenses in 2004'],
    ['2005', 1170, '1.17M$ sales in 2005', 460, '$0.46M expenses in 2005'],
    ['2006', 660,  '.66$ sales in 2006', 1120, '$1.12M expenses in 2006'],
    ['2007', 1030, '1.03M$ sales in 2007', 540, '$0.54M expenses in 2007']
  ]); 
```

最终代码将如下所示：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('string', 'Year');
  data.addColumn('number', 'Sales');
  data.addColumn({type: 'string', role: 'tooltip'});
  data.addColumn('number', 'Expenses');
  data.addColumn({type: 'string', role: 'tooltip'});
  data.addRows([
    ['2004', 1000, '1M$ sales in 2004', 400,  '$0.4M expenses in 2004'],
    ['2005', 1170, '1.17M$ sales in 2005', 460, '$0.46M expenses in 2005'],
    ['2006', 660,  '.66$ sales in 2006', 1120, '$1.12M expenses in 2006'],
    ['2007', 1030, '1.03M$ sales in 2007', 540, '$0.54M expenses in 2007']
  ]);

  // Create and draw the visualization.
  new google.visualization.BarChart(document.getElementById('visualization')).
      draw(data,
           {title:"Yearly Coffee Consumption by Country",
            isStacked: true,
            width:600, height:400,
            vAxis: {title: "Year"},
            hAxis: {title: "Sales"}}
      );
} 
```

[请参阅此处](http://jsfiddle.net/N6yhZ/1/)的示例。

# php - jquery ui可排序插件不保存到数据库

> ID：14263055
> 
> 赞同：1
> 
> 时间：2013-01-10T16:50:25.980
> 
> 标签：php, ajax, jquery-ui, jquery

好的，这应该相当简单，但我发现它很难。我在[http://www.xmech.net/programming/jquery-ui-sortable-tutorial/](http://www.xmech.net/programming/jquery-ui-sortable-tutorial/)上找到了一个很好的可排序示例，它使用 jquery ui 对列表进行排序并将其保存到数据库中。

我的允许您拖放但不保存到数据库。这是我的 jquery 函数

```
 <script type="text/javascript"> 
 $(document).ready(function(){
$("#menu-pages").sortable({
update: function(event, ui) {
    $.post("sortable.php", {type: "orderPages", pages: $('#menu-  pages').sortable('serialize') });
}
 });
 });
 </script> 
```

和我的 php / html

```
 <ul class="menu" id="menu-pages">
   <?php
   mysql_select_db($database_dbconnet, $dbconnet);
    $resultq = mysql_query("SELECT * FROM `section` ORDER BY `sectorder` ASC", $dbconnet) or die(mysql_error());

   while($row = mysql_fetch_array($resultq)){
    printf('<li id="page_%s">%s</li>', $row['idsect'], $row['sectname']);
}
   ?>

  </ul> 
```

和我的名为 sortable.php 的 php 文件

```
 require('../../../Connections/dbconnet.php');
   parse_str($_POST['pages'], $pageOrder);
    foreach ($pageOrder['pages'] as $key => $value) {
mysql_select_db($database_dbconnet, $dbconnet);
     mysql_query("UPDATE `section` SET `sectorder` = '$key' WHERE `idsect` = '$value'",     $dbconnet) or die(mysql_error());
  } 
```

如您所见，我什至尝试保持与示例相同的名称，但我无法做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:08:02.967

在查看您的 jQuery 时，您似乎正在发布 JSON。我猜这`$_POST`没有被填充，因为它只会自动填充以表单编码格式接收的帖子。您需要读取 PHP 原始输入以获取 JSON 字符串，然后您需要将该 JSON 字符串解码为一个对象。那将是这样的：

```
$json = file_get_content('php://input');
$object = json_decode($json);
$type = $object->type;
$pages = $object->pages; 
```

在发布问题之前，您应该始终至少进行一些基本的调试尝试，因为我想 $_POST 为空的事实至少可以让您将问题集中在手头的问题上（即这与任何可排序的问题都无关或数据库）。

# c++ - SDL_GetKeyState() 的奇怪行为

> ID：14263060
> 
> 赞同：0
> 
> 时间：2013-01-10T16:50:51.963
> 
> 标签：c++, sdl

我正在尝试使用 SDL 在 C++ 中编写 Pong 克隆。基本上，我写了一个简单的引擎来处理渲染和更新

```
void Player::update(Uint32 ticks, SDL_Event *event, Uint8 *keys)
{

if(keys[SDLK_UP])
{
    if(m_bounds.y > 0)
        m_bounds.y -= 2.0f * (ticks / 1000.0f);
}

else if(keys[SDLK_DOWN])
{
    if(m_bounds.y < (windowInfo.getHeight() - m_bounds.h))
        m_bounds.y += 2.0f * (ticks / 1000.0f);
}
} 
```

问题是当我按下 UP 键时，一切都像一个魅力，但当我按下 DOWN 键时，它根本不起作用。我尝试了所有方法，几个小时后我注意到，当我删除刻度并仅添加 2.0f 时，它可以工作，但我不知道为什么，因为 UP 键的条件看起来完全一样，除了它添加，而不是减法。我一直在尝试解决这个问题几个小时，但仍然没有解决它。你知道可能出了什么问题吗？

为了完整起见，我附上了一些调用 Player::update 函数的代码，以便您了解更多。

```
void Engine::update()
{
++m_numOfFrames;
m_elapsedTime = SDL_GetTicks() - m_startTime;

while(SDL_PollEvent(&m_event))
{
    if(m_event.type == SDL_QUIT)
    {
        m_isRunning = false;
    }
}

if(m_keys[SDLK_ESCAPE])
{
    m_isRunning = false;
}

for(Entity *entity : m_entities)
{
    entity->update(m_elapsedTime, &m_event, m_keys);
}

m_startTime = SDL_GetTicks();
SDL_PumpEvents();
} 
```

编辑：我稍微编辑了代码以查看所有值，代码现在看起来像这样：

```
if(keys[SDLK_UP])
{
    if(m_bounds.y > 0)
    {
        m_bounds.y -= 2.0f * (ticks / 1000.0f);
        std::cout << 2.0f * (ticks / 1000.0f) << " value of Y:" << m_bounds.y << std::endl;
    }
}

else if(keys[SDLK_DOWN])
{
    if(m_bounds.y < (windowInfo.getHeight() - m_bounds.h))
    {
        m_bounds.y += 2.0f * (ticks / 1000.0f);
        std::cout << 2.0f * (ticks / 1000.0f) << " value of Y:" << m_bounds.y << std::endl;
    }
} 
```

控制台中的结果对于两者来说几乎相同，除了 DOWN 条件之外， 的值`m_bounds.y`根本没有改变，它总是相同的，尽管它被添加了更高的一行。错误必须在这一行：

```
m_bounds.y += 2.0f * (ticks / 1000.0f); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:08:56.310

几周前我完成了游戏，我想我应该分享导致这种奇怪行为的原因，以防万一有人遇到相同或类似的问题。

基本上，`talles`在他的评论中是正确的，问题是 X 和 Y 变量的类型是 Sint16，它导致了一些问题 - 解决方案很简单 -**我创建了一个结构 Vector2f 并将浮点数映射到 Sint16。**

# jquery - Xajax 和 Jquery

> ID：14263061
> 
> 赞同：0
> 
> 时间：2013-01-10T16:50:58.657
> 
> 标签：jquery, settimeout, delayed-execution, xajax

我有一个在 xajax 中实现分页的页面。每行有 3 列用于用户可以选择的单选按钮（请参阅随附的示例布局以了解）。然后当我从第 1 页选择并移动到第 2 页时，应该保留该值。如果我回到第 1 页，我可以看到我所做的选择。 ![在此处输入图像描述](../Images/071040785a98f027e49eec3f99efcb98.png)

我有一个代码可以处理从第 1 页到另一页的值选择。

```
$('.pagination_wrapper').live('click', function(){                      
            $(document).ready(function(){
                var my_option_1 $('#sel_option_1_val').val();
                var my_option_2= $('#sel_option_2_val').val();  
                var my_option_3= $('#sel_option_3_val').val();              
                $('[type="radio"][name="sel_option_1_val_option"][value="'+my_option_1+'"]').attr('checked','checked');
                $('[type="radio"][name="sel_option_2_val_option"][value="'+my_option_2+'"]').attr('checked','checked');
                $('[type="radio"][name="sel_option_3_val_option"][value="'+my_option_3+'"]').attr('checked','checked');             
            });
        }); 
```

现在我的问题是，当我从第 1 页移动到另一个单选按钮时，即使它在表列表中也没有被选中，因为 xajax 请求尚未完成，但 jquery 已经执行了选择。在函数中添加警报将使其正常工作，因为 dom 已经加载并且在执行此部分之前 $('[type="radio"][name="sel_option_1_val_option"][value="'+my_option_1+'"] ').attr('checked','checked');

这是带有警报的代码：

```
$('.pagination_wrapper').live('click', function(){                      
            $(document).ready(function(){
                var my_option_1 $('#sel_option_1_val').val();
                var my_option_2= $('#sel_option_2_val').val();  
                var my_option_3= $('#sel_option_3_val').val();  
alert('test');              
                $('[type="radio"][name="sel_option_1_val_option"][value="'+my_option_1+'"]').attr('checked','checked');
                $('[type="radio"][name="sel_option_2_val_option"][value="'+my_option_2+'"]').attr('checked','checked');
                $('[type="radio"][name="sel_option_3_val_option"][value="'+my_option_3+'"]').attr('checked','checked');             
            });
        }); 
```

关于我需要做什么以便只有在 xajax 请求完成后才会执行单选按钮的选择的任何想法？我试过 setTimeout(), jquery.load 但它仍然不能工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:02:56.437

我能够自己修复它。将我的 xajax 请求配置为同步。

# java - 在javascript中评估对象是否为空

> ID：14263062
> 
> 赞同：0
> 
> 时间：2013-01-10T16:50:58.940
> 
> 标签：java, jquery, struts2

我的操作指定了一个电子邮件地址：

```
private String email;
public String getEmail() {
  return email;
} 
```

但有时，该操作无法填写电子邮件，使其保持为空。如何在 jquery 中评估这种情况？
这样的事情肯定没有帮助：

```
<script type="text/javascript">
  $(document).ready(function() {
    if (${email}) {
      //do something
    } else {
      //do another thing
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:10:54.757

Javascript：

```
var myVar = "${email}";
if (myVar !== "") {
} else {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:54:31.107

[您可以使用https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)检查变量`typeof`

# ruby-on-rails - 如何在 Rails 3.2.11 中转储整个数据库中的数据？

> ID：14263065
> 
> 赞同：2
> 
> 时间：2013-01-10T16:51:02.503
> 
> 标签：ruby-on-rails

在 Django 中，我运行以下命令将整个数据库转储到 json 文件中：

```
django-admin.py dumpdata > data.json 
```

Rails 3.2.11 中的上述内容是什么？我尝试了以下命令，但它们不起作用：

```
rake db:data:dump_dir dir="my_dir"
rake db:fixtures:dump 
```

上面的错误信息是：

```
user:~/blog$ rake db:fixtures:dump
rake aborted!
Don't know how to build task 'db:fixtures:dump'
/home/user/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
/home/user/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>'
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T22:19:38.293

您可以尝试[https://github.com/jetthoughts/yaml_db](https://github.com/jetthoughts/yaml_db)这是原始 yaml_db [https://github.com/adamwiggins/yaml_db的一个分支](https://github.com/adamwiggins/yaml_db)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:22:21.957

Rails 具有模式转储功能 ( `rake db:schema:dump`)，但没有内置数据转储功能。

你用的是什么数据库？使用 MySQL，您只需执行`mysqldump`.

**编辑：**

如果你想从一个模型中转储 JSON 数据（假设它不是大量数据），你可以这样做：

`MyModel.all.to_json`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:31:34.483

根据评论，此截屏视频适合您：[#342 Migrating to PostgreSQL](http://railscasts.com/episodes/342-migrating-to-postgresql)。它使用[水龙头](https://github.com/ricardochimal/taps)宝石。

# c# - 十进制字段未反序列化，而整数值工作正常

> ID：14263067
> 
> 赞同：1
> 
> 时间：2013-01-10T16:51:06.197
> 
> 标签：c#, .net, xml-deserialization

样本 Xml：

```
<TestXML>
   <TestDecimal attr1="Required" attr2="false">0.34</TestDecimal>
   <TestInteger attr1="MyAttr" attr2="1" DateAdded="">25</TestInteger>
</TestXML> 
```

类定义：

```
public class TestXML {
   public DecimalValue TestDecimal;
   public IntegerValue TestInteger;
}

public class IntegerValue {
   [XmlText]
   public int value {get; set;}
   [XmlAnyAttribute]
   public XmlAttribute[] XAttributes {get; set;}
}
public class DecimalValue {
   [XmlText]
   public decimal value {get; set;}
   [XmlAnyAttribute]
   public XmlAttribute[] XAttributes {get; set;}
} 
```

反序列化代码：

```
XmlSerializer serializer = new XmlSerializer(typeof(TestXML));
using (FileStream fs = new FileStream(@"C:\Test.xml", FileMode.Open)) {
   TestXML myxml = (TestXML)serializer.Deserialize(fs);
} 
```

在测试中，它返回整数值而不是十进制值：

```
myxml
   TestDecimal
      value |  0
      XAttributes  {string[2]}
         [0] Name="attr1", Value="Required"
         [1] Name="attr2", Value="false"
   TestInteger
      value |  25
      XAttributes  {string[3]}
         [0] Name="attr1", Value="MyAttr"
         [1] Name="attr2", Value="1"
         [2] Name="DateAdded", Value="" 
```

反序列化小数是否会导致它返回为 0？使用原始类型的小数，十进制值可以正常返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:09:10.623

您在实际代码中所做的事情必须与您在此处显示的内容不同。您的代码不会像发布的那样编译 - 特别是类定义在 C# 中的名称后没有 ()。

这按预期对我有用（十进制值被正确反序列化）：

```
using System;
using System.Diagnostics;
using System.Net;
using System.Net.Sockets;
using System.Xml;
using System.Xml.Serialization;
using System.IO;

namespace Test
{

    public class TestXML
    {
        public DecimalValue TestDecimal;
        public IntegerValue TestInteger;
    }

    public class IntegerValue
    {
        [XmlText]
        public int value {get; set;}
        [XmlAnyAttribute]
        public XmlAttribute[] XAttributes {get; set;}
    }

    public class DecimalValue
    {
        [XmlText]
        public decimal value {get; set;}
        [XmlAnyAttribute]
        public XmlAttribute[] XAttributes {get; set;}
    }

    class Program
    {

        static void Test()
        {
            XmlSerializer serializer = new XmlSerializer(typeof(TestXML));
            using (FileStream fs = new FileStream("Test.xml", FileMode.Open)) 
            {
                TestXML myxml = (TestXML)serializer.Deserialize(fs);
            }

        }

        static void Main(string[] args)
        {
            Test();
        }
    }
} 
```

这是将本地 test.xml 文件复制到包含此数据的 bin 目录中：

```
<TestXML>
    <TestDecimal attr1="Required" attr2="false">0.34</TestDecimal>
    <TestInteger attr1="MyAttr" attr2="1" DateAdded="">25</TestInteger>
</TestXML> 
```

# ruby - 如何将字符串与带有续集的表字段连接起来

> ID：14263069
> 
> 赞同：1
> 
> 时间：2013-01-10T16:51:08.130
> 
> 标签：ruby, concatenation, concat, sequel

我想用 Sequel 版本替换旧的 sql 语句，并且在创建连接字段时遇到问题。

一个例子：

```
require 'sequel'
DB = Sequel.sqlite
DB.create_table(:test){
  field :text, :type => :nvarchar, :size => 5
}
DB[:test].insert('aa')
DB[:test].insert('bb')
DB[:test].insert('cc')

sel = DB[:test].select(
  (:text + '1' ).as(:concat)
  )
puts sel.sql
puts sel.all 
```

这工作正常，结果是：

```
SELECT (`text` || '1') AS 'concat' FROM `test`
{:concat=>"aa1"}
{:concat=>"bb1"}
{:concat=>"cc1"} 
```

我的问题：我需要'1aa'。使用 SQL 没有问题：

```
puts DB.fetch("SELECT ('1' || `text`) AS 'concat' FROM `test`").all 
```

但是使用 ruby​​ 我得到一个语法错误（`can't convert Symbol into String (TypeError)`：

```
sel = DB[:test].select(
  ('1' + :text).as(:concat)
  ) 
```

有趣的是，这再次起作用：

```
sel = DB[:test].select(
  (:text + '1' + :text).as(:concat)
  )
puts sel.sql
puts sel.all 
```

但是我怎样才能连接一个字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T16:51:08.130

只需查看字符串运算符的[Sequels 文档](http://sequel.rubyforge.org/rdoc/files/doc/sql_rdoc.html)

```
sel = DB[:test].select(
  Sequel.join(['1', :text]).as(:concat)
  )
puts sel.sql
puts sel.all 
```

（备注：[回答你自己的问题是一件好事](https://meta.stackexchange.com/questions/2706/posting-and-answering-questions-you-have-already-found-the-answer-to)——我需要一些时间来得到它）。

# ios - 如何将 NSDictionaryResults 转换为 NSManagedObject，

> ID：14263072
> 
> 赞同：2
> 
> 时间：2013-01-10T16:51:12.140
> 
> 标签：ios, core-data, nsdictionary, nsmanagedobject

我有以下代码，它使用 carparts 从数据库中提取汽车。但是我遇到了重复，所以我启用了具有唯一结果的 NSDictionaryResultsType（我认为这是摆脱重复的唯一方法）。

现在我相信我有一系列字典而不是 Car 对象。如何根据我的结果获取汽车对象？

```
-(NSArray*) loadCarsFromCoreDataUsingCarParts:(NSMutableArray*)inputCarParts{
    NSLog(@"carParts =%@",inputCarParts);
    NSFetchRequest *fetchRequest =[[NSFetchRequest alloc]init];
    //To find the cars we are using the carParts
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Car" inManagedObjectContext:[self managedObjectContext]];

    //sets up fetch request details
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:[self parseSearchObjectsIntoAPredicate:inputCarParts:3]];
    [fetchRequest setReturnsDistinctResults:YES];
    [fetchRequest setResultType:NSDictionaryResultType];

    //Perform fetch
    NSError *error;
    NSArray *records = [[self managedObjectContext] executeFetchRequest:fetchRequest error:&error];
    return records;//i think this is an array of dictionaries
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:13:11.373

您还可以`objectID`使用如下谓词获取和检索对象

```
[NSPredicate predicateWithFormat:@"objectID IN %@", objectIDs] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:57:15.217

您可以使用 [NSManagedObject setValuesForKeysWithDictionary:]

更多信息：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)

# c# - MSDN 的多页打印示例似乎无法正常工作

> ID：14263075
> 
> 赞同：1
> 
> 时间：2013-01-10T16:51:20.897
> 
> 标签：c#, .net, winforms, visual-studio, printing

我正在关注 MSDN 关于打印多页的“操作方法”文档：[如何：在 Windows 窗体中打印多页文本文件](http://msdn.microsoft.com/en-us/library/cwbe712d%28v=vs.100%29.aspx)

我已经将该页面上的示例变成了一个项目（尝试了 Visual Studio 2010 和 2012），发现它在打印少量页面时按预期工作，但是在打印大量页面（大约 9 页）时它开始呈现开始页为空白（第一页和第二页为空白，接下来的 15 页是正确的，等等）。

任何人都可以确认这种行为吗？我看不出是什么原因造成的，也没有抛出异常。

编辑：我收到了 2 个反对票，但我不知道为什么。我会尝试更清楚。这是我认为包含问题的代码部分：

```
private void printDocument1_PrintPage(object sender, PrintPageEventArgs e)
{
    int charactersOnPage = 0;
    int linesPerPage = 0;

    // Sets the value of charactersOnPage to the number of characters 
    // of stringToPrint that will fit within the bounds of the page.
    e.Graphics.MeasureString(stringToPrint, this.Font,
        e.MarginBounds.Size, StringFormat.GenericTypographic,
        out charactersOnPage, out linesPerPage);

    // Draws the string within the bounds of the page
    e.Graphics.DrawString(stringToPrint, this.Font, Brushes.Black,
        e.MarginBounds, StringFormat.GenericTypographic);

    // Remove the portion of the string that has been printed.
    stringToPrint = stringToPrint.Substring(charactersOnPage);

    // Check to see if more pages are to be printed.
    e.HasMorePages = (stringToPrint.Length > 0);
} 
```

我不相信任何数据类型被溢出。我用不同的打印机试过这个，但每一个都有相同的结果。如果您投反对票，请发表评论，让我知道为什么这个问题有问题。注意：我尝试了 .NET Framework 4 和 4.5，结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:44:15.983

似乎 MSDN 示例无法正常工作。这可能是因为 MarginBounds Rectangle 是基于整数的，而不是基于浮点数的。将 Y 位置跟踪为浮点数并在 MeasureString 和 DrawString 方法中使用此值**可解决此问题**。我通过检查[不同的 MSDN 打印示例](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument%28v=vs.100%29.aspx)发现了这一点。

以下是相关代码：

```
private void pd_PrintPage(object sender, PrintPageEventArgs ev)
{
    float linesPerPage = 0;
    float yPos = 0;
    int count = 0;
    float leftMargin = ev.MarginBounds.Left;
    float topMargin = ev.MarginBounds.Top;
    string line = null;

    // Calculate the number of lines per page.
    linesPerPage = ev.MarginBounds.Height /
       printFont.GetHeight(ev.Graphics);

    // Print each line of the file.
    while (count < linesPerPage &&
       ((line = streamToPrint.ReadLine()) != null))
    {
        yPos = topMargin + (count *
           printFont.GetHeight(ev.Graphics));
        ev.Graphics.DrawString(line, printFont, Brushes.Black,
           leftMargin, yPos, new StringFormat());
        count++;
    }

    // If more lines exist, print another page.
    if (line != null)
        ev.HasMorePages = true;
    else
        ev.HasMorePages = false;
} 
```

这并没有像前面的例子那样考虑自动换行，但可以相对容易地实现。

# javascript - 谷歌地图 api 在 ie7 中不起作用

> ID：14263078
> 
> 赞同：0
> 
> 时间：2013-01-10T16:51:29.827
> 
> 标签：javascript, google-maps, internet-explorer-7

我的网站上有一个谷歌地图，它在 firefox 或 chrome 上运行良好，但在 ie7 上，它只显示一个灰色框，你可以在这个 url 上查看它：

[http://pavillonm.okarito.com/default/chiffre/pavillon](http://pavillonm.okarito.com/default/chiffre/pavillon)

我想到了可能与respond.js 发生的js 冲突，但没有。我删除了一些 javascript 来检查，但它仍然显示一个灰色框。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:07:41.907

这不是谷歌地图。你 pinitit.js 有 eventListener 的问题

# xcode - 如何在 Xcode 中创建全局变量？

> ID：14263079
> 
> 赞同：0
> 
> 时间：2013-01-10T16:51:29.923
> 
> 标签：xcode, arrays, global-variables, xcode4.5

我是 Xcode 的初学者，但我用其他语言编程过，比如 C++。我试图在我的 ViewContoller.m 文件中有一个全局变量，我可以在所有函数中使用它。我想创建一个存储字符串的全球化可变数组。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:53:54.083

如果要在整个应用程序中使用，则在所有类中使用 Shared Instance/Singleton Class，以形成全局变量。

如果要在类中访问，请创建一个属性。这将在您的课堂上通过`_propertyName`和访问`self.propertyName`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:55:13.060

最好使用类的属性，并为此使用 NSNotificationCenter。

# dart - DART nodes.add() 添加元素的多个副本

> ID：14263080
> 
> 赞同：1
> 
> 时间：2013-01-10T16:51:31.080
> 
> 标签：dart

我有一个要显示缩略图的项目列表。但是，如果任何缩略图被记录为丢失，我想显示一个“丢失的图像”图像。该列表可能很长，因此我想在需要时重复使用相同的“缺失图像”。

但是，下面的测试代码只生成了一个图像副本——最后一个添加的。我的问题：如何多次添加一个元素而不必每次都执行 new() ？

```
ImageElement img = new ImageElement();
img.src= "http://myserver/missing.png";  
...
div.nodes.add(img);    
div.appendText('11111');
div.nodes.add(img);    
div.appendText('22222');
div.nodes.add(img);    
div.appendText('33333'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:07:21.617

使用该代码，您不会向`div`元素添加新图像。`div.nodes.add(img)`实际上将作为最后一个节点附加到元素`img`下`div`（在引擎盖下`nodes.add(node)`使用[Node.appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)）。

要使其工作，您必须`ImageElement`为每个`div.nodes.add(img)`. 您还可以使用[Node.clone()](http://api.dartlang.org/docs/bleeding_edge/dart_html/Node.html#clone)创建一个新的`ImageElement`.

在您的情况下类似于以下内容：

```
final img = new ImageElement(src:"http://myserver/missing.png");
div.nodes.add(img.clone(false));
div.appendText('11111');
div.nodes.add(img.clone(false));
div.appendText('22222');
div.nodes.add(img.clone(false));
div.appendText('33333'); 
```

# java - 如何指定包含泛型的 Class 变量

> ID：14263082
> 
> 赞同：2
> 
> 时间：2013-01-10T16:51:39.707
> 
> 标签：java, generics

这是一个可以解释我的问题的示例：

```
public class Scratch {
    public <T> Set<T> method(Class<T> clazz){return null;}

    public static void main(String[] args){
        Scratch s=new Scratch();
        Set<List<String>> list=s.method(List.class); //Gives error here.  How do I say List<String>.class?
    }
} 
```

我真的很想说`List<String>.class`上面的 clazz 变量，但这不是适当的语法。我只是以错误的方式使用泛型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:24:07.987

这是语言和标准库的限制。

解决方法是简单地粗暴地施放它

```
(Class<List<String>>)(Class)List.class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:04:20.910

使用`Class<?> clazz`工作。

这是修改后的代码：

```
public class Scratch {
    public <T> Set<T> method(Class<?> clazz){return null;}

    public static void main(String[] args){
        Scratch s=new Scratch();
        Set<List<String>> list=s.method(List.class); 
        Set<Map<String,String>> map=s.method(Map.class);
    }
} 
```

感谢@Traroth 将我推向正确的方向。我修改了他的答案以支持一个真正通用的结构，而不仅仅是列表。

编辑：我仍然对上面的答案并不完全满意，因为你可以做坏事。考虑这个例子：

```
public class Scratch {
    public <T> Set<T> method(Class<?> clazz){return null;}

    public static void main(String[] args){
        Scratch s=new Scratch();
        Set<List<String>> list=s.method(Map.class); //Should've passed List.class, but the compiler doesn't care.
        Set<Map<String,String>> map=s.method(Map.class);
    }
} 
```

一切都会编译，我可能会遇到一些运行时错误（取决于我的实现）。任何其他建议表示赞赏...

# qt - Qt 主窗口未加载其图标

> ID：14263084
> 
> 赞同：1
> 
> 时间：2013-01-10T16:51:43.857
> 
> 标签：qt, icons, qt-designer

我正在使用**Qt 4.8.4**并且我使用**Qt Designer创建了一个****QMainWindow**，因此我的 .ui 文件生成了相应的 ui_....h 文件。我有相应的.qrc，里面有正确的图标，当我使用Qt Designer预览我的窗口时，我可以看到它。最后，在加载应用程序时，**窗口没有任何图标**，只有默认的 Windows 应用程序图标。

 ****我正在使用 Visual Studio 2010 编译项目。因此，我没有使用任何“.pro”文件。下面是编译 Qt 资源文件的 .vcxproj 的代码：

```
<CustomBuild Include="dlgConnect.qrc">
  <FileType>Document</FileType>
  <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">%(FullPath);%(AdditionalInputs)</AdditionalInputs>
  <Message Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">Rcc%27ing %(Identity)...</Message>
  <Outputs Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">.\GeneratedFiles\qrc_%(Filename).cpp;%(Outputs)</Outputs>
  <Command Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">"..\..\..\..\Software\QtSDK\Desktop\Qt\4.8.4\bin\rcc.exe" -name "%(Filename)" -no-compress "%(FullPath)" -o .\GeneratedFiles\qrc_%(Filename).cpp</Command>
  <AdditionalInputs Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">%(FullPath);%(AdditionalInputs)</AdditionalInputs>
  <Message Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">Rcc%27ing %(Identity)...</Message>
  <Outputs Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">.\GeneratedFiles\qrc_%(Filename).cpp;%(Outputs)</Outputs>
  <Command Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">"..\..\..\..\Software\QtSDK\Desktop\Qt\4.8.4\bin\rcc.exe" -name "%(Filename)" -no-compress "%(FullPath)" -o .\GeneratedFiles\qrc_%(Filename).cpp</Command>
</CustomBuild> 
```

这似乎是正确的，但我没有成功的结果。

有没有人有同样的经历？

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:46:25.417

您需要在**.pro**文件中使用它

```
RC_FILE += Icon.rc 
```

你的**Icon.rc**文件中需要这个

```
IDI_ICON1   ICON   DISCARDABLE   "./MyIcon.ico" 
```

你需要**MyIcon.ico**图标文件。****

# r - 矩阵中的真/假条件

> ID：14263087
> 
> 赞同：0
> 
> 时间：2013-01-10T16:51:59.520
> 
> 标签：r

我有一个矩阵，想看看条目是否大于某个值，例如：

```
matrix[matrix[,1] > value,1] 
```

现在这将返回所有大于`value`

我想做的只是 get`TRUE/FALSE`以便能够在 if 条件下使用它。

所以我想检查矩阵中的任何值是否`TRUE`适用于上述条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:00:17.210

```
set.seed(1234)

a <- matrix(round(runif(25,0,4)), nrow=5)
a

b <- (a>2)
b

class(b) 
```

一个是：

```
 [,1] [,2] [,3] [,4] [,5]
[1,]    0    3    3    3    1
[2,]    2    0    2    1    1
[3,]    2    1    1    1    1
[4,]    2    3    4    1    0
[5,]    3    2    1    1    1 
```

b 是：

```
 [,1]  [,2]  [,3]  [,4]  [,5]
[1,] FALSE  TRUE  TRUE  TRUE FALSE
[2,] FALSE FALSE FALSE FALSE FALSE
[3,] FALSE FALSE FALSE FALSE FALSE
[4,] FALSE  TRUE  TRUE FALSE FALSE
[5,]  TRUE FALSE FALSE FALSE FALSE 
```

类（b）返回：

```
[1] "matrix" 
```

如果你想要一个 1 / 0 而不是 TRUE / FALSE 的数字矩阵，你可以使用：

```
b[b==TRUE] = 1
b

     [,1] [,2] [,3] [,4] [,5]
[1,]    0    1    1    1    0
[2,]    0    0    0    0    0
[3,]    0    0    0    0    0
[4,]    0    1    1    0    0
[5,]    1    0    0    0    0 
```

此代码将仅检查第一列：

```
b2 <- a[,1] > 2
b2

[1] FALSE FALSE FALSE FALSE  TRUE 
```

# php - 按行输出数组

> ID：14263088
> 
> 赞同：0
> 
> 时间：2013-01-10T16:52:07.040
> 
> 标签：php, arrays

有一个数组：

```
Array
(
    [33] => Array
        (
            [0] => 1
            [1] => 1
            [2] => 5
            [3] => 2
            [4] => 1
            [5] => 1
            [6] => 2
        )

    [22] => Array
        (
            [0] => 1
            [1] => 5
            [2] => 5
        )

    [11] => Array
        (
            [0] => 1
        )

) 
```

在 php 中按如下方式打印输出此数组的更好方法是什么？：

```
raw1:33(1);22(1);11(1);
raw2:33(1);22(5);11();
raw3:33(5);22(5);11();
raw4:33(2);22();11();
raw5:33(1);22();11();
raw6:33(1);22();11();
raw7:33(2);22();11(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:56:12.693

所有你需要的是

```
$data = array(
  33 => array(
    0 => 1,
    1 => 1,
    2 => 5,
    3 => 2,
    4 => 1,
    5 => 1,
    6 => 2,
  ),
  22 => array(
    0 => 1,
    1 => 5,
    2 => 5,
  ),
  11 => array(
    0 => 1,
  ),
);

$x = 1;
foreach ( new ColumnIterator($data) as $set ) {
    echo "raw$x:";
    foreach ( $set as $k => $v )
        echo $k . "($v);";
    echo "\n";
    $x ++;
} 
```

输出

```
raw1:33(1);22(1);11(1);
raw2:33(1);22(5);11();
raw3:33(5);22(5);11();
raw4:33(2);22();11();
raw5:33(1);22();11();
raw6:33(1);22();11();
raw7:33(2);22();11(); 
```

[在线演示](http://eval.in/6402)

使用的类

```
class ColumnIterator extends MultipleIterator {
    function __construct(array $multi) {
        parent::__construct(self::MIT_NEED_ANY | self::MIT_KEYS_ASSOC);
        foreach ( $multi as $k => $v ) {
            $this->attachIterator(new ArrayIterator($v), $k);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:00:32.890

你可以试试这个-

```
for($loop=0;$loop<count($array[33]);$loop++) {
    $arr1 = ($arr[33][$loop]) ? $arr[33][$loop] : "";
    $arr2 = ($arr[22][$loop]) ? $arr[22][$loop] : "";
    $arr3 = ($arr[11][$loop]) ? $arr[11][$loop] : "";
    echo "row".$loop+1.":33(".$arr1.");22(".$arr2.");11(".$arr3.")";
} 
```

# sql-server - 在列表中查找下一个日期

> ID：14263089
> 
> 赞同：-3
> 
> 时间：2013-01-10T16:52:18.737
> 
> 标签：sql-server, tsql

我有一个日期列表（ann_date），我想在列表中找到下一个日期（从最旧到最新 ann_date 排序），以便我有第二列（next_date）。我使用的是 SQL Server 2008，所以没有 LEAD 功能。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:00:12.983

这应该可以帮助您：

```
;WITH CTE AS
(
    SELECT ann_date, ROW_NUMBER() OVER(ORDER BY ann_date) RN
    FROM YourTable
)

SELECT A.ann_date, B.ann_date next_date
FROM CTE A
LEFT JOIN CTE B
    ON A.RN = B.RN - 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:04:01.387

有很多方法可以解决这个问题。如果它只是您需要的下一个日期，那么您可以使用相关子查询：

```
SELECT  Ann_Date,
        [Next_Date] = ( SELECT  MIN(ann_Date)
                        FROM    T T2
                        WHERE   T2.Ann_Date > T.Ann_Date
                    )   
FROM    T; 
```

或者如果您需要下一行的更多数据，您可以使用`APPLY`

```
SELECT  T.Ann_Date
        Next_Date = nxt.Ann_Date,
        nxt.SomeOtherField
FROM    T
        OUTER APPLY
        (   SELECT  TOP 1 Ann_Date, SomeOtherField
            FROM    T T2
            WHERE   T2.Ann_Date > T.Ann_Date
            ORDER BY Ann_Date
        ) nxt; 
```

您也可以使用分析函数和连接来执行此操作。与往常一样，没有架构详细信息或数据，几乎不可能提供特定的最佳答案，因此请使用执行计划和 IO 统计数据来决定哪个是最适合您的解决方案。

# vba - (VBA) 与其他站点上的 CreateTextFile 相关的运行时错误 76

> ID：14263092
> 
> 赞同：0
> 
> 时间：2013-01-10T16:52:24.930
> 
> 标签：vba, filesystemobject

晚上好，

我已经尝试修复这个错误几个小时了，但没有运气。这尤其令人沮丧，因为该错误不会在我自己的工作站上表现出来，而是在其他每个人的工作站上表现出来。代码的目的是创建（FileSystemObject -> CreateTextFile）两个 .txt 文件，并将特定信息写入（TextStream）每个文件中。以下是相关的代码行：

```
Dim username, filename, filename_2, filepath, complete_filepath, complete_filepath_2 As String
Dim fso As New FileSystemObject
Dim fso_2 As New FileSystemObject
Dim txtStream, txtStream_2 As TextStream

'Gets username
username = CreateObject("WScript.NetWork").username

filename = "db_Redel"
filename_2 = "db_ship"

complete_filepath = "C:\Users\" & username & "\Documents\" & filename & ".txt"
complete_filepath_2 = "C:\Users\" & username & "\Documents\" & filename_2 & ".txt"

Set txtStream = fso.CreateTextFile(complete_filepath, True) 'RUNTIME ERROR 76
Set txtStream_2 = fso_2.CreateTextFile(complete_filepath_2, True) 
```

我确定声明的文件路径存在于经过测试的机器上。我怀疑某些东西使 FileSystemObject 对象无法正常运行，例如权限，但我检查了其他工作站上的 Office 安全中心，它们都具有与我相同的设置。以下是激活的参考：

*   Visual Basic 应用程序
*   Microsoft Excel 14.0 对象库
*   OLE 自动化
*   Microsoft Office 14.0 对象库
*   Microsoft 脚本运行时

这些也在所有其他机器上被激活。

我能做些什么？明确一点：代码在我自己的工作站上按预期工作。

更新：我让我的一个朋友尝试了它，它在他的 PC 上也可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:57:39.457

原来问题出在日期格式上。我自己电脑上的格式是 DD-MM-YYYY，而其他工作站上的格式是 DD/MM/YYYY。正斜杠显然不能在文件名中，因此问题已通过以下方式解决：

```
DateNow = Date()
filename = Replace(DateNow, "/", "-") 
```

:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:18:41.340

你的代码在我的电脑上运行良好。但是，您在调暗变量时犯了一个常见错误。该行：

> Dim username, filename, filename_2, filepath, complete_filepath, complete_filepath_2 As String

实际上只会将**complete_filepath_2**暗淡为字符串。其他成为变体类型。

与线路相同的问题：

> 调暗 txtStream, txtStream_2 As TextStream

只有**txtStream_2**会变暗为 Textstream

您需要为每行调暗一个变量：

将用户名变暗为字符串

将文件名变暗为字符串

将文件名_2 调暗为字符串

将文件路径变暗为字符串

将 complete_filepath 调暗为字符串

将 complete_filepath_2 调暗为字符串

只有这样你才能得到你期望的变量类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:33:30.900

`username`根据您的输入，并不清楚和的实际值`Date`。如果这些有**空格**- 您观察到可能存在问题。尝试首先使用`fso.FolderExists("C:\Users\" & username & "\Documents\")`方法并确保它返回**True**。

# mysql - 具有多个连接和分组依据的 MySQL 计数

> ID：14263098
> 
> 赞同：0
> 
> 时间：2013-01-10T16:52:41.033
> 
> 标签：mysql, outer-join

我似乎无法找出构建此查询的正确方法，而且我知道有一种方法可以使用纯 SQL 来完成，我宁愿通过正确的查询来完成，而不是在我的应用程序逻辑中。

我有三张桌子：

event_types、booking_types 和预订

我想要的是获得给定事件的预订数，但也包括零预订的事件类型的行。

```
SELECT et.name AS test_type, COUNT(et.name) AS num_seats FROM event_types AS et
LEFT OUTER JOIN booking_types AS bt ON et.type_id = bt.event_type_id
LEFT OUTER JOIN bookings AS b ON b.booking_id = bt.booking_id
WHERE b.event_id = 5
GROUP BY test_type 
```

此查询返回类似

```
test_type | num_seats
----------------------
Transcript |     4
----------------------
Written    |     1
---------------------- 
```

目前有三种 event_types：'Transcript'、'Written' 和 'Skill'

由于还没有任何“技能”预订（一个预订可以有多种类型），我希望结果包括像“技能”这样的行 | 0\. 此外，如果没有预订，它应该有 3 个零行，在这种情况下，每个 event_type 一个。

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:55:47.670

尝试将`WHERE`过滤器移动到`JOIN`：

```
SELECT et.name AS test_type, 
    COUNT(b.booking_id) AS num_seats 
FROM event_types AS et
LEFT OUTER JOIN booking_types AS bt 
    ON et.type_id = bt.event_type_id
LEFT OUTER JOIN bookings AS b 
    ON b.booking_id = bt.booking_id
    AND b.event_id = 5
GROUP BY test_type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8aa00/2)

# android - 将按钮放置在屏幕中央

> ID：14263103
> 
> 赞同：1
> 
> 时间：2013-01-10T16:52:47.600
> 
> 标签：android, android-layout

这是我的布局。我希望这些按钮应该位于屏幕的中心，无论是手机还是平板电脑。我怎样才能做到这一点。请帮我。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView android:id="@+id/scrollView" xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="@color/ubc_grey">
    <RelativeLayout android:layout_width="match_parent" android:layout_height="wrap_content">

        <TextView android:id="@+id/titleTextView" android:layout_width="fill_parent" android:layout_height="60dp"
            android:background="@color/slate_grey"  android:text="@string/title_home_map_view" android:textColor="@color/white"
            android:gravity="center" android:textSize="20dp"/>

        <LinearLayout android:id="@+id/linearLayout" android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:orientation="vertical" android:layout_centerInParent="true" android:layout_below="@+id/titleTextView" 
            android:layout_centerHorizontal="true" android:gravity="center"  android:layout_marginTop="20dp">

            <Button android:id="@+id/category" android:layout_width="250dp" android:layout_height="60dp"
                android:text="@string/choose_category" android:textColor="@color/white" android:textSize="18dp"
                android:layout_gravity="center"/>

            <Button android:id="@+id/range" android:layout_width="250dp" android:layout_height="60dp"
                android:text="@string/select_range" android:textColor="@color/white" android:layout_marginTop="20dp" 
                android:textSize="18dp" android:layout_gravity="center"/>

            <Button android:id="@+id/useMyCurrentLocation" android:layout_width="250dp" android:layout_height="60dp"
                 android:layout_marginTop="20dp" android:textColor="@color/white" android:text="@string/button_use_my_current_location" 
                 android:layout_gravity="center" android:textSize="18dp"/>
        </LinearLayout>

    </RelativeLayout>
</ScrollView> 
```

这就是我想要实现的目标

![在此处输入图像描述](../Images/2fd682df4d19d863ac5f34dc79e49f98.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:57:08.323

![在此处输入图像描述](../Images/be3379a89c9b7a7b18baa860b350d00a.png)

你有第四行

```
 <RelativeLayout android:layout_width="match_parent" android:layout_height="wrap_content" lay> 
```

您可能需要在其末尾删除lay :)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:13:27.760

xml 给你：

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent" android:layout_height="wrap_content"
    android:background="@color/ubc_grey">
        <LinearLayout
            android:id="@+id/linearLayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_centerInParent="true"
            android:layout_marginTop="20dp"
            android:gravity="center"
            android:orientation="vertical" >
            <TextView
                android:id="@+id/titleTextView"
                android:layout_width="fill_parent"
                android:layout_height="60dp"
                android:background="@color/slate_grey"
                android:gravity="center"
                android:text="@string/title_home_map_view"
                android:textColor="@color/white"
                android:textSize="20dp" />
            <Button
                android:id="@+id/category"
                android:layout_width="250dp"
                android:layout_height="60dp"
                android:text="@string/choose_category"
                android:textColor="@color/white"
                android:textSize="18dp" />
            <Button
                android:id="@+id/range"
                android:layout_width="250dp"
                android:layout_height="60dp"
                android:layout_gravity="center"
                android:layout_marginTop="20dp"
                android:text="@string/select_range"
                android:textColor="@color/white"
                android:textSize="18dp" />
            <Button
                android:id="@+id/useMyCurrentLocation"
                android:layout_width="250dp"
                android:layout_height="60dp"
                android:layout_gravity="center"
                android:layout_marginTop="20dp"
                android:text="@string/button_use_my_current_location"
                android:textColor="@color/white"
                android:textSize="18dp" />
        </LinearLayout>
    </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T11:19:02.460

请检查此 xml 代码。在这里，我删除了您的颜色和字符串部分。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:orientation="vertical" >

        <Button
            android:id="@+id/category"
            android:layout_width="250dp"
            android:layout_height="60dp"
            android:text="choose_category"
            android:textSize="18dp" />

        <Button
            android:id="@+id/range"
            android:layout_width="250dp"
            android:layout_height="60dp"
            android:layout_marginTop="20dp"
            android:text="select_range"
            android:textSize="18dp" />

        <Button
            android:id="@+id/useMyCurrentLocation"
            android:layout_width="250dp"
            android:layout_height="60dp"
            android:layout_marginTop="20dp"
            android:text="button_use_my_current_location"
            android:textSize="18dp" />
    </LinearLayout>
</LinearLayout> 
```

您还可以看到下面附加的屏幕截图：

![在此处输入图像描述](../Images/c01eccd9073061ef43e4378ced8b274b.png)

希望你明白了。

随时发表评论。

# shell - UNIX SCRIPT 中的 CSV 行拆分和对齐

> ID：14263111
> 
> 赞同：1
> 
> 时间：2013-01-10T16:53:32.690
> 
> 标签：shell, unix, csv

是否可以像下面那样拆分和对齐 CSV 行？

```
ID Value
========
1  10
--------
2  20
--------
3  14
-------- 
```

请将以上内容视为 csv，无需关心第二列（值）。我想拆分第一列（ID）并将结果保存/存储另一个文件。

输出应该是：1,2,3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:07:11.010

```
awk '!/^[-=]/ && NR!=1{str=str","$1}END{print substr(str,2)}' 
```

[在这里](http://ideone.com/0nDIfO)测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:07:51.960

您的问题没有很好地说明，但对于您的特定示例，您可以这样做：

```
{ awk 'NR>2 && ! /^--/ { print $1 }' | tr \\n ,; echo; } < input > output 
```

也许：

```
< input-file awk 'NR > 1 && NR%2 { print $1 }' | paste -d, -s > output 
```

# exception - MULE 3.2 - 如何获取RequiredValueException 字符串值？

> ID：14263112
> 
> 赞同：0
> 
> 时间：2013-01-10T16:53:39.663
> 
> 标签：exception, mule, flow, payload

如果我的默认异常策略中有以下块，我该如何返回错误消息的实际文本。

```
 <when evaluator="groovy" expression='payload.getException() instanceof org.mule.api.expression.RequiredValueException'>              
          <expression-transformer evaluator="groovy" expression="payload.getPayload()"/>
          <smtp:outbound-endpoint ref="errorSmtpEPRequiredValueException" doc:name="emailError"/>
        </when> 
```

日志中的示例错误消息

```
[01-10 16:49:27] ERROR DefaultMessagingExceptionStrategy [[inventorymgtetl].processPay.stage1.03]: Caught exception in Exception Strategy:
Expression Evaluator "header" with expression "session:pay_totalAmmount" returned null but a value was required.
org.mule.api.expression.RequiredValueException: Expression Evaluator "header" with expression "session:pay_totalAmmount" returned null but a value was required. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:04:29.663

你试过了吗：

```
evaluator="groovy" expression="payload.exception.message" 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:50:15.000

这对我有用。

```
<message-properties-transformer scope="session" doc:name="save values to session">
  <add-message-property key="err_exception" value="#[groovy:payload.getException().toString()]"/>
  <add-message-property key="err_clause" value="#[groovy:payload.getException().getCause().toString()]"/>
</message-properties-transformer> 
```

# java - 这个 Java 函数从哪里推断出它的泛型类型？

> ID：14263113
> 
> 赞同：7
> 
> 时间：2013-01-10T16:53:43.573
> 
> 标签：java, generics

我发现了一些通用代码，它让我对它的实际工作方式感到困惑。我不明白它从哪里获得用于 T 的泛型类型。这是一个过于简单的示例，但我仍然不明白这是如何有效的 Java 代码。

```
public static void main(String[] args) {
  System.out.print(get());
}

public static <T> T get()
{
  return (T) getObj();
}

public static Object getObj() 
{
  return Boolean.FALSE;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:07:01.677

类型推断基于调用点发生。

但是，如果将返回值分配给变量，则类型推断仅适用于返回类型。这是写在[规范中](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.8)

> 如果方法结果发生在将要进行赋值转换的上下文中，则 [...]

否则，任何未解析的类型参数总是变为`Object`.
在您的示例中，这将起作用，因为存在`print(Object)`过载。

另一方面，看看这段代码：

```
print(get());

public void print(Boolean x) { }

public <T> T get() {
    return (T) Boolean.FALSE;
} 
```

`get()`这将产生编译错误，因为编译器`Object`在查看`print()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:58:26.327

在您编写的代码中， T不受任何**约束**。每当您调用该方法时，Java 都会为 T 分配一个类型`get`，它会查看您期望返回的类型……但这似乎只有在您明确声明您在等待哪种类型时才有效。看下面的例子：

```
public static void jump(String a) {
}

public static <T> T get() {
    return (T) null;
}

public static void main(String[] args) {
    //This works quite well, generic parameter T is inferred to be String
    String blah = get();
    jump(blah);
} 
```

另一方面

```
public static void jump(String a) {
}

public static <T> T get() {
    return (T) null;
}

public static void main(String[] args) {
    //This doesn't work, Java does not bind T to anything hence Object is used... and no jump for object is found
    jump(get());
} 
```

至少这是它在 Java 6 上的工作方式。

# java - 反序列化地图 带 Gson 的字段

> ID：14263114
> 
> 赞同：17
> 
> 时间：2013-01-10T16:53:44.437
> 
> 标签：java, json, gson

我有一个具有这种结构的用户对象：

```
class User {
    private String id;
    private String name;
    private Map<String, Object> properties;

    // GETTERS & SETTERS
} 
```

我有一个具有这种结构的 JSON 字符串：

```
{
    "user": {
        "id:"123456789",
        "name:"azerty",
        "emailHash":"123456789", // not used in User class
        "properties": {
            "p1":1,
            "p2":"test",
            "p3":[1, 2, 3, 4],
            "p4":{
               etc...
            }
        }
    }
} 
```

Properties 的键是 String，Properties 的值可以是 String、int、Array、boolean、Map 等。

我尝试像这样用 Gson 反序列化这个 JSON 字符串：

```
JsonParser parser = new JsonParser();
JsonElement element = parser.parse(jsonString);
JsonObject object = element.getAsJsonObject();

GsonBuilder builder = new GsonBuilder();
builder.setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES);
Gson gson = builder.create();
User user = (User) gson.fromJson(object.get("user"), new TypeToken<User>() {}.getType()); 
```

字段 'id' 和 'name' 已正确注入，但字段 'properties' 保持为空。

你知道我做错了什么吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T08:40:07.270

对我来说，这段代码：

```
public class Main {
    public static void main(String[] args) throws IOException {
    GsonBuilder builder = new GsonBuilder();
    builder.setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES);
    Gson gson = builder.create();
    FileInputStream inputStream = new FileInputStream(new File("bobi.json"));
    InputStreamReader reader = new InputStreamReader(inputStream);
    User user = gson.fromJson(reader, User.class);
    System.out.println(user.getName());
    System.out.println(user.getId());
    for (String property : user.getProperties().keySet()) {
        System.out.println("Key: " + property + " value: " + user.getProperties().get(property));
    }
    reader.close();
} 
```

打印这个：

```
azerty
123456789
Key: p1 value: 1.0
Key: p2 value: test
Key: p3 value: [1.0, 2.0, 3.0, 4.0]
Key: p4 value: {} 
```

但是，请记住，我已经在我解析的文件中剥离了包装 json 对象。该文件是：

```
{
        "id":"123456789",
        "name" : "azerty",
        "emailHash":"123456789", 
        "properties": {
            "p1":1,
            "p2":"test",
            "p3":[1, 2, 3, 4],
            "p4":{

            }
        }
} 
```

`name`我还为and添加了结束双引号`id`，您的示例中没有。

`User`OP 要求的课程。出于打印的原因，我添加了 getter 和 setter：

```
import java.util.Map;

class User {
    private String id;
    private String name;
    private Map<String, Object> properties;
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public Map<String, Object> getProperties() {
        return properties;
    }
    public void setProperties(Map<String, Object> properties) {
        this.properties = properties;
    }
} 
```

# java - URL.getContent 编码错误

> ID：14263120
> 
> 赞同：0
> 
> 时间：2013-01-10T16:54:03.573
> 
> 标签：java, linux, io

我有一个 URL，我试图将其写入 linux 机器上的文件。
我可以做一个

```
 wget http://localhost/fileIwant.text 
```

一切都很好。

当我尝试像这样使用 Java 的 URL 时：

```
 URL url = new URL("http://localhost/fileIwant.text");
    URLConnection conn = url.openConnection();
BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));

    String inputLine;
    File file = new File(path+filename);

    if (!file.exists()) {
        file.createNewFile();
    }

    //use FileWriter to write file
    FileWriter fw = new FileWriter(file.getAbsoluteFile());
    BufferedWriter bw = new BufferedWriter(fw);

    while ((inputLine = br.readLine()) != null) {
        bw.write(inputLine);
    } 
```

我已经尝试了我能想到的所有阅读器、流、字节 [] 排列，但我仍然得到一个带有菱形的文件？在他们中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:58:56.620

```
InputStream in=(new URL("http://localhost/fileIwant.text")).openStream(); 
```

# powershell - Lync 错误：不支持 STA 线程上的多个句柄的 waitall

> ID：14263122
> 
> 赞同：0
> 
> 时间：2013-01-10T16:54:05.227
> 
> 标签：powershell, lync-2010

我正在尝试从我的 Lync 存档服务器导出 IM 聊天日志。我已按照[http://technet.microsoft.com/en-us/magazine/hh328432.aspx](http://technet.microsoft.com/en-us/magazine/hh328432.aspx)中的详细说明进行操作。

当我发出命令时：

```
export-CSArchivingData -DBInstance <sqlserername> -StartDate 12/31/12 -EndDate 01/03/13 -OutputFolder "C:\SJS" -UserURI <emailaddress> 
```

我收到以下错误：

```
export-CSArchivingData : WaitAll for multiple handles on a STA thread is not supported.
At line:1 char:1
+ export-CSArchivingData -DBInstance <sqlservername> -StartDate 12/31/12 -EndDate 01/ ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : WriteError: (Microsoft.Rtc.A...ArchiveDataImpl:ExportArchiveDataImpl) [Export-CsArchivingData], NotSupportedException
    + FullyQualifiedErrorId : export-CSArchivingData,ExportArchiveData.ExportArchiveDataCmdlet 
```

并且不返回任何记录。有任何想法吗？这是 Lync 2010，我从管理员 lync 服务器管理 shell 运行此命令。我对 lync 服务器机器和存储日志的 sql 服务器拥有完全的管理员权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:16:50.847

我从我的 Lync 服务器导出时遇到了同样的错误。它似乎与 Exchange 服务器和最新的 WMF 3.0 版本的这个问题太相似了：http: [//blogs.technet.com/b/exchange/archive/2012/12/14/windows-management-framework-3-0-on -exchange-2007-and-exchange-2010.aspx](http://blogs.technet.com/b/exchange/archive/2012/12/14/windows-management-framework-3-0-on-exchange-2007-and-exchange-2010.aspx)

所以我卸载了 KB2506143 更新并重新启动了 Lync 服务器。神奇的是，我能够再次从存档中导出。干杯，

# android - 在 Android 中使用 AIDL：检查 Activity 是否绑定了服务

> ID：14263125
> 
> 赞同：0
> 
> 时间：2013-01-10T16:54:09.713
> 
> 标签：android, service, bind, aidl

我正在使用 AIDL。我有一项服务和一项活动。在 onCreate 函数中，我绑定了服务，我想更新 UI：

```
private ServiceConnection conn = null;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    bindService();
    String name = conn.s.getName();

}
public class ServiceConnection implements ServiceConnection {
public IService s = null;

public void onServiceConnected(ComponentName className, IBinder boundService) {
    s = IService.Stub.asInterface((IBinder) boundService);
    Log.d(getClass().getSimpleName(), "onServiceConnected()");
}

public void onServiceDisconnected(ComponentName className) {
    s = null;
    Log.d(getClass().getSimpleName(), "onServiceDisconnected");
}
} 
```

所以我得到一个空指针，因为该服务尚未绑定。如何检查活动是否绑定了服务？

我真正需要的很简单：创建活动 -> 使用 AIDL 从服务获取信息 -> 更新 UI。如果我放一个“更新”按钮一切正常，但我不知道如何自动执行此操作。有什么想法？我可以做一个线程：

```
while(conn.s==null)
  ;
updateUI(); 
```

但我认为它既不优雅也不高效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:07:08.523

要测试您的服务是否已连接，只需将此方法添加到您的 ServiceConnection 类中：

```
public boolean isConnected() {
   return s == null;
} 
```

另一种解决方案：在您的类中添加一个布尔值，并在连接/断开连接时设置为真/假。

重用 API 类的名称通常是一个非常糟糕的主意，因为更难理解在读取所有导入之前使用了哪些实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:00:24.613

在 onCreate 中你不应该做在服务绑定之前你不能做的事情。您需要推迟这些操作并等待调用 onServiceConnected。

onServiceConnected 不是您正在寻找的“onConnectionEstablished 回调”吗？当与服务建立连接时调用 onServiceConnected

# java - 接受/拒绝聊天客户端中的文件传输

> ID：14263129
> 
> 赞同：0
> 
> 时间：2013-01-10T16:54:15.647
> 
> 标签：java, file-upload, user-interface, chat

我计划在我的网站上的聊天小部件中引入文件传输支持，并且一直想知道为什么大多数聊天客户端仅在接收者通过“接受”或“拒绝”选项确认相同时才允许传输？

我假设 99% 的时间（如果不是更多）接收者会接受电车，而不是拒绝它。

请让我知道这方面的任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:58:01.910

这只是很好的常识。即使 99% 的时间接收者期待一个文件并单击接受，这也可以保护您的用户免受那 1% 的人试图将垃圾邮件/色情/垃圾/病毒/等转储到他们的机器上。

话虽如此，您当然可以根据 99% 的假设让事情变得更容易。当出现提示时，您可以将“接受”按钮设为默认按钮。一旦建立了信任关系，您可以添加“始终接受此用户”选项以使事情变得更容易。但总的来说，仅仅自动接受是一个危险的想法。

# java - 为什么“断言”不能按照我在这段代码中想要的方式工作？

> ID：14263132
> 
> 赞同：1
> 
> 时间：2013-01-10T16:54:35.383
> 
> 标签：java

为什么构造函数中的 assert 语句在下面的代码中不起作用？（我想使用它而不是我注释掉的 if 语句）

```
import java.util.HashMap;
import java.util.Map;

enum Suite{
    HEARTS, DIAMONDS, SPADES,CLUBS;
}

public class Card {
    private Suite suite;
    private int number;
    private String name;

    public Card(int number, Suite suite) {
//      if(number < 0 || number > 13)
//          throw new IllegalArgumentException(); 
        assert(!(number < 0 || number >13));

        this.number=number;
        this.suite=suite;
        initialize();

    }
    private void initialize(){
        switch(number){
        case 1: name="Ace"; break;
        case 2: name="Two"; break;
        case 3: name="Three"; break;
        case 4: name="Four"; break;
        case 5: name="Five"; break;
        case 6: name="Six"; break;
        case 7: name ="Seven"; break;
        case 8: name ="Eight"; break;
        case 9: name="Nine"; break;
        case 10: name="Ten"; break;
        case 11: name="Jack"; break;
        case 12: name="Queen"; break;
        case 13: name="King"; break;
        default: break;
        }
    }
    public int getNumber() {
        return number;
    }

    public int getBJNumber(){
        if(number == 11 || number == 12 || number == 13 )
            return 10;
        else
            return number;
    }

    public Suite getSuite() {
        return suite;
    }

    public String toString(){
        return name + " of " + suite.toString();
    }

    public static void main(String[] args) {
        Card testCard = new Card(1, Suite.CLUBS);
        System.out.println(testCard);
        Card testCard2 = new Card(5, Suite.CLUBS);
        System.out.println(testCard2);
        Card testCard3 = new Card(1, Suite.CLUBS);
        System.out.println(testCard3);
        Card testCard4 = new Card(15, Suite.CLUBS);
        System.out.println(testCard4);
    }
} 
```

输出：

```
Ace of CLUBS
Five of CLUBS
Ace of CLUBS
null of CLUBS <---this should have not been shown. 
```

也许我对断言的理解不正确？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T16:55:30.743

默认情况下`assert`是禁用的。您需要明确启用使用`-ea`标志。这是有关如何启用/禁用断言的java[教程。](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html#enable-disable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:55:53.413

断言默认是关闭的。你必须告诉虚拟机来评估它们。

启用它们： `-ea`

# android - Android上的iso代码的货币符号

> ID：14263136
> 
> 赞同：4
> 
> 时间：2013-01-10T16:55:02.200
> 
> 标签：android, in-app-purchase, currency, google-play, billing

有没有办法将货币符号转换为 Java/Android 中相应的 ISO 代码？

我已经看到 Google Play 应用内结算 APIv3 可以向我们发送包括货币符号在内的商品价格，但随后我们将价格和货币存储在不同的字段中，因此我们可以验证付款是否具有有效货币。

我知道我可以迭代所有语言环境并比较货币符号，但我认为必须有更简单的方法来完成这项任务。

非常感谢！

// 2013 年 1 月 11 日编辑

我刚刚意识到不可能将货币符号转换为其货币代码，因为有许多国家共享相同的符号。

也许正确的问题是我怎么知道支付给用户多少钱和用什么货币？

# gcc - GMP 是否内置在 GCC 中？

> ID：14263138
> 
> 赞同：1
> 
> 时间：2013-01-10T16:55:06.290
> 
> 标签：gcc, gmp

您需要 GMP 从源代码构建 GCC。这是否意味着 GCC 具有内置的任意精度算术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:59:25.103

*GCC 在编译时*使用 GMP 。

我相信原因之一可能是某些语言标准（可能是 Fortran90，但可能不是 C99）要求以“无限”精度计算常量表达式的算术。因此，如果源代码包含`1234567890*9876543210*123098456876` 应该（至少对于 Fortran 的某些方言？）完整计算。为此，GCC 使用 GMP。

不要认为 GCC 编译的程序可以在不链接像 Gmp 这样的 bignum 库的情况下进行[bignum算术（在运行时）。](http://en.wikipedia.org/wiki/Bignum)

你可以试试 CommonLisp，例如[SBCL](http://www.sbcl.org/)。它为您提供带有交互式动态编译的 bignum 算法。

# c++ - ADODB CreateInstance 返回 ERROR_NO_TOKEN 1008

> ID：14263139
> 
> 赞同：0
> 
> 时间：2013-01-10T16:55:07.550
> 
> 标签：c++, adodb, windows-server

我正在尝试访问 Windows 2003 服务器上的 SQL 数据库（虽然我也会在 2000 服务器上执行此操作），但是当我尝试`CreateInstance`使用 _ConnectionPtr 对象调用时，它失败并显示“ERROR_NO_TOKEN: 1008: An attempt was made引用不存在的令牌。” 代码再简单不过了：

```
hResult = m_lpADOConnect.CreateInstance("ADODB.Connection"); 
```

在进行此调用之前，我还需要做一些其他初始化吗？感谢所有帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:24:29.247

我想到了。我忘记提前打电话`CoInitialize(NULL);`了。

# java - 弹簧卷筒纸流转至

> ID：14263145
> 
> 赞同：0
> 
> 时间：2013-01-10T16:55:30.907
> 
> 标签：java, spring-webflow

以下是我的流程，

```
<view-state id="fileUpload" view="FileUpload" redirect="false" popup="false" model="scanDataHolder">

        <on-render>
            <evaluate expression="fileUpload.setupNewFileUploadHolder(holder, flowRequestContext,externalContext)" />
        </on-render>    

        <transition on="process" to="uploadreport" validate="false">
            <evaluate expression="fileUpload.process(holder, flowRequestContext,externalContext)" />                
        </transition>       

        <transition on="doneWithFileUpload" to="doneWithFileUpload" validate="false"/>                          
    </view-state>   

    <view-state id="uploadreport" view="renderReport"   redirect="false" popup="true" model="retailScan"/> 
```

以上流程运作良好。但是，当我的流量来到这里

```
<transition on="process" to="uploadreport" 
```

我需要去`<view-state id="uploadreport" view="renderReport"..../>`也去`<view-state id="fileUpload" view="FileUpload".../>`

一个将打开一个 Excel 报告，另一个将清理用于浏览文件的字段并显示文件的简要结果...

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T10:34:22.330

弹簧卷筒纸流转至

```
<view-state id="fileUpload" view="FileUpload" redirect="false" popup="false"    model="scanDataHolder">
    <on-render>
    <evaluate expression="fileUpload.setupNewFileUploadHolder(holder, flowRequestContext,externalContext)" />
    </on-render>
    <transition on="process" to="uploadreportTest" validate="false" />
    <transition on="doneWithFileUpload" to="doneWithFileUpload" validate="false"/>
    </view-state>
    <action-state id=" uploadreportTest">

      <evaluate expression="fileUpload.process(holder, flowRequestContext,externalContext)" />
    <transition on="success" to=" uploadreport " />
    </action-state>

    <view-state id="uploadreport" view="renderReport"   redirect="false" popup="true" model="retailScan"/> 
```

# c# - 单声道、正则表达式和堆栈大小

> ID：14263148
> 
> 赞同：1
> 
> 时间：2013-01-10T16:55:42.570
> 
> 标签：c#, regex, mono, stack-size, dmcs

`System.Text.RegularExpressions.Regex`我正在移植一个用于解析 C/C++ 包含源文件的 C# 软件。它们作为字符串完全加载到内存中，然后只用正则表达式处理。

它在 Windows 上完美运行，但在 Linux 上运行的 Mono 在尝试解析较大的文件时失败，并引发了从 deep inside 引发的堆栈溢出异常`System.Text.RegularExpressions.Interpreter`。

该代码完全正确 - 它适用于 Windows。

有没有办法增加堆栈大小？还是我真的需要将较大的文件分成较小的块？

**编辑**：有问题的正则表达式如下所示：

```
 /** Regex that matches #include statements. */
    static Regex CPPHeaderRegex = new Regex(    "(([ \t]*#[ \t]*include[ \t]*[<\"](?<HeaderFile>[^\">]*)[\">][^\n]*\n)|([^\n]*\n))*", 
                                                RegexOptions.Compiled | RegexOptions.Singleline | RegexOptions.ExplicitCapture ); 
```

导致问题的源是 300kB (~8k SLOC) 或更大。

请注意，这不是我的代码，我继承了它。

# iphone - 视频混音器api？

> ID：14263154
> 
> 赞同：-2
> 
> 时间：2013-01-10T16:56:00.713
> 
> 标签：iphone, objective-c, ipad, audio, video

任何人都可以向我推荐一些适用于 iphone/ipad 的优秀视频混音器 api 来执行基本功能，例如在视频中混合音频并像在这个 facebook 应用程序中一样保存它们： [https ://apps.facebook.com/absolutremix/# *=*](https://apps.facebook.com/absolutremix/#_=_)

我宁愿不使用opengl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:52:59.247

我不认为会有一些视频和音频混合的 API。不过，Apple 在这里使用代码演示了音频混合。[http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html)

# sql - Oracle - 查找不在表中的所有日期

> ID：14263156
> 
> 赞同：4
> 
> 时间：2013-01-10T16:56:10.043
> 
> 标签：sql, oracle, date

我们有一个带有 DATE 列的表。我们如何编写一个脚本来返回未来 n 年内我们在表格中没有给定周末日期的任何周末日期（周六或周日）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:13:59.050

要获得今天和今天之间的所有周末 + 365 天：

```
select as_of_date
from
(
  select
    rownum,
    sysdate + rownum - 1 as as_of_date
  from dual
  connect by rownum <= (sysdate+365) - sysdate
) sub
where to_char(as_of_date, 'DY', 'nls_date_language=AMERICAN') in ('SAT', 'SUN') 
```

要排除给定表中存在的日期，只需添加“and not exists (select 1 from your_table y where y.the_date = as_of_date)”或类似内容，如下所示：

```
select as_of_date
from
(
  select
    rownum,
    sysdate + rownum - 1 as as_of_date
  from dual
  connect by rownum <= (sysdate+365) - sysdate
) sub
where to_char(as_of_date, 'DY', 'nls_date_language=AMERICAN') in ('SAT', 'SUN')
      and not exists (select 1 from my_table myt where myt.as_of_date = sub.as_of_date) 
```

可以简化为不使用子查询，只需将“as_of_date”列的出现次数更改为“sysdate + rownum - 1”就可以了

还值得注意的是，当我需要获取所有日期时，我使用了该查询，而不仅仅是周末。我在答案中所做的只是在最外面的查询中排除周末。如果您不想返回不需要的数据，我敢肯定最里面的查询可以更改为不经过 365 天，而只能通过周末数（即使用 where rownum < 365/5 并检索 date + ( 6,7）从周六或周日开始），但我认为这不是一个大的性能问题，所以我并不担心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:16:49.347

这类问题经常出现。它们通常涉及创建某种序列并将其映射回来。

相反，如果您可以忍受在连续丢失日期的数量之后找到丢失的日期，那么类似以下的内容将起作用：

```
select t.date+7, (nextdowdate - t.date)/7 as nummissing
from (select t.date, lead(t.date) over (partition by to_char(t.date, 'Dy') order by date) as nextdowdate
      from t
      where to_char(t.date, 'Dy') in ('Sat', 'Sun')
     ) t
where nextdowdate - t.date > 7 and
      date between FirstDate and LastDate 
```

This does assume that the first date is present and that the data extends beyond the last date. Basically, it is finding gaps between dates, then moving forward one week and counting the length of the gap.

# html - JSP 常量字符串太长

> ID：14263158
> 
> 赞同：0
> 
> 时间：2013-01-10T16:56:18.890
> 
> 标签：html, jsp

我创建了一个这样的jsp页面：

```
 <%  Object myName  = session.getAttribute("name"); 
     if(myName == null)
     {   String redirectURL = "http://www.google.com";  
         response.sendRedirect(redirectURL); 
     }
 %>
 <html>  ... some content ... </html> 
```

**html 标记内的内容约为 100k。**现在，当我尝试在 netbean/glassfish 中编译和运行它时，我收到一条错误消息：

```
constant string too long
out.write("<html>.......</html> 
```

我在某处读到它有 64k 的限制。但我根本没有使用“out.write”函数，如您所见，jsp 部分非常小。这是怎么发生的，我该如何解决？

我想要实现的是首先检查会话是否有效，如果没有则重定向。如果是，则显示内容。内容很大而且是静态的，但我无法控制它:(。无论如何我能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:58:46.990

> *但我根本没有使用“out.write”功能*

JSP 在内部使用它。您知道，JSP 文件在“JSP 编译”步骤中转换为扩展的 Java 类`HttpServlet`，所有内容都以 Java 代码结束。签出服务器工作文件夹中生成的代码以自己查看。

使用运行时 JSP 包括`<jsp:include>`用于将大片段拆分为单独的 JSP 文件。

例如

```
<body>
    <jsp:include src="/WEB-INF/header.jsp" />
    <jsp:include src="/WEB-INF/menu.jsp" />
    <p>Content</p>
    <jsp:include src="/WEB-INF/footer.jsp" />
</body> 
```

或者，如果这不符合具体的功能要求，如果 HTML 内容真的是*静态*的（即它不包含任何 JSP 脚本、标签、表达式等），另一种方法是将 HTML 内容放在它自己的`some.html`文件并由[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:import>`引用。

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
...
<body>
    <c:import url="some.html" />
</body> 
```

这样它就不会成为 JSP 源代码的一部分。

* * *

**与具体问题无关**，您的重定向逻辑缺少`return`语句。执行重定向时，所有剩余的 JSP 代码仍会被调用。此外，如果您对所有 JSP 文件重复此[*scriptlet*](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)，您会质疑是否不能更好地使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)来完成这项工作。

# java - Java - 将字节从流（带偏移量）转换为整数

> ID：14263160
> 
> 赞同：3
> 
> 时间：2013-01-10T16:56:27.923
> 
> 标签：java

我有字节流，是通过使用套接字中的 getInputStream() 方法获得的。如何从此流中读取偏移量**为 n**的 1 或 2 个字节并将它们转换为整数。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:58:44.730

您可以尝试使用`DataInputStream`which 允许您读取原始类型：

```
DataInputStream dis = new DataInputStream(...your inputStream...);
int x = dis.readInt(); 
```

**UPD：**更具体地说，您可以使用`readInt()`方法代码：

```
 int ch1 = in.read();
    int ch2 = in.read();
    int ch3 = in.read();
    int ch4 = in.read();
    if ((ch1 | ch2 | ch3 | ch4) < 0)
        throw new EOFException();
    return ((ch1 << 24) + (ch2 << 16) + (ch3 << 8) + (ch4 << 0)); 
```

~~**UPD-2：**如果您读取 2 字节数组并确定它包含完整的整数，请尝试以下操作：~~

 ~~```
 int value = (b2[1] << 8) + (b2[0] << 0) 
```~~  ~~**UPD-3：** Pff，完整的方法：

```
public static int read2BytesInt(InputStream in, int offset) throws IOException {

    byte[] b2 = new byte[2];
    in.skip(offset);
    in.read(b2);

    return (b2[0] << 8) + (b2[1] << 0);
} 
```~~

# c# - 来自 C# 的多个更新和插入

> ID：14263162
> 
> 赞同：2
> 
> 时间：2013-01-10T16:56:34.053
> 
> 标签：c#, sql-server

我正在分配一个用分号分隔的字符串`INSERT`和`UPDATES`to `SqlCommmand.CommandText`，然后调用`ExecuteNonQuery()`.

它“有效”，但我担心当字符串中有 40,000 个 INSERTS 时会发生什么。所有这些都发生在一个 SQL 事务中吗？我应该以某种方式对它们进行批量处理，批量应该有多大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:05:11.847

对于 40.000 次插入，您可能*希望*它们发生在单个事务中：这有利于性能，甚至更利于错误恢复（如果出现问题，您不会得到部分填充的表）。据我所知，它不会自动发生（即，如果您不启动一个事务，并且如果在数据库级别没有隐式*打开*事务（无论如何都需要显式提交），则没有事务）。

我建议使用带参数的准备好的查询，在循环中运行它，所有这些都在显式打开的事务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:09:26.273

如果您有强大的插入值模式，请考虑使用[用户定义的表类型](http://msdn.microsoft.com/en-us/library/bb522526%28v=sql.105%29.aspx)。您可以将`DataTable`参数作为参数传递给命令（自定义命令或存储过程）。

它比 CSV 更直接。

我同意@Anton Kovalenko - 如果您插入大量行，则应该立即执行。仅当您要插入超大（例如数百万）数量或行时，才将其拆分为多个批处理，但不要单独插入每一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:26:10.497

对于 40.000 个插入，您希望它们在多个线程中处理的单独事务中。或者您希望它们使用 SqlBUlkCopy 发生在临时表中，而不是通过字符串插入。

基本上，创建一个临时表，sqlbulkcopy 到临时表中，用插入复制过来 select from。

这比所有 SQL 文本解析都要快很多。批处理 - 好吧，我经常在插入中执行接近 100.000 行的批处理。像这样的性能大约是每秒 75k 行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T17:03:14.183

这取决于您尝试在一个命令中发送的 ob 字节总数。我知道的唯一限制是批处理大小为 65,536 * 网络数据包大小（通常为 4096）= 268 435 456 字节 [http://msdn.microsoft.com/en-us/library/ms143432.aspx](http://msdn.microsoft.com/en-us/library/ms143432.aspx)

# c# - 如果 SQL WHERE 子句为空，则不要在该子句中包含变量

> ID：14263163
> 
> 赞同：3
> 
> 时间：2013-01-10T16:56:40.247
> 
> 标签：c#, asp.net, sql, search

我在 SQL 中有一个查询，目前如果用户在文本框中输入的所有值都为空，那么当他们单击搜索时，它只会返回整个表。

```
SELECT Column Names
FROM TableName
WHERE
        FirstName LIKE '%' + @FirstName + '%'
        OR Surname LIKE '%' + @Surname + '%'
        OR City LIKE '%' + @City + '%'
        OR County LIKE '%' + @County + '%' 
```

但是，我想要做的是不包括，例如`FirstName`，如果在搜索时没有输入任何内容。因此，如果有人决定输入“ `London`”，`City`那么它将只返回那些包含伦敦的结果。同样，如果他们输入“ `John`”和“ `London`”，那么我希望所有在伦敦打电话给 John 的人都可以返回。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T16:58:35.357

```
(FirstName LIKE '%' + @FirstName + '%' OR @FirstName IS NULL ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:17:47.520

Other answers are correct but I thought i'd help by putting something back into your original query:

```
 SELECT Column Names
FROM TableName
WHERE
  ((@FirstName is null and FirstName like '%') or (isnull(FirstName ,0) = @FirstName)) and
  ((@Surname is null and Surname like '%') or (isnull(Surname ,0) = @Surname)) and
  ((@City is null and City like '%') or (isnull(City ,0) = @City)) and
  ((@County is null and County like '%') or (isnull(County,0) = @County)) 
```

You should just be able to copy and paste this out

Jim

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:57:51.940

所以你只想考虑`@FirstName`它是否有价值？你可以通过改变来做到这一点

```
FirstName LIKE '%' + @FirstName + '%' 
```

对此

```
(@FirstName = '' OR FirstName LIKE '%' + @FirstName + '%') 
```

或者当然，如果 @FirstName 以 null 而不是空字符串的形式出现，那么它将是

```
(@FirstName IS NULL OR FirstName LIKE '%' + @FirstName + '%') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T18:20:41.897

在 SQL Server 中存在 ISNULL()

然后

```
SELECT Column Names
FROM TableName
WHERE
        FirstName LIKE '%' + ISNULL((@FirstName, '') + '%'
        OR Surname LIKE '%' + ISNULL((@Surname, '') + '%'
        OR City LIKE '%' + ISNULL((@City, '') + '%'
        OR County LIKE '%' + ISNULL((@County, '') + '%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T17:11:38.030

它更麻烦，但根据数据集的大小和索引，您可以通过这条路线获得一些性能提升。

```
Declare @FirstName Nvarchar(10),
        @SurName Nvarchar(10),
        @City Nvarchar(10),
        @County Nvarchar(10),
        @SQL Nvarchar(Max),
        @OrCriteria Nvarchar(Max) = ''

Set     @SQL = 'Select  Column Names
                From    TableName '

If      @FirstName Is Not Null
Begin
        Set     @OrCriteria = @OrCriteria + 'FirstName Like ''%''' + @FirstName + '''%'' Or '
End         

If      @Surname Is Not Null
Begin
        Set     @OrCriteria = @OrCriteria + 'Surname Like ''%''' + @Surname + '''%'' Or '
End     

If      @City Is Not Null
Begin
        Set     @OrCriteria = @OrCriteria + 'City Like ''%''' + @City + '''%'' Or '
End     

If      @County Is Not Null
Begin
        Set     @OrCriteria = @OrCriteria + 'County Like ''%''' + @County + '''%'' Or '
End         

If      @OrCriteria <> ''
Begin
        Set     @SQL = @SQL + 'Where (' + Left(@OrCriteria,Len(@OrCriteria)-4) + ')'
End

Exec    sp_executeSQL @SQL 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T17:19:53.880

```
declare @sql as varchar(300)
, @FirstName as varchar(50)
, @Surname as varchar(50)
, @City as varchar(50)
, @County as varchar(50)

set  @FirstName = 'myname'
set  @Surname = 'mylastname'
set  @City = null
set  @County = 'county'

set @sql= 'SELECT Column_Names
FROM TableName ' +    
 case when rtrim(ltrim(isnull(@FirstName,'') + isnull(@Surname,'') + isnull(@City,'') + isnull(@County,''))) = '' then '' else 'where ' end
 + coalesce('FirstName LIKE ''%' + nullif(@FirstName,'')+ '%'' or ', '') +
        + coalesce('Surname LIKE ''%' + nullif(@Surname,'')+ '%'' or ', '') +
        + coalesce('City LIKE ''%' + nullif(@City,'')+ '%'' or ', '') +
        + coalesce('County LIKE ''%' + nullif(@County,'')+ '%''', '')

    select @sql 
```

的内容`@sql`应该是

```
SELECT Column_Names  FROM TableName where FirstName LIKE '%myname%' or Surname LIKE %mylastname%' or County LIKE '%county%' 
```

然后要使用您创建的动态字符串，您需要`Exec @Sql`

# webdriver - webdriver在DefinitionList下找不到元素

> ID：14263165
> 
> 赞同：0
> 
> 时间：2013-01-10T16:56:54.533
> 
> 标签：webdriver, element

我尝试在页面中找到一个文本框来发送一个值，但 WebDriver 找不到它。我尝试使用 id、name、xpath 来查找，但没有一个有效

这是代码片段

```
<dl class="user-info-fields">
  <dd>
    <input id="user_cpf" type="text" size="30" name="user[cpf]">
  </dd>
</dl> 
```

我试图在 DL 标记中找到很多信息，但 WebDriver 从未找到它。

WebDriver API 在处理 DL 下的元素时存在一些限制，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:16:59.657

我不知道您已经尝试过什么，因为您没有提供任何代码。但是您是否尝试通过 ID 找到它？

在 C# 中，这看起来像：

```
IWebElement element = webDriver.FindElement(By.Id("user_cpf")); 
```

同样，如果页面尚未加载，上述方法也可能会失败。WebDriver 有许多提供等待的内置方法（[http://seleniumhq.org/docs/04_webdriver_advanced.jsp](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)）。

测试这一点的最简单方法是在尝试查找元素之前执行一个简单的 Thread.Sleep(5000)* 。

**在生产代码中，尽量避免硬编码等待。*

# jquery - 在输入中获取插入符号位置以在 keyup 上大写单词，同时能够编辑内容

> ID：14263171
> 
> 赞同：3
> 
> 时间：2013-01-10T16:57:13.123
> 
> 标签：jquery, caret, capitalization, getcaretpos

我决定提出一个新问题，因为我试图用 4 个或更多字母大写单词的第一个字母，除了几个关键词，我有这个工作代码：http: [//jsfiddle.net/Q2tFx /11/](http://jsfiddle.net/Q2tFx/11/)

```
$.fn.capitalize = function () {
 var wordsToIgnore = ["to", "and", "the", "it", "or", "that", "this"],
    minLength = 3;

  function getWords(str) {
    return str.match(/\S+\s*/g);
  }
  this.each(function () {
    var words = getWords(this.value);
    $.each(words, function (i, word) {
      // only continue if word is not in ignore list
      if (wordsToIgnore.indexOf($.trim(word).toLowerCase()) == -1 && $.trim(word).length > minLength) {
        words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
      }
    });
    this.value = words.join("");
  });
};

$('.title').on('keyup', function () {
  $(this).capitalize();
}).capitalize(); 
```

但是我在**"keyup"**上运行该功能时遇到问题。如果光标不在输入的末尾，**我将无法在输入中间编辑某些内容。**而且我也**不能“全选”**。

我知道有一些解决方案可以获得插入符号位置并处理这样的事情，但我真的不知道如何将它们集成到我的代码中。

关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:10:16.090

你可以从这里使用两个函数来做到这一点：http: [//blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea](http://blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea)

请参阅工作 jsfiddle：http: [//jsfiddle.net/Q2tFx/14/](http://jsfiddle.net/Q2tFx/14/)

```
$.fn.capitalize = function (e) {
  if(e.ctrlKey) return false;
  var wordsToIgnore = ["to", "and", "the", "it", "or", "that", "this"],
    minLength = 3;

  function getWords(str) {
    return str.match(/\S+\s*/g);
  }
  this.each(function () {
    var words = getWords(this.value);
    $.each(words, function (i, word) {
      // only continue if word is not in ignore list
      if (wordsToIgnore.indexOf($.trim(word).toLowerCase()) == -1 && $.trim(word).length > minLength) {
        words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
      }
    });
    var pos = getCaretPosition(this);
    this.value = words.join("");
    setCaretPosition(this, pos);
  });
};

$('.title').on('keyup', function (e) {
  var e = window.event || evt;
  if( e.keyCode == 17 || e.which == 17) return false;
  $(this).capitalize(e);
}).capitalize();

function getCaretPosition (ctrl) {
    var CaretPos = 0;   // IE Support
    if (document.selection) {
    ctrl.focus ();
        var Sel = document.selection.createRange ();
        Sel.moveStart ('character', -ctrl.value.length);
        CaretPos = Sel.text.length;
    }
    // Firefox support
    else if (ctrl.selectionStart || ctrl.selectionStart == '0')
        CaretPos = ctrl.selectionStart;
    return (CaretPos);
}
function setCaretPosition(ctrl, pos){
    if(ctrl.setSelectionRange)
    {
        ctrl.focus();
        ctrl.setSelectionRange(pos,pos);
    }
    else if (ctrl.createTextRange) {
        var range = ctrl.createTextRange();
        range.collapse(true);
        range.moveEnd('character', pos);
        range.moveStart('character', pos);
        range.select();
    }
} 
```

**笔记**

您应该将这两个函数合并到您的大写函数范围中

# java - 从不同的类中获取值

> ID：14263173
> 
> 赞同：0
> 
> 时间：2013-01-10T16:57:22.397
> 
> 标签：java

我`main.java`在一个包中有一个名为的主类和 3 个类`f.java`，`graphics.java`并且`image.java`

我在 f.java 中有一个私有 int R，有`setR()`和`getR()`有

现在我需要获取该值（来自 getR()）`graphics.java`

我需要一个连接这两个的接口，还是只是一个演员问题？

试着给我一些 graphics.java 的代码，这样我就能得到那个值！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:06:18.827

如果我理解得很好，您想返回一个私有变量，对吗？

如果是，请遵循此示例，该示例声明一个变量“sum”并返回它：

```
 private double sum = 0;

  public double getSum()
  {
       return sum;
   } 
```

然后调用 getSum() 方法创建一个返回该方法并显示它的类的对象，如下所示：

```
 FileProcessor anObject = new FileProcessor();

  System.out.println("Returned value is: "+anObject.getSum() ); 
```

注意：使用 Java 代码约定；类名必须是这样的，而不是单个字母 & 必须是有意义的：

```
FileProcessor.java //manipulates a file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:00:30.720

只要 R 的 getter 和 setter 是公共的，就不需要接口来做你想做的事。这就是 getter 和 setter 的想法。当然，为了获得 R，您需要有一个`f`作为属性的类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:00:54.433

您需要将对对象实例的引用传递`f`给您的`graphics`对象实例。`graphic`然后，您应该可以从您的对象中调用`getR()`

# iphone - 核心图中的自定义 X 轴

> ID：14263174
> 
> 赞同：0
> 
> 时间：2013-01-10T16:57:26.320
> 
> 标签：iphone, ios, objective-c, cocoa-touch, core-plot

我在 Core Plot 的示例项目中有这个 X 轴，我想知道如何对它进行一点自定义。如您所见，它目前在 X 轴上只有 3 个值： ![在此处输入图像描述](../Images/6c056b29960ea1191deac6f24a1d4fc5.png)

但是我拥有的两个图（黑色和灰色）的值远远超出了 X 轴上的点数（29 对 3 点）。因为我有 3 个点，所以每个图只显示 3 个值。我想继续在轴上显示剩余的 3 个点，但要为我的绘图容纳所有 29 个事件（它们可以显示在 1 点和 2 点的中间）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T02:03:55.643

增加`xRange`绘图空间的长度。所需的值取决于绘图数据。

# django - Heroku Django 静态

> ID：14263177
> 
> 赞同：0
> 
> 时间：2013-01-10T16:57:29.773
> 
> 标签：django, heroku

静态图像是否会在不久后过期并自动被删除？

我的情况是我通过模型的 ImageField 从我的 PostgreSQL 数据库中检索图像，方法是将其设置`upload_to`为`static/images`. 然后，我通过`mysitesurl.com/static/images/model.url`这最初完美地访问图像。但是，几个小时后，我注意到图像不再可访问。当我尝试通过相同的 url 访问它们时，它们不再存在。我不做任何手动图像删除，所以我执行的操作不应该干扰这个。

这是 Heroku 做的我不明白的事情吗？

另外，我注意到一个奇怪的现象是图像仍然可以通过 url 访问，但它实际上并没有保存到`static/images`. 至少，当我运行时`heroku run ls static/images`，它不存在。这是在heroku中检查目录内容的正确方法吗？

编辑：我的配置

```
STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    'static',
    'static/uploaded_stuff/',
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:35:41.303

您可以`heroku run bash --app YOUR_APP`从存储库目录运行。这会为您的 Heroku 实例创建一个 shell，允许您浏览文件。

您可以通过这种方式检查静态图像。

不过，我建议使用 S3 来提供静态图像。您可以查看有关如何集成它的教程： [http ://blog.doismellburning.co.uk/2012/07/14/using-amazon-s3-to-host-your-django-static-files/](http://blog.doismellburning.co.uk/2012/07/14/using-amazon-s3-to-host-your-django-static-files/)

了解更多详细信息后，您尝试允许用户上传，而 Heroku 的文件系统是只读的。对于静态/上传的文件，您需要使用 S3 或类似的托管解决方案。 [https://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)

# php - 使用 $_FILES 超全局

> ID：14263182
> 
> 赞同：-4
> 
> 时间：2013-01-10T16:57:39.663
> 
> 标签：php, file, superglobals

我想 `$_FILES['name']['size']`用来查看上传的文件大小是否大于 1MB。我怎样才能做到这一点？我在 if 语句中使用什么大小？

像这样？：

```
if ( $_FILES['name']['size'] >= 1Mb) {
    // do this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:59:22.047

不，因为这是一个字符串，并且大小是字节的整数。

鉴于 1Mb 是 1000Kb 是 1,000,000b，这将起作用：

```
if ( $_FILES['name']['size'] >= 1 * 1000 * 1000) 
```

我假设您的意思是 MB，因为文件以字节 (B) 而不是位 (b) 表示。在这种情况下，请使用 1024 而不是 1000（1MB = 1024KB。1KB = 1024B）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:59:13.327

大小以字节表示。1 MB 是 1024 * 1024 字节。

```
if ( $_FILES['name']['size'] >= 1024 * 1024) {
    // do this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:06:17.557

大小值以字节为单位。所以 1MB 是 1048576

[MB -> 字节](http://en.wikipedia.org/wiki/Megabyte)

[PHP $_FILES 超全局数组信息](http://php.net/manual/en/reserved.variables.files.php#89674)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T17:00:40.513

从[手册](http://php.net/manual/en/features.file-upload.post-method.php)：

> `$_FILES['userfile']['size']`
> 
> 上传文件的大小，**以字节为单位。**

1MB 是*(1024*1024)*字节（或 1048576B），所以：

```
if ($_FILES['name']['size'] >= 1024*1024) {
    // do this;
} 
```

*请使用文档。*

# android - Android中的greenrobot EventBus发布事件

> ID：14263183
> 
> 赞同：7
> 
> 时间：2013-01-10T16:57:46.110
> 
> 标签：android, event-bus

通过使用 EventBus，我需要在一个 Activity 中发布一个事件（MyEvent）并在 Android 中的另一个 Activity 中接收该事件。我尝试了 greenrobot EventBus 性能测试项目，但不知道该怎么做。

**我在ActivitySubscriber**中尝试过

 **```
MyEvent event = new MyEvent();
EventBus.getDefault().post(event); 
```

并尝试在**ActivityReceiver**中接收事件

```
EventBus.getDefault().register(this);

public void onEvent(MyEvent event){
....
} 
```

但我无法收到该事件。谁能让我知道我在哪里做错了？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-04T06:18:44.920

由于它们是两个活动，因此在尚未创建或处于停顿模式 ( )`ActivitySubscriber`时发布事件。您需要使用粘性事件，即`ActivityReceiver``onStop()`

*   `ActivitySubscriber.postSticky(...)`

对于 ActivityReceiver，您有两个选择：

*   `EventBus.getDefault().register(this)`在那之后的某个地方`EventBus.getDefault().getStickyEvent()`
*   `EventBus.getDefault().registerSticky()`然后使用常规`EventBus.getDefault().onEvent(...)`

**更新：** EventBus 3.0 改变了订阅方式。

不需要以特定后缀而是注释结尾的方法名称。

如何使用版本 3：

```
//// in your build.gradle
compile 'de.greenrobot:eventbus:3.0.0-beta1'
// alternatively you can target latest whatever currently
// compile 'de.greenrobot:eventbus:+'

//// from a class which needs to dispatch an event
// posting an event is as before, no changes
// here we dispatch a sticky event
EventBus.getDefault().postSticky(myStickyEvent);

//// from your class which needs to listen
// method name can be any name
// any of subscribe params is optional, i.e. can use just @Subscribe
@Subscribe(threadMode = ThreadMode.MainThread, sticky = true, priority = 1)
public void onEventBusEvent(@Nullable final StickyEvent stickyEvent) {
    if (stickyEvent != null) {
      ...
      // optionally you can clean your sticky event in different ways
      EventBus.getDefault().removeAllStickyEvents();
      // EventBus.getDefault().removeStickyEvent(stickyEvent);
      // EventBus.getDefault().removeStickyEvent(StickyEvent.class);
    }
} 
```

有关版本 3 的更多详细信息和比较：

*   [http://androiddevblog.com/eventbus-3-droidcon/](http://androiddevblog.com/eventbus-3-droidcon/)
*   [http://androiddevblog.com/wordpress/wp-content/uploads/EventBus3.pdf](http://androiddevblog.com/wordpress/wp-content/uploads/EventBus3.pdf)

从来源中提取的一些细节：

*   `ThreadMode.PostThread`

    > 订阅者将在发布事件的同一线程中被调用。这是默认设置。事件传递意味着最少的开销，因为它完全避免了线程切换。因此，对于已知可以在很短的时间内完成而不需要主线程的简单任务，这是推荐的模式。使用此模式的事件处理程序必须快速返回以避免阻塞可能是主线程的发布线程。

*   `ThreadMode.MainThread`

    > 订阅者将在 Android 的主线程（有时称为 UI 线程）中调用。如果发布线程是主线程，将直接调用事件处理方法。使用此模式的事件处理程序必须快速返回以避免阻塞主线程。

*   `ThreadMode.BackgroundThread`

    > 订阅者将在后台线程中调用。如果发布线程不是主线程，则事件处理方法将直接在发布线程中调用。如果发布线程是主线程，EventBus 使用单个后台线程，它将按顺序传递其所有事件。使用此模式的事件处理程序应尽量快速返回以避免阻塞后台线程。

*   `ThreadMode.Async`

    > 事件处理程序方法在单独的线程中调用。这始终独立于发布线程和主线程。发布事件从不等待使用此模式的事件处理程序方法。如果它们的执行可能需要一些时间，例如网络访问，事件处理程序方法应该使用这种模式。避免同时触发大量长时间运行的异步处理程序方法，以限制并发线程数。EventBus 使用线程池从已完成的异步事件处理程序通知中有效地重用线程。

*   **默认**值`@Subscribe`
    *   `threadMode = ThreadMode.PostThread`
    *   `sticky = false`- 如果为真，则提供最近的粘性事件（与`de.greenrobot.event.EventBus.postSticky(Object)`此订阅者一起发布（如果事件可用）
    *   `priority = 0`- 订阅者优先级影响事件传递的顺序。在同一交付线程中，优先级较高的订阅者将在其他优先级较低的订阅者之前收到事件。默认优先级为0。注意：优先级不*影响*不同线程模式的订阅者之间的传递顺序。

# 编辑 2

现在有一个专门的站点可以解决来自 lib 创建者的任何 Greenrobot EventBus 问题：

[http://greenrobot.org/eventbus/](http://greenrobot.org/eventbus/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-25T23:56:09.663

1.  添加

`dependencies { .. compile 'org.greenrobot:eventbus:3.0.0' .. }`

进入 Modules Build gradle 的依赖部分

2.  创建一个 MessageEvent 类，如

```
public final class MessageEvent {
    private MessageEvent() { 
       throw new UnsupportedOperationException("This class is non-instantiable");
      }

     public static class Message1{
        public String str1;
        public Message1(String str) {
            str1 = str;
        }
      }

     public static class Message2{
        public String str2;
        public  Message2(final String str) {
            str2 = str;
        }
      }
    }

// so on
```

3.  假设我们有 Fragment1 并且有一个按钮可以向 MainActivity 发送消息

```
public class Fragment1 extends Fragment {

  private View frView;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  }

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup
     container, Bundle savedInstanceState) {
     frView = inflater.inflate(R.layout.fragment1, 
                               container, false);

     btn = (Button) frView.findViewById(R.id.button);
     btn.setOnClickListener(new View.OnClickListener() {

     @Override
     public void onClick(View view) {
       frView.setBackgroundColor(Color.RED);
       EventBus.getDefault().post(new MessageEvent.Message1("1st message"));
       EventBus.getDefault().post(new MessageEvent.Message2("2nd message"));
        }
     });
    return frView;
    }
```

3.  最后结束 MainActivity 听并做动作

```
public class MainActivity extends AppCompatActivity  {

    @Override
    protected void onStart() {
        super.onStart();
        EventBus.getDefault().register(this);
    }

    @Override
    protected void onStop() {
        EventBus.getDefault().unregister(this);
        super.onStop();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Fragment1 Fragment1 = new Fragment1();
        getFragmentManager().beginTransaction().replace(
         R.id.activity_main, Fragment1, 
         "Fragment 1").commit();
    }

    @Subscribe(threadMode = ThreadMode.MAIN)
    public void onMessage1(MessageEvent.Message1 event) {
        Toast.makeText(getApplication(), event.str1,
                       Toast.LENGTH_LONG).show();
    }

    @Subscribe(threadMode = ThreadMode.MAIN)
    public void onMessage2(MessageEvent.Message2 event) {
        Toast.makeText(getApplication(), event.str2,
                       Toast.LENGTH_LONG).show();
    }
}
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-20T09:52:32.227

在 ActivityReceiver 类中，替换

```
EventBus.getDefault().register(this); 
```

和

```
EventBus.getDefault().register(this, MyEvent.class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-26T11:47:00.023

这实际上取决于此代码存在的时间和地点。请记住，您必须先注册事件才能接收它们，并且注册发生在运行时，而不是编译时。

因此，您必须确保在注册第二个活动*后发布该活动。*我会简单地在以下几行中放置一些断点，并确保调试器在此处停止：

```
EventBus.getDefault().register(this); 
```

在你到达这里之前：

```
EventBus.getDefault().post(event); 
```**

# symfony - symfony2 EWZRecaptchaBundle 额外字段

> ID：14263184
> 
> 赞同：0
> 
> 时间：2013-01-10T16:57:46.403
> 
> 标签：symfony, recaptcha

我对 EWZRecaptcha Bunlde (dev-master) 和 symfony 2.1.0 有疑问。reCaptcha 显示正确，图像发生变化，所以我认为配置没问题。但是 reCaptcha 没有经过验证，提交后`$form->getErrorsAsString()`说：这个表单不应该包含额外的字段。

好吧，我认为额外的字段是`recaptcha_challenge_field`从`recaptcha_response_field`reCaptcha 发送的，但我认为我错过了文档中[的](https://github.com/excelwebzone/EWZRecaptchaBundle)某些内容，所以它们有什么问题？

对于验证，我使用文档中的代码[：（](https://github.com/excelwebzone/EWZRecaptchaBundle)我也尝试了替代方法，那里提到了）

```
use EWZ\Bundle\RecaptchaBundle\Validator\Constraints as Recaptcha;
//...
/**
* @Recaptcha\True
*/
public $recaptcha;
//... 
```

在配置中：

```
framework:
    validation: { enable_annotations: true } 
```

我添加了这样的字段：

```
$builder->add('recaptcha', 'ewz_recaptcha', array(
                'property_path' => false,
                'attr' => array(
                    'options' => array(
                        'theme' => 'clean'
                    )
                )
)); 
```

也许我忘记了一些重要的东西，文档中没有提到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:53:50.507

终于找到了解决办法！
为了摆脱`extra fields`我在表单类中添加了这两个字段：

```
$builder->add('recaptcha_challenge_field', 'hidden', array('property_path' => false));
$builder->add('recaptcha_response_field', 'hidden', array('property_path' => false)); 
```

然后验证适用于：

```
use EWZ\Bundle\RecaptchaBundle\Validator\Constraints\True;
...
'constraints'   => array(
                    new True()
                ) 
```

注释对我不起作用**：**

```
use EWZ\Bundle\RecaptchaBundle\Validator\Constraints AS Recaptcha;
...
/**
 * @Recaptcha\True
 */
public $recaptcha; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:26:33.650

可能尝试向构建器添加“约束”选项。我的 recaptcha builder 添加如下所示：

```
 $builder->add('recaptcha', 'ewz_recaptcha', array(
                        'attr'          => array(
                            'options' => array(
                                'theme' => 'red'
                            )
                        ),
                        'label' => "Verification",
                        'property_path' => false,
                        'constraints'   => array(
                            new True()
                        ),
                        'help' => "Enter the words in the box for verification purposes."
                    )); 
```

因此，为约束添加一个“使用”语句：

```
use EWZ\Bundle\RecaptchaBundle\Validator\Constraints\True; 
```

然后添加约束选项：

```
'constraints'   => array(
    new True()
), 
```

# javascript - 停止 Javascript 代码执行然后恢复它

> ID：14263188
> 
> 赞同：1
> 
> 时间：2013-01-10T16:57:55.397
> 
> 标签：javascript, jquery

有什么方法可以停止代码执行然后恢复它？例如，下一个代码将不会运行，直到更改标志值然后恢复它。

编辑：我有一个启动 AJAX 请求循环的代码，当用户访问浏览器的其他选项卡以停止它时，我需要控制（如果可能，使用标志）循环。然后，当用户返回应用程序时，循环将继续。

该问题将通过`setInterval`AJAX 请求和阻止它们的标志来解决。但我认为从成功 ajax 函数执行 AJAX 请求循环更正确，即在响应完成时，因为我使用 MVC 模式并且在模型中有 ajax 函数并且调用是从视图中完成的. 然后，循环`setInterval`会从错误的一侧开始

但是，我认为“setInterval”可能在 AJAX 调用函数中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:08:49.600

您可以使用多种方法中的任何一种来检测浏览器选项卡何时变为非活动状态（我喜欢使用 JQuery 在文档上设置焦点和模糊事件，但还有其他技术），但我认为您正在寻找的模式是“在完成时设置自己的新超时的闭包”而不是`setInterval`.

```
var active = true;
function myloop()
{
    if (active)
    {
        $.ajax(/*...*/).done(function(j)
        {
            /* do stuff */ 
            window.setTimeout(myloop, interval);
        });
    }
} 
```

在这种情况下，当您检测到选项卡或窗口再次变为活动状态时，您需要再次设置`active = true` *并*调用。`myloop()`When the tab becomes inactive, set `active = false`. 当前运行的 AJAX 请求将安全完成；但是在您手动重新启动循环之前不会发出进一步的请求。

# java - Java：将 Soundex 算法用于庞大的数据库

> ID：14263191
> 
> 赞同：-1
> 
> 时间：2013-01-10T16:58:02.637
> 
> 标签：java, sql, database, soundex

我一直在使用 Soundex 算法，我发现它已经在 J​​ava [http://introcs.cs.princeton.edu/java/31datatype/Soundex.java.html](http://introcs.cs.princeton.edu/java/31datatype/Soundex.java.html)中准备好了。该程序的主要用途是准备一个 .cvs 文件，然后在将其条目保存到数组中之后，它会借助该算法检查其中一个数组的语音相似性。（有关 soundex 算法的更多信息[http://en.wikipedia.org/wiki/Soundex](http://en.wikipedia.org/wiki/Soundex)）。

我的 .cvs 文件大约有 200.000 个条目，因此，检查 30.000 个条目需要 5 个小时，我认为这很慢。[我的算法将数组的每个条目与所有其他条目一起检查，除了已经检查过的条目 - 所以，我认为这里没有问题]。

所以，我的问题是：有没有办法减少这个时间？

我一直在考虑在 SQL 的帮助下将我的数据库直接连接到程序，但我不知道是否有另一种方法可以更快地做到这一点。

请任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:07:59.240

我不知道 Java 算法是如何工作的。很多数据库都包含一个`soundex()`功能。这会将一个字符串转换为另一个表示声音的字符串。

然后，您可以在生成的 soundex 字符串之间进行比较。

这应该比您当前的方法快得多。您必须对其进行测试以查看它是否返回可接受的结果。

实际上，我只是看了一下java代码。你可以在那里采取同样的方法。浏览文件，计算每个条目的 soundex。然后进行比较——也许通过对文件进行排序并查找重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:45:56.770

只需在您的数据库中使用 soundex 实现。大多数流行的大型数据库都内置了它，例如[PostgreSQL](http://www.postgresql.org/docs/8.3/static/fuzzystrmatch.html)、[MySQL](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)甚至微软的[T-SQL](http://msdn.microsoft.com/en-us/library/ms187384.aspx)。与您使用的任何 Java 库相比，它会更容易设置并且可能更快。

# javascript - 在 highcharts/miso 中渲染图表

> ID：14263193
> 
> 赞同：0
> 
> 时间：2013-01-10T16:58:08.113
> 
> 标签：javascript, highcharts

我正在尝试使用 Highcharts.js 和 misodatest (www.misoproject.com/dataset)。我所做的只是添加了[http://misoproject.com/dataset/examples/highstockandcsv.html](http://misoproject.com/dataset/examples/highstockandcsv.html)中给出的示例脚本。

它不会运行，所以我将它编辑为我认为应该发生的情况，我将示例中的一些内容放入函数（）中。现在，我完全没有错误，这将是很棒的。但是我的页面中根本没有任何信息，我不知道为什么，图表根本没有呈现。

这是我的代码：

```
<!DOCTYPE html>
<html>
   <head>

   </head>
   <body>
      <br>
        <div id="test" style="max-width: 800px; height: 300px; margin: 0 auto"></div>  <!-- Container for Highcharts map. -->

   </body>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
      <script src="json2.js"></script>
      <script src="lodash.js"></script>
      <script src="moment.js"></script>
      <script src="underscore.deferred.js"></script>
      <script src="underscore.math.js"></script>
      <script src="http://code.highcharts.com/highcharts.js"></script>
      <script src="miso.ds.0.3.0.js"></script>

<script> 
  function chart() {

  var ds = new Miso.Dataset({
  url : "crudeoil.csv",
  delimiter : ",",
  columns : [{ name : "Year", type : "time", format : "YYYY" }]
    }); 

ds.fetch({
  success : function() {
    chart = new Highcharts.Chart({
      chart: {
        renderTo: 'test',
        type: 'column',
        marginRight: 130,
        marginBottom: 25
      },
       title: {
       text: 'World Crude Oil Barrel Production (1,000) per unit',
       x: -20 //center
      },
       subtitle: {
       text: 'Src: http://www.infochimps.com/datasets/world-crude-oil-production-1980-to-2004',
       x: -20
      },
       xAxis: {
         categories: _.map(this.column("Year").data, function(year) { 
         return year.format("YY"); 
       })
      },
       yAxis: {
         title: {
         text: this.columnNames()[1]
      },
       plotLines: [{
         value: 0,
         width: 10000,
         color: '#808080'
      }]
      },
       tooltip: {
         formatter: function() {
         return '<b>'+ this.series.name +'</b><br/>'+
         this.x +': '+ this.y;
      }
    },
       legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -10,
        y: 100,
        borderWidth: 0
    },
       series: [{
        name: 'World Production',
        data: this.column("Crude oil production (1000 barrels per day)").data
      }]
    });
  }
});
}
</script>
</html> 
```

我知道我可能只是没能掌握一些基本的东西，作为一个初学者 JS 开发者，我通过犯很多错误学到了很多东西。非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:08:19.467

看来我已经修好了。我需要将 $(document).ready( 添加到包含所有脚本的函数中。所以：

```
$(document).ready(function() {

  var ds = new Miso.Dataset({
  url : "crudeoil.csv",
  delimiter : ",",
  columns : [{ name : "Year", type : "time", format : "YYYY" }]
    }); 

ds.fetch({
  success : function() {
    chart = new Highcharts.Chart({
      chart: {
        renderTo: 'test',
        type: 'column',
        marginRight: 130,
        marginBottom: 25
      },
      title: {
      text : 'World Crude Oil Barrel Production (1,000) per unit',
        x: -20 //center
      },
      subtitle: {
        text: 'Src: http://www.infochimps.com/datasets/world-crude-oil-production-1980-to-2004',
        x: -20
      },
      xAxis: {
        categories: _.map(this.column("Year").data, function(year) { 
          return year.format("YY"); 
        })
      },
      yAxis: {
        title: {
          text: this.columnNames()[1]
        },
        plotLines: [{
          value: 0,
          width: 10000,
          color: '#808080'
        }]
      },
      tooltip: {
        formatter: function() {
          return '<b>'+ this.series.name +'</b><br/>'+
          this.x +': '+ this.y;
        }
      },
      legend: {
          layout: 'vertical',
          align: 'right',
          verticalAlign: 'top',
          x: -10,
          y: 100,
          borderWidth: 0
      },
      series: [{
          name: 'World Production',
          data: this.column("Crude oil production (1000 barrels per day)").data
      }]
    });
  }
});
}); 
```

万一有人遇到同样的问题，我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T09:23:32.677

实际上输出是计算并保存在 js 控制台中的。你不是说要在 html 级别显示它。为了解决这个问题，将 js 控制台的输出传递给 html 输出。

在 chrome 中，转到开发工具（F12）并转到控制台。在那里，您可以看到问题中给出的代码所需的输出。这样输出就显示出来了，把它拿出来放到html前面。为此，您可以使用此答案中的方法：[Javascript：console.log to html](https://stackoverflow.com/questions/20256760/javascript-console-log-to-html)

[![chrome dev tools 的 js 控制台输出是这样的](../Images/e505ca7114fca9805e09f953ae800684.png)](https://i.stack.imgur.com/ZNGrY.png)

# php - 结合静态和随机盐

> ID：14263198
> 
> 赞同：2
> 
> 时间：2013-01-10T16:58:19.753
> 
> 标签：php, mysql, crypt

> **可能重复：**
> [使用随机盐改进密码散列](https://stackoverflow.com/questions/9420722/improve-password-hashing-with-a-random-salt)

是否有有效的安全理由来生成随机盐，然后将其存储在与密码和静态盐相同的数据库中？

例如：

```
$hashedPass = crypt($pass, $staticsalt.createRandomSalt());// just an example for sanity 
$user->setPass = hashedPass;
$hash->setSalt = createRandomSalt();//assuming same result... 
```

我知道安全社区建议对哈希使用现有列（如用户名），但我真的没有看到任何意义。如果数据库被黑客入侵，攻击者也会获得用户名......而如果它位于单独的列/表中，我可以加入额外的安全措施。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:04:31.403

如果您要生成每条记录的盐，则必须将盐与散列密码一起存储**。**否则你将永远无法验证密码，例如

注册用户：

```
$salt = rand_salt();
$pw = 'foo';
$hashed = md5($salt . $pw); 
```

登录：

```
$pw = $_POST['password'];
$hashed = md5($pw);  // oops... no salt. can't hash the pw properly anymore. 
```

如果您的服务器被黑客入侵，那么散列、盐、用户名分布在哪个数据库中并不重要——它们会被淘汰。

但至少有了盐，你让攻击者的工作变得更加困难，因为现在他们的脚本小子彩虹表不再适用了。`12345`他们为常用密码（ ,等...）预先生成了哈希值`password`，但`2d%@#41234xrs12345`or没有`89yusdf;hjlk2342sdf@@password`。

# iphone - 自定义 UITable & 设置滚动窗口

> ID：14263200
> 
> 赞同：0
> 
> 时间：2013-01-10T16:58:30.973
> 
> 标签：iphone, ios, xcode, uitableview

我有一个自定义 UITableViewCell、页眉和页脚。页眉和页脚是四舍五入的，但行显示在表格后面。如何将滚动窗口设置为仅位于页眉下方和页脚顶部的区域内。

页眉和页脚具有透明背景。

见下面的图片![表格的快照...延伸到标题之外](../Images/bb4a7136946f5c730d5360735726a6c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:06:00.917

发生这种情况的原因是因为您正在为浮动在其行上方的部分使用标题。

您应该做的是将您的“标题”添加到 UIView 的顶部，而不是将其作为部分标题，这将使“最近存款”图像静态保持在顶部，并且您的行不会在其下方浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:03:53.317

最简单的方法是重绘页眉/页脚——移除透明区域/填充一些颜色

# c# - 显示消息后关闭应用程序

> ID：14263202
> 
> 赞同：2
> 
> 时间：2013-01-10T16:58:37.880
> 
> 标签：c#, exit, messagebox

我有以下代码...

```
MessageBox.Show("Your session has been remotely terminated.");
Application.ExitThread; 
```

我试图弄清楚如果用户没有点击“确定”按钮，是否有办法在短时间内自动关闭 MessageBox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:02:54.150

您还可以使用称为 UI 自动化的 Microsoft 技术

# vba - 将替换功能与 VBA 一起使用会丢失域代码信息

> ID：14263204
> 
> 赞同：0
> 
> 时间：2013-01-10T16:58:41.623
> 
> 标签：vba, search, powerpoint

我需要使用 VBA 替换 PowerPoint 演示文稿模板中的部分文本框。同一个框包含幻灯片编号的域代码（是正确的短语吗？）。当我对模板中的每个形状 oSh 执行以下代码时：
`If oSh.HasTextFrame Then`
`oSh.TextFrame.TextRange.Text = Replace(oSh.TextFrame.TextRange.Text, searchString, newString)`
`End If`
有关字段代码的信息消失了 - 幻灯片编号已损坏。例如，如果形状有“这是幻灯片编号”后跟幻灯片编号域代码，那么如果我将“这是幻灯片编号”替换为“幻灯片”，文本将显示为“幻灯片 <#>”。

当我使用 PowerPoint 的“替换”功能时，该功能被保留（幻灯片编号仍然有效）。它有什么不同？更重要的是 - 如何在不破坏幻灯片编号的情况下替换子字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T15:39:06.860

“当我使用 PowerPoint 的“替换”功能时，功能被保留（幻灯片编号仍然有效）。它有什么不同？更重要的是 - 如何在不破坏幻灯片编号的情况下替换子字符串？

第一句不是回答了第二句提出的问题吗？;-)

例如，此片段将在演示文稿中每张幻灯片上的每个形状上执行您要求的替换：

```
Dim oSl As Slide
Dim oSh As Shape
For Each oSl In ActivePresentation.Slides
    For Each oSh In oSl.Shapes
        oSh.TextFrame.TextRange.Replace "This is the slide number", "Slide"
    Next
Next 
```

使用 PPT 自己的替换功能也解决了许多其他问题……例如，它在保留混合格式方面做得很好。

它与原生 VB/VBA 替换功能有何不同？像这样的特定于应用程序的功能可以是应用程序感知的，即，可以是特定应用程序支持的功能的特例。

# mysql - 使用 base64 字符串将图像插入 Crystal Report

> ID：14263207
> 
> 赞同：2
> 
> 时间：2013-01-10T16:58:44.733
> 
> 标签：mysql, sql-server, image, crystal-reports, base64

我有一个 base64 编码的图像作为 blob 存储在我的数据库中，我想将它插入到没有 fileupload 字段的 Crystal Report 中。我环顾互联网，只能找到文件上传字段的方法。

我在某处读到，如果要显示图像，则需要在 sql 中加载二进制代码。所以我在 MSSQL/MySQL 服务器中有一个带有 varbinary(max) 的二进制代码，我将它加载到水晶报告中，但图像仍然没有显示。我确实看到这是一个图像，因为我看到了红色的 X。

我还应该将我从 sql server 获得的二进制值转换为什么东西吗？我想要做的甚至可能吗？如果是这样，请描述这样做的方法。

# actionscript-3 - 在 actionscript 中使用 Malgun Gothic 系统字体

> ID：14263210
> 
> 赞同：0
> 
> 时间：2013-01-10T16:59:01.530
> 
> 标签：actionscript-3, fonts

对于一个国际项目，我需要在 Flash 中显示韩国字母/标志。
因为大多数包含“亚洲 unicode 范围”的字体太大而无法完全嵌入到 swf 中，所以我坚持`Malgun Gothic`作为一种字体。它已预装在 Windows（至少 7 个）上，因此无需加载任何内容。

使用我的德语 Windows7 安装，我只能说

```
new TextFormat('Malgun Gothic'); 
```

并且显示正确，但在韩国无法识别字体（-name）。
有人试过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:54:02.353

我建议为不同的语言加载不同的字体库。这样您就可以从大量下载中拯救非韩国用户。[我使用我在此处的博客](http://blog.sitedaniel.com/2008/10/fontcontrol-class-external-font-library/)中概述的技术为中文做了类似的事情

# asp.net - 从网格视图中检索单元格数据以在文本框 VB ASP.NET 中输出

> ID：14263219
> 
> 赞同：1
> 
> 时间：2013-01-10T16:59:25.633
> 
> 标签：asp.net, vb.net, visual-studio-2010

我正在 Visual Studio 2010 上创建一个网站。我正在使用 Visual Basic 编码在 asp.net 上创建它。我是一名大学生，并且是这个的初学者。

基本上，我创建了一个 sqlDataSource 和一个网格视图，并将它们与下拉框链接在一起，以便用户可以优化他们的表格结果。在网格查看器上，我还打开了“选择”功能，以便用户可以选择一行。

我正在努力做的是在网格视图中检索所选行的至少一个单元格并将其放入同一页面上的文本框中。我要检索的主要单元格是 ID，以便我以后可以使用。

请你帮我找到一个合适的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:15:34.193

这是在 C# 中，但事件与您的目标相同。当用户选择一行时，将触发此事件并检索所选行。获得选定行后，您可以使用列的索引获取该行的任何列值。

```
void GridView1_SelectedIndexChanged(Object sender, EventArgs e)
{
    // Get the currently selected row using the SelectedRow property.
    GridView1 row = GridView1.SelectedRow;

    // You could access any cell in the row by doing row.cells(index)
    MessageLabel.Text = "You selected " + row.Cells[2].Text + ".";
} 
```

希望有帮助！

**编辑**

**VB**

```
Sub GridView1_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs)

    ' Get the currently selected row using the SelectedRow property.
    Dim row As GridViewRow = GridView1.SelectedRow

    MessageLabel.Text = "You selected " & row.Cells(2).Text & "."

  End Sub 
```

# asp.net-mvc-3 - ASP.NET MVC 基于 DB 调用填充 DropDownListFor

> ID：14263220
> 
> 赞同：0
> 
> 时间：2013-01-10T16:59:27.553
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在构建一个简单的 ASP.NET MVC 3 站点，使用 Entity Framework 来构建基于现有 Oracle 数据库中的一些表的模型（换句话说，我使用“数据库优先”方法来构建我的模型）。我现在有一个简单的博客类型网站，我对它非常熟悉，因为我一直在学习多种语言的 MVC。

我想更改一些自动生成的视图。我特别想更改的一点是，我的一张表中有一个名为“Visible”的字段。这只是一个数值（0 或 1），指示显示应用程序是否应将该行用作显示数据。目前，我有一个自动生成的简单文本字段：

```
<div class="editor-field">
    @Html.EditorFor(model => model.VISIBLE)
    @Html.ValidationMessageFor(model => model.VISIBLE)
</div> 
```

我想要做的是用带有 True 和 False 之类的字符串值的下拉框替换它。应用程序应将任何带有 0 的条目显示为假，反之亦然。如果用户想要翻转切换，下拉菜单应该允许他们这样做并理解在单击提交时进行数字更新。如何才能做到这一点？

我见过无数的例子，下拉列表将填充两个以上的值，在这些情况下，我知道您可以向控制器添加逻辑，以提取所有不同的值，将它们放入列表中，然后将列表添加到 ViewBag。但是，在我只有两个可能的数值的情况下，似乎应该有一种更简单、更被接受的方法来做到这一点。

任何帮助是极大的赞赏。

**更新**

按照 Quinton 的回答，我正在尝试将所述代码放入我的模型中。这是我目前的模型：

```
 namespace CurrentActivityBlog
    {
        using System;
        using System.Collections.Generic;
        using System.Web.UI.WebControls;

        public partial class TBLCURRENTACTIVITY
        {
            public string TITLE { get; set; }
            public string DESCRIPTION { get; set; }
            public System.DateTime DATETIME { get; set; }
            public short VISIBLE { get; set; }
            public decimal ID { get; set; }

            public IEnumerable<SelectedListItem> PossibleValues { get; set; }

        public TBLCURRENTACTIVITY() {
          PossibleValues = new[] { new SelectListItem { Value = "0", Text = "Hidden"       },              
              new SelectListItem { Value = "1", Text = "Visible" } }; 
        }

        }
    } 
```

我无法构建此解决方案，但 Visual Studio 2010 告诉我

*“找不到类型或命名空间名称‘SelectedListItem’（您是否缺少 using 指令或程序集引用？）”*

如你所见，我有

使用 System.Web.UI.controls

并添加了对 System.Web 的引用。有什么我忘记的，或者我应该知道的任何事情（例如使用 EF 生成的模型的行为与预期不同，等等）？

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:30:22.783

一条线的解决方案是：

```
@Html.DropDownList(Model.VISIBLE.ToString(), new [] {new SelectListItem { Value = "0", Text = "Hidden"}, new SelectListItem { Value = "1", Text = "Visible"}}) 
```

但您可能不希望您的视图中出现域逻辑。因此，将可能的项目添加到您的模型（或从控制器）：

```
 public class MyModel {
        public int VISIBLE { get; set; }
        public IEnumerable<SelectListItem> PossibleValues { get; set; }

        public MyModel() {
            PossibleValues = new[] { new SelectListItem { Value = "0", Text = "Hidden" }, new SelectListItem { Value = "1", Text = "Visible" } }; 
        }
    } 
```

然后是你的剃须刀代码：

```
 @Html.DropDownList(Model.VISIBLE.ToString(), Model.PossibleValues) 
```

显然，“隐藏”和“可见”描述可以替换为“假”和“真”或其他。

您还可以`Editor and Display Template`为该特定字段创建和。[在此处](http://weblogs.asp.net/scottgu/archive/2009/07/31/asp-net-mvc-v2-preview-1-released.aspx)查看 ScottGu 的博客文章，搜索“UI Helper Templating Support”，您将了解如何创建编辑器模板以及如何按名称呈现特定模板。

**编辑：**

如果您的模型不是 MVC 项目的一部分，那么引用 MVC 程序集中的任何类都需要显式添加引用。您可以通过从控制器初始化模型中的任何 MVC 程序集类型来避免这种情况，如下所示：

```
 public class MyModel {
            public int VISIBLE { get; set; }
            public IEnumerable<SelectListItem> PossibleValues { get; set; }
    } 
```

控制器动作方法：

```
 public ActionResult Edit(int Id) {
        ...
        myModelInstance. PossibleValues = new[] { new SelectListItem { Value = "0", Text = "Hidden" }, new SelectListItem { Value = "1", Text = "Visible" } }; 
        ...
        Return View(myModel);
    } 
```

# javascript - 如何在 magento 多站点中禁用某些 javascript

> ID：14263224
> 
> 赞同：0
> 
> 时间：2013-01-10T16:59:39.740
> 
> 标签：javascript, magento, magento-1.6

有一个问题：

我们有一家商店[http://vinylshop.lt](http://vinylshop.lt) & 现在我们在同一个平台多站点 - [http://ausines24.lt](http://ausines24.lt)

而且我们在使用vinylshop.lt 模板JS（类别中的过滤功能无效）和ausines24.lt 模板JS（标题下拉菜单、搜索下拉菜单等无效）方面遇到了一些故障，因为这两个站点都加载了所有平台的JS。Vinylshop.lt 不需要 ausines24.lt JS 和 ausines24.lt 不需要vinylshop.lt JS。

任何解决方案如何解决这个问题？

非常感谢您的任何建议/信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:12:04.660

由于您有不同的主题，您可能有不同的布局 xml，而不是全局导入 js，您可以将其导入适当的主题布局文件中。

# javascript - 如何使用 Watir 点击由 javascript 生成的元素？

> ID：14263228
> 
> 赞同：2
> 
> 时间：2013-01-10T17:00:00.080
> 
> 标签：javascript, jsf, jakarta-ee, primefaces, watir

我正在使用一个名为 primefaces 的库开发一个基于 jsf 的应用程序。Primefaces 生成一个网页，其中包含生成一些按钮的 javascript 函数。按钮在页面的源代码中不可见（如 <button>...</button>，因此 Watir 无法单击这些来测试某些内容。

我的问题是：是否可以使用 Watir 恢复由 javascript 函数生成的按钮的 ID 或类别？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:02:51.833

在实践中，`sleep`不[推荐使用](http://wiki.openqa.org/display/WTR/How+to+wait+with+Watir#HowtowaitwithWatir-2ObjectsthatdependonJavascripttoshowup)。根据浏览器和 JavaScript 代码执行其操作所花费的时间量，您可能会遇到竞争条件并最终得到仅有时有效的*测试*。

> 如果您正在考虑使用睡眠，请改用 wait_until。在您真正需要使用它的情况下，它将使您的测试代码对时间问题更具弹性。

正如@JustinKo 建议的那样，您可能应该使用Watir 的[等待方法](http://watirwebdriver.com/waiting/)来等待元素显示在页面上。

在您的情况下，您可能想尝试以下示例：

```
# Assuming your browser object is named: $b
#Ex: $b = Watir::Browser.new :chrome
$b.button(:id => 'my_button').wait_until_present
Watir::Waiter::wait_until { $b.button(:id => 'my_button').visible? } 
```

如果您在页面上找不到元素，您可能需要查看 FireBug 中的源代码或 Chrome ( `Shift+Ctrl+I`) 中的开发者工具控制台。尝试为该按钮找到一些标识属性，或带有、`id`或其他标识属性的容器元素。`class``name`

但是，目前我不确定是否有一种方法可以检测元素是否由 JavaScript 生成或添加到 DOM 中。

# javascript - onLoad 时预期的对象

> ID：14263229
> 
> 赞同：0
> 
> 时间：2013-01-10T17:00:12.450
> 
> 标签：javascript, onload, dynamics-crm-4

我有一个名为 PurchaseOrder 的自己的实体。对于这个实体，我为 onload 方法设计了一个 javascript，它也应该可以正常工作。

我现在的问题是，当我想创建一个新的 PurchaseOrder 时，会按预期出现一个空表单，但出现以下错误消息：

```
There was an error with the fields customized event
Field: window
Event: onload
Error: Object expected 
```

如果我保存此 PurchaseOrder 然后尝试再次打开它，则不会出现错误消息。

最大的问题是，如果我禁用自定义的 onload 脚本或从 onload 事件中删除我的代码，也会显示此错误消息。如果我尝试打开此实体的预览，也没有错误消息。

我不想发布任何代码，因为这个脚本有大约 1000 行代码，要么我很愚蠢，要么我不能使用 IE 的调试器，所以我也不能发布错误发生的片段.

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:35:48.490

打我……狠狠地打我……

几天来我一直在为此苦苦挣扎，您知道解决方案是什么吗？发布实体并刷新页面。好像我一直在测试旧的错误解决方案......

-.-

无论如何，感谢詹姆斯试图提供帮助，但是以我这种程度的愚蠢，你不能聪明到在这里帮助我^^

# ios - NSLayoutConstraint 和 MKMapView

> ID：14263232
> 
> 赞同：4
> 
> 时间：2013-01-10T17:00:25.933
> 
> 标签：ios, objective-c, nslayoutconstraint

在我的 viewDidLoad 方法中，我有创建 MKMapView、一些约束和 UIToolbar 的代码：

我有一个 MKMapView：

```
MKMapView *mapView = [[MKMapView alloc] init];
[mapView setTranslatesAutoresizingMaskIntoConstraints:NO];
mapView.userInteractionEnabled = TRUE;
mapView.showsUserLocation = TRUE;
mapView.mapType = MKMapTypeHybrid;
mapView.delegate = self;

[mapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];

[self.view addSubview:mapView]; 
```

我创建了 2 个约束以使其全屏显示：

```
NSMutableArray *constraints = [NSMutableArray array];

[constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[mapView]|"
                                                                         options:0
                                                                         metrics:nil
                                                                           views:NSDictionaryOfVariableBindings(mapView)]];

[constraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"|[mapView]|"
                                                                         options:0
                                                                         metrics:nil
                                                                           views:NSDictionaryOfVariableBindings(mapView)]];

[self.view addConstraints:constraints]; 
```

效果很好。但是当我尝试向地图视图添加任何内容时：

```
 UIToolbar *topBar = [[UIToolbar alloc ]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 44)];
[topBar setTranslatesAutoresizingMaskIntoConstraints:NO];
topBar.barStyle = UIBarStyleBlackTranslucent;

[mapView addSubview:topBar]; 
```

它抛出一个错误：

```
*** Assertion failure in -[MKMapView layoutSublayersOfLayer:], /SourceCache/UIKit_Sim/UIKit-2372/UIView.m:5776
2013-01-10 10:24:17.503 Landscout 2[2001:14003] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. MKMapView's implementation of -layoutSubviews needs to call super.' 
```

据我了解，既然我在地图视图中添加了一个新视图，那么地图视图需要重新计算其中的所有约束吗？基本上是一个用于约束的 drawRect 方法。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T17:24:48.790

我通过简单地使用内容视图将所有内容填充到其中来解决了这个问题。我没有将工具栏添加到 myMapView，而是将其添加到 myContentView。

我很确定 MKMapView 尚未设置为使用约束。MapView 不会调用`[super layoutSubviews]`最终会导致`[UIView layoutSubviews]`.

我想的另一个可能的解决方案是向 MKMapView 添加一个类别，该类别将覆盖`-layoutSubview`call `[super layoutSubview]`，但我不知道如何找出`[MKMapView layoutSubview]`我需要添加的其他内容。

# ruby - Selenium WebDriver ruby 访问跨度值

> ID：14263240
> 
> 赞同：0
> 
> 时间：2013-01-10T17:00:42.810
> 
> 标签：ruby, selenium, automation, selenium-webdriver, qa

使用 Selenium WebDriver 选择此元素的最佳方法是什么？

我正在尝试`<span>`通过类访问元素`mapResultNumber`。这是实际的 HTML：

```
<div class="mapResultInner">
<div class="mapResultNumber">
<span>4</span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:20:54.370

你可以使用 xpath =`//div[@class='mapResultNumber']/span`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:22:42.897

使用 css 选择器是一种更易读的方式：

```
element = @driver.find_element(:css => "div.mapResultNumber span") 
```

*   标记后的点（句点）表示要选择的类。
*   第一个选择器（即“div.mapResultNumber”）后的单个空格表示下一个标签将在前一个标签中找到
*   您还可以使用`div.mapResultNumber > span`来指示跨度标签直接位于 div 下方

# php - 带有 PHP 和 Mysql 的 Windows 8 应用程序 C#

> ID：14263246
> 
> 赞同：3
> 
> 时间：2013-01-10T17:01:14.073
> 
> 标签：php, mysql, xaml, windows-8

我制作了一个 Windows 8 应用程序，我想在云中的服务器中检索一些数据，我的服务器在 php + mysql 中运行，应用程序在代码点火器中，我想知道是否有人做过这样的事情？我的应用程序有 6 个前 10 名，我只想制作一个 xaml 页面，通过我在云中的 mysql 表中的 ID 检索信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:56:58.760

答案是肯定的。您当然可以在 WIndows 8 XAML 项目中使用 PHP 和 MySql。你打赌。最简单的方法是发出 JSON 的简单 REST 服务。然后，您可以反序列化 JSON 并在 XAML 中直接绑定到它。

以下是有关 JSON 的信息：[如何在 WinRT 中反序列化 JSON？](https://stackoverflow.com/questions/10965829/how-do-i-de-serialize-json-in-winrt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:34:02.090

当您说“我只想制作一个 xaml 页面，通过 ID 从云中的 mysql 表中检索信息”时，我很想将其解释为您想直接从 Windows 8 客户端转到 MySQL。出于安全原因，您不应该这样做。您需要在两者之间使用您的 PHP 层。您可能并不是要暗示您会直接从客户端转到 MySQL，但我想我会更加清楚这一点。

我建议使用 CodeIgniter 创建一个 RESTful Web 服务。这是关于 StackOverflow 的另一个问题，它将为您提供一些指示：

*   [代码点火器 Web 服务](https://stackoverflow.com/questions/9696009/codeigniter-web-services)

拥有 Web 服务后，您可以使用[System.Net.Http.HttpClient](http://msdn.microsoft.com/en-us/library/windows/apps/hh454046.aspx)从 .NET 轻松与其通信。您还可以非常轻松地使用 JavaScript 与 Web 服务通信，因此您可以考虑[使用 JS/HTML](http://msdn.microsoft.com/en-US/library/windows/apps/br229565)而不是 .NET/XAML 构建您的应用程序。Kraig Brockschmidt的免费书籍[Programming Windows 8 Apps with HTML, CSS, and JavaScript](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx)是一个很好的起点。

# javascript - 向网页提供动态数据，避免跨域警告和防火墙块

> ID：14263247
> 
> 赞同：0
> 
> 时间：2013-01-10T17:01:16.833
> 
> 标签：javascript, dynamic, policy

我正在设计一个使用 JavaScript Ajax XHR 调用来检索动态数据的网站。

我有两个基于 C++ 的应用程序，它们在它们自己的端口上提供数据，并且我可以控制它们使用的端口。

使用 HTTP 1.1 请求请求动态数据，并使用 HTTP 1.1 标头返回数据，并且我可以控制标头数据。实际上，我在动态数据应用程序中嵌入了一个自定义 HTTP 服务器，因此我可以完全控制对话的两端。

如果我选择两个任意端口来提供动态数据，基于浏览器的用户是否必须在其防火墙上打开这些端口才能允许来自我的网页的请求？

例如，该网页将作为 www.mydomain.com/default.aspx 提供服务，并且在其中，它将有 Ajax XHR 调用以建立与 www.mydomain.com:8080 和 www.mydomain.com:8081 的连接（或选择任何端口号）。

我会被同源政策阻止吗？

我可以使用经常在防火墙上打开但没有在我的服务器上主动提供服务的端口吗？

解决此问题的最佳方法是什么，以便用户不必更改防火墙并且不会收到跨域警告？如果可能的话，我希望不要使用 iFrames。

这个话题之前可能有人问过，我已经彻底搜索过，但没有找到任何匹配的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:14:03.563

维基百科说你必须保持相同的方案、主机和端口，但指出一些未命名的浏览器不强制使用端口。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

该方案类似于 HTTP：

主机名类似于 my.yahoo.com，但在某些浏览器中可以访问任何 ???.yahoo.com。

端口很清楚，但请注意 HTTP 和 HTTPS 使用不同的端口作为默认端口。

这个页面很有趣：

[http://www.w3.org/Security/wiki/Same_Origin_Policy](http://www.w3.org/Security/wiki/Same_Origin_Policy)

# c# - 基于 snmptrad 示例的 SharpSNMP 实现停止工作

> ID：14263250
> 
> 赞同：2
> 
> 时间：2013-01-10T17:01:37.147
> 
> 标签：c#, .net, snmp, unity-interception, sharp-snmp

我正在做一个基于 Sharp-SNMP 库 (snmptrapd) 中包含的示例的应用程序原型，以从 SNMP 协议获取一些数据，但完全停止工作，由于某种未知原因停止工作但不抛出任何异常，编译并执行好。

问题在于事件从未发生过。

**依赖：**

*   来自 Microsoft 的 Unity 容器
*   SharpSNMP 库
*   SourceGrid (Windows.Forms)

我不得不指出，直到 2 天前，它的工作就像一个魅力，但现在，我的想法已经不多了。（而且我没有在我的代码中修改一些激进的东西）。

## C# 代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;
using Lextm.SharpSnmpLib;
using Lextm.SharpSnmpLib.Security;
using Lextm.SharpSnmpLib.Messaging;
using Lextm.SharpSnmpLib.Pipeline;
using Lextm.SharpSnmpLib.Mib;
using Microsoft.Practices.Unity;
using Microsoft.Practices.Unity.Configuration;
using Microsoft.Practices.Unity.Utility;
using System.Configuration;
using SourceGrid;

namespace Kraken
{
    public partial class frmConsola : Form
    {
        internal static IUnityContainer Container { get; private set; }
        private SnmpEngine engine;

        // Delegates ....
        private delegate void MostrarMensajeDelegate(SourceGrid.Grid oGrd, DateTime eventTime, String eventType, IPAddress agentAddress, String Elemento, String Valor);

        public frmConsola()
        {
            InitializeComponent();
            this.crear_demonio_trampas();
            this.crear_grid();
        }

        private void crear_grid()
        {
            grdData.BorderStyle = BorderStyle.FixedSingle;

            grdData.ColumnsCount = 6;
            grdData.FixedRows = 1;
            grdData.Rows.Insert(0);

            grdData[0, 0] = new SourceGrid.Cells.ColumnHeader("Id");
            grdData[0, 1] = new SourceGrid.Cells.ColumnHeader("Hora");
            grdData[0, 2] = new SourceGrid.Cells.ColumnHeader("Tipo");
            grdData[0, 3] = new SourceGrid.Cells.ColumnHeader("Agente");
            grdData[0, 4] = new SourceGrid.Cells.ColumnHeader("Elemento");
            grdData[0, 5] = new SourceGrid.Cells.ColumnHeader("Valor");
            grdData.AutoSizeCells();
        }

        public void MostrarMensaje(SourceGrid.Grid oGrd, DateTime eventTime, String eventType, IPAddress agentAddress, String Elemento, String Valor)
        {
            int r = 0;
            if (!oGrd.IsDisposed)
            {
                r = oGrd.Rows.Count;
                oGrd.Rows.Insert(r);
                oGrd[r, 0] = new SourceGrid.Cells.Cell(r.ToString(), typeof(string));
                oGrd[r, 1] = new SourceGrid.Cells.Cell("?", typeof(string));
                oGrd[r, 2] = new SourceGrid.Cells.Cell(eventType, typeof(string));
                oGrd[r, 3] = new SourceGrid.Cells.Cell(agentAddress.ToString(), typeof(string));
                oGrd[r, 4] = new SourceGrid.Cells.Cell(Elemento, typeof(string));
                oGrd[r, 5] = new SourceGrid.Cells.Cell(Valor, typeof(string));
                grdData.AutoSizeCells();
            }
            else
            {
                throw (new ObjectDisposedException(oGrd.Name.ToString()));
            }
        }

        private void crear_demonio_trampas()
        {
            Container = new UnityContainer().LoadConfiguration("snmptrapd");
            var users = Container.Resolve<UserRegistry>();
            users.Add(new OctetString("neither"), DefaultPrivacyProvider.DefaultPair);
            users.Add(new OctetString("authen"), new DefaultPrivacyProvider(new MD5AuthenticationProvider(new OctetString("authentication"))));
            users.Add(new OctetString("privacy"), new DESPrivacyProvider(new OctetString("privacyphrase"),
                                                                         new MD5AuthenticationProvider(new OctetString("authentication"))));
            // -------------- Plantas de fuerza ----------------------
            users.Add(new OctetString("PCC"), DefaultPrivacyProvider.DefaultPair);
            users.Add(new OctetString("peacct"), DefaultPrivacyProvider.DefaultPair);
            // -------------------------------------------------------
            var trapv1 = Container.Resolve<TrapV1MessageHandler>("TrapV1Handler");
            trapv1.MessageReceived += WatcherTrapV1Received;
            var trapv2 = Container.Resolve<TrapV2MessageHandler>("TrapV2Handler");
            trapv2.MessageReceived += WatcherTrapV2Received;
            var inform = Container.Resolve<InformRequestMessageHandler>("InformHandler");
            inform.MessageReceived += WatcherInformRequestReceived;
            this.engine = Container.Resolve<SnmpEngine>();
        }

        private void WatcherInformRequestReceived(object sender, InformRequestMessageReceivedEventArgs e)
        {
            string sTipo = "";
            uint[] codigo;
            Object[] oParams = new Object[6];
            oParams[0] = this.grdData;
            oParams[1] = new DateTime(e.InformRequestMessage.TimeStamp);
            codigo = e.InformRequestMessage.Enterprise.ToNumerical();
            foreach (int num in codigo)
            {
                if (sTipo != null)
                    sTipo += ".";
                sTipo += num.ToString();
            }
            oParams[2] = sTipo;
            oParams[3] = null;
            oParams[4] = e.InformRequestMessage.Variables()[0].ToString();
            oParams[5] = "";
            BeginInvoke(new MostrarMensajeDelegate(MostrarMensaje), oParams);
        }

        private void WatcherTrapV2Received(object sender, TrapV2MessageReceivedEventArgs e)
        {
            string sTipo = "";
            uint[] codigo;
            Object[] oParams = new Object[6];
            oParams[0] = this.grdData;
            oParams[1] = new DateTime(e.TrapV2Message.TimeStamp);
            codigo = e.TrapV2Message.Enterprise.ToNumerical();
            foreach (int num in codigo)
            {
                if (sTipo != null)
                    sTipo += ".";
                sTipo += num.ToString();
            }
            oParams[2] = sTipo;
            oParams[3] = null;
            oParams[4] = e.TrapV2Message.Variables()[0].Id.ToString();
            oParams[5] = e.TrapV2Message.Variables()[0].Data.ToString();
            BeginInvoke(new MostrarMensajeDelegate(MostrarMensaje), oParams);
        }

        private void WatcherTrapV1Received(object sender, TrapV1MessageReceivedEventArgs e)
        {
            string sTipo = "";
            uint[] codigo;
            Object[] oParams = new Object[6];
            oParams[0] = this.grdData;
            oParams[1] = new DateTime(e.TrapV1Message.TimeStamp);
            codigo = e.TrapV1Message.Enterprise.ToNumerical();
            foreach (int num in codigo)
            {
                if (sTipo != null)
                    sTipo += ".";
                sTipo += num.ToString();
            }
            oParams[2] = sTipo;
            oParams[3] = e.TrapV1Message.AgentAddress;
            oParams[4] = e.TrapV1Message.Variables()[0].Id.ToString();
            oParams[5] = e.TrapV1Message.Variables()[0].Data.ToString();
            //DateTime eventTime, String eventType, IPAddress agentAddress, String infoText
            BeginInvoke(new MostrarMensajeDelegate(MostrarMensaje), oParams);
        }

        private void Form1_Shown(object sender, EventArgs e)
        {
            this.engine.Listener.AddBinding(new IPEndPoint(IPAddress.Any, 162));
            this.engine.Start();
            this.txtStatus.Text = "Iniciando Captura ...";
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            this.engine.Stop();
            this.txtStatus.Text = "... Finalizando Captura.";
        }

    }
} 
```

## 应用程序配置

```
<?xml version="1.0"?>
<configuration>
    <configSections>
      <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
    </configSections>
    <startup>
      <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
    <unity>
      <namespace name="Lextm.SharpSnmpLib.Pipeline"/>
      <namespace name="Lextm.SharpSnmpLib.Messaging"/>
      <namespace name="Lextm.SharpSnmpLib.Security"/>
      <namespace name="Lextm.SharpSnmpLib.Mib"/>
      <namespace name="Lextm.SharpSnmpLib"/>
      <assembly name="SharpSnmpLib"/>
      <assembly name="SharpSnmpLib.Engine"/>
      <assembly name="SharpSnmpLib.Mib"/>
      <aliases>
        <add alias="singleton" type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager, Microsoft.Practices.Unity"/>
      </aliases>
      <containers>
        <container name="snmptrapd">
          <!-- users -->
          <register type="UserRegistry">
            <lifetime type="singleton"/>
            <constructor>
              <param name="users" dependencyType="User[]"/>
            </constructor>
          </register>
          <!-- message handler settings-->
          <register type="MessageHandlerFactory" name="MessageFactory">
            <lifetime type="singleton"/>
            <constructor>
              <param name="mappings">
                <array>
                  <!--here we only have four-->
                  <dependency name="TRAPV1"/>
                  <dependency name="TRAPV2"/>
                  <dependency name="INFORM"/>
                  <dependency name="ALL"/>
                </array>
              </param>
            </constructor>
          </register>
          <register type="HandlerMapping" name="TRAPV1">
            <lifetime type="singleton"/>
            <constructor>
              <param name="version" value="v1"/>
              <param name="command" value="TRAPV1"/>
              <param name="handler" dependencyType="IMessageHandler" dependencyName="TrapV1Handler"/>
            </constructor>
          </register>
          <register type="HandlerMapping" name="TRAPV2">
            <lifetime type="singleton"/>
            <constructor>
              <param name="version" value="v2,v3"/>
              <param name="command" value="TRAPV2"/>
              <param name="handler" dependencyType="IMessageHandler" dependencyName="TrapV2Handler"/>
            </constructor>
          </register>
          <register type="HandlerMapping" name="INFORM">
            <lifetime type="singleton"/>
            <constructor>
              <param name="version" value="v2,v3"/>
              <param name="command" value="INFORM"/>
              <param name="handler" dependencyType="IMessageHandler" dependencyName="InformHandler"/>
            </constructor>
          </register>
          <register type="HandlerMapping" name="ALL">
            <lifetime type="singleton"/>
            <constructor>
              <param name="version" value="*"/>
              <param name="command" value="*"/>
              <param name="handler" dependencyType="IMessageHandler" dependencyName="NullHandler"/>
            </constructor>
          </register>
          <register type="IMessageHandler" mapTo="TrapV1MessageHandler" name="TrapV1Handler">
            <lifetime type="singleton"/>
          </register>
          <register type="IMessageHandler" mapTo="TrapV2MessageHandler" name="TrapV2Handler">
            <lifetime type="singleton"/>
          </register>
          <register type="IMessageHandler" mapTo="InformRequestMessageHandler" name="InformHandler">
            <lifetime type="singleton"/>
          </register>
          <register type="IMessageHandler" mapTo="NullMessageHandler" name="NullHandler">
            <lifetime type="singleton"/>
          </register>
          <!-- application factory and its parts -->
          <register type="SnmpApplicationFactory">
            <lifetime type="singleton"/>
            <constructor>
              <!--<param name="logger" />-->
              <param name="store" dependencyType="ObjectStore"/>
              <param name="membershipProvider" dependencyType="IMembershipProvider" dependencyName="Composed"/>
              <param name="factory" dependencyType="MessageHandlerFactory"/>
            </constructor>
          </register>
          <register type="ObjectStore">
            <lifetime type="singleton"/>
          </register>
          <!-- this is the membership provider -->
          <register type="IMembershipProvider" mapTo="ComposedMembershipProvider" name="Composed">
            <lifetime type="singleton"/>
            <constructor>
              <param name="providers">
                <array>
                  <dependency name="v1"/>
                  <dependency name="v2"/>
                  <dependency name="v3"/>
                </array>
              </param>
            </constructor>
          </register>
          <register type="IMembershipProvider" mapTo="Version1MembershipProvider" name="v1">
            <lifetime type="singleton"/>
            <constructor>
              <param name="getCommunity" dependencyType="OctetString" dependencyName="get"/>
              <param name="setCommunity" dependencyType="OctetString" dependencyName="set"/>
            </constructor>
          </register>
          <register type="IMembershipProvider" mapTo="Version2MembershipProvider" name="v2">
            <lifetime type="singleton"/>
            <constructor>
              <param name="getCommunity" dependencyType="OctetString" dependencyName="get"/>
              <param name="setCommunity" dependencyType="OctetString" dependencyName="set"/>
            </constructor>
          </register>
          <register type="IMembershipProvider" mapTo="Version3MembershipProvider" name="v3">
            <lifetime type="singleton"/>
          </register>
          <register type="OctetString" name="get">
            <lifetime type="singleton"/>
            <constructor>
              <param name="content" value="public"/>
            </constructor>
          </register>
          <register type="OctetString" name="set">
            <lifetime type="singleton"/>
            <constructor>
              <param name="content" value="public"/>
            </constructor>
          </register>
          <!-- Engine -->
          <register type="SnmpEngine">
            <lifetime type="singleton"/>
            <constructor>
              <param name="factory" dependencyType="SnmpApplicationFactory"/>
              <param name="listener" dependencyType="Listener"/>
              <param name="group" dependencyType="EngineGroup"/>
            </constructor>
          </register>
          <register type="Listener">
            <lifetime type="singleton"/>
            <property name="Users" dependencyType="UserRegistry"/>
          </register>
        </container>
      </containers>
    </unity>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:29:47.673

要调试，首先请熟悉管道模型，

[http://www.lextm.com/2010/11/honeycell-drops-snmp-pipeline-and-our.html](http://www.lextm.com/2010/11/honeycell-drops-snmp-pipeline-and-our.html)

然后，附加调试器并检查您使用的 ListenerBinding (https://github.com/lextm/sharpsnmplib/blob/master/SharpSnmpLib/Messaging/ListenerBinding.cs) 是否从线路接收任何 SNMP 数据包。

之后，转到管道 SnmpApplication 的下一个对象 (https://github.com/lextm/sharpsnmplib/blob/master/SharpSnmpLib/Pipeline/SnmpApplication.cs)。

一步一步你可能会发现为什么没有触发事件。

此外，您还可以订阅 SnmpEngine.ExceptionRaised 以查看是否发生任何异常。

# windows-8 - 我是否需要使用特定于 WP8 的 Azure SDK？

> ID：14263253
> 
> 赞同：0
> 
> 时间：2013-01-10T17:01:47.190
> 
> 标签：windows-8, sdk, windows-phone-8, windows-store-apps, azure-mobile-services

在此链接： http: [//blogs.msdn.com/b/windowsazure/archive/2013/01/09/new-windows-azure-mobile-services-getting-started-content.aspx](http://blogs.msdn.com/b/windowsazure/archive/2013/01/09/new-windows-azure-mobile-services-getting-started-content.aspx)我看到有单独的 Azure适用于 Windows 应用商店和 Windows Phone 8 的 SDK。

在我的应用程序套件（一个 Windows Store 应用程序和一个互补的 WP8 应用程序）中，我目前只使用 Windows Store SDK - 我没有下载/安装特定于 WP8 的 Azure SDK。我需要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:44:51.233

WP8 和 Windows 8 的下载相同；当然，iOS 完全不同，因此调用了不同的 SDK。

# regex - 在 Notepad++ 中删除 3 个空行和两个带文本的行

> ID：14263255
> 
> 赞同：0
> 
> 时间：2013-01-10T17:01:59.423
> 
> 标签：regex, tsql, notepad++

我运行了一个 sql 脚本，该脚本使用游标`sp_table_privileges`在数据库中的每个表上执行。

如果您运行脚本并将输出保存到文件中，您会在每次迭代后得到：

```
data,data,data,data,data,data,data

(x row(s) affected)

next_table_name
TABLE_QUALIFIER,TABLE_OWNER,TABLE_NAME,GRANTOR,GRANTEE,PRIVILEGE,IS_GRANTABLE 
```

我能够`(x row(s) affected)`通过使用正则表达式替换来删除 Notepad++ 中的内容，`(\(.*\))`但它用空行替换了它。

所以现在我有 3 个空行，下一个表名和列。

我知道您可以[删除 Notepad++ 中的空白行](https://stackoverflow.com/questions/3866034/removing-empty-lines-in-notepad)。

但是，我可以使用正则表达式找到 3 个空行，删除它们和它们下面的两行吗？

如果没有，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:17:16.037

如果我正确理解你的话。寻找

```
(\r\n){4}.*\r\n.* 
```

替换为（全部替换）

```
leave empty 
```

框“.matches newline”未选中

如果您想删除三个空行下方的所有内容，请找到

```
(\r\n){3}.* 
```

替换为（全部替换）

```
leave empty 
```

在这种情况下，必须选中“.matches newline”框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:14:07.300

澄清一下：所以一旦你应用了你的正则表达式，你会在我的截图中得到类似的东西吗？正确的 ？然后你像我在这里一样删除3个空白行吗？

![在此处输入图像描述](../Images/092b55d6fdcb0f7eee22e84840966c77.png)

你得到：

```
> data,data,data,data,data,data,data 
> next_table_name
> TABLE_QUALIFIER,TABLE_OWNER,TABLE_NAME,GRANTOR,GRANTEE,PRIVILEGE,IS_GRANTABLE 
```

现在您想自动删除“next..”和“TABLE_QUALIFIER”...等，以便您只保留数据、数据、数据等？

[使用 Placido 对问题作者的解决方案进行编辑]

看看，这就是你想要的，对吗？

![在此处输入图像描述](../Images/95a3c8d48e9c597276e4e8f7389162c9.png)

进而 ：

![在此处输入图像描述](../Images/ed9f840d1750494d4f5a6dc5967253f6.png)

# javascript - 需要帮助获取正则表达式以获取 2 个不相关的字符串之间的内容

> ID：14263256
> 
> 赞同：1
> 
> 时间：2013-01-10T17:02:18.660
> 
> 标签：javascript, regex

即使在正则表达式生成器的帮助下，我也不知道如何制作某个正则表达式。

我需要准确地获取（包括空格）之间的字符串：`</a>:`和`&nbsp;`.

如果没有人想为此感到头疼，我可以理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:11:12.903

您将使用[环视](http://www.regular-expressions.info/lookaround.html)来匹配此：`/(?<=<\/a>: ).*(?=&nbsp;)/`

但是，JavaScript 不支持后视，因此您必须使用[匹配组](http://www.regular-expressions.info/brackets.html)：

```
var regex = /<\/a>: (.*?)&nbsp;/;
var match = myString.match(regex);
if (match)
    return match[1]; 
```

# php - 如何使用 PHP SimpleDOM 对 XML 子节点值进行排序？（或任何其他方法）

> ID：14263259
> 
> 赞同：0
> 
> 时间：2013-01-10T17:02:23.727
> 
> 标签：php, xml, xpath, simplexml, simpledom

我需要根据其子 MajorDescription 的值对以下 XML（foreach ProgramList）进行排序

```
<ArrayOfProgramList xmlns="http://schemas.datacontract.org/2004/07/Taca.Resources" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<ProgramList>
    <AreaOfInterests xmlns:a="http://schemas.datacontract.org/2004/07/Taca">
        <a:AreaOfInterest>
            <a:Interest>ABORIGINAL STUDIES</a:Interest>
        </a:AreaOfInterest>
    </AreaOfInterests>
    <Coop>true</Coop>
    <MajorDescription>ABORIGINAL COMMUNITY AND SOCIAL DEVELOPMENT</MajorDescription>
    <Program>ACSD</Program>
    <ProgramLocations>
        <ProgramLocation>
            <Campus>Barrie</Campus>
        </ProgramLocation>
    </ProgramLocations>
    <Term>201210</Term>
</ProgramList>
<ProgramList>
    <AreaOfInterests xmlns:a="http://schemas.datacontract.org/2004/07/Taca">
        <a:AreaOfInterest>
            <a:Interest>GRADUATE CERTIFICATE STUDIES</a:Interest>
        </a:AreaOfInterest>
        <a:AreaOfInterest>
            <a:Interest>HEALTH AND WELLNESS STUDIES</a:Interest>
        </a:AreaOfInterest>
    </AreaOfInterests>
    <Coop>false</Coop>
    <MajorDescription>ADVANCED CARE PARAMEDIC</MajorDescription>
    <Program>PARM</Program>
    <ProgramLocations>
        <ProgramLocation>
            <Campus>Barrie</Campus>
        </ProgramLocation>
    </ProgramLocations>
    <Term>201210</Term>
</ProgramList>
</ArrayOfProgramList> 
```

我正在尝试使用 SimpleDOM 来做到这一点，因为我已经阅读了在其他 SO 问题上对 XML 进行排序的最简单方法。

我试过使用：

```
foreach($listxml->sortedXPath('//ArrayOfProgramList/ProgramList','//ArrayOfProgramList/ProgramList/MajorDescription') as $program){ ... } 
```

以及各种其他类似的“排序”值，例如“@MajorDescription”、“/MajorDescription”和“.” 正如这里所建议的，[如何使用 SimpleDOM sortedXPath 对节点值进行排序？](https://stackoverflow.com/questions/4299188/how-does-one-use-simpledom-sortedxpath-to-sort-on-node-value)但是当我用 var_dump() 检查它时，一切都返回一个空数组

我认为问题是我需要对子节点的值进行排序——这可能吗？foreach 需要在 ProgramList 上，因为我需要在每次迭代时输出 ProgramList 中所有子节点的值。

有什么建议么？我不必使用 SimpleDOM，我对任何有效的方法持开放态度 - 目前我正在迭代 AZ 数组，并且对于每个字母，迭代 ProgramList，将 MajorDescription 的第一个字母与当前字母进行比较和如果匹配则输出 - 这显然**不**理想，只对第一个字母进行排序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:28:44.210

您可以尝试将所有 ProgramList 元素放入一个数组中，并根据自定义函数对其进行排序。代码应如下所示：

```
function cmp($a, $b)
{
  return strcmp($a->MajorDescription[0],$b->MajorDescription[0])
}

$arr = $listxml->xpath("//ArrayOfProgramList/ProgramList");
usort($arr,"cmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:01:18.940

您的原始代码有两个问题。首先是您的 XML 使用默认名称空间，并且根据设计，XPath 不支持默认名称空间，因此您必须寻找名称空间节点（例如`//foo:bar`，not `//bar`）来找到它们。如果您无法为此命名空间注册前缀（例如，如果您无法修改源 XML），您可以使用通配符`//*`结合与节点的命名空间和/或本地名称匹配的谓词来匹配命名空间节点。

```
$nsPredicate = '[namespace-uri() = "http://schemas.datacontract.org/2004/07/Taca.Resources"]';

$query = '//*[local-name() = "ArrayOfProgramList"]' . $nsPredicate
       . '/*[local-name() = "ProgramList"]' . $nsPredicate;

$orderBy = '*[local-name() = "MajorDescription"]' . $nsPredicate;

foreach ($listxml->sortedXPath($query, $orderBy) as $program)
{
    echo $program->asXML(),"\n";
} 
```

另一个问题是您的排序标准。它应该从目标节点的上下文中写入。

# .net - ClickOnce 不会安装 .NET 4.5

> ID：14263262
> 
> 赞同：9
> 
> 时间：2013-01-10T17:02:31.137
> 
> 标签：.net, clickonce, .net-4.5

我正在尝试使用 ClickOnce 部署 WPF 应用程序。
该项目的目标框架是：“.NET Framework 4.5”。
在 VS 项目属性 -> “发布” -> “先决条件”中，我检查了两项：

*   “Microsoft .NET Framework 4.5（x86 和 x64）”</li>
*   “Windows 安装程序 4.5”</li>

当我尝试在未预装 .NET 4.5 的 Windows 7 计算机上启动此应用程序时，我收到一个弹出窗口：

![需要系统更新 无法安装或运行此应用程序。 此应用程序需要版本 4.5 Full 或其他兼容的 .NET Framework。 请联系您的系统管理员。](../Images/20ebe98d470e6a77d2eecb9fa2d69b03.png)

安装不会尝试为我下载/安装框架。它只是放弃显示此消息。运行 ClickOnce 安装的客户端用户在计算机上具有管理员权限。

为什么 ClickOnce 不自动安装 .NET 4.5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-01T11:00:04.240

我在过去设置为 .net framework 4.0 的应用程序中遇到了同样的问题。首先，我刚刚将目标平台更新为 .net framework 4.5，但是 ClickOnce 安装程序没有更新其先决条件。

我必须做的是项目属性-> 发布-> 先决条件-> 从 .net 框架 4 更改为 .net 框架 4.5。然后在部署期间安装了 4.5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:05:40.337

我在我的问题中没有提到我是从另一个 ClickOnce 应用程序升级到 .NET4 的先决条件。

ClickOnce 先决条件仅在第一次安装时评估，因此要升级到 .NET4.5，我遵循[此处](http://robindotnet.wordpress.com/2009/03/30/clickonce-and-expiring-certificates/)描述的技术。即旧应用程序会自行卸载，然后在 .NET4.5 上使用新的先决条件启动新 ClickOnce 应用程序的安装。

```
 Process.Start("iexplore.exe", newClickOnceApplicationUrl);
        Application.Current.Shutdown(); 
```

有些机器收到错误消息（“请联系您的系统管理员。”），有些机器安装正常，没有任何问题。在出现错误的机器上，如果手动启动 ClickOnce url，它就可以正常工作。

运行安装的所有用户都是其本地计算机的 Administrators 组的一部分。我的理论是从 ClickOnce 启动的 iexplorer.exe 进程没有在有问题的机器上以管理员权限运行。不过，我没有对此进行进一步调查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:24:05.523

重新安装您的应用程序应该可以解决问题。

**当您在计算机上安装应用程序时，而不是**在您启动已安装的 .NET 应用程序时，检查应用程序的 ClickOnce 先决条件，并在必要时运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T19:53:36.947

这个错误看起来很熟悉！

你试过这样做吗？？？

在先决条件对话框中，确保选中创建安装程序以安装先决条件组件复选框。

在“指定先决条件的安装位置”部分中，选择从以下位置下载先决条件。

从下拉列表中选择一个位置，或输入 URL、文件路径或 FTP 位置，然后单击确定。

[http://msdn.microsoft.com/en-us/library/8st7th1x(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8st7th1x(v=vs.100).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T20:21:53.093

以前没见过这个，但听起来客户端已经安装了.NET，但是客户端配置文件“lite”版本？解决这个问题的两种方法：

1.  如果可以，请将构建目标更改为 .NET 4.5 客户端并重新构建您的产品（如果您调用 Microsoft 认为的框架的“服务器”组件，您将收到错误消息）
2.  如果真的离不开完整版的.NET，从机器上删除客户端版本再试一次？

这有帮助吗？

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-04T14:41:03.357

请执行下列操作

在此处下载 .netframework 4.5 完整安装程序[DOTNETFRAMEWORK 4.5](http://go.microsoft.com/fwlink/?LinkId=229933)

然后复制到这个目录

**C:\Program Files\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages\DotNetFX45**

然后清理你的项目并再次构建然后发布..它现在可以工作了..如果你用我的回答解决了问题，请告诉我

# sql - 从一个表中获取所有行，使用 where 子句对第二个表中的列求和

> ID：14263263
> 
> 赞同：1
> 
> 时间：2013-01-10T17:02:37.257
> 
> 标签：sql, sql-server, sum, aggregate-functions

我想从 table1 中获取所有行，并且我想为 table1 中的每个人获取 table3 中的总共一列。如果我不在查询中的任何地方使用 where 子句（在子选择、内部连接或常规 where 子句中），我就可以做到这一点。如果我使用如下所示的 where 子句，则只有 table1 中的人在提供的日期之间在 table2 中有记录并且已经过验证。

我想要的是 table1 中的所有行，但仅汇总 table2 中提供日期之间并已验证的记录。

有没有办法在一个查询中做到这一点？

```
SELECT table1.ID
     , table1.LName
     , table1.FName
     , (Select SUM(table3.DollarValue) Where table2.Verified = 1) AS total
FROM table3 
INNER JOIN table2       ON table3.IncentiveID = table2.IncentiveID 
RIGHT OUTER JOIN table1 ON table2.ID = table1.ID
Where table2.date >= '1/1/2012'
  AND table2.date <= '12/31/2012'
  AND table2.Verified = 1
Group By table1.ID, table1.LName, table1.FName, table2.Verified
Order By table1.LName, table1.FName 
```

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:49:18.997

根据您的描述，听起来您想要以下内容。哪个将您的`table2`和`table3`加入并`sum()`放在带有`WHERE`过滤的子查询中，然后将该结果加入`table1`：

```
SELECT t1.ID, 
    t1.LName, 
    t1.FName, 
    IsNull(t.total, 0) as Total
FROM table1 t1
LEFT JOIN
(
    SELECT t2.id, SUM(t3.DollarValue) as total
    FROM table2 t2
    INNER JOIN table3 t2
        on t2.IncentiveID = t3.IncentiveID
    WHERE t2.date >= '2012-01-01' 
        AND t2.date <= '2012-12-31' 
        AND t2.Verified = 1
    GROUP BY t2.id
) t
    on t1.ID = t.ID
Order By t1.LName, t1.FName; 
```

# shell - 我如何让控制台在完成运行脚本时通知我

> ID：14263266
> 
> 赞同：3
> 
> 时间：2013-01-10T17:02:40.060
> 
> 标签：shell, windows-7, console, cmd, console2

我正在使用 nant，但这可以适用于任何事情，我只想知道是否有办法设置 windows cmd 或 console2 或某种 shell，以便在“完成”时给我一个弹出窗口或发出声音（即当它正在等待并且屏幕显示 >C:\User\Random_FILE_PATH>_)

我正在使用Windows 7。

情人节

抱歉，澄清一下，我没有运行我创建的脚本，这只是在控制台中运行任何东西时。我希望无论何时我的控制台在等待我，它都会产生弹出窗口或噪音。理想情况下，这将是某种设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:09:15.160

您可以使用带有简单 VBScript 或 JScript 的 WSH 在批处理文件的末尾打开一个消息框。有关示例，请参阅[显示 Windows 批处理文件中的弹出/消息框。](https://stackoverflow.com/questions/774175/how-can-i-open-a-message-box-in-a-windows-batch-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T10:54:08.017

您可以在提示中添加哔声：

```
set prompt=%prompt%^G 
```

不要打字`^G`。`0` `0` `7`要获得它，请在数字键盘上输入时按住 alt 键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:43:12.247

```
c:\> my_command & mshta.exe vbscript:Execute("msgbox ""finished"",0,""finished"":close") 
```

这里使用条件执行 - 当**my_command**完成时，mshta.exe 将使用括号中的参数执行。由于此处传递的参数不是那么容易，因此不会显示给 msgbox 的字符串。

# java - 在 Eclipse 中从另一个 Java Web 项目中的一个项目访问类

> ID：14263271
> 
> 赞同：1
> 
> 时间：2013-01-10T17:03:12.733
> 
> 标签：java, eclipse

我想在另一个 Java Web 项目中使用某个项目中的一个类。不幸的是，我不知道我必须做什么才能调用这个类。我知道我必须写包等，但是怎么写？

此类在 Java 网站项目中可见

```
public class MojaWygenerowanaKlasaa {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
 Test2 test2 = new Test2();
String Zmienna = test2.query2();
    }
    // public string Query2() {
      //      return jpsquerie1.dana;
        //}

} 
```

这个类在另一个项目 SBQL4J_EXAMPLE1 -> file(src) -> package -> example 中可见

```
package example;

public class Test2 {
    public String query1(){

        return "aa";
    }
} 
```

[我在这里](http://i.stack.imgur.com/oe9hH.png)添加了项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T22:36:51.617

正如我所见，您已经将包含您需要的类的项目添加到另一个项目的*构建路径*（上图中的“构建路径上的必需项目”）。

现在在需要该类的文件中只需**导入该类**。

例子：

```
import pl.example.SomeClass;

public class Test {
  ...

  public static void main(String[] args) {
    SomeClass someClass = new SomeClass();
    ...
  }
  ...

} 
```

换句话说，您可以以标准方式自由访问**项目构建路径上的所有类。**

# java - 我想在 java 中传递文件名 xxx.mp4 后接收 vide/mp4 mime-type

> ID：14263272
> 
> 赞同：1
> 
> 时间：2013-01-10T17:03:13.090
> 
> 标签：java, jakarta-ee, mime-types, content-type

如果我传递 .mp4 扩展名或完整文件名，Java 中是否有任何 API 可以将 mime-type 或 content-Type 作为 video/mp4 返回？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T13:46:56.540

我最近发布了我的[SimpleMagic](http://256stuff.com/sources/simplemagic/)包，它实现了与 Unix file(1) 命令相同的功能。它使用内部配置文件，或者可以读取`/etc/magic`、`/usr/share/file/magic`或其他魔法（5）文件并确定来自`File`、`InputStream`或的文件内容`byte[]`。它实际上使用文件的内容字节，而不仅仅是名称。

[github 源代码](https://github.com/j256/simplemagic)、javadocs 和一些文档的位置可从主页[获得](http://256stuff.com/sources/simplemagic/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T21:05:28.650

您可以使用[java.nio.file.Files#ProbeFileContent(path) ，除非您已注册任何其他](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#probeContentType%28java.nio.file.Path%29)[java.nio.file.spi.FileTypeDetector](http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileTypeDetector.html)，否则默认情况下将使用扩展检测器：s

```
public class Main {
    public static void main(String[] argv) throws Throwable {
        Path path = Paths.get("c:/test.mp4");
        String contentType = Files.probeContentType(path);

        System.out.println(contentType);
    }
} 
```

将输出：

```
video/mp4 
```

# ubuntu - 如何在本地安装数据包装器？

> ID：14263275
> 
> 赞同：0
> 
> 时间：2013-01-10T17:03:26.330
> 
> 标签：ubuntu, d3.js, data-visualization

我想在本地测试 Datawrapper。这是一个 Web 应用程序，它是 D3js 的一种图形用户界面，一个用于数据可视化的 javascript 库。

我使用的是 Ubuntu 12.10，并且我已经安装了 LAMP。

[https://github.com/datawrapper/datawrapper](https://github.com/datawrapper/datawrapper)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:33:07.847

请查看 Datawrapper 的一般安装说明，您可以在此处找到：http: [//docs.datawrapper.de/en/install/](http://docs.datawrapper.de/en/install/)

# java - 由 scribe (java) 处理 facebook/twitter 处理的 utf-8

> ID：14263277
> 
> 赞同：0
> 
> 时间：2013-01-10T17:03:36.417
> 
> 标签：java, utf-8, scribe

我正在使用 scribe 进行 oauth。在 oauth 响应中，我收到一个名称列表（其中一些是非英文字符，例如中文/日文）。抄写员是否能够处理这些字符（以符合 utf-8 的方式编码/解码）或者是那些实现 api 的人的责任？有没有人遇到过同样的问题，他们是如何解决的（在使用 scribe 时）。现在，如果我打印/注销 response.getBody，它会显示似乎未正确解码的字符。这可能是我的疏忽——我只是在寻求一些有用的建议。

我的后端系统似乎兼容 utf-8 并且能够处理 utf-8 字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:33:24.127

您可以使用 Response [getStream](https://github.com/fernandezpablo85/scribe-java/blob/master/src/main/java/org/scribe/model/Response.java#L70-79)方法并使用您想要的任何编码解析内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:39:10.463

我使用 apache common lang 来处理消息并且没有遇到问题。如果此信息将发送到关系数据库，我将使用准备好的语句。希望能帮助到你。

# c# - 使用 UTF8 编码/解码

> ID：14263281
> 
> 赞同：0
> 
> 时间：2013-01-10T17:04:02.497
> 
> 标签：c#, visual-studio-2008, utf-8, encode

我正在尝试对富文本框中的文本进行编码，因此它显示为`UTF-8`.
但是，我遇到了一些麻烦，并且大多数在线帮助帖子都没有告诉我如何将转换后的文本返回到 Richtextbox。

```
 private void encodeToolStripMenuItem_Click(object sender, EventArgs e)
    {
        UTF8Encoding utf8 = new UTF8Encoding();
        string textstring;
        string encodedString;
        textstring = richTextBox1.Text;
        byte[] encodedBytes = utf8.GetBytes(textstring);
        richTextBox1.Clear();
        encodedBytes.ToString(encodedString);
        richTextBox1.Text = encodedString;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:17:38.517

Change `encodedBytes.ToString(encodedString);` to `encodedString = utf8.GetString(encodedBytes);`

# algorithm - Create non-intersecting polygon passing through all given points

> ID：14263284
> 
> 赞同：30
> 
> 时间：2013-01-10T17:04:07.420
> 
> 标签：algorithm, geometry, convex-hull

Suppose I have an array of points in random order, and I need to find a polygon (by sorting them, such that every adjacent pair represents a side) which passes through **all** of the points, and its sides are non-intersecting of course.

I tried to do it by selecting a point, and adding all points to the final array which are below it, sorted left to right. Then, adding all points which are above it, sorted right to left.

I've been told that I can add an additional point and sort naturally to avoid self-intersections.. I am unable to figure out that though. What's a simple way to do this?

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-12-17T00:39:50.520

> Our strategy is to make a plan where we are sure that the polygon includes all points, and that we can find an order to connect them where none of the lines intersect.
> 
> **Algorithm**:
> 
> 1.  Find the leftmost points p
> 2.  Find the rightmost point q
> 3.  Partition the points into A, the set of points below pq, and B, the set of points above pq [you can use the left turn test on (p,q,?) to determine if a point is above the line].
> 4.  Sort A by x-coordinate (increasing)
> 5.  Sort B by x-coordinate (decreasing).
> 6.  Return the polygon defined by p, the points in A, in order, q, the points of B in order.
> 
> **Runtime**:
> 
> Steps 1,2,3 take O(n) time.
> Steps 4,5 take O(nlogn) time.
> Step 6 take O(n) time.
> Total runtime is O(nlogn).
> 
> **Correctness**:
> 
> By construction, all points besides p,q are in set A or set B. Our output polygon from line 6 therefore outputs a polygon with all the points. We now need to argue that none of the line segments in our output polygon intersect each other.
> 
> Consider each segment in the output polygon. The first edge from p to the first point in A can't intersect any segment (because there is no segment yet). As we proceed in order by x-coordinate through the points in A, from each point, the next segment is going to the right, and all previous segments are to the left. Thus, as we go from p, through all the points of A, to point q, we will have no intersections.
> 
> The same is true as we go from q back through the points of B. These segments cannot intersect each other because they proceed from right to left. These segments also cannot intersect anything in A because all points in A are below line pq, and all points in B are above this line.
> 
> Thus, no segments intersect each other and we have a simple polygon.

Source: [Broken link](http://www.cs.wustl.edu/~pless/546/homeworks/hw1_selectedProblems.pdf)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T19:50:51.590

As someone said, the minimal length solution is exactly the traveling salesman problem. Here's a non-optimal but feasible approach:

Compute a [Delauney triangulation](http://en.wikipedia.org/wiki/Delaunay_triangulation) of your points. Successively remove boundary segments until you are left with a boundary that interpolates all points or no more segments can be removed. Don't remove boundary segments if all points of the triangle using that segment are on the boundary. Take this boundary as your path.

I implemented this in Mathematica using 40 random points. Here is a typical result: ![enter image description here](../Images/64c3ca1b40657c722b6e60fd7b9e4544.png)

The obvious objection is that you might get to a point where not all your points are boundary points, but you can't remove a boundary segment without making the boundary self intersecting. This is a valid objection. It took me dozens of runs to see a case where this happened, but finally got this case: ![enter image description here](../Images/cee35d3d10bac6a01010d33ba5b5fbe8.png)

You can probably see some obvious ways of fixing this using the local topology, but I'll leave the details to you! One thing that might help is "edge flipping" where you take two triangles that share a side, say triangle (p,q,r) and (q,p,s) and replace them with (r,p,s) and (r,s,q) (all coordinates counterclockwise around the triangle). This can be done as long as the resulting triangles in this transformation are also counterclockwise ordered.

To reduce the need for fix-ups, you will want to make good choices of the segments to remove at each step. I used the ratio of the length of the boundary segment to the sum of the lengths of the other side of the candidate triangle (the triangle formed by the potentially incoming point with the segment).

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-11-21T09:54:59.590

**Warning! Sometimes polygons intersect, I don't know why. This could be my implementation problem. See comments for intersection examples.**

Here is python 3.6 code (libraries required: matplotlib, numpy) based on [bdean20](https://stackoverflow.com/users/779314/bdean20)'s [answer](https://stackoverflow.com/questions/14263284/create-non-intersecting-polygon-passing-through-all-given-points/20623817#20623817). [![https://i.stack.imgur.com/ilfFA.jpg](../Images/d4bd562154801f97f2e2b3d8ec990261.png)](https://i.stack.imgur.com/ilfFA.jpg)

Pictures description:

*   Top left - predefined polygon, other polygons are randomly generated.
*   Dotted line - connects green (leftmost) and red (rightmost) polygon's points.
*   Black dots are lays on the dotted line.
*   Orange dots lays below dotted line.
*   Blue dots lays above dotted line.

=========

```
import random
from operator import itemgetter
import numpy
import matplotlib
import matplotlib.pyplot

class Create_random_polygon:

    def __init__(self, array, min_rand_coord = None, max_rand_coord = None, points_num = None):        
        self.array = array
        self.min_rand_coord = min_rand_coord 
        self.max_rand_coord = max_rand_coord
        self.points_num = points_num

    def generate_random_points(self):
        random_coords_list = []
        for x in range(self.points_num):
            coords_tuple = (random.randint(self.min_rand_coord, self.max_rand_coord),
                            random.randint(self.min_rand_coord, self.max_rand_coord))
            random_coords_list.append(coords_tuple)
        self.array = random_coords_list
        return random_coords_list

    def close_line_to_polygon(self):
        a = self.array[0]
        b = self.array[len(self.array)-1]
        if a == b:
            pass
        else:
            self.array.append(a)    

    def find_leftmost_point(self):
        leftmost_point = None
        leftmost_x = None
        for point in self.array:
            x = point[0]
            if leftmost_x == None or x < leftmost_x:
                leftmost_x = x
                leftmost_point = point
        return leftmost_point

    def find_rightmost_point(self):
        rightmost_point = None
        rightmost_x = None
        for point in self.array:
            x = point[0]
            if rightmost_x == None or x > rightmost_x:
                rightmost_x = x
                rightmost_point = point
        return rightmost_point

    def is_point_above_the_line(self, point, line_points):
        """return 1 if point is above the line
           return -1 if point is below the line
           return  0 if point is lays on the line"""
        px, py = point
        P1, P2 = line_points
        P1x, P1y = P1[0], P1[1]
        P2x, P2y = P2[0], P2[1]
        array = numpy.array([
            [P1x - px, P1y - py],
            [P2x - px, P2y - py],
            ])
        det = numpy.linalg.det(array)
        sign = numpy.sign(det)
        return sign

    def sort_array_into_A_B_C(self, line_points):
        [(x_lm, y_lm), (x_rm, y_rm)] = line_points
        A_array, B_array, C_array = [], [], []
        for point in self.array:
            x, y = point
            sing = self.is_point_above_the_line( (x, y), line_points)
            if sing == 0:
                C_array.append(point)
            elif sing == -1:
                A_array.append(point)
            elif sing == 1:
                B_array.append(point)
        return A_array, B_array, C_array

    def sort_and_merge_A_B_C_arrays(self, A_array, B_array, C_array):
        A_C_array = [*A_array, *C_array]
        A_C_array.sort(key=itemgetter(0))
        B_array.sort(key=itemgetter(0), reverse=True)        
        merged_arrays = [*A_C_array, *B_array]
        self.array = merged_arrays

    def show_image(self, array, line_points, A_array, B_array, C_array):
        [(x_lm, y_lm), (x_rm, y_rm)] = line_points        
        x = [x[0] for x in array]
        y = [y[1] for y in array]
        Ax = [x[0] for x in A_array]
        Ay = [y[1] for y in A_array]
        Bx = [x[0] for x in B_array]
        By = [y[1] for y in B_array]
        Cx = [x[0] for x in C_array]
        Cy = [y[1] for y in C_array]          
        matplotlib.pyplot.plot(Ax, Ay, 'o', c='orange') # below the line
        matplotlib.pyplot.plot(Bx, By, 'o', c='blue') # above the line
        matplotlib.pyplot.plot(Cx, Cy, 'o', c='black') # on the line
        matplotlib.pyplot.plot(x_lm, y_lm, 'o', c='green') # leftmost point
        matplotlib.pyplot.plot(x_rm, y_rm, 'o', c='red') # rightmost point
        x_plot = matplotlib.pyplot.plot([x_lm, x_rm], [y_lm, y_rm], linestyle=':', color='black', linewidth=0.5) # polygon's division line
        x_plot = matplotlib.pyplot.plot(x, y, color='black', linewidth=1) # connect points by line in order of apperiance        
        matplotlib.pyplot.show()

    def main(self, plot = False):
        'First output is random polygon coordinates array (other stuff for ploting)'
        print(self.array)
        if self.array == None:
            if not all(
                [isinstance(min_rand_coord, int),
                 isinstance(max_rand_coord, int),
                 isinstance(points_num, int),]
                ):
                print('Error! Values must be "integer" type:', 'min_rand_coord =',min_rand_coord, ', max_rand_coord =',max_rand_coord, ', points_num =',points_num)
            else:                
                self.array = self.generate_random_points()            

        print(self.array)
        x_lm, y_lm = self.find_leftmost_point()
        x_rm, y_rm = self.find_rightmost_point()
        line_points = [(x_lm, y_lm), (x_rm, y_rm)]

        A_array, B_array, C_array = self.sort_array_into_A_B_C(line_points)
        self.sort_and_merge_A_B_C_arrays(A_array, B_array, C_array)
        self.close_line_to_polygon()
        if plot:
            self.show_image(self.array, line_points, A_array, B_array, C_array)
        return self.array

if __name__ == "__main__":
    # predefined polygon
    array = [ 
        (0, 0),
        (2, 2),
        (4, 4),
        (5, 5),
        (0, 5),        
        (1, 4),
        (4, 2),
        (3, 3),
        (2, 1),
        (5, 0),
        ]    
    array = None # no predefined polygon
    min_rand_coord = 1
    max_rand_coord = 10000
    points_num = 30

    crt = Create_random_polygon(array, min_rand_coord, max_rand_coord, points_num)
    polygon_array = crt.main(plot = True) 
```

==========

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-07-13T12:32:48.697

I just had this very same problem and came up with some quite simple solution, also of n*log(n) complexity.

First take some point internal to the figure, it does not matter which, it makes sense for it to be the central point, either in the middle of the most distant points or in the average of all points (like a gravity center).

Then sort all the points according to an angle from which they are seen from the central point. The sort key would be equivalent to atan2 for a point and the center.

That's it. Assuming that p is an array of points (x, y), this is the Python code.

```
center = reduce(lambda a, b: (a[0] + b[0], a[1] + b[1]), p, (0, 0))
center = (center[0] / len(p), (center[1] / len(p)))
p.sort(key = lambda a: math.atan2(a[1] - center[1], a[0] - center[0])) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-21T16:14:37.457

What you are seeking is called a *simple polygonization* in the literature. See, for example, [this web page](http://erikdemaine.org/polygonization/) on the topic. It is easy to generate a [star-shaped](http://en.wikipedia.org/wiki/Star-shaped_polygon) polygonization, as Miguel says, but difficult to find, for example, a minimal perimeter polygonization, which is a minimal TSP, as Axel Kemper mentions. There are in general an exponential number of different polygonizations for a given point set.

          ![Four point polygonization](../Images/9e71c952e7a2cde518d217f3f44e1623.png)

For the star-shaped polygonization, there is one issue that requires some attention: the extra point *x* (in the "kernel" of the star) must not coincide with an existing point! Here is one algorithm to guarantee *x*. Find the closest pair of points (*a,b*), and let *x* be the midpoint of segment *ab*. Then proceed as per Miguel's post.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-21T15:32:13.283

Well, if you don't actually care about minimality or anything like that, you can just place new point inside the convex hull and then order the other points by angle to this new point. You'll get a non-intersecting polygon.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-10-21T08:01:12.233

I modified the codes in [Comrade Che](https://stackoverflow.com/users/2829863/comrade-che) 's [answer](https://stackoverflow.com/questions/14263284/create-non-intersecting-polygon-passing-through-all-given-points?answertab=votes#tab-top) to avoid generating intersecting polygon when there exit more than one leftmost or rightmost points(e.g., [(10, 20), (17, 5), (1, 16), (1, 14), (20, 8), (4, 7), (6, 9)]). The main change is that if there exit more than one leftmost or rightmost points, then compare with their y coordinates and select the bottom one as the leftmost or the rightmost point. Here are the codes:

```
import random
from operator import itemgetter
import numpy
import matplotlib
import matplotlib.pyplot

class Create_random_polygon:

def __init__(self, array, min_rand_coord = None, max_rand_coord = None, points_num = None):        
    self.array = array
    self.min_rand_coord = min_rand_coord 
    self.max_rand_coord = max_rand_coord
    self.points_num = points_num

def generate_random_points(self):
    random_coords_list = []
    for x in range(self.points_num):
        coords_tuple = (random.randint(self.min_rand_coord, self.max_rand_coord),
                        random.randint(self.min_rand_coord, self.max_rand_coord))
        random_coords_list.append(coords_tuple)
    self.array = random_coords_list
    return random_coords_list

def close_line_to_polygon(self):
    a = self.array[0]
    b = self.array[len(self.array)-1]
    if a == b:
        pass
    else:
        self.array.append(a)    

def find_leftmost_point(self):
    leftmost_point = None
    leftmost_x = None
    leftmost_y = None
    for point in self.array:
        x = point[0]
        y = point[1]
        if (leftmost_x == None) or (x < leftmost_x) or (x == leftmost_x and y < leftmost_y):
            leftmost_x = x
            leftmost_y = y
            leftmost_point = point
    return leftmost_point

def find_rightmost_point(self):
    rightmost_point = None
    rightmost_x = None
    rightmost_y = None
    for point in self.array:
        x = point[0]
        y = point[1]
        if (rightmost_x == None) or (x > rightmost_x) or (x == rightmost_x and y < rightmost_y ):
            rightmost_x = x
            rightmost_y = y
            rightmost_point = point
    return rightmost_point

def is_point_above_the_line(self, point, line_points):
    """return 1 if point is above the line
       return -1 if point is below the line
       return  0 if point is lays on the line"""
    px, py = point
    P1, P2 = line_points
    P1x, P1y = P1[0], P1[1]
    P2x, P2y = P2[0], P2[1]
    array = numpy.array([
        [P1x - px, P1y - py],
        [P2x - px, P2y - py],
        ])
    det = numpy.linalg.det(array)
    sign = numpy.sign(det)
    return sign

def sort_array_into_A_B_C(self, line_points):
    [(x_lm, y_lm), (x_rm, y_rm)] = line_points
    A_array, B_array, C_array = [], [], []
    for point in self.array:
        x, y = point
        sing = self.is_point_above_the_line( (x, y), line_points)
        if sing == 0:
            C_array.append(point)
        elif sing == -1:
            A_array.append(point)
        elif sing == 1:
            B_array.append(point)
    return A_array, B_array, C_array

def sort_and_merge_A_B_C_arrays(self, A_array, B_array, C_array):
    A_C_array = [*A_array, *C_array]
    A_C_array.sort(key=itemgetter(0))
    B_array.sort(key=itemgetter(0), reverse=True)        
    merged_arrays = [*A_C_array, *B_array]
    self.array = merged_arrays

def show_image(self, array, line_points, A_array, B_array, C_array):
    [(x_lm, y_lm), (x_rm, y_rm)] = line_points        
    x = [x[0] for x in array]
    y = [y[1] for y in array]
    Ax = [x[0] for x in A_array]
    Ay = [y[1] for y in A_array]
    Bx = [x[0] for x in B_array]
    By = [y[1] for y in B_array]
    Cx = [x[0] for x in C_array]
    Cy = [y[1] for y in C_array]          
    matplotlib.pyplot.plot(Ax, Ay, 'o', c='orange') # below the line
    matplotlib.pyplot.plot(Bx, By, 'o', c='blue') # above the line
    matplotlib.pyplot.plot(Cx, Cy, 'o', c='black') # on the line
    matplotlib.pyplot.plot(x_lm, y_lm, 'o', c='green') # leftmost point
    matplotlib.pyplot.plot(x_rm, y_rm, 'o', c='red') # rightmost point
    x_plot = matplotlib.pyplot.plot([x_lm, x_rm], [y_lm, y_rm], linestyle=':', color='black', linewidth=0.5) # polygon's division line
    x_plot = matplotlib.pyplot.plot(x, y, color='black', linewidth=1) # connect points by line in order of apperiance        
    matplotlib.pyplot.show()

def main(self, plot = False):
    'First output is random polygon coordinates array (other stuff for ploting)'
    print(self.array)
    if self.array == None:
        if not all(
            [isinstance(min_rand_coord, int),
             isinstance(max_rand_coord, int),
             isinstance(points_num, int),]
            ):
            print('Error! Values must be "integer" type:', 'min_rand_coord =',min_rand_coord, ', max_rand_coord =',max_rand_coord, ', points_num =',points_num)
        else:                
            self.array = self.generate_random_points()            

    print(self.array)
    x_lm, y_lm = self.find_leftmost_point()
    x_rm, y_rm = self.find_rightmost_point()
    line_points = [(x_lm, y_lm), (x_rm, y_rm)]

    A_array, B_array, C_array = self.sort_array_into_A_B_C(line_points)
    self.sort_and_merge_A_B_C_arrays(A_array, B_array, C_array)
    self.close_line_to_polygon()
    if plot:
        self.show_image(self.array, line_points, A_array, B_array, C_array)
    return self.array

if __name__ == "__main__":
# predefined polygon
 array = [ 
    (0, 0),
    (2, 2),
    (4, 4),
    (5, 5),
    (0, 5),        
    (1, 4),
    (4, 2),
    (3, 3),
    (2, 1),
    (5, 0),
    ]    
 #array = [(10, 20), (17, 5), (1, 16), (1, 14), (20, 8), (4, 7), (6, 9)]
 #array = [(1, 19), (12, 18), (10, 1), (1, 9), (5, 16), (10, 18), (2, 1)]
 #array = [(13, 17), (15, 3), (14, 13), (11, 8), (7, 16), (7, 7), (10, 15)] 
 array = None # no predefined polygon
 min_rand_coord = 1
 max_rand_coord = 10000
 points_num = 30

 crt = Create_random_polygon(array, min_rand_coord, max_rand_coord, points_num)
 polygon_array = crt.main(plot = True) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-11-02T11:52:39.550

Here is my Typescript implementation of [Pawel Pieczul](https://stackoverflow.com/users/1759575/pawel-pieczul)'s [answer](https://stackoverflow.com/a/57019203/6893300) which worked perfectly for my use case involving simple polygons:

```
interface Point {
    x: number,
    y: number,
    z?: number,
}

const getCentroid = (points: Point[]) => {
    let centroid = { x: 0, y: 0 }
    for (let i = 0; i < points.length; i++) {
        centroid.x += points[i].x
        centroid.y += points[i].y
    }

    centroid.x /= points.length
    centroid.y /= points.length
    return centroid
}

export const sortNonIntersecting = (points: Point[]) => {
    const center = getCentroid(points)
    return points.slice().sort((a: Point, b: Point) => {
        const angleA = Math.atan2(a.y - center.y, a.x - center.x)
        const angleB = Math.atan2(b.y - center.y, b.x - center.x)
        return angleA - angleB
    })
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-10T17:09:38.860

Testing if two segments intersect is simple and fast. See [that](http://algs4.cs.princeton.edu/91primitives/) for example.

With that you could build your polygon iteratively :

Source Points : `S = {S0, ... Si, Sj,...}`

Final Polygon : `A = {A0, ... Ai, Aj,...}`

You start with `S` full and `A` empty.

Take the first 3 points of `S` and move them to `A`. This triangle is of course not self intersecting.

Then, until `S` is empty, take its first remaining point, that we'll call `P`, and look for a position in `A` where it could be inserted.

This position is `i+1` for the first `i` verifying that neither `[Ai-P]` nor `[Ai+1-P]` intersects any other segments `[Ak-Ak+1]`.

Your new polygon `A` is thus `{A0, ... Ai, P, Ai+1, ...}`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-10T17:20:04.237

I believe you can use [Graham scan](http://en.wikipedia.org/wiki/Graham_scan) algorithm to solve your problem.

*Edit:* in general, [Convex hull algorithms](http://en.wikipedia.org/wiki/Convex_hull_algorithms) are something to look at.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-23T10:27:46.453

Flutter and Dart developers can use this. I am using this for fix user selected points for create a polygon. When users draw polygons on the map, they generally do not mark points in order.

**Example Result:** Left one corrected by using this method, Right one is not. [![enter image description here](../Images/538774e342a5631769bd5cc87ca2f9aa.png)](https://i.stack.imgur.com/0Xnae.jpg)

Here is the dart implementation of Pawel's answer;

```
 LatLng findCentroid(List<LatLng> points) {
        double x = 0;
        double y = 0;
        for (LatLng p in points) {
          x += p.latitude;
          y += p.longitude;
        }
        LatLng center = new LatLng(0, 0);
        center.latitude = x / points.length;
        center.longitude = y / points.length;
        return center;
      }

      List<LatLng> sortVerticies(List<LatLng> points) {
        // get centroid
        LatLng center = findCentroid(points);

        points.sort((a, b){
          double a1 = (radsToDegrees(Math.atan2(a.latitude - center.latitude, a.longitude - center.longitude)) + 360) % 360;
          double a2 = (radsToDegrees(Math.atan2(b.latitude - center.latitude, b.longitude - center.longitude)) + 360) % 360;
          return (a1 - a2).toInt();
        });
        return points;
      }

      num radsToDegrees(num rad) {
        return (rad * 180.0) / Math.pi;
      } 
```

# java - 在 intellijIDEA 中找不到 JDK x64

> ID：14263287
> 
> 赞同：2
> 
> 时间：2013-01-10T17:04:25.563
> 
> 标签：java, configuration, intellij-idea

我正在开始一个新项目，客户要求我们在 IntelliJIdea 工作。我安装了它并尝试进行 ant 构建。它使我们的构建需要 64 位 jdk。所以我安装了它。但是，现在我需要在 IntelliJIdea 中对其进行配置。这是我收到的信息：

> 未配置运行此 ANT 目标所需的 JDK (1.6_x64)。请更新您在项目 | 中的设置 图书馆菜单。

有人可以帮我找到这个`Project | Libraries menu`菜单吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:05:56.540

按 ctrl+alt+shift+s，在左侧你会看到 Project Settings -> Libraries。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T17:09:22.430

> 问：我在哪里配置项目 JDK？
> 
> 答：在“项目设置”对话框中。
> 
> 要将 JDK 添加到项目，请按 Ctrl+Alt+Shift+S，在平台设置下单击 JDK 并指定 JDK 路径。之后，您可以单击 Project 并指定在当前项目中使用您配置的 JDK。请记住，JDK 是在 IDE 级别配置的，因此当您创建另一个项目时，您无需再次添加相同的 JDK。

参考： http: [//www.jetbrains.com/idea/documentation/migration_faq.html](http://www.jetbrains.com/idea/documentation/migration_faq.html)

# asp.net - 在 MasterpageFile 中引用 ac# 变量

> ID：14263288
> 
> 赞同：0
> 
> 时间：2013-01-10T17:04:26.633
> 
> 标签：asp.net, .net

我昨天读了这篇文章，并将我的网址换成了这个，所以我的代码更容易维护。忽略列表部分。我只有一个 c# 类，其中包含我所有的 url。

[.NET - 将 URL 存储为全局变量](https://stackoverflow.com/questions/4609093/net-storing-urls-as-global-variables)

我正在尝试对我的 masterpagefile 做类似的事情，如下所示：

```
<%@ Page Title="" Language="C#" MasterPageFile="<%= Urls.masterpage %>" AutoEventWireup="true" CodeFile="test.aspx.cs" Inherits="test_test" %> 
```

我收到一个解析器错误，指出路径中有非法字符。我要问的是前端是否有解决此问题的方法，而不是深入研究 c# 代码。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:27:21.027

不能在 ASP.NET 声明性标记中使用 ASP.NET 声明性标记。

您*也许*可以这样做，但我还没有测试过：

```
<% Page.MasterPageFile = Urls.masterpage; %> 
```

另一种选择是从您的代码隐藏文件中设置它：

```
protected void Page_Init(object sender, EventArgs e)
{
    Page.MasterPageFile = Urls.masterpage;
} 
```

# c# - oledbException 出现未处理的错误

> ID：14263290
> 
> 赞同：0
> 
> 时间：2013-01-10T17:04:28.540
> 
> 标签：c#, sql

我正在尝试使用以下代码填充带有名字和姓氏的文本框：

```
using (OleDbConnection connName = new OleDbConnection(strCon))
            {

                String sqlName = "SELECT forename, Surname FROM customer WHERE [customerID]=" + txtCustomerID.Text;

                // Create a command to use to call the database.
                OleDbCommand commandname = new OleDbCommand(sqlName, connName);
                 connName.Open();
                // Create a reader containing the results

                using (OleDbDataReader readerName = commandname.ExecuteReader())
                {
                    readerName.Read(); // Advance to the first row.
                    txtName.Text = readerName[0].ToString();
                }
                connName.Close();                 

             } 
```

但是我得到了错误：`OleDbException`未处理。

> “多个必需参数之一没有必需值”

在`ExecuteReader`，我不知道如何解决这个问题。

编辑：下面的代码与查询中的信息几乎完全相同，但不会出现此异常。

```
 string strCon = Properties.Settings.Default.PID2dbConnectionString;

        using (OleDbConnection conn = new OleDbConnection(strCon))
        {
            String sqlPoints = "SELECT points FROM customer WHERE [customerID]=" + txtCustomerID.Text;
            conn.Open();

            // Create a command to use to call the database.
            OleDbCommand command = new OleDbCommand(sqlPoints, conn);
            // Create a reader containing the results

            using (OleDbDataReader reader = command.ExecuteReader())
            {
                reader.Read(); // Advance to the first row.
                txtPoints.Text = reader[0].ToString(); // Read the contents of the first column
            }
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:19:32.017

通常的原因是 null 或空字符串，即 txtCustomerID.Text 没有值，因此发送到服务器的查询是：

```
SELECT forename, Surname FROM customer WHERE [customerID]= 
```

您可以避免此类错误和[SQL Injection](http://bobby-tables.com/)，使用强类型参数并使用参数化查询避免数据截断（我假设客户 ID 是一个 int 字段）

```
 using (OleDbConnection connName = new OleDbConnection(strCon))
    {
        String sqlName = "SELECT forename, Surname FROM customer WHERE customerID = @CustomerID";

        // Create a command to use to call the database.
        using (OleDbCommand commandname = new OleDbCommand(sqlName, connName))
        {

            //Check the input is valid
            int customerID = 0;
            if (!int.TryParse(txtCustomerID.Text, out customerID))
            {
                txtName.Text = "Customer ID Text box is not an integer";
                return;
            }

            connName.Open();

            // Add the parameter to the command
            commandname.Parameters.Add("@CustomerID", OleDbType.Integer).Value = customerID;

            // Create a reader containing the results
            using (OleDbDataReader readerName = commandname.ExecuteReader())
            {
                readerName.Read(); // Advance to the first row.
                txtName.Text = readerName[0].ToString();
            }
            connName.Close();                 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:08:29.547

您必须对字符串查询中使用的参数进行编码。

```
 String sqlName = String.Format("SELECT forname, Surname FROM customer WHERE customerID={0}",txtCustomerID.Text); 
```

但我建议您不要使用硬编码在字符串中的 SQL 查询。SQL注入攻击的简单方法。您应该改用参数。

# python - 检查和删除多余的符号

> ID：14263295
> 
> 赞同：0
> 
> 时间：2013-01-10T17:04:40.820
> 
> 标签：python, symbols

我对从 python 中的字符串中删除额外的符号感兴趣。

更有效和 pythonic 的方式可以做到这一点？有语法模块吗？

我的第一个想法是找到更多嵌套的文本并遍历左右，计算开始和结束符号。然后我删除包含太多符号的符号计数器的最后一个。

一个例子是这个字符串

```
text = "(This (is an example)" 
```

您可以清楚地看到第一个括号没有被另一个括号平衡。所以我想删除它。

```
text = "This (is and example)" 
```

解决方案必须与括号的位置无关。

其他示例可能是：

```
text = "(This (is another example) )) (to) explain) the question" 
```

那将变成：

```
text = "(This (is another example) ) (to) explain the question" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:14:00.683

不得不将其分解为格式化的答案。检查[Python 的正则表达式模块。](http://docs.python.org/2/library/re.html)

如果我理解您的要求，请查看`re.sub`. 您可以使用正则表达式来查找要删除的字符，并将其替换为空字符串。

假设我们要删除所有“.”、“&”和“*”的实例。

```
>>> import re
>>> s = "abc&def.ghi**jkl&"
>>> re.sub('[\.\&\*]', '', s)
'abcdefghijkl' 
```

如果要匹配的模式更大，您可以使用`re.compile`并将其作为第一个参数传递给 sub。

```
>>> r = re.compile('[\.\&\*]')
>>> re.sub(r, '', s)
'abcdefghijkl' 
```

希望这可以帮助。

# jquery - 如何在 jquery 中引用类值、变量文本内容和变量属性？

> ID：14263296
> 
> 赞同：0
> 
> 时间：2013-01-10T17:04:44.673
> 
> 标签：jquery

如何在 jquery 中引用类值、变量文本内容和变量属性？

使用以下带有以下变量的 jquery 代码：

```
var moveLeft = 10;
var log = [];
var strongContentText = $("#testList").text();
$("#aList").html("<input type='inputCheck' style='margin-left:"+moveLeft+"px"'>"</input>"<strong class='highLight'>"+strongContentText+"</strong><p>"+log.join(' ')+"</p>"); 
```

根据萤火虫，它说 SyntaxError: missing ) after argument list in this area moveLeft+"px"'>" 但我想不通

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:08:55.500

试试这个：

```
$("#aList").html("<input type='inputCheck' style='margin-left:"+moveLeft+"px"'>"</input>"<strong class=\'highLight\'>"'+strongContentText+'"</strong><p>'+log.join(' ')+"</p>"); 
```

我调整了一些单引号和双引号问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:08:57.463

试试这个：

```
$("#aList").html("<input type='inputCheck' style='margin-left:" + moveLeft + "px'></input><strong class='highLight '>" + strongContentText + "</strong><p>" + log.join(' ') + "</p>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:08:58.830

使用单引号来包含 html，以便在指定属性时可以使用双引号：

```
$('#aList').html('<input type="inputCheck" style="margin-left:'+moveLeft+'px"></input><strong class="highLight">'+strongContentText+'</strong><p>'+log.join(' ')+'</p>'); 
```

如果您更喜欢使用其中一个而不是另一个，则来回切换没有问题。这也有助于避免`\`在字符串中使用转义斜杠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T17:09:07.707

我想你只是有一些额外的报价在那里。

```
$("#aList").html("<input type='inputCheck' style='margin-left:"+moveLeft+"px'></input><strong class='highLight'>"+strongContentText+"</strong><p>"+log.join(' ')+"</p>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T17:11:30.643

现在试试：

```
$("#aList").html("<input type='inputCheck' style='margin-left:" + moveLeft + "px'></input><strong class='highLight'>" + strongContentText + "</strong><p>" + log.join(' ')+ "</p>"); 
```

# android-pay - 无法在 Google 数字钱包中完成交易

> ID：14263299
> 
> 赞同：0
> 
> 时间：2013-01-10T17:04:56.860
> 
> 标签：android-pay

无法在 Google 数字钱包中完成交易。我从谷歌钱包收到了第一个屏幕。当我在此屏幕上按“购买”时。然后我收到“呃哦。出现问题。由于技术问题，我们无法完成您的购买。

问题详情如下：

很遗憾，我们无法通过商家的服务器确认您的购买。您的订单已被取消。如果此问题仍然存在，请与商家联系。130110 11:54:15-0500 F5HORI"

我在我的帐户中设置了一个 posturl，并且根据我的服务器日志和诊断，该 url 是在我的服务器上实现的（我使用了你的 java 示例），回发 url 没有被调用。

我的服务器上没有身份验证，回发在端口 8080 上运行。

# knockout.js - 仅在通过按钮单击加载数据时出现微风错误

> ID：14263301
> 
> 赞同：0
> 
> 时间：2013-01-10T17:04:59.713
> 
> 标签：knockout.js, breeze

我正在使用 Breeze 将数据加载到我的应用程序中。当应用程序加载并且工作正常时，我会进行数据的初始加载。我还有一个按钮，单击该按钮应该再次获取数据。但是，当我单击该按钮时，查询失败，但错误消息是 json 数据。

这是该函数的代码：

```
var getULSLogs = function (filters) {

    var query = entityQuery
        .from('ULSLogs')
        .orderByDesc('LogTime')
        .take(app.rowLimit);

    return manager.executeQuery(query)
        .then(querySucceeded)
        .fail(function(e) {
            alert(e);
        });

    function querySucceeded(data) {
        console.log('Query Succeeded');
        data.results.forEach(function (item) {
            vm.ulslog.logs.push(item);
        });
    }
}; 
```

由于我没有收到实际的错误消息，因此我不确定从这里去哪里。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:50:03.267

'fail' 承诺中的返回值是一个带有许多属性的 javascript 对象。根据故障，您可以通过在调试器中详细查看此对象来找到更多信息。

# iphone - 下载多个图像并显示多个 UIImageView 的最佳方法是什么？

> ID：14263303
> 
> 赞同：2
> 
> 时间：2013-01-10T17:05:13.690
> 
> 标签：iphone, objective-c, xcode, image

我需要从网站下载图像并将它们显示在（？）多个 UIImageView 上。

也许我会编写一个 php 来“读取”目录并搜索图像，编写一个 XML 文件并将其用作媒介。但我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:29:17.543

让我们看看从网站获取图像的选项：

1.  获取 HTML 并解析 HTML 以查找图像（在 iphone 上）。然后下载图片。

2.  编写一个脚本（可能是 PHP），将所有图像链接写入 XML 文件（或 JSON），然后获取包含所有链接的脚本输出。

如果您选择选项 (1)，您将需要[NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)异步获取数据（不阻塞 UI）。我还将使用[TFHpple](https://github.com/topfunky/hpple)使用 xpath 查询来解析 HTML，请参阅[本](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)教程以获取帮助。最后，要使用它们的 URL 获取图像，您可以使用[SDWebImage](https://github.com/rs/SDWebImage)，SDWebimage 还提供缓存，因此您的应用程序不会多次下载相同的图像。

使用选项 (1) 的不利方面是，您从中获取图像的网站中的任何更改都会破坏您的应用程序，您需要向应用程序商店发布更新才能修复它。

如果您选择选项 (2)，您的应用会在网站发生变化时更容易修复，您只需要修改脚本即可。

如果您使用选项 (2)，您可能需要[NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)、[NSXMLParser](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)（或第三方 XML 解析库）并下载我会再次推荐[SDWebImage](https://github.com/rs/SDWebImage)的图像。我还建议使用 JSON（和[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)）而不是 XML，只是因为我发现 JSON 更容易解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:11:32.673

是的，如果您编写一些 php 脚本来获取图像列表（图像 url 列表）会非常好。获取此类 url 后，您可以异步下载并在图像视图中显示它们。[在这里](http://www.markj.net/iphone-asynchronous-table-image/)寻找这样的异步图像视图实现

# java - NumberFormat 是否应该与 ParsePosition 一起用于在国际化上下文中将 String 解析为 double

> ID：14263306
> 
> 赞同：0
> 
> 时间：2013-01-10T17:05:27.870
> 
> 标签：java, parsing, internationalization, number-formatting

我发现了两种将字符串转换为双精度值的策略（考虑到国际化）：

1）这使用a`NumberFormat`结合`ParsePosition`来解析字符串，后来实例`assert`的索引`ParsePosition`与字符串的长度相同。这样做的缺点是 javadoc for`NumberFormat#parse(String,ParsePosition)`声明该方法将尝试返回 a`Long`如果可能，否则为 a `Double`。这种方法目前工作正常，但我不确定它是否会在某些情况下失败？

2）这只是使用`NumberFormat`单独来解析字符串，但问题是它会引发一段`ParseException`时间的调用`NumberFormat#parse(String)`，所以我总是需要将代码包围在一个`try-catch`块中。

我的问题是哪种方法更好，或者是否有另一种方法比这两种方法更好？

我正在尝试将法语语言环境中的字符串解析为双精度。

# css - 带有 twitter 引导程序的全宽布局

> ID：14263307
> 
> 赞同：69
> 
> 时间：2013-01-10T17:05:29.257
> 
> 标签：css, twitter-bootstrap

我正在尝试完成与此类似的布局：http: [//dribbble.com/shots/829195-Slate/attachments/86422](http://dribbble.com/shots/829195-Slate/attachments/86422)

我的项目使用带有响应式设计的 Twitter Bootstrap。可以用 Bootstrap 实现全宽布局吗？

问题是，从我一直在阅读的内容来看，流体布局将在 bootstrap 3.0 中被删除，并且响应式设计具有固定的宽度。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-08-27T21:26:53.037

你会在这里找到一个很棒的教程：[bootstrap-3-grid-introduction](http://www.helloerik.com/bootstrap-3-grid-introduction)和你的问题的答案是`<div class="container-fluid"> ... </div>`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-05-03T22:56:03.780

因为公认的答案与 BS3 不在同一个星球上，所以我将分享我用来实现几乎全角功能的东西。

首先，这是作弊。它不是真正的流体宽度 - 但它似乎是 - 取决于查看网站的屏幕大小。

BS3 和流体宽度网站的问题在于他们采用了这种“移动优先”的方法，这要求他们将每个可怕的屏幕宽度定义为他们认为的桌面（1200 像素）我正在使用 1900 像素的笔记本电脑宽屏 - 所以我最终在 BS3 认为是桌面大小的宽度的内容两侧都有 350 像素。

他们定义了 10 个屏幕宽度（实际上只有 5 个，但无论如何）。我真的不喜欢改变这些，因为它们是常见的宽度。所以，在决定容器类的宽度时，我选择定义一些额外的宽度供 BS 选择。

我使用 BS 的方式是获取所有 Bootstrap 提供的 LESS 文件，省略 variables.less 文件以提供我自己的文件，并在末尾添加我自己的一个以覆盖我想要更改的内容。在我的 less 文件中，我添加了以下内容以实现 2 个常见的屏幕宽度设置：

```
@media screen and (min-width: 1600px) {
    .container {
        max-width: (1600px - @grid-gutter-width);
    }
}
@media screen and (min-width: 1900px) {
    .container {
        max-width: (1900px - @grid-gutter-width);
    }
} 
```

这两个设置为实现不同屏幕宽度所需的操作设置了示例。在这里，您将获得 1600 像素和 1900 像素的全宽。任何小于 1600 - BS 回落到 1200px 宽度，然后到 768px 等等 - 下降到手机大小。

如果您有更大的支持，只需创建更多像这样的@media screen 语句。如果您正在构建 CSS，则需要确定使用的装订线宽度并将其从目标屏幕宽度中减去。

## 更新：

**Bootstrap 3.0.1**及更高版本（到目前为止） - 就像设置一样`@container-large-desktop`简单`100%`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-10T18:19:43.433

## 更新：

Bootstrap 3 已经发布，因为这个问题最初是在一月份回答的，所以如果你是 BS3 用户，请参考 BS3[文档](http://getbootstrap.com/getting-started/)。对于那些仍在使用 BS2 的人，原始答案仍然适用。如果您有兴趣从 2 切换到 3，请参阅[迁移](http://getbootstrap.com/getting-started/#migration)指南。

## 原答案：

从引导程序 2[文档](http://getbootstrap.com/2.3.2/scaffolding.html#fluidGridSystem)：

> 通过将 .row 更改为 .row-fluid 使任何行“流动”。列类保持完全相同，便于在固定网格和流动网格之间切换。

**代码**

```
<div class="row-fluid">
  <div class="span4">...</div>
  <div class="span8">...</div>
</div> 
```

这与将容器的宽度设置为可变值相结合，应该可以让您获得所需的布局。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-11T12:24:31.920

`.container-fluid`从最新的 Bootstrap (3.1.x) 开始，它使用类来实现流畅的布局。

请参阅[引导网格](http://getbootstrap.com/css/#grid)以供参考

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-16T06:39:27.620

只需创建另一个类并与引导`container`类一起添加。你也可以使用`container-fluid`。

```
<div class="container full-width">
    <div class="row">
        ....
    </div>
</div> 
```

CSS 部分非常简单

```
* {
    margin: 0;
    padding: 0;
}
.full-width {
    width: 100%;
    min-width: 100%;
    max-width: 100%;
} 
```

希望这会有所帮助，谢谢！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-10T17:16:20.690

```
*{
   margin:0
   padding:0
} 
```

make sure your container's width:%100

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-08-26T04:22:59.833

在 Bootstrap 3 中，列是使用百分比指定的。（在 Bootstrap 2 中，仅当列/跨度位于`.row-fluid`元素内时才会出现这种情况，但这不再是必需的，并且该类不再存在。）如果您使用 a `.container`，那么@Michael 绝对正确，您将被卡住具有固定宽度的布局。但是，如果您只是避免使用 .container 元素，则应该保持良好状态。

```
<body>
  <div class="row">
    <div class="col-lg-4">...</div>
    <div class="col-lg-8">...</div>
  </div>
</body> 
```

身体的边距已经是 0，所以你应该能够直接爬到边缘。（列的两边仍然有 15px 的填充，因此您可能必须在设计中考虑到这一点，但这不应该阻止您，您可以在下载 Bootstrap 时随时自定义它。）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-12T11:42:41.513

这是使用 Bootstrap 3 的 100% 宽度、100% 高度布局的示例。

[http://bootply.com/tofficer/77686](http://bootply.com/tofficer/77686)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-09-12T11:06:32.723

BS3 最简单​​的方法是像这样重置 BS3 CSS 设置的最大宽度和填充。你又得到一个 container-fluid ：

```
.container{
  max-width:100%;
  padding:0;
} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-11-11T13:05:24.073

我认为您可以只使用需要左右填充和 100% 宽度的类“col-md-12”。看起来这是第二个引导程序中容器流体的一个很好的替代品。

# c# - 将 DataSource gridview + datatable 绑定到 gridview

> ID：14263309
> 
> 赞同：1
> 
> 时间：2013-01-10T17:05:44.457
> 
> 标签：c#, asp.net, gridview

我使用 asp.net 并`gridview` 控制 aspx 页面。这个gridview 没有为空。

我在页面中有表名，并希望将表绑定到 gridview。所以：

```
gvName.DataSource =  dtName;
gvName.DataBind(); 
```

但是使用此代码，在 gridview 中丢失了以前的数据。我绑定`gvName.DataSource + dtName`到`gvName`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:30:25.407

您需要合并两个数据表（原始数据表和新数据表）上的行，然后重新绑定包含所有行的新数据表。

在伪代码中：

```
DataTable t = GetInitialDataSource();
foreach(var item in newDataTable.Rows)
{
    t.ImportRow(item); 
}

gv.DataSource=t;
gv.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:45:01.400

试试这个代码。DataTable.Merge cab 用于合并数据表。

```
 dtName.Merge((DataTable)gvName.DataSource);
    gvName.DataSource = dtName;
    gvName.DataBind(); 
```

# xml - 通过动态名称引用 XSLT 变量

> ID：14263310
> 
> 赞同：7
> 
> 时间：2013-01-10T17:05:44.930
> 
> 标签：xml, xslt

我遇到了一个小问题。

XSL 文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
<xsl:stylesheet version="1.0"  
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:fn="http://www.w3.org/2005/xpath-functions"> 
<xsl:template match="/"> 

<xsl:variable name="unumericValue" select="10" />
<xsl:variable name="uanotherValue" select="8" />

<xsl:for-each select="/root/try">
<xsl:value-of select="var" />
<xsl:variable name="min"><xsl:value-of select="@minimum" /></xsl:variable>
<xsl:value-of select="@type" />
<xsl:variable name="referenceName"><xsl:value-of select='concat("u",var)' /></xsl:variable>
<xsl:value-of select="$referenceName" />
<xsl:if test='$referenceName > $min'>
<p>Do something.</p>
</xsl:if>
</xsl:for-each>

</xsl:template>
</xsl:stylesheet> 
```

XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="q1.xsl"?>
<root>
<try type="compare" minimum="9">
<var>numericValue</var>
<something>...</something>
</try>

<try type="compare" minimum="10">
<var>anotherValue</var>
<something>...</something>
</try>
</root> 
```

如您所见，XML 文件有两个 var-Element，它们应该与 XSLT 文件中的变量匹配。但是我不知道哪种语法是正确的。$referenceName 只是我要使用的变量的名称。但我不知道如何将名称引用到现有变量。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T17:37:05.363

`$referenceName`不是对名为“unumericValue”或其他名称的变量的引用。它只是字符串值“unumericValue”等。所以它永远不会大于`$min`. 然而，通过一些额外的工作，有一个技巧可以通过它的名字找到一个变量：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:variable name="numericValue" select="10" />
  <xsl:variable name="anotherValue" select="8" />
  <xsl:variable name="vars" select="document('')/*/xsl:variable" />

  <xsl:template match="/">
    <xsl:variable name="referenceName" select="'numericValue'" />
    <xsl:variable name="referenceValue" select="$vars[@name = $referenceName]/@select" />
    Reference value: <xsl:value-of select="$referenceValue" />
  </xsl:template>
</xsl:stylesheet> 
```

这里要注意的一大限制是，这仅适用于常量数值的变量。

这是一种使用常量字符串值模拟变量的方法：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                 xmlns:v="variables-node"
>
  <v:variables>
    <v:variable n="numericValue" value="10" />
    <v:variable n="nonNumericValue" value="Hello World" />
  </v:variables>
  <xsl:variable name="vars" select="document('')//v:variables/v:variable" />

    <xsl:template match="/">
      <xsl:variable name="referenceName" select="'nonNumericValue'" />
      <xsl:variable name="referenceValue" select="$vars[@n = $referenceName]/@value" />
      <xsl:value-of select="concat('The variable with the name ', $referenceName, ' has the value ', $referenceValue)"/>
    </xsl:template>
</xsl:stylesheet> 
```

最后，一种用计算值模拟变量的方法：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:exslt="http://exslt.org/common"
>

  <xsl:variable name="varsRaw">
    <var n="computedValue" value="{concat('2 + 4 is ', 2 + 4)}" />
    <var n="computedNumber" value="{22 div 7}" />
  </xsl:variable>
  <xsl:variable name="vars" select="exslt:node-set($varsRaw)/var" />

    <xsl:template match="/">
      <xsl:variable name="referenceName" select="'computedValue'" />
      <xsl:variable name="referenceValue" select="$vars[@n = $referenceName]/@value" />
      <xsl:value-of select="concat('The variable with the name ', $referenceName, ' has the value ', $referenceValue)"/>

      <xsl:value-of select="'     '"/>

      <xsl:variable name="referenceName2" select="'computedNumber'" />
      <xsl:variable name="referenceValue2" select="$vars[@n = $referenceName2]/@value" />
      <xsl:value-of select="concat('The variable with the name ', $referenceName2, ' has the value ', $referenceValue2)"/>
    </xsl:template>
</xsl:stylesheet> 
```

最后一种方法实际上可能是最正统的，但需要依赖于 XSLT 处理器（至少在 XSLT 1.0 中）的`node-set()`功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T22:11:58.313

顺便说一句，不要这样做：

```
<xsl:variable name="min"><xsl:value-of select="@minimum" /></xsl:variable> 
```

你什么时候可以这样做：

```
<xsl:variable name="min" select="@minimum" /> 
```

它不仅冗长，而且效率低下 - 无需复制数据并构建新树，这是一项非常昂贵的操作，而您只需要对现有节点的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T21:46:31.870

与大多数编程语言一样，XSLT 变量名在运行时不可访问。该变量甚至可能在运行时不存在 - 优化器可以发挥各种技巧，例如在使用变量时内联对变量的所有引用。

最好的方法是使用标准名称的变量，并为其提供 XML 内容。XML 中的元素和属性名称可在运行时访问，这与变量名称不同。

# java - 支持自定义唯一性标准的现有 Java 集合？

> ID：14263313
> 
> 赞同：2
> 
> 时间：2013-01-10T17:06:00.050
> 
> 标签：java, collections, unique, guava, apache-commons-collection

我想利用一个独特的 java 集合，它可以接受一种策略来确定成员对象在集合初始化时是否“相等”。

我需要这样做的原因是因为我需要添加到此集合的类的 equals 方法已经实现以满足其他（更合适的）功能。在特定情况下，此集合实例中的唯一性标准只需要检查类的一个变量，而不是在 equals 方法中检查的多个变量。我宁愿避免装饰对象，因为我从不同的库中收集它们，并且循环进行装饰会很昂贵（并且可能会使我的代码变得混乱）。

我意识到这不会是一个 Set 因为它会破坏[Java 的 Set 合同](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)，但我只是觉得这个问题以前一定遇到过。我认为[Guava](http://code.google.com/p/guava-libraries/)或[Apache Collections](http://commons.apache.org/collections/)会提供一些东西，但似乎没有运气。**有人知道任何提供此类功能的可用库吗？我应该完全接受不同的解决方案吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:10:43.340

您可以使用自定义比较器和 TreeSet 或 TreeMap 吗？或者使用 Key 具有您的标准的地图？HashSet 只是 HashMap 的包装器，因此使用映射应该更昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:16:52.900

That is not really practical. Consider for instance two instances of a class `C` which you consider equivalent.

Now you do:

```
set.add(c1);
set.remove(c2); 
```

Should the set be empty after that? What about `.retainAll()`, `.removeAll()`?

Your best bet here is to create your own class which wraps over class `C`, deletages whatever is needed to be delegated, and have *this* wrapper class implement `.hashCode()` and `.equals()` (and possibly `Comparable` of itself too). With such a class, you can just go on and use classical sets and maps.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:23:07.990

Guava 有一个 Equivalence，它可以让你定义两个对象是否等价。

它还具有 Equivalence.Wrapper 包装任意对象并将 equals() 和 hashCode() 委托给等价中的实现，而不是它们自己的实现。

所以你可以做这样的事情：

```
public class MySet<T> implements Set<T> {

    private final Equivalence<T> equivalence;

    private final Set<Wrapper<T>> delegate = new HashSet<Wrapper<T>>();

    public MySet(Equivalence<T> equivalence) {
        this.equivalence = equivalence;
    }

    public boolean add(T t) {
        return delegate.add(equivalence.wrap(t));
    }

    // other Set methods

} 
```

# joomla2.5 - Joomla 2.5 删除标题标志 beez5 模板下的文本？

> ID：14263316
> 
> 赞同：0
> 
> 时间：2013-01-10T17:06:01.983
> 
> 标签：joomla2.5

我在 joomla 中开发了一个网站[http://examplesofandroid.com/](http://examplesofandroid.com/) 具有模板 beez5。我想从页面中删除文本“开源内容管理”。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:46:48.140

您可以通过转到模板`beez5`并打开`index.php`并搜索给定的代码来做到这一点：

```
<span class="header1">
    <?php echo htmlspecialchars($templateparams->get('sitedescription'));?>
</span> 
```

只需注释掉这个，你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T08:20:35.767

- 转到扩展 > 模板管理器 - 并选择您的模板 Beez5-Default 并单击它。-您将到达模板管理器页面：编辑样式。- 在该页面中，您可以从站点描述文本框中的页面更改或删除“开源内容管理”。

# android - 把一个视图放在另一个视图上

> ID：14263317
> 
> 赞同：0
> 
> 时间：2013-01-10T17:06:14.420
> 
> 标签：android, user-interface, quickaction

嗨，我创建了一个类似于您在下图中看到的快速操作。 ![在此处输入图像描述](../Images/112b5d5cf883be0294c8af629657c802.png)

但这不是我想要的形式。我喜欢我的快速行动类似于这样：

![在此处输入图像描述](../Images/e809821e5209040e575f6279308ea327.png)

我从教程中创建了我的快速操作，该教程创建了您可以在上图中看到的快速操作。
现在我有一个问题：如何将我的 quickAction 与第二张图像相似的图像视图下拉？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:24:38.627

尝试在 ImageView 上放置一个负的下边距：

```
android:layout_marginBottom="-5dp" 
```

# emacs - 在 Emacs Org Mode 表中以相反的顺序对行进行编号

> ID：14263318
> 
> 赞同：0
> 
> 时间：2013-01-10T17:06:15.973
> 
> 标签：emacs, org-mode

我想做这样的事情：

[如何使用 Calc 列规则在 Emacs Org Mode 中实现行索引列](https://stackoverflow.com/questions/9267050/how-to-achieve-a-row-index-column-in-emacs-org-mode-using-a-calc-column-rule)

但我希望行以相反的顺序编号。我怀疑这应该很容易，并且应该与@> 有关，但是例如 $1=@>-@# 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:52:15.843

你可以试试这个例子

```
| row | data |
|-----+------|
|   8 |      |
|   7 |      |
|-----+------|
|   6 |      |
|   5 |      |
|   4 |      |
|   3 | 5123 |
|   2 |      |
|   1 | 4234 |
#+TBLFM: $1='(- (length org-table-dlines) @#) 
```

# c++ - C++ 依赖生产没有自动化的理论原因是什么？

> ID：14263324
> 
> 赞同：18
> 
> 时间：2013-01-10T17:06:27.033
> 
> 标签：c++, build

[能够预先编译依赖项的 C++ Buildsystem](https://stackoverflow.com/questions/1827705/c-buildsystem-with-ability-to-compile-dependencies-beforehand)

Java 有 Maven，使用起来很愉快，只需指定已经编译的依赖项，并存放到 Maven***标准***目录，这意味着依赖项的位置是标准化的，而不是经常使用的具有多个位置的方式（给我一个break，就像任何人都记得 C/C++ 依赖项的特定 deps 的默认安装目录一样。

对于每个必须经常查找、阅读、熟悉配置选项/构建并最终为每个依赖项编译以简单地构建项目的个体开发人员来说，这是非常低效的。

没有实施的理论原因是什么？

为什么很难以类似 Maven 的声明格式提供以下选项的包？

```
version
platform (windows, linux)
src/dev/bin
shared/static
equivalent set of Boost ABI options when applicable 
```

不得不手动访问网站并在 2013 年搜索最古老的主要编程语言的依赖项是荒谬的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T17:32:22.563

没有任何理论上的原因。有很多实际原因。在 C++ 世界中有太多不同的处理方式来轻松标准化依赖系统：

*   实现差异 - C++ 是一门复杂的语言，不同的实现在历史上对它的支持程度（它们正确处理各种中高级 C++ 代码的能力）存在差异。因此，不能保证可以在特定实现中构建库。
*   平台差异 - 某些平台可能不支持异常。标准库有不同的实现，各有利弊。与 Java 的标准化库不同，Windows 和 POSIX API 可能完全不同。*文件系统*甚至不是标准 C++ 的一部分。
*   编译差异 - 静态还是共享？调试还是生产构建？是否启用可选依赖项？与具有非常稳定的字节码的 Java 不同，C++ 缺乏标准 ABI 意味着代码可能无法正确链接，即使是由相同的编译器为相同的平台构建。
*   构建系统差异 - Makefiles？（如果是这样，GNU Make，还是别的什么？） Autotools？制作？Visual Studio 项目文件？还有什么？
*   历史问题 - 由于 C 和 C++ 的时代，像 zlib 这样的流行库比像 Maven 这样的构建系统早了很多。当 zlib 正在做的工作时，为什么要切换到一些假设的 C++ 构建系统？如果一个更新的、更高级别的库依赖于像 zlib 这样的库，它如何切换到某个假设的构建系统？

两个额外的因素使事情复杂化：

*   在 Linux 中，发行版打包系统*确实*提供了开发库头二进制文件的标准化存储库，具有（通常）标准化的 ABI 和指定项目构建依赖项的简单方法。这些（特定于平台的）解决方案的存在降低了跨平台解决方案的动力。
*   由于所有这些复杂因素和预先存在的方法，任何建立标准构建系统的尝试都将遇到 XKCD 的[“标准”](http://xkcd.com/927/)中描述的问题：
    情况：有 14 个竞争标准。
    “14？可笑！我们需要制定一个涵盖每个人用例的通用标准。”
    很快：有 15 个相互竞争的标准。

综上所述：

对未来有一些希望。例如，CMake 似乎正在逐渐取代其他构建系统。一些 Boost 开发人员已经开始[Ryppl](http://ryppl.org/)，尝试做你所描述的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T17:44:53.400

（也发布在链接的问题中）

现在，我正在开发一种工具，该工具能够自动安装具有确切版本要求的 C/C++ 应用程序的所有依赖项：

*   编译器
*   库
*   工具（cmake、autotools）

现在它适用于我的应用程序。（以正确的顺序安装 UnitTest++、Boost、Wt、sqlite、cmake）

该工具名为 «C++ 版本管理器»（灵感来自优秀的 ruby​​ 版本管理器）以 bash 编码并托管在 github 上：[https ://github.com/Offirmo/cvm](https://github.com/Offirmo/cvm)

欢迎任何意见和建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:34:02.617

好吧，首先，解决所有依赖关系的系统默认情况下不会使您高效，它可能会使您的生产力更低。

关于语言之间的差异，我会说在 Java 中你有包，当你必须组织并为你的代码提供有限的视野时，这些包很方便，在 C++ 中你没有等效的概念。在 C++ 中，所有可以解决符号的库对于编译器来说都足够好，库的唯一真正要求是具有一定的 ABI 并解决所需的符号，没有自动化的方法可以让您选择正确的库，还解决了一个符号，这只是将您的函数链接到实际实现的问题，这甚至不授予您正确的链接阶段将使您的应用程序工作。

为此，您可以添加重要的变量，例如库版本、同一库的不同实现以及具有相同方法名称的不同库。

一个例子是 Mesa 库 VS 来自官方驱动程序的 opengl 库，或者您想要提供多个版本的任何库，每个库都可以解决所有符号，但可能有一个版本比其他版本更成熟，您可以询问编译器选择正确的一个，因为它们对于自己的目的都是一样的。

# asp.net - 没有调用母版页加载

> ID：14263329
> 
> 赞同：1
> 
> 时间：2013-01-10T17:06:49.880
> 
> 标签：asp.net, master-pages

```
 public partial class MasterPage : System.Web.UI.MasterPage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if(System.Web.HttpContext.Current.User.Identity.Name != "") //if (!Page.IsPostBack)
            {
                BusinessLayer.ShoppingCart cart = new BusinessLayer.ShoppingCart();
                int count = cart.getNoOfProducts(System.Web.HttpContext.Current.User.Identity.Name);
                Label lblCart = (Label)Master.FindControl("lblCartNo");
                lblCart.Text = " (" + count + ")";
            }
        }
    } 
```

我放置了一个断点并且永远不会调用此代码（即使没有 if 语句），我也无法找到位于母版页中的标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:31:10.220

为了调用 Page_Load，请确保在 MasterPage.aspx 中有 AutoEventWireup="true"：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="Mysite.Website.Templates.MasterPages.Site" %> 
```

确保 MasterPage.aspx Inherits 属性与您的代码隐藏命名空间和类名以及 .designer.cs 命名空间和类匹配。

如果 aspx 和代码隐藏文件都正确连接，那么您应该能够删除 FindControl 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:21:49.770

您的母版页的 Page_Load 事件肯定应该被触发。不知道为什么你的断点没有被击中，但要仔细检查，我建议尝试一些更暴力的东西，以确保绝对没有调用该方法：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Write("Page_Load");
    Response.End();
} 
```

由于控件嵌套的方式，可能找不到您的标签，因为 Master.FindControl 如果控件位于另一个控件中，则将不起作用。我建议查看“[在嵌套母版页中查找控件](https://stackoverflow.com/questions/728168/finding-controls-inside-nested-master-pages/728199#728199)”，它有一个有用的帮助方法，可用于递归搜索控件。

# c# - 存储库和工作单元模式 - 如何保存更改

> ID：14263331
> 
> 赞同：37
> 
> 时间：2013-01-10T17:06:52.803
> 
> 标签：c#, repository-pattern, unit-of-work

尽管这种问题被问了很多次，但我仍在努力理解存储库和工作单元模式之间的关系。本质上我仍然不明白哪个部分会保存/提交数据更改 - 存储库或工作单元？

由于我看到的每个示例都与将这些与数据库/或映射器结合使用有关，让我们做一个更有趣的示例 - 让数据以数据文件的形式保存到文件系统；根据模式，我应该能够做到这一点，因为数据的去向无关紧要。

所以对于一个基本实体：

```
public class Account
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我想将使用以下接口：

```
public interface IAccountRepository
{
     Account Get(int id);
     void Add(Account account);
     void Update(Account account);
     void Remove(Account account);
}

public interface IUnitOfWork
{
    void Save();
} 
```

我认为就使用而言，它看起来像这样：

```
IUnitOfWork unitOfWork = // Create concrete implementation here
IAccountRepository repository = // Create concrete implementation here

// Add a new account
Account account = new Account() { Name = "Test" };
repository.Add(account);

// Commit changes
unitOfWork.Save(); 
```

请记住，所有数据都将保存到文件中，实际添加/更新/删除这些数据的逻辑在哪里？

1.  `Add()`它是否通过,`Update()`和方法进入存储库`Remove()`？对我来说，将所有读取/写入文件的代码放在一个地方听起来很合乎逻辑，但是`IUnitOfWork`接口的意义何在？
2.  它是否进入`IUnitOfWork`实现，对于这种情况，它也将负责数据更改跟踪？对我来说，这表明存储库可以读取文件，而工作单元必须写入文件，但逻辑现在分为两个地方。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-10T18:03:15.840

Repository 可以在没有 Unit Of Work 的情况下工作，因此它也可以具有 Save 方法。

```
public interface IRepository<T>
{
     T Get(int id);
     void Add(T entity);
     void Update(T entity);
     void Remove(T entity);
     void Save();
} 
```

当您有多个存储库（可能有不同的数据上下文）时使用工作单元。它跟踪事务中的所有更改，直到您调用 Commit 方法将所有更改持久保存到数据库（在本例中为文件）。

因此，当您在 Repository 中调用**Add/Update/Remove**时，它​​只会更改实体的状态，将其标记为已添加、已删除或已脏...当您调用 Commit 时，Unit Of Work 将遍历存储库并执行实际持久化：

*   如果存储库共享相同的数据上下文，则工作单元可以直接使用数据上下文以获得更高的性能（在这种情况下打开和写入文件）。

*   如果存储库具有不同的数据上下文（不同的数据库或文件），则工作单元将在同一个 TransactionScope 中调用每个存储库的 Save 方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T17:33:40.390

我实际上对此很陌生，但没有人更明智地发布：

正如您所期望的那样，CRUD 的代码发生在存储库中，但是当调用 Account.Add（例如）时，所发生的只是将 Account 对象添加到稍后要添加的事物列表中（跟踪更改） .

当 unitOfWork.Save() 被调用时，允许存储库查看其已更改的列表或 UoW 已更改的列表（取决于您选择实现模式的方式）并采取适当的行动-因此在您的情况下可能是一个`List<Account> NewItemsToAdd`根据对.Add() 的调用跟踪要添加的内容的字段。当 UoW 说可以保存时，存储库实际上可以将新项目保存为文件，如果成功，则清除要添加的新项目列表。

AFAIK UoW 的重点是管理跨多个存储库的保存（它们组合在一起是我们想要提交的逻辑工作单元）。

我真的很喜欢你的问题。我已经将 Uow / Repository Pattern 与实体框架一起使用，它显示了 EF 实际做了多少（上下文如何跟踪更改，直到最终调用 SaveChanges）。要在您的示例中实现此设计模式，您需要编写大量代码来管理更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T08:25:16.377

呵呵，事情很棘手。想象一下这种情况：一个 repo 将一些东西保存在数据库中，另一个在文件系统上，第三个在云中。你是怎么做到的？

作为指导，UoW 应该提交一些东西，但是在上面的场景中，提交只是一种错觉，因为你有 3 个非常不同的东西要更新。输入最终一致性，这意味着所有事物最终都将保持一致（与您使用 RDBMS 时不同）。

UoW 在消息驱动架构中被称为 Saga。关键是每个 saga 位都可以在不同的时间执行。仅当所有 3 个存储库都更新时，Saga 才会完成。

您不会经常看到这种方法，因为大多数时候您将使用 RDBMS，但现在 NoSql 非常普遍，因此经典的事务方法非常有限。

因此，如果您确定只使用一个 rdbms，请使用与 UoW 的事务并将关联的连接传递到每个存储库。最后，UoW 会调用 commit。

如果您知道或期望您可能必须使用多个 rdbms 或不支持事务的存储，请尝试熟悉消息驱动架构和 saga 概念。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-14T06:29:03.527

如果您想自己动手，使用文件系统会使事情变得相当复杂。

**仅在提交 UoW 时写入。**

您需要做的是让存储库将所有 IO 操作排入 UnitOfWork 中。就像是：

```
public class UserFileRepository : IUserRepository
{
    public UserFileRepository(IUnitOfWork unitOfWork)
    {
        _enquableUow = unitOfWork as IEnquableUnitOfWork;
        if (_enquableUow == null) throw new NotSupportedException("This repository only works with IEnquableUnitOfWork implementations.");

    }

    public void Add(User user)
    {
        _uow.Append(() => AppendToFile(user));
    }

    public void Uppate(User user)
    {
        _uow.Append(() => ReplaceInFile(user));
    }
} 
```

通过这样做，您可以同时将所有更改写入文件。

您不需要对数据库存储库执行此操作的原因是事务支持内置在数据库中。因此，您可以告诉数据库直接启动事务，然后使用它来伪造工作单元。

**交易支持**

将很复杂，因为您必须能够回滚文件中的更改，并防止不同的线程/事务在同时事务期间访问相同的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-05T10:05:33.087

通常，存储库处理所有读取，工作单元处理所有写入，但可以肯定的是，您可以只使用这两者之一来处理所有读取和写入（但如果只使用存储库模式，维护可能会非常繁琐10个存储库，更糟糕的是，可能导致不一致的读写被覆盖），混合使用两者的优点是易于跟踪状态更改以及易于处理并发和一致性问题。为了更好地理解，您可以参考链接：[Repository Pattern with Entity Framework 4.1 and Parent/Child Relations](https://stackoverflow.com/questions/7171023/repository-pattern-with-entity-framework-4-1-and-parent-child-relationships) and [https://softwareengineering.stackexchange.com/questions/263502/unit-of-work-concurrency-how-is-it-handled](https://softwareengineering.stackexchange.com/questions/263502/unit-of-work-concurrency-how-is-it-handled)

# ios - iOS 停止向用户询问照片库权限

> ID：14263344
> 
> 赞同：21
> 
> 时间：2013-01-10T17:07:29.820
> 
> 标签：ios, objective-c, alassetslibrary

iOS 不再向用户询问照片库权限。即使我从设备中**删除**了该应用程序。这也发生在模拟器上。

```
switch ([ALAssetsLibrary authorizationStatus])
{
    case ALAuthorizationStatusAuthorized:
        RPMLog(@"authorized");
        break;
    case ALAuthorizationStatusDenied:
        RPMLog(@"denied");
        break;
    case ALAuthorizationStatusNotDetermined:
        RPMLog(@"not determined");
        break;
    case ALAuthorizationStatusRestricted:
        RPMLog(@"restricted");
        break;
} 
```

当我第一次安装应用程序时，我已经获得授权。在此之前，没有其他事件或屏幕要求照片触发用户提示。

然后我在 SavedPhotos 中请求 numberOfAssets 并在没有访问提示的情况下获取它：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

    if (!group) return;

    UIActionSheet *actionSheet = nil;
    if (([group numberOfAssets] > 0))
    {
        actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:NSLocalizedString(@"Cancel", nil) destructiveButtonTitle:nil otherButtonTitles:NSLocalizedString(@"Take new photo", nil), NSLocalizedString(@"Use last photo taken", nil), NSLocalizedString(@"Choose existing", nil), nil];
    }
    else
    {
        actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:NSLocalizedString(@"Cancel", nil) destructiveButtonTitle:nil otherButtonTitles:NSLocalizedString(@"Take new photo", nil), NSLocalizedString(@"Choose existing", nil), nil];
    }

    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    [actionSheet showFromTabBar:self.tabBar];
    [TestFlight passCheckpoint:@"New Look: Tab Bar"];

} failureBlock:^(NSError *error) {

    NSAssert(!error, [error description]);
}]; 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-12-12T09:09:58.257

由于问题在于照片库权限，因此还有其他方法无需更改系统时钟并关闭设备。

你可以去“设置”应用程序

> （常规 > 重置 > 重置位置和隐私）。

这将使应用程序再次请求照片库、位置和其他权限。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-15T01:36:09.020

发生的事情是iOS正在保存授予您的应用程序映射到捆绑ID的权限，如果应用程序被删除，此数据将保留24小时，这样可以避免在用户重新安装应用程序时重新提示用户（可能是在错误地删除应用程序之后） .

推送通知提示也会发生这种情况。

作为一种解决方法，我引用 Apple 关于推送通知的内容：

> **在 iOS 上重置推送通知权限警报**
> 
> 启用推送的应用第一次注册推送通知时，iOS 会询问用户是否希望接收该应用的通知。一旦用户对此警报做出响应，除非设备已恢复或应用程序已卸载至少一天，否则它不会再次显示。
> 
> 如果你想模拟你的应用程序的首次运行，你可以让应用程序卸载一天。***您可以通过将系统时钟提前一天或更长时间，完全关闭设备，然后重新打开设备来实现后者，而无需实际等待一天***。

资料来源：[Apple 技术说明 TN2265](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T15:49:34.190

通过设置应用程序休息很难自动化。我们使用`simctl`以自动方式重置模拟器内容和设置以重置权限对话框。这将需要在模拟器中重新安装应用程序，但同样`simctl`可以完成此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T10:38:14.670

您可以通过两种类型检查此权限 -

*   ***在 Simulator***
    中，您可以执行***Simulator/Reset Content and Settings***。
*   ***在物理设备（iPhone、iPad）***
    中您可以更改日期，至少相差 24 小时。

但首先从设备上卸载应用程序然后重新启动然后应用这个东西然后它会工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-05T02:11:21.480

如果您使用的是 iOS 模拟器，使用**Simulator/Reset Content and Settings...**重置它似乎会重置此设置。当然，您随后需要在其上重新安装您的应用程序。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-07-03T06:03:56.957

您只需要遵循以下要点，无需重新安装或删除应用程序。

*   应用从后台移除
*   转到设置->常规->重置->单击**重置位置和隐私**

希望你得到帮助。

# python - Python发送数据包超过443

> ID：14263345
> 
> 赞同：0
> 
> 时间：2013-01-10T17:07:31.467
> 
> 标签：python

我看过了，也许我错过了。我目前有一个文件，如下所示：

```
PUT /URL/TO/SEND/REQUEST
Host: 127.0.0.1
Connection: keep-alive
...

bunch of data here 
```

该文件包含标题和我想通过 ssl 发送的数据。我知道在 Windows 上我可以使用 fiddler 等来发送这些原始数据，但我希望使用 python。我尝试在 urllib2 urllib 和 httplib 上查看（可能还不够难），看看我是否可以将这个文件作为我不想处理解析文件等的整个请求发送......这可能吗？

我确实注意到在 httplib 中我可以使用`request`where “body can be a file object”。但从描述看来，它似乎仍然单独发送标头，并且该文件仅用于正在发送的数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:21:19.230

它没有记录，但看起来您应该可以使用`httplib.HTTPConnection.send()`它：

```
In [13]: httplib.HTTPConnection.send??
Type:       instancemethod
String Form:<unbound method HTTPConnection.send>
File:       /usr/local/lib/python2.7/httplib.py
Definition: httplib.HTTPConnection.send(self, data)
Source:
    def send(self, data):
        """Send `data' to the server."""
        if self.sock is None:
            if self.auto_open:
                self.connect()
            else:
                raise NotConnected()

        if self.debuglevel > 0:
            print "send:", repr(data)
        blocksize = 8192
        if hasattr(data,'read') and not isinstance(data, array):
            if self.debuglevel > 0: print "sendIng a read()able"
            datablock = data.read(blocksize)
            while datablock:
                self.sock.sendall(datablock)
                datablock = data.read(blocksize)
        else:
            self.sock.sendall(data) 
```

该`request()`方法结合了标头和正文并将其传递给此函数，该函数看起来应该处理字符串或文件对象。

当然，您仍然需要知道主机才能创建`HTTPConnection`对象，因此您的代码可能看起来像这样（未经测试）：

```
import httplib
conn = httplib.HTTPConnection('127.0.0.1')
conn.send(open(filename))
response = conn.getresponse() 
```

**编辑：**事实证明，有一些内部状态的东西使它无法按原样工作，这是一个解决方法（谷歌主页的完整示例），但它有点像黑客。`httplib`使用 Python 2.6 和 2.7 进行测试，仅通过替换为3.x 似乎不起作用`http.client`：

```
import httplib
conn = httplib.HTTPConnection('www.google.com')
conn.send('GET / HTTP/1.1\r\nHost: www.google.com\r\n\r\n')
conn._HTTPConnection__state = httplib._CS_REQ_SENT
response = conn.getresponse() 
```

这里的关键部分是将`conn.__state`(mangled name) 设置为`httplib._CS_REQ_SENT`after call `send()`。

# c++ - 如何使用 Botan 执行非对称加密

> ID：14263346
> 
> 赞同：0
> 
> 时间：2013-01-10T17:07:33.210
> 
> 标签：c++, rsa, encryption-asymmetric, botan

我正在使用 Botan 生成哈希，使用 执行加密`AES256`，现在我想使用它执行非对称加密。阅读本页：[http](http://botan.randombit.net/pubkey.html) ://botan.randombit.net/pubkey.html 。

我创建了一个代码来生成用于 RSA 加密的公钥和私钥，但我不明白如何加密和解密数据。有人能帮我吗？

我正在使用 Botan `1.8.8 2009-11-03`。

```
void generatekey()
{
    LibraryInitializer init;

    std::ostringstream pub;
    std::ostringstream priv;

    int bits = 1024;

    AutoSeeded_RNG rng;

    RSA_PrivateKey key(rng, bits);
    pub << X509::PEM_encode(key);
    priv << PKCS8::PEM_encode(key);

    qDebug() << QString(pub.str().c_str());
    qDebug() << QString(priv.str().c_str());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T17:54:17.333

在阅读了一些教程后，我将此代码编写为非对称加密。

```
#include <QDebug>
#include <botan/botan.h>
#include <botan/rsa.h>
#include <botan/look_pk.h>

using namespace Botan;

void encryptdata()
{
    try
    {
        QString text = "abc";

        LibraryInitializer init;

        AutoSeeded_RNG rng;

        RSA_PrivateKey key(rng, 1024);

        std::string pub = X509::PEM_encode(key);

        std::string priv = PKCS8::PEM_encode(key);

        DataSource_Memory key_pub(pub);

        DataSource_Memory key_priv(priv);

        X509_PublicKey *pub_rsa = X509::load_key(key_pub);

        PKCS8_PrivateKey *priv_rsa = PKCS8::load_key(key_priv, rng);

        PK_Encrypting_Key *enckey = dynamic_cast<PK_Encrypting_Key*>(pub_rsa);

        PK_Decrypting_Key *deckey = dynamic_cast<PK_Decrypting_Key*>(priv_rsa);

        PK_Encryptor *enc = get_pk_encryptor(*enckey, "EME1(SHA-256)");

        PK_Decryptor *dec = get_pk_decryptor(*deckey, "EME1(SHA-256)");

        QByteArray array = text.toLatin1();

        byte msgtoencrypt[array.count()];

        for (int i = 0; i < array.count(); i++)
        {
            msgtoencrypt[i] = array[i];
        }

        SecureVector<byte> ciphertext = enc->encrypt(msgtoencrypt, sizeof(msgtoencrypt), rng);

        SecureVector<byte> plaintext = dec->decrypt(ciphertext, ciphertext.size());

        QByteArray encrypted;

        for (uint i = 0; i < ciphertext.size(); i++)
        {
            encrypted[i] = ciphertext[i];
        }

        QByteArray result;

        for (uint i = 0; i < plaintext.size(); i++)
        {
            result[i] = plaintext[i];
        }

        if (array == result)
        {
            qDebug() << "Ok";
        }
        else
        {
            qDebug() << "Error";
        }

        qDebug() << QString(encrypted);
        qDebug() << QString(array);
        qDebug() << QString(result);
    }
    catch(std::exception &e)
    {
        qDebug() << e.what();
    }
} 
```

# vba - Sundaram 筛子

> ID：14263349
> 
> 赞同：-1
> 
> 时间：2013-01-10T17:07:40.703
> 
> 标签：vba, excel, primes, prime-factoring

我需要有人带我穿过 Sundaram 的筛子（[维基](http://en.wikipedia.org/wiki/Sieve_of_Sundaram)）。假设我在数组中有一个整数列表*(41,43,47,49,51,53,59) 。*

现在上面提到的维基百科解释提到：*

> 当且仅当它的形式为 2(i+j+2ij)+1 时，奇数才会从最终列表中排除

*。我试图了解如何在程序中实现这一点*（最好是 VBA）*。这样输出将是*(41,43,47,53,59)*。

解释由衷感谢。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:42:23.917

[我在我的博客上](http://programmingpraxis.com/2011/10/07/sieve-of-sundaram/)讨论了 Sundaram 的筛子。该算法由以下伪代码给出：

```
function sundaram(n)
    m := n // 2
    sieve := makeArray(m+1, True)
    for i from 1 to m // 4
        for j from i to (m-i) // (2*i+1)
            sieve[i+j+2*i*j] := False
    ps := [2]
    for i from 1 to m
        if sieve[i]
            append 2*i+1 to ps
    return ps 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:07:12.557

根据 WP 文章，从 range 中删除一些数字后`k=1...n`，我们得到的结果为`m=2k+1`。这意味着所有`m`s 都是奇数。

现在，一个奇数复合必须是两个奇数的乘积：（`2k+1 = (2i+1)(2j+1) = 4ij+2i+2j+1`如果其中一个是偶数，则乘积也是偶数）。但这意味着`k = 2ij + i + j`。因此，筛子的操作。

正如[这里](http://translate.google.com/translate?sl=ru&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&eotf=1&u=http%3A%2F%2Fru.wikipedia.org%2Fwiki%2F%25D0%25A0%25D0%25B5%25D1%2588%25D0%25B5%25D1%2582%25D0%25BE_%25D0%25A1%25D1%2583%25D0%25BD%25D0%25B4%25D0%25B0%25D1%2580%25D0%25B0%25D0%25BC%25D0%25B0)很好解释的那样。

# openssl - 证书密钥 - 转换

> ID：14263355
> 
> 赞同：5
> 
> 时间：2013-01-10T17:07:51.783
> 
> 标签：openssl

出于测试目的，我需要在 IIS8（在亚马逊服务器上）上启用 SSL。我使用 IIS 创建了一个测试密钥，并以 *.pfx 格式导出了该密钥。现在在负载均衡器设置中，我需要将该密钥转换为 *.PEM 格式。我只是使用[https://www.sslshopper.com/ssl-converter.html](https://www.sslshopper.com/ssl-converter.html)

当我打开新生成的 *.PEM 密钥时，我有两个字段： -----BEGIN PRIVATE KEY----- key is here... -----END PRIVATE KEY-----

我也有

-----BEGIN CERTIFICATE----- 证书在这里... -----END CERTIFICATE-----

现在，当我在 LoadBalancer 中输入这些值时，它总是抱怨：

无效的公钥证书。

我尝试使用 ---BEGIN 粘贴这两个值，但没有相同的结果...

到底是怎么回事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-28T16:15:06.277

对于每个已经拥有 .pem 格式并且仍然获得“无效的公钥证书”的人，这是我的解决方案。

证书链包实际上由 2 个证书组成，一个接一个：颠倒两个证书的顺序为我工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T17:31:17.553

此链接为我提供了解决方案：

[https://forums.aws.amazon.com/thread.jspa?threadID=56937](https://forums.aws.amazon.com/thread.jspa?threadID=56937)

亚马逊的技术支持详细说明了需要使用哪些命令。基本上首先使用：--这将为您提供密钥 openssl pkcs12 -in filename.pfx -out private.key.1 -nodes -nocerts

并使用这个来获得证书本身：openssl pkcs12 -in filename.pfx -clcerts -nokeys -out cert.pem

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-17T17:54:26.060

由于不同的原因，我得到了“无效的公钥证书”。原来我制作证书的机器上的时钟快了半小时，所以证书还没有生效！要检查这一点，请使用：

```
openssl x509 -in yourcert.pem -text -noout 
```

并检查“Validity / Not Before:”之后的时间戳。

半个小时的等待时间也不算太长。在不更改表单内容的情况下，在那之后我再次点击提交，它通过了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-18T10:55:32.667

我收到以下错误：

> 例程：PEM_read_bio:bad end line node.js

无论我做什么，我总是会得到这个错误。其他遇到相同错误的人建议在请求的页眉和页脚中添加额外的输入。就我而言，它没有帮助。对我有帮助的是 Notepad++ 和 EoL 转换。

我想你可以用其他编辑器来做，但我用的是 Notepad++。只需编辑-->EoL 转换并确保选择了 Windows。

希望它能为遇到同样问题的其他人节省时间。

# proxy - 使用 Powershell 和代理访问 Web

> ID：14263359
> 
> 赞同：33
> 
> 时间：2013-01-10T17:07:55.417
> 
> 标签：proxy, powershell-2.0

我似乎无法使用 Powershell 访问网页。我不断收到“（407）需要代理身份验证”。我已经尝试了很多东西。我不知道代理是什么或它需要什么样的身份验证。我唯一可以访问的是在 IE 中它使用脚本进行配置。我尝试使用其中的一些 IP，但没有运气。有任何想法吗？

这是我尝试过的一个示例：

```
$wc = New-Object System.Net.WebClient
$wc.Headers.Add("User-Agent","Mozilla/4.0+")        
$wc.Proxy = [System.Net.WebRequest]::DefaultWebProxy
$wc.Proxy.Credentials = [System.Net.CredentialCache]::DefaultNetworkCredentials
$wc.DownloadString("http://stackoverflow.com") 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2014-08-01T14:33:47.290

我有一个类似的问题，只用两行 powershell 解决了它：

```
$browser = New-Object System.Net.WebClient
$browser.Proxy.Credentials =[System.Net.CredentialCache]::DefaultNetworkCredentials 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-12-15T15:15:32.850

我还没有看到有人在做这样的事情，但是有一种方法可以在你的 Powershell 脚本中作为“全局设置”来做到这一点（我记得之前在 C# 中为本地开发构建做过这个）。

```
[System.Net.WebRequest]::DefaultWebProxy = [System.Net.WebRequest]::GetSystemWebProxy()
[System.Net.WebRequest]::DefaultWebProxy.Credentials = [System.Net.CredentialCache]::DefaultNetworkCredentials 
```

这样，如果您不想使用代理详细信息更新所有 WebClients，则可以覆盖全局设置（每次运行脚本时都必须这样做）。但这假设当前登录的 Windows 用户对系统定义的代理服务器有效。

**注意**：我想说这只是作为一种快速而肮脏的方式来让 PS 脚本工作，而之前不知道代理（比如[Cake build](http://cakebuild.net/)）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-04T13:27:59.933

如果代理回答“407”、“需要代理身份验证”，则需要进行身份验证：

```
$Username="Hugo"
$Password="abcdefgh"
$WebProxy = New-Object System.Net.WebProxy("http://webproxy:8080",$true)
$url="http://aaa.bbb.ccc.ddd/rss.xml"

$WebClient = New-Object net.webclient

$WebClient.Proxy=$webproxy
$WebClient.proxy.Credentials = New-Object System.Net.NetworkCredential($Username, $Password)
$path="C:\Users\hugo\xml\test.xml"
$WebClient.DownloadFile($url, $path) 
```

内容现在驻留在“test.xml”中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-18T14:27:52.323

我知道这个问题专门针对 Powershell 2.0，但我想分享有关在 Powershell Core (6+) 中设置代理服务器的信息，因为在其他地方很难找到。

我同意 Dandré 的观点，最好的解决方案是配置默认代理服务器。我刚刚遇到了 Powershell Core (7.1) 的问题。我正在尝试 Dandré 的建议，但没有任何效果。经过几个小时的研究和调查，我发现 Powershell Core 可能不再`System.Net.WebRequest`用于发出 Web 请求，而是[`System.Net.Nett.HttpClient`](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient?view=net-5.0).

当我配置好[`HttpClient`默认代理服务器](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.defaultproxy?view=net-5.0)后，所有由 Powershell（`Invoke-WebRequest`、PowerShellGet`Find-Module`等`Install-Module`）建立的网络连接终于开始工作了。

## 为 Powershell Core 配置默认代理服务器

如果您需要使配置永久化，只需将以下命令添加到您的 Powershell 配置文件中。

### 配置特定的默认代理服务器

```
[System.Net.Http.HttpClient]::DefaultProxy = New-Object System.Net.WebProxy('http://your-proxy') 
```

如果需要设置特定端口，请将其添加到代理服务器 URI:`http://proxy:1234`中。

### 配置身份验证代理的凭据

如果它是身份验证代理，您需要设置用于代理身份验证的凭据。使用以下命令设置您当前登录到 Windows 的域帐户的凭据：

```
[System.Net.Http.HttpClient]::DefaultProxy.Credentials = [System.Net.CredentialCache]::DefaultCredentials 
```

如果您需要不同的凭据，您可以使用[`Get-Credential`cmdlet](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.security/get-credential?view=powershell-7.1)，但它是交互式的，因此它不是您的 Powershell 配置文件中的理想解决方案。但我敢肯定还有其他方法。

```
[System.Net.Http.HttpClient]::DefaultProxy.Credentials = Get-Credential 
```

### 配置代理服务器绕过

如果您只需要绕过代理服务器并使用直接连接，但 Powershell 使用的是默认系统范围的代理服务器，只需将`HttpClient`的默认代理设置为`null`：

```
[System.Net.Http.HttpClient]::DefaultProxy = New-Object System.Net.WebProxy($null) 
```

### 将代理配置添加到 Powershell 配置文件

要使配置永久化，只需将您需要的命令添加到您的[Powershell 配置文件](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.1)中。其中有四个（*所有用户，所有主机*；*所有用户，当前主机*；*当前用户，所有主机*；*当前用户，当前主机*），但我会使用“*当前用户，所有主机*”。要找出特定配置文件的位置，请使用`$Profile`带有配置文件名称的变量：

```
$Profile.CurrentUserAllHosts 
```

它应该打印路径`$Home\Documents\Powershell\profile.ps1`。

如果配置文件尚不存在，只需创建它并将配置放在那里。每次执行新的 Powershell Core ( `pwsh.exe`) 实例时都会执行它。

## 使用环境变量配置默认代理

另一种解决方案是使用环境变量。根据[文档](https://docs.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.defaultproxy?view=net-5.0)，`HttpClient`实际上是使用以下变量来初始化默认代理（如果已定义）：

*   `HTTP_PROXY`对于 HTTP 请求
*   `HTTPS_PROXY`用于 HTTPS 请求
*   `ALL_PROXY`对于 HTTP 和 HTTPS
*   `NO_PROXY`可能包含从代理中排除的主机名的逗号分隔列表

一个示例用法：

```
ALL_PROXY='http://proxy:1234' 
```

如果您需要传递凭据：

```
ALL_PROXY='http://username:password@proxy:1234' 
```

此解决方案受到更广泛的应用程序的支持，因此它比以前的解决方案好还是坏取决于您要配置的确切内容，仅 Powershell 或其他应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-20T12:36:34.243

如果您使用以下内容，您将收到输入凭据的提示：

```
$client.Credentials = Get-Credential 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T13:24:47.657

如果您知道脚本 - 只需下载它，使用记事本打开并找到您的代理服务器的 IP 和端口。至于身份验证-很可能使用了您的Windows凭据，因此理论上您应该可以将其保留为空，除非脚本中有可疑之处。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T22:45:47.753

尝试添加缓存凭据....

```
$domain = 'ChDom'
$Client = new-object System.Net.WebClient
$cc = New-object System.Net.CredentialCache
$urlObj = New-object System.Uri($url)

#these variables must be plaintext strings
$creds = New-object System.Net.NetworkCredential($Username,$Password)

#your auth might be different than mine
$cc.add($urlobj,"NTLM",$creds)
$client.Credentials = $cc
$Client.Downloadfile($url, C:\Temp\TestPage.html) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-12T12:41:43.370

## Option 1 - Setting Proxy Authentication via Code.

*   Another **Authenticated Proxy Example With Credentials**

    ```
     # 1). Set your http proxy address and port
    $proxy = New-Object System.Net.WebProxy("http://p.weshare.net:80",$true)

     # 2). Set your http proxy credentials
    $proxy.Credentials = New-Object System.Net.NetworkCredential("username", "password")

     # 3). Set the global proxy
    [System.Net.WebRequest]::DefaultWebProxy = $proxy

     # 4). sets a value that indicates whether to bypass the proxy server for local addresses.
    [System.Net.WebRequest]::DefaultWebProxy.BypassProxyOnLocal = $true

     # 5). Call Invoke-WebRequest without -Proxy Tag ( as it pulls it from what you defined )
    $reposnseText = Invoke-WebRequest https://www.oracle.com 
    ```

* * *

1.  Just wrapping it as a **Function**

    Function Set-My-Proxy { param($proxy,$username,$password)

    ```
     $proxy = New-Object System.Net.WebProxy($proxy,$true)
      $proxy.Credentials = New-Object System.Net.NetworkCredential($username, $password)
      [System.Net.WebRequest]::DefaultWebProxy = $proxy
      [System.Net.WebRequest]::DefaultWebProxy.BypassProxyOnLocal = $true 
    ```

    }

2.  Call the **Function**

    Set-My-Proxy 'http://p.weshare.net:80' 'username' 'password'

* * *

## Option 2 - Setting Proxy Authentication via Another Proxy

[Credits & Limitations of solution](https://stackoverflow.com/questions/19199424/squid-forward-to-another-proxy-with-authentication-details-for-the-parent-prox)

1.  Install local proxy, e.g : [squid](https://squid.diladele.com/) for windows

2.  After installing, open squid.conf file ( right mouse click on squid icon on task bar -> Open Squid Configuration

3.  Put the following code please provide authenticated proxy ip only ( in our example : 10.1.2.3 - **not domain one** )

    ```
    http_access allow all
    http_port 3128

    coredump_dir /var/spool/squid3
    refresh_pattern ^ftp:       1440    20% 10080
    refresh_pattern ^gopher:    1440    0%  1440
    refresh_pattern -i (/cgi-bin/|\?) 0 0%  0
    refresh_pattern (Release|Packages(.gz)*)$      0       20%     2880
    refresh_pattern .       0   20% 4320

    cache_peer 10.1.2.3 parent 80 0 no-query default login=my_username:my_password

    never_direct allow all
    access_log none
    cache_log none 
    ```

4.  Restart Squid Service

5.  **You now may call your local proxy, which will forward request to authenticated proxy and response back**

    ```
    Invoke-WebRequest -Uri 'https://stackoverflow.com/' -Proxy 'http://127.0.0.1:3128' 
    ```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-17T07:53:27.973

我只用三行解决了这个问题：

1.  `$proxy='http://username:password@IP:PORT'`
2.  `$ENV:HTTP_PROXY=$proxy`
3.  `$ENV:HTTPS_PROXY=$proxy`

# haskell - 操作真的与自由单子同构吗？

> ID：14263363
> 
> 赞同：25
> 
> 时间：2013-01-10T17:08:03.567
> 
> 标签：haskell, monads

### 证明

在[这篇](http://www.haskellforall.com/2012/07/purify-code-using-free-monads.html)博文中，Tekmo 指出我们可以证明`ExitSuccess`exits 因为（我认为）它就像`Const`那个构造函数的函子（它不携带`x`so的`fmap`行为`const`）。

使用操作包，Tekmo`TeletypeF`可能会被翻译成这样：

```
data TeletypeI a where
    PutStrLn :: String -> TeletypeI ()
    GetLine :: TeletypeI String
    ExitSuccess :: TeletypeI () 
```

我已经读到操作与自由单子同构，但是我们可以在这里证明`ExitSuccess`存在吗？在我看来，它遇到了与它完全相同的问题`exitSuccess :: IO ()`，特别是如果我们要为它编写一个解释器，我们需要像它没有退出一样编写它：

```
eval (ExitSuccess :>>= _) = exitSuccess 
```

与不涉及任何模式通配符的免费 monad 版本相比：

```
run (Free ExitSuccess) = exitSuccess 
```

### 懒惰

在[Operational Monad Tutorial](http://apfelmus.nfshost.com/articles/operational-monad.html) apfelmus 中提到了一个缺点：

> 表示为 s -> (a,s) 的状态单子可以处理一些无限程序，例如
> 
> ```
> evalState (sequence . repeat . state $ \s -> (s,s+1)) 0 
> ```
> 
> 而指令列表方法没有希望处理这个问题，因为只有最后一个 Return 指令可以返回值。

对于免费的单子也是如此吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T16:45:25.280

（请允许我通过大胆地结合以前的答案来获得大奖。;-)）

关键的观察是这样的：证明*到底是什么*？公式`Free TeletypeF`使我们能够证明以下内容：

> 每个类型程序的*解释器*在遇到指令`Free TeletypeF a`时都必须退出。`ExitSuccess`换句话说，我们自动得到*代数定律*
> 
> ```
>  interpret (exitSuccess >>= k) = interpret exitSuccess 
> ```

因此，`Free`monad 实际上允许您将某些代数定律烘焙到类型中。

相比之下，操作方法不限制 的语义`ExitSuccess`，没有与每个解释器相关的代数定律。可以编写在遇到该指令时退出的解释器，但也可以编写不退出的解释器。

当然，您可以通过检查证明任何特定的解释器都满足法律，例如因为它使用通配符模式匹配。Sjoerd Visscher 观察到，您还可以通过更改 to 的返回类型在类型系统中强制执行此`ExitSuccess`操作`Void`。但是，这不适用于其他可以融入自由单子的法则，例如`mplus`指令的分配法则。

因此，在一个令人困惑的事件转折中，如果您将“自由”解释为“最少的代数定律”，那么操作方法比自由单子更自由。

这也意味着这些数据类型不是同构的。但是，它们是等价的：每个用 编写`Free`的解释器都可以转换为用 编写的解释器，`Program`反之亦然。

就个人而言，我喜欢将我所有的法则都放入解释器中，因为有很多法则*无法*融入自由单子，我喜欢将它们全部放在一个地方。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-10T19:54:02.387

答案是肯定的，但前提是您使用不同的翻译`TeletypeF`：

```
data TeletypeI a where
    PutStrLn :: String -> TeletypeI ()
    GetLine :: TeletypeI String
    ExitSuccess :: TeletypeI Void 
```

的参数`TeletypeI`是操作将/必须提供给程序的其余部分的内容。它是继续的参数的`k`类型

```
eval (ExitSuccess :>>= k) = ... 
```

由于没有 type 的值`Void`，我们可以确定它`k`永远不会被调用。（与往常一样，我们必须在`undefined`这里忽略。）

一个等价的类型是：

```
data TeletypeI a where
    PutStrLn :: String -> TeletypeI ()
    GetLine :: TeletypeI String
    ExitSuccess :: TeletypeI a 
```

现在我们必须提供一个`k`匹配任何类型的值，我们也不能这样做。这可以更实用，因为`singleton ExitSuccess`现在有灵活的类型`Program TeletypeI a`。

类似地，`exitSuccess`可以通过给它 type`IO Void`或来修复`IO a`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T18:48:40.793

答案是否定的，你不能证明操作者忽略了程序的其余部分`exitSuccess`。对比看看为什么`TeletypeI`。`TeletypeF`我将`TeletypeF`用 GADT 符号重写以便于比较

```
data TeletypeF x where                     | data TeletypeI x where
  PutStrLn :: String -> x  -> TeletypeF x  |   PutStrLn :: String -> TeletypeI ()
  GetLine :: (String -> x) -> TeletypeF x  |   GetLine :: TeletypeI String
  ExitSuccess ::              TeletypeF x  |   ExitSuccess :: TeletypeI () 
```

使用`TeletypeF`，我们可以立即构建实际程序：

```
GetLine (\str -> PutStrLn (map toUpper str) ExitSuccess) 
```

`TeletypeI`没有以与此相同的方式引用“程序的其余部分”的方法`TeletypeF`。

```
-- TeletypeF:
GetLine (\str -> "rest of program" goes here)
-- or
PutStrLn someString ("rest of program" goes here)
-- or
ExitSuccess -- there is no "rest of program" slot provided 
```

由于`TeletypeI`缺少这个“程序的其余部分”信息，当你遇到`ExitSuccess`.

```
-- TeletypeI
PutStrLn someString -- no information about "rest of program"
-- or
GetLine -- no information about "rest of program"
-- or
ExitSuccess -- no information about "rest of program" 
```

作为“程序的其余部分”，允许出现的情况完全取决于`Program`类型，它对所应用的指令集一无所知。它只是允许您将指令绑定在一起，并通过`Return`.

# asp.net-mvc - 视图中未找到 webgrid 参考

> ID：14263370
> 
> 赞同：3
> 
> 时间：2013-01-10T17:08:31.620
> 
> 标签：asp.net-mvc, webgrid

我正在尝试对本教程中提到的 asp.net mvc webgrid 进行基本实现：http: [//msdn.microsoft.com/en-us/magazine/hh288075.aspx](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)

我正在使用 asp.net mvc 4。

在对网格进行简单引用（本教程的第一部分）后，我在视图中收到此错误：

编译器错误消息：CS0246：找不到类型或命名空间名称“WebGrid”（您是否缺少 using 指令或程序集引用？）

cshtml 文件的代码如下：

```
@model IEnumerable<Company.Core.DataAccess.Models.TransactionLog>
@{
    ViewBag.Title = "Index";
}

@{ 
 var grid = new WebGrid(Model, defaultSort:"TransactionLogId"); 
} 
@grid.GetHtml()

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")  
} 
```

我参考了 System.Web.Helpers。如果我在视图中为其添加@using 指令，则会保留相同的消息。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-11T20:50:05.190

1.  只需添加对默认情况下基本模板不包含的 System.Web.Helpers 2.0.0.0 dll 的引用。
2.  添加引用后，您需要打开 dll 的属性并将 Copy Local 更改为 True。
3.  重建你的项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:08:41.603

我能够通过更新对帮助程序 dll 的引用并将本地副本设置为 true 以覆盖旧版本来解决此问题。我以某种方式引用了一个错误的版本，可能是通过一个旧的 nuget 包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T16:28:36.550

添加引用后，还要尝试清理和重建。我已经看到了在您重建之前参考无法解决的问题。

# c# - 在 CE 6 上的 Web 浏览器控件中托管的 MVC 3 应用程序无法正确显示图像

> ID：14263371
> 
> 赞同：1
> 
> 时间：2013-01-10T17:08:38.960
> 
> 标签：c#, asp.net-mvc-3, compact-framework

我有一个 MVC 3 应用程序，我们在 Web 浏览器控件内的手持设备上运行。这些设备运行 CE5 或 CE6。

在 CE5 上请求图像时，图像显示正常，但在 CE 6 上，图像似乎正在下载，但直到单击页面后才真正出现。

一旦发生这种情况，图像就会被缓存（以某种方式），并且可以继续进行该会话。

有没有其他人遇到过这个问题？

这是我能找到的唯一提及该问题但未提及解决方案的其他页面：

[http://social.msdn.microsoft.com/Forums/en-US/vssmartdevicesvbcs/thread/0396d869-2ac2-4d38-8565-2d308eb8573a/](http://social.msdn.microsoft.com/Forums/en-US/vssmartdevicesvbcs/thread/0396d869-2ac2-4d38-8565-2d308eb8573a/)

**编辑：**

视图代码如下。Model.DisplayItem 将返回一个字符串，如：

~/Areas/R2D2Picking/内容/图像/M00119.jpg

实际图像位于单独的驱动器上（而不是解决方案的一部分），因此我们通过在解决方案中创建文件夹结构来访问这些图像，将其从构建中排除并在 IIS 的相关根目录下创建一个虚拟目录。我们在许多应用程序中都使用这种方法，所以我不认为这本身就是一个问题。

```
@using R2D2Picking.Models.ViewModels;
@using System.IO;
@using System.Net;

@model ItemImageVM        

<div class='backImage'>

    <a href="@Url.Action("PickSelectedItems", "Common")" onfocus="if(this.blur)this.blur()">
    <img alt='' src="@Url.Content("~/Areas/R2D2Picking/Content/ButtonImages/BackButton.bmp")" /></a>

</div>

<div class='smallPrompt'>
    <p>@Model.DisplayLiteral</p>
</div>

@if (Model.ImageExists())
{
    <div class='itemImage'>
        <a href="@Url.Action("PickSelectedItems", "Common")">
        <img alt='' src="@Url.Content(@Model.DisplayItem)" /></a>
    </div>
}
else
{
    <div class='noImage'>
        <a href="@Url.Action("PickSelectedItems", "Common")">
        <img alt='' src="@Url.Content("~/Areas/R2D2Picking/Content/ButtonImages/no_picture.bmp")" /></a>
    </div>
} 
```

示例图像如下：

![在此处输入图像描述](../Images/772e7b0bc4b18ca18f8fed32ea6eab45.png)

# mysql - 值存在时更新值

> ID：14263372
> 
> 赞同：0
> 
> 时间：2013-01-10T17:08:40.657
> 
> 标签：mysql

我正在尝试创建一个新的 cron 作业，但是很难解释如何制作它，而且我不知道如何制作它。我会尽力解释。

cron 作业需要更新所有用户的推荐用户数。cron 作业（它是一个 SQL 查询）的任务是将被推荐用户的记录数设置为一个 sql 行。例如：

用户 A 邀请用户 B，cron 作业将**用户 A 的推荐计数设置为 1**（因为他推荐了用户 B），用户 A 现在邀请用户 C，因此 cron 作业将 +1 计入**他的（用户 A）**行。

之后，用户 B 决定邀请用户 D，因此 cronjob 完成他的工作并将 +1 广告添加到**他的（用户 B）**行中。

它基本上归结为检查每个用户的推荐用户的记录数，然后将记录数添加到一行中。（当然，每个用户都是独一无二的）

如果不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:56:16.087

像这样的东西应该工作。

```
UPDATE  users u

        JOIN 
        (SELECT referred_by, COUNT(*) referral_count FROM users GROUP BY referred_by) ref
        ON ref.referred_by = u.user_id

SET     u.referrals = ref.referral_count

WHERE   u.referrals <> ref.referral_count
; 
```

如果引用字段可能为空，则将 WHERE 子句更改为：

```
WHERE   IFNULL(u.referrals, 0) <> ref.referral_count 
```

# java - 计时器类不重新启动计时器 - Android

> ID：14263381
> 
> 赞同：1
> 
> 时间：2013-01-10T17:09:14.373
> 
> 标签：java, android, timer

我有一个包含 10 个问题的问答游戏，每个问题都有 10 秒的计时器。当计时器用完时，问题变为下一个，但计时器永远不会重新启动。它保持在 0。当显示下一个问题时，我似乎无法在代码中找到阻止计时器重新启动的位置。

此外，感谢代码结构建议！

先感谢您。

QuestionView.java

```
public class QuestionView extends Activity  {

    int correctAnswers = 0;
    int wrongAnswers = 0;
    int answer = 0;
    int i = 0;

    long score = 0;

    long startTime = 10000;
    long interval = 1000;
    long timeElapsed;

    boolean timerHasStarted = false;

    String category;

    Button answer1, answer2, answer3, answer4;
    TextView question, timer, timeElapsedView;

    ArrayList<Question> queries;
    Timer cdTimer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        answer1 = (Button)findViewById(R.id.answer1);
        answer2 = (Button)findViewById(R.id.answer2);
        answer3 = (Button)findViewById(R.id.answer3);
        answer4 = (Button)findViewById(R.id.answer4);

        question = (TextView)findViewById(R.id.question);

        category = getIntent().getStringExtra("category");
        queries = getIntent().getParcelableArrayListExtra("queries");

        timer = (TextView)findViewById(R.id.timer);
        timeElapsedView = (TextView)findViewById(R.id.timeElapsedView);

        cdTimer = new Timer(startTime, interval);

              loadQuestion();
    }

    public void loadQuestion() {
        if(i == 9) {
            endQuiz();
        } else {
            if(!timerHasStarted) {
                cdTimer.start();
                timerHasStarted = true;
            } else {
                cdTimer.cancel();
                timerHasStarted = false;
            }

            answer = queries.get(i).getCorrectAnswer();
            question.setText(queries.get(i).getQuery());

            answer1.setText(queries.get(i).getA1());
            answer2.setText(queries.get(i).getA2());
            answer3.setText(queries.get(i).getA3());
            answer4.setText(queries.get(i).getA4());

            answer1.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(0);
                    if(answer == 0) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            //Same code for button 1 for buttons 2 through 4.
        } 
    }

    public void nextQuestion() {
        score = score + ((startTime / 100) - timeElapsed);
        i++;
        loadQuestion();
    }

    public class Timer extends CountDownTimer {

        public Timer(long startTime, long interval) {
            super(startTime, interval);
        }

        @Override
        public void onFinish() {
            if(i == 9) {
                cdTimer.cancel();
            } else {
                wrongAnswers++;
                nextQuestion();
            }
        }

        @Override
        public void onTick(long millisUntilFinished) {
            timer.setText("Time remaining: " + (millisUntilFinished / 100));
            timeElapsed = 100 - ((startTime - millisUntilFinished) / 100);
            timeElapsedView.setText("Points remaining: " + timeElapsed);
        }
    }

    public void endQuiz() {
        Intent intent = new Intent(QuestionView.this, Results.class);
        intent.putExtra("correctAnswers", correctAnswers);
        intent.putExtra("wrongAnswers", wrongAnswers);
        intent.putExtra("score", score);
        intent.putParcelableArrayListExtra("queries", queries);
        intent.putExtra("category", category);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:19:12.223

尝试以下方法，看看是否有帮助。`cancel()`此外，不需要在计时器自己的方法内部调用，`onFinish()`因为计时器已经被取消以到达该方法。

```
public void loadQuestion() {
        if(i == 9) {
            endQuiz();
        } else {
            cdTimer.start(); //start timer here
            answer = queries.get(i).getCorrectAnswer();
            question.setText(queries.get(i).getQuery());

            answer1.setText(queries.get(i).getA1());
            answer2.setText(queries.get(i).getA2());
            answer3.setText(queries.get(i).getA3());
            answer4.setText(queries.get(i).getA4());

            answer1.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {

                    cdTimer.cancel(); // end it when clicked.
                    queries.get(i).setSelectedAnswer(0);
                    if(answer == 0) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            //Same code for button 1 for buttons 2 through 4.
        } 
    } 
```

# php - 将百分比存储到数组中

> ID：14263383
> 
> 赞同：0
> 
> 时间：2013-01-10T17:09:16.410
> 
> 标签：php, mysql, arrays

我正在尝试将我计算出的一些百分比存储到一个数组中，以便我以后可以调用它来创建一个饼图，但不知道如何去做。到目前为止，这是我计算百分比的 PHP 代码：提前感谢您的帮助！

```
//execute the SQL query and return records
$result = mysql_query("SELECT book_id, COUNT(*) FROM loan GROUP BY book_id ASC ORDER BY     count(*) DESC LIMIT 10");
$book_count = mysql_num_rows($result);

$step = 1;

while($row = mysql_fetch_array($result))
{
    $total = $total + $row['COUNT(*)'];
    $i[$step] = $row['COUNT(*)'];
    $step++;
}

for($index = 1; $index <= 10; $index++)
{
    $percentage[$index] = (($i[$index]/$total)*100);
    #$degrees = (($percentage/100)*360);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:20:34.447

这应该可以满足您的要求，只需将变量替换为真实变量：

```
array_push($array, $value);
// This will add "$value" on to the end of $array, i.e the last element 
```

它也可以做得更简单：

```
$array[] = $value; 
```

更新代码：

```
//execute the SQL query and return records
$result = mysql_query("SELECT book_id, COUNT(*) FROM loan GROUP BY book_id ASC ORDER BY       count(*) DESC LIMIT 10");
$book_count = mysql_num_rows($result);

$step = 1;

while($row = mysql_fetch_array($result))
{
    $total = $total + $row['COUNT(*)'];
    $i[$step] = $row['COUNT(*)'];
    $step++;
}

$percentage_array = array();

for($index = 1; $index <= 10; $index++)
{
    array_push($percentage_array, (($i[$index]/$total)*100));
    #$degrees = (($percentage/100)*360);
} 
```

# java - 如何在提交时使用 JTA 确认 JMS 消息？

> ID：14263386
> 
> 赞同：2
> 
> 时间：2013-01-10T17:09:23.103
> 
> 标签：java, jms, jta, bitronix

我在 JTA、两阶段提交、JMS 和 JDBC 事务中苦苦挣扎。这个想法是（简而言之）

1.  在队列中接收消息
2.  执行一些数据库操作
3.  确认消息，当数据库操作成功时

所以我得到了`XAQueueConnectionFactory`，创建了`XAQueueSession`，从会话中创建了一个接收器并设置了一个消息监听器。

在侦听器内部，在`onMessage`方法中，我开始我的用户事务，执行 jdbc 内容并提交事务或执行回滚，如果出现问题。现在我预计（又名“希望”）当用户事务提交时消息会被确认。

但这并没有发生，消息仍在队列中，并且一次又一次地重新传递。

我错过了什么？我仔细检查了会话，确认模式确实是“ `SESSION_TRANSACTED`”并`getTransacted`返回 true。

我没有 Java EE 容器，没有 spring，没有消息驱动 bean。我使用独立的 JTA bitronix。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T07:55:20.767

您实际上并不需要 XA。只需遵循您的算法：接收消息，执行数据库操作，然后确认消息......从字面上看，这就是解决方案。（而不是事务会话，您可能只需要显式选择 CLIENT_ACKNOWLEDGE。）如果您的应用程序在执行数据库操作时失败，请不要确认 JMS 消息，它将被重新传递。如果您的应用程序在 DB txn 之后和 ack 之前失败，则消息将被重新传递 - 但您可以检测到这一点（消息上的重新传递标志将设置为 true），您可以决定是否重新处理消息，基于数据库的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:51:10.587

当您说在侦听器内部开始您的用户事务时，这似乎暗示您正在使用 Bean Managed Transaction (BMT)。这样做有充分的理由吗？

如果您使用容器管理事务 (CMT)，那么您想要的将是免费的。

据我记得，BMT 是不可能的，因为 UserTransaction 不会参与，也无法参与为消息创建的事务。但是您可能需要仔细检查 Java EE 规范。

编辑：对不起，我意识到你没有使用 Java EE 容器为时已晚。

您确定您在侦听器内启动的用户事务是为消息启动的事务的一部分吗？您似乎为数据库工作启动了一个独立的事务。

如果不使用容器，谁提供 JMS 实现，即 XAQueueConnectionFactory 等？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T08:18:38.040

我认为对于 XA，您不应该使用事务处理会话。

# php - 正则表达式之间的区别

> ID：14263388
> 
> 赞同：0
> 
> 时间：2013-01-10T17:09:27.353
> 
> 标签：php, regex, expression

我正在尝试找出这两者之间的区别：

```
preg_match('-^[^'.$inv.']+\.?$-' , $name

preg_match('-['.$inv.']-', $name 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:18:24.587

首先，要小心`$inv`，根据其内容，可能会在正则表达式中进行一些注入。为避免该问题，请使用[`preg_quote()`](http://php.net/manual/en/function.preg-quote.php).

也就是说，第一个正则表达式将是：

```
^    <-- the given string must begin with
  [    <-- one of those characters
    ^    <-- inverse the accepted characters (instead of accepted characters, the following characters will be those that are not accepted)
    $inv <-- characters
  ]    <-- end of the list of characters (here not accepted characters)
  +    <-- at least one character must be matched, more are accepted
  \.   <-- a '.'
  ?    <-- the previous '.' isn't mandatory
$    <-- the given string must end here 
```

如果`$inv = 'abc.'`匹配：

*   `def`
*   `def.`
*   `d`
*   `d.`

它不会匹配：

*   `.`, 因为该组`.`不接受`[^abc.]`, 即使`\.?`后面有, 至少一个字符必须在 a 之前`.`
*   `de.s`，因为`.`在组中不被接受`[^abc.]`，所以只能将它放在给定字符串的末尾，这要归功于`\.?`
*   `a`
*   `deb`
*   `testc`
*   `teskopkl;;[!@#$b.`，因为`b`
*   一个空字符串，必须至少匹配一个字符`'[^'.$inv.']+'`

它可以简化为（尽管`'^[^'.$inv.']+$'`不要忘记）`preg_quote`

* * *

第二个将是：

```
[    <-- one of those characters
  $inv <-- characters
]    <-- end of the list of characters (here accepted characters) 
```

如果`$inv = 'abc.'`匹配

*   任何包含至少一个字母`a`, `b`,`c`或`.`

它不会匹配任何不包含`a`,`b`或.`c``.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:29:09.493

为了便于举例说明，假设`$inv = 'a'`……</p>

*   `-^[^a]+\.?$-`由于插入符号和美元符号，需要匹配整个字符串。该字符串应以“a”以外的字符开头，后跟 0 个或多个仍不是“a”的字符。但是，此字符串中的最后一个字符可以是点（因此点后面的问号）
*   `-[a]-`将匹配字符串中的第一个“a”，一旦找到匹配项，它就会停止查找，因为您正在使用`preg_match()`而不是`preg_match_all()`。

但是，您的第一个模式没有任何意义，因为已经`\.`= `[^a]`（翻译成英文为：点已经不是“a”）

**[编辑]**当字符类中有一个点时，第一个模式实际上可能意味着什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:15:11.277

第一个模式匹配不包含任何字符`$inv`的行，可选地以句点结束该行。

第二个模式匹配任何包含`$inv`.

*   `-`是模式分隔符，标记表达式的开始和结束。从技术上讲，它可以是*任何*字符，但最常见的是`/`.
*   `^`表示字符串的开头
*   `[ ]`封装了一组要匹配的字符
*   `[^ ]`封装了一组*不*应该匹配的字符，任何*其他*字符都被认为是匹配的。
*   `+`表示前一个字符或一组字符应该匹配一次或多次。
*   `.`通常匹配任何字符，这就是为什么它在`\.`这里被转义以指示文字句点字符。
*   `?`表示前一个字符应该匹配零次或一次。
*   `$`表示字符串的结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T17:16:55.540

用简单的英语来说，第一个是寻找以一个或多个不包含在`$inv`字符串中的字符开头并以可选句点结尾的整行。

第二个只是尝试匹配由值指定的一个字符`$inv`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T17:22:16.960

```
['.$inv.'] 
```

让我们从第二个开始，因为它更简单。

*   这只是匹配一个字符串，该字符串包含变量中字符串中包含的任何单个字符`$inv`。
*   它可以包含来自`$inv`.

```
^[^'.$inv.']+\.?$ 
```

现在是第二个：

*   这匹配一个包含*除*in 字符之外的任何内容的字符串`$inv`（`^`内部`[]`是否定匹配）。
*   不属于其中的匹配项`$inv`必须位于字符串的开头（`^`外部`[]`匹配字符串的开头）。
*   字符串可以包含任意数量的匹配字符（一个或多个；这是`+`后面的符号`[]`）
*   之后，它可能有一个可选的点（这`\.?`是一个可选的点字符）。
*   之后就没有别的了（`$`匹配字符串的结尾）。

请注意，在这两种情况下，如果`$inv`包含任何正则表达式保留字符，它将失败（或做一些意想不到的事情）。你应该使用[`preg_quote()`](http://php.net/manual/en/function.preg-quote.php)来避免这种情况。

所以……呃，它们是完全不同的表达方式。与其说是“他们之间有什么区别”，不如说是“他们有什么相同之处”。答：不多。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-10T17:13:32.830

第一个匹配从开始到第一次出现 $inv 的字符串，然后是字符串必须结束的一个或零个句点。

第二个匹配一个只包含 $inv 的字符串。

本质上它们几乎相同，除了第一个允许 . 在末尾。

# java - iText - 如何在 PDF_A_3B 的文档目录中创建 AF 条目 - PDF/A-3 B

> ID：14263389
> 
> 赞同：1
> 
> 时间：2013-01-10T17:09:27.197
> 
> 标签：java, pdf, pdf-generation, itext

我必须使用带有附件的 iText 创建 PDF/A-3-B（ISO 19005-3:2012。第 3 部分）。

> > 如何在 PDF 的文档目录中创建 AF 条目？

我在这个问题的末尾使用了 Java 代码来生成模拟测试。使用 Adob​​e XI Pro Preflight，我看到 PDF 的结构变成了这样：

> ```
> The document catalog root
>    AF:
>       0: (6)   /T:FileSpec 
> ```

但结构应该是：

> ```
> The document catalog root
>    AF:
>       0: (6) [6 0 R]   /T:FileSpec 
> ```

换句话说，我认为 AF 条目应该是指向附件本身的指针。

ISO 说：

> ```
> KEY:   AF
> TYPE:  array of dictionaries
> Value: (Optional) An array of File Specification Dictionaries 
>        representing the source content from which this document is 
>        derived or data used to produce the visual representation. 
> ```

可用于生成示例的模拟 Java 代码如下：

```
public static final String RESULT = "target/pdfa3.pdf";
public static final String FONTPATH = "/usr/share/fonts/truetype/msttcorefonts/times.ttf";
private static Font FONT = FontFactory.getFont(FONTPATH, BaseFont.CP1252, BaseFont.EMBEDDED);

public void test(){
   //creating document
   Document document = new Document();
   PdfAWriter writer = PdfAWriter.getInstance(document, new FileOutputStream(RESULT), PdfAConformanceLevel.PDF_A_3B);

   //creating default Xmp
   writer.createXmpMetadata();

   document.open();

   //adding attachment as embedded file
   PdfDictionary fileParameter = new PdfDictionary();
   fileParameter.put(new PdfName("ModDate"), new PdfString("2013-01-09T16:28-02:00"));
   PdfFileSpecification fs = PdfFileSpecification.fileEmbedded(writer, src.getAbsolutePath(), src.getName(), null, false, "image/jpeg", fileParameter);
   fs.put(new PdfName("AFRelationship"), new PdfName("Source"));
   writer.addFileAttachment(src.getName().substring(0, src.getName().indexOf('.')), fs);

   //???????????????????
   //THIS IS THE POINT: HOW TO ADD AN AF ENTRY?
   //this does not work:
   writer.getExtraCatalog().put(new PdfName("AF"), new PdfArray(fs));
   //???????????????????

   //adding some text
   document.add(new Paragraph("Hello World!", FONT));

   //done!
   document.close();
} 
```

# c - 如何编译一个基本的 D-Bus/glib 示例？

> ID：14263390
> 
> 赞同：20
> 
> 时间：2013-01-10T17:09:28.457
> 
> 标签：c, compilation, glib, dbus

我正在尝试学习如何将 D-Bus 与 C 绑定一起使用。我以前从未使用过 D-Bus。我正在关注本[教程](http://dbus.freedesktop.org/doc/dbus-tutorial.html)，我认为它是官方的（Freedesktop.org）。[在给出第一个示例程序的本段](http://dbus.freedesktop.org/doc/dbus-tutorial.html#sample-program-1)之前，我已经阅读了它，但不幸的是，我在此页面上没有看到任何关于如何编译它或包含哪些库的指示。我错过了什么 ？

我的操作系统是 Ubuntu 10.04 32 位。我安装了`libdbus-glib-1-dev`软件包。我试图`#include <dbus/dbus.h>`在源文件的开头添加，并用

```
$ gcc -ldbus-1 -I/usr/include/dbus-1.0/ -I/usr/lib/i386-linux-gnu/dbus-1.0/include -o my_dbus.bin my_dbus.c 
```

但我一直失败：

```
my_dbus.c: In function ‘main’:
my_dbus.c:7:3: error: unknown type name ‘DBusGConnection’
my_dbus.c:8:3: error: unknown type name ‘GError’
... 
```

我错过了教程中的一点吗？不是，你能帮我编译这段代码吗？

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-10T18:03:39.643

Tutorials like this one generally assume that you have some knowledge of the language it is written for, in this case C, as well as the operating system you will run it on.

Looking at the tutorial, I see that it only contains a `main` function. As such, you will need to add the proper `#include` directives in order for this to work:

```
#include <stdlib.h>          // for exit()   
#include <dbus/dbus.h>       // for dbus_*   
#include <dbus/dbus-glib.h>  // for dbus_g_* 
```

Also, you will need to compile the libraries (in this case `dbus` and `dbus-glib`), or use the pre-compiled ones from your operating system, in order to link them to the executable.

You will also need the header files provided with the source, or the "development" packages from your operating system.

Per example, on my Ubuntu workstation, I can install both the source and the header files like so:

```
sudo apt-get -y install dbus libdbus-1-dev libdbus-glib-1-2 libdbus-glib-1-dev 
```

Once they are compiled (or properly installed), you proceed to compile the program. You will need to specify the proper include paths and libraries to link to the compiler/linker. Per example, with GCC and my current setup it would be:

```
gcc test.c -I/usr/include/dbus-1.0 \
           -I/usr/lib/x86_64-linux-gnu/dbus-1.0/include \
           -I/usr/include/glib-2.0 \
           -I/usr/lib/x86_64-linux-gnu/glib-2.0/include/ \
           -ldbus-1 \
           -ldbus-glib-1 \
           -Wall -Wextra 
```

This should create an executable `a.out` in the current directory.

Granted, I have a few years of experience with C and Linux so I get figure out all that stuff easily. If you're looking to start with C, you probably should start with something easier though.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-09T13:29:19.803

Note that libdbus-glib is deprecated, unmaintained and should not be used for accessing D-Bus from C: use [GDBus](https://developer.gnome.org/gio/stable/gdbus-convenience.html) instead. libdbus-1 is not recommended either: it is maintained, but is a much lower-level API for using D-Bus, and does not have all the convenience features of GDBus.

As enthusiasticgeek says, there’s good [GDBus documentation available](https://developer.gnome.org/gio/stable/GDBusProxy.html).

(libdbus-glib and libdbus-1 deliberately not linked to avoid giving them google juice.)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-17T19:57:59.553

Based on **'netcoder's'** answer is the program that worked for me.

```
#include <stdlib.h>          // for exit()   
#include <dbus/dbus.h>       // for dbus_*   
#include <dbus/dbus-glib.h>  // for dbus_g_*

int
main (int argc, char **argv)
{
  DBusGConnection *connection;
  GError *error;
  DBusGProxy *proxy;
  char **name_list;
  char **name_list_ptr;

  g_type_init ();

  error = NULL;
  connection = dbus_g_bus_get (DBUS_BUS_SESSION,
                           &error);
  if (connection == NULL)
    {
      g_printerr ("Failed to open connection to bus: %s\n",
              error->message);
      g_error_free (error);
      exit (1);
    }

  /* Create a proxy object for the "bus driver" (name "org.freedesktop.DBus") */

  proxy = dbus_g_proxy_new_for_name (connection,
                                 DBUS_SERVICE_DBUS,
                                 DBUS_PATH_DBUS,
                                 DBUS_INTERFACE_DBUS);

  /* Call ListNames method, wait for reply */
  error = NULL;
  if (!dbus_g_proxy_call (proxy, "ListNames", &error, G_TYPE_INVALID,
                      G_TYPE_STRV, &name_list, G_TYPE_INVALID))
    {
      /* Just do demonstrate remote exceptions versus regular GError */
      if (error->domain == DBUS_GERROR && error->code == DBUS_GERROR_REMOTE_EXCEPTION)
    g_printerr ("Caught remote method exception %s: %s",
            dbus_g_error_get_name (error),
            error->message);
      else
    g_printerr ("Error: %s\n", error->message);
      g_error_free (error);
      exit (1);
    }

  /* Print the results */

  g_print ("Names on the message bus:\n");

  for (name_list_ptr = name_list; *name_list_ptr; name_list_ptr++)
    {
      g_print ("  %s\n", *name_list_ptr);
    }
  g_strfreev (name_list);

  g_object_unref (proxy);

  return 0;
} 
```

and Makefile

```
file=1
sample:
    g++ -g $(file).cc -o $(file) -I/usr/include/dbus-1.0 -I/usr/lib/x86_64-linux-gnu/dbus-1.0/include -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include/ -ldbus-1 -ldbus-glib-1 -Wall -Wextra -lglib-2.0 -lgio-2.0 -lgobject-2.0 -lgthread-2.0 
```

**Note:** This webpage has a good D-bus example [https://developer.gnome.org/gio//2.36/GDBusProxy.html](https://developer.gnome.org/gio//2.36/GDBusProxy.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T17:15:02.073

Looks like you have to include `<dbus/dbus-glib.h>` separately, as it is not automatically included by `<dbus.h>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T17:11:55.017

# c# - 带分隔符的字符串拆分保留在字符串结果数组中，如何？C＃

> ID：14263391
> 
> 赞同：0
> 
> 时间：2013-01-10T17:09:32.440
> 
> 标签：c#, string, split, delimiter

假设我有这个行字符串：

```
'''温斯顿·伦纳德·斯宾塞-丘吉尔爵士''', {{Post-nominals|post-noms=[[Knight of the Garter|KG]]
```

我已经在我的代码中使用了没有空结果的字符串拆分，但我现在想要该字符串的结果是：

```
[0] "'''"
[1] “温斯顿·伦纳德·斯宾塞-丘吉尔爵士”
[2] "'''"
[3] ", "
[4]“{{”
[5] “后名词|后名词=”
[6]“[[”
[7] “嘉德骑士|KG”
[8] "]]"
```

等等，所以基本上我的分隔符`{"'''","{{","}}","[[","]]"}` 只是需要它的方式，我稍后会编辑它。如果不使用正则表达式会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:20:11.427

使用`Regex`：

```
string input = "'''Sir Winston Leonard Spencer-Churchill''', {{Post-nominals|post-noms=[[Knight of the Garter|KG]]";
string pattern = @"('''|\{\{|\}\}|\[\[|\]\])";
string[] result = Regex.Split(input, pattern); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:23:44.590

使用这个正则表达式`(?<=^?'''|\{\{|\[\[|\]\]|\}\})(.+?)(?=$?'''|\{\{|\[\[|\]\]|\}\})`

# javascript - tweenjs 总是从 0 开始？

> ID：14263392
> 
> 赞同：0
> 
> 时间：2013-01-10T17:09:33.823
> 
> 标签：javascript, three.js, tween

我正在使用这段代码用threejs旋转一个平面，但是补间总是从0开始，当我在控制台中打印它时，它似乎忽略了初始值（a）。

例如

我想要一个从 40 到 60 的补间，但这段代码总是从 0 到 60。

```
a = {rotationY:plane.rotation.y};
b = json["rooms"][currentRoom]["camera"]; //{"rotationY":60}
var tween = new TWEEN.Tween(a)
        .to(b, 500)
        .easing( TWEEN.Easing.Quartic.Out )
        .onUpdate(function(){
            plane.rotation.y = (this.rotationY*2*Math.PI)/360;
        });

tween.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:17:14.667

这对我来说是一个非常愚蠢的错误......

```
var position = {rotationY:(plane.rotation.y*360/(2*Math.PI))};
var target = json["rooms"][currentRoom]["camera"];
var tween = new TWEEN.Tween(position)
            .to(target, 500)
            .easing( TWEEN.Easing.Quartic.Out )
            .onUpdate(function(){
                plane.rotation.y = (this.rotationY*2*Math.PI)/360;
});
tween.start(); 
```

补间是使用辐射值的初始值和度数设置的目标创建的...

# pdf-generation - iText 早期版本中的行跨度

> ID：14263395
> 
> 赞同：0
> 
> 时间：2013-01-10T17:09:45.133
> 
> 标签：pdf-generation, itext

从 2.1.6 开始支持行跨度，实际上我使用的是 2.1.4

我知道嵌套表可以解决这样的问题

```
|-----|-----|
|-----|     |
|-----|-----| 
```

但不是这个

```
|-----|-----|
|     |-----|
|-----|-----| 
```

有人知道如何制作第二个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:39:51.550

iText 2.1.4 很久没有支持了。请停止使用

# crystal-reports - 水晶报表组合并查找记录总和

> ID：14263397
> 
> 赞同：-1
> 
> 时间：2013-01-10T17:09:50.607
> 
> 标签：crystal-reports, sum, grouping, crystal-reports-2008

在水晶报告中，我有这样的记录：

a1 7
a1 2
a1 1
a1 5
b1 5
b1 3
b1 2

但相反，我希望它显示为：

a1 15
b1 10

这可以在水晶报表中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:19:36.773

在第一个字段上添加一个组；在第二个上插入一个汇总字段。

# vb.net - 推荐使用 中断应用程序

> ID：14263398
> 
> 赞同：0
> 
> 时间：2013-01-10T17:09:51.317
> 
> 标签：vb.net, web-services, windows-authentication

[获取当前 Windows 用户 VB.net](https://stackoverflow.com/q/754171/1357027)

请原谅这个 .NET 新手，因为我不知道我试图支持的应用程序的复杂性或 Windows 身份验证的详细工作原理。

我尝试修改的应用程序是 Excel 加载项和 Dynamics GP Web 服务扩展的组合。我正在尝试向 WS 扩展添加一行简单的代码，将当前 Windows 用户设置为一个变量。就像链接问题中的人一样，我正在获得 NT AUTHORITY\NETWORK SERVICE 而需要获得真正的 Windows 用户。

我在上面的链接中遇到了问答。但是，将该行添加到 WS 扩展 web.config 文件会破坏我正在使用的应用程序。我收到一个以“客户端找到响应内容类型 [...]”开头的错误，该错误在屏幕的可查看部分下方继续，无法滚动，因此我不知道下面是否有有用的内容。

我也尝试将我的变量设置为 Environ("USERNAME") 但将其设置为 "ROGUE$" - ROGUE 是我的计算机名称。我期待成功的努力使我的变量等于“管理员”，因为这就是我在我正在测试的虚拟机上的身份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:19:16.673

如果要在 Windows 用户的上下文中运行 ASP.NET 应用程序，则需要使用 Windows 身份验证或更改应用程序池使用的身份。这篇文章：[http](http://www.wrox.com/WileyCDA/Section/ASP-NET-3-5-Windows-Based-Authentication.id-310905.html) ://www.wrox.com/WileyCDA/Section/ASP-NET-3-5-Windows-Based-Authentication.id-310905.html看起来有你需要的信息。

**请考虑这样做的安全隐患**。更改权限可能会更好，以便允许 NT AUTHORITY\NETWORK SERVICE 用户执行所需的操作*，而不再执行其他*操作。

进一步阅读：

[配置 ASP.NET 进程标识](http://msdn.microsoft.com/en-us/library/dwc1xthy%28v=vs.100%29.aspx)

[应用程序池标识](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

# java - 将所有值映射到一个键

> ID：14263400
> 
> 赞同：0
> 
> 时间：2013-01-10T17:10:07.210
> 
> 标签：java, maps

```
 Map<Object,String> mp=new HashMap<Object, String>();
      Scanner sc=new Scanner(System.in);
      System.out.println("Enter the instrument name");
      String name=sc.next();

        mp.put(name, "Control Valve");
        mp.put(name, "BDV");
        mp.put(name, "SDV");
        mp.put(name, "ON-OFF VALVE");
        mp.put(name,"Analyser");

        Set s=mp.entrySet();

        Iterator it=s.iterator();

        while(it.hasNext())
        {

            Map.Entry m =(Map.Entry)it.next();

            String key=(String)m.getKey();

            String value=(String)m.getValue();

            System.out.println("Instrument name :"+key+"  fields:"+value);
        }
    }
} 
```

在这个唯一的最后一个值被映射到 key .ie 分析器到 key 。

如何将所有值映射到用户输入的一个键。它还必须要求用户为每个值字段输入值。

更新的代码-：它询问仪器名称，但随后显示异常“java.util.ArrayList 无法转换为 java.lang.String”

```
 Map<String,List<String>> mp=new HashMap<String,List<String>>();
      Scanner sc=new Scanner(System.in);
      System.out.println("Enter the instrument name");
      String name=sc.next();
      List<String> valList = new ArrayList<String>();
      valList.add("Control Valve");
      valList.add("BDV");
      valList.add("SDV");
      valList.add("ON-OFF VALVE");
      valList.add("Analyser");
      mp.put(name, valList);

        Set s=mp.entrySet();

        Iterator it=s.iterator();

        while(it.hasNext())
        {

            Map.Entry m =(Map.Entry)it.next();

            String key=(String)m.getKey();

            String value=(String)m.getValue();

            System.out.println("Instrument name :"+key+" fields:"+value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:12:26.677

我建议使用

```
Map<Object,List<String>> mp=new HashMap<Object, List<String>>(); 
```

这样您就可以维护给定键的一组值。

如果列表可用于给定键，则获取列表并将新值添加到列表中。

更新

```
Map<String,List<String>> mp=new HashMap<String,List<String>>();
      Scanner sc=new Scanner(System.in);
      System.out.println("Enter the instrument name");
      String name=sc.next();
      List<String> valList = new ArrayList<String>();
      valList.add("Control Valve");
      valList.add("BDV");
      valList.add("SDV");
      valList.add("ON-OFF VALVE");
      valList.add("Analyser");
      mp.put(name,valList);

      for(String key : mp.keySet()){
          System.out.print("Instrument name :"+key+" Values : ");
          for(String val : mp.get(key)){
              System.out.print(val+",");
          }

      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:05:15.510

我怀疑您应该为您需要的每条信息使用一个带有字段的自定义类。这可以为每个名称添加一次到地图中

```
public static void main(String... args) {
    Map<String, MyType> mp = new LinkedHashMap<String, MyType>();
    Scanner sc = new Scanner(System.in);

    System.out.println("Enter the following comma separated with a blank line to stop.");
    System.out.println("instrument name, Control Value, BDV, SDV, ON-OFF VALVE, Analyser");
    for (String line; (line = sc.nextLine()).length() > 0; ) {
        MyType mt = new MyType(line);
        mp.put(mt.getName(), mt);
    }
    System.out.println("you entered");
    for (MyType myType : mp.values()) {
        System.out.println(myType);
    }
}

static class MyType {
    private final String name, controlValue, bdv, sdv, onOffValue, analyser;

    MyType(String line) {
        String[] parts = line.trim().split(" *, *");
        name = parts[0];
        controlValue = parts[1];
        bdv = parts[2];
        sdv = parts[3];
        onOffValue = parts[4];
        analyser = parts[5];
    }

    public String getName() {
        return name;
    }

    public String getControlValue() {
        return controlValue;
    }

    public String getBdv() {
        return bdv;
    }

    public String getSdv() {
        return sdv;
    }

    public String getOnOffValue() {
        return onOffValue;
    }

    public String getAnalyser() {
        return analyser;
    }

    @Override
    public String toString() {
        return "MyType{" +
                "name='" + name + '\'' +
                ", controlValue='" + controlValue + '\'' +
                ", bdv='" + bdv + '\'' +
                ", sdv='" + sdv + '\'' +
                ", onOffValue='" + onOffValue + '\'' +
                ", analyser='" + analyser + '\'' +
                '}';
    }
} 
```

如果给出以下输入打印

```
Enter the following comma separated with a blank line to stop.
instrument name, Control Value, BDV, SDV, ON-OFF VALVE, Analyser
a,b,c,d,e,f
1,2,3,4,5,6
q,w,e,r,t,y

you entered
MyType{name='a', controlValue='b', bdv='c', sdv='d', onOffValue='e', analyser='f'}
MyType{name='1', controlValue='2', bdv='3', sdv='4', onOffValue='5', analyser='6'}
MyType{name='q', controlValue='w', bdv='e', sdv='r', onOffValue='t', analyser='y'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:11:19.853

您可能需要使用[google guava multimap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)来实现此目的。

> 类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。

（或者）

将值更改为列表并将所有具有相同键的值添加到该列表

例子：

```
List<String> valList = new ArrayList<String>();
valList.add(val1);
valList.add(val2);
mp.put(name, valList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T17:11:50.970

我建议看看[Guava MultiMap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

> 类似于 Map 的集合，但可以将多个值与单个键相关联。如果您使用相同的键但值不同的两次调用 put(K, V)，则多重映射包含从键到两个值的映射。

否则，您将不得不对某个 Java 集合实现一个`Map`of 。`Strings`这会起作用，但是很痛苦，因为每次输入新密钥时都必须初始化集合，如果密钥存在空集合，则将其添加到集合中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T17:12:13.527

您可能有一个字符串数组的映射。然后你应该检索数组列表并添加新值。

```
 Map<Object,ArrayList<String>> mp=new HashMap<Object, ArrayList<String>>(); 
```

# javascript - 如何使用 doWaitForCondition？

> ID：14263403
> 
> 赞同：1
> 
> 时间：2013-01-10T17:10:16.513
> 
> 标签：javascript, selenium, selenium-ide

如何在 Selenium 用户扩展中使用 doWaitForCondition？this.doWaitForCondition() 返回一个函数，但是当我运行它时它立即返回。

# ruby-on-rails - 仅当它们有效时，如何使用一种形式创建 3 个对象？

> ID：14263412
> 
> 赞同：0
> 
> 时间：2013-01-10T17:11:11.373
> 
> 标签：ruby-on-rails, ruby, nested-forms, nested-attributes

我想使用一种形式创建工作、雇主和公司。

如何创建一个`Job`only if `Job`，`Company`并且`Employer`是有效的？

**模型**

```
class Job < ActiveRecord::Base
  accepts_nested_attributes_for :company, :employer 

  belongs_to :company
  belongs_to :employer

  validates :employer_id, presence: true, on: :update
  validates :company_id, presence: true

  def self.initialize_with_company(job_params)
    company_attributes = job_params.delete(:company_attributes)
    job_params.delete(:employer_attributes)

    new(job_params) do |job|
      job.company = Company.find_or_create_by_nip(company_attributes)
    end
  end

  def create_employer(employer_attributes)
    self.employer = Employer.create(employer_attributes)
  end
end 
```

**控制器**

```
class JobsController < ApplicationController
  def new
    @job = Job.new
    if current_employer
      @job.company =  current_employer.companies.first
    else
      @job.company = Company.new
    end
    @job.employer = current_employer || Employer.new
  end

  def create
    employer_attributes = params[:job][:employer_attributes]
    @job = Job.initialize_with_company(params[:job])
    if current_employer
      @job.employer = current_employer
    else
      @job.create_employer(employer_attributes)
    end

    if @job.save
      if current_employer
        redirect_to dashboard_path
      else
        redirect_to jobs_path
      end
    else
      render 'new'
    end
  end
end 
```

**看法**

```
= simple_form_for @job do |f|
  ...
      = f.simple_fields_for :company do |c|
  ...
      = f.simple_fields_for :employer do |e|
  ...
    = f.button :submit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:10:16.500

因此，您可以使用[ActiveRecord validates_associated 方法](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_associated)：

```
 validates_associated :employer
  validates_associated :company 
```

请注意，如果您`validates_associated :job`在其他模型之一中执行此操作，则可以创建依赖模型的递归循环。避免这种情况。

# wordpress - wordpress：如何添加包含一些图像的自定义静态 HTML 页面模板

> ID：14263420
> 
> 赞同：1
> 
> 时间：2013-01-10T17:11:48.417
> 
> 标签：wordpress

我通过在其中添加一个 php 文件创建了一个自定义静态 html 页面

```
 wp-content/themes/myactivetheme/ 
```

基本上包含

```
<?php
  /*
  Template Name: test
  */
  ?>
  <div><p>blablabla</p>
 <div><img src="content/images/thumb/00500_Partition_Vivaldi_Printemps.jpg"  /></div> 
```

我已将相应的图像文件放入

```
wp-content/themes/myactivetheme/content/images/thumb 
```

使用此测试模板创建带有仪表板的新页面时，显示文本而不显示图像，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:02:55.730

可能图像的源地址是错误的。不要使用相对链接。例如：

代替：

```
<img src="content/images/thumb/00500_Partition_Vivaldi_Printemps.jpg"  /> 
```

采用：

```
<img src="<?php bloginfo('template_url'); ?>/content/images/thumb/your-image.jpg" /> 
```

它将帮助 Wordpress 找到显示图像的确切路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:03:44.477

相对 URI 将与您的 WordPress 索引相关，因此 WordPress 会在错误的位置查找图像。你可以

1.  移动图像
2.  硬编码图片网址
3.  以干净正确的方式进行，即`<img src="<?php echo get_stylesheet_directory_uri(); ?>/content/images/thumb/00500_Partition_Vivaldi_Printemps.jpg" />`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T17:17:21.310

图像文件必须放在

```
/wordpress/content/images/thumb 
```

# java - XML 和 Java 之间的常量值

> ID：14263422
> 
> 赞同：2
> 
> 时间：2013-01-10T17:11:51.397
> 
> 标签：java, android, xml, constants

我知道这是一个简单的问题，所以希望它不会对任何人造成困扰。

***如何在我的项目中拥有一个可以从`View`的 XML 和 .java 文件访问的常量浮点值？***

我尝试在我`View`的资源文件中设置一个浮点值，如下所示：

```
<attr name="cornerRadius" format="float">15.0dp</attr> 
```

我相信这应该是怎么做的，但我只是用直觉来做的。我真的很想在这个主题上用谷歌搜索什么。

现在，为了在 Java 中访问它，我试过这个：

```
float myFloat = getContext().obtainStyledAttributes(attrs, R.styleable.MyView).getFloat(R.styleable.MyView_cornerRadius, 0.0f); 
```

这让我失望，因为它没有得到正确的值，而是我在函数中传递的值。为什么我要向这个函数传递一个浮点值？必须有不同的选择。

现在，对我来说最大的问题是在 XML 中访问它。我试过这个：

```
<corners android:radius="@attrs_my_view/cornerRadius"/> 
```

我也试过这个：

```
<corners android:radius="@float/cornerRadius"/> 
```

但无济于事。

也许这一切都是完全错误的，但我不知道如何在谷歌中搜索这个，因为我不知道它叫什么。就像必须根据其含义在字典中查找单词一样。这不是一个好时机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:21:16.633

您可以创建一个 XML 文件来包含您的常量。这听起来像是一个维度，标准存储在 dimens.xml 文件中。把它放在你的 res/values 文件夹中。

因此，您可能有一个文件（名为 dimens.xml），其中包含以下内容：

```
<resources>
    <dimen name="cornerRadius">15dp</dimen>

</resources> 
```

然后您可以使用普通的 R.class（即 R.dimen.cornerRadius）来引用它——您可以从 XML 或 Java 中引用它。

# html - 让浏览器在三字段登录时存储登录详细信息

> ID：14263426
> 
> 赞同：3
> 
> 时间：2013-01-10T17:12:16.450
> 
> 标签：html, forms, google-chrome, firefox, browser

我正在开发一个具有三字段登录表单（帐户、用户、密码）的项目

在尝试为用户保存密码时，有没有办法告诉浏览器记住所有三个字段？我测试过的所有浏览器似乎只保存密码和用户名字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:39:35.167

尝试使用：

*   自动完成属性：[http ://help.dottoro.com/ljdwgiwh.php](http://help.dottoro.com/ljdwgiwh.php)
*   或 HTML5 本地存储：[http ://www.thomashardy.me.uk/using-html5-localstorage-on-a-form](http://www.thomashardy.me.uk/using-html5-localstorage-on-a-form)

# python - Python if-elif-elif-elif 调度请求时的最佳实践

> ID：14263427
> 
> 赞同：7
> 
> 时间：2013-01-10T17:12:18.500
> 
> 标签：python, if-statement, switch-statement, dispatch

我有 5 组请求的类别定义为 python dicts，例如：

```
category1 = {'type1', 'type2', 'type3'}
category2 = {'type4', 'type5'}
category3 = {'type6', 'type7', 'type8', 'type9'}
category4 = {'type10', 'type11'}
category5 = {'type12', 'type13', 'type14'} 
```

我需要使用它们的类别处理请求，例如：

```
if request_type in category1:
    # process category1 request
    process_category1_request(...)
elif request_type in category2:
    # process category2 request
    process_category2_request(...)
elif... 
```

我需要使用请求类型将请求分派到不同的函数来处理它。

我已经知道有一些方法可以在不需要使用 if-elif 的情况下在 Python 中分派这些请求，但我的问题是：在保持代码简洁明了的同时，最好的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T17:15:39.557

如果`request_type`可以出现在多个类别中，则可以使用元组按优先级顺序遍历它们：

```
categories = (
    (category1, dispatch1method), 
    (category2, dispatch2method),
    (category3, dispatch3method),
    (category4, dispatch4method),
    (category5, dispatch5method),
)

next(method for cat, method in categories if request_type in cat)(arguments) 
```

否则使用 a`dict()`将类别类型映射到调度方法；重用上面相同的元组映射来构建调度：

```
category_dispatch = {}
for cat, dispatch in categories:
    category_dispatch.update(dict.fromkeys(cat.keys(), dispatch)) 
```

然后只需查找请求类型：

```
category_dispatch[request_type](arguments) 
```

像这样的映射查找比扫描元组要快，在元组中我们必须依次测试每个类别，直到找到匹配项。

实际上，可以通过反转相同的元组结构来维护优先级顺序，如下所示：

```
category_dispatch = {}
for cat, dispatch in reversed(categories):
    category_dispatch.update(dict.fromkeys(cat.keys(), dispatch)) 
```

因为现在给定`request_type`键的最高优先级映射将`category_dispatch`最后输入到结构中。即使请求类型存在于多个类别中，这也会为您提供最快的调度。

缺点是，如果您的`category*`映射是动态的（随着时间的推移，请求类型会被添加到不同的类别中或从不同的类别中删除），您还需要维护`category_dispatch`dict 以反映这些更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T17:32:43.867

我认为最干净的可能是两张地图，以使代码最易读。

```
type_category_map = {"type1" : "category1", 
"type2" : "category1", , 
"type3" : "category1",
"type4" : "category2",
....
"type14" : "category5"}

category_function_map = {"category1" : "handler1_function",
"category2" : "handler2_function,
....
} 
```

那么python就是这样的：

```
category = type_category_map[request_type]
handler_function = category_function_map[category]
handler_function(request) 
```

有办法用单一的数据结构来做到这一点，但我认为没有一种方法能像这样清晰易懂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T17:15:46.753

将您的类别映射到处理程序。与地图大小无关，您将拥有 O(1) 访问时间。

```
MAP = {
  'cat1': handler1,
  'cat2': handler2,
   ....
}

MAP[request_type](...) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-10T17:21:15.760

你不能指定一个像

> 类别1 = {'type1'，'type2'，'type3'}

你这里没有键值。

至于你的问题，一个简单的解决方案对你有好处吗？

```
dispatchers = {}

def register_dispatches(types, dispatcher):
    dispatchers.update(dict.fromkeys(types, dispatcher))

def process(request_type, *args, **kwargs):
    dispatchers[request_type](*args, **kwargs)

register_dispatches(['type1', 'type2', 'type3'], process_category1_request)
register_dispatches(['type4', 'type5'], process_category2_request)
...
process(request_type, ...) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T17:15:35.780

```
categories = {request1 : dispatch1, request2 : dispatch2, request3 : dispatch3}
for category, dispatch in categories.iteritems():
    if something in category:
        dispatch(something) 
```

这个怎么样？

# php - PHP 目录树 - 删除文件夹

> ID：14263428
> 
> 赞同：0
> 
> 时间：2013-01-10T17:12:20.913
> 
> 标签：php, recursion, directory, unlink

我找到了一个脚本，列出了其中的所有目录和文件，并允许删除文件。

我有两个问题：

1）如何添加删除文件夹的功能（其中包含所有内容） 2）如何使脚本不允许用户浏览目录？（例如，用户的文件夹是`./files/$userid/`. 我想要它，这样用户将无法访问或对其进行任何`./files/`更改`./files/$userid/`

```
$script = basename(__FILE__); // the name of this script
                              $path   = !empty($_REQUEST['path']) ? $_REQUEST['path'] : dirname('./files/' . (string)$userid . '/'); // the path the script should access
                              $unlink = $_REQUEST['unlink'];

                              if(!empty($unlink)){
                                $unlink = realpath("$path/$unlink");
                                if(is_writable($unlink) && !unlink($unlink)){
                                  echo "<div class=\"error\">Unable to delete file: $unlink</div>";
                                }
                              }

                              echo "<p>Browsing Location: {$path}</p>";

                              $directories = array();
                              $files       = array();

                              // Check we are focused on a dir
                              if (is_dir($path)){
                                chdir($path); // Focus on the dir
                                if ($handle = opendir('.')){
                                  while (($item = readdir($handle)) !== false) {
                                    // Loop through current directory and divide files and directorys
                                    if(is_dir($item)){
                                      array_push($directories, realpath($item));
                                    }
                                    else{
                                      array_push($files, ($item));
                                    }
                                  }

                                  closedir($handle); // Close the directory handle
                                }
                                else {
                                  echo "<p class=\"error\">Directory handle could not be obtained.</p>";
                                }
                              }
                              else{
                                echo "<p class=\"error\">Path is not a directory</p>";
                              }

                              // List the directories as browsable navigation
                              echo "<h2>Navigation</h2>";
                              echo "<ul>";
                              foreach($directories as $directory){

                                $delete = is_writable($file) ? "<a class=\"unlink\" href=\"{$script}?path={$path}&unlink={$directory}\">delete</a>" : '';

                                echo ($directory != $path) ? "<li><a href=\"{$script}?path={$directory}\">{$directory}</a></li>" : "";
                              }
                              echo "</ul>";

                              echo "<h2>Files</h2>";
                              echo "<ul>";
                              foreach($files as $file){
                                // Comment the next line out if you wish see hidden files while browsing
                                if(preg_match("/^\./", $file) || $file == $script){continue;} // This line will hide all invisible files.

                                $delete = is_writable($file) ? "<a class=\"unlink\" href=\"{$script}?path={$path}&unlink={$file}\">delete</a>" : '';

                                echo '<li><a href="' . basename($file) . '" target="_blank">' . $file . "</a> $delete</li>";
                              }
                              echo "</ul>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:16:16.727

1) Try use this function to delete folder recursively (see manual, User contributed notes section [http://php.net/manual/en/function.rmdir.php](http://php.net/manual/en/function.rmdir.php)):

```
 function delTree($dir) { 
   $files = array_diff(scandir($dir), array('.','..')); 
    foreach ($files as $file) { 
      (is_dir("$dir/$file")) ? delTree("$dir/$file") : unlink("$dir/$file"); 
    } 
    return rmdir($dir); 
  } 
```

2) Better develop some filemanager to allow users browse certain folders. Or see some ready solutions: [http://www.jquery4u.com/plugins/10-jquery-file-manager-plugins/](http://www.jquery4u.com/plugins/10-jquery-file-manager-plugins/)

# java - Apache Wink - 在 URL 中发送 JSON 字符串

> ID：14263436
> 
> 赞同：0
> 
> 时间：2013-01-10T17:12:57.543
> 
> 标签：java, json, rest, apache-wink

网址是：[http://xx.xx.xx.xx:9080/myprocess?action=start¶ms=](http://xx.xx.xx.xx:9080/myprocess?action=start&params=) {\"inputName\":\"Test\"}

在上面的 URL 中，我的 JSON 字符串是 {\"inputName\":\"omsai\"}

我正在通过以下方式调用 Apache Wink Rest(POST) 调用，但它不起作用。我得到 java.net.URISyntaxException 。

```
 secHandler.setUserName(userName);
 secHandler.setPassword(passWord);
 secHandler.setSSLRequired(false);

 ClientConfig clientConfig = new ClientConfig();
 clientConfig.handlers(secHandler);
 RestClient restClient = new RestClient(clientConfig);
 Resource resource = restClient.resource("http://xx.xx.xx.xx:9080/myprocess?action=start&params={\"inputName\":\"Test\"}");
 String response  response = resource.contentType(MediaType.APPLICATION_FORM_URLENCODED_TYPE).accept(MediaType.APPLICATION_JSON).post(String.class,""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:37:09.533

```
Here is the code 

secHandler.setUserName(userName);
 secHandler.setPassword(passWord);
 secHandler.setSSLRequired(false);

 ClientConfig clientConfig = new ClientConfig();
 clientConfig.handlers(secHandler);
 RestClient restClient = new RestClient(clientConfig);
 Resource resource = restClient.resource("http://xx.xx.xx.xx:9080/myprocess?action=start
String jsonString ="params={\"inputName\":\"Test\"}")";
 String response  response = resource.contentType(MediaType.APPLICATION_FORM_URLENCODED_TYPE).accept(MediaType.APPLICATION_JSON).post(String.class,jsonString); 
```

# mobile - 移动应用程序开发 - 方向、分辨率和宽度/高度

> ID：14263437
> 
> 赞同：6
> 
> 时间：2013-01-10T17:12:58.223
> 
> 标签：mobile, resolution, ui-design

Apple 网站称 iPhone 5 显示屏的分辨率为 1136 x 640 像素，分辨率为 326 ppi。通常分辨率实际上是拼写（宽度 x 高度）。在 iPhone 5 中，当我们以纵向模式握住手机时，我们知道 1136 是高度，640 是宽度。

我正在开发一个 Android 项目，现在我对这些移动设备分辨率感到困惑。我的应用仅针对纵向：1280x720、960x540、960x540、800x480、1920x1080、1280x720、1280x720、1280x720、960x540、960x540

我的问题是：

1.  当我们说 1136 x 640 时，这意味着横向模式下设备的宽度 x 高度 - 对吗？

2.  设计仅针对一种分辨率 320x480（仅限纵向）的移动应用程序并强制设备以该 320x480 分辨率运行是个好主意吗？我正在使用的库支持固定分辨率模式，它被称为接受（wxh）的“设计分辨率”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:58:59.957

回答第一个问题：是的，当 Apple 说 1136 x 640 像素分辨率时，它们的意思是横向模式下的宽度 x 高度。

回答第二个问题：虽然不建议您将应用程序设计为仅在一个方向（例如纵向模式）工作，但如果这是您的应用程序所需要的，这是可以接受的。请参阅 Apple[人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW19)。他们说，如果您确实选择仅支持一个方向，请确保在设备旋转 180 度时也支持该方向。也就是说，确保当用户将设备倒置时它会翻转。

至于强制比设备能够显示的分辨率更小，这绝不是一个好主意。请参阅 Android [Core App Guidelines](http://developer.android.com/distribute/googleplay/quality/core.html#fn)，其中说您应该使用整个屏幕，并建议您尽可能支持两种方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T22:40:54.710

我会说只为一个方向开发应用程序是可接受的做法，但在布局或代码中强制方向，因此当用户旋转设备时它不会破坏布局。在考虑不同的屏幕分辨率时，您需要考虑所有潜在用户的可能性。如果您知道设备分辨率在所有设备上都是相同的，那么无论如何只需要为此编写代码。如果它会改变，你会想要考虑所有的。由于您使用的是纵向，因此分辨率将被标记为 640x1136。看起来你的最小目标是 480x800，最大是 1080x1920，所以我建议在所有 3 种尺寸上设置模拟器，并进行相应的测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:49:56.773

用于 Eclipse 的最新 Android 布局编辑器提供了以所有屏幕尺寸查看屏幕的可能性。如果您只想为单一分辨率开发并在其他屏幕尺寸下保持不变，则不应使用 fill_parent 和 match_parent，而应使用 wrap_content，这样您的元素就会保持相同的尺寸。不要使用基于屏幕大小的元素动态放置。

如果您想支持其他屏幕尺寸，那么您将执行与上述相反的操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T08:49:59.660

无法更改实际的设备分辨率（除非您使用的是 crt 显示器）。也就是说，如果您为固定分辨率设计应用程序，那么您的代码（或库）应该缩放/裁剪您的设计以适应实际屏幕。

请记住，按比例缩小会降低图像质量，但按比例放大（到更高分辨率）会导致像素化（像素显示为正方形）。

另一方面，缩放使用 cpu（或 gpu），更高的分辨率需要更多的处理能力。

因此，根据您的应用程序，您应该选择在高分辨率设备上看起来不太差并且在低处理能力设备上仍然可以正常执行的分辨率

如果您提供有关您正在使用的库的更多信息，那就太好了。

# java - 如何让 EhCache 重置一个域与其他域可能存在的一对多关系的缓存？

> ID：14263439
> 
> 赞同：1
> 
> 时间：2013-01-10T17:13:01.210
> 
> 标签：java, spring, hibernate, one-to-many, ehcache

**数据库**

*`mother`桌子*

```
+-----------+------+
| mother_id | name |
+-----------+------+
|         1 | m1   |
|         2 | m2   |
+-----------+------+ 
```

*`child`桌子*

```
+----------+-----------+------+
| child_id | mother_id | name |
+----------+-----------+------+
|        1 |         1 | c1   |
|        2 |         1 | c2   |
|        3 |         2 | c3   |
+----------+-----------+------+ 
```

**域**

*妈妈.java*

```
@Entity
@Table(name = "mother")
public class Mother {

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "mother")
    public List<Child> getChilds() {
        return this.childs;
    }

} 
```

*子.java*

```
@Entity
@Table(name = "child")
public class Child {

    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    @JoinColumn(name = "id_mother", nullable = false)
    public Mother getMother() {
        return this.mother;
    }

} 
```

**道**

*MotherDao.java*

```
public interface MotherDao {

    @Cacheable(cacheName = "dao")
    public List<Mother> findAll();

    @TriggersRemove(cacheName = "dao")
    public void delete(Integer pk);

} 
```

*MotherDao.java*

```
public interface ChildDao {

    @Cacheable(cacheName = "dao")
    public List<Child> findAll();

} 
```

**会议**

*应用程序上下文.xml*

```
<ehcache:annotation-driven cache-manager="ehCacheManager" />    
<bean id="ehCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" /> 
```

*ehcache.xml*

```
<cache name="dao"
    eternal="false"
    maxElementsInMemory="10000"
    overflowToDisk="false"
    timeToIdleSeconds="86400"
    imeToLiveSeconds="86400"
    memoryStoreEvictionPolicy="LFU" /> 
```

**问题**

```
System.out.println(motherDao.findAll().size());
System.out.println(childDao.findAll().size());
motherDao.delete(1);
System.out.println(motherDao.findAll().size());
System.out.println(childDao.findAll().size()); 
```

印刷：

```
2
3
1
3 
```

代替：

```
2
3
1
1 
```

由于删除了母亲级联删除了两个孩子，但是之前`childDao.findAll()`缓存了它的结果。

**问题**

如何让 EhCache 重置一个域与其他域可能存在的一对多关系的缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:01:05.810

您可以为此使用两个缓存。下面是一个例子。

```
public interface ChildDao {

    @Cacheable(cacheName = "childDao")
    public List<Child> findAll();

} 
```

道妈妈。

```
public interface MotherDao {
    @Cacheable(cacheName = "motherDao")
    public List<Mother> findAll();

    @TriggersRemove(cacheName={"motherDao", "childDao"})
    public void delete(Integer pk);
} 
```

# windows - 我制作了一个 Windows bat 脚本，用于从列表中归档旧文件。对代码语法有什么建议吗？

> ID：14263441
> 
> 赞同：2
> 
> 时间：2013-01-10T17:13:03.793
> 
> 标签：windows, syntax, batch-file, archive

不确定 setlocal 的用途，但我在一个脚本示例中找到了它，用于在 for 循环中需要多个命令的其他内容。

Filelist.txt 包含一个文件列表，其中包含共享的完整文件路径。

例如：\\FileShare\Division\Project\file.txt

```
setlocal enabledelayedexpansion
for /f "delims=" %%i in (filelist.txt) do (
mkdir "D:\Archive\%%~dpi"
move "%%i" "D:\Archive\%%i")
endlocal 
```

该脚本获取 filelist.txt 中的文件（逐行）并复制路径的目录结构，然后移动文件。使用上面的示例，它会创建目录 D:\Archive\FileShare\Division\Project\，然后将文件**file.txt**移动到该目录。

我从我在这里找到的不同任务的现有示例中将其拼凑在一起。有什么清理小窍门吗？

编辑：解决下面遗嘱中的评论。创建该脚本是为了处理由一年多未访问的文件生成的报告。这就是为什么它需要处理文件列表的原因，因为我想保持文件夹结构和所有其他文件完好无损。如果有某种方法可以将它集成到脚本中，那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:34:40.387

您不需要`delayed expansion`或`setlocal`。 `setlocal`将隔离该部分的范围，以便对变量所做的任何更改都与该范围隔离。只有在循环或 if 语句中扩展变量时才需要延迟扩展。您的脚本没有太多需要真正清理的内容。如果它可以毫无问题地完成您的任务并且效率很高，那么就没有必要进行更改。

变化和原因

1.  `setlocal EnableExtensions` 不需要范围隔离，但必须启用扩展才能使用该`for /f`选项。
2.  `%%F`而不是`%%i`因为大写字母更容易与修饰符区分开来。（可读性）
3.  `if exist "%%~fA"`验证脚本运行时列表中的文件是否仍然存在。
4.  `for /f "tokens=1 delims=:" %%D in ("%%~dF") do`因为文件夹名称不能包含冒号。这将从驱动器的文件路径中删除冒号字符。
5.  `&&`仅当目标已成功创建时才尝试移动文件。

代码：

```
rem Hide the Command Output.
@echo off
rem Isolate Variable Scope and Enable Extensions.
setlocal EnableExtensions
rem Loop through the file list and verify file existence.
for /f "delims=" %%F in (filelist.txt) do if exist "%%~fF" (
    rem Parse the drive letter since colon : is not a valid folder character.
    for /f "tokens=1 delims=:" %%D in ("%%~dF") do (
        rem Create the folder hierarchy
        mkdir "D:\Archive\%%~D\%%~pF" && move "%%~fF" "D:\Archive\%%~D\%%~pF"
    )
)
endlocal 
```

# coq - Morphism - Coq 中不可转换术语的 Setoid

> ID：14263444
> 
> 赞同：1
> 
> 时间：2013-01-10T17:13:14.093
> 
> 标签：coq, equivalence

我在 Coq 中有以下功能。现在我想定义一个实例如下。在我的例子中，类型 [nat] 上的等价性 [==] 已定义，但未在 [StringMap.t String.t] 上定义。请如果您解决了 Instace SC_Proper。谢谢。

```
Definition SC (u: nat) (zm: StringMap.t String.t):
  StringMap.t String.t :=
 match u with
 | S p =>   match p with  
                 | 2  => zm 
                 | _ => 
                      match StringMap.find "S" zm with
                      | Some k => StringMap.empty 
                      | _ => zm  
                      end
                end
  | O => zm
 end.

 Instance SC_Proper 
 : Proper (equiv ==> equiv ==> equiv) SC.
Proof with o.
 repeat red. intros u u' Hu zm1 zm2 Hzm.
Admitted. 
```

# java - 无法启动 TJWS

> ID：14263445
> 
> 赞同：0
> 
> 时间：2013-01-10T17:13:17.340
> 
> 标签：java, servlets, tjws

我知道 TJWS 很容易嵌入，但我对这段代码没有运气

```
public class Test {

 public static void main(String[] args) {

        final Serve serve = new Serve();

        new Thread(new Runnable() {
            @Override
            public void run() {
                serve.serve();
            }
        }).start();
    }
}

[Thu Jan 10 17:59:38 CET 2013] Unhandled exception: java.lang.NullPointerException, server is terminating.
java.lang.NullPointerException
    at Acme.Serve.Serve.serve(Serve.java:720)
    at Test.main(Test.java:17) 
```

Java7/TJWS 2.3.2 最终版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:36:04.530

你检查过服务源代码吗？第 720 行如下所示：

```
 Socket socket = acceptor.accept(); 
```

我怀疑你需要提前`init()`打电话`serve()`

# zend-framework2 - Zend 框架 2 - Cookie 概念

> ID：14263446
> 
> 赞同：7
> 
> 时间：2013-01-10T17:13:22.487
> 
> 标签：zend-framework2

我冲浪了很多。我想使用 COOKIE 分配和检索一个值。ZF2怎么办？我看到了很多在 cookie 中赋值的例子。请解释如何从 cookie 中检索值。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T17:58:32.553

HTTP 中的 cookie（参见[RFC 2109](http://www.ietf.org/rfc/rfc2109.txt)只是存储在请求中的内容，并在每次发出请求时发送。响应*可以*添加其他参数以额外存储到现有的 cookie 中。

因此 cookie*检索*是通过`Request`, 来*更新*您使用的 cookie 完成的`Response`。根据 RFC 2109，您分别使用`Cookie`标头和`Set-Cookie`标头。因此，您可以通过以下方式直接访问这些标头

```
$this->getRequest()->getHeaders()->get('Cookie')->foo = 'bar'; 
```

或通过以下方式设置 cookie：

```
$this->getResponse()->getHeaders()->get('Set-Cookie')->foo = 'bar'; 
```

事情变得容易了一些，因为在请求和响应中有一个代理可以直接访问 cookie：

```
public function fooAction()
{
  $param = $this->getRequest()->getCookie()->bar;

  $this->getResponse()->getCookie()->baz = 'bat';
} 
```

请记住`Cookie`和`Set-Cookie`标头实现`ArrayObject`对象。要检查请求中是否存在 cookie，您可以使用`offsetExists`：

```
if ($cookie->offsetExists('foo')) {
    $param = $cookie->offsetGet('foo');
} 
```

/更新：

如果您想修改 cookie 的属性，您也在此处修改`Set-Cookie`标头。查看[Github 上的类，](https://github.com/zendframework/zf2/blob/master/library/Zend/Http/Header/SetCookie.php)了解所有可用的方法。

一个小小的总结：

```
$cookie = $this->getResponse()->getCookie();
$cookie->foo = 'bar';
$cookie->baz = 'bat';

$this->setDomain('www.example.com');
$this->setExpires(time()+60*60*24*30); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T09:22:04.390

通过 cookie 访问`$this->getResponse()->getCookie()`有效，但冗长且令人厌烦。所以我做了什么，我扩展了 Response 和 Request 类。这是它的样子：

```
'service_manager' => array (
    'factories' => array (
        'Request' => 'Application\Mvc\Request\Factory',
        'Response' => 'Application\Mvc\Response\Factory',
    )
); 
```

模块/Application/src/Application/Mvc/Request/Factory.php

```
namespace Application\Mvc\Request;

use Zend\Console\Request as ConsoleRequest;
use Zend\Console\Console;
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class Factory implements FactoryInterface
{
    public function createService (ServiceLocatorInterface $serviceLocator)
    {
        if (Console::isConsole ())
        {
            return new ConsoleRequest ();
        }

        return new HttpRequest ();
    }
} 
```

模块/Application/src/Application/Mvc/Request/HttpRequest.php

```
namespace Application\Mvc\Request;
use Zend\Http\PhpEnvironment\Request;

class HttpRequest extends Request
{
    public function hasCookie ($name)
    {
        assert ('is_string($name)');

        $cookie = $this->getCookie();
        if (empty ($cookie))
        {
            return false;
        }

        if (isset ($cookie [$name]))
        {
            return true;
        }

        return false;
    }

    public function cookie ($name, $default = null)
    {
        assert ('is_string($name)');

        if ($this->hasCookie($name))
        {
            $cookie = $this->getCookie();
            return $cookie [$name];
        }

        return $default;
    }
} 
```

模块/Application/src/Application/Mvc/Response/Factory.php

```
namespace Application\Mvc\Response;

use Zend\Console\Response as ConsoleResponse;
use Zend\Console\Console;
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class Factory implements FactoryInterface
{
    public function createService (ServiceLocatorInterface $serviceLocator)
    {
        if (Console::isConsole ())
        {
            return new ConsoleResponse ();
        }
        return new HttpResponse ();
    }
} 
```

模块/Application/src/Application/Mvc/Response/HttpResponse.php

```
namespace Application\Mvc\Response;

use Zend\Http\PhpEnvironment\Response;
use Zend\Http\Header\SetCookie;

class HttpResponse extends Response
{
    public function addCookie ($name, $value, $expires = null, $path = null, $domain = null, $secure = false, $httponly = false, $maxAge = null, $version = null)
    {
        $cookie = new SetCookie ($name, $value, $expires, $path, $domain, $secure, $httponly, $maxAge, $version);
        $this->getHeaders ()
            ->addHeader ($cookie);
    }
} 
```

现在，我可以更轻松地访问 cookie。

```
$this->getRequest ()->cookie ('ptime');
$this->getRequest ()->cookie ('alarm', 'last'); 
```

和

```
$this->getResponse ()->addCookie ('ptime', time ()); 
```

# c++ - 在 Mac 上开始使用 OpenNI

> ID：14263451
> 
> 赞同：1
> 
> 时间：2013-01-10T17:13:37.667
> 
> 标签：c++, segmentation-fault, openni

所以我和一个使用 Xbox Kinect 的朋友开始了一个项目，因为我们都使用 Mac，我们需要一个好的库，所以我们选择了 OpenNI，因为它有 API。问题：在编辑后尝试编译样本会返回错误并最终导致分段错误 (11)。

从 gdb 中，输出并没有那么有用，尽管它告诉我问题出在哪里，仅此而已。有什么办法可以比这进一步缩小问题的范围吗？如果您需要我在做什么的示例代码，请询问。

`Program received signal EXC_BAD_ACCESS, Could not access memory. Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000000 0x00000001000f0221 in xnSetMapOutputMode () (gdb) backtrace 0 0x00000001000f0221 in xnSetMapOutputMode ()
1 0x0000000100004570 in main ()`

# php - 如何设置正确的 .htaccess 文件

> ID：14263455
> 
> 赞同：-3
> 
> 时间：2013-01-10T17:13:47.533
> 
> 标签：php, .htaccess

我正在尝试设置一个正确的 .htaccess 文件，我的意思是我正在尝试设置 .htaccess 来执行以下操作：

*   读过`http://website.com/members.php`喜欢`http://website.com/members/`
*   `http://website.com/index.php`必须像有`http://website.com`或没有 /一样阅读
*   设置默认推荐图像/网站文件过期日期
*   Gzip 网站

...以及其他任何推荐的东西。

编辑：这是我目前拥有的：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^users/([0-9]+)$  profile.php?id=$1  [L]

# -FrontPage-

IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>

# BEGIN Rewrite
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END Rewrite 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:20:30.727

将此添加到您的 .htaccess 文件中以形成 website.com/user 类型的链接：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /members/profile.php?username=$1 
```

为了获得更好的解释，请关注 PHPAcademy 注册和登录系列下的用户个人资料视频

[用户配置文件链接形成](https://www.youtube.com/watch?v=zrc4p-J_x9s)

还有其他部分。你可以自己看到它们。

关于您的其他问题，其他人会帮助您，因为我无法完全帮助您。

# c# - X509 证书未在服务器上加载私钥文件

> ID：14263457
> 
> 赞同：42
> 
> 时间：2013-01-10T17:13:50.640
> 
> 标签：c#, asp.net-mvc-3, google-analytics-api, x509certificate2

我正在使用 Google Analytics API，并按照这个 SO 问题设置 OAuth：[https ://stackoverflow.com/a/13013265/1299363](https://stackoverflow.com/a/13013265/1299363)

这是我的 OAuth 代码：

```
public void SetupOAuth ()
{
    var Cert = new X509Certificate2(
        PrivateKeyPath, 
        "notasecret", 
        X509KeyStorageFlags.Exportable);
    var Provider = new AssertionFlowClient(GoogleAuthenticationServer.Description, Cert)
    {
        ServiceAccountId = ServiceAccountUser,
        Scope = ApiUrl + "analytics.readonly"
    };
    var Auth = new OAuth2Authenticator<AssertionFlowClient>(Provider, AssertionFlowClient.GetState);
    Service = new AnalyticsService(Auth);
} 
```

PrivateKeyPath 是 Google API Console 提供的私钥文件的路径。这在我的本地机器上完美运行，但是当我将它推送到我们的测试服务器时，我得到了

```
System.Security.Cryptography.CryptographicException: An internal error occurred. 
```

使用以下堆栈跟踪（删除了不相关的部分）：

```
System.Security.Cryptography.CryptographicException.ThrowCryptographicException(Int32 hr) +33
System.Security.Cryptography.X509Certificates.X509Utils._LoadCertFromFile(String fileName, IntPtr password, UInt32 dwFlags, Boolean persistKeySet, SafeCertContextHandle& pCertCtx) +0
System.Security.Cryptography.X509Certificates.X509Certificate.LoadCertificateFromFile(String fileName, Object password, X509KeyStorageFlags keyStorageFlags) +237
System.Security.Cryptography.X509Certificates.X509Certificate2..ctor(String fileName, String password, X509KeyStorageFlags keyStorageFlags) +140
Metrics.APIs.GoogleAnalytics.SetupOAuth() in <removed>\Metrics\APIs\GoogleAnalytics.cs:36
Metrics.APIs.GoogleAnalytics..ctor(String PrivateKeyPath) in <removed>\Metrics\APIs\GoogleAnalytics.cs:31 
```

所以它看起来好像在加载文件时遇到了问题。我检查了传入的 PrivateKeyPath，它指向正确的位置。

有任何想法吗？我不知道这是否是服务器、文件、代码或什么的问题。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-01-10T17:59:18.013

我想到的一件事是您的应用程序池的身份，请确保打开**加载用户配置文件**，否则加密子系统不起作用。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-02-22T21:39:53.893

我正在加载我的`p12`文件

```
new X509Certificate2(
HostingEnvironment.MapPath(@"~/App_Data/GoogleAnalytics-privatekey.p12"), .... 
```

即使`File.Exists(filename)`返回 true，我实际上也得到了 FileNotFoundException。

正如@Wiktor Zychla 所说，它就像启用一样简单`Load User Profile`

这是需要更改的设置的图像

只需右键单击 IIS 中“应用程序池”下的应用程序池，然后选择“高级设置”，您需要的设置大约是一半。

![在此处输入图像描述](../Images/b634ee1950c67bfa12f8f68588fb4e91.png)

提示：我建议用这个来评论你的代码，以防止将来浪费时间，因为如果你以前从未遇到过它，它就会变得非常模糊。

```
 // If this gives FileNotFoundException see 
  // http://stackoverflow.com/questions/14263457/ 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-05-14T09:58:49.720

也尝试指定 X509KeyStorageFlags

```
 var certificate = new X509Certificate2(KeyFilePath, KeyFilePassword, 
X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | 
X509KeyStorageFlags.Exportable); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-18T10:17:34.997

如上所述，您需要配置 IIS，但在我们的情况下，有时您需要检查以下文件夹的权限：

> C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys

如果您设置**X509KeyStorageFlags**参数，它将在此文件夹中创建一个密钥文件。就我而言，此文件夹的权限有所不同。池帐户未添加到上述文件夹中。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-03-04T10:19:58.507

不，“File.Exists(...)”也在高级设置中吗？我有 3 个池，它们都为“加载用户配置文件”启用了 true。我认为我的问题可能与依赖项和 NuGet 包有关，因为代码作为控制台应用程序运行良好，但在 MVC 中给我带来了问题。

# java - 我该如何解决这个副作用？

> ID：14263466
> 
> 赞同：-1
> 
> 时间：2013-01-10T17:14:09.157
> 
> 标签：java, loops, statements

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我对下面的代码有问题；问题是在你第一次不说地图之后`No try again`，无论你是否输入“地图”，它都会随着输入框不断重复。

```
 System.out.println("My cousin Diego is in trouble in the Majestic palace. But how do we get there?");
 System.out.println("Who do we call when we don't know where to go?         Huh? I didn't get that...");
 imTheMap=robotMagic.next();
 if (imTheMap.equals("map"))
 {
    System.out.println("That's right!"); //the issue is here
 }
 else 
 {
    while(imTheMap!=("map"))
    {
        System.out.println("No! try again");
        imTheMap=robotMagic.next();
    }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:15:06.100

通过改变

```
 while(imTheMap!=("map")) 
```

至

```
 while(!imTheMap.equals("map")) 
```

你总是应该使用 equals() 方法来检查字符串是否相等。就像你的 if 语句一样。

# google-maps - 如何在具有 display:none 的选项卡或 div 中显示 Google Maps Directions

> ID：14263472
> 
> 赞同：1
> 
> 时间：2013-01-10T17:14:46.193
> 
> 标签：google-maps, google-maps-api-3, tabs, map-directions

当我将带有方向的 Google 地图 (v3) 加载到对用户隐藏的 div 中时，生成的地图不会正确缩放和居中。我尝试触发一个`resize`事件，但这只是部分解决了问题。

通常在加载带有路线的地图时，API 会自动找到最佳视图（即缩放级别和中心）以显示整个旅程。任何想法我做错了什么？

请参阅[JsFiddle](http://jsfiddle.net/mB6AZ/1/)

```
<button id="show">Show</button>
<div id="a">
   <div id="map_wrapper" style="display:none">
      <div id="map_canvas" style="height: 354px; width:713px;"></div>
   </div>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=initialize"></script>
  <script>
  var directionsService,
      directionsDisplay,
      map;

    function initialize() {

      directionsService = new google.maps.DirectionsService();
      directionsDisplay = new google.maps.DirectionsRenderer(); 
      var mapOptions = { mapTypeId: google.maps.MapTypeId.ROADMAP, disableDefaultUI: true }
      map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
      directionsDisplay.setMap(map);

      var start = 'New York, NY';
      var end = 'Chicago, IL';
      var request = { origin: start, destination: end, travelMode: google.maps.DirectionsTravelMode.DRIVING };
      directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        }
      });
    }
  </script>
</div> 
```

和javascript：

```
$(document).ready(function(e) {
    $('#show').on('click', function() {
        $('#map_wrapper').show();
        google.maps.event.trigger(map, "resize");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:24:02.390

您可以在单击按钮后初始化地图：删除回调，单击`initialize()`按钮时全部调用。[http://jsfiddle.net/mB6AZ/2/](http://jsfiddle.net/mB6AZ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:03:21.410

保存 DirectionsRoute LatLngBounds 的副本，然后在调整大小后使地图适应这些边界。

[工作演示](http://jsfiddle.net/mB6AZ/8/)

```
var bounds;

directionsService.route(request, function (response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
      bounds = response.routes[0].bounds;
    }
});

$(document).ready(function (e) {
  $('#show').on('click', function () {
    $('#map_wrapper').show(0, function () {
      // this will fire once the map resize completes
      google.maps.event.addListenerOnce(map, 'idle', function () {
        this.fitBounds(bounds);
      });
      google.maps.event.trigger(map, "resize");
    });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T01:04:01.303

修改ready-function如下：

```
$(document).ready(function(e) {
        $('#show').on('click', function() {
            $('#map_wrapper').show();
            google.maps.event.addListenerOnce(map, "resize",function(){
              try{this.fitBounds(directionsDisplay.getDirections().routes[0].bounds)
              }catch(e){}
            });
            google.maps.event.trigger(map, "resize");
        });
      }); 
```

当地图内有可用路线时，它将地图的边界设置为路线的边界。

演示：http: [**//jsfiddle.net/doktormolle/c2pC3/**](http://jsfiddle.net/doktormolle/c2pC3/)

# objective-c - 如何过滤多维数组

> ID：14263479
> 
> 赞同：0
> 
> 时间：2013-01-10T17:15:10.093
> 
> 标签：objective-c, multidimensional-array, filter, nspredicate

我有以下多维数组（为清楚起见，已剥离和缩减）

```
[
    {
        "type": "type1",
        "docs": [
            {
                "language": "EN"
            },
            {
                "language": "DE"
            },
            {
                "language": "EN"
            }
        ]
    },
    {
        "type": "type2",
        "docs": [
            {
                "language": "EN"
            }
        ]
    },
    {
        "type": "type3",
        "docs": [
            {
                "language": "FR"
            },
            {
                "language": "DE"
            },
            {
                "language": "DE"
            }
        ]
    }
] 
```

我想过滤它，所以只显示使用 DE 语言的 docs 对象。换句话说，我需要这个：

```
[
    {
        "type": "type1",
        "docs": [
            {
                "language": "DE"
            }
        ]
    },
    {
        "type": "type2",
        "docs": []
    },
    {
        "type": "type3",
        "docs": [
            {
                "language": "DE"
            },
            {
                "language": "DE"
            }
        ]
    }
] 
```

我的数组最初是由以下代码创建的：

```
NSMutableArray *docsArray;
[self setDocsArray:[downloadedDocsArray mutableCopy]]; 
```

我尝试循环数组并删除不需要的对象。我试过循环数组并将想要的对象复制到一个新数组中。我曾尝试使用 NSPredicate 而不是循环，所有这些都没有成功。

谁能指出我正确的方向？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:31:33.417

您应该遍历数组以获取包含要过滤的数组的字典：

```
NSArray* results;
NSMutableArray* filteredResults= [NSMutableArray new]; // This will store the filtered items
// Here you should have already initialised it 
for( NSDictionary* dict in results)
{
    NSMutableDictionary* mutableDict=[dict mutableCopy];
    NSArray* docs= dict[@"docs"];
    NSPredicate* predicate= [NSPredicate predicateWithFormat: @"language like 'DE'"];
    docs= [docs filteredArrayUsingPredicate: predicate];
    [mutableDict setObject: docs forKey: @"docs"];
    [filteredResults addObject: mutableDict];
} 
```

# iphone - AFNetworking，使用 POST 上传简单的 NSData

> ID：14263482
> 
> 赞同：0
> 
> 时间：2013-01-10T17:15:20.343
> 
> 标签：iphone, ios, objective-c, json, afnetworking

我使用 setObject forKey 创建了一个包含数组和字符串以及其他客户端信息的 NSDictionary。当我 NSLog 数据时，一切看起来都很棒，格式正是它应该的方式。我还将我的 NSDictionary 转换为 NSData：

```
NSData *userData = [NSJSONSerialization dataWithJSONObject:userDict options:NSJSONWritingPrettyPrinted error:&error]; 
```

我需要知道的是如何使用 POST 将其上传到服务器。我找到了以下代码片段来上传照片。我的问题是我可以简单地使用我的 NSDictionary 作为参数（请求中的参数），它有点大。如果没有，我该如何发送我的 NSData 对象 userData？我真的很喜欢 AFNetworking，并且一直使用它来满足我所有的下载需求。这是我第一次上传对象。谢谢

```
NSData *imageData = UIImagePNGRepresentation(pageImage);

AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://www.SERVER.com"]];

//You can add POST parameteres here
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                    author, @"author",
                    title, @"title",
                    nil];

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"/PATH/TO/WEBSERVICE.php" parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {

//This is the image
[formData appendPartWithFileData: imageData name:@"cover_image" fileName:@"temp.png" mimeType:@"image/png"];

}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

//Setup Upload block to return progress of file upload
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten,     long long totalBytesExpectedToWrite) {
float progress = totalBytesWritten / (float)totalBytesExpectedToWrite;
NSLog(@"Upload Percentage: %f %%", progress*100);
}];

//Setup Completeion block to return successful or failure
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id     responseObject) {
NSString *response = [operation responseString];
NSLog(@"response: [%@]",response);
//Code to run after webservice returns success response code

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"error: %@", [operation error]);
    //Code to Run if Failed

}];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:42:12.760

我不确定我是否完全理解您的问题，但无论如何我都会尝试一下。

> 我的问题是我可以简单地使用我的 NSDictionary 作为参数（请求中的参数），它有点大。

我认同。试一试……最后，这些数组会转换成数据发送到服务器，所以如果服务器能够处理它，应该没有问题。

> 如果没有，我该如何发送我的 NSData 对象 userData？

您发送的数据应在您发布的代码指定的位置提供`imageData`。请记住，如果您上传的内容不是文件（您提到 NSData），那么您可能需要使用`appendPartWithFormData:name`. 这再次取决于您的服务器端。

希望这能澄清一些事情。

# java - 如何在 java 中为 Selenium webdriver 编写我自己的自定义定位器？

> ID：14263483
> 
> 赞同：6
> 
> 时间：2013-01-10T17:15:22.713
> 
> 标签：java, selenium, webdriver, selenium-webdriver, browser-automation

我想编写自己的定位器来访问元素。WebDriver 的 API 目前提供了 8 个定位器，允许通过 id、名称属性、标签名称、完整或部分链接文本、XPath、类名和 css 选择器检索元素。但是，这些默认定位器现在对我来说还不够，因为我必须通过新属性访问元素。让我举一个例子，这样你就可以理解我在这里真正想要什么。

示例： *选择您的用户名：*

现在我想编写一个代码，以便我可以使用 myLocator 定位器访问用户名按钮，例如：

```
*driver.findElement(By.myLocator("username")).* 
```

如果有人能给我们一些好主意，我将如何重写 BY 类以添加我自己的定位器，这将非常有帮助。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-08T00:46:18.977

使用 c#

```
using OpenQA.Selenium;
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

public class ImageBy : By
{
    public ImageBy(string imageByString)
    {
        FindElementMethod = (ISearchContext context) =>
        {
            IWebElement mockElement = context.FindElement(By.XPath("//img[@src='" + imageByString + "']"));
            return mockElement;
        };

        FindElementsMethod = (ISearchContext context) =>
        {
            ReadOnlyCollection<IWebElement> mockElements = context.FindElements(By.XPath("//img[@src='" + imageByString + "']"));
            return mockElements;
        };
    }
} 
```

用法如下

```
[FindsBy(How = How.Custom, Using = @"/path/to/img", CustomFinderType = typeof(ImageBy) )]
private IWebElement MenuStartButton = null; 
```

使用 Java

```
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.SearchContext;
import org.openqa.selenium.WebElement;

public class ByImageSrc extends By 
{
    private final String imageByString;
    public ByImageSrc(String imageByString)
    {
        this.imageByString = imageByString;
    }

    @Override
    public List<WebElement> findElements(SearchContext context) 
    {
         List<WebElement> mockElements = context.findElements(By.xpath("//img[@src='" + imageByString + "']"));
         return mockElements;
    }
} 
```

用法 ：

```
WebElement element = driver.findElement(new ByImageSrc("/path/to/image")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T10:06:29.170

您需要对类进行子`By`类化并提供方法`findElement`和`findElements`方法的实现，因为这是实际元素查找的“内容”发生的地方。

然后，您应该可以正常使用它`driver.FindElement`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:39:14.037

我知道这并不能真正回答您的问题，但为什么不直接使用 Xpath 呢？构建一个新的定位器而不是仅仅爬取 DOM 似乎需要做很多额外的工作。

例如：`driver.findElement(By.Xpath("//div[@username='YourUsername']")`

我可以举一个更好的例子，其中包含有关您正在使用的属性和页面的更多详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T03:09:58.007

就像 Michiel 回答的那样，我觉得你可以用 Selenium 已经提供的东西来实现你想要的。如果这是由于开发人员更改 id 和元素名称而导致的维护开销，您可以创建一个单独的文件来跟踪您需要定位的元素。

```
//EG. (not Java I know :))
string usernameXPath = "//div[@username='YourUsername']"; 
```

然后，如果有变化，你可以保持这个。您甚至可以更进一步，为每个“其他类型”的元素实现一个类，然后在构造函数中围绕它放置一个 XPath。XPath 非常灵活，因为它提供了诸如 ' *contains* ' 和 ' *parent::div' 之*类的功能。也许查看[W3schools 页面](http://www.w3schools.com/xpath/default.asp)以获得更多 XPath 阅读。

编辑：另外值得注意的是，最新版本的 C# 绑定说明如下：

*.Net：将更新 CustomFinderType 属性引入 .NET FindsByAttribute。这允许在 PageFactory 中使用自定义 By 子类。自定义查找器必须是 By 的子类，并且它必须公开一个接受字符串参数的公共构造函数。*

希望这也将出现在您的下一个 Java 版本中 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-13T14:56:53.367

你可以这样做：

```
private final String myLocator = "//*[contains(@id,'username') and contains (@type,'text') and contains (text(),'exactly what I want')]"; 
```

因此，您可以根据您所映射的属性编写定位器，但无需单击或选择 5 行。

此外，您可以在该定位器中使用通配符，只需将您想要用作参数的任何内容替换为“%s”，如下所示：

```
private final String myLocator = "//*[contains(@id,'%s') and contains (@type,'text') and contains (text(),'exactly what I want')]"; 
```

然后创建一个动态元素，例如：

```
private WebElement usernameSelectElement(String text) {
    return driver.findElement(By.xpath(String.format(myLocator, text)));
} 
```

用法如下：

```
public void clickMyElement(text){
usernameSelectElement(text).click();
} 
```

对于您的示例，在我看来它过于复杂。

# c# - 定位路线附近的对象

> ID：14263487
> 
> 赞同：0
> 
> 时间：2013-01-10T17:15:39.657
> 
> 标签：c#, algorithm, xaml, microsoft-metro, maps

我正在使用 xaml 和 c# 编写 Metro 应用程序

目前我有一大组数据（~700），它们以图钉的形式表示地图上的位置。我目前正在尝试仅在地图上两点之间的路线附近显示图钉。使用纬度和经度坐标在地图上绘制图钉和路线。但是，它们彼此并不完全匹配，并且通常仅在附近。我想知道是否有一种方法可以根据与绘制的路线的接近程度来过滤可见的图钉。谢谢你。我将根据需要提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:54:06.233

我不确定您使用的是什么存储策略。但是，如果您碰巧使用的是 SQL Server，那么计算您想要的内容的方法是内置的。它真的很棒。

如果您有兴趣，请参阅此处：http: [//msdn.microsoft.com/en-us/library/ff929145.aspx](http://msdn.microsoft.com/en-us/library/ff929145.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:21:15.413

[在这里](http://www.movable-type.co.uk/scripts/latlong.html)您可以找到一些与距离计算相关的算法。

# python - Python 字典中的最低价格

> ID：14263488
> 
> 赞同：-3
> 
> 时间：2013-01-10T17:15:46.187
> 
> 标签：python

这是一个后续问题。我知道如何删除列表中的最小值，`remove(min())`但不是字典。我正在尝试删除 Python 字典中的最低价格。

```
shops['foodmart'] = [12.33,5.55,1.22]
shops['gas_station'] = [0.89,45.22] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:18:13.437

具体来说，对于给出的示例：

```
shops['foodmart'].remove(min(shops["foodmart"])) 
```

更一般地说，对于整个字典：

```
for shop in shops :
    shops[shop].remove(min(shops[shop])) 
```

逻辑与从您提到的列表中删除值相同。`shops[shop]`在您的情况下，它本身也是一个列表。因此，您在列表中所做的也适用于此。

Lattyware 建议的一种更快、更清洁的方法是：

```
for prices in shops.values():
    prices.remove(min(prices)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:18:26.733

```
>>> shops={}
>>> shops['foodmart'] = [12.33,5.55,1.22]
>>> shops['gas_station'] = [0.89,45.22]
>>> shops
{'foodmart': [12.33, 5.55, 1.22], 'gas_station': [0.89, 45.22]}

>>> for x in shops:             #iterate over key
    shops[x].remove(min(shops[x])) # min returns the smallest value and 
                                   # that is passed to remove

>>> shops
{'foodmart': [12.33, 5.55], 'gas_station': [45.22]} 
```

或者：

```
>>> for values in shops.values():    #iterate over values
...     values.remove(min(values))
...     
>>> shops
{'foodmart': [12.33, 5.55], 'gas_station': [45.22]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:34:13.057

如果最低价格是唯一的，则上述所有解决方案都可以工作，但如果列表中有多个最小值需要删除，则可以使用以下构造

```
{k : [e for e in v if e != min(v)] for k, v in shops.items()} 
```

这里要特别注意的是，使用 list.remove 实际上会从列表中删除与针匹配的第一项（也就是最小值），但是要一次性删除所有分钟，您必须重建列表过滤所有符合最小值的项目。注意，这会比使用 list.remove 慢，但最后你必须决定你的要求是什么

不幸的是，尽管上面的结构很简洁，但它最终要求`min`每个商店的每个价格元素。您可能不想将其转换为循环结构以减少开销

```
>>> for shop, price in shops.items():
    min_price = min(price)
    while min_price in price:
        shops[shop].remove(min_price)

>>> shops
{'foodmart': [12.33], 'toy_store': [15.32], 'gas_station': [45.22], 'nike': [69.99]}
>>> 
```

# selenium - Alfresco + Selenium WebDriver. Wait for AJAX

> ID：14263490
> 
> 赞同：1
> 
> 时间：2013-01-10T17:15:54.600
> 
> 标签：selenium, selenium-webdriver, alfresco, alfresco-share

I'm developing tests with TestNG and Selenium WebDriver for some custom Alfresco modules being developed by our team.

After the page loading I need to wait for all AJAX requests to get necessary WebElement. I found [this approach](http://agilesoftwaretesting.com/selenium-wait-for-ajax-the-right-way/). I've [figured out](http://wiki.alfresco.com/wiki/AJAX_Support) that Alfresco uses Dojo.

So i wrote a following method (timeout is yet to be added):

`void waitForAJAX() {`

```
if(javascriptExecutor == null) {
    throw new UnsupportedOperationException(webDriverType.toString() + " does not support javascript execution.");
}
boolean presentActiveConnections = true;
Integer numOfCon;
// Minor optimization. Getting rid of the repeaedly invocation of valueOf() in while.
Integer zeroInteger = Integer.valueOf(0);
while(presentActiveConnections) {
    numOfCon = (Integer)javascriptExecutor.executeScript("return selenium.browserbot.getCurrentWindow().dojo.io.XMLHTTPTransport.inFlight.length");
    if( numOfCon.equals(zeroInteger) ) {
        presentActiveConnections = false;
    }
} 
```

`}`

But when i run my tests i get following error on invocation of this method from the test:

> Failed: ReferenceError: dojo is not defined.

Should dojo variable be available from any javascript? I was unable to locate it too when i manually checked the page source.

Thanks in advance.

# conditional - 在jade模板中使用条件时，渲染结果错误

> ID：14263492
> 
> 赞同：0
> 
> 时间：2013-01-10T17:16:05.540
> 
> 标签：conditional, render, pug

首先我要渲染代码是：

```
ul
 li
  a 
```

渲染结果应该是

```
 <ul>
  <li><a></li>
 </ul> 
```

然后我添加条件：

```
 ul
  - if (temp == "blog") {
  li.active
  - } else {
  li  
  - }
   a 
```

但渲染结果是

```
<ul>
 <li.active></li>
 <a>
</ul> 
```

我的代码有什么问题？如何获得与第一个相同的渲染结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:22:08.140

试试这个：

```
ul
  - if temp === "blog"
    li.active
      a
  - else
    li  
      a 
```

如果您不想复制嵌套的 a，您可以使用：

```
ul
  li(class = (temp === 'blog') ? 'active' : '')
    a 
```

对于菜单列表和选项卡也很有用，您可以像这样内联嵌套：

```
ul
 li: a
 li: a.active
 li: a
// ...etc 
```

# windows - emacs and hunspell - Can't open affix or dictionary files

> ID：14263493
> 
> 赞同：1
> 
> 时间：2013-01-10T17:16:05.180
> 
> 标签：windows, emacs, hunspell

I have trouble getting spellchecking to work with Emacs 24.2.1 and Hunspell 1.3.2 on Windows XP.

I have read the help about spelling in the built in manual and searched the internet where I found advice to include these lines to my `~/.emacs.d/init.el` file.

```
(setq ispell-dictionary-alist
   '((nil ; default
      "[a-zäöüßA-ZÄÖÜ]" "[^a-zäöüßA-ZÄÖÜ]" "[']" t
      ("-d" "C:\\Dokumente und Einstellungen\\ojones\\Eigene Dateien\\dictionaries\\de_DE_frami" "-i" "utf-8") nil utf-8)
     ("english"
      "[A-Za-z]" "[^A-Za-z]" "[']" nil
      ("-d" "en_GB") nil utf-8)
     ("german"
      "[a-zäöüßA-ZÄÖÜ]" "[^a-zäöüßA-ZÄÖÜ]" "[']" t
      ("-d" "'C:\\Dokumente und Einstellungen\\ojones\\Eigene Dateien\\dictionaries\\de_DE_frami'" "-i" "utf-8") nil utf-8)
     ("british"
      "[A-Za-z]" "[^A-Za-z]" "[']" nil
      ("-d" "en_GB") nil utf-8)))
(eval-after-load "ispell"
    (progn
      (setq ispell-dictionary "german"
        ispell-extra-args '("-a" "-i" "utf-8") ; aspell doesn't understand -i utf-8, hunspell needs it
        ispell-silently-savep t)))
(setq ispell-program-name "C:\\Dokumente und Einstellungen\\ojones\\Eigene Dateien\\hunspell-mingw-1.3.2-win32\\bin\\hunspell.exe") 
```

where I made changes regarding the path to the affix and dictionary files and the hunspell.exe.

I verified that hunspell works, by executing it on the command line.

When I type `M-x ispell` in emacs I get the following error message

> Can't open affix or dictionary flies for dictionary named "german".
> @(#) International Ispell Version 3.2.06 (but really Hunspell 1.3.2)
> @(#) International Ispell Version 3.2.06 (but really Hunspell 1.3.2)

I tried changing the path to the affix and dictionary files in my init.el to just the name of the affix and dic name, i.e. `"de_DE_frami"` since hunspell knows where to find them, but it didn't help in emacs.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:58:14.623

我越来越接近解决方案。

因为`ispell-dictionary-alist`在`M-x ispell`我改变了使用`ispell-local-dictionary-alist`. 这是我`~/.emacs.d/init.el`现在的样子：

```
(setq ispell-program-name "C:\\Dokumente und Einstellungen\\ojones\\Eigene Dateien\\hunspell-mingw-1.3.2-win32\\bin\\hunspell.exe")

(setq ispell-local-dictionary-alist
 '(("en_GB"
    "[[:alpha:]]"
    "[^[:alpha:]]"
    "[']" nil ("-r") nil utf-8)
   ("de_DE_frami"
    "[a-zäöüßA-ZÄÖÜ]" "[^a-zäöüßA-ZÄÖÜ]" "[']" nil
    ("-r") nil utf-8))) 
```

当我启动 Emacs 时，我必须更改字典`M-x ispell-change-dictionary`，然后选择例如 de_DE_frami。

这样可行。但它仍然无法正常工作。我在检查缓冲区中的整个文本时遇到了这个错误`M-x ispell`：

> Ispell 错位：单词 'Einf\303' 点 118；可能不兼容的版本

“Einführung”这个词有问题。我猜“ü”是问题所在。检查单词`M-$`我收到此错误消息：

> Ispell 及其进程有不同的字符映射

有什么建议么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:35:38.627

我对我的 init.el 进行了一些更改，现在无法打开词缀和字典文件的错误消息不再出现。但我得到一个新的错误。

这是我修改后的 init.el

```
(setq ispell-dictionary-alist
 '((nil ; default 
    "[a-zäöüßA-ZÄÖÜ]" "[^a-zäöüßA-ZÄÖÜ]" "[']" t
    ("-d" "de_DE_frami") nil utf-8)
   ("en_GB"
    "[A-Za-z]" "[^A-Za-z]" "[']" nil
    ("-d" "en_GB") nil utf-8)
   ("de_DE_frami"
    "[a-zäöüßA-ZÄÖÜ]" "[^a-zäöüßA-ZÄÖÜ]" "[']" t
    ("-d" "de_DE_frami") nil utf-8)))
(eval-after-load "ispell"
  (progn
    (setq ispell-dictionary "de_DE_frami"
          ispell-extra-args '("-a" "-i" "utf-8") ; aspell doesn't understand -i utf-8, hunspell needs it
          ispell-silently-savep t)))
(setq ispell-program-name "C:\\Dokumente und Einstellungen\\ojones\\Eigene Dateien\\hunspell-mingw-1.3.2-win32\\bin\\hunspell.exe") 
```

我将ispell-dicationary-alist 中的词典名称更改为它们的名称，例如，我将“german”更改为“de_DE_frami”。我确保字典和词缀文件保存在 hunspell 找到它们的地方（我通过在命令行上执行 hunspell 验证了它可以工作）。

现在，当我启动 ispell by 时`M-x ispell`，没有错误消息，并且我看到一个 ispell 进程使用`M-x list-processes`：

> 工艺：ispell
> 
> 状态：运行
> 
> 缓冲： -
> 
> 电传打字机：--
> 
> 命令：C:\Dokumente und Einstellungen...\hunspell.exe -a -d de_DE_frami -i nil -a -i utf-8

但据我所知，它不起作用。没有单词被识别为拼写错误（我包括一些用于测试目的）。当我打开flyspell时，`M-x flyspell-mode`出现以下错误消息：

> post-command-hook (flyspell-post-command-hook) 中的错误：（错误“没有字典数据 \"de_DE_frami\"，在 'ispell-local-dictionary-alist' 和 'ispell-dictionary-alist' 中都没有” ")

`C-j`通过在暂存缓冲区中键入“ispell-dicationary-alist”并按下该行的末尾来检查变量 ispell-dicationary-alist 是否包含我的 init-el 中指定的内容，我得到了这个意外的文本：

> (("希伯来语" "[\340\341\342\343\344\345\346\347\350\351\353\352\354\356\355\360\357\361\362\364\363\ 367\366\365\370\371\372]" "[^\340\341\342\343\344\345\346\347\350\351\353\352\354\356\355\360\357 \361\362\364\363\367\366\365\370\371\372]" "" 无 ("-B") 无 cp1255) ("svenska" "[A-Za-z\345\344\ 366\351\340\374\350\346\370\347\305\304\326\311\300\334\310\306\330\307]" "[^A-Za-z\345\344\ 366\351\340\374\350\346\370\347\305\304\326\311\300\334\310\306\330\307]" "[']" 无 ("-C") " ~list" iso-8859-1) ("斯洛文尼亚语" "[A-Za-z\301\304\311\315\323\332\324\300\305\245\335\256\251\310\317 \253\322\341\344\351\355\363\372\364\340\345\265\375\276\271\350\357\273\362]" "[^A-Za-z\301\304\311\315\323\332\324\300\305\245\335\256\251\310\317\253\322\341\344\351\355\ 363\372\364\340\345\265\375\276\271\350\357\273\362]" "" 无 ("-B" "-d" "斯洛文尼亚语") 无 iso-8859-2) ("斯洛伐克语" "[A-Za-z\301\304\311\315\323\332\324\300\305\245\335\256\251\310\317\253\322\341\344\ 351\355\363\372\364\340\345\265\375\276\271\350\357\273\362]" "[^A-Za-z\301\304\311\315\323\ 332\324\300\305\245\335\256\251\310\317\253\322\341\344\351\355\363\372\364\340\345\265\375\276\271\ 350\357\273\362]" "" nil ("-B") nil iso-8859-2) ("russianw" "[\300\301\302\303\304\305\250\306\307\310\311\312\313\314\315\316\317\320\321\322\323\324\325\326\ 327\330\331\334\333\332\335\336\337\340\341\342\343\344\345\270\346\347\350\351\352\353\354\355\356\ 357\360\361\362\363\364\365\366\367\370\371\374\373\372\375\376\377]" "[^\300\301\302\303\304\305 \250\306\307\310\311\312\313\314\315\316\317\320\321\322\323\324\325\326\327\330\331\334\333\332\335 \336\337\340\341\342\343\344\345\270\346\347\350\351\352\353\354\355\356\357\360\361\362\363\364\365 \366\367\370\371\374\373\372\375\376\377]" "" nil nil nil windows-1251) ("俄语" "[\341\342\367\347\344\345\263\366\372\351\352\353\354\355\356\357\360\362\363\364\365\346\350\343\ 376\373\375\370\371\377\374\340\361\301\302\327\307\304\305\243\326\332\311\312\313\314\315\316\317\ 320\322\323\324\325\306\310\303\336\333\335\330\331\337\334\300\321]" "[^\341\342\367\347\344\345 \263\366\372\351\352\353\354\355\356\357\360\362\363\364\365\346\350\343\376\373\375\370\371\377\374 \340\361\301\302\327\307\304\305\243\326\332\311\312\313\314\315\316\317\320\322\323\324\325\306\310 \303\336\333\335\330\331\337\334\300\321]" "" nil nil nil koi8-r) ("葡萄牙" "[a-zA-Z\301\302\307\311 \323\340\341\342\351\352\355\363\343\347\372]" "[^a-zA-Z\301\302\307\311\323\340\341\342\351 \352\355\363\343\347\372]" "[']" t ("-C") "~latin1" iso-8859-1) ("波兰语" "[A-Za-z\241\243\246\254\257\261\263\266\274\277\306\312\321\323\346\352\361\363]" "[^ A-Za-z\241\243\246\254\257\261\263\266\274\277\306\312\321\323\346\352\361\363]" "[.]" 无 无无 iso-8859-2) ("norsk7-tex" "[A-Za-z{}\'^`]" "[^A-Za-z{}\\'^`]" "[\"]" nil ("-d" "norsk") "~plaintex" iso-8859-1) ("norsk" "[A-Za-z\305\306\307\310\311\ 322\324\330\345\346\347\350\351\362\364\370]" "[^A-Za-z\305\306\307\310\311\322\324\330\345\ 346\347\350\351\362\364\370]" "[\"]" nil nil "~list" iso-8859-1) ("nederlands8" "[A-Za-z\300\301\302 \303\304\305\307\310\311\312\313\314\315\316\317\322\323\324\325\326\331\332\333\334\340\341\342\343 \344\345\347\350\351\352\353\354\355\356\357\361\362\363\364\365\366\371\372\373\374]""[^A-Za -z\300\301\302\303\304\305\307\310\311\312\313\314\315\316\317\322\323\324\325\326\331\332\333\334 \340\341\342\343\344\345\347\350\351\352\353\354\355\356\357\361\362\363\364\365\366\371\372\373\374 ]" "[']" t ("-C") nil iso-8859-1) ("荷兰" "[A-Za-z\300\301\302\303\304\305\307\310\311\312\313\314\315\316\317\ 322\323\324\325\326\331\332\333\334\340\341\342\343\344\345\347\350\351\352\353\354\355\356\357\361\ 362\363\364\365\366\371\372\373\374]" "[^A-Za-z\300\301\302\303\304\305\307\310\311\312\313\ 314\315\316\317\322\323\324\325\326\331\332\333\334\340\341\342\343\344\345\347\350\351\352\353\354\ 355\356\357\361\362\363\364\365\366\371\372\373\374]" "[']" t ("-C") nil iso-8859-1) ...)[^A-Za-z\300\301\302\303\304\305\307\310\311\312\313\314\315\316\317\322\323\324\325\326\331\ 332\333\334\340\341\342\343\344\345\347\350\351\352\353\354\355\356\357\361\362\363\364\365\366\371\ 372\373\374]" "[']" t ("-C") nil iso-8859-1) ...)[^A-Za-z\300\301\302\303\304\305\307\310\311\312\313\314\315\316\317\322\323\324\325\326\331\ 332\333\334\340\341\342\343\344\345\347\350\351\352\353\354\355\356\357\361\362\363\364\365\366\371\ 372\373\374]" "[']" t ("-C") nil iso-8859-1) ...)

而当 Emacs 重新启动时，我的 init.el 正确设置了变量 ispell-dictionary-alist。

希望这有助于跟踪问题。

最好的奥利弗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:22:47.430

字符串文字中的单反斜杠肯定是错误的：在 elisp 中，它们是转义符，或者为后面的字符分配特殊含义，或者引用该字符。

替换`\`为`\\`: `"C:\\Dokumente....."`。还要`init.el`通过执行`C-h v` `ispell-dictionary-alist``Enter`并检查 `ispell-dictionary-alist.

# python - 将 3 元素元组列表转换为字典

> ID：14263494
> 
> 赞同：10
> 
> 时间：2013-01-10T17:16:06.473
> 
> 标签：python

如果我有两个元组列表

```
tuple2list=[(4, 21), (5, 10), (3, 8), (6, 7)]

tuple3list=[(4, 180, 21), (5, 90, 10), (3, 270, 8), (6, 0, 7)] 
```

如何将其转换为字典，如下所示，

```
tuple2list2dict={4:21, 5:10, 3:8, 6:7}

tuple3list2dict={4: {180:21}, 5:{90:10}, 3:{270:8}, 6:{0:7}} 
```

我知道如何为元组中的 2 个元素执行此操作，使用，

```
tuple2list2dict=dict((x[0], index) for index,x in enumerate(tuple2list)) 
```

但是对于 3 个元素我有问题，尝试以下错误，

```
tuple3list2dict=dict((x[0], dict(x[1], index)) for index,x in enumerate(tuple3list)) 
```

如何将上述代码重用于 3 元素元组来创建字典？

任何指针表示赞赏或指向我可以在此阅读更多内容的地方。很难在互联网上找到它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T17:19:40.463

在 Python2.7 或更高版本中，您可以使用 dict 理解：

```
In [100]: tuplelist = [(4, 180, 21), (5, 90, 10), (3, 270, 8), (4, 0, 7)]

In [101]: tuplelist2dict = {a:{b:c} for a,b,c in tuplelist}

In [102]: tuplelist2dict
Out[102]: {3: {270: 8}, 4: {0: 7}, 5: {90: 10}} 
```

在 Python2.6 或更早版本中，等价于

```
In [26]: tuplelist2dict = dict((a,{b:c}) for a,b,c in tuplelist) 
```

请注意，如果元组中的第一个值出现不止一次，（如上例所示）结果`tuplelist2dict`仅包含一个键值对——对应于具有共享键的*最后一个元组。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T17:19:56.517

这种配对情况很简单，因为它与[dict 构造](http://docs.python.org/2/library/stdtypes.html#dict)一致：

> ...位置参数必须是迭代器对象。可迭代对象中的每个项目本身必须是具有**两个对象**的迭代器。每个项目的第一个对象成为新字典中的键，第二个对象成为相应的值。

```
>>> t = [(4, 21), (5, 10), (3, 8), (4, 7)]
>>> dict(t)
{3: 8, 4: 7, 5: 10} 
```

三重情况可以这样解决：

```
>>> t = [(4, 180, 21), (5, 90, 10), (3, 270, 8), (4, 0, 7)]
>>> dict([ (k, [v, w]) for k, v, w in t ])
{3: [270, 8], 4: [0, 7], 5: [90, 10]} 
```

或者更笼统一些：

```
>>> dict([ (k[0], k[1:]) for k in t ]) # hello car, hi cdr
{3: (270, 8), 4: (0, 7), 5: (90, 10)} 
```

请注意，您的代码：

```
_3_tuplelist_to_dict = {4: {180:21}, 5:{90:10}, 3:{270:8}, 4:{0:7}} 
```

这实际上只是一个令人困惑的表示：

```
{3: {270: 8}, 4: {0: 7}, 5: {90: 10}} 
```

尝试：

```
>>> {4: {180:21}, 5:{90:10}, 3:{270:8}, 4:{0:7}} == \
    {3: {270: 8}, 4: {0: 7}, 5: {90: 10}}
True 
```

使用 Python 3，您可以使用 dict 理解：

```
>>> t = [(4, 180, 21), (5, 90, 10), (3, 270, 8), (4, 0, 7)]
>>> {key: values for key, *values in t}
{3: [270, 8], 4: [0, 7], 5: [90, 10]} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-26T11:01:28.913

如果想要一个嵌套字典而不覆盖字典，可以使用`defaultdict`库中的`collections`。

```
>>> from collections import defaultdict
>>> # Edited the list a bit to show when overrides
>>> tuple3list=[(4, 180, 21), (4, 90, 10), (3, 270, 8), (6, 0, 7)]
>>> tuple3dict = defaultdict(dict)
>>> for x, y, z in tuple3list:
...     tuple3dict[x][y] = z
... 
>>> print(tuple3dict)
defaultdict(<class 'dict'>, {4: {180: 21, 90: 10}, 3: {270: 8}, 6: {0: 7}})
>>> tuple3dict[4][90]
10 
```

不幸的是，单行分配很棘手或不可能，因此我认为唯一有效的解决方案就是这个。

# scala - Scala 停用词

> ID：14263499
> 
> 赞同：1
> 
> 时间：2013-01-10T17:16:21.650
> 
> 标签：scala, text, csv, stop-words

我想从我的推文数据中删除以下事件：

**任何带有@的东西（例如@nike）**

**以 :// 开头的任何内容**

在我的 scala 脚本中，我有停用词，但它们必须与输出完全匹配。有没有办法添加诸如 @* 或 ://* 之类的停用词来解释我想要删除的所有单词的可能性？

```
val source = CSVFile("output.csv")

val tokenizer = {
SimpleEnglishTokenizer() ~>            // tokenize on space and punctuation
WordsAndNumbersOnlyFilter() ~>         // ignore non-words and non-numbers
CaseFolder() ~>                        // lowercase everything
MinimumLengthFilter(3)                 // take terms with >=3 characters 
}

val text = {
source ~>                              // read from the source file
Column(1) ~>                           // select column containing text
TokenizeWith(tokenizer) ~>             // tokenize with tokenizer above
TermCounter() ~>                       // collect counts (needed below)
TermMinimumDocumentCountFilter(30) ~>   // filter terms in <4 docs
TermStopListFilter(List("a", "and", "I", "but", "what")) ~> // stopword list
TermDynamicStopListFilter(10) ~>       // filter out 30 most common terms  
DocumentMinimumLengthFilter(5)         // take only docs with >=5 terms 
} 
```

Tokenizer 似乎无法识别这些非字母字符。但是它会毫无问题地过滤掉#。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:45:58.450

由于我从未与 stanford-nlp 合作过，因此我仍然在这里遗漏了许多细节，但这是我能弄清楚的。

[我从一个分叉的 scalanlp 存储库](https://github.com/dramage/scalanlp-core/blob/master/data/src/main/scala/scalanlp/stage/text/TermFilters.scala)中找到了一些源代码，它定义`TermStopListFilter`为

```
/**
 * Filters out terms from the given list.
 * 
 * @author dramage
 */
case class TermStopListFilter[ID:Manifest](stops : List[String])
extends Stage[LazyIterable[Item[ID,Iterable[String]]],LazyIterable[Item[ID,Iterable[String]]]] {
  override def apply(parcel : Parcel[LazyIterable[Item[ID,Iterable[String]]]]) : Parcel[LazyIterable[Item[ID,Iterable[String]]]] = {
    val newMeta = {
      if (parcel.meta.contains[TermCounts]) {
        parcel.meta + parcel.meta[TermCounts].filterIndex(term => !stops.contains(term)) + TermStopList(stops)
      } else {
        parcel.meta + this;
      }
    }

    Parcel(parcel.history + this, newMeta,
      parcel.data.map((doc : Item[ID,Iterable[String]]) => (doc.map(_.filter(term => !stops.contains(term))))));
  }

  override def toString =
    "TermStopListFilter("+stops+")";
} 
```

在代码中我看到

```
if (parcel.meta.contains[TermCounts]) {
  parcel.meta + 
  parcel.meta[TermCounts].filterIndex(term => !stops.contains(term)) +
  TermStopList(stops)
} 
```

看起来`TermCounts`从`meta`数据中获得的对象通过将术语与`stops`元素匹配来过滤其包含的术语，使用`contains`.

要使用更通用的表达式进行过滤，只需实现`TermStopListFilter`使用正则表达式的新版本就足够了，例如

```
import scala.util.matching.Regex

/**
 * Filters out terms that matches the supplied regular expression.
 */
case class TermStopListFilter[ID:Manifest](regex: String)
extends Stage[LazyIterable[Item[ID,Iterable[String]]],LazyIterable[Item[ID,Iterable[String]]]] {
  override def apply(parcel : Parcel[LazyIterable[Item[ID,Iterable[String]]]]) : Parcel[LazyIterable[Item[ID,Iterable[String]]]] = {

    //extract the pattern from the regular expression string
    val pat = regex.r.pattern

    val newMeta = {
      if (parcel.meta.contains[TermCounts]) {
        parcel.meta + parcel.meta[TermCounts].filterIndex(term => pat.matcher(term).matches) // something should be added here??
      } else {
        parcel.meta + this; // is this still correct?
      }
    }

    Parcel(parcel.history + this, newMeta,
      parcel.data.map((doc : Item[ID,Iterable[String]]) => (doc.map(_.filter(term => pat.matcher(term).matches)))));
  }

  override def toString =
    "TermStopListFilter("+regex+")";
} 
```

# java - 在多节点集群中运行 Hadoop 不起作用

> ID：14263504
> 
> 赞同：0
> 
> 时间：2013-01-10T17:16:39.643
> 
> 标签：java, hadoop

我安装了 HDFS 并在 3 台计算机上工作。然后我尝试向现有集群添加 5 台以上的 PC，但这样做之后。当我尝试在主节点上启动 hadoop 时，我收到了下面提到的这个错误。

```
[hduser@dellnode1 ~]$ start-all.sh
starting namenode, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-namenode-dellnode1.pictlibrary.out
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: /usr/local/hadoop/bin/../logs/hadoop-hduser-namenode-dellnode1.pictlibrary.log (Permission denied)
    at java.io.FileOutputStream.openAppend(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:164)
    at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:216)
    at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)
dellnode3.pictlibrary: datanode running as process 4856\. Stop it first.
dellnode1.pictlibrary: starting datanode, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-datanode-dellnode1.pictlibrary.out
dellnode2.pictlibrary: starting datanode, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-datanode-dellnode2.pictlibrary.out
dellnode1.pictlibrary: starting secondarynamenode, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-secondarynamenode-dellnode1.pictlibrary.out
starting jobtracker, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-jobtracker-dellnode1.pictlibrary.out
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: /usr/local/hadoop/bin/../logs/hadoop-hduser-jobtracker-dellnode1.pictlibrary.log (Permission denied)
    at java.io.FileOutputStream.openAppend(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:290)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:164)
    at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:216)
    at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:257)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:133)
dellnode3.pictlibrary: starting tasktracker, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-tasktracker-dellnode3.pictlibrary.out
dellnode1.pictlibrary: starting tasktracker, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-tasktracker-dellnode1.pictlibrary.out
dellnode2.pictlibrary: starting tasktracker, logging to /usr/local/hadoop/bin/../logs/hadoop-hduser-tasktracker-dellnode2.pictlibrary.out 
```

所有电脑都运行 Fedora 17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:39:47.457

我会用类似的东西手动创建日志文件

```
sudo touch  /usr/local/hadoop/bin/logs/hadoop-hduser-namenode-dellnode1.pictlibrary.log 
```

如果你的路径是

```
/usr/local/hadoop/bin/../logs/hadoop-hduser-namenode-dellnode1.pictlibrary.log 
```

正如我在第一行中写的那样更好地修复。

然后更改文件的权限：

```
sudo chmod 750 /usr/local/hadoop/bin/logs/hadoop-hduser-namenode-dellnode1.pictlibrary.log 
```

然后再试一次。这次应该可以工作了;-)

# javascript - sqlite closest number search

> ID：14263509
> 
> 赞同：0
> 
> 时间：2013-01-10T17:16:56.593
> 
> 标签：javascript, sqlite

Restricted to only using javascript and sqlite..

This option uses a custom sqlite function but unfortunately i cannot use this as I am using appcelerators titanium which only uses javascript...

I have a table of towns and cities with the following format:

```
id
place_name  
county  
country 
grid_reference  
easting 
northing    
latitude    
longitude   
postcode_area   
type 
```

I know this question has been half asked in lots of different ways but I can't really find a straight forward answer.

If i had a set of coordinates such as:

```
latitude : 51.452295,
longitude : -0.678864 
```

How would i be able to find the closet place_name from the table above based on the provided longitude latitude?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:50:52.967

这几乎回答了这个问题 - 这是不可能的。

[http://developer.appcelerator.com/question/146721/finding-closest-result-based-on-long-lat](http://developer.appcelerator.com/question/146721/finding-closest-result-based-on-long-lat)

# mysql - NameError: 无法加载 Java 类 com.mysql.jdbc.Driver

> ID：14263514
> 
> 赞同：4
> 
> 时间：2013-01-10T17:17:18.987
> 
> 标签：mysql, jdbc, jruby

我正在使用 JRuby 1.7.2 和 DataMapper，但我遇到了一个我找不到答案的错误。

我只是在测试 DataMapper 和 MySQL 5.5，看看当我围绕它构建时它是否能正常运行。这是我正在测试的文件：

```
require "data_mapper"
require "keys"

DataMapper.setup(:default, "mysql://#{$user}:#{$pass}@localhost/test_db") 
```

当我运行它时，我得到了错误：

```
NameError: cannot load Java class com.mysql.jdbc.Driver 
```

它指向 DataMapper.setup 行。

我的 Gemfile 应该没问题：

```
source :rubygems

gem "sinatra"
gem "trinidad"
gem "data_mapper"

# do a `sudo apt-get install libmysqlclient-dev` first
gem "dm-mysql-adapter"
gem "jdbc-mysql" 
```

有什么我想念的吗？我已经在本地使用用户/密码设置了 MySQL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T18:21:24.680

这是运行`JDBC`客户端时的常见错误`MySQL`。你需要确保你`mysql-connector-java-bin.jar`在类路径上。你可以从[这里](http://dev.mysql.com/downloads/connector/j/)下载。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-02T06:31:04.607

I'm using Rails 3.2.9 and to solve the problem I added this to my application.rb

```
if defined? JRUBY_VERSION
    require 'jdbc/mysql'
    Jdbc::MySQL.load_driver
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T08:31:41.040

actually, the correct answer is to work-around an incompatibility between **5.1.13** and **5.1.22** !

**jdbc-mysql** gem already contains the mysql-connector.jar it just ain't auto-loading anymore :

[https://github.com/jruby/activerecord-jdbc-adapter/tree/master/jdbc-mysql](https://github.com/jruby/activerecord-jdbc-adapter/tree/master/jdbc-mysql) (read the README)

you can also force the driver to auto-load using a Java system property e.g. from a cmd line :

`jruby -J-Darjdbc.mysql.autoload=true -S rake ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-03T21:16:38.943

I had the same error when trying to use a mysql database from jruby/rails4\. In my case this line was missing from ./Gemfile:

```
gem 'jdbc-mysql' 
```

# regex - 在 if-elsif-else-end 中使用正则表达式

> ID：14263515
> 
> 赞同：4
> 
> 时间：2013-01-10T17:17:19.183
> 
> 标签：regex, regex-lookarounds

我正在尝试使用 REGEX 来做一个`if-then-elsif-then-else-then-end` 例子：

```
s = "foobar123"
if end of s is 3
  then return "foo"
elsif end of s is 2 
  then return "bar"
else
  then return "foobar"
end 
```

我`(?(?=condition)(then1|then2|then3)|(else1|else2|else3))`从[http://www.regular-expressions.info/conditional.html](http://www.regular-expressions.info/conditional.html)找到但不知道如何使它在这种情况下工作。这是我的正则表达式`if-then-else-then-end`：

```
/(?=.*[3])(foo)|(bar)/ 
```

*   如果字符串以 3 结尾
*   然后返回 foo
*   否则返回栏

我认为可以在父阶段的 else 中编写另一个 if-else 但不能:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:25:21.230

你在使用交替的正确轨道上，但你不需要前瞻。

```
/.*(foo).*3$|.*(bar).*2$|.*(foobar).*/ 
```

你将不得不返回：

```
$1$2$3 
```

我有所有的`.*`s 因为我假设你正在使用`foobar`作为占位符。

# ruby-on-rails - 尝试推送到 git 存储库的问题

> ID：14263518
> 
> 赞同：1
> 
> 时间：2013-01-10T17:17:25.270
> 
> 标签：ruby-on-rails, git

将应用推送到 github 时出现问题。这是我在命令行中输入的。希望这只是一个小问题，我可以解决谢谢。

```
git init
git add README.md
git commit -m "first commit"
git remote add origin git@github.com:travi5567/first_app.git
git push -u origin master 
```

这是我得到的错误：

```
Traviss-MacBook-Pro:sample_app Travis$ git push -u origin master
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:19:22.413

GitHub 使用 SSH 密钥来配置对 git 存储库的访问。如果您是所有者，您可以推送到 repo，但您需要告诉 git 您的 SSH 密钥，以便他们首先知道您是谁。

这一切都在 GitHub 网站上进行了解释 - [https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:33:29.647

如果您不知道如何使用 SSH 密钥或者不想使用，您也可以`https`像这样使用遥控器：

```
git remote add origin https://travis5567@github.com/travis5567/first_app.git
git push origin master
Password for travis5567: <enter your password>
# regular output from a git push 
```

# php - Change colour of rows for highest value in table

> ID：14263519
> 
> 赞同：0
> 
> 时间：2013-01-10T17:17:30.220
> 
> 标签：php, html

I have created a simple html table within PHP. Here is my code:

```
 <div id="wrapper">
        <div class="chart">
            <h2>Files Uploaded to Knowledge Base</h2>
            <table id="data-table" border="1" cellpadding="10" cellspacing="0">

            <tr id=header>
                    <td>Users</td>
                    <td id=center>Project Files</td>
                    <td id=center>Process Files</td>
                    <td id=center>System Files</td>
                    <td id=center>Total Files</td>
            </tr>   

                        <?php

                        $di = new RecursiveDirectoryIterator('upload/project/');
                        foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                        $pos = 15;
                        $file = substr("$filename", +$pos); 

                        $lenght = strlen($file);
                        $pos = strpos($file, "/");
                        $file = substr("$file",0,$pos);
                        if($file1 != '.DS_Store'){

                            $serverfiles = mysql_query("SELECT uploader FROM Project WHERE location = '$file'");

                            while($row = mysql_fetch_array($serverfiles)) {
                                $occurance1 = $row['uploader'];
                                $array1[] = $occurance1; 
                                }
                            }                           
                        }

                        $di = new RecursiveDirectoryIterator('upload/process/');
                        foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                        $pos = 15;
                        $file = substr("$filename", +$pos);                         
                        $lenght = strlen($file);
                        $pos = strpos($file, "/");
                        $file = substr("$file",0,$pos);

                        if($file != '.DS_Store'){

                            $serverfiles = mysql_query("SELECT uploader FROM Process WHERE processlocation = '$file'");

                            while($row = mysql_fetch_array($serverfiles)) {
                                $occurance2 = $row['uploader'];
                                $array2[] = $occurance2; 
                                }
                            }                           
                        }

                        $di = new RecursiveDirectoryIterator('upload/system/');
                        foreach (new RecursiveIteratorIterator($di) as $filename => $file) {

                        $pos = 14;
                        $file = substr("$filename", +$pos);                         
                        $lenght = strlen($file);
                        $pos = strpos($file, "/");
                        $file = substr("$file",0,$pos);
                        if($file != '.DS_Store'){

                            $serverfiles = mysql_query("SELECT uploader FROM System WHERE location = '$file'");

                            while($row = mysql_fetch_array($serverfiles)) {
                                $occurance3 = $row['uploader'];
                                $array3[] = $occurance3; 
                                }
                            }                           
                        }

                        $table_rows = array();
                        $counter = 0;
                        $uploader = mysql_query("Select username from members");
                        while($Load = mysql_fetch_array($uploader)){
                        $value = $Load['username'];

                        $tmp = array_count_values($array1);
                        $cnt = $tmp[$value];

                        $tmp2 = array_count_values($array2);
                        $cnt2 = $tmp2[$value];

                        $tmp3 = array_count_values($array3);
                        $cnt3 = $tmp3[$value];

                        $total = $cnt + $cnt2 + $cnt3;

                        //putting the values into array
                        $counter++;
                        $table_rows[$counter] = array();
                        $table_rows[$counter]['username'] = $value;
                        $table_rows[$counter]['project'] = $cnt;
                        $table_rows[$counter]['process'] = $cnt2;
                        $table_rows[$counter]['system'] = $cnt3;
                        $table_rows[$counter]['total'] = $total;
                        }

                        //function to sort the highest total value
                        function cmp_rows($a,$b) {
                        if ($a['total'] == $b['total']) {
                        return 0;
                        }
                        return ($a['total'] > $b['total']) ? -1 : 1;
                        }

                        usort($table_rows, 'cmp_rows');

                        //loop that prints values
                        foreach($table_rows as $row) {
                        echo "<tr>";
                        echo "<td>{$row['username']}</td>";
                        echo"<td id=center>{$row['project']}</td>";
                        echo"<td id=center>{$row['process']}</td>";
                        echo "<td id=center>{$row['system']}</td>";
                        echo "<td id=center>{$row['total']}</td>";
                        }

                        ?>

            </table>

    </div>

    </body></html> 
```

The users are populated from a database table. The file figures are populated by reading and counting the amount of files in the directory. The table is sorted by highest first. I would like the first, second and third rows to be a different colour than the rest.

I do not know how to do this. Can someone please guide me in the right direction?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:25:57.207

在 foreach 中添加一个键，然后在输出表行时创建一个简单的 if/else 语句：

```
> foreach( $table_rows as $key => $row ) {
>     if ( $key < 3 ) { 
>       echo "<tr style="background color here">; 
>     } 
>     else { 
>       echo "<tr>";
>     }
>     //Rest of Code Here } 
```

# android - Android getSupportedVideoSizes 总是返回 null

> ID：14263521
> 
> 赞同：8
> 
> 时间：2013-01-10T17:17:38.217
> 
> 标签：android, mediarecorder, android-mediarecorder

`MediaRecorder`我需要一些关于 Android 课程的帮助。

我尝试使用`getSupportedVideoSizes`来获取支持的视频大小列表，但它总是返回 null。

在测试中，以下设备`null`在`getSupportedVideoSizes`被查询时返回：

*   Galaxy Nexus (Android 4.2)
*   HTC One Mini (Android 4.4.2)
*   HTCEVOV4G (Android 4.0.3)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-02-25T17:46:00.210

[其文档`Camera.getSupportedVideoSizes()`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedVideoSizes())内容为，

> **如果相机有单独的预览和视频输出，则返回**
> Size 对象的列表；否则，返回 null。

不完全清楚。但是，这意味着如果`Camera.getSupportedVideoSizes()`返回null，那么相机支持的预览尺寸和视频尺寸是一样的；在这种情况下，要获取支持的视频大小列表，请使用`Camera.getSupportedPreviewSizes()`.

示例代码：

```
public List<Size> getSupportedVideoSizes(Camera camera) {
    if (camera.getParameters().getSupportedVideoSizes() != null) {
        return camera.getParameters().getSupportedVideoSizes();
    } else {
        // Video sizes may be null, which indicates that all the supported 
        // preview sizes are supported for video recording.
        return camera.getParameters().getSupportedPreviewSizes();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T09:59:52.790

或者只是使用

```
mediarecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH)); 
```

自动设置最佳分辨率。

# javascript - js语法的区别

> ID：14263528
> 
> 赞同：2
> 
> 时间：2013-01-10T17:17:53.700
> 
> 标签：javascript, jquery, d3.js

语法上有什么区别

```
.append("svg") 
```

对比

```
.append("svg:svg") 
```

有什么优点和缺点，它们意味着什么？

我正在使用 jQuery 和 D3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:21:51.327

两者都执行相同的功能*附加*

在 XHTML 代码中，可以使用名称空间来区分网页中包含的其他基于 XML 的语言。这里，命名空间“svg”在标签“svg”之前使用。

```
namespace:tagname 
```

看[这里](https://stackoverflow.com/questions/10583400/what-is-the-meaning-of-svgsvg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:20:04.147

这不是 Javascript 语法的区别。一个是附加一个 svg 元素，另一个是附加一个命名空间的 svg 元素。

# ruby - 如何使用 XPath 访问在 JavaScript 中呈现的 HTML 元素？

> ID：14263532
> 
> 赞同：1
> 
> 时间：2013-01-10T17:18:13.047
> 
> 标签：ruby, xpath, nokogiri

如何`<td>`使用 XPath 和 Nokogiri 获得具有特定类名的名称？表是嵌套的，其中一些没有 ID 或类，所以我不能嵌套这样的东西：

```
//table/tbody/tr/td 
```

这是我到目前为止所拥有的：

```
doc = Nokogiri::HTML(open("http://www.goalzz.com/default.aspx?c=8358"))
  doc.xpath('//td[@class="m_g"]').each do |node|
  pp node.to_s
end 
```

有任何想法吗？`<td>`具有该类名的 s很少，我想获得所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:46:52.570

这些`td`s 上的类属性是否完全是“m_g”，或者它们在一个 s 上是否有多个类`td`？如果是后者，这个 XPath 可能会起作用：

```
//td[contains(@class, "m_g")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:30:10.860

使用 gem "capybara-webkit" 是一种在完整的 javascript 渲染视图中操作该网站的可行方法。

这是一个 capybara-webkit 脚本可能看起来的示例。

```
#!/usr/bin/env ruby
require "rubygems"
require "pp"
require "bundler/setup"
require "capybara"
require "capybara/dsl"
require "capybara-webkit"

Capybara.run_server = false
Capybara.current_driver = :webkit
Capybara.app_host = "http://www.goalzz.com/"

module Test
  class Goalzz
    include Capybara::DSL

    def get_results
      visit('/default.aspx?c=8358')
      all(:xpath, '//td[@class="m_g"]').each { |node| pp node.to_s }

    end
  end
end

spider = Test::Goalzz.new
spider.get_results 
```

在这种情况下（由于页面是动态创建的）找到示例 xpath 所需的是一个功能齐全的 javascript webdriving 引擎。

# javascript - Dojo 1.6 hitch() scope of "this" within require statement

> ID：14263533
> 
> 赞同：1
> 
> 时间：2013-01-10T17:18:13.967
> 
> 标签：javascript, dojo, scope, require, execution

I got a weird problem with my dojo app. It's simply about the scope and hitching the object itself. The following code

```
function(data) {
        console.info(this); // [I]
        var fun = require(["dojo/Deferred"], function(Deferred) {
            console.info(this); // [II]
        });

        lang.hitch(this, fun());
    } 
```

creates this output

```
Object{...} // from [I]
Window index.php [II] 
```

the desired output has to be 2 times the Object. I thought I understood the hitch-mechanism, but by invoking lang.hitch(this, fun()); it seems to me, that "this" is the object which is printed by [I].

I hope you guys can help!

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:30:38.330

您要做的是限制回调函数的范围：

```
function(data) {
        console.info(this); // [I]
        var fun = require(["dojo/Deferred"], lang.hitch(this,function(Deferred) {
            console.info(this); // [II]
        }));
} 
```

而不是在被评估后挂钩到 require 函数的返回结果`lang.hitch(this, fun());`

# java - Difference between RuntimeException and Exception with @ApplicationException(rollback=true) in EJB container

> ID：14263534
> 
> 赞同：5
> 
> 时间：2013-01-10T17:18:15.107
> 
> 标签：java, ejb, runtimeexception

I call `account` EJB method in JSF bean like that :

```
try{
   account.someFunction(...);
}catch(SimRuntimeException e){
   logger.log(Level.FATAL, "SimRuntimeException catched !");
}catch(SimNotRuntimeException e){
   logger.log(Level.FATAL, "SimNotRuntimeException catched !");
}catch(Exception e){
   logger.log(Level.FATAL, "Exception catched !");
} 
```

My Exceptions :

```
public class SimRuntimeException extends RuntimeException {

   public SimRuntimeException() {
      super();
   }

}

@ApplicationException(rollback=true)
public class SimNotRuntimeException extends Exception {

   public SimNotRuntimeException() {
      super();  
   }

} 
```

*   when `account.someFunction(...);` throws `SimRuntimeException` I fall into `Exception` block because my `SimRuntimeException` is wrapped into `EJBException` probably by EJB container.
*   when `account.someFunction(...);` throws `SimNotRuntimeException` I fall as expected into `SimNotRuntimeException`

So, what is concretely the difference between `Exception` with `@ApplicationException(rollback=true)` and `RuntimeException` please ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-20T19:45:53.100

[Pal 的博客](http://palkonyves.blogspot.de/2013/04/exceptions-and-transactions-in-ejb.html)指出：

> EJB 在应用程序异常和系统异常方面有所不同。应用程序异常是您定义、抛出并且您知道的东西。默认情况下，应用程序异常不会导致回滚，除非您以这种方式定义它（我认为这是推荐的）。方法签名中提到的每个已检查异常以及使用 @ApplicationException 注释的任何已检查或未检查异常都是应用程序异常。
> 
> 系统异常发生在您无法控制的情况下，它们是未经检查的异常。它们总是导致回滚。好的做法是，如果您在方法中将检查的异常（这是无法避免的）包装到 EJBException 中，例如 ParseException。

# windows-phone - 处理免费和付费版本的 Windows Phone 8 应用程序？

> ID：14263543
> 
> 赞同：-1
> 
> 时间：2013-01-10T17:18:39.647
> 
> 标签：windows-phone, windows-phone-8

我目前正在完成我的第一个 Windows Phone 8 应用程序。现在，我正在添加广告，并计划在商店中免费出售。不过，我想知道，最好的方法是什么，还包括应用程序的无广告付费版本？

在商店中拥有两个版本，还是拥有一个包含广告的“试用”版本的付费版本更好？

对于任一选项，是否有人知道为每个版本使用相同代码库的教程或好方法？例如，对两个版本使用相同的代码，但让代码以编程方式确定（基于该版本）是否包含广告？

**解决方案：**

我使用下面@DVD 的答案来使用应用内购买系统。我在这里找到了一个关于如何做到这一点的优秀教程（包括在模拟器中测试）：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689 (v=vs.105).aspx #IAP_MockLibrary](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689(v=vs.105).aspx#IAP_MockLibrary)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:37:50.197

对于 windows phone 8，我认为最好的解决方案是使用应用内购买来删除广告。

如果您使用应用程序的两个不同版本，您将用户、评论和下载量与 2 个应用程序分开，请记住评论和下载量用于计算应用程序排名。

如果你也为 WP7 市场发布，我只推荐这个系统，因为这个系统不支持应用程序购买。

如果你想使用这个系统，一个可能的解决方案是使用预编译语句。

```
#if PAID_VERSION
(paid version code)
#else
(free version code)
#endif 
```

创建一个新的解决方案配置，您可以复制发布选项并为其命名一个新名称，之后您只需在构建选项卡中的项目属性上添加符号。在此之后，您选择要部署的女巫解决方案配置并完成。

# vim - 如何合并vim的完成候选？

> ID：14263547
> 
> 赞同：2
> 
> 时间：2013-01-10T17:18:50.587
> 
> 标签：vim, autocomplete

我经常依赖`omni-completion`编辑源代码，所以我当前`.vimrc`包含以下设置以快速访问目标候选人：

```
inoremap <C-f> <C-x><C-o> 
```

`ins-completion`现在我发现除了 s 之外还有很多种s`omni-completion`并且对同时使用s`tags`和`file names`完成也很感兴趣。

```
1\. Whole lines                                          i_CTRL-X_CTRL-L
2\. keywords in the current file                         i_CTRL-X_CTRL-N
3\. keywords in 'dictionary'                             i_CTRL-X_CTRL-K
4\. keywords in 'thesaurus', thesaurus-style             i_CTRL-X_CTRL-T
5\. keywords in the current and included files           i_CTRL-X_CTRL-I
6\. tags                                                 i_CTRL-X_CTRL-]
7\. file names                                           i_CTRL-X_CTRL-F
8\. definitions or macros                                i_CTRL-X_CTRL-D
9\. Vim command-line                                     i_CTRL-X_CTRL-V
10\. User defined completion                             i_CTRL-X_CTRL-U
11\. omni completion                                     i_CTRL-X_CTRL-O
12\. Spelling suggestions                                i_CTRL-X_s
13\. keywords in 'complete'                              i_CTRL-N*emphasized text* 
```

问题是，我如何在`ins-complete-menu`单个命令上列出来自这些特定完成源的所有候选人，`<C-f>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:00:24.343

您应该检查插件[neocomplcache](https://github.com/Shougo/neocomplcache)。它可以实现这一点，但设置可能不是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:29:03.713

使用默认补全（CTRL-N / CTRL-P）；可以通过`'complete'`选项配置其完成源。不幸的是，从您的列表中，只有标签（不是文件名）可以（并且默认情况下）包含在其中。（但你事先不知道你想要文件完成吗？我特别喜欢许多不同的完成命令，因为它们缩小了结果列表，对我来说，这比不必考虑调用哪个完成更有价值。）

如果你真的想要一个包罗万象的补全，你必须自己实现它作为用户补全，并且你必须重新实现所有内置源，因为目前没有办法以编程方式获取它们.

# jquery - 使用 Ajax 检查表单

> ID：14263548
> 
> 赞同：0
> 
> 时间：2013-01-10T17:18:53.877
> 
> 标签：jquery, ajax, forms

我制作了一些 jQuery Ajax 代码来检查数据库中是否已经存在电子邮件，我无法让它正常工作 我的 Html 代码：

```
<form name="emailForm" id="emailForm" method="post" action="signin.php">
    <input type="email" name="email" id="email" required="required" />
    <input type="submit" value="Get Started Now!" />
</form> 
```

jQuery代码：

```
$(function(){
    $("#emailForm").submit(function(){
        $.ajax({
            type:POST,
            url:"signin.php",
            data: "email="+$("#email").val(),//{email:$("#email").val()},
            success: function(msg){
                if(msg == '1'){
                    alert("Already exists.");
                }else{
                    alert("C'est cool, Hak la suite");
                }
            }

        });
        return false;
    });
}); 
```

signin.php 代码

```
function check_email($email){
    include 'bdd.php';
    $query = "SELECT * FROM users WHERE email = '$email'";
    $resultat = mysqli_query($link,$query);
    $msg = mysqli_num_rows($resultat);
    return $msg;
}
if(isset($_POST['email'])){
    if(check_email($_POST['email']) == 1){
        $msg = "1";
    }else{
        $msg = "0";
    }
}
echo $msg; 
```

它转到 signin.php 并打印 1 或 0，任何想法如何使 Ajax 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:27:12.770

试试这个，看看是否有帮助：

```
 $(function () {
  $("#emailForm").submit(function (e) {
    $.ajax({
      type: 'POST', // in quotes
      url: "signin.php",
      data: {data:$(this).serialize()}, // serialize the form
      success: function (msg) {
        if (msg == '1') {
          alert("Already exists.");
        } else {
          alert("C'est cool, Hak la suite");
        }
      }
    });
    e.preventDefault();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:24:18.213

您是否尝试使用以下代码

```
$(function(){
    $("#emailForm").submit(function(){
        $.ajax({
            type:POST,
            url:"signin.php",
            data: {"email":$("#email").val()},
            success: function(msg){
                if(msg == '1'){
                    alert("Already exists.");
                }else{
                    alert("C'est cool, Hak la suite");
                }
            }

        });
        return false;
    });
}); 
```

# objective-c - Objective-C：EXC_BAD_ACCESS 从文件路径读取 NSData

> ID：14263549
> 
> 赞同：0
> 
> 时间：2013-01-10T17:19:00.663
> 
> 标签：objective-c, io

我正在尝试`NSData`从文件路径中读取，并最终取消归档数据。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docs = [paths objectAtIndex:0];
[[NSFileManager defaultManager] createDirectoryAtPath:[docs stringByAppendingString:@"/dynSplash"]
                          withIntermediateDirectories:NO
                                           attributes:nil
                                                error:nil];
NSString *dynamicSplashFile = [docs stringByAppendingString:@"/dynSplash/dynamicSplash.data"];
DynamicSplash *splash;
if([[NSFileManager defaultManager] fileExistsAtPath:dynamicSplashFile]) {
    NSLog(@"Dynamic splash exists");
    NSData *data = [NSData dataWithContentsOfFile:dynamicSplashFile];
    splash = [NSKeyedUnarchiver unarchiveObjectWithData:data];
} 
```

问题出现在引发错误的行`[NSData dataWithContentsOfFile:dynamicSplashFile]`上。`EXC_BAD_ACCESS`

我该如何调试呢？

# c# - 不阻塞地记录到文件

> ID：14263559
> 
> 赞同：0
> 
> 时间：2013-01-10T17:19:23.913
> 
> 标签：c#, .net

我正在寻找一种在不阻塞调用线程的情况下记录到文件的方法。仍然必须按顺序执行所有日志调用。

我在想类似的东西

```
void Log(string msg)
{
    ThreadStart ts = new ThreadStart ()
    {

        System.IO.File.AppendAllText("log.txt", msg);
    };
    new Thread(ts).Start();
} 
```

但这能保证按顺序记录所有内容吗？

Log 方法也应该可以随时从任何线程调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:21:24.243

> 但这能保证按顺序记录所有内容吗？

这将按随机顺序登录。`Access Denied issue`由于同时写入同一文件，有时也会创建。

更好的方法是保留日志的内部缓冲区，并在计时器中单独的单线程中写入。如果应用程序崩溃，这将丢失内存中的日志（未写入文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:22:04.587

我们这个：

[http://msdn.microsoft.com/en-us/library/dd267265.aspx](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

然后按顺序推入队列。让线程从并发队列中拉出。这将保留您的订单。

当您登录时，不要为每个日志启动一个新线程。只有一个“记录”线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:31:20.383

如果您不是为了学习而这样做；您可能需要考虑利用现有的日志框架。滚动你自己的时候有很多潜在的“陷阱”，并且（在大多数情况下）你想要的日志已经写好了。

我还没有全部使用它们，但我可以说我从来没有遇到过 log4net 没有做我需要的事情（而且比我写的更好）的情况。

[https://stackoverflow.com/questions/126540/what-is-your-net-logging-framework-of-choice](https://stackoverflow.com/questions/126540/what-is-your-net-logging-framework-of-choice)

# python - dataframe.to_html 不创建超链接

> ID：14263560
> 
> 赞同：1
> 
> 时间：2013-01-10T17:19:25.203
> 
> 标签：python, pandas

当其中一列的字符串内容与 URI 匹配时，来自 Dataframe.to_html() 的 HTML 文件不会创建超链接。

有没有办法从 DataFrame 生成 html 文档中的超链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-08-04T13:09:03.273

设置`escape=False`允许您输入自定义 html 并创建超链接，如下所示。

```
df = pd.DataFrame(data)
df['url'] = '<a href=' + df['url'] + '><div>' + df['name'] + '</div></a>'
df = df.to_html(escape=False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:24:09.817

我不这么认为。我认为`HTMLFormatter`使用 by`DataFrame.to_html`有助于`DataFrame`在 IPython HTML Notebooks 中漂亮地呈现 a。

该方法不解析您的每个元素`DataFrame`，即识别要写入的 URI 模式`<a href="URI">Content</a>`或其他内容。

我不认为（1）它是计划好的，（2）这不是这种方法的目的。也许您可以在[GitHub pandas 问题页面](https://github.com/pydata/pandas/issues)中添加一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T04:52:05.413

取决于链接的动态程度。我目前正在处理同样的问题，并试图用 jQuery 解决它：

```
$(document).ready(function(){
  $('thead th').each(function(){
    $(this).html('<a href="{% url "cat_view" %}">' + $(this).html() + '</a>');
  });
  $('tbody tr th').each(function(){
    $(this).html('<a href="{% url "date_view" %}">' + $(this).html() + '</a>')
  });
}); 
```

这会生成标题链接，但如果您需要的话，您可以在 $('tobdy tr td') 上使用它。我目前有用于 href 的 django url-template 标签，但您基本上可以在其中放置任何内容。一旦它们变得动态，我仍在努力正确构建href（例如{% url 'cat_view' cat=category.pk %}）

# c# - 如何在 NotifyCollectionChangedEventArgs 中获取更改的项目？

> ID：14263565
> 
> 赞同：2
> 
> 时间：2013-01-10T17:19:36.763
> 
> 标签：c#, observablecollection, inotifypropertychanged, inotifycollectionchanged

我制作了一个 ObservableCollection<T> ，每次更改集合中对象的属性 (T: INPC) 时都会触发 CollectionChangedEvent。我想知道 T 的哪个属性触发了 CollectionChangedEvent，所以我尝试了以下方法：

```
 void item_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset, e));
    } 
```

我将 PropertyChangedEventArgs e 传递给 NotifyCollectionChangedEventArgs 的构造函数。

根据 Intellisense，第二个构造函数采用两个参数：一个 NotifyCollectionChangedAction 和一个名为“changedObject”的对象，该对象被描述为“受更改影响的项目”。

所以我认为我可以在 CollectionChangedEventHandler 中获取该对象并检查 PropertyName，但是哦！惊喜！NotifyCollectionChangedEventArgs 没有公开“ChangedObject”属性（我可以看到 Action、NewItems、OldItems、NewStartingIndex、OldStartingIndex）。

关于如何实现这一目标的任何想法？顺便说一句，用您以后无法访问的对象构造 NotifyCollectionChangedEventArgs 有什么用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:28:04.877

当您使用`NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction, object)`构造函数时，`changedItem`将在`NewItems`集合中（如果您指定`NotifyCollectionChangedAction.Add`）或`OldItems`集合中（如果您指定`NotifyCollectionChangedAction.Remove`）。

如果您指定`NotifyCollectionChangedAction.Reset`，则`changedItem`参数必须是`null`，否则您将得到一个`ArgumentException`.

如果您指定任何其他`NotifyCollectionChangedAction`值，您还将获得一个`ArgumentException`.

# android - 水平自动滚动 EditText（不可聚焦）

> ID：14263567
> 
> 赞同：0
> 
> 时间：2013-01-10T17:19:41.080
> 
> 标签：android

有带有选项的编辑文本（或文本视图，我认为这并不重要）：*focusable="false", focusableInTouchMode="false"*。如何确保当您向其中添加不适合整体的文本（以编程方式逐个字符添加）时，文本会向左滚动？即在文本末尾可见，适合编辑文本？

# javascript - Google Maps - Store Locator 创建的标记上的事件侦听器

> ID：14263570
> 
> 赞同：0
> 
> 时间：2013-01-10T17:19:58.343
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用这个示例：[http ://storelocator.googlecode.com/git/examples/panel.html](http://storelocator.googlecode.com/git/examples/panel.html)

我希望能够为这样的所有标记添加侦听器，但我不知道如何引用它们，因为它们是由 DataFeed 中的 Store Locator 创建的。

```
google.maps.event.addListener(marker, 'click', //myCode); 
```

这是示例中的确切面板代码：

```
google.maps.event.addDomListener(window, 'load', function() {
  var map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(-28, 135),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var panelDiv = document.getElementById('panel');

  var data = new MedicareDataSource;

  var view = new storeLocator.View(map, data, {
    geolocation: false,
    features: data.getFeatures()
  });

  new storeLocator.Panel(panelDiv, {
    view: view
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:05:13.490

请看[这个例子](http://storelocator.googlecode.com/git/examples/custom.html)。如果您只想自定义信息窗口内容，只需使用该部分即可。

```
// Store locator with customisations
// - custom marker
// - custom info window (using Info Bubble)
// - custom info window content (+ store hours)

var ICON = new google.maps.MarkerImage('medicare.png', null, null,
    new google.maps.Point(14, 13));

var SHADOW = new google.maps.MarkerImage('medicare-shadow.png', null, null,
    new google.maps.Point(14, 13));

google.maps.event.addDomListener(window, 'load', function() {
  var map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(-28, 135),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var panelDiv = document.getElementById('panel');

  var data = new MedicareDataSource;

  var view = new storeLocator.View(map, data, {
    geolocation: false,
    features: data.getFeatures()
  });

  view.createMarker = function(store) {
    var markerOptions = {
      position: store.getLocation(),
      icon: ICON,
      shadow: SHADOW,
      title: store.getDetails().title
    };
    return new google.maps.Marker(markerOptions);
  }

  var infoBubble = new InfoBubble;
  view.getInfoWindow = function(store) {
    if (!store) {
      return infoBubble;
    }

    var details = store.getDetails();

    var html = ['<div class="store"><div class="title">', details.title,
      '</div><div class="address">', details.address, '</div>',
      '<div class="hours misc">', details.hours, '</div></div>'].join('');

    infoBubble.setContent($(html)[0]);
    return infoBubble;
  };

  new storeLocator.Panel(panelDiv, {
    view: view
  });
}); 
```

**甚至做这样的事情：**

```
view.createMarker = function(store) {
  var markerOptions = {
    position: store.getLocation(),
    title: store.getDetails().title
  };
  var marker = new google.maps.Marker(markerOptions);
  google.maps.event.addListener(marker, "click", function() {
      alert("my code");
  });
  return marker;
} 
```

[工作示例](http://www.geocodezip.com/v3_GoogleEx_store-locator_panelB.html)

# wpf - WPF - DataGrid - 通过 DataTrigger 隐藏 DataGridCeckBoxColumn

> ID：14263572
> 
> 赞同：1
> 
> 时间：2013-01-10T17:20:00.747
> 
> 标签：wpf, datagrid, datatrigger

我在 wpf 中有一个具有不同列的 DataGrid。我想通过数据触发器更改一个显式列的属性“可见性”，但无法访问“样式”属性。

如何折叠或隐藏孔列？

```
<DataGrid.Columns>
    <DataGridCheckBoxColumn Binding="{Binding IsChanged, Mode=OneWay}"
                            Header="Changed" 
                            CanUserSort="False">
    </DataGridCheckBoxColumn>

    <!--more columns-->
</DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:20:56.983

`DataGridRow`并且`DataGridCell`有样式，`DataGridColumn`没有。我猜这是因为行和单元格是UI中*显示的唯一内容。*列仅在`DataGrid`内部用于跟踪其行和单元格及其内容。

方便的是，列确实有一个`Visibility`属性，您可以在每个特定列上绑定它：

```
<DataGridCheckBoxColumn Visibility="{Binding ...}"
                        ... 
```

# c# - 如何在 WPF 的注册应用程序中生成文档？

> ID：14263573
> 
> 赞同：0
> 
> 时间：2013-01-10T17:20:02.630
> 
> 标签：c#, wpf

我有一个 C#/WPF 应用程序，它向用户显示各种文件名列表。有些是图像，有些是视频，有些可能是 Word 文档、PDF 文件、CAD 文件或其他任何文件。

列表中的哪些文件完全在用户的控制之下。

我需要做的是允许用户选择其中一个文件名，单击按钮，然后为该类型的文件生成已注册的应用程序，加载启动时选择的文件名。

关于从哪里开始的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:22:35.507

假设文件确实存在，[Process.Start](http://msdn.microsoft.com/en-gb/library/53ezey2s.aspx)将在关联的应用程序中打开文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:27:22.943

```
// should test for file
Process nativeProcess = new Process();
nativeProcess.StartInfo.FileName = filePath;
try
{
    nativeProcess.Start();
}
catch (Exception Ex)
{
    // if user cancels on first screen will throw exception in some situations  
    Debug.WriteLine(Ex.Message);
} 
```

# windows - 如何将 Windows 命令提示符中发出的命令的 Perl 脚本输出重定向到文本文件

> ID：14263577
> 
> 赞同：1
> 
> 时间：2013-01-10T17:20:05.390
> 
> 标签：windows, perl, command-prompt

我是 Perl 的新手，我正在通过执行以下操作在 Windows 7 的 CommandPrompt 对话框中执行 .pl 文件：

```
c:\perlscripts\runReport.pl 5 
```

除了在 CommandPrompt 对话框中查看输出之外，还有一种方法可以将输出重定向到文本文件吗？

任何帮助/方向将不胜感激。问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:24:06.850

如果您将“> filename.txt”附加到您的行，它会将结果输出到文件中。如果你想两者都做，显然在[http://code.google.com/p/wintee/](http://code.google.com/p/wintee/)上有 wintee 实用程序。如果它类似于 UNIX tee，那么使用它应该只需要附加 '| tee filename.txt' 到您的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:24:20.980

而不是在命令行中打印输出。您可以将输出写入文件。

```
# Opening file to write the program's output. 
open(FH, ">myFile.txt") or die "Cannot open myFile.txt";

# include module to dump output.
use Data::Dumper;
print FH Dumper(@output);

close FH; 
```

否则你可以这样写：

```
perl my_script.pl > myFile.txt 
```

# javascript - 使用 Chosen.js 搜索国际字符

> ID：14263579
> 
> 赞同：2
> 
> 时间：2013-01-10T17:20:08.207
> 
> 标签：javascript, jquery-chosen

有没有人找到使用 selected.js 搜索国际字符的修复程序？

例如，如果我有一个包含以下选项的多选字段： - 法国城堡 - 英国城堡

我搜索“Cha”

只有英文会显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-19T15:56:53.907

我不知道，如果现在回答还不算太晚，但它可能会帮助其他人。

关键是在比较期间从输入的字符串和匹配的选项字符串中去除变音符号。[我的修改是使用从github](https://github.com/harvesthq/chosen/releases/tag/v1.1.0)下载的 1.1.0 版本的 jquery Chosen 插件。

首先你必须有一个去掉变音符号的函数（我在 winnow_results() 之后添加了它）

```
// strip czech diacritics from string
AbstractChosen.prototype.strip_diacritics= function(string) {
  var 
    translationTable= [
      // input with diacritics - add your characters if necessary
      "éěÉĚřŘťŤžŽúÚůŮüÜíÍóÓáÁšŠďĎýÝčČňŇäÄĺĹľĽŕŔöÖ",
      // stripped output
      "eeEErRtTzZuUuUuUiIoOaAsSdDyYcCnNaAlLlLrRoO",
    ],
    output= '';

  // scan through whole string
  for (var i= 0; i < string.length; i++) {
    var charPosition= translationTable[0].indexOf(string[i]);
    output+= charPosition == -1 ? string[i] : translationTable[1][charPosition];
  }

  return output;
} 
```

然后在 winnow_results() 函数的适当位置使用它。引用**selected.jquery.js**行：

**第 315 行**

```
searchText = this.get_search_text();
// replace with
searchText = this.strip_diacritics(this.get_search_text()); 
```

**第 339 行**

```
option.search_match = this.search_string_match(option.search_text, regex);
// replace with
option.search_match = this.search_string_match(this.strip_diacritics(option.search_text), regex); 
```

最后**是第 345 行**

```
startpos = option.search_text.search(zregex);
// replace with
startpos = this.strip_diacritics(option.search_text).search(zregex); 
```

你完成了:-)。

（我想为旧 DOS 游戏中的额外生命写一些“保存游戏字节替换”指令）

[pastebin 中的整个修改文件](http://pastebin.com/download.php?i=48wFWLcL)。

2016 年 9 月 29 日：在 Chosen 1.6.2 中进行的修改，测试正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:53:21.170

看起来 Chosen 默认情况下不会这样做 - 代码中没有用于此的功能。

源代码在[这里](https://github.com/harvesthq/chosen/blob/master/chosen/chosen.jquery.js.)。我已经在下面发布了搜索功能，它负责检查字符。此函数中没有任何内容可以处理这样的亲密角色，因此您要么必须编写它，要么向 Chosen 团队请求该功能。这是因为，从本质上讲，重音字符和非重音字符没有相同的 ASCII（或 Unicode）值。您必须有某种类型的查找表，并为每个字符解析它以返回“模糊”结果。

抱歉，我无法提供更多帮助。我敢肯定，如果你能找到一种方法来修改这个函数，你就可以让它工作。同样，您需要查找表或基础代码值的东西。祝你好运。

编辑：您可能不需要查找表 - 也许正则表达式功能有一个内置的方法来做到这一点。或者，您可以简单地匹配与您正在搜索的字母接近的任何内容。

```
Chosen.prototype.winnow_results = function() {
      var found, option, part, parts, regex, regexAnchor, result, result_id, results, searchText, startpos, text, zregex, _i, _j, _len, _len1, _ref;
      this.no_results_clear();
      results = 0;
      searchText = this.search_field.val() === this.default_text ? "" : $('<div/>').text($.trim(this.search_field.val())).html();
      regexAnchor = this.search_contains ? "" : "^";
      regex = new RegExp(regexAnchor + searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), 'i');
      zregex = new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), 'i');
      _ref = this.results_data;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        option = _ref[_i];
        if (!option.disabled && !option.empty) {
          if (option.group) {
            $('#' + option.dom_id).css('display', 'none');
          } else if (!(this.is_multiple && option.selected)) {
            found = false;
            result_id = option.dom_id;
            result = $("#" + result_id);
            if (regex.test(option.html)) {
              found = true;
              results += 1;
            } else if (this.enable_split_word_search && (option.html.indexOf(" ") >= 0 || option.html.indexOf("[") === 0)) {
              parts = option.html.replace(/\[|\]/g, "").split(" ");
              if (parts.length) {
                for (_j = 0, _len1 = parts.length; _j < _len1; _j++) {
                  part = parts[_j];
                  if (regex.test(part)) {
                    found = true;
                    results += 1;
                  }
                }
              }
            }
            if (found) {
              if (searchText.length) {
                startpos = option.html.search(zregex);
                text = option.html.substr(0, startpos + searchText.length) + '</em>' + option.html.substr(startpos + searchText.length);
                text = text.substr(0, startpos) + '<em>' + text.substr(startpos);
              } else {
                text = option.html;
              }
              result.html(text);
              this.result_activate(result);
              if (option.group_array_index != null) {
                $("#" + this.results_data[option.group_array_index].dom_id).css('display', 'list-item');
              }
            } else {
              if (this.result_highlight && result_id === this.result_highlight.attr('id')) {
                this.result_clear_highlight();
              }
              this.result_deactivate(result);
            }
          }
        }
      }
      if (results < 1 && searchText.length) {
        return this.no_results(searchText);
      } else {
        return this.winnow_results_set_highlight();
      }
    }; 
```

# javascript - 本地化未存储在数据库中的字符串

> ID：14263581
> 
> 赞同：0
> 
> 时间：2013-01-10T17:20:14.080
> 
> 标签：javascript, node.js, localization, pug, handlebars.js

我们决定为我们的网络应用程序添加对多种语言的支持。

我们在前端使用 Handlebars 进行模板化，在后端使用 Node + Jade 进行模板化。

对于未存储在数据库中的字符串（作为 UI 一部分的所有字符串），是否有推荐的解决方法？（我们将字符串添加到前端还是后端的模板有什么区别吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:30:42.237

我对基于 javascript 的本地化采用的一种方法是创建一组文件（每种语言一个文件），每个文件都包含一个语言对象，可以在客户端或节点中加载以提供本地化。您只需根据语言加载所需的文件。

这是一个简单的例子：

```
var localization = {
    stringkey1: 'Some string value',
    stringkey2: 'Some other value',
    // etc.
} 
```

显然，如果您有一个包含大量字符串的大型应用程序，您可能希望进一步分解本地化，这样您就不需要处理过大的对象。

这种方法的好处是您可以在服务器端和客户端使用相同的本地化库而无需任何修改。

# spring-batch - 如何在 ItemProcessor 或 ItemWriter 中获取 Spring Batch Job ContextId？

> ID：14263583
> 
> 赞同：11
> 
> 时间：2013-01-10T17:20:15.547
> 
> 标签：spring-batch

我需要将 Job ExecutionId 存储为 Entity 的字段之一。（我正在使用 JpaItemWriter）这里的主题之一从 StepExcecution 解释，我可以得到 StepContext -> JobExecution。在那种情况下如何获得 StepExecution？

（我不需要将任何数据从一个步骤传递到另一个步骤，我只需要 JobExecuionId）

感谢您的帮助，穆尼尔·艾哈迈德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:49:40.273

我建议您使用一个处理器来更新您的实体的价值。如果您的处理器直接实现`ItemProcessor<T>`，那么您将不会自动获得`StepExecution`. 要获得`StepExecution`，请执行以下操作之一；- 实现 StepExecutionListener 并将其设置为`beforeStep`方法中的变量 - 创建一个调用的方法`[something](StepExecution execution)`并使用注释`@BeforeStep`

通过侦听器注入 StepExecution 后，您可以获取 jobExecutionId 并将其设置到您的实体中

```
public class MyEntityProcessor implements ItemProcessor<MyEntity, MyEntity> {

private long jobExecutionId;

@BeforeStep
public void beforeStep(StepExecution stepExecution) {
    jobExecutionId = stepExecution.getJobExecutionId();
}

@Override
public MyEntity process(MyEntity item) throws Exception {
    //set the values
    item.setJobExecutionId(jobExecutionId);
    //continue
    return item;
}

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-08T12:48:33.500

我们可以使用 Itemprocessor 的 @Scope("job") 将范围设置为作业，并且可以使用 @Value("#{jobExecution}") 表达式轻松获取 JobExecution，如下所示。

```
@Service
@Scope("job")
public class XsltTransformer implements ItemProcessor<Record, Record> {

@Value("#{jobExecution}")
private JobExecution jobExecution;

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-13T07:01:12.730

范围作为工作`@Scope("job")`的使用和`JobExecution`使用`@Value("#{jobExecution}")`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-24T10:45:50.553

您必须添加以下内容：

```
@Value("#{stepExecution.jobExecution}")

private JobExecution jobExecution; 
```

在您的阅读器 Writer 或处理器中。它肯定会奏效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-10T11:52:21.523

如果你想在 MyEntityProcessor 中使用 @BeforeStep 你必须像一个监听器一样声明它

```
<batch:listeners>
 <batch:listener ref="myEntityProcessor" />
</batch:listeners> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-11T15:45:35.703

当我想获取 JobInstanceID 时，我遇到了类似的问题。下面是我如何获得 StepExecution 然后检索 JobExecution。我希望这有帮助。

```
public class FoobarItemProcessor implements ItemProcessor<Foobar, Foobar> {

private JobExecution jobExecution;

@BeforeStep
public void beforeStep(StepExecution stepExecution) {
    jobExecution = stepExecution.getJobExecution();
} 
```

# jquery - 基于 url 激活的菜单

> ID：14263584
> 
> 赞同：0
> 
> 时间：2013-01-10T17:20:21.510
> 
> 标签：jquery, url, menu

我目前正在使用：

```
$(function () {
    var url = window.location.pathname,
    urlRegExp = new RegExp(url.replace(/\/$/, '') + "$");

    $('.mainmenu a').each(function () {
      if (urlRegExp.test(this.href.replace(/\/$/, ''))) {
        $(this).addClass('active');
      }
    });
}); 
```

由于我使用的“mainmenu a”标签有一个带有link.html 的href，因此当url 包含link.html 时，此脚本运行良好。但是，当 url 包含即 /link/page （没有 .html 扩展名）时，我也希望它能够工作，反之亦然。基本上我希望它与包含 .html 扩展名的 url 一起使用，并且链接是一个目录。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:23:24.620

是的，只需`.html`在进行比较之前用空字符串替换即可。然而，真正解决您的问题的方法是不允许在您的网站上混合使用干净的 URL 和基于文件名的 URL。

你可以这样做：

```
$(function () {
    var url = window.location.pathname.toLowerCase().replace(/(\/|\.html)$/, '').replace(/^\//, '');
    $('.mainmenu a').each(function () {
        var href = this.href.toLowerCase().replace(/(\/|\.html)$/, '').replace(/^\//, '');
        if (url === href) {
            $(this).addClass('active');
            return false; // break out of each()
        }
    });
}); 
```

# ruby - 如何始终使用 --full-index 选项运行捆绑安装

> ID：14263588
> 
> 赞同：1
> 
> 时间：2013-01-10T17:20:33.947
> 
> 标签：ruby, bundler

有没有办法配置捆绑器，以便它始终运行 install`--full-index`而不必每次都指定它？每个 Gemfile 或系统范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T16:10:55.127

对于这个和其他 Bundler 选项，我发现最好的方法是使用 shell 函数（或别名）：

`function bi { bundle install --standalone --binstubs --full-index $*; }`

某些选项（例如`--path`）在`.bundle/config`第一次使用时存储。但是如果你不想记住你是否使用过它们，你也可以把它们放在你的 shell 函数中。

# javascript - 使用 Javascript 翻转动画

> ID：14263590
> 
> 赞同：0
> 
> 时间：2013-01-10T17:20:38.697
> 
> 标签：javascript, jquery, animation

任何人都可以建议任何有助于实现以下目标的 Javascript/jQuery 库/插件吗？

[http://cl.ly/2n1A2r0l1w1B](http://cl.ly/2n1A2r0l1w1B)

看起来这是移动、缩放和旋转变换的适时组合。我找到了这个插件：[jQuery Transit](http://ricostacruz.com/jquery.transit/)，但我想知道是否有任何其他解决方案可以让我更接近视频中显示的动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:03:43.733

检查这是否有帮助：

[http://davidwalsh.name/css-flip](http://davidwalsh.name/css-flip)

您可以根据需要对其进行调整并获得所需的效果。

# c# - 无法分配给“textBoxSettingsMethod”，因为它是“方法组”

> ID：14263591
> 
> 赞同：1
> 
> 时间：2013-01-10T17:20:39.383
> 
> 标签：c#, asp.net-mvc-4, devexpress

关于这个错误，我已经在网上查看了大约 20 多个页面。我一直无法找到解决方案。我知道为什么会发生错误，但无法弄清楚如何解决这个问题。：

我只需要为我的操作分配一个操作，但这些操作必须有一个字符串类型的传入参数。任何想法都非常感谢，因为我已经为此苦苦挣扎了一段时间。

```
public class CommonDemoHelper
{
    static Action<TextBoxSettings> textBoxSettingsMethod(string txtBoxName);
    static Action<DateEditSettings> dateEditSettingsMethod;
    static Action<LabelSettings> labelSettingsMethod;
    static Action<LabelSettings> wideLabelSettingsMethod;
    static Action<SpinEditSettings> spinEditSettingsMethod;
    static Action<MemoSettings> memoSettingsMethod;

    public static Action<TextBoxSettings> TextBoxSettingsMethod(string txtBoxName)
    {
        get
        {

            if (textBoxSettingsMethod(txtBoxName) == null)
                //Getting error below cannot assign to method group
                textBoxSettingsMethod = CreateTextBoxSettingsMethod(txtBoxName);
            return textBoxSettingsMethod(txtBoxName);
        }
    }

    static Action<TextBoxSettings> CreateTextBoxSettingsMethod(string txtBoxName)
    {
        return settings =>
        {
            settings.ControlStyle.CssClass = "editor";
            settings.ShowModelErrors = true;
            settings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.ImageWithText;
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:27:56.000

您声明`textBoxSettingsMethod`为一种方法：

```
static Action<TextBoxSettings> textBoxSettingsMethod(string txtBoxName); 
```

当看起来您正试图将其定义为属性时：

```
static Action<TextBoxSettings> textBoxSettingsMethod; 
```

尽管`txtBoxName`未使用since，`CreateTextBoxSettingsMethod`但对于您实际要完成的工作来说，这有点令人困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:49:46.253

如果一个方法（或委托）返回一个值，它将是一个`Func<return_type>`，而不是一个动作。如果它有输入参数（参数），那么它将是一个`Func<arg1,arg2,arg3,return_type>`

```
static Func<string, TextBoxSettings> textBoxSettingsMethod;

public static Func<string, TextBoxSettings> GetTextBoxSettingsMethod(string txtBoxName)
{
    if (textBoxSettingsMethod == null)
        textBoxSettingsMethod = CreateTextBoxSettingsMethod(txtBoxName);
    return textBoxSettingsMethod;
}

static Func<string, TextBoxSettings> CreateTextBoxSettingsMethod(string txtBoxName)
{
    ...
} 
```

这里`Func<string, TextBoxSettings>`指定一个接受字符串参数（输入）并返回`TextBoxSettings`（输出）的方法。

此外，由于您需要输入参数，`TextBoxSettingsMethod`因此它不能是属性。我把它改成了一种方法。

此外，我更改了测试以确保它`textBoxSettingsMethod`不为空（不是在执行时返回结果）。测试`textBoxSettingsMethod(txtBoxName) == null`调用该方法并测试 type 的返回值`TextBoxSettings`是否为`null`。如果只想知道方法是否定义，测试应该是`textBoxSettingsMethod == null`.

不要混淆作为`textBoxSettingsMethod`方法（或委托）和执行**方法的****表达式**。`textBoxSettingsMethod(txtBoxName)`

 *** * *

争论有什么`string txtBoxName`用？你没有使用它。您是否需要针对不同的文本框使用不同的方法？很难说。

* * *

**更新**

这将始终创建相同的方法，该方法根据文本框名称返回不同的设置（参数`string txtBoxName`不是必需的，只有 lambda 表达式的参数，`tbName`它在调用时需要实际参数值）：

```
static Func<string, TextBoxSettings> CreateTextBoxSettingsMethod()
{
    return tbName =>
    {
        TextBoxSettings settings;
        switch (tbName) {
            case "textbox1":
            case "textbox2":
            case "textbox3":
                settings = new TextBoxSettings {
                    TextBoxName = tbName,
                    ControlStyle = "editor",
                    ShowModelErrors = true
                };
                settings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.ImageWithText;
                return settings;
            case "textbox4":
            case "textbox5":
                settings = new TextBoxSettings {
                    TextBoxName = tbName,
                    ControlStyle = "displayer",
                    ShowModelErrors = false
                };
                settings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.TextOnly;
                return settings;
            default:
                return new TextBoxSettings { TextBoxName = tbName };
        }
    };
} 
```

* * *

相反，这是一种创建不同方法的方法，这些方法总是返回相同的设置

```
static Func<string, TextBoxSettings> CreateTextBoxSettingsMethod(string txtBoxName)
{
    switch (txtBoxName) {
        case "textbox1":
        case "textbox2":
        case "textbox3":
            return tbName =>
            {
                var settings = new TextBoxSettings {
                    TextBoxName = tbName,
                    ControlStyle = "editor",
                    ShowModelErrors = true
                };
                settings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.ImageWithText;
                return settings;
            };
        case "textbox4":
        case "textbox5":
            return tbName =>
            {
                var settings = new TextBoxSettings {
                    TextBoxName = tbName,
                    ControlStyle = "displayer",
                    ShowModelErrors = false
                };
                settings.Properties.ValidationSettings.ErrorDisplayMode = ErrorDisplayMode.TextOnly;
                return settings;
            };
        default:
            return tbName => new TextBoxSettings { TextBoxName = tbName };
    }
} 
```

* * *

**更新#2**

也许你想要这个

```
static Dictionary<string, Func<string, TextBoxSettings>> textBoxSettingsMethod
    = new Dictionary<string,Func<string,TextBoxSettings>>();

public static Func<string, TextBoxSettings> GetTextBoxSettingsMethod(string txtBoxName)
{
    Func<string, TextBoxSettings> method;
    if (!textBoxSettingsMethod.TryGetValue(txtBoxName, out method)) {
        method = CreateTextBoxSettingsMethod(txtBoxName);
        textBoxSettingsMethod.Add(txtBoxName, method);
    }
    return method;
} 
```

你可以像这样使用它：

```
Func<string, TextBoxSettings> method;
TextBoxSettings setting;

method = GetTextBoxSettingsMethod("textbox1");
setting = method("textbox1");

// or

setting = GetTextBoxSettingsMethod("textbox1")("textbox1");

// or, if you are sure that all the methods have been assigned

method = textBoxSettingsMethod["textbox1"];
setting = method("textbox1");

// or

setting = textBoxSettingsMethod["textbox1"]("textbox1"); 
```

但我仍然不确定为什么要动态创建这些方法。返回设置的简单方法就足够了

```
public static TextBoxSettings GetTextBoxSettings(string txtBoxName)
{
    switch (txtBoxName) {
        // ...
        default:
            return null;
    }
} 
```**

# html - 悬停时如何在图像上显示文字？

> ID：14263594
> 
> 赞同：81
> 
> 时间：2013-01-10T17:20:42.013
> 
> 标签：html, css, hover

将鼠标悬停在图像上时，我试图显示描述。我已经以一种不太理想的方式完成了它，在这里使用图像精灵和悬停：我希望它看起来与我拥有的完全一样，但使用真实文本而不是图像。

我尝试了一些不同的东西，但我似乎无法弄清楚如何去做。我正在尝试仅使用 HTML 和 CSS 来做到这一点，但我不确定这是否可能。

随意在我的代码中四处寻找，我将在这里粘贴我认为相关的内容。

**HTML**

```
div#projectlist {
  width: 770px;
  margin: 0 auto;
  margin-top: 20px;
  margin-bottom: 40px;
}

div#buzzbutton {
  display: block;
  float: left;
  margin: 2px;
  background: url(content/assets/thumbnails/design/buzz_sprite.jpg) 0 0px no-repeat;
  width: 150px;
  height: 150px;
}

div#buzzbutton:hover {
  background: url(content/assets/thumbnails/design/buzz_sprite.jpg);
  width: 150px;
  height: 150px;
  background-position: 0 -150px;
}

div#slinksterbutton {
  display: block;
  float: left;
  background: url(content/assets/thumbnails/design/slinkster_sprite.jpg) 0 0px no-repeat;
  width: 150px;
  height: 150px;
  margin: 2px;
}

div#slinksterbutton:hover {
  background: url(content/assets/thumbnails/design/slinkster_sprite.jpg);
  width: 150px;
  height: 150px;
  background-position: 0 -150px;
}
```

```
<div id="projectlist">
  <div id="buzzbutton">
    <a href="buzz.html" title=""><img src="content/assets/thumbnails/transparent_150x150.png" alt="" /></a>
  </div>

  <div id="slinksterbutton">
    <a href="slinkster.html" title=""><img src="content/assets/thumbnails/transparent_150x150.png" alt="" /></a>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-01-10T17:33:29.513

这很简单。将图像和“悬停时出现”描述包装在具有相同图像尺寸的 div 中。然后，使用一些 CSS，命令在悬停该 div 时显示描述。

```
/* quick reset */
* {
  margin: 0;
  padding: 0;
  border: 0;
}

/* relevant styles */
.img__wrap {
  position: relative;
  height: 200px;
  width: 257px;
}

.img__description {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(29, 106, 154, 0.72);
  color: #fff;
  visibility: hidden;
  opacity: 0;

  /* transition effect. not necessary */
  transition: opacity .2s, visibility .2s;
}

.img__wrap:hover .img__description {
  visibility: visible;
  opacity: 1;
}
```

```
<div class="img__wrap">
  <img class="img__img" src="http://placehold.it/257x200.jpg" />
  <p class="img__description">This image looks super neat.</p>
</div>
```

一个不错的小提琴：[https ://jsfiddle.net/govdqd8y/](https://jsfiddle.net/govdqd8y/)

编辑：

如果您不想显式设置`<img>`wrapping的高度，还有另一种选择`<div>`，那就是将`<div>`' 的显示设置为 inline-block。（但请记住，如果图像无法加载，它看起来不会很好。）

`<img>`如果您选择此选项，您会注意到wrapping 的底部和底部之间会有微小的间距`<div>`。这是因为 的`<img>`默认`vertical-align`值`baseline`。如果你设置它`bottom`会消失。

这是使用此选项的小提琴：[https ://jsfiddle.net/joplomacedo/5cL31o0g/](https://jsfiddle.net/joplomacedo/5cL31o0g/)

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2013-01-10T17:23:40.580

在您的 HTML 中，尝试将您想要出现的文本放在代码的标题部分：

```
<a  href="buzz.html" title="buzz hover text"> 
```

您也可以对图像的替代文本执行相同的操作。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-04-19T09:39:03.447

您还可以在图像标签中使用 title 属性

```
<img src="content/assets/thumbnails/transparent_150x150.png" alt="" title="hover text" /> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-03-28T03:17:51.337

这就是我用来使文本出现在悬停时的方法：

```
* {
  box-sizing: border-box
}

div {
  position: relative;
  top: 0px;
  left: 0px;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  overflow: hidden;
  text-align: center
}

img {
  width: 400px;
  height: 400px;
  position: absolute;
  border-radius: 50%
}

img:hover {
  opacity: 0;
  transition:opacity 2s;
}

heading {
  line-height: 40px;
  font-weight: bold;
  font-family: "Trebuchet MS";
  text-align: center;
  position: absolute;
  display: block
}

div p {
  z-index: -1;
  width: 420px;
  line-height: 20px;
  display: inline-block;
  padding: 200px 0px;
  vertical-align: middle;
  font-family: "Trebuchet MS";
  height: 450px
}
```

```
<div>
  <img src="https://68.media.tumblr.com/20b34e8d12d4230f9b362d7feb148c57/tumblr_oiwytz4dh41tf8vylo1_1280.png">
  <p>Lorem ipsum dolor sit amet, consectetur adipisicing <br>elit. Reiciendis temporibus iure dolores aspernatur excepturi <br> corporis nihil in suscipit, repudiandae. Totam.
  </p>
</div>
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-09-23T22:27:09.183

```
.container {
  position: relative;
  width: 50%;
}

.image {
  display: block;
  width: 100%;
  height: auto;
}

.overlay {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  height: 100%;
  width: 100%;
  opacity: 0;
  transition: .5s ease;
  background-color: #008CBA;
}

.container:hover .overlay {
  opacity: 1;
}

.text {
  color: white;
  font-size: 20px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
}
```

```
<!DOCTYPE html>
<html>
<head></head>
<body>

<div class="container">
  <img src="http://lorempixel.com/500/500/" alt="Avatar" class="image">
  <div class="overlay">
    <div class="text">Hello World</div>
  </div>
</div>

</body>
</html>
```

[参考链接 W3schools](https://www.w3schools.com/howto/howto_css_image_overlay.asp)多种风格

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-25T00:00:35.640

我看到很多人使用图像标签。我更喜欢使用背景图像，因为我可以操纵它。例如，我可以：

*   添加更平滑的过渡
*   `background-size: cover;`使用“ ”属性节省时间，不必裁剪图像。

**HTML/CSS：**

```
.overlay-box {
  background-color: #f5f5f5;
  height: 100%;
  background-repeat: no-repeat;
  background-size: cover;
}

.overlay-box:hover .desc,
.overlay-box:focus .desc {
  opacity: 1;
}

/* opacity 0.01 for accessibility */
/* adjust the styles like height,padding to match your design*/
.overlay-box .desc {
  opacity: 0.01;
  min-height: 355px;
  font-size: 1rem;
  height: 100%;
  padding: 30px 25px 20px;
  transition: all 0.3s ease;
  background: rgba(0, 0, 0, 0.7);
  color: #fff;
}
```

```
<div class="overlay-box" style="background-image: url('https://via.placeholder.com/768x768');">
  <div class="desc">
    <p>Place your text here</p>
    <ul>
      <li>lorem ipsum dolor</li>
      <li>lorem lipsum</li>
      <li>lorem</li>
    </ul>
  </div>
</div>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-23T01:56:36.770

```
HTML
<img id="close" className="fa fa-close" src="" alt="" title="Close Me" />

CSS
#close[title]:hover:after {
  color: red;
  content: attr(title);
  position: absolute;
  left: 50px;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-06T06:00:39.970

```
<!DOCTYPE html><html lang='en' class=''>
<head><script src='//production-assets.codepen.io/assets/editor/live/console_runner-079c09a0e3b9ff743e39ee2d5637b9216b3545af0de366d4b9aad9dc87e26bfd.js'></script><script src='//production-assets.codepen.io/assets/editor/live/events_runner-73716630c22bbc8cff4bd0f07b135f00a0bdc5d14629260c3ec49e5606f98fdd.js'></script><script src='//production-assets.codepen.io/assets/editor/live/css_live_reload_init-2c0dc5167d60a5af3ee189d570b1835129687ea2a61bee3513dee3a50c115a77.js'></script><meta charset='UTF-8'><meta name="robots" content="noindex"><link rel="shortcut icon" type="image/x-icon" href="//production-assets.codepen.io/assets/favicon/favicon-8ea04875e70c4b0bb41da869e81236e54394d63638a1ef12fa558a4a835f1164.ico" /><link rel="mask-icon" type="" href="//production-assets.codepen.io/assets/favicon/logo-pin-f2d2b6d2c61838f7e76325261b7195c27224080bc099486ddd6dccb469b8e8e6.svg" color="#111" /><link rel="canonical" href="https://codepen.io/nelsonleite/pen/RaGwba?depth=everything&order=popularity&page=4&q=product&show_forks=false" />
<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
<style class="cp-pen-styles">.product-description {
  transform: translate3d(0, 0, 0);
  transform-style: preserve-3d;
  perspective: 1000;
  backface-visibility: hidden;
}

body {
  color: #212121;
}

.container {
  padding-top: 25px;
  padding-bottom: 25px;
}

img {
  max-width: 100%;
}

hr {
  border-color: #e5e5e5;
  margin: 15px 0;
}

.secondary-text {
  color: #b6b6b6;
}

.list-inline {
  margin: 0;
}
.list-inline li {
  padding: 0;
}

.card-wrapper {
  position: relative;
  width: 100%;
  height: 390px;
  border: 1px solid #e5e5e5;
  border-bottom-width: 2px;
  overflow: hidden;
  margin-bottom: 30px;
}
.card-wrapper:after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  transition: opacity 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
}
.card-wrapper:hover:after {
  opacity: 1;
}
.card-wrapper:hover .image-holder:before {
  opacity: .75;
}
.card-wrapper:hover .image-holder:after {
  opacity: 1;
  transform: translate(-50%, -50%);
}
.card-wrapper:hover .image-holder--original {
  transform: translateY(-15px);
}
.card-wrapper:hover .product-description {
  height: 205px;
}
@media (min-width: 768px) {
  .card-wrapper:hover .product-description {
    height: 185px;
  }
}

.image-holder {
  display: block;
  position: relative;
  width: 100%;
  height: 310px;
  background-color: #ffffff;
  z-index: 1;
}
@media (min-width: 768px) {
  .image-holder {
    height: 325px;
  }
}
.image-holder:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #4CAF50;
  opacity: 0;
  z-index: 5;
  transition: opacity 0.6s;
}
.image-holder:after {
  content: '+';
  font-family: 'Raleway', sans-serif;
  font-size: 70px;
  color: #4CAF50;
  text-align: center;
  position: absolute;
  top: 92.5px;
  left: 50%;
  width: 75px;
  height: 75px;
  line-height: 75px;
  background-color: #ffffff;
  opacity: 0;
  border-radius: 50%;
  z-index: 10;
  transform: translate(-50%, 100%);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  transition: all 0.4s ease-out;
}
@media (min-width: 768px) {
  .image-holder:after {
    top: 107.5px;
  }
}
.image-holder .image-holder__link {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 15;
}
.image-holder .image-holder--original {
  transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
}

.image-liquid {
  width: 100%;
  height: 325px;
  background-size: cover;
  background-position: center center;
}

.product-description {
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 80px;
  padding: 10px 15px;
  overflow: hidden;
  background-color: #fafafa;
  border-top: 1px solid #e5e5e5;
  transition: height 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
  z-index: 2;
}
@media (min-width: 768px) {
  .product-description {
    height: 65px;
  }
}
.product-description p {
  margin: 0 0 5px;
}
.product-description .product-description__title {
  font-family: 'Raleway', sans-serif;
  position: relative;
  white-space: nowrap;
  overflow: hidden;
  margin: 0;
  font-size: 18px;
  line-height: 1.25;
}
.product-description .product-description__title:after {
  content: '';
  width: 60px;
  height: 100%;
  position: absolute;
  top: 0;
  right: 0;
  background: linear-gradient(to right, rgba(255, 255, 255, 0), #fafafa);
}
.product-description .product-description__title a {
  text-decoration: none;
  color: inherit;
}
.product-description .product-description__category {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.product-description .product-description__price {
  color: #4CAF50;
  text-align: left;
  font-weight: bold;
  letter-spacing: 0.06em;
}
@media (min-width: 768px) {
  .product-description .product-description__price {
    text-align: right;
  }
}
.product-description .sizes-wrapper {
  margin-bottom: 15px;
}
.product-description .color-list {
  font-size: 0;
}
.product-description .color-list__item {
  width: 25px;
  height: 10px;
  position: relative;
  z-index: 1;
  transition: all .2s;
}
.product-description .color-list__item:hover {
  width: 40px;
}
.product-description .color-list__item--red {
  background-color: #F44336;
}
.product-description .color-list__item--blue {
  background-color: #448AFF;
}
.product-description .color-list__item--green {
  background-color: #CDDC39;
}
.product-description .color-list__item--orange {
  background-color: #FF9800;
}
.product-description .color-list__item--purple {
  background-color: #673AB7;
}
</style></head><body>
<!--
Inspired in this dribbble
https://dribbble.com/shots/986548-Product-Catalog
-->

<div class="container">
    <div class="row">

        <div class="col-xs-12 col-sm-6 col-md-4">
            <article class="card-wrapper">
                <div class="image-holder">
                    <a href="#" class="image-holder__link"></a>
                    <div class="image-liquid image-holder--original" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/2/24/Blue_Tshirt.jpg')">
                    </div>
                </div>

                <div class="product-description">
                    <!-- title -->
                    <h1 class="product-description__title">
                        <a href="#">                        
                            Adidas Originals
                            </a>
                    </h1>

                    <!-- category and price -->
                    <div class="row">
                        <div class="col-xs-12 col-sm-8 product-description__category secondary-text">
                            Men's running shirt
                        </div>
                        <div class="col-xs-12 col-sm-4 product-description__price">
                            € 499
                        </div>
                    </div>

                    <!-- divider -->
                    <hr />

                    <!-- sizes -->
                    <div class="sizes-wrapper">
                        <b>Sizes</b>
                        <br />
                        <span class="secondary-text text-uppercase">
                            <ul class="list-inline">
                                <li>xs,</li>                                
                                <li>s,</li>                             
                                <li>sm,</li>                                
                                <li>m,</li>
                                <li>l,</li>                             
                                <li>xl,</li>                                
                                <li>xxl</li>                                
                            </ul>
                        </span>
                    </div>

                    <!-- colors -->
                    <div class="color-wrapper">
                        <b>Colors</b>
                        <br />
                        <ul class="list-inline color-list">
                            <li class="color-list__item color-list__item--red"></li>
                            <li class="color-list__item color-list__item--blue"></li>
                            <li class="color-list__item color-list__item--green"></li>
                            <li class="color-list__item color-list__item--orange"></li>
                            <li class="color-list__item color-list__item--purple"></li>
                        </ul>
                    </div>
                </div>

            </article>
        </div>

        <div class="col-xs-12 col-sm-6 col-md-4">
            <article class="card-wrapper">
                <div class="image-holder">
                    <a href="#" class="image-holder__link"></a>
                    <div class="image-liquid image-holder--original" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Jeans_BW_2_(3213391837).jpg/543px-Jeans_BW_2_(3213391837).jpg')">
                    </div>
                </div>

                <div class="product-description">
                    <!-- title -->
                    <h1 class="product-description__title">
                        <a href="#">                        
                            Adidas Originals
                            </a>
                    </h1>

                    <!-- category and price -->
                    <div class="row">
                        <div class="col-sm-8 product-description__category secondary-text">
                            Men's running shirt
                        </div>
                        <div class="col-sm-4 product-description__price text-right">
                            € 499
                        </div>
                    </div>

                    <!-- divider -->
                    <hr />

                    <!-- sizes -->
                    <div class="sizes-wrapper">
                        <b>Sizes</b>
                        <br />
                        <span class="secondary-text text-uppercase">
                            <ul class="list-inline">
                                <li>xs,</li>                                
                                <li>s,</li>                             
                                <li>sm,</li>                                
                                <li>m,</li>
                                <li>l,</li>                             
                                <li>xl,</li>                                
                                <li>xxl</li>                                
                            </ul>
                        </span>
                    </div>

                    <!-- colors -->
                    <div class="color-wrapper">
                        <b>Colors</b>
                        <br />
                        <ul class="list-inline color-list">
                            <li class="color-list__item color-list__item--red"></li>
                            <li class="color-list__item color-list__item--blue"></li>
                            <li class="color-list__item color-list__item--green"></li>
                            <li class="color-list__item color-list__item--orange"></li>
                            <li class="color-list__item color-list__item--purple"></li>
                        </ul>
                    </div>
                </div>

            </article>
        </div>

        <div class="col-xs-12 col-sm-6 col-md-4">
            <article class="card-wrapper">
                <div class="image-holder">
                    <a href="#" class="image-holder__link"></a>
                    <div class="image-liquid image-holder--original" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/b/b8/Columbia_Sportswear_Jacket.jpg')">
                    </div>
                </div>

                <div class="product-description">
                    <!-- title -->
                    <h1 class="product-description__title">
                        <a href="#">                        
                            Adidas Originals
                            </a>
                    </h1>

                    <!-- category and price -->
                    <div class="row">
                        <div class="col-sm-8 product-description__category secondary-text">
                            Men's running shirt
                        </div>
                        <div class="col-sm-4 product-description__price text-right">
                            € 499
                        </div>
                    </div>

                    <!-- divider -->
                    <hr />

                    <!-- sizes -->
                    <div class="sizes-wrapper">
                        <b>Sizes</b>
                        <br />
                        <span class="secondary-text text-uppercase">
                            <ul class="list-inline">
                                <li>xs,</li>                                
                                <li>s,</li>                             
                                <li>sm,</li>                                
                                <li>m,</li>
                                <li>l,</li>                             
                                <li>xl,</li>                                
                                <li>xxl</li>                                
                            </ul>
                        </span>
                    </div>

                    <!-- colors -->
                    <div class="color-wrapper">
                        <b>Colors</b>
                        <br />
                        <ul class="list-inline color-list">
                            <li class="color-list__item color-list__item--red"></li>
                            <li class="color-list__item color-list__item--blue"></li>
                            <li class="color-list__item color-list__item--green"></li>
                            <li class="color-list__item color-list__item--orange"></li>
                            <li class="color-list__item color-list__item--purple"></li>
                        </ul>
                    </div>
                </div>

            </article>
        </div>

        <div class="col-xs-12 col-sm-6 col-md-4">
            <article class="card-wrapper">
                <div class="image-holder">
                    <a href="#" class="image-holder__link"></a>
                    <div class="image-liquid image-holder--original" style="background-image: url('http://www.publicdomainpictures.net/pictures/20000/nahled/red-shoes-isolated.jpg')">
                    </div>
                </div>

                <div class="product-description">
                    <!-- title -->
                    <h1 class="product-description__title">
                        <a href="#">                        
                            Adidas Originals
                            </a>
                    </h1>

                    <!-- category and price -->
                    <div class="row">
                        <div class="col-sm-8 product-description__category secondary-text">
                            Men's running shirt
                        </div>
                        <div class="col-sm-4 product-description__price text-right">
                            € 499
                        </div>
                    </div>

                    <!-- divider -->
                    <hr />

                    <!-- sizes -->
                    <div class="sizes-wrapper">
                        <b>Sizes</b>
                        <br />
                        <span class="secondary-text text-uppercase">
                            <ul class="list-inline">
                                <li>xs,</li>                                
                                <li>s,</li>                             
                                <li>sm,</li>                                
                                <li>m,</li>
                                <li>l,</li>                             
                                <li>xl,</li>                                
                                <li>xxl</li>                                
                            </ul>
                        </span>
                    </div>

                    <!-- colors -->
                    <div class="color-wrapper">
                        <b>Colors</b>
                        <br />
                        <ul class="list-inline color-list">
                            <li class="color-list__item color-list__item--red"></li>
                            <li class="color-list__item color-list__item--blue"></li>
                            <li class="color-list__item color-list__item--green"></li>
                            <li class="color-list__item color-list__item--orange"></li>
                            <li class="color-list__item color-list__item--purple"></li>
                        </ul>
                    </div>
                </div>

            </article>
        </div>

    </div>
</div>

</body></html> 
```

[样品制作完成](http://gilan-co.com/)

# sql-server-2008 - 如何在 Sql server 2008 中的两个日期之间获取数据

> ID：14263596
> 
> 赞同：0
> 
> 时间：2013-01-10T17:20:51.293
> 
> 标签：sql-server-2008, between

> **可能重复：**
> [用于选择两个日期之间的日期的 SQL 查询](https://stackoverflow.com/questions/5125076/sql-query-to-select-dates-between-two-dates)

如何在 sql server 2008 中的两个日期之间获取记录。我使用 I-batis 查询

例如。

```
 select * from T_SETTLEMENT_TRANSACTION WHERE status='PEND' and from_date_time >='2013-01-09 04:16:52.0' AND to_date_time<='2013-01-09 04:16:52.0' 
```

其中两列在 Sql server 2008 中采用日期时间格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:26:08.920

您可以使用 SQL 2005 的*BETWEEN*运算符，即

```
WHERE createdate BETWEEN '01-01-01 21:20:32.71' AND '10-01-01 21:20:32.71' 
```

**编辑：如果您想在两个不同的字段之间获取数据，您应该能够执行以下操作**

```
WHERE createdate >= from_date AND createdate < to_date 
```

让我知道它是如何工作的！

# c++ - 在 C++ 中复制数组

> ID：14263598
> 
> 赞同：-4
> 
> 时间：2013-01-10T17:20:55.617
> 
> 标签：c++, arrays, int

你好，我有这个功能：

```
void vector(int imputC[]) { 
    //return v*   
    //imputC[].lenght
    int a =sizeof(imputC) / sizeof(int);
    // float v[2 * a + 2];
    // v[0]=0;
    for (int i = 0; i < a ; i++)
        v[i] =(float)imputC[i];

    for(int j = 0; j < 10; j++)
        cout << a << endl;
} 
```

主要：

```
int main() {
    int array[] = { 23, 5, -10, 0, 0, 321, 1, 2, 99, 30 };
    // float *v[22];
    vector(array);
} 
```

a 的大小是 1。这是为什么呢？我不明白，我认为这是唯一的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:22:35.450

该表达式`sizeof(imputc)`在您的函数中不起作用，因为数组作为指针传递并且不保留原始数组的大小。所以该表达式只返回指针的大小，而不是它指向的数组。

如果必须将数组传递给需要知道数组中项目数的函数，则必须始终将数组大小作为参数传递给该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:23:27.160

在将数组类型作为参数的函数声明中，数组类型衰减为指向第一个元素的指针。所以

```
void vector(int imput[]) 
```

是相同的

```
void vector(int *imput) 
```

接受数组参数的函数需要有其他方法来获取数组中的元素数量。

# actionscript-3 - 我的 .fla 文件上的大错误，找不到任何不工作的原因

> ID：14263600
> 
> 赞同：0
> 
> 时间：2013-01-10T17:21:07.840
> 
> 标签：actionscript-3, flash-cs6

我有这个 .fla 文件，在您单击开火按钮之前，它不会播放狙击手射击的声音。现在它在玩游戏时玩了 3-4 次，甚至没有播放应该与它一起玩的电影剪辑。

请帮忙！！！！

我刚刚遇到了这个问题，并检查了我知道解决它的所有可能方法。我不知道这是否是一个错误，但我需要立即修复它，否则这个游戏，我们的论文，完蛋了！:(((((

[下载](http://www.mediafire.com/?4mi4e9cvasaou39)链接：名称为 sample_1，大小接近 8mb，保存为 flash pro 6 格式。

@musefan 要求的示例代码。

这是第一阶段。正如您所注意到的，它不需要播放任何音乐。

```
function shootfired():void{
    if(sample_1.reloading == 0 && sample_1.GamePlaying == true){

            if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.civillian1)){//if     fired on target
            if(mission.civillian1.currentLabel != "death"){ 
                mission.civillian1.gotoAndPlay("death");
                trace("target hit!");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.civillian2)){//if fired on target
            if(mission.civillian2.currentLabel != "death"){ 
                mission.civillian2.gotoAndPlay("death");
                trace("target hit!");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.civillian3)){//if fired on target
            if(mission.civillian3.currentLabel != "death"){ 
                mission.civillian3.gotoAndPlay("death");
                trace("target hit!");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.civillian4)){//if fired on target
            if(mission.civillian4.currentLabel != "death"){ 
                mission.civillian4.gotoAndPlay("death");
                trace("target hit!");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.civillian5)){//if fired on target
            if(mission.civillian5.currentLabel != "death"){ 
                mission.civillian5.gotoAndPlay("death");
                trace("target hit!");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.civillian6)){//if fired on target
            if(mission.civillian6.currentLabel != "death"){ 
                mission.civillian6.gotoAndPlay("death");
                trace("target hit!");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.civillian7)){//if fired on target
            if(mission.civillian7.currentLabel != "death"){ 
                mission.civillian7.gotoAndPlay("death");
                trace("target hit!");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.target1)){//if fired on target
            if(mission.target1.currentLabel != "death"){
                mission.target1.gotoAndPlay("death");
            }
        }

        else if(MC_SniperGun.MC_Sniper.MC_SniperScope.RedDot.hitTestObject(mission.target2)){//if fired on target
            if(mission.target2.currentLabel != "death"){
                mission.target2.gotoAndPlay("death");
            }
        }
        MC_SniperGun.MC_Sniper.gotoAndPlay(2);
    }
} 
```

接下来这是狙击枪的代码，再次没有音乐被调用。

```
import flash.events.*;
import flash.geom.Rectangle;

SniperFunction();
function SniperFunction():void{

    stop();
    MC_SniperGun.addEventListener(TouchEvent.TOUCH_BEGIN, Tdrag);
    MC_SniperGun.addEventListener(TouchEvent.TOUCH_END, Tdrop);

    function Tdrag(e:TouchEvent){
        MC_SniperGun.MC_Sniper.startTouchDrag(e.touchPointID, false, boundArea);
    }
    function Tdrop(e:TouchEvent) { 
        MC_SniperGun.MC_Sniper.stopTouchDrag(e.touchPointID); 
    }

    MC_SniperGun.addEventListener(MouseEvent.MOUSE_DOWN, drag);
    MC_SniperGun.addEventListener(MouseEvent.MOUSE_UP, drop);

    function drag(event:MouseEvent):void {
        MC_SniperGun.MC_Sniper.startDrag(false,boundArea);
    }

    function drop(event:MouseEvent):void {
        MC_SniperGun.MC_Sniper.stopDrag();
    }
    gotoAndPlay("mission" + sample_1.MissionNumber);
} 
```

最后是来自包含狙击枪动画的movieclip 的代码。

```
SniperShot();
function SniperShot():void{
    sample_1.reloading = 1;
    trace("Sniper Shot");
} 
```

包含狙击枪动画的影片剪辑有一个具有声音属性的帧，当播放该特定帧时，将播放狙击手音乐文件，但是当我玩该游戏时，动画不播放但狙击手音乐文件播放3-4次不按开火按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:11:46.407

将 my.mp3 替换为保存到您的音乐库中的声音

```
var snd:Sound = new Sound();
snd.load(new URLRequest("my.mp3"));
snd.play(); 
```

然后让它去狙击动画

# c# - 使用在运行时确定的类型参数构建通用对象

> ID：14263608
> 
> 赞同：0
> 
> 时间：2013-01-10T17:21:24.103
> 
> 标签：c#, .net, generics, dynamic, reflection

我有以下代码，我通过函数调用它，购买我需要在运行时从 Type otherType dynamic 调用它。

```
// this in code this works fine
DooClass newOne = GetInstance<DooClass>();

// The function
private T GetInstance<T>() where T : new()
{
    T item = SomeClass.Instance.GetItem<T>();
    if (item == null)
    {
       item = new T();
    }
    return item;
} 
```

所有对象都具有相同的 Parent ParentClass

```
//This is what i want to do or something like this
public void SomeFunction(Type someType)
{
   ParentClass newObj = GetInstance<someType>();
} 
```

/////通过下面的评论解决

```
private ParentClass GetElement(Type theType)
{
   ParentClass item = (ParentClass)SomeClass.Instance.GetItem(theType);
   if (item == null)
   {
      item = (ParentClass)Activator.CreateInstance(theType);
   }
   return item;
} 
```

和类*SomeClass.Instance.GetItem() 中的方法；*不使用泛型类型全部使用对象，现在类型被作为参数传递

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:26:07.393

尝试[`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)

```
 ParentClass newObj = (ParentClass)Activator.CreateInstance(type) 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)

`Activator.CreateInstance`-> 使用该类型的默认构造函数创建指定类型的实例。

# html - 定位多张图片的中间

> ID：14263610
> 
> 赞同：0
> 
> 时间：2013-01-10T17:21:26.483
> 
> 标签：html, css

我正在制作相册。当您在较小的窗口中查看网站时，我遇到了一个问题，照片不适合右侧并在那里留下很大的空白

```
<div id="gallery">
    <a href="#">
        <img src="images/1.jpg" />
    </a>
    <a href="#">
        <img src="images/2.jpg" />
    </a>
    <a href="#">
        <img src="images/3.jpg" />
    </a>
    <a href="#">
        <img src="images/4.jpg" />
    </a>
    ....
</div>
* { margin: 0; padding: 0;}

body {
    background: #000;
}

#gallery {
    width: 100%;
    margin: 25px auto;
    padding:0 12.5px;
}

#gallery a {
    display: block;
    float: left;
    margin: 0 12.5px 25px 12.5px;
    position: relative;
    height:150px;
    width:225px;
    background: #FFF;
    -webkit-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
    box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);

}
#gallery a img {
    height:150px;
    width:225px;
    display:none;
} 
```

你可以在这里看到一个工作版本：http: [//codepen.io/Dirkandries/full/hLxft](http://codepen.io/Dirkandries/full/hLxft)

我怎样才能始终对齐所有图像的中心？

我已经尝试过了`margin: 0 auto;`，只是它似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:26:06.220

在链接上使用`display:inline-block`而不是向左浮动，然后`text-align:center`在图库包装器上使用。

**[http://codepen.io/anon/pen/jIfLh](http://codepen.io/anon/pen/jIfLh)**

```
#gallery {
    width: 100%;
    margin: 25px auto;
    padding:0 12.5px;
    text-align:center;
}

#gallery a {
    display: inline-block;
    margin: 0 12.5px 25px 12.5px;
    position: relative;
    height:150px;
    width:225px;
    background: #FFF;
    -webkit-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
    box-shadow: 0 2px 15px 1px rgba(0, 0, 0, 0.5);
} 
```

# performance - 高效的在方案中列出清单

> ID：14263612
> 
> 赞同：0
> 
> 时间：2013-01-10T17:21:27.583
> 
> 标签：performance, list, recursion, scheme, racket

我想用Scheme语言来创建一个高效的特殊列表。例如：

> 函数名称：`make-list`
> 参数：`max`
> `(make-list max) -> (1 2 3 4 5 6 7 ... max)`

我可以使用递归方法完成这项任务。

```
#lang racket

(define (make-list max)
(define lst '())
(define count 1) 
(make-list-helper lst max count))

(define (make-list-helper lst max count) 
 (cond  
 [(> count max) lst]
 [else 
  (set! lst (append lst (list count))) 
  (make-list-helper lst max (add1 count)])) 
```

然而，这种方法可以被认为是低的。我不知道如何提高其制作清单的效率。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:40:01.403

关键原则是避免[使用 Schlemiel the Painter 算法](http://www.joelonsoftware.com/articles/fog0000000319.html)，而您却没有这样做：`append`随着列表变长，重复使用会花费越来越多的时间。前置元素是O（1），而附加是O（列表长度）；所以让最里面的`make-list-helper`返回一个单数列表`(max)`，并用于`cons`在递归时添加元素。

（我更喜欢迭代解决方案，但我是一个普通的 lisper，所以我最好避免坚持*任何*方案）。

不包含代码，以免破坏您的学习乐趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:46:13.447

```
(define (make-list max)
  (let f ((i max)(a '()))
    (if (zero? i)
        a
        (f (- i 1) (cons i a))))) 
```

这似乎是一个简单的迭代练习。

以上内容非常简单，您将在 Scheme 中的任何地方使用它。

确保您了解整个代码段的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T21:19:15.267

“效率”的另一个定义可能是：用最少的代码编写过程。考虑到这一点，问题的最短解决方案是使用现有程序来解决问题；例如，如果`max = 10`：

```
(define (make-list max-val)
  (build-list max-val add1))

(make-list 10)
=> '(1 2 3 4 5 6 7 8 9 10) 
```

上面使用了作为 Racket 一部分的[构建列表](http://docs.racket-lang.org/reference/pairs.html?q=build-list#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._build-list%29%29)过程：

> 通过按顺序将 proc 应用于整数 from `0`to创建一个包含 n 个元素的列表。`(sub1 n)`如果 lst 是结果列表，则`(list-ref lst i)`是 产生的值`(proc i)`。

另一个选择，同样适用于 Racket，是使用[迭代和推导](http://docs.racket-lang.org/guide/for.html)：

```
(define (make-list max-val)
  (for/list ([i (in-range 1 (add1 max-val))]) i))

(make-list 10)
=> '(1 2 3 4 5 6 7 8 9 10) 
```

无论哪种方式，鉴于过程是语言核心库的一部分，您可以确定它们的性能非常好，除非分析器表明它们是瓶颈，否则无需担心。

# artificial-intelligence - 板球作为状态机

> ID：14263616
> 
> 赞同：0
> 
> 时间：2013-01-10T17:21:37.037
> 
> 标签：artificial-intelligence, simulation, game-engine, state-machine

我正在创建一个板球经理统计游戏。我需要创建游戏的逐球模拟。比赛/球的结果将受到球员统计数据和其他外部因素（如天气或所选战术）的影响。

我一直在阅读大多数游戏都可以实现为状态机，这听起来很吸引我，但因为我是板球新手，所以我无法将这款游戏设想为状态机。

Ball应该是状态机还是比赛或球员还是全部3。我也不确定我将如何编排这个状态机（通过事件）。

我也很难确定状态和过渡。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T16:18:16.383

所以这就是我从你的问题中所理解的 - 你的板球经理游戏将根据球员的统计数据（投球手的技能/经验、击球手的技能/经验、守备/守门员统计数据等）和其他相关变量来逐个模拟比赛. 据我了解，这将更像是一个算法引擎，而不是板球比赛的视觉表现。

现在回答你的问题，首先，我不相信你正在以正确的方式看待 FSM。FSM 是一段代码，其设计使得在其生命周期的任何时候，它都处于许多可能的执行状态之一。每个状态都可以并且通常具有（这就是它的重点）不同的更新例程。此外，每个状态都可以根据预定义的触发器/事件转换到另一个状态。您需要了解的是，状态对同一实体实施不同的行为。

现在，“大多数游戏都可以实现为状态机”——不是“一个”状态机，而是一整套状态机。游戏中的几个管理器类、渲染器、游戏对象、菜单系统，或多或少的一切都在其自身的状态机上运行。为了这个例子的目的，想象一个游戏角色，比如说拳击手。你会在“CBoxer”（？）类中找到的一些状态是“Blocking”、“TakingHit”、“Dodge”、“RightUpper”、“LeftHook”等等。

但请记住，FSM 更像是一种设计结构——一种设想手头问题解决方案的方法。您不必一定要使用它们。你可以在没有状态机的情况下制作一个完整的游戏（我认为 :)）。但是 FSM 使您的代码设计非常直观和直接，坦率地说，在任何规模合适的项目中都很难找到它。

我建议你看一下 FSM 的一些代码示例。一旦你明白了它背后的想法，你会发现自己到处都在使用它们 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:56:59.777

作为第一步，你应该通过板球规则和你的球结果模型来总结以前的球如何影响给定的球。

然后确定你需要跟踪什么，以及使用状态机来表示它是否方便。例如，作为 FSM 跟踪统计数据通常不是很方便。

考虑到这些信息，您应该能够构建模型。您需要跟踪的信息可能是状态机或特定状态的内部值。球之间的相互作用将决定从一台机器到另一台机器循环的转换和事件。

# android - Android - 如何测量 Y 轴的加速度但没有倾斜引起的加速度

> ID：14263618
> 
> 赞同：1
> 
> 时间：2013-01-10T17:21:45.960
> 
> 标签：android, accelerometer, horizontalscrollview, shake, tilt

基本上，我正在尝试`HorizontalScrollView`使用本机`Accelerometer`Y 轴测量值滚动浏览。

它在某种意义上是有效的，需要微调很多东西，但滚动视图确实会从头到尾移动，只需左右摇晃即可将平板电脑保持在一个恒定的平面上。

但是，我也可以通过倾斜设备来完成这一切，我不希望出现这种情况，我希望`HorizontalScrollView`仅通过在 Y 平面的正负方向上晃动来移动。

是不是受这种倾斜运动的影响很大，我以为旋转是由陀螺仪测量的，而加速度计测量设备在某个平面上的加速度？

现在还为时过早，我有一些想法，但我想知道是否有人以前遇到过这个问题？

干杯。

# ruby-on-rails - 是否可以在视图中定义新变量？

> ID：14263621
> 
> 赞同：0
> 
> 时间：2013-01-10T17:21:58.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3

是否可以在视图中定义新变量？
我有这样的代码。但我得到了错误`undefined local variable or method "who"`

```
<% @posts.each do |post| %>

    <tr id="<%= dom_post_id(post) %>">

        <% if post.user.id == who %>
            <td><%= post.user.nickname if post.user %></td>
            <td><div class="bubble me"><%= post.body %></div></td>
            <td></td>
        <% else %>
            <td></td>
            <td><div class="bubble you"><%= post.body %></div></td>
            <td><%= post.user.nickname if post.user %></td>     
        <% end %>
    </tr>
    <% who = post.user.id %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:23:31.047

是的，这是可能的，但就像普通的 ruby​​ 一样，你应该给它一个值，然后再与它进行比较。

这里：

```
<% if post.user.id == who %> 
```

`who`还没有在任何地方看到，所以红宝石不知道这是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:23:37.090

问题在这里：

```
<% if post.user.id == who %> 
```

你还没有定义`who`。您稍后使用 定义它`<% who = post.user.id %>`，但是当第一次进入循环时，`who`尚未定义。

您需要在使用它之前定义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:40:45.867

在实际使用之前将 who 移到顶部

```
<tr id="<%= dom_post_id(post) %>">
    <% who = post.user.id %>
    <% if post.user.id == who %>
        <td><%= post.user.nickname if post.user %></td>
        <td><div class="bubble me"><%= post.body %></div></td>
        <td></td>
    <% else %>
        <td></td>
        <td><div class="bubble you"><%= post.body %></div></td>
        <td><%= post.user.nickname if post.user %></td>     
    <% end %>
</tr> 
```

高温高压

# ssl - 在开发盒上使用 SSL

> ID：14263623
> 
> 赞同：0
> 
> 时间：2013-01-10T17:22:00.690
> 
> 标签：ssl, asp.net-mvc-4

我需要确保我的 Web 应用程序使用 HTTPS 来获取安全的帐户信息。所以我按照 Hanselman 的博客文章进行了设置：

[使用 IISExpress 在开发时使用 SSL 更容易](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)

一切都像提到的那样工作。然而，几周前它停止工作并出现以下错误：

错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。

除了 Windows 更新之外，我没有更改本地框或我的代码上的任何内容。谁能告诉我怎么了？如果需要更多说明，我可以解释更多。

我的应用程序是带有 SQL Server DB 的 MVC4 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T09:00:43.003

[我按照scott hanselman 的帖子中](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)描述的步骤解决了这个问题。

以下步骤为我解决了这个问题：

1.  `makecert -r -pe -n "CN=<SOMENAME>" -b 01/01/2000 -e 01/01/2036 -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localMachine -sky exchange -sp "Microsoft RSA SChannel Cryptographic Provider" -sy 12`
2.  `netsh http delete sslcert ipport=0.0.0.0:44300`
3.  使用 MMC.exe 查找证书的指纹
4.  `netsh http add sslcert ipport=0.0.0.0:44300 appid={<SOMEGUID>} certhash=<THUMBPRINT>`

# c++ - 使用 cmd 启动程序

> ID：14263634
> 
> 赞同：0
> 
> 时间：2013-01-10T17:22:22.560
> 
> 标签：c++, file, cmd

我尝试制作一个可以打开其他一些程序（使用 cmd）的 C++ 程序。代码：

```
int main(){
int i=0,t;
string progs[100];
fstream db("db.txt",ios::in);
while(getline(db,progs[i++])) {}

for(t=0;t<i-1;t++) {
    string open="start "+progs[t];
    system(open.c_str());
}

system("pause");
return 0;
} 
```

程序位于桌面，适用于所有文件。问题是它无法打开名为 KBot.exe 的程序（它说该程序不存在）。例如，我在 db.txt 中写道：

```
patch.exe
KBot.exe
Shutdown + tasks.exe 
```

所有 3 个都位于桌面上，但程序只打开第一个和最后一个。是的，程序名称写得正确。是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:27:24.490

*   你的循环是错误的：`s/b (t=0;t<i;t++)`
*   `patch.exe`和 shutdown 可能在你的`$PATH`，`KBot`不是。

# java - 如何并排合并位图

> ID：14263639
> 
> 赞同：1
> 
> 时间：2013-01-10T17:22:36.713
> 
> 标签：java, android, bitmap, merge, android-canvas

我想将两个位图并排合并为一个位图。以下代码是合并子底部。如何并排合并到一个位图中？

 ````
public Bitmap mergeBitmap(Bitmap fr, Bitmap sc) 
{ 

    Bitmap comboBitmap; 

    int width, height; 

    width = fr.getWidth() + sc.getWidth(); 
    height = fr.getHeight(); 

    comboBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 

    Canvas comboImage = new Canvas(comboBitmap); 

    comboImage.drawBitmap(fr, 0f, 0f, null); 
    comboImage.drawBitmap(sc, 0f , fr.getHeight(), null); 
    return comboBitmap;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:26:55.520

```
public Bitmap mergeBitmap(Bitmap fr, Bitmap sc) 
    { 

        Bitmap comboBitmap; 

        int width, height; 

        width = fr.getWidth() + sc.getWidth(); 
        height = fr.getHeight(); 

        comboBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 

        Canvas comboImage = new Canvas(comboBitmap); 

        comboImage.drawBitmap(fr, 0f, 0f, null); 
        comboImage.drawBitmap(sc, fr.getWidth(), 0f , null); 
        return comboBitmap;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:17:36.053

本文[介绍](http://www.jondev.net/articles/Combining_2_Images_in_Android_using_Canvas)了将 2 张图像组合在一起的过程（仅适用于 PNG 或 JPG ）。它将涉及传递 2 个位图，然后将使用 Canvas 类进行组合。你可以做一些小的改动来让你的两个图像并排：

```
public Bitmap combineImages(Bitmap c, Bitmap s) { // can add a 3rd parameter 'String loc' if you want to save the new image - left some code to do that at the bottom 
    Bitmap cs = null; 

    int width, height = 0; 

    if(c.getHeight() > s.getHeight()) { 
      width = c.getWidth() + s.getWidth(; 
      height = c.getHeight()); 
    } else { 
      width = c.getWidth() + s.getWidth(); 
      height = s.getHeight(); 
    } 

    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 

    Canvas comboImage = new Canvas(cs); 

    comboImage.drawBitmap(c, 0f, 0f, null); 
    comboImage.drawBitmap(s, c.getWidth(), 0f, null); 

    // this is an extra bit I added, just incase you want to save the new image somewhere and then return the location 
    /*String tmpImg = String.valueOf(System.currentTimeMillis()) + ".png"; 

    OutputStream os = null; 
    try { 
      os = new FileOutputStream(loc + tmpImg); 
      cs.compress(CompressFormat.PNG, 100, os); 
    } catch(IOException e) { 
      Log.e("combineImages", "problem combining images", e); 
    }*/ 

    return cs; 
  } 
````

# iphone - 检测 iPhone / iPod 的颜色

> ID：14263640
> 
> 赞同：5
> 
> 时间：2013-01-10T17:22:38.693
> 
> 标签：iphone, ios, colors, ipod

> **可能重复：**
> [检测 iPhone/iPod touch 的颜色？](https://stackoverflow.com/questions/8463212/detecting-color-of-iphone-ipod-touch)

是否有可能检测到 iPhone / iPod 的颜色 - 无论是本机还是在移动浏览器中？

我正在与一位希望让网络应用程序响应设备颜色的设计师合作。

![在此处输入图像描述](../Images/c89e507a0c9cfa9f2d02b6039e902989.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:36:31.660

我不认为这是可能的。内部硬件（将所有组件和组件本身保持在一起的“主板”）是在不了解最终外壳的情况下制造的。对于软件（固件和 iOS）也是如此，因为所有设备都获得完全相同的软件的相同副本，字节对字节相同，除了可能嵌入在固件中的任何序列号。Apple 可能会针对不同的外壳使用不同的设备序列号范围，但这只是一种猜测。

这就像制造汽车：所有组件（发动机、电子设备等）都是同等制造的，无论最终汽车将涂上什么颜色。实际汽车已经完全组装好，所有硬件和所有软件，在上色之前就可以使用了；直到最后一秒，最终决定如何着色它可能会改变。

**更新**

我对这个话题做了更多的调查，我发现“疯狂的猜测”并不像我想象的那么疯狂。苹果似乎确实为不同的设备颜色使用了不同的序列号范围。序列号（以及类似的数字，如 iPhone 的 IMEI）是设备固件中唯一不同的部分。

Apple 过去使用以下序列号格式（不确定这是否仍然是最新的，但对于 iPhone 4 仍然是最新的）：

```
AABCCDDDEEE

 AA = ID of the factory that manufactured the device.
  B = Year of production: 8=>2008, 9=>2009, 0=>2010, 1=>2011, etc.
 CC = Week number of the year.
DDD = Production index number, is reset every week, base-34 encoded.
EEE = Model ID. 
```

有趣的值是“模型 ID”。同一代设备具有不同的型号 ID，具体取决于它们的颜色和可用存储量。

不过，我还没有找到所有可能值的完整列表。即使有这么一个完整的列表，你仍然需要保持更新，因为 Apple 不断发布新型号，所以列表可能会过时几个月（至少一年一次甚至两次）。以下是序列号 (EEE) 的最后 3 位数字的一些示例值：

```
VR0: iPhone 2G Silver 4GB
WH8: iPhone 2G Silver 8GB
0KH: iPhone 2G Silver 16GB
Y7H: iPhone 3G Black 8GB
Y7K: iPhone 3G Black 16GB
3NP: iPhone 3GS Black 16GB
3NR: iPhone 3GS Black 32GB
3NQ: iPhone 3Gs White 16GB
3NS: iPhone 3Gs White 32GB
A4S: iPhone 4 Black 16GB
A4T: iPhone 4 Black 32GB 
```

到目前为止，我还没有找到当前 iPod 代的任何样本值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:28:45.157

没有为此公开 API。

如果这是您希望 Apple 添加的内容，您应该在[http://bugreporter.apple.com](http://bugreporter.apple.com)提交增强请求。

# swt - 同步两个输入字段，而不构建无限循环？

> ID：14263641
> 
> 赞同：0
> 
> 时间：2013-01-10T17:22:43.000
> 
> 标签：swt, sync, textfield, infinite-loop

我有两个输入字段，我想彼此同步。不幸的是，当我向每个 TextFields 添加一个 ChangeListener 时，它们将相互触发，因此创建了一个 andless 循环。

当然，我可以在每次更改时取消注册监听器，然后他们将它们放回原处，但是有任何 Java 原生方法吗？

也许有绑定的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:26:50.230

从一般推理（即不知道 swt 或 java）：您可以添加一个布尔标志（可能是您的类成员） ，在您的*一个*`m_enteredChangeListener`处理程序（而不是两者）中临时将其设置为 true，如果以递归方式重新输入同一个处理程序，则它什么也不做.

# iphone - UITableViewController 无法识别的选择器发送到实例

> ID：14263644
> 
> 赞同：5
> 
> 时间：2013-01-10T17:22:57.640
> 
> 标签：iphone, ios, xcode, uitableview

当我传递一个整数时，我有一个 tableviewcontroller 和一个 detailtableviewcontroller

**-[UITableViewController setSurveyNumber:]: 无法识别的选择器发送到实例**

Bizard 的事情与 tableviewcontroller 的代码完全相同 - > uiviewcontroller

表 -> 表代码

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"pushSurveyDetails"])
    {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSInteger row = [indexPath row];

        SurveyDetailViewController *surveyController = [segue destinationViewController];
        surveyController.surveyNumber=row;

    }
} 
```

在 SurveyDetailViewController.h

```
@interface SurveyDetailViewController : UITableViewController
{

}

@property int surveyNumber;

@end 
```

SurveyDetailViewController.m

```
@implementation SurveyDetailViewController
@synthesize surveyNumber;
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"Survey Number is %i",surveyNumber);
} 
```

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T17:47:13.180

错误消息表明`[segue destinationViewController]`返回 a`UITableViewController`而不是 a`SurveyDetailViewController`如预期的那样。

控制器类可以在故事板文件中设置。

# ios - RestKit 0.20 NSCFConstantString valueForUndefinedKey 映射关系时出错

> ID：14263645
> 
> 赞同：2
> 
> 时间：2013-01-10T17:23:05.433
> 
> 标签：ios, core-data, mapping, restkit

所以我试图用看起来像这样的对象映射 JSON

```
{       
    "item_id": "0",
    "product_id": "217",
    "color_id": "55",
    "size_id": "37",        
    "images": [
        {
            "image_url": "http://www.foo.com/bar.jpg"
        }
    ]
}, 
```

我将它直接映射到核心数据实体“项目”。该实体与称为“图像”的实体“图片”具有一对多的关系。实体“图片”有一个 NSString 属性“image_url”。这是我的映射：

```
- (void) setupPicturesMapping
{
    picturesMapping = [RKEntityMapping mappingForEntityForName:@"Pictures" inManagedObjectStore:self.objectManager.managedObjectStore];

    picturesMapping.identificationAttributes = @[@"image_url"] ;    

    [picturesMapping addAttributeMappingsFromArray:@[@"image_url"]];

    RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:picturesMapping
                                                                                   pathPattern:@"get_pictures"
                                                                                       keyPath:nil
                                                                                   statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
    [self.objectManager addResponseDescriptor:responseDescriptor];
}

- (void) setupItemsMapping
{
itemsMapping = [RKEntityMapping mappingForEntityForName:@"Item" inManagedObjectStore:self.objectManager.managedObjectStore];

itemsMapping.identificationAttributes = @[@"item_id"] ;

[itemsMapping addAttributeMappingsFromArray:@[@"item_id", @"product_id", @"color_id", @"size_id"]];

[itemsMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"images" toKeyPath:@"images" withMapping:picturesMapping]];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:itemsMapping
                                                                                   pathPattern:@"get_items"
                                                                                       keyPath:nil
                                                                                   statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[self.objectManager addResponseDescriptor:responseDescriptor]; 
```

}

当我尝试加载项目时，我收到一个错误：**“由于未捕获的异常 'NSUnknownKeyException' 而终止应用程序，原因：'[<__NSCFConstantString 0x26f72b4> valueForUndefinedKey:]: 这个类不符合 key image_url 的键值编码。'”** .

有什么问题？

**更新**：对不起，第一次发布错误的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:03:40.533

我认为您在这里传递了错误的实体名称-

```
picturesMapping = [RKEntityMapping mappingForEntityForName:@"Pictures" inManagedObjectStore:self.objectManager.managedObjectStore]; 
```

通过“图片”而不是“图片”，例如-

```
picturesMapping = [RKEntityMapping mappingForEntityForName:@"Picture" inManagedObjectStore:self.objectManager.managedObjectStore]; 
```

# database - 第二范式

> ID：14263648
> 
> 赞同：0
> 
> 时间：2013-01-10T17:23:08.177
> 
> 标签：database, normalization

我有个问题：

考虑到关系 R{ ***A*** , ***B*** , ***C*** ,D,E,F} 与下一组函数依赖关系`{ABC->DEF,D->E,ABC->A}.`A、B 和 C 是主键。

你能解释一下为什么这是在第二个NF吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:58:33.370

> 你能解释一下为什么这是在第二个NF吗？

我不太确定“为什么这是在 2nd NF”是什么意思。（错字？）但关系 R 不在 3NF 中，因为存在传递依赖：ABC->D 和 D->E。所以关系 R*必须*在 1NF 或 2NF 中。

关系 R 是 2NF 当且仅当

*   它在 1NF 中，并且
*   没有部分关键依赖关系。

ABC->A 可能*看起来*像一个部分键依赖，但它不是，因为“A”是一个主要属性。（ABC->A 是一个微不足道的依赖，因为 A->A。）非主属性是 {DEF}。这些属性中没有一个在功能上仅依赖于任何候选键的一部分（更一般的说法是它们在功能上不依赖于*该*关系的主键的一部分）。

所以关系 R 在 2NF 中。

# python - vtk : 创建一个线切割器

> ID：14263650
> 
> 赞同：0
> 
> 时间：2013-01-10T17:23:09.287
> 
> 标签：python, vtk

我正在尝试`mygrid`使用 vtkCutter 在 3D 字段（vtkStructuredGrid 或 vtkUnstructuredGrid）中提取 1D 线。一种肮脏的方法是使用 vtkPlane 执行第一个 vtkCutter`myplane1`并使用 vtkPlane 将另一个 vtkCutter 应用于输出`myplane2`。该解决方案似乎可行，但我想做的是使用 vtkImplicitBoolean 创建实际线，然后仅应用一个具有此功能的 vtkCutter 但我不确定此 vtkImplicitBoolean 是如何工作的。显而易见的事情是：

```
myline = vtk.vtkImplicitBoolean()
myline.SetOperationTypeToIntersection()
myline.AddFunction(myplane1)
myline.AddFunction(myplane2)

cutter = vtk.vtkCutter()
cutter.SetCutFunction(myline)
cutter.SetInput(mygrid)
cutter.Update()
line = cutter.GetOutput() 
```

但这并没有返回我期望的结果：输出是由两个半平面组成的 2D 切割......我试图改变布尔运算（联合，差异）但似乎没有任何效果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:47:36.180

似乎 vtkCutter 只能将您的对象尺寸减小 1：3D 到 2D 或 2D 到 1D。vtkCutter 文档说：`In VTK, cutting means reducing a cell of dimension N to a cut surface of dimension N-1.`

这就是为什么连续平面切割有效而双平面切割无效的原因。

# javascript - 如何判断 swf 何时完成从 javascript 加载？

> ID：14263661
> 
> 赞同：1
> 
> 时间：2013-01-10T17:23:43.713
> 
> 标签：javascript, actionscript-3, flash

我需要知道我的 swf 何时准备好开始播放（例如初始加载程序已完成下载）。我知道我可以在 swf`ExternalInterface.call('someJSFunc')`中的`[loader][1]`处理程序中使用，但如果可能的话，我宁愿没有这种依赖。

在 JS 中有更好的方法吗？到目前为止，我唯一想到的是：

```
// continually check if the flash is ready
var int = setInterval(function(){
    var fl = $('#flashMovie').get(0);
    if (fl) {
        doThings();
        clearInterval(int);
    }
}, 50); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:57:57.613

`swfobject.embedSWF(swfUrl, id, width, height, version, expressInstallSwfurl, flashvars, params, attributes, callbackFn)`

不确定这是否会对您有所帮助，但 swfobject 的最后一个参数是一个回调函数，在创建 swf 标记时会调用该函数。

`callbackFn (JavaScript function, optional) can be used to define a callback function that is called on both success or failure of creating a Flash plug-in <object> on the page (see API documentation)`

更多信息[在这里](http://code.google.com/p/swfobject/wiki/documentation)：

# javascript - client_side_validation gem - 布尔值作为复选框

> ID：14263663
> 
> 赞同：0
> 
> 时间：2013-01-10T17:23:51.230
> 
> 标签：javascript, ruby-on-rails, validation, simple-form, client-side-validation

我正在使用 client_side_validation gem 在我的应用程序中进行 js 验证。我正在使用 simple_form 版本。

我的权限模型中有一个经过验证的布尔属性

```
 class Permission < ActiveRecord::Base
   validates :local, :regional, :national, :inclusion => {:in => [true, false]}
 end 
```

但是在视图中，它们被呈现为复选框，其值为 1 或 0，因此它们永远不会被标记为已验证。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:46:26.403

您必须设置`:validate => false`复选框。例如

```
<%= simple_form_for @permission, :validate => true do |f| %>
  <%= f.input :name, :label => 'Name' %>
  <%= f.label :local %>
  <%= f.check_box :local, :validate => false %>
  <%= f.label :national %>
  <%= f.check_box :regional, :validate => false %>
  <%= f.label :regional %>
  <%= f.check_box :national, :validate => false %>
  <%= f.button :submit %>
<% end %> 
```

由于复选框的定义是真或假，客户端验证并不是真正必要的。通过服务器端验证，您仍然可以防止有人试图恶意提交非布尔值。

# android - 为什么 ProgressBar 的 id 必须是唯一的？

> ID：14263665
> 
> 赞同：2
> 
> 时间：2013-01-10T17:23:55.183
> 
> 标签：android, android-progressbar, layout-inflater

我声明了一个空的 LinearLayout，在我的 onCreate 方法中我调用了一个函数，该函数有一个重复五次的循环来膨胀另一个布局并将其添加到我的 LinearLayout。

```
private void setupList() {
    LayoutInflater layoutInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout itemList = (LinearLayout) findViewById( R.id.itemList );
    itemList.removeAllViews();
    for ( Category category :: categories ) {
        View rowView = layoutInflater.inflate(R.layout.category_row, null);
        initializeRow( rowView, category.percentComplete );
        itemList.addView( rowView );
    }
} 
```

然后在我的 initializeRow 方法中，我初始化了一个 TextView 和 ProgressBar，它们位于我刚刚膨胀的视图中。

```
private void initializeRow( final View view, final int percentComplete ) {
    TextView topicView = ((TextView) view.findViewById(R.id.topic));
    topicView.setText( category.title );

    ProgressBar progressBar = (ProgressBar) view.findViewById( R.id.progressBar );
    progressBar.setMax( 100 );
    progressBar.setProgress( percentComplete );

    TextView textView = (TextView) view.findViewById( R.id.progressText );
    textView.setText( percentComplete "% Complete" ); 
} 
```

第一次创建此活动时，进度条和文本视图会以正确的值显示。但是，如果我旋转我的设备，TextViews 会以正确的值显示，但所有 ProgressBars 都会显示与最后一个 ProgressBar 对应的进度。为什么这在最初调用 onCreate 时有效，但在设备旋转后调用 onCreate 方法时无效？

我意识到所有的 ProgressBars 都有相同的 id。但是在我的代码中，我通过使用我膨胀的视图的 findViewById 来获取对特定 ProgressBar 的引用。我可以通过调用给每个 ProgressBar 一个唯一的 id 来完成这项工作

```
 progressBar.setId( progressBarIds[ position ] ); 
```

在我的 initializeRow 方法中。我很好奇这种行为是由 ProgressBar 中的某些错误引起的，或者是否有一些我不理解的关于 layoutInflaters 或 ProgressBars 的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:25:53.763

`onCreate`和旋转事件之间的区别在于，在`onCreate`您连续膨胀只有 1 个进度条的视图。当您调用时`view.findViewById( R.id.progressBar );`，只能找到 1 个可能的进度条。然后将其值设置为 percentComplete。

当您旋转手机时，Android 会销毁并创建活动。然后它还尝试恢复活动的控件/视图的值。它将视图的值和 ID 保存在一个包中，然后尝试从那里恢复它们。我怀疑由于所有进度条都具有相同的 id，因此在从包中读取值时，只有分配给该 id 的值。即，对于每个控件，它都会检查其 id，并尝试在包中找到相应的值。由于它们都具有相同的 id，因此它们都具有相同的值。

考虑这是保存到包的代码：bundle. [putInt](http://developer.android.com/reference/android/os/Bundle.html#putInt%28java.lang.String,%20int%29)（“valueKey”，整数），可能所有进度条最终都具有相同的键。

但不管值是如何存储的，这`id`都是将每个进度条与其他进度条分开的方法。系统如何知道哪个是哪个？

由于进度条的数量取决于类别的数量，您可能必须自己处理[活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)。可能会实现您自己的[`onSaveInstanceState()`](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和[`onRestoreInstanceState()`](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)功能，以便您可以存储每个类别百分比，以便您可以在需要恢复它们时告诉它们。

# database - 单选按钮无法输入数据库

> ID：14263671
> 
> 赞同：0
> 
> 时间：2013-01-10T17:24:11.433
> 
> 标签：database, yii, radio-button

这是我的看法：

```
<td><?php echo $form->labelEx($model,'Is Scholarship?'). $model->is_scholar;?></td>
<td><?php echo Chtml::radioButton($model->is_scholar,'',array('separator'=>'<br/>','class'=>'e'.$arrMF[8],'disabled'=>$isVerify,'id'=>'scholaryes','value'=>'Yes','onclick'=>'$("#scholar").show();$("#scholarno").removeAttr("checked");'));?>Yes<br/>
<?php echo Chtml::radioButton($model->is_scholar,'',array('separator'=>'<br/>','class'=>'e'.$arrMF[8],'disabled'=>$isVerify,'id'=>'scholarno','value'=>'No','onclick'=>'$("#scholar").hide();$("#scholaryes").removeAttr("checked");'));?>No</td>
<td><?php echo $form->error($model,'is_scholar');?></td> 
```

如果我选择两者中的任何一个，它将被输入数据库并保存为默认值。我就是做不到。我怎样才能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:10:37.180

保持简单，试试[CActiveRecord::radioButtonList](http://www.yiiframework.com/doc/api/1.1/CActiveForm#radioButtonList-detail)：

```
echo $form->radioButtonList($model, 'is_scholar', array(
    'yes' => 'Yes',
    'no' => 'No'
), array('separator' => '<br>')); 
```

或者如果它是布尔列：

```
echo $form->radioButtonList($model, 'is_scholar', array(
    1 => 'Yes',
    0 => 'No'
), array('separator' => '<br>')); 
```

# .net - 可移植类库版本控制

> ID：14263673
> 
> 赞同：2
> 
> 时间：2013-01-10T17:24:19.110
> 
> 标签：.net, portable-class-library

我正在使用 VB.NET 可移植类库将我的模型对象保存在 WinRT C#/XAML 应用程序中。当我使用可移植类库时，版本号始终是 1.0.0.0——我还没有找到一种方法来用更相关的值覆盖它，更不用说增加它了。属性页没有提供我找到的选项，也没有可移植类库的配置文件。

有谁知道如何在可移植类库上设置/增加版本号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:38:03.067

你指的是汇编版本吗？您可以使用 AssemblyVersionAttribute 进行设置，默认情况下在 AssemblyInfo.cs 文件中：

```
[assembly: AssemblyVersion("1.0.0.0")] 
```

# jquery - 使用 JQuery UI Draggable Widget 实现自动滚动

> ID：14263676
> 
> 赞同：2
> 
> 时间：2013-01-10T17:24:23.520
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我正在使用[jQuery UI Draggable 小部件](http://api.jqueryui.com/draggable/)。除了我现在需要添加自动滚动之外，它运行良好。也就是说，在拖动时，我想在鼠标位于窗口顶部或底部时滚动浏览器窗口。

我在 C 和 C++ 中做这样的事情有很多经验。我会设置一个标志来指示正在进行拖动操作。在鼠标移动消息处理程序中，我会设置一个计时器。在计时器的处理程序中，我会在适当的方向滚动窗口。当鼠标离开“触发”区域时，我会关闭计时器。我会使用一个计时器，这样即使鼠标没有移动，滚动也是有规律的。

谁能提供一些关于我如何开始使用 jQuery 和 Draggable 小部件的建议？有鼠标移动处理程序吗？我可以判断鼠标是在窗口的顶部还是底部？我可以滚动浏览器窗口吗？那么计时器问题呢？一种想法是为“触发”区域显示一些叠加层，但我的 jQuery 技能有些有限。或者，更好的是，我确信有人已经做过这样的事情了。有什么例子吗？

*注意： Draggable 小部件支持自动滚动，但它会滚动容器元素。我需要滚动浏览器窗口。*

**编辑**

我尝试将 Containment 选项设置为“document”，但没有明显效果。

```
$('.drag-handle').draggable({ 
  axis: "y",
  containment: "document",
  scroll: true,
  helper: buildHelper
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T08:04:18.530

基本上，它与您的代码一起使用：http: [//jsfiddle.net/DgzAH](http://jsfiddle.net/DgzAH)但用户必须始终稍微移动鼠标以激活自动滚动。

几个月前我写了一些代码来滚动一个`div`当元素拖动而不移动鼠标的时候：

[拖动元素而不移动鼠标时滚动div](https://stackoverflow.com/questions/10434906/scroll-div-when-element-is-dragging-without-moving-mouse)

这个想法是检查拖动的元素位置并`setInterval`在拖动事件位置位于我的边框的 70px 时创建一个函数`div`。在您的情况下，页面包装器或直接`body`：http: [//jsfiddle.net/pPn3v/22/](http://jsfiddle.net/pPn3v/22/)

# jqgrid - JqG rid 自定义搜索重载网格

> ID：14263679
> 
> 赞同：0
> 
> 时间：2013-01-10T17:24:28.377
> 
> 标签：jqgrid

早上，我正在使用 jqGrid 4.4.1 - jQuery Grid。我有下一个问题。我有一个自定义搜索按钮，它允许使用一些参数过滤数据

```
 $('#BtnConsultar').click(function() {
        parametros.NoSolicitud = $("#TxtNoSolicitud").val();
        parametros.TipoSolicitud = $("#CbTiposSolicitud").val();
        parametros.IdUsuario = $("#TxtIdUsuario").val();
        parametros.Proveedor = $("#TxtProveedor").val();
        parametros.FechaUltModificacionDesde = $("#TxtFechaUltModificacionDesde").val();
        parametros.FechaUltModificacionHasta = $("#TxtFechaUltModificacionHasta").val();
        parametros.FechaBorradoDesde = $("#TxtFechaBorradoDesde").val();
        parametros.FechaBorradoHasta = $("#TxtFechaBorradoHasta").val();
        jQuery('grid').jqGrid('clearGridData');
        $("#GrdResultadoConsulta").jqGrid('setGridParam', { postData: { parametroJSON: JSON.stringify(parametros)} });
        $('#GrdResultadoConsulta').trigger("reloadGrid", [{ current: true}]);
        return true;
    }); 
```

但是，如果在过滤数据之前，我有一个 10 组（2 页）中有 20 行的网格，并且我想要过滤的数据在网格不显示的第二页中。我认为这是一个排序问题，因为如果我按列排序，网格会显示该行。

任何有一些解决方案的人？

这是我的网格代码

```
$("#GrdResultadoConsulta").jqGrid({
        url: '<%= Url.Action("GridConsultaSolicitudeEliminadas")%>',
        postData: { parametroJSON: JSON.stringify(parametros) },
        datatype: 'json',
        mtype: 'GET',
        colNames: ['No.Solicitud', 'Tipo Solicitud', 'Usuario', 'Proveedor', 'Fecha Creación', 'Fecha Modificación', 'Fecha Borrado', 'Id Notificacion', 'SolicitudesEliminadasID'],
        colModel: [
                { name: 'SolicitudID', index: 'SolicitudID', width: 75, align: 'left', sortable: true, resizable: false },
                { name: 'DescTipoSolicitud', index: 'TipoSolicitud', width: 75, align: 'center', sortable: true, resizable: false },
                { name: 'Usuario', index: 'IdUsuario', width: 200, align: 'left', sortable: true, resizable: false },
                { name: 'Proveedor', index: 'NumProv', width: 200, align: 'left', sortable: true, resizable: false },
                { name: 'FechaInicio', index: 'FechaInicio', width: 75, align: 'right', sortable: true, resizable: false },
                { name: 'FechaModificacion', index: 'FechaModificacion', width: 75, align: 'right', sortable: true, resizable: false },
                { name: 'FechaBorrado', index: 'FechaBorrado', width: 75, align: 'right', sortable: true, resizable: false },
                { name: 'IdNotificacion', width: 75, align: 'right', sortable: false, resizable: false },
                { name: 'SolicitudesEliminadasID', hidden: true }
            ],
        pager: $('#GrdResultadoConsultaPager'),
        rowNum: 10,
        sortname: 'SolicitudID',
        sortorder: 'asc',
        autowidth: true,
        height: '250px',
        viewrecords: true,
        caption: 'Resultado de consulta solicitudes eliminadas',
        loadtext: "Cargando información ...",
        hidegrid: false,
        loadComplete: function() { },
        onSelectRow: function(id) { }
    }).navGrid('#GrdResultadoConsultaPager', { edit: false, add: false, search: false, del: false }); 
```

谢谢..

PD：对不起英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:39:11.493

我发现了我的错误。

错误不在网格中，而在存储过程中。

解决方案：将过滤器移动到 CTE 指令而不是最终查询结果中。

问候

# jquery - jQuery 滑动以向上/向下滚动

> ID：14263682
> 
> 赞同：0
> 
> 时间：2013-01-10T17:24:32.123
> 
> 标签：jquery, scroll, swipe

我想制作一个平板电脑网站，`<section>`在滑动事件之间向下滚动。

我是一个 jQuery 新手。我尝试了一些库，但对我没有任何帮助。

我只需要向上/向下而不需要水平滚动。

即让用户滑动，页面向下滚动一页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:50:02.930

您需要做两件事：(a) 是一种“收听”滑动事件的方法，以及 (b) 一种自行进行分页以响应事件的方法。甚至可能有一个解决方案可以两者兼得。我现在没有任何建议。

注意：以下是我的原始答案，在获得更多详细信息后，这不是 OP 想要的。

你需要滚动整个页面吗？或只是一个部分（例如 DIV）。`overflow: scroll`考虑一下你的css属性`DIV`是否足够。

检查这个[小提琴](http://jsfiddle.net/frozenkoi/Am3jE/1/)

HTML：

```
<p>blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p>
<div id="ScrollArea">This should <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>scroll</div>
<p>blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah blah</p> 
```

CSS：

```
#ScrollArea {border: 1px dotted red; height: 6ex; overflow: scroll} 
```

# regex - 电子邮件地址的正则表达式不接受 .cat

> ID：14263683
> 
> 赞同：0
> 
> 时间：2013-01-10T17:24:36.620
> 
> 标签：regex

我从来没有真正研究过正则表达式，所以不要真正理解它

我有以下测试电子邮件地址的正则表达式

```
^([\\w]+)(\\.[\\w]+)*@([\\w\\-]+\\.){1,5}([A-Za-z]){2,4}$ 
```

当我输入`example@example.cat`它失败但当我输入`example@example.com`它工作......谁能解释这是为什么？

**编辑**

一直在研究代码，对于上述电子邮件地址，这个正则表达式会失败吗？

```
^\\w[-._\\w]*\\w@\\w[-._\\w]*\\w\\.\\w{2,6}$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:33:20.907

该正则表达式不会失败，`.cat`但匹配`.com`您必须有其他问题导致您看到的行为，这是对以下内容的解释`regex`：

```
^([\w]+)(\.[\w]+)*@([\w-]+\.){1,5}([A-Za-z]){2,4}$/

^ Start of string

1st Capturing group ([\w]+) 
Char class [\w] infinite to 1 times matches one of the following chars: \w
\w Word character [a-zA-Z_\d] 

2nd Capturing group (\.[\w]+) infinite to 0 times 
\. Literal .
Char class [\w] infinite to 1 times matches one of the following chars: \w
\w Word character [a-zA-Z_\d] 
@ Literal @

3rd Capturing group ([\w-]+\.) 5 to 1 times 
Char class [\w-] infinite to 1 times matches one of the following chars: \w-
\w Word character [a-zA-Z_\d] 
\. Literal .

4th Capturing group ([A-Za-z]) 4 to 2 times 
Char class [A-Za-z] matches one of the following chars: A-Za-z

$ End of string 
```

并且第二个也将接受正确的转义（在大多数语言中，双反斜杠会导致两者不匹配）：

```
/^\w[-._\w]*\w@\w[-._\w]*\w\.\w{2,6}$/

^ Start of string

\w Word character [a-zA-Z_\d] 
Char class [-._\w] infinite to 0 times matches one of the following chars: -._\w
\w Word character [a-zA-Z_\d] 
\w Word character [a-zA-Z_\d] 

@ Literal @

\w Word character [a-zA-Z_\d] 
Char class [-._\w] infinite to 0 times matches one of the following chars: -._\w

\w Word character [a-zA-Z_\d] 
\w Word character [a-zA-Z_\d] 

\. Literal .

\w 6 to 2 times Word character [a-zA-Z_\d] 

$ End of string 
```

# sql - SQL Server 2008 - 查询以奇数和偶数列排序

> ID：14263685
> 
> 赞同：1
> 
> 时间：2013-01-10T17:24:41.397
> 
> 标签：sql, sql-server-2008

我有麻烦了，我需要一个快速的答案，拜托。

我有一张表，其中有一列只包含奇数和偶数。

我想首先只选择`orderByColumn`包含奇数的行，然后将结果添加到“偶数查询”

我的桌子看起来像这样

```
col1   col2   orderByColumn  col4
...................................
 c       c         44          c
 c       c         45          c
 c       c         46          c
...................................
................................... 
```

我想我应该建立一个工会，我认为应该是这样的：

```
select * from myTable 
where [orderByColumn] % 2 = 0  --order by [orderByColumn]-->error

UNION

select * from myTable 
where [orderByColumn] % 2 > 0  order by [orderByColumn] 
```

该查询确实合并了 2 个选择，但显然，它们被合并并按`orderByColumn` 我不想的顺序排列。

我希望结果如下所示：

```
c c 44 c
c c 46 c
c c 48 c
........
c c 45 c
c c 47 c
c c 49 c
........ 
```

有任何想法吗 ？谢谢：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:25:54.320

先试试这个偶数：

```
select *
from myTable
order by [orderByColumn]%2, orderbycolumn 
```

`desc`如果您首先想要奇数，请使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:42:24.053

您还可以使用您的排序值引入一列，例如

```
 select *, 
    case when [orderByColumn]%2=0 then 0 else 1 end as isOdd
    from myTable 
    order by 
    isodd , orderbyColumn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:08:37.683

试试这个

```
select 
   OrderByColumn 
from 
   table 
where 
  mod(OrderByColumn,2) = 0 

union all 

select 
   OrderByColumn 
from 
   table 
where 
    mod(OrderByColumn,2) >0 
```

# javascript - 如何从延迟返回值？

> ID：14263689
> 
> 赞同：3
> 
> 时间：2013-01-10T17:25:06.567
> 
> 标签：javascript, dojo, callback, deferred

我正在调用一个在延迟中具有一些逻辑的方法，当该逻辑完成时，我想将值返回给被调用者。见下文：

```
//Callee.js
var myAssistant = new Assistant();
console.log(myAssistant.whatIsTheValue());

//Assistant.js
whatIsTheValue : function(someArg) {
   var deferred = someService.getSomething();
   deferred.then(lang.hitch(this, this._getTheValue));

   //In theory, I want to return whatever this._getTheValue returns, how can I do that?!
}

_getTheValue() {
   ...
   ...
   return xyz;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:26:35.770

延迟是异步操作。因此，您不能以正常方式从它们返回变量，因为它们要等到当前函数上下文完成后才会执行。

如果您想使用该值做更多事情，则需要根据另一个回调（IE 链接 then 语句）来执行此操作。）

延迟的目的是为回调提供顺序操作。因此，您可以将它们链接起来以实现您想要的结果。如果您需要在当前执行上下文中提供结果，您将不得不找到一种同步（而不是延迟）方法来执行您想要的操作。

所以像这样

```
//Assistant.js
whatIsTheValue : function(someArg) {
   var deferred = someService.getSomething();
   var next = deferred.then(lang.hitch(this, this._getTheValue));
   next.then(/*insert next function here*/);
} 
```

您需要了解使用延迟的 lang.hitch 直到 whatistheValue 操作完成后才会执行。因此，您不必将值返回给任何名为 whatisthevalue 的函数，而是必须将处理该值的逻辑放入一个新函数中，并将其用作您的 deferred 的附加回调。这可能需要对您的程序进行一些重组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:31:39.817

我不知道你做了什么`lang.hitch`，但解决方案应该是这样的：

```
Assistant.prototype.whatIsTheValue = function(someArg) {
    var deferred = someService.getSomething();
    return deferred.then(lang.hitch(this, this._getTheValue));
//  ^^^^^^
};

var myAssistant = new Assistant();
myAssistant.whatIsTheValue().then(console.log); // use console.log.bind(console) in Chrome
//                           ^^^^ - it is a promise you return 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:34:20.937

改用 JQuery `$when`。

例子

```
// assuming both getData and getLocation return their respective Promise
var combinedPromise = $.when(getData(), getLocation())

// function will be called when both getData and getLocation resolve
combinePromise.done(function(data,location){
  alert("We got data: " + dataResult + " and location: " + location);
}); 
```

[http://www.html5rocks.com/en/tutorials/async/deferred/](http://www.html5rocks.com/en/tutorials/async/deferred/)

# ios - 需要帮助在 iOS 中关闭电子邮件编辑器屏幕

> ID：14263690
> 
> 赞同：2
> 
> 时间：2013-01-10T17:25:09.650
> 
> 标签：ios, uiviewcontroller, mfmailcomposeviewcontroller

我有一个应用程序，允许用户从他们的 iPhone 发送测试电子邮件。我的应用程序调用一个方法来激活撰写邮件功能，如下所示：

```
-(void)displayComposerSheet
{

    //set up a way to cancel the email here
    //picker is an instance of MSMailComposeViewController already declared in the .h file

    [picker setSubject:@"Test Mail"];

    // Set up recipients

    // Attach an image to the email
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Icon" ofType:@"png"];
    NSData *myData = [NSData dataWithContentsOfFile:path];
    [picker addAttachmentData:myData mimeType:@"image/png" fileName:@"Icon"];

    // Fill out the email body text
    NSString *emailBody = @"This is a test mail.";
    [picker setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:picker animated:YES];
    NSLog(@"mail is working");

}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    emailLabel.hidden = NO;
    // Notifies users about errors associated with the interface
    switch (result)
    {
        case MFMailComposeResultCancelled:
            emailLabel.text = @"Mail sending canceled.";
            break;
        case MFMailComposeResultSaved:
            emailLabel.text = @"Mail saved.";
            break;
        case MFMailComposeResultSent:
        {
            emailLabel.text = @"Mail sent.";
            NSLog(@"It's away!");

            UIAlertView *emailAlertView = [[UIAlertView alloc] initWithTitle:@"Sent!" message:@"Mail sent successfully." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [emailAlertView show];
            [self dismissModalViewControllerAnimated:YES];
            [self.navigationController popViewControllerAnimated:YES];

        }
            break;
        case MFMailComposeResultFailed:
        {
            emailLabel.text = @"Mail sending failed.";

        }
            break;
        default:
        {
            emailLabel.text = @"Mail not sent.";

        }
        break;
    }

} 
```

我的问题是当撰写电子邮件功能处于活动状态时，我无法退出此功能并返回我的应用程序。摆脱这种情况的唯一方法是实际继续并发送消息。导航栏的左上角有一个默认的“取消”栏按钮，单击该按钮后，我提供了三个选项：“删除草稿”、“保存草稿”和“取消”。如果我选择“删除草稿”，它只会将我返回到撰写消息屏幕。我有没有办法让用户在启动撰写邮件功能后但在发送之前返回应用程序？有没有办法为“取消”栏按钮添加额外的功能来实现这一点？

提前感谢所有回复的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:28:40.167

您必须`MFMessageComposeViewControllerDelegate`使用该`- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result`方法来实现。

您将在此方法中关闭您的消息视图。

编辑：我很困惑，`MFMailComposeViewControllerDelegate`但目的与`MFMessageComposeViewControllerDelegate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:44:25.473

在您的方法中查看您自己的代码`...didFinishWithResult:`：

```
 case MFMailComposeResultCancelled:
        emailLabel.text = @"Mail sending canceled.";
        break;
    case MFMailComposeResultSaved:
        emailLabel.text = @"Mail saved.";
        break;
    case MFMailComposeResultSent:
    {
        emailLabel.text = @"Mail sent.";
        NSLog(@"It's away!");

        UIAlertView *emailAlertView = [[UIAlertView alloc] initWithTitle:@"Sent!" message:@"Mail sent successfully." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [emailAlertView show];
        [self dismissModalViewControllerAnimated:YES];
        [self.navigationController popViewControllerAnimated:YES];

    } 
```

当结果是`MFMailComposeResultSent`您关闭模式视图控制器并弹出导航堆栈时，这会导致邮件撰写视图控制器消失，并且还会弹出堆栈以删除呈现撰写视图控制器的视图控制器。但是，当结果为`MFMailComposeResultCancelled`时，您只需设置一些标签的文本。对`MFMailComposeResultSaved`. 如果您希望撰写视图控制器在用户取消或保存时消失，您也需要在这些情况下关闭消息撰写视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T08:25:38.147

您应该在视图控制器中添加此方法

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
    [self becomeFirstResponder];
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

希望这个可以帮助一些人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T05:38:17.640

设置 MFMailComposeViewController 的委托 MFMailComposeViewController *mailcomposer = [[MFMailComposeViewController alloc]init];

mailcomposer.mailComposeDelegate = self;

并使用这个委托方法 -(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error

# android - 在android listview中显示整个表格数据

> ID：14263691
> 
> 赞同：0
> 
> 时间：2013-01-10T17:25:12.810
> 
> 标签：android

我将我的 sqlite 数据库保存在 assets 文件夹中。我需要获取整个表格数据，并应将其显示在列表视图中。即表格的每一行应该是列表视图的每一项。我怎样才能做到这一点？请在这方面帮助我。我致力于通过 php 和 json 从远程数据库服务器获取数据。我们可以使用相同的 json 从本地数据库获取数据吗？如果是这样，我该怎么做？

任何建议将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:36:29.963

您在该表中有多少列，如果您有更多列，那么您可能需要考虑在列表视图中显示大约 2 或 3 列而不是全部。

下面的教程帮助您从表中检索记录，请通过 [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# php - 在选项卡式 HTML 文件中显示 PHP 结果

> ID：14263693
> 
> 赞同：0
> 
> 时间：2013-01-10T17:25:18.797
> 
> 标签：php

早上好，

当我继续我的 PHP 之旅时，我试图在这里找出一些东西。我有一个选项卡式 HTML 文档。在一个选项卡中，我想将参数传递给 PHP 文件，进行计算并显示结果。问题是一旦单击提交按钮，整个选项卡体验就消失了，结果出现在新页面上。我想弄清楚的是如何将答案回显到用户所在的选项卡上。这是相关选项卡的代码，我有一个答案字段，我希望在其中填充查询结果。我将在这里向您展示有问题的部门：

```
<div id="tab1">
<p>Check a price</p>
<form action="rating.php" method="post">Miles: <input name="miles" type="text" /> 
<input name="submit" value="Submit" type="submit" /></form><br/>
<input type="text" value="<?php echo $ratepermile; ?>"></div> 
```

其中 $ratepermile 是来自 rating.php 查询的字段之一。而且，当然，如果我想对该文件进行任何其他计算，我希望能够传递这些答案并在选项卡中显示。

在 rating.php 中，它可以很好地连接到数据库，并且会很好地显示答案，但是会在新屏幕上显示。我是否遗漏了一些东西来确保我选择的值可用并传递回 HTML 文件？这是我用于选择的代码部分（我现在只在此代码中打印结果，假设此查询的结果在我需要的任何地方仍然对我全局可用。我不知道是否这就是它的工作原理，虽然哈哈。）

```
$miles = (int)$_POST['miles'];

try {
    $dbh = new PDO("mysql:host=$hostname;dbname=ratetable", $username, $password);

    echo 'Connected to database<br />';

    $sql = "SELECT * FROM rates WHERE mileage<=$miles ORDER BY mileage DESC LIMIT 1";
    foreach ($dbh->query($sql) as $row)
        { 
        print $row['ratepermile'] . <br />';
    }

    $dbh = null;
}
catch(PDOException $e)
    {
    echo $e->getMessage();
    }
?> 
```

谢谢你看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:31:18.670

您需要使用 AJAX 将带有参数的请求异步发送到您的 PHP 脚本，然后在服务器返回结果后在您的选项卡式页面上显示结果。如果您使用的是 jQuery，请查看`$.post()`.

# image - 如何在 WordPress 中的图像上获得文本叠加？

> ID：14263702
> 
> 赞同：-3
> 
> 时间：2013-01-10T17:25:32.917
> 
> 标签：image, wordpress, slideshow

我想在图像上叠加一些文本，并且正在使用 WordPress。

看到这个网站 - [http://www.gxigroup.com](http://www.gxigroup.com)

在站点的中心，您可以看到一个图像，其描述隐藏在左侧。单击“显示文本”按钮时，文本会出现在图像上。

我的问题是，如何在运行 WordPress 的网站上获得相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:38:36.627

您可以通过在 header.php 模板文件中添加一些 javascript 来实现。从这些开始，你应该能够得到它。

[http://codex.wordpress.org/Using_Javascript](http://codex.wordpress.org/Using_Javascript)

[http://wordpress.org/extend/plugins/tags/javascript-slider](http://wordpress.org/extend/plugins/tags/javascript-slider)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:59:33.747

它可以很容易地用 jQuery 完成。我建议你在谷歌上搜索“jquery slide panel examples”，那里有数百万个插件可以做你想要的效果。

他们中有一些：

*   [http://web-kreation.com/demos/Sliding_login_panel_jquery/#](http://web-kreation.com/demos/Sliding_login_panel_jquery/#)
*   [http://www.webdesignerwall.com/demo/jquery/simple-slide-panel.html](http://www.webdesignerwall.com/demo/jquery/simple-slide-panel.html)
*   [http://web-kreation.com/demos/login_panel_mooslide/](http://web-kreation.com/demos/login_panel_mooslide/)

# php - 如何使用正则表达式保存电子邮件的一部分

> ID：14263709
> 
> 赞同：-3
> 
> 时间：2013-01-10T17:26:00.747
> 
> 标签：php, regex

我有以下格式的电子邮件报告（标签（车辆，地址..）和冒号之间通常有不同数量的空格）：

```
- Vehicle               :Jeep Liberty
- Trigger             :161 Paris Cresent
- Address              :167 Paris Cres 
```

我正在尝试将地址信息保存到数据库中。我试过这个（虽然它只有一个词）：

```
$message='- Address             :167 Paris Cres';
if (preg_match('/(?<=Address             :)\S+/i', $message, $match)){
    echo $match[0] . "<br>";
}else{echo "fail <br>";} 
```

请帮助我使它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:56:55.773

仅使用分组匹配比使用后向匹配更容易。

```
$message='- Address             :167 Paris Cres';

if (preg_match('/\bAddress\s*:\s*(.+?)\s*$/mi', $message, $match)){
    echo $match[1] . "<br>";
}else{
    echo "fail <br>";
} 
```

# javascript - 如何获取 div javascript 的 ID 包含在其中？

> ID：14263717
> 
> 赞同：0
> 
> 时间：2013-01-10T17:26:26.113
> 
> 标签：javascript, html

我想在 div 中插入 javascript 来检索该 div 的 ID，如下所示：

```
<div id="example"><script>(retrieve id)</script></div> 
```

这有望返回“示例”。抱歉，如果以前有人问过这个问题，我确实检查过，但找不到。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:33:41.427

以下内容仅在您同步加载脚本而不使用 async 选项时才有效。

它只是计算加载时确实存在的脚本标签，假设它当前是最后一个（这就是异步可能会失败的原因），然后它正在查询它的父节点，即你的 div。

```
<div id="example">
  <script>
    (function () {
        var scripts = document.getElementsByTagName('script'),
            myScript = scripts[scripts.length - 1]

        console.log(myScript.parentNode.getAttribute('id')); 
     })();

</script>

</div> 
```

[http://jsfiddle.net/vy5Z7/1/](http://jsfiddle.net/vy5Z7/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:52:11.517

你能在脚本标签上放一个id吗？

```
<div id="example">
<script id="myScript">
  var myScript = document.getElementById('myScript');
  var myId = myScript.parentNode.id;
  alert(myId);
</script>
</div> 
```

[http://jsfiddle.net/abzLn/](http://jsfiddle.net/abzLn/)

# php - 脚本打印 Blob 在一个托管站点上工作，而不是在另一个托管站点上

> ID：14263718
> 
> 赞同：0
> 
> 时间：2013-01-10T17:26:28.110
> 
> 标签：php

我有一个打印图像的脚本（来自 mysql DB 的 Blob）。它在 Godaddy 上运行良好，但是当我将其移至英国托管公司时，它无法打印图像 - 而是打印替代文本（其他一切正常）。GD 是 PHP 5.3，英国公司是 PHP 5.2。两个 mysql 数据库都是 5。我检查了脚本是否相同，数据库中有正确的数据等。我现在不知道在哪里看。

该脚本被调用

```
echo "<img src = 'printimage1.php?recipetableID=$recipetableID'  alt='Picture does not display.'>"; 
```

printimage1.php 脚本看起来像

```
<?php
header("Content-type: image/jpg");
$recipetableID=$_GET['recipetableID'];
include("connect.inc");
$connection = mysql_connect($host,$user,$password)
   or die ("couldn't connect to server");
$db = mysql_select_db($database,$connection)
   or die ("Couldn't select database");  
$query = "SELECT * FROM RecipeTable WHERE recipetableID = '$recipetableID'";   
$result = mysql_query($query)
   or die ("Couldn't execute query.");
   while($row=mysql_fetch_array($result,MYSQL_ASSOC))
   {

        echo $row['Picture1content'];
   }
?> 
```

任何建议表示赞赏。约翰。

# delphi-2007 - 如何在 Delphi 中将浮点数转换为字符串，指定有效数字，而不是十进制数字（而不是 G 格式）

> ID：14263720
> 
> 赞同：2
> 
> 时间：2013-01-10T17:26:30.437
> 
> 标签：delphi-2007, formatting, significant-digits

我通常打印具有特定数量的十进制数字的数字，但我现在需要打印具有指定数量的有效数字的数字。数字需要像“1.23”而不是“1.2 E0”。我看到 Delphi 将使用 G 格式执行后者，但我看不到如何以前一种格式执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T15:31:44.730

使用格式：

`Format('%.3g',[Value]));`

'g' 指定有效数字，我会让你弄清楚 3 的含义......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-10T15:40:57.867

FormatFloat('0.000', YourFloatNumber)

使用尽可能多的零来表示数字。

# java - Java Files.write NoSuchFileException

> ID：14263725
> 
> 赞同：48
> 
> 时间：2013-01-10T17:26:46.723
> 
> 标签：java, file, file-io, filenotfoundexception

我正在尝试使用方法将一些文本写入文件`Files.write()`。

```
byte[] contents = project.getCode().getBytes(StandardCharsets.UTF_8);

try {
    Files.write(project.getFilePath(), contents, StandardOpenOption.CREATE);
} catch (IOException ex) {
    ex.printStackTrace();
    return;
} 
```

根据 API，如果文件不存在，则会创建并写入该文件。

但是，我明白了：

```
java.nio.file.NoSuchFileException: C:\Users\Administrator\Desktop\work\Default.txt
    at sun.nio.fs.WindowsException.translateToIOException(Unknown Source)
    at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
    at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
    at sun.nio.fs.WindowsFileSystemProvider.newByteChannel(Unknown Source)
    at java.nio.file.spi.FileSystemProvider.newOutputStream(Unknown Source)
    at java.nio.file.Files.newOutputStream(Unknown Source)
    at java.nio.file.Files.write(Unknown Source) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-10T17:28:44.913

您应该能够创建文件，但不能创建目录。您可能需要先检查目录是否`C:\Users\Administrator\Desktop\work`存在。

你可以做

```
Path parentDir = project.getFilePath().getParent();
if (!Files.exists(parentDir))
    Files.createDirectories(parentDir); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:32:57.227

如果使用默认的 OpenOptions 参数，将写入该文件。如果指定 CREATE，则不会使用默认参数，而是仅使用 CREATE。尝试在 CREATE 之外添加 WRITE，或者将该参数留空

# emacs - 在 Emacs 中自动突出显示符号

> ID：14263728
> 
> 赞同：5
> 
> 时间：2013-01-10T17:26:56.457
> 
> 标签：emacs, highlight, symbols

我正在寻找一种自动突出显示符号的方法，可能使用包`highlight-symbol.el`（[链接](http://www.emacswiki.org/emacs/HighlightSymbol)）。

我想知道，有没有办法让第一个参数`(setq )`自动突出显示？

(setq **thisshouldbehighlighted** 1)

..以及使用该符号的所有后续时间/将被使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:16:18.380

首先，下面的代码是基于highlight-symbol [1.2版本的。](https://github.com/nschum/highlight-symbol.el)旧版本缺少该功能`highlight-symbol-add-symbol`。

基本方法是在缓冲区中搜索“(setq”。实际的正则表达式有点复杂，因为它允许空格和句柄`defvar`和`defcustom`.

```
(defun highlight-all-symbols ()
  (interactive)
  (save-excursion
    (highlight-symbol-mode 1)
    (goto-char (point-min))
    (while (re-search-forward (concat "([ \t\n]*"
                                      "\\_<\\(?:"
                                      "setq\\|defvar\\|defcustom"
                                      "\\)\\_>[ \t\n]*"
                                      "\\(\\_<\\(?:\\sw\\|\\s_\\)+\\_>\\)")
                              nil t)
      (highlight-symbol-add-symbol (concat "\\_<"
                                           (regexp-quote (match-string 1))
                                           "\\_>"))))) 
```

您可能希望将代码包含在[模式挂钩中](http://www.emacswiki.org/emacs/ModeHooks)

```
 (add-hook 'emacs-lisp-mode-hook 'highlight-all-symbols) 
```

当然，简单地突出显示所有设置的符号`setq`并不是一个完美的解决方案，因为它忽略了变量名称空间。但是，正确处理这个是一项更大的任务，因为它需要解析代码。如果你想进入那个兔子洞，[这](https://github.com/nschum/company/blob/master/company-elisp.el)可能会给你一个想法，但恐怕它没有特别记录。

# android - Android 片段问题

> ID：14263730
> 
> 赞同：4
> 
> 时间：2013-01-10T17:27:10.153
> 
> 标签：android, android-layout, android-fragments

我正在使用 Fragments 来表示我的应用程序中的不同视图。在视图之间导航时，我使用以下代码替换片段：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.setCustomAnimations(R.anim.slide_in_right, R.anim.slide_out_left, R.anim.slide_in_left, R.anim.slide_out_right);
ft.replace(R.id.main_linearlayout_fragmentcont, frag);
ft.addToBackStack(null);
ft.commit(); 
```

我在旋转和重建活动时遇到了许多问题。我需要支持旧版本的 android，所以 android:configChanges="orientation" 不是一个选项。很多问题是由于 Android 如何保存 Fragment 状态的性质造成的。

这些是我遇到的问题：

1) 片段转换不记得我的弹出事件的自定义动画，当它们在旋转后自动恢复时。然而，他们确实记得我的 BackStack。我知道我可以编写自己的后处理程序，它使用动画进行替换并一起摆脱 pop 但我想知道是否有办法在调用 popBackStack() 之前重置动画或让 FragmentManager 记住旋转后自动恢复时的动画。

2）我遇到的另一个问题是我的一个顶级片段视图中有一堆子视图（线性布局），其中包含它们自己的片段。这些子视图以编程方式创建和填充。当我的片段在旋转后重新创建时，我以编程方式重建片段对象的 onCreateView 中的子视图，最终在每个子视图下都有重复的片段（1 - 我以编程方式创建和 1 - Android 片段从恢复创建）。我假设这是因为我在旋转后以相同的 ID 以编程方式重建子视图。有没有办法防止碎片被恢复？Android 何时将来自 savedState 的片段注入到我以编程方式构建的这些视图中？我将如何防止这种情况发生？

3) 上面的替换代码似乎为我的 frag (Fragment) 对象多次触发 onCreateView。这是没有轮换的，当我只运行一次上述代码时就会发生这种情况。是否有理由使用上述代码多次调用 Fragment 的 onCreateView？

关于 Fragments 的问题： 1）我可以阻止 Android 在重建 Activity 时自动恢复 Fragment 吗？我该怎么办？是基于LinearLayout的ID吗？我可以调用包含片段 onStop 的 LinearLayout 的 removeAllViews 吗？这样保存时视图不存在吗？

2) 有没有办法将片段添加到我有参考但没有 ID 的 LinearLayout？似乎片段添加、替换 API 需要一个 int ID。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:55:28.460

1）如果你知道如何让我知道，我也很生气

2）您可能正在调用`add`顶级片段内的 FragmentTransaction，但恢复操作也在添加，所以重复！选项 1.`replace`改为使用。选项 2.（首选）检查`if(savedInstances==null) { // do transaction } else { //let the system rebuilt it itself}`

3) 如果您正在更改作为片段一部分的视图的布局（通过调用添加或替换），则管理器调用该方法以再次创建视图。我仍然不确定这是一个错误还是一个功能，如果它是一个功能，为什么会这样。如果你发现让我知道

1）（应该是 4，不是吗？）不要弄乱布局，如果您想删除，请使用 删除它们`while(popBackStackImmediatly){}`，但是如果您深入了解系统在做什么，通常没有理由不让它自动完成。

2) （应该是 5，不是吗？）如果你有参考，你有 id [View.getId()](http://developer.android.com/reference/android/view/View.html#getId%28%29)

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T08:47:49.560

如果您要更改设备的方向，请检查活动中的验证，它还使用堆栈管理片段，因此在这种情况下您的流程不会损坏。

```
if(savedInstanceState == null) {

   mFragmentManager = getSupportFragmentManager();
   FragmentTransaction fragmentTransaction = 

   mFragmentManager.beginTransaction();

   FragmentOne fragment = new FragmentOne();

   fragmentTransaction.add(R.id.fragment_container, fragment);
   fragmentTransaction.commit();
} 
```

# arrays - 如何使用分隔符对字符串进行切片

> ID：14263733
> 
> 赞同：44
> 
> 时间：2013-01-10T17:27:13.633
> 
> 标签：arrays, go, slice

在 Go 中，如果我有一个字符串变量 s：

```
var s string = "a,b,c,d,e" 
```

如何将其转换或拆分或分解为切片或字符串数​​组，使其变为：

```
arr[0] = "a"
...
arr[4] = "e" 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-10T17:30:22.480

您应该`strings`为此使用该软件包。

```
stringSlice := strings.Split(s, ",") 
```

[http://play.golang.org/p/UKZbcuJUPP](http://play.golang.org/p/UKZbcuJUPP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-11T20:16:29.327

如果要忽略空元素，可以使用 [strings#FieldsFunc](//pkg.go.dev/strings#FieldsFunc)：

```
package main

import (
   "fmt"
   "strings"
)

func main() {
   s := ",a,,b,c,d,e,"
   arr := strings.FieldsFunc(s, func(r rune) bool {
      return r == ','
   })
   fmt.Printf("%q\n", arr) // ["a" "b" "c" "d" "e"]
} 
```

或[bufio#Scanner.Split](//pkg.go.dev/bufio#Scanner.Split)：

```
package main

import (
   "bufio"
   "strings"
)

func comma(data []byte, eof bool) (int, []byte, error) {
   if eof { return 0, nil, nil }
   a := -1
   for b, c := range data {
      if c == ',' {
         if a >= 0 {
            return b+1, data[a:b], nil
         }
      } else if a < 0 {
         a = b
      }
   }
   return len(data), data, nil
}

func main() {
   s := ",a,,b,c,d,e"
   arr := bufio.NewScanner(strings.NewReader(s))
   arr.Split(comma)
   for arr.Scan() {
      println(arr.Text())
   }
} 
```

# c++ - c++ -std=c++11 -stdlib=libc++ 在 osx lion 上给出错误

> ID：14263735
> 
> 赞同：3
> 
> 时间：2013-01-10T17:27:17.857
> 
> 标签：c++, macos, osx-lion, llvm, llvm-3.0

这应该是一个重复的问题。但是我用谷歌搜索了很多，但没有找到解决我问题的方法。

我正在尝试在 osx lion 上使用 c++11 标准功能，但它不起作用。我相信这个特性被称为列表初始化器。根据[http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)这个功能在 clang 3.1 中，这是我正在使用的版本。

下面是解释我的简单测试的 shell o/p。谁能告诉我我做错了什么？我忘了一面旗帜吗？

编译器是：

```
:tmp$ c++ --version
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix
:tmp$ which c++
/usr/bin/c++
:tmp$ ls -alt /usr/bin/c++
lrwxr-xr-x  1 root  wheel  7 Jul 12 13:17 /usr/bin/c++ -> clang++ 
```

操作系统是

```
:tmp$ uname -a
Darwin .local 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64 
```

测试文件是

```
:tmp$ cat test.cpp
#include <vector>

int main(){
  std::vector<int> vec1 {1,2,3};
  std::vector<int> vec2={1,2,3};
} 
```

编译器输出是

```
:tmp$ c++ -std=c++11 test.cpp
 test.cpp:4:20: error: non-aggregate type 'std::vector<int>' cannot be
      initialized with an initializer list
  std::vector<int> vec1 {1,2,3};
                   ^    ~~~~~~~
test.cpp:5:20: error: non-aggregate type 'std::vector<int>' cannot be
      initialized with an initializer list
  std::vector<int> vec2={1,2,3};
                   ^    ~~~~~~~
2 errors generated. 
```

好的，我不想到达那里，因为在stackoverflow上正确格式化以下内容需要很多时间。但是添加 -stdlib=c++ 会产生更多问题。现在我得到 14 个错误。

```
:tmp$ c++ -std=c++11 -stdlib=libc++ test.cpp 
In file included from test.cpp:1:
In file included from /usr/bin/../lib/c++/v1/vector:261:
In file included from /usr/bin/../lib/c++/v1/__bit_reference:15:
In file included from /usr/bin/../lib/c++/v1/algorithm:591:
/usr/bin/../lib/c++/v1/type_traits:737:2: error: #error is_base_of not
      implemented.
#error is_base_of not implemented.
 ^
/usr/bin/../lib/c++/v1/type_traits:1700:13: error: use of undeclared identifier
      'is_base_of'
            is_base_of<_Class, typename remove_reference<_Tp>::type>::value>
            ^
/usr/bin/../lib/c++/v1/type_traits:1700:24: error: '_Class' does not refer to a
      value
            is_base_of<_Class, typename remove_reference<_Tp>::type>::value>
                   ^
/usr/bin/../lib/c++/v1/type_traits:1697:28: note: declared here
template <class _Rp, class _Class, class _Tp>
                           ^
/usr/bin/../lib/c++/v1/type_traits:1700:62: error: expected class name
            is_base_of<_Class, typename remove_reference<_Tp>::type>::value>
                                                             ^
In file included from test.cpp:1:
In file included from /usr/bin/../lib/c++/v1/vector:261:
In file included from /usr/bin/../lib/c++/v1/__bit_reference:15:
In file included from /usr/bin/../lib/c++/v1/algorithm:594:
In file included from /usr/bin/../lib/c++/v1/memory:590:
In file included from /usr/bin/../lib/c++/v1/typeinfo:61:
/usr/bin/../lib/c++/v1/exception:194:20: error: use of undeclared identifier
      'is_base_of'
                  !is_base_of<nested_exception, typename ...
               ^
/usr/bin/../lib/c++/v1/exception:194:31: error: 'nested_exception' does not
      refer to a value
                  !is_base_of<nested_exception, typename ...
                              ^
/usr/bin/../lib/c++/v1/exception:166:29: note: declared here
class _LIBCPP_EXCEPTION_ABI nested_exception
                            ^
/usr/bin/../lib/c++/v1/exception:194:81: error: parameter declarator cannot be
      qualified
  ...typename remove_reference<_Tp>::type>::value
                                   ~~^
/usr/bin/../lib/c++/v1/exception:194:85: error: expected ')'
  ...typename remove_reference<_Tp>::type>::value
                                         ^
/usr/bin/../lib/c++/v1/exception:192:18: note: to match this '('
throw_with_nested(_Tp&& __t, typename enable_if<
                 ^
/usr/bin/../lib/c++/v1/exception:213:19: error: use of undeclared identifier
      'is_base_of'
                  is_base_of<nested_exception, typename ...
              ^
/usr/bin/../lib/c++/v1/exception:213:30: error: 'nested_exception' does not
      refer to a value
                  is_base_of<nested_exception, typename ...
                         ^
/usr/bin/../lib/c++/v1/exception:166:29: note: declared here
class _LIBCPP_EXCEPTION_ABI nested_exception
                            ^
/usr/bin/../lib/c++/v1/exception:213:80: error: parameter declarator cannot be
      qualified
  ...typename remove_reference<_Tp>::type>::value
                                   ~~^
/usr/bin/../lib/c++/v1/exception:213:84: error: expected ')'
  ...typename remove_reference<_Tp>::type>::value
                                         ^
/usr/bin/../lib/c++/v1/exception:211:18: note: to match this '('
throw_with_nested(_Tp&& __t, typename enable_if<
                 ^
test.cpp:4:20: error: non-aggregate type 'std::vector<int>' cannot be
      initialized with an initializer list
  std::vector<int> vec1 {1,2,3};
                   ^    ~~~~~~~
test.cpp:5:20: error: non-aggregate type 'std::vector<int>' cannot be
      initialized with an initializer list
  std::vector<int> vec2={1,2,3};
                   ^    ~~~~~~~
14 errors generated. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:31:57.553

添加`-stdlib=libc++`到您的编译器标志。请参阅[此帖子](http://marshall.calepin.co/llvmclang-and-standard-libraries-on-mac-os-x.html)以获取解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T19:40:05.283

您使用的版本是：

```
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn) 
```

尽管上面写的是“3.1”，但实际上与您查看的[C++ 状态页面](http://clang.llvm.org/cxx_status.html)所指的“3.1”不同。Apple 版本和 LLVM.org 版本本质上是不相关的。

Apple clang 3.1 版“基于 LLVM 3.1svn”，这意味着它基于 LLVM.org 源代码存储库中的“LLVM.org 3.1”预修订版，可能不具备最终 LLVM.org 3.1 版本的所有功能。

Apple clang 3.1 现在有点老了。从那时起，LLVM.org 已经发布了“3.1”和“3.2”版本，我认为 Apple 已经发布了“Apple clang 4.1”。您应该更新 Xcode 或查看其他地方是否安装了更新版本的 clang。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T18:47:07.237

## 解决方案

具体来说，我必须去 XCode 首选项-> 下载并安装“命令行工具”。这解决了问题。

## 说明

发生的只是一个过时软件的简单案例。由于 OSX 是最新的（通过软件更新），我假设所有 XCode 和编译器更新也都已到位。事实并非如此。

请注意对我所说的“我有最新版本的 XCode for Lion”问题的评论。但我没有。（bames53 在他的回答中提到了这一点）仅仅因为您在 OSX 软件更新中没有任何新更新并不意味着您拥有最新的 XCode 编译器。您可以通过 XCode Preferences 更新它。

在乔纳森的反馈和更多谷歌搜索的帮助下，[在 mac os x 的命令行中将 clang 与 libc++ 和 c++11 一起使用](https://stackoverflow.com/questions/13752233/using-clang-with-libc-and-c11-from-the-command-line-with-mac-os-x)解决了我的问题。

这实际上更新了 llvm 工具链。

```
$ c++ --version
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix 
```

# ios - 使用 UIImagePickerControllerSourceTypeCamera 的 CameraRoll 按钮？

> ID：14263743
> 
> 赞同：0
> 
> 时间：2013-01-10T17:27:53.350
> 
> 标签：ios, objective-c, xcode

我希望我的相机 ui 将具有常规的相机胶卷按钮。打开相机应用程序时拥有的那个。有没有一种简单的方法可以做到这一点，或者我必须使用自定义图层？尝试在文档中搜索但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:50:29.753

没有一种简单的方法可以做到这一点。您应该实现自己的自定义工具栏来复制相机应用程序的行为。您应该使用 imagePicker 的覆盖视图属性。查看[此链接](http://www.devsrealm.com/objective-c/custom-camera-app-1/)以获取可能的实现

# javascript - 从变量名加载 javascript 函数

> ID：14263746
> 
> 赞同：1
> 
> 时间：2013-01-10T17:28:05.097
> 
> 标签：javascript, function

如何从变量名加载 javascript 函数。例如：

```
var variable = 'world';

function helloworld()
{
 // blah
}

// I want to load helloword();
hello + variable + (); 
```

我将如何加载`helloworld()`这样的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:29:02.043

如果`helloworld`函数在[全局范围内](https://developer.mozilla.org/en-US/docs/DOM/window)定义，则使用：

```
window["hello" + variable](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:43:57.583

根据您有多少功能，您可以这样做：

```
var variable = "world"

var hello = {
  world : function() { /* Function contents */ },
  cat   : function() { /* Function contents */ },
  food  : function() { /* Function contents */ },
  …
}

hello[variable](); 
```

# c# - Kendo UI Grid 根据其数据类型为列提供不同的模板

> ID：14263747
> 
> 赞同：1
> 
> 时间：2013-01-10T17:28:20.743
> 
> 标签：c#, telerik, kendo-ui, telerik-grid, telerik-mvc

我有这样的网格

```
@(Html.Kendo().Grid(Model.Differences)
    .Name("formDifferencesList")
    .HtmlAttributes(new { @class = "fullScreen" })
    .Columns(columns =>
                        {
                            columns.Bound(e => e.Property);
                            columns.Bound(e => e.FieldPath);
                            columns.Bound(e => e.FieldType);
                            columns.Bound(e => e.Type);
                            columns.Bound(e => e.LeftValue);
                            columns.Bound(e => e.RightValue);
                        })
    .Pageable()
    .Sortable()
    .Scrollable()
    .Selectable()
    .Resizable(resize =>
        resize.Columns(true))
        .Groupable()
        .Filterable()
        .DataSource(dataSource =>
            dataSource.Ajax()
            .PageSize(25)
            .ServerOperation(false)
                .Model(model => model.Id(e => string.Format("{0}{1}", e.Property, e.FieldPath))))) 
```

`RightValue`and`LeftValue`是 type 的实例`Object`，可以是原始值（如`int`, `string`），也可以是集合。如果是一个集合我想用剑道`ListView`来代表它。我该怎么做？

我试图绑定到 DataBound 事件

```
.Events(events => events.DataBound("onDifferencesDataBounded")) 
```

将 ClientTemplate 添加到网格

```
columns.Bound(e => e.LeftValue).ClientTemplate("<div class='leftValueView'></div>"); 
```

然后在js函数内部尝试应用模板

```
<script type="text/javascript">
    function onDifferencesDataBounded() {
        $.each($('.leftValueView'), function () {
            var grid = $('#formDifferencesList').data().kendoGrid;
            var row = $(this).closest('tr');
            var dataItem = grid.dataItem(row);
            $(this).kendoListView({
                dataSource: { data: dataItem },
                template: kendo.template($("#leftValueTemplate").html())
            });
        });
    }
</script>

<script type="text/x-kendo-template" id="leftValueTemplate"> 
    // Not sure what should I do here?
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:07:12.753

**当您在此处放置断点时， dataItem.LeftValue**或 RightValue中是否有任何内容，例如 Array？

var dataItem = grid.dataItem(row); // <-当你通过那行时的断点

如果有数组，例如数字数组**[1,3,4,5]**，那么您可以尝试在模板中使用**#=data# 。**

# c# - 通过 ASP.NET Membership.OpenAuth 获取用户配置文件信息

> ID：14263748
> 
> 赞同：2
> 
> 时间：2013-01-10T17:28:36.440
> 
> 标签：c#, asp.net, oauth, asp.net-membership, membership-provider

使用 Microsoft.AspNet.Membership.OpenAuth，我很快就能够通过各种外部提供商（facebook、twitter、google、microsoft）让人们登录的应用程序。那太棒了。

我的问题是，我可以使用这个框架轻松获取用户的个人资料信息吗？我想获取他们的个人资料图片、电子邮件地址、出生日期等（如果服务有）。

我知道 AuthenticationResult.ExtraData 中有一些额外的信息，但它不是标准的，也不包含我需要的内容。

我可以从这里做些什么来使用 Microsoft.AspNet.Membership.OpenAuth （或另一个 .net lib）获取信息，还是我需要使用 ExtraData 中的访问令牌通过单独的服务 API 手动访问不同的服务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:36:46.413

环顾四周后，我看不到仅使用 Microsoft.AspNet.Membership.OpenAuth 东西的方法。

如果用户想使用 facebook，我的解决方案是跳过 .NET oauth 内容。在这种情况下，我使用 facebook C# SDK 进行身份验证，然后我可以访问电子邮件、生日、照片等。

```
if(provider != "facebook")
{
    //do normal oauth
}
else
{
                 FacebookClient client = new FacebookClient();

                var loginUrl = client.GetLoginUrl(new
                {
                    client_id = ConfigurationManager.AppSettings["facebookId"],
                    client_secret = ConfigurationManager.AppSettings["facebookClientSecret"],
                    redirect_uri = redirectUrl,
                    response_type = "code",
                    scope = "email,user_birthday"
                });

                Response.Redirect(loginUrl.AbsoluteUri);
} 
```

当用户返回时，您可以使用 SDK 访问这些额外信息。

我也会为谷歌添加这种类型的东西。如果用户想使用其他服务登录，他们可以，但我只会使用 asp.net oauth，在我有更多时间花在每个提供商上之前，他们不会获得像 facebook 或 google 那样的定制体验。

所以基本上答案是 ASP.net oauth 非常适合登录和非常基本的信息，但是如果您需要更多信息，则需要为每个提供者扩展或绕过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:46:27.727

身份验证工作流程有两个主要问题需要克服。一个，正如 OP 正确指出的那样，涉及内容，`ExtraData`另一个涉及您需要向 Facebook 请求的权限。最后，我选择了`DotNetOpenAuth`库而不是微软的库，但通过滚动我自己的类并在必要时借用部分框架，在某些地方扩展了它。

我做的第一件事是创建一个`FacebookClient`扩展`OAuth2Client`from`DotNetOpenAuth`并允许我传递一个值 for `scope`，它超越了您可以从 Facebook 请求哪些数据的限制。我要求的许可是`publish_stream, manage_pages, email, user_interests`. 它们只需附加到服务登录 URL 并传递给 Facebook。我的实现中有用的方法`OAuth2Client`是`GetUserData`：

```
 protected override IDictionary<string, string> GetUserData(string accessToken)
    {
        var token = accessToken.EscapeUriDataStringRfc3986();
        FacebookGraphData graphData;
        var request = WebRequest.Create(string.Format("https://graph.facebook.com/me?access_token={0}", token));
        using (var response = request.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {
                graphData = JsonHelper.Deserialize<FacebookGraphData>(responseStream);
            }
        }

        var userData = new Dictionary<string, string> {{"accessToken", accessToken}};
        userData.AddItemIfNotEmpty("id", graphData.Id);
        userData.AddItemIfNotEmpty("name", graphData.Name);
        userData.AddItemIfNotEmpty("email", graphData.Email);
        userData.AddItemIfNotEmpty("firstName", graphData.FirstName);
        userData.AddItemIfNotEmpty("lastName", graphData.LastName);
        userData.AddItemIfNotEmpty("link", graphData.Link == null ? null : graphData.Link.AbsoluteUri);
        userData.AddItemIfNotEmpty("username", graphData.Username);
        userData.AddItemIfNotEmpty("gender", graphData.Gender);
        userData.AddItemIfNotEmpty("locale", graphData.Locale);

        FacebookFriendData friendData;
        request = WebRequest.Create(string.Format("https://graph.facebook.com/me/friends?access_token={0}", token));
        using (var response = request.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {
                friendData = JsonHelper.Deserialize<FacebookFriendData>(responseStream);
            }
        }

        if (friendData.Friends != null)
        {
            userData.Add("connections", friendData.Friends.Count().ToString());
        }

        return userData;
    } 
```

我基本上创建了一些数据类，当响应从 Facebook 返回时，这些数据类会被反序列化。我还可以从这里进行我需要的任何其他 Graph API 调用。序列化类如下所示：

```
[DataContract]
public class FacebookFriendData
{
    [DataMember(Name = "data")]
    public IEnumerable<Friend> Friends { get; set; }
}

[DataContract]
public class Friend
{
    [DataMember(Name = "id")]
    public string Id { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }
}

[DataContract]
public class FacebookGraphData
{
    [DataMember(Name = "id")]
    public string Id { get; set; }

    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "email")]
    public string Email { get; set; }

    [DataMember(Name = "first_name")]
    public string FirstName { get; set; }

    [DataMember(Name = "last_name")]
    public string LastName { get; set; }

    [DataMember(Name = "link")]
    public Uri Link { get; set; }

    [DataMember(Name = "username")]
    public string Username { get; set; }

    [DataMember(Name = "gender")]
    public string Gender { get; set; }

    [DataMember(Name = "locale")]
    public string Locale { get; set; }
} 
```

根据@radm4，我仍然检查提供程序字符串以决定在某些地方调用哪些方法 - 仍在为该方法开发更优雅的解决方案......

# field - 查看已发布的工作簿时字段名称不存在错误

> ID：14263759
> 
> 赞同：0
> 
> 时间：2013-01-10T17:29:01.803
> 
> 标签：field, tableau-api

我收到此错误：“连接子句中包含的字段 '[tableName].fieldName' 不存在。无法连接到服务器“serverName”。检查服务器是否正在运行，并且您对请求的数据库具有访问权限。尝试加载工作簿“/views/reportName”时发生错误。加载无法成功完成”。

我在桌面版本中没有这个问题，但在服务器版本中出现了这个错误。显然，如果我刷新几次报告最终会加载。我在修改我的 sql server 表后开始遇到这个问题，但字段名称与修改前相同。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:10:09.177

尝试在 Tableau Desktop 中加载工作簿并检查任何无效的维度、度量、参数或计算字段（它们旁边可能有一个红色感叹号）。完成此检查后，请尝试重新发布工作簿。

如果失败，请发送电子邮件至 support@tableausoftware.com，尽可能详细地描述问题，包括错误的屏幕截图，如果可能，还提供工作簿副本，他们将帮助解决问题。

# javascript - 具有多个模型的主干集合？

> ID：14263765
> 
> 赞同：13
> 
> 时间：2013-01-10T17:29:22.083
> 
> 标签：javascript, backbone.js, backbone.js-collections

我正在学习Backbone。

我想创建一个可以包含具有不同属性的不同模型的列表。

例如，以任意顺序列出文件夹内容，其中可能包括类型文件的模型和类型文件夹的模型。

```
file : {
  title : "",
  date : "",
  type : "",
  yaddayadda : ""
}

folder : {
  title : "",
  date : "",
  haminahamina : ""
} 
```

在 Backbone 中表示这个的正确方法是什么？是否可以有一个包含多个模型的集合？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-10T17:47:24.497

创建您的其他模型继承自的基本模型：

```
var DataModel = Backbone.Model.extend({
    // Whatever you want in here
});

var FileModel = DataModel.extend({
    // Whatever you want in here
});

var FolderModel = DataModel.extend({
    // Whatever you want in here
}); 
```

并使`model`集合的类型为相同的基本模型：

```
var DataCollection = Backbone.Collection.extend({
    model: DataModel
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-27T07:45:12.640

你也可以用主干方式来做。查看文档[主干集合](http://backbonejs.org/#Collection)

基本上，在这种情况下，您将创建不同的模型，并添加一个决胜局属性，例如“类型”。

```
var file = Backbone.Model.extend({
        defaults: {
            // will need to include a tie breaker attribute in both models
            type: 'file'
        }
    }),
    folder = Backbone.Model.extend({
        defaults: {
            // tie breaker
            type: 'folder'
        }
    });

var fs = Backbone.Collection.extend({
    model: function(model, options) {
        switch(model.type) {
            case 'file':
                return new file(model, options);
            case 'folder':
                return new folder(model, options);
        }
    }
});

// after that just add models to the collection as always
new fs([
    {type: 'file',name: 'file.txt'},
    {type: 'folder',name: 'Documents'}
]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-24T13:32:45.060

在这种情况下，骨干[文档](http://backbonejs.org/#Collection)不完整。`merge:true`与option 和.一起使用时将不起作用`idAttribute`。在这种情况下，您需要：

```
var ModelFactory = function (attr, options) {
  switch (attr.type) {
    case 'file':
      return new file(attr, options);
    case 'folder':
      return new folder(attr, options);
  }
};
ModelFactory.prototype.idAttribute = '_id';

var fs = Backbone.Model.extend({
   model: ModelFactory
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-03-28T11:35:02.203

```
 var bannedList = app.request('rest:getBan');
        var whiteIpList = app.request("rest:getWhite");
        var whiteGroupList = app.request("rest:....");
        $.when(bannedList, whiteIpList, whiteGroupList).
done(function (bannedList, whiteIpList, whiteGroupList) {
            var collection = new Backbone.Collection();
            collection.add(bannedList);
            collection.add(whiteIpList);
            collection.add(whiteGroupList);

        });

    app.reqres.setHandler("rest:getBannedList", function (data) {
        return API.getBannedList(data);
    });
    getBannedList: function (data) {
                var user = new Backbone.Model();
                user.url = '/banned';
                user.cid = 'bannedList';
                var defer = $.Deferred();

                user.fetch({
                    type: 'GET',
                    data: data,
                    success: function (data) {
                        defer.resolve(data);
                    },
                    error: function (data) {
                        defer.reject(data);
                    }
                });
                return defer.promise();
            }, 
```

# http - 是否有默认的 http 请求标头来识别发出请求的用户？

> ID：14263767
> 
> 赞同：0
> 
> 时间：2013-01-10T17:29:27.997
> 
> 标签：http, rest, http-headers

在我的 RESTful API 背后的数据模型中，有几个具有 CreatedBy/ModifiedBy 字段的实体。对这些数据的唯一访问是通过我的 API，因此，应使用向我的 API 发出请求的用户的用户 ID 填充字段。

我已经考虑将这些字段添加到我的 API 公开的模型中，或者在所有 PUT/POST/DELETE 请求中期望包含用户 ID 的请求标头。我会对关于哪种方法最好或任何其他方法的任何意见感兴趣。

我喜欢在标头中提供它的想法，因为每个请求都需要它，我想知道是否有一个标准的请求标头来包含信息，或者一个通用的 x-header。

我已经看到了 from 请求标头；但是，它似乎被定义为发出请求的用户的电子邮件地址，我需要传递用户 ID。

在我们当前的实现中，我们使用授权标头通过 API 验证调用应用程序，而不是针对特定用户。

您将使用哪个标头来传递信息以识别发出请求的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:52:53.807

您可以扩展 Authorization 标头以添加您自己的参数。Digest 和 OAuth 授权方案都支持参数。基本方案已经具有可读的用户凭据。就像是：

```
 Authorization: OAuth realm="Photos",
    oauth_consumer_key="dpf43f3p2l4k3l03",
    oauth_signature_method="HMAC-SHA1",
    oauth_timestamp="137131200",
    oauth_nonce="wIjqoS",
    oauth_callback="http%3A%2F%2Fprinter.example.com%2Fready",
    oauth_signature="74KNZJeDHnMBp0EMJ9ZHt%2FXKycU%3D",
    xoauth_user_guid="alganet" 
```

雅虎！与他们的 OAuth 实现类似，但在另一个上下文中。

[http://developer.yahoo.com/oauth/guide/oauth-accesstoken.html](http://developer.yahoo.com/oauth/guide/oauth-accesstoken.html)。

但是，如果这些字段以某种方式在您的公共 API 中显示或公开，则它们属于 RESTful 资源并且应该始终在正文中表示，而不是在标题中表示。如果您在消息正文中获取用户名，您也应该使用消息正文发布用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:29:14.697

假设您可以使用 HttpClient

```
 HttpClient client = HttpClientManager.getNewClient();
  HttpMethod get = new GetMethod(...);
  get.addRequestHeader("x-newHeader", "value"); 
```

更多[在这里](http://hc.apache.org/httpclient-3.x/tutorial.html)

或使用 URLConnection 使用[setRequestParameter](http://java.sun.com/javase/6/docs/api/java/net/URLConnection.html#setRequestProperty%28java.lang.String,%20java.lang.String%29)

# jquery - 使用 jQuery 将选择器归为一类

> ID：14263769
> 
> 赞同：1
> 
> 时间：2013-01-10T17:29:38.263
> 
> 标签：jquery, grouping, css-selectors, simplify

我将有 20 个这样的“组”：

```
$("#checkbox-apple").click(function(){
    $("#graphic-apple").toggle();
}) 

$("#checkbox-orange").click(function(){
    $("#graphic-orange").toggle();
}) 

$("#checkbox-pineapple").click(function(){
    $("#graphic-pineapple").toggle();
}) 
```

而不是复制每个组并更改两个单词，我如何能够通过让任何复选框切换其等效图形来大大缩短我的代码，类似于此代码的行？：

```
$("#checkbox" FRUIT).click(function(){
    $("#graphic" FRUIT).toggle();
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:31:55.743

给他们一个通用类（不是*必需*的，但很有用——下面我使用的是“fruit”），然后它是一个简单的字符串操作：

```
$(".fruit").click(function() {
    $("#graphic-" + this.id.replace("checkbox-", "")).toggle();
}); 
```

（或者他们可能已经有其他一些你可以使用的通用功能。）

或者，如果您不添加类：

```
$("#checkbox-apple, #checkbox-orange, #checkbox-pineapple").click(function() {
    $("#graphic-" + this.id.replace("checkbox-", "")).toggle();
}); 
```

您甚至可以摆脱这些`id`值并`data-fruit`改用：

```
<input type="checkbox" data-fruit="pineapple" class="fruit"> 
```

...接着：

```
$(".fruit").click(function() {
    $("#graphic-" + $(this).attr("data-fruit")).toggle();
}); 
```

...但我不确定这是否比上面的第一个解决方案更能让你受益。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:33:31.980

您可以使用`class`带有`data`属性的 a 来指定要使用的元素`toggle()`。尝试这个：

```
<input type="checkbox" id="checkbox-orange" class="checkbox-fruit" data-related-graphic="#graphic-orange" /> 
```

```
$('.checkbox-fruit').click(function() {
    $($(this).data('related-graphic')).toggle();
}); 
```

# android - 没有root权限的Android导出联系人数据库

> ID：14263781
> 
> 赞同：1
> 
> 时间：2013-01-10T17:30:25.497
> 
> 标签：android, database, copy, root, contact

我提出申请。我的应用程序复制联系人数据库并将此文件发送到 FTP 服务器。仅在项目中。我试图复制文件/data/data/android.contact.provider/databse.db，但这给出了我的错误。请帮帮我。这可能吗 ？？？谢谢，

PS 应用程序**不能**使用 root（超级用户）权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:56:54.537

> 这可能吗 ？

`/data/data/android.contact.provider/databse.db`无法复制。您没有对该目录的读取权限，除非您以 root 身份运行。

> PS 应用程序不能使用 root（超级用户）权限。

然后你不能复制数据库。

> 是的，我想创建此文件的副本，或数据库的准确副本

欢迎您请求`READ_CONTACTS`数据库并查询`ContactsContract` `ContentProvider`以获得您想要的任何数据。

# foursquare - 使用 facebook 的令牌流身份验证重定向到foursquare.com 而不是redirect_uri

> ID：14263786
> 
> 赞同：0
> 
> 时间：2013-01-10T17:30:47.937
> 
> 标签：foursquare

我正在按照使用令牌流方式进行身份验证的说明进行操作。我使用了示例应用程序[https://ss1.4sqi.net/scripts/apisamples-35608dc9c26343e74f5d99fc20bae6c5.js](https://ss1.4sqi.net/scripts/apisamples-35608dc9c26343e74f5d99fc20bae6c5.js)中提供的代码，仅添加了版本参数。

当用户被重定向到foursquare以输入他/她的凭据并选择使用facebook登录时，提交后他将被重定向到foursquare.com而不是初始网站。

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T01:34:44.003

您需要从[应用配置](https://foursquare.com/developers/apps)页面配置您的应用，并为您的应用添加已注册的重定向 URI。然后，确保 API 请求的 redirect_uri 参数与您的重定向 URI 匹配。

# c# - 如何将 int16 写入二进制文件？

> ID：14263787
> 
> 赞同：1
> 
> 时间：2013-01-10T17:30:49.397
> 
> 标签：c#, file, binary

我有几个配置表单，我从那里写入配置文件。如何将 int16 写入文件，因为最大值为 100，我想在文件中保存一个位置？

```
private void butSave_Click(object sender, EventArgs e)
    {
        if (valChanged == true)
        {
            Properties.Settings.Default.Save();
            Assembly assem = Assembly.GetEntryAssembly();
            string dir = Path.GetDirectoryName(assem.Location);
            string filePath = Path.Combine(dir, "./conf/config.dat");
            try
            {
                FileStream fs = new FileStream(filePath, FileMode.Open);
                BinaryWriter wr = new BinaryWriter(fs);
                fs.Position = 0;
                wr.Write(checkBox1.Checked);
                wr.Write(checkBox2.Checked);
                fs.Position = 16;
                wr.Write(numericUpDown1.Value);
                wr.Write(numericUpDown2.Value);
                wr.Write(numericUpDown3.Value);
                wr.Write(numericUpDown4.Value);
                wr.Close();
                Form1 main = new Form1();
                main.Show();
                this.Close();
            }
            catch
            {
                MessageBox.Show("Would you like to create a new config file", "File not found!", MessageBoxButtons.YesNoCancel);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:32:57.267

投射`short`以使用[`BinaryWriter.Write(short)`](http://msdn.microsoft.com/en-us/library/091b1s67.aspx)

```
 wr.Write((short)numericUpDown1.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:35:32.320

```
using(var file =  File.Create("out.bin"))
using (var writer = new BinaryWriter(file))
{
    foreach (short value in list)
    {
        writer.Write(value);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:41:26.770

short 是一个 Int16，但如果 100 是你的最大值，你只需要 8 位和字节就可以了。这将占用使用short 的一半空间。

```
wr.Write((byte)numericUpDown1.Value); 
```

# database-design - Access 2007 中的链接表未更新

> ID：14263788
> 
> 赞同：0
> 
> 时间：2013-01-10T17:30:52.113
> 
> 标签：database-design, ms-access-2007, relationship, cascade

我在 Access 2007 中遇到了一对链接表的问题。我的意图是在其中一个上创建一个新记录，并让它在另一个上生成一个新记录。也许我高估了 Access 中关系的能力，但我将它们设置如下：

![天哪，对不起 - 压缩看起来很糟糕......](../Images/ce2f070886365ca9336001773fc73956.png)

所以表 'Contracts' 和 'States' 之间的关系是一对一的，设置为强制引用完整性，级联更新相关字段，并且只包含相等的地方（我也尝试使用仅来自 [Contracts] 的包含到[州]）。

我有一个表单供用户输入 Contracts.ContractID（和其他信息），但 States.ContractID 没有更新（表单控件确实更新了 Contracts.ContractID），或者说没有创建新记录桌子。

我预计我可能会尝试完全错误地完成此操作。可以帮助我形成更好的表格布局的帮助将是首选，但更好的输入方法也会有所帮助。

（如果对这些表的键控方式有其他考虑，请告诉我，因为 ContractID 是从另一个资源继承的键。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:50:22.250

> 我预计我可能会尝试完全错误地完成此操作。

你是对的。关系并不像你想象的那样运作。简而言之，在任何 SQL dbms 中都没有“当我*向该表中插入一行时自动将一行插入到另一个表中”的功能。*在某些情况下，您可以自己编写这样的功能。

在 Access 中，最好的办法是使用[表单和链接的子表单](http://office.microsoft.com/en-us/access-help/create-a-form-that-contains-a-subform-a-one-to-many-form-HA010098674.aspx)。这种方法将自动插入关键（链接）列，用户将填写其余数据。

# ms-access - 我可以使用组合框来更改表格在 MS Access 2010 中保存数据的表格吗？

> ID：14263789
> 
> 赞同：-1
> 
> 时间：2013-01-10T11:39:40.893
> 
> 标签：ms-access

我创建了一个 MS Access 表单来向表中插入数据。我想将数据存储到**单独**的表中。

如何使用表单中的*组合框*来**选择每个条目中的目标表**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:04:30.020

是的，它们是相同的。例如，我使用**表格**（姓名、年龄、性别）输入人员的详细信息。然后我想根据**性别**（男性和女性）自动生成两个表。男性一张桌子，女性一张桌子。

# code-generation - 保存自己写的代码 - xtend

> ID：14263790
> 
> 赞同：1
> 
> 时间：2013-01-10T17:31:03.220
> 
> 标签：code-generation, xtend

我想知道是否可以在生成的文件中保存自己编写的代码。如果您更改模型然后按下保存按钮，所有代码都将被覆盖。我想保存一些旧文件的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:02:34.407

Xtend 使用源代码生成编译器，因此为 Xtend 本身生成的 Java 代码不能在源代码级别上进行更改。

不过，如果您使用 Xtend 的模板表达式来生成代码，您当然可以插入受保护区域以允许用户修改生成的代码。Github 上的这个 OS[项目](https://github.com/danieldietrich/xtext-protected-regions)实现了对 Xtend 中受保护区域的支持。

# php - 在php上多次运行mysql查询但条件不同

> ID：14263793
> 
> 赞同：0
> 
> 时间：2013-01-10T17:31:07.973
> 
> 标签：php, mysql

截图：http: [//i.stack.imgur.com/mX29j.png](http://i.stack.imgur.com/mX29j.png)

我目前正在制作发票收据。您在图像上看到的数字 4600 和 33 是​​从第一页的清单中检索到的值。如您所见，它只列出了一项费用，而应该是两项费用。

这是代码的一部分：

```
$procedures = $_SESSION['receipt'];

        foreach($procedures as $key=>$procedureno)
            {
            $query = "select * from `charges` where `procedure_no` = $procedureno";
            echo $procedureno;
            $result2=mysql_query($query,$dbh1);
            if(mysql_num_rows($result2) > 0 ){
            while($row = mysql_fetch_array($result2)){
            echo '
            <tr>
                <td>'.$row[1].'</td>
                <td>'.$row[2].'</td>';

            echo '</tr>';
                }
    }

            } 
```

我想要这个查询 $query = "select * from `charges`where `procedure_no`= $procedureno"; 根据 $procedureno 的数量执行多次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:34:47.843

MySQL 理解列表。尝试这个：

```
SELECT * FROM charges WHERE procedure_no IN (1, 5, 33, 78) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:36:43.173

创建一个方法并将条件作为参数传递。在那个方法里面放你的 FOR 循环。

# c# - 如何在字符串数组上使用 Sum - LINQ？

> ID：14263805
> 
> 赞同：5
> 
> 时间：2013-01-10T17:31:47.220
> 
> 标签：c#, arrays, linq, parsing, sum

如何使用 LINQ Sum 方法对字符串数组求和？

我的字符串看起来像：`"1,2,4,8,16"`

我试过了：

```
string myString = "1,2,4,8,16";
int number = myString.Split(',').Sum((x,y)=> y += int.Parse(x)); 
```

但它说不`Parse`能源类型`int`来输入？

我不想使用`foreach`循环来总结这些数字。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-10T17:33:58.020

你打错电话了`Sum()`。

`Sum()`接受一个将*单个*元素转换为数字的 lambda：

```
.Sum(x => int.Parse(x)) 
```

或者，更简单地说，

```
.Sum(int.Parse) 
```

这仅适用于版本 4 或更高版本的 C# 编译器（无论平台版本如何）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T17:34:19.223

代替

```
int number = myString.Split(',').Sum((x,y)=> y += int.Parse(x)); 
```

采用

```
int number = myString.Split(',').Sum(x => int.Parse(x)); 
```

它将解析`myString.Split(',')`int 的每个元素并添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:38:30.943

```
var value = "1,2,4,8,16".Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
                        .Select (str => int.Parse(str))
                        .Sum ( ) ;

Console.WriteLine( value ); // 31 
```

# macos - 如何使用 audioConverterFillComplexBuffer 及其回调？

> ID：14263808
> 
> 赞同：14
> 
> 时间：2013-01-10T17:31:51.997
> 
> 标签：macos, core-audio

我需要逐步演练如何使用 audioConverterFillComplexBuffer 及其回调。不，不要告诉我阅读 Apple 文档。我做了他们所说的一切，但转换总是失败。不，不要告诉我去寻找 audioConverterFillComplexBuffer 及其使用中的回调的示例——我已经逐行复制了大约十几个这样的示例，并且进行了修改，并且转换总是失败。不，输入数据没有任何问题。不，这不是字节序问题。不，问题不在于我的 OS X 版本。

问题是我不明白 audioConverterFillComplexBuffer 是如何工作的，所以我不知道我做错了什么。没有任何东西可以*帮助*我理解，因为地球上似乎没有人真正理解 audioConverterFillComplexBuffer 的工作原理。从实际使用它的人（我在他们的代码中发现货物崇拜编程）到学习核心音频和/或苹果本身的作者（http://stackoverflow.com/questions/13604612/core-audio-how-can -one-packet-one-byte-when-clearly-one-packet-4-bytes）。

这不仅仅是我的问题，对于任何想要在 Mac 平台上编写高性能音频的人来说都是一个问题。明显错误的 Threadbare 文档和不起作用的示例并不有趣。

再次明确一点：我需要一步一步地了解如何使用 audioConverterFillComplexBuffer 及其回调，整个 Mac 开发人员社区也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-06-12T01:13:12.037

这是一个非常古老的问题，但我认为仍然相关。我花了几天的时间来解决这个问题，终于实现了成功的转换。我当然不是专家，但我将概述我对其工作原理的理解。注意我正在使用 Swift，我也只是在学习。

这是主要的函数参数：

`inAudioConverter: AudioConverterRef`：这个很简单，传入一个之前创建的AudioConverterRef即可。

`inInputDataProc: AudioConverterComplexInputDataProc`: 非常复杂的回调。我们会回到这个。

`inInputDataProcUserData, UnsafeMutableRawPointer?`：这是对您可能需要提供给回调函数的任何数据的引用。很重要，因为即使在 swift 中，回调也不能继承上下文。例如，您可能需要访问 AudioFileID 或跟踪到目前为止读取的数据包数量。

`ioOutputDataPacketSize: UnsafeMutablePointer<UInt32>`: 这个有点误导。名称暗示它是数据包大小，但阅读文档意味着我们知道它是输出格式预期的数据包总数。您可以将其计算为`outPacketCount = frameCount / outStreamDescription.mFramesPerPacket`。

`outOutputData: UnsafeMutablePointer<AudioBufferList>`：这是一个音频缓冲区列表，您需要已经对其进行了初始化，并具有足够的空间来保存预期的输出数据。大小可以计算为`byteSize = outPacketCount * outMaxPacketSize`。

`outPacketDescription: UnsafeMutablePointer<AudioStreamPacketDescription>?)`: 这是可选的。如果您需要数据包描述，请传入一个大小为`outPacketCount * sizof(AudioStreamPacketDescription)`.

* * *

当转换器运行时，它会重复调用回调函数来请求更多数据进行转换。回调的主要工作只是从源数据中读取请求的数量数据包。然后转换器将数据包转换为输出格式并填充输出缓冲区。以下是回调的参数：

`inAudioConverter: AudioConverterRef`: 又是音频转换器。您可能不需要使用它。

`ioNumberDataPackets: UnsafeMutablePointer<UInt32>`：要读取的数据包数。读取后，您必须将其设置为实际读取的数据包数量（如果我们到达末尾，可能会小于请求的数量）。

`ioData: UnsafeMutablePointer<AudioBufferList>`: 一个 AudioBufferList，除了实际数据之外已经配置好了。您需要使用足够的容量初始化 ioData.mBuffers.mData 以容纳预期数量的数据包，即`ioNumberDataPackets * inMaxPacketSize`. 将 ioData.mBuffers.mDataByteSize 的值设置为匹配。

`outDataPacketDescription: UnsafeMutablePointer<UnsafeMutablePointer<AudioStreamPacketDescription>?>?`：根据使用的格式，转换器可能需要跟踪数据包描述。您需要使用足够的容量对其进行初始化，以容纳预期数量的数据包描述。

`inUserData: UnsafeMutableRawPointer?`：您提供给转换器的用户数据。

* * *

因此，要开始，您需要：

1.  有关于您的输入和输出数据的足够信息，即帧数和最大数据包大小。
2.  初始化一个具有足够容量来保存输出数据的 AudioBufferList。
3.  打电话`AudioConverterFillComplexBuffer`。

在每次运行回调时，您需要：

1.  初始化`ioData`有足够的容量来存储`ioNumberDataPackets`源数据。
2.  使用足够的容量进行初始化`outDataPacketDescription`以存储`ioNumberDataPackets`AudioStreamPacketDescriptions。
3.  用源数据包填充缓冲区。
4.  写数据包描述。
5.  设置`ioNumberDataPackets`为实际读取的数据包数。
6.  成功则返回`noErr`。

这是我从 AudioFileID 读取数据的示例：

```
var converter: AudioConverterRef?
// User data holds an AudioFileID, input max packet size, and a count of packets read
var uData = (fRef, maxPacketSize, UnsafeMutablePointer<Int64>.allocate(capacity: 1))
err = AudioConverterNew(&inStreamDesc, &outStreamDesc, &converter)
err = AudioConverterFillComplexBuffer(converter!, { _, ioNumberDataPackets, ioData, outDataPacketDescription, inUserData in
    let uData = inUserData!.load(as: (AudioFileID, UInt32, UnsafeMutablePointer<Int64>).self)
    ioData.pointee.mBuffers.mDataByteSize = uData.1
    ioData.pointee.mBuffers.mData = UnsafeMutableRawPointer.allocate(byteCount: Int(uData.1), alignment: 1)
    outDataPacketDescription?.pointee = UnsafeMutablePointer<AudioStreamPacketDescription>.allocate(capacity: Int(ioNumberDataPackets.pointee))
    let err = AudioFileReadPacketData(uData.0, false, &ioData.pointee.mBuffers.mDataByteSize, outDataPacketDescription?.pointee, uData.2.pointee, ioNumberDataPackets, ioData.pointee.mBuffers.mData)
    uData.2.pointee += Int64(ioNumberDataPackets.pointee)
    return err
}, &uData, &numPackets, &bufferList, nil) 
```

同样，我不是专家，这只是我通过反复试验学到的。

# vb.net - “创建新项目平台”复选框被禁用

> ID：14263809
> 
> 赞同：0
> 
> 时间：2013-01-10T17:31:52.940
> 
> 标签：vb.net, visual-studio-2010

我正在使用 Visual Studio 2010 Professional。我需要将“任何 CPU”更改为 x32。但是当我打开“新解决方案平台”窗口时，“创建新项目平台”复选框显示为禁用。

我该如何启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:10:06.297

不完全确定您为什么要这样做，所以这是我通常的设置方式：

1.  使用默认设置创建新解决方案。
2.  `x86`通过底部/下拉列表中的`Project`属性/`Compile`选项卡/按钮将平台更改为。`Advanced Compile Options...``Target CPU`

![在此处输入图像描述](../Images/da856b9f42275a9cbcb0f7a233a5353e.png)

# ios - 使用 Restkit 映射文件夹结构

> ID：14263816
> 
> 赞同：0
> 
> 时间：2013-01-10T17:32:01.740
> 
> 标签：ios, json, mapping, restkit

我需要映射一个文件夹结构，该结构遵循 Dropbox 使用的类似模式。当用户向上导航树时，REST 服务器返回额外的 JSON 数据，这些数据需要使用 Restkit 映射到核心数据。我的 JSON 如下：

```
{
    "object_id": "19BEB55D78EA431EA555CA7ADD72DCA6",
    "class": "sfaccount",
    "files": [
        {
            "file_id": "78234782437892438792487942",
            "bytes": 0,
            "created": "2012-11-12T03:42:55.0000000",
            "modified": "2012-11-12T03:42:55.0000000",
            "path": "/",
            "is_dir": true,
            "contents": [
                {
                    "file_id": "980234890234890234980234890",
                    "name": "file1.xls",
                    "created": "2012-11-12T03: 42: 55.0000000",
                    "modified": "2012-11-12T03: 42: 55.0000000",
                    "path": "/file1.xls",
                    "is_dir": false,
                    "mime_type": "text/xls",
                    "bytes": 78810
                },
                {
                    "file_id": "924384238903429802439802890",
                    "name": "file2.pdf",
                    "created": "2012-11-12T03: 42: 55.0000000",
                    "modified": "2012-11-12T03: 42: 55.0000000",
                    "path": "/file2.pdf",
                    "is_dir": false,
                    "mime_type": "text/pdf",
                    "bytes": 15350
                },
                {
                    "file_id": "980349082498024390832490249",
                    "name": "sub folder 1",
                    "created": "2012-11-12T03: 42: 55.0000000",
                    "modified": "2012-11-12T03: 42: 55.0000000",
                    "path": "/sub folder 1",
                    "is_dir": true,
                    "bytes": 0
                }
            ]
        }
    ]
}; 
```

如果用户向上导航到“子文件夹 1”，则 JSON 将是：

```
{
    "object_id": "19BEB55D78EA431EA555CA7ADD72DCA6",
    "class": "sfaccount",
    "files": [
        {
           "file_id": "980349082498024390832490249",
           "name": "sub folder 1",
           "created": "2012-11-12T03: 42: 55.0000000",
           "modified": "2012-11-12T03: 42: 55.0000000",
           "path": "/sub folder 1",
           "is_dir": true,
           "bytes": 0,
            "contents": [
                {
                    "file_id": "564765785685856856658567575",
                    "name": "file1.xls",
                    "created": "2012-11-12T03: 42: 55.0000000",
                    "modified": "2012-11-12T03: 42: 55.0000000",
                    "path": "/sub folder 1/file1.xls",
                    "is_dir": false,
                    "mime_type": "text/xls",
                    "bytes": 78810
                },
                {
                    "file_id": "345687656675856790676786789",
                    "name": "file2.pdf",
                    "created": "2012-11-12T03: 42: 55.0000000",
                    "modified": "2012-11-12T03: 42: 55.0000000",
                    "path": "/sub folder 1/file2.pdf",
                    "is_dir": false,
                    "mime_type": "text/pdf",
                    "bytes": 15350
                },
                {
                    "file_id": "434546785689689667679988698",
                    "name": "sub folder 2",
                    "created": "2012-11-12T03: 42: 55.0000000",
                    "modified": "2012-11-12T03: 42: 55.0000000",
                    "path": "/sub folder 1/sub folder 2",
                    "is_dir": true,
                    "bytes": 0
                }
            ]
        }
    ]
} 
```

我不确定模型结构以及如何使用 Restkit 创建映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:19:00.880

这是您将用来映射该 JSON 对象的对象映射。FileObject 类中的“contents”属性应该是一个 NSArray，并将填充一个 FileObject 数组。

```
RKObjectMapping *fileMapping = [RKObjectMapping mappingForClass:[FileObject class]];

[fileMapping addAttributeMappingsFromArray:@[@"file_id",@"bytes",@"created",@"modified",@"path",@"is_dir"]];
RKRelationshipMapping *subFileMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"contents" toKeyPath:@"contents" withMapping:fileMapping];

[fileMapping addPropertyMapping:subFileMapping]; 
```

# xcode - 在 mac 应用程序中实现 NSTableView 中的复选框

> ID：14263818
> 
> 赞同：3
> 
> 时间：2013-01-10T17:32:15.437
> 
> 标签：xcode, checkbox, rows, nstableview, nstablecolumn

首先，我搜索了3天，没有找到我要找的东西。

第二点，我对 Xcode 编程非常陌生，所以请让您的答案尽可能简单和/或详细！

在我的内部，我`NSTableView`需要第一列是文本，然后`X`是复选框列的数量，最后一列是文本。列`X`数是基于我从 SQLite 文件中读取的条目数的变量。

我的问题是：

*   如何在运行时定义我拥有的类型和列数？
*   我如何知道是否选中了复选框值？
*   如果我不知道它有多少个单元格，如何向 tableview 添加行？

感谢您花时间回答！

最好的问候，伊戈尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:38:20.477

你想在运行时创建一个表，你不知道会有多少列！！！

那是一件大事。

阅读`NSTableView`文档，您会找到`addTableColumn:`方法。在循环中继续创建 colmn 并且不要忘记为所有列提供*标识符。*

在此之上，您想要一个复选框。创建复选框也不难。

编辑：

对于复选框实现，请在此处找到一个[项目](http://www.keepandshare.com/doc/5632433/table-checkboxtable-zip-2-5-meg?da=y)。

在您想要复选框的列中绘制一个 checkBoxCell。或者您可以以编程方式进行。

我是通过IB做到的。

您应该创建一个数组来存储每个（行数）复选框的状态。

```
- (id)init {
    self = [super init];
    if (self) {

        states=[[NSMutableArray alloc] initWithObjects:@"1", @"0", @"1", nil];
    }
    return self; }

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    NSLog(@"Num of rows---- %ld", [names count]);
    return [names count];
} 
```

检查具有值“检查”的 tableIdentifier。

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    if ([[tableColumn identifier] isEqualTo:@"name"]) {
        return [names objectAtIndex:row];
    }
    else if ([[tableColumn identifier] isEqualTo:@"check"]) {

        return [states objectAtIndex:row];
    }
    else if ([[tableColumn identifier] isEqualTo:@"states"]) {
        return [states objectAtIndex:row];
    }
    return 0;
} 
```

根据开/关更新复选框的值。

```
- (void)tableView:(NSTableView *)tableView setObjectValue:(id)value forTableColumn:(NSTableColumn *)column row:(NSInteger)row {          
    [states replaceObjectAtIndex:row withObject:value];
    [tableView reloadData]; 
} 
```

# android - 网格布局宽度问题

> ID：14263824
> 
> 赞同：3
> 
> 时间：2013-01-10T17:32:42.260
> 
> 标签：android, user-interface, grid-layout

我一直在开发一个应用程序，我也需要处理它的 UI 内容。

这是我的 XML：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
  <GridLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:columnCount="2" >
    <ImageView />
    <TextView />
    .
    .
  </GridLayout>
</ScrollView> 
```

现在的问题是右列的宽度。它超出了设备的宽度。例如具有`android:layout_gravity`设置为中心的属性的移动设备的名称。但正如您在下面的屏幕截图中看到的那样，它没有按预期工作：

![设备截图](../Images/2c3efe879b6da0158eccb3b3307563a9.png)

由于文本是动态的，我应该使用什么来将宽度保持在限制范围内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-04T14:27:38.527

我在使用 GridLayout 时遇到了类似的问题`fill_horizontal`。我的解决方案是设置`android:layout_width="0dp"`，因此您可能想对第二列中的所有视图进行尝试。

[资源](http://daniel-codes.blogspot.co.at/2012/01/gridlayout-view-clipping-issues.html)

# python - python selenium - 如何获取页面上的所有可见文本（即，不是页面源）

> ID：14263831
> 
> 赞同：0
> 
> 时间：2013-01-10T17:32:49.350
> 
> 标签：python, selenium, webdriver, selenium-webdriver

> **可能重复：**
> [使用 Selenium 从网页中获取所有可见文本](https://stackoverflow.com/questions/7947579/getting-all-visible-text-from-a-webpage-using-selenium)

我想在一组网页上搜索特定字符串的出现。但是，我不在乎这个字符串是否出现在页面的源代码中。我只关心这个字符串是否以用户在查看网站时会遇到的方式出现。如何获取页面上可能在浏览器中实际可见的所有文本？`text`可能是页面上每个元素的组合。

# c# - 如何在 ASP.Net 4 C# 中创建 503 响应标头

> ID：14263835
> 
> 赞同：2
> 
> 时间：2013-01-10T17:33:00.377
> 
> 标签：c#, asp.net, webforms, httpresponse, http-status-code-503

我正在尝试为`Temporarily Down for Site Maintenance`网站创建一个保留页面。该网站是一个`asp.net 4 webform`网站。

我创建了一个`offline.aspx`页面，当我关闭网站时，我会将所有流量重定向到该页面。

在此页面上，我想发送一个*503 响应代码*并指定网站恢复在线的日期 - 使用来自[google 的信息 here](http://googlewebmastercentral.blogspot.com/2011/01/how-to-deal-with-planned-site-downtime.html)

我希望它可以做一些我`PageLoad`喜欢的事情：

```
Response.ClearHeaders();
Response.ClearContent();    
Response.StatusCode = 503;
Response.StatusDescription = "HTTP/1.1 503 Service Temporarily Unavailable";
Response.Flush();
throw new HttpException(503, "Temporarily Down For Maintenance."); 
```

这给了我正确的状态，但页面上出现以下错误：

```
XML Parsing Error: not well-formed
Location: http://xyz/offline.aspx
Line Number 3, Column 2:</pre></table></table></table></table></table></font></font></font></font></font></i></i></i></i></i></b></b></b></b></b></u></u></u></u></u><p>&nbsp;</p><hr> 
```

我想我错过了一些简单的东西，我做错了什么？

另外，我会在 ?`Response.AddHeader`之后添加一个重试标头`503`？

**编辑：** 我在删除东西时过于热心了。清理所有删除和清除内容可以使以下工作：

```
Response.StatusCode = 503;
Response.StatusDescription = "HTTP/1.1 503 Service Temporarily Unavailable";
Response.AddHeader("Retry-After", "Sat, 12 Jan 2013 23:00:00 GMT"); 
Response.Flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:36:05.950

我相信这实际上是网络服务器或 ASP.Net DLL 的功能。如果某些数据已经流式传输到客户端，则如果不是这些随机结束标签，错误消息将无法正确显示。

# c++ - 为什么 std::mutex 在带有 WIndows SOCKET 的结构中使用时会创建 C2248？

> ID：14263836
> 
> 赞同：5
> 
> 时间：2013-01-10T17:33:02.527
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, mutex

我正在使用一个结构来支持 Windows SOCKET 的列表：

```
struct ConnectedSockets{
    std::mutex lock;
    std::list<SOCKET> sockets;
}; 
```

当我尝试编译它（Visual Studio 2012）时，出现以下错误：

> “错误 C2248：`std::mutex::operator =`无法访问在类中声明的‘私有’成员`'std::mutex'`”

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T17:37:45.810

A`std::mutex`不可复制，因此您需要自己`operator=`实现`ConnectedScokets`。

我想你想保留`mutex`每个实例`ConnectedSockets`，所以这应该足够了：

```
ConnectedSockets& operator =( ConnectedSockets const& other )
{
    // keep my own mutex
    sockets = other.sockets; // maybe sync this?

    return *this;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:44:44.227

根本原因与套接字无关。`std::mutex`不可复制，因此编译器无法为`ConnectedSockets`struct 生成默认赋值运算符（它是成员）。您需要指示编译器删除赋值运算符（使用`= delete`说明符声明它）或手动实现它，例如忽略互斥体复制。

```
// To make ConnectedSockets explicitly non-copyable and get more reasonable
// compiler error in case of misuse
struct ConnectedSockets
{
   std::mutex lock; 
   std::list<SOCKET> sockets;
   ConnectedSockets& operator=(const ConnectedSockets&) = delete;
};

// To make ConnectedSockets copyable but keep mutex member intact
struct ConnectedSockets
{
   std::mutex lock; 
   std::list<SOCKET> sockets;

   ConnectedSockets& operator=(const ConnectedSockets& i_rhs)
   {
      // Need locking? Looks like it can be problem here because
      // mutex:lock() is not const and locking i_rhs wouldn't be so easy
      sockets = i_rhs.sockets;
      return *this;
   }
}; 
```

# ruby-on-rails - 如何组织小测试/单元测试？

> ID：14263839
> 
> 赞同：62
> 
> 时间：2013-01-10T17:33:15.290
> 
> 标签：ruby-on-rails, ruby, minitest

在为几个项目使用 RSpec 之后，我正在尝试 minitest/unit。到目前为止我很喜欢它，但我想念使用描述/上下文块以合乎逻辑的方式对我的测试/规范进行分组。

我知道 minitest/spec 提供了这个功能，但我喜欢 minitest/unit 感觉更接近准系统 Ruby。

是否有任何 gem 为 minitest/unit 提供描述/上下文支持？或者，我应该只在 minitest/unit 中处理我冗长的、杂乱无章的测试文件吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-10T19:24:43.743

我知道有几个人从 RSpec 来到 minitest 为同一个问题苦苦挣扎。他们喜欢使用描述/上下文块进行嵌套的能力，并希望继续进行 minitest。有几种解决方案：

1.  使用 minitest 的规范 DSL：虽然存在细微差别，但规范 DSL 为您提供了 rspec DSL 的大部分（全部？）优点。最大的区别是缺少`context`块。但是您可以轻松地`describe`在它的位置使用，并且一切都按您的预期工作。
2.  使用目录和文件：我更喜欢这个选项。我不喜欢滚动浏览一个 300 行的测试文件，不管它是使用规范 DSL 还是经典的 xUnit 样式。我发现嵌套无关测试没有帮助。代码理解的相同规则适用于测试。所以分手吧。创建一个目录并在其中放置几个​​文件。

这是我的测试文件如何组织的示例：

```
test/
     models/
            user/
                 authentication_test.rb
                 email_test.rb
                 reservation_test.rb
                 user_test.rb
                 username_test.rb 
```

无论我使用的是规范 DSL 还是 xUnit 样式，我都使用这种结构。使用规范 DSL 时，我在描述块中指定我正在测试的内容，如下所示：

```
require "minitest_helper"

describe User, :authentications do

  before do
    # ... 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-10-14T15:38:32.547

您还可以将多个类放入一个测试文件中：

```
module PizzaTest
  class Isolation < ActiveSupport::TestCase
    test "is awesome by default" do
      assert Pizza.new.awesome?
    end
  end

  class Integration < ActiveSupport::TestCase
    fixtures :all

    test "is awesome too" do
      pizzas('one-with-everything').awesome?
    end
  end
end 
```

甚至嵌套测试类：

```
class PizzaTest < ActiveSupport::TestCase
  test "is awesome by default" do
    assert Pizza.new.awesome?
  end

  class Integration < ActiveSupport::TestCase
    fixtures :all

    test "is awesome too" do
      assert pizzas('one-with-everything').awesome?
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-04-24T17:34:43.340

我更喜欢这种方式（只有一点点），但我认为它更容易遵循：

```
class ConventionalNameTest < ActiveSupport::TestCase
  class ContextTest < ConventionalNameTest
    # so much stuff...
  end
  class AnotherContextTest < ConventionalNameTest
    # and some more...
  end 
```

# sql-server - 在 SQL Server 2005 中，如何在保持文档顺序的同时将 XML 节点存储在表中？

> ID：14263843
> 
> 赞同：0
> 
> 时间：2013-01-10T17:33:24.397
> 
> 标签：sql-server, tsql, sql-server-2005, sql-server-openxml

我有一个 xml 文件，其中节点的顺序很重要，比如这个：

```
<Queue>
  <User name="Bob"/>
  <User name="Jane"/>
  <User name="Douglas"/>
  <User name="Samantha"/>
</Queue> 
```

我正在使用 OPENXML 将这些节点存储在表变量中。当我插入表变量时，如何确保保留节点顺序？

注意，我使用的是 OPENXML 而不是 xquery，所以这不是重复的：[Finding node order in XML document in SQL server](https://stackoverflow.com/questions/1134075/finding-node-order-in-xml-document-in-sql-server)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:33:24.397

我目前正在执行以下操作，依靠“mp:id”来提供排序。

```
DECLARE @xmltext NVARCHAR(MAX)
SET @xmltext = 
N'
<Queue>
  <User name="Bob"/>
  <User name="Jane"/>
  <User name="Douglas"/>
  <User name="Samantha"/>
</Queue>';

DECLARE @xmlObjectHandler INT;
    -- Set up XML and the appropriate namespace(s) we'll be using
EXEC sp_xml_preparedocument @xmlObjectHandler OUTPUT, @xmltext;

DECLARE @TUserQueue TABLE (
    Ordinal INT IDENTITY(1,1),
    UserName NVARCHAR(200)
)

INSERT INTO @TUserQueue
SELECT 
    UserName
FROM
    OPENXML(@xmlObjectHandler, '/Queue/User')   
    WITH (
        NodeId INT '@mp:id',
        UserName NVARCHAR(200) '@name'
    ) AS users
ORDER BY users.NodeId;

SELECT * FROM @TUserQueue 
```

# wpf - 具有导航支持的自定义 PRISM 功能区区域适配器

> ID：14263851
> 
> 赞同：0
> 
> 时间：2013-01-10T17:33:41.043
> 
> 标签：wpf, prism, desktop-application

我正在为功能区控件使用[区域适配器](http://msdn.microsoft.com/en-us/library/microsoft.practices.composite.regions.iregionadapter.aspx)，我在这篇文章[使用 PRISM 4 创建视图切换应用程序](http://www.codeproject.com/Articles/165370/Creating-View-Switching-Applications-with-Prism-4)中找到了它。我所有的功能区选项卡都在单独的模块中定义，具有绑定到每个选项卡的数据上下文的不同视图模型。我所有的视图模型都实现[了 INavigationAware](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.inavigationaware%28v=pandp.40%29.aspx)，但并非如此，PRISM 没有调用此接口的单个​​方法，可能是什么问题以及如何解决？
**注意**：我试图在选项卡控件上实现 IActiveAware 以查看它们是否被激活，但它们没有被激活，或者接口的方法也没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T14:46:20.840

我已经使用区域行为找到了这个问题的解决方案。

# watir - 如何提高 Watir element.present 的性能？方法？

> ID：14263854
> 
> 赞同：0
> 
> 时间：2013-01-10T17:33:52.530
> 
> 标签：watir, watir-webdriver

我在使用 Watir 的 Ruby 脚本时遇到了 IMO 高延迟。这是问题描述：我正在测试基于 AJAX 的应用程序，我想避免使用 sleep 来确保页面被加载：

```
class Page
  attr_accessor :expected_elements

  def loaded?
    # code to make sure AJAX page is loaded
  end
end 
```

所以代替这个：

```
def loaded?
  # static delay sufficient to get page loaded
  sleep(MAX_PAGE_LOAD_TIME)
  true
end 
```

我想要这样的东西：

```
def loaded?
  Watir::Wait.until(MAX_PAGE_LOAD_TIME) do
    expected_elements.all? do |element|
      element.present?
    end
  end
end 
```

问题是块的评估需要太长时间。我检查的元素越多，这个延迟就越高。我在一次迭代中大致经历了这种延迟：

```
Firefox -> 130ms
IE -> 615ms
Chrome -> 115 ms 
```

因此，要检查是否存在 N 个元素，我会得到 N 次相应的延迟......结果是即使 MAX_PAGE_LOAD_TIME 过期，也不会抛出 Watir::Wait::TimeoutError 因为块评估尚未完成......所以我结束了在检查元素是否存在引入比静态延迟更高的延迟的情况下，这足以加载页面。我试图通过 xpath 定位元素来提高性能，但性能提升并不显着。我是什么做错了吗？有没有办法加快目前的执行时间？方法？？这些延迟是否与您的经验相符 - 还是很高？

我检查了问题是否出在浏览器-服务器通信中，但这里的延迟非常低。我得到了 100 毫秒的服务器响应时间差，包括后端数据库请求。当然，根据这个响应渲染页面需要一些时间，但肯定不需要几秒钟。

我的配置：- Win7 OS，- Firefox 17.0.1 - IE 8.0.7601.17514 和 IEDriverServer_x64_2.26.2 - Chrome 23.0.1271.97 m 和 chromedriver_win_23.0.1240.0， - Ruby 1.9.3p125， - watir-webdriver (0.6.1)， - 硒网络驱动程序（2.27.2）

谢谢您的帮助！

根据讨论，我发布了一个基准测试代码示例：

```
Benchmark.bm do |x|
  x.report("text") do
    b.span(:text => "Search").present?
  end
end
Benchmark.bm do |x|
  x.report("xpath") do
    b.span(:xpath => "/html/body/div/div/div[2]/div[2]/div/div/div/div/div/div/div/div[2]/div/div/div[2]/div/div/div/div/div/div[2]/div/div/div/div/div/div/div/div[2]/div/div/div[2]/div/div/div/div/div/div[2]/div/div/div/div/div/span/span").present?
  end
end

        user     system      total        real
text   0.000000   0.000000   0.000000 (  0.140405)
xpath  0.000000   0.000000   0.000000 (  0.120005) 
```

其他基准测试结果：

```
container_xpath = "/html/body/div/div/div[2]/div[2]/div/div/div/div/div/div/div/div[2]/div/div/div[2]/div/div/div/div/div/div[2]/div/div/div/div/div/div/div/div/div/div/div/div/div/div/div[2]/div/div/div/div[2]/div/div/div"
Benchmark.bm do |x|
  x.report("cntnr") do
    @c = b.div(:xpath => container_xpath)
    @c.present?
  end
end
Benchmark.bm do |x|
  x.report("lb1") do
    @c.div(:xpath => "div[1]/div/div").present?
    #@c.div(:text => "Company:").present?
  end
end
Benchmark.bm do |x|
  x.report("lb2") do
    @c.div(:xpath => "div[3]/div/div").present?
    #@c.div(:text => "Contact person:").present?
  end
end
Benchmark.bm do |x|
  x.report("lb3") do
    @c.div(:xpath => "div[5]/div/div").present?
    #@c.div(:text => "Address:").present?
  end
end 
```

结果是：

```
Results for container reference and relative xpath:
       user     system      total        real
cntnr  0.000000   0.000000   0.000000 (  0.156007)
lb1    0.000000   0.000000   0.000000 (  0.374417)
lb2    0.000000   0.000000   0.000000 (  0.358816)
lb3    0.000000   0.000000   0.000000 (  0.358816)

Results for container reference and div's text:
       user     system      total        real
cntnr  0.000000   0.000000   0.000000 (  0.140402)
lb1    0.000000   0.000000   0.000000 (  0.358807)
lb2    0.000000   0.000000   0.000000 (  0.358807)
lb3    0.000000   0.000000   0.000000 (  0.374407) 
```

使用绝对 xpath 时：

```
container_xpath = "/html/body/div/div/div[2]/div[2]/div/div/div/div/div/div/div/div[2]/div/div/div[2]/div/div/div/div/div/div[2]/div/div/div/div/div/div/div/div/div/div/div/div/div/div/div[2]/div/div/div/div[2]/div/div/div"
Benchmark.bm do |x|
  x.report("cntnr") do
    @c = b.div(:xpath => container_xpath)
    @c.present?
  end
end

lb1_xpath = container_xpath + "/div[1]/div/div"
Benchmark.bm do |x|
  x.report("lb1_x") do
    b.div(:xpath => lb1_xpath).present?
  end
end

lb2_xpath = container_xpath + "/div[3]/div/div"
Benchmark.bm do |x|
  x.report("lb2_x") do
    b.div(:xpath => lb2_xpath).present?
  end
end

lb3_xpath = container_xpath + "/div[5]/div/div"
Benchmark.bm do |x|
  x.report("lb3_x") do
    b.div(:xpath => lb3_xpath).present?
  end
end 
```

结果是：

```
 user     system      total        real
cntnr  0.000000   0.000000   0.000000 (  0.140404)
lb1_x  0.000000   0.000000   0.000000 (  0.124804)
lb2_x  0.000000   0.000000   0.000000 (  0.156005)
lb3_x  0.000000   0.000000   0.000000 (  0.140405) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:12:37.700

好的，这个答案假设您的网站正在使用 jquery。如果不是，您必须找出正在使用的库并相应地修改方法......

编写一个等待 Ajax 调用完成的方法...

```
def wait_for_ajax(timeout = 10)
  timeout.times do
    return true if browser.execute_script('return jQuery.active').to_i == 0
    sleep(1)
  end

  raise Watir::Wait::TimeoutError, "Timeout of #{timeout} seconds exceeded on waiting for Ajax."
end 
```

当您第一次加载您正在测试的页面时调用该方法。然后遍历您预期的元素以查看它们是否存在（如果您有一组 Watir 元素要检查，请确保您使用 .each ，而不是 .all? ，就像您在代码中所做的那样）。

# javascript - d3.js 处理非 svg 浏览器

> ID：14263860
> 
> 赞同：5
> 
> 时间：2013-01-10T17:34:08.067
> 
> 标签：javascript, internet-explorer, svg, cross-browser, d3.js

d3.js 开发人员如何处理无法呈现 svg 的浏览器？我很好奇，因为 Internet Explorer 9、8、7 等在世界主要关键地区拥有巨大的多数市场份额，但似乎存在如此活跃的 d3.js 社区，就好像 Internet Explorer 不存在一样。

D3 的目的是用于灵活的数据驱动图表，因此能够以直观的方式将复杂的主题可视化。因此，瞄准最时尚的科技领域并假装其他人也从他们的默认浏览器升级是一种疏忽。

如果检测到特定浏览器，我已经看到纽约时报提供备用 jpg 信息图表

我还看到了一些旨在渲染 D3 svg 服务器端并显示动态生成的图像的东西。

但是什么是公认的做法和选择？我觉得这应该在D3主页的顶部

你如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T19:24:48.977

通常，您可以使用强大的 polyfill，例如[Raphael](http://raphaeljs.com/)来完成这项工作，但您必须稍微卷起袖子。有一些项目是沿着这些思路开始的，以使其更加无缝，但据我所知，没有一个项目是 100% 准备好开箱即用的。

一些例子：

*   [R2D3](https://github.com/mhemesath/r2d3/)
*   [结合 D3 和 Raphael 制作网络图](http://dataist.wordpress.com/2012/03/11/combining-d3-and-raphael-to-make-a-network-graph/)
*   [D34拉斐尔](http://webmonarch.github.com/d34raphael/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:35:58.990

D3 在编写 Javascript 代码的方式上做出了一些前瞻性的选择。它在很大程度上依赖于最近的 ECMAScript 方法，例如 Array.forEach() 来进行 Javascript 处理，并且不能弥补旧 IE 缺乏 RGBA 或 Hex 支持（以及其他功能）。我不想说它“简单”或“简单”，但从表面上看，似乎可以将旧版 IE 支持添加到 D3.js - 可能没有太多麻烦。

# android - Android TableLayout插入垂直行

> ID：14263869
> 
> 赞同：1
> 
> 时间：2013-01-10T17:34:20.497
> 
> 标签：android, eclipse, html, tablelayout

我在 TableLayout 中创建了 5 行。我想将该行中的一项与它下面的一项合并，如下所示：
![截屏](../Images/a312e940be10b8ae4d7ed61f0cd0ae73.png).
我想以编程方式做到这一点。这可能吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T01:56:49.470

经过大量研究，我以编程方式在 5 个线性布局中添加了文本视图。每个 textview 都有自己的 onClick 方法和标签。在数据库中，我输入了一些值（高度、宽度等）和标记值。在 onCreate 方法中，首先从数据库中获取一个线性布局的所有日期，如果有需要转换的文本视图，则使用光标遍历每个文本视图。如果该文本视图的高度必须更大，则将属性 android:visibility="gone" 设置为他下方的文本视图。我把剩下的留给你的编程逻辑。

# msbuild - GetAssemblyIdentity 版本始终为 1.0.0.0

> ID：14263870
> 
> 赞同：2
> 
> 时间：2013-01-10T17:34:34.520
> 
> 标签：msbuild

版本是 1.0.0.0，即使文件版本和产品版本都在 DLL 中定义并且当我在 Windows 7 中查看其属性时正确显示。有什么建议吗？

```
 <Target Name="TestingAssemblyIdentity">
    <GetAssemblyIdentity AssemblyFiles="MyCSharp.dll">
      <Output TaskParameter="Assemblies" ItemName="assemblyInfo"/>
    </GetAssemblyIdentity>
    <Message Text="GetAssemblyIdentity Version is %(assemblyInfo.Version)" />
  </Target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:47:25.643

该[`GetAssemlyIdentity`](http://msdn.microsoft.com/en-us/library/ms164296(v=vs.100).aspx)任务返回程序集版本 ( [AssemblyVersionAttribute](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.aspx) )，而不是文件或产品版本。后者不是程序集身份的一部分。

请注意，程序集版本和程序集文件/产品版本有不同的[用途](http://support.microsoft.com/kb/556041)。

有关从 msbuild 中读取文件版本的可能方法，请参见[此处。](https://stackoverflow.com/q/1252002/21567)

# jquery - 如何打开带有类而不是 id 的 jQuery 对话框？

> ID：14263871
> 
> 赞同：3
> 
> 时间：2013-01-10T17:34:38.053
> 
> 标签：jquery, html, class, dialog

我在一个页面上有很多链接，我只需要打开几个 jQuery 对话框。如何使用类而不是 id 打开它们？

这是我的脚本：

```
 <script>
    // increase the default animation speed to exaggerate the effect
    $.fx.speeds._default = 1000;
    $(function() {
        $( "#selectFolder" ).dialog({position:['middle',60],        
            open: function(event, ui) {  
            jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span style="float:right;"><img src="../images/x.png" /></span>');  
        },  
            dialogClass: 'ui-widget-shadow',
            modal: true,    
            autoOpen: false,
            width: '650px',
            close: function(ev, ui) {$(this).close();}      
        });

        $( "#selectFolderOpen" ).click(function() {
            $( "#selectFolder" ).dialog( "open" );
            return false;
        });
    });
    </script>
<div style="display:none;">
    <div id="selectFolder" title="Select Folder">
        <div style="display:block;">
            <!--#include file="sidebar_modal_questions_folder_select.asp"-->
        </div>
    </div>
</div> 
```

这是当前有效的示例：

```
<a href="#" class="buttonintable" id="selectFolderOpen">Select Folder</a> 
```

我希望它像这样工作：

```
<a href="#" class="buttonintable selectFolderOpen">Select Folder</a> 
```

这样我就不必标识我希望它打开的每一个链接。

我知道您使用 ('#selector') 和 id 和 ('.selector') 作为类 - 但我无法让它工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:36:02.100

将您的选择器更改为`$('.selectFolderOpen').click(...)`

jQuery 选择器可以选择您可以在 CSS 选择器中定位的任何内容。它`#`用来表示一个id，一个`.`（点）表示一个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:46:24.120

这是一个例子：http: [//jsfiddle.net/WVVXy/](http://jsfiddle.net/WVVXy/)

```
$(function () {
  $("a.buttonintable").click(function () {
    $(this).dialog();
    return false;
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:38:04.500

我回答了我自己的问题。这是工作代码：

```
<script>
// increase the default animation speed to exaggerate the effect
$.fx.speeds._default = 1000;
$(function() {
    $( "#selectFolder" ).dialog({position:['middle',60],        
        open: function(event, ui) {  
        jQuery('.ui-dialog-titlebar-close').removeClass("ui-dialog-titlebar-close").html('<span style="float:right;"><img src="../images/x.png" /></span>');  
    },  
        dialogClass: 'ui-widget-shadow',
        modal: true,    
        autoOpen: false,
        width: '650px',
        close: function(ev, ui) {$(this).close();}      
    });

    $( "a.selectFolderOpen" ).click(function() {
        $( "#selectFolder" ).dialog( "open" );
        return false;
    });
});
</script> 
```

用它开火：

```
<a href="#" class="buttonintable selectFolderOpen">Select Folder</a> 
```

# python - 仅在满足条件时才添加到字典

> ID：14263872
> 
> 赞同：109
> 
> 时间：2013-01-10T17:34:39.250
> 
> 标签：python, variables, dictionary, urllib

我正在使用`urllib.urlencode`构建 web POST 参数，但是有一些值我只想在`None`它们存在以外的值时添加。

```
apple = 'green'
orange = 'orange'
params = urllib.urlencode({
    'apple': apple,
    'orange': orange
}) 
```

这很好，但是如果我将`orange`变量设为可选，如何防止它被添加到参数中？像这样的东西（伪代码）：

```
apple = 'green'
orange = None
params = urllib.urlencode({
    'apple': apple,
    if orange: 'orange': orange
}) 
```

我希望这已经足够清楚了，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-10T17:36:16.217

在创建初始值之后，您必须单独添加密钥`dict`：

```
params = {'apple': apple}
if orange is not None:
    params['orange'] = orange
params = urllib.urlencode(params) 
```

Python 没有将键定义为条件的语法；如果您已经按顺序排列了所有内容，则可以使用 dict 理解：

```
params = urllib.urlencode({k: v for k, v in (('orange', orange), ('apple', apple)) if v is not None}) 
```

但这不是很可读。

如果您使用的是 Python 3.9 或更高版本，则可以使用[新的 dict 合并运算符支持](https://docs.python.org/3.9/whatsnew/3.9.html#dictionary-merge-update-operators)和条件表达式：

```
params = urllib.urlencode(
    {'apple': apple} | 
    ({'orange': orange} if orange is not None else {})
) 
```

但我发现可读性受到影响，因此可能仍会使用单独的`if`表达式：

```
params = {'apple': apple}
if orange is not None:
    params |= {'orange': orange}
params = urllib.urlencode(params) 
```

另一种选择是使用[字典 unpacking](https://www.python.org/dev/peps/pep-0448/)，但对于一个不是那么可读的单个键：

```
params = urllib.urlencode({
    'apple': apple,
    **({'orange': orange} if orange is not None else {})
}) 
```

我个人永远不会使用它，它太 hacky 并且不像使用单独的语句那样明确和*清晰。*`if`正如[Python 之禅](https://www.python.org/dev/peps/pep-0020/)所说：*可读性很重要。*

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-01-10T17:51:53.507

为了搭载 sqreept 的答案，这里有一个子类，`dict`其行为符合要求：

```
class DictNoNone(dict):
    def __setitem__(self, key, value):
        if key in self or value is not None:
            dict.__setitem__(self, key, value)

d = DictNoNone()
d["foo"] = None
assert "foo" not in d 
```

这将允许将现有键的值*更改*为`None`，但分配`None`给不存在的键是无操作的。如果您想将一个项目设置为从字典`None`中*删除*它（如果它已经存在），您可以这样做：

```
def __setitem__(self, key, value):
    if value is None:
        if key in self:
            del self[key]
    else:
        dict.__setitem__(self, key, value) 
```

如果你在构建过程中传递它们的值，它们`None` *就可以进入。*如果你想避免这种情况，添加一个`__init__`方法来过滤掉它们：

```
def __init__(self, iterable=(), **kwargs):
    for k, v in iterable:
        if v is not None: self[k] = v
    for k, v in kwargs.iteritems():
        if v is not None: self[k] = v 
```

您也可以通过编写它来使其通用，这样您就可以*在创建字典时传入*所需的条件：

```
class DictConditional(dict):
    def __init__(self, cond=lambda x: x is not None):
        self.cond = cond
    def __setitem__(self, key, value):
        if key in self or self.cond(value):
            dict.__setitem__(self, key, value)

d = DictConditional(lambda x: x != 0)
d["foo"] = 0   # should not create key
assert "foo" not in d 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-04-23T07:23:43.753

很老的问题，但这里有一个替代方法，即用空字典更新字典什么都不做。

```
def urlencode_func(apple, orange=None):
    kwargs = locals().items()
    params = dict()
    for key, value in kwargs:
        params.update({} if value is None else {key: value})
    return urllib.urlencode(params) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-13T01:30:45.477

我这样做了。希望这有帮助。

```
apple = 23
orange = 10
a = {
    'apple' : apple,
    'orange' if orange else None : orange
} 
```

预期输出：`{'orange': 10, 'apple': 23}`

虽然，如果`orange = None`，那么将有一个条目`None:None`。例如考虑这个：

```
apple = 23
orange = None
a = {
    'apple' : apple,
    'orange' if orange else None : orange
} 
```

预期输出：`{None: None, 'apple': 23}`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-01-16T05:53:20.430

我建议的一种技术是为此使用[字典解包操作符](https://www.python.org/dev/peps/pep-0448/)。

```
apple = 'green'
orange = None
params = urllib.urlencode({
    'apple': apple,
    **({ 'orange': orange } if orange else {})
}) 
```

## 解释

基本上，如果`orange`是`None`，那么上面的字典简化为

```
{
    'apple': apple,
    **({})
}

# which results in just
{
    'apple': apple,
} 
```

相反，如果`orange`不是`None`：

```
{
    'apple': apple,
    **({ "orange": orange })
}

# which results in just
{
    'apple': apple,
    'orange': orange
} 
```

可读性是有条件地添加内联键的缺点。可以创建一个函数来帮助调解可读性问题。

```
from typing import Callable

def cond_pairs(
        cond: bool, pairs: Callable[[], dict],
) -> dict:
    return pairs() if cond else {}

{
    'apple': apple,
    **cond_pairs(orange, lambda: { 'orange': orange })
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-10T17:41:15.380

您可以在分配后清除 None：

```
apple = 'green'
orange = None
dictparams = {
    'apple': apple,
    'orange': orange
}
for k in dictparams.keys():
    if not dictparams[k]:
        del dictparams[k]
params = urllib.urlencode(dictparams) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-10T17:45:27.587

另一个有效的答案是，您可以创建自己的不存储 None 值的类似 dict 的容器。

```
class MyDict:
    def __init__(self):
        self.container = {}
    def __getitem__(self, key):
        return self.container[key]
    def __setitem__(self, key, value):
        if value != None:
            self.container[key] = value
    def __repr__(self):
        return self.container.__repr__()

a = MyDict()
a['orange'] = 'orange';
a['lemon'] = None

print a 
```

产量：

```
{'orange': 'orange'} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-01-22T14:25:40.387

我发现使用[生成器函数](https://wiki.python.org/moin/Generators)更容易理解，并且足够灵活。它也适用于 Python 2 和 3。

```
def generate_request_items(apple, orange):
    yield "apple", apple
    if orange:
        yield "orange", orange
    # Add additional conditionals and yield statements here

apple = 'green'
orange = None
params = urllib.urlencode(dict(generate_request_items(apple, orange))) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-01T20:02:42.963

我真的很喜欢这里答案中的巧妙技巧：[https ://stackoverflow.com/a/50311983/3124256](https://stackoverflow.com/a/50311983/3124256)

但是，它有一些陷阱：

1.  重复`if`测试（对键和值重复）
2.  结果中令人讨厌`None: None`的条目`dict`

为避免这种情况，您可以执行以下操作：

```
apple = 23
orange = None
banana = None
a = {
    'apple' if apple else None: apple,
    'orange' if orange else None : orange,
    'banana' if banana else None: banana,
    None: None,
}
del a[None] 
```

预期输出：`{'apple': 23}`

注意：该`None: None`条目确保了两件事：

1.  密钥将`None`始终存在（`del`不会抛出错误）
2.  'None values' 的内容永远不会存在于字典中（以防你`del`之后忘记）

如果您不担心这些事情，您可以将其排除在外并将 del 包装在 a 中`try...except`（或在ing`None`之前检查密钥是否存在）。`del`要解决第 2 个问题，您还可以对值（除了键）进行条件检查。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-10T17:44:15.553

```
fruits = [("apple", get_apple()), ("orange", get_orange()), ...]

params = urllib.urlencode({ fruit: val for fruit, val in fruits if val is not None }) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-11T14:08:29.483

有一个违反直觉但可靠的技巧，可以重用您想要排除它的其他道具名称。

```
{
    'orange' if orange else 'apple': orange,
    'apple': apple,
} 
```

在这种情况下，后一个“苹果”将覆盖前一个“苹果”，有效地将其删除。请注意，条件表达式应高于真实表达式。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-24T14:26:40.650

您可以使用字典推导使用单个条件处理所有可选项目：

```
apple = "red"
orange = None
dictparams = {
    key: value for key, value in
    {
        "apple": apple,
        "orange": orange
    }.items()
    if value is not None
} 
```

在这种情况下，`dictparams`结果将不包含`"orange"`，因为`orange`是`None`：

```
{'apple': 'green'} 
```

# salesforce - Apex 批处理未执行所有记录

> ID：14263873
> 
> 赞同：2
> 
> 时间：2013-01-10T17:34:45.060
> 
> 标签：salesforce, apex-code, force.com

我对 Apex 比较陌生，但我对正在创建的批处理作业有疑问。我正在尝试根据我公司的区域对齐插入 AccountTeamMember 记录。该代码似乎运行良好，但有一个缺陷：它只为每个用户插入 100 条 AccountTeamMember 记录（应该接近 400 条，因为这是我在开发沙箱中加载的数量）。有谁知道我可以做些什么来为每个用户的所有帐户插入一个 AccountTeamMember 记录，而不是 400 个中的 100 个？它是否与查询有关，包括父子关系和州长限制，因为它是一个偶数（100）？

以下是相关代码：

```
//list to hold new account teams
List<AccountTeamMember> acctMembers = new List<AccountTeamMember>();

//list to hold new account sharing rules
List<AccountShare> acctSharingRules = new List<AccountShare>();

global Database.querylocator start(Database.BatchableContext BC){
String query = 'SELECT (SELECT User__c FROM Territory_Users__r), (SELECT Account__c FROM Territory_Accounts__r) FROM Territory_Master__c';
return Database.getQueryLocator(query);}

global void execute(Database.BatchableContext BC, List<sObject> scope){

for (sObject s : scope) {
    Territory_Master__c tm = (Territory_Master__c) s;
    Territory_User__c[] userList = tm.getSObjects('Territory_Users__r');
    Territory_Account__c[] accountList = tm.getSObjects('Territory_Accounts__r');

    if (userList != null && accountList != null){
        for(Territory_User__c uu : userList){
            for(Territory_Account__c aa: accountList){
                AccountTeamMember addRecord = new AccountTeamMember();
                addRecord.AccountId = aa.Account__c;
                addRecord.TeamMemberRole = 'Sales Rep';
                addRecord.UserId = uu.User__c;
                acctMembers.add(addRecord);

                AccountShare addSharing = new AccountShare();
                addSharing.AccountId = aa.Account__c;
                addSharing.OpportunityAccessLevel = 'Read';
                addSharing.CaseAccessLevel = 'Read';
                addSharing.AccountAccessLevel = 'Edit';
                addSharing.UserOrGroupId = uu.User__c;
                acctSharingRules.add(addSharing);

            }
        }
    }
}

//DML
if(acctMembers.size() > 0){
    insert acctMembers;
}
if(acctSharingRules.size() > 0){
    insert acctSharingRules;
}
} 
```

谢谢，

特雷

仅供参考：这是基于问题答案的最终结果：

```
global Database.querylocator start(Database.BatchableContext BC){
String query = 'SELECT Id FROM Territory_Master__c';
return Database.getQueryLocator(query);}

global void execute(Database.BatchableContext BC, List<sObject> scope){

for(sObject s : scope){
    Territory_Master__c tm = (Territory_Master__c) s;

    List<Territory_User__c> userList = [SELECT User__c FROM Territory_User__c WHERE Territory_Master__c = :tm.Id];
    List<Territory_Account__c> accountList = [SELECT Account__c FROM Territory_Account__c WHERE Territory_Master__c = :tm.Id];

    if (userList != null && accountList != null){
        for(Territory_User__c uu : userList){
                for(Territory_Account__c aa: accountList){
                AccountTeamMember addRecord = new AccountTeamMember();
                addRecord.AccountId = aa.Account__c;
                addRecord.TeamMemberRole = 'Sales Rep';
                addRecord.UserId = uu.User__c;
                acctMembers.add(addRecord);

                acctSharingRules.add(new AccountShare(
                    AccountId = aa.Account__c,
                    OpportunityAccessLevel = 'Read',
                    CaseAccessLevel = 'Read',
                    AccountAccessLevel = 'Edit',
                    UserOrGroupId = uu.User__c)
                );
            }
        }
    }
}

//DML
if(acctMembers.size() > 0){
    insert acctMembers;
}
if(acctSharingRules.size() > 0){
    insert acctSharingRules;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:10:42.627

我怀疑您的子查询受到限制，您的工作是确保在继续下一个记录之前完成此记录。

[http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_relationships.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql_relationships.htm)

> 子查询结果类似于常规查询结果，如果有很多子项，您可能需要使用 queryMore() 来检索所有记录。例如，如果您对包含子查询的帐户发出查询，您的客户端应用程序也必须处理来自子查询的结果

（这个例子是 Java 调用 Salesforce 所以不要复制粘贴代码，试着理解这个概念。据我所知 Apex 没有这个 queryMore 方法，它只用于集成）

**选项1**

有趣的是，如果您将 for 循环更改为以下内容，理论上它应该可以工作：

```
for(Territory_User__c uu : tm.getSObjects('Territory_Users__r')){
    for(Territory_Account__c aa: tm.getSObjects('Territory_Accounts__r')) 
```

那是因为以这种方式编写的 for 循环[应该自动调用它们的内部 queryMore()](http://www.salesforce.com/us/developer/docs/apexcode/Content/langCon_apex_loops_for_SOQL.htm)。

如果它不起作用（我没有测试过），你将不得不做一些更复杂的改变。

**选项 2**

从主查询中删除子查询，您必须将它们放在 execute() 中。像这样的东西：

```
for(sObject s : scope){
    Territory_Master__c tm = (Territory_Master__c) s;

    for(Territory_User__c uu : [SELECT User__c FROM Territory_User__c WHERE Territory_Master__c = :tm.Id]){
        for(Territory_Account__c aa: [SELECT Account__c FROM Territory_Account__c WHERE Territory_Master__c = :tm.Id]){
            acctMembers.add(new AccountTeamMember(
                AccountId = aa.Account__c,
                TeamMemberRole = 'Sales Rep',
                UserId = uu.User__c)
            );

            acctSharingRules.add(new AccountShare(
                AccountId = aa.Account__c,
                OpportunityAccessLevel = 'Read',
                CaseAccessLevel = 'Read',
                AccountAccessLevel = 'Edit',
                UserOrGroupId = uu.User__c)
            );
        }
    }
} 
```

* * *

**旁注**

1.  您是否有可能在所有对象（区域主/用户/帐户）中检索到 50K 行的限制？如果是这种情况，您可能必须限制批处理作业的范围（传递给的可选第二个参数[`Database.executeBatch()`](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_database.htm)）。
2.  这个技巧可以让你的脚本执行得更快一些并且使用更少的语句（这样你就不会达到另一个调控器限制）：

    ```
    acctSharingRules.add(new AccountShare(
        AccountId = aa.Account__c,
        OpportunityAccessLevel = 'Read',
        CaseAccessLevel = 'Read',
        AccountAccessLevel = 'Edit',
        UserOrGroupId = uu.User__c)
    ); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:06:03.390

你的代码没有明显的问题，所以如果我是你，我会尝试缩小问题的原因。问题的根源将是以下之一：

*   您的查询仅返回 accountList 或 userList 或两者中的 100 个项目
*   插入一次只能处理 100 个项目，并且默默地无法插入其余项目
*   100 之后的项目插入失败

如果您还没有这样做，您应该熟悉在 Salesforce.com 中使用调试日志（设置 | 监控 | 调试日志）。打开它们，然后使用其中的一些 System.debug 调用运行此代码以找出：

*   userList 和 accountList 中有多少项？
*   如果超过 100，当您插入共享行时，其中一些插入会失败吗？如果您使用 Database.insert() 而不仅仅是插入语句，那么您将得到一个 SaveResult[] 返回，它将告诉您尝试插入的每一行是成功还是错误。

所以我不能说为什么这会失败，而且我没有看到任何应该适用于此的特定限制，但以上内容至少应该可以帮助您调试它。

# asp.net-mvc-3 - 如何在 Apache 中运行 ASP.NET MVC3？

> ID：14263876
> 
> 赞同：2
> 
> 时间：2013-01-10T17:34:54.973
> 
> 标签：asp.net-mvc-3, apache, mono, apache2

我安装了运行 Mono 2.10.8 的 Ubuntu 12.10 服务器。我还运行了 Apache2，并且能够使用 mod_mono 版本 4 运行 ASP.NET。我现在正在尝试运行 ASP.NET MVC3 Web 应用程序，但我收到错误消息

> 无法加载文件或程序集“System.Web.Helper，Version=2.0.0.0，Culture=neutral，PublicKeyToke=...”或其依赖项之一。该系统找不到指定的文件。

我知道它在 ASP.NET 4.0 下运行，因为黄屏死机说 ASP.NET 版本：4.0.30319.1

我已经部署了该程序集以及所需的其他程序集。

奇怪的部分是运行命令

> 须藤xsp4

在网站目录中使应用程序按预期工作。

我该如何解决这里发生的事情。

# android - 使用 OnStatusChanged 从 GPS_PROVIDER 切换到 NETWORK_PROVIDER？

> ID：14263878
> 
> 赞同：0
> 
> 时间：2013-01-10T17:35:06.417
> 
> 标签：android, gps, locationmanager, locationlistener

我正在开发一个需要准确 GPS 定位的应用程序。如果`GPS_PROVIDER`启用但不可用（例如当您在隧道中时），我希望我的应用程序切换到`NETWORK_PROVIDER`.

我可以使用 locationListener`OnStatusChanged OUT_OF_SERVICE`来识别是否无法进行 GPS 定位吗？

像这样的东西：

```
public void onStatusChanged(String provider, int status, Bundle extras) {
    //0 = OUT_OF_SERVICE
    if (status == 0) {
        //try requesting updates using NETWORK_PROVIDER
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll);
        //TOAST MESSAGE: GPS UNAVAILABLE ATTEMPTING FIX WITH NETWORK
        ... 
```

我使用`OnStatusChanged`正确吗？是否有一种简单且更好的方法来首先尝试 GPS 修复，如果不可用，则切换到 NETWORK？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:47:56.417

添加`lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll);`它将开始使用网络获取位置，但是一旦您从隧道出来，它将开始从网络和 GPS 获取。使用`location.getProvider()`您应该能够区分它是gps还是网络。

如果您的 GPS 状态在应用程序运行时没有发生变化（例如，如果您始终在室内没有 GPS 定位），则某些设备不会触发该`OnStatusChanged()`方法。

如果您在应用程序运行时更改 GPS 状态（例如，您在室内但无法获得定位，然后走到外面却可以获得定位，反之亦然），则该`OnStatusChanged()`方法应在所有设备上触发。

如果您想使用一个完全工作的开源应用程序作为示例，请尝试由 Android 团队的 Mike Lockwood 编写的 GPSTest。

[Google Play 上的 GPS 测试](https://play.google.com/store/apps/details?id=com.android.gpstest)

[GPSTest 的源代码](https://github.com/mikeandroid/gpstest)

有关即使您的设备无法修复也会不断更新的 GPS 的更多详细信息，您可能需要注册一个 GPSStatusListener。

在您的活动中，声明类变量：

```
private LocationManager mService;
private GpsStatus mStatus; 
```

...并添加处理 GPSStatus 更改的方法：

```
public void onGpsStatusChanged(int event) {
    mStatus = mService.getGpsStatus(mStatus);
    switch (event) {
        case GpsStatus.GPS_EVENT_STARTED:
            // Do Something with mStatus info
            break;
        case GpsStatus.GPS_EVENT_STOPPED:
            // Do Something with mStatus info
            break;
        case GpsStatus.GPS_EVENT_FIRST_FIX:
            // Do Something with mStatus info
            break;
        case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
            // Do Something with mStatus info
            break;
    }
} 
```

然后在 Activity 的 OnCreate() 中注册 GPSStatusListener：

```
mService = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
mService.addGpsStatusListener(this); 
```

在 GPSTest 应用程序中，当前可用卫星的列表显示在屏幕上，每次 GPSStatusListener 更新都基于此[代码](https://github.com/mikeandroid/gpstest/blob/master/src/com/android/gpstest/GpsStatusActivity.java)。

这样，即使您的手机无法获得 GPS 定位（因此可能不会触发 ），您也会收到系统 GPS 状态的主动`OnStatusChanged`更新`LocationListener`。

# database - 如何在 Amazon RDS (Oracle) 中制作架构副本？

> ID：14263882
> 
> 赞同：2
> 
> 时间：2013-01-10T17:35:16.597
> 
> 标签：database, oracle, amazon-web-services, oracle11g, amazon-rds

对于团队中的所有开发人员，我正在尝试从“主”架构自动为每个开发人员创建专用架构。我怎样才能做到这一点？最后，我想要的是：给定“developer_1”模式名称，“developer_1”将拥有模式“master”中的所有表、视图、序列以及索引和约束。在线搜索指向 DataPump。AWS 文档看起来很简单。我希望以这样的方式进行此设置，以便每周调用它以从主模式获取最新快照。（炸毁 developer_1 存在的任何东西）

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:50:12.853

我正在寻找类似的东西并找到了这个（然后在谷歌拖网中找到了你）：

[http://learnwithme11g.wordpress.com/2012/06/07/copy-schema-into-same-database-with-impdp/](http://learnwithme11g.wordpress.com/2012/06/07/copy-schema-into-same-database-with-impdp/)

我认为您可以通过使用以下方法绕过 CLI 访问：!mkdir /path/to/dir 然后调用：在 SQL*Plus 中创建目录为 TEMP_DIR='/path/to/dir'。另外，请注意上面站点中的语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:27:57.097

您可能需要 Oracle 的 Data Pump 实用程序。有了这个，您可以创建一个模式转储（导出），然后导入该转储。导入时，您可以使用方便的`REMAP_SCHEMA`命令行参数来更改导入时的模式名称。

下面的链接应该可以帮助您入门。

导出：[http ://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_export.htm)

导入：[http ://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_import.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_import.htm)

# objective-c - 无法解析 Libxml2 中的多条记录

> ID：14263883
> 
> 赞同：0
> 
> 时间：2013-01-10T17:35:19.607
> 
> 标签：objective-c, libxml2

我有一组使用 libxml2 解析的记录。

例子：

```
<Customer><name>ABC</name><age>22</age></Customer> 
<Customer><name>XBF</name><age>23</age></Customer>
<Customer><name>AHG</name><age>22</age></Customer> 
<Customer><name>KKK</name><age>24</age></Customer>
<Customer><name>NNN</name><age>25</age></Customer>' 
```

问题是，在解析时我能够解析第一条记录，但连续记录没有被解析，因为在解析第一条记录后没有调用 sax 委托 startElementSAX()。

解析第一条记录后，有什么方法可以调用此 SAX 委托函数。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:45:39.737

因为他们都有相同的名字。如何区分一个元素和另一个元素？你需要把它变成一个数组：

```
<Customers>
    <Customer><name>ABC</name><age>22</age></Customer> 
    <Customer><name>XBF</name><age>23</age></Customer>
    <Customer><name>AHG</name><age>22</age></Customer> 
    <Customer><name>KKK</name><age>24</age></Customer>
    <Customer><name>NNN</name><age>25</age></Customer>
</Customers> 
```

xml 末尾还有一个额外的字符，我认为这是一个复制粘贴错误。

# vb.net - QueryString 加密及相关字符问题

> ID：14263884
> 
> 赞同：0
> 
> 时间：2013-01-10T17:35:20.200
> 
> 标签：vb.net, encryption, query-string, asp.net-4.0

我正在使用 64base 数据加密功能来加密和解密在链接中发送并返回 QueryString 的 emil 地址，使用：

```
Encrypt(txtEmail.Text).ToString 
```

// 生成类似这样的“pqM/rgLD9PSrE+Ofm4pt4kg86+1RChHD”

```
Decrypt(Request("email").ToString 
```

但是 Decrypt 不能正常工作并返回错误“Base-64 字符数组的长度无效”，直到我喜欢我可以使用以下方法解决它：

```
Decrypt(Request("email").Replace(" ", "+").ToString) 
```

由于从 URL 调用时加号“+”字符会生成空格。我也试过 UrlEncode 但没有帮助

```
Decrypt(Server.UrlEncode(Request("email"))) 
```

**现在我的问题是：**

1.  这是加密字符串可能面临的唯一问题吗？
2.  有没有比我使用替换功能更有效的解决问题的方法？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:37:58.837

如果您没有正确生成 URL，就会发生这种情况。

ASP.Net`Request`访问器将自动解码您访问的数据。

但是，您需要先对字符串进行 URL 数据编码，然后再将其放入查询字符串中。

# c++ - 关于创建新对象的运行时错误

> ID：14263891
> 
> 赞同：0
> 
> 时间：2013-01-10T17:35:44.943
> 
> 标签：c++, runtime

我正在尝试编写一个简单的游戏大厅程序（没有实际的网络，只是一个模拟。）我在测试我的程序时遇到了运行时错误，我不知道如何修复它。（我对编程相当陌生。）

我的错误是，当我将新玩家节点输入大厅时，程序接受我输入的前两个玩家名称，但在第三次尝试时，我输入了一个新名称，然后按 Enter，但光标转到新行而不是进入新节点。我怀疑问题出在 Lobby::Add 函数的某个地方，但我不确定在哪里。任何帮助或想法将不胜感激。谢谢你=）。

```
#include <iostream>
#include <string>

using namespace std;

class Player
{
public:

    Player(const string& name = "");
    string GetName() const;
    Player* GetNext() const;
    void SetNext(Player* next);

private:
    string m_Name;
    Player* m_pNext;
};

Player::Player(const string& name):
    m_Name(name),
    m_pNext(0)
{}

string Player::GetName() const
{
    return m_Name;
}

Player* Player::GetNext() const
{
    return m_pNext;
}

void Player::SetNext(Player* next)
{
    m_pNext = next;
}

class Lobby
{
    friend ostream& operator<<(ostream& os, const Lobby& aLobby);

public:
    Lobby();
    ~Lobby();
    void Add();
    void Remove();
    void Clear();

private:
    Player* m_pHead;
};

Lobby::Lobby():
m_pHead(0)
{}

Lobby::~Lobby()
{
    Clear();
}

void Lobby::Add()
{
    // Create a new player node
    cout << "Please enter the name of new player: ";
    string name;
    cin >> name;
    Player* pNewPlayer = new Player(name);

    //If list is empty make head of list this new player
    if (m_pHead == 0)
    {
        m_pHead = pNewPlayer;
    } 

    else
    {
        Player* pIter = m_pHead;

        while(pIter->GetNext() != 0)
        {
            pIter->GetNext();
        }

        pIter->SetNext(pNewPlayer);
    }
}

void Lobby::Remove()
{
    if(m_pHead == 0)
    {
        cout << "The game lobby is empty, there are no players to remove!\n\n";
    }

    else
    {
        Player* pTemp = m_pHead;
        m_pHead = m_pHead->GetNext();
        delete pTemp;
    }
}

void Lobby::Clear()
{
    while(m_pHead != 0)
    {
        Remove();
    }
}

ostream& operator<<(ostream& os, const Lobby& aLobby)
{
    Player* pIter = aLobby.m_pHead;

    cout << "Here's who is in the game lobby: \n";

    if (pIter == 0)
    {
        cout << "The lobby is empty.\n";
    }

    else
    {
        while(pIter != 0)
        {
            os << pIter->GetName() << endl;
            pIter = pIter->GetNext();
        }
    }

    return os;
}

int main()
{
    Lobby myLobby;
    int choice;

    do
    {
        cout << myLobby;
        cout << "\nWelcome to the game lobby!\n";
        cout << "Please enter a choice.\n";
        cout << "0 - Quit the program.\n";
        cout << "1 - Add a player to the lobby.\n";
        cout << "2 - Remove a player from the lobby.\n";
        cout << "3 - Clear the lobby.\n\n";

        cout << "Choice: ";
        cin >> choice;

        switch(choice)
        {
            case 0: cout << "Goodbye!"; break;
            case 1: myLobby.Add(); break;
            case 2: myLobby.Remove(); break;
            case 3: myLobby.Clear(); break;
            default: cout << "Please enter a valid choice.\n"; break;
        }

    }while(choice != 0);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:26:30.487

添加时有一个无限循环。您打电话`GetNext()`但忘记将结果分配给`pIter`.

我倾向于同意其他人的说法，但您需要学习如何使用调试器。它还有助于在发布之前将有问题的代码减少到最小的代码段。在许多情况下，这已经让您自己找到问题所在。在您的代码中，您应该只用固定值替换输入，`std::cin`这样人们就不必猜测他们需要输入什么。

祝你好运！

乌里

# css - JavaFX 2.x：右侧的图表内容空间

> ID：14263892
> 
> 赞同：2
> 
> 时间：2013-01-10T17:35:47.670
> 
> 标签：css, charts, javafx-2

我想设置从绘制的最后一个数据点到最右侧图表内容的空白空间。

例如，在下图中

![在此处输入图像描述](../Images/6f0a1c0c982b4b08ebd552913106fe11.png)

我的意思是从线条结束的地方（Dec X 位置）到图表最右端的空白区域。

有没有办法在css中设置这个值？

谢谢

# sql-server - 如何更改 Visual Studio 2012 制作的默认账户模型中 UserID 的数据类型？

> ID：14263893
> 
> 赞同：1
> 
> 时间：2013-01-10T17:35:47.077
> 
> 标签：sql-server, asp.net-mvc-4, visual-studio-2012

我在 Visual Studio 2012 中制作了一个 Internet MVC 4 应用程序，我想使用 SingleMembership 添加用户。起初我看到用户数据库并不是我想要的，它们在 SQL/Express 数据库上，我希望它们在我已经为我的应用程序中的所有模型创建的 SQL/Server 上。所以我所做的是修改 Visual Studio 2012 为我的数据库创建的连接字符串：

```
<add name="Test2_Entities" connectionString="metadata=res://*/Models.Model.csdl|res://*/Models.Model.ssdl|res://*/Models.Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=FERNANDO-PC\SQLSERVER;initial catalog=Test2;persist security info=True;user id=****;password=****;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

然后我意识到我需要 2 个连接字符串，因为元数据部分出现了一些错误，并且提供程序名称将其更改为“System.Data.SqlClient”，所以新的连接字符串确实是第一个，但有以下变化：

```
<add name="Test2_Entities2" connectionString="data source=FERNANDO-PC\SQLSERVER;initial catalog=Test2;persist security info=True;user id=****;password=****;MultipleActiveResultSets=True;App=EntityFramework" providerName="System.Data.SqlClient" /> 
```

为了在我的数据库中创建用户表，我还更改了*Filters文件夹中**InitializeSingleMemebershipAttribute.cs*文件中的一行（准确地说是第 41 行）：

 *```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

至：

```
WebSecurity.InitializeDatabaseConnection("Test2_Entities2", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

以及位于*Models文件夹中的**AccountModels.cs*中的其他行：

 *```
public UsersContext() : base("DefaultConnection") 
```

至：

```
public UsersContext() : base("Test2_Entities") 
```

控制成员资格、角色、OAuth 和这些东西的默认表是在我想要的数据库中创建的。（这是问题的背景，并认为有些人会觉得它有帮助）

问题是在我的 SQL 数据库中创建表时，有些列不在我在*AccountModels.cs*中定义的数据类型中，并且没有创建其他字段。更具体地说，在*AccountModels.cs*我有这个类：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public Guid UserId { get; set; }
    public string UserName { get; set; }
    public string RandomString { get; set; }
} 
```

在创建的表中，*UserID*得到一个 int，当我尝试更改时，我得到一个错误：

> 连接的数据库服务器不支持从“int”转换为“uniqueidentifier”。

而且，*RandomString*字符串不会出现在*UserProfiles*表中。

这个问题的答案： [“我如何使用 SingleMembership 管理配置文件”stackoverflow 问题](https://stackoverflow.com/questions/12352218/how-do-i-manage-profiles-using-simplemembership) 真的很有帮助，但我不能像答案建议的那样更改字段和数据类型。

有什么我想念的吗？或者在做这些改变之前我应该​​设置什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:41:46.953

您不能更改 UserId 类型，因为它被用作同样在此数据库中生成的其他表的外键。如果您成功让它更改数据库中的此列，您将收到以下错误：

```
UserProfile.UserId' is not the same data type as referencing column 'webpages_UsersInRoles.UserId' in foreign key 'fk_UserId' 
```

当我尝试这样做时，创建了一些表，并且您可以看到其他表使用 UserId 链接到 UserProfile 表。

![在此处输入图像描述](../Images/ef6031d5d7598ceb885027c0a4c9103a.png)

但正如您从这个快照中看到的那样，我能够添加名为 RandomString 的自定义列。我对您无法更改 UserProfile 对象并将其反映在表中的评论感到困惑。我在这个网站上看到了很多关于这个问题的投诉，所以我试着修改一下，看看我是否可以重现这个问题。当我使用此示例时，我能够将 UserId 更改回 int 以便它可以工作，甚至可以添加另一个属性/列。正如您在此快照中看到的那样，它也有效。

![在此处输入图像描述](../Images/56e382e221bbb720b5c8e02baa1de258.png)

但是后来我打开了一个具有自定义 UserProfile 的旧项目并尝试对其进行修改，但它不会反映数据库中的更改。它被我使用的最后一个模型（与 MVC 4 模板生成的模型不同的自定义模型）卡住了，即使我删除了数据库或修改了数据库名称也不会改变。此 MVC 4 模板使用 EF 5，我认为这与该版本中数据库迁移的处理方式以及 InitializeSimpleMembershipAttribute 创建数据库的非常规方式有关，如以下代码片段所示：

```
// Create the SimpleMembership database without Entity Framework migration schema
((IObjectContextAdapter)context).ObjectContext.CreateDatabase(); 
```

长话短说，我已经看到这些 MVC 4 项目进入这种状态，对 UserProfile 的更改将不起作用，我还没有找到解决问题的方法。如果我找到解决方案，我会更新这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T17:57:51.490

只需从您的代码中删除 GUID 部分（让默认的 UserID 保持主键），它就会起作用。Kevin Junghans 解释了原因。

运行您的 MvcApplication 现在应该对表结构进行必要的更改。

如果没有：您必须进行迁移。 *或者* 您可以从数据库中删除 UserProfile （和其他网页_ * 表），然后运行应用程序

[这](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-new-field-to-the-movie-model-and-table)可能会帮助您完成迁移过程**

# iphone - 在 iPhone 上保存 JSON 数据

> ID：14263896
> 
> 赞同：0
> 
> 时间：2013-01-10T17:35:58.983
> 
> 标签：iphone, mysql, objective-c, json, uitableview

我正在尝试找到从 JSON 获得的保存数据的最佳方式。托管数据的网站是：[“JSON 数据”](http://www.ah.nl/albertheijn/winkelinformatie/winkels "JSON数据")。

由于我将在无法连接到 Internet 的地方使用这些数据，因此我想将这些数据保存在 iPhone 本身上，并且能够在我有 Internet 连接时进行更新。

我想在表格视图中显示这些数据，并且我需要能够过滤/搜索这些数据。此搜索将在 City 或商店 ID（数据中的“no:”）上进行。单击该行将显示商店的详细视图。

我正在考虑将数据存储在 SQL 表中。但是，我不确定更新数据的最佳方式，而且我不知道如何过滤两个不同列（City/ID）上的数据？

另外，如果您知道更好的方法，我很想听听！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:46:30.600

您的数据似乎是一个地址表，每个地址都有某种“详细”记录。这是一个经典的主/从数据库。通常你会有一个表，每个地址都有一条记录，并为每个地址分配某种唯一的 ID。然后有一个由唯一 ID 键入的第二个表以包含所有详细记录。

# ios - 将数字转换为希伯来日期中的字符

> ID：14263900
> 
> 赞同：0
> 
> 时间：2013-01-10T17:36:01.820
> 
> 标签：ios, objective-c, nsdate

我用今天的日期（希伯来日期）建立标签

它的工作是数字而不是字符

例如：28/4 至 28 Tavat

代码：

```
NSLocale *hebrew = [[NSLocale alloc] initWithLocaleIdentifier:@"he_IL"]; // Hebrew, Israel
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSHebrewCalendar];
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
dateFormat.locale = hebrew;
dateFormat.calendar = calendar;
[dateFormat setDateStyle:NSDateFormatterShortStyle];
NSString *dateString = [dateFormat stringFromDate:today];
[_label setText:dateString];

NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterLongStyle];
[formatter setTimeStyle:NSDateFormatterNoStyle];

NSLog(@"hebrew: %@", [formatter stringFromDate:[NSDate date]]);
[formatter release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:45:26.207

您需要将样式更改为中或更高：

```
[dateFormat setDateStyle:NSDateFormatterMediumStyle]; 
```

如果您使用中等样式，则月份将被缩写，请切换到长样式 ( `NSDateFormatterLongStyle`) 以获得完整的月份名称。

# java - Java：从命令行运行的问题

> ID：14263907
> 
> 赞同：1
> 
> 时间：2013-01-10T17:36:24.037
> 
> 标签：java, compilation

我正在 Eclipse 中编写一个程序，并从命令行运行它。在该程序的早期版本中，它没有争论，我可以将它作为`> java foo`. 我已经添加了几个参数，并且需要将它作为`> java foo file1.txt file2.txt`. 当我运行它时，我得到一个`java.lang.NoClassDefFoundError:`错误。即使我包含类路径，即`> java foo file1.txt file2.txt -cp .`它仍然不起作用。

有人能指出我正确的方向吗？

**编辑** 这是完整的堆栈跟踪

```
Exception in thread "main" java.lang.NoClassDefFoundError: edu/cuny/pausePred/TemplateToCharTestVector (wrong name: edu/cuny/pausepred/TemplateToCharTestVector)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:480) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:48:49.837

```
Exception in thread "main" java.lang.NoClassDefFoundError: 
  edu/cuny/pausePred/TemplateToCharTestVector 
  (wrong name: edu/cuny/pausepred/TemplateToCharTestVector) 
```

java中的路径是区分大小写的。 `pausepred`不一样`pausePred`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:02:38.133

*   编写完整的目录路径然后编译所有类
*   编写完整目录并运行包含 main() 方法的类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:02:12.700

初学者使用 Java 的一个常见错误是误解类名和类路径。

类名是包含包的完全限定的东西；编译器允许您使用其基名称来引用一个类，这便于保持编程的理智。您的班级的实际名称是`<package>.foo`.

类路径必须包含您正在使用的任何包的根目录。因此，如果您的 foo 包是 foo`edu.cuny.pausePred`的类名，`edu.cuny.pausePred.foo`则类路径必须包含包含的目录`edu`，而不是包含的目录`foo`。

你的命令行应该是这样的：

```
jave -cp the-directory-root-for-java-sources foo file1.txt file2.txt 
```

请注意，这假定两个数据文件位于当前目录中。

顺便说一句，请注意类基名应该是大写的，所以`Foo`，不是`foo`。

# c# - 在可点击的图像按钮上导航

> ID：14263910
> 
> 赞同：0
> 
> 时间：2013-01-10T17:36:30.273
> 
> 标签：c#, .net, web-applications

我有一个 ImageButton1 和 ImageButton1_Click 事件。图片是可点击的，当我点击它时，事件就会启动......

这样做有效：

```
Response.Redirect("secondPage.aspx"); 
```

但是，我想加载它：

```
ImageButton1.NavigationUr = "some url"; 
```

我怎样才能有一个动态链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:03:07.250

尝试 ImageButton1.DescriptionUrl 属性。在运行时设置 url 并使用以下代码重定向。

```
protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{
    Response.Redirect(ImageButton1.DescriptionUrl);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:56:32.607

也许 HyperLink 控件适合：

```
<asp:HyperLink ID="whatever" runat="server" ImageUrl="/foo.png" NavigateUrl="some url" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:58:51.540

使用 firebug 查找在 imagebutton 上设置的确切 id 和属性（或设置 cssClass 以方便客户端访问），然后在需要时使用 javascript 或 jquery 设置导航属性。

# forms - 如何在单个页面中处理多个表单

> ID：14263914
> 
> 赞同：0
> 
> 时间：2013-01-10T17:36:36.327
> 
> 标签：forms, yii

我有一个模型（具有 2 个字段名称（pk）和文本的表）。我需要以这些形式显示数据并从页面更新它。我可以使用这个来显示表格

```
<?php echo $this->renderPartial('_form', array('model'=>$model)); ?> 
```

但是如何将表格中的内容显示到每个部分以及如何更新数据。

index.php 是这样的：

```
<p>some & Text</p>
    <p>
        <?php echo $this->renderPartial('_form', array('model'=>$model)); ?>
    </p>
    <p>Some more  Text</p>
    <p>
        <?php echo $this->renderPartial('_form', array('model'=>$model)); ?>
    </p>
    <p>Little More Text</p>
    <p>
        <?php echo $this->renderPartial('_form', array('model'=>$model)); ?>    
    </p> 
```

我的 _form.php 是这样的：

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'settings-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'name'); ?>
        <?php echo $form->textField($model,'name',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'name'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'text'); ?>
        <?php echo $form->textArea($model,'text',array('rows'=>6, 'cols'=>50)); ?>
        <?php echo $form->error($model,'text'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Submit' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

为了显示表格中的内容，我的 index.php 的 url 应该是什么。（目前我正在使用 localhost/webapp/controller.. 并且它以表单显示 3 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:36:26.277

你可以像这样实现它：

假设您的操作是“更新”并且您需要使用 更新记录`id = 1`，因此您可以将此 id 传递给更新操作，如`update?id=1`，或通过`post`方法，然后您可以在您的`update`操作中获取此 id，然后获取此 id 的数据：假设您已通过`post`..获得 id

`$results = Modelname::model()->findAllByAttributes(array('id'=>$_POST['id']))`

然后你可以在你的表单中传递这个结果，

`<?php echo $this->renderPartial('_form', array('model'=>$model, 'results' => $results)); ?>`

然后在您的`_form`: 您可以像这样更新表数据：

`<?php echo $form->textField($model,'mobile',array('value'=>$results['mobile'])) ; ?>`

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:06:59.753

[明白了.. 我已经使用收集表格输入解决了我的问题 我能够通过收集表格输入http://www.yiiframework.com/doc/guide/1.1/en/form](http://www.yiiframework.com/doc/guide/1.1/en/form.table)来实现我正在寻找的东西 。[桌子](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

谢谢大家:)

我的控制器：

```
public function actionBatchUpdate()
    {
            $item = new Model;

            $items=Model::model()->findAll();

            if(isset($_POST['Model']))
            {

                    $valid=true;
                    foreach($items as $i=>$item)
                    {
                            if(isset($_POST['Model'][$i]))

                            $item->attributes=$_POST['Model'][$i];
                            $valid=$item->validate() && $valid;
                            if($valid)$item->save();
                    }

            }

            // displays the view to collect tabular input
            $this->render('batchUpdate',array(
                            'items'=>$items));

    } 
```

我的视图文件：

我的视图文件 batchupdate.php 是：

```
<div class="form">
<?php echo CHtml::beginForm(); ?>
<table>

<?php foreach($items as $i=>$item): ?>
<tr style=" border-bottom: solid 1px black;">
<p><td><?php echo CHtml::activeTextField($item,"[$i]name",$htmlOptions=array('disabled'=>'disabled')); ?></td></p>
</tr>

<tr style=" border-bottom: solid 2px black;">
<p><td><?php echo CHtml::activeTextArea($item,"[$i]text",$htmlOptions=array ('rows'=>8,'cols'=>60));?></td></p></tr> 

 <tr style=" border-bottom: solid 1px black;">
<p><td><?php echo CHtml::submitButton('Save');?></td></p></tr>
<tr>
<td><hr size="10" width="100%" /></td>
</tr>

<?php endforeach; ?>
</table>

<?php echo CHtml::endForm(); ?>
</div><!-- form --> 
```

# sql - 还原后连接到 SQL Server 数据库

> ID：14263915
> 
> 赞同：3
> 
> 时间：2013-01-10T17:36:36.330
> 
> 标签：sql, sql-server, database, asp-classic, ado

我被要求维护一个在 ASP 经典中创建的站点，该站点使用 SQL Server 数据库。

我以备份的形式获得了数据库。我在本地计算机上恢复了数据库并为其创建了一个`DSN connection`。但是，当我尝试加载我的站点时，`stored procedures`该站点依赖于给出执行权限被拒绝的错误。

有问题的存储过程有一个名为的用户`UserSecure`显示为唯一具有`EXECUTE`权限的人，我尝试使用该名称创建用户但不起作用，即使我可以使用`UserSecure`尝试从 Web 连接手动登录到 SQL Server Management Studio使用这些凭据的页面会给出一个`login failed error`.

如果我运行`sp_helplogins`我的 Windows 凭据，则会显示为数据库的所有者，实际上我可以从 SSMS 内部执行，但不能从 ADO 连接执行。

另一方面，连接中的`webpage`编码是这样的，我不熟悉连接的应用程序部分。也许这是问题的一部分？我尝试使用`DSN`and`DSN-less`连接进行连接，并且可以连接但不能对数据库执行任何操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:41:06.880

您应该确保将数据库服务器登录名映射到适当的数据库用户（在处理数据库备份时经常会出现这个问题）。如果不是，那么您需要修复映射。幸运的是，有一个命令`sp_change_users_login`可以用来解决这个问题。

首先，检查您的登录名是否映射到您的数据库用户。使用 SQL Server Management Studio（假设 SQL Server 2008），在安全/登录下查找`UserSecure`. 如果您在列表中看到它，请双击它并选择`User Mapping`。从那里，找到您尝试连接的数据库，并查看是否`UserSecure`映射到该数据库。如果不是，您可以使用以下命令修复它（假设`UserSecure`是登录名**和**用户名）：

```
EXEC sp_change_users_login AUTO_FIX, UserSecure 
```

有关更多信息，请参阅 MSDN ：http `sp_change_users_login`:
[//msdn.microsoft.com/en-us/library/ms174378.aspx](http://msdn.microsoft.com/en-us/library/ms174378.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:26:35.557

一个问题困扰了我好几次：

如果您的存储过程（或视图）需要用户的许可（`userA`比如说授予选择/执行/等的权限。on （这又需要用户在的数据库上）`viewB``viewB``userA``viewB``viewB`

因此，在您的情况下，您可能需要显式授予`UserSecure`对您恢复的数据库引用的现有数据库上的存储过程的执行权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T14:49:32.973

这可能不是最优雅的修复，但我不再专注于一个过程，而是授予来宾用户对整个数据库的执行权限。由于这仅在我的个人计算机上运行，​​因此安全性不是问题，并且似乎已经解决了问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T08:19:53.837

问题太清楚了，

用户（名称）的 ID 将不同于备份的数据库和恢复的数据库。MSSQL 存储用户的 ID 而不是用户名（文本），因此每台机器和备份的 ID 将不同（99% 的时间）。因此，当 ID 不匹配时，您无权访问。

您需要做的就是删除用户并重新创建它，确保在两个地方都这样做：

首先从数据库中删除用户：

数据库 -> 安全 -> 用户 -> 右键单击​​（用户名）+ 删除

然后转到

安全->登录->右键单击（用户名）+删除

然后重新创建用户并为帐户提供正确的权限，一切都很好。

# javascript - 正则表达式在 C# 中工作，但不在 javascript 中

> ID：14263917
> 
> 赞同：0
> 
> 时间：2013-01-10T17:36:39.823
> 
> 标签：javascript, regex

任何人都可以帮助获得一段在 javascript 中工作的正则表达式吗？

这是正则表达式：

```
storify.com\/*(?<code>[^"]*) 
```

它在 C# 中运行良好，但我无法在 js 中运行，我推测是由于分隔符问题，但不确定是哪些字符导致了问题。

这是我正在尝试的 js，但在第一行给了我一个“无效的限定符”错误

```
var myregex = /storify.com\/*(?<code>[^"]*)/;
var storify = 'http://storify.com/DigitalFirst/ces-2013-five-things-you-missed-day-3';
var remoteid = storify.match(myregex);
console.log(remoteid); 
```

提前感谢任何可以帮助完成这项工作的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:38:23.773

JavaScript 正则表达式不支持命名捕获`(?<xxx>...)`，这就是原因。

更多细节[在这里](http://www.regular-expressions.info/refflavors.html)（注意：JavaScript 被称为 ECMA [262，准确地说]）。

# c++ - 使用 QT 窗口作为 C++ 单元测试的一部分

> ID：14263919
> 
> 赞同：0
> 
> 时间：2013-01-10T17:36:44.407
> 
> 标签：c++, qt, unit-testing, winapi, user-interface

我有一些代码使用 WinAPI 从它的句柄中使用`GetWindowTextW`和获取窗口的标题和类名`GetClassNameW`。我想为此代码创建一个单元测试，使用 Qt 创建一个临时窗口，针对它运行我的代码，然后关闭窗口。但是，我不确定如何以简单的方式进行此操作。例如，我可以按如下方式创建窗口：

```
#include "QtWidgets\qapplication.h"
#include "QtWidgets\qtextedit.h"
int argc = 1;
char* argv[1];
QApplication app(argc, &argv[0]);
QTextEdit textEdit;
textEdit.show();
app.exec(;)
// Rest of my unit test here 
```

然而，此时 QApplication 对象进入它的事件循环并控制我的单元测试，直到我关闭窗口。让我的单元测试继续在窗口上运行的最佳方法是什么？我应该为窗口创建一个单独的线程吗？作为一个单元测试，我想让它尽可能简单。

这个问题旨在独立于单元测试框架，但如果它很重要，我正在使用 UnitTest++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:02:06.057

您将无法创建单独的线程，因为所有 Qt gui 对象都必须在主线程中，您只能使用信号/插槽机制与来自其他线程的 gui 对象进行交互。

我认为最简单的方法是继承 QTextEdit，实现公共插槽 UnitTest()，并按如下方式修改您的测试：

```
#include "QtWidgets\qapplication.h"
#include "QtWidgets\qtextedit.h"
#include "MyTextEdit.h"
#include <QTimer>

int argc = 1;
char* argv[1];
QApplication app(argc, &argv[0]);
my_QTextEdit textEdit;
textEdit.show();
QTimer::singleShot(&my_QTextEdit,SLOT(UnitTest()),0);
app.exec(); 
```

在 QApplication 正确实例化并且事件循环正在运行之后，这为您提供了 my_QTextEdit::UnitTest() 的入口点。或者，您可以实现自己的从 QObject 继承的类，创建公共插槽，在运行 app.exec() 之前创建该对象（如果需要，将指针传递给它指向 QTextEdit）；并以相同的方式连接到插槽 - 更适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:10:21.953

在我的自动化 Qt 测试中，我通常跳过使用 QApplication::exec 来支持使用[QCoreApplication::hasPendingEvents](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#hasPendingEvents)和[QCoreApplication::processEvents](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents) - 这可以让你做一些准备工作，刷新事件队列（所以 Qt 有机会实际显示你的窗口），做更多的工作，让 Qt 处理这引发的任何额外事件，等等；当您想练习小块逻辑时，这是一种非常方便的方法，可以实现所需的细粒度控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T03:01:20.413

这样做的合理工作示例代码在这个相关问题的答案中：[Qt event loop and unit testing？](https://stackoverflow.com/questions/21606125/qt-event-loop-and-unit-testing/22951970#22951970)

# web-services - Web 服务性能：跨服务器与同一服务器

> ID：14263921
> 
> 赞同：-1
> 
> 时间：2013-01-10T17:36:56.020
> 
> 标签：web-services, drupal, hosting

我的客户在 Drupal 中有站点，我创建了 Web 服务来在移动站点上公开数据。我的问题：如果 Drupal 站点和移动站点在同一台服务器上 VS 在不同的服务器上，Web 服务性能有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:38:22.423

是的。如果它们在同一台服务器上，则速度会更快，因为请求不必进入互联网。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:39:57.890

是的。如果一个应用程序在服务器上，则服务器速度很快。其他服务器越来越慢。

# php - 剥离文本并替换 用 /n 用 php

> ID：14263922
> 
> 赞同：0
> 
> 时间：2013-01-10T17:37:03.943
> 
> 标签：php, javascript

我从另一个程序的输出是例如

```
<a href="blah@blah.com">blah@blah.com</a> 
```

和

```
abc</p>
<p>xyz</p>
<p>blah blah blah</p> 
```

如果出现，我仍然需要换行符`<p></p>`，并且我不想要电子邮件的 mailto 链接，因为我要将它们放在文本框中。使用php替换，我无法完成。

```
$afterClean = str_replace("<p>", "\n",$beforeClean); 
```

我做错了什么，以及剥离所有html代码的最简单方法是什么（我可以放弃尖箭头“<>”之间的所有内容，除了“p”，因为我需要用换行符替换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:40:48.573

看起来[`strip_tags`](http://php.net/strip-tags)会很好地做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:27:56.333

您可以使用

`$afterhtmlclean = strip_tags($beforeClean, '<p>')`;

它将删除除 from 之外的所有 html `<p>`。

现在你可以使用

`preg_replace(array('/(<p>)/','(<\/p>)'), array('','\n'), $afterhtmlclean )`;

它将删除您的`<p>`带有 null 的标签，并在您的文本之后添加 \n 以在您的文本字段中添加新行

# h2 - H2 数据库触发器

> ID：14263928
> 
> 赞同：1
> 
> 时间：2013-01-10T17:37:39.433
> 
> 标签：h2

通常，当您使用 H2 数据库时，您必须创建自定义类并实现方法“fire”来编写触发器。

对于我的项目，我使用批量插入。我需要使用触发器对要插入的表进行一种复杂的数据完整性检查，而使用 CHECK 则无法做到这一点。所以我必须在触发方法中做一个select语句来进行检查。

由于可能有很多插入，我想避免每个触发器选择语句的许多服务器往返（这就是我使用批处理插入的原因）。如果我在那里做出选择语句，H2 数据库是否每次都从“fire”方法向 DB 发送请求，或者这种触发方法是否以某种方式集成到数据库引擎本身中？

谢谢， 卢博斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:51:41.130

触发器在服务器端执行，因此在执行触发器时没有服务器往返。

# ruby-on-rails-3 - 控制器看不到 def new/create for rails 3.2.8 引擎

> ID：14263929
> 
> 赞同：0
> 
> 时间：2013-01-10T17:37:40.460
> 
> 标签：ruby-on-rails-3, rails-engines

我们正在 spec/dummy 下测试 customerx 引擎。引擎customerx的索引页可以正常显示。链接在这里：

```
<li><%= link_to 'Customers', customerx.customer_status_categories_path %></li> 
```

但是`uninitialized constant CustomerStatusCategoriesController`，新客户链接出现路由错误，如下所示：

```
<li><%= link_to 'New Customer', customerx.new_customer_status_category_path %></li> 
```

确实显示了正确的`rake routes`新客户路线：

```
Routes for Customerx::Engine:
 customer_status_categories_index GET  /customer_status_categories/index(.:format)    customer_status_categories#index
   customer_status_categories_new GET  /customer_status_categories/new(.:format)      customer_status_categories#new
customer_status_categories_create GET  /customer_status_categories/create(.:format)   customer_status_categories#create
  customer_status_categories_edit GET  /customer_status_categories/edit(.:format)     customer_status_categories#edit
customer_status_categories_update GET  /customer_status_categories/update(.:format)   customer_status_categories#update
       customer_status_categories GET  /customer_status_categories(.:format)          customerx/customer_status_categories#index
                                  POST /customer_status_categories(.:format)          customerx/customer_status_categories#create
     new_customer_status_category GET  /customer_status_categories/new(.:format)      customerx/customer_status_categories#new
    edit_customer_status_category GET  /customer_status_categories/:id/edit(.:format) customerx/customer_status_categories#edit
         customer_status_category PUT  /customer_status_categories/:id(.:format)      customerx/customer_status_categories#update 
```

在引擎 customerx 的 routes.rb 中，资源声明为：

```
 resources :customer_status_categories, :only => [:index, :new, :create, :edit, :update] 
```

编辑/索引没有路由错误。新/创建所有通行证的 rspec 案例。问题似乎是没有找到new的动作（删除new和create的def后错误是一样的）。

导致错误的代码可能有什么问题？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:23:19.887

`get "customer_status_categories/new"`该问题已通过在 routes.rb 中为引擎 customerx注释掉来解决：

```
Customerx::Engine.routes.draw do
  get "customer_status_categories/index"

  #get "customer_status_categories/new"

  get "customer_status_categories/create"

  get "customer_status_categories/edit"

  get "customer_status_categories/update"

  resources :customer_status_categories

  root :to => 'customer_status_categories#index'

end 
```

在创建新控制器时，自动`get ...new`插入了 routes.rb 。`rails generate`我们不知道为什么这条线会导致`uninitialized constant`错误（但不是其他的，例如索引和编辑）。有人可以阐明问题的原因吗？

# php - jQuery 远程验证总是返回 false

> ID：14263934
> 
> 赞同：0
> 
> 时间：2013-01-10T17:37:47.903
> 
> 标签：php, jquery, jquery-mobile, jquery-validate

我有以下代码用于在我的网站上实现一个非常基本的登录系统（使用 jQuery Mobile）。问题是，当通过 jQuery Mobile 提交表单时（因此使用验证器），验证器总是返回 false 并引发错误，即使密码正确也是如此。当我编写了一个单独的表单，除了两个文本框和一个提交按钮之外什么都没有，并将其直接运行到验证脚本，它根据给定的密码返回正确的值 true 或 false。导致它始终返回 false 的 jQuery 脚本有什么问题？

HTML/JS：

```
<form action="logins.php" method="POST" id="loginForm" name="loginForm" data-ajax="false">
<label for="email" class="ui-hidden-accessible">Email Address:</label>
<input type="text" id="email" name="email" value="" placeholder="Email Address" />
<label for="pass" class="ui-hidden-accessible">Password:</label>
<input type="password" id="pass" name="pass" value="" placeholder="Password" />
<input class="submit" data-role="submit" type="submit" value="Submit" />
</form><br>
<br>
<a href="#index" data-role="button" data-transition="slide" data-direction="reverse">Return to home page</a>
<script>
    $('#login').bind('pageinit', function(event) {
        $('#loginForm').validate({
            onkeyup: false,
            onclick: false,
            onfocusout: false,
            rules: {
                email: {
                    required: true,
                    email: true
                },
                pass: {
                    required: true,
                    remote: {
                        url: "passcheck.php",
                        type: "post"
                    }
                }
            },
            messages: {
                email: {
                    required: "You must enter an email address.",
                    email: "You must enter a valid email address."
                },
                pass: {
                    required: "You must enter a password.",
                    remote: "Your username/password combination is incorrect."
                }
            }
        });
    });
</script> 
```

PHP (passcheck.php):

```
<?php
    require("common.php");

$query = "SELECT password FROM users WHERE email = :email";
$query_params = array(':email' => $_POST['email']);

try { 
    $stmt = $conn->prepare($query); 
    $stmt->execute($query_params);
} catch(PDOException $ex) { 
    die("Failed to run query."); 
}

$hash = $stmt->fetchColumn();

if(crypt($_POST['pass'], $hash) === $hash){
    echo "true";
} else {
    echo "false";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:22:32.203

您应该使用 submitHandler 编写一个函数来处理通过 AJAX 使用 AJAX 表单对用户名/密码的实际检查：http: [//www.malsup.com/jquery/form/#api](http://www.malsup.com/jquery/form/#api)。您不必使用 AJAX 表单，并且可以编写自己的方法来使用 jQuery ajax() 方法处理登录检查，但 AJAX 表单已经为您预先编写好了它。

此外，您不需要那里的 onkeyup、onblur 等 - 您只需要将 onsubmit 设置为 true。您的代码应如下所示：

```
<script>
    $('#login').bind('pageinit', function(event) {
        $('#loginForm').ajaxForm(); // Set as an AJAX Form - See Documentation Above
        $('#loginForm').validate({
            onsubmit: true,
            rules: {
                email: {
                    required: true,
                    email: true
                },
                pass: {
                    required: true
                }
            },
            messages: {
                email: {
                    required: "You must enter an email address.",
                    email: "You must enter a valid email address."
                },
                pass: {
                    required: "You must enter a password.",
                }
            },
            submitHandler: function(form) {
                $("#loginForm").ajaxSubmit();
            }
        });
    });
</script> 
```

# windows - 在登录到 windows 之前启动 windows 窗体应用程序

> ID：14263943
> 
> 赞同：1
> 
> 时间：2013-01-10T17:38:26.127
> 
> 标签：windows, winforms, winlogon

如何在登录 Windows 之前启动 Windows 窗体应用程序？是否可以在登录 Windows 之前启动 Windows 窗体应用程序？如果不是，我是否有机会在登录前启动 Windows 服务并从登录前已启动的服务调用 Windows 窗体应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:55:07.927

**非常**基本，但应该给你要点。您还需要`ServiceProcessInstaller`为它创建一个（以及调用`installutil`）。

```
public class WinFormHostService : System.ServiceProcess.ServiceBase
{
  [STAThread]
  public static void Main()
  {
    System.ServiceProcess.ServiceBase.Run(new WinFormHostService());
  }

  protected Process winFormsProcess;

  public WinFormHostService()
  {
    this.ServiceName = "WinForm Host Service";
    this.AutoLog = true;
  }

  protected override void OnStart(String[] args)
  {
    this.winFormsProcess = new Process();
    try
    {
      this.winFormsProcess.UseShellExecute = false;
      this.winFormsProcess.FileName = @"C:\Program Files\MyApp\MyApp.exe";
      this.winFormsProcess.CreateNoWindow = true;
      this.winFormsProcess.Start();
    }
    catch (Exception ex)
    {
      // unable to start process
    }
  }
} 
```

这基本上就像从 Windows 服务托管 WCF 服务，因此如果您需要更多详细信息，请查看“WCF Windows 服务主机”（或类似名称）并查看[它是如何完成的](http://msdn.microsoft.com/en-us/library/ms733069.aspx)。同样的前提，您只是使用 a`Process`代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:04:08.257

根据对您要运行标准桌面应用程序的问题的评论，该应用程序使用 WinForms 构建，而不是在用户登录之前启动的服务。

这是不可能的。你需要的是服务。

# javascript - Chrome 应用程序 onSubmit

> ID：14263946
> 
> 赞同：0
> 
> 时间：2013-01-10T17:38:33.380
> 
> 标签：javascript, google-chrome-extension

我有一个非常简单的 Chrome 应用程序。它显示一个带有搜索框的弹出窗口。提交搜索框会在新选项卡中打开我的网站。

搜索框默认为空。当它为空时，单击提交不应该做任何事情。我的 popup.html 看起来像这样：

```
<html>
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
   <title>foo</title>   
   <link rel="stylesheet" type="text/css" href="popup.css" />
  </head> 
<body>
    <div id="srch">
    <form target="_blank" action="foo.php" method="get" onsubmit="if (document.getElementById('box').value.length < 1) return false;">
        <input type="text" id="box" name="foo" value="" />
        <input type="submit" value="foo" />
    </form>
    </div>
</body>
</html> 
```

如果我在浏览器中打开 popup.html，然后单击提交什么也不做。但是，如果我将其作为 Chrome 应用程序打开，则单击提交仍会提交表单，其中没有任何内容。所以似乎 JavaScript 被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:39:11.733

**脚本中的问题**

Chrome 扩展不允许内联 JS 或`<script>`HTML 代码中的标签，因此您的代码`onsubmit="if` 不会超过 CSP，在消除这些后我让您的脚本运行。

# 您的代码的示例演示

**清单.json**

将浏览器操作注册到清单文件。

```
{
    "name": "chrome-app-onsubmit",
    "description": "http://stackoverflow.com/questions/14263946/chrome-app-onsubmit",
    "version": "1",
    "manifest_version": 2,
    "browser_action": {
        "default_popup": "popup.html"
    }
} 
```

**popup.html**

消除内联脚本

```
<html>
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
   <title>foo</title>  
   <script src="popup.js"></script>
  </head> 
<body>
    <div id="srch">
       <input type="text" id="box" name="foo" value="" />
        <input type ="submit" id="submit" value="foo" />
    </div>
</body>
</html> 
```

**popup.js**

你的功能在这里。

```
function _clickHandler() {
    if (document.getElementById('box').value.length < 1) {
        return false;
    } else {
        console.log("In Success Handler..");
        //Do Your AJAX Request Call here
    }
}
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("submit").onclick = _clickHandler;
}); 
```

检查[如何加载扩展](https://developer.chrome.com/extensions/getstarted.html)以测试您的脚本。

# 参考

*   [内容安全政策](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:51:45.460

试试这个...不同的浏览器可能对 javascript 格式很挑剔...只是一个想法

```
onsubmit="if (document.getElementById('box').value.length < 1) {return false;};"> 
```

# javascript - 如果 jQueryUI 自动完成搜索框中有搜索词，则重新打开焦点

> ID：14263949
> 
> 赞同：2
> 
> 时间：2013-01-10T17:38:40.357
> 
> 标签：javascript, jquery-ui, autocomplete, jquery-ui-autocomplete

如果我在框中键入搜索，则会出现自动完成菜单，并且当它失去焦点时，它会按预期消失。搜索词留在框中，但当它重新获得焦点时，自动完成菜单不会重新出现。

如果搜索框中当前有搜索词，如何使自动完成菜单重新出现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:47:28.577

[`search`](http://api.jqueryui.com/autocomplete/#method-search)发生时使用输入的当前值再次执行搜索（使用自动完成方法） `focus`：

```
$("input").autocomplete({
    /* options... */
}).focus(function () {
    $(this).autocomplete("search", this.value);
}); 
```

**示例：http:** [//jsfiddle.net/J5rVP/31/](http://jsfiddle.net/J5rVP/31/)

# java - 使用 AES-CBC-PKCS5Padding 解密数据时出现填充错误

> ID：14263950
> 
> 赞同：0
> 
> 时间：2013-01-10T17:38:47.090
> 
> 标签：java, encryption, aes, jce

我编写了如下两个函数来加密和解密数据。

```
public static void encrypt() throws Exception {
    // Add the BouncyCastle Provider
    //Security.addProvider(new BouncyCastleProvider());

// Generate the key
byte[] keyBytes = "AAAAAAAAAAAAAAAA".getBytes();
SecretKeySpec   key = new SecretKeySpec(keyBytes, "AES");

// Generate the IV
byte[] ivBytes  = "AAAAAAAAAAAAAAAA".getBytes();
IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);

// Create the cipher object and initialize it
Cipher          cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);

// Read all bytes from a file into a bytes array
byte[] inputBytes = GCM.readFile("input");
byte[] cipherBytes = cipher.doFinal(inputBytes);

BufferedOutputStream  outputStream = new BufferedOutputStream(new FileOutputStream("output.enc"));
outputStream.write(cipherBytes);

outputStream.close();   
}

public static void decrypt() throws Exception {
    // Add the BouncyCastle Provider
     //Security.addProvider(new BouncyCastleProvider());

 // Generate the key
 byte[] keyBytes = "AAAAAAAAAAAAAAAA".getBytes();
 SecretKeySpec   key = new SecretKeySpec(keyBytes, "AES");

 // Generate the IV
 byte[] ivBytes  = "AAAAAAAAAAAAAAAA".getBytes();
 IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);

 // Create the cipher object and initialize it
 Cipher          cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
 cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);

 // Read all bytes from a file into a bytes array
 byte[] cipherBytes = GCM.readFile("ouput.enc");
 byte[] decBytes = cipher.doFinal(cipherBytes);

 BufferedOutputStream  outputStream = new BufferedOutputStream(new FileOutputStream("regen.plain"));
 outputStream.write(decBytes);
 outputStream.close();   
} 
```

我意识到代码的键设置为`"AAAAAAAAAAAAAAAA".getBytes()`；但是请耐心等待，因为这只是一个例子。

当我运行程序时，我得到以下堆栈跟踪：-

```
Exception in thread "main" javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.AESCipher.engineDoFinal(DashoA13*..)
    at javax.crypto.Cipher.doFinal(DashoA13*..)
    at GCM.decrypt(GCM.java:80)
    at GCM.main(GCM.java:90) 
```

我无法弄清楚为什么会遇到此错误。关于如何解决问题的任何提示？

[编辑] 似乎当我写出数据时总共有 16 个字节，但当我读回数据时只有 15 个字节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:14:03.320

您写入`output.enc`但从中读取的可能问题（除非是拼写错误） `ouput.enc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T08:03:33.010

在您的更新中：嗯，这很容易，修复读取文件的部分，因为密文需要是 N * 块大小，因此是 16 个字节。我没有看到任何其他明显的错误。

# ios - 无法创建 ReaderDocument Vfr-Reader

> ID：14263953
> 
> 赞同：0
> 
> 时间：2013-01-10T17:38:55.580
> 
> 标签：ios, pdf

我搜索了很多，但无法从文档文件夹中使用 vfr-reader 打开 PDF。

```
NSString *filePath = @"/Users/***/Library/Application Support/iPhone Simulator/5.0/Applications/F2B7E9DE-9996-4F05-BC81-2A2889B4F504/Documents/Number1.pdf";
ReaderDocument *document = [ReaderDocument withDocumentFilePath:filePath password:password];

if (document != nil)
{// document comes nil here

    ReaderViewController *readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
    readerViewController.delegate = self; // Set the ReaderViewController delegate to self
    [self.navigationController pushViewController:readerViewController animated:YES];

} 
```

我确信文件路径与 pdf 文件完全相同。

在阅读器的示例代码中，它从主包中打开 pdf。但我需要从资源文件夹中打开。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:02:06.990

我面临同样的问题，可能你也有同样的问题。

如果您不使用 ARC，则只需将**-fobjc-arc**写入构建面中的每个 pdf 阅读器文件。这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:32:30.727

你应该像下面的代码一样给出文件名，不要直接给出

```
NSArray *pathss = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsPaths = [pathss objectAtIndex:0];
    NSString *filePaths = [documentsPaths stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",fileName]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T05:23:43.067

我知道这是一篇旧帖子，但我遇到了与@user1392687 类似的问题，并想分享我是如何解决这个问题的（我从各种目录加载文件，而不仅仅是 Documents 文件夹）。

问题：从目录中加载一系列 PDF 文件，用文件名和支持的元数据填充表格视图，然后在选择单元格后，使用 VFR Reader 打开 PDF 文件。

解决方案：X-Code 中的文件夹是一个文件夹引用，用于启用内容更新，而无需执行组引用的删除/添加循环。下面的函数用于读取特定文件夹路径的所有内容 - URL，然后删除返回的文件路径中包含的所有/任何 simlink。在将 URL 传递到 VRF 以加载 PDF 文件之前，[url 路径] 用于 RFC 1808（未转义）路径。

```
+ (NSArray *)enumerateContentsOfFolderWithPath:(NSURL *)aFolderPath
{
    NSError *error = nil;
    NSArray *contentProperties = @[NSURLIsDirectoryKey,
                                   NSURLIsReadableKey,
                                   NSURLCreationDateKey,
                                   NSURLContentAccessDateKey,
                                   NSURLContentModificationDateKey];

    NSArray *contents = [[NSFileManager defaultManager] contentsOfDirectoryAtURL:aFolderPath
                                   includingPropertiesForKeys:contentProperties
                                                      options:NSDirectoryEnumerationSkipsHiddenFiles
                                                        error:&error];
    if (error != nil)
        DLog(@"Content enumeration error: %@", error);

    NSMutableArray *pdfURLs = [NSMutableArray array];

    for (NSURL *item in contents)
    {
        NSURL *fileURL = [NSURL fileURLWithPath: [item path]];
        NSURL *noSimlink = [fileURL URLByResolvingSymlinksInPath];
        [pdfURLs addObject: noSimlink];
    }
    return pdfURLs;
} 
```

在使用文件夹的内容和所有支持的元数据填充表格视图后，当用户触摸一行以查看 PDF 文件时，VRF 阅读器的设置如下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Other setup code...

    NSURL *item = [pdfURLs objectAtIndex:(NSUInteger) indexPath.row];
    [self presentPdfViewerForItem: item];
}

- (void)presentPdfViewerForItem:(NSURL *)aItem
{
    NSString *phrase = nil; // Document password (for unlocking most encrypted PDF files)
    NSString *filePath = [aItem path];
    ReaderDocument *document = [ReaderDocument withDocumentFilePath: filePath password:phrase];

    if (document != nil) // Must have a valid ReaderDocument object in order to proceed
    {
        ReaderViewController *readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
        readerViewController.delegate = self;
        readerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        readerViewController.modalPresentationStyle = UIModalPresentationFullScreen;
        [self presentViewController:readerViewController animated:YES completion:nil];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T10:25:28.967

您应该使用`[[NSBundle mainBundle] bundlePath]`and`stringByAppendingPathComponent:`而不是对字符串进行硬编码。这非常可怕，并且只能在 iOS 模拟器上运行。

# javascript - 如果再次调用，函数中的 mouseEvent 会触发两次？

> ID：14263954
> 
> 赞同：0
> 
> 时间：2013-01-10T17:39:03.863
> 
> 标签：javascript, jquery, function, unbind

问题是我只想在触发 mouseevent 函数时触发一次，例如

```
 $(document).ready(function() {
     $("#menu").click(function(){
         $('#menu_div').show();
         menu_function();
     });

     $("#menu_close").click(function(){
         $('#menu_div').hide();
     });
 });

function menu_function(){
    $(".select_li").live(
        "click",
        function() {
            alert("test");
        }
    );
} 
```

该示例有两个对象，menu 和 menu close；按下菜单时，会显示 ui 框，然后运行 ​​menu_function ，它会触发警报测试消息。问题是单击 menu_close 并关闭框，然后再次打开它时，警报测试将触发两次。我观察到div box关闭和再次打开的次数与函数的触发次数相同，我该如何解决？

如果我不想使用 unbind，有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T17:44:47.437

您的 menu_function() 不仅仅是触发警报测试消息 - 它正在向 DOM 中具有触发测试警报的“select_li”类的所有内容添加实时点击侦听器。这意味着每次单击#menu 时，都会将另一个侦听器添加到.select_li - 因此，如果单击#menu 10x，则每次单击.select_li 应该有10 个侦听器。

如果您真的想在单击#menu 时显示警报，那么您的 menu_function() 应该看起来像这样：

```
function menu_function() {
    alert("test");
} 
```

# c++ - DropDownList 控件右键事件

> ID：14263955
> 
> 赞同：0
> 
> 时间：2013-01-10T17:39:07.733
> 
> 标签：c++, visual-studio-2010, events, mfc, mouseevent

我的 MFC 对话框中有一个下拉列表控件。

![在此处输入图像描述](../Images/1399bc7b26f2eaa0e8584f0e03620106.png)

它将是一个包含几乎所有 Windows 消息的列表。这么多，用户会发现它们更难。所以我希望当用户右键单击下拉菜单时，应该打开一个窗口以提供一些搜索元素。

我不确切知道如何进行右键单击事件。

这是我的 .rc 文件代码：

```
 COMBOBOX        IDC_WM,98,7,152,30,CBS_DROPDOWNLIST | CBS_AUTOHSCROLL | CBS_SORT | WS_VSCROLL | WS_TABSTOP 
```

我尝试在 Visual Studio 中使用“创建事件处理程序”选项，但没有找到右键单击事件。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:29:27.997

在作为组合框父级的对话框中覆盖 PreTranslateMessage。

添加以下代码：

```
BOOL CMyDlg::PreTranslateMessage(MSG* pMsg) 
{
  if(pMsg->message == WM_RBUTTONUP)
  {
    if(pMsg->hwnd == m_myCombobox.GetSafeHwnd())
    {
      // do advanced search here

      return TRUE;
    }
  }
  return CDialog::PreTranslateMessage(pMsg);
} 
```

# javascript - 循环中的 setTimeout 并传递变量以供以后使用

> ID：14263958
> 
> 赞同：0
> 
> 时间：2013-01-10T17:39:11.697
> 
> 标签：javascript

考虑以下代码：

```
function func() {
    var totalWidths = 0;
    for( var i = 0, count = arr.length; i < count; i++ ) {
        var image = arr[i];

        insertElemInDOM(image);

        preloadImage(image,function(){
            var w = image.width();
            totalWidths += w;
        });

    }
    // do something with the variable "totalWidths"
    doSomething(totalWidths)
} 
```

我这里有两个问题。图像将始终相同（第一个问题），可以使用匿名函数解决：

```
 for(...) {
        (function(image) {
            preload(image,function() {
                // now image is the correct one
            });
        })(image);
    } 
```

但是如何管理 totalWidths 变量以便稍后在 doSomething(totalWidths) 上使用它？前面的代码将 totalWidths 的值为 0。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:44:36.063

您可以使整个循环和 超时`doSomething`，这比设置这么多超时性能要好得多：

```
setTimeout(function() {
    var inc = 0;
    for (var i = 0; i < count; i++) {
        var w = arr[i].width();
        inc++;
    }
    doSomething(inc);
}, 1000); 
```

* * *

但是，您实际上似乎想要的是嵌套超时，即为每个迭代步骤等待 1 秒并在所有完成后做某事：

```
var inc = 0, count;
function asyncLoop(i, callback) {
    if (i < count) {
        var w = arr[i].width();
        inc++;
        setTimeout(function() {
            asyncLoop(i+1, callback);
        }, 1000);
    } else {
        callback();
    }
}
asyncLoop(0, function() {
    doSomething(inc);
}); 
```

* * *

好的，现在我们知道您需要什么，解决方案是在每次加载事件后检查是否加载了所有图像：

```
var totalWidths = 0,
    count = arr.length,
    loaded = 0;
for (var i = 0; i < count; i++) 
    (function (image) {
        insertElemInDOM(image);
        preload(image, function() {
            totalWidths += image.width();
            // counter:
            loaded++;
            if (loaded == count-1) // the expected value
                doSomething(totalWidths); // call back
        });
    })(arr[i]); 
```

# android - 如何使用 JSOUP 从该表中选择链接？

> ID：14263959
> 
> 赞同：1
> 
> 时间：2013-01-10T17:39:11.973
> 
> 标签：android, parsing, hyperlink, html-table, jsoup

我有一张这样的桌子：

```
 <table class=firstclass>
   <tr>
      <td><a href....></a></td>
   </tr>
    <tr>
       <td><a href....></a></td>
    </tr>
    <tr>
      <td><a href....></a></td>
    </tr> 
```

我在这个页面中有其他表格，所以我想我必须使用类似的东西：

```
 doc.select("td.firstclass > a[href]"); 
```

但它不起作用。

我解决了这个问题：

```
 Element table = doc.select("table.firstclass").first(); //gets a table with the class                 "first class"
        Elements links = table.select("a[href]");
        for (Element link : links) {

            String textlink= link.text();
             String urllink= link.attr("abs:href");
            ));  

        }
// ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:49:02.030

使用“td.firstclass”意味着您的 TD 将具有“firstclass”类..这就是您得到 0 个结果的原因

你应该做类似的事情..

```
Document doc = ....; //however you get your document

Element table = doc.select("table.firstclass").first(); //gets a table with the class "first class"
Elements links = table.select("a[href]"); 
```

从那里您可以根据需要处理您的链接

# android - 在云上备份android db？

> ID：14263961
> 
> 赞同：1
> 
> 时间：2013-01-10T17:39:14.250
> 
> 标签：android, google-drive-api

可以将 android 应用程序的 sqlite db 保存到谷歌驱动器以进行备份/恢复而不是 sdcard 吗？

是否可以在每次更改/间隔时将 .db 文件保存/更新到云端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:21:47.473

正如评论所说，Google Drive 是这个用例的完美选择。就个人而言，我会备份到 SD 卡，然后将该备份与 Google Drive 同步。也许为用户提供何时进行同步的选项，因此它可能只发生在 WiFi 等上。

# php - Laravel 中的扩展调试

> ID：14263963
> 
> 赞同：2
> 
> 时间：2013-01-10T17:39:36.767
> 
> 标签：php, debugging, stack-trace, laravel

无论如何，让`Stack Trace:`调试信息更加扩展......我的主要意思是，没有修剪信息，因为我可能永远不知道什么时候需要它。

通过修剪文本，我的意思是如下信息：

```
pre>rtrim() expects parameter 1 to be string, array given</pre>
<h3>Location:</h3>
<pre>/home/tmcwntc/public_html/staging/laravel/bundle.php on line 190</pre>
  <h3>Stack Trace:</h3>
  <pre>#0 /home/tmcwntc/public_html/staging/laravel/laravel.php(42): Laravel\Error::native(2, 'rtrim() expects...', '/home/tmcwntc/p...', 190)
#1 [internal function]: Laravel\{closure}(2, 'rtrim() expects...', '/home/tmcwntc/p...', 190, Array)
#2 /home/tmcwntc/public_html/staging/laravel/bundle.php(190): rtrim(Array, '/')
#3 /home/tmcwntc/public_html/staging/laravel/routing/router.php(458): Laravel\Bundle::handles(Array)
#4 /home/tmcwntc/public_html/staging/laravel/routing/route.php(415): Laravel\Routing\Router::route('ADMIN.IMAGES@UP...', Array)
#5 /home/tmcwntc/public_html/staging/application/controllers/admin/news.php(70): Laravel\Routing\Route::forward('admin.images@up...', Array) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:15:31.917

堆栈跟踪来自文件*laravel/error.php*：

```
echo "
      <h3>Stack Trace:</h3>
      <pre>".$exception->getTraceAsString()."</pre></html>"; 
```

[这篇文章](https://stackoverflow.com/a/6076667/194508)有一个替代功能。

# c# - C# 泛型继承和协变第 2 部分

> ID：14263964
> 
> 赞同：-6
> 
> 时间：2013-01-10T17:39:38.513
> 
> 标签：c#, generics

这是我的原始线程： [C# 泛型继承和协变](https://stackoverflow.com/questions/14252872/c-sharp-generic-inheritance-and-covariance)

仅在我的只读接口上，我希望继承起作用。

```
public delegate Boolean EnumerateItemsDelegate<out ItemType>(ItemType item);

public interface IReadOnlyCollection<out ItemType>
{
    Boolean ContainsItem(ItemType item);
    Array CopyToArray();
    void EnumerateItems(EnumerateItemsDelegate<ItemType> enumerateDelegate);

    UInt32 Count { get; }
    UInt32 Capacity { get; }
} 
```

像这样，除了它编译的地方：-p

这就是我想要的工作：

```
IReadOnlyCollection<String> s;
IReadOnlyCollection<Object> o = s; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T18:07:08.820

这个问题似乎没有任何问题，所以我会编出几个问题来回答。

> 什么是协变转换？

假设我们有一些类型`Fruit`，`Apple`并且`Banana`有明显的关系；`Apple`是一种`Fruit`，以此类推。

协变转换是类型参数的可转换性意味着泛型类型的可转换性。如果`Apple`可转换为`Fruit`，并且`Bowl<Apple>`可转换为`Bowl<Fruit>`，则`Bowl<T>`在 T 中是协变的。

* * *

> 什么是逆变转换？

逆变转换是*反转*方向而不是*保留*方向的协变转换。If`Eater<Fruit>`可转换为`Eater<Apple>`then`Eater<T>`在 T 中是逆变的。

* * *

> 如何在其类型参数中将接口或委托标记为协变或逆变？

协变类型参数被标记`out`，逆变类型参数被标记`in`。

这是为了助记：协变接口通常具有类型参数出现在输出位置，而逆变接口通常具有类型参数出现在输入位置。

* * *

> `String`可转换为`Object`。我怎样才能使`IReadOnlyCollection<String>`转换为`IReadOnlyCollection<Object>`？

在`IReadOnlyCollection<T>`T 中进行协变。标记它`out`。

* * *

> 考虑以下代码：

```
delegate void Action<in T>(T t);
interface IFoo<in X>
{
  void M(Action<X> action);
} 
```

> 为什么编译器说这是无效的？

因为它无效。让我们看看为什么。

```
class Foo : IFoo<Fruit>
{
  public void M(Action<Fruit> action)
  {
     action(new Apple()); // An apple is a fruit.
  }
}
...
IFoo<Fruit> iff = new Foo();
IFoo<Banana> ifb = iff; // Contravariant!
ifb.M(banana => { banana.Peel(); }); 
```

遵循逻辑。该程序将苹果作为 的“this”传递`Banana.Peel()`，这显然是错误的。

编译器知道这可能会发生，因此不允许首先声明接口。

* * *

> 如果我有更多关于方差的问题，我该怎么办？

您应该首先阅读我关于该功能的设计和实现的文章。从底部开始；它们按时间倒序排列：

[http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)

如果您仍有问题，那么您应该在此处发布实际包含问题的问题，而不是让人们猜测问题的真正含义。

# ios - Xcode 4.5 在运行/调试时不会在模拟器或 mac 应用程序中启动 iOS 应用程序

> ID：14263965
> 
> 赞同：0
> 
> 时间：2013-01-10T17:39:43.700
> 
> 标签：ios, xcode, macos, debugging

OSX 10.8.2 上的 XCode 4.5 有一个奇怪的问题。

当我在 Mac 上运行应用程序时，它不会启动，并且在控制台中始终出现以下错误。

```
10/01/2013 17:26:26.478 Xcode[7884]: ERROR: Failed to create an alert for ID "enabled" based on defaults: 1 
```

当我运行 iPad/iPhone 应用程序时，模拟器启动，但应用程序只显示一个空白屏幕。我认为我的应用程序存在问题（尽管不太可能），因此尝试创建一个 vanilla mac 应用程序和 iOS 应用程序。两者都遇到相同的问题。但是，通过 Xcode 直接在 iPad 上运行/调试任何 iPad 项目是可行的。

我试图：

*   删除 ~/Library/Developer/Xcode/DerivedData/ 中的所有内容
*   删除 Xcode 应用程序并从 AppStore 重新下载
*   删除我所有的 Xcode 首选项

Xcode 构建和停止按钮也变得无响应，所以我必须强制退出 xcode 再试一次。

似乎没有任何效果，Xcode 工作正常，但是在我的 mac pro 上工作，所有项目都构建得很好！任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:39:43.700

没关系，将调试器设置为 GDB 而不是 LLDB 似乎已经解决了这个问题。但是，最好能回答一下为什么 LLDB 不能作为默认调试器工作，以及 xcode 中发生了什么变化以使其不再按预期工作。

# php - 以下类型的网址是什么意思？它是php中的另一个页面吗？

> ID：14263966
> 
> 赞同：-1
> 
> 时间：2013-01-10T17:39:44.307
> 
> 标签：php, facebook, url

> **可能重复：**
> [用户名 url，如 twitter 和 facebook](http://facebook.stackoverflow.com/questions/3129939/username-urls-like-twitter-and-facebook)
> [如何在没有任何文件扩展名的情况下获取用户友好的 URL？](http://facebook.stackoverflow.com/questions/14211303/how-to-get-user-friendly-urls-without-any-file-extensions)

`https://www.facebook.com/n26n` 当您查看某人的个人资料时，类似于url。你怎么能有一个没有文件扩展名的网址？由于 facebook 使用 PHP，这可以通过 php 完成吗？

对不起，我只是一个初学者，所以我对此感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:43:00.637

这可以通过多种方式实现，最常见的是使用名为[mod_rewrite的 apache mod](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:43:37.617

这只是一个内部重定向。Facebook 知道这些类型的 URL 用于指向用户个人资料。该`n26n`部分可能是`base32`您正在访问的用户 ID 的编码。

# couchdb - CouchDB：主/详细 _view 或 _list

> ID：14263968
> 
> 赞同：0
> 
> 时间：2013-01-10T17:39:47.327
> 
> 标签：couchdb, couchapp

CouchDB 中有没有办法制作主/详细信息_view 或_list？

另一方面，_view 似乎只能呈现主视图，而 _list 只能呈现细节列表。因此，答案可以通过确认这是不可能的链接来证明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:09:34.503

使用视图排序规则收集详细信息：

```
function(doc) {
  if (doc.type == "post") {
    emit([doc._id, 0], doc);
  } else if (doc.type == "comment") {
    emit([doc.post_id, 1], doc);
  }
} 
```

并查询`?key=<post_id>`

# php - 递归函数导致网页完全空白

> ID：14263970
> 
> 赞同：0
> 
> 时间：2013-01-10T17:39:49.483
> 
> 标签：php, menu, multidimensional-array

我正在尝试使用递归函数打印菜单。我使用了这些问题的代码示例：

[具有递归功能的回声菜单树](https://stackoverflow.com/questions/10782810/echo-menu-tree-with-recursive-function)

[从数据库表创建多维数组](https://stackoverflow.com/questions/8503151/create-an-multidimensional-array-from-a-database-table)

该代码对我来说似乎是正确的并且在语法上是正确的，但结果是我得到了一个空白页。没有错误，但是这个 php 后面的 HTML 也没有出现。有人有想法吗？

```
$connect = mysqli_connect($db_host,$db_user,$db_password,$db_database)
or die ("Couldn't connect to server: ".mysqli_error());

$query = "SELECT * FROM categories";

$result = mysqli_query($connect,$query)
    or die ("Couldn't execute query: ".mysqli_error());

function menuPrint($categories, $parent = 'root', $level = 0)
{
    $menuList = '<ul>';
    foreach($categories as $index => $category)
    {
      if($category['Parent'] == $parent)
      {
        $menuList .= '<li id="'.$category['ID'].'" class="tier'.$level.'">'.$category['Name'];
        $check = $this->menuPrint($categories, $category['ID'], $level+1);
        if($check != '<ul></ul>')
            $menuList .= $check;
        $menuList .= '</li>';
      }
    }
    return $menuList . '</ul>';
}

$catgories = array();
while ($row = mysqli_fetch_assoc($result)) {
    $categories[] = array(
        'ID' => $row['categoryId'],
        'Name' => $row['categoryName'],
        'Parent' => $row['parentCategory'],
        'Disabled' => $row['disabled']
    );
}
$menu = $this->menuPrint($categories);
echo $menu;

mysqli_close($connect); 
```

# c# - 空条目查询

> ID：14263974
> 
> 赞同：0
> 
> 时间：2013-01-10T17:40:04.930
> 
> 标签：c#, sql, sqlite, mono

我正在开发一个目录程序，我使用这段代码在数据库中查找资源：

```
sql = "SELECT * FROM Articoli WHERE CodiceArt='"+CodArtEntry.Text+"' OR Barcode='"+BarcodeEntry.Text+"' OR NomeArt LIKE '%"+NameArtEntry.Text+"%'"; 
```

此代码有效，但如果 NameArtEntry (GTK# Entry) 为空，它将选择数据库的每条记录。

我怎样才能避免这种情况？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:47:21.073

检查明确的空值并忽略它们。

```
sql = "SELECT * FROM Articoli WHERE CodiceArt is not null AND CodeArt <> '' and ( isCodiceArt='"+CodArtEntry.Text+"' OR Barcode='"+BarcodeEntry.Text+"' OR NomeArt LIKE '%"+NameArtEntry.Text+"%'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:48:37.063

请注意，您的 SQL 语句容易受到[SQL-injection](http://en.wikipedia.org/wiki/SQL_injection)的攻击。

您总是可以通过逐步构建查询来解决它：

```
var query = "SELECT * FROM Articoli WHERE CodiceArt='"+CodArtEntry.Text+"' OR barcode='"+BarcodeEntry.Text+"'";

if(!String.IsNullOrEmpty(NameArtEntry.Text)){
    query += " OR NomeArt LIKE '%"+NameArtEntry.Text + "%'";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:49:37.770

试试这个

```
var sql = String.Format("SELECT * FROM Articoli WHERE CodiceArt='{0}' OR Barcode='{1}'", CodArtEntry.Text, BarcodeEntry.Text);
if (!String.IsNullOrWhiteSpace(NameArtEntry.Text))
     sql += String.Format(" OR NomeArt LIKE '%{0}%' ", NameArtEntry.Text); 
```

使用 String.Format 将使您的查询更具可读性，尤其是在您编写直接 sql 时

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T17:49:51.917

就像是：

```
sql = "SELECT * FROM Articoli WHERE (CodiceArt='" + CodArtEntry.Text + "' OR Barcode='" + BarcodeEntry.Text + "' OR NomeArt LIKE '%" + NameArtEntry.Text + "%') AND NameArtEntry IS NOT NULL AND NameArtEntry <> ''"; 
```

# ruby-on-rails-3 - source ~/.vimrc 在文件中工作但不会自动获取咖啡

> ID：14263975
> 
> 赞同：0
> 
> 时间：2013-01-10T17:40:07.267
> 
> 标签：ruby-on-rails-3, vim, coffeescript, macvim

我为 vim 添加了咖啡语法和缩进插件。这是我的 ~/.vimrc：

```
colorscheme peachpuff
syntax on
filetype on
source /Users/(myusername)/.vim/vim-coffee-script-master/indent/coffee.vim
source /Users/(myusername)/.vim/vim-coffee-script-master/syntax/coffee.vim

au BufNewFile,BufRead *.js set filetype=javascript
au BufNewFile,BufRead *.coffee set filetype=coffee
au BufNewFile,BufRead *.rake set filetype=ruby
au BufNewFile,BufRead *.rb set filetype=ruby
au BufNewFile,BufRead Gemfile set filetype=ruby
au BufNewFile,BufRead Guardfile set filetype=ruby
au BufNewFile,BufRead *.less set filetype=scss

set autoindent
set expandtab
set softtabstop=2
set shiftwidth=2 
```

当我打开 .coffee 文件时，这没有语法突出显示。然后`:so ~/.vimrc`我在文件中运行并出现语法突出显示。此外，当我拆分屏幕并在一个窗口中运行时，它会`:so ~/.vimrc`在另一个窗口中消失。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:33:48.227

该`.vimrc`文件用于全局设置。通过在其中采购特定于*咖啡*的脚本，您只能在启动期间将它们临时应用到裸 Vim；您打开的任何文件都不会受到它的影响。

相反，Vim 有一个精心设计的机制来检测各种类型的编程语言和其他文件类型。cp。`:help filetypes`. 语法文件应放入`~/.vim/syntax/`并缩进`~/.vim/indent/`. 然后，一旦您`:setf coffee`（或者如果为 定义了检测`*.coffee`），它将全部自动激活。

# wordpress - 居中对齐 WordPress 二十十二主题的主菜单

> ID：14263976
> 
> 赞同：0
> 
> 时间：2013-01-10T17:40:07.617
> 
> 标签：wordpress

wordpress 212 主题的主导航菜单默认左对齐。我试图在我的子主题上居中对齐菜单，但无法弄清楚。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:03:11.027

如果您使用带有插件 Firebug 的 Firefox，您可以检查标题菜单栏的 CSS 以找到合适的代码。我碰巧自己使用了一个 212 的子主题，它还具有居中对齐的菜单项。

假设您使用的是带有 WordPress.org 脚本的自托管网站，这应该是一个简单的修复，如下所示：

1）如果你还没有，你需要创建一个子主题。为此，只需在 WordPress 安装的“主题”目录中创建一个新文件夹，并将其命名为“二十十二个儿童主题”。有关子主题的更多信息，请参阅[此页面](http://codex.wordpress.org/Child_Themes "儿童主题 « WordPress Codex")。

2）您现在需要为您的子主题创建一个新的样式表文件，并使其加载父主题的样式表，否则您的网站将加载没有任何样式。为此，请打开记事本并添加以下内容。

```
/*
Theme Name:     Twenty Twelve Child Theme
Theme URI:      
Description:    Child theme for Twenty Twelve
Author:         <You Name here>
Author URI:     
Template:       twentytwelve
Version:        <Add any number to your liking here, for instance '0.5'>
*/

@import url("../twentytwelve/style.css"); 
```

用带星号的斜线包裹的部分是注释。您可以在样式表的任何位置添加注释，以标记和组织您的自定义。以下“@import”规则加载父主题的样式表，这样您的子主题就不会将您的网站呈现为仅仅是骨架。

将此文件以文件名“styles.css”保存到您的子主题目录，并记住在“文件类型”列表中选择“所有文件”。

3）现在子主题的基础已经创建，我们可以进行自定义部分了。首先，我们将主题导航菜单的 CSS 规则添加到子主题的样式表中。该代码已经存在于父主题的样式表中，因此我们实际上将通过自定义覆盖它。

```
.main-navigation ul.nav-menu, .main-navigation div.nav-menu > ul {
    border-bottom-color: #EDEDED;
    border-bottom-style: solid;
    border-bottom-width: 1px;
    border-top-color: #EDEDED;
    border-top-style: solid;
    border-top-width: 1px;
    display: inline-block !important;
    text-align: left;
    width: 100%;
} 
```

此 CSS 规则中的声明将导航菜单的外观定义为容器。要居中对齐菜单元素，只需将 'text-align' 属性的值替换为 'center'。

再次保存文件并重新加载您的网站；菜单项现在应该居中对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:22:41.527

在仪表板 > 外观 > 编辑器中，打开“style.css”并向下滚动，直到看到标题；

```
/* =Main content and comment content
-------------------------------------------------------------- */ 
```

稍微向下滚动并将该行添加`text-align: center;`到您的底部，`.entry-header .entry-title`其余部分保持原样。

..完成上述操作后，我的代码如下所示；

```
.entry-header .entry-title {
    font-size: 20px;
    font-size: 1.428571429rem;
    line-height: 1.2;
    font-weight: normal;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T20:21:03.410

只需添加 lign: *text-align: center;* 到 .main-navigation

它应该看起来像：

```
.main-navigation {
clear: both;
margin: 0 auto;
max-width: 1080px;
min-height: 45px;
position: relative;
text-align: center;  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:02:29.547

将此代码部分添加到容器 div 的 css 中。

```
margin:0 auto; 
```

它会使 div 居中对齐。

# html - html5视频流

> ID：14263977
> 
> 赞同：2
> 
> 时间：2013-01-10T17:40:08.273
> 
> 标签：html, cakephp, video-streaming, html5-video

我正在使用 mediaViews 和 html5 在我们的 cakephp 网站上流式传输视频截屏。我正在为播放器使用 videojs，但遇到了一些问题：

1.  不会在 safari/ipad/iphone 中流式传输（我已将其转换为 mp4）
2.  不允许观看者在任何浏览器中跳到视频的中间。他们必须从头到尾直接观看视频，这并不理想。
3.  不回退到不支持 html5 的浏览器的 flash 对象

它目前在 Chrome 和 Firefox 上正确流式传输。我还没试过IE。

代码如下。视频文件的所有转换都是使用 Miro Video Converter 完成的，我读过它应该可以正常工作。

非常感谢任何帮助！

学生控制器代码

```
function view_demo_mp4() {
    $this->viewClass = 'Media';
    $params = array(
        'id' => 'webinar.mp4',
        'extension' => 'mp4',
        'path' => APP . "../../documentation" . DS,
        'download' => false,
        'cache' =>true
    );
    $this->set($params);

}

function view_demo_webm() {
    $this->viewClass = 'Media';
    $params = array(
        'id' => 'webinar.webm',
        'extension' => 'webm',
        'path' => APP . "../../documentation" . DS,
        'download' => false,
        'cache' =>true
    );
    $this->set($params);
}

function view_demo_ogg() {
    $this->viewClass = 'Media';
    $params = array(
        'id' => 'webinar.ogv',
        'extension' => 'ogv',
        'path' => APP . "../../documentation" . DS,
        'download' => false,
        'cache' =>true
    );
    $this->set($params);
} 
```

看法

```
<video class="video-js vjs-default-skin" controls preload="none" width="768" height="432"
     poster="/files/demo_splash.png"
     data-setup="{}">
        <source src="/students/view_demo_mp4" type='video/mp4' />
        <source src="/students/view_demo_ogg" type='video/ogg' />
        <source src="/students/view_demo_webm" type='video/webm' />
 </video> 
```

我有三个版本的视频。原件是使用 Quicktime 屏幕录制创建的。我目前正在使用：

*   Mp4 H.264，音频通道：2 总比特率 320
*   Ogv HTML5 视频 (Ogg) 我没有看到任何进一步的细节
*   WebM HT​​ML% Video webm（同样，我找不到更多细节）

当使用 Miro 转换器转换视频时，我使用最右边的选项“格式”，选择“视频”，然后选择输出类型。

这是在 https 站点上，所以也许这可能会导致闪存回退出现问题？除此之外，我没有看到有关 videojs 的任何说明来帮助设置后备。我错过了什么吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T01:47:33.970

如果您的 HTML5 视频无法在任何 Apple 手持设备上播放，请尝试在 Adob​​e Media Encoder 中自行编码 mp4 版本。确保在 Video 选项卡下选择 4 或更低的级别，绝对选择 Baseline 作为 Profile，并显示足够低的比特率，例如在 1000kbps 和 2000kbps 之间（默认值通常为 20000kbps。）。

# cuda - 在单个流中使用对等 GPU

> ID：14263986
> 
> 赞同：1
> 
> 时间：2013-01-10T17:40:53.513
> 
> 标签：cuda, multi-gpu

在我目前的项目中，我使用 GPU 进行信号处理和可视化。我已经在使用流来允许异步操作。信号以*帧*为单位进行处理，对于每一帧，流中的处理步骤如下

1.  memcpy 到设备
2.  信号调理
3.  图像处理
4.  可视化

现在这些步骤发生在单个 GPU 上，但是我的机器有一个多 GPU 卡（GeForce GTX 690），我想在两个设备之间分配操作。基本上我想在设备 A 上执行步骤 1 和 2，*在设备**B*上执行步骤 3 和 4 ，而操作 1、2、3 和 4 仍然作为单个异步流执行。期望的结果是一个看起来像这样的流式布局

```
Device A Stream a 1 2       1 2  ...
         Stream b      1 2  ...
Device B Stream a    3 4       3 4 ...
         Stream b         3 4  ... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:35:20.500

我之前的尝试不正确，因为流与创建它的设备相关联。因此，我认为标题中提出的问题最直接的答案是“无法完成”。您不能创建单个流并向多个 GPU 发出命令。从[这里](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#multi-device-system)：

```
Stream and Event Behavior

A kernel launch or memory copy will fail if it is issued to a stream that is not associated to the current device 
```

然而，在研究它时，我注意到事件是在两个不同设备上同步两个流的建议方法：

> `cudaStreamWaitEvent()`即使输入流和输入事件关联到不同的设备也会成功。因此，cudaStreamWaitEvent() 可用于使多个设备相互同步。

因此，本着这种精神，我创建了以下代码来说明这一点：

```
#include <stdio.h>
#define SIZE 32
#define K1VAL 5
#define K3VAL 3

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

__global__ void kernel1(int *frame, int size){

  int idx = threadIdx.x + (blockDim.x * blockIdx.x);

  if (idx == 0){
   int *a = new int[10000]; // just to make this kernel take a while
   for (int i = 0; i<10000; i++)
     a[i] = 0;
   for (int i = 0; i < size; i++)
     frame[i] += K1VAL;
   }
}

__global__ void kernel3(int *frame, int size){

  int idx = threadIdx.x + (blockDim.x * blockIdx.x);
  if (idx == 0)
   for (int i = 0; i < size; i++)
     frame[i] -= K3VAL;
}

void set_device(int dev){
  int ldev;
  cudaSetDevice(dev);
  cudaGetDevice(&ldev);
  cudaCheckErrors("set device error");
  if (ldev != dev){
    printf("set device mismatch error\n");
    exit(1);
    }
}

int main(){

  int A=0;
  int B=1;
  int framesize = SIZE*sizeof(int);
  int *h_frame;
  int *d_frame_aA,  *d_frame_bB;
  int numdev = 0;
  cudaGetDeviceCount(&numdev);
  cudaCheckErrors("can't determine number of devices");
  if (numdev < 2){
   printf("not enough devices!\n");
   return 1;
   }
  set_device(A);
  cudaMalloc((void **) &d_frame_aA, framesize);  // stream_a
  cudaMemset(d_frame_aA, 0, framesize);
  set_device(B);
  cudaMalloc((void **) &d_frame_bB, framesize);  // stream_b
  cudaMemset(d_frame_bB, 0, framesize);
  cudaHostAlloc((void **) &h_frame, framesize, cudaHostAllocDefault);
  cudaCheckErrors("allocations failure");

  set_device(A);
  cudaStream_t stream_a, stream_b;
  cudaStreamCreate(&stream_a);
  cudaEvent_t absync;
  cudaEventCreate(&absync);
  set_device(B);
  cudaStreamCreate(&stream_b);
  cudaCheckErrors("stream creation failure");

  for (int i = 0; i < SIZE; i++)
    h_frame[i] = 0;

  set_device(A);
  cudaDeviceEnablePeerAccess(B, 0);
  set_device(B);
  cudaDeviceEnablePeerAccess(A, 0);
  cudaCheckErrors("enable peer access fail");

  set_device(A);
  cudaMemcpyAsync(d_frame_aA, h_frame, framesize, cudaMemcpyHostToDevice, stream_a);
  kernel1<<<1,1,0, stream_a>>>(d_frame_aA, SIZE);
  cudaCheckErrors("kernel1 fail");
  cudaMemcpyPeerAsync(d_frame_bB, B, d_frame_aA, A, framesize, stream_a );
  cudaCheckErrors("memcpypeer fail");
  cudaEventRecord(absync, stream_a);
  set_device(B);
  // comment out the next line to see the failure
  cudaStreamWaitEvent(stream_b, absync, 0);
  kernel3<<<1,1,0, stream_b>>>(d_frame_bB, SIZE);
  cudaCheckErrors("main sequence fail");

//  cudaCheckErrors("main sequence failure");

  cudaMemcpy(h_frame, d_frame_bB, framesize, cudaMemcpyDeviceToHost);
  cudaCheckErrors("results_a memcpy fail");
  for (int i = 0; i < SIZE; i++)
    if (h_frame[i] != (K1VAL - K3VAL)) {
      printf("results error\n");
      return 1;
      }
  printf("success\n");
  return 0;

} 
```

如果您按原样运行代码，您应该会收到一条`success`消息。如果您注释掉强制流 b（在设备 B 上）等待流 a（在设备 A）上的行，那么您将看到一条`results error`消息。因此，这演示了如何将一台设备上的流同步到另一台设备上的流。希望能帮助到你。很抱歉在第一轮比赛中造成混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T01:58:31.580

`cudaStreamWaitEvent()`启用 GPU 间同步，因为您可以在属于另一个设备的 CUDA 事件上插入等待。

因此，生产者和消费者之间的 GPU 间同步需要为 2 个 GPU 中的每一个分配一些事件（至少 2 个），然后让生产者`cudaEventRecord()`和消费者`cudaStreamWaitEvent()`处理同一个事件。 `cudaStreamWaitEvent()`将命令插入当前设备的命令缓冲区，使其暂停执行，直到记录了给定的事件。

`cudaStreamWaitEvent()`下面是一个代码片段，其中使用这种方式实现了对等 memcpy 。一旦泵启动，生产者和消费者都应该同时进行 PCIe 传输，每个传输到两个暂存缓冲区之一（分配在便携式固定内存中）。

```
cudaError_t
chMemcpyPeerToPeer( 
    void *_dst, int dstDevice, 
    const void *_src, int srcDevice, 
    size_t N ) 
{
    cudaError_t status;
    char *dst = (char *) _dst;
    const char *src = (const char *) _src;
    int stagingIndex = 0;
    while ( N ) {
        size_t thisCopySize = min( N, STAGING_BUFFER_SIZE );

        CUDART_CHECK( cudaSetDevice( srcDevice ) );
        CUDART_CHECK( cudaStreamWaitEvent( NULL, g_events[dstDevice][stagingIndex], 0 ) );
        CUDART_CHECK( cudaMemcpyAsync( g_hostBuffers[stagingIndex], src, thisCopySize, 
            cudaMemcpyDeviceToHost, NULL ) );
        CUDART_CHECK( cudaEventRecord( g_events[srcDevice][stagingIndex] ) );

        CUDART_CHECK( cudaSetDevice( dstDevice ) );
        CUDART_CHECK( cudaStreamWaitEvent( NULL, g_events[srcDevice][stagingIndex], 0 ) );
        CUDART_CHECK( cudaMemcpyAsync( dst, g_hostBuffers[stagingIndex], thisCopySize, 
            cudaMemcpyHostToDevice, NULL ) );
        CUDART_CHECK( cudaEventRecord( g_events[dstDevice][stagingIndex] ) );

        dst += thisCopySize;
        src += thisCopySize;
        N -= thisCopySize;
        stagingIndex = 1 - stagingIndex;
    }
    // Wait until both devices are done
    CUDART_CHECK( cudaSetDevice( srcDevice ) );
    CUDART_CHECK( cudaDeviceSynchronize() );

    CUDART_CHECK( cudaSetDevice( dstDevice ) );
    CUDART_CHECK( cudaDeviceSynchronize() );

Error:
    return status;
} 
```

[https://github.com/ArchaeaSoftware/cudahandbook/blob/master/memory/peer2peerMemcpy.cu](https://github.com/ArchaeaSoftware/cudahandbook/blob/master/memory/peer2peerMemcpy.cu)中的完整源代码

# asp.net - 输入错误的 URL，末尾带有“/”，导致 IIS 错误

> ID：14263991
> 
> 赞同：2
> 
> 时间：2013-01-10T17:41:11.353
> 
> 标签：asp.net, url, iis, redirect

我可以在 IIS/ASP.NET 管道的哪个位置检查传入的 url 是否以空格和斜杠结尾（有问题的条目看起来像这样：'/xxxx/yyyy/zzzz.aspx /1'）？这导致我们的生产服务器出现错误。如果我在本地运行它，Chrome 会给我太多重定向警告。有没有办法可以捕获这个或删除'/'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:03:34.553

找到一个可以接受的答案。检查格式错误的 url - !(Uri.IsWellFormedUriString(url, UriKind.RelativeOrAbsolute)) - 在 Application_Error 事件中为我提供了我需要的控制

# php - 提交页面后显示 $_COOKIE[] 的旧值直到下次刷新

> ID：14263992
> 
> 赞同：0
> 
> 时间：2013-01-10T17:41:12.703
> 
> 标签：php, html

我遇到了一个问题，在第一次单击提交后，页面重新加载，页面显示每个 cookie 集的旧值，直到页面刷新或重新加载。

这基本上是我设置它的方式。

索引.php

```
<?php 
    if(isset($_POST['filter'])){
        foreach($_POST['filter'] as $key=>$value){
            $xNums[] = $key;    
        }
        $vals = $_POST['filter'];
        updateFilter($vals, $xNums);
    }
?>
<form action='index.php' method='post'>
<input type='radio' name=filter['".$xNum."'] value='yes' />Show<input type='radio' name=filter['".$SomeVariable."'] value='no' />Hide
<input type=submit value=" Submit " />
<?php
    echo displayStatus($xNum);
?> 
```

函数.php

```
function updateFilter($vals, $xNums){
    foreach($xNums as $xNum){
        $val = $vals[$xNum];
        setcookie($xNum, $val, time()+3600);
    }
    return;
}

function displayStatus($xNum){
    if($_COOKIE["'".$xNum."'"]=='no'){
        return "no";
    } else {
        return "yes";
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T17:48:41.977

在下一次请求之前，您使用的 cookie对超全局变量`setcookie`中的 PHP 脚本不可见，因为仅在 http 响应中设置标头。`$_COOKIES``setcookie``Set-Cookie`

如果您想在同一个请求中读取这些 cookie，您可以使用：

```
setcookie($xNum, $val, time()+3600);
$_COOKIE[$xNum] = $val; 
```

编辑：[这](https://stackoverflow.com/questions/3230133/accessing-cookie-immediately-after-setcookie)是类似的问题。

# azure - 关于 Windows azure 90 天试用版的问题

> ID：14263993
> 
> 赞同：0
> 
> 时间：2013-01-10T17:41:14.433
> 
> 标签：azure

只是一个关于 windows azure 试用版的快速问题。

如果我获得 windows azure 90 天试用版

*   它会显示在我的借记卡上吗？

*   我可以收取费用吗，我听说他们对所有试用帐户设置了支出限制，但是即使您不取消支出限制，您仍然可以收取费用吗？

*   您制作的虚拟机越大（例如从小到大），
    它运行的时间越短，因为它使用更多的计算时间？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:48:01.110

您应该提供信用卡，但不会收费，因此不会显示在对帐单中。如果您超出限制，他们只会禁用您的帐户，但无论如何都不会收费。不确定第三个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T22:36:15.620

您需要提供信用卡以进行验证，但除非您明确切换到即用即付模式，否则不会向您收费。是的，您创建的虚拟机越大，它就会越快用完免费试用信用。当前的试用版为您提供 200 美元或 30 天，以您先打中的为准。

# internet-explorer - IE7/8 中的 YouTube iframe 嵌入代码使用 controls 参数引发 JS 错误

> ID：14263997
> 
> 赞同：2
> 
> 时间：2013-01-10T17:41:31.867
> 
> 标签：internet-explorer, iframe, youtube, embed

使用 YouTube 开发人员文档中概述的参数之一 - “控件”时出现 JS 错误。 [文档链接](https://developers.google.com/youtube/player_parameters#controls) 此参数最初不会加载播放器以提高页面加载性能。

如果我使用此代码...

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/0VikYBOXRkg?controls=2" frameborder="0" allowfullscreen></iframe> 
```

我在 IE7 和 IE8 中收到错误消息：

> 对象不支持此属性或方法。
> 
> www-embed-cued-vflvSROs4.js

如果您在 IE7 或 8 中查看，请制作一个小提琴来说明问题。其他浏览器工作正常。- [http://jsfiddle.net/aBK6V/](http://jsfiddle.net/aBK6V/)

有任何想法吗？我在任何地方都找不到一个相关的错误。

# mysql - SQL Server 同步到 MySQL 程序

> ID：14263998
> 
> 赞同：0
> 
> 时间：2013-01-10T17:41:37.390
> 
> 标签：mysql, sql-server, synchronization

我想每隔 30 分钟或更短时间将 380000 行数据从 SQL Server 数据库的 11 个表持续同步到 MySQL 数据库。我怎样才能做到这一点？什么程序可以做到这一点？

[由于以下原因，这篇文章](https://stackoverflow.com/questions/1951174/sync-between-sql-server-and-mysql-server)通常用于关闭此类重复的问题，但对我不起作用。

SQL Server 是 CRM 系统的一部分，我不确定它是否是精简版或其他版本，但长话短说，我*无法访问 SQL Server Management Studio。*

MySQL 数据库是我的托管包的一部分，这意味着我可以通过`phpmyadmin`等方式访问它，但不能访问控制台或其他任何东西。显然我无法通过`localhost`.

所以基本上我正在寻找的是一种连接到两个数据库的方法，可能通过 ODBC 驱动程序，并且每 x 分钟/小时同步一次数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-29T17:17:09.463

我终于使用了一个名为 Omega Sync 的程序。*现在称为[Spectral Core Replicator](https://www.spectralcore.com/replicator)*。

> Omega Sync 可以比较和同步数据库模式和表数据。同类型数据库的模式比较和同步 即使是不同类型的数据库也可以进行数据比较和同步 比较和同步无限大小的数据库！

支持的数据库

*   使用权
*   SQL 服务器
*   MySQL
*   甲骨文
*   基地间
*   火鸟
*   ODBC 源

*我与这家公司或产品没有任何关系。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:30:10.687

Microsoft SQL Server 复制可以将更改应用到通用 ODBC/OleDB 订阅者。如果您遵循正确的步骤并使用正确的驱动程序，您可以将 MySQL 配置为订阅者，但不受官方支持，因此如果出现问题，您可以自行解决。例如。请参阅[在 Microsoft SQL Server 2000 和 MySQL 之间设置复制](http://www.techrepublic.com/blog/howdoi/how-do-i-set-up-replication-between-microsoft-sql-server-2000-and-mysql/112)。因为这篇文章是针对 SQL 2000 的，因为 Microsoft SQL 2008 支持[OleDB 订阅者](http://msdn.microsoft.com/en-us/library/ms151864%28v=sql.100%29.aspx)，而不是 ODBC，所以已[弃用。](http://msdn.microsoft.com/en-us/library/ms143550%28v=sql.100%29.aspx)

您需要对 Microsoft SQL Server、MySQL、ODBC/OleDB 和 Microsoft SQL Server 复制有非常深入的了解。如果您遇到错误，您将不得不自己解决它们，因为有关此主题的公共信息很少。我只能告诉你这是可能的，而且我已经看到了。祝你好运！

# asp.net-mvc - ASP.NET MVC 绑定到视图模型以及路由值

> ID：14263999
> 
> 赞同：1
> 
> 时间：2013-01-10T17:41:44.303
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我知道关于 ASP.NET MVC 中的复杂模型绑定也有人问过类似的问题，但我遇到了绑定问题，因为 POST 上没有足够的前缀，我想知道是否有简单的解决方案。

我有一个看起来像这样的视图模型：

```
public class ViewModel<Survey, Contact>
{
    public Survey Model { get; set; }
    public Contact Model2 { get; set; }
} 
```

然后我有一个像这样的动作方法接受 POSTed

```
public ActionResult Survey(
    string id, string id2, SurveyViewModel<Survey, Contact> model)
{
    // code goes here...
} 
```

在我的表单中，前两个 id 来自 URL 路由，然后我有表单代码（使用`@Html.EditorFor(x => x.Model.SurveyName)`或类似），生成的名称如下：

```
<input class="text-box single-line" id="Model_Email"
       name="Model.Email" type="text" value="" /> 
```

如果我将名称从 更改为 ，则帖子有效`Model.Email`，`model.Model.Email`但我试图避免创建自定义模型绑定器。

在那儿

1.  我可以在视图中进行设置以更改使用`@Html.EditorFor`类型化视图助手在视图中呈现的所有字段的名称？
2.  我可以使用操作上的 Bind 属性进行更改，以使其默认绑定到该对象？

答案可能是“构建一个自定义活页夹”，但我只是想在解决这个问题之前提出这个问题。

谢谢您的帮助。此致，

哈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:02:24.773

您可以使用自定义 HtmlFieldPrefix 传递自定义 viewdata 来查看。使用助手渲染的每个控件都将具有该前缀。

```
ViewData.TemplateInfo.HtmlFieldPrefix = "prefix here"; 
```

看看这个：[强制 EditorFor 在视图中使用类名作为输入项的前缀？](https://stackoverflow.com/questions/4606686/forcing-editorfor-to-prefix-input-items-on-view-with-class-name)