# StackOverflow 问答 14902000-14902999

# php - PHP循环，除了最后一个循环之外的每个循环后添加一个逗号

> ID：14902002
> 
> 赞同：1
> 
> 时间：2013-02-15T19:32:40.770
> 
> 标签：php, html

我有一个查询，它遍历一些产品名称并将它们放在页面上。作为循环的一部分，它在末尾添加了一个逗号，所以它看起来像这样：

产品：衬衫，裤子，领带，夹克，

请注意，我在最后一个产品之后得到一个逗号。此外，它们都是链接，所以我不能使用一些 strreplace fx 或类似的：

这是我的代码：

```
<?php
 $product_query = mysql_query("select * from products_table);
 $row_product_query = mysql_fetch_assoc($product_query);
 $totalRows_product_query = mysql_num_rows($product_query);
 ?>
 <strong>Products:  </strong>
 <?php if ($totalRows_product_query > 0) {  ?>
 <?php do { ?>
 <span><a href="link"><?php echo $row_product_query['products_name']; ?></a></span>
<strong>,&nbsp;</strong>
 <?php } while ($row_product_query = mysql_fetch_assoc($product_query)); ?>
 <?php } ?><br /> 
```

我需要做什么才能使最后一个逗号不出现？

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:41:14.100

使用 php 内爆函数

```
<?php
    $str = "";
    $product_query = mysql_query("select * from products_table");
    $row_product_query = mysql_fetch_assoc($product_query);
    $totalRows_product_query = mysql_num_rows($product_query);
    $cnt = 0;
?>
<strong>Products:  </strong>
<?php if ($totalRows_product_query > 0) {  ?>
<?php do { 
    $arr[$cnt] = '<span><a href="link">'.$row_product_query['products_name'].'</a></span>';
    $cnt++;
<?php } while ($row_product_query = mysql_fetch_assoc($product_query)); ?>
<?php } 
    echo implode("<strong>,</strong>",$arr);
?><br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:35:21.550

修复它们是如何存储/输入到数据库中的？否则， `<?php echo str_replace(",", "", $row_product_query['products_name']); ?>` 应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:40:32.750

正如@tucker 所说，您可以使用 implode 函数。[内爆函数](http://php.net/manual/en/function.implode.php)。您可以将它与这样的数组一起使用

`$a_string = implode(",",$the_result_array);`

这会给你你想要的结果。

# iphone - 如何将“地图”应用链接添加到我的每个地图注释

> ID：14902006
> 
> 赞同：4
> 
> 时间：2013-02-15T19:32:53.750
> 
> 标签：iphone, ios, xcode, ios6

有一些关于这方面的教程和问题，但我还不够了解如何将它们实现到我的特定应用程序中。我从 URL 获取 JSON 注释数据并对其进行解析并将每个注释添加到 for 循环中。我想在每个注释上添加一个链接以打开地图以获取路线。

这是我的**ViewController.H**

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
#import <MapKit/MapKit.h>

//MAP Setup
@interface ViewController : UIViewController <MKMapViewDelegate>

//map setup
@property (weak, nonatomic) IBOutlet MKMapView *mapView;
@property (nonatomic, strong) NSMutableData *downloadData;
//- (IBAction)refreshTapped:(id)sender;

@end 
```

和我的**ViewController.m**

```
- (void)viewDidLoad
{
    ////////////////////////
    //Connection to download JSON map info
    ////////////////////////
    self.downloadData = [NSMutableData new];

    NSURL *requestURL2 = [NSURL URLWithString:@"http:OMITTED"];
    NSURLRequest *request = [NSURLRequest requestWithURL:requestURL2];
    NSURLConnection *connection = [NSURLConnection connectionWithRequest:request delegate:self];

    //scroller
    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(320,900)];

    [super viewDidLoad];    

//Map
    [self.mapView.userLocation addObserver:self
                                forKeyPath:@"location"
                                   options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld)
                                   context:nil];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.downloadData appendData:data];

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    id parsed = [NSJSONSerialization JSONObjectWithData:_downloadData options:kNilOptions error:nil];

    ////////////////////////
    //Iterating and adding annotations
    ////////////////////////
    for (NSDictionary *pointInfo in parsed)
    {
        NSLog([pointInfo objectForKey:@"name"]);
        double xCoord = [(NSNumber*)[pointInfo objectForKey:@"lat"] doubleValue];
        double yCoord = [(NSNumber*)[pointInfo objectForKey:@"lon"] doubleValue];
        CLLocationCoordinate2D coords = CLLocationCoordinate2DMake(xCoord, yCoord);

        MKPointAnnotation *point = [MKPointAnnotation new];
        point.coordinate = coords;
        point.title = [pointInfo objectForKey:@"name"];

        [self.mapView addAnnotation:point];// or whatever your map view's variable name is
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//centers map on user loc and then allows for movement of map without re-centering on userlocation check.
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
    if ([self.mapView showsUserLocation])
    {
        MKCoordinateRegion region;
        region.center = self.mapView.userLocation.coordinate;

        MKCoordinateSpan span;
        span.latitudeDelta  = .50; // Change these values to change the zoom
        span.longitudeDelta = .50;
        region.span = span;

        [self.mapView setRegion:region animated:YES];

        self.mapView.showsUserLocation = NO;}
}

- (void)dealloc
{
    [self.mapView.userLocation removeObserver:self forKeyPath:@"location"];
    [self.mapView removeFromSuperview]; // release crashes app
    self.mapView = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T19:56:43.723

[启动](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/MapKit/MapKit.html#//apple_ref/doc/uid/TP40009497-CH3-SW9)*位置感知编程指南*的地图应用程序说：

> 如果您希望在 Maps 应用程序中显示地图信息，而不是在您自己的应用程序中显示地图信息，您可以使用以下两种技术之一以编程方式启动 Maps：
> 
> 在 iOS 6 及更高版本中，使用[`MKMapItem`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/cl/MKMapItem)对象打开地图。
> 在 iOS 5 及更早版本中，创建并打开一个特殊格式的地图 URL，如[*Apple URL Scheme Reference*](http://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)中所述。
> 打开地图应用程序的首选方法是使用`MKMapItem`该类。此类提供了用于打开应用程序并显示位置或方向的[`openMapsWithItems:launchOptions:`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/clm/MKMapItem/openMapsWithItems:launchOptions:)类方法和实例方法。[`openInMapsWithLaunchOptions:`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/instm/MKMapItem/openInMapsWithLaunchOptions:)
> 
> 有关如何打开地图应用的示例，请参阅[“要求地图应用显示路线”。</a>](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW6)
> 
> [](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW6)

 [所以，你应该：](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW6) 

[*   确保将您的视图控制器定义`delegate`为您的地图视图；](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW6) 
2.  [编写一个](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW6)[`viewForAnnotation`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView:viewForAnnotation:)打开[`canShowCallout`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/occ/instp/MKAnnotationView/canShowCallout)并打开[标注附件视图](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/occ/instp/MKAnnotationView/rightCalloutAccessoryView)的代码：

    ```
    - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
    {
        if ([annotation isKindOfClass:[MKUserLocation class]])
            return nil;

        MKAnnotationView* annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation
                                                                        reuseIdentifier:@"MyCustomAnnotation"];

        annotationView.canShowCallout = YES;
        annotationView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        return annotationView;
    } 
    ```

3.  然后根据您支持的 iOS 版本（例如，对于 iOS 6）编写一个[`calloutAccessoryControlTapped`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView:annotationView:calloutAccessoryControlTapped:)打开上述地图的方法：

    ```
    - (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
    {
        id <MKAnnotation> annotation = view.annotation;
        CLLocationCoordinate2D coordinate = [annotation coordinate];
        MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
        MKMapItem *mapitem = [[MKMapItem alloc] initWithPlacemark:placemark];
        mapitem.name = annotation.title;
        [mapitem openInMapsWithLaunchOptions:nil];
    } 
    ```

    我不知道您的 KML 中还有哪些额外的地理信息，但您大概可以根据需要填写`addressDictionary`。

* * *

在回答有关如何使用初始化方法的`addressDictionary`参数的后续问题时，如果您有street 、 the 、 the 、 the等的变量，它看起来像：`MKPlacemark`[`initWithCoordinate`](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKPlacemark_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008322-CH1-SW3)`NSString``address``city``state``zip`

```
NSDictionary *addressDictionary = @{(NSString *)kABPersonAddressStreetKey : street,
                                    (NSString *)kABPersonAddressCityKey   : city,
                                    (NSString *)kABPersonAddressStateKey  : state,
                                    (NSString *)kABPersonAddressZIPKey    : zip}; 
```

为此，您必须[将适当的框架](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html), `AddressBook.framework`, 添加到您的项目中，并将标头导入您的 .m 文件中：

```
#import <AddressBook/AddressBook.h> 
```

不过，真正的问题是如何设置 ，`name`以便`MKMapItem`它不会在地图应用程序中显示为“未知位置”。这就像设置`name`属性一样简单，可能只是`title`从你的`annotation`:

```
mapitem.name = annotation.title; 
```

# ruby-on-rails - RSpec：Factory Girl 视图测试生成“未定义方法”错误

> ID：14902017
> 
> 赞同：0
> 
> 时间：2013-02-15T19:33:43.757
> 
> 标签：ruby-on-rails, rspec, factory-bot

我在 orders/edit.html.erb 有一个页面，我正在使用以下代码进行测试：

```
require 'spec_helper'

describe "orders/edit.html.erb" do
  before(:each) do
    @order = FactoryGirl.create(:order)
    #assign(:order, stub_model(Order,
    #  :new_record? => false,
    #  :email => "MyString",
    #  :name => "MyString"
    #))
  end

  it "renders the edit order form" do
    render :template => "orders/edit", :handlers => [:erb]

  end
end 
```

但是，我收到以下测试失败错误消息：

```
orders/edit.html.erb renders the edit order form
     Failure/Error: render :template => "admin/fulfillment/orders/edit", :handlers => [:erb]
     ActionView::Template::Error:
       undefined method `name' for nil:NilClass 
```

这是在 orders/edit.html.erb 中发生冲突的地方：

```
<h3>New Order # <%= @order.number %></h3>
<legend>
  <% if @order.user.name && @order.user.waiter.name %>
  Diner: <%= @order.user.name %> / Waiter: <%= @order.user.waiter.name %>
  <% else %>
  No Name available <% end %>
</legend>
<div class="row">
... 
```

**更新：这是我的 factory/order.rb - 我是否也没有生成足够的用户数据，触发零？**

```
FactoryGirl.define do
  sequence :number do |n|
    n
  end

      factory :order do
        number          #{ Factory.next(:number) }
        email           'email@e.com'
        state           'in_progress'
        user            { |c| c.association(:user) }
        bill_address_id    { |c| c.association(:address).id }
        ship_address_id    { |c| c.association(:address).id }
        active          true
        calculated_at   Time.now
        completed_at    Time.now

        after_build {|oi| oi.send(:initialize_state_machines, :dynamic => :force)}
      end
      factory :in_progress_order, :parent => :order do
        state           'in_progress'
      end

      factory :complete_order, :parent => :order do
        state           'complete'
      end 
```

我在考试中做错了什么，我需要做什么才能通过考试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:35:58.450

您的测试失败，因为`@order.user.stylist`is `nil`。在您的`if`陈述中，您检查`@order.user.name`和`@order.user.waiter.name`，但不检查`@order.user.stylist.name`。

尝试这个。

```
<h3>New Order # <%= @order.number %></h3>
<legend>
  <% if @order.user.name && @order.user.waiter.name && @order.user.stylist.name %>
    Diner: <%= @order.user.name %> / Waiter: <%= @order.user.stylist.name %>
  <% else %>
     No Name available 
  <% end %>
</legend>
<div class="row">
... 
```

# c# - 如何打开一个新的独立表格？

> ID：14902018
> 
> 赞同：2
> 
> 时间：2013-02-15T19:33:44.910
> 
> 标签：c#, .net, winforms

我将从一个代码开始：

```
private void button_newform_Click(object sender, EventArgs e)
    Form newF = new Form();
    newF.show(); 
```

我有一个带有可以打开新表单的按钮的表单。

问题是，新表单有父级。

例如，如果我单击`newform`按钮，它将创建一个新表单。

但是当我关闭这个表单时，新表单也会被关闭。

如何从现有表单创建一个独立的表单？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T19:37:34.267

发生这种情况的原因是因为在项目->应用程序属性中，关闭模式设置为`When startup Form closes`. 将其更改为`When Last form closes`.

# javascript - 在迷宫墙 Javascript 处停止字符

> ID：14902019
> 
> 赞同：1
> 
> 时间：2013-02-15T19:33:52.347
> 
> 标签：javascript, html-table, maze

我正在制作一个迷宫游戏，并且我正在使用一张桌子进行迷宫布局。角色移动完美，但它穿过墙壁对于墙壁，我正在使用类似的东西 `<td style="border-right:10px solid #000000;">`。它有效，但角色几乎是一个幽灵。有没有办法让角色在到达 a 时停止`border`？我的迷宫位于[http://thomaswd.com/maze](http://thomaswd.com/maze)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:47:03.557

保存老鼠所在的单元格，然后在请求移动时，检查当前单元格是否在用户试图去的方向上有边框，或者未来的单元格是否有相反方向的边框，然后中止如果确实如此，请移动请求。例如，如果用户单击右键，则检查当前单元格是否有右边框，或者老鼠要移动到的单元格是否有左边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:53:55.890

`hasClass`由于您使用的是 jQuery，并且墙壁由单元格上的类显示，您可以使用 jQuery 的方法检查您尝试移动到的单元格是否有墙壁。

```
function up() {
    //check if the cell has a border on the bottom
    if ($("#td" + (algernon - 8)).hasClass('b')) return;
    $("td").css("background","transparent");
    algernon -= 8;
    setTimeout("refresh()", 0);
}

function down() {
    //check if the cell has a border on the top
    if ($("#td" + (algernon + 8)).hasClass('t')) return;
    $("td").css("background","transparent");
    algernon += 8;
    setTimeout("refresh()", 0);
}

function leftclick() {
    //check if the cell has a border on the right
    if ($("#td" + (algernon - 1)).hasClass('r')) return;
    $("td").css("background","transparent");
    algernon -= 1;
    setTimeout("refresh()", 0);
}

function rightclick() {
    //check if the cell has a border on the left
    if ($("#td" + (algernon + 1)).hasClass('l')) return;
    $("td").css("background","transparent");
    algernon += 1;
    setTimeout("refresh()", 0);
} 
```

我希望这有帮助

# python - Django：如何使 STATIC_URL 为空？

> ID：14902023
> 
> 赞同：2
> 
> 时间：2013-02-15T19:34:13.590
> 
> 标签：python, django

是的，我希望它像在 Flask 框架中一样工作 - 我可以设置如下参数：

`static_folder=os.getcwd()+"/static/", static_url_path=""`

并且其中的所有文件`./static/files/blabla.bla`都可以通过`mysite.com/files/blabla.bla`地址访问。我真的不想在`static`后面添加`mysite.com`。

但是如果我`STATIC_URL = '/'`在 Django 中设置，那么我可以通过这个地址获取我的静态文件，但是突然之间我无法获取我在`urls.py`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:04:45.323

我相信这是不支持开箱即用的。在我的脑海中，一种方法是使用特殊的 404 处理程序，该处理程序未能与任何已定义的 URL 匹配，将请求视为对静态资源的请求。这在开发环境中相当容易做到，但当涉及到 nginx、Apache 和/或 gunicorn 时，难度要大得多。

换句话说，不要这样做。嵌套您的静态数据（或将它们放在不同的子域中），但不要以这种方式混合 URL 层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:43:24.897

使用 Nginx 使用 try_files 很容易做到这一点。使用下面的伪设置将使 Nginx 首先尝试查找静态文件，如果失败，则将执行传递给您的 django 应用程序。

```
server {
  ...
  root /some/path/to/assets/;
  try_files $uri @django;

  location @django {
    ...
    proxy_pass  http://unix:/some/path/to/server.sock;
  }
} 
```

示例：该文件`/some/path/to/assets/myfile.ext`将作为`http://mydomain/myfile.ext`

# java - 如何在Java中找到数组中字符串的索引号

> ID：14902025
> 
> 赞同：0
> 
> 时间：2013-02-15T19:34:16.753
> 
> 标签：java, arrays, input

我不知道我的编码是否有效，甚至正确，但我想输入姓名、地址和电话号码。然后我想让输入从输入数组中找到匹配项，并使用相同的索引号打印相应的信息。

```
import java.util.*;

public class NameAddress {

    public static void main(String[] args) {

        Scanner ui = new Scanner(System.in);
        System.out.println("Welcome to the name collecting database");
        String []names = new String[5];
        String []address = new String[5];
        String []phone = new String [5];
        int count =0;

        while (count<=5)
        {
            System.out.println("Please enter the name you would like to input");
            names[count] =ui.next();
            System.out.println("Name has been registered into Slot "+(count+1)+" :"+Arrays.toString(names));
            System.out.println("Please enter the address corresponding with this name");
            ui.nextLine();
            address[count] = ui.nextLine();
            System.out.println(names[count]+" has inputted the address: "+address[count]+"\nPlease input your phone number");
            phone[count]=ui.nextLine();
            System.out.println(names[count]+"'s phone number is: "+phone[count]+"\nWould you like to add a new user? (Yes or No)");

            if (ui.next().equals("No"))
            {
                System.out.println("Please enter a name to see matched information");
                String name = ui.next();
                if(name.equals(names[count]))
                {
                    System.out.println("Name: "+names[count]+"\nAddress: "+address[count]+"\nPhone: "+phone[count]);
                }
                count=6;
            }
            count++;
        } 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:39:29.380

```
 System.out.println("Please enter a name to see matched information");
        String name = ui.next();
        for(int i = 0; i <names.length;i++){
        if(name.equals(names[i]))
        {
            System.out.println("Name: "+names[i]+"\nAddress: "+address[i]+"\nPhone: "+phone[i]);
        }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:45:55.990

`if(name.equals(names[count]))`仅当`name`用户正在搜索的*当前*索引为`names`. 所以你必须检查数组中的每一项，以确定它是否存在于数组中。你可以这样做：

```
int itemIndex = Arrays.asList(names).indexOf(name);
if(itemIndex>=0) // instead of if(name.equals(names[count]))
{
    // rest of the codes; use the itemIndex to retrieve other information
}
else
{
    System.out.println(name + " was not found");
} 
```

或者像其他人显示的那样手动循环`names`数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:47:20.363

似乎您已经完成了数据输入。

至于通过搜索检索数据，如果您不关心效率，那么您可以遍历整个数组以查看输入的文本是否与数组中的任何元素匹配

```
int searchIndex = 0;
for (int i = 0; i < names.length; i++) {
    if (searchString.equals(names[i])) {
        searchIndex = i;
    }
} 
```

其中 searchString 将是用户输入的用于在数组中查找元素的字符串。上面的代码块假设您没有重复数据，但如果您愿意，您可以轻松调整返回的索引以包含包含您的数据的索引数组。然后，您将拥有一个索引号（或多个索引号），您可以使用它来查找其他数组中的其余数据。

# web-services - 仅提供 URL 时从网页中提取重要信息

> ID：14902026
> 
> 赞同：1
> 
> 时间：2013-02-15T19:34:20.710
> 
> 标签：web-services, rss

我指的是当有人发布链接时，Facebook 和 Twitter 等应用程序会做什么。他们能够将该链接转换为标题、重要图像和（有时）简短摘要。

我要问的是：使用标签、RSS 或元数据是否有一些技巧，或者您是否必须注册一个为您执行此操作的 Web 服务或自己编写代码，下载 HTML 并解析它以提取出来猜测你想要的组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:49:39.993

[http://ogp.me](http://ogp.me) - 他们都使用开放图形协议或其他协议。答案在元标记中。

# iphone - UILabel 没有以编程方式更新

> ID：14902029
> 
> 赞同：0
> 
> 时间：2013-02-15T19:34:24.443
> 
> 标签：iphone, ios, objective-c

当用户“登录”到我的应用程序时，我正在尝试更新 UILabel。我已经在我的故事板上放置了一个 UILabel 但它似乎没有更新，我的代码如下

**视图控制器.h**

```
@interface ViewController : UIViewController{    
     IBOutlet UILabel *followersCount;
}

@property(nonatomic, retain) IBOutlet UILabel *followersCount;

@end 
```

然后，我有一个通过 HTTP 连接到 REST API 的操作，它返回一个字符串，如果该字符串为真，则用户已登录，所以我想将用户“关注者”记录到标签，所以我使用代码：

```
ViewController.m

followersCount.text = @"Hello World"; 
```

但是我得到了默认的“标签”文本，而不是预期的“Hello World”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:42:45.920

检查标签插座是否正确连接到您的 .xib 或情节提要文件上的标签...

如果是，请尝试`self`在标签名称之前添加：

```
self.followersCount.text = @"Hello World"; 
```

# php - PHP包含攻击

> ID：14902037
> 
> 赞同：1
> 
> 时间：2013-02-15T19:35:10.897
> 
> 标签：php

我可以准确理解该`open_basedir ini`设置的作用，但是在阅读文档时，它描述了它如何防止包含攻击——攻击者可以通过包含文件来攻击系统。

但是，我找不到这方面的一个例子，这到底是什么。

能否提供此类攻击的示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:37:50.940

您可以在服务器上包含其他用户的文件。

所以你的文件库：/home/marty/

另一个用户文件库：/home/user231

如果没有 open_basedir（并且文件权限错误），您可以包含其他用户文件：

```
include("/home/user231/public_html/connection.php"); 
```

或者：

```
file_get_contents("/home/user231/public_html/connection.php"); 
```

# vb.net - 异步更新控件

> ID：14902045
> 
> 赞同：0
> 
> 时间：2013-02-15T19:35:33.540
> 
> 标签：vb.net, asynchronous, synchronous, multithreading

我一直在互联网上阅读如何解决从不同线程更新控件的问题，而不是包含控件的线程，还阅读了“Pro VB 2010 和 .Net 4.0 平台”，我开始怀疑。以下代码是否以同步方式执行？

```
Private Sub SaveData(ByVal filepath As String)
   If InvokeRequired Then
      Me.Invoke(New MethodInvoker(AddressOf SaveData))
   Else
      ... the actual code
   End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:38:09.197

这在很大程度上取决于您的调用上下文。

如果您从 UI 线程或主线程调用它，那么是的，它将同步运行。

如果您从不是您的 UI 或主线程的线程调用它，那么它将与您的 UI 或主线程异步运行，但与调用线程同步，等待 UI 或主线程完成处理委托。

所以它可以双向进行。它可以同步和异步操作。我认为您缺少的是代码本身不会以同步或异步方式执行，代码的执行是同步或异步的。

您制作更新功能的原因：

```
Private Sub UpdateLabel(byval tLabel as Label, byval Value as String)
    If tLabel.Invokerequired Then
         Me.Invoke(New MethodInvoker(AddressOf UpdateLabel)
    Else
        tLabel.Text = Value
    End If
End Sub 
```

这样您就可以在想要更改文本时调用它，而不必担心跨线程异常。

在单击事件期间从 UI 线程调用此方法是安全的，从正在运行的后台线程调用也是安全的，因为更改仍只会在 UI 或主线程上进行。您使用这样的代码来确保与您对其他线程拥有的控件所做的更改保持同步。

这种更新方式旨在同步您的更改并避免交叉线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:38:18.863

该`Invoke`方法是一个同步调用，它将阻塞调用线程，直到委托在 UI 线程上完成执行。

如果要调用线程立即继续（在 UI 线程上的代码运行之前），调用`BeginInvoke()`，这是异步的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T00:56:16.037

我知道这个问题有点老了，但这是对 Pow-Ian 答案的修改，对我有用。

```
Private Sub UpdateLabel(ByVal tControl As Control, ByVal Value As String)
    If tControl.InvokeRequired Then
        tControl.Invoke(Sub() tControl.Text = Value)
    Else
        tControl.Text = Value
    End If
End Sub 
```

这应该可以使用 UI 线程更改任何控件的文本，即使它是从异步方法调用的。

# c# - SQL 参数化查询。添加不必要的参数

> ID：14902047
> 
> 赞同：3
> 
> 时间：2013-02-15T19:35:39.820
> 
> 标签：c#, sql-server, parameters

我在一个项目中使用参数化查询来防止 SQL 注入，我遇到了一个有趣的查询场景。我有一个查询，有时会比其他查询有更多的参数，即 where 子句更改。以下两个代码块在性能或其他方面有什么区别吗？此代码位于对象内部，因此“变量”是属性，两种方法都可以访问。

在这个中，我只在满足条件时添加参数。

```
 public bool TestQuery()
    {
        SqlCommand command = new SqlCommand();
        string query = GetQuery(command);
        command.CommandText = query;
        //execute query and other stuff
    }
    private string GetQuery(SqlCommand command  )
    {
        StringBuilder sb = new StringBuilder("SELECT * FROM SomeTable WHERE Active = 1 ");
        if (idVariable != null)
        {
            sb.Append("AND id = @Id");
            command.Parameters.Add("@Id", SqlDbType.Int).Value = idVariable;
        }
        if (!string.IsNullOrEmpty(colorVariable))
        {
            sb.Append("AND Color = @Color");
            command.Parameters.Add("@Color", SqlDbType.NVarChar).Value = colorVariable;
        }
        if (!string.IsNullOrEmpty(sizeVariable))
        {
            sb.Append("AND Color = @Size");
            command.Parameters.Add("@Size", SqlDbType.NVarChar).Value = sizeVariable;
        }
        return sb.ToString();
    } 
```

在这一个中，我每次都添加所有参数，并且仅在满足条件时才添加 where 子句参数。

```
 public bool TestQuery()
    {
        SqlCommand command = new SqlCommand(GetQuery());
        command.Parameters.Add("@Id", SqlDbType.Int).Value = idVariable;
        command.Parameters.Add("@Color", SqlDbType.NVarChar).Value = colorVariable;
        command.Parameters.Add("@Size", SqlDbType.NVarChar).Value = sizeVariable;
        //execute query and other stuff
    }
    private string GetQuery()
    {
        StringBuilder sb = new StringBuilder("SELECT * FROM SomeTable WHERE Active = 1 ");
        if (idVariable != null)
            sb.Append("AND id = @Id");
        if (!string.IsNullOrEmpty(colorVariable))
            sb.Append("AND Color = @Color");
        if (!string.IsNullOrEmpty(sizeVariable))
            sb.Append("AND Color = @Size");
        return sb.ToString();
    } 
```

根据我所做的测试，其中任何一个都可以。我个人更喜欢第二个，因为我觉得它更干净，更容易阅读，但我想知道是否有一些性能/安全原因我不应该添加未使用的参数，并且可能会是空/空字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:39:58.797

我想我会根据HABO的评论选择第一个选项，因为beargle的回答在我的情况下并没有真正起作用..

# iphone - 无法获得正确的系统时间和用户设置的时间

> ID：14902055
> 
> 赞同：1
> 
> 时间：2013-02-15T19:36:03.270
> 
> 标签：iphone, time, timezone, datepicker

我正在开发一个应用程序，我想在用户设置的时间触发本地通知，我只是在获取正确时间方面遇到问题，所以我在做什么是这样的：

```
NSDateFormatter *current = [[NSDateFormatter alloc] init];
[current setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
[current setDateFormat:@"HH:MM:SS"];
NSDate *systemTime = [NSDate date];
[current setTimeZone:[NSTimeZone systemTimeZone]];

NSLog(@"Current time %@" ,[current stringFromDate:systemTime]);
temp = [timeSetter date];//this temp is NSDATE object

NSLog(@"USer time %@" ,[current stringFromDate:temp]);
value = [temp timeIntervalSinceDate:systemTime];//This value is Nstimeinterval instance/obj. 
```

当我通过 NSLog 打印这些是我收到的结果![现在你可以 c 23.11.31.323 是实际系统时间，我得到 23.02.32。 请帮助我，在此先感谢](../Images/34902b33b6c7b9e1de1addadb9bca8ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T22:29:56.237

我刚刚运行了您的代码，并重现了类似的结果。你的问题出在`-setDateFormat:`方法上——应该是`[current setDateFormat:@"HH:mm:ss"]`——这对我来说没问题。在日期格式字符串中，M = 月（02 = 二月）、m = 分钟、S = 秒的小数部分和 s = 秒。

如果您查看有关[日期格式](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)的 Apple 文档，您会发现格式字符串是在 Unicode 标准中确定的。它们链接到各种版本；最新的[在这里](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)

# .net - Silverlight PrintDocument 超时问题

> ID：14902057
> 
> 赞同：0
> 
> 时间：2013-02-15T19:36:12.033
> 
> 标签：.net, silverlight, printing

我在尝试从 Silverlight 打印时遇到问题。问题是我正在打印几页图像，但我必须从中拉回它们的来源并不是非常快，而且有时创建页面所需的时间比 PrintPage 在失败前进行的 8 次尝试要长。

有没有办法让它尝试超过 8 次以延长尝试之间的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:01:42.057

不需要。您可以在打印前准备好所有必要的数据并在客户端缓存它们。

此外，您可以在等待准备下一张图像时阻止 PrintPage 事件中的线程（这不是一个好主意......）。

# c# - 检查 Request.QueryString 中是否存在未分配的变量

> ID：14902059
> 
> 赞同：19
> 
> 时间：2013-02-15T19:36:12.440
> 
> 标签：c#, asp.net, .net-3.5

在 ASP.NET 页面的上下文中，我可以使用 Request.QueryString 来获取 URI 的查询字符串部分中的键/值对的集合。

例如，如果我使用 加载我的页面`http://local/Default.aspx?test=value`，那么我可以调用以下代码：

```
//http://local/Default.aspx?test=value

protected void Page_Load(object sender, EventArgs e)
{
    string value = Request.QueryString["test"]; // == "value"
} 
```

**理想情况下，我想做的是检查*test*是否存在，所以我可以调用页面`http://local/Default.aspx?test`**并获取一个布尔值，告诉我查询字符串中是否存在 test。像这样的东西：

```
//http://local/Default.aspx?test

protected void Page_Load(object sender, EventArgs e)
{
    bool testExists = Request.QueryString.HasKey("test"); // == True
} 
```

所以理想情况下，我想要的是一个布尔值，它告诉我测试变量是否存在于字符串中。

我想我可以只使用正则表达式来检查字符串，但我很好奇是否有人有更优雅的解决方案。

我尝试了以下方法：

```
//http://local/Default.aspx?test

Request.QueryString.AllKeys.Contains("test"); // == False  (Should be true)
Request.QueryString.Keys[0];                  // == null   (Should be "test")
Request.QueryString.GetKey(0);                // == null   (Should be "test") 
```

这种行为与 PHP 不同，例如，我可以在其中使用

```
$testExists = isset($_REQUEST['test']); // == True 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T19:50:56.777

`Request.QueryString.GetValues(null)`将得到一个没有值的键列表

`Request.QueryString.GetValues(null).Contains("test")`将返回真

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-10T11:21:18.963

我写了一个扩展方法来解决这个任务：

```
public static bool ContainsKey(this NameValueCollection collection, string key)
{
    if (collection.AllKeys.Contains(key)) 
        return true;

     // ReSharper disable once AssignNullToNotNullAttribute
    var keysWithoutValues = collection.GetValues(null);
    return keysWithoutValues != null && keysWithoutValues.Contains(key);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T19:46:40.733

`Request.QueryString`是 a `NameValueCollection`，但只有在查询字符串采用通常`[name=value]*`格式时才会将项目添加到其中。如果不是，则为空。

如果你`QueryString`的形式是`?test=value`，那么`Request.QueryString.AllKeys.Contains("test")`会做你想做的事。否则，您将被困在`Request.Url.Query`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-14T17:53:35.377

我用这个。

```
if (Request.Params["test"] != null)
{
    //Is Set
}
else if(Request.QueryString.GetValues(null) != null && 
       Array.IndexOf(Request.QueryString.GetValues(null),"test") > -1)
{
    //Not set
}
else
{
    //Does not exist
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-18T10:37:55.583

试试这个，它解决了我的问题！它将计算查询字符串是否有值或为空，然后您可以使用键检查所需的查询字符串值。

```
 if (!Page.IsPostBack)
        {
           if (Request.QueryString.Count > 0)
            {
                if (Request.QueryString["departmentId"] != null)
                {
                    GetSurveyByDeptAndStatus(departmentId: Request.QueryString["departmentId"], status: "Not Surveyed");
                    rbListEmpsSurvey.Items[1].Selected = true;
                }

                else if (Request.QueryString["SurveyStatus"] != null)
                {
                    SatisfactionStatus = Request.QueryString["SurveyStatus"] "";
                    GetSurveyByDeptAndStatus(status: SatisfactionStatus);
                    GetDepartments();
                }}} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-01T18:13:09.947

```
Request.QueryString.ToString().Contains("test") 
```

这适用于您正在寻找单个查询字符串参数的特殊情况，例如`MyFile.aspx?test`

对于更复杂、更一般的情况，其他解决方案会更好。

# c# - 公共变量访问

> ID：14902061
> 
> 赞同：0
> 
> 时间：2013-02-15T19:36:19.673
> 
> 标签：c#, .net

我有一堂课叫`Global.cs`：

```
public class Global
{
    private string id= string.Empty;
    public string Id
    {
        get { return id;}
        set { id= value; }
    }
} 
```

现在在`Main`课堂上，

```
public class Main
{
    public Global objGlobal;
    protected void Page_Load(object sender, EventArgs e)
    {
        objGlobal= new Global();
        objGlobal.id="XX001";
    }
    public void Setdata()
    {
        // Trying to access objGlobal.id value here but it's null 
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:43:00.453

您不应该总是获取/设置“Id”而不是“id”。因为“id”是私有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:41:54.810

好吧，您的`XX`类实例不止一次。

如果您需要保留一些用户重复信息，请尝试将其存储到[SessionState](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)中。

如果您只需要包含一些静态数据的静态类，请将`static`关键字添加到类及其成员中。

# haml - HAML 降价渲染并在其中显示 ERB

> ID：14902069
> 
> 赞同：2
> 
> 时间：2013-02-15T19:36:50.540
> 
> 标签：haml, markdown, erb

我在我的一个 HAML 模板中有这个：

```
:markdown
  #{render 'home.md'} 
```

在`home.md`我有：

```
There are **#{@photo_count}** photos. 
```

查看该站点时，它会逐字输出。如何获得要插值的 @photo_count 变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:11:27.877

对于纯 Markdown 文件，我认为您无法做您想做的事情，因为格式本身不支持您的 Ruby 变量。

如果您不介意将降价文件更改为 HAML 部分文件（无需更改其内容），您可以执行类似的操作（我使用[RDiscount](https://github.com/rtomayko/rdiscount) gem 使用了类似于下面的代码；您的里程可能会有所不同与其他 Markdown 宝石...）：

**应用程序/控制器/pages_controller.rb**

```
def home
  @photo_count = 10
end 
```

**应用程序/视图/页面/home.html.haml**

```
:markdown
  #{render 'home_page'} 
```

**应用程序/视图/页面/_home_page.html.haml**

```
There are **#{@photo_count}** photos. 
```

另请参阅此 StackOverflow Q&A 以了解其他想法：

*   [如何在 Rails 3 中使用 markdown 自动渲染局部？](https://stackoverflow.com/q/4163560/567863)

# ruby-on-rails - 我可以将这两行#update_all 合并为一行吗？

> ID：14902072
> 
> 赞同：1
> 
> 时间：2013-02-15T19:36:54.873
> 
> 标签：ruby-on-rails, ruby

我写了一个迁移，它执行以下操作：

```
Event.update_all 'tom_cancelled = false', 'tom_cancelled IS NULL'
Event.update_all 'jerry_cancelled = false', 'jerry_cancelled IS NULL' 
```

我可以（如果可以的话，如何）将它们结合在一起使其干燥？我会用块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:10:07.520

除非您想在 ActiveRecord 中使用循环，否则您不能这样做，但这没有意义，因为您最终会`UPDATE`为结果集中的每条记录查询一个 + 1 个 SELECT。

在当前方式中，无论结果集中有多少条记录，您都只运行两个查询。

绝对没有必要对当前代码进行更多抽象。特别是考虑到它在迁移中运行。

# ajax - 如何将已经是全局过滤器的属性应用于方法而不运行两次？

> ID：14902073
> 
> 赞同：1
> 
> 时间：2013-02-15T19:36:57.277
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, attributes, handleerror

我`HandleErrorAttribute`通过创建自己的属性来处理 Ajax 请求期间引发的异常，从而在 MVC 中进行了扩展。该属性在这里：

```
public class AjaxAwareHandleErrorAttribute : HandleErrorAttribute
{
    public string PartialViewName { get; set; }

    public override void OnException(ExceptionContext filterContext)
    {
        ExceptionHelper.HandleException(filterContext.Exception, false); // custom static class and method
        base.OnException(filterContext);

        // Use partial view in case of AJAX request
        if (filterContext.HttpContext.Request.IsAjaxRequest())
        {
            var result = new PartialViewResult {ViewName = PartialViewName ?? "~/Views/Errors/DefaultAjaxError.cshtml"};
            filterContext.Result = result;
        }
    }
} 
```

如您所见，在`PartialViewName`为 null 的情况下存在默认行为。这是因为我在 Global.asax 文件中将其注册为全局过滤器：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new AjaxAwareHandleErrorAttribute());
} 
```

因此，按照这种设置方式，当在 Ajax 调用期间引发异常时，我具有默认行为，即将返回 DefaultAjaxError.cshtml。如果我需要自定义消息，我会创建一个视图并将其作为`PartialViewName`属性直接传递给操作，如下所示：

```
[AjaxAwareHandleError(PartialViewName = "~/Views/Errors/CustomAjaxError.cshtml")]
public ActionResult SomeAjaxControllerAction() 
```

在我有一个用控制器操作装饰的控制器的情况下，问题是`AjaxAwareHandleErrorAttribute`类中的代码运行了两次，大概是因为它是全局注册的，而且它也在方法上。有没有办法阻止它运行两次？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:40:05.073

将`filterContext.ExceptionHandled`属性设置为 true。

然后，在覆盖的顶部，检查该属性是否为真并立即返回。

# regex - Cucumber JVM：如何使用双精度值作为输入值？

> ID：14902076
> 
> 赞同：6
> 
> 时间：2013-02-15T19:37:14.980
> 
> 标签：regex, cucumber, cucumber-jvm, cucumber-junit

对于我正在尝试编写的行为测试，我需要浮点输入。如何设置我的小黄瓜字符串来查找这些值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T01:38:07.983

简单`(.+)`应该工作

```
Given I have a floating point 1.2345 number

@Given("^I have a floating point (.+) number$")
public void I_have_a_floating_point_number(double arg) throws Throwable { 
    ... 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-02T11:46:52.370

我自己的偏好是在点的任一侧指定数字，例如...

```
@Given("^the floating point value of (\\d+.\\d+)$")
public void theFloatingPointValueOf(double arg) {
    // assert something
} 
```

正如你提到的浮点输入复数，我可能会处理多个输入的轮廓，如......

```
Scenario Outline: handling lots of floating point inputs
    Given the floating point value of <floatingPoint>
    When something happens
    Then some outcome

    Examples:
        | floatingPoint |
        | 2.0           |
        | 2.4           |
        | 5.8           |
        | 3.2           | 
```

它会为每个浮点输入运行一个场景

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-15T14:40:00.840

我使用表格

```
 @When("^We change the zone of the alert to \\(([0-9\\.]+),([0-9\\.]+)\\) with a radius of (\\d+) meters.$")
 public void we_change_the_zone_of_the_alert_to_with_a_radius_of_meters(double latitude, double longitude, int radius) 
```

所以`[0-9.]+`做交易:)

照顾当地的黄瓜。`language:fr`例如，如果您使用的是数字`,`作为分隔符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-03T13:12:47.603

**你应该转义浮点数`(\\d+)`**

例子

```
Given I have a floating point 1.2345 number

@Given("^I have a floating point (\\d+) number$")
public void I_have_a_floating_point(double arg){

} 
```

# javascript - Javascript计算不返回文本框

> ID：14902081
> 
> 赞同：0
> 
> 时间：2013-02-15T19:37:41.617
> 
> 标签：javascript

我正在做一个简单的表格，用户输入他们的长度、宽度、高度和件数，然后计算立方英尺，并在表格中显示答案。所以我在这里尝试这样做，但我不知道为什么没有显示答案。身份证都是对的。我尝试使用 ParseFloat 并在计算中的每个变量周围加上括号，但这似乎没有任何作用。问题可能是什么？

谢谢你看。

```
<HTML>
<HEAD>
<TITLE>Cubic Feet</TITLE>
<SCRIPT LANGUAGE="JavaScript">

function Calculate()
{
var qty1 = document.getElementById('q1').value;
var len1 = document.getElementById('l1').value;
var width1 = document.getElementById('w1').value;
var height1 = doument.getElementById('h1').value;
var cube1 = qty1*(len1*width1*height1);

form.cuft1.value = cube1.tofixed(2);

}

function ClearForm(form)
{
form.q1.value = "";
form.l1.value = "";
form.w1.value = "";
form.h1.value = "";
form.cuft1.value = "";
}

// end of JavaScript functions -->
</SCRIPT>
</HEAD>

<BODY>

<FORM NAME="Calculator" METHOD="post">

<P><INPUT TYPE="button" VALUE="Calculate" name="AddButton" onClick="Calculate(this.form.q1.value, this.form.h1.value, this.form.w1.value, this.form.l1.value, this.form)">
<INPUT TYPE="button" VALUE="Clear" name="ClearButton" onClick="ClearForm(this.form)">

<p>
<table>
<tr>
<td> Container 1 Qty <input type="TEXT" id="q1" value=""></td>
<td> Length <input type="TEXT" id="l1" value=""></td>
<td> Width <input type="TEXT" id="w1" value=""></td>
<td> Height <input type="TEXT" id="h1" value=""></td>
<td> Cu.Ft. <input type="TEXT" id="cuft1" value=""></td>
</tr>
</table>
</FORM>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:40:16.337

```
this.form.q1.value 
```

查找带有**name** `q1`的输入。

改用这个：

```
document.getElementById('q1').value 
```

您在其他方面也有同样的错误。最好总是使用 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:41:44.717

你有一系列愚蠢的错误：

1.  `documentgetElementById('w1').value;`应该`document.getElementById('w1').value;`

2.  `doument.getElementById('h1').value;`应该`document.getElementById('h1').value;`

3.  `form`没有定义。试试`var form = document.forms[0]`。

4.  `cube1.tofixed(2);`应该`cube1.toFixed(2);`

所有这些错误都可以通过打开浏览器的开发者控制台轻松捕获...

固定的工作版本：http: [//codepen.io/anon/pen/bzcdx](http://codepen.io/anon/pen/bzcdx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:40:10.257

尝试

```
document.getElementById("cuft1").value = cube1.tofixed(2); 
```

# haskell - 例外：模式匹配失败 Haskell

> ID：14902084
> 
> 赞同：0
> 
> 时间：2013-02-15T19:37:58.603
> 
> 标签：haskell, pattern-matching, non-exhaustive-patterns

我正在尝试实现 Haskell 的标准单词功能。我正在使用 State Monad 来解决问题。

我的代码是：

```
type WorS = ([String],String,String)

words' :: State WorS [String]
words' = do
           (lwords, words, x:xs) <- get
           case x:xs of
           (' ':xs) -> (put (words:lwords, [], xs) >> words')
           ([]) -> return lwords
           (_:xs)-> (put (lwords, words ++ [x], xs) >> words')

run_word' ::  String ->[String]
run_word' x = reverse $ fst (runState words' ([], [], x)) 
```

当我做：

```
run_word' "guns and roses" 
```

我收到此错误：

```
Exception: Pattern match failure in do expression 
```

代码在 ghci 中加载，没有任何错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:41:40.807

```
 (lwords,words,x:xs)<-get 
```

`x:xs`匹配具有至少一个元素的列表（`x`成为第一个元素，并`xs`成为列表的其余部分），因此当元组的第三个成员为 时，您会遇到模式匹配失败`[]`。

解决方法：更换

```
 (lwords,words,x:xs)<-get
       case x:xs of 
```

和

```
 (lwords,words,xs)<-get
       case xs of 
```

（并考虑在函数后面使用不同的变量名称：当您有两个或多个同名变量时，它会变得混乱。）

**编辑：**如果您打开警告（将`-Wall`标志传递给 ghc/ghci），您将在编译时收到警告，即模式在运行时可能无法匹配。（您还会收到有关让一个`xs`变量隐藏另一个`xs`变量的警告，称为阴影。）

# java - 不确定如何在 Java 中编写方法，如 c 中的模板

> ID：14902087
> 
> 赞同：0
> 
> 时间：2013-02-15T19:38:10.817
> 
> 标签：java

我想实现一个带有签名的函数

```
static boolean checkAnyOutOfBoundary(int[] index,ArrayList<ArrayList<T>> list) 
```

我想用其他自创类（DocScore）替换 T。我试图用 Object 代替 T。但是当我尝试实例化列表实例时，比如

```
ArrayList<ArrayList<Object>> DocScoreList = new ArrayList<ArrayList<Object>>();
for (int i = 0; i < index.length; i++)
DocScoreList.add(root.children.get(i).docList);

The type of root.children.get(i).docList is ArrayList<DocScore> 
```

我无法将元素添加到 DocScoreList。有人知道我该如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:56:33.753

因此，您正在向`ArrayList<DocScore>`a添加一个，`ArrayList<ArrayList<Object>>`但 add 方法需要一个`ArrayList<Object>`.

你能提供一个需要的`ArrayList<DocStore>`地方`ArrayList<Object>`吗？不，因为[一袋香蕉不是一袋水果](https://stackoverflow.com/a/1794870/18573)

所以`DocScoreList`必须是一个可以添加`ArrayList`的东西。`ArrayList<DocStore>`一些例子是：

*   `ArrayList<DocStore>`实际类型
*   `List<DocStore>`因为`ArrayList<T>` *是一个* `List<T>`
*   `ArrayList<? extends Object>`（直接或间接）扩展的*某些未知类型*的列表`Object`。由于`DocStore`符合标准，`? extends Object`这将起作用。
*   `List<? extends Object>`
*   等等。你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:47:50.220

因为即使`Bar`是 的子类`Foo`，ArryList 也不是 ArrayList 的超类。

改变

```
ArrayList<ArrayList<Object>> DocScoreList = new ArrayList<ArrayList<Object>>(); 
```

到

```
ArrayList<ArrayList<? extends Object>> DocScoreList = new ArrayList<ArrayList<? extends Object>>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:48:01.940

```
static <T> boolean checkAnyOutOfBoundary(int[] index,ArrayList<ArrayList<T>> list) 
```

调用它的示例：

```
boolean b = checkAnyOutOfBoundary( new int[]{0,1}, new ArrayList<ArrayList<String>>()); 
```

# asp.net - 正确编写库类

> ID：14902088
> 
> 赞同：1
> 
> 时间：2013-02-15T19:38:11.737
> 
> 标签：asp.net, dll, webforms

这是我正在编写的第一个库类，我觉得我需要加载该主题但找不到最佳资源。我有一个网络表单项目，它上传一个 pdf 并为其创建一个 qrcode 并将其放置在文档中。我需要创建一个库，但不知道从哪里开始或确切的结构。库类中的每个方法都是它自己的子类？或者我可以将它们全部合二为一吗？什么是专业的解决方法。

这是我的 Web 表单应用程序的一部分，我需要为其创建一个库：

```
void UpdateStudentSubmissionGrid()
    {
        var usr = StudentListStep2.SelectedItem as User;
        var lib = AssignmentListStep2.SelectedItem as Library;
        if (usr == null || lib == null) return;

        using (var dc = new DocMgmtDataContext())
        {
            var subs =
                (from doc in dc.Documents
                     where doc.OwnedByUserID == usr.ID && doc.LibraryID == lib.ID
                     select new {DocID = doc.ID, Assignment = doc.Library.Name, Submitted = doc.UploadDT})
                  .OrderByDescending(c => c.Submitted)
                  .ToList();

            StudentSubmissionGrid.DataSource = subs;

        }
    } 
```

我如何从这种方法开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:01:58.710

从外观上看，您将此功能用于单个网页。您可以从任何事件（即用户点击提交按钮）调用该函数。上。单击按钮，它将创建一个 onclick 事件。从里面调用代码 UpdateStudentSubmissionGrid(); 只要确保该函数没有嵌套在另一个事件或函数中。Webforms 已经是一个类，您只是在类中放置一个函数。

# javascript - 使用 Chrome 在 jsp 页面中调试 javascript？

> ID：14902094
> 
> 赞同：16
> 
> 时间：2013-02-15T19:39:04.143
> 
> 标签：javascript, debugging, google-chrome

有没有办法调试jsp页面内的javascript，就像chrome这样：

```
<script>
var error = "${error}";

if(error != ""){
    alert(error);
}
</script> 
```

在开发人员工具窗口中，我只能找到 .js 文件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-15T19:53:05.690

放魔法字`debugger`，打开开发者工具，重新加载页面调试。它像断点一样工作：

```
<script>
var error = "${error}";

debugger

if(error != ""){
    alert(error);
}
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T19:43:11.250

您不会在浏览器中看到 JSP 文件，因为 JSP 是服务器端的，在那里被解释并最终转换为 HTML，然后发送到您的浏览器。在 Chrome 开发工具中，您的 Sources 选项卡应该在左侧的源列表中列出页面本身（您的页面的完整标记）（它可以命名为您为页面命名的任何名称，或者它可能被命名为类似的通用名称`(program)`）。您可以在其中找到您的 JavaScript 代码（因为您放入 JSP 中的 JS 最终应该已经呈现到页面）并且您应该能够在其中放置断点并使用普通`.js`文件执行任何其他操作。

# windows - MSI 安装程序远程失败 - 已安装“较新版本”，即使在卸载后也是如此

> ID：14902097
> 
> 赞同：3
> 
> 时间：2013-02-15T19:39:09.303
> 
> 标签：windows, service, installation, windows-installer

在我们的自动化构建中，我开始出现相当奇怪的行为。我有一个非常简单的 Windows 服务 .msi（内置于 Visual Studio 2010），它在我们的中央构建/存储库服务器上编译，上传到我们的开发服务器，然后从构建/存储库服务器远程安装（命令行通过 ssh 使用 plink）在开发服务器上。

这已经工作了很长时间，直到最近自动化构建开始失败 100% 的时间。msi 的详细安装日志表明“已安装此产品的较新版本”。我远程进入开发服务器，检查了 msi，并且自己在服务器上手动安装它*没有问题*（通过命令行和 GUI）。然后我从“程序和功能”窗口中卸载了该服务，验证了文件和条目已被删除，再次尝试从构建服务器远程安装它，并再次得到完全相同的错误。该服务只是不会远程安装，因为它认为仍然安装了较新的服务（即使我已经卸载了它），但我可以自己手动完成。

**编辑**

添加一些日志文本。

```
Action start 15:47:16: AppSearch.
MSI (s) (B8:F0) [15:47:16:265]: Doing action: FindRelatedProducts
Action ended 15:47:16: AppSearch. Return value 1.
MSI (s) (B8:F0) [15:47:16:267]: Using cached product context: User non-assigned for product: BA4139E4B48F8264ABFF918A7B583A0B
MSI (s) (B8:F0) [15:47:16:267]: Using cached product context: User non-assigned for product: BA4139E4B48F8264ABFF918A7B583A0B
MSI (s) (B8:F0) [15:47:16:267]: Using cached product context: User non-assigned for product: BA4139E4B48F8264ABFF918A7B583A0B
MSI (s) (B8:F0) [15:47:16:267]: Using cached product context: User non-assigned for product: BA4139E4B48F8264ABFF918A7B583A0B
MSI (s) (B8:F0) [15:47:16:267]: Using cached product context: User non-assigned for product: BA4139E4B48F8264ABFF918A7B583A0B
MSI (s) (B8:F0) [15:47:16:267]: Using cached product context: User non-assigned for product: BA4139E4B48F8264ABFF918A7B583A0B
Action start 15:47:16: FindRelatedProducts.
MSI (s) (B8:F0) [15:47:16:267]: PROPERTY CHANGE: Adding NEWERPRODUCTFOUND property. Its value is '{4E9314AB-F84B-4628-BAFF-19A8B785A3B0}'.
MSI (s) (B8:F0) [15:47:16:268]: Doing action: ERRCA_CANCELNEWERVERSION
Action ended 15:47:16: FindRelatedProducts. Return value 1.
MSI (s) (B8:F0) [15:47:16:269]: Note: 1: 2235 2:  3: ExtendedType 4: SELECT `Action`,`Type`,`Source`,`Target`, NULL, `ExtendedType` FROM `CustomAction` WHERE `Action` = 'ERRCA_CANCELNEWERVERSION' 
Action start 15:47:16: ERRCA_CANCELNEWERVERSION.
MSI (s) (B8:F0) [15:47:16:269]: Product: Product.Services -- Unable to install because a newer version of this product is already installed.

Unable to install because a newer version of this product is already installed.
Action ended 15:47:16: ERRCA_CANCELNEWERVERSION. Return value 3.
Action ended 15:47:16: INSTALL. Return value 3. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-10-12T22:14:58.770

我收到了与@Tom 收到的完全相同的错误：“- 已安装较新版本”

我能够按照以下确切步骤进行修复： 1\. 在启用详细日志记录的情况下运行 MSI

```
msiexec /i "{Path to msi}.msi" /L*V "c:\myLog.log" 
```

2\. 打开从上述命令生成的日志文件并复制该行中显示的 GUID

```
FindRelatedProducts: Found application: {FB0B54D2-9C47-4196-BF0E-B6EEBF754E22} 
```

3.  使用复制的 GUID，运行以下命令

    msiExec /x {FB0B54D2-9C47-4196-BF0E-B6EEBF754E22}

4.  此时，旧服务已被卸载，然后我继续使用 MSI 安装服务，没有任何问题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T21:18:46.060

> MSI (s) (B8:F0) [15:47:16:267]：属性更改：添加 NEWERPRODUCTFOUND 属性。其值为“{4E9314AB-F84B-4628-BAFF-19A8B785A3B0}”。

听起来机器上某处有旧版本的安装，即使它可能不会出现在程序和功能中。我会尝试以下方法，看看它是否能解决您的问题：

1.  尝试通过命令行卸载`msiexec /x {4E9314AB-F84B-4628-BAFF-19A8B785A3B0}`

2.  在注册表中搜索产品代码`{4E9314AB-F84B-4628-BAFF-19A8B785A3B0}`以查看是否有以前安装的残留物。如果您找到该产品代码，您可以尝试手动删除这些条目（风险自负），看看是否能解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-02T16:31:54.100

另一个对我有用的解决方案是：

1.  在 VS 解决方案中选择您的安装项目，然后按 F4 显示属性窗口
2.  通过单击此值右侧的按钮更改 ProductCode 和 UpgradeCode 的 GUID。将出现一个新的模式窗口，您只需按“新代码”按钮

**请记住，以前的安装将保留在 Windows 注册表中，您应该卸载它们。这仅是在您由于错误（例如使用设置模板）而对不同的 VS 设置具有相同 GUID 的情况下**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-29T12:08:11.497

如果您在解决方案资源管理器中选择安装文件并按**F4**，您将获得安装文件的属性。将属性**“DetectNewerVersion”**设置为 false 并重新安装

祝你好运

# nsurlconnection - 异步 NSURLConnection 方案教程

> ID：14902102
> 
> 赞同：3
> 
> 时间：2013-02-15T19:39:30.930
> 
> 标签：nsurlconnection

我正在寻找一个关于使用 NSURLConnection 异步请求的好教程。我一直在 stackoverflow 和 Google 中四处寻找，但找不到。这可能是无数这样的问题的副本。但是请指导我正确的教程，我之前使用过 ASIHTTPRequest，但我之前没有使用过 Apple 提供的库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:01:45.300

我会为您提供自己编写的一个，但是我强烈建议使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)，它是 NSURLConnection / NSURLRequest 系统之上的一个包装器，具有更清晰的流程，您还可以使用基本的 NSURLRequests / Connections 以及常规的 NSOperationQueues。图书馆还使用可可豆荚，老实说，你真的不能再那么干净了。

```
NSOperationQueue *mainQueue = [[NSOperationQueue alloc] init];
[mainQueue setMaxConcurrentOperationCount:5];

NSURL *url = [NSURL URLWithString:@"http://192.168.0.63:7070/api/Misc/GetFuelTypes"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];

[request setHTTPMethod:@"GET"];
[request setAllHTTPHeaderFields:@{@"Accepts-Encoding": @"gzip", @"Accept": @"application/json"}];

[NSURLConnection sendAsynchronousRequest:request queue:mainQueue completionHandler:^(NSURLResponse *response, NSData *responseData, NSError *error) {
    NSHTTPURLResponse *urlResponse = (NSHTTPURLResponse *)response;
    if (!error) {
        NSLog(@"Status Code: %li %@", (long)urlResponse.statusCode, [NSHTTPURLResponse localizedStringForStatusCode:urlResponse.statusCode]);
        NSLog(@"Response Body: %@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
    }
    else {
        NSLog(@"An error occured, Status Code: %i", urlResponse.statusCode);
        NSLog(@"Description: %@", [error localizedDescription]);
        NSLog(@"Response Body: %@", [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]);
    }
}]; 
```

mainQueue 对象用于路由请求并管理一次可以发送多少个请求。这可以用在很多方面，我倾向于将它们用于分类请求（身份验证、主要、上传队列）

一旦进入块内，您将使用返回的响应构建本地 NSHTTPURLResponse。如果您希望返回状态代码，则需要这样做。（不存在于标准 NSURLResponse 对象中）

responseData 是通常可以直接转换为字符串或通过反序列化器运行以获得人类可读数据的数据。

非常简单的解释，如果您不知道如何管理来自同一个对象的多个请求（可能是我更喜欢块的原因），代表会给您带来麻烦：-）

就像总是委托或阻止您希望在收到响应后触发您的 UI 进行更新，但不要等待请求完成，如果您将数据加载到表中，您将调用加载请求并提供某种形式进度 hud 告诉他们正在发出请求，一旦收到数据，您就移除 hud 并重新加载表数据。HUD 必须在主线程上调用，所以你肯定需要处理它，我通常只是构建扩展并使用 performSelectorOnMainThread，但是更好的方法可能是将你的函数包装在 dispatch_async 中并调用你是 hud 之外的显示/隐藏代码那。

# mysql - 插入后的mysql触发器将数据发送到另一个mysql主机

> ID：14902108
> 
> 赞同：0
> 
> 时间：2013-02-15T19:39:55.107
> 
> 标签：mysql, triggers

插入后是否可以使用触发器将 mysql 表克隆到远程服务器？还是存在更好的解决方案？谢谢你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:15:11.837

有可能的。您需要研究的是创建一个 Federates 存储引擎。这将允许您在数据库服务器中创建一个“代理”表，该表指向另一台服务器上的真实表。默认情况下禁用此设置，因此您需要更改它。

您的触发器将按以下方式运行：

在某些表 T 上插入您的 FEDERATED 表 FT。然后，这将连接到远程服务器，进行身份验证并执行操作。如果您要执行几个将使用此触发器执行的操作，我会非常厌倦滞后和延迟。

# html - 为什么 Firefox 不能使用给定的 CSS 正确显示/工作？

> ID：14902110
> 
> 赞同：0
> 
> 时间：2013-02-15T19:39:58.683
> 
> 标签：html, css, internet-explorer, google-chrome, firefox

我在 IE 或 Chrome 中看到页面没有问题，并且上传按钮在两者中都可以使用。但在 FireFox 中，它不能正确显示宽度，上传按钮也不能正常工作。

我似乎找不到代码有任何问题...这是整个页面

```
<!DOCTYPE html>
<html>
<head>
<style>
*{
margin:0;
padding:0;
font-family:verdana;
color:#3f3f3f;
font-size:14px;
}
html,body{
height:100%;
}
#container{
width:1024px;
margin:0 auto;
height:100%;
}
#content{
min-height:100%;
background-color:#fff;
width:804px;
padding:5px;
float:left;
display:inline;
-moz-border-radius: 10px;
border-radius: 10px;
margin-right:10px;
}
body{
background-color:rgb(228, 228, 228);
}
table{
width:450px;
margin:0 auto;
}
table td{
padding:10px 5px;
}
table th{
background-color:rgb(116, 116, 116);
color:#fff;
padding:10px;
text-align:left;
font-weight:normal;
font-size:16px;
}
table label{
display:block;
padding-bottom:3px;
font-weight:bold;
}
table input[type=text], table select{
display:block;
color:rgb(116, 116, 116);
padding:8px;
line-height:20px;
border:1px solid rgb(183, 187, 202);
font-weight:bold;
vertical-align: middle;
background-color:rgb(255, 255, 255);
width:260px;
}
table select{
width:277px;
}
#txtEmail, #ctitle, #txtDesc{
width:550px;
}

/* Upload Button */
table input[type=file]{
text-align: right;
/* start of transparency styles */
opacity:0;
-moz-opacity:0;
filter:alpha(opacity:0);
/* end of transparency styles */
z-index:2;
cursor:pointer;
}
#fileName{
width:196px;
display:inline;
margin:0;
}
.uploadbtn{
display:block;
padding:0;
margin:0;
font-weight:normal;
width:60px;
display:inline-block;
height:38px;
line-height:38px;
vertical-align:middle;
background-color:#3f3f3f;
color:#fff;
text-align:center;
float:right;
cursor:pointer;
}
/*********************/
</style>
</head>
<body>
<div id="container">
<div id="content">
<table cellpadding="0" cellspacing="0">
<tr><th colspan="2">Informacion de Contacto</th></tr>
<tr>
    <td>
        <label>Nombre</label><input type="text" maxlength="20" id="txtName" name="txtName"/>
    </td>
    <td>
        <label>Apellido</label><input type="text" maxlength="20" id="txtLastName" name="txtLastName"/>
    </td>
</tr>
<tr>
    <td>
        <label>Telefono</label><input type="text" maxlength="13" id="txtTel1" name="txtTel1"/>
    </td>
    <td>
        <label>Telefono Adicional</label><input type="text" maxlength="13" id="txtTel2" name="txtTel2"/>
    </td>
</tr>
<tr>
    <td colspan="2">
        <label>Email</label><input type="text" maxlength="100" id="txtEmail" name="txtEmail"/>
    </td>
</tr>
<tr><th colspan="2">Informacion del Clasificado</th></tr>
<tr>
    <td colspan="2">
        <label>Titulo</label><input type="text" maxlength="100" id="ctitle" name="ctitle"/>
    </td>
</tr>
<tr>
    <td colspan="2">
        <label>Descripcion</label><textarea name="cbody" cols="78" rows="10" id="cbody" ></textarea>
    </td>
</tr>
<tr>
    <td>
        <label>Precio</label><input type="text" maxlength="9" id="txtPrecio" name="txtPrecio"/>
    </td>
    <td>
        <label>Comentario (OMO,FIJO,etc)</label><input type="text" maxlength="10" id="txtPriceComment" name="txtPriceComment"/>
    </td>
</tr>
<tr>
    <td>
        <label>Tipo de Clasificado</label>
        <select>
            <option>Venta</option>
            <option>Adopcion</option>
        </select>
    </td>
    <td>
        <label>Categoria</label>
        <select>
            <option>Perros</option>
            <option>Gatos</option>
        </select>
    </td>
</tr>
<tr>
    <td>
        <label>Pueblo</label>
        <select>
            <option>Area Metro</option>
            <option>Bayamon</option>
        </select>
    </td>
    <td>
        <label>Foto</label>
        <input type="text" maxlength="100" id="fileName" name="fileName"/>
        <label class="uploadbtn">Upload
            <input type="file" name="userfile" size="20" onchange="javascript: document.getElementById('fileName').value = this.value"/>
        </label>
    </td>
</tr>
</table>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:27:28.453

发生的事情是每个浏览器都以不同的方式呈现**输入文件**元素，而 Firefox 正在将您的**输入文件**从您的**label**呈现出来。所以当你点击你的**标签**时，你并没有点击**输入文件**。我说清楚了吗？

请参阅本教程如何创建自定义**输入文件**跨浏览器兼容。

[http://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

让我知道这是否对您有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:49:51.270

您不应该忘记样式表上的 mime 类型

```
<style></style> 
```

至

```
<style type="text/css"></style> 
```

# uitableview - 使用 UITabBar 来回切换时 UIScrollView 呈现不同

> ID：14902111
> 
> 赞同：0
> 
> 时间：2013-02-15T19:39:58.743
> 
> 标签：uitableview, uiscrollview

我已经在这个问题上苦苦挣扎了几天，我似乎无法在网上找到任何具体的解决方案，所以就在这里......

**场景很简单：**我希望表格视图在滚动视图中展开（即不可滚动），因此我需要在滚动视图中调整视图大小和移动视图。通过对 UIScrollView 进行子类化并重新实现 layoutSubviews 方法（见下文），我已经很容易实现这一点。

**layoutSubViews 的实现：**

```
- (void) layoutSubviews
{
 [super layoutSubviews];
  //Resize the UITableView containing all the rows (i.e. it should not scroll within the tableview)
  UITableView *bt = [self.subviews objectAtIndex:0];
  //1 - Set the height of the table cells

  //2 - Calculate the total height for the tableview (i.e.: numberOfRows*rowHeight)
  bt.frame = CGRectMake(bt.frame.origin.x, bt.frame.origin.y, bt.frame.size.width, ([bt numberOfRowsInSection:0]*bt.rowHeight));

  //Move down the note text view, so that it don't overlaps the table.
  UITextView *note = [self.subviews objectAtIndex:1];
  note.frame = CGRectMake(note.frame.origin.x, (bt.frame.origin.y + bt.frame.size.height)+15, note.frame.size.width, note.frame.size.height);

  //Set the content size to the scroll view.
  //Note: If the note is hidden, then we should not include it (the same goes for the padding between note and table)
  [self setContentSize: CGSizeMake(self.contentSize.width, bt.frame.size.height + note.frame.size.height)];

  UIEdgeInsets insets = UIEdgeInsetsMake(0.0f, 0.0f, /*padding@bottom*/50.0f, 0.0f);
  [self setContentInset:insets];
  [self setScrollIndicatorInsets:insets];
} 
```

上面的实现解决了我的问题并完美呈现。试着把它想象成一个配方，其中表格视图中的每一行都是一种成分——这就是我的目标。

我的应用程序正在使用 UITabBar 并且一切都呈现并表现良好，除了我在滚动视图中向下滚动一点然后切换到另一个选项卡并返回的情况。然后滚动视图以某种方式被更改，并且不再可能滚动到顶部（取决于您在切换选项卡之前向下滚动了多少）并且也呈现出有些奇怪。

**第 1 步：** Step1.png（参见下面的 URL）

向下滚动以能够看到展开的表格视图下方的文本视图

**第 2 步：** step2-switched-back.png（参见下面的 URL）

切换到第二个选项卡并返回到第一个，导致奇怪的渲染行为和滚动行为，其中不再可能通过滚动滚动视图到达 tableview 中的第一行。

我创建了一个示例项目，因为我相信代码自己会说话，我希望那里的人可以看穿它并指出我是否做错了什么，或者是否有任何方法可以解决这个问题。 **项目和屏幕截图可在：** [http ://eddiex.se/tmp/demo/](http://eddiex.se/tmp/demo/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:35:04.177

我现在想出了一个替代解决方案，它可以提供与我的目标相同的渲染，即在 UIScrollView 中扩展 UITableView。

**解决方案**

我删除了 UIScrollView（Editor->Unembed）并将 UITableView 的大小设置为覆盖整个屏幕（在 UI 编辑器中），并且我在 UI 编辑器中直观地将 UITextFieldView 移动到 UITableView（作为页脚视图）。

扩展表中最后一行下方的微小阴影（渐变视图）也很容易在此解决方案中实现，因为不需要更改；UITableView 的委托实现了 viewForFooterInSection 方法，它返回一个简单的渐变视图。

# c# - 在内存中加载 XDocument

> ID：14902117
> 
> 赞同：0
> 
> 时间：2013-02-15T19:40:12.550
> 
> 标签：c#, linq-to-xml

这可能是一个非常简单的问题，但我正在学习！所以有些编程可能看起来有点业余！

我正在开发一个应用程序，它使用 WizardPages 控件来创建一个隐藏选项卡的类似向导的界面。向导有 5 个“步骤”，每个步骤都有自己的选项卡。

在向导的第 3 步中，根据用户选择加载一个 XML 文档。他们可以选择加载默认 XML 或提供自定义 XML 文件的路径。在步骤 3 的按钮单击事件中调用 loadXML() 方法，if 语句说“如果选择了默认选项，则从默认路径加载，否则从用户指定的路径加载”。然后，XML 的这种加载会在步骤 4 中填充一个列表框。我正在使用 XML to LINQ，正如您从下面的代码片段中看到的那样。

```
 private void loadXML()
    {
        if (configFilePathTextBox.Enabled == true)
        {
            // Load XML from that path
            XDocument config = XDocument.Load(configFilePathTextBox.Text);
            // Populate next screen
            IEnumerable<XElement> elList =
                from el in config.Descendants("software_entry")
                select el;
            foreach (XElement el in elList)
                listBox1.Items.Add(el.Attribute("name"));
            MessageBox.Show("Configuration file loaded successfully.");
        }
        else
        {
            // Load XML from default path
            XDocument config = XDocument.Load(Application.StartupPath + @"\config.xml");
            // Populate next screen
            IEnumerable<XElement> elList =
                from el in config.Descendants("software_entry")
                select el;
            foreach (XElement el in elList)
                listBox1.Items.Add(el.Attribute("name"));
            MessageBox.Show("Configuration file loaded successfully.");
        }
    } 
```

这可行，但是有没有办法加载 XDocument 以便可以在所有方法中访问它？事实上，每次我想对它做任何事情时，我都必须使用 XDocument.Load 方法，并且在每次加载时，我必须使用相同的 if 语句来确定要加载哪个文件（默认或自定义）。

这真的很令人困惑，因为在我的应用程序的第 5 步中，我正在尝试创建一个 foreach 循环来遍历第 4 步中的列表框中的每个条目（由此 XML 文档填充），根据列表框（这只是软件的名称，其他属性包括文件类型、路径等），然后将一行写入包含所有这些信息的批处理文件。事实上，考虑到 XDocument 加载的 if 循环，我不知道如何正确格式化这个循环。

我考虑过使用[此处](https://stackoverflow.com/questions/8123724/linq-to-xml-keep-xdocument-loaded)描述的第二种方法，但我不确定如何将我的第三步中的用户选择元素合并到其中。我只是有点困惑！

谢谢你的帮助。我不擅长解释问题，所以如果您需要更多信息/说明，请提出问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:59:08.907

您需要在[公共](http://msdn.microsoft.com/en-us/library/yzh058ae%28v=vs.110%29.aspx)或[内部](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.110%29.aspx)范围内声明它。例如，其他方法可以访问的类的[公共](http://msdn.microsoft.com/en-us/library/yzh058ae%28v=vs.110%29.aspx)或[内部属性。](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.110%29.aspx)不过，您似乎并不关心这一点，因为您只想使用 program.cs 文件。

要将其用作字段，您的代码可能变为：

```
public class Program
{
    XDocument document;

    private void loadXML()
    {            
        if (configFilePathTextBox.Enabled == true)
        {
            document = XDocument.Load(configFilePathTextBox.Text);
        }
        else
        {
            document = XDocument.Load(Application.StartupPath + @"\config.xml");
        }

        IEnumerable<XElement> elList =
            from el in document.Descendants("software_entry")
            select el;

        foreach (XElement el in elList)
            listBox1.Items.Add(el.Attribute("name"));

        MessageBox.Show("Configuration file loaded successfully.");
    }
} 
```

# c++ - .h 和 .cpp 文件中的默认参数

> ID：14902129
> 
> 赞同：55
> 
> 时间：2013-02-15T19:41:01.267
> 
> 标签：c++, oop, header-files

**编译器：** *g++ 4.7.2*

行。所以我对`.h`和`.cpp`文件中的默认参数感到困惑。很多地方（包括本站）都提到，默认参数只能在 .h 文件中添加，不能在 .cpp 文件中添加。但是，这段代码证明它是错误的：

**测试1.h**

```
#pragma once

#include <iostream>
using namespace std;

class Class{
public:
    Class(int, int, int=1);
}; 
```

**测试1.cpp**

```
#include "test1.h"

Class::Class(int a, int b=2, int c)
{
    cout<<a<<" "<<b<<" "<<c<<endl;
}

int main()
{
    Class a(1);
    return 0;
} 
```

现在，根据我的测试，可以将默认参数添加到`.cpp`文件中。但是，存在以下限制：

1.  `.cpp`和文件中存在的默认参数`.h`不应重叠。即`Class(a, b, c=1)`（在 .h 文件中）和 `Class::Class(a,b,c=2)`（在 .cpp 文件中）无效。

    众所周知的规则是，一旦添加了默认参数，之后声明的所有变量也必须包含默认值。让我们称之为*defpara*规则。现在，

2.  函数声明（`.h`文件）中声明的变量应遵守*defpara*规则，即`Class(a, b=2, c)`（在 .h 文件中）无论在 .cpp 文件中声明什么都是无效的。

3.  如果考虑具有默认值的变量（作为`.h`和`.cpp`文件中默认值的交集），它将遵循*defpara*规则。即`Class(a, b, c=1)`（在.h 文件中）和 `Class::Class(a,b=2,c)`（在`.cpp`文件中）是有效的。但是`Class(a, b, c=1)`（在 .h 文件中）和`Class::Class(a=2,b,c)`（在`.cpp`文件中）是无效的。

所以....我是对的，错的？？？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-02-15T19:50:19.303

如果函数在头文件中声明，则默认值应始终放在头文件中。

这是因为编译器将为使用您的类的所有编译单元使用头文件[除非您“顽皮”并且不要在任何应该去的地方使用头文件]。

由于编译器在编译调用函数的代码（在本例中为构造函数）时添加了默认参数，因此 .cpp 文件中的默认值无关紧要。

当然，在这种情况下，头文件的“用户”只有一个，调用构造函数的地方也只有一个。但是在 .cpp 文件中设置默认值通常是错误的 [除非它是本地函数]。

如果你“混合”默认值，你会得到非常“有趣”的错误——例如，如果你的 .cpp 有一个默认值，而头文件有一个不同的默认值。如果你真的很熟练，你甚至可以让编译器为函数的不同调用生成不同的默认值，如果代码依赖于某个特定值的默认值，这几乎肯定会导致一些麻烦。并且不要试图将默认值从标头复制到 .cpp 文件“只是为了更容易查看”。如果有人更改了默认值，那么几乎可以肯定这两个地方都不会更改，甚至可能更糟：更改错误的默认值，因此它不会按照预期进行。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-02-15T19:48:41.437

这仅适用于您的 main 函数也在您的`test.cpp`文件中，因此它会看到在您的类的实现中指定的默认参数。如果将`main`函数放在仅包含 的单独文件中`test.h`，则此代码将无法编译。

另一种看待它的方式是，当其他一些包含时`test.h`，代码所看到的只是在中声明的内容`test.h`，因此不会使用放在其他地方的默认参数。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-15T19:58:26.673

.h 与 .cpp 是一个红鲱鱼。规则是默认参数可以在函数声明和函数定义中使用。您不能重新定义默认参数，甚至不能重新定义相同的值。所以这是不合法的：

```
void f(int, int = 3);
void f(int, int = 3); // error: redefinition of default argument 
```

但是，后续声明可以添加默认参数：

```
void f(int, int = 3);
void f(int = 4, int = 3);
f(); // calls f(4, 3); 
```

此外，在调用函数的任何时候，都可以使用在该点看到的默认参数：

```
void f(int, int =3);
f(1); // calls f(1, 3);
void f(int = 4, int = 3);
f(1); // calls f(1, 3);
f();  // calls f(4, 3); 
```

在原始示例中，.h 文件定义了一个默认参数，任何使用该标头的翻译单元都可以使用该默认参数：

```
Class c3(1, 2, 3);
Class c2(1, 2); 
```

此外，.cpp 文件定义了一个额外的默认参数，因此在该声明之后，可以使用一个、两个或三个参数调用构造函数：

```
Class c3(1, 2, 3);
class c2(1, 2);
class c1(1); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T19:55:43.430

在 C++ 中，文件的定义没有默认参数之类的东西——它只存在于声明中。

发生的情况是编译器看到一个缺少后面参数的函数。如果这些是默认值，它可以填充空白以构造目标代码来调用函数，就好像函数调用具有这些参数一样。

**PS：** Item 38/Scott Myers/Effective C++ - 永远不要重新定义继承的默认参数值。

# java - 简单引用 Oracle 的 imq.jar 和 jms.jar 是不是很常规？

> ID：14902132
> 
> 赞同：1
> 
> 时间：2013-02-15T19:41:14.513
> 
> 标签：java, jakarta-ee, jms

我收到了一个应用程序，其中这两个 JAR 只是包含在 lib 目录中。据我所知，它们实际上并没有与 Java 企业版软件包分开分发。假设他们拥有我需要的一切，这是个好主意吗？它确实减少了部署的规模。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:06:59.157

这取决于您是要将应用程序部署在某个 Java EE 应用程序服务器（Glassfish、JBoss 等）上还是将其保留在外部。在后一种情况下，这是否是个好主意是毫无疑问的——您**必须**在应用程序中包含 imq.jar 和 jms.jar 才能与 JMS 消息代理进行通信。

我已经多次使用这种方法，一个示例是通过将 SMS 放入消息队列来发送 SMS 的独立应用程序。另一方面，应用服务器中有一个 MDB，它侦听特定的消息队列并发送 SMS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:30:43.303

类路径中只需要这些 jar 文件。如果是，则无需将它们包含在部署中。

如果这就是您的意思，那么删除 Java EE 安装的任何包是不明智的。它可能会影响确实需要这些软件包的其他应用程序，并且当它们发生时很难追踪这些错误。

**更新**

所以问题是可以在没有 Java EE 安装的情况下运行 Java EE 库吗？如果没有安装 Java EE 并且该应用程序旨在使用 JRE 运行，那么这没有任何问题。它只是一个需要 JRE 加上来自 Java EE 的 2 个库的应用程序，只需确保（这是棘手的部分）这些库没有来自其他 Java EE 库的任何依赖项

**更新**

两者显然都不需要其他依赖项，但如果您想确保从 maven 存储库下载它们。

# vbscript - 调用子错误 800A0414 VBS 时不能使用括号

> ID：14902134
> 
> 赞同：26
> 
> 时间：2013-02-15T19:41:23.287
> 
> 标签：vbscript

我在此脚本的第 7 行和第 12 行收到 800A0414 错误：

```
Module Module1

  Dim p

    Sub Main()
        CreateObject("Wscript.Shell").Run("program.bat", 0, True)

        p = Process.GetProcessesByName("program")
        If p.Count > 0 Then
            WScript.Sleep(300000)
        Else
            CreateObject("Wscript.Shell").Run("program clean up.bat", 0, True)
        End If

    End Sub

    Private Function WScript() As Object
        Throw New NotImplementedException
    End Function

End Module 
```

我正在尝试运行一个批处理脚本，它启动一个进程，然后等到进程终止，然后运行另一个批处理脚本。我也不希望显示任何命令框。如果他们是更简单的方法，请告诉我。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-16T08:08:02.483

当您将过程的参数列表括在括号中时，您必须使用[`Call`](http://msdn.microsoft.com/en-us/library/wcx04ck5(v=vs.84).aspx)关键字：

```
Call CreateObject("WScript.Shell").Run("program.bat", 0, True) 
```

如果省略`Call`关键字，还必须去掉括号：

```
CreateObject("WScript.Shell").Run "program.bat", 0, True 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-27T22:27:04.803

完成之前所说的：

当**[Call](http://msdn.microsoft.com/en-us/library/wcx04ck5%28v=vs.84%29.aspx)关键字用于**调用过程（即 sub 或函数）时，参数*必须*用括号括起来，*除非*过程没有参数，在这种情况下括号是可选的。例如所有语句：

```
Call test()
Call test
Call test(1,2) 
```

是有效的，但不是这个：

```
Call test 1 
```

**在不使用 Call 关键字**调用过程时，括号*只能*在过程有零个或一个参数或过程有返回值（即是一个*函数*）且其值用于*同一*语句时使用。例如所有语句：

```
test()
test(1)
test(1,2)
a = test
a = test(1,2)
a = test(test(1,2),2) 
```

是有效的，除了第三个有多个参数。如果不清楚，最后一条语句中“test”的内部调用是有效的，因为它的返回值被用作另一个调用的参数。

请注意，无论何时在本文中使用*括号*，它也意味着暗示可能的*逗号*分隔值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:11:42.513

在我看来，这是一个 VB.NET，而不是 VBScript 代码。您在 VB.NET（和其他方法）中有[Shell 函数。](http://msdn.microsoft.com/en-us/library/xe736fyk%28v=vs.71%29.aspx)

无论如何，[Run](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)返回程序返回的任何错误代码，如果将该结果存储在变量中，则在这种情况下可以使用括号。

```
Dim lResult As Long
lResult = CreateObject("Wscript.Shell").Run("program.bat", 0, True) 
```

其余的由@Helen 回答。

# matlab - 从 MATLAB 共分布数组中提取一个值

> ID：14902135
> 
> 赞同：0
> 
> 时间：2013-02-15T19:41:29.957
> 
> 标签：matlab, parallel-processing

我正在尝试在 MATLAB 中构建句柄类对象的分布式数组，并且我想从此向量中提取特定句柄以在命令行上使用。鉴于下面的代码，我希望执行以下代码。我在两个实验室（matlabpool 2）上运行这个。getValue 函数是我需要帮助的，谢谢...

```
vec = buildArray; 
h = getValue(vec,6);
h.id 
```

**ClassA.m**：我想并行分发的类。

```
classdef ClassA < handle
    properties
        id;
    end

    methods
       function obj = ClassA(id)
        obj.id = id;
       end
    end   
end 
```

**buildArray.m**：从 ClassA 的本地实例构建 codistributed 数组的函数。

```
function vec = buildArray
X(:,1) = 1:10;              % create ids
gsize = size(X);            % the global size
X = distributed(X);         % distribute the ids

spmd    
    x = getLocalPart(X);       % extract the local ids
    local = cell(length(x),1); % create local storage for handles

    % Create the class instances
    for i = 1:length(x);     
        local{i} = ClassA(x(i));    
    end

    % Build the codistributed array of handles
    codist = codistributor1d(codistributor1d.unsetDimension, ...
    codistributor1d.unsetPartition, gsize);
    vec = codistributed.build(local,codist);
end 
```

**getValue.m**： *这是我需要帮助的函数*，目前它只显示包含具有指定 id 的类的实验室。我希望它返回句柄，以便可以从命令行使用它。这是怎么做到的？

```
function h = getValue(vec, id)
h = []; % just so it will not throw an error
spmd
 local = getLocalPart(vec);
 for i = 1:length(local);
    if local{i}.id == id;
        % Export h here
        disp(['ID ', num2str(id), ' is on lab ', num2str(labindex)]);
        break;
    end
 end 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:08:13.413

我能够使用它为 getValue.m 解决我的问题，有没有更好的方法？

```
function h = getValue(vec, id)

spmd  
local = getLocalPart(vec);
idx = [];
for i = 1:length(local);
    if local{i}.id == id;
        idx = i;
        break;
    end
end 

codist = codistributor1d(codistributor1d.unsetDimension, ...
    codistributor1d.unsetPartition, [numlabs,1]);
IDX = codistributed.build(idx, codist); 
end

c = gather(vec(IDX));
h = c{1}; 
```

# boolean-logic - 有什么好的布尔表达式简化器吗？

> ID：14902141
> 
> 赞同：119
> 
> 时间：2013-02-15T19:42:04.387
> 
> 标签：boolean-logic, boolean-expression

我正在重构旧代码，遇到了几个过于复杂和冗长的 IF 条件，我确信它们可以被简化。我的猜测是，由于后来的修改，这些条件增长了很多。

无论如何，我想知道你们中是否有人知道我可以使用的好的在线简化器。我对任何特定语言都不感兴趣，只是一个简化器，例如：

**((A OR B) AND (!B AND C) OR C)**

如果有的话，给我一个简化版本的表达式。

我已经查看了其他类似的问题，但没有人指出我是一个很好的简化器。

谢谢。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-02-15T21:12:22.383

您可以根据您的输入尝试 Wolfram Alpha，如下例所示：

[http://www.wolframalpha.com/input/?i=((A%20OR%20B)%20AND%20(NOT%20B%20AND%20C)%20OR%20C)&t=crmtb01&f=rc](http://www.wolframalpha.com/input/?i=((A%20OR%20B)%20AND%20(NOT%20B%20AND%20C)%20OR%20C)&t=crmtb01&f=rc)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-15T21:06:21.603

Try `Logic Friday 1`It 包括来自加利福尼亚大学的工具（Espresso 和 misII），并使它们可与 GUI 一起使用。您可以根据需要输入布尔方程和真值表。它还具有图形门图输入和输出。

最小化可以进行两级或多级。两级形式产生最小的乘积之和。多级形式创建了一个由逻辑门组成的电路。门的类型可以由用户限制。

您的表达式简化为`C`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-06T10:17:46.733

我发现[The Boolean Expression Reducer](http://sourceforge.net/projects/bexpred/)比 Logic Friday 更容易使用。此外，它不需要安装并且是多平台（Java）。

同样在 Logic Friday 中，表达式`A | B`只返回真值表中的 3 个条目；我预计4。

# javascript - 在 MongoDB 聚合框架中使用 $avg 函数似乎不会改变返回值

> ID：14902143
> 
> 赞同：1
> 
> 时间：2013-02-15T19:42:11.750
> 
> 标签：javascript, mongodb, database, nosql

我敢肯定，我缺少一些相对明显的东西。基本上，尽管使用了 $avg 和 $sum:1 函数，这两个查询返回完全相同的结果，据我了解，第一个查询应该返回先前分组的行数的平均值？

```
db.bbservicedata.aggregate( 
{ 
   $match:{"accesstime" : {"$gte" : ISODate('2012-02-09T01:45:32.962Z') }}
},  

{
   $match:{"requestModel.serviceName" : "ContentItem"}},    
{

   $unwind: "$requestModel.methodParams.ContentItemLoggingListModel.items"},

{ 

$group: {
 _id:{
   myYear:{$year:"$accesstime"},
   myMonth:{$month:"$accesstime"},
   myDay:{$dayOfMonth:"$accesstime"}}, 
   count:{$sum:1}}}, 
{ 
$group: {
 _id: {
   year: "$_id.myYear",
   month: "$_id.myMonth",
   day: "$_id.myDay"}, 
   averagecount : {$avg : "$count"}}},  

   //{averagecount : {$sum: "$count"}}}***, -- Returns the same result*

 {$sort: {averagecount:-1}} 
); 
```

任何帮助将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:26:52.557

您的第二个`$group`使用与第一个相同的`_id`术语，因此每个`_id`. 在那种情况下`$avg`总是会相等`$sum`。

# ios - 如何确定 dequeueReusableCellWithIdentifier 返回的单元格是否在 iOS 6 中被重用？

> ID：14902144
> 
> 赞同：6
> 
> 时间：2013-02-15T19:42:16.980
> 
> 标签：ios, uitableview

我正在向 cellForRowIndexPath 中的单元格添加项目（例如手势识别器、子视图）。如果单元正在被重用（大概），我不想添加这些，那么有没有一种方法可以轻松判断单元是新的还是被重用？

单元原型在情节提要中定义。

我没有为单元格使用自定义子类（似乎有点矫枉过正）。我正在使用单元格标签来识别子视图，所以不能使用它。

我可以使用 iOS 6 之前的方法，但肯定有更好的方法来做这么简单的事情吗？

我在网上找不到任何东西，所以害怕我可能会对某些事情感到困惑——但这是一件很难搜索的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T20:10:39.033

解决此问题的最简单方法是检查是否存在需要添加的内容。

因此，假设您的单元格需要有一个带有标签 42 的子视图，如果它不存在的话。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    UIView *subview = [cell viewWithTag:42];
    if (!subview) {
       ... Set up the new cell
    }
    else {
       ... Reuse the cell
    }
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:08:32.320

与使用 iOS6 之前的（无注册类）方法相比，这可能有点矫枉过正，但如果你真的想坚持下去，你可以使用[关联对象](https://stackoverflow.com/q/5909412/900873)。

```
#import <objc/objc-runtime.h>

static char cellCustomized;

...
-(UITableViewCell *)getCell
{
    UITableViewCell *cell = [tableView dequeueReusableCellForIdentifier:myCell];
    if(!objc_getAssociatedProperty(cell, &cellCustomized)) {
        [self setupCell:cell];
        objc_setAssociatedProperty(cell, &cellCustomized, @YES, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    }
    return cell;
}

... 
```

[（未测试）]

# c# - 如何将变量定义为 lambda 函数

> ID：14902145
> 
> 赞同：2
> 
> 时间：2013-02-15T19:42:19.520
> 
> 标签：c#, lambda

（Lambda 函数可能是也可能不是我正在寻找的，我不确定）

基本上我想要完成的是：

```
int areaOfRectangle = (int x, int y) => {return x * y;}; 
```

但它给出了错误：“无法将 lambda 表达式转换为类型'int'，因为它不是委托类型”

更详细的问题（实际上与问题无关，但我知道有人会问）是：

我有几个从重写的 OnLayout 分支的函数以及每个函数都依赖的多个函数。为了可读性和为以后的扩展设置先例，我希望从 OnLayout 分支的函数看起来都相似。为此，我需要对它们进行划分并尽可能重用命名：

```
protected override void OnLayout(LayoutEventArgs levent)
    switch (LayoutShape)
    {
        case (square):
            doSquareLayout();
            break;
        case (round):
            doRoundLayout();
            break;
        etc..
        etc..
    }
void doSquareLayout()
{
    Region layerShape = (int Layer) =>
    {
        //do some calculation
        return new Region(Math.Ceiling(Math.Sqrt(ItemCount)));
    }
    int gradientAngle = (int itemIndex) =>
    {
        //do some calculation
        return ret;
    }
    //Common-ish layout code that uses layerShape and gradientAngle goes here
}
void doRoundLayout()
{
    Region layerShape = (int Layer) =>
    {
        //Do some calculation
        GraphicsPath shape = new GraphicsPath();
        shape.AddEllipse(0, 0, Width, Height);
        return new Region(shape);
    }
    int gradientAngle = (int itemIndex) =>
    {
        //do some calculation
        return ret;
    }
    //Common-ish layout code that uses layerShape and gradientAngle goes here
} 
```

我现在找到的所有示例都说您必须声明一个委托，但我*知道*我已经看到了一个单行 lambda 声明......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T19:43:31.920

试试`Func<int, int, int> areaOfRectangle = (int x, int y) => { return x * y;};`吧。

`Func`作为代表工作

[在此处查看有关 lamda 表达式使用的更多信息](http://www.codeproject.com/Articles/33323/Functional-Programming-in-C-3-0-using-Lambda-Expre)

[这个答案也是相关的并且有一些很好的信息](https://stackoverflow.com/a/12267298/1048432)

如果您这样做是为了可读性并且要重现相同的函数`layerShape`和`gradientAngle`，您可能希望为这些函数设置显式委托以显示它们实际上是相同的。只是一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T19:44:19.257

试试这样；

```
Func<int, int, int> areaOfRectangle = (int x, int y) => { return x * y; }; 
```

*[`Func<T1, T2, TResult>`](http://msdn.microsoft.com/en-us/library/bb534647.aspx)*从*MSDN*检查；

> 封装具有两个参数并返回 TResult 参数指定类型的值的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T19:44:01.950

变量类型基于您的参数和返回类型：

```
Func<int,int,int> areaOfRectangle = (int x, int y) => {return x * y;}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T19:44:25.440

你很接近：

```
Func<int, int, int> areaOfRectangle = (int x, int y) => {return x * y;}; 
```

因此，对于您的具体情况，您的声明将是：

```
Func<int, Region> layerShape = (int Layer) =>
... 
```

# database - JPA 不从实体生成表

> ID：14902147
> 
> 赞同：2
> 
> 时间：2013-02-15T19:42:27.367
> 
> 标签：database, hibernate, jpa, persistence, entity

这是一些实体：

```
@Entity
public class Forest {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    public Forest() {
    }

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }
} 
```

我想在表林中插入一些元素：

```
public class Main {
private static EntityManagerFactory emf = 
       Persistence.createEntityManagerFactory("server");

    public static void main(String[] args) {

        EntityManager em = emf.createEntityManager();
        EntityTransaction trx = em.getTransaction();
        Forest forest = new Forest();

        trx.begin();
        em.persist(forest);
        trx.commit();

    }
} 
```

抛出异常：

```
Exception in thread "main" javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: Table 'server.forest' doesn't exist

Caused by: org.hibernate.exception.SQLGrammarException: Table 'server.forest' doesn't exist 
```

我的带有设置的 persistence.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
   <persistence-unit name="server">
      <provider>org.hibernate.ejb.HibernatePersistence</provider>

      <properties>
          <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
          <property name="javax.persistence.jdbc.url"               value="jdbc:mysql://localhost:3306/server"/>
          <property name="javax.persistence.jdbc.user" value="root" />
          <property name="javax.persistence.jdbc.password" value="root" />
          <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
          <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
      </properties>
   </persistence-unit>
</persistence> 
```

当我删除@GeneratedValue(strategy = GenerationType.AUTO) 并为森林设置id：forest.setID(1) 时，没有异常并且已生成表。所以，自动生成 id 不起作用，我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T19:49:16.407

根据配置`org.hibernate.dialect.HSQLDialect`与 MySQL 数据库一起使用。使用 MySQL 方言而不是 HSQL 之一可能会有所帮助。可能使用了 InnoDB - 如果是这样，那么[MySQL5InnoDBDialect](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/dialect/MySQL5InnoDBDialect.html)是可行的。

# javascript - 为什么 IE8 在页面加载时运行 jQuery.click 函数？

> ID：14902148
> 
> 赞同：2
> 
> 时间：2013-02-15T19:42:27.637
> 
> 标签：javascript, jquery, internet-explorer-8, jquery-events

```
$('.consejosTab').live("click", function(){
    window.location = 'http://encuentratrabajoonline.es/consejos/';
    console.log('clicked')
}); 
```

谁能向我解释一下这段代码在页面加载时被初始化了什么，但只在 IE8 中？我已禁用所有触发器并确认没有其他正在运行的单击功能可能会干扰此操作。此代码位于 document.ready 中，并且是似乎在页面加载时触发的唯一单击功能。

编辑：

有趣的是，在 IE8 中，click 函数的 event.target 是窗口。在 IE8 中，它作为页面的 URL 返回，但在其他所有内容中，它都显示为它被点击的实际元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:48:12.357

解决此问题的一个好方法是记录被单击的元素。

```
$('.consejosTab').live("click", function(evt){
    console.log(evt.target);
}); 
```

然后，您将能够看到正在单击的元素（并且页面不会重新加载）。我假设您有多个标记为 consejosTab 的元素。

您还可以在该 console.log 行上放置一个断点，并浏览调用堆栈。

# java - 从 Java 中的 Android Activity 写入 /proc 文件系统

> ID：14902160
> 
> 赞同：0
> 
> 时间：2013-02-15T19:43:07.190
> 
> 标签：java, android, c, linux, linux-kernel

我已经下载了 Android 源代码并将其刷到了设备上。我已经编写了 LKM，它读取/写入信息到 /proc/myFile。我想从我的 android 活动写入 /proc/myFiLE 文件，但使用非原生的 java 代码。我知道在本机代码中我们可以使用`system( )`系统调用使用 echo 命令编写，但我不知道如何从 java 代码编写？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-19T03:20:52.077

只需将它们视为普通文件即可。您可以使用常用的`File`和`*Stream`对象来编写您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:07:21.040

你可以使用这样的东西。

Runtime.getRuntime().exec("你的命令")

# r - 黄土预测值和标准差

> ID：14902165
> 
> 赞同：0
> 
> 时间：2013-02-15T19:43:16.513
> 
> 标签：r, loess

我有数据（`x`和`y`值）的散点图。我想计算加权平均值和标准偏差作为 X 的函数。对于我的每个点，我想计算每个值与预测值之间的标准偏差数。我目前正在使用包中的`loess.sd`函数，`msir`因为它会为我计算 sd。有谁知道我如何获得每个数据点的预测标准差？或者也许有替代或更好的方法来解决这个计算？提前致谢。

我当前的代码：

```
#... scatter plot of data
plot(xy,ylim=c(0,50),pch=20)
#loess +- 1 sd
std_loess = loess.sd(xy, nsigma =1,span=0.3)
# ... add weighted average to plot
lines(std_loess$x,std_loess$y,col="firebrick2")
# .... add weighted sd to plot
lines(std_loess$x,std_loess$y,col="firebrick2")
#.... get observed data points
lines(std_loess$x,std_loess$upper,col="dodgerblue2")
# ... get expected value for each data point
obs = xy[,2]
# ... get predicted sd for each data point
expected = predict(std_loess$model,data.frame(xy))  
# ...get predicted sd for each data point

exp_sd = ??????????????????

# ...get predicted sd for each data point
sd_away = (obs - expected) / exp_sd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:22:29.770

可能（但在没有数据的情况下未经测试）：

```
exp.fit = expected$fit
# ...get predicted sd for each data point
sd_away = (obs - exp.fit) / expected$se 
```

predict.loess 的结果不是一个向量，而是一个包含多个组件的列表，并且预测值在“拟合”组件中。

# pyrocms - 如何更改 Pyrostreams 输入表单中的关系字段

> ID：14902168
> 
> 赞同：0
> 
> 时间：2013-02-15T19:43:29.650
> 
> 标签：pyrocms

我正在使用 Pyrostreams，我有 2 个流：

城市和房间

房间有一个关系字段：城市。当我输出房间的输入表单时，我看到一个包含所有城市的下拉列表，但只显示它们的 ID。如何在关系下拉列表中显示特定字段（例如 city_name）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:15:05.257

来自 PyroCMS 论坛上的 Adam Fairholm：

> 您需要通过进入要显示的字段并选择将字段设置为标题列来设置流的标题列。显然，这仅适用于要显示文本的字段，因为它需要显示在下拉列表中。

# sql-server - 将序列化视频文件存储到 SQL Server

> ID：14902170
> 
> 赞同：1
> 
> 时间：2013-02-15T19:43:40.513
> 
> 标签：sql-server

我目前需要为我的网站托管 20 个小视频文件。我知道我可以将它们与我的项目一起托管在一个文件夹中，但我遇到了这篇文章。

[http://www.kindblad.com/2008/04/how-to-store-files-in-ms-sql-server.html](http://www.kindblad.com/2008/04/how-to-store-files-in-ms-sql-server.html)

我没有想到将文件存储在数据库中。我的问题是，通过将文件作为位数据存储在数据库中而不是仅流式传输数据，是否会提高或降低性能。我喜欢将数据保存在数据库中以实现可移植性和控制以及谁可以访问视频的想法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:09:10.063

除非您迫切需要将它们存储在数据库中，否则我个人不会。您仍然可以通过使用处理程序验证对文件的访问权限来控制谁可以访问哪些文件。那篇文章中的方法存在的一个大问题是它不支持读取字节范围 - 例如，如果有人想寻找视频的中间，他们将不得不等待整个内容下载。您希望它能够支持范围标头，如[本问题](https://stackoverflow.com/questions/5429947/supporting-resumable-http-downloads-through-an-ashx-handler)中所述。

# java - Unable to enhance byte code to JDO 3.0 using version 2 of the DataNucleus GAE/J plug-in

> ID：14902172
> 
> 赞同：0
> 
> 时间：2013-02-15T19:44:00.550
> 
> 标签：java, google-app-engine, ant, wicket, datanucleus

**My question**

I am porting my application from version 1.x to 2.0 of the DataNucleus plug-in for GAE/J using the new 1.7.5 GAE/J SDK, but I am unable to use the arguments `-enhancerVersion` and `v2` successfully. (Is the default target without these arguments version 1 of the DataNucleus GAE/J plug-in, which I do not want?)

Does anyone know how I could specify these arguments successfully?

**My software environment**

*   Web framework: Apache Wicket 6.5.0
*   Web server: Google App Engine for Java version 1.7.5
*   Java version: 1.6.0_39; Java HotSpot(TM) Client VM 20.14-b01
*   IDE: NetBeans 7.2 (build 201207171143)
*   GAE/J DataNucleus plug-in version: 2.1.2
*   DataNucleus Access Platform version: 3.1.3
*   Operating system: Microsoft Windows XP version 5.1 running on x86

**Background information and build failure log output**

The GAE/J documentation at

[Google App Engine | Java | Storing Data | JDO | Overview JDO (3.0) | Migrating to Version 2.x of the DataNucleus Plugin | Changes to Configuration Files](https://developers.google.com/appengine/docs/java/datastore/jdo/overview-dn2#Changes_to_Configuration_Files)

says:

```
In build.xml

...

2\.  The datanucleusenhance target has changed. Update this section:

<target name="datanucleusenhance" depends="compile"
 description="Performs enhancement on compiled data classes.">
<enhance_war war="war" />
</target>

to:

<target name="datanucleusenhance" depends="compile"
 description="Performs enhancement on compiled data classes.">
<enhance_war war="war">
  <args>
    <arg value="-enhancerVersion"/>
    <arg value="v2"/>
  </args>
</enhance_war>
</target> 
```

My code in my NetBeans `build.xml` is slightly different:

```
<!--  *******************************************************************  -->
<!--  **                                                                   -->
<!--  **  This block extends the original "-post-compile" target in        -->
<!--  **  "nbproject/build-impl.xml" by adding "depends" and "description" -->
<!--  **  attributes and implementing them.                                -->
<!--  **                                                                   -->

<target
 name="-post-compile"
 depends="datanucleusenhancer"
 description="Called after javac compilation (DataNucleus enhancement)"
/>

...

<target
 name="datanucleusenhancer"
 description="Performs the DataNucleus post-compilation enhancement"
>
  <taskdef
   name="datanucleusenhancertask"
   classpathref="datanucleus.enhancer.classpath"
   classname="org.datanucleus.enhancer.tools.EnhancerTask"
  />

  <datanucleusenhancertask
   dir="${build.classes.dir}"
   classpathref="datanucleus.enhancer.classpath"
   api="JDO"
   failonerror="true"
   verbose="true"
   filesuffixes="class"
   >
    <fileset dir="${build.classes.dir}" casesensitive="false">
      <filename name="**/persistence/**"/>
    </fileset>
    <jvmarg line="-Dlog4j.configuration=file:nbproject/log4j.properties"/>
    <args>                               <!--  Added   -->
      <arg value="-enhancerVersion"/>    <!--  code    -->
      <arg value="v2"/>                  <!--  to set  -->
    </args>                              <!--  args    -->
  </datanucleusenhancertask>
</target> 
```

The build process failed with output:

```
...

datanucleusenhancer:
Enhancer api: JDO
Enhancer verbose: true
C:\...\build.xml:154: datanucleusenhancertask doesn't support the nested "args" element.
  at org.apache.tools.ant.UnknownElement.handleChildren(UnknownElement.java:362)
  at org.apache.tools.ant.UnknownElement.configure(UnknownElement.java:201)
  at org.apache.tools.ant.UnknownElement.maybeConfigure(UnknownElement.java:163)
  at org.apache.tools.ant.Task.perform(Task.java:347)
  at org.apache.tools.ant.Target.execute(Target.java:392)
  at org.apache.tools.ant.Target.performTasks(Target.java:413)
  at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
  at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
  at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
  at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
  at org.apache.tools.ant.module.bridge.impl.BridgeImpl.run(BridgeImpl.java:283)
  at org.apache.tools.ant.module.run.TargetExecutor.run(TargetExecutor.java:541)
  at org.netbeans.core.execution.RunClassThread.run(RunClassThread.java:153)
Caused by: The <datanucleusenhancertask> type doesn't support the nested "args" element.
  at org.apache.tools.ant.IntrospectionHelper.throwNotSupported(IntrospectionHelper.java:503)
  at org.apache.tools.ant.UnknownElement.handleChildren(UnknownElement.java:352)
  ... 12 more
BUILD FAILED (total time: 44 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:44:30.973

The (official) DataNucleus enhancer Ant task ([seen here](http://datanucleus.svn.sourceforge.net/viewvc/datanucleus/platform/enhancer/branches/3.1/src/java/org/datanucleus/enhancer/tools/EnhancerTask.java?revision=15609&view=markup)) has no such args as input. Those args are Google's own stuff (whatever the "enhance_war" thing refers to). All DataNucleus enhancer cares about is having the relevant jars in the CLASSPATH and is configurable as per [this](http://www.datanucleus.org/products/accessplatform_3_1/enhancer.html#ant).

# vim - vim 选择文本

> ID：14902180
> 
> 赞同：5
> 
> 时间：2013-02-15T19:44:33.030
> 
> 标签：vim

我有一个看起来像这样的文件：

```
1 148 1  4
2 333 1  3
3 534 2  3
4 772 g  7
5 921 p  2 
```

我想将文本从第 1 行拉到第 5 行，从第 1 列拉到第 7 列：

```
1 148 1  
2 333 1  
3 534 2  
4 772 g  
5 921 p 
```

我可以从 vim 命令行执行此操作吗？如果我输入

```
:1,5ya a 
```

整行被拉入寄存器“a”，我只想要某些列。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:31:41.097

您可以在命令行上执行*任何*命令，这里借助`:normal`：

```
:execute "normal! 1G^\<C-v>6l5j\"ay" 
```

这会构建一个*分块选择*，然后将其拉到注册一个。使用`:execute`是为了`\<C-v>`可以使用符号而不是直接插入它。它还允许您用变量替换硬编码的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:13:15.997

您不能从 vim 命令行以简单的方式执行此操作。 `:y`是一个**逐行**命令 - 它只影响整行。您正在寻找的内容被认为是**blockwise**。逐块命令涉及可视模式。所以你能做的最好的就是：

1.  CTRL-V 启动可视模式。
2.  突出显示您想要的文本。
3.  `"ay`将突出显示的文本拉入 register `a`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:10:32.167

不是很笼统，但这应该可行：

```
:1,5y|put|-4,.s/\(.\{7\}\).*/\1/|-4,.d a 
```

Yank 5 行，放置（复制）它们，删除所需列之后的所有内容，将它们删除到缓冲区中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:37:35.503

另一种方法，更适合脚本：

```
:let @a = join(map(getline(1, 5), 'matchstr(v:val, ".*\\%<9v")'), "\n") 
```

它将行作为 List() 检索，然后通过特殊的正则表达式 atom`getline()`匹配前 7 个虚拟列，并将其分配（作为字符串）分配给 register 。`/\%<v``join()``@a`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T21:56:59.260

我会做

# `C-v``G``2w``y`

并完成（从文档顶部开始`g``g`）

当然，如果您想在寄存器*a*中添加它，请添加`"a`：

## `C-v``G``2w``"``a``y`

# python - PyCharm 可以列出项目中的所有 Python 错误吗？

> ID：14902181
> 
> 赞同：100
> 
> 时间：2013-02-15T19:44:51.703
> 
> 标签：python, python-2.7, compiler-errors, pycharm

我在虚拟环境中使用 python 2.7 和 PyCharm 2.7（截至 2013 年 2 月 7 日的新版本）。

每当我在其中打开一个包含明确错误的 python 文件（相当于在其他语言中编译错误，例如使用未声明的变量、调用不存在的函数）时，它会在文件的装订线中显示红色条纹。

因此，当我碰巧导航到包含它们的文件时，我随机发现了错误。我真正想要的是能够在一个单独的窗口中列出所有 python 错误。Visual Studio 2005/2008/2010/... IDE 有一个单独的“错误”视图，其中列出了所有这些错误以及文件名和行号，并让我能够单击这些错误中的任何一个并直接导航到资源。

PyCharm 有这样的东西吗？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-02-15T19:46:32.157

您可以调用[Code|Inspect Code](http://www.jetbrains.com/pycharm/webhelp/running-inspections.html)（以前称为 Analyze|Inspect Code，感谢 @CrackerJack9）来获取所有错误和警告以及修复它们的方法。在结果面板中，您可以选择仅查看错误（左侧的红色/黄色按钮）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-27T11:56:20.913

在 Pycharm 2.6.3 中：
代码 -> 检查代码

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-15T19:49:10.750

是的，运行分析|检查代码并指定整个项目作为分析范围。

# python - 重启后在 PowerShell 中保持会话

> ID：14902182
> 
> 赞同：0
> 
> 时间：2013-02-15T19:45:02.670
> 
> 标签：python, powershell

我正在使用 PowerShell，重新启动后有什么方法可以返回上一个会话？我正在用它编写 Python 程序，每次启动 PowerShell 时转到我正在工作的目录有点乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:49:31.867

这可以通过在您的配置文件中设置主目录来完成。键入`$profile`您的 shell 以查找您的 Powershell 配置文件的路径。在文本编辑器中打开此文件并添加此行

```
Set-Location C:\Python\MyProject 
```

确保它是第一行，然后每次打开 Powershell 时，它都会将其目录更改为您在配置文件中设置的目录。注意：如果您使用 -noprofile 开关启动 powershell，这将不起作用。

# php - 清除 Doctrine 的实体类缓存？

> ID：14902183
> 
> 赞同：0
> 
> 时间：2013-02-15T19:45:09.127
> 
> 标签：php, caching, doctrine, entities, grocery-crud

最初，我在 CodeIgniter 设置的模型文件夹中有我的实体类（带有 Doctrine 注释的 PHP）。我认为这不是一个好主意，所以我将所有实体移动到“实体”文件夹中并相应地更新了我的 Doctrine.php 文件......但是现在当我尝试使用 Doctrine CLI 运行任何东西时，我得到了这个错误：

```
PHP Warning:  require([application path withheld]/application/models/Entities/grocery_CRUD_Model.php): failed to open stream: No such file or directory in [application path withheld]/application/libraries/Doctrine/Common/ClassLoader.php on line 163
PHP Fatal error:  require(): Failed opening required '[application path withheld]/application/models/Entities/grocery_CRUD_Model.php' (include_path='.:/usr/share/pear:/usr/share/php') in [application path withheld]/application/libraries/Doctrine/Common/ClassLoader.php on line 163 
```

我知道 Doctrine 现在正在寻找正确的目录，但似乎仍然认为 my`grocery_CRUD_Model.php`应该在那个目录中。该文件与之前的其他实体位于同一文件夹中，但从未有任何 Doctrine 注释。我已经尝试清除 Doctrine 的元数据、查询和结果缓存，以查看 Doctrine 是否会忘记这个文件，但它没有帮助。

这里发生了什么？为什么 Doctrine 坚持将该文件放在 Entity 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:25:01.030

我找到了答案，我使用 grep 尝试查看某处是否存在某种`grocery_CRUD_Model`缓存对象文件，最终我发现不知何故我的一个实体（只有一个，我一定一直在试验）扩展了`grocery_CRUD_Model`.

我删除了继承，它起作用了！

# android - 带有九个补丁的 TransitionDrawable - 边距错误

> ID：14902185
> 
> 赞同：5
> 
> 时间：2013-02-15T19:45:13.760
> 
> 标签：android, android-layout, android-ui, nine-patch, transitiondrawable

我有一个TransitionDrawable。这两个状态都是九个补丁，并定义了一个内容区域。问题是利润太高了——事实上它基本上是应该的两倍。似乎是在将两个九个补丁的边距相加。

如果我将这九个补丁中的一个直接设置为背景而不使用TransitionDrawable，则边距可以正常工作，因此九个补丁绝对正确。

有没有人遇到过这样的问题？

编辑：如果我将内容区域设置为资产的完整大小并在 xml 中定义填充它可以工作。否则它总是会得到错误的边距。这似乎是 Android 中的一个错误，所以这似乎是唯一的解决方案，但也许有更好的方法来解决这个问题：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-30T13:46:54.490

是的，你是对的。确实很烦人。

正如您所建议的，到目前为止，我使用硬编码的负填充来补偿`first_nine_patch`9 补丁填充。

```
<?xml version="1.0" encoding="UTF-8"?>
<transition xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/first_nine_patch" />
    <item android:drawable="@drawable/second_nine_patch"
        android:top="-7dp"
        android:right="-16dp"
        android:bottom="-8dp"
        android:left="-4dp" >
    </item>
</transition> 
```

# r - 在闪亮的 server.R 中更新数据框而不重新启动应用程序

> ID：14902188
> 
> 赞同：12
> 
> 时间：2013-02-15T19:45:27.570
> 
> 标签：r, shiny

关于如何在不停止和重新启动应用程序的情况下更新闪亮正在使用的数据框的任何想法？

我尝试`load(file = "my_data_frame.RData", envir = .GlobalEnv)`在反应函数内部放置一个，但到目前为止还没有运气。数据框在应用停止后才会更新。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-16T00:31:06.950

如果您只是更新常规变量（在全局环境中或其他情况下），Shiny 不知道对它们做出反应。您需要使用`reactiveValues`对象来存储变量。您使用创建一个`reactiveValues()`，它的工作方式与环境或列表非常相似——您可以在其中按名称存储对象。您可以使用`$foo`or`[['foo']]`语法来访问值。

一旦反应函数从对象中读取一个值`reactiveValues`，如果该值在未来被不同的值覆盖，那么反应函数将知道它需要重新执行。

这是一个示例（由于您使用`load`的是返回单个值而不是返回单个值的东西，因此变得更加复杂，例如`read.table`）：

```
values <- reactiveValues()
updateData <- function() {
  vars <- load(file = "my_data_frame.RData", envir = .GlobalEnv)
  for (var in vars)
    values[[var]] <- get(var, .GlobalEnv)
}
updateData()  # also call updateData() whenever you want to reload the data

output$foo <- reactivePlot(function() {
  # Assuming the .RData file contains a variable named mydata
  plot(values$mydata)
} 
```

我们应该很快就会有关于这些东西的更好的文档。感谢您在此期间与我们相处。

# android - 无法从异步任务填充列表视图

> ID：14902190
> 
> 赞同：0
> 
> 时间：2013-02-15T19:45:43.327
> 
> 标签：android, listview, asynchronous, methods, arraylist

我有一个必须填充列表视图的活动。活动发布到 url 并接收 JSON 作为响应。我已经解析了 JSON 以显示在列表视图中，但列表视图没有被填充。

活动的完整代码：

```
public class RegisterFirstActivity extends ListActivity {

    private static final String TAG_CODE = "Code";
    private static final String TAG_ID = "Id";
    private static final String TAG_LAT = "Lat";
    private static final String TAG_LON = "Lon";
    private static final String TAG_NAME = "Name";

    static String response_str=null;
    static String response_code=null;

    String ac_code;
    String ac_id;
    String ac_lat;
    String ac_lon;
    String ac_name;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register_first);
        sendPostRequest();
    }

    //sending async post request---------------------------------------------------------------------------------------
    private void sendPostRequest() {

        class SendPostReqAsyncTask extends AsyncTask<String, Void, String>{

            @Override
            protected String doInBackground(String... params) {

                String result = "";
                HttpClient hc = new DefaultHttpClient();
                String message;

                //HttpPost p = new HttpPost("http://192.168.1.60/tr/MobileService/GetAC");
                HttpPost p = new HttpPost("http://bumba27.byethost16.com/xxxxxxx/");
                JSONObject object = new JSONObject();
                try {

                    //object.put("Id",deviceid);
                    //object.put("StringValue",value);
//                  object.put("last_name", lastname);
//                  object.put("first_name", firstname);
//                  object.put("email", email);

                } catch (Exception ex) {

                }

                try {
                message = object.toString();

                p.setEntity(new StringEntity(message, "UTF8"));
                p.setHeader("Content-type", "application/json");
                    HttpResponse resp = hc.execute(p);
                    response_code=""+ resp.getStatusLine().getStatusCode();
                    Log.d("Response Code: ", "" + response_code);

                        InputStream inputStream = resp.getEntity().getContent();
                        InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
                        BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
                        StringBuilder stringBuilder = new StringBuilder();
                        String bufferedStrChunk = null;

                        while((bufferedStrChunk = bufferedReader.readLine()) != null){
                            stringBuilder.append(bufferedStrChunk);
                        }

                        response_str= stringBuilder.toString();
                        parse_json_str(response_str);

                    if (resp != null) {
                        if (resp.getStatusLine().getStatusCode() == 204)
                            result = "true";

                        makeAToast("Response: "+resp.toString());
                    }

                    Log.d("Status line", "" + resp.getStatusLine().getStatusCode());
                } catch (Exception e) {
                    e.printStackTrace();
                    Log.i("Error in response: ",e.getMessage());

                }

                return result;              

            }

            @Override
            protected void onPostExecute(String result) {
                super.onPostExecute(result);

                //Toast.makeText(getApplicationContext(), result, Toast.LENGTH_LONG).show();

                //writeToFile(result, "record.txt");

                Log.i("RESPONSE",result);

            }           
        }

        SendPostReqAsyncTask sendPostReqAsyncTask = new SendPostReqAsyncTask();
        sendPostReqAsyncTask.execute();     
    }

    //-----------------------------------------------------------------------------------------------

    public void parse_json_str(String json_str)
    {
        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        JSONArray lJSONArray;
        String jString = json_str;
        try
        {
            lJSONArray = new JSONArray( jString );

            JSONObject lJSONObject;
            for ( int i = 0; i < lJSONArray.length(); i++ )
            {
                lJSONObject = lJSONArray.getJSONObject( i );
                // PARSE FIELD HERE
                ac_code = lJSONObject.getString( TAG_CODE );
                Log.i("Code: ",ac_code);
                ac_id=lJSONObject.getString( TAG_ID );
                Log.i("Id: ",ac_id);
                ac_lat=lJSONObject.getString( TAG_LAT );
                Log.i("Lat: ",ac_lat);
                ac_lon=lJSONObject.getString( TAG_LON );
                Log.i("Lon: ",ac_lon);
                ac_name=lJSONObject.getString( TAG_NAME );
                Log.i("Name: ",ac_name);
                // ETC

             // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_CODE, ac_code);
                map.put(TAG_ID, ac_id);
                map.put(TAG_LAT, ac_lat);
                map.put(TAG_LON, ac_lon);
                map.put(TAG_NAME, ac_name);
                Log.d("map","haeflloter putting");
                Log.d("map",map+"");
                // adding HashList to ArrayList
                contactList.add(map);
                //Log.d("tag name", contactList+"");

            }

                        /**
                         * Updating parsed JSON data into ListView
                         * */
                        ListAdapter adapter = new SimpleAdapter(this, contactList,R.layout.list_item,new String[] { TAG_NAME }, new int[] {R.id.name});
                        Log.d("tag name", contactList+"");
                        setListAdapter(adapter);

        }
        catch( Exception e )
        {
            Log.d("catch", e+"");
        }

    }

    public void makeAToast(String str) {
        //yet to implement
        Toast toast = Toast.makeText(this,str, Toast.LENGTH_SHORT);
        toast.setGravity(Gravity.CENTER, 0, 0);
        toast.show();
    }
} 
```

布局文件 activity_register_first ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <!-- Main ListView 
         Always give id value as list(@android:id/list)
    -->
    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

list_item.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">  
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <!-- Name Label -->
        <TextView
            android:id="@+id/name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#43bd00"
            android:textSize="16sp"
            android:textStyle="bold"
            android:paddingTop="6dip"
            android:paddingBottom="2dip" />
        <!-- Description label -->

    </LinearLayout>

</LinearLayout> 
```

我得到的**错误是：**

```
02-15 19:26:46.154: D/catch(1429): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

我已按照[本](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)教程进行列表视图。

我哪里错了？如何解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:50:48.270

在 AsyncTask 中，只有`onPreExecute()`和`onProgressUpdate()`在`onPostExecute()`UI 线程中执行。

`doInBackground()`在后台线程中执行。

您应该从 中存储数据`doInBackground()`，然后在 中更新您的 UI `onPostExecute()`。

**编辑：**

使您的contactList 成为您的AsyncTask 的成员，并添加此代码（未经测试）：

```
protected void onPostExecute(String result) {
    super.onPostExecute(result);

    if(mContactList != null) {      
        ListAdapter adapter = new SimpleAdapter(this, contactList,R.layout.list_item,new String[] { TAG_NAME }, new int[] {R.id.name});
        Log.d("tag name", contactList+"");
        setListAdapter(adapter);
    }

    Log.i("RESPONSE",result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:48:26.207

UI 更改必须在 UI 线程中完成。这就是`onPostExecute()`在 UI 线程中运行的目的。

# entity-framework - 无法在 LINQ to Entities 查询中构造实体或复杂类型

> ID：14902193
> 
> 赞同：0
> 
> 时间：2013-02-15T19:45:58.020
> 
> 标签：entity-framework, asp.net-mvc-4, linq-to-entities, entity-framework-5

我有两个看起来完全一样的函数，只是它们创建了两个不同对象的列表。这两个不同的对象看起来非常相似，但是当我尝试在其中一个对象上运行其中一个函数时，我收到错误消息“无法在 LINQ to Entities 查询中构造实体或复杂类型。”。有人可以用非常简单的术语向我解释发生了什么吗？另外，您能告诉我如何更改我的代码以使其正常工作吗？谢谢，艾伦。

功能1（工作）：

```
 public static List<ChartApp> ListChartApplications()
    {
        using (var db = new LatencyDBContext())
        {
            var appNames = db.LoginApplications.Select(item => new ChartApp()
            {
                LoginApplicationID = item.LoginApplicationID,
                LoginAppName = item.LoginAppName,
            }).OrderBy(item => item.LoginAppName);
            return appNames.ToList();
        }
    } 
```

函数 2（在“return appNames.ToList();”上抛出错误）：

```
 public static List<LoginApplication> ListApplications()
    {
        using (var db = new LatencyDBContext())
        {
            var appNames = db.LoginApplications.Select(item => new LoginApplication()
            {
                LoginApplicationID = item.LoginApplicationID,
                LoginAppName = item.LoginAppName,
            }).OrderBy(item => item.LoginAppName);
            return appNames.ToList();
        }
    } 
```

课程：

```
public class ChartApp
{
    public ChartApp()
    {
        this.LoginHistories = new List<ChartHist>();
    }

    public int? LoginApplicationID { get; set; }
    public string LoginAppName { get; set; }
    public virtual ICollection<ChartHist> LoginHistories { get; set; }
    public int Step { get; set; }
}

public class LoginApplication
{
    public LoginApplication()
    {
        this.LoginHistories = new List<LoginHistory>();
    }

    public int LoginApplicationID { get; set; }
    public string LoginAppName { get; set; }
    public virtual ICollection<LoginHistory> LoginHistories { get; set; }
} 
```

编辑：区别可能是其中一个对象映射到数据库吗？

```
public class LoginApplicationMap : EntityTypeConfiguration<LoginApplication>
{
    public LoginApplicationMap()
    {
        // Primary Key
        this.HasKey(t => t.LoginApplicationID);

        // Properties
        this.Property(t => t.LoginAppName)
            .HasMaxLength(500);

        // Table & Column Mappings
        this.ToTable("LoginApplication");
        this.Property(t => t.LoginApplicationID).HasColumnName("LoginApplicationID");
        this.Property(t => t.LoginAppName).HasColumnName("LoginAppName");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:48:04.710

在这种情况下，我的解决方案是删除非工作功能并在所有地方使用工作功能。对于映射的类似函数，我使用以下函数返回值。

```
 public static List<LoginEnvironment> ListEnvironments(bool allSelection)
    {
        using (var db = new LatencyDBContext())
        {
            //GET ALL THE ENVIRONMENT NAMES              
            var envNames = from e in db.LoginEnvironments
                           orderby e.LoginEnvName
                           select e;

            //PUT ALL THE ENVIRONMENTS INTO A LOCAL LIST
            var listEnv = new List<LoginEnvironment>();

            if (allSelection)
            {
                var defaultAll = new LoginEnvironment();
                defaultAll.LoginEnvironmentID = 0;
                defaultAll.LoginEnvName = "All";
                listEnv.Add(defaultAll);
            }

            foreach (var item in envNames)
            {
                var localEnv = new LoginEnvironment();
                localEnv.LoginEnvironmentID = item.LoginEnvironmentID;
                localEnv.LoginEnvName = item.LoginEnvName;
                listEnv.Add(localEnv);
            }

            return listEnv;
        }
    } 
```

# javascript - JavaScript (Dojo) XHR - 编码特殊字符

> ID：14902197
> 
> 赞同：0
> 
> 时间：2013-02-15T19:46:14.963
> 
> 标签：javascript, .net, dojo, xmlhttprequest, character

我正在通过 JavaScript (Dojo) XHR 发布我的表单。一切正常，除非我想发布任何特殊字符。例如 XHR 标签：

```
<someTag> 
```

我收到错误 500（内部错误）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:52:26.467

似乎您的服务器端代码将发布的值解释为代码而不是字符串。我需要一个服务器端代码示例来改进它，但在客户端你可以使用：

```
var escapedValue = escape("<someTag>"); 
```

请注意，我重复一遍，依赖客户端字符编码**并不安全。**您应该在服务器端解决此问题。

# csv - 在 TSQL 中计算逗号分隔值

> ID：14902198
> 
> 赞同：0
> 
> 时间：2013-02-15T19:46:15.600
> 
> 标签：csv, sql-server-2008-r2, whitespace

表的架构/数据：

```
SubscriberId NewsletterIdCsv
------------ ---------------
11           52,52,,52 
```

我们有这个非规范化数据，我需要计算逗号分隔值的数量，为此我正在这样做：

```
SELECT SUM(len(newsletteridcsv) - len(replace(rtrim(ltrim(newsletteridcsv)), ',','')) +1) as SubscribersSubscribedtoNewsletterCount
FROM TABLE
WHERE subscriberid = 11 
```

结果 ：

```
SubscribersSubscribedtoNewsletterCount
--------------------------------------
4 
```

问题是我们的一些数据在逗号分隔值之间有空格/空格，如果我运行上述查询，预期结果应该是 3（因为其中一个值是空格），我如何检查我的查询以排除空格？

编辑 ：

数据 ：

```
SubscriberId NewsletterIdCsv
------------ ---------------
11           52,52,,52  
12           22,23 
```

我需要得到一个累积的 SUM 而不是每行的总和，所以对于上面的数据，我只需要一个最终计数，即在这种情况下为 5，不包括空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:54:16.600

这是一种解决方案，尽管它们可能是一种更有效的方法：

```
SELECT A.[SubscriberId],  
  SUM(CASE WHEN Split.a.value('.', 'VARCHAR(100)') = '' THEN 0 ELSE 1 END) cnt
FROM  
(
   SELECT [SubscriberId],  
     CAST ('<M>' + REPLACE(NewsletterIdCsv, ',', '</M><M>') + '</M>' AS XML) AS String  
   FROM  YourTable
) AS A 
CROSS APPLY String.nodes ('/M') AS Split(a)
GROUP BY A.[SubscriberId] 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/b807f/2)。

基本上它将您的 NewsletterIdCsv 字段转换为 XML，然后用于`CROSS APPLY`拆分数据。最后，使用`CASE`它来查看它是否为空白和`SUM`非空白值。或者，您可以构建一个 UDF 来做类似的事情。

# r - 在 roxygen2 中使用 R 包中的源子目录

> ID：14902199
> 
> 赞同：22
> 
> 时间：2013-02-15T19:46:31.687
> 
> 标签：r, documentation, package, roxygen

我想在`R`文件夹中使用目录结构作为包的源代码。例如，在我`R`的文件夹中，我有一个`algos`文件夹，其中包含要导出和记录的功能。但是`roxygen2`，默认情况下似乎不会通过文件夹的子`R`文件夹。

我尝试`@include`在 `R/algos/algo1.r' 的文件中使用如下关键字

```
#' @include algos/algo1.r 
```

但没有成功。有没有一种简单的方法来使用`R`源代码的子文件夹？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-15T23:46:25.330

[编写 R Extensions](https://cran.r-project.org/doc/manuals/R-exts.html)对 R 目录下的子目录有这样的说法（在[第 1.1.5 节](https://cran.r-project.org/doc/manuals/R-exts.html#Package-subdirectories)中）：

> `R`和`man`子目录可能包含名为`unix`或的特定于操作系统的子目录`windows`。

这意味着它们不能有除这两个之外的其他子目录。这在 r-devel 线程中得到确认，[稍后](https://stat.ethz.ch/pipermail/r-devel/2009-December/056022.html)在[另一个 r-devel 线程](https://stat.ethz.ch/pipermail/r-devel/2010-February/056513.html)中再次确认。

# asp-classic - ASP 经典授权包含文件 - 立即重定向或使用 If..Else

> ID：14902206
> 
> 赞同：0
> 
> 时间：2013-02-15T19:47:03.387
> 
> 标签：asp-classic

这可能是一个简单的问题，但我想不出最好的答案。

在经典 ASP 站点中，我使用 if/then 语句进行授权，如下所示：

```
if session("isAdmin")=true then
' Page Body
else
    Response.Redirect to Session/Auth Expired
end if 
```

我想知道这样做是否相同：

```
if not session("isAdmin")=true then
    Response.redirect to Session/Auth Expire
end if
' Page Body 
```

我应该将页面包装在 if..then 中，还是可以只在顶部包含一个文件，在页面正文出现之前检查和重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:49:20.127

第二个选项工作正常。在处理/呈现页面正文的其余部分之前，将重定向用户。

# php - HTML iframe 用 php 获取 src

> ID：14902209
> 
> 赞同：1
> 
> 时间：2013-02-15T19:47:06.137
> 
> 标签：php, html, url, iframe, src

我有一个网页，我想在其中显示另一个 html 页面。我使用了 iframe。页面通过 get 过程知道要加载什么。但是我认为这个编码有一个错误......

```
 <iframe src="
            <?
            $file       = ($_GET['ti'])

            if ($title = '')
                echo "information.html";
                else echo "$file";
            ?>
            "></iframe> 
```

页面将收到的 url 如下所示： [http ://www.website.com/reference.html?ti=unlimited.html](http://www.website.com/reference.html?ti=unlimited.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:48:13.693

需要分号：

```
 $file       = ($_GET['ti']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:52:41.160

[http://www.w3schools.com/php/php_if_else.asp](http://www.w3schools.com/php/php_if_else.asp)

这是您的 if / else 语法和所有 php 代码。写的不是很好。

```
<?php

$file = $_GET['ti'];

if ($title = '') {
     echo "information.html";
} else { 
     echo "$file";
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:51:25.187

使用[empty()](http://www.php.net/manual/en/function.empty.php)，像这样：

```
 <iframe src="
    <?
    $file       = ($_GET['ti'])

    if (empty($title))
        echo "information.html";
        else echo $file;
    ?>
    "></iframe> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T19:52:36.573

```
<?php
    $possible = array("information.html", "home.html", "test.html");
    $file = isset($_GET['ti']) && 
            in_array($_GET['ti'], $possible)? $_GET['ti'] : "information.html";
?>
<iframe src="<?php echo $file;?>"></iframe> 
```

# mapping - 将属性映射到 RestKit 0.20-rc1 中的请求标头

> ID：14902213
> 
> 赞同：0
> 
> 时间：2013-02-15T19:47:13.310
> 
> 标签：mapping, restkit

我正在使用 RestKit 0.20-rc1，我的印象是，为了设置请求的标头值，我需要使用 @metadata 表达式配置映射。这是我所拥有的：

```
RKObjectMapping* mapping = [RKObjectMapping requestMapping];
[mapping addAttributeMappingsFromDictionary:@{
    @"etag": @"@metadata.HTTP.request.headers.If-Match"}
];

RKRequestDescriptor* desc = [RKRequestDescriptor requestDescriptorWithMapping:mapping
                                objectClass:[MyObject class] rootKeyPath:nil];
[[RKObjectManager sharedManager] addRequestDescriptor: desc]; 
```

现在我希望这样做是将 MyObject 中的 etag 属性中的值设置到 If-Match 请求标头中。这看起来是对的还是我用错了方法？我应该以某种方式直接在请求中设置标头吗？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:53:04.727

要为请求设置标头值，您可以根据需要通过设置 HTTPClient 来设置对象管理器的标头。

`[[RKObjectManager sharedManager].HTTPClient setDefaultHeader:@"yourHeaderField" value:@"yourValue"];`

# php - 在 CodeIgniter 中使用 Wiki to HTML script (FFNN) 作为 Helper 的问题

> ID：14902215
> 
> 赞同：0
> 
> 时间：2013-02-15T19:47:18.310
> 
> 标签：php, codeigniter, wiki

我在 php 中找到了用于将 wiki 语法转换为 HTML 的[脚本](http://www.ffnn.nl/pages/projects/wiki-text-to-html.php)，并且我尝试将其集成到**Codeigniter**中。它似乎真的很容易使用。但是，它不起作用，而是产生了大约 8 个这样的错误：

```
Message: Use of undefined constant LS_NONE - assumed 'LS_NONE' 
```

我认为这是因为 Codeigniter 助手不是一个类而是函数，而这段代码是一个类，还是这个问题出在其他东西上？我也尝试将其用作模型但没有成功。

它似乎也非常过时（2007）。有人可以提出一个非常简单的替代方案，或者如果可能的话，可以给出一个如何将其转换为简单函数的想法？这是一段非常短的代码。我不确定这些常量与函数和类的关系是如何工作的。

我之前给了 Pear 的 Text_Wiki，但是它的使用和复杂性远远超出了我的要求和知识:)

//任何帮助将不胜感激

加载使用：

```
 $row = $query->row();
    $content=$row->course_content;
    $this->load->helper('wiki');
    $content=explode("\n", $content);               
    $output = WikiTextToHTML::convertWikiTextToHTML($content);
    $html=array_merge($output);
    $data['contents'][]= $html;
    $this->load->view('default/a',$data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:26:07.250

看起来脚本实际上是一个类。将其放在库文件夹中并使用`$this->load->library()`. 这将允许它正确初始化和定义它使用的常量。

就像是：

```
$this->load->library('wikitexttohtml');
$this->wikitexttohtml->convertWikiTextToHTML($wiki_text); 
```

# javascript - 运行 JavaScript 代码可以加载 JSONP 而不是脚本标签吗？

> ID：14902217
> 
> 赞同：1
> 
> 时间：2013-02-15T19:47:21.703
> 
> 标签：javascript, html, load, jsonp, head

[在这个好问题](https://stackoverflow.com/q/2067472/79485)的答案的帮助下，我刚刚得到了 JSONP 。现在，在我的设置中，HTML 文件通过 script 标签加载 JavaScript：

```
<script src="js/playlistcontroller.js"></script> 
```

现在我的问题是，这段代码能否在运行时触发加载我的 JSONP 响应？

目标是**避免**

```
<script src="playlistcontent.jsonp"></script> 
```

在 HTML Head 中，但在控制器中执行这些操作（如果你好奇的话，它恰好是一个[AngularJS控制器）。](http://angularjs.org/)

**这可能（从 JavaScript 加载 JavaScript）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:50:45.280

完全跨浏览器测试的脚本：

```
var CFLoad = {
    fScript : null,
    isFileReady : function ( v ) {
        return ( ! v || v == "loaded" || v == "complete" || v == "uninitialized" );
    },
    js : function(src,cb,attrs) {
        var s = document.createElement( "script" ),
            done = !1, i;
        s.src = src;
        s.type = "text/javascript";
        for ( i in attrs ) {
            s.setAttribute( i, attrs[ i ] );
        }
        s.onreadystatechange = s.onload = function () {
            if ( ! done && CFLoad.isFileReady( s.readyState ) ) {
                done = !0;
                if(cb) cb(s);
                s.onload = s.onreadystatechange = null;
            }
        };
        window.setTimeout(function() {
            if( !done) {
                done = !0;
                if(cb) cb(s,1);
            }
        }, 5000);
        if(this.fScript===null) this.init();
        this.fScript.parentNode.insertBefore( s, this.fScript );
    },
    css : function(href,cb,attrs) {
        var l = document.createElement("link"),i;
        l.href = href;
        l.rel = "stylesheet";
        l.type = "text/css";
        for ( i in attrs ) {
            l.setAttribute( i, attrs[i]);
        }
        if(this.fScript===null) this.init();
        this.fScript.parentNode.insertBefore(l,this.fScript);
        if(cb) window.setTimeout(cb, 0);
    },
    init : function() {
        this.fScript = document.getElementsByTagName( "script" )[ 0 ];
    }
}; 
```

**用法**

```
CFLoad.js("http://code.jquery.com/jquery-1.8.3.js", function (script_tag, failed) {
    if(!failed) {
        CFLoad.js("http://code.jquery.com/ui/1.9.2/jquery-ui.js", function(s, f) {
            if(!f) {
                alert("Loaded");
                js13 = jQuery.noConflict(true);
                main();
            }
        })
    }
}); 
```

在你的情况下：

```
CFLoad.js("playlistcontent.jsonp"); 
```

# java - 实现快速排序的错误

> ID：14902218
> 
> 赞同：1
> 
> 时间：2013-02-15T19:47:25.413
> 
> 标签：java

我的代码如下。它是项目中包含的一种排序方法，而不是冒泡排序，以提高代码效率。我的问题是我不断收到以下错误：

`array required, but java.util.List<Inpatient> found`

&

`QuickSort(java.util.List<Inpatient>,int,int) in UtilitiesInpatient cannot be applied to (int,int)`

我试过做一些研究，但是很多算法会因字符串或整数排序而有很大差异，而且对错误本身的研究也非常无益。非常感谢任何帮助或提示！

```
 public void QuickSort (List<Inpatient> inpatientArrayListIn, int first, int last) 
    {

        // Quick Sort

        List<Inpatient> pivotValue = new ArrayList<Inpatient>();
        List<Inpatient> lowerPointerValue = new ArrayList<Inpatient>();
        List<Inpatient> upperPointerValue = new ArrayList<Inpatient>();

        int pivotIndex = first;
        Inpatient tempPatient = (inpatientArrayListIn.get(pivotIndex));
        String pivot = tempPatient.getSurname();
        int upperPointer = first;
        int lowerPointer = last;

        while (upperPointer < lowerPointer) {

            while ((inpatientArrayListIn.get(upperPointer).getSurname().compareToIgnoreCase(pivot) <= 0) && (upperPointer < last)) {

                upperPointer++;

            }

            while (((inpatientArrayListIn.get(lowerPointer).getSurname()).compareToIgnoreCase(pivot) > 0) && (lowerPointer > first)){

                lowerPointer--;

            }

            if (upperPointer < lowerPointer) {

                for (int i = 0; i <= inpatientArrayListIn.size(); i++) {

                    upperPointerValue[i] = ((inpatientArrayListIn.get(upperPointer)));
                    lowerPointerValue[i] = ((inpatientArrayListIn.get(lowerPointer)));

                }

              /*  defaultTable.removeRow (upperPointer);
                defaultTable.insertRow (upperPointer, lowerPointerValue);
                defaultTable.removeRow (lowerPointer);
                defaultTable.insertRow (lowerPointer, upperPointerValue);
                */
                ++upperPointer;
                --lowerPointer;

            }

        }

        if ((inpatientArrayListIn.get(lowerPointer).getSurname()).compareTo(pivot) < 0) {

            for (int i = 0; i <= inpatientArrayListIn.size(); i++) {

                pivotValue[i] = inpatientArrayListIn.get(pivotIndex);
                lowerPointerValue[i] = (inpatientArrayListIn.get(lowerPointer));

            }
            /*
            defaultTable.removeRow (pivotIndex);
            defaultTable.insertRow (pivotIndex, lowerPointerValue);
            defaultTable.removeRow (lowerPointer);
            defaultTable.insertRow (lowerPointer, pivotValue);
            */
        }

        // Value in lowerPointer is now the pivot

        if (first < (lowerPointer-1)) 
        {

            QuickSort (first, (lowerPointer-1));

        }

        if ((lowerPointer+1) < last) 
        {

            QuickSort ((lowerPointer+1), last);

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:58:18.090

在这部分：

```
 if (first < (lowerPointer-1)) 
    {

        QuickSort (first, (lowerPointer-1));

    }

    if ((lowerPointer+1) < last) 
    {

        QuickSort ((lowerPointer+1), last);

    } 
```

您缺少第一个参数 ,`List<Inpatient> inpatientArrayListIn`与错误消息描述的完全一样。此外，您正在尝试`List`用作数组，如：

```
upperPointerValue[i] = ((inpatientArrayListIn.get(upperPointer))); 
```

如果我们查看 的文档[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)，您想要的方法是`set(int index, E element)`，所以上面将是：

```
upperPointerValue.set(i, inpatientArrayListIn.get(upperPointer)); 
```

对于编译器尚未告诉您的您所面临的问题，真的没有太多可以说的了。

# java - 如何在 Spring XML 配置中设置一个 long as hex

> ID：14902220
> 
> 赞同：0
> 
> 时间：2013-02-15T19:47:37.553
> 
> 标签：java, spring

我正在尝试做这样的事情：

```
<bean id="myBean" class="com.example.SomeThing">
    <property name="longValue">
        <bean class="java.lang.Long">
            <constructor-arg value="0x0418a14372d4186eL" type="long"/>
        </bean>
    </property>
</bean> 
```

但这会导致以下异常：

```
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'java.lang.Long#19190b75' defined in file [/apollo/env/path/to/config.xml]: Unsatisfied dependency expressed through constructor argument with index 0 of type [java.lang.String]: Ambiguous constructor argument types - did you specify the correct bean references as constructor arguments? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:59:17.273

我想你想要的`factory-method`参数`<bean>`：

```
<bean id="myBean" class="com.example.SomeThing">
    <property name="longValue">
        <bean class="java.lang.Long" factory-method="decode">
            <constructor-arg value="0x0418a14372d4186" />
        </bean>
    </property>
</bean> 
```

（注意缺少“L”后缀。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:08:06.087

你会用Java`@Configuration`吗？

```
@Configuration
public class Config {

    @Bean
    public SomeThing someThing() {
        final SomeThing bean = new SomeThing();
        bean.set(Long.parseLong("0418a14372d4186e", 16));
        return bean;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T19:55:23.580

SPeL应该可以工作

```
<bean id="myBean" class="com.example.SomeThing">
    <property name="longValue" value="#{0x0418a14372d4186eL}" />
</bean> 
```

# mongodb - 由于自动重新连接，无法插入 MongoDB

> ID：14902221
> 
> 赞同：1
> 
> 时间：2013-02-15T19:47:38.897
> 
> 标签：mongodb, pymongo

背景：我有一个使用 pymongo 的 python 脚本，它提取一些 XML 数据，将其解析为一个名为“all_orders”的字典数组。然后我尝试将它插入到集合“订单”中，我总是得到这个异常。我有理由确定我的字典数组是正确的，因为当列表很小时，它往往会起作用（我认为）。我还发现，我尝试插入到集合中的约 1300 个文档中有 8 个有效。

问题：你知道是什么导致了这个 AutoReconnect(str(e)) 异常吗？您知道如何解决或避免此问题吗？

错误跟踪：文件“mongovol.py”，第 152 行，在 get_reports orders.insert(all_orders)
文件“/Users/ashutosh/hrksandbox/lumoback-garden2/venv/lib/python2.7/site-packages/pymongo/collection. py”，第 359 行，插入 continue_on_error，self.__uuid_subtype)，安全）文件“/Users/ashutosh/hrksandbox/lumoback-garden2/venv/lib/python2.7/site-packages/pymongo/mongo_client.py”，行第853章

# core-data - 你如何清除 NSManagedObjectContext 缓存？

> ID：14902222
> 
> 赞同：1
> 
> 时间：2013-02-15T19:47:38.500
> 
> 标签：core-data, icloud, nsfetchrequest

我遇到了使用 iCloud 和 CoreData 的问题。当我在一台设备上更新我的核心数据数据库时，iCloud 会正确地将数据同步到我的第二台设备。

但是，假设我在更改核心数据之前让应用程序在两台设备上运行。我的第二台设备已经发出了 NSFetchRequest（可以说它称为 fetchRequest1）。在我的第二台设备上从 iCloud 导入成功后，再次从 fetchRequest1 调用相同的请求会返回我的所有新数据（插入的任何内容），但不包含对先前存在的实体的任何更新。

似乎有些东西被奇怪地缓存了，因为如果我关闭应用程序并重新打开它，一切都会正确显示。此外，如果我发出获取请求并遍历每个实体并在每个实体上调用 NSManagedObjectContext refreshObject 方法，那么数据就会显示出来！然而，这显然并不总是理想的，因为大型数据库无法处理这个问题。

有谁知道可能导致此问题的原因，或者刷新缓存以获取 NSManagedObjectContext 对象上的请求的方法？

# c# - 如何使用 Odbc 读取存储在文本文件（*.rtf、*.doc、*.docx、*.dat）中的数据表？

> ID：14902223
> 
> 赞同：0
> 
> 时间：2013-02-15T19:47:40.487
> 
> 标签：c#, odbc

我有多个文件，其中存储了数据文件。我想用 Odbc 或 jet 引擎读取它们并将它们存储到 DataSets 中。任何想法如何做到这一点？

我写了这段代码，但我收到错误文件是只读的：

```
 tring strConnString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + dirCSV + @";Extended Properties=""text;HDR=YES;FMT=Delimited"""; 

            OleDbConnection conn = new OleDbConnection(strConnString);
            OleDbCommand cmd = conn.CreateCommand();
            cmd.CommandText = String.Format("SELECT * FROM [{0}]", fileNevCSV);
            DataSet ds2 = new DataSet();
            OleDbDataAdapter da = new OleDbDataAdapter(cmd);
            da.Fill(ds2); 
```

# ruby-on-rails - 在模型中捕获会话/请求数据

> ID：14902228
> 
> 赞同：0
> 
> 时间：2013-02-15T19:47:52.023
> 
> 标签：ruby-on-rails, request, models

我正在开发系统事件跟踪功能，用于记录登录、注销、未经授权的访问、错误密码、发布的内容等事件。我希望捕获请求数据，例如 remote_ip、会话 ID、请求类型等。

我了解理想情况下，您不应访问模型中的请求数据，而应将其传递给控制器​​，如下所示：

文章#编辑：

```
@article.update_attributes(params[:article])
Event.create(:eventable => @article, :request => request) 
```

但是，通常会在 rake 任务甚至控制台中创建事件，因此我想将此代码从控制器中取出并放入模型中，如下所示：

```
class Article
  after_save :create_event

  def create_event
    Event.create(:message => "aritcle_updated")
  end
end 
```

然后在 Event 类中：

```
class Event
   before_create :record_ip_address

   def record_ip_address
     # This is how I want it, I don't know how to access request here!
     self.ip = request.remote_ip # How to access request?
   end
end 
```

实现这一目标的最佳方法是什么，以及如何访问模型中的 Request 对象？

*请注意，事件模型不需要存在请求 - 我只希望它在可用时处理它*

# c# - 使用“跨域”登录另一个域

> ID：14902230
> 
> 赞同：1
> 
> 时间：2013-02-15T19:48:05.643
> 
> 标签：c#, javascript, jquery, asp.net-mvc, asp.net-mvc-3

我想使用域：aaaa.com 在域：cccc.com 上为该站点创建一个登录表单。

请注意，我完全控制了 cccc.com 的服务器，并在 cccc.com 的服务器上设置了 CORS。我基本上也可以完全控制 aaaa.com 上的服务器。

我正在使用 jquery 的 $.ajax 向 cccc.com asp.net mvc 3 服务器发送 POST。看起来我得到了正确的响应，并且在响应中看到了 ASP.NET_SessionId 和 .ASPXAUTH cookie。当我在 javascript 中得到正确响应且没有登录错误时，我想使用 window.location 重定向到 cccc.com/Home/Index。到目前为止，一切似乎都在进行。身份验证、获得正确响应等。但是，当 javascript 重定向时，cccc.com 仍然希望我再次登录。为什么会这样？

是不是因为认证cookies属于aaa.com？我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:52:23.993

是的，身份验证 cookie 将属于其他站点，并且不共享。

如果您有一个 cccc.com 的子域而不是一个完全独立的域，那么如果您设置一个域范围的 cookie，它将起作用。

尽管如此，您必须在登录、注销和任何其他修改 cookie 存储方式的身份验证方法时复制 cookie。如果您在不同的服务器上，除非您有会话状态服务器，否则您也将失去进行会话的能力。

您可以在 POST 登录完成后尝试使用 javascript 复制 auth cookie。

# php - laravel 钩入 Eloquent 前后保存每个模型

> ID：14902231
> 
> 赞同：12
> 
> 时间：2013-02-15T19:48:06.803
> 
> 标签：php, laravel, eloquent

我是 Laravel 和 ORM 的新手。在保存任何模型之前和之后，我如何连接 Eloquent 来触发代码？我知道我可以为特定模型执行以下操作，但我正在研究如何为每个模型执行此操作。

```
class Page extends Eloquent {

   public function save()
   {
      // before save code 
      parent::save();
      // after save code
   }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-07-06T20:24:02.800

甚至还有更好的方法来实现这一点！创建一个观察者，让我们说一个名为的模型`House`：

```
class HouseObserver {

    public function saving(House $house) {
        // Code before save
    }

    public function saved(House $house) {
        // Code after save
    }

} 
```

现在通过在某处`House`添加线来向模型注册观察者。`House::observe(new HouseObserver)`该行可以在模型的 boot 方法中添加：

```
class House extends Eloquent {

    // Lots of model code

    public static function boot() {
        parent::boot();
        self::observe(new HouseObserver);
    }

} 
```

更多信息可以在[这里](http://laravel.com/docs/4.2/eloquent#model-observers)找到。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-02-14T06:31:40.790

使用 laravel 模型自己的生命周期事件可以轻松解决这个问题

```
/**
 * model life cycle event listeners
 */
public static function boot(){
    parent::boot();

    static::creating(function ($instance){
        //
    });

    static::created(function ($instance){
        //
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T21:58:48.457

您可以创建一个扩展 eloquent 的 BaseModel 类，然后让您的所有模型扩展 BaseModel。这是一个例子：

```
abstract class Elegant extends Eloquent{

/* Save ****************************/
public function preNew() {}
public function postNew() {}
public function preSave() { return true; }
public function postSave() {}
public function save($validate=true, $preSave=null, $postSave=null)
{
    $newRecord = !$this->exists;
    if ($validate)
        if (!$this->valid()) return false;
    if($newRecord)
        $this->preNew();

    $before = is_null($preSave) ? $this->preSave() : $preSave($this);
      // check before & valid, then pass to parent
    $success = ($before) ? parent::save() : false;
    if ($success)
        is_null($postSave) ? $this->postSave() : $postSave($this);
    if($newRecord)
        $this->postNew();
    return $success;
}
public function onForceSave(){}
public function forceSave($validate=true, $rules=array(), $messages=array(), $onForceSave=null)
{
    if ($validate)
        $this->valid($rules, $messages);
     $before = is_null($onForceSave) ? $this->onForceSave() : $onForceSave($this);  // execute onForceSave
     return $before ? parent::save() : false; // save regardless of the result of validation
}

/** Soft Delete ****************************/
public function preSoftDelete() {  return true;  }
public function postSoftDelete()  { }
public function softDelete($val = true, $preSoftDelete=null, $postSoftDelete=null)
{
    if ($this->exists)
    {
        $before = is_null($preSoftDelete) ? $this->preSoftDelete() : $preSoftDelete($this);
        $success = null;
        if($before) {
            $this->set_attribute(static::$softDelete, $val);
            $success = $this->save(false);
        }
        else
            $success = false;
        if ($success)
        {
            is_null($postSoftDelete) ? $this->postSoftDelete() : $postSoftDelete($this);
         }
        return $success;
    }
}

/** Hard Delete ****************************/
public function preDelete()  { return true;}
public function postDelete(){}
public function delete( $preDelete=null, $postDelete=null)
{
    if ($this->exists)
    {
        $before = is_null($preDelete) ? $this->preDelete() : $preDelete($this);
        $success = ($before) ? parent::delete() : false;
        if ($success)
        {
            is_null($postDelete) ? $this->postDelete() : $postDelete($this);
         }
        return $success;
    }
}
} 
```

# c# - 使用 Windows 服务的 Web API 通过轮询接收命令和执行任务？

> ID：14902236
> 
> 赞同：2
> 
> 时间：2013-02-15T19:48:23.040
> 
> 标签：c#, asp.net-mvc, windows-services, asp.net-web-api

我有一个项目，我需要创建一个 Windows 服务，当通过命令指示时，它将执行各种任务。该服务器将在多台服务器上运行，并在请求时有效地执行相同类型的任务。

例如，我想要一个 Web API 服务来监听来自服务器的请求。

服务器上运行的服务将每 25 秒左右向 Web API 发送一个查询，并将其 SERVERNAME 传递给它。然后，Web API 逻辑将查找 SERVERNAME 并查找各种任务的任何状态更新...即，如果 DELETE 命令的状态为 1，则服务将删除包含日志文件的文件夹...如果状态对于 ZIP 命令为 1，该服务将压缩包含日志文件的文件夹并将它们 FTP 到一个集中位置。

这个概念似乎很简单，我想我需要一个轻推来告诉我这听起来是否是一个好的设计。我正在考虑将 .NET 4.5 用于 Windows 服务，这样我就可以使用 HttpClient 对象，当然还有 .NET 4.5 用于 Web API/MVC 项目。

有人可以让我开始了解基本的 Web API 会是什么样子，可以为正在运行的 Windows 服务提供状态更新并向它们发出命令...

我正在考虑拥有一个简单的 MVC 网站，人们将拥有一个服务器列表（可能基于简单的 XML 文件或其他东西），他们可以单击各种单选按钮来打开“DELETE”、“ZIP”或其他任何东西，以触发服务上的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T02:07:47.960

我做类似的事情。我有一个主要的 Web API（一个 Windows 服务）来驱动我的应用程序并有一个名为`/Heartbeat`.

我还有第二个 Windows 服务，它每 30 秒触发一次计时器。每次计时器触发时，它都会调用 POST `/heartbeat`。当心跳请求被处理时，它会去寻找已经安排好的任务。

这种方法的优点是服务使 heartbeat 请求非常简单，并且永远不必更新。所有与心跳相关的逻辑都在主服务中。

服务的胆量是这样的。这是旧代码，所以它仍然使用 HttpWebRequest 而不是 HttpClient，但这很容易改变。

```
 public partial class HeartbeatService : ServiceBase {
        readonly Timer _Timer = new System.Timers.Timer();

        private string _heartbeatTarget;

        public HeartbeatService() {
            Trace.TraceInformation("Initializing Heartbeat Service");
            InitializeComponent();
            this.ServiceName = "TavisHeartbeat";
        }

        protected override void OnStart(string[] args) {
            Trace.TraceInformation("Starting...");
            _Timer.Enabled = true;

            _Timer.Interval = Properties.Settings.Default.IntervalMinutes * 1000 * 60; 
            _Timer.Elapsed += new ElapsedEventHandler(_Timer_Elapsed);

            _heartbeatTarget = Properties.Settings.Default.TargetUrl; 
        }

        protected override void OnStop() {
            _Timer.Enabled = false;
        }

        private void _Timer_Elapsed(object sender, ElapsedEventArgs e) {
            Trace.TraceInformation("Heartbeat event triggered");
            try {

                var httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(_heartbeatTarget);
                httpWebRequest.ContentLength = 0;
                httpWebRequest.Method = "POST";
                var response = (HttpWebResponse)httpWebRequest.GetResponse();
                Trace.TraceInformation("Http Response : " + response.StatusCode + " " + response.StatusDescription); 
            } catch (Exception ex) {
                string errorMessage = ex.Message;
                while (ex.InnerException != null) {
                    errorMessage = errorMessage + Environment.NewLine + ex.InnerException.Message;
                    ex = ex.InnerException;
                }
                Trace.TraceError(errorMessage);
            }

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T13:00:14.683

您可以使用`ServiceController.ExecuteCommand()`.NET 中的方法来完成。使用该方法，您可以将自定义命令添加到 Windows 服务。然后在您的服务中，您需要实施`ServiceBase.OnCustomCommand()`以在服务中提供传入的自定义命令事件。

```
const int SmartRestart = 8;

...

//APPLICATION TO SEND COMMAND
service.ExecuteCommand(SmartRestart);

...

//SERVICE
protected override void OnCustomCommand(int command)
{
    if (command == SmartRestart)
    {
        // ...
    }
} 
```

# c# - Linq-To-Entities 'Contains' 条款 1-many 关系

> ID：14902243
> 
> 赞同：3
> 
> 时间：2013-02-15T19:48:52.760
> 
> 标签：c#, asp.net, entity-framework, linq-to-entities, entity-sql

考虑一个像这样的（简化的）表结构：

[用户]

*   EMPID
*   姓名

[任命]

*   (FK_APPT_USER) EMPID
*   APPTYPEID
*   完全的

每个用户可以有 0..* 个约会，每个约会可以是多个 APPTYPEID 之一，可以是完整的也可以是不完整的。

我想过滤 IQueryable[USER] 查询的结果集，使其仅包括拥有某个 typeID 的 appt（比如 1）且 COMPLETE 字段位于值列表中的用户。我这样做是作为 gridview 过滤器的一部分，它允许用户选择仅显示特定约会类型的已完成或未完成的用户。

```
List<string> vals = new List<string> {"Y","N"}
//maybe the user has only selected Y so the above list only contains 1 element
var qry = ctx.USER.Where(x=> vals.Contains( ? ));
//bind etc 
```

如果我与列表比较的值与 USER 对象处于 1-1 关系，这真的很容易做到，例如：

```
var qry = ctx.USER.Where(x=> vals.Contains(x.NAME)); 
```

但是我不明白如何处理 1 对多关系，比如我的约会表，这让我全神贯注地试图为它概念化实体 sql。任何人都可以解释如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:51:57.980

```
qry = ctx.USER.Where(u => u.APPOINTMENTS
                           .Where(a => a.APPTYPEID == 1)
                           .Any(a => vals.Contains(a.COMPLETE))); 
```

*更新*（添加返回那些根本没有约会的用户）

```
qry = ctx.USER.Where(u => 
        !u.APPOINTMENTS.Any() ||
         u.APPOINTMENTS.Any(a => a.APPTYPEID == 1 && vals.Contains(a.COMPLETE))); 
```

# c# - 实体框架和多个模式

> ID：14902245
> 
> 赞同：19
> 
> 时间：2013-02-15T19:48:55.817
> 
> 标签：c#, oracle, entity-framework, ef-code-first

我正在尝试设置我的 dbContext 以便它可以处理单个 Oracle 数据库中的多个模式。我不想要一个单一的 dbContext 文件，所以我想出了以下内容：

```
public class oraDbContext : DbContext
{
    static oraDbContext() {
        Database.SetInitializer<oraDbContext>(null);
    }

    public oraDbContext(string connName)
        : base("Name=" + connName) { }

    public _schema1 schema1 = _schema1.Instance;
    public _schema2 schema2 = _schema2.Instance;

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        schema1.OnModelCreating(modelBuilder);
        schema2.OnModelCreating(modelBuilder);
    }
} 
```

架构文件如下所示：

```
public sealed class _schema1
{
    private static readonly _schema1 instance = new _schema1();

    static _schema1() { }
    private _schema1() { }

    public static _schema1 Instance {
        get {
            return instance;
        }
    }

    public DbSet<someTable> someTable { get; set; }

    internal void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Configurations.Add(new someTableMap());
    }
} 
```

但是，当我尝试执行查询时，我收到错误：`Value cannot be null`. 它所指的值是`someTable`_schema1 中的属性。

**A.**我该如何解决这个问题？

**B.**有更好的解决方案吗？

**编辑：**我想要的是能够编写如下代码 -

```
var query1 = from p in db.schema1.someTable
             select p;
var query2 = from p in db.schema2.someTable
             select p; 
```

其中 someTable 在两种模式中都是相同的。在我们的数据库中，我们有几个模式具有完全相同的表，这些表具有相同或几乎相同的列。我不想为每个模式创建一个单独的 dbContext，因为如果我创建一个从 5 个模式中提取的查询，这可能意味着 5 个不同的连接。如果我在直接 SQL 中编写相同的查询，我可以通过一个连接从 5 个不同的模式中提取数据，这就是我想在这里完成的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T16:57:10.993

在对实体框架进行一些研究时，我遇到了以下帖子：

[http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/](http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/)

它并没有给我一个单独的 dbContext 来使用，但它只使用一个连接（这是我不想使用多个 dbContexts 的原因）。设置以下代码后：

```
public class oraDbContext : DbContext
{
    static oraDbContext() {
        Database.SetInitializer<oraDbContext>(null);
    }

    private oraDbContext(DbConnection connection, DbCompiledModel model)
        : base(connection, model, contextOwnsConnection: false) { }

    public DbSet<SomeTable1> SomeTable1 { get; set; }
    public DbSet<SomeTable2> SomeTable2 { get; set; }

    private static ConcurrentDictionary<Tuple<string, string>, DbCompiledModel> modelCache = new ConcurrentDictionary<Tuple<string, string>, DbCompiledModel>();

    public static oraDbContext Create(string schemaName, DbConnection connection) {
        var compiledModel = modelCache.GetOrAdd(
            Tuple.Create(connection.ConnectionString, schemaName),
            t =>
            {
                var builder = new DbModelBuilder();
                builder.Configurations.Add<SomeTable1>(new SomeTable1Map(schemaName));
                builder.Configurations.Add<SomeTable2>(new SomeTable2Map(schemaName));

                var model = builder.Build(connection);
                return model.Compile();
            });

        return new oraDbContext(connection, compiledModel);
    }
} 
```

这当然需要像这样设置我的映射文件：

```
public class DailyDependencyTableMap : EntityTypeConfiguration<DailyDependencyTable>
{
    public SomeTableMap(string schemaName) {
        this.ToTable("SOME_TABLE_1", schemaName.ToUpper());

        //Map other properties and stuff
    }
} 
```

编写使用多个模式的查询有点烦人，但目前，它完成了我需要它做的事情：

```
using (var connection = new OracleConnection("a connection string")) {
    using (var schema1 = oraDbContext.Create("SCHEMA1", connection))
    using (var schema2 = oraDbContext.Create("SCHEMA2", connection)) {

        var query = ((from a in schema1.SomeTable1 select new { a.Field1 }).ToList())
             .Concat((from b in schema2.SomeTable1 select new { b.Field1 }).ToList())
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-05T10:04:03.957

`Table`您可以通过属性为每个表指定架构。

```
[Table(nameof(MyTable1), Schema = "Schema1")]
public class MyTable1 { }

[Table(nameof(MyTable2), Schema = "Schema2")]
public class MyTable2 { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T14:55:43.687

尝试改用部分类

```
public partial class oraDbContext : DbContext
{
    static oraDbContext() {
        Database.SetInitializer<oraDbContext>(null);
    }

    public oraDbContext(string connName)
        : base("Name=" + connName) { }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        schema1(modelBuilder);
        schema2(modelBuilder);
    }
}

public partial class oraDbContext : DbContext
{
    public DbSet<someTable> someTable { get; set; }
    void schema1(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new someTableMap());
    }
} 
```

# mysql - 跨三个表的 SQL 查询

> ID：14902249
> 
> 赞同：2
> 
> 时间：2013-02-15T19:49:13.677
> 
> 标签：mysql

请多多包涵，因为我的 SQL 不太好。

我想编写一个查询，考虑来自 3 个不同表的信息。

让我解释一下情况：当客户预订一个房间时，他们有几个房间的偏好，并且房间可以在不同的日子预订（每天必须进行一个唯一的预订）在不同的时间。

我现在想编写一个查询来检查一天中的某个时间是否有房间可用。这些是我数据库中的表

**房间**

此表存储有关每个房间的信息

```
Fields:

id (primary key)
capacity    
img 
notes   
building_id 
roomstructure_id    
lecturestyle_id 
```

**要求**

此表存储有关每个请求的消息

```
Fields

id (primary key)
day_id
period_id
preference_id (foreign key from preference.id) 
```

此表存储有关每个请求的信息。

**偏爱**

此表存储有关所有房间偏好的信息。

```
id (PK)      
request_id (foreign key from request.id)      
room_id (foreign key from room.id) 
```

我希望我想要做的事情变得显而易见。

例如，如果我正在检查房间 C233 是否在星期一 09:00 被预订 - 我需要在**房间**表中查找房间信息，然后使用**偏好**表中的**room_id**来查找**request_id**。

 ****一旦我获得了已链接到特定房间的**request_id （在房间****偏好表中），我就可以在****请求**表中查看 day_id=1 和 period_id=1 。如果 day_id=1 和 period_id=1 则表示房间是在星期一 09:00 预订的。

这意味着该房间不可用，因此不计算在内，但如果找不到该行，则将其计算在内。

这是迄今为止我编写的 SQL - 它非常简单，但它并没有完成我想要它做的所有事情：

```
SELECT COUNT(*) totalCount FROM ts_room 
```

除此之外，我在另一个论坛上得到了建议——这里的代码。但它根本不起作用。我认为它不符合我的标准：

```
SELECT  COUNT(*) totalCount
FROM    room a
        INNER JOIN preference b
            ON a.id = b.room_id
        INNER JOIN ts_request c
            ON b.request_id = c.preference_id
WHERE   c.day_id = 1 AND c.period_id = 1 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:22:22.303

好的，您发布的代码接近正确，但有几个问题。首先，您的请求表名称不一致。在您的描述中，您只是将其称为“请求”，但在代码中它是“ts_request”。不过，可能只是您的问题中的错字。

另一个问题是您的第二个 INNER JOIN（在首选项和请求之间）中的键混淆了。你有 b.request_id = c.preference_id。IE：您试图将两个外键相互匹配，而不是与它们所代表的主键匹配。您只需要一个主/外键对即可进行连接。所以这应该有效（未经测试）：

```
SELECT  COUNT(*) totalCount
FROM    room a
        INNER JOIN preference b
            ON a.id = b.room_id
        INNER JOIN request c
            ON b.request_id = c.id
WHERE   c.day_id = 1 AND c.period_id = 1 
```

（我不喜欢使用完全非描述性的标识符 a、b 和 c，但它是有效的代码。就我个人而言，我至少会使用 rm、rq、pf 或类似的东西。或者甚至只是坚持使用表名，因为无论如何它们都很短。）

需要注意的一件事是，从请求表和首选项表的两个方向都有外键意味着每个请求只有一个首选项。（或者如果请求表中的preference_id 字段可以留空/空，则可能为零。）如果您希望每个请求可以提交多个首选项，则应该删除该preference_id 外键列，因为它不是独特的价值。上述查询也不需要它，尽管如果确实每个请求确实有一个偏好限制，那么显然您可能已经将它包含在其他地方使用。

编辑：正如您对问题的评论中提到的，此查询也不查找特定房间，而是返回为第 1 天第 1 期保留的房间总数。如果您想要一个特定房间，您还可以将“AND a.id =”添加到您的 WHERE 子句中。****

# javascript - 处理多个 requirejs 上下文之间的常见依赖关系的做法？

> ID：14902258
> 
> 赞同：6
> 
> 时间：2013-02-15T19:49:38.140
> 
> 标签：javascript, module, requirejs, single-page-application

我已经开始使用 requirejs 上下文作为对大型单页应用程序进行分区的一种方式，该应用程序由具有自己的一组依赖项的独立 SPA 组成。

James Burke 描述了我现在在 github 上的此评论中遇到的关于多个上下文及其共同依赖项未共享的问题，[https://github.com/aurajs/aura/pull/170#issuecomment-10973485](https://github.com/aurajs/aura/pull/170#issuecomment-10973485)

**如何在不同的 requirejs 上下文之间共享公共依赖项，而不会导致对同一文件的重复请求？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T00:15:30.263

我遇到了和你描述的一样的问题。我编写了一个插件，负责在嵌套上下文之间共享公共依赖项。

Requirejs 有一个包含所有上下文的映射，它定义了依赖项：

需要js.s.contexts

```
{
  _: {
    defined: {
      commondep: {},
      main: undefined
    }
  }
  plugin: {
    defined: {
      commondep: {},
      plugin: {}
    }
  }
} 
```

_ 上下文是主要上下文。我们可以使用此上下文来确定所有全局模块定义。可以通过预加载插件脚本并将依赖项与全局依赖项进行比较来确定共享依赖项。共享模块可以注入沙箱上下文：

```
function injectDependency(dependencyName, contextName) {
  var ctx = getContext(contextName);
  var dependencyInstance = require(dependencyName);

  ctx.defQueue.push([ dependencyName, [], function() { return dependencyInstance; }]);
}

function getContext(contextName) {
  return requirejs.s.contexts[contextName];
} 
```

在这个片段中，我们以非异步方式调用 require 来获取模块的全局实例。通过将模块推入定义队列，将模块注入沙箱。

可以从[https://github.com/igsp/requireplug](https://github.com/igsp/requireplug)下载此插件加载器解决方案的实现。

I posted a more detailed description of the mechanics of this solution on my blog: [https://intergalacticspacepocket.wordpress.com/2014/08/07/nesting-requirejs-contexts-with-shared-dependencies/](https://intergalacticspacepocket.wordpress.com/2014/08/07/nesting-requirejs-contexts-with-shared-dependencies/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:27:12.463

您可能想查看[browserify](https://github.com/substack/node-browserify)以打包大型多模块 js 应用程序。

# javascript - Kendo UI Grid - 如何停留在选定的网格页面上

> ID：14902259
> 
> 赞同：2
> 
> 时间：2013-02-15T19:49:43.943
> 
> 标签：javascript, kendo-ui

我在带有 Ajax 绑定的页面上有 Kendo UI MVC 网格。用户可以单击行查看产品详细信息页面上的产品详细信息。

问题是，如果用户移动到网格页面 3 并转到产品详细信息页面，然后单击返回按钮网格刷新并向他们显示第一个网格页面。

是否有可能在单击后退按钮后网格停留在第 3 页上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:35:37.480

实际上，您必须实现网格寻呼机的更改侦听器：

```
$('#grid').kendoGrid({
    ... 
    pageable: {         
        change: function (e){
            location.hash = e.index; // or set the cookie               
        }           
    },
}); 
```

然后监听位置（或[cookie](https://stackoverflow.com/a/5908604/587239)）的变化。位置示例：

```
$(window).on('hashchange', function() {
    var gridPager = $('#grid').data("kendoGrid").pager;   
    var gridPage = gridPager.page(), currentPage = getPageFromBrowserWithSomeDefault();

    //  Update only if necessary since kendo does not do extra comparison
    //  UPD: if server returns no results gridPage would be 0 instead of 1
    if (gridPage > 0 && gridPage != currentPage) {
        gridPager.page(currentPage);
    }     
}); 
```

棘手的是使直接导航成为可能。由于一开始数据源对项目的数量一无所知，因此它不允许请求除第一个以外的页面。所以一定要*请求*它：

```
 $('#grid').kendoGrid({
        ...
        autoBind: true,
    }); 
```

一旦获得并处理了响应，您就可以触发“ *hashchange* ”处理程序来更新网格（例如在您的 ajax 调用的“*成功”处理程序中）：*

```
 $(window).trigger('hashchange'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T07:20:49.710

您可以在转到详细信息页面之前保留网格状态

在详细介绍之前：

```
var grid = $("#grid").data("kendoGrid");
localStorage["kendo-grid-options"] = kendo.stringify(grid.getOptions()); 
```

文件加载时：

```
$(document).ready(function() {
    var grid = $("#grid").data("kendoGrid");
    var options = localStorage["kendo-grid-options"];
    if (options)
        grid.setOptions(JSON.parse(options));
}); 
```

[演示](http://demos.telerik.com/kendo-ui/grid/persist-state)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T14:49:47.233

您可以通过这种方式移至第 3 页： $('#grid').data().kendoGrid.dataSource.page(3); 因此，您只需将“当前页面”保存在 cookie 或 URL 中（这个更好）。然后你转到第 3 页 dater kendo-Grid dataBound :) ...我还没有测试过，但我认为它有效 :)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-27T06:54:52.763

```
var selectedPage=1;    
    $('#grid').kendoGrid({

        pageSize: 10,
        page: selectedPage,
        ... 
        pageable: {         
            change: function (e){
                selectedPage = e.index;            
            }           
        },
    }); 
```

# php - php循环mysql只执行一次

> ID：14902262
> 
> 赞同：0
> 
> 时间：2013-02-15T19:49:50.523
> 
> 标签：php, mysql, foreach

** 已回答 .. 逗号后是空格。感谢大家！

当我执行以下代码时，会显示所有 $castmember 但是 mysql 仅在第一个上运行。

```
 $getactors=explode(",", $actors);
   foreach($getactors as $castmember){

     $idolid="";
     $srch3= "SELECT `id`,`dir` FROM `idols` WHERE `name`='$castmember'";
     $result5 = mysql_query($srch3);
     while ($row5 = mysql_fetch_assoc($result5)) {
     $idolid = $row5["id"];
     $idoldir= $row5["dir"];
     }

   if($idolid){ echo"<li style=\"font-size:1.2em;\" ><a href=\"/gallery/$idolid/$idoldir.html\" title=\"$castmember\" itemprop=\"actors\"> $castmember</a>";
     } else {
   echo"<li style=\"font-size:1.2em;\"><div style=\"display:inline\" itemprop=\"actors\"> $castmember</div>";
     }
   echo"<span></span></li>\n";
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:59:10.070

您不需要`explode`然后循环运行查询。您可以使用`IN`子句。

```
 $srch3= "SELECT `id`,`dir` FROM `idols` WHERE `name` IN ('".$actors."')"; 
```

这仅在您的`$actors`数组具有有效值时才有效。

# c# - 重定向到自定义禁止页面在 asp.net 中不起作用

> ID：14902263
> 
> 赞同：0
> 
> 时间：2013-02-15T19:49:52.880
> 
> 标签：c#, asp.net, authentication

我有一个公共（无身份验证）网站，除了一个需要身份验证的页面。这很好用。

受保护的页面位于具有以下 web.config 的文件夹中：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <authorization>
            <allow roles="Warehouse" />
            <deny users="*" />
        </authorization>

        <customErrors mode="RemoteOnly" defaultRedirect="../WebForbidden.aspx">
            <!--<error statusCode="403" redirect="WebForbidden.aspx" />
            <error statusCode="404" redirect="FileNotFound.htm" />-->
        </customErrors>

    </system.web>
</configuration> 
```

该页面的主文件具有以下内容：

```
protected void Page_Init(object sender, EventArgs e)
    {
        CheckLogged();
    }

    public bool CheckLogged()
    {
        bool status = false;

        if (Session["Username"] == null)
        {
            FormsAuthentication.SignOut();
            Response.Redirect("../WebForbidden.aspx");
            //FormsAuthentication.RedirectToLoginPage();
        }
        else
        {
            status = true;
        }

        return status;
    } 
```

我在网站的根目录中有一个 WebForbidden.aspx 页面。

现在，每次我尝试直接进入受保护页面（除非经过身份验证，否则禁止访问）而不是显示 Forbidden 页面时，都会显示错误：`The resource cannot be found`，当然该网站正在尝试重定向到不存在的登录页面。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:58:55.533

尝试告诉表单身份验证重定向到`WebForbidden.aspx`而不是让它使用默认值，如果你不指定它会寻找`Login.aspx`

```
<system.web>
    <authentication mode="Forms">
        <forms loginUrl="WebForbidden.aspx" />
    </authentication>
</system.web> 
```

# ruby-on-rails - Rails 从控制器渲染页面

> ID：14902264
> 
> 赞同：1
> 
> 时间：2013-02-15T19:49:53.397
> 
> 标签：ruby-on-rails, image, render

我正在尝试使用 IMGKit 创建我拥有的网页图像。我想做的是在不同的网页上创建图像。为了实现这一点，我有一些看起来像这样的代码：

```
respond_to do |format|
  format.html
  format.jpeg do
    dashboards_response = render controller: :dashboards
    image = IMGKit.new(dashboards_response[0]).to_img(:jpg)
    send_data(image, type: "image/jpeg", filename: "data.jpeg", disposition: "inline")
  end
end 
```

我想通过呈现另一个页面来响应 jpeg。这失败了一个模板丢失错误，这真的很奇怪。为了调试它，我将渲染调用移到了 DoubleRenderError 上的 respond_to 块之外。我不确定如何进行此操作，有人可以提供一些见解吗？

谢谢

# caching - 仅在使用虚拟网络时专用工作缓存角色卡在忙碌状态

> ID：14902265
> 
> 赞同：2
> 
> 时间：2013-02-15T19:50:06.117
> 
> 标签：caching, azure, azure-virtual-network, azure-caching

我有一个包含专用缓存辅助角色的 Azure 服务。

当将 NetworkConfiguration 部分添加到指定我们的虚拟网络的 cscfg 文件时，缓存角色不会启动并卡在“忙碌”状态。我无法从缓存角色（通过 Intellitrace 或 azure 诊断日志）访问任何信息，因为看起来角色本身从未启动。

删除 NetworkConfiguration 部分后，缓存角色开始正常。

有没有人遇到过类似的问题或有解决此问题的任何提示？

用于缓存角色的存储帐户位于连接到虚拟网络的关联组上。

我们使用的网络配置在这里：

```
<NetworkConfiguration>
<Dns>
  <DnsServers>
    <DnsServer name="DNSServer" IPAddress="10.10.0.2" />
  </DnsServers>
</Dns>
<VirtualNetworkSite name="Prod" />
<AddressAssignments>
  <InstanceAddress roleName="CacheRole">
    <Subnets>
      <Subnet name="Subnet" />
    </Subnets>
  </InstanceAddress>
  <InstanceAddress roleName="Precacher">
    <Subnets>
      <Subnet name="Subnet" />
    </Subnets>
  </InstanceAddress>
  <InstanceAddress roleName="Management">
    <Subnets>
      <Subnet name="Subnet" />
    </Subnets>
  </InstanceAddress>
</AddressAssignments> 
```

任何帮助，将不胜感激。谢谢。

# c++ - cin 是在这种情况下使用的正确函数吗？

> ID：14902268
> 
> 赞同：0
> 
> 时间：2013-02-15T19:50:26.997
> 
> 标签：c++, input, getline, cin

这是我的代码的一小段：

```
int read_prompt() {
string prompt,fname,lname,input;
int id;
cout << "customers> ";

cin >> prompt;

if (prompt.compare("add") == 0) {
    cin >> id;
    cin >> fname;
    cin >> lname;
    NewCustomer(id,fname,lname);
} else if (prompt.compare("print")==0) {
    print_array();
} else if (prompt.compare("remove")==0) {
    cin >> id;
    RemoveCustomer(id);
} else if (prompt.compare("quit")==0) {
    return 0;
} else {
    cout << "Error!" << endl;
}
read_prompt();
return 0;

} 
```

只要用户没有输入任何意外的东西，这就可以正常工作。该程序的一个测试用例应该传递输入“add 125mph Daffy Duck”，其 id 最终为 125，fname 等于 mph，lname 等于 Daffy。在此函数接收到所有三个变量后，它再次调用自身并再次提示用户，然后 Duck 会输入哪个“错误！” 明显得到输出。

当用户输入它时，我将如何捕捉到这个错误？cin 是在这方面使用的最佳功能吗？我确实查找了 getline()，但我有点不确定如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:07:06.547

如果是我，

*   我会一次读入整行，然后使用`std::istringstream`.
*   我会不惜一切代价避免回避。
*   我可能会添加更严格的错误检查。

像这样：

```
#include <vector>
#include <boost/lexical_cast.hpp>
#include <iostream>
#include <sstream>
#include <stdexcept>

typedef std::vector<std::string> Args;

std::istream& operator>>(std::istream& is, Args& args) {
    std::string s;
    if(std::getline(is, s)) {
        std::istringstream iss(s);
        args.clear();
        while( iss >> s )
            args.push_back(s);
    }
    return is;
}

void NewCustomer(int, std::string, std::string) {
    std::cout << __func__ << "\n";
}
void RemoveCustomer(int) {
    std::cout << __func__ << "\n";
}
void print_array() {
    std::cout << __func__ << "\n";
}
int read_prompt() {
    Args args;
    while(std::cout << "customers> " && std::cin >> args) {
        try {
            if(args.at(0) == "add") {
                NewCustomer(
                    boost::lexical_cast<int>(args.at(1)),
                    args.at(2),
                    args.at(3));
            } else if (args.at(0) == "print") {
                print_array();
            } else if (args.at(0) == "remove") {
                RemoveCustomer(boost::lexical_cast<int>(args.at(1)));
            } else if (args.at(0) == "quit") {
                return 0;
            } else {
                throw 1;
            }
        } catch(boost::bad_lexical_cast&) {
            std::cout << "Error!\n";
        } catch(std::out_of_range&) {
            std::cout << "Error!\n";
        } catch(int) {
            std::cout << "Error!\n";
        }
    }
}

int main () {
    read_prompt();
} 
```

# css - 插入div后的CSS缩进段落？

> ID：14902270
> 
> 赞同：0
> 
> 时间：2013-02-15T19:50:35.890
> 
> 标签：css

我的目标：除了 .firstCharacter 之后的段落之外，所有段落都缩进。

我的页面中某些部分的第一段有一个首字下沉。我已将第一个段落标签之后的所有段落标签设置为使用...缩进

```
.storyContainer p + p {
    text-indent: 1.5em;
    margin-top: 0
} 
```

我正在使用...设置我的下沉帽

```
.firstcharacter {
    float: left;
    font-size: 80px;
    line-height: 60px;
    padding-top: 4px;
    padding-right: 8px;
    padding-left: 3px;
    font-family: 'Droid Serif', serif;
} 
```

我的html是这样的......

```
<div class="headline">This is a headline!</div>

<p><span class="firstcharacter">T</span>his text NOT indented because it's first</p>
<p>This text will be indented because it's second.</p>
<p>This text will be indented because it's third.</p>

<div class="someBox">This is some extra box</div>

<p>I want this to be indented but it won't be because it is first after the box!</p>
<p>This text will be indented because it's second.</p>

<div class="headline">This is a headline!</div>

<p><span class="firstcharacter">T</span>his text NOT indented because it's first</p>
<p>This text will be indented because it's second.</p>
<p>This text will be indented because it's third.</p>

<div class="someBox">This is some extra box</div>

<p>I want this to be indented but it won't be because it is first after the box!</p>
<p>This text will be indented because it's second.</p> 
```

关于如何解决这个问题的任何帮助？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:04:30.800

[http://jsfiddle.net/WRKxQ/](http://jsfiddle.net/WRKxQ/)

html:

```
<div class="headline">This is a headline!</div>
<p class="firstcharacter"><span>T</span>his text NOT indented because it's first</p>
<p>This text will be indented because it's second.</p>
<p>This text will be indented because it's third.</p>
<div class="someBox">This is some extra box</div>
<p>I want this to be indented but it won't be because it is first after the box!</p>
<p>This text will be indented because it's first.</p>

<div class="headline">This is a headline!</div>

<p class="firstcharacter"><span>T</span>his text NOT indented because it's first</p>
<p>This text will be indented because it's second.</p>
<p>This text will be indented because it's third.</p>
<div class="someBox">This is some extra box</div>
<p>I want this to be indented but it won't be because it is first after the box!</p>
<p>This text will be indented because it's first.</p> 
```

CSS：

```
p {
    text-indent: 1.5em;
    margin-top: 0
}

.firstcharacter {
    text-indent: 0;
}

.firstcharacter span {
    float: left;
    font-size: 80px;
    line-height: 60px;
    padding-top: 4px;
    padding-right: 8px;
    padding-left: 3px;
    font-family:'Droid Serif', serif;
} 
```

这应该解决吗？

我基本上只是稍微改变了你的css和html。

玩得开心

亚沙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:12:45.083

对于您的第一行，您可以使用`p::first-line{}`它来缩进它。对于您的第一个字符，您可以使用`p::first-letter`. 对于 IE<9，您将只想使用一个冒号。

要选择第一个段落之后的所有段落，可以使用 nth-child(n) 伪类。

# android - 构建android ICS时头文件中的歧义

> ID：14902272
> 
> 赞同：2
> 
> 时间：2013-02-15T19:50:35.953
> 
> 标签：android, c, linux, build, android-build

这是问题所在：msm_camera.h 存在于以下路径中

1.  ./external/kernel-headers/original/media/
2.  ./bionic/libc/kernel/common/media/
3.  ./prebuilt/ndk/android-ndk-r4/platforms/android-8/arch-x86/usr/include/media/
4.  ./内核/包括/媒体/

当我尝试构建错误时，会抛出一些诸如“MSM_PMEM_VIDEO_VPE”之类的定义不存在。当它们存在于其中一条路径中时，例如。./external/kernel-headers/original/media/

所以，我想知道一个 C 源文件什么时候正在编译，并且它以这种方式添加了头文件：

```
#include <media/msm_camera.h> 
```

如何确定从哪个路径中选择标头？是来自选项 1、2、3 还是 4？

构建日志似乎也无济于事。我不想在数百个文件中添加绝对路径，因为这绝对不是正确的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:31:56.910

根本问题在于，Android 平台与芯片供应商在内核中提供的软件接口不同步。msm_camera.h 是原始头文件之一，并在 Android 版本中发生了变化。“MSM”表示头文件支持的供应商芯片组。

不是最好的解决方案，但你能让内核头文件包含路径在其他文件之前吗？

# excel - 如果用户选择的单元格不在一系列命名范围内，则 VBA 结束

> ID：14902273
> 
> 赞同：1
> 
> 时间：2013-02-15T19:50:36.827
> 
> 标签：excel, named-ranges, select-case, vba

我遇到了一些 Select Case 的问题。我的程序使用命名范围。如果选择案例不在一系列命名范围内，我希望它结束​​。这是我在用户选择有效单元格时正确运行的代码：

```
Private Sub WorkSheet_SelectionChange(ByVal Target As Range)

If Not Intersect(Target, Range("ActionDisplay")) Is Nothing Then
    Select Case Target.Column
        Case 5: Call Find_Action_RPI_Info
        Case 6: Call Find_Action_RPI_Info
        Case 7: Call Find_Action_RPI_Info
        Case 8: Call Find_Action_RPI_Info
        Case 9: Call Find_Action_RPI_Info
        Case 10: Call Find_Action_RPI_Info
        Case 11: Call Find_Action_RPI_Info
        Case 12: Call Find_Action_RPI_Info
        Case Else
    End Select
End If

If Not Intersect(Target, Range("ActionTotalDisplay")) Is Nothing Then
    Select Case Target.Column
        Case 13: Call Action_Total_RPI_Info
        Case Else
    End Select
End If

If Not Intersect(Target, Range("TotalDisplay")) Is Nothing Then
    Select Case Target.Column
        Case 5: Call CM_Action_Total_RPI_Info
        Case 6: Call CM_Action_Total_RPI_Info
        Case 7: Call CM_Action_Total_RPI_Info
        Case 8: Call CM_Action_Total_RPI_Info
        Case 9: Call CM_Action_Total_RPI_Info
        Case 10: Call CM_Action_Total_RPI_Info
        Case 11: Call CM_Action_Total_RPI_Info
        Case 12: Call CM_Action_Total_RPI_Info
        Case Else
    End Select
End If

If Not Intersect(Target, Range("GroupTotal")) Is Nothing Then
    Select Case Target.Column
        Case 13: Call GroupDisplay
    Case Else
    End Select
End If

If Not Intersect(Target, Range("PastDue")) Is Nothing Then
    Select Case Target.Column
        Case 7: Call PastDueDisplay
        Case 8: Exit Sub
        Case 9: Call PastDueDisplay
        Case 10: Exit Sub
    Case Else
    End Select
End If

If Not Intersect(Target, Range("PastDueTotal")) Is Nothing Then
    Select Case Target.Column
        Case 7: Call PastDueTotalDisplay
        Case 8: Exit Sub
        Case 9: Call PastDueTotalDisplay
        Case 10: Exit Sub
    Case Else
    End Select
End If

End Sub 
```

所以基本上，如果它不在上述任何范围内，我希望程序结束。我确信有更好的方法来做我正在尝试的事情，但我正在自学这一切，所以我确信它并不完美。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T19:55:10.527

您可以尝试这样的事情（**未**测试）

```
Private Sub WorkSheet_SelectionChange(ByVal Target As Range)
    If Not Intersect(Target, Range("ActionDisplay")) Is Nothing Then
        Select Case Target.Column
            Case 5 To 12: Call Find_Action_RPI_Info
        End Select
    ElseIf Not Intersect(Target, Range("ActionTotalDisplay")) Is Nothing Then
        If Target.Column = 13 Then Call Action_Total_RPI_Info
    ElseIf Not Intersect(Target, Range("TotalDisplay")) Is Nothing Then
        Select Case Target.Column
            Case 5 To 12: Call CM_Action_Total_RPI_Info
        End Select
    ElseIf Not Intersect(Target, Range("GroupTotal")) Is Nothing Then
        If Target.Column = 13 Then Call GroupDisplay
    ElseIf Not Intersect(Target, Range("PastDue")) Is Nothing Then
        Select Case Target.Column
            Case 7, 9: Call PastDueDisplay
        End Select
    ElseIf Not Intersect(Target, Range("PastDueTotal")) Is Nothing Then
        Select Case Target.Column
            Case 7, 9: Call PastDueTotalDisplay
        End Select
    End If
End Sub 
```

# c# - System.net.Sockets 异常

> ID：14902282
> 
> 赞同：0
> 
> 时间：2013-02-15T19:51:04.800
> 
> 标签：c#, mysql, virtual-machine

所以我正在尝试使用 C# 连接到位于 Ubuntu VM 上的 MySQL 数据库。但是，我不断收到`System.Net.Sockets.SocketException`异常，并且每次连接都失败。我可以使用它的IP地址（在浏览器上）访问VM上的服务器，所以我真的不明白出了什么问题。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:05:24.260

您是否尝试过 telnet 到您尝试连接的 mysql 服务器，`telnet localhost 3306`localhost 是您的 mysql 服务器，3306 是默认端口。如果这是成功的，那么这意味着 mysql 正在正确运行。您还可以验证凭据是否正确传递。下面是从 liferay 门户服务器连接到 mysql 的示例 JNDI 配置

```
<Resource name="jdbc/LiferayPool" auth="Container" type="javax.sql.DataSource"
      maxActive="100" maxIdle="30" maxWait="10000"
     username="root" password="" driverClassName="com.mysql.jdbc.Driver"
     url="jdbc:mysql://localhost/liferay?useUnicode=true&amp;characterEncoding=UTF-8&amp;useFastDateParsing=false"/> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:14:07.910

如果您的服务器没问题，您可以尝试 MySQL 的 ADO.Net 驱动程序 ( [http://www.mysql.com/downloads/connector/net/](http://www.mysql.com/downloads/connector/net/) )

安装驱动程序后，在项目中添加对 MySql.Data.dll 的引用。

在您的代码中，您可以使用以下方式连接到服务器：

```
public static MySqlConnection mysqlCreateConection() {            
        try {
            c = new MySqlConnection("server=" + "localhost" + ";user id=" + "user" +
                                    ";Password=" + "password" + ";persist security info=True;database=" + mysqlDatabase +  "" + ";");
            c.Open();
            Console.WriteLine(c.ToString());
            return c;
        } catch (MySqlException e) {} 
```

使用此连接器，您可以使用已经制作的类和方法，让您在处理 c# + mysql 时更轻松。

# iphone - 最新版本和进一步开发/新功能

> ID：14902283
> 
> 赞同：0
> 
> 时间：2013-02-15T19:51:14.817
> 
> 标签：iphone, zxing, zbar

我想知道自从我在页面上找到的最后一次提交日期是 2011 年 8 月 8 日以来，ZBar Lib 是否仍然是最新的。去年我决定选择 Zbar，因为 Stackoverflow 的投票很好。

大约一年前，我开发了一个 iPhone 应用程序。现在是这个应用程序 2.0 版的时候了。所以我想知道我是否应该继续使用这个库，或者是否是时候切换到像 ZXing 这样的替代品了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:34:43.730

ZBar is still working for the all the OS I have recently used it, Zxing sometimes rejected by the apple while you submit App on AppStore.

# android - 动态偏好复选框拼图

> ID：14902285
> 
> 赞同：0
> 
> 时间：2013-02-15T19:51:21.443
> 
> 标签：android, dynamic, preferences, preferenceactivity, checkboxpreference

我对以下代码中发生的事情感到困惑。它实际上是在做我想做的事，但我认为我必须做更多的工作。在 onCreate 方法中，即使在我强制退出应用程序之后，复选框仍会保留其上次运行的选中或未选中状态。即使从未打印日志消息“onCreate found”并且打印了“添加帐户”消息并且 cbp2.setChecked(false) 似乎被忽略，它也会保存它们的状态。

这是怎么回事？

* * *

```
public class SettingsActivity extends PreferenceActivity {
private final static String LOGTAG = "SettingsActivity";

@Override
@SuppressWarnings("deprecation")
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Load preference data from XML
    this.addPreferencesFromResource(R.xml.preferences_settings);

    Set<String> accounts = new HashSet<String>();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ECLAIR) {
        accounts = Accounts.getAccounts(this);
    }

    final PreferenceCategory cat = (PreferenceCategory) this
            .findPreference("key_accounts");

    for (String account : accounts) {
        final CheckBoxPreference cbp = (CheckBoxPreference) this
                .findPreference("key_" + account);

        if (cbp != null) {
            Log.d(SettingsActivity.LOGTAG, "onCreate found: " + account
                    + (cbp.isChecked() ? ", checked" : ""));

            continue;
        }

        Log.d(SettingsActivity.LOGTAG, "adding account " + account);

        final CheckBoxPreference cbp2 = new CheckBoxPreference(this);

        // make sure each key is unique
        cbp2.setKey("key_" + account);
        cbp2.setTitle(account);
        cbp2.setChecked(false);

        cat.addPreference(cbp2);
    }
} 
```

}

* * *

这是我的首选项 xml 的顶部：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<PreferenceCategory
    android:key = "key_accounts"
    android:title = "@string/title_accounts">
</PreferenceCategory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:59:13.557

这实际上取决于您如何定义首选项 XML。通常它将设置保存在 SharedPreferences 中，因此每个更改都会立即写回 SharedPrefs 并因此持久化。

# javascript - 正则表达式：捕获字符串中的所有数字，并作为新的数字字符串返回

> ID：14902289
> 
> 赞同：3
> 
> 时间：2013-02-15T19:52:06.970
> 
> 标签：javascript, regex

我正在尝试捕获输入字符串的所有数字。该字符串还可以包含其他字符，例如字母，所以我不能简单地做`[0-9]+`.

我已经尝试过`/[0-9]/g`，但这会将所有数字作为数组返回。

您如何捕获或匹配数字的每个实例并作为字符串返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:59:32.977

只需替换原始字符串中的所有非数字：

```
var s = "foo 123 bar 456";
var digits = s.replace(/\D+/g, ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T19:59:42.907

您可以替换所有非数字字符而不是提取`digits`：

```
var str = "some string 22 with digits 2131";
str = str.replace(new RegExp("\D","g"),""); 
```

`\D`与 相同`[^\d]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T20:24:37.583

其他解决方案更好，但要按照您的要求进行操作，您只需加入阵列即可。

```
var str = "this 1 string has 2 digits";
var result = str.match(/[0-9]+/g).join(''); // 12 
```

# c++ - C++ 数据结构大 O

> ID：14902291
> 
> 赞同：-2
> 
> 时间：2013-02-15T19:52:19.887
> 
> 标签：c++, data-structures, big-o

您好，在数据结构 Big O 中，此代码是否算作 (n ^ 2 + N ^ 2) 忽略我们取最大的，或者只是 N ^ 2，因为 DM 在同一个循环中？谢谢你 。

```
 int sum1,sum2;
   for (int i = 0 ;i < n;i++)
   {
       for (int j = 0 ; j < n; j++)
        {
          sum1 = i + j; //DM
          sum2 = i ;    //DM
        }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:55:41.740

ordo 表示法只考虑计算复杂性中增长最快的部分，如果有加法和减法。常数也没有注明。所以这段代码基本上可以运行`O[2 * (n ^ 2)]`（没有优化 - 最好说它*的时间复杂度*是这个和那个），然后就是`O(n ^ 2)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:58:23.117

它是 O(N^2) 和 O(2*N^2)。它也是 O(1/2 * N^2) 和 O(1000 * N^2)。[由于 big-O 符号的定义](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)方式，它们都是等价的。

# python - json.loads 允许字典中的重复键，覆盖第一个值

> ID：14902299
> 
> 赞同：24
> 
> 时间：2013-02-15T19:52:40.653
> 
> 标签：python, json

```
>>> raw_post_data = request.raw_post_data
>>> print raw_post_data
{"group":{"groupId":"2", "groupName":"GroupName"}, "members":{"1":{"firstName":"fName","lastName":"LName","address":"address"},"1": {"firstName":"f_Name","lastName":"L_Name","address":"_address"}}}
>>> create_request = json.loads(raw_post_data)
>>> print create_request
{u'group': {u'groupName': u'GroupName', u'groupId': u'2'}, u'members': {u'1': {u'lastName': u'L_Name', u'firstName': u'f_Name', u'address': u'_address'}}} 
```

如您所见，当我使用时，具有键 '1' 的成员被覆盖`json.dumps()`

有什么方法可以在 python 中将其捕获为异常，说在来自客户端的请求中发现了重复的键？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-15T20:10:18.597

[`application/json`用于媒体类型的 rfc 4627](https://www.rfc-editor.org/rfc/rfc4627#section-2.2)建议使用唯一键，但并未明确禁止它们：

> 对象中的名称应该是唯一的。

来自[RFC 2119](https://www.rfc-editor.org/rfc/rfc2119)：

> **应该** 这个词，或形容词“推荐”，意味着
> 在特定情况下可能存在忽略特定项目的正当理由
> ，但在选择不同的课程之前，必须理解并
> 仔细权衡全部含义。

```
import json

def dict_raise_on_duplicates(ordered_pairs):
    """Reject duplicate keys."""
    d = {}
    for k, v in ordered_pairs:
        if k in d:
           raise ValueError("duplicate key: %r" % (k,))
        else:
           d[k] = v
    return d

json.loads(raw_post_data, object_pairs_hook=dict_raise_on_duplicates)
# -> ValueError: duplicate key: u'1' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-27T17:12:35.307

这是[jfs 答案](https://stackoverflow.com/a/14902564/832230)的 linter-fixed 和 type-annotated 版本。解决了各种 linter 突出显示的问题。它还针对 Python 3.6+ 进行了现代化改造，以使用 f-strings。

```
import json
from typing import Any, Dict, Hashable, List, Tuple

def raise_on_duplicate_keys(ordered_pairs: List[Tuple[Hashable, Any]]) -> Dict:
    """Raise ValueError if a duplicate key exists in provided ordered list of pairs, otherwise return a dict."""
    dict_out = {}
    for key, val in ordered_pairs:
        if key in dict_out:
            raise ValueError(f'Duplicate key: {key}')
        else:
            dict_out[key] = val
    return dict_out

json.loads('{"x": 1, "x": 2}', object_pairs_hook=raise_on_duplicate_keys) 
```

`ordered_pairs`上面是一个元组列表，每个元组都有一个键和一个值。请参阅文档以获取[`object_pairs_hook`](https://docs.python.org/3/library/json.html#json.JSONDecoder).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:26:55.003

或者，如果您想捕获所有重复键（每个级别），您可以使用`collections.Counter`

```
from collections import Counter

class KeyWatcher(dict):

    def __init__(self, *args):
        duplicates = [d for d,i in Counter([pair[0] for pair in args[0]]).items() if i > 0]
        if duplicates:
            raise KeyError("Can't add duplicate keys {} to a json message".format(duplicates))
        self.update(*args[0])

json.loads(raw_post_data, object_pairs_hook=KeyWatcher) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-24T19:40:12.103

我根据此问题的其他用户发布的解决方案编写的一种替代方法是将这些重复项转换为数组：

```
def array_on_duplicate_keys(ordered_pairs):
    """Convert duplicate keys to arrays."""
    d = {}
    for k, v in ordered_pairs:
        if k in d:
            if type(d[k]) is list:
                d[k].append(v)
            else:
                d[k] = [d[k],v]
        else:
           d[k] = v
    return d 
```

进而：

```
dict = json.loads('{"x": 1, "x": 2}', object_pairs_hook=array_on_duplicate_keys) 
```

给你输出：

```
{'x': [1, 2]} 
```

稍后，可以使用以下方法轻松检查条目的重复次数：

```
if type(dict['x']) is list:
    print('Non-unique entry in dict at x, found', len(dict['x']),'repetitions.') 
```

# postgresql - 在具有多个子类别的 postgres 中使用 COUNT(*) 返回 0 值

> ID：14902301
> 
> 赞同：1
> 
> 时间：2013-02-15T19:52:41.030
> 
> 标签：postgresql, crosstab

我无法让 COUNT(*)=0 显示在列中。这个问题已经在某种程度上得到了解决：[如何使这个查询也返回计数值为 0 的行？](https://stackoverflow.com/questions/11761171/how-to-make-this-query-also-return-rows-with-0-count-value)

...但我无法将解决方案推广到多个不同的类别。这是我的情况：我有 11 个不同类别的停车位置和 4 个不同的附属类别：

```

    # 从受访者中选择不同的停车位置；
     停车位
    ------------------
     街头免费
     城市车库
     UC地段
     rpp 访问者
     街外免费
     其他
     无处
     其他付费
     仪表
     禁用
     rpp
    （11 行）

    # 从受访者中选择不同的隶属关系；
     联系
    -------------
     学院
     本科
     毕业
     职员
    (4 行)

```

我的本科生受访者都没有使用残疾人停车位，所以当我尝试按parking_location计算它们时，我只得到10行：

```
    SELECT park_location,COUNT(*) FROM 受访者 WHERE affiliation='undergrad' GROUP BY park_location;
     停车位 | 数数
    ------------------+--------
     街头免费| 2
     仪表 | 25
     城市车库 | 5
     rpp | 21
     无处| 1012
     UC 很多 | 33
     rpp 访问者 | 10
     街外免费| 10
     其他| 10
     其他付费 | 12
    （10 行）

```

没问题。上述链接显示了如何使 0 出现：

```
    ths=# WITH c as (SELECT DISTINCT park_location FROM 受访者),
    ths-# r AS (SELECT affiliation, park_location, COUNT(*) AS count FROM 受访者 WHERE affiliation='undergrad' GROUP BY 1,2)
    ths-# SELECT c.parking_location, COALESCE(r.count, 0) AS count FROM c
    ths-# LEFT JOIN r ON c.parking_location = r.parking_location
    ths-# ORDER BY park_location;
     停车位 | 数数
    ------------------+--------
     无处| 1012
     仪表 | 25
     rpp | 21
     rpp 访问者 | 10
     街头免费| 2
     UC 很多 | 33
     街外免费| 10
     城市车库 | 5
     其他付费 | 12
     残疾人| 0
     其他| 10
    （11 行）

```

但现在我想展示所有从属关系的表格，而不仅仅是本科生。此外，我想先按从属关系订购结果表，然后按parking_location。我以为我可以删除上面的 WHERE 子句，但后来我的本科禁用列消失了：

```
    ths=# WITH c as (SELECT DISTINCT park_location FROM 受访者),
    ths-# r AS (SELECT affiliation,parking_location, COUNT(*) AS count FROM respondent GROUP BY affiliation,parking_location)
    ths-# SELECT r.affiliation, c.parking_location, COALESCE(r.count, 0) FROM c
    ths-# LEFT JOIN r ON c.parking_location = r.parking_location
    ths-# ORDER BY affiliation,parking_location;
     隶属关系 | 停车位 | 合并
    -------------+------+----------

     员工 | 城市车库 | 34
     员工 | 其他付费 | 50
     员工 | 残疾人| 18
     员工 | 其他| 61
     本科 | 无处| 1012
     本科 | 仪表 | 25
     本科 | rpp | 21
     本科 | rpp 访问者 | 10
     本科 | 街头免费| 2
     本科 | UC 很多 | 33
     本科 | 街外免费| 10
     本科 | 城市车库 | 5
     本科 | 其他付费 | 12
     本科 | 其他| 10
     毕业 | 无处| 1113
     毕业 | 仪表 | 96
     毕业 | rpp | 31

```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:24:32.373

尝试类似：

```
WITH all_parking_locations as (SELECT DISTINCT parking_location 
                               FROM respondents),

     all_affiliations as  (SELECT DISTINCT affiliation 
                           FROM respondents),

     all_counts as (SELECT affiliation, parking_location, COUNT(*) AS count 
                    FROM respondents 
                    GROUP BY affiliation, parking_location)

SELECT aa.affiliation, apl.parking_location, COALESCE(ac.count,0) as count
FROM all_affiliations aa
CROSS JOIN all_parking_locations apl
LEFT JOIN all_counts ac ON ac.affiliation = aa.affiliation
                       AND ac.parking_location = apl.parking_location
ORDER BY aa.affiliation, apl.parking_location 
```

# ruby-on-rails - rails g 控制器，没有不必要的文件

> ID：14902302
> 
> 赞同：1
> 
> 时间：2013-02-15T19:52:44.397
> 
> 标签：ruby-on-rails

我可以在控制器目录中创建一个控制器（手动创建一个文件+“_controller.rb”）还是必须运行生成控制器？我不需要额外的文件，但担心如果我不使用 rails g，以后可能会出现问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:11:24.423

您可以使用一些生成器标志来仅生成`app/controllers/posts_controller.rb`. 当您决定这样做时，这可以很方便地绕过助手和资产生成。

```
rails g controller posts --skip-helper --skip-assets 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T20:07:52.483

Thoughtbot 对此有一篇[很好的文章](http://robots.thoughtbot.com/post/34229167067/reduce-application-clutter-disable-unwanted-rails)。如果您想继续使用`rails g controller`以方便获取一些测试文件，请在**application.rb**中执行以下操作：

```
config.generators do |g|
  g.helper false
  g.assets false
  # or 
  # g.stylesheets = false
  # g.javascripts = false
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T19:53:58.043

您可以创建一个控制器，没有问题。如果需要，您可以在将来创建视图和模型（或其他任何东西）。

只是不要忘记在您的路线文件中添加路线。

# ms-access - MS Access 未导出左侧填充数字

> ID：14902303
> 
> 赞同：1
> 
> 时间：2013-02-15T19:52:47.260
> 
> 标签：ms-access, ms-access-2010

我有一个表，其中一些字段是 char(2)。如果字段只有 1 个字符长，则某些字段需要前导 0（零）。我创建了一个查询，我尝试了几种不同的格式化方法来实现左侧填充。这些尝试在查看查询结果时工作正常，但是当我检查导出时创建的文本文件时，相关字段不包含前导 0。

这是我在查询中使用的两种方法

```
`FORMAT(tblMHOutcome.Dayscom, "00") AS Dayscom`
`IIF(LEN(tblMHOutcome.Daysatte)=1, "0"&tblMHOutcome.Daysatte` 
```

下图显示了导出窗口中的视图，其中填充了字段：

![导出窗口中的填充字段](../Images/142e693aed9ece26e130a28438324d16.png)

下面是没有字段填充的生成文本文件的图像：

![导出后无焊盘](../Images/3fdfd964eef5ad54c43187db3384b0bf.png)

关于如何在格式化后导出查询的任何建议？

更新：添加了完整查询

```
`SELECT tblMHOutcome.ContractorID, tblMHOutcome.SiteID, tblMHOutcome.SSN,     
tblMHOutcome.ClientID, tblMHOutcome.Purpeval, tblMHOutcome.Evaldate, 
tblMHOutcome.StaffID, tblMHOutcome.Initevada, tblMHOutcome.Pincosrc,     
tblMHOutcome.Disincom, tblMHOutcome.Prognosis, tblMHOutcome.Depcrims, 
tblMHOutcome.Admitype, FORMAT(tblMHOutcome.Dayscom, "00") AS Dayscom, 
FORMAT(tblMHOutcome.Dayswork, "00") AS Dayswork, tblMHOutcome.Incopay, 
tblMHOutcome.Incogov, tblMHOutcome.Incother, tblMHOutcome.GAF, 
IIF(LEN(tblMHOutcome.Daysavai)=1, "0"&tblMHOutcome.Daysavai, tblMHOutcome.Daysavai) AS 
Daysavai, IIF(LEN(tblMHOutcome.Daysatte)=1, "0"&tblMHOutcome.Daysatte, 
tblMHOutcome.Daysatte) AS Daysatte, IIF(LEN(tblMHOutcome.CGAS)=1, 
"0"&tblMHOutcome.CGAS, tblMHOutcome.CGAS) AS CGAS, tblMHOutcome.DJJComit, 
tblMHOutcome.Riskfact, tblMHOutcome.Residstat, tblMHOutcome.Marital, tblMHOutcome.Empl, 
tblMHOutcome.Residcont, tblMHOutcome.Grade, tblMHOutcome.Rx, tblMHOutcome.Develop, 
tblMHOutcome.Physical, tblMHOutcome.Ambulat, tblMHOutcome.Visual, tblMHOutcome.Hearing, 
tblMHOutcome.English, tblMHOutcome.ADLFC, tblMHOutcome.Provinfo, tblMHOutcome.Zip, 
tblMHOutcome.Tstat, tblMHOutcome.Famsize, tblMHOutcome.MHProb, tblMHOutcome.Faminc, 
tblMHOutcome.Referral, tblMHOutcome.Provid, tblMHOutcome.MHDiagnosis, 
tblMHOutcome.SADiagnosis, tblMHOutcome.Bakeract, tblMHOutcome.Rxidp, 
tblMHOutcome.Rxpap, tblMHOutcome.Contnum1, tblMHOutcome.Contnum2, 
tblMHOutcome.Contnum3, tblMHOutcome.Vetstatus, tblMHOutcome.Social, 
tblMHOutcome.School, tblMHOutcome.Arrest
FROM tblMHOutcome
WHERE (((tblMHOutcome.DeleteRecord)=False))
ORDER BY tblMHOutcome.Evaldate;` 
```

和 VBA 代码：

```
`DoCmd.TransferText acExportFixed, "MHOutcomeExport", "qryMHOutcomeExport", "Exports\MHOutcome.txt", False` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:09:50.127

你可以使用：

```
SELECT Format(ANumber,"00") AS Expr1 
INTO [Text;FMT=Fixed;DATABASE=Z:\docs].[exp.txt] 
FROM table1; 
```

schema.ini[也](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx)可以提供帮助。例如，[处理 TransferText 错误](https://stackoverflow.com/questions/14730093/handle-transfertext-errors/14730415#14730415)

或者，这将创建一个两位数：

```
SELECT Right("00" & Anumber,2)
FROM Table1; 
```

和

```
DoCmd.TransferText acExportFixed, "expspec", "Query3", "z:\docs\exp.txt" 
```

重新评论

```
SELECT IIf(Not IsNull(ANumber),Right("00" & Anumber,2), ANumber)
FROM Table1; 
```

# javascript - extjs 4：如何设置listview标识并在消息框中弹出id

> ID：14902304
> 
> 赞同：1
> 
> 时间：2013-02-15T19:52:49.140
> 
> 标签：javascript, extjs, extjs4

```
Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.panel.*'
]);
Ext.onReady(function(){
    Ext.define('ImageModel', {
        extend: 'Ext.data.Model',
        fields: ['id', 'url', {name:'size', type: 'float'}, {name:'lastmod', type:'date', dateFormat:'timestamp'}]
    });
    var store = Ext.create('Ext.data.JsonStore', {
        model: 'ImageModel',
        proxy: {
            type: 'ajax',
            url: 'get-images.php',
            reader: {
                type: 'json',
                root: 'images'
            }
        }
    });
    store.load();

    var listView = Ext.create('Ext.grid.Panel', {
        width:425,
        height:250,
        collapsible:true,
        title:'Simple ListView <i>(0 items selected)</i>',
        renderTo: Ext.getBody(),

        store: store,
        multiSelect: true,
        viewConfig: {
            emptyText: 'No images to display'
        },

        columns: [{
            text: 'File',
            flex: 50,
            dataIndex: 'id'
        },{
            text: 'Last Modified',
            xtype: 'datecolumn',
            format: 'm-d h:i a',
            flex: 35,
            dataIndex: 'lastmod'
        },{
            text: 'Size',
            dataIndex: 'size',
            tpl: '{size:fileSize}',
            align: 'right',
            flex: 15,
            cls: 'listview-filesize'
        }]
    });

    // little bit of feedback
    listView.on('selectionchange', function(view, nodes){
        //pop up message on here.no idea
    });
}); 
```

## 问题

1）如何从数据库中设置listview行标识ID？当listview行被选中时，会弹出消息显示ID被选中。但ID列无法显示。必须隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:46:29.157

只需从列配置中删除 File 列，然后使用我在 selectionchange 事件中输入的代码：

```
Ext.require([
    'Ext.grid.*',
    'Ext.data.*',
    'Ext.panel.*'
]);
Ext.onReady(function(){
    Ext.define('ImageModel', {
        extend: 'Ext.data.Model',
        fields: ['id', 'url', {name:'size', type: 'float'}, {name:'lastmod', type:'date', dateFormat:'timestamp'}]
    });
    var store = Ext.create('Ext.data.JsonStore', {
        model: 'ImageModel',
        proxy: {
            type: 'ajax',
            url: 'get-images.php',
            reader: {
                type: 'json',
                root: 'images'
            }
        }
    });
    store.load();

    var listView = Ext.create('Ext.grid.Panel', {
        width:425,
        height:250,
        collapsible:true,
        title:'Simple ListView <i>(0 items selected)</i>',
        renderTo: Ext.getBody(),

        store: store,
        multiSelect: true,
        viewConfig: {
            emptyText: 'No images to display'
        },

        columns: [{
            text: 'Last Modified',
            xtype: 'datecolumn',
            format: 'm-d h:i a',
            flex: 35,
            dataIndex: 'lastmod'
        },{
            text: 'Size',
            dataIndex: 'size',
            tpl: '{size:fileSize}',
            align: 'right',
            flex: 15,
            cls: 'listview-filesize'
        }]
    });

    // little bit of feedback
    listView.on('selectionchange', function(view, nodes){
        var nodeIdDisplay = "";
        for(var i = 0; i < nodes.length; i++)
        {
            if(nodeIdDisplay.length > 0)
                nodeIdDisplay += ",";
            nodeIdDisplay += nodes[i].get("id");
        }
        alert(nodeIdDisplay);
    });
}); 
```

# websphere - Worklight - 使用 URL 从非 Worklight 应用程序调用推送通知适配器

> ID：14902307
> 
> 赞同：2
> 
> 时间：2013-02-15T19:52:53.773
> 
> 标签：websphere, push-notification, ibm-mobilefirst

我去年发布了一个问题并在此[链接上收到了解决方案](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=453422&start=15&tstart=0)

`wl_unprotected`这种在适配器 XML中添加安全测试的解决方案适用于 WL 服务器 5.0.0.3。

但是，在最近使用 Websphere Server 8.5 升级到 5.0.0.5 后，我们在使用直接 URL 调用调用 WL 适配器时遇到了身份验证错误。

网址：

```
http://IPAddress:9080/worklight/invoke?adapter=MyPushNotificationAdapter&procedure=submitNotification&parameters=['user1','id1','1'] 
```

回复：

```
/*-secure-
{"isSuccessful":false,"warnings":[],"errors":["Work Light Authentication: null"],"info":[]}*/ 
```

即使我们`wl_unprotected`从适配器 XML 中删除安全测试，错误仍然存​​在。请就在 WL 5.0.0.5 企业版服务器中使用 URL 直接调用适配器的解决方案提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:40:07.187

在 PushNotification 适配器过程中调用了另一个适配器过程。在我也将“wl_unprotected”安全测试添加到第二个适配器过程之后，推送通知的 URL 调用开始工作。谢谢 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:22:20.523

将 securityTest="wl_unprotected" 添加到您的适配器过程中应该仍然可以在 5.0.5 中使用。

我刚刚通过创建一个新的 Worklight 5.0.5 项目、混合应用程序和适配器对其进行了测试。默认情况下创建的默认适配器有 2 个过程，getStories 和 getStoriesFiltered。

我将 securityTest="wl_unprotected" 添加到适配器 XML 文件中的 getStories 过程中，但将其从 getStoriesFiltered 过程中删除。然后我构建了适配器并将其部署到在 WebSphere Liberty 上运行的 5.0.5 Worklight 服务器。

当我使用 curl 调用 getStoriesFiltered 过程（没有 securityTest="wl_unprotected"）时，调用失败并出现您描述的相同错误。

但是当我调用 getStories 过程（它具有 securityTest="wl_unprotected"）时，它是成功的。

作为参考，这里是描述在这种情况下使用“wl_unprotected”安全测试的技术说明：[http ://www-01.ibm.com/support/docview.wss?uid=swg21612594](http://www-01.ibm.com/support/docview.wss?uid=swg21612594)

# matlab - 可视化图像立方体

> ID：14902311
> 
> 赞同：0
> 
> 时间：2013-02-15T19:53:05.600
> 
> 标签：matlab, image-processing

我有 256*256*30 的 3D 矩阵。每个单元格包含一个 16 位整数强度值。如何在 Matlab 中可视化这个立方体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:10:45.343

您基本上拥有的是 3D 热图。您可以直接将其可视化，也可以将其转换为 3D 等高线图，让您更好地了解更高或更低密度的区域。

这不是小菜一碟，但这里是人们使用 Mathematica 为类似数据所做的可视化：[https](https://mathematica.stackexchange.com/questions/17260/3d-heatmap-density-plot) ://mathematica.stackexchange.com/questions/17260/3d-heatmap-density-plot 。鉴于我们对屏幕上二维的视觉限制，我认为等高线图的转换特别有用。您可以旋转等高线图以从任何角度查看它。

作为替代方案，由于其中一个维度比其他两个维度小得多，我会将其可视化为 30 个切片，每个切片都是二维热图。类似的方法用于查看医学成像，例如断层扫描数据：[http ://en.wikipedia.org/wiki/X-ray_computed_tomography](http://en.wikipedia.org/wiki/X-ray_computed_tomography)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T05:00:15.803

您可以使用免费的 3D Slicer 医学图像可视化应用程序来执行此操作 ( [http://www.slicer.org](http://www.slicer.org) )。它的 MatlabBridge 扩展允许调用 Matlab 函数并以 2D 和 3D 的各种方式可视化结果（[http://www.slicer.org/slicerWiki/index.php/Documentation/Nightly/Extensions/MatlabBridge](http://www.slicer.org/slicerWiki/index.php/Documentation/Nightly/Extensions/MatlabBridge)）。

# jquery - Jquery UI Combobox 和 DropDownList

> ID：14902315
> 
> 赞同：0
> 
> 时间：2013-02-15T19:53:18.727
> 
> 标签：jquery, asp.net, jquery-ui, combobox

我在使用 Jquery Jquery UI Combobox 和 asp.net 时遇到问题

1.  DropDown 不工作或呈现
2.  JavaScript 错误`"Uncaught TypeError: Cannot set property '_renderItem' of undefined" 'input.data("ui-autocomplete")._renderItem = function (ul, item)'`

    ```
    <script type="text/javascript">
        (function ($) {
            $.widget("ui.combobox", {
                _create: function () {
                    var input,
          that = this,
          wasOpen = false,
          select = this.element.hide(),
          selected = select.children(":selected"),
          value = selected.val() ? selected.text() : "",
          wrapper = this.wrapper = $("<span>")
            .addClass("ui-combobox")
            .insertAfter(select);

                    function removeIfInvalid(element) {
                        var value = $(element).val(),
            matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(value) + "$", "i"),
            valid = false;
                        select.children("option").each(function () {
                            if ($(this).text().match(matcher)) {
                                this.selected = valid = true;
                                return false;
                            }
                        });

                        if (!valid) {
                            // remove invalid value, as it didn't match anything
                            $(element)
              .val("")
              .attr("title", value + " didn't match any item")
              .tooltip("open");
                            select.val("");
                            setTimeout(function () {
                                input.tooltip("close").attr("title", "");
                            }, 2500);
                            input.data("ui-autocomplete").term = "";
                        }
                    }

                    input = $("<input>")
          .appendTo(wrapper)
          .val(value)
          .attr("title", "")
          .addClass("ui-state-default ui-combobox-input")
          .autocomplete({
              delay: 0,
              minLength: 0,
              source: function (request, response) {
                  var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                  response(select.children("option").map(function () {
                      var text = $(this).text();
                      if (this.value && (!request.term || matcher.test(text)))
                          return {
                              label: text.replace(
                      new RegExp(
                        "(?![^&;]+;)(?!<[^<>]*)(" +
                        $.ui.autocomplete.escapeRegex(request.term) +
                        ")(?![^<>]*>)(?![^&;]+;)", "gi"
                      ), "<strong>$1</strong>"),
                              value: text,
                              option: this
                          };
                  }));
              },
              select: function (event, ui) {
                  ui.item.option.selected = true;
                  that._trigger("selected", event, {
                      item: ui.item.option
                  });
              },
              change: function (event, ui) {
                  if (!ui.item) {
                      removeIfInvalid(this);
                  }
              }
          })
          .addClass("ui-widget ui-widget-content ui-corner-left");

                    input.data("ui-autocomplete")._renderItem = function (ul, item) {
                        return $("<li>")
            .append("<a>" + item.label + "</a>")
            .appendTo(ul);
                    };

                    $("<a>")
          .attr("tabIndex", -1)
          .attr("title", "Show All Items")
          .tooltip()
          .appendTo(wrapper)
          .button({
              icons: {
                  primary: "ui-icon-triangle-1-s"
              },
              text: false
          })
          .removeClass("ui-corner-all")
          .addClass("ui-corner-right ui-combobox-toggle")
          .mousedown(function () {
              wasOpen = input.autocomplete("widget").is(":visible");
          })
          .click(function () {
              input.focus();

              // close if already visible
              if (wasOpen) {
                  return;
              }

              // pass empty string as value to search for, displaying all results
              input.autocomplete("search", "");
          });

                    input.tooltip({
                        tooltipClass: "ui-state-highlight"
                    });
                },

                _destroy: function () {
                    this.wrapper.remove();
                    this.element.show();
                }
            });
        })(jQuery);

        $(function () {
            $("#ddl_company").combobox();
            $("#toggle").click(function () {
                $("#ddl_company").toggle();
            });
        }); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:35:34.663

`ui-autocomplete`密钥仅适用于 JQueryUI 1.10，请尝试`autocomplete`改用

# javascript - 浏览器历史处理不同的浏览器 / JavaScript 浏览器功能检测

> ID：14902316
> 
> 赞同：1
> 
> 时间：2013-02-15T19:53:23.410
> 
> 标签：javascript, webkit, browser-history, browser-feature-detection

我发现与 Firefox 和 IE 相比，Chrome 和 Safari 对历史浏览的处理方式有所不同。当我尝试访问受 Access Manager 保护的页面时，它会被重定向到 Access Manager 进行身份验证。如果我在 Chrome 和 Safari 中单击后退按钮，我会转到上一页，但如果我尝试在 Firefox 和 IE 上执行相同操作，似乎他们会尝试转到原始页面，然后再次重定向到 Access经理页面。换句话说，我无法回头。

由于我的网页中有一个按钮可以复制后退按钮的功能，因此我实现了以下 javascript 代码以使其工作：

```
function goBack() {
if (navigator.userAgent.indexOf('Chrome') != -1 || navigator.userAgent.indexOf('Safari') != -1){
       window.history.go(-1);
}
else{

       window.history.go(-2);

} 
```

它工作得很好，但我已经读到，识别不同浏览器的广泛接受的方法是检测它的功能。

有没有我可以检测到的功能？

# java - 在 Singleton spring bean 中声明静态方法

> ID：14902318
> 
> 赞同：0
> 
> 时间：2013-02-15T19:53:24.920
> 
> 标签：java, spring, static, singleton, static-methods

我们遇到了内存泄漏问题，我们怀疑下面的代码可能是原因，我们在单例类中有一个静态方法，并且怀疑它在直接引用时会导致内存泄漏。

```
// This class is wired in spring xml and loaded as spring bean
public class SpringSingletonRestClient{

// instance method to make a web-service call
public ServiceResponse getResponseFromARestService(String RequestParam){.....}

// public static helper bean mapping method, that is used outside this class 
// for converting the service response object to different object
public static DomainResponse convertServiceResponseToDomainResponse(ServiceResponse serviceResponse){ //conversion logic.... }
 }

} 
```

**用法**

```
Class MainClass {

//injected as spring bean
SpringSingletonRestClient client;

public void someMethod(){
ServiceResponse serviceResponse = client.getResponseFromARestService(...);
DomainResponse domainResponse =  SpringSingletonRestClient.convertServiceResponseToDomainResponse(serviceResponse);
// use domainResponse object
.......
.......
}

} 
```

请让我知道是否需要更多说明，因为我刚刚添加了伪。我们正在运行到高内存使用率，我们怀疑使用在由 spring 启动的类中声明的静态方法没有正确收集垃圾，并且因此发生内存泄漏。

问题 - 在 Spring 启动的单例类中使用静态方法是否很糟糕，即使该静态方法由直接引用使用，而不是由其实例变量使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:34:18.123

静态方法不应导致内存泄漏。它只是意味着该方法不使用任何类字段，并且可以在没有类实例的情况下调用。[Java 文档](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)对此进行了解释 - 检查部分类方法

内存泄漏通常会发生，因为“全局”字段保留引用并且永远不会停止使用它。这可能是一个集合。您应该使用 JConsole 之类的东西来分析内存使用情况并列出最常用的对象。这应该可以帮助您缩小范围。

编辑（更多信息）：您正在调用静态方法而不初始化对象。即没有`new SpringSingletonRestClient()`任何地方。

```
DomainResponse domainResponse =  SpringSingletonRestClient.convertServiceResponseToDomainResponse(serviceResponse); 
```

在上面的行中，弹簧是无关紧要的。就好像该方法是过程语言中的一个简单函数。因此，这不会导致内存泄漏。

# javascript - 如何确定移动浏览器中的软键盘是否触发了调整大小事件？

> ID：14902321
> 
> 赞同：35
> 
> 时间：2013-02-15T19:53:52.383
> 
> 标签：javascript, jquery, html, mobile, browser

关于软键盘的讨论很多，但我还没有找到解决我问题的好方法。

我有一个调整大小的功能，例如：

```
$(window).resize(function() {
    ///do stuff
}); 
```

我想在所有调整大小事件上执行该函数中的“东西”，除非它是由软键盘触发的。如何确定软键盘是否触发了调整大小？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-01T23:03:00.997

我最近遇到了一些需要检查的问题。我设法像这样解决它：

```
$(window).on('resize', function(){
   // If the current active element is a text input, we can assume the soft keyboard is visible.
   if($(document.activeElement).attr('type') === 'text') {
      // Logic for while keyboard is shown
   } else {
      // Logic for while keyboard is hidden
   }
} 
```

我只需要它用于文本输入，但显然这可以扩展为任何可能触发软键盘/数字选择器等的元素。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-24T18:48:34.820

我刚刚修复了 kirisu_kun 使用 prop() 而不是 attr() 的答案：

```
$(window).on('resize', function(){
   // If the current active element is a text input, we can assume the soft keyboard is visible.
   if($(document.activeElement).prop('type') === 'text') {
      // Logic for while keyboard is shown
   } else {
      // Logic for while keyboard is hidden
   }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-08T12:06:16.743

问题是，如果活动元素被聚焦，您可以通过关闭键盘而不改变焦点来触发调整大小事件。因此，键盘将隐藏但代码将进入焦点条件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-30T10:54:36.073

这个问题依赖于有一种可靠的方法来检测屏幕键盘何时出现（或消失）在移动设备上。不幸的是，没有可靠的方法来检测这一点。类似的问题已经多次出现在 SO 上，并提出了各种黑客、技巧和解决方法（请参阅[此答案](https://stackoverflow.com/a/31395169/6738706)以获取几个相关答案线程的链接）。

另请注意，屏幕键盘出现时并不总是触发调整大小事件（请参阅[此答案](https://stackoverflow.com/a/10925938/6738706)）。

我的一般建议是检测触摸屏的存在+检测活动元素是否属于触发屏幕键盘的类型（类似于[此答案](https://stackoverflow.com/a/10925938/6738706)）。但是，对于混合 Windows 设备（例如 Surface Pro），这种方法仍然会失败，有时屏幕键盘可能会在浏览器调整大小时出现，有时硬件键盘可能会在浏览器调整大小时使用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T23:39:07.133

与之前的答案类似，但针对所有具有焦点的表单子项（显然，在没有表单父项的情况下输入会失败）

```
$(window).resize(function() {
    if($('form *').focus()) {
        alert('ignore this');
    } else {
        // do the thing
    }
}); 
```

所以也许这个...

```
$(window).resize(function() {
    if($('input, select, etc').focus()) {
        alert('ignore this');
    } else {
        // do the thing
    }
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-16T16:20:53.830

我一直在寻找类似问题的解决方案。我的调整大小事件在 url 输入进出视图时触发。这是我一直在努力的事情......可以有一个可能的解决方案吗？

所以基本上你只检查屏幕的宽度是否改变了，如果它不同，只在调整大小时触发你的函数：

例如：

```
var saveWindowWidth = true;
    var savedWindowWidth;

//set the initial window width
    if (saveWindowWidth = true){
        savedWindowWidth = windowWidth;
        saveWindowWidth = false;
    }

//then on resize...

$(window).resize(function() {

//if the screen has resized then the window width variable will update
        windowWidth = window.innerWidth;

//if the saved window width is still equal to the current window width do nothing
        if (savedWindowWidth == windowWidth){
            return;
        }

//if saved window width not equal to the current window width do something
        if(savedWindowWidth != windowWidth) {
           // do something

            savedWindowWidth = windowWidth;
        }

    }); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-24T20:07:31.280

有几件事你需要集中精力

1.  所有软键盘只影响高度而不影响宽度。
2.  焦点元素标签可以是输入或文本区域。
3.  当元素获得焦点时高度会降低（或）当焦点离开时高度会增加。

当浏览器调整大小时，您可以使用这些组合

```
function getWidth(){
return $( window ).width();
}

function getHeight(){
return $( window ).height();
}

function isFocus(){
return $(document.activeElement).prop('tagName')=='INPUT' || $(document.activeElement).prop('tagName')=='TEXTAREA';
}

var focused = false;
var windowWidth=getWidth(),windowHeight=getHeight();

//then on resize...    
$(window).resize(function() {

var tWidth=getWidth(),tHeight=getHeight(),tfocused=isFocus();

//if the saved window width is still equal to the current window width do nothing
if (windowWidth == tWidth && ((tHeight < windowHeight && !focused && tfocused) || (tHeight > windowHeight && focused && !tfocused))){
 windowWidth=tWidth;
 windowHeight=tHeight;
 focused=tfocused;
 return;
}
else{
 windowWidth=tWidth;
 windowHeight=tHeight;
 focused=tfocused;

 //Your Code Here

}
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-27T08:35:12.633

在当前版本的 chrome webview 中工作正常。我刚刚使用以下代码在 Angular 中实现了窗口调整大小功能。

```
@HostListener('window:resize', ['$event'])
  onResize(event) {
  // Do you handling here.
} 
```

注意：同样可以通过使用来实现

```
 window.addEventListener('resize', () => {
   // Do handling here
 }); 
```

# vb.net - 我必须制作一个视觉基本程序，要求一年并给出一周中的一天

> ID：14902325
> 
> 赞同：-4
> 
> 时间：2013-02-15T19:54:07.570
> 
> 标签：vb.net, visual-studio-2010

好吧，我正在制作一个程序，要求用户输入年份（例如 2002 年）并返回该年的第一个星期二。

我什至不知道如何开始。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:23:03.077

> 我什至不知道如何开始。

你是在思考如何解决这个问题，一开始甚至没有考虑代码。您可以考虑一些不同的方法：

*   遍历一年中的日子（从 1 月 1 日开始），直到找到星期四
*   获取当年 1 月 1 日的日期。检查它是星期几。添加一周中的这一天和星期四之间的天数。

现在关于编码部分： [DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)结构用于表示 .NET 中的日期。[构造函数](http://msdn.microsoft.com/en-us/library/xcfzdy4x.aspx)可用于为特定的日、月和年创建日期。如果您查看 的文档`DateTime`，您会发现[DayOfWeek](http://msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx)方法对您有帮助。

我希望这能让你开始！

**编辑：**

要将用户输入（字符串）转换为整数，请使用[Parse](http://msdn.microsoft.com/en-us/library/b3h1hf19.aspx)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:02:46.553

```
Public Function GetFirstTuesday(year As Integer) As Date
    Dim d As Date = New Date(year, 1, 1, 0, 0)
    For i As Integer = 0 To 6
        If d.AddDays(i).DayOfWeek = DayOfWeek.Tuesday) Then
            Return d.AddDays(i)
        End If
    Next
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:23:04.950

我尝试使用 Linq 解决它（我是 linq 初学者）。错误处理取决于您。

```
Sub Main()
    Console.WriteLine(GetFirstTuesdayOfYear(2013)) 'returns 01.01.2013
    Console.WriteLine(GetFirstTuesdayOfYear(2012)) 'returns 03.01.2012
    Console.WriteLine(GetFirstTuesdayOfYear(2011)) 'returns 04.01.2011
    Console.WriteLine(GetFirstTuesdayOfYear(2010)) 'returns 05.01.2010
    Console.WriteLine(GetFirstTuesdayOfYear(2009)) 'returns 06.01.2009
    Console.Read()
End Sub

Private Function GetFirstTuesdayOfYear(year As Integer) As DateTime
    Return Enumerable.Range(1, DateTime.DaysInMonth(Year, 1)).[Select](Function(day) New DateTime(Year, 1, day)).ToList().FirstOrDefault(Function(x) x.DayOfWeek = DayOfWeek.Tuesday)
End Function 
```

# c# - 从动态数据源创建动态数据表

> ID：14902326
> 
> 赞同：0
> 
> 时间：2013-02-15T19:54:11.450
> 
> 标签：c#, asp.net

我需要从另一个数据表动态创建一个数据表，这样我需要遍历表 A 的所有行，对列值进行计算并将结果写入表 B。例如表 A 有 5 列（但实际上列数会有所不同）从第二列（A）开始，每列都有一个数值。我需要将它们相加并将总数写入表 B。

有了这个，与表 A 相比，表 B 中的 clumns 数量将发生变化，但行数不会发生变化。此数据不会像 gridview 或类似形式那样显示在页面上，所以我不能使用 OnEvent 方法，所以请不要建议其他替代方法，因为下一个过程需要数据表来生成所需的结果。

```
 | A | B | C   | D | E |        (table A)
    -------------------------------
    Entries | 2 | 6 | 100 | 0 | 5 |

            | Totals |                      (table B)
    Entries | 113    | 
```

我已经看到了几个建议使用这种类型的代码创建程序数据的示例：

```
DataTable dt; 
protected void Page_Load(object sender, EventArgs e) 
{ 

    dt = new DataTable("tblTest"); 
    DataColumn dc1 = new DataColumn(); 
    dc1.DataType = typeof(String); 
    dc1.ColumnName = "Name"; 
    DataColumn dc2 = new DataColumn(); 
    dc2.DataType = typeof(String); 
    dc2.ColumnName = "Add1"; 
    DataColumn dc3 = new DataColumn(); 
    dc3.DataType = typeof(String); 
    dc3.ColumnName = "Add2"; 

    dt.Columns.Add(dc1); 
    dt.Columns.Add(dc2); 
    dt.Columns.Add(dc3); 

} 

protected void Button1_Click(object sender, EventArgs e) 
{ 

    Session["Name"] += txtName.Text + "|"; 
    Session["Add1"] += txtAdd1.Text + "|"; 
    Session["Add2"] += txtAdd2.Text + "|"; 
    CreateTable(); 

} 
public void CreateTable() { 

    string[] sa = Session["Name"].ToString().Split('|'); 
    string[] sb = Session["Add1"].ToString().Split('|'); 
    string[] sc = Session["Add2"].ToString().Split('|'); 
    int recordnum = sa.Length; 

    for (int j = 0; j < recordnum - 1; j++) { 

        DataRow dr = dt.NewRow(); 
        dr["Name"] = sa[j].ToString(); 
        dr["Add1"] = sb[j].ToString(); 
        dr["Add2"] = sc[j].ToString(); 
        dt.Rows.Add(dr); 

    } 

    GridView1.DataSource = dt.DefaultView; 
    GridView1.DataBind(); 

} 
```

但这不是动态的，我只是无法听到这个。因此，我从 foreach 循环开始遍历表 A 的行和单元格，但不确定如何填充表 B 中的各个行和单元格。

```
 foreach (DataRow row in _dt.Rows)
    {
        for (int i = 2; i < row.ItemArray.Length; i++ )
        {
            if (row.ItemArray[i] != DBNull.Value)
                _total += Convert.ToInt32(row.ItemArray[i]);
        }
    } 
```

谢谢。

理庄

最新更新：当我写这篇文章时，我脑海中的小灯泡正在打开，我生成了这段代码。它不会出错，但它也不起作用。仅出于测试目的，我尝试绑定到 gridview 以查看我得到的数据 - 但没有数据。statis 列名称在调试器中可见，并且我知道源数据表具有良好的数据。这是供您检查的代码：

```
DataTable _newDt = new DataTable();

    DataColumn _dc1 = new DataColumn();
    _dc1.DataType = typeof(String);
    _dc1.ColumnName = "Wuc";

    DataColumn _dc2 = new DataColumn();
    _dc2.DataType = typeof(String);
    _dc2.ColumnName = "Wuc Entries";

    DataColumn _dc3 = new DataColumn();
    _dc2.DataType = typeof(String);
    _dc3.ColumnName = "Total Entries";

    _newDt.Columns.Add(_dc1);
    _newDt.Columns.Add(_dc2);

    int _total = 0;

    foreach (DataRow row in _dt.Rows)
    {
        DataRow _dr = _newDt.NewRow();

        DataColumn col1 = new DataColumn();
        col1.DataType = typeof(string);
        col1.ColumnName = row.ItemArray[0].ToString();

        DataColumn col2 = new DataColumn();
        col2.DataType = typeof(string);
        col2.ColumnName = row.ItemArray[1].ToString();

        DataColumn col3 = new DataColumn();
        col3.DataType = typeof(int);

        for (int i = 2; i < row.ItemArray.Length; i++ )
        {
            if (row.ItemArray[i] != DBNull.Value)
                _total += Convert.ToInt32(row.ItemArray[i]);
        }

        col3.ColumnName = _total.ToString();
    } 
```

更新#2：

我进行了以下更改，但弹出了一个新错误：

> “输入字符串的格式不正确。无法存储在 Wuc 条目列中。预期类型为 Int32。”

问题是我已经将该列定义为字符串，父表中的数据是字符串格式，所以我不明白为什么它需要一个 Int32。（？）这是新版本：

```
 DataTable _newDt = new DataTable();
    DataRow _dr;

    DataColumn _dc1 = new DataColumn();
    _dc1.DataType = typeof(String);
    _dc1.ColumnName = "Wuc";

    DataColumn _dc2 = new DataColumn();
    _dc2.DataType = typeof(String);
    _dc2.ColumnName = "Wuc Entries";

    DataColumn _dc3 = new DataColumn();
    _dc2.DataType = typeof(Int32);
    _dc3.ColumnName = "Total Entries";

    _newDt.Columns.Add(_dc1);
    _newDt.Columns.Add(_dc2);

    int _total = 0;

    foreach (DataRow row in _dt.Rows)
    {
        _dr = _newDt.NewRow();

        _dr["Wuc"] = row.ItemArray[0].ToString();
        _dr["Wuc Entries"] = row.ItemArray[1].ToString();

        for (int i = 2; i < row.ItemArray.Length; i++ )
        {
            if (row.ItemArray[i] != DBNull.Value)
                _total += Convert.ToInt32(row.ItemArray[i]);
        }

        _dr["Total Entries"] = _total;
        _newDt.Rows.Add(_dr);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T22:48:46.363

好吧，经过多次试验和错误，我能够通过将 trird 列更改为 typeof(String) 来消除错误，这实际上并没有影响我的数据结果。

但我觉得这并没有真正解决问题，我想在其他时间深入了解这个问题。

# c# - 如何进行类属性的字典定义？

> ID：14902329
> 
> 赞同：1
> 
> 时间：2013-02-15T19:54:28.360
> 
> 标签：c#

我有这样的课：

```
public class book
{
    public string Author {get; set;}
    public string Genre  {get; set;}
} 
```

现在，`Genre`例如，应该是一个`Dictionary`，其中包含一个带有 ID 的不同流派列表，所以当我创建一本新书时，我将 设置`Genre`为`Dictionary`项目之一。

我该如何设置？我是否会有一个单独的`Genre`类来定义每个类，或者......我想我只是不确定如何处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:55:55.553

是的，一个`Genre`类将是设置它的最佳方式。

```
 public class Book
    {
        public string Author {get; set;}
        public Genre Genre  {get; set;}
    }

    public class Genre
    {
        public string Id {get; set;}
        public string Name  {get; set;}
    } 
```

但是，如果“字典”的字面意思是`Dictionary`，那么

```
public class Book
{
    public string Author {get; set;}
    public Dictionary<int, string> Genre  {get; set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T19:57:07.463

也许是这样的？

```
public class Book
{
  public string Author { get; set; }
  public Genre Genre { get; set; }

  public Book(string author, Genre genre)
  {
    Author = author;
    Genre = genre;
  }
}

public class Genre 
{
  public string Name { get; set; }

  public static ICollection<Genre> List = new List<Genre>();

  public Genre(string name)
  {
    Name = name;

    List.Add(this);
  }
} 
```

# bash - 在管道输出中添加间歇性 ID

> ID：14902331
> 
> 赞同：1
> 
> 时间：2013-02-15T19:54:33.143
> 
> 标签：bash, scripting

我想遍历文档文件列表，对其进行处理并将结果输出到单个文件中，但要指定文件 ID。处理包括：标记去除、标记化、句子分割。

输入是这样的：

```
/path/to/file1 docid1 
/path/to/file2 docid2 
```

输出将是标记，每行一个，标记包含 docid 和句子 nr：

```
<D=docid1.1>
tok1
tok2
</D>
<D=docid1.2>
...
</D>
<D=docid2.1>
...
</D> 
```

我现在这样做的方式如下：

```
>$outfile
for filename_id in `cat $filelist`
do
 filename=`echo $path_id | cut -f1 -d' '`
 docid=`echo $path_id | cut -f2 -d' '`

 strip_markup.sh $filename \
 | tokenize.sh \
 | sentence_split.sh \
 | add_ids.sh $docid
 | >> $outfile
done 
```

现在的问题是我有相当多的小文件，每个步骤都有一些启动时间（启动 JVM、加载模型等），有些相当大。实际运行时间非常快，如非常大（人工）文件所见。分析表明，这一步（分词和句子分割）是我项目中最耗时的一步（其他一些概念上更“复杂”的东西运行得更快。）

基本上我想做的是给strip_markup.sh脚本整个文件列表而不是单个文件名，但是之后需要以某种方式插入ID。如果不是绝对必要，则不应更改输入和输出格式。此外，我们还想使用我们拥有的模块进行标记化和拆分，因为已经以这种方式处理了很多数据。

任何想法如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:30:31.853

我可以假设`add_ids.sh`只是在前面加上`<D=$docid>`一行并将一行附加`</D>`到它的输入上吗？也许以下将起作用。请注意，我使用`while`循环和`read`命令来提取文件名和 docid，而不需要外部进程。

```
< $filelist
while read filename docid; do
    echo "<D=$docid>"
    strip_markup.sh $filename |
    tokenize.sh |
    sentence_split.sh
    echo "</D>" 
done > $outfile 
```

由于循环体中的所有标准输出都立即序列化到输出文件，因此不需要单独的进程将标记化和拆分数据作为输入来将其包装在`<D`元素中。总而言之，这种方法在每次迭代中删除了几个进程（两个子shell 和`cut`用于处理输入的相关 s，以及用于 的进程`add_ids.sh`）。

# php - 需要帮助理解 php 对象属性名称与数组键

> ID：14902335
> 
> 赞同：2
> 
> 时间：2013-02-15T19:55:08.770
> 
> 标签：php

我在以灵活的方式使用 PHP 对象属性名称时遇到了一些麻烦，类似于数组键。

我的理解是数组键可以是任何字符串或整数，例如

```
$arr = array("crash-me" => "value"); 
```

是一个有效的键/值对。

现在，如果我将其“投射”到一个对象：

```
$obj = (object) $arr; 
```

由于密钥字符串中的破折号，我做了什么非法的事情吗？

一个简单的例子说明了我的困境：

```
<?php
error_reporting(-1);
$obj = new stdClass;
$prop = "crash-me";
$arr = array();
$obj->$prop = "no crash"; 
$obj->$prop = $arr; // bp here and $obj->$prop is correct
print_r($obj); // bp here, inspect $obj->$prop and... xdebug/php will crash.
exit; 
```

当您在 print_r() 之前检查 $obj 的值时，这将使用 xdebug 使 eclipse-pdt 崩溃。

但是，如果没有 bp，则在退出时从 print_r() 正确打印内容。

```
stdClass Object ( [crash-me] => Array ( ) ) 
```

请注意，如果我在将某些内容分配给属性时将其填充到数组中，则一切正常：

```
$obj = new stdClass;
$prop = "crash-me";
$arr = array("works_ok");
$obj->$prop = "no crash";
$obj->$prop = $arr;
print_r($obj);
exit; 
```

底线，我想使用带有破折号的属性名称，可能还有其他类似于数组键的标点符号。是否可以？或者我是否通过分配一个空数组来做非法的事情，在这种情况下不会捕获错误？

提前感谢您的考虑！

在编辑时，我忘记了谜题的另一部分 - 下面的代码不会崩溃。在这种情况下，属性名称没有破折号，但是数组键为空！

```
$obj = new stdClass;
$prop = "crash_me";  // note underscore
$arr = array();
$obj->$prop = "no crash"; 
$obj->$prop = $arr; // bp here and $obj->$prop is correct
print_r($obj); // bp here, inspect $obj->$prop and... no crash!
exit; 
```

对困惑感到抱歉！这可能是我想念的明显东西。

在第二次编辑-

为了澄清，我希望从 json_decode() 读取属性名称并简单地使用对象而无需转换为数组。这是一个使用 json 数据文件中的键进行动态代码生成的实验。根据下面的讨论，看起来如果我想继续使用 PHP，我需要 $arr['key1']['key2']... 语法并让解码器使用“array”标志。

感谢您的精彩回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:01:57.130

我不确定 xdebug 是否对非标准属性名称有任何问题，但您绝对不想*故意*使用这些属性名称。这没有意义。

如果您打算将对象用于 OO 目的，那么您将正式声明它们的属性。在这种情况下，使用“奇怪”的属性名称是完全不可能的，没有什么可说的了。

如果您不打算将对象用于 OO，那么您最终只会拥有可以索引的数组，`$like->this`而不是`$like['this']`. 虽然第一种形式更短而且我自己更喜欢它，但在使用属性时它变得更加丑陋`$with->{'strange-names'}`——实际上比数组访问更糟糕。再说一次，这样做没有任何好处。

在某些非常特殊的情况下，可能会出现这样的属性名称——例如，如果一个对象使用其属性的名称作为数据库表中的列名。但即使在这种情况下，通常在 PHP 属性名称和数据库列名称之间添加一个转换层会更方便，而不是在每一步都与语法作斗争。

**额外的论点：**如果看[这个问题](https://stackoverflow.com/q/10333016/50079)还不足以改变你的想法，那么什么都不会。这只是一个特定的极端情况，但我们正在谈论 PHP。角落案例应该......避免。

# java - 无论如何，在没有显式转换的情况下完成这项工作吗？（尝试通用父子关系）

> ID：14902336
> 
> 赞同：1
> 
> 时间：2013-02-15T19:55:10.070
> 
> 标签：java, design-patterns, generics

**接口：**

```
package sandBox.ps.generics.compositePattern;

import java.util.Collection;

interface AnimalInterface {
    String getID();

    /*
     * getAnimals can be:
     * 1\. AnimalInterface
     * 2\. Anything that implements/extends AnimalInterface (i.e. AnimalInterface or DogInterface)
     */
    Collection<? extends AnimalInterface> getAnimals();
}

interface DogInterface extends AnimalInterface {
    String getBreed();
} 
```

**课程：**

```
package sandBox.ps.generics.compositePattern;

import java.util.Collection;
import java.util.Collections;

class AnimalClass implements AnimalInterface {
    private final String id;
    private final Collection<? extends AnimalInterface> animals;

    AnimalClass(final String id,
        final Collection<? extends AnimalInterface> animals) {
    this.id = id;
    this.animals = animals;
    }

    @Override
    public String getID() {
    return this.id;
    }

    @Override
    public Collection<? extends AnimalInterface> getAnimals() {
    return this.animals;
    }
}

class DogClass extends AnimalClass implements DogInterface {

    private final String breed;

    DogClass(final String id, final String breed) {
    super(id, Collections.<AnimalInterface> emptyList());
    this.breed = breed;

    }

    @Override
    public String getBreed() {
    return this.breed;
    }

} 
```

**测试类：**

```
package sandBox.ps.generics.compositePattern;

import java.util.ArrayList;
import java.util.Collection;

public class TestClass {
    public void testA() {
    // Dog Collection (Child)
    final DogInterface dog = new DogClass("1", "Poodle");
    final Collection<DogInterface> dogCol = new ArrayList<DogInterface>();
    dogCol.add(dog);

    // Animal Collection of Dogs (Parent)
    final AnimalInterface animal = new AnimalClass("11", dogCol);
    final Collection<AnimalInterface> parent = new ArrayList<AnimalInterface>();
    parent.add(animal);
    // Animal Collection of Animals (Grand-Parent)
    final AnimalInterface grandParent = new AnimalClass("11", parent);

    // Get Dog
    for (final AnimalInterface parents : grandParent.getAnimals()) {
        /* I know the this code would work.
         * My question is, is there anyway to do this without explicit casting
        for (final AnimalInterface child : parents.getAnimals()) {
    if (child instanceof DogInterface) {
        System.out.println(((DogInterface)child).getBreed());
    }
    }
        */

        /*  HERE:   This is the part I am trying to solve.
         *  Do I use extends or super for AnimalInterface
         *  Is there any option such that I don't need to do a casting of some type
         */
        for (final DogInterface child : parents.getAnimals()) {
        System.out.println(child.getBreed());
        }       
    }
    }
} 
```

问题：

1.  测试类的最后几行尝试访问动物。
2.  我想弄清楚的是，无论如何要避免显式转换？
3.  是否有任何扩展，超级或其他通用术语的组合可以使这项工作？
4.  如果铸造是唯一的选择，应该在哪里完成？
5.  我已经知道这会起作用：

> ```
> for (final AnimalInterface child : parents.getAnimals()) {
>     if (child instanceof DogInterface) {
>        System.out.println(((DogInterface)child).getBreed());
>     }
> } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:11:05.647

恐怕如果您想在超类引用上调用子类方法，那么确实需要进行强制转换。

也就是说，我会以不同的方式解决这个问题，但可能会重新设计你的程序，这样就没有必要在 TestClass 级别知道你正在处理什么样的动物。

例如，您可以按照以下方式做一些事情

```
for (final AnimalInterface child : parents.getAnimals()) {
    System.out.println(child.getType()); // or something similar 
```

关键是您可以将知道要返回什么的责任推给实际的课程。

“品种”是自然答案的类可以返回品种，对于其他人来说，它可以返回其他东西。

在这种情况下，您可能不希望每只动物都拥有此方法（getType），因此您也可以先拥有一个 hasType（或其他）。

最后，如果您发现在某些时候确实需要确定有问题的实际类型，您可以进一步将其推送到另一个只进行此确定的班级，留下这样只有一个班级有这种知识。

我希望这一切都有意义 - 这是一个有点漫不经心的答案......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:15:34.050

您始终可以使用访问者：

```
DogBreedVisitor dogBreedVisitor = new DogBreedVisitor();
for (final AnimalInterface child : parents.getAnimals()) {
    child.visit(dogBreedVisitor);
} 
```

这是一个非常简单的实现：

```
interface AnimalInterface {
    void visit(AnimalVisitor visitor);
}

interface DogInterface extends AnimalInterface {
    String getBreed();
}

interface AnimalVisitor {
    public void visit(DogInterface dog);
    public void visit(AnimalInterface animal);
}

class DogBreedVisitor implements AnimalVisitor {
    @Override
    public void visit(DogInterface dog) {
        System.out.println(dog.getBreed());
    }
    @Override
    public void visit(AnimalInterface animal) {
       // ignore
    }
}

class DogClass implements DogInterface {
    @Override
    public String getBreed() {
        return "my breed";
    }
    @Override
    public void visit(AnimalVisitor visitor) {
        visitor.visit(this);
    }
}

class AnimalClass implements AnimalInterface {
    @Override
    public void visit(AnimalVisitor visitor) {
        visitor.visit(this);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:40:45.483

是的，你可以做到。你需要给`AnimalInterface`一个通用参数，告诉你你从什么类型的动物身上得到`getAnimals()`，然后你需要使用`AnimalInterface<DogInterface>`for`animal`和`AnimalInterface<AnimalInterface<DogInterface>>`for `grandParent`。

完整的代码是这样的：

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;

interface AnimalInterface<A extends AnimalInterface<?>> {
  String getID();

  /*
   * getAnimals can be:
   * 1\. AnimalInterface
   * 2\. Anything that implements/extends AnimalInterface (i.e. AnimalInterface or DogInterface)
   */
  Collection<A> getAnimals();
}

interface DogInterface extends AnimalInterface<DogInterface> {
  String getBreed();
}

class AnimalClass<A extends AnimalInterface<?>> implements AnimalInterface<A> {
  private final String id;
  private final Collection<A> animals;

  AnimalClass(final String id, final Collection<A> animals) {
    this.id = id;
    this.animals = animals;
  }

  @Override
  public String getID() {
    return this.id;
  }

  @Override
  public Collection<A> getAnimals() {
    return this.animals;
  }
}

class DogClass extends AnimalClass<DogInterface> implements DogInterface {

  private final String breed;

  DogClass(final String id, final String breed) {
    super(id, Collections.<DogInterface> emptyList());
    this.breed = breed;
  }

  @Override
  public String getBreed() {
    return this.breed;
  }

}

class TestClass {
    public void testA() {
    // Dog Collection (Child)
    final DogInterface dog = new DogClass("1", "Poodle");
    final Collection<DogInterface> dogCol = new ArrayList<DogInterface>();
    dogCol.add(dog);

    // Animal Collection of Dogs (Parent)
    final AnimalInterface<DogInterface> animal = new AnimalClass<DogInterface>("11", dogCol);
    final Collection<AnimalInterface<DogInterface>> parent = new ArrayList<AnimalInterface<DogInterface>>();
    parent.add(animal);
    // Animal Collection of Animals (Grand-Parent)
    final AnimalInterface<AnimalInterface<DogInterface>> grandParent = new AnimalClass<AnimalInterface<DogInterface>>("11", parent);

    // Get Dog
    for (final AnimalInterface<DogInterface> parents : grandParent.getAnimals()) {
      for (final DogInterface child : parents.getAnimals()) {
        System.out.println(child.getBreed());
      }
    }
  }
} 
```

# html - 如何在我的网站上居中此表？

> ID：14902339
> 
> 赞同：-3
> 
> 时间：2013-02-15T19:55:13.143
> 
> 标签：html, css

我的网站上有两个带有广告的表格。

顶部的似乎居中，但底部的不是居中。

我尝试添加一堆代码以使表格居中，但它似乎不起作用。

当前代码如下所示：

```
<div align="center">
<table align="center" style="text-align:center; margin-left: auto; margin-right: auto; border-collapse:separate; border-spacing: 20px 0px;">
<tr style="height:100px">
<td><span id="ad1"></span></td>
<td><span id="ad5"></span></td>
<td><span id="ad4"></span></td>
</tr>
</table>
</div> 
```

我该怎么做才能正确居中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:05:12.200

它没有出现居中，因为 table + images 比包含它的 div 宽。我添加了一些内联样式，如下所示，使其看起来正确，但您确实应该调整容器的宽度或使用适合您拥有的容器的图像。

本质上，我在表格和表格中的图像中添加了 max-width:100%。

```
<div align="center" style=" text-align: center;">
    <table align="center" style="text-align:center; margin-left: auto; margin-right: auto; border-collapse:separate; border-spacing: 20px 0px; max-width:100%">
        <tbody>
            <tr style="height:100px">
                <td>
                    <span id="ad1">
                        <a href="http://ltm.me/ad1" title="Amp Cellular" target="_blank">
                            <img src="http://jewishmusicstream.com/ads/amp.jpg" width="300" height="100" style="max-width: 100%;">
                        </a>
                    </span>
                </td>
                <td>
                    <span id="ad5">
                        <a href="http://ltm.me/ad5" title="Get Peyd" target="_blank">
                            <img src="http://jewishmusicstream.com/ads/getpeyd.gif" width="300" height="100" style="max-width: 100%;">
                        </a>
                    </span>
                </td>
                <td>
                    <span id="ad4">
                        <a href="http://ltm.me/ad4" title="The Kosher Chocolatier" target="_blank">
                            <img src="http://jewishmusicstream.com/ads/thekosherchocolatier.png" width="300" height="100" style="max-width: 100%;">
                        </a>
                    </span>
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

# breeze - Breeze,js 错误集合导航属性可能未设置

> ID：14902352
> 
> 赞同：1
> 
> 时间：2013-02-15T19:56:03.713
> 
> 标签：breeze

当我尝试将新对象添加到导航集合导航属性时，我收到此错误可能未设置。

这是我的 POCO：

```
 public class Category : BaseEntity,IDeletable
{
    public Category()
    {
        Products = new List<Product>();
        ChildCategories = new List<Category>();
    }

    [Required]
    [Display(ResourceType = typeof(DelkaShop.Entities.EntityText.EntityText), Name = "EntityName")]
    public String Name { get; set; }

    [Display(ResourceType = typeof(DelkaShop.Entities.EntityText.EntityText), Name = "ParentCategory")]
    public int? ParentCategoryId { get; set; }

    [Display(ResourceType = typeof(DelkaShop.Entities.EntityText.EntityText), Name = "ItemsPerPage")]
    public int? ItemsPerPage { get; set; }

    [InverseProperty("Categories")]
    public ICollection<Product> Products { get; set; }

    [ForeignKey("ParentCategoryId")]
    [Display(ResourceType = typeof(DelkaShop.Entities.EntityText.EntityText), Name = "ParentCategory")]
    public  Category ParentCategory { get; set; }

    public  ICollection<Category> ChildCategories { get; set; }

} 
```

在微风中，我正在做类似 product.Categories.push(newCategoryObject);

有人可以指出我正确的方向吗？

编辑：我忘了提到我在多对多关系中遇到了这个错误，只是在文档中读到这还不支持。

有没有解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:37:43.000

恐怕唯一的解决方法是将两种类型之间的映射公开为自己的实体。

正如我在其他地方所说，我不喜欢将映射对象隐藏在 EF m-to-m 关联后面。这种伪装似乎总是造成比其价值更多的麻烦。映射获得有效负载的那一刻——链接日期、版本、租户标识符——任何东西——m-to-m 分崩离析，必须定义映射对象。根据我的经验，那个“时刻”迟早会到来。它出现的越晚，它造成的麻烦就越多。所以我建议在成本低的时候把它暴露出来。这对你来说可能吗？

# php - 按值获取所有数组键

> ID：14902353
> 
> 赞同：4
> 
> 时间：2013-02-15T19:56:06.633
> 
> 标签：php, arrays, multidimensional-array

假设我有一个这样的数组：

```
Array
(
[Start] => Array
    (
        [Item 1] => Array
            (
                [0] => Item 1_1
                [Item 2_1] => Array
                    (
                        [Item 2_1_1] => x
                    )

                [1] => Item 3_1
            )

        [0] => Item 2
        [1] => Item 3
    ) 
```

)

是否有一个 php 函数可用于获取指向`x`我的数组中的值的路径，这意味着，在这种情况下，结果将是：

```
Start, Item 1, Item 2_1, Item 2_1_1, x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:14:20.067

您遇到的问题涉及递归和/或树遍历。`RecursiveArrayIterator`PHP 支持使用和对数组进行树遍历`RecursiveIteratorIterator`。

要获取所有父数组的所有key，需要从第一层到当前深度获取key。`RecursiveIteratorIterator`该方法也支持这一点[`getSubIterator()`](http://php.net/RecursiveIteratorIterator.getSubIterator)。手册中并没有很好地记录它，所以这里是一个例子：

```
$it = new RecursiveIteratorIterator(
    new RecursiveArrayIterator($array)
);

foreach ($it as $value) {
    if ($value !== 'x') continue;

    $keys  = array();
    $depth = $it->getDepth();
    for ($i = 0; $keys[] = $it->getSubIterator($i)->key(), $depth--; $i++);

    echo implode(', ', $keys), ', ', $value, "\n";
} 
```

在这个例子中，首先创建了`RecursiveArrayIterator`with your `$array`。为了启用树遍历，它被包装到`RecursiveIteratorIterator`. 这是以递归方式使用`$it`-iterator所必需的。`foreach`

在`foreach`then 内部，将根据您的搜索值检查数组值。如果不匹配，则继续下一个值。

但如果它确实匹配递归迭代器上的`getDepth()`and`getSubIterator()`方法，则用于创建键数组。

该示例执行以下输出：

```
 Start, Item 1, Item 2_1, Item 2_1_1, x 
```

这符合您在问题中的描述。

因为这些是迭代器，所以您也可以将其实现到它自己的类中。下面的`Iterator`类不仅允许对构造函数中提供的数组进行树遍历，而且还有一个名为的方法`getKeys()`，它返回一个包含从最低级别到当前深度的所有键的数组：

```
/**
 * Class ArrayRecursiveKeysIterator
 */
class ArrayRecursiveKeysIterator extends RecursiveIteratorIterator
{
    /**
     * @param array $array
     */
    public function __construct(array $array)
    {
        parent::__construct(new RecursiveArrayIterator($array));
    }

    /**
     * @return array keys
     */
    public function getKeys()
    {
        for ($k = [], $i = 0, $m = $this->getDepth(); $i <= $m; $i++)
            $k[] = $this->getSubIterator($i)->key();
        return $k;
    }
} 
```

然后它更易于使用（并且可能也适用于其他场景）。所以首先是一些基本的用法示例。遍历数组显示每个值的所有键。实例化数组的迭代器并输出每个值的键：

```
$it = new ArrayRecursiveKeysIterator($array);
foreach ($it as $value) {
    echo implode(', ', $it->getKeys()), ', ', $value, "\n";
} 
```

这将创建以下输出：

```
Start, Item 1, 0, Item 1_1
Start, Item 1, Item 2_1, Item 2_1_1, x
Start, Item 1, 1, Item 3_1
Start, 0, Item 2
Start, 1, Item 3 
```

在您的场景中，您还希望根据特定值（此处为 string `"x"`）过滤迭代器，您可以通过使用`RegexIterator`which is a轻松完成此操作`FilterIterator`。这就是你的场景：

```
$it     = new ArrayRecursiveKeysIterator($array);
$filter = new RegexIterator($it, '~^x$~');
foreach ($filter as $value) {
    echo implode(', ', $it->getKeys()), ', ', $value, "\n";
} 
```

这里的输出：

```
Start, Item 1, Item 2_1, Item 2_1_1, x 
```

如您所见，它会针对您感兴趣的值进行过滤。

您可能感兴趣的其他相关问题是：

*   [RecursiveIteratorIterator 在 php 中是如何工作的](https://stackoverflow.com/q/12077177/367456)
*   [PHP - 从面包屑列表的多维关联数组返回父数组](https://stackoverflow.com/q/14021028/367456)
*   [以相反的顺序从单向数组中获取数据](https://stackoverflow.com/q/13007380/367456)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:05:34.753

我目前能想到的唯一方法是大量嵌套`foreach ($array as $key => $value)`循环和`array_search()`.

让它成为一个递归的设计会更好，所以使用一个函数是明智的。

```
function recursiveSearch($key, $array)
{
    foreach ($array as $k => $ar) {
        if (is_array('x', $ar)) {
            return $k . ', ' . array_search('x', $ar);
        } else {
            if ($ar === 'x') {
                return $k
            } else {
                return recursiveSearch($key, $ar);
            }
        }
    }
} 
```

只是一个承担，不一定工作或类似的东西。

# c# - 缓存 Linq 查询 - 这可能吗？

> ID：14902354
> 
> 赞同：6
> 
> 时间：2013-02-15T19:56:10.897
> 
> 标签：c#, linq, caching, iterator, deferred-execution

所以，这可能看起来像一个边缘案例，但我只是想知道这是否可能。我所拥有的是一个静态集和延迟集的组合，包裹在一个`IEnumerable`- 例如：

```
public IEnumerable<T> MakeMyQuery<T>()
{
    // returns a List<T>
    var someStaticData = LoadMyStaticDataFromDatabase();

    // Returns IEnumerable<T>, but from another resource
    var deferredQuery = CreateADeferredQueryUsingYieldReturn(); 

    return someStaticData.Concat(deferredQuery);
} 
```

所以这里发生的是，当我调用`.Take(someNumber)`我的可枚举时，它会先从我的静态数据中返回元素，然后再尝试评估延迟的组件——实际上，我已经“隐藏”了一些潜在的耗时的生成任务，这样如果我永远不需要获取这些元素，由于 LINQ 的延迟性质，它们实际上从未得到评估。

但是，我认为不可能缓存此查询以供以后使用（我不相信迭代器的状态将保留在缓存中，对吗？）或者是否有一种简单的方法可以在不枚举结果的情况下做到这一点节省？

理想情况下，我的流程是这样的：

```
public List<T> SomeMethod<T>(int numberOfGuys)
{
     IEnumerable<T> query = null;

     if(// Is in Cache)
       query = Cache["MyQuery"];
     else
     {
         query = MakeMyQuery();
         Cache["MyQuery"] = query;
     }

     return query.Take(numberOfGuys).ToList();
} 
```

所以我可以一遍又一遍地重复使用相同的查询来请求数据，但可能永远不必重新查询数据库。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:58:31.547

我认为您想将结果缓存`query.Take(numberOfGuys).ToList()`在新列表中。在调用之前，`MakeMyQuery()`您可以查看缓存列表中的元素数量（如果存在），如果缓存列表中的元素数量大于或等于，`numberOfGuys`那么您`numberOfGuys`将从缓存列表中返回 。否则你会用新的结果替换你的缓存列表`query.Take(numberOfGuys).ToList()`。

正如 default.krammer 指出的那样，您可能真正想要缓存的是结果，`LoadMyStaticDataFromDatabase()`因为 if`numberOfGuys`总是小于`LoadMyStaticDataFromDatabase()`，您最终会反复访问数据库，直到`numberOfGuys`大于返回的数字`LoadMyStaticDataFromDatabase()`。因此，您可以`LoadMyStaticDataFromDatabase()`将`MakeMyQuery<T>()`方法`query.Take(numberOfGuys).ToList()`中的缓存`SomeMethod<T>(int numberOfGuys)`和`IEnumerable<T>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:16:11.797

我知道这可能有点过时，但您可能会从数据库中填充 ADO.NET 数据集，因为 ADO.NET 层的 DataSet 和 DataTable 是断开连接的层。然后数据集可以由应用程序在内存中保存一段确定的时间。然后，您可以将其发布回数据库。创建您的数据集，从实体、ADO.NET 连接层或 Linq 到 SQL 层填充它，它存在填充，您可以根据需要进一步填充新数据，然后在最终查询中将其比较回数据库进行合并变化。

我知道我不久前做了一个项目，我混合了 Linq、ADO.NET 和 xml 序列化，基本上将 ADO.NET 中的数据序列化为带有 ADO.NET 的内置 xml 序列化的 xml 文件。然后用 Linq to XML 阅读它。这与您所说的类似，因为 XML 文件本质上是文件格式的缓存，我只是通过计算它代表数据库中键值的不同元素来更新它。如果它的计数关闭，它会更新，否则它保持不变。这不适用于数百万行的大型集合，但对于我想要的小东西总是可以访问它很好并且非常快。

我知道在 70-516 MS Press 关于 .NET 4.0 数据访问的书中，如果您可以在网上找到它，那么在本书末尾附近有一个关于缓存的实验室。它基本上以数据库为目标，收集自上次以来的更改，然后进行处理，然后在最后合并。这样，您就可以不断地使用内存较小但跟踪您的工作变化的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:04:38.377

也许我不完全理解你的问题。如果是这样，请告诉我，我将重新制定我的答案。

我相信您所写的内容已经如您所愿。考虑以下玩具示例（类似于您显示的代码）。我没有测试过，但是你应该看到的是，如果你`Take`少于 4 个项目，你永远不会进入`SuperExpensiveQuery`.

```
static IEnumerable<int> SuperExpensiveQuery()
{
    Console.WriteLine("super expensive query (#1)");
    yield return 100;
    Console.WriteLine("super expensive query (#2)");
    yield return 200;
    Console.WriteLine("super expensive query (#3)");
    yield return 300;
    Console.WriteLine("super expensive query (#4)");
}

static IEnumerable<int> MakeMyQuery()
{
    var someStaticData = new int[] { 1, 2, 3 };
    var deferredQuery = SuperExpensiveQuery();
    return someStaticData.Concat(deferredQuery);
}

static void Test()
{
    var query = MakeMyQuery();
    for (int i = 0; i <= 7; i++)
    {
        Console.WriteLine("BEGIN Take({0})", i);
        foreach (var n in query.Take(i))
            Console.WriteLine("    {0}", n);
        Console.WriteLine("END Take({0})", i);
    }
    Console.ReadLine();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T21:41:34.877

我的一个项目中有类似的要求。我最终做的是创建一个 DataAccesLayer (DAL) 缓存库，我在 DAL 中为我的每个组件继承它。我有一个单独的缓存类来保存缓存。请注意，我所有的对象都有 ID 和名称。您可以根据需要定制基类。

DAL 基类：

```
public abstract class DALBaseCache<T>
    {
        public List<T> ItemList
        {
            get
            {
                List<T> itemList = DALCache.GetItem<List<T>>(typeof(T).Name + "Cache");

                if (itemList != null)
                    return itemList;
                else
                {
                    itemList = GetItemList();
                    DALCache.SetItem(typeof(T).Name + "Cache", itemList);
                    return itemList;
                }
            }
        }

        /// <summary>
        /// Get a list of all the Items
        /// </summary>
        /// <returns></returns>
        protected abstract List<T> GetItemList();

        /// <summary>
        /// Get the Item based on the ID
        /// </summary>
        /// <param name="name">ID of the Item to retrieve</param>
        /// <returns>The Item with the given ID</returns>
        public T GetItem(int id)
        {
            return (from item in ItemList
                    where (int)item.GetType().GetProperty("ID").GetValue(item, null) == id
                    select item).SingleOrDefault();
        }

        /// <summary>
        /// Get the Item based on the Name
        /// </summary>
        /// <param name="name">Name of the Item to retrieve</param>
        /// <returns>The Item with the given Name</returns>
        public T GetItem(string name)
        {
            return (from item in ItemList
                    where (string)item.GetType().GetProperty("Name").GetValue(item, null) == name
                    select item).SingleOrDefault();
        }
    } 
```

然后是我的缓存类，它基本上包含我的查询字典

```
public static class DALCache
{
    static Dictionary<string, object> _AppCache = new Dictionary<string, object>();

    public static T GetItem<T>(string key)
    {
        if(_AppCache.ContainsKey(key))
        {
            return (T) _AppCache[key];
        }
        else
        {
            return default(T);
        }
    }

    public static void SetItem(string key, object obj)
    {
        _AppCache.Add(key, obj);
    }
} 
```

最后是一个带有缓存列表的实现。我使用 EF 获取我的 CustomerType 列表并将其缓存到应用程序生命的剩余时间。您可以根据需要更改此设置。

```
public class CustomerTypeDAL: DALBaseCache<CustomerType>
{
    protected override List<CustomerType> GetItemList()
    {
        DBEntities entities = new DBEntities();
        return Mapper.Map <List<CustomerType>>(entities.GetAllCustomerTypes().ToList());
    }
} 
```

在您的代码中的任何地方，您都可以将其用作：

```
CustomerTypeDAL customerTypeDAL = new CustomerTypeDAL();
List<CustomerType> custTypes = customerTypeDAL.ItemList; 
```

第一次调用它时，它会从 DB 中获取它。之后，它将在缓存之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-12T20:42:53.987

是的，如果您在迭代**时缓存值是可能的。**

它看起来像这样：

```
var lazyList = MakeMyQuery<int>().ToLazyList();
var list1 = lazyList.Take(2).Sum();
var list2 = lazyList.Take(3).Sum();
var list3 = lazyList.Take(1).Sum(); 
```

在这种情况下： f

*   前 3 个项目总共仅从 MakeMyQuery 产生 1 次。
*   第四个项目没有产出。

一个惰性列表的实现示例在[这里](http://www.siepman.nl/blog/post/2013/10/09/LazyList-A-better-LINQ-result-cache-than-List.aspx)。

# mercurial - 如何使用 Mercurial 从 http://kenai.com 下载源代码？

> ID：14902357
> 
> 赞同：0
> 
> 时间：2013-02-15T19:56:16.033
> 
> 标签：mercurial

如何使用 Mercurial 下载源代码？我有兴趣从[http://kenai.com/projects/javaee-patterns/sources/hg/show/AOPandJavaEE](http://kenai.com/projects/javaee-patterns/sources/hg/show/AOPandJavaEE)获取源代码。我安装了 Mercurial，我尝试过`hg clone https://hg.kenai.com/hg/javaee-patterns~hg`，但出现以下错误：

```
abort: error: A connection attempt failed because the connected party did not pr
operly respond after a period of time, or established connection failed because
connected host has failed to respond 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:21:36.793

它对我来说克隆成功：

```
$ hg clone https://hg.kenai.com/hg/javaee-patterns~hg
warning: hg.kenai.com certificate with fingerprint 9c:f6:c3:1f:14:bc:98:82:de:2a:5b:6e:d2:ce:61:5d:95:e1:65:a5 not verified (check hostfingerprints or web.cacerts config setting)
destination directory: javaee-patterns~hg
requesting all changes
adding changesets
adding manifests
adding file changes
added 465 changesets with 3698 changes to 2360 files (+1 heads)
updating to branch default
2064 files updated, 0 files merged, 0 files removed, 0 files unresolved 
```

您的错误消息看起来像是您遇到了网络连接故障，但这更有可能与您的互联网连接有关，而不是与他们的连接有关。

您可以尝试执行 a`hg init`后跟 a `hg pull -r 1 https://hg.kenai.com/hg/javaee-patterns~hg`，它只提取第一个变更集，但这仅在您在下载时超时时才有帮助 - 您在最初连接时超时。

看起来如果您创建一个帐户并登录，他们会向您显示一个可能更强大的 ssh URL。

# asp.net-mvc - 将用户与角色相关联？

> ID：14902362
> 
> 赞同：0
> 
> 时间：2013-02-15T19:56:39.763
> 
> 标签：asp.net-mvc, membership

我有一个包含具有角色的成员的数据库表，我有一个使用`[Autorize(Roles="admin")]` 我的问题的操作是如何告诉 Asp.net MVC 哪个成员与哪个角色相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:59:19.723

您将需要使用默认的 asp.net 会员提供程序来处理此问题，或者您需要自己扮演角色。

基本上，您需要的是，当 .net 执行 user.IsInRole("admin") 时，委托人将在创建它的角色列表中拥有该角色。

# ipad - 设置视口后iPad上的黑条

> ID：14902366
> 
> 赞同：0
> 
> 时间：2013-02-15T19:56:58.093
> 
> 标签：ipad, xhtml, meta, joomla3.0

网站地址：straightace.com

使用了以下代码：

```
 <meta name="viewport" content="initial-scale=1,
                    user-scalable=yes,maximum-scale=0.6,width=device-width"> 
    <meta name="viewport" content="height=device-height,width=device-width"> 
```

目的是在任何垂直或水平方向的 iPad 上加载 1085 像素宽的页面，我们为任何 699 像素宽以下的设备提供了一个单独的脚本，该脚本重定向到移动站点，目前并不担心 Android 平板电脑。以任一方向加载页面时，甚至在水平加载并转向垂直时，一切都很顺利。

问题是当以垂直方向加载页面并将其变为水平方向时，页面向左推，屏幕右侧出现一个大黑条。刷新后，该栏消失。

任何人都可以在保留视口功能的同时帮助删除黑条吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:19:43.260

此代码可能会有所帮助：

```
<meta name="viewport" content="width=device-width,height=device-height, initial-scale=.5"> 
```

也就是说，`maximum-scale`从您的代码中删除该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T15:01:38.823

这是一个简单的解决方案：

```
<meta name="viewport" content="initial-scale=1,maximum-scale=1" /> 
```

虽然简单，但此解决方案有效地禁用了捏合缩放。有多种 Javascript 解决方案可以修复此旋转视口问题，同时仍允许用户缩放。 [这个](https://stackoverflow.com/a/8119519/445295)对我有用。

```
<script type="text/javascript">
(function( doc ){
    var addEvent = 'addEventListener',
     type = 'gesturestart',
     qsa = 'querySelectorAll',
     scales = [1, 1],
     meta = qsa in doc ? doc[qsa]( 'meta[name=viewport]' ) : [];
    function fix(){
        meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
        doc.removeEventListener( type, fix, true );
    }
    if( (meta = meta[meta.length - 1]) && addEvent in doc ){
        fix();
        scales = [.25, 1.6];
        doc[addEvent]( type, fix, true );
    }
}( document ));
</script> 
```

# recurrence - 分而治之：IndexSearch

> ID：14902367
> 
> 赞同：0
> 
> 时间：2013-02-15T19:57:00.703
> 
> 标签：recurrence, divide-and-conquer

我自己解决了以下任务：

给出一个算法来找到一个索引 i 使得 1 <= i <= n 并且 A[i] = i 提供这样的索引存在。如果有任何这样的索引，算法可以返回其中的任何一个。

我使用了分而治之的方法，结果我得到：

```
public static int IndexSearch(int []A, int l, int r) {
  if (l>r)
     return -1;
  int m = (l+r)/2;  
  IndexSearch(A, l, m-1); 
  IndexSearch(A, m+1, r);
  if (A[m]==m)
     return m;
  else
     return -1;
} 
```

首先想问一下是否正确？我猜是....

在这种情况下，递归 T(n) 是多少？

我相信：

2T(n/2) + O(1) ----> 对吗？谁能详细解释一下如何应用主定理解决递归？

a=2 b=2 f(n)=1 n^logba = n ---> n vs 1 所以我们有 CASE 1 导致 O(n) -> ???? 对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:50:49.110

这肯定是不正确的。

由于您忽略了递归调用的返回值，因此您的程序实际上只检查是否`A[m] == m`在您的第一次调用中，`-1`如果不是则返回。

“显而易见”的解决方案类似于：

```
public static int IndexSearch(int []A, int l, int r) {
  for i in range(1, length(A))
    if (A[i] == i)
      return i
  return -1
} 
```

这也是一个非常明确的解决方案，所以也许这比更复杂的解决方案更受欢迎。

很抱歉，我无法帮助您解决其他问题。

编辑：这应该工作。它是用 Python 编写的，但应该很容易理解。分而治之的关键是将问题减少到解决方案显而易见的程度。在我们的例子中，这将是只有一个元素的列表。这里唯一的困难是传回返回值。

```
def index(l, a, b):
    if a == b: #The basecase, we consider a list with only one element
        if l[a] == a:
            return a
        else: return -1

    #Here we actually break up
    m = (a+b)/2

    i1 = index(l, a, m)
    if i1 != -1:
        return i1

    i2 = index(l, m+1, b)
    if i2 != -1:
        return i2

    return -1 
```

这是一个示例输出：

```
l = [1,2,3,3,5,6,7,8,9]
print index(l, 0, len(l)-1)

Output: 3 
```

希望有帮助。

编辑：找到所有的事件实际上会导致一个更好的解决方案：

```
def index(l, a, b):     
    if a == b:
        if l[a] == a:
            return [a]
        else:
            return []

    m = (a+b)/2
    return index(l, a, m) + index(l, m+1, b) 
```

输出如下：

```
l = [1,2,3,3,5,6,7,8,8]
print "Found " , index(l, 0, len(l)-1), " in " , l

Found  [3, 8]  in  [1, 2, 3, 3, 5, 6, 7, 8, 8] 
```

和

```
l = range(0,5)
print "Found " , index(l, 0, len(l)-1), " in " , l

Found  [0, 1, 2, 3, 4]  in  [0, 1, 2, 3, 4] 
```

我认为这是一个不错的、纯粹的解决方案；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:28:32.710

我想这将是一个可能的解决方案，我打印出 value=index 的所有可能元素。

```
public static int IndexSearch(int []A, int l, int r) {

 if (l>r)
   return -1;

 //Divide into subproblems
 int m = (l+r)/2;  

 //Conquer and find solution to subproblems recursively
 IndexSearch(A, l, m-1); 
 IndexSearch(A, m+1, r);

 //Combine solutions of subproblems to the orignal solution of the problem 
 if (A[m]==m)
   System.out.println(m);

 return 1; 
```

}

# javascript - Jq.carousel 中的 OffsetWidth 错误

> ID：14902369
> 
> 赞同：0
> 
> 时间：2013-02-15T19:57:03.050
> 
> 标签：javascript, jquery, carousel

我不明白为什么我会看到这个错误。

> 无法读取未定义的属性“offsetWidth”

代码 - [http://jsfiddle.net/2EFsd/1/](http://jsfiddle.net/2EFsd/1/)

```
var $carousel = $(' #carouse').carousel();

$('#carousel_prev').on('click', function(ev) {
  $carousel.carousel('prev');
});
$('#carousel_next').on('click', function(ev) {
  $carousel.carousel('next');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T19:59:13.100

如果您正确键入选择器怎么样

```
var $carousel = $('#carousel').carousel(); 
```

[**小提琴**](http://jsfiddle.net/2EFsd/2/)

# python - 在 Python 包装器中调用外部 C 库时出现奇怪的内存损坏

> ID：14902372
> 
> 赞同：2
> 
> 时间：2013-02-15T19:57:08.860
> 
> 标签：python, c, debugging, cython, memory-corruption

我有一些 Cython 代码，它实际上是外部 C 库的包装器，如相关文档和其他几个来源（例如[此处](http://docs.cython.org/src/tutorial/clibraries.html)和[此处](http://docs.cython.org/src/tutorial/clibraries.html)）中所述。我有以下 Cython 类定义：

```
import numpy
cimport numpy
cimport clib # my C library

cdef class DoStuff:
    def __call__(self, array a):
        cdef numpy.ndarray[float, ndim=1] npa = numpy.ascontiguousarray(a)
        clib.cStuff( <float*>npa.data ) 
```

我的 C 函数 ( `cStuff`) 在其他 C 代码中编译和运行时始终按预期运行，其返回值完全由输入确定（不涉及随机数生成）。它使用 s 在堆中分配浮点数组`malloc()`，而不是`free()`s，因为 C 和 Python 代码`cStuff`都在完成后终止执行。但是，当我从 Python 中调用该函数时，有时（例如 5 个中的 1 个）会发生内存损坏并`cStuff`返回无意义的结果，就好像 C 程序分配的内存被覆盖了一样。调用 C 函数时数组 a 不会损坏，因为`cStuff`在任何情况下都会打印正确的值。知道什么可能导致这种情况吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:16:51.037

我无法从代码中推断出您的问题所在。我需要更多的上下文。

你试过在 Valgrind 下运行它吗？

[http://valgrind.org/info/tools.html#memcheck](http://valgrind.org/info/tools.html#memcheck)

像这样运行它：

`> valgrind python script.py`

# c# - 如何为所有绑定写入值

> ID：14902380
> 
> 赞同：1
> 
> 时间：2013-02-15T19:57:41.713
> 
> 标签：c#, vb.net, data-binding

我打算为一个小项目使用 .NET 数据绑定，该项目主要是一个配置编辑器。因此，一组设置绑定到一个表单，在开始时从 app.config 加载，并随时保存回来（有提示）。没有格式化，没有验证，没有数据库 - 非常简单的设置。我不相信 .NET 会执行随机回调，因此计划使用手动更新`Binding.WriteValue`，以便用户可以应用或拒绝所做的任何更改。

**是否有任何本机 .NET 对象可用于触发`WriteValues`所有绑定？**我看过`BindingContext`and `BindingManagerBase`，但没有找到一个很好的例子来说明如何使用它们。

我知道有`BindingSource.ResetBindings`，这是一个逻辑等价于`ReadValue`（没有`ReadValue`成员），所以寻找这样的东西来写回值。

我想避免遍历所有控件层次结构并单独枚举它们的每个绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T13:32:41.057

我不知道你是否还需要这个问题的答案，但它就在这里。

拉姆达（短）：

```
Controls.Cast<Control>().ForEach(control=>control.DataBindings.Cast<Binding>().ForEach(binding=>binding.WriteValue())); 
```

经典（长）：

```
foreach (var control in Controls.Cast<Control>())
{
     foreach (var binding in control.DataBindings.Cast<Binding>())
     {
         binding.WriteValue();
     }
} 
```

我不知道您的表单上有多少控件，但性能不佳。此外，如果您有嵌套控件，则需要递归调用它。

更好地将值分配给您分配给 DataSource 的类的 Istance。不要将其写入控件属性，最好将其写入数据存储中。然后您可以使用绑定并调用 ResetBindings 来刷新值。

# ios - 如何在 IOS 的 NSMusicDirectory 中保存 mp3 文件？

> ID：14902385
> 
> 赞同：1
> 
> 时间：2013-02-15T19:57:57.440
> 
> 标签：ios, audio

我搜索了论坛，但找不到明确的答案。任务是将应用程序（在 Ipad 或 Iphone 上）的一些声音复制到音乐库中，如果可能的话，复制到 Itunes 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:01:40.087

这不是您可以在 AppStore 应用程序中执行的操作。此任务没有公共 API。

但是，`StoreServices`私有框架提供了此功能 - 请参阅[我的库](https://github.com/H2CO3/libipodimport)以获取仅适用于越狱设备的示例用例**。**（好吧，从技术上讲，越狱是必不可少的，您也可以在内部应用程序中使用它。）

# javascript - 获取嵌套 json 对象中的数据

> ID：14902386
> 
> 赞同：1
> 
> 时间：2013-02-15T19:58:04.533
> 
> 标签：javascript, json

试图从返回的 json 对象中提取一些数据。在测试这是我得到的 json 对象。

我正在尝试访问高度，但似乎无法获得它。

这是来自 chrome 表达式观察器的数据

```
testData: Object
  10100832561876234: Array[9]
    0: Object
       height: 2048
       source: "https://fbcdn-sphotos-h-a.akamaihd.net"
       width: 1529
       __proto__: Object
    1: Object
    2: Object
    3: Object
    4: Object
    5: Object
    6: Object
    7: Object
    8: Object
    length: 9
    __proto__: Array[0]
10100856101138364: Array[9]
    0: Object
    1: Object
    2: Object
    3: Object
    4: Object
    5: Object
    6: Object
    7: Object
    8: Object
    length: 9 
```

这是我获取高度的代码

```
testData = jQuery.parseJSON( jsonData );
for (var property in testData) {
      tester = property[0].height;
      alert(tester);
} 
```

目前我的警报中未定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:00:33.117

JavaScript 中的 for 循环产生键，而不是值。

```
tester = testData[property][0].height; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T20:01:25.000

尝试这个：

```
var testData = jQuery.parseJSON( jsonData );
for (var property in testData) {
    if (testData.hasOwnProperty(property)) {
         var tester = testData[property][0].height; // or testData[property].height if that's what you need
      alert(tester);
    }
} 
```

# wpf - 获取 WPF 文本框的滚动位置

> ID：14902394
> 
> 赞同：2
> 
> 时间：2013-02-15T19:58:32.190
> 
> 标签：wpf, textbox, scroll

我需要为 WPF TextBox 控件的内容添加一些装饰。这基本上可以正常工作，我可以获得指定字符索引的位置并相应地布局我的其他元素。但是当滚动 TextBox 时，这一切都会中断。我的布局位置不再与显示的文本匹配，因为它已移动到其他地方。

现在我很惊讶 TextBox 类没有提供有关其滚动状态的任何信息，也没有提供滚动更改时的任何事件。我现在能做什么？

我使用 Snoop 找出是否有一些我可以询问的滚动子元素，但 ScrollContentPresenter 也没有任何可用的滚动信息。我真的很想将我的装饰元素直接放入滚动区域，以便滚动也可以影响它们，但是只能有一个内容控件，这已经是 TextBox 内部结构之一。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-05T16:50:26.283

我不确定如何在滚动文本框时捕获事件（可能使用 narohi 的答案），但是有一种简单的方法可以查看当前滚动位置是什么：

```
// Gets or sets the vertical scroll position.
textBox.VerticalOffset 
```

（来自[http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.verticaloffset(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.verticaloffset(v=vs.100).aspx)）

我正在使用它来查看文本框是否滚动到末尾，如下所示：

```
public static bool IsScrolledToEnd(this TextBox textBox)
{
    return textBox.VerticalOffset + textBox.ViewportHeight == textBox.ExtentHeight;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:28:50.217

您可以通过将文本框作为参数和类型 ScrollView 传递来使用此方法获取 ScrollViewer。然后您可以订阅 ScrollChanged 事件。

```
public static T FindDescendant<T>(DependencyObject obj) where T : DependencyObject
{
    if (obj == null) return default(T);
    int numberChildren = VisualTreeHelper.GetChildrenCount(obj);
    if (numberChildren == 0) return default(T);

    for (int i = 0; i < numberChildren; i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(obj, i);
        if (child is T)
        {
            return (T)(object)child;
        }
    }

    for (int i = 0; i < numberChildren; i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(obj, i);
        var potentialMatch = FindDescendant<T>(child);
        if (potentialMatch != default(T))
        {
            return potentialMatch;
        }
    }

    return default(T);
} 
```

例子：

```
public MainWindow()
{
    InitializeComponent();
    Loaded += new RoutedEventHandler(MainWindow_Loaded);
}

void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    ScrollViewer s = FindDescendant<ScrollViewer>(txtYourTextBox);
    s.ScrollChanged += new ScrollChangedEventHandler(s_ScrollChanged);
}

void s_ScrollChanged(object sender, ScrollChangedEventArgs e)
{
    // check event args for information needed
} 
```

# excel - 使用 Microsoft.Jet.OLEDB 提供程序时是否需要 MS Office？

> ID：14902398
> 
> 赞同：2
> 
> 时间：2013-02-15T19:58:53.877
> 
> 标签：excel, vb6, oledb

我正在尝试读取一个可以使用 ADO 完成的 excel 文件。我的问题是，使用 Jet.OLEDB Provider 读取 excel 文件时是否需要安装 office？

目前我只在安装了办公室的电脑上进行测试，这就是我要问的原因。所关注的编程语言是 VB6。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:34:58.723

不，您不需要安装 office，但您需要安装 MDAC/WDAC（包含 Jet）。在较新的操作系统上，这是操作系统的一部分。在较旧的操作系统（Win 95/98/甚至可能是 2000）上，您需要运行 MDAC 安装程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:32:14.933

否 - Jet 驱动程序用于读取从文本文件到 Excel 到 Access 的任何形式的 DB 文件，并且独立于 Office 提供给我的 Microsoft。

# tcp - 为什么 UDP 没有“accept()”？

> ID：14902402
> 
> 赞同：5
> 
> 时间：2013-02-15T19:58:59.763
> 
> 标签：tcp, udp

我是从实际意义上问的。在 TCP 中，accept() 将为每个 connect() 提供新的套接字。它只允许与一个服务器端口进行多个并发通信。

问题是为什么我们在 UDP 中没有这样的便利？不要告诉我 UDP 是无连接的，因此...从逻辑上讲，accept() 与此无关（无论如何，底层 IP 都是无连接的）。

后果之一是您必须应用大量 UDP 端口，这可能会使防火墙设置复杂化。那么我的下一个问题是，多客户端 UDP 应用程序关于端口和多路复用的解决方案是什么？在某些情况下，我正在考虑将客户端信息嵌入 UDP 数据包中并让服务器区分。但本质上没有accept()，某些待办事项是困难的（例如，带有OpenSSL 的UDP）。

谢谢你的洞察力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T22:17:36.863

因为 UDP 是无连接协议，所以您不需要它。您可以通过每个传入的 UDP 数据报获取远程地址信息，因此您知道它来自谁，因此您不需要每个连接的套接字来告诉您。您根本不必“应用大量 UDP 端口”。你只需要一个。

# php - php中的sql没有返回任何内容

> ID：14902405
> 
> 赞同：0
> 
> 时间：2013-02-15T19:59:01.313
> 
> 标签：php, mysql

如何查看 php 中的 sql 语句返回的内容？我有以下函数从 mysql 数据库中获取用户名，我在另一个 php 中使用 echo 来查看结果，但没有显示任何内容。

```
function get_user_name($id_user) {
    return mysql_result(mysql_query("SELECT username FROM user WHERE id_user = '$id_user'"));
}

echo $id_user;
$a = get_user_name($id_user);
echo $a; 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:01:12.317

你在`echo`学习这个`get_user_name();`功能吗？或者你甚至连接到你的数据库？这是您之前需要检查的两件事，（如果问题仍然存在）包括错误处理方法，即`or die(mysql_error())`在查询结束时找出问题。

```
return mysql_result(mysql_query("SELECT id_user FROM user WHERE id_user = '$id_user'")or die (mysql_error())); 
```

错误处理构造？？在 mysql 中`mysql_error()`应该以相当容易理解的方式输出问题，至于是什么阻止了您的查询不被显示

# asp.net-mvc - 为什么更新父级时实体框架会插入子级？

> ID：14902408
> 
> 赞同：9
> 
> 时间：2013-02-15T19:59:05.863
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, windows-services, entity-framework-5

我在面向 .Net 4.5 的 Windows 服务中有此代码，该服务使用数据库优先的实体框架层：

```
var existingState = DataProcessor.GetProcessState(workerId);

existingState.ProcessStatusTypeId = (int)status;
existingState.PercentProgress = percentProgress;
existingState.ProgressLog = log;

DataProcessor.UpdateProcessState(existingState); 
```

与此代码在同一解决方案中的数据处理类中：

```
public ProcessState GetProcessState(int id)
{
    using (var context = new TaskManagerEntities())
    {
        var processes = (from p in context.ProcessStates.Include("ProcessType").Include("ProcessStatusType")
                         where p.IsActive && p.ProcessStateId == id
                         select p);

        return processes.FirstOrDefault();
    }
}

public ProcessState UpdateProcessState(ProcessState processState)
{
    using (var context = new TaskManagerEntities())
    {
        context.ProcessStates.Add(processState);
        context.Entry(processState).State = System.Data.EntityState.Modified;
        context.SaveChanges();
    }

    return processState;
} 
```

ProcessState 是另外两个类 ProcessStatusType 和 ProcessType 的父类。当我在 Windows 服务中运行该代码时，它会检索记录、更新实体并保存它。尽管在上面的代码中从未使用过 ProcessType 子项，但当对 ProcessState 实体执行保存时，EF 会在 ProcessType 表上插入并在其中创建一条新记录。然后它更改 ProcessStatus 实体中的 FK 以将其指向新的子对象并将其保存到数据库中。

它不会*在*ProcessStatusType 表中执行此操作，该表设置有基本相同的 FK 父子关系。

我现在有一个数据库，其中充满了我不需要的相同 ProcessType 条目，我不知道为什么会发生这种情况。我觉得我犯了一些我看不到的明显错误，因为这是我的第一个 EF 项目。问题是我允许上下文在调用之间过期但保持相同的实体吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:24:18.927

使用 Add 会将所有元素的状态设置为已添加，这会导致插入子元素。当您为此元素指定 EntityState.Modified 时，不会插入父元素。

尝试在 UpdateProcessState 中使用以下内容，而不是使用 Add。

```
context.ProcessStates.Attach(processState);
context.Entry(processState).State = EntityState.Modified;
context.SaveChanges(); 
```

Attach 会将所有元素的状态设置为 Unchanged，并通过为父元素指定 Modified 来指示仅应更新此元素。

另一个注意事项。您应该使用强类型`Include(x => x.ProcessType)`而不是`Include("ProcessType")`.

# java - 如何使用 Jsmooth 为我的 java 程序创建 .exe？

> ID：14902409
> 
> 赞同：2
> 
> 时间：2013-02-15T19:59:05.537
> 
> 标签：java, jsmooth

假设我有一个从 eclipse 创建的名为 Main.class 的简单程序。

我将如何为该程序创建一个 .exe？它必须是一个 .jar 才能工作吗？？？

**这是我在编译时得到的：**

* * *

开始编译

扫描骨架...

正在加载罐子...

将 Jar 添加到资源...

将属性添加到资源...

正在加载图标...

编译失败！

*   错误：空

* * *

（注意我将java版本设置为1.4）

程序本身只是一张图片。根本没有语法错误。在决定为 JSmooth 中的每个进程在字段中放置什么时，我有点困惑。反正我只有一个文件要放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-15T20:14:24.043

在弄乱了参数之后，我已经修复了“错误：null”的情况

我的解决方案：将 JSmooth 项目中的“不工作的可执行图标（.ico 文件）”替换为，例如，一个非常简单的 PNG 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T20:42:05.063

这是用户遇到的常见问题。JSmooth 似乎在它支持的图标的大小和位深度方面非常有限。我不知道为什么它不只是将其作为 WinRun4J 之类的资源扔掉，而是让 Windows 选择要使用的图标而不是更喜欢 32x32。

尝试减少位深度并将较大的图标删除为只有 16x16、32x32 和可能的 48x48 和或 64x64，只有 4 或 8 位深度。这些是适用于许多人的设置。有些使用 32 位 PNG，但文档说它们无论如何都被采样到 256 种颜色。

*   [http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N1011A](http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N1011A)
*   [http://sourceforge.net/p/jsmooth/bugs/84/](http://sourceforge.net/p/jsmooth/bugs/84/)
*   [http://sourceforge.net/p/jsmooth/discussion/297041/thread/294c7f61/](http://sourceforge.net/p/jsmooth/discussion/297041/thread/294c7f61/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T04:04:49.103

我知道这是一个老问题，但我遇到了同样的问题，最终与我的图标文件有关。

不知道有什么问题，但清除图标选项可以解决问题。

# java - 按 Enter 键切换 JTextFields

> ID：14902410
> 
> 赞同：3
> 
> 时间：2013-02-15T19:59:08.230
> 
> 标签：java, swing, focus, jtextfield

我已经创建了许多文本字段，我想知道如何通过按 Enter 键在字段之间切换焦点。

另外，我可以控制目标字段吗？例如，我可以定义通过按下`Enter`焦点`field A`将更改为`field C`？

![在此处输入图像描述](../Images/0ad5ac4f37284783f36396b87d116278.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:22:43.057

看看[如何使用焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)

它将解释如何设置焦点子系统的传输键

**简单的例子**

```
public class TestFocusTransfersal {

    public static void main(String[] args) {
        new TestFocusTransfersal();
    }

    public TestFocusTransfersal() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JTextField field1 = new JTextField("1", 10);
        private JTextField field2 = new JTextField("2", 10);
        private JTextField field3 = new JTextField("3", 10);
        private JTextField field4 = new JTextField("4", 10);
        private JTextField field5 = new JTextField("5", 10);
        private JTextField field6 = new JTextField("6", 10);
        private JTextField field7 = new JTextField("7", 10);
        private JTextField field8 = new JTextField("8", 10);
        private JTextField field9 = new JTextField("9", 10);
        private final MyOwnFocusTraversalPolicy policy;

        public TestPane() {
            // Set up enter for focus transfer...
            Set forwardKeys = getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS);
            Set newForwardKeys = new HashSet(forwardKeys);
            newForwardKeys.add(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0));
            setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS,
                            newForwardKeys);

            setLayout(new GridBagLayout());

            add("Field #1: ", field1, 0, 0);
            add("Field #2: ", field2, 2, 0);
            add("Field #3: ", field3, 4, 0);
            add("Field #4: ", field4, 6, 0);
            add("Field #5: ", field5, 8, 0);
            add("Field #6: ", field6, 2, 1);
            add("Field #7: ", field7, 4, 1);
            add("Field #8: ", field8, 6, 1);
            add("Field #9: ", field9, 8, 1);

            policy = new MyOwnFocusTraversalPolicy(
                            field1,
                            field6,
                            field7,
                            field8,
                            field9,
                            field2,
                            field3,
                            field4,
                            field5
                            );

//            You can do this to make life easier, but it may have unexpected
//            consequences...
//            setFocusCycleRoot(true);
//            setFocusTraversalPolicy(policy);

        }

        @Override
        public void addNotify() {
            super.addNotify(); 
//        Comment this out if you use focusCycleRoot
            SwingUtilities.getWindowAncestor(this).setFocusTraversalPolicy(policy);
        }

        protected void add(String label, JTextField field, int x, int y) {
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridy = y;
            gbc.gridx = x;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.anchor = GridBagConstraints.EAST;
            add(new JLabel(label), gbc);
            gbc.gridx++;
            add(field, gbc);
        }
    }

    public static class MyOwnFocusTraversalPolicy
                    extends FocusTraversalPolicy {

        private List<Component> order;

        public MyOwnFocusTraversalPolicy(Component... order) {
            this.order = new ArrayList<>(Arrays.asList(order));
        }

        @Override
        public Component getComponentAfter(Container focusCycleRoot,
                        Component aComponent) {
            int idx = (order.indexOf(aComponent) + 1) % order.size();
            return order.get(idx);
        }

        @Override
        public Component getComponentBefore(Container focusCycleRoot,
                        Component aComponent) {
            int idx = order.indexOf(aComponent) - 1;
            if (idx < 0) {
                idx = order.size() - 1;
            }
            return order.get(idx);
        }

        @Override
        public Component getDefaultComponent(Container focusCycleRoot) {
            return order.get(0);
        }

        @Override
        public Component getLastComponent(Container focusCycleRoot) {
            return order.size() > 0 ? order.get(order.size()) : null;
        }

        @Override
        public Component getFirstComponent(Container focusCycleRoot) {
            return order.get(0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T20:26:29.610

简单的例子：

假设你有两个`JTextField`s:`textField`和`textField1`

```
textField.addActionListener(new ActionListener() {
   @Override
    public void actionPerformed(ActionEvent e) {
      textField1.requestFocusInWindow();    
    }
}); 

textField1.addActionListener(new ActionListener() {
   @Override
   public void actionPerformed(ActionEvent e) {
      textField.requestFocusInWindow(); 
   }
}); 
```

现在，当您`Enter`专注于第一个时`JTextField`，另一个将被聚焦，反之亦然。

# php - 将 PHP preg_replace 转换为 htaccess 重写

> ID：14902414
> 
> 赞同：0
> 
> 时间：2013-02-15T19:59:11.870
> 
> 标签：php, .htaccess, rewrite

我需要创建一个 301 重定向规则，该规则将匹配/替换下划线 _ 与破折号 - 并删除尾随 .html。URL 可以有任意数量的下划线 _ 这对我来说很困难。

在 PHP 中，我可以这样做：

```
$subject = 'this_is_a_bad_url.html';    
$pattern = array('/(_)/', '/.html/');
$replace = array('-', '');
$output = preg_replace($pattern, $replace, $subject);
//$output would result to 'this-is-a-bad-url' 
```

我将如何在.htaccess 中写这个？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:09:54.380

试试这个

```
 Options +FollowSymLinks -MultiViews
  RewriteEngine on
  RewriteCond %{REQUEST_URI} ^(.*?)_(.*?)$ [NC]
  RewriteRule ^  /%1-%2 [R,L]
  RewriteCond %{REQUEST_URI} ^(.*?).html$ [NC]
  RewriteRule ^  /%1 [R,L] 
```

# qt - 在 plasmoid 中连接小部件的信号

> ID：14902419
> 
> 赞同：0
> 
> 时间：2013-02-15T19:59:17.383
> 
> 标签：qt, plasmoid

我是 Qt 的新手，正在尝试将 clicked 信号 oa 按钮与编写 plasmoid 的函数连接起来。我正在尝试将外部函数用作具有 Plasma::PushButton 类型对象的公共函数，以便我可以使用它来将其与单击信号连接起来？使用 gtk 就像 on_...._clicked 一样简单，但是在 qt 中没有简单的方法，我们可以消除使用插槽的需要吗？

```
#include "plasma-tutorial1.h"
#include<string.h>
#include <stdlib.h>
#include <QGraphicsLinearLayout>
#include <QPainter>
#include <QFontMetrics>
#include <QSizeF>
#include <QTextEdit>
#include <plasma/svg.h>
#include <plasma/theme.h>
#include <plasma/widgets/lineedit.h>
#include <plasma/widgets/pushbutton.h>
#include <plasma/widgets/textedit.h> 
//PlasmaTutorial1 mainf;

themainfunction(int choice,Plasma::LineEdit *m_lineEdit,
Plasma::TextEdit *m_displaytext)
{
char buffer[100];
const char *inp=(const char *)malloc(sizeof(char)*100);
QString input;
input=m_lineEdit->text();
QByteArray byteArray = input.toUtf8();
inp = byteArray.constData();
char *expression;
expression=(char *)malloc(sizeof(char)*100);
strcpy(expression,"sudo apt-");

switch(choice)
{
case 1:{
        strcat(expression,"get install ");
        strcat(expression,inp);
        break;
      };
case 2:{
        strcat(expression,"get remove ");
        strcat(expression,inp);
        break;
      };
case 3:{
        strcat(expression,"cache search ");
        strcat(expression,inp);
        break;
      };
};
/*
FILE* in;
FILE* ptr=fopen("new.txt","w");
FILE *popen();
if(!(in = popen("cal","r")))
    {return;}

    while(fgets(buffer, 100, in) != NULL) {
*/
m_displaytext->append("yeah!");
//    fprintf(ptr,"%s",buffer);

            //}
//pclose(in);
//fclose(ptr);
}
PlasmaTutorial1::PlasmaTutorial1(QObject *parent, const QVariantList &args)
    : Plasma::Applet(parent, args),
    m_svg(this),
    m_icon("document")
{
    m_svg.setImagePath("widgets/background");
    // this will get us the standard applet background, for free!
    setBackgroundHints(DefaultBackground);
    resize(200, 200);
}

PlasmaTutorial1::~PlasmaTutorial1()
{
    if (hasFailedToLaunch()) {
        // Do some cleanup here
    } else {
        // Save settings
    }
}

void PlasmaTutorial1::init()
{

  /*  // A small demonstration of the setFailedToLaunch function
    if (m_icon.isNull()) {
        setFailedToLaunch(true, "No world to say hello");
    }*/
Counter rt;
    QGraphicsLinearLayout *layout = new QGraphicsLinearLayout(this);
  layout->setOrientation(Qt::Vertical); //so widgets will be stacked up/down

  m_lineEdit = new Plasma::LineEdit(this);
  m_lineEdit->setText("Enter the package name here");

  m_displaytext = new Plasma::TextEdit(this);
  m_displaytext->setText("Terminal");

  m_installButton = new Plasma::PushButton(this);
  m_installButton->setText("Install");
  connect(m_installButton, SIGNAL(clicked()),&rt,SLOT(themainfunction(1,m_lineEdit,m_displaytext)));

  m_removeButton = new Plasma::PushButton(this);
  m_removeButton->setText("Remove");
  // m_removeButton->clicked()

  connect(m_removeButton, SIGNAL(clicked()),&rt,SLOT(themainfunction(2,m_lineEdit,m_displaytext)));

  m_searchButton = new Plasma::PushButton(this);
  m_searchButton->setText("Search");
  connect(m_searchButton, SIGNAL(clicked()),&rt,SLOT(themainfunction(3,m_lineEdit,m_displaytext)));

  layout->addItem(m_lineEdit);
  layout->addItem(m_installButton);
  layout->addItem(m_removeButton);
  layout->addItem(m_searchButton);
  layout->addItem(m_displaytext);   
  m_displaytext->append("yo baby!");    
} 

/* 
void PlasmaTutorial1::paintInterface(QPainter *p,
        const QStyleOptionGraphicsItem *option, const QRect &contentsRect)
{
    p->setRenderHint(QPainter::SmoothPixmapTransform);
    p->setRenderHint(QPainter::Antialiasing);

    // Now we draw the applet, starting with our svg
    m_svg.resize((int)contentsRect.width(), (int)contentsRect.height());
    m_svg.paint(p, (int)contentsRect.left(), (int)contentsRect.top());

    // We place the icon and text
    p->drawPixmap(7, 0, m_icon.pixmap((int)contentsRect.width(),(int)contentsRect.width()-14));
    p->save();
    p->setPen(Qt::white);
    p->drawText(contentsRect,
                Qt::AlignBottom | Qt::AlignHCenter,
                "Hello Plasmoid!");
    p->restore();
}
 */
// This is the command that links your applet to the .desktop file
K_EXPORT_PLASMA_APPLET(tutorial1, PlasmaTutorial1)

#include "plasma-tutorial1.moc" 
```

说我想在点击安装按钮的信号时连接 mainfunction()。我该怎么做？我怎样才能在等离子中派生一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:37:28.817

我知道我错过了什么。我们不能在槽函数中将对象作为参数传递。现在它运行平稳。感谢您的所有回复。

# algorithm - 是否有一种有效的算法来查找布尔函数的哪个组合将匹配给定布尔函数的输出？

> ID：14902421
> 
> 赞同：1
> 
> 时间：2013-02-15T19:59:29.177
> 
> 标签：algorithm, functional-programming, boolean, boolean-logic

假设我有以下布尔函数。

```
def Bottom():
    return False

def implies(var1, var2):
    if var1 == True and var2 == False: return False
    return True

def land(var1, var2):
    return var1 == True and var2 == True. 
```

是否有一种有效的算法将这三个函数作为输入，并确定前两个函数的哪个（可能是多应用）函数组合将匹配第三个函数的输出，每个布尔（T，F）输入到第三个函数功能？

我正在使用 Python 来编写我的示例，但我并没有将解决方案限制为 Python 或任何编程语言。事实上，我实际上并不是在寻找代码，而更多的是对算法的描述或对为什么不存在的解释。

作为旁注，我尝试发现该算法的动机是因为我被要求展示一组特定逻辑连接词的功能完整性，我们通过展示一个逻辑连接词可以被一组其他逻辑连接词模拟来做到这一点。对于逻辑，我们必须使用一点猜测和检查，但如果没有对大量可能性进行线性搜索，我无法找到一种方法来在程序中捕获它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T00:02:48.620

如果您只查看两个参数的布尔函数，那么简单的蛮力技术将起作用。它可以扩展到三元逻辑，或三元函数，甚至两者兼而有之，但它是指数的，所以你不能把它推得太远。这是布尔版本；我希望如何扩展它是显而易见的。

1）二进制布尔函数是一个关系`{False, True} X {False, True} -> {False, True}`。其中正好有 16 个。请注意，这些包括独立于一个或什至两个输入的各种功能。因此，让我们将集合完全由这 16 个函数组成，现在注意每个布尔函数都有一个对应的高阶函数 X -> 。

2) 现在，从布尔函数`Take first`和开始`Take second`，并使用对应于“给定函数”的 HOF 构造一个闭包。如果目标函数在闭包中，那么它可以通过给定函数的某种组合来实现。更一般地说，如果每个元素都在闭包中，那么给定的函数是通用的。

因此，让我们将此应用于您的示例。我将按`(F,F) (F,T) (T,F) (T,T)`顺序将 的元素编写为与输入相对应的四元组，并将 HOF 写为**粗体**。`Bottom`也是如此。`FFFF`_ `Implies`_ **底部**(a, b)用于任何 (a,b)。`TTFT`**`FFFF`**

 **`Take first`is`FFTT`和`Take second`is `FTFT`，所以这是我们的起始集。我们可以使用**Bottom**来添加`FFFF`，但显然没有进一步的**Bottom**应用程序会添加任何东西。

所以现在我们有九对可能的函数可以应用于**Implies**。开始了：

**暗示**( `FFTT`, `FFTT`) == `TTTT`(新)

**暗示**( `FFTT`, `FTFT`) == `TTFT`(新)

**暗示**( `FFTT`, `FFFF`) == `TTFF`(新)

**暗示**( `FTFT`, `FFTT`) == `TFTT`(新)

**暗示**( `FTFT`, `FTFT`) ==`TTTT`

**暗示**( `FTFT`, `FFFF`) == `TFTF`(新)

**暗示**( `FFFF`, `FFTT`) ==`TTTT`

**暗示**( `FFFF`, `FTFT`) ==`TTTT`

**暗示**( `FFFF`, `FFFF`) ==`TTTT`

现在我们最多有 16 个函数中的 8 个函数，而且我们还有很多对要检查。由于这实际上是一个完整的集合，它会变得乏味，所以我将把下一步留给读者（或者可能是他们的计算机程序）。**

# c++ - Qt Creator 包含路径

> ID：14902425
> 
> 赞同：0
> 
> 时间：2013-02-15T19:59:39.307
> 
> 标签：c++, qt, qt-creator

我正在 Qt Creator 中创建一个项目，我想添加包含路径，所以我添加到`.pro`文件中：

```
INCLUDEPATH +=  "C:\Program Files (x86)\MySQL\MySQL Connector C++ 1.1.2\include\" 
```

我也尝试`\`用`\\\`. 我应该如何添加这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:39:36.587

像这里一样[在一个qt项目中，如何在路径包含空格的windows下将include路径添加到pro](https://stackoverflow.com/questions/10717359/in-a-qt-project-how-to-add-include-path-to-pro-under-windows-where-the-path-con)。修改后不要忘记保存`.pro`文件。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:55:40.500

在“附加参数”中的项目/构建/构建步骤部分中为 qmake 使用自定义命令，如下所示： `"QT+=your_qt_modules" "DEFINES+=your_defines"`

我认为您可以以这种方式使用 *.pro 文件中的任何命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:10:39.837

您需要使用 $$quot() 引用 qmake 变量中包含空格的项目：

```
INCLUDEPATH += $$quot(C:\Program Files (x86)\MySQL\MySQL Connector C++ 1.1.2\include\) 
```

# c++ - C++ 中的代码可用性

> ID：14902426
> 
> 赞同：-5
> 
> 时间：2013-02-15T19:59:41.760
> 
> 标签：c++, function, modularity

是否可以在文件中编写函数，然后在另一个文件中包含的代码中使用它？我正在使用 c++ 。如果是的话，谁能举个例子？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:09:56.703

这很容易完成，并且是编写任何复杂的 C++ 程序的基本部分。根据您使用的平台，您如何操作的细节可能会有所不同。但是，它们都是相同基本抽象过程的变体。

您必须在头文件中声明您的函数，并且必须将该头文件包含在使用或定义该函数的每个源文件中。然后您必须编译每个源文件并将生成的“对象”文件链接到一个可执行文件中。

为了提供更具体的细节，您必须具体说明您的平台。是 Visual Studio 吗？它是 Linux 机器上的 g++ 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:32:44.237

是的，当然是。如何实现取决于这两个文件是什么（头文件或主代码文件）。让我们称它们为`function_defined.___`and `function_used.___`。

有两种情况，取决于每种情况。

*   ### `function_defined.hpp`

    最简单的情况——在function_defined.hpp中，把

    ```
    int funct(int argument) {return 1} 
    ```

    并且在 中`function_used.(c/h)pp`，只是

    ```
    #include "function_defined.hpp"
    ...
    int c = funct(1); 
    ```

*   ### `function_defined.cpp`

    在这种情况下，您首先需要一个*声明*`function_used.(c/h)pp`：

    ```
    int funct(int argument); 
    ```

    您可以像上面一样调用该函数。*不要这样做* `#include "function_defined.cpp"`。您应该只编译所有`.cpp`文件并将它们链接在一起，这会自动找到并链接所需的功能。

正如 Omnifarious 所说，编译和链接的细节取决于您的平台和 IDE 和/或编译器。

# java - Java 斜率不应该相等

> ID：14902429
> 
> 赞同：1
> 
> 时间：2013-02-15T19:59:45.907
> 
> 标签：java, eclipse

我正在开发一个找到 2 个斜率的程序，然后将它们进行比较以查看它们是否相等。我为此使用双打。我发现即使我的斜率应该“相等”，它们也会出现一点偏差，因此没有显示为相等。例如，我得到一个斜率 1.0000000000000009 和 0.9999999999999999。所以理论上它们应该是平等的，但事实并非如此。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:02:47.503

如果您使用双精度数，则永远无法解决此问题：十进制数的表示方式存在限制，这些限制会在您的计算中累积，并给您带来这些微小的差异。一个好的代码审计实际上会警告你双打之间的平等。

处理它的一种方法是确保差异的绝对值低于您设置的某个限制。

[这是一篇](http://www.ibm.com/developerworks/library/j-jtp0114/#N10255)关于浮点数表示和比较危险的文章。

或者，您可以切换到更好的类以进行精确的数字处理，例如`BigDecimal`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:41:02.977

要比较 2 个斜率，您可以设置一些 PRECISION_LEVEL，然后进行如下比较

```
final double PRECISON_LEVEL = 0.01;
if(Math.abs(slope1 - slope2) < PRECISION_LEVEL) {
    System.out.println("Equal");
} 
else {
    System.out.println("Not Equal");
} 
```

# magento - Magento 以最低费率免费送货

> ID：14902431
> 
> 赞同：0
> 
> 时间：2013-02-15T19:59:57.983
> 
> 标签：magento

是否可以动态指定 Magento 的免费送货模块的送货方式？

这是我要设置的逻辑：

至美国：通过 UPS 地面免费送货。到加拿大：USPS 或 UPS API 的最低费率

我看到这篇文章提供了一种检索购物车运输方式的方法：[Magento : Get all Shipping Rates](https://stackoverflow.com/questions/11934138/magento-get-all-shipping-rates)

```
$quote()->getShippingAddress()->getGroupedAllShippingRates(); 
```

我正在考虑在结帐过程中找到一个钩子，找到最低报价，并将其添加到注释中。我担心更改运输方式，因为它可能会影响价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T14:13:31.077

我通过创建一个结帐观察者来解决这个问题，如果客户选择免费送货方式，该观察者将从 api 返回的最低送货方式保存到订单评论中。

# c - C中的字符配对

> ID：14902433
> 
> 赞同：1
> 
> 时间：2013-02-15T20:00:06.393
> 
> 标签：c

我正在编写一个读取文本文件的代码，然后计算一对字母出现的实例数。例如，包含“aabbaa”的文本文件

出现次数为aa=2，ab=1，ba=1

我在想我可以使用这样的二维数组：

```
char charPair[25][25] =   {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w ','x','y','z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'}; 
```

但这只会返回一封信。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:16:08.727

重要提示：如果您声明一个`char`-array，则如果组合出现超过 255 次，条目将溢出，因此我将其更改为`long`.

另请记住，您的二维数组应该为您使用的字母表中的每个字母提供索引。我假设它是 26 个字母（例如只有 ascii 小写）：

```
long charPair[26][26];
memset(charPair, 0, 26*26*sizeof(long));
char* reader = yourInput;
char current = *reader-'a';
++reader;
char next = *reader-'a';
while(next!=0) { // assumes \0-terminated
    charPair[current][next] += 1;
    current = next;
    next = *reader-'a';
    ++reader;
} 
```

`-'a'`'s 是这样的，字母 a 的行/列为 0，z 的行/列为 26 。

**编辑：**关于您对如何最好地阅读输入的评论：上面的代码假设整个输入被放入一个字符串（\0 终止）

```
FILE* f = fopen(filename, "rb"); // (todo: add your error handling if 0 returned)
fseek(f, 0, SEEK_END);
int len = ftell(f);
fseek(f, 0, SEEK_SET);
char* yourInput = malloc(len+1); // (todo: add your error handling if 0 returned)
fread(yourInput, 1, len, f); // (todo: add your error handling if <len returned)
yourInput[len] = '\0';
fclose(f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:00:25.677

在 c++'ish C 中，请根据需要转换变量声明、注释等...

...

```
char tCharPairCount[26][26]; // Lower-Case strings only
memset(tCharPairCount,0,26*26);

char tPrevChar = tempString[0];
for(int i=1; i<tempString.length(); ++i ) 
{
   char tCurrentChar = tempString[i];
   ++tCharPairCount[tPrevChar-'a'][tCurrentChar-'a'];
   tPrevChar = tCurrentChar;
} 
```

...

// 迭代结果

```
for(i:0->25)
for(j:0->25)
 printf("%i",tCharPairCount[i][j]);  // 0,0 => aa ; 1,0 => ba 
```

# ruby-on-rails - 意外退出

> ID：14902434
> 
> 赞同：0
> 
> 时间：2013-02-15T20:00:11.700
> 
> 标签：ruby-on-rails, ruby, rspec

Rails 仍然是新手，但我有一个问题，我正在更新两个模型`enabled_reward`，`child`并且`enabled_rewards_controller`它正在注销作为`current_user`.

任何人都可以提供一些帮助吗？我不知道 cookie 是否发生了某些事情，或者 cookie是否在通话`remember_token`中被删除。`update_attribute`我没有任何涉及`child`视图的内容，所以我排除了这一点。

提前致谢

下面是`enabled_rewards_controller`更新方法：

```
def update
  @enabled_reward = EnabledReward.find(params[:id])

  if @enabled_reward.update_attributes(params[:enabled_reward])
    if @enabled_reward.redeemed
      @enabled_reward.child.update_attribute(:points,
        @enabled_reward.child.points - @enabled_reward.points)

      redirect_to @enabled_reward.child
    end
  end
end 
```

这是 rspec 测试：

```
before do
  sign_in child
  visit child_path(child)
end

describe "redeeming reward" do
  before { click_button "Redeem" }

  it "should still have the child signed in" do
    should_not have_link('Sign in') # fails
  end
end 
```

错误信息：

```
 Failure/Error: should_not have_link('Sign in')
   expected link "Sign in" not to return anything
 # ./spec/requests/child_pages_spec.rb:284:in `block (4 levels) 
   in <top (required)>' 
```

# intuit-partner-platform - “测试从 Intuit App Center (OpenID) 订阅应用程序”后的 OpenID 身份？

> ID：14902435
> 
> 赞同：1
> 
> 时间：2013-02-15T20:00:21.103
> 
> 标签：intuit-partner-platform

我正在我的应用程序中创建流程以注册来自 Intuit App Store 的新用户。在演示文稿（以及文档中的其他地方）中，它谈到了在用户完成 Try It 过程后获取 OpenID 信息（通过测试从 Intuit App Center (OpenID) 订阅应用程序进行模拟）。

当我执行“测试从 Intuit App Center (OpenID) 订阅应用程序”时，我没有得到任何 OpenID 信息。在完成 Direct Connect javascript/oauth 过程后，我只取回 OAuth 凭据，没有 OpenID。

我们应该如何使用从“测试从 Intuit App Center (OpenID) 订阅应用程序”和 Direct Connect 流程收集的 OAuth 信息将 OpenID 连接到我们创建的帐户？

这部分流程的 IPP 文档需要大量帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T23:16:27.453

好的，想通了：

您需要在通过 Intuit 登录、试用或测试从 Intuit 应用中心 (OpenID) 链接订阅应用的页面上执行整个 OpenID 流程。

从文档中听起来，OpenID 信息是在 Intuit 端的进程到达您的应用程序之前传递给您的。但是这是错误的。在您的应用程序被点击后，您必须明确地执行 OpenID。

Intuit：请改进您的文档，这一点都不清楚。

# ios - 在 UIButton Press 上更改现有的 Set UIColors

> ID：14902441
> 
> 赞同：0
> 
> 时间：2013-02-15T20:00:40.200
> 
> 标签：ios, iphone, uibutton, uitextview

目标是在单击 UIButton 时更改我的 UITextView 的字体颜色和背景颜色，然后在再次单击 UIButton 时将它们恢复为原始颜色；然后重复，等等。

![截屏](../Images/7f20d0926b495a46da20d56422178fc9.png)

默认颜色设置

*   文本：`blackColor`
*   背景：`lightGrayColor`

单击按钮后（更改为..）

*   文本：`greenColor`
*   背景：`blackColor`

（然后如果再次单击，更改回默认颜色设置）

到目前为止，我有这个：

```
- (IBAction) enableSleepMode:(id)sender {

    [txtNotes setTextColor:[UIColor greenColor]];
    [txtNotes setBackgroundColor:[UIColor blackColor]];

} 
```

我很抱歉，但我不确定从这里去哪里。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:32:51.630

试试这个

```
 (void)setTextColor:(UIColor *)color forState:(UIControlState)state

[button setTextColor:[UIColor greenColor] forState:UIControlStateNormal];
[button setTextColor:[UIColor blackColor] forState:UIControlStateHighlighted];

 (void)setBackgroundColor:(UIColor *)color forState:(UIControlState)state

[button setBackgroundColor:[UIColor blackColor] forState:UIControlStateNormal];
[button setBackgroundColor:[UIColor lightgrayColor] forState:UIControlStateHighlighted]; 
```

类似的东西是我想你在找什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T06:48:59.360

`UITextView`你说要改变'' '不是' '的字体颜色和背景颜色`UIButton`对吧？. 那你加了`UItextViewDelegate`吗？

我已经这样做了

**编辑：**

```
 - (void)viewDidLoad
    {
    [super viewDidLoad];
    [txtView setBackgroundColor:[UIColor lightGrayColor]];
    [txtView setTextColor:[UIColor blackColor]];
    str = @"first";
    }

   -(IBAction)bt:(id)sender
{
    if([str isEqualToString:@"first"])
    {
        [txtView setBackgroundColor:[UIColor blackColor]];
        [txtView setTextColor:[UIColor greenColor]];
        str = @"second";
    }
    else
    {
       [txtView setBackgroundColor:[UIColor lightGrayColor]];
       [txtView setTextColor:[UIColor blackColor]];  
        str = @"first";
    }
} 
```

# asp.net - 一个解决方案中的多个 IIS Express 站点（解决方案资源管理器名称）

> ID：14902442
> 
> 赞同：0
> 
> 时间：2013-02-15T20:00:46.063
> 
> 标签：asp.net, iis-express

Visual Studio 在解决方案资源管理器中重命名网站项目以反映 localhost url（`http://localhost:49356/`例如，MyWebsite 变为）。如果我在一个解决方案中包含多个网站，这会使识别特定网站变得困难。

有什么方法可以影响解决方案资源管理器中的网站名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:28:18.907

您可以在项目设置、Web 选项卡、IIS 设置中使用该名称，但这并不意味着它会起作用:-) 获得自定义名称的最佳方法是将其作为虚拟目录嵌入到 IIS 中。但是，您可能要考虑的另一种方法是为每个站点指定一个自定义端口名称。您可以为第一个站点指定端口 1111，第二个站点为 2222，第三个站点为 3333，这样更容易记住。这是我所知道的唯一解决方法。

# ios - 在 CGContext 上绘制的部分透明图像周围放置边框

> ID：14902444
> 
> 赞同：22
> 
> 时间：2013-02-15T20:00:52.273
> 
> 标签：ios, core-graphics, cgcontext, cgcontextdrawimage

我在前景和透明背景中有一个黄色花瓶的图像：

![在此处输入图像描述](../Images/5c4f4a21c52eb3ddab955660a01eb4b9.png)

我在 CGContext 上绘制它：

```
CGContextDrawImage(context, CGRectMake(0, 0, 100, 100), myImage.CGImage); 
```

我可以通过使用以下语句在它周围画一个阴影`CGContextDrawImage`：

```
CGContextSetShadowWithColor(context, CGSizeMake(0,0), 5, [UIColor blueColor].CGColor); 
```

![在此处输入图像描述](../Images/8119274575f6e020f9d7e5cc23e21a14.png)

但我想在图像周围画一个笔触，使它看起来像下面这样：

![在此处输入图像描述](../Images/2a861ecc981e87cbc8a207a654b081d0.png)

如果我这样做：

```
CGContextSetRGBStrokeColor(shadowContext, 0.0f, 0.0f, 1.0f, 1.0f);
CGContextSetLineWidth(shadowContext, 5);
CGContextStrokeRect(shadowContext, CGRectMake(0, 0, 100, 100)); 
```

它（显然）在整个 iamge 周围绘制一个矩形边框，如下所示：

![在此处输入图像描述](../Images/dad4e0c1314a7f37c66034b8cf045db7.png)

这不是我需要的。

但是在第三张图片中绘制边框的最佳方法是什么？

请注意，在这种情况下无法使用 UIImageView，因此使用 UIImageView 的 CALayer 的属性不适用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T19:46:14.870

一种方法是使用[膨胀的数学形态学算子](http://en.wikipedia.org/wiki/Mathematical_morphology#Basic_operators)将图像的 alpha 通道向外“增长”，然后使用生成的灰度图像作为蒙版来模拟笔画。通过填充扩张的蒙版，然后在顶部绘制主图像，您可以获得中风的效果。我创建了一个演示这个效果的演示，可以在 Github 上找到：[https](https://github.com/warrenm/Morphology) ://github.com/warrenm/Morphology （所有源代码都是 MIT 许可的，如果它对你有用的话）。

这是它的截图：

![在此处输入图像描述](../Images/913cd1db0a818d1cebdb056daee54fd8.png)

请注意，这非常慢（膨胀需要在每个像素上迭代内核），因此您应该选择笔画宽度并提前为每个源图像预先计算掩码图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:06:56.273

我会尝试在调用之前设置笔触颜色和线宽`CGContextDrawImage`，或者调整阴影（不透明度、模糊等），使其看起来像图像周围的笔触。让我知道这个是否奏效！

# javascript - 使用 javascript 存储非常少量的数据

> ID：14902451
> 
> 赞同：0
> 
> 时间：2013-02-15T20:01:02.813
> 
> 标签：javascript, string

我有一个网站，基本上可以对 url 提出的问题给出“是”或“否”的答复。一个例子是[http://isnatesilverawitch.com](http://isnatesilverawitch.com)。

我的网站更像是一个笑话，答案经常变化。我希望能够做的是存储一个简短的一两个单词字符串，并且能够在不编辑我网站上的源代码的情况下更改它，如果这可能只使用 javascript。我不想为了保存一个字符串而建立一个完整的数据库。

有没有办法在没有太多麻烦的情况下写入文件，或者可能有一个 Web 服务旨在检索和更改我可以用来为这样的网站提供动力的单个字符串？我知道这是一个奇怪的问题，但我办公室的人肯定会从中受益。我什至正在考虑构建一个移动应用程序来即时操纵答案。

附加：要清楚我只想更改单个字符串的值，但我不能只使用随机答案。没有具体说明，可以将其视为一个说明医生是进还是出的网站，但我不希望它吐出一个随机的答案，它需要在他进时说 IN，在他外出时说 OUT。我将手动更改这个值，但我想让这个过程变得简单，并且我可以在移动设备上做一些事情。我不能真正从手机编辑源代码（我也不想）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:09:38.457

如果我理解正确，您需要一个简单的文本文件，您可以在其中更改一个简单的字符串值并将其显示在您网站的某个位置。

```
var string = "loading;"
$.get('filename.txt',function(result){
    string = result;
    // use string
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:16:56.947

给你两个想法：

1)*仅*使用JavaScript，随机生成值（或者可能基于时间表，您可以提前硬编码一次，脚本会随着时间的推移处理更改）。

2) 使用 Javascript 和服务器端脚本，您可以即时更改值。

使用 JavaScript 向包含该值的文本文件发出 AJAX 请求。Shanimal 的回答为您提供了实现这一目标的代码。

要即时*更改*值，您需要另一个服务器端脚本，该脚本将值写入某种数据存储（在本例中为您的文本文件）。我不确定您的 Web 服务器上有哪些[服务器端脚本](http://en.wikipedia.org/wiki/Server-side_scripting)`http://yoursite.com/changeValue.php?Probably`（例如 PHP、Perl、ASP、Python）运行时，但我可以帮助您解决 PHP 代码，您可以通过指向浏览器。PHP 脚本将简单地写入`Probably`文本文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T20:21:03.530

由于您不想拥有服务器端代码或数据库，因此一种选择是让 javascript 从 Google 电子表格中检索值。Tabletop ( [http://builtbybalance.com/Tabletop/](http://builtbybalance.com/Tabletop/) ) 是一个旨在让您执行此操作的库。您只需制作一个公开的 Google 电子表格并启用“发布到网络”，它会为您提供一个公开的 URL。以下是您将在您的网站上使用的代码的简化版本：

```
function init() {
  Tabletop.init( { url: your_public_spreadshseet_url,
  callback: function (data) {
    console.log(data);
  },
  simpleSheet: true } )
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:14:22.180

虽然 javascript 解决方案是可能的，但**不鼓励**。PHP 旨在执行诸如随机更改站点之类的操作。假设您知道这一点，我将跳转到 javascript 解决方案。
因为您想将单词变体存储在文本文件中，您需要使用 AJAX 下载此文件或`.js`使用数组或字符串将其存储在文件中。
然后你会想要改变的话。使用 AJAX 可以在页面加载时更改单词（因此它们可以但不必在查看者眼前更改）。

## 更改页面 HTML

可能的更改方式（单词在数组中）：

### wordlist.js

```
var status = "IN";   //Edit IN to OUT whenever you want 
```

### 索引.html

```
<script src="wordlist.js"></script>
<div>Doctor is <span id="changing">IN</span></div>
<script>
   function changeWord(s) {   //Change to anything

       document.getElementById("changing").innerHTML = s;

   }
   changeWord(status);  //Get the status defined in wordlist.js
</script> 
```

## 从服务器重新加载

如果您想动态更改答案并在所有打开的页面上显示更改效果，则需要 AJAX 或者您必须让浏览器重新加载单词列表，如下所示：

### 重新加载脚本

```
function reloadWords() {
    var script = document.createElement("script");  //Create <script>
    script.type="text/javascript";
    script.src = "wordlist.js";                   //Set the path
    script.onload = function() {changeWord(status)};    //Change answer after loading
    document.getElementsByTagName("head")[0].appendChild(script);  //Append to <head> so it loads as script. Can be appended anywhere, but I like to use <head>
} 
```

### 使用 AJAX

这里我们假设使用**文本文件**。我猜最简单的解决方案。使用 AJAX，它看起来很像这样：

```
http = ActiveXObject==null?(new XMLHttpRequest()):(new ActiveXObject("Microsoft.XMLHTTP"));
http.onloadend = function() {
     document.getElementById("changing").innerHTML = this.responseText;  //Set the new response, "IN" or "OUT"
}
http.open("GET", "words.txt")
http.send(); 
```

使用长轮询可以提高 AJAX 调用的性能。除非有人感兴趣，否则我不会在这里更多地介绍这个功能。

# c - 初始值设定项元素不是常数

> ID：14902456
> 
> 赞同：5
> 
> 时间：2013-02-15T20:01:43.833
> 
> 标签：c

我必须为静态变量分配一个从函数中获取的值。我尝试执行以下操作，但我得到初始化元素不是恒定的。

```
int countValue()
{
return 5;
}

void MatrixZero()
{

 static int count=countValue();
 count++;
 printf("count value %d \n",count);

}

int main()
{
    MatrixZero();
    return 0;   

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T20:04:23.707

因为......好吧......你的静态变量的初始化器不是一个常数。它必须是一个常量表达式。试试这个：

```
static int count = SOME_VALUE_OUT_OF_RANGE;
if (count == SOME_VALUE_OUT_OF_RANGE) {
    count = countValue();
} 
```

检查它是否已经初始化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T20:03:16.277

使用存储说明符声明的变量`static`必须使用常量表达式进行初始化。

```
static int count=countValue(); 
```

函数调用不是常量表达式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-25T19:06:04.137

```
// wenn countValue ein Objekt zurückgibt

static int* count=0;  if(count==0)count=countValue(); 
```

# javascript - 在文本文件中显示跨度标记值

> ID：14902461
> 
> 赞同：4
> 
> 时间：2013-02-15T20:02:03.787
> 
> 标签：javascript, html

我正在使用 span 标签显示一个值；

JS

```
 <script>
     window.onload = function () {
         document.getElementById('tag').innerHTML = 122;
     };
</script> 
```

HTML

```
<div id="tag"></div> 
```

该值`122`将显示在屏幕上。但我想要的是`122`在 a中显示值`text filed`。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:03:25.493

将您的 html 更改为：

```
<input type="text" id="tag"> 
```

和你的js：

```
window.onload = function () {
    document.getElementById('tag').value = 122;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:05:14.893

您可以简单地将输入添加到 DOM`<input type="text" id="tag">`并保留您的

```
javascript as window.onload = function () {
    document.getElementById('tag').value = 122;
}; 
```

这将为您完成工作。

或者保持你的代码不变，你可以这样做：

**HTML：**

```
<div id="tag"></div> 
```

**JS：**

```
<script type="text/javascript">
   window.onload = function(){
    // create a textfield dynamically, say it is "text"
     document.getElementById('tag').appendChild(text);
   }
</script> 
```

# c# - 使用列表中的 Linq 构建 XML

> ID：14902462
> 
> 赞同：0
> 
> 时间：2013-02-15T20:02:07.567
> 
> 标签：c#, xml, linq, linq-to-xml

我只是想了解 Linq，我正在尝试做一些看起来很简单的事情，但我无法让它以我想要的方式输出。几天来，我一直坚持这一点，尝试了各种不同的方法，但我无法做到正确。

所以我有一个类 EarObs，它有成员：eventID、icaoId、frm、sta、db。

我正在尝试从列表构建 XML 文档。我希望 XML 文档看起来像这样：

```
<EarObs EventId = "123456789">
    <icao icaoID = "0001">
        <frm frm = "01">
            <sta sta = "00">
                <db>87</db>
                <hz>99</hz>
            </sta>
            <sta station = "01">
                <db>79</db>
                <hz>99</hz>
            </sta>
        </frm>
        <frm frm = "02">
        ................
        </frm>
    </icao>
</EarObs> 
```

如果有不止一帧或不止一个代码等，这将一直持续下去，保持相同的顺序。

所以这是我最近一直在尝试的，但它仍然没有按照我想要的方式输出，Obs 会重复，我不知道我哪里出错了。

```
string eventGUID = "eventGUID";

List<EarObs> frameObsList = new List<EarObs>();
for (int frm = 2; frm > 0; frm--)
{
    for (int sta = 5; sta > 0; sta--)
    {
        frameObsList.Add(new EarObs("KAPF", eventGUID, frm, sta, 85 + sta, 99 + sta));
        cnt++;
    }

}
String eventID = obsList.First().EventGUID;

List<EarObs> distinctApts =
    obsList
    .GroupBy(p => p.IcaoId)
    .Select(g => g.First())
    .ToList();

XElement xElement = new XElement("EarObs", new XAttribute("eventID", eventID),

    from ea in distinctApts
    orderby ea.IcaoId
    select new XElement("icao", new XAttribute("code", ea.IcaoId),
        from eb in obsList
        where ea.IcaoId == eb.IcaoId
        orderby eb.Frm
        select new XElement("frm", new XAttribute("frm", eb.Frm),
            from ec in obsList                 
            where eb.Frm == ec.Frm
            orderby ec.Sta
            select  new XElement("sta", new XAttribute("sta", ec.Sta),
                new XElement("db", ec.Db),
                new XElement("hz", ec.Hz))))); 
```

使用此代码，我得到一个 xml 文档，该文档为每个站点重复一次帧。这是不正确的。我觉得这很容易按顺序完成，但我正在努力学习，这似乎很简单，我应该能够在 Linq 中完成。我需要 List 中的每个元素只在 XML 文档中表示一次。我该怎么做？

我还想扩展它，以便它也可以处理多个 eventId，但这并不像获得正确的 XML 结构那么重要。任何帮助将不胜感激，我无法找到太多创建 XML 的示例，包括使用 linq 过滤元素，大多数示例似乎在创建 XML 之前已经准备好构建列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:15:47.290

既然您有一个自定义类，EarObs 为什么不为您的对象定义 Xml 属性并使用 XmlSerlizer 类序列化该对象？这样，您可以继续在您的对象上使用 Linq，并输出您的对象。

例如，下面是一个团队，上面有玩家。

```
[XmlRoot("root")]
public class Team
{
    private List<Player> players = new List<Player>();

    [XmlElement("player")]
    public List<Player> Players { get { return this.players; } set { this.players = value; } }

    // serializer requires a parameterless constructor class
    public Team() { }
}

public class Player
{
    private List<int> verticalLeaps = new List<int>();

    [XmlElement]
    public string FirstName { get; set; }
    [XmlElement]
    public string LastName { get; set; }
    [XmlElement]
    public List<int> vertLeap { get { return this.verticalLeaps; } set { this.verticalLeaps = value; } }

    // serializer requires a parameterless constructor class
    public Player() { }
} 
```

一旦我创建了一个团队，其中有一些球员，我只需要做：

```
Team myTeamData = new Team();
// add some players on it.
XmlSerializer deserializer = new XmlSerializer(typeof(Team));
using (TextReader textReader = new StreamReader(@"C:\temp\temp.txt"))
{
    myTeamData = (Team)deserializer.Deserialize(textReader);
    textReader.Close();
} 
```

输出将如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <player>
    <FirstName>dwight</FirstName>
    <LastName>howard</LastName>
    <vertLeap>1</vertLeap>
    <vertLeap>2</vertLeap>
    <vertLeap>3</vertLeap>
  </player>
  <player>
    <FirstName>dwight</FirstName>
    <LastName>howard</LastName>
    <vertLeap>1</vertLeap>
  </player>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:31:49.473

最简单的方法是创建一组类来像这样处理序列化；

```
public class sta
{
    public int db { get; set; }
    public int hz { get; set; }

    [XmlAttribute()]
    public string station { get; set; }
}

public class frm
{
    [XmlAttribute("frm")]
    public string frmID { get; set; }

    [XmlElement("sta")]
    public List<sta> stas { get; set; }
}

public class icao
{
    [XmlAttribute]
    public string icaoID { get; set; }

    [XmlElement("frm")]
    public List<frm> frms { get; set; }
}

public class EarObs
{
    [XmlAttribute]
    public string EventId { get; set; }

    [XmlElement("icao")]
    public List<icao> icaos { get; set; }
} 
```

您可以使用 xml 序列化程序进行序列化/反序列化。以下序列化为与您所拥有的结构相同的结构；

```
XmlSerializer serializer = new XmlSerializer(typeof(EarObs));
EarObs obs = new EarObs() { EventId = "123456789" };
obs.icaos = new List<icao>();
obs.icaos.Add(new icao() { icaoID = "0001" });
obs.icaos[0].frms = new List<frm>();
obs.icaos[0].frms.Add(new frm() { frmID = "01" });
obs.icaos[0].frms[0].stas = new List<sta>();
obs.icaos[0].frms[0].stas.Add(new sta() { station = "00", db = 87, hz = 99 });
obs.icaos[0].frms[0].stas.Add(new sta() { station = "01", db = 79, hz = 99 });
obs.icaos[0].frms.Add(new frm() { frmID = "02" });

using (StringWriter s = new StringWriter())
{
    serializer.Serialize(s, obs);
    string test = s.ToString();
} 
```

输出；

```
<?xml version="1.0" encoding="utf-16"?>
<EarObs xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" EventId="123456789">
  <icao icaoID="0001">
    <frm frm="01">
      <sta station="00">
        <db>87</db>
        <hz>99</hz>
      </sta>
      <sta station="01">
        <db>79</db>
        <hz>99</hz>
      </sta>
    </frm>
    <frm frm="02" />
  </icao>
</EarObs> 
```

现在，虽然这看起来很麻烦，但可以使用 xsd.exe 工具（我相信框架随附）来自动创建一组匹配任何给定 xml 文件的类，尽管它确实使用一个中间 xsd 文件（虽然无痛）。你可以在这里找到方法；[如何从 xsd 生成 .NET 4.0 类？](https://stackoverflow.com/questions/5217665/generate-net-4-0-class-from-xsd)

# .net - 是否可以从另一个设置文件中“继承”一个 Resharper 设置文件？

> ID：14902464
> 
> 赞同：3
> 
> 时间：2013-02-15T20:02:25.283
> 
> 标签：.net, visual-studio, tfs, compact-framework, resharper

我们的团队中有多种 Visual Studio 2008 和 Visual Studio 2012 解决方案。使用 VS08 是出于遗留原因，主要是因为智能设备项目在 VS 版本之外不受支持。

我们目前正在使用单个 Resharper .DotSettings 文件，并通过每个解决方案的团队共享解决方案设置中的一个层在每个 VS2012 解决方案中共享它。虽然我们也想在我们的 VS08 解决方案上使用“相同”的设置，但目前这很有效。

这里要注意的是，在这个常见的 .DotSettings 文件中，有一小部分规则是专门为 .Net4 项目创建的，这些规则对 .Net2 VS08 项目不可见。例如，其中有一条自定义规则建议将参数验证代码转换为`Contract.Requires<TException>`调用异常。

理想情况下，应该有一种方法来制作一个“基本”设置文件，该文件将在每个 VS08 解决方案中使用，以及一个“继承”设置，包含基本文件中的每个设置以及特定于 VS12 解决方案的附加规则。更新基本文件还应该使每个解决方案都使用继承的文件来更新该设置。

有没有办法正确处理这个问题，同时避免同一文件的多个克隆，同时保持在编辑其中一个设置文件时自动更新每个解决方案设置的能力？

我认为创建两个文件（一个具有常规设置，另一个仅具有 .Net4 添加）可以工作。在这种情况下，每个 VS12 解决方案都将这两个文件作为层包含在内，但在 VS08 解决方案中仅包含前者。不过，我不确定这是否是这种情况下的最佳方法，并且想听听其他可能的选择，因为我们更愿意在每个解决方案上只保留一个层，因为这似乎更容易维护。

我们使用的是最新版本的 Resharper，目前是 v7.1.1000.900。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:24:41.507

您可以创建一个设置文件来覆盖主设置文件中的一些设置。这是如何做到的：

1.  确保所有主要设置都在自定义设置文件中，并且其上方的所有设置层都是空的。
2.  为其他设置创建一个空文件并将其放在主设置文件之上。
3.  现在两个设置文件都应该在团队共享层下，一个在另一个之上，在[设置层对话框中](http://www.jetbrains.com/resharper/webhelp/Reference__Settings_Layers.html)。
4.  打开解决方案并确保应用主设置文件中的设置。
5.  **对设置进行必要的修改，并使用Save To**将它们保存到附加设置文件中。

要更好地了解设置层的工作原理，请查看[这篇文章](http://blogs.jetbrains.com/dotnet/2012/09/save-or-save-to-in-resharper-options/ "这个帖子")。

# javascript - ECMAScript 多个 Prologue 指令

> ID：14902465
> 
> 赞同：3
> 
> 时间：2013-02-15T20:02:25.990
> 
> 标签：javascript, ecmascript-5

某些 ECMAScript 环境允许通过 Directive Prologue 切换到特殊模式。ECMAScript 5 有“use strict”，而[asm](http://asmjs.org/spec/latest/ "汇编")等其他有自己的“use asm”。

[Directive Prologues](http://ecma-international.org/ecma-262/5.1/#sec-14.1 "指令序言")上的文档是用一种对我的理解水平来说有点迟钝的语言编写的。构建具有多个指令的指令序言的正确方法是什么？我的预感是：

```
function(){
  "use foo";
  "use bar";
} 
```

但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:10:45.857

由于没有人回答，但我找到了答案，并且在评论中得到了确认，我正在回答我自己的问题以关闭它。

是的，要在序言中使用多个指令，一个接一个地列出它们，如下所示：

```
function(){
  "use foo";
  "use bar";
} 
```

或者

```
function(){
  "use foo"; "use bar";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:38:39.000

> 构建具有多个指令的指令序言的正确方法是什么？

正如[您链接的规范](http://ecma-international.org/ecma-262/5.1/#sec-14.1)所说，

> a`Directive Prologue`是 [在脚本或函数的开头] 发生的*最长*的[`ExpressionStatement`产生](http://ecma-international.org/ecma-262/5.1/#sec-12.4)序列，其中每个 [它们] 完全由 a 组成[`StringLiteral`](http://ecma-international.org/ecma-262/5.1/#sec-7.8.4)。

因此，您可以将它们串在一起，这些字符串文字语句中的每一个都是指令；并且可以具有特定于实现的含义（仅指定了 Use-Strict-Directive）。你的预感是正确的，这应该有效：

```
"use bar"
"use strict"; 'use x';
'use foo'; 
```

# json - 解析带有嵌套索引的 json 文件并保存为 csv

> ID：14902466
> 
> 赞同：0
> 
> 时间：2013-02-15T20:02:31.670
> 
> 标签：json, csv, nested, indexing

所以，我有一个带有嵌套索引的 json 文件。有一个名为“user”的索引，它有一个名为“lang”的子索引，以及许多其他子索引。我只想提取“lang”字段并将其保存为 csv。对于另存为 csv 部分，我猜我可以使用开源“json2csv”代码之一。有人可以帮我提取“lang”字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T19:33:01.983

用于`JSON.stringify()`将数据转换为字符串，然后`match`与 RegExp 一起使用以返回指定键/值对的数组。这是一个例子：

```
var foo = JSON.stringify({
"Region": {
    "filterField": "kw_Region",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"ApplicationName": {
    "filterField": "kw_ApplicationName",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"IssueType": {
    "filterField": "kw_IssueType",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"Outage": {
    "filterField": "kw_Outage",
    "filterValues": [
        "aa",
        "bb"
    ]
},
"Priority": {
    "filterField": "kw_Priority",
    "filterValues": [
        "aa",
        "bb"
    ]
}
}).match(/(?=filterValues)[^\]]*./g)

console.log(foo) // ["filterValues":["aa","bb"]", "filterValues":["aa","bb"]", "filterValues":["aa","bb"]", "filterValues":["aa","bb"]", "filterValues":["aa","bb"]"] 
```

# php - 将数据打印到外部 JavaScript 文件的更好方法

> ID：14902467
> 
> 赞同：4
> 
> 时间：2013-02-15T20:02:31.993
> 
> 标签：php, javascript, backend, frontend

## 简报：

一个 PHP 文件，用于打印带有`table`充满数据的标签的 HTML 标记，以及一个在 Google 图表中呈现该数据的 JS 文件。

## 尽管：

我不认为进行 Ajax 调用只是为了获取与 PHP 文件在`table`标签中打印的相同数据是合理的

## 解决方案：（？）

1.  使 PHP 文件在`script`标签下方/上方打印`table`标签，并将数据 JSON 编码为变量。
2.  `tr`使用 HTML5属性打印每个相应标签内的数据，然后通过标签中打印的数据`data-`呈现 Google 图表`table`
3.  **你会怎么做？**

### 另一个例子：

打印应用程序基础 URL 以让 JS 文件知道它。

* * *

# 编辑

我发现我为此找到了一个优雅而好的解决方案：**meta tags**。

元标记只是关于文档的元信息。所以像：

`<meta name="baseurl" content="<?php echo $baseurl ?>">`

和/或

`<meta name="users" content="<?php echo json_encode($users) ?>">`

很好，因为将避免将`<script>`标签放在视图部分和 html 标签中的突兀`data-`属性。

无论如何，我还不是很满意。我会继续寻找解决方案并听取人们的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:08:20.717

我的选择将取决于这些数据更改的频率：

*   如果变化很大，将加载没有数据的页面，并进行HTTP调用以获取数据并让用户知道数据是新鲜的，并在界面中显示下一次数据刷新时间，倒计时或视觉图形
*   如果数据没有太大变化，则可以使用添加 Json 数据作为变量的解决方案，用于在页面加载后在页面中构建表格。

希望能帮助到你。

# linux - ImportError：没有名为 cElementTree 的模块 - Redhat

> ID：14902473
> 
> 赞同：0
> 
> 时间：2013-02-15T20:02:41.257
> 
> 标签：linux, redhat, yum

在 RHEL 上运行 yum 时出现以下错误。根据我在谷歌上的搜索，它似乎与 python 有关。

有人知道吗？

```
无法导入插件“refresh-packagekit”
加载的插件：安全
回溯（最近一次通话最后）：
  文件“/usr/bin/yum”，第 29 行，在
    yummain.user_main(sys.argv[1:], exit_code=True)

……
...........
............

    self.parse(srcfile)
  解析中的文件“/usr/lib/python2.6/site-packages/yum/repoMDObject.py”，第 140 行
    解析器 = iterparse(infile)
  cElementTree_iterparse 中的文件“/usr/lib/python2.6/site-packages/yum/misc.py”，第 1169 行
    _cElementTree_import()
  _cElementTree_import 中的文件“/usr/lib/python2.6/site-packages/yum/misc.py”，第 1164 行
    导入 cElementTree
ImportError：没有名为 cElementTree 的模块

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:11:55.537

如果它的 Red Hat Enterprise Linux 6.3

解决方案：

> libexpat.so.1 符号链接链接到 /lib64/ 中的 libexpat.so.1.5.2。但是该目录被重命名为 libexpat.so.1.old。用正确的名称重新创建符号链接解决了这个问题：

```
# ln -s libexpat.so.1.5.2 libexpat.so.1
# /sbin/ldconfig 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:52:28.260

查看此[错误 694812](https://bugzilla.redhat.com/show_bug.cgi?id=694812)。我希望它会有所帮助。

# xcode - 在 Xcode 中，如果字符串不等于开始日期，我如何选择将结束日期附加到字符串中

> ID：14902477
> 
> 赞同：-1
> 
> 时间：2013-02-15T20:03:16.163
> 
> 标签：xcode, ios6, nsstring, nsdate, nsdateformatter

我是 xcode 和面向对象开发的新手（当时是数据库......）并且我试图根据开始日期是否与结束日期相同来构建一个字符串，所以如果它是相同的返回开始日期，如果不返回开始和结束日期（即 15/02/2013 - 17/02/2013）。我的代码如下，但它不喜欢'fulldatestring'，我的if语句有问题吗？

```
NSString *startDate = [info objectForKey:@"StartDate"];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-mm-dd"];
NSDate *sdate = [dateFormatter dateFromString:startDate];
dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd/mm/yyyy"];
NSString *convertedStartDate = [dateFormatter stringFromDate:sdate];

NSString *endDate = [info objectForKey:@"EndDate"];
[dateFormatter setDateFormat:@"yyyy-mm-dd"];
NSDate *edate = [dateFormatter dateFromString:endDate];
dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd/mm/yyyy"];
NSString *convertedEndDate = [dateFormatter stringFromDate:edate];

if(convertedStartDate isEqualToString:convertedEndDate) {
    NSString *fulldatestring = convertedStartDate;
}
else
    NSString *fulldatestring = [convertedStartDate, convertedEndDate ];
{

cell.datesLabel.text = fulldatestring 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:11:24.333

要比较 NSDates，请参阅 NSDate 实例方法[isEqualToDate:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/isEqualToDate%3a)和[compare:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/compare%3a)。您不需要（也不应该）将它们转换为 NSStrings 来比较它们。

在[NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)中搜索“append”，您会看到两种方法将一个 NSString 附加到另一个。

这应该使您朝着正确的方向前进，但是如果您确实需要，我可以发布代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:13:08.493

您的 Objective-C 语法有几个问题。

每当向对象发送消息时，例如 isEqualToString: 到字符串，它必须放在方括号中。以及 if 语句周围的大括号不匹配。

```
if([convertedStartDate isEqualToString:convertedEndDate]) {
    NSString *fulldatestring = convertedStartDate;
} else {
    NSString *fulldatestring = [NSString stringWithFormat:@"%@ - %@", convertedStartDate, convertedEndDate];
} 
```

同样 NSString 对象不是可变的，因此您不能像尝试那样连接它们，您必须创建一个新的 NSString 对象。

# shell - 通过嵌套的 Shell 脚本传递变量

> ID：14902481
> 
> 赞同：0
> 
> 时间：2013-02-15T20:03:30.770
> 
> 标签：shell

我的 Shell 脚本中有一个简单的循环，并且希望能够为目录中的每个文件运行另一个循环......现在我只是要求它回显每个文件，但我确实想对每个文件做更多的事情，但想先弄清楚这一点......

```
for dir in "$@/"*
do
folder=$(basename "$dir")
path="/Users/wme/Desktop/test3/"
if [ ! -d "$path$folder" ]; then
mkdir "$path$folder"
mkdir "$path$folder/mp4"
mkdir "$path$folder/mov"
mkdir "$path$folder/ogg"
mkdir "$path$folder/webm"
mkdir "$path$folder/img"
fi
for file in "$dir/"*
    echo $file
done
done 
```

所以基本上它是找到所有目录为这些文件夹创建一个文件夹结构，现在我需要去处理每个文件夹中的电影......但是当我尝试做第二个嵌套循环时出现错误，什么我做错了吗？

另外应该注意的是，我在 Automator 中运行它，所以它并没有真正给我一个错误，只是说动作失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:04:47.427

您的第一个 for 循环也会有问题。`"$@/"*`将扩展为`$1 $2 ... $n/*`，而不是`$1/* $2/* ... $n/*`。你需要

```
path="/Users/wme/Desktop/test3"
for dir in "$@"; do
    for subdir in "$dir/"*; do
        folder=$(basename "$subdir")

        if [ ! -d "$path/$folder" ]; then
            for ftype in mp4 mov ogg webm img; do
                mkdir -p "$path/$folder/$ftype"
            done
        fi
        for file in "$subdir/"*
           echo $file
        done
done 
```

# ruby-on-rails - 嵌套属性的质量分配错误

> ID：14902482
> 
> 赞同：0
> 
> 时间：2013-02-15T20:03:32.487
> 
> 标签：ruby-on-rails, nested-attributes, mass-assignment

我有一个可以动态添加的事件（日期时间 - 不幸的是，我在代码中将其拼错为发生）可以动态添加（感谢 Ryan Bates 的精彩教程：[http ://railscasts.com/episodes/196 -nested-model-form-part-1?view=asciicast](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)）：

```
has_many :occurances, :dependent => :destroy
accepts_nested_attributes_for :occurance, :reject_if => lambda { |a| a[:when].blank? }, :allow_destroy => true'

 attr_accessible :occurances, :occurances_attributes, :occurance_id 
```

然后是表格：

```
.control-group.occurance_fields
  = f.label "Date & Time", :class => 'control-label'
  .controls
    = f.fields_for :occurance do |o_form|
      = o_form.text_field :when, :class => 'datepicker' 
```

在 event_controller 的新方法中：

```
 @event.occurances.build 
```

我目前在提交表单时遇到问题：

```
Can't mass-assign protected attributes: occurance 
```

如果我添加 `attr_accessible :occurance`我会收到以下错误：

```
unknown attribute: occurance 
```

我在这里想念什么？我已经查看了其他一些关于类似问题的问题，但我无法将他们的解决方案转化为我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:05:39.110

```
attr_accessible: occurance_ids 
```

和

```
accepts_nested_attributes_for :occurances, :reject_if => lambda { |a| a[:when].blank? }, :allow_destroy => true' 
```

### 编辑：

您的 :occurance_id 在您的 :attr_accessible 中也无效。因为它是一个 has_many 关系，所以外键将在 Occurances 表中。

# python - 将dict内容分配给自变量

> ID：14902483
> 
> 赞同：0
> 
> 时间：2013-02-15T20:03:36.460
> 
> 标签：python, list, python-2.7, defaultdict

如何将 defaultdict 拆分为独立的列表，其中键作为列表名称，值作为列表元素。

例如：

```
defaultdict ([('A', [1, 3, 4]), ('B', [3, 6, 8])]) 
```

如何得到：

```
A= [1,3,4]
B= [3,6,8] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:06:40.070

我很抱歉，但通常你不能，你不应该尝试。

一个明显的原因是您需要强制 dict 键是有效的 Python 名称（甚至任何字符串都不起作用，更不用说处理非字符串键了）。

另一个原因是，即使键*是*有效名称，您也可能会意外地覆盖碰巧具有该名称的其他对象。它可能是一个内置函数或任何东西，它可以以任何可能的方式破坏你的脚本。

如果你不相信，你可以尝试这样的事情：

```
In [1]: d = {'A': [1, 3, 4], 'B': [3, 6, 8]} # a defaultdict would work, too

In [2]: for k, v in d.items():
   ...:     globals()[k] = v
   ...:     

In [3]: A
Out[3]: [1, 3, 4]

In [4]: B
Out[4]: [3, 6, 8] 
```

要阅读的文档：

*   [`globals`](http://docs.python.org/2/library/functions.html#globals)
*   [`locals`](http://docs.python.org/2/library/functions.html#locals)

# svn - 从 svn 签出到不同的目录结构

> ID：14902484
> 
> 赞同：0
> 
> 时间：2013-02-15T20:03:38.647
> 
> 标签：svn, svn-checkout

我在 svn 存储库中有以下目录结构

```
Parent Directory/  
    - BranchFolder1/  
        * Stuff for BranchFolder1/  
    - BranchFolder2/  
        * Stuff for BranchFolder2/  
    - BranchFolder3/  
        * Stuff for BranchFolder3/ 
```

在磁盘上我想有这个结构：

```
Parent Directory/   
    - Stuff for BranchFolder1/ 
```

如果我 cd 进入父目录并在那里进行 svn 更新，它会检查所有分支及其各自的内容，这是我不想要的。我怎样才能让它只从其中一个分支中签出/更新内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:17:00.547

您需要使用**稀疏结帐**功能（自 SVN 1.5 起可用）：

```
svn checkout --depth empty "http://path/to/Parent Directory
svn up BranchFolder1/ 
```

第一个命令会将工作副本深度设置为空，因此您只有这个目录。通过发出第二个命令，Subversion 只会将 BranchFolder1 更新为 workingCopy 深度“无限”。所有其他目录将保持不变以供后续使用

```
svn up . 
```

# bash - bash 将 fuser 的输出分配给变量奇数

> ID：14902490
> 
> 赞同：0
> 
> 时间：2013-02-15T20:04:14.403
> 
> 标签：bash, fuser

当使用以下 bash 脚本将变量分配给 fuser 的输出时，它仍然将 fuser 的结果部分（之前 :) 输出到屏幕。为什么不被压制？我怀疑它与 fuser 输出的“：”字符有关。我该如何解决？

```
test=`fuser -f /home/whois_database_collection_v4/whoisdatacollector/logs/com_log_2013_02_15_12_40_43.log`
/home/whois_database_collection_v4/whoisdatacollector/logs/com_log_2013_02_15_12_40_43.log：

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:09:04.953

`fuser`将您看到的输出部分发送到`stderr`，其余部分发送到`stdout`（我怀疑它试图从脚本中简化其使用，同时从用户的角度保留一些美感）。如果`2> /dev/null`为 stderr 添加重定向，它将消失。

# java - jconsole 中的“Perform GC”按钮有什么作用？

> ID：14902496
> 
> 赞同：4
> 
> 时间：2013-02-15T20:04:36.017
> 
> 标签：java, garbage-collection, jmx

jconsole 中有一个“Perform GC”按钮，任何人都知道如果我单击该按钮会发生什么，它正在调用`System.gc()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:20:28.897

你可以自己找出来。JConsole 的代码是 OpenJDK 的一部分。您也可以在[grepcode.com](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/tools/jconsole/MemoryTab.java#MemoryTab.gc%28%29)上查看。

按钮调用`gc()`对象实现的方法，该方法`MemoryMXBean`很可能由[`com.sun.management.MemoryImpl`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/management/MemoryImpl.java?av=h#MemoryImpl)类实现。此类包含`gc()`方法的实现，如下所示：

```
public void gc() {
    Runtime.getRuntime().gc();
} 
```

现在，如果您考虑如下所示的`gc()`方法的实现[`java.lang.System`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/System.java#System.gc%28%29)：

```
public void gc() {
    Runtime.getRuntime().gc();
} 
```

你的问题的答案是：*技术上不，但它做同样的事情。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:14:02.320

根据[此链接](http://tomcat.10.n6.nabble.com/OT-Jconsole-Perform-GC-td2007229.html)，是的，它确实执行`System.gc()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:17:42.647

差不多。[JConsole 中MemoryTab](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/tools/jconsole/MemoryTab.java#MemoryTab.gc%28%29)中的 GC 按钮调用[MemoryTab.gc()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/tools/jconsole/MemoryTab.java#MemoryTab.gc%28%29)，后者又调用目标 JVM 的[MemoryMXBean.gc()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/management/MemoryMXBean.java#MemoryMXBean.gc%28%29)。javadoc 说这个调用相当于[java.lang.System.gc()](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/System.java#System.gc%28%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:20:12.140

我担心他们在引擎盖下的行为几乎相同，但我不确定我是否同意以下描述：

> Memory 选项卡具有“Perform GC”按钮，您可以随时单击该按钮执行垃圾收集。

当实际上`System.gc()`只是对 VM 的建议时：

> 调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以便使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间。

如果他们也这样做，我不敢说你可以随时*做*。

# android - 带有 ACR122 NFC 读卡器的 Android NFC 手机 API

> ID：14902499
> 
> 赞同：0
> 
> 时间：2013-02-15T20:04:47.350
> 
> 标签：android, api, nfc

我想知道是否有 API 或示例源代码可以让我：

-从我的 NFC 手机（Nexus S 4G）发送字符串 -在我的 Android 平板电脑（通过 USB 连接到 ACR122 阅读器）上接收字符串

因此，换句话说，用户可以在 ACR122 NFC 阅读器上点击他们的 Nexus S 手机，字符串（或一些数据）将从手机发送到 Android 平板电脑（连接到 ACR122 阅读器）

有一家名为 Adelya Labs 的公司已经弄清楚如何在 NFC 手机和连接到 NFC 阅读器的平板电脑之间进行通信，但我不确定他们使用的 API 或示例源代码。这是一个 YouTube 视频，展示了我想要做什么：

[http://www.youtube.com/watch?v=0J22SdUz_FE&feature=player_detailpage#t=38s](http://www.youtube.com/watch?v=0J22SdUz_FE&feature=player_detailpage#t=38s)

有什么建议么？我应该研究的 API？或手机和平板电脑的示例源代码？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:57:35.040

ACR 122 驱动程序下载有一个 Android 示例应用程序。该应用程序很粗糙，但允许向读者发送低级消息。您可以使用[nfctools 之](https://github.com/grundid/nfctools)类的库从高级 NDEF 消息转到低级读/写命令。另请参阅[此线程](https://groups.google.com/forum/?fromgroups=#!searchin/nfc-developers/acr122/nfc-developers/6L5PIwTzGHQ/xKUW3yfZ-_EJ)。

请注意，如果电池电量低于 ACR 122 的电源要求，您将在连接事件之后立即看到断开连接事件。

# java-ee-6 - 拦截器不拦截

> ID：14902500
> 
> 赞同：0
> 
> 时间：2013-02-15T20:04:54.497
> 
> 标签：java-ee-6, cdi, interceptor

我在设置 Java EE 6 CDI 拦截器时遇到问题。我正在使用嵌入式 glassfish，我在 web 应用程序的 beans.xml 中指定了拦截器。

```
<beans
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
    <interceptors>
        <class>ServiceInterceptor</class>
    </interceptors>
</beans> 
```

我正在尝试保护这个 bean：

```
@Named
//@Stateless
@RequestScoped
public class SecuredMethodJSFBean /*implements Serializable*/{
    @Inject
    protected SecuredMethodSample securedMethodSample;

    /*
    @CurrentUser
    @SessionScoped
    @Inject
    protected RuntimePrincipalAware principal;
    //protected JSFLoginBean jsfLoginBean;
    */

    public SecuredMethodJSFBean()
    {
        super();
        System.out.println("creating secured method jsf bean");
    }

    @Secured("adfadfafd")
    public void doSomething()
    {
        //System.out.println("\n\n\n\nprincipal:" + principal);
        //System.out.println("principal:" + jsfLoginBean.getPrincipal());

        //securedMethodSample.doSomething(jsfLoginBean.getPrincipal().getName());
        //return(jsfLoginBean.getPrincipal().getName());

        //securedMethodSample.doSomething(principal.getName());
        //return(principal.getName());
        //return("secured-method");

        securedMethodSample.doSomething("testing ...");
    }
} 
```

我需要做什么才能让我的拦截器运行？

此外，我正在尝试使用拦截器来拦截 servlet 使用的 bean 上的方法调用。由于那些豆子是豆子，我应该能够拦截它们。但是，我无法这样做。我最初试图直接拦截 servlet 中的方法调用，但它们不是 CDI bean，所以这没有意义。

谢谢，

沃尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:28:02.297

“我已经在 web 应用程序的 beans.xml 中指定了拦截器”

@Secured 是否在另一个项目/jar 中定义？在这种情况下，您需要在该 beans.xml 中启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:50:11.840

为了更好地回答我的问题，我做了以下事情：

1.  我制作了项目 ejb 而不是 jar（在 maven 内）。
2.  我创建了一个 ejb-jar.xml 文件，指定/声明我的拦截器 (src/main/resources/META-INF)。
3.  在使用此拦截器的项目中，我将类型指定为 ejb 以使其正确拾取。

沃尔特

# powershell - 带有参数 * 和 * 函数的 Powershell 脚本

> ID：14902501
> 
> 赞同：5
> 
> 时间：2013-02-15T20:05:06.567
> 
> 标签：powershell, params

我想编写一个接受参数并使用函数的powershell脚本。

我试过这个：

```
param
(
  $arg
)

Func $arg;

function Func($arg)
{
  Write-Output $arg;
} 
```

但我得到了这个：

```
The term 'Func' is not recognized as the name 
of a cmdlet, function, script file, or operable program. 
Check the spelling of the name, or if a path was included, 
verify that the path is correct and try again.
At func.ps1:6 char:5
+ Func <<<<  $arg;
    + CategoryInfo          : ObjectNotFound: (Func:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

好吧，我想。我会试试这个：

```
function Func($arg)
{
  Write-Output $arg;
}

param
(
  $arg
)

Func $arg; 
```

但后来，我得到了这个：

```
The term 'param' is not recognized as the name 
of a cmdlet, function, script file, or operable program. 
Check the spelling of the name, or if a path was included, 
verify that the path is correct and try again.
At C:\Users\akina\Documents\Work\ADDC\func.ps1:7 char:10
+     param <<<<
    + CategoryInfo          : ObjectNotFound: (param:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

我要求的可行吗？还是我的要求不合理？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T20:20:10.420

脚本中的参数块必须是第一个非注释代码。之后，您需要在调用它之前定义该函数，例如：

```
param
(
  $arg
)

function Func($arg)
{
  $arg
}

Func $arg 
```

在您的示例中，Write-Output 是不必要的，因为默认行为是将对象输出到输出流。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-11T17:57:08.850

您只需要 ius 来确保 PARAM 是脚本的第一个字符串。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-12-19T14:06:11.287

您可以将参数标签放在函数内..

像这样的东西：

```
function func($avg)
{
    param
    (
         $avg
    )
} 
```

# asp.net-mvc-4 - .net MVC 4 授权（会员）

> ID：14902503
> 
> 赞同：1
> 
> 时间：2013-02-15T20:05:12.160
> 
> 标签：asp.net-mvc-4, asp.net-membership, asp.net-authorization

在 .NET MVC 4 的第一步中，我正在创建一个网站，并且我想实现用户身份验证/授权。

在我的实现中，我希望能够将控件链接到角色。例如，如果我的系统中有 2 个角色：管理员和用户，则在某些观点中说我有 3 个输入：

```
 <input class="search-field rounded" id="field1" type="text"/>
            <input type="submit" name="submit"/>

            <input class="search-field rounded" id="field2" type="text"/>
            <input type="submit" name="submit"/>

            <input class="search-field rounded" id="field3" type="text"/>
            <input type="submit" name="submit"/> 
```

我希望管理员能够查看和编辑此视图中的所有 3 个字段，但用户应该只能看到其中的 2 个，并且能够编辑其中一个（这只是一个示例）。

所以基本上，我希望能够为控件定义权限，并且一个角色应该由一组权限组成（如果你能想到更好的方法，我很想听听）。

所以这些是我的限制，我看到很多与该主题相关的软件包（例如[Fluent Security](http://www.fluentsecurity.net/)和[Security Guard](http://www.mvccentral.net/Story/Details/tools/kahanu/securityguard-nuget-package-for-asp-net-membership)），但我不太确定哪个最能解决我的挑战。

是否有克服这种需求的最佳实践？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:40:28.757

idlehands23 展示了您如何访问和检查角色，但我猜您想在视图级别使用此功能。

Within an action method, I usually pass `HttpContext.User` into the `ViewBag` or in the case of a strongly typed view you can pass the principal into your model and parse these values out as you wish. Then pass the model to the view like so.

```
return View(new ModelClass(HttpContext.User)) 
```

From here you can add additional code into the view logic to parse/check the roles and render the html with greater specificity using for example:

```
If (Model.User.IsInRole("Admin"))
{
    //Render admin controls
    //...
}
else
{
   //Render User Controls
   //...
} 
```

Using the `[Authorize(Role="Admin||User")]` attribute on your action method would restrict access to an entire group of users. In such a case you would need two action methods and one or possibly two distinct views to render the content. However if you just want to limit it to ANY authorized user you can do like so:

```
 [Authorize]
    public ActionResult Index(){} 
```

Then you can implement the logic at the view level with the certainty that they are authorized.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:24:28.273

我是这样做的：

```
//In Controller
ViewBag.Roles = Roles.GetRolesForUser(User.Identity.Name);//viewbag because I'm assuming this isn't what you want to strongly type to your page.

//In View
@{
  var roles = (Roles)ViewBag.Roles;
} 
if(roles.contains("admin')) //put whatever you want in place of "admin"
{
    //do something
} 
```

在您的控制器中，您可以通过这种方式访问​​某些视图或部分视图//如果您需要在控制器中。
[Authorize(Roles = "Admin, ImportExport, Search")] //这只是为了安全 public ActionResult 不管（）{} *我使用剃刀。如果不是，请用 <% %> 替换 @。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:13:06.647

I ended up creating my own custom membership provider and role provider.

In my Role Provider I added a method

```
public bool UserHasPermission(string username, string permission) {...} 
```

And in my view I'm doing:

```
@{
    var roleProvider = Roles.Provider as MyCustomRoleProvider;
    bool addressEditPermission = roleProvider.UserHasPermission(User.Identity.Name, "addressEditPermission");
} 
```

Then I can manipulate my control:

```
@Html.TextBoxFor(model => model.Name, new { @readonly = addressEditPermission }) 
```

You just need to make sure your control has overloads that take HTML attributes.

I hope this helps someone..

# sql - 如何使用多个子查询优化 SELECT 语句

> ID：14902513
> 
> 赞同：3
> 
> 时间：2013-02-15T20:05:51.543
> 
> 标签：sql, sql-server

我有一个查询，我正在尝试优化，但没有取得太大的成功。有两张表，一张包含主要数据，一张包含特定事件发生时间的时间戳。这些表是使用 adID 的公共键的关系表。我正在尝试执行从主表中提取所有时间戳和其他数据的查询。我让它工作，但我正在尝试优化，以便它运行得更快。

```
SELECT a.ID,a.repID,a.artistID,
(
    SELECT TOP 1 c.timestamp
    FROM Tracking AS c
    WHERE statusID = 4
    AND c.ID = a.ID
    ORDER BY c.timestamp ASC

) 
AS created,
(
    SELECT TOP 1 d.timestamp
    FROM Tracking AS d
    WHERE statusID = 5
    AND d.ID = a.ID
    ORDER BY d.timestamp ASC
)
AS claimed,
(
    SELECT TOP 1 p.timestamp
    FROM Tracking AS p
    WHERE statusID = 6
    AND p.ID = a.ID
    ORDER BY p.timestamp ASC
)
AS proof,
(
    SELECT TOP 1 v.timestamp
    FROM Tracking AS v
    WHERE statusID = 8
    AND v.ID = a.ID
    ORDER BY v.timestamp ASC
)
AS approved,
(
    SELECT count(ID)
    FROM Tracking AS t
    WHERE statusID = 6
    AND t.ID = a.ID
)
AS proofcount
FROM Advertising AS a
WHERE a.statusID = 8 
```

对此的任何帮助表示赞赏。我对 SQL Server 不太熟悉，所以我不太擅长优化诸如此类的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:24:03.103

您应该能够使用以下内容：

```
SELECT a.ID,
  a.repID,
  a.artistID,
  min(case when t.statusID = 4 then t.timestamp end) created,
  min(case when t.statusID = 5 then t.timestamp end) claimed,
  min(case when t.statusID = 6 then t.timestamp end) proof,
  min(case when t.statusID = 8 then t.timestamp end) approved,
  count(case when t.statusID = 6 then id end) proofcount
FROM Advertising AS a
LEFT JOIN Tracking t
  on a.id = t.id
WHERE a.statusID = 8
GROUP BY a.ID, a.repID, a.artistID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:10:59.667

我认为以下查询可以满足您的要求：

```
select id, repid, artistid,
       max(case when statusId = 4 and seqnum = 1 then timestamp end),
       max(case when statusId = 5 and seqnum = 1 then timestamp end),
       max(case when statusId = 6 and seqnum = 1 then timestamp end),
       max(case when statusId = 8 and seqnum = 1 then timestamp end),
       sum(case when statusId = 6 then 1 else 0 end)
from (select a.ID, a.repID, a.artistID, t.statusId, t.timestamp
             row_number() over (partition by a.id, t.statusId order by timestamp) as seqnum
      from advertising a left outer join
           tracking t
           on a.id = t.id
    ) t
where seqnum = 1
group by id, repid, artistid 
```

它将表连接在一起并使用 标识最早的记录`row_number()`。然后它只选择其他字段的这些记录和组。

您的查询还只过滤那些具有`statusid = 8`. 我不确定这是否是故意的。如果是这样，那么您希望`having`在查询末尾使用此子句：

```
having sum(case when statusId = 8 then 1 else 0 end) > 0 
```

# ubuntu - 在 Ubuntu 上安装 Emscripten

> ID：14902514
> 
> 赞同：9
> 
> 时间：2013-02-15T20:05:56.347
> 
> 标签：ubuntu, emscripten

我正在尝试在 Ubuntu 上安装 Emscripten，但 Emscripten[的官方安装指南](https://github.com/kripken/emscripten/wiki/Tutorial)没有提供在 Linux 上安装 Emscripten 的任何说明。安装指南必须提供的唯一建议是：

`If you are on Linux, things should be very simple for you and there is no need for any additional guide.`

我也阅读了 Emscripten 存储库中的 README.md 文件，它也没有为 Ubuntu 提供任何说明。为了在 Ubuntu 上设置 Emscripten，我需要遵循哪些步骤？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T20:10:33.093

对于 Ubuntu 12.04，这也很容易。

1.  转到[http://llvm.org/releases/download.html](http://llvm.org/releases/download.html)并下载 LLVM 3.2 (Clang Binaries for Ubuntu-12.04/x86) LLVM 已集成
2.  将其提取到您喜欢的地方，例如。`~/opt/dev/llvm`
3.  将此添加到您的 .profile`PATH="$PATH:/home/[your_profile]/opt/dev/llvm/clang3.2/bin"`
4.  确保你已经安装了 nodejs
5.  按照 emscripten 安装说明进行操作

就这样

如果你得到`/usr/include/features.h:324:10: fatal error: 'bits/predefs.h' file not found` 简单的安装`sudo apt-get install libc6-dev-i386`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-16T11:06:47.857

为了开始使用*clang 3.2*，我假设您正在运行*Ubuntu 12.10*。 *13.04*已经打包了*clang 3.2*，所以我建议使用这些包。

有两种获取方式：

1.  **安装/升级 Ubuntu 13.04 的选定软件包（轻微侵入性）**

    *   添加`deb http://archive.ubuntu.com/ubuntu/ raring main restricted universe multiverse`到您的来源。
    *   更新您的包裹信息（例如`sudo apt-get update`）
    *   仅安装所需的包和依赖项（例如`sudo apt-get install clang-3.2`）
    *   禁用之前添加的源条目。
2.  **将 Ubuntu 升级/安装到 13.04+**

**编辑：**

更新到目前的情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-13T01:46:08.357

[Emscripten](https://en.wikipedia.org/wiki/Emscripten)是一个复杂的软件工具系统，支持多个平台。与此类系统的典型情况一样，入门说明可能有点晦涩难懂。第一个遗憾的是，[仅从 Ubuntu 存储库安装 emscripten 可能不是您最好的选择](https://stackoverflow.com/q/26445496/86967)，至少目前是这样。

[通过下载适用于 Linux 和 OS X 的 Portable Emscripten SDK 并](http://kripken.github.io/emscripten-site/docs/getting_started/downloads.html)从包含的 README.md 文件中执行以下步骤，我得到了很多我需要的东西：

*   跑 。`/emsdk update`. 这将获取可用工具的最新注册表。
*   运行`./emsdk install latest`。这将下载并安装最新的 SDK 工具。
*   运行`./emsdk activate latest`。这将设置 ~/.emscripten 指向 SDK。

请注意，初始下载很小，但运行上述步骤需要一段时间（大约一个小时，但可能取决于 Internet 速度）并且使用大约 13G 的磁盘空间。

我发现我还需要安装（在 Ubuntu 14.04 LTS 上）：

```
apt-get install nodejs-legacy 
```

可能还需要其他依赖项，希望可以根据您看到的错误消息轻松追踪。

下面是一个简单示例，说明如何构建和运行 C++ 程序：

```
emsdk_portable/emscripten/tag-1.34.8/em++ hello.cpp -o temp.html
chromium-browser --new-window temp.html 
```

# ubuntu - nginx子域

> ID：14902516
> 
> 赞同：2
> 
> 时间：2013-02-15T20:06:11.880
> 
> 标签：ubuntu, nginx, subdomain, config

好的，我似乎无法理解，我已经检查了 nginx 论坛，那里也没有太多帮助。我以为这很简单。我希望定义的子域转到不同的 url/端口。IE

```
DNS site.com goes to 192.168.1.1 w/ masking
DNS www.site.com goes 192.168.1.1 w/ masking
DNS red.site.com goes 192.168.1.1 w/ masking
DNS blue.site.com goes to 192.168.1.1 w/ masking 
```

我希望 site.com 和 www.site.com 正常运行，但我希望 red.site.com 去 192.168.1.2:5000 和 blue.site.com 去 192.168.1.2:6000/temp/

等等等等……我什至不确定我是否关心地址栏中显示的内容，我想如果它保留 red.site.com 会很好，但这并不重要。我已经尝试过代理传递 url 重写，显然我做错了什么。这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T14:38:02.000

您是否尝试过[Proxy pass](http://wiki.nginx.org/HttpProxyModule#proxy_pass)指令？

有类似的东西

```
server {
  server_name red.site.com;

  location  / {
    proxy_pass http://192.168.1.2:5000;
  }
}
server {
  server_name blue.site.com;

  location  / {
    proxy_pass 192.168.1.2:6000/temp/;
  }
} 
```

应该管用。查看文档以了解要转发的标头等内容...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-16T15:05:36.340

根据需要创建尽可能多的虚拟服务器。签入`/etc/nginx/sites-available`并将`default`服务器复制到`red`...（或此处的配置）。然后`/etc/nginx/sites-enabled`去做一个符号链接

```
ln -s ../sites-available/red 
```

并对其他服务器（*蓝色*...）执行相同操作，然后重新启动*nginx*或`killall -HUP nginx`重新加载配置。

基本上在虚拟服务器中，您可以提供特定于该服务器的任何配置。

例如，对于`red`

```
server {
  listen 5000;
  server_name red.site.com;
  root /var/www/docs/red;
  ...
} 
```

或 for `blue`（注意`temp`添加到*root*）

```
server {
  listen 6000;
  server_name blue.site.com;
  root /var/www/docs/somewhere/temp;
  ...
} 
```

如果您还需要指定 IP，请执行

```
 listen 192.168.1.2:5000; 
```

`red`或 6000为`blue`.

一些[解释](http://wiki.nginx.org/HttpCoreModule)指令的文献。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-12T16:34:11.403

如果文件不存在，您应该创建该文件：

> /etc/nginx/conf.d/servers.conf

并用代理设置填充它。例如：

```
server {
    listen 80;
    server_name red.site.com;
    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_connect_timeout 150;
        proxy_send_timeout 100;
        proxy_read_timeout 100;
        proxy_buffers 4 32k;
        client_max_body_size 8m;
        client_body_buffer_size 128k;
    }
} 
```

# php - 向php页面发送数据

> ID：14902518
> 
> 赞同：-1
> 
> 时间：2013-02-15T20:06:18.590
> 
> 标签：php, android, mysql, sqlite

我在处理程序线程内的android服务中使用它来将数据发送到php页面以插入mysql数据库，url没问题但由于某种原因它没有发布到php页面.url在开头被定义为公共字符串班上 。

```
public void onCreate() {
super.onCreate();

// final String mojsadrzaj=new String();

Toast.makeText(this,"Service created ...",Toast.LENGTH_LONG).show();

    final SQLiteDatabase db=openOrCreateDatabase("TruckMe", MODE_PRIVATE, null);
    db.execSQL("create table if not exists lokacije (id INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, lokacija VARCHAR(600));");

    //regulisanje podataka za logovanje samo prvi put

    String idvozaca=new String();
    db.execSQL("create table if not exists vozac (id INTEGER  PRIMARY KEY AUTOINCREMENT NOT NULL, idvozaca VARCHAR(15));");
    Cursor d=db.rawQuery("select idvozaca from vozac", null);
    //db.execSQL("delete from vozac;");

    if(d.getCount() > 0)
    {
        d.moveToLast();
        idvozaca=d.getString(d.getColumnIndex("idvozaca"));
        mojsadrzaj=idvozaca;
        Toast t=Toast.makeText(this, "Id vozaca je : " + mojsadrzaj, Toast.LENGTH_LONG);
        t.setGravity(Gravity.CENTER, 0, 0);
        t.show();
        db.close();

    }

    //regulisanje podataka za logovanje samo prvi put

    final Time t=new Time();

    //Toast.makeText(this,"Stao kod upita" , Toast.LENGTH_LONG).show();

     //deo za thread

     final Handler handler = new Handler();
        final Runnable runnable = new Runnable() {
            public void run() {

                if(indikator != 0)
                {
                try {

                    URL myURL = new URL(url);

                    URLConnection myURLConnection = myURL.openConnection();
                    myURLConnection.connect();
                    Toast.makeText(MyService.this,"saljem na net "+url , Toast.LENGTH_LONG).show();
                } 
                catch (MalformedURLException e) { 
                    // new URL() failed
                    // ...
                } 
                catch (IOException e) {   
                    // openConnection() failed
                    // ...
                }

                }
                indikator=1;
                handler.postDelayed(this, 9000);

            }
        };

    //b.setBackgroundColor(Color.RED);

    //deo koji naknadno ubacujem za kriterijum
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);

    //kraj dela koji sam naknadno ubacio

final   LocationManager m=(LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    //deo koji sam takodje ubacio naknadno
String locationprovider =m.getBestProvider(criteria,true);
//deo koji sam takodje ubacio naknadno kraj

        LocationListener l=new LocationListener() {

                @Override
                public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderEnabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onProviderDisabled(String arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onLocationChanged(Location arg0) {

                    String zauzetost=new String();
                    zauzetost="ZAUZET";

                    String format="MM/dd/yyyy";
                    SimpleDateFormat sdf = new SimpleDateFormat(format,Locale.US);
                    String date= sdf.format(new Date());

                t.setToNow();   

                String longitude=new String();
                String latitude=new String();
                String speed=new String();

                if((int)arg0.getSpeed()==0)
                {
                    speed="0";
                }
                else
                {
                speed=""+(((int)arg0.getSpeed()*3600)/1000);
                }
                longitude=""+  arg0.getLongitude();
                latitude=""+ arg0.getLatitude();

                Calendar cal=Calendar.getInstance();

                url="http://www.compensatemeonline.com/truckmeonline/TruckMeOnline/UnosLokacijaSaTelefona.php?id="+mojsadrzaj+"&longitude="+longitude+"&latitude="+latitude+"&brzina="+speed+"&vreme="+cal.getTime()+"&datum="+date+"&zauzetost="+zauzetost;    

                    // TODO Auto-generated method stub

                }

            };

            // TODO Auto-generated method stub
            //pozivanje threada
             runnable.run();
            //pozivanje threada
            m.requestLocationUpdates(locationprovider, 6000, 0, l);

    //      zamenio sam m.requestLocationUpdates(LocationManager.GPS_PROVIDER, 120000, 0, l); sa m.requestLocationUpdates(locationprovider, 120000, 0, l);
        } 
```

当从活动完成并使用 webview 发布到 php 页面时，所有这些都可以正常工作。但是由于我不能从服务中使用 webview，所以我使用 URL ...，在调用 url 后烘烤的链接很好。这有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:25:31.843

不是使用 URLConnection，而是构造一个`HttpClient`对象，以执行`HttpPost`使用您的目标 url 构造的对象。Jeff Vogella 在第 2.3 节中有一个非常好的例子：[http ://www.vogella.com/articles/ApacheHttpClient/article.html](http://www.vogella.com/articles/ApacheHttpClient/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:59:15.660

我得到了它的工作

```
try {

                    URL myURL = new URL(url);

                    URLConnection myURLConnection = myURL.openConnection();
                    myURLConnection.connect();

                    //
                    BufferedReader in = new BufferedReader(new InputStreamReader(
                            myURLConnection.getInputStream()));
String inputLine;
while ((inputLine = in.readLine()) != null) 
    System.out.println(inputLine);
in.close();

                    //
                    Toast.makeText(MyService.this,"saljem na net "+url , Toast.LENGTH_LONG).show();
                } 
                catch (MalformedURLException e) { 
                    // new URL() failed
                    // ...
                } 
                catch (IOException e) {   
                    // openConnection() failed
                    // ...
                } 
```

# php - 使用未公开的收件人：；在 Swiftmailer 中

> ID：14902519
> 
> 赞同：0
> 
> 时间：2013-02-15T20:06:25.180
> 
> 标签：php, swiftmailer

我正在尝试在密件抄送字段中发送一封包含大量收件人的电子邮件。我正在尝试将 To: 字段设置为，`unknown-recipients:;`但每次尝试时，我都会收到一个错误，即电子邮件不符合正常的电子邮件地址：

```
Fatal error: Uncaught exception 'Swift_RfcComplianceException' with message 'Address in mailbox given [] does not comply with RFC 2822, 3.6.2.' in[...] 
```

有没有办法使用 SwiftMailer 发送给未公开的收件人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:18:57.770

“未公开的收件人”通常被视为垃圾邮件，除非是从您的一位联系人发送的，并且通过使用所有收件人的密件抄送字段 + 您自己的电子邮件（或您不介意显示的任何公共电子邮件）作为收件人字段来实现.

您可以分批发送约 10 个或类似的东西，但很可能使用这种方法，您的电子邮件会以垃圾邮件文件夹结尾。

另一种方法是在循环中为每个订阅者发送一封电子邮件，执行 setTo($user) 和 send()。

# ruby-on-rails - IMGKit 返回损坏的图像

> ID：14902521
> 
> 赞同：1
> 
> 时间：2013-02-15T20:06:38.140
> 
> 标签：ruby-on-rails, windows, imgkit

我在 Rails 3 应用程序的控制器中有以下代码：

```
respond_to do |format|
  format.html
  format.jpeg do
    image = IMGKit.new("http://www.google.com").to_img(:jpg)
    send_data(image, type: "image/jpeg", filename: "data.jpeg", disposition: "inline")
  end
end 
```

我希望当我要求 jpeg 时，我会得到 Google 主页的 jpeg。但是，我得到了一个看起来像[这样](http://i.imgur.com/Zqsfru9.jpg)的图像。我究竟做错了什么？

我在 Windows 7 上， wkhtmltoimage 命令在命令行中运行良好。我有 ruby​​ verion ruby​​ 1.9.3p125 (2012-02-16) [i386-mingw32]。

# sql - 如何选择前面的所有字符串字符。在甲骨文中

> ID：14902524
> 
> 赞同：0
> 
> 时间：2013-02-15T20:06:48.213
> 
> 标签：sql, oracle11g

我正在使用 Oracle 11 G 并拥有以下数据集：

```
12.0
4.2
Version.1
7.9
abc.72 
```

我想在句点之前返回所有字符串字符。为了实现这一目标，我将运行什么样的查询？任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:08:56.597

您可以尝试`instr`和的组合`substr`。

像这样的东西：

```
select substr(field, 1, instr(field, '.') - 1)
  from your_table; 
```

假设`field`总是包含一个`.`字符。

`.`您还可以在没有 a by using的情况下处理字符串`case`，`if`或者在 Oracle 的 SQL 语言实现中使用任何其他类似的有效条件函数。

当然，您总是可以将它放在一个函数上，使其在您的查询中看起来更好。

# java - Java字节码“过多”的dup数被认为是“差”的代码？

> ID：14902525
> 
> 赞同：8
> 
> 时间：2013-02-15T20:06:48.963
> 
> 标签：java, performance, optimization, bytecode

这是一个由两部分组成的问题，但单个部分没有意义。字节码输出中的大量`dup`指令是否表明代码编写不佳？其中 large 由所有字节码指令的某个百分比定义。进一步，如何重写生成`dup`指令的代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T20:13:53.927

我们是在谈论`javac`您正在分析的输出还是您自己的编译器/生成器？如果您从`javac`生成的角度担心 Java 代码的质量，那就别管它了。首先`javac`生成次优字节码并依赖 JVM/JIT 进行所有优化（非常好的选择）。但是，字节码可能比任何一个可以快速想出的东西都要好得多。这类似于询问 C 编译器生成的汇编代码的质量。

如果您自己生成字节码，过多的字节码`dup`可能看起来很糟糕，但也可能不会对性能产生*任何*影响。请记住，字节码在目标机器上被翻译成程序集。JVM 是堆栈机器，但如今大多数架构都是基于寄存器的。使用的事实`dup`只是因为某些字节码指令具有破坏性（读取时从操作数堆栈弹出值）。寄存器不会发生这种情况 - 您可以根据需要多次读取它们。以下面的代码为例：

```
new java/lang/Object
dup
invokespecial java/lang/Object <init> ()V 
```

`dup`必须在这里使用，因为`invokespecial`弹出操作数堆栈的顶部。在调用构造函数后创建一个对象只是为了释放对它的引用听起来是个坏主意。但是在汇编中没有`dup`，没有数据复制和复制。您将只有一个 CPU 注册表指向`java/lang/Object`.

换句话说，次优字节码被即时翻译成“更优”的汇编。只是……不要打扰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:53:14.127

该`dup`指令只是复制操作数堆栈的顶部元素。如果编译器知道它将在相对较短的跨度内多次使用一个值，它可以选择复制该值并将其保存在操作数堆栈中，直到需要为止。

您看到的最常见情况之一`dup`是创建对象并将其存储在变量中时：

```
Foo foo = new Foo(); 
```

运行`javap -c`，你得到以下字节码：

```
0:  new #1; //class Foo
3:  dup
4:  invokespecial   #23; //Method "<init>":()V
7:  astore_1 
```

英文：`new`操作创建`Foo`对象的新实例，并`invokespecial`执行`Foo`构造函数。由于您需要堆栈上的引用来调用构造函数并存储在变量中，因此使用它很有意义`dup`（特别是因为替代方案，存储在变量中然后检索运行 ctor，可能违反 Java记忆模型）。

这是我期望的 Oracle Java 编译器 (1.6)*没有*使用的情况：`dup`

```
int x = 12;

public int bar(int z)
{
    int y = x + x * 3;
    return y + z;
} 
```

我希望编译器`dup`的值为`x`，因为它在表达式中出现多次。相反，重复从对象加载值的代码：

```
0:  aload_0
1:  getfield    #12; //Field x:I
4:  aload_0
5:  getfield    #12; //Field x:I
8:  iconst_3
9:  imul
10: iadd 
```

我会预料到，`dup`因为从对象中检索值相对昂贵（即使在 Hotspot 发挥了魔力之后），而两个堆栈单元可能位于同一缓存行上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:14:17.707

如果您担心`dup`它对性能的影响及其关系，请不要打扰。JVM 进行即时编译，因此它实际上不应该对性能产生任何影响。

就代码质量而言，有两个主要因素会导致 Javac 生成`dup`指令。第一个是对象实例化，这是不可避免的。第二个是表达式中立即数的某些使用。如果您看到很多后面的内容，则可能是质量较差的代码，因为您通常不希望在源代码中出现这样的复杂表达式（它的可读性较差）。

`dup`( `dup_x1`, `dup_x2`, `dup2`, `dup2_x1`, and )的其他版本`dup2_x2`尤其成问题，因为对象实例化不使用这些版本，因此几乎可以肯定意味着后者。当然即使这样也不是什么大问题。这意味着源代码没有应有的可读性。

如果代码不是从 Java 编译的，那么所有的赌注都没有了。指令的存在与否并不能真正告诉您太多，尤其是在编译器执行编译时优化的语言中。

# sharepoint - Sharepoint HTML 电子邮件输出 5;#、4;# 等字符

> ID：14902530
> 
> 赞同：1
> 
> 时间：2013-02-15T20:07:28.520
> 
> 标签：sharepoint, sharepoint-2010, workflow, html-email

我在使用 SharePoint 2010 电子邮件发送时遇到问题。我有一个包含一列（单行文本）的列表，例如值是“Apple”。

我有一个工作流程，当保存新项目并且发出的电子邮件包括 [%Current Item:Apple%] 查找时开始。问题是，当电子邮件到达时，它显示“5;#Apple”。

我发现这个 QA - [Sharepoint HTML Email 为“域\用户名”值输出垃圾字符](https://stackoverflow.com/questions/9464271/sharepoint-html-email-outputs-junk-characters-for-domain-username-values)- 但是使用单行文本您不能修改“返回字段为”，因为它只是一个字符串。

你怎么能删除这个额外的字符，项目的 ID？

谢谢。

添加，因为它可能很重要：源列表是标准列表，但在新项目表单中，您将其与资源字段一起使用，资源列表： http: [//office.microsoft.com/en-us/sharepoint-server- help/enable-reservation-of-resources-in-a-calendar-HA101810595.aspx](http://office.microsoft.com/en-us/sharepoint-server-help/enable-reservation-of-resources-in-a-calendar-HA101810595.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T19:25:38.350

我在研究类似问题时遇到了这篇文章。以下是我最终让它工作的方法：

*   使用数据类型字符串创建一个新的工作流变量。
*   将变量的值设置为 Current Item:Apple（您的 Resources 字段的名称）。
*   在您的电子邮件中使用新变量，这样做时您将有更多选项将字段返回为（我使用“查找值，逗号分隔”，它仅列出了资源的名称）。

# http - tcp 断开时的 Http 会话持久性

> ID：14902533
> 
> 赞同：1
> 
> 时间：2013-02-15T20:07:41.530
> 
> 标签：http, session, tomcat, web-applications, session-cookies

关于`HTTP`会话：它要么通过 cookie 实现，要么通过 URL 重写实现。

由于`HTTP 1.1`使用持久连接，我假设当 TCP 连接断开时会话无效。或不？
我对此感到困惑，因为否则使用 cookie 与 URL 重写的行为将不一样，对吗？我的意思是浏览器不会将 URL 重写的值部分存储到磁盘，对吗？

此外，如果不是，当 tcp 连接重置时，我们如何以编程方式在服务器上使其无效？Tomcat 中是否有这样的监听器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:23:00.613

> 由于 HTTP 1.1 使用持久连接，我假设当 TCP 连接断开时会话无效。或不？

这是错误的。

在 Java 中，会话是通过 cookie 实现的，通常（tomcat、jetty 等）。在第一次响应时从服务器设置一个名为 JSESSIONID=1234567（随机生成并标识会话）的 cookie，然后将其存储在浏览器中，并在每次后续连接时发送回服务器。此 cookie 通常具有 30 分钟的默认生存期，并且在 tcp 连接中断时仍然存在。这允许服务器跨不同连接识别用户。

URL 重写意味着每个 URL 都包含 JSESSIONID 作为 URL 的一部分，在服务器端没有任何变化，除了 JSESSIONID 值是从 URL 而不是从 cookie 中读取的。

如果 tcp 连接关闭后 cookie 丢失了，那就完全没用了。想象一个基于持久 tcp 连接的聊天系统：如果您可以简单地从绑定到套接字的标识符中识别连接，您是否需要 cookie？不... cookie 之所以有用，正是因为您需要跨多个连接跟踪用户。

> 由于 HTTP 1.1 使用持久连接，

它们是持久的，这意味着在第一次请求（html 页面）之后，可以重复使用相同的连接来发送其他资源（图像、css、javascript 等）。并且浏览器会在一段时间后保持连接打开，以避免在用户单击另一个链接时重新创建新连接。这只是一种优化，并不意味着当您在浏览器中打开一个 URL 时，连接会在您停留在同一个网站上的所有时间内保持活动状态。

> 此外，如果不是，当 tcp 连接重置时，我们如何以编程方式在服务器上使其无效？Tomcat 中是否有这样的监听器？

在服务器上，您始终可以使会话调用无效`session.invalidate()`。如果您希望每次发出请求时都使会话无效，那么您根本不需要会话。

Cookie 也可以在客户端通过 javascript 失效。

> 我对此感到困惑，因为否则使用 cookie 与 URL 重写的行为将不一样，对吗？我的意思是浏览器不会将 URL 重写的值部分存储到磁盘，对吗？

URL 重写适用于禁用 cookie 的情况。基本上，每次点击链接时，都会在 url 中附加 JSESSIONID=，这样服务器就会识别用户，后续的所有链接都会在具有相同 JSESSIONID 的服务器上继续生成。这样，每个 POST 或 GET 请求都将包含用户（会话）的标识。

cookie 以相同的方式工作，只是它不是在 URL 上硬编码，而是作为标头信息嵌入到 HTTP 请求中，这是由浏览器自动完成的（除非它已被禁用）。

这并不意味着它会保存在磁盘中（出于什么目的？），它只是将其保存在内存中，用于会话 cookie（当您关闭浏览器或 30 分钟后过期）。

您可以为 cookie 设置更长的生命周期；在这种情况下，浏览器将 cookie 存储更长时间。但通常那些不是“会话cookie”，而是用于识别特定用户的cookie（如UUID）。当同一用户重新连接时，您可以从 UUID cookie 创建一个新的会话 cookie。

会话用于跟踪**CONVERSATION**。用户关闭浏览器，对话结束。如果存在像 UUID 这样的持久 cookie，那么您可以使用该 cookie 创建新会话并将新会话绑定到您之前遇到的同一用户。

# javascript - Css或javascript滚动过渡？

> ID：14902537
> 
> 赞同：6
> 
> 时间：2013-02-15T20:08:09.597
> 
> 标签：javascript, html, css, css-transitions

我有两个 div：

```
width:100%; height:100% 
```

所以我的整个文档的高度为 200%；两个 div 都有一个相互链接，

现在当我点击链接时，我希望网站顺利滑到另一个 div，

我知道这将如何在 jquery 中工作，例如使用 .scrollto，但我的客户想要一个没有框架的应用程序。只有 javascricpt 和 css！

我试图用 translateY 来实现它，但它没有用！

这是一个示例代码：http: [//jsfiddle.net/hSU7R/](http://jsfiddle.net/hSU7R/)

## 的HTML

```
<div class="full" id="one">
   <span style="width:100%; background-color:blue">
   <a href="#two" >Scroll to 2</a>
   </span>    
</div>

<div class="full" id="two">
    <span style="width:100%; background-color:blue">
    <a href="#one" >Scroll to 1</a></span>
</div> 
```

## CSS

```
html,body { 
    width:100%;
    height:100%;}

.full {
    height:100%;
    width:100%;}

#one {background-color:green}
#two {background-color:red} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:26:29.953

这是你要找的吗？[你的 jsFiddle 的一个分支。](http://jsfiddle.net/amullins/hSU7R/17/)

必须有一种更聪明的方法来做到这一点，但这就是我们拥有 jQuery 的原因，对吗？我的基本想法是抓住每个锚点并关闭默认的点击响应。然后，将其替换为启动`setInterval`链的。每次间隔发生时，窗口将根据帧速率和估计的总运行时间递增滚动。实际运行时间似乎比输入时间要长，但它至少为您提供了一种入门方式。

使用 jQuery 的主要缺点是什么？我认为你会从他们的实现中获得更好的性能，因为 jQuery 人一直在处理这些东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T20:29:15.187

您可以使用 css 控制滚动（[速度、方向、位置（？）](https://developer.mozilla.org/fr/docs/Web/CSS/scroll-behavior)）行为。

CSS3 过渡可以指定元素从一个状态到另一个状态的方式，而`scroling`不是`element`. 但是你可以定位`body`.

可能存在“[滚动快照点](http://caniuse.com/#search=scroll-snap-points)”。

> 一种 CSS 技术，允许通过设置定义的捕捉点来自定义滚动体验，例如轮播的分页。

[jsfiddled示例](https://jsfiddle.net/40zkgjfn/)

CSS

```
.gallery {
  font-size: 0;
  margin: auto;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-points-x: repeat(1000px);
  scroll-snap-type: mandatory;
  white-space: nowrap;
  width: 1000px;
}

img {
  width: 100%;
} 
```

HTML

```
<div class="gallery">
  <img alt="" src="http://treehouse-codepen.s3.amazonaws.com/snap-points/1.jpg">
  <img alt="" src="http://treehouse-codepen.s3.amazonaws.com/snap-points/2.jpg">
  <img alt="" src="http://treehouse-codepen.s3.amazonaws.com/snap-points/3.jpg">
  <img alt="" src="http://treehouse-codepen.s3.amazonaws.com/snap-points/4.jpg">
</div> 
```

# ios - 为什么我会收到错误“没有为参数 'certificateIds' 提供值。” 当我在 xcode 中点击更新时

> ID：14902539
> 
> 赞同：7
> 
> 时间：2013-02-15T20:08:11.887
> 
> 标签：ios, xcode, provisioning-profile

我正在尝试在 Xcode 中更新配置文件，并在点击更新按钮时遇到此错误：

![在此处输入图像描述](../Images/fd4af0d068c64244c51eecdca04b66c4.png)

我知道有几篇 SO 帖子* 有人说只需登录开发人员门户即可更新个人资料。但是，如果按钮存在于 Xcode 中，我希望我应该能够使用它。这是 Xcode 中的错误还是我错过了允许它正常工作的设置？

*[即使单击更新按钮后分发配置文件仍然过期，](https://stackoverflow.com/questions/13361526/distribution-provisioning-profile-still-expire-even-after-clicking-the-renew-but)并且 [单击更新 iOS 证书时出错](https://stackoverflow.com/questions/12253618/error-when-clicking-renew-for-ios-certificates)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:18:52.263

这似乎是一个 Xcode 错误。我会去 Developer Portal 并在那里更新配置文件。

[https://developer.apple.com/devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/index.action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:20:33.637

这行得通。我有类似的问题。我只需登录开发中心就可以创建新的配置文件。之后，转到 Xcode 管理器 - 设备 - 配置文件，然后单击屏幕右下角的“刷新”。这将自动下载新的配置文件。如果您有问题，您可能需要从供应门户和 XCode 中手动删除过期的配置文件。

# php - 如何将百分比（例如 25%）简化为简单的陈述（例如 4 个中的 1 个）？

> ID：14902544
> 
> 赞同：2
> 
> 时间：2013-02-15T20:08:31.043
> 
> 标签：php, numbers, number-formatting, percentage

我需要将一组数字和总数转换为一个简单的语句。

例如，如何通过 PHP 以编程方式将以下内容转换为简单的语句，如 , `1 out of 10`，`1 out of 100`甚至舍入一些语句（如`2 out of 100`9000,400000）。

生成样本数组：

```
$arr = array();
for ($i=0; $i < 100; $i++) {
    $n = mt_rand(1,1000);
    $t = mt_rand(10,100000);
    if ($n > $t) continue; // skip!
    $arr[] = array($n,$t);
}
/*
// Generates pairs like:
// Array
// (
//     [0]  => Array ( [0] => 55  [1] => 8774  )
//     [1]  => Array ( [0] => 814 [1] => 11174 )
//     [2]  => Array ( [0] => 255 [1] => 32168 )
//     ...
//     [99] => Array ( [0] => 851 [1] => 24231 )
// )
*/ 
```

运行一个函数并打印简化的结果：

```
foreach ($arr as $a) {
    echo $a[0] . '/' . $a[1] . ' ==> ' . simplifyRatio($a[0],$a[1]) . "\r\n";
} 
```

你能指出我如何做到这一点的正确方向吗？

这是我正在处理的功能的开始，但解决方案正在逃避我。

```
function simplifyRatio($n,$t) {
    $p = $n/$t;
    if ($p > 0.09) return round($n) . ' out of ' . round($t);
    if ($p > 0.009) return round($n) . ' out of ' . round($t);
} 
```

理想情况下，分母应该是：`1,2,3...10,20,30...100,200,300...1000,2000,3000...10000,20000,30000...100000 (max)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:13:02.227

假设总是一个百分比。您可能还想在显示之前[sprintf](http://php.net/manual/en/function.sprintf.php) `$outof`

```
function convertPercent($iPercent)
{
  // Assume validation on $iPercent
  $outof = round(100 / $iPercent);
  return "1 out of $outof";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:32:41.640

为简单起见，我假设您可以得到分数（即 25% 是 25/100、0.7% = 7/1000 等）。

您可以使用欧几里得算法找到分子和分母的 GCD： [http ://en.wikipedia.org/wiki/Euclidean_algorithm](http://en.wikipedia.org/wiki/Euclidean_algorithm)

在 php 中，它看起来像这样：

```
function gcd ($int1, $int2) {
    $tmp = 0;
    while ($int1 > 0) {
        $tmp = $int1;
        $int1 = $int2 % $int1;
        $int2 = $tmp;
    }
    return $int2;
} 
```

只要 $int1 和 $int2 是大于 0 的整数，这将起作用（您可能需要输入一些逻辑来确保这一点）。如果你需要负数，就取绝对值。

了解了 GCD，剩下的就很容易弄清楚了：

```
function reduce($numerator, $denominator) {
    $gcd = gcd($numerator, $denominator);
    echo ($numerator/$gcd) . " out of " . ($denominator/$gcd);
}
echo reduce(4, 8).'<br>'; // 1 out of 2
echo reduce(38, 897).'<br>'; // 38 out of 897
echo reduce(39, 26).'<br>'; // 3 out of 2 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:55:38.343

我最终决定在 pattern 上接近匹配`1 out of ___`，如下所示：

```
function simplifyRatio($n,$t) {
    $r = $t/$n;
    return '1 out of ' . round($r);
}

// Examples:
$arr = array();
for ($i=0; $i < 100; $i++) {
    $n = mt_rand(1,1000);
    $t = mt_rand(10,100000);
    if ($n > $t) continue; // skip!
    $arr[] = array($n,$t);
}
foreach ($arr as $a) {
    echo $a[0] . '/' . $a[1] . ' ==> ' . simplifyRatio($a[0],$a[1]) . "\r\n";
} 
```

示例结果：

```
1000/24819 ==> 1 out of 25
309/50305 ==> 1 out of 163
488/99123 ==> 1 out of 203
322/47610 ==> 1 out of 148
183/54287 ==> 1 out of 297
752/67646 ==> 1 out of 90
240/68854 ==> 1 out of 287
301/81345 ==> 1 out of 270
611/16404 ==> 1 out of 27
522/62992 ==> 1 out of 121 
```

[键盘： http](http://codepad.org/wu6iOdDq) ://codepad.org/wu6iOdDq

最初我希望以四舍五入的分母结束（10,20...100,200...1000,2000 等），但我不确定如何做好。我会很高兴地奖励一个清理上述分母的答案。

# javascript - JavaScript 中的替换函数

> ID：14902547
> 
> 赞同：0
> 
> 时间：2013-02-15T20:08:50.543
> 
> 标签：javascript, function

这可以用更好的形式重写吗？

```
function F() { return F.f(); } //wrapping :(
F.f = function() { /* code1 */ }
F.g = function() { /* code2 */ }

F.f = some_other_function
F.g() //this still works :D 
```

我永远不会创建 F 的任何实例。我只是将它用作一种命名空间。
我尝试执行以下操作，但 Fg 没有得到保留（我可以理解原因，但我想要一个很好的解决方法，能够更改 F 的代码和行为，但不能更改 Fg 之类的绑定）：

```
function F() { /* code1 */ } //no wrapping :D, no need for F.f
F.g = function() { /* code2 */ }

F = some_other_function
F.g() //this points to nowhere now :( 
```

编辑：我不想再使用 Ff 作为`code1`.

EDIT2：第一段代码是有效的 JS 并且具有我想要的行为。问题是我不喜欢我必须使用 Ff 。我想像第二个代码那样做，但仍然有 Fg 工作。
在运行时的某个时刻，我想更改`code1`并保持其他所有内容不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:10:58.843

```
var F = {
    f: function() {
        /* code1 */
    },
    g: function() {
        /* code2 */
    }
 };

F.f = function() { /* redefine F.f() */ }
// or
delete F.f;

F.g(); // still works 
```

-

## 更新了问题澄清的答案

这是实现此目的的一种方法，尽管整个想法有点偏离。不知道为什么你会想要这种模式。

```
function generate() {
    var f = function() {
        /* code1 */
    };

    var ret_val = function() {
        f();
    };

    ret_val.g = function() {
        /* code2 */
    };

    ret_val.setBehaviour = function(new_func) {
        f = new_func;
    };
}

F = generate();

F(); /* code1 */
F.g(); /* code2 */

F.setBehaviour(function() { /* redefine F() */ });
F.g(); /* code2 still works */

F(); /* new behaviour */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:21:48.800

关于什么：

```
var F = (function() {
  console.log("Something..");

  return function() {
    function g() {
      console.log("I'm G!");
    }
  };
})();

F.g(); 
```

现在你可以初始化一些东西（看起来就像你想要的那样）并保留 Fg

# function - 函数导数

> ID：14902550
> 
> 赞同：1
> 
> 时间：2013-02-15T20:09:06.297
> 
> 标签：function, wolfram-mathematica, derivative

我想写一个 Mathematica 函数，它接受一个表达式作为参数，取那个表达式的导数，然后对表达式做一些事情。所以（作为一个玩具例子）我想写

```
F[f_] = D[f, x] * 2 
```

以便

```
F[x^2] = 4x 
```

相反，我得到

```
F[x^2] = 0 
```

有人可以指点我相关的文档吗？我花了一些时间浏览 Mathematica 参考资料，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T21:05:26.170

`=`当您打算使用延迟分配时，您已经使用了分配`:=`。当您`F[f_]=D[f,x]*2`使用（非延迟）赋值进行评估时，Mathematica 会查看`D[f,x]`并看到`f`（未分配的符号）不依赖于`x`; 因此，它的导数是 0。因此，`F[f_]=0`对于 的任何参数`F`，它都是稍后返回的。

如果您只想`F`在指定`f_`应该是什么之后才进行评估，则需要通过替换为来使用延迟`=`分配`:=`。

# c - getnameinfo 的签名在 glibc 版本之间发生变化，我该如何匹配？

> ID：14902553
> 
> 赞同：5
> 
> 时间：2013-02-15T20:09:18.337
> 
> 标签：c, linux, gcc, posix

我需要匹配调用[getnameinfo](http://pubs.opengroup.org/onlinepubs/009604599/functions/getnameinfo.html)的签名，以便我可以围绕该调用编写一个包装器。不幸的是，主机之间的签名会发生变化。

在我尝试在最新的 CentOS 6.3 上进行编译之前，事情一直在工作并找到，这给出了错误：

```
error: conflicting types for 'getnameinfo' 
```

嗯？

事实证明，最后一个参数 flags 在 CentOS (glibc-headers-2.12-1.80) 上被列为 unsigned int，但在 Fedora (glibc-headers-2.15-58) 上只是一个 int。（请注意，两台主机上的手册页都说它应该是一个 int。）

```
extern int getnameinfo ( /*cut*/, unsigned int __flags); 
```

对比

```
extern int getnameinfo ( /*cut*/, int __flags); 
```

一些搜索让我相信[标准已经改变](http://marc.info/?l=netbsd-tech-net&m=102208795729161)了 flags 参数的类型。

看起来我需要更改函数中的标志类型以匹配主机的定义。处理这个问题的最佳方法是什么？这是一个自动配置类型的问题还是有一些更简单的解决方案？我希望编译器（gcc）有一些我可以利用的宏，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:21:22.760

您可以检查`__GLIBC_MINOR__`定义的宏`features.h`并相应地传递参数，例如：

```
#include <features.h>

#if __GLIBC_MINOR__ > 12 
    getnameinfo(..., flags);
#else 
    getnameinfo(..., (unsigned) flags);
#endif 
```

# php - FastCGI 进程超过了配置的活动超时

> ID：14902554
> 
> 赞同：46
> 
> 时间：2013-02-15T20:09:21.493
> 
> 标签：php, runtime-error

我有一个我构建的函数，它将获取一个 .csv 文件并上传然后声明的信息，为 .csv 文件中的每个用户创建一个帐户。

我的问题是我需要能够使用 .csv 文件中的数千个条目来执行此操作，但我的问题是我得到这个超时错误并且不知道为什么，如下所示：

```
HTTP Error 500.0 - Internal Server Error
c:\php-fastcgi\php-cgi.exe - The FastCGI process exceeded configured activity 
                             timeout
Detailed Error Information

Module -
FastCgiModule

Notification - 
ExecuteRequestHandler

Handler - 
PHP_via_FastCGI

Error Code -
0x80070102 
```

这是我的 CSV 函数：

[http://jsfiddle.net/fS4t4/](http://jsfiddle.net/fS4t4/) - 这是在 PHP 中，我只是把它扔到 javascript 部分。

如何解决这个问题？

更新：我的提供商是 Winhost

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-09-26T10:59:24.730

`activityTimeout`也可以从服务器/IIS/FastCGI Settings/Edit 下的 IIS 管理器中设置（IIS7 及更高版本）。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-15T20:16:10.973

转到`%windir%\system32\inetsrv\fcgiext.ini`并找到ActivityTimeout参数；将其复制到 [php] 部分。将参数更改为您想要的任何值，并确保它没有被注释掉。重新启动 IIS，你应该很好。

`activityTimeout`也可以从服务器/IIS/FastCGI Settings/Edit 下的 IIS 管理器中设置（IIS7 及更高版本）。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2016-03-02T19:14:26.050

对于**IIS 7.5**，您可以更改文件的设置

**C:\Windows\System32\inetsrv\config\applicationHost.config**

并找到下面的行并根据您的要求进行更改

```
<fastCgi>
    <application fullPath="C:\PHP\php-cgi.exe" idleTimeout="900" activityTimeout="180" requestTimeout="10000" instanceMaxRequests="10000" />
</fastCgi> 
```

不要忘记重新启动服务器

**或者** 这也可以从 UI 完成：

打开 InetMgr（window+R 输入 Inetmgr 并回车） [![从运行命令打开 inet 管理器](../Images/9691c6e08fabed44b4191167a5f85b09.png)](https://i.stack.imgur.com/Fv8Kt.jpg)

[![在 inet 管理器中过滤快速 CGI](../Images/3126cf22fa08672cd9d2e4b911f158bc.png)](https://i.stack.imgur.com/vAz9Z.jpg)

[![双击或单击编辑 fastcgi](../Images/857cad325cc9376c099880543d410d77.png)](https://i.stack.imgur.com/vDFJi.jpg)

[![修改 fastcgi 设置](../Images/ad8dbba6e76b543349a16404fabe5edb.png)](https://i.stack.imgur.com/OGeVl.jpg)

[![在此处输入图像描述](../Images/1af7a788f620f9c7d16186b43bd29310.png)](https://i.stack.imgur.com/CHAPf.jpg)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-09-23T03:46:28.190

对于 Windows Server 2008 R2，提供的默认 IIS 版本是 IIS 7.5。Dave 建议的[解决方案](https://stackoverflow.com/a/14902642/1091386)将不起作用，因为该文件不存在。

相反，请尝试`%windir%\system32\inetsrv\config\applicationHost.config`为整个服务器设置选项。看`<fastCgi>`块：

```
<fastCgi>
    <application fullPath = "C:\php\php-cgi.exe" arguments = "" 
        monitorChangesTo = "" stderrMode = "ReturnStdErrIn500" maxInstances = "4"
        idleTimeout = "300" activityTimeout = "30" requestTimeout = "90" 
        instanceMaxRequests = "5000" protocol = "NamedPipe" queueLength = "1000" 
        flushNamedPipe = "false" rapidFailsPerMinute = "10">
        <environmentVariables>
            <environmentVariable name="PHP_MAX_REQUESTS" value="5000" />
        </environmentVariables>
    </application>
</fastCgi> 
```

请记住重新启动您的网络服务器。

我将其设置`activityTimeout`为 90 和`requestTimeout`270，以便让进程有更多时间完成工作。这对我的问题来说还不够，但它至少应该允许人们在 IIS 7.5 上找到相关位。

# c - 如何正确显示来自 USB 设备的值 [ansi c]

> ID：14902555
> 
> 赞同：1
> 
> 时间：2013-02-15T20:09:35.317
> 
> 标签：c, variables, integer

`printf("%d, ", packet[i]);`

如何正确显示变量。它应该是从 0 到 255 但如果我使用`%d`它会打印：

-1 为 255

最多数字 128 正确显示，较大的是负数。

当我使用`%u`它时打印 4294967295 而不是 255。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:11:38.963

使用`%hhu`转换规范：

```
printf("%hhu, ", packet[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:04:52.750

如果您正在打印字节，您还可以考虑使用 %02X 打印十六进制

# xpages - 扩展库演示数据库中的错误

> ID：14902562
> 
> 赞同：0
> 
> 时间：2013-02-15T20:10:00.420
> 
> 标签：xpages, xpages-extlib

当我尝试显示 xpage 扩展库演示中的页面时出现错误。

找不到标签版本为 8.5.32001 的库“com.ibm.xsp.extlib.library”，以供页面 /Core_Dialog.xsp 使用。库标签版本为空。

如果我在同一台服务器上的自己的数据库中使用扩展库控件，那么它们可以正常工作。事实上，我在大多数应用程序的欢迎页面上都会显示版本号。它显示 ExtLib 版本：8.5.3.20111208-0717

知道为什么deo不起作用吗？

我已经下载了演示的最新副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:17:40.503

如果您使用最新的演示副本，您还需要使用最新版本的 ExtLib，即 20121217。

# scala - 如何从 QueryString 返回的列表中获取字符串值？

> ID：14902569
> 
> 赞同：1
> 
> 时间：2013-02-15T20:10:40.967
> 
> 标签：scala, playframework

Play!/Scala 上的新手问题：如何将字符串存储在**result**中？

```
object App extends Application {
  def route = {
    case GET(Path("/feed/geocodeo")) & QueryString(qs) => Action{ request=>
      val result = QueryString(qs,"latlng").getOrElse("40.714224,-73.961452")
      val response = WS.url("http://maps.googleapis.com/maps/api/geocode/json?latlng="+result.toString+"&sensor=false").get()
      val body = response.value.get.body
      Ok(body).as("text/html")
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:26:19.583

如果 QueryString 返回 List[String]，那么您的代码不应编译。

```
scala> List("hi","bye").getOrElse("whatever")
<console>:8: error: value getOrElse is not a member of List[java.lang.String]
              List("hi","bye").getOrElse("whatever")
                               ^ 
```

你的代码编译了吗？如果是这样，QueryString 是具有 getOrElse 方法的东西，结果是最具体的 String 超类以及 QueryString 返回的任何内容。

通常你会在 an 上调用 getOrElse `Option[Something]`，并且传递给 getOrElse 的对象应该具有相同的类型，`Something`否则你将返回一个类型不会有用的对象。

# c# - 使用 BookSleeve 的 ConnectionUtils.Connect() 将 SignalR 与 Redis 消息总线故障转移一起使用

> ID：14902572
> 
> 赞同：113
> 
> 时间：2013-02-15T20:10:48.853
> 
> 标签：c#, signalr, failover, booksleeve

我正在尝试使用 SignalR 应用程序创建 Redis 消息总线故障转移方案。

起初，我们尝试了一个简单的硬件负载平衡器故障转移，它只是监控两个 Redis 服务器。SignalR 应用程序指向单个 HLB 端点。然后，我在一台服务器上失败了，但在没有回收 SignalR 应用程序池的情况下，无法在第二台 Redis 服务器上成功获取任何消息。大概这是因为它需要向新的 Redis 消息总线发出设置命令。

从 SignalR RC1 开始，`Microsoft.AspNet.SignalR.Redis.RedisMessageBus`使用 Booksleeve`RedisConnection()`连接到单个 Redis 以进行发布/订阅。

我创建了一个新类，`RedisMessageBusCluster()`它使用 Booksleeve`ConnectionUtils.Connect()`连接到 Redis 服务器集群中的一个。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;
using BookSleeve;
using Microsoft.AspNet.SignalR.Infrastructure;

namespace Microsoft.AspNet.SignalR.Redis
{
    /// <summary>
    /// WIP:  Getting scaleout for Redis working
    /// </summary>
    public class RedisMessageBusCluster : ScaleoutMessageBus
    {
        private readonly int _db;
        private readonly string[] _keys;
        private RedisConnection _connection;
        private RedisSubscriberConnection _channel;
        private Task _connectTask;

        private readonly TaskQueue _publishQueue = new TaskQueue();

        public RedisMessageBusCluster(string serverList, int db, IEnumerable<string> keys, IDependencyResolver resolver)
            : base(resolver)
        {
            _db = db;
            _keys = keys.ToArray();

            // uses a list of connections
            _connection = ConnectionUtils.Connect(serverList);

            //_connection = new RedisConnection(host: server, port: port, password: password);

            _connection.Closed += OnConnectionClosed;
            _connection.Error += OnConnectionError;

            // Start the connection - TODO:  can remove this Open as the connection is already opened, but there's the _connectTask is used later on
            _connectTask = _connection.Open().Then(() =>
            {
                // Create a subscription channel in redis
                _channel = _connection.GetOpenSubscriberChannel();

                // Subscribe to the registered connections
                _channel.Subscribe(_keys, OnMessage);

                // Dirty hack but it seems like subscribe returns before the actual
                // subscription is properly setup in some cases
                while (_channel.SubscriptionCount == 0)
                {
                    Thread.Sleep(500);
                }
            });
        }

        protected override Task Send(Message[] messages)
        {
            return _connectTask.Then(msgs =>
            {
                var taskCompletionSource = new TaskCompletionSource<object>();

                // Group messages by source (connection id)
                var messagesBySource = msgs.GroupBy(m => m.Source);

                SendImpl(messagesBySource.GetEnumerator(), taskCompletionSource);

                return taskCompletionSource.Task;
            },
            messages);
        }

        private void SendImpl(IEnumerator<IGrouping<string, Message>> enumerator, TaskCompletionSource<object> taskCompletionSource)
        {
            if (!enumerator.MoveNext())
            {
                taskCompletionSource.TrySetResult(null);
            }
            else
            {
                IGrouping<string, Message> group = enumerator.Current;

                // Get the channel index we're going to use for this message
                int index = Math.Abs(group.Key.GetHashCode()) % _keys.Length;

                string key = _keys[index];

                // Increment the channel number
                _connection.Strings.Increment(_db, key)
                                   .Then((id, k) =>
                                   {
                                       var message = new RedisMessage(id, group.ToArray());

                                       return _connection.Publish(k, message.GetBytes());
                                   }, key)
                                   .Then((enumer, tcs) => SendImpl(enumer, tcs), enumerator, taskCompletionSource)
                                   .ContinueWithNotComplete(taskCompletionSource);
            }
        }

        private void OnConnectionClosed(object sender, EventArgs e)
        {
            // Should we auto reconnect?
            if (true)
            {
                ;
            }
        }

        private void OnConnectionError(object sender, BookSleeve.ErrorEventArgs e)
        {
            // How do we bubble errors?
            if (true)
            {
                ;
            }
        }

        private void OnMessage(string key, byte[] data)
        {
            // The key is the stream id (channel)
            var message = RedisMessage.Deserialize(data);

            _publishQueue.Enqueue(() => OnReceived(key, (ulong)message.Id, message.Messages));
        }

        protected override void Dispose(bool disposing)
        {
            if (disposing)
            {
                if (_channel != null)
                {
                    _channel.Unsubscribe(_keys);
                    _channel.Close(abort: true);
                }

                if (_connection != null)
                {
                    _connection.Close(abort: true);
                }                
            }

            base.Dispose(disposing);
        }
    }
} 
```

Booksleeve 有自己的机制来确定主服务器，并且会自动故障转移到另一台服务器，现在正在使用`SignalR.Chat`.

在`web.config`中，我设置了可用服务器列表：

```
<add key="redis.serverList" value="dbcache1.local:6379,dbcache2.local:6379"/> 
```

然后在`Application_Start()`：

```
 // Redis cluster server list
        string redisServerlist = ConfigurationManager.AppSettings["redis.serverList"];

        List<string> eventKeys = new List<string>();
        eventKeys.Add("SignalR.Redis.FailoverTest");
        GlobalHost.DependencyResolver.UseRedisCluster(redisServerlist, eventKeys); 
```

我添加了两个额外的方法`Microsoft.AspNet.SignalR.Redis.DependencyResolverExtensions`：

```
public static IDependencyResolver UseRedisCluster(this IDependencyResolver resolver, string serverList, IEnumerable<string> eventKeys)
{
    return UseRedisCluster(resolver, serverList, db: 0, eventKeys: eventKeys);
}

public static IDependencyResolver UseRedisCluster(this IDependencyResolver resolver, string serverList, int db, IEnumerable<string> eventKeys)
{
    var bus = new Lazy<RedisMessageBusCluster>(() => new RedisMessageBusCluster(serverList, db, eventKeys, resolver));
    resolver.Register(typeof(IMessageBus), () => bus.Value);

    return resolver;
} 
```

现在的问题是，当我启用了多个断点时，直到添加了用户名之后，然后禁用所有断点，应用程序才能按预期工作。但是，从一开始就禁用断点，在连接过程中似乎有一些竞争条件可能会失败。

因此，在`RedisMessageCluster()`：

```
 // Start the connection
    _connectTask = _connection.Open().Then(() =>
    {
        // Create a subscription channel in redis
        _channel = _connection.GetOpenSubscriberChannel();

        // Subscribe to the registered connections
        _channel.Subscribe(_keys, OnMessage);

        // Dirty hack but it seems like subscribe returns before the actual
        // subscription is properly setup in some cases
        while (_channel.SubscriptionCount == 0)
        {
            Thread.Sleep(500);
        }
    }); 
```

我尝试添加一个`Task.Wait`，甚至一个附加的`Sleep()`（上面未显示）-它们正在等待/等，但仍然出现错误。

重复出现的错误似乎在`Booksleeve.MessageQueue.cs`~ln 71 中：

```
A first chance exception of type 'System.InvalidOperationException' occurred in BookSleeve.dll
iisexpress.exe Error: 0 : SignalR exception thrown by Task: System.AggregateException: One or more errors occurred. ---> System.InvalidOperationException: The queue is closed
   at BookSleeve.MessageQueue.Enqueue(RedisMessage item, Boolean highPri) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\MessageQueue.cs:line 71
   at BookSleeve.RedisConnectionBase.EnqueueMessage(RedisMessage message, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\RedisConnectionBase.cs:line 910
   at BookSleeve.RedisConnectionBase.ExecuteInt64(RedisMessage message, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\RedisConnectionBase.cs:line 826
   at BookSleeve.RedisConnection.IncrementImpl(Int32 db, String key, Int64 value, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\IStringCommands.cs:line 277
   at BookSleeve.RedisConnection.BookSleeve.IStringCommands.Increment(Int32 db, String key, Int64 value, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\IStringCommands.cs:line 270
   at Microsoft.AspNet.SignalR.Redis.RedisMessageBusCluster.SendImpl(IEnumerator`1 enumerator, TaskCompletionSource`1 taskCompletionSource) in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Redis\RedisMessageBusCluster.cs:line 90
   at Microsoft.AspNet.SignalR.Redis.RedisMessageBusCluster.<Send>b__2(Message[] msgs) in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Redis\RedisMessageBusCluster.cs:line 67
   at Microsoft.AspNet.SignalR.TaskAsyncHelper.GenericDelegates`4.<>c__DisplayClass57.<ThenWithArgs>b__56() in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Core\TaskAsyncHelper.cs:line 893
   at Microsoft.AspNet.SignalR.TaskAsyncHelper.TaskRunners`2.<>c__DisplayClass42.<RunTask>b__41(Task t) in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Core\TaskAsyncHelper.cs:line 821
   --- End of inner exception stack trace ---
---> (Inner Exception #0) System.InvalidOperationException: The queue is closed
   at BookSleeve.MessageQueue.Enqueue(RedisMessage item, Boolean highPri) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\MessageQueue.cs:line 71
   at BookSleeve.RedisConnectionBase.EnqueueMessage(RedisMessage message, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\RedisConnectionBase.cs:line 910
   at BookSleeve.RedisConnectionBase.ExecuteInt64(RedisMessage message, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\RedisConnectionBase.cs:line 826
   at BookSleeve.RedisConnection.IncrementImpl(Int32 db, String key, Int64 value, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\IStringCommands.cs:line 277
   at BookSleeve.RedisConnection.BookSleeve.IStringCommands.Increment(Int32 db, String key, Int64 value, Boolean queueJump) in c:\Projects\Frameworks\BookSleeve-1.2.0.5\BookSleeve\IStringCommands.cs:line 270
   at Microsoft.AspNet.SignalR.Redis.RedisMessageBusCluster.SendImpl(IEnumerator`1 enumerator, TaskCompletionSource`1 taskCompletionSource) in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Redis\RedisMessageBusCluster.cs:line 90
   at Microsoft.AspNet.SignalR.Redis.RedisMessageBusCluster.<Send>b__2(Message[] msgs) in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Redis\RedisMessageBusCluster.cs:line 67
   at Microsoft.AspNet.SignalR.TaskAsyncHelper.GenericDelegates`4.<>c__DisplayClass57.<ThenWithArgs>b__56() in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Core\TaskAsyncHelper.cs:line 893
   at Microsoft.AspNet.SignalR.TaskAsyncHelper.TaskRunners`2.<>c__DisplayClass42.<RunTask>b__41(Task t) in c:\Projects\Frameworks\SignalR\SignalR.1.0RC1\SignalR\src\Microsoft.AspNet.SignalR.Core\TaskAsyncHelper.cs:line 821<---

public void Enqueue(RedisMessage item, bool highPri)
{
    lock (stdPriority)
    {
        if (closed)
        {
            throw new InvalidOperationException("The queue is closed");
        } 
```

抛出封闭队列异常的地方。

我预见到另一个问题：由于建立了 Redis 连接，`Application_Start()`因此在“重新连接”到另一台服务器时可能会出现一些问题。但是，我认为这在使用单数时是有效的`RedisConnection()`，因为只有一个连接可供选择。但是，`ConnectionUtils.Connect()`我想听听`@dfowler`其他 SignalR 人员的介绍，了解如何在 SignalR 中处理这种情况。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-24T12:43:51.460

SignalR 团队现在已经使用 StackExchange.Redis 实现了对自定义连接工厂的支持，后者是[BookSleeve](https://github.com/StackExchange/StackExchange.Redis)的继承者，它通过 ConnectionMultiplexer 支持冗余 Redis 连接。

最初遇到的问题是，尽管我在 BookSleeve 中创建了自己的扩展方法来接受服务器集合，但无法进行故障转移。

现在，随着 BookSleeve 演变为 StackExchange.Redis，我们现在可以在初始化时[配置](https://github.com/StackExchange/StackExchange.Redis/blob/master/Docs/Configuration.md)服务器/端口的集合。`Connect`

在创建方法方面，新实现比我走的路要简单得多`UseRedisCluster`，并且后端管道现在支持真正的故障转移：

```
var conn = ConnectionMultiplexer.Connect("redisServer1:6380,redisServer2:6380,redisServer3:6380,allowAdmin=true"); 
```

StackExchange.Redis 还允许进行额外的手动配置，如`Automatic and Manual Configuration`文档部分所述：

```
ConfigurationOptions config = new ConfigurationOptions
{
    EndPoints =
    {
        { "redis0", 6379 },
        { "redis1", 6380 }
    },
    CommandMap = CommandMap.Create(new HashSet<string>
    { // EXCLUDE a few commands
        "INFO", "CONFIG", "CLUSTER",
        "PING", "ECHO", "CLIENT"
    }, available: false),
    KeepAlive = 180,
    DefaultVersion = new Version(2, 8, 8),
    Password = "changeme"
}; 
```

本质上，使用一组服务器初始化我们的 SignalR 横向扩展环境的能力现在解决了最初的问题。

# javascript - 无法使用 jquery 和 ajax 访问另一个域的有效 json

> ID：14902575
> 
> 赞同：2
> 
> 时间：2013-02-15T20:11:01.903
> 
> 标签：javascript, jquery, ajax, json

我正在尝试访问某个面向成人的网站的 JSON api，但无法正常工作。这是 jsfiddle： http: [//jsfiddle.net/SSqwd/](http://jsfiddle.net/SSqwd/)这是代码：

```
$.ajax({url: 'http://api.redtube.com/?data=redtube.Videos.searchVideos&search=sex&thumbsize=big&page=1&output=json&callback=?',
    dataType: 'json',
    success: function(data) {
        console.log(data);
    }
}); 
```

我明白了

Uncaught SyntaxError: Unexpected token :

即使当我自己浏览页面并检查 jsonlint 上的 json 时，它也是完全有效的。

这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:53:59.050

由于您指定了跨域请求，jQuery 将默认尝试使用 JSONP 请求该 URL，即使您仅将 dataType 设置为 JSON。所以实际发生的是将以下脚本标签添加到 DOM 中：

```
<script src="http://api.redtube.com/?data=redtube.Videos.searchVideos&search=sex&thumbsize=big&page=1&output=json&callback=?" type="text/javascript"></script> 
```

（ ? 实际上被替换为 jQuery 生成的函数名）

然后，您的浏览器会尝试执行返回的数据。但是，由于它实际上不是 JSONP，而只是纯 JSON，因此它返回的是无效的 javascript，因此您会收到语法错误。

您只需使用以下命令即可重现相同的错误：

```
<script src="http://api.redtube.com/?data=redtube.Videos.searchVideos&search=sex&thumbsize=big&page=1&output=json&callback=?" type="text/javascript"></script> 
```

并且什么都不做。或者您可以从该 URL 复制并粘贴响应并将其包装在脚本标签中，您将得到相同的错误。

解决此错误的唯一方法是使用支持 JSONP 的 API 或实现一种通过您自己的服务器在同一域上请求数据的代理。

# mysql - 使用聚合函数从查询中选择非组字段

> ID：14902580
> 
> 赞同：1
> 
> 时间：2013-02-15T20:11:25.613
> 
> 标签：mysql, sql, aggregate-functions

我有一个`tbl`包含三列的表：

```
id | fk | dateof
 1 |  1 | 2012-01-01
 2 |  1 | 2012-01-02
 3 |  2 | 2012-02-01
 4 |  2 | 2012-03-01
 5 |  3 | 2012-04-01 
```

`id`是行的 ID，`fk`是另一个表的外键，`dateof`是日期列。

我想要`id`的是获得`dateof`最新分组的位置`fk`。我试过的：

```
SELECT id, MAX(dateof) FROM tbl GROUP BY fk 
```

但我得到这样的结果：

```
1 | 2012-01-02
3 | 2012-03-01
5 | 2012-04-01 
```

当我想要：

```
2 | 2012-01-02
4 | 2012-03-01
5 | 2012-04-01 
```

如何查询并获得我正在寻找的结果？MySQL服务器如果重要的话。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:13:54.877

我个人会做

```
SELECT id, tbl.dateof dateof
FROM tbl 
INNER JOIN
 (SELECT fk, MAX(dateof) dateof 
  FROM tbl 
  GROUP BY fk) temp
ON tbl.fk = temp.fk AND tbl.dateof = temp.dateof 
```

Gordon 的回答是正确的并且代码更少，但我更喜欢创建一个临时表。其他开发人员更清楚我在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:14:11.890

要得到你想要的：

```
select t.*
from (select tbl.*,
             row_number() over (partition by fk order by dateof desc) as seqnum
      from tbl
     ) t
where seqnum = 1 
```

这假设您正在使用具有窗口函数的合理数据库。您没有在问题中指定数据库。

# asp.net-mvc-4 - 不显眼的验证不适用于动态内容

> ID：14902581
> 
> 赞同：101
> 
> 时间：2013-02-15T20:11:26.253
> 
> 标签：asp.net-mvc-4, unobtrusive-validation

我在尝试让不显眼的 jquery 验证与通过 AJAX 调用动态加载的局部视图一起工作时遇到问题。

我花了好几天的时间试图让这段代码正常工作，但没有成功。

这是视图：

```
@model MvcApplication2.Models.test

@using (Html.BeginForm())
{
 @Html.ValidationSummary(true);
 <div id="res"></div>
 <input id="submit" type="submit" value="submit" />
} 
```

部分观点：

```
@model MvcApplication2.Models.test

@Html.TextAreaFor(m => m.MyProperty);
@Html.ValidationMessageFor(m => m.MyProperty);

<script type="text/javascript" >
  $.validator.unobtrusive.parse(document);
</script> 
```

该模型：

```
 public class test
  {
    [Required(ErrorMessage= "required field")]
    public int MyProperty { get; set; }
  } 
```

控制器：

```
 public ActionResult GetView()
    {
        return PartialView("Test");
    } 
```

最后，javascript：

```
$(doument).ready(function () {
$.ajax({
    url: '/test/getview',
    success: function (res) {

        $("#res").html(res);
        $.validator.unobtrusive.parse($("#res"));
    }
});

$("#submit").click(function () {
    if ($("form").valid()) {
        alert('valid');
        return true;
    } else {
        alert('not valid');
        return false;
    }
}); 
```

验证不起作用。即使我没有在 texbox 中填写任何信息，提交事件也会显示警报（“有效”）。

但是，如果我不是动态加载视图，而是`@Html.Partial("test", Model)`在主视图中呈现部分视图（并且我不执行 AJAX 调用），那么验证就可以正常工作。

这可能是因为如果我动态加载内容，DOM 中还不存在控件。但我做了一个电话 `$.validator.unobtrusive.parse($("#res"));` ，应该足以让验证器了解新加载的控件......

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2013-02-20T14:38:32.907

如果您尝试解析已经解析的表单，它将不会更新

当您向表单添加动态元素时，您可以执行的操作是

1.  您可以删除表单的验证并像这样重新验证它：

    ```
    var form = $(formSelector)
        .removeData("validator") /* added by the raw jquery.validate plugin */
        .removeData("unobtrusiveValidation");  /* added by the jquery unobtrusive plugin*/

    $.validator.unobtrusive.parse(form); 
    ```

2.  `unobtrusiveValidation`使用 jquery`data`方法访问表单的数据：

    ```
    $(form).data('unobtrusiveValidation') 
    ```

    然后访问规则集合并添加新元素属性（这有点复杂）。

您还可以查看这篇关于[在 ASP.Net MVC 中将不显眼的 jquery 验证应用于动态内容的](http://xhalent.wordpress.com/2011/01/24/applying-unobtrusive-validation-to-dynamic-content/)文章，了解用于向表单添加动态元素的插件。该插件使用第二种解决方案。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-06T14:55:04.853

作为 Nadeem Khedr 回答的补充......

如果您已将表单动态加载到 DOM 中，然后调用

```
jQuery.validator.unobtrusive.parse(form); 
```

（提到了额外的位），然后将使用 ajax 提交该表单记得调用

```
$(form).valid() 
```

在您提交表单之前返回 true 或 false（并运行实际验证）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-15T19:52:37.130

令人惊讶的是，当我查看这个问题时，ASP.NET 官方文档仍然没有任何关于不显眼的`parse()`方法或如何将其与动态内容一起使用的信息。我冒昧地在文档存储库中创建了一个[问题](https://github.com/aspnet/Docs/issues/4752)（参考@Nadeem 的原始答案）并提交了一个拉取请求来修复它。此信息现在在模型验证主题的[客户端验证](https://docs.microsoft.com/en-us/aspnet/core/mvc/models/validation#client-side-validation)部分中可见。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-18T10:52:44.603

将此添加到您的 _Layout.cshtml

```
 $(function () {
        //parsing the unobtrusive attributes when we get content via ajax
        $(document).ajaxComplete(function () {
            $.validator.unobtrusive.parse(document);
        });
    }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-06T20:41:34.493

测试这个：

```
if ($.validator.unobtrusive != undefined) {
    $.validator.unobtrusive.parse("form");
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-17T14:43:14.447

我遇到了同样的问题，除此之外没有任何效果：

```
$(document).ready(function () { 
    rebindvalidators();
});

function rebindvalidators() {
    var $form = $("#id-of-form");
    $form.unbind();
    $form.data("validator", null);
    $.validator.unobtrusive.parse($form);
    $form.validate($form.data("unobtrusiveValidation").options);
} 
```

并添加

```
// Check if the form is valid
var $form = $(this.form);
if (!$form.valid())
    return; 
```

您尝试保存表单的位置。

我正在通过 Ajax 调用保存表单。

希望这会对某人有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-09T05:12:04.523

只需在模式代码末尾再次复制此代码

```
 <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

;)

# sql - SSMS - 旋转列并更改字段名称

> ID：14902583
> 
> 赞同：1
> 
> 时间：2013-02-15T20:11:32.253
> 
> 标签：sql, tsql, ssms

假设我有下表，Table1

```
SIMULATION  STATEMENT_LINE                  PERIOD  OUTPUT_YTDIncStmt
0           A_1_a_Gross_Written_Premium     2012Q2  1362419134
0           A_Net_Earned_Premium            2012Q2  0
0           A_1_Gross_Earned_Premium        2012Q2  1362419134 
```

有什么方法可以旋转 STATEMENT_LINE 列，所以我可以让它看起来像这样，而不是拥有所有的 A_1 等等。

```
PERIOD    [Gross Written Premium]    [Net Earned Premium]    [Gross Earned Premium]
2012Q2          1362419134                    0                     1362419134 
```

我想亲自指定要调用的列，而不仅仅是去掉“_”和“A”或“1”。

这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:30:30.247

你可以做这样的事情。

```
SELECT [Period],
    [A_1_a_Gross_Written_Premium] AS [Gross Written Premium],
    [A_Net_Earned_Premium] AS [Net Earned Premium],
    [A_1_Gross_Earned_Premium] AS [Gross Earned Premium]
FROM
  (
   SELECT [STATEMENT_LINE], [PERIOD], [OUTPUT_YTDIncStmt]
   FROM Table1
   ) AS Source

PIVOT
  (
   MAX(OUTPUT_YTDIncStmt)
   FOR STATEMENT_LINE IN ([A_1_a_Gross_Written_Premium], [A_Net_Earned_Premium], [A_1_Gross_Earned_Premium])
  ) AS PivotTable 
```

# jquery - scrollTo 在容器和固定标题中

> ID：14902587
> 
> 赞同：0
> 
> 时间：2013-02-15T20:11:40.040
> 
> 标签：jquery, scrollto

我很难破译scrollTo 的文档。我可以通过 $.scrollTo 滚动整个页面来使其工作，但我希望的是在父级中滚动。我有一个固定的标题，我想将其设置为滚动点。

这有效：

```
$('#one_l').click(function () {
        $.scrollTo($('#one'), 500);
    }); 
```

这不会：

```
$('#one_l').click(function () {
        $('#feature_scroll').scrollTo($('#one'), 500);
    }); 
```

# php - 我在哪里放置可以显示 Flash 消息的 Laravel 4 辅助函数？

> ID：14902589
> 
> 赞同：20
> 
> 时间：2013-02-15T20:11:50.060
> 
> 标签：php, laravel, laravel-4

我编写了一个简单的`display_messages()`函数，它将搜索`Session::get('errors')`闪存数据并将其回显到屏幕上。

我把这个功能放在哪里？在 Codeigniter 中，您有一个 helpers 文件夹，您可以在其中粘贴所有小的全局帮助方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-16T21:25:47.937

正如乌斯曼建议的那样，

*   创建一个文件**/application/libraries/demo.php**
*   `class Demo() {`在里面定义一个
*   像这样调用函数：`{{ Demo::display() }}`

之所以有效，是因为库和模型在 start.php 第 76 行中自动加载。我相信文件名必须与类名匹配（注意大写）。

```
<?php

class Demo {

    public static function display() {

        if( !$message = Session::get('errors'))
            $message = 'No Errors';

        echo "<pre>print_r($message)</pre>";

    }

} 
```

不能完全弄清楚为什么我在使用类名 Common 时遇到问题，可能存在冲突（如果这很重要，您可以定义一个命名空间）...

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-16T13:09:15.470

`helpers`在您的 app 文件夹中创建一个文件夹并创建一个文件`application_helper.php`。使用这样的代码：

```
// app/helpers/application_helper.php

function display_messages()
{
  exit('Yes');
} 
```

然后在根目录中打开您的 composer.json 文件。`app/helpers/application_helper.php`用 composer自动加载`files`。

```
"autoload": {
....

    "files": [
        "app/helpers/application_helper.php"
    ] 
```

完成，您现在可以调用`display_messages()`.

某些自动加载器可能需要您`composer dump`第一次运行命令。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-19T14:37:40.197

谢谢 memeLab 提供了一个非常有用的答案，对我帮助很大。我只是想扩展他的答案，因为“ `libraries`”文件夹不是自动加载目录，至少在我使用的 L4 的发布/当前版本中不是。此外，start.php 似乎已扩展为带有local.php 和 artisan.php的`start`文件夹。`global.php`

因此，要将您自己的类用于单独的库或使用 L4 惰性自动加载器的帮助程序，您只需将要存储这些的任何文件夹包含到`global.php`. 例如，我`libraries`在目录列表中添加了一个文件夹。

```
ClassLoader::addDirectories(array(

    app_path().'/commands',
    app_path().'/controllers',
    app_path().'/models',
    app_path().'/database/seeds',
    // this a custom path
    app_path().'/libraries',

)); 
```

然后，您在该文件夹中定义的任何类都可以在您的控制器`classname.php`中调用。`CLASSNAME::methodName($someVar);`

```
class CLASSNAME {

    public static function methodName($someVar=NULL) {

        // whatever you want to do...

        return $message;
    }

} 
```

因此，以这种方式，您可以创建一个辅助类并定义在整个控制器中使用的不同方法。还要小心以这种方式在 Class 之外定义常规函数，因为它们不会工作（因为类并不总是被加载）。（例如`someFunctionName($someVar);`，而不是`CLASSNAME::methodName($someVar);`）如果您想以这种方式创建函数，您需要确保已加载，但是我不会详细说明这一点，因为最好将惰性加载器类用于此类事情，因此您只加载你真正需要的课程。

再次感谢 memeLab 和 Usman，如果没有他们的回答，我不会走这么远。:)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-17T08:29:42.240

## 加载**类**：

在文件中创建`app/libraries/class/Message.php`并添加类

```
class Message {
    public static function display() {

    }
} 
```

添加`"app/libraries/class"`到`composer.json`

```
"autoload": {
    "classmap": [
        "app/commands",
        "app/controllers",
        "app/models",
        "app/database/migrations",
        "app/database/seeds",
        "app/tests/TestCase.php",
        "app/libraries/class"
    ]
}, 
```

最后`composer dump-autoload`在命令行中运行。

您可以通过`Message::display()`

## 用于加载普通的非对象 php**函数**：

在文件中创建`app/libraries/function/display_messages.php`和添加函数

```
function display_messages() {

} 
```

在 start/global.php 中添加一行

```
require app_path().'/libraries/function/display_messages.php'; 
```

您可以通过`display_messages()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-27T08:03:50.217

在 app/start/global.php 中添加这个

```
require app_path().'/config/autoload.php';
require app_path().'/start/loader.php';
App::instance('loader',new loader($autoload)); 
```

在 app/start 中创建一个新文件 loader.php 并添加：

```
class loader{
private $helpers = array();
public $autoload = array(
    'helpers' => array()
);
function __construct($autoload  = array()) {
    if (!empty($autoload))
        $this->autoload = $autoload;
    foreach ($this->autoload as $key => $value)
    {
        $function = strtolower($key);
        $this->$function($value);
    }
}
function helpers($helpers=array())
{
    if (!is_array($helpers))
        $helpers = explode(",",$helpers);
    foreach ($helpers as $key => $value) {
        $this->helper($value);
    }

}
function helper($helper = '',$path = '/')
{
    $folder = app_path().'/helpers'.$path;
    if (file_exists($folder.$helper.'.php') && !in_array($helper, $this->helpers)){
        $this->helpers[] = $helper;
        require $folder.$helper.'.php';
    }
    else{
        $segments = explode('/',$helper);
        if (is_dir($folder.$segments[0])){
            array_shift($segments); 
            $this->helper($segments,$path.$segments[0].'/');
        }
    }
} 
```

}

在 app/config 中创建一个新文件 autoload.php 并添加：

```
$autoload['helpers'] = array('functions'); // my autoload helpers! 
```

在 app/ 中创建一个新文件夹 helpers，添加您的帮助文件。（例如 myhelper.php ）

```
function myhelper()
{
echo 'helper';
} 
```

在您的控制器中添加：

```
App::make('loader')->helper('myhelper');
    myhelper(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T20:23:10.830

在 L3 中，我通常会创建一个`application/libraries/helpers.php`文件，并将`require_once()`其放在我的`application/start.php`. 类似于 L3 的`laravel/helpers.php`文件。

我假设你可以在 L4 中做类似的事情。

编辑：只看来源，`app/start/local.php`似乎它可能是这个地方。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-04T14:11:27.667

我使用了本教程，我认为这是最简单的方法： http: [//laravel-recipes.com/recipes/50/creating-a-helpers-file](http://laravel-recipes.com/recipes/50/creating-a-helpers-file)

1.  首先创建文件 app/helpers.php
2.  **然后将其加载到app\start\global.php**的底部，如下所示。

    // 在文件底部 require app_path().'/helpers.php';

或者更改您的**composer.json**文件并转储自动加载器。

```
 {
        "autoload": {
            "files": [
                "app/helpers.php"
            ]
        }
    } 
```

**$ 作曲家转储自动**

3.  然后你可以在 helpers.php 中编写你的函数并从任何地方调用它们

    ```
    function myfunction($result){ 
         return $result;
        } 
    ```

* * *

## 回答 #8

> 赞同：-17
> 
> 时间：2013-06-21T13:49:41.417

打开`root_folder/vendor/laravel/framework/src/Illuminate/Support/helpers.php`

你可以添加你的功能

```
if ( ! function_exists('display_messages'))
{
    function display_messages()
    {
        return ...
    }
} 
```

# c# - Windows C# 窗体：提示关注文本框

> ID：14902591
> 
> 赞同：2
> 
> 时间：2013-02-15T20:12:04.993
> 
> 标签：c#, winforms

我想知道在 Windows 窗体上使用提示时如何自动选择文本框。我下面的代码显示了我尝试过的内容，但它仍然专注于按钮而不是文本框。预先感谢您的帮助和帮助。

```
 Form prompt = new Form();
            prompt.Width = 500;
            prompt.Height = 200;
            prompt.Text = caption;
            Label textLabel = new Label() { Left = 50, Top = 20, Text = text };
            TextBox textBox = new TextBox() { Left = 50, Top = 50, Width = 400 };
            Button confirmation = new Button() { Text = "Ok", Left = 50, Width = 100, Top = 90 };
            confirmation.Click += (sender, e) => { prompt.Close(); };
            textBox.Select();
            textBox.Focus();
            prompt.Controls.Add(confirmation);
            prompt.Controls.Add(textLabel);
            prompt.Controls.Add(textBox);
            prompt.ShowDialog();
            return textBox.Text; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:14:34.203

您需要等到显示表单后才能聚焦文本框。在表单第一次显示之前，它无法*聚焦*任何东西。您可以`Shown`在表单首次显示后使用该事件执行一些代码。

```
string text = "Text";
string caption = "caption";
Form prompt = new Form();
prompt.Width = 500;
prompt.Height = 200;
prompt.Text = caption;
Label textLabel = new Label() { Left = 50, Top = 20, Text = text };
TextBox textBox = new TextBox() { Left = 50, Top = 50, Width = 400 };
Button confirmation = new Button() { Text = "Ok", Left = 50, Width = 100, Top = 90 };
confirmation.Click += (s, e) => { prompt.Close(); };
prompt.Controls.Add(confirmation);
prompt.Controls.Add(textLabel);
prompt.Controls.Add(textBox);
prompt.Shown += (s, e) => textBox.Focus();
prompt.ShowDialog();
return textBox.Text; 
```

# mysql - ActiveRecord 查询在 sqlite 上工作正常，但在 mysql 中失败

> ID：14902592
> 
> 赞同：0
> 
> 时间：2013-02-15T20:12:14.990
> 
> 标签：mysql, ruby-on-rails, sqlite, rails-activerecord

伙计们，

我有一个在使用 sqlite3 的开发机器上运行良好的 activerecord 语句，但是当我在使用 MySQL 的生产环境中运行相同的代码时，它会失败。代码如下：

```
avail = Account.count( :conditions => "room_name == 'jail' AND account_state IS NULL") 
```

当我在生产中运行它时，我得到一个 MySQL 语法错误：

对于这个陈述，我也看到了同样的行为：

```
_acct = Account.where( "room_name == 'jail' AND account_state IS NULL").order("updated_at ASC").limit(1) 
```

感谢您的任何反馈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:26:14.547

我相信 MySQL 使用单个等号，而 sqlite 理解 = 和 ==

尝试

```
"room_name = 'jail' AND account_state IS NULL" 
```

[参考](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:26:32.590

这是你的问题：

```
room_name == 'jail' 
```

MySQL 只需要一个 =。

# asp.net - 详情视图查找下拉列表框并绑定

> ID：14902594
> 
> 赞同：0
> 
> 时间：2013-02-15T20:12:25.420
> 
> 标签：asp.net, vb.net, detailsview

如何在 DetailsView 中找到控件...。

我认为它需要在 DataBound 事件中完成并将该字段的数据源的当前值发布到 DDL.selectedvalue？

```
Dim ddl As DropDownList = DirectCast(DetailsView1.InsertItem, DropDownList).(FindControl("DropDownList1"), DropDownList) 
```

我正在添加一个 DDL，我想显示该字段的当前值并在编辑模式下可以选择。

标记添加：

```
<asp:TemplateField HeaderText="Active" SortExpression="Active">
     <ItemTemplate>
           <asp:Label ID="Label2" runat="server" Text='<%# Bind("Active") %>'> </asp:Label>
           <asp:DropDownList ID="DropDownList2" runat="server"  DataTextField='<%# Bind("Active") %>' >
           </asp:DropDownList>
     </ItemTemplate>
     <EditItemTemplate>
          <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Active") %>'></asp:TextBox>
      &nbsp;<asp:DropDownList ID="DropDownList2" runat="server"  >
            </asp:DropDownList>
       </EditItemTemplate>
       <InsertItemTemplate>
    <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Active") %>'></asp:TextBox>
      </InsertItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:56:02.660

用内联代码解决了它。

```
 <ItemTemplate>
     <asp:Label ID="Label2" runat="server" Text='<%# Bind("Active") %>'></asp:Label>
 </ItemTemplate>
 <EditItemTemplate>
     <asp:DropDownList ID="DropDownList2" runat="server" SelectedValue='<%# Bind("Active") %>' >
          <asp:ListItem>Y</asp:ListItem>
          <asp:ListItem>N</asp:ListItem>
     </asp:DropDownList>
 </EditItemTemplate> 
```

# ruby-on-rails - Heroku 广告横幅？

> ID：14902600
> 
> 赞同：2
> 
> 时间：2013-02-15T20:12:43.087
> 
> 标签：ruby-on-rails, heroku, ads

今天早上，当我在浏览器中打开我的 Heroku 应用程序时，我注意到底部放置了一个横幅广告。我添加了一个实例（因为不是免费计划）并重新启动了我的服务器，它仍然存在。

我翻遍了他们的知识库和stackoverflow，不知道如何删除这些。现在我正在用 JS 删除它们，但目标是不接收额外的负载/广告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T01:30:38.913

无论是否免费，Heroku 都不会向您的网站注入添加内容。正如对您的问题的评论中提到的，您应该检查它是否是由您所在的网络完成的。也许尝试使用 https （即[https://paddlar.herokuapp.com/rivers](https://paddlar.herokuapp.com/rivers)）访问您的网站 - 这样，网络应该无法修改响应。

# assembly - 学习 MIPS 汇编：读取文本并写入文件

> ID：14902603
> 
> 赞同：1
> 
> 时间：2013-02-15T20:12:48.890
> 
> 标签：assembly, mips

我正在尝试用 MIPS 汇编语言编写简单的程序。我想要做的是从键盘读取多个字符并将其保存到文件中。我正在使用 13 个操作码创建文件并使用 15 个操作码保存字符。我不明白：如何为 15 个操作码（第 37 行，现在硬编码）动态分配要写入 $a2 的字符数。此外，我不知道如何打印写入文件的字符数（$v0 在写入文件后包含此值，第 49 行）。

现在程序抛出错误：第 49 行：0x00400078 处的运行时异常：地址超出范围 0x0000002c

这是我的代码：

```
.data

handle_text:
    .space 100 # buffor of 100 characters, bits, bytes?

out_file:
    .asciiz "file_out.txt" # out file

asklabel:
    .asciiz "\Please enter string to save\n" 

countlabel:
    .asciiz "\Characters typed:\n"

.text
main:
    la $a0, asklabel # text to print
    li $v0, 4 # opcode
    syscall

    la $a0, handle_text # Where to put text
    la $a1, handle_text # Number of characters to write
    li $v0, 8 # opcode
    syscall 

    li $v0, 13       # system call for open file
    la $a0, out_file     # output file name
    li $a1, 1        # Open for writing (flags are 0: read, 1: write)
    li $a2, 0        # mode is ignored
    syscall            # open a file (file descriptor returned in $v0)
    move $s6, $v0      # save the file descriptor 

    move $a0, $s6 # file handle
    la $a1, handle_text # text to print
#line 37
    li $a2, 44 # TEXT LENGTH
    li $v0, 15 # opcode
    syscall

    move $t1, $v0 # move v0 to t1 so v0 won't be overwritten

    la $a0, countlabel # show text 
    li $v0, 4 # op code
    syscall 

    move $a0, $t1 # place characters amount in $a0
    li $v0, 4 # opcode
    syscall
# ERROR. Maybe it's becouse string should be null terminated?

    li   $v0, 16       # system call for close file
    move $a0, $s6      # file descriptor to close
    syscall            # close file

    li $v0, 10  # close app
    syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T11:26:35.380

首先

```
# buffor of 100 characters, bits, bytes? 
```

它们是字节，而不是位。此外，字符串

```
 la $a1, handle_text 
```

在第 21 行是完全错误的，因为你必须加载一个数字，而不是一个地址。您可以使用例如

```
.data
length:    .word 100

[...]
lw $a1, length 
```

另外，请记住，您只能有效读取 99 个字符，因为最后一个必须是`'/0'`. 在第 37 行，您仍然可以使用

```
lw $a2, length 
```

而不是硬编码的 44。

对这个

```
# ERROR. Maybe it's because string should be null terminated? 
```

不，这是因为你想打印一个字符串，而 $t1=$v0 是一个整数。要打印读取字符的数量，您必须调用系统调用 1（而不是 4）。

要回答您的问题，将普通数字传递给参数并不是很简单，因为您必须以一种或另一种方式设置最大数字。例如，通过这种方式，您的输出始终为 100，即使您输入了 10 个字符。解决此问题的最简单方法是使用“循环”，例如

```
li $t0, -1
loop:
    addi $t0, $t0, 1
    lw $t1, handle_text($t0)
    bnez $t1, loop
addi $t0, $t0, -1 
```

在代码的末尾， $t0 包含确切的字符数（不包括`'\0'`and `'\n'`）。

# html - Blogger 的评论被我的 CSS 搞砸了

> ID：14902605
> 
> 赞同：0
> 
> 时间：2013-02-15T18:22:09.913
> 
> 标签：html, css

我是一名主修计算机科学和网络开发的大学生，所以我还在学习一切。

我的一个客户有一个博主，她问我是否可以做一些事情，比如制作导航栏和链接等等。因此，在我制作导航栏后，我注意到她的评论都搞砸了。我不确定是导航栏中的 CSS 还是其他东西。

我的导航栏代码：

```
<style>
#logo-bloglovin:hover,#logo-bloglovin:active { background-position:0 -64px; }

#logo-facebook
{
background-position:-210px 0px;
}

#logo-facebook:hover,#logo-facebook:active { background-position:-210px -64px; }

#logo-instraram
{
background-position:-420px 0px;
}
#logo-instraram:hover,#logo-instraram:active { background-position:-420px -64px; }

#logo-googleplus
{
background-position:-660px 0px;
}

#logo-googleplus:hover,#logo-googleplus:active { background-position:-660px -64px; }

#logo-contact
{

background-position:-880px 0px;
}
#logo-contact:hover,#logo-contact:active { background-position:-880px -64px; }

ul.chicnav {
border: none !important;
display: block;
list-style: none;
}

li{
display: inline-block ;
}

ul.chicnav li a {
width:210px;
height:62px;
text-decoration:none;
display:block;
border: none !important;
background: url('http://i47.tinypic.com/280nmtx.png') 0 0 no-repeat;
}

ul.chicnav li a:hover {
background-color: transparent !important;
}

</style>

<ul class="chicnav">
<li><a href="http://www.bloglovin.com/blog/3798040/chic-fashion-world" id="logo-bloglovin" > </a></li>
<li><a href="http://www.facebook.com/pages/Chic-Fashion-World/248420155275530" id="logo-facebook" > </a></li>
<li><a href="http://instagram.com/borka12/" id="logo-instraram" > </a></li>
<li><a href="https://plus.google.com/109438806289588533953/posts" id="logo-googleplus" > </a></li>
<li><a href="http://chicfashionworld.blogspot.com/p/contact.html" id="logo-contact" > </a></li>

</ul> 
```

该博客位于[chicfashionworld.com](http://chicfashionworld.com/)。我在[chicfashionworldtest.blogspot.com](http://chicfashionworldtest.blogspot.com/)上做了一个测试页，做了一些改进。如果您对我有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T18:32:36.067

好的，这是您的原始代码，稍微清理了一下：

```
<style>
#logo-bloglovin:hover, #logo-bloglovin:active{ background-position:0 -64px; }

#logo-facebook{ background-position:-210px 0px; }
#logo-facebook:hover, #logo-facebook:active{ background-position:-210px -64px; }

#logo-instraram{ background-position:-420px 0px; }
#logo-instraram:hover, #logo-instraram:active{ background-position:-420px -64px; }

#logo-googleplus{ background-position:-660px 0px; }
#logo-googleplus:hover, #logo-googleplus:active { background-position:-660px -64px; }

#logo-contact{ background-position:-880px 0px; }
#logo-contact:hover, #logo-contact:active{ background-position:-880px -64px; }

ul.chicnav {
  border: none !important;
  display: block;
  list-style: none;
}

li{ display: inline-block; }

ul.chicnav li a {
  width:210px;
  height:62px;
  text-decoration:none;
  display:block;
  border: none !important;
  background: url('http://i47.tinypic.com/280nmtx.png') 0 0 no-repeat;
}

ul.chicnav li a:hover { background-color: transparent !important;}
</style>

<ul class="chicnav">
  <li><a href="http://www.bloglovin.com/blog/3798040/chic-fashion-world" id="logo-bloglovin" > </a></li>
  <li><a href="http://www.facebook.com/pages/Chic-Fashion-World/248420155275530" id="logo-facebook" > </a></li>
  <li><a href="http://instagram.com/borka12/" id="logo-instraram" > </a></li>
  <li><a href="https://plus.google.com/109438806289588533953/posts" id="logo-googleplus" > </a></li>
  <li><a href="http://chicfashionworld.blogspot.com/p/contact.html" id="logo-contact" > </a></li>
</ul> 
```

注意到第 23 行了吗？`li{ display: inline-block; }`? 我敢打赌，这就是你的问题的原因。也许将其修改为`ul.chicnav li{ display: inline-block; }`. 原因是您正在制作`li`页面上的所有元素`inline-block`- 而不仅仅是导航中的元素。

# javascript - 如何为移动用户切换图像？

> ID：14902608
> 
> 赞同：1
> 
> 时间：2013-02-15T20:13:07.147
> 
> 标签：javascript, android, jquery, ios, css

我在大多数（Wordpress）帖子中都使用大图像。我想为移动用户优化这些。我不确定优化是什么意思，但我猜 CSS、jquery 或 JS 将较大的图像切换为较小的图像？

有没有应该如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:17:58.710

Jquery Bires 将完全按照您的意愿行事。

[https://github.com/ahoward/jquery.bires](https://github.com/ahoward/jquery.bires)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:18:30.707

我会使用 CSS 媒体查询来根据屏幕大小提供不同的 CSS

[https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

例如

```
@media (max-width: 700px) { ... } 
```

将为屏幕低于 700 像素的任何设备提供特定的 CSS

# python - 列表索引必须是整数，而不是列表 - 在 python 中使用字典

> ID：14902610
> 
> 赞同：2
> 
> 时间：2013-02-15T20:13:15.590
> 
> 标签：python, python-2.7

我在一个长程序中遇到了这部分代码块的问题

```
print GInfo[i].DualVariables, "\n", GInfo[i].Components
for i in GInfo[i].Components:
  print i, tuple(i)
  if (tuple(i) not in GInfo[i].DualVariables):
    ------ Do Something --------- 
```

这里 GInfo 是 GraphInfo 类的对象

```
class GraphInfo:
  def __init__(self):
    self.G = nx.Graph()
    self.Components = []
    self.ActiveStatus = {}
    self.ContainsCommon = {}
    self.p = {}
    self.Edges = []
    self.DualVariables = {}
    self.Bound = {} 
```

可以看到 DualVariables 是一个字典，而 Components 是一个列表。代码示例实例的输出如下：

```
{(0,): 0.0, (1,): 31.5, (2,): 31.5, (8,): 31.5, (3,): 31.5, (4,): 31.5, (5,): 31.5,(6,): 31.5, (7,): 31.5} 
[[8, 7], [0], [1], [2], [3], [4], [5], [6]]
[8, 7] (8, 7) 
```

其次是错误

```
TypeError: list indices must be integers, not list 
```

在存在 if 条件的行中。

对此问题的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:14:38.943

在循环中重命名`i`为不同的名称，例如：

```
print GInfo[i].DualVariables, "\n", GInfo[i].Components
for j in GInfo[i].Components:
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:21:07.537

我想这取决于你想要做什么：

```
if tuple(i[0]) not in GInfo.DualVariables.keys():
    ... 
```

或者可能

```
if GInfo.DualVariables[tuple(i[0])] != i[1]:
    ... 
```

这些中的任何一个都适合您想要做的事情吗？

# php - 如何修改时间戳

> ID：14902612
> 
> 赞同：0
> 
> 时间：2013-02-15T20:13:25.533
> 
> 标签：php, mysql

我在修改时间戳时遇到问题。我尝试了几件事，但没有成功的结果。

我有这段代码，我希望时间戳是这样的：2013 年 12 月 14 日。

```
<?php
            $sql = "
                SELECT
                    `news`.`headline` AS `title`,
                    `news`.`timestamp` AS `time`
                FROM `news`
                ORDER BY `news`.`id` DESC LIMIT 4
            ";
            $query = mysql_query($sql) or die(mysql_error());
            while ($row = mysql_fetch_assoc($query)) {
                echo '<div class="newsbox">
                        <div class="newsimage">
                            <img src="upload/'.$row['link'].'" style="width:211px;height:130px" />
                        </div><!--newsimage-->
                      <div class="newstext">
                        <span class="timestamp">
                            <p>'.$row['time'].'</p>
                        </span><!--timestamp-->
                        <span class="headline">
                            <h1>'.$row['title'].'</h1>
                        </span><!--headline-->  
                    </div>
                    </div>';
            }
        ?> 
```

我应该在哪里添加日期格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:15:55.397

用替换这个

```
 <p>'.date("j, F ,Y",$row['time']).'</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:18:37.453

如果您使用的是 unix 时间戳...

把它放在while循环中：

```
$new_date = date('j, F, Y', $row['time']); 
```

您应该查看此页面： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T20:18:48.690

你在你的sql中试过这个吗？

```
DATE_FORMAT(FROM_UNIXTIME('news.timestamp'), '%e %b %Y') AS `time` 
```

# java - 在java应用程序中生成12位唯一数字

> ID：14902614
> 
> 赞同：0
> 
> 时间：2013-02-15T20:13:51.137
> 
> 标签：java, mysql

我必须将用户配置文件存储在具有 12 位唯一 ID 的 LDAP 中，因此考虑通过创建序列并在 Java 代码（seq.nextVal()）中访问它来使用数据库。但是我们公司只支持mysql，mysql不支持sequence。

是否有解决方法来使用 mysql 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:16:53.520

MySQL 支持 INTEGER 数据类型的自动递增。参考

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

如果要制作字段`UNIQUE`，则可以将其设置为`PRIMARY KEY`.

例如，您可以将`ID BIGINT PRIMARY KEY AUTO INCREMENT`其用作您的字段。

* * *

如果您在 Java 应用程序中需要此值，您可以：

*   在你的 MySQL 数据库中生成 id

*   在您的 Java 应用程序中获取价值

*   使用该值将其保存在您的 LDAP 中

作为测试，这将确保您的所有元素都有 12 位数字（基于您的最后评论）：

```
CREATE TABLE uniqueids(id BIGINT PRIMARY KEY AUTO_INCREMENT);

INSERT INTO uniqueids VALUES(100000000000);

INSERT INTO uniqueids VALUES(null);

SELECT *
FROM uniqueids 
```

在 MySQL 5.0 上测试

SQL小提琴：[http ://www.sqlfiddle.com/#!2/8c508f/1](http://www.sqlfiddle.com/#!2/8c508f/1)

# matlab - 在 Matlab 中创建一个二维空数组

> ID：14902621
> 
> 赞同：0
> 
> 时间：2013-02-15T20:14:27.030
> 
> 标签：matlab

我想`union`在 Matlab 中使用将一系列 1×2 数组合并`[1,2]`到一个空的 2-D 数组`U`，例如，`U = union(U,[1,2],'rows');`但我很困惑如何初始化`U`，因为`U=[]`没有用，也没有运气`U=[[],[]]`。我试过`U = [U,[1,2]]`了，它只有在系列中的 1×2 数组都是唯一的时候才有效，否则我会在`U`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:21:00.813

所以你想在一个二维矩阵中得到所有*唯一的1x2 数组？*首先，创建一个包含所有 1x2 数组（包括重复项）的大型二维数组，然后调用[`unique`](http://www.mathworks.com/help/matlab/ref/unique.html).

```
C = unique(A,'rows') 
```

至于 using `union`，没有办法有一个空的 1x2 数组。您可以做的是初始化`U`为与您的第一个 1x2 数组相同。然后遍历所有其他 1x2 数组并用于`union`构建输出。

```
U = union(U, [1,2], 'rows') 
```

# sql-server - 具有动态字段的 SQL Server Pivot

> ID：14902626
> 
> 赞同：2
> 
> 时间：2013-02-15T20:14:40.277
> 
> 标签：sql-server, pivot

试图找出在下表中的日期字段上动态旋转表格的最佳方法。问题是这些日期发生了变化，所以我不能在数据透视语句中对它们进行硬编码。

```
id value date
1  55    2012-12-29 00:00:00:00
1  54    2012-10-29 00:00:00:00
1  89    2013-02-02 00:00:00:00
2  45    2012-12-29 00:00:00:00
2  54    2012-10-29 00:00:00:00
4  78    2012-12-29 00:00:00:00
4  90    2012-10-29 00:00:00:00
4  23    2012-10-29 00:00:00:00 
```

我希望输出看起来像这样

```
id 2012-12-29 00:00:00:00 2012-10-29 00:00:00:00 2013-02-02 00:00:00:00
1   55                    54                     89
2   45                    54                     null
4   78                    90                     23 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:20:53.950

由于您使用的是 SQL Server，因此您可以使用该`PIVOT`功能。

如果您的值是已知的，那么您可以对这些值进行硬编码：

```
select *
from
(
  select id, value, date
  from yourtable
) src
pivot
(
  max(value)
  for date in ([2012-12-29], [2012-10-29], [2013-02-02])
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e4c67/2)。

但如果它们是未知的，那么您将需要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(convert(varchar(50), date, 120)) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @cols + ' from 
             (
                select id, value, convert(varchar(50), date, 120) date
                from yourtable
            ) x
            pivot 
            (
                max(value)
                for date in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/e4c67/4)。

两个查询的结果是：

```
| ID | 2012-10-29 00:00:00 | 2012-12-29 00:00:00 | 2013-02-02 00:00:00 |
------------------------------------------------------------------------
|  1 |                  54 |                  55 |                  89 |
|  2 |                  54 |                  45 |              (null) |
|  4 |                  90 |                  78 |              (null) | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:21:57.460

尝试这个

```
DECLARE @columns VARCHAR(8000)

-- set columns for pivot
SELECT @columns = COALESCE(@columns + ',[' + cast([date] as varchar(50)) + ']', '[' + cast([date] as varchar(50))+ ']')         
    FROM  TableName

EXEC(' SELECT *, ' +  @columns + ' FROM 
       (
           SELECT * FROM TableName
       ) As a
       PIVOT (MAX(value) FOR DATE IN (' + @columns + ') ) As P') 
```

# ios - 调整网站宽度以适应 iPad 屏幕的宽度

> ID：14902628
> 
> 赞同：8
> 
> 时间：2013-02-15T20:14:50.727
> 
> 标签：ios, ipad, css

我有一个 2048px 宽的网站。有没有办法在网站加载时自动让 iPad 适应屏幕上的整个网站宽度？我尝试以几种不同的方式尝试元视口：

```
<meta name="viewport" content="width=device-width maximum-scale=1.0">
<meta name="viewport" content="width=device-width initial-scale=1.0"> 
```

然而这并没有奏效。该站点仍然太宽，并且在 iPad 上溢出屏幕。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-06T10:19:38.027

您可以将固定大小传递给内容宽度，如下所示：

```
<meta name="viewport" content="width=2048" /> 
```

可能需要进行一些调整以允许填充任一侧，但应以该大小加载站点并允许用户放大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:16:59.633

`<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />`

这就是我用于我的网站的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-11T16:52:16.797

解决此问题的正确方法是使用百分比而不是固定宽度。但是如果你“不能”改变它，你可以通过在初始比例中使用 0.x 来强制你的视口缩小，比如：

```
<meta name="viewport" content="width=device-width, initial-scale=0.625, user-scalable=yes" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:24:33.673

尝试`min-width: 2048px;`在 css 中设置 html 和 body 标签。这对我来说之前在 iPad 上解决了一些奇怪的问题，但不确定它是否适用于这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-17T14:06:12.007

我最近在一个有同样问题的网站上工作，对于一个固定的 960 像素宽度的网站，它不会在页面点击之间保持缩小。尝试：

```
<meta name="viewport" content="width=device-width, initial-scale=-100%" /> 
```

到目前为止一切顺利，通过了我的 Ipad Air。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-03-02T08:07:51.767

这工作正常：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

# sql - 根据顺序对 SQL 结果进行分组

> ID：14902630
> 
> 赞同：7
> 
> 时间：2013-02-15T20:15:05.917
> 
> 标签：sql, sql-server, tsql, sql-server-2005, sql-server-2012

我有这样的数据表：

```
ID     | RowNumber     | Data
------------------------------
1      | 1             | Data
2      | 2             | Data
3      | 3             | Data
4      | 1             | Data
5      | 2             | Data
6      | 1             | Data
7      | 2             | Data
8      | 3             | Data
9      | 4             | Data 
```

我想对每组 RowNumbers 进行分组所以我的结果是这样的：

```
ID     | RowNumber     | Group | Data
--------------------------------------
1      | 1             | a     | Data
2      | 2             | a     | Data
3      | 3             | a     | Data
4      | 1             | b     | Data
5      | 2             | b     | Data
6      | 1             | c     | Data
7      | 2             | c     | Data
8      | 3             | c     | Data
9      | 4             | c     | Data 
```

我知道每个组开始和停止的唯一方法是 RowNumber 何时重新开始。我怎样才能做到这一点？它还需要相当有效，因为我需要在其上执行此操作的表有 5200 万行。

**附加信息**

ID 是真正的顺序，但 RowNumber 可能不是。我认为 RowNumber 将始终以 1 开头，但例如 group1 的 RowNumbers 可能是“1,1,2,2,3,4”，而 group2 可能是“1,2,4,6”等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:21:43.687

对于评论中的明确要求

> group1 的行号可以是“1,1,2,2,3,4”，而 group2 的行号可以是“1,2,4,6”......一个较大的数字后跟一个较小的数字将是一个新组。

SQL Server 2012 解决方案可能如下所示。

1.  用于`LAG`访问前一行并设置一个标志，`1`如果该行是新组的开始或`0`其他。
2.  计算这些标志的运行总和以用作分组值。

**代码**

```
WITH T1 AS
(
SELECT *,
       LAG(RowNumber) OVER (ORDER BY ID) AS PrevRowNumber
FROM YourTable
), T2 AS
(
SELECT *,
       IIF(PrevRowNumber IS NULL OR PrevRowNumber > RowNumber, 1, 0) AS NewGroup
FROM T1
)
SELECT ID,
        RowNumber,
        Data,
        SUM(NewGroup) OVER (ORDER BY ID 
                            ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS  Grp
FROM T2 
```

[SQL小提琴](http://www.sqlfiddle.com/#!6/03b09/2)

假设`ID`是聚集索引，计划对此进行一次扫描`YourTable`并避免任何排序操作。

[![计划](../Images/3d6c6fe046ec8697870811a107055293.png)](https://i.stack.imgur.com/BodHA.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:25:11.780

如果 id 确实是连续的，您可以执行以下操作：

```
select t.*,
       (id - rowNumber) as grp
from t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T22:24:11.313

您也可以使用递归 CTE

```
 ;WITH cte AS
 (       
  SELECT ID, RowNumber, Data, 1 AS [Group]
  FROM dbo.test1
  WHERE ID = 1
  UNION ALL
  SELECT t.ID, t.RowNumber, t.Data, 
         CASE WHEN t.RowNumber != 1 THEN c.[Group] ELSE c.[Group] + 1 END
  FROM dbo.test1 t JOIN cte c ON t.ID = c.ID + 1
  )
  SELECT *
  FROM cte 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/c6b01/1/0)上的演示[](http://sqlfiddle.com/#!3/c6b01/1/0)

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T22:43:28.207

怎么样：

```
select ID, RowNumber, Data, dense_rank() over (order by grp) as Grp
from (
     select *, (select min(ID) from [Your Table] where ID > t.ID and RowNumber = 1) as grp
     from [Your Table] t
) t
order by ID 
```

这应该适用于 SQL 2005。如果您不关心连续数字，也可以使用 rank() 代替。**

# html - 显示内联不使 div 向上移动

> ID：14902632
> 
> 赞同：0
> 
> 时间：2013-02-15T20:15:15.853
> 
> 标签：html, css, css-float

![在此处输入图像描述](../Images/0b091008e1c42a4c0d0d6c2710cd2542.png)如何使第二个 div 与第一个 div 正确对齐......我为水平对齐提供了内联显示......但第二个 div 仍然向下......我说的是 24 英寸显示器......

[http://jsfiddle.net/ke6Se/1/embedded/result/](http://jsfiddle.net/ke6Se/1/embedded/result/)

```
<div style=" width: 300px; display: inline-block;">
                  <span style="color: #000; font-size: 12px; font-family: arial; font-wieght: bold; margin-left: 45px;">Mark Up</span><span style="margin-left: 110px;">10%</span>
                  <div>
                    <span style="margin-left: 45px;">Non-Tax Amount</span><span style="margin-left: 59px;">0</span>
                  </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:27:43.037

你的小提琴真的很忙，我找不到它的确切位置，但这与你的边距和宽度有关。您应该将包装器设置为您想要`<div>`的固定宽度，并确保s 宽度加起来等于包装器宽度，包括边距和任何填充。请参阅这篇文章以获得很好的解释。`float: right``<div>``<div>`

[http://www.webdesignerdepot.com/2012/09/when-pages-are-not-paper-the-designers-guide-to-layout-code/](http://www.webdesignerdepot.com/2012/09/when-pages-are-not-paper-the-designers-guide-to-layout-code/)

此外，如果您不想设置静态宽度，设置最小宽度以防止在窗口缩小时堆叠 div 可能会有所帮助。

这是我正在谈论的内容的快速 HTML 标记。

```
<div id="wrapper" style="width: 800px;">
    <div id="leftDiv" style="width: 600px; float: left;">
        I'm the left Div!
    </div>
    <div id="rightDiv" style="width: 200px; float: right;">
        I'm the right Div!
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:25:17.333

首先，正如凯文在评论中所说，你的 html 是错误的。您有一个 div 嵌套在另一个 div 中。修复它，然后将 inline-block 应用于第二个 div

```
<div style=" width: 300px; display: inline-block;">
   <span style="color: #000; font-size: 12px; font-family: arial; font-wieght: bold; margin-left: 45px;">Mark Up</span><span style="margin-left: 110px;">10%</span>
</div> 
<div style="display:inline-block">
    <span style="margin-left: 45px;">Non-Tax Amount</span><span style="margin-left: 59px;">0</span>
</div> 
```

[这是强制性的小提琴](http://jsfiddle.net/jcurran/7edkK/)

# php - 在 MYSQL/PHP 中，我将如何从 ID 1 中删除并将数据插入 ID 5

> ID：14902635
> 
> 赞同：0
> 
> 时间：2013-02-15T20:15:48.800
> 
> 标签：php, mysql, database

![在此处输入图像描述](../Images/f0bf968d0ceb15a12017f1ae335c4c22.png)

这就是我的桌子的设置方式。我想添加一个新高度，然后在 ID 1 (2.0) 处删除该数据。因此，在插入新数据时它会不断跳跃。这样我一次最多只能保留 5 条记录。

抱歉，我对 MYSQL/PHP 很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:17:20.767

插入新数据：

```
INSERT INTO table (height) VALUES (xxx); 
```

删除对 (1,2.0)：

```
DELETE FROM table WHERE id=1; 
```

或者......像这样在一起：

```
UPDATE table SET height=xxx WHERE id=1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:21:13.347

对于删除，这样的事情可能会更好：

```
DELETE FROM table WHERE id NOT IN (SELECT ID FROM table ORDER BY ID DESC LIMIT 5) 
```

基本上从表中删除 id 与插入的最后 5 个 id 不匹配。当数据库中的条目少于 5 个时，这也有效，不会删除任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:20:45.997

要删除第一项，请执行以下操作：

```
DELETE FROM table LIMIT 1 
```

# php - Apache 重写规则仅适用于特定前缀

> ID：14902639
> 
> 赞同：1
> 
> 时间：2013-02-15T20:16:02.860
> 
> 标签：php, apache, rewrite

我正在编写的脚本有问题。

我有这些网址：

```
forum.php?f=topic&g=$1&id=$2&alias=$3
forum.php?f=group&g=$1
forum.php 
```

我需要重写那些有：

```
/forum/group/id-alias_topic > forum.php?f=topic&g=[GROUP]&id=[ID]&alias=[ALIAS_TOPIC]
/forum/group > forum.php?f=group&g=[GROUP]
/forum > forum.php 
```

我试过：

```
RewriteRule ^forum/([\w'-]+)/([0-9]+)-([\w'-]+) forum.php?f=topic&g=$1&id=$2&alias=$3
RewriteRule ^forum/([\w'-]+) forum.php?f=group&g=$1
RewriteRule ^forum/ forum.php 
```

但它不起作用。它只向我显示 forum.php
每个以开头的 URL 都`/forum`向我显示由提供的默认页面`/forum.php`

例如，`forum.php`将显示文本“MAIN PAGE”。

`forum.php?f=topic&g=[GROUP]&id=[ID]&alias=[ALIAS_TOPIC]`应该显示“GROUP + ID + ALIAS_TOPIC”

但如果我访问`/forum/android/1-first_topic`它会显示“MAIN PAGE”

如果我替换`^forum`为，例如`^foru`，它可以工作。我已经清理了浏览器缓存并重新启动了 apache，但它仍然无法正常工作。其他浏览器的问题也是一样的。在我的 /var/www 中有这些文件和目录：

```
administrator.php  assets  cache  forum_functions.php  forum.php  functions.php  global.php  index.php  media  notfound.php  OLD  pwdgen.php  robots.txt  rss.php  simple_html_dom.php  store.php  template  v.php 
```

你有什么建议吗？

[重写日志： http](http://pastebin.com/MeapYeBA) ://pastebin.com/MeapYeBA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:22:06.647

因为您没有使用`[L]`(last) 标志，也没有锚定表达式的末尾，`$`每个表达式都匹配前两个规则后的最后一条规则。

例如，此 URL 将匹配第一条规则和最后一条规则：`example.com/forum/group/123-thing`因为最后一条规则匹配`forum/`，如果没有*以*`$`.

添加`[L]`标志以防止失败，并终止正则表达式`$`

```
# Don't apply these if the file actually exists (like forum.php)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# This one doesn't really need to terminate in $
RewriteRule ^forum/([^/]+)/([0-9]+)-(.+) forum.php?f=topic&g=$1&id=$2&alias=$3 [L]
# This one must terminate with $
RewriteRule ^forum/([^/]+)$ forum.php?f=group&g=$1 [L]
# As must this one..
RewriteRule ^forum/?$ forum.php [L] 
```

我还`[\w'-]+`用一个更简单的替换了你的，`[^/]+`以便将所有内容与下一个匹配`/`。在最后一条规则中，我添加`/?`了允许可选的尾随`/`. 它同样适用于`[\w'-]+`，但由于您打算匹配 之间的所有内容`/`，`[^/]+`因此是一种更常见的模式。

上述每个规则都在[http://htaccess.madewithlove.be/进行了测试和处理](http://htaccess.madewithlove.be/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:22:35.420

您必须在 RewriteRule 的末尾放置跳过标志以停止其他规则使用 tihs **[S]**

```
 RewriteRule ^forum/([\w'-]+)/([0-9]+)-([\w'-]+)$ forum.php?f=topic&g=$1&id=$2&alias=$3 [S=2]
 RewriteRule ^forum/([\w'-]+)$ forum.php?f=group&g=$1 [S=1]
 RewriteRule ^forum/$ forum.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T21:40:13.910

感谢@Michael Berkowski 找到了解决方案

```
sudo nano /etc/apache2/sites-enabled/000-default 
```

并删除所有出现的 MultiViews，然后重新启动 apache。

# c++ - 在 C++ 中使用单链表进行插入排序

> ID：14902641
> 
> 赞同：0
> 
> 时间：2013-02-15T20:16:08.307
> 
> 标签：c++, linked-list, insertion-sort

我正在尝试为我的 LinkedList 类编写一个方法，该方法将按名称对 Person 对象的链接列表进行排序。我的方法编译得很好，但是当我尝试对人员列表进行排序时，输出不正确。它也永远不会停止运行。例如，这段代码

```
Person *p1 = new Person("K", "B");
Person *p2 = new Person("A", "A");
Person *p3 = new Person("S", "M");
Person *p4 = new Person("B", "M");

LinkedList ll;
ll.insertFront(*p1);
ll.insertFront(*p2);
ll.insertFront(*p3);
LinkedList newList = ll.insertionSort();
newList.print();
cout << endl; 
```

给出这个输出

```
B, K

A, A 
```

谁能帮我弄清楚我的算法哪里出错了？谢谢！

这是我用来按名字和名字对名字进行排序的方法：

```
int Person::compareName(Person p)
{
    if (lName.compare(p.lName) > 0)
    {
        return 1;
    }
    else if (lName.compare(p.lName) == 0)
    {
        if (fName.compare(p.fName) > 0)
        {
            return 1;
        }
        else return -1;
    }
    else return -1;
} 
```

插入排序方法：

```
LinkedList LinkedList::insertionSort()
   {
    //create the new list
    LinkedList newList;
    newList.front = front;

    Node *n;
    Node *current = front;
    Node *trail = NULL;

   for(n=front->link; n!= NULL; n = n->link)//cycle through old chain
{
    Node* newNode = n;

    //cycle through new, sorted chain to find insertion point
    for(current = newList.front; current != NULL; current = current->link)
    {
        //needs to go in the front
        if(current->per.compareName(n->per) < 0)
        {
            break;
        }

        else
        {
            trail = current;

        }
    }

    //if it needs to be added to the front of the chain
    if(current == front)
    {
        newNode->link = newList.front;
        newList.front = newNode;
    }
    //else goes in middle or at the end
    else{
        newNode->link = current;
        trail->link = newNode;
    }

    return newList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:29:45.217

你有 current->link 在你的内部 for 循环中，在 else 到内部 for 循环中。我假设你在 for 循环中确实有 current = current->link 或者它什么都不做。如果是这样，您将跳过所有其他元素。

您还有语言方面的问题-您不是在创建新节点，而是在更改原始列表中的节点。这意味着您在遍历列表时正在更改列表，这会在您对列表进行排序时损坏列表。行为未定义，取决于您添加元素的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:50:27.840

即使在您修复了任何链表处理问题（我没有看过）之后，您的`compareName()`函数也有一个缺陷 - 当比较`Person`具有相同姓氏的对象时，它可能会从函数返回而不提供值（在以下情况下`Name.compare(p.fName) <= 0`）。

从比较函数中获得不确定的结果几乎会破坏任何类型。

由于这可能是家庭作业，因此我将把纠正问题留作练习。

# jquery - 一开始隐藏的 jQuery 滑块：没有 JavaScript 的人的后备

> ID：14902645
> 
> 赞同：0
> 
> 时间：2013-02-15T20:16:12.730
> 
> 标签：jquery, css, noscript

我有一个小常见问题解答，人们可以在其中单击问题链接，并且使用 jQuery 很好地显示答案`slideToggle()`。

默认情况下，答案是隐藏的，您必须单击它们才能显示它们。**我不想在页面加载时有初始幻灯片。**

问题是没有 JavaScript 的人无法给出答案。为了让这些人看到他们，他们应该是直接可见的。

如果我在加载页面时滑入答案是可能的，但我发现解决方案不优雅。知道如何保留我的解决方案吗？

我在这里做了一个 jsFiddle：http: [//jsfiddle.net/s5HNd/3/](http://jsfiddle.net/s5HNd/3/)

我的代码：

**HTML：**

```
<div>
<ul class="faqquestions">
    <li>
        <span class="faqlink">First Question</span>
        <div class="faqreponse">First answer</div>
    </li>
    <li>
        <span class="faqlink">Second question</span>
        <div class="faqreponse">Second answer</div>
    </li>
</ul>
</div> 
```

**CSS：**

```
ul.faqquestions li { cursor: pointer; }
div.faqreponse { overflow: hidden; } 
```

**JavaScript：**

```
$(document).ready(function () {
    'use strict';
    $("ul.faqquestions li").each(function () {
        var tis = $(this), state = false, answer = 
            tis.children(".faqreponse").hide().css('height', 'auto').slideUp();

        $(this).children(".faqlink").click(function () {
            state = !state;
            answer.slideToggle(state);
        });
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:53:59.727

有了[这个问题](https://stackoverflow.com/questions/218162/embedding-extra-styles-with-noscript)，我发现`noscript`标签可以在但`head`在 HTML5 中有效。而且，里面可以写样式！

所以解决方案是`head`在页面的标签之间添加这段代码：

```
<noscript>
<style>
    div.faqreponse {
        height: auto;
        overflow: visible;
    }
</style>
</noscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:28:41.180

默认情况下，您可以看到答案，并且在页面加载时（甚至在加载每个答案元素时），您可以通过 JavaScript 隐藏答案（您可能必须使用`.slideToggle(0)`哪个应该立即将它们关闭）。这样，那些使用 JavaScript 的人仍然可以滑动打开/关闭答案，但由于一开始没有关闭，它们会显示给非 JS 用户。

诚然，由于您必须等到加载内容，这对于 JavaScript 用户（这是大多数 Internet 用户）在视觉上可能并不令人满意。我会仔细权衡这个`noscript`建议。您是否希望您的大部分观众禁用 JS？

# fullcalendar - 角度日历指令未在 jquery 选项卡中呈现

> ID：14902646
> 
> 赞同：1
> 
> 时间：2013-02-15T20:16:21.727
> 
> 标签：fullcalendar, jquery-tabs, angular-ui

关于角度日历指令的另一个问题。我需要在一页上显示多个日历，并且正在使用 jquery 选项卡小部件。但是，只有一个日历可以正确呈现。在普通的 jquery fullCalendar 中，您使用 'render' 方法来确保在选择选项卡时显示日历。但是，这似乎不适用于 angular-ui 日历指令。

这是一个显示我的意思的plunker。删除 $().tabs() 和三个角度日历显示就好了。将它们包装在标签中，它不再起作用：

[http://plnkr.co/edit/HEEX4iqb8kFAsjwdGmkM](http://plnkr.co/edit/HEEX4iqb8kFAsjwdGmkM)

关于为什么这不起作用以及如何解决它的任何想法？

谢谢！

PS。我将在 Google Groups 中交叉发布这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:23:15.597

似乎尽管有 fullCalendar 文档，但“显示”并不是触发 fullcalendar('render') 的地方。我应该说，至少在使用 Angular 时不会。我不知道在正常的 jQuery 使用下这是否正确。请改用“激活”事件：

```
$("#tabs").tabs({
  activate: function(){
    ("#calendar").fullCalendar('render');
  }
}); 
```

[http://plnkr.co/edit/HEEX4iqb8kFAsjwdGmkM](http://plnkr.co/edit/HEEX4iqb8kFAsjwdGmkM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T16:39:59.120

渲染时使用超时。

```
<tab heading="{{tabs[0].title}}" active="tabs[0].active" select="renderCalendar()" disabled="tabs[0].disabled">

     $scope.renderCalendar = function() {
               $timeout(function(){
                    $('.calendar').fullCalendar('render');
                }, 0);
        }; 
```

# c# - 如何处理外部 dll 中单独线程上的异常？

> ID：14902657
> 
> 赞同：1
> 
> 时间：2013-02-15T20:17:08.190
> 
> 标签：c#

我正在加载一个在自身内部产生几个线程的 dll。程序时不时地因未处理的异常而崩溃。我无法将所有库调用包装在 try/catch 语句中，因为异常是在单独的线程上引发的，而且我无权访问库的源来调试/修复错误处理。我希望程序在这些异常发生时继续做其他事情，是否有一种优雅的方式来处理这些异常？还是我唯一能做的就是做一个全局捕获所有异常的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:36:02.183

我建议实施一个单独的进程 (EXE)，您的应用程序将启动该进程并加载 DLL。

这使您可以在需要时终止/重新启动进程...

我看到了几个关于如何沟通的选项 - 例如：

*   您可以使用 COM（如果您将其实现为进程外 COM 服务器）
*   您可以使用共享内存（非常高性能，请参阅[this](http://www.codeproject.com/Articles/138290/Programming-Memory-Mapped-Files-with-the-NET-Frame) for a walkthrough和[this](http://www.codeproject.com/Articles/7851/A-C-Framework-for-Interprocess-Synchronization-and) for a .NET 2 wrapper）

如果该方法必须与多个 Windows 版本兼容，那么我将避免对 IPC 使用任何“网络”（因为有些带有桌面防火墙）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:29:08.153

如果您将 DLL 加载到单独的 appdomain 中，您应该能够隔离使用`AppDomain.UnhandledException`.可以解决它（堆栈溢出，内存不足等）。

在这种情况下，您可以做的最好的事情是使用某种 dll 通信工具将它们完全加载到一个单独的进程中，并使用某种形式的远程处理与该进程对话。

# javascript - Checkbox.checked 在 OnClick 事件函数中未定义

> ID：14902663
> 
> 赞同：1
> 
> 时间：2013-02-15T20:17:37.460
> 
> 标签：javascript, html

使用以下代码，两个 Javascript 函数都显示 .Checked 值未定义。有谁知道为什么？当设置 cb2 复选框时，我需要取消设置 cb1 复选框，反之亦然。

```
<html>
  <head>
    <script language="JavaScript" type="text/javascript"> 
<!--
    function cb2Unset(id){
        box = document.getElementById(id);
        alert(box.Checked);
        if (box.Checked==true){
            testForm.cb2.Checked = false;
        }
    }

    function cb1Unset(id){
        box = document.getElementById(id);
        alert(box.Checked);
        if (box.Checked==true){
            testForm.cb1.Checked = false;
        }
    }
-->
    </script>
  </head>
  <body>
    <form method="post" name="testForm"> 
    <input checked="checked" value="1" name="cb1" id="cb1" onclick="cb2Unset(this.id)" type="checkbox"> 
    <input value="1" name="cb2" id="cb2" onclick="cb1Unset(this.id)" type="checkbox"> 
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:19:04.077

JavaScript 是区分大小写的语言。

它应该是`checked`小写字母，即`box.checked`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T20:19:22.733

除非您在某处有自定义~~函数~~ ***属性：***

```
element.checked 
```

不是

```
element.Checked 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T20:19:25.627

没有“已检查”属性。试试小写：

```
box.checked == true; 
```

# jquery - 跳过 div 后面的绘图画布

> ID：14902666
> 
> 赞同：0
> 
> 时间：2013-02-15T20:17:49.220
> 
> 标签：jquery, html, processing.js

我`canvas`的文档中有一个 HTML5。在该画布上`div`可能有一些 s，将画布隐藏在它们后面（但画布的一部分仍然可见）。

知道画布的位置如何检查哪些 div 实际覆盖了画布，以便我不再在这些 div 后面绘制以提高性能？

我实际上如何只绘制画布的一部分以节省一些处理能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:38:56.530

要确定是否存在重叠：

```
var divid = document.getElementById ("myDiv");
var canvasid = document.getElementById ("myCanvas");

var div = divid.getBoundingClientRect();
var canvas = canvasid.getBoundingClientRect();

var overlap = !(div.right < canvas.left || 
                div.left > canvas.right || 
                div.bottom < canvas.top || 
                div.top > canvas.bottom); 
```

为了防止在分层 div 下绘制，我会在画布上的绘图中使用左/右/上/下偏移。

# sitecore - 在多站点站点核心外联网中设置默认页面时出错

> ID：14902667
> 
> 赞同：1
> 
> 时间：2013-02-15T20:17:50.893
> 
> 标签：sitecore, sitecore6

我有一个多站点配置，其中一个站点是安全的外联网

*   未登录的用户（匿名）将被重定向到登录页面

*   默认页面是主页

所以我的配置是这样的

```
<site name="aodextranet" hostName="preprod.aodextranet.org" virtualFolder="/" 
      physicalFolder="/" rootPath="/sitecore/content/Sites/Extranet" 
      startItem="/Home" database="web" domain="extranet" allowDebug="true"
      cacheHtml="true" htmlCacheSize="10MB" registryCacheSize="0" 
      viewStateCacheSize="0" xslCacheSize="5MB" filteredItemsCacheSize="2MB"
      enablePreview="true" enableWebEdit="true" enableDebugger="true"
      disableClientData="false" loginPage="/login.aspx" /> 
```

*   如果我去 mysite/home 我会按预期重定向到登录页面

*   但是如果我只写 mysite 而没有明确引用主页，那么网站会抛出一个错误：没有布局页面。

如果 /home 是配置文件中的启动项，我应该回到主页，然后重定向到登录页面。我试过大写和小写都没有成功

这是一个屏幕投射 [http://screencast.com/t/aiF0BNk4lWr](http://screencast.com/t/aiF0BNk4lWr)

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:07:02.397

sitecore 项目`/sitecore/content/Sites/Extranet/Home`是您在浏览器中导航到 时显示的项目`preprod.aodextranet.org`。这个项目应该有一个布局和子布局/渲染添加到演示选项卡。查看您的配置，您似乎错误地配置了站点定义或没有将演示元素添加到项目 /extranet/home。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:25:54.447

找到了！在多站点配置中创建新站点后，您必须发布整个站点...我只发布站点节点和模板。运行完整发布后，该站点的行为符合预期。

# c# - C# TCP Server 停止接收客户端消息，服务重启后恢复

> ID：14902671
> 
> 赞同：1
> 
> 时间：2013-02-15T20:18:05.850
> 
> 标签：c#, sockets, tcp, windows-services

我在使用 C# 编写的托管 Windows 服务中工作。它不断接收来自多个通过 TCP/IP 连接的客户端的消息。客户端基本上是一个路由器，从温度计接收和重新发送消息到服务器。服务器解析消息并将它们存储在 SQL Server 数据库中。

我面临的问题是某些客户端突然停止发送消息。但是，一旦服务重新启动，它们就会再次连接并继续发送。我没有客户端的代码，因为它是第三方设备，我很确定问题出在服务器上。

我通过实现一个不断检查每个客户端是否仍然连接的计时器来设法减少问题（参见下面的代码）。另外，我使用该`socket.IOControl(IOControlCode.KeepAliveValues, ...)`方法向 Socket 添加了 Keep Alive 模式，但问题仍然存在。

我正在从我认为相关的特定部分发布一些代码。但是，如果需要更多片段来理解问题，请询问我，我将编辑帖子。删除了所有的 try/catch 块以减少代码量。

**我不想要一个完美的解决方案，只是任何指导将不胜感激。**

```
private Socket _listener;
private ConcurrentDictionary<int, ConnectionState> _connections;

public TcpServer(TcpServiceProvider provider, int port)
{
    this._provider = provider;
    this._port = port;
    this._listener = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    this._connections = new ConcurrentDictionary<int, ConnectionState>();

    ConnectionReady = new AsyncCallback(ConnectionReady_Handler);
    AcceptConnection = new WaitCallback(AcceptConnection_Handler);
    ReceivedDataReady = new AsyncCallback(ReceivedDataReady_Handler);
}                

public bool Start()
{    
    this._listener.Bind(new IPEndPoint(IPAddress.Any, this._port));
    this._listener.Listen(10000);
    this._listener.BeginAccept(ConnectionReady, null);    
}

// Check every 5 minutes for clients that have not send any message in the past 30 minutes
// MSG_RESTART is a command that the devices accepts to restart
private void CheckForBrokenConnections()
{
    foreach (var entry in this._connections)
    {
        ConnectionState conn = entry.Value;

        if (conn.ReconnectAttemptCount > 3)
        {
            DropConnection(conn);
            continue;
        }

        if (!conn.Connected || (DateTime.Now - conn.LastResponse).TotalMinutes > 30)
        {
            byte[] message = HexStringToByteArray(MSG_RESTART);

            if (!conn.WaitingToRestart && conn.Write(message, 0, message.Length))
            {
                conn.WaitingToRestart = true;                    
            }
            else
            {
                DropConnection(conn);                
            }
        }
    }        
}

private void ConnectionReady_Handler(IAsyncResult ar)
{    
    lock (thisLock)
    {
        if (this._listener == null)
            return;

        ConnectionState connectionState = new ConnectionState();
        connectionState.Connection = this._listener.EndAccept(ar);

        connectionState.Server = this;
        connectionState.Provider = (TcpServiceProvider)this._provider.Clone();
        connectionState.Buffer = new byte[4];
        Util.SetKeepAlive(connectionState.Connection, KEEP_ALIVE_TIME, KEEP_ALIVE_TIME);
        int newID = (this._connections.Count == 0 ? 0 : this._connections.Max(x => x.Key)) + 1;
        connectionState.ID = newID;
        this._connections.TryAdd(newID, connectionState);

        ThreadPool.QueueUserWorkItem(AcceptConnection, connectionState);

        this._listener.BeginAccept(ConnectionReady, null);
    }
}

private void AcceptConnection_Handler(object state)
{    
    ConnectionState st = state as ConnectionState;
    st.Provider.OnAcceptConnection(st);

    if (st.Connection.Connected)
        st.Connection.BeginReceive(st.Buffer, 0, 0, SocketFlags.None, ReceivedDataReady, st);    
}

private void ReceivedDataReady_Handler(IAsyncResult result)
{
    ConnectionState connectionState = null;

    lock (thisLock)
    {
        connectionState = result.AsyncState as ConnectionState;
        connectionState.Connection.EndReceive(result);

        if (connectionState.Connection.Available == 0)
            return;

        // Here the message is parsed
        connectionState.Provider.OnReceiveData(connectionState);

        if (connectionState.Connection.Connected)
            connectionState.Connection.BeginReceive(connectionState.Buffer, 0, 0, SocketFlags.None, ReceivedDataReady, connectionState);
    }
}

internal void DropConnection(ConnectionState connectionState)
{
    lock (thisLock)
    {
        if (this._connections.Values.Contains(connectionState))
        {
            ConnectionState conn;
            this._connections.TryRemove(connectionState.ID, out conn);
        }

        if (connectionState.Connection != null && connectionState.Connection.Connected)
        {
            connectionState.Connection.Shutdown(SocketShutdown.Both);
            connectionState.Connection.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:02:50.123

*我认为*我看到的两件事...

*   如果这是您为多条消息保留的连接，则您可能不应该从 IIRC 可以接收到 0 长度数据包`ReceivedDataReady_Handler`时返回。`connectionState.Connection.Available == 0`因此，如果连接仍然打开，您应该`connectionState.Connection.BeginReceive( ... )`在离开处理程序之前调用。

*   （我犹豫把它放在这里，因为我不记得具体细节）有一个事件可以告诉你底层连接发生的时间，包括连接或关闭连接的错误和失败。对于我的生活，我不记得名字......这可能比每隔几秒的计时器更有效。它还为您提供了一种方法来打破卡在连接或关闭状态的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:20:22.267

在所有 IO 调用周围添加 try/catch 块，并将错误写入日志文件。事实上，它无法在错误时恢复。

此外，请注意任何没有超时的锁。应该给这些操作一个合理的 TTL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:34:25.087

我曾多次经历过这样的情况。问题可能根本不在于您的代码，而在于网络以及 Windows（两端）或路由器处理网络的方式。经常发生的情况是临时网络中断“破坏”了套接字，但 Windows 并没有意识到这一点，因此它不会关闭套接字。

克服这个问题的唯一方法正是您所做的 - 发送保持活动状态并监视连接运行状况。一旦您发现连接已断开，您需要重新启动它。但是，在您的代码中，您不会重新启动也已损坏且无法接受新连接的侦听器套接字。这就是重新启动服务有帮助的原因，它会重新启动侦听器。

# java - Heapify 功能不起作用

> ID：14902679
> 
> 赞同：0
> 
> 时间：2013-02-15T20:18:58.180
> 
> 标签：java, data-structures, heap

我一直在尝试编写一个递归 heapify 方法，将整数数组转换为最小堆。Main 和 Heap 类如下所示。Main 中显示的大多数数组已经是最小堆，但子树 [11, 4, 5] 不是最小堆。但是， heapify 函数似乎没有到达那个子树。我无法弄清楚问题是什么，任何帮助将不胜感激。

```
public class Heap { 
public Heap(int[] array) { 
    heap = array;
}

public void heapify() { 
    heapifyHelper(0);
}

public void heapifyHelper(int rootIndex) { 
    if(isLeafIndex(rootIndex)) { 
        return;
    }

    else { 
        int leftChildIndex = getLeftChildIndex(rootIndex);
        int rightChildIndex = getRightChildIndex(rootIndex);
        int leftChildValue = heap[leftChildIndex];
        int rightChildValue = heap[rightChildIndex];
        int rootValue = heap[rootIndex];

        if(leftChildValue < rootValue && leftChildValue < rightChildValue) { 
            swap(rootIndex, leftChildIndex);
            heapifyHelper(leftChildIndex);
            heapifyHelper(rightChildIndex);
        }

        else if(rightChildValue < rootValue && rightChildValue < leftChildValue) { 
            swap(rootIndex, rightChildIndex);
            heapifyHelper(leftChildIndex);
            heapifyHelper(rightChildIndex);

        }
    }
}

public int getLeftChildIndex(int parentIndex) { 
    return 2 * parentIndex + 1;
}

public int getRightChildIndex(int parentIndex) { 
    return 2 * parentIndex + 2;
}

public int getParentIndex(int childIndex) { 
    if(childIndex == 0) { 
        throw new IllegalArgumentException("Cannot get the parent index of the root.");
    }
    else { 
        return (childIndex / 2) - 1;
    }
}

public boolean isLeafIndex(int index) { 
    int leftIndex = getLeftChildIndex(index);
    int rightIndex = getRightChildIndex(index);
    if(leftIndex >= heap.length && rightIndex >= heap.length) { 
        return true;
    }
    else { 
        return false;
    }
}

public void swap(int index1, int index2) { 
    int temp = heap[index1];
    heap[index1] = heap[index2];
    heap[index2] = temp;
}

public void printHeap() { 
    System.out.println(Arrays.toString(heap));
}
int[] heap;
  }

public class Main { 
public static void main(String[] args) { 
    int[] x = {0, 5, 2, 9, 11, 6, 12, 21, 32, 4, 5};
    Heap heap = new Heap(x);
    heap.printHeap();
    heap.heapify();
    heap.printHeap();
}
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:42:51.570

你的有几个问题`heapifyHelper`：

```
public void heapifyHelper(int rootIndex) { 
    if(isLeafIndex(rootIndex)) { 
        return;
    }

    else { 
        int leftChildIndex = getLeftChildIndex(rootIndex);
        int rightChildIndex = getRightChildIndex(rootIndex);
        int leftChildValue = heap[leftChildIndex];
        int rightChildValue = heap[rightChildIndex]; 
```

万一`leftChildIndex == heap.length - 1`呢？然后`rightChildValue`会导致`ArrayIndexOutOfBoundsException`.

```
 int rootValue = heap[rootIndex];

        if(leftChildValue < rootValue && leftChildValue < rightChildValue) { 
            swap(rootIndex, leftChildIndex);
            heapifyHelper(leftChildIndex);
            heapifyHelper(rightChildIndex);
        }

        else if(rightChildValue < rootValue && rightChildValue < leftChildValue) { 
```

如果两个孩子都相等，并且比父母小怎么办？在这种情况下，您根本不交换。

```
 swap(rootIndex, rightChildIndex);
            heapifyHelper(leftChildIndex);
            heapifyHelper(rightChildIndex);

        }
    }
} 
```

`[11, 4, 5]`未到达子树的原因是`heapifyHelper`，如果其中一个子节点小于父节点，则仅调用子节点，但是当您调用 时`heapifyHelper(1)`，节点的两个子节点`5`是`9`and `11`，都大于根值。（实际上，您甚至都不打电话`heapifyHelper(1)`，因为`heap[0]`它已经比它的两个孩子都小。）

但是通过无条件重复（在存在的孩子身上）单独纠正这一点并不能使你`heapify`正确。如果你从根到叶子递归，每个值最多可以冒泡一个级别。您必须从叶子递归到根^((1))，并且您需要完全筛选值，而不仅仅是一层。

如果您只将一个值与其其中一个子级交换，则每个位置最多被考虑两次。一次将其与其父级进行比较，一次将其与其子级进行比较。当你从根到叶时，当你将一个位置与它的子级进行比较时，它上面的任何位置（甚至没有更小的索引的位置）都不能再改变了。

所以每个值最多可以冒泡一个级别。如果最小元素低于 root 的直接子元素，则 root 不会成为树中的最小元素。如果你从叶子（或者更确切地说是叶子的父母）开始，值可以根据需要冒泡。但是，如果您只将一个值与其较小的孩子交换（如果它小于该值），则每个值仍然只能向下冒泡一个级别，这仍然不需要创建堆。

让我们考虑一下树

```
 7
    / \
   /   \
  2     6
 / \   / \
1   3 4   5 
```

如果你从根到叶，你交换`2`和`7`首先，给

```
 2
    / \
   /   \
  7     6
 / \   / \
1   3 4   5 
```

前两个级别现在是最小堆。

然后你处理左子树，最后是右子树，产生

```
 2
    / \
   /   \
  1     4
 / \   / \
7   3 6   5 
```

共。现在底部两层由最小堆组成，但堆属性在上一层被破坏。要再次使其成为堆，`1`必须进一步筛选（在这种情况下，只有一层）。

如果你从叶子到根，你首先处理右子树，

```
 6
 / \
4   5 
```

生产

```
 4
 / \
6   5 
```

为此，然后是左子树

```
 2
 / \
1   3 
```

生产

```
 1
 / \
2   3 
```

那里。两个子树现在都是最小堆。总之，你有

```
 7
    / \
   /   \
  1     4
 / \   / \
2   3 6   5 
```

然后你会交换`7`and `1`，产生

```
 1
    / \
   /   \
  7     4
 / \   / \
2   3 6   5 
```

现在根是最小值，但最后一次交换破坏了左子树的堆属性。为了再次使之成为一堆，`7`必须进一步筛选。

因此，您需要一种`siftDown`方法（和/或`siftUp`方法）来根据需要向下（向上）筛选值。

```
private void siftDown(int index) {
    int leftChildIndex = getLeftChildIndex(index);
    if (leftChildIndex >= heap.length) {
        // a leaf, no further sifting down possible
        return;
    }
    int rightChildIndex = getRightChildIndex(index);
    if ((heap[leftChildIndex] < heap[index])
        && (rightChildIndex >= heap.length || heap[rightChildIndex] >= heap[leftChildIndex)) {
        // left child is smallest or only, and smaller than parent
        swap(index, leftChildIndex);
        siftDown(leftChildIndex);
    } else
        // left child not smaller than parent, or right child exists and is smaller than parent
        if (rightChildIndex < heap.length && heap[rightChildIndex] < heap[index]) {
            swap(index, rightChildIndex);
            siftDown(rightChildIndex);
        }
        // otherwise, this one has no smaller child, so no more sifting needed
} 
```

那么正确的`heapify`将是

```
public void heapify() {
    // last index that has a child:
    int lastNonLeafIndex = heap.length/2 - 1;
    for(int index = lastNonLeafIndex; index >= 0; --index) {
        siftDown(index);
    }
} 
```

这是有效的，因为如果您有一个（二叉树）树，其中两个子树都是最小堆，则筛选根值会构造一个最小堆：

*   如果根值小于（或等于）它的两个子节点，则整个树已经是一个最小堆。
*   否则，在根值与其较小的孩子交换之后（不失一般性左边），另一个子树不变，因此仍然是最小堆。并且，由于左孩子是交换前左子树中的最小值，因此根处的值是交换后整个树中的最小值。不过，交换可能已经破坏了左孩子的最小堆属性。但是左右子树并没有改变，所以它们仍然是最小堆。并且新的左子树小于原始树，因此根据归纳假设，筛选其根值会从中创建一个最小堆。所以筛选完成后，我们就有了一个根值最小的树，它的两个子树都是最小堆，也就是最小堆。

由于每个叶子都是一个最小堆，因此对于在 中处理的每个索引`heapify`，以该索引为根的子树成为一个最小堆。

替代方案，使用`siftUp`：

```
private void siftUp(int index) {
    if (index == 0) return; // root, nothing to do
    int parentIndex = getParentIndex(index); // see Note below
    if (heap[index] < heap[parentIndex]) {
        swap(index, parentIndex);
        siftUp(parentIndex);
    }
}

public void heapify() {
    for(int index = 1; index < heap.length; ++index) {
        siftUp(index);
    }
} 
```

for 的代码`siftUp`比 for 短很多`siftDown`，因为这里只涉及两个节点，不需要检查是否有任何子索引落在数组之外。但是`heapify`效率较低（见脚注^(（1）)）。

`siftUp`是用于将新值插入堆的方法。所以这个通过将所有值（根值除外）插入现有的最小堆来构建一个堆[当`siftUp(index)`被调用时，之前的数组部分`index`已经是一个最小堆]。

注意：你`getParentIndex`的不正确，

```
return (childIndex / 2) - 1; 
```

说索引的父级`1`是`-1`，索引的父级`3`是`0`，正确的是

```
return (childIndex - 1) / 2; 
```

^((1))实际上，如果您根据需要向上筛选每个值，您可以从根到叶。从叶子的 [parents of the] 到根的 heapify 会更有效。如果你从根到叶，在级别`k`你有`2^k`可能需要冒泡`k`级别的值，这给`O(n*log n)`构建堆带来了复杂性。如果您从 [parents of the] 叶子向上进行，则您的`2^(log n - 1 - k)`值可能需要向下冒泡，这给构建堆`k`带来了复杂性。`O(n)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:31:54.513

所以我想我弄清楚了问题所在。

您的 heapify 助手会在您找到一个根小于 leftChild 和 rightChild 的根的那一刻停止。

在运行您的案例时..您会遇到 root (5) 小于 11 和 9 ..但是 11 没有堆积的情况..

解决这个问题的方法很多。我留给你的。

编辑所以 heapify 理想情况下只是将 rootIndex 中的第一个元素放在正确的位置。不创建堆。

如果要创建正确的堆，则需要插入一个新元素并在每次插入时调用 heapify。

# vba - Range.AutoFilter 仅使用最后一个条件？VBA

> ID：14902681
> 
> 赞同：0
> 
> 时间：2013-02-15T20:19:06.007
> 
> 标签：vba, autofilter

我有一张表要移到别处，我想删除大部分数据（有很多空白或 0 我并不真正关心）。到目前为止，这是我所拥有的代码：

```
Dim srcRange As Range
Dim copysheet As Worksheet

Set copysheet = ActiveSheet

Set srcRange = copysheet.range("B1:D1598")
srcRange.AutoFilter Field:=3, Criteria1:=Array("#VALUE!", "Count", 0, Empty)
srcRange.Delete 
```

使用此设置它只会删除空白，因此我使用以下变体对其进行了几次测试：

```
'this code will return only the 0's
Dim srcRange As Range
Dim copysheet As Worksheet

Set copysheet = ActiveSheet

Set srcRange = copysheet.range("B1:D1598")
srcRange.AutoFilter Field:=3, Criteria1:=Array("#VALUE!", "Count", 0)

'this code will return only the "count"'s
Dim srcRange As Range
Dim copysheet As Worksheet

Set copysheet = ActiveSheet

Set srcRange = copysheet.range("B1:D1598")
srcRange.AutoFilter Field:=3, Criteria1:=Array("#VALUE!", "Count") 
```

所以我得出的结论是，出于某种原因，自动筛选工具仅根据我放入标准 1 的最后一个标准进行筛选。谁能给我一些关于为什么的见解？

仅供参考-我的临时解决方法是运行 4 个过滤/删除命令而不是一个，它工作正常-我只是想了解一下导致这种情况的原因。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:27:54.477

您需要添加`Operator:=xlFilterValues`到您的 AutoFilter 调用：

```
srcRange.AutoFilter Field:=3, Criteria1:=Array("#VALUE!", "Count"), Operator:=xlFilterValues 
```

这将过滤 Criteria1 中提供的所有元素

# windows - 在 Windows 上编译 Clang

> ID：14902683
> 
> 赞同：4
> 
> 时间：2013-02-15T20:19:18.940
> 
> 标签：windows, llvm, clang

我按照[http://clang.llvm.org/get_started.html的说明进行操作](http://clang.llvm.org/get_started.html)

我用 MSVC 2010 编译了最新的 llvm 和 clang 主干。现在我可以用 Clang 编译简单的程序，但是当我试图编译这个程序时，我得到了很多错误。这是程序：

```
#include <algorithm>
int main(){ return 0; } 
```

以下是一些错误：

```
In file included from hello.cpp:1:
In file included from C:\Program Files\Microsoft Visual Studio 10.0\VC\include\algorithm:6:
In file included from C:\Program Files\Microsoft Visual Studio 10.0\VC\include\memory:987:
In file included from C:\Program Files\Microsoft Visual Studio 10.0\VC\include\intrin.h:24:
In file included from H:/LLVM/build/bin/Debug/../lib/clang/3.3/include\immintrin.h:32:
In file included from H:/LLVM/build/bin/Debug/../lib/clang/3.3/include\xmmintrin.h:988:
H:/LLVM/build/bin/Debug/../lib/clang/3.3/include\emmintrin.h:1384:22: error: expected expression
  return (__m128)__in;
                     ^
H:/LLVM/build/bin/Debug/../lib/clang/3.3/include\emmintrin.h:1390:23: error: expected expression
  return (__m128i)__in;
                      ^
H:/LLVM/build/bin/Debug/../lib/clang/3.3/include\emmintrin.h:1396:23: error: expected expression
  return (__m128d)__in;
                      ^ 
```

Clang 的完整输出：http: [//pastebin.com/qi87K8qr](http://pastebin.com/qi87K8qr)

Clang 尝试使用 MSVC 标头，但它不起作用。也许我应该改用 libc++ 或 libstdc++，但是该怎么做呢？

**注意**我对预编译的 clang 二进制文件不感兴趣

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:38:01.047

是的，clang 根本不支持 Microsoft 的所有扩展 C++ 语法，因此无法解析使用该语法的 Microsoft C++ 标头。不仅如此，Clang 也不完全支持 Microsoft 的 C++ ABI、名称修改等。不过，我相信 Windows 上的 Clang 可以与 C 一起使用。

要使用不同的 C++ 标准库，您可以让 clang 忽略正常的头文件和库目录，IIRC`-nostdinc++`和`-nostdlib++`. 然后你可以告诉 clang 你想要使用的包含和库目录（使用`-isystem`或`-I`其他）。但是我不确定 libc++ 或 libstdc++ 是否在这些情况下工作，因为它们可能依赖于 Windows C 运行时库没有的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T05:28:40.880

Chandler Carruth[在 Going Native 2013 上提到，](http://channel9.msdn.com/Events/GoingNative/2013/The-Care-and-Feeding-of-C-s-Dragons)现在有[适用于 Windows 的 alpha 版本的 clang](http://llvm.org/builds/)与 Visual Studio 集成。很多东西都坏了，例如，流（这么好的旧的 hello world 不会工作）。然而，为了让 clang 在 Windows 上工作，我们付出了很多努力，所以希望它很快就会变得相当好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:19:52.893

错误出现在与 clang 本身一起提供的标头中。看起来它无法正确处理 MMX/SSE 类型。尝试将 -msse -msse2 开关添加到命令行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T13:18:10.397

我正在使用 libstdc++ 并使用 VS2012Express 为桌面构建 clang。cmake 字符串是“Visual Studio 11 Win64”和基本目录。使用 -I 参数指定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-22T10:51:23.330

如果我在 Windows 上使用 mingw 头文件，我猜你的程序可以工作。

# python - 将平面列表变成二元组

> ID：14902686
> 
> 赞同：5
> 
> 时间：2013-02-15T20:19:31.127
> 
> 标签：python

是否有单行表达式来完成以下操作：

```
input = ['this', 'is', 'a', 'list']
output = [('this', 'is'), ('a', 'list')] 
```

我最初的想法是创建两个列表，然后将它们压缩起来。那需要三行。

该列表将包含偶数个元素。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T20:23:01.393

这很短：

```
zip(input, input[1:])[::2] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T20:25:17.390

```
In [4]: zip(*[iter(lst)]*2)
Out[4]: [('this', 'is'), ('a', 'list')] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T20:21:59.130

```
>>> input = ['this', 'is', 'a', 'list']

>>> [(input[i], input[i + 1]) for i in range(0, len(input), 2)]
[('this', 'is'), ('a', 'list')] 
```

# asp.net - .net mvc 路由参数处理动作

> ID：14902689
> 
> 赞同：0
> 
> 时间：2013-02-15T20:19:51.490
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-routing

我想知道这是否可能（似乎应该是）

我想有一条路线，例如：

/events/{id}/addcomment

其中 {id} 是用于标识事件以添加评论的参数。我知道我可以简单地做 /events/addcomment/{id} 但这不是我希望路由这个动作的方式所以这是我到目前为止通过查看其他 SO 帖子得到的

我在我的 global.asax 文件中注册了一条路线 -

```
 routes.MapRoute(
            "AddComment",
            "Events/{id}/AddComment",
            new { controller = "Events", action = "AddComment", id = "" }
        ); 
```

然后我在事件控制器中的操作 -

```
[ActionName("{id}/AddComment")]
public ActionResult AddComment(int id)
{
    Event _event = db.Events.Find(id);
    var auth = OAContext.LoginRedirect("Must be logged in to add a comment");
    if (auth != null)
        return auth;
    else if (_event == null)
        return HttpNotFound();
    else
        return View(_event);
} 
```

我已经尝试过使用和不使用 ActionName 注释，但不完全确定我在这里做错了什么。

稍后我计划拥有诸如 /events/{eventId}/comment/{commentId}/{action} 之类的路由，允许用户从事件中编辑/删除他们的评论，但首先我需要弄清楚如何路由这个.

我问这个的原因是我没有在 url 中看到任何其他参数执行操作的示例，所以也许我只是无法做到这一点，如果是这样的话，那就太好了。

我的问题：**这种 url 格式是否可行，如果可以，将其编码到路由和控制器中的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:06:59.060

这是一条应该可行的路线：

```
routes.MapRoute(
   "AddComment",
   "Events/{id}/AddComment",
   new { controller = "Events", action = "AddComment" }
); 
```

您无需在操作上使用任何 ActionName 属性即可。只需确保您在默认路由**之前定义了此路由。**另请注意，由于`{id}`路由参数不是路由定义的最后一部分，它不再是可选的。在生成路由时，您应该始终为其指定一个值。

例如：

```
@Html.ActionLink(
    "click me", 
    "AddComment", 
    "Events",
    new { id = "123" },
    null
) 
```

# bash - 使多个命令出现在同一输出行

> ID：14902693
> 
> 赞同：4
> 
> 时间：2013-02-15T20:20:10.067
> 
> 标签：bash

嗨，我一直有这个问题

```
echo 'Welcome to my first Script'
mkdir myScript
cd myScript
touch doc1 sales.doc.test2.txt outline.doc

echo 'You now have ' ;find . -type f|wc -l;echo 'files in your "myScript" folder'

address="205"
echo -n "Please enter your favourite number:"
read myvar
echo "The number you entered is $myvar" 
```

我试图让输出说“您现在在 myScript 文件夹中有 (3) 个文件”作为一行，但它一直在 3 个单独的行上输出它们。我在这里尝试了 3 或 4 个不同的代码（通过单击上面的类似问题），但它们给了我有趣的错误，这只是我的第一个脚本，所以我理解我正在使用的所有命令（减去文件的计算，我不得不谷歌那个）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T20:26:06.657

`echo "You now have $(find . -type f|wc -l ) files in your \"myScript\" folder"`

此外，我建议将其更改`find`为 include `-maxdepth 1`，否则您将递归...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T20:24:08.330

它们位于不同的行上，因为`echo`并`wc`输出换行符。

一种解决方法是：

```
echo 'You now have' $(find . -type f | wc -l) 'files in your "myScript" folder' 
```

在这里，我们去掉了额外的`echo`换行符，因为我们使用一个`echo`来统治它们。我们摆脱了`wc`换行符，因为通过这种替换，输出`wc`被分解为单词，并且这些单词`echo`作为单独的参数传递给；单词分隔符丢失（echo 在输出时使用空格分隔其参数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T20:22:41.983

使用 no-new-line 开关`-n`并回显您的结果`find`：

```
echo -n 'You now have ' ; echo -n "`find . -type f|wc -l`"; echo -n ' files in your "myScript" folder' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:53:26.047

使用`printf`命令：

```
printf 'You now have %d files in your "myScript" folder' $( find . -type f | wc -l ) 
```

（使用嵌入在字符串中的命令替换对其他答案略有不同。）

# php - 如果我发布了一个包含数据库用户 pw 的 php 文件，我的 mysql 数据库是否容易受到攻击？

> ID：14902696
> 
> 赞同：0
> 
> 时间：2013-02-15T20:20:21.207
> 
> 标签：php, mysql, security

我发布了一个我刚刚意识到的 php 文件，其中包含连接到 mysql 数据库的密码，形式为 mysqli_connect。我现在容易受到攻击吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:21:35.603

是的，立即更改您的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:21:43.680

你最好更改密码，以防有人得到它并试图做一些讨厌的事情。

当然，很难有人访问您的服务器等，但最好不要担心这样的事情。只需更改密码并再次感到安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:22:30.297

除非您的数据库也可以从您的服务器外部访问，否则可能不会比您本来可以访问的多。为了连接到数据库，有人（希望）必须首先连接到您的服务器。当他在那里时，他也可以从存储在那里的源代码中读取连接凭据。

无论如何，更改密码并不是一个坏主意。

# html - 我的 3 个 div 没有正确排列。最右边的 div 被未定义的边距下推？

> ID：14902700
> 
> 赞同：1
> 
> 时间：2013-02-15T20:20:43.807
> 
> 标签：html, css, css-float

我在一个包装器 div 中有 3 个 div。在我的包装 div 中，我最左边的 div 是一个箭头图像，我使用 js 在滑块之间导航。中间的 div 是滑块，右边的 div 是向右箭头移动到下一个滑块。

这是滑块的代码：

```
<div class="twocol_double">
    <div class="btn_left"></div>
    <div id="slide_wrapper">
        <div class="slide" style="position: absolute; top: 0px; left: 0px; display: block; z-index: 3; opacity: 1;">

            <h3>Heading1</h3>

            <p>“Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat. Duis aute irure dolor in reprehenderit in vol</p>
        </div>
    </div>
    <div class="btn_right"></div>
</div> 
```

会有多个`slide`类，但为了这个问题，我只添加了 1 个。

但由于某种原因，我的右 div 和我的右箭头被向下推。在 Chromes 元素检查器中查看它，我的滑块 div 上有一个 50px 的右边距，我没有在任何地方定义（我看到橙色，但没有 CSS 标记）。

我在这里重新创建了 jsfildde 中的问题：http: [//jsfiddle.net/maZbF/1/](http://jsfiddle.net/maZbF/1/)

我希望那个右箭头与其他两个 div 对齐。我已经破坏了我的大脑，试图弄清楚这一点并在 chrome 中调试它，但无济于事。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:30:28.470

为了使浮动内容保持在同一行，*所有*浮动内容都必须在任何正常内容之前定义。

在这种情况下，您的左按钮首先向左浮动，因为它是第一个。然后你有你的分区，它没有浮动并且是`display: block`. 块级元素将始终将其后的任何内容推送到下一行，即使您为其定义了宽度。因此，当它之后到达您的右侧按钮时，它从新行开始并浮动到该新行的右侧。它从顶部向下 131px 开始，因为在此之前您的分区已`height: 131px`定义（并且其中的其他内容只是溢出边界，不会干扰您的右浮动元素）。

所以，你有几个选择：

1.  在左侧按钮之后立即定义您的右侧按钮。

2.  将所有三个元素浮动到左侧，使它们彼此堆叠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:28:55.207

我认为您遇到的问题是您的右侧 div 是`position:relative`，而左侧是`position:absolute`. 我认为您可以使用简单的浮点数来简化此布局：

HTML

```
 <div class="twocol_double">
    <div class="btn_left"></div>
    <div id="slide_wrapper">
        <div class="slide">
            <h3>Heading1</h3>
            <p>“Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat. Duis aute irure dolor in reprehenderit in vol</p>
        </div>
    </div>
    <div class="btn_right"></div>
</div> 
```

CSS

```
.twocol_double {
    width: 500px;
    float: left;
    font-size: 1.2em;
}
.btn_left {
    cursor: pointer;
    display: block;
    width: 20px;
    height: 170px;
    float: left;
    background: #ccc url("http://i.imgur.com/7bYsZJD.gif") no-repeat center center;
}
#slide_wrapper {
    width: 460px;
    height: 131px;
    display: block;
    float:left;
}
.btn_right {
    cursor: pointer;
    width: 20px;
    height: 170px;
    float: right;
    background: #ccc url("http://i.imgur.com/0QRkQ2M.gif") no-repeat center center;
}
h3 {
    font-size: 1.5em;
    color: #7DAC20;
}
p, blockquote {
    padding-bottom: 20px;
    font-size: 1.3em;
    color: #636B75;
    line-height: 20px;
} 
```

[http://jsfiddle.net/Eb3TA/](http://jsfiddle.net/Eb3TA/)

# mips - MIPS中的浮点寄存器是多少个寄存器？

> ID：14902712
> 
> 赞同：3
> 
> 时间：2013-02-15T20:21:33.063
> 
> 标签：mips, cpu-registers

我正在尝试为与浮点寄存器有关的机器指令编写 MIPS 二进制代码。但是，虽然我可以找到浮点指令的操作码，但我无法找出哪些数字指的是哪些浮点寄存器。我的书和互联网可以告诉我，如果我想引用 $t1，我会使用哪个号码寄存器，但我找不到任何关于如何引用 $f1 的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:14:16.967

有 32 个浮点寄存器：`$f0`... `$f31`但是每个浮点运算（在早期的 MIPS 处理器中）都是在单独的处理单元 FPU（浮点单元）中完成的，因此您无法使用普通（整数）命令访问浮点寄存器。FPU 命令的 FPU 寄存器和 CPU 命令的 CPU 寄存器。

有图有透说明 [http://www.cim.mcgill.ca/~langer/273/12-coprocessors.pdf](http://www.cim.mcgill.ca/~langer/273/12-coprocessors.pdf)

所有 FPU 命令都编码为协处理器指令，用于协处理器 1 (CP1) 检查[http://www.cs.sunysb.edu/~lw/spim/MIPSinstHex.pdf的第一页和最后一页](http://www.cs.sunysb.edu/~lw/spim/MIPSinstHex.pdf)

字段 ft(5) fs(5) fd(5) 是寄存器代码（都是 5 位宽）。$f0 将被编码为 0；$f31 为 31（十进制）或 0x1f（十六进制）。对于双寄存器值（64 位双精度格式），仅记录寄存器对中第一个寄存器的编号（仅允许偶数 regnumber：0,2 ..30）。

操作码的详细表在这里： http: [//www.math.unipd.it/~sperduti/ARCHITETTURE-1/mips32.pdf](http://www.math.unipd.it/~sperduti/ARCHITETTURE-1/mips32.pdf)（A-73页）

# wpf - GetDefaultView 返回新实例

> ID：14902713
> 
> 赞同：1
> 
> 时间：2013-02-15T20:21:33.950
> 
> 标签：wpf, observablecollection, collectionviewsource

我正在尝试将分组添加到 ListCollectionView。我有一个定制的可观察集合，它实现了 IList、IList 和 INotifyCollectionChanged。可观察集合中的底层数据是异步加载的，

问题是，如果我在可观察集合的同一个实例上调用 GetDefaultView，我可以获得 ListCollectionView 的不同实例。任何人都知道 CollectionViewSource 何时确定何时创建新视图或何时重用旧视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:05:27.537

我想通了。真正的问题是我的分组在初始化视图和视图模型时没有应用。这样做的原因是您不应该在主线程之外的任何其他线程中添加组描述，否则不会发生任何事情。现在一切都很好:)

# clojure - 在 for 循环中重置 Clojure 输出绑定

> ID：14902718
> 
> 赞同：3
> 
> 时间：2013-02-15T20:21:42.483
> 
> 标签：clojure, leiningen

我是 Clojure 的新手，正在尝试通过重新绑定将输出重定向到文件`*out*`。在一个简单的情况下，它工作得很好：

```
(binding [*out* (new java.io.FileWriter "test.txt")]
  (println "Hi")) 
```

这符合我的预期，将“Hi”打印到文件 test.txt。但是，如果我引入一个`for`循环，事情就会出错：

```
(binding [*out* (new java.io.FileWriter "test.txt")]
  (for [x [1 2]]
    (println "Hi" x))) 
```

这一次，所有的输出都到标准输出，文件是空的。这里发生了什么？

我正在使用 Leiningen，如果这有什么不同的话：

```
Leiningen 2.0.0 on Java 1.7.0_13 Java HotSpot(TM) 64-Bit Server VM 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T21:03:16.083

你被懒虫咬了。

在 for 和绑定内放置一个`doall`或`dorun`

```
(binding [*out* (new java.io.FileWriter "test.txt")]
  (doall (for [x [1 2]]
           (println "Hi" x)))) 
```

*在您的示例中，打印正在发生*，然后从绑定返回结果由 repl 打印。所以在印刷时装订不再到位。

没有打印任何内容，因为 result 是一个惰性序列，稍后将在使用时对其进行评估

```
user> (def result (binding [*out* (new java.io.FileWriter "test.txt")]
        (for [x [1 2]] 
          (println "Hi" x))))
#'user/result 
```

当 repl 打印结果时，会评估 printlns：

```
user> result
(Hi 1
Hi 2 
nil nil) 
```

如果我们强制评估`for`绑定中返回的惰性序列，则不会将任何内容打印到 repl，

```
user> (def result (binding [*out* (new java.io.FileWriter "test.txt")]
  (doall (for [x [1 2]]             
          (println "Hi" x))))) 
#'user/result 
user> result
(nil nil) 
```

相反，输出最终出现在文件中：

```
arthur@a:~/hello$ cat test.txt 
Hi 1
Hi 2 
```

# php - 显示访问者 ping 到网站上的某些服务器？

> ID：14902723
> 
> 赞同：1
> 
> 时间：2013-02-15T20:21:51.533
> 
> 标签：php, html, ping

我很想知道[http://plugpayplay.com/gameservers.php](http://plugpayplay.com/gameservers.php)（在该页面上）如何向访问者显示他们对所列服务器的平均 ping。

类似的系统将如何工作？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:25:36.040

你看过页面的来源吗？

```
<script type="text/javascript" language="Javascript"> ping('l0','193.0.159.140',1); </script> 
```

[http://plugpayplay.com/js/ping.js](http://plugpayplay.com/js/ping.js)（注意：可能的版权？）

我认为只有 PHP 才能插入远程 IP。

# php - 将数据从 PHP 发送到 jQuery

> ID：14902728
> 
> 赞同：0
> 
> 时间：2013-02-15T20:22:02.917
> 
> 标签：php, jquery, ajax, forms, error-handling

我已经使用 jQuery 构建了一个简单但有效的 AJAX 表单。表单在提交之前使用 jQuery 进行验证，然后在成功提交后再次使用 PHP 进行验证。

唯一的问题是错误处理。当 PHP 检查返回所有字段都正常时，我会显示一条成功消息。如果出现错误，我只会显示“出现错误”。
如何将数据从 PHP 发送回 jQuery，以便将无效字段标记为无效？

或者这种形式的错误处理是不必要的，因为动态突出显示需要打开 JavaScript，如果打开 JavaScript，表单就不能提交错误？

基本上，我的有效支票看起来像这样（当然简化了）：

```
function checkSomething( $something ) {

        $valid = true;

        if ( strlen( $something ) === 0 ) {
            $valid = false;
        }

        return $valid;
} 
```

在脚本的最后，我这样做：

```
if ( checkSomething( $something ) && checkThis( $this ) && checkThat( $that ) ) {
    echo "success"; 
} else {
    echo "error";
} 
```

在我的 JavaScript/jQuery 代码中，它看起来像这样：

```
$.ajax({
    url: "form.php",
    type: "POST",
    data: string,
        success: function ( result ) {
            if ( result == "success" ) {
                alert( "success" );                     
            } else {
                alert( "error" );
            }
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:28:16.580

我认为您应该在 PHP 中只有一项服务。您从表单发送数据，如果有任何无效数据，您可能希望返回一个 JSON 指示哪些字段是错误的，以便您可以解析并显示它。如果一切正常，您只需显示该成功消息。

不过，我不确定我是否明白你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:47:23.180

您的表单提交有 3 个步骤：JavaScript 验证和提交、PHP 验证/处理和 JavaScript 完成（“因此可以将无效字段标记为无效”）

听起来您已经完成了第 1 步和第 2 步的大部分内容。

在您的 PHP 代码中，您应该有一些数据结构，最好是一个数组，它保存哪些值是无效的。您可以通过将其回显到浏览器来将此数据返回给浏览器

```
<?php
...
...
if( count( $invalidFieldArray ) ){
    echo json_encode( array( 'status' => 'Fail',
                             'data' => $invalidFieldArray ) );
}else{
    echo json_encode( 'status' => 'Success' );
} 
```

上面的代码会将成功/失败返回到您的 JavaScript 表单。

我个人使用一个[jQuery 表单插件](http://malsup.com/jquery/form/)来处理表单提交，我建议你尝试一下。它有许多开箱即用的好功能。

```
$.ajax({
    url: "form.php",
    type: "POST",
    data: string,
    dataType: json,
        success: function ( result ) {
            if ( result.status === "Success" ) {
                alert( "success" );                     
            } elseif (result.status === 'Fail'){
                for (field in result.data) {
                         /* Invalid field handling */
                         ...
                } 
            }
        }
}); 
```

**提示**：有点题外话，但在 JavaScript 中使用比较时，总是使用三等号（ === ），双等号（ == ）在 JavaScript 中与在其他语言中不同；JavaScript 确实使用双等号进行类型强制，这提供了不一致的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:23:26.713

您**可以**从 PHP 发送数据并将其存储在 URL 中，如下所示`url.com/#value=1`

# python - Python & fsolve()：由 fsolve() 调用的函数 f(x) 的动态内容

> ID：14902730
> 
> 赞同：0
> 
> 时间：2013-02-15T20:22:10.410
> 
> 标签：python

假设我有一个方程

```
x + 2*cos(x) = 0 
```

我想解决它。然后我可以编写以下程序：

```
def func1(x):  
  out = x + 2*cos(x)
  return out
Solution = fsolve(func1, StartValue) 
```

在此示例中，StartValue 可以具有任意值。到目前为止，一切都很好！我正在编写一个模拟，该模拟创建一个我想用 fsolve() 求解的非线性方程组。现在的挑战是（！）在运行时间之前，非线性方程组的大小是未知的（！）。这意味着我可以拥有例如

x + 2*cos(x) = 0

就像我可以拥有的一样

```
2*x + 4*y = 0
18*y -18 = 0 
```

为了解决最后提到的方程组（在我的程序中通常总是非线性的），我找到了以下解决方案：

```
def func2(x):  
  out = [2*x[0] + 4*x[1]]
  out.append(18*x[1]-18)  
  return out  
Solution = fsolve(func2, [1, 1]) 
```

这也很有效。但是我不能使用 func2(x) 所示的解决方案是有一定原因的：它使我的程序非常慢！函数 fsolve() 多次迭代调用函数 func2(x) 直到找到解 [-2 1]。但我的程序将处理数百到数千行的线性方程组。这意味着在每个迭代步骤中，所有这些 thounds 行都被附加，如 func2(x) 所示。因此，我正在寻找一种解决方案，即 ONCE 将方程组创建为函数 func3(x)，然后 fsolve() 仅调用现成的 func3(x)。这是一个伪代码示例：

```
func3 = lambda x: 2*x[0] + 4*x[1]
func3.append(lambda x: 18*x[1] - 18)
Solution = fsolve(func3, [1, 1]) 
```

不幸的是，无法附加函数，因为我在上面的伪代码中显示了它。因此我的问题是：如何动态构建我的函数 func3 然后将（！）ONCE READY BUILT（！）函数 func3 传递给 fsolve() ???

非常感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:48:25.743

解决方案：“将命令外包成字符串连接” 可以在函数外部构建字符串，如下所示：

```
StringCommand = "f = [2*x[0] + 4*x[1], 18*x[1] - 18]" 
```

之后这个 StringCommand 被用作要调用的函数的输入参数，如下所示：

```
def func(x,StringCommand):
  exec StringCommand
  return f 
```

因此，StringCommand 通过命令 exec 执行。最后，只需要调用 fsolve() 中的函数，如下所示：

```
fsolve(func, [1, 1], StringCommand) 
```

而已。这样做，StringCommand 在函数 func() 之外构建一次，因此当 fsolve() 使用函数 func() 进行迭代时可以节省很多时间。请注意，[1,1] 是迭代的起始值！

# python - 什么是 PasteDeploy，如果认为 Python 中的 Eggs 已经消失，我需要学习它吗？

> ID：14902732
> 
> 赞同：7
> 
> 时间：2013-02-15T20:22:20.970
> 
> 标签：python, pyramid, egg, python-3.3

我对 Python 很陌生。我已经下载了 Pyramid Framework 并试图理解它。它使用许多单独的工具进行工作。例如一些`PasteDeploy`. 我试图阅读[`PasteDeploy`'s 手册](http://pythonpaste.org/deploy/)，但什么也看不懂。几乎没有有价值的例子和解释。只是语法。我所了解的是它`.egg`在任何地方都使用格式。它基于`.egg`格式：

```
[composite:main]
use = egg:Paste#urlmap

[app:home]
use = egg:Paste#static

[app:blogapp]
use = egg:BlogApp 
```

同时我发现`.egg`格式将被 Python 的包的未来抛弃。这是[来源](http://guide.python-distribute.org/future.html)。同时，金字塔也是围绕着它建造的`eggs`。其中的每个组件`env\Lib\site-packages`都是一个`egg`组件：

```
chameleon-2.11-py3.3.egg
distribute-0.6.31-py3.3.egg
pastedeploy-1.5.0-py3.3.egg
pyramid-1.4-py3.3.egg
... and so on 
```

所以我不明白`.egg`如果它被认为是某种“已弃用”，为什么它使用格式？为什么它使用`PasteDeploy`它本身使用几乎不推荐使用的`.egg`格式？我应该学习`PasteDeploy`还是现在有一些更先进的工具，但我还不知道它们？`.egg`Pyramid 中的格式会在不久的将来被替换吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T23:31:16.707

egg 格式绝对不会被弃用，并且在您阅读的任何地方都在欺骗您。Python 打包存在很多问题，但 Pyramid 采用了最先进的技术。

您的链接讨论了未来的目标，但您不能弃用还没有替代品的东西。鸡蛋支持实际上要被删除还需要很多年（有成千上万的软件包在使用它）。该文档只是在讨论未来目标的发展方向，并且（忽略 Python 3）社区对向后兼容性抱有强烈的感情，因此即使出现新格式，鸡蛋也将继续得到长期支持。

`PasteDeploy`是 Pyramid 用于解析 INI 文件、配置 WSGI 管道和配置 WSGI 服务器的包。

`PasteDeploy`如果您没有想要查找的特定内容，则文档可能会有些粗糙。Pyramid 的文档很好地涵盖了基本的 INI 设置，您*应该*能够在一段时间内靠它生活，如果您有一些您正在尝试完成但找不到的事情，请在 SO 上提出另一个问题或使用邮件列表。

除此之外，`PasteDeploy`它再次仅用于解析 INI 文件。Pyramid 本身实际上并不需要以这种方式使用 INI，但它是让人们离开地面的最简单方法。

# c - Xcode 编译器问题

> ID：14902737
> 
> 赞同：2
> 
> 时间：2013-02-15T20:22:34.983
> 
> 标签：c, xcode

我在 Xcode 中创建了一个简单的项目用于算法实验，现在我正在尝试实现合并排序。归并排序函数的原型是

```
//mergesort.h
void merge(long *left, long *right, int lsize, int rsize);
void mergesort(long *data, int datasize); 
```

实现是

```
//mergesort.c
void merge(long *left, long *right, int lsize, int rsize){

int i = 0, j = 0, k = 0;
long *temp = malloc(sizeof(long) * (rsize + lsize));

while(i < lsize && j < rsize){
    if(left[i] < right[j]){
        temp[k++] = left[i++];
    }else{
        temp[k++] = right[j++];
    }

    if(i == lsize){
        for(;j < rsize;){
            temp[k++] = right[j++];
        }
    }

    if(j == rsize){
        for(;i < lsize;){
            temp[k++] = left[i++];
        }
    }
}
memcpy(left, temp, sizeof(long) * (lsize + rsize));
free(temp);
}

void mergesort(long *data, int datasize){
    int lsize, rsize;
    lsize = datasize / 2;
    rsize = datasize - lsize;

    if(lsize  < 1 || rsize < 1){
        return;
    }else{
        mergesort(data, lsize);
        mergesort(data + lsize, rsize);
        merge(data, data + lsize, lsize, rsize);
    } 
```

所以问题是我无法编译代码。我想知道编译器在调用mergesort（）时说：“函数调用的参数太少，预期为4，有2”，即在mergesort（data，lsize）上；合并排序（数据 + lsize，rsize）；

这是为什么？这是默认xcode编译器的奇怪功能还是我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:30:25.487

您的问题几乎可以肯定是该函数`mergesort`已在`<stdlib.h>`原型中定义：

```
int
 mergesort(void *base, size_t nel, size_t width,
     int (*compar)(const void *, const void *)); 
```

即四个论点。因此，无论失败的呼叫在哪里，这显然都会造成歧义。

可能最安全的做法是重命名您的函数。

# mysql - 如何查询MySQL数据库示意图

> ID：14902746
> 
> 赞同：1
> 
> 时间：2013-02-15T20:23:08.313
> 
> 标签：mysql, sql, sqlite

在 Sqlite 中，我可以像这样查询表名及其结构：

```
SELECT name, sql 
FROM sqlite_master 
WHERE type = 'table' AND Name NOT LIKE '%sqlite%' 
```

我想查询 MySQL 数据库的数据库示意图。在 phpMyAdmin 中进行了一些挖掘，我以这个结尾：

```
SELECT SCHEMA_NAME, TABLE_NAME 
FROM SCHEMATA, TABLES 
WHERE SCHEMA_NAME = TABLE_SCHEMA AND SCHEMA_NAME ='myDb' 
```

不幸的是，这只会输出表名。是否有任何 sql 查询可以完成以下工作：

```
mysqldump -u root myDb --no-data=true --add-drop-table=false > myDb.sql 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:17:26.707

```
select * 
from information_schema.columns
where table_schema = 'sqlite_master'
order by table_name, ordinal_position 
```

基于从[这个 SO question接受的答案](https://stackoverflow.com/questions/5648420/mysql-get-all-columns-from-all-tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:17:10.977

怎么样

```
SHOW CREATE TABLE tablename; 
```

# c# - 通用处理程序 ashx 绑定变量而不是 SQL 的字符串连接

> ID：14902749
> 
> 赞同：0
> 
> 时间：2013-02-15T20:23:13.367
> 
> 标签：c#, oracle, ashx

我有一个遇到问题的 C# ashx 处理程序，我有两个相互叠加的查询，第一个查询采用一个参数，而第二个查询采用原始查询，环绕它并采用两个参数返回行号

错误是 ORA-01008：并非所有变量都绑定

第一个查询（部分）

```
 sSql += @"AND a.assignment_type in ('PS','SS')
           AND ((:byAuthor = 'N' AND a.assignment_type in ('PS','SS')) 
```

第二次查询

```
 string filteredSql = @"select * from (";
  filteredSql += sSql;
 filteredSql +=@" ) WHERE rowsNumerator BETWEEN :iDisplayStart AND :iDisplayEnd"; 
```

查询执行

```
 DataSet totalResults = dbi.GetDynamicDataSet(sSql, tcParameters);
 int iTotalCount = totalResults.Tables[0].Rows.Count;
 DataSet filteredResults = dbi.GetDynamicDataSet(filteredSql, dtParameters); 
```

请求声明

```
 var byAuthor = context.Request.QueryString["byAuthor"].ToString();
 var iDisplayLength = int.Parse(context.Request["iDisplayLength"]);
 var iDisplayStart = int.Parse(context.Request["iDisplayStart"]); 
```

捆绑

```
 ListDictionary tcParameters = new ListDictionary();
            tcParameters.Add("byAuthor", byAuthor);

 ListDictionary dtParameters = new ListDictionary();
            dtParameters.Add("iDisplayStart", iDisplayStart);
            dtParameters.Add("iDisplayEnd", iDisplayEnd); 
```

我尝试在两者中使用相同的列表字典，但这会返回 ora-illegal var name

```
 ListDictionary dtParameters = new ListDictionary();
            dtParameters.Add("byAuthor", byAuthor);
            dtParameters.Add("iDisplayStart", iDisplayStart);
            dtParameters.Add("iDisplayEnd", iDisplayEnd); 
```

最后，我希望将变量绑定在我的 sql 中，而不是连接字符串，如有必要，我可以提供整个 ashx 文件，感谢您提供任何知识

# c# - 带有streamReader的C#绝对路径

> ID：14902752
> 
> 赞同：1
> 
> 时间：2013-02-15T20:23:33.263
> 
> 标签：c#, relative-path, streamreader, filereader, absolute-path

我在 C# 中读取文件时遇到问题我有两个不同的 .exe 位置（两者都不同）并读取相同的 .xml 文件。所以当我给出这样的路径时：

```
TextReader textReader = new StreamReader(@"../../../TrajectoryGen/obstacleList.xml"); 
```

它能够从一个位置（路径中使用的后面的 3 个文件夹）读取，但不能从另一个位置（后面只有 2 个文件夹）读取如何解决这个问题，以便它可以从两个文件夹中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:56:03.350

第一种方式，这取决于您知道其中一个父文件夹的名称。

```
const string FILENAME = "obstacleList.xml";
const string FOLDER = "TrajectoryGen";

string path = Path.GetFullPath(System.Reflection.Assembly.GetExecutingAssembly().Location);
do
{
     path = Path.GetDirectoryName(path);
} while (!Path.GetFileName(path).Equals(FOLDER, StringComparison.OrdinalIgnoreCase));
string filepath = String.Format("{0}{1}{2}", path, Path.DirectorySeparatorChar, FILENAME); 
```

^^ 您还可以在 FILENAME 中使用部分路径，如下例所示，以防您在您知道名称的“基本”文件夹中需要进入目录。

第二种方式盲目地继续向上目录

```
const string FILENAME = @"TrajectoryGen\obstacleList.xml";

string path = Path.GetFullPath(System.Reflection.Assembly.GetExecutingAssembly().Location);

string filepath;

do
{
    path = Path.GetDirectoryName(path);

    //pump
    filepath = String.Format("{0}{1}{2}", path, Path.DirectorySeparatorChar, FILENAME);
} while (!File.Exists(filepath)); 
```

两者都需要“使用 System.IO;” 并且两者都没有实现错误处理，如果找不到文件/文件夹，将抛出 NullReferenceException。

我故意使用 do-while 循环，因为路径的定义将包含可执行文件名称。

# vba - 试图设置全局命名范围但本地范围最终被设置？

> ID：14902754
> 
> 赞同：0
> 
> 时间：2013-02-15T20:23:41.780
> 
> 标签：vba, excel

我正在尝试更改命名范围所指的地址。工作簿中有两个同名范围，一个范围为工作簿，另一个范围为`SheetA`. 我正在使用这段代码：

```
Sub changeNamedRangeAddress(bk As Workbook, rangeName As String, newRange As Range)
    bk.Names(rangeName).RefersTo = newRange
End Sub 
```

当我查看`bk.Names(rangeName)`即时窗口中的值时，它似乎引用了该名称的全局版本，因为以下返回 true：

```
?typeof bk.Names(rangeName).Parent is Workbook 
```

但是在 sub 运行之后，本地范围版本的地址已更改为的地址，`newRange.address`而全局地址保持不变。

我还能做些什么来确保`.RefersTo`以全局命名范围为目标？

编辑：当此脚本运行时，本地范围的命名范围所指的工作表处于活动状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:46:01.967

我通过激活另一个工作表解决了这个问题。所以代码现在看起来像这样：

```
Sub changeNamedRangeAddress(bk As Workbook, rangeName As String, newRange As Range)
    bk.Sheets("SheetB").Activate
    bk.Names(rangeName).RefersTo = newRange
End Sub 
```

由于某种原因，这允许`.RefersTo`修改全局范围而不是指向`SheetA`. 不过，这似乎是解决问题的一种奇怪方法，所以在接受我自己的答案之前，我会等着看是否有人提出更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:49:10.867

如果您的工作表中有几个或几个这样的案例（我已经看到），这是一个功能更强大的解决方案，但不会对 1 或 2 产生太大影响，除非您将拥有更多功能程序在您的库中！:)

```
Option Explicit

Sub changeGlobalNamedRangeAddress(bk As Workbook, rangeName As String, newRange As Range)
'this sub only changes named range scoped to the workbook and ignores any ranges scoped to the worksheet with the same name.

Dim n As Name

For Each n In bk.Names

    If InStr(1, n.Name, rangeName) > 0 And InStr(1, n.NameLocal, "!") = 0 Then

        n.RefersTo = newRange
        Exit For

    End If

Next

End Sub 
```

# c# - WPF 中的附加事件：确定按钮始终需要单击 2 次才能关闭

> ID：14902761
> 
> 赞同：0
> 
> 时间：2013-02-15T20:24:20.710
> 
> 标签：c#, .net, wpf, wpf-controls

我有以下 XAML

```
<Window x:Class="SimpleAttahEvent.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow">
    <Grid>
        <StackPanel  Margin="5"  Name="stackButton" ButtonBase.Click="DoSomething">
            <Button Name="cmd1" Tag="The first button"> Command 1</Button>
            <Button Name="cmd2" Tag="The second button"> Command 2</Button>
            <Button Name="cmd3" Tag="The third button"> Command 3</Button>

        </StackPanel>
    </Grid>
</Window> 
```

...使用以下代码来处理附加事件。

```
namespace SimpleAttahEvent
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {

        public MainWindow()
        {
            InitializeComponent();
            stackButton.AddHandler(Button.ClickEvent, new RoutedEventHandler(DoSomething));
        }

        private void DoSomething(object sender, RoutedEventArgs e)
        {
            Console.WriteLine(Button.ClickEvent.RoutingStrategy);
            Console.WriteLine(TextBox.PreviewKeyDownEvent.RoutingStrategy);
            if (e.Source == cmd1)
            {
                MessageBox.Show("First button is clicked");
            }
            if (e.Source == cmd2)
            {
                MessageBox.Show("Second button is clicked");
            }
            if (e.Source == cmd3)
            {
                MessageBox.Show("Third button is clicked");
            }

        }
    }
} 
```

这些会产生一个带有 3 个垂直堆叠的按钮的对话框。当我单击其中一个按钮时，会出现一个带有确定按钮的消息框。但是，除非我单击两次，否则对话框上的 OK 按钮不会关闭。我是否从上面给出的代码中隐式执行此操作？

***编辑 - 附加信息：***

当我这样做时

```
private void DoSomething(object sender, RoutedEventArgs e)
        {
            object tag = ((FrameworkElement)sender).Tag;
            MessageBox.Show((string)tag);

        } 
```

..它仍然需要单击 2 次才能关闭消息框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:40:45.140

你的问题是你的处理程序加倍。您不必在同一个上单击两次`OK`；您正在单击“确定”，这会关闭第一条消息。然后，再次处理该事件，您会收到另一条完全相同的消息，您必须单击“确定”。如果您添加`+ DateTime.Now`到您的消息中，您会看到这确实是第二条消息

我第一眼就错过了这一行：

```
stackButton.AddHandler(Button.ClickEvent, new RoutedEventHandler(DoSomething)); 
```

这与`ButtonBase.Click`这条线的相同

```
<StackPanel  Margin="5"  Name="stackButton" ButtonBase.Click="DoSomething"> 
```

选择一种附加到事件处理程序的方法并坚持下去。把它们混在一起只会造成混乱。

# c# - 如何使用 jquery 模态对话框进行编辑和显示记录？

> ID：14902762
> 
> 赞同：1
> 
> 时间：2013-02-15T20:24:21.687
> 
> 标签：c#, asp.net

1）如果我从网格中单击查看按钮，它必须显示该特定 LID 的 jquery 对话框，但它不起作用。（在对话框中，它必须只显示 REMARKS1 列文本）

2）我通过c#代码包含了链接按钮（取消/编辑）来编辑特定的行。我如何使用 jquery 对话框进行编辑/取消。

我已经粘贴了我的 aspx 网页和 C# 代码。如果您可以更改此代码，那就太好了，否则请提供新代码。请找到随附的图像，它将显示网格和对话框。

![在此处输入图像描述](../Images/b236c59686f208c48f8353fb0a33feef.png)

**页面**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <link href="jquery/themes/dark-hive/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="jquery/jquery-1.9.0.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.core.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.widget.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.mouse.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.draggable.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.position.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.button.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.dialog.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.effect.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.effect-slide.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.effect-explode.js" type="text/javascript"></script>
    <script src="jquery/ui/jquery.ui.effect-fade.js" type="text/javascript"></script>
    <link href="jquery/themes/demos.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript">
    $(document).ready(function () {
        $("#example1").dialog({
            modal: true,
            autoOpen: false,
                show: {
                    effect: "slide",
                    duration: 1000
                },
                hide: {
                    effect: "explode",
                    duration: 1000
                }

            });

            $('#btuser').click(function (event) {
                event.preventDefault();
                $('#example1').dialog('open');
            });
        });
    </script>

</head>
<body>
    <form id="form1" runat="server">
        <div style="height: 500px;">
            <asp:GridView ID="grdDisplay" runat="server" AutoGenerateColumns="False" CellPadding="1"
                CellSpacing="1" Height="0px" GridLines="None" CssClass="myGrid" PagerStyle-CssClass="pager"
                AlternatingRowStyle-CssClass="alt" Width="1024px" RowStyle-CssClass="RowStyle"
                Font-Bold="False" Font-Names="Segoe UI" Font-Size="13px" OnRowDataBound="grdDisplay_RowDataBound">
                <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
                <Columns>
                    <asp:BoundField HeaderText="LID" DataField="l_ID" ItemStyle-Width="45px" />
                    <asp:BoundField HeaderText="S_Date" DataField="s_date" DataFormatString="{0:dd-MM-yyyy}" ItemStyle-Width="60px" />
                    <asp:BoundField HeaderText="E_Date" DataField="e_date" DataFormatString="{0:dd-MM-yyyy}" ItemStyle-Width="60px" />
                    <asp:BoundField HeaderText="Div" DataField="Div_type" />
                    <asp:TemplateField HeaderText="Remarks1" ItemStyle-Width="125px" ItemStyle-Height="25px">
                        <ItemTemplate>
                                <asp:TextBox runat="server" ID="lblreason" Text='<%# Bind("Remarks1") %>' Height="20" Width="90" ReadOnly="true" CssClass="cmdtextbox">
                                </asp:TextBox>
                          <div style="margin-top: 0px; float: right;">
                                <asp:Button runat="server" Width="25" Height="25" ID="btuser" CssClass="btreason" text="View" />
                          </div>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:BoundField HeaderText="Remarks2" DataField="Remarks2" ItemStyle-Width="62px" />
                    </asp:TemplateField>
                    <asp:BoundField HeaderText="Remarks3" DataField="Remarks3" ItemStyle-Width="60px" />
                </Columns>
                <PagerStyle CssClass="pager"></PagerStyle>
                <RowStyle CssClass="RowStyle" />
            </asp:GridView>
        </div>

    </form>
</body>
</html>

C# code*
        protected void Page_Load(object sender, EventArgs e)
        {
            DataTable dtmydata = new DataTable();
            if (!Page.IsPostBack)
            {
                dtmydata = Dtthandler.GetEmData(HttpContext.Current.Session["TatID"].ToString());
                //Add new column
                dtmydata.Columns.Add(new DataColumn("User Action", Type.GetType("System.String")));

                foreach (DataRow row in dtmydata.Rows)
                {
                    currentdate =  DateTime.Now;
                    Edate = Convert.ToDateTime(row[2].ToString());
                    strtmpCdate = currentdate.ToShortDateString();
                    strtmpEdate = Edate.ToShortDateString();
                    if (Convert.ToDateTime(strtmpCdate) <= Convert.ToDateTime(strtmpEdate))
                    {
                        row[7] = "Yes";
                    }
                    else
                    {
                        row[7] = "No";
                    }
                    //Bind data to grid
                    grdDisplay.DataSource = dtmydata;
                    grdDisplay.DataBind();
                }

            }

        }

        protected void grdDisplay_RowDataBound(object sender, GridViewRowEventArgs e)
        {
                    LinkButton lnkbtnCancel = new LinkButton();
                    LinkButton lnkbtnModify = new LinkButton();
            try
            {

                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    if (e.Row.Cells[7].Text == "Yes")
                    {
                            lnkbtnCancel.Text = "Cancel";
                            lnkbtnModify.Text = "Modify";

                            e.Row.Cells[7].Controls.Add(lnkbtnCancel);
                            e.Row.Cells[7].Controls.Add(lnkbtnModify);

            //How to populate jquery dialog using this linkbutton?              

                     }

                    else
                    {
                        e.Row.Cells[7].Text = string.Empty;
                    }
                }

            }
            catch (Exception ex)
            {

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:39:28.910

这是我的代码中的一个示例 - 请根据您的使用进行调整：声明对话框如下：

```
<div id="dialog-form">
... // all of the elements you need in the dialog
</div> 
```

然后在 javascript 部分：

```
$("#dialog-form").dialog({
                autoOpen: false,
                height: 580,
                width: 800,
                modal: true,
                buttons: {
                    "Do Something": function () {
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }
            }); 
```

最后 - 在用于启动对话框的按钮或元素上：

```
onclick='$( "#dialog-form" ).dialog( "open" );' 
```

我希望这有帮助。

# yii - Yii 将参数传递给小部件

> ID：14902763
> 
> 赞同：4
> 
> 时间：2013-02-15T20:24:24.957
> 
> 标签：yii, yii-components

抱歉，如果我使用了错误的关键字。可能是由于关键字错误，我没有获得足够的信息。

我们通过这种方式在 Yii 中创建小部件：

```
class streamList extends CWidget {
  //do some stuff
} 
```

此外，我们在任何地方都使用这个小部件

```
$this->widget("application.components.widget.streamList"); 
```

我们如何编写小部件以使其接受参数为

```
$this->widget("application.components.widget.streamList",array('title'=>'Posts'); 
```

我用谷歌搜索但没有解决。请帮忙，先谢谢了。

**编辑日志：** 另外，我们如何将默认参数值定义为“标题”？我试过`public $title = Shk::getTitle()`了，但没有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T20:33:06.667

采用

```
class StreamList extends CWidget {
    //do some stuff
    public $title;
} 
```

任何属性都可以用默认值初始化并被覆盖

```
$this->widget("application.components.widget.StreamList",array('title'=>'Posts',.....) 
```

**编辑**

您不能使用函数初始化类属性。[这里](https://stackoverflow.com/a/1633024/428543)给出一个解释。一个选项是检查是否`$title`已设置，如果未`Shk::getTitle()`在`init()`方法中设置为

```
public function init(){
    ....
    if(!isset($this->title) || !$this->title)
        $this->title=Shk::getTitle();
    ....
} 
```

PS为了保持一致性，最好将您的类名大写。

# c# - 文本框的范围验证在 MVC3 中不起作用

> ID：14902770
> 
> 赞同：0
> 
> 时间：2013-02-15T20:25:02.897
> 
> 标签：c#, asp.net-mvc-3

我试图在 ASP.Net MVC 3 应用程序中引发验证错误。当用户输入大于 1000 的数字时，应显示错误消息。在视图模型上使用以下代码似乎不起作用。
我需要改变什么？

```
[Range(0, 1000, ErrorMessage = "Total number of rows to display must be between 0 to 1000")]
 public int DisplayTop { get; set; } 
```

.cshtml：

```
@model  Calc.Models.CountingVM
@{
    ViewBag.Title = "Reports";
    Layout = "~/Views/Shared/_reportsLayout.cshtml";
}
@using (Html.BeginForm("Reports", "Calc", FormMethod.Post, new { @id = "frmReport" }))
{   
 .........
  @Html.TextBoxFor(c => c.DisplayTop, "1000")
  @Html.ValidationMessageFor(c => c.DisplayTop)
} 
```

行动方法：

```
 public ActionResult Reports(string ReportName, CalcCriteria criteria)
            {

                  if ((criteria == null) || (criteria.nId == null))
                    {
                        criteria = TempData["criteria"] as CalcCriteria;
                        TempData["criteria"] = criteria; // For reload, without this reloading the page causes null criteria.
                    }
                  ReportType c = (ReportType)Enum.Parse(typeof(ReportType), ReportName, true);
                    JavaScriptSerializer serializer = new JavaScriptSerializer();
                    string vmJson = string.Empty;

                    switch (c)
                    {
                           .....
                            int displayTop;
                           ..........
                            case ReportType.Inventory_Counts_Report:                      
                           ..............
                            displayTop = Convert.ToInt32(Request["DisplayTop"]);
                           ........
                     return View("Counting", CountingVM);
                     default:
                            return View();
                     }
                return View(); } 
```

谢谢

BB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:32:55.480

您还需要显示验证消息：

```
@Html.ValidationMessageFor(c => c.DisplayTop) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:33:27.183

尝试

```
@Html.EditorFor(c => c.DisplayTop, "1000") 
```

我想，问题是出现了，因为你的属性是 int 类型，并且范围是 int 类型，你在文本框中显示它。

您还需要添加`ModelState.IsValid`控制器。例如：

```
[HttpPost]
public ActionResult Create(YourModel model)
{
   if(ModelState.IsValid)
   {
      // Put your logic here
   }

   return View(create)
} 
```

# cmake - CMake：将 Mac OS X libfoo.1.dylib 命名约定覆盖为 libfoo.so.1

> ID：14902773
> 
> 赞同：4
> 
> 时间：2013-02-15T20:25:13.897
> 
> 标签：cmake

我们正在尝试使用 Linux、Solaris 等使用的共享库命名约定在 Mac OS X 上使用 CMake 构建共享库，也就是说，`libfoo.so.1`而不是`libfoo.1.dylib`. 这是一个内部部署，我们有一个现有的 Linux 部署，并希望在它之后对 Mac OS X 部署建模，这样就不必修改其他工具。

我可以`.so`改用`.dylib`

```
set_target_properties(OpenImageIO
                      PROPERTIES
                      SUFFIX .so) 
```

但是，我无法正确订购。试

```
set_target_properties(OpenImageIO
                      PROPERTIES
                      OUTPUT_NAME libOpenImageIO.so.${SOVERSION}) 
```

最终`build/macosx/libOpenImageIO/liblibOpenImageIO.so.32.1.2.0.so`表明这`OUTPUT_NAME`仅适用于共享库的基本部分，CMake 将始终颠倒 SUFFIX 和 VERSION 的顺序。

我搜索了 CMake 的源代码，但找不到该代码的设置位置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T13:59:08.173

将版本名称放在后缀前面的行为`.dylib`在方法中针对 Mac OS X 进行了硬编码`cmTarget::ComputeVersionedName`（请参阅 CMake 源文件 cmTarget.cxx）。

但是，您可以通过以下方式设置目标属性来欺骗 CMake 生成所需的名称：

```
if (APPLE)
    set_property(TARGET OpenImageIO PROPERTY PREFIX "lib")
    set_property(TARGET OpenImageIO PROPERTY OUTPUT_NAME "OpenImageIO.so")
    set_property(TARGET OpenImageIO PROPERTY SUFFIX "")
    set_property(TARGET OpenImageIO PROPERTY SOVERSION "32.1.2.0")
endif() 
```

# javascript - 跨浏览器兼容在初始化后选择所有 TinyMCE 文本

> ID：14902774
> 
> 赞同：1
> 
> 时间：2013-02-15T20:25:14.737
> 
> 标签：javascript, tinymce

这是来自这个问题的代码：[如何在文本上使用 TinyMCE 函数而不实际选择该文本？](https://stackoverflow.com/questions/13951093/how-to-use-tinymce-functions-on-text-without-actually-selecting-that-text/13954406#13954406)- 我们可以只拥有一个与浏览器/平台兼容的版本吗？

```
tinyMCE.init({
   ...
   setup : function(ed) {
        ed.onInit.add(function(ed, evt) {

            ed.getBody().setAttribute('contenteditable', false);

            var range = ed.selection.dom.createRng();

            range.setStartBefore(ed.getBody().firstChild);
            range.setEndAfter(ed.getBody().lastChild);
            ed.selection.setRng(range);
        });
   }
}); 
```

它可以在我的机器上运行，但我发现对于某些人来说，TinyMCE 可编辑的容器中的文本不会自动全部选中，尽管他们使用的是最近的浏览器（最新的 IE 或最近的 FF 版本之一）。我们如何确保它是？

# tcl - 尝试将命令的输出重定向到变量

> ID：14902778
> 
> 赞同：0
> 
> 时间：2013-02-15T20:25:32.943
> 
> 标签：tcl

```
>> set signal_name [get_fanout abc_signal]
{xyz_blah_blah}
>> echo $signal_name
@142
>> set signal_name [get_fanout abc_signal]
{xyz_blah_blah}
>> echo $signal_name
@144
>> 
```

我尝试了其他东西，比如 catch 等，并且在每个地方，它都会返回@number。我的目标是能够打印实际值而不是数字 - xyz_blah_blah。

我是 tcl 的新手。想了解，如果这是一个数组或指向数组的指针或类似的东西。当我用不同的命令尝试完全相同的事情时，它只返回一个值，然后它就可以工作了。这是一个新命令，它在括号中返回值。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:23:44.453

每个 Tcl 命令都会产生一个*结果*值，您可以通过将命令的调用放在`[`方括号中`]`并将全部作为参数的一部分放入另一个命令来捕获和使用该结果值。因此，在：

```
set signal_name [get_fanout abc_signal] 
```

调用的结果`get_fanout`用作 的第二个参数`set`。我建议您也可以尝试这样做：

```
puts "-->[get_fanout abc_signal]<--" 
```

它是一样的，除了这次我们将它与其他一些小字符串位连接并打印出整个批次。（如果您想知道，`puts`如果没有错误，其结果始终是空字符串，并`set`返回变量的内容。）

如果那仍然打印错误的值（以及事先正确的值，周围没有箭头标记），那么真正的问题很可能`get_fanout`是没有按照您的预期进行。虽然[可以捕获命令的标准输出](https://stackoverflow.com/q/14530354/301832)，但这样做是一种相当先进的技术；最好考虑是否有替代机制来实现您想要的。（该`get_fanout`命令不是 Tcl 语言库或任何非常常见的附加库（如 Tk 或 Tcllib 集合）的标准部分，因此我们只能猜测它的行为。）

# javascript - 使用类观察页面

> ID：14902780
> 
> 赞同：0
> 
> 时间：2013-02-15T20:25:38.673
> 
> 标签：javascript, observer-pattern

我正在编写一个脚本，该脚本需要检测**添加**到网页的元素，例如日历中呈现的事件（div 标签）。我不关心被删除的元素。页面上最多应该有 20-30 个这样的元素。

我的想法 - 简短而简单的代码 - 是使用特定的类（“myName”）来标记页面中已有的元素。我会定期轮询页面：

```
// Get all divs in the calendar: 
var allDivsCount=myCalendar.querySelectorAll("div").length;
// Get already branded divs
var oldDivsCount=myCalendar.querySelectorAll("div.myName").length;
if (allDivsCount > oldDivsCount) {
    // brand the new divs and do stuff
} 
```

这是一个很好的做法，还是有更好的方法来做到这一点？是否有已经实现了这种逻辑的库？

我试图避免 DOMNodeInserted 因为某些浏览器不支持它并且它已被弃用（由于性能问题，从我读过的内容来看）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:05:04.630

我知道你反对，`DOMNodeInserted`但无论如何我都会为选项添加它（以防你不支持旧版本的 IE）。

不久前我在博客上写过这个，[但](http://menacestudio.com/jquery-attach-events-to-dynamic-elements-added-via-ajax)现在似乎同样的解决方案仍然适用（但就像我说的，取决于你当前支持的浏览器）。

**例子：**

```
$(document.body).on('DOMNodeInserted', function (e) {
    if (e.currentTarget.toString() === 'HTMLBodyElement') {
       console.log(e);
    }
}); 
```

`body`这不仅会触发`body`自身的任何变化。

```
$('#context').append($('<div />')); // triggers the event above 
```

如果您可以拦截`DOM`更改（例如 AJAX 调用）并创建全局回调函数，那将是理想的选择，而不是`setInterval`选项。

```
var globalCallback = function() { 
    /** Do something when the DOM changes */ 
};

/** Global AJAX event to watch for all AJAX complete within the body */
$('body').ajaxComplete(globalCallback); 
```

当然，这只是一个示例（AJAX 回调）。

# iphone - 在 UIView 中显示相机源

> ID：14902781
> 
> 赞同：0
> 
> 时间：2013-02-15T20:25:43.647
> 
> 标签：iphone, ios, objective-c

我正在研究将前置摄像头视频输入显示到类似于 FaceTime 的 UIView 中。我知道这可以使用 AVCaptureVideoPreviewLayer 轻松完成。在不使用 AVCaptureVideoPreviewLayer 的情况下是否有另一种方法可以做到这一点？

这仅用于教育目的。

更新：我发现这可以通过 UIImagePickerController 来完成

```
UIImagePickerController *cameraView = [[UIImagePickerController alloc] init];
cameraView.sourceType = UIImagePickerControllerSourceTypeCamera;
cameraView.showsCameraControls = NO;
[self.view addSubview:cameraView.view];
[cameraView viewWillAppear:YES]; 
[cameraView viewDidAppear:YES]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:57:06.917

如果您正在尝试操作像素，您可以将以下方法放入您作为委托分配给 AVCaptureVideoDataOutputSampleBufferDelegate 的类中：

```
-(void) captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
  CVImageBufferRef pb = CMSampleBufferGetImageBuffer(sampleBuffer);

  if(CVPixelBufferLockBaseAddress(pb, 0))  //zero is success
    NSLog(@"Error");

    size_t bufferHeight = CVPixelBufferGetHeight(pb);
    size_t bufferWidth = CVPixelBufferGetWidth(pb);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(pb);

    unsigned char* rowBase= CVPixelBufferGetBaseAddress(pb);

    CGColorSpaceRef colorSpace=CGColorSpaceCreateDeviceRGB();
    if (colorSpace == NULL)
      NSLog(@"Error");

    // Create a bitmap graphics context with the sample buffer data.
    CGContextRef context= CGBitmapContextCreate(rowBase,bufferWidth,bufferHeight, 8,bytesPerRow, colorSpace,  kCGImageAlphaNone);

    // Create a Quartz image from the pixel data in the bitmap graphics context
    CGImageRef quartzImage = CGBitmapContextCreateImage(context);

    UIImage *currentImage=[UIImage imageWithCGImage:quartzImage];

    // Free up the context and color space
    CFRelease(quartzImage);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    if(CVPixelBufferUnlockBaseAddress(pb, 0 )) //zero is success
    NSLog(@"Error");
} 
```

然后将该图像连接到视图控制器中的 UIImageView。查看 kCGImageAlphaNone 标志。这将取决于你在做什么。

# html - 在 li 内水平居中图像，其中图像比 li 宽

> ID：14902787
> 
> 赞同：1
> 
> 时间：2013-02-15T20:26:20.813
> 
> 标签：html, css

我必须使用哪些选项（如果有）使图像在`li`标签内居中？我所拥有的是特意将超大图像放入较小尺寸的 li 中。我想要实现的是在 li 标签内居中的图像......即这样裁剪的溢出将在左右共享，而不仅仅是在右侧。下面的代码是我正在使用的简化版本。

**HTML**

```
<ul>
  <li>
    <img src = "http://placehold.it/400x100">
  </li>
</ul> 
```

**CSS**

```
li{
  overflow:hidden;
  width: 250px;
}
img {
  border: 3px solid pink;
} 
```

codepen 在这里[http://codepen.io/anon/pen/ebCEi](http://codepen.io/anon/pen/ebCEi)。注意：我将无法使用背景图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:33:32.740

```
li {
    overflow:hidden;
    width: 250px;
    position:relative;
    height:106px;
}
img {
    border: 3px solid pink;
    position:absolute;
    left:-75px;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Snzdp/)**

您会注意到图像上的左右边框不可见，因为它超出了列表项的视口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:30:52.050

使用`text-align`：

```
li {
   overflow:hidden;
   text-align: center; /* <-------  */
   width: 250px;
} 
```

如果这不起作用试试这个：

```
img {
    border: 3px solid pink;
    margin: 0 auto; /* <-------  */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:32:43.250

试试这个：

HTML

```
<ul>
  <li>
    <img src = "http://placehold.it/400x100">
  </li>
</ul> 
```

CSS

```
li{
  overflow:hidden;
  text-align:center;
  width: 250px;
}
img {
  border: 3px solid pink;
  margin:0 auto;
} 
```

# php - MySQL 查询以嵌套树的形式从多个表中检索数据

> ID：14902788
> 
> 赞同：0
> 
> 时间：2013-02-15T20:26:25.907
> 
> 标签：php, mysql, database, performance

在 SO 上发现了类似的问题，但没有任何帮助。这是我的问题：

我有一张桌子，“事件”，会相当大。还有这两个表：“照片”和“视频”。每个“事件”记录都有一个 eid（事件 id）。每个“照片”和“视频”记录都有一个 aeid（关联事件 ID）。

要获取 20 个事件的事件数据，我目前正在运行 PHP，如下所示：

```
array = get top 20 events
for these 20 events
  array['photos'] = get all photos
  array['videos'] = get all videos
return events array 
```

我发现这运行得太慢了。可能是因为这相当于 41 个 mysql 查询。我意识到我需要以某种方式使用 JOIN（我想我至少这样做了），但我无法弄清楚我们如何构建我的查询，以便它以与我在上面的伪代码中相同的方式嵌套照片和视频. 另外，我认为我没有时间切换到 postgres（除非非常强烈建议）；我正在使用足够大的代码库，这让只有一个开发人员（我）感到头疼。

如果您发布它们，我愿意阅读文件/手册。但是，我已经在几个地方这样做了，但无济于事。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:34:47.587

尝试类似..

```
 SELECT E.eid, V.aeid, P.aeid 
 FROM events E, videos V, photos P 
 WHERE E.eid='$ID' and V.aeid='$ID' and P.aeid='$ID' 
 ORDER BY E.eid desc 
```

未经测试，但你应该明白这一点

# ruby-on-rails - 使用 Rails 和 Device 的 Web 服务，请求后如何注销

> ID：14902792
> 
> 赞同：0
> 
> 时间：2013-02-15T20:26:49.733
> 
> 标签：ruby-on-rails, web-services, api, devise

我正在使用名为“TokenAuthenticatable”的设备模块使用 Rails 进行 Web 服务

我已经激活了它，现在我可以通过提供这样的身份验证令牌通过 Web 服务登录自己：

```
http://localhost:3000/?auth_token=OyJOIOjje4_hkjdd

Logged user : Vincent 
```

问题是，如果我在那之后继续这个网址：

```
http://localhost:3000/

Logged user : Vincent 
```

该网站仍将我识别为使用我之前提供的令牌登录的用户。我只想记录一个请求。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:57:10.990

在处理您的请求的控制器操作中，您需要运行

```
sign_out current_user 
```

# c++ - 与 boost 文件系统的链接错误

> ID：14902795
> 
> 赞同：1
> 
> 时间：2013-02-15T20:27:01.153
> 
> 标签：c++, boost, mingw, codeblocks, mingw32

我刚刚使用 boost 文件系统库编写了一个小程序。现在它带有一些奇怪的链接错误。我已经尝试重新排序库，检查用于 boost 二进制文件的编译器版本（Boost 1.51.0；MinGW 4.7.1 静态库）和我的 MinGW 版本 - 4.7.1。

有人知道这可能是什么原因吗？

提前致谢。

链接器的输出是：

```
obj\Debug\main.o：在函数“ZN5boost10filesystem6existsERKNS0_4pathE”中：
C:/boost_1_51_0/boost/filesystem/operations.hpp:289: 未定义引用`boost::filesystem::detail::status(boost::filesystem::path const&, boost::system::error_code*)'

obj\Debug\main.o：在函数“ZN5boost10filesystem4pathC1IA15_cEERKT_PNS_9enable_ifINS0_11path_traits11is_pathableINS_5decayIS4_E4typeEEEvE4typeE”中：
C:/boost_1_51_0/boost/filesystem/path.hpp:139: undefined reference to `boost::filesystem::path::codecvt()'
obj\Debug\main.o：在函数“ZN5boost10filesystem11path_traits8dispatchISbIwSt11char_traitsIwESaIwEEEEvRKSsRT_RKSt7codecvtIwciE”中：
C:/boost_1_51_0/boost/filesystem/path_traits.hpp:174: 未定义引用`boost::filesystem::path_traits::convert(char const*, char const*, std::basic_string, std::allocator >&, std::codecvt const&)'

```

我链接到以下库（在 Code::Blocks 构建选项中设置）：

```
...\boost_1_51_0\stage\lib\libboost_system-mgw47-mt-d-1_51.a

...\boost_1_51_0\stage\lib\libboost_filesystem-mgw47-mt-d-1_51.a

```

源代码（有趣的部分，即使用boost的部分）：

```
//... 

#define BOOST_SYSTEM_NO_DEPRECATED 

#define BOOST_FILESYSTEM_NO_DEPRECATED 

#include <boost/filesystem.hpp> 

//... 

int main() 

{ 

    boost::filesystem::path p("./file.txt");

    if(boost::filesystem::exists(p)) cout
//... 

} 

//...

```

# java - Spring MVC 和 MustacheViewResolver 字符编码问题

> ID：14902796
> 
> 赞同：0
> 
> 时间：2013-02-15T20:27:08.267
> 
> 标签：java, spring-mvc, mustache

我正在尝试使用 Spring MVC 的 Mustache View Resolver，但在我的 Html 视图中，我遇到了字符编码问题。我尝试了许多解决方案来解决这个问题，但无法处理这个问题。

我有一个基本的 ArrayList 模型，Mustache 可以正确解析土耳其语字符，但在模板单词之外，没有任何意义。

你可以在 Github 下访问我的项目

[https://github.com/rahmanusta/SpringMvcMustache](https://github.com/rahmanusta/SpringMvcMustache)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:53:57.577

我看到您添加了一个部分来配置`maven-compiler-plugin`您`pom.xml`的 .java 源代码文件中的 UTF-8 字符。我猜您的 java 源文件中的文本显示不正确。如果是这种情况，明确告诉编译器插件使用哪种编码可能会有所帮助：

```
<build>
    <finalName>MvcMustache</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>${java.version}</source>
                <target>${java.version}</target>
                <!-- fetch encoding from definition up in the pom.xml -->
                <encoding>${project.build.sourceEncoding}</encoding>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

# java - Maven Build 不包括 jar 中的 .class 文件

> ID：14902797
> 
> 赞同：23
> 
> 时间：2013-02-15T20:27:07.393
> 
> 标签：java, maven, build-process, executable-jar

我浏览了在 StackOverflow 上可以找到的所有内容，但找不到答案。我刚刚建造了一台新机器，并且我的项目在以前的安装上编译和构建都很好。但是我的新机器不会。一切似乎都在正确构建（没有构建错误，正确包含依赖项），但我的项目中的实际类文件（我编写的代码）不包含在 jar 中。然后，我创建了一个简单的 helloWorld 项目，其中包含一些最小的 POM 文件，以查看问题仍然存在。我从命令行进行了构建，以将日食排除在外。

班级代码

```
package com.zoverge.utils;

public class HelloWorld {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String message = args[0];
        System.out.println(message);
    }

} 
```

我的 POM 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.zoverge.utils</groupId>
  <artifactId>helloworld</artifactId>
  <packaging>jar</packaging>
  <version>1.0</version>
  <name>Hello World</name>
  <url>http://maven.apache.org</url>
  <properties>
            <project.build.java.version>1.6</project.build.java.version>
            <org.apache.maven.plugins.maven-compiler-plugin.version>2.5.1</org.apache.maven.plugins.maven-compiler-plugin.version>          
  </properties>
  <build>
        <plugins>
            <!-- Maven will compile our source java classes using the "project.build.java.version" 
                specified -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>${org.apache.maven.plugins.maven-compiler-plugin.version}</version>
                <configuration>
                    <source>${project.build.java.version}</source>
                    <target>${project.build.java.version}</target>
                </configuration>
            </plugin>
  <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
          </descriptorRefs>
          <archive>
            <manifest>
              <mainClass>com.zoverge.utils.HelloWorld</mainClass>
            </manifest>
          </archive>
                <finalName>HelloWorld</finalName>
                <appendAssemblyId>false</appendAssemblyId>
        </configuration>
        <executions>
          <execution>
            <id>make-assembly</id>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
  </plugins>
  </build>
<dependencies/>
</project> 
```

生成的构建生成 2 个 jar 文件（如预期的那样）helloworld-1.0.jar 和 HelloWorld.jar。两个 jar 都不包含 HelloWorld.java 的已编译类文件。我认为这一定是我的环境的问题，因为这种行为对于在其他开发机器上运行良好的其他项目来说是相同的，但我似乎无法弄清楚其中的区别。我无法访问我以前的开发机器来比较配置。我的 .m2/setting.xml 基本上是空的。

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <localRepository>${user.home}/.m2/repository</localRepository>
  <interactiveMode/>
  <usePluginRegistry/>
  <offline/>
  <pluginGroups/>
  <servers/>
  <mirrors/>
  <proxies/>
  <profiles/>
  <activeProfiles/>
</settings> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-06-19T14:08:32.347

我发现了我的问题。问题是文件夹结构。Maven 采用 /src/main/java/ 结构。我的结构不同，并且没有在 POM.xml 中被覆盖。匹配标准路径或覆盖 POM.xml 中的路径解决了问题。

# java - Android：使用 Twitter API 1.1 oAuth

> ID：14902798
> 
> 赞同：2
> 
> 时间：2013-02-15T20:27:13.233
> 
> 标签：java, android, oauth, twitter

我想在没有用户身份验证的 Android 应用程序中进行简单的 twitter 搜索，这可以通过 API 1.0 实现，但现在我看到 API 1.1 需要使用身份验证。是否有关于如何在 Java 中使用 oAuth 的简单教程？我似乎找不到一个让事情变得简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:21:45.763

我为这个确切的问题写了一个库，非常简单和轻量级[https://github.com/twotoasters/AndrOAuth](https://github.com/twotoasters/AndrOAuth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:16:13.160

您可以查看 twitte4j 的 OAuth 实现，甚至可以在您的 Android 应用程序上使用 twitter4j：http: [//twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html)

# ios - 是否可以编辑 MPMediaItem 的元数据？

> ID：14902800
> 
> 赞同：0
> 
> 时间：2013-02-15T20:27:18.797
> 
> 标签：ios, cocoa-touch, mpmediaitem

我想制作一个 iOS 应用程序，通过允许他们在旅途中更新音乐文件的元数据来简化组织用户 iTunes 库的过程。

您是否能够编辑存储在 iPhone 上默认音乐库中的文件的元数据，或者访问受沙盒限制？如果你能做到，它是如何做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:44:06.300

你不能这样做。唯一可以修改手机音乐库的是iTunes（iOS版本或Mac版本。）

# mingw - 交叉编译器的已编译库的安装位置约定是什么？

> ID：14902806
> 
> 赞同：0
> 
> 时间：2013-02-15T20:27:43.273
> 
> 标签：mingw, shared-libraries, cross-compiling, autotools, conventions

我正在使用 mingw32msvc 从 linux 交叉编译到 win32。这很好用，mingw 使用 Wine 作为这个 BTW。

问：如果我编译 GLUT 或 FreeGLUT，我应该在哪里安装 lib（就公认的约定而言）？我用谷歌搜索了它，第一个答案就是在 /usr/local/**任意**...

更好的想法？如果没有约定，我将使用 /usr/local/**编译器名称...在这种情况下：**

/usr/local/ **i586-mingw32msvc**

如果有一个约定，那就太好了，所以 autoconf/automake/libtool 默认会在正确的位置查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:57:53.297

没有通用约定，因为没有安装编译器（或交叉编译器）的通用位置。这就是 autotools 存在的原因。你的名字很好，因为 i586-mingw32msvc 非常具有描述性。

# java - 我制作了一个 jar 文件，但它不像以前那样在命令行中运行

> ID：14902807
> 
> 赞同：1
> 
> 时间：2013-02-15T20:27:43.337
> 
> 标签：java, jar, command-prompt

我用清单和所有东西制作了一个可执行的 jar 文件，当我前一段时间在命令提示符下运行它时，它运行良好，但是现在，我做同样的事情，我也重新创建了几次 jar，它一直给我这个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: ComputingAverage (wro
ng name: me/kevinossia/mystuff/ComputingAverage)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$100(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source) 
```

我正在使用`java -jar ComputingAverage.jar`命令。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:39:25.293

您需要确保jar 文件**中**的路径与java 文件中的包头匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:32:51.190

验证您的清单文件。它向 JVM 指示您的程序将如何运行。

有关更多信息，请查看这篇文章：[http ://www.mkyong.com/java/how-to-make-an-executable-jar-file/](http://www.mkyong.com/java/how-to-make-an-executable-jar-file/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T10:22:35.530

你试试我的方法。使用eclipse创建jar文件。

右键单击您的项目->导出-> java->可运行的jar文件->下一步->在启动配置下拉框中选择ComputingAverage->选择目标导出->选择将所需库提取到生成的jar中->完成。

打开 cmd :- 给出这样的命令“java -jar jarFileName”

而已。它应该工作。

# javascript - Date formatting for javascript

> ID：14902808
> 
> 赞同：3
> 
> 时间：2013-02-15T20:27:44.620
> 
> 标签：javascript, jquery, html

I am displaying a date which takes the following format;

> Sun Feb 24 2013 00:00:00 GMT-0800 (Pacific Standard Time)

All what i want is `Sunday February 24 2013`. How could i format the above date to the format i want ?

```
var date = $(this).datepicker('getDate');
                  theDay = new Date(date.getFullYear(), date.getMonth(), date.getDate()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:33:50.363

Using the DatePicker

```
$(this).datepicker({
    dateFormat: "DD MM d yy"
}); 
```

Example here: [http://jsfiddle.net/eJseP/](http://jsfiddle.net/eJseP/)

* * *

**Edited, by request:**

```
<input type="text" id="myinputfield" value="" />
<script>
    $("#myinputfield").datepicker({
        dateFormat: "DD MM d yy"
    });
<script> 
```

# c# - 如何（真的）取消 Windows Phone 上的 ConnectAsync 请求？

> ID：14902813
> 
> 赞同：5
> 
> 时间：2013-02-15T20:28:12.207
> 
> 标签：c#, asynchronous, network-programming, windows-phone-7.1, windows-phone

我正在开发一个将连接到我的服务器的 Windows Phone 应用程序。当您按下登录按钮时，它通过使用 ConnectAsync 来执行此操作。但是，如果服务器已关闭并且您想取消连接尝试，该怎么办？

这是我最近尝试关闭套接字连接的当前客户端代码。假设一旦您知道如何关闭连接，您就可以轻松实现超时。

```
 private IPAddress ServerAddress = new IPAddress(0xff00ff00); //Censored my IP
    private int ServerPort = 13000;
    private Socket CurrentSocket;
    private SocketAsyncEventArgs CurrentSocketEventArgs;
    private bool Connecting = false;

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            if (Connecting)
            {
                CurrentSocket.Close();
                CurrentSocket.Dispose();
                CurrentSocketEventArgs.Dispose();
                CurrentSocket = null;
                CurrentSocketEventArgs = null;
            }
            UserData userdata = new UserData();
            userdata.Username = usernameBox.Text;
            userdata.Password = passwordBox.Password;

            Connecting = ConnectToServer(userdata);
        }
        catch (Exception exception)
        {
            Dispatcher.BeginInvoke(() => MessageBox.Show("Error: " + exception.Message));
        }
    }

    private bool ConnectToServer(UserData userdata)
    {
        CurrentSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

        //Create a new SocketAsyncEventArgs
        CurrentSocketEventArgs = new SocketAsyncEventArgs();
        CurrentSocketEventArgs.RemoteEndPoint = new IPEndPoint(ServerAddress, ServerPort);
        CurrentSocketEventArgs.Completed += ConnectionCompleted;
        CurrentSocketEventArgs.UserToken = userdata;
        CurrentSocketEventArgs.SetBuffer(new byte[1024], 0, 1024);

        CurrentSocket.ConnectAsync(CurrentSocketEventArgs);
        return true;
    } 
```

编辑：让我印象深刻的一个想法是，即使服务器软件没有打开，也可能是服务器计算机堆积了请求？那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:01:28.277

我相信

```
socket.Close() 
```

应该取消异步连接尝试。因此，可能会出现一些需要捕获的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T02:40:56.010

这里发生的事情是您在 ConnectAsync 的参数中指定了一个缓冲区。

```
CurrentSocketEventArgs.SetBuffer(new byte[1024], 0, 1024); 
```

[文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/bb538102%28v=vs.105%29.aspx)说：

```
Optionally, a buffer may be provided which will atomically be sent on the socket after the ConnectAsync method succeeds. 
```

因此，您的服务器将立即看到连接和数据。您的取消代码很好，只是在您有机会取消任何内容之前发送了数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:31:02.580

您的代码看起来不错。正如 Marc 所说，关闭套接字会取消所有挂起的操作。

是的，有时您连接正常但没有任何反应。要验证，在命令行中

`telnet 192.168.1.44 31337`其中 192.168.1.44 是 ServerAddress（名称也可以），31337 是 ServerPort。您可能首先使用控制面板/程序和功能/打开和关闭 Windows 功能启用“Telnet 客户端”。如果您看到“无法打开连接”= 您的 WinForms 应用程序应该无法连接。如果您看到带有闪烁光标的黑屏 = 您的 WinForms 应用程序应该可以正常连接。

# copy-paste - 从 CSV 复制并在 MS-DOS 中重命名

> ID：14902818
> 
> 赞同：0
> 
> 时间：2013-02-15T20:28:36.740
> 
> 标签：copy-paste, dos, file-rename

我有一个具有以下格式的 .csv 文件：

```
<path_including_filename>,<new_filename>
<path_including_filename>,<new_filename>
<path_including_filename>,<new_filename>
<path_including_filename>,<new_filename> 
```

我想将 CSV 中第 1 列的内容从位置 A 复制到位置 B，然后使用 CSV 中第 2 列的内容重命名位置 B 上的文件。

这是我到目前为止所做的，复制工作但重命名似乎并没有真正发生：

```
For /F "tokens=1* delims=," %%i in (myCSV.csv) do (copy "%%i" "C:/myFolder" && rename "C:/myFolder/%%~nxi" "%%j") 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:48:20.223

这个答案曾经包含我从评论中得到的*错误*建议：

当第二列不是完整路径名，而只是文件名时，`rename "C:/myFolder/%%~nxi" "%%j"`将其目标参数作为相对于*当前*目录的路径，而不是相对于*源*目录的路径。

我认为应该通过在第二个参数中提供完整路径名来解决问题`rename`：

```
rename "C:/myFolder/%%~nxi" "C:/myFolder/%%j" 
```

*但不是：完整路径*名实际上在`rename`. `cd`首先ing 到目标目录并在*任*一参数中不带文件夹名称的情况下重命名的解决方案结果证明是可行的。我认为在第一个参数中用反斜杠替换正斜杠*（*留下*第二个*没有文件夹名称）也会有所帮助：在我在 Windows XP 上的测试中，`rename`当源文件夹路径包含正斜杠时，“找不到文件”失败，并且工作用于反斜杠。

# javascript - 检查当前网站位置的正则表达式 - 小问题

> ID：14902820
> 
> 赞同：0
> 
> 时间：2013-02-15T20:28:46.597
> 
> 标签：javascript, jquery

我有这个 jquery 代码来突出显示与浏览器中当前页面相对应的菜单项：

```
 $(document).ready(function (){

    $("ul#nav a").each(function (){

    var hrefWindow = $(this).attr("href");

    if (hrefWindow == window.location.href.match(/[^/]+$/g)) {
        $(this).parent().addClass("active");
    }
    else {
        $(this).parent().removeClass("active");
    };        
});      
}) 
```

如您所见，表达式正在寻找我的网址中斜杠之后的字符串，例如：

www.mywebsite.com/thisStringWillBeFoundByExpression ,

一切正常，但是当我第一次输入我的域地址时出现了一个小问题，因为地址栏中只有 www.mywebsite.com（斜杠后没有 index.htm），而且我的表情找不到任何东西。

如果地址栏中只有 www.mywebsite.com，如何修改我的代码以将类“活动”添加到 index.htm？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:34:37.707

我建议使用`location.pathname`而不是解析`href`：

```
var path = location.pathname.substring(1);

$(this).parent().toggleClass("active", !hrefWindow || path === hrefWindow); 
```

**参考：** [https ://developer.mozilla.org/en-US/docs/DOM/window.location#Properties](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)

# javascript - Javascript API Google Maps 设置屏幕右侧

> ID：14902821
> 
> 赞同：0
> 
> 时间：2013-02-15T20:28:46.500
> 
> 标签：javascript, jquery, google-maps-api-3

我有一个容器来呈现谷歌地图实例，在这个容器上方我绘制（HTML）另一个带有搜索框（起点和终点）的容器。

选择原点时，会在地图中绘制一个标记（与目标输入相同）。

现在我需要“平移”地图以在搜索框的右侧显示标记。

现在，当我放置标记时，我使用 fitbounds 来确保标记位于地图容器内，但在某些情况下，标记会绘制在搜索框下方。

然后我尝试使用“panBy”方法在搜索框的右侧绘制地图的中心，但并不总是有效。

如何确保这两个标记始终可见并在搜索框的右侧绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:45:03.353

考虑一下：您需要确保标记位于地图的右侧。如果我们得到 NE 坐标和中心，我们可以将其与标记位置进行比较，并根据需要轻松设置新中心。

代码：

```
google.maps.event.addListener(marker, 'click', function() {
    var markerPos = this.getPosition(), center = map.getCenter(),
        mapNE = map.getBounds().getNorthEast();

    if(!(markerPos.lng() > center.lng() && markerPos.lng() < mapNE.lng())) { //marker is not on the right side
        //based on center and NE calulate pos to center the marker
        map.setCenter(new google.maps.LatLng(markerPos.lat(), (markerPos.lng() - (mapNE.lng() - center.lng())/2)));
    }
}); 
```

# ios - NSFetchedResultsController / NSFetchedResultsControllerDelegate double/triple/… 插入部分

> ID：14902824
> 
> 赞同：0
> 
> 时间：2013-02-15T20:28:59.683
> 
> 标签：ios, core-data

我在这里有一个（至少对我来说）奇怪的问题：

我有一个 UITableViewController，它有一个 NSFetchedResultsController 来处理要显示的数据。

应该显示的数据来自服务器，为了使它更容易，可以说它是一种聊天。

一个简化的模型可以描述如下。

```
---------------           -----------------           -----------------
|  MainTopic  |           |     Thread    |           |    Message    |
---------------           -----------------           -----------------
| topicID (E) |           | threadID (E)  |           |   msgID   (E) |
| name (E)    |           | name (E)      |           |   msgText (E) |
---------------           -----------------           |   msgDate (E) |           
| threads (R) | <------>> | mainTopic (R) |           -----------------
---------------           | messages (R)  | <------>> |   thread (R)  |
                          -----------------           ----------------- 
```

数据来自一个总是为 MainTopic 填充所有消息的服务器（这不在我手中）。

对于 CoreData，我有一个控制器，它被实现为单例。它有一个由 NSFetchedResultsController 使用的 mainContext (NSManagedObjectContext)。插入新数据是在单独的 NSManagedObjectContext 上完成的，它在保存时在 mainContext 上调用 mergeChangesFromContextDidSaveNotification:。

Thread 类有一个 compare:-Method，所以它也可以用于 sortdescriptor。

回到 UITableViewController：

在 viewDidLoad 上，它创建了 NSFetchedResultsController，它获取 topicID 的所有消息，sectionNameKeyPath 设置为“thread”并在 FetchedResultsController 上执行获取。

UITableView 还实现了 NSFetchedResultsControllerDelegate 以便在新消息到达时更新 TableView。这就是我的问题开始的地方。

从服务器重新获取后，表视图可能如下所示

```
______________________________________
| Thread: First thread               |
|____________________________________|
|____________________________________|
| Message 1                          |
| Message 2                          |
|____________________________________|
| Thread: Second thread              |
|____________________________________|
|____________________________________|
| Message 1                          |
| Message 2                          |
|____________________________________| 
```

现在有人将消息（消息 3）写入第一个线程，从服务器获取数据（用户保留在表视图中）。现在表格视图看起来像这样

```
______________________________________
| Thread: First thread               |
|____________________________________|
|____________________________________|
| Message 1                          |
| Message 2                          |
|____________________________________|
| Thread: First thread               |
|____________________________________|
|____________________________________|
| Message 3                          |
|____________________________________|
| Thread: Second thread              |
|____________________________________|
|____________________________________|
| Message 1                          |
| Message 2                          |
|____________________________________| 
```

如您所见，第一个线程的部分标题出现了两次。

如果 UITableViewController 将被留下并再次打开（弹出并将新实例推送到 navigationController），表格看起来很好：

```
______________________________________
| Thread: First thread               |
|____________________________________|
|____________________________________|
| Message 1                          |
| Message 2                          |
| Message 3                          |
|____________________________________|
| Thread: Second thread              |
|____________________________________|
|____________________________________|
| Message 1                          |
| Message 2                          |
|____________________________________| 
```

所以我认为错误必须在 NSFetchedResultsControllerDelegate 方法中的某个地方，但因为它们看起来“正常”。

```
#pragma mark - NSFetchedResultsControllerDelegate methods

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [[self tableView] beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller
  didChangeSection:(id<NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex
     forChangeType:(NSFetchedResultsChangeType)type
{

    NSIndexSet * indexSet = [NSIndexSet indexSetWithIndex:sectionIndex];
    switch (type) {
        case NSFetchedResultsChangeInsert:
            [[self tableView] insertSections:indexSet
                            withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [[self tableView] deleteSections:indexSet
                            withRowAnimation:UITableViewRowAnimationFade];
            break;
        default:
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    NSArray * oldArray = nil;
    if(indexPath) {
        oldArray = [NSArray arrayWithObject:indexPath];
    }
    NSArray * newArray = nil;
    if(newIndexPath) {
        newArray = [NSArray arrayWithObject:newIndexPath];
    }

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [[self tableView] insertRowsAtIndexPaths:newArray
                                    withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeDelete:
            [[self tableView] deleteRowsAtIndexPaths:oldArray
                                    withRowAnimation:UITableViewRowAnimationFade];
            break;
        case NSFetchedResultsChangeUpdate:
        {
            UITableViewCell * cell = nil;
            Message * message = nil;
            cell = [[self tableView] cellForRowAtIndexPath:indexPath];
            message = [[self fetchedResultsController] objectAtIndexPath:indexPath];

            [cell setMessageText:[message msgText]];
        }
            break;
        case NSFetchedResultsChangeMove:
            [[self tableView] insertRowsAtIndexPaths:newArray
                                    withRowAnimation:UITableViewRowAnimationFade];

            [[self tableView] deleteRowsAtIndexPaths:oldArray
                                    withRowAnimation:UITableViewRowAnimationFade];

            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [[self tableView] endUpdates];
} 
```

那么，有人对我有提示吗，问题可能出在哪里？

# date - HIVE - 按日期分组功能

> ID：14902827
> 
> 赞同：7
> 
> 时间：2013-02-15T20:29:10.230
> 
> 标签：date, hadoop, group-by, hive

谁能告诉我为什么我没有得到结果集中每个 f0、MONTH、DAY、HOUR、MINUTE 组的计数？

结果集：

![结果集](../Images/2e76a77c071689c02b0c879ddb53e1d2.png)

询问：

```
SELECT t.f0, MONTH(TO_DATE(Hex2Dec(t.f2))), DAY(TO_DATE(Hex2Dec(t.f2))), HOUR(TO_DATE(Hex2Dec(t.f2))), MINUTE(TO_DATE(Hex2Dec(t.f2))), COUNT(DISTINCT t.f1)  
FROM table t  
WHERE (t.f0 = 1 OR t.f0 = 2)  
AND (t.f3 >= '2013-02-06' AND t.f3 < '2013-02-15')   
AND (Hex2Dec(t.f2) >= 1360195200 AND Hex2Dec(t.f2) < 1360800000)  
AND *EXTRA CONDITIONS*  
GROUP BY t.f0, MONTH(TO_DATE(Hex2Dec(t.f2))), DAY(TO_DATE(Hex2Dec(t.f2))),   HOUR(TO_DATE(Hex2Dec(t.f2))), MINUTE(TO_DATE(Hex2Dec(t.f2))) 
```

架构：

f0 INT（分区列）
f1 INT
f2 STRING
f3 STRING（分区列）
f4 STRING
f5 STRING
f6 STRING
f7 MAP`<STRING,STRING>`

*f2 是十六进制格式的 unix 时间戳

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T11:29:47.220

这可能是因为**to_date**在 unix 时间应用时返回 null。
根据[Hive 手册](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-DateFunctions)：

> to_date(string timestamp)：
> 返回时间戳字符串的日期部分：to_date("1970-01-01 00:00:00") = "1970-01-01"

改用**from_unixtime**来取回正确的日期部分。

注意：
我假设 Hex2Dec UDF 取自[HIVE-1545的核心库](https://issues.apache.org/jira/browse/HIVE-1545)

# javascript - KO数据绑定到没有foreach的数组？

> ID：14902829
> 
> 赞同：0
> 
> 时间：2013-02-15T20:29:17.450
> 
> 标签：javascript, asp.net-mvc, razor, asp.net-mvc-4, knockout.js

我正在使用 MVC + Razor，并且尽可能希望留在强类型世界中。

因此希望使用 Razor 语法遍历我的视图模型，并通过数组索引将数据绑定到淘汰赛。

这是可行的吗？到目前为止，我看到的所有示例都排除了使用`for-each`模板的可能性。

```
@Html.TextBoxFor(_ => _[i],new {@readonly = "readonly", data_bind = string.Format("value:[{0}]",i) }); 
```

强类型模型是一个数组，上面是从 for 循环内部迭代的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:40:45.197

不知何故，感谢@nemesv 的原始jsfiddle：

```
<input type="text" data-bind="value: $data[0].name"></input>
<input type="text" data-bind="value: $data[1].name"></input>
<input type="text" data-bind="value: $data[2].name"></input> 
```

使用以下 javascript 文件。

```
var ViewModel = ko.observableArray( [{
        name: 'name1'
    }, {
        name: 'name2'
    }, {
        name: 'name3'
    }]
);

ko.applyBindings(ViewModel); 
```

**$data**没有它是必需的，它不起作用。我仍然不确定这是为什么。

[http://jsfiddle.net/8pVEr/3/](http://jsfiddle.net/8pVEr/3/)

# javascript - 为什么我的火花没有动画？

> ID：14902831
> 
> 赞同：0
> 
> 时间：2013-02-15T20:29:25.563
> 
> 标签：javascript, jquery, css, dom, animation

我有，在[http://blajeny.com](http://blajeny.com)，下面的代码意味着动画几个火花从用户点击屏幕上跳舞：

```
jQuery('body').click(function(event_object)
    {
    var number_of_sparks = 6 + Math.round(6 * Math.random());
    for(var index = 0; index < number_of_sparks; ++index)
        {
        spark(event_object.pageX, event_object.pageY);
        }
    });

function move_spark(image, angle, increment, speed, x, y)
    {
    console.log('angle: ' + angle + ', increment: ' + increment + ', speed: '
      + speed);
    my_angle = angle + (Math.random() - Math.random()) / 10;
    var velocity_x = Math.round(Math.cos(angle) * speed);
    var velocity_y = Math.round(Math.sin(angle) * speed);
    image.style.top = (y - 10 + velocity_y) + 'px';
    image.style.left = (x - 10 + velocity_x) + 'px';
    my_increment = increment + 1;
    if (increment > 10)
        {
        image.style.opacity = (20 - my_increment) / 10;
        }
    if (image.style.opacity < .01)
        {
        document.body.removeChild(image);
        }
    else
        {
        setTimeout(function()
            {
            move_spark(image, my_angle, my_increment, speed, x, y);
            }, 100);
        }
    }

function spark(x, y)
    {
    var increment = 0;
    var image_object = new Image();
    var angle = 2 * 3.1416 * Math.random();
    var speed = 7 * Math.random() + 7 * Math.random() + 7 * Math.random();
    image_object.onload = function()
        {
        image_object.style.position = 'absolute';
        image_object.style.zIndex = 1;
        image_object.style.top = (y - 10) + 'px';
        image_object.style.left = (x - 10) + 'px';
        }
    image_object.src = '/img/spark.png';
    document.body.appendChild(image_object);
    console.log('Before move_spark: ');
    move_spark(image_object, angle, increment, speed, x, y);
    } 
```

如果我不运行动画，单击会在预期的位置中心留下一个“火花标记”。但是，如果我尝试动画，我什么也看不到，并且日志似乎没有显示动画。目的是制作一个将移动两秒钟的动画，然后在第二秒钟内消失。

可以做些什么来更正此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:51:38.447

您没有设置不透明度，因此该对象从未出现在集合中

当您在此处检查不透明度时：

```
 if (image.style.opacity < .01) {
        document.body.removeChild(image);
    } else {
        setTimeout(function () {
            move_spark(image, my_angle, increment, speed, x, y);
        }, 100);
    } 
```

它是空白的，不是数字。

所以我通过向 image_object 添加不透明度来修复它。

[这是它的工作方式，但我不确定它是否是您想要的。](http://jsfiddle.net/UyGFv/)

我还对代码做了一些调整。你有一些多余的变量。

我不确定你的意思是什么，但我认为[这看起来更好一些](http://jsfiddle.net/UyGFv/2/)。

# javascript - 追踪淘汰赛事件

> ID：14902832
> 
> 赞同：2
> 
> 时间：2013-02-15T20:29:39.653
> 
> 标签：javascript, knockout.js, dom-events, knockout-2.0

我有一个基于 KnockoutJS 2.2.1 创建的 jQuery 网格插件。到目前为止它进展顺利，但是当插件在一个元素上初始化时，“计算”`loadGrid`方法调用了 3 次。

只是为了一点上下文，我包括该`loadGrid`方法和一些其他相关代码。（实际的插件非常大，所以为了简洁我只包括插件的一部分）

```
function GridDataModel() {
    var self = this;

    self.gridState = {
        currentPage: ko.observable(opts.gridState.currentPage),
        pageSize: ko.observable(opts.gridState.pageSize),
        totalPages: ko.observable(opts.gridState.totalPages),
        orderBy: ko.observable(opts.gridState.orderBy),
    };
    self.loadGrid = ko.computed({
        read: function () {
            console.log('load grid');
            if (opts.dataUrl != '') {
                var requestData = self.gridState;
                if (self.columns.length == 0) requestData.needColumns = true;
                $.getJSON(opts.dataUrl, requestData, function (data, textStatus, jqXHR) {
                    self.loadData(data);
                });
            }
        },
        owner: this,
        deferEvaluation: false
    });
}

gridDataModel = new GridDataModel();

ko.applyBindings(gridDataModel); 
```

请注意，此计算的唯一依赖项是 self.gridState，据我所知，这并没有改变。

我需要确定是什么导致初始化调用负载 3 次。我知道 loadGrid 在定义时会被调用（b/c deferEvaluation == false），但我需要找出导致其他两个事件触发的原因。

所以对于这个问题......**有什么方法可以追踪导致计算重新评估的事件？**

另一方面，我设置`deferEvaluation : true`但当我发出

```
gridDataModel.gridState.currentPage.valueHasMutated() 
```

计算不会触发。所以我什至可以让计算工作的唯一方法是 if `deferEvaluation == false`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:32:37.917

“来源”标签上的 Chrome 开发者工具可能会有所帮助。只需查看右侧的面板，这些面板可让您在各种 DOM 元素上设置断点。

请参阅脚本面板（现在称为“源”面板）的概述或[在](https://developers.google.com/chrome-developer-tools/docs/scripts)[DOM 事件上创建断点的概述以](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#dom)获取更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T14:57:41.577

我使用了 knockoutjs chrome 插件，并使用了 KO 消息，这样您就可以将内容显示到控制台。我过去所做的事情的例子。

```
self.messages.push(response.msg); 
```

# objective-c - SDWebImage 下载图像并存储到缓存中以获取密钥

> ID：14902835
> 
> 赞同：26
> 
> 时间：2013-02-15T20:29:48.047
> 
> 标签：objective-c, uiimage, sdwebimage

您好我在项目中使用 SDWebImage 框架，我想下载和缓存图像，但我认为我的代码将图像存储在缓存中两次？有没有办法通过一个键将图像存储在缓存中一次？这是我的代码。

```
 SDWebImageManager *manager = [SDWebImageManager sharedManager];
         [manager downloadWithURL:[NSURL URLWithString:url] options:0 progress:^(NSUInteger receivedSize, long long expectedSize) {

          } completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished) {

            if(image){
                NSString *localKey = [NSString stringWithFormat:@"Item-%d", i];
                [[SDImageCache sharedImageCache] storeImage:image forKey:localKey];
            }

          }]; 
```

有什么我错过的吗？看起来在我的分配工具中这样做会占用大量内存。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-22T19:04:30.290

我很惊讶没有人回答这个问题，但是我有一个类似的问题并且遇到了这个问题，所以我会为以后看到这个问题的人回答这个问题（假设你现在已经自己解决了这个问题）。

要直接回答您的问题，是的，您将图像缓存两次。

下载对 SDWebImageManager 的调用会根据图像 url 的 absoluteString 自动缓存带有键的图像。如果您想要自己的密钥，可以使用 SDWebImageDownloader 上的下载调用，据我所知，默认情况下不会缓存。从那里您可以调用 sharedImageCache ，就像您已经在做的那样，并使用您想要的任何键进行缓存。

除此之外，奇怪的是，您在任何情况下都看到分配堆积如山，因为 SDWebImage 通常喜欢缓存到磁盘而不是内存。也许同时发生了其他事情？

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-11-24T11:10:44.040

在**Swift**中，使用以下代码下载图像并将其存储在缓存中：

```
//SDWebImageManager download image with High Priority 

    SDWebImageManager.sharedManager().downloadImageWithURL(NSURL(string: imageUrl), options: SDWebImageOptions.HighPriority, progress: { (receivedSize :Int, ExpectedSize :Int) in
            SVProgressHUD.show()
            }, completed: { (image :UIImage!, error:NSError!, cacheType :SDImageCacheType, finished :Bool,imageUrl: NSURL!) in
                if(finished) {
                    SVProgressHUD.dismiss()
                    if((image) != nil) {
                        //image downloaded do your stuff
                    }
                }
        }) 
```

**斯威夫特 3**版本：

```
SDWebImageManager.shared().downloadImage(with: NSURL(string: "...") as URL!, options: .continueInBackground, progress: { 
(receivedSize :Int, ExpectedSize :Int) in

}, completed: { 
(image : UIImage?, error : Error?, cacheType : SDImageCacheType, finished : Bool, url : URL?) in

}) 
```

**Objective-C**版本：

```
[[SDWebImageDownloader sharedDownloader] downloadImageWithURL:[NSURL URLWithString:imageUrl] options:SDWebImageDownloaderUseNSURLCache progress:nil completed:^(UIImage *image, NSData *data, NSError *error, BOOL finished) {

                    if (image && finished) {
                        // Cache image to disk or memory
                        [[SDImageCache sharedImageCache] storeImage:image forKey:CUSTOM_KEY toDisk:YES];     
                    }
                }]; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-10-10T16:12:43.593

**SWIFT 5 和最新的 SDWebImage 5.2.3**

```
SDWebImageManager.shared.loadImage(
    with: album.artUrlFor(imageShape: .square),
    options: .continueInBackground, // or .highPriority
    progress: nil,
    completed: { [weak self] (image, data, error, cacheType, finished, url) in
        guard let sself = self else { return }

        if let err = error {
            // Do something with the error
            return
        }

        guard let img = image else {
            // No image handle this error
            return
        }

        // Do something with image
    }
) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-11-21T12:09:00.950

**斯威夫特 4：**

```
SDWebImageManager.shared().loadImage(
        with: URL(string: imageUrl),
        options: .highPriority,
        progress: nil) { (image, data, error, cacheType, isFinished, imageUrl) in
          print(isFinished)
      } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-08-24T10:21:04.830

SDWebImage 将图像缓存到磁盘和内存中。让我们来看看这个：

1.  您从新网址下载图像。
2.  它被缓存到内存和磁盘。
3.  如果您在同一会话中调用该图像，则会从内存中检索该图像。
4.  假设您重新运行应用程序，然后访问 url，它将检查内存，图像不在那里，然后它会检查磁盘，并从那里获取它。如果没有，它将下载它。
5.  按照标准设置，图像会在磁盘中保留一周。

因此，您无需担心缓存。SDWebImage 处理得非常好。

如果您还希望根据 HTTP 缓存标头进行设置，您可以对缓存进行自定义实现以及从缓存中刷新图像。

您可以在他们的 github 页面上找到完整的详细[信息](https://github.com/rs/SDWebImage)。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-06-19T09:12:12.023

**斯威夫特 4.0**。

```
let url = URL(string: imageUrl!)

SDWebImageManager.shared().imageDownloader?.downloadImage(with: url, options: .continueInBackground, progress: nil, completed: {(image:UIImage?, data:Data?, error:Error?, finished:Bool) in
     if image != nil {. 

     }
}) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-10T13:42:05.693

尝试 APSmartStorage ( [https://github.com/Alterplay/APSmartStorage](https://github.com/Alterplay/APSmartStorage) ) 而不是 SDWebImage。

APSmartStorage 从网络获取数据，并以智能配置的方式自动将数据缓存在磁盘或内存中。应该足以胜任您的任务。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-14T11:39:30.207

**是的，可以使用*手动*`SDWebImage`下载图像并存储到本地内存中。**

 *使用下载的图像**存储到本地内存**`SDWebImage`

```
func saveImage(url: URL, toCache: UIImage?, complation: @escaping SDWebImageNoParamsBlock) {
    guard let toCache = toCache else { return }

    let manager = SDWebImageManager.shared()
    if let key = manager.cacheKey(for: url) {
        manager.imageCache?.store(toCache, forKey: key, completion: complation)
    }
} 
```

**使用图像 URL 从内存中**加载图像****

 **```
static func imageFromMemory(for url: String) -> UIImage? {
    if let encoded = url.addingPercentEncoding(withAllowedCharacters: .urlFragmentAllowed),
        let url = URL(string: encoded) {
        let manager = SDWebImageManager.shared()
        if let key: String = manager.cacheKey(for: url),
            let image = manager.imageCache?.imageFromMemoryCache(forKey: key) {
            return image
        }
    }
    return nil
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-14T21:32:36.140

//创建一个自定义的IMAGEVIEW并通过数组传递图像URL(INDEXPATH.ROW)

```
(void) loadImage:(NSString *)imageLink{

    imageLink = [imageLink stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

    SDWebImageManager *manager = [SDWebImageManager sharedManager];

    [manager loadImageWithURL:[NSURL URLWithString:imageLink] options:SDWebImageDelayPlaceholder progress:^(NSInteger receivedSize, NSInteger expectedSize, NSURL * _Nullable targetURL) {

    } completed:^(UIImage * _Nullable image, NSData * _Nullable data, NSError * _Nullable error, SDImageCacheType cacheType, BOOL finished, NSURL * _Nullable imageURL) {

        imageFrame.image = image;

    }];
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-29T10:52:34.390

**斯威夫特 5.1**

```
import UIKit
import SDWebImage

extension UIImageView{
    func downloadImage(url:String){
      //remove space if a url contains.
        let stringWithoutWhitespace = url.replacingOccurrences(of: " ", with: "%20", options: .regularExpression)
        self.sd_imageIndicator = SDWebImageActivityIndicator.gray
        self.sd_setImage(with: URL(string: stringWithoutWhitespace), placeholderImage: UIImage())
    }
} 
```

**如何使用**

```
let myUrl = "https://www.example.com"
myImageView.downloadImage(url: myUrl) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-08-17T09:04:37.547

```
SDWebImageManager *manager = [SDWebImageManager sharedManager];

[manager downloadImageWithURL:ImageUrl options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize)

{

} completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) {

    if(image){

        NSLog(@"image=====%@",image);
    }
}]; 
```***

# php - 如何真正确定空字符串？

> ID：14902838
> 
> 赞同：2
> 
> 时间：2013-02-15T20:29:55.483
> 
> 标签：php, string

我试图阻止用户输入空的用户名。要确定空格，我使用以下代码：

```
if (strlen($nickname) > 0 && strlen(trim($nickname)) == 0)
{
die("Your username is empty");
} 
```

它可以工作，但是当用户同时按下 Alt+0160 和空格时，上述条件不成立，那么我如何确定用户名是否仅包含空格和 alt+0160 或任何其他导致空字符的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:34:14.950

您可以先过滤字符串

```
$string = filter_var($string,FILTER_SANITIZE_STRING , FILTER_FLAG_STRIP_LOW | FILTER_FLAG_STRIP_HIGH ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:34:44.937

试试这样：

```
$nickname = preg_replace("/[^A-Za-z0-9]/","",$str); //only things from the alfabet + numbers
if( strlen( $nickname ) < 1){
  // error
} 
```

你过滤掉你不想要的东西（在这种情况下，只允许你想要的东西），然后检查字符串的长度。

# ruby-on-rails - 在haml中使用link_to传递参数

> ID：14902839
> 
> 赞同：3
> 
> 时间：2013-02-15T20:30:03.070
> 
> 标签：ruby-on-rails

```
%tbody
  - @accounts.each do |account|
    %tr
      %td= link_to account['id'],show_path,{:id => account['id']}
      %td= account['name']
      %td= account['description']
      %td= account['created'] 
```

以上只是haml文件的一个片段，在我的控制器中我有以下内容：

```
def show 
  # If a system account already exists in session, it was found from a search with the account id
  # Otherwise, this is a new search for a system account by the given id
  @account = session[:account]
  if @account.nil?
    Rails.logger.debug { "Querying for the account with id: #{params[:id]}" }
    response = query_account(CGI.escape(params[:id]))
    @account = JSON.parse(response.body)
  end
end 
```

路线（show_path）是 /system_accounts/:id

如果 id 为 23，我如何将参数 id 传递给控制器​​并链接 /system_accounts/23 例如：。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T21:01:53.723

这将链接到该帐户的正确显示页面：

```
= link_to account.id, account 
```

您始终可以向路径显式添加任何其他参数：

```
= link_to account.id, account_path(:id => account.id, :foo => "bar") 
```

# oop - 扩展扩展类型

> ID：14902841
> 
> 赞同：0
> 
> 时间：2013-02-15T20:30:10.733
> 
> 标签：oop, fortran, type-extension

我想扩展一个已经扩展了一个类型的 Fortran 类型。我知道当我有一个扩展类型时，我可以写

```
type o1
...
type, extends(o1) :: o2
...

type(Object1) :: o1
allocate(o2::o1) 
```

当我有第三种扩展类型时，这将如何工作`o2`？这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T20:57:26.513

是的。为了清楚起见，重述代码并重命名：

```
type :: t1               ! The top level parent type.
  integer :: c1          ! A component in the parent type.
end type t1

type, extends(t1) :: t2  ! An extension of t1.
  integer :: c2
end type t2

type, extends(t2) :: t3  ! A further extension of t2.
  integer :: c3
end type t3

! Declare an object of declared type t1.
class(t1), allocatable :: object

! Allocate that object, giving it a dynamic type of t3.
allocate(t3 :: object)

object%c1 = 1       ! c1 is a component of the declared type.
! Use select type or a type bound procedure to access c2 and c3\. 
```

# mysql - Yii 通过外键获取表名

> ID：14902854
> 
> 赞同：0
> 
> 时间：2013-02-15T20:30:44.500
> 
> 标签：mysql, yii

我有 2 个表：
**City** -> ID, Name, Country_id
**国家**-> ID, Name

是否可以从 Country_id 获取“Countries”表的名称
（当然，Country_id 设置为外键）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:14:16.980

[CActiveRecord::tableName()](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#tableName-detail)可能是您正在寻找的。

假设 City 和 Country 都是 AR 类*，并且*您在它们之间建立了关系。

```
$countryTableName = City::model()->findByPk($id)->country->tableName(); 
```

# playframework-2.1 - 静态内容的远期过期标头

> ID：14902855
> 
> 赞同：1
> 
> 时间：2013-02-15T20:30:47.127
> 
> 标签：playframework-2.1

怎么写在这里[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

> 对于静态组件：通过设置远期 Expires 标头来实施“永不过期”策略

我可以通过响应为“304”来避免 http 请求，从而获得性能。
在正式比赛中！文档我可以看到如何设置缓存控制指令，但是如何设置远期的 Expires 标头？

最好的问候尼古拉

**编辑：**感谢重播，现在它也能正常工作了！这里有课程：

*配置/路由*

```
 # Static files
  GET /assets/stylesheets/img/:name controllers.StaticFilesController.getBoostrapImg(name)
  GET /assets/images/*name          controllers.StaticFilesController.getImg(name)
  GET /assets/stylesheets/*name     controllers.StaticFilesController.getCss(name)
  GET /assets/javascripts/*name     controllers.StaticFilesController.getJs(name) 
```

*控制器/StaticFilesController.java*

```
package controllers;
import org.apache.http.impl.cookie.DateUtils;
import java.util.*;
import play.mvc.*;
import services.FileName;
import play.*;
public class StaticFilesController extends Controller {

private static String nextYearString = StaticFilesController
        .getNextYearAsString();

public static Result getImg(String path) {

    FileName fileName = new FileName(path);
    response().setHeader(EXPIRES, nextYearString);
    response().setContentType("image/" + fileName.extension());
    return ok(Play.application().getFile("/public/images/" + path));
}

public static Result getBoostrapImg(String path) {

    FileName fileName = new FileName(path);
    response().setHeader(EXPIRES, nextYearString);
    response().setContentType("image/" + fileName.extension());
    return ok(Play.application().getFile(
            "/public/images/" + fileName.filename() + "."
                    + fileName.extension()));
}

public static Result getCss(String path) {

    response().setHeader(EXPIRES, nextYearString);
    response().setContentType("text/css");
    return ok(Play.application().getFile("/public/stylesheets/" + path));
}

public static Result getJs(String path) {

    response().setHeader(EXPIRES, nextYearString);
    response().setContentType("application/x-javascript");
    return ok(Play.application().getFile("/public/javascripts/" + path));
}

private static String getNextYearAsString() {
    Calendar calendar = new GregorianCalendar();
    calendar.add(Calendar.YEAR, 1);
    return DateUtils.formatDate(calendar.getTime());
}
} 
```

*服务/文件名.java*

```
package services;

/**
* This class assumes that the string used to initialize fullPath has a
* directory path, filename, and extension. The methods won't work if it
* doesn't.
*/
public class FileName {
private String fullPath;
private char pathSeparator, extensionSeparator;

public FileName(String str, char sep, char ext) {
 fullPath = str;
 pathSeparator = sep;
 extensionSeparator = ext;
}

public FileName(String str)
{
  fullPath = str;
  pathSeparator = '/';
  extensionSeparator = '.';
}

public String extension() {
  int dot = fullPath.lastIndexOf(extensionSeparator);
  return fullPath.substring(dot + 1);
 }

 public String filename() { // gets filename without extension
 int dot = fullPath.lastIndexOf(extensionSeparator);
 int sep = fullPath.lastIndexOf(pathSeparator);
  return fullPath.substring(sep + 1, dot);
}

 public String path() {
  int sep = fullPath.lastIndexOf(pathSeparator);
   return fullPath.substring(0, sep);
  }
 } 
```

和*意见/main.scala.html*

```
 @(skin: String)(content: Html)

 <!DOCTYPE html>

 <html lang="en">
   <head>
     <meta charset="utf-8"> 
     <title>LibreTitan</title>
      <link rel="stylesheet" media="screen"    href="@routes.StaticFilesController.getCss("bootstrap/bootstrap.min.css")">
    @if(skin != null && !skin.equals("")) {
    <link rel="stylesheet" media="screen" href="@routes.StaticFilesController.getCss(skin+".min.css")">
    }
    <link rel="shortcut icon" type="image/png" href="@routes.StaticFilesController.getImg("favicon.png")">
    <script async src="@routes.StaticFilesController.getJs("jquery-1.9.0.min.js")"></script>
    <script async src="@routes.StaticFilesController.getJs("bootstrap.min.js")"></script>
</head>
<body>
    <div class="container">
        @content
     </div>
    </body>
 </html> 
```

![在此处输入图像描述](../Images/9e358f8355f9facd68c28675887981d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:10:22.713

`Never expire`在这种情况下，策略意味着应该`Expire`在您的响应中添加标题，该日期是在很远的将来，例如从现在开始的 10 年。[`Manipulating the response`](http://www.playframework.com/documentation/2.1.0/JavaResponse)您可以按照文档中的说明在 Play 中轻松完成此操作。例子：

```
public static Result index() {
    response().setHeader(EXPIRES, "Thu, 16 Feb 2023 20:00:00 GMT");
    return ok("<h1>Hello World!</h1>");
} 
```

当然，`String`您应该使用一些方法来动态计算到期日期，而不是给出到期日期，您可以使用`org.joda.time.DateTime`（在 Play 中可用）及其方法来做到这一点，例如：[`plusYears(int years)`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#plusYears%28int%29). 最重要的是应该最终格式化为`RFC 1123`日期格式。

**编辑**，当然您可以返回不同类型的结果 - 也是[文档](http://www.playframework.com/documentation/2.1.0/JavaActions)（“结果”部分）中描述的二进制文件，以检查所有可用选项查看 API：[`play.mvc.Results`](http://www.playframework.com/documentation/api/2.1.0/java/play/mvc/Results.html)它可以是：`ok(Content content)`- 渲染某些视图时的典型情况`ok(java.io.File content)`，，，，`ok(java.io.InputStream content)`等等

### 另一方面...

我绝对建议不要使用 Play 来提供服务`far future static contents`（以及任何其他静态的公共内容）。尽管您可以轻松地做到这一点，但如上所述，恕我直言，这是对 Play 资源的多余浪费，因为您需要处理对任何单个图像、脚本、样式...的所有请求。

考虑为该工作使用通用的... HTTP 服务器（nginx、lighthttpd、Apache），甚至更好的一些分布式 CDN。在这种情况下，您的应用程序可以关注执行其逻辑，而不是在磁盘上搜索样式表。

**PS**请记住，如果您使用的是 Play 而不是 HTTP 服务器，则要添加从`/public`文件夹提供的新静态内容，您需要重新启动应用程序，因此至少确保将它们保存在应用程序之外的某个专用文件夹中，因此您可以在不停止应用程序的情况下添加/删除/替换它们。

# neo4j - 过滤一个已过滤的 Cypher 查询结果

> ID：14902862
> 
> 赞同：1
> 
> 时间：2013-02-15T20:31:24.803
> 
> 标签：neo4j, cypher

嗨，这是我当前想要“重新过滤”的查询：

```
START movie = node(*)
MATCH user-[:LIKE]->category-[:SIMILAR*0..3]-()<-[:TAGGED]->movie
WHERE user.name = "current_user"

WITH DISTINCT movie, user, category

RETURN user.name, category.name, ID(movie), movie.name
ORDER BY movie.name; 
```

[http://console.neo4j.org/r/u19iim](http://console.neo4j.org/r/u19iim)

这是当前查询后的样子：

```
+--------------+----------------+-----------+-------------------------+
| user.name    | category.name  | ID(movie) | movie.name              |
+--------------+----------------+-----------+-------------------------+
| current_user | c              | 14        | movie_c_and_d_and_e     |
| current_user | d              | 14        | movie_c_and_d_and_e     |
| current_user | e              | 14        | movie_c_and_d_and_e     |
| current_user | a              | 9         | movie_of_a_and_b_and_b1 |
| current_user | b              | 9         | movie_of_a_and_b_and_b1 |
| current_user | b              | 10        | movie_of_b2_first       |
| current_user | b              | 11        | movie_of_b2_second      |
| current_user | c              | 12        | movie_of_c              |
| current_user | d              | 13        | movie_of_d_and_e        |
| current_user | e              | 13        | movie_of_d_and_e        |
+--------------+----------------+-----------+-------------------------+ 
```

我想`GROUP BY COUNT(sugg) AS category_count`提取这个：

```
+--------------+----------------+-----------+-------------------------+
| user.name    | category_count | ID(movie) | movie.name              |
+--------------+----------------+-----------+-------------------------+
| current_user | 3              | 14        | movie_c_and_d_and_e     |
| current_user | 2              | 9         | movie_of_a_and_b_and_b1 |
| current_user | 2              | 13        | movie_of_d_and_e        |
| current_user | 1              | 10        | movie_of_b2_first       |
| current_user | 1              | 11        | movie_of_b2_second      |
| current_user | 1              | 12        | movie_of_c              |
+--------------+----------------+-----------+-------------------------+ 
```

我怎样才能做到这一点？

类似的问题： -[如何在 neo4j 的密码查询中有两个聚合？](https://stackoverflow.com/questions/13781934/how-to-have-two-aggregation-in-cypher-query-in-neo4j)

**更新**
这是工作结果（带有演示：[http](http://tinyurl.com/cywlycc) ://tinyurl.com/cywlycc ）：

```
START movie = node(*)
MATCH user-[:LIKE]->category-[:SIMILAR*0..3]-()<-[:TAGGED]->movie
WHERE user.name = "current_user"
WITH DISTINCT movie, category WITH COUNT(movie) AS category_count, movie, collect(category.name) as categorized
RETURN category_count, ID(movie), movie.name, categorized
ORDER BY category_count DESC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:34:44.117

```
START movie = node(*) 
MATCH user-[:LIKE]->category-[:SIMILAR*0..3]-()<-[:TAGGED]->movie 
WHERE user.name = "current_user" 
WITH DISTINCT movie, user, category 
RETURN user.name, count(category.name) as category_count, ID(movie), movie.name 
ORDER BY category_count desc, movie.name asc 
```

[http://console.neo4j.org/r/69rfkn](http://console.neo4j.org/r/69rfkn)

# file-io - 水平读取数据

> ID：14902863
> 
> 赞同：1
> 
> 时间：2013-02-15T20:31:28.670
> 
> 标签：file-io, fortran, gfortran

以下是我正在使用的数据集：

```
 2             19.000000E-01  4.246377E+24  9000.0        100.0  106.0  1400.0
    2.601629E+4   1E+24          2.232456E+2   0.100000E+00
    0.000000E+00  0.20000E+00    1.000000E+00  5.169046E+4
    0.000000E+00  0.000000E+00   0.000000E+00 
```

我想使用 Gfortran 从左到右读取此文本数据集的元素。但是，我的代码是从上到下阅读的。此外，它并没有读取所有元素。有什么方法可以让我的 GFortran 代码从左到右读取并读取所有元素？

这是我的代码：

```
 PROGRAM S1
  IMPLICIT NONE

  REAL :: col1
  REAL :: col2, col3
  REAL :: col4, col5
  REAL :: col6, col7
  INTEGER :: IOstatus=0

  open (unit = 1, file = "testing.txt", STATUS = "OLD")
  readloop: DO
  READ (1,*,IOSTAT=IOstatus) col1,col2,col3,col4,col5,col6,col7
  IF (IOstatus /=0) EXIT
  WRITE (*, *) col1,col2,col3,col4,col5,col6,col7
  END DO readloop
  END PROGRAM 
```

谢谢。如果我能提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T14:38:04.157

问题是 Fortran 逐行（逐行）读取记录。逐列阅读并不是很简单。

当我运行它时，这是我得到的输出：

```
 2.00000000       1.89999998       4.24637708E+24   9000.00000       100.000000       106.000000       1400.00000
   26016.2891       1.00000001E+24   223.245605      0.100000001       0.00000000      0.200000003       1.00000000 
```

由于 Fortran 逐行读取，它将尝试读取第一行中的所有内容，然后是第二行，依此类推。在这种情况下，循环的第一次迭代从第一行读取七个项目。第二次迭代从第二行读取四个项目，然后从第三行读取三个。第三次迭代尝试读取其余部分，但由于没有其他要读取的项目，因此`READ`失败并退出循环。

阅读专栏需要一些工作。第一步可能是使您的列变量数组。您可能必须读取记录（行/行）并自己解析它们，或者一次读取一项并手动将它们分类到列中。

另外，看看这篇文章；它可能会提供一些帮助：[Reading columns from data file in fortran](https://stackoverflow.com/questions/13623569/reading-columns-from-data-file-in-fortran)

# google-api - 使用“google-api-dotnet-client”访问 FusionTables 时出错

> ID：14902871
> 
> 赞同：0
> 
> 时间：2013-02-15T20:32:05.160
> 
> 标签：google-api, google-fusion-tables, google-api-dotnet-client

我正在尝试使用 FusionTables API。但我收到此错误：

> 来自程序集“Google.Apis.Fusiontables.v1, Version=1.2.4737.25287, Culture=neutral, PublicKeyToken=null”的“Google.Apis.Fusiontables.v1.Data.Table”类型中的方法“get_Error”没有实现。

有人可以帮我解决这个错误吗？这是我的代码：

```
 // Create the service.
 if (fTableService == null)
 {
     // Register the authenticator.
     var auth = CreateAuthenticator();
     fTableService = new FusiontablesService(auth);
     if (fTableService != null)
     {                   
         name = fTableService.Table.List().Fetch().Items[0].Name;
     }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:05:06.800

看起来您在程序集版本（生成的 API 和谷歌客户端库本身）之间混合。

尝试从[http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Fusion_Tables_API](http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Fusion_Tables_API)下载最新版本的 FusionTables API 。该捆绑包包含您需要引用的所有 dll。

祝你好运

# java - JOGL 不捕获 Java 鼠标事件

> ID：14902872
> 
> 赞同：0
> 
> 时间：2013-02-15T20:32:07.157
> 
> 标签：java, jogl

我想用 Java 和 Jogl 编写一个程序。我们有一个 Jframe 和一个位于该框架内的 GLJPanel。该程序接收鼠标事件，当用户单击框架时，它会在该位置绘制一个点。我为这个程序编写了以下代码，但是有问题。有时，当您单击框架时，该单击的事件不会发出或发出延迟。请告诉我如何解决这个问题。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package jogli;

import com.jogamp.opengl.util.FPSAnimator;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.media.opengl.awt.GLJPanel;
import javax.swing.JFrame;

/**
 *
 * @author HESSAM
 */
public class JOGLI extends JFrame {

    /**
     * @param args the command line arguments
     */
    private GLJPanel pan;

    public JOGLI()
    {
        pan = new Curve();
        this.setMinimumSize( new Dimension( 800 , 600 ) );
        this.add(pan);
        this.pack();
        this.setVisible(true);
        final FPSAnimator anime1 = new FPSAnimator( pan , 24 , true ); 
        anime1.start();
        this.addWindowListener( new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                // Use a dedicate thread to run the stop() to ensure that the
                // animator stops before program exits.
                new Thread() {
                   @Override
                   public void run() {
                      if (anime1.isStarted()) {
                           anime1.stop();
                       }                      
                      System.exit(0);
                   }
                }.start();         
            }
        });                                
    }
    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JOGLI().setVisible(true);
            }
        });
        // TODO code application logic here
    }
}

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package jogli;

import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import javax.media.opengl.GL2;
import javax.media.opengl.GLAutoDrawable;
import javax.media.opengl.GLEventListener;
import javax.media.opengl.awt.GLJPanel;

/**
 *
 * @author HESSAM
 */
public class Curve extends GLJPanel implements GLEventListener {
    private ArrayList < int[] > pointSet;
    private GL2 mygl;
    public Curve()
    {        
        pointSet = new ArrayList<>();
        this.addGLEventListener(this);
        this.addMouseListener( new MouseAdapter() {
            @Override
            public void mouseClicked( MouseEvent e )
            {
                final int[] newPoint = { 0 , 0 , 0 };
                newPoint[0] = e.getX();
                newPoint[1] = getSize().height - e.getY();                                
                pointSet.add(newPoint);
                display();

            }
        });
    }
    @Override
    public void init(GLAutoDrawable drawable) { 
        mygl = drawable.getGL().getGL2();
        mygl.glClearColor(0.15f, 0.15f , 0.15f , 1);
        mygl.glClear(mygl.GL_COLOR_BUFFER_BIT);
        mygl.glLoadIdentity();
        mygl.glMatrixMode(mygl.GL_PROJECTION);
        mygl.glLoadIdentity();
        mygl.glOrtho(0, getSize().width, 0, getSize().height, -1, 1);
        mygl.glMatrixMode(mygl.GL_MODELVIEW);
    }

    @Override
    public void dispose(GLAutoDrawable drawable) {        
    }

    @Override
    public void display(GLAutoDrawable drawable) { 
        mygl = drawable.getGL().getGL2();
        mygl.glClear(mygl.GL_COLOR_BUFFER_BIT);
        mygl.glBegin(mygl.GL_POINTS);
        {
            mygl.glColor3d(1, 0.1, 0.5);
            for( int i = 0 ; i < pointSet.size() ; ++i )
            {
                for(int j = -2 ; j <= 2 ; ++j ) {
                    for(int k = -2 ; k <= 2 ; ++k ) {
                        mygl.glVertex2d(pointSet.get(i)[0] + j, pointSet.get(i)[1] + k);
                    }
                }
            }
        }
        mygl.glEnd();
    }

    @Override
    public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height) {        
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T16:05:54.493

AWT 输入 EventDispatchThread 被渲染阻塞，反之亦然，这是 AWT 的设计限制，因为它在单个线程上执行输入和渲染。

建议使用 JogAmp JOGL NEWT 输入和窗口系统。NEWT 旨在与渲染并行进行输入。您可以直接使用 GLWindow (NEWT) 或使用 NewtCanvasAWT（AWT 应用程序中的 GLWindow），然后使用 NEWTEventFiFo 将输入注入渲染循环。 [http://jogamp.org/jogl/doc/NEWT-Overview.html](http://jogamp.org/jogl/doc/NEWT-Overview.html)

# mysql - http://java.sun.com/jsp/jstl/core 无法在 web.xml 或随此应用程序部署的 jar 文件中解析

> ID：14902875
> 
> 赞同：3
> 
> 时间：2013-02-15T20:32:24.030
> 
> 标签：mysql, eclipse, jsp, tomcat, jstl

我是 jsp Web 开发的新手，调试我的应用程序以便能够读取数据库会出现以下错误：

```
The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved in either web.xml or the jar files deployed with this application 
```

我在多个网站上就这个问题研究了很长时间，无法解决任何问题。这些是我的规格：

IDE：eclipse/ JSP 版本：2.0/ Servlet 版本：2.4/ JSTL 版本：1.1.1/ Tomcat 版本：7.0.35/

这是我的 WEB-INF/web.xml 文件

```
<?xml version="1.0" encoding="UTF-8" ?>
  <web-app xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee web-app_2_4.xsd"
version="2.4">  
  <resource-ref>
    <description>Resource configuration for database connection</description>
    <res-ref-name>jdbc/TestDB</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref>
 </web-app> 
```

这是我的 META-INF/context.xml 文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<Context>
<Resource name="jdbc/TestDB" auth="Container" type="javax.sql.DataSource"
           maxActive="100" maxIdle="30" maxWait="10000"
           username="admin" password="admin" driverClassName="com.mysql.jdbc.Driver"
           url="jdbc:mysql://localhost:3306/checklist_pdnf"/>

 </Context> 
```

这是我的jsp文件

```
<?xml version="1.0" encoding="UTF-8" ?>

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %>

<sql:query var="db" dataSource="jdbs/TestDB">
select * from patient
</sql:query>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>    
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
<body>  
<div>
         <table>
    <c:forEach var="row" items="${db.rows}">    
            <tr>
            <td>row.getString("patient_medicalRecordNumber")</td>
            <td>row.getString("patient_lastName")</td>
            <td>row.getString("patient_firstName")</td>
            <td>row.getString("patient_middleName")</td>
            <td>row.getString("patient_dateOfBirth")</td>
            <td>row.getString("patient_gender")</td>
            <td>row.getString("patient_admissionDateTime")</td>
            <td>row.getString("patient_dischargeDateTime")</td>
            <td>row.getString("patient_attendingPhysician")</td>
            <td>row.getString("patient_locationRoom")</td>
        </tr>
    </c:forEach>    
     </table>
   </div> 
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T23:44:11.657

原来我的 JSP 版本实际上是 2.2，我记得在 Eclipse 中打开了一个 about 页面以获取此信息，但无法重新找到它以进行回答。但是，如有必要，我会相应地更新此答案。

使用的库：

(1) javax.servlet.jsp.jstl-1.2.1.jar

(2) javax.servlet.jsp.jstl-api-1.2.1.jar

(3) javax.servlet-api-3.0.1.jar

(4)mysql-connector-java-5.1.23-bin.jar

pom.xml 引用自[http://java.net/projects/jsp/sources/svn/content/trunk/impl/pom.xml?rev=1440](http://java.net/projects/jsp/sources/svn/content/trunk/impl/pom.xml?rev=1440)

依赖的版本是：

a) javax.servlet-api 3.1。(b) javax.el-api 2.2.1。(c) javax.servlet.jsp-api 1.2.1 (d) javax.servlet.jsp.jstl-api 1.2.1。(e) jstl 1.2。(f) jstl-imp 1.2。

web.xml 中的参考：

```
`<web-app  
  xmlns="http://java.sun.com/xml/ns/javaee" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"> ` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:38:24.837

根据该链接，您是否按照以下说明进行操作？

> 该 JSP 页面使用 JSTL 的 SQL 和 Core 标记库。您可以从 Apache Tomcat Taglibs - 标准标签库项目中获得它 - 只需确保您获得 1.1.x 或更高版本。拥有 JSTL 后，将 jstl.jar 和 standard.jar 复制到 Web 应用程序的 WEB-INF/lib 目录。

# c++ - 未排序长度 n 数组中 k 个最大元素的索引

> ID：14902876
> 
> 赞同：19
> 
> 时间：2013-02-15T20:32:25.010
> 
> 标签：c++, arrays, max, indices

我需要在 C++ 中找到未排序、长度为 n、数组/向量的 k 个最大元素的索引，其中 k < n。我已经看到如何使用 nth_element() 来查找第 k 个统计信息，但我不确定使用它是否是解决我的问题的正确选择，因为我似乎需要对 nth_statistic 进行 k 次调用，我猜它会有 O(kn) 的复杂度，这可能会尽可能好？或者有没有办法在 O(n) 中做到这一点？

在没有 nth_element() 的情况下实现它似乎我必须遍历整个数组一次，在每一步填充最大元素的索引列表。

标准 C++ 库中是否有任何东西使它成为单行或任何聪明的方式来自己在几行中实现它？在我的特殊情况下，k = 3 和 n = 6，因此效率不是一个大问题，但如果找到一种干净且有效的方法来对任意 k 和 n 执行此操作，那就太好了。

看起来[标记未排序数组的前 N ​​个元素](https://stackoverflow.com/questions/1885591/mark-the-top-n-elements-of-an-unsorted-array)可能是我可以在 SO 上找到的最接近的帖子，这些帖子在 Python 和 PHP 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T22:29:33.273

这是我的实现，它可以满足我的需求，并且我认为它相当有效：

```
#include <queue>
#include <vector>
// maxindices.cc
// compile with:
// g++ -std=c++11 maxindices.cc -o maxindices
int main()
{
  std::vector<double> test = {0.2, 1.0, 0.01, 3.0, 0.002, -1.0, -20};
  std::priority_queue<std::pair<double, int>> q;
  for (int i = 0; i < test.size(); ++i) {
    q.push(std::pair<double, int>(test[i], i));
  }
  int k = 3; // number of indices we need
  for (int i = 0; i < k; ++i) {
    int ki = q.top().second;
    std::cout << "index[" << i << "] = " << ki << std::endl;
    q.pop();
  }
} 
```

这给出了输出：

```
index[0] = 3
index[1] = 1
index[2] = 0 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-15T08:38:53.840

这应该是 @hazelnusse 的改进版本，它被执行`O(nlogk)`而不是`O(nlogn)`

```
#include <queue>
#include <iostream>
#include <vector>
// maxindices.cc
// compile with:
// g++ -std=c++11 maxindices.cc -o maxindices
int main()
{
  std::vector<double> test = {2, 8, 7, 5, 9, 3, 6, 1, 10, 4};
  std::priority_queue< std::pair<double, int>, std::vector< std::pair<double, int> >, std::greater <std::pair<double, int> > > q;
    int k = 5; // number of indices we need
  for (int i = 0; i < test.size(); ++i) {
    if(q.size()<k)
        q.push(std::pair<double, int>(test[i], i));
    else if(q.top().first < test[i]){
        q.pop();
        q.push(std::pair<double, int>(test[i], i));
    }
  }
  k = q.size();
  std::vector<int> res(k);
  for (int i = 0; i < k; ++i) {
    res[k - i - 1] = q.top().second;
    q.pop();
  }
  for (int i = 0; i < k; ++i) {
    std::cout<< res[i] <<std::endl;
  }
} 
```

> 8 4 1 2 6

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-06T04:33:50.317

这个问题有部分答案；也就是说，`std::nth_element`返回“第 n 个统计量”，其属性是*第 n 个之前的元素都没有大于它*，并且*它后面的元素都没有小于它*。

因此，*只需一次调用*就`std::nth_element`足以获得 k 个最大的元素。时间复杂度将为 O(n)，理论上是最小的，因为您必须至少访问每个元素一次才能找到最小（或在本例中为 k 最小）的元素。如果您需要对这 k 个元素进行排序，那么您需要对它们进行排序，即 O(k log(k))。因此，总共 O(n + k log(k))。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T20:39:46.023

您可以使用快速排序算法的基础来做您需要的事情，除了重新排序分区之外，您可以摆脱超出所需范围的条目。

它被称为“快速选择”，[这是一个 C++ 实现](http://login2win.blogspot.com/2011/06/quick-select.html)：

```
int partition(int* input, int p, int r)
{
    int pivot = input[r];

    while ( p < r )
    {
        while ( input[p] < pivot )
            p++;

        while ( input[r] > pivot )
            r--;

        if ( input[p] == input[r] )
            p++;
        else if ( p < r ) {
            int tmp = input[p];
            input[p] = input[r];
            input[r] = tmp;
        }
    }

    return r;
}

int quick_select(int* input, int p, int r, int k)
{
    if ( p == r ) return input[p];
    int j = partition(input, p, r);
    int length = j - p + 1;
    if ( length == k ) return input[j];
    else if ( k < length ) return quick_select(input, p, j - 1, k);
    else  return quick_select(input, j + 1, r, k - length);
}

int main()
{
    int A1[] = { 100, 400, 300, 500, 200 };
    cout << "1st order element " << quick_select(A1, 0, 4, 1) << endl;
    int A2[] = { 100, 400, 300, 500, 200 };
    cout << "2nd order element " << quick_select(A2, 0, 4, 2) << endl;
    int A3[] = { 100, 400, 300, 500, 200 };
    cout << "3rd order element " << quick_select(A3, 0, 4, 3) << endl;
    int A4[] = { 100, 400, 300, 500, 200 };
    cout << "4th order element " << quick_select(A4, 0, 4, 4) << endl;
    int A5[] = { 100, 400, 300, 500, 200 };
    cout << "5th order element " << quick_select(A5, 0, 4, 5) << endl;
} 
```

输出：

```
1st order element 100
2nd order element 200
3rd order element 300
4th order element 400
5th order element 500 
```

编辑

该特定实现具有 O(n) 平均运行时间；由于选择枢轴的方法，它共享快速排序的最坏情况运行时间。通过[优化枢轴选择](http://en.wikipedia.org/wiki/Selection_algorithm#Linear_general_selection_algorithm_-_Median_of_Medians_algorithm)，您的最坏情况也变为 O(n)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T22:06:22.217

标准库不会为您提供索引列表（它旨在避免传递冗余数据）。但是，如果您对 n 个最大元素感兴趣，请使用某种分区（两者`std::partition`都是`std::nth_element`O(n)）：

```
#include <iostream>
#include <algorithm>
#include <vector>

struct Pred {
    Pred(int nth) : nth(nth) {};
    bool operator()(int k) { return k >= nth; }
    int nth;
};

int main() {

    int n = 4;
    std::vector<int> v = {5, 12, 27, 9, 4, 7, 2, 1, 8, 13, 1};

    // Moves the nth element to the nth from the end position.
    std::nth_element(v.begin(), v.end() - n, v.end());

    // Reorders the range, so that the first n elements would be >= nth.
    std::partition(v.begin(), v.end(), Pred(*(v.end() - n)));

    for (auto it = v.begin(); it != v.end(); ++it)
        std::cout << *it << " ";
    std::cout << "\n";

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-26T10:55:00.023

尽管以下代码可能无法满足所需的复杂性约束，但它可能是前面提到的优先级队列的有趣替代方案。

```
#include <queue>
#include <vector>
#include <iostream>
#include <iterator>
#include <algorithm>

std::vector<int> largestIndices(const std::vector<double>& values, int k) {
    std::vector<int> ret;

    std::vector<std::pair<double, int>> q;
    int index = -1;
    std::transform(values.begin(), values.end(), std::back_inserter(q), [&](double val) {return std::make_pair(val, ++index); });
    auto functor = [](const std::pair<double, int>& a, const std::pair<double, int>& b) { return b.first > a.first; };
    std::make_heap(q.begin(), q.end(), functor);
    for (auto i = 0; i < k && i<values.size(); i++) {
        std::pop_heap(q.begin(), q.end(), functor);
        ret.push_back(q.back().second);
        q.pop_back();
    }

    return ret;
}

int main()
{
    std::vector<double> values = { 7,6,3,4,5,2,1,0 };
    auto ret=largestIndices(values, 4);
    std::copy(ret.begin(), ret.end(), std::ostream_iterator<int>(std::cout, "\n"));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-15T08:49:06.747

您可以`O(n)`通过单次订单统计计算及时完成此操作：

*   令`r`为`k`-th 阶统计量
*   初始化两个空列表`bigger`和`equal`。
*   对于每个索引`i`：
    *   如果`array[i] > r`，添加`i`到`bigger`
    *   如果`array[i] = r`，添加`i`到`equal`
*   丢弃元素，`equal`直到两个列表的长度之和为`k`
*   返回两个列表的连接。

当然，如果所有项目都不同，您只需要一个列表。如果需要，您可以采取一些技巧将两个列表合并为一个，尽管这会使代码更加复杂。

# android - 倒数计时器不循环

> ID：14902879
> 
> 赞同：0
> 
> 时间：2013-02-15T20:32:32.863
> 
> 标签：android, countdown

基本上我正在做一个有氧运动功能，并且有三个倒数计时器连续嵌套在一起，所以当一个计时器完成时，下一个计时器开始。一种是准备时间，一种是锻炼时间，一种是休息时间，用户可以选择这些时间。

无论用户从数字选择器中选择多少次，我都需要它循环，但无论我做什么，它都只会遍历一次并且不会循环，所以我知道这一切都有效，只是循环部分不起作用。

我在这里错过了什么吗？有一个更好的方法吗？

```
 //Main countdown timers loop
    for(int i = 0; i <= times.getValue() + 1; i++) //times NumberPicker
    {
         prepCountTimer = new CountDownTimer(_finalPrep * 1000, 1000) {

             public void onTick(long millisUntilFinished) {

                 tvRoundCount.setText("Round " + roundCount + " / " + times.getValue());
                 tvCountDown.setText((millisUntilFinished / 1000) + "s");
                 if(millisUntilFinished <= (6 * 1000))
                 {
                     tvCountDown.setTextColor(Color.RED);
                 }
             }

             public void onFinish() {
                 workoutCountTimer = new CountDownTimer(_finalWorkout * 1000, 1000) {

                     public void onTick(long millisUntilFinished) {
                         tvCountDown.setTextColor(Color.GREEN);
                         tvCountDown.setText((millisUntilFinished / 1000) + "s");
                         if(millisUntilFinished <= 6 * 1000)
                         {
                             tvCountDown.setTextColor(Color.RED);
                         }
                     }

                     public void onFinish() {
                         restCountTimer = new CountDownTimer(_finalRest * 1000, 1000) {

                             public void onTick(long millisUntilFinished) {
                                 tvCountDown.setTextColor(Color.GREEN);
                                 tvCountDown.setText((millisUntilFinished / 1000) + "s");
                                 if(millisUntilFinished <= 6 * 1000)
                                 {
                                     tvCountDown.setTextColor(Color.RED);
                                 }
                             }

                             public void onFinish() {
                                 roundCount = roundCount + 1;
                             }
                          }.start();
                     }
                  }.start();
             }
          }.start();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:45:56.893

这里的问题是您`prepCountTimer`在完成等时创建和分配，然后启动它。然后它到达 for each 的末尾并再次循环创建另一个`preopCountTimer`并启动它。完成后，您需要`restCountTimer`开始下一个`preopCountTimer`。除非我在这里理解错误。

```
public void callingMethod() {
    timerMethod(times.getValue());
    // execution continues as your timer will run in a different thread
}

public void timerMethod(final int count) {
    if (count == 0) {
        // we have done the number of timers we want we can
        // call whatever we wanted to once our timers were done
    }
    //you could use count to get the times for each timer here
    startTimer(_finalPrep, new timerListner() {
        @Override
        public void timerFinish() {
            //when timer 1 finishes we will start timer 2
            startTimer(_finalWorkout, new timerListner() {
                @Override
                public void timerFinish() {
                    //when timer 2 finishes we will start timer 3
                    startTimer(_finalRest, new timerListner() {
                        @Override
                        public void timerFinish() {
                            //when timer 3 finishes we want to call the next timer in the list.
                            timerMethod(count - 1);
                        }
                    });
                }
            });
        }
    });
}

private interface timerListner {
    void timerFinish();
}

public void startTimer(int timerTime, final timerListner onFinish) {
    // you can pass in other parameters unqiue to each timer to this method aswell
    CountDownTimer timer = new CountDownTimer(timerTime * 1000, 1000) {
        public void onTick(long millisUntilFinished) {
            tvRoundCount.setText("Round " + roundCount + " / " + times.getValue());
            tvCountDown.setText((millisUntilFinished / 1000) + "s");
            if (millisUntilFinished <= (6 * 1000)) {
                tvCountDown.setTextColor(Color.RED);
            }
        }

        @Override
        public void onFinish() {
            onFinish.timerFinish();
        }
    };
    timer.start();

} 
```

# java - 为什么我的构建路径上的类出现“未定义符号”错误？

> ID：14902886
> 
> 赞同：0
> 
> 时间：2013-02-15T20:32:54.393
> 
> 标签：java, eclipse, build

我的构建路径上有一个带有第三方库的 Eclipse 项目。我正在尝试使用这个库中的一个类，eclipse 可以识别它（当我向下钻取时，我可以在 jar 文件的层次结构中看到），但是当我实际尝试构建项目时，我得到一个“未定义的符号”这种类型的错误。我在构建路径上使用其他库没有问题。关于什么可能是错的任何想法？

我们的项目是用 ANT 构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:48:41.150

这么小细节很难回答你的问题。以下是您构建的一些脆弱点：

1.  Ant 使用的 java 编译器版本与 Eclipse 不同。
2.  Ant 正在使用不同版本的库或根本不使用它。
3.  Ant 构建的类路径中依赖项的顺序与 Eclipse 中的不同。

更多细节将为您提供更好的答案。

还有一些现有的已回答问题需要考虑。它们主要涉及 Java 应用程序中使用的共享库（C++ 或其他）：

[未定义符号错误](https://stackoverflow.com/questions/4867719/undefined-symbol-error)

[刚开始 C++：编译时出现未定义符号错误](https://stackoverflow.com/questions/526660/just-started-c-undefined-symbol-error-on-compile)

[共享库编译，但有未定义的符号](https://stackoverflow.com/questions/4596271/shared-library-compiles-but-has-undefined-symbols)

# mysql - 我应该如何在 mySQL 表中存储用户“收藏夹”？

> ID：14902888
> 
> 赞同：7
> 
> 时间：2013-02-15T20:32:58.980
> 
> 标签：mysql, relational-database

我一直在阅读，我应该将其存储在一个单独的表中，“每行一个值”。这到底是什么意思？像这样 - 这样每个“收藏”都会获得另一个用户条目？

```
USER_ID     SKU_Favorited

001         10016
001         10067
024         10016
001         10010
024         16779 
```

必须两次输入同一个用户似乎是多余的，但这是我应该做的吗？然后在查找中我只是`SELECT`sku`WHERE`用户 id... 并找到该号码旁边的所有 SKU？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T20:36:28.400

它被称为第三范式的关系数据库

您有一张包含用户的桌子。

```
//users
id | username | password 
```

和最爱的桌子

```
//favorites
id | userid | Favorited 
```

在这里你如何得到它：

`select * from favorites inner join users on favorites.userid=users.id where users.id=1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:34:32.140

是的，这正是你要做的。我不会认为它是多余的。

# php - Wordpress，滑块中的最新帖子

> ID：14902894
> 
> 赞同：0
> 
> 时间：2013-02-15T20:33:31.773
> 
> 标签：php, javascript, html, css, wordpress

我为 Wordpress 编写了一小段代码，它将在滑块中显示最近的前 4 个帖子（Filament Group Responsive Carousel）。它可以工作，显示帖子并滑动它们等，但有 4 个滑块，每个滑块中有 4 个帖子。我一定是`WP_Query()`错误地定位了一些代码。这是我的代码：

```
<div class="carousel slider carousel-slide" data-transition="slide" data-autoplay="" data-interval="5000" data-paginate="true">
    <?php
        $topNews = new WP_Query();
        $topNews->query('showposts=4'); 
        while ($topNews->have_posts()) : $topNews->the_post(); ?>
            <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
                <header class="entry-header">
                    <?php if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
                        the_post_thumbnail('full');
                } ?>
                    <h1 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php echo esc_attr( sprintf( __( 'Permalink to %s', 'android_and_tea' ), the_title_attribute( 'echo=0' ) ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h1>
                </header>
            </div>
        <?php endwhile; ?>
</div> 
```

所以我的问题是，我需要重新定位/更改/添加/删除什么代码才能让它显示一个带有 4 个最新帖子的滑块，而不是 4 个带有 4 个最新帖子的滑块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:55:56.910

我的猜测是您将代码调用到循环中，例如：

```
if(have_posts()) while(have_posts()): the_post();

//HERE IS YOUR CODE

endwhile; 
```

您必须在此循环之前或之后移动您的代码或删除循环前：

```
//if(have_posts()) while(have_posts()): the_post();

//HERE IS YOUR CODE

//endwhile; 
```

或者

```
//HERE IS YOUR CODE
if(have_posts()) while(have_posts()): the_post();

endwhile; 
```

# android - Android ListView：从滚动标题更改为粘性

> ID：14902898
> 
> 赞同：2
> 
> 时间：2013-02-15T20:33:54.137
> 
> 标签：android, listview, scroll, sticky

如何在一个可以正常滚动的列表视图中创建一个标题，但是当你向下滚动太多以至于它会在顶部消失时，它会在顶部变成固定/粘性。

我已经用 addHeaderView 添加了标题，但我想如果你想实现我描述的内容，这是不可能的。

如何做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T20:39:03.390

有一个 3rd 方库，可以在这里做你想做的事

[https://github.com/emilsjolander/StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders)

执行此操作的能力不在 SDK 中

# python - 如何以简洁的方式创建以字母为键的字典？

> ID：14902904
> 
> 赞同：8
> 
> 时间：2013-02-15T20:34:17.680
> 
> 标签：python, dictionary

我创建了一个包含 26 个字母的字典，如下所示：

```
aDict={
    "a": 1,
    "b": 2,
    "c": 3,
    "d": 4,
    etc...
} 
```

我正在尝试使我的代码更好，我的问题是，有没有更短的方法可以在不输入所有这些数字的情况下做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T20:37:08.897

你可以[`string.ascii_lowercase`](https://docs.python.org/2/library/string.html#string.ascii_lowercase)在这里使用和听写理解。

```
In [4]: from string import ascii_lowercase as al 
```

对于 Python 2.7+：

```
In [5]: dic = {x:i for i, x in enumerate(al, 1)} 
```

对于 Python 2.6 或更早版本：

```
In [7]: dic = dict((y, x) for x, y in enumerate(al, 1)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T20:37:02.073

```
aDict = dict(zip('abcdefghijklmnopqrstuvwxyz', range(1, 27))) 
```

或者代替硬编码字母表：

```
import string
aDict = dict(zip(string.ascii_lowercase, range(1, 27))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T20:38:16.300

试试这个，它适用于 Python 2.6 及更早版本：

```
from string import ascii_lowercase
d = {}
for i, c in enumerate(ascii_lowercase, 1):
    d[c] = i 
```

如果您使用的是 Python 2.7 或更高版本，则可以使用[字典理解](https://stackoverflow.com/questions/7276511/are-there-dictionary-comprehensions-in-python-problem-with-function-returning)：

```
d = {c : i for i, c in enumerate(ascii_lowercase, 1)} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T20:41:44.703

您可以使用函数找到字符的 ascii 值，`ord()`反之则为`chr()`：

```
>>> ord('a')
97 
```

然后，您可以从 ascii 值创建字典，如下所示：

```
for i in range(97, 97+26):
    x[chr(i)] = i - 96 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T20:42:27.480

Python 2.7 及更高版本：

```
import string

letters = {k: v for v, k in enumerate(string.ascii_lowercase, 1)} 
```

Python 2.6 及以下版本：

```
import string

letters = dict((k, v) for v, k in enumerate(string.ascii_lowercase, 1)) 
```

# c++ - 在 C++ 中优化十六进制到 Ascii 函数

> ID：14902907
> 
> 赞同：1
> 
> 时间：2013-02-15T20:34:21.257
> 
> 标签：c++, function, hex, ascii

这是 c++ 中的一个函数，它接受一个 HEX 字符串并将其转换为等效的 ASCII 字符。

```
string HEX2STR (string str)
{
    string tmp;
    const char *c = str.c_str();
    unsigned int x;
    while(*c != 0) {
        sscanf(c, "%2X", &x);
        tmp += x;
        c += 2;
    }
    return tmp; 
```

如果输入以下字符串：

```
537461636b6f766572666c6f77206973207468652062657374212121 
```

输出将是：

```
Stackoverflow is the best!!! 
```

假设我要在这个函数中输入 1,000,000 个唯一的 HEX 字符串，计算需要一段时间。

有没有更有效的方法来完成这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T20:41:05.890

当然。一次查找两个字符：

```
unsigned char val(char c)
{
    if ('0' <= c && c <= '9') { return c      - '0'; }
    if ('a' <= c && c <= 'f') { return c + 10 - 'a'; }
    if ('A' <= c && c <= 'F') { return c + 10 - 'A'; }
    throw "Eeek";
}

std::string decode(std::string const & s)
{
    if (s.size() % 2) != 0) { throw "Eeek"; }

    std::string result;
    result.reserve(s.size() / 2);

    for (std::size_t i = 0; i < s.size() / 2; ++i)
    {
        unsigned char n = val(s[2 * i]) * 16 + val(s[2 * i + 1]);
        result += n;
    }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T21:09:46.700

就因为我还是写了它，这应该是相当有效的:)

```
const char lookup[32] =
     {0,10,11,12,13,14,15,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,0,0,0,0,0,0};

std::string HEX2STR(std::string str)
{
  std::string out;
  out.reserve(str.size()/2);

  const char* tmp = str.c_str();

  unsigned char ch, last = 1;
  while(*tmp)
  {
    ch <<= 4;
    ch |= lookup[*tmp&0x1f];
    if(last ^= 1) 
      out += ch;
    tmp++;
  }
  return out;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:38:35.813

不要使用 sscanf。这是一个非常通用的灵活功能，这意味着它允许所有这些用例的速度很慢。取而代之的是，自己遍历字符串并转换每个字符，速度要快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T17:13:30.087

该例程采用（我称之为）十六进制字的字符串，通常用于嵌入式 ECU，例如“31 01 7F 33 38 33 37 30 35 31 30 30 20 20 49”，并尽可能将其转换为可读的 ASCII。通过处理 ASCII 表中的不连续性进行转换 (0-9: 48-57, AF:65 - 70)；

```
 int i,j, len=strlen(stringWithHexWords);
    char ascii_buffer[250];
    char c1, c2, r;

    i=0;
    j=0;

    while (i<len) {

        c1 = stringWithHexWords[i];
        c2 = stringWithHexWords[i+1];

        if ((int)c1!=32) {  // if space found, skip next section and bump index only once                                       
        // skip scary ASCII codes                                       
           if (32<(int)c1 && 127>(int)c1 && 32<(int)c2 && 127>(int)c2)  { 
//

           // transform by taking first hexdigit * 16 and add second hexdigit
           // both with correct offset

            r = (char) ((16*(int)c1+((int)c2<64?((int)c2-48):((int)c2-55)))); 

            if (31<(int)r && 127>(int)r) 
                      ascii_buffer[j++] = r;   // check result for readability      
           }
          i++;  // bump index 
     }   

    i++;  // bump index once more for next hexdigit
}

ascii_bufferCurrentLength = j;
return true; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T22:54:26.027

hexToString() 函数将十六进制字符串转换为 ASCII 可读字符串

```
string hexToString(string str){
    std::stringstream HexString;
    for(int i=0;i<str.length();i++){
        char a = str.at(i++);
        char b = str.at(i);
        int x = hexCharToInt(a);
        int y = hexCharToInt(b);
        HexString << (char)((16*x)+y);
    }
    return HexString.str();
}

int hexCharToInt(char a){
    if(a>='0' && a<='9')
        return(a-48);
    else if(a>='A' && a<='Z')
        return(a-55);
    else
        return(a-87);
} 
```

# sql-server - SSRS 2005 查找具有最大值的列的名称

> ID：14902909
> 
> 赞同：1
> 
> 时间：2013-02-15T20:34:30.350
> 
> 标签：sql-server, sql-server-2005, reporting-services, reportingservices-2005, unpivot

最右边的列是我要添加到报告中的内容。是否可以在不修改查询以使用 Unpivot 之类的东西的情况下做到这一点？

```
Step X      Step W      Step A     Step B     Step Y     Last Step
---------------------------------------------------------------------
1/21/2013   1/24/2013   1/3/2013   1/5/2013   1/7/2013   Step W 
```

这是朝着正确方向迈出的一步，但它似乎只适用于 SSRS 2008： http: [//www.bigator.com/2012/04/26/spothighlight-minimum-and-maximum-values-in-each-row -in-matrix-report-in-ssrs/](http://www.bigator.com/2012/04/26/spothighlight-minimum-and-maximum-values-in-each-row-in-matrix-report-in-ssrs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:42:33.407

您可以使用`UNPIVOT`函数和 a`CROSS APPLY`来获得：

```
;with cte as
(
  select col, value
  from yourtable
  unpivot
  (
    value
    for col in ([Step X], [Step W], [Step A], [Step B], [Step Y])
  ) unpiv
) 
select [Step X], 
  [Step W], 
  [Step A], 
  [Step B], 
  [Step Y],
  d.col LastStep
from yourtable
cross apply
(
  select c1.col
  from cte c1
  inner join
  (
    select max(value) MaxDate
    from cte
  ) c2
    on c1.value = c2.maxdate
) d 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/1a189/10)

# fastcgi - 我可以像 register_shutdown_function 一样使用 fastcgi_finish_request() 吗？

> ID：14902917
> 
> 赞同：4
> 
> 时间：2013-02-15T20:34:56.870
> 
> 标签：fastcgi, php

这种缓存动态内容的简单方法用于`register_shutdown_function()`在退出脚本后将输出缓冲区推送到磁盘上的文件。但是，我使用的是**PHP-FPM**，这不起作用；添加到函数中的 5 秒睡眠确实会导致从浏览器执行脚本时延迟 5 秒。PHP 文档中的评论者指出，PHP-FPM 用户有一个特殊功能，即`fastcgi_finish_request()`. 但是，没有太多关于这个特定功能的文档。

的重点`fastcgi_finish_request()`似乎是刷新所有数据并继续执行其他任务，但我想要实现的，通常会使用`register_shutdown_function()`，基本上是将输出缓冲区的内容放入文件中，而无需用户等待完成。

有没有办法在 PHP-FPM 下使用`fastcgi_finish_request()`或其他功能来实现这一点？

```
$timeout = 3600; // cache time-out
$file = '/home/example.com/public_html/cache/' . md5($_SERVER['REQUEST_URI']); // unique id for this page
if (file_exists($file) && (filemtime($file) + $timeout) > time()) {
  readfile($file);
  exit();
} else {
  ob_start();
  register_shutdown_function(function () use ($file) {
    // sleep(5);
    $content = ob_get_flush();
    file_put_contents($file, $content);
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T10:33:07.070

是的，可以使用`fastcgi_finish_request`它。您可以保存此文件并查看它是否有效：

```
<?php

$timeout = 3600; // cache time-out
$file = '/home/galymzhan/www/ps/' . md5($_SERVER['REQUEST_URI']); // unique id for this page
if (file_exists($file) && (filemtime($file) + $timeout) > time()) {
  echo "Got this from cache<br>";
  readfile($file);
  exit();
} else {
  ob_start();
  echo "Content to be cached<br>";

  $content = ob_get_flush();
  fastcgi_finish_request();
  // sleep(5);

  file_put_contents($file, $content);
} 
```

即使您取消注释该行`sleep(5)`，您仍会看到该页面仍会立即打开，因为`fastcgi_finish_request`将数据发送回浏览器，然后继续执行其后编写的任何代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T23:08:31.187

**首先**，如果你用这种方式缓存动态内容，你就错了。当然，它可以以这种方式使用并且能够工作，但它完全被这种方法本身所瘫痪。

如果您想有效地缓存和处理内容，请创建一个类并将所有缓存功能包装到其中。

是的，您可以`fast_cgi_finish_request()`像`register_shutdown()`. 唯一的区别是，`fast_cgi_finish_request()`将发送输出（如果有）并且**不会终止**`register_shutdown()`脚本，而在脚本终止时将调用回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T14:01:59.617

这是一个老问题，但我认为任何答案都不能正确回答这个问题。

据我了解，问题是在关闭函数期间发生 ob_get_flush() 调用之前，没有任何输出被发送到客户端。

要解决该问题，您需要将函数和块大小传递给 ob_start() 以便以块的形式处理输出。

你的 else 子句是这样的：

```
$content = '';

$write_buffer_func = function($buffer, $phase) use ($file, &$content) {
  $content .= $buffer;
  if ($phase & PHP_OUTPUT_HANDLER_FINAL) {
    file_put_contents($file, $content);
  }
  return $buffer;
};

ob_start($write_buffer_func, 1024); 
```

# eclipse - 为什么 eclipse CDT 提取函数功能要重新格式化我的 .cc 文件中不相关的代码？

> ID：14902919
> 
> 赞同：2
> 
> 时间：2013-02-15T20:34:59.673
> 
> 标签：eclipse, eclipse-cdt

我有一些 C++ 代码，其中包含 5 行左右的代码，我想将它们重构为一个函数。当我右键单击->重构->提取函数时，重构会正确生成函数，但它也坚持重新格式化与我正在重构的代码无关的大量代码。此外，重新格式化的代码和生成的函数都不符合我目前的风格（我修改过的 K&R）。

为什么这样做？

有没有办法让它遵循我的代码风格？

有没有办法关掉它？

# signalr - 如何在信号器集线器客户端上获得超时回调？

> ID：14902922
> 
> 赞同：0
> 
> 时间：2013-02-15T20:35:09.377
> 
> 标签：signalr, signalr-hub

我想处理集线器调用的超时回调以保证服务器收到我的“消息”，我该怎么做？

我查看了signalR wiki，用谷歌搜索但一无所获！

这就是我认为界面的方式：

```
 var hubcon = new HubConnection("myurl", useDefaultUrl: false);
   IHubProxy chatHub = hubcon.CreateHubProxy("chatHub");
   chatHub.On("timeout", data =>
                {
                    //do something
                });

   hubcon.Start().Wait(1000);

   chatHub.Invoke("EnviarMensagem", new { nome = nome, mensagem = mensagem }).Wait();

   hubcon.Stop(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T22:09:03.767

由于您仍然在调用`Wait`，您可以设置超时并查看返回值以查看服务器是否完成了对您的调用的处理：

```
 if (!chatHub.Invoke("EnviarMensagem", ...).Wait(10000))
   {
       // The server did not respond to the invocation within 10 seconds
   } 
```

[http://msdn.microsoft.com/en-us/library/dd270644.aspx](http://msdn.microsoft.com/en-us/library/dd270644.aspx)

# node.js - 无法发布表单 node.js - 表达

> ID：14902923
> 
> 赞同：25
> 
> 时间：2013-02-15T20:35:40.060
> 
> 标签：node.js, express

使用 express 3.1.0 我有一个超级简单的形式：

```
<form action="/signup" method="post">
    <div>
        <label>Username:</label>
        <input type="text" name="username"/><br/>
    </div>
    <div>
        <label>Password:</label>
        <input type="password" name="password"/>
    </div>
    <div><input type="submit" value="Sign Up"/></div>
</form> 
```

在 app.js 中：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , fs = require('fs')
  , User = require('./models/User.js')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/form', function(req, res) {
    fs.readFile('./form.html', function(error, content) {
        if (error) {
            res.writeHead(500);
            res.end();
        }
        else {
            res.writeHead(200, { 'Content-Type': 'text/html' });
            res.end(content, 'utf-8');
        }
    });
});

app.post('/signup', function(req, res) {

    var username = req.body.username;
    var password = req.body.password;
    User.addUser(username, password, function(err, user) {
        if (err) throw err;
        res.redirect('/form');
    });
});

app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

尝试发布此表格时，我得到：

```
Cannot POST /signup 
```

在控制台中：

```
"NetworkError: 404 Not Found - http://localhost:3000/signup" 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T20:55:06.483

你的例子对我有用。我删除了对用户、用户和路由的引用，以便我可以运行它并在控制台中正确接收和显示 HTTP POST。

```
app.post('/signup', function(req, res) {
    var username = req.body.username;
    var password = req.body.password;
    console.log("post received: %s %s", username, password);
}); 
```

我怀疑错误出在您的 User.addUser() 代码中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-05T11:20:58.953

```
router.route('/signup')

    // (accessed at POST http://localhost:3000/api/signup)
    .post(function(req, res) {
        var username = req.body.username;
        var password = req.body.password;
        res.json(
            { 
               message: 'signup success',
                username : username,
                 password : password,
            }
        );
    })
    .get(function(req,res){
        res.json({message: 'get request from signup'});
});

// REGISTER OUR ROUTES -------------------------------
// all of our routes will be prefixed with /api
app.use('/api', router); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-12-09T08:25:48.257

你可以这样写：

```
action="http://localhost:3000/sin" 
```

# wpf - 绑定到 ViewModel 中最初为 NULL 的属性不会重新绑定

> ID：14902924
> 
> 赞同：0
> 
> 时间：2013-02-15T20:35:46.637
> 
> 标签：wpf, xaml, binding

我有一个包含 Telerik RadDataForm 的 UserControl。表单的 ItemsSource 绑定到 UserControl 的 ViewModel 上的一个属性：

```
<telerik:RadDataForm
    ItemsSource="{Binding Path=viewModel.items, RelativeSource={RelativeSource AncesterType=local:MyUserControl}}"
    /> 
```

viewModel 在哪里：

```
public partial class MyUserControl: UserControl
{
    public MyUserControlVM viewModel
    { get { return this.DataContext as MyUserControlVM; } }
} 
```

在视图模型中，items 是一个相当普通的集合：

```
public class MyUserControlVM : MyViewModelBase
{
    private ObservableCollection<AnItem> items_;
    public ObservableCollection<AnItem> items
    {
        get { return this.items_; }
        set
        {
            this.items_ = value;
            notifyPropertyChanged("items");
        }
    }

    ...
} 
```

当然，MyViewModelBase 在哪里实现了 INotifyPropertyChanged。

用户控件有一个项目依赖属性，当它被设置时，它会在视图模型上设置匹配属性：

```
public partial class MyUserControl : UserControl
{
    public ObservableCollection<AnItem> items
    {
        get { return GetValue itemsProperty as ObservableCollection<AnItem>; }
        set { SetValue(itemsProperty, value); }
    }
    public static readonly DependencyProperty itemsProperty =
        DependencyProperty.Register("items",
        typeof(ObservableCollection<AnItem>), 
        typeof(MyUserControl), new PropertyMetadata(
                    new PropertyChangedCallback(itemsPropertyChanged)));
    private static void itemsPropertyChanged(DependencyObject d,
            DependencyPropertyChangedEventArgs e)
    {
        MyUserControl myUserControl = d as MyUserControl;
        ObservableCollection<AnItem> items = 
            e.NewValue as ObservableCollection<AnItem>;
        if (myUserControl != null && myUserControl.viewModel != null)
            myUserControl.viewModel.items = items;
    }
} 
```

所有这些看起来都很简单，如果有点乏味的话。

问题是 MyUserControl 上的 items 依赖属性绑定到另一个集合的当前项的属性，并且当前项最初为 null，因此当最初加载 MyUserControl 时，其 items 属性为 null。因此，RadDataForm 绑定到的 MyUserControlVM 上的 items 属性也是如此。

稍后，当该外部集合中的项目变为最新时，将设置 MyUserControl 上的项目依赖属性，并设置 MyUserControlVM 上的项目属性。MyUserControlVM 调用 notifyPropertyChanged 以便将更改通知侦听器。但这最后一个不起作用。

之后，如果我检查 RadDataForm，它的 ItemsSource 属性仍然为空。

就像 RadDataForm 没有监听 propertychanged 事件，因为它最初绑定的是 null。在绑定属性在开始时不为空的类似情况下，当当前项目从一个项目更改为另一个项目时，此模式可以正常工作，但从没有当前项目到有一个项目似乎不起作用。

那么，关于如何进行这项工作的任何想法？在这种情况下，我不能让项目在表单加载时始终具有值 - 一开始它总是为空。当属性变为非空时，如何让 RadDataForm 注意到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T22:22:29.623

当我想在我的根目录引用某些东西`UserControl`（例如，自定义属性，或者在你的情况下，`DataContext`），我通常给我的 UserControl 一个`Name`. 然后我将此名称与 ElementName 属性一起使用`Binding`来设置它。

```
<UserControl
    ...
    Name="TheControl">

    <Grid>
        <TextBlock Text={Binding Path=DataContext.items, ElementName=TheControl}" />
    </Grid>
</UserControl> 
```

由于该`viewModel`属性，您可以使用它并且`DataContext`可以互换使用。

*但是*，在您的情况下，它实际上可能更简单。首先，您的代码中有一个错字。它应该是`AncestorType`（带有'o'）。其次，您可能只想尝试设置绑定，`{Binding Path=items}`因为我相信您的控件已经继承了正确的`DataContext`. （不过，不确定最后一个。）

如果问题仍然存在，并且您怀疑它实际上与最初`items`返回的属性有关，您始终可以使用空集合`null`初始化以避免.`items_``null`

```
private ObservableCollection<AnItem> items_ = new ObservableCollection<AnItem>(); 
```

# css - 垂直对齐基线和边距

> ID：14902925
> 
> 赞同：0
> 
> 时间：2013-02-15T20:35:47.113
> 
> 标签：css, vertical-alignment

所以我有一些看起来像这样的 HTML/CSS：http: [//jsfiddle.net/nw2Ym/1/](http://jsfiddle.net/nw2Ym/1/)

CSS：

```
.heading {
    font-size: 24px;
}

.badge {
    font-size: 10px;
    padding: 3px 10px;
    background: gray;
    color: #fff;
    vertical-align: baseline;
    margin-bottom: 3px;
    display: inline-block;

} 
```

HTML：

```
<div>
    <span class="heading">Testing Stuff</span>
    <span class="badge">OMG!</span>
</div>

Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, Other Text, 
```

我想要的是将徽章的底部与其旁边的文本底部对齐。相反，文本的底部与徽章中文本的底部对齐会发生什么。

那时我想我会把徽章向上推，增加它的填充大小，所以我添加了一个边距。它最终不是将标签向上推，而是将其下的东西向下推。为什么会这样？另外，如何对齐徽章以使底部（填充后）与文本对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:51:26.040

我想你正在寻找

```
vertical-align: text-bottom; 
```

[这是一个小提琴](http://jsfiddle.net/jcurran/D24Ty/)

# java - 为什么这些 Tomcat 服务器的 JVM 每小时执行一次 full GC？

> ID：14902928
> 
> 赞同：29
> 
> 时间：2013-02-15T20:36:13.273
> 
> 标签：java, tomcat, garbage-collection, jvm

我们运行许多 Tomcat 服务器并观察到完整的垃圾回收 (GC) 通常每小时执行一次，尤其是在内存使用率相对较低的情况下。准确的时间似乎与应用服务器启动的时间有关；如果服务器在 01:13 启动，则在 02:13 完成一次完整 GC，下一次完整 GC 将在 03:13 发生。我找不到任何文档来解释这种行为。

这是一个问题，因为同时启动的服务器池都倾向于在同一时间进行完整的 GC。如果 GC 延迟足够长，导致负载均衡器将服务器标记为关闭，则整个应用程序可能会离线一段时间。如果完整的 GC 可以分布在一段时间内会更好，这样就没有两台服务器同时进行完整的 GC，但我找不到任何方法来控制这种行为。

有没有其他人看到过这种行为？有什么方法可以影响这些“常规”完整 GC 何时发生？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T20:42:17.470

您的“常规”每小时 GC 可能是由于[这个已知的错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=53267)，“**当 gcDaemonProtection=true 时，JreMemoryLeakPreventionListener 每小时会导致一次完整的 GC** ”。

确认您的 Tomcat 版本和您的`gcDaemonProtection`属性的值`JreMemoryLeakPreventionListener`（默认为`true`）。

该补丁据称包含在 Tomcat v.7.0.28+ 和 v.6.0.36+ 中。

升级您的服务器，或从[此处](http://mail-archives.apache.org/mod_mbox/tomcat-users/201008.mbox/%3CAANLkTino=BjP5LsBCwncB2HvNDzyKLr5y-8yWdt15a89@mail.gmail.com%3E)选择非升级解决方案，总结如下：

1.  使用 JVM arg 抑制完整的垃圾回收`-XX:+DisableExplicitGC`
2.  保留完整的 GC，但使用 JVM arg 服从 CMS 收集器 `-XX:+ExplicitGCInvokesConcurrent`
3.  放`<Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" gcDaemonProtection="false"/>`
4.  禁用监听器

信用到期的信用；我从[这里](https://stackoverflow.com/questions/8916002/tomcat-garbage-collecting-frequency/14601304#14601304)得到了我的初步答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T20:48:15.300

你应该能够改变间隔

```
-Dsun.rmi.dgc.client.gcInterval=60000
-Dsun.rmi.dgc.server.gcInterval=60000 
```

看看这里 [https://docs.oracle.com/cd/E19199-01/817-2180-10/pt_chap5.html](https://docs.oracle.com/cd/E19199-01/817-2180-10/pt_chap5.html)

# ruby-on-rails - 在 js.erb 中使用本地人渲染不起作用

> ID：14902930
> 
> 赞同：0
> 
> 时间：2013-02-15T20:36:24.020
> 
> 标签：ruby-on-rails, ruby, partial-views, erb

为什么渲染从文件`:locals`调用时为什么不起作用？`js.erb`

这是我的`create.js.erb`：

```
$("#div").before("<%= escape_javascript(render("/admin/products/variant_image_preview", :locals => {:image => @variant_image})) %>"); 
```

`variant_image_preview.html.erb`：

```
<div id="variant_image_<%= image.id %>">

  <%= image_tag image.image_url(:thumb), width: 114, height: 88 %>
  <% form_name = "product[variants_attributes][1][images_attributes][#{Time.now.to_f}]" %>

  <input type="hidden" value="<%= image.id %>" name="<%= form_name %>[id]">

  <a id="<%= image.id %>" class="remove_image" title="Remover imagem">
    <img src="/assets/bg_close.png" alt="Remover imagem">
  </a>
</div> 
```

在variant_image_preview.html.erb 的第一行我得到这个错误：

```
NameError - undefined local variable or method `image' for #<#<Class:0x0000000f4f6e88>:0x000000101332c8>: 
```

StackOverflow 上的一些帖子说这段代码应该可以工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:47:02.347

在您使用的语法中，locals 应该作为第二个参数传递，如下所示：

```
render("/admin/products/variant_image_preview", :image => @variant_image) 
```

您可以用更具声明性的调用替换此语法：

```
render(partial: "/admin/products/variant_image_preview", :locals => {:image => @variant_image}) 
```

# android - 当文件名在 Android 中不包含 mime 类型扩展时，如何确定音频文件的格式？

> ID：14902934
> 
> 赞同：1
> 
> 时间：2013-02-15T20:36:36.167
> 
> 标签：android, android-mediaplayer, android-audiorecord, android-mediascanner

我有一个无扩展名的文件，为了这篇文章而命名`MyAudioFile`，我知道这个音频文件的扩展名是`aac`格式（我已经用一个名为 的程序对其进行了分析[`GSpot`](http://gspot.software.informer.com/)），但是由于该文件没有任何扩展名，我无法使用 Android 中可用的任何方法来确定`MIME`该文件的类型。

是否有任何`Android`我不知道的内置实用程序方法，它可以让我读取音频文件的标题信息并吐出文件的扩展名或`MIME`类型？

我已经尝试过`MediaMetaDataRetriever`但`MimeTypeMap`没有成功，我是否错过了可以在这里使用的任何其他课程？

`SOX`是否可以使用除and之外的任何其他外部库`FFMPeg`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:39:53.760

为什么不能手动添加扩展名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:01:02.190

我不确定我是否理解这里的问题。`MediaMetaDataRetriever` **是**用于确定任意媒体文件的元数据（包括 MIME 类型）的类。你可能用错了吗？

```
MediaMetaDataRetriever retriever = new MediaMetaDataRetriever();
retriever.setDataSource("file:///sdcard/fileThatIsAACButDoesntHaveExtension");
String mimeType = retriever.extractMetadata(MediaMetaDataRetriever.METADATA_KEY_MIMETYPE); 
```

您究竟是如何尝试使用此文件的？你不应该需要它的 MIME 类型来使用它（你承认你已经*知道*它的 MIME 类型 - `audio/mp4`）

# php - 如何使用 for 循环将索引数组保存到会话中？

> ID：14902937
> 
> 赞同：2
> 
> 时间：2013-02-15T20:36:57.053
> 
> 标签：php

这是基本的东西，但我似乎太初学者了，无法让它发挥作用。在这里，我想以某种方式将我的 100 个阵列放入不同的会话中，但是这样的事情似乎不起作用，我想知道为什么？

```
for($i=1; $i<=100; $i++) {
    $age = rand(1,100);
    $table[] = $age;
    $_SESSION[$i] = $table[];
    } 
```

稍后我需要能够回显使用 for 循环打印的所有 100 个会话的 $age。如果我再次喜欢那里，它只会说未定义的覆盖并给出所有 100 个 $i 的数量。

```
for($i=1; $i<=100; $i++) {
    echo $_SESSION[$i];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:44:31.653

```
for($i=1; $i<=100; $i++) {
    $age = rand(1,100);
    $ages[] = $age;
}

$_SESSION['ages'] = $ages; 
```

在您的其他脚本中

```
$ages = $_SESSION['ages'];
foreach($ages as $age) {
    echo $age;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T20:49:04.287

您不能`$_SESSION`像使用普通数组一样使用它，但事实并非如此。使用时不能使用数字索引`$_SESSION`。下面的代码完全无效，会引起通知，并可能导致您`$_SESSION`未按预期填充

```
// bad code!

$_SESSION[1] = 'foo'; // error
$_SESSION[] = 'bar'; // error
for ($i = 1; $i <= 100; $i++) {
    $_SESSION[$i] = rand(1, 100); // error 100x
} 
```

就像 Bram Gerritsen 在他的回答中建议的那样，我会将代码更改为：

```
for($i=1; $i<=100; $i++) {
    $age = rand(1,100);
    $ages[] = $age;
}

$_SESSION['ages'] = $ages; 
```

* * *

有关更多信息[，请查看此 PHP 错误报告](https://bugs.php.net/bug.php?id=42472)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:47:29.490

你可以这样做：

```
for($i=1; $i<=100; $i++) {
    $age = rand(1,100);
    $table[] = $_SESSION["ages"][$i] = $age;
} 
```

# windows - 在 NASM 中导入不起作用？

> ID：14902941
> 
> 赞同：2
> 
> 时间：2013-02-15T20:37:15.980
> 
> 标签：windows, import, nasm

我正在尝试在 Windows 7（使用 NASM）上编译以下代码：

```
[BITS 32]

extern ExitProcess
import ExitProcess kernel32.dll
extern MessageBoxA
import MessageBoxA user32.dll

segment .data use32
Caption db 'Caption Text',0
Text db "My MessageBox Text.",0

segment .code use32
..start:
push dword 0
push dword Caption
push dword Text
push dword 0
call [MessageBoxA]

push dword 0
call [ExitProcess] 
```

为了编译这个，我试过`nasm -o test.o test.asm`了，但它说：

```
test.asm:4: error: parser: instruction expected
test.asm:6: error: symbol `import' redefined
test.asm:6: error: parser: instruction expected 
```

为什么它不起作用？

编辑：好的。简单的错误...`nasm -o test.o -f obj test.asm`有效...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:53:59.720

似乎是一个已知问题。[http://cboard.cprogramming.com/windows-programming/114989-nasm-import-directive-failing-expected-instruction-error.html](http://cboard.cprogramming.com/windows-programming/114989-nasm-import-directive-failing-expected-instruction-error.html)中建议的分辨率

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-20T13:16:03.730

您不必使用 Obj。这适用于 DOS 而不是 Windows。是的，您可以在 ASM 代码中使用大量编译器指令来使其在 Windows 中工作，但是如果您使用 Win32 类型进行编译，您最终会得到专门在 Windows 中工作的代码。不幸的是，编写 NASM 的人以这样的方式编写它，即 import 在 Win32 模式下不起作用（即使它应该，因为 import 是非常标准的，并且在 Windows 中工作是必需的操作）。更不幸的是，编写 NASM 的人似乎已经停止添加/改进/升级程序，并且基本上已经放弃了该项目。并且社区无法自行修复此错误（NASM 的源代码不公开），这给我们留下了一个非常有缺陷的产品！

# sql - 如何在不使用工具的情况下仅根据数据为数据库创建 ER 图？

> ID：14902942
> 
> 赞同：1
> 
> 时间：2013-02-15T20:37:20.977
> 
> 标签：sql, sql-server, entity-relationship

我有一个包含 35 个表的 sql 数据库，我必须创建一个映射表之间关系的 ER 图。每个表都有一个标识键值 (hmy)。我一直在寻找具有指向另一个表的键的表。例如，一个表可能有一个名为 hinspection 的键，然后有一个名为 Inspections 的表与之相关。然后我执行一个连接语句：

```
select hinspection.hmy, hothertable.hinspection, hothertable.hmy from hinspection
inner join hothertable on hinspection.hmy=hothertable.hinspection 
```

然后可以看到一个表的每个实例有多少映射到另一个表的每个实例有多少（例如：hinspection hmy 记录的每个实例都有三个不同的 othertable hmy 记录）。这有助于我创建一些一对多或一对一的关系，但我知道有些关系无法以这种方式确定。在不使用工具的情况下，我还可以使用哪些其他方法来找出关系。

编辑：我正在使用 microsoft sql server management studio 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T01:34:24.393

此查询将为您提供 SQL Server 2008 数据库中的外键列表。此查询需要`VIEW DEFINITION`您的数据库的权限。

```
SELECT 
     OBJECT_NAME(referenced_object_id)                      AS Parent_Table
    ,OBJECT_NAME(parent_object_id)                          AS Child_Table
    ,COL_NAME(referenced_object_id,referenced_column_id)    AS Parent_Column
    ,COL_NAME(parent_object_id,parent_column_id)            AS Child_Column
    ,OBJECT_NAME(constraint_object_id)                      AS FK_Name
FROM sys.foreign_key_columns
ORDER BY Parent_Table, Child_Table 
```

# jquery - jQuery从字符串中获取图片链接

> ID：14902943
> 
> 赞同：1
> 
> 时间：2013-02-15T20:37:23.333
> 
> 标签：jquery

嘿，我正在尝试从包含一些 HTML 的字符串中获取 png 链接。

字符串如下所示：

```
var thecode = '[caption id="attachment_1794" align="alignleft" width="210"]
  <a href="http://www.website.com/wp-content/uploads/2012/10/Screen-Shot-2012-10-30-at-
  8.52.48-AM.png"><img class="size-medium wp-image-1794" title="Difference between and 
  affiliate programs" src="http://www.website.com/wp-content/uploads/2012/10/Screen-
  Shot-2012-10-30-at-8.52.48-AM-210x300.png" alt="Learn the and affiliate programs" 
  width="210" height="300" /></a> Learn the and affiliate programs[/caption]<p><span 
  style="font-size: small;">An article by CEO of AD, Inc. (AD®), has been published by 
  <a title="Learn the and affiliate programs" href="http://www.mmag.com/articles/85281" 
  target="_blank">M Magazine</a>. The article is titled: "Putting The Right Place." </span>'; 
```

我一直在尝试通过 jQuery 代码获取图像链接：

```
var newString = $('a[href$=".png"]', thecode).attr('href');
console.log(newString); 
```

但是上面的示例返回**SCRIPT5022: Syntax error, unrecognized expression：**

我会错过什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T20:48:00.977

尝试这个：

```
var thecode = '[caption id="attachment_1794" align="alignleft" width="210"] <a href="http://www.website.com/wp-content/uploads/2012/10/Screen-Shot-2012-10-30-at-8.52.48-AM.png"><img class="size-medium wp-image-1794" title="Difference between and affiliate programs" src="http://www.website.com/wp-content/uploads/2012/10/Screen-Shot-2012-10-30-at-8.52.48-AM-210x300.png" alt="Learn the and affiliate programs" width="210" height="300" /></a> Learn the and affiliate programs[/caption]<p><span style="font-size: small;">An article by CEO of AD, Inc. (AD®), has been published by <a title="Learn the and affiliate programs" href="http://www.mmag.com/articles/85281" target="_blank">M Magazine</a>. The article is titled: "Putting The Right Place." </span>';

var newString = $('<div>'+ thecode + '</div>');
console.log($('a[href$=".png"]',newString).attr('href')); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/3pkUt/)**

# apdu - 生成 ARQC 时 EMV 长度错误 - CDOL1

> ID：14902945
> 
> 赞同：1
> 
> 时间：2013-02-15T20:37:38.313
> 
> 标签：apdu, emv

我正在使用 VISA 信用卡、借记卡和 MC 信用卡成功生成 ARQC，但是当我尝试使用 MC Debit 生成一个时，我得到“6700”命令，这意味着“长度错误”，这是我的 CDOL 和我的命令：

所有数据对象长度的 CDOL1 总和预计为 35 个字节（十六进制 23）

CDOL1 9f02069f03069f1a0295055f2a029a039c019f37049f35019f45029f3403

命令 80AE80002300000000000000000000000004848000008000048413021300550320312100001e0300

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T17:37:58.890

您没有在 CDOL1 中包含 9F4C（ICC 动态编号）。您必须包含此标签，这是在第一次生成 AC 时计算 ICC 动态数据的必要条件。

# video - 使用 -VF 将 jpg 叠加到 Mp4 上

> ID：14902947
> 
> 赞同：1
> 
> 时间：2013-02-15T20:37:46.303
> 
> 标签：video, ffmpeg

我正在使用以下命令覆盖 jpg：

ffmpeg -i in.mp4 -vf "movie=bb.png [movie]; [in] [movie] overlay=0:0 [out]" -vcodec libx264 -acodec copy out.mp4

这适用于第一个文件（如下所列），但它不适用于第二个文件。当我尝试使用第二个文件时没有错误，而是创建了一个无法打开的异常大文件：

文件 1：

```
[me@me ~]$ ffmpeg -i 2013-02-08.mp4 
ffmpeg version 1.0.git Copyright (c) 2000-2012 the FFmpeg developers
  built on Jan 11 2013 00:12:08 with gcc 4.7.2 (GCC) 20120921 (Red Hat 4.7.2-2)
  configuration: 
  libavutil      52\.  8.100 / 52\.  8.100
  libavcodec     54\. 74.100 / 54\. 74.100
  libavformat    54\. 37.100 / 54\. 37.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 23.101 /  3\. 23.101
  libswscale      2\.  1.102 /  2\.  1.102
  libswresample   0\. 17.101 /  0\. 17.101
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '2013-02-08.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2avc1mp41
    creation_time   : 2013-02-08 20:31:49
    encoder         : Lavf53.24.0
  Duration: 00:00:03.20, start: 0.000000, bitrate: 1030 kb/s
    Stream #0:0(eng): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 720x576 [SAR 1:1 DAR 5:4], 1247 kb/s, 8.08 fps, 7.50 tbr, 15 tbn, 15 tbc
    Metadata:
      creation_time   : 2013-02-08 20:31:49
      handler_name    : VideoHandler
    Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 8000 Hz, mono, s16, 12 kb/s
    Metadata:
      creation_time   : 2013-02-08 20:31:49
      handler_name    : SoundHandler
At least one output file must be specified 
```

文件 2

```
[me@me ~]$ ffmpeg -i aq.mp4 
ffmpeg version 1.0.git Copyright (c) 2000-2012 the FFmpeg developers
  built on Jan 11 2013 00:12:08 with gcc 4.7.2 (GCC) 20120921 (Red Hat 4.7.2-2)
  configuration: 
  libavutil      52\.  8.100 / 52\.  8.100
  libavcodec     54\. 74.100 / 54\. 74.100
  libavformat    54\. 37.100 / 54\. 37.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 23.101 /  3\. 23.101
  libswscale      2\.  1.102 /  2\.  1.102
  libswresample   0\. 17.101 /  0\. 17.101
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'aq.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2avc1mp41
    creation_time   : 2013-02-19 20:33:16
    encoder         : Lavf53.24.0
  Duration: 00:00:03.20, start: 0.000000, bitrate: 1394 kb/s
    Stream #0:0(eng): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 720x576 [SAR 1:1 DAR 5:4], 1451 kb/s, 30 fps, 30 tbr, 30 tbn, 60 tbc
    Metadata:
      creation_time   : 2013-02-19 20:33:16
      handler_name    : VideoHandler
    Stream #0:1(eng): Audio: aac (mp4a / 0x6134706D), 8000 Hz, mono, s16, 12 kb/s
    Metadata:
      creation_time   : 2013-02-19 20:33:16
      handler_name    : SoundHandler
At least one output file must be specified 
```

万一很重要，我将使用 Android 设备捕获这些视频。第一个 mp4 文件是由 Nexus 7 创建的，第二个（不会覆盖图像的文件）是使用 HTC Desire 创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:03:39.567

也许是一个不同的命令先生

```
ffmpeg -i in.mp4 -i bb.png -filter_complex overlay -c:a copy out.mp4 
```

[**参考**](https://stackoverflow.com/q/14676517/overlaying-multiple-videos-with-ffm)

# c# - 对象的孩子

> ID：14902949
> 
> 赞同：0
> 
> 时间：2013-02-15T20:37:47.380
> 
> 标签：c#, uielementcollection

我有一个应该返回的函数`UIElementCollection`。该函数接受`UIElement`具有`children`属性（即`stackpanel`,`grid`等）但不知道`UIElement`它是哪个属性的 a，因此我将其存储到一个通用对象中。

```
public UIElementCollection retCol (object givenObject){
...
} 
```

我想返回 的孩子，但除了投射为堆栈面板或网格`givenObject`之外，我找不到其他方法。`givenObject`

有没有办法我可以获得孩子的财产`givenObject`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:44:41.260

`StackPanel`并且`Grid`都继承自`Panel`，因此您可以将方法更改为：

```
public UIElementCollection retCol (Panel givenObject){
    return givenObject.Children;
} 
```

或者，如果您想让它可用于所有`UIElement`类型，您可以使其更通用并检查函数中的类型：

```
public UIElementCollection retCol (UIElement givenObject){
    if(givenObject is Panel)
        return ((Panel)givenObject).Children;
    else if(givenObject is SomeOtherContainer)
        return ((SomeOtherContainer)givenObject).Children;

    else
        return null;
} 
```

# android - 使用具有多个值的 IN 运算符

> ID：14902953
> 
> 赞同：2
> 
> 时间：2013-02-15T20:38:00.757
> 
> 标签：android, sqlite, prepared-statement

我尝试运行此查询的 IN 运算符有问题

```
public Cursor getFoodToAvoid(String[] diseases){

    String value="";
    for(int i=0; i<diseases.length; i++){
        if(i!=diseases.length-1){
            value = value+diseases[i] +",";
        }else{
            value=value+diseases[i];
        }
    }
    Cursor c =null;
    String[] args={value};
    String sql = "SELECT distinct  "+FoodsTable.FOOD_NAME+", "+FoodsTable.FOOD_ENERGY_CONTENT+
            ","+FoodsTable.FOOD_ID+","+FoodsTable.FOOD_AMOUNT+","+FoodsTable.FOOD_CALORIES+ 
            ","+ FoodsTable.BARCODE+","+FoodsTable.FOOD_CATEGORY+ 

            " FROM "+FoodToAvoidTable.TABLE_NAME + " , " +FoodsTable.TABLE_NAME+
            " WHERE "+FoodToAvoidTable.FOOD_ID_FK+  " = "+FoodsTable.FOOD_ID + " AND " +
            FoodToAvoidTable.DISEASE_ID_FK+ " IN ( ? ) ";
    try{
        c = db.rawQuery(sql, args);
        Log.d(TAG, args[0] +" ");
    }catch(Exception e){
        e.printStackTrace();
    }
    return c;
} 
```

但是我得到一个空光标我知道问题出在 IN 运算符上，但我无法解决。我不能使用 OR 运算符，因为数组疾病是动态的，它的大小会根据用户而变化

谢谢

# ms-access-2007 - 在 MS Access 2007 中的一行中包含表中的 datediff 表达式

> ID：14902954
> 
> 赞同：0
> 
> 时间：2013-02-15T20:38:05.393
> 
> 标签：ms-access-2007

我的表中有 3 列作为开始日期、结束日期和总天数。我只需要以下

如何在开始日期列中设置当前日期另一个问题是如何获取日期差异，结果应该显示在另一个称为总天数的列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:00:43.807

可以设置开始日期，以便默认值为创建记录时的当前日期 date()。您在设计窗口中执行此操作。由于其他两个字段是在以后明确填写的，因此输入机制可以使用与默认结束日期相同的功能。然后计算当前日期和开始日期之间的差值。如果您使用表单作为更新机制，则表达式将设置为默认值。如果您使用更新查询，这些表达式将被设置为更新值。

# c++ - 重载函数调用如何在 C++ 中工作？

> ID：14902962
> 
> 赞同：0
> 
> 时间：2013-02-15T20:38:55.967
> 
> 标签：c++, struct, overloading, operator-keyword

我读到函数调用（）也可以重载。[http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)

以下是什么意思？

有用。

```
template<typename T, typename Comp>
struct bind{
    T v;
    Comp comp;
    bool operator()(const T& b){
        return comp(b,v);
    }
};

int main(){
    bind<int, less<int> > b;
    b.v = 2;
    cout << b(3) << "\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:40:12.993

这意味着如果您创建一个类型为 的对象`bind<>`，您可以将函数调用运算符应用于该对象。

像这样：

```
bind<int, std::less<int>> b;
b.v = 2;
std::cout << b(1) << "\n"; 
```

该片段可能会在标准输出上打印“true”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:44:01.170

如果你有一个名为 的类`foo`，我相信你明白调用该类型对象的成员函数意味着什么：

```
foo f;
f.bar(); 
```

您可能还了解您可以重载某些操作。例如，您可以重载`operator+`for`foo`以便您可以执行以下操作：

```
foo f, g;
f + g; 
```

现在你也可以重载`operator()`一个类，这样你就可以像调用一个函数一样调用它：

```
foo f;
f(); 
```

是的，`f`不是函数，而是重载的类类型的对象`operator()`。执行此操作的类类型称为函子或函数对象。

在您给出的示例中，`bind`是一个函子。当您创建该类型的对象时，您可以像调用函数一样调用它，将 a 传递给它`const T&`，它会返回 a`bool`给您。的实现`operator()`实际上调用了存储在 中的函数`comp`，将`T`您传递给`operator()`,的对象和类型`a`的成员对象都传递给它。`v``T`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T21:07:23.083

~~就目前而言，除了“语法错误”之外，它并不意味着什么。例如：~~

 ~~```
template<T, Op> 
```~~ 

这根本是不允许的。对于每个模板参数，您需要指定它是类型（使用`class`或`typename`）还是非类型参数，例如`int`. 由于明显的意图是这两个都应该是类型参数，因此您需要以下内容：

```
template <class T, class Op> 
```

或者：

```
template <typename T, typename Op> 
```

~~`class`对于这种情况，和之间的含义没有区别`typename`。~~

```
struct bind{
    T v; 
```

保持未`v`初始化将导致未定义的行为，因此您可能不想允许这样做。您通常会通过添加一个以 T 作为其参数并初始化`v`为该值的构造函数来防止它：

```
bind(T const &v) : v(v) {} 
```

当您包含这样的构造函数时，编译器不会自动生成默认构造函数，因此不再可能创建未初始化的`bind`对象`v`——这正是我们想要的。

虽然创建`comp`对象：

```
Op comp; 
```

是相当无害的，它也完全没有必要。您也可以与使用 创建的临时实例进行比较`Op()`，在这种情况下：

```
bool operator()(const T& a){
    return comp(a,v);
} 
```

...会变成这样（并且`Op comp;`简单地删除）：

```
bool operator()(T const &a) { 
    return Op()(a, v);
} 
```

即使进行了更正，我仍认为此代码已过时。在 C++98/03 中，它在需要为算法提供函子的情况下会很有用，例如：

```
std::remove_copy_if(a.begin(), a.end(), bind<int, 
                    std::back_inserter(b),
                    bind<int, std::less<int> >(5)); 
```

...这会将数字从 复制`a`到`b`，删除小于 5 的数字。

然而，在 C++11 中，它的大多数（如果不是全部）使用`bind`可能应该写成 lambda，所以上面的代码会变成这样：

```
std::remove_copy_if(a.begin(), a.end(), bind<int, 
                    std::back_inserter(b),
                    [](int x) { return x < 5; }); 
```

这不仅更短，而且（至少一旦你习惯了它）比使用`std::less`和`bind`组合一个函数要简单得多。它通常不会对运行时效率产生任何影响——lambda 基本上是一种生成类模板的“速记”方式，因此它生成的内容最终与使用`bind`.

# postgresql - pg_auth/pg_pwd 文件的格式

> ID：14902968
> 
> 赞同：0
> 
> 时间：2013-02-15T20:39:16.460
> 
> 标签：postgresql, pgbouncer

设置 pgbouncer 时，需要创建一个 auth 文件，“文件格式与 PostgreSQL pg_auth/pg_pwd 文件相同”。这是什么格式？尝试 google 会产生这句话的页​​面。[http://www.google.com/search?q=pg_pwd+auth+file+format&oq=pg_pwd+auth+file+forma](http://www.google.com/search?q=pg_pwd+auth+file+format&oq=pg_pwd+auth+file+forma)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T20:47:50.230

在你的 pgbouncer.ini

```
auth_type = trust
auth_file = /etc/pgbouncer/userlist.txt 
```

在 userlist.txt

```
"username" "password" 
```

注意引号。请参阅[http://pgbouncer.projects.pgfoundry.org/doc/config.html#_authentication_file_format](http://pgbouncer.projects.pgfoundry.org/doc/config.html#_authentication_file_format)

# ruby-on-rails - 访问范围内的父级

> ID：14902977
> 
> 赞同：3
> 
> 时间：2013-02-15T20:39:58.033
> 
> 标签：ruby-on-rails, scope, associations, rails-activerecord

我有一个具有简单层次结构的 rails 3.2 应用程序：一个用户有很多客户，一个客户有很多发票。

我希望用户通过执行`Client.by_user(current_user)`和仅使用范围查看他们自己的客户和发票`Invoice.by_user(current_user)`。对于客户，我有这个，效果很好：

```
scope :by_user, lambda { |user| where(user_id: user.id) } 
```

但是，如果我尝试相同的发票

```
scope :by_user, lambda { |user| where(client.user_id => user.id) } 
```

它失败了，告诉我`undefined local variable or method 'client'`。

我究竟做错了什么？我不想将 user_ids 添加到发票中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T21:00:10.297

正如@gregates 在评论中所说，最好为用户、客户和发票模型定义关联，然后使用`user.clients`,`user.invoices`等`invoice.user`：

```
class User < ActiveRecord::Base
  has_many :clients
  has_many :invoices, through: :clients
end

class Client < ActiveRecord::Base
  belongs_to :user
  has_many :invoices
end

class Invoice < ActiveRecord::Base
  belongs_to :client
  has_one :user, through: :client
end 
```

但是，如果您更喜欢有范围的想法，您应该将客户表加入您范围内的发票：

```
class Invoice < ActiveRecord::Base
  ...
  scope :by_user, lambda { |user| joins(:client).where("clients.user_id = ?", user.id) }
  ...
end 
```

# php - JQuery/PHP - 仅显示管理员帐户的按钮

> ID：14902980
> 
> 赞同：0
> 
> 时间：2013-02-15T20:40:13.360
> 
> 标签：php, jquery

我有一个网站，允许用户登录到允许用户更改网站内容的控制面板。

创建用户时，您可以设置帐户类型：（PHP）

即`UserAccount::get_accounttype() == 1`完全访问

和`UserAccount::get_accounttype() == 0`部分访问

我已通过使用重定向停止访问某些页面，如下所示：

```
if (UserAccount::get_accounttype() == 0 {
    header("Locaction: webpage.php");
} 
```

但是在某些页面上，我想隐藏某些按钮，以便用户`UserAccount::get_accounttype() == 0`无法使用或查看它们。

我只是想知道实现这一目标的最佳方法是什么？

我知道我可以使用 jQuery 隐藏按钮，`$('target').hide();`但我将如何从 PHP 函数中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:42:59.313

如果您只想在`UserAccount::get_accounttype()`等于时显示一个按钮，请`1`使用：

```
if (UserAccount::get_accounttype() == 1) {
    // button HTML here
} 
```

我强烈反对使用 jquery 隐藏按钮，因为它们仍会显示在源代码中，并且在加载页面之前不会隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:49:21.950

除了其他答案之外，还想指出这里建议使用 PHP 的替代语法。*除非绝对必要，否则永远不要使用 PHP 回显 HTML，这几乎是永远不会的。*

```
<?php if (UserAccount::get_accounttype() == 1): ?>
    <button type="button">Go</button>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:44:41.950

您不应该隐藏按钮以提供安全性，因为它们仍然可以通过某些技术使用，例如 chrome 的源代码浏览器。你最好不要显示按钮：

```
if (UserAccount::get_accounttype() == 1) {
  <input type="button" ... />
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T20:45:30.433

不要用 CSS 或 JavaScript/jQuery 来做。那是不安全的。在您的 PHP 中执行此操作：

```
if (UserAccount::get_accounttype() == 1 {
    echo '<button>Go</button>';
} 
```

然后，当您在服务器上处理表单时，请仔细检查用户是否具有完全访问权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T20:49:35.950

只是一个简单的php条件。

```
<?php if(UserAccount::get_accounttype() == 1): ?>
<input type'button' />
<?php endif; ?> 
```

# powershell - 为什么我不能从 WMI 中选择 AliasProperty？

> ID：14902982
> 
> 赞同：4
> 
> 时间：2013-02-15T20:40:19.230
> 
> 标签：powershell, wmi

鉴于以下情况：

```
get-wmiobject win32_networkadapterconfiguration -ComputerName SERVER1,SERVER2|select pscomputername,__SERVER 
```

仅`__SERVER`返回 的值。然而，`PSComputerName`是一个`AliasProperty`指向 的`__SERVER`。所以我希望它也能返回值（与我在 中的值相同`__SERVER`）。

`get-wmiobject win32_networkadapterconfiguration |gm pscomputername,__SERVER`返回以下内容：

```
Name           MemberType    Definition                       
----           ----------    ----------                       
PSComputerName AliasProperty PSComputerName = __SERVER        
__SERVER       Property      System.String __SERVER {get;set;} 
```

我确定我`PSComputername`过去成功使用过。我在这里错过了什么导致它失败？PowerShell v2 和 v3 都在发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T21:35:03.483

之前在某些网站上已询问过此问题（请参阅 CB 的评论），并且： [Powershell PSComputerName is empty or blank when selected after invoke-command](http://www.itwalkthru.com/2011/09/powershell-pscomputername-is-empty-or.html)

但是我前段时间遇到了另一个问题，但从未被提及（当时和现在都不是根据我的谷歌搜索）

您是否尝试查询虚拟机？

因为据我所知并尝试过，当您查询 VirtualMachine（在我的情况下为 VMware）时， PsComputerName 不存在。

我从来没有找到解决方案或解决方法，但我认为它会节省你寻找的时间。

如果你确实找到了一些东西，我会非常乐意学习它:)

# php - DHL 跟踪 API 和 PHP

> ID：14902983
> 
> 赞同：8
> 
> 时间：2013-02-15T20:40:21.833
> 
> 标签：php, tracking

我目前正在做一个项目，我必须在其中获取数据包的状态（通过 DHL 发送）。我读到了 DHL API，它返回一个 XML，但不知何故，那里没有很好的例子。我找到了一些代码片段，但我不知道在哪里注册 API 密钥。

有没有人给我一些链接或示例？

最好的问候，卢卡斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-27T21:54:58.240

还有这个 PHP 客户端可用于使用 DHL XML API。它可以处理 DHL 公开的所有不同服务。

[https://github.com/alfallouji/DHL-API](https://github.com/alfallouji/DHL-API)

此客户端不依赖或不依赖任何框架，它应该很容易与您自己的代码集成。例如，您可以查看示例文件夹以了解如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:43:12.157

[https://github.com/jklz/DHL-API-Tracking-PHP](https://github.com/jklz/DHL-API-Tracking-PHP)

它用于使用 XML-PI 连接到 DHL，以使用空运提单跟踪货件。它可以处理单个跟踪号或您输入的多个跟踪号（已使用 250 进行测试，其他需要一点时间运行没有问题）。自动获取跟踪号码数组并将其分解为块，然后将请求发送到 DHL，确保不传递每个请求可以跟踪的最大数量，然后将结果作为数组返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-09T16:03:24.703

快速而肮脏，无需任何第三方库并使用官方 API：

```
<?php
$mode        = 'sandbox'; // sandbox or production
$username    = ''; // dhl developer account name, not email
$password    = ''; // dhl developer account pass
$appname     = 'zt12345'; // sandbox app
$apppass     = 'geheim'; // sandbox app
$endpoint    = 'https://cig.dhl.de/services/' . $mode . '/rest/sendungsverfolgung';
$payload     = simplexml_load_string( '<?xml version="1.0" encoding="UTF-8" standalone="no"?><data appname="' . $appname . '" language-code="de" password="' . $apppass . '" piece-code="" request="d-get-piece-detail"/>' );
$shipmentids = array(
    '00340434161094015902' // in sandbox only special numbers are allowed
);

$opts = array(
    'http' => array(
        'method' => "GET",
        'header' => "Authorization: Basic " . base64_encode( "$username:$password" )
    )
);

$context = stream_context_create( $opts );

foreach ( $shipmentids as $shipmentid ) {
    $payload->attributes()->{'piece-code'} = $shipmentid;
    $response                              = file_get_contents( $endpoint . '?' . http_build_query( array( 'xml' => $payload->saveXML() ) ), false, $context );
    $responseXml                           = simplexml_load_string( $response );
    $status                                = null;

    // get last state
    foreach ( $responseXml->data->data->data as $event ) {
        $status = $event->attributes()->{'event-short-status'};
    }

    echo "Shipment " . $shipmentid . " is in state: " . $status . "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-18T09:56:33.160

有一个关于这个的不错的博客。不幸的是，它是德语的，但是那里显示的代码对您来说应该仍然有意义。

来源：[https ://blog.simlau.net/dhl-tracking-api-php.html](https://blog.simlau.net/dhl-tracking-api-php.html)

摘抄：

```
function dhl_tracking($trackingnumber)
{
   $data  = '<?xml version="1.0" encoding="ISO-8859-1" ?>';
   $data .= '<data appname="nol-public" password="anfang" request="get-status-for-public-user" language-code="de">';
   $data .= '  <data piece-code="'.$trackingnumber.'"></data>';
   $data .= '</data>';

   // URL bauen und File hohlen
   $xml = simplexml_load_file(sprintf(
      'http://nolp.dhl.de/nextt-online-public/direct/nexttjlibpublicservlet?xml=%s', $data
   ));

   // FALSE, wenn Syntax oder HTTP Error
   if ($xml === false) return false;

   // Wandelt das SimpleXML Objekt in ein Array um
   foreach ($xml->data->data->attributes() as $key => $value) {
      $return[$key] = (string) $value;
   }
   return $return;
}

// Aufruf der Funktion
print_r(dhl_tracking($tracking_number)); 
```

此函数将返回一个包含一些跟踪信息的数组：

```
Array
(
    [status] => Die Sendung wurde erfolgreich zugestellt.
    [recipient-id-text] => Nachbar
    [product-name] => DHL PAKET
    [pan-recipient-name] => SIMON LAUGER
) 
```

（事实上​​，那里有更多的数据。）

我希望这会以某种方式帮助你。

# c# - IEnumerable 上的 ForEach 类型数据

> ID：14902991
> 
> 赞同：0
> 
> 时间：2013-02-15T20:40:56.263
> 
> 标签：c#, dynamic, ienumerable

我以以下形式获取数据：

```
 [0]: { rkey = "100asb", pkey = "100ap0", ckey = {1/6/2013 3:28:09 AM} }
 [1]: { rkey = "yxq4c", pkey = "100iis", ckey = {1/6/2013 6:38:48 PM} }
  .
  .
  . 
```

我必须编写另一个可以访问值的方法`rkey`，`pkey`并且`ckey`。不幸的是，我无法以线性`ForEach`或`Parallel.ForEach`. 我已经搜索过，但我还没有找到访问我的参数的解决方案。有些人建议将其转换为 a `Dictionary`，但我不确定这是否是一条好路。它必须比这简单得多。

我写的代码是这样的：

```
var films = myrollup.GetCompletedMovies(dtstart, dtend).Result;

using (var session = factory.OpenSession())
{
    using (var transaction = session.BeginTransaction())
    {

        Parallel.ForEach(films, currentFilm =>
        {
            dynamic f = currentFilm;
            lock (myrollup)
            {
                var user = User.GetAsync(f.pkey).Result;
                var record = new FilmAnalytics()
                {
                    UserID = currentFilm.pkey,
                    FilmID = currentFilm.rkey,
                    UserName = user.FirstName,
                    UserLastName = user.LastName,
                    UserAlias = user.Alias,
                    UserEmail = user.Email,
                    UserFacebook = user.FbEmail,
                    Dateofcompletion = currentFilm.ckey
                };
                session.SaveOrUpdate(record);
            }
        });

        transaction.Commit();
    }
} 
```

该变量`films`产生`IEnumerable<dynamic>`类型数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:28:55.933

为我工作：

```
static void Main(string[] args) {
    IEnumerable<dynamic> films = new dynamic[] { new { rkey = 1, rval = "val1" }, new { rkey = 2, rval = "val2" } };

    foreach (var film in films.Select(f => new { RKey = (int)f.rkey,RValue = (string)f.rval }))
        Console.WriteLine(film.RKey + ":" + film.RValue);
} 
```

通过这种方式，我可以将动态转换为强类型对象，然后我可以对它们做任何我想做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:12:39.060

你必须创建一个类

```
 public class Thing
    {
        public string rkey { get; set; }
        public string pkey { get; set; }
        public DateTime ckey { get; set; }
    } 
```

然后像这样完成任务：

```
public Task<IEnumerable<Thing>> .... 
```

然后我可以访问 pkey、rkey 和 ckey。

# css - 如何将 div 放置在彼此旁边和下方？

> ID：14902994
> 
> 赞同：1
> 
> 时间：2013-02-15T20:41:07.073
> 
> 标签：css, html, positioning

这可能是一个愚蠢的问题，而且很容易解决，但我在这样做时遇到了麻烦。我的问题是，如何将最后两个部分（如图所示）放置在第一个部分下方？

[http://imageshack.us/photo/my-images/829/63128947.jpg/](http://imageshack.us/photo/my-images/829/63128947.jpg/)

这是我的代码：

```
#main_div{
display: -webkit-box;
-webkit-box-orient: horizontal;
border: 1px solid black;
max-width: 1000px;
}

#main_section{
width: 600px;
height: 450px;
border: 1px solid black;
padding: 5px;
margin: 10px;
}

#sub_section1{
width: 100px;
height: 200px;
border: 1px solid black;
padding: 5px;
margin: 10px;
-webkit-box-flex: 1;
}

#sub_section2{
width: 100px;
height: 200px;
border: 1px solid black;
padding: 5px;
margin: 10px;
-webkit-box-flex: 1;
}

#sub_section3{
width: 100px;
height: 200px;
border: 1px solid black;
padding: 5px;
margin: 10px;
-webkit-box-flex: 1;
}

#sub_section4{
width: 100px;
height: 200px;
border: 1px solid black;
padding: 5px;
margin: 10px;
-webkit-box-flex: 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:54:36.467

[这是一个演示了一种方法的小提琴](http://jsfiddle.net/nvvHJ/)。我只是添加了另一个`div`元素（我称之为“侧边栏”），并将较小`div`的 s 放入其中。每个元素都是浮动的，侧边栏容器的宽度足以容纳这些元素。您可能需要在 fiddle 中调整视口的大小，以使内容在屏幕截图中流动。

由于您的较小`div`元素的样式都相同，因此我选择使用一个类而不是多个 ID。这样您就不会在 CSS 中不必要地重复规则。

另请注意，如果您喜欢这种事情，这也可能通过绝对定位来实现。在 CSS 中通常有多种处理方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T21:00:27.743

我刚刚添加了另一层包含 div 并将它们命名为 section_top/bottom。由于 div 是块元素，它应该将其他两个向下推。我还稍微清理了样式:-)。

[小提琴](http://jsfiddle.net/CSilivestru/5Fd9P/)

代码：

```
<html>
    <head>
        <style>
            #main_div{
                display: -webkit-box;
                -webkit-box-orient: horizontal;
                border: 1px solid black;
                max-width: 1000px;
                padding: 5px;
                margin: 10px;
            }

            #main_section{
                width: 600px;
                height: 450px;
                border: 1px solid black;
            }

            .subsection {
                width: 100px;
                height: 200px;
                border: 1px solid black;
                padding: 5px;
                margin: 10px;
                -webkit-box-flex: 1;
            }
        </style>
    </head>
    <body>
        <div id="main_div">
            <div id="main_section">

            </div>
            <div id="section_top">
                <div id="sub_section1" class="subsection">

                </div>
                <div id="sub_section2" class="subsection">

                </div>
            </div>
            <div id="section_bottom">
                <div id="sub_section3" class="subsection">

                </div>
                <div id="sub_section4" class="subsection">

                </div>
            </div>
        </div>
    </body>
</html> 
```

# python - 有没有办法检查一个项目是否存在于 Python 元组中？

> ID：14902997
> 
> 赞同：12
> 
> 时间：2013-02-15T20:41:23.393
> 
> 标签：python, list, collections, tuples

我看过一个`index`函数，但如果找不到它就会出错。有没有一种简单的方法来检查项目是否存在？我只想获得结果的布尔值，例如：

```
if tuple.exists("item"):
    print "it exists" 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-15T20:42:07.443

使用`in`运算符：

```
>>> 2 in (2, 3, 4)
True 
```

`in`运算符可用于检查序列中任何元素的成员资格。

并且不要将您的元组命名为`tuple`. 使用不同的名称。