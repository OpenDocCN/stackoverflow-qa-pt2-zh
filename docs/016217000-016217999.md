# StackOverflow 问答 16217000-16217999

# java - 安卓游戏的逻辑流程

> ID：16217000
> 
> 赞同：0
> 
> 时间：2013-04-25T14:09:05.170
> 
> 标签：java, android

嗨，我是 android 游戏开发的新手，我想问你们关于我的这个 android 游戏的正确逻辑流程。所以这是我的游戏。这是一个非常简单的游戏，用户必须选择正确的颜色。游戏有3个阶段。在每个阶段，它有 10 个问题。在每个问题中，它都有一个 30 秒的计时器。有了问题和选择，当然需要随机化。如果用户选择了正确的颜色，它将进入下一个问题。但是如果用户选择了错误的颜色，他/她只有 3 次可供选择，如果他/她达到第 3 次，则游戏**结束**并显示**再次尝试**按钮。

这是我尝试过的一段代码：

```
 // I created a custom countdown timer c/o Say
    counter = new MyCount(30000,1000);
     counter.start();
     // Call for correct object
    getCorrectObject();

    @Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.pause:
        if(mLastResourceId == R.drawable.pause){
            pause.setImageResource(R.drawable.resume);
            mLastResourceId = R.drawable.resume;
            counter.cancel();
        } else if (mLastResourceId == R.drawable.resume) {
            pause.setImageResource(R.drawable.pause);
            mLastResourceId = R.drawable.pause;
            counter = new MyCount(s1,1000);
            counter.start();
        }
        break;
  }

 public class MyCount extends CountDownTimer
 {
    public MyCount(long millisInFuture, long countDownInterval)
    {
        super(millisInFuture, countDownInterval);
    }
    @Override     
    public void onFinish()
    {
        Intent i = new Intent(getApplicationContext(), Stage1_2.class);
        startActivity(i);
    }

    TextView tx = (TextView) findViewById(R.id.timer);
    @Override     
    public void onTick(long millisUntilFinished)
    {
        s1 = millisUntilFinished;
        tx.setText("" + millisUntilFinished / 1000);
    }
} 
```

我还在考虑的是，如果用户在计时器结束的情况下选择了正确答案，我应该在 onTick 方法中输入什么来强制计时器结束？我面临的棘手部分之一是选择或对象的随机化。

到目前为止，这也是我尝试过的：

```
 private void getCorrectObject() {
    // TODO Auto-generated method stub

    List<Integer> objects = new ArrayList<Integer>();
    objects.add(1);
    objects.add(2);
    objects.add(3);
    objects.add(4);
    objects.add(5);
    objects.add(6);
    objects.add(7);

    Collections.shuffle(objects);
    int correctObject =  objects.get(0);
    Log.d("test", String.valueOf(correctObject));

    switch(correctObject)
    {
    case 1:
        bObjectCorrect.setImageResource(R.drawable.tree1);
        bObjectCorrect.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_1.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 2:
        bObject1.setImageResource(R.drawable.tree1);
        bObject1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_1.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 3:
        bObject2.setImageResource(R.drawable.tree1);
        bObject2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_1.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 4:
        bObject3.setImageResource(R.drawable.tree1);
        bObject3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_1.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 5:
        bObject4.setImageResource(R.drawable.tree1);
        bObject4.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_1.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 6:
        bObject5.setImageResource(R.drawable.tree1);
        bObject5.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_1.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 7:
        bObject6.setImageResource(R.drawable.tree1);
        bObject6.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_1.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    }
} 
```

**更新：**另一件事是，我很困惑将我的 while 循环放在这里进行 3 次试验。

```
 // I will put 3 trials logic here
    while(trial <= 3){
    trial++;

 switch(correctObject)
    {
    case 1:
        bObjectCorrect.setImageResource(R.drawable.stage1_1_object1);
        bObjectCorrect.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 2:
        bObject1.setImageResource(R.drawable.stage1_1_object1);
        bObject1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 3:
        bObject2.setImageResource(R.drawable.stage1_1_object1);
        bObject2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 4:
        bObject3.setImageResource(R.drawable.stage1_1_object1);
        bObject3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 5:
        bObject4.setImageResource(R.drawable.stage1_1_object1);
        bObject4.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 6:
        bObject5.setImageResource(R.drawable.stage1_1_object1);
        bObject5.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 7:
        bObject6.setImageResource(R.drawable.stage1_1_object1);
        bObject6.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 8:
        bObject7.setImageResource(R.drawable.stage1_1_object1);
        bObject7.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    case 9:
        bObject8.setImageResource(R.drawable.stage1_1_object1);
        bObject8.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent i = new Intent(getApplicationContext(), Stage1_2.class);
                startActivity(i);
                new Thread(){
                    public void run(){
                        MediaPlayer mp = MediaPlayer.create(Stage1_2.this, R.raw.brown);
                        mp.start();
                    }
                }.start();
                finish();
            }
        });
        break;
    } // Last of switch statement

    if(trial == 3){
        new AlertDialog.Builder(this)
        .setTitle("Game Over")
        .setMessage("Sorry you reached your 3rd trial")
        .setPositiveButton("Try Again?", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) { 
                Intent i = new Intent(Stage1_2.this, Stage1_1.class);
                startActivity(i);
            }
         })
        .setNegativeButton("Back to Menu", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) { 
                Intent i = new Intent(Stage1_2.this, ShapingColors.class);
                startActivity(i);
            }
         })
         .show();
    }

    } // Last of while loop 
```

我真的很想听听你的建议。非常感谢您的任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:15:54.250

你不需要投入任何东西`onTick`来处理这种情况。在您调用后`cancel()`（您在点击处理程序中执行此操作），`onTick()`将不会再次被调用。

# php - 在php中添加日期

> ID：16217002
> 
> 赞同：0
> 
> 时间：2013-04-25T14:09:08.677
> 
> 标签：php, datetime

我读到了这个，但对我不起作用。这是我的代码：

```
$today = date_create()->format("d/m/Y"); // Today is 25/04/2013
$num_days = GetNumberOfdays();
$end_date = date("d/m/Y", strtotime($today . " + $num_days days")); 
```

我从中得到的价值`$end_date`是 `31/12/1969`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:14:00.660

试试这个：

```
$end_date = date("d/m/Y", strtotime("+ $num_days days", time())); 
```

编辑：如果您只是在寻找今天的日期，我将`$today`变量更改为基本上可以为您提供相同的信息。`time()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:24:35.547

```
$date = new \DateTime(); // Defaults to Today
$num_days = 123;
$date->add(
    new \DateInterval('P' . $num_days . 'D')
);
echo $date->format('d-M-Y'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:13:56.217

从看起来你想要做的事情来看，你甚至不需要 $today （如果没有提供日期，它默认为现在），所以你可以这样做：

```
 $end_date = date("d/m/Y", strtotime("+ 5 days")); 
 echo $end_date; 
```

结果是

```
 30/04/2013 
```

如果你想提供一个日期，你需要相反的参数，根据[手册](http://php.net/manual/en/function.strtotime.php)：

```
strtotime ( string $time [, int $now = time() ] ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T14:15:28.143

`date_create()`返回一个`DateTime`对象。

您可以使用[DateTime::modify](http://www.php.net/manual/en/datetime.modify.php)方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T14:24:38.600

```
<?
// note change of $today format
$today = date_create()->format("d-m-Y"); // Today is 25-04-2013
$num_days = GetNumberOfdays();
$end_date = date("d/m/Y", strtotime("+" . $num_days . " days", strtotime($today)));
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T14:16:18.577

```
$today = date_create()->format("d/m/Y"); // Today is 25/04/2013

$num_days = date_create()->format("d");

echo $end_date = date("d/m/Y", strtotime(" + $num_days days")); 
```

# mysql - 使用另一个表中的值将 xml 加载到 mysql 中

> ID：16217004
> 
> 赞同：0
> 
> 时间：2013-04-25T14:09:11.543
> 
> 标签：mysql, xml

我有一个 mysql 数据库，我想用 xml 数据填充它，但我希望此信息根据另一个表中的值而改变。

xml 文件如下所示：

```
D<DATAROW num="1">
<FILM_DATE>20/04/2013</FILM_DATE> 
<FILM_NAME>DAYS OF THUNDER</FILM_NAME> 
<FILM_REVENUE>100</ FILM_REVENUE >
D<DATAROW num="2">
<FILM_DATE>21/04/2013</FILM_DATE> 
<FILM_NAME>TOP GUN</FILM_NAME> 
<FILM_REVENUE>120</ FILM_REVENUE > 
D<DATAROW num="3">
<FILM_DATE>20/04/2013</FILM_DATE> 
<FILM_NAME> MISSION IMPOSSIBLE </FILM_NAME> 
<FILM_REVENUE>100</ FILM_REVENUE > 
```

例如，我想将带有电影标题和日期的 xml 文件加载到电影详细信息表中

```
Load XML Local Infile ‘C:\film_details.xml
Into table film details 
```

我不想将电影名称加载到 Film Details 表中，而是使用另一个名为 Film Titles 的表中的 id

```
+----+--------------------+
| ID |     Film Name      |
+----+--------------------+
|  1 | Vanilla Sky        |
|  2 | Days of Thunder    |
|  3 | Top Gun            |
|  4 | Mission Impossible |
+----+--------------------+ 
```

我希望电影详细信息表如下所示

```
+------------+-----------+---------+
|    Date    | Film Name | Revenue |
+------------+-----------+---------+
| 20/04/2013 |         2 |     100 |
| 21/04/2013 |         3 |     120 |
| 20/04/2013 |         4 |     100 |
+------------+-----------+---------+ 
```

请注意，表 Film Details 中的 Film Name 列与 XML 中的不同（缺少“_”）

有没有办法在将 xml 数据插入 mysql 数据库之前对其进行操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:14:46.010

如果您首先将 XML 文件加载到临时表中，那将是一个好主意。之后，一个简单的查询就足以从引用表中获取代码。

这样你就可以解决你遇到的两个问题。外键和不同的字段名称。

# php - Netbeans：创建项目概念与打开文件

> ID：16217010
> 
> 赞同：2
> 
> 时间：2013-04-25T14:09:34.563
> 
> 标签：php, netbeans, ide, wamp

我在理解几个概念时遇到了一些麻烦。

我是 Netbeans 的新手，并将其用于 PHP 开发。我以前使用 JEdit。在 JEdit 中，我只需打开文件浏览器并开始编辑文件。

在 Netbeans 中，它希望我创建项目并导入文件。

我的问题是：

*   当我导入项目时，它会设置 Netbeans 需要的数据文件并保留原始目录，对吗？我注意到我可以打开和编辑一个项目，它会影响原始项目。

*   有时我喜欢快速切换项目，只想查看我的wamp服务器的/www/目录抓取文件，查看过去的项目等，为什么不能简单地这样做呢？（我必须总是导入项目才能看到我的 /www/ 文件夹）

*   创建项目与仅打开文件之间有什么意义？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:29:22.953

创建项目与仅在编辑器中打开文件相比，Netbeans 知道所有这些文件都放在一起。它们是同一个项目的一部分。例如，这允许您重构函数名称或类名称，并让 Netbeans 自动将更改应用到项目中使用的任何地方。

如果您从现有源创建项目，这些现有文件将是您正在编辑的文件。如果您的文件处于版本控制之下，您只需在签出代码的目录中创建一个 Netbeans 项目。然后，您可以在 Netbeans 中进行提交和所有操作。

# c#-4.0 - 无法让 EntityFunctions.TruncateTime() 工作

> ID：16217016
> 
> 赞同：33
> 
> 时间：2013-04-25T14:09:48.997
> 
> 标签：c#-4.0, entity-framework-4, linq-to-entities, entity-functions

我首先使用实体​​框架代码。使用 LINQ to Entity 我想获取基于 DateTime 值的记录。这是我当前的代码：

```
/// <summary>
/// A method to check and see if the Parsed Game already exists on the
/// database. If Yes, then True is returned, otherwise False is returned.
/// </summary>
/// <param name="context">The Db Context to use</param>
/// <param name="homeTeam">The Name of the Home Team for the Game.</param>
/// <param name="awayTeam">The Name of the Away Team for the Game.</param>        
/// <param name="date">The Date of the Game</param>
/// <returns></returns>
public bool doesGameAlreadyExist(PContext context, String homeTeam, String awayTeam, String date)
{
    string dtObjFormat = "dd MMM yyyy";
    DateTime dt;
    DateTime.TryParseExact(date, dtObjFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out dt);
    var result = context.Games.Where(x => EntityFunctions.TruncateTime(x.Start) == dt.Date).FirstOrDefault();
    return result != null;

} 
```

上面的代码抛出以下错误：

```
 LINQ to Entities does not recognize the method 'System.Nullable`1[System.DateTime] TruncateTime(System.Nullable`1[System.DateTime])' method, and this method cannot be translated into a store expression. 
```

我也尝试了下面的代码，我得到了同样的错误：

```
var result = context.Games.Where(x => EntityFunctions.TruncateTime(x.Start) == EntityFunctions.TruncateTime(dt.Date)).FirstOrDefault(); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-10-26T02:46:50.080

我最近在将 Web 应用程序从 Entity Framework 5 升级到 Entity Framework 6 时遇到了这个问题。然后，我意识到`System.Data.Entity`需要从应用程序中完全删除 DLL 才能使用 Entity Framework 6。Entity Framework 6 不是.NET Framework 不再存在，因此它独立于 System.Data.Entity dll。为了截断时间，您需要使用`System.Data.Entity.DbFunctions.TruncateTime(...)`EntityFramework.dll 中的方法。是的，这解决了我的问题。

**底线**：如果您使用的是 Entity Framework 6，请首先删除参考`System.Data.Entity`DLL，然后在您的代码中替换`EntityFunctions.TruncateTime(..)`为`System.Data.Entity.DbFunctions.TruncateTime(...)`. [来自 EntityFramework.dll]

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-25T14:17:53.877

我没有删除 reference `System.Data.Entity`，我只是将调用从`DbFunctions.TruncateTime`to更改`System.Data.Entity.DbFunctions.TruncateTime`为对我有用。

我正在使用实体 6。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-19T11:34:23.413

```
DateTime? dt = DateTime.Parse(sText);
campaigns = _CampaignMasterRepository.Get().OrderByDescending(a => a.LaunchOn).Where(a => a.UserId == obj_User.ID && a.CampaignStatus == (int)OmevoEnums.CampaignStatus.Sent && a.CampaignName.Contains(sText) || DbFunctions.TruncateTime(a.LaunchOn) == DbFunctions.TruncateTime(dt)).ToList(); 
```

要通过 Linq 查询获取日期结果，请使用此函数。

# javascript - 如何使用全局变量访问 jQuery 中的插件方法？

> ID：16217018
> 
> 赞同：0
> 
> 时间：2013-04-25T14:09:50.680
> 
> 标签：javascript, jquery, global-variables

我对 jQuery 的经验有限，因此请随时编辑问题，以防措辞不正确。

在启动插件时，我将它分配给一个变量：

```
var test = $('.fancybox').fancybox({
    padding         : 0,
    margin          : 10,
    closeBtn        : false
}); 
```

现在，我正在尝试访问插件的实例并将其方法称为：

```
$(document).on('keyup', function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);

    if (code == 40) {
        test.cancel();
        return false;
    }
}); 
```

这会引发错误——“测试未定义”。根据我的理解，这似乎是变量范围的问题`test`。但是，`test`已在内部声明`jQuery(document).ready(function($)`，因此应该对内部的函数全局可用`jQuery(document).ready(function($)`。我在这里做错了什么？

# java - 填充 LinkedHashSet 的奇怪问题

> ID：16217025
> 
> 赞同：1
> 
> 时间：2013-04-25T14:10:07.973
> 
> 标签：java, logic, bigdecimal, linkedhashset

鉴于下面的代码，当最后的 if-else 语句进入 else 子句时，是否有某种原因，如果我取消注释这两行代码并注释“FOOZANAZABAR”和“TESTCAIRO”行，它不会添加那些行到 LinkedHashSet 中？它似乎添加了 values.add(new BigDecimal(PEUNIT).multiply(new BigDecimal(1000)).toString()); 当逻辑进入 else 子句时正确，但不会将 BD.ZERO 或 PEFAMT 添加到该字段，尽管它们是字符串。

需要注意的是，ZERO 和 PEFAMT 是 BigDecimal，它们被转换为字符串。这是唯一让我感到悲伤的两个价值观。任何方向将不胜感激。

```
public static LinkedHashMap<String, LinkedHashSet<String>> convertTransactionTableData(ResultSet rs) {
    LinkedHashMap<String, LinkedHashSet<String>> returnableMap = new LinkedHashMap<String, LinkedHashSet<String>> ();

    try {
        while (rs.next()){
            String PEFAMT, PEPOLN, MCISST, PEBRCD, PEEFFY, PEPLAN;
            String PEUNIT, PETRNC, PECO, PEITYP, ZERO;

            PEPOLN = rs.getString("PEPOLN");
            MCISST = rs.getString("MCISST");
            PEBRCD = rs.getBigDecimal("PEBRCD").toString();
            PEEFFY = rs.getBigDecimal("PEEFFY").toString();
            PEPLAN = rs.getString("PEPLAN");
            PEUNIT = rs.getBigDecimal("PEUNIT").toString();
            PEFAMT = rs.getBigDecimal("PEFAMT").toString();
            PETRNC = rs.getString("PETRNC");
            PECO = rs.getString("PECO");
            PEITYP = DataConverter.resetInsuranceType(rs.getString("PEITYP"));
            ZERO = BigDecimal.ZERO.toPlainString();

            String policyNumber = PEPOLN;
            LinkedHashSet<String> values = new LinkedHashSet<String>();
            values.add(MCISST);
            values.add(PEBRCD);
            values.add(PEEFFY);
            values.add(PEPLAN);
            values.add(PEUNIT);
            if (PEPLAN.equalsIgnoreCase("HSRE")) {
                values.add(new BigDecimal(PEUNIT).multiply(new BigDecimal(1000)).toString());
            } else {
                values.add(PEFAMT);
            }
            values.add(PETRNC);
            values.add(PECO);
            values.add(PEITYP);
            if (DataConverter.testStringToInt(PETRNC)) {
                if (Integer.valueOf(PETRNC) >= 20 && Integer.valueOf(PETRNC) <= 29) {
                    values.add(PEFAMT);
                    values.add(ZERO);
                    values.add(ZERO);
                } else {
                    values.add("FOOZANZABAR");
                    values.add("TESTCAIRO");
//                      values.add(ZERO);
//                      values.add(PEFAMT);
                    values.add(new BigDecimal(PEUNIT).multiply(new BigDecimal(1000)).toString());
                }
            }
            returnableMap.put(policyNumber, values);
        }
    } catch (SQLException sqlEx) {
        logger.error("Problem converting the ResultSet.  ", sqlEx);
    }
    return returnableMap;
} 
```

先感谢您。

*   乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:24:23.207

请注意，您在此处使用的基础数据结构是**SET**，这意味着它不会让您添加重复项。BD.ZERO 和 PEFAMT的***字符串值***很可能已经存在于您的`values`集合中，因此将被忽略。

如果事实证明是这种情况，只需切换到使用`LinkedList<String>`允许您重复的情况。

# ruby-on-rails - 单页控制器中的 Rails ContactUs 模型

> ID：16217028
> 
> 赞同：1
> 
> 时间：2013-04-25T14:10:13.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

嗨，有没有模型的简单 rails 站点，它仅用于提供静态页面。

该站点有一个 Pages 控制器，但这仅提供一个由部分组成的主页。

像这样在`app/views/pages/home.html.erb`

```
<%= render 'layouts/about' %>
<%= render 'layouts/services' %>
<%= render 'layouts/rooms' %>
<%= render 'layouts/breakfast' %>
<%= render 'layouts/guestbook' %>
<%= render 'layouts/contact' %> 
```

主页使用一些 html5/javascript 来自动滚动页面。因此，每个部分都以# 开头，以允许自动滚动到该部分。

```
 <li><a class="home" href="#home">Home</a></li>
   <li><a class="services" href="#services">Tarrifs</a></li>
   <li><a class="portofolio" href="#portofolio">Rooms</a></li>
   <li><a class="breakfast" href="#breakfast">Breakfast</a></li>
   <li><a class="contact" href="#contact" >Contact </a></li>
   <li><a class="services" href="#services">Blog / Whats On.</a></li>
   <li><a class="guestbook" href="#guestbook">Guest Book</a></li>
   <li class="description">Take a look.</li> 
```

这一切都很好。 [开发网站在这里](http://young-atoll-4121.herokuapp.com/)

现在我的问题/问题是：我想添加一个 Rails 类型的 ContactUS 页面。

遵循各种教程：

[简单联系我们](http://matharvard.ca/posts/2011/aug/22/contact-form-in-rails-3/)

[Rails 3 联系我们](http://www.rodrigoalvesvieira.com/formulario-contato-rails/)

它们都指向有一个消息模型、ActionMailer 和联系控制器，如果你想有一个单独的联系控制器，它们就可以工作。

我一直试图弄清楚如何构建一个contactUs表单，但将其保留在页面控制器中以允许自动滚动工作，因为使用联系人控制器似乎会更改所有URL路由。我知道这可能不是 Rails 方式，但任何帮助都会很棒。

希望这是有道理的。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:17:11.740

我会做以下事情：

添加一个名为“Form”的新模型，app/models/form.rb

```
class Form
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :name, :email, :message

  validates :name, presence: true
  validates :email, presence: true, email: true
  validates :message, presence: true

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end

end 
```

修改您的 pages_controller：

```
def new
  @form = Form.new
end

def create
  @form = Form.new(params[:form])
  if @form.valid?
    redirect_to root_path, notice: "Thanks!")
  else
    render "new"
  end
end 
```

将表单 html 代码添加到您的 app/views/pages/home.html.erb

```
<%= form_for @form do |f| %>
  <div class="field">
    <%= f.label :name %>
    <%= f.text_field :name %>
 </div>

 <div class="field">
   <%= f.label :email %>
   <%= f.email_field :email %>
 </div>

 <div class="field">
   <%= f.label :message %>
   <%= f.text_area :message %>
 </div>

 <div class="actions">
   <%= f.submit "Submit" %>
 </div> 
```

就是这样，你有你的联系表格。

这段代码是从我在 github 上的一个 gem 中收集的： [https ://github.com/mattherick/contact_form](https://github.com/mattherick/contact_form)

为了进行测试，您可以将此 gem 添加到您的 gemfile 并运行文件生成器，如 github 自述文件中所述。

# excel - 如何从人口数据中计算平均值？

> ID：16217031
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:10:28.937
> 
> 标签：excel, population, census

我很难找到一种方法来计算聚集成组的人口普查数据，例如：0-4 岁年龄段有 280 人，5-9 岁年龄段有 258 人，依此类推。我将如何计算一系列变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:42:43.313

如果要人口的大致平均年龄，可以将 0-4 年龄段的 280 人放在 2 岁（0-4 岁的平均值），可以将 5-9 年龄段的 258 人放在 7 岁（平均5-9）。

如果你想要一个精确的范围，你首先计算最小平均值，然后计算最大平均值。

将 0-4 年龄段的 280 人放在 0 岁，将 5-9 年龄段的 258 人放在 5 岁，以此类推，计算出最小平均值。

将 0-4 年龄段的 280 人放在 4 岁，将 5-9 年龄段的 258 人放在 9 岁，以此类推，计算出最大平均值。

计算出最小值和最大值平均值后，您可以说“美国人口的平均年龄介于最小值和最大值之间”。这是您可以在年龄范围内做的最好的事情并且是准确的。

# perl - 在 Perl 中，我想在字符串末尾屏蔽/剪切 X 个字符（X 可以是一组字符串之一）

> ID：16217033
> 
> 赞同：0
> 
> 时间：2013-04-25T14:10:34.643
> 
> 标签：perl

我有两个字符串，XXXXXXnumber 和 XXXXXXdate，我想从每个字符串中删除所有 XXXXXX。XXXXXX 所代表的实际字符数可能会有所不同。后缀“数字”和“日期”是不变的。XXXXXXnumber 和 XXXXXXXdate 应该变成 XXXXXX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:18:34.727

我会`$line =~ s/(number|date)$//`为该任务使用正则表达式，其中`$line`任何一行都可以。

`number`如果您的行在or之后有其他字符`date`，则它们也必须被过滤掉。另一种方法是使用类似的表达式`($num) = ($line =~ /^(.*)(number|date).*$/);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:16:45.337

```
my ($prefix) = ($string =~ /\A (.+?) (?:date|number) \z/x); 
```

或者：

```
$string =~ s/ (?:date|number) \z//x; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:00:33.770

一个简单的替换就可以解决它：

```
$str =~ s/(?:number|date)\z/; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:16:43.257

使用正则表达式：

```
($newvar = $oldvar) =~ s/^(.*)(number|date)$/$1/; 
```

如果您对`$oldvar`' 的原始值（包括 Xes）没有更多的使用，这将简化为

```
$oldvar =~ s/^(.*)(number|date)$/$1/; 
```

# c# - 检查远程端口是否在 UDP 上处于 UP（侦听）状态？

> ID：16217034
> 
> 赞同：0
> 
> 时间：2013-04-25T14:10:36.010
> 
> 标签：c#, .net, udp

我必须根据正在运行的服务（IP+端口）来检测远程主机是否已启动。我不能使用 ping，因为即使 ICMP 端口被阻塞，我们也需要让它工作。

有时服务使用 TCP，有时使用 UDP（但是当我必须检查时，我知道服务器是否必须在 UDP 或 TCP 上运行，这取决于它的类型）。我检查 TCP 端口没有问题（基于[https://stackoverflow.com/a/7605428/397830](https://stackoverflow.com/a/7605428/397830)）。但是由于 UDP 不是一个面向连接的协议，我怎么能确定远程主机在这个端口上监听 UDP 呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:17:06.117

摘自 nmap 文档：

UDP 扫描通过向每个目标端口发送一个 UDP 数据包来工作。对于一些常见的端口，例如 53 和 161，发送特定于协议的有效负载，但对于大多数端口，数据包是空的。--data-length 选项可用于向每个端口发送固定长度的随机有效负载，或者（如果您指定值 0）禁用有效负载。如果返回 ICMP 端口不可达错误（类型 3，代码 3），则关闭端口。其他 ICMP 不可达错误（类型 3，代码 1、2、9、10 或 13）将端口标记为已过滤。有时，服务会响应一个 UDP 数据包，证明它是开放的。如果重传后没有收到响应，则端口被分类为打开|过滤。这意味着端口可能是打开的，或者可能是数据包过滤器阻止了通信。

您可以在此处阅读全文： [NMAP 端口扫描](http://nmap.org/book/man-port-scanning-techniques.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:15:46.083

对于 UDP，您可以将“hello 数据包”集成到您的协议中，一旦在服务器端收到该数据包，服务器就会发回另一个“hello 数据包”，一旦客户端收到该数据包，它就知道服务器已启动并正在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:21:34.550

UDP主要是一劳永逸。如果您没有得到端口不可达响应，那么端口*可能*是打开的......试试这个 python 脚本：

```
import socket

IP = "172.16.0.1"
PORT = 1900
MESSAGE = "Hello"

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.sendto(MESSAGE, (IP, PORT)) 
```

执行此操作时，以 root 身份运行 $(tcpdump icmp and host 172.17.0.1) 如果端口已关闭，您应该会看到类似这样的内容 IP 172.16.0.1 > xxx.local: ICMP 172.16.0.1 udp port 1900 unreachable, length 49 The没有这表明端口可能是开放的

# ios - 同时处理多个手势

> ID：16217036
> 
> 赞同：0
> 
> 时间：2013-04-25T14:10:44.997
> 
> 标签：ios, uigesturerecognizer

我有两个子视图 view1 和 view2。我已将 LongPress 和 Pan 手势添加到我的 parentview。当我长按 view1 时，我将在手指下方显示一个带有弹出动画的可拖动视图，并将继续将拖动视图拖动到视图 2。在这个过程中 panGesture 选择器没有被调用，但是 Longpress 手势选择器被调用。在我从 dragview 中删除手指然后再次开始拖动后，调用 panGesture 选择器。

我需要的是，一旦创建了dragview，禁用（不是永久地，而是直到调用平移手势状态结束）长按手势和平移手势选择器应该被调用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:21:10.593

您有一个名为的委托方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

看看它，你需要返回YES。

# python - 如何将 ssh.exec_command 的输出重定向到 Python paramiko 模块中的文件？

> ID：16217038
> 
> 赞同：4
> 
> 时间：2013-04-25T14:10:46.323
> 
> 标签：python, linux, remote-access, paramiko

我想`test.py`在 Linux 目标机器（它有一个 python 解释器）上运行一个 python 脚本，并将命令的输出捕获到一个文本文件中，作为另一个`invoke.py`使用`paramiko`模块的 python 脚本的一部分。

脚本中的语句

`stdin, stdout, sterr = ssh.exec_command("python invoke.py > log.txt")`

生成一个**空白**文件 log.txt。

请提出更正/替代方法来做到这一点。将输出正确写入文件。

`test.py`在本地运行时输出健全的文本（预计将记录在 log.txt 中）。

[这里](https://stackoverflow.com/questions/13509955/paramiko-exec-command-redirect-to-a-file)和[这里](https://stackoverflow.com/questions/2133326/paramiko-equvalent-of-pipeline-controls-and-input-output-pipes)有一些相关的帖子，但没有人处理 python 脚本的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-24T09:10:11.467

而不是调用 client.exec_command() 您可以使用 client.open_channel() 并使用通道会话的 recv() 和 recv_stderr() 流来读写 stdout/std err：

```
def sshExecute(hostname, username, password, command, logpath = None):

    buffSize = 2048
    port = 22

    client = paramiko.Transport((hostname, port))
    client.connect(username=username, password=password)

    if logpath == None:
        logpath = "./"

    timestamp = int(time.time())
    hostname_prefix = "host-%s-%s"%(hostname.replace(".","-"),timestamp)         
    stdout_data_filename = os.path.join(logpath,"%s.out"%(hostname_prefix))
    stderr_data_filename = os.path.join(logpath,"%s.err"%(hostname_prefix))    
    stdout_data = open(stdout_data_filename,"w") 
    stderr_data = open(stderr_data_filename,"w") 

    sshSession = client.open_channel(kind='session')
    sshSession.exec_command(command)
    while True:
        if sshSession.recv_ready():
            stdout_data.write(sshSession.recv(buffSize))
        if sshSession.recv_stderr_ready():
            stderr_data.write(sshSession.recv_stderr(buffSize))
        if sshSession.exit_status_ready():
            break

    stdout_data.close()
    stderr_data.close()
    sshSession.close()
    client.close()

    return sshSession.recv_exit_status() 
```

希望这个完整的功能可以帮助你

# jsf - h:outputLink jsf，隐藏外部链接

> ID：16217044
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:11:20.677
> 
> 标签：jsf

我想在 JSF 中创建一个指向外部页面的简单链接。我有这个代码：

```
<h:outputLink value ="http://www.google.com.co/" >
<h:outputText value="¿No puede acceder a su cuenta?" />
</h:outputLink> 
```

但结果是：

```
¿No puede acceder a su cuenta?
(www.google.com.co) 
```

我不希望我的目标（www.google.com.co）出现在链接中... 首先：这是这样做的方式吗？第二：如何隐藏链接的目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:18:00.723

一种想法是，链接不是链接到 URL，而是一个带有编码参数的 JavaScript 函数，然后用解码的 URL 替换当前页面，或者在新页面中打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:17:51.603

在上述代码的上下文中，您可以使用我在下面编写的代码：

```
<h:outputLink value="destinationPage.xhtml">¿No puede acceder a su cuenta?</h:outputLink> 
```

# paypal - 如何使用通用支付系统将付款拆分到两个账户？

> ID：16217045
> 
> 赞同：2
> 
> 时间：2013-04-25T14:11:31.317
> 
> 标签：paypal, e-commerce, payment, currency

我目前正在创建一项服务，人们可以在其中出售东西，而作为中间人，我想从中分一杯羹。

我不想接受全部付款并在以后拆分它，但是当客户支付不成为交易员时。

我知道如何在 PayPal 和 co 上进行转账。但是是否可以立即拆分这些付款？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:21:02.807

好吧，如果您只是使用正确的关键字进行谷歌搜索，您会发现：

[将 Paypal 付款拆分为两个帐户](https://stackoverflow.com/questions/8137891/split-paypal-payment-into-two-accounts)

我真正需要的是延迟链式付款，可以在[这里找到。](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)

# c# - 为什么 FileInfo 对象的 Name 属性以“~$”开头？

> ID：16217046
> 
> 赞同：1
> 
> 时间：2013-04-25T14:11:32.023
> 
> 标签：c#, .net, xlsx, fileinfo, directoryinfo

所以我正在编写一些代码，这些代码正在遍历`.xlsx`文件目录并选择最后创建的文件。这是一项简单的任务，但是`Name`特定`FileInfo`对象的属性发生了一些奇怪的事情，并且可能会发生更多这种情况。

这是我的代码：

```
 DirectoryInfo di = new DirectoryInfo(FolderPath);
        FileInfo[] FileArray = di.GetFiles("*.xlsx", SearchOption.AllDirectories);
        if (FileArray.Count() != 0) 
        {
            DateTime latestDate = DateTime.MinValue;
            string FileName = String.Empty;
            foreach (FileInfo File in FileArray)
            {
                if (File.CreationTime > latestDate)
                {
                    latestDate = File.CreationTime;
                    FileName = File.FullName;  
                }
            }
        } 
```

这`FileName`很重要，因为我使用它来查询最新文件的信息并显示它。但是，`Name`特定 .xlsx 文件（可能更多）的属性看起来像这样`~$File.xlsx`，而实际上文件名实际上是 .xlsx 文件`File.xlsx`。这会导致`FullName`属性也包含这些字符。

有没有什么办法解决这一问题？是什么触发了这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:15:03.423

打开 xlsx 文件会导致 Excel 创建一个以“~$”开头的同名隐藏文件。因此，如果在您检索目录内容时打开了这些 Excel 文件之一，您还将获得临时文件。

添加一个排除隐藏文件的过滤器，您的问题就解决了。

例子：

```
FileAttributes attributes = File.GetAttributes(path);

if((attributes & FileAttributes.Hidden) == FileAttributes.Hidden)
{
    // Hidden file, just skip it
} 
```

来自[http://msdn.microsoft.com/en-us/library/system.io.file.getattributes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.getattributes.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:15:14.383

`~$`表示该文件是 Microsoft Office 使用的临时文件。有关其他信息，请参见[此处](https://superuser.com/questions/405257/what-type-of-file-is-file)。

# livecode - 如何将数据保存在基于卡片的数据库堆栈中？

> ID：16217048
> 
> 赞同：1
> 
> 时间：2013-04-25T14:11:39.577
> 
> 标签：livecode, hypercard

我知道在 livecode 中你可以做一个数据库类型的应用程序 a) 作为 HyperCard 中的卡片集合或 b) 使用 SQLite 等 SQL 数据库引擎。在 Hypercard (a) 中，无需保存输入数据字段的数据。在 livecode 中，我需要使用“文件/保存”在开发模式下保存数据。如何将数据保存在基于卡片的独立应用程序中。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:19:58.100

是的，您可以使用“保存”命令将堆栈状态保存在代码中。但是，要在构建的独立环境中执行此操作，您需要通过使用启动器启动堆栈来进行一些争论，如本课所述：

[http://lessons.runrev.com/s/lessons/m/4071/l/17375-how-do-i-save-custom-properties-in-a-standalone-application](http://lessons.runrev.com/s/lessons/m/4071/l/17375-how-do-i-save-custom-properties-in-a-standalone-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T03:06:33.190

The executable is never saved. The usual way LC standalones manage this is to create a "splash" stack, which may have a use or not, be visible or not, and contain useful data. Or not. But it is the executable.

And then as many other stacks, substacks and other resources are attached to that stack file as might be required, and all these can be saved. The reason the executable is called a "splash" is because it might appear as an intro window at startup, only to be dismissed in order to get the real work done.

Craig Newman

# html - ul 列表不在屏幕中居中

> ID：16217052
> 
> 赞同：0
> 
> 时间：2013-04-25T14:11:48.757
> 
> 标签：html, css, html-lists, centering

我一直在网上四处寻找，看不出我的列表没有居中的原因

这是html

```
 <div id="footer" class="clear">   
            <ul id="nav2">
               <li><a href="#">CONTACT</a></li>
               <li><a href="https://www.facebook.com/tcstrathclyde?ref=ts&fref=ts"><img src="images/facebook.png" /></a></li>
               <li><a href="#">ABOUT US</a></li>
            </ul>
            <div class="copyright"> Copyright 2013 Teen Challenge Strathcylde. All rights reserved. Charity No: SC022209</div>
 </div><!--footer--> 
```

和CSS

```
#footer {
width: 960px; height: 100px;   margin: 0 auto;
}

#footer ul#nav2 {
list-style: none; margin: 18px auto;
}
#footer ul#nav2 li {
    float: left; padding: 0 0 0 30px; margin: 0 100px 0 0;
}

#footer ul#nav2 a img {position:relative; bottom:10px; }

        #footer ul#nav2 li:first child { background:none; } 

        #footer ul#nav2 li a {
            font-size: 30px; color: #222930; font-family:Tahoma, Geneva, sans-serif; text-decoration: none; 
        }

            #footer ul#nav2 li a:hover, #header ul#nav1 li a:active {
                color: #e9e9e9;
            } 
```

任何帮助将不胜感激谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:31:32.010

试试这个 CSS

```
#footer {
    width: 960px;
    height: 100px;
    margin: 0 auto;
    text-align: center;
}
#footer ul#nav2 {
    list-style: none;
    padding: 0;
}
#footer ul#nav2 li {
    display: inline-block;    
    margin: 0 10px;
    width: 150px;
}
#footer ul#nav2 a img {
    position:relative;
    bottom:10px;
}
#footer ul#nav2 li:first child {
    background:none;
}
#footer ul#nav2 li a {
    font-size: 30px;
    color: #222930;
    font-family:Tahoma, Geneva, sans-serif;
    text-decoration: none;
}
#footer ul#nav2 li a:hover, #header ul#nav1 li a:active {
    color: #e9e9e9;
} 
```

**[例子](http://fiddle.jshell.net/TvtYn/2/)**

# webserver - 由于声明性结构，Vagrant Puppet 配置失败

> ID：16217055
> 
> 赞同：0
> 
> 时间：2013-04-25T14:11:52.703
> 
> 标签：webserver, virtualbox, xdebug, puppet, vagrant

正如标题所述，我在成功配置盒子时遇到问题。我正在尝试安装一个开发盒（Apache、PHP 和 XDebug）

一切正常，除了我必须包含 XDebug 功能，因为它没有在原始 REPO 中提供，我通过 Example42/puppet-yum REPO 管理器安装它。

在这部分有一个错误，因为当我尝试从头开始构建盒子时，我得到了包 php-perl-xdebug 不可用的错误。这是因为 repo 尚未初始化。我已经尝试了几种方法来确保它会在执行任何其他操作之前更新 repo。通过 -> 引用类，但这会在循环块中产生。通过 Google 并没有产生任何实际结果来确保某些命令在其他命令之前运行。

我相信使用“必需”命令可以做到这一点，但我找不到使用它的方法。旁注：我们主要使用 example42 模块进行构建。

提前致谢：

以下是应用程序服务的 default.pp 清单。

**默认.pp**

```
Exec { path => [ "/bin/", "/sbin/" , "/usr/bin/", "/usr/sbin/" ] }

class system-setup {
   service { "iptables":
        ensure => stopped,
    }
}

class php-setup{
    php::module { "pdo": }
    php::module { "gd": }
    # php::module { "fpm": }
    php::module { "mysql": }
    php::module { "soap": }
    # php::module { "zts": }
    # php::module { "pecl-apc": }

    php::module { "pecl-memcache": }
    php::module { "xml": }
    php::module{ "pecl-xdebug": }
}

class apache-vhost {
    apache::vhost { 'trunk.project.dev':
        docroot             => '/var/www/html/',
        port                => '80',
    }
}

class { 'yum':
  extrarepo => [ 'epel' ],
}

class { 'apache':   
    source => [ "puppet:///modules/apache/httpd.conf-project" , "puppet:///modules/apache/httpd.conf" ], 
}   

class { 'php' :
    source => ["/vagrant/files/php.ini", "puppet:///modules/php/php.ini"],
}

include php-setup
include apache-vhost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:55:42.520

你可以把它放在某个地方：

类['yum'] -> 包<||>

这是使用资源收集器来确保在安装任何软件包之前完成 Class yum。

# matlab - MATLAB组合不同维度的矩阵，填充对应索引的值

> ID：16217059
> 
> 赞同：2
> 
> 时间：2013-04-25T14:12:13.580
> 
> 标签：matlab, join, matrix, fill

我有两个矩阵，`22007x3`和`352x2`。每个中的第一列是一个索引，其中大部分（但不是全部）是共享的（即 x1 包含不在 x2 中的索引）。

我想将这两个矩阵组合成一个`22007x4`矩阵，以便在第 4 列中填充与两个原始矩阵中的特定索引相对应的值。

例如：

```
x1 =
    1   1   5
    1   2   4
    1   3   5
    2   1   1
    2   2   1
    2   3   2

x2 =
    1   15.5
    2   -5.6 
```

变成

```
x3 =
    1   1   5   15.5
    1   2   4   15.5
    1   3   5   15.5
    2   1   1   -5.6
    2   2   1   -5.6
    2   3   2   -5.6 
```

我已经尝试过类似的东西

```
x3(1:numel(x1),1:3)=x1;
x3(1:numel(x2(:,2)),4)=x2(:,2); 
```

但首先我得到了错误

```
??? Subscripted assignment dimension mismatch. 
```

然后我想不出我会填满剩下的部分。

重要的一点是，我的数据中每个索引的行数不一定相等。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:30:12.093

从[这里接受 Amro 的答案](https://stackoverflow.com/questions/9547550/matlab-sql-style-join-operation)

```
[~, loc] = ismember(x1(:,1), x2(:,1)); 
```

ismember 的第二个参数返回 x2 中可以找到 x1 的每个元素的位置（如果找不到，则返回 0）

```
a = x2(loc(loc > 0), 2); 
```

使用这些行索引获取相关值，但不包括零，因此是`loc > 0`掩码。您必须将它们排除为 1，它们不在 x2 和 2 中，您无法使用`0`.

在 x1 的末尾创建一个新的默认值列。我认为`NaN()`可能更好，但`zeros()`也很好

```
newCol = NaN(size(x1,1),1) 
```

现在使用逻辑索引来获取非零元素的位置并放入`a`这些位置

```
newCol(loc > 0) = a 
```

最后贴到最后

```
x3 = [x1, newCol] 
```

# java - 从Java执行时Psql脚本未提交

> ID：16217060
> 
> 赞同：0
> 
> 时间：2013-04-25T14:12:14.673
> 
> 标签：java, cmd, psql, sqltransaction

我有一个执行 psql 命令以导入 SQL 脚本文件的 .bat 文件。当我从 Windows 命令行执行 .bat 文件时，它可以正确执行。但是当我从 Java（使用 ProcessBuilder）调用 .bat 文件时，脚本并没有结束。我没有收到任何错误，在 InputStream 中没有，ErrorStream 甚至在 DB（Postgresql）日志中也没有。

```
ArrayList<String> cmdArgs2 = new ArrayList<String>();
        cmdArgs2.add("sql2dbs.bat");

        ProcessBuilder pb2 = new ProcessBuilder(cmdArgs2);
        logger.info(pb2.command().toString());

        Map<String, String> env = pb2.environment();
        env.put("PGPASSWORD", "user");

        Process p2 = pb2.start();

        BufferedReader stdError2 = new BufferedReader(new InputStreamReader(p2.getErrorStream()));
        String s;
        while ((s = stdError2.readLine()) != null) {
            logger.info(s);
        }

        BufferedReader stdIn = new BufferedReader(new InputStreamReader(p2.getInputStream()));
        while ((s = stdIn.readLine()) != null) {
            logger.info(s);
        }

        p2.waitFor(); 
```

SQL 脚本很长，所以我不添加它。该脚本的底部确实有一个 COMMIT 语句。

有任何想法吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T10:40:37.880

不要运行`psql`用于将数据导入数据库的批处理脚本。`psql`用于交互使用，而不是（ab）用作 API。您可以通过 JDBC 直接在 Java 中执行此操作，例如参见[此处](https://stackoverflow.com/a/6960503/1630171)或[此处](https://stackoverflow.com/a/11200576/1630171)。与脱壳相比，使用 JDBC 还将为您提供更好的控制和调试选项。

# bash - 在子进程中更改环境变量 - bash

> ID：16217064
> 
> 赞同：3
> 
> 时间：2013-04-25T14:12:30.423
> 
> 标签：bash, environment-variables

嗨，我有以下示例。a.sh 脚本设置我可以在 b.sh（子）脚本中看到的环境变量，但是如果我更改它，我仍然在 a.sh 中有旧值

灰

```
#!/bin/bash

export A=1
./b.sh
echo parent $A 
```

b.sh

```
#!/bin/bash

echo child $A
A=2
export A
echo child $A 
```

测试：

```
bash-3.00$ ./a.sh
child 1

child 2

parent 1

child 1

child 2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:40:55.863

在`a.sh`做`source b.sh`而不是`./b.sh`

`a.sh`应该是这样的：

```
#!/bin/bash
export A=1
source b.sh
echo parent "$A" 
```

# android - 尝试在 AsyncTask 的 onPostExecute 方法中创建意图

> ID：16217066
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:12:32.880
> 
> 标签：android

我正在使用一项`AsyncTask`任务从 Web 服务器加载响应。根据响应是什么，我想启动一个新的 Activity 或显示一条错误消息。现在我正试图在类的`onPostExecute`方法中做到这一点`AsyncTask`。当我尝试创建 Intent 时，我得到一个*Constructor is undefined错误。*

这是我的代码：

```
protected void onPostExecute(String result) {  
      // code thate xcicutes after thread
      if ( result.contains("OK"))
        {
            PreSave();

            Intent I;

            if (ChatOrGame==1)
               i = new Intent(cGlobals.mParent );
            else
                i = new Intent(cGlobals.mParent);

            startActivity(i);       
        }
        else
        {
            if (bInternetError==false)
            {
            new AlertDialog.Builder( cGlobals.mParent)
            .setTitle("Log In Error")
            .setMessage( "User name or password" )
            .setNeutralButton("close",new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dlg, int i)
                {

                }} ).show();            

            }
        }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:23:53.037

您需要将`Activity`要开始的内容添加到您的`Intent`

```
i = new Intent(cGlobals.mParent, NextActivity.class); 
```

[Intent](http://developer.android.com/reference/android/content/Intent.html)没有 a`Constructor`只接受 a`Context`所以你得到这个错误。您需要添加`Activity`开始，以便`Intent`知道如何处理这些信息。这当然是假设那`cGlobals.mParent`是 a `context`，我相信这是你在其他地方使用它的方式以及你给它的名字。你的意思`Intent I`是`Intent i`我认为这是一个错字，或者它甚至不应该编译

**注意**正如@Trinimon 在评论中所说，请确保`Activity`您开始的任何内容都在`Intent`中定义，`manifest`否则您将遇到更多问题

# c# - 区分主磁贴与应用程序列表 wp8

> ID：16217067
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:12:34.863
> 
> 标签：c#, windows-phone-7

我正在为 WP8 开发一个应用程序。我想知道如何通过单击用户创建的应用程序列表或主磁贴来确定我的应用程序是否进入前台。我想知道有多少用户创建了主磁贴.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:38:23.383

You can add a navigation parameter to your secondary tile like this :

```
 string tileParameter = "Param=myParameter"; 
        ShellTile tile = CheckIfTileExist(tileParameter); 
        if (tile == null) 
        { 
            StandardTileData secondaryTile = new StandardTileData 
            { 
                Title = tileParameter, 
                BackgroundImage = new Uri("Background-Secondary.png", UriKind.Relative), 
                Count = 2, 
                BackContent = "Secondary Tile Test" 

            }; 
            ShellTile.Create(new Uri("/MainPage.xaml?" + tileParameter, UriKind.Relative), secondaryTile); 
        } 
```

and then, in your MainPage's OnNavigatedTo event, you can get this parameter with something like this:

```
 if (this.NavigationContext.QueryString.ContainsKey("Param")) 
        { 
            string param = this.NavigationContext.QueryString["Param"];//Get "Param" this query string. 
            //Do whatever you want with this parameter
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:36:11.907

您的 URI 中有查询字符串吗？如果是这样，您可以检查 NavigationContext.QueryString 并查看是否设置了辅助磁贴中使用的参数。

# regex - 在 Emacs replace-regexp 中指定匹配数字字符串的语法？

> ID：16217069
> 
> 赞同：0
> 
> 时间：2013-04-25T14:12:37.440
> 
> 标签：regex, emacs

在 Emacs 中，我试图在数字实例前面加上一个文本字符串，这样每个数字`</a>1</h2>`都会变成`</a>Chapter 1</h2>`等等。

我可以使用这个正则表达式找到匹配项：`</a>\([0-9]+\)`

如何在我的替换字符串中指定现有的匹配数字，而不是整个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:18:10.623

您已正确使用`\(`and`\)`将数字包含在捕获组中，您可以在正则表达式中将其写入替换字符串`\1`（因为这是第一个捕获组）。所以你的替换字符串将是

```
</a>Chapter \1 
```

# c# - “ReorderListBoxItem 必须有一个 DragHandle ContentPresenter 部分。” 问题

> ID：16217073
> 
> 赞同：4
> 
> 时间：2013-04-25T14:12:48.570
> 
> 标签：c#, silverlight, windows-phone-8

我们正在开发 Windows Phone 8 应用程序并尝试使用[重新排序列表框控件](http://blogs.msdn.com/b/jasongin/archive/2011/01/03/wp7-reorderlistbox-improvements-rearrange-animations-and-more.aspx)。对于我们应用程序的早期版本，它可以正常工作。但是现在，当我将集合绑定到重新排序列表框时，我遇到了异常`"System.InvalidOperationException"`

详细地说，我看到了这条消息。

> > System.InvalidOperationException：ReorderListBoxItem 必须有 DragHandleContentPresenter 部分。在 ReorderListBoxDemo.ReorderListBoxItem.OnApplyTemplate()}

如果有人看到这样的问题或对此有所了解 - 请提供帮助。我们使用 MVVM 灯光并通过 ViewModel 绑定数据。但是原始绑定根本不起作用。对不起我的俄语英语。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T12:50:09.863

该控件需要具有 Property="DragHandleTemplate" 的 Setter。因此，只需从控件的 Codeplex 页面复制基本[ItemContainerStyle](http://reorderlistbox.codeplex.com/SourceControl/latest#main/Demo/MainPage.xaml)并根据需要对其进行扩展：

```
<rlb:ReorderListBox.ItemContainerStyle>
    <Style
        TargetType="rlb:ReorderListBoxItem">
        <Setter
            Property="DragHandleTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Canvas
                        Width="52"
                        Height="48"
                        Background="Transparent">
                        <Polygon
                            Fill="Gray"
                            Points="16,20 4,20 22,4 22,44 16,44" />
                        <Polygon
                            Fill="Gray"
                            Points="32,28 44,28 26,44 26,4 32,4" />
                    </Canvas>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</rlb:ReorderListBox.ItemContainerStyle> 
```

# java - Primefaces 聊天应用程序 - web.xml 发现以元素开头的无效内容

> ID：16217076
> 
> 赞同：4
> 
> 时间：2013-04-25T14:12:52.203
> 
> 标签：java, primefaces, chat, tomcat7, web.xml

我想在服务器上实现 PF 3.5[聊天应用程序](http://www.primefaces.org/showcase/push/chat.jsf)`tomcat 7`。我已经添加了依赖项：

```
<dependency>
    <groupId>org.atmosphere</groupId>
    <artifactId>atmosphere-runtime</artifactId>
    <version>1.0.1</version>
</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.1</version>
</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-simple</artifactId>
    <version>1.7.1</version>
</dependency> 
```

但是，当我实现它时`web.xml`：

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5"> 
```

...

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcasterCacheClass</param-name>
        <param-value>org.atmosphere.cache.HeaderBroadcasterCache</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcasterClass</param-name>
        <param-value>org.atmosphere.cpr.DefaultBroadcaster</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcastFilterClasses</param-name>
        <param-value>org.atmosphere.client.TrackMessageSizeFilter</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.sessionSupport</param-name>
        <param-value>true</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping> 
```

作为例外，我得到：

```
cvc-complex-type.2.4.a: Invalid content was found starting with element 'init-param'. One of '{"http://java.sun.com/
 xml/ns/javaee":run-as, "http://java.sun.com/xml/ns/javaee":security-role-ref}' is expected. 
```

`<init-param>`顺便说一句，我在标签处得到了异常。

我真的很感谢你的回答！

**更新**

当我写下这个时，我得到了同样的结果：

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    <init-param>
        <param-name>channels</param-name>
        <param-value>chat,counter</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/prime-push/*</url-pattern>
</servlet-mapping> 
```

我也在`<init-param>`标签上得到了期望

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-20T13:45:38.180

根据[模式](http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd)，顺序很重要。所以`<load-on-startup/>`元素应该在 `<init-param/>`元素之后。

例如。

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <init-param>
        <param-name>channels</param-name>
        <param-value>chat,counter</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-05T08:58:53.047

事实上，订单很重要，对于 PF Push Servlet 和氛围，这个设置是一个很好的起点：

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <init-param>
    <param-name>org.atmosphere.cpr.broadcasterCacheClass</param-name>
    <param-value>org.atmosphere.cache.UUIDBroadcasterCache</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcaster.maxProcessingThreads</param-name>
        <param-value>15</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcaster.maxAsyncWriteThreads</param-name>
        <param-value>15</param-value>
    </init-param>
    <load-on-startup>0</load-on-startup>
    <async-supported>true</async-supported>
</servlet>
```

# jquery - jQuery 中的切换类

> ID：16217079
> 
> 赞同：0
> 
> 时间：2013-04-25T14:13:00.127
> 
> 标签：jquery, toggleclass

我无法让 toggleClass 工作，这是一个 jsFiddle：http: [//jsfiddle.net/edddotcom/V6VHX/](http://jsfiddle.net/edddotcom/V6VHX/)

单击图像应该通过删除 .mid 类来使文本更改颜色，但目前它没有做任何事情。

这是JavaScript：

```
$(document).ready(function(){
    $("#image").click(function(){
        $("p").toggleClass(".mid");
    });
}); 
```

和 HTML

```
<div class="container">
    <div class="row">
        <p>HELLO</p>
        <p class="mid">HELLO</p>
        <img id="image" src="http://icons.iconarchive.com/icons/artua/mac/512/Earth-icon.png"/>
    </div>   
</div> 
```

css 基本上只是说 .mid 类是红色文本，如果需要，请参阅 jsFiddle，

我错过了什么/做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:14:40.767

只需删除“。” 前缀“中”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:14:35.797

试试这个：

```
$("#image").click(function () {
    $(this).prev('p').toggleClass("mid");
}); 
```

1.  不需要`.`在 toggleClass 方法里面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:15:28.717

使用 toggleClass，类名前的前导点不是必需的。

```
$("p").toggleClass("mid"); 
```

# qt - 我需要将 ComponetA 信号连接到另一个 ComponentB 的方法

> ID：16217083
> 
> 赞同：0
> 
> 时间：2013-04-25T14:13:12.710
> 
> 标签：qt, qml, qt-quick

**当单击ComponentA**的按钮时，我需要动态创建**ComponentC** ，并且必须在 ComponentB 中创建**ComponentC** **，**该 ComponentB不能通过**ComponentA**的 id 访问。

 ******那么如何使用 QML 来实现呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:24:14.597

信号可以返回被调用槽返回的对象：

```
int B::slot() {
  return 12;
}

void A::test() {
  connect( this, SIGNAL(sig()), objectB, SLOT(slot());
  int i = emit sig(); // i should be equal to 12
} 
```

但是，我不知道这是否是预期的行为......******

# java - Android JavaScript Bridge - 触发事件

> ID：16217086
> 
> 赞同：0
> 
> 时间：2013-04-25T14:13:13.893
> 
> 标签：java, javascript, android, webview, android-jsinterface

可能是一个简单的问题，我可以从 JavaScript 调用本机函数，例如：

`Android.setVolume(0.7)`

但是，我不知道如何触发（来自Android/Java），或处理不是由用户交互引起的事件（JS），例如，当用户的网络状态发生变化时提醒JS，电池电量低于某个点等等

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:21:05.950

> 但是，我不知道如何触发（来自Android/Java），或处理不是由用户交互引起的事件（JS），例如，当用户的网络状态发生变化时提醒JS，电池电量低于某个点等等

与您链接到的答案一样，使用`loadUrl()`URL `javascript:`，类似于书签的工作方式。

> 答案已经有一年多了，被贴上了黑客的标签，这仍然是最好的方法吗？

我不完全清楚为什么该答案的作者将其描述为黑客。当然，它是可行的并且被使用得相当多。

# javascript - 这种 javascript 模式是否鼓励内存泄漏？

> ID：16217098
> 
> 赞同：1
> 
> 时间：2013-04-25T14:13:51.670
> 
> 标签：javascript, jquery

我发现自己对 javascript 垃圾收集以及如何最好地鼓励它感到很困惑。

我想知道的是与特定模式有关。我对模式本身是否被认为是一个好主意或坏主意不感兴趣，我只是对浏览器垃圾收集器将如何响应感兴趣，即引用会被释放和收集还是会导致泄漏。

想象一下这种模式：

```
 TEST = {     
                init : function(){                        
                      this.cache = {
                           element : $('#element')
                      };
                },
                func1 : function(){
                       this.cache.element.show();                     
                },
                func2 : function(){                                            
                       TEST.cache.element.show(); 
                },
                func3 : function(){
                       var self = this;                      
                       self.cache.element.show(); 
                },
                func4 : function(){
                       var element = this.cache.element;
                       element.show();
                }
                func5 : function(){
                        this.auxfunc(this.cache.element);
                }
                auxfunc1 : function(el){
                         el.show();
                }
                func6 : function(){
                       var el = getElement();
                       el.show();
                }
                getElement : function(){
                       return this.cache.element;
                }
    } 
```

现在想象一下页面加载`TEST.init()`被调用；

然后在不同的时间调用各种函数。

我想知道的是，在初始化时缓存元素或对象或其他任何东西，并以上述方式在应用程序的整个生命周期中引用它们，是否会对浏览器的垃圾收集器产生积极或消极的影响。

有什么区别吗？哪种方法最能鼓励垃圾收集？它们会导致泄漏吗？有没有循环引用？如果是在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:19:16.080

此代码本身不应导致任何内存泄漏。尤其是在现代浏览器中。它只是一个对象，就像您在任何脚本中都有大量其他对象一样。这完全取决于您引用它的位置、方式和时间。

基本规则是，只要在代码中的任何位置（直接/通过变量或间接/通过闭包访问范围）不再引用对象时，GC 将标记并滑动。
如果您使用上面的代码，然后将其他内容分配给`TEST`它引用的对象文字，则如果没有其他变量引用原始对象，则它可能会被 GC'ed。

当然，预测 JS 中的内存泄漏是一门不精确的科学。根据我的经验，它们并不像某些人让你相信的那么普遍。Firebug、Chrome 的控制台（分析器）和 IE 调试器让您一路走好。

前段时间我对这件事做了更多的研究[，导致了这个问题](https://stackoverflow.com/questions/11186750/memory-leak-risk-in-javascript-closures)。也许一些链接和发现对你有帮助......

如果不是，这里有几个技巧可以避免明显的泄漏：

*   不要使用全局变量（它们实际上不会永久泄漏内存，但只要您的脚本运行就这样做）。
*   不要将事件处理程序附加到全局对象（`window.onload`==> 在 IE <9 中泄漏 mem，因为全局对象*永远不会完全卸载*，因此事件处理程序不是 GC'ed）
*   只需将您的脚本包装在一个巨大的 IIFE 中，并尽可能使用严​​格模式。这样，您创建了一个可以在卸载时完全 GC 的作用域。
*   测试，测试，再测试。***不要相信你读过的关于这个主题的每一篇博文！如果去年有什么问题，那么今天就不一定了。***当你读到这篇文章时，这个答案可能不再是 100% 准确，或者因为就在今天早上 JS GC'ing 的一些奇迹补丁是由 erm...Paris Hilton 或其他一些外星生命形式编写的。

哦，回答你的评论中的问题：*“但我担心的是，如果每次我调用 this.cache.element，它是否会在原始缓存引用的顶部的函数范围内创建一个新引用，这不会是垃圾集？”*
答案是不。因为`this`将引用该`TEST`对象，并且该`init`函数为该对象分配了一个 property `cahche`，所以它本身就是另一个对象字面量，其中 1 个属性引用了一个 jQ 对象。该属性 ( `cache`) 以及通过它可访问的所有内容将一直保存在内存中，直到您选择`delete TEST.cache`或`delete TEST`。如果您要创建`var cahce = {...};`该对象，那么当`ini`函数返回，因为变量不能超过其范围，除非您使用闭包并间接公开某些变量。

# multithreading - 使用本地编程语言进行基于代理的编程

> ID：16217099
> 
> 赞同：0
> 
> 时间：2013-04-25T14:13:53.073
> 
> 标签：multithreading, native, user-agent, agents-jade, agent-based-modeling

所以基本上我有兴趣建立一个基于代理的战场模拟。

基于代理的模型有很多框架，例如 JADE 等。但是由于某些限制，我只能使用本地编程语言（例如 C++ 或 Java）来实现它，而没有任何框架或库。

我在谷歌搜索过，但似乎找不到任何关于面向代理编程的好的教程。

我应该从哪里开始？或者有没有针对基于代理的编程的完整初学者的教程？

THX b4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T09:53:43.887

看看这个框架： [Relacy](https://sourceforge.net/projects/relacy/?source=navbar)， [SObjectizer](https://sourceforge.net/projects/sobjectizer/?source=directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T02:16:45.663

初学者可能应该从模板模型开始。
这是一个使用 Python 的教程：http: [//jasss.soc.surrey.ac.uk/14/2/5.html](http://jasss.soc.surrey.ac.uk/14/2/5.html) 这是一个使用 Repast 的教程： [http ://code.google.com/p/repast-demos /wiki/StupidModel](http://code.google.com/p/repast-demos/wiki/StupidModel)

hth。

# matlab - 我在哪里可以找到有关如何创建用于微控制器的低存储消耗的 Matlab 代码的指南？

> ID：16217104
> 
> 赞同：1
> 
> 时间：2013-04-25T14:14:02.743
> 
> 标签：matlab, optimization, storage, microcontroller

由于我们闪存映像的 Autosar 部分使用了我们在 micro 上的大部分存储资源，我们还需要优化我们的 Matlab 代码。是否有清单或指南来说明如何有效地设计代码以在微控制器上使用？谢谢你的任何提示。沃尔克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:00:20.303

您可以查看 Mathworks 文章：[使用 Real-Time Workshop 的 MATLAB 到 C 工作流的最佳实践](http://www.mathworks.com/company/newsletters/articles/best-practices-for-a-matlab-to-c-workflow-using-real-time-workshop.html)。

# aes - DESfire EV1 AES 认证无回复

> ID：16217105
> 
> 赞同：2
> 
> 时间：2013-04-25T14:14:07.277
> 
> 标签：aes, nfc, mifare

我正在尝试使用 DESfire EV1 卡进行身份验证，但该卡没有回复。在尝试进行身份验证之前，我刚刚格式化了卡并创建了一个新应用程序，选择了新应用程序并且需要在创建文件之前进行身份验证。

这是从格式到失败的通信：

```
Format card to start over
bsp_mifare --> 0b 01 90 fc 00 00 00 (tranceive, 56 bits)
bsp_mifare <-- fa 01 01 (24 bits)
bsp_mifare --> fa 01 01 (tranceive, 24 bits)
bsp_mifare <-- fa 01 01 (24 bits)
bsp_mifare --> fa 01 01 (tranceive, 24 bits)
bsp_mifare <-- fa 01 01 (24 bits)
bsp_mifare --> fa 01 01 (tranceive, 24 bits)
bsp_mifare <-- fa 01 01 (24 bits)
bsp_mifare --> fa 01 01 (tranceive, 24 bits)
bsp_mifare <-- fa 01 01 (24 bits)
bsp_mifare --> fa 01 01 (tranceive, 24 bits)
bsp_mifare <-- 0b 01 91 00 (32 bits)
bsp_mifare --> 0a 01 90 0a 00 00 01 00 00 (tranceive, 72 bits)
bsp_mifare <-- 0a 01 ad 51 73 29 dc 6e 33 cf 91 af (96 bits)
bsp_mifare --> 0b 01 90 af 00 00 10 2e 4a 13 9c a9 d4 23 61 25 28 48 ce 2c 73 2c 70 00 (tranceive, 192 bits)
bsp_mifare <-- 0b 01 fc 25 2e 4f 00 c3 86 e8 91 00 (96 bits)
Create application with default AES key
bsp_mifare --> 0a 01 90 ca 00 00 05 33 22 11 0b 84 00 (tranceive, 104 bits)
bsp_mifare <-- 0a 01 91 00 (32 bits)
Select application...
bsp_mifare --> 0b 01 90 5a 00 00 03 33 22 11 00 (tranceive, 88 bits)
bsp_mifare <-- 0b 01 91 00 (32 bits)
Authenticate...
bsp_mifare --> 0a 01 90 aa 00 00 01 00 00 (tranceive, 72 bits)
bsp_mifare <-- (0 bits)
bsp_mifare --> 0a 01 90 aa 00 00 01 00 00 (tranceive, 72 bits)
bsp_mifare <-- (0 bits)
Failed to authenticate with null AES key: 0x00 
```

如果我尝试使用无效的密钥编号（例如，当 num_keys 为 4 时为 6）进行身份验证，我会收到“没有这样的密钥”回复，因此卡至少部分理解了我的请求。

所以我的问题是，这个“身份验证开始”命令有什么问题：

```
bsp_mifare --> 0a 01 90 aa 00 00 01 00 00 (tranceive, 72 bits) 
```

（显示的数据是原始数据，包括换行。实际的本机命令是“aa 00”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T07:44:13.733

事实证明这是一个硬件故障：AES 命令需要比 DES/Crypto1 更多的功率（多 50%），而天线无法在我测试的读取范围内提供这些功率。将卡移近可以解决问题。

# ckeditor - CKEditor - 同一类的多个实例

> ID：16217109
> 
> 赞同：1
> 
> 时间：2013-04-25T14:14:22.077
> 
> 标签：ckeditor

我有一个现有的应用程序，它有几个带有类的 div。

我想要的是让这些中的每一个都有[CKEditor](http://ckeditor.com/)可供他们使用，即

```
<div contenteditable="true" class="myContent">some Text</div>
<div contenteditable="true" class="myContent">some Text</div>
<div contenteditable="true" class="myContent">Some Text</div> 
```

这可以通过没有任何 . 来实现`CKEDITOR.XX`，但问题是我想为 div 设置一个自定义菜单。

你可以在课堂上做到这一点吗？

我只见过：HTML`var editor = CKEDITOR.inline( 'editable' );`在哪里`editable``ID`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:00:22.293

1.  您可以修改`config.js`放置在主 CKEditor 目录中的文件，在那里设置配置（适用于所有编辑器）。
2.  或者您可以使用`CKEDITOR.inline`which 接受 HTML 元素**或**id/name 作为[文档](http://docs.ckeditor.com/#!/api/CKEDITOR-method-inline)所说的。

    ```
    var elements = document.getElementsByClassName( 'myContent' );
    for ( var i = 0; i < elements.length; ++i ) {
        CKEDITOR.inline( elements[ i ], { /* config for this instance */ } );
    } 
    ```

    虽然这不适用于 IE7&8，但使用 jQuery 你可以：

    ```
    var elements = $( '.myContent' );
    elements.each( function() {
        CKEDITOR.inline( this, { ... } );
    } ); 
    ```

3.  第三个选项是`CKEDITOR.config.toolbarGroups`全局覆盖。

# javascript - 如何使用 window.open() 方法将一大块 html 附加到加载的 html 页面

> ID：16217112
> 
> 赞同：2
> 
> 时间：2013-04-25T14:14:31.037
> 
> 标签：javascript, jquery

我正在尝试通过 window.open() 方法将一大块 html 附加到加载的 html 页面。对于此示例，html 块将是一个字符串。

```
var w = window.open('mypage.html, 'windowname', 'scrollbars=yes,location=no,toolbar=no,status=no,width=500,height=550,left=300,top=50');
var htmlChunk = '<span>bla bla</span>'
 $(w.document.body).append( htmlChunk ); 
```

$(w.document.body) 似乎无法访问弹出窗口内 mypage.html 上的 body 标记。

我也尝试使用现成的方法。

```
 $(w.document.body).ready(function(){
         $(this).find('body').append(htmlChunk);
     }); 
```

这不起作用，或者将其附加到弹出窗口下方的窗口中。

在这里要清楚一点，我不想直接将任何 JS 添加到 mypage.html 中。我需要能够访问弹出 mypage.html 正文标记并将一大块 html 附加到该标记。我的设置，我在 main.html 页面中有一个 js 文件。在 main.html 页面中，我有一个链接，该链接上有一个在 js 文件中设置的点击事件。这是我调用弹出窗口的地方，我从 main.html 页面捕获一个 html 块以附加到弹出窗口内的 mypage.html。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:56:45.420

你可以这样做：

```
$(w).on("load", function(){
    $("body", w.document).append( htmlChunk );
}); 
```

onload 事件处理程序使代码等待新窗口创建完成，并使用`w.document`jQuery 的第二个参数设置新窗口的上下文。您不能从子窗口运行 jQuery 实例，因为它不加载 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:32:22.153

```
<script type="text/javascript">
    $(document).ready(function () {
        var output = "data";
        var OpenWindow = window.open("mypage.html", "mywin", '');
        OpenWindow.dataFromParent = output; // dataFromParent is a variable in mypage.html
        OpenWindow.init();
    });
</script> 
```

在 mypage.html 中：

```
<script type="text/javascript">
    var dataFromParent;    
    function init() {
        document.write(dataFromParent);
    }
</script> 
```

如果您需要在新窗口的 DOM 准备好后运行代码，请尝试以下操作：

```
var OpenWindow = window.open("mypage.html", "mywin", '');
$(OpenWindow.document.body).ready(function() {
    $(OpenWindow.document.body).append('<p>hi</p>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:21:50.163

如果我没有弄错 jQuery 中的 $()-operator 应该在页面“准备好”时运行。所以你可以试着简化你的代码吗？

我会这样做：

```
$(function(){
    $("body").append("This is the string you send in");
}); 
```

# c# - 是否可以使用数据注释验证字符串属性以查看它是否是有效日期？

> ID：16217121
> 
> 赞同：1
> 
> 时间：2013-04-25T14:14:45.963
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework-4, entity-framework-5

我有一个实体的字符串属性。我通过表格将日期值放入其中，即“01/01/2000”。是否可以验证输入的数据是否有效，即：

假设英国日期格式如下：

“32/01/2000”无效，“31/01/2000”有效，“test”无效

我的 POCO EF 属性代码如下所示：

```
[System.ComponentModel.DataAnnotations.DataType(System.ComponentModel.DataAnnotations.DataType.Date, ErrorMessage = @"Not a valid date")]

public virtual string DateOfBirth 
```

这个工作应该......还是......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:17:35.947

您可以使用注释，但至少可以说这`RegularExpression`会让事情变得**混乱。**您最好将该属性转换为`DateTime`.

以下是使用`RegularExpression`（**保护你的眼睛**）的方法：

```
[RegularExpression("@(^((((0[1-9])|([1-2][0-9])|(3[0-1]))|([1-9]))\x2F(((0[1-9])|(1[0-2]))|([1-9]))\x2F(([0-9]{2})|(((19)|([2]([0]{1})))([0-9]{2}))))$)", ErrorMessage = @"Not a valid date")]
public virtual string DateOfBirth { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:45:11.730

使用 DateTime Parse 方法之一？

```
DateTime dob;
try
{
  DateTime dob = DateTime.Parse(myString, ...)
}
catch
{
  // handle error...
}
// string entered is valid 
```

# resources - 当它们浮动时，如何将 Window.Resources 中定义的 DataTemplates 应用于所有 Infragistics 窗格？

> ID：16217123
> 
> 赞同：0
> 
> 时间：2013-04-25T14:14:51.413
> 
> 标签：resources, infragistics, docking, datatemplate

我正在使用 Infragistics XamDockManager 来处理我的应用程序中的停靠和取消停靠面板。我定义了一个窗口，它使用 DockManager 来指定几个不同的窗格。我在 Window.Resources 中定义了几个 DataTemplate，以便在绑定到我的一个类时可以正确显示数据。

当所有窗格都停靠在应用程序中时，一切正常；但是，当我取消停靠一个窗格并且它处于浮动状态时，它就不能很好地工作了。如果数据已经被查看，那么它仍然可以正确显示，但是如果您通过添加到列表或选择不同的项目来更改数据，则不会根据 DataTemplate 呈现新信息。相反，它显示得好像我没有数据模板一样；它只显示完整的类名。

我发现在窗格取消停靠时应用 DataTemplates 的唯一方法是在资源部分中为每个单独的窗格指定数据模板，或者在 App.Xaml 资源部分中指定它们以使其适用于整个应用。不幸的是，我不希望将相同的模板应用于整个应用程序，因此后一个选项实际上不起作用。我已将 DataTemplates 放入他们自己的 ResourceDictionary 中，因此我可以从每个窗格中引用它，但是必须在每个我想使用它们的地方重述我想要使用的资源仍然非常令人讨厌。我认为将数据模板放在 Window.Resources 中应该会将它们应用于该文件中定义的所有其他 XAML。

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:49:37.920

好的，所以我一直在使用 Infragistics 支持并深入研究他们的文档，我找到了我想要的东西。

显然，当窗格浮动时，路由事件不会冒泡到主窗口，并且主窗口中定义的样式不会应用于浮动窗格中的元素（这包括数据模板）。

对于样式和数据模板，有两种可能的解决方案：

1.  正如我在问题中提到的，您可以将样式放在 App.xaml 中。
2.  您可以处理 ToolWindowLoaded 以设置样式或为浮动窗格附加事件处理程序。与 ToolWindowLoaded 结合使用时，您可以处理 ToolWindowUnloaded 事件以在窗格不再浮动时删除这些事件处理程序和样式。

# java - 如何通过 Java 以编程方式更改 linux (ubuntu) 上的时间和日期？

> ID：16217124
> 
> 赞同：1
> 
> 时间：2013-04-25T14:14:52.493
> 
> 标签：java, linux, datetime, ubuntu

有人知道如何通过 Java 以编程方式更改 linux (ubuntu) 上的系统时间和日期吗？我花了两天时间寻找这个决定，但还没有找到……我尝试使用 Date()、SimpleDateFormat() 和 Calendar，但它不起作用……有人帮我吗？谢谢：）

# javascript - 尝试使用面向对象的方法在 d3 中生成条形图

> ID：16217125
> 
> 赞同：0
> 
> 时间：2013-04-25T14:14:57.307
> 
> 标签：javascript, d3.js

plot我是 d3 的新手，对 javascript 也很陌生（我的大部分经验都是使用 python）。*我最近学习了 Scott Murray 所著的Interactive Data Visualization: for the web*一书中关于创建条形图的教程。我在完成本教程时没有任何问题，但他在书中采用的方法似乎主要是使用全局变量的程序化方法。我想创建一个类似的图表，但使用面向对象的方法能够封装变量并重用代码以在一个脚本中生成多个图表，而无需一遍又一遍地重复代码。这是我到目前为止没有任何运气的尝试：

```
 function d3Chart(id, data, width, height, padding) {
            this.id = id
            this.data = data
            this.width = width
            this.height = height
            this.padding = padding
            this.svg =  d3.select("body")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .attr("class", "chart")
                .attr("id". this.id);
            this.yscale = d3.scale.linear()
                .domain([0, d3.max(data)])
                .range([h - padding, padding])
            this.xscale = d3.scale.ordinal()
                .domain(d3.range(data.length))
                .rangeRoundBands([padding,w-padding], 0.05)
        };

        d3Chart.prototype.rect = function() {

            this.rect = this.svg.selectAll("rect")
                .data(this.data)
                .enter()
                .append("rect");
        }

        d3Chart.prototype.plot = function() {

             this.rect.attr("x", function(d, i) {
                    return this.xscale(i);
                })
                .attr("y", function (d) {
                    return this.yscale(d);
                })
                .attr("width", this.xscale.rangeBand())
                .attr("height", function(d) {
                    return this.height - this.padding - this.yscale(d);
                })
                .attr("fill", function(d) {
                    return "rgb(" + (100 - d) + ", 0, " + (d*10) + ")";
                });
            }

        var chart = new d3Chart("chart1", [5, 15, 10, 30, 20, 45, 15, 10, 5], 600, 400, 40);
        chart.rect()
        chart.plot() 
```

我确定我做错了一些非常简单的事情，有谁知道为什么这不起作用，或者这甚至是正确的方法吗？任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:29:27.933

你的代码的第一个问题是你有几个错别字，例如，`.`代替`,`和`h`代替`height`。第二个问题是您将所有内容都设为 的属性`this`，这在不同的上下文中会有所不同。例如，在

```
this.rect.attr("x", function(d, i) {
                return this.xscale(i);
            }) 
```

两者`this`指的是不同的对象——在第二种情况下`this`，是您正在操作的实际 DOM 元素，并且没有您所指的属性。

因此，您需要将所有内容保存到全局对象的属性中，例如`window`. 这当然并不比使用全局变量好多少。对于更面向对象的方法，您需要创建一个包含所有信息的对象并将其传递，或者实现您可以调用的方法。

我已将您的固定代码放在[此处](http://jsfiddle.net/9Lvk5/)的 jsfiddle 中。

# css - 溢出无法在我的网站上运行

> ID：16217130
> 
> 赞同：0
> 
> 时间：2013-04-25T14:15:10.230
> 
> 标签：css, html

在我的网站上，我基本上有这样的东西：

[http://jsfiddle.net/d5Mg4/1/](http://jsfiddle.net/d5Mg4/1/)。

问题是，虽然在这个小提琴中一切都按预期工作，但在我的网站上却不起作用。

我知道你们不喜欢直接链接到网站，我知道这是一个外语网站，但我不知道我还能做什么！

这是该页面的链接：[https](https://scyk.pl/Forums/Thread/Informatyka/5#post41) ://scyk.pl/Forums/Thread/Informatyka/5#post41 。

问题在于那个灰色框（`<code>`块），如您所见，其中有很多文本，它的`overflow`属性设置为`auto`，并且它的`display`属性设置为`block`。我什至尝试使用`height`和`width`属性，但我得到的唯一结果是`overflow-y`滚动条，我需要它们（特别`overflow-x`是一个）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:18:28.197

它适用于 Fiddle，因为“文本”都是一个单词并且不能被破坏（没有`word-break:break-all`），而在您的实时示例中，有单词要被包装。

尝试添加`white-space:nowrap;`

# javascript - Phonegap 应用程序通过 wifi 发送数据

> ID：16217134
> 
> 赞同：2
> 
> 时间：2013-04-25T14:15:19.383
> 
> 标签：javascript, html, cordova

我有一个关于应用程序的想法。这个应用程序只会通过 wifi 将数据从我的 ipad 发送到 iphone。我的问题是，是否可以使用**phonegap**制作通过 wifi 发送数据的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:43:31.643

假设您的设备在同一个 WiFi 网络上，这是可以实现的。如果没有可用的 WiFi AP，您将面临更大的困难，因为 iOS 设备无法创建 ad-hoc 网络。

看看[这个插件](http://rossmartindev.blogspot.com/2012/12/my-phonegap-bonjour-plugin-it-can.html)，它使用 Bonjour 来发现运行你应用程序的其他设备的 IP 地址，然后可以在设备之间建立 TCP 连接。

# c# - 当表单标签上的自动完成功能关闭时，如何为文本框启用自动完成功能？

> ID：16217137
> 
> 赞同：0
> 
> 时间：2013-04-25T14:15:27.480
> 
> 标签：c#, asp.net, .net, c#-4.0, autocomplete

我的母版页中有以下代码片段（abc.master）

> `<form id="Form1" method="post" runat="server" autocomplete="off">`

上面的母版页用于许多用户控件。在其中一个上，我想为其中一个文本框启用自动完成功能。我只希望该文本框显示用户过去输入的值。试图通过：

> `<asp:TextBox ID="Textbox1" Runat="server"autocomplete="on"></asp:TextBox>`

这对我不起作用。我也尝试过 AutoCompleteType 但这也不起作用。任何指针都将是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:20:50.553

设置`autocomplete`为。`on`_`form`

然后分别设置`autocomplete`控件。

```
<form id="Form1" method="post" runat="server" autocomplete="on">
   <!-- ON for this -->
   <asp:TextBox ID="Textbox1" runat="server" autocomplete="on"></asp:TextBox>

   <!-- OFF for this -->
   <asp:TextBox ID="Textbox2" runat="server" autocomplete="off"></asp:TextBox>
</form> 
```

**编辑 - 选项 2**

有一种使用jquery的方法

Setautocomplete of`form`和所有你想要的元素`on`然后将它添加到你的javascript

```
$(document).ready(function(){
  $('input:not([autocomplete])').attr("autocomplete","off");
}); 
```

试试这个小提琴[http://jsfiddle.net/CNk62/](http://jsfiddle.net/CNk62/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T07:00:41.360

您只能使用以下代码为调用用户控件的页面启用自动完成功能。 `Form.Attributes.Add("autocomplete", "on")`

您可以将此代码放在页面加载事件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T15:32:06.117

我想出的唯一答案是，它只能通过单独限制控件来完成。如果我们在页面上限制它，我们就无法在控件上启用它，因为页面属性接管了控件。

# maven-2 - DataNucleus：没有可用的“”类型的 StoreManager

> ID：16217140
> 
> 赞同：1
> 
> 时间：2013-04-25T14:15:29.970
> 
> 标签：maven-2, datanucleus

我正在使用 DataNucleus+Maven。以下是命令及其结果：

`mvn compile`:**构建成功**

`mvn clean install`:**构建成功**

`mvn -e datanucleus:enhance`:**构建成功**

但是，在`mvn -e datanucleus:schema-create`：

```
SEVERE: Error creating NucleusContext
There is no available StoreManager of type "". Make sure that you have put the relevant DataNucleus store plugin in your CLASSPATH and if defining a connection via JNDI or DataSource you also need to provide persistence property "datanucleus.storeManagerType"
org.datanucleus.exceptions.NucleusUserException: There is no available StoreManager of type "". Make sure that you have put the relevant DataNucleus store plugin in your CLASSPATH and if defining a connection via JNDI or DataSource you also need to provide persistence property "datanucleus.storeManagerType"
at org.datanucleus.NucleusContext.createStoreManagerForProperties(NucleusContext.java:1157)
at org.datanucleus.NucleusContext.initialise(NucleusContext.java:359)
at org.datanucleus.store.schema.SchemaTool.getNucleusContextForMode(SchemaTool.java:659)
at org.datanucleus.store.schema.SchemaTool.main(SchemaTool.java:271)

[ERROR] --------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] The DataNucleus tool org.datanucleus.store.schema.SchemaTool exited with a non-null exit code.
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: The DataNucleus tool org.datanucleus.store.schema.SchemaTool exited with a non-null exit code.
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: The DataNucleus tool org.datanucleus.store.schema.SchemaTool exited with a non-null exit code.
at org.datanucleus.maven.AbstractDataNucleusMojo.executeCommandLine(AbstractDataNucleusMojo.java:282)
at org.datanucleus.maven.AbstractSchemaToolMojo.executeSchemaTool(AbstractSchemaToolMojo.java:267)
at org.datanucleus.maven.AbstractSchemaToolMojo.executeDataNucleusTool(AbstractSchemaToolMojo.java:130)
at org.datanucleus.maven.AbstractDataNucleusMojo.execute(AbstractDataNucleusMojo.java:126)
at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
... 17 more 
```

我正在尝试使用 Maven 项目通过 JPA 实现 DataNucleus。Mysql 是后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T23:44:41.483

检查范围属性

```
<groupId>org.datanucleus</groupId>
<artifactId>datanucleus-rdbms</artifactId> 
```

并切换到`compile`（默认）而不是`runtime`.

# c - 按位：负输入值的不同行为

> ID：16217142
> 
> 赞同：4
> 
> 时间：2013-04-25T14:15:40.363
> 
> 标签：c, bit-manipulation

我正在参加 Coursera 上的硬件/软件界面课程，我相信你已经看到了其中的一些问题。

其中一项任务是确定 2 的补码整数 x 是否可以放入 n 位，仅使用运算符的子集等。我做得很好，但遇到了 2 种不同的方法，并用它们都打白板来理解他们完全。然后是混乱。

如果可能适合，该函数返回 1，否则返回 0。

# 方法一（正确输出）

```
int fooBar(int x, int n) {
    return !(((x << (32-n)) >> (32-n)) ^x);
} 
```

**以正整数执行**

```
fooBar(5,3)  == 0 
```

正确计算出 5 不能表示为 2 的补码 3 位整数。

**以负整数执行**

```
fooBar(-4,3) == 1 
```

正确计算出 -4 可以表示为 2 的补码 3 位整数。

**方法一分析**

```
x=5, n=3

00000000000000000000000000011101    32 - n == 29
10100000000000000000000000000000    x<<29
00000000000000000000000000000101    >> 29

00000000000000000000000000000101    5
             XOR
00000000000000000000000000000101    5
--------------------------------    
00000000000000000000000000000000    0

00000000000000000000000000000001   !0 == answer, 1. 
```

如您所见，这将返回 0，如在 3 位内不能将 5 表示为 2 的补码整数。

# 方法二（输出不正确）

```
int fooBar(int x, int n) {
    return !((x & ~(1 << (32-n))) ^x);
} 
```

**以正整数执行**

```
fooBar(5,3)  == 1 
```

假阳性。

**以负整数执行**

```
fooBar(-4,3) == 0 
```

假阴性。

**方法二分析**

```
x=5, n=3

00000000000000000000000000011101    32 - n == 29

11011111111111111111111111111111    ~(1<<29)
              AND
00000000000000000000000000000101    5
--------------------------------    
00000000000000000000000000000101    5

00000000000000000000000000000101    5
              XOR
00000000000000000000000000000101    5
--------------------------------
00000000000000000000000000000000    0

00000000000000000000000000000001   !0 == answer, 1. 
```

我正在编译：

```
gcc version 4.7.2 (Debian 4.7.2-5) 
```

**问题**

当分析表明在位级别上一切都相同时，我无法解释输出的差异，因此高度赞赏任何关于我可以在哪里为自己阐明这一点的提示/提示。

感谢您的时间！

sc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:28:42.980

在方法1中，你写

```
10100000000000000000000000000000    x<<29
00000000000000000000000000000101    >> 29 
```

但这不正确（请注意，您的分析意味着`fooBar(5,3) == 1`）。

首先，结果`5 << 29`导致带符号的 32 位（或更小）`int`s 溢出，这是未定义的行为。

接下来，如果移位创建了指示的位模式（如通常那样），则结果将为负数。

右移负整数是实现定义的，常见的是算术右移，它会符号扩展，这里导致

```
11111111111111111111111111111101    >> 29 
```

其中，当与 5 异或时给出非零结果（然后应用`!`产生 0）。

方法 2 根本不起作用，因为除了某些输入的未定义行为之外，它所做的只是检查是否`(32-n)`设置了 -th 位。

# javascript - Knockout observable subscribe 无法识别谷歌 Chrome 中日期输入的更改

> ID：16217143
> 
> 赞同：2
> 
> 时间：2013-04-25T14:15:41.973
> 
> 标签：javascript, html, google-chrome, knockout.js

Knockout.js 的奇怪问题，而它不会识别重置后选择的日期，但只能识别相同的日期。

要在我的 jsFiddle 中复制：http: [//jsfiddle.net/V5JCq/](http://jsfiddle.net/V5JCq/)请按照下列步骤操作：

1.  选择任何日期
2.  点击重置
3.  选择您在步骤 1 中选择的同一日期

如何？什么？为什么？

代码：

```
<input type="button" data-bind="click: resetDate" value="Reset">
<input data-bind="value : EstimatedDeliveryDate" type="date">
<span data-bind="html: selectedDate" />

var viewModel = {
    EstimatedDeliveryDate: ko.observable(),
    selectedDate: ko.observable()
};

viewModel.EstimatedDeliveryDate.subscribe(function (date) {
    viewModel.selectedDate("Date selected: " + date);
});

viewModel.resetDate = function () {
    viewModel.EstimatedDeliveryDate("");
};

ko.applyBindings(viewModel); 
```

**注意**：该问题仅适用于**Google Chrome** v20+，它带有用于 html5 日期输入控制的内置日期选择器。因此标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:24:36.093

不知道为什么，但在那种情况下它似乎没有触发`change`事件。一个简单的解决方法是指定您也想使用附加绑定来监听`input`事件，例如：`valueUpdate`

```
<input data-bind="value : EstimatedDeliveryDate, valueUpdate: 'input'" id="EstimatedDeliveryDate" name="EstimatedDeliveryDate" type="date"><span data-bind="html: selectedDate" /> 
```

[http://jsfiddle.net/rniemeyer/geggJ/](http://jsfiddle.net/rniemeyer/geggJ/)

# c# - WebServiceHost 在 .NET4.0 中的 GET 上不允许返回 405

> ID：16217148
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:15:53.620
> 
> 标签：c#, .net, web-services, .net-4.0, .net-3.5

当我为 .NET3.5 而不是在 4.0 中编译它时，这个简单的 WebserviceHost 可以工作我使用 URL http://mycomputer:8081/SVC/HelloWorld 从我的浏览器访问它

3.5 版本返回“Hello World!@<time>”字符串，但 4.0 版本返回 - 405 Not Allowed。

有谁知道为什么？

我在 Win7 SP1 64 位机器上使用 .net4.0

```
using System;
using System.Web.Services;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Collections.Generic;
using System.Runtime.Serialization;

[ServiceContract]
public interface IMyService
{
    [OperationContract]
    [WebGet(UriTemplate = "HelloWorld")]
    string HellWorld();
}

public class MyService : IMyService
{
    public string HellWorld()
    {
        return "Hello World! @ " + DateTime.Now.ToString("s");
    }
}

public class MyClass
{

    public static void Main()
    {
        string myComputer = "myComputer";
        string mySvcUri = "http://" + myComputer + ":8081/SVC";
        Uri[] baseAddresses = new Uri[] { new Uri(mySvcUri) };

        WebServiceHost hostVisits = new WebServiceHost(typeof(MyService), baseAddresses);
        BasicHttpBinding binding = new BasicHttpBinding();
        hostVisits.AddServiceEndpoint(typeof(IMyService), binding, "MyService");

        hostVisits.Open();

        Console.WriteLine("Service host started, press any key to exit");
        Console.ReadKey();
    }
} 
```

没有任何内容写入事件日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:28:05.270

只需删除这两行。它会起作用的。

```
BasicHttpBinding binding = new BasicHttpBinding();
hostVisits.AddServiceEndpoint(typeof(IMyService), binding, "MyService"); 
```

# c# - 有没有办法将第二类封装到初级类中？

> ID：16217151
> 
> 赞同：0
> 
> 时间：2013-04-25T14:15:55.287
> 
> 标签：c#, encapsulation, inner-classes

我想知道如何让初级类显示第二类的对象（保持第二类内部）？我正在使用 c#。

有点像包装纸。那是一件坏事？有人可以提供示例或链接吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:19:23.443

对此的简单模式是使用嵌套类，其属性可以公开您想要公开的内容。

```
public class MyClass
{
   private class SubClass
   {
      int someValue;
   }

   private SubClass innerClass = new SubClass();

   public int SubValue
   {
      get { return innerClass.someValue; }
      set { innerClass.someValue = value; }
   }
} 
```

[您可以通过使用internal 修饰符](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.100%29.aspx)来扩展此模式以有效地拥有许多私有子类。内部对象本质上对同一程序集中的代码是公共的，而在其他任何地方都是私有的。将包装器标记为公开，每个子标记为内部。请注意，这需要将包装类和所有子类放在它们自己的单独项目（即程序集）中。您可以（并且应该）在新项目的自己的文件中定义每个类。

```
public class WrapperClass
{
   private SubClass1 internalClass1 = new internalClass1();
   private SubClass2 internalClass2 = new internalClass2();

   public int SubValue1
   {
      get { return internalClass1.someValue; }
      set { internalClass1.someValue = value; }
   }

   public int SubValue2
   {
      get { return internalClass2.someValue; }
      set { internalClass2.someValue = value; }
   }
}

internal class SubClass1
{
   int someValue;
}

internal class SubClass2
{
   int someValue;
} 
```

# ssis - 执行 SQL 命令控制中的 DELETE

> ID：16217153
> 
> 赞同：1
> 
> 时间：2013-04-25T14:16:01.630
> 
> 标签：ssis

我的源表和目标表位于不同的服务器上，并且它们具有相同的架构。我需要以某种方式合并它们，如果某些记录只存在于目标中并且不存在于源中，那么它应该从目标中删除。我如何在 SSIS 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:25:29.637

尝试这个 ：

1.在对话框中拖动`Oledb command`并指定连接。`connection Manager`

2.在组件属性中写sql命令删除行

```
 Delete from yourTable
 where id = ? 
```

3.在列映射选项卡映射`?`中，输入列`ID`来自上一个组件

`Update 2`: 在 Oledb 源之后使用查找。配置查找

第一步：选择缓存模式。一般行数少的话选择full Cache

第 2 步：指定`Redirect rows to no match output`

第 3 步：指定连接并编写查询以从目标表中获取 Id（或连接列）

```
 Select ID from Destination 
```

第 4 步：使用目标表中的 ID 对源源进行 Macth，`ID`然后选择`Id`RHS 中列的复选框。

第 5 步：按照之前编写的步骤`Update`进行配置以删除行。确保在映射组件时从not 中`oledb command`选择 ID`Lookup``Source``OLEDB command`

# java - 尝试在 Mule 中创建动态 HTTP 端点时出现 java.lang.IllegalArgumentException

> ID：16217155
> 
> 赞同：0
> 
> 时间：2013-04-25T14:16:05.253
> 
> 标签：java, mule, esb, endpoint, flow

我有一个 HTTP 出站端点，它对特定的 URL 执行 GET 方法，事情是如果我在路径 URL 中添加一个变量，它将引发异常......我相信这不受支持。这是我的流程：

```
<flow name="ADMIN_GET_GRAPH_DATA" doc:name="ADMIN_GET_GRAPH_DATA">
        <ajax:servlet-inbound-endpoint channel="/admin/get_graph_data" responseTimeout="10000" doc:name="Ajax"/>
        <http:outbound-endpoint exchange-pattern="request-response" host="${graph.url}" port="8081" path="plot/get?graphName=#[json:graph_name]&amp;subgroup=hour&amp;width=100" method="GET" doc:name="HTTP" />
        <byte-array-to-string-transformer doc:name="Byte Array to String"/>
    </flow> 
```

这是异常堆栈跟踪

```
Caused by: java.lang.IllegalArgumentException:  Endpoint scheme must be compatible with the connector scheme. Connector is: "ajax-servlet", endpoint is "http://specific-url/plot/get?graphName=SPECIFIC_GRAPH_NAME&subgroup=hour&width=100" (java.lang.IllegalArgumentException). Message payload is of type: String
        at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:35)
        at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:43)
        at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43)
        at org.mule.processor.chain.DefaultMessageProcessorChain.doProcess(DefaultMessageProcessorChain.java:93)
        at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:66)
        at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)
        at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:43) 
```

尝试在 Google 中进行大量搜索，但我不知道出了什么问题或可以做些什么来使其正常工作。我什至看到在 MuleSoft 中创建了 JIRA 票证来解决这个问题，因为它不受“支持”但它应该在 Mule 3.2.1 之后修复（我使用的是 3.3.1）。

该 URL 已正确创建，即使您将其复制粘贴到浏览器中它也可以工作，但由于某些神秘的原因，Mule 不喜欢这样。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:35:24.290

尝试这个：

*   配置一个 HTTP 连接器，比如：`<http:connector name="httpConnector" />`
*   在动态 HTTP 端点中使用它：`<http:outbound-endpoint connector-ref="httpConnector" ...`

# php - A Sublime Text extension to show PHP warnings and errors

> ID：16217157
> 
> 赞同：12
> 
> 时间：2013-04-25T14:16:11.523
> 
> 标签：php, sublimetext2

I installed Sublime Text 2 recently, and I'm still adapting. I've already installed the Package Control and the most of PHP extensions. I wish a one that would underline the syntaxes errors, like Netbeans does. Is there a package that can do this?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-25T14:17:06.520

使用[SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)（它使用 来检查 PHP 语法`php -l`）。

# ios - ios: Updating UITableView inside AFNetworking success callback

> ID：16217158
> 
> 赞同：1
> 
> 时间：2013-04-25T14:16:10.130
> 
> 标签：ios, objective-c, objective-c-blocks

I'm trying to load data from API and show it inside a `UITableView`. I used `AFNetworking` for the network calls, but now I'm facing a problem: I can't access `myTableView` nor `self` inside the success block.

```
@property (weak, nonatomic) IBOutlet UITableView *myTableView; 
@property (nonatomic,retain) NSMutableArray *myDataSource;

@synthesize featuredProductsTableView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    NetworkManager *networkManager = [NetworkManager  getInstance];
    myDataSource = [NSMutableArray array]; 

    [networkManager getPath:@"example.com" parameters:nil success:^(AFHTTPRequestOperation *operation, id JSON) {
        [myDataSource addObjectsFromArray:JSON];

        [myTableView reloadData]; 

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"%@",error);
    }];
} 
```

Debugging the code shows that inside the block I can't access any of `self`, `myDataSource`, or `myTableView`.

How can I solve this issue?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:01:57.440

您可能应该使用：

```
__block myDataSource = [NSMutableArray array]; 
```

您还可以阅读：

[“__block”关键字是什么意思？](https://stackoverflow.com/questions/7080927/what-does-the-block-keyword-mean)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T14:45:53.387

在你的块之前声明这个：

```
__block typeof(self) this = self; 
```

至少，这将允许您`self`通过调用它从块内部到达`this`。

编辑：那不是要走的路，我的错误。请参阅[实现 API 时如何避免在块中捕获自我？](https://stackoverflow.com/questions/7853915/how-do-i-avoid-capturing-self-in-blocks-when-implementing-an-api)

# java - 找不到符号 - StringBuffer

> ID：16217161
> 
> 赞同：0
> 
> 时间：2013-04-25T14:16:21.700
> 
> 标签：java, stringbuffer

我对编程很陌生，可以使用一些帮助。我正在学习如何使用 StringBuffer 类，并且我编写了一个简单的代码。但是，当我尝试运行程序时，我不断收到错误消息“找不到符号”。任何建议都会很棒！谢谢！

```
public class StringBuffer{ 
    public static void main(String[] args) 
    {
        StringBuffer sbuff = new StringBuffer();

        //one attempt to append - error
        sbuff.append("Jenna");

        //second attempt to append - error
        String phrase = new String("Jenna");
        sbuff.append(phrase);

        //attempts to call upon other methods - errors
        System.out.println("Your name backwards is: " + sbuff.reverse());
        System.out.println("The length of your name is: " +sbuff.length());
    }
} 
```

确切的错误如下所示：

```
cannot find symbol
  symbol:   method append(java.lang.String)
  location: variable sbuff of type StringBuffer 
```

`reverse`和的类似错误`length`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:20:47.570

有命名冲突。当您说`StringBuffer sbuff = new StringBuffer();`这指的是您自己的类时，而不是[Java API 中](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html)的类，我假设您正在尝试使用它。

您可以完全限定它：

```
java.lang.StringBuffer sbuff = new java.lang.StringBuffer(); 
```

但更好的选择是重命名您的课程。作为一般规则，不要将您的类命名为与您尝试使用的类相同（或与标准 API 中的任何类相同），这可能会导致您自己以及任何尝试使用的人的混淆阅读您的代码。

此外，[您可能想改用 StringBuilder](https://stackoverflow.com/questions/6174259/why-use-stringbuilder-stringbuffer-can-work-with-multiple-thread-as-well-as-one)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:18:54.233

你有“import java.lang.StringBuffer;”吗？在你的代码中？也许这就是原因。了解您收到什么错误也会有所帮助？

# clojure - 在 clojure 中使用 subseq

> ID：16217162
> 
> 赞同：2
> 
> 时间：2013-04-25T14:16:25.273
> 
> 标签：clojure

子序列：

```
 (subseq (apply sorted-set (range 10)) > 5 < 7) 
    ; (6) 
```

这我理解——但是

```
 (subseq (apply sorted-set (range 10)) < 5 < 7) 
```

也给出 (6)，即使 (6 不小于 5)。有人可以解释应用 subseq 时究竟会发生什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:41:21.993

你打电话时

```
(subseq (apply sorted-set (range 10)) < 5 < 7) 
```

`subseq`首先创建一个以`s`开头的序列`start-key`，即`5`，so`s`变为`(5, 6, 7, 8, 9)`。

然后`subseq`使用`take-while`using`end-test`和`end-key`( `< 7`)，但首先检查新序列的第一个元素是否用( )`s`填充。如果没有，则它不包含在结果序列中。`start-test``start-key``< 5`

`subseq``take-while`用序列调用`(6, 7, 8, 9)`，结果是`6`.

所以`subseq`只检查一个元素`< 5`，这就是`5`它本身。

我希望这对你有意义:-)

此外，您可以随时查看[文档](http://clojuredocs.org/clojure_core/clojure.core/subseq#source)中的源代码。

# tfs - 如何收集在运行构建期间已经构建的 dll 的名称。

> ID：16217169
> 
> 赞同：0
> 
> 时间：2013-04-25T14:16:43.850
> 
> 标签：tfs, msbuild, build-process, tfsbuild

我有带有 Build Agent 和 Buld Controller 的 TFS 2012。如果我开始一个非常耗时的构建，我想将已构建的 dll 的名称写入日志文件（如构建窗口）。如果构建（dll）的一部分失败，我也想记录错误的原因。我有一个`IBuildDetail`对象，但我没有找到相关的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:51:49.407

TFS Build 启动 MSBuild 工具以执行实际编译。默认情况下，TFS 将捕获 MSBuild 日志（其中包含有关已构建内容、错误、警告等的所有信息）。MSBuild 日志包含在 Build Drop 中，并从 TFS 构建摘要和详细信息页面链接。

除了应该传播到 TFS 构建信息的构建警告和构建错误之外，我认为 IBuildDetail 不会包含任何这些信息。

除了解析 MSBuild 日志以提取您想要的数据之外，我认为没有其他更简单的方法。您到底想完成什么，也许有人可以提出更好的方法？

# ruby-on-rails - 切换 EC2 实例时维护 Cookie Ruby on Rails

> ID：16217171
> 
> 赞同：5
> 
> 时间：2013-04-25T14:16:49.043
> 
> 标签：ruby-on-rails, cookies, amazon-web-services, amazon-ec2, capistrano

我的团队即将结束对我们系统的大规模改革，并准备进行重大转变。

目前，我们使用弹性 IP 在 AWS 上托管。我们的堆栈是 Ruby on Rails，我们正在使用 capistrano。我们还有一个黑莓应用程序和一个 iPhone 应用程序，并在客户手中。应用程序和服务器之间的身份验证是通过 cookie 而不是任何类型的身份验证密钥。

我很清楚这不是进行身份验证的最佳方式，但遗留代码是遗留的。

由于我们公司和服务的性质，当我们切换时，用户不会被注销并且通过 cookie 从移动应用程序传递到服务器的会话是必须的。

我尝试了以下方法：

将 DNS 指向不同的 IP。将弹性 IP 指向不同的 AWS 实例。

在每种情况下，cookie 似乎都没有受到尊重。

我是一名开发人员而不是系统管理员，并且已经没有想法了。无论如何，是否可以使用 Devise on Rails 或通过 AWS 制作新的实例来尊重 cookie？还是我应该考虑的其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T16:58:48.623

HTTP Cookie 不包含任何有关服务 IP 地址的信息。它们与域名（或子域的根）和路径相关联。因此，只要域保持不变，您就可以随意更改服务 IP 地址。在您的情况下，两种解决方案都有效 - 您可以迁移 IP 地址或仅更改 DNS 记录的 IP 值。这应该足以让用户保持登录状态。

重要的提醒问题是 - 您将会话数据保存在哪里？你在 Rails 中使用什么会话存储？您可能没有将会话数据迁移到您的测试环境，因此客户端已注销。

Rails 的默认会话存储是 cookie 存储（会话数据保存在客户端），因此只要您在应用程序中的 secret_token 保持不变，它就应该在您的情况下“正常工作”。也许这是在部署期间重新生成的？可能值得一试 (config/initializers/secret_token.rb) 此令牌用于对 cookie 进行签名，以确保客户端没有更改它们。

确保所有这些点在您的情况下都是有效的，并仔细检查您的测试过程，因为它应该可以在没有任何额外操作的情况下正常工作。

# c# - 包含函数委托的值？

> ID：16217172
> 
> 赞同：0
> 
> 时间：2013-04-25T14:16:53.597
> 
> 标签：c#

这不完全是我正在做的，但它足够接近。我有两个代表指向同一个函数。

```
var foo=new Func<string, string, dynamic, string>(f);
var bar=new Func<string, string, dynamic, string>(f); 
```

foo 由一组线程（不仅仅是一个线程）调用。bar 由不同的线程组调用。

函数需要知道的参数之一是调用它的线程组。

我可以让每个线程在调用函数时告诉它它的组名（线程知道它们属于哪个组），但是有没有办法在声明 foo 和时将线程组名（字符串）传递给函数本身酒吧 ？

所以每当一个线程调用 foo 时，函数 f 就会知道它是从第一组调用的，而每次线程调用 bar 时，函数 f 就会知道它是从第二组调用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:22:20.327

你的意思是这样的？

```
var foo = new Func<string, dynamic, string>((s,d) => f("123", s, d));
var bar = new Func<string, dynamic, string>((s,d) => f("456", s, d)); 
```

这样，常量在代表声明期间仅使用一次。

# ios - 为自定义 UISlider 旋钮图像添加阴影？

> ID：16217173
> 
> 赞同：2
> 
> 时间：2013-04-25T14:16:54.447
> 
> 标签：ios, uikit, uislider

我需要为 UISlider 放置一个带有阴影的自定义旋钮图像。到目前为止，我有一个 38x38 的图像，其中有一个区域定义了旋钮的阴影。

![旋钮图像@2x](https://i.stack.imgur.com/9H7ml.png)

现在在使用此图像时，当我将旋钮滑动到最末端时，实际旋钮无法覆盖端点，因此在旋钮图像的透明区域下可以看到端点

![旋钮在最末端](https://i.stack.imgur.com/SUA26.jpg)

这是我用来自定义 UISlider 的代码

```
UIImage *slideBtImg = [UIImage imageNamed:SliderKnobImg];  
[self.ratingSlider setThumbImage:slideBtImg forState:UIControlStateNormal];  
[self.ratingSlider setThumbImage:slideBtImg forState:UIControlStateHighlighted]; 
```

如何实现一个自定义旋钮，其下方有阴影，正确覆盖端点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T05:27:55.870

看看里面`UISlider.h`，有一些方法可以让您根据需要自定义滑块旋钮和轨道。(iOS 2.0 及以上)

```
// lets a subclass lay out the track and thumb as needed
- (CGRect)minimumValueImageRectForBounds:(CGRect)bounds;
- (CGRect)maximumValueImageRectForBounds:(CGRect)bounds;
- (CGRect)trackRectForBounds:(CGRect)bounds;
- (CGRect)thumbRectForBounds:(CGRect)bounds trackRect:(CGRect)rect value:(float)value; 
```

这是我自己的例子。它需要一些数学工作。我得到当前滑块位置（从 0 到 1）的 valueRatio 并调整它以使我的阴影自定义旋钮很好地位于中心。希望有帮助；）

```
- (CGRect)thumbRectForBounds:(CGRect)bounds trackRect:(CGRect)rect value:(float)value {
    float valueRatio = ( value - self.minimumValue ) / valueRange;
    return CGRectMake(valueRatio * (bounds.size.width - 26) + 3, 7, 20, 20);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-27T06:05:43.903

您可以为图像添加一些透明空间`SliderKnobImg`。保持图像的宽度小于滑块的宽度，然后`[slideBtImg resizableImageWithCapInsets:...]`用作滑块的 **thumbImage**。

# c# - 我可以强制 RavenDB 允许 IDocumentSession.Store() 接受具有现有 ID 的实体吗？

> ID：16217177
> 
> 赞同：1
> 
> 时间：2013-04-25T14:17:02.507
> 
> 标签：c#, ravendb

我有一个应用程序，我正在从 RavenDB 1 升级到 RavenDB 2。该应用程序不直接将其域对象存储在数据库中。相反，域对象在持久化之前被转换为文档对象（读取时反之亦然）。例如，域对象：

```
public class User {
    public string Id { get; private set; }
    public string Email { get; set; }
    public string PasswordSalt { get; private set; }
    public string PasswordHash { get; private set; }

    public void ChangePassword(string oldPassword, string newPassword) {
        ...
    }
    .
    .
    .
} 
```

以及相应的文档对象（存储在数据库中的内容）：

```
class UserDocument {
    public static UserDocument FromEntity(User user) {
        ...
    }

    public string Id { get; set; }
    public string Email { get; set; }
    public string PasswordSalt { get; set; }
    public string PasswordHash { get; set; }

    public User ToEntity() {
        ...
    }
} 
```

因此，如果我想更改存储在数据库中的用户文档，我通常会加载它，将其转换为相应的域对象，进行更改（例如调用 ChangePassword()），将域对象转换回文档对象并最后调用 IDocumentSession.Store() 和 SaveChanges()。这在 RavenDB 1 中运行良好。

然而，在 RavenDB 2 中，似乎不允许我调用 IDocumentSession.Save() 的实体的 Id 属性设置为采用的 Id。更新文档时，根据定义，将采用 Id 属性。

这个想法似乎是在 RavenDB 2 中我会加载一个对象，更改它，然后调用 SaveChanges() 并且客户端将跟踪已加载的对象并自动将它们发送到服务器。由于我将在代理对象（域对象）中进行所有更改并且不会将原始文档对象留在内存中，因此这对我来说是不可能的。

是否可以将 RavenDB 配置为使用 RavenDB 1 中存在的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:56:16.157

我们的想法是不要在 User 和 UserDocument 之间进行这种分离。您希望使用 IDocumentSession 将 User 对象存储到 RavenDB 中——就您而言，它们被存储为文档的事实实际上是一个实现细节。

在这方面，RavenDB 1 和 2 之间没有任何真正的区别。

您应该能够执行以下两项之一：

1.  使用 IDocumentSession.Load（或 Query）加载对象，直接更改 Unit-of-Work 并在完成后调用 SaveChanges

2.  加载对象，将其更改为另一个对象（使用复制构造函数等），然后将新对象存储在相同的 ID 下。您可以通过调用 session.Store(obj, null, id) 来做到这一点。

# php - Symfony2 结构设置

> ID：16217182
> 
> 赞同：0
> 
> 时间：2013-04-25T14:17:13.067
> 
> 标签：php, mysql, symfony, localhost

我几乎是 Symfony2 的新手，我了解 Bundle、实体等。

但我的问题在于结构。

我为开发创建了一个本地虚拟服务器，直到我不知道我在做什么以及它将如何工作，我才能开始。

所以我当前的 DocumentRoot 是：[http://mysite.localhost/](http://mysite.localhost/) -> /var/www/mysite

我这样安装了 Symfony

/var/www/mysite - 应用程序 - bin - src - 供应商 - 网络

我是否需要为“索引页面”生成一个捆绑包，或者我需要使用 app.php/ ？

我的意思是我的页面以[http://mysite.localhost/ 开头](http://mysite.localhost/)

我需要做什么？我需要在哪里生成捆绑包？我很困惑。

太感谢了

最好的问候，克里斯蒂安

* * *

首先，感谢回复！

现在我像你建议的那样进行了修改。现在，当我写入浏览器[http://mysite.localhost/](http://mysite.localhost/)时，它将是[http://mysite.localhost/app.php/](http://mysite.localhost/app.php/)并出现 404 错误。我的 DirectoryIndex 是 app.php 还是 app_dev.php 并不重要，它始终指向 app.php。

正常吗？如果是，那么我如何为主页或类似的东西链接一个捆绑包？

这是我的可用站点/mysite 文件

```
<VirtualHost *:80>
ServerName mysite.localhost
ServerAlias mysite
ServerAdmin info@something.com
DocumentRoot /var/www/mysite/web/
DirectoryIndex app_dev.php
AddDefaultCharset UTF-8
AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
ErrorLog /var/www/mysite/mysite.error_log
CustomLog /var/www/mysite/mysite.access_log combined

HostnameLookups Off
UseCanonicalName Off

ScriptAlias /cgi-bin/ "/var/www/mysite/cgi-bin/"
<Directory "/var/www/mysite/cgi-bin">
    AllowOverride None
    Options +ExecCGI -Includes
    Order allow,deny
    Allow from all
</Directory>
<Directory "/var/www/mysite/web">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:22:10.373

只需更改您的网络服务器设置。阿帕奇示例：

*   `DocumentRoot`应该指向 /var/www/mysite/web
*   app.dev 应该是`DirectoryIndex`值之一

# sql - 每个客户每月的 SQL 平均值

> ID：16217187
> 
> 赞同：2
> 
> 时间：2013-04-25T14:17:19.217
> 
> 标签：sql, oracle, select, group-by, nested

表“交易”是所有交易的列表，其中`date`, `customerID`, 每单位成本 ( `price`) 和`quantity`。

我需要一份报告，将交易按月分组并给出计数、总收入和每位客户的平均收入。

我无法弄清楚如何插入`group by customerID`此 select 语句：

```
SELECT extract(month FROM date) month,
       count(*) purchases,
       SUM(price*quantity) income,
       AVG(SUM(price*quantity)) <-- this needs to be grouped by customerID aswell as month
FROM
    transactions
WHERE
    date BETWEEN i2 AND i3
GROUP BY extract(month FROM date); 
```

我能得到的最接近的是：

```
SELECT extract(month FROM date) month,
       count(*) purchases,
       SUM(price*quantity) income,
       ( SELECT AVG(SUM(price*quantity))
         FROM transactions
         GROUP BY customerID, extract(month FROM date) )
FROM
    transactions t
WHERE
    date BETWEEN i2 AND i3
GROUP BY extract(month FROM date); 
```

但是在我考虑了一分钟后，这种方法不再有意义，因为嵌套`select`会返回多行。如果我添加一个`where`子句并`group by date`在第二个选择中删除：

```
(SELECT AVG(SUM(price*quantity))
 FROM transactions
 GROUP BY customerID
 where extract(month FROM date) = month) 
```

然后它会返回......我不确定是什么，但它会是错误的。

顺便说一下，这是一个 oracle 数据库（我认为是 10g）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:21:27.363

您可以通过使用算术来做到这一点。. . 将总数除以客户数量：

```
SELECT extract(month FROM date) month,
       count(*) purchases,
       SUM(price*quantity) income,
       sum(price*quantity) / count(distinct customerId)
FROM
    transactions
WHERE
    date BETWEEN i2 AND i3
GROUP BY extract(month FROM date); 
```

# jquery - 向此图像替换 jQuery 片段添加淡入淡出效果

> ID：16217189
> 
> 赞同：0
> 
> 时间：2013-04-25T14:17:23.447
> 
> 标签：jquery

我正在使用这个图像替换 jQuery 片段，这样当有人将鼠标悬停在缩略图上时，另一个“主”图像会发生变化；

```
$('.circle img').hover(function () {
$('#main-image').attr('src', $(this).attr('src'));
}); 
```

当有人悬停`.circle img`而不是仅仅切换时，有没有办法让“主要”图像彼此淡入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T10:30:13.243

Try Using the `mouseenter()` and `mouseleave()` instead of `hover()` i.e

```
$('.circle img').mouseenter(function(){
//fadeOut

}).mouseleave(function(){

//fadeIn
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:22:03.240

使用`fadeIn()`或`fadeOut()`效果可以做到

# java - 检查语句或分配变量的性能？

> ID：16217200
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:17:54.927
> 
> 标签：java, android, c++, c, performance

`if()`在一个或一个变量初始化之间需要更多时间的指令是什么？

首先检查给定变量是否具有非零值并仅在它非零时设置它会更有效吗？

例如：一个布尔值！

```
if (boolean)
    boolean = false; 
```

或直接：`boolean = false;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:31:07.580

很可能不检查会更快。它确实取决于正在设置的对象的类型（在这种情况下，布尔值，显然是“易于设置”）。只有具有“简单比较”和“设置复杂”的特别特殊对象才能从首先检查中受益。

如果它真的很容易检查并且很难更改，那么“设置”功能应该自己检查。

一个例外是处理器之间存在大量争用的共享内存，因为写入内存将强制刷新其他处理器的缓存，这需要时间。

# iphone - 如何使用 coreGraphics 在两点关节处添加曲线？

> ID：16217205
> 
> 赞同：0
> 
> 时间：2013-04-25T14:18:00.873
> 
> 标签：iphone, ios, objective-c, core-graphics

我正在使用核心图形创建正弦图。我做了所有关于绘制图表的事情并且工作得很好，因为我只需要在两点连接处添加曲线。

我的图表如下图所示：

![示例图表](https://i.stack.imgur.com/lHfeN.png)

我需要在下图中画一条线，但我不知道如何：

![我要生成的图表](https://i.stack.imgur.com/fwYwf.png)

有人可以帮我解决这个问题吗？

**我的 DrawRect 代码如下**

```
- (void)drawRect:(CGRect)rect
{
    [self setClearsContextBeforeDrawing: YES];

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGColorRef backColorRef = [UIColor blackColor].CGColor;
    CGFloat backLineWidth = 2.f;
    CGFloat backMiterLimit = 0.f;

    CGContextSetLineWidth(context, backLineWidth);
    CGContextSetMiterLimit(context, backMiterLimit);

    CGContextSetShadowWithColor(context, CGSizeMake(3, 5), 8, backColorRef);

    CGContextSetLineJoin(context, kCGLineJoinRound);

    CGContextSetLineCap(context, kCGLineCapRound );

    CGContextSetBlendMode(context, kCGBlendModeNormal);

    CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);

    int x = 320 ;
    int y = 180 ;

    for (int i=0; i<vDesc.count; i++)
    {

        CGPoint bPoint = CGPointMake(30, y);
        CGPoint ePoint = CGPointMake(x, y);

        UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 40, 30)];
        [label setCenter:CGPointMake(bPoint.x-15, bPoint.y-30)];
        [label setTextAlignment:UITextAlignmentCenter];
        [label setBackgroundColor:[UIColor clearColor]];
        [label setTextColor:[UIColor whiteColor]];
        [label setText:[vDesc objectAtIndex:i]];
        [self addSubview:label];

        CGContextMoveToPoint(context, bPoint.x, bPoint.y-30);
        CGContextAddLineToPoint(context, ePoint.x, ePoint.y-30);

        y -= 30;

    }
    NSLog(@"%d",hDesc.count);
    for (int i=0; i<hDesc.count; i++)
    {

        UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(i*vInterval+5, 150, 30, 30)];
        [label setTextAlignment:UITextAlignmentCenter];
        [label setBackgroundColor:[UIColor clearColor]];
        [label setTextColor:[UIColor whiteColor]];
        label.numberOfLines = 1;
        label.adjustsFontSizeToFitWidth = YES;
        label.minimumFontSize = 1.0f;
        [label setText:[hDesc objectAtIndex:i]];

        [self addSubview:label];
    }

    CGColorRef pointColorRef = [UIColor colorWithRed:24.0f/255.0f green:116.0f/255.0f blue:205.0f/255.0f alpha:1.0].CGColor;
    CGFloat pointLineWidth = 1.5f;
   // CGFloat pointMiterLimit = 5.0f;

    CGContextSetLineWidth(context, pointLineWidth);
   // CGContextSetMiterLimit(context, pointMiterLimit);

    CGContextSetShadowWithColor(context, CGSizeMake(3, 5), 8, pointColorRef);

    CGContextSetLineJoin(context, kCGLineJoinRound);

    CGContextSetLineCap(context, kCGLineCapRound );

    CGContextSetBlendMode(context, kCGBlendModeNormal);

    CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);

    if (array1.count!=0)
    {
        CGPoint p1 = [[array1 objectAtIndex:0] CGPointValue];
        //int i = 1;
        CGContextMoveToPoint(context, p1.x, 380-p1.y);

//         CGContextAddCurveToPoint(context, 0, 50, 300, 250, 300, 400);
        for (int i=0; i<[array1 count]; i++)
        {
            p1 = [[array1 objectAtIndex:i] CGPointValue];
            CGPoint goPoint = CGPointMake(p1.x, 430-p1.y*vInterval/20);

            CGContextAddLineToPoint(context, goPoint.x, goPoint.y);
            UIButton *bt = [UIButton buttonWithType:UIButtonTypeCustom];

            [bt setBackgroundColor:[UIColor redColor]];

            [bt setFrame:CGRectMake(0,0,3,3)];
            [bt setCenter:goPoint];
            [self addSubview:bt];
        }

    }
    else
    {
        NSLog(@"empty");
    }
    CGContextStrokePath(context);   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:36:42.470

Bezier 路径将是很好的开始，您可以从[这里](https://github.com/adamwulf/bezier-curve-ios-examples/blob/master/BezierCurveExamples/BezierCurveExamples/BCShapeLayerMaskView.m)下载示例代码，对于曲线，您可以使用 [path addQuadCurveToPoint:nextPoint controlPoint:curvePoint]; 方法，对于这种方法，你可以[在这里阅读](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)

# algorithm - 表单域的 HSV 颜色去除/丢失

> ID：16217207
> 
> 赞同：2
> 
> 时间：2013-04-25T14:18:01.913
> 
> 标签：algorithm, colors, computer-vision, imaging, document-imaging

我正在编写一个系统来从表单图像中删除某些字段边界。字段中可能有文字，即使笔迹跨越字段边界，我也需要正确保留。

我有 2 个图像：1 个彩色图像（转换为 HSV 颜色空间）和 1 个按像素排列的黑白图像（这些由扫描仪生成）

鉴于彩色图像中的颜色，我想从黑白图像中删除（采摘）字段边界像素。

我有一个优势，因为我先验地知道场地的确切位置，以及场地边界线的宽度/高度。

我当前的实现包括（对于每个字段），扫描彩色图像上的字段边界并计算该字段边界的平均 HSV 值（因为我确切知道字段边界在哪里，所以我只访问“字段边界”像素，但是如果它们越过字段边界，我也可能会访问一些手写像素，这个想法是它们不会使平均值产生很大的偏差）。一旦我有了字段边界的“平均” HSV 值，我再次扫描字段边界，并为每个像素计算以下 delta 函数：

![在此处输入图像描述](https://i.stack.imgur.com/ViuLW.jpg)

如果“当前”像素和平均 HSV 之间的 Delta 值小于 0.07（根据经验发现），那么我将像素设置为白色（颜色接近），否则我将像素保持为黑色。

以下是字段的一些示例：

彩色图像： ![在此处输入图像描述](https://i.stack.imgur.com/5i9Gn.jpg) 黑白图像 非漏失： ![在此处输入图像描述](https://i.stack.imgur.com/CLymC.jpg) 漏掉了未在方程式中使用饱和度的黑白图像： ![在此处输入图像描述](https://i.stack.imgur.com/eAKpL.jpg) 实际漏掉了完全使用公式的黑白图像（使用所有 3 个分量 H、S 和 V） ![在此处输入图像描述](https://i.stack.imgur.com/YJlWe.jpg)

我用来获取第三张图像的公式是上面的公式，但是我将饱和度排除在等式之外（我只是在玩弄东西）。
这显然对颜色变化不够敏感，但公式对饱和度变化非常敏感（这主要是由图像中存在的 JPEG 压缩伪影引起的（示例伪影）：

![在此处输入图像描述](https://i.stack.imgur.com/cZFC2.jpg)

我认为第 4 个示例是最好的，因为它对颜色变化非常敏感，因此您不太可能删除笔迹，但问题是由于简单的扫描或压缩伪影引起的轻微颜色差异，您更容易拾取边框.

您有什么想法可以减轻在场边界内发生的一些颜色（饱和度）变化，是使用直方图吗？那里涉及一些量化以减少垃圾箱的数量？

我想听听人们有什么想法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:01:54.183

You might get some good results if you apply machine learning techniques to this problem.

For instance, if you want to label every pixel in your image as either a field border or not a field border you could try hand labeling the pixels in a few images, computing a bunch of features (you are currently only using color but I think oriented gradients might give some good results as well) and dump everything into a support vector machine (SVM).

OpenCV provides implementations of SVMs and gradient based features (descriptors) if you are familiar with C++ or Python:

*   [Support vector machines tutorial](http://docs.opencv.org/doc/tutorials/ml/introduction_to_svm/introduction_to_svm.html)
*   [Histograms of oriented gradients](http://docs.opencv.org/modules/ocl/doc/feature_detection_and_description.html?highlight=hog#ocl-hogdescriptor-hogdescriptor)

Alternatively Matlab provides code to train SVMs and compute gradient features as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T02:19:53.200

我不确定我是否完全理解您在这里的优先事项 - 第三张图片对我来说看起来不错（比第四张好得多）。我确实注意到第一个“S”的底部有一个间隙。

无论如何，由于您知道边界的位置并正在扫描这些像素，我建议为它们编译 H、S 和 V 的统计数据。对于 S 和 VI，假设您可以只计算平均值和标准差。由于角度的环绕性质并且它可以是未定义的，因此色调更加棘手。您可以量化并找到模式（或窗口加权模式）。你可以对盒子的非白色内容做同样的事情，这样你就可以量化笔触与盒子像素的性质。要缩小分布范围，您可以丢弃 x SD 之外的任何像素作为异常值并重新计算平均值和 SD。从那时起，您可以简单地根据像素接近的概率分布对像素进行分类。

对此的优化包括：

*   忽略低饱和度的 H 分量。
*   如果不确定，如果靠近已知边界位置，则偏向边界。
*   不确定时，如果相邻像素已被归类为笔划，则运行第二遍偏向笔划。

# javascript - 确定日期字段是否通过 JavaScript 显示日历弹出窗口

> ID：16217210
> 
> 赞同：1
> 
> 时间：2013-04-25T14:18:11.317
> 
> 标签：javascript, asp.net-mvc-3, html, calendar

对于我正在开发的 MVC 应用程序，我们在页面上有一些日期字段。

我最初的反应是使用 jQuery UI 的 datepicker，但我们遇到了一个小问题——我们还希望这个应用程序可以在 iPad 上运行。因此，我被要求研究使用 HTML5`<input type="date" />`标记，但如果浏览器不支持它，则退回到日期选择器。

另一个小问题：IE 是**邪恶的。**

显然，IE*确实*“支持” `<input type="date" />`；它只是在单击时不显示日历。

一个简短的、经过净化的标记：

```
@* In the HTML body... *@
@Html.InputFor(m => m.SomeDate, new { id="A", type="date" })
@Html.InputFor(m => m.SomeOtherDate, new { id="B", type="date" })

<script>
var $A = $('#A'),
    $B = $('#B');

$(document).ready(function () {
  fallbackToDatepicker($A);
  fallbackToDatepicker($B);

  @* ...SNIP: Other operations here... *@
});

function fallbackToDatepicker($field) {
  if($field.type() != "date") {
    console.log($field.selector + " is not a date field!");
    $field.datepicker();
  }
}
</script> 
```

（解决方案基于：[http](http://www.javascriptkit.com/javatutors/createelementcheck2.shtml) ://www.javascriptkit.com/javatutors/createelementcheck2.shtml ）

我要解决的问题是确定客户端是否正在运行没有本机日历弹出窗口的浏览器`<input type="date" />`；如果客户端在这样的浏览器上运行，我需要回退到日期选择器。

**问题**：确定客户端浏览器是否支持日期弹出窗口的更准确但仍然优雅/编程的方式是什么？

（注意：我建议我的团队放弃愚蠢的日期输入，而只使用日期选择器。）

# entity-framework - Entity Framework 5 - 将数据插入到 UsersInRoles 多对多表中

> ID：16217213
> 
> 赞同：1
> 
> 时间：2013-04-25T14:18:17.583
> 
> 标签：entity-framework, asp.net-membership, entity-framework-5, fluent-interface

我有一个场景，我需要在不使用 ASP.NET 成员资格的情况下手动将用户、角色和 UsersInRoles 条目插入数据库。现在，当我尝试插入多对多关系 UsersInRoles 时，出现以下异常

```
Invalid column name 'Role_RoleId'. 
```

我正在使用 EF 5，即 POCO 的数据库优先方法。我已经在 EDMX 中定义了一个关联，所以应该没问题...这里是模型实体

```
/// <summary>
/// No Metadata Documentation available.
/// </summary>
[DataContract(IsReference = true)]
[KnownType(typeof(User))]
public partial class User  : IUser 
{
    #region Primitive Properties
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual System.Guid ApplicationId
    {
        get;
        set;
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual System.Guid UserId
    {
        get;
        set;
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual string UserName
    {
        get;
        set;
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual bool IsAnonymous
    {
        get;
        set;
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual System.DateTime LastActivityDate
    {
        get;
        set;
    }

    #endregion

    #region Navigation Properties
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [NotMapped]
    public virtual IMembership Membership
    {
        get { return _membership; }
        set
        {
            if (!ReferenceEquals(_membership, value))
            {
                var previousValue = _membership;
                _membership = value;
                FixupMembership(previousValue);
            }
        }
    }
    private IMembership _membership;
    /// <summary>
    /// Gets or sets the roles associated with an user
    /// </summary>   
    [DataMember]    
    public virtual ICollection<Role> Roles
    {
        get
        {
            if (_roles == null)
            {
                _roles = new FixupCollection<Role>();
            }
            return _roles;
        }
        set
        {
            _roles = value;
        }
    }
    private ICollection<Role> _roles;

    #endregion

    #region Association Fixup

    private void FixupMembership(IMembership previousValue)
    {
        if (previousValue != null && ReferenceEquals(previousValue.User, this))
        {
            previousValue.User = null;
        }

        if (Membership != null)
        {
            Membership.User = this;
        }
    }

    #endregion

} 
```

**注意**：这是从用户到角色的单向关系

```
/// <summary>
/// No Metadata Documentation available.
/// </summary>
[DataContract]
[KnownType(typeof(Role))]
public partial class Role  : IRole 
{
    #region Primitive Properties
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual System.Guid ApplicationId
    {
        get;
        set;
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual System.Guid RoleId
    {
        get;
        set;
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual string RoleName
    {
        get;
        set;
    }
    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [DataMember]    
    public virtual string Description
    {
        get;
        set;
    }

    #endregion      

} 
```

工作代码

```
MyContext context = new MyContext();

Role usersRole = new Role();
usersRole.RoleName = "Users";
usersRole.Description = "User Role";
usersRole.RoleId = GuidExtension.NewSequentialGuid();
usersRole.ApplicationId = application.Id;

//Init users
User adminUser = new User();
adminUser.UserName = "admin";
adminUser.IsAnonymous = false;
adminUser.LastActivityDate = DateTime.UtcNow;
adminUser.UserId = GuidExtension.NewSequentialGuid();
adminUser.ApplicationId = application.Id;
//Init user roles
adminUser.Roles.Add(usersRole);

context.User.Add(adminUser);
context.SaveChanges(); 
```

我还尝试先将角色添加到数据库，然后添加用户（没有将角色添加到角色集合），我得到了同样的异常。然后我通过 Fluent API 添加了模型绑定，如下所示：

```
modelBuilder.Entity<User>()
              .HasMany(u => u.Roles)
              .WithMany()
              .Map(m =>
              {
                  m.MapLeftKey("UserId");
                  m.MapRightKey("RoleId");
                  m.ToTable("UsersInRoles");
              }); 
```

我还尝试像这样添加绑定：

```
modelBuilder.Entity<User>()
          .HasMany(u => u.Roles)
          .WithMany()
          .Map(m =>
          {
              m.MapLeftKey("UserId");
              m.MapRightKey("RoleId");
              var mapping = m.ToTable("UsersInRoles");
              mapping.MapLeftKey("UserId");
              mapping.MapRightKey("RoleId");
          }); 
```

这里也是上述代码的 SQL 跟踪

```
exec sp_executesql N'insert [dbo].[Roles]([RoleId], [ApplicationId], [RoleName], [Description])
values (@0, @1, @2, @3)
',N'@0 uniqueidentifier,@1 uniqueidentifier,@2 nvarchar(max) ,@3 nvarchar(max) ',@0='46E39982-E490-4F79-B457-A1AB012948CE',@1='79D75E2D-9923-48DC-A4D6-AE0CED0EDD58',@2=N'Users',@3=N'User Role'

exec sp_executesql N'insert [dbo].[Users]([UserId], [ApplicationId], [UserName], [IsAnonymous], [LastActivityDate], [Role_RoleId])
values (@0, @1, @2, @3, @4, null)
',N'@0 uniqueidentifier,@1 uniqueidentifier,@2 nvarchar(max) ,@3 bit,@4 datetime2(7)',@0='B5EA5052-71C9-411E-91C7-A1AB012948CF',@1='79D75E2D-9923-48DC-A4D6-AE0CED0EDD58',@2=N'admin',@3=0,@4='2013-04-25 14:14:08.4930381' 
```

上面你可以看到问题的根源，用户插入 SQL 中的**[Role_RoleId]**列，所以我不确定我是否正确设置了导航属性？

无论我做什么，都会忽略上述异常，例如 Fluent API 绑定。有谁知道如何正确地将多对多条目添加到 UsersInRoles 表中，或者我的代码中缺少什么。

**注意**：我是 EF 的新手，所以任何信息都会有所帮助。

**更新** 我试图只将用户条目保存到数据库中，但我得到了相同的**[Role_RoleId]**异常，希望这能进一步澄清这个问题，因为这可能不是多对多插入问题，而是多对多无效配置问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:55:28.620

我在我的代码中发现了两个问题，经过长时间的代码审查，第一个问题是我的一个部分类中“隐藏”的属性，称为

```
public virtual ICollection<User> Members { get; set; } 
```

它作为复制粘贴错误出现，我找不到它，因为它位于折叠区域中，我正在寻找 Users 属性，因为这是我之前生成的导航项的名称。

第二个问题是一个更严重的问题，它与“Database.SetInitializer”有关，放入了db初始化程序

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  Database.SetInitializer<CoreDALContext>(null);
} 
```

这是错误的，这应该只调用一次并根据 Microsoft 实现放入静态构造函数中。

```
static CoreDALContext()
{
  Database.SetInitializer<CoreDALContext>(null);
} 
```

我希望这将帮助其他 EF 新人不要犯同样的错误。

问候

# javascript - jQuery - 从输入值计算日期，六个月

> ID：16217214
> 
> 赞同：1
> 
> 时间：2013-04-25T14:18:19.350
> 
> 标签：javascript, jquery

我有一个输入文本框，你写一个日期，我想要一种从输入日期计算六个月的方法。

输入日期格式为：

```
dd/mm/yy 
```

示例它应该如何工作：
输入日期：`01/07/13`
函数的输出应该如何：`01/01/14`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:20:47.773

如果您有`Date`：

```
var date = new Date(year, month, day); 
```

要在 6 个月后获得，请使用：

```
date.setMonth(date.getMonth() + 6); 
```

**演示：http:** [//jsfiddle.net/GF6B6/](http://jsfiddle.net/GF6B6/)

# git - Working with team in Git

> ID：16217215
> 
> 赞同：0
> 
> 时间：2013-04-25T14:18:19.377
> 
> 标签：git, github

I am working in a team on a git project and I really don't understand the process we should be following.

1.  I clone the project I am working on from Github
2.  I then checkout the develop branch to do my work
3.  I do a `git add .; git commit -a` to add my new files

But as I was working some of the other team players added new files so now Git gives me a error on `git push`.

What command should I run right before my push to see if anyone changed anything?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:20:50.050

Using `git fetch <remote repo alias>` will allow you to preview upstream changes in your develop branch.

You would then want to either merge those changes into your local work, or rebase your local changes on top of the remote work, then try push to the remote repo again.

Here's how you would merge the remote changes:

```
git merge <remote>/develop 
```

And this is the command you would use to rebase instead:

```
git rebase <remote>/develop 
```

Both would get you the same end-state for your develop branch.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:33:34.733

I believe you are looking for `git pull`.

This command will perform a `git fetch` to get the changes made by your colleagues. Then it would try to perform `git merge` which will merge their changes onto your local working tree.

If the merge is not successful you will need to resolve the conflicts.

Then you will be able to perform `git push` and your colleagues will need to pull your changes before they push.

P.S. If you have trouble using this process you could use a visual git client like GitHub, Tower, SmartGit or others.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:24:57.940

If you do git `git fetch` will retrieve the updated. After that you can check how the repository is doing `git status` that will show you the status of your clone compared with the one you cloned from.

# sql-server - 在配置中找不到指定的商店提供者

> ID：16217217
> 
> 赞同：2
> 
> 时间：2013-04-25T14:18:25.237
> 
> 标签：sql-server, entity-framework, code-first

当我将我的 ASP.NET MVC 4、EF 5.0、Code-First 项目发布到测试或生产环境时，会发生以下异常：

（错误 0175：在配置中找不到指定的商店提供程序，或者无效。）

```
 [MetadataException: Das angegebene Schema ist ungültig. Fehler: 
(0,0) : Fehler 0175: Der angegebene Speicheranbieter kann nicht in der Konfiguration gefunden werden oder ist ungültig.]
   System.Data.Metadata.Edm.Loader.ThrowOnNonWarningErrors() +57
   System.Data.Metadata.Edm.StoreItemCollection.Init(IEnumerable`1 xmlReaders, IEnumerable`1 filePaths, Boolean throwOnError, DbProviderManifest& providerManifest, DbProviderFactory& providerFactory, String& providerManifestToken, Memoizer`2& cachedCTypeFunction) +206
   System.Data.Metadata.Edm.StoreItemCollection..ctor(IEnumerable`1 xmlReaders) +368
   System.Data.Entity.Migrations.Extensions.XDocumentExtensions.GetStoreItemCollection(XDocument model, DbProviderInfo& providerInfo) +361
   System.Data.Entity.Migrations.Infrastructure.EdmModelDiffer.Diff(XDocument sourceModel, XDocument targetModel, String connectionString) +72
   System.Data.Entity.Migrations.DbMigrator.IsModelOutOfDate(XDocument model, DbMigration lastMigration) +194
   System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId) +328
   System.Data.Entity.MigrateDatabaseToLatestVersion`2.InitializeDatabase(TContext context) +150
   System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) +66 
```

SQL 服务器上的数据库已创建，数据库中的表也已创建。

在本地开发环境中，一切正常。我在本地安装了与测试/生产相同的 MS SQL Express 2008 R2 版本。并且在本地一切正常。

当我阅读其他具有相同错误的内容（主要是 MySQL 数据库）时，该错误已通过包含二进制文件得到修复。但是对于 MSSQL，没有特殊的二进制文件可以包含（我认为）。并且创建了数据库/表，因此对 SQL 服务器的访问应该没问题。

这是我用于生产/测试的 web.config：

```
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="NameOfContext" connectionString="Server=ServerName\MSSQL;Database=DatabaseName;User Id=Username;Password=Password" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
...
  <entityFramework>
    <contexts>
      <context type="NameOfContext, Application name">
        <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[NameOfContext, Application Name], [Name_App.Migrations.Configuration, Application Name]], EntityFramework, PublicKeyToken=b77a5c561934e089">
          <parameters>
            <parameter value="NameOfContent" />
          </parameters>
        </databaseInitializer>
      </context>
    </contexts>
  </entityFramework> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:56:10.020

我已经“解决”了问题：我创建了一个新项目并将所有代码复制到新项目中，问题不再出现。可能是自动迁移的问题。尽管我运行'update-database -targetmigration：0'并重新创建所有迁移。

# c++ - 当你有.pdb文件和VS2010的C++源代码时，如何进入dll的功能？

> ID：16217218
> 
> 赞同：0
> 
> 时间：2013-04-25T14:18:25.660
> 
> 标签：c++, visual-studio-2010, debugging, dll, step-into

我正在尝试调试我编写的由 Visual Studio 2010 中的应用程序使用的动态库。我可以进入直到我的 dll 的函数，但我无法更深入地查看源代码。如果我打开*反汇编*窗口，我可以进入 ASM 代码，但我看不到源代码或任何符号。

我已经构建了一个 .dll 和一个导入 .lib。与 dll 关联的 .pdb ( `/Zi`) 文件也已构建（使用`/DEBUG`）。优化被禁用 ( `/Od`)。

我的应用程序将导入库与 a 链接，`#pragma comment(lib, "myImport.lib")`因为该应用程序有一个我无法自己配置的构建工具。

我的应用程序在调试中运行，在调试器的*模块*中，我可以看到我的 dll 以及符号已加载。

我还检查了*Options > Debugging > General Enable Just My Code*选项已禁用。

如何强制VS2010进入我的dll的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:34:46.030

我们有一个稍微不同的设置，我们启动另一个我们没有源代码的应用程序，然后从该应用程序加载我们自己构建的 dll。要对其进行调试，我们使用 Visual Studio 命令 Debug / Attach to Process... 也许此命令可以引导您成功调试 dll 的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:37:11.283

正如您所料，这是编译不兼容。该 dll 是为 CLR 运行时 ( ) 编译的`/clr`。我猜是因为VS2010的默认配置。因为我删除了这个选项，所以一切都可以像往常一样调试。

# android - 解析 XML 时出错：格式不正确（令牌无效）

> ID：16217222
> 
> 赞同：1
> 
> 时间：2013-04-25T14:18:33.207
> 
> 标签：android, eclipse

我在[android 网站](http://developer.android.com/training/basics/firstapp/building-ui.html)
上做 android 教程我在 EditText 上不断收到这些错误：解析 XML 时出错：格式不正确（无效令牌）和 Element Linearlayout 必须后跟属性规范，`>`或者`/>`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:orientation="horizontal"
tools:context=".MainActivity" 

<EditText
    android:id="@+id/editText1"
    android:layout_weight="1"
    android:layout_width="0DP"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message"/>

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:onClick="sendMessage"/>

</LinearLayout> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:19:54.513

尝试：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:orientation="horizontal"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/editText1"
    android:layout_weight="1"
    android:layout_width="0DP"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message"/>

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:onClick="sendMessage"/>

</LinearLayout> 
```

`>`您在 LinearLayout 元素的末尾缺少一个结束。

# javascript - 金字塔项目中不能包含 js 文件

> ID：16217229
> 
> 赞同：0
> 
> 时间：2013-04-25T14:18:53.120
> 
> 标签：javascript, templates, pyramid

我正在尝试使用外部 js 文件在我的金字塔项目中使用。我找到了这个解决方案，但我似乎无法让它工作。我要包含的 js 文件位于 C:\env\uza\uza\static\js 项目名称 = uza.

在我的模板中，我使用它来调用脚本：

```
<script type="text/js" src="${request.static_url('uza:static/js/fabtabulous.js')}" />  
<script type="text/js" src="${request.static_url('uza:static/js/tablekit.js')}" /> 
```

我的 init.py 看起来像这样：

```
config.add_static_view('static', 'static', cache_max_age=3600) 
```

当我在浏览器中导航到页面时，它只会给我原始 html 代码中的金字塔侧边栏。我知道这是我在某个地方犯的一个愚蠢的错误，但我似乎找不到它。有没有人能帮我解决这个问题。

**编辑：** 我上传了一个 pdf，以便更好地了解我遇到的问题。ps：控制台没有错误。 [https://dl.dropboxusercontent.com/u/6752022/problem.pdf](https://dl.dropboxusercontent.com/u/6752022/problem.pdf)

**编辑：** 我使用 sqlalchemy 脚手架做了一个新项目。我所做的更改是： - 在 mytemplate.pt 中包含这一行

```
<script type="text/js" src="${request.static_url('javascript:static/js/tette.js')}" /> 

<input type="button" onclick="popup()" value="Click Me!"> 
```

- 我没有更改任何其他内容，因为我认为不需要在脚手架中进行任何其他更改。

*   我的 tette.js 文件如下所示：

    功能弹出（）{警报（“你好世界”）}

这是我在包含 js 文件之前的输出。（删除了几个div） ![在此处输入图像描述](https://i.stack.imgur.com/wVEGC.png)

这是之后。 ![在此处输入图像描述](https://i.stack.imgur.com/NaYxE.png)

我究竟做错了什么 ？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:26:14.317

你能把它退回到金字塔侧边栏看起来和正常工作的地方，而不是原始 HTML 吗？

您的 init.py 行看起来是正确的。然后在您的模板中，您可以访问“静态”文件夹中的任何内容，如下所示：

```
<link rel="stylesheet" href="${request.static_url('myproject:static/style.css')}">
<!--[if lte IE 6]>
<link rel="stylesheet" href="${request.static_url('myproject:static/ie6.css')}" type="text/css" media="screen"
      charset="utf-8"/>
<![endif]-->
<script type="text/javascript"
        src="${request.static_url('myproject:static/tinymce/jscripts/tiny_mce/tiny_mce.js')}"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T08:19:10.313

正如彼得蒂雷尔所说。我没有说类型是javascript。

# c# - VS2010 C# 看不到控件的非覆盖方法

> ID：16217234
> 
> 赞同：0
> 
> 时间：2013-04-25T14:19:14.497
> 
> 标签：c#, winforms, visual-studio-2010

我是 C# 新手，编写了一个带有手动添加项目的列表框的简单 winform。我想将代码添加到`listbox`鼠标双击方法，但我无法在任何地方找到它 - 甚至不确定它是否被调用`mousedoubleclick`。在编辑过程中，如果我双击列表框，它会将我放入`SelectedIndexChanged`方法中，但所有其他默认方法都不会显示在右上角的下拉框中。那么我该如何使用其他方法呢？我手动对其进行了编码，但它不在运行时运行。

在所有其他 Visual Studio 和 VB 中，所有使用/未使用的方法对于控件/对象都是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:25:19.037

有一个`MouseDoubleClick`事件`ListBox`。 `MouseDoubleClick`是 on 的事件`Control`，因此所有控件都必须继承该事件。

您可以在设计器中找到所有可能事件的列表以添加事件处理程序：

![在此处输入图像描述](https://i.stack.imgur.com/h6cVd.png)

或者只是通过表单加载事件中的代码来实现：

```
listbox1.MouseDoubleClick += MyDoubleClickEventHandler; 
```

当您键入时，Visual Studio 甚至可以自动生成具有正确签名的方法存根。

# sql - 使用 sql 从具有冲突字段的列表中删除一个人

> ID：16217247
> 
> 赞同：0
> 
> 时间：2013-04-25T14:19:46.543
> 
> 标签：sql, db2

嗨，我有一张桌子要求一个人回答是/否，但是有些人说是和否，即：

```
person--------------status
1-------------------yes
2-------------------yes
3-------------------yes
3-------------------no
4-------------------no
5-------------------yes
5-------------------no 
```

其中第 3 个人和第 5 个人有两行，一排代表“是”，一排代表“否”。

我想找到两个答案的人，并删除说“不”的行。所以我最终得到：

```
person--------------status
1-------------------yes
2-------------------yes
3-------------------yes
4-------------------no
5-------------------yes 
```

我的逻辑让我失望，我只能得到：

```
delete from table where status = 'no'
and where person in (select person from table where status = 'yes') 
```

但这当然会删除这两种类型。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:23:19.557

表达式`and where`不是 SQL。试试这个：

```
delete from table
     where status = 'no' and
           person in (select person from table where status = 'yes') 
```

逻辑在我看来是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:24:52.550

好吧，这是一种方式（也会有其他方式）。

```
delete from table 
where status = 'no' and
      person in (select person from table 
                 where status in ('no', 'yes')
                 group by person 
                 having count(distinct status)>1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:26:01.090

编辑：您的解决方案应该可以工作，除了多余的“哪里”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-26T00:34:07.430

一旦你修复了额外的语法错误，它就不会**删除**`where`两者。它说 delete where status = 'no'**`AND`**另一个条件为真。两者都必须为真才能删除记录。如果记录为“是”，则显然该记录的条件不能同时为真，因为其中一个为假。

所以让我们在 DB2 中尝试一下：

```
create table survey 
  (person smallint
  ,answer   varchar(5)
  );

insert into survey
  values (1, 'yes'),
         (2, 'yes'),
         (3, 'yes'),
         (3, 'no'),
         (4, 'no'),
         (5, 'yes'),
         (5, 'no'); 
```

这给了我

```
person  answer
------  ------
  1     yes 
  2     yes 
  3     yes 
  3     no  
  4     no  
  5     yes 
  5     no 
```

所以，现在测试

```
delete from survey 
  where answer = 'no'
    and person in (select person 
                     from survey 
                     where answer = 'yes'
                  ); 
```

我的桌子现在有

```
person  answer
------  ------
  1     yes 
  2     yes 
  3     yes 
  4     no  
  5     yes 
```

它显然没有**删除**这两种类型，并且具有预期的结果。

我正在使用 DB2 for i 7.1，也许其他人正在使用 DB2 LUW。但我发现很难想象基本 SQL 工作方式的基本逻辑（例如`AND`）在不同的 IBM 平台上的工作方式会有很大的不同。

# java - if 语句中未初始化的值

> ID：16217251
> 
> 赞同：1
> 
> 时间：2013-04-25T14:19:55.530
> 
> 标签：java

下面的代码有一个编译器错误：

> `speedMsg might not been initialized`

我该如何解决？

```
String speedMsg;

// Determine the grade
if (speed >= 150)
  speedMsg = "STOP! STOP! Please let me OUT!";
else if (speed <= 150)
  speedMsg = "Whew I'll just walk from here Thanks."; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T14:22:18.443

改成：

```
// Determine the grade
if (speed >= 150)
    speedMsg = "STOP! STOP! Please let me OUT!";
else
    speedMsg = "Whew I'll just walk from here Thanks."; 
```

这应该足以让编译器确定变量将被初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:23:45.983

放：

```
String speedMsg = ""; 
```

或者去掉else if，改成else。

```
if (speed >= 150)
    speedMsg = "STOP! STOP! Please let me OUT!";
else
    speedMsg = "Whew I'll just walk from here Thanks."; 
```

更好的是：

```
String speedMsg = speed >= 150 ? 
                    "STOP! STOP! Please let me OUT!" :
                    "Whew I'll just walk from here Thanks."; 
```

您没有初始化您的字符串，然后尝试返回它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:22:34.563

替换`else if`为，`else`因为编译器会知道 speedMsg 总是有一个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:24:26.603

如果或，您`speedMsg`可能不会被初始化 。`speed >= 150``speed <= 150`

尽管很明显速度的所有可能值都在那里，但 Java 无法知道它。如果`if else if`您不使用 only `if else`，它将被初始化。

或者您需要在声明时初始化为默认错误消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T14:37:12.033

> 错误变量 speedMsg 可能未初始化

此错误消息告诉您，变量（此处：speedMsg）可能为**null**。因此，如果您设置这样的默认值，您可以解决问题：

```
String speedMsg = "Speed"; 
```

或者你像这样修复它

```
if (speed >= 150)
    speedMsg = "STOP! STOP! Please let me OUT!";
else
    speedMsg = "Whew I'll just walk from here Thanks."; 
```

您收到消息的原因是，eclipse 无法检查“if-else if”块中的比较是否有效，并且将始终设置 speedMsg（无默认值）。

恕我直言，第二种解决方案更优雅。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T14:23:06.863

请初始化speedMsg：

```
String speedMsg = null; 
```

那应该可以解决问题，*speedMsg 可能未初始化*。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T14:23:18.607

您必须包含一个`else`语句，因为编译器不够聪明，无法确定您已在and语句中包含了`speed`值的所有可能性。`if``if else`

请注意，局部变量是唯一没有默认值的变量，您需要对其进行初始化。

# linux-device-driver - 以纯数据读取多路串口usb

> ID：16217252
> 
> 赞同：2
> 
> 时间：2013-04-25T14:19:56.280
> 
> 标签：linux-device-driver, usbserial, puredata

我有来自 8 通道 ADC 芯片的多通道串行数据，我通过串行 USB 电缆连接到我的计算机。我想在 Pure Data 中使用这些单独的通道，但是 pd_comport 对象不读取多通道串行数据。我已经搜索了 Pd 讨论论坛，但没有提到如何做到这一点。关于我该如何去做的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:33:10.957

根据定义，*串行*连接只是单通道。如果您有多个（同步）通道，则称为*parallel*。

所以你的问题基本上是以下两个之一：

## 并行串行流

如果您通过不同的串行连接传输 8 个 ADC 通道，则您的（特殊）电缆应注册 8 个不同的设备（例如`/dev/ttyUSB5`，，`/dev/ttyUSB6`... `/dev/ttyUSB12`）。在这种情况下，只需使用多个`[comport]`对象（一个用于您要连接的每个串行设备）

## 单复用流

在（更有可能）的情况下，您的 ADC 通过多路复用数据在单个串行连接中传输 8 个通道，您必须自己解复用串行流。如何做到这一点，很大程度上取决于数据的实际格式。

假设您的 ADC 只有 8 位并且只有 4 个通道（为简单起见），那么您可能会收到一个串行流，例如：`... A1 B1 C1 D1 A2 B2 C2 D2 A3 B3 ....`（A、B、...是 4 个通道的样本；和 1,2、.. . 作为样本帧），那么您可以将信号解复用为 4 个流，例如

```
|
[t b              f]
|                  |
|  +------------+  |
[i ]/[+ 1]/[% 4]/  |
|                  |
[pack      0      0]
|
[route 0 1 2 3]
|  |   |   | 
```

在实践中，您的协议可能看起来略有不同（例如，应该有一种指定帧边界的方法（仅查看数字是没有办法的，无论您实际看到的是`A1 B1 C1 D1 A2 B2`还是`B1 C1 D1 A2 B2 C2`，所以不清楚第一个样本是属于 channelA 还是 channelB ）。

因此，您确实必须掌握协议定义并解释您从中获得的数据`[comport]`

# python - 如何在 Python 中用文字打印任何数字？

> ID：16217258
> 
> 赞同：0
> 
> 时间：2013-04-25T14:20:02.890
> 
> 标签：python, python-2.7

如果不使用库函数，如何在 Python 中打印任意数量的单词？有一些答案是使用库函数，但我想要核心代码。

```
Like:
    12345 = "twelve thousand three hundred and forty five"
    97835200 ="Nine core seventy eight lakh thirty five thousand two hundred"
    230100 = "Two lakh thirty thousand one hundred" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:27:50.217

代码：

* * *

```
>>>def handel_upto_99(number):
predef={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen",17:"seventeen",18:"eighteen",19:"nineteen",20:"twenty",30:"thirty",40:"forty",50:"fifty",60:"sixty",70:"seventy",80:"eighty",90:"ninety",100:"hundred",100000:"lakh",10000000:"crore",1000000:"million",1000000000:"billion"}
if number in predef.keys():
    return predef[number]
else:
    return predef[(number/10)*10]+' '+predef[number%10] 
```

* * *

```
>>>def return_bigdigit(number,devideby):
predef={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen",17:"seventeen",18:"eighteen",19:"nineteen",20:"twenty",30:"thirty",40:"forty",50:"fifty",60:"sixty",70:"seventy",80:"eighty",90:"ninety",100:"hundred",1000:"thousand",100000:"lakh",10000000:"crore",1000000:"million",1000000000:"billion"}
if devideby in predef.keys():
    return predef[number/devideby]+" "+predef[devideby]
else:
    devideby/=10
    return handel_upto_99(number/devideby)+" "+predef[devideby] 
```

* * *

```
>>>def mainfunction(number):
dev={100:"hundred",1000:"thousand",100000:"lakh",10000000:"crore",1000000000:"billion"}
if number is 0:
    return "Zero"
if number<100:
    result=handel_upto_99(number)

else:
    result=""
    while number>=100:
        devideby=1
        length=len(str(number))
        for i in range(length-1):
            devideby*=10
        if number%devideby==0:
            if devideby in dev:
                return handel_upto_99(number/devideby)+" "+ dev[devideby]
            else:
                return handel_upto_99(number/(devideby/10))+" "+ dev[devideby/10]
        res=return_bigdigit(number,devideby)
        result=result+' '+res
        if devideby not in dev:
            number=number-((devideby/10)*(number/(devideby/10)))
        number=number-devideby*(number/devideby)

    if number <100:
        result = result + ' '+ handel_upto_99(number)
return result 
```

* * *

将这三个函数一一复制并粘贴到您的 python shell 中。之后像这样运行：

回答：

```
>>>mainfunction(12345)
' twelve thousand three hundred forty five'

>>>mainfunction(0)
'Zero'

>>>mainfunction(100)
'one hundred'

>>>mainfunction(40230534)
' four crore two lakh thirty thousand five hundred thirty four' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:32:52.970

您可以使用 python 中可用的第三方库 num2word

```
num2word.to_card(1e25)
'ten septillion, one billion, seventy-three million, seven hundred and forty-one

this will avoid your long code and you can directly use it. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:32:04.307

下面是一个可以将数字转换为单词的函数。它使用数字的标准英文名称，但如果需要，您可以将其修改为您的特殊名称。此函数最多可以处理 10^60 个数字。通过调用函数来使用它： int2word(n) 其中 n 是数字

```
def int2word(n):
"""
convert an integer number n into a string of english words
"""
# break the number into groups of 3 digits using slicing
# each group representing hundred, thousand, million, billion, ...
n3 = []
r1 = ""
# create numeric string
ns = str(n)
for k in range(3, 33, 3):
    r = ns[-k:]
    q = len(ns) - k
    # break if end of ns has been reached
    if q < -2:
        break
    else:
        if  q >= 0:
            n3.append(int(r[:3]))
        elif q >= -1:
            n3.append(int(r[:2]))
        elif q >= -2:
            n3.append(int(r[:1]))
    r1 = r

#print n3  # test

# break each group of 3 digits into
# ones, tens/twenties, hundreds
# and form a string
nw = ""
for i, x in enumerate(n3):
    b1 = x % 10
    b2 = (x % 100)//10
    b3 = (x % 1000)//100
    #print b1, b2, b3  # test
    if x == 0:
        continue  # skip
    else:
        t = thousands[i]
    if b2 == 0:
        nw = ones[b1] + t + nw
    elif b2 == 1:
        nw = tens[b1] + t + nw
    elif b2 > 1:
        nw = twenties[b2] + ones[b1] + t + nw
    if b3 > 0:
        nw = ones[b3] + "hundred " + nw
return nw

'''Global'''

ones = ["", "one ","two ","three ","four ", "five ",
"six ","seven ","eight ","nine "]

tens = ["ten ","eleven ","twelve ","thirteen ", "fourteen ",
"fifteen ","sixteen ","seventeen ","eighteen ","nineteen "]

twenties = ["","","twenty ","thirty ","forty ",
"fifty ","sixty ","seventy ","eighty ","ninety "]

thousands = ["","thousand ","million ", "billion ", "trillion ",
"quadrillion ", "quintillion ", "sextillion ", "septillion ","octillion ",
"nonillion ", "decillion ", "undecillion ", "duodecillion ", "tredecillion ",
"quattuordecillion ", "sexdecillion ", "septendecillion ", "octodecillion ",
"novemdecillion ", "vigintillion "] 
```

# java - Dijkstra 与一堆。松弛后如何更新堆？

> ID：16217261
> 
> 赞同：2
> 
> 时间：2013-04-25T14:20:08.460
> 
> 标签：java, c, algorithm, graph, dijkstra

我正在尝试实现 Dijkstra 算法。

```
 foreach distance d
   d = INFINITY
 d[source] = 0

 create_heap_based_on_Distances();

 while(true)
   bestedge = heap[0]

   remove_minimum_from_heap //it will be heap[0]

   foreach adjacency of bestedge
      if (weight + bestedge_distance < current_distance)
      {
          current_distance = weight + bestedge_distance

          // Now I have to update heap, how can I do that?
      }
   if (heap_empty) break 
```

那么，在放松的时候，我怎样才能更新堆，所以它会有正确的顺序？在该步骤中，我没有该节点的堆索引。这是否意味着我必须创建一个新数组`nodes[edge] = heapIndex`，这样我才能获得该节点的堆索引？`insert_to_heap`但它似乎非常低效，因为我需要更新`remove_minimum`功能。

C 或 JAVA 代码都可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:40:19.997

> 这是否意味着我必须创建一个像nodes[edge] = heapIndex 这样的新数组，这样我才能获得该节点的堆索引？

是的。

> 但它似乎非常低效，因为我需要更新 insert_to_heap、remove_minimum 函数。

数组更新在理论上和实践中都非常便宜，而且每次堆操作只需要执行其中的一些操作，因此这根本不是低效的。此外，与图数据结构的存储成本相比，这种数组的内存使用非常便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:18:13.950

```
Does that mean I have to create a new array like nodes[edge] = heapIndex, 
so I could get a heap's index for that node? 
```

我不知道节点 [edge] 的确切含义。在我看来，它应该是一个 f[node]=HeapIndex 的 Map（确实是一个数组）f（它给出了该节点在 Heap 中的索引）。node[edge] 的存储效率不高。

那么如何实现MapHeap呢？我已经实现了一个高效的 MapHeap，但在代码中没有太多注释：

```
template<class DT>
struct MapHeap
{
    DT f[HEAP_SIZE+5];//store the distance
    int mp1[HEAP_SIZE+5];//val -> index
    // I assume the val is unique.
    // In the dijk, the val is the nodeId,so it must be unique. 
    // mp1[nodeId] gives the index of that node in my heap
    int mp2[HEAP_SIZE+5];//index -> val
    int nv;// number of node in my heap now
    MapHeap():nv(0)
    {
        memset(mp1,-1,sizeof(mp1));
        memset(mp2,-1,sizeof(mp2));
    }
    void print(int n)
    {
        for(int i=1;i<=n;i++) printf("%d ",f[i]);
        puts("");
        for(int i=1;i<=n;i++) printf("%d ",mp1[i]);
        puts("");
        for(int i=1;i<=n;i++) printf("%d ",mp2[i]);
        puts("");
    }
    void print(){print(nv);}
    bool resize(int n)
    {
        if (nv<0||nv>HEAP_SIZE) return 0;
        for(int i=n+1;i<=nv;i++)
        {
            mp1[mp2[i]]=-1;
            mp2[i]=-1;
        }
        nv=n;
        return 1;
    }
    DT top()//get the smallest element
    {
        if (nv<1) return DT(-1);
        return f[1];
    }
    DT get(int idx)
    {
        if (idx<1||idx>nv) return DT(-1);
        return f[idx];
    }
    // it's for unpdating the heap. It should be pravite method. 
    // Because I write this code for competition, so I just ignore the accsee controling
    void movedown(int now,int val,const DT &x)//this node is larger than son
    {
        for(;now*2<=nv;)
        {
            int a=now*2;
            int b=now*2+1;
            if (b<=nv&&f[b]<f[a]) a=b;
            if (f[a]>=x) break;
            f[now]=f[a];
            mp1[mp2[a]]=now;
            mp2[now]=mp2[a];
            now=a;
        }
        f[now]=x;
        mp1[val]=now;
        mp2[now]=val;
    }
    void moveup(int now,int val,const DT &x)//this node is smaller than father
    {
        for(;now>1;now>>=1)
        {
            int par=now>>1;
            if (f[par]<=x) break;
            f[now]=f[par];
            mp1[mp2[par]]=now;
            mp2[now]=mp2[par];
        }
        f[now]=x;
        mp1[val]=now;
        mp2[now]=val;
    }
    bool pop(int idx=1)//pop a element, pop the smallest element by default
    {
        if (idx<1||idx>nv) return 0;
        DT &x=f[nv];
        int v1=mp2[nv];
        int v2=mp2[idx];
        mp1[v1]=idx;
        mp2[idx]=v1;
        mp1[v2]=-1;
        mp2[nv]=-1;
        nv--;
        if (idx!=nv+1) movedown(idx,v1,x);
        x=0;
        return 1;
    }
    bool push(const DT &x,int val)//push a node, and with the value of val(in dijk, the val is the nodeId of that node)
    {
        int now=++nv;
        if (now>HEAP_SIZE) return 0;
        moveup(now,val,x);
        return 1;
    }
}; 
```

# c++ - C ++：对无符号短进行位移

> ID：16217262
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:20:09.083
> 
> 标签：c++, unsigned, short

我正在尝试将 2 个 unsigned char 保存到一个 unsigned short 中。所以我所做的是保存第一个字符，然后将其移位或使用第二个字符。

代码：

```
unsigned char a = 8;
unsigned char b = 2;
unsigned short c = a;
c << 8;
c |= b; 
```

但是我首先遇到了位移问题。运行此代码：

```
unsigned char a = 8;
unsigned short c = a;
c << 8;
cout << c; 
```

我希望得到 2048。我什至在这里检查过：http: [//www.miniwebtool.com/bitwise-calculator/bit-shift/](http://www.miniwebtool.com/bitwise-calculator/bit-shift/?data_type=10&number=8&place=8&operator=Shift+Left) ?data_type=10&number=8&place=8&operator=Shift+Left 。但相反，我得到了 8。我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:20:50.063

```
c <<= 8; 
```

不是

```
c << 8; 
```

第二种情况不会修改 c 的值。我本来希望你的编译器会警告你。

# c# - 出列一个类和单个值c#

> ID：16217263
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:20:10.880
> 
> 标签：c#, arrays, class, queue

[这是昨天的问题](https://stackoverflow.com/questions/16193052/giving-a-class-object-a-value-c-sharp)我有 2 个队列的后续 内容，它们包含 5 个元素，每个元素称为玩家 1 和玩家 2。他们使用类似以下内容进行排队

```
player2.Enqueue(chuckcards[i]); 
```

Chuck 卡是一个具有多个不同数据成员的类，包括 6 个整数和一个字符串。现在我希望将一个项目出列，将值提供给标签（每个数据成员多一个）并将字符串提供给图片框（我不需要帮助）。但我想知道如何从出队中获取值。我还想能够说在其他玩家队列上重新排队。所以我可能会使用峰值操作来获取值，然后如果结果成功，只需将其从队列 1 的末尾移到队列 2 上。

希望这很清楚。

任何帮助，将不胜感激。我已经四处寻找，但还没有找到真正的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:30:28.783

```
Queue<Foo> firstQueue = new Queue<Foo>();
Queue<Foo> secondQueue = new Queue<Foo>();
//todo populate
var item = firstQueue.Dequeue();
item.DoStuff();
secondQueue.Enqueue(item); 
```

# android - android：视频没有播放

> ID：16217264
> 
> 赞同：0
> 
> 时间：2013-04-25T14:20:11.527
> 
> 标签：android, video

我正在尝试运行存储在`assets/pages/id(id may be rice or sugar or meat ect)/id.mp4`. 在这个应用程序中，如果我触摸任何项目 ( `rice or sugar or meat`) 的视频，它将播放相应的 mp4 视频。但视频播放不正常。

试图找出但失败了。

下面是我的代码

```
package com.app.teachmesushi;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.util.HashMap;
import java.util.Map;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.content.res.AssetManager;
import android.graphics.PixelFormat;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnPreparedListener;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;
import android.os.Messenger;
import android.os.RemoteException;
import android.util.Log;
import android.widget.MediaController;
import android.widget.VideoView;

import com.flurry.android.FlurryAgent;

public class VideoActivity extends Activity implements OnPreparedListener {
private VideoView video;
private MediaController ctlr;
private String id;
private File file;
private ProgressDialog pd = null;
private Integer msec = -1;
private int start = 1;

Messenger mService = null;
boolean mIsBound;
final Messenger mMessenger = new Messenger(new IncomingHandler());

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFormat(PixelFormat.TRANSLUCENT);
    setContentView(R.layout.activity_video);

    final String id = getIntent().getExtras().getString("id");
    this.id = id;

    if (savedInstanceState != null) {
        msec = savedInstanceState.getInt("pos");
    }

    video = (VideoView) findViewById(R.id.video);
    ctlr = new MediaController(this, false);
    ctlr.setMediaPlayer(video);
    video.setMediaController(ctlr);
    video.setOnPreparedListener(this);

}

@Override
protected void onStart() {
    super.onStart();
    FlurryAgent.onStartSession(this, MainActivity.FLURRY_KEY);

    Map<String, String> articleParams = new HashMap<String, String>();
    articleParams.put("ID", id); // Capture user status
    FlurryAgent.logEvent("Video", articleParams);

    Log.e("sushi", "msec: " + msec);
    Log.e("sushi", "start: " + start);

    CheckIfServiceIsRunning();

    String fileName = id + ".mp4";
    file = new File(getExternalFilesDir(null), fileName);

    if (file.exists()) {
        video.setVideoPath(file.getPath());
    } else {
        // Show the ProgressDialog on this thread
        pd = ProgressDialog.show(VideoActivity.this, "Launching video",
                "Accessing...", true, false);
        pd.dismiss();

        // Start a new thread that will download all the data
        new DownloadTask().execute(fileName);
    }

    if (msec != -1) {
        video.seekTo(msec);
    } else if (start == 1) {
        start = 0;
        video.start();
    } else if (msec == video.getDuration()) {
        video.seekTo(0);
    }
}

@Override
public void onPause() {
    super.onPause();
    video.pause();
    msec = video.getCurrentPosition();
    pd.dismiss();
}

@Override
public void onStop() {
    super.onStop();
    video.pause();
    msec = video.getCurrentPosition();

    doUnbindService();
}

@Override
public void onDestroy() {
    super.onDestroy();

    video = null;
    ctlr = null;
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("pos", video.getCurrentPosition());
}

public void onPrepared(MediaPlayer mp) {
    try {
        video.requestFocus();
        ctlr.show();
    } catch (Exception e) {

    }
}

class DownloadTask extends AsyncTask<String, Void, Object> {
    protected Object doInBackground(String... args) {
        AssetManager am = getAssets();
        String fileName = args[0];
        File file = new File(getExternalFilesDir(null), fileName);
        Log.i("sushi", "Background thread starting");

        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            try {
                InputStream in = am.open("pages/" + id + "/" + id + ".mp4");
                //InputStream in = am.open("http://176.9.35.93/tmc/videos/old/equipments.mp4");
                FileOutputStream f = new FileOutputStream(file);
                byte[] buffer = new byte[1024];
                int len1 = 0;
                while ((len1 = in.read(buffer)) > 0) {
                    f.write(buffer, 0, len1);
                }
                f.close();
                in.close();
            } catch (Exception e) {
                Log.d("sushi", e.getMessage());
            }

            if (VideoActivity.this.pd != null) {
                VideoActivity.this.pd.dismiss();
                VideoActivity.this.pd = null;
            }
        }

        return null;
    }

    protected void onPostExecute(Object result) {
        Intent intent = new Intent(VideoActivity.this, VideoActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        Bundle b = new Bundle();
        b.putString("id", id);
        intent.putExtras(b);
        startActivity(intent);
        finish();
    }
}

@Override
public void onBackPressed() {
    try {
        Log.d("sushi", "Deleting file");
        file.delete();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.e("sushi", "File delete failed");
    }
    finish();
}

private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        mService = new Messenger(service);
        try {
            Message msg = Message.obtain(null,
                    TimerService.MSG_REGISTER_CLIENT);
            msg.replyTo = mMessenger;
            mService.send(msg);
        } catch (RemoteException e) {
            // In this case the service has crashed before we could even do
            // anything with it
        }
    }

    public void onServiceDisconnected(ComponentName className) {
        // This is called when the connection with the service has been
        // unexpectedly disconnected - process crashed.
        mService = null;
    }
};

private void CheckIfServiceIsRunning() {
    // If the service is running when the activity starts, we want to
    // automatically bind to it.
    if (TimerService.isRunning()) {
        doBindService();
    } else {
        Log.e("sushi", "Service not running");
    }
}

void doBindService() {
    bindService(new Intent(this, TimerService.class), mConnection,
            Context.BIND_AUTO_CREATE);
    mIsBound = true;
    Log.e("sushi", "Bound to service");
}

void doUnbindService() {
    if (mIsBound) {
        // If we have received the service, and hence registered with it,
        // then now is the time to unregister.
        if (mService != null) {
            try {
                Message msg = Message.obtain(null,
                        TimerService.MSG_UNREGISTER_CLIENT);
                msg.replyTo = mMessenger;
                mService.send(msg);
            } catch (RemoteException e) {
                // There is nothing special we need to do if the service has
                // crashed.
            }
        }
        // Detach our existing connection.
        unbindService(mConnection);
        mIsBound = false;
    }
}

class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case TimerService.MSG_SET_INT_VALUE:
            Log.e("sushi", String.valueOf(msg.arg1));
            if (msg.arg1 <= 1) {
                video.pause();
            }

            break;
        default:
            super.handleMessage(msg);
        }
    }
}
} 
```

我的 Logcat 错误是

```
04-25 21:15:57.371: E/sushi(273): msec: -1
04-25 21:15:57.371: E/sushi(273): start: 1
04-25 21:15:57.381: E/sushi(273): Service not running
04-25 21:15:58.121: E/sushi(273): msec: -1
04-25 21:15:58.121: E/sushi(273): start: 1
04-25 21:15:58.121: E/sushi(273): Service not running 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T07:01:25.990

一切都是`ok`。问题是我在模拟器中而不是在真实设备中运行此服务。当我在真实设备中测试时，它运行正常。但是模拟器中的问题。

# hadoop - 在 Windows 上使用 python 进行 Hadoop 流式传输

> ID：16217265
> 
> 赞同：3
> 
> 时间：2013-04-25T14:20:11.623
> 
> 标签：hadoop, hadoop-streaming, hortonworks-data-platform

我正在使用 Hortonworks HDP for Windows 并成功配置了一个主设备和 2 个从设备。

我正在使用以下命令；

`bin\hadoop jar contrib\streaming\hadoop-streaming-1.1.0-SNAPSHOT.jar -files file:///d:/dev/python/mapper.py,file:///d:/dev/python/reducer.py -mapper "python mapper.py" -reducer "python reduce.py" -input /flume/0424/userlog.MDAC-HD1.MDAC.local..20130424.1366789040945 -output /flume/o%1 -cmdenv PYTHONPATH=c:\python27`

映射器运行良好，但日志报告未找到 reduce.py 文件。在异常情况下，hadoop 任务运行程序似乎正在为 reducer 创建指向 mapper.py 文件的符号链接。

当我检查作业配置文件时，我注意到**mapred.cache.files**设置为；

hdfs://MDAC-HD1:8020/mapred/staging/administrator/.staging/job_201304251054_0021/files/mapper.py#mapper.py

看起来虽然 reduce.py 文件已添加到 jar 文件中，但它没有正确包含在配置中，并且在 reducer 尝试运行时无法找到。

我认为我的命令是正确的，我尝试使用 -file 参数，但没有找到任何文件。

任何人都可以看到或知道一个明显的原因吗？

请注意，这是在 Windows 上。

编辑-我刚刚在本地运行它并且它工作，看起来我的问题可能与集群周围的文件复制有关。

仍然欢迎输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T07:41:49.963

嗯，这很尴尬......我的第一个问题，我自己回答。

我通过重命名 hadoop conf 文件以强制使用默认设置来发现问题，这意味着本地作业跟踪器。

这项工作运行正常，它给了我解决问题所在的空间，看起来集群周围的通信没有像需要的那样完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:36:05.200

当我看到您的命令时，它会为 -files 选项显示“file:///d:/dev/python/reducer.py”，但您为 -reducer 指定了 reduce.py。这会导致问题吗？抱歉，我不确定。

# android - 合并android Gridview中的行和列

> ID：16217266
> 
> 赞同：2
> 
> 时间：2013-04-25T14:20:15.513
> 
> 标签：android, android-gridview

我正在android中做一个图像查看页面。我需要在某些地方合并行并在某些地方合并列。我们可以在gridview中做吗？如果我们选择任何合并的图像，则应选择总图像视图。请任何人告诉我一个建议。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-10T15:39:14.167

尝试[AsymmetricGridView](https://github.com/felipecsl/AsymmetricGridView)。我自己写的：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T14:22:18.220

> 我们可以在gridview中做吗

不，抱歉，`GridView`不支持行或列跨度。`GridLayout`但是，确实，并且`TableLayout`/`TableRow`支持列跨度。

您还可以查看[开放源代码`StaggeredGridView`](http://www.androidviews.net/2013/01/pinterest-like-adapterview/)。

# jquery - Jquery：带有div的列表上的SlideToggle

> ID：16217270
> 
> 赞同：0
> 
> 时间：2013-04-25T14:20:33.143
> 
> 标签：jquery, accordion, slidetoggle

我正在尝试使用列表元素为我的网站构建一个简单的菜单。问题是我想在单击箭头时显示'.second-row' div并隐藏任何其他打开的，但我尝试的所有方式都不起作用。

有人可以帮助我吗？例子在[这里](http://bit.ly/ZmZRHP)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:38:11.180

You need to get the `second-row` which corresponds to the `arrow-1` that was clicked:

```
$('a.arrow-1 ').click(function () {
    $('.second-row').slideUp();
    $(this).parent('.first-row').siblings('.second-row').slideDown();
}); 
```

### [Here's an updated fiddle](http://jsfiddle.net/mLBWC/4/)

**Note:** You'll probably want to add some logic to check the last clicked `arrow-1`, and return if it's the same as the current clicked one so that the `slideUp()/slideDown()` doesn't occur when clicking the same `arrow-1` twice.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:47:29.030

我只是改变了点击事件

```
$('a.arrow-1 ').click(function () {
            //alert("clicked");
            var cli=$(this).closest('li').find('.second-row');
            alert(cli);
            $(cli).slideToggle();
        }); 
```

你可以从[这里得到工作副本](http://jsfiddle.net/dreamweiver/mLBWC/8/)

快乐编码:)

# android - 使用新的应用内计费，不再发送 com.android.vending.billing.PURCHASE_STATE_CHANGED 意图

> ID：16217272
> 
> 赞同：4
> 
> 时间：2013-04-25T14:20:39.570
> 
> 标签：android, in-app-purchase, in-app-billing

我的 Android 应用使用[OLD (V2) 版本的 Android 应用内计费架构进行](https://developer.android.com/google/play/billing/v2/api.html)应用内购买。我还不能将我的客户更新到 V3。但是，在某些手机上，现在在购买过程中会显示一种新的“结账体验”——谷歌提供的购买商品的对话框已经变成了更现代的外观。这很好，除了随着这个变化，应用内购买流程的一个关键部分已经停止工作，即发送 com.android.vending.billing.PURCHASE_STATE_CHANGED 意图，这非常重要。

想我一定是做错了什么，我找到了[旧的示例应用程序](http://code.google.com/p/marketbilling/source/checkout)(Dungeons)，它说明了旧 V2 应用内购买 API 的使用。果然，这个示例也无法完成购买，因为 Android（带有新的更高级的应用内购买对话框）不再发送该意图。

有没有其他人看到他们旧的 V2 应用内购买流程中断，并找到了解决它的方法？

我很想附上应用程序内购买对话框在旧手机（Dungeons 示例成功进行购买）和新手机（Dungeons 由于缺少 PURCHASE_STATE_CHANGED 意图）上的外观图像。不幸的是，我在 Stack Overflow 上没有足够的声誉来发布图片链接。

谢谢！

格雷格

# delphi - 如何使用 vsIcon 样式 OwnerDraw TListView 位图？

> ID：16217281
> 
> 赞同：0
> 
> 时间：2013-04-25T14:20:51.170
> 
> 标签：delphi

StackOverFlow 中有一些很好的示例，可以在具有 vsReport 样式的 TListView 中拥有子项，但我找不到任何关于如何在具有 vsIcon 样式的 TListView 中拥有位图的示例？

我的位图存储在第三方列表中，并调整为 32x32。我不想使用 ImageList，因为位图在第三方列表中可用。下面显示的代码绘制了第一个图标 ok，但其余项目为空。 **我应该在其他可以访问 TRect 的事件中这样做吗？**

```
procedure TForm1.cxListView1CustomDrawItem(Sender: TCustomListView; Item: TListItem;
  State: TCustomDrawState; var DefaultDraw: Boolean);
var
  iBitmap: TBitmap;
  iRect: TRect;
begin
  { Create a TBitmap }
  iBitmap := TBitmap.Create;
  iBitmap.Width := 32;
  iBitmap.Height := 32;
  if Item.Index <> -1 then
  begin
    { Copy a bitmap from the list to iBitmap }
    AIEImageList.Image[Item.Index].CopyToTBitmap(iBitmap);
    { Resample the bitmap }
    iBitmap.IEResample(32, 32);
    {FIX}
    iRect := Item.DisplayRect(drBounds);
    { Draw the bitmap }
    Sender.Canvas.Draw(iRect.Left, iRect.Top, iBitmap);
  end;
  iBitmap.Free;
end; 
```

# android - 如何从源代码授予对特定应用程序的 root 访问权限而不是 root ROM？

> ID：16217294
> 
> 赞同：8
> 
> 时间：2013-04-25T14:21:24.173
> 
> 标签：android, root

我正在从源代码编译一个 Android ROM，我有一个应用程序，我希望它被预先安装并让它以 root 权限运行。

如何在不root整个ROM的情况下授予对此特定应用程序的root访问权限？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T17:04:37.053

# 希望你不需要root...

典型的库存 Android ROM 为很少的东西提供 root 权限，符合[最小权限原则](http://en.wikipedia.org/wiki/Principle_of_least_privilege)。相反，应用程序被授予他们需要的精确权限。

为什么您需要此应用程序具有 root 权限？您应该首先查看[所有内部未发布的 Android 权限](http://androidxref.com/4.1.1/xref/frameworks/base/core/res/AndroidManifest.xml)列表，看看其中一个是否符合您的要求。由于您正在构建系统应用程序，因此您甚至可以使用`signature`其他应用程序通常不可用的权限。您只需要确保您的应用程序由您构建 Android ROM 所用的密钥签名 - 然后您可以将其与 ROM 一起分发或单独分发，它仍然可以访问您所需的权限。

这样做的好处是：

*   如果您的应用程序受到损害或存在错误，则影响是有限的。
*   您的实际 Java 代码具有这些权限，因此无需编写繁琐的命令行。

因此，如果您可以通过这种方式完成任务，那就去做吧。

# 但如果你真的...

如果你真的需要root，那么事情就会变得棘手。

你有三个选择。按优先顺序：

*   添加新的系统服务。
*   添加一些替代的 setuid-root 二进制文件，它可以满足您的需要。
*   修改`su`二进制文件以准确检查谁在调用它。

如果你真的需要root，那么我会[添加一个新的系统服务](https://stackoverflow.com/questions/3232718/how-to-add-a-system-service-to-the-android-framework)。这可以以 root 身份运行。然后，您将添加合适的额外 API，以便您的应用程序可以调用它 - 并且权限可以是 -`signature`级别，以便只有您的系统应用程序可以调用它。这是在 Android 领域的架构上“正确”的方式。

第二个或第三个选项涉及创建一些命令行工具来执行您想要的操作，但我不知道这种工具检查谁在调用它的安全方法。允许任何应用程序调用此功能可能是可以接受的。如果是这样，一个新的 setuid-root 可执行文件可能是要走的路。但是，正如我所说，我不知道如何阻止其他应用程序运行它。

# django - Celery Task 下面这两个任务的区别

> ID：16217297
> 
> 赞同：4
> 
> 时间：2013-04-25T14:21:28.020
> 
> 标签：django, django-celery

下面这两个任务有什么区别？

第一个出错，第二个运行正常。两者都是相同的，它们接受额外的参数并且它们都以相同的方式调用。

```
ProcessRequests.delay(batch) **error object.__new__() takes no parameters**

SendMessage.delay(message.pk, self.pk) **works!!!!** 
```

现在，我已经意识到错误的含义，但我的困惑是为什么一个有效而另一个无效。

任务...

**1)**

```
class ProcessRequests(Task):
    name = "Request to Process"
    max_retries = 1
    default_retry_delay = 3

    def run(self, batch):
       #do something 
```

**2)**

```
class SendMessage(Task):
    name = "Sending SMS"
    max_retries = 10
    default_retry_delay = 3

    def run(self, message_id, gateway_id=None, **kwargs):
        #do something 
```

完整的任务代码....

```
from celery.task import Task
from celery.decorators import task

import logging

from sms.models import Message, Gateway, Batch
from contacts.models import Contact
from accounts.models import Transaction, Account

class SendMessage(Task):
    name = "Sending SMS"
    max_retries = 10
    default_retry_delay = 3

    def run(self, message_id, gateway_id=None, **kwargs):
        logging.debug("About to send a message.")

        # Because we don't always have control over transactions
        # in our calling code, we will retry up to 10 times, every 3
        # seconds, in order to try to allow for the commit to the database
        # to finish. That gives the server 30 seconds to write all of
        # the data to the database, and finish the view.
        try:
            message = Message.objects.get(pk=message_id)
        except Exception as exc:
            raise SendMessage.retry(exc=exc)

        if not gateway_id:
            if hasattr(message.billee, 'sms_gateway'):
                gateway = message.billee.sms_gateway
            else:
                gateway = Gateway.objects.all()[0]
        else:
            gateway = Gateway.objects.get(pk=gateway_id)

        # Check we have a credits to sent me message
        account = Account.objects.get(user=message.sender)
        # I'm getting the non-cathed version here, check performance!!!!!
        if account._balance() >= message.length:
            response = gateway._send(message)

            if response.status == 'Sent':
                # Take credit from users account.
                transaction = Transaction(
                    account=account,
                    amount=- message.charge,
                    description="Debit: SMS Sent",

                    )
                transaction.save()
                message.billed = True
                message.save()
        else:
            pass

        logging.debug("Done sending message.")

class ProcessRequests(Task):
    name = "Request to Process"
    max_retries = 1
    default_retry_delay = 3

    def run(self, message_batch):
        for e in Contact.objects.filter(contact_owner=message_batch.user, group=message_batch.group):
            msg = Message.objects.create(
                recipient_number=e.mobile,
                content=message_batch.content,
                sender=e.contact_owner,
                billee=message_batch.user,
                sender_name=message_batch.sender_name
            )
            gateway = Gateway.objects.get(pk=2)
            msg.send(gateway)
            #replace('[FIRSTNAME]', e.first_name) 
```

试过：

```
 ProcessRequests.delay(batch) should work gives error error object.__new__() takes no parameters     
 ProcessRequests().delay(batch) also gives error error object.__new__() takes no parameters 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:22:02.957

我能够重现您的问题：

```
import celery
from celery.task import Task

@celery.task
class Foo(celery.Task):
    name = "foo"
    def run(self, batch):
       print 'Foo'

class Bar(celery.Task):
    name = "bar"
    def run(self, batch):
       print 'Bar'

# subclass deprecated base Task class
class Bar2(Task):
    name = "bar2"
    def run(self, batch):
       print 'Bar2'

@celery.task(name='def-foo')
def foo(batch):
    print 'foo' 
```

输出：

```
In [2]: foo.delay('x')
[WARNING/PoolWorker-4] foo

In [3]: Foo().delay('x')
[WARNING/PoolWorker-2] Foo

In [4]: Bar().delay('x')
[WARNING/PoolWorker-3] Bar

In [5]: Foo.delay('x')
TypeError: object.__new__() takes no parameters

In [6]: Bar.delay('x')
TypeError: unbound method delay() must be called with Bar instance as first argument (got str instance instead)

In [7]: Bar2.delay('x')
[WARNING/PoolWorker-1] Bar2 
```

我看到您使用了已弃用`celery.task.Task`的基类，这就是您没有收到`unbound method`错误的原因：

```
Definition: Task(self, *args, **kwargs)
Docstring:
Deprecated Task base class.

Modern applications should use :class:`celery.Task` instead. 
```

我不知道为什么`ProcessRequests`不起作用。也许是一些缓存问题，您之前可能曾尝试将装饰器应用于您的类并且它被缓存了，这正是您尝试将此装饰器应用于 Task 类时遇到的错误。

删除所有 .pyc 文件，重新启动 celery workers 并重试。

**不要直接使用类**

1.  [每个（工作）进程只实例化一次任务](http://docs.celeryproject.org/en/latest/userguide/tasks.html#instantiation)，因此每次创建任务类的对象（在客户端）没有意义，即`Bar()`是错误的。
2.  `Foo.delay()`或`Foo().delay()`可能或可能不工作，取决于装饰器`name`参数和类`name`属性的组合。

`celery.registry.tasks`从字典中获取任务对象，或者只`@celery.task`在函数上使用装饰器（`foo`在我的示例中）。

# scala - 递归集合并集：它是如何工作的？

> ID：16217304
> 
> 赞同：29
> 
> 时间：2013-04-25T14:21:40.890
> 
> 标签：scala, recursion, functional-programming, theory

我目前在下班后的空闲时间在 Coursera 上学习 Scala 课程，试图最终尝试函数式编程。我目前正在处理一项任务，我们应该“计算”包含某个对象的两个集合的并集。我故意省略了细节，因为这对我在这里要问的内容并不重要。然而，相关的是集合被定义为二叉树，每个节点包含一个元素和两个子树。

既然如此；讲座中的例子`union`如下：

```
def union(other:BTSet) :BTSet = ((left union right) union other) incl element 
```

**问题1：**坦率地说，即使在阅读了相关的FAQ和其他论坛帖子之后，我仍然不明白这个功能是如何以及为什么起作用的。除了在头节点添加（调用）元素之外，在联合实现中这里绝对没有“动作” `incl`，它只是一遍又一遍地调用自己。我会非常感谢一些解释......

**问题2：**课程论坛中有很多帖子说这个解决方案根本没有效率，而且还不够好。看到我不明白它是如何工作的，我真的不明白为什么它不够好。

请注意，我不会以任何方式要求对分配解决方案进行剧透。我非常愿意“为成绩做作业”，但我根本不明白我应该在这里做什么。我不相信课程中提供的说明和指导足以让您了解函数式编程的怪癖，因此我欢迎任何*关于如何正确思考*而不是*如何正确编码的*评论/答案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-25T15:15:27.107

```
 A
 / \  union  D
B   C

((B union C) union D) incl A
  ^^^^^^^^^......................................assume it works

(  B             )
(    \   union D ) incl A
(     C          )

(((0 union C) union D) incl B) incl A
   ^^^^^^^^^.....................................just C

(((C union D) incl B) incl A
   ^^^^^^^^^.....................................expand

((((0 union 0) union D) incl C) incl B) incl A
    ^^^^^^^^^....................................just 0

(((0 union D) incl C) incl B) incl A
   ^^^^^^^^^.....................................just D

((D incl C) incl B) incl A
^^^^^^^^^^^^^^^^^^^^^^^^^^.......................all incl now 
```

一步一步写出来。现在您看到 union 简化为一组应用于右侧参数的 incl 语句。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T14:54:44.053

我收集到`incl`将元素插入现有集合？如果是这样，那就是所有真正的工作正在发生的地方。

并集的定义是包含任一输入集中所有内容的集合。给定两个存储为二叉树的集合，如果将第一个集合的并集与第二个集合的分支相结合，则结果中唯一可能丢失的元素是第二个树的根节点处的元素，所以如果你插入那个元素你有两个输入集的联合。

这只是将两个集合中的每个元素插入到一个开始为空的新集合中的一种非常低效的方法。推测重复项被 丢弃`incl`，因此结果是两个输入的并集。

* * *

也许暂时忽略树结构会有所帮助；它对基本算法并不重要。假设我们有抽象的数学集合。给定一个包含未知元素的输入集，我们可以做两件事：

*   向其中添加一个元素（如果该元素已经存在，则不执行任何操作）
*   检查集合是否非空，如果是，则将其分解为单个元素和两个不相交的子集。

为了取两个集合 {1,2} 和 {2,3} 的并集，我们首先将第一个集合分解为元素 1 和子集 {} 和 {2}。我们使用相同的过程递归地取 {}、{2} 和 {2,3} 的并集，然后将 1 插入结果中。

在每一步，问题从一个联合运算减少到两个较小输入的联合运算；一个标准的分治算法。当达到单例集 {x} 和空集 {} 的联合时，联合是平凡的 {x}，然后返回到链上。

树结构仅用于允许案例分析/分解成更小的集合，并使插入更有效。使用其他数据结构也可以做到这一点，例如将列表分成两半以进行分解，并通过详尽的唯一性检查完成插入。要有效地采用联合，需要一种更聪明的算法，并利用用于存储元素的结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-19T23:03:57.567

因此，基于上述所有响应，我认为真正的主力是`incl`递归调用方式`union`只是为了遍历集合中的所有元素。

我想出了以下联合的实现，这更好吗？

```
def union(other:BTSet) :BTSet = right union (left union (other incl element)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-12T18:42:11.397

```
 2
 / \  union  4
1   3

((1 union 3) union 4) incl 2
  ^^^^^^^^^......................................assume it works

(((E union E) union 3 incl 1) union 4) incl 2
   ^^^^^^^^^.....................................still E

(E union E) union 3 incl 1 = E union 3 incl 1 = 3 incl 1 
```

The following subtree should be **3** *incl* **1**

```
(  3             ) 
(    \   union D ) incl 2
(      1         )

(((1 union E) union 4) incl 3) incl 2
   ^^^^^^^^^.......................................expand

(((( (E union E) union E) incl 1) union 4) incl 3) incl 2
      ^^^^^^^^^^^^^^^^^^^^^^^^^^..................still 1

((1 union 4) incl 3) incl 2
   ^^^^^^^^......................................continue

((((E union E) union 4) incl 1) incl 3) incl 2
   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^..........expand 1 union 4

((4 incl 1) incl 3) incl 2
  ^^^^^^^^^^^^^^^^^^^^^^^^^............Final union result 
```

Thanks @Rex Kerr draws out the steps. I substitute the second step with the actual runtime step, which may give a more clear description of the Scala `union` function.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-30T23:26:35.677

除非您查看基本案例，否则您无法理解递归算法。事实上，很多时候，理解的关键在于首先理解基本情况。由于未显示基本情况（可能是因为您一开始没有注意到有一个），因此无法理解。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-11-21T20:49:24.510

我正在做同样的课程，上面的实现`union`确实效率极低。

我想出了以下不太实用的解决方案来创建二叉树集合的联合，这更有效：

```
def union(that: BTSet): BTSet = {
  var result:BTSet = this
  that.foreach(element => result = result.incl(element))
  result
} 
```

# javascript - 我的代码没有加载图像

> ID：16217305
> 
> 赞同：0
> 
> 时间：2013-04-25T14:21:44.823
> 
> 标签：javascript, json

我遇到了一个问题，我的代码承认要拉入的正确对象。但是，当我测试我的文件时，根本没有拉入图像。我已经仔细检查并收到 404 响应，但文件存在于正确的目录中。

```
//JSON OBJECT SAMPLE IS BELOW, A SEPARATE FILE....
var reviews = [{
        Id: "ajjhwejkssl",
        Title: "The little camera that could!",
        Rating: 5,
        Body: "TEXT HERE",
        CreateDate: new Date(2012, 5, 23, 14, 12, 10, 0),
        Owner: {
            Id: "kwergiueerwq",
            Name: "Bugs Bunny",
            Url: "./users.html?id=kwergiueerwq",
            AvatarImage: "./avatars/bugsbunny.jpg",
            IsFeaturedReviewer: false,
            CreateDate: new Date(2012, 2, 12, 9, 44, 0, 0)
        }
    }
]

//CODE
var data = reviews;
$(document).ready(function () {
    //console.log("browser: " + browser);
    for (var i = 0; i < data.length; i++) {
        try {
            //CREATE NEW REVIEW DIV
            var reviewPost = "<div class='review'><div class='clear'></div><div class='content'><div class='datePosted'>" + data[i].CreateDate + "</div><div class='avatar'><div class='header'><div class='rating'><img src='images/star-sprite.png'/><img src='images/star-sprite.png'/><img src='images/star-sprite.png'/><img src='images/star-sprite.png'/><img src='images/star-sprite.png'/></div></div><div class='clear'></div><div class='title'>" + data[i].Title + "</div><div class='memberImg'><img id='thumb' src=" + data[i].Owner.AvatarImage + "/></div><div id='member'><div class='reviewedBy'>Reviewed by <a href='' class='member'>" + data[i].Owner.Name + "</a></div><div class='membership'>Member Since " + data[i].Owner.CreateDate + "</div></div></div></div><div class='clear'></div><div class='message'>" + data[i].Body + "</div></div><div class='clear'></div>";
            if (data[i].Rating != null) {
                console.log("Rating: " + data[i].Rating);
            }
            //adds reviewPost inside of reviews
            review.append(reviewPost);
            //document.write(reviewPost);
        } catch (e) {
            console.log("error: " + e);
        };
    }
}); 
```

任何想法和建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:29:42.380

正如我所知，路径中的点无关紧要，但是：

此外，请确保头像目录实际上位于您的 Web 目录的根目录中。

# mongodb - MongoDB更新。_id 上的 setOnInsert Mod 不允许

> ID：16217306
> 
> 赞同：5
> 
> 时间：2013-04-25T14:21:46.113
> 
> 标签：mongodb

我了解您无法在现有 mongodb 文档上更新 _id 的事实。

但是有没有理由我们不能在“setOnInsert”部分的 upsert 中使用它？因为它是“插入时”，所以它不是更新。

我的预期用法是这样的：

```
db.myCol.update({_id:12345},{$setOnInsert:{_id:12345},$set:{myValue:'hi'}}); 
```

这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-26T06:57:59.247

MongoDB 将 upsert 查询的“查询”部分用作集合的一部分，这意味着您不必在要指定自己的 _id 的集合部分中指定 _id。

注意：我上面的查询也有一个小错误，即缺少 upsert 标志。

这是正确的查询：

```
db.myCol.update({_id:12345},{$set:{myValue:'hi'}},{upsert:true}); 
```

如果记录不存在，则此查询将插入如下所示的记录：

```
{_id:12345,myValue:'hi'} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-18T20:27:15.480

真的，这是在开发版本 2.5.4 或版本 2.6.0 中修复的 mongo 中的错误：

[https://jira.mongodb.org/browse/SERVER-9958](https://jira.mongodb.org/browse/SERVER-9958)

一旦解决了这个问题，我相信这应该可以正常工作。在一般情况下，更新查询不一定指定“_id”字段。

# php - 如何修复 PHP 中未定义的索引

> ID：16217311
> 
> 赞同：-3
> 
> 时间：2013-04-25T14:21:58.497
> 
> 标签：php

这是一个小问题，但为什么我会收到此错误消息？

```
Severity: Notice

Message: Undefined index: filter

Filename: libraries/Functions.php(656) : eval()'d code

Line Number: 43 
```

它说问题出在这里：

```
$filter2 = $_GET['filter']; 
```

我已将我的 GET 定义为 filter2，我想使用 filter2 来比较它是否包含单词“RealScan”

如果我使用 isset()，问题将得到解决，但它也会将我的 GET 转换为整数，所以我不能使用它。

```
if($filter2 == 'RealScan')
{
//something here  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:22:50.807

您需要在使用它之前检查它是否已定义：

```
$filter2 = isset($_GET['filter']) ? $_GET['filter'] : ''; 
```

# c# - 静态和密封类差异

> ID：16217313
> 
> 赞同：155
> 
> 时间：2013-04-25T14:22:05.450
> 
> 标签：c#, .net, oop, static, sealed

1.  有没有在静态类中实现的类？方法：

    ```
    static class ABC : Anyclass 
    ```

2.  是否有任何类可以在密封类和静态类中继承？
    方法：

    ```
    static class ABC : AClass {} 
    ```

    和

    ```
    sealed class ABC : AClass {} 
    ```

我可能在某种程度上是错的吗？

* * *

## 回答 #1

> 赞同：677
> 
> 时间：2013-04-25T14:28:02.310

这可能会帮助您：

```
+--------------+---+-------------------------+------------------+---------------------+
|  Class Type  |   | Can inherit from others | Can be inherited | Can be instantiated | 
|--------------|---|-------------------------+------------------+---------------------+
| normal       | : |          YES            |        YES       |         YES         |
| abstract     | : |          YES            |        YES       |         NO          |
| sealed       | : |          YES            |        NO        |         YES         |
| static       | : |          NO             |        NO        |         NO          |
+--------------+---+-------------------------+------------------+---------------------+ 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-04-25T14:30:53.690

简单来说

**静态类**

> 一个类可以声明为静态的，表明它只包含静态成员。无法使用 new 关键字创建静态类的实例。加载包含类的程序或命名空间时，.NET Framework 公共语言运行时 (CLR) 会自动加载静态类。

**密封类**

> 密封类不能用作基类。密封类主要用于防止派生。因为它们永远不能用作基类，所以一些运行时优化可以使调用密封类成员的速度稍快一些。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-25T14:25:02.083

你可以让一个`sealed`类从另一个类继承，但你不能*从*一个`sealed`类继承：

```
sealed class MySealedClass : BaseClass // is ok
class MyOtherClass : MySealedClass     // won't compile 
```

一个`static`类不能从其他类继承。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-22T11:37:25.977

您可以简单地将它们区分为：

```
 Sealed Class       |        Static Class
--------------------------|-------------------------
it can inherit From other | it cannot inherit From other
classes but cannot be     | classes as well as cannot be
inherited                 | inherited 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-05T11:47:07.577

简单的回答是**密封类不能用作基类**。

我试图向您展示密封类是下面代码中的派生类

```
 public sealed class SealedClass : ClassBase
{
    public override void Print()
    {
        base.Print();
    }
} 
```

另一个密封特性只能通过它的实例访问。（你不能从它继承）

```
 class Program
{
    static void Main(string[] args)
    {
        SealedClass objSeald = new SealedClass();
        objSeald.Name = "Blah blah balh";
        objSeald.Print();

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-26T08:23:18.427

1 - 不，您不能实现静态类。

2 - 不，您不能从静态或密封类继承

# ocaml - 如何在 OCaml 中定义 int64？

> ID：16217318
> 
> 赞同：4
> 
> 时间：2013-04-25T14:22:14.497
> 
> 标签：ocaml

`let i = 32`会给我一个`int32`。

如果我想定义一个`int64`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T14:23:39.497

```
let i = 32L 
```

（Objective Caml 3.07 中引入的 int64 文字的后缀 L）

并使用模块 Int64：[http](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Int64.html) ://caml.inria.fr/pub/docs/manual-ocaml/libref/Int64.html 你也应该真正使用谷歌......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T14:34:48.693

`let i = 32`会给你一个 type`int`而不是的值`int32`。

您可以`int64`通过在 piokuc 和 user1034081 指出的数字后添加 L 来获得一个值，但我不确定这是您想要做的。你为什么要`int64`？

OCaml 有一个与其他语言不同的整数内部表示，它将它们存储在 31 位或 63 位（取决于您的架构），因为它需要一个额外的位用于 GC。如果您没有很好的使用理由`int64`（即您想在 OCaml 中使用 C 代码或在 C 中使用 OCaml 代码），请使用`int`类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T14:25:41.397

您可以为 int64 指定后缀“L”：

```
let i = 32L 
```

导致： val i : int64 = 32L

# python - Apache 中 web.py 的全局变量使用

> ID：16217322
> 
> 赞同：1
> 
> 时间：2013-04-25T14:22:19.157
> 
> 标签：python, apache, post, web.py

当我使用 Apache 配置我的 web.py 代码时，我遇到了一个奇怪的问题。我有 3 个变量需要在 2 个类中使用。我曾经使用全局变量来处理这个问题，但不幸的是现在这不起作用。

例子：

```
 urls = (
              '/', 'index',
              '/result','Result' 
   )
   # index is basically a form which takes some inputs     
   class index:
        def POST(self):
                global VAR1, VAR2, VAR3
                 i = web.input()
                 VAR1 = i.word1.__str__()
                 VAR2 = i.word2.__str__()
                 VAR3 = i.word3.__str__()
                 raise web.seeother('/result')
   class Result:
        def GET(self):
                print VAR1, VAR2
                return r_result(VAR1, VAR2)
        def POST(self):
                print VAR2, VAR3 
```

当我独立运行代码（即 python webappy.py）时，这工作得非常好，但是当在 apache 设置中使用时，它给出：

NameError：全局名称 'VAR1' 未在 Result.Get 的打印语句中定义

我正在检查 ApplicationIssues：[http](http://code.google.com/p/modwsgi/wiki/ApplicationIssues) ://code.google.com/p/modwsgi/wiki/ApplicationIssues并发现了以下声明。

**应用程序全局变量**

*因为托管 WSGI 应用程序的 Python 子解释器在请求之间保留在内存中，所以任何全局数据都是有效的持久性，并且可以用于将状态从一个请求传递到下一个请求。然而，在 UNIX 系统上，Apache 通常会使用多个进程来处理请求，并且每个这样的进程都有自己的全局数据。这意味着虽然可以使用全局数据，但它只能用于缓存可以在该单个进程的上下文中安全重用的数据。您不能使用全局数据作为保存任何请求处理程序必须可见的信息的手段，无论它在哪个进程中运行。*

我必须在类和函数之间传递这些变量。我尝试将变量附加到**内置**和网络模块，但它也没有锻炼。

PS：我也不想将这些变量存储在文件或数据库中。

我希望我说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:10:23.517

开发 Web 应用程序时不应该依赖全局变量，因为在某些时候它可能被配置为在不会共享这些变量的单独进程中运行。

为了让它们保持在请求之间，您应该从持久存储中保存和加载它们，所以我猜如果不使用数据库或类似的解决方案是不可能的。

加载和保存它们的一个好方法是使用[应用程序处理器](http://webpy.org/cookbook/application_processors)，它将这些变量加载到 web.ctx 中，以便您可以在控制器方法中访问它们。

例如：

```
def global_variables_processor(handle):
    # load variables from persistent storage and save them in web.ctx.global_variables
    try:
        return handle()
    finally:
        # save variables from web.ctx.global_variables in persistent storage

app = web.application(urls, globals()
app.add_processor(global_variables_processor) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:35:37.137

好吧，您的问题的摘录中有一个可能的原因...

> Apache 通常会使用多个进程来处理请求，并且每个这样的进程都有自己的全局数据。

...因此，如果您已将 apache 配置为使用永不终止的单个进程，并且指令...

```
MaxClients 1
MaxRequestsPerChild 0 
```

如果这不是一个实际的选择，您将不得不将这些变量存储在其他地方。

# google-maps - 按业务类型过滤的 Google 自动填充功能

> ID：16217325
> 
> 赞同：0
> 
> 时间：2013-04-25T14:22:23.787
> 
> 标签：google-maps, google-places-api

我正在尝试使用 Google Maps API 通过键入您要查找的栏来自动完成以查找附近的酒吧。这似乎不属于 API 的用户故事。我在弄清楚我需要使用哪些技巧组合来完成此操作时遇到问题。

1.  自动完成功能没有足够细化的地点类型（机构、地理编码）来仅过滤酒吧，因此我的预测充满了加油站、律师事务所和墓地。

2.  附近搜索的粒度足以过滤 type=bar 但不能用作自动完成，因为名称和关键字参数是完全匹配的。所以当我搜索“craw”时，我得到的是 ZERO_RESULTS 而不是“Crawdaddy's”。

3.  接下来，我想我会得到预测，应用 type=bar 过滤器对同一位置进行雷达搜索，我只会根据参考号获取雷达结果中的预测。NO GO，要么雷达搜索使用的参考编号与自动完成不同，要么没有将最近的 type=bay 返回到我的位置。

所以最终，我问我在这里是在做傻事，还是有办法实现按业务类型过滤的自动完成功能？

谢谢， 塔尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:08:57.000

我很抱歉成为坏消息的承担者。我将介绍您的三个可能的想法：

*   自动完成将匹配关键字。律师通常称自己为大律师，所以你有通配符把你搞砸了。**但是**，如果有帮助的话，有一个可选的*类型*参数可以让您在其中按类型进行过滤。

*   我实际上在这个上得到了相反的结果。使用以下参数：

> ```
> query=etoi
> types=bar
> location=50,2
> sensor=true
> radius=20000 
> ```

产生第一个结果：

> {“几何”：{“位置”：{“纬度”：50.1089160，“lng”：1.831840}}，“图标”：“ [http://maps.gstatic.com/mapfiles/place_api/icons/bar-71。 png](http://maps.gstatic.com/mapfiles/place_api/icons/bar-71.png) ", "id" : "3ec8233a732b4ee70dbb03034e2e20f84517763d", "name" : "L'Etoile du Jour", "rating" : 4.30, "reference" : "CnRuAAAAgOI6rLfSjaWyY_MRdK8zybHJOmAoqBLEtAgIxaZN5_UAS7WbWSYBukIro9ZCuiXSa9_HCOeHUmKPKkS6j9lxrET8cRX089azCKfvbR-lMFmzUb3Sd2VoWr02yPGJhXDBT7TjMpPPiuTWsZCY0Mcy9xIQHiE-o5v_EURALkxNElUPnRoUXcuht7Ov6k64DT1eA8-t9NR6-O8", "types" : [ “酒吧”、“餐厅”、“食物”、“机构”]、"vicinity" : "2 Chaussée Marcadé, Abbeville" },

所以我猜还有更多的事情在起作用，但是您必须就这个问题向 Google 询问或提供您的确切搜索参数（不包括键）供我查看。

*   这是一个糟糕的主意，因为radarSearch 对您的信用余额的查询量是任何其他 API 的 5 倍，而且它不返回 ID，因此您无法交叉引用。这很可能是一个死胡同。

# jquery - JQuery：更改 URL 参数而不重新加载？

> ID：16217326
> 
> 赞同：7
> 
> 时间：2013-04-25T14:22:24.343
> 
> 标签：jquery, url, url-rewriting

我有一个问题，是否可以在以下情况下通过 JQuery 更改 URL：

*   相同的 URL 将在浏览器返回和重新加载时加载
*   更改参数时页面不会重新加载

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:37:44.670

如果你想阻止页面重新加载，你必须使用哈希“#”

如果您想更改 URL，请尝试：

```
jQuery.param.querystring(window.location.href, 'valueA=321&valueB=123'); 
```

这将返回以下 URL：

[http://bla.com/test.html?valueA=321&valueB=123](http://bla.com/test.html?valueA=321&valueB=123)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:28:06.233

我可能错了，但我认为如果您更改位置，浏览器会发帖。

那么，它可以帮助您使用帖子而不是 GET 并更改隐藏字段/只需设置值吗？

您可以使用 jQuery.ajax() 调用服务器，在帖子中设置您需要的值（或根据需要获取）。这样 url 就不会改变，你可以提出你需要的请求。

# android - 从 csv 文件中搜索数据并将其放入微调器中

> ID：16217327
> 
> 赞同：0
> 
> 时间：2013-04-25T14:22:24.773
> 
> 标签：android, csv, spinner

我是 android 编程的新手，我需要一些帮助。在我的主要课程中，我有 2 个微调器。一种用于国家，一种用于城市。在第一个微调器中，用户可以选择一个国家。选择一个国家后，我希望第二个微调器显示相应的城市。为此，我有一个 .csv 文件，其中包含国家代码（第一列）和对应的城市（第二列）。

例如，在第一个 spinner 中，用户选择了 CUBA（对应的代码为 CU）。然后我希望我的程序在我的 csv 文件中查看第一列中所有带有“CU”的行，并获取相应的城市并将它们打印到第二个微调器中，以便用户可以选择古巴的一个城市。

我的问题是我不需要将我的 csv 文件放在哪里，我如何对我的应用程序进行编程以查看它并将我的数据打印到微调器中......

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:31:51.163

您应该创建一个 Service 或 Worker Fragment 来完成所有繁重的工作：打开 csv，读取国家和城市并过滤给定国家的城市。然后为显示两个微调器的 Activity 创建一个回调，以相应地更新 UI。需要以下组件：

1 FragmentActivity 显示微调器。应该有一个回调方法来接收数据更新。

1 Worker Fragment 或 Service，用于读取文件并将更新广播到包含 Spinner 的 FragmentActivity

希望能帮助到你。

# javascript - 此图像颜色均衡算法中的错误逻辑

> ID：16217328
> 
> 赞同：0
> 
> 时间：2013-04-25T14:22:29.077
> 
> 标签：javascript, image-processing

在我的代码中的某个地方，我似乎做错了什么，我不知道哪个部分出了问题。我已经打印以控制台从各种数组中获得的值，并且它似乎匹配。然后，当我运行均衡功能（a la [Wikipedia-Histogram Equalization](http://en.wikipedia.org/wiki/Histogram_equalization)）时，我的输出图像接近全黑。我试图[将这个人的](http://www.dreamincode.net/forums/blog/114/entry-1795-histogram-equalization-using-php/)php 解释为 javascript，只是为了测试一些东西，并认为我做得不错。但我不是专家。

相关部分：

```
 function imageLoaded(ev) {
            element = document.getElementById("canvas1");
            c = element.getContext("2d");

            im = ev.target; // the image

            // read the width and height of the canvas
            width = element.width;
            height = element.height;

            // stamp the image on the left of the canvas:
            c.drawImage(im, 0, 0);
            // get all canvas pixel data
            imageData = c.getImageData(0, 0, width, height);

            w2 = width / 2;
            var reds = new Array();
            var greens = new Array();
            var blues = new Array();

            var freqR = new Array();
            var freqG = new Array();
            var freqB = new Array();

            if (imageData){

                buildHistograms(reds, greens,blues);

                buildFrequencies(reds, greens, blues, freqR, freqG, freqB);

            }

            var alpha = 255/(w2*height);

             // run through the image
            for (y = 0; y < height; y++) {
                inpos = y * width * 4; // *4 for 4 ints per pixel
                outpos = inpos + w2 * 4;
                for (x = 0; x < w2; x++) {

                    //reads pixel data(of img c)to each channel of rgb
                    r = imageData.data[inpos++];  
                    g = imageData.data[inpos++];
                    b = imageData.data[inpos++];
                    a = imageData.data[inpos++]; 

                    //using histogram eqalization formula: 
                    adjR = freqR[r]*alpha;
                    adjG = freqG[g]*alpha;
                    adjB = freqB[b]*alpha;

            //assigns pixel data of output image
                    imageData.data[outpos++] = adjR;
                    imageData.data[outpos++] = adjG;
                    imageData.data[outpos++] = adjB;
                    imageData.data[outpos++] = a;
                }
            }
            // put pixel data on canvas
            c.putImageData(imageData, 0,0);

        }

        im = new Image();
        im.onload = imageLoaded;
        im.src = "Lenna.png"; 

        function buildHistograms(reds,greens,blues){
            //run through image building histogram      
            for (y=0; y < height; y++){
                inpos = y * width *4;
                for (x=0; x < w2; x++){
                rd = imageData.data[inpos++]; 
                    g = imageData.data[inpos++];
                    b = imageData.data[inpos++];
                    a = imageData.data[inpos++];
                    // Add counts to our histogram arrays for each color.
                    reds.push(rd);
                    greens.push(g);
                    blues.push(b);
                }
            }

            // Sort them by keys into order
            reds.sort(function(a,b){return a-b});
            greens.sort(function(a,b){return a-b});
            blues.sort(function(a,b){return a-b});

        }

        function buildFrequencies(reds, greens, blues, freqR, freqG, freqB){
        // Build frequency charts for all colors: takes REDS GREENS BLUES from buildHistograms and places them on top of each other accordingly
            for(i=0; i<=255; i++){
                sumR=0;
                sumG=0;
                sumB=0;

                for(j=0; j<= i; j++){
                    if (reds[j]){sumR+=reds[j];}
                    if (greens[j]){sumG+=greens[j];}
                    if (blues[j]){sumB+=blues[j];}
                }

                freqR[i] = sumR;
                freqG[i] = sumG;
                freqB[i] = sumB;

            }
        } 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:55:32.187

看起来我的构建频率部分都错了。我是这样修改的：

```
var len = reds.length;

            for (j=0; j < len; j++) {
                    var rCurrVal = reds[j];
                    var gCurrVal = greens[j];
                    var bCurrVal = blues[j];
                    if (freqR.hasOwnProperty(rCurrVal)) {
                        freqR[rCurrVal] += 1;
                    }   else {
                       freqR[rCurrVal] = 1;
                    } 
                    if (freqG.hasOwnProperty(gCurrVal)) {
                        freqG[gCurrVal] += 1;
                    }   else {
                       freqG[gCurrVal] = 1;
                    }
                    if (freqB.hasOwnProperty(bCurrVal)) {
                        freqB[bCurrVal] += 1;
                    }   else {
                       freqB[bCurrVal] = 1;
                    }
            }

            for (i=0; i<255; i++){   
                if ($.inArray(i,reds)===-1){freqR[i]=0;}
                if ($.inArray(i,greens)=== -1){freqG[i]=0;}
                if ($.inArray(i,blues)=== -1){freqB[i]=0;}

                if (i>0){
                    freqR[i]+=freqR[i-1];
                    freqG[i]+=freqG[i-1];
                    freqB[i]+=freqB[i-1];

                }
            } 
```

# javascript - 使用 for 循环中的拼接从数组中删除项目

> ID：16217333
> 
> 赞同：58
> 
> 时间：2013-04-25T14:22:38.710
> 
> 标签：javascript, jquery, arrays, for-loop

我想实现一种 jQuery 实时搜索。但是在将输入发送到服务器之前，我想删除我的数组中具有 3 个或更少字符的所有项目（因为在德语中，这些词通常可以在搜索方面被忽略）所以`["this", "is", "a", "test"]`变成`["this", "test"]`

```
$(document).ready(function() {
var timer, searchInput;
$('#searchFAQ').keyup(function() {
    clearTimeout(timer);
    timer = setTimeout(function() {
        searchInput = $('#searchFAQ').val().match(/\w+/g);
        if(searchInput) {
            for (var elem in searchInput) {
                if (searchInput[elem].length < 4) {
                    //remove those entries
                    searchInput.splice(elem, 1);
                }
            }
            $('#output').text(searchInput);
            //ajax call here
        }
    }, 500);
});
}); 
```

现在我的问题是，并非所有项目都在我的 for 循环中被删除。例如，如果我输入“这是一个测试”“是”被删除，“a”将保留。 [JSFIDDLE](http://jsfiddle.net/4Wdp9/)

我认为问题在于 for 循环，因为如果我删除带有拼接的项目，数组的索引会发生变化，因此它会继续使用“错误”索引。

也许有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-04-25T14:26:49.767

## 解决方案 1

您可以向后循环，如下所示：

```
var searchInput, i;

searchInput = ["this", "is", "a", "test"];
i = searchInput.length;
while (i--) {
    if (searchInput[i].length < 4) {
        searchInput.splice(i, 1);
    }
} 
```

**演示：http:** [//jsfiddle.net/KXMeR/](http://jsfiddle.net/KXMeR/)

这是因为通过数组增量迭代，当你拼接它时，数组被修改到位，所以项目被“移位”，你最终跳过了一些迭代。向后循环（带有一个`while`甚至一个`for`循环）可以解决此问题，因为您没有在拼接方向上循环。

* * *

## 解决方案 2

同时，生成新数组通常比原地修改数组更快。这是一个例子：

```
var searchInput, newSearchInput, i, j, cur;

searchInput = ["this", "is", "a", "test"];
newSearchInput = [];
for (i = 0, j = searchInput.length; i < j; i++) {
    cur = searchInput[i];
    if (cur.length > 3) {
        newSearchInput.push(cur);
    }
} 
```

where`newSearchInput`将仅包含有效长度的项目，并且您仍然拥有`searchInput`.

**演示：http:** [//jsfiddle.net/RYAx2/](http://jsfiddle.net/RYAx2/)

* * *

## 解决方案 3

除了上面的第二种解决方案之外，还有一种类似的、更新的`Array.prototype`方法可以更好地处理这个问题：`filter`. 这是一个例子：

```
var searchInput, newSearchInput;

searchInput = ["this", "is", "a", "test"];
newSearchInput = searchInput.filter(function (value, index, array) {
    return (value.length > 3);
}); 
```

**演示：http:** [//jsfiddle.net/qky7D/](http://jsfiddle.net/qky7D/)

* * *

**参考：**

*   `Array.prototype.filter`- [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)
*   `Array.prototype.filter`浏览器支持 - [http://kangax.github.io/es5-compat-table/#Array.prototype.filter](http://kangax.github.io/es5-compat-table/#Array.prototype.filter)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-07T11:34:37.313

```
var myArr = [0,1,2,3,4,5,6]; 
```

**问题陈述：**

```
myArr.splice(2,1);

  \\ [0, 1, 3, 4, 5, 6]; 
```

现在在第二个位置移动 3 次，长度减少 1，这会产生问题。

**解决方案：**一个简单的解决方案是在拼接时反向迭代。

```
var i = myArr.length;
while (i--) {
    // do your stuff
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-30T20:26:36.483

如果您安装了**lodash**库，那么您可能需要考虑使用它们。

该函数是***_.forEachRight*** *（从右到左迭代集合的元素）*

这是一个例子。

```
var searchInput = ["this", "is", "a", "test"];

_.forEachRight(searchInput, function(value, key) {

    if (value.length < 4) {
        searchInput.splice(key, 1);
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T14:47:45.957

您还可以使用[$.grep](http://api.jquery.com/jQuery.grep/)函数来过滤数组：

```
var timer, searchInput;
$('#searchFAQ').keyup(function () {
    clearTimeout(timer);
    timer = setTimeout(function () {
        searchInput = $('#searchFAQ').val().split(/\s+/g); // match is okay too
        searchInput = $.grep(searchInput, function(el) {
            return el.length >= 4;
        });
        console.log(searchInput);
    }, 500);
}); 
```

[http://jsfiddle.net/dfsq/4Wdp9/](http://jsfiddle.net/dfsq/4Wdp9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-04T14:24:18.387

另一种方法是在从数组 (x--) 切片时减少索引，以便在数组向下移动时不会跳过下一个元素。

```
var searchInput;

searchInput = ["this", "is", "a", "test"];
for (var x = 0; x < searchInput.length; x++) {
    if (searchInput[x].length < 4) {
        searchInput.splice(x--, 1);
    }
}

console.log(searchInput); 
```

**演示：** [https ://jsfiddle.net/alinaeem229/n2kq3690/1/](https://jsfiddle.net/alinaeem229/n2kq3690/1/)

# javascript - AMD Module Shaping：如何只加载一个 JS 函数？

> ID：16217335
> 
> 赞同：11
> 
> 时间：2013-04-25T14:22:49.950
> 
> 标签：javascript, typescript, amd

许多 JavaScript 库都有一个 Builder 工具，可以让您“塑造”您所依赖的库的哪些功能，无论是在客户端下载带宽成本方面还是在隔离您实际需要的功能方面。

例如，我喜欢 Sugar.js 中的很多东西，但我根本不需要或不想要片假名和平假名字符集处理。作为最简单的例子，我希望能够“塑造”sugar.js 以仅导出 string.isBlank()。

是否有可用的工具为我执行此操作？EcmaScript 委员会是否正在努力在未来版本的 JavaScript 中做类似的事情？有没有像 TypeScript 和 CoffeeScript 这样的高级语言为这种“塑造”提供隐藏的支持？我可以通过[monolinker](http://www.mono-project.com/Linker)在 C# 中为 .NET DLL 进行这种“整形” 。

基本上，在我看来，AMD 处理现代编译器的加载器方面，但不处理链接器方面。[jquery](http://jqueryui.com/download/)和[dojo](http://build.dojotoolkit.org/)的构建器仅适用于特定模块，并且不是真正的链接器，只是构建器。

**更新：** [Google Closure Compiler](https://developers.google.com/closure/compiler/)是一个将 JavaScript 作为输入并生成 JavaScript 作为输出的编译器。[Advanced Compilation and Externs](https://developers.google.com/closure/compiler/docs/api-tutorial3#removal)文档建议有一个 API 调用来执行此操作：

> 如果将这些导出语句放在一起看起来太乏味，您可以使用一个函数为您进行导出。有关导出函数的示例，请参阅闭包库函数[goog.exportSymbol()](http://docs.closure-library.googlecode.com/git/closure_goog_base.js.html#goog.exportSymbol)和[goog.exportProperty()](http://docs.closure-library.googlecode.com/git/closure_goog_base.js.html#goog.exportProperty)。

但是，这看起来很复杂，让我直接依赖 Google Closure Compiler。在这一点上，我正在从 EcmaScript 委员会寻找有关 CommonJS 的未来标准的信息，以及来自那些考虑过这个问题并试图解决它的人的任何智慧。尤其是来自其他 TypeScript 开发人员；我不想在 TypeScript 中为 sugar.js 创建声明文件，然后对我的 TypeScript 编译器输出使用 Google Closure Compiler。这听起来非常复杂且难以调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T02:27:49.677

不幸的是，Javascript 中没有内置任何东西来执行这种“整形”，无论如何你真正想要的是一个编译器，因为它所服务的角色之一大致是在多个级别上自动“整形”（不仅仅是使用方法）。

Closure Compiler 是成熟且开源的（JQuery 实际上是使用 Closure Compiler 缩小的）。因此，如果您要开始为编译器注释您的 JS 代码，它也可能是这个。

顺便说一句，使用编译器有很多附带好处。它们将大大减少您的文件大小（从而减少解释/运行时间），而不仅仅是塑造您包含的库。在你开发的时候，它会产生很多有用的信息，以便及早发现错误。

# python - 使用 scapy 基于数据包时间戳重放 Pcap 文件

> ID：16217337
> 
> 赞同：1
> 
> 时间：2013-04-25T14:22:50.930
> 
> 标签：python, networking, packet, scapy

我有一个 pcap 文件（~90M），我想重播那个文件。我遇到了 scapy，它提供了读取 pcap 文件并重放它的方法。我尝试了以下两种重播数据包的方法

```
sendp(rdpcap(<filename>) 
```

和

```
pkts = PcapReader(<filename>);
for pkt in pkts:
     sendp(pkt) 
```

第一个游戏我内存错误，python进程的内存消耗上升到3 gig，最后它死了。但是第二个选项对我来说效果很好，因为它没有将整个文件读入内存。我有以下三个问题

1.  90M pcap 文件是否太大而无法重播？

2.  每当我们使用 tcpdump/wireshark 时，每个数据包都有与之关联的时间戳。假设数据包 1 在时间 T 到达，数据包 2 在时间 T+10 到达，scapy 会以类似的方式重放数据包，第一个数据包在时间 T，第二个数据包在 T+10？或者它只会继续循环发送它们，我认为稍后是 PcapReader 的情况。

3.  如果上述问题的答案是否定的（它只是循环重播，不考虑数据包间到达时间），我们是否有任何其他 python 库可以为我完成这项工作？甚至 python 对我来说也不是约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T03:50:11.607

要回答您的第一个问题，听起来您自己回答了！尝试在另一个 40-50 MB 的 pcap 文件上再次运行第一个选项，然后查看是否出现错误。这样，您至少可以检查文件对于您的系统来说是否太大，并结合 Scapy 来处理（系统中没有足够的 RAM 来处理 Scapy 如何运行其算法，因为它是为一次处理几个数据包而构建的，而不是90MB pcap 文件）或者它只是代码中的某些内容。

为了回答你的第二个问题，根据过去几周我在 Scapy 上所做的阅读，我坚信这是肯定的。但是，我不知道有任何消息来源可以支持此验证。

忍者编辑 - 我在另一个 StackOverflow 问题上看到了这个 -[在 Scapy 中的每个数据包上指定时间戳？](https://stackoverflow.com/questions/10344127/specify-timestamp-on-each-packet-in-scapy?rq=1)

虽然这是针对单个数据包的 - 如果每个数据包在 Scapy 中都有时间戳，那么我想它对于您读入的大型 pcap 文件中的每个数据包都是相同的。这样，当您重放数据包时，它应该进入相同的顺序。

在这个答案中进行了很多有根据的猜测，但希望对您有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-21T23:57:55.103

1.  不，它不应该占用 3GB 的内存。我经常在只有 2GB 内存的机器上打开较大的 pcap 文件。只需尝试`pkts = rdpcap(<filename>)`看看需要多少内存，然后从那里开始。如果问题仍然存在，您可能希望尝试不同版本的 scapy。

2.  不，`sendp()`默认情况下不这样做。您可以尝试实时参数（`help(sendp)`在控制台上输入）。但总的来说，根据我的经验，scapy 并不擅长保持准确的计时。

3.  我使用的是 tcpreplay（linux CLI 工具）。它有许多选项，包括各种计时机制。

# java - 如何阅读 使用 MDHT 来自 CCDA xml 文件的节点值

> ID：16217339
> 
> 赞同：2
> 
> 时间：2013-04-25T14:22:56.383
> 
> 标签：java, xml-parsing, medical, ccd

我正在使用 MDHT 来解析 CCDA 文件的 xml 值。但我无法阅读价值`Non-contributory`形式`<text> <paragraph>Non-contributory</paragraph></text>`。考虑以下 xml 内容：`

* * *

家史

* * *

```
 <component>
    <section>
      <!--  Family history section template  -->
      <templateId root="2.16.840.1.113883.10.20.22.2.15"/>
      <code code="10157-6" displayName="Family History" codeSystem="2.16.840.1.113883.6.1" codeSystemName="LOINC"/>
      <title>FAMILY HISTORY</title>
      <text>
        <paragraph>Non-contributory</paragraph>
      </text>
    </section>
  </component> 
```

`

任何网址或参考将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-25T09:09:07.603

您不需要解析 Text 元素。CCDA 文档中的文本元素用于使其成为人类可读的格式。相同的值也将出现在部分的条目元素中。

编辑：以下代码可能会有所帮助

```
 package org.openhealthtools.mdht.uml.cda.consol.tests;

import java.io.FileInputStream;
import java.util.Stack;

import org.eclipse.emf.ecore.EReference;
import org.eclipse.emf.ecore.util.FeatureMap;
import org.eclipse.emf.ecore.util.FeatureMap.Entry;
import org.eclipse.emf.ecore.xml.type.AnyType;
import org.openhealthtools.mdht.uml.cda.ClinicalDocument;
import org.openhealthtools.mdht.uml.cda.StrucDocText;
import org.openhealthtools.mdht.uml.cda.consol.AllergiesSection;
import org.openhealthtools.mdht.uml.cda.consol.ConsolPackage;
import org.openhealthtools.mdht.uml.cda.consol.ContinuityOfCareDocument;
import org.openhealthtools.mdht.uml.cda.util.CDAUtil;
import org.openhealthtools.mdht.uml.cda.util.ValidationResult;

public class Main {
    public static void main(String[] args) throws Exception {
        ConsolPackage.eINSTANCE.eClass(); // static package registration

        ClinicalDocument clinicalDocument = CDAUtil.load(
            new FileInputStream("samples/CCD.sample.xml"), (ValidationResult) null);
        if (clinicalDocument instanceof ContinuityOfCareDocument) {
            ContinuityOfCareDocument ccd = (ContinuityOfCareDocument) clinicalDocument;

            AllergiesSection allergiesSection = ccd.getAllergiesSection();

            StrucDocText text = allergiesSection.getText();
            traverse(text.getMixed());
        }

    }

    private static void traverse(FeatureMap root) {
        Stack<FeatureMap> stack = new Stack<FeatureMap>();
        stack.push(root);
        while (!stack.isEmpty()) {
            FeatureMap featureMap = stack.pop();
            for (int i = featureMap.size() - 1; i >= 0; i--) {
                Entry entry = featureMap.get(i);
                if (entry.getEStructuralFeature() instanceof EReference) {
                    System.out.println(entry.getEStructuralFeature().getName() + " {");
                    AnyType anyType = (AnyType) entry.getValue();
                    traverseAttributes(anyType.getAnyAttribute());
                    stack.push(anyType.getMixed());
                } else {
                    if (entry.getValue() != null) {
                        String value = entry.getValue().toString();
                        if (value.trim().length() > 0) {
                            System.out.println(" " + value + " }");
                        }
                    } else {
                        System.out.println(" }");
                    }
                }
            }
        }
    }

    private static void traverseAttributes(FeatureMap anyAttribute) {
        for (Entry entry : anyAttribute) {
            System.out.println("attr name: " + entry.getEStructuralFeature().getName() + ", attr value: " +
                    entry.getValue().toString());
        }
    }
} 
```

// 此代码的控制台输出为：

```
table {
attr name: border, attr value: 1
attr name: width, attr value: 100%
tbody {
thead {
tr {
th {
th {
th {
 Substance }
 Reaction }
 Status }
tr {
tr {
tr {
td {
td {
td {
 Penicillin }
content {
attr name: ID, attr value: reaction1
 Hives }
 Active }
td {
td {
td {
 Aspirin }
content {
attr name: ID, attr value: reaction2
 Wheezing }
 Active }
td {
td {
td {
 Codeine }
content {
attr name: ID, attr value: reaction3
 Nausea }
 Active } 
```

参考：[链接](https://www.projects.openhealthtools.org/sf/discussion/do/listPosts/projects.mdht/discussion.forum1136.topc12312;jsessionid=04543A243FBCC2C74C9840AB52E74A6B)

# .net - 如何通过代码生成带有NHibernate映射的nosetter.camelcase-underscore访问策略？

> ID：16217342
> 
> 赞同：1
> 
> 时间：2013-04-25T14:23:05.283
> 
> 标签：.net, nhibernate, nhibernate-mapping

找不到合适的访问器。它应该只是 NoSetter 还是 Field？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:07:19.790

如果您**有**（只读）属性，则应使用`Accessor.NoSetter`

具体的命名约定由 NHibernate 自动确定（当然，尽量不要同时拥有`_myProp`,`_MyProp`和`myProp`字段，因为 NH 只会选择第一个 IIRC）

# c++ - 空指针的奇怪行为

> ID：16217344
> 
> 赞同：2
> 
> 时间：2013-04-25T14:23:09.270
> 
> 标签：c++, undefined-behavior, null-pointer

我创建了一个`NULL`类*App*的指针，但不知何故，`NULL`对象（App）的方法正在工作。这是我的代码：

```
#include "App.h"
#include <iostream>
using namespace std;
int main()
{
    App* pointer = NULL;
    pointer->print();

    system("pause");
} 
```

附上头文件

```
#pragma once
#include <iostream>
using namespace std;
class App
{
private:
    int x;
    int y;
public:
    App(void);
    ~App(void);
    App(int a, int b)
    {
        x=a;
        y=b;
    }
    void print()
    {
        cout<<"hello world"<<endl;
    }
}; 
```

运行结果在屏幕中：`hello world`。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:24:19.267

未定义的行为就是这样 - 未定义。任何事情都可能发生，包括行为正确的外观。

对于您的情况，具体来说，您可能希望从程序中检查生成的程序集。您可能会发现编译器已经优化了您的代码并内联了该打印输出或直接调用它，而不是通过指针/表查找实际调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:24:21.447

在指针上调用方法`NULL`是未定义的行为，因此任何事情都可能发生。你永远不应该指望代码总是会产生这个输出。总是尽量避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:24:54.317

取消引用 NULL 指针是未定义的行为。你不应该仅仅因为你这样做就期望你的程序不能“工作”。

在这种情况下，您的打印函数不会“使用”`this`指针，因此您的代码会按预期执行。但是你不应该依赖这个，未定义的行为意味着它所说的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T14:25:25.107

这是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)，该[线程](https://stackoverflow.com/questions/2505328/calling-class-method-through-null-class-pointer)解释了为什么它最有可能起作用，基本解释是它可能会转换为类似于：

```
void _App_print( App* this ); 
```

并且由于您没有使用`this`它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T14:27:36.360

这是未定义的行为。该实现能够在这个玩具示例中工作，因为`print`它不访问成员变量并且是一个非虚拟函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T14:25:14.763

因为 print 不会（甚至隐式地）访问“this”指针后面的任何数据。

# javascript - 动态正则表达式

> ID：16217346
> 
> 赞同：1
> 
> 时间：2013-04-25T14:23:17.933
> 
> 标签：javascript, regex, match, split

试图使表达动态化。所以我可以将一个字符串分成相等的块。

`var keyParts = key.match(/.{1,4}/g);`

`var keyParts = key.match(/.{rangeA,rangeB}/g);`

所以我想制定一个范围，我试图把它放在一个新的 RegExp() 中，但没有任何积极的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:25:33.043

试试这个：

```
var re = new RegExp(".{" + rangeA + "," + rangeB + "}", "g");
var keyParts = key.match(re); 
```

**演示：http:** [//jsfiddle.net/bzKAq/](http://jsfiddle.net/bzKAq/)

在演示中，请注意当您将 的长度更改为`key`范围之间时，它将与字符串匹配。

参考：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

# c++ - C++ 类继承变量

> ID：16217349
> 
> 赞同：1
> 
> 时间：2013-04-25T14:23:20.137
> 
> 标签：c++, class, variables, object, inheritance

我正在开发一个游戏，我想存储角色属于定义单位的类中的一个单位。（作为对象）

这是定义类。（我使用继承）

```
class Units
{
    public:
       char indicator;

        Units();
        virtual ~Units();
    protected:
    private:
};

Units::Units (){}
Units::~Units (){}

class WoodenBoxClass: public Units
{
    public:
        WoodenBoxClass.indicator = 'B';
}; 
```

编译过程中，当"WoodenBoxClass.indicator = 'B';" 来了，我收到一条错误消息：

50|error: '.' 之前的预期 unqualified-id 令牌

我应该怎么办？主要问题是我怎样才能达到“指标”变量与每个“WoodenBoxClass”对象相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:29:31.880

您需要在类构造函数中初始化成员变量。有两种方法可以做到：

1.  只需在子类构造函数中分配给它

    ```
    WoodenBoxClass()
    {
        indicator = 'B';
    } 
    ```

2.  在基类中有一个将指标作为参数的构造函数，并在子类构造函数中使用初始化列表：

    ```
    class Unit
    {
        ...
        explicit Unit(char ind) : indicator(ind) {}
        ...
    };

    class WoodenBoxClass : public Unit
    {
        ...
        WoodenBoxClass() : Unit('B') {}
        ...
    }; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:30:57.457

要使“indicator”变量与每个“WoodenBoxClass”对象保持相同，您可以使用静态变量。

```
class WoodenBoxClass: public Units
{
    public:
        static char indicator = 'B';
};

class Units
{
    public:
       //char indicator;   //not necessary actually

        Units();
        virtual ~Units();
    protected:
    private:
}; 
```

# excel - VBA 在特定列中查找错误值

> ID：16217350
> 
> 赞同：1
> 
> 时间：2013-04-25T14:23:23.347
> 
> 标签：excel, vba

```
Sub Macro9()
Dim LReturnValue As Boolean

LReturnValue = IsError(Sheets("Lookup Addition").Range("A:A").Value)

If LReturnValue = False Then
    i = MsgBox("there were no errors", vbOKOnly)
Else
    i = MsgBox("there were errors", vbOKOnly)
End If

End Sub 
```

我对 IsError(Customfunction()) 语法应该是什么感到有些困惑。我们如何告诉它检查范围内的每个单元格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T15:22:20.690

计算范围内的错误不需要循环（如果范围很大，这可能会非常慢）甚至任何 VBA。

只需将此工作表函数添加到某个单元格中即可。如果您不希望用户看到此单元格，您可以隐藏行/列/工作表。

```
=SUMPRODUCT(ISERROR(A:A)*(1=1)) 
```

如果您仍然想要用户的弹出框，您的 VBA 现在将是：

```
Sub CountErr()  
     MsgBox "There are " & ActiveSheet.Range("B1").Value & " Errors"  
End Sub 
```

说得通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:15:43.623

您可以简单地使用`Evaluate`和工作表函数`COUNTIF`来计算错误数：

```
Sub CheckRangeForErrors()

    Dim errCount As Long
    Dim rng As Range
    Dim cl As Range
    Dim col As String

    col = Application.InputBox("Enter the column letter you would like to check for errors", "Column Name?")

    If Not Len(col) = 1 Then
        MsgBox "You have entered an invalid selection", vbCritical
        Exit Sub
    End If

    Set rng = Sheets("Lookup Addition").Range(col & "1", Range(col & "1048576").End(xlUp))

    errCount = Application.Evaluate("COUNTIF("& rng.Address &",IsError)")

    If errCount = 0 Then
        MsgBox "there were no errors", vbOKOnly
    Else
        MsgBox "there were " & errCount & " errors", vbOKOnly
    End If

End Sub 
```

# javascript - requestAnimationFrame polyfill：元素参数是干什么用的？

> ID：16217351
> 
> 赞同：1
> 
> 时间：2013-04-25T14:23:23.997
> 
> 标签：javascript, parameters, element, requestanimationframe

我正在使用 Erik Möller 的 requestAnimationFrame polyfill（来自 Paul Irish 和 Tino Zijdel 的修复），我想知道第二个名为“element”的参数是什么。

这是代码：

```
(function() {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']
                                   || window[vendors[x]+'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); },
              timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}()); 
```

所以我的问题是关于这条线：

```
window.requestAnimationFrame = function(callback, element) { 
```

“元素”有什么作用？

非常感谢您，

琼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T09:31:42.157

根据[W3C 草案](http://www.w3.org/TR/animation-timing/#requestAnimationFrame)，不`element`向此函数传递任何参数。至少现在。

如您所见，有[一个问题](http://www.w3.org/2010/webperf/track/issues/4)建议添加此类参数。对于本规范的第一个版本，这个问题被认为是*不必要的。*并且已经关闭。

我认为您可以忽略此参数。

# css - 使用 CSS 自动根据浏览器大小调整图像大小

> ID：16217355
> 
> 赞同：70
> 
> 时间：2013-04-25T14:23:28.177
> 
> 标签：css, resize, responsive-design

我希望在调整浏览器窗口大小时自动调整所有（或只是部分）图像的大小。我找到了以下代码 - 但它没有做任何事情。

**HTML**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="style.css" type="text/css" media="screen" />
    </head>
    <body>
        <div id="icons">
            <div id="contact">
                <img src="img/icon_contact.png" alt="" />
            </div>
            <img src="img/icon_links.png" alt="" />
        </div>
    </body>
</html> 
```

**CSS**

```
body {
    font-family: Arial;
    font-size: 11px;
    color: #ffffff;
    background: #202020 url(../../img/body_back.jpg) no-repeat top center fixed;
    background-size: cover;
}

#icons {
    position: absolute;
    bottom: 22%;
    right: 8%;
    width: 400px;
    height: 80px;
    z-index: 8;
    transform: rotate(-57deg); 
    -ms-transform: rotate(-57deg); 
    -webkit-transform: rotate(-57deg); 
    -moz-transform: rotate(-57deg);
}

#contact { 
    float: left; 
    cursor: pointer; 
}

img { 
    max-width: 100%; 
    height: auto; 
} 
```

在调整浏览器窗口大小时，我怎样才能基本上拥有全屏设计（使用`background-size: cover`）并让`div`元素处于完全相同的位置（% 明智），并且它们的大小也会调整大小（就像`cover`对背景所做的那样）？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-04-25T14:25:05.620

> 要使图像灵活，只需添加`max-width:100%`和 `height:auto`。图像`max-width:100%`和`height:auto`作品在 IE7 中，但在 IE8 中不起作用（是的，另一个奇怪的 IE 错误）。要解决此问题，您需要`width:auto\9`为 IE8 添加。
> 
> 来源： [http ://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

例如 ：

```
img {
    max-width: 100%;
    height: auto;
    width: auto\9; /* ie8 */
} 
```

然后您只需使用 img 标签添加的任何图像都会很**灵活**

[JSFiddle 示例在这里。](https://jsfiddle.net/jaanhaitojahanhai/cnudrxgq/)无需 JavaScript。适用于最新版本的 Chrome、Firefox 和 IE（这是我测试过的全部）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T14:41:49.140

**图像容器**

仅当图像所在的容器大小发生变化时，使用上述技巧缩放图像才有效。

`#icons`容器使用宽度和高度的`px`值。`px`调整浏览器大小时，值不会缩放。

**解决方案**

使用以下方法之一：

1.  使用值定义宽度和/或高度`%`。
2.  使用一系列`@media`查询根据当前屏幕大小将宽度和高度设置为不同的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-15T14:26:25.730

这可能是一个过于简单的答案（我在这里还是新手），但我过去为解决这种情况所做的工作是计算出我希望图像占据的屏幕百分比。例如，我正在处理一个网页，其中徽标必须占据屏幕大小的 30% 才能看起来最好。我到处玩，最后尝试了这段代码，到目前为止它对我有用：

```
img {
width:30%;
height:auto;
} 
```

话虽如此，这将始终将您的所有图像更改为屏幕尺寸的 30%。要解决这个问题，只需将其设为一个类并将其应用于您希望直接达到 30% 的图像。这是我在上述网站上为完成此操作而编写的代码示例：

CSS部分：

```
.logo {
position:absolute;
right:25%;
top:0px;
width:30%;
height:auto;
} 
```

HTML部分：

```
<img src="logo_001_002.png" class="logo"> 
```

或者，您可以将希望自动调整大小的图像放置到自己的 div 中，并在每个 div 上使用 class 标签选项（在需要时创建现在的 class 标签），但我觉得这最终会导致很多额外的工作。但是，如果站点需要它：站点需要它。

希望这会有所帮助。祝你有美好的一天！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-12T18:21:25.467

以下适用于我的 200 个数字的所有浏览器，适用于任何宽度百分比——尽管是非法的。Jukka 说：“无论如何都要使用它。” （该类只是将图像向左或向右浮动并设置边距。）我无法想象为什么这不是标准方法！

```
<img class="fl" width="66%"
src="A-Images/0.5_Saltation.jpg"
alt="Schematic models of chromosomes ..." /> 
```

更改窗口宽度和图像缩放。

# git - Git图未显示分支

> ID：16217363
> 
> 赞同：14
> 
> 时间：2013-04-25T14:24:07.033
> 
> 标签：git

为什么当我创建一个新分支并对其进行提交时，我没有在我的图表中看到它分支。

这是我正在做的代码：

```
git init

git add .
git commit -a

... other commits in here

git checkout -b mynewbranch

git add .
git commit -a

git checkout master
git merge mynewbranch

git add .
git commit -a 
```

这是我在执行 git log --graph 时希望在脑海中看到的

```
* 47926e1 This is a commit back on master
 \
  * f3dc827 How come i am not seeing a branch in my tree
  * 1cd3018 This should be on my new branch  
 /
* 47f3716 This is my third commit
* 878b018 This is my second commit 
* 2db9f83 Initial commit 
```

但我看到了这个：

```
* 47926e1 This is a commit back on master
* f3dc827 How come i am not seeing a branch in my tree
* 1cd3018 This should be on my new branch
* 47f3716 This is my third commit
* 878b018 This is my second commit
* 2db9f83 Initial commit 
```

我不明白什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-25T14:35:18.180

如果您在处理 mynewbranch 时没有提交到 master，您的历史记录将与您显示的一样。在这种情况下，不需要实际的合并；合并的 master 与 mynewbranch 的提示相同。如果是这种情况，git 将（默认情况下）执行所谓的快进合并；master 的分支指针刚刚更新为与合并提示相同的提交。这通常会导致更简单的提交历史记录更易于使用，特别是如果工作也在远程存储库中进行。

如果要强制将合并记录为 git 中的合并，可以在 git merge 上使用 --no-ff 选项。

在 git 中，通常认为最好的做法是尽可能避免合并。

# regex - 简化正则表达式“ab|a|b”

> ID：16217375
> 
> 赞同：3
> 
> 时间：2013-04-25T14:24:29.820
> 
> 标签：regex, redundancy, simplify

（如何）可以简化以下正则表达式：

```
ab|a|b 
```

?

我正在寻找一个较少冗余的，即只有一个`a`和一个`b`。是否可以？

一些尝试：

```
a?b?       # matches empty string while shouldn't
ab?|b      # still two b 
```

* * *

请注意，真正的正则表达式具有更复杂`a`的`b`部分，即不是单个字符，而是内部子正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:35:56.607

如果您使用 Perl 或一些 PCRE 引擎（如 PHP 的`preg_`函数），您可以参考模式中的先前组，如下所示：

```
/(a)(b)|(?1)|(?2)/ 
```

此功能的主要目的是支持递归，但它也可以用于模式重用。

请注意，在这种情况下，您无法绕过捕获`a`和`b`第一次交替，这会产生一些（可能）不必要的开销。为避免这种情况，您可以在从不执行的条件中定义组。执行此操作的规范方法是使用`(?(DEFINE)...)`group （检查命名`DEFINE`组是否匹配任何内容，但当然该组不存在）：

```
/(?(DEFINE)(a)(b))(?1)(?2)|(?1)|(?2)/ 
```

如果您的引擎不支持该功能（**编辑：**由于您使用的是 Java，因此不支持此功能），那么您可以在单一模式中获得的最佳效果确实是

```
ab?|b 
```

或者，您可以`ab|a|b`通过字符串连接/格式手动构建版本，例如：

```
String a = "a";
String b = "b";
String pattern = a + b + "|" + a + "|" + b; 
```

这也避免了重复。或者您可以使用 3 个单独的模式`ab`，`a`并`b`针对主题字符串（其中第一个再次是后两个的串联）。

# asp.net - 使用 Twitter 的 Membership.OpenAuth 有效，但一直要求授权应用程序

> ID：16217383
> 
> 赞同：0
> 
> 时间：2013-04-25T14:24:44.807
> 
> 标签：asp.net, twitter, asp.net-membership, dotnetopenauth, authorize

我正在使用 ASP.NET 表单（不是 MVC）及其开箱即用的模板解决方案，用于使用 Facebook、Twitter 等进行日志记录（全部包含在 Microsoft.AspNet.Membership.OpenAuth 中）。

除了一件事之外，一切似乎都运行良好：每次用户使用 Twitter 登录时，他们都会被重定向到 Twitter 并要求对应用程序进行授权。不管他们是否已经这样做（即用户第一次登录，授权推特应用程序，完美地重定向回我们的网站。然后他们注销，然后再次登录，他们被重新提示授权。该应用程序显示在用户 Twitter 帐户下的已批准应用程序列表中。

我已经准备好一些人们遇到类似问题但不使用 Microsoft 库的地方。他们似乎在启动 Twitter 时指向使用不同的 URL，但是，我似乎无法通过 MS 库找到那种粒度级别。

有没有人能够使用这些库重现/解决这个问题？我对这一切的工作原理并不十分熟悉，但我注意到 DotNetOpenAuth 也是我的参考资料的一部分。如果这是提供 Membership.OpenAuth 类的库，也许我需要更新？我的 DotNetOpenAuth.OAuth 版本显示 4.1.0.0 和运行时版本（如果是 v.4.0.30319）。

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T09:42:41.263

我有同样的问题。我正在使用以下内容连接到 Twitter：

```
OAuthWebSecurity.RegisterTwitterClient(key, secret) 
```

并使用最新的 OpenAuth 4.3.0.0

登录工作正常，但每次都要求授权应用程序。

原来，在我的 Twitter 应用程序设置中，我没有勾选以下内容

```
Allow this application to be used to Sign in with Twitter 
```

当我勾选这个时，正常的 OAuthWebSecurity.RegisterTwitterClient() 工作正常

# jquery - jqplot 不适用于动态数据

> ID：16217392
> 
> 赞同：2
> 
> 时间：2013-04-25T14:25:07.557
> 
> 标签：jquery, cordova, jquery-mobile, jqplot, jquery-mobile-pageshow

我正在尝试使用**jqplot**绘制从 SQLite DB for Phonegap 检索的数据的条形图 - Android 如何对 db 值使用相同的代码。这段带有静态数据的代码在标签内工作正常，但是当我试图把这段代码放在里面时，它就`$('#pageid').live('pageinit',function(){});`不起作用了。什么原因？

```
<head>
<script type="text/javascript" src="js/lib/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/lib/jquery.jqplot.js"></script>
<script type="text/javascript" src="js/lib/jqplot.barRenderer.js"></script>
<script type="text/javascript" src="js/lib/jqplot.categoryAxisRenderer.js"></script>
<script type="text/javascript" src="js/lib/jqplot.pointLabels.js"></script>
<link rel="stylesheet" href="css/lib/jquery.jqplot.css"/>
<script type="text/javascript">
 var s1 = [10,0,0,0,0];
 var s2 = [0,20,0,0,0];
 var s3 = [0,0,30,0,0];
 var s4 = [0,0,0,25,0];
 var s5 = [0,0,0,0,0];
 var ticks = ['FAJR', 'ZOHAR', 'ASR', 'MAGHRIB','ISHA'];    

 var plot1 = $.jqplot('chart1', [s1, s2, s3,s4,s5], {
        // The "seriesDefaults" option is an options object that will
        // be applied to all series in the chart.
        seriesDefaults:{
             title:'Namaz Vs MissingPrayer',
            renderer:$.jqplot.BarRenderer,
            rendererOptions: {fillToZero: true}
        },
        series:[
                {label:'Fajr'},
                {label:'Z'},
                {label:'A'},
                {label:'M'},
                {label:'I'}

            ],
            legend: {
                show: true,
                placement: 'outsideGrid'
            },
            axes: {
                // Use a category axis on the x axis and use our custom ticks.
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    label:'NAMAZ',
                    ticks: ticks,

                },
                // Pad the y axis just a little so bars can get close to, but
                // not touch, the grid boundaries.  1.2 is the default padding.
                yaxis: {
                    min:0,
                    label:'MISSING PRAYERS',
                    pad: 1.05,
                    tickOptions: {formatString: '%d'}
                }
            }
        });
});
 </script>
</head>
<body>
<div data-role="page" id="graph">
<div data-role="content">
<div id="chart1" style="width:600px; height:350px;"></div>
</div>
</div>
</body>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:38:22.637

您需要将其放在**[pageshow](http://api.jquerymobile.com/pageshow/)**事件中。

**[只有在pageshow](http://api.jquerymobile.com/pageshow/)**事件期间才能正确计算页面高度。

所以像这样使用它：

```
$(document).on('pageshow','#pageid',function(){}); 
```

此外，如果您使用的是 jQuery 版本 1.9.1+，那么您不能使用**[live](http://api.jquery.com/live/)**，因为它已被弃用并且不再存在。

# javascript - 在加载数据时暂停 setInterval 的最简单/最有效的方法是什么？JavaScript/jQuery

> ID：16217398
> 
> 赞同：0
> 
> 时间：2013-04-25T14:25:23.347
> 
> 标签：javascript, setinterval

所以我有一个 JS 间隔在脚本上执行加载命令.. 并在 div 上显示加载的数据..

一切都很完美，直到我把我的项目放到网上并看到一个问题（在后台）..

由于 setInterval 需要设置为 1 秒间隔，并且很多时候加载数据所需的时间超过 1 秒，我看到负载堆叠发生在后台......因为 setInterval 继续触发 $ .load() 每秒调用一次，无论加载的数据如何..

我正在考虑设置一个全局变量“is_loading”以在间隔中添加到我的函数中，以跳过例程的其余部分以防“is_loading”为真，..一旦最近的加载调用完成，它就会设置 is_loading = false..

这样，间隔不断触发/秒，没有负载调用在后台堆叠......

但是，由于我有几个间隔在整个页面上进行加载（请不要问为什么 lolz）我发现每个间隔都这样做很乏味..因此我想知道是否有一些我可以像事件一样“全局”做的事情当前未完成的加载/获取/发布在页面上的某种监听器？

建议会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:49:32.940

这里有一些很棒的建议（和提醒），但我要做的是创建我自己的 setInterval 函数来做我想做的事情..

myInterval(function,time,hold_variable,attempts) where hold_variable = window.variable 在执行实际函数之前发出并检查。这是相同的变量名，我的函数在完成时将设置回 0 并允许再次调用自身

尝试=可选变量，由于hold_variable，间隔尝试调用函数失败的次数..

这是 setInterval 方面的一个非常直接的解决方案。唯一的不便是我的函数需要“设置”它们的每个 hold_variables（对每个函数进行微小修改）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:39:58.880

就像其他人所说的那样，`setTimeout`每当请求完成时，我都会使用它来发出新请求。

为了处理定时器上的多个请求，我建议制作某种主定时器/调度程序，以减少 setTimeouts 的运行量。当我做类似的事情时，谷歌的这篇文章对我很有帮助：

[http://googlecode.blogspot.com/2009/07/gmail-for-mobile-html5-series-using.html](http://googlecode.blogspot.com/2009/07/gmail-for-mobile-html5-series-using.html)

# ruby - 为什么要在方法前加上“self”

> ID：16217401
> 
> 赞同：3
> 
> 时间：2013-04-25T14:25:27.037
> 
> 标签：ruby, self

我正在做以下 Ruby 教程 [http://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/48-advanced-modules/lessons/118-wrapping-up-modules](http://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/48-advanced-modules/lessons/118-wrapping-up-modules)

其中一项练习要求我

> ...在模块 Math 中定义一个静态方法 square。它显然应该返回传递给它的数字的平方......

为什么只有当我在方法定义前加上“self”前缀时它才有效？例如以下作品：

```
module Math
  def self.square(x)
    x ** 2
  end
end 
```

但以下不起作用：

```
module Math
  def square(x)
    x ** 2
  end
end 
```

为什么是这样？作为参考，该方法被称为`puts Math.square(6)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:28:26.677

在模块的上下文中，将方法声明`self`为前缀使其成为模块方法，无需模块`include`或`extend`使用模块即可调用。

如果你想拥有默认的混合方法和需要`self`前缀的模块方法，你可以这样做：

```
module Math
  # Define a mix-in method
  def square(x)
    x ** 2
  end

  # Make all mix-in methods available directly
  extend self
end 
```

这应该具有通过直接调用使这些方法可用的效果`Math.square`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:28:16.040

在方法定义中，如果您没有`self.`，那么它是在该类的实例上定义的。由于`Math`不是 的实例`Math`，因此没有它就无法工作。

# excel - 使用 MS excel 中的可见单元格编辑程序以 sumif

> ID：16217407
> 
> 赞同：1
> 
> 时间：2013-04-25T14:25:39.747
> 
> 标签：excel, sumifs, vba

我得到了一些 countifv 那计数可见和 sumifsv 仅对可见单元求和...我希望 sumif 仅使用 vba 可见

默认仅在可见行上使用 SUMIFS

我有一张大桌子，有很多行和很多列，其中包含材料（沙子、石头等）批处理信息。我希望能够允许用户使用过滤器来选择他们想要查看的数据，然后能够查看其他工作表上的一些摘要信息（一天中的小时总数、材料总数等）。

我使用 DSUM 和/或 SUBTOTAL 让它运行得非常好和快，但是这些函数不会排除列表中的不可见（过滤）行。

使用我在此站点上看到的一些以前的帖子，我能够想出一些可行的方法，但是速度非常慢。

我希望更有经验的人可以就更快的事情给我建议。

我需要做的是在一张包含多达 30 个材料列信息（目标和实际批次重量）的记录列表中。我需要将这些行中的每一行按材料分组到一个相对时间段（12 :00 AM 到 12:59 AM、1:00 AM 到 1:59 AM 等）用户当然可以使用他们想要查看的 Time Bucket 进行选择

我正在使用 sumifs 函数和两个条件（即 Time >=12:00 和 Time < 1:00 ）来获取每小时存储桶。

```
 You can also see from this code that I have to count the number of lines for the data and each criteria value because I could not figure out how to set the range of "B" & "C" without counting. Since I am using a filter, I know that the ranges (from a row perspective) of A,B & C are the same, just the relative columns are different. I tried to use the offset function, (i.e. Range(B) = Range(A).Offset(-1,0).Select or B = A.offset(-1,0).Select but they failed for some reason, and no error messages either. I think I somehow turned the erroring off. 
```

无论如何，长篇大论，真的可以使用一些帮助。以下是相关代码：

```
Function Vis(Rin As Range) As Range
'Returns the subset of Rin that is visible
Dim Cell As Range
'Application.Volatile
Set Vis = Nothing
For Each Cell In Rin
If Not (Cell.EntireRow.Hidden Or Cell.EntireColumn.Hidden) Then
If Vis Is Nothing Then
Set Vis = Cell
Else
Set Vis = Union(Vis, Cell)
End If
End If
Next Cell
End Function

Function SUMIFv(Rin As Range, CriteriaRange1 As Range, CriteriaValue1 As Variant, CriteriaRange2 As Range, CriteriaValue2 As Variant) As Long
'Same as Excel SUMIFS worksheet function, except does not count
'cells that are hidden
Dim A1() As Range
Dim B1() As Range
Dim C1() As Range
Dim Csum As Long
' First count up the number of ranges
Cnt = 0
For Each A In Vis(Rin).Areas
Cnt = Cnt + 1
Next A

ReDim A1(1 To Cnt)
ReDim B1(1 To Cnt)
ReDim C1(1 To Cnt)

CntA = 1
For Each A In Vis(Rin).Areas
Set A1(CntA) = A
CntA = CntA + 1
Next A
CntB = 1
For Each B In Vis(CriteriaRange1).Areas
Set B1(CntB) = B
CntB = CntB + 1
Next B
CntC = 1
For Each C In Vis(CriteriaRange2).Areas
Set C1(CntC) = C
CntC = CntC + 1
Next C

If CntA <> CntB Or CntB <> CntC Then
MsgBox ("Error in Sumifs Function: Counts from Ranges are not the same")
End If
Csum = 0
For Cnt = 1 To CntA - 1
Csum = Csum + WorksheetFunction.SumIfs(A1(Cnt), B1(Cnt), CriteriaValue1, C1(Cnt), CriteriaValue2)
Next
SUMIFv = Csum
End Function 
```

（（仅计数可见单元格

如果您有兴趣，这里有一个更通用的 COUNTIF 解决方案，您也可以将其应用于 SUM 和其他对单元格范围进行操作的函数。

此 COUNTIFv UDF 使用工作表函数 COUNTIF 仅对可见单元格进行计数，因此 Condition 参数的工作方式与 COUNTIF 相同。因此，您可以像使用 COUNTIF 一样使用它：

```
=COUNTIFv(A1:A100,1) 
```

请注意，它使用辅助函数 (Vis) 返回给定范围内不相交的可见单元格范围。这可以与其他工作表函数一起使用，以使它们仅对可见单元格进行操作。例如，

```
=SUM(Vis(A1:A100)) 
```

产生 A1:A100 中可见单元格的总和。这种直接在参数列表中使用 Vis 的方法不适用于 COUNTIF 的原因是 COUNTIF 不会接受不相交的范围作为输入，而 SUM 会。

这是UDF代码：

```
Function Vis(Rin As Range) As Range
'Returns the subset of Rin that is visible
Dim Cell As Range
Application.Volatile
Set Vis = Nothing
For Each Cell In Rin
If Not (Cell.EntireRow.Hidden Or Cell.EntireColumn.Hidden) Then
If Vis Is Nothing Then
Set Vis = Cell
Else
Set Vis = Union(Vis, Cell)
End If
End If
Next Cell
End Function

Function COUNTIFv(Rin As Range, Condition As Variant) As Long
'Same as Excel COUNTIF worksheet function, except does not count
'cells that are hidden
Dim A As Range
Dim Csum As Long
Csum = 0
For Each A In Vis(Rin).Areas
Csum = Csum + WorksheetFunction.CountIf(A, Condition)
Next A
COUNTIFv = Csum
End Function )) 
```

这都是带有可见单元格的 countif 和 sumifs 但我需要 sumif 而不是 sumifs 请编辑第二个代码并编译并发布正确的程序:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T15:52:01.877

我不认为这是正确的...

> ......................................使用 DSUM 和/或 SUBTOTAL，但这些函数不t 排除列表中不可见（已过滤）的行。

对于“过滤”和“隐藏”行，SUBTOTAL 的行为是不同的。

这是来自excel帮助：

> 对于从 1 到 11 的 function_num 常量，SUBTOTAL 函数包括 Excel 桌面应用程序“主页”选项卡上“单元格”组中“格式”命令的“隐藏和取消隐藏”子菜单下的“隐藏行”命令隐藏的行的值。当您想对列表中的隐藏和非隐藏数字进行小计时，请使用这些常量。对于从 101 到 111 的 function_Num 常量，SUBTOTAL 函数忽略由 Hide Rows 命令隐藏的行的值。如果您只想对列表中的非隐藏数字进行小计，请使用这些常量。
> 
> 无论您使用哪个 function_num 值，SUBTOTAL 函数都会忽略任何未包含在过滤器结果中的行。

# c# - 如何创建表达式 >;

> ID：16217410
> 
> 赞同：5
> 
> 时间：2013-04-25T14:25:44.943
> 
> 标签：c#, asp.net-mvc, html-helper

如果我有一个模型对象，是否可以创建`Expression<Func<TModel, bool>>()`可以在不同的 htmlHelpers 中使用（例如在 中）`CheckBoxFor()`

```
this HtmlHelper<TModel> htmlHelper 
```

和属性的名称（通过反射）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T14:29:13.157

当然：

```
static Expression<Func<TModel,TProperty>> CreateExpression<TModel,TProperty>(
    string propertyName)
{
    var param = Expression.Parameter(typeof(TModel), "x");
    return Expression.Lambda<Func<TModel, TProperty>>(
        Expression.PropertyOrField(param, propertyName), param);
} 
```

然后：

```
var lambda = CreateExpression<SomeModel, bool>("IsAlive"); 
```

# java - 可以从背景显示的 AlertView

> ID：16217411
> 
> 赞同：1
> 
> 时间：2013-04-25T14:25:48.867
> 
> 标签：java, android, android-asynctask, alertview

我对警报视图有一点问题，这个想法是，当应用程序启动时，它会在后台询问应用程序的新数据，因此在收到信息后，如果有新数据，则应该显示 AlertView。问题来了，因为 AlertView 只显示在我启动 asyncTask 的主要活动中，所以如果我已经在其他活动中，当我回到主要活动时会出现警报，想法是显示 AlertView在用户进行的任何活动中。

我的第一个想法是我发送给 AsyncTask 的上下文是问题，所以我尝试使用 getApplicationContext() 以便应用程序在创建 alertView 时崩溃。所以我正在寻找一种方法来在屏幕上显示这个 AlertView 或类似的东西，无论他在应用程序上，有没有人有想法？

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:02:49.290

您可以在每个活动中使用广播接收器，只要使用广播接收器显示警报框，接收器接收到的内容就会持续监控您的后台服务。

# html - 导航栏图像链接不工作，但代码是完美的。这是怎么回事？

> ID：16217412
> 
> 赞同：0
> 
> 时间：2013-04-25T14:25:51.663
> 
> 标签：html, css, navbar

所以这是我当前的 HTML 代码，在该`<head>`部分中：

```
<ul class="nav">
    <li>
        <a href="http://www.greg-holmes.com/#/title" target="_blank">
            <img src="img/home.png">
        </a>
    </li>
    ... <!-- Deleted some elements for readability -->
    <li>
        <a href="http://www.instagram.com/djspiffy" target="_blank">
            <img src="img/instagram.png">
        </a>
    </li>
</ul> 
```

这是随之而来的 CSS：

```
.nav {
    border-width: 1px 0;
    list-style: none;
    margin: 0;
    padding: 0;
    text-align: center;
}

.nav li {
    display: inline;
}

.nav a {
    display: inline-block;
    padding: 10px;
} 
```

该代码位于[greg-holmes](http://www.greg-holmes.com)，但由于某种原因，链接无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:31:37.637

HTML 不在页眉中，所有 HTML 都属于正文。你的代码应该是

```
<html>

<head>
...
</head>

<body>
    <ul class="nav">
        <li>...</li>
    </ul>
</body>

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:29:25.317

您需要将 HTML 代码放入`<body>`标签而不是`<head>`标签

# asp.net - asp.net 根据复选框选择插入相同的值

> ID：16217413
> 
> 赞同：0
> 
> 时间：2013-04-25T14:25:55.193
> 
> 标签：asp.net

我有 2 个包含一些数据的下拉列表，1 个日期字段和 1 个字段总计现在我添加了一个复选框。如果我在该日期插入下拉值，1 下拉 2，如果我在单击保存时选中复选框，则应为一年中的每个日期插入相同的值

示例：如果我选择日期 1.04.2013

我有：下拉 1 是公司，下拉 2 是离开，总数是 2000，日期是 1.04.2013

对于公司的那个部门，如果选中复选框，则应为一年中的每个月插入值 2000。

# ios - xcarchive 可以在 iPhone 上打开吗？

> ID：16217415
> 
> 赞同：3
> 
> 时间：2013-04-25T14:26:00.397
> 
> 标签：ios, objective-c

我收到了一个应用程序的 xcarchive。我想在我的设备上检查它然后分发。它如何安装在 iPhone 上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:27:17.880

您不能在 iPhone 上安装 xcarchive。请让发送给您的人发送 ipa 文件。

# android - Android Google Maps 应用程序显示灰色背景而不是地图

> ID：16217418
> 
> 赞同：1
> 
> 时间：2013-04-25T14:26:04.827
> 
> 标签：android, google-maps, google-maps-android-api-2

好的，我现在遇到了最奇怪的错误：我正在处理的 Android 应用程序显示灰色背景而不是地图，如下所示：

[![跆拳道](https://i.stack.imgur.com/mVhwq.jpg)](https://i.stack.imgur.com/mVhwq.jpg)
[（来源：[hostingpics.net](http://img4.hostingpics.net/pics/572343Screenshot20130425161918.jpg)）]

这是日志猫：

```
04-25 15:08:42.082: E/Google Maps Android API(19139): Failed to load map.  Could not contact Google servers.
04-25 15:08:42.082: W/Google Maps Android API(19139): Please add <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> into AndroidManifest.xml to ensure correct behavior under poor connectivity conditions. 
```

我不知道是什么原因造成的。我只更改了与地图完全无关的一小部分代码。此外，我尝试恢复我所做的更改，但它仍然不起作用。我尝试添加 logcat 给我的行，更改 API 密钥，重新安装 Google Play 库，删除平板电脑上我的应用程序的早期版本，基本上我在互联网上阅读的所有内容。还是不行。

如果有人知道问题可能是什么，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:32:49.387

当您的密钥有问题或在 Google API 控制台中的配置有问题时会导致此问题。

阅读我写的关于如何生成密钥并集成到控制台中的这篇博文：

[谷歌地图 API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

如果这没有帮助，您可以尝试删除`dubug.keystore`用户文件夹中的文件夹，在 eclipe 中编译一些项目（这会导致重新生成此密钥）并尝试再次注册它。

**更新：** 根据您发布的新错误，您的清单文件中是否有此权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T10:11:49.260

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T19:28:03.700

Emil's post above helped me, I was getting the same error and realised that this was due to me changing the name of my project. I added the changed name along with the same SHA1 I had for my old project on a new line (leaving the one with the old name above) in the console and it seemed to work as normal.

# android - 带有淡入的延迟加载

> ID：16217420
> 
> 赞同：0
> 
> 时间：2013-04-25T14:26:05.853
> 
> 标签：android, lazy-loading, android-image

我正在寻找一种将图像延迟加载到列表视图中的方法。最好是也支持图像动画的框架。

这适用于Android吗？

我正在使用 API 级别 8 及更高级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:31:28.460

您可能想看看[Android Query](http://code.google.com/p/android-query/)。它支持延迟加载图像。正如您在[文档](http://code.google.com/p/android-query/wiki/ImageLoading)中看到的，它还支持基本动画。

使用基本设置进行延迟加载的示例：

```
AQuery aq = new AQuery(context);
aq.id(your_imageview).image("your_image_url"); 
```

延迟加载带有淡入动画的图像的示例：

```
AQuery aq = new AQuery(context);
aq.id(your_imageview).image("your_image_url", true, true, 0, null, 0, AQuery.FADE_IN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T18:07:16.353

您也可以尝试[droidQuery](http://phil-brown.github.io/droidQuery/)：

没有动画：

```
$.with(myView).image(url); 
```

使用淡入动画：

```
$.with(myView).attr("alpha", 0.0f);
$.ajax(new AjaxOptions(url).type("GET").dataType("image").success(new Function() {
    @Override
    public void invoke($ droidQuery, Object... params) {
        $.with(myView).val((Bitmap) params[0]).fadeIn();
    }
})); 
```

# jquery - jVectorMap 创建地图后添加更多标记

> ID：16217422
> 
> 赞同：3
> 
> 时间：2013-04-25T14:26:06.460
> 
> 标签：jquery, jvectormap

我有一个完整的我们 jvectormap。我想在您放大某个状态时显示标记，太好了，我已经完成了...

我用这个

```
var mapObject = $('#vmap').vectorMap('get', 'mapObject'); 
```

将我的地图变成一个对象，然后使用以下内容在地图上放置标记...

```
mapObject.addMarkers(eval(dealers), []); 
```

我的数组设置为...（示例）...

```
//mapObject.addMarkers([{ latLng: [42.940893, -71.444068], name: 'Test' }], []); 
```

现在我的问题是说我仍然想使用 AddMarkers 函数，但我想添加具有不同颜色的标记来代表不同的事物，我是否必须切换到数据序列而不是上面的数组？当使用地图作为对象添加数据时，我不清楚文档，我了解创建地图对象时它是如何工作的，但不像我在上面使用它的方式......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T14:16:03.217

我最终发现我必须在我的数组中添加一个添加对象。

我做了一个 if 函数来基于我想使用的颜色......然后做了以下......

样式 = { r: 3, 填充：'黑色' };

然后将其添加到原始经销商对象中。

# asp.net - 使用 asp.net 中的两个数据库进行 Web 配置错误

> ID：16217424
> 
> 赞同：0
> 
> 时间：2013-04-25T14:26:12.530
> 
> 标签：asp.net, web-config

我开发了一个网站，我的网站中有两个数据库。我在plesk面板中创建了两个数据库和用户并上传了备份，数据库第一个名称是database_Journal，数据库名称2是database_General，用户是UserID1和UserID。但是它有一些问题，它给了我这个错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

我的网络配置是这样的：

```
 <add name="dbconn" connectionString="Password==******;; Persist Security Info=True;User ID=UserID1; Initial Catalog=database_General; Data Source=***.**.**.**" providerName="System.Data.SqlClient" />

    <remove name="LocalSqlServer"/>

    <add name="LocalSqlServer" connectionString="Password=******;Persist Security Info=True;User ID=UserID1; Initial Catalog=database_General; Data Source=***.**.**.**" providerName="System.Data.SqlClient" />

    <add name="dbconn_general" connectionString="Password==******;; Persist Security Info=True;User ID=UserID; Initial Catalog=database_Journal; Data Source=***.**.**.**" providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:31:25.527

试试这个格式...

```
<add name="dbconn" connectionString="server=YourServerNameOrServerIpAddress; database=database_General; uid=UserID1; Password=******" providerName="System.Data.SqlClient" /> 
```

# selenium-webdriver - 如何使用 FluentAutomation SeleniumWebDriver 单击没有 id 的按钮？

> ID：16217425
> 
> 赞同：1
> 
> 时间：2013-04-25T14:26:14.203
> 
> 标签：selenium-webdriver, fluentautomation

我正在使用包装 Selenium Web 驱动程序调用的 FluentAutomation 库，因此可以以更具行为方式的方式导航该站点。

只要元素具有 id 或其他不同的属性，它就可以直接工作：

```
 I.Open(Site.BaseUrl);
    I.WaitUntil(() => I.Expect.Exists("#name-search"));
    I.Click("#applicationHost a"); 
```

但我需要驱动程序单击使用以下 XPath 表达式标识的按钮：

```
//div[@id='questions']/div/div/div[4]/label/span[2]
//div[@id='questions']/div/div/div[2]/label/span[2] 
```

等等。至少这是 Selenium IDE 记录器返回的 XPath。但我似乎无法找到引用这些按钮的正确方法。如您所见，唯一的区别是其中一个 div 的索引（div[4]、div[2]）。是否有一个通用的约定来引用具有此类 XPath 的元素？

更新：这是来自页面检查器的 HTML 摘录。

```
<div class="small-12 large-10 columns large-centered" data-bind="foreach: currentQuestion.alternatives">
            <div class="valg">
                <label data-bind="attr: { for: 'radio-' + $index() }" for="radio-0">
                    <input type="radio" name="radio-question-40" data-bind="attr: { for: 'radio-' + $index() }, value: value" class="hidden" for="radio-0" value="1">
                    <span class="enighet" data-bind="text: ($index() + 1)">1</span>
                    <span class="custom radio" data-bind="click: $parent.pickAnswer, css: { checked: $data.selected }"></span>
                    <span class="enighet" data-bind="text: text">Text for option 1</span>
                </label>
            </div>

            <div class="valg">
                <label data-bind="attr: { for: 'radio-' + $index() }" for="radio-1">
                    <input type="radio" name="radio-question-40" data-bind="attr: { for: 'radio-' + $index() }, value: value" class="hidden" for="radio-1" value="2">
                    <span class="enighet" data-bind="text: ($index() + 1)">2</span>
                    <span class="custom radio" data-bind="click: $parent.pickAnswer, css: { checked: $data.selected }"></span>
                    <span class="enighet" data-bind="text: text">Text for option 2</span>
                </label>
            </div>

        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T07:30:25.457

所以我可以用 XPATH 建议的是：

按钮 1：`"//div[@class='valg'][position() = 0]/label/span[2]"`

按钮 2：`"//div[@class='valg'][position() = 1]/label/span[2]"`

或在 CSS 选择器中

按钮 1：`"div.valg:nth-child(1) label span.enighet"`

按钮 2：`"div.valg:nth-child(2) label span.enighet"`

但我看到实际上你的 div 比你展示的要多。告诉我怎么了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T13:31:38.163

有同样的问题，我使用 Selenium IDE 来识别每个元素的 XPATH，然后像这样使用它：

driver.findElement(By.xpath("//div[@id='thalamusboapp-218829419']/div/div[2]/div[3]/div/div/div[2]/div/span/span" ));

# php - 是否可以将 Doctrine 与持久 PDO 连接一起使用？

> ID：16217426
> 
> 赞同：7
> 
> 时间：2013-04-25T14:26:15.437
> 
> 标签：php, pdo, doctrine-orm

我正在尝试通过启用持久数据库连接来提高 volkszaehler.org 实现的性能。破解了包含 Doctrine 的`Connection`课程后`PDO::ATTR_PERSISTENT => true`，我收到了 PDO 错误`General error: PDO::ATTR_STATEMENT_CLASS cannot be used with persistent PDO instances"`

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T15:06:32.670

您可以将自己的 PDO 实例传递给 Doctrine，自己设置持久连接：

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass, array(
    PDO::ATTR_PERSISTENT => true
));

$config = new \Doctrine\DBAL\Configuration();
$connectionParams = array(
    'dbname' => 'mydb',
    'user' => 'user',
    'password' => 'secret',
    'host' => 'localhost',
    'pdo' => $dbh,
);
$conn = \Doctrine\DBAL\DriverManager::getConnection($connectionParams, $config); 
```

一定要知道在PDO中使用持久连接的含义：[在PDO中使用持久连接有哪些缺点](https://stackoverflow.com/questions/3332074/what-are-the-disadvantages-of-using-persistent-connection-in-pdo)

# unit-testing - 为测试配置 OpenEJB - 将其他项目 EJB 添加到类路径

> ID：16217432
> 
> 赞同：2
> 
> 时间：2013-04-25T14:26:46.260
> 
> 标签：unit-testing, ejb, openejb

我有一个大项目，其中有很多子项目。

对于测试，我使用的是 OpenEJB，它运行良好。

但是现在，在一个子项目中，我还需要另一个子项目中的 EJB。

是否可以强制 OpenEJB 加载其他子项目 EJB？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T14:40:34.867

我通过在我的 pom.xml 中添加测试范围所需的项目的依赖项来使其工作。

# c# - 当 Enum 在 ViewModel 中时，将 Enum 值作为 CommandParameter 传递

> ID：16217434
> 
> 赞同：10
> 
> 时间：2013-04-25T14:26:49.120
> 
> 标签：c#, wpf, xaml, mvvm

我仍在学习 WPF 绑定并且已经为此苦苦挣扎了一段时间。我在 ViewModel 中有一个枚举存储，如下所示：

```
namespace theNamespace
{
    public class frmSetupViewModel
    {
        public enum LocationLabelType {Location, Sample}
        ...
    }
} 
```

我想让一个按钮通过 CommandParameter 传递其中一个值，但无法弄清楚如何让它工作。到目前为止，这些是我尝试过的组合：

```
//When value is inside the frmSetupViewModel, these do not work
CommandParameter="{x:Static local:LocationLabelType.Location}" //'Type  was not found.'
CommandParameter="{x:Static local:frmSetupViewModel+LocationLabelType.Location}" //'Type was not found.'
CommandParameter="{x:Static local:frmSetupViewModel.LocationLabelType.Location}" //'Type was not found.'

CommandParameter="{Binding {x:Static local:LocationLabelType.Location}}" //'Value cannot be null'
CommandParameter="{Binding {x:Static local:frmSetupViewModel+LocationLabelType.Location}}" //'Value cannot be null'
CommandParameter="{Binding {x:Static local:frmSetupViewModel.LocationLabelType.Location}}" //'Value cannot be null' 
```

但是，如果我将枚举移到 VM 外部并进入名称空间，如下所示：

```
namespace theNamespace
{
    public enum LocationLabelType {Location, Sample}

    public class frmSetupViewModel
    {
        ...
    }
} 
```

这很好用：

```
//Works when enum is moved to Namespace
CommandParameter="{x:Static local:LocationLabelType.Location}" 
```

我假设我的 CommandParameter 缺少一些东西？

VM 通过 DataContext 加载：

```
<Window.DataContext>
    <local:frmSetupViewModel />
</Window.DataContext> 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:36:39.397

这工作正常：

```
CommandParameter="{x:Static uiTest:MainWindow+LocationLabelType.Location}" 
```

您使用此代码运行项目？`//'Type was not found.'`如果您不构建项目，WPF 设计器可能会显示此错误，因为它看不到枚举的类型。

# java - 在哪里可以找到创建 java REST 服务的“球衣”？

> ID：16217438
> 
> 赞同：1
> 
> 时间：2013-04-25T14:26:57.783
> 
> 标签：java, rest, jersey

我正在尝试构建一个 java REST 服务。

我正在关注[本](http://www.vogella.com/articles/REST/article.html#first)教程（这似乎非常受欢迎），它说的第一件事是从这个链接下载*球衣：http:* [//jersey.java.net/](http://jersey.java.net/)

但是该链接不起作用，即使我用 Google 搜索更多，我也无法在任何地方找到下载这些对构建服务至关重要的 jar 文件的地方。

我可以在哪里找到它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:33:34.037

您可以从以下位置下载 jar...

```
http://www.java2s.com/Code/Jar/j/Downloadjerseyjar.htm 
```

虽然我建议使用 Maven 依赖项。

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.17.1</version>
</dependency> 
```

# c - 如何在 C99 中用另一个结构成员初始化 void* 数据结构成员？

> ID：16217441
> 
> 赞同：2
> 
> 时间：2013-04-25T14:27:08.730
> 
> 标签：c, pointers, struct, c99, designated-initializer

假设我们有以下结构定义：

```
typedef struct {
  uint8_t a ; 
} deepest_t ;  

typedef struct {
  deepest_t* deepest_ptr ;
} deeper_t ; 

typedef struct {
  deeper_t*  deeper_ptr ;
} deep_t ; 

typedef struct {
  void* data ;
} data_container_t ; 
```

和以下初始化：

```
deepest_t deepest = {
  .a = 5, 
} ; 

deeper_t deeper = { 
  .deepest_ptr = &deepest, 
} ;

deep_t deep = { 
  .deeper_ptr = &deeper,
} ; 
```

现在的问题，您能否告诉我如何`void* data`使用指定的初始化程序进行初始化，以便`void* data`将`deepest_t deepest`. 我试过这样的解决方案，但编译器尖叫它不是一个 const 值：

```
data_container_t data_container = {
  .data = &(((deeper_t*) deep.deeper_ptr)->deepest_ptr),
} ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T06:02:34.227

在这里，我相信您保留了`deepest_ptr`..

```
data_container_t data_container = {
  .data = &(((deeper_t*) deep.deeper_ptr)->deepest_ptr),
} ; 
```

所以要检索它，你可以这样做..

```
deepest_t * d = *((deepest_t**)(data_container.data));

printf(" %ud \n", (*d).a); 
```

`void*`因为在你施放它之前你不能使用它..

**这是[现场执行](http://ideone.com/mGCC24)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-16T12:13:49.213

如果初始化器用于初始化`static`存储持续时间的变量，它应该是一个常量表达式，因此您不能这样做。

如果它用于初始化局部非`static`变量，则可以使用此初始化器：

```
data_container_t    data_container  = {
    .data   = (deep.deeper_ptr)->deepest_ptr,
}; 
```

假设您想要您在文本中所说的内容（“指向`deepest_t deepest`”）。

什么是常量表达式，您可以在这里阅读： [详细说明什么是 C 中的常量表达式？](https://stackoverflow.com/q/4893257/6872717)

# jsf - 试图添加一个动作监听器

> ID：16217443
> 
> 赞同：0
> 
> 时间：2013-04-25T14:27:19.297
> 
> 标签：jsf, listener

我试图向 MenuItem primefaces 组件添加一个动作监听器

```
itemLogout.addActionListener(new ActionListenerManagedBean()); 
```

在我使用的 ActionListenerManagedBean 中：

```
public class ActionListenerManagedBean implements ActionListener {

    public ActionListenerManagedBean() {
        super();

    }

    @Override
    public void processAction(ActionEvent arg0) throws AbortProcessingException {
        System.out.println("Test Action Listener called..");
    }

    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == "aa"){
    } 
    }
} 
```

但是当我单击注销项目菜单时不会发生。

你能帮帮我吗？提前致谢...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T14:33:35.083

你`e.getSource() == "aa"`应该是`e.getSource() == itemLogout`。

基本上`e.getSource()`返回调用操作的对象。

我假设 ActionListenerManagedBean 是一个内部类。

# jquery - 发布到控制器并检查结果事件

> ID：16217446
> 
> 赞同：1
> 
> 时间：2013-04-25T14:27:33.613
> 
> 标签：jquery, asp.net-mvc

我会尝试得到这样的结果：

```
function GetPrice() {
        var url = '@Url.Action("GetAdditionalPrice")';
        $.post(url, { additionalsId: $("input[name=selectedAdditionals]").val }),
        function(data) {
            $("#TotalAmount").val(data);
        }; //View
    }

public ActionResult GetAdditionalPrice(string[] additionalsId)
    {
        decimal price = 0;
        foreach (var id in additionalsId)
        {
            var aid = int.Parse(id);
            price += db.ContractAdditionals.Where(ca => ca.ContractAdditionalID == aid).Select(ca => ca.Price).Single();
        }

        return Json(price, JsonRequestBehavior.AllowGet);
    }//Controller 
```

为什么`string[] additionalsId`参数总是未定义？如何将参数发布到控制器并将结果设置为`#TotalAmount`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:30:53.743

你错过了`()`你的`.val`声明。那应该在控制台中引发 JS 错误。

要传回一个数组，您还需要使用您选择的值构建一个

尝试这个：

```
function GetPrice() {
    var url = '@Url.Action("GetAdditionalPrice")';
    var items = new Array();
    $.each($("input[name=selectedAdditionals]:checked"), function () {
        items.push($(this).val());
    });

    $.post(url, { additionalsId: items }),
    function(data) {
        $("#TotalAmount").val(data);
    }; //View
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:49:55.077

它解决了

```
function GetPrice() {
        var url = '@Url.Action("GetAdditionalPrice")';
        var items = new Array();
        $("input[name=selectedAdditionals]:checked").each(function () {
            items.push($(this).val());
        });
        var postData = { additionalsId: items };
        $.ajax({
            type: "POST",
            url: url,
            data: postData,
            success: function (data) {
                $("#TotalAmount").val(data.result);
            },
            dataType: "json",
            traditional: true
        });
    } 
```

感谢帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:45:58.530

尝试这个

```
function GetPrice() {
    var url = '@Url.Action("GetAdditionalPrice")';
    $.post(url, { additionalsId: $("input[name=selectedAdditionals]").val() }),
    function(data) {
        $("#TotalAmount").val(data.result);
    }; //View
}

public ActionResult GetAdditionalPrice(string[] additionalsId)
{
    decimal price = 0;
    foreach (var id in additionalsId)
    {
        var aid = int.Parse(id);
        price += db.ContractAdditionals.Where(ca => ca.ContractAdditionalID == aid).Select(ca => ca.Price).Single();
    }

    return Json(new {result=price}, JsonRequestBehavior.AllowGet);
}//Controller 
```

# sql - 为什么 SQL Server 不告诉我是哪个字段导致了错误？

> ID：16217449
> 
> 赞同：2
> 
> 时间：2013-04-25T14:27:37.530
> 
> 标签：sql, sql-server, sql-server-2008

执行 sql 插入时，可能会失败，因为其中一个字段将无法验证。有多种验证可能会失败。例如我最近看到的：

```
[22003] [Microsoft][ODBC SQL Server Driver][SQL Server]Arithmetic overflow error converting varchar to data type numeric. (8115) 
```

和

```
[22001] [Microsoft][ODBC SQL Server Driver][SQL Server]String or binary data would be truncated. (8152) 
```

当您有许多列并且使用准备好的语句一次插入许多行时，去寻找麻烦的字段是非常令人沮丧的。为什么Sql Server 不能告诉我哪个字段有问题？请注意，我不是在寻找如何解决这些单独的错误，而是一个更基本的问题，为什么没有实现更好的错误消息。

编辑：[为什么 SQL Server 不能告诉我是哪一列导致了](https://stackoverflow.com/questions/9878645/why-cant-sql-server-tell-me-which-column-is-causing-the-error)被标记为重复关闭的错误实际上并没有回答这个问题。那里接受的答案没有解决这个问题，所以悬赏它不会有任何作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:47:38.760

SQL 是一个基于集合的引擎，集合的逻辑是布尔值。数据要么在集合中，要么不在。是/否。有很多花哨的技术可以让您尽快将您的设备送回您的客户手中。我的猜测是，如果您开始检查集合内的单个值，您的表现会非常糟糕，以至于客户会被竞争的 rdbms 交出拳头。是的，当插入失败时它很烦人，但是将数据分成两半以找到异常的位置会让你很快失望。然后，您可以改进设计方法以防止问题再次发生。（不那么草率，更健壮）

但是您必须向 SQL 开发团队的某个人询问明确的答案，我猜他们会给您三个原因：性能、性能，当然还有可扩展的性能。高温高压

# ruby-on-rails-3 - 将事务从 Rails 应用程序导出到 QuickBooks 的最佳方式

> ID：16217450
> 
> 赞同：1
> 
> 时间：2013-04-25T14:27:37.647
> 
> 标签：ruby-on-rails-3, import, export, quickbooks

我有一个 Rails 应用程序，可以为我们处理所有银行交易。我们的会计师希望所有这些都自动导入 Quickbooks Pro（在线版或桌面版）。我已经阅读了有关 Web Connector 和[Transaction Pro Importer](https://appcenter.intuit.com/transactionproimporter)的信息，但我觉得我没有足够的信息来做出决定。我会很感激任何建议！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:17:43.240

**对于 Windows 版 QuickBooks：**

如果您是一名开发人员，并且对使用一些 SOAP 组件进行开发感到满意，那么 Web 连接器将是您的一个好方向。

已经有一些相当不错的 Web 连接器 Ruby gems：

*   [https://www.google.com/search?q=ruby+quickbooks+web+connector](https://www.google.com/search?q=ruby+quickbooks+web+connector)

如果您不是开发人员和/或不想自己开发某些东西，Transaction Pro 使导入/导出变得相对容易。

**对于 QuickBooks Online：**

对于 SaaS 应用程序，QuickBooks Online API 非常好。对于非 SaaS 应用程序，您必须使用 QuickBooks Online 的 qbXML 网关，这有时会有所限制。在您的特定场景中（您不是一个允许您的客户将其 QB 文件连接到您的应用程序的 SaaS 应用程序），您最好使用适用于 Windows 的 QuickBooks。

# java - 将 ArrayList 转换为 TreeSet

> ID：16217451
> 
> 赞同：1
> 
> 时间：2013-04-25T14:27:42.233
> 
> 标签：java, collections

我有一个`ArrayList<Card> cards = new ArrayList<Card>`我需要转换成`TreeSet<Card>`. 为此，我这样做：

```
new TreeSet<Card>(cards) 
```

毕竟我的大小`TreeSet`等于1。`Card`该类实现了`Comparable`接口。我做错了什么或没有做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T14:30:43.510

如果使用提供的接口求值`Card`中的所有 s都相等（即始终返回），那么您的.`ArrayList``Comparable``compare``0``TreeSet`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:31:50.623

他们实现了 Comparable，但是如何实现呢？在 TreeSet 中，a.compareTo(b) 返回 0 的元素，只添加第一个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-21T04:14:33.247

**将列表转换为集合的最简单方法？- 爪哇**

```
Set<Foo> foo = new HashSet<Foo>(myList);

TreeSet tSet = new TreeSet(myList); 
```

# java - 为什么我的数组不能正确打印出来？

> ID：16217452
> 
> 赞同：0
> 
> 时间：2013-04-25T14:27:48.193
> 
> 标签：java, eclipse, java, arrays

我正在尝试使用下面的代码编写一个简单的程序来创建一个单维数组，然后您可以使用索引号调用一个值。我使用[java](/questions/tagged/java "显示标记为“java”的问题")和[eclipse](/questions/tagged/eclipse "显示标记为“日食”的问题")作为我的编译器。每当我尝试调试或运行程序时，整个数组都会打印为：`[I@1fa8d3b`.

```
class Array    
{
public static void main(String[] args)
{
    int[] MyArray = new int[] {15, 45, 34, 78, 65, 47, 90, 32, 54, 10};
    System.out.println("The full array is:");
    System.out.println(MyArray);
    System.out.println("The 4th entry in the data is: " + MyArray[3]);
}
} 
```

正确的数据输入在被调用时会打印出来。我试图在网上寻找关于我应该做什么的答案，但我找不到任何真正有效的东西。我刚刚开始学习 Java，所以可能有一个非常简单的答案，我只是忽略了。如果有人有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:31:56.210

Java 是一种面向对象的语言。当您`System.out.print(MyArray);`在 Java 中调用时，您实际上是在打印~~内存堆中对象的地址~~来自它的父类的 toString 代码`Object`，代码如下所示，由 EngFouad 的评论贡献，抱歉说错了。您看到打印出来的奇怪字符串是当您请求与变量相关联的内容时计算机用来查找您的数据的参考`MyArray`。

正如其他答案所述，要打印出对象的数据，您可以使用`Array`该类的内置`.toString()`方法。这将打印来自对象的数据，而不仅仅是对象引用。

```
System.out.println(Arrays.toString(MyArray); 
```

**更正** 其实是类Object的toString()：getClass().getName() + "@" + Integer.toHexString(hashCode())。– Eng.Fouad

以上错误已纠正，感谢评论，讨厌提供错误信息。我自己误解了。以下是查看代码的 API 参考：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#toString())

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:28:53.447

利用：

```
System.out.println(Arrays.toString(MyArray)); 
```

为了[打印数组元素](https://stackoverflow.com/a/409795/1651233)。在您的情况下，您使用了默认的[Object.toString()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)实现，它的信息量不大......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T14:28:40.923

改用这个：

```
System.out.println(Arrays.toString(MyArray)); 
```

[API 参考：Arrays.toString(int[])](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5b%5d%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:30:11.233

要打印您需要使用循环的数组。例如：

```
for (int i: MyArray){
System.out.print(i + " ")} 
```

# css - IE9 错误？神秘增长的DIV

> ID：16217455
> 
> 赞同：3
> 
> 时间：2013-04-25T14:27:52.530
> 
> 标签：css, html

我有以下小样本：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Test</title>
<style type="text/css">
    table.Sample { width: 600px; table-layout: fixed; }
    table.Sample col { width: 60px; }
    table.Sample td { height: 20px; line-height: 20px; padding: 0px; }
    table.Sample input { width: 55px; height: 17px; padding: 0px; margin: 0px; border-width: 1px; }
</style>
</head>
<body>
    <div id="scrollDiv" style="width: 400px; overflow: auto; background-color: #CCCCCC;">
        <table class="Sample">
            <colgroup><col /><col /><col /><col /><col /><col /><col /><col /><col /><col /></colgroup>
            <tr><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td></tr>
            <tr><td><input type="text" /></td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td></tr>
            <tr><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td></tr>
        </table>
    </div>
</body>
</HTML> 
```

这在 IE8、IE10、Chrome、FireFox、Safari 上运行良好……但在 IE9 上会出错。

当我开始在文本框中输入内容时，div 的高度会增加。滚动条不移动，但 div 在滚动条下方增长。

我无法在 css 中定义 div 的高度，因为行数是可变的，而且我不确定滚动条是否会出现（因为在实际示例中列数是可变的）。

我可以使用以下 javascript 代码解决问题，但我想知道我做错了什么来引发错误。

```
var div = document.getElementById('scrollDiv');
div.style.height = div.offsetHeight  + "px"; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-10T17:16:22.693

这似乎是 IE9 中的一个错误，它处理溢出-x:auto 的方式。将 display:inline-block 添加到 div 的 css 对我来说非常有用。资源：

[Internet Explorer 9 的神奇扩展 div](https://stackoverflow.com/questions/13353256/internet-explorer-9s-magically-expanding-div)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:45:34.200

问题在于溢出，您可以在 scrollDiv 上使用这些 CSS 规则来修复它

```
overflow: auto;
overflow-x:scroll; 
```

见这里：[http ://cssdesk.com/BAYcp](http://cssdesk.com/BAYcp)

# android - 如何保留动画的结束值？

> ID：16217457
> 
> 赞同：0
> 
> 时间：2013-04-25T14:28:01.653
> 
> 标签：android, animation, position, adt

我用`API 10`. 我有一个`ImageView`嵌套在一个`LinearLayout`. 有`ImageView`一个`OnClickListener`（或一个`OnTouchListener`，我确定最后会使用哪个）。ImageView 位于屏幕中央，单击时会执行以下动画。

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillEnabled="true"
    android:fillAfter="true"
    >
    <alpha
        android:fromAlpha="1"
        android:toAlpha="0" 
        android:duration ="500"
        />

    <translate 
        android:fromXDelta="0%"
        android:toXDelta="-100%p"
        android:duration ="1000"
    />
</set> 
```

问题是动画结束后，它又回到了它的第一个位置，淡出为0，但即使它没有出现，它仍然可以点击。我单击 ImageView 第一次定位的空白空间，它再次执行动画。就像点击鬼一样。如何使 ImageView 保持在写入的位置`android:toXDelta`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:32:21.020

你可以为你的动画设置一个animationListener来解决这个问题，我创建了这个简单的函数：

```
public void startAnimation(final View v, final int animationResourceId, AnimationListener l){
    Animation anim;

    if(v!=null){    // can be null, after change of orientation
        anim = AnimationUtils.loadAnimation(v.getContext(),resId);
        v.setAnimation(anim);
        anim.setAnimationListener(l);
        v.startAnimation(anim);                 
    }
} 
```

然后每次我需要为视图设置动画时，我都可以这样做：

```
startAnimation(myView, R.anim.my_anim, new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {

            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                myView.setVisibility(View.GONE);    
            }
        }); 
```

# c# - 命名空间“系统”中不存在类型或命名空间名称“事务”（您是否缺少程序集引用？） - C# ASP.NET

> ID：16217459
> 
> 赞同：3
> 
> 时间：2013-04-25T14:28:02.507
> 
> 标签：c#, asp.net, dll, visual-web-developer-2010

我们有一个使用 System.Transactions 命名空间的 C# ASP.NET Web 应用程序。

```
using System.Transactions; 
```

这在本地开发时工作得很好——我们只需要首先通过转到网站来添加引用 --> 添加引用...

问题是在部署到 web 主机（通过 FTP 复制）之后，主机不知道这个引用。

```
Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.

Compiler Error Message: CS0234: The type or namespace name 'Transactions' does not exist in the namespace 'System' (are you missing an assembly reference?) 
```

在 Visual Web Developer Express 2010 中工作，我们没有内置 References 文件夹。我看到了这个解决方案：[https](https://stackoverflow.com/a/13035466/2178080) ://stackoverflow.com/a/13035466/2178080建议（但不推荐）将 dll 复制到应用程序文件夹。

我对使用 ASP 进行部署有点陌生，不知道如何包含 System.Transactions 库，以便主机可以找到参考。有没有人遇到过这个问题？

**编辑：**我们采用将 dll 与应用程序一起复制到站点的路线。执行此操作的步骤：

1.  从本地系统复制 System.Transactions.dll。
2.  粘贴到 Bin 文件夹中。
3.  此程序集中引用的对象现在必须使用完全限定名称。

由于此解决方案被列为不推荐，我仍然对其他解决方案持开放态度。

**Edit2：** Grant 和 Chris 帮助我了解我使用的是网站而不是 Web 应用程序。格兰特帮助解决了网站问题的细节。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T15:36:45.233

您的问题是由于发布的站点没有附带 System.Transactions.dll，这表明“复制本地”设置为 False，因此 DLL 没有复制到 bin 文件夹。

转到`References -> System.Transactions`并确保在此引用的属性上“复制本地”设置为**True**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:03:43.040

检查 IIS 中的目标框架，确保它设置为与编译代码相同的 .Net 版本。如果您使用的是具有应用程序池的 IIS 7+，请确保运行应用程序的池是相同版本的.Net。

# android - 自定义视图中的 onClicks 没有响应：

> ID：16217463
> 
> 赞同：0
> 
> 时间：2013-04-25T14:28:16.790
> 
> 标签：android, view, onclick, android-custom-view

我创建了一个自定义视图，我想在其中实现一些`onClick`操作。我创建了以下内容：

**自定义视图 XML 布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/leftMenu"
android:layout_width="100dp"
android:layout_height="fill_parent"
android:background="@drawable/left_menu_background"
android:orientation="vertical" >

<ImageButton
    android:id="@+id/left_menu_close_button"
    android:layout_width="fill_parent"
    android:layout_height="49dp"
    android:background="@drawable/left_menu_close_button" />

<ImageButton
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/left_menu_separator" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/left_menu_buttons_container"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/left_menu_data_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/left_menu_button_transparent"
            android:gravity="center_horizontal"
            android:orientation="vertical"
            android:paddingBottom="10dp"
            android:paddingTop="10dp" >

            <ImageButton
                android:id="@+id/left_menu_data_image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/transparent_rectangle"
                android:scaleType="fitXY"
                android:src="@drawable/folder" />

            <TextView
                 android:id="@+id/left_menu_data_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:text="Data"
                android:textColor="@color/my_white" />
        </LinearLayout>

        <ImageButton
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/left_menu_separator" />

        <LinearLayout
            android:id="@+id/left_menu_settings_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/transparent"
            android:gravity="center_horizontal"
            android:orientation="vertical"
            android:paddingBottom="10dp"
            android:paddingTop="10dp" >

            <ImageButton
                android:id="@+id/left_menu_settings_image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/transparent_rectangle"
                android:scaleType="fitXY"
                android:src="@drawable/settings" />

            <TextView
                android:id="@+id/left_menu_settings_text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dp"
                android:text="Settings"
                android:textColor="@color/my_white" >
            </TextView>
        </LinearLayout>

        <ImageButton
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/left_menu_separator" />
    </LinearLayout>
</ScrollView>

</LinearLayout> 
```

**应用视图线性布局：**

```
package com.emildesign.sgreportmanager.ui;

import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.LinearLayout;

public class AppViewLinearLayout extends LinearLayout {

public AppViewLinearLayout(Context context, AttributeSet attrs, int layoutResource)
{
    super(context, attrs);
    if (isInEditMode())
        return;
    View view = LayoutInflater.from(context).inflate(layoutResource, null);
    addView(view);
}
} 
```

**左侧菜单：**

```
public class LeftSideMenu extends AppViewLinearLayout
{
private LeftSideMenuClickListener mListener;

public LeftSideMenu(Context context, AttributeSet attrs) 
{
    super(context, attrs, R.layout.left_menu);
    findViewById(R.id.left_menu_data_layout).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.settingsOnClick(v);
        }
    });

    findViewById(R.id.left_menu_data_image).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.settingsOnClick(v);
        }
    });

    findViewById(R.id.left_menu_data_text).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.settingsOnClick(v);
        }
    });

    findViewById(R.id.left_menu_settings_layout).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.settingsOnClick(v);
        }
    });

    findViewById(R.id.left_menu_settings_image).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.settingsOnClick(v);
        }
    });

    findViewById(R.id.left_menu_settings_text).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (mListener != null)
                mListener.settingsOnClick(v);
        }
    });

    findViewById(R.id.left_menu_close_button).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            if (mListener != null)
                mListener.closeMenuOnClick(v);
        }
    });

}

public void setListener(LeftSideMenuClickListener listener) 
{
    mListener = listener;
}

public interface LeftSideMenuClickListener 
{
    void dataOnClick(View v);

    void settingsOnClick(View v);

    void closeMenuOnClick(View v);
}
} 
```

在我的活动中，我这样做：

```
public class ReportsTableActivity extends Activity 
{
LeftSideMenu leftSideMenu;
static final String TAG = ReportsTableActivity.class.getSimpleName();
private SGRaportManagerAppObj application;
private List<Report> reportsRepository;

protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    leftSideMenu = (LeftSideMenu) findViewById(R.id.leftSideMenu);
    setContentView(R.layout.reports_list_activity_layout);

    application = (SGRaportManagerAppObj)getApplication();
    reportsRepository = application.reportsRepository.getReportsRepository();
    createReportsList();

    if (leftSideMenu != null)
    {
        leftSideMenu.setListener(new LeftSideMenu.LeftSideMenuClickListener() {

            @Override
            public void settingsOnClick(View v) {
            }

            @Override
            public void dataOnClick(View v) {
            }

            @Override
            public void closeMenuOnClick(View v) 
            {
                Log.d(TAG, "Close left menu button was clicked");
                ToggleButton button = (ToggleButton) findViewById(R.id.showLeftMenuButton);
                button.setChecked(false);
                leftSideMenu.setVisibility(View.GONE);
            }
        });
    }
  //rest of the code... 
```

**问题：**由于某种原因，从未调用过 closeMenuOnClick 并且日志：`"Close left menu button was clicked"`从未出现过。

我的猜测是问题的发生是因为我做了这个检查：`if (leftSideMenu != null)`并且只有在我设置了监听器之后。我这样做的原因是因为我的自定义视图是`viability = gone`在呈现活动时使用的。

任何有关如何正确操作的建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:52:26.880

我认为你需要两个交换这两条线。您需要先设置内容视图，然后才调用 findViewById。

```
setContentView(R.layout.reports_list_activity_layout);
leftSideMenu = (LeftSideMenu) findViewById(R.id.leftSideMenu); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:31:44.463

改变：

```
leftSideMenu = (LeftSideMenu) findViewById(R.id.leftSideMenu);
setContentView(R.layout.reports_list_activity_layout); 
```

至：

```
setContentView(R.layout.reports_list_activity_layout);
leftSideMenu = (LeftSideMenu) findViewById(R.id.leftSideMenu); 
```

也不要创建 7 OnClickListener，制作一个：

```
OnClickListener mClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (mListener == null) {
            return;
        }
        int id = v.getId();
        if (id == R.id.left_menu_data_layout ||
            id == R.id.left_menu_data_image ||
            id == R.id.left_menu_data_text) {
            // skipped three more ids
            mListener.settingsOnClick(v);
        } else {
            mListener.closeMenuOnClick(v);
        }
    }
} 
```

并注册：

```
// repeat 7 times
findViewById(R.id.xxx).setOnClickListener(mClickListener); 
```

或者更好的是让 LeftSideMenu 实现 OnClickListener 并注册：

```
// repeat 7 times
findViewById(R.id.xxx).setOnClickListener(this); 
```

# c# - 尝试将 DateTime.Now 插入日期/时间字段会出现“数据类型不匹配”错误

> ID：16217464
> 
> 赞同：12
> 
> 时间：2013-04-25T14:28:17.267
> 
> 标签：c#, ms-access, oledb

如果我尝试以简单的方式将日期时间写入 MS-Access 数据库中的记录，就像这样

```
cmd.CommandText = "INSERT INTO [table] ([date]) VALUES (?)";
cmd.Parameters.AddWithValue("?", DateTime.Now); 
```

我收到一个异常提示“标准表达式中的数据类型不匹配”。

谁能告诉我为什么？这里出了什么问题？

经过一点实验，我发现如果我写的话我可以让它工作

```
OleDbParameter parm = new OleDbParameter("?", OleDbType.Date);
parm.Value = DateTime.Now;
cmd.Parameters.Add(parm); 
```

但这样做似乎不那么整洁，不那么直接。为什么这是必要的？我忽略了一些简单的事情吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T14:52:54.437

条件表达式不匹配的问题是由于在调用时分配给用于表示 DateTime.Now 值的参数的 OleDbType `AddWithValue`。

AddWithValue 选择的 OleDbType 是`DBTimeStamp`，但 Access 想要一个`OleDbType.Date`.

[http://support.microsoft.com/kb/320435](http://support.microsoft.com/kb/320435)

在网上搜索我发现了另一个有趣的提示。核心问题在于无法处理 DateTime.Now 的毫秒部分的 OleDbParameter。可能强制 OleDbType 为 Date 毫秒部分被省略。如果我们从日期中删除毫秒，我还发现插入也适用于 DBTimeStamp 类型。

```
cmd.Parameters.AddWithValue("?", GetDateWithoutMilliseconds(DateTime.Now));

private DateTime GetDateWithoutMilliseconds(DateTime d)
{
    return new DateTime(d.Year, d.Month, d.Day, d.Hour, d.Minute, d.Second);
} 
```

哦，好吧，等待有人更好地解释这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T14:31:04.823

最简单的语句要求数据库引擎使用它的`Now()`函数来获取当前的日期/时间值。或者，`Date()`如果您对一天中的时间不感兴趣，也可以使用它的功能；`Date()`实际上会给你午夜作为一天中的时间。

```
INSERT INTO [table] ([date]) VALUES (Now()); 
```

IOW，您无需费心按摩日期/时间值`.Net`即可将其插入您的 Access 数据库。

如果您想要一个`INSERT`包含文字日期值的语句，请使用`#`日期分隔符。所以要插入今天的日期：

```
INSERT INTO [table] ([date]) VALUES (#2013-04-25#); 
```

# ruby - 如何使用 Rest API 发布 json 数据

> ID：16217465
> 
> 赞同：0
> 
> 时间：2013-04-25T14:28:18.227
> 
> 标签：ruby, json, rest

```
require 'net/http'
require 'uri'
postData = Net::HTTP.post_form(URI.parse('http://localhost/restapi/index.php/api/posts'), 
                           {'id'=>9,'firstname'=>"test","lastname"=>"test"})
puts postData.body 
```

如何以 JSON 格式发送数据？

```
@toSend = {"id" =>5,"firstname" => "anurag","lastname" => "arya"} 
```

我也试过这个，但没有奏效：

```
@toSend.to_json 
```

例子：

```
require 'rubygems'
require 'net/http'
require 'uri'
require 'json'

url = "http://localhost/restapi/index.php/api/posts"
uri = URI.parse(url)
data = {"id"=>11,                                          
              "firstname"=>"PWD","lastname"=>"last"}     

headers = {'Content-Type' =>'application/json',               
                     'Accept-Encoding'=> "gzip,deflate",
                     'Accept' => "application/json"}

http = Net::HTTP.new(uri.host,uri.port)   # Creates a http object
#http.use_ssl = true                                          # When using https
#http.verify_mode = OpenSSL::SSL::VERIFY_NONE
response = http.post(uri.path,data.to_json,headers)
puts response.code
puts response.body 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-04T10:32:28.733

```
postData=Net::HTTP.post_form(URI.parse('http://localhost/oecprashant/yiiIndex.php/api/rubyREST'), 
                           {'data'=>jsonData}) 
```

# java - Sun Java System Application Server 9.1_02 上的 HTTP 状态 503（构建 b04-fcs）

> ID：16217467
> 
> 赞同：0
> 
> 时间：2013-04-25T14:28:23.057
> 
> 标签：java, spring, hibernate, struts2, glassfish

我们正在将我们的生产应用程序复制到我们的 DR 机器上。我们的应用程序是一个使用 Hibernate Spring 和 Struts2 框架的 Web 应用程序，运行在 Sun Java System Application Server 9.1_02（构建 b04-fcs）上。该应用程序在生产环境中是稳定的。还让它在我们的第一次复制期间运行。最近我们遇到了 HTTP 状态 503。
我们尝试了从重新部署到应用程序服务器（servlet 容器）重启的所有方法。我们甚至尝试从源代码重建应用程序并重新部署它只是为了解决 http 状态 503。什么可能导致这个 HTTP 状态 503？提前谢谢各位。

这是我的依赖项/jar 文件

*   antlr-2.7.6.jar
*   琶音-1.1.jar
*   cglib-2.2.jar
*   commons-collections-3.1.jar
*   commons-dbcp-1.2.2.jar
*   commons-fileupload-1.2.2.jar
*   commons-io-2.0.1.jar
*   commons-lang-2.4.jar
*   commons-logging-1.1.1.jar
*   commons-pool-1.4.jar
*   dom4j-1.6.1.jar
*   freemarker-2.3.16.jar
*   ganymed-ssh2-build210.jar
*   hibernate-jpa-2.0-api-1.0.1.Final.jar
*   hibernate3.jar
*   javassist-3.12.0.GA.jar
*   抛弃-1.3.2.jar
*   jta-1.1.jar
*   ldap.jar
*   log4j-1.2.14.jar
*   mime-util-2.1.3.jar
*   ognl-3.0.1.jar
*   oracle10g.jar
*   org.springframework.asm-3.0.6.RELEASE.jar
*   org.springframework.beans-3.0.6.RELEASE.jar
*   org.springframework.context-3.0.6.RELEASE.jar
*   org.springframework.core-3.0.6.RELEASE.jar
*   org.springframework.expression-3.0.6.RELEASE.jar
*   org.springframework.jdbc-3.0.6.RELEASE.jar
*   org.springframework.orm-3.0.6.RELEASE.jar
*   org.springframework.transaction-3.0.6.RELEASE.jar
*   org.springframework.web-3.0.6.RELEASE.jar
*   slf4j-api-1.6.1.jar
*   slf4j-log4j12-1.6.1.jar
*   struts2-core-2.2.3.1.jar
*   struts2-json-plugin-2.2.3.1.jar
*   struts2-spring-plugin-2.2.3.1.jar
*   xwork-core-2.2.3.1.jar

这是应用程序服务器日志

```
Log Entry Detail 
```

时间戳 2013 年 4 月 25 日 17:03:12.981 日志级别 SEVERE 记录器 org.apache.catalina.core.StandardContext 名称-值对 _ThreadID=14;_ThreadName=pool-1-thread-7;_RequestID=d73c920a-2b6a-4f42-b523 -93503d089b74；记录号 302 消息 ID PWC1306 Complete Message Startup of context /myproject 由于先前的错误而失败

```
Log Entry Detail 
```

> 时间戳 2013 年 4 月 25 日 17:03:12.980 日志级别 SEVERE 记录器 javax.enterprise.system.container.web 名称-值对 _ThreadID=14;_ThreadName=pool-1-thread-7;_RequestID=d73c920a-2b6a-4f42-b523 -93503d089b74；记录号 301 消息 ID WebModule[/myproject]PWC1275 完成消息异常将上下文初始化事件发送到类 org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanCreationException 的侦听器实例：创建名为“myprojectSessionFactory”的 bean 时出错在类路径资源 [hibernate-config/myproject-hibernate-spring.xml] 中定义：调用 init 方法失败；嵌套异常是 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory 的 java.lang.NoSuchMethodError: javax/persistence/OneToMany.orphanRemoval()Z。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:04:52.627

这是一个大线索：

```
Caused by: java.lang.NoSuchMethodError: 
           javax/persistence/OneToMany.orphanRemoval()Z 
```

就是说有些代码需要在 API 上调用带有签名的方法`boolean orphanRemoval()`……`javax.persistence.OneToMany`但是刚刚加载的 API 版本没有提供该方法。

换句话说，您在 WAR 文件中的某些 JAR 之间存在版本不匹配。

我不认为这是 hibernate 和 hibernate-jpa 文件之间的不匹配，因为 JBoss Hibernate 3.x 发行版 zip 包含具有这些名称的文件。

相反，我认为这是 Hibernate 和 Spring 之间的不匹配。特别是，[Spring手册](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/orm.html#orm-hibernate)说：

> 注意：从 Spring 3.0 开始，Spring 需要 Hibernate 3.2 或更高版本。

目前尚不清楚您使用的是哪个版本的 Hibernate 3，但我的理论是它对于 Spring 3.0.x 来说太旧了。

# objective-c - Parse.com 获取用户名，如果它的 facebook 或解析用户

> ID：16217471
> 
> 赞同：2
> 
> 时间：2013-04-25T14:28:31.947
> 
> 标签：objective-c, parse-platform

要获取当前用户名，我使用： NSString *userName = [[PFUser currentUser] username]; 问题是，如果用户使用 FB 登录，我会得到一些字符串，例如 'u55yceub4z2yzrezbdfpyx3bl' 而不是真正的用户名。

我知道我可以得到它：

```
FBRequest *request = [FBRequest requestForMe];
[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
if (!error) {
    NSDictionary *userData = (NSDictionary *)result;
    NSString *userName = userData[@"name"];
}}]; 
```

但问题是，有什么方法可以让用户忘记用户是用 Parse 还是 Facebook 登录的？如果它是否定的，我怎么知道我通过 facebook 登录的用户以获得正确的用户名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:14:31.977

利用`PFFacebookUtils` `- isLinkedWithUser:`

# android - 在 android-amazing-listview 中展开/折叠

> ID：16217478
> 
> 赞同：0
> 
> 时间：2013-04-25T14:28:43.360
> 
> 标签：android

我正在使用[http://code.google.com/p/android-amazing-listview/](http://code.google.com/p/android-amazing-listview/)来显示分段列表视图。谁能指出我如何使用这个库进行展开/折叠的教程或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T17:42:29.727

它不支持此功能。

# ruby-on-rails-3 - Bootstrap 正在添加比 Rails 中要求的更多的图标

> ID：16217479
> 
> 赞同：0
> 
> 时间：2013-04-25T14:28:47.580
> 
> 标签：ruby-on-rails-3, css, twitter-bootstrap, twitter-bootstrap-rails

我正在尝试将用户图标添加到我的标题中。bootstrap 添加的图标比我的代码要求的要多，这是怎么回事？提前致谢！

```
<ul class="nav pull-right">
 <% if user_signed_in? %>
   <li><%= link_to "Edit Profile", edit_user_registration_path %></li>
   <li><%= link_to "Logout", destroy_user_session_path, method: :delete %></li>
 <% else %>
   <li><%= link_to "", new_user_session_path, class: "icon-user" %></li>
 <% end %>
</ul> 
```

[http://i.minus.com/i7krj72G9Gmsd.png](http://i.minus.com/i7krj72G9Gmsd.png)

我正在使用响应式导航栏顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:25:28.760

我的 rails 项目中没有引导图标来测试它，但看看这是否有效：

```
<%= link_to raw("<i class='icon-user'></i>"), new_user_session_path %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:54:09.950

您可以在 CSS 中设置`padding:15px 15px 15px`为`padding:0`for `.navbar .nav>li>a`。

# c# - JavaScriptSerializer 不会将日期字符串识别为 DateTime？

> ID：16217481
> 
> 赞同：0
> 
> 时间：2013-04-25T14:28:52.947
> 
> 标签：c#, javascript

这是我的模型：

```
public class ReportAllMediaDetailsParams
    {
        public int profileID  { get; set; }
        public int organisationID { get; set; }
        public DateTime startDate { get; set; }
        public DateTime endDate { get; set; }
} 
```

这是我的反序列化器：

```
var serializer = new JavaScriptSerializer();
var reportParams = serializer.Deserialize<ReportAllMediaDetailsParams>(json); 
```

来自 json 的日期是：

```
"{\"profileID\":\"41\",\"organisationID\":\"2252\",\"startDate\":\"01/01/1970\",\"endDate\":\"01/01/1970\"}" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:39:27.013

*   Don't use `JavaScriptSerializer`, use [Json.Net](http://james.newtonking.com/projects/json-net.aspx) instead.

*   Don't use locale specific formats such as `MM/dd/yyyy` or `dd/MM/yyyy` in JSON. For example, does `1/4/2013` represent the first day of April? Or the fourth day of January? There's no way to know.

*   Use ISO8601 format instead. It is culture-invariant, so there is no ambiguity. In ISO format, you have `2013-01-04`, which is *always* `yyyy-mm-dd` so there is no ambiguity. A full datetime would be `2013-01-04T05:30:27.123` for example.

*   Coming from C#, use `DateTime.ToString("o")` to get this format - or just use Json.Net which automatically serializes `DateTime` and `DateTimeOffset` using the ISO format.

# javascript - Onmouseover 光标在 IE 中不会改变

> ID：16217491
> 
> 赞同：0
> 
> 时间：2013-04-25T14:29:24.247
> 
> 标签：javascript, html, internet-explorer, cursor, onmouseover

这是我的 JS 代码：

```
 <script type="text/javascript">
       function leftCur(elem) {
          elem.style.cursor = 'url("izgled/slike/right.png"), auto';
       };
    </script> 
```

这是我的 HTML 代码的一部分：

```
<div class="mainleft" onmouseover="leftCur(this)"> 
```

当我将鼠标悬停在 div 上时，鼠标指针会改变图片，它在 Chrome 和 FF 中有效，但在 IE 中无效。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:33:53.057

`.png`至少某些版本的Internet Explorer 不支持`.gif`游标。

[MDN在这里](https://developer.mozilla.org/en-US/docs/CSS/cursor/url?redirectlocale=en-US&redirectslug=CSS%2FUsing_URL_values_for_the_cursor_property)有很好的参考

尝试改用`.cur`光标。

# php - 用引号将 html 保存在数据库和标题上

> ID：16217495
> 
> 赞同：0
> 
> 时间：2013-04-25T14:29:27.490
> 
> 标签：php, mysql

如果我尝试在我的数据库上保存一些文本，我会收到错误消息。

让我们这样说：

```
$name = "Bob's Pizzaria";
$description = "<b>tes, just test</b>"; // also color, size formats 
```

当我保存到数据库时，我使用这个：

```
$A_Name = mysql_real_escape_string($_REQUEST["name"]);
$A_Desc = mysql_real_escape_string($_REQUEST["description"]); 
```

然后插入数据库。

我收到一个错误，`$A_Name`因为有一个撇号 ( ' )

并且在描述上它不保留文本格式，如粗体、颜色、大小等。

最好或正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:31:54.823

用。。。来代替 '

```
str_replace("'","&apos;",$name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:32:13.760

如果这是您遇到的唯一问题，您可以执行以下操作

```
$clean_name = str_replace("'", '&apos;', $name); 
```

这只会将您的撇号转换为 HTML ISO-8859-1 参考

# grails - Grails Security-UI 缺少 菜单

> ID：16217498
> 
> 赞同：1
> 
> 时间：2013-04-25T14:29:30.410
> 
> 标签：grails, spring-security

我已经安装了`spring-security-core`、`spring-security-ui`和`spring-security-acl`插件，并且大部分功能似乎都可以工作，除了当我查看用户控制器时，基本菜单下拉菜单是空白的。当我将鼠标悬停在空白菜单项上时，下拉菜单会正确填充，但我需要能够看到基本菜单项。

这些是我安装的插件：

```
runtime ":hibernate:$grailsVersion"
    runtime ":jquery:1.8.3"
    runtime ":resources:1.1.6"
    build ":tomcat:$grailsVersion"
    runtime ":database-migration:1.1"
    compile ':cache:1.0.0'
    compile ':mail:1.0.1'
    compile ":spring-security-ui:0.2"
    compile ":famfamfam:1.0.1"
    compile ":jquery-ui:1.8.24"
    compile ':spring-security-core:1.2.7.3'
    compile ":spring-security-acl:1.1.1" 
```

我查看了[用户指南](http://grails-plugins.github.io/grails-spring-security-ui/docs/manual/)并重新安装了插件所需的所有依赖项（jquery、jquery-ui 和 famfamfam）。我也尝试过刷新依赖项。在研究这个问题时，我发现大多数遇到这个问题的人都通过升级 jquery-ui 插件解决了这个问题，但我有最新版本。

此问题存在于 IE、Firefox 和 Chrome 浏览器中。任何帮助，将不胜感激。谢谢。

编辑：我正在运行 Spring 的 Groovy/Grails 3.2.0 版工具套件

# javascript - 在 maxlength-set 输入上粘贴时检测字符串长度

> ID：16217499
> 
> 赞同：1
> 
> 时间：2013-04-25T14:29:31.647
> 
> 标签：javascript, jquery, html

这是一个很长的镜头，但我想我不妨问问。我有一个 a`maxlength`为 100 的文本输入，如果用户尝试粘贴字符串长度大于 100 的文本（在它被自动缩短之前），是否可以在粘贴时检测到？谢谢。

```
$('#limitedText').paste(function(){
   if($(this).val().length > 100) {
     //do somthing  
  } 
});

<input type = "text" id = "limitedText" maxlength = "100"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:31:47.617

您可以删除该`maxlength`属性，而是添加一个`onchange`侦听器来获取当前值，然后截断为 100。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:09:03.723

```
function fiStrinLen(id)
{
    var st = id.value;
    var stLen = st.length;
    if(stLen>100)
    {
        alert("Before\n\n"+id.value)
        id.value = st.substring(0,99)
        alert("After\n\n"+id.value)
    }
}

'<input id="pasChar" type="text" name="testInput" oninput="fiStrinLen(this)" />' 
```

# objective-c - 预处理器目标检查

> ID：16217502
> 
> 赞同：2
> 
> 时间：2013-04-25T14:29:34.117
> 
> 标签：objective-c, unit-testing, macros, c-preprocessor, target

我想使用预处理器命令来测试我正在编译的目标。我读到的每个例子都告诉我这样做：

*   在我的目标中添加一个预处理器宏。

*   做这个 ：

    ```
    #ifdef TARGET_NAME_MACRO
        NSLog(@"TARGET_NAME");
    #else
        NSLog(@"ANOTHER_TARGET");
    #endif 
    ```

但是，它不起作用。每当我在我的 TARGET_NAME 的文件中执行此操作时，此条件都会通过，但在另一个目标的文件中执行此操作时不会通过。如果我在测试模式下运行它，我需要在另一个目标的文件中进行测试。

我尝试了几件事，没有一个成功。

有任何想法吗？

# java - 遍历时元素更改时 Treeset 的行为

> ID：16217503
> 
> 赞同：2
> 
> 时间：2013-04-25T14:29:40.723
> 
> 标签：java

也许是一个新手问题，如果我在遍历 TreeSet 时更改一个元素会发生什么？这会导致集合中元素的重新排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:34:26.220

> 这会导致集合中元素的重新排序吗？

不，改变集合内的元素不会导致树集合的重新排序。你永远不应该这样做，因为一旦你做出改变顺序的突变，你的元素可能会在树中丢失。你应该做的是删除元素，改变其改变顺序的属性，然后重新插入它。

考虑这个示例类：

```
class Student : Comparable<Student> {
    private String name;
    public Student(String name) {this.name = name;}
    public final String getName() {return name;}
    public final void setName(String name) { this.name = name;}
    public int compareTo<Student>(Student other) {
        return name.compareTo(other.name);
    }
} 
```

如果你制作这样的树集

```
TreeSet<Student,Integer> gradeInMath = ... 
```

然后决定在学生的名字已经在集合中时更改它，你应该这样做：

```
Student nameChangeStudent = new Student("Joe");
Integer theGrade = gradeInMath.remove(nameChangeStudent);
nameChangeStudent.setName("Jack");
gradeInMath.put(nameChangeStudent, theGrade); 
```

如您所见，这根本不漂亮。这就是为什么作为一般规则，您应该更喜欢地图的*不可变*键，包括基于散列的和基于树的。

# java - android动画菜单背景

> ID：16217508
> 
> 赞同：1
> 
> 时间：2013-04-25T14:30:04.773
> 
> 标签：java, android, animation, view

我目前正在开发另一个 android 应用程序。它确实有一个主菜单。到目前为止，它非常简单 - 里面有 4 个按钮。现在我希望该菜单的背景像动态壁纸一样具有动画效果

事实上，我只想使用静态背景图像并水平滑动 1-2 张其他图像。我对此进行了一些研究，发现动态壁纸随 API 2.1 一起提供。这将完全符合我的需求，因为应用程序应该与此 API 向下兼容 - 当查看动画时，RenderScript 为。提出了 API 3.1，大多数教程都建立在此之上。

所以现在我只是错过了从哪里开始的建议。我感谢各种帮助！

根据建议，我尝试了补间动画 - 我非常遵循本教程[http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-simple-tween-animation/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-simple-tween-animation/)

并且在仿真设备中它的工作就像一个魅力.. 但是当我在我的本机 API 2.1 设备上运行它时，没有显示动画.. 有什么我没有考虑过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:43:01.313

首先感谢[Class Stacker](https://stackoverflow.com/users/1856738/class-stacker)，他给了我使用 Tween Animations 的建议——这真的非常适合我的需求，谢谢！- 不幸的是，动画没有在 API 2.1 设备上显示。

按照这个教程，我像这样设置我的补间动画“clouds_pass.xml” [-](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-simple-tween-animation/)

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:shareInterpolator="false"
android:duration="80000"
android:interpolator="@android:anim/linear_interpolator"
android:fillAfter="true"
>

<translate
    android:fromXDelta="155%p"
    android:toXDelta="-100%p"
    android:repeatCount="infinite"
/> 
```

因为 Activity 像那样调用补间 -

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImageView clouds = (ImageView)findViewById(R.id.clouds);
    Animation cloudspass = AnimationUtils.loadAnimation(this,R.anim.clouds_pass);
    clouds.startAnimation(cloudspass);

} 
```

我不确定这可能是什么原因..但从“clouds_pass.xml”中删除 android:duration 标签并设置持续时间

```
cloudspass.setDuration(80000); 
```

加载动画后修复它 - 现在它按预期工作到 API 2.0 设备。

# php - Zend 在开发模式下抛出 404 标头

> ID：16217513
> 
> 赞同：0
> 
> 时间：2013-04-25T14:30:15.790
> 
> 标签：php, jquery, zend-framework

所以我正在开发一个应用程序，我对控制器进行了一些 ajax 调用，如果没有数据会抛出 404。

```
throw new Zend_Controller_Action_Exception('This page does not exist', 404); 
```

问题是我`$this->frontController->throwExceptions(true);`在开发模式下会抛出错误，但它没有设置 404 标头，我需要标头，因为在基于标头的 ajax 调用中，我知道接下来会发生什么。

有没有办法在`throwExceptions`设置为的开发模式下抛出 404 标头`true`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:44:56.157

您应该使用 ErrorHandler 插件并注册一个 ErrorController 来指示 404 页面，如下所述：

[http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html#zend.controller.plugins.standard.errorhandler](http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html#zend.controller.plugins.standard.errorhandler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:52:03.597

解决方法是调用：`->sendHeaders();`

```
$this->getResponse()-> setHttpResponseCode(405)-> setRawHeader('HTTP/1.1 405 Method Not Allowed')->sendHeaders(); 
```

# c# - 检查 svn c# 中特定目录中的更新

> ID：16217518
> 
> 赞同：1
> 
> 时间：2013-04-25T14:30:29.053
> 
> 标签：c#, svn, revision, sharpsvn, svn-update

我正在尝试检查某个 svn 子目录是否已更新，如果是，请更新我的整个工作目录。

这是我所做的：

```
SvnClient svnClient = new SvnClient();
SvnWorkingCopyClient workingCopyClient = new SvnWorkingCopyClient();

SvnInfoEventArgs svnInfo;
SvnWorkingCopyVersion workingCopyVersion;

Uri svnRepository = new Uri(m_svnAddress + /local/trunk/somefolder");

svnClient.GetInfo(svnRepository, out svnInfo);
workingCopyClient.GetVersion("C:\\Workspace\\somefolder", out workingCopyVersion);

int recentSvnRevision = unchecked((int)svnInfo.Revision);
int currentVersion = unchecked((int)workingCopyVersion.End);

if (recentSvnRevision != currentVersion)
   // Do stuff 
```

问题是`recentSvnRevision`设置为svn上整个目录的最新修订号，而不是`/local/trunk/somefolder`目录的修订。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:12:59.867

您可以使用它来获取特定目录的最新修订号：

```
SvnInfoEventArgs info;
client.GetInfo(RemotePath, out info);
return info.LastChangeRevision; 
```

其中 RemotePath 是您要检查的**文件夹的目录（例如**[https://svn.exmaple.com/local.../somefolder](https://svn.exmaple.com/local.../somefolder)），而不是存储库的路径。

# c# - dll 异常：（HRESULT 异常：0x80131040）：ThoughtWorks.Selenium.Core，版本=2.12.0.0，

> ID：16217519
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:30:34.923
> 
> 标签：c#, visual-studio-2010, selenium-webdriver

> System.IO.FileLoadException：无法加载文件或程序集“ThoughtWorks.Selenium.Core，版本=2.12.0.0，文化=中性，PublicKeyToken=1c2bd1631853048f”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我正在从事从 selenium RC 到 Selenium webdriver 的迁移项目，并将我的 Wedriver dll 升级到版本 2.31.2。我已经从堆栈中阅读了有关此错误的帖子，并已清除 Bins 并检查了 .csprj 文件，并且完成了所有操作，但仍然遇到相同的错误。你知道我在这里想念什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T09:28:38.793

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/0e82b5d2-e777-4c24-9e4d-9bc3f74cbaf7/exception-from-hresult-0x80131040?forum=csharpgeneral](http://social.msdn.microsoft.com/Forums/vstudio/en-US/0e82b5d2-e777-4c24-9e4d-9bc3f74cbaf7/exception-from-hresult-0x80131040?forum=csharpgeneral)

你去这个。在 web.config 版本和程序集版本必须相同。

# regex - 如何匹配 Emacs 正则表达式中的任何字符串？

> ID：16217520
> 
> 赞同：0
> 
> 时间：2013-04-25T14:30:37.897
> 
> 标签：regex, emacs

我指的是这个页面：[http ://ergoemacs.org/emacs/emacs_regex.html](http://ergoemacs.org/emacs/emacs_regex.html)

这表示要在 Emacs Regexp 中捕获模式，您需要像这样转义括号：`\(myPattern\)`.

它进一步说，捕获 ASCII 字符序列的语法是`[[:ascii:]]+`

在我的文档中，我试图匹配出现在`<p class="calibre3">`和之间的所有字符串`</p>`

所以，按照上面的语法，我做了一个替换正则表达式

`<p class="calibre3">\([[:ascii:]]+\)</p>`

但它找不到匹配项。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:40:02.110

正则表达式不适用于通用 HTML 解析，但由于段落标签不能有效嵌套，以下内容会很好（前提是标记有效且格式正确）。

```
<p class="calibre3">\(.*?\)</p> 
```

`*?`是非贪婪的零次或多次重复运算符，因此它将尽可能少地匹配——在这种情况下，直到下一个`</p>`（与贪婪版本相反，它将匹配所有内容，直到`</p>`文本中的最后一个）。

如果该`[^<]`方法适合相关数据，则该方法很好，但如果段落中有其他标签，则该方法将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:43:26.630

您需要转义尖括号，我会使用 [^<] 而不是 [[:ascii]] ，如下所示：

```
\<p class="calibre3"\>([^<]+\)</p\> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:58:54.193

`<p class="calibre3">\([^<]\)+</p>`

来源：@TooTone

# javascript - 我在 Chrome 中收到“画布已被污染”错误，但在 FF 中没有

> ID：16217521
> 
> 赞同：10
> 
> 时间：2013-04-25T14:30:37.800
> 
> 标签：javascript, cross-browser, html5-canvas

我的 Javascript 实现有问题。该脚本将在 Firefox 中运行，但在 Chrome 中它说：

```
Unable to get image data from canvas because the canvas has been tainted by cross-origin data. index.html:1
Uncaught Error: SecurityError: DOM Exception 18 
```

有谁知道这种不一致行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T14:50:38.163

Chrome 不会认为不同的本地文件来自同一个域。也就是说，您通过`file://`URL 引用的每个本地文件都被视为来自与其他`file://`URL 不同的唯一域。他们在同一个目录中没有区别。

您可以使用一个选项（我认为是“”）启动 Chrome `--allow-file-access-from-files`，告诉它将本地文件视为所有来自一个公共域。

# css - 带箭头的 HTML div 注释框

> ID：16217528
> 
> 赞同：3
> 
> 时间：2013-04-25T14:30:59.617
> 
> 标签：css, html

我正在尝试创建一个带有箭头的评论框。我正在使用 CSS，但我有一个无法解决的问题。

我有一个白色背景，我需要用白色背景制作我的评论框。所以，为了让用户可以看到这个盒子，我需要给盒子加上一个边框，但我不知道如何给箭头加上边框。

这是我的CSS：

```
body {background: grey;padding: 40px}

.comment_div {
    background: white;
    width: 250px;
    padding: 10px;
    display: block;
}

.pointer {
    border: solid 20px transparent;
    border-right-color: #fff;
    position: absolute;
    margin: 40px 0 0 -38px;
    z-index: 999;
} 
```

这是HTML：

```
<div class="pointer"></div>
<div class="comment_div">
    test testtest testtest testtest testtest testtest testtest test
    test testtest testtest testtest testtest testtest testtest test
    test testtest testtest testtest testtest testtest testtest test
    test testtest testtest testtest testtest testtest testtest test
</div> 
```

这是[jsfiddle](http://jsfiddle.net/Zaukt/1157/)。

如何为下面的框设置边框？

![在此处输入图像描述](https://i.stack.imgur.com/zshp5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:02:38.730

这是我的解决方案，[jsfiddle](http://jsfiddle.net/RxxLG/)。我希望每个人都能从中受益。

```
.left {
    width: 920px !important;
    padding-bottom: 40px;
    min-height: auto !important;
    padding-right: 0;
    float: left;
}

.left > p:first-of-type {
    background: #ffd987;
    font-style: italic;
    padding: 5px 10px;
    margin-bottom: 40px;
}

.tip {
    background: #fff;
    border: 1px solid #ccc;
    padding: 10px;
    font-size: 1.2em;
    position: relative;
    width: 200px;
}

.tip:before {
    position: absolute;
    top: -14px;
    left: 98px;
    display: inline-block;
    border-right: 14px solid transparent;
    border-bottom: 14px solid #fff;
    border-left: 14px solid transparent;
    border-bottom-color: rgba(0, 0, 0, 0.2);
    content: '';
}

.tip:after {
    position: absolute;
    top: -12px;
    left: 99px;
    display: inline-block;
    border-right: 12px solid transparent;
    border-bottom: 12px solid #fff;
    border-left: 12px solid transparent;
    content: '';
}

.tip.left:before {
    border-top: 14px solid transparent;
    border-right: 14px solid #fff;
    border-bottom: 14px solid transparent;
    border-right-color: rgba(0, 0, 0, 0.2);
    left: -28px;
    top: 20px;
}

.tip.left:after {
    border-top: 12px solid transparent;
    border-right: 12px solid #fff;
    border-bottom: 12px solid transparent;
    left: -24px;
    top: 22px;
}

<div style="padding:50px">

<div class="tip left">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam consectetur quam a sapien egestas eget scelerisque lectus tempor. Duis placerat tellus at erat pellentesque nec ultricies erat molestie. Integer nec orci id tortor molestie porta. Suspendisse eu sagittis quam.
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam consectetur quam a sapien egestas eget scelerisque lectus tempor. Duis placerat tellus at erat pellentesque nec ultricies erat molestie. Integer nec orci id tortor molestie porta. Suspendisse eu sagittis quam.
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-23T18:43:27.160

该站点提供了一种非常简单的方式来为您生成 CSS。只需选择您想要箭头在哪一侧，然后创建 CSS。

[http://www.cssarrowplease.com/](http://www.cssarrowplease.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:44:11.840

如果你乐于只支持现代浏览器，你可以使用 CSS3 的 psuedo`::before`元素。

[http://jsfiddle.net/26Lww/177/](http://jsfiddle.net/26Lww/177/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-19T12:46:53.120

或者，您可以查看[此](http://www.dreamtemplate.com/dreamcodes/documentation/comment_boxes.html)页面。

```
<!-- DC Comment Boxes Start -->
<div class="tsc_clean_comment">
  <div class="avatar_box"> <img src="http://pimg.co/p/52x52" alt="Avatar" class="avatar" />
    <p class="username">Joe Blogs</p>
  </div>
  <div class="comment_box fr">
    <p class="comment_paragraph" contenteditable="true">This field is completely editable. To disable this feature remove the "contenteditable=true" tag from this code.</p>
    <a href="#" class="reply">Reply</a> <span class="date">1st January 2020</span> </div>
  <div class="tsc_clear"></div>
</div>
<!-- DC Comment Boxes End --> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-25T14:41:28.120

一种简单的方法是将盒子制作为图像。将其用作背景图像，并留有一点边距，以便文本在框内。

# c - 使用 LD_PRELOAD 重载对共享库的 C 函数的调用

> ID：16217529
> 
> 赞同：2
> 
> 时间：2013-04-25T14:31:00.700
> 
> 标签：c, gcc, ld, dynamic-linking

我正在按照[这个答案](https://stackoverflow.com/a/618059/880584)覆盖对 C 库的 C 函数的调用。

我认为我做的一切都是正确的，但它不起作用：

我想覆盖“DibOpen”功能。这是我在运行应用程序时传递给 LD_PRELOAD 环境变量的库代码：

```
DIBSTATUS DibOpen(void **ctx, enum Board b)
{
    printf("look at me, I wrapped\n");

    static DIBSTATUS (*func)(void **, enum Board) = NULL;
    if(!func)
        func = dlsym(RTLD_NEXT, "DibOpen");
    printf("Overridden!\n");
    return func(pContextAddr, BoardType, BoardHdl);
} 
```

`nm lib.so | grep DibOpen`节目的输出

```
000000000001d711 T DibOpen 
```

当我像这样运行我的程序时

```
LD_PRELOAD=libPreload.so ./program 
```

我将我`program`的与 -ldl 链接，但`ldd program`没有显示到 libdl.so 的链接

它停止于

```
 symbol lookup error: libPreload.so: undefined symbol: dlsym 
```

. 我能做些什么来进一步调试呢？我的错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:51:00.997

当你创建一个共享库时（不管它是否会在 中使用`LD_PRELOAD`），你需要命名*它*需要解决其依赖关系的所有库。（在某些情况下，`dlopen`ed 共享对象可以依赖可执行文件为其提供符号，但最好不要依赖它。）在这种情况下，您需要链接`libPreload.so`到`libdl`. 在 Makefile 中：

```
libPreload.so: x.o y.o z.o
        $(CC) -shared -Wl,-z,defs -Wl,--as-needed -o $@ $^ -ldl 
```

该选项`-Wl,-z,defs`告诉链接器，如果共享库具有未解析的未定义符号，它应该发出错误，因此这种类型的未来问题将被更早地发现。该选项`-Wl,--as-needed`告诉链接器不要记录对实际上不满足任何未定义符号的库的依赖。这两个都*应该*默认启用，但由于历史原因，它们不是。

# php - PNG文件不会上传

> ID：16217533
> 
> 赞同：1
> 
> 时间：2013-04-25T14:31:06.177
> 
> 标签：php, upload, png

我有以下用于上传图片的脚本；此文件适用于除 PNG 文件之外的所有其他文件扩展名。有什么理由吗？

这是我的脚本；

```
// initialization
$result_final = "";
$counter = 0;

// List of our known photo types
$known_photo_types = array(
'image/pjpeg' => 'jpg',
'image/jpeg' => 'jpg',
'image/gif' => 'gif',
'image/bmp' => 'bmp',
'image/x-png' => 'png');

// GD Function Suffix List
$gd_function_suffix = array(
'image/pjpeg' => 'JPEG',
'image/jpeg' => 'JPEG',
'image/gif' => 'GIF',
'image/bmp' => 'WBMP',
'image/x-png' => 'PNG');

// Fetch the photo array sent by preupload.php
$photos_uploaded = $_FILES['photo_filename'];
// Fetch the photo caption array
$photo_caption = $_POST['photo_caption'];
while( $counter <= count($_FILES['photo_filename']['tmp_name']) ) 

    {
            if($photos_uploaded['size'][$counter] > 0)
            {
                    if(!array_key_exists($photos_uploaded['type'][$counter], $known_photo_types))
                    {
                            $result_final .= "File ".($counter+1)." is not a photo!<br />";
                    }else{

                       mysql_query( "INSERT INTO database(`filename`, `caption`, `category`, `id`) VALUES('0', '".addslashes($caption[$counter])."', '".addslashes($_POST['category'])."', '".addslashes($_POST['id'])."')" );
                            $new_id = mysql_insert_id();
                            $filetype = $photos_uploaded['type'][$counter];
                            $extention = $known_photo_types[$filetype];
                            $filename = $new_id.".".$extention;

                            @mysql_query( "UPDATE database SET photo_filename='".addslashes($filename)."' WHERE photo_id='".addslashes($new_id)."'" );

// Store the orignal file
copy($photos_uploaded['tmp_name'][$counter], $images_dir2."/".$filename);

// Let's get the original image size                                
$size = GetImageSize( $images_dir2."/".$filename );

// .................................................................................
// Lets resize the image if its width is greater than 500 pixels
// Resized image settings
if ($size[0] > '1'){
        $Config_width_wide = 800; // width of wide image
        $Config_height_wide = 800; // height of wide image

        $Config_width_tall = 800; // width of tall image
        $Config_height_tall = 800; // height of tall image

// The Code
        if($size[0] > $size[1]){
            $image_width = $Config_width_wide;
            $image_height = (int)($Config_width_wide * $size[1] / $size[0]);

            if($image_height > $Config_height_wide){
                $image_height = $Config_height_wide;
                $image_width = (int)($Config_height_wide * $size[0] / $size[1]);
            }
        }else{
            $image_width = (int)($Config_height_tall * $size[0] / $size[1]);
            $image_height = $Config_height_tall;

            if($image_width > $Config_width_tall){
                $image_width = $Config_width_tall;
                $image_height = (int)($Config_width_tall * $size[1] / $size[0]);
            }
        }

// Build image with GD 2.x.x, you can use the other described methods too
$function_suffix = $gd_function_suffix[$filetype];
$function_to_read = "ImageCreateFrom".$function_suffix;
$function_to_write = "Image".$function_suffix;

// Read the source file
$source_handle = $function_to_read ( $images_dir2."/".$filename );

if($source_handle){
// Let's create a blank image for the image
$destination_handle = ImageCreateTrueColor ( $image_width, $image_height );

// Now we resize it
ImageCopyResampled( $destination_handle, $source_handle, 0, 0, 0, 0, $image_width, $image_height, $size[0], $size[1] );
}

// Store the orignal file
copy($photos_uploaded['tmp_name'][$counter], $images_dir2."/".$filename);

// Let's save the image
if ($extension == 'png') {
$function_to_write( $destination_handle, $images_dir2."/".$filename, 9 );
} else {
$function_to_write( $destination_handle, $images_dir2."/".$filename, 90 ); 
}
ImageDestroy($destination_handle );

                    }

                }
            }
        $counter++;
    }   
} else exit('<p>Error: ' .
    mysql_error() . '</p>'); 
```

那是我的代码，当我上传 jpeg 或 gif 文件时一切正常，但是当我上传 png 文件时，它不起作用。我也没有得到任何错误。请问，可能是什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:34:11.820

只需将其更改为：

```
image/png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:34:55.627

png 是官方认可的 mime 类型，它应该只是`image/png`. `x-`前缀用于实验/非官方类型。你可以简单地验证你得到了什么`var_dump($_FILES)`。

您的上传处理代码也需要更新。您不检查是否成功上传，而只是假设它们成功。永远不要假设成功。

```
if($_FILES['photo_filename']['error'] !== UPLOAD_ERR_OK) {
  die("Upload failed with error code " . $_FILES['photo_filename']['error']);
} 
```

`addslashes()`是完全没用的垃圾。它无法保护您免受 sql 注入攻击**。**如果您坚持继续使用已弃用的 mysql_*() 函数，那么至少使用正确的`mysql_real_escape_string()`.

# javascript - 如何隐藏值小于 1.6 的类

> ID：16217536
> 
> 赞同：-2
> 
> 时间：2013-04-25T14:31:15.417
> 
> 标签：javascript, jquery

我有这段代码，它隐藏了所有值为 1.6 的行。

```
$('.ind').filter(function() {
 return $(this).text().indexOf("1.6") !== -1;
}).parent().hide(); 
```

我对隐藏小于 1.6 的值的代码感兴趣。

请看这个 [链接](http://jsfiddle.net/sithelo/LWBYY/4/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:33:03.603

```
$('.ind').filter(function() {
var Value = parseFloat($(this).text()); 
return (value < 1.6);
}).parent().hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:34:44.133

您需要解析该值以将其作为数字进行比较：

```
$('.ind').filter(function() {
  return parseFloat($(this).text()) < 1.6;
}).parent().hide(); 
```

问题中的代码在字符串中查找值 1.6，这使我认为单元格中可能有其他文本而不是数字。如果是这样，您需要在解析之前将其删除：

```
$('.ind').filter(function() {
  return parseFloat($(this).text().replace(/[^\d\.]+/g, '')) < 1.6;
}).parent().hide(); 
```

* * *

要检查范围，请将解析后的值放入变量中，然后将其与下限和上限进行比较并返回结果：

```
$('.ind').filter(function() {
  var value = parseFloat($(this).text());
  return value >= 1.6 && value < 1.7;
}).parent().hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:34:39.103

```
$('.ind').filter(function() {
    var floatValue = parseFloat($(this).text());
    return (floatValue < 1.6);
}).parent().hide(); 
```

# excel - 在VBA中通过变量传递给子

> ID：16217537
> 
> 赞同：1
> 
> 时间：2013-04-25T14:31:20.527
> 
> 标签：excel, vba, variables, parameter-passing

这可能是非常基本的，但是我尝试了很多东西并且总是给出错误。

基本上我想要做的是每次在 Excel 中更改单元格时运行一个过程。所以我使用 Sub Worksheet_Change(ByVal Target As Range)。一切正常，但在这个过程中，我多次调用另一个子过程。

我想在此过程中重用“目标”值，但由于某种原因，我找不到如何去做。我尝试将“Public rTarget As Range”放置在程序开始时并执行“rTarget = Target”。但是当我调用 sub 过程时 rTarget 保持为空。

我该如何进行这项工作？我现在将 Target 作为变量之一添加到子例程中，但这看起来很愚蠢。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:46:57.147

```
Private Sub Worksheet_Change(ByVal Target As Range)
    MySub Target
End Sub

Sub MySub(ByVal Target As Range)
    ' Your sub code goes here and can work with the Target Range from the Worksheet_Change Event
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:10:52.627

将 Target 作为变量传递是你应该做的。您希望将变量保持在最紧凑的范围内，并将它们作为参数传递是最严格的。

如果您将变量传递给同一个模块中的一堆不同的过程，那么拥有一个模块级变量可能是有意义的。看起来像这样

```
Private mrTarget As Range

Private Sub Worksheet_Change(ByVal Target As Range)

    Set mrTarget = Target
    MySub

End Sub

Private Sub MySub()

    Debug.Print mrTarget.Address

End Sub 
```

根据您的问题，它只是一个被重复调用的子。在这种情况下，我会坚持将其作为参数传递。

# html - div 不使用 margin: auto 在 IE9 中居中

> ID：16217546
> 
> 赞同：6
> 
> 时间：2013-04-25T14:31:38.337
> 
> 标签：html, css, internet-explorer, internet-explorer-9

我试图在侧边栏留空的空间中居中。这就是我希望它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/0kuRS.png)

`margin: auto`实际上，对于大多数使用有问题的浏览器，我设法使这项工作正常`div`，同时设置`overflow: hidden`：

[在这里提琴](http://jsfiddle.net/pferreir/bc6q5/)

**CSS**

```
#header {
    height: 50px;
    background: #224444;
    color: #fff;
}

#container div {
    padding: 1em;
}

#content {
    max-width: 400px;
    margin: auto;
    background: #ddd;
    height: 300px;
    overflow: hidden;
}

#sidebar {
    float: right;
    width: 200px;
    background: #aaa;
    height: 300px;
} 
```

**HTML**

```
<div id="container">
    <div id="header">
        PAGE HEADER
    </div>
    <div id="sidebar">
        Sidebar
    </div>
    <div id="content">
       Centered Content
        (Works everywhere but on IE9)
    </div>
</div> 
```

但是，它不适用于 IE9。这很奇怪，因为 IE8 可以正常工作！

我的想法不多了，所以我想也许有人知道发生了什么？这个技巧似乎在其他任何地方都可以完美运行。

**注意**：请注意，内容`div`应该是灵活的，因为它在演示中。随着可用空间的减少，它应该改变大小并挤进去。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T15:59:42.017

## 将居中与浮动隔离

这会影响 IE9/10。

如果浮动元素被移除，或者如果`width`被使用而不是`max-width`. 浮动内容的存在，加上使用`margin:auto`and`max-width`而不是`width`，似乎使 IE9+ 感到困惑。

为了解决这个问题，将居中的内容放在一个包装器 div 中，这样可以将内容的居中与侧边栏的浮动分开。换句话说，在单个 div 中布局方面发生了太多事情，超出了 IE9+ 的处理能力。因此，将`#content`div 拆分为两个单独的 div。

```
#header {
    height: 50px;
    padding: 1em;
    background: #224444;
    color: #fff;
}

#content-wrapper {
    overflow: hidden;
}
#content {
    max-width: 400px;
    margin: auto;
    padding: 1em;
    background: #ddd;
    height: 300px;
}

#sidebar {
    float: right;
    width: 200px;
    padding: 1em;
    background: #aaa;
    height: 300px;
}
```

```
<div id="container">
    <div id="header">
        PAGE HEADER
    </div>
    <div id="sidebar">
        Sidebar
    </div>
    <div id="content-wrapper">
        <div id="content">
            Centered Content
        </div>
    </div>
</div>
```

这在 IE7/8/9/10 中测试良好。附带说明一下，因为添加了包装器 div，所以`padding: 1em;`现在必须单独添加到每个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-03T05:16:21.580

IE 因没有适当的文档类型而无法工作而臭名昭著。

尝试添加 HTML5 之一

```
<!DOCTYPE html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:35:47.873

花车是一项棘手的业务。严格来说，它们只应该影响在它们周围流动的内联内容，所以边距就像浮动不存在一样。

试试这个：

```
#container {text-align:center}
#content {display:inline-block;text-align:left} 
```

这应该使内容框像一个内联元素一样，因此显示在空间的中心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:40:15.373

据我所知，我总是遇到问题，`margin:0 auto`因为我没有指定`width`属性。所以每次你想使用`margin:auto`你应该写这个：

```
#content {
    max-width: 400px;
    margin: auto;
    background: #ddd;
    height: 300px;
    overflow: hidden;
    width:500px;
} 
```

或百分比：

```
#content {
    max-width: 400px;
    margin: auto;
    background: #ddd;
    height: 300px;
    overflow: hidden;
    width:30%;
} 
```

**编辑** 如果您想创建灵活的布局，请查看[引导程序](http://twitter.github.io/bootstrap/)和流体网格。

# css - 无法更改 wordpress 中的页脚颜色

> ID：16217558
> 
> 赞同：1
> 
> 时间：2013-04-25T14:32:01.060
> 
> 标签：css, wordpress, footer

我花了几个小时试图弄清楚出了什么问题，但我似乎无法弄清楚为什么我无法更改 wordpress 页脚中文本的颜色。

这是footer.php的代码：

```
<div id="footer">

<div class="fcred">
Copyright &copy; <?php echo date('Y');?> <a href="<?php
bloginfo('siteurl'); ?>" title="<?php bloginfo('name'); ?>"><?php
bloginfo('name'); ?></a> - <?php bloginfo('description'); ?><br />
<?php fflink();?> | <a href="info@XXX.com" title="Contact Developer">Developed by XXX</a> Design by <a href="http://www.XXX.com" title="WordPress Themes">XXX Themes</a>.
</div>  
<div class='clear'></div>   

<?php wp_footer(); ?>

</div>

</body>
</html> 
```

下面是相关的 CSS 行 - 我尝试将所有内容都更改为白色，但实际站点中没有任何变化：

```
#footer {
    padding:5px 0 5px 0px;
    color:#FFF;
    font-size:11px;
    background:#000 ;
    z-index: 200;
    bottom: 0px;
    left: 0px !important;
    position: fixed;
    width:100%;
    clear:both;
    }

#footer a:link , #footer a:visited{
    color:#FFF;
    }

#footer a:hover {
    color:#FFF;
    }

.fcred {
    width:700px;
    text-align:left;
    margin:0px 0px 0px 30px;
    line-height:16px;   
} 
```

我所做的任何事情似乎都不会对实际站点进行任何更改。我相当确定代码没问题，而且它似乎被某种方式覆盖了，但我不知道去哪里看。一般来说，我对 Wordpress 还是很陌生，所以我会很感激任何意见。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:57:53.300

浏览器处理页面元素后，您使用什么来检查页面元素？

在 chrome 中，右键单击有问题的元素并选择“检查元素”。

如果是 FireFox，请下载 FireBug 插件，因为它比默认的 FF 检查工具更好。

这两个附加组件都会准确地告诉您，无论是内联还是从样式表中，样式的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:36:33.187

为您提供几个故障排除思路：

*   尝试在#footer 上的背景样式后使用 !important 以查看它是否覆盖
*   将背景样式分配给 .fcred
*   从 #footer 中删除 clearboth

希望这可以帮助

# python - Numpy 数组子集 - 意外行为

> ID：16217565
> 
> 赞同：0
> 
> 时间：2013-04-25T14:32:13.947
> 
> 标签：python, multidimensional-array, numpy

我正在尝试复制一个 numpy 数组的子集（进行图像背景减法 - 但这是通过）。我不明白以下有什么问题 - 我已经交互式地演示了它，因为你真的不想涉足我所有的代码......

```
>>> from numpy import zeros
>>> a = zeros((5,5,3), 'uint8')
>>> print a.shape
(5, 5, 3)
>>> b = a[1:2][1:2][:].copy()
>>> print b.shape
(0, 5, 3)
>>> print a[1:2][1:2][:].shape
(0, 5, 3)
>>> print a.shape
(5, 5, 3)
>>> 
```

我想要的是 b.shape 返回 (2,2,3) -并在我需要对其进行的后续操作中以这种方式行事。我确定我做了一些非常明显的错误，但我不知道是什么。任何建议都感激不尽！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:41:35.157

我相信你的意思是`a[1:3, 1:3, :]`而不是`a[1:2][1:2][:]`.

此外，`a[1:3, 1:3, ...]`也可以工作（`...`意思是“尽可能多`:`”）。NumPy 似乎也允许`a[1:3, 1:3]`.

解释分为两部分：

1.  Python中的切片是左包右排的

2.  逗号索引在这里是必要的，`a[1:3]`给你一个形状`(2,5,3)`，另一个`[1:3]`将再次切穿第一个维度。

    对于简单的索引`a[1][2][3]`是一样的，`a[1,2,3]`因为每个连续的索引删除一个维度。但是，这不适用于切片 - 您需要使用逗号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:45:45.107

你正在做的事情有两个不同的问题。第一个是您如何在 numpy.xml 中处理索引。Numpy 矩阵有自己的语法，比您使用的列表语法列表更清晰......使用逗号而不是括号中的单独索引：

```
>>> from numpy import zeros
>>> a = zeros((5,5,3), 'uint8')
>>> print a[1:2,1:2,:].shape
(1, 1, 3) 
```

相反，您正在做的是失败，因为 a[1:2] 仍然返回列表列表，因此您的下一个索引是外部列表（只有一个元素）上的索引，而不是您想要的内部列表：

```
>>> a[1:2]
array([[[0, 0, 0],
        [0, 0, 0],
        [0, 0, 0],
        [0, 0, 0],
        [0, 0, 0]]], dtype=uint8)
>>> a[1:2][1:2]
array([], shape=(0, 5, 3), dtype=uint8) 
```

（如果您使用简单索引而不是切片，则不会出现此问题，但您仍应使用逗号语法，因为它更清晰。

其次，您使用错误的切片。切片的第一个值是您想要的数组的第一个值的索引 - 并且索引从 0 开始。第二个值比您想要的数组的索引多一个。这样才能`a[first_index:second_index]`返回`second_index-first_index`积分。所以，你想要这样的东西：

```
>>> b = a[0:2,0:2,:]
>>> b
array([[[0, 0, 0],
        [0, 0, 0]],

       [[0, 0, 0],
        [0, 0, 0]]], dtype=uint8) 
```

您的索引`[1:2]`将只返回一个元素......列表中的第二个元素。

另外，作为旁注，`.copy()`这里是多余的，因为从 numpy 数组中获取切片已经创建了一个新对象。

# jquery - eventDragStop 不显示新时间 - FullCalendar

> ID：16217566
> 
> 赞同：2
> 
> 时间：2013-04-25T14:32:14.807
> 
> 标签：jquery, fullcalendar

我有一个日历日视图，用户可以通过拖动项目来添加事件（如此处显示的演示：http: [//arshaw.com/js/fullcalendar-1.6.1/demos/external-dragging.html](http://arshaw.com/js/fullcalendar-1.6.1/demos/external-dragging.html)） .

当用户将事件拖到日历上时，会正确触发所有相关回调，并且日历会刷新并按预期工作。如果用户希望调整事件的大小，那也可以正常工作。

我留下的一种情况是，如果用户将整个事件拖到日历中的其他位置。我希望它在这个阶段触发回调并更新我的数据库。但是，当我在回调中 console.log 或提醒事件数据时`eventDragStop`，它会显示事件的旧日期/时间，而不是用户拖拽它的新日期/时间。日历在视图中正确显示事件 - 但是当我刷新它时，似乎没有任何变化，因为此回调没有发送更新的日期/时间。

有任何想法吗？我难住了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:50:44.233

您应该在回调`eventDrop`中而不是在 eventDragStop中有更新等

# c# - 如何通过变量引用对象名？

> ID：16217568
> 
> 赞同：0
> 
> 时间：2013-04-25T14:32:16.357
> 
> 标签：c#

我有一些代码将打开一个 sqllite 数据库，获取一些街道名称，并填充一个列表框，然后将其附加到一个组合框，以便它可以在用户键入名称时建议名称。我想制作一个可以调用的程序来执行此操作，因为它将用于可能不同的组合框。我可以将控件的名称传递给它，但是如何在将控件称为变量的同时修改控件的属性？

就像是：

```
string A = "cbSTreets"
[A].text = "Sets the Text for the combo box." 
```

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:38:14.923

You could try something like this:

```
private void SetText(List<string> streets, ComboBox cb)
{
    cb.DataSource = streets;
} 
```

Of course, you'll need to fill the streets from your database and pass in the ComboBox control you want to populate. You can use another collection if you like, but ComboBox datasources need to implement the `IList` interface.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:37:26.233

与其将其作为控件的名称传递，不如直接传递控件本身（尤其是当它们都是组合框且类型相同时？）

或者，如果由于某种原因您无法传递控件本身，如果您需要使用字符串名称，则可以使用字典之类的数据结构进行设置：

```
Dictionary<string, ComboBox> comboBoxes = new Dictionary<string, ComboBox>();

//Use the string you want to refer to the combobox and the combobox item itself
comboBoxes.Add("bcbsTreets", comboBox1); 

//Use the name as defined in the previous step to get the reference to the combobox and
//set the text
comboBoxes["bcbsTreets"].Text = "whatever"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:38:49.460

This is only possible via reflection and should be avoided!

You should do this the normal way.

For the solution how to do it with reflection, look here: [How to access class member by string in C#?](https://stackoverflow.com/questions/8953605/how-to-access-class-member-by-string-in-c)

# loops - Paypal DoCapture 批处理循环

> ID：16217570
> 
> 赞同：1
> 
> 时间：2013-04-25T14:32:28.330
> 
> 标签：loops, paypal

我正在尝试为 paypal 的 doCapture API 实现批处理。我有下面的代码，它只处理数据库的第一条记录......帮助！xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

```
<?php
include("xxxxx.php");<---- this is just the database connection

$query2="SELECT *
    FROM x where payment_status = 'Pending'";
//  WHERE custom IN (
    // SELECT custom
    //  FROM x
    //   GROUP BY custom
     //  HAVING count(custom) > 1
     // ) 
    //ORDER BY custom";
$results=mysql_query($query2);
$row2 = mysql_fetch_array($results); 
$row_count=mysql_num_rows($results);
echo $row_count;
//$auth=$row2['auth_id'];
//while($row2 =mysql_fetch_array($results)){

$arrSize=sizeof($row_count);

for ($number = 0; $number < $arrSize; $number++) {

//for($i=0; $i<$row_count; $i++){
echo $row2['auth_id']; // prints hello

//echo $row2['auth_id'];
/** DoCapture NVP example; last modified 08MAY23.
 *
 *  Capture a payment. 
*/

$environment = 'sandbox';   // or 'beta-sandbox' or 'live'

/**
 * Send HTTP POST Request
 *
 * @param   string  The API method name
 * @param   string  The POST Message fields in &name=value pair format
 * @return  array   Parsed HTTP Response body
 */
function PPHttpPost($methodName_, $nvpStr_) {
//for($i=0; $i<$row_count; $i++){
    global $environment;

    // Set up your API credentials, PayPal end point, and API version.
    $API_UserName = urlencode('');
    $API_Password = urlencode('');
    $API_Signature = urlencode('.');
    $API_Endpoint = "https://api-3t.sandbox.paypal.com/nvp";
    if("sandbox" === $environment || "beta-sandbox" === $environment) {
        $API_Endpoint = "https://api-3t.$environment.paypal.com/nvp";
    }
    $version = urlencode('51.0');

    // Set the curl parameters.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $API_Endpoint);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);

    // Turn off the server and peer verification (TrustManager Concept).
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);

    // Set the API operation, version, and API signature in the request.
    $nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

    // Set the request as a POST FIELD for curl.
    curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

    // Get response from the server.
    $httpResponse = curl_exec($ch);

    if(!$httpResponse) {
        exit("$methodName_ failed: ".curl_error($ch).'('.curl_errno($ch).')');
    }

    // Extract the response details.
    $httpResponseAr = explode("&", $httpResponse);

    $httpParsedResponseAr = array();
    foreach ($httpResponseAr as $i => $value) {
        $tmpAr = explode("=", $value);
        if(sizeof($tmpAr) > 1) {
            $httpParsedResponseAr[$tmpAr[0]] = $tmpAr[1];
        }
    }

    if((0 == sizeof($httpParsedResponseAr)) || !array_key_exists('ACK', $httpParsedResponseAr)) {
        exit("Invalid HTTP Response for POST request($nvpreq) to $API_Endpoint.");
    }

    return $httpParsedResponseAr;
}

// Set request-specific fields.
$authorizationID = urlencode($row2['auth_id']);

$amount = urlencode('1.99');
$currency = urlencode('USD');                           // or other currency ('GBP', 'EUR', 'JPY', 'CAD', 'AUD')
$completeCodeType = urlencode('Complete');              // or 'NotComplete'
$invoiceID = urlencode('example_invoice_id');
$note = urlencode('example_note');

// Add request-specific fields to the request string.
$nvpStr="&AUTHORIZATIONID=$authorizationID&AMT=$amount&COMPLETETYPE=$completeCodeType&CURRENCYCODE=$currency&NOTE=$note";

// Execute the API operation; see the PPHttpPost function above.
$httpParsedResponseAr = PPHttpPost('DoCapture', $nvpStr);

if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {
    exit('Capture Completed Successfully: '.print_r($httpParsedResponseAr, true));
} else  {
    exit('DoCapture failed: ' . print_r($httpParsedResponseAr, true));
//}
}}
//}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T18:07:16.123

您只从数据库中取出一行，因为您的`$row2 = mysql_fetch_array($results);`行在`for`循环之外。从本质上讲，您是在一次又一次地尝试获取相同的付款，我敢打赌只有第一个成功。将 fetch 语句移动到`for`循环内部。

# java - Java nio 部分读取

> ID：16217579
> 
> 赞同：0
> 
> 时间：2013-04-25T14:32:43.860
> 
> 标签：java, client-server, nio, partial, bytebuffer

我的目标是从客户端向服务器发送不同类型的消息，它将是基于文本的。我不确定的是如何在这里删除部分读取。我必须确保我得到一个完整的信息，仅此而已。

有没有人有这方面的经验？

这是我到目前为止所拥有的：

```
 private void handleNewClientMessage(SelectionKey key) throws IOException {
    SocketChannel sendingChannel = (SocketChannel) key.channel();

    ByteBuffer receivingBuffer = ByteBuffer.allocate(2048);
    int bytesRead = sendingChannel.read(receivingBuffer);
    if (bytesRead > 0) {
        receivingBuffer.flip();

        byte[] array = new byte[receivingBuffer.limit()];
        receivingBuffer.get(array);
        String message = new String(array);

        System.out.println("Server received "  +message);           
    }
    selector.wakeup();
} 
```

但是我没有办法“结束”这条信息，并且一定会收到一条完整的信息。

最好的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:36:56.357

除非您一次只读取一个字节，否则您永远无法确定您不会阅读超过一条消息。（我不建议这样做）。

相反，我会尽可能多地读入 ByteBuffer，然后解析它以找到消息的结尾，例如文本的换行符。

当您找到行尾时，将其提取并将其转换为字符串并进行处理。重复直到你有部分消息（或什么都没有）

如果你发现你只有消息的一部分，当你有时你 compact() (如果 position() > 0) 并尝试 read() 更多。

这将允许您一次阅读尽可能多的消息，但也可以处理不完整的消息。

注意：您需要保留 ByteBuffer 以进行连接，以便知道您之前阅读过哪些部分消息。

注意：如果您的消息大于缓冲区大小，这将不起作用。我建议使用 1+ MB 的回收直接 ByteBuffer。使用直接 ByteBuffers，只有使用的 ByteBuffer 页面被分配给实际内存。

如果您担心性能，我会在可能的情况下重新使用您`byte[]`的。如果您需要的空间比已有的更多，您只需要重新分配它。

顺便说一句，您可能会发现使用带有普通 IO 的 BufferedReader 使用起来要简单得多，但性能仍然足够好。

# wpf - 阻止用户在 WPF DataGrid 中选择/取消选择行

> ID：16217582
> 
> 赞同：2
> 
> 时间：2013-04-25T14:32:50.520
> 
> 标签：wpf, datagrid, selection

我`DataGrid`在 WPF 页面上有一个并希望阻止用户选择单元格。由于此功能仅用于测试，因此我不想更改代码中的所有内容。

填写完之后`DataGrid`，我确保选择了它的所有行。现在我想确保用户不能选择/取消选择行。

我尝试设置`IsEnabled = false`，`IsHitTestVisible = "False"`但是这两种解决方案都禁用了滚动条。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T16:18:36.900

为什么不只`IsHitTestVisible="False"`为您`DataGridRow`或`DataGridCell`对象设置？

使用 中的隐式样式很容易做到这一点`<DataGrid.Resources>`，并且应该只禁用对行或单元格的命中测试，这应该留下`DataGrid`功能的其他区域，例如 Headers 或 ScrollBars

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="IsHitTestVisible" Value="False" />
    </Style>
</DataGrid.Resources> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-14T09:36:58.317

你有两个选择：

1.  您禁用样式选择（在这种情况下，您仅关闭样式中的颜色，但实际上 SelectedItem 或 SelectedItems 会改变）。您可以轻松了解如何关闭选择样式。

2.  您可以在不更改 SelectedItem 或 SelectedItems 的情况下禁用更改选择（在这种情况下，您的选择样式也不会改变）。

在 WPF 中，我不喜欢覆盖标准控件。所以，我们需要一个`Behavior`：

```
public class DisableSelectionDataGridBehavior : Behavior<DataGrid>
{
    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.PreviewMouseLeftButtonDown += AssociatedObjectOnPreviewMouseLeftButtonDown;
    }

    private void AssociatedObjectOnPreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        var dependencyObject = AssociatedObject.InputHitTest(e.GetPosition(AssociatedObject)) as DependencyObject;
        if (dependencyObject == null) return;

        var elements = dependencyObject.GetParents().OfType<FrameworkElement>().Where(DataGridCellExtended.GetIsDisableSelection).ToList();
        if (!elements.Any()) return;

        e.Handled = true;

        var args = new MouseButtonEventArgs(e.MouseDevice, e.Timestamp, e.ChangedButton, e.StylusDevice);
        args.RoutedEvent = UIElement.MouseLeftButtonDownEvent;
        args.Source = e.Source;

        elements.ForEach(item =>
        {
            item.RaiseEvent(args);
            var children = item.GetChildren<FrameworkElement>();
            children.ForEach(child => child.RaiseEvent(args));
        });
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.PreviewMouseLeftButtonDown -= AssociatedObjectOnPreviewMouseLeftButtonDown;
    }
} 
```

其次，你需要一个`Extended`类：

```
public class DataGridCellExtended
{
    public static readonly DependencyProperty IsDisableSelectionProperty = DependencyProperty.RegisterAttached("IsDisableSelection", typeof(Boolean), typeof(DataGridCellExtended));

    public static Boolean GetIsDisableSelection(DependencyObject o)
    {
        return (Boolean)o.GetValue(IsDisableSelectionProperty);
    }

    public static void SetIsDisableSelection(DependencyObject o, Boolean value)
    {
        o.SetValue(IsDisableSelectionProperty, value);
    }
} 
```

最后在 XAML 中你需要这样的东西：

```
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate DataType="{x:Type items:YourViewModel}">
        <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
            <Button Margin="0"
                    extends:DataGridCellExtended.IsDisableSelection="True">

                <Path Data="M5,0L3,2 1,0 0,1 2,3 0,5 1,6 3,4 5,6 6,5 4,3 6,1z"
                      Fill="{Binding Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType=DataGridCell}}"
                      Width="12"
                      Height="12"
                      Stretch="Uniform"/>
            </Button>
        </StackPanel>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

您可以为扩展类编写逻辑。

```
public static IEnumerable<DependencyObject> GetParents(this DependencyObject element)
{
    if (element != null)
    {
        while (true)
        {
            var parent = element.GetParent();
            var dependencyObject = parent;
            element = parent;
            if (dependencyObject == null)
            {
                break;
            }
            yield return element;
        }
        yield break;
    }
    else
    {
        throw new ArgumentNullException("element");
    }
}

private static IEnumerable<DependencyObject> GetChildrenRecursive(this DependencyObject element)
{
    if (element != null)
    {
        for (var i = 0; i < VisualTreeHelper.GetChildrenCount(element); i++)
        {
            var dependencyObject = VisualTreeHelper.GetChild(element, i);
            yield return dependencyObject;
            foreach (var childrenRecursive in dependencyObject.GetChildrenRecursive())
            {
                yield return childrenRecursive;
            }
        }
    }
    else
    {
        throw new ArgumentNullException("element");
    }
} 
```

# c# - 从 TCP/Port 读取时使用正确的编码

> ID：16217583
> 
> 赞同：0
> 
> 时间：2013-04-25T14:32:52.480
> 
> 标签：c#, .net, tcp, ascii, utf-7

我正在`byte[]`从 TCP/端口读取字节流 ()，并将接收到的数组的一部分转换为`char[]`

假设我不熟悉端口的特性，也不熟悉该端口另一侧的环境。我只知道有一个端口。

我收到的部分数据是经过编码的英镑货币符号 (£)。当我使用 ASCII 编码进行转换时，这些符号作为`?`

```
var charArray = Encoding.ASCII.GetChars(byteArray); 
```

但是，当我使用 UTF-7 时，一切正常：

```
var charArray = Encoding.UTF7.GetChars(byteArray); 
```

我应该补充一点，在尝试 UTF-8 时，这是行不通的。

这是通过反复试验，我不完全确定为什么这可能有效。与其只是继续部署解决方案，我想我会尝试更多地了解为什么这可能会奏效。

仅仅是端口另一端的系统正在以 UTF-7 传输，还是发生了其他事情？

# javascript - 不安全的 JavaScript 尝试使用 vimeo 访问帧错误

> ID：16217586
> 
> 赞同：0
> 
> 时间：2013-04-25T14:32:57.783
> 
> 标签：javascript, jquery, protocols, vimeo

上次我检查时网站还在工作，但现在看来很多 JS 方面都坏了。推文消失了，jQuery 颜色框不再起作用？

[http://www.jamesperrett.co.uk/](http://www.jamesperrett.co.uk/)

得到以下控制台错误：

```
Uncaught SyntaxError: Unexpected token ( www.jamesperrett.co.uk:178
Uncaught TypeError: Object [object Object] has no method 'live' jquery.validationEngine.js:28

Unsafe JavaScript attempt to access frame with URL [site] from frame with URL [vimeo]. 
Domains, protocols and ports must match. 
```

最后一个重复每个视频。

担心这是否与 Vimeo 有关，可能是安全内容？该网站不是`https`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:56:09.397

对于实时错误，您正在使用最新版本（1.9.1）引用 jquery

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

这个版本的 jquery 不再支持`live()`，取而代之的是`.on()`使用委托。所以插件`jquery.validationEngine.js`不再正常工作。

解决方案可能是更新到新版本的验证插件（如果可用）或修改此插件的源代码或降级到仍支持 live 的旧 jquery 版本。

# php - 用户使用 AJAX 和 jQuery 登录时如何更新 php 页面？

> ID：16217587
> 
> 赞同：0
> 
> 时间：2013-04-25T14:32:58.533
> 
> 标签：php, javascript, jquery, html, ajax

我想在用户登录时运行波纹管 php 页面。我正在使用波纹管 php 代码来显示带有他们的名字的在线访问，并且我还链接了他们的个人资料页面。

重新加载时，php页面正在运行`online.php`。

这是php的正常方式，我知道，但我想使用ajax来运行bellow php脚本。我知道如何使用 ajax 发送表单数据，但如果页面内没有任何表单，我不知道如何发送数据。

这怎么可能？我试过了，但它还没有工作。**注意**：我也在使用 JQuery。

**AJAX 代码**

```
//update the online users list
$.ajax({
    type: "POST",
    url: "online.php",
    data: data,
    success: function (response) {
        $("#online").html(response);
    }
}); //end it 
```

**PHP 代码**

```
<?php
    session_start();

    include('controller/class/RO_dbconfig.php');

    $sth = $dbconnect->prepare("SELECT first_name,keyId FROM register WHERE status = :online");
    $params = array("online" => 1);
    $sth->execute($params);
    $status = $sth->fetchAll();

    echo "<div id='online'>";

    foreach($status as $onlineArray) {
        echo "<ul class='online'>";
        echo "<li><a href='timeline.php?profileId=".$onlineArray['keyId']."'>".$onlineArray['first_name']."</a></li>";
        echo "</ul>";
    }

    echo "</div>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:47:31.793

如果我对您的理解正确，这应该可以帮助您检查是否有新用户上线，然后获取您的在线列表，无论是否包含已发布的表单数据。

```
<script type="text/javascript">
// example variable; you can set this to the ID of the last stored online session in your DB
// the variable will be referenced later to see if any new sessions have been added
var lastConnectionId = 446;

// this function will fetch your online list; if a form has been submitted you can pass the serialized POST data
// else you can pass a null variable
function getOnlineList(data) {
    var requestType = (data == null) ? "GET" : "POST";
    $.ajax({
        type: requestType,
        url: "online.php",
        data: data,
        success: function (responce) {
            $("#online").html(responce);
        }
    });
}

// this function will check to see if any new sessions have been added (i.e. new online users) by comparing to last
// session row ID in the database to the variable lastConnectionId; there must be a table in the database that stores
// sessions and gives them incremental IDs; check-sessions.php should output the latest session ID
function checkSessions() {
    $.ajax({
        type: "GET",
        url: "check-sessions.php",
        success: function (responce) {
            if (responce > lastConnectionId) {
                lastConnectionId = responce;
                getOnlineList(null);
            }
        }
    });
}

// runs checkSessions ever 3 seconds to check for a new user
setInterval("checkSessions", 3000);
</script> 
```

当然，在必要时添加所有其他代码和侦听器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:45:24.887

当用户 com 在线时，您无法使其更新。您必须在计时器的帮助下轮询 online.php。执行定期编写的代码，如下所述：[Server polling with JavaScript](https://stackoverflow.com/questions/3583203/server-polling-with-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:59:03.120

我将尝试改写您的问题，因为我不确定您的实际问题是什么。

当用户登录时，您要更新在线用户列表。您想为所有当前登录的用户即时更新此列表吗？因为这不是（很容易）使用 php 实现的。您可以编写一个轮询脚本，每隔几分钟检查一次。

我不确定这是否需要。我认为在每个页面加载时刷新此列表是完全可以的。如果您想将这些更改推送给用户，您需要研究长轮询。

任何状况之下：

**AJAX 代码**

```
setInterval(function(){
    $.ajax({
        type: "POST",
        url: "online.php",
        complete: function(jqXHR, textStatus){
            $("#online").html(jqXHR.responseText);
        }
    });
},300000); 
```

**PHP**

```
<?php 
session_start();
include('controller/class/RO_dbconfig.php');

$sth = $dbconnect->prepare("SELECT first_name,keyId FROM register WHERE status = :online");
$params = array("online" => 1);
$sth->execute($params);

$status = $sth->fetchAll();

echo "<ul  class='online'>";
foreach($status as $onlineArray){
    echo "<li><a href='timeline.php?profileId=" . $onlineArray['keyId'] . "'>" . $onlineArray['first_name'] . "</a></li>";
}
echo "</ul>";
?> 
```

这将每 5 分钟调用一次列表，并更新 div#online。我仍然认为这不是必要的步骤。如果您使用散列网址，我只会在 pageLoad 或 hashChange 上调用 ajax。

*脚注，这段代码没有经过测试，所以我可能在这里和那里写了一些错误。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:42:14.017

你应该使用`load()`：

```
$("#online").load("online.php"); 
```

或者您可以使用 get （在您的情况下比 post 更好）：

```
$.ajax({
            type: "GET",
            url: "online.php",
            data: {},

            success: function (responce) {

                $("#online").html(responce);

            }

        }); 
```

# javascript - IE8，Math.round() 失败？

> ID：16217588
> 
> 赞同：0
> 
> 时间：2013-04-25T14:33:00.717
> 
> 标签：javascript, variables, internet-explorer-8, declaration

我确实发现了这个问题：[IE8 支持 Math.ceil() 和 Math.round() 吗？](https://stackoverflow.com/questions/5409872/is-math-ceil-math-round-supported-on-ie8)

所以我不确定我的问题是什么......

**控制台错误**

> SCRIPT438：对象不支持此属性或方法 functions.js，第 103 行字符 13

**函数.js，第 103 行**

```
percentLoaded = Math.round((appNumber / totalApps) * 100); //calculte loaded percent 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:33:00.717

声明变量解决了这个问题。

```
var percentLoaded; 
```

显然 IE9、IE10、Chrome 和 Firefox 不在乎，bt IE7 和 IE8 要求我将声明添加几行。

# javascript - 画布碰撞？

> ID：16217591
> 
> 赞同：1
> 
> 时间：2013-04-25T14:33:08.023
> 
> 标签：javascript, html, html5-canvas, 2d-games

测试我的游戏，当用户和怪物发生碰撞时，我希望弹出警报但没有运气：

```
function die() {

  for (var i = 0; i < monster.length; i++) {
    if (user.destinationX === monster[i].destinationX && user.destinationY === monster[i].destinationY {
      alert("die");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:49:10.277

我将提供一个带有解释的合并答案。如果您喜欢这个解释，[请注明 karaxuna](https://stackoverflow.com/users/1265753/karaxuna)或[user2317489](https://stackoverflow.com/users/2317489/user2317489)。

正如 Kolink 所提到的，您的问题是 pacman 故障，或者更确切地说，您的怪物不仅仅是像素 - 它们有自己的大小。您当前正在检查一个对象的来源并查看它是否与另一个实体的完全相等 - 如果有的话，这种情况很少发生。相反，您需要检查的是怪物是否至少有一个共同点（换句话说，碰撞检查）。

这可以通过检查一个的原点是否在另一个的边界框内来轻松完成，或者换句话说，如果`monster2.x <= monster1.x <= (monster2.x+monster2.width)`和 `monster2.y <= monster1.y <= (monster2.y+monster2.height)`。Arnelle Balane 提供的没有解释的代码就是这样做的。

这并不总是一个好的近似值，因为这盲目地假设你的怪物是一个正方形。为了使它成为一个圆圈，您需要检查一个怪物的中心是否在另一个中心的一定距离内（其中距离是公制的，并使用 计算`sqrt(pow(x,2)+pow(y,2))`。不过，所有这些都是更精细的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:42:48.190

试试这种碰撞检测方法。它基于两个对象的重叠来检测两个对象之间的碰撞。

```
function hasCollision(object1, object2) {
  if (object1.x + object1.width < object2.x) return false;
  if (object1.x > object2.x + object2.width) return false;
  if (object1.y + object1.height < object2.y) return false;
  if (object1.y > object2.y + object2.height) return false;
  return true;
}

function die() {
  for (var i = 0; i < monster.length; i++) {
    if (hasCollision(user, monster)) {
      alert("die");
    }
  }
} 
```

此碰撞检测考虑对象的形状（正方形/矩形）并检查两个对象是否重叠。它还需要对象的宽度和高度来确定对象的边缘在哪里（或者您可以根据当前拥有的内容对其进行修改）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:36:54.773

不要使用严格的比较。因为帧率可能不同。您现在正在检测像素碰撞。你应该考虑每个物体的形状

# python - Python 支票账户模拟器

> ID：16217592
> 
> 赞同：0
> 
> 时间：2013-04-25T14:33:20.640
> 
> 标签：python, oop, python-3.x

我一直在用 python 3.0 开发一个模拟支票账户的 OOP 程序，但我遇到了一个我无法弄清楚的错误。这里是：在程序的主要部分，我为用户提供了多个选项，例如退出、取款、存款和创建新帐户。当用户选择“创建新帐户”时，程序会创建一个对象，并且变量名必须是另一个变量，并且我不确定如何从标有变量的对象访问属性。基本上我要问的是，怎么做我将变量名设为变量，以便计算机可以跟踪它并使用它来访问对象的属性？这是我到目前为止的程序（如果有帮助？）：

```
class Checking(object):
    """a personal checking acount"""

    def __init__(self , name, balance):
        print("a new checking acount has been created")
        self.name = name
        self.balance = balance

    def __str__(self):
        rep = "Balance Object\n"
        rep += "name of acount" + self.name + "\n"
        rep += "balance is " + self.balance + "\n"
        return rep

    def display(self):
        print("\nyour acount name is ",self.name)
        print("your balance is",self.balance)

    def deposit(self):
        amount = int(input("\nplease enter the amount of money you wish to diposit"))
        self.balance += amount
        print("\nthe balance of 'chris' is ", self.balance)

    def withdraw(self):
        amount = int(input("\nplease enter the amount you wish to withdraw "))
        while amount > self.balance:
            print("is an invalid amount")
            amount = int(input("\nplease enter the amount you wish to withdraw "))
        self.balance -= amount
        print("\nthe balance of 'chris' is ", self.balance)

    answer = None

    while answer != "0":
        answer = input("""what action would you like to take?
        0 exit
        1 deposit
        2 withdraw
        3 add an acount""")
        if answer == "1":
            input("ener your PIN").deposit()
        if answer == "2":
            input("enter your PIN ").withdraw()
        if answer == "3":
            input("enter num") = Checking(name = input("\nwhat do you want your acount name to be?"), balance = 0)
            input("enter you PIN").display()
            print(Checking)

    input("\n\npress enter to exit") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:37:40.027

使用字典; 将帐户存储在`accounts`字典中，以帐户编号为键：

```
accounts = {}

# ...
if answer == 3:
    account_number = input("enter num")
    account_name = input("\nwhat do you want your acount name to be?")
    accounts[account_number] = Checking(name=account_name, balance=0) 
```

现在您可以列出用户拥有的所有帐户，例如：

```
for account_number, account in accounts.items():
    print('Account number: {}, account name: {}'.format(account_number, account.name)) 
```

等等

将局部变量用于可变数量的完全相同的项目绝不是一个好主意。在这种情况下，请改用列表或字典。

# excel - excel：从图中删除数字，在公式中不设置数字

> ID：16217593
> 
> 赞同：0
> 
> 时间：2013-04-25T14:33:28.070
> 
> 标签：excel, formula

我有一个日志公式，它打印出低于 0 的值的错误。我可以在公式中设置这些 0，但实际上我不想插入数字，甚至不插入 0。如何设置没有数字的单元格/公式？

这是我目前的公式

```
=WENN(B2>0;LOG10(B2);) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:07:23.007

解决方案如下

```
=IF(B2>0;LOG10(B2);NV()) 
```

这是一个解释： http: [//office.microsoft.com/de-de/excel-help/nv-funktion-HA102752925.aspx](http://office.microsoft.com/de-de/excel-help/nv-funktion-HA102752925.aspx)，但是我不知道如何获得相应的英文网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:43:31.537

```
=if(B2>0, log10(B2),"") 
```

希望这就是你要找的

# python - 只有我的数据的第一个数字被放入数组中

> ID：16217607
> 
> 赞同：0
> 
> 时间：2013-04-25T14:34:06.787
> 
> 标签：python, arrays, file-io, text-files

```
import numpy as np
import asciidata

def leesdata():
    RA = []
    Dec = []
    data = asciidata.open('S0-2.txt')
    for i in data[1]:
        RA.append(float(i))
    for i in data[2]:
         Dec.append(float(i))
    return RA, Dec

RA, Dec = leesdata()
print RA, Dec 
```

当我运行它时，我得到了这个：

```
[-0.04] [0.15, 0.138, 0.124, 0.098, 0.088, 0.078, 0.05, 0.041, 0.02,
 0.01, -0.017, -0.004, 0.011, 0.072, 0.079, 0.085] 
```

所以只有我的第一个数据被放入数组 RA 中，但 Dec 工作正常。我究竟做错了什么？

这是我要打开的文件

[http://home.strw.leideuniv.nl/~snellen/PS/S2_pos.dat](http://home.strw.leidenuniv.nl/~snellen/PS/S2_pos.dat)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:42:49.507

通常我会为此使用 open 和 read 的组合。这是我在文件中读取的方式：

```
f = open('S0-2.txt', 'r+')
RA = []
DEC=[]
for line in f:
    if ( not(line.startswith('#')) ):
        RA.append( line.split()[1] )
        DEC.append( line.split()[2])

print RA

print DEC 
```

# pagination - 如何在服务器端分页和搜索表单中使用 Kendo UI 网格？

> ID：16217609
> 
> 赞同：0
> 
> 时间：2013-04-25T14:34:16.760
> 
> 标签：pagination, kendo-ui, kendo-grid

我有一个剑道 UI 网格。在提交搜索表单并且服务器返回响应之前，网格已构建但不会显示在页面上。响应可能导致大量行（取决于搜索参数），因此 serverPaging 设置为 true。

dataSource 对象中的传输属性已设置。

例如：

```
$('#resultsGrid').kendoGrid({
    dataSource: {
        pageSize    : 10,
        serverPaging: true,
        schema      : {
            total: 'total'
        },
        transport   : {
            read: {url: '../search.x'}
        }
    }
    /*... more options*/
}); 
```

但是，当页面加载时，会对服务器进行 AJAX 调用（到 ../search.x）。如何在提交搜索表单时进行 AJAX 调用并防止在页面加载时调用它？另外，当请求下一页/上一页结果时，如何使用搜索表单的原始 POST 参数传输读取调用服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:00:57.437

在 Grid 初始化时设置`autoBind`为。`false`文档[在这里](http://docs.kendoui.com/api/web/grid#configuration-autoBind)

* * *

> *autoBind 布尔值（默认值：true）*
> 
> 如果设置为 false，则小部件**在初始化期间不会绑定到数据源**。在这种情况下，数据绑定将在触发数据源的更改事件时发生。默认情况下，小部件将绑定到配置中指定的数据源。

# reporting-services - 将 Crystal Reports 公式转换为 SSRS 表达式

> ID：16217610
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:34:23.090
> 
> 标签：reporting-services

```
IF {Field_A} = 0 THEN 0 ELSE (({Field_B} / {Field_A})*100) 
```

我正在尝试将此公式转换为 SSRS 表达式。我尝试了许多不同的`=IFF`语句，但似乎无法让它正确运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:05:15.557

几乎是一个重复的问题：如果你在这里搜索，`#error ssrs iif`你会得到很多结果，例如[iif 函数是计算 SSRS 中的两条路径还是短路？](https://stackoverflow.com/questions/1204179/does-the-iif-function-compute-both-paths-in-ssrs-or-is-it-short-circuited)

重写你的陈述很简单：

```
=IIF(
   Fields!Field_A.Value = 0,
   0,
   Fields!Field_B.Value /
   IIF( Fields!Field_A.Value = 0, 1, Fields!Field_A.Value) * 100 ) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T23:10:14.720

如果您有多个公式要转换，则可以手动进行。但是，当您有很多复杂的公式要从 Crystal 转换为 SSRS 时，您需要一个转换工具来提供帮助。请尝试水晶迁移服务。像这样的公式可以完美地自动转换。免费样品转换也可供您评估。

[http://www.crystalmigrater.com/Default.aspx](http://www.crystalmigrater.com/Default.aspx)

# sql - 限制每个 ID 的行数

> ID：16217612
> 
> 赞同：2
> 
> 时间：2013-04-25T14:34:24.533
> 
> 标签：sql, sql-server, window-functions

我试图将每个案例的行数限制为 5 行。有些案例只有 1 或 2 行，但有些案例有 15 行或更多。

这是我用来计算每个案例的行数的存储过程的示例。

```
SELECT     ROW_NUMBER() OVER(partition by rce.reportruncaseid ORDER BY rce.Reportruncaseid) AS Row, rce.ReportRunCaseId AS CaseId, YEAR(rce.EcoDate) AS EcoYear
FROM         PhdRpt.ReportCaseList AS rcl INNER JOIN
                  PhdRpt.RptCaseEco AS rce ON rce.ReportId = rcl.ReportId AND rce.ReportRunCaseId = rcl.ReportRunCaseId
GROUP BY rce.ReportId, rce.ReportRunCaseId, YEAR(rce.EcoDate)
Order by rce.ReportRunCaseId, YEAR(rce.EcoDate) 
```

这是此存储过程生成的屏幕截图：[screenshot](http://oi33.tinypic.com/28k0w2w.jpg)

我曾尝试使用 where 子句，但它不允许我在 where 子句之后放置窗口函数。它也无法识别我的“Row”别名。

是否有另一种方法来计算每个案例的数量或行数（而不是窗口函数），以便我可以使用 where 子句？或者有没有办法使用我现有的存储过程将每个案例的记录限制为 5？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:35:59.747

您可以将您的声明包装在 a`CTE`因为`SQL Server`支持它。

```
WITH records
AS
(
    SELECT  ROW_NUMBER() OVER(PARTITION BY rce.reportruncaseid 
                              ORDER BY rce.Reportruncaseid) AS Row, 
            rce.ReportRunCaseId AS CaseId, 
            YEAR(rce.EcoDate) AS EcoYear
    FROM    PhdRpt.ReportCaseList AS rcl 
                INNER JOIN PhdRpt.RptCaseEco AS rce 
                    ON  rce.ReportId = rcl.ReportId 
                        AND rce.ReportRunCaseId = rcl.ReportRunCaseId
    GROUP   BY rce.ReportId, rce.ReportRunCaseId, YEAR(rce.EcoDate)
)
SELECT CaseId, EcoYear
FROM   records
WHERE  row <= 10
ORDER  BY CaseId, EcoYear 
```

# google-analytics - 我在哪里可以看到收集的目标数据？

> ID：16217615
> 
> 赞同：0
> 
> 时间：2013-04-25T14:34:29.647
> 
> 标签：google-analytics, google-tag-manager

我已经在控制台中设置并工作了 Google 跟踪代码管理器，并且`data.layer`事件触发正常。我也输入了我的 Analytics ID。

我在哪里可以看到从标签管理器收集的目标数据？

# java - 元字符处的 String.split() +

> ID：16217627
> 
> 赞同：34
> 
> 时间：2013-04-25T14:34:57.447
> 
> 标签：java, string, special-characters

我正在制作一个简单的程序，该程序将处理方程的字符串输入中的方程，但是，当我运行它时，由于尝试将“+”替换为“+”，所以我可以拆分字符串在空间。我应该如何使用

替换这些特殊字符的字符串replaceAll方法？下面是我的代码

*线程“主”java.util.regex.PatternSyntaxException 中的异常：索引 0 + ^ 附近的元字符“+”悬空*

```
 public static void parse(String x){
       String z = "x^2+2=2x-1";

       String[] lrside =  z.split("=",4);
       System.out.println("Left side: " + lrside[0] + " / Right Side: " + lrside[1]);
       String rightside = lrside[0];
       String leftside = lrside[1];

       rightside.replaceAll("-", " -");
       rightside.replaceAll("+", " +");
       leftside.replaceAll("-", " -"); leftside.replaceAll("+", " +");
       List<String> rightt = Arrays.asList(rightside.split(" "));
       List<String> leftt = Arrays.asList(leftside.split(" "));

       System.out.println(leftt);
       System.out.println(rightt); 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-25T14:36:08.983

[`replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)接受一个正则表达式作为它的第一个参数。

`+`是一个特殊字符，它表示一个量词，意思是*一个或多个出现*。因此它应该被转义以指定文字字符`+`：

```
rightside = rightside.replaceAll("\\+", " +"); 
```

（字符串是不可变的，因此有必要将变量分配给 的结果`replaceAll`）；

对此的替代方法是使用删除元字符状态的[字符类：](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)

```
rightside = rightside.replaceAll("[+]", " +"); 
```

最简单的解决方案是使用[`replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)使用非正则表达式`String`文字的方法：

```
rightside = rightside.replace("+", " +"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-26T06:48:56.777

我有类似的问题`regex = "?"`。它发生在所有在正则表达式中具有某些含义的特殊字符上。因此，您需要将其`"\\"`作为正则表达式的前缀。

```
rightside = rightside.replaceAll("\\+", " +"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:36:57.063

`String#replaceAll`期望`regex`作为输入，并且`+`不是正确的模式，`\\+`将是模式。`rightside.replaceAll("\\+", " +");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-03T16:30:04.740

这背后的原因是 - 正则表达式有保留字符。因此，当您使用 java split() 方法拆分它们时，您必须将它们与转义一起使用。例如，您想按 + 或 * 或 dot(.) 分割，那么您必须根据需要将其作为 split("\+") 或 split("\*") 或 split("\.") .

我对正则表达式的长期解释背后的原因是 -

> 你也可能在其他地方面临它。

例如，如果您使用 java 的 replace 或 replaceAll 方法，也会出现同样的问题，因为它们也基于正则表达式工作。

# java - 使用给定索引访问列的单元格？

> ID：16217628
> 
> 赞同：0
> 
> 时间：2013-04-25T14:35:01.520
> 
> 标签：java, javafx-2, tableview

我在 a`TableColumn`的 a中有一个单元格的索引（作为整数） `TableView`。使用单元格的索引，如何访问该索引处的单元格对象？我错过了类似的东西

```
tableColumn.getCells() 
```

这将允许我访问具有给定索引的单元格：

```
tableColumn.getCells().get(index) 
```

对此有任何提示吗？谢谢！

**更新：**

根据要求，一个用例：

想象一个音乐播放列表。出于某些原因，我为此使用 TableView，并且 TableView 尽可能大，这意味着即使播放列表中只有 5 首音乐曲目并且有 10 行的空间，那么 10 行（5 行，5 行）是显示。

然后我实现了拖放以重新排列项目。现在假设用户想要将第二个条目放在播放列表的末尾。他拖动第二个条目，但不是直接在最后使用的表格行上，而是在例如第 8 行。在这种情况下，我想给出一个视觉反馈，即音乐曲目放置在最后使用的行（第 5 行，但鼠标在第 8 行/单元格上！），所以我需要修改第 5 行/第 5 行，而鼠标在第 8 行上。知道哪一行是最后填充的行很容易 - 它是 tableview.getItems().size()- 1，但是获得对行/单元格 5 的引用是一件棘手的事情/我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:39:45.700

此 API 不存在是有原因的。

为了获得更好的性能，FX`TableView`自己操纵细胞。单元格的创建和销毁取决于 TableView 的当前可见部分和其他参数。甚至更多：在某些情况下，可以重用单元格对象来表示来自其他单元格的数据。

所以返回值`tableColumn.getCells().get(index)`是不确定的，因此没有 API 可以接收它。

所有与单元格相关的逻辑都应在`CellFactory`回调中实现。

你能描述一下你想通过访问单元来实现什么样的逻辑吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T04:22:39.580

我会设置一个固定的单元格大小，然后使用鼠标坐标进行猜测。我只是将它添加到现有示例中，我确信它不太正确，但它显示了这个想法。

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Scene;
import javafx.scene.chart.PieChart;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.control.cell.TextFieldTableCell;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.util.converter.NumberStringConverter;

public class ChangePie extends Application {

    @Override
    public void start(Stage primaryStage) {
        ObservableList<PieChart.Data> pieChartData
                = FXCollections.observableArrayList(
                        new PieChart.Data("Grapefruit", 13),
                        new PieChart.Data("Oranges", 25),
                        new PieChart.Data("Plums", 10),
                        new PieChart.Data("Pears", 22),
                        new PieChart.Data("Apples", 30));
        final PieChart chart = new PieChart(pieChartData);
        chart.setTitle("Imported Fruits");

        final TableView<PieChart.Data> tv = new TableView(pieChartData);
        tv.setEditable(true);
        tv.setFixedCellSize(40);

        tv.addEventHandler(MouseEvent.ANY, (MouseEvent evt) -> {
            double y = 0;
            int idx1 = 0, idx2 = 0;
            if (evt.getEventType() == MouseEvent.MOUSE_PRESSED) {
                y = evt.getY();
                idx1 = tv.getSelectionModel().getSelectedIndex();
            } else if (evt.getEventType() == MouseEvent.MOUSE_RELEASED) {
                idx2 = (int) Math.round((evt.getY() - y) / 40);
                System.out.println("insert at " + idx2);
                if (idx2 > 0) {
                    chart.setData(null);
                    PieChart.Data removed = pieChartData.remove(idx1);
                    pieChartData.add(Math.min(idx2, pieChartData.size() - 1), removed);
                }
            }

        });

        TableColumn tc1 = new TableColumn("Name");
        tc1.setPrefWidth(100);
        tc1.setCellValueFactory(new PropertyValueFactory("name"));
        tc1.setCellFactory(TextFieldTableCell.forTableColumn());

        TableColumn tc2 = new TableColumn("Data");
        tc2.setPrefWidth(100);
        tc2.setCellValueFactory(new PropertyValueFactory("pieValue"));
        tc2.setCellFactory(TextFieldTableCell.forTableColumn(new NumberStringConverter()));

        tv.getColumns().addAll(tc1, tc2);
        Scene scene = new Scene(new VBox(chart, tv));
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

} 
```

# internet-explorer - 如果访问者的浏览器是 Internet Explorer，则死掉

> ID：16217629
> 
> 赞同：-3
> 
> 时间：2013-04-25T14:35:06.883
> 
> 标签：internet-explorer, web

是否可以在仅包含一个按钮的弹出窗口中显示一条消息，供访问者单击并关闭我的网站？我只需要 IE 访问者。

编辑：我找到了可以利用的东西，直到我有时间为 IE 优化 CSS。

```
<!--[if IE]>
  <style>
    body { display: none; background: url('images/notice.jpg') top left no-repeat; }
  </style>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:09:31.767

请不要这样做*。*

当然，旧版本的 IE 很垃圾，但 IE9 和 IE10 是不错的浏览器；尤其是 IE10 在功能和标准兼容性方面与其他产品一样好。仅仅因为它是 IE 而阻止它真的不是答案。

并且正在开发IE11。公平地猜测它会更好。

如果您的网站的特定功能在旧 IE 版本中无法使用，则使用功能检测脚本（例如 Modernizr）来确定用户的浏览器是否不支持您需要的功能。*然后*，也许您有一个案例可以弹出一条消息，告诉用户他们需要升级。但是不要仅仅根据浏览器的名称来做。

如果您遇到样式问题，有时会有非常简单的解决方案。`<!DOCTYPE>`您的页面上有有效的吗？没有一个会导致 IE 中的样式问题，因为它会进入怪癖模式，但修复起来非常简单。除此之外，现代版本的 IE 不应该有太多的样式问题。当然不足以保证完全阻止浏览器。较旧的 IE 版本可能会，但仍在使用 IE6 或 IE7 的人习惯于看到看起来不正确的网站；他们不会被您网站的问题所困扰，因此阻止他们似乎并不值得麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:43:21.320

简单的回答：不是。

详细解答：为了检测访问者使用的浏览器，您需要一些信息，例如用户代理标头。由于此信息是由用户提供的，因此您不能依赖它，用户可能已经向您发送了任何用户代理标头。

检测访问者使用的浏览器的另一种方法是执行功能检查，因为某些浏览器实现了额外的东西。Internet Explorer 有一个`document.all`可由 JavaScript 访问的字段（至少旧版本有）。但是可能还有其他浏览器也具有该字段。因此，该字段的存在并不一定意味着浏览器就是 Internet Explorer。

# jquery - jquery闪烁的背景图片

> ID：16217633
> 
> 赞同：1
> 
> 时间：2013-04-25T14:35:21.020
> 
> 标签：jquery, image, select

我有 2 个关于 Jquery 和背景图片的问题。我有一个简单的 html 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Dreamweaver test</title>
<link rel='stylesheet' type='text/css' href='stylesheet.css'/>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
</head>
<body>
<div id="outer">
<div id="container">
<div id="inner">
</div>
</div>
</div>
</div>
</body>
</html> 
```

我的CSS：

```
 @charset "utf-8";
/* CSS Document */
* {margin:0;padding:0}
/* mac hide \*/
html,body{height:100%;width:100%;}
/* end hide */
body { 
background-color: black;
text-align:center;
min-height:468px;/* for good browsers*/
min-width:552px;/* for good browsers*/
}
#outer{
height:100%;
width:100%;
display:table;
vertical-align:middle;
}
#container {
text-align: center;
position:relative;
vertical-align:middle;
display:table-cell;
height: 468px;
} 
#inner {
width: 500px;
height: 500px;
text-align: center;
margin-left:auto;
margin-right:auto;
background-image: url(mainpage.jpg);
} 
```

如您所见，我有一个内部 div 的背景图像，我想要的是以下内容：

我创建了另一个名为 mainpageflickering.jpg 的图像，它略有不同。我希望该图像闪烁（就像一盏坏灯），我认为可以使用 jQuery 来做到这一点，但我不知道怎么做。所以这是我的两个问题：

如何告诉 jQuery 使用背景图像进行更改？如何告诉 jQuery 闪烁（例如：2 秒正常图像，1 秒闪烁，2 秒正常图像，1 秒闪烁（每次））？

我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:46:56.147

`**[LIVE DEMO](http://jsbin.com/iyotum/1/edit)**`

问：

```
var $FlickImg = $('#inner img'), c = 0;

(function loop(){
  var time = ~~(Math.random()*600) + 1;
  $FlickImg.delay( time ).fadeTo(30, ++c%2, loop);
})(); 
```

HTML：

```
<div id="inner">
  <img src="image.jpg">  
</div> 
```

CSS：

```
#inner{
  background: url(backgroundImage.jpg);
} 
```

# javascript - 通过ajax请求填充js变量的正确方法

> ID：16217638
> 
> 赞同：2
> 
> 时间：2013-04-25T14:35:29.387
> 
> 标签：javascript, xml, ajax, json

目前我正在使用以下方式用 json 获得的数据填充我的全局 js 变量：

```
var tranlationJson =
  $.ajax({
    type: "GET",
    url: "translation.xml",
    contentType: "text/xml",
    dataType: "xml",
    success: function (dataSource) {            
            tranlationJson=ToJasonParser(dataSource);
    }
}); 
```

有没有更聪明的方法？我需要填充这些变量，因为在稍后加载的脚本中我使用它们的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:51:36.870

您可以使 tranlationJson 成为对象，而不是像这样的变量：

```
var tranlationJson = {
    init: function(){
              $.ajax({
                  type: "GET",
                  url: "translation.xml",
                  contentType: "text/xml",
                  dataType: "xml",
                  success: function (dataSource) {            
                      this.data = ToJasonParser(dataSource);
                  }
              });
} 
```

然后像这样调用`init`函数：

```
tranlationJson.init(); 
```

那么你可以`Json response data`像这样访问：

```
tranlationJson.data.something; 
```

[演示](http://jsfiddle.net/arcm111/77RRR/)

# .htaccess - symfony 1.4 中的路由和模块

> ID：16217646
> 
> 赞同：1
> 
> 时间：2013-04-25T14:35:49.187
> 
> 标签：.htaccess, symfony1, symfony-1.4, subdomain

我在 symfony 1.4 中遇到了关于路由和环境或模块的严重问题，所以我创建了三个模块前端、移动和后端。

所以在前端和移动模块中，我使用几乎相同的路由：

```
//apps/frontend/config/routing.yml

home:
 url:   /home
 param: { module: user, action: home }

homepage:
 url:   /
 param: { module: content, action: index } 

  ....

default_index:
 url:   /:module
 param: { action: index }

default:
 url:   /:module/:action/* 
```

移动模块：

```
//apps/mobile/config/routing.yml

home:
 url:   /home
 param: { module: user, action: home }

homepage:
 url:   /
 param: { module: sfGuardAuth, action: signin } 

  ....

default_index:
 url:   /:module
 param: { action: index }

default:
 url:   /:module/:action/* 
```

我使用链接访问我的网站

```
mysite.com/  ==> frontend module(frontend.php)
mysite.com/mobile.php ==> mobile module(mobile.php) 
```

问题是当我正确访问移动版本以登录页面但登录后他们将我重定向到前端模块的主页而不是移动模块的主页？

评论 ：

当我将此链接`mysite.com/mobile_dev.php`与 dev env 一起使用时，移动版本工作得很好！

编辑 ：

这是我的 htaccess ：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(%2d|-)[^=]+$ [NC]
RewriteRule ^(.*) $1? [L]
</IfModule>

Options +FollowSymLinks +ExecCGI

 <IfModule mod_rewrite.c>
 RewriteEngine On

 # uncomment the following line, if you are having trouble
 # getting no_script_name to work
 RewriteBase /

# we skip all files with .something
#RewriteCond %{REQUEST_URI} \..+$
#RewriteCond %{REQUEST_URI} !\.html$
#RewriteRule .* - [L]

# we check if the .html version is here (caching)
RewriteRule ^$ index.html [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f

# no, so we redirect to our front web controller
RewriteRule ^(.*)$ index.php [QSA,L]

</IfModule> 
```

因此，当我更改`index.php`链接`mobile.php`时`mysite.com/mobile.php`，直接转到移动版主页，一切正常...

所以我现在的问题是如何编辑我的 .htaccess 以像这样重定向我：

```
mysite.com/index.php or mysite.com/  redirect me to my site 
mysite.com/mobile.php redirect me to mobile version 
```

编辑2：

我向你解释一下，当我从这个链接开始时，`mysite.com/mobile.php`它会将我重定向到移动应用程序以登录页面，但是当登录后它转到我的主页时，新请求搜索默认前端控制器并指向 index.php 以便给我主页前端应用程序而不是移动应用程序！

那么为什么 symfony`mobile_dev.php`会一直记住我们在移动开发环境中，并`mobile.php`在第一次重定向时将我从产品移动环境切换到前端产品环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:29:49.410

登录成功后sfGaurdModule 重定向到路由`homepage`。您`homepage`在两个应用程序中的路由都有一个定义为`/`. 因此，当您登录`frontend`或被`mobile`重定向到`http://mysite.com/`.

由于一个 URL 只能描述一种资源，因此您的 Web 服务器在获取 URL 时无法理解您要使用的应用程序`http://mysite.com/`。它查看 .htaccess 并发现它应该将此 URL 视为引用`http://mysite.com/index.php`（前端应用程序）。这就是为什么你总是被重定向到前端。

您无法使用 .htaccess 来更改它，因为您永远无法仅区分 URL `http://mysite.com/`。

你可以做的是：

*   将移动应用程序主页的 URL 更改为 eg`/mobile_home`并切换`no_script_name`到`false`移动应用程序

*   或覆盖模块的`signin()`功能，`sfGuardAuth`使其根据您现在使用的应用程序重定向到不同的页面。

无论哪种方式，请记住在您的一个应用程序中设置`no_script_name`为`false`，因为如果您不这样做，它总是会导致问题。

至于`dev`环境。它之所以有效，是因为在 dev 中登录后，您永远不会被重定向到，`/`但无论是到`frontend_dev.php`还是`mobile_dev.php`服务器都不会感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:38:31.097

If you're using **sfGuardPlugin** or **sfDoctrineGuardPlugin** you have to check the plugin code to modify the redirect behavior. sf 1.4 have poor multiple app support. And just to clarify you have created three "**apps**" not three "modules", as you said.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T17:27:51.400

请注意，您不能使用 2 次`no_script_name: true`（对于您的前端和移动应用程序），如果它位于同一个域/子域上，则只能使用一次！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:37:06.630

你可能想看看`relative_url_root`，我也有这个问题：[Symfony does not detect relative url root](https://stackoverflow.com/questions/14982583/symfony-does-not-detect-relative-url-root/15039204#15039204)。

# c# - 检查 ArrayList 上是否存在任何值的最佳方法

> ID：16217647
> 
> 赞同：4
> 
> 时间：2013-04-25T14:35:51.103
> 
> 标签：c#, .net

我有`ArrayList`。我想检查 t his 中是否存在任何值`ArrayList`。我想使用 Any 方法（来自`System.Linq`命名空间），但我只能在 . 上使用它`Array`，而不是`ArrayList`.

有没有有效的方法来检查这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:37:39.697

嗯，你可以检查一下`.Count > 0`。但更好的选择是*停止使用`ArrayList`*. 既然您知道`Any()`and `System.Linq`，我假设您没有使用 .NET 1.1；所以使用`List<T>`一些`T`，你所有的问题都会得到解决。这具有完整的 LINQ-to-Objects 用法，并且是一个更好的主意。

```
List<int> myInts = ...
bool anyAtAll = myInts.Any();
bool anyEvens = myInts.Any(x => (x % 2) == 0);
// etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:37:25.817

使用链接`.Cast`方法将您的数组列表转换为泛型类型

```
ArrayList ar = new ArrayList();

bool hasItem = ar.Cast<int>().Any( i => i == 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:37:53.673

好吧，您总是可以使用 ArrayList.Count ，它会为您提供数组中对象的数量。如果它等于 0 他们什么都没有。

# ruby-on-rails - Rails 4 raw html_safe 不工作

> ID：16217648
> 
> 赞同：7
> 
> 时间：2013-04-25T14:35:54.487
> 
> 标签：ruby-on-rails, ruby-on-rails-4, html-safe

我无法在视图中转义原始 html 标记

```
<% array =  @article.tags.collect { |p| (link_to p.name, '#') } %>
<%= array.join(' , ') %> 
```

原始和 html_safe

```
<% array =  @article.tags.collect { |p| raw (link_to p.name, '#') } %>
<% array =  @article.tags.collect { |p| (link_to p.name, '#').html_safe } %> 
```

给我这个输出，而不转义 html 标签

```
<a href="#">tag1</a> , <a href="#">tag2</a> , <a href="#">tag4</a> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T14:47:16.270

这解决了我的问题

```
<%= raw (@article.tags.map { |p| (link_to p.name, '#') }.join(' , ')) %> 
```

# c# - DLL 被 Visual Studio 项目中的旧版本覆盖

> ID：16217654
> 
> 赞同：0
> 
> 时间：2013-04-25T14:36:01.877
> 
> 标签：c#, visual-studio, dll, visual-studio-2012

我正在使用 HtmlAgilityPack 在 Visual Studio 2012 中开发 Web 应用程序。我的项目引用了应用程序 bin 文件夹中 dll 的 1.4.0.0 版本。以前它使用 1.3.0.0

该应用程序可以工作，但大约每天一次，bin 文件夹中的 dll 会被覆盖，将版本 1.4.0.0 替换为 1.3.0.0。第一次发生这种情况时，我已经检查了 GAC 并删除了我的 ASP.NET 临时文件夹。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:43:43.660

您还需要从解决方案资源管理器的解决方案参考列表中删除 1.3.0.0 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:50:12.363

较旧的 .dll 显然是从您的解决方案中的某处引用的。我会在编辑器中打开项目文件并在那里查找对旧版本的任何引用。

如果没有找到，我的猜测是您依赖的其他一些库或组件正在引用旧版本的 .dll（您是否使用任何第三方库？）。如果您没有这些源代码，那么也许您可以使用[JustDecompile](http://www.telerik.com/products/decompiler.aspx)或其他类似工具对它们进行反编译。然后，您至少可以检查您使用的 dll 中的引用，并确认或排除它作为问题的根源（没有双关语^^）。

哦，还有一件事——也许很明显，但你有没有`Specific version = true`为参考做好准备？

# mysql - MySQL Combining (Inner Join and Select) 效率

> ID：16217656
> 
> 赞同：0
> 
> 时间：2013-04-25T14:36:03.467
> 
> 标签：mysql

我有两个表 A 和 B。我需要表 A 中的两列（var1 和 var2），而表 B 中只有一列（var3）。这样做是否更有效率

```
SELECT var1, var2, var3 FROM TABLE_A a
INNER JOIN TABLE_B b ON (a.var1 = b.var1) 
```

或者

```
SELECT var1, var2 FROM TABLE_A a
INNER JOIN (SELECT var1, var3 FROM TABLE_B b) b_min ON (a.var1 = b_min.var1) 
```

第二个在加入之前减少了表 B 中的列数，但看起来更“复杂”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:40:53.860

我会选择第一个。在第二个中，`TABLE_B`当您执行子查询时，任何索引都将丢失。

列数对查询的效率没有影响。这是*行*数。MySQL 需要扫描的行数是降低查询速度的原因，而不是列数。

`TABLE_A.var1`PS 确保和上有索引`TABLE_B.var1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:39:41.477

我宁愿使用第一个。实际上没有必要使用子查询，因为您在其中确实有任何聚合函数或操作。

# ruby-on-rails - 为什么这个表格在让我有机会输入数据之前重定向我？

> ID：16217658
> 
> 赞同：0
> 
> 时间：2013-04-25T14:36:07.060
> 
> 标签：ruby-on-rails, forms

导轨控制器：

```
class VenuesController < ApplicationController

  def new
    @venue = Venue.new
  end

  def create
    @venue = Venue.new(params[:venue])
    if @venue.save
      redirect_to root_path
    end
  end

  def update
    redirect_to search_path
  end

end 
```

导轨形式：

```
<%= form_for(@venue) do |f| %>

  <%= f.text_field :foursquare_id %>

  <%= f.submit "Save" %>

<% end %> 
```

“foursquare_id”是“venues”表中的一列。通常我从foursquare导入一个foursquare id，但我正在输入文本以进行测试。在我有机会输入表单之前，我被重定向到“root_path”。

我的控制器/表单缺少什么？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:50:40.513

模板表单应该被用作文件名的`new`操作使用`new.html.erb`。你应该去`/venues/new`填写表格。

该`create`操作用于提交已完成的表单，这就是您被重定向的原因。您还应该修改`create`以处理无法保存的模型：

```
def create
  @venue = Venue.new(params[:venue])
  if @venue.save
    redirect_to root_path
  else
    render :action => :new
  end
end 
```

或者您可以为此使用简写：

```
def create
  @venue = Venue.new(params[:venue])
  @venue.save
  respond_with @venue, :location => root_path
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:54:29.673

您用于创建新场所的表单应该在场所/new.html.erb 中，它将在表单提交时调用您的控制器中的 Create 操作。在这种情况下，您不应该有创建视图。

# css - 如何在服装工具提示上添加换行符？

> ID：16217661
> 
> 赞同：1
> 
> 时间：2013-04-25T14:36:19.353
> 
> 标签：css

如何在服装工具提示上添加换行符？无论是css还是jquery，我不知道该怎么做，使用原生工具提示很简单，`&#13;`但不适用于服装，这使得显示一些信息变得困难，例如：

```
姓名：约翰·史密斯
年龄：15
发色：绿色
.
.
.

```

那么解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:42:08.237

如果使用简单的换行符`&#13;`或`\n`，则必须设置`white-space: pre;`为保留换行符和空格。或者您可以在后端或通过 JS 将每个`&#13;`转换为换行 HTML 标记`<br />`。

请参阅：[https ://developer.mozilla.org/en-US/docs/CSS/white-space](https://developer.mozilla.org/en-US/docs/CSS/white-space)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:43:18.367

在 javascript 中有两种方法可以做到这一点：

`\n`在字符串中使用换行符：

`var tooltipstring = "John Smith \n Age:15 \n Hair-Color:Green";`

或者通过在字符串中添加新行并使用反斜杠正确转义`\`：

```
var tooltipstring = "John Smith \
Age:15 \
Hair-Color:Green"; 
```

# c# - 基于 C# 中的类型参数的通用返回类型

> ID：16217663
> 
> 赞同：1
> 
> 时间：2013-04-25T14:36:28.673
> 
> 标签：c#, generics

我有一个带有字典的类，该字典将`Type`键映射到实现某些接口的对象`IWhatever`。

我希望创建一个通用函数，它获取一个类型作为输入并返回映射到字典中该类型的对象。

就像是 ：

```
public T get<T>(Type type) 
```

其中 T 是 type 和 type implements 的实例`IWhatever`。

我不想返回`Object`，甚至不想返回`Iwhatever`给定类型的对象。返回对象的类型可以在编译时清楚地推断出来。所以我认为这应该是可能的。

我已经设法在java中做到这一点：

```
public T get<T>(Class<T extends IWhatever> type) { // implementation } 
```

有没有办法在 C# 中实现这一点？如果不是，为什么不呢？您会建议什么替代方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T14:39:02.523

I think you want:

```
public T Get<T>() where T : IWhatever { ... } 
```

For more information, see [Constraints on Type Parameters (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/d5x73970.aspx).

This is of course only useful when the client can provide the type argument easily at compile-time. Internally, your method may need a lot of nastiness, e.g.:

```
return (T) myDict[typeof(T)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:07:33.870

从你的前两句话中，我认为你想要的是以下内容。您必须决定您的类型的某些属性是唯一的。您可以确保您拥有的所有类型都包含 GUID 属性。

```
public class MyClass
{
  private Dictionary<GUID, object> _myDictionary;
  public AddObject(object objectToAdd)
  {
      _myDictionary.Add(objectToAdd.GUID, objectToAdd);
  }
  public object GetObject(Type typeToGet)
  {
    return _myDictionary[typeToGet.GUID];
  }
} 
```

如果字典需要包含每种类型的多个对象，则字典值可以是对象列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:42:24.530

我认为你被Java的擦除误导了。考虑您帖子中的以下 Java 代码（经过编辑以使其成为有效代码）：

```
public <T extends IWhatever> T get(Class<T> type) { // implementation } 
```

在这种情况下，`type`仅需要该参数，因为泛型类型信息仅在编译时可用。在 C# 中并非如此，您可以在其中编写以下内容：

```
public T Get<T>()
    where T : IWhatever
{
    Type type = typeof(T);
    // rest of implementation
} 
```

# apache-flex - 如何更改字体大小以导出数据表中的 pdf 插件错误

> ID：16217671
> 
> 赞同：0
> 
> 时间：2013-04-25T14:36:40.293
> 
> 标签：apache-flex, pdf, datatables, tabletools

下面的代码给出了一个错误。请帮我。

我的命令：

```
D:\flex_sdk_4.6\bin>mxmlc --target-player=11.1.0 -static-link-runtime-shared-lib
raries=true -library-path+=lib ZeroClipboardPdf.as 
```

加载配置文件 D:\flex_sdk_4.6\frameworks\flex-config.xml

错误：

> D:\flex_sdk_4.6\bin\ZeroClipboardPdf.as：错误：在源路径“ZeroClipboardPdf”中找到的文件必须与文件“ZeroClipboard”中的类定义同名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:41:24.973

解决的问题。文件名和类名必须相同...

类名中的 ZeroClipboardPdf.as 将 ZeroClipboard 更改为 ZeroClipboardPdf。

# c# - GridView 表 1 相关表 2

> ID：16217674
> 
> 赞同：2
> 
> 时间：2013-04-25T14:36:47.120
> 
> 标签：c#, gridview, webforms

抱歉，我知道 Title 确实令人困惑，但我无法弄清楚到底该放下什么。

基本上我创建了一个查询数据库并显示数据的网格视图。它完美地工作，没有抱怨，但是我现在拥有的是，

![在此处输入图像描述](https://i.stack.imgur.com/IaQ2v.png)

但我想要的是，

![在此处输入图像描述](https://i.stack.imgur.com/OPBZh.png)

问题：我不确定我该怎么做，有人可以指出我正确的方向吗？

我想我会使用嵌套的gridviews。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:02:51.513

尝试更改您的`SELECT`查询，如下所示...您将获得**预期的结果**...

**SQL小提琴：** [http ://www.sqlfiddle.com/#!3/00b5f/15](http://www.sqlfiddle.com/#!3/00b5f/15)

我将其命名`Table`为`Fruits`

```
SELECT CrateTitle,CrateDescription,CrateID,
stuff(
(
    SELECT ','+ [FruitTitle] FROM fruits WHERE CrateID = t.CrateID FOR XML path('')
),1,1,'') Types_of_Fruits_in_Crate
FROM (SELECT DISTINCT CrateTitle,CrateDescription,CrateID FROM fruits )t 
```

**或者**

`CREATE a PROC`

`*Place this Query in that Proc*`

`*Call that Proc*`

`*assign that Result set to GridView*`

您可以使用以下代码将他的存储过程结果集分配给 GridView：

```
 DataTable dt = new DataTable();
        SqlConnection connection = new SqlConnection("Your Connection String");
        try
        {
            connection.Open();
            string spName = "YOURStoredProcudureName";

            SqlCommand sqlCmd = new SqlCommand(spName, connection);
            SqlDataAdapter sqlDa = new SqlDataAdapter(sqlCmd);
            sqlCmd.CommandType = CommandType.StoredProcedure;

            sqlDa.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                //display the DataTable to a Data control like GridView for example
                GridView1.DataSource = dt;
                GridView1.DataBind();
            }
        }
        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "Fetch Error:";
            msg += ex.Message;
            throw new Exception(msg);
        }
        finally
        {
            connection.Close();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:50:29.013

这更像是一个 sql（或您的数据库引擎使用的任何语言）问题而不是 ac# 问题，尽管 c# 的一个解决方案是（尽管可能需要一些额外的工作）在运行时使用 html 文字来绘制表格

另一种选择是更改您的 sql 但没有更多信息我不能说您是否可以在 changeID 或数据透视表上使用 group by

# actionscript-3 - 为 VSlider 创建移动 VSliderSkin - 带有测试用例和屏幕截图

> ID：16217676
> 
> 赞同：0
> 
> 时间：2013-04-25T14:36:48.913
> 
> 标签：actionscript-3, apache-flex, flex4.5, flex-mobile, flex4.7

[HSlider](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/HSlider.html)已针对移动设备进行了优化，但[VSlider](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/VSlider.html)没有 - 正如您在此处看到的：

![在此处输入图像描述](https://i.stack.imgur.com/h6n89.png)

同时，以移动为主题的[HSliderSkin.as](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/mobiletheme/src/spark/skins/mobile/HSliderSkin.as)看起来非常简单。

所以我在我非常简单的测试项目中将该文件复制到“VSliderSkin.as”中，并且 -

1.  用“VSlider”替换了对“HSlider”的明显引用

2.  在 measure() 方法中交换了“宽度”<->“高度”

3.  在 layoutContents() 中交换了 "width" <-> "height" 和 "x" <-> "y"

**SlideApp.mxml**（只需添加到一个空白的 Flex 移动项目）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    applicationDPI="160">

    <s:VSlider
        skinClass="VSliderSkin"
        horizontalCenter="0"
        height="80%" />

    <s:HSlider
        skinClass="spark.skins.mobile.HSliderSkin"
        width="100%"
        bottom="10" />

</s:Application> 
```

**VSliderSkin.as**（放入与 SlideApp.as 相同的目录）：

```
////////////////////////////////////////////////////////////////////////////////
//
//  ADOBE SYSTEMS INCORPORATED
//  Copyright 2010 Adobe Systems Incorporated
//  All Rights Reserved.
//
//  NOTICE: Adobe permits you to use, modify, and distribute this file
//  in accordance with the terms of the license agreement accompanying it.
//
////////////////////////////////////////////////////////////////////////////////

package {
    import flash.display.BlendMode;

    import mx.core.ClassFactory;
    import mx.core.IFactory;

    import spark.components.Button;
    import spark.components.VSlider;
    import spark.skins.mobile.HSliderThumbSkin;
    import spark.skins.mobile.HSliderTrackSkin;
    import spark.skins.mobile.supportClasses.HSliderDataTip;
    import spark.skins.mobile.supportClasses.MobileSkin;

    /**
     *  ActionScript-based skin for VSlider controls in mobile applications.
     * 
     *  <p>The base Flex implementation creates an VSlider with fixed height
     *  and variable width with a fixed-size thumb. As the height of the
     *  VSlider component increases, the vertical dimensions of the visible VSlider remain
     *  the same, and the VSlider stays vertically centered.</p>
     * 
     *  <p>The thumb and track implementations can be customized by subclassing
     *  this skin class and overriding the thumbSkinClass, trackSkinClass,
     *  and/or dataTipClass variables as necessary.</p>
     * 
     *  @langversion 3.0
     *  @playerversion Flash 10
     *  @playerversion AIR 2.5 
     *  @productversion Flex 4.5
     */
    public class VSliderSkin extends MobileSkin
    {    
        //--------------------------------------------------------------------------
        //
        //  Constructor
        //
        //--------------------------------------------------------------------------

        /**
         *  Constructor.
         * 
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 2.5 
         *  @productversion Flex 4.5
         * 
         */    
        public function VSliderSkin()
        {
            super();

            thumbSkinClass = HSliderThumbSkin;
            trackSkinClass = HSliderTrackSkin;
            dataTipClass = spark.skins.mobile.supportClasses.HSliderDataTip;

            blendMode = BlendMode.LAYER;
        }

        //--------------------------------------------------------------------------
        //
        //  Properties
        //
        //--------------------------------------------------------------------------

        /** 
         *  @copy spark.skins.spark.ApplicationSkin#hostComponent
         */
        public var hostComponent:VSlider;

        //--------------------------------------------------------------------------
        //
        //  Skin parts 
        //
        //--------------------------------------------------------------------------

        /**
         *  VSlider track skin part
         *
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 2.5 
         *  @productversion Flex 4.5
         */    
        public var track:Button;

        /**
         *  VSlider thumb skin part
         * 
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 2.5 
         *  @productversion Flex 4.5
         */    
        public var thumb:Button;

        /**
         *  VSlider dataTip class factory
         * 
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 2.5 
         *  @productversion Flex 4.5
         */    
        public var dataTip:IFactory;

        //--------------------------------------------------------------------------
        //
        //  Variables
        //
        //--------------------------------------------------------------------------

        /**
         *  Specifies the skin class that will be used for the VSlider thumb.
         * 
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 2.5 
         *  @productversion Flex 4.5 
         */    
        protected var thumbSkinClass:Class;

        /**
         *  Specifies the skin class that will be used for the VSlider track.
         * 
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 2.5 
         *  @productversion Flex 4.5 
         */    
        protected var trackSkinClass:Class;

        /**
         *  Specifies the class that will be used for the VSlider datatip.
         * 
         *  @langversion 3.0
         *  @playerversion Flash 10
         *  @playerversion AIR 2.5 
         *  @productversion Flex 4.5 
         */    
        protected var dataTipClass:Class;

        //--------------------------------------------------------------------------
        //
        //  Overridden methods
        //
        //--------------------------------------------------------------------------

        /**
         *  @private 
         */ 
        override protected function commitCurrentState():void
        {
            if (currentState == "disabled")
                alpha = 0.5;
            else if (currentState == "normal")
                alpha = 1;
        }    

        /**
         *  @private 
         */ 
        override protected function createChildren():void
        {
            // Create our skin parts: track and thumb
            track = new Button();
            track.setStyle("skinClass", trackSkinClass);
            addChild(track);

            thumb = new Button();
            thumb.setStyle("skinClass", thumbSkinClass);
            addChild(thumb);

            // Set up the class factory for the dataTip
            dataTip = new ClassFactory();
            ClassFactory(dataTip).generator = dataTipClass;
        }

        /**
         *  @private 
         *  The HSliderSkin width will be no less than the width of the thumb skin.
         *  The HSliderSkin height will be no less than the greater of the heights of
         *  the thumb and track skins.
         */ 
        override protected function measure():void
        {
            measuredHeight = track.getPreferredBoundsHeight();
            measuredWidth = Math.max(track.getPreferredBoundsWidth(), thumb.getPreferredBoundsWidth());

            measuredMinWidth = Math.max(track.getPreferredBoundsWidth(), thumb.getPreferredBoundsWidth());
            measuredMinHeight = thumb.getPreferredBoundsHeight();
        }

        /**
         *  @private
         */ 
        override protected function layoutContents(unscaledWidth:Number, unscaledHeight:Number):void
        {
            super.layoutContents(unscaledWidth, unscaledHeight);

            // minimum height is no smaller than the larger of the thumb or track
            var calculatedSkinWidth:int = Math.max(Math.max(thumb.getPreferredBoundsWidth(), track.getPreferredBoundsWidth()),
                unscaledWidth);

            // minimum width is no smaller than the thumb
            var calculatedSkinHeight:int = Math.max(thumb.getPreferredBoundsHeight(),
                unscaledHeight);

            // once we know the skin height, center the thumb and track
            thumb.x = Math.max(Math.round((calculatedSkinWidth - thumb.getPreferredBoundsWidth()) / 2), 0);
            var calculatedTrackX:int = Math.max(Math.round((calculatedSkinWidth - track.getPreferredBoundsWidth()) / 2), 0);

            // size and position
            setElementSize(thumb, thumb.getPreferredBoundsWidth(), thumb.getPreferredBoundsHeight()); // thumb does NOT scale
            setElementSize(track, track.getPreferredBoundsWidth(), calculatedSkinHeight);
            setElementPosition(track, calculatedTrackX, 0);
        }
    }
} 
```

当然这不起作用，但是非常接近并且拇指垂直移动 - 它应该：

![在此处输入图像描述](https://i.stack.imgur.com/iJ8eJ.png)

有人知道如何完成我的手机皮肤吗？

我也应该创建[HSliderTrackSkin.as](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/mobiletheme/src/spark/skins/mobile/HSliderTrackSkin.as)的副本吗？或者也许可以（ab）在这里使用非移动[VSliderTrackSkin.mxml ？](http://opensource.adobe.com/svn/opensource/flex/sdk/trunk/frameworks/projects/spark/src/spark/skins/spark/VSliderTrackSkin.mxml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:22:31.983

您可以创建自己的类，如 CustomVSlider 并放入 HSlider 更改旋转（**旋转 = 90**）。这对我来说很棒。希望这对您有所帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
xmlns:fx="http://ns.adobe.com/mxml/2009" 
xmlns:s="library://ns.adobe.com/flex/spark" 
applicationDPI="160">

<s:HSlider
    skinClass="spark.skins.mobile.HSliderSkin"
    height="100%" left="50"
    top="100" rotation="90"/>

<s:HSlider
    skinClass="spark.skins.mobile.HSliderSkin"
    width="100%"
    top="300" />
</s:Application> 
```

# arrays - 在两个数组中查找唯一值 - Perl

> ID：16217677
> 
> 赞同：1
> 
> 时间：2013-04-25T14:36:51.657
> 
> 标签：arrays, perl, unique

我有两个数组@results 和@results2，它们之间有大量数字。例如（12345678 182937439 18329741 等）

在这两个数组中，如果我将它们组合起来，我可能会得到我不想要的重复。我想比较这两个数组，保留唯一值并一个接一个地打印它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:48:50.380

所以对数组进行重复数据删除。此代码从函数中借用：[`List::MoreUtils`](http://search.cpan.org/perldoc?List%3a%3aMoreUtils) `uniq`

```
sub uniq {
    my %seen;
    grep { !$seen{$_}++ } @_;
}

my @unique = uniq(@results, @results2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:48:30.283

每当您认为“独特”时，请考虑“哈希”

```
#!/usr/bin/perl

use strict;
use warnings;

my @a = qw(1 2 3);
my @b = qw(3 4 5);

my %x = map { $_ => 1 } @a, @b;

print join ", ", keys %x; # 4, 1, 3, 2, 5 
```

# android - 在移动设备上请求桌面站点选项

> ID：16217681
> 
> 赞同：5
> 
> 时间：2013-04-25T14:36:54.487
> 
> 标签：android, iphone, web-applications, mobile, user-agent

许多像我的安卓手机这样的移动设备都有一个“请求桌面站点”选项。我正在构建移动网站，并希望使该原生功能发挥作用。

**作为开发人员，我们对我们的期望是什么？**是否有 GET 请求，例如： leave_mobile=1 还是设备本身更改了用户代理以欺骗应用程序认为它只是另一个桌面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T07:52:05.587

我已经在我的 android 设备上做了一些测试，并读出了用户代理，似乎它发生了变化。因此，我为使这个本机选项起作用所做的是将初始用户代理捕获到一个会话中，并在每个页面请求上将其与发送的那个进行比较。如果用户代理不相同，则重新验证它是否是移动设备，如果为真，则用新的覆盖会话用户代理。但是，如果新验证失败，它可能希望找到桌面版本，因此发送新的标头重定向。

```
$DesktopSite = 'www.example.com';
$UserAgent = $_SERVER['HTTP_USER_AGENT'];

if (!isset($_SESSION['use_mobile'])){
    $_SESSION['use_mobile'] = 1;
    $_SESSION['user_agent'] = $UserAgent;
} else if ($_SESSION['user_agent'] != $UserAgent){  // Check if user-agent has changed
    if(!preg_match( /*preg match from http://detectmobilebrowsers.com/ */){
        $_SESSION['use_mobile'] = 0;
        $_SESSION['user_agent'] = $UserAgent; // Overwrite old user-agent with new one.
        header("location: $DesktopSite"); // Send visitor to desktop website.
    } else {
        // Visitor still seems to be mobile.
        $_SESSION['use_mobile'] = 1;
        $_SESSION['user_agent'] = $UserAgent; // Overwrite old user-agent with new one.
    }
} 
```

如果您第一次在桌面上进入移动网站，它不会将您送回桌面网站，因为它会先创建会话。这样，您也可以在桌面上检查移动网站，而不是被发回。但是，如果您更改用户代理，您将在失败时重新验证并重定向。

完美运行。希望这可以帮助将来的任何人。

# python - 如何仅将文件添加到 zip 而不是在 Python 中指向它的文件夹路径？

> ID：16217685
> 
> 赞同：4
> 
> 时间：2013-04-25T14:36:59.507
> 
> 标签：python, syntax, zip

我正在使用下面的代码来压缩每天创建的备份文件。

```
import os, zipfile

zf = zipfile.ZipFile("Test.zip", "w")
for root, subdirs, files in os.walk("C:/Users/Bob/Desktop/Zip"):
    for filename in files:
        zf.write(os.path.join(root, filename))
zf.close() 
```

问题是当我打开 zip 文件时，它包含了指向该文件的路径中的所有文件夹。例如，在 zip 中，我将有一个名为 Users/Bob/Desktop/Zip/File.gdb 的文件夹

但我只想要 zip 中的 File.gdb。原因是当它包含所有这些文件夹时，它实际上并没有压缩文件。它与不在拉链内时的尺寸相同。但如果我只压缩 File.gdb，它会从 30Mb 压缩到 3Mb。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:40:51.327

您需要查看以下[`arcname`参数`ZipFile.write`](http://docs.python.org/2/library/zipfile#zipfile.ZipFile.write)：

> `ZipFile.write(filename[, arcname[, compress_type]])`
> 
> 将命名的文件写入`filename`存档，**并为其指定存档名称`arcname`（默认情况下，这将与 相同`filename`**，但没有驱动器号并删除了前导路径分隔符）。

在您的情况下，您很可能想要：

```
zf.write(os.path.join(root, filename), filename, zipfile.ZIP_DEFLATED) 
```

# java - servlet-api.jar - 本地主机上未加载 jar

> ID：16217686
> 
> 赞同：1
> 
> 时间：2013-04-25T14:37:00.557
> 
> 标签：java, jar, http-status-code-404

这个 jar 没有在本地加载到我的 Tomcat 7 环境中。昨天当我关闭一天时，这工作得很好。什么都没有改变，但是当我今天早上开始时，这就是我所看到的。什么都没有改变——真的。我刚刚打开 Eclipse 开始工作和测试我的 Web 应用程序 - 找不到并返回 404。

什么会导致罐子无法加载？我在项目中没有错误并且已经清理了它。

有问题的 jar 位于：

```
C:\Users\me\Documents\Dev\Eclipse\J2EE_WDT\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\app.cloud.services\WEB-INF\lib 
```

清理后的控制台输出：

```
Apr 25, 2013 9:38:31 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/mydomain.com] has started
Apr 25, 2013 9:38:35 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined
Apr 25, 2013 9:38:35 AM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  com.mydomain.webservices
Apr 25, 2013 9:38:35 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class com.mydomain.webservices.Encryption
  class com.mydomain.webservices.Codec
Apr 25, 2013 9:38:35 AM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
Apr 25, 2013 9:38:35 AM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'
Apr 25, 2013 9:38:36 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/mydomain.com] is completed
Apr 25, 2013 9:38:36 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/cs.core.web] has started
Apr 25, 2013 9:38:36 AM java.util.jar.Attributes read
WARNING: Duplicate name in Manifest: Class-Path.
Ensure that the manifest does not have duplicate entries, and
that blank lines separate individual sections in both your
manifest and in the META-INF/MANIFEST.MF entry in the jar file.
Apr 25, 2013 9:38:36 AM java.util.jar.Attributes read
WARNING: Duplicate name in Manifest: Class-Path.
Ensure that the manifest does not have duplicate entries, and
that blank lines separate individual sections in both your
manifest and in the META-INF/MANIFEST.MF entry in the jar file.
Apr 25, 2013 9:38:36 AM java.util.jar.Attributes read
WARNING: Duplicate name in Manifest: Class-Path.
Ensure that the manifest does not have duplicate entries, and
that blank lines separate individual sections in both your
manifest and in the META-INF/MANIFEST.MF entry in the jar file.
Apr 25, 2013 9:38:36 AM java.util.jar.Attributes read
WARNING: Duplicate name in Manifest: Class-Path.
Ensure that the manifest does not have duplicate entries, and
that blank lines separate individual sections in both your
manifest and in the META-INF/MANIFEST.MF entry in the jar file.
Apr 25, 2013 9:38:36 AM java.util.jar.Attributes read
WARNING: Duplicate name in Manifest: Class-Path.
Ensure that the manifest does not have duplicate entries, and
that blank lines separate individual sections in both your
manifest and in the META-INF/MANIFEST.MF entry in the jar file.
Apr 25, 2013 9:38:40 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/cs.core.web] is completed
Apr 25, 2013 9:38:40 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/app.cloud.services] has started
Apr 25, 2013 9:38:41 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Users\me\Documents\Dev\Eclipse\J2EE_WDT\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\app.cloud.services\WEB-INF\lib\el-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/el/Expression.class
Apr 25, 2013 9:38:41 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\Users\me\Documents\Dev\Eclipse\J2EE_WDT\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\app.cloud.services\WEB-INF\lib\servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Apr 25, 2013 9:38:45 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined
Apr 25, 2013 9:38:45 AM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  com.app.api
Apr 25, 2013 9:38:45 AM com.sun.jersey.api.core.ScanningResourceConfig logClasses
INFO: Root resource classes found:
  class com.app.api.SyncAccount
  class com.app.api.Override
  class com.app.api.SyncSchedule
  class com.app.api.SyncDevice
  class com.app.api.Register_NOTUSED
  class com.app.api.Mock
  class com.app.api.Contact
  class com.app.api.WSInit
  class com.app.api.SyncMetrics
Apr 25, 2013 9:38:45 AM com.sun.jersey.api.core.ScanningResourceConfig init
INFO: No provider classes found.
Apr 25, 2013 9:38:45 AM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.12 02/15/2012 04:51 PM'
Apr 25, 2013 9:38:45 AM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/app.cloud.services] is completed 
```

**编辑**

我想要做的是启动我的网络应用程序，由于 jar 未加载，目前无法找到该应用程序。它在物理上它应该在的地方 - 这昨天再次奏效，现在到今天早上却没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:50:00.433

servlet-api.jar 从 tomcat_home/lib 目录加载。我可以建议你清理 tomcat 服务器并重新启动它。要清理 tomcat，您需要执行“窗口 -> 显示视图 -> 其他 -> 服务器”，您将能够看到 tomcat 服务器。右键单击并点击“清理...”。希望这可以解决您的问题，因为它昨天工作正常，但今天突然无法正常工作，没有任何变化。

# command-line - 命令，连接和格式化多个列表的结果

> ID：16217689
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:10.230
> 
> 标签：command-line

我搜索 2 件事

1.  如何将命令的结果连接到文件中。
2.  如何在 html 中格式化 NET 的结果，如 wmic 的 /format

我想创建一个命令（在 bat 文件中）来获取 VM 的信息。

样本 ：

```
I use wmic and NET.

wmic product get Name,Vendor,Version,Description,InstallDate /format:htable > VM_info.html

NET LOCALGROUP Administrators > VM_info.html 
```

结果是一个包含两个列表的 html 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:35:08.013

`/format:htable`功能内置于`wmic`.`wmic`提供它，而`NET`命令不提供。因此，除非您为此编写自定义程序，否则无法格式化`NET LOCALGROUP`as的输出。`<html>`

但是，将一个命令的结果连接到另一个命令非常简单：

```
wmic product get Name,Vendor,Version,Description,InstallDate /format:htable > VM_info.html
NET LOCALGROUP Administrators >> VM_info.html 
```

注意第二个命令中使用的**>> 。**
这就是附加输出而不是覆盖文件的原因。

# asp.net - ASP.Net asp:ControlParameter ControlID 可以是公共共享变量而不是 asp:label 吗？

> ID：16217690
> 
> 赞同：1
> 
> 时间：2013-04-25T14:37:10.390
> 
> 标签：asp.net, vb.net, controlparameter

ASP.Net asp:ControlParameter ControlID 可以是公共共享变量而不是 ASP:label 吗？

我们使用 asp:label 作为 DataSource 的参数，但现在想使用公共共享变量而不是标签。

这是使用 asp:label 的参数标记。

```
<asp:ControlParameter 
    ControlID="LabelCheckBoxMonday" 
    Name="DayOfWeekMonday" 
    PropertyName="Text" 
    Type="String" /> 
```

我们在代码隐藏中添加了这个公共共享变量。

```
Public Shared blnDayOfWeekMonday As Boolean 
```

我们将参数的标记更改为此。

```
<asp:ControlParameter 
    ControlID="blnDayOfWeekMonday" 
    Name="DayOfWeekMonday" 
    PropertyName="Text" 
    Type="String" /> 
```

这是将值放入变量的编码。用于为标签执行此操作的原始编码已被注释掉。

```
Protected Sub ImageButtonInsertDayOfWeekMonday_Click(sender As Object, e As ImageClickEventArgs)

    Dim imgTheImageButton As New ImageButton

    imgTheImageButton = DetailsView.FindControl("ImageButtonInsertDayOfWeekMonday")

    If imgTheImageButton.ImageUrl = "../../Images/checked.png" = True Then

        imgTheImageButton.ImageUrl = "../../Images/unchecked.png"
        '            LabelCheckBoxMonday.Text = False
        blnDayOfWeekMonday = False
    Else

        imgTheImageButton.ImageUrl = "../../Images/checked.png"
        '           LabelCheckBoxMonday.Text = True
        blnDayOfWeekMonday = True
    End If
End Sub 
```

所有这些都是以下 InsertCommand 的一部分：

```
 InsertCommand=
        "INSERT INTO [TeacherSchedule] 
            ([DayOfWeekMonday], 
             [DayOfWeekTuesday], 
             [DayOfWeekWednesday], 
             [DayOfWeekThursday], 
             [DayOfWeekFriday], 
             [DayOfWeekSaturday], 
             [DayOfWeekSunday], 
             [StartTime],
             [EndTime],
             [ClassID],
             [TeacherID]) 
        VALUES (@DayOfWeekMonday, 
                @DayOfWeekTuesday, 
                @DayOfWeekWednesday, 
                @DayOfWeekThursday, 
                @DayOfWeekFriday, 
                @DayOfWeekSaturday, 
                @DayOfWeekSunday, 
                @StartTime, 
                @EndTime,
                @ClassID,
                @TeacherID)" 
```

当 Web 表单运行时，将其更改为公共共享变量后没有任何反应。

你能告诉我我还需要做什么才能继续吗？

*** 更新 ***

使用 Marks 的建议，我发现了如何做一个 asp:QueryStringParameter 但仍然不知道如何用一个值填充它。这是作为 asp 的参数：QueryStringParameter

```
<asp:QueryStringParameter
    Name="DayOfWeekMonday" 
    QueryStringField="QSDayOfWeekMonday" /> 
```

如何在 ImageButtonInsertDayOfWeekMonday_Click 子例程中填充 QSDayOfWeekMonday？

我试过了：

```
QSDayOfWeekMonday = False 
```

但出现“未声明”错误。

***完整的标记和代码隐藏编码***

[http://pastebin.com/embed_js.php?i=kye3c2U8](http://pastebin.com/embed_js.php?i=kye3c2U8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:50:30.510

另一种选择是将参数用作：

```
<asp:Parameter Name="DateOfWeekMonthly" /> 
```

并在代码中将 DefaultValue 属性设置为您要指定的值，如下所示：

```
DataSourceControl1.Parameters["DateOfWeekMonthly"].DefaultValue = someVariable; 
```

这对我有用。

您可以在触发的 Selecting 事件中建立此事件；此事件在选择发生之前触发；因此，您可以建立布尔值。我相信在这里，您可以将其添加到事件参数中定义的值集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T08:05:04.857

我使用了这种较短的方式：

```
<asp:Parameter Name="DateOfWeekMonthly" Type="Boolean" DefaultValue="true" /> 
```

这也有效。

# android - DatePicker 自定义 Numberpicker 样式在更改后不起作用

> ID：16217693
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:12.597
> 
> 标签：android, custom-component

我有一个自定义日期选择器，它扩展了日期选择器。

我在加载组件时初始化了月份样式：

```
private void updateCustomStyle() {
    ViewGroup childPicker = (ViewGroup)
                findViewById(Resources.getSystem().getIdentifier("month" /*rest is:
                day, year*/, "id", "android"));

                EditText textview = (EditText)
                        childPicker.getChildAt(0);
                textview.setTextSize(35);
                textview.setTextColor(Color.GREEN);
                textview.invalidate();

} 
```

在此之后，日期选择器被加载，月份字体更大，颜色为绿色。问题发生在我将月份滚动到另一个月份后，我有一个在初始化时定义的日期更改侦听器：

```
this.init(agora.getYear(), agora.getMonth(), agora.getDate(),
            this.getOnDataChangedListener()); 
```

在数据更改侦听器上，我有这个电话：

```
@Override
        public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            updateCustomStyle();
        } 
```

但在我滚动到另一个月后，它仍然恢复到原来的风格。对此有何建议？

这种方法适用于 Android 3.1 和 4.0。问题出现在 android 4.1.2 及更高版本上。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:28:17.023

经过大量研究后，我发现你不能像在以前的版本上那样在 android 4.1.X 上做那种选择风格。您可以做的是创建一个扩展 NumberPicker 的类并添加以下代码：

```
if (child instanceof EditText) {
        ((EditText) child).setTextSize(35);
} 
```

但是您仍然无法对选定的数字使用不同的样式，所以我所做的是使用 simonVT numberpicker ( [https://github.com/SimonVT/android-numberpicker](https://github.com/SimonVT/android-numberpicker) ) 在一些定制解决了问题之后。

# html - 使用vbs从网页中提取并写入excel

> ID：16217694
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:13.467
> 
> 标签：html, excel, web, properties, vbscript

我对 VBS 很陌生，但我需要从网页中提取属性信息并将信息输入到 Excel 中。我要做的是从链接、文本字段、按钮、图像等中获取对象信息。我需要的信息是每个项目的 .name、.id、.title、.value、.type、.class页面并为每个项目一起显示，即：从谷歌搜索页面搜索框是 .id: lst-ib, .name: q .title: Search .type: text 然后谷歌按钮是 .name: btnK .type : submit .value: Google Search 等。任何帮助都会非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:30:06.613

我建议为此目的使用另一种语言，例如 Ruby 非常擅长它，并且是 VbScripters 的自然升级。也就是说，这是一种如何在 VbScript 中执行此操作的方法。

```
set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
with IE
  .MenuBar = 0
  .ToolBar = 0
  .StatusBar = 0
  .Visible = 1
  .navigate "http://www.google.com"
end with
while IE.busy
  wScript.sleep 400
wend

'html = IE.document.all.tags("html").item(0).outerhtml
wscript.echo IE.document.getElementsByTagName("font").item(0).innerText 
wscript.echo "innerText:" & IE.document.all.tags("title").item(0).innerText
wscript.echo "innerHtml:" & IE.document.all.tags("title").item(0).innerHtml
wscript.echo "outerHtml:" & IE.document.all.tags("title").item(0).outerHtml
IE.quit

'gives
'Google.be aangeboden in: français Deutsch English
'innerText:Google
'innerHtml:Google
'outerHtml:<title>Google</title> 
```

# sql-server - SQL SUM() 条件问题

> ID：16217696
> 
> 赞同：1
> 
> 时间：2013-04-25T14:37:15.710
> 
> 标签：sql-server, group-by, sum

我有一个看起来像这样的表：

```
+----+------+--------+----------+
| ID | Code | OpType | Quantity |
+----+------+--------+----------+
|  0 | A    | IN     |        7 |
|  1 | B    | IN     |        8 |
|  2 | A    | OUT    |        2 |
|  3 | B    | IN     |        7 |
|  4 | B    | OUT    |       12 |
+----+------+--------+----------+ 
```

我想要 SUM(Quantity) 取决于 OpType。当 OpType 为 OUT 时，Quantity 字段应乘以 -1。

查询的结果应该是：

```
Code   IN   OUT   Final
A      7    2     5
B      15   12    3 
```

我试过这个，但它不起作用：

```
SELECT(SELECT SUM(Quantity) FROM Table WHERE OpType = 'IN') AS[IN], (SELECT SUM(Quantity) FROM Table WHERE OpType = 'OUT') AS[OUT], (SELECT SUM(Quantity) FROM Table WHERE OpType = 'IN') - (SELECT SUM(Quantity) FROM Table WHERE OpType = 'OUT') AS[Final]
FROM Table
GROUP BY Code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:44:10.223

SQL Server 具有`PIVOT`功能。

```
SELECT  [Code], [IN], [OUT], [IN] - [OUT] AS [Final]
FROM
        (
            SELECT  [Code], OpType, SUM(Quantity) Quantity
            FROM    TableName
            GROUP   BY [Code], OpType
        ) org
        PIVOT
        (
            MAX(Quantity)
            FOR OpType IN ([IN],[OUT])
        ) pvt 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/63460/1)
*   [TSQL 枢轴](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

输出

```
╔══════╦════╦═════╦═══════╗
║ CODE ║ IN ║ OUT ║ FINAL ║
╠══════╬════╬═════╬═══════╣
║ A    ║  7 ║   2 ║     5 ║
║ B    ║ 15 ║  12 ║     3 ║
╚══════╩════╩═════╩═══════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:52:52.433

我会在每列的 SUM 中使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765%28v=sql.105%29.aspx)语句，以便您只对所需值求和（即，对于 IN 列，仅对 OpType='IN' 的数量求和，对于 OUT 列，仅对 OpType= 的数量求和'出去'）

```
SELECT Code, 
    SUM(CASE WHEN OpType = 'IN' THEN Quantity ELSE 0 END) as [IN],
    SUM(CASE WHEN OpType = 'OUT' THEN Quantity ELSE 0 END) as [OUT],
    SUM(CASE WHEN OpType = 'OUT' THEN -1 * Quantity ELSE Quantity END) as [FINAL]
FROM Table
GROUP BY Code 
```

更新：在对 JW 웃 回答的评论中，您询问了有关在两个日期之间获取 IN、OUT 和 FINAL 总和的问题。下面是一个更新的查询，它将执行此操作。

```
DECLARE @InitialSumDate DATETIME = '4/22/2013', @EndDate DATETIME = '4/23/2013'
SELECT 
    @InitialSumDate as [InitialSumDate], @EndDate as [EndDate],
    Code, 
    SUM(CASE WHEN PurchaseDate <= @InitialSumDate AND OpType = 'OUT' THEN -1 * Quantity WHEN PurchaseDate <= @InitialSumDate AND OpType = 'IN' THEN Quantity ELSE 0 END) as [InitialSum],
    SUM(CASE WHEN PurchaseDate >  @InitialSumDate AND PurchaseDate <= @EndDate AND OpType = 'IN'  THEN Quantity ELSE 0 END) as [IN],
    SUM(CASE WHEN PurchaseDate >  @InitialSumDate AND PurchaseDate <= @EndDate AND OpType = 'OUT' THEN Quantity ELSE 0 END) as [OUT],
    SUM(CASE WHEN OpType = 'OUT' AND PurchaseDate <= @EndDate THEN -1 * Quantity WHEN OpType = 'IN' AND PurchaseDate <= @EndDate THEN Quantity ELSE 0 END) as [FINAL]
FROM #Table
GROUP BY Code 
```

# google-maps - 请求中重复的 Geoxml-V3 图标请求路径

> ID：16217697
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:19.773
> 
> 标签：google-maps, kml, geoxml

我正在尝试将表单 geoxml 迁移到 geoxml-v3 以及谷歌地图 v2 到 v3。我遇到的问题是geoxml-v3。从 geoxml-v3 在客户端生成的图标请求是乱码。例如

```
localhost/app/resources/icon.png 
```

会变成类似的东西

```
localhost/app/resources/app/resources/app/resources/app/resources/icon.png 
```

这些 kml 文件与 geoxml 一起使用并且格式正确。样式图标段是

```
<Style id="off-red">
 <IconStyle>
  <Icon>
   <href>resources/icon.png</href>
  </Icon>
 </IconStyle>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:04:00.210

我发现它与 geoxml-v3 库有关，至少在我想存储自己的标记图标的情况下。有一些代码，第 386 行

```
if (typeof this.url == "string") 
```

它以当前上下文或最后使用的上下文作为图标 url 的前缀。没有仔细研究它。注释掉 if 块将导致正确的请求。

这是一个 hack，但适用于我的要求。

# c# - 使用 ”" 而不是 asp:FileUpload

> ID：16217705
> 
> 赞同：7
> 
> 时间：2013-04-25T14:37:35.040
> 
> 标签：c#, asp.net, html, file-upload

我正在修改现有的 ASP.NET 项目。原作者错误地尝试通过将其可见性设置为隐藏并仅创建两个自定义样式的浏览和保存按钮来创建样式化的 asp:FileUpload。

出于安全原因，IE 不允许这样做。我的策略是尝试使用 type="file" 的输入标签，例如[这个例子](http://htmlcampus.com/style-a-file-browse-button-with-css/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20HTMLCampus%20%28HTML%20Campus%29)。因此，如果我设置输入，例如`<input type="file" ID="inputFile" />` 如何在后面的代码中访问/保存文件，`inputFile.SaveAs("someFile.txt");`？另外（在后面的代码中）我可以做类似的事情`inputFile.HasFile`还是有其他类似的东西？

根据建议，我正在尝试以下方法：

```
 <td>
                Enabled: <asp:CheckBox ID="CheckBox2" runat="server" />    &nbsp;&nbsp;
                <div id="testFileUploader">>
                   <input type="file" id="browserHidden" runat="server" />
                   <div id="browserVisible"><input type="text" id="fileField" /></div>
                </div>
             </td> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T15:15:31.207

因此，您可以根据ASPX 页面的`GUID`at 为将来的上传生成一个随机文件名：`CodeBehind`

```
HttpPostedFile filePosted = Request.Files["uploadFieldNameFromHTML"];

if (filePosted != null && filePosted.ContentLength > 0)
{
    string fileNameApplication = System.IO.Path.GetFileName(filePosted.FileName);
    string fileExtensionApplication = System.IO.Path.GetExtension(fileNameApplication);

    // generating a random guid for a new file at server for the uploaded file
    string newFile = Guid.NewGuid().ToString() + fileExtensionApplication;
    // getting a valid server path to save
    string filePath = System.IO.Path.Combine(Server.MapPath("uploads"), newFile);

    if (fileNameApplication != String.Empty)
    {
        filePosted.SaveAs(filePath);
    }
} 
```

在`Request.Files["uploadFieldNameFromHTML"]`此处设置 HTML 代码中的 ID：

```
<input type='file' id='...' /> 
```

另外，不要忘记`runat="server"`在 ASPX 页面的主窗体中定义，最好在主窗体中设置，不要忘记`enctype="multipart/form-data"`参数`<form>`：

```
<body>
    <form enctype="multipart/form-data" id="form1" runat="server">
        <input type='file' id='uploadFieldNameFromHTML' />
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:43:40.410

将 runat="server" 添加到对象。这样，它将像任何 asp:FileUpload 控件一样在 CodeBehid 上工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T15:11:05.757

如评论所述，您可以将 runat="server" 添加到输入文件标记中。

另一方面，已经有一篇关于你所要求的类似帖子。看一下这个：

[在 ASP.net 中上传文件而不使用 FileUpload 服务器控件](https://stackoverflow.com/questions/569565/uploading-files-in-asp-net-without-using-the-fileupload-server-control)

希望这有帮助

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:48:00.137

```
if(fileUrunResim.HasFile)
    fileUrunResim.SaveAs(MapPath("~/Images/" + fileUrunResim.FileName));

**if you unique filename,**

string extension = Path.GetExtension(fileUrunResim.FileName);

string fileName = Guid.NewGuid().ToString().Substring(0, 25) + extension ;

if(fileUrunResim.HasFile)
    fileUrunResim.SaveAs(MapPath("~/Images/" + filename )); 
```

# javascript - 替换“”（空格）不起作用

> ID：16217706
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:37.043
> 
> 标签：javascript, html

```
<!DOCTYPE html>
<html>
<body>

<p id="demo">Click the button to locate where in the string a specifed value occurs.</p>

<button onclick="myFunction()">Try it</button>

<script>
function myFunction()
{
var a =" picture";
a.replace(" ","");

var n=a.indexOf(" ");
document.getElementById("demo").innerHTML= n+a+n;
}
</script>

</body>
</html> 
```

我想将上面示例中的“图片”中的“”（空格）替换掉

但结果似乎它没有被替换命令替换。

替换后的结果应该是“-1picture-1”，但它是“0 picture0”

图片前面有一个空格。（我使用 .indexOf(" ") 来表示

变量中是否有空格 -1 表示没有）

这是怎么回事？？请指教

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T14:38:47.007

`replace` doesn't modify the string in place, it *returns* a modified string.

```
a = a.replace(" ",""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:39:17.687

Use `String.trim()` to remove trailing spaces.
[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)

In your example,

```
var a = " picture";
a = a.trim();
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:39:33.803

You need to assign the returned value back to `a`

```
var a =" picture";
a = a.replace(" ",""); 
```

**edit:**

Would also like to throw it out there that a `.replace(" ","")` will only work for the first instance of a space, and it may not even be at the beginning of the string. If you are wanting to trim *only* leading *and* trailing spaces, consider this:

```
var a =" picture";
a = a.replace(/^\s+|\s+$/g,""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:41:10.750

我认为这可以很好地工作......

```
return str.replace(/\s+/g, ''); 
```

为什么我投了反对票？？？

```
alert("some #$%%&& person gave me a downvote!!".replace(/\s+/g, '')); 
```

这完全有效！！！！！！！

[http://jsfiddle.net/ncubica/FBxy2/](http://jsfiddle.net/ncubica/FBxy2/)

# batch-file - vmware命令执行批处理文件

> ID：16217709
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:43.033
> 
> 标签：batch-file, vmware, vmware-workstation

```
net use x: "\\vmware-host\Shared Folders\ShareME">>logfile.txt 2>&1
ping -n 11 127.0.0.1 > nul
x:
cd "Firefox18"
call autorun.bat>>logfile.txt 
cd ../
exit 
```

当我通过双击执行上述批处理文件时，会生成 logfile.txt。但是当我使用`vmrun -T ws -gu <Username> -gp <Password> runProgramInGuest <Vm-Path> <path of Batch File to execute>`脚本运行良好时，只有 logfile.txt 没有生成。这仅在 Windows 7 中发生。它适用于 Windows XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:00:53.587

问题解决了我只需要 >>"C:\Users\Ebryx 2\Desktop\logfile.txt" 2>&1 路径的引号似乎适用于 Windows 7。

# shell - 如何在 unix shell 脚本中读取两个特定文本之间的文本

> ID：16217710
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:43.393
> 
> 标签：shell, unix

我想从 unix shell 脚本中的文本文件中读取两个特定单词之间的文本。例如在下面：

```
"My name is Sasuke Uchiha." 
```

我想得到佐助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:27:52.423

这是可以完成的众多方法之一：

`"is"`要在和之间捕获文本`"Uchiha"`：

```
sed -n "s/^.*is \(.*\)Uchiha.*/\1/p" inFile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:39:59.050

我很想添加一个“让我为你搜索一下”链接，但看起来你现在已经很难过了。

[在文件中递归查找字符串/正则表达式匹配的最佳方法是什么？(UNIX)](https://stackoverflow.com/questions/186015/whats-the-best-way-to-find-a-string-regex-match-in-files-recursively-unix)

看看那个。它与您正在寻找的内容相似。正则表达式是匹配字符串等的首选工具。Grep 是在 unix 中从 shell 使用它的最简单方法。

看看这个：[http ://www.robelle.com/smugbook/regexpr.html](http://www.robelle.com/smugbook/regexpr.html)

# c# - 有没有没有引发表单的激活事件的情况？

> ID：16217713
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:57.107
> 
> 标签：c#, winforms, events, raiseevent

我不明白为什么会这样，我认为在显示表单时应该提出 Activated 。事实上，我的表单已将 TopLevel 设置为 false，并且它已添加到另一个表单中。当主窗体显示时，它也是可见的，我可以与它的控件进行交互，但我测试并看到 Activated 没有被提升。

```
public MainForm(){
     InitializeComponent();
     Form child = new Form();
     child.Activated += (s,e) => {
        MessageBox.Show("Activated!");
     };
     child.Size = new Size(200,100);
     child.TopLevel = false;
     child.Show();
     child.Parent = this;
} 
```

运行 MainForm 后，子窗体出现在主窗体中，并且没有显示任何带有消息“已激活！”的 MessageBox。

增加它的额外工作是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:44:52.013

如果第二种形式是第一次出现在屏幕上，您可以使用 Shown 事件。

激活事件仅在表单获得焦点时触发，但不包含第一次显示。但是，如果之前处于活动状态的表单在您的应用程序之外，它不会引发激活事件。我的意思是它仅在查看同一项目的表单时有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:13:54.700

这是我的回答，我注意到只有 Form 有 Activated 事件，其他控件没有，一旦 Form 的 TopLevel 设置为 false，我认为它被视为普通控件，在这种情况下，Activate() 方法就可以了在任何情况下都不会引发任何和 Activated 事件。我认为这就是为什么没有提出 Activated 的原因。

感谢 Kuzgun 提出使用 Shown 的建议，但这主要是解释为什么没有提出 Activated！

这个答案只是我的猜测，甚至关于 Form.Activated 事件的 MSDN 页面也没有提到这一点。不应以这种方式错过它，尤其是在官方文档页面中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-01T14:04:34.423

一旦将 的`TopLevel`属性`Form`设置为，`false`则表单将成为普通控件，因此`Activated()`不会触发事件。

# php - php json数据返回jquery

> ID：16217714
> 
> 赞同：0
> 
> 时间：2013-04-25T14:37:59.753
> 
> 标签：php, jquery, mysql, json

寻找最佳解决方案：

```
$.getJSON("InsertData.php", {fullName:val1, course_id:course_id, occupation:val2}, function(data) {
        $.each(data, function(i, user) {
            //alert(user.aryA.status);
            if(user.aryA.status == 'true'){
                currentPosition = 2;
                checkData();
                nextSlide();
            }else{
                 nextSlide();
            }
        });

    }) 
```

这是php代码：

```
 mysql_select_db("db", $con);

    $Query="SELECT * from table WHERE fullName='".$fullName."' and course_id='".$cid."'";
    $result = mysql_query($Query);
    $totalRecords = mysql_num_rows($result);
    if($totalRecords) {
        while ($row = mysql_fetch_array($result)) {
                $returnData[]=array(    //for Json data array
            'userName' => $row['fullName'],
            'aryA' => array(
                'status' => $row['status']
                )
            );
        }

    }

    if(!$totalRecords) {
        $insertQuery="INSERT INTO table (fullName,course_id,occupation) VALUES ('".addslashes($fullName)."','".addslashes($cid)."','".addslashes($d3)."')";
        $result1 = mysql_query($insertQuery);

    }else{
        if($stat == "true"){$value = 1;}
        }

mysql_close($con);

echo json_encode($returnData); 
```

所以在第一种情况下，当我通过 jquery 访问 php 时，它会将数据保存在数据库中，但会给我错误或长度。因为 $returnData 是空的。如果 $totalRecords 为假，有没有办法通过 json_encode 向我的 jQuery 函数发送 json_encode 来表示没有数据或任何值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:48:01.897

只需设置一个 else 语句，并为您的数组添加一个“成功”键：

```
if($totalRecords){
    while ($row = mysql_fetch_array($result)) {
            $returnData[]=array(    //for Json data array
        'success'=>'true',
        'userName' => $row['fullName'],
        'aryA' => array(
            'status' => $row['status']
            )
        );
    }
}else{
    $returnData = array('success'=>'false');
} 
```

然后检查 jQuery 中“成功”的值。

另外，你真的不应该使用 mysql_*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:47:42.520

```
$returnData = array(); //add this
 $totalRecords = mysql_num_rows($result);
if($totalRecords) {
while ($row = mysql_fetch_array($result)) {
        $returnData[]=array(    //for Json data array
    'userName' => $row['fullName'],
    'aryA' => array(
        'status' => $row['status']
        )
    );
}

}
else
{
$returnData[] = 'no Record'; //add this
} 
```

# ios - AVMutableAudioMixInputParameters setVolume atTime 不能仅与 kCMTimeZero 一起使用

> ID：16217715
> 
> 赞同：1
> 
> 时间：2013-04-25T14:38:01.950
> 
> 标签：ios, objective-c, avplayer

我正在 Xcode 中开发一个 iOS 应用程序。我还是编程新手。我正在尝试设置音轨的音量，同时使用`AVPlayer`. 如果将时间设置为很好，`kCMTimeZero`但我希望它在按下按钮一秒后设置音量。

***不*工作**

```
- (IBAction)maxVolButtonPressed:(id)sender {
    [audioInputParams1 setVolume:1 atTime:time1];
    [self applyAudioMix];
} 
```

**在职的**

```
- (IBAction)minVolButtonPressed:(id)sender {
    [audioInputParams1 setVolume:0 atTime:kCMTimeZero];
    [self applyAudioMix];
} 
```

`atTime`如果我想要一秒钟的延迟，我应该写什么？

回答：好的，所以我想通了。您必须添加当前项目当前所在的时间。我使用时间间隔很小的 setVolumeRampFromStartVolume 而不是 setVolume。由于某种原因，setVolume 淡出到给定的音量我还没有弄清楚为什么。它对我有用：

```
CMTime time1 = CMTimeMake(1000, 1000); //2s
CMTime time2 = CMTimeMake(1001, 1000); //3s
CMTime timeCurrent = [player currentTime];
CMTime time1Added = CMTimeAdd(timeCurrent, time1);
CMTime time2Added = CMTimeAdd(timeCurrent, time2);
CMTimeRange fadeInTimeRange = CMTimeRangeFromTimeToTime(time1Added, time2Added);
[audioInputParams1 setVolumeRampFromStartVolume:0 toEndVolume:1 timeRange:fadeInTimeRange];
[self applyAudioMix]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:54:50.887

你应该这样做：

```
- (IBAction)maxVolButtonPressed:(id)sender {
    [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(setVolume:) userInfo:nil repeats:NO];
}

- (void)setVolume:(id)sender{
    [audioInputParams1 setVolume:1 atTime:kCMTimeZero];
    [self applyAudioMix];
} 
```

在第一种方法中，您说：等待 1 秒钟，然后调用方法 setVolume:。

# magento - Magento产品不保存

> ID：16217727
> 
> 赞同：3
> 
> 时间：2013-04-25T14:38:33.980
> 
> 标签：magento, save, product

我遇到了非常不同的问题。突然在 Magento 上传的产品不再更新。

详细来说，当我们打开要更新的产品并点击保存按钮时，什么也没有发生。它开始突然发生，之前一切正常。

请帮忙，这是个大问题。我不知道该做什么以及要检查哪些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:53:07.300

可能是您错过了一些必须填写的字段。如果您有任何错误要求填写字段，请检查每个选项卡。

或者，会有一些 javascript 错误。检查是否有任何 JS 错误，并在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T08:05:38.477

我发现哪里出错了。

在**js/prototype/validation.js**

管理员产品选项验证使用的这个文件，我已经更改并且没有意识到要检查管理员验证。

像这样的小改动解决了这个问题。

```
if(!admin){
  // put your code for front-end validation
} 
```

谢谢大家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T17:32:43.377

我遇到同样的问题后来到这里。“保存”突然停止在产品页面上工作。我唯一做的就是将prototype.js 从1.7 更新到1.7.1 以支持IE10 b/c 中的fade() 我在缩略图上有一个自定义淡入淡出。

好吧，prototype.js 1.7.1 响应 TypeError: value.gsub is not a function 当您单击保存时。

不得不恢复，因为我不知道如何解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-06T14:56:59.867

如果 magento 配置为使用 elasticsearch 并且 elasticsearch 无法访问，它也会导致此错误

# sql - 如何使用 TIMESTAMP 数据类型减少 Oracle (SQL Plus) 中的列宽度？

> ID：16217728
> 
> 赞同：4
> 
> 时间：2013-04-25T14:38:37.240
> 
> 标签：sql, oracle, timestamp, width, sqlplus

在 SQL Plus 输出中，它占用的空间比它需要的要多得多，我想将它从 50 个字符减少到 20 个。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:36:59.873

`TIMESTAMP`如果将宽度减小到 20，则对于默认值或`TIMESTAMP WITH TIME ZONE`格式将不够宽。发生这种情况时，SQLPlus 将包装该值。

假设表`b`有时间戳列`TS`：

```
COLUMN ts FORMAT A20
SELECT ts FROM b;

TS
--------------------
25-APR-13 11.28.40.1
50000 AM 
```

要进一步缩小宽度，请确定您想要的信息并相应地格式化。[Oracle DateTime 和 Timestamp 格式代码在此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34924)列出。

请注意，SQLPlus 不允许您在`COLUMN`语句中指定日期格式。这就是我在`FORMAT A20`上面使用的原因。如果您删除小数秒并使用 24 小时制而不是 AM/PM 并删除时区，则可以将其变为 19 个字符：

```
COLUMN TSFormatted FORMAT A20
SELECT TO_CHAR(ts, 'MM/DD/YYYY HH24:MI:SS') AS TSFormatted FROM b;

TSFORMATTED
--------------------
04/25/2013 11:28:40 
```

如果您愿意放弃世纪，您可以获得两个小数秒和 20 的精确宽度：

```
COLUMN TSFormatted FORMAT A20
SELECT TO_CHAR(ts, 'MM/DD/YY HH24:MI:SS.FF2') AS TSFormatted from b;

TSFORMATTED
--------------------
04/25/13 11:28:40.15 
```

最后，如果您希望以某种方式自动格式化所有时间戳，请使用`ALTER SESSION`：

```
ALTER SESSION SET NLS_TIMESTAMP_FORMAT = 'MM/DD/YY HH24:MI:SS.FF2';
COLUMN ts FORMAT A20
SELECT ts from b; -- don't need to_char because of the default format

TS
--------------------
04/25/13 11:28:40.15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-10T13:28:49.937

只是对上面 Ed Gibbs 答案的简短扩展。出于调试目的，我将这个简单的 LOGIN.SQL 文件放在一起：

```
alter session set container = XEPDB1;
alter session set time_zone = 'Europe/Budapest';
alter session set nls_date_format='YYYY-MM-DD HH24:MI:SS';
alter session set nls_timestamp_format='YYYY-MM-DD HH24:MI:SS.FF1';
alter session set nls_timestamp_tz_format = 'YYYY-MM-DD HH24:MI:SS.FF1';
set pagesize 9999;
set linesize 9999;
set long 9999;
show linesize pagesize long user;
column added format a22;
column modified format a22;
column deleted format a22;
column localtimestamp format a22;
select localtimestamp from dual; 
```

“添加”、“修改”和“删除”这些名称是我的模式中的常见列名，它们始终包含时间戳值。现在，当我启动 SQL*Plus 时，我看到（中间有几行空行）：

```
SQL*Plus: Release 18.0.0.0.0 - Production on Fri Jul 10 13:25:52 2020
Version 18.4.0.0.0
Copyright (c) 1982, 2018, Oracle.  All rights reserved.
Last Successful login time: Fri Jul 10 2020 13:14:09 +00:00
Connected to:
Oracle Database 18c Express Edition Release 18.0.0.0.0 - Production
Version 18.4.0.0.0
Session altered.
Session altered.
Session altered.
Session altered.
Session altered.
linesize 9999
pagesize 9999
long 9999
USER is "CURRENT_USER"
LOCALTIMESTAMP
----------------------
2020-07-10 15:25:53.2
SQL> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:06:44.507

SUBSTR 函数有时会起作用*，*一旦您转换了时间戳（即 to_CHAR），但在 sqlplus 中指定一个列会给您更多控制：

例如：

列工资格式 $99,990

资源：

[http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch6.htm)

我*有时*会说 substr，因为我已经看到 sqlplus 切断了输出，但仍然将输出填充到定义的列大小。

# wpf - 如何通知项目已从 wpf 中的数据网格中选择并使用 mvvm？

> ID：16217734
> 
> 赞同：0
> 
> 时间：2013-04-25T14:38:56.040
> 
> 标签：wpf, mvvm, mvvm-light

我试图通知从数据网格中选择了一个项目，因为我在从数据网格中选择一个项目时打开了一个模式窗口。我正在模式窗口中编辑选定项目，因此我不想为选定项目启用 RaisedPropertychanged 机制，因为当我尝试修改选定项目时，它会打开另一个模式窗口。我现在正在尝试使用事件触发器来解决此问题，但出现错误。下面是相关代码：

**视图模型：**

```
 public ObservableCollection<Student> sItems {
  get {
    return ssitems;
  }
 set {
   ssitems = value;
   RaisePropertyChanged( "sItems" );
  }
} 
private StudentsInformation studentInformation;
   public StudentsInformation studentInformationObject {
     get {
       return studentInformation;
     }
     set {
       studentInformation = value;
       RaisePropertyChanged( "studentInformationObject" );
     }
   }

public RelayCommand<Student> SelectionChangedCommand {
      get;
      set;
    } 
```

这些代码行在构造函数中：

```
SelectionChangedCommand = new RelayCommand<Student>(
          item => {
            if( item != null ) {
              MessengerInstance.Send<Student>( item, "SelectedStudent" );
            }
          } ); 
```

这是与 datagarid 绑定的集合。

**看法：**

```
 <DataGrid x:Name="dataGrid" Grid.Row="1" Margin="5"
                              IsReadOnly="False"  ColumnHeaderHeight="30"
                              ItemsSource="{Binding Path=sItems}" AutoGenerateColumns="False" 
                              SelectedItem="{Binding Path=SelectedStudentObject, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        <DataGrid.Columns>
                            <!--<DataGridCheckBoxColumn Header="Select" Binding="{Binding Path=myselect, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="False" />-->
                            <DataGridTextColumn Header="Name" Binding="{Binding name}"></DataGridTextColumn>
                            <DataGridTextColumn Header="Enrollment" Binding="{Binding enrollment}"></DataGridTextColumn>
                            <DataGridTextColumn Header="Score" Binding="{Binding score}"></DataGridTextColumn>
                            <DataGridTextColumn Header="Comment" Binding="{Binding comment}"></DataGridTextColumn>
                        </DataGrid.Columns>
                        <i:EventTrigger EventName="SelectionChanged">
                            <cmd:EventToCommand Command="{Binding SelectionChangedCommand}"
                                                CommandParameter="{Binding SelectedItem}" />
                        </i:EventTrigger>
                    </DataGrid> 
```

如果我删除触发器部分，则数据网格会填充所需的数据。如果包含触发代码，那么我会收到以下错误消息：

*在使用 ItemsSource 之前，项目集合必须为空。*

我想知道是否有其他方法可以解决此类问题。我正在使用 MVVM Light 工具包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:47:45.223

该事件触发器应该在其他地方。它应该放在`Interaction.Triggers`

像这样使用它：

```
<DataGrid...>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <cmd:EventToCommand Command="{Binding SelectionChangedCommand}"
                               CommandParameter="{Binding SelectedItem}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</DataGrid> 
```

**更新**

你可能还应该使用

```
<cmd:EventToCommand x:Name="SelectionChanged" 
                        Command="{Binding SelectionChangedCommand}" 
                        PassEventArgsToCommand="True" /> 
```

并在 VM 中修改您的命令。

```
RelayCommand<SelectionChangedEventArgs> SelectionChangedCommand{get; private set;} 
```

# gdb - Determining the value of local variables using gdb in a function in shared library built with -g (gdb says no line number information)

> ID：16217737
> 
> 赞同：0
> 
> 时间：2013-04-25T14:39:16.647
> 
> 标签：gdb

List items 1- 4 are the steps that I did. List item 5 describes the problem List item 6 provides additional information

1.  I have compiled a C source code say c1.c with -g flag.
2.  I have also a dynamic shared library say liba1.so built with -g for all the source files that it has.
3.  I built the executable say exe1 by linking c1.o (c1.c object code) with the liba1.so .
4.  I do gdb exe1\. and am able to step through the sources of c1.c. When c1 calls the shared library, I am also able to *put a breakpoint on a function in the shared library*.

5.  **However, when I try to step through the function, it says that "Single stepping until exit from function foo1 ,which has no line number information" Also it should ordinarily show the value of the parameters passed into the function foo1 but does not do that. This happens for all functions in the shared library including some very big ones so the values cannot be optimized out**

6.  *I did an objdump -t on the shared library AND the executable - it shows the symbol table (the fact that I can set a breakpoint on the function also supports this). Also, I can see the values of the variables used in the file c1.c So what should I do in order to ensure that I can see the values of the local variables inside the shared library. Here are the other arguments that are being used to compile the shared library "-O2 -std=gnu99 -Werror -fno-stack-protector -Wstack-protector --param ssp-buffer-size=1 -g -nostdinc". doing info f and trying to look at memory addresses on the frame also does not give any information.*

I am looking for some suggestion to at least troubleshoot it. Can I know using objdump (or any other utility) if a shared library has line number information.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:54:07.520

> 我正在寻找一些建议来至少解决它。

, 最可能的原因`no line number information`是*实际上*没有行号信息，最可能的原因是您有两份副本`liba1.so`——一份有调试信息，一份没有，而且您正在加载在运行时后者。

第一步：`(gdb) info shared`将*准确*`liba1.so`告诉您加载了哪个。

如果它实际上是您刚刚构建的版本`-g`，您应该验证它确实具有您期望的调试信息。执行此操作的确切命令是特定于平台的（并且您没有告诉您在哪个平台上）。在 ELF 平台上，`objdump -g liba1.so`或者`readelf -w liba1.so`应该可以工作。

`-g`代码没有调试信息的一个常见原因是`-s`链接行上存在 (strip) 标志；确保您的链接线上没有“杂散”标志。除了编译时，某些平台还需要`-g`在链接时使用。

# android - 神秘的 NullPointerException

> ID：16217740
> 
> 赞同：0
> 
> 时间：2013-04-25T14:39:21.520
> 
> 标签：android, android-layout, android-intent, textview

我收到以下空指针异常。每当我点击按钮（我打算启动）。我得到一个 FC 和这个空指针异常。可能是因为使用了那个文本文件吗？

# 日志猫

```
 04-25 20:02:40.762: I/Adreno200-EGLSUB(29671): <ConfigWindowMatch:2081>: Format RGBA_8888.
    04-25 20:02:40.772: D/memalloc(29671): /dev/pmem: Mapped buffer base:0x514e1000 size:3649536 offset:3035136 fd:56
    04-25 20:02:40.982: D/memalloc(29671): /dev/pmem: Mapped buffer base:0x51b08000 size:4325376 offset:3710976 fd:59
    04-25 20:02:41.632: I/Adreno200-EGLSUB(29671): <ConfigWindowMatch:2081>: Format RGBA_8888.
    04-25 20:02:41.632: D/memalloc(29671): /dev/pmem: Mapped buffer base:0x5212e000 size:4939776 offset:4325376 fd:62
    04-25 20:02:41.692: D/memalloc(29671): /dev/pmem: Mapped buffer base:0x52615000 size:5554176 offset:4939776 fd:68
    04-25 20:02:41.712: D/memalloc(29671): /dev/pmem: Unmapping buffer base:0x514e1000 size:3649536 offset:3035136
    04-25 20:02:41.712: D/memalloc(29671): /dev/pmem: Unmapping buffer base:0x51b08000 size:4325376 offset:3710976
    04-25 20:02:42.842: D/memalloc(29671): /dev/pmem: Mapped buffer base:0x513e1000 size:4325376 offset:3710976 fd:53
    04-25 20:02:42.882: W/dalvikvm(29671): threadid=1: thread exiting with uncaught exception (group=0x40dbb9d8)
    04-25 20:02:42.902: E/AndroidRuntime(29671): FATAL EXCEPTION: main
    04-25 20:02:42.902: E/AndroidRuntime(29671): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.dreamgoogle.gihf/com.dreamgoogle.gihf.Stories}: java.lang.NullPointerException
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1884)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1985)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.os.Handler.dispatchMessage(Handler.java:99)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.os.Looper.loop(Looper.java:137)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.ActivityThread.main(ActivityThread.java:4476)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at java.lang.reflect.Method.invokeNative(Native Method)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at java.lang.reflect.Method.invoke(Method.java:511)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:816)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:583)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at dalvik.system.NativeStart.main(Native Method)
    04-25 20:02:42.902: E/AndroidRuntime(29671): Caused by: java.lang.NullPointerException
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.Activity.findViewById(Activity.java:1965)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at com.dreamgoogle.gihf.Stories.<init>(Stories.java:14)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at java.lang.Class.newInstanceImpl(Native Method)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at java.lang.Class.newInstance(Class.java:1319)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.Instrumentation.newActivity(Instrumentation.java:1025)
    04-25 20:02:42.902: E/AndroidRuntime(29671):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1875) 
```

# xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/jobsdes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/sj1" />

</RelativeLayout> 
```

# Java 文件。

```
 public class Stories extends Activity {
        TextView t1 = (TextView) findViewById(R.id.jobsdes);

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_stories);
            MyPagerAdapter adapter = new MyPagerAdapter();
            ViewPager myPager = (ViewPager) findViewById(R.id.pager1);
            myPager.setAdapter(adapter);
            myPager.setCurrentItem(0);

            t1.setText(R.raw.jobs);

        }

        private class MyPagerAdapter extends PagerAdapter {
            public int getCount() {
                return 4;
            }

            public Object instantiateItem(View collection, int position) {
                LayoutInflater inflater = (LayoutInflater) collection.getContext()
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                int resId = 0;
                switch (position) {
                case 0:
                    resId = R.layout.activity_stories;
                    break;
                case 1:
                    resId = R.layout.sto2;
                    break;
                case 2:
                    resId = R.layout.sto3;
                    break;
                case 3:
                    resId = R.layout.sto4;
                    break;
                }
                View view = inflater.inflate(resId, null);
                ((ViewPager) collection).addView(view, 0);
                return view;
            }

            public void destroyItem(View arg0, int arg1, Object arg2) {
                ((ViewPager) arg0).removeView((View) arg2);
            }

            public boolean isViewFromObject(View arg0, Object arg1) {
                return arg0 == ((View) arg1);
            }

            public Parcelable saveState() {
                return null;
            }

        }

    } 
```

这是寻呼机 xml 文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".Stories" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:42:50.297

例外

> 04-25 20:02:42.902：E/AndroidRuntime(29671)：引起：java.lang.NullPointerException 04-25 20:02:42.902：E/AndroidRuntime(29671)：在 android.app.Activity.findViewById(Activity .java:1965)

代码

```
findViewById(R.id.pager1) 
```

XML

```
android:id="@+id/jobsdes" 
```

我会说，您的 findViewbyId 返回零

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:45:54.817

您正在尝试`TextView`在活动中找到它之前的内容：

```
public class Stories extends Activity {
    TextView t1 = (TextView) findViewById(R.id.jobsdes); //RIGHT HERE

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_stories); 
```

您需要在 之后找到它`setContentView`，如下所示：

```
public class Stories extends Activity {
    TextView t1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_stories);
        t1 = (TextView) findViewById(R.id.josdes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T03:01:35.587

在 setcontentview 之后访问 TextView 就可以了。

# .net - How to add complex property EF Code First

> ID：16217750
> 
> 赞同：0
> 
> 时间：2013-04-25T14:39:42.010
> 
> 标签：.net, linq, entity-framework, code-first

I have three simple classes

```
public class Asset
{
    public int ID {get;set;}
    public virtual Category {get;set;}
}

public class Category 
{
    public int ID {get;set;}
}

public class AssetCollection
{
    public int ID {get;set;}
    public virtual ICollection<Asset> Assets {get;set;}

    ??????public bool HasAssetWithCategory(int ID)
    {
    ????????????
    }
} 
```

I want to be able select from context HasAssetWithCategory like this

```
var assets = context.AssetCollections.Where(m => m.HasAssetWithCategory(SomeID)); 
```

I do not have clue even where to start.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:21:20.163

HasAssetCategory 是您已定义的方法，无法转换为 SQL 语句。因此，EntityFramework 无法执行您拥有的查询。相反，你应该试试这个查询，

```
var assets = context.AssetCollections.Where(m => m.Assets.Any(a => a.ID == someID)); 
```

# delphi - Delphi 如何在 TCanvas 上快速绘制二维 TColor 数组？

> ID：16217751
> 
> 赞同：1
> 
> 时间：2013-04-25T14:39:42.540
> 
> 标签：delphi, canvas, graphics, matrix, drawing

我有一个 TColor 的二维数组。而且我还有一个 TCanvas。**我怎样才能比使用for**循环更快地在画布上绘制此颜色图？

例如：

```
type
  T2DAr = array of array of TColor;

var
  ar: T2DAr;
  Form1: TForm; // mainform

function main;
var x, y: integer;
begin
{filling array with colors as a 10x10}

for x := 0 to length(ar)-1 do
for y := 0 to length(ar[x])-1 do
Form1.Canvas.Pixels[x, y] := ar[x, y];
end; 
```

这种方式工作太慢了。我需要一个更快的算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:45:10.923

这已经回答了很多次了。答案是：使用`scanline`s 而不是非常慢的`Pixels`属性。例子：

```
function CreateBitmapReallyFast: TBitmap;
const
  WHITE: TRGBTriple = (rgbtBlue: 255; rgbtGreen: 255; rgbtRed: 255);
  BLACK: TRGBTriple = (rgbtBlue: 0; rgbtGreen: 0; rgbtRed: 0);
var
  y: Integer;
  scanline: PRGBTriple;
  x: Integer;
begin
  result := TBitmap.Create;
  result.SetSize(1920, 1080);
  result.PixelFormat := pf24bit;
  for y := 0 to result.Height - 1 do
  begin
    scanline := result.ScanLine[y];
    for x := 0 to result.Width - 1 do
    begin
      if odd(x) then
        scanline^ := WHITE
      else
        scanline^ := BLACK;
      inc(scanline);
    end;
  end;
end; 
```

更酷：

```
with scanline^ do
begin
  rgbtBlue := Random(255);
  rgbtGreen := Random(255);
  rgbtRed := Random(255);
end; 
```

尝试一下：

```
procedure TForm1.FormPaint(Sender: TObject);
var
  bm: TBitmap;
begin
  bm := CreateBitmapReallyFast;
  try
    Canvas.Draw(0, 0, bm);
  finally
    bm.Free;
  end;
end; 
```

当然，如果你有一个`TRGBTriple`or的（打包的）数组`TRGBQuad`，并且位图的像素格式相同，你可以简单地`Move`将内存中的数据从数组到位图的扫描线。

# django - Get Django sessions on Node.js

> ID：16217752
> 
> 赞同：3
> 
> 时间：2013-04-25T14:39:44.710
> 
> 标签：django, node.js, django-views

I'm trying to add Node.js to my web application in Django to have real time. I'm doing the functionality of "like" as in facebook, when users click "like" AJAX will post the ID of song to domain.com:3000 (Node.js server).

I have the user ID on a session variable, but i don't know how to access to this session variable from Node.js.

Here is my code:

Node.js

```
var express = require('express');

var app = express();

app.use(express.static('./public'));
app.use(express.bodyParser());
app.use(express.cookieParser());

app.get('/', function(req, res){
    res.send("ID user: " + req.session.user_id);
});

app.listen(3000);
console.log("Working under 3000") 
```

Django

```
def auth(request):
    if request.is_ajax() and request.method == 'POST':
        email = request.POST.get('username', '')
        password = request.POST.get('password', '')
        autenti = JayapalBackend()
        auth = autenti.authenticate(email, password)

        if auth is not None:
            id_usuario = Usuario.objects.get(email=email).getId()
            request.session['user_id'] = id_usuario
            return HttpResponse('1')
        else:
            return HttpResponse("-1")
    else:
        return HttpResponse("-1") 
```

Thanks

**EDITED**:

I get this error:

```
TypeError: Cannot read property 'user_id' of undefined 
```

# xml - Junit Ant Test report

> ID：16217754
> 
> 赞同：0
> 
> 时间：2013-04-25T14:39:56.713
> 
> 标签：xml, ant, junit, report

I'm using Junit with Ant to generate a test report the default junit-noframes format. Since I'm testing several different classes in the same package I'd like to see the statistics on the test results for each class. In addition, I'd like to separate the successfull tests in the report.

I've already examinated the xslt file, that may allows me to partially solve the first problem. Still in the xml test report generated by Junit the successfull cases are already regrouped. How can I affect this? Is it possible to change the way Junit stocks the informations in the xml testResult? These datas concerning the individual tests must be somewhere, since I'm clearly able to see them with the Junit plugin in Eclipse.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-23T05:33:45.263

您可以修改 xsl 文件为每一行添加类名。它对我有用。

在 junit-noframes.xsl 中，添加 2 行： 1 这里：

```
...
<!-- method header -->
<xsl:template name="testcase.test.header">
    <tr valign="top">
        <!-- ### THIS LINE ADDED ### -->
        <th>Class</th>
        <!----------------------------->
        <th>Name</th>
        <th>Status</th>
        <th width="80%">Type</th>
        <th nowrap="nowrap">Time(s)</th>
    </tr>
</xsl:template>
... 
```

和这里：

```
...
<xsl:template match="testcase" mode="print.test">
    <tr valign="top">
        <xsl:attribute name="class">
            <xsl:choose>
                <xsl:when test="failure | error">Error</xsl:when>
            </xsl:choose>
        </xsl:attribute>

        <!-- ### THIS LINE ADDED ### -->
        <td><xsl:value-of select="@classname"/></td>
        <!----------------------------->

        <td><xsl:value-of select="@name"/></td>
        <xsl:choose>
            <xsl:when test="failure">
                <td>Failure</td>
                <td><xsl:apply-templates select="failure"/></td>
            </xsl:when>
.... 
```

请记住通过设置“styledir”属性（在 build.xml 文件中）指定修改后的 junit-noframes.xsl 文件所在的文件夹。

```
...
<report todir="${build.test.resultshtml.dir}"
                format="noframes" 
                styledir="${build.resources.dir}"
        />
... 
```

新列将在报告中显示班级名称

[点击查看图片...](https://i.stack.imgur.com/305kS.png)

# string - 如何从整数队列转换为字符串？

> ID：16217757
> 
> 赞同：0
> 
> 时间：2013-04-25T14:39:59.930
> 
> 标签：string, integer, queue

好的，所以我有这个非常简单、非常低效的程序，但是没关系，我唯一想知道的是如何在不更改 ssn1 到 ssn5 的值的情况下将队列的前五个数字打印为零。

例如，我想打印 000001111，而不是 111111111，但仍将这些值存储在队列中。有人可以帮我吗？我只是想隐藏它们。

我正在尝试将队列的整数转换为字符串，创建一个子字符串，然后打印 dummyint 五次，然后打印子字符串。

```
import java.util.*;

public class SSNQueue {
public static void main (String args[]) {

  Scanner scan = new Scanner(System.in);
  Queue<Integer> ssn = new LinkedList<Integer>();

  int Dummyssn = 0;

  System.out.println("Please enter each digit number of SSN");

  System.out.print("Enter digit number 1: ");
  int ssn1 = scan.nextInt();
  System.out.print("Enter digit number 2: ");
  int ssn2 = scan.nextInt();
  System.out.print("Enter digit number 3: ");
  int ssn3 = scan.nextInt();
  System.out.print("Enter digit number 4: ");
  int ssn4 = scan.nextInt();
  System.out.print("Enter digit number 5: ");
  int ssn5 = scan.nextInt();
  System.out.print("Enter digit number 6: ");
  int ssn6 = scan.nextInt();
  System.out.print("Enter digit number 7: ");
  int ssn7 = scan.nextInt();
  System.out.print("Enter digit number 8: ");
  int ssn8 = scan.nextInt();
  System.out.print("Enter digit number 9: ");
  int ssn9 = scan.nextInt();

  ssn.add(ssn1);
  ssn.add(ssn2);
  ssn.add(ssn3);
  ssn.add(ssn4);
  ssn.add(ssn5);
  ssn.add(ssn6);
  ssn.add(ssn7);
  ssn.add(ssn8);
  ssn.add(ssn9);

  Integer.toString(ssn);
  String Subssn = ssn.substring(5);

  System.out.println("The SSN is:" + ssn);
  System.out.println("The last four digits of the SSN are:" + Dummyssn + Dummyssn + Dummyssn + Dummyssn + Dummyssn + Subssn);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:57:53.587

这里有几个问题使您不清楚您要做什么。一方面，您读取多个 int 值（ssn1、ssn2...ssn9），然后将它们添加到队列中。然后调用 Integer.toString(ssn) 。. . 我希望那条线上有一个错误。似乎您想要做的是使用循环从队列中读取值，每次将它们分配给临时字符串变量，然后在临时变量上调用子字符串函数并打印出结果。就像现在一样，您正在调用整个队列中的 Integer.toString(ssn) ，我认为这不会满足您的要求。队列仍然键入整数（队列）。更不用说 toString 方法返回一个值，您应该在调用它时将其读入另一个变量或使用它。

# c# - DynamicLinq C# 在连接中不起作用

> ID：16217759
> 
> 赞同：0
> 
> 时间：2013-04-25T14:40:02.463
> 
> 标签：c#, linq, select, join, dynamic-linq

我在我的 C# 项目中使用 DynamicLinq。

当我使用“order by”、“skip”等进行简单选择时，效果很好。

但是如果你加入restona简单错误：

```
Error   3   Instance argument: cannot convert from 'int?' to 'System.Linq.IQueryable'   J:\C#\ERP\ERP\Helpers\ListagemPadrao.cs 23  25  ERP

Error   2   'int?' does not contain a definition for 'OrderBy' and the best extension method overload 'System.Linq.Dynamic.DynamicQueryable.OrderBy(System.Linq.IQueryable, string, params object[])' has some invalid arguments    J:\C#\ERP\ERP\Helpers\ListagemPadrao.cs 23  25  ERP 
```

SQL工作：

```
var lista =
  from a in db.Usuario.AsQueryable()
      .OrderBy(aOrderna + " " + aOrdenaTipo)
      .Skip(aIniciarNoRegistro)
      .Take(aQtdeRegistro)                    
      select new
      {
          a.UsuarioID,
          a.Nome,
          a.Login,
          a.Email
      }; 
```

SQL 不起作用：

```
var lista =
  from a in db.Usuario.AsQueryable()
  join b in db.UsuarioAcesso.AsQueryable() on a.UsuarioID equals b.UsuarioID 
      .OrderBy(aOrderna + " " + aOrdenaTipo)
      .Skip(aIniciarNoRegistro)
      .Take(aQtdeRegistro)                    
      select new
      {
          a.UsuarioID,
          a.Nome,
          a.Login,
          a.Email
      }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:49:23.410

您是否尝试过将其转换为 int - The int？表示它可以为空，因此它可能不会包含任何扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T16:41:39.437

问题的解决方案是：

```
var lista =
  (from a in db.Usuario.AsQueryable()
  join b in db.UsuarioAcesso.AsQueryable() on a.UsuarioID equals b.UsuarioID   
  select new
  {
      a.UsuarioID,
      a.Nome,
      a.Login,
      a.Email
  })
  .OrderBy(aOrderna + " " + aOrdenaTipo)
  .Skip(aIniciarNoRegistro)
  .Take(aQtdeRegistro); 
```

但不明白为什么它运作良好....来自帮助的tks

# sql - 如何使用“LIKE”运算符作为“SQL”中的列？

> ID：16217760
> 
> 赞同：1
> 
> 时间：2013-04-25T14:40:04.387
> 
> 标签：sql, sql-server-2008

我想将`LIKE`运算符用作列，例如：

```
SELECT name, (name LIKE '%flow%') AS bool1
FROM table1
WHERE ... 
```

并得到这样的结果：

```
name                 bool1
--------------     ----------
over flow              1
stack over flow        1
stack over             0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:41:21.647

```
select name, case when name like '%flow%' then 1 else 0 end as bool1 
from table1 
where... 
```

# javascript - 从 jQuery 对象中提取变量

> ID：16217768
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:40:15.850
> 
> 标签：javascript, jquery, object

我有一个返回以下内容的对象：
`{left: "642px", top: "305px", opacity: "1"}`

我试图将它们分解为三个独立的变量：`var left`、`var top`和`var opacity`

解决这个问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:41:11.827

采用：

```
var data = {left: "642px", top: "305px", opacity: "1"};
var left = data.left,
    top = data.top,
    opacity = data.opacity; 
```

**演示：http:** [//jsfiddle.net/dXxUc/1/](http://jsfiddle.net/dXxUc/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:41:11.690

```
var left = object.left, top = object.top, opacity = object.opacity; 
```

JavaScript（目前）没有像其他一些语言那样有任何花哨的分解分配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T14:42:07.003

这里没有捷径：

```
var left = obj.left,
top = obj.top,
opacity = obj.opacity; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T14:41:38.717

如果此对象被命名`myObject`，您可以使用以下命令检索变量：

```
var left = myObject.left; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T14:42:46.313

这取决于您打算如何使用它们。如果您只是要将它们保存到这些变量中一次并且有一个对象，那么

```
var left = data.left;//or data["left"]
var top = data.top;//or data["top"]
var opacity = data.opacity;//or data["opacity"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T14:46:15.927

如果你在全局范围内，有*一个*捷径可以做到这一点：

```
for (p in o){
    if(o.hasOwnProperty(p)){
        window[p] = o[p];
    }
} 
```

请注意，这不使用`var`，而是将属性添加到`window`对象。对象的属性`window`可以直接在 JS 中全局访问。

# android - Android：第一个活动启动

> ID：16217772
> 
> 赞同：0
> 
> 时间：2013-04-25T14:40:23.483
> 
> 标签：android, user-interface

从今天下午早些时候开始，我一直在关注一个奇怪的行为，我正在放弃理解，但也许有人有想法（是的，我是初学者，有些人可能有想法 ^^）。

情况 ：

MainActivity.java（第一个被调用，这里只关心一个）

```
 public ExpandableListView listClubs;    

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    listClubs = (ExpandableListView) findViewById(R.id.expLstMainClubs);
    AppGlobal.CreateDistricts() ;

    ELVAdapterDistrictsClubs adapter = new ELVAdapterDistrictsClubs(this);      
    listClubs.setAdapter(adapter);  
    } 
```

这是类中唯一的代码。基本上，我使用一个适配器填充 ExpandableList，该适配器依赖于 CreateDistricts() 方法中创建的内容（创建业务对象、包含包含会员的俱乐部、活动等的区域）。

基本上（再次 ^^），一切运行良好，在第一次启动时，ExpList 按预期工作，以及应用程序的其余部分。但是，如果我从 MainActivity 中单击后退按钮并重新运行应用程序，则会发生“奇怪”（至少对我而言）行为：

ExpList 连续加载两次 - 第一个与数据一起加载，工作正常，并且在副本下方（具有相同的 2 个组，即这里是我的示例数据中仅有的两个区），这根本不起作用（如果您尝试扩展它，它会使应用程序崩溃）。

坦率地说，我迷路了 - 我在 [Pause/Stop/Destroy/Start/Resume] 等上尝试了一些东西，但无济于事（因此，这方面还没有做任何事情，没有覆盖，因为它似乎没有带来任何好处）。

由于 onCreate 将在 onDestroy 加载捆绑包之后，它应该加载 ExpList 原样，在这种情况下，“旧”组/子代和实际组/子代之间可能存在冲突（当前，数据是模拟的，但会之后来自远程数据源），我还没有决定最好的“保存”行为是什么，即我是否应该找到一种方法来消除 ExpList onDestroy 以确保它 100% 重新创建（以及如何有人这样做吗？）并从头开始，或者如果我可以按原样使用 ExpList，同时更新其内容，以免丢失先前的选择。为了做到这一点，使事情复杂化可能是无关紧要的，第一个列表不是那么大，而且很快就可以用来达到第二个活动......

无论如何，我怀疑它来自那个部分，销毁和重新运行后的捆绑加载，它是否按原样重新加载 ExpList 然后我添加东西而不是首先删除？我发现令人困惑的是，下一个活动（只需单击 ExpList 的一项即可到达）显示类似的 ExpList（填充所选俱乐部的每月和每月事件），并且在之后不呈现相同的奇怪行为破坏...并且两者在其原始 xml 布局中都有几乎相同的 ExpList 声明，所以...好吧，也许明天早上我会看到曙光，但如果有人有想法，请随意：D

我写的越多，我就越认为我应该首先清除 ExpList 但是......我不知道如何准确。我试过了

```
listClubs.removeViewsInLayout(0, listClubs.getCount()) ; 
```

但它似乎没有做任何事情。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:02:13.063

与 Android 行为无关 - 如果 Districts 的基本 ArrayList 不为空，我*每次*都在重新创建整个 BO 集合......而不是简单地退出该方法，但它提出了另一个问题 - 这个 ArrayList 的状态如何，在我的清单中用作 Application 的子类中声明？我将不得不对此进行一些测试...

# opengl - 在对象上定义法线

> ID：16217777
> 
> 赞同：0
> 
> 时间：2013-04-25T14:40:42.340
> 
> 标签：opengl, opengl-es

我有一个四边形，在我的渲染场景方法中旋转 90 度后，四边形的正面将朝上。我想知道是否要设置法线，应该在旋转之前还是在旋转之后设置法线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:12:44.370

这取决于您如何处理着色器中的法线。如果您将法线变换视为模型视图的转置逆（通常），则法线位于模型局部空间中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:16:09.110

扩展 datenwolf 所说的：法线是在局部空间中定义的。与顶点一起。如果你的四边形前面是向上的，那么你必须为每个顶点定义一个法线

```
 normal=  {0 , 1 , 0 } 
```

然后在顶点着色器中通过一个普通矩阵对其进行变换。

# excel - 每次我在 Excel 中使用验证列表时激活一个宏

> ID：16217780
> 
> 赞同：2
> 
> 时间：2013-04-25T14:40:50.313
> 
> 标签：excel, vba

我有一个选择不同国家的验证列表。每个国家/地区都有不同的卖家，我也必须为他们制作一份验证清单。问题是每次选择不同的国家/地区时，我都必须手动运行宏（使用按钮）。我希望宏在每次使用国家验证列表时运行/激活，而不是手动（按钮）。

我认为不需要我使用的任何代码来解决我的问题。无论如何，我会发布最后一部分。

```
Dim strFormula1 As String

strFormula1 = "=$z$1:" & Worksheets("graficos").Range("z1").End(xlDown).Address()

With Selection.Validation
    .Delete
    .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:=strFormula1
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:50:59.430

**在工作表类模块的Worksheet_Change**事件处理程序中调用宏。

在底部的工作表选项卡上，右键单击并选择*查看代码*。这将打开 VB 编辑器，显示工作表的代码窗格。

在那里，从左上角的对象下拉列表中选择**工作表**，然后从右上角的事件下拉列表中**选择更改。**

在事件处理程序中，粘贴代码以调用您的宏

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-07T10:55:54.753

不确定这是否与您相关，但您是否可以使用 INDIRECT 公式创建验证列表，根据框 1 中的选择而不是使用宏来返回结果？例如：

清单 1 包含英格兰、苏格兰、威尔士和爱尔兰

制作另外 4 个列表，分别称为英格兰、苏格兰、威尔士和爱尔兰，并在每个列表中列出每个国家/地区的相关选项。将每个范围命名为英格兰、苏格兰等...

然后创建新的数据验证列表，源为 =INDIRECT(England) =INDIRECT(Scotland) 等。

抱歉，如果这不是很清楚。我在下面提供了一个汽车修理厂的示例，他们首先从 TYPE 列表中进行选择，第二个列表会根据类型中选择的内容而变化。所有粗体项目都是范围的名称

**类型** ？合金保险杠面板纹理内饰

**合金** ？N/S/F N/S/R O/S/F O/S/R

**保险杠** ？N/S/F 转角 O/S/F 转角 N/S/F 刀片 O/S/F 刀片 前中心 全前 N/S/R 转角 O/S/R 转角 N/S/R 刀片 O/S/ R 插入 后 中心 全 后

**面板** ？N/S 翼 N/S/F 门 N/S/R 门 N/S 四分之一 N/S 车顶导轨 N/S 门槛 N/S 镜盖 N/S/F 门把手 N/S/R 门把手 N/ S/F 车门模具 N/S/R 车门模具 O/S 机翼 O/S/F 车门 O/S/R 车门 O/S 四分之一 O/S 车顶导轨 O/S 窗台 O/S 后视镜盖 O/S/ F 车门把手 O/S/R 车门把手 O/S/F 车门成型 O/S/R 车门成型 发动机罩 尾门 车顶 全抛光

**纹理** ？N/S/F 保险杠拐角 O/S/F 保险杠拐角 N/S/F 保险杠插件 O/S/F 保险杠插件 前保险杠中心 全前保险杠 N/S/R 保险杠拐角 O/S/R 保险杠拐角 N/ S/R 保险杠嵌件 O/S/R 保险杠嵌件 后保险杠中心 全后保险杠 N/S 后视镜盖 N/S 成型 O/S 后视镜盖 O/S 成型

**内饰** ？N/S/F 座椅 O/S/F 座椅 N/S/R 座椅 O/S/R 座椅 N/S/F 地毯 O/S/F 地毯 N/S/R 地毯 O/S/R 地毯 仪表板屏幕芯片

# cloudbees - SendGrid 的身份验证问题

> ID：16217781
> 
> 赞同：2
> 
> 时间：2013-04-25T14:40:51.073
> 
> 标签：cloudbees

我通过 Cloudbees 注册了 Sendgrid。我正在尝试通过具有以下属性的 sendgrid SMTP API 发送电子邮件：

```
 port=587 
 host=smtp.sendgrid.net 
 username=[username generated by cloudbees, cloudbees_[myid] ]
 password=[the password i login to cloudbees grandcentral] 
```

并收到以下异常。

```
Caused by: javax.mail.AuthenticationFailedException: 535 Authentication failed: Bad username / password
at com.sun.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:823) 
at com.sun.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:756) 
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:673) 
at javax.mail.Service.connect(Service.java:295) 
at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:389) 
```

... 38 更多

密码应该是什么？用户名错了吗？

提前致谢， 艾尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T05:00:48.620

不要使用您的 cloudbees 凭据连接到 sendgrid，而是使用运行时注入的凭据（阅读[http://wiki.cloudbees.com/bin/view/RUN/SendGrid](http://wiki.cloudbees.com/bin/view/RUN/SendGrid)）。您还应该使用资源绑定将 Sendgrid 作为 JNDI JavaMail 会话直接注入，因此您的设置更加简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T14:11:46.497

您使用错误的凭据登录。Cloudbees 将您的 SendGrid 用户名和密码存储在环境变量中。按如下方式访问它们：

```
host = System.getProperty("SENDGRID_SMTP_HOST");
username = System.getProperty("SENDGRID_USERNAME");
password = System.getProperty("SENDGRID_PASSWORD"); 
```

# java - 使用 Jbuttons 增加 int 以与数组一起使用

> ID：16217783
> 
> 赞同：0
> 
> 时间：2013-04-25T14:40:52.473
> 
> 标签：java, swing, int, jbutton, increment

[http://pastebin.com/Dh4jWecK](http://pastebin.com/Dh4jWecK)

该程序应该在每次按下数字按钮时将该数字保存到数组中，但是我用来指向数组中下一个单元格的计数器似乎仅在按下相同按钮两次时才会更新。

例如，如果在键盘中输入 121323311，它会为 arrayCount 打印 1 1 2 1 2 2 3 3 4。

编辑：我的 buildGUI() 方法中的原始代码是：

```
JPanel buttons = new JPanel();
buttons.setLayout(new GridLayout(0,3));

JButton one = new JButton("1");
ButtonEventHandler bl1 = new ButtonEventHandler();
one.addActionListener(bl1);

JButton two = new JButton("2");
ButtonEventHandler bl2 = new ButtonEventHandler();
two.addActionListener(bl2); 
```

对于每个按钮，依此类推，我现在将其更改为：

```
JPanel buttons = new JPanel();
ButtonEventHandler bl = new ButtonEventHandler();
buttons.setLayout(new GridLayout(0,3));

JButton one = new JButton("1");
one.addActionListener(bl);

JButton two = new JButton("2");
two.addActionListener(bl); 
```

它有效。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:49:00.517

似乎您有多个实例来`ButtonEventHandler`收听您的各个按钮。出于您的目的，您**只需要一个**`ButtonEventHandler`监听**所有**按钮的实例 。

# php - MongoDB PHP OOP - 非对象的错误属性

> ID：16217789
> 
> 赞同：1
> 
> 时间：2013-04-25T14:41:04.480
> 
> 标签：php, mongodb

我正在尝试使用 OOP PHP 访问我的 mongodb 集合。然而在页面上它什么也没返回，但是当我查看我的 apache 错误日志时，它指出

> PHP 注意：试图在第 22 行的 main.php 中获取非对象的属性

这是我正在使用的代码：db.php

```
class db {
    static $db = NULL;

    static function getMongoCon()
    {
        if (self::$db === null)
        {
            try {
                $m = new Mongo('mongodb://{user}:{password}@{host}:{port}/{database}');

            } catch (MongoConnectionException $e) {
                die('Failed to connect to MongoDB '.$e->getMessage());
            }
            self::$db = $m;
        }
            else
        {
            return self::$db;
        }
    }
   } 
```

主文件

```
//load db files
require_once('db.php');

class test{
   public function __construct() {
       echo $this->output();
   } 
   public function output() {
       $con=db::getMongoCon();
       $db=$con->database;
       $test=$db->collection;
       $n=$test->find();
       print_r($n);
   } 
}

new test(); 
```

这一切都使用过程代码工作，我也能够在这种方法中插入数据 - 所以它应该工作（出于明显的安全原因，我在这里删除了数据库详细信息）。

注意：我已阅读[此](https://stackoverflow.com/questions/9990799/how-to-connect-to-mongodb-from-another-php-class)内容，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:46:02.897

这是一个非常简单的错误。您正在使用工厂模式，但第一次调用该`getMongoCon`方法时，它将返回 null：

```
class Db
{//convention: Upper-Case classes
    private static $_db = null;//using this pattern a public static is a bad idea
    public static function getMongoCon()
    {//^^ best specify public/private/protected
        if (self::$db === null)
        {//first time called: this is true
            try {
                //I'd assign immediatly here, but hey...
                self::$db = new Mongo('mongodb://{user}:{password}@{host}:{port}/{database}');
                $m = new Mongo('mongodb://{user}:{password}@{host}:{port}/{database}');
            }
            catch (MongoConnectionException $e)
            {
                die('Failed to connect to MongoDB '.$e->getMessage());
            }
            self::$db = $m;
        }
        //!!leave out else to fix!!
        return self::$db;
    }
} 
```

正如你所看到的，我所做的只是忽略了 else，不管它的价值`self::$db` *是*什么，你都必须返回它。但如果它*为*空，您将永远无法进入`else`包含 return 语句的分支。该阻止
也没有*真正的*原因。`throw-catch`您显然依靠该数据库连接来使您的代码工作，如果它不只是，没有备份 AFAIK，所以让它抛出（并停止）。

为了完整起见，以下是我编写上述代码的方式：

```
class Db
{
    private static $_db = null;
    public static function getMongoCon($new = false)
    {//allow for another connection, you never know...
        if (self::$_db === null)
        {
            self::$_db = new Mongo('mongodb://{user}:{password}@{host}:{port}/{database}');
        }
        if (true === !!$new)
        {
            return new Mongo('mongodb://{user}:{password}@{host}:{port}/{database}');
        }
        return self::$_db;
        //or, short 'n messy:
        return (!$new ? self::$_db : new Mongo('mongodb://{user}:{password}@{host}:{port}/{database}'));
    }
} 
```

# jquery - 单击按钮后我的 cookie 被重置

> ID：16217790
> 
> 赞同：0
> 
> 时间：2013-04-25T14:41:05.000
> 
> 标签：jquery, cookies, joomla

我有一个 joomla 网站，我正在使用 rsform 组件创建一个多页表单。在提交表单之前，我将所有输入字段值保存在 cookie 中，以防用户决定他们无法完成填写表单。因此，如果用户返回，我有一个函数将获取 cookie 并遍历表单并使用存储在 cookie 中的值填充表单字段。我可以创建和读取 cookie，但无法重新填充表单。这是流程。

1.  用户访问网站，网站检查他们是否在机器上存储了 cookie，如果没有创建。
2.  当用户单击按钮转到下一个表单视图时，cookie 会被填充，当时我采用表单并从中创建一个 json 字符串化序列化数组并将其传递给要存储的 cookie。

但我注意到，直到我大约三个表单视图深度时，cookie 才会填充值。例如，如果我填写前两个文本区域并单击下一步按钮进入下一个表单视图，在控制台中我会看到 cookie 密钥对，但值是空的。但是，如果我填写下一个 textarea 并单击下一个按钮，我可以在控制台中看到前两个 textarea 的值，但看不到我刚刚填写的 textarea。我希望你们能明白我想说什么。我已经在这几个星期了，我无法弄清楚，所以非常感谢任何帮助。这是[http://hearwithyourheartusa.com/index.php/share-your-story](http://hearwithyourheartusa.com/index.php/share-your-story)表单的链接。可能更容易看到我想说什么，而不是试图理解我刚刚输入的内容。

**编辑** 这是我用来设置和获取 cookie 的代码以及应该使用 ccokie 的值填充表单的代码。我也有一个 jsfiddle，但它拒绝设置 cookie，但如果你想试一试，这里是链接[http://jsfiddle.net/Uqj4x/](http://jsfiddle.net/Uqj4x/)

```
function createCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)===' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function string2form($form, serializedStr) {
    var fields = JSON.parse(serializedStr);
    for (var i = 0; i < fields.length; i++) {
        var controlName = fields[i].name;
        var controlValue = fields[i].value;     
        $form.find("[name='+ controlName +']").attr('value',controlValue);
        //document.getElementsByName(controlName).value = controlValue;
        //console.log('field name='+controlName+' field value='+controlValue);
    }
        console.log('form values are - '+JSON.stringify(jQuery('#userForm').serializeArray()));
        var cookie = readCookie('storyCookie');
        console.log('the cookie values are '+cookie);
}
      jQuery('#userForm input:button').click(function() {
    // jQuery.ajax({
        // cache: false,
        // type: 'POST',
        // url: 'http://hearwithyourheartusa.com/templates/jsn_boot_pro/customPHP/ajaxcookie.php',
        // data: JSON.stringify(jQuery('#userForm').serializeArray()),
        // contentType:"application/json; charset=utf-8",
        // dataType: 'json',
        // success: function(data){
            // alert(data);
        // }
    // });
    console.log(id);
    createCookie('storyCookie',JSON.stringify(jQuery('#userForm').serializeArray()),365);
    var cookie = readCookie('storyCookie');
    console.log('the cookie is '+cookie);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:56:44.963

我尝试填写表格，但没有设置任何 cookie。我也找不到保存 cookie 的代码（它应该在 rsfp_changePage 中，对吗？）

无论如何，您是否在将来设置了cookie过期时间？

# asp.net-mvc-4 - npgsql 架构“dbo”不存在

> ID：16217794
> 
> 赞同：6
> 
> 时间：2013-04-25T14:41:17.070
> 
> 标签：asp.net-mvc-4, dbcontext, npgsql

我有一个类似于[Entity Framework 5.0 PostgreSQL (Npgsql) 默认连接工厂的问题](https://stackoverflow.com/questions/14690567/entity-framework-5-0-postgresql-npgsql-default-connection-factory)

我在 app.config 中声明了 Npgsql：

```
<connectionStrings>
    <add name="monDbContexte" 
         connectionString="Server=127.0.0.1;Port=5432;Database=ma_datab_db;User Id=postgres;Password=root;" 
     providerName="Npgsql" />
  </connectionStrings>
  <!-- le factory provider -->
  <system.data>
    <DbProviderFactories>
      <add name="Npgsql Data Provider" 
           invariant="Npgsql" 
           support="FF" 
           description=".Net Framework Data Provider for Postgresql Server" 
           type="Npgsql.NpgsqlFactory, Npgsql" />
    </DbProviderFactories>
  </system.data>
</configuration> 
```

我的上下文提供者类：

```
public class ContextDB: DbContext
{
    public DbSet<Personne> Personnes { get; set; }

    public ContextDB()
        : base("monDbContexte")
    {
    }
} 
```

我的“人”类：

[Table("personnes", Schema = "public")] public class Personne { [Key] [Column("id_personne")] [Display(Name="Identifiant")] public int id { get; 放; }

```
 [Column("nom")]
    [Display(Name = "Nom")]
    [Required(ErrorMessage = "Merci de saisir le nom.")]
    public string Nom { get; set; }

    [Column("prenom")]
    [Display(Name = "Prénom")]
    [Required(ErrorMessage = "Merci de saisir le prénom.")]
    public string Prenom { get; set; }
...
...
} 
```

在我的控制器动作中，我做了这样的事情：

```
 using (var context = new ContextDB())
            {
                // *** here i have an exception...
                var personnes = from p in context.Personnes
                              where p.Nom.StartsWith("m")
                              orderby p.Nom
                              select new { p.Nom, p.Prenom };

                foreach (var une_personne in personnes)
                {
                    Console.WriteLine(une_personne.Nom + " " + une_personne.Prenom);
                } 
```

在此之后我有一个这样的例外：

```
ERROR: schema "dbo" does not exist 
```

这是一个 NpgsqlException

[法语]
ERREUR: 3F000: le schéma « dbo » n'existe pas

我不明白这有什么问题

编辑：

这是例外：（
对不起，它是法语）

PS：我在“ **C:\projects\Npgsql2** ”中没有项目，并且在我当前的项目中没有类似的路径，所以这是什么？

```
L'exception Npgsql.NpgsqlException n'a pas été gérée par le code utilisateur
  HResult=-2147467259
  Message=ERREUR: 3F000: le schéma « dbo » n'existe pas
  Source=Npgsql
  ErrorCode=-2147467259
  BaseMessage=le schéma « dbo » n'existe pas
  Code=3F000
  Detail=""
  ErrorSql=SELECT "GroupBy1"."A1" AS "C1" FROM (SELECT CAST (count(1) AS int4) AS "A1" FROM "dbo"."__MigrationHistory" AS "Extent1Group") AS "GroupBy1"
  File=src\backend\catalog\namespace.c
  Hint=""
  Line=2826
  Position=82
  Routine=get_namespace_oid
  Severity=ERREUR
  Where=""
  StackTrace:
       à Npgsql.NpgsqlState.<ProcessBackendResponses_Ver_3>d__a.MoveNext() dans C:\projects\Npgsql2\src\Npgsql\NpgsqlState.cs:ligne 850
       à Npgsql.ForwardsOnlyDataReader.GetNextResponseObject() dans C:\projects\Npgsql2\src\Npgsql\NpgsqlDataReader.cs:ligne 1173
       à Npgsql.ForwardsOnlyDataReader.GetNextRowDescription() dans C:\projects\Npgsql2\src\Npgsql\NpgsqlDataReader.cs:ligne 1191
       à Npgsql.ForwardsOnlyDataReader.NextResult() dans C:\projects\Npgsql2\src\Npgsql\NpgsqlDataReader.cs:ligne 1377
       à Npgsql.ForwardsOnlyDataReader..ctor(IEnumerable`1 dataEnumeration, CommandBehavior behavior, NpgsqlCommand command, NotificationThreadBlock threadBlock, Boolean synchOnReadError) dans C:\projects\Npgsql2\src\Npgsql\NpgsqlDataReader.cs:ligne 1040
       à Npgsql.NpgsqlCommand.GetReader(CommandBehavior cb) dans C:\projects\Npgsql2\src\Npgsql\NpgsqlCommand.cs:ligne 611
       à Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior cb) dans C:\projects\Npgsql2\src\Npgsql\NpgsqlCommand.cs:ligne 588
       à Npgsql.NpgsqlCommand.ExecuteDbDataReader(CommandBehavior behavior) dans C:\projects\Npgsql2\src\Npgsql\NpgsqlCommand.cs:ligne 538
       à System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
       à System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-14T22:02:34.737

似乎 EF 使用 dbo 作为数据库的默认架构。您需要将其更改为“public”，这是 Postgresql 的默认架构。

您可以通过导入命名空间来使用它：

```
using System.ComponentModel.DataAnnotations; 
```

并注释您的类以使用不同的模式：

```
[Table("mytable", Schema = "public")]
Class test {...} 
```

有关更多信息，请查看我关于 EF 和 Npgsql 的帖子：http: [//fxjr.blogspot.com/2013/06/npgsql-code-first-entity-framework-431.html](http://fxjr.blogspot.com/2013/06/npgsql-code-first-entity-framework-431.html)

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-06T10:27:23.547

我使用 [了 EntityFramework6 6.2.0](https://www.nuget.org/packages/EntityFramework/)、 [EntityFramework6.Npgsql v3.2.0](https://www.nuget.org/packages/EntityFramework6.Npgsql/)和[Npgsql 4.0.2](https://www.nuget.org/packages/Npgsql/)

在您的 Context 类上添加`modelBuilder.HasDefaultSchema("public");`函数`OnModelCreating`。

例如;

```
public class ContextDB: DbContext
{
    public DbSet<Personne> Personnes { get; set; }

    public ContextDB()
        : base("monDbContexte")
    {
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.HasDefaultSchema("public");
        base.OnModelCreating(modelBuilder);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T12:45:54.543

我的解决方案：

```
public class PostgisDbContext : DbContext
{
    public PostgisDbContext() : base("Postgis")
    {
        //begin
        try
        {
            this.Database.Initialize(false); issue
        }
        catch (Exception)
        {}
        //end
    }
} 
```

它可能不完美，但它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T21:27:21.803

我有同样的问题。不知道为什么，但是当我没有使用方法时`Database.SetInitializer`，`Application_Start()`它就很好。所以：

```
//Database.SetInitializer<ContextDB>(new ContextDBInitializer()); 
```

# java - 如何自定义 JLabel 缩写文本

> ID：16217798
> 
> 赞同：0
> 
> 时间：2013-04-25T14:41:31.683
> 
> 标签：java, jlabel

当标签中的文本太长时，JLabel 将其缩写并在末尾添加 ...。如何自定义此文本？

我有缩写为长文本的方法，现在我不知道如何将它传递给 JLabel：

```
public static String abbreviateMiddle(String str, String middle, int length, int lengthSuffix) {
    if (StringUtils.isEmpty(str) || StringUtils.isEmpty(middle)) {
        return str;
    }

    if (length >= str.length() || length < (middle.length() + 2) || lengthSuffix > length
            || str.length() < lengthSuffix || length - middle.length() < lengthSuffix) {
        return str;
    }

    int targetSting = length - middle.length();
    int endOffset = str.length() - lengthSuffix;
    int startOffset = targetSting - lengthSuffix;

    StrBuilder builder = new StrBuilder(length);
    builder.append(str.substring(0, startOffset));
    builder.append(middle);
    builder.append(str.substring(endOffset));

    return builder.toString();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T00:24:05.090

如此处所示[，](https://stackoverflow.com/a/3597688/230513)标签的 UI 委托根据需要添加省略号`layoutCL()`。调整框架大小以设置效果。您可以拦截结果以返回`String`您喜欢的任何内容。

# git - Git rebase 更改作者？

> ID：16217801
> 
> 赞同：61
> 
> 时间：2013-04-25T14:41:36.860
> 
> 标签：git

所以我愚蠢地在没有为 git 配置的机器上进行了 3 次提交（没有作者或电子邮件），我想将这 3 次提交（没有被推送）的作者更改为他们应该的样子。

我知道`git commit --amend`可以改变作者，但我怎么能做到3？我知道变基可以改变消息。有没有办法换作者？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-25T15:02:13.400

您可以使用交互式变基。这篇文章的答案给了你一个例子： [如何更改一个特定提交的提交作者？](https://stackoverflow.com/questions/3042437/change-commit-author-at-one-specific-commit).

特别是，您可以执行以下操作来更改一个特定的提交：

`git commit --amend --author="Author Name <email@address.com>" --no-edit`

作者要求在特定提交时更改作者，但如果`edit`您希望更改所有提交，则可以使用交互式变基来更改多个提交的作者。

其他与交互式变基相关的潜在有用技术可以在 Pro Git 书籍 [http://git-scm.com/book/en/Git-Tools-Rewriting-History](http://git-scm.com/book/en/Git-Tools-Rewriting-History)中找到，包括压缩、重新排序、编辑消息等。

# python - XML中的python suds错误

> ID：16217802
> 
> 赞同：1
> 
> 时间：2013-04-25T14:41:37.603
> 
> 标签：python, soap, suds

我尝试了几个小时从 Soap Webservice 接收数据。

这是我的代码：

```
from suds.client import Client
from suds import WebFault

WSDL_URL = 'gatewaywebservice.asmx?wsdl'
client = Client(WSDL_URL)

checkIfExists = client.factory.create('checkIfExists')
checkIfExists.SessionID = ''
checkIfExists.UserID = 'ttester@email.com'
try:
   response = client.service.CustomerService(checkIfExists)
   #print response
   if response.Error:
      print response.Error
   else:
      pass
except WebFault, e:
  print e
print client.last_sent()
print client.last_received() 
```

这是我发送的：

```
<SOAP-ENV:Envelope xmlns:ns0="asdf"                                                xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <ns1:Body>
      <ns0:CustomerService>
         <ns0:CustomerService>
            <ns0:SessionID></ns0:SessionID>
            <ns0:UserID>ttester@email.com</ns0:UserID>
         </ns0:CustomerService>
      </ns0:CustomerService>
   </ns1:Body>
</SOAP-ENV:Envelope> 
```

这就是网络服务器所期望的：

```
<?xml version="1.0" encoding="UTF-8"?>
<GATEWAY xmlns="urn:Software-com:Gateway:v7-00">
<CustomerService>
    <checkIfExists>
        <SessionID/>
        <UserID>test</UserID>
    </checkIfExists>
</CustomerService>
</GATEWAY> 
```

如何更新我的代码以发送有效请求？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T20:04:08.800

您可以实现一个 Suds 插件以在发送 XML 之前对其进行修改。

在下面的示例中，`<SOAP-ENV:Envelope>`修改了标记以匹配网络服务器的期望：

```
from suds.client import Client
from suds.plugin import MessagePlugin

class MyPlugin(MessagePlugin):
    def marshalled(self, context):
        envelope = context.envelope
        envelope.name = 'GATEWAY'
        envelope.setPrefix(None)
        envelope.nsprefixes = {'xmlns' : 'urn:Software-com:Gateway:v7-00'}
        # and so on...
        # envelope[0] is the Header tag, envelope[1] the Body tag
        # you can use "print context.envelope" to view the modified XML

client = Client(WSDL_URL, plugins=[MyPlugin()]) 
```

您必须完成该`marshalled`方法才能完全转换 XML。但在此之前，请检查您是否拥有正确的 WSDL 文件，正如@Martijn Pieters 所说。

# ruby-on-rails-3.2 - Redmine 2.3 相对 url 根不适用于 Apache mod_proxy

> ID：16217804
> 
> 赞同：2
> 
> 时间：2013-04-25T14:41:40.673
> 
> 标签：ruby-on-rails-3.2, apache2, redmine, mod-proxy, mod-proxy-balancer

我目前正在尝试从 Redmine 1.4（基于 Rails 2.3）升级到 Redmine 2.3（Rails 3.2）。我被迫将 Apache 与 mod_proxy 和代理平衡器一起使用，因此任何关于乘客的讨论都已结束。我正在尝试在 sub-uri ( [https://mysite.com/redmine](https://mysite.com/redmine) ) 上部署 Redmine。当前的 Apache 配置如下：

```
ProxyPass /redmine balancer://redmine_cluster
ProxyPassReverse /redmine balancer://redmine_cluster

<Proxy balancer://redmine_cluster>
  Order allow,deny
  Allow from all
  BalancerMember http://127.0.0.1:9000
  BalancerMember http://127.0.0.1:9001
  BalancerMember http://127.0.0.1:9002
</Proxy> 
```

我曾经能够使用 Redmine::Utils.relative_url_root="/redmine" 来处理 url_for 和 link_to，但这不再有效。

我尝试了以下方法：

1.  编辑 config.ru

    映射 ActionController::Base.config.relative_url_root || "/" 运行 RedmineApp::Application end

2.  运行rails：RAILS_RELATIVE_URL_ROOT='/redmine' script/rails s -p 9000

3.  添加 config.action_controller.relative_url_root = "/forge" 到 application.rb

我无法弄清楚需要做什么。任何帮助都会很棒。谢谢你。

# javascript - JavaScript - 如何为其他浏览器添加对 document.all 的支持？

> ID：16217805
> 
> 赞同：0
> 
> 时间：2013-04-25T14:41:42.427
> 
> 标签：javascript

我有一堆旧的 Javascript 代码，在哪里`document.all`使用。所以现在，我需要找到一种方法来`document.all`替换`document.getElementById`. 有什么我可以做的封装`document.all`，所以它会调用第二个函数吗？还是我需要编辑所有文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:47:16.823

```
if (!document.all) {
    document.constructor.prototype.__defineGetter__('all', function() { 
        return document.getElementsByTagName('*'); 
    }); 
} 
```

# c - 3d 数组作为函数参数

> ID：16217808
> 
> 赞同：0
> 
> 时间：2013-04-25T14:41:50.000
> 
> 标签：c, arguments, multidimensional-array

我有一个将二维数组作为参数的函数。然后我有一个 3d 数组，例如`temp[5][100][100]`. 我想将此数组的 2d 部分传递给函数。我怎样才能做到这一点？

```
int inteference_sets(int array[][],int array_size,int max_channel){
     //function codes
}
int main(){
    int k;

    int temp[5][100][100];
    for(k=1;k<=4;k++){
       interference_sets(temp[k], , ) //this is how the program intends to work
    }
 } 
```

是否可以？如果是，那么如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:55:15.373

```
#define DIM1 100
#define DIM2 100

int inteference_sets(int (*array)[DIM2], int array_size, int max_channel)
{
     int row, col;

     for( row = 0; row < array_size; row++ )
     {
         for( col = 0; col < DIM2; col++ )
         {
             int value = array[row][col];
             //function codes
         }
     }
} 

int main()
{
    int k;

    int temp[5][DIM1][DIM2];

    for(k=1;k<=4;k++)
    {
       interference_sets(temp[k], DIM1, ) //this is how the program intends to work
    }
 } 
```

# postgresql - 在 Squeryl 中使用聚合连接多个表

> ID：16217809
> 
> 赞同：1
> 
> 时间：2013-04-25T14:41:54.823
> 
> 标签：postgresql, scala, orm, squeryl

我正在尝试将卡片与零件连接起来，然后将总库存值加入零件（某些零件没有库存行）。

我有以下我认为可行的..

```
def stockPerBase = from(stock)(s => groupBy(s.base) compute(sum(s.quantity)))
def allCardsWithStock = 
    join(cards, parts, stockPerBase.leftOuter)((c,p,s) =>
        on(c.partId === p.id, p.base === s.map(_.key))  
        select(c, p, s.measures)) 
```

但是我收到以下错误：

```
too many arguments for method on: (table: org.squeryl.Table[A])(declarations: A => Seq[org.squeryl.dsl.ast.BaseColumnAttributeAssignment])Unit
[error] on(c.partId === p.id, p.base === s.map(_.key)) 
```

非常感谢有关如何进行此类查询的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:22:45.690

该`select`子句应`on`位于查询中的之前。尝试颠倒这两个子句的顺序，它应该可以工作。

# c - 在 C 中出错，控制到达非 void 函数的末尾

> ID：16217813
> 
> 赞同：0
> 
> 时间：2013-04-25T14:42:02.527
> 
> 标签：c, compiler-errors, return, warnings, compiler-warnings

考虑以下函数：

```
off_t
func (const struct inode *inode)
{
  off_t length = 0;
  read_cache (&length, inode->sector, offsetof (struct inode_disk, length), sizeof (off_t));
  return length;
} 
```

我收到一个错误和一个警告：

```
error: expected declaration or statement at end of input
warning: control reaches end of non-void function [-Wreturn-type] 
```

错误和警告都指向的行是控制函数右括号的最后一行。

当我搜索时，我发现当函数的返回类型为非 void 时出现此错误，并且我们没有返回任何内容。但这里不是这样。

请帮忙 ！

编辑：

以下包含该函数上方的函数以及源代码中出现的该函数：

```
/* Re-enables writes to INODE.
   Must be called once by each inode opener who has called
   inode_deny_write() on the inode, before closing the inode. */
void
inode_allow_write (struct inode *inode) 
{
  ASSERT (inode->deny_write_cnt > 0);
  ASSERT (inode->deny_write_cnt <= inode->open_cnt);
  inode->deny_write_cnt--;
}

/* Returns the length, in bytes, of INODE's data. */
off_t
inode_length (const struct inode *inode)
{
  off_t length = 0;
  read_cache (&length, inode->sector, offsetof (struct inode_disk, length), sizeof (off_t));
  return length;
} 
```

我不认为我在它上面的函数中缺少一些花括号等。

# java - 如何将列表中的位置绑定到该元素的属性？

> ID：16217814
> 
> 赞同：3
> 
> 时间：2013-04-25T14:42:03.573
> 
> 标签：java, javafx-2, bind, observablelist

我有一个`ObservableList<MyElement> list = FXCollections.observableArrayList();`

```
public class MyElement
{
  private IntegerProperty position;//with getter
  //[...]

  //somewhere in the constructor taking the list as argument
  position.bind(list.indexOf(this));
} 
```

现在我想将 MyElement.position 绑定到列表中的实际位置，即如果列表中的位置发生变化（例如在 GUI 中拖放或其他任何东西），我希望位置属性能够自动更新。

这可能吗？我可以在这些值之间进行双向绑定吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T13:20:53.597

我不知道我是否正确理解了您的问题，但我会尽力回答:-)。

问题是，一旦 ObservableList (javafx.collections) 对象不存储某种“选定”索引状态，我们为什么要绑定另一个整数呢？

我认为，在这种情况下，您的代码应该负责存储“选定”索引状态并将其公开给客户端代码。如果这是你要找的，我建议你有三个属性来处理它：

```
public class ListSelection<T> {
    private ObservableList<T> items = FXCollections.observableArrayList(new ArrayList<T>());
    private ObjectProperty<T> selectedItem = new SimpleObjectProperty<>();
    private IntegerProperty selectedIndex = new SimpleIntegerProperty(0);
} 
```

可以使用`selectedIndex`属性来控制所选元素。

然后，创建一个绑定到`selectedItem`, 以在更改时“自动”更新它`selectedIndex`：

```
selectedItem.bind(
    when(isEmpty(items))
        .then(new SimpleObjectProperty<T>())
        .otherwise(valueAt(items, selectedIndex))
); 
```

`Bindings`应该是静态导入的：

```
import static javafx.beans.binding.Bindings.*; 
```

注意方法的使用`Bindings.valueAt(ObservableList<E> list, ObservableIntegerValue index)`。它创建到`list.get(index.getValue())`元素的绑定。

最后，您可以像这样使用它：

```
ListSelection<String> selection = new ListSelection<>();
Label label = new Label();
List<String> weekDays = Arrays.asList("monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday");

selection.getItems().addAll(weekDays);
label.textProperty().bind(selection.selectedItemProperty()); 
```

我还建议您查看`javafx.scene.control.SelectionModel`类及其子类（例如。`javafx.scene.control.SingleSelectionModel`）。也许，扩展其中一些可能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-31T08:37:25.247

我没有双向绑定，但如果您只想在列表中的位置更改时更新属性，您可以使用以下代码：

```
import javafx.beans.property.SimpleIntegerProperty;
import javafx.collections.ListChangeListener;
import javafx.collections.ObservableList;

/**
 * An integer property that's bound to the index of an item in an observable list. For example, if your list
 * is ["car", "train", "ship"], then new PositionInListProperty("train", list) will be 1\. The binding is unidirectional.
 * Changing this property doesn't affect the list.
 *
 * @param <T> Type of elements in the list.
 */
public class PositionInListProperty<T> extends SimpleIntegerProperty implements ListChangeListener<T> {
    private final T item;
    private final ObservableList<T> list;

    /**
     * Creates the property and binds it to an observable list.
     * @param item The position of this item in the list is tracked by this property.
     * @param list Whenever this list changes, the value of this property is updated.
     */
    public PositionInListProperty(T item, ObservableList<T> list) {
        this.item = item;
        this.list = list;
        this.setValue(list.indexOf(item));
        list.addListener(this);
    }

    @Override
    public void onChanged(Change<? extends T> c) {
        this.setValue(list.indexOf(item));
    } 
```

它将自己作为侦听器添加到列表中并对所有事件做出反应。然后，您可以正常使用该属性（只读！）。但是，时间复杂度`indexOf`是 O(n)，所以如果你有一个很长的列表，你会想以某种方式优化它。

# python - 换行导致 SyntaxError: EOL 在扫描字符串文字时

> ID：16217820
> 
> 赞同：1
> 
> 时间：2013-04-25T14:42:14.427
> 
> 标签：python, django, python-2.7, newline

ipad 应用程序将此 json 发送给我，我通过 request.POST.get 读取它，然后通过**ast.literal_eval 解析它**

```
u'[\n {\n "type" : 2,\n "dateCreated" : "Wed, 24 Apr 2013 17:20:50 0100",\n "dateStart" : "Wed, 24 Apr 2013 18:00:00 0100",\n "appointmentId" : 0,\n "withP" : [\n\n ],\n "seenTime" : null,\n "ofCWithId" : 2,\n "ofClientWithId" : 68,\n "dateEnd" : "Wed, 24 Apr 2013 19:00:00 0100",\n "comments" : "Test test test\n.\n( ) \'\' test \'\' \' test \'\n",\n "inLocation" : null,\n ...bla bla bla...]' 
```

我收到此错误：

```
 'comments' : 'Test test test
                               ^
SyntaxError: EOL while scanning string literal 
```

我可以理解换行符是问题，但我不知道如何解决。我正在使用 django 1.4.2 python 2.7.3

我真的很感谢你的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T14:57:03.063

尝试在字符串的开头和结尾添加 \'\'\'。

像这样：

```
u'\'\'\'[\n ... bla bla bla...]\'\'\'' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-06T09:21:47.620

您**不应该**使用*ast.literal_eval*来读取 JSON。为了读取 JSON，有一个[名为`json`](https://docs.python.org/2/library/json.html#module-json).

*使用它加载 JSON 数据：*

```
import json
data = """{"type":null,"dateCreated":"Wed, 24 Apr 2013 17:20:50 0100"}"""
json_data = json.loads(data) 
```

*ast.literal_eval*用于评估表示为字符串的 Python 代码。它不是为处理 JSON 数据而设计的。 `null`在 JSON 中是`None`在 Python 字典中，作为一个不同的例子。

您收到错误的另一个原因是您尝试解析的*JSON**无效*。看起来存在服务器端问题，或者您从服务器获取 JSON 数据的方式存在问题。

换行符 ( `\n`) 应在字符串中进行转义。此外，根据[JSON 规范](http://www.json.org/)`'`，不应转义。或者，您可以使用参数 with来允许字符串中的控制字符。`strict=False``json.loads`

您示例中的有效 JSON 如下所示：

```
{
    "type": 2,
    "dateCreated": "Wed, 24 Apr 2013 17:20:50 0100",
    "dateStart": "Wed, 24 Apr 2013 18:00:00 0100",
    "appointmentId": 0,
    "withP": ["\\n\\n"],
    "seenTime": null,
    "ofCWithId": 2,
    "ofClientWithId": 68,
    "dateEnd": "Wed, 24 Apr 2013 19:00:00 0100",
    "comments": "Test test test\\n.\\n( ) '' test '' ' test '\\n",
    "inLocation": null
} 
```

# merge - 将 MERGE 与 XMLQUERY 和转换一起使用

> ID：16217823
> 
> 赞同：0
> 
> 时间：2013-04-25T14:42:21.327
> 
> 标签：merge, db2, xquery

使用 DB2 LUW 10.1。我无法让 MERGE 处理两个使用 XQUERY 转换合并的 XML 列的表。

我有一个看起来像这样的表：

```
create table foo (
  id int not null primary key,
  data xml not null
) 
```

要将数据导入此表，我将其（使用 LOAD）加载到一个如下所示的临时表中：

```
create table foo_incoming (
  id int not null,
  data xml not null
) 
```

XML 列中的数据使用 XQUERY 转换进行合并。它背后有一些逻辑，所以它并不简单，但也不是太复杂。我已经使用手动更新测试了转换，所以我知道它有效。

然后我尝试像这样合并两个表：

```
merge into foo f
  using (select * from foo_incoming) i
  on (f.id = i.id)
  when matched then
    update set data = xmlquery('
        transform
          copy $out := $old
          modify ( ... )
          return $out'
        passing f.data as "old", i.data as "new")
  when not matched then
    insert (id, data) values (i.id, i.data) 
```

当 foo 中有数据时，这非常有效。XML 列完全按照我想要的方式合并。但如果 foo 为空，我会收到此错误：

```
SQL16084N  An assigned value in the copy clause of a transform expression is
not a sequence with exactly one item that is a node. Error QName=err:XUTY0013.
SQLSTATE=10705 
```

即使合并不匹配，DB2 似乎也在尝试评估 XQUERY。因此，f.data 为 NULL，并且转换中的复制表达式得到一个空序列。如果我删除整个“匹配时”子句，则该语句有效。

我究竟做错了什么？或者这是 DB2 的 MERGE 语句的限制？

* * *

我试图通过将简单的“匹配时”更改为“匹配时并且（f.data 不为空）”来解决此问题，但这没有效果。我还尝试将 XQUERY 表达式更改为如下所示：

```
if($old)
then
  transform
    copy $out := $old
    ...
else () 
```

那也没有帮助。我发现的唯一解决方法是将 MERGE 分成两部分。首先，我会这样做，以更新 foo 和 foo_incoming 中的行：

```
merge into foo f
  using
    (
      select q1.id, q1.data
        from foo_incoming q1 inner join foo q2
          on (q1.id = q2.id)
    ) i
  on (f.id = i.id)
  when matched then udpate ...; 
```

然后，插入 foo_incoming 但不在 foo 中的行：

```
merge into foo f
  using
    (
      select q1.id, q1.data
        from foo_incoming q1 left outer join foo q2
          on (q1.id = q2.id)
        where q2.id is null
    ) i
  on (f.id = i.id)
  when not matched then insert ...; 
```

这行得通。然而，我预计表现会很糟糕。这是我通常解释为警告信号的那种黑客行为，表明我的想法存在根本性错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T04:38:51.357

这可能是 DB2 中应该修复的错误。这里已经描述和讨论了同样的问题：

[https://www.ibm.com/developerworks/community/forums/html/topic?id=02fb0ba7-249d-431a-b173-e70511d3b582&ps=25](https://www.ibm.com/developerworks/community/forums/html/topic?id=02fb0ba7-249d-431a-b173-e70511d3b582&ps=25)

我希望即将推出的 DB2 修订包能够解决这个问题。

# facebook-graph-api - Facebook 洞察，page_fans_country 可访问，page_fans、page_fans_locale 或 page_fans_gender_age 没有数据

> ID：16217824
> 
> 赞同：1
> 
> 时间：2013-04-25T14:42:21.910
> 
> 标签：facebook-graph-api, facebook-fql

我正在使用 FQL 访问页面见解，并且根据我在查询中传递的指标，我得到了不同的结果。

例如，此查询正常工作，我得到任何 facebook 页面的数据：

从见解中选择值，其中 object_id='PAGEID' AND metric='page_fans_country' AND end_time=end_time_date('2013-04-14T07:00:00+0000') AND period='0'

但如果我使用另一个指标，如 page_fans_gender_age 或 page_fans_locale，我不会得到任何数据，除了一个特定页面（可能与我的令牌有关）。

我不明白为什么指标的工作方式不同，我在图表文档中没有看到任何关于此的具体信息？

page_fans_country 洞察数据是否“公开”，但其他指标不是？

这可能是一个令牌问题吗？还是取决于 end_time 参数？

我的问题是否与此错误有关：[https://developers.facebook.com/bugs/345809555540652?browse=search_5148c3f9aa0392220388804](https://developers.facebook.com/bugs/345809555540652?browse=search_5148c3f9aa0392220388804)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T12:46:03.383

是 -`page_fans_country`是公开可用的，其他指标需要经过适当身份验证的令牌。对于它的价值，我认为`0`也不适用于期间。

通常，您可以`end_time`通过选择过去几天的日期来避免问题（Insights 具有可变的滞后时间，通常在 3 天左右）。

# iphone - How can I detect next page number of UIScrollView which is 'scrollView.pagingEnabled' = YES? in 'scrollViewDidEndDragging'?

> ID：16217825
> 
> 赞同：6
> 
> 时间：2013-04-25T14:42:23.877
> 
> 标签：iphone, ios, objective-c, uiscrollview, scroll

I searched several stuffs on stackoverflow like

```
CGFloat pageWidth = scrollView.frame.size.width;
int pageNumberToBeScrolled = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
if (pageNumberToBeScrolled != 1) {
    // Do what I want
} 
```

in

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate; 
```

But this works only if I scrolled slowly so scrolling page is definitely moved over half of it. This doesn't work if I scrolled fast like swipe. I just scrolled like 30% of scrolling page, which doesn't satisfy the situation over there, but it scrolled to next page, and I want to detect it.

How can I detect or catch all `scroll-to-next-page` situations? Please give me some help :)

# EDIT

I working on this because I want to play a effect sound when scroll-to-next-page happens. I should detect right after my finger is off the screen and only for next page scrolling. I think if I handle this on `scrollViewDidEndDragging`, it'll be best for me :)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-25T15:39:45.153

I'm using this code to detect if currentPage is changed, it doesn't matter you scroll very fast or very slow.

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
        static NSInteger previousPage = 0;
        CGFloat pageWidth = scrollView.frame.size.width;
        float fractionalPage = scrollView.contentOffset.x / pageWidth;
        NSInteger page = lround(fractionalPage);
        NSLog(@"%d",page);
        if (previousPage != page) {
            previousPage = page;
            /* Page did change */
        }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:52:25.680

try like this may be it'l helps you

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
        float fractionalPage = scrollView.contentOffset.x / 320;
        NSInteger page1 = lround(fractionalPage);
        NSLog(@"%d",page1);
} 
```

# windows - Change modification time stamp with vbscript

> ID：16217829
> 
> 赞同：1
> 
> 时间：2013-04-25T14:42:35.397
> 
> 标签：windows, date, vbscript

i need to change modification time stamp in windows files with vbscrip after copying them. Thanks

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T15:06:46.513

You can do it by setting the FolderItem.ModifyDate property. Everything is described [here](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787825%28v=vs.85%29.aspx). Sample code:

```
Set objShell = CreateObject("Shell.Application")

Set objFolder = objShell.NameSpace("C:\Scripts")
Set objFolderItem = objFolder.ParseName("File.jpg")

objFolderItem.ModifyDate = "01/01/2008 8:00:00 AM" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:03:55.050

According to the [the docs](http://msdn.microsoft.com/en-us/library/c8xh895w%28v=vs.84%29.aspx)

> DateLastModified
> 
> Property Returns the date and time that the specified file or folder was last modified. Read-only.

the property is read-only.

# javascript - 如何禁用嵌套 ul 中的所有链接，除了最低级别的链接？

> ID：16217832
> 
> 赞同：0
> 
> 时间：2013-04-25T14:42:37.427
> 
> 标签：javascript, html-lists, nested-lists

假设我有一个列表，如下所示：

```
<ul>
<li><a href="Sitepages/Introduction.aspx">Introduction</a>
    <ul>
        <li><a href="Sitepages/AboutMe.aspx">About me</a></li>
        <li><a href="Sitepages/AboutTheCompany.aspx">About the company</a>
            <ul>
                <li><a href="Sitepages/History.aspx">History</a></li>
                <li><a href="Sitepages/Locations.aspx">Locations</a>
                    <ul>
                        <li><a href="Sitepages/Belgium.aspx">Belgium</a></li>
                        <li><a href="Sitepages/France.aspx">France</a></li>
                        <li><a href="Sitepages/Germany.aspx">Germany</a></li>
                        <li><a href="Sitepages/Norway.aspx">Norway</a></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</li>
</ul> 
```

我有一个脚本可以把这个嵌套的 ul 变成手风琴，这样一开始只显示顶层。一旦有人单击包含另一个 ul 的 li 内的链接，它就会扩展该 ul，依此类推。

问题是，虽然在没有提供链接时所有这些都可以正常工作，但我想禁用每个“a”标签的默认行为，除了最低级别的标签。所以最底层的 li 标签，里面有一个链接，应该仍然是活动链接。

这是禁用顶级链接的默认行为的 javascript 代码：

```
 $this.find("li").each(function(){
    if ($(this).find("ul").size() != 0) {
        if ($(this).find("a:first")) {
            $(this).find("a:first").click(function(){ return false; });         
    }
}); 
```

虽然顶级链接（简介）将在单击时忽略默认行为（重定向），但它会展开并显示“关于我”和“关于公司”选项。但是当我点击“关于公司”时，它仍然会重定向。

我应该在我的代码中编辑什么以将每个“a”标签的默认行为设置为 false，除了最后一个（在我的示例中：国家名称）？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:38:42.990

您可以设置两个处理程序。一个用于禁用无序列表中的所有链接，另一个用于处理对最后一个无序列表的点击：

```
// Disable all links within an ul
$('ul').on("click", "a", function(e){
    e.preventDefault();
});

// second handler to bind to the last ul
$('ul:last').on("click", "a", function(e){
    window.location.href = $(e.target).attr('href');
}); 
```

小提琴：http: [//jsfiddle.net/puleos/CjB99/](http://jsfiddle.net/puleos/CjB99/)

# char - 无法删除 UITextField 中的文本

> ID：16217833
> 
> 赞同：3
> 
> 时间：2013-04-25T14:42:38.313
> 
> 标签：char, uitextfield, limit, max

我在 UITextField 上实现了最大字符限制。问题是当输入字符的最大数量时，我无法退格字符。谁能告诉我我做错了什么？下面是我的代码：

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

```
if (textField == pinCode) {
    if ([textField.text length]<=3) {
        return YES;        
    }
    else {
        return NO;
    }
}
else {
    return YES;
}
return YES; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:50:09.007

将条件更改为：

```
if ([textField.text length]<=3 || string.length == 0) {
    ... 
```

如果字符串的内容是控制字符 fe 退格，则长度为零

# c# - c# 修改泛型属性

> ID：16217834
> 
> 赞同：0
> 
> 时间：2013-04-25T14:42:40.250
> 
> 标签：c#, generics, properties

我有一个具有 2 个相同类型（布尔）属性的视图模型。我喜欢有一个将属性之一设置为布尔值的函数。假设您有一个 IsReadonly 属性。

```
public void SetReadOnly(MyViewModel vm, bool newVal)
{
    vm.IsReadOnly = newVal;
} 
```

现在我想让它更通用，并且对两者都有一个功能：

```
public void SetBooleanProperty(MyViewModel vm, bool newVal, ?bool? myProperty)
{
    vm.myProperty = newVal; // sure this is an error, myProperty doesn't exist in the viewmodel. But that shows the way i like to have. 
} 
```

我开始了这种方法：

```
public void SetBooleanproperty<TProp>(MyViewModel vm, bool newVal, TProp myProperty)
{
     vm.??? = newVal;
} 
```

我不喜欢使用 GetPropertyByName("IsReadonly") 函数，我认为它在.Net 的反射类中的某处可用。原因：如果另一个开发人员重构项目并重命名 IsReadonly，则字符串不会得到更新。有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:49:34.657

您正在尝试使用反射而不使用反射。我不认为你会找到答案。语言中没有针对属性的泛型。

我能想到的最糟糕的事情就是传递一个动作——这很荒谬，但它确实有效。请不要这样做：

```
public void PerformAction(MyViewModel vm, bool newVal,
    Action<MyViewModel, bool> action)
{
    action(vm, newVal);
}

PerformAction(someViewModel, true, (vm, b) => vm.IsReadOnly = b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:49:35.560

这不是一个好方法。您不想结合 getter 和 setter。标准做法是为每个值设置一个 getter 和 setter，以便您可以控制对它们的访问。对两个变量都有一个 getter 和 setter 违背了拥有 getter 和 setter 的一般目的。

# java - JTextArea 空间不足？可以容纳多少文字，我可以容纳更多吗？

> ID：16217837
> 
> 赞同：0
> 
> 时间：2013-04-25T14:42:45.273
> 
> 标签：java, text, bigdata

我正在为我在素数中找到的模式开发可视化工具。这是 StackMath 中有关它的数学的链接：[Primes 中的模式](https://math.stackexchange.com/questions/371434/has-anyone-found-a-pattern-in-prime-numbers/371537?noredirect=1#comment798164_371537)和 StackCodeReview 中的完整代码：代码[优化](https://codereview.stackexchange.com/questions/25436/help-me-speed-up-this-java-code-deals-with-huge-list-of-ints)

我的问题似乎是我的 JTextArea 空间不足。

错误：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
 at javax.swing.text.GapContent.allocateArray(Unknown Source)
 at javax.swing.text.GapVector.resize(Unknown Source)
 at javax.swing.text.GapVector.shiftEnd(Unknown Source)
 at javax.swing.text.GapContent.shiftEnd(Unknown Source)
 at javax.swing.text.GapVector.open(Unknown Source)
 at javax.swing.text.GapVector.replace(Unknown Source)
 at javax.swing.text.GapContent.insertString(Unknown Source)
 at javax.swing.text.AbstractDocument.handleInsertString(Unknown Source)
 at javax.swing.text.AbstractDocument.insertString(Unknown Source)
 at javax.swing.text.PlainDocument.insertString(Unknown Source)
 at javax.swing.JTextArea.append(Unknown Source)
 at PrimeSandbox.main(PrimeSandbox.java:67) 
```

第 67 行：

```
 screen.append(Arrays.toString(primesLL.toArray()) + "\n"); 
```

所以我唯一能想到的是我在 TextArea 中有很多文本。我可以增加它可以容纳的尺寸吗？或者我必须创建一种方法来将一些未显示的文本保存到字符串中并在滚动时重写它？（我真的不想）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:45:57.880

快速而肮脏的答案是给自己更多的堆空间：

`java -Xmx2g PrimeSandbox` ← 给你 2GB，例如

这是否是一个好的长期解决方案取决于您是否只需要“多一点”，或者您是否有一个猖獗的记忆问题。

您不会通过在应用程序中移动字符串来节省任何内存。a 中显示的字符串`JTextArea`不会比类中字段中的字符串更占用内存。写入磁盘将是您唯一的其他选择。

# c - 初始化变量和在声明后立即为其赋值有区别吗？

> ID：16217839
> 
> 赞同：3
> 
> 时间：2013-04-25T14:42:46.907
> 
> 标签：c, assembly, initialization, variable-assignment, c99

假设一个纯粹的非优化编译器，初始化变量和声明后为其赋值之间的机器代码有什么区别吗？

**初始化方法**：

```
int x = 2; 
```

**赋值方法**：

```
int x;
x = 2; 
```

我使用 GCC 输出为这两种不同方法生成的程序集，并且都产生了一条机器指令：

```
movl    $2, 12(%esp) 
```

该指令只是将`x`变量持有的内存设置为`2`. GCC 可能正在对此进行优化，因为它可以识别操作的最终结果；但我认为这是解释这两个版本的唯一方法。我的理由是两个版本都做同样的事情：将一部分内存设置为特定值。

如果生成的机器代码相同，为什么经常在术语“**初始化**”和“**赋值”之间进行区分？**

术语“**初始化**”是否纯粹用于区分具有特定值的变量，而不是那些在内存中留下任何垃圾值的（非初始化）变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:22:52.940

> 假设一个纯粹的非优化编译器，初始化变量和声明后为其赋值之间的机器代码有什么区别吗？

当然。

*   `char fubar[] = "hello world";`已验证。
*   `char fubar[]; fubar = "hello world";`不是。

更多的？

*   `int fubar[128] = { [60] = 42 };`已验证。
*   `int fubar[128]; fubar = { [60] = 42 };`不是。

更多的？

*   `struct foo bar = { .foo = 13, .bar = 42 };`已验证。
*   `struct foo bar; bar = { .foo = 13, .bar = 42 };`不是。

更多的？

*   `const int fubar = 0;`已验证。
*   `const int fubar; fubar = 0;`不是。

我可以继续说下去……因此，机器代码*可能会*存在一个，而另一个则很*可能不*存在。关于这一点，您是否听说过不是编译器的 C 实现？

> 如果生成的机器代码相同，为什么通常在初始化和赋值之间进行区分？

C 编程语言中变量的概念对于低级机器代码表示来说太高级了。在机器代码中，寄存器没有作用域。C 增加了作用域，更不用说类型融合和许多其他与变量相关的方面，以及初始化（您可以从前面的示例中看到完全一致，但*不幸*的是不一样）。

> 术语“初始化”是否纯粹用于区分具有特定值的变量，而不是那些（非初始化）变量，这些变量具有留在内存中的任何垃圾值？

尽管“初始化”的变量不会包含任何“垃圾值”（或陷阱表示），但这并不是它的唯一影响。

在我的第一个示例中，初始化将提供不完整数组的大小。使用赋值运算符的等效项需要显式提供数组的长度和 using `strcpy`，这变得非常乏味。

在我的第二个示例中，`int`索引处的 60 将被初始化为 40，而其余未初始化的项将被初始化为 0。使用赋值运算符的等效项也将相当乏味。

在我的第三个示例中，成员`foo`和`bar`将被初始化为 13 和 42，而其余未初始化的成员将被初始化为 0。使用赋值运算符的等效项将非常乏味，尽管我偶尔使用复合文字来实现类似的结果。

在我的第四个示例中，初始化设置了变量在其整个生命周期中将包含的值。不能对该变量进行赋值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T15:22:56.730

`const`当您添加限定符时，一个重要的区别就会发挥作用：

```
int const x = 2; 
```

有效 C

```
int const x;
x = 2; 
```

不是。另一个重要的区别是`static`变量：

```
static int x = f(); 
```

无效 C

```
static int x;
x = f(); 
```

已验证。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T15:18:18.573

行为必须相同，但生成的代码中的任何差异实际上取决于编译器。

例如，编译器可以为初始化变量生成这个：

```
somefunction:
pushl    %ebp
movl     %esp, %ebp
pushl    $2 ; allocate space for x and store 2 in it
... 
```

这对于未初始化但后来分配的变量：

```
somefunction:
pushl   %ebp
movl    %esp, %ebp
subl    $4, %esp ; allocate space for x
...
movl    $2, -4(%ebp) ; assign 2 to x
... 
```

在这些情况下，C 标准不要求生成的代码相同或不相同。它只要求在这两种情况下程序的行为相同。并且相同的行为并不一定意味着相同的机器代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:33:17.897

```
int x = 2; 
```

**计算机将几乎同时**创建变量 x 并为其赋值 2 。

* * *

```
int x;
x = 2; 
```

计算机将创建变量 x。然后它将它分配给它的值2。看起来没有任何区别，**但是**......

...假设您的代码是这样的：

```
int x; 
{some operators};
x = 2; 
```

计算机可能必须访问变量 x 才能为其分配值 2。这意味着在运行程序时计算机将花费更多时间来访问 x 以赋予它一些值，这与它现在创建变量并赋予该变量不同.

无论如何，Deitel HM、Deitel PJ 在[**C How to Program**](http://www.deitel.com/Books/C/CHowtoProgram5e/tabid/1704/Default.aspx)中对此进行了描述。

# java - AlarmManager 和 Service 在我的应用程序上不起作用

> ID：16217840
> 
> 赞同：0
> 
> 时间：2013-04-25T14:42:46.803
> 
> 标签：java, android, service, alarmmanager

我想要一个执行一组命令的简单计时器，它需要准确。如果应用程序被最小化（隐藏）或手机处于睡眠状态（CPU 睡眠），它也必须继续。我看过这些网站上的帖子：

[站点 1](https://stackoverflow.com/questions/5362177/alarmmanager-and-wakelock)

[站点 2](https://stackoverflow.com/questions/8713361/keep-a-service-running-even-when-phone-is-asleep)

我试图理解代码并将其添加到我自己的新项目中，但应用程序在启动时关闭。这就是我所拥有的。

**主活动 onCreate()**

```
 Intent myAlarm = new Intent(getApplicationContext(), AlarmReceiver.class);
        PendingIntent recurringAlarm = PendingIntent.getBroadcast(getApplicationContext(), 0, myAlarm, PendingIntent.FLAG_CANCEL_CURRENT);
        AlarmManager alarms = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
        Calendar updateTime = Calendar.getInstance();
        updateTime.setTimeInMillis(5000); // first reoccurance 
        int customInterval = 5000; // 5 seconds intervals
        alarms.setInexactRepeating(AlarmManager.RTC_WAKEUP, updateTime.getTimeInMillis(), customInterval, recurringAlarm); 
```

**AlarmReceiver.class/AlarmReceiver.java**

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class AlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Intent myService = new Intent(context, YourService.class);
        context.startService(myService);
    }
} 
```

**YourService.class/YourService.java**

```
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;

public class YourService extends Service {
    @Override
    public IBinder onBind(Intent intent) { // Automatically added by adding Service extension
        // TODO Auto-generated method stub
        return null;
    }
} 
```

**显现**

```
<manifest
    ... >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        ... >

        <service android:name=".YourService"></service>
        <receiver android:name=".AlarmReceiver"></receiver>

        <activity
            ... >
            ...
        </activity>
    </application>
</manifest> 
```

应用程序在启动时崩溃。代码有什么问题？

我想要的只是应用程序通过 MainActivity 启动警报，它每隔一定的时间间隔执行一组命令（即使手机处于睡眠状态）。我听说这样做的方法是创建和创建服务的警报，并且命令进入服务内部。

我究竟做错了什么？

**日志猫**

```
04-25 15:49:45.799: E/AndroidRuntime(32359): FATAL EXCEPTION: main
04-25 15:49:45.799: E/AndroidRuntime(32359): java.lang.RuntimeException: Unable to instantiate service com.example.wifischedule.YourService: java.lang.ClassCastException: com.example.wifischedule.YourService cannot be cast to android.app.Service
04-25 15:49:45.799: E/AndroidRuntime(32359):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2388)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at android.app.ActivityThread.access$1600(ActivityThread.java:140)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1309)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at android.os.Looper.loop(Looper.java:137)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at android.app.ActivityThread.main(ActivityThread.java:4898)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at java.lang.reflect.Method.invokeNative(Native Method)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at java.lang.reflect.Method.invoke(Method.java:511)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-25 15:49:45.799: E/AndroidRuntime(32359):    at dalvik.system.NativeStart.main(Native Method)
04-25 15:49:45.799: E/AndroidRuntime(32359): Caused by: java.lang.ClassCastException: com.example.wifischedule.YourService cannot be cast to android.app.Service
04-25 15:49:45.799: E/AndroidRuntime(32359):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2385)
04-25 15:49:45.799: E/AndroidRuntime(32359):    ... 10 more
04-25 15:49:45.854: E/android.os.Debug(2268): !@Dumpstate > dumpstate -k -t -z -d -o /data/log/dumpstate_app_error
04-25 15:49:52.724: E/FaceDetectionService(2268): enabled 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:49:03.213

假设这`MainActivity`实际上是一个`Activity`，**永远不要**自己实例化 Android 组件。

请使用`Log.d()`或等效方法记录来自 a的信息以`Service`用于开发。

~~除此之外，正如 Class Stacker 所指出的，没有堆栈跟踪，很难为您提供帮助。~~

正如堆栈跟踪所示，`YourService`需要继承自`android.app.Service`.

# ms-access - 从主窗体进入子窗体时出现“数据已更改”错误

> ID：16217844
> 
> 赞同：8
> 
> 时间：2013-04-25T14:42:56.203
> 
> 标签：ms-access, vba, odbc, ms-access-2007

我正在使用 SQL Server 迁移助手 (SSMA) 将 Access 数据库迁移到 SQL Server。Access 应用程序将继续使用，但使用链接表而不是本地表。

我在使用包含多个子表单的表单进行迁移后测试期间遇到了问题。

测试步骤：

1) 在主窗体中编辑一个字段；

2）将焦点转移到子表单中的一个字段；

3) 尝试编辑子表单中的字段。

结果：弹出错误消息：“数据已更改。在您尝试保存更改之前，另一个用户编辑了此记录并保存了更改。”

错误消息消失后​​，可以编辑子表单中的字段。如果未编辑主表单中的字段，则可以编辑子表单而不会出现错误消息。

关于可能导致此错误的任何想法？

我已经尝试在主窗体上的子窗体控件的 Enter 事件处理程序中保存主窗体记录（即，当输入包含子窗体的控件时，此事件发生在主窗体上，而不是在子窗体本身上） . 没有任何区别。我尝试在同一个子表单控件 Enter 事件中重新查询主表单，但这不起作用 - 重新查询主表单会将焦点从子表单移开，因此无法对其进行编辑。

一个 MS 论坛在子表单的 After_Update 事件中建议了 Me.Parent.Requery。那也没有用。

当我进入子表单时，SQL Profiler 显示一个更新语句，更新主表单下的表。没有其他语句命中数据库来修改数据。

我注意到一件有趣的事情：主窗体的记录源实际上是一个将两个表连接在一起的选择语句。主窗体包含可以更新记录源中每个表中的列的字段。在主窗体中编辑更新关系中的子表的字段不会导致“数据已更改”错误。该错误仅在编辑更新关系中的父表的字段时发生。我已经尝试过更新两个表中不同列的字段。结果是一致的：在父表中编辑记录会导致错误，在子表中编辑记录不会。

子表单和主表单之间的链接将子表单表中的列连接到主表单记录源中子表中的列。

顺便说一句，主窗体Record Source 中的表实际上是以1:1 的关系连接的（父表中的每条记录对应子表中的一条记录）。子表只是父表的扩展表。

如果我从头开始，我个人不会设计这样的系统，但这是我必须使用的，我希望有一些相当简单的修复，不需要对表格或表单进行重大重新设计（假设主窗体和子窗体各有 100 多个控件）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-28T15:06:21.993

经过多次试验和错误，我解决了这个问题。在主窗体上的子窗体控件的输入事件处理程序中，我请求了子窗体本身。

例如在主窗体上：

```
Private Sub Subform1_Enter()
    Me.Subform1.Form.Requery
End Sub 
```

我不知道为什么这有效，只是它确实有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-26T16:09:05.133

This happens when a record is updated in a table, but the record source of the main form has not been refreshed to reflect the change, so Access gets conflicting information and thinks the record has been changed. See also: [http://support.microsoft.com/kb/302492](http://support.microsoft.com/kb/302492)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-05T12:29:05.053

我通过像这样编写 AfterUpdate 表单事件来解决这个问题：

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    cSQL = "update UnderlinedTable set Field1=" & Me.Controls("Field1") & _
        ", Field2=" & Me.Controls("Field2") & _ ' and all other fields in your form
        " where PrimaryKey=" & Me.Recordset.Fields("PrimaryKeyField")
    ' here command to SQL server that executes this cSQL string
    Me.Requery
    Cancel = True 'stop Access updating
end sub 
```

可以编写通用的更新前表单事件函数，该函数基于 form.recordsource 和更改的表单字段自动生成更新语句，可以从所有更新后表单事件调用表单作为参数。我为我做了这个。

# ios - 如何从 iPad 键盘上删除或禁用特定文本字段的语言首选项键

> ID：16217845
> 
> 赞同：2
> 
> 时间：2013-04-25T14:42:57.970
> 
> 标签：ios, ipad

![需要删除键盘上显示的键或者是否可以禁用](https://i.stack.imgur.com/77fpb.png)[1](https://i.stack.imgur.com/77fpb.png)

需要从 iPad 键盘上删除或禁用特定文本字段的键，如图所示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-03T14:43:19.507

在故事板中设置

[![在此处输入图像描述](https://i.stack.imgur.com/v5uJ4.png)](https://i.stack.imgur.com/v5uJ4.png)

或手动
[textField setKeyboardType: UIKeyboardTypeASCIICapable];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:59:23.593

除非您创建自定义键盘，否则无法从键盘中删除特定按钮。但是，已经定义了不同类型的键盘。您可以做的是管理键盘行为。

**[yourTextField setKeyboardType: [UIKeyboardType](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html) ]** ;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:45:16.467

我不认为可以从键盘上删除一个键，但是您可以在该图像的同一位置添加一个叠加层。

# c# - 当一个属性被快速更改多次时，发送了多少个 PropertyChanged 事件？

> ID：16217847
> 
> 赞同：1
> 
> 时间：2013-04-25T14:43:17.457
> 
> 标签：c#, inotifypropertychanged

我有一些实现 PropertyChanged 事件的代码（类似于下面的代码段）。

```
private void SendPropertyChanged(string propertyName)
      {
         if(PropertyChanged != null)
         {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));  
         }
      } 
```

我注意到我的事件处理程序只被调用一次，当同一个属性被快速更改多次时。我找不到任何提到这一点的文档。谁能确认这是否是 PropertyChanged 的​​预期行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:48:58.020

您显示的代码将调用事件委托的次数与`SendPropertyChanged`调用次数相同。这里没有魔法。但是，一种常见的方法（在您未显示的代码中返回一个级别）是检查实际更改，例如：

```
private int id;
public int Id {
    get { return id; }
    set {
        if(id != value) {
            id = value;
            SendPropertyChanged(); // let C# 5 compiler tricks supply the name
        }
    }
}
private void SendPropertyChanged([CallerMemberName]string propertyName = null)
{
    var handler = PropertyChanged;
    if(handler != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));  
    }
} 
```

带测试：

```
 var obj = new Foo();
    int count = 0;
    obj.PropertyChanged += delegate { count++; };

    obj.Id = 1;
    obj.Id = 2;
    obj.Id = 3;

    Console.WriteLine(count); // outputs: 3

    count = 0;
    obj.Id = 1;
    obj.Id = 1;
    obj.Id = 1;

    Console.WriteLine(count); // outputs: 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:50:04.487

请记住，C# 事件实际上只不过是一个函数调用。与常规函数调用有两个主要区别：-

1.  对于事件，被调用者依赖于调用者，而不是相反。

2.  事件可以有一个调用列表，即多个被调用者可以附加到一个调用者。

事件引发机制中没有内置限制，因此您看到的效果必须有不同的解释。

# spotify - 在高级版本中调用 Spotify 广告

> ID：16217856
> 
> 赞同：0
> 
> 时间：2013-04-25T14:43:27.787
> 
> 标签：spotify

为了为免费版本的 Spotify 测试我的应用程序（Spotify Apps API），我需要调用商业曲目。在以下文档中，它说我可以使用 URI spotify:ad:9ca1a889f34945d59fc521759dd177a7 来调用商业程序：[http](http://d2mua6lfj9ozyq.cloudfront.net/old/pdf/partner-checklist.pdf) ://d2mua6lfj9ozyq.cloudfront.net/old/pdf/partner-checklist.pdf我还记得这曾经可以工作过去，但是当我现在在搜索栏中输入时，根本没有发生任何事情，也没有任何错误消息。我可以做些什么来调用广告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:05:20.963

尝试其他广告 URI，例如 spotify:ad:5e8c1e01cc7d4e16a0c273ecd93d2742

# javascript - 如何使用jQuery创建左右滑动效果？

> ID：16217868
> 
> 赞同：1
> 
> 时间：2013-04-25T14:44:00.933
> 
> 标签：javascript, jquery, slider

我有以下 jQuery 代码片段：

```
var target1 = $('.div1');
var target2 = $('.div2');
target1.delay(1500).fadeIn();
target2.delay(3000).fadeIn();
// I want to use slide left here instead of .fadeIn() 
```

类似于`.fadeIn()`是否有向左/向右滑动选项？

我也发现[了这一点](https://stackoverflow.com/questions/521291/jquery-slide-left-and-show)，但我不确定如何实现它或者它是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:52:12.563

使用您发布的链接中的代码。

包括所需的库（或使用本地副本）：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.core.js"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/jquery.effects.slide.js"></script> 
```

将此 Javascript 添加到您的页面：

```
jQuery.fn.extend({
  slideRightShow: function(speed) {
    return this.each(function() {
        $(this).show('slide', {direction: 'right'}, +speed || 1000);
    });
  },
  slideLeftHide: function(speed) {
    return this.each(function() {
      $(this).hide('slide', {direction: 'left'}, +speed || 1000);
    });
  },
  slideRightHide: function(speed) {
    return this.each(function() {
      $(this).hide('slide', {direction: 'right'}, +speed || 1000);
    });
  },
  slideLeftShow: function(speed) {
    return this.each(function() {
      $(this).show('slide', {direction: 'left'}, +speed || 1000);
    });
  }
}); 
```

我什至添加了`speed`参数，以便您可以指定动画的速度。

从那时起，你可以使用这样的东西：

```
$("#element_id").slideRightShow(); 
```

**演示：http:** [//jsfiddle.net/EzP2q/1/](http://jsfiddle.net/EzP2q/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:53:31.450

来，看看这个！这就是你需要的！

这个 tut 解释了您需要的一切 ->[**在不同方向上滑动元素**](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:45:36.550

jQuery UI 有一个`slide`功能

[查看文档](http://docs.jquery.com/UI/Effects/Slide)

# actionscript-3 - AS3 敌方阵型

> ID：16217869
> 
> 赞同：-3
> 
> 时间：2013-04-25T14:44:09.087
> 
> 标签：actionscript-3, starling-framework

通过查看一些不同的教程，我一直在使用 starling 框架在 as3 中开发射击游戏。问题是所有教程都教导创建从一侧移动到另一侧的随机敌人。我想知道如何在屏幕上创建不同的敌人阵型。

任何人都可以推荐任何书籍、教程或任何基本算法来让我走上正轨吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:12:06.697

这是一种相当简单的生成编队的方法。

在您的库中创建一个名为的符号`formation`并将其用作您的链接/类名称。

在该符号中，将 5 个标记 MovieClips 放置在您想要的任何位置。对于标记剪辑，我建议使用居中的圆圈。无论您将这些标记放在哪里，都代表了敌人将在哪里产生。

现在，在您想要生成此编队的代码中，您可以执行以下操作：

```
var formationData:MovieClip = new formation;
for (var index:int = 0;index < formationData.numChildren;index++)
{
    var spawnMarker:MovieClip = formationData.getChildAt(index) as MovieClip;
    var enemy:Enemy = new Enemy;
    enemy.x = spawnMarker.x;
    enemy.y = spawnMarker.y;
    addChild(enemy);
} 
```

现在，这将根据您在编队符号中设置的内容生成编队。

您可以通过执行以下操作来抵消生成的敌人的位置：

```
var offsetX:Number = 200;
var offsetY:Number = 50;
for (var index:int = 0;index < formationData.numChildren;index++)
{
    var spawnMarker:MovieClip = formationData.getChildAt(index) as MovieClip;
    var enemy:Enemy = new Enemy;
    enemy.x = offsetX + spawnMarker.x;
    enemy.y = offsetY + spawnMarker.y;
    addChild(enemy);
} 
```

这个概念允许您在 Flash IDE 中直观地布置您的编队。因此，您可以创建一大堆不同的阵型并随机选择一个。出生点是否拼出了一个单词？

显然，上面的代码是一个示例，您需要将该概念集成到您的生成系统等中。

根据你的敌人从哪里产卵，你可能需要使用偏移量来让它们离开屏幕。

# php - 使用 php.ini 启用 BCMath？

> ID：16217871
> 
> 赞同：9
> 
> 时间：2013-04-25T14:44:11.413
> 
> 标签：php, bcmath

我需要启用 BC Math，但我不想使用 --enable-bcmath 来启用它，主要是因为我不了解那条路线。

有没有办法只使用 php.ini 来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-02T14:38:26.217

据我所知，您必须使用 --enable-bcmath 选项编译 php。没有它，二进制文件中将不存在所需的代码。因此，您无法在 php.ini 中设置任何内容

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-10T14:05:32.153

在重新编译之前，检查 php.ini 文件并搜索“bcmath”。您可能会发现 bcmath.scale=0。如果是这样，请将 0 更改为 2。

# java - 异常无法映射到响应，重新抛出到 HTTP 容器 java.io.EOFException: No content to map to Object due to end of input

> ID：16217875
> 
> 赞同：0
> 
> 时间：2013-04-25T14:44:15.700
> 
> 标签：java, web-services, rest

我有一个网络服务方法

```
@Override
@GET
@ResponseStatus(value=HttpStatus.OK)
@Produces(MediaType.APPLICATION_JSON)
public void getInfo(HttpServletRequest req) {

} 
```

返回类型为 void，我无法更改返回类型，因为此方法来自接口，并且我想从该方法发送 ok 响应，因为我使用 **了 @ResponseStatus(value=HttpStatus.OK)**，但是当我我要求我得到的服务：

```
Exception could not be mapped to a response, re-throwing to the HTTP container java.io.EOFException: No content to map to Object due to end of input 
```

任何解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:36:25.043

您是否尝试过使用**HttpStatus.NO_CONTENT**而不是**HttpStatus.OK**？

GET 请求的 200 (OK) 响应意味着将在响应中返回与请求的资源对应的实体，而 204 (NoContent) 意味着不需要返回实体主体。

有关每个响应代码的定义，请参阅[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

# r - 如何使 scale_x_date 星期从星期日开始

> ID：16217876
> 
> 赞同：7
> 
> 时间：2013-04-25T14:44:17.560
> 
> 标签：r, ggplot2

我正在创建一个每周时间序列图表，一周应该从星期日开始。当我指定 scale_x_date(breaks = date_breaks('1 week')) 网格线和标签从星期一开始时，结果看起来略有偏差。如何强制 ggplot scale_x_date 周从星期日开始

这是我的代码示例

```
library(ggplot2)
library(scales)

data.set <- structure(list(week.start = structure(c(15732, 15739,
                           15746, 15753, 15760, 15767, 15774, 15781,
                           15788, 15795, 15802, 15809 ), class =
                           "Date"), overtime.avg = c(2.8,
                           2.85666666666667, 2.18333333333333,
                           2.44666666666667, 2.04833333333333,
                           2.45833333333333, 2.12833333333333,
                           1.81666666666667, 1.82166666666667,
                           1.54333333333333, 2.09166666666667,
                           0.970833333333333)), .Names =
                           c("week.start", "overtime.avg"), row.names
                           = 29733:29744, class = "data.frame")

ggplot(data = data.set,
       aes(x = week.start,
           y = overtime.avg)) +
    geom_line() +
    geom_point() +
    scale_x_date(breaks = date_breaks("1 week"),
                 labels = date_format(format = "%Y-%m-%d")) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:52:19.293

一种方法是使用函数`seq()`并从第一个星期日开始提供您自己的断点（使用 的最小值`week.start`）和 set `by="week"`。

```
ggplot(data = data.set,aes(x = week.start,y = overtime.avg)) +
  geom_line() +
  geom_point() +
  scale_x_date(breaks = seq(min(data.set$week.start),max(data.set$week.start),by="week"),
               labels = date_format(format = "%Y-%m-%d")) 
```

# java - 如何通过单击从 jTable 中选择对象

> ID：16217877
> 
> 赞同：1
> 
> 时间：2013-04-25T14:44:25.697
> 
> 标签：java, swing

我创建了一个名为 Clients 的类，它具有一些简单的属性，例如 client_id、client_name 和 client_age。我用 NetBeans 编写了一个小型 GUI，在我通过按下按钮从客户端输入数据后，我将其显示在 jTable 中。

在 jTable 中添加它的源代码是：

```
for (int i=0;i<customerV.length;i++){
                jTable2.setValueAt(customerV[i].getName(), i, 0);
} 
```

我希望如果我单击 jTable 上的一个元素，以便能够通过使用 jButton 向该客户端添加一些订单。如果我在控制台中进行编程，它会像：

```
Order order1=new Order("1000","41211") 
```

其中第一个字段是订单 ID，第二个是订单号，所以如果我想将其分配给客户 1，那就是这样。

```
c1.assignOrder(order1) 
```

我如何通过使用 java swing 来做到这一点？我的意思是从我在 jTable 中单击的元素中选择整个对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:02:05.987

*   将您的实例设置`Clients`为表模型而不是客户端名称（例如`jTable2.setValueAt(customerV[i], i, 0);`：）
*   实现一个自定义[渲染器](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableCellRenderer.html)，它将根据需要渲染客户端类（例如显示客户端的名称）并将其[设置](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setDefaultRenderer%28java.lang.Class,%20javax.swing.table.TableCellRenderer%29)到表中。另一个（更简单的）选项是只覆盖`toString`返回`Clients`客户端的名称，或者您想要显示的任何内容，而不用担心渲染器。
*   调用[`getValueAt()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getValueAt%28int,%20int%29)以获取`Clients`绑定到按钮单击处理程序中特定单元格的实例。

# python - PyQt4中的多个窗口？

> ID：16217878
> 
> 赞同：6
> 
> 时间：2013-04-25T14:44:26.963
> 
> 标签：python, pyqt4

我刚刚开始使用pyqt4。我遵循了一个教程（[http://zetcode.com/tutorials/pyqt4/](http://zetcode.com/tutorials/pyqt4/)）让我困惑的一件事是这部分：

```
def main():
    app = QtGui.QApplication(sys.argv)
    ex = GUI()
    sys.exit(app.exec()) 
```

我在这里解释的原因是：

我制作了一个小程序，除了第一个主窗口外，它还能再打开四个窗口。所以我试图复制我在主窗口中看到的内容，并为每个新窗口创建一个类，并尝试像上面那样做。目前它看起来像这样：

```
def main2():
    #app = QtGui.QApplication(sys.argv)
    ex2 = Settings()
    sys.exit(app.exec()) 
```

如您所见，我已对其进行了修改。如果我不注释函数中的第一行，程序就会崩溃。我尝试不使用**sys.exit(app.exec_())** -part，但这只会使新窗口在显示后几毫秒内关闭。但是，这样，一切都运行并正常工作。只有在命令窗口中，才会显示错误消息。我不知道如何解决这个问题，因为我无法删除最后一行，而且我不知道用什么替换**“app”**。

我知道我可能从一开始就做错了新窗口，但我不知道如何以任何其他方式从原始窗口打开这些窗口。我无法让其他任何东西工作，这至少现在可以运行和工作。所以唯一的问题是提示中的错误消息，摆脱它们会很好:)

感谢您的任何帮助（复杂和简单的）！

忘了说，我让课程开始是这样的：

```
class GUI(QtGui.QMainWindow):
    def __init__(self):
        super(GUI, self).__init__()
        self.initUI() 
```

和

```
class Settings(QtGui.QWidget):
    def __init__(self):
        super(Settings, self).__init__()
        ...here goes some more...
        self.initUI2() 
```

我通过调用 main2() 打开设置窗口

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T17:49:48.443

您必须在程序中创建一个且仅一个 QApplication。

请记住，GUI 编程是事件驱动的，您首先声明小部件，然后使用 运行主循环`app.exec()`，当用户退出您的应用程序时，`app.exec()`返回。

QApplication 的目的是处理用户事件并使用 Qt 信号将它们传播到您的代码中。我建议你查看[Qt 文档](http://qt-project.org/doc/qt-4.8/qapplication.html)，它非常完整，即使它是针对 C++ 程序员的。

例如，创建两个小部件的方法是：

```
def main():
    app = QtGui.QApplication(sys.argv)

    ex = QtGui.QWidget()
    ex.show()
    ex2 = QtGui.QWidget()
    ex2.show()

    sys.exit(app.exec()) 
```

# python - 如何逐个元素地查找哪个numpy数组包含最大值？

> ID：16217883
> 
> 赞同：3
> 
> 时间：2013-04-25T14:44:54.407
> 
> 标签：python, algorithm, numpy

给定一个 numpy 数组列表，每个数组都具有相同的维度，我如何才能找到哪个数组包含逐个元素的最大值？

例如

```
import numpy as np
def find_index_where_max_occurs(my_list):
    # d = ...  something goes here ...
    return d

a=np.array([1,1,3,1])
b=np.array([3,1,1,1])
c=np.array([1,3,1,1])

my_list=[a,b,c]

array_of_indices_where_max_occurs = find_index_where_max_occurs(my_list)

# This is what I want:
# >>> print array_of_indices_where_max_occurs
# array([1,2,0,0])
# i.e. for the first element, the maximum value occurs in array b which is at index 1 in my_list. 
```

任何帮助将不胜感激......谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:50:20.020

如果你想要一个数组，另一个选择：

```
>>> np.array((a, b, c)).argmax(axis=0)
array([1, 2, 0, 0]) 
```

所以：

```
def f(my_list):
    return np.array(my_list).argmax(axis=0) 
```

这也适用于多维数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:34:20.357

为了好玩，我意识到@Lev的原始答案比他的广义编辑更快，所以这是广义堆叠版本，比`np.asarray`版本快得多，但不是很优雅。

```
np.concatenate((a[None,...], b[None,...], c[None,...]), axis=0).argmax(0) 
```

那是：

```
def bystack(arrs):
    return np.concatenate([arr[None,...] for arr in arrs], axis=0).argmax(0) 
```

一些解释：

我为每个数组添加了一个新轴：`arr[None,...]`相当于与扩展为适当数字维度`arr[np.newaxis,...]`的位置相同。这样做的原因是因为它将沿新维度堆叠，这是因为位于前面。`arr[np.newaxis,:,:,:]``...``np.concatenate``0``None`

因此，例如：

```
In [286]: a
Out[286]: 
array([[0, 1],
       [2, 3]])

In [287]: b
Out[287]: 
array([[10, 11],
       [12, 13]])

In [288]: np.concatenate((a[None,...],b[None,...]),axis=0)
Out[288]: 
array([[[ 0,  1],
        [ 2,  3]],

       [[10, 11],
        [12, 13]]]) 
```

如果有助于理解，这也可以：

```
np.concatenate((a[...,None], b[...,None], c[...,None]), axis=a.ndim).argmax(a.ndim) 
```

现在在末尾添加了新轴，因此我们必须沿最后一个轴堆叠并最大化，这将是`a.ndim`. 对于`a`、`b`和`c`2d，我们可以这样做：

```
np.concatenate((a[:,:,None], b[:,:,None], c[:,:,None]), axis=2).argmax(2) 
```

这相当于`dstack`我在上面的评论中提到的（`dstack`如果数组中不存在它，则添加第三个轴以堆叠）。

去测试：

```
N = 10
M = 2

a = np.random.random((N,)*M)
b = np.random.random((N,)*M)
c = np.random.random((N,)*M)

def bystack(arrs):
    return np.concatenate([arr[None,...] for arr in arrs], axis=0).argmax(0)

def byarray(arrs):
    return np.array(arrs).argmax(axis=0)

def byasarray(arrs):
    return np.asarray(arrs).argmax(axis=0)

def bylist(arrs):
    assert arrs[0].ndim == 1, "ndim must be 1"
    return [np.argmax(x) for x in zip(*arrs)]

In [240]: timeit bystack((a,b,c))
100000 loops, best of 3: 18.3 us per loop

In [241]: timeit byarray((a,b,c))
10000 loops, best of 3: 89.7 us per loop

In [242]: timeit byasarray((a,b,c))
10000 loops, best of 3: 90.0 us per loop

In [259]: timeit bylist((a,b,c))
1000 loops, best of 3: 267 us per loop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:48:17.873

```
[np.argmax(x) for x in zip(*my_list)] 
```

好吧，这只是一个列表，但是如果需要，您知道如何将其设为数组。:)

解释它的作用：`zip(*my_list)`相当于`zip(a,b,c)`，它为您提供了一个循环生成器。循环中的每个步骤都会给你一个像 一样的元组，循环中的步骤在`(a[i], b[i], c[i])`哪里`i`。然后，`np.argmax`为您提供具有最大值的元素的该元组的索引。

# php - Laravel：如果存在则更新，否则插入？

> ID：16217885
> 
> 赞同：4
> 
> 时间：2013-04-25T14:44:56.780
> 
> 标签：php, mysql, sql, laravel, eloquent

Laravel（Eloquent，Fluent ...）中是否有一种方法可以更新一行，如果该行不存在，它将被插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:47:53.313

Dunno id Laravel 有这样的方法，但是使用 mysql 你可以用这样的查询来做到这一点

```
INSERT INTO t SET c1='foo', c2='bar' ON DUPLICATE KEY UPDATE c2='bar' 
```

您必须在此表上有一个唯一索引才能使技巧起作用

# java - 使用 java.util 进行自动化测试

> ID：16217888
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:45:12.527
> 
> 标签：java

我想为网站编写一个使用 java.util 的自动化测试。我不太清楚 random() 是如何使用的，但是......

1.  我想为该网站创建一个新帐户，在创建帐户后，我希望通过从字母表中获取随机字母来制作用户名和密码。
2.  创建密码后，它应该确认生成的随机密码。
3.  使用已制作的凭据登录网站。

这是我到目前为止所拥有的：

```
public void createNewAccount() {

    clickOnCss("#not_logged_user");
    typeInCss("#quicksignup_name", "randomName");
    typeInCss("#quicksignup_email", "myEmail");
    typeInCss("#quicksignup_pass", "randomPassword");
    typeInCss("#quicksignup_pass_confirm", "confirmRandomPassword");
    clickOnCss("#quicksignup_button");

}

public void SignInWithNewAccount(){
    clickOnCss("hp_login_bt");
    typeInCss("#quicklogin_name", "NewRandomName");
    typeInCss("#quicklogin_pass", "NewRandomPassword");

}

@Test
public void randomName() {
Random signUp = new Random();
int name = signUp.nextInt(26) + (byte) 'a';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:47:59.620

将此更改为：

```
public void createNewAccount(String name) {
    clickOnCss("#not_logged_user");
    typeInCss("#quicksignup_name", name);
    typeInCss("#quicksignup_email", "myEmail");
    typeInCss("#quicksignup_pass", "randomPassword");
    typeInCss("#quicksignup_pass_confirm", "confirmRandomPassword");
    clickOnCss("#quicksignup_button");
}

@Test
public void randomName() {
    Random signUp = new Random();
    String name = signUp.nextInt(26).toString() + 'a';
    createNewAccount(name);
} 
```

类似的东西，如果需要，可以添加更多参数。

# java - MsAccess SQL 异常 参数太少

> ID：16217889
> 
> 赞同：0
> 
> 时间：2013-04-25T14:45:12.590
> 
> 标签：java, sql, netbeans, ms-access-2010

目前正在制作一个从 MSAccess 数据库中获取数据的 java 程序，其中一些错误非常令人沮丧。我不断收到这个 SQL.Exception ：参数太少。此程序中最后剩余的错误预计有 1 个错误。

db 的小背景：它有 3 张桌子（玩家桌（11 列）、团队桌（3 列）和对手桌（6 列）。

这些都是功能，我很确定问题出在某个地方

```
conn = Connect.ConnectDB();
    String sql = "insert into Player ("+"PlayerLastName,"+"PlayerFirstName,"+"Position)"+ "values("+txtid.getText()+ ",'"+txtname.getText()+"','"+txtaddress.getText()+"')" ;
    try{
        pst = conn.prepareStatement(sql);
        pst.executeQuery();
        pst.setString(1, txtid.getText());
        pst.setString(2, txtname.getText());
        pst.setString(3, txtaddress.getText());
        JOptionPane.showMessageDialog(null, txtid.getText() + " Saved");
        UpdateJTable();
        //conn.close();
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    } 
```

或者这个函数

```
 String sql = "select * from Player where PlayerLastName = " +txtid.getText()+ "";
    String pine = null;
    try{
        pst = conn.prepareStatement(sql);

        ResultSet res;
        res = pst.executeQuery();

        pine.equalsIgnoreCase(jTable1.getModel().getValueAt(rowsu, 10).toString());

        while(res.next()){
            JOptionPane.showMessageDialog(null, txtname + " " + txtid.getText() + " has a total of " +"4");//+ pine);//res.getInt("Penalties") );

        }
        UpdateJTable();

    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:54:41.500

一方面，您似乎在插入语句中的姓氏周围缺少单引号。

可能还有其他错误，这只是我注意到的第一件事。

如果您只是在执行之前记录 sql 字符串，这应该很容易调试。

**编辑**

我认为您对 setString() 的调用也是一个问题。以下是您应该如何执行此操作：

```
conn = Connect.ConnectDB();
    String sql = "insert into Player (PlayerLastName, PlayerFirstName, Position) values(?, ?, ?)";
    try{
        pst = conn.prepareStatement(sql);
        pst.setString(1, txtid.getText());
        pst.setString(2, txtname.getText());
        pst.setString(3, txtaddress.getText());
        pst.execute();
        JOptionPane.showMessageDialog(null, txtid.getText() + " Saved");
        UpdateJTable();
        //conn.close();
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    } 
```

# c# - 如何约束一个泛型类只使用两个类

> ID：16217893
> 
> 赞同：0
> 
> 时间：2013-04-25T14:45:29.953
> 
> 标签：c#, .net, generics, constraints, communication

我有一个通用类对封装其他协议的协议进行建模。所有的协议都实现了一个特定的接口，但是这个泛型类必须只包含其中两个协议中的一个，因为在现实世界中其他组合不存在。

有没有办法指定两个允许的类？

目前我有：

```
public class ProtocolEncapsulator<TContainedCommand> : IBaseCommand where TContainedCommand : IBaseCommand 
```

但这允许框架的用户创建无意义的组​​合。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:07:37.160

我建议创建一个仅由两种协议实现的接口，然后使用类型约束来限制相关方法。

就像是：

```
public interface IExclusiveCommand : IBaseCommand
{
    void ExclusiveMethod();  //Not necessary if there are no differences between Base and Exclusive
}

public class ProtocolEncapsulator<TContainedCommand> : IBaseCommand where TContainedCommand : IExclusiveCommand
{
} 
```

虽然它确实添加了另一个界面并且可能被视为增加了复杂性，但我相信它实际上通过使它们更加明确和清晰来简化事情。并且编译时限制使它更易于维护和更容易排除故障。

# wpf - 从 .NET 桌面应用程序使用 Google Analytics

> ID：16217894
> 
> 赞同：18
> 
> 时间：2013-04-25T14:45:29.983
> 
> 标签：wpf, google-analytics, google-analytics-api

是否可以使用 C# 的官方 Google API 发送“PageViews”并记录活动？例如，如果我想跟踪我的 wpf/winforms 桌面应用程序的页面浏览量。?

我在哪里可以找到一些官方的例子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-27T16:25:50.447

我刚刚下载了“Garlic”并尝试了示例应用程序，它很有效！

[https://github.com/dustyburwell/garlic](https://github.com/dustyburwell/garlic)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-15T06:54:09.843

**免责声明：我是 Gappalytics 的作者**

我认为这里缺少的一个是用于代码/UI 事件跟踪的[Gappalytics](https://www.nuget.org/packages/Gappalytics/)，它是一个非常简单的库，可以让您充分发挥 Google 分析的潜力。

它比 lib 之前提到的效果更好，因为它可以保持用户的唯一性，这样您的数据就不会倾斜。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-07T02:58:55.087

Google 刚刚发布了用于 Google Analytics的[Windows SDK 。](https://github.com/dotnet/windows-sdk-for-google-analytics)它适用于 UWP、Xamarin、~~Windows 窗体和 WPF~~.

官方[公告](https://blogs.windows.com/buildingapps/2017/02/08/windows-developer-day-creators-update/#o0Qr5wLkfGs4jh5H.97)是在 2017 年 2 月 8 日最近的 Windows 开发者日上发布的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-10T05:54:11.167

这里有一些选项，但没有一个是完美的。谷歌有一个 iOS 和 android SDK。为什么不是 Windows SDK？？？

*   [蒜](https://github.com/dustyburwell/garlic)
*   [加网](https://github.com/pavels/Ga.net)
*   [服务器端谷歌分析](http://blog.diniscruz.com/2013/01/creating-server-side-google-analytics.html)

# c++ - 用于检测 Ajax 调用的 Internet Explorer 加载项

> ID：16217896
> 
> 赞同：6
> 
> 时间：2013-04-25T14:45:35.393
> 
> 标签：c++, internet-explorer

使用 IWebBrowser2 界面很容易知道导航何时发生 (OnBeforeNavigate) 和完成 (OnDocumentComplete)。但是，浏览器中的许多工作都是通过 Ajax 调用（使用 XMLHttpRequest）完成的。

当 Ajax 调用在 IE 中发生并完成时，有没有办法订阅事件跟踪？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T16:49:47.463

官方方法是使用[IHTMLChangeSink](http://msdn.microsoft.com/en-us/library/aa704257%28v=vs.85%29.aspx)创建变更日志。它并不复杂，但实现起来有点繁琐，这样你就不会丢失任何请求。

我认为最好的方法可能是[创建一个 HTTP 代理服务器](http://www.codeproject.com/Articles/2121/How-to-create-a-simple-proxy-in-Managed-C)，然后使用[InternetSetOption](http://support.microsoft.com/kb/226473)将代理（注意第一个参数是`NULL`为当前进程设置）设置为您的本地 HTTP 代理服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T16:41:59.590

这个先前的问题似乎提供了一个答案：

[监控来自 IE BHO 的 ajax 调用](https://stackoverflow.com/questions/4671412/monitor-ajax-calls-from-ie-bho)

它基本上说你必须向每个页面注入一些 JavaScript 来处理[onreadystatechange](http://msdn.microsoft.com/en-us/library/ms536957%28v=VS.85%29.aspx)。

# sql - 适用于 SQLFiddle 不适用于 SQL Server 2012

> ID：16217900
> 
> 赞同：0
> 
> 时间：2013-04-25T14:45:44.143
> 
> 标签：sql, sql-server, sqlfiddle

当我在 SQL Fiddle 中运行此查询时，它运行完美：

```
;with cte as 
(SELECT 
 analysisvalue.analysisid, 
 heatname, 
 analysistime, 
 sampletype,
 grade, 
 productid, 
 element, 
 value 
 FROM 
 dbo.AnalysisValue 
 INNER JOIN 
 dbo.CAnalysis 
 ON 
 dbo.AnalysisValue.AnalysisID = dbo.CAnalysis.AnalysisID
 WHERE 
 heatname = 'A7M0066' 
 )
 SELECT 
      * 
 FROM 
 S_analysis s
 CROSS JOIN (SELECT TOP 1 analysistime
 FROM cte
 ORDER BY analysisid desc
 ) c
 WHERE s.heat_no = 'A7M0066' OR
 (s.analysis_datetime BETWEEN c.analysistime AND DATEADD(hh, 2, c.analysistime )) 
```

但是，当我在 SQL Server 2012 中运行它时，我收到带有前导分号的错误：

```
Msg 170, Level 15, State 1, Line 1
Line 1: Incorrect syntax near ';'. 
```

没有分号时出现此错误：

```
Msg 156, Level 15, State 1, Line 1
Incorrect syntax near the keyword 'with'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:47:37.527

Instead of a CTE, you could use a #temp table and see if the query is valid:

```
SELECT 
analysisvalue.analysisid, 
heatname, 
analysistime, 
sampletype,
grade, 
productid, 
element, 
value 
INTO #temptable
FROM 
dbo.AnalysisValue 
INNER JOIN 
dbo.CAnalysis 
ON 
dbo.AnalysisValue.AnalysisID = dbo.CAnalysis.AnalysisID
WHERE 
heatname = 'A7M0066';

SELECT * 
FROM 
S_analysis s
CROSS JOIN (SELECT TOP 1 analysistime
FROM #temptable
ORDER BY analysisid desc
) c
WHERE s.heat_no = 'A7M0066' OR
(s.analysis_datetime BETWEEN c.analysistime AND DATEADD(hh, 2, c.analysistime )) 
```

# asp.net-mvc-3 - 在 ASP.net MVC3 中根据标题和内容生成页面

> ID：16217901
> 
> 赞同：0
> 
> 时间：2013-04-25T14:45:44.503
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我希望做一些可能不可能的事情，但我会留给社区来决定。

我有一个名为 content 的表，在这个表中有以下内容：**Title**和**Content**。

基于此信息，我希望用户能够输入标题及其内容，并根据标题创建一个页面，以便他们可以访问 site.com/title 并查看该页面的内容。

我敢肯定还有更多，这就是我需要你的帮助的地方。我不是要创建一个 CMS，而是要创建一个 CMS，即“页面生成”部分。

我没有任何代码，因为这是一个想法，我正在寻找生成代码的方向。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:59:13.883

使用硬编码控制器创建一个路由，该控制器将字符串（**标题**）作为参数。然后在该控制器中，使用**Title**将**Content**从数据库中拉出。将**内容**传递给视图（确保对 HTML 进行清理）并显示它。

```
routes.MapRoute(
    name: "NotACMS",
    url: "{title}",
    defaults: new { controller = "NotACMS", action = "Index" }
); 
```

# javascript - jQuery 和 CSS 导致文本在动画后奇怪地移动

> ID：16217909
> 
> 赞同：0
> 
> 时间：2013-04-25T14:45:58.663
> 
> 标签：javascript, jquery, html, css

我创建了这个[Fiddle](http://jsfiddle.net/sPUDL/ "小提琴")，它可以向下和向上滚动一个框，但是当动画完成时，文本“隐藏”和“显示”会移动一点。我尝试了一些不同的方法，但无法正确滚动。

```
$('a#mainToggle').click(function(){
    if ($('a#mainToggle').hasClass("down")) {
        $('a#mainToggle').removeClass("down");
        $('a#mainToggle').addClass("up");

        $('#contentCollapse').stop(true, true).animate({height: '30px'},1000,function(){
                $('#contentCollapse').css("display", "none");
                $('a#mainToggle').addClass("hangDown");
        });
        $('a#mainToggle span').text("Show");
        $('#mainToggle em').html("<img src='img/show.gif' />");
    } // end if
    else{
        $('#contentCollapse').css("display", "block");
        curHeight = $('#contentCollapse').height();
        $('a#mainToggle').removeClass("hangDown");
        autoHeight = $('#contentCollapse').css('height', 'auto').height();
        autoHeight = autoHeight + 15;
        $('#contentCollapse').height(curHeight).animate({height: autoHeight}, 1000,function(){
            $('a#mainToggle').addClass("down");
            $('a#mainToggle').removeClass("up");
            $('a#mainToggle span').text("Hide");
            $('#mainToggle em').html("<img src='img/hide.gif' />");
        });
    } // end else
}); 
```

# python - Python：获取正则表达式匹配的文本

> ID：16217910
> 
> 赞同：7
> 
> 时间：2013-04-25T14:45:59.410
> 
> 标签：python, regex

我在 Python 中有一个正则表达式匹配对象。我想得到它匹配的文本。说如果模式是`'1.3'`，搜索字符串是`'abc123xyz'`，我想得到`'123'`。我怎样才能做到这一点？

我知道我可以使用`match.string[match.start():match.end()]`，但我发现对于这样一个基本查询来说这非常麻烦（并且在某些情况下是浪费的）。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T14:48:31.060

您可以简单地使用匹配对象的`group`功能，例如：

```
match = re.search(r"1.3", "abc123xyz")
if match:
    doSomethingWith(match.group(0)) 
```

获得整场比赛。**编辑：**正如 thg435 指出的那样，您也可以省略`0`and just call `match.group()`。

附加说明：如果您的模式包含括号，您甚至可以通过将 等传递给 来获取这些子`1`匹配`2`项`group()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T14:58:13.503

您需要将正则表达式放在“（）”中才能获得该部分

```
>>> var = 'abc123xyz'
>>> exp = re.compile(".*(1.3).*")
>>> exp.match(var)
<_sre.SRE_Match object at 0x691738>
>>> exp.match(var).groups()
('123',)
>>> exp.match(var).group(0)
'abc123xyz'
>>> exp.match(var).group(1)
'123' 
```

否则它不会返回任何东西：

```
>>> var = 'abc123xyz'
>>> exp = re.compile("1.3")
>>> print exp.match(var)
None 
```

# android - Facebook api并在android中向多个朋友发送邀请

> ID：16217911
> 
> 赞同：2
> 
> 时间：2013-04-25T14:46:00.583
> 
> 标签：android, facebook

我在通过 facebook api 邀请朋友到我的应用程序时遇到问题。这是我的方法：

```
 private void inviteFromFacebook(Activity activity, List<GraphUser> list) {
        for(int i=0; i<list.size(); i++) {
            //TODO post invite to friends wall
//          Log.v("MainActivity", "user id: " + user.getId());

            if(list == null || list.size() == 0)        
                return;

            Bundle parameters = new Bundle();

            String friendsIdsInFormat = "";

            friendsIdsInFormat = friendsIdsInFormat + list.get(i).getId();

            parameters.putString("to", friendsIdsInFormat);
            parameters.putString( "message", "Use my app!");

            Facebook mFacebook = new Facebook( getResources().getString(R.string.facebook_app_id));
            // Show dialog for invitation
            mFacebook.dialog(activity, "apprequests", parameters, new Facebook.DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onCancel() {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onError(DialogError e) {
                    // TODO Auto-generated method stub

                }
            });
        }
    } 
```

Everyting 没问题，但我想向许多炸薯条发送邀请，所以在这段代码中，我为每个人显示一个对话框。我怎样才能只显示一个对话，但有很多朋友？这是可能的还是我必须为每个朋友显示对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:24:55.067

You can send a comma delimited list in the "to" field, like "123,456,789".

Be careful about sending too many requests though, you don't want to be identified as a spam app.

# gdb - 发生Segfault，GDB断线，但segfault后跑线显示没有违例

> ID：16217912
> 
> 赞同：0
> 
> 时间：2013-04-25T14:46:01.827
> 
> 标签：gdb, segmentation-fault

我有一个在特定行出现段错误的程序：

uint64_t small_num = *(uint64_t*)(smaller_base+index);

GDB 成功捕获了允许我调试问题的段错误。但是，如果我从 GDB 提示符运行该行，则不会发生内存访问冲突：

(gdb) p small_num = *(uint64_t*)(smaller_base+index)

谁能提供一些有关如何调试此问题的建议？我不知所措，因为我验证了 small_base+index 处的内存存在。会不会和选角有关？

提前致谢。

编辑：提供更多代码，但它真的很简单。我已经大量编辑代码以显示索引的要点。

```
uint64_t ** find_difference(unsigned char * larger_base,
                              uint64_t size,
                              unsigned char * smaller_base,
                              uint64_t tmap_size)
{
    uint64_t len = size < tmap_size?size:tmap_size;
    uint64_t index=0;
    while(index<len)
    {
            uint64_t larger_num = *(uint64_t*)(larger_base+index);
            uint64_t smaller_num = *(uint64_t*)(smaller_base+index);
            if(larger_num > smaller_num)
            {
                ... do stuff
            }
            index++;
    }

    ...
} 
```

编辑#2：现在我正在考虑它，指针取消引用是否可能超出 len？据我了解，x86 数字是从高地址到低地址存储的。因此在内存中，数字 0x01020304 存储为 0x04 0x03 0x02 0x01。这个对吗？如果这不是真的，那么尊重将超出缓冲区的末尾。但是，在 GDB 中，我验证了该地址是可访问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:09:12.983

我不知道你如何使用 find_difference() 函数以及传递给函数的参数值是什么，但我怀疑你的指针算法是错误的。

您将 large_base 和 small_base 加 1 并将结果地址转换为 u64*。如果 size 以字节为单位，那么您应该检查 large_base+index+8 < size。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T21:03:33.963

您的原始指针算法在将**(unsigned char *)**转换为**uint64_t之前将****索引**添加到导致未对齐的内存负载，即尝试从不是 8 的倍数的地址中取消引用**(uint64_t *)** 。这在调试器中有效，但在您的程序中导致 SEGFAULT。

# javascript - 按类名将属性推送到数组？

> ID：16217914
> 
> 赞同：1
> 
> 时间：2013-04-25T14:46:08.717
> 
> 标签：javascript, arrays, push

有人可以帮助我如何将具有相同类名的元素的不同属性推送到数组中吗？我不太擅长 Javascript，这是我尝试过的，但是数组变成了空的。

一个数组应包含图像的 URL，另一个用于跨元素中的图像文本：

```
function slideShow(){
  imgUrlList.length = 0;
  imgTextList.length = 0;
  var imgUrl = document.getElementsByClassName('markedImg');
  var imgText = document.getElementsByClassName('marked');
  for(j=0; j<imgUrl.length; j++){
    imgUrlList.push(imgUrl.src);
  }
  for(k=0; k<imgText.length; k++){
    imgTextList.push(imgText.innerHTML);
  }
  openWindow();
} 
```

# android - 关闭特定活动android

> ID：16217917
> 
> 赞同：0
> 
> 时间：2013-04-25T14:46:14.410
> 
> 标签：android, android-activity

只是，我怎样才能关闭我的应用程序的特定活动？

例如我有以下活动：

A1 > B1 > C1

在 C1 中，我可以使用新参数再次进入 A 活动，因此当我打开新的 B (B2) 时，我想关闭旧活动：A1、B1、C1。

作为新的结果：

A2 > B2

我可以在 B2 之后回到 A2，并从 A2 完成应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:53:59.820

你有两种方法可以做到这一点：

您可以使用活动声明，例如[single top](http://developer.android.com/guide/topics/manifest/activity-element.html)。[或者，您可以使用start for result](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)在活动之间传递数据。然后在[onActivityResult](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)上调用`finish();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:50:24.137

这应该适合你：

```
Intent i = new Intent(C.this, A.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_CLEAR_TASK);
startActivity(i); 
```

`FLAG_ACTIVITY_CLEAR_TOP`将清除`Activities`堆栈中的所有其他内容。`FLAG_ACTIVITY_CLEAR_TASK`

> 此标志将导致在活动开始之前清除与活动相关联的任何现有任务。

[意图标志](http://developer.android.com/reference/android/content/Intent.html)

**@Dalmas 所述的**注意事项**`FLAG_ACTIVITY_CLEAR_TASK`仅适用于 API >= 11**

# r - R - 遍历列表中的多个数据帧

> ID：16217919
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:46:22.000
> 
> 标签：r, loops

更新：来自 dput(ldf[[1]]) 的结果

没问题。这是：“A 04/18/2013 06:34:58 3D9.1C2D9F22C2”、“A 04/18/2013 06:34:58 3D9.1C2D9F22C2”、“A 04/18/2013 06:38:24 3D9.1C2DDAE977”、“A 04/18/2013 06:42:38 3D9.1C2DA0E0B5”、“A 04/18/2013 06:42:38 3D9.1C2DA0E0B5”、“A 04/18/2013 07:07： 49 3D9.1C2DD9D3CF"，"A 04/18/2013 07:07:49 3D9.1C2DD9D3CF")

*   问题可能在于这 4 个变量的某些行不完整。*---------------------------------------------------- ----------------------------

我从这个论坛得到了很多这个难题，但我仍然被卡住了。我正在尝试遍历 30 个数据帧的列表，这些数据帧的数据是从文本文件中读取的。在循环结束时，我不断收到一条错误消息和一个空的目标数据帧。谁能看出问题出在哪里？

以下是一些示例数据：

```
[73] "E 04/21/2013 14:05:01 3D9.1C2DF6F22D" "E 04/21/2013 14:05:01 3D9.1C2DF6F22D"
[75] "E 04/21/2013 14:47:54 3D9.1C2DF6F22D" "E 04/21/2013 14:47:54 3D9.1C2DF6F22D"

[[26]]
[1] "E 04/22/2013 17:07:02 3D9.1C2DDAC745" "E 04/22/2013 17:07:02 3D9.1C2DDAC745"
[3] "E 04/22/2013 17:07:02 3D9.1C2DDAC745"

[[27]]
[1] "F 04/17/2013 15:14:39 3D9.1C2D1DB26E" "F 04/17/2013 15:14:43 3D9.1C2D1DB26E"
[3] "F 04/17/2013 15:14:43 3D9.1C2D1DB26E" "F 04/17/2013 15:14:43 3D9.1C2D1DB26E" 
```

这是我的循环代码：

```
new <- data.frame()

for (i in 1:length(ldf)) {
 a[i] <- as.data.frame(ldf[i])
 a[i] <- as.data.frame(a[i][-1,])
 names(a[i]) <- "id"
 c[i] <- strsplit(as.character(a[i]$id)," ")
 reader[i] = sapply(c[i],function(x)x[1])
 date[i] = sapply(c[i],function(x)x[2])
 time[i] = sapply(c[i],function(x)x[3])
 code[i] = sapply(c[i],function(x)x[4])
 out[i] <- as.data.frame(cbind(reader[i],date[i],time[i],code[i]))

new <- rbind(new, out[i])
} 
```

这是我收到的错误消息：

```
Error in [<-.data.frame(`*tmp*`, i, 
value = list(c..A.04.17.2013.12.24.07.3D9.1C2D1DB26E....A.04.17.2013.12.24.07.3D9.1C2D1DB26E... = c(1L,  
: replacement element 1 has 337 rows, need 394 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:00:33.403

如果我理解正确你想要这个：

```
ldf <- list(c("E 04/21/2013 14:05:01 3D9.1C2DF6F22D","E 04/21/2013 14:05:01 3D9.1C2DF6F22D","E 04/21/2013 14:47:54 3D9.1C2DF6F22D","E 04/21/2013 14:47:54 3D9.1C2DF6F22D"),
c("E 04/22/2013 17:07:02 3D9.1C2DDAC745","E 04/22/2013 17:07:02 3D9.1C2DDAC745","E 04/22/2013 17:07:02 3D9.1C2DDAC745"),
c("F 04/17/2013 15:14:39 3D9.1C2D1DB26E","F 04/17/2013 15:14:43 3D9.1C2D1DB26E","F 04/17/2013 15:14:43 3D9.1C2D1DB26E","F 04/17/2013 15:14:43 3D9.1C2D1DB26E"))

do.call(rbind,lapply(ldf,function(x) data.frame(do.call(rbind,strsplit(x," ")))))
   X1         X2       X3             X4
1   E 04/21/2013 14:05:01 3D9.1C2DF6F22D
2   E 04/21/2013 14:05:01 3D9.1C2DF6F22D
3   E 04/21/2013 14:47:54 3D9.1C2DF6F22D
4   E 04/21/2013 14:47:54 3D9.1C2DF6F22D
5   E 04/22/2013 17:07:02 3D9.1C2DDAC745
6   E 04/22/2013 17:07:02 3D9.1C2DDAC745
7   E 04/22/2013 17:07:02 3D9.1C2DDAC745
8   F 04/17/2013 15:14:39 3D9.1C2D1DB26E
9   F 04/17/2013 15:14:43 3D9.1C2D1DB26E
10  F 04/17/2013 15:14:43 3D9.1C2D1DB26E
11  F 04/17/2013 15:14:43 3D9.1C2D1DB26E 
```

请注意，所有列都属于类因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:54:13.513

你`ldf`的数据框列表是什么？如果是这样，您没有正确索引它们。`list`您仍在尝试对类对象进行操作。看看这个玩具例子：

```
L <- list( x=matrix(1:4,nrow=2) , y=matrix(1:4,nrow=2) )
L
#$x
#    [,1] [,2]
#[1,]    1    3
#[2,]    2    4

#$y
#    [,1] [,2]
#[1,]    1    3
#[2,]    2    4

class(L[1])
[1] "list"
class(L[[1]])
[1] "matrix" 
```

您在循环中使用了很多没有多大意义的循环结构，因为它们是作为便利函数提供的，因此您不必使用循环。使用您的数据子集，您可以获得我认为您想要的结果，使用`lapply`访问列表中的每个 data.frame，然后使用每个数据框`apply`的列在它们上运行`strplit`，如下所示：

```
# Make a list of two data.frames using some of your data
dat1 <- data.frame( x = c("E 04/21/2013 14:05:01 3D9.1C2DF6F22D" , "E 04/21/2013 14:05:01 3D9.1C2DF6F22D") , y = c( "E 04/22/2013 17:07:02 3D9.1C2DDAC745" , "E 04/22/2013 17:07:02 3D9.1C2DDAC745") )
dat2 <- data.frame( x = c("F 04/17/2013 15:14:39 3D9.1C2D1DB26E" , "F 04/17/2013 15:14:43 3D9.1C2D1DB26E") , y = c( "F 04/17/2013 15:14:43 3D9.1C2D1DB26E" , "F 04/17/2013 15:14:43 3D9.1C2D1DB26E") )
dat <- list( dat1 , dat2 )

res <- data.frame( t( data.frame( lapply( dat , function(x) apply( x , 2 , strsplit , " " ) ) ) ) )
names(res) <- c( "Reader" , "Date" , "Time" , "Code" )
rownames(res) <- seq_len( nrow( res ) )
#  Reader       Date     Time           Code
#1      E 04/21/2013 14:05:01 3D9.1C2DF6F22D
#2      E 04/21/2013 14:05:01 3D9.1C2DF6F22D
#3      E 04/22/2013 17:07:02 3D9.1C2DDAC745
#4      E 04/22/2013 17:07:02 3D9.1C2DDAC745
#5      F 04/17/2013 15:14:39 3D9.1C2D1DB26E
#6      F 04/17/2013 15:14:43 3D9.1C2D1DB26E
#7      F 04/17/2013 15:14:43 3D9.1C2D1DB26E
#8      F 04/17/2013 15:14:43 3D9.1C2D1DB26E 
```

# python - Python Twisted 长数据

> ID：16217922
> 
> 赞同：0
> 
> 时间：2013-04-25T14:46:33.423
> 
> 标签：python, networking, twisted

Python 编码员

我正在使用 twisted 构建一个服务器，它在每个连接上接收 3000 字节的数据，我的问题是包被截断并存储在数据库中，就像包块一样，我正在寻找的是解决这种问题的一种方法必须被解析为一个长数据的数据包。

收到的行不是一种方式，因为这种数据是在没有分隔符的情况下发送的，然后我正在考虑一种循环方式，但是我不完全确定它或如何实现

```
from twisted.internet.protocol import Factory, Protocol
from twisted.internet import reactor
import binascii
from Datagram import *

class LingServer(Protocol):

    def __init__(self):
        print 'Staring Ling Server'
        pass

    def connectionMade(self):
        try:
            print 'Accepted connection'
        except ValueError:
            print "Oops!  Connection was not started"

    def connectionLost(self, reason):
        print "Connection lost ", reason  

    def dataReceived(self, data):
        try:
            print "Data received ", data
            data = binascii.hexlify(data)
            Datagram (header=data[:10], content=data[10:])
            session.commit()

            #self.transport.write(self.decoder.processDatagram(data))
        except ValueError:
            print "Oops!  That was no valid data.  Try again..."

class LingFactory(Factory):  

    def __init__(self):
        pass

    def buildProtocol(self, addr):
        return LingServer()

reactor.listenTCP(12345, LingFactory())
reactor.run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:55:34.803

TCP是面向流的。请参阅[本主题的常见问题解答条目](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith)。

如果要在处理前缓冲 3000 个字节，请参阅`twisted.protocols.stateful.StatefulProtocol`. 例如：

```
class LingServer(StatefulProtocol):
    def getInitialState(self):
        return self.ling, 3000

    def ling(self, data):
        # Process here, len(data) == 3000 
```

# javascript - 文件下载过程不会启动客户端（即使使用 Content-Disposition: attachment ; filename= )

> ID：16217923
> 
> 赞同：1
> 
> 时间：2013-04-25T14:46:36.427
> 
> 标签：javascript, jquery, webserver

以下代码发送一个 GET 请求，其响应应该在客户端 (Chrome) 上启动文件下载过程。

```
$.ajax({
  type: "GET",
  traditional: true,
  async : false,
  url  : "/query", 
  data : parms,
  success : function(data, textStatus, jqXHR) {
    $("#msg").text(data);
  },
  error: function(XMLHttpRequest, textStatus, errorThrown) {
    alert('error');
  }
}); 
```

响应标头具有启动文件下载 ( `Content-Disposition: attachment ; filename=2013_04_04.08_00_00-09_00_00.VOD.60.tda`) 所需的标头。但是，这不会发生。我确实在“msg”id 控件中看到了响应内容。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:53:55.333

附加一个`iframe`，设置它`src`，然后自然地等待响应。

```
var iframe = document.createElement("iframe");
iframe.style.display = "none";
document.body.appendChild(iframe);
iframe.src = "Your URL" + "?" + "Your GET Params"; 
```

# objective-c - 有序集和核心数据 (NSOrderedSet)

> ID：16217925
> 
> 赞同：11
> 
> 时间：2013-04-25T14:46:39.330
> 
> 标签：objective-c, ios5, core-data, nsset

`dateTime`我有一个包含属性和的股价列表`value`。

目前，我在使用排序描述符获取股价时对股价进行排序。

现在，我想更改我的代码并将它们存储在已经排序的顺序中，以更快地检索最新的股价（dateTime = max）。

我正在使用一一插入股价

`SharePrice *priceItem= [NSEntityDescription insertNewObjectForEntityForName:@"SharePrice" inManagedObjectContext:context];`

如何在使用排序描述符插入股价后立即对股价进行排序`dateTime`？

还是我需要将其转换为 a`NSMutableOrderedSet`并使用`sortUsingComparator:`？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-27T07:46:20.380

![CoreData 上的有序属性](https://i.stack.imgur.com/qsVzL.png)

在 CoreData 模型中标记属性的 Ordered 复选框。

还要确保在您的 AppDelegate 中设置 CoreData 自动迁移（创建 PersistentStore 时的选项字典）。这样，CoreData 将能够在不丢失数据的情况下进行此更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-06T06:29:20.370

我想添加到已接受的答案中，如果您有 a `NSSet`，则必须`NSOrderedSet`在选择有序复选框后将其更改为 a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:56:43.170

我不确定使用 NSMutableOrderedSet 会如何影响底层的 sqlite 数据库。很高兴认为它会按集合的顺序存储它，但底层实现是一个黑盒，我不认为有任何保证它会始终如一地工作，如果它工作的话。

如果这是您正在寻找的性能提升，我认为向该属性添加索引将是最好的方法。

# c# - NAudio 流到 Windows Mediaplayer

> ID：16217932
> 
> 赞同：0
> 
> 时间：2013-04-25T14:46:56.347
> 
> 标签：c#, media-player, naudio

我在页面上嵌入了 Windows MediaPlayer。我从 byte[] 数组获得的 MemoryStream 中有一个音频文件（WAV）。我需要使用 NAudio 在内存中播放该文件。如何将 MediaPlayer 的 src 指向内存文件？

# mysql - SQL 从 n 个组中获得均匀分布 - 获取随机项

> ID：16217934
> 
> 赞同：3
> 
> 时间：2013-04-25T14:47:09.037
> 
> 标签：mysql, sql, random, left-join

我有以下表格：

```
TABLE product
id int(11)
title varchar(400)

TABLE tag
id int(11)
text varchar(100)

TABLE product_tag_map
product_id int(11)
tag_id int(11) 
```

PRODUCT_TAG_MAP 将标签映射到产品。系统中标签的分布不正常，即有些标签的产品比其他标签多得多。

我正在尝试编写一个将获取 25 个随机产品的 SQL：每个标签 5 个产品，用于 5 个标签（所以这是 5x5 = 25）。

在这里找到了答案：[How can I get an even distribution using WHERE id IN(1,2,3,4)](https://stackoverflow.com/questions/11233770/how-can-i-get-an-even-distribution-using-where-id-in1-2-3-4)

但这不会产生随机产品——它总是为每个标签获取相同的产品。

这是我的SQL：

```
SET @last_tag = 0;
SET @count_tag = 0;

SELECT DISTINCT id FROM (
SELECT
  product.*,
  @count_tag := IF(@last_tag = product_tag_map.tag_id, @count_tag, 0) + 1 AS tag_row_number,
  @last_tag := product_tag_map.tag_id
FROM product
  LEFT JOIN product_tag_map ON (product_tag_map.product_id=product.id)
WHERE
  product_tag_map.tag_id IN (245,255,259,281,296)
) AS subquery WHERE tag_row_number <= 5; 
```

如何使它返回每个标签的随机产品？

任何帮助将非常感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:51:16.427

这个查询有很多技巧：

1.  添加嵌套级别以在子查询中使用 LIMIT：[mySQL 子查询限制](https://stackoverflow.com/questions/7124418/mysql-subquery-limit)
2.  为 MySQL 添加 row_number 功能：[How to select the first/least/max row per group in SQL](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

最终结果是很多子查询：

```
SELECT tag.Name, t0.Id as MapId
FROM
(
    SELECT * 
         , @num := if(@type = tag_id, @num + 1, 1) as row_number
         , @type := tag_id as dummy
    FROM (
        SELECT *
        FROM map m
        WHERE tag_id in
        (
            SELECT *
            FROM
            (
                SELECT id
                FROM tag
                ORDER BY RAND() LIMIT 5
            ) t
        )
     ORDER BY tag_id, RAND()  
  ) mainTable
  , (SELECT @num:=0) foo
  , (SELECT @type:=0) foo2
) t0 
    INNER JOIN tag
        ON t0.tag_id = tag.id
WHERE row_number <= 5 
```

[SQL小提琴](http://sqlfiddle.com/#!2/1ed69/3/0)

这个想法是选择前 5 个随机标签。这并不难，只是一个简单的`ORDER BY RAND() LIMIT 5`.

然后棘手的部分是太模拟 a `ROW_NUMBER() OVER(PARTITION BY tag_id, RAND())`，因为随机排列每个项目，但按标签分区正是您所需要的。所以你声明变量并按照查询显示的那样做。

最后，过滤 row_number，你就有了 25 个随机项目！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:37:59.687

我还想提供“蛮力”方法。这适用于大多数数据库（尽管该`rand()`函数可能被命名为其他名称）。

```
select content_item_id from content_item where tag_id = 245 order by RAND() limit 5
union all
select content_item_id from content_item where tag_id = 255 order by RAND() limit 5
union all
select content_item_id from content_item where tag_id = 259 order by RAND() limit 5
union all
select content_item_id from content_item where tag_id = 281 order by RAND() limit 5
union all
select content_item_id from content_item where tag_id = 206 order by RAND() limit 5 
```

如果您在`content_item(tag_id)`.

# javascript - 如何在ie中使用javascript启用activex控件

> ID：16217944
> 
> 赞同：-1
> 
> 时间：2013-04-25T14:47:40.927
> 
> 标签：javascript, internet-explorer-8, activex

有没有办法通过javascript启用internet explorer的activex控件，我在网上搜索找不到任何受信任的资源，是否可以通过javascript启用activex控件

我得到的唯一来源可以在[这里找到](http://mar.anomy.net/entry/2006/11/24/02.12.18/)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:52:44.297

我认为没有办法通过 JavaScipt 或类似的方式激活它们。我认为它曾经是一种安全措施，但我不确定。

如果您查看 MSDN，但是有一个解决方案：http: [//msdn.microsoft.com/en-us/library/ms537508](http://msdn.microsoft.com/en-us/library/ms537508(v=vs.85).aspx) (v=vs.85).aspx 如果您在加载 DOM 后通过 JavaScript 动态添加控件，它们立即激活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:50:00.943

无法通过 javascript 启用 ActiveX。这是浏览器级别的设置。

# c# - 获取 UAC 保护目录中的所有文件

> ID：16217946
> 
> 赞同：1
> 
> 时间：2013-04-25T14:47:44.323
> 
> 标签：c#, uac, getdirectories

我是 C# 的初学者，我想获取 Documents and Setting 或 Desktop 文件夹等中的所有文件和目录。

我一直试图在我的计算机上禁用我的 UAC 但它不起作用，我还尝试在 VS 2012 中创建一个清单并将“requestedExecutionLevel 级别”更改为管理员但没有成功。我仍然收到“拒绝访问”错误。

我怎样才能进入这些文件夹？难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:59:51.360

您的应用程序需要管理员级别的权限。最好在启动时请求它们，这可以在配置文件中完成：

```
 <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2"> 
   <security> 
      <requestedPrivileges> 
         <requestedExecutionLevel 
            level="requireAdministrator" 
         /> 
      </requestedPrivileges> 
   </security> 
</trustInfo> 
```

取自：[http ://code.msdn.microsoft.com/windowsdesktop/CSUACSelfElevation-644673d3](http://code.msdn.microsoft.com/windowsdesktop/CSUACSelfElevation-644673d3)

# java - 如何将 Integer 添加到 String ArrayList？

> ID：16217948
> 
> 赞同：13
> 
> 时间：2013-04-25T14:47:45.590
> 
> 标签：java, arraylist

```
List list = new ArrayList<String>() ;
list.add(1) ;
Integer hello = (Integer) list.get(0) ;
System.out.println(hello); 
```

上面的代码有一个**List类型的引用，它引用了****String**类型的**ArrayList**的一个实例。执行该行时，不是将 1 添加到 ArrayList (of type String) 吗？如果是，那么为什么允许这样做？**`list.add(1)`**

 *** * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T14:51:00.947

您使用了类型擦除，这意味着您忽略了之前设置的通用检查。你可以摆脱这个，因为泛型是一个编译时特性，在运行时不检查。

你有什么和你一样

```
List list = new ArrayList() ;
list.add(1) ;
Integer hello = (Integer) list.get(0) ;
System.out.println(hello); 
```

或者

```
List<Integer> list = new ArrayList<Integer>() ;
list.add(1) ;
Integer hello = list.get(0); // generics add an implicit cast here
System.out.println(hello); 
```

如果您查看编译器生成的字节码，则无法区分。

有趣的是，你可以这样做

```
List<String> strings = new ArrayList<String>();
@SuppressWarnings("unchecked");
List<Integer> ints = (List) strings;
ints.add(1);

System.out.println(strings); // ok
String s= strings.get(0); // throws a ClassCastException 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-25T14:51:56.317

问题是您的`list`变量具有原始类型，您可以将任何类型的对象添加到此列表中。要解决该问题，只需将其声明为`List`of `String`：

```
List<String> list = new ArrayList<String>() ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T14:54:22.007

它编译是因为声明`List list`使用原始类型`List`，而不是绑定类型`List<String>`。第二行编译，因为你的`list`变量可以接受任何东西。第三行编译，因为`list.get(0)`返回`Object`。第四行没有失败的理由。

意外的是，编译代码中没有任何内容导致 Integer 1 被强制转换为`String`. 但你不能依赖它。如果第一行是正确的

```
List<String> list = new ArrayList<>(); 
```

你的错误会在编译时被发现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-25T14:54:25.490

当您声明这样的列表时： `List list = new ArrayList<String>() ;`

您正在使用所谓的原始类型。它是一种具有泛型类型参数的类型，例如 List，但您未能提供一个。如果您检查编译器警告，您会看到它告诉您这一点。将参数化类型与原始类型混合通常被认为是编程错误。还行吧：

`List<String> list = new ArrayList<String>() ;`

这没关系（但已过时）：

`List list = new ArrayList();`

但是应该避免使用您编写它的方式。

问题是泛型只在编译器时检查，你告诉编译器`List`，不是`List<String>`，所以它会让你把任何你想要的东西放在那里！右侧有参数这一事实并没有真正的意义，它是实际引用的类型对编译器很重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T15:05:47.347

```
List list = new ArrayList<String>() ; // WARNING!!! 
```

一个不安全的 List 是指一个安全的 ArrayList

```
list.add(1) ;  // WARNING!!! 
```

一个整数（int 1 转换为整数是自动装箱）而不是添加到列表中的字符串

```
Integer hello = (Integer) list.get(0) ; 
```

强制转换是必需的，因为 unsafe List 可以包含任何内容。

```
System.out.println(hello); 
```

调用 Integer.toString()

> 当行 list.add(1) 被执行时，不是 1 添加到 ArrayList (of type String) 吗？

是的。Integer 被添加到应该包含 String 的 ArrayList 中。

> 如果是，那么为什么允许这样做？

向后兼容性。Java 必须支持预通用代码。

列表列表；意味着它是不安全的，所以你可以用它做任何事情，并且被引用的 ArrayList() 必须容忍它。

**道德：**不要忽略编译器警告，否则整数可能会进入应该包含字符串的 ArrayList。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-25T14:56:10.593

是的... 1 被添加到 Array 中，因为 Java 与其他语言一样，实现了原始数据类型的隐式（自动）转换（强制转换）。

更多信息在这里[转换和促销](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-04-25T14:51:31.697

尝试这个

```
List.add(Integer.toString(1)); 
```

你也可以试试这个

```
List list = new ArrayList<Object>() ; 
```

如果不需要arraylist必须是String的Arraylist

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-04-25T14:50:19.673

不，因为 Java 将`1`视为整数。您需要先将您的号码转换为字符串`Integer.toString(n)`**

# combinations - LED照明组合电路

> ID：16217950
> 
> 赞同：2
> 
> 时间：2013-04-25T14:47:48.277
> 
> 标签：combinations, boolean-logic, karnaugh-map

组合电路设计题。

```
 A
   ____
  |    |
F |    | B
  |    |
   ____ 
  |  G |
E |    | C
  |    |
   ____
    D

Suppose this is a LED display. It would take input of 4 bit
(0000)-(1111) and display the Hex of it. For example
if (1100) come in it would display C by turning on AFED and turning off BCG.

If (1010) comes in it would display A by turning on ABCEFG 
and turn off D.

These display will all be Capital letters so there is no visual
difference between 0 and D and 8 and B.

Develop a truth table and an optimized expression using Karnaugh Maps. 
```

我不确定如何开始。对于真值表，我将使用 (w,x,y,z) 作为输入变量还是仅使用 ABCDEFG 变量，因为它是打开和关闭的变量？

```
input (1010)-->A--> ABCEFG~D (~ stand for NOT)
input (1011)-->B--> ABCDEFG
input (1100)-->C--> ADEF~B~C~G 
```

那么我会为所有十六进制 0-F 做那将给我分钟。term canonical 那么用卡诺图优化呢？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:24:05.243

You need to do 7 of these: Each for one segment in the 7-segment display. This figure is for illustration only. It doesn't necessarily map to any segment in your problem.

```
 cd=00 01 11 10  <-- where abcd = 0000 for 0  : put '1' if the light is on
ab= 00  1  1  1  1                 = 0001 for 1  : put '0' if it's off for
ab= 01  1  1  1  0                 = 0010 for 2 ...      the given segment
ab= 11  0  1  1  1        
ab= 10  1  1  1  0                 = 1111 for f
           ^^^^ = d=1 region
              ^^^^ = c==1 region 
```

The two middle rows represent "b==1" region and the two last rows are a==1 region.

From that map find maximum size rectangles (that are of size [1,2 or 4] x [1, 2 or 4]); that can be overlapping. The middle 2x4 region is coded as 'd'. The top row is '~a~b'. The top left 2x2 square is '~a~c'. A bottom left square that *wraps* from row 4 to row 1 is '~b~c'. Finally the small 2x1 region that covers position x=4, y=3 is 'abc'.

This function would thus be 'd + ~a~b + ~a~c + ~b~c + abc'. If there are no redundant squares (that are completely covered by other squares), then this formula should be optimal canonical form. (not counting XOR operation). Repeat for 7 times for the real data!

Any selection/permutation of the variables should give the same logical circuit, whether you use abcd or dcba or acbd etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:55:04.220

1）将您的灯光映射到位：

ABCDEFG，所以真值表将是：

```
 ABCDEFG
input (1010)-->A-->1110110 
```

等等。

您将有一张大桌子（有 16 行）。

[2）然后按照维基百科](https://en.wikipedia.org/wiki/Karnaugh_map)上的示例获取每个输出光。

# sockets - 为什么我们需要 SocketOptions.SO_BROADCAST 来启用广播？

> ID：16217958
> 
> 赞同：19
> 
> 时间：2013-04-25T14:48:15.913
> 
> 标签：sockets

如果我们想从套接字广播信息，我们需要启用`SocketOptions.SO_BROADCAST`. 但是，我不明白为什么这是必要的。

我的理解是我们用广播地址设置数据包，就像设置单播地址一样。然后我们只需要通过常规套接字发送它。如果它是 UDP 套接字，那么将在该数据包中添加一个 UDP 头，然后是一个包含接收者 IP 地址的 IP 头（在这种情况下是 形式的广播地址`192.168.255.255`），然后`(FF:FF:FF:FF)`添加一个 MAC 地址。

我认为路由器将获取数据包并执行广播。我不明白为什么我们需要将 socket 属性设置为`SO_BROADCAST`.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-25T15:19:43.520

“套接字语义要求应用程序在尝试将数据报发送到基址或广播地址之前设置 SO_BROADCAST 选项。这可以防止应用程序意外地将数据报发送到许多系统。”

[资源](https://www.ibm.com/support/knowledgecenter/SSLTBW_2.1.0/com.ibm.zos.v2r1.halz002/security_tcpip_resrcs_so_broadcast.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T15:02:56.873

在大多数情况下，这些调用只是在操作系统中调用相同的东西。这可能是您的操作系统的限制，而不是 Java。

# sql - LINQ；如何在多个条件下执行左外连接？

> ID：16217964
> 
> 赞同：3
> 
> 时间：2013-04-25T14:48:26.653
> 
> 标签：sql, linq, left-join

我试图模仿：

```
DB1 AS A LEFT OUTER JOIN
DB2 AS B 
ON A.[Currency Code] = B.[Currency Code] 
AND A.[Document Date] >= B.[Starting Date] 
AND A.[Document Date] <= B.[Ending Date] 
```

这就是我现在所拥有的：

```
from ledgers in ledgerEntries
join currency in currencyExchange
    on ledgers.CurrencyCode equals currency.CurrencyCode
        into c
from currencies in c.DefaultIfEmpty()
where
    ledgers.DocumentDate >= currencies.StartingDate
    && ledgers.DocumentDate <= currencies.EndingDate 
```

我已经阅读了有关创建匿名类型并将它们设置为彼此相等的信息，但是当使用小于和大于比较日期时，这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T15:37:32.350

看来[这个](https://stackoverflow.com/questions/1122942/linq-to-sql-left-outer-join-with-multiple-join-conditions?rq=1)答案就是我想要的。

```
from ledgers in ledgerEntries
join currency in currencyExchange
    on ledgers.CurrencyCode equals currency.CurrencyCode
        into c
from currencies in c.Where(currency => currency.StartingDate <= ledgers.DocumentDate 
&& currency.EndingDate <= ledgers.DocumentDate).DefaultIfEmpty() 
```

结合[这个](https://stackoverflow.com/questions/267488/linq-to-sql-multiple-left-outer-joins?rq=1)答案，我能够简化为：

```
from ledgers in ledgerEntries
from currencies in currencyExchange.Where(
    currency => currency.CurrencyCode == ledgers.CurrencyCode
    && currency.StartingDate <= ledgers.DocumentDate 
    && currency.EndingDate <= ledgers.DocumentDate).DefaultIfEmpty() 
```

# angularjs - angularJs $http。无法从请求中修改参数

> ID：16217973
> 
> 赞同：0
> 
> 时间：2013-04-25T14:48:42.823
> 
> 标签：angularjs

angularjs代码：

```
$http({
    method: 'POST',
    url:'/hello/rest/user/test',
    data: {user: 'aaaaa'}
}); 
```

服务器代码：

```
@POST
@Path("/test")
public Response merge(@Context HttpServletRequest request) {
    System.out.println(request.getParameter("user"));
    if (request.getParameter("user") == null) {
        return Response.status(Status.BAD_REQUEST).build();
    }
    return Response.ok().build();
} 
```

request.getParameter("user") 为空。我无法通过这种方式修改参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T02:41:10.860

如果要使用请求参数，则需要将数据传递为

```
$http.post('/hello/rest/user/test', {
    user : 'aaaaa'
    }, {
        headers : {
            "Content-Type" : 'application/x-www-form-urlencoded;charset=utf-8'
        },
        transformRequest : [function(data) {
            return angular.isObject(data)
                    ? jQuery.param(data)
                    : data;
        }]
    }); 
```

另请阅读[此问题](https://stackoverflow.com/questions/12190166/angularjs-any-way-for-http-post-to-send-request-parameters-instead-of-json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:54:30.167

您需要查看正文而不是 post 参数...

您可能没有收到 POST 参数。

您收到的正文类似于 {"user":"aaaaa"} 并且您需要解析该 JSON 响应。

# c++ - C++ 向 node.js 发送 UDP 消息 UDP 服务器有无法识别的代码

> ID：16217974
> 
> 赞同：1
> 
> 时间：2013-04-25T14:48:45.957
> 
> 标签：c++, node.js, tcp, udp, udpclient

我的 node.js UDP 服务器的代码是

```
var PORT = 515;
var HOST = '127.0.0.1';

var dgram = require('dgram');
var server = dgram.createSocket('udp4');

server.on('listening', function () {
    var address = server.address();
    console.log('UDP Server listening on ' + address.address + ":" + address.port);
});

server.on('message', function (message, remote) {
    console.log(remote.address + ':' + remote.port +' - ' + message);

});

server.bind(PORT, HOST); 
```

我的 C++ 客户端的代码是：

```
 WORD wVersionRequested = MAKEWORD(1, 1);
    WSADATA wsaData;
    int err = WSAStartup(wVersionRequested, &wsaData);

    if (err != 0)
    {
        return FALSE;
    }

    if ( LOBYTE( wsaData.wVersion) != 1 ||
        HIBYTE( wsaData.wVersion) != 1 ) 
    {
        WSACleanup();
        return FALSE;
    }

    // get the server address
    srvAddress.sin_addr.S_un.S_addr = inet_addr(GetProfileUdpHost());
    srvAddress.sin_family = AF_INET;
    srvAddress.sin_port = htons(GetProfileUdpPort());

int UdpSend(CString& content, SOCKADDR* address)
{
    SOCKET sockClient = socket(AF_INET, SOCK_DGRAM, 0);

    int result = sendto(sockClient, 
        content, 
        content.GetLength()+1, 
        0, 
        address, sizeof(SOCKADDR));

    closesocket(sockClient);

    return result;
} 
```

当用户发送“中文”之类的字符时，nodejs UDP服务器收到“”。它得到无法识别的代码。我的 nodejs 代码的编码是 UTF-8 并且更改为 ANSI 是同样的问题。

# c# - 比较图像作为单元测试的字节数组

> ID：16217982
> 
> 赞同：7
> 
> 时间：2013-04-25T14:49:07.970
> 
> 标签：c#, .net

`Image`我有一个从 a创建一个的类`Byte[]`，以及其他一些逻辑，我正在尝试编写一个单元测试，断言`Image`从我的类返回的实例与我在单元测试中的一些假的相同`Image`。

我找不到可靠的方法来：

*   从一个假的`Image`\`Byte[]`资源\*东西*开始。
*   `Byte[]`将代表假*的东西*传递给我的班级。
*   断言`Image`从我的班级返回的东西和我的假*东西一样*。

这是我到目前为止提出的代码：

```
Bitmap fakeBitmap = new Bitmap(1, 1);

Byte[] expectedBytes;
using (var ms = new MemoryStream())
{
    fakeBitmap.Save(ms, ImageFormat.Png);
    expectedBytes = ms.ToArray();
}

//This is where the call to class goes
Image actualImage;
using (var ms = new MemoryStream(expectedBytes))
    actualImage = Image.FromStream(ms);

Byte[] actualBytes;
using (var ms = new MemoryStream())
{
    actualImage.Save(ms, ImageFormat.Png);
    actualBytes = ms.ToArray();
}

var areEqual =
    Enumerable.SequenceEqual(expectedBytes, actualBytes);

Console.WriteLine(areEqual);

var desktop = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);

using(StreamWriter sw = new StreamWriter(Path.Combine(desktop, "expectedBytes.txt")))
    sw.Write(String.Join(Environment.NewLine, expectedBytes));

using(StreamWriter sw = new StreamWriter(Path.Combine(desktop, "actualBytes.txt")))
    sw.Write(String.Join(Environment.NewLine, actualBytes)); 
```

这总是返回`false`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:10:28.317

尝试这个：

```
public static class Ext
{
    public static byte[] GetBytes(this Bitmap bitmap)
    {
        var bytes = new byte[bitmap.Height * bitmap.Width * 3];
        BitmapData bitmapData = bitmap.LockBits(new Rectangle(0, 0, bitmap.Width, bitmap.Height),
                                                ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb);

        Marshal.Copy(bitmapData.Scan0, bytes, 0, bytes.Length);
        bitmap.UnlockBits(bitmapData);
        return bytes;
    }
}
var bitmap = new Bitmap(@"C:\myimg.jpg");
var bitmap1 = new Bitmap(@"C:\myimg.jpg");

var bytes = bitmap.GetBytes();
var bytes1 = bitmap1.GetBytes();
//true
var sequenceEqual = bytes.SequenceEqual(bytes1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:10:10.037

我可以想象 Image.Save 还会更新图像内的元数据，修改该图片的日期/时间，这将改变你的字节数组。

# paypal - 提交订单时 Paypal Web Payment Pro 挂起

> ID：16217990
> 
> 赞同：1
> 
> 时间：2013-04-25T14:49:31.153
> 
> 标签：paypal, opencart, credit-card, payment-processing

上周末的某个时候，我们的 Opencart 安装版本 1.5.1.3 开始处理通过 PayPal Website Payment Pro 进行的 CC 付款的重复订单。它以相同的顺序发生，有时它会处理两次。有时 3 次。通过 Paypal Web 标准模块进行的付款工作正常。

我查看了错误日志，大约在这开始发生的同时，我们开始收到这些 php 通知。

2013-04-23 3:44:01 - PHP 通知：未定义索引：/var/www/vhosts/xxxxxxxxx.com/httpdocs/system/library/customer.php(170) 中的 customer_id：eval()'d 代码第 4 行 2013-04-23 3:44:01 - PHP 通知：未定义索引：/var/www/vhosts/xxxxxxxxx.com/httpdocs/system/library/customer.php(170) 中的 payment_address_id：eval()'d第 4 行的代码

我不知道它们是否相关，但它们同时开始出现。我回到日志中，并没有在其他任何地方看到这些。奇怪的是，到目前为止，购物车一直运行良好，突然弹出。

我从 PayPal 请求了新的 API 凭证，并在 Opencart 中重新安装了 Web Payment Pro 模块。最初这似乎有所帮助，但我们昨天仍有订单以相同的顺序重复出现。我们从一些客户那里得到了一些反馈，似乎人们在提交订单时已经挂断了“请稍候……”部分。我们最初会不时得到这个，但突然之间它变得更加频繁。该页面提交订单，但从不返回成功页面。阻止客户再次按下按钮会有所帮助，因此我们编写了一个脚本来阻止用户再次按下提交订单按钮。

不幸的是，它仍然没有解决问题的根源，因为网站和支付处理器之间的通信在某个地方被挂断了。我猜贝宝对他们进行了一些更改以导致此问题，但是任何我可以寻求纠正的建议将不胜感激。谢谢。

# c# - 如何通过隐藏编码将文本块放在滚动查看器中？(wpf)

> ID：16217991
> 
> 赞同：2
> 
> 时间：2013-04-25T14:49:32.460
> 
> 标签：c#, wpf, scrollviewer, textblock

我有一个这样的 xaml 代码

```
<Grid>
    <... some grid row and column definitions .../>

    <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
        <TextBlock "some attribute" />
    </ScrollViewer>

</Grid> 
```

我不知道如何`Textblock`配合`Scrollviewer`in `C#`。我想`Textblock`与`Scrollviewer`. 如果您有其他想法，请告诉我。

非常感谢您的帮助。:D

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:52:39.570

只需使用 Content 属性

```
 var myScrollViewer = new ScrollViewer();
            myScrollViewer.Content= new TextBlock(); 
```

## 编辑

或与 XAML 结合使用

**XAML**

```
<ScrollViewer Name="myScrollViewer " Grid.Column="1" VerticalScrollBarVisibility="Auto"/> 
```

**背后的代码**

```
 myScrollViewer.Content= new TextBlock(); // or what ever you want to add :-) 
```

# python - 在 x、y 和 z 中具有不同间隔的定期采样 3D 数据的快速插值

> ID：16217995
> 
> 赞同：22
> 
> 时间：2013-04-25T14:49:43.097
> 
> 标签：python, numpy, scipy, interpolation, volume-rendering

我有一些体积成像数据，这些数据由在 x、y、z 中的规则网格上采样的值组成，但具有非立方体素形状（z 中相邻点之间的空间大于 x、y 中的空间）。我最终希望能够在穿过体积的任意 2D 平面上插值，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/3ejUN.png)

我知道`scipy.ndimage.map_coordinates`，但在我的情况下使用它并不那么简单，因为它隐含地假设输入数组中元素的间距在各个维度上是相等的。我可以首先根据最小的体素维度对输入数组进行重新采样（这样我的所有体素都将成为立方体），然后用于`map_coordinates`在我的平面上进行插值，但对我的数据进行两次插值似乎不是一个好主意。

我也知道`scipy`对于不规则间隔的 ND 数据（等）有各种插值器`LinearNDInterpolator`， `NearestNDInterpolator`但对于我的目的而言，这些插值器非常缓慢且占用大量内存。鉴于我知道值在每个维度内*有*规律地间隔，插值数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-25T16:54:07.923

你可以使用`map_coordinates`一点代数。假设您的网格间距是`dx`,`dy`和`dz`。我们需要将这些**真实世界**坐标映射到**数组索引**坐标，所以让我们定义三个新变量：

```
xx = x / dx
yy = y / dy
zz = z / dz 
```

**数组索引**输入`map_coordinates`是一个形状数组，其中`(d, ...)`是`d`原始数据的维数。如果您定义一个数组，例如：

```
scaling = np.array([dx, dy, dz]) 
```

您可以通过使用一点广播魔术除以将您的**真实世界**坐标转换为**数组索引坐标：**`scaling`

```
idx = coords / scaling[(slice(None),) + (None,)*(coords.ndim-1)] 
```

举个例子：

```
dx, dy, dz = 1, 1, 2
scaling = np.array([dx, dy, dz])
data = np.random.rand(10, 15, 5) 
```

假设我们要沿平面插入值`2*y - z = 0`。我们取两个垂直于平面法线向量的向量：

```
u = np.array([1, 0 ,0])
v = np.array([0, 1, 2]) 
```

并获得我们想要插值的坐标：

```
coords = (u[:, None, None] * np.linspace(0, 9, 10)[None, :, None] +
          v[:, None, None] * np.linspace(0, 2.5, 10)[None, None, :]) 
```

我们将它们转换为**数组索引**坐标并使用`map_coordinates`：

```
idx = coords / scaling[(slice(None),) + (None,)*(coords.ndim-1)]
new_data = ndi.map_coordinates(data, idx) 
```

最后一个数组是有形状的`(10, 10)`，并且在位置`[u_idx, v_idx]`上具有对应于坐标的值`coords[:, u_idx, v_idx]`。

您可以基于这个想法来处理坐标不从零开始的插值，方法是在缩放之前添加一个偏移量。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-25T17:30:30.177

这是一个简单的类`Intergrid` ，将非均匀网格映射/缩放到均匀网格，然后`map_coordinates`.
在[4d 测试用例](https://stackoverflow.com/questions/14119892/python-4d-linear-interpolation-on-a-rectangular-grid)中，它以每个查询点大约 1 微秒的速度运行。

`pip install [--user] intergrid`应该在 python2 或 python3 中工作（2020 年 2 月）；请参阅[PyPi 上的 intergrid](https://pypi.org/project/intergrid/)。

```
""" interpolate data given on an Nd rectangular grid, uniform or non-uniform.

Purpose: extend the fast N-dimensional interpolator
`scipy.ndimage.map_coordinates` to non-uniform grids, using `np.interp`.

Background: please look at
http://en.wikipedia.org/wiki/Bilinear_interpolation
https://stackoverflow.com/questions/6238250/multivariate-spline-interpolation-in-python-scipy
http://docs.scipy.org/doc/scipy-dev/reference/generated/scipy.ndimage.interpolation.map_coordinates.html

Example
-------
Say we have rainfall on a 4 x 5 grid of rectangles, lat 52 .. 55 x lon -10 .. -6,
and want to interpolate (estimate) rainfall at 1000 query points
in between the grid points.

        # define the grid --
    griddata = np.loadtxt(...)  # griddata.shape == (4, 5)
    lo = np.array([ 52, -10 ])  # lowest lat, lowest lon
    hi = np.array([ 55, -6 ])   # highest lat, highest lon

        # set up an interpolator function "interfunc()" with class Intergrid --
    interfunc = Intergrid( griddata, lo=lo, hi=hi )

        # generate 1000 random query points, lo <= [lat, lon] <= hi --
    query_points = lo + np.random.uniform( size=(1000, 2) ) * (hi - lo)

        # get rainfall at the 1000 query points --
    query_values = interfunc( query_points )  # -> 1000 values

What this does:
    for each [lat, lon] in query_points:
        1) find the square of griddata it's in,
            e.g. [52.5, -8.1] -> [0, 3] [0, 4] [1, 4] [1, 3]
        2) do bilinear (multilinear) interpolation in that square,
            using `scipy.ndimage.map_coordinates` .
Check:
    interfunc( lo ) -> griddata[0, 0],
    interfunc( hi ) -> griddata[-1, -1] i.e. griddata[3, 4]

Parameters
----------
    griddata: numpy array_like, 2d 3d 4d ...
    lo, hi: user coordinates of the corners of griddata, 1d array-like, lo < hi
    maps: a list of `dim` descriptors of piecewise-linear or nonlinear maps,
        e.g. [[50, 52, 62, 63], None]  # uniformize lat, linear lon
    copy: make a copy of query_points, default True;
        copy=False overwrites query_points, runs in less memory
    verbose: default 1: print a 1-line summary for each call, with run time
    order=1: see `map_coordinates`
    prefilter: 0 or False, the default: smoothing B-spline
              1 or True: exact-fit interpolating spline (IIR, not C-R)
              1/3: Mitchell-Netravali spline, 1/3 B + 2/3 fit
        (prefilter is only for order > 1, since order = 1 interpolates)

Non-uniform rectangular grids
-----------------------------
What if our griddata above is at non-uniformly-spaced latitudes,
say [50, 52, 62, 63] ?  `Intergrid` can "uniformize" these
before interpolation, like this:

    lo = np.array([ 50, -10 ])
    hi = np.array([ 63, -6 ])
    maps = [[50, 52, 62, 63], None]  # uniformize lat, linear lon
    interfunc = Intergrid( griddata, lo=lo, hi=hi, maps=maps )

This will map (transform, stretch, warp) the lats in query_points column 0
to array coordinates in the range 0 .. 3, using `np.interp` to do
piecewise-linear (PWL) mapping:
    50  51  52  53  54  55  56  57  58  59  60  61  62  63  # lo[0] .. hi[0]
    0   .5  1   1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2   3

`maps[1] None` says to map the lons in query_points column 1 linearly:
    -10  -9  -8  -7  -6  # lo[1] .. hi[1]
    0    1   2   3   4

More doc: https://denis-bz.github.com/docs/intergrid.html

"""
# split class Gridmap ?

from __future__ import division
from time import time
# warnings
import numpy as np
from scipy.ndimage import map_coordinates, spline_filter

__version__ = "2014-01-15 jan denis"  # 15jan: fix bug in linear scaling
__author_email__ = "denis-bz-py@t-online.de"  # comments welcome, testcases most welcome

#...............................................................................
class Intergrid:
    __doc__ = globals()["__doc__"]

    def __init__( self, griddata, lo, hi, maps=[], copy=True, verbose=1,
            order=1, prefilter=False ):
        griddata = np.asanyarray( griddata )
        dim = griddata.ndim  # - (griddata.shape[-1] == 1)  # ??
        assert dim >= 2, griddata.shape
        self.dim = dim
        if np.isscalar(lo):
            lo *= np.ones(dim)
        if np.isscalar(hi):
            hi *= np.ones(dim)
        self.loclip = lo = np.asarray_chkfinite( lo ).copy()
        self.hiclip = hi = np.asarray_chkfinite( hi ).copy()
        assert lo.shape == (dim,), lo.shape
        assert hi.shape == (dim,), hi.shape
        self.copy = copy
        self.verbose = verbose
        self.order = order
        if order > 1  and 0 < prefilter < 1:  # 1/3: Mitchell-Netravali = 1/3 B + 2/3 fit
            exactfit = spline_filter( griddata )  # see Unser
            griddata += prefilter * (exactfit - griddata)
            prefilter = False
        self.griddata = griddata
        self.prefilter = (prefilter == True)

        self.maps = maps
        self.nmap = 0
        if len(maps) > 0:
            assert len(maps) == dim, "maps must have len %d, not %d" % (
                    dim, len(maps))
            # linear maps (map None): Xcol -= lo *= scale -> [0, n-1]
            # nonlinear: np.interp e.g. [50 52 62 63] -> [0 1 2 3]
            self._lo = np.zeros(dim)
            self._scale = np.ones(dim)

            for j, (map, n, l, h) in enumerate( zip( maps, griddata.shape, lo, hi )):
                ## print "test: j map n l h:", j, map, n, l, h
                if map is None  or callable(map):
                    self._lo[j] = l
                    if h > l:
                        self._scale[j] = (n - 1) / (h - l)  # _map lo -> 0, hi -> n - 1
                    else:
                        self._scale[j] = 0  # h <= l: X[:,j] -> 0
                    continue
                self.maps[j] = map = np.asanyarray(map)
                self.nmap += 1
                assert len(map) == n, "maps[%d] must have len %d, not %d" % (
                    j, n, len(map) )
                mlo, mhi = map.min(), map.max()
                if not (l <= mlo <= mhi <= h):
                    print "Warning: Intergrid maps[%d] min %.3g max %.3g " \
                        "are outside lo %.3g hi %.3g" % (
                        j, mlo, mhi, l, h )

#...............................................................................
    def _map_to_uniform_grid( self, X ):
        """ clip, map X linear / nonlinear  inplace """
        np.clip( X, self.loclip, self.hiclip, out=X )
            # X nonlinear maps inplace --
        for j, map in enumerate(self.maps):
            if map is None:
                continue
            if callable(map):
                X[:,j] = map( X[:,j] )  # clip again ?
            else:
                    # PWL e.g. [50 52 62 63] -> [0 1 2 3] --
                X[:,j] = np.interp( X[:,j], map, np.arange(len(map)) )

            # linear map the rest, inplace (nonlinear _lo 0, _scale 1: noop)
        if self.nmap < self.dim:
            X -= self._lo
            X *= self._scale  # (griddata.shape - 1) / (hi - lo)
        ## print "test: _map_to_uniform_grid", X.T

#...............................................................................
    def __call__( self, X, out=None ):
        """ query_values = Intergrid(...) ( query_points npt x dim )
        """
        X = np.asanyarray(X)
        assert X.shape[-1] == self.dim, ("the query array must have %d columns, "
                "but its shape is %s" % (self.dim, X.shape) )
        Xdim = X.ndim
        if Xdim == 1:
            X = np.asarray([X])  # in a single point -> out scalar
        if self.copy:
            X = X.copy()
        assert X.ndim == 2, X.shape
        npt = X.shape[0]
        if out is None:
            out = np.empty( npt, dtype=self.griddata.dtype )
        t0 = time()
        self._map_to_uniform_grid( X )  # X inplace
#...............................................................................
        map_coordinates( self.griddata, X.T,
            order=self.order, prefilter=self.prefilter,
            mode="nearest",  # outside -> edge
                # test: mode="constant", cval=np.NaN,
            output=out )
        if self.verbose:
            print "Intergrid: %.3g msec  %d points in a %s grid  %d maps  order %d" % (
                (time() - t0) * 1000, npt, self.griddata.shape, self.nmap, self.order )
        return out if Xdim == 2  else out[0]

    at = __call__

# end intergrid.py 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-20T09:58:19.470

我创建了**regulargrid**包（[https://pypi.python.org/pypi/regulargrid/](https://pypi.python.org/pypi/regulargrid/)，来源[https://github.com/JohannesBuchner/regulargrid](https://github.com/JohannesBuchner/regulargrid)）

它通过非常快速的 scipy.ndimage.map_coordinates 为任意坐标比例提供对 n 维笛卡尔网格（根据需要）的支持。

另请参阅此答案：[网格数据的快速插值](https://stackoverflow.com/questions/16983843/fast-interpolation-of-grid-data)

# java - Java PDFBox，从表的列中提取数据

> ID：16217999
> 
> 赞同：0
> 
> 时间：2013-04-25T14:50:03.207
> 
> 标签：java, pdfbox

我想了解如何从这个 pdf（例如图像）中提取[http://postimg.org/image/ypebht5dx/](http://postimg.org/image/ypebht5dx/)

例如，我只想提取“TENSIONE[V]”列中的值，如果遇到空白单元格，我在输出中输入字母“X”。我该怎么办？

我使用的代码是这样的：

```
 PDDocument p=PDDocument.load(new File("a.pdf"));
 PDFTextStripper t=new PDFTextStripper();
 System.out.println(t.getText(p)); 
```

我得到这个输出：

[http://s23.postimg.org/wbhcrw03v/Immagine.png](http://s23.postimg.org/wbhcrw03v/Immagine.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:03:36.600

这些只是指导方针。在您使用时使用它们。这也没有经过测试，但可以帮助您解决问题。如果您有任何问题，请告诉我。

```
String text = t.getText(p);
String lines[] = text.split("\\r?\\n"); // give you all the lines separated by new line

String cols[] = lines[0].split("\\s+") // gives array separated by whitespaces
// cols[0] contains pins
// clos[1] contains TENSIONE[V]
// cols[2] contains TOLLRENZA if not present then its empty 
```