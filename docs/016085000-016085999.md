# StackOverflow 问答 16085000-16085999

# jquery - 返回按钮返回登录页面

> ID：16085002
> 
> 赞同：1
> 
> 时间：2013-04-18T13:57:45.690
> 
> 标签：jquery, cordova, local-storage, session-cookies

我有一个使用 phonegap 开发的网络应用程序，其中索引页面是登录页面/注册页面。

这很好，因为这是新用户在未注册使用该应用程序时应该看到的第一页。然而，这给我带来了 2 个问题，即当用户登录并点击后退按钮时，它会返回登录页面，我不希望这种情况发生。此外，当存储用户凭据并打开应用程序时，它仍然会进入登录页面片刻，然后进入应用程序。

我怎样才能阻止这种情况发生？我是否必须实现 cookie/会话类型的登录系统？

我的代码如下

HTML

```
<div id="home">

    <div id="launcherPage" data-role="page">
        <!-- I'm just here waiting for deviceReady -->
    </div>

    <div id="loginPage" data-role="page">

        <div data-role="header">
            <h1>CHUNE</h1>
        </div>

        <div data-role="content">    

            <form id="loginForm">
            <div data-role="fieldcontain" class="ui-hide-label">
                <label for="username">Username:</label>
                <input type="text" name="username" id="username" value="" placeholder="Username" />
            </div>

            <div data-role="fieldcontain" class="ui-hide-label">
                <label for="password">Password:</label>
                <input type="password" name="password" id="password" value="" placeholder="Password" />
            </div>

            <input type="submit" value="Login" id="submitButton">
            </form>
            <div style="text-align: center;">Or</div> <!--need to center-->
            <a href="./register.html" data-role="button">Register</a>

        </div>

        <div data-role="footer">
            <h4>&copy; KewsPlus</h4>
        </div>

    </div>
</div> 
```

JavaScript

```
 function init() {
document.addEventListener("deviceready", deviceReady, true);
delete init; 
```

}

```
 function checkPreAuth() {
console.log("checkPreAuth");
var form = $("#loginForm");
if(window.localStorage["username"] != undefined && window.localStorage["password"] != undefined) {
    $("#username", form).val(window.localStorage["username"]);
    $("#password", form).val(window.localStorage["password"]);
    handleLogin();
}
}

function handleLogin() {
var url = 'http://kewsplus.com/includes/login.php';
var form = $("#loginForm");    
//disable the button so we can't resubmit while we wait
$("#submitButton",form).attr("disabled","disabled");
var u = $("#username", form).val();
var p = $("#password", form).val();
if(u != '' && p!= '') {
    $.ajax({
        type: "POST",
        url: url,
        data: {username:u,password:p},
        dataType: "jsonp",
        crossDomain: "true",
        jsonp : "onJSONPLoad",
        success: function (data) {
            if (data = 1) {
                //store
                window.localStorage["username"] = u;
                window.localStorage["password"] = p;             
                $.mobile.changePage("featuredtracks.html");
            }  else {
                navigator.notification.alert("Your login failed", function() {});
            }
        }
    }); //$.ajax
       $("#submitButton").removeAttr("disabled");
    }
 else {
    navigator.notification.alert("You must enter a username and password", function() {});
    $("#submitButton").removeAttr("disabled");
}
return false;
}

function deviceReady() {
console.log("deviceReady");
$("#loginPage").on("pageinit",function() {
    console.log("pageinit run");
    $("#loginForm").on("submit",handleLogin);
    checkPreAuth();
});
$.mobile.changePage("#loginPage");
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:37:17.353

1.  为了防止后退功能，一旦您加载新页面 (featuredtracks.html)，您将需要通过附加到 PhoneGap 提供的事件“后退按钮”来覆盖后退按钮。来自[PhoneGap API](http://docs.phonegap.com/en/2.6.0/cordova_events_events.md.html#backbutton "PhoneGap API")：

    ```
    document.addEventListener("backbutton", onBackKeyDown, false);

    function onBackKeyDown() {
        // Handle the back button
    } 
    ```

2.  为了防止登录页面在保存凭据时显示一秒钟，请考虑将您的第一页设置为启动屏幕。该页面将决定是否加载登录页面或主页（我假设为 featuretrack.html）。因此，不要总是先加载登录页面，而是加载一个不同的页面，该页面将显示一些图像或其他内容，它决定是加载 login.html 还是 featurestracks.html。

    请注意，现在您还需要覆盖登录页面的后退按钮，以便用户无法回击并转到加载/启动屏幕页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T12:32:02.237

```
 function deviceReady() {
            document.addEventListener("backbutton", function(e){
            if($.mobile.activePage.is("#yourPageName")){
            navigator.notification.confirm('Do you want to exit the application?',confirmCallback, 'YourTitle');
               } 
            }, false); 
```

}

```
 function confirmCallback(buttonIndex) {
           if(buttonIndex == 1) {
           navigator.app.exitApp();
            return true;
                 }
              else {
                return false;
                    }
         } 
```

试试上面的代码。它对我有用。

# c# - 将数据从文本框插入数据库 asp.net MVC4

> ID：16085004
> 
> 赞同：0
> 
> 时间：2013-04-18T13:57:46.713
> 
> 标签：c#, sql-server, asp.net-mvc-4, visual-studio-2012

我正在使用 MVC4 视图页面，我正在尝试通过单击按钮将数据从文本框中插入到我的 MS SQL 数据库中。我正在努力这样做，我想问题是“con.open()”，但我不知道在哪里声明它。这是我的代码：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" 
Inherits="System.Web.Mvc.ViewPage" %>

<script runat="server">

SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["GreenEnergyConnectionString1"].ConnectionString);

   protected void Button1_Click(object sender, EventArgs e)
{
    con.Open();
    SqlCommand cmd = new SqlCommand("insert into CUSTOMER values ('"+TextBox2.Text+"', '"+TextBox3.Text+"', '"+TextBox4.Text+"','"+TextBox5.Text+"','"+TextBox6.Text+"', '"+TextBox7.Text+"', '"+TextBox8.Text+"')",con);
    cmd.ExecuteNonQuery();
    con.Close();
    TextBox8.Text = "";
    TextBox7.Text = "";
    TextBox6.Text = "";
    TextBox5.Text = "";
    TextBox4.Text = "";
    TextBox3.Text = "";
    TextBox2.Text = "";

} 
```

在我的 web.config 中，我声明了以下内容：

```
<add namespace="System.Data.SqlClient"/>
<add namespace="System.Configuration"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:17:49.050

我认为你的方法中有很多错误的或至少不标准的东西很难直接帮助你。相反，我想我可以指导您了解 MVC 的含义：

1.  在 MVC fwk 中，您有一个模型、一个视图和一个控制器。
2.  在您的控制器中，您实例化一个模型，填充它......并调用视图。
3.  当您有一个表单时，通常需要 2 个控制器操作：一个用于显示视图，另一个用于提交表单。
4.  当您提交表单时，您将收到模型......在 MVC 中，您无法像在 WebForms 中那样访问表单字段（使用 TextBox1.Text 和 runat="server" 很明显您没有正确使用 MVC ）。

除此之外，添加代码以直接从视图访问数据库在几个方面都是错误的......我的意思是，从技术上讲你可以做到，但你是在自找麻烦。

我强烈建议您下载一个示例 MVC 3 或 4 应用程序，以了解这些概念并进行一些测试。我建议您使用 Razor 来获取您的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:55:40.910

你上面的不是 MVC。它是网络表单。`<script runat="server">`标签是一个死的赠品。此代码应在控制器操作中。当用户单击 HTML 表单中的 HTML 提交时，MVC 会将请求路由到控制器操作。在此操作中，您将编写代码来执行 sql。

我强烈推荐 Razor 而不是 webforms 语法。它更清洁，更容易使用。

# css - 作为表格背景的进度条

> ID：16085023
> 
> 赞同：4
> 
> 时间：2013-04-18T13:58:28.827
> 
> 标签：css, html-table, progress

我有一个显示人员列表的 HTML 表格。对于每一行，我希望有一个不同的类似进度条的背景。就像是

```
<table>
  <tr class="progress-full">...</tr>
  <tr class="progress-half">...</tr>
  <tr class="progress-quarter">...</tr>
</table> 
```

第一行的整个背景是彩色的，第二行的一半和最后一行的 1/4（带有类或直接使用 CSS 中的百分比）。

我尝试使用具有宽度的背景（[如这里](http://benogle.com/2009/06/16/simple-css-shiny-progress-bar-technique.html)）但我没有成功。我可以在 tr 中包含一个 div 吗？当我检查 html 代码（例如：使用 chrome）时，div 似乎在表格之外。

```
<table style="width: 300px;">
      <tr style="width: 75%; background: rgb(128, 177, 133);">
        <div style="width: 300px;">...</div>
      </tr>
      <tr style="width: 50%; background: rgb(128, 177, 133);">
        <div style="width: 300px;">...</div>
      </tr>
</table> 
```

或者也许是另一种方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:14:59.737

[`::before`](https://developer.mozilla.org/en-US/docs/CSS/::before)如果您使用 CSS或`::after` [pseudo-elements](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)，您可以避免向表格添加任何额外的标记。您可以为每个表格行提供透明背景，并为伪元素提供所需的宽度。

这是一个[jsfiddle 示例](http://jsfiddle.net/2bjKd/)。

![在此处输入图像描述](https://i.stack.imgur.com/Dvk39.png)

**HTML**：

```
<table>
    <tr class="progress-full">
        <td>Row 1 Col 1</td>
    </tr>
    <tr class="progress-quarter">
        <td>Row 2 Col 1</td>
    </tr>
    <tr class="progress-half">
        <td>Row 3 Col 1</td>
    </tr>
</table> 
```

**CSS**：

```
td { padding: 10px; }

tr.progress-full td:first-child,
tr.progress-half td:first-child,
tr.progress-quarter td:first-child {
    position: relative;
}
tr.progress-full td:first-child::before,
tr.progress-half td:first-child::before,
tr.progress-quarter td:first-child::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 100%;
    background-color: red;
    z-index: -1;
}

tr.progress-full td:first-child::before {
    width: 100%;
}
tr.progress-half td:first-child::before {
    width: 50%;
}
tr.progress-quarter td:first-child::before {
    width: 25%;
} 
```

这个 CSS 可以被精简，这取决于表结构的可变性。我将样式应用到`td`每个`tr`. 如果需要进度条跨越多个`td`s，请使用大于100%的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:34:27.947

为什么不简单地将 div 或任何其他合适的容器放入 td 中并为其分配宽度和背景颜色？

如下所示：

```
<table style="width: 300px;">
      <tr>
          <td>
               <div  class="progress-full" >
                   ...
               </div>
          </td>
      </tr>
      <tr>
          <td >
                <div class="progress-quarter" >
                    ...
                </div>
          </td>
      </tr>
</table> 
```

看这个[演示](http://jsfiddle.net/5cgcs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:38:01.197

把百分比宽度放在`div`而不是`tr`（你也错过了`td`s）

[http://jsfiddle.net/WmESh/3/](http://jsfiddle.net/WmESh/3/)

```
<table style="width: 300px;">
  <tr>
      <td>
        <div style="width: 75%; background: rgb(128, 177, 133); overflow:visible;">
            <div style="width:300px;">
                ... 
            </div>        
        </div>
      </td>
  </tr>
  <tr>
      <td>
        <div style="width: 50%; background: rgb(128, 177, 133); overflow:visible;">
            <div style="width:300px;">
                ... testing sdfsdfsdfsd sdfsdsdf sdf sdfsd fsd fsd fsdfsdff sdfsdfsd
            </div>
         </div>
      </td>
  </tr>
</table> 
```

如果您不希望内容是表格的整个宽度，只需删除`<div style="width:300px;"></div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-19T11:54:18.580

使用@mwcz 答案。

在 HTML 中（我使用 twig，但你可以理解）：

```
<td class="text-right pie-progress pie-progress-share{{ (count/totalCount)|round }}">{{ count }}</td> 
```

在 CSS 中：

```
td.pie-progress {
    position: relative;
}
td.pie-progress::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 100%;
    background-color: #66afe9;
    z-index: -1;
}
td.pie-progress-green::before {
    /* example of other color */
    background-color: #66af66;
}
td.pie-progress.pie-progress-share1::before {width: 1%;}
td.pie-progress.pie-progress-share2::before {width: 2%;}
...
td.pie-progress.pie-progress-share100::before {width: 100%;} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-18T14:22:27.660

一种方法是使用您想要的颜色、您想要的颜色和半空白、您想要的颜色和 3/4 空白制作图像，然后使用 bacjground-image。

它很脏，但很简单

# ruby - I am looking into how to create a SOAP client in ruby that is WS-I compatible. What should someone new to SOAP use?

> ID：16085025
> 
> 赞同：0
> 
> 时间：2013-04-18T13:58:28.907
> 
> 标签：ruby, soap, savon, ws-i

Both SOAP and WS-I compatibility are new to me. I have looked around and like the docs at [savonrb.com.](http://savonrb.com/version2.html) Is Savon WS-I compatible? Is there a better library that I should be using? Please, keep in mind good documentation is key since I will be doing this pretty much on my own.

Cheers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:46:42.287

“WS-I”兼容意味着什么？对您来说更重要的问题是您将使用哪个 WS*。

有很多人使用 Savon 编写 SOAP 客户端。那里可能还有其他库，但它总是对我有用。您将在 StackOverflow 上获得对精心设计的问题的良好支持。

所以继续尝试。

我建议下载 SoapUI，它对调试 SOAP 服务有很大帮助。

# c# - Split the String, If it exceeds the specified length

> ID：16085028
> 
> 赞同：0
> 
> 时间：2013-04-18T13:58:33.390
> 
> 标签：c#, asp.net, xml, linq

I am generating a XML format file using String Builder. the file will look something like this :-

```
 StringBuilder strBldr = new StringBuilder();
  strBldr.AppendLine("<Root>");
  strBldr.AppendLine("<ProductDetails>");
  strBldr.AppendLine("<PId>" + lblproductid.Text + "</PId>");
  strBldr.AppendLine("<PDesc>" + strtxtProductDesc + "</PDesc>");
  strBldr.AppendLine("</ProductDetails>");
  strBldr.AppendLine("</Root>"); 
```

This is in for loop, so it may contain many product details. Now I need to split this string if it exceeds the limited length suppose 100\. Till now it was easy. I am able to split this using following method:-

```
 public static IEnumerable<string> SplitByLength(this string str, int maxLength)
 {
        for (int index = 0; index < str.Length; index += maxLength)
        {
            yield return str.Substring(index, Math.Min(maxLength, str.Length - index));
        }
  } 
```

But the thing is, this method just simply splits the string if it finds length is greater that 100\. but I need to be sure if it tries to split from middle of the xml node, then it should find the just above `<ProductDetails>` node and split from there. what should I add to the code to achieve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:03:50.270

How about if `lblproductid.Text` contains, for ex, `&`, `<` or `>`?

Therefore I would use a real xml parser instead of forming it by hand.

```
var xElem = new XElement("Root",
                    new XElement("ProductDetails",
                        new XElement("PId", lblproductid.Text),
                        new XElement("PDesc",strtxtProductDesc)));

var xml = xElem.ToString(); 
```

output would be:

```
<Root>
  <ProductDetails>
    <PId>aaa</PId>
    <PDesc>aaa</PDesc>
  </ProductDetails>
</Root> 
```

PS: You can loop for `ProductDetails` and count the total length.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:26:08.060

**You definitely should use `XDocument` instead of `string` to construct and query XML data.**

You could create an extension method on `XDocument` class that will split by length:

```
public static class XDocumentExtensions
{
    public static IEnumerable<string> SplitByLength(this XDocument source, string elementName, int maxLength)
    {
        if (source == null)
            throw new ArgumentNullException("source");
        if (string.IsNullOrEmpty(elementName))
            throw new ArgumentException("elementName cannot be null or empty.", "elementName");
        if (maxLength <= 0)
            throw new ArgumentException("maxLength has to be greater than 0.", "maxLength");

        return SplitByLengthImpl(source, elementName, maxLength);
    }

    private static IEnumerable<string> SplitByLengthImpl(XDocument source, string elementName, int maxLength)
    {
        var builder = new StringBuilder();

        foreach (var element in source.Root.Elements(elementName))
        {
            var currentElementString = element.ToString();
            if (builder.Length + currentElementString.Length > maxLength)
            {
                if (builder.Length > 0)
                {
                    yield return builder.ToString();
                    builder.Clear();
                }
                else
                {
                    throw new ArgumentException(
                        "source document contains element with length greater than maxLength", "source");
                }
            }

            builder.AppendLine(currentElementString);
        }
        if (builder.Length > 0)
            yield return builder.ToString();
    }
} 
```

And then use it like that:

```
var parts = doc.SplitByLength("ProductDetails", 200).ToList(); 
```

# c++ - C++ 将参数传递给函数

> ID：16085033
> 
> 赞同：-5
> 
> 时间：2013-04-18T13:58:39.403
> 
> 标签：c++, function, declaration

最近我开始用 C/C++ 编程，但我发现有些东西有点难以理解。例如，我的 vertices.h 文件：

```
#ifndef _vertices_h
#define _vertices_h

typedef struct
{
    float XYZW[4];
    float RGBA[4];
} Vertex;

extern Vertex Vertices[];
extern GLubyte Indices[];

#endif 
```

还有我的 vertices.c 文件：

```
#include "vertices.h"

Vertex Vertices[] =
{
    { { 0.0f, 0.0f, 0.0f, 1.0f }, { 1.0f, 1.0f, 1.0f, 1.0f } }       
};
GLubyte Indices[] = {
    0, 1, 3,
    0, 3, 2,
    3, 1, 4,
    3, 4, 2
 }; 
```

不，我需要在其他 .h 文件中创建一个将使用我的 Vertices 数组的函数。这是 shader.c 文件：

```
#include "vertices.h"

void CreateVBO(){ #############################################1
// some operations that uses the passed Vertices array
} 
```

和我的“shaders.h”文件：

```
#ifndef _shaders_h
#define _shaders_h

void CreateVBO(); #############################################################2

#endif 
```

现在我的问题是，在我的主函数中，我调用函数 CreateVBO，并且我想将我需要的顶点数组传递给它。就我而言，我只声明了 1，但我想声明更多并传入我想要的。所以基本上，我真的不知道如何声明函数 CreateVBO 的参数。我缺少的行是用#### 签名的。

```
void doSemthing(int argc, char* argv[]){
...
CreateVBO(); #############################################################3
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:00:55.027

`Vertices[]`是全局的，你不需要通过参数传递它。但是，您也可以传递顶点。

使您的功能如下

```
void CreateVBO(Vertex vertices[]); 
```

叫它

```
CreateVBO(Vertices); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:30:34.177

您的问题对我来说似乎并不清楚，尽管我假设您要向数组“ Vertices [ ] ”声明更多元素，并且您希望将其中任何一个传递给“ CreateVBO() ”。

假设您将“vertices.h”中的“Vertices[]”声明为：

```
Vertices[index1] = {...something....};    // Vertices with index1 elements. 
```

现在在“shaders.h”文件中，您可以将 CreateVBO() 声明和定义为：

```
void CreateVBO(Vertex *V)
{
    //....something....

    V[index1].XYZW[index2]   // You can access the variables as shown.
    V[index1].RGBA[index2]   // You can access the variables as shown.

    //....something....
} 
```

在“doSemthing()”中，顶点可以传递给“CreateVBO()”，如下：

```
void doSemthing(int argc, char* argv[])
{
    ...something....

    CreateVBO(Vertices);

    ...something....
} 
```

# android - OpenGL深度计算

> ID：16085039
> 
> 赞同：0
> 
> 时间：2013-04-18T13:58:49.883
> 
> 标签：android, opengl-es

我有一个 100dp X 100dp 的正方形视图，我想用 opengl 做同样大小的正方形。

我的问题是如何控制正方形的大小？

在 opengl 中，我们有曲面的顶点、z 坐标和 gluPerspective 函数（fovy）的角度

私有浮点 [] 顶点 = { -1.0f, -1.0f, 0.0f, 1.0f, -1.0f, 0.0f, -1.0f, 1.0f, 0.0f, 1.0f, 1.0f, 0.0f }

fovy = 45.0

z = ??

我应该如何计算我的正方形的大小？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:58:19.407

如果您只想绘制相同大小的正方形，则可能需要正交投影，并将所有变换设置为身份。

那么正方形的大小将等于它在屏幕上的大小。

# windows-phone-8 - Windows Phone 8 IsTrial 市场

> ID：16085042
> 
> 赞同：3
> 
> 时间：2013-04-18T13:58:59.260
> 
> 标签：windows-phone-8, marketplace

我有一个 Windows Phone 8 应用程序和一些额外功能，只能与完整版一起使用。

所以用户点击一个按钮

```
if ((Application.Current as App).IsTrial)
{
    Buy()
}
else
{
    //full feature
}

private void Buy()
    {
        MarketplaceDetailTask marketplaceDetailTask = new MarketplaceDetailTask();
        marketplaceDetailTask.ContentType = MarketplaceContentType.Applications;
        marketplaceDetailTask.ContentIdentifier = "82a23635-5bd9-df11-a844-00237de2db9e";
        marketplaceDetailTask.Show();
    } 
```

1.  这就是我所要做的吗？
2.  当人购买应用程序时，IsTrial 会自动设置为 false 吗？
3.  如果我现在甚至不知道我的应用程序的标识符，我该如何更改 ContentIdentifier？
4.  我可以在将应用程序放入商店之前更改 ContentIdentifier 吗？

应用程序.xaml

```
 /// <summary>
    /// The LicenseInformation class enables an application to determine 
    /// if it is running under a trial license.
    /// </summary>
    private static LicenseInformation _licenseInfo = new LicenseInformation();

    /// <summary>
    /// This property is used to cache the license information while the application is running. 
    /// The application uses the property whenever the current license information needs to be checked.
    /// </summary>
    private static bool _isTrial = true;
    public bool IsTrial
    {
        get
        {
            return _isTrial;
        }
    }

    /// <summary>
    /// Check the current license information for this application
    /// </summary>
    private void CheckLicense()
    {

        _isTrial = _licenseInfo.IsTrial();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T19:52:39.270

关于你的第二个问题。

是的，Microsoft根据用户操作设置**LicenseInformation.IsTrial值。**如果用户购买应用程序，则**IsTrial**设置为 false。

在提交到商店之前，您应该测试所有购买方案。您使用[CurrentAppSimulator 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.store.currentappsimulator.aspx)进行测试。它与本地 XML 文件结合使用。您使用每个场景的模拟许可证信息填充 XML 文件。

关于问题 #3，您不需要指定 GUID，如果您将 ContentIdentifier 保留为 null，则操作系统将为您查找您的应用程序 GUID。

# java - MySimpleAdapter 类型已定义

> ID：16085045
> 
> 赞同：0
> 
> 时间：2013-04-18T13:59:09.487
> 
> 标签：java, android, eclipse

此类已在另一个名为“Expenses_act.java”的 java 文件中定义。我需要能够让它在一个名为“Incomes_act.java”的文件中运行。这是一个安卓应用程序。我怎样才能做到这一点？

```
class MySimpleAdapter extends ArrayAdapter<String> {
private final Context context;
private final ArrayList<String> values;

public MySimpleAdapter(Context context, List<String> values)
{
    super(context, R.layout.custom_row, values);
    this.context = context;
    this.values = (ArrayList<String>) values;
}

  @Override
public View getView(int position, View convertView, ViewGroup parent) {
LayoutInflater inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View rowView = inflater.inflate(R.layout.custom_row, parent, false);
TextView textView1 = (TextView) rowView.findViewById(R.row.date);
TextView textView2 = (TextView) rowView.findViewById(R.row.time);
TextView textView3 = (TextView) rowView.findViewById(R.row.desc);
TextView textView4 = (TextView) rowView.findViewById(R.row.val);
TextView textView5 = (TextView) rowView.findViewById(R.row.cat);

String[] split = values.get(position).split(";");
final String PREFS_NAME = "Sets";
SharedPreferences settings = context.getSharedPreferences(PREFS_NAME, 0);
textView1.setText(split[0] + " ");
textView2.setText(split[1] + " ");
textView3.setText(split[2] + " ");
textView4.setText(settings.getString("SelectedCur", "ˆ")+split[3] + " ");
textView5.setText(split[4] + " ");

return rowView; 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:02:33.003

公开 MySimpleAdapter 类。我认为您现有的适配器类位于不同的包中。所有类的默认访问修饰符是包，它允许包中的所有类访问它。

# python - 使用 uWSGI 进行并发数据库访问

> ID：16085046
> 
> 赞同：0
> 
> 时间：2013-04-18T13:59:09.503
> 
> 标签：python, concurrency, sqlite, multiprocessing, uwsgi

我正在尝试找到使用 uWSGI 进行并发数据库访问的最佳解决方案。

一些细节：

我正在使用 python3 (3.3) 和 sqlite3。我希望能够使用更多进程（以及线程）来扩展我的应用程序？我不确定 --threads 对 uWSGI 到底做了什么......）

sqlite3 内置了对并发进程使用的支持，但不一定支持线程。

那么我应该围绕实现锁定的 sqlite3 连接对象编写某种包装器吗？

或者拥有某种可以完成所有数据库工作的工作进程会更好。如果是这种情况，我如何使用 uWSGI 启动这个单独的工作程序，以及如何将消息传递给 Web 工作程序进程？

还是有更好的解决方案？

最后我有一个相关的问题。我应该为每个请求创建一个数据库连接，还是应该为每个在工作人员还活着时保持打开状态的进程建立一个持久连接？

在我看来，在每个请求上创建连接可能会很昂贵，但要确保拥有持久连接不会导致问题。

# oracle - 我能够在 oracle 中创建一个表——但不能使用 desc 或 insert

> ID：16085052
> 
> 赞同：0
> 
> 时间：2013-04-18T13:59:19.910
> 
> 标签：oracle

我是 Oracle 11g 的新手。我登录到 SQL plus 并创建一个这样的表。

```
SQL> create table "Skills" ("SkillID" Number(20), "Level" Number(20), "Area" Varchar2(20));

Table created. 
```

但后来我尝试插入或描述表格，但它不起作用。

```
SQL> desc skills;
ERROR:
ORA-04043: object skills does not exist 
```

这似乎不是一个简单的区分大小写的问题：

```
SQL> desc Skills;
ERROR:
ORA-04043: object Skills does not exist 
```

我不明白为什么我似乎能够创建表格但无法调用其结构或添加数据。这是怎么回事？这不是权限问题，因为我能够插入到我在帐户上创建的其他表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:01:25.227

您将表格创建为“技能”，而不是“技能”。通过使用引号，您可以指定表名应该区分大小写。尝试`desc "Skills"`看看这是否更适合您。

# jquery - 在 jquery 脚本文件中查找 asp hiddenfield

> ID：16085054
> 
> 赞同：0
> 
> 时间：2013-04-18T13:59:22.483
> 
> 标签：jquery, asp.net

我有一个像这样的隐藏领域

```
<asp:HiddenField ID="hfprdid" value="hooray" runat="server" /> 
```

我正在尝试从这样的 jquery 文件中访问它的值

```
alert($("#'<%=hfprdid.ClientID %>'").value); 
```

但这会引发这样的错误

```
Error: Error: Syntax error, unrecognized expression: #'<%=hfprdid.ClientID %>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:01:14.053

尝试删除双引号并更改为单引号

```
alert($('#<%= hfprdid.ClientID %>').value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:06:18.227

尝试：

```
alert($("#<%= hfprdid.ClientID %>").val()); 
```

# python - 按声明顺序列出类方法

> ID：16085055
> 
> 赞同：1
> 
> 时间：2013-04-18T13:59:25.297
> 
> 标签：python

在 Python 中，如何获取声明的类方法列表？inspect.getmembers 和 dir 返回按字母顺序排列的列表，但我需要一个按确切声明顺序排列的方法列表。

# configuration - AWS Elastic Beanstalk 配置文件

> ID：16085056
> 
> 赞同：1
> 
> 时间：2013-04-18T13:59:34.527
> 
> 标签：configuration, amazon-web-services, amazon-elastic-beanstalk

我有一个在 aws elastic beanstalk 上运行的应用程序。该应用程序需要一个配置文件，我将其用于手动在 ec2 实例上进行测试。

问题是，当自动缩放器决定扩展到更多实例时，应用程序在新实例上没有任何配置文件。

我阅读了有关为实例创建模板的信息。我可以将我的配置文件放在实例上，然后将其复制到新实例中。这有一个很大的缺点，因为如果我想在运行时更改配置，我必须在所有实例上都这样做。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:40:21.250

好吧，我看到两个选项： 1\. 当您更改配置文件时，您需要在 EB 上进行环境更新。在这种情况下，所有节点都将使用新版本的配置文件进行更新。2\. 而不是文件将您的配置设置到一些数据库，如 simpledb 或 dynamodb。从我的角度来看，如果您想在运行时更改设置，则此解决方案更适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:11:14.823

我同意 Vadim911，DB 将是一个更简单的解决方案。

但是，当您的应用程序在环境中设置时，您可以使用类似的方法来执行此操作。

WEB-INF/.ebextensions/commands.config

```
commands:
  replace-file:
    command: cp .ebextensions/file.xml /folder/file.xml 
```

资料来源：[infoq](http://www.infoq.com/news/2012/11/elastic-beanstalk-config-files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:54:18.310

如果我们更深入:) 使用“文件”而不是“命令”要好得多：

```
files:
    /folder/file.xml:
        mode: 000XXX
        owner: root
        group: users
        content: |
           <xml>I'm XML</xml> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T13:12:39.240

我建议您将配置文件放在安全的位置，例如 s3 存储桶。将敏感信息远离您的存储库。

尝试这样的事情：

```
# .ebexetensions/safe-config-install.config

files:
  "/tmp/cron-fetch-config.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      for f in /etc/profile.d/*.sh; do source $f; done;

      python -c "import boto;boto.connect_s3().get_bucket('my-private-bucket').get_key('secretfolder/secretfile.xml').get_contents_to_filename('/var/app/current/path/to/config.xml');

container_commands:
  install-config:
    command: python -c "import boto;boto.connect_s3().get_bucket('my-private-bucket').get_key('secretfolder/secretfile.xml').get_contents_to_filename('/var/app/ondeck/path/to/config.xml');

commands:
  setup-cron-for-config:
    command: echo -e "* * * * * root /tmp/cron-fetch-config.sh\n" > /etc/cron.d/my_cron 
```

# c# - MySQLConnector/Net 的 FatalExecutionEngineError

> ID：16085060
> 
> 赞同：1
> 
> 时间：2013-04-18T13:59:39.167
> 
> 标签：c#, mysql, visual-studio-2010

我正在开发一个 C#.NET 应用程序，它连接到 MySQL DB 并使用一些不安全的代码来使用旧的 C++ dll。

程序一启动，就会加载dll并分配一个指针，然后初始化一些C#变量，然后删除指针。

在程序中，我有一个对话框，其中有一个选项卡控件。此“对话框”的构造函数从使用旧 dll 初始化的变量和数据库中获取数据，并从这里开始问题：

```
 Dictionary<String, int> dizUM;
        MySqlCommand            myCom;
        MySqlConnection         myConn;
        MySqlDataReader         myRead;

        cmbRigheCons.Items.Add( MosaicoS.Properties.Resources.STR_CONS_DESC_GEN );
        cmbRigheCons.Items.Add( MosaicoS.Properties.Resources.STR_CONS_TIP_SOTT );
        cmbRigheCons.Items.Add( MosaicoS.Properties.Resources.STR_CONS_SOTT );
        cmbRigheCons.Items.Add( MosaicoS.Properties.Resources.STR_CONS_NOM_PEZ_CONS );
        cmbRigheCons.SelectedIndex = MosaicoMain.CFG.DescCons;
        cmbRigheVarMat.Items.Add( MosaicoS.Properties.Resources.STR_CONS_DESC_GEN );
        cmbRigheVarMat.Items.Add( MosaicoS.Properties.Resources.STR_CONS_TIP_SOTT );
        cmbRigheVarMat.Items.Add( MosaicoS.Properties.Resources.STR_CONS_SOTT );
        cmbRigheVarMat.Items.Add( MosaicoS.Properties.Resources.STR_CONS_NOM_PEZ_CONS );
        cmbRigheVarMat.Items.Add( MosaicoS.Properties.Resources.STR_CONS_NOM_PEZ_NEL_CONS );
        cmbRigheVarMat.SelectedIndex = MosaicoMain.CFG.DescVarMat;
        try
        {
            string connessione;

            connessione = MosaicoMain.CFG.DBConnection.Replace( "Option=3;", "" );
            connessione = connessione.Replace( "Driver={MySQL ODBC 5.1 Driver};", "" );
            myConn = new MySqlConnection( connessione );
            myCom = new MySqlCommand();
            myConn.Open();
            myCom.Connection = myConn;
            myCom.CommandText = @"SELECT umi_id, umi_um FROM unimis WHERE umi_tipoum = 0 ORDER BY umi_um;";
            myRead = myCom.ExecuteReader();
            dizUM = new Dictionary<String, int>();
            while( myRead.Read() )
                dizUM.Add( myRead.GetString( 1 ), myRead.GetInt32( 0 ) );
            cmbUMSup.DataSource = new BindingSource( dizUM, null );
            cmbUMSup.DisplayMember = "Key";
            cmbUMSup.ValueMember = "Value";
            myRead.Close();
            myConn.Close();
        }
        catch( MySqlException mySqlException )
        {
            MessageBox.Show( mySqlException.ToString() );
        } 
```

在这里，如果我从 myConn.Open(); 发表评论 到 myConn.Close(); 我没有遇到任何麻烦，但是**当我在表之间切换**时，打开连接会导致几乎立即的程序崩溃，但不是在程序的这一部分，而是在：

```
 private void configurazioniToolStripMenuItem1_Click( object sender, EventArgs e )
    {
        try
        {
            frmConfig = new FrmConfigurazioni();
            frmConfig.ShowDialog();
        }
        catch( Exception exception )
        {
            MessageBox.Show( exception.ToString() );
        }
    } 
```

这是我加载前一个代码片段的地方。错误是：

```
Managed Debugging Assistant 'FatalExecutionEngineError' has detected a problem in 
'C:\DEVELOP\MosaicoS\MosaicoS\bin\Debug\MosaicoS.vshost.exe'.
Additional Information: The runtime has encountered a fatal error. 
The address of the error was at 0x792380d9, on thread 0x824\. 
The error code is 0xc0000005\. 
This error may be a bug in the CLR or in the unsafe or non-verifiable portions of user code. 
Common sources of this bug include user marshaling errors for COM-interop or PInvoke, which may corrupt the stack. 
```

这也不**例外**。如果我评论代码，我不会崩溃，而且，如果我尝试在另一个解决方案中使用相同的字符串连接到同一个数据库，我没有问题。我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:29:27.023

“0xc0000005”是访问冲突异常。很难从您提供的代码中找出问题所在。我建议找到那个旧 c++ dll 的源代码并在一个解决方案中一起调试它们。您可以通过选中 .net 项目属性中“调试”部分下的“启用非托管代码调试”复选框来从 .net 调试 c++ dll。

# iphone - 私有接口和多个实现

> ID：16085063
> 
> 赞同：0
> 
> 时间：2013-04-18T13:59:42.730
> 
> 标签：iphone, ios, objective-c, cocoa-touch, cocoa

我从一个 iOS 项目中得到了一个简单的 Object-C 代码片段：

```
@interface store (private)

@end

@implementation store (private)

@end

@implementation store 
```

我的问题是：

1.  代码、私有接口和实现中的含义是什么`(private)`？

2.  最后一行`@implementation store`是什么意思？一个空的公共实现？没有`@end`？

3.  由于上面的代码中有两个`@implementation store`，这是否意味着objective-c支持单个接口的多个实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:29:28.847

1.  `What does (private) mean in the code, private interface & implementation?`-`(private)`表示您正在贴花/实现一个 Objective-C[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)。在这种情况下`private`只是一个名称。如果是的话就没什么区别了`store (myPrivateMethods)`

2.  `What does the last line @implementation store mean? An empty public implementation? Without @end?`-`@implementation store`是类的实际实现部分`store`。不确定如果`@end`缺少 an 会发生什么。

3.  `Since there are two @implementation store in above code, does that mean objective-c support multiple implementation for a single interface?`- 实际上没有 2 个实现`store`。该类有一个实现和该类`store`的一个类别的一个实现 - `store (private)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:18:12.320

1.  这是一个[objective-c 类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)，允许您将代码添加到现有类。括号中的名称是任意的。
2.  这是一个空的实现，但我很惊讶它编译时没有`@end`. 使用默认编译器设置尝试 xcode，我得到一个错误。如果只是为了清楚起见，它应该有一个`@end`.
3.  第一个实现是第一个的附加。您可以使用它将大类分解为单独的模块，使接口的某些部分对某些人可用而不对其他人可用，或者 - 最有用和最常见的 - 向 SDK 类添加方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:10:08.817

`private` means nothing in Objective-C, you call it `peanuts` if you want. It's really a label to differentiate categories if you have multiple, but it's value is arbitrary. It just has to mean something to you as a developer.

The `@implementation store` line marks the beginning of the implementation for the class defined by `@interface store` (i.e. no category), which is probably declared in a '.h' file. It's the fact that the interface is in the '.h' that makes it public (because other classes can import the `.h` file and therefore see the declaration of properties, methods, etc...).

It doesn't support multiple implementations, they are additive. Of course, then you have the question of implementing the same method in both. This is strongly discouraged by Apple. Here's the [doc](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html).

> **Avoid Category Method Name Clashes**
> 
> Because the methods declared in a category are added to an existing class, you need to be very careful about method names.
> 
> If the name of a method declared in a category is the same as a method in the original class, or a method in another category on the same class (or even a superclass), the behavior is undefined as to which method implementation is used at runtime. This is less likely to be an issue if you’re using categories with your own classes, but can cause problems when using categories to add methods to standard Cocoa or Cocoa Touch classes.

# java - MQ 消息回滚

> ID：16085066
> 
> 赞同：1
> 
> 时间：2013-04-18T13:59:47.330
> 
> 标签：java, jms, mq

我正在尝试从 Java 中的 MQ 队列中读取消息，当处理异常时需要回滚时，我对流程有点困惑。

我有一个循环运行并查找消息的阅读器类。当我初始化阅读器时，它会创建一个连接和一个会话。然后，当需要在循环中读取消息时，它会创建一个`MQQueue`and `MQQueueReceiver`。这工作正常，我从队列中得到一个 JMSMessage，然后将其交给另一个线程工作。如果工作线程失败，我想将该消息放回队列中（以便集群中的其他节点重试）。

我的问题是，我如何回滚？我注意到类`rollback()`中有一个方法`MQQueueSession`。但是我对我的所有消息都重用了同一个会话。我是否理解应该为每条消息创建一个新会话，而不是一遍又一遍地重复使用同一个会话？

这对我来说是反直觉的。

会话也是用`connection.createQueueSession(false, Session.CLIENT_ACKNOWLEDGE);`. 我应该使用另一个标志，而不是`CLIENT_ACKNOWLEDGE`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:49:50.207

您应该使用 Session.SESSION_TRANSACTED 标志和 Session.commit/Sessiuon.rollback 来提交/回滚在当前事务中完成的所有消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:29:47.850

请注意，JMS 1.1 规范将会话定义为：

> Session - 用于发送和接收消息的单线程上下文

后来在规范中说：

> 限制对 Session 的并发访问有两个原因。首先，Sessions 是支持事务的 JMS 实体。实现多线程事务非常困难。其次，Sessions支持异步消息消费。重要的是，JMS 不要求用于异步消息消费的客户端代码能够处理多个并发消息。此外，如果一个 Session 已经设置了多个异步消费者，重要的是不要强迫客户端处理这些单独的消费者同时执行的情况。这些限制使 JMS 更易于用于典型客户端。更复杂的客户端可以通过使用多个会话来获得他们想要的并发性。

所以，不，您不需要每条消息一个会话。但是，会话下生成或使用的所有消息都会一起提交或回滚，*即使您已将它们移交给其他线程*并且此行为符合规范。

使用 Evgeniy 描述的事务处理会话和 COMMIT/ROLLBACK，但也要注意将消息保持在同一会话范围内，所有这些都在同一工作单元内。

# verification - 使用 Jessie 插件和 Frama-C 的验证问题

> ID：16085068
> 
> 赞同：3
> 
> 时间：2013-04-18T13:59:53.283
> 
> 标签：verification, frama-c

我是 Frama-C 的新手，我想正确学习 ACSL 语法。我有这个虚拟示例，Jessie 插件无法验证第 9 行和第 12 行。我错过了什么吗？要验证的函数（相等）将检查两个数组（a 和 b）在每个索引处是否具有相同的值：

```
/*@
     requires \valid_range(a,0,n-1);
     requires \valid_range(b,0,n-1);
     requires n >= 0;
     requires i >= 0 && i <= n;
     assigns i;
     behavior all_equal:
         assumes i == n;
         ensures \result == 1;
     behavior some_not_equal:
        assumes i != n;
        ensures \result == 0;
*/
int equal(int a[], int n, int b[], int i) {
  /*@ 
    loop invariant 0 <= i <= n;
    loop assigns i;
    loop variant n-i;
  */  
  for (i = 0; i < n; i++) {
    if (a[i] != b[i])
      return 0;
  }
  return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:18:41.697

这里有几个不正确的地方：

```
behavior all_equal:
     assumes i == n;
     ensures \result == 1;
 behavior some_not_equal:
    assumes i != n;
    ensures \result == 0; 
```

在该`assumes`子句中，所有变量都在函数的前状态下进行评估。这意味着如果您有两个大小相等的数组`n`，并且假设`i`是`0`（它不可能是，请参阅下一个解释），`i == n`除非数组大小相同，否则将始终失败`0`

另一件事：您似乎将其`i`用作循环控制的变量，在循环开始时将其设置为 0，但是在您的注释中您说`i`，在程序的预状态中，介于`0`和之间`n`。这与我之前所说的相结合，是 jessie 无法证明这一点的原因之一。

最后，你不能证明这一点的主要原因是你缺少一个基本的循环不变量，它保证两个数组，对于当前迭代之前的所有数组索引，都是相等的：

```
loop invariant loop invariant \forall integer k; 0 <= k < i ==> a[k] == b[k]; 
```

有了这个不变量，您现在可以更好地指定您的行为。您的问题的正确解决方案是：

```
/*@
     requires \valid_range(a,0,n-1);
     requires \valid_range(b,0,n-1);
     requires n >= 0;
     behavior all_equal:
         assumes \forall integer k; 0 <= k < n ==> a[k] == b[k];
         ensures \result == 1;
     behavior some_not_equal:
        assumes \exists integer k; 0 <= k < n  && a[k] != b[k];
        ensures \result == 0;
*/
int equal(int a[], int n, int b[]) {
  int i = 0;
  /*@ 
    loop invariant 0 <= i <= n;
    loop invariant \forall integer k; 0 <= k < i ==> a[k] == b[k];
    loop assigns i;
    loop variant n-i;
  */  
  for (i = 0; i < n; i++) {
    if (a[i] != b[i])
      return 0;
  }
  return 1;
} 
```

# javascript - 带有 skrollr.min.js 插件的 IE8 上的对象预期错误

> ID：16085071
> 
> 赞同：0
> 
> 时间：2013-04-18T13:59:56.267
> 
> 标签：javascript, internet-explorer-8, cross-browser, parallax

我试图用这个插件创建一个视差网站：github.com/Prinzhorn/skrollr 并且除了 ie8 之外的所有浏览器都运行良好，这向我显示了这个错误：

```
Message: Object expected
Line: 2
Char: 5223
Code: 0
URI: http://milokan.com/images/attract/dist/skrollr.min.js 
```

[但他们的演示在 ie8 http://prinzhorn.github.io/skrollr/](http://prinzhorn.github.io/skrollr/)上看起来不错， 所以我不明白我的代码有什么问题。

这是我的嵌入代码：

```
<script type="text/javascript" src="dist/skrollr.min.js"></script>
<script type="text/javascript" src="dist/skrollr.menu.min.js"></script>
<script type="text/javascript">
//http://detectmobilebrowsers.com/ + tablets
(function(a) {
    if(/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|playbook|silk/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))
    {
        //Add skrollr mobile on mobile devices.
        document.write('<script type="text/javascript" src="dist/skrollr.mobile.min.js"><\/script>');
    }
})(navigator.userAgent||navigator.vendor||window.opera);
</script>
<!--[if lt IE 9]>
<script type="text/javascript" src="dist/skrollr.ie.min.js"></script>
<![endif]-->
    <script type="text/javascript">
        var s = skrollr.init(/*other stuff*/);

        //The options (second parameter) are all optional. The values shown are the default values.
        skrollr.menu.init(s, {
            animate: true, //skrollr will smoothly animate to the new position using `animateTo`.
            duration: 2500, //How long the animation should take in ms.
            easing: 'linear' //The easing function to use.
        });
    </script> 
```

这是我有问题的演示站点：http: [//milokan.com/images/attract/main.html](http://milokan.com/images/attract/main.html)。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:45:45.943

我在 FF 中也遇到了错误。解决方案很简单：

您复制了 skrollr 演示，它包含这两行

```
<div class="drop" style="background:#7e5600;" data-0="right:562px;bottom[WTF]:100%;" data-1500="bottom:0%;">אודות</div>
<div class="drop" style="background:#99D100;" data-0="right:656px;bottom[inverted]:100%;" data-1500="bottom:0%;">צרו קשר</div> 
```

但是既`WTF`没有定义也没有`inverted`定义缓动函数。这些**不是**内置的。skrollr 演示像这样定义它们

```
var s = skrollr.init({
    easing: {
        WTF: Math.random,
        inverted: function(p) {
            return 1-p;
        }
    }
}); 
```

# ruby-on-rails - youtube_it 在更新到 Ruby 2 后抛出 ArgumentError - 如何修复？

> ID：16085079
> 
> 赞同：2
> 
> 时间：2013-04-18T14:00:24.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, youtube, ruby-2.0

我有一个应用程序，它的任务是抓取一个网站，然后将一段视频发布到 youtube，并抓取一些信息。

将应用程序更新到 ruby​​ 2 后，youtube 上传停止工作并开始显示以下内容：

```
(ArgumentError) "wrong number of arguments (2 for 0..1)"
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/youtube_it 2.1.13/lib/youtube_it/chain_io.rb:66:in `read'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/generic_request.rb:202:in `copy_stream'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/generic_request.rb:202:in `send_request_with_body_stream'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/generic_request.rb:132:in `exec'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1403:in `block in transport_request'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1402:in `catch'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1402:in `transport_request'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1375:in `request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/newrelic_rpm-3.6.0.83/lib/new_relic/agent/instrumentation/net.rb:25:in `block in request_with_newrelic_trace'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/newrelic_rpm-3.6.0.83/lib/new_relic/agent/cross_app_tracing.rb:39:in `trace_http_request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/newrelic_rpm-3.6.0.83/lib/new_relic/agent/instrumentation/net.rb:24:in `request_with_newrelic_trace'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1368:in `block in request'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:851:in `start'
/usr/local/rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1366:in `request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/rest-client-1.6.7/lib/restclient/net_http_ext.rb:51:in `request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/newrelic_rpm-3.6.0.83/lib/new_relic/agent/instrumentation/net.rb:25:in `block in request_with_newrelic_trace'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/newrelic_rpm-3.6.0.83/lib/new_relic/agent/cross_app_tracing.rb:39:in `trace_http_request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/newrelic_rpm-3.6.0.83/lib/new_relic/agent/instrumentation/net.rb:24:in `request_with_newrelic_trace'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/faraday-0.8.7/lib/faraday/adapter/net_http.rb:75:in `perform_request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/faraday-0.8.7/lib/faraday/adapter/net_http.rb:38:in `call'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/faraday-0.8.7/lib/faraday/response.rb:8:in `call'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/youtube_it-2.1.13/lib/youtube_it/middleware/faraday_authheader.rb:17:in `call'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/faraday-0.8.7/lib/faraday/connection.rb:247:in `run_request'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/faraday-0.8.7/lib/faraday/connection.rb:112:in `post'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/youtube_it-2.1.13/lib/youtube_it/request/video_upload.rb:92:in `upload'
/home/deployer/apps/project/shared/bundle/ruby/2.0.0/gems/youtube_it-2.1.13/lib/youtube_it/client.rb:106:in `video_upload'
/home/deployer/apps/project/current/app/models/cme_event.rb:169:in `upload_on_youtube' 
```

这是一个关于参数数量的简单愚蠢错误，这似乎是**net/http** 将两个参数而不是前一个参数传递给函数。我尝试通过添加额外的可选参数来更改**youtube_it gem 上的代码，但仍然没有运气。**

所以有人知道ruby​​ 2 上的**net/http可能会发生什么改变吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T20:20:50.617

这已在新版本的 youtube_it gem (2.3.2) 中修复，另请参阅：

[https://github.com/kylejginavan/youtube_it/issues/159](https://github.com/kylejginavan/youtube_it/issues/159) [https://github.com/kylejginavan/youtube_it/issues/167](https://github.com/kylejginavan/youtube_it/issues/167)

# jsf - 如何在 primefaces 中创建可滚动和可编辑的数据表

> ID：16085083
> 
> 赞同：0
> 
> 时间：2013-04-18T14:00:45.143
> 
> 标签：jsf, primefaces, datatable

我需要创建可滚动和可编辑的数据表。我发现将样式类更改为“ui-editable-column”，但它对我不起作用。有没有其他方法可以创建这样的数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:13:22.543

在 PrimeFaces Showcase 中，您可以找到以下示例（在大量其他示例中）：

*   [行编辑](http://www.primefaces.org/showcase/ui/datatableRowEditing.jsf)
*   [滚动](http://www.primefaces.org/showcase/ui/datatableScrolling.jsf)
*   [单元格编辑](http://www.primefaces.org/showcase/ui/datatableCellEditing.jsf)

# html - 使用 CSS 的下拉菜单在悬停时不显示菜单

> ID：16085084
> 
> 赞同：0
> 
> 时间：2013-04-18T14:00:46.470
> 
> 标签：html, css

当用户将鼠标悬停在菜单上时，我试图让下拉菜单出现`About`，请参阅[http://jsfiddle.net/bpAbC/](http://jsfiddle.net/bpAbC/)

HTML：

```
<nav>
    <ul>
        <li>
            <a href="#">Home</a>
        </li>
        <li>
            <a href="#">About</a>
            <ul class="sub">
                <li>One</li>
                <li>Two</li>
                <li>Three</li>
            </ul>
        </li>
        <li>
            <a href="#">Contact</a>
        </li>
    </ul>
</nav> 
```

CSS：

```
nav > ul {
    margin: 0;
    padding: 0;
    display: table;
    width: 100%;
    height: 100%;
}

nav > ul > li {
    display: table-cell;
    list-style: none;
    padding: 0;
    margin: 0;
    text-align: center;
}

nav > ul > li a {
    color: red;
}

nav > ul > li > ul.sub {
    display: none;
}

nav > ul > li a:hover ul.sub {
    display: block;
} 
```

当`.sub`我将鼠标悬停在 About 上时，ul 未显示。我假设我在最后两条规则上犯了错误，但我无法解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:03:47.543

您需要将选择器更改为，`nav > ul > li:hover ul.sub`因为`ul.sub`不是`a`

```
nav > ul > li:hover ul.sub {
    display: block;
} 
```

[http://jsfiddle.net/bpAbC/1/](http://jsfiddle.net/bpAbC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:05:04.417

尝试这个：

```
nav > ul > li:hover ul.sub {
    display: block;
} 
```

让我知道它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:07:40.293

你在哪里

`nav > ul > li a:hover ul.sub { display: block; }`

在你的 CSS 中，尝试

`nav > ul > li a:hover + ul.sub { display: block; }`

`a:hover`和之间的“+”指定`ul.sub`您要[选择](http://css-tricks.com/child-and-sibling-selectors/). `<a>`我认为这是更可取的，因为它更具体地说明了您正在选择的元素。

# selenium - WebDriver.findElement 导致 SocketExceptions 10 秒

> ID：16085087
> 
> 赞同：1
> 
> 时间：2013-04-18T14:00:50.630
> 
> 标签：selenium, webdriver, httpclient

我在一套导致广泛故障的 WebDriver 测试用例中遇到了一个奇怪的问题。

该套件中的一个测试用例目前预计会失败 - 网站中有一个未解决的错误导致选项卡消失。应该单击选项卡的测试用例调用 WebDriver 的 findElement 方法来查找选项卡。它等待标准超时，但随后，我没有抛出通常的异常并继续前进，而是开始在控制台中获取 SocketExceptions，这些异常不会被通常捕获错误的测试用例代码捕获：

```
Apr 18, 2013 8:47:23 AM org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: No buffer space available (maximum connections reached?): connect
Apr 18, 2013 8:47:23 AM org.apache.http.impl.client.DefaultRequestDirector tryConnect 
INFO: Retrying connect 
Apr 18, 2013 8:47:23 AM org.apache.http.impl.client.DefaultRequestDirector tryConnect 
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: No buffer space available (maximum connections reached?): connect 
Apr 18, 2013 8:47:23 AM org.apache.http.impl.client.DefaultRequestDirector tryConnect 
INFO: Retrying connect 
Apr 18, 2013 8:47:23 AM org.apache.http.impl.client.DefaultRequestDirector tryConnect 
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: No buffer space available (maximum connections reached?): connect 
Apr 18, 2013 8:47:23 AM org.apache.http.impl.client.DefaultRequestDirector tryConnect 
INFO: Retrying connect 
```

SocketExceptions 导致 UnreachableBrowserException：

```
org.openqa.selenium.remote.UnreachableBrowserException: Error communicating with the remote browser. It may have died.
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 22:18:01'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_32'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:493)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:502)
    at org.openqa.selenium.remote.RemoteWebDriver.quit(RemoteWebDriver.java:372)
    at com.brainshark.uitests.common.TestBase.afterClass(TestBase.java:243)
    at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:36)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at com.brainshark.uitests.runners.BrainsharkTestRunner.run(BrainsharkTestRunner.java:51)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: java.net.SocketException: No buffer space available (maximum connections reached?): connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.openqa.selenium.remote.HttpCommandExecutor.fallBackExecute(HttpCommandExecutor.java:319)
    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:297)
    at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.execute(NewProfileExtensionConnection.java:136)
    at org.openqa.selenium.firefox.FirefoxDriver$LazyCommandExecutor.execute(FirefoxDriver.java:357)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:472)
    ... 32 more 
```

这会导致每个测试用例快速失败，并且在大约 10 秒内，每次尝试运行下一个测试用例都会触发上述失败。然后，神奇的事情发生了，异常停止了。

有谁知道我为什么会看到这种行为？或者什么需要 10 秒才能重置？我是否应该通过尝试检测此类情况并在尝试执行下一个测试用例之前保持静止 10 秒来解决此问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:57:04.137

我想到了。SocketExceptions 是由在太短的时间内进行太多 findElement 调用引起的。

我有一个自定义的查找方法，除了 By 定位器之外，它还允许匹配文本模式等附加参数。在某些情况下（即，如果存在与 By 定位符匹配但与文本模式不匹配的元素，例如在这种情况下，有多个选项卡，但缺少我要查找的文本的选项卡）此方法可以使重复findElement 在其超时期间调用。

我从来没有注意到开发中的问题，因为我在编写测试时使用了 20 秒的超时，所以它们失败得更快。在我们的实际运行中，我们使用了 180 秒的超时时间，这足以让 Selenium 使用 findElement 调用过载。

我添加了一些睡眠，以确保我最多每四分之一秒调用一次 findElement，并且还放入了一个 try/catch 来捕获如果仍然发生过载将导致的 UnreachableBrowserException。如果是这样，我只需睡 40 秒，然后再试一次。它现在似乎运作良好。

# android - Android - 如何显示 Android 操作系统版本

> ID：16085088
> 
> 赞同：0
> 
> 时间：2013-04-18T14:00:51.757
> 
> 标签：android, operating-system

我想显示 android OS 版本，如 Jellybean、cupcake 等。我将如何去做。我知道您可以使用 Build.Version_Codes 但不完全确定如何使用它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:10:53.713

您可以使用

```
 android.os.Build.VERSION.SDK_INT 
```

请看

[http://developer.android.com/reference/android/os/Build.VERSION.html](http://developer.android.com/reference/android/os/Build.VERSION.html)

# matlab - 在MATLAB中递归附加到向量

> ID：16085090
> 
> 赞同：0
> 
> 时间：2013-04-18T14:00:54.773
> 
> 标签：matlab, recursion

我正在做一个分配，其中必须找到位于区间 [a,b) 中的三对角对称矩阵的特征值数。我需要使用二等分算法来找到这些特征值，并且它们必须以向量 E 的形式输出。函数是 function [ E ] = bisection(A, a, b, tol) ，其中 tol 是可接受的误差范围.

```
% If tolerance is met, add (a + b)/2 to E as many times as there are
% eigenvalues left in [a,b). This is the recursive stopping criterium.
if(b - a < tol)
    for i = 1:n
        E = [E; (a + b)/2];
    end
end

% If there are eigenvalues left in [a,b), add new eigenvalues to E through
% recursion.
if(n > 0)
    E = [E; bisection(A, a, (a+b)/2, tol); bisection(A, (a+b)/2, b, tol)];
end

E = []; 
```

我想要做的是用另一个二等分函数调用扩展向量 E。只有我得到这个错误：

```
??? Undefined function or variable "E".

Error in ==> bisection at 56
    E = [E; bisection(A, a, (a+b)/2, tol); bisection(A, (a+b)/2, b, tol)]; 
```

我已经创建了一个空向量 E，我显然不能将它放入函数中。那么有没有办法递归地扩展向量呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:04:18.703

如果您不能将空的起始向量放入函数中，则应将其作为输入参数传递。

这就是顶级代码的样子，例如：

```
E = [];
E = myRecursiveFunction(E,inputs,stoppingCriteria) 
```

# javascript - 使用 fileSaver.js 和 Blob.js 使用 javascript 保存文本文件

> ID：16085092
> 
> 赞同：1
> 
> 时间：2013-04-18T14:00:56.367
> 
> 标签：javascript, file, save, blob, newline

不知道你们中的大多数人是否知道用于保存文件的 javascript 库。

基本上以前的代码如下：

```
var bb = new BlobBuilder();
bb.append(content);
var fileSaver = window.saveAs(bb.getBlob("text/plain;charset=UTF-8"), "filename.txt"); 
```

但是现在是这样的：

```
var oMyBlob = new Blob([content], { type : "text/plain", endings: "transparent"});
window.saveAs(oMyBlob, "filename.txt"); 
```

无论哪种方式，无论我使用什么（如果不推荐使用的 BlobBuilder 或 Blob），都不会显示 newLines，所有内容都保存在文本文件的同一行下。

你们知道为什么会这样吗？尝试使用不同的 ContentType：text/plain、text/enricher、text/html...

这些似乎都不适用于 newLines。如果我要在文件中保存一个“警报（数据）”，那么 newLines 就在那里。当我使用这个库时，看起来它解析了 newLines 或其他东西，不知道 :( 也尝试了另一个字符集..

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-22T20:02:27.330

"\r\n" 字符将充当传递给 blob 的内容中的换行符。

# linux - 尝试 mkdir 时的 Shell 变量问题

> ID：16085094
> 
> 赞同：17
> 
> 时间：2013-04-18T14:01:01.847
> 
> 标签：linux, bash, shell, variables

任何想法这段代码有什么问题？

```
CLIENT_BUILD_DIR="~/Desktop/TempDir/"

if [ ! -d $CLIENT_BUILD_DIR ]
then
   {
      mkdir $CLIENT_BUILD_DIR
   }
fi 
```

我收到错误：mkdir: ~/Desktop: 没有这样的文件或目录。

显然目录在那里，如果我用 ~/Desktop/TempDir/ 替换变量，脚本就可以工作

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-18T14:07:09.723

引号防止 ~ 的扩展。

利用：

```
CLIENT_BUILD_DIR=~/Desktop/TempDir/

if [ ! -d "$CLIENT_BUILD_DIR" ]
then mkdir "$CLIENT_BUILD_DIR"
fi 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-18T14:07:07.243

在变量中使用该`~`字符时不会重新解释。

你可以`CLIENT_BUILD_DIR="$HOME/Desktop/TempDir/"`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-08T19:54:58.043

`mkdir ${CLIENT_BUILD_DIR}`会做。如果已经存在，则不会创建目录。

# python - 只读包含某些特定字符串的行并对其应用正则表达式

> ID：16085100
> 
> 赞同：0
> 
> 时间：2013-04-18T14:01:16.400
> 
> 标签：python, regex, readfile, readlines

这是我的代码：我有一个读取文件的脚本，但在我的文件中并非所有行都相似，我只想从具有`I DOC O:`.

我已经尝试过使用 if 条件，但是当存在正则表达式不匹配的行时它仍然不起作用：

```
#!/usr/bin/env python 

# -*- coding: utf-8 -*-

import re 

def extraire(data):
    ms = re.match(r'(\S+).*?(O:\S+).*(R:\S+).*mid:(\d+)', data) # heure & mid 
    return {'Heure':ms.group(1), 'mid':ms.group(2),"Origine":ms.group(3),"Destination":ms.group(4)}

tableau = []  

fichier = open("/home/TEST/file.log")
f = fichier.readlines() 
for line in f: 
    if (re.findall(".*I Doc O:.*",line)):     
    tableau = [extraire(line) for line in f ]

print tableau
fichier.close() 
```

这是我的文件的一些行的示例，我想要第一行和第四行..：

```
01:09:25.258 mta         Messages       I Doc O:NVS:SMTP/alarm@yyy.xx R:NVS:SMS/+654811 mid:6261
01:09:41.965 mta         Messages       I Rep O:NVS:SMTP/alarmes.techniques@xxx.de R:NVS:SMS/+455451 mid:6261
01:09:41.965 mta         Messages       I Rep 6261 OK, Accepted (ID: 26)
08:14:14.469 mta         Messages       I Doc O:NVS:SMTP/alarm@xxxx.en R:NVS:SMS/+654646 mid:6262
08:14:30.630 mta         Messages       I Rep O:NVS:SMTP/alarm@azea.er R:NVS:SMS/+33688704859 mid:6262
08:14:30.630 mta         Messages       I Rep 6262 OK, Accepted (ID: 28) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:20:05.097

来自：[http ://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

*?, +?, ?? '* '、'+' 和 '?' 限定符都是贪婪的；它们匹配尽可能多的文本。有时这种行为是不希望的；如果 RE <.*> 与 ... 匹配

此外，findall 最好与您的整个缓冲区一起使用，并返回一个列表，因此循环匹配项可以使您不必对文件的每一行执行条件。

```
buff = fichier.read()
matches = re.findall(".*?I Doc ):.*", buff)
for match in matches:
    tableau = ... 
```

- 这是我的测试代码，你能告诉我它在做什么，你不想要吗？

```
>>> import re
>>> a = """
... 01:09:25.258 mta         Messages       I Doc O:NVS:SMTP/alarm@yyy.xx R:NVS:SMS/+654811 mid:6261
... 01:09:41.965 mta         Messages       I Rep O:NVS:SMTP/alarmes.techniques@xxx.de R:NVS:SMS/+455451 mid:6261
... 01:09:41.965 mta         Messages       I Rep 6261 OK, Accepted (ID: 26)
... 08:14:14.469 mta         Messages       I Doc O:NVS:SMTP/alarm@xxxx.en R:NVS:SMS/+654646 mid:6262
... 08:14:30.630 mta         Messages       I Rep O:NVS:SMTP/alarm@azea.er R:NVS:SMS/+33688704859 mid:6262
... 08:14:30.630 mta         Messages       I Rep 6262 OK, Accepted (ID: 28)"""
>>> m = re.findall(".*?I Doc O:.*",a)
['01:09:25.258 mta         Messages       I Doc O:NVS:SMTP/alarm@yyy.xx R:NVS:SMS/+654811 mid:6261', '08:14:14.469 mta         Messages       I Doc O:NVS:SMTP/alarm@xxxx.en R:NVS:SMS/+654646 mid:6262']

>>> tableau = []
>>> for line in m:
...     tableau.append( extraire(line) )
... 
>>> tableau
[{'Origine': 'R:NVS:SMS/+654811', 'Destination': '6261', 'Heure': '01:09:25.258', 'mid': 'O:NVS:SMTP/alarm@yyy.xx'}, {'Origine': 'R:NVS:SMS/+654646', 'Destination': '6262', 'Heure': '08:14:14.469', 'mid': 'O:NVS:SMTP/alarm@xxxx.en'}] 
```

您也可以在一行中执行此操作

```
>>> tableau = [ extraire(line) for line in re.findall( ".*?I Doc ):.*", fichier.read() ) ] 
```

# c - Width of int64_t, is it always 64 bits?

> ID：16085107
> 
> 赞同：2
> 
> 时间：2013-04-18T14:01:29.487
> 
> 标签：c, gcc, x86

For the following code

```
static inline float fix2float(int64_t f)
{
    return (float)f / (1 << 60); // <-- error here
} 
```

The compiler is giving me these warnings.

```
warning: left shift count >= width of type
warning: division by zero 
```

Why is the compiler giving these warnings when 64 > 60?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T14:04:24.460

`1`不是 C 实现中的 64 位数字。它是一个`int`，可能是 32 位。

编译器不会查看表达式并查看其中是否`int64_t`涉及，因此其他算术应该使用 64 位。它从它们的部分构建表达式。在部分`(1 << 60)`中，编译器识别一个并给它一个类型`int`，因为这是 C 规则所说的与简单常量值有关的内容（对于十六进制表示法、后缀和大值还有其他规则）。因此，`1 << 60`尝试将 an 移动`int`60 位。由于`int`您的系统上只有 32 位，编译器会警告您。

更好的写法是`return f * 0x1p-60f;`. `0x1p-60f`是一个`float`值为 2 ^(–60)的常数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T14:06:17.870

在您的代码中，实际上存在与 int64_t 无关的错误。在`(1 << 60)`表达式中`1`和`60`都被认为是 int （通常是 32 位）。你应该使用修饰符`LL`。像（1LL << 60）。

```
#include <stdio.h>

int main()
{
    printf("%llx\n", (1LL << 60));
    return 0;
} 
```

顺便请注意`printf()`格式。`int64_t`实际上是`long long`（至少在大多数情况下）。

更新：有社区声音建议使用不同的方法：

```
printf("%" PRIx64 "\n", (UINT64_C(1) << 60)); 
```

这里的问题至少在我所在的领域并非所有编译器都正确实现了这些宏（这是[可能的证明之一](http://connect.microsoft.com/VisualStudio/feedback/details/685726/int64-c-and-uint64-c-should-be-defined-in-more-cross-platform-way)）。但是主流编译器应该很高兴。至少我不建议混合`%lld`甚至`1LL`在 GCC 中（你可以尝试，至少 GCC 4.6.3 抱怨这种混合）。

# php - Mysql prepare statement - Select

> ID：16085109
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:01:31.817
> 
> 标签：php, mysql, prepare

Who can give me an advice? why the query can't to provide me an expected value? Thanks.

```
 $mysqli = new mysqli($GLOBALS["mysql_host"], $GLOBALS["mysql_user"],          $GLOBALS["mysql_passwd"], $GLOBALS["mysql_database"]);
 $stmt = $mysqli->prepare("SELECT one FROM table ORDER BY date DESC LIMIT 1");
 $last = $stmt->bind_result($one);
 $stmt->execute();
 $stmt->close();
 $mysqli->close();

 Echo $last; //it should be "abc" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:09:09.033

I think you have to `execute` and then call `fetch` on `mysql_stmt`-objects. Because you may get multiple results (rows).

With `fetch` you will advance your result-Cursor.

Documentation: [mysqli](http://www.php.net/manual/de/class.mysqli.php) [mysqli-stmt](http://www.php.net/manual/de/class.mysqli-stmt.php)

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

/* prepare statement */
if ($stmt = $mysqli->prepare("SELECT Code, Name FROM Country ORDER BY Name LIMIT 5")) {
    $stmt->execute();

    /* bind variables to prepared statement */
    $stmt->bind_result($col1, $col2);

    /* fetch values */
    while ($stmt->fetch()) {
        printf("%s %s\n", $col1, $col2);
    }

    /* close statement */
    $stmt->close();
}
/* close connection */
$mysqli->close();

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:13:45.583

我可以。
建议很简单：**不要使用 mysqli**

改用**[PDO](https://stackoverflow.com/tags/pdo/info)** _

```
$stmt = $pdo->prepare("SELECT one FROM table ORDER BY date DESC LIMIT 1");
$stmt->execute();
$last = $stmt->fetchColumn();

echo $last; //it should be "abc" 
```

干净，简单且**有效**

# apache - Amazon EC2 错误或应用程序错误 - swapon: /dev/sda3: read swap header failed

> ID：16085110
> 
> 赞同：0
> 
> 时间：2013-04-18T14:01:33.277
> 
> 标签：apache, tomcat, web-applications, amazon-ec2, http-status-code-503

谁能告诉我这个错误是什么？这是与 Amazon EC2 相关的错误吗？

我们的应用程序托管在 Amazon EC2 上，当我们尝试访问该站点时，我们得到一个带有 503 错误的空白页面。

除了我们在亚马逊系统报告中发现的错误之外，没有什么不寻常的。

swapon：/dev/sda3：读取交换标头失败：参数无效

mountall: swapon /dev/sda3 449 以状态 255 终止

mountall：激活交换时出现问题：/dev/sda3

```
Asking all remaining processes to terminate... 
```

[80G init：从描述符读取时出错：文件描述符错误

初始化：从描述符读取时出错：错误的文件描述符

初始化：从描述符读取时出错：错误的文件描述符

初始化：从描述符读取时出错：错误的文件描述符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:08:45.010

它的读取就像磁盘故障。如果您使用的是实例存储，则应该从备份中恢复。如果您使用的是 EBS 卷，则需要从快照还原。

# arm - MPU 不保护内存访问

> ID：16085111
> 
> 赞同：2
> 
> 时间：2013-04-18T14:01:34.587
> 
> 标签：arm, cortex-m3

我想使用 Cortex-M3 MPU 来保护内存免受意外访问。为此，我配置了 MPU。但我根本没有任何例外。BusFault、HardFault 等其他异常已被强制使用适当的“坏代码”。

当前的初始化是

```
MPU->CTRL &= ~MPU_CTRL_ENABLE_Msk;       // disable MPU

MPU->RNR  = 0
MPU->RBAR = 0x20000000;
MPU->RASR = 0x03000019; // 0x03UL << (MPU_RASR_ATTRS_Pos+8) | (0x19UL << 0);

MPU->RNR  = 1;
MPU->RBAR = 0x8000000;  // read back as 0x8000001
MPU->RASR = 0x03000027; // 0x03UL << (MPU_RASR_ATTRS_Pos+8) | (0x27UL << 0); 

MPU->RNR  = 2;
MPU->RBAR = 0x40000000; // read back as 0x40000002
MPU->RASR = 0x13000039; // 0x13UL << (MPU_RASR_ATTRS_Pos+8) | (0x39UL << 0); 

SCB->SHCSR |= SCB_SHCSR_MEMFAULTENA_Msk;  // Enable the memory fault exception

MPU->CTRL |= MPU_CTRL_PRIVDEFENA_Msk | MPU_CTRL_ENABLE_Msk;   // Enable MPU 
```

到目前为止，我可以访问所有内存。现在我添加一个区域来保护一个区域。

```
MPU->CTRL &= ~MPU_CTRL_ENABLE_Msk; // disable MPU

MPU->RNR = 3;
MPU->RBAR = 0x20002000;  // read back as 0x20002003
MPU->RASR = 0x00000009;  // 0x00UL << (MPU_RASR_ATTRS_Pos+8) | (0x09UL << 0);

MPU->CTRL |= MPU_CTRL_PRIVDEFENA_Msk | MPU_CTRL_ENABLE_Msk; // re-enable MPU 
```

区域号 3 应隐藏所有其他 MPU 区域。现在 0x20002000 处的内存不应该是不可访问的，既不可读也不可写。但是我仍然可以在这个地址读取甚至写入内存。

什么会抑制 NXP LPC1788 CPU 中的内存保护？

# asp.net-mvc-3 - 以下哪种方式更优化？

> ID：16085119
> 
> 赞同：1
> 
> 时间：2013-04-18T14:01:52.093
> 
> 标签：asp.net-mvc-3, entity-framework-4, query-optimization

我正在使用 Entity Framework 4 和 asp.net mvc 3。我正在编写一个系统来注册并写一些帖子并投票给其他人的帖子。我想保存一个人投票的帖子。可能有成千上万人们和他们每个人都投票支持的数千个帖子。现在我有两个问题：

1-我可以用实体框架创建表吗？

2-哪个更好？有一个以`Like`数百万条记录命名的表，还是`UserLike`为每个人创建一个表名以保存他的投票？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:15:49.883

不要按用户做表，这有点疯狂！

只要有这三个表：`User`，你应该没问题。`Post``Like`

# php - 检查当前日期是否大于上周一

> ID：16085125
> 
> 赞同：-6
> 
> 时间：2013-04-18T14:02:06.703
> 
> 标签：php, date

所以基本上我要找的是，我怎样才能显示从当前日期到星期日这周剩余的天数，而不是显示本周过去的天数？请指出正确的方向，我不知道从哪里开始......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:08:57.727

`date(w)`会给你一个天数（0代表星期日，6代表星期六）。[PHP文档](http://php.net/manual/en/function.date.php)

```
echo (7 - date("w")) ." days left before its sunday"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:09:49.780

[php date 函数](http://php.net/manual/en/function.date.php)可以返回星期几的数字表示。

```
$current_date = (int)date('w'); 
```

然后你可以遍历一个输出剩余天数的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:04:44.093

这是你在找什么？

```
if (time() < strtotime('last monday')){
  //...
} 
```

或者您可以将它们分开以获得日期延迟（经过多少天）

像下面这样

```
$delta = time() - strtotime('last monday'); 
```

现在你可以在几秒钟内得到尊重

和价值：

```
$number_of_days = (int)((time() - strtotime('last monday'))/(60 * 60 * 24)  ); 
```

今天是星期四，输出为 3 [星期二、星期三、星期四]

# validation - ASP.NET MVC - Preserving invalid DateTime selection with 3 dropdown lists

> ID：16085132
> 
> 赞同：4
> 
> 时间：2013-04-18T14:02:18.337
> 
> 标签：validation, datetime, asp.net-mvc-4, model-binding, modelbinders

I'm still fairly new to ASP.NET and MVC and despite days of googling and experimenting, I'm drawing a blank on the best way to solve this problem.

I wrote a BirthdayAttribute that I want to work similar to the EmailAddressAttribute. The birthday attribute sets the UI hint so that the birthday DateTime will be rendered using an editor template that has 3 dropdown lists. The attribute can also be used to set some additional meta data that tells the year dropdown how many years it should display.

I know I could use jQuery's date picker, but in the case of a birthday I find the 3 dropdowns much more usable.

```
@model DateTime
@using System;
@using System.Web.Mvc;
@{
    UInt16 numberOfVisibleYears = 100;
    if (ViewData.ModelMetadata.AdditionalValues.ContainsKey("NumberOfVisibleYears"))
    {
        numberOfVisibleYears = Convert.ToUInt16(ViewData.ModelMetadata.AdditionalValues["NumberOfVisibleYears"]);
    }
    var now = DateTime.Now;
    var years = Enumerable.Range(0, numberOfVisibleYears).Select(x => new SelectListItem { Value = (now.Year - x).ToString(), Text = (now.Year - x).ToString() });
    var months = Enumerable.Range(1, 12).Select(x => new SelectListItem{ Text = new DateTime( now.Year, x, 1).ToString("MMMM"), Value = x.ToString() });
    var days = Enumerable.Range(1, 31).Select(x => new SelectListItem { Value = x.ToString("00"), Text = x.ToString() });
}

@Html.DropDownList("Year", years, "<Year>") /
@Html.DropDownList("Month", months, "<Month>") /
@Html.DropDownList("Day", days, "<Day>") 
```

I also have a ModelBinder to rebuild my date afterwards. I've removed the content of my helper functions for brevity, but everything works great up to this point. Normal, valid dates, work just fine for creating or editing my members.

```
public class DateSelector_DropdownListBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        if (controllerContext == null)
            throw new ArgumentNullException("controllerContext");
        if (bindingContext == null)
            throw new ArgumentNullException("bindingContext");

        if (IsDropdownListBound(bindingContext))
        {
            int year    = GetData(bindingContext, "Year");
            int month   = GetData(bindingContext, "Month");
            int day     = GetData(bindingContext, "Day");

            DateTime result;
            if (!DateTime.TryParse(string.Format("{0}/{1}/{2}", year, month, day), out result))
            {
                //TODO: SOMETHING MORE USEFUL???
                bindingContext.ModelState.AddModelError("", string.Format("Not a valid date."));
            }

            return result;
        }
        else
        {
            return base.BindModel(controllerContext, bindingContext);
        }

    }

    private int GetData(ModelBindingContext bindingContext, string propertyName)
    {
        // parse the int using the correct value provider
    }

    private bool IsDropdownListBound(ModelBindingContext bindingContext)
    {
        //check model meta data UI hint for above editor template
    }
} 
```

Now that I'm looking at it, I should probably be using a nullable DateTime, but that's neither here nor there.

The problem I'm having is with very basic validation of invalid dates such as February 30th, or September 31st. The validation itself works great, but the invalid dates aren't ever saved and persisted when the form is reloaded.

What I'd like is to remember the invalid date of February 30th and redisplay it with the validation message instead of resetting the dropdowns to their default value. Other fields, like the email address (decorated with the EmailAddressAttribute) preserve invalid entries just fine out of the box.

At the moment I am just trying to get the server side validation working. To be honest, I haven't even started thinking about the client side validation yet.

I know there is lots I could do with javascript and ajax to make this problem a moot point, but I would still rather have the proper server side validation in place to fall back on.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:26:38.600

我终于设法解决了我的问题，所以我想分享我的解决方案。

免责声明：虽然我过去在 .NET 2.0 上表现出色，但我现在才将我的技能更新到最新版本的 C#、ASP.NET、MVC 和 Entity Framework。如果有更好的方法来做我在下面所做的任何事情，我总是愿意接受反馈。

去做：

*   对无效日期（例如 2 月 30 日）实施客户端验证。[Required] 属性的客户端验证已内置。

*   添加对文化的支持，以便日期以所需格式显示

当我意识到我遇到的问题是 DateTime 不允许使用无效的日期（例如 2 月 30 日）构建自身时，我找到了解决方案。它只是抛出一个异常。如果我的日期无法构建，我就无法将无效数据通过活页夹传递回 ViewModel。

为了解决这个问题，我不得不在我的视图模型中取消 DateTime 并用我自己的自定义 Date 类替换它。在禁用 Javascript 的情况下，以下解决方案将提供功能齐全的服务器端验证。在验证错误的情况下，无效的选择将在显示验证消息后持续存在，从而允许用户轻松修复他们的错误。

将这个视图式的 Date 类映射到日期模型中的 DateTime 应该很容易。

日期.cs

```
public class Date
{
    public Date() : this( System.DateTime.MinValue ) {}
    public Date(DateTime date)
    {
        Year = date.Year;
        Month = date.Month;
        Day = date.Day;
    }

    [Required]
    public int Year  { get; set; }

    [Required, Range(1, 12)]
    public int Month { get; set; }

    [Required, Range(1, 31)]
    public int Day   { get; set; }

    public DateTime? DateTime
    {
        get
        {
            DateTime date;
            if (!System.DateTime.TryParseExact(string.Format("{0}/{1}/{2}", Year, Month, Day), "yyyy/M/d", CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
                return null;
            else
                return date;
        }
    }
} 
```

这只是一个可以从 DateTime 构造的基本日期类。该类具有 Year、Month 和 Day 的属性以及 DateTime getter，假设您有一个有效的日期，它可以尝试为您检索 DateTime 类。否则返回null。

当内置的 DefaultModelBinder 将您的表单映射回此 Date 对象时，它将为您处理所需的和范围验证。但是，我们需要一个新的 ValidationAtribute 来确保不允许使用无效日期，例如 2 月 30 日。

日期验证属性.cs

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field, AllowMultiple = false, Inherited = true)]
public sealed class DateValidationAttribute : ValidationAttribute
{
    public DateValidationAttribute(string classKey, string resourceKey) :
        base(HttpContext.GetGlobalResourceObject(classKey, resourceKey).ToString()) { }

    public override bool IsValid(object value)
    {
        bool result = false;
        if (value == null)
            throw new ArgumentNullException("value");

        Date toValidate = value as Date;

        if (toValidate == null)
            throw new ArgumentException("value is an invalid or is an unexpected type");

        //DateTime returns null when date cannot be constructed
        if (toValidate.DateTime != null)
        {
            result = (toValidate.DateTime != DateTime.MinValue) && (toValidate.DateTime != DateTime.MaxValue);
        }

        return result;
    }
} 
```

这是一个 ValidationAttribute，您可以将其放在 Date 字段和属性上。如果您传入资源文件类和资源键，它将在“App_GlobalResources”文件夹中搜索相应的资源文件以查找错误消息。

在 IsValid 方法中，一旦我们确定我们正在验证一个 Date，我们就会检查它的 DateTime 属性，看看它是否不为 null 以确认它是有效的。我检查了 DateTime.MinValue 和 MaxValue 以获得良好的衡量标准。

就是这样。通过这个 Date 类，我设法完全取消了自定义 ModelBinder。该解决方案完全依赖于 DefaultModelBinder，这意味着所有验证都可以直接进行。它显然甚至检查了我非常兴奋的新 DateValidationAttribute。我一直强调我可能不得不在自定义活页夹中使用验证器。这感觉干净了很多。

这是我正在使用的部分视图的完整代码。

DateSelector_DropdownList.cshtml

```
@model Date
@{
    UInt16 numberOfVisibleYears = 100;
    if (ViewData.ModelMetadata.AdditionalValues.ContainsKey("NumberOfVisibleYears"))
    {
        numberOfVisibleYears = Convert.ToUInt16(ViewData.ModelMetadata.AdditionalValues["NumberOfVisibleYears"]);
    }
    var now = DateTime.Now;
    var years = Enumerable.Range(0, numberOfVisibleYears).Select(x => new SelectListItem { Value = (now.Year - x).ToString(), Text = (now.Year - x).ToString() });
    var months = Enumerable.Range(1, 12).Select(x => new SelectListItem { Text = new DateTime(now.Year, x, 1).ToString("MMMM"), Value = x.ToString() });
    var days = Enumerable.Range(1, 31).Select(x => new SelectListItem { Value = x.ToString(), Text = x.ToString() });
}

@Html.DropDownList("Year", years, "<Year>") /
@Html.DropDownList("Month", months, "<Month>") /
@Html.DropDownList("Day", days, "<Day>") 
```

我还将包括我用来设置模板提示的属性和要显示的可见年数。

```
[AttributeUsage(AttributeTargets.Property | AttributeTargets.Field, AllowMultiple = false)]
public sealed class DateSelector_DropdownListAttribute : DataTypeAttribute, IMetadataAware
{
    public DateSelector_DropdownListAttribute() : base(DataType.Date) { }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.AdditionalValues.Add("NumberOfVisibleYears", NumberOfVisibleYears);
        metadata.TemplateHint = TemplateHint;
    }

    public string TemplateHint { get; set; }
    public int NumberOfVisibleYears { get; set; }
} 
```

我认为解决方案比我预期的要干净得多。它以我希望的方式解决了我所有的问题。我确实希望我能够以某种方式保留 DateTime，但这是我可以弄清楚如何仅使用服务器端代码来维护无效选择的唯一方法。

你会做任何改进吗？

# android - 当数组在字符串 xml 中时搜索列表视图

> ID：16085133
> 
> 赞同：0
> 
> 时间：2013-04-18T14:02:20.367
> 
> 标签：android, xml, arrays, listview, search

我在搜索我的列表时遇到了问题。列表数组曾经附加到`String[]`实际的 .java 文件中，但我将数组移动到字符串 xml 文件中以实现在应用程序中使用不同语言的另一个功能。因此翻译列表视图

无论如何，我理解为什么代码会执行以下操作，但我不知道如何解决它......

```
Resources res = getResources();
final String[] items = res.getStringArray(R.array.societies_array);

listView2 = (ListView) findViewById(R.id.societieslist);
EditText inputSearch = (EditText) findViewById(R.id.inputSearch);

// Adding items to listview
adapter = new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, items);
inputSearch.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence cs, int arg1, int arg2,
            int arg3) {
        // When user changed the Text
        System.out.println(cs);
        SocietiesScreen.this.adapter.getFilter().filter(cs);
    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1,
            int arg2, int arg3) {
        // TODO Auto-generated method stub
    }

    @Override
    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

列表的 onclick 侦听器取决于列表的索引，因此当不搜索时它工作正常但是当我搜索特定选项时，新的“第一个选项”现在被分配一个新的索引号而不是保持它的原始

希望这是有道理的，我已经提供了足够的代码，如果您需要其他任何东西，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:50:12.903

我想我已经在这里回答了一个非常相似的[**问题**](https://stackoverflow.com/a/14002625/878126)。您还应该观看“ [**listView 的世界**](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”讲座。

基本上，如果您使用自定义 BaseAdapter，您可以为过滤的项目创建一个新模式，只要搜索字段中有内容，就会启用该模式。

启用此模式后，将从过滤列表中检索项目，而不是从原始列表中检索项目。

如果您不使用自己的 BaseAdapter，请查看[**此链接**](http://www.mokasocial.com/2010/07/arrayadapte-filtering-and-you/)。

# objective-c - 未初始化的外部 NSString 使用

> ID：16085136
> 
> 赞同：1
> 
> 时间：2013-04-18T14:02:23.970
> 
> 标签：objective-c, c, nsstring, extern

在以下课程中：

[MGTile菜单](https://github.com/mattgemmell/MGTileMenu)

各种 extern NSString 以下列方式定义以用作通知：

。H

```
extern NSString *MGTileMenuWillDisplayNotification; // menu will be shown 
```

.m

```
NSString *MGTileMenuWillDisplayNotification; 
```

它的用法如下：

```
[[NSNotificationCenter defaultCenter] postNotificationName:MGTileMenuWillDisplayNotification 
                                                    object:self 
                                                  userInfo:nil]; 
```

我的问题是：extern NSString MGTileMenuWillDisplayNotification 永远不会被初始化为任何值——但这段代码有效。我本来希望 .m 文件中的实现是：

```
NSString *MGTileMenuWillDisplayNotification = @"MGTileMenuWillDisplayNotification"; 
```

为什么这不是必需的，这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:19:43.847

这意味着实际变量是在程序的其他部分中定义的。可能在某个框架或库中。您甚至不必拥有相关来源。

该`extern`关键字告诉链接器在符号表中查找名为 的符号`MGTileMenuWillDisplayNotification`。（我认为这将是一个静态变量，但不确定它是否可以是别的东西。）

`NSString*`告诉编译器将指针指向的内存作为`NSString`对象。照常。只是它在其他地方声明，并且大多数可能在其他地方正确初始化。您有责任确保它确实是`NSString`框架/库的文档应该告诉您的对象。

# arrays - AS3 宾果游戏 - 有可能吗？

> ID：16085141
> 
> 赞同：0
> 
> 时间：2013-04-18T14:02:34.890
> 
> 标签：arrays, actionscript-3, loops, random

我完全不知所措。

我正在尝试生成随机的 Bingo 票，但我现在被卡住了。关键是，具有以下代码：

```
var startNum:Number = 1;
var endNum:Number = 90;
var rp:RandomPlus = new RandomPlus(endNum, startNum);

var variant_1:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_2:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_3:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_4:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_5:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

var variant_6:Array = new Array
                    (rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), rp.getNum(), 
                     "", "",  "", "",  "", "", "", "", "", "", "", "");

function shuffle(a, b):Number {
    var num:Number = Math.round(Math.random()*2)-2;
    return num;
}

var b:Array = variant_1.sort(shuffle);
var cnt:uint=0;
for (var i = 0; i<b.length/9; i++) {
    for (var j = 0; j<b.length/3; j++) {
        var grid1:box=new box();
        grid1.x=5+(grid1.width-1)*j;
        grid1.y=5+(grid1.height-1)*i;
        grid1.txt.text=b[cnt];
        addChild(grid1);
        cnt++;
    }
}

var c:Array = variant_2.sort(shuffle);
var cnt2:uint=0;
for (var k = 0; k<c.length/3; k++) {
    for (var l = 0; l<c.length/9; l++) {
        var grid2:box=new box();
        grid2.x=5+(grid2.width-1)*k;
        grid2.y=100+(grid2.height-1)*l;
        grid2.txt.text=c[cnt2];
        addChild(grid2);
        cnt2++;
    }
}

var d:Array = variant_3.sort(shuffle);
var cnt3:uint=0;
for (var m = 0; m<d.length/3; m++) {
    for (var n = 0; n<d.length/9; n++) {
        var grid3:box=new box();
        grid3.x=5+(grid3.width-1)*m;
        grid3.y=200+(grid3.height-1)*n;
        grid3.txt.text=d[cnt3];
        addChild(grid3);
        cnt3++;
    }
}

var e:Array = variant_4.sort(shuffle);
var cnt4:uint=0;
for (var o = 0; o<e.length/3; o++) {
    for (var p = 0; p<e.length/9; p++) {
        var grid4:box=new box();
        grid4.x=5+(grid4.width-1)*o;
        grid4.y=300+(grid4.height-1)*p;
        grid4.txt.text=e[cnt4];
        addChild(grid4);
        cnt4++;
    }
}

var f:Array = variant_5.sort(shuffle);
var cnt5:uint=0;
for (var q = 0; q<f.length/3; q++) {
    for (var r = 0; r<f.length/9; r++) {
        var grid5:box=new box();
        grid5.x=5+(grid5.width-1)*q;
        grid5.y=400+(grid5.height-1)*r;
        grid5.txt.text=f[cnt5];
        addChild(grid5);
        cnt5++;
    }
}

var g:Array = variant_6.sort(shuffle);
var cnt6:uint=0;
for (var s = 0; s<g.length/3; s++) {
    for (var t = 0; t<g.length/9; t++) {
        var grid6:box=new box();
        grid6.x=5+(grid6.width-1)*s;
        grid6.y=500+(grid6.height-1)*t;
        grid6.txt.text=g[cnt6];
        addChild(grid6);
        cnt6++;
    }
} 
```

哪个输出：

![答对了](https://i.stack.imgur.com/zi1E5.jpg) 如您所见，我将 162 个单元格划分为 9x3 表。每个表包含 15 个数字和 12 个空格。所有数字都在 1-90 之间，不重复。数字的位置是随机的。

真正的问题是我必须遵守一些规则：

*   每个表中的数字之和相等。
*   有9列，必须这样排列：第一列1-9，第二列10-19，第三列20-29，...，第九列80-90。
*   每行有 4 个空格。

现在怎么办？这似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:28:10.363

你真的应该改进你的代码。您不需要每个变体的变量，您可以使用二维数组来做到这一点。像这样的东西：

```
var tables:Array = new Array();

for(var i:uint = 0; i <= 6; 6++){
    tables[i] = fillTable();
    drawTables(tables);
}

...

function fillTable():Array{
    var emptySpaces:Array = new Array();
    var tableData:Array   = new Array();
    emptySpaces = getRandomElements(); //this function should return an array which will represent all 12 empty spaces, otherwise, 12 numbers between 0 and 26

   for (var i = 0; i <= 27; i++) {
       if(emptySpaces.indexOf(i) < 0){ // if my current i isn't a empty space I give it a value
           tableData[i] = generateRandomBasedOnIndex(i);
       }
   }
}

function generateRandomBasedOnIndex(i):uint{
    var maxInt = (i+1) * 10 - 1;
    var minInt = Math.abs(maxInt + 1 - 9);

    return new RandomPlus(maxInt, minInt).getNum();
}

function getRandomElements():Array{
    // TODO - homework :)
}

function drawTables(tableData:Array):void{
    // just use tableData array to place yours display objects on Stage
} 
```

为什么你需要所有数字的总和在表格上相等？这是规矩？我认为这不会发生在现实生活中的宾果游戏中。

Ps.：我这里没有任何 ActionScript 编辑器，所以你可能会发现一些语法错误，但是仔细看看这些行，我认为逻辑应该可以正常工作。

# android - Facebook 的分享对话框在 Android 上出现葡萄牙语标签

> ID：16085145
> 
> 赞同：1
> 
> 时间：2013-04-18T14:02:48.603
> 
> 标签：android, facebook

我又来这里再次询问有关 Android 版 Facebook SDK 的问题。在我的应用程序中，用户可以登录并在他的帐户上分享一些内容。好的，直到这里，现在的问题是共享对话框。

登录后，此对话框打开，但我的应用程序在葡萄牙语中的显示方式为“Compartilhar”，因此，这个词更大，按钮被对话框剪切，英文标签不会发生这种情况分享。我也意识到对话框的标签会根据设备的语言而变化（为什么我发现英文标签 Share 显示正常），有没有办法为此定义默认语言？我的默认应用语言已经是葡萄牙语。

另外，我想知道是否有办法更改该按钮的标签，或者其他什么，因为我已经尝试增加对话框的宽度并且没有工作。我正在使用适用于 Android v3.0 的 Facebook SDK

提前致谢。

# renderscript - RenderScript 是否支持递归？

> ID：16085146
> 
> 赞同：5
> 
> 时间：2013-04-18T14:02:51.693
> 
> 标签：renderscript

[OpenCL 不支持递归](https://stackoverflow.com/questions/10050708/why-doesnt-opencl-support-recursion)。[CUDA 可以，但仅限于某个版本](https://stackoverflow.com/questions/3644809/does-cuda-support-recursion)。初始搜索表明 RenderScript*确实*支持递归，但我找不到任何明确的内容。

RenderScript 是否支持递归函数调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T15:50:46.770

是的，它确实。但是，使用它会将脚本限制为能够递归的处理器。

# asp.net - 如何将字符串值传递给需要十进制值的存储过程

> ID：16085147
> 
> 赞同：1
> 
> 时间：2013-04-18T14:02:56.443
> 
> 标签：asp.net, stored-procedures, parameters, sqldatasource

我有这个问题，我不知道如何解决：

- 在 .aspx 页面中，SqlDataSource 调用存储过程 -i 在代码隐藏中传递参数 -i 必须传递字符串值，但存储过程中的参数是十进制 - 运行时出现转换错误，怎么办？

```
//code behind
Parameter prm_price = new Parameter("cc_price", DbType.Decimal, newValues["PRICE"].ToString());

sqlDataSource.InsertParameters.Add(prm_price); 
```

-

```
//stored procedure
@cc_prezzo decimal(15,3), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:35:26.860

那么你只需要在发送之前转换字符串。如果它是小数，您可以在发送之前将其转换为浮点数，当您收到它时，您只需将其重新转换为字符串。

我不知道您使用的是哪种语言，但您可以做类似的事情

```
sqlDataSource.InsertParameters.Add(Float.Parse(prm_price)); 
```

# python - 地理区域中的 Facebook Graph Api 签到

> ID：16085149
> 
> 赞同：1
> 
> 时间：2013-04-18T14:03:01.460
> 
> 标签：python, facebook-graph-api

好吧，我想使用 facebook 的图形 api 使用 python 从特定地理位置获取签到。

在 api 文档区域中，我没有找到正确的 api 参数组合来完成它；

```
 http://developers.facebook.com/docs/reference/api/checkin/ 
```

例如，如果我想在哈佛广场（波士顿）的咖啡店进行所有签到，那么 api 调用会是什么？（无需指定该位置的每家咖啡店）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:41:05.363

您可以通过以下方式搜索咖啡店：

[https://graph.facebook.com/search?q=coffee&type=place](https://graph.facebook.com/search?q=coffee&type=place)。

然后，您可以通过添加中心参数（带有纬度和经度）和可选的距离参数将搜索范围缩小到特定位置和距离：

[https://graph.facebook.com/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000)

Facebook[在这里](https://developers.facebook.com/docs/reference/api/search/)记录了这一点。

# python - Python 排列作为列表理解

> ID：16085152
> 
> 赞同：2
> 
> 时间：2013-04-18T14:03:10.323
> 
> 标签：python, list, permutation, list-comprehension

我有一个字符串列表和一个排列。我正在尝试将排列应用于列表，但我正在尝试保持我的代码简洁明了。目前我有一个可行的解决方案，它看起来像这样：

```
mylist = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']
permutation = [5,2,6,3,7,9,1,4,8]

mynewlist = ['']*9
for i in range(9):
    mynewlist[permutation[i]-1] = mylist[i]

print mynewlist 
```

我不喜欢它的是我必须先将列表初始化为一个空列表，然后以一种奇怪的方式循环它。我只是想知道是否有人可以想出一种更简洁的方式来写这个，也许使用列表理解？还是通过应用地图？

仅供参考 - 上述结果是：

```
['g', 'b', 'd', 'h', 'a', 'c', 'e', 'i', 'f'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:18:31.773

您的算法，但更清洁：

```
mynewlist = mylist[:]
for pos, elem in zip(permutation, mylist):
    mynewlist[pos - 1] = elem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:05:58.437

你*可以*使用`sorted()`：

```
sorted(mylist, key=lambda v, i=iter(permutation): next(i)) 
```

这输出：

```
>>> sorted(mylist, key=lambda v, i=iter(permutation): next(i))
['g', 'b', 'd', 'h', 'a', 'c', 'e', 'i', 'f'] 
```

这`mylist`根据从`permutation`列表中获取的索引对输入进行排序；该`key`函数在排序之前按顺序为输入序列中的每个元素调用一次。

不过，这并不能与您的版本相比；你有一个 O(n) 算法，这需要 O(n lg n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:28:53.363

只是一个疯狂的想法，但如何...

```
>>> mylist = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']
>>> permutation = [5,2,6,3,7,9,1,4,8]
>>> {permutation[i]: v for i, v in enumerate(mylist)}.values()
['g', 'b', 'd', 'h', 'a', 'c', 'e', 'i', 'f'] 
```

...利用字典按散列值排序的事实，整数散列到它们自己的值。

我认为这是一个 O(n) 算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:41:51.600

这是我的尝试：

```
mynewlist = [list_item for p, list_item in sorted(zip(permutation, mylist))] 
```

结果是：

```
['g', 'b', 'd', 'h', 'a', 'c', 'e', 'i', 'f'] 
```

### 讨论

让我们从右边开始。该`zip()`函数将两个列表耦合在一起：

```
>>> zip(permutation, mylist)
[(5, 'a'), (2, 'b'), (6, 'c'), (3, 'd'), (7, 'e'), (9, 'f'), (1, 'g'), (4, 'h'), (8, 'i')] 
```

然后我们可以对`zip()`函数的结果进行排序，这将产生一个按排列索引排序的元组列表：

```
>>> sorted(zip(permutation, mylist))
[(1, 'g'), (2, 'b'), (3, 'd'), (4, 'h'), (5, 'a'), (6, 'c'), (7, 'e'), (8, 'i'), (9, 'f')] 
```

这几乎就是我们想要的：字符是有序的。下一步是消除排列索引，只留下字符。这就是我上面提出的最终形式。

# java - 关于如何计算验证“if”条件的元素数量的任何想法？

> ID：16085154
> 
> 赞同：7
> 
> 时间：2013-04-18T14:03:21.327
> 
> 标签：java

```
private static int chain(int n){
        int count = 0;
        while(n > 1){
            if(n % 2 == 0){
                count++; //the value is not stored
                return chain(n/2);
            }
            count++; //same thing
            return chain(3*n+1);
        }
        return count; //prints the initial value (0)
    }
} 
```

我需要打印链方法再次发生的次数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T14:10:14.593

How about this:

```
public static int chain(int n) {
    return chain(n, 0);
}

private static int chain(int n, int count) {
    if (n > 1) {  // no need for a while-loop, it will never get past 1 iteration
        if (n % 2 == 0) {
            return chain(n / 2, count + 1);
        }
        return chain(3 * n + 1, count + 1);
    }
    return count;
} 
```

To me, this seems cleaner than declaring a static field outside of the method, primarily because I wouldn't want to worry about having to reset the static field to 0 every time I call `chain`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T14:05:03.493

我真的不明白你在问什么。但是如果你想让 count 存在于方法之外，而不是每次调用方法时都创建一个本地副本，你可以将其设为静态。

```
static int count=0; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T14:13:36.063

从您的方法中删除`count`变量，并使其成为您的类的静态成员。并且为了防止重复 yourlsef（DRY 原则），您应该`count`在方法顶部增加变量。

```
private static int count = 0;

private static int chain(int n) {
    count++;

    while(n > 1) {
        if(n % 2 == 0) {
            return chain(n/2);
        }

        return chain(3*n+1);
    }

return count;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T14:22:33.470

这似乎也有效，并且不使用那个丑陋的额外参数。

我已经稍微调整了算法（`chain(3 * n + 1)`加入了`else`一部分），假设这实际上是在尝试测量[Collat​​z 猜想的冰雹序列的](http://en.wikipedia.org/wiki/Hailstone_sequence)长度。正如最初所说，它只会堆栈溢出。

`111`这段代码在通过时确实会产生`27`。

```
private static int recursiveChain(int n) {
  if (n > 1) {
    if (n % 2 == 0) {
      return 1 + recursiveChain(n / 2);
    } else {
      return 1 + recursiveChain(3 * n + 1);
    }
  } else {
    return 0;
  }
} 
```

迭代版本看起来与原始问题惊人地相似：

```
private static int iterativeChain(int n) {
  int count = 0;
  while (n > 1) {
    count += 1;
    if (n % 2 == 0) {
      n = n / 2;
    } else {
      n = 3 * n + 1;
    }
  }
  return count;
} 
```

# iphone - UILabel 超出应用程序框架

> ID：16085159
> 
> 赞同：0
> 
> 时间：2013-04-18T14:03:28.730
> 
> 标签：iphone, ios, xcode, uiscrollview, uilabel

**我的标签超出了应用程序框架：**

![在此处输入图像描述](https://i.stack.imgur.com/AVE5O.png)

**只有当我滚动时，我才能看到其余部分：**

![在此处输入图像描述](https://i.stack.imgur.com/tRMbw.png)

```
 [_scroller setScrollEnabled:YES];
    [_scroller setContentSize:CGSizeMake(320, 600)];

    self.description = [_description stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    [self positionLabel:self.lblTitle withText:self.stitle withY:10];
    [self positionLabel:self.lblPubDate withText:self.pubDate withY:CGRectGetMaxY(self.lblTitle.frame)+10 ];
    [self positionLabel:self.lblDescription withText:self.description withY:CGRectGetMaxY(self.lblPubDate.frame)+10 ];

}

-(void)positionLabel:(UILabel*)lbl withText:(NSString*)text withY:(CGFloat)Y
{
    lbl.textAlignment = UITextAlignmentRight;
    lbl.text = text;
    lbl.numberOfLines = 0;
    lbl.lineBreakMode = NSLineBreakByWordWrapping;
    CGSize size = [self calculateSize:lbl];
    //FIXED
    [lbl setFrame:CGRectMake(10 , Y , (size.width>300)?size.width:300 , size.height)];
    [_scroller addSubview:lbl];
}

-(CGSize)calculateSize:(UILabel*)lbl
{
    CGSize size = [lbl.text sizeWithFont:lbl.font
                       constrainedToSize:CGSizeMake(280, MAXFLOAT)
                           lineBreakMode:UILineBreakModeWordWrap];
    return size;
} 
```

什么会导致这个问题？xib中的标签可能相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:06:25.473

您没有`y co-ordinate`正确设置滚动视图，因此只需设置正确的滚动视图框架。

将您的滚动视图添加为子视图后，只需设置其框架。

```
CGRect frame = yourScollView.frame;

frame.origin.y= frame.origin.y + 49; //49 is your navigationBar height.

[yourScollView setFrame:yourScollView.frame]; 
```

# matlab - 在循环中保留值

> ID：16085160
> 
> 赞同：0
> 
> 时间：2013-04-18T14:03:31.830
> 
> 标签：matlab, loops, freemat

有人可以帮我修改一下，以便每次循环重复时都存储“c”和“v”的每个值。

```
c(1)=0;

v = 1;

timestep = 0.1;

    while c<50

        v = c*5;

        c = c+1;
    end

plot(timestep*(1:length(v)),v) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:16:49.510

好吧，有矢量化版本：

```
c = 0:50;
v = 5*c; 

timestep = 0.1;

plot(timestep*(1:length(v)), v) 
```

和循环版本：

```
c = zeros(51,1);
v = zeros(51,1);

timestep = 0.1;

for ii = 1:51
   c(ii) = ii;
   v(ii) = 5*c(ii);
end

plot(timestep*(1:length(v)),v) 
```

Matlab 非常适合在这种情况下使用第一个解决方案，因此我建议您使用矢量化版本。

# siteminder - Siteminder 绕过特定 IP 地址的身份验证

> ID：16085161
> 
> 赞同：1
> 
> 时间：2013-04-18T14:03:36.580
> 
> 标签：siteminder

我有一个受站点管理员保护的资源/网址。我想允许来自特定 IP 地址范围的任何人访问 url。

如果浏览器来自特定的 IP 地址范围，我不希望他们进行身份验证，他们需要在不提示登录的情况下查看 url。

siteminder 中是否有办法允许对特定 IP 地址范围进行开放访问，但要求该范围之外的任何人登录？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T02:33:07.320

这在安全方面可能是个坏主意，因为 IP 地址可能会被欺骗，从而使您的应用程序完全打开。如果您仍想继续，我会考虑使用负载均衡器/代理将请求转发给具有单独配置的另一个代理。

# sql - 在 Oracle 中计算移动平均值并显示周期

> ID：16085164
> 
> 赞同：0
> 
> 时间：2013-04-18T14:03:45.143
> 
> 标签：sql, oracle

我正在尝试在 Oracle SQL 中计算 10 个周期的移动平均值，但似乎无法正确计算。

我的查询如下：

```
SELECT
          BSM_ID
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-10/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD1"
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-9/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD2"
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-8/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD3"
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-7/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD4"           
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-6/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD5"           
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-5/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD6"            
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-4/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD7"            
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-3/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD8"    
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-2/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD9"            
          ,CASE
                WHEN D_DTM = (SELECT MAX(D_DTM)-1/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END AS "PERIOD10"            
          ,AVG(
                CASE
                WHEN D_DTM BETWEEN (SELECT MAX(D_DTM)-1/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) AND (SELECT MAX(D_DTM)-10/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                END
              ) AS "10 PERIOD AVG" 

    FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI
    where D_DTM >= (SELECT MAX(D_DTM)-10/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 

    GROUP BY
          BSM_ID
    order by BSM_ID desc 
```

但不断收到“不是单组组功能”错误。我要做的是按列显示 10 个周期中每个周期的百分比，然后将第 11 列作为 AVG。我记得在 SQL 中做过类似的事情，但我无法在 PLSQL 中获得语法

在 SQL Server 中，我能够这样做以达到相同的结果：

```
 SELECT         carrier,
             dIVISION,
             LOcATION,
             servicetype
             ,max(@maxwk-1) as ops_week_id
             ,max(case when ops_week_id = @maxwk-2 then (OT * 100.00) / ts else null end)
               as [%_wk_1 ] 
             ,max(case when ops_week_id = @maxwk-3 then (OT * 100.00) / ts else null end)
               as [%_wk_2 ]   
             ,max(case when ops_week_id = @maxwk-4 then (OT * 100.00) / ts else null end)
               as [%_wk_3 ]
             ,max(case when ops_week_id = @maxwk-5 then (OT * 100.00) / ts else null end)
               as [%_wk_4 ]
             ,avg(case when ops_week_id Between @maxwk-5 and @maxwk - 2  then (OT * 100.00) / ts else null end)
               as [4_wk_SMA]
             ,avg(case when ops_week_id Between @maxwk-5 and @maxwk - 2  then (OT * 100.00) / ts else null end)
               - 0.15 as [LwrBand]            
             ,avg(case when ops_week_id Between @maxwk-5 and @maxwk - 2  then (OT * 100.00) / ts else null end)
               + 0.15 as [UprBand]  
             ,max(case when ops_week_id = @maxwk-1 then (OT * 100.00) / ts else null end)
               as [Ops_wk_id_av] 
         FROM la

       GROUP BY la.DIVISION,la.LOCATION,la.servicetype,la.carrier 
```

原始表结构如下所示：

```
 D_DTM (datetime)
     F_ID
     REG_DTM
     MRKT_ID
     MRKT_NM
     CL_ID
     CL_NM
     BSM_ID
     BSM_NM
     BSC_SEQ_ID
     CSCD_ID
     CSCD_NM
     BTS_ID
     V_ATT_CNT (denominator)
     V_MBL_ORG_CNT
     V_MBL_TER_CNT
     V_SILENT_RETRY_CNT
     V_CUST_BLK_CNT (numerator) 
```

我想要做的是获取过去 10 小时的百分比 (V_CUST_BLK_CNT/V_ATT_CNT)，然后通过 BSM_ID 对它们进行平均。因此，生成的查询具有这样的结构

BSM_ID | 期间1% | 期间2% | 期间3% | 等等... | 平均百分比

我觉得我应该能够使用 case whens 来执行此操作，但似乎无法让 group by 和语法工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:14:21.160

您收到错误是因为您按 分组`bsm_id`，但引用了许多其他没有聚合函数的列。

如果您使用的是 Oracle，则使用移动平均线的内置函数。这些是带有`range`关键字的分析函数，例如：

```
select bsm.*,
       (sum(V_CUST_BLK_CNT) over (partition by bsm_id order by d_dtm range between 10 preceding and current row) /
       (sum(V_CUST_ATT_CNT) over (partition by bsm_id order by d_dtm range between 10 preceding and current row))
from bsm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:57:13.793

好的，所以我让我的查询像这样工作：

```
SELECT 
    BSM_ID
    ,MAX(PERIOD1) AS "PERIOD1"
    ,MAX(PERIOD2) AS "PERIOD2"
    ,MAX(PERIOD3) AS "PERIOD3"
    ,MAX(PERIOD4) AS "PERIOD4"
    ,MAX(PERIOD5) AS "PERIOD5"
    ,MAX(PERIOD6) AS "PERIOD6"
    ,MAX(PERIOD7) AS "PERIOD7"
    ,MAX(PERIOD8) AS "PERIOD8"
    ,MAX(PERIOD9) AS "PERIOD9"
    ,MAX(PERIOD10) AS "PERIOD10"
    ,(MAX(PERIOD1)+MAX(PERIOD2)+MAX(PERIOD3)+MAX(PERIOD4)+MAX(PERIOD5)+MAX(PERIOD6)+MAX(PERIOD7)+MAX(PERIOD8)+MAX(PERIOD9)+MAX(PERIOD10))/10 AS "AVG"

    FROM
           (

            SELECT
                  BSM_ID
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-10/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                        END AS "PERIOD1"
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-9/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                        END AS "PERIOD2"
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-8/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END)
                        END AS "PERIOD3"
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-7/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END)
                        END AS "PERIOD4"           
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-6/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END)
                        END AS "PERIOD5"           
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-5/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                        END AS "PERIOD6"            
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-4/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                        END AS "PERIOD7"            
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-3/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                        END AS "PERIOD8"    
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-2/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                        END AS "PERIOD9"            
                  ,CASE
                        WHEN D_DTM = (SELECT MAX(D_DTM)-1/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI) 
                        THEN (CASE WHEN sum(V_ATT_CNT) = 0 THEN NULL ELSE sum(V_CUST_BLK_CNT)/sum(V_ATT_CNT) END) 
                        END AS "PERIOD10"            

            FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI

            WHERE D_DTM >=(SELECT MAX(D_DTM)-10/24 FROM DMSN.DS3R_FH_1XRTT_BTS_LVL_KPI)

            GROUP BY BSM_ID, D_DTM

            )
    GROUP BY
    BSM_ID 
```

我确信有一种更有效的方法可以做到这一点，但这很有效。

# javascript - JavaScript 日期格式规范化

> ID：16085165
> 
> 赞同：2
> 
> 时间：2013-04-18T14:03:45.640
> 
> 标签：javascript, jquery, html, mobile, jquery-validate

我正在为移动设备创建一个 HTML 5 表单。我正在使用 jquery-validate 来验证我的表单。我的问题与不同手机上的日期选择器有关。它们存储的日期格式不一致。如何检测它们存储的格式？一旦我可以检测到它，我就可以在发布到后端之前将其标准化为某种格式。

例如，iPhone 执行 yyyy-mm-dd，而三星 S3 执行 mm/dd/yyyy。当您认为有些人会在 2012 年 5 月 12 日或 12 月 5 日制作 05/12/2012 时，问题会变得非常有趣。这可能需要进行语言环境检测。希望那里已经有一个图书馆可以为我处理这个问题。

# php - 使用 CodeIgniter 的 Ajax 内容区域？

> ID：16085166
> 
> 赞同：0
> 
> 时间：2013-04-18T14:03:46.140
> 
> 标签：php, codeigniter, jquery

最近开始使用 CodeIgniter 重新开发应用程序，我正在尝试将我的模板实现到系统中。

我面临一个我还看不到解决方法的问题

基本上，在控制器内，我正在做的一个例子是：

```
 /*
     * Load view for header
     */
    $this->load->view('header_view');

    /*
     * Load view for navigation
     */
    $this->load->view('navigation_view');

    /*
     * Load view for content
     */
    $this->load->view('content_view');

    /*
     * Load view for footer
     */
    $this->load->view('footer_view'); 
```

但是我面临的问题是内容区域有页面动态加载到其中。

因此，导航区域链接不会打开 HREF URL，而是通过 ajax 将该页面数据加载到内容 div 中。

我需要能够通过诸如“ [http://www.website.co.uk/controller/method_name/parameters](http://www.website.co.uk/controller/method_name/parameters) ”之类的 URL 直接访问我的控制器，这在当时是可以的。

然而，导航会将链接加载到内容区域，其中还包括页眉/导航/页脚，所以我最终在内容区域中使用嵌套布局......

解决它的简单方法是“不要在每个页面中包含页眉/导航/页脚视图”但是您不能直接转到上面的 URL，它只有在加载到内容区域时才有效它需要有页眉、导航和页脚。

我理想需要的解决方案是始终在任何控制器周围加载页眉/导航/页脚，这样如果我通过 URL 转到控制器/方法，我就不必在控制器中加载页眉/导航/页脚但是它会自动加载在它周围。

任何想法表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:18:52.973

为什么不用 MY_Controller 扩展 CI 控制器，那么你所有的控制器都会扩展 MY_Controller。在 my_Controller 中具有如下功能：

```
public function loadView($file, $data=array()){
    $this->load->view('header', $data);
    $this->load->view($file, $data);
    $this->load->view('footer', $data);
} 
```

然后，从您的控制器操作中，只需调用它：

```
public function index(){
    // code code code
    $this->loadView('welcome', array('message'=>'Hello!')); 
} 
```

我认为你说对了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:24:20.203

在 ajax 中，您可以使用如下视图：

```
<div id="header"></div>
<div> //here all your stuffs</div>
</div id="footer"></div> 
```

然后只是：

```
<script>
$(function(){
$('#footer').load('my_footer_view_url');
$('#header').load('my_header_view_url');
});
</script> 
```

这是一个糟糕的示例，您可以同时定义 a`php method which serves the views`和 a `js method which loads them into divs`，因此每个视图必须只有一个`<div>`加载部分的位置

**重要的**

如果你可以使用 Ajax，这个解决方案很棒，因为一旦你将 #footer div 移动到视图中的其他位置，你就会移动整个页脚视图，例如，php 无论如何都会更加静态，但这取决于，我很难过，如果你可以或不使用 ajax ;)

# javascript - 在加载更多用户之前滚动未到达页面末尾

> ID：16085174
> 
> 赞同：2
> 
> 时间：2013-04-18T14:04:04.243
> 
> 标签：javascript, jquery

我在页面上向下滚动时正在加载信息。但目前，当我开始滚动时，正在下载更多信息以显示。有没有办法让滚动到达页面末尾显示一条快速消息，持续 2 秒“加载更多图像”，然后显示下一批。

```
 function updateStatus() {

// Load more users on Scroll
$('#main').scroll(function () {
    if ($('#main').scrollTop() >= $(document).height() - $('#main').height()) {
        $('#status').text('Loading more items...');
        $('#users').append(Next());
    }
    setTimeout('updateStatus();', 1500);
});
} 
```

**建议的答案更新后**

```
function updateStatus() {
        $('#users').append(Next());
    }

    // Load more users on Scroll
    $(document).ready(function(){
        $('#main').scroll(function () {
            if ($('#main').scrollTop() >= ($(document).height() - $('#main').height())) {
                $('#status').text('Loading more items...');
            }

        });
        setTimeout(updateStatus, 2500);
    }); 
```

使用当前编辑，当我滚动到页面底部时，它会加载接下来的 20 个用户，但随后再次到达页面末尾，它不再加载。但是当我把`setTimeout(updateStatus, 2500)`它放在里面时，`$('#main').scroll...`当我滚动而没有到达页面底部时，数据会在到达页面末尾之前一直加载和加载。

* * *

```
Next = function () {
    var _page = $.views.Roster.ViewModel.CurrentPage() + 1;
    $.views.Roster.GetPage("/api/Roster", 9, _page);
};

$.views.Roster.GetPage = function (url, id, pageNumber) {
        $.grain.Ajax.Get({
            Url: url,
            DataToSubmit: { pageNumber: pageNumber, id: id },
            DataType: "json",
            OnSuccess: function (data, status, jqXHR) {
                $.views.Roster.RosterViewModel.AddUsers(data);
                $.views.Roster.ViewModel.CurrentPage(pageNumber);
            }
        });
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:44:56.920

经过大量研究和用户对这篇文章的有用答案建议，这就是我想出的，它最终按我想要的方式工作：

```
 $(document).ready(function () {
    $('#main').scroll(function () {
        var div = $(this);
        if (div[0].scrollHeight - div.scrollTop() == div.height()) {
            Next();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:06:56.637

**

> 更新程序

**

```
<script type="text/javascript">
$(document).ready( 
    function(){
    $(window).scroll(
    function(){
        if($(window).scrollTop()== $(document).height()-$(window).height()) //End of Page
        {
            $("#status").html(function(n){// For Loading
                    setTimeout(function(){
                    $("#wrapper").append(function(n){// Add the users here
                        $("#status").html("");

                            return "<p><br/><br/><br/>Added</p>";
                        });
                }, 2000);
                return "<p>Loading...</p>";
                });

        }
    });
});
</script>
</head>

<body>
    <div id="main">

<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><b

r/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/

><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
Hello

        <div id="wrapper"></div>
        <div id="status"></div>
    </div>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:24:27.957

也许你正在寻找这样的东西？（未经测试的代码）

```
function updateStatus() {
    $('#status').text('');
    $('#users').append(Next());
}

// Load more users on Scroll
$('#main').scroll(function () {
    if ($('#main').scrollTop() >= $(document).height() - $('#main').height()) {
        $('#status').text('Loading more items...');
        setTimeout(updateStatus, 1500);
    }

}); 
```

# python - Django Tastypie 添加 Content-Length 标头

> ID：16085185
> 
> 赞同：1
> 
> 时间：2013-04-18T14:04:33.067
> 
> 标签：python, django, rest, httpresponse, tastypie

我是 Django 开发的新手。我有一个资源和模型：

**模型**

```
class Player(models.Model):
    pseudo = models.CharField(max_length=32, unique=True) 
```

**模型资源**

```
class PlayerResource(ModelResource):
    class Meta:
        queryset = Player.objects.all()
        resource_name = 'player'
        authentication = BasicAuthentication()
        authorization = Authorization()
        serializer = Serializer(formats=['xml'])
        filtering = {
            'pseudo': ALL,
        } 
```

我用 /api/v1/player/?format=xml 请求所有播放器，但似乎缺少响应标头： Content-Length 导致我的应用程序出现一些问题。如何将其添加到响应标头中？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:47:45.753

缺少 Content-Length 是由于缺少中间件。
更多信息：看这里：[如何获取 Django 响应对象的内容长度？](https://stackoverflow.com/questions/5554952/how-do-i-get-the-content-length-of-a-django-response-object)

但是您可以像这样手动添加 Content-Length ：

```
def create_response(self, request, data, response_class=HttpResponse, **response_kwargs):
        desired_format = self.determine_format(request)
        serialized = self.serialize(request, data, desired_format)
        response = response_class(content=serialized, content_type=build_content_type(desired_format), **response_kwargs)
        response['Content-Length'] = len(response.content)
        return response 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T23:59:28.767

您可以通过覆盖您自己的资源中的 create_reponse 方法来添加 Content-Length 标头，例如：

```
class MyResource(ModelResource):
   class Meta:
        queryset=MyModel.objects.all()

   def create_response(self, ...)
      # Here goes regular code that do the method from tastypie
      return response_class(content=serialized, content_type=build_content_type(desired_format), Content-Length=value,  **response_kwargs) 
```

# json - 服务堆栈 Json 响应包含额外字符

> ID：16085187
> 
> 赞同：1
> 
> 时间：2013-04-18T14:04:37.117
> 
> 标签：json, web-services, servicestack

我正在将 Web Api 项目转换为服务堆栈，并且在 json 响应中，我在 json 内容之前和之后得到了额外的文本行。我正在使用提琴手来捕获响应。

为简洁起见，以下是一个示例：

```
18d
[{"id":  ...  }]
0 
```

这些线是什么？我找不到任何似乎可以防止这种情况发生的配置选项。

# 编辑

我返回并从基本的 hello 服务堆栈示例开始，这是我得到的响应：

```
HTTP/1.1 200 OK
Transfer-Encoding: chunked
Content-Type: application/json; charset=utf-8
Server: Microsoft-HTTPAPI/1.0
X-Powered-By: ServiceStack/3.943 Win32NT/.NET
Date: Thu, 18 Apr 2013 15:48:49 GMT

1b
{"Result":"Hello, JRandom"}
0 
```

我假设额外的响应行是`Transfer-Encoding: chunked`标题的结果。

# cakephp - CakePHP 保存 hasOne 数据：约束错误

> ID：16085192
> 
> 赞同：0
> 
> 时间：2013-04-18T14:04:50.490
> 
> 标签：cakephp

嘿，我是 CakePHP 的新手，我想知道为什么我的代码不起作用：

```
$data['Gender'] = array(
    'bezeichnung'   => $item['person']['GENDER']
);
$data['Client'] = array(
    'id'        => $item['person']['PERSON_ID'],
    'vorname'   => $item['person']['FIRSTNAME'],
    'nachname'  => $item['person']['LASTNAME'],
    'gender_id' => $this->Client->Gender->id
);

$this->Client->create();
$this->Client->saveAll($data); 
```

我想使用 saveAll 命令在我的数据库中创建一个新条目，其中 $data 保存所有相关数据。

我得到的错误如下： SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败

我的客户模型：

```
public $hasOne = array(
    'Gender' => array(
        'className' => 'Gender',
        'foreignKey' => 'gender_id'
    )
); 
```

我的性别模型：

```
public $tablePrefix = 'fixed_';
public $validate = array(
    'bezeichnung' => 'isUnique'
); 
```

# web-services - 以 JSONP 格式提供免费数据的 Web 服务

> ID：16085195
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:04:59.633
> 
> 标签：web-services, jsonp, mashup

例如，Google 从以下 URL 以 JSONP 格式提供英语单词的字典定义：

[http://www.google.com/dictionary/json?callback=a&sl=en&tl=en&restrict=pr,de&client=te&q=internet](http://www.google.com/dictionary/json?callback=a&sl=en&tl=en&restrict=pr,de&client=te&q=internet)

您是否知道 Internet 上其他有趣的免费信息的 JSONP 来源，它们可能对创建混搭 Web 有用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:31:34.523

查看 Programmableweb 的 API 目录

[https://www.programmableweb.com/apis/directory](https://www.programmableweb.com/apis/directory)

我相信他们正在努力成为 API 的 Git Hub。他们的注册表中有超过 13,000 个 API。

应该很容易找到混搭的来源。=)

# javascript - 将 CSS 类应用于 JavaScript 变量？

> ID：16085196
> 
> 赞同：-3
> 
> 时间：2013-04-18T14:05:00.127
> 
> 标签：javascript, html, css

有谁知道如何将 CSS 类应用于 JavaScript 变量？

我有两个变量：

```
var usr = 'You: ' + userinput;
var rpl = 'Chatbot: ' + chatbot.transform(userinput); 
```

usr 变量用于人工输入系统，而 rpl 变量触发来自数据库的响应。

我需要为每个变量应用不同的 CSS 类。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:14:09.883

您不能将 CSS 类分配给 javascript 变量。

如果您使用的是 HTML，那么您可以使用 javascript/jquery 将您的值插入到已经设置为类的 HTML 元素中，或者可以使用 javascript/jquery 更改元素的类。

正如其他人所说，我们需要知道您将变量输出到哪里。CSS 样式 HTML 页面（或其他页面，如 XML），它不能设置脚本语言的样式，这是没有意义的，因为 javascript（或任何其他脚本语言）没有“显示”。

为了扩展我的答案，请考虑您有以下页面：

```
<html>
    <body>
        <p class="one">
            I am the first paragraph's text.
        </p>
        <p class="two">
            I am the second paragraph's text.
        </p>
    </body>
</html> 
```

现在你有以下 CSS：

```
p.one
{
    color: #f00;
}
p.two
{
    color: #000;
} 
```

就目前而言，第一段将有红色文本，第二段将有黑色文本。*但是，您可以使用*javascript/jquery以多种方式更改它。一个例子如下：

```
document.getElementsByClassName("one").ClassName = "two";
document.getElementsByClassName("two").ClassName = "one"; 
```

使用上面的代码，现在段落的颜色将被切换（重要的是要注意，您不仅限于“=”运算符。如果使用“+=”，则可以添加而不删除类（即，一个元素将被赋予另一个类而不带走旧类）。要使用 javascript 删除一个类，只需使用类似的东西， `document.getElementsByClassName("one").ClassName = "";`

最后，另一种方法可能只是更改元素本身的样式，就像这样（另外，这里有一个您可能会使用的链接： http: [//answers.oreilly.com/topic/1819-how-to-change -an-elements-css-properties-with-javascript/](http://answers.oreilly.com/topic/1819-how-to-change-an-elements-css-properties-with-javascript/)）：

```
document.getElementsByClassName("one").style.color = "#000"; 
```

这是我更喜欢这样做的方式，除了我个人可能会使用 jquery 方法：

```
$(".one").css("color", "#000"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:14:43.493

CSS 用于样式标记元素（HTML 等）。您不能将 CSS 直接应用于 Javascript 变量。

但是，当您将变量内容转换为 HTML 时，您可以将数据包装在 HTML 标记中并对其应用 CSS 样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:23:31.803

这取决于这些变量是如何注入到页面中的，但是您可能希望将它们包装在一个 span 标记中以查看最终结果。

```
var usr = "<span class='user-input'>You: " + userinput + "</span>";
var rpl = "<span class='chatbot'>Chatbot: " + chatbot.transform(userinput) + "</span>"; 
```

在你的 CSS 中使用 .user-input 和 .chatbot。

您可以做的另一件事是尝试查找通过源代码将数据注入页面的 html 标记。可以通过 javascript (jquery) 将类添加到目标 html 标记。

# java - cachedThreadPool 没有像我预期的那样工作

> ID：16085199
> 
> 赞同：0
> 
> 时间：2013-04-18T14:05:08.370
> 
> 标签：java, multithreading, concurrency, threadpool, executorservice

我正在玩线程，我不明白为什么这不像我想的那样工作。

我正在尝试使用线程计算总和，并期望线程池在我打印出结果时等待所有任务完成（由于 shutdown() 调用和 isTerminated() 检查）。

我在这里想念什么？

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Test5 {

private Integer sum= new Integer(0);

public static void main(String[] args) {

    ExecutorService pool = Executors.newCachedThreadPool(); 
    Test5 obj = new Test5();

    for(int i=0; i<1000; i++){
            pool.execute(obj.new Adding());
    }

    pool.shutdown();

    while(!pool.isTerminated()) {
        //could be empty loop...
        System.out.println(" Is it done? : " + pool.isTerminated());
    }

    System.out.println(" Is it done? : " + pool.isTerminated());
    System.out.println("Sum is " + obj.sum);                
}

class Adding implements Runnable {

    public void run() {

        synchronized(this) {

            int tmp = sum;
            tmp+=1;
            sum=new Integer(tmp);           
        }                       
    }               
}
} 
```

虽然我确实得到了很好的结果，但我也得到了这样的输出：

```
Is it done? : true
Sum is 983 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:23:00.630

您需要在主对象实例上同步。我在`int`下面使用，整数也可以工作（需要显式初始化为零）。

这是工作代码

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class AppThreadsSum {

    int sum;

    public static void main(String[] args) {

        ExecutorService pool = Executors.newCachedThreadPool();

        AppThreadsSum app = new AppThreadsSum();

        for (int i = 0; i < 1000; i++) {
            pool.execute(app.new Adding());
        }

        pool.shutdown();

        while (!pool.isTerminated()) {
            System.out.println(" Is it done? : " + pool.isTerminated());
        }

        System.out.println(" Is it done? : " + pool.isTerminated());
        System.out.println("Sum is " + app.sum);
    }

    class Adding implements Runnable {

        public void run() {

            synchronized (AppThreadsSum.this) {

                sum += 1;
            }
        }
    }
} 
```

ps 忙等待是一种要避免的反模式（从邻居的答案中复制以完成并了解这一重要事情，请参阅评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:17:48.037

你有很多问题。

1.  您的代码**不是线程安全的**
2.  忙碌等待是一种需要避免的反模式。

1.是什么意思？

假设我们有两个线程，A 和 B。

1.  A 读`sum`为`tmp`1
2.  B 读`sum`为`tmp`1
3.  A`sum`增加到 2
4.  A 写`sum`为 2
5.  B`sum`增加到 2
6.  B 写`sum`为 2

所以我们在两个增量后得到 2。不完全对。

现在你可能会说“但我用过`synchronized`，这不应该发生”。好吧，你没有。

当你创建你的`Adding`实例时，你`new`每个人。您有 1000 个单独的`Adding`实例。

当您`synchronized(this)`在当前实例上同步时，**而不是**在所有`Adding`. 所以你的同步块什么都不做。

现在，*简单*的解决方案是使用`synchronized(Adding.class)`.

这`synchronized(Adding.class)`将使代码块在所有`Adding`实例中正确同步。

*好的*解决方案是使用 an`AtmoicInteger`而不是 an ，因为它会`Integer`以原子方式递增，并且专为此类任务而设计。

现在进入2。

你有一个`while(thing){}`循环，这基本上像疯狂的测试一样每毫秒运行数千次直到`thing`is `true`。这是对 CPU 周期**的巨大浪费**。An`ExecutorService`有一个特殊的阻塞方法，它一直等到它关闭`awaitTermination`。

这是一个例子：

```
static final AtomicInteger sum = new AtomicInteger(0);

public static void main(String[] args) throws InterruptedException {

    ExecutorService pool = Executors.newCachedThreadPool();

    for (int i = 0; i < 1000; i++) {
        pool.execute(new Adding());
    }

    pool.shutdown();
    pool.awaitTermination(1, TimeUnit.DAYS);

    System.out.println(" Is it done? : " + pool.isTerminated());
    System.out.println("Sum is " + sum);
}

static class Adding implements Runnable {

    public void run() {
        sum.addAndGet(1);
    }
} 
```

我还建议`cachedThreadPool`在这种情况下不要使用 a ，因为你有 1000 s 被提交，这将产生比你的 CPU`Runnable`多得多的 s 。`Thread`我建议使用`newFixedThreadPool`合理数量的`Thread`s。

我什至不打算使用`int`文字`Integer`以及为什么`new Integer()`不需要。

# algorithm - 你什么时候会在 BOYER-MOORE 上使用 KMP

> ID：16085201
> 
> 赞同：27
> 
> 时间：2013-04-18T14:05:08.440
> 
> 标签：algorithm, pattern-matching, boyer-moore, knuth-morris-pratt

我目前正在学习模式匹配算法，并且遇到过这两种算法。我有以下一般想法：

KMP

*   从左到右比较文本
*   使用故障阵列智能转移
*   需要 O(m)，其中 m 是模式的长度，来计算失败数组
*   需要 O(m)，空间
*   花费 O(n)，时间来搜索一个字符串

BM

*   比较最后一个字符的模式
*   使用坏字符跳转和好的后缀跳转
*   需要 O(m + 字母大小) 来计算表格
*   需要 O(m + 字母大小), 空间
*   需要 O(n)，但通常更好地搜索

我遇到了以下引发此问题的问题（对或错）：

> 如果我们想在许多不同的文本中重复搜索相同的模式，Knuth-Morris-Pratt (KMP) 算法是一个不错的选择。

所以我相信答案是正确的，因为假设每次你在不同的文本上运行算法时，预处理只是 O(n)，而对于 BM，它是 O(n + 字母大小)。但是，我不确定我是否做出了正确的假设，即每次重新运行算法时都会重新计算一个新表。因为说文本总是落在英文字母表中。我只需要计算一次表并重用该表。因此，归根结底，这个问题的答案是否取决于算法都在同一字母表中包含的文本上运行的事实，还是有其他可能影响它的因素？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-18T16:39:19.220

理论上，两种算法都会有“相似”的性能；*在最坏的情况下，* KMP 将在搜索阶段进行大约 2n 次比较，而 Boyer-Moore 将在搜索阶段进行大约 3n 次比较。在这两种情况下，您都不需要在获得新文本时重复预处理。

但真正的答案是，你不应该在实践中使用任何一种。

由于所有额外的内存访问，这两种算法所需的线性辅助存储都会导致现代架构的性能相当……粗糙。

然而，Boyer-Moore 和 KMP 背后的*想法是大多数快速字符串匹配算法的基础。*我所知道的每一个实际有效的字符串匹配算法都使用了类似 KMP 的“故障函数”的想法；事实证明，您可以动态计算模式的次优“故障函数”，该模式仍然为您提供线性时间匹配，同时只需要恒定的额外空间。在将固定模式与随机噪声匹配的“平均情况”中，Boyer-Moore 比线性更快，这在许多实际情况下都得到证实。

# ruby-on-rails - 使用 Fog 和 Carrierwave 删除多个文件（版本） - Rackspace

> ID：16085206
> 
> 赞同：0
> 
> 时间：2013-04-18T14:05:17.807
> 
> 标签：ruby-on-rails, carrierwave, rackspace-cloud, fog, rackspace

我正在构建一个应用程序，其中有一个包含原始、中等和缩略图大小图像的文件。我正在使用 carrierwave 来完成此操作，并且我需要从 Rackspace Cloud Files 中删除该文件的所有版本：

```
class StyleImageUploader < CarrierWave::Uploader::Base
  version :medium do
      process :resize_to_limit => [460, 460]
  end

  version :thumb do
      process :resize_to_limit => [100, 100]
  end

  def filename
      "#{Digest::MD5.hexdigest(original_filename . Time.now.to_s)}.#{file.extension}" if original_filename
  end
end 
```

但是，当我通过控制台进行销毁时，它只会删除原始版本......我该如何删除所有版本？我也在控制台中收到此错误，但它仍然会删除单个文件

```
#<Fog::Storage::Rackspace::NotFound: Fog::Storage::Rackspace::NotFound> 
```

控制器销毁方法：

```
class ImagesController < ApplicationController
  def destroy
    @image = Image.find(params[:id])
    @image.destroy
    render :json => true
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:39:14.433

问题出在文件名方法中......它以不同的方式命名文件，因为 Time.now 被召回了 1 秒。看起来文件名方法在每个版本方法上运行，时间戳是关闭的。

解决方案： [https ://github.com/jnicklas/carrierwave/wiki/How-to%3A-Use-a-timestamp-in-file-names](https://github.com/jnicklas/carrierwave/wiki/How-to%3A-Use-a-timestamp-in-file-names)

# c - 进程切换何时发生

> ID：16085209
> 
> 赞同：0
> 
> 时间：2013-04-18T14:05:23.333
> 
> 标签：c, linux, gcc, process, context-switch

我对两个进程之间的进程切换感到困惑。使用fork创建新进程时，适用于进程之间切换的一般规则是什么。只有当一个进程进入空闲状态时？我有几个疑问

1.  当父母和孩子都处于无限循环并且只有打印指令（没有睡眠方法）时会发生什么
2.  一般规则是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:08:17.713

Most [preemptive](http://en.wikipedia.org/wiki/Preemption_%28computing%29) schedulers will, highly simplified, allocate a certain maximum time to each process.

When that time expires (for instance 10 ms), it will re-schedule so that other processes get some CPU.

If the timer *doesn't* expire before the process hits some other wait condition (such as doing I/O), it will re-schedule then, instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:29:53.550

> > 当量程到期时发生上下文切换
> > 
> > 当资源。
> > 
> > 当有系统调用触发==>不确定。re 是发生中断切换
> > 
> > 当另一个具有更高优先级的进程/线程进入就绪状态时，会触发上下文切换。
> > 
> > 当您的线程由于 i/o 或等待任何其他共享被锁定的线程而进入阻塞状态时

# c++ - 为什么这个 C++ 递归模板不起作用？

> ID：16085211
> 
> 赞同：0
> 
> 时间：2013-04-18T14:05:32.380
> 
> 标签：c++, templates, recursion

我发现了[有趣的问题](https://stackoverflow.com/questions/4568645)，并决定详细检查最佳答案。
我问自己为什么需要结构并尝试在没有结构的情况下重写代码：

```
#include <iostream>
template <int N> void out(std::ostream& os) {
    out<N-1>(os);
    os << N << std::endl;
}

template <> void out<1>(std::ostream& os){
    os << 1 << std::endl;
}

int main(){
    out<100>(std::cout);
} 
```

然后我尝试重构代码。我得到了这样的东西：

```
#include <iostream>
template <int N> void out() {
    if (N != 1) {
        out<N-1>();
        std::cout << N << std::endl;
    }
    else {
        std::cout << 1 << std::endl;
    }
}

int main(){
    out<100>();
} 
```

我不明白为什么这段代码不起作用。
有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:09:22.037

The problem is that the `if` condition is evaluated at run-time. When you get to the instantiation where `N = 1`, it doesn't know that the first block of the `if` statement won't execute. It proceeds to instantiate `out<0>` and so on. [If we had a `static if`](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer), this would be possible, but [it probably won't happen very soon](https://docs.google.com/viewer?a=v&pid=forums&srcid=MDIyMDc3NjUwMTczOTM0Mjk3NjABMDI2MzM3MjkxNDM4NDQ5MzE4NDcBLWVsS1Y4dFhtdDhKATUBaXNvY3BwLm9yZwF2Mg).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T14:09:13.500

Templates are expanded during compilation while if statements are only checked during run-time which is a different later stage. In your case the compiler will try to expand indefinetely as there is no specific implementation of the function for a fixed value of N(that used to be `1`).

# c# - 为派生类重用 DataTemplate

> ID：16085214
> 
> 赞同：1
> 
> 时间：2013-04-18T14:05:36.323
> 
> 标签：c#, wpf, datatemplate

我有一组类都派生自同一个基类。这些旨在作为测试，可以手动或自动运行。我希望屏幕上的显示因枚举而异。它们是在运行时通过 MEF 读入的，因此想法是第 3 方理论上可以编写可以以不同方式运行的测试程序。我想让它们在 XAML 中的编写方式尽可能简单以避免错误。

我已经设法通过使用`ControlTemplates`和`DataTemplate`类似的方法让它工作：

```
<ControlTemplate x:Key="AutomaticTemplate">
    <TextBlock Text="Weeble"/>
</ControlTemplate>

<ControlTemplate x:Key="ManualTemplate">
    <TextBlock Text="Wobble"/>
</ControlTemplate>

<DataTemplate DataType="{x:Type local:MyTestHandler1}">
    <Control x:Name="myControl" Template="{StaticResource AutomaticTemplate}"/>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding RunMode}" Value="{x:Static tr:RunType.Manual}">
            <Setter TargetName="myControl" Property="Template" Value="{StaticResource ManualTemplate}" />
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

哪个有效，但我有许多不同的测试，我可能会看到需要不同的显示方式，从而增加枚举大小，显然我需要创建不同`ControlTemplate`的但 DataTemplate 将保持不变，只是对于每个不同的`DataType`

但这使得每个编写的测试都需要遵循特定的模式才能工作，我想让它更易于实施。那么，有没有办法让它更通用，这样我就可以做类似的事情：

```
<DataTemplate DataType="{x:Type local:MyTestHandler2}" Automatic="{StaticResource x}" Manual="{StaticResource y}"/> 
```

我假设它需要是一个 DataTemplate 以允许 ContentControl 在我使用 ContentControl 并将其设置为当前测试步骤并让 WPF 魔术为我绘制它的 ViewModel 中工作，但也许还有其他方法？

我看了看，`DataTemplateSelector`但处理程序是在运行时连同它一起读入的，`DataTemplates`但它最终还是和 XAML 一样多。

```
public class RunModeTemplateSelector : DataTemplateSelector
{
    public DataTemplate AutomaticTemplate { get; set; }
    public DataTemplate ManualTemplate { get; set; }

    public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        RunType runType = ((TestHandler)item).RunMode;

        switch(runType)
        {
            case RunType.Automatic:
                return AutomaticTemplate;

            case RunType.Manual:
                return ManualTemplate;

            case RunType.SingleStep:
            default:
                return AutomaticTemplate;
        }
    } 
```

使用这样的 XAML：

```
<DataTemplate x:Key="AutomaticTemplate">
    <TextBlock Text="Weeble"/>
</DataTemplate>

<DataTemplate x:Key="ManualTemplate">
    <TextBlock Text="Wobble"/>
</DataTemplate>

<DataTemplate DataType="{x:Type local:MyTestHandler}">
    <DataTemplate.Resources>
        <tr:RunModeTemplateSelector 
            ManualTemplate="{StaticResource ManualTemplate}" 
            AutomaticTemplate="{StaticResource AutomaticTemplate}"
            x:Key="MyTemplateSelector"/>
    </DataTemplate.Resources>
    <ContentPresenter ContentTemplateSelector="{StaticResource ResourceKey=MyTemplateSelector}"/>
</DataTemplate> 
```

但这不是更少的代码，而且还有代码，而与触发器一起使用的方法没有。

# r - 匹配两个数据集中的 ID

> ID：16085216
> 
> 赞同：7
> 
> 时间：2013-04-18T14:05:47.127
> 
> 标签：r, matching, subset

我有两组数据，包括前数据和后数据。受访者有唯一的 ID，我想创建一个子集，其中仅包括对这两项调查都做出回应的人。示例数据集：

```
pre.data <- data.frame(ID = c(1:10), Y = sample(c("yes", "no"), 10, replace = TRUE),
  Survey = 1)

post.data <- data.frame(ID = c(1:3,6:10), Y = sample(c("yes", "no"), 8, replace = TRUE),
  Survey = 2)

all.data <- rbind(pre.data, post.data) 
```

我有以下功能：

```
match <- function(dat1, dat2, dat3){  #dat1 is whole dataset(both stitched together) 
  #dat2 is pre dataset #dat3 is post dataset
  selectedRows <- (dat1$ID %in% dat2$ID & 
                     dat1$ID %in% dat3$ID)

  matchdata <- dat1[selectedRows,]
  return(matchdata)
}

prepost.match.data <- match(all.data, pre.data, post.data) 
```

我认为必须有比这个功能更好的方法来做同样的事情，但我想不出怎么做。我是怎么做的似乎有点乱。我的意思是，它起作用了——它做我想做的事，但我不禁想到有更好的方法。

如果已经以类似的方式询问过这个问题，但我找不到它，我深表歉意——在这种情况下，请务必向我指出相关的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:12:10.740

**注意：** Arun 比我早一点在评论中发布了相同的答案。

你可以`intersect`这样使用：

```
all.data[all.data$ID %in% intersect(pre.data$ID, post.data$ID),] 
```

这使 ：

```
 ID   Y Survey
1   1 yes      1
2   2  no      1
3   3  no      1
6   6 yes      1
7   7 yes      1
8   8 yes      1
9   9  no      1
10 10 yes      1
11  1  no      2
12  2 yes      2
13  3  no      2
14  6  no      2
15  7 yes      2
16  8 yes      2
17  9  no      2
18 10 yes      2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T14:11:14.183

看看加入 plyr。

```
prepost.match.data <- join(pre.data, post.data, by = c("ID")) 
```

# ios - IOS - 请求成员“域”不是结构或联合？

> ID：16085218
> 
> 赞同：0
> 
> 时间：2013-04-18T14:05:51.620
> 
> 标签：ios, objective-c

我正在尝试从 cookie 中获取令牌。当我这样做时，我收到如下错误：

“请求成员‘域’不是结构或联合”

```
- (NSString*)getTokenFromCookie {
    NSHTTPCookie *cookie;
    NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [cookieJar cookies]) {
        if ([[cookie domain] isEqualToString:self.domain]) {
            if ([[cookie name] isEqualToString:@"oauth_token"]) {
                return [cookie value];
            }
        }
    }
    return nil;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:08:37.673

This happens because of `self.domain`

You probably haven't declared it as an `@property`, or `self` is not what you think it is.

# java - 使用布尔数组为类创建一个新实例

> ID：16085219
> 
> 赞同：0
> 
> 时间：2013-04-18T14:05:52.557
> 
> 标签：java, boolean, instance

我正在编写一个代码，它根据原始颜色将数组单元格的颜色更改为黑色或白色。如果单元格为白色，则变为黑色，反之亦然。我正在使用以下代码：

```
public class Grid {

    boolean[][] grid;
    private int Height;
    private int Width;
    public White;
    public Black;

    public Grid(int height, int width) {

        Height = height;
        Width = width;

    }

    public int getHeight() {

        return Height;
    }

    public int getWidth() {

        return Width;
    }

    public boolean isWhite(int i, int j) {
        boolean [][] Grid = new boolean [Height][Width];
        for ( i = 0; i<Height ; i++);{
            for (j = 0; j<Width ; j++){
                if (Grid[i][j] ?? //iswhite) {
                    ??//setBlack
                }
                else (??)//setWhite

            }
        }

    }}

    protected void setWhite(int i, int j) {
        ??
    }

    protected void setBlack(int i, int j) {
        ??
    }
} 
```

我相信我应该根据布尔值为 Grid[i][j] 创建一个实例，但是我不确定如何将“public boolean isWhite”与“setWhite”和“setBlack”联系起来。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:35:54.060

1）您可能应该在构造函数中初始化您的数组。由于它是一个基元数组，因此在每个位置都默认为 false。如果这不是您想要的，请根据需要设置为 true。

2) isWhite，从名称来看，应该只返回给定索引处的值。

3）对于set方法，假设false == black，只要根据你想要的白色还是黑色，将相应位置的值设置为true或false即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:46:48.343

您已经定义`boolean grid[][]`为类变量。您需要在构造函数中使用类似于`grid = new boolean[height][width];`我建议初始化所有值的内容来设置它，只是为了保持理智。（即，将它们全部设置为 true 或 false 或一些预定义的模式。）一旦你这样做了，你可以检查`grid[i][j]`它的值，它可以是 true 或 false。（无论您希望代表黑色和白色。）

例如，您的 isWhite 函数就这么简单（假设 white == true）

```
public boolean isWhite(int i, int j) {
        return grid[i][j];
} 
```

同样，集合函数也相对最小：

```
void setWhite(int i, int j) {
    grid[i][j] = true;
}

void setBlack(int i, int j) {
    grid[i][j] = false;
} 
```

附加：您可能希望创建一些在翻转颜色时执行适当操作的代码，而不是将其放在 isWhite 函数中。（它应该是测试颜色，而不是改变值，对吧？）

```
void changeColorAtYX(int y, int x){
    if(isWhite(y, x)){
        setBlack(y, x);
    } else {
        setWhite(y,x);
    }
} 
```

# c - 如何找出eth0模式是静态还是dhcp？

> ID：16085222
> 
> 赞同：6
> 
> 时间：2013-04-18T14:06:05.023
> 
> 标签：c, linux, networking, dhcp, openwrt

我想使用 C 程序来获取网络接口的 ip 是手动设置还是通过 dhcp 设置的。

我尝试使用以下代码，它在 Debian 中有效，但在 OpenWrt 中无效。我想知道如何在 OpenWrt 中编写一个 C 程序来执行此操作。我试过用这个：

```
#include <stdio.h>
int main(void)
{
    FILE *fp;
    char buffer[80];
    fp=popen("cat /etc/network/interfaces |grep ^iface\\ br-lan | awk -F ' ' '{print $4}'","r");
    fgets(buffer, sizeof(buffer), fp);
    printf("%s", buffer);
    pclose(fp);
} 
```

此代码在 Debian 中运行，但在 OpenWrt 中无法正常运行，所以我想知道如何编写程序来获得相同的结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T14:32:15.220

对于**OpenWRT** ，您可以使用以下命令获取此类信息：

```
$uci get network.lan.proto 
```

因此，我采用您在问题中提出的程序，并且仅更改用于获取信息的命令：

```
#include <stdio.h> <br>
int main(void)
{
    FILE *fp;
    char buffer[80];
    fp=popen("uci get network.lan.proto","r");
    fgets(buffer, sizeof(buffer), fp);
    printf("%s", buffer);
    pclose(fp);
} 
```

要查看 OpenWRT 中可用的所有网络接口，可以使用以下命令：

```
$uci show network 
```

您可以通过使用`libuci`. 包含 C 函数来执行uci`libuci`命令而不通过 popen （`popen`用于从 shell 执行外部命令）。

libuci默认存在于OpenWRT的开发环境中，无需下载，无需构建，无需安装在你的OpenWRT机器上

你可以这样使用libuci

```
#include <uci.h>
void main()
{
    char path[]="network.lan.proto";
    char buffer[80];
    struct  uci_ptr ptr;
    struct  uci_context *c = uci_alloc_context();

    if(!c) return;

    if ((uci_lookup_ptr(c, &ptr, path, true) != UCI_OK) ||
        (ptr.o==NULL || ptr.o->v.string==NULL)) { 
        uci_free_context(c);
        return;
    }

    if(ptr.flags & UCI_LOOKUP_COMPLETE)
            strcpy(buffer, ptr.o->v.string);

    uci_free_context(c);

    printf("%s\n", buffer);
} 
```

（未测试）

当你编译你的程序时，你必须`-luci`在编译命令中添加`gcc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:53:55.030

操作系统没有必要的方式来决定应该如何配置接口。内核（例如 GNU/Linux 的 Linux 部分）不决定，它不（也不应该）关心，它只是通过操作系统使用的任何配置系统被告知哪些网络地址与哪些接口一起使用。OpenWRT 不是 GNU，它的操作方式不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:23:56.713

AFAIK 没有明确的方法。

读取接口文件只是一个提示：不能保证当前的 seup 来自那里。

如果有，您可以查看“询问”DBUS 接口。您可以检查 dhclient 进程是否正在运行。您可以检查 /etc 中指定不同发行版上的网络设置的其他文件。

我认为最可靠的选择是多层次的：检查一大堆提示以得出答案。

另一种选择：向 dhcp 服务器发送一个 DHCP 检查数据包以验证地址。如果您没有得到答案，尽管可能是网络已关闭但在分配地址时已启动。

# winapi - 如何在 Windows API 中使用对话框

> ID：16085229
> 
> 赞同：1
> 
> 时间：2013-04-18T14:06:20.980
> 
> 标签：winapi, dialog

我正在学习 windows api 几个星期，现在我遇到了一个问题，我的代码是这样的

```
LRESULT CALLBACK MainWndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam){
switch(message){
  case(...)
    DialogBox(hInstance,MAKEINTRESOURCE(IDD_MYDIALOG),hwnd,(DLGPROC)MyDialogProc);
    return 0;
}

bool MyDialogProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam){
    switch (message){
      ...       
    }
    return false;
} 
```

`DialogBox`在使用where 我应该放置之前，我不知道我还应该做什么`EndDialog()`。`IDD_MYDIALOG`是我自己创建的资源文件。我不明白它是什么`hInstance`以及如何获得它，我想我只需要一个简单的例子，我就知道如何使用`DialogBox`. 感谢您的帮助！

# mysql - 与特定日期之前的最新记录左连接

> ID：16085230
> 
> 赞同：0
> 
> 时间：2013-04-18T14:06:24.963
> 
> 标签：mysql, database, view, left-join

我想根据日期选择当前活动的记录。我需要做的是创建一个视图，因此“选择所有内容”子查询将不起作用。

但现在我只能选择一列，因为它说

> 操作数应包含 1 列

我可以为我想要获得的所有字段复制选择，但它的性能会很广泛，而且我在历史记录表上有很多列。

对于这个简单的示例（下面的链接），假设我还需要获取电话号码..知道我应该如何去做吗？谢谢。

SQL提琴手： [http ://www.sqlfiddle.com/#!2/1ff7e/1](http://www.sqlfiddle.com/#!2/1ff7e/1)

我想我明白了！似乎有效，但需要更多记录才能尝试。

SQL提琴手： [http ://www.sqlfiddle.com/#!2/1ff7e/3](http://www.sqlfiddle.com/#!2/1ff7e/3)

还是不行……zzz……我又加了几个测试数据，结果还是不行！

SQL 提琴手： [http ://www.sqlfiddle.com/#!2/360c1/1](http://www.sqlfiddle.com/#!2/360c1/1)

我的错。**这是工作！**我为历史插入了两个重复的主键。谢谢大家！！！！

SQL 提琴手： [http ://www.sqlfiddle.com/#!2/274c5/1](http://www.sqlfiddle.com/#!2/274c5/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:30:40.370

您可以向`select`子句添加另一个子查询：

```
SELECT user.username, user.password,
       (SELECT uh.name FROM user_history uh WHERE uh.user_id = user.user_id AND effective_date <= '2013-04-18' ORDER BY effective_date DESC LIMIT 1), 
       (SELECT uh.phone_number FROM user_history uh WHERE uh.user_id = user.user_id AND effective_date <= '2013-04-18' ORDER BY effective_date DESC LIMIT 1) 
FROM user
ORDER BY username; 
```

# sql - Oracle：最大值列字母数字

> ID：16085232
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:06:26.720
> 
> 标签：sql, oracle, max, alphanumeric

我无法获取最新代码的问题。我需要它来生成下一个。

例子：

```
 Last:
 D11.0602.166

 Next:
 D11.0603.166 
```

**我试过了：**

```
 MAX
 TRANSLATE
 CONVERT
 MID
 VAL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:32:15.400

你所拥有的是一个“智能钥匙”——一个包含三个元素的属性。智能钥匙是愚蠢的，因为使用它们会让人头疼。

因此，正确的解决方案是将该属性拆分为三个单独的属性，并将其设为复合键。

同时，您可以使用正则表达式来查找中间组件的最高值...

```
select max(regexp_replace(dumb_key
               , '([A-Z][0-9]{2})\.([0-9]{4})\..([0-9]{3})'
               , '\2'))
from your_table
/ 
```

毫无疑问，您还没有解释各种其他复杂性，这意味着这可能不是完整的解决方案。但它应该是十人的首发。

# maven - 使用ingenieux beanstalk maven插件将WAR文件上传到S3挂起

> ID：16085236
> 
> 赞同：0
> 
> 时间：2013-04-18T14:06:39.590
> 
> 标签：maven, amazon-s3, beanstalk-maven-plugin

我正在尝试使用 Ingenieux beanstalk 插件将战争上传到 S3。但是它挂起尝试上传。有没有人遇到过这个异常？

我在这里关注本教程：http: [//beanstalker.ingenieux.com.br/beanstalk-maven-plugin/usage.html](http://beanstalker.ingenieux.com.br/beanstalk-maven-plugin/usage.html)

```
mvn beanstalk:upload-source-bundle 
```

这是日志：

```
[WARNING] You should encrypt your passwords. See http://beanstalker.ingenieux.com.br/security.html for more information
[INFO] Target Path: s3://some-bucket/test-web2-0.0.1-SNAPSHOT.war
[INFO] Uploading artifact file: C:\Users\Chin Boon\Documents\workstation\test-web2\target\test-web2-0.0.1-SNAPSHOT.war 
```

pom.xml：

```
<plugin>
    <groupId>br.com.ingenieux</groupId>
    <artifactId>beanstalk-maven-plugin</artifactId>

    <configuration>
        <s3Bucket>some-bucket</s3Bucket>
        <s3Key>${project.build.finalName}.war</s3Key>
        <!-- will save as s3://[bucket name]/artifactId-version-TIMESTAMP.war -->
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:50:11.970

我们不太支持 S3 Uploading（太慢，容易出错），建议改用 fast-deploy。

$ mvn 原型：生成 -Dfilter=elasticbeanstalk]

获得一个示例 pom 来申请

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:19:16.903

好的，我想我知道问题出在哪里。

这在 pom.xml 中是必需的

```
<dependency>
    <groupId>br.com.ingenieux</groupId>
    <artifactId>beanstalk-maven-plugin</artifactId>
    <version>0.2.9</version>
</dependency> 
```

# asp.net-mvc - 传递参数和自定义属性

> ID：16085238
> 
> 赞同：0
> 
> 时间：2013-04-18T14:06:45.003
> 
> 标签：asp.net-mvc, custom-attributes

我不知道该去哪里解决我的问题。我想创建一个自定义授权属性来检查角色和权限。我们的权限不是您的标准，这个角色有这些权限，但更多的是每个角色可以有一些权限，但不能有其他权限。

我已经覆盖了 AuthorizeAttribute 类中的 AuthorizeCore 方法：

```
 internal class RoleAttribute : AuthorizeAttribute
{
    private readonly IUserRepository _userRepository;
    private readonly IPermissionRepository _permissionRepository;

    public RoleAttribute(IUserRepository userRepository, IPermissionRepository permissionRepository)
    {
        _userRepository = userRepository;
        _permissionRepository = permissionRepository;
    }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        User user = _userRepository.GetUsers();
        Permission permission = _permissionRepository.GetPermissions();
        return user.Permissions.Where(x => x.Id == permission.Id).Any();
    }
} 
```

这样当我实现属性时：

```
 private static IUserRepository _userRepository;
    private static IPermissionRepository _permissionRepository;

    public TopNavigationController(IUserRepository userRepository, IPermissionRepository permissionRepository)
    {
        _userRepository = userRepository;
        _permissionRepository = permissionRepository;
    }

    [Role(_userRepository, _permissionRepository)]
    public ActionResult MethodThatHasStuff()
    {
         //Do stuff return stuff if user has the permissions
    } 
```

我不能依赖注入到被覆盖的方法中，因为我不能将注入传递到属性中。

我意识到这不是解决问题的好方法，但直到我们可以与客户一起解决一些问题，使我们朝着更好的实践迈进，我需要相应地开发。

我的主要问题是：是否有更好的方法来创建允许这种行为的自定义授权过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:37:33.570

如果您认为仅仅因为您在控制器中实例化了存储库，那么每个请求都将使用相同的实例，那么您就错了。每次都会实例化控制器。结果，您并没有通过简单地实例化属性中的存储库来节省太多。考虑到使用属性的局限性，实际上没有更好的方法可以让它访问依赖项，并且在控制器上使用静态是一个非常糟糕的主意。

# c++ - 在 lan c++ windows 中控制以太网速度

> ID：16085240
> 
> 赞同：0
> 
> 时间：2013-04-18T14:06:55.960
> 
> 标签：c++, performance, limit, ethernet

我想知道是否可以使用 C++ 限制/控制特定传输层（tcp/udp）上的以太网上传和下载速度？我正在尝试制作一个简单易用的程序，该程序可以控制以太网连接到的任何设备的速度。例如：计算机B通过Internet连接共享连接到计算机A，我使用我的程序将计算机B的下载或上传速度限制为120kbs（或我选择的任何数字），我也想选择udp或tcp。

基本上，我想创建自己的程序，类似于 net limiter 和其他此类软件，但我也想添加我自己的功能，其中许多功能无法满足我的需求。这些其他功能很容易，但我不知道如何进行实际的限制过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:14:13.780

在您询问的一般情况下，前进的方法是创建一个虚拟网络适配器以及通过它的所有受监控的路由流量。完成后，您可以监视主机之间或特定端口上的流。

不是一件容易的工作...一个起点将是 Windows 设备驱动程序工具包。

如果您准备只限制一个应用程序并且可以对其进行修改，那么任务会简单得多......例如 wget 和 curl 都提供限制。

HTH，露丝

# java - Portlet 间通信 - Liferay

> ID：16085245
> 
> 赞同：0
> 
> 时间：2013-04-18T14:07:09.403
> 
> 标签：java, jquery, liferay

我在 Liferay 中的 portlet 间通信有问题。两个 portlet 通过事件进行通信。

发件人：

```
<supported-publishing-event xmlns:x='http://liferay.com'>
    <qname>x:aufgabeInfo</qname>
</supported-publishing-event> 
```

听众：

```
<supported-processing-event xmlns:x='http://liferay.com'>
    <qname>x:aufgabeInfo</qname>
</supported-processing-event> 
```

事件：

```
<event-definition xmlns:x='http://liferay.com'>
    <qname>x:aufgabeInfo</qname>
    <value-type>java.lang.String</value-type>
</event-definition> 
```

发件人Portlet：

```
<a onclick="selectedEntry('${aufgabe.aufgabenName}', '${aufgabe.aufgabenID}');"> 
  ${aufgabe.aufgabenName} </a><br/> 
```

onclick 事件通过 ajax 调用调用 ProcessAction 方法。

```
function selectedEntry(name, id){
    console.log("in click");
     var url = '<portlet:actionURL name="open"/>';
       $.ajax({
           type: "POST",
           url: url,
           data: {"name": name, "ID": id},
           dataType: "json",
           success: function(){
               console.log("in success");

           },
       }); 
```

并且 ProcessAction 方法设置了一个用于通信的事件。

```
QName qName = new QName("http://liferay.com", "aufgabeInfo", "x");
actionResponse.setEvent(qName, jsonString); 
```

因此Listener-Portlet 在ProcessEvent 方法中接收到这个事件。

```
Event event = request.getEvent();
String jsonString = (String) event.getValue(); 
```

我的问题是我需要javascript中的jsonString。使用 onclick-Event 它不会刷新整个页面，但可以进行通信。使用按钮刷新整个页面，但通信不起作用。

任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-16T07:32:49.627

Portlet 规范的第一个版本 JSR-168/portlet1.0 不包括对 Portlet 间通信的任何支持。第二个版本，JSR-286/portlet2.0，支持 IPC Mechanism。JSR-286 使 IPC 可以轻松地在两个 portlet 之间共享数据。使用 IPC 机制，我们可以将数据从 ACTION 共享到 VIEW 阶段和 VIEW-VIEW 阶段。

有关在 Liferay 中创建 portlet 的分步指南，您可以[在此处阅读](http://www.attuneinfocom.com/blog/how-create-ipc-portlet-liferay-611-ga2-0)

# ios - Facebook iOS 应用程序的应用程序 ID 无效

> ID：16085249
> 
> 赞同：6
> 
> 时间：2013-04-18T14:07:14.823
> 
> 标签：ios, facebook-ios-sdk

这是我尝试从我的应用程序登录时出现的错误。

```
MyApp[47747:907] Failed to log in Error Domain=com.facebook.sdk Code=2 
"The operation couldn’t be completed. (com.facebook.sdk error 2.)" 
UserInfo=0x1c5d3c50 {com.facebook.sdk:ErrorLoginFailedReason=com.facebook.sdk:SystemLoginCancelled, com.facebook.sdk:ErrorInnerErrorKey=Error Domain=com.apple.accounts Code=7 
"The Facebook server could not fulfill this access request: Invalid application [My_App_Id]" 
UserInfo=0x1c5cb630 {NSLocalizedDescription=The Facebook server could not fulfill this access request: Invalid application [My_App_Id]}, com.facebook.sdk:ErrorSessionKey=<FBSession: 0x1c584800, state: FBSessionStateClosedLoginFailed, loginHandler: 0x0, appID: 589037374454169, urlSchemeSuffix: , tokenCachingStrategy:<PFFacebookTokenCachingStrategy: 0x1d0818a0>, expirationDate: (null), refreshDate: (null), attemptedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:(null)>} 
```

在另一部 iPhone 上，授权工作没有问题。我检查了在两台设备上，我的应用都启用了 Facebook 原生身份验证。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T14:14:46.070

好吧，我的错。我正在尝试使用我朋友的 Facebook 帐户，但他并未被识别为 Facebook 上的开发人员。

一旦我为我的应用程序禁用了沙盒模式，登录就没有问题了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-04T01:46:09.910

显然，如上所述，您可以为您的应用禁用沙盒模式，或者您可以在 Facebook @developer.facebook.com 上将您的朋友添加为开发人员（如果您需要）。

# jquery - 仅显示设置的值

> ID：16085254
> 
> 赞同：0
> 
> 时间：2013-04-18T14:07:33.557
> 
> 标签：jquery

我有以下脚本运行良好。对两个字段进行一些计算并显示在第三个字段中。

```
 $(function() {
     $(document).on('change', 'td.evaluation select', function() {
        var gap = parseInt($(this).find(':selected').val())- parseInt($(this).parents('tr').find('td.mefly').text()) ;

        $(this).parents('tr').find('td.gap input:text').val(gap);
        if(gap<0){
         $(this).parents('tr').find('td.gap input:text').css('background-color','red');
        }else  $(this).parents('tr').find('td.gap input:text').css('background-color','#3CB371');

     });
  }); 
```

现在我想添加一个脚本来在页面加载时运行脚本，其中包含之前存储的值。但它使结果保持空白。这是我尝试过的：

```
 $(document).ready(function(){

            var gap = parseInt($("td.evaluation select").find(':selected').val())- parseInt($("td.evaluation select").parents('tr').find('td.mefly').text()) ;

            $("td.evaluation select").parents('tr').find('td.gap input:text').val(gap);
            if(gap<0){
                $("td.evaluation select").parents('tr').find('td.gap input:text').css('background-color','red');
            }else  $("td.evaluation select").parents('tr').find('td.gap input:text').css('background-color','#3CB371');

        }

    )}; 
```

我做错了什么？

# java - 如何知道在哪个版本中修复了 Java 错误

> ID：16085257
> 
> 赞同：2
> 
> 时间：2013-04-18T14:07:41.590
> 
> 标签：java

我正在尝试解决以下错误： [http ://bugs.sun.com/view_bug.do?bug_id=7019384](http://bugs.sun.com/view_bug.do?bug_id=7019384)

在错误数据库中，状态为关闭，修复版本为 7(b138)。我如何知道我的 7u21 版本是否包含修复程序？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:17:00.323

似乎已经达到了[JDK7 Milestone 13](http://cr.openjdk.java.net/jdk7/m13/changes/)（按错误 ID 7019384 搜索）。看起来你很好。

# php - 两页的宽度问题

> ID：16085258
> 
> 赞同：0
> 
> 时间：2013-04-18T14:07:41.730
> 
> 标签：php, wordpress, css

我无法理解此页面上的 css 出了什么问题。

在左侧边栏中有一个名为 testimonials 的 h3 元素，其下方有一个 3px 的绿色边框。

[http://goo.gl/L7Lio](http://goo.gl/L7Lio)

出于某种原因，边框一直延伸到其旁边下一列中的文本。

然而，在这个使用完全相同的 css 的页面上，它没有这个问题，所有东西都在左侧边栏中正确对齐。

[http://goo.gl/oL3km](http://goo.gl/oL3km)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:16:12.407

您的内容的 CSS 类是`floatright posts`并且它的宽度是`500px`. 规则在这里设置：

```
.single-page-testimonial .posts {
    width: 500px;
} 
```

正确页面内容的 CSS 类是`post floatright sidebar-exist`（带有附加`sidebar-exist`类），其宽度是`490px`. 规则在这里：

```
.single-page-no .post.sidebar-exist {
    width: 490px;
} 
```

因此，您的主要内容比正确的内容宽 10 像素。我想你可能会错过`sidebar-exist`某个地方的课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:15:40.110

内容 DIV 有 490px vs 500px（这里是 10px 的空间）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T14:17:08.400

`.post h1, .mid-title { border-bottom: 3px solid #004732; color: #004732; font-size: 18px; line-height: 30px; margin: 10px 0; padding: 0; }`这种 css 样式正在覆盖您的 h3 样式，老兄，您面临这个问题。

解决方案：只需替换`margin: 10px 0;`为 `margin: 10px;`. 这将解决问题，我已经检查了萤火虫:)

快乐编码:)

# c# - 使用 .NET 将控件的父级约束到 Windows 窗体中的特定类型

> ID：16085259
> 
> 赞同：1
> 
> 时间：2013-04-18T14:07:43.627
> 
> 标签：c#, .net, winforms, controls

我想编写一个只能有父类型`Form`（或派生类）的控件。

我猜您可能会将这种行为比作`TabControl`, or `TabPage`，其中 a`TabControl`不能有非类型的子级`TabPage`，`TabPage`也不能有非 a 的父级`TabControl`。

但是我的实现略有不同，因为与 不同`TabControl`，我希望我`Form`接受任何类型的控件，但我的控件应该只有一个类型的父级`Form`。

这是我尝试过的：

```
public class CustomControl : ContainerControl
{
    protected override void OnParentChanged(EventArgs e)
    {
        base.OnParentChanged(e);
        if (!(this.Parent is Form))
        {
            this.Parent.Controls.Remove(this);
            throw new ArgumentException("CustomControl can only be a child of Form");
        }
    }
} 
```

这会在表单设计器中导致一些不良影响，例如：

1.  尝试在设计器中加载表单时引发异常。
2.  从窗体中删除控件时引发异常。
3.  控件未正确调整大小。

我将不胜感激有关如何解决此问题的任何建议，或者指出我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:43:16.390

正如人们常说的，最简单的答案往往是最好的……在`if`语句中添加一个额外的检查可以解决所有问题！- 傻我！我应该早点尝试这个！

```
public class CustomControl : ContainerControl
{
    protected override void OnParentChanged(EventArgs e)
    {
        base.OnParentChanged(e);
        if (this.Parent != null && !(this.Parent is Form))
        {
            this.Parent.Controls.Remove(this);
            throw new ArgumentException("CustomControl can only be a child of Form");
        }
    }
} 
```

# asp.net - 如何在 kentico 中发送时事通讯时添加电子邮件标题

> ID：16085262
> 
> 赞同：0
> 
> 时间：2013-04-18T14:07:57.233
> 
> 标签：asp.net, content-management-system, kentico

我正在使用 kentico 7，我想在通过 SMTP 发送新闻信时添加电子邮件标题。

这是我们使用的共同特征。我想在发送时事通讯时在邮件中发送一些带有标题的信息。kentiko 或代码隐藏中是否有任何 xml，我可以通过它设置标题并将其发送给订阅者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:17:44.980

您必须自定义 EmailQueueManager（在 CMS.Newsletter 命名空间中）。有一种方法

```
SendEmail(...) 
```

它创建了 EmailMessage 的实例。您可以将标题添加到其 Headers 属性。不幸的是，没有更简单的方法可以做到这一点。

# eclipse - 使用 m2e 将 cxf 项目导入 Eclipse 时出错：找不到该类 org.apache.cxf.pmd.UnsafeStringConstructorRule

> ID：16085263
> 
> 赞同：2
> 
> 时间：2013-04-18T14:07:58.200
> 
> 标签：eclipse, maven, cxf, m2e, pmd

我检查了 cxf 源代码并尝试使用“import as maven project”将项目导入 eclipse。

然后我收到错误消息：无法从 m2e 中找到该类 org.apache.cxf.pmd.UnsafeStringConstructorRule。

所以看起来 cxf 在那里定义了一个规则，而 pmd 插件没有找到它。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:20:40.110

关于[Apache CXF 父 pom](https://github.com/apache/cxf/blob/trunk/parent/pom.xml)，它提到了`profile`命名，其`m2eclipse`定义如下： -`maven-pmd-plugin``the dependency`

```
<profile>
    <id>m2eclipse</id>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>2.7.1</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.cxf.build-utils</groupId>
                        <artifactId>cxf-buildtools</artifactId>
                        <version>${cxf.build-utils.version}</version>
                    </dependency>
                </dependencies>
                <configuration>
                    <rulesets>
                        <ruleset>
                            ${cxf.resources.base.path}cxf-pmd-ruleset.xml
                        </ruleset>
                    </rulesets>
                    <sourceEncoding>UTF-8</sourceEncoding>
                    <targetJdk>1.6</targetJdk>
                    <linkXRef>false</linkXRef>
                    <includeTests>true</includeTests>
                    <verbose>true</verbose>
                    <excludeRoots>
                        <excludeRoot>${basedir}/src/main/generated</excludeRoot>
                    </excludeRoots>
                </configuration>
                <executions>
                    <execution>
                        <id>validate</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</profile> 
```

您可能会注意到`activation`.`this profile`

下载`org.apache.cxf.build-utils:cxf-buildtools:2.5.0:jar`表格[Maven Central Repository](http://search.maven.org/remotecontent?filepath=org/apache/cxf/build-utils/cxf-buildtools/2.5.0/cxf-buildtools-2.5.0.jar)后，我也找到了这个类`org.apache.cxf.pmd.UnsafeStringConstructorRule`。

这可能是您的问题的根本原因。恕我直言，您可以尝试通过缺少某些属性来激活此配置文件，例如

```
<profile>
    <id>m2eclipse</id>
    <activation>
        <property>
           <name>!skipM2E</name>
        </property>
    </activation>
    ....
</profile> 
```

我希望这可能会有所帮助。

# java - 有什么方法可以在 App Engine (GAE) 上显示自定义 500 错误？

> ID：16085266
> 
> 赞同：4
> 
> 时间：2013-04-18T14:08:02.323
> 
> 标签：java, google-app-engine

服务器错误导致 HTTP 500 响应客户端并带有一般错误消息（“服务器遇到错误...”）。有什么办法可以截获这条消息并编写一个自定义消息？

我想有一种方法来唯一地识别来自客户端的服务器错误。例如，如果我可以生成一个 GUID，我在服务器端发生服务器错误时记录该 GUID，然后将该 ID 发送到客户端，那么以后随时可以轻松地在日志中搜索该特定异常。

我确实意识到服务器错误是由代码中的异常产生的，所以我正在寻找应用引擎 API 中的某种捕获所有异常挂钩。当然，如果存在这样的钩子，并且在此处执行的代码会产生第二个异常，则它必须再次默认为一般的 500 错误。

我正在为 GAE 使用 Java API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:51:52.283

对于 GAE 生成的错误，您可以[配置自定义错误页面](https://developers.google.com/appengine/docs/java/config/appconfig#Custom_Error_Responses)。对于代码生成的错误，您应该在第一个 servlet 过滤器中使用包罗万象的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:59:27.213

我最终按照[这个 SO question](https://stackoverflow.com/questions/2410808/how-do-i-catch-errors-globally-log-them-and-show-user-an-error-page-in-j2ee-app)中的答案编写了一个 Servlet 过滤器。过滤器将调用包装`doFilter()`在一个通用的 try-catch 块中，并在将其记录到服务器时为客户端创建一个参考号。我认为这个小片段可能对其他人有用：

```
public class ExceptionFilter implements Filter {
    private FilterConfig filterConfig;

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain)
        throws IOException, ServletException {

        try {
            filterChain.doFilter(request, response);
        }
        catch (Exception ex) {
            String errorId = UUID.randomUUID().toString();
            Mylog.e("Server error " + errorId); // Use whatever logging mechanizm you prefer
            String clientResponse = "Server error. Reference no: " + errorId;     
            ((HttpServletResponse) response).setStatus(500);                
            response.getWriter().write(clientResponse);
        }
    }

    public FilterConfig getFilterConfig() {
        return filterConfig;
    }

    public void init(FilterConfig filterConfig) {
        this.filterConfig = filterConfig;
    }

    public void destroy() {}      
} 
```

`<web app>`您还需要像这样配置 web.xml（在标签下的某处）：

```
<filter>
    <filter-name>ExceptionFilter</filter-name>
    <filter-class>your.package.ExceptionFilter</filter-class>
</filter>
<filter-mapping>
   <filter-name>ExceptionFilter</filter-name>
    <servlet-name>Your Servlet Name As Defined In servlet-mapping</servlet-name>
</filter-mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:47:46.607

你没有提到你使用的是python还是java。Python 错误显示[https://developers.google.com/appengine/docs/python/config/appconfig#Custom_Error_Responses](https://developers.google.com/appengine/docs/python/config/appconfig#Custom_Error_Responses)

请注意，这些只是在发生任何未捕获的错误时显示的静态页面。

你可以尝试在你的主处理程序中捕获这些错误（我说的是 python），但你不能总是这样。例如，您有时可能会捕获 DeadlineExceededError，并且您可能有一点时间来发出日志或重定向（可能到同一页面再试一次或到您自己的静态页面，带有 arg您提到的 GUID，然后让 javascript 以一些有用的方式呈现它）但通常这不起作用。所以这在很大程度上取决于错误的性质。

# php - Jquery 不适用于动态添加内容的面板

> ID：16085268
> 
> 赞同：0
> 
> 时间：2013-04-18T14:08:05.247
> 
> 标签：php, jquery

我有一个页面，其中有一个面板，当用户单击按钮时，该面板用作弹出窗口。此面板的内容从 GET 获取到另一个 PHP 文件。我需要`jquery`在这个面板内工作，但不幸的是这没有发生。

我尝试将其添加到发出请求的 PHP 文件之上：

```
<script type="text/javascript">
    $(document).ready(function(){
        window.alert("testing");
    });
</script> 
```

因此，当面板更新时，“测试”应该出现在屏幕上。

我还尝试从主 PHP 文件将事件附加到面板上的按钮，但它也不起作用。

我怎样才能让它`jquery`在我的面板上工作？

我如何将内容添加到面板：

```
function getClink(strcl,strcls)
{ 
    var xmlhttpcl;
    if (strcl=="")
    {
        document.getElementById("divIdclink").innerHTML="";
        return;
    }

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttpcl=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttpcl=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttpcl.onreadystatechange=function()
    {
        if (xmlhttpcl.readyState == 4 && xmlhttpcl.status == 200)
        {
            document.getElementById("divIdclink").innerHTML=xmlhttpcl.responseText;
            //alert(xmlhttp.responseText);
        }
    }
    xmlhttpcl.open("GET","get_close_link_details.php?cl="+strcl+"&cls="+strcls,true);
    xmlhttpcl.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:35:06.333

我会使用 jQuery 进行 ajax 调用，然后在内容加载后调用警报。像这样

```
$('#clicktoPopUp').click(function(){
    $.get('url', function(data){
       $('#whereYouWantHTML').html(data);
       alert("testing");
    });
}); 
```

虽然如果我在做一个对话框弹出我会使用 jQuery UI。

# c# - sending large dataset to WCF service gives protocol exception

> ID：16085270
> 
> 赞同：0
> 
> 时间：2013-04-18T14:08:13.717
> 
> 标签：c#, wcf, dataset

I have a wpf application which is sending a `DataSet` with almost 25 `DataTable`. I am not able to fix `The remote server returned an unexpected response: (400) Bad Request` with synchronous and asynchronous both. Below is the app.config:

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_ICommunication" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="01:00:00" sendTimeout="01:00:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                  <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                   maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />    
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:49486/Communication.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICommunication"
                contract="CommunicationReference.ICommunication" name="BasicHttpBinding_ICommunication" />
        </client>
    </system.serviceModel>
</configuration> 
```

and this is the Service's web.config:

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="2147483647" executionTimeout="10000"/>
  </system.web>
  <connectionStrings>
    <add name="conName" connectionString="Data Source=*******;Initial Catalog=****; User ID=**; Password=*****"/>  

  </connectionStrings>
  <system.serviceModel>   

    <behaviors>      
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="1000" maxConcurrentInstances="1600" />
        </behavior>
      </serviceBehaviors>
    </behaviors>    
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

P.S.: I tested it with passing blank `DataSet`, Its working. But `DataSet` with `DataTable` its not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:16:43.267

我已经包含了整个服务模型供您参考，请将我设置为**LargeDataService**的合同设置为您的适当接口

```
<system.serviceModel>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
        <bindings>
            <basicHttpBinding>
                <binding name="LargeDataBinding" maxReceivedMessageSize="4194304">
                    <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="2147483647" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647"/>
                </binding>
            </basicHttpBinding>
        </bindings>
        <services>
            <service behaviorConfiguration="webBehavior" name="serviceEndpoints">
                <endpoint address="" binding="basicHttpBinding" bindingConfiguration="LargeDataBinding" behaviorConfiguration="customBehavior" contract="LargeDataService"/>
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior name="webBehavior">
                    <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                    <dataContractSerializer maxItemsInObjectGraph="2147483646" />
                </behavior>
            </serviceBehaviors>
            <endpointBehaviors>
                <behavior name="customBehavior">
                    <webHttp automaticFormatSelectionEnabled="false" helpEnabled="true"/>
                    <dataContractSerializer maxItemsInObjectGraph="2147483646" />
                </behavior>
            </endpointBehaviors>
        </behaviors>
    </system.serviceModel> 
```

# oracle - How to check for a file in FTP server location and send the same file from FTP location through mail

> ID：16085273
> 
> 赞同：0
> 
> 时间：2013-04-18T14:08:18.753
> 
> 标签：oracle, plsql, ftp

A text file is being created in FTP Server when an interface runs,

I need to check whether the created have any records,if it has values then i must be sending the same text file through mail using PL/SQL.

Thanks a million in advance :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:53:28.973

Tim Hall 构建了一个很棒的 ftp 包。 [http://www.oracle-base.com/dba/scripts.php](http://www.oracle-base.com/dba/scripts.php) -> 其他 -> ftp.pkb 和 ftp.pks

对于电子邮件问题，您可以使用 Oracle 包 UTL_MAIL。

您需要一个在 FTP 服务器上执行搜索的作业才能找到文本文件。

我喜欢记录日志，所以我喜欢的任务方式是：1）读取 ftp 目录并搜索文本文件 2）将文本文件名、内容和 sysdate 存储在表中 3）删除/重命名文件ftp 服务器，所以你不会再次加载它 4）检查内容是否不为空（从表中） 5）如果它不为空，发送电子邮件 6）在表中标记数据行，它已被检查

希望能帮助到你。

brgds，出生

# javascript - 实现流体 JS 平铺界面

> ID：16085274
> 
> 赞同：6
> 
> 时间：2013-04-18T14:08:26.503
> 
> 标签：javascript, html, css, resize, tile

我正在建立一个摄影网站，我想创建一个漂亮的“平铺”界面，它看起来类似于新版本 MSN Money Now 上的界面（注意 - 新版本的网站只能在 Windows 8 PC 上查看) - [http://t.money.msn.com/now/](http://t.money.msn.com/now/)。我试图在 Javascript 中实现这一点。

这是一个带有预填充数据的示例页面：http: [//photoachiever.azurewebsites.net/en](http://photoachiever.azurewebsites.net/en)

我创建了 Tile 组——每个高 2 个单位，宽 2 个单位，可以包含一个大方形瓷砖、两个宽瓷砖或四个小方形瓷砖。现在，因为我希望网站具有响应性，所以我想在 Javascript 中动态计算最佳单元大小，以便始终填充 100% 的空间，并且对于更宽的屏幕，例如更多的列可见等等。它在 MSN Money 网站上的工作方式相同，但有两个重要区别：

1）当我的图像第一次加载时，我只会看到它们的最高结果，直到所有图像都被加载并执行 JS 为止。MSN Money 网站只显示一个绿色区域，随后出现的图像已经适当调整大小。2）当我调整窗口大小时，它远非流畅，计算和主要图像调整大小非常明显。然而，在 MSN Money 上，调整大小非常流畅，甚至图像似乎只是调整大小而没有出现故障。此外 - 他们设法使字体调整大小流畅。

请您解释一下，MSN Money 网站是如何取得这些结果的？我在 Stack Overflow 上看到了一些类似的问题，但它们从不要求单个图块的宽度和高度相等，而我的设计确实需要这些。

额外问题：您能否添加一些关于如何实现 div 的响应式动画重排的解释？[http://www.brainyquote.com/](http://www.brainyquote.com/)上的示例- 当您更改窗口大小时，它会以动画方式重排所有引号。

编辑：我附上了我当前的代码，这远非正确（性能非常低，图像首先显得太大，并且在全部下载后它们的大小下降）。

代码的第一部分（将所有事件附加到图块并在单击时添加动画）：

```
function attachTileEvents() {
if ($(".tile-flow").size() >= 1) {
    $(window).resize(function () {
        delay(function () {
            resizeTiles();
        }, 100);
    });
    $(document).on("click", ".tile-flow .load-next-page", manualLoadContentDetection);
    $(window).on("scroll", scrollLoadContentDetection);
    $(document).on("touchend", scrollLoadContentDetection);
}
resizeTiles();
$(".tile .contents").each(function () {
    var tile = $(this).parent()[0]
    var mouse = { x: 0, y: 0, down: false };

    var maxRotation = 16;
    var minScale = 0.95;
    var setRotation = function (scaled) {
        //Rotations as percentages 
        var width = tile.offsetWidth;
        var height = tile.offsetHeight;
        var diag = Math.sqrt((width / 2) * (width / 2) + (height / 2) * (height / 2));
        var dist = Math.sqrt((mouse.x - (width / 2)) * (mouse.x - (width / 2)) + (mouse.y - (height / 2)) * (mouse.y - (height / 2)));
        var fract = 1.0;
        if (dist > 0) {
            fract = dist / diag;
        }
        var yRotation = (mouse.x - (width / 2)) / (width / 2);
        var xRotation = (mouse.y - (height / 2)) / (height / 2);

        if (scaled) {
            tile.style.webkitTransform = "rotateX(" + -xRotation * maxRotation + "deg)" + " rotateY(" + yRotation * maxRotation + "deg)" + " scale(" + (minScale + fract * (1 - minScale)) + ")";
            tile.style.mozTransform = "rotateX(" + -xRotation * maxRotation + "deg)" + " rotateY(" + yRotation * maxRotation + "deg)" + " scale(" + (minScale + fract * (1 - minScale)) + ")";
            tile.style.transform = "rotateX(" + -xRotation * maxRotation + "deg)" + " rotateY(" + yRotation * maxRotation + "deg)" + " scale(" + (minScale + fract * (1 - minScale)) + ")";
        } else {
            tile.style.webkitTransform = "rotateX(" + -xRotation * maxRotation + "deg)" + " rotateY(" + yRotation * maxRotation + "deg)";
            tile.style.mozTransform = "rotateX(" + -xRotation * maxRotation + "deg)" + " rotateY(" + yRotation * maxRotation + "deg)";
            tile.style.transform = "rotateX(" + -xRotation * maxRotation + "deg)" + " rotateY(" + yRotation * maxRotation + "deg)";
        }
    }
    var MouseDown = function (e) { mouse.x = e.offsetX; mouse.y = e.offsetY; mouse.down = true; setRotation(true); }
    var MouseUp = function (e) { if (mouse.down) { mouse.down = false; tile.style.webkitTransform = "rotateX(0deg)" + " rotateY(0deg) scale(1.0)"; tile.style.mozTransform = "rotateX(0deg)" + " rotateY(0deg) scale(1.0)"; tile.style.transform = "rotateX(0deg)" + " rotateY(0deg) scale(1.0)"; } }
    var MouseOut = function (e) { mouse.down = false; tile.style.webkitTransform = "rotateX(0deg)" + " rotateY(0deg) scale(1.0)"; tile.style.mozTransform = "rotateX(0deg)" + " rotateY(0deg) scale(1.0)"; tile.style.transform = "rotateX(0deg)" + " rotateY(0deg) scale(1.0)"; }
    var MouseMove = function (e) { mouse.x = e.offsetX; mouse.y = e.offsetY; if (mouse.down == true) { setRotation(false); } }
    $(tile).on("mousemove", MouseMove);
    $(tile).on("mousedown", MouseDown);
    $(tile).on("mouseup", MouseUp);
    $(tile).on("mouseout", MouseOut);
});} 
```

主要部分 - 调整大小：

```
var TileSizes = { wideWidth: 0, singleWidth: 0, margin: 0 };
function resizeTiles() {
var rowColumnNumber = 2;
var width = $(window).width();
if (width >= 2500) {
    rowColumnNumber = 7;
}
else if (width >= 2000) {
    rowColumnNumber = 6;
} else if (width >= 1600) {
    rowColumnNumber = 5;
} else if (width >= 1280) {
    rowColumnNumber = 4;
} else if (width >= 768) {
    rowColumnNumber = 3;
} else if (width >= 480) {
    rowColumnNumber = 2;
} else {
    rowColumnNumber = 1;
}
var totalWidth = $(".tile-flow").width() - 17; //compensate for the scrollbar
//calculate the margin size : 5% of the flow width
var margin = Math.round(totalWidth * 0.05 / rowColumnNumber);
var wideSize = Math.floor((totalWidth - margin * (rowColumnNumber - 1)) / rowColumnNumber);
var halfSize = Math.floor((wideSize - margin) / 2);
var quaterSize = Math.floor(halfSize * 2.5 / 3);
var heightSize = Math.floor(halfSize * 2 / 2.0);
var doubleHeightSize = heightSize * 2 + margin;
var detailsSize = quaterSize * 2 + margin;
TileSizes.wideWidth = doubleHeightSize;
TileSizes.singleWidth = heightSize;
TileSizes.margin = margin;
$(".big-square-tile").width(doubleHeightSize);
$(".big-square-tile").height(doubleHeightSize);
$(".wide-tile").width(doubleHeightSize);
$(".small-tile").width(halfSize);
$(".tile-flow .col .small-tile:even").css("margin-right", margin);
$(".small-tile").height(heightSize);
$(".wide-tile").height(heightSize);
$(".col").width(doubleHeightSize);
$(".col").css("margin-right", margin);
$(".col:nth-child(" + rowColumnNumber + "n)").css("margin-right", 0);
//all tiles get bottom margin

var how = 0;
$(".wide-tile .contents footer").each(function () {
    if ((how % 4 == 0) || (how % 4 == 1)) {
        $(this).width(TileSizes.singleWidth - 20);
    } else {
        $(this).height(75);
    }
    if (how % 4 == 0) {
        $(this).css("left", TileSizes.wideWidth);
    } else if (how % 4 == 1) {
        $(this).css("left", -TileSizes.singleWidth);
    }
    else if (how % 4 == 2) {
        $(this).css("top", TileSizes.singleWidth);
    } else {
        $(this).css("top", -95);
    }
    how = how + 1;
});

$(".big-square-tile .contents footer").each(function () {
    $(this).height(75);
    if (how % 2 == 0) {
        $(this).css("top", TileSizes.wideWidth);
    } else {
        $(this).css("top", -95);
    }
    how = how + 1;
});

$(".small-tile .contents footer").each(function () {
    $(this).width(TileSizes.singleWidth - 20);
    $(this).height(TileSizes.singleWidth - 20);
    if (how % 4 == 0) {
        $(this).css("left", TileSizes.singleWidth);
    } else if (how % 4 == 1) {
        $(this).css("left", -TileSizes.singleWidth);
    }
    else if (how % 4 == 2) {
        $(this).css("top", TileSizes.singleWidth);
    } else {
        $(this).css("top", -TileSizes.singleWidth);
    }
    how = how + 1;
});

$(".tile").css("margin-bottom", margin);
//resize images    
var imageList = Array();
$(".big-square-tile img").each(function () {
    imageList.push($(this));
    var img = new Image();
    img.onload = function () {
        var originalHeight = this.height;
        var originalWidth = this.width;
        var index = parseInt(this.id.replace("RESIZINGBIG", ""));
        if (originalHeight > originalWidth) {
            imageList[index].css("height", "auto");
            imageList[index].css("width", "100%");
        } else {
            imageList[index].css("height", "100%");
            imageList[index].css("width", "auto");
        }
    }
    img.id = "RESIZINGBIG" + (imageList.length - 1);
    img.src = $(this).attr('src');
});

$(".small-tile img").each(function () {
    imageList.push($(this));
    var img = new Image();
    img.onload = function () {
        var originalHeight = this.height;
        var originalWidth = this.width;
        var index = parseInt(this.id.replace("RESIZINGSMALL", ""));
        if (originalHeight > originalWidth) {
            imageList[index].css("height", "auto");
            imageList[index].css("width", "100%");
        } else {
            imageList[index].css("height", "100%");
            imageList[index].css("width", "auto");
        }
    }
    img.id = "RESIZINGSMALL" + (imageList.length - 1);
    img.src = $(this).attr('src');
});

$(".wide-tile img").each(function () {
    $(this).css("height", "auto");
    $(this).css("width", "100%");
});} 
```

下面是 HTML 代码现在的样例：

```
<div class="tile-flow">
    <div class="tile-row">
        <div class="col">
            <div class="tile big-square-tile">
                <div class="contents">
                    <img src="~/Images/Test/5.jpg" />
                    <footer>
                        <h1>Test</h1>
                        <span class="author">by Test</span>
                    </footer>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="tile small-tile">
                <div class="contents">
                    <img src="~/Images/Test/2.jpg" />
                    <footer>
                        <h1>Test</h1>
                        <span class="author">by Test</span>
                    </footer>
                </div>
            </div>
            <div class="tile small-tile">
                <div class="contents">
                    <img src="~/Images/Test/3.jpg" />
                    <footer>
                        <h1>Test</h1>
                        <span class="author">by Test</span>
                    </footer>
                </div>
            </div>
            <div class="tile wide-tile">
                <div class="contents">
                    <img src="~/Images/Test/4.jpg" />
                    <footer>
                        <h1>Test</h1>
                        <span class="author">by Test</span>
                    </footer>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="tile big-square-tile">
                <div class="contents">
                    <img src="~/Images/Test/6.jpg" />
                    <footer>
                        <h1>Test</h1>
                        <span class="author">by Test</span>
                    </footer>
                </div>

            </div>
        </div>
        <div class="col">
            <div class="tile wide-tile">
                <div class="contents">
                    <img src="~/Images/Test/1.jpg" />
                    <footer>
                        <h1>Test</h1>
                        <span class="author">by Test</span>
                    </footer>
                </div>
            </div>
            <div class="tile wide-tile">
                <div class="contents">
                    <img src="~/Images/Test/7.jpg" />
                    <footer>
                        <h1>Test</h1>
                        <span class="author">by Test</span>
                    </footer>
                </div>
            </div>
        </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T00:08:48.247

如果我是你，我会使用 Isotope 进行基本布局，并在旁边添加幻灯片和单击事件。您可以插入几乎任何您喜欢的内容。 [jQuery 同位素。](http://isotope.metafizzy.co/)

[**更新的工作模型**](http://jsfiddle.net/apaul34208/Cr4sG/18/)

**[整页结果](http://jsfiddle.net/apaul34208/Cr4sG/18/embedded/result/)**

JS

```
$(function () {

    var $container = $('#container');

    $container.imagesLoaded(function () {
        $container.isotope({
            itemSelector: '.photo'
        });
    });
});

var $container = $('#container');
// initialize Isotope
$container.isotope({
    // options...
    resizable: false, // disable normal resizing
    // set columnWidth to a percentage of container width
    masonry: {
        columnWidth: $container.width() / 5
    }
});

// update columnWidth on window resize
$(window).smartresize(function () {
    $container.isotope({
        // update columnWidth to a percentage of container width
        masonry: {
            columnWidth: $container.width() / 5
        }
    });
});

//click function

    $(function () {
        $('.photo').click(function () {
            $(this).toggleClass('red');
        });
    });

//hover function

    $(function () {
        $('#photo1').hover(function () {
            $('#info1').fadeToggle();
        });
    }); 
```

**概念证明-同位素内的动画**

请注意，此动画在使用前完全是微调。

```
 function animatie() {
     var d = 0;
     for (var i = 0; i < 3; ++i) {
         var b = "#info" + i;
         $(b).css('background', 'silver');
         $(b).hide().delay(d).slideDown(1000).delay(3000).slideUp(1000);
         d += 5000;
     }
 }
 animatie();
 window.setInterval(animatie, 15000);

 $(function () {
     for (var i = 0; i < 3; ++i) {
         var z = '.box' + i;
         var divHeight = $(z).height();
         $(z).css('max-height', divHeight + 'px');
         $(z).css('max-height', divHeight + 'px');
         $(z).css('overflow', 'hidden');
     }
 });
 $(window).resize(function () {
     for (var i = 0; i < 3; ++i) {
         var z = '.box' + i;
         var divHeight = $(z).height();
         $(z).css('max-height', divHeight + 'px');
         $(z).css('overflow', 'hidden');
     }
 }); 
```

这是一个非常酷的布局、排序和过滤插件。它将为您提供瓷砖和动画作为基本功能。

[流体同位素](http://isotope.metafizzy.co/demos/fluid-responsive.html)

[图片加载插件](http://isotope.metafizzy.co/docs/help.html#imagesloaded_plugin)

[无限滚动](http://isotope.metafizzy.co/demos/infinite-scroll.html)

**在 Isotope 中添加了动画，查看上面更新的 jsFiddles**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T22:06:38.473

@MZetko 我理解并尊重您在自己身上实施它的愿望。

@apaul34208 在他提出建议时指出了正确的方向`Isotope`。这是用于这种布局网格的术语。您不必使用 jQuery，但是看看它是如何完成它的工作会很有用...... :)

我目前正在使用[Studiofolio](http://demo.undsgn.com/themeselector/?theme=studiofolio)模板实现一个 Wordpress 网站，尽管我认为自己做这件事会很有趣，但我很高兴我花了这些钱。现在我可以完成设置并继续下一个项目。干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T09:18:58.223

**1) 加载图片**

您应该**默认隐藏图像**。您可以通过将它们的尺寸设置为`1px`
（使用`display:none`可能会导致加载问题）来做到这一点。在你的CSS结束时：

```
div.tile img { width:1px; height:1px } 
```

计算完成后，这将被每个元素的图块特定样式覆盖。

要在加载时拥有背景，您必须使用白色以外的背景颜色:-)
（例如，查看您的`div.wide-tile`规则）。在你的CSS结束时：

```
.col .tile { background-color: #2440b2; } 
```

这将比您的白色背景具有更大的特异性，因此它将覆盖它们。

为了避免闪烁，我会隐藏所有瓷砖，直到知道它们的初始位置（我没有修改你的 js）。

**[[工作演示](http://jsbin.com/ipenid/3/)]** *（确保使用空缓存）*

**2) 用动画调整大小**

基本上你必须放弃使用浮点数才能工作，而是使用**绝对定位的元素**（浮点数不能动画）。

在此之后，您可以简单地在图块 ( `top`, `left`) 上使用 CSS 过渡，因此当您在调整大小事件处理程序中重新计算它们的位置时，它们将通过漂亮的动画滑动到新位置。

```
-webkit-transition: left .5s, top .5s;
-moz-transition: left .5s, top .5s;
transition: left .5s, top .5s; 
```

**[[工作演示](http://jsbin.com/eqoyip/1/)]**

# javascript - 用其他子域替换子域名使用 JavaScript？

> ID：16085276
> 
> 赞同：6
> 
> 时间：2013-04-18T14:08:31.970
> 
> 标签：javascript, string, replace

我正在尝试使用 JavaScript将子域名从“ **news.domain.com/path/** ..”替换为“ **mobile.domain.com/path/ ..”**

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:17:12.987

我假设您要将通用格式的字符串更改`xxxx.domain.com/...`为`mobile.domain.com/...`. 这个正则表达式应该在 JavaScript 中完成：

```
var oldPath = "news.domain.com/path/";
var newPath = oldPath.replace(/^[^.]*/, 'mobile') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-16T11:32:38.287

这应该在*正常*情况下工作：

```
"http://news.domain.com/path/..".replace(/(:\/\/\w+\.)/, "://mobile.") 
```

使用以下添加额外的验证级别：

```
function replaceSubdomain(url, toSubdomain) {
    const replace = "://" + toSubdomain + ".";

    // Prepend http://
    if (!/^\w*:\/\//.test(url)) {
        url = "http://" + url;
    }

    // Check if we got a subdomain in url
    if (url.match(/\.\w*\b/g).length > 1) {
        return url.replace(/(:\/\/\w+\.)/, replace)
    }

    return url.replace(/:\/\/(\w*\.)/, `${replace}$1`)
}

console.log(replaceSubdomain("example.com", "mobile"));
console.log(replaceSubdomain("http://example.com:4000", "mobile"));
console.log(replaceSubdomain("www.example.com:4000", "mobile"));
console.log(replaceSubdomain("https://www.example.com", "mobile"));
console.log(replaceSubdomain("sub.example.com", "mobile"));
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T14:10:07.147

如果您想通过 JS 将用户发送到新的 url，请使用`document.location = "mobile.domain.com/path/.."`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-16T16:05:25.917

关于 FixMaker 对他的[回答](https://stackoverflow.com/a/16085484/4784007)的评论：

> window.location.href 将为您提供一个完全限定的 URL（例如[http://news.domain.com/path](http://news.domain.com/path)）。运行上述代码时，您需要考虑 http:// 前缀

处理请求方案（http/https）的合适正则表达式如下：

```
function replaceSubdomain(url, subdomain){
    return url.replace(/^(https?:\/\/)(www\.)?([^.])*/, `$1$2${subdomain}`);
}

let url1 = 'https://sub-bar.main.com';
let url2 = 'https://www.sub-bar.main.com';

console.log(replaceSubdomain(url1, 'foobar'));
console.log(replaceSubdomain(url2, 'foobar'));
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-18T14:10:19.037

您不能替换子域。您可以使用 javascript 进行重定向。

```
<script type="text/javascript">
<!--
window.location = "http://mobile.domain.com/path/to/file.html"
//-->
</script> 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-24T07:17:35.620

我尝试使用 java 脚本但没有运气，就我而言，我在 .httaccess 文件中使用以下代码

```
RewriteCond %{HTTP_USER_AGENT} "iphone|ipod|android" [NC]
RewriteCond %{HTTP_HOST} !^mobile.domain.com
RewriteRule ^(.*)$ http://mobile.domain.com/ [L,R=302] 
```

它将“新闻”子域替换为“移动”子域。希望它会帮助任何人。

# sql-server - 如何对 Item1 和 Item1 + 'char' 求和

> ID：16085283
> 
> 赞同：1
> 
> 时间：2013-04-18T14:08:40.620
> 
> 标签：sql-server, tsql

我有一个关于 SQL 小问题的问题。

例如，我有一个像这样的**表**：

```
| 项目 | 价值 |
|A0001 | 3 |
|A0001 | 2 |
|A0002 | 2 |
|A0003 | 7 |
|A0003 | 3 |
|A0003U | 2 |
```

如您所见，一个项目可以有可能的值。所以我已经做的是`SUM()`对每个项目附加的所有价值，以获得他**的价值之和**。

我现在想要做的是添加附加到一个项目和这个项目+'U'的值

例如，项目**A0003U****的价值**总和将是

 **7（项目的第 1 行）+ 3（项目的第 2 行）+ **2（项目的第 1 行 + 'U'）** = 12

我知道我可以使用函数 RIGHT(Item, 1) 如果它以 'U' 结尾，它将返回 'U'，但我不知道如何进行所有计算。

编辑：

结果集应该是：

```
| 项目 | 价值 |
|A0001 | 5 |
|A0002 | 2 |
|A0003 | 12 |
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:13:21.220

这将通过获取 ITEM 列的前 5 个字符并按它们分组来总结这些值。这将包括以`U`

```
Select Left(ITEM,5),
        SUM(VALUE)
From Table
Group by Left(ITEM,5) 
```

编辑

假设它`U`始终是最后一个字符并且只出现一次，那么您可以使用此替代方法：

```
Select  Case 
            When CHARINDEX('U', ITEM) > 0 Then LEFT(ITEM, CHARINDEX('U', ITEM)-1)
            Else ITEM
        End,
        SUM(VALUE)
From Table
Group by    Case 
            When CHARINDEX('U', ITEM) > 0 Then LEFT(ITEM, CHARINDEX('U', ITEM)-1)
            Else ITEM
            End 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:28:40.343

在 OP 添加预期的结果集之前，我过度考虑了这个问题。不过，如果所需的输出类似于：

```
|  ITEM  |  VALUE  |
|A0001   |   5     |
|A0002   |   2     |
|A0003   |   10    |
|A0003U  |   12    | 
```

它可能会很有用：

```
SELECT 
   a.ITem
   ,CASE 
      WHEN RIGHT(a.ITEM,1)='U' 
        THEN SUM(b.VALUE) 
        ELSE SUM(a.VALUE) 
      END AS VALUE
FROM table1 a
LEFT JOIN table1 b 
  ON a.ITEM = b.ITEM + 'U' 
  OR (RIGHT(a.ITEM,1)='U' AND a.ITEM = b.ITEM)
GROUP BY a.ITem 
```

**[SQLFiddle 演示](http://sqlfiddle.com/#!6/4e5cf/2)**

**编辑：**

查询简化（实际）版本的问题：

```
Select 
  CASE 
    WHEN RIGHT(ITEM,1) = 'U' THEN SUBSTRING(ITEM,0,LEN(ITEM)) 
    ELSE ITEM 
  END AS ITEM
  ,SUM(VALUE) as VALUE
From Table1
GROUP BY 
   CASE 
    WHEN RIGHT(ITEM,1) = 'U' THEN SUBSTRING(ITEM,0,LEN(ITEM)) 
    ELSE ITEM 
   END 
```

**[SQLFiddle 演示](http://sqlfiddle.com/#!6/4e5cf/5)****

# java - 为什么，在 Java 算术中，上溢或下溢永远不会抛出异常？

> ID：16085286
> 
> 赞同：9
> 
> 时间：2013-04-18T14:08:42.670
> 
> 标签：java, .net, integer-overflow

在 Java 算术运算期间，JVM 不会抛出 Underflow 或 Overflow 异常。很多时候，我们遇到了意想不到的结果，想知道出了什么问题。

而在 .NET 技术的情况下，我们有溢出和 Undeflow 异常。

所以我的问题是，为什么 Java 设计为在算术运算期间不抛出此异常

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:36:04.637

这可能是多种因素的组合：

1.  Java 之前的大型语言使用未经检查的算术。容易发生数值溢出的众所周知的算法倾向于在不依赖检查算术的情况下考虑潜在的溢出。
2.  检查算术在大量使用算术指令的算法中引入了显着的开销，这将使 Java 处于显着劣势，尤其是在基准测试方面。
3.  一些算法依赖于静默数值上溢/下溢。如果检查算术运算，重写这些算法很快就会变得不平凡。
4.  检查算术不是确保内存安全所必需的（与其他 JVM 检查如空指针和数组边界相反）。

.NET 虚拟执行环境（现在是 ECMA-335 标准的一部分）为检查和未检查算术引入了单独的指令，使其能够独立解决使用现代托管语言工作的开发人员的性能和安全问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:28:20.880

正如 Indoknight 所说，这可能与性能有关。Java 提供了处理溢出的工具，所以如果你需要检测它，你可以做到。你也有 long 和 BigInteger 并且可以使用它们来避免你的 int 溢出。

您应该从 stackoverflow 中的类似问题中看到这个答案。 [Java 如何处理整数下溢和上溢以及如何检查它？](https://stackoverflow.com/questions/3001836/how-does-java-handle-integer-underflows-and-overflows-and-how-would-you-check-fo)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:13:58.423

最初创建 Java 时，语言设计者就是这样做的。我不确定为什么，但如果有它肯定会在引发异常时降低性能。

> “语言设计者的教训是，降低静默溢出的可能性可能是值得的。这可以通过提供对不会静默溢出的算术的支持来实现。程序可以抛出异常而不是像 Ada 那样溢出，或者它们可以根据需要自动切换到更大的内部表示以避免溢出，Lisp 也是如此。这两种方法都可能有与之相关的性能损失。减少静默溢出可能性的另一种方法是支持目标类型，但这增加了显着的复杂性类型系统 [Modula-3 1.4.8]。”

礼貌 - Joshua Bloch 和 Neal Gafter 的 Java 谜题陷阱和陷阱

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T14:41:12.173

Java基于C和基于Assembly的C++。在这些语言中都没有抛出异常，部分原因是在设计算术运算时这些语言中没有异常。

首先使用较大的类型（如`long`or`double`或`BigInteger`or ）要安全得多，`BigDecimal`如果您确实确定这是不合适的，则仅使用较小的类型。

如果您使用这些更广泛的类型，它不一定是一个常见问题。

# android - PhoneGap 和谷歌地图

> ID：16085287
> 
> 赞同：0
> 
> 时间：2013-04-18T14:08:42.777
> 
> 标签：android, google-maps, cordova, smartphone

对于一个学校项目，我必须做一个 PhoneGap 应用程序。我想用地图做一个div，然后制作兴趣点。但它不可能在我的 android 模拟器中使用，出现错误“referenceError 找不到变量 google”。我尝试了很多我找到的解决方案，我唯一能做的就是在我的应用程序顶部显示一小块地图，但只能在互联网浏览器上。

```
<!DOCTYPE HTML>  
<html>  
<head>  

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

<script src="jquery.js"></script>
<link rel="stylesheet" href="jquery.mobile-1.3.0.css" />

<script src="jquery.mobile-1.3.0.js"></script>
<script src="jquery.mobile-1.3.0.min.js"></script>

<style type="text/css">
    #footer {
        position:fixed;
        bottom:0;
        left:0;
        right:0;
    }

    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map-canvas { height: 100% }

</style> 

<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKh2nx6OdT6pdPi-KtPNH_6Lc7Aj9z7d4&sensor=true">
</script>

<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"),
        mapOptions);
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

</head>

<body> 
```

如果有人在他的计算机上运行一段代码，或者在我的计算机上发现错误，我会非常高兴。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:19:50.203

The following works for me in my Nexus 4 emulator. Taken mostly from [Google Maps JavaScript API](https://developers.google.com/maps/documentation/javascript/examples/map-simple):

```
<!DOCTYPE HTML>
<html>
    <head>

        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <script scr="jquery.js></script>
        <link rel="stylesheet" href="jquery.mobile-1.3.0.css" />
        <script type="text/javascript" src="cordova-2.4.0.js"></script>
        <script type="text/javascript" src="jquery.mobile-1.3.0.min.js"></script>

    <style type="text/css">
        html, body, #map-canvas {
            margin: 0;
            padding: 0;
            height: 100%;
        }

    </style>

    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

    <script type="text/javascript">
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(-34.397, 150.644),
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map-canvas"),
                                          mapOptions);
        }
        google.maps.event.addDomListener(window, 'load', initialize);
        </script>
</head>

<body>
    <div id="map-canvas"></div>
</body>
</html> 
```

# python - 如何更改金字塔项目的名称？

> ID：16085288
> 
> 赞同：3
> 
> 时间：2013-04-18T14:08:44.613
> 
> 标签：python, pyramid

我刚从金字塔开始，我正在做教程。我想使用一些教程代码作为我将要开始的项目的起点，但我不想将项目名称保留为教程。似乎一旦你给一个项目一个名字，这个名字就会在很多地方使用。有没有办法轻松更改项目名称？我确信我将不得不手动编辑一些东西。只是想知道是否有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:17:07.007

It's not a "project name". It's the name of a python package. Yes, you'll have to search/replace and rename that package everywhere in your code. You're probably better off just starting from a new project with the right name if you are only at the tutorial stage.

# python - subclassing file objects (to extend open and close operations) in python 3

> ID：16085292
> 
> 赞同：23
> 
> 时间：2013-04-18T14:08:57.317
> 
> 标签：python, python-3.x

Suppose I want to extend the built-in file abstraction with extra operations at `open` and `close` time. In Python 2.7 this works:

```
class ExtFile(file):
    def __init__(self, *args):
        file.__init__(self, *args)
        # extra stuff here

    def close(self):
        file.close(self)
        # extra stuff here 
```

Now I'm looking at updating the program to Python 3, in which `open` is a factory function that might return an instance of any of several different classes from the `io` module depending on how it's called. I could in principle subclass all of them, but that's tedious, and I'd have to reimplement the dispatching that `open` does. (In Python 3 the distinction between binary and text files matters rather more than it does in 2.x, and I need both.) These objects are going to be passed to library code that might do just about anything with them, so the idiom of making a "file-like" duck-typed class that wraps the return value of `open` and forwards necessary methods will be most verbose.

Can anyone suggest a 3.x approach that involves as little additional boilerplate as possible beyond the 2.x code shown?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T14:19:26.110

您可以只使用上下文管理器。比如这个：

```
class SpecialFileOpener:
    def __init__ (self, fileName, someOtherParameter):
        self.f = open(fileName)
        # do more stuff
        print(someOtherParameter)
    def __enter__ (self):
        return self.f
    def __exit__ (self, exc_type, exc_value, traceback):
        self.f.close()
        # do more stuff
        print('Everything is over.') 
```

然后你可以像这样使用它：

```
>>> with SpecialFileOpener('C:\\test.txt', 'Hello world!') as f:
        print(f.read())

Hello world!
foo bar
Everything is over. 
```

`with`无论如何，对于文件对象（和其他资源），最好使用上下文块。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-22T02:09:50.937

**tl;dr** *使用上下文管理器。有关它们的重要注意事项，请参阅此答案的底部。*

* * *

Python 3 中的文件变得更加复杂。虽然有一些方法可以用于普通用户类，但这些方法不适用于内置类。一种方法是在实例化之前混合所需的类，但这需要首先知道混合类应该是什么：

```
class MyFileType(???):
    def __init__(...)
        # stuff here
    def close(self):
        # more stuff here 
```

因为类型太多，未来可能会添加更多类型（不太可能，但可能），并且直到调用*之后*我们才能确定返回哪个类型`open`，所以这个方法不起作用。

另一种方法是将我们的自定义类型更改为具有返回的文件`___bases__`，并将返回的实例的`__class__`属性修改为我们的自定义类型：

```
class MyFileType:
    def close(self):
        # stuff here

some_file = open(path_to_file, '...') # ... = desired options
MyFileType.__bases__ = (some_file.__class__,) + MyFile.__bases__ 
```

但这会产生

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __bases__ assignment: '_io.TextIOWrapper' deallocator differs from 'object' 
```

另一种可以与纯用户类一起使用的方法是直接从返回的实例的类动态创建自定义文件类型，然后更新返回的实例的类：

```
some_file = open(path_to_file, '...') # ... = desired options

class MyFile(some_file.__class__):
    def close(self):
        super().close()
        print("that's all, folks!")

some_file.__class__ = MyFile 
```

但同样：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __class__ assignment: only for heap types 
```

因此，看起来在 Python 3 中完全可以使用的最佳方法，幸运的是，在 Python 2 中也可以使用（如果您希望相同的代码库在两个版本上都可以使用，这很有用）是拥有一个自定义上下文管理器：

```
class Open(object):
    def __init__(self, *args, **kwds):
        # do custom stuff here
        self.args = args
        self.kwds = kwds
    def __enter__(self):
        # or do custom stuff here :)
        self.file_obj = open(*self.args, **self.kwds)
        # return actual file object so we don't have to worry
        # about proxying
        return self.file_obj
    def __exit__(self, *args):
        # and still more custom stuff here
        self.file_obj.close()
        # or here 
```

并使用它：

```
with Open('some_file') as data:
    # custom stuff just happened
    for line in data:
        print(line)
# data is now closed, and more custom stuff
# just happened 
```

要记住的重要一点：任何未处理的异常都`__init__`将`__enter__`阻止`__exit__`运行，因此在这两个位置您仍然需要使用`try`/`except`和/或`try`/`finally`成语来确保不会泄漏资源。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-18T14:33:44.807

我遇到了类似的问题，并且需要同时支持 Python 2.x 和 3.x。我所做的类似于以下（[当前完整版](https://bitbucket.org/levitsky/pyteomics/src/64b86cc0240e3e9b813b44240950c7c86773661e/pyteomics/auxiliary.py?at=default#cl-117)）：

```
class _file_obj(object):
    """Check if `f` is a file name and open the file in `mode`.
    A context manager."""
    def __init__(self, f, mode):
        if isinstance(f, str):
            self.file = open(f, mode)
        else:
            self.file = f
        self.close_file = (self.file is not f)
    def __enter__(self):
        return self
    def __exit__(self, *args, **kwargs):
        if (not self.close_file):
            return  # do nothing
        # clean up
        exit = getattr(self.file, '__exit__', None)
        if exit is not None:
            return exit(*args, **kwargs)
        else:
            exit = getattr(self.file, 'close', None)
            if exit is not None:
                exit()
    def __getattr__(self, attr):
        return getattr(self.file, attr)
    def __iter__(self):
        return iter(self.file) 
```

它将所有调用传递给底层文件对象，并且可以从打开的文件或文件名初始化。也可以作为上下文管理器。受到[这个答案](https://stackoverflow.com/a/14095585/1258041)的启发。

# android - android HttpURLConnection catch 如果没有什么可以下载

> ID：16085294
> 
> 赞同：0
> 
> 时间：2013-04-18T14:08:59.403
> 
> 标签：android, androidhttpclient

我正在使用 asynctask 从给定的 URL 下载 xml。我从首选项屏幕获取网址。ñ

现在我正在尝试捕获一些错误，以便应用程序不会崩溃，但会为错误提供一个很好的祝酒词。

如果用户忘记了 URL 之前的“http://”，它已经可以工作了。但是，当 URL 格式良好但没有任何内容可供下载时，应用程序仍然崩溃，我不知道如何捕获此错误：我认为 IOException 会捕获此错误，但事实并非如此。

```
@Override
protected void onPreExecute() {
    progressDialog = new ProgressDialog(mContext);
    progressDialog.setTitle("XML downloaden");
    progressDialog.setMessage("Downloading xml:");
    progressDialog.setMax(100);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progressDialog.show();
}

    @Override
protected Void doInBackground(Void... params) {

    FileOutputStream fos = null;
    InputStream inputStream = null;
    HttpURLConnection conn = null;
    try {
        fos = mContext.openFileOutput("xmlapp.xml", Context.MODE_PRIVATE);

        SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(mContext);
        String start = prefs.getString("pref_key_url",
                "http://sdesigns.be/eindwerk/web6/");

        URL url;
        url = new URL(start + "source/pages.xml");
        conn = (HttpURLConnection) url.openConnection();

            byte[] buffer = new byte[64];
            if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                int bytesToDownload = conn.getContentLength();
                int bytesDownloaded = 0;
                inputStream = conn.getInputStream();
                int len = 0;
                while ((len = inputStream.read(buffer)) > 0) {
                    fos.write(buffer, 0, len);
                    bytesDownloaded += len;
                    publishProgress((float) bytesDownloaded / bytesToDownload);
                }
                inputStream.close();
                fos.close();
            } 

    } catch (MalformedURLException e) {
        this.e = e;
    } catch (IOException e) {
        this.e = e;
    } 
    finally {
         conn.disconnect();
    }

    return null;
}

@Override
protected void onPostExecute(Void result) {

    if (progressDialog != null) {
        progressDialog.dismiss();
        progressDialog = null;
    }
    if (e == null) {
        List<String> images = new XmlParserSax(mContext).getImagesList();
        DownloadImages di = new DownloadImages(mContext);
        di.execute(images);
    } else {
        Toast.makeText(mContext,
                "Check the url!" + e.toString(),
                Toast.LENGTH_LONG).show(); //show the error
    }

} 
```

**编辑**

堆栈跟踪：

```
 04-19 10:18:40.904: E/WindowManager(2425): Activity com.example.eindwerkappv1.Preferences has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41a97848 that was originally added here
04-19 10:18:40.904: E/WindowManager(2425): android.view.WindowLeaked: Activity com.example.eindwerkappv1.Preferences has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41a97848 that was originally added here
04-19 10:18:40.904: E/WindowManager(2425):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
04-19 10:18:40.904: E/WindowManager(2425):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
04-19 10:18:40.904: E/WindowManager(2425):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
04-19 10:18:40.904: E/WindowManager(2425):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
04-19 10:18:40.904: E/WindowManager(2425):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
04-19 10:18:40.904: E/WindowManager(2425):  at android.app.Dialog.show(Dialog.java:278)
04-19 10:18:40.904: E/WindowManager(2425):  at com.example.eindwerkappv1.DownloadXml.onPreExecute(DownloadXml.java:38)
04-19 10:18:40.904: E/WindowManager(2425):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
04-19 10:18:40.904: E/WindowManager(2425):  at android.os.AsyncTask.execute(AsyncTask.java:511)
04-19 10:18:40.904: E/WindowManager(2425):  at com.example.eindwerkappv1.Preferences$1.onPreferenceClick(Preferences.java:48)
04-19 10:18:40.904: E/WindowManager(2425):  at android.preference.Preference.performClick(Preference.java:941)
04-19 10:18:40.904: E/WindowManager(2425):  at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:202)
04-19 10:18:40.904: E/WindowManager(2425):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
04-19 10:18:40.904: E/WindowManager(2425):  at android.widget.AbsListView.performItemClick(AbsListView.java:1068)
04-19 10:18:40.904: E/WindowManager(2425):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2525)
04-19 10:18:40.904: E/WindowManager(2425):  at android.widget.AbsListView$1.run(AbsListView.java:3186)
04-19 10:18:40.904: E/WindowManager(2425):  at android.os.Handler.handleCallback(Handler.java:605)
04-19 10:18:40.904: E/WindowManager(2425):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 10:18:40.904: E/WindowManager(2425):  at android.os.Looper.loop(Looper.java:137)
04-19 10:18:40.904: E/WindowManager(2425):  at android.app.ActivityThread.main(ActivityThread.java:4441)
04-19 10:18:40.904: E/WindowManager(2425):  at java.lang.reflect.Method.invokeNative(Native Method)
04-19 10:18:40.904: E/WindowManager(2425):  at java.lang.reflect.Method.invoke(Method.java:511)
04-19 10:18:40.904: E/WindowManager(2425):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
04-19 10:18:40.904: E/WindowManager(2425):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
04-19 10:18:40.904: E/WindowManager(2425):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:33:01.450

`conn.setReadTimeout(10000);`您可能需要在打开连接之前通过 using 来考虑 Socket 超时的可能性，然后添加一个 catch 子句来处理`SocketTimeoutException`。请注意，我选择的 10000 毫秒超时是任意的。

一个主要问题是您没有正确处理服务器返回 HTTP_OK 以外的响应时发生的情况。即使`(conn.getResponseCode() == HttpURLConnection.HTTP_OK)`为假，也不会捕获到异常。`MalformedURLException`仅在 URL 中的格式错误以及`IOException`您尝试从关闭的套接字或类似内容中读取的情况下抛出。没有什么可以捕获 HTTP_NOT_FOUND。我想快速解决这个问题的方法是`else`在`if(conn.getResponseCode() == HttpURLConnection.HTTP_OK)`.

```
else {
    e = new Exception();
} 
```

这样，在 onPostExecute() 中 e 就不会为空。这当然不是很好的做法，但它适用于您的代码。

**编辑**：以下代码对我来说很好。我必须填写一些你没有包括在内的领域。

```
private class DownloadTask extends AsyncTask<Void, Float, Void> {
    Context mContext;
    ProgressDialog progressDialog;
    Exception e;

    DownloadTask(Context context) {
        mContext = context;
    }

    @Override
    protected void onPreExecute() {
        progressDialog = new ProgressDialog(mContext);
        progressDialog.setTitle("XML downloaden");
        progressDialog.setMessage("Downloading xml:");
        progressDialog.setMax(100);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Float... values) {
        for( float val : values) {
            progressDialog.setProgress((int)(val*100f));
        }
    }

    @Override
    protected Void doInBackground(Void... params) {

        FileOutputStream fos = null;
        InputStream inputStream = null;
        HttpURLConnection conn = null;
        try {
            fos = mContext.openFileOutput("xmlapp.xml", Context.MODE_PRIVATE);

            SharedPreferences prefs = PreferenceManager
                    .getDefaultSharedPreferences(mContext);
            String start = prefs.getString("pref_key_url",
                    "http://sdesigns.be/eindwerk/web6/");

            URL url;
            url = new URL(start);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setRequestMethod("GET");
            conn.setReadTimeout(50000);
            conn.connect();

                byte[] buffer = new byte[64];
                if (conn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                    int bytesToDownload = conn.getContentLength();
                    int bytesDownloaded = 0;
                    inputStream = conn.getInputStream();
                    int len = 0;
                    while ((len = inputStream.read(buffer)) > 0) {
                        fos.write(buffer, 0, len);
                        bytesDownloaded += len;
                        publishProgress((float) bytesDownloaded / bytesToDownload);
                    }
                    inputStream.close();
                    fos.close();
                } else {
                    e = new Exception("URL not found.");
                }

        } catch (Exception e) {
            //since you don't differentiate exceptions and just check if e is null, you might as well just have one catch block
            this.e = e;
        }
        finally {
            try {
             conn.disconnect();
            } catch (Exception e) {}
            conn = null;
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        if (progressDialog != null) {
            progressDialog.dismiss();
            progressDialog = null;
        }
        if (e == null) {
            Toast.makeText(mContext,
                    "Success!",
                    Toast.LENGTH_LONG).show();
            List<String> images = new XmlParserSax(mContext).getImagesList();
            DownloadImages di = new DownloadImages(mContext);
            di.execute(images);
        } else {
            Toast.makeText(mContext,
                    "Check the url!" + e.toString(),
                    Toast.LENGTH_LONG).show(); //show the error
        }

    }
} 
```

# javascript - URL-Encode javascript

> ID：16085295
> 
> 赞同：-4
> 
> 时间：2013-04-18T14:09:00.803
> 
> 标签：javascript, html

I'm trying to url-encode...How do I this? this syntax is wrong ...

Here is my code:

```
 <div class="post-btn-share">
<div class="addthis_toolbox addthis_default_style">
    <div class="float-all">
        <script>
            var url = urlencode('http://mypage.com/visualizar_foto.php?img=55&user=2&xx=');
            alert(url);
            </script>
        <iframe src="http://www.facebook.com/plugins/like.php?href=" + url + "&send=true&layout=standard&width=300&show_faces=true&action=like&colorscheme=light&font&height=80" frameborder="0" style="border:none;" scrolling="no" width="320" height="240"></iframe>
        <div class="float-all">

        </div>
        <div class="float-all">

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:10:51.587

Try with :

```
var url = encodeURIComponent('http://mypage.comvisualizar_foto.php?img=55&user=2&xx='); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:34:26.120

```
<iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo urlencode('http://mypage.com/visualizar_foto.php?img=55&user=2&xx='); ?>&send=true&layout=standard&width=300&show_faces=true&action=like&colorscheme=light&font&height=80" frameborder="0" style="border:none;" scrolling="no" width="320" height="240"></iframe> 
```

# c++ - C++：在程序逻辑/条件命名空间中使用命名空间？

> ID：16085296
> 
> 赞同：0
> 
> 时间：2013-04-18T14:09:03.287
> 
> 标签：c++, namespaces

这是一个技术问题，也是（如果在技术上可行的话）一个风格问题。在我的代码中，我有一系列加载和操作文件的函数。对于不同的语法，这些函数存在于不同的命名空间中，因此：

```
namespace typeA {
  void load();
  void manipulate();
};

namespace typeB {
  void load();
  void manipulate();
}; 
```

在这个最小的例子中，显然我可以简单地有一个检查文件类型的子句，然后根据需要调用 typeA:load() 和 typeB:load() 等。

但是，我想知道是否也可以使用命名空间别名来做到这一点？这将使代码更清晰，因为在命名空间中有几十个函数调用，它们都需要一个单独的 if/else 子句。

我试过的：

```
namespace my_type = (ft == "type_A") ? typeA : typeB;
...
my_type::load(); 
```

它不会在命名空间别名分配行中出现错误。

有没有另一种方法来做到这一点/处理这种情况的普遍接受的干净方式是什么？

我想每个文件类型的虚拟类和继承将是一种选择。还有其他人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:12:32.477

没有办法做这样的命名空间别名。

3.4.6 using-directives 和命名空间别名 [basic.lookup.udir] 1 在 using-directive 或 namespace-alias-definition 中，在查找命名空间名称或仅嵌套名称说明符命名空间中的名称期间名称被考虑。

您可以使用[部分模板专业化](https://stackoverflow.com/questions/1797380/template-specialization-with-a-templatized-type)来解决这个问题。

# jquery - How to display error message only in OnFailure of Ajax.BeginForm in MVC3?

> ID：16085303
> 
> 赞同：12
> 
> 时间：2013-04-18T14:09:18.973
> 
> 标签：jquery, asp.net-mvc-3, ajax.beginform

I have this simple ajax form in my MVC3 app, that sends email message:

```
@using (Ajax.BeginForm("SendMessage", new AjaxOptions { 
    LoadingElementId = "wait", 
    OnSuccess = "loadMessages", 
    OnFailure = "showError" }))
{
    <input type="text" name="message" placeholder="Message" />
    <input type="submit" name="submit" value="Send" />
} 
```

If the action fails to send a message, it throws the exception. The exception is handled and displayed in the showError(error){} javascript function:

```
function showError(error) { 
    $("#error").text(error.responseText);
}; 
```

The problem is: error.responseText is the **html dump of the entire error page.**

**I need to display only the exception error message** (whatever is in ex.Message in MVC3).

The implementation of "public ActionResult SendMessage(string message) { }" is irrelevant.

I need to know how to display the exception's message only in showError(error) javascript handler.

Thanks a bunch.

```
 [HttpPost]
    public ActionResult SendMessage(string message)
    {
        MailMessage mail = new MailMessage();
        SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
        mail.From = new MailAddress("sender@gmail.com");
        mail.Subject = "Some Message";
        mail.Body = message;
        mail.To.Add("recepient@gmail.com");
        SmtpServer.Send(mail);
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T13:08:47.873

您无法处理 OnFailure 方法中的每一个异常。因为如果响应状态不在 200 范围内，就会调用[OnFailure 。](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxoptions.onfailure(v=vs.98).aspx)所以你可以像这样处理你的场景：

```
 [HttpPost]
    public ActionResult SendMessage(string message)
    {
        MailMessage mail = new MailMessage();
        ActionResult response = null;
        SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
        mail.From = new MailAddress("sender@gmail.com");
        mail.Subject = "Some Message";
        mail.Body = message;
        mail.To.Add("recepient@gmail.com");
        try
        {
            SmtpServer.Send(mail);
            response = Content("Success");
        }
        catch (Exception ex)
        {
            response = Content(ex.Message);
        }
        return response;

    } 
```

在此代码中，如果邮件发送成功，则我已返回响应“成功”，否则我已返回实际错误，并且在 javascript 中我已像这样处理此响应：

```
 function loadMessages(error) {
    if (error == 'Success') {
        alert("Mail Sent successfully");
    }
    else {
        $("#error").text(error);
    } 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-15T23:01:04.350

为了在我自己的解决方案中解决这个问题，我使用了 HttpStatusCodeResult 类。这是我有参考的代码：

```
try
{
    // Some code that can error
}
catch (Exception e)
{
    return new HttpStatusCodeResult(HttpStatusCode.InternalServerError, e.Message);
}

// View
OnFailure = "alert(error);" 
```

这仍然会触发客户端上的所有正常错误行为，包括在浏览器控制台中放置 500 错误，并且应该与您已经用来显示错误的脚本完美配合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:19:08.187

您可以在控制器中捕获您的异常并返回确切的错误消息。就像是：

```
[HttpPost]
public ActionResult SendMessage(string message)
{
    try 
    {
        MailMessage mail = new MailMessage();
        SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
        mail.From = new MailAddress("sender@gmail.com");
        mail.Subject = "Some Message";
        mail.Body = message;
        mail.To.Add("recepient@gmail.com");
        SmtpServer.Send(mail);
        return null;
    } 
    catch (e)
    {
        throw new HttpException(500, e.Message);
    }
} 
```

在这种情况下，您可能需要检查响应并`showError`相应地更新您的 javascript。

# sql-server-2008 - SP central admin Cannot connect to the configuration database after reinstalling sql server 2008 r2

> ID：16085308
> 
> 赞同：1
> 
> 时间：2013-04-18T14:09:30.927
> 
> 标签：sql-server-2008, sharepoint, sharepoint-2010

I have just re-installed SQL Server 2008 R2 in my Windows Server, but after installing the SQL Server, I am unable to open my central admin. On opening the central admin its showing me the message -

> Cannot connect to the configuration database

I am unable to open any of my site collection too. On opening a site collection its showing

> Cannot connect to the configuration database. Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
> 
> Exception Details: Microsoft.SharePoint.WebPartPages.WebPartPageUserException: Cannot connect to the configuration database.
> 
> Source Error:
> 
> An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.
> 
> Stack Trace:
> 
> [WebPartPageUserException: Cannot connect to the configuration database.]
> Microsoft.SharePoint.ApplicationRuntime.SPRequestModule.EnsureInitialize(HttpRequest request) +740
> Microsoft.SharePoint.ApplicationRuntime.SPRequestModule.BeginRequestHandler(Object oSender, EventArgs ea) +164
> System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +171

I have checked my SQL Server configuration manager and there is no sharepoint instance there too, I am afraid if my sharepoint db has been deleted. If yes, then is there anyway to restore it and how to make my sharepoint site collection and central admin up and running. Any help will be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:08:11.590

重新安装之前备份数据库了吗？如果没有，那么您的共享点数据库就消失了。恐怕您对此无能为力。

检查您的数据库，是否有名为 WSS_Content_..... 和 SharePoint_Config.... 的数据库？如果有，也许你的 SP 没有使用 \sharepoint 实例。然后，您可以手动将管理员帐户添加到数据库中，这样您就可以打开 SP 站点了。但是，根据您的描述，情况可能并非如此。

另一种方式是：打开SP管理shell，运行get-spcontentdatabase

它显示什么吗？

祝你好运。

# javascript - JQuery .hover / .on('mouseleave') 无法正常运行

> ID：16085310
> 
> 赞同：0
> 
> 时间：2013-04-18T14:09:40.433
> 
> 标签：javascript, jquery, hover, mouseout

我正在尝试使用非常基本的悬停功能，但我似乎无法让 mouseout/mouseleave 正常运行。

代码：

```
$(document).ready(function(){

$('.SList').css('display','none');

$(".MList a").on('mouseenter',
  function(){
    var HTMLArr = $(this).children().html().split(':'); 
    $(this).children('p').replaceWith('<p>'+HTMLArr[0]+':&nbsp&#9700;</p>');
    $(this).siblings('.SList').slideDown('slow');
  })
  .on('mouseleave',function(){
    var HTMLArr = $(this).children().html().split(':'); 
    $(this).children('p').replaceWith('<p>'+HTMLArr[0]+':&nbsp&#9698;</p>');
    $(this).siblings('.SList').slideUp('slow');
  });
}); 
```

mouseenter 工作正常，但它甚至没有输入 mouseleave 的代码。任何想法将不胜感激。

**[小提琴](http://jsfiddle.net/XxZeroxX/vzQhV/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:40:58.597

看到这个： [演示](http://jsfiddle.net/vSdtE/)

```
$(".MList a").on('mouseenter',
 function(){
  var HTML = $(this).children('p').html(); 
  $(this).children('p').html(HTML.replace('◢','◤'));
  $(this).siblings('.SList').slideDown('slow');
})
.on('mouseleave',function(){
  var HTML = $(this).children('p').html(); 
  $(this).children('p').html(HTML.replace('◤','◢'));
  $(this).siblings('.SList').slideUp('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:38:03.060

您对活动的锚点有疑问。

改用这个：

```
$(".MList a").on('mouseenter', function () {
    var myP = $(this).children('p');
    var HTMLArr = myP.text().split(':');
    myP.html( HTMLArr[0] + ':&nbsp&#9700;');
    $(this).next('.SList').slideDown('slow');
}).on('mouseleave', function () {
    var myP = $(this).children('p');
    var HTMLArr = myP.text().split(':');
    myP.html( HTMLArr[0] + ':&nbsp&#9698;');
    $(this).next('.SList').slideUp('slow');
}); 
```

你有同样的点击问题，然后重做同样的事情。所以，返工和重用：（你甚至可以做得更好，但这表明了它的开始）

```
$(".MList a").on('mouseenter', function () {
    down($(this).find('p').eq(0));
}).on('mouseleave', function () {
    up($(this).find('p').eq(0));
});
$(".MList a").click(function () {
    if ($(this).siblings('.SList').is(':visible')) {
        up($(this).find('p').eq(0));
    } else {
        down($(this).find('p').eq(0));
    }
});

function up(me) {
    var HTMLArr = me.text().split(':');
    me.html(HTMLArr[0] + ':&nbsp&#9698;');
    me.parent().next('.SList').slideUp('slow');
}

function down(me) {
    var HTMLArr = me.text().split(':');
    me.html(HTMLArr[0] + ':&nbsp&#9700;');
    me.parent().next('.SList').slideDown('slow');
} 
```

# wpf - Generating Print ready contents with WPF with paper precision

> ID：16085312
> 
> 赞同：0
> 
> 时间：2013-04-18T14:09:50.333
> 
> 标签：wpf, xaml, flowdocument, xpsdocument, fixeddocumentsequence

I am new to WPF and c# as a whole. I have experience from programming language like PHP, HTML and Javascript so I was able to cope quickly.

I have a project that is used to print PINs and Serial Number on a card. Let say the card is A4 and on the paper there are 4 rows and 3 columns of printed cards.

My problem is, I dont really know how to generate the dynamic document and the approach to use. Since the content is not that I have to just make it available on the paper before hand, it has to be placed on a particular position on the paper. Inches calculation will strictly be adhered to.

The link below illustrates an explanation of what I am talking about with border exclusive. All I want to generate is the PIN and serial in this way on a specific paper size.

[http://ecloudpack.com/grid.png](http://ecloudpack.com/grid.png)

Dont get me wrong, speaking of flowDocuments, I think I can bring out something but I am faced with the challenge of precision of position on the paper and making sure the pagination is correct and making sure the margin as specified is what is generated.

I have a Monday deadline and I have been trying.

Is there anyone that can help.

# php - zend framework2 proper way to basic login authentication

> ID：16085313
> 
> 赞同：1
> 
> 时间：2013-04-18T14:09:56.533
> 
> 标签：php, zend-framework2

I'm currently learning Zend2\. My first attempt is create secured application with basic login form. So my first idea was to create a common SecuredController, that checks for user identity in his constructor and redirects if necessary. I saw that solution for Zend1 and was working:

```
class SecuredController extends AbstractActionController
{
    function __construct()
    {
        $auth = new AuthenticationService();

        if ( $auth->hasIdentity() ) {
            return $this->redirect()->toRoute("ts");
        }

        return $this->redirect()->toRoute( "login" );
    }
} 
```

Then extending some other controllers used throughout appliation:

```
class MainController extends SecuredController
{
    public function indexAction()
    {
        return new ViewModel();
    }
} 
```

I omitted LoginController and IndexController(same as MainController now), but you get the idea how it is set up. Confing for module looks like this:

```
<?php

namespace Main;

return array(
    'controllers' => array(
        'invokables' => array(
            'Main\Controller\Secured' => 'Main\Controller\Common\SecuredController',
            'Main\Controller\Login' => 'Main\Controller\LoginController',
            'Main\Controller\Main' => 'Main\Controller\MainController',
            'Main\Controller\Index' => 'Main\Controller\IndexController',
        ),
    ),

    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        'controller' => 'Main\Controller\Index',
                        'action' => 'index',
                    ),
                ),
            ),
            'main' => array(
                'type' => 'segment',
                'options' => array(
                    'route'    => '/ts[/][:action]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    ),
                    'defaults' => array(
                        'controller' => 'Main\Controller\Main',
                        'action'     => 'index',
                    ),
                ),
            ),
            'login' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route' => '/login',
                    'defaults' => array(
                        'controller' => 'Main\Controller\Login',
                        'action' => 'login',
                    ),
                ),
            ),
            'logout' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route' => '/logout',
                    'defaults' => array(
                        'controller' => 'Main\Controller\Login',
                        'action' => 'logout',
                    ),
                ),
            ),
        ),
    ),

    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions' => true,
        'doctype' => 'HTML5',
        'not_found_template' => 'error/404',
        'exception_template' => 'error/index',
        'template_map' => array(
            'layout/login' => __DIR__ . '/../view/layout/login.phtml',
            'layout/layout' => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/main/index/index.phtml',
            'error/404' => __DIR__ . '/../view/error/404.phtml',
            'error/index' => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),

    'doctrine' => array(
        'driver' => array(
            __NAMESPACE__ . '_driver' => array(
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                'cache' => 'array',
                'paths' => array( __DIR__ . '/../src/' . __NAMESPACE__ . '/Entity' )
            ),
            'orm_default' => array(
                'drivers' => array(
                    __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
                )
            )
        )
    ),
); 
```

But unfortunately its not working I have error:

```
Url plugin requires that controller event compose a router; none found 
```

Anyone has a clue how implement my scenario? Securing whole aplication and redirecting to /login route users without identity.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-26T21:10:34.463

添加你的超级控制器。

```
namespace Admin\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\Authentication\AuthenticationService;
...

class AdminController extends AbstractActionController
{

public function onDispatch(\Zend\Mvc\MvcEvent $e)
{
    /**
     * Verifica se o usuario se encontra logado, caso contrario redirecion ele para o login
     */
    $this->authService = new AuthenticationService();
    if(!$this->authService->hasIdentity()){
        $this->redirect()->toRoute("login");
    }
        return parent::onDispatch($e);
}
 ...
} 
```

我相信这将适用于您的项目设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T06:57:11.803

[认证模块宽度登录页面](http://samsonasik.wordpress.com/2012/10/23/zend-framework-2-create-login-authentication-using-authenticationservice-with-rememberme/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:37:48.540

问题1）

```
return $this->redirect()->toRoute("ts"); 
```

您的配置中没有名为“ts”的路由，您需要在使用 toRoute() 时设置路由。

问题2）

您没有正确设置 AuthenticationService。您需要指定一个适配器才能使用它。

不要在控制器中实例化它，而是在您的 ServiceManager 配置中定义它。

配置：

```
'My\AuthService' => function($sm) {
    $auth = new \Zend\Authentication\AuthenticationService();
    $auth->setAdatper(/**  LDAP or What ever **/);

    return $auth;
}, 
```

控制器：

```
// already setup for you in the service manager
$authService = $this->getServiceLocator()->get('My\AuthService'); 
```

如果您想要开箱即用的东西允许注册用户等，您可以随时尝试 zfcUser 模块： [https ://github.com/ZF-Commons/ZfcUser](https://github.com/ZF-Commons/ZfcUser)

# ms-access - Saving Access Reports as PDF files

> ID：16085318
> 
> 赞同：1
> 
> 时间：2013-04-18T14:10:07.360
> 
> 标签：ms-access, pdf

I am currently in the process of generating a report in access which, once generated, should be saved to a save location to user puts in.

Here's my block of code.

```
ReportName = "Appraisal_" & Trim(Str(Year)) & "_" & Me.empnr & "_" & Veilig(Me.empnr) & "_" & Format(Now(), "YYYY_MM_DD_HH_MM_SS")
DoCmd.CopyObject , ReportName , acReport, "rpt_beoordelen"
DoCmd.OpenReport ReportName , acViewPreview, , "EmployeeNr='" & Me.empnr & "'  and year=" & Me.Year
DoCmd.OutputTo acOutputReport, "", acFormatPDF, , True
DoCmd.Close acReport, ReportName 
```

This generates and displays the report with the correct values. It asks for save location. And, once given, tries to save the file to given location. It quickly flashes a printing PDF to give location window.

After this the program stops. No file can be found at the given location and the report is still opened. Debugging the application shows me that

```
DoCmd.Close acReport, ReportName 
```

is never reached. I do not get a errormessage and i have no clue what is going wrong. Could anyone give me a solution to this problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:04:30.580

如果您无法`DoCmd.OutputTo`通过将“活动对象”`ObjectName`留空（参考：[此处](http://msdn.microsoft.com/en-us/library/office/ff192065.aspx)）来使用“活动对象”，那么您可以尝试以下操作：

打开“rpt_beoordelen”报告并将其`Record Source`查询保存为名为“rpt_beoordelen_base_data”的已保存查询。使用一些通用 SQL 创建一个“rpt_beoordelen_data”保存的查询，例如...

```
SELECT * FROM rpt_beoordelen_base_data 
```

`Record Source`...然后为 [rpt_beoordelen] 报告制作“rpt_beoordelen_data” 。

现在将代码从您的问题更改为如下所示：

```
ReportName = "Appraisal_" & Trim(Str(Year)) & "_" & Me.empnr & "_" & Veilig(Me.empnr) & "_" & Format(Now(), "YYYY_MM_DD_HH_MM_SS")
DoCmd.CopyObject , ReportName , acReport, "rpt_beoordelen"
Dim cdb As DAO.Database
Set cdb = CurrentDb
Dim qdf As DAO.QueryDef
Set qdf = cdb.QueryDefs("rpt_beoordelen_data")
qdf.SQL = "SELECT * FROM rpt_beoordelen_base_data WHERE EmployeeNr='" & Me.empnr & "'  and year=" & Me.Year
Set qdf = Nothing
DoCmd.OutputTo acOutputReport, ReportName, acFormatPDF 
```

这会将您的调用更改`DoCmd.OutputTo`为不依赖于“活动对象”的调用，并且可能会产生您想要的结果。（FWIW，这是我使用这种方法生成 PDF 版本报告的唯一方法。）

# java-ee-6 - ServletRequestListener - Getting the userprincipal returns null

> ID：16085324
> 
> 赞同：2
> 
> 时间：2013-04-18T14:10:17.290
> 
> 标签：java-ee-6, embedded-jetty, servlet-3.0, basic-authentication

I'm having a web-application that is secured with HTTP-Basic auth. I also implemented a filter using the `ServletRequestListener` interface. Now when the filter calls the `requestInitialized` method, the getUserPrincipal-Method of the request returns null. But when I check the request headers, the authorization-header is set with the encrypted value. Here's the code:

```
@Override
public void requestInitialized(ServletRequestEvent e) {

  HttpServletRequest request = (HttpServletRequest) e.getServletRequest();

  //p is null
  Principal p = request.getUserPrincipal();

  Enumeration<String> enH = request.getHeaders("Authorization");
  while (enH.hasMoreElements()) {
    String s = enH.nextElement();
    System.out.println(s);
    //prints. 
    //Basic c3RhY2tvdmVyZmxvdzpteXBhc3N3b3Jk
  }
} 
```

Why is the userprincipal not initialized?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:48:43.243

您可能没有为嵌入式码头设置所需的安全层。

这是在[Jetty 嵌入式示例源代码树](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded)[中](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/examples/embedded/src/main/java/org/eclipse/jetty/embedded/SecuredHelloHandler.java)找到的示例。

```
package org.eclipse.jetty.embedded;

import java.util.Collections;
import java.util.HashSet;
import java.util.Set;

import org.eclipse.jetty.security.ConstraintMapping;
import org.eclipse.jetty.security.ConstraintSecurityHandler;
import org.eclipse.jetty.security.HashLoginService;
import org.eclipse.jetty.security.LoginService;
import org.eclipse.jetty.security.authentication.BasicAuthenticator;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.util.security.Constraint;

public class SecuredHelloHandler
{
    public static void main(String[] args) throws Exception
    {
        Server server = new Server(8080);

        LoginService loginService = new HashLoginService("MyRealm","src/test/resources/realm.properties");
        server.addBean(loginService); 

        ConstraintSecurityHandler security = new ConstraintSecurityHandler();
        server.setHandler(security);

        Constraint constraint = new Constraint();
        constraint.setName("auth");
        constraint.setAuthenticate( true );
        constraint.setRoles(new String[]{"user", "admin"});

        ConstraintMapping mapping = new ConstraintMapping();
        mapping.setPathSpec( "/*" );
        mapping.setConstraint( constraint );

        Set<String> knownRoles = new HashSet<String>();
        knownRoles.add("user");
        knownRoles.add("admin");

        security.setConstraintMappings(Collections.singletonList(mapping), knownRoles);
        security.setAuthenticator(new BasicAuthenticator());
        security.setLoginService(loginService);
        security.setStrict(false);

        // Your Handler (or Servlet) that should be secured
        HelloHandler hh = new HelloHandler();

        security.setHandler(hh);

        server.start();
        server.join();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T08:54:30.400

我通过使用过滤器而不是侦听器来解决它..

```
@WebFilter(urlPatterns = { "/*" })
public class RequestFilter implements Filter {

@Override
public void doFilter(ServletRequest req, ServletResponse res,
        FilterChain fChain) throws IOException, ServletException {
    HttpServletRequest hReq = (HttpServletRequest) req;
    //p is not null anymore
    Principal p = hReq.getUserPrincipal();
    fChain.doFilter(hReq, res);
}

@Override
public void destroy() {
}

@Override
public void init(FilterConfig config) throws ServletException {
}
} 
```

# mongodb - 如何在 mongodb 聚合 $project 中创建虚拟字段和硬编码值？

> ID：16085331
> 
> 赞同：2
> 
> 时间：2013-04-18T14:10:45.543
> 
> 标签：mongodb

考虑我想显示以下文档：

```
 {
     "_id" : ObjectId("512bc95fe835e68f199c8686"),
     "AuthorName": "dave", 
     "VirtualField" : "hardcoded_Value"
   } 
```

存储在 MongoDB 中的实际文档

```
 {
     "_id" : ObjectId("512bc95fe835e68f199c8686"),
     "author": "dave",
     "score" : 80
   } 
```

我可以做类似的事情：

```
collection.aggregate([
    { $project: {
        _id: 1,
        "AuthorName": "$author",
        "VirtualField": "hardcoded_Value"
       }
    }
    ], function (err, doc) {
        if (err) return console.error(err);
        console.dir(doc);
    }
); 
```

谁能告诉如何做同样的事情？

注意：我不想在检索文档后做同样的事情。

* * *

出现错误：

```
[MongoError: exception: field path references must be prefixed with a '$' ('hardcoded_Value ]
  name: 'MongoError',
  errmsg: 'exception: field path references must be prefixed with a \'$\' (\'hardcoded_Value\'',
  code: 15982,
  ok: 0 } 
```

* * *

使用时出现以下错误：`"VirtualField": {$concat: ["hardcoded_Value"]}`

```
{ [MongoError: exception: invalid operator '$concat']
  name: 'MongoError',
  errmsg: 'exception: invalid operator \'$concat\'',
  code: 15999,
  ok: 0 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:23:08.143

你应该`concat`在这里使用：http: [//docs.mongodb.org/manual/reference/aggregation/#exp._S_concat](http://docs.mongodb.org/manual/reference/aggregation/#exp._S_concat)

像这样：

```
"VirtualField": {$concat: ["hardcoded_Value"]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T07:07:40.563

有很多创造性的方法可以解决这个问题。

`concat`从@Sammaye使用就是其中之一。但它只能从 MongoDB 2.4 开始使用。

我做了一个使用`$ifNull`

```
 "VirtualField": {$ifNull: [null,"hardcoded_Value"]} 
```

这样可行。

但是，您可能已经注意到这是一个常见功能，并且已在此 JIRA 中请求。

[https://jira.mongodb.org/browse/SERVER-5991](https://jira.mongodb.org/browse/SERVER-5991)

# php - jQuery Ajax 不提交数据

> ID：16085333
> 
> 赞同：1
> 
> 时间：2013-04-18T14:10:52.027
> 
> 标签：php, html, ajax, jquery

我决定第一次使用 ajax 来提交我的数据，但我遇到了问题。表单似乎已重置，但没有数据发送到数据库，我可能在这里遗漏了一些明显的东西：

jQuery（目前包含在我的文件头中）

```
<script>
// jQuery to submit form data via AJAX to add a recovery pack
$.ajax({
   type:'POST',
   url: 'addrpack.php',
   data:$('#rpack_add_form').serialize(),
   success: function(response)
   {
    $('#rpack_add_form').find('.form_result').html(response);
}}
</script> 
```

PHP/HTML 表单

```
 <form id="rpack_add_form" class='small_form' name='rpack_form' method='post' onsubmit="return submitForm();">
        Contract:
        <select id="contract_select" name="contract" onchange="showContract(this)">
            <option value='0'>Select Contract</option>
                <?php 
                $sth = $conn->query("SELECT * FROM `contracts`");
                while($row = $sth->fetch(PDO::FETCH_ASSOC))
                {
                    echo '<option value='.$row['contracts_id'].'>'.$row['contracts_name'].'</option>';
                }
                ?>
        </select>
            <div id="contract1" class="admin_box">
                Prefix: <input name='prefix' type='text' id='prefix'><br />
                Number: <input name='number' type='text' id='number'><br />
                Suffix: <input name='suffix' type='text' id='suffix'><br />
            </div>
            <div id="contract2" class="admin_box">
                <p>Sapce for 2nd form at a later date</p>
            </div>
            <div id="contract3" class="admin_box">
                <p>Sapce for 3rd form at a later date</p>
            </div>
        Received:
            <select id="select_receive" name="received" onchange="showLocation(this)">
                <option value="0">No</option>
                <option value="1">Yes</option>
            </select><br />
        <div id="location_box" style="display: none; padding-top: 5px;">Location: <input name='location' type='text' id='location'></div>
        <input class='button' type=submit value='Add Recovery Pack' name='add_rpack'>            
    </form>
    <div class="form_result"> </div>
<a class='hide_div' href='javascript:void(0);' onclick='hideRdiscDiv()'>Close</a> 
```

addrpack.php 的 PHP（当我从上面删除 ajax 部分并正常提交时，此代码完全有效）

```
 <?php
            session_start();
            include_once 'config.php';
            include_once 'connect.php';
            $prefix = $_POST['prefix'];
            $number = $_POST['number'];
            $suffix = $_POST['suffix'];
            $contract = $_POST['contract'];
            $received = $_POST['received'];
            $location = $_POST['location'];

            //Check if a number has been entered
            if (empty ($number))
            {
                echo "You need to enter a number";
            }else
            {
                $sth = "INSERT INTO `rpacks` (rpacks_prefix, rpacks_number, rpacks_suffix, rpacks_contract, rpacks_receive, rpacks_location) VALUES (:prefix, :number, :suffix, :contract, :received, :location)";
                $q = $conn->prepare($sth);
                $q->execute(array(':prefix'=>$prefix,':number'=>$number,':suffix'=>$suffix,':contract'=>$contract, ':received'=>$received, ':location'=>$location));
                echo "Added";
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:11:42.523

可能是语法错误 - 缺失`);`

```
$('#rpack_add_form').submit(function(){
    $.ajax({
       type:'POST',
       url: 'addrpack.php',
       data:$('#rpack_add_form').serialize(),
       success: function(response)
       {
        $('#rpack_add_form').find('.form_result').html(response);
       }
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:12:47.830

```
$.ajax({
   type:'POST',
   url: 'addrpack.php',
   data:{"data":$('#rpack_add_form').serialize()},
   success: function(response)
   {
    $('#rpack_add_form').find('.form_result').html(response);
   }
});//Syntax misatke 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:36:32.560

不确定你的`onsubmit="return submitForm();"`in`form`做了什么，但你必须阻止`submit`按钮发送数据，而是让它使用你的 ajax 函数。

```
$(function(){
    $('.button').click(function(e){
      e.preventDefault();
        $.ajax({
          type:'POST',
          url: 'addrpack.php',
          data:$('#rpack_add_form').serialize(),
          success: function(response) {
             $('#rpack_add_form').find('.form_result').html(response);
          }
      });
    });
 }); 
```

# glimpse - Resource with name 'glimpse_config' could not be found

> ID：16085335
> 
> 赞同：0
> 
> 时间：2013-04-18T14:10:55.097
> 
> 标签：glimpse

I had a Glimpse install working fine, and then updated from 1.2 to 1.3, and now when I go to glimpse.axd, I see "Resource with name 'glimpse_config' could not be found."

This is an ASP.NET 4.5 site (DotNetNuke 7.0.5), with Glimpse.Core 1.3 and Glimpse.AspNet 1.2.1 (previously, it has Glimpse.Core 1.2, Glimpse.AspNet 1.2, and Glimpse.Ado 1.2), running on IIS 8.

Any ideas about what I should be investigating to see where the error is coming from?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:42:04.090

我想我想通了。我有一个自定义安全策略，要求我登录。当安全策略关闭 Glimpse 时，看起来这就是我得到的响应。

# android - Getting the current location of the user for Android

> ID：16085336
> 
> 赞同：1
> 
> 时间：2013-04-18T14:10:55.843
> 
> 标签：android, location, cellular-network

I am building an Android application and I would like to locate the phone WITHOUT the help of GPS or Internet. Instead, I would like to locate the phone with the help of the cellular signals. How can this be achieved? PS. I am kind of new. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:15:01.587

您可以请求系统根据 NetworkProvider 向您显示位置更新。可以通过使用给定的 NETWORK_PROVIDER 参数请求位置更新来完成

例如看下面：

```
 LocationManager mlocManager = (LocationManager)contextWrapper.getSystemService(Context.LOCATION_SERVICE); 
    mlocManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 60000, 0, this); 
```

下面从Android文档复制

// 向位置管理器注册监听器以接收位置更新 locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); requestLocationUpdates() 中的第一个参数是要使用的位置提供程序的类型（在这种情况下，用于蜂窝塔和基于 Wi-Fi 的位置的网络位置提供程序）。

# maven - Maven 仅在所有模块构建成功时才部署多模块项目

> ID：16085337
> 
> 赞同：5
> 
> 时间：2013-04-18T14:10:56.360
> 
> 标签：maven, artifactory

我有一个包含多个模块的 Maven 多模块项目。`mvn deploy`只有当它们都通过完整的`mvn install`（包括测试）时，我才想部署它们（ ）。

目前，我`mvn install`在该项目上运行一个。如果所有模块都通过了，我会运行`mvn deploy`进行部署。我看到的问题是浪费时间调用`mvn`两次（即使我在第二次运行时跳过了测试）。

有人对此有想法吗？

* * *

**编辑：**我了解到使用[Artifactory](https://www.jfrog.com/artifactory/)作为存储库管理器和[maven-artifactory-plugin](https://www.jfrog.com/confluence/display/RTF/Maven+Artifactory+Plugin)与您的 maven 设置会将**原子部署**行为添加到`mvn deploy`命令中。请参阅 Artifactory 文档中的[构建集成](https://www.jfrog.com/confluence/display/RTF/Build+Integration)部分。

[披露 - 我与 JFrog 有联系。神器创造者。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-01T03:42:33.667

看一下`deployAtEnd`Maven Deployment插件的参数：[http ://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T18:12:37.860

这有点棘手。Maven 在执行构建生命周期时不是原子的。因此，一组损坏的工件可能最终会出现在存储库中。

我知道的一种解决方案是 Nexus Pro： http: [//www.sonatype.com/Products/Nexus-Professional/Features](http://www.sonatype.com/Products/Nexus-Professional/Features) - 它允许您推广构建或将某些存储库定义为暂存。因此，只有经过验证的版本才会被提升使用。也许人工制品有类似的东西 - 我只是不知道。

如果该解决方案过于昂贵，您可能需要创建清理构建或配置文件以删除已上传的工件。我的第一个猜测是编写一个 Maven 插件来使用代理远程 API，或者 maven 功能已经足够了。但是由于部署也意味着更新元数据 xml 文件，我不认为有删除 - 对此也不确定。

# c# - 后面的代码不能用作 XAML

> ID：16085338
> 
> 赞同：2
> 
> 时间：2013-04-18T14:11:00.040
> 
> 标签：c#, wpf, xaml

我正在学习 WPF，但遇到了一些麻烦。我制作了这个 XAML：

```
<Window.Resources>
  <DataTemplate x:Key="TemplateTest">
    <Button Margin="10"
            BorderThickness="2"
            Content="{Binding Path=Text}">
      <Button.Effect>
        <DropShadowEffect BlurRadius="20" />
      </Button.Effect>
    </Button>
  </DataTemplate>
</Window.Resources>

<StackPanel x:Name="StackPanel">
  <TextBox x:Name="TextBox"
           Margin="10">TextBox</TextBox>

  <ContentControl Content="{Binding ElementName=TextBox, Path=.}"
                  ContentTemplate="{StaticResource ResourceKey=TemplateTest}" />
</StackPanel> 
```

以及背后的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        var Resource = this.Resources["TemplateTest"] as DataTemplate;

        StackPanel.Children.Add(
            new ContentControl()
            {
                Content = new Binding()
                {
                    ElementName = "TextBox",
                    Path = new PropertyPath(".")
                },

                ContentTemplate = Resource,
            });
    }
} 
```

![图片](https://i.imgur.com/NysLZbb.png)

我的问题是文本框的文本只出现在 XAML 定义的控件中。如何让它在后面的代码中也能工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:20:04.157

您将 设置`ContentControl.Content`为`Binding`，这与将`Content`属性绑定到值不同。

要在后面的代码中绑定属性，您需要如下语法：

```
var newControl new ContentControl();
newControl.ContentTemplate = Resource;

Binding b = new Binding();
b.ElementName = "TextBox";
b.Path = new PropertyPath(".");

myContentControl.SetBinding(ContentControl.ContentProperty, b); 
```

# c# - 你如何从另一种方法中退出？

> ID：16085346
> 
> 赞同：-3
> 
> 时间：2013-04-18T14:11:17.917
> 
> 标签：c#, wpf, windows, methods, return

无论如何你可以从这样的另一个方法中退出一个方法吗？

```
 if (workisdone())
            Xceed.Wpf.Toolkit.MessageBox.Show("Done");
            return.workisdone(); // or something like that?????
            DispatcherTimer timer = (DispatcherTimer)sender;
            timer.Stop();
            timer = null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:14:01.933

```
if (workisdone())
{
    Xceed.Wpf.Toolkit.MessageBox.Show("Done");
    return;
}
DispatcherTimer timer = (DispatcherTimer)sender;
timer.Stop();
timer = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:14:13.490

除非您在某处发生了一些多线程，否则您实际上无法进入 if 块，直到您已经退出该`workisdone()`方法...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:18:49.267

```
 bool res = workisdone();
    if(res)
       return res;
   //rest of code here - any code below here will not run if workisdone() returns true 
```

我通常会假设您在退出循环之前停止计时器，但这段代码看起来像您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:23:02.563

好的，我明白你在做什么。因此，以这种方式修改您的代码：

```
var isWorkDone = workisdone();

// i think, you should stop the timer no matter what the workisdone() result is.
DispatcherTimer timer = (DispatcherTimer)sender;
timer.Stop();
timer = null;

// pop the msg only if workisdone() == true
if (isWorkDone)
{
  Xceed.Wpf.Toolkit.MessageBox.Show("Done");
}

return isWorkDone; // will return pass or fail. 
```

# api - 仅 OpenX 选项？

> ID：16085347
> 
> 赞同：1
> 
> 时间：2013-04-18T14:11:19.627
> 
> 标签：api, ads, openx, advertisement-server

OpenX Source 是否有其他替代方案（商业或非商业）来构建我自己的广告网络，我的发布商可以在其中建议他们的立场并自动获取他们的自定义标签？

大多数其他广告服务器，如 Adzerk 或 EPOM，如果我没问题的话，只会报告 API，这将使我的想法变得不可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:07:38.160

请访问 www.dreamajax.com，他们的产品具有基于 OpenX 构建的独特界面，目前许多广告网络和广告服务器都使用他们的平台。他们还将它扩展到移动、游戏内和视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T14:15:21.713

我建议您查看 www.switchconcepts.com，联系 david.lane@switchconcepts.com。Switch 支持许多广告网络和发布商。我们可以探索您的精确要求，看看我们是否支持这些要求。我怀疑我们已经这样做了。我们是具有集成 RTB 和私人交易支持的商业广告服务器（具有行业领先的支持）。

# ruby - 如何为停滞项目设置 Vagrant 盒子？

> ID：16085348
> 
> 赞同：1
> 
> 时间：2013-04-18T14:11:28.533
> 
> 标签：ruby, puppet, vagrant

我正在学习如何使用 vagrant，并且我有一个使用[stasis](http://stasis.me/)生成静态文件的简单项目。

我正在寻找一种在流浪盒上运行停滞的设置。所以问题是：**我需要什么盒子才能使停滞起作用？**

（关于 Puppetfile 应该包含什么的任何提示都会很好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:12:39.177

作为一个可行的解决方案，我使用[了这个](https://gist.github.com/am/5442663)设置。这是一个使用 puppet 作为配置器的**[Ubuntu 精确 64 ，具有：](http://files.vagrantup.com/precise64.box)**

*   转速
*   红宝石 2.0.0
*   混帐
*   节点
*   凝滞宝石
*   项目特定的宝石

我可以编译项目并在`http://localhost:4000`使用`stasis -d 4000`.

找到此解决方案时，还出现了另一个[相关问题](https://stackoverflow.com/questions/16167242/how-to-install-a-gem-into-rvm-with-puppet-on-a-vagrant-box)。

# mysql - 根据两行查找平均时间戳

> ID：16085351
> 
> 赞同：0
> 
> 时间：2013-04-18T14:11:42.750
> 
> 标签：mysql

基本上我试图根据数据库中的两个时间戳来获得平均值，例如我有一个产品，我用 a和 a将它插入数据库**10 次**，我想将所有**10 行**组合在一起并找到和之间的平均值找出平均需要多长时间才能卖出。`listed_time``sell_time`**`listed_time``sell_time`**

 ****编辑**：时间戳被插入为`time()`不`date()`

我尝试但未能工作的代码是

```
$query = $db->runSQL("SELECT AVG(TIMESTAMPDIFF(SECOND, listed_time, sell_time)) from trade");
while($row = mysql_fetch_assoc($query)) {
    echo $row['AVG(TIMESTAMPDIFF(SECOND, listed_time, sell_time))']."</br>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:23:14.487

你可以试试这个 10 行：

```
SELECT AVG(TIMESTAMPDIFF(SECOND, listed_time, sell_time ) ) as za_avg ... 
```

这将为您提供出售物品所需的平均时间（对于这 10 行）**

# magento - 为什么 XmlConnect 依赖这么多模块？

> ID：16085352
> 
> 赞同：4
> 
> 时间：2013-04-18T14:11:49.920
> 
> 标签：magento

我试图为精简商店禁用 Magento 的一些核心模块。我收到一条错误消息，说 XmlConnect 依赖于我禁用的模块之一。我提取了 XmlConnect 的模块 XML 文件，并看到了它可怕的依赖项列表：

```
<depends>
    <Mage_Checkout />
    <Mage_Paypal />
    <Mage_Usa />
    <Mage_Tax />
    <Mage_Weee />
    <Mage_Catalog />
    <Mage_CatalogSearch />
    <Mage_CatalogInventory />
    <Mage_Bundle />
    <Mage_Wishlist />
    <Mage_Rating />
    <Mage_Review />
</depends> 
```

由于 XmlConnect 依赖于 Catalog 和 Checkout 等关键模块，因此实际上无法禁用，因此也无法禁用 Wishlist 和 Review 等并非总是必需的模块。

为什么 XmlConnect 依赖于这么多附带的模块？这些依赖关系是否可能是向后的？删除它们是否安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:44:36.537

假设您正在谈论`Mage_XmlConnect`位于

```
app/code/core/Mage/XmlConnect 
```

然后它有一个“可怕”的依赖关系列表，因为该模块具有“可怕”数量的功能。

该`Mage_XmlConnect`模块为 Magento Mobile 的基于手机的商店应用程序实现了后端。（如果你很聪明，你可以将它用于[你自己的移动应用程序](http://inchoo.net/ecommerce/magento/develop-your-own-magento-mobile-application/)）。它依赖于所有这些模块，因为它使用这些模块中的对象来实现此功能。

虽然我不是构建 Magento Mobile 应用程序的团队的一员，但我认为它需要包含愿望清单项目和评论，因此该`Mage_XmlConnect`模块依赖于评论和愿望清单模块。从理论上讲，Magento Mobile 应用程序本身可以拆分为多个模块，但添加到 Magento 的每个模块都具有性能影响和复杂性影响。考虑到 Magento 团队当时需要的工作速度，很容易看出他们为什么选择在单个模块中实现所有内容。

同样重要的是要记住，虽然可以禁用模块，但 Magento 的设计从来没有考虑到这个目标。在实践中，模块系统的存在更多是为了防止模块之间的代码污染，并允许多个团队（或单个开发人员）在不影响其他开发人员的情况下开发他们的功能。隔离每个模块的功能以便系统可以独立于任何特定模块运行会很整洁——但 Varien/Magento Inc. 这样做的投资回报率很小。因此没有完成。您可能不喜欢它，但这就是大多数具有商业/商业意义的软件的开发方式。

如果要使用`Mage_XmlConnect`，则需要启用其他模块。但是， `Mage_XmlConnect`运行商店并不严格需要，并且可以（可能）安全地禁用。

# ruby-on-rails-3 - Rails 3：创建一个“空”的 ActiveRecord 查询对象

> ID：16085357
> 
> 赞同：1
> 
> 时间：2013-04-18T14:12:12.257
> 
> 标签：ruby-on-rails-3, activerecord

在 Rails 中是否可以为给定模型创建一个“空”的 ActiveRecord 查询对象？空对我来说意味着一个条件，包括数据库中所有可能的行。之后我想对该查询应用过滤器。

目前我正在使用`Booking.where('id > ?', 0)`，但我相信必须有一个更好的方法，比如`Booking.all()`- 但`all()`返回一个数组而不是 ActiveRecord。这是我的代码：

```
@bookings = Booking.where('id > ?', 0)
if !@day.nil?
    @bookings = @bookings.where('day = ?',@day)
end
if @project_id && !@project_id.empty?
    @bookings = @bookings.where('project_id = ?', @project_id)
end 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:42:57.527

您可以使用此处讨论的范围方法：http: [//guides.rubyonrails.org/active_record_querying.html#working-with-scopes](http://guides.rubyonrails.org/active_record_querying.html#working-with-scopes)

另请注意，`@project_id.present?`与 `@project_id && !@project_id.empty?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T00:06:12.313

用于`unscoped`创建一个空查询，以便您可以在其上进行构建。（`scoped`已[弃用](https://github.com/rails/rails/issues/12756)）。

```
@bookings = Booking.unscoped
if !@day.nil?
    @bookings = @bookings.where('day = ?',@day)
end
if @project_id && !@project_id.empty?
    @bookings = @bookings.where('project_id = ?', @project_id)
end 
```

（顺便说一句，如果没有这个，你也可以用它来初始化它`Booking.where(true)`而不是`id > 0`检查；它更干净，并且可能比做一个真实的条件检查更好。但是，无范围的更好。）

# c++ - 如何使用 Windows 服务启动程序？

> ID：16085360
> 
> 赞同：2
> 
> 时间：2013-04-18T14:12:23.713
> 
> 标签：c++, windows, visual-studio, service, exe

我使用 Visual Studios 在 C++ 中创建了一个 Windows 服务，现在我希望该服务运行一个 exe 文件。该服务设置为每次计算机启动时启动

我知道我需要使用代码来定位 exe 的路径，`C:\MyDirectory\MyFile.exe`但是如何从服务中实际运行文件？

[我在这里](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start%28v=vs.71%29.aspx)阅读了有关流程启动方法的信息，但我不确定如何使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:16:21.437

您可以在服务中使用 createprocess 函数来运行 exe。

```
TCHAR* path = L"C:\\MyDirectory\\MyFile.exe";

STARTUPINFO info;
PROCESS_INFORMATION processInfo;

ZeroMemory( &info, sizeof(info) );
info.cb = sizeof(info);
ZeroMemory( &processInfo, sizeof(processInfo) );

if (CreateProcess(path, NULL, NULL, NULL, TRUE, 0, NULL, NULL, &info, &processInfo))
{
    ::WaitForSingleObject(processInfo.hProcess, INFINITE);
    CloseHandle(processInfo.hProcess);
    CloseHandle(processInfo.hThread);
} 
```

# sqlite - Sqlite 数据库模型中的乌鸦脚符号

> ID：16085367
> 
> 赞同：1
> 
> 时间：2013-04-18T14:12:44.600
> 
> 标签：sqlite, database-design, entity-relationship

我开始掌握使用'crows-foot' 符号来设计使用 Navicat 的 Sqlite 数据库。在旨在让用户启动并运行该软件的书籍章节中，我遇到了以下示例，其中包含 ER 图和一些解释性文本：

*类别表和任务表之间存在多对一的关系。在我们的例子中，一个任务可以有一个与之关联的类别，但一个类别下可以有许多任务。因此，一个任务可以分配给一个用户，但一个用户可以有许多任务。* ![在此处输入图像描述](https://i.stack.imgur.com/nTnGY.png)

读到这里我很惊讶，因为符号似乎与描述不一致。我阅读这些图表的方式（通过检查互联网上各种免费提供的示例得出）是从表格开始（比如**Task**），然后查看“附加”到相关表格的符号（在本例中为“一个或more') 并构造如下关系：**任务**属于'*一个或多个*'**类别**。这种关系当然是可能的，但它似乎与对所需关系的口头描述不一致，即：“*一项任务可以有一个与之相关联的类别*”。我误解了鱼尾纹符号吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:46:07.913

在 ERD（无论是使用 Crow's foot 还是 Chen 表示法）中，“多”端始终具有外键，任务表具有外键 Category_id，因此位于“多”端，而 Category 具有名为 ID 的相关主键，因此是在“一”的一边。所以，实际上你的解释是正确的。

# c# - 在 WPF 中，如何在不使用任何事件的情况下判断鼠标左键当前是否按下？

> ID：16085373
> 
> 赞同：13
> 
> 时间：2013-04-18T14:12:49.243
> 
> 标签：c#, wpf, mouse, mouseleftbuttondown

我有一个应用程序，我希望能够在其中移动滑块。但是，滑块每 30 秒由程序自动更新一次。当我尝试使用鼠标更改滑块位置时，程序仍在更新滑块位置，因此我无法使用鼠标手动移动它。

不知何故，如果用户正在更改其位置，我希望应用程序不要更新滑块。如何在不使用左键按下事件的情况下判断鼠标左键是否按下？我只想能够访问鼠标，并检查鼠标左键的按钮状态。如何在不进入鼠标事件的情况下访问它？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-02-09T16:59:43.897

```
bool mouseIsDown = System.Windows.Input.Mouse.LeftButton == MouseButtonState.Pressed; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:11:16.217

好的，

我想到了。WPF 中的 Slider 控件不会触发 MouseDown、LeftMouseDown 或 LeftMouseUp 事件。这是因为当用户操作滑块时，它在内部使用它们来调整值。但是，WPF 中的 Slider 控件会触发 PreviewLeftMouseDown 和 PreviewLeftMouseUp 事件。此外，当您单击鼠标左键时，滑块控件会自动捕捉鼠标并保持在鼠标上，直到您松开鼠标左键。

我能够通过以下 3 个事件解决我的问题：

```
 private void _sliderVideoPosition_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        _adjustingVideoPositionSlider = true;
        _mediaElement.Pause();
    }

    private void _sliderVideoPosition_PreviewMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        _adjustingVideoPositionSlider = false;
        _mediaElement.Play();
    }

    private void _sliderVideoPosition_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        if (_adjustingVideoPositionSlider)
        {
            _mediaElement.Position = TimeSpan.FromMilliseconds((int)e.NewValue);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:17:47.587

在您的情况下，您可以考虑使用[Mouse Class](http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.aspx)。

如果我没记错的话，当鼠标离开应用程序的 UI 时，它不会跟踪按钮的状态，所以为了确保您始终拥有正确的信息，您可能需要捕获鼠标。

重复一遍，您需要自己检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T14:23:19.647

据我了解，您希望保留 MVVM 模式来完成此任务。

所以首先我会从在我的 ViewModel 中设计我想要的东西开始

```
public class ViewModel
{
    public ICommand EditingSliderCommand { get; set; } // actually set the command
    public ICommand DoneEditingCommand { get; set; } // actually set the command
    public bool IsEditing { get; set; }

    ...

    private void AutomaticUpdate
    {
        if (IsEditing)
            return;
        Update();
    }
} 
```

那么您可以使用该`Blend Interactivity`库在 xaml 中执行 UI 端。

下面是一个例子。我不知道事件名称是否正确。您也可以使用鼠标向上并完成编辑来执行相同的操作。

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="MouseDown">
        <cmd:EventToCommand Command="{Binding Mode=OneWay, 
                            Path=EditingSliderCommand}"/>
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-21T19:07:39.830

接受的答案对我不起作用，但这确实：

```
if ((System.Windows.Forms.Control.MouseButtons & System.Windows.Forms.MouseButtons.Left) == System.Windows.Forms.MouseButtons.Left)
{
    System.Diagnostics.Debug.WriteLine("Left mouse down");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-21T06:42:50.427

有一些罕见的情况，其中`System.Windows.Input.Mouse.LeftButton`不起作用。例如在调整大小期间。

然后你可以使用[GetKeyState](https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getkeystate)：

```
public enum VirtualKeyCodes : short
{
  LeftButton = 0x01
}

[DllImport("user32.dll")]
private static extern short GetKeyState(VirtualKeyCodes code);

public static bool CheckKey(VirtualKeyCodes code) => (GetKeyState(code) & 0xFF00) == 0xFF00; 
```

# android - 以日期格式存储而不显示所有详细信息（GMT、时间）

> ID：16085374
> 
> 赞同：0
> 
> 时间：2013-04-18T14:12:51.403
> 
> 标签：android, android-date

是否可以将当前日期存储在文件中但不能作为字符串存储？

我的意思是说：

如果我使用：

```
SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
Date d=new Date();
String formattedDate=thedate.format(d);
date.add(formattedDate); 
```

它将（以我想要的格式）存储在日期列表（这是一个字符串列表）中。

我希望“日期”成为日期列表并将其存储到文件中。

是否可以将其存储为 dd/MM/yyyy ？因为这样：

```
SimpleDateFormat thedate = new SimpleDateFormat("dd/MM/yyyy"); 
Date d=new Date();
date.add(d); 
```

它存储为

> 2013 年 4 月 18 日星期四 17:06:14 GMT+03:00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:17:34.523

试试上面的代码：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd"); 
Date date = new Date();
dateFormat.format(date); 
```

这不会将日期保存为字符串（如您所愿），并将根据您的需要格式化当前日期。我现在还没有测试过它，但是因为我以前用过这个，所以我很确定它是有效的。希望这可以帮助。如果没有，请发表评论。

**更新**

我试过以下：

```
 List<Date> d = new ArrayList<Date>();
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy"); 
    Date date = new Date();
    String s = dateFormat.format(date);
    try {
        d.add(dateFormat.parse(s));
    } catch (ParseException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    Log.d("try","NewDateString: "+ d.get(0));
    Log.d("try","NewDate: "+ d.get(0).getDate()+" "+d.get(0).getMonth()+" "+(d.get(0).getYear()+1900)); 
```

它有效，以下是我得到的结果：

```
 NewDateString: Thu Apr 18 00:00:00 EDT 2013
    New Date: 18 3 2013 
```

所以你可以做的是，像上面一样保存日期，当你从文件中检索日期时，你可以选择从你保存的日期对象中获取日/月/年。

# delphi - 如何制作不显示工具栏的 Internet Explorer 加载项？

> ID：16085378
> 
> 赞同：0
> 
> 时间：2013-04-18T14:13:02.330
> 
> 标签：delphi, internet-explorer, bho

我正在尝试制作一个仅在后台工作的 IE 插件，没有工具栏面板。我不希望我的插件显示工具栏面板，因为我不需要它。我在 Delphi 中找到了一个示例插件，但是如何让它在没有工具栏的情况下在后台工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:59:22.290

您提供的示例项目实现了一个[Tool Band](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144099.aspx)。它实现了`IDeskBand`在 IE 中显示工具栏的接口。

对于您要求的功能，您需要实现一个[Browser Helper Object](http://msdn.microsoft.com/en-us/library/bb250436.aspx)，这是一个完全不同的野兽，并且与 Tool Band 的实现非常不同。

# ruby-on-rails - Rails如何在HTTParty GET请求中遵循重定向

> ID：16085379
> 
> 赞同：6
> 
> 时间：2013-04-18T14:13:02.470
> 
> 标签：ruby-on-rails, httparty

我正在使用 httparty 发送获取请求，然后尝试遵循重定向：

```
get 'https://accounts.google.com/o/oauth2/auth' 
```

如何使用 HTTParty 跟踪重定向？

抱歉，如果以前有人问过这个问题，但我在任何地方都找不到答案。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-15T06:35:56.073

可能现在不需要它，但是对于需要的人。

从[文档](http://www.rubydoc.info/github/jnunemaker/httparty/HTTParty/ClassMethods#follow_redirects-instance_method)中，有自动重定向的特殊选项

> # follow_redirects(value = true) ⇒ 对象
> 
> 当 HTTP 响应指示重定向时，继续到位置标头。默认情况下始终遵循重定向。

所以你可以像这样使用这个选项：

```
HTTParty.get('http://google.com', follow_redirects: true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T13:33:53.400

现在猜测这有点过时了，这个问题大约有一个月的时间......但我对 HTTParty 文档的理解是它应该自动跟随重定向，除非你设置 no_follow 标志。虽然我还没有成功测试它（我是一个完全 HTTParty n00b 并且偶然发现这个试图找到我自己的问题的答案，d'oh ...）

如果这不起作用，您始终可以直接读取标头并手动解析重定向。我之前在 Javascript AJAX 请求中已经做到了，这并不难。但是你不应该用 HTTParty 来做这件事。

# c - 这两个实现之间有区别吗？

> ID：16085380
> 
> 赞同：1
> 
> 时间：2013-04-18T14:13:02.810
> 
> 标签：c, gcc

编译器如何为以下两个生成代码有什么不同。其次，它们会产生相同的返回值吗？

```
 static inline float fix2float(int64_t f)
  {
    return (float)f / ((int64_t)1 << 60); 
  } 
```

和这个

```
 static inline float fix2float(int64_t f)
  {
    return (float)(f / ((int64_t)1 << 60)); 
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T14:15:15.763

这两个函数非常不同：第二个执行整数除法，而第一个执行浮点。

特别是，第二个版本的返回值总是在 [-8, 7] 范围内的整数。

**更新：**当然，只有当您首先更正[unwind 捕获的错字时，](https://stackoverflow.com/questions/16085380/is-there-a-difference-between-these-two-implemenations#comment22963370_16085380)这才是正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T14:15:43.423

是的，有：在 C 中，[类型转换的优先级高于除法](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)，因此第一个将除以`float`，而第二个将执行整数除法。

# python - 如何自定义 Django Logging 以使用 mail_admin 处理所有异常？

> ID：16085381
> 
> 赞同：0
> 
> 时间：2013-04-18T14:13:03.703
> 
> 标签：python, django

我正在寻找一种通过向 settings.ADMINS 发送邮件来报告所有异常（如错误 500）的方法。

我已将 Debug 设置为 False，但是在我引发异常时的代码中，没有发送任何邮件。

我使用 django 1.4

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:08:07.220

发布您的相关设置（记录器、电子邮件和管理员）可能有助于进一步帮助您，但有几点建议：

来自 Django 的文档：

> 为了发送电子邮件，Django 需要一些设置来告诉它如何连接到您的邮件服务器。至少，您需要指定 EMAIL_HOST，可能还需要指定 EMAIL_HOST_USER 和 EMAIL_HOST_PASSWORD，但根据您的邮件服务器的配置，可能还需要其他设置。有关电子邮件相关设置的完整列表，请参阅 Django 设置文档。

和：

> 默认情况下，Django 将从 root@localhost 发送电子邮件。但是，某些邮件提供商会拒绝来自该地址的所有电子邮件。要使用不同的发件人地址，请修改 SERVER_EMAIL 设置。

对于 Gmail 帐户，它们可能如下所示：

```
EMAIL_HOST_USER = 'this-is-not-a-real-address@gmail.com'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_PASSWORD = 'mypassword'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
SERVER_EMAIL = EMAIL_HOST_USER 
```

你检查过机器上的日志吗？像 Postfix 日志，或者它的邮件队列。也许电子邮件确实是由 Django 移交的，但 Postfix（或您正在使用的任何东西）由于某种原因（如上面引用的那个）无法发送它们。

此外，您可能对这个问题/答案感兴趣： [How do you log server errors on django sites](https://stackoverflow.com/questions/238081/how-do-you-log-server-errors-on-django-sites)。我喜欢自己使用[Sentry](https://getsentry.com/welcome/)。

# python - 是否有另一种方法可以将 ModelForm 上的错误消息更改为 validate_unique 错误？

> ID：16085382
> 
> 赞同：0
> 
> 时间：2013-04-18T14:13:08.340
> 
> 标签：python, django, django-forms

忽略我在下面用于解析错误消息的实际方法，因为它需要大量改进以使其更通用，解析像这样引发的错误消息是更改显示的错误消息的唯一方法吗？

具体来说，我从 ModelForm 中删除了其中一个字段。运行 validate_unique 时，我会从验证中删除该字段，如关于 SO的[答案中所述。](https://stackoverflow.com/a/3757871/23972)运行 validate_unique 时 Django 在表单上显示的错误消息说：“带有这个 Y 和 Z 的 X 已经存在。” 其中 Z 是我从 ModelForm 中手动删除的字段。我想更改此错误消息，因为提及未显示的字段 Z 会使无法更改此表单上的 Z 的用户感到困惑。

这感觉很脆弱和hacky。

```
def validate_unique(self):
    exclude = self._get_validation_exclusions()
    exclude.remove('a_field_not_shown_on_form')

    try:
        self.instance.validate_unique(exclude=exclude)
    except ValidationError, e:
        if '__all__' in e.message_dict:
            for idx, err in enumerate(e.message_dict['__all__']):
                for unique_together in self.instance._meta.unique_together:
                    if 'a_field_not_shown_on_form' not in unique_together:
                        continue
                    if err.lower() == '{} with this {} and {} already exists.'.format(self.instance.__class__.__name__,
                                                                                      unique_together[0],
                                                                                      unique_together[1]).lower():
                        e.message_dict['__all__'][idx] = '{} with this {} already exists in {}'.format(self.instance.__class__.__name__,
                                                                                                       unique_together[0].capitalize(),
                                                                                                       self.instance.complex.name)

        self._update_errors(e.message_dict) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:07:09.547

```
from django.utils.text import capfirst

class YourModel(models.Model):

    # fields

    def unique_error_message(self, model_class, unique_check):
        opts = model_class._meta
        model_name = capfirst(opts.verbose_name)

        # A unique field
        field_name = self._meta.unique_together[0]
        field_label = capfirst(opts.get_field(field_name).verbose_name)
        # Insert the error into the error dict, very sneaky
        return _(u"%(model_name)s with this %(field_label)s already exists.") %  {
            'model_name': unicode(model_name),
            'field_label': unicode(field_label)
        } 
```

# android - 如何对 Android 源代码做一点小改动，并整合到自己的项目中

> ID：16085384
> 
> 赞同：1
> 
> 时间：2013-04-18T14:13:18.750
> 
> 标签：android, open-source, android-source, android-datepicker

我想对 Android 标准`TimePicker`类做一个小改动。具体来说，我正在尝试对其进行更改，使其以 15 分钟的增量工作，而不是 1 分钟的增量。

[根据我的应用程序的要求，这篇文章](https://stackoverflow.com/questions/7713538/how-to-set-a-custom-minutes-interval-in-timepickerdialog-in-android)帮助我将分钟值的范围限制为 {0、15、30、45}。但正如我在后续评论中指出的那样，分钟微调器仍将前一分钟显示为当前值 - 1，下一分钟显示为当前值 + 1，这会创建一个草率的用户界面。

我查看了相关的[Android 源代码](http://androidxref.com/4.2.2_r1/search?q=&defs=&refs=TimePicker&path=&hist=&project=abi&project=bionic&project=bootable&project=build&project=cts&project=dalvik&project=development&project=device&project=docs&project=external&project=frameworks&project=gdk&project=hardware&project=libcore&project=libnativehelper&project=ndk&project=packages&project=pdk&project=prebuilts&project=sdk&project=system)，看来我需要进行的更改非常简单。但是当我尝试将源代码复制到我的项目中时，我遇到了与`package`声明、在哪里查找`Widget`、如何解析`R.id`变量等相关的无数错误。

所以我的问题是：

**从 Android 源代码对给定类进行小的更改并将其合并到您自己的项目中的最佳方法是什么？**

`TimePicker`就我而言，我只需要对and进行一些小的更改`NumberPicker`，但我不确定如何在我的项目中正确设置它。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:22:20.230

> 但是当我尝试将源代码复制到我的项目中时，我得到了与包声明相关的无数错误

您的源文件的目录需要与包名称匹配。而且由于您不能覆盖`android.widget.TimePicker`，您要么需要将该类移动到一个新包中，要么给它一个新名称。

> 在哪里可以找到小部件

这意味着您复制`TimePicker`到其中一个包中。这很好，但是您需要为从其原始包`import`中引用的类添加适当的语句。`TimePicker`或者，您需要保留您的（重命名）`TimePicker`in `android.widget`，将此包添加到您的项目中。这是基本的Java。

> 如何解析 R.id 变量

如果`TimePicker`依赖不属于 Android SDK 的资源，您还需要将这些资源从 AOSP 复制到您的项目中。

> 从 Android 源代码对给定类进行小幅更改并将其合并到您自己的项目中的最佳方法是什么？

恕我直言，这在摘要中无法轻易回答。一般来说，你会做我上面列出的那些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:19:36.520

您最好继承相关类并覆盖您想要更改的方法。

在 Java 中，您可以在子类中执行以下操作：

*   继承的字段可以直接使用，就像任何其他字段一样。
*   您可以在子类中声明一个与超类中同名的字段，从而隐藏它（不推荐）。
*   您可以在子类中声明不在超类中的新字段。
*   继承的方法可以直接使用。
*   您可以在子类中编写一个与超类具有相同签名的新实例方法，从而覆盖它。
*   您可以在子类中编写一个与超类具有相同签名的新静态方法，从而隐藏它。
*   您可以在子类中声明不在超类中的新方法。
*   您可以编写一个子类构造函数来调用超类的构造函数，可以隐式调用，也可以使用关键字 super。

    [有关 Java 中的子类化的更多信息](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

# android - 如果 Android API 不支持，如何隐藏小部件？

> ID：16085393
> 
> 赞同：4
> 
> 时间：2013-04-18T14:13:34.313
> 
> 标签：android

我正在开发多个小部件，其中一个使用 ListView 但 Android 2.3 不支持 ListView。
因此，如果我的应用程序当时安装在 Android 2.3 中，则带有 ListView 的小部件不应显示在小部件的列表中。
但是我那个带有 ListView 的小部件显示在小部件的列表中，如果我点击它，它就会显示强制关闭。

这就是为什么我想从小部件列表中隐藏那些小部件。
如果有人有任何建议，请回复。

它向我显示强制关闭并跟随小部件的错误
![在此处输入图像描述](https://i.stack.imgur.com/GDCTu.png)

我在 Android 4.2 中运行的相同小部件然后它按照以下列表显示我

![在此处输入图像描述](https://i.stack.imgur.com/0S1s4.png)

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T14:52:13.473

> 我正在开发多个小部件

不，您正在开发多个**应用小部件**。虽然很抱歉这些术语令人困惑，但在您的问题中使用正确的术语对您来说非常重要。

> 其中之一使用 ListView 但 Android 2.3 不支持 ListView。

正确，在 Android 2.3 或更低版本的**应用小部件**`ListView`中不受支持。

 **> 因此，如果我的应用程序当时安装在 Android 2.3 中，则带有 ListView 的小部件不应显示在小部件的列表中。

步骤#1：创建一个`res/values/bools.xml`文件，定义一个布尔资源，名称为`is_honeycomb`，值为`false`。

步骤 #2：创建一个`res/values-v11/bools.xml`文件，定义另一个布尔资源，具有相同的名称 ( `is_honeycomb`)，值为`true`

步骤#3：在您的清单中，在使用 a的`<receiver>`元素上，添加。`AppWidgetProvider``ListView``android:enabled="@bool/is_honeycomb"`

最终结果是，在 Android 3.0+ 设备上，您的`ListView`应用小部件将是一个可用选项，但在 Android 2.3 及更低版本的设备上，它不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:19:53.317

ListView 肯定在 2.3 版本中受支持。它受 Api Level 1 的支持。是的 ListView 仅适用于 api Level 11(3.0) 的应用小部件。

```
if(android.os.Build.VERSION.SDK_INT < 11)
   then hide your listview. 
```**

# java - Eclipse 插件开发教程 - 2013

> ID：16085396
> 
> 赞同：6
> 
> 时间：2013-04-18T14:13:36.630
> 
> 标签：java, eclipse, plugins

我已经在这个论坛上看到过这个问题，并且得到了足够的回答，但是我看到的所有问题都至少有 3-4 年的历史。因此，提供的一些链接已损坏，而绝大多数其他链接与旧版本的 Eclipse 相关。

我的问题是2013版本：我想了解更多关于Eclipse插件开发的知识，谁能推荐一个好的在线教程？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T19:03:16.427

您应该阅读[Vogella 教程](http://www.vogella.com/eclipse.html)。他有几个关于 Eclipse 插件开发的教程，其中许多解释了 Eclipse 4 平台中的新功能

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T14:17:07.957

您需要熟悉术语 1。什么是透视图，什么是编辑器，视图等 [http://www.eclipsepluginsite.com/](http://www.eclipsepluginsite.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T23:38:06.197

您应该先阅读[Vogella教程，然后阅读](http://www.vogella.com/eclipse.html)[Sonatype](http://www.sonatype.org/tycho)的 Tycho (http://eclipse.org/tycho/) 。Vogella 教程是了解 eclipse 插件开发基础知识的最佳选择。一旦你感觉舒服了，就开始使用 Tycho。Sonatype 网站为其以 Maven 为中心、清单优先的方法提供了所有必要的文档。

注意：在上面的第谷链接中添加额外的 /。

# matplotlib - 更改 matplotlib 极坐标图中的标签

> ID：16085397
> 
> 赞同：9
> 
> 时间：2013-04-18T14:13:36.923
> 
> 标签：matplotlib, python-2.6

我正在使用 matplotlib 创建极坐标图来表示玫瑰图。现在情节正在被完美地创造出来。我想用方向名称替换轴上显示的角度：N 表示 0 度，W 表示 90 度，S 表示 180 度，E 表示 270 度。

当前的玫瑰图如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/00TNE.png)

注意：我尝试过使用 windrose，但这个输出更适合我的目的。因此，将自定义标签分配给轴的好方法将非常有帮助。

我使用的 python 版本是 2.6，matplotlib 版本是 1.2.0

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T16:01:43.810

假设你有一个轴对象`ax`，你可以简单地做这样的事情

```
ax.set_xticklabels(['N', '', 'W', '', 'S', '', 'E', '']) 
```

[或者从这个老例子](http://youarealegend.blogspot.de/2008/09/windrose.html)中获得一些灵感

# ios - UIPickerView 没有出现

> ID：16085402
> 
> 赞同：1
> 
> 时间：2013-04-18T14:13:49.507
> 
> 标签：ios, cocoa-touch, uipickerview

在通过**push**调用 ViewController 时，我尝试以编程方式显示 ComboBox。这个组合框实现 UIPickerView 委托协议并添加一个 .xib 文件。

当我运行该应用程序时，我可以在屏幕上看到我的组合框，但是当我单击它时，什么都没有。通常会显示pickerview。

我不明白的是，在另一个视图控制器调用**模式**中它工作正常

```
//
//  ComboBox.h
//

#import <UIKit/UIKit.h>

@interface ComboBox : UIViewController<UIPickerViewDelegate, UIPickerViewDataSource, UITextFieldDelegate>
{
    UIPickerView* pickerView;
    IBOutlet UITextField* textField;
    NSMutableArray *dataArray;
}

-(void) setComboData:(NSMutableArray*) data; //set the picker view items
-(void) setPlaceholder:(NSString*) label;
@property (retain, nonatomic) NSString* selectedText; //the UITextField text
@property (retain, nonatomic) IBOutlet UITextField* textField; //the UITextField

@end

//
//  ComboBox.m
//

#import "ComboBox.h"

@implementation ComboBox
@synthesize selectedText;
@synthesize textField;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    return [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

//-- UIPickerViewDelegate, UIPickerViewDataSource

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
{
    return 1;
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    textField.text = [dataArray objectAtIndex:row];
    selectedText = textField.text;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    return [dataArray count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
{
    return [dataArray objectAtIndex:row];
}

//-- ComboBox

-(void) setComboData:(NSMutableArray*) data
{
    dataArray = data;    
}

-(void) setPlaceholder:(NSString *)label
{
    textField.placeholder = label;
}

-(void)doneClicked:(id) sender
{
    [textField resignFirstResponder]; //hides the pickerView
}

- (IBAction)showPicker:(id)sender {

    pickerView = [[UIPickerView alloc] init];
    pickerView.showsSelectionIndicator = YES;
    pickerView.dataSource = self;
    pickerView.delegate = self;

    UIToolbar* toolbar = [[UIToolbar alloc] init];
    toolbar.barStyle = UIBarStyleBlackTranslucent;
    [toolbar sizeToFit];

    //to make the done button aligned to the right
    UIBarButtonItem *flexibleSpaceLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem* doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                   style:UIBarButtonItemStyleDone target:self
                                                                  action:@selector(doneClicked:)];

    [toolbar setItems:[NSArray arrayWithObjects:flexibleSpaceLeft, doneButton, nil]];

    //custom input view
    textField.inputView = pickerView;
    textField.inputAccessoryView = toolbar;  
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)aTextField
{
    [self showPicker:aTextField];
    return YES;
}

@end 
```

我的视图控制器的 viewdidload

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableArray* ServeurArray = [[NSMutableArray alloc] init];
    [ServeurArray addObject:@"1"];
    [ServeurArray addObject:@"2"];
    [ServeurArray addObject:@"3"];

    comboServeur = [[ComboBox alloc] init];
    [comboServeur setComboData:ServeurArray];  //Assign the array to ComboBox
    comboServeur.view.frame = CGRectMake(95, 220, 130, 31);  //ComboBox location and size (x,y,width,height)

    [self.view addSubview:comboServeur.view];
} 
```

谢谢你的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T10:39:10.360

我假设您的目标是 iOS 5.0 及更高版本。由于您要将 viewController 的视图添加到另一个 viewController，因此您可以使用 iOS 5.0 中引入的 childViewController。

修改你的 viewDidLoad 方法

```
- (void)viewDidLoad
    {
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

        ComboBox *comboServeur = [[ComboBox alloc]initWithNibName:@"ComboBoxController" bundle:nil];
        [comboServeur setComboData:@[@"1",@"2",@"3"]];

        comboServeur.view.frame = CGRectMake(50.0f, 200.0f, 220.0f, 31.0f);

        [self.view addSubview:comboServeur.view];
        [self addChildViewController:comboServeur];
        [comboServeur didMoveToParentViewController:self];

    } 
```

检查的几个步骤

1.  `ComboBox`使用 maskType使viewController 的视图自由形式`UIViewAutoresizingNone`。
2.  检查 textField 和 textField 的委托是否已连接

[演示项目](https://dl.dropboxusercontent.com/u/35012982/Demo%20Projects/DemoContainerView.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:14:32.657

我忘记了细节，但我记得有同样的问题，但对我来说，我需要将它链接到委托或数据源或其他东西？我不是 100% 确定，因为它已经有一段时间了，但请确保当你看到它时，你将它链接到你的选择器参考 + 你需要的其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T09:38:10.657

我尝试在我的视图控制器中使用这个组合类，我尝试了你给我的所有解决方案，但没有任何效果，所以解决方案是直接在我的视图控制器中实现所有组合类代码，现在它可以工作，但它有点有点丑……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T21:11:20.863

您的`ComboBox`课程未设置为 的委托`UITextField`，因此`textFieldShouldBeginEditing:`永远不会被调用。

# php - PHP 将实体导入/导出到 XML、XLS、CSV……

> ID：16085407
> 
> 赞同：1
> 
> 时间：2013-04-18T14:14:05.930
> 
> 标签：php, doctrine-orm, mapping, export, entity

是否有任何 PHP 库可以将对象（实际上是 Doctrine 2 实体）导入和/或导出为各种格式，如 XML、XLS、CSV 等。

我正在寻找的是一个通用的半自动解决方案（例如，不是特定的 Excel 库）：即唯一要配置的是文件格式和实体之间的映射。

就像 Doctrine 2 将对象映射到 DB 模式一样，这将是一个将对象映射到文件格式的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:27:44.867

那里应该有很多，但我现在只能想到一个，[PHPExcel](http://phpexcel.codeplex.com/)

在其功能页面上它说：

“将电子表格对象输出为不同的文件格式”

*   Excel 2007（电子表格ML）
*   IFF8（Excel 97 及更高版本）
*   PHPExcel 序列化电子表格
*   CSV（逗号分隔值）
*   HTML
*   PDF格式

# python - 如何使用 rest-frameWork 将 POST 数据插入 Django 模型

> ID：16085410
> 
> 赞同：0
> 
> 时间：2013-04-18T14:14:11.943
> 
> 标签：python, django, django-models, django-views, django-rest-framework

我正在尝试使用 Django rest-frameWork 将数据发布到我的 Django 应用程序...

我的观点是：

```
@csrf_view_exempt
class subscriptionsList(APIView):

    def post(self, request, format=None):
        key = self.request.QUERY_PARAMS.get('appKey', None)
        keyData = app.objects.filter(appKey=key).exists()         

        if keyData == True:
            serializer = PostSubscriptionDetailSerializer(data=request.DATA)
            if serializer.is_valid():
                serializer.save()
                return Response(serializer.data, status=status.HTTP_201_CREATED)
            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST) 
```

urls.py： `url(r'^subscribe/$',subscriptionsList,name='subscriptions-list'),`

序列化程序.py

```
class PostSubscriptionDetailSerializer(serializers.ModelSerializer):
    class Meta:
        model = subscriptions
        fields = ('subAppName','subStoreName','subTagName','emailID') 
```

有人可以告诉我如何使用 Django REST-frameWork 发布数据...

# asp.net - 如何更改时事通讯退订链接文本

> ID：16085419
> 
> 赞同：1
> 
> 时间：2013-04-18T14:14:28.803
> 
> 标签：asp.net, content-management-system, kentico

我正在使用宏**`{%UnsubscribeLink %}`**来取消订阅时事通讯。

当用户收到时事通讯时，我想更改此链接的文本。

这次它显示为“**取消订阅**”。如何更改此文本值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-26T06:43:10.113

我建议使用仅返回退订 URL 并自行创建退订链接文本的其他宏。

确切的宏取决于 Kentico 版本。这肯定适用于 v11/v1。

```
<a href="{% EmailFeed.UnsubscribeFromEmailFeedUrl #%}" target="_blank">YOUR TEXT</a> 
```

更复杂

```
<td>
  We hope you found this message to be useful.
  However, if you&#39;d rather not receive these emails in the future,
  please <a href="{% EmailFeed.UnsubscribeFromEmailFeedUrl #%}" target="_blank" 
  style="color: #000000;">unsubscribe</a> from this newsletter.
  You can also unsubscribe from <a href="{% EmailFeed.UnsubscribeFromAllEmailFeedsUrl #%}" target="_blank" style="color: #000000;">all marketing emails</a>.
</td> 
```

[链接到官方文档](https://docs.kentico.com/k12/on-line-marketing-features/configuring-and-customizing-your-on-line-marketing-features/configuring-email-marketing/integrating-email-feeds-into-sites)

# javascript - 如何在 AJAX JSON 调用后关闭 jQuery 对话框

> ID：16085422
> 
> 赞同：2
> 
> 时间：2013-04-18T14:14:29.677
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui

我正在使用`ASP.NET MVC 4`,`jQuery`和`jQuery UI`.

我的观点有一个对话框。当我单击一个按钮时，会弹出对话框，获取对话框上的值并将其发送到服务。该服务会做它需要做的事情，如果成功，它会发回一条空白消息或实际的错误消息。在此之后，我需要在客户端检查错误，关闭当前对话框并打开成功对话框或错误对话框。我不确定如何关闭当前对话框并显示另一个对话框。

我的按钮：

```
<button id="TestButton" type="button">Display pop up</button> 
```

我的对话框：

```
<div id="confirmationDialog"></div>
<div id="successDialog"></div>
<div id="errorDialog">error dialog</div> 
```

我的 jQuery 代码：

```
$('#TestButton').click(function () {
    $('#confirmationDialog').dialog('open');
});

$('#errorDialog').dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    width: 500,
    title: 'Add Rule Detail Error',
    buttons: {
        'Ok': function () {
            $(this).dialog('close');
        }
    }
});

$('#confirmationDialog').dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    width: 330,
    title: 'Add Rule Detail Confirmation',
    open: function (event, ui) {
        $(this).load('@Url.Action("AddRuleConfirmation")' +
            '?systemCode=' + $('#SystemCode').val());
        },
        buttons: {
            'Yes': function () {
                var url = '@Url.Action("AddRuleConfirmationSubmit")';
                var data = {
                    systemCode: $('#SystemCode').val()
                };

                $.getJSON(url, data, function (message) {
                    alert(message);
                    if (message == '') {
                        $(this).dialog('close');
                    }
                    else {
                        $(this).dialog('close');
                        $('#errorDialog').dialog('open');
                    }
                });
            },
            'No': function () {
                $(this).dialog('close');
            }
        }
    }); 
```

我的操作方法：

```
public ActionResult AddRuleConfirmation(string systemCode)
{
    DetailConfirmationViewModel viewModel = new DetailConfirmationViewModel()
    {
        SystemCode = systemCode
    };

    return PartialView("_AddRuleConfirmation", viewModel);
}

public ActionResult AddRuleConfirmationSubmit(string systemCode)
{
    CreateRuleViewModel viewModel = new CreateRuleViewModel()
    {
        SystemCode = systemCode
    };

    ResCodeRuleAdd_Type result = ruleService.AddRule(viewModel);
    string message = string.Empty;

    if (result != ResCodeRuleAdd_Type.R00)
    {
        // Get the error message from resource file
        message = ...
    }

    return Json(message, JsonRequestBehavior.AllowGet);
} 
```

如何在获取 JSON 调用后关闭当前弹出窗口并打开另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:21:16.553

您必须先将对话框添加到页面：将其放在当前：

```
$('#errorDialog').dialog({
    autoOpen: false,
    modal: true,
    resizable: false,
    width: 330,
    title: 'My Error Dialog'
});
//current code follows:
$('#confirmationDialog').dialog({ 
```

那么你所拥有的应该工作。

编辑：我考虑了一下，您可能需要修复`$(this)`成功处理程序内部的范围。

更改为：

```
var myDialog = $('#confirmationDialog').dialog({ 
```

然后使用：

```
myDialog.dialog('close'); 
```

在该处理程序中关闭第一个对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:17:16.277

In the getJSON callback close the window

```
$.getJSON( "test/demo", function( data) {
     if(data==='success'){
         $( ".selector" ).dialog( "close" );
         $( ".selector" ).dialog( "open" );
     }
}); 
```

To close the jquery UI dialog use this

```
$( ".selector" ).dialog( "close" ); 
```

Top Open a new dialog

```
$( ".selector" ).dialog( "open" ); 
```

for more info check the api of jquery UI [http://api.jqueryui.com/dialog/#method-close](http://api.jqueryui.com/dialog/#method-close)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-05T09:10:37.957

```
var dialogAviso; 

    url = "search.php";
    $.ajax( {
            "type": "POST", 
            "url": url, 
            "data": data, 
            "global": false,
            "async": true,
               "success": function(html){
                    msg_title ="Search";
                    msg_width = "600px";
                    showDialog(html,msg_title,msg_width);
                }
         } );           

function showDialog(texto, titulo, width,height){
.......................
// IMPORTANT: send info to the aux variable, so you can access it from the dialog.
    dialogAviso = $('#divaviso').dialog({
        autoOpen: true,
        width: width,
        height:height,
        modal:true,
        resizable: false,
        title: titulo,
        dialogClass: 'dialog',
        closeOnEscape:true,
        beforeClose: function(){
        },
        close: function(event, ui) { 
            $(this).dialog( "destroy" );            
        },
        show: "slide",
        zindex: 100,
        stack:true,
        buttons: {} 
    }); 
    $('#divaviso').html(texto); 
}

search.php: 
<table>
    <tr>
    <td><a style=\"text-decoration:underline;cursor:pointer;\" onclick="returnInfo(8)">Hello World</td>';
    </tr>   
</table>

functin returnInfo (id){
// Do something with the selected item

// close dialog
dialogAviso.dialog("close");

} 
```

# unit-testing - 在单元测试中验证函数调用顺序

> ID：16085428
> 
> 赞同：2
> 
> 时间：2013-04-18T14:14:39.663
> 
> 标签：unit-testing, nsubstitute, fluent-assertions

我想要一个单元测试来验证 2 个函数调用以正确的顺序发生。在示例中，第一个函数加密文件并将其保存到文件系统，第二个函数将加密文件发送到第 3 方处理器（通过 FTP）。

我使用 NSubstitute 作为模拟框架和 FluentAssertions 来帮助进行测试验证。使用 NSubstitute 开箱即用似乎无法实现这一点。

```
public void SendUploadToProcessor(Stream stream, string filename)
{
    var encryptedFilename = FilenameBuilder.BuildEncryptedFilename(filename);
    FileEncrypter.Encrypt(stream, filename, encryptedFilename);
    FileTransferProxy.SendUpload(encryptedFilename);
}

[TestMethod, TestCategory("BVT")]
public void TheEncryptedFileIsSent()
{
    var stream = new MemoryStream();
    var filename = Fixture.Create<string>();

    var encryptedFilename = Fixture.Create<string>();
    FilenameBuilder
        .BuildEncryptedFilename(Arg.Any<string>())
        .Returns(encryptedFilename);

    Sut.SendUploadToProcessor(stream, filename);

    // Something here to verify FileEncrypter.Encrypt() gets called first

    FileTransferProxy
        .Received()
        .SendUpload(encryptedFilename);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:28:34.867

[`Received.InOrder`](http://nsubstitute.github.io/help/received-in-order/)在命名空间中尝试`NSubstitute.Experimental`。

像这样的东西（我还没有测试过）：

```
Received.InOrder(() => {
  FileEncrypter.Encrypt(stream, filename, encryptedFilename);
  FileTransferProxy.SendUpload(encryptedFilename);
}); 
```

如果您不习惯依赖实验性功能，则需要设置回调以按顺序存储调用，然后对其进行断言。

```
var calls = new List<string>(); //or an enum for different calls
FileEncrypter.When(x => x.Encrypt(stream, filename, encryptedFilename))
             .Do(x => calls.Add("encrypt"));
FileTransferProxy.When(x => x.SendUpload(encryptedFilename))
                 .Do(x => calls.Add("upload"));
// Act

// Assert calls contains "encrypt","upload" in the correct order 
```

如果您最终尝试，请在[讨论组](https://groups.google.com/group/nsubstitute)`Received.InOrder`中留下一些反馈。如果我们得到一些关于它对其他人运行良好的反馈，那么我们可以将它提升到核心命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T18:52:54.660

虽然这不是一个持久的答案，但将显式顺序验证为单元测试的一部分是不好的做法。你永远不应该测试实现细节。只需确保将输入正确转换为输出并添加一些替代方案，这些方案基本上可以证明预期的行为。这就是为什么这个功能在 RhinoMocks 中被弃用并且 FakeItEasy 甚至不支持它的确切原因。

# java - 如何准备包含列表对象的列表？

> ID：16085434
> 
> 赞同：-3
> 
> 时间：2013-04-18T14:14:58.303
> 
> 标签：java

我正在从数据库中获取记录以及像这样的值

```
1,"a"
1,"b"
2,"c"
3,"d"
3,"e"
4,"f" 
```

在这里，我将结果放入 ResultSet 现在我想准备像这样的列表

```
[[a,b],[c],[d.e],[f]] 
```

任何人都可以帮助我解决这个问题，我尝试了列表和地图概念，但我只得到最后一个列表对象。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:16:30.923

您需要使用 Map，但使用 an`Integer`作为键，使用 a`List<String>`作为值。只需对遇到的每个键执行检查，以确保映射包含列表（空或其他）。如果没有，则*首先*添加列表，然后将值附加到列表中。

您还可以调查[MultiMaps](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

# twitter - 如何对 TWITTER API 进行功能测试

> ID：16085435
> 
> 赞同：-1
> 
> 时间：2013-04-18T14:14:59.557
> 
> 标签：twitter, mocha.js, shoulda

我正在为一个项目创建一个 Web 应用程序。我想让我的用户使用 twitter API 将博客发布到 twitter 上。他们将在我的网站内生成一个博客，如果他们想通过 twitter 分享他们的博客。没有太多测试 Twitter API 是否有效，更像是它在我的网站内部有效，我的语法是否合适，以及我如何合并它是正确的。它是一个班级项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:51:28.597

假设您使用 C# / ASP.NET，您将编写一个类来进行可以独立测试的 API 调用。我建议下载开源 Twitterizer DLL 并将其插入您的 Web 项目，主要用于 OAuth 实现。

因此，如果您要发布一条推文，您可以编写一个静态方法，如下所示：

```
public static bool CreateTweet(Twitterizer.OAuthTokens tokens, string tweetText)
{
    var response = Twitterizer.TwitterStatus.Update(tokens, text);
    return response.Result == Twitterizer.RequestResult.Success;
} 
```

您的测试代码如下所示：

```
 void Test()
    {
        var tokens = new Tw.OAuthTokens
            {
                _accessToken,
                _accessTokenSecret,
                _consumerKey,
                _consumerSecret,
            };

        var testTweet = "test tweet text";
        CreateTweet(tokens, testTweet);
    } 
```

您需要通过 Twitter 的登录过程获取令牌，或者如果您不希望用户登录，则将它们存储起来。

然后基本上上面的测试代码将被移动到您的 ASP.NET 应用程序中适当的代码隐藏部分，它应该可以正常工作！

# javascript - 如何验证不允许汉字

> ID：16085443
> 
> 赞同：0
> 
> 时间：2013-04-18T14:15:39.217
> 
> 标签：javascript, jquery, regex

当用户输入中文字符时，我的一条 SQL 语句会中断。我做了一些研究，找不到任何东西。

是否有任何可用的代码，如插件或 javascript 函数来验证并仅允许英文字母数字并允许特殊符号。

如果我验证汉字，则可能有其他语言正确，所以我认为只允许包含所有数字和符号组合的英文字符。

任何方向或输入将不胜感激谢谢

我试过这样的东西，但这只允许字母数字

```
/[^a-zA-Z 0-9]+/g 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T14:18:48.630

UTF8 编码文本而不是禁止语言怎么样？

# angularjs - AngularJS：具有路由的多个视图而不会丢失范围

> ID：16085446
> 
> 赞同：12
> 
> 时间：2013-04-18T14:15:43.577
> 
> 标签：angularjs, angularjs-scope, angularjs-routing

我正在尝试实现一个经典的列表/详细信息 UI。单击列表中的项目时，我想显示该项目的编辑表单，*同时仍显示列表*。我正在尝试解决 Angular 的 1-view-per-page 限制，并决定通过将所有 URL 路由到同一个控制器/视图来做到这一点。（也许这是我问题的根源，我对替代方案持开放态度。）

路由：

```
$routeProvider
    .when('/list', { templateUrl: '/Partials/Users.html', controller: UserController })
    .when('/edit/:UserId', { templateUrl: '/Partials/Users.html', controller: UserController })
    .otherwise({ redirectTo: '/list' }); 
```

视图（/Partials/Users.html）：

```
<!-- List of users -->
<div ng-repeat="user in Users">
    <a href="*/edit/{{ user.Id }}">Edit {{ user.Name }}</a>
</div>

<!-- Edit form -->
<div>
    {{ SelectedUser.Name }}
</div> 
```

控制器：

```
function UserController($scope, $routeParams) {
    // the model for the list
    $scope.Users = GetUserListFromService();

    // the model for the edit form
    if ($routeParams.UserId != null)
        $scope.SelectedUser = GetUserFromService($routeParams.UserId);
} 
```

问题：

1.  单击编辑链接时，控制器会使用新范围重新实例化，因此我必须重新初始化用户列表。（在一个更复杂的示例中，我可以将来自用户的输入存储到模型中，这也会丢失。）我更愿意保留前一个路由的范围。
2.  我更喜欢使用单独的控制器（或者，正如许多其他 Angular 开发人员所抱怨的那样，拥有多个显示视图的能力！）但这会导致同样的问题，即失去范围。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T14:59:20.927

尝试使用 ui-router：http: [//github.com/angular-ui/ui-router](http://github.com/angular-ui/ui-router)。

与角度默认路由相比，它们具有嵌套视图和更容易的状态管理:-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-22T18:25:50.640

核心 AngularJS 不支持多个视图。您可以为此目的使用此库，它支持页面上任意数量的嵌套视图，其中每个级别都使用自己的控制器和模板独立配置：

[http://angular-route-segment.com](http://angular-route-segment.com)

使用起来比ui-router简单多了。示例配置可能如下所示：

```
$routeSegmentProvider.

when('/section1',          's1.home').
when('/section1/prefs',    's1.prefs').
when('/section1/:id',      's1.itemInfo.overview').
when('/section1/:id/edit', 's1.itemInfo.edit').
when('/section2',          's2').

segment('s1', {
    templateUrl: 'templates/section1.html',
    controller: MainCtrl}).

within().

    segment('home', {
        templateUrl: 'templates/section1/home.html'}).

    segment('itemInfo', {
        templateUrl: 'templates/section1/item.html',
        controller: Section1ItemCtrl,
        dependencies: ['id']}).

    within().

        segment('overview', {
            templateUrl: 'templates/section1/item/overview.html'}).

        segment('edit', {
             templateUrl: 'templates/section1/item/edit.html'}).

        up().

    segment('prefs', {
        templateUrl: 'templates/section1/prefs.html'}).

    up().

segment('s2', {
    templateUrl: 'templates/section2.html',
    controller: MainCtrl}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T16:41:18.930

我发现[Angular Multi View](https://github.com/vincentdieltiens/Angular-Multi-View)是这种场景的天赐之物。它允许您在路由更改时保留范围，并允许多个控制器共享同一路由*而无需嵌套您的视图*。

如果您的页面上有超过 2 个视图，我推荐使用 Angular Multi View。否则，当使用 ui-router 时，嵌套多个视图会很快变得混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-23T11:20:29.397

我想出了同样的问题，我个人不喜欢插件，因为它们不是绝对不可避免的。我刚刚将单例部分移至服务。

在我的情况下，有 :id[/:mode] 路由，如果用户也只更改模式或 id，我想以不同的方式做出反应。因此，我必须知道以前的身份。

因此，有一个带有 activate 方法的服务可以更新其状态。并且每次都使用以下代码重新初始化范围。

```
module.controller('MyController', ['$scope', '$routeParams', 'navigator', function($scope, $routeParams, navigator) {
    var id = null;
    var mode = null;

    if (typeof($routeParams.id)!='undefined')
    {
        id = $routeParams.id;
    }

    if (typeof($routeParams.mode)!='undefined')
    {
        mode = $routeParams.mode;
    }

    navigator.activate(id, mode);

    $scope.items = navigator.items;
    $scope.activeItem = navigator.activeItem;
    $scope.modes = navigator.modes;
    $scope.activeMode = navigator.activeMode;
}]); 
```

在激活方法中，我可以将 id 与单例的 activeItem.id 进行比较并做出不同的反应。

# c++ - C、C++ 中的 Shell 上下文菜单

> ID：16085452
> 
> 赞同：0
> 
> 时间：2013-04-18T14:15:55.490
> 
> 标签：c++, c, shell

`.txt`是否可以通过 C 或 C++（任一）程序将 shell 上下文菜单添加到所有文件？

我一直通过直接访问注册表来创建这些菜单。另外，我发现`C#`

特定代码和某些其他实现特定`c, C++`版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:35:23.937

最简单的方法在[“Shell Lightweight API”](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773477%28v=vs.85%29.aspx)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:26:09.380

有允许您访问注册表的 API。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724875(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724875(v=vs.85).aspx)

请注意，您的应用程序必须以管理员身份运行，否则更改将是“[虚拟](http://msdn.microsoft.com/en-us/library/aa905330.aspx)的”。

[您可以在此帮助文件](http://download.microsoft.com/download/D/9/B/D9BEB875-BC1D-4338-A655-251F4F353B2E/Top10Wave.exe)中看到一些关于如何提升应用程序权限的代码。主题基础>安全应用程序>为 Windows Vista 设计 UAC 应用程序>步骤 3：重新设计以实现 UAC 兼容性，步骤 4：重新设计 UI 以实现 UAC 兼容性。

# java - 确保使用 GridFS 完成文件插入 - MongoDB Java API

> ID：16085455
> 
> 赞同：2
> 
> 时间：2013-04-18T14:16:07.780
> 
> 标签：java, mongodb, save, gridfs

我有一个 REST 服务来上传图片，这是负责在 mongodb 中注册的主要代码：

```
public String writeFiles(InputStream inputStream, String fileName, String contentType) throws IOException {
    // save the file
    GridFS gridFS = new GridFS(getDB(), Collections.PICTURES_FILES.name());

    GridFSInputFile gridFSInputFile = gridFS.createFile(inputStream, fileName);
    gridFSInputFile.setContentType(contentType);
    gridFSInputFile.setMetaData(new BasicDBObject(ORIGINAL_PICT_COL, true));

    gridFSInputFile.save();
    return gridFSInputFile.getId();
} 
```

然后服务将文件 ID 返回给客户端，以便客户端可以请求并显示上传的图像。

问题在于非常大的图像：有时在上传后立即通过其 ID 请求图像时会出现 HTTP 404 错误（由于服务器端的图像 ID 未知，这是正确的行为）。我想这是因为服务器端的注册时间大于用于取回 ID 并在客户端请求新图像的时间——即“.save()”操作是异步的，对吗？

我的问题：在返回给定代码中的 ID 之前，如何确保保存操作已完成？或者如何获取 .insert 操作的结果对象？

做一个

```
 gridFSInputFile.validate(); 
```

就够了吗？

或者

```
 getDB().getLastError() 
```

?

我不能轻易地重现这个“错误”，所以我问这个问题，以防有经验的人已经知道如何解决这个问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T17:02:37.413

如果您使用的是最新版本的 Java 驱动程序（2.10 或更高版本），请尝试创建 MongoClient 实例而不是 Mongo 实例。MongoClient 实例的默认写入关注点是 WriteConcern.ACKNOWLEDGED，因此在写入操作完成之前保存方法不会完成。

否则，在您的 getDB 方法（未显示）中，调用方法 DB.setWriteConcern(WriteConcern.SAFE) 来更改默认写入关注点。

另一种可能性是您正在从副本集的次要成员中读取。默认是从主数据库读取，但是如果您覆盖它，那么您的读取最终将是一致的，在这种情况下您也会看到这个问题。

# google-apps-script - 以三个单元格为条件的 Google 电子表格

> ID：16085461
> 
> 赞同：0
> 
> 时间：2013-04-18T14:16:24.390
> 
> 标签：google-apps-script, google-sheets, conditional-statements

我一直在尝试在我的电子表格上实现一个条件，基本上是一个带有三个条件单元格的检查表，其中包含“是”或“否”。我想要实现的（使用onEdit）是一个所有三个单元格都包含“是”，输入下一列，最后输入“是”的日期。我已经设法创建了其他运行良好的脚本，但是这个让我很难过。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:04:37.357

由于可以单独编辑单元格，因此您的 onEdit 将始终需要检查所有条件单元格的值，并且仅在全部为“是”时才写入时间戳。

```
function onEdit(event) {
  var conditionalCells = [ "B1", "B2", "B3" ];  // Array of monitored conditionals
  var inList = false;                           // assume edit was outside of the conditionals
  var allYes = true;                            // and that all values are "Yes".
  var sheet = event.source;  // Sheet that was edited
  var cell = event.range.getA1Notation();  // get range description
  // Loop through all conditionals checking their contents.
  // Verify that the edit that triggered onEdit() was in one
  // of our conditional cells, setting inList true if it was.
  for (var i = 0; i < conditionalCells.length && allYes; i++) {
    if (cell == conditionalCells[i]) inList = true;
    allYes = (sheet.getRange(conditionalCells[i]).getValue() == "Yes");
  };
  // If this was our final Yes, record the date.
  // By validating inList, we ensure we record only the first time
  // all conditionals are "Yes".
  if (inList && allYes) sheet.getRange("C1").setValue(new Date());
} 
```

# php - 带有css的if循环的php语法问题

> ID：16085464
> 
> 赞同：0
> 
> 时间：2013-04-18T14:16:30.767
> 
> 标签：php, syntax

我不是一个很好的编码员，我的技术主要包括复制粘贴和编辑，直到它起作用。

我的 index.php 中有一个 joomla 2.5 站点的代码，它只在主页上输出某种 css 样式。

```
<?php
$app = JFactory::getApplication();
$menu = $app->getMenu(); ?>
<?php if ($menu->getActive() == $menu->getDefault()): ?>
<style type="text/css">
  #contentonderaan {min-height: 462px;}
</style>
<?php endif; ?> 
```

这工作正常，但现在我想对所有不是主页的页面使用“else”语句来提供备用最小高度 css。这应该很容易吧？但是我的语法有问题，因为我无法让它工作。那么应该怎么写呢？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:17:47.993

你不工作的语法是什么？

它应该是一个`else:`.

```
<style type="text/css">
<?php if ($menu->getActive() == $menu->getDefault()): ?>
    #contentonderaan {min-height: 462px;}
<?php else: ?>
    #contentonderaan {min-height: YOUR_HEIGHTpx;}
<?php endif; ?>
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:21:15.593

```
<?php
 $app = JFactory::getApplication();
 $menu = $app->getMenu(); ?>
<style type="text/css">
<?php if ($menu->getActive() == $menu->getDefault()): ?>

       #contentonderaan {min-height: 462px;}

<?php else?>

      #contentonderaan {min-height: 100px;} //giving min height 

<?php endif; ?>
</style> 
```

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:18:31.087

```
<?php
   $app = JFactory::getApplication();
   $menu = $app->getMenu();
   if ($menu->getActive() == $menu->getDefault()) { 
?>
<style type="text/css">
  #contentonderaan {min-height: 462px;}
</style>
<?php }
else{
 ?>
Some other thing

<?php } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:19:08.527

您可以使用大括号：

```
<?php
    $app = JFactory::getApplication();
    $menu = $app->getMenu();
?>
<?php if ($menu->getActive() == $menu->getDefault()){ ?>
    <style type="text/css">
        #contentonderaan {min-height: 462px;}
    </style>
<?php }else{ ?>
    <!-- foo -->
<?php } ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T14:19:09.267

```
<?php
$app = JFactory::getApplication();
$menu = $app->getMenu(); ?>
<?php if ($menu->getActive() == $menu->getDefault()) { ?>
<style type="text/css">
  #contentonderaan {min-height: 462px;}
</style>
<?php } else { ?>
<style type="text/css">
  #contentonderaan {min-height: 500px;}
</style>
<?php } ?> 
```

或者你也可以使用`else:`

```
<?php
$app = JFactory::getApplication();
$menu = $app->getMenu(); ?>
<?php if ($menu->getActive() == $menu->getDefault()): ?>
<style type="text/css">
  #contentonderaan {min-height: 462px;}
</style>
<?php else: ?>
<style type="text/css">
  #contentonderaan {min-height: 500px;}
</style>
<?php endif; ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T14:20:18.163

使用简写语法以提高可读性：

```
<style type="text/css">
<?php if ($menu->getActive() == $menu->getDefault()): ?>
    #contentonderaan {min-height: 462px;}
<?php else: ?>
    #contentonderaan {min-height: 642px;}
<?php endif; ?>
</style> 
```

# ruby - 从 Ruby 调用 Bash 命令并返回输出？

> ID：16085466
> 
> 赞同：0
> 
> 时间：2013-04-18T14:16:31.410
> 
> 标签：ruby

以下代码包含一个命令和一个字符串：

```
files = `ls /tmp` 
```

我想`/tmp`成为一个变量而不是静态字符串，并且理想情况下希望它像：

```
dir = '/tmp'
command = 'ls ' + dir
files = `command` 
```

实现此目的的正确 Ruby 语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:18:21.600

使用字符串插值：

```
dir   = '/tmp'
files = `ls #{dir}` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:18:21.763

```
files = `#{command}` 
```

那是你要找的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T14:39:59.203

使用标准的[*shellwords*](http://www.ruby-doc.org/stdlib-2.0/libdoc/shellwords/rdoc/index.html)库。它将负责正确的转义，这将有助于保护您免受 shell 注入攻击。

```
require 'shellwords'

command = [
  'ls',
  dir
].shelljoin
files = `#{command}` 
```

如果*dir*来自不受信任的输入，上面的代码仍然允许某人查看您系统上的任何目录。但是，使用 shelljoin 可以保护您免受他人注入，例如，“删除我硬盘上的所有文件”命令。

在列出目录的特殊情况下，内置类[*Dir*](http://www.ruby-doc.org/core-2.0/Dir.html)会做得很好：

```
files = Dir[File.join(dir, '*')] 
```

[在这里，我们使用File::join](http://www.ruby-doc.org/core-2.0/File.html#method-c-join)在目录末尾添加一个 glob 。 [Dir::[]](http://www.ruby-doc.org/core-2.0/Dir.html#method-c-5B-5D)然后返回该目录中文件的路径。

# java - Java中的PBEWithSHAAnd128BitRC4实现

> ID：16085467
> 
> 赞同：1
> 
> 时间：2013-04-18T14:16:38.817
> 
> 标签：java, security

我正在使用 IBM JRE，我想为我的密码实现 PBEWithSHAAnd128BitRC4 算法，所以我应该为我的 SecretKeyFactory 和 SecretKeySpec 使用哪种算法，下面是我从 provider.getInfo() 方法为 IBMJCE 提供者获得的支持算法的密钥。

```
Cipher algorithms                  : Blowfish, AES, DES, TripleDES, PBEWithMD2AndDES, 
                                       PBEWithMD2AndTripleDES, PBEWithMD2AndRC2, 
                                       PBEWithMD5AndDES, PBEWithMD5AndTripleDES, 
                                       PBEWithMD5AndRC2, PBEWithSHA1AndDES 
                                       PBEWithSHA1AndTripleDES, PBEWithSHA1AndRC2 
                                       PBEWithSHAAnd40BitRC2, PBEWithSHAAnd128BitRC2 
                                       PBEWithSHAAnd40BitRC4, PBEWithSHAAnd128BitRC4 
                                       PBEWithSHAAnd2KeyTripleDES, PBEWithSHAAnd3KeyTripleDES 
                                       Mars, RC2, RC4, ARCFOUR
                                       RSA, Seal
Key agreement algorithm            : DiffieHellman
Key (pair) generator               : Blowfish, DiffieHellman, DSA, AES, DES, TripleDES, HmacMD5,
                                       HmacSHA1, Mars, RC2, RC4, RSA, Seal, ARCFOUR
Algorithm parameter generator      : DiffieHellman, DSA
Algorithm parameter                : Blowfish, DiffieHellman, AES, DES, TripleDES, DSA, Mars,
                                       PBEwithMD5AndDES, RC2
Key factory                        : DiffieHellman, DSA, RSA
Secret key factory                 : Blowfish, AES, DES, TripleDES, Mars, RC2, RC4, Seal, ARCFOUR
                                       PKCS5Key, PBKDF1 and PBKDF2(PKCS5Derived Key). 
```

下面是我的代码，它给出了 java.security.InvalidKeyException: Missing password 异常。

```
Decrypter(String passPhrase) throws Exception {
        SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        KeySpec spec = new PBEKeySpec(passPhrase.toCharArray(), salt, iterationCount, keyStrength);
        SecretKey tmp = factory.generateSecret(spec);
        key = new SecretKeySpec(tmp.getEncoded(), "RC4");
        dcipher = Cipher.getInstance("PBEWithSHAAnd128BitRC4");
    }

    public String encrypt(String data) throws Exception {
        dcipher.init(Cipher.ENCRYPT_MODE, key);
        AlgorithmParameters params = dcipher.getParameters();
        System.out.println("getAlgorithm : "+params.getAlgorithm());
        iv = params.getParameterSpec(IvParameterSpec.class).getIV();
        byte[] utf8EncryptedData = dcipher.doFinal(data.getBytes());
        String base64EncryptedData = new sun.misc.BASE64Encoder().encodeBuffer(utf8EncryptedData);
        System.out.println("IV " + new sun.misc.BASE64Encoder().encodeBuffer(iv));
        System.out.println("Encrypted Data " + base64EncryptedData);
        return base64EncryptedData;
    }

    public String decrypt(String base64EncryptedData) throws Exception {
        dcipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv));
        byte[] decryptedData = new sun.misc.BASE64Decoder().decodeBuffer(base64EncryptedData);
        byte[] utf8 = dcipher.doFinal(decryptedData);
        return new String(utf8, "UTF8");
    } 
```

还有一个问题，因为我不能使用像 BouncyCastleProvider 这样的第三方，所以默认 java 提供程序中最安全的算法是什么？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:42:31.463

安全是一个移动的目标。防止什么和多长时间。如果您在一小时后加密没有价值的交易数据，几乎任何事情都可以。如果您需要长时间保持某些东西的安全，您需要一个用于 PK 系统的长密钥，越长越好。但是您确实为密钥生成和某些类型的流加密/解密付出了代价。

加密系统的第一个失败不是算法本身，而是系统的实现，通常是密钥是如何生成或存储的。也就是说，Blowfish 和 AES 都备受推崇，如果实施得当，应该就是您所需要的一切。我不能高度推荐[http://www.schneier.com/ 。](http://www.schneier.com/)应用密码学有点过时，大约有 10 年的历史，但它是专门针对程序员的领域的有力解释。他的博客信息丰富。如果您需要有关算法的更多详细信息，请前往那里搜索。在 java 实现中不会有很多帮助，但你可以在 SO 上得到它。

# android - 在 android canvas 中为什么矩阵太慢而且太迟钝

> ID：16085473
> 
> 赞同：0
> 
> 时间：2013-04-18T14:16:49.470
> 
> 标签：android, animation, matrix, android-canvas, android-animation

我想围绕中心枢轴旋转android应用程序中的图像，以下是代码..

```
package com.android.maddy.canvs;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.drawable.Drawable;

import android.os.Handler;
import android.provider.OpenableColumns;
import android.view.MotionEvent;
import android.view.View;

public class drawview extends View {
    private Drawable d[]=new Drawable[2];

    Boolean done=false;
    Handler h;
    float th=0;
    public drawview(Context context) {
        super(context);
        d[0]=context.getResources().getDrawable(R.drawable.appdatabk);
        d[1]=context.getResources().getDrawable(R.drawable.appdata);
        h = new Handler();
    }

    Runnable r =new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub

            th++;
            invalidate();
        }
    };

    public void onDraw(Canvas c){
        super.onDraw(c);
        Paint p =new Paint();
        Rect imageBounds = c.getClipBounds();  // for the background
        d[0].setBounds(imageBounds);

        d[0].draw(c);

        Matrix m = new Matrix();
        m.setTranslate(getWidth()/2, getHeight()/2);        
        m.preRotate(th,43,160); //my image is 86x320

        Bitmap b =     BitmapFactory.decodeResource(getResources(),R.drawable.appdata);//image of the bottle i want to rotate
        c.drawBitmap(b,m, p);
        p.setColor(Color.BLUE);
        h.postDelayed(r,1);

    }

    } 
```

这里发生的是矩阵计算减慢了旋转速度，因此它给出了丑陋的缓慢输出。如果您有另一种方法可以在不使用矩阵的情况下围绕中心枢轴旋转图像，或者有其他方法，那么请帮帮我。 . 我还删除了矩阵并使用 x+r*(Math.cos(th)) 和 y+r*(Math.sin(th)) 检查了 drawBitmap() 函数中的旋转，它们工作正常，但图像不旋转围绕枢轴..请帮助..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:29:07.157

矩阵相当快。让你慢下来的是你在 onDraw 中创建类和加载位图。在类中创建 Paint 和 Matrix 之一，并且还加载一次位图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T15:41:38.240

我有同样的问题。我认为会发生什么是画布将矩阵值存储到一个数组中，并且旋转画布的次数越多，它就会填满。

当你使用`Matrix.postRotate(degrees, px, py)`和`Canvas.concat(Matrix)`

# ios - 移动到 Amazon ec2 服务器后，推送通知停止工作

> ID：16085475
> 
> 赞同：4
> 
> 时间：2013-04-18T14:16:55.610
> 
> 标签：ios, amazon-ec2, windows-server-2008, apple-push-notifications

我一直在使用 ad-hoc 发行版测试我的 iPad 应用程序。

在我们的服务器（运行 Windows Server 2008）上，APNS 警报通过正常。

在 ec2（也运行 Windows Server 2008）上，它们永远不会出现。

两个 ad-hoc 版本之间的唯一区别是它们指向的服务器。两者都具有相同的代码签名设置。

我按照相同的程序在两台服务器上导入证书，据我所知，两台服务器上的证书完全相同。

我还打开了端口 5223、2196、2195 和 443 并允许 17.0.0.0/8 地址块：

![在此处输入图像描述](https://i.stack.imgur.com/fJc7h.png)

我什至尝试关闭防火墙，但没有任何乐趣，我仍然无法弄清楚为什么它可以在一个上工作，而在另一个上不行。

有人有想法么？

-编辑-

我正在使用 MoonAPNS 来处理通过 C#/ASP.Net Web 服务发送通知。不知道这是否有什么不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T18:10:20.480

使用 EC2 推送通知效果很好。在几个应用程序中使用/实现它。这里有几件事要检查

1.  连接到 APN 服务器时是否出现错误？尝试使用`$ telnet gateway.push.apple.com 2195`. 它有效吗？如果没有，您可能需要更改安全组/打开必要的端口

2.  如果服务器说消息发送成功，但您没有在应用程序中收到它，请确保检查您正在使用的 mobileprovision 和 pem 文件

既然你提到了 telnet 工作并且你已经检查了 pem 和 mobileprovisions，还有一些其他的事情要检查

1.  当 MoonAPNS 尝试连接到 APN 服务器时，您是否收到任何错误？

2.  如果没有返回错误，您是否检查了设备令牌是否存储在您的数据库中并且它是您的测试设备的令牌？

3.  如果消息发送正常，您是否 ping 反馈服务？他们是否返回特定设备令牌（即您的设备）的错误？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:15:45.707

事实证明，这与 Amazon ec2 没有什么特别的关系，而是不仅应该很明显，而且我之前也遇到过问题。

我正在使用 MoonAPNS，问题是这一行的第一个参数：

```
PushNotification push = new PushNotification(true, certificate, password); 
```

该`true`参数告诉 MoonAPNS 将通知发送到 Apple 的沙箱服务器。

`false`告诉它发送到生产服务器。

我`false`在我们自己的服务器和`true`亚马逊 ec2 上都有。

两者都是现在`false`，并且通知最终来自 ec2。

感谢大家的努力。

# oxygene - Delphi Prism 在任何重要方面都优于 RemObjects Oxygene 吗？

> ID：16085485
> 
> 赞同：1
> 
> 时间：2013-04-18T14:17:14.740
> 
> 标签：氧气, delphi-prism, oxygene

我们有两个单独的标签：

*   [https://stackoverflow.com/tags/oxygene/info](https://stackoverflow.com/tags/oxygene/info)
*   [https://stackoverflow.com/tags/delphi-prism/info](https://stackoverflow.com/tags/delphi-prism/info)

他们读起来就像那些是不同的产品，更像是 Prism 是 Oxygen 的超集，而后者是“只是编译器”，而 Prism 到 Oxygene 就像 Lazarus 到 FPC。

也许那是某个时候的照片。但是看看[Prism 的退出](http://blogs.remobjects.com/blogs/mh/2013/04/17/p5822)，我想知道 Prism 中是否还有一些 Oxygene 遗漏的东西？

如果不是，那么可能有时间让[氧气](/questions/tagged/oxygene "显示标记为“氧气”的问题")成为 One True Tag 并使[delphi-prism](/questions/tagged/delphi-prism "显示标记为“德尔福棱镜”的问题")只是`Oxygene`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T17:32:58.933

我们正在合并这两个标签，是的。fwiw，Prism 不是，也从来不是 Oxygene 的超级组。Prism 与 .NET 的 Oxygene 完全相同。

（也就是说，这个讨论真的属于元数据吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:15:27.027

它实际上是相反的。Prism*只是*Oxygene 编译器的 .NET“风格”。Oxygene 包括 Prism 所做的一切，以及更多。[Oxygene](http://www.remobjects.com/oxygene/)还包括 Java 风格（用于 Android 开发）以及即将发布的“Cocoa”版本，目前代号为“Nougat”（用于 Mac 和 iOS 开发）。

当 Delphi Prism 首次发布时，有一些现有的 .NET 资源与它捆绑在一起，但不久之后它们就被弃用并删除了。大多数 Delphi Prism 和 Prism 版本只是 Oxygene 的一个子集。

您在描述中看到的差异归结为品牌。从技术上讲，没有。

在不相关的注释中，如果您发现自己在为 .NET 和 Delphi 开发同时使用 Oxygene，那么您也应该查看[Hydra](http://remobjects.com/hydra)。

# android - 扩展 ViewGroup 时正确实现 onMeasure()

> ID：16085488
> 
> 赞同：2
> 
> 时间：2013-04-18T14:17:21.487
> 
> 标签：android, grid-layout

Android 示例之一 ( `FixedGridLayout`) 扩展了 a`ViewGroup`以允许在将新项目添加到网格时进行自定义转换。该代码按预期工作，但没有实现滚动。因此，我将整个布局包装起来，`ScrollView`期望这可以解决问题。然而，看起来`FixedGridLayout`视图实际上比它应该的大得多，在项目之后留下了很多可滚动的空间。

我怀疑这个问题与 onMeasure() 的实施方式有关。我是对的，如果是这样，这段代码有什么问题？

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int cellWidthSpec = MeasureSpec.makeMeasureSpec(mCellWidth, MeasureSpec.AT_MOST);
    int cellHeightSpec = MeasureSpec.makeMeasureSpec(mCellHeight, MeasureSpec.AT_MOST);

    int count = getChildCount();
    for (int index=0; index<count; index++) {
        final View child = getChildAt(index);
        child.measure(cellWidthSpec, cellHeightSpec);
    }

    // Use the size our parents gave us, but default to a minimum size to avoid
    // clipping transitioning children
    int minCount =  count > 3 ? count : 3;
    setMeasuredDimension(resolveSize(mCellWidth * minCount, widthMeasureSpec),
            resolveSize(mCellHeight * minCount, heightMeasureSpec));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T01:25:13.933

`ScrollView`测量后只关心内部子视图的垂直高度，但除非内部子级将高度设置为大于父级，否则它不会滚动。

您可以调用`getHeight()`内部视图来查看它是否计算出比您预期的更大的值。该方法仅在布局完成后有效。

您发布的代码似乎确实有错误。

```
int minCount =  count > 3 ? count : 3;
setMeasuredDimension(resolveSize(mCellWidth * minCount, widthMeasureSpec),
        resolveSize(mCellHeight * minCount, heightMeasureSpec)); 
```

代码是根据孩子的**总数**`width`设置和。如果我假设一个网格布局模式，那么宽度计算为，高度计算为。`height`**`mCellWidth * columns``mCellHeight * rows`**

 **如果您使用孩子的总数设置高度值，那么这将解释为什么您滚动超出了布局的底部。**

# c++ - 将“边距”绘制为 IDE/编辑器功能

> ID：16085494
> 
> 赞同：4
> 
> 时间：2013-04-18T14:17:43.497
> 
> 标签：c++, ide, drawing

我有一个适度的代码库 (C++)，它有据可查，但仍然非常复杂。我参与了它的维护和调试，我发现自己一遍又一遍地绘制相同的图片，以检查任性的指针并寻找优化。这些图片有很大帮助，因为在看似合乎逻辑的优化中，不时会出现不一致的情况。

问得太多了，但是有没有一个编辑器可以让我在页边空白处画图，比如 MS Paint，作为辅助注释，甚至可以将图片附加到特定的行？以防万一存在这样的事情，理想情况下，我希望将它与 Vim 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:58:39.557

这样的编辑器会遭受与 vim（或至少 vi）哲学相悖的特性蠕变。您更可能对在 vim 和外部涂鸦应用程序之间添加自己的间接层感到满意。正如@Mats Petersson 建议的那样，URL 是一种方式。或相对于某个目录的文件名，或 XML 标记。

识别您的图层的 vim 插件可能会自动显示您的涂鸦。如果 Clippy 可以实现为 vim 插件，那么它当然也可以。

如果 ascii-art 够用，试试 DrawIt 插件，[http:](http://www.vim.org/scripts/script.php?script_id=40) //www.vim.org/scripts/script.php?script_id=40 ；或使用该网页的搜索框。

# svn - 如何颠覆提交使私有化

> ID：16085500
> 
> 赞同：0
> 
> 时间：2013-04-18T14:17:56.633
> 
> 标签：svn, commit, private

我一直在做一个在 svn 中共享的项目。我在家里和办公室工作。我想从办公室私下提交一些文件（可能是部分功能），以便我可以在家更新文件并继续在家工作。私有意味着没有其他 svn 用户应该能够访问我的提交。这些私人提交仅供我从我离开的地方继续。

我知道分支和标记可能是保留私有分支的替代选择。但我想知道任何更简单的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:11:44.303

分支是实现您想要的标准/公认的方法。创建一个私有分支并设置基于路径的授权，只允许您的帐户访问它。确保您定期从主干合并，并尽可能频繁地回到主干。

或者，将您的工作副本保存在 USB 记忆棒上并进行处理，而不是在每台计算机上维护单独的工作副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:32:17.807

与“官方”具有相同 UUID 的本地存储库

对于私人提交，您：

*   将你的 WC 切换到本地仓库
*   犯罪
*   ...
*   从本地仓库更新 Home-WC
*   代码
*   犯罪

在办公室

*   将你的 WC 切换到本地仓库
*   更新
*   切换到官方仓库
*   提交作业

# linux - 使用 paramiko ssh 通道以 root 权限运行远程程序

> ID：16085502
> 
> 赞同：1
> 
> 时间：2013-04-18T14:17:59.730
> 
> 标签：linux, ssh, paramiko

我想以root权限远程执行程序`tcp_sender`，以下功能用于建立ssh连接

```
 def connect(hostname):
            ssh = paramiko.SSHClient()
            ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
            ssh.connect(hostname, username='usr', pkey=paramiko.RSAKey.from_private_key(open('id_rsa'), 'psw'), timeout = 240.0)
            return ssh 
```

然后我有3个解决方案：

解决方案**A)**

```
 ssh = connect(hostname)
    chan = ssh.invoke_shell()
    chan.send('sudo ./tcp_sender\n') 
```

用这个解决方案，远程`tcp_sender`没有执行，我检查了使用`ps -ef|grep "tcp_sender"`，没有进程

我试过`chan.send('sudo ./tcp_sender > log 2>&1\n')` 了，在日志中，它说：

```
sudo: no tty present and no askpass program specified 
```

解决方案**B)**

```
 ssh = connect(hostname)
    (stdin, stdout, stderr) = ssh.exec_command("[ -f tcp_sender ]  && echo 1 || echo 0")
    res = stdout.readlines()
    print hostname,res[0]
    if res[0] == '0\n':
            UnusedHostFile.write(hostname+'no tcp_sender exists\n')
    else:
            chan = ssh.invoke_shell()
            chan.send("sudo chmod 777 tcp_sender\n")
            # if a tcp_sender is runnning, kill it
            chan.send('x=`ps -ef|grep "tcp_sender"|grep -v "grep"|awk \'{print $2}\'`; [ -n "${x}" ] && sudo kill -9 $x\n')
            time.sleep(4)
            while not chan.recv_ready():
                    time.sleep(1)
            buf = ''
            buf +=chan.recv(9999)
            print buf
            chan.send('sudo ./tcp_sender\n') 
```

使用此解决方案，我只需添加一些不相关的行，然后遥控器`tcp_sender`就会运行，例如：

```
bash-4.0# ps -ef|grep "sender"
root      9348  9325  0 Apr07 ?        00:00:00 sudo ./tcp_sender
root      9349  9348  0 Apr07 ?        00:00:00 ./tcp_sender 
```

但是，它无法正常运行（如预期的那样）。在 中`tcp_sender`，有一个`fork()`，也许是因为这个？

我试过`chan.send('sudo ./tcp_sender > log 2>&1\n')` 了，在日志中，它是空的。因为我的程序中有很多错误检查相关`printf`，`tcp_sender`所以我认为日志中应该有`printf`结果，但它是空的。

另外，我注意到一个现象，如果我`kill -9 9348`，这两个过程都结束了。但是对于下一个解决方案C，进程9349将被移交给系统`init`进程1。

解决方案**C）：**

使用此解决方案，我可以正确运行遥控器`tcp_sender`。但是python脚本会被远程程序阻塞，直到它退出。我不希望我的脚本等待远程退出。

```
 log = open('log','a+')
    ssh = connect(hostname)
    (stdin, stdout, stderr) = ssh.exec_command("[ -f tcp_sender ] && echo 1 || echo 0")
    res = stdout.readlines()
    print hostname,res[0]
    if res[0] == '0\n':
            UnusedHostFile.write(hostname+"tcp_sender doesn't exists\n")
    else:
            chan = ssh.invoke_shell()
            chan.send("sudo chmod 777 tcp_sender\n")
            chan.send('x=`ps -ef|grep "tcp_sender"|grep -v "grep"|awk \'{print $2}\'`; [ -n "${x}" ] && sudo kill -9 $x\n')
            time.sleep(4)
            while not chan.recv_ready():
                    time.sleep(1)
            buf = ''
            buf +=chan.recv(9999)
            print buf
            chan.send('sudo ./tcp_sender\n')
            #chan.send('sudo whoami\n')
            time.sleep(2)
            (stdin, stdout, stderr) = ssh.exec_command("ps -ef|grep 'tcp_sender'|grep -v 'grep'|wc -l")
            res = stdout.readlines()
            while res[0].strip() != '0':
                    time.sleep(3)
                    (stdin, stdout, stderr) = ssh.exec_command("ps -ef|grep 'tcp_sender'|grep -v 'grep'|wc -l")
                    res = stdout.readlines()
                    print res[0].strip()
            while not chan.recv_ready():
                    time.slepp(1)
            buf = ''
            buf += chan.recv(9999)
            log.write(hostname+': '+''.join(str(elem) for elem in buf)+'\n\n')
    log.close() 
```

那么造成这种现象的潜在原因是什么？谁能给点建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:06:05.657

您正在混合您可能应该分开的东西。

首先，在远程端编写一个脚本`usr`（=您给[paramiko](https://github.com/paramiko/paramiko)的用户名）可以执行并且可以正确开始`tcp_sender`使用`sudo`而无需询问密码等。

在脚本中，`sudo`使用以下命令作为后台进程启动`nohup`：

```
nohup sudo ./tcp_sender 
```

nohup 确保新的子进程正确分离，以便在连接丢失/断开时保持活动状态。

当此脚本工作时，使用启动新脚本`ssh.exec_command('script')`

推理：使用 shell 和驱动 shell 的聪明的 Python 代码可能会做你想做的事，就像你在输入命令一样。但它总是很脆弱，很难测试——它是[上帝对象](http://en.wikipedia.org/wiki/God_object)的变体。

相反，将您的问题分解为可以独立开发和测试的小而不同的问题。你需要解决三个问题：

1.  `tcp_sender`本身。
2.  开始`tcp_sender`
3.  远程启动它

所以使用三种不同的工具来解决它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T17:12:38.993

同意其他评论 - 您正在混合可以单独解决的问题。很多人（包括我自己）都犯了这个错误。

Paramiko 功能强大且智能：它可以导航和响应 SSH 用户名和密码提示。但这是一个特例。大多数情况下，当您需要在 Paramiko 中响应 PROMPT 时，您基本上是等待然后在假定的提示处发送文本。这很乱。

这也与您的实际问题完全无关。

您要做的是编辑 /etc/sudoers 文件，以便您的自动化测试用户或组能够使用 NOPASSWD 运行您想要的精确命令。

假设我想在主机“ServerB”上远程 grep /var/log/auth.log。虽然 grep 可以由任何用户运行，但众所周知，此系统上的 auth.log 只能由用户 root 读取。所以：

1) 我的测试用户是“scott”，是“adm”组的成员。请参阅 /etc/groups 和 /etc/passwd。基本内容。

2) /etc/sudoers: %adm ALL=(ALL)NOPASSWD:/bin/grep

3）从远程系统，我运行： $ ssh scott@ServerB "sudo grep Accepted /var/log/auth.log" 2013-10-14T21:17:54+00:00 proc4-01-us1 sshd[28873] ：从 xxxx 端口 56799 ssh2 2013-10-14T21:19:16+00:00 proc4-01-us1 sshd[29367] 接受 scott 的公钥：从 xxxx 端口 56804 ssh2 2013-10-14T21:19 接受 scott 的公钥： 21+00:00 proc4-01-us1 sshd[29519]：接受来自 xxxx 端口 56805 ssh2 的 scott 公钥

砰，你完成了。

注意 请务必使用您在 sudoers 中指定的脚本的绝对文件系统路径。

务必使用 SSH 密钥。如果您愿意，可以使用密钥 + 密码。（请记住，Paramiko 可以回答登录提示）但这也意味着将您的密码存储在脚本中......

请考虑安全性。如果您将此权限附加给特殊用户，您并没有真正在此处学习安全性。当然，我描述的方法比将 sudo 密码硬编码到脚本中更安全。

除非在测试中，否则不要使用 NOPASSWD:ALL。明确指定允许的内容。

请考虑对这些用户可以运行的内容添加限制。例如，如果我总是从 EC2 机器运行此测试，我将只允许该用户从该 EC2 IP 进行连接。交谈时，我可以通过在“授权”键中添加前缀来限制用户可以运行的命令（即，如果我想避免全职运行 rsync 服务器，则限制该用户只能运行 rsync 命令例子）。

# android - 来自随机列表项位置的按钮 setText 显示错误结果

> ID：16085503
> 
> 赞同：0
> 
> 时间：2013-04-18T14:18:01.257
> 
> 标签：android, list, shuffle

我有一个带有数字“25”、“50”、“75”、“100”的字符串数组，我正在使用下面的方法来打乱列表项的位置。

```
public List<String> listNums() {

    List<String> numList = Arrays.asList(Nums);

    Collections.shuffle(numList);
    return numList; 
```

我也有这种方法可以将列表项分配给 4 个按钮：

```
protected void SetTxtNums(){
    NumGenerator numGen = new NumGenerator();

    bNum2.setText(numGen.listNums().get(0).toString());
    bNum3.setText(numGen.listNums().get(1).toString());
    bNum4.setText(numGen.listNums().get(2).toString());
    bNum5.setText(numGen.listNums().get(3).toString());
} 
```

我正在尝试通过单击另一个按钮将文本更改为上面的按钮，但这不起作用。onClick 代码是这样的：

```
case R.id.bNumGen:
        SetTxtNums();           
        break; 
```

问题是会产生重复的值。我希望每个按钮都有不同的数字，只是位置要改变。

如果我为这样的测试添加祝酒词：

```
Toast.makeText(getApplicationContext(), numGen.listBigNums().toString(), Toast.LENGTH_LONG).show(); 
```

然后在吐司上我得到正确的结果，按钮完全不同，其中两个甚至三个具有相同的值。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:26:34.570

首先，您确实在不同的列表上洗牌，而不是在所需的列表上。其次，您的逻辑是错误的。尝试这样的事情。

```
List<String> numList = Arrays.asList(Nums);
public List<String> listNums() {
return numlist;
}

public void shuffleList() {
    Collections.shuffle(intList);
    return numList;
} 
```

现在这样做：

```
protected void SetTxtNums(){
    NumGenerator numGen = new NumGenerator();
    numGen.shuffleList();

    bNum2.setText(numGen.listNums().get(0).toString());
    bNum3.setText(numGen.listNums().get(1).toString());
    bNum4.setText(numGen.listNums().get(2).toString());
    bNum5.setText(numGen.listNums().get(3).toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:29:11.407

```
numGen.listNums() 
```

每次返回一个新的随机列表。

# c# - T4。错误：表达式块评估为 Null

> ID：16085506
> 
> 赞同：3
> 
> 时间：2013-04-18T14:18:06.287
> 
> 标签：c#, .net, code-generation, t4

我添加了 template.tt 文件，如下所示：

```
<#@ template language="C#" debug="true" #>
<#@ output extension=".cs" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Collections.Generic" #>

using System;
using System.Collections.Generic;

namespace Test
{
    public class <#= this.ClassName#>
    {       

    }
}

<#+
    public string ClassName { get; set; }
#> 
```

我收到错误：

```
An expression block evaluated as Null
at Microsoft.VisualStudio.TextTemplating.ToStringHelper.ToStringWithCulture(Object objectToConvert)... 
```

我应该怎么做才能避免看到这些消息？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:26:30.820

问题是 ClassName 属性为空。修复错误的一种方法是将类功能块中的代码更改为：

```
<#+
    private string className = "";

    public string ClassName {
        get { return className; }
        set { className = value; }
    }
#> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:50:23.670

我假设，你想生成类似的东西

```
using System;
using System.Collections.Generic;

namespace Test
{
    public class MyClass
    {       

    }
} 
```

代码中的问题是在表达式块中，您引用`<#= this.ClassName#>`了类功能块中不存在的变量。修改代码如下。

```
<#@ template language="C#" debug="true" #>
<#@ output extension=".cs" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Collections.Generic" #>

using System;
using System.Collections.Generic;

namespace Test
{
    public class <#= this.ClassName #> //Expression Block
    {       
    }
}

<#+ //Class feature block
    public string ClassName = "MyClass";
#> 
```

# ruby-on-rails - 是否可以在两个不同的应用程序之间共享 cookie？

> ID：16085507
> 
> 赞同：1
> 
> 时间：2013-04-18T14:18:08.390
> 
> 标签：ruby-on-rails, session-cookies, cookiestore

我有两个独立的应用程序（仍然共享同一个数据库），其中一个是测试版体验。我很好奇是否可以使用 cookie_store 在它们之间共享会话数据。由于数据库已连接，可能我可以使用它吗？

例如，如果他们要在应用程序之间切换，但仍保持登录状态，我如何将会话 cookie 数据共享给其他应用程序？

# validation - W3C 验证器错误见下文

> ID：16085509
> 
> 赞同：0
> 
> 时间：2013-04-18T14:18:17.133
> 
> 标签：validation, w3c

像许多其他提问者一样，我在使用 W3C Validator 时遇到了两个问题。这是我在 Wordpress CMS 页面中的代码

```
[twocol_one]"Out of love with your kitchen. Is it time for some KGC . . .Kitchen Guidance Counselling?" Maybe we need to sit down together and see what the Duleek Olive Wood and Lime Green Fitted Kitchen does for you. With its rich Grainy Olive Wood doors mixed with the loud lime green slab doors there is definitely a statement that can be made here. Read more about Kitchen Makeovers Below!<br /><h2>Benefits Include:</h2>
<strong>
• Eye Level Oven &amp; Microwave
• Easy Access Corner Presses
• Easy to Clean
• Hydraulic Hinged Wall Units
</strong>
<h3>Shop Online - Click Below &amp; Off You GO!</h3>
[button link="http://www.kitchens4u.ie/shop" color="red"]Shop Online[/button]

[/twocol_one] [twocol_one_last]<a href="http://www.kitchens4u.ie/wp-content/uploads/2013/02/Duleek-Olivewood-Lime-Green.gif"><img class="alignnone size-medium wp-image-79" alt="the duleek olivewood and lime green fitted kitchen from kitchens4u.ie dublin ireland" src="http://www.kitchens4u.ie/wp-content/uploads/2013/02/Duleek-Olivewood-Lime-Green.gif" width="300" height="225" /></a>Duleek Olive Wood and Lime Geen Fitted Kitchen - Click Image to Enlarge<br />[/twocol_one_last][hr]<br /><h3 style="text-align: center;">Kitchen Tip No. 31: When Doing DIY Kitchens</h3><br /><em>"Measure Twice - Cut Once!"</em><br />[hr]<br />[twocol_one]<h2>What We Can Do For You!</h2>[unordered_list style="bullet"]<ul><li>FREE Consultation in your home.</li>
    <li>FREE 3D Graphic Design.</li>
    <li>Plumbing Service.</li>
    <li>Electrical Service.</li>
    <li>Gas Services.</li>
    <li>Plastering Services.</li>
    <li>Ceramic Tiling.</li>
    <li>Waste Removal.</li>
    <li>Safe Disposal of Old Appliances.</li>
    <li>Full Project Management.</li>
    <li>Give you Peace of Mind.</li>
    <li>CLICK BELOW TO LET US KNOW!</li></ul>[/unordered_list]<br />[button link="http://www.kitchens4u.ie/contact-us/" size="large" color="orange"]FREE CONSTULATION[/button] [/twocol_one] [twocol_one_last]<br /><h2>Discover The Easy Stress Free Way</h2><br />A fitted kitchen is a big undertaking, but it is also investment in your home and you should do your best to make the right decisions. At Kitchens4u.ie we are always on hand to help clients understand the big picture. We will be with you every step of the way to advise you on all aspects of your fitted kitchen or bedroom project. We have all the experts when it comes to Plumbing, Electrics, Tiling, Plastering etc, so there is no need for you to worry. And to keep you stress free throughout the whole process YOU just deal with one team. <strong>The Kitchens4u Team.</strong> Discover the secret of stress FREE kitchen renovations, call us now on <strong>085-2311086</strong> or click below to arrange a FREE consultation in your home.[/twocol_one_last] 
```

这是我无法删除的第一个验证错误。它在某个地方的标题中。我在 PHP 中找到了一些脚本来删除它 - 我尝试了它们但没有成功。如果有人可以给我一些帮助，我将不胜感激。我遇到了应该放在标题中的脚本以及应该放在 .htaccess 文件中的脚本。尝试了标题中的脚本 - 没有工作。.htaccess 文件在服务器上不可见。

这是错误：**错误第 67 行，第 64 列：元素元上属性 http-equiv 的错误值 X-UA-Compatible。**

这是第二个错误。准确地说，我有很多这 4 个，在我的情况下，它们似乎是由 CMS 页面中的回车引起的。最后一个的问题是它显示在您看到主页的页面底部。[/twocol_one_last] - 从我的角度来看，段落开头没有`</div>`或`</p>`也没有打开，但验证器`<p>`是说有。这是 W3C 验证器在第 306 行所说的

```
<p>A fitted kitchen is a big undertaking, but it is also investment in your home and you should do your best to make the right decisions. At Kitchens4u.ie we are always on hand to help clients understand the big picture. We will be with you every step of the way to advise you on all aspects of your fitted kitchen or bedroom project. We have all the experts when it comes to Plumbing, Electrics, Tiling, Plastering etc, so there is no need for you to worry. And to keep you stress free throughout the whole process YOU just deal with one team. <strong>The Kitchens4u Team.</strong> Discover the secret of stress FREE kitchen renovations, call us now on <strong>085-2311086</strong> or click below to arrange a FREE consultation in your home.</div></p> 
```

然而我`<h2>`在段落之前的标题标签只是在`<br />`段落开始之前运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:07:07.580

### 你的1.问题

我猜您没有向我们展示代码的相关部分，但错误消息表明您正在使用具有属性和值的`meta`元素。`http-equiv``X-UA-Compatible`

这在 HTML5 中是不允许的。您只能使用[HTML5 规范中列出的值](http://www.w3.org/TR/html5/document-metadata.html#pragma-directives)或[在 WHATWG wiki 中注册的](http://wiki.whatwg.org/wiki/PragmaExtensions)值。

正如您将看到的，`X-UA-Compatible`是一个*提议*的扩展。目前还不允许，但将来可能会。

### 你的2.问题

您正在关闭元素的`div`内部，但没有在那里打开：`p``div`

```
<p>…&lt;/div></p> 
```

所以删除`</div>`相应的。在里面打开它`p`，无论你需要什么。

如果您没有看到这些，您可能正在使用所见即所得的编辑器来编辑您的内容。切换到“HTML 编辑”模式以查看真实/生成的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:29:59.877

不要在属性上使用该类型的“[]”括号，而是使用“< >”这些。
请告诉我这是否有帮助，如果您可以提供您正在使用的整个 html 文件，那就太好了。例如，将按钮更改为：
`[button link="http://www.kitchens4u.ie/shop" color="red"]Shop Online[/button]`
告诉我这是否有效。

# prolog - 在 prolog 中处理所有可能的结果

> ID：16085513
> 
> 赞同：0
> 
> 时间：2013-04-18T14:18:22.087
> 
> 标签：prolog

我有一个`is_adjacent([X1,Y1], [X2,Y2])`正确的子句，什么时候`[X2,Y2]`是`[X1,Y1]`. 如果我问`is_adjacent([2,2], [X,Y])`，我会得到所有可能的结果（四个），在这种情况下：

```
is_adjacent([2,2],[X,Y]).
X = 2,
Y = 3 ;
X = 3,
Y = 2 ;
X = 2,
Y = 1 ;
X = 1,
Y = 2. 
```

我想在另一个子句中使用这种行为：

```
anotherClause :-
    is_adjacent([2,2],[X,Y]),
    [to be continued...]. 
```

现在，我怎样才能自动处理所有可能的结果？例如，如果我想检查每个结果是否都是特定列表的成员。

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:26:48.587

there is [forall](http://www.swi-prolog.org/pldoc/doc_for?object=forall/2)/2, that seems to fit your requirements:

```
% this fails because not all results are in list
anotherClause :-
    forall(is_adjacent([2, 2], [X, Y]),
           memberchk([X, Y], [[2, 3], [3, 2]])).

% this succeed, all results are in list
anotherClause :-
    forall(is_adjacent([2, 2], [X, Y]),
           memberchk([X, Y], [[2, 3], [3, 2], [1, 2], [2, 1]])). 
```

for test purpose, I coded is_adjacent this way:

```
is_adjacent([A, B], [X, Y]) :-
    member(U / V, [1 / 0, 0 / 1, -1 / 0, 0 / -1]),
    X is A + U, Y is B + V. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:36:40.393

如果您想收集所有解决方案，我想您可能正在寻找 predicate 的集合`setof`。这会找到谓词的所有解。

`setof([X,Y], is_ajacent([2,2],[X,Y], Z)`

然后

`Z = [[2,3], [1,2], ...]`

如果您不想收集所有解决方案，而只是为每个解决方案做一些事情，那么按照 dasblinkenlight 的第二个解决方案所示进行操作。特别`fail`是在最后，所以 Prolog 尝试下一个解决方案。然后终于成功了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:46:00.047

有一种方法可以将 ∀（对于所有）转换为 ∃（存在），使用双非方法：
∀xf(x) = ¬¬∀xf(x) = ¬∃x.¬f(x)

```
anotherClause :- \+(notAnotherClause).
notAnotherClause :- is_adjacent([2,2],[X,Y]), \+(memberchk([X,Y], SomeList)). 
```

想法是我们在所有备选方案中寻找否定结果的存在，而没有否定结果实际上意味着“所有变体”。

PS `\+/1`( `\+(Goal)`) 有时写成`not/1`( `not(Goal)`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:23:36.567

To check every result of `is_adjacent` against some other rule, all you need to do is to write that rule in terms of `X` and `Y`, like this:

```
anotherClause :-
    is_adjacent([2,2],[X,Y]),
    X > 0,
    Y > 0,
    check_x_and_y(X, Y, Result),
    ... 
```

and so on. When you evaluate `anotherClause`, Prolog will unify `X` and `Y` with the first set of values, and then go on with the rest of the clause (above, it's checking that `X` and `Y` are greater than zero, and evaluating the two variables with the `check_x_and_y` rule. Once the rule comes up with a set of assignments, it gives them to you, and lets you stop or continue. If you want to always continue until the whole set is exhausted (e.g. to print all assignments of `X` and `Y`), the pattern looks like this:

```
anotherClause :-
    is_adjacent([2,2],[X,Y]),
    print_x_and_y(X,Y),
    fail.

anotherClause. 
```

The first rule goes through each assignment of `X`, `Y`, prints them, and then fail to trigger re-evaluation. The second rule is a catch-all fact to stop further evaluation.

Here is a [link to a demo on ideone](http://ideone.com/j73a5K) that prints all pairs of adjacent cells.

# android - 如何在一个屏幕上显示两个活动 Ui 70% 和 30%？

> ID：16085514
> 
> 赞同：0
> 
> 时间：2013-04-18T14:18:23.467
> 
> 标签：android, user-interface

如何在一个屏幕上显示两个活动 Ui，例如一个 UI 应该显示 70%，另一个应该使用 ViewFlipper 显示 30%。我是android的新手。如果有任何想法，请回复。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:21:01.883

您将不得不使用`Fragments`来实现您想要的布局类型。您可以同时显示多个`Fragments`，每个都有自己的布局和实现。

[您可以在此处找到有关它们的更多信息。](http://developer.android.com/guide/components/fragments.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:20:10.473

您需要为此 使用[片段](http://developer.android.com/guide/components/fragments.html)

# c# - C# 中具有通用数据类型的通用图像类

> ID：16085516
> 
> 赞同：1
> 
> 时间：2013-04-18T14:18:28.373
> 
> 标签：c#, image, generics

我想创建具有通用数据类型的通用图像类，如下面的代码所示。

在这个实现中，我不喜欢的是我必须像这样声明类： `Image<BGR<byte>, byte> a;`

代替：

```
Image<BGR, byte> a; 
```

有没有办法做到这一点？

```
public interface IColor<T>
{ }

public struct BGR<T>: IColor<T>
{
    public T B;
    public T G;
    public T R;
}

public class Image<TColor, T> where TColor: IColor<T>
{
    TColor[,] data;
}

class Program
{
    static void Main(string[] args)
    {
        Image<BGR<byte>, byte> a;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:52:53.347

我所做的一切都是`IColor`非通用的，并通过以下方式实现：

```
public interface IColor
{ }

public struct BGR<T>: IColor
{
    public T B;
    public T G;
    public T R;
}

public class Image<TColor> where TColor: IColor
{
    TColor[,] data;
}

class Program
{
    static void Main(string[] args)
    {
        Image<BGR<byte>> a;
    }
} 
```

`BGR`取决于类型有不同的 s 的事实`T` **并不**意味着所有`IColor`实现都必须依赖于类型`T`。可能存在`IColor`具有 0、2 或 9 个类型参数的实现——只要它们符合`IColor`（这很容易做到......）的实际合同，它们就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:53:24.253

*   代码

    ```
    public interface IColor<T> {
        IColor<U> FromColor<U>(IColor<U> color);
    }

    public class Bgr: IColor<byte>, IColor<int> /* .. more IColor<T> */ {
        public IColor<T> FromColor<T>(IColor<T> color) {
            if(null==color)
                return default(Bgr<T>);

            if(color is Bgr)
                return color;

            if(color is Bgr<T>)
                return new Bgr {
                    Value=color
                } as IColor<T>;

            throw new NotImplementedException();
        }

        public object Value;
    }

    public struct Bgr<T>: IColor<T> {
        IColor<U> IColor<T>.FromColor<U>(IColor<U> color) {
            if(null==color)
                return default(Bgr<U>);

            if(color is Bgr)
                return (Bgr<U>)(color as Bgr).Value;

            if(color is Bgr<U>)
                return color;

            throw new NotImplementedException();
        }

        public T B, G, R;
    }

    public class Image<TColor, T> where TColor: IColor<T>, new() {
        public static Array CreateArray(params int[] lengths) {
            var color=(new TColor()).FromColor(default(TColor));
            return Array.CreateInstance(color.GetType(), lengths);
        }

        public Image(params int[] lengths) {
            data=Image<TColor, T>.CreateArray(lengths);
        }

        public Array data; // expose for test
    } 
    ```

*   测试

    ```
    public class TestClass {
        public static void TestMethod() {
            var image=new Image<Bgr, byte>(640, 480);
            var data=(Bgr<byte>[,])image.data;
            var bgr=new Bgr<byte>();
            bgr.B=123;
            data[0, 0]=bgr;
            data[0, 0].G=124;
            bgr=data[0, 0];
            Console.WriteLine("bgr{{B={0}, G={1}, R={2}}}", bgr.B, bgr.G, bgr.R);
        }
    } 
    ```

# ruby-on-rails-3 - 将模型方法移动到助手

> ID：16085519
> 
> 赞同：1
> 
> 时间：2013-04-18T14:18:35.017
> 
> 标签：ruby-on-rails-3, helper

我有 3 个使用相同方法的模型。为了保持干燥，我想将这些移至辅助方法，但不确定如何使其成为全局但仍从模型接收。

目前我有`format_slug`3 种型号。

```
class Page < ActiveRecord::Base
  before_save :format_slug

  def format_slug
    slug.parameterize.downcase
  end
end 
```

如何`format_slug`在模型中的过滤器之前移动到 application_helper 并调用方法？

```
module ApplicationHelper
  def format_slug(model)
    model.slug.parameterize.downcase
  end
end

class Page < ActiveRecord::Base
  before_save :format_slug
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:27:41.633

您不想使用**助手**，但可以使用另一个**模块**。视图中使用了助手，这是仅在您的模型中发生的事情。

这是一个很好的关注点，您可以在此处找到更多相关信息 [https://gist.github.com/dhh/1014971](https://gist.github.com/dhh/1014971)

（这可能在 lib/sluggable.rb 或 app/models/concerns/sluggable.rb 中）后者在 Rails 4 中是标准的，但一定要调整你的加载路径。

```
module Sluggable
  extend ActiveSupport::Concern

  included do
    before_save :format_slug
  end

  def format_slug
    slug.parameterize.downcase
  end
end 
```

然后在您要使用它的模型中：

```
class Page < ActiveRecord::Base
  include Sluggable
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:43:14.747

干燥代码的两种方法。

### 方法一：使用助手

```
module ApplicationHelper
  def format_slug(str)
    str.parameterize.downcase
  end
end

class Page < ActiveRecord::Base
   before_save :handle_slug

   def handle_slug
     format_slug self.slug
   end
 end 
```

### 方法二：扩展 ActiveRecord

```
# lib/my_ar_extension.rb
module MyArExtension
  def format_slug
    self.slug.parameterize.downcase if self.slug
  end
end

ActiveRecord::base.send :include, MyArExtension

# Page model
class Page < ActiveRecord::Base
  attr_accessible :slug # and others
  before_filter :format_slug
  # other code
end 
```

# ruby - RJB + 乘客。RJB 出现不调用 Java

> ID：16085521
> 
> 赞同：2
> 
> 时间：2013-04-18T14:18:43.500
> 
> 标签：ruby, ruby-on-rails-3, java-7, passenger, rjb

我对 RJB 和Passenger 有一些问题。

我的系统：Debian 6 Java JDK 7 Apache2 + Passenger Ruby 1.9.2 Rails 3.2.6

我正在使用 jasper-rails gem 通过我的 RoR 应用程序阅读我的 .jasper 报告。在我的开发机器（通过 webrick）上，一切运行正常，但是当我单击报告链接时将其上传到我的生产服务器（Passenger + Apache2）时，它需要大量时间处理并且不会去任何地方。

在单击生成报告的同时，我在 linux 上进行了一个运行“top”的测试，我意识到 java 进程没有被创建，看起来它没有被调用。

JAVA_HOME 和 LD_LIBRARY_PATH 在系统和我的环境中正确设置。rb 有人知道如何解决或调试这个问题吗？

在日志文件上，我没有收到任何错误或警告。

任何帮助将不胜感激。

提前感谢人们。

遵循我的 environment.rb 设置：

```
# Load the rails application
require File.expand_path('../application', __FILE__)

ENV['JAVA_HOME'] = "/usr/lib/jvm/jdk1.7.0"
ENV['LD_LIBRARY_PATH'] = "/usr/lib/jvm/jdk1.7.0/jre/lib/i386:/usr/lib/jvm/jdk1.7.0/jre/lib/i386/client"

# Initialize the rails application
SIGMA::Application.initialize! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:21:29.903

使用 Mahaswami Software 分叉的解决方案解决：www.github.com/Mahaswami/jasper-rails

这家伙修改了插件以与Passenger一起正常工作。

谢谢你！;)

# c# - 导出维基百科文章以获取摘要信息

> ID：16085526
> 
> 赞同：1
> 
> 时间：2013-04-18T14:18:54.687
> 
> 标签：c#, regex, mediawiki

我正在尝试从维基百科文章中获取介绍以将其包含在报告中。例如，对于这篇文章： [http ://en.wikipedia.org/wiki/MAP3K8](http://en.wikipedia.org/wiki/MAP3K8)

我想得到：

> 丝裂原活化蛋白激酶激酶激酶 8 是一种在人体中由 MAP3K8 基因编码的酶。该基因是通过其在细胞中的致癌转化活性来鉴定的。编码的蛋白质是丝氨酸/苏氨酸蛋白激酶家族的成员。
> 这种激酶可以激活 MAP 激酶和 JNK 激酶途径。这种激酶被证明可以激活 IkappaB 激酶，从而诱导 NF-kappaB 的核产生。还发现该激酶在 T 淋巴细胞激活期间促进 TNF-α 和 IL-2 的产生。对大鼠类似基因的研究表明，这种激酶直接参与了 NF-kappaB1,p105 (NFKB1) 的蛋白水解。该基因还可以利用下游的框内翻译起始密码子，从而产生含有较短 N 端的同种型。较短的同种型已显示出较弱的转化活性。在小鼠中，该基因被称为 Tpl2，它是一种肿瘤抑制基因，其缺失有助于癌症的发展和进展。

我正在使用以下 URL 获取页面：[http ://en.wikipedia.org/wiki/Special:Export/MAP3K8](http://en.wikipedia.org/wiki/Special:Export/MAP3K8)

我将这篇文章中的代码：[http](http://forums.asp.net/t/1066507.aspx/1) ://forums.asp.net/t/1066507.aspx/1转换为 C#：

```
 HttpWebRequest request  =(HttpWebRequest)HttpWebRequest.Create("http://  en.wikipedia.org/wiki/Special:Export/MAP3K8");
   request.Accept = "text/hmtl";
   request.Credentials = System.Net.CredentialCache.DefaultCredentials;
   HttpWebResponse response = (HttpWebResponse) request.GetResponse();
   Stream responseStream = response.GetResponseStream();
   XmlTextReader reader = new XmlTextReader(responseStream);
   String NS = "http://www.mediawiki.org/xml/export-0.8/";
   XPathDocument doc = new XPathDocument(reader);
   reader.Close();
   response.Close();
   XPathNavigator myxpathnav = doc.CreateNavigator();
   XPathNodeIterator nodesText = myxpathnav.SelectDescendants("text", NS, false);
   while (nodesText.MoveNext())
   {
       ViewBag.Message += nodesText.Current.InnerXml;
   }
   ViewBag.Summary = getSummary(ViewBag.Message);
   return View(); 
```

getSummary 方法，根据 PBB 模板：[http ://en.wikipedia.org/wiki/Template:PBB_Controls](http://en.wikipedia.org/wiki/Template:PBB_Controls)

我只想获取蛋白质的信息，如果这是遵循这个。

```
 public string getSummary(string page)
    {
        string res = "";
        //The introduction is in 2 parts: 
        //1st between "{{PBB|geneid=1326}}" and &lt;!-- The PBB_Summary (.)* --&gt;
        string intro = "";
        //2nd between "summary_text =" and "=="
        //http://en.wik    ipedia.org/wiki/Special:Export/MAP3K8 is used as example

        string summary = "";
        try
        {
            intro = page.Split(new string[] { "}}" }, StringSplitOptions.None)[1];

            intro = intro.Split(new string[] { "&lt;!--" }, StringSplitOptions.None)[0];
            intro = deleteMediaWikiTag(intro);
        }
        catch(Exception)
        {
            intro = "";
        }
        try
        {
            summary += page.Split(new string[] { "summary_text =" }, StringSplitOptions.None)[1];
            summary = summary.Split(new string[] { "==" }, StringSplitOptions.None)[0];
            summary = deleteMediaWikiTag(summary);
        }
        catch(Exception)
        {
            summary = "";
        }
        res = intro + "\n\n" + summary;
        return res;
    }

   public string deleteMediaWikiTag(string text)
    {
        string res = "";
        // this is working well
        Regex reg = new Regex("{{.*(}})*|{{|}}|'''|&lt;!--.*--&gt;|]]|([[]){2}");
        res = reg.Replace(text,"");
        //I don't understand what is wrong with this regex
        Regex regprime = new Regex("&lt(.)*(&gt;){1}");
        res = regprime.Replace(res, "PRIME");
        return res;
    } 
```

我的问题在于执行，`deleteMediaWikiTag(summary)`因为我丢失了摘要部分的结尾，即：

> 在小鼠中，该基因被称为 Tpl2，它是一种肿瘤抑制基因，其缺失有助于癌症的发展和进展。

在由正则表达式处理之前，此文本如下所示：

```
 &lt;ref name=&quot;entrez&quot; /&gt; 
   In mice, this gene is known as Tpl2 and it is a tumor suppressor gene whose absence contributes to the development and progression of cancer.
   &lt;ref&gt;{{cite web|last=DeCicco-Skinner|first=Kathleen|title=Loss of tumor progression locus 2 (tpl2) enhances tumorigenesis and inflammation in two-stage skin carcinogenesis|url=http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3460638/}}&lt;/ref&gt; 
```

所以根据我的正则表达式，我期待类似：（PRIME 用于突出显示匹配项，最后，我将删除与我的正则表达式匹配的所有内容）

```
 PRIME In  mice *.....* PRIME 
```

但我得到：

```
 PRIME 
```

所以这`"&lt(.)*(&gt;){1}"`与整个部分匹配（第一个 < 和最后一个 > 但我要求只匹配一次模式 > 如果我把所有东西都拿走，那就不止一次了......

这个正则表达式有什么问题？我错过了什么？也许这是解析这个的更好方法？（但我发现的解析器都没有说服我）

PS 我的解析器适用于： [http](http://en.wikipedia.org/wiki/NFKB2) ://en.wikipedia.org/wiki/NFKB2或[http://en.wikipedia.org/wiki/APOA4](http://en.wikipedia.org/wiki/APOA4)但我想更可靠地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:28:11.437

我真的找不到现有的任何问题。两个正则表达式都工作正常。我建议在代码中实现之前使用正则表达式在线测试器。试试这个： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# git - qt 源的工作存档版本

> ID：16085527
> 
> 赞同：0
> 
> 时间：2013-04-18T14:18:56.090
> 
> 标签：git, qt, windows-7-x64

我正在尝试使用 msvc 2010 为 Windows x64 构建 qt，但在配置步骤时遇到了问题（构建 -opengl 桌面）

从这里：http: [//qt-project.org/forums/viewthread/24230](http://qt-project.org/forums/viewthread/24230)

在其他一些地方，QT 网站上可用的源代码的 .zip 文件实际上并未使用这些选项构建。我一直在尝试“git”存储库。我成功地获得了基础存储库：

```
git clone https://gitorious.org/qt/qt5.git qt5 
```

但是我在“init-repository”步骤中遇到了麻烦。

1.  它在 init-repository 调用期间总是失败（在 qtbase 的克隆期间，出现“超时”错误，下次它死时我将在此处添加完整的错误）。我怀疑只是网络错误，但我无法解决它。我正在使用的“init-repository”调用是：

    初始化存储库 --no-webkit --http -f

2.  它需要永远。我似乎以 30-50 KiB/s 的速度下降。

反复失败和长时间的结合让我开始寻找替代方案。

所以我想知道

1.  如果有人知道那里有工作存储库的预打包、已经初始化的存档版本？
2.  任何人都知道如何解决缓慢的 git 问题（可能是我们的主机端网络，我对此无能为力）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:47:14.990

[http://qt-project.org/wiki/Building_Qt_5_from_Git](http://qt-project.org/wiki/Building_Qt_5_from_Git)

您可以使用浏览器并单击并下载所有模块...

[http://qt.gitorious.org/qt/qt5/blobs/master/README.git](http://qt.gitorious.org/qt/qt5/blobs/master/README.git)

只看Git的GUI前端，我发现了一些链接：

[http://qt.gitorious.org/qt/qt5/trees/stable](http://qt.gitorious.org/qt/qt5/trees/stable)

此页面上有一个很长的列表，列出了所有带有链接的子模块。您可以进入这些并为每个的稳定版本获取单独的 tarball。这可能需要一段时间，但它会起作用。

[http://qt.gitorious.org/qt](http://qt.gitorious.org/qt)

并且在每个页面的右侧都有一个“下载稳定为 tar.gz”。

希望有帮助。

# jenkins - 如何在 Jenkins 中的 SSH 超时后将构建标记为失败？

> ID：16085529
> 
> 赞同：2
> 
> 时间：2013-04-18T14:18:57.620
> 
> 标签：jenkins

目前，如果我通过 SSH 运行预构建步骤（进行备份......），当它超时时，它只会将构建标记为不稳定，但它会继续构建 - 在我的情况下非常糟糕！

这是我在日志中看到的：

> 错误：发布时出现异常，异常消息 [执行超时或在 120 022 毫秒后被中断]
> 
> 构建步骤“通过 SSH 发送文件或执行命令”将构建结果更改为 UNSTABLE

所以问题是 - 如何停止构建超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:30:06.427

经过一些测试，我决定安装[Text-finder Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)。然后在执行 SSH 后，我添加了一个带有 Text Finder 设置的条件步骤，如下所示：

![SSH 失败的文本查找器设置](https://i.stack.imgur.com/A5Qhs.png)

我现在的 RegExp 现在实际上已经不同了：

```
(\[ERROR\]|ERROR: Exception when publishing) 
```

这是因为我注意到在 SSH shell 中执行 exit 1 不会使 Jenkins 失败。所以我也捕捉到了“[ERROR]”，我在错误时回显。请注意，通过 SSH 运行的命令会显示在日志中，因此如果您执行类似操作，那么您的回显代码将必须类似于以下内容`echo "[""ERROR]"`：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:25:15.703

Maybe this plugin would be helpful for you

[Build-timeout Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build-timeout+Plugin)

# php - 使用 SimpleXML 获取缩略图的 Youtube 数据 API

> ID：16085536
> 
> 赞同：0
> 
> 时间：2013-04-18T14:19:09.673
> 
> 标签：php, multidimensional-array, youtube-api, simplexml

我有以下代码：

```
$rss = simplexml_load_file( 'http://gdata.youtube.com/feeds/api/playlists/PLEA1736AA2720470C?v=2&prettyprint=true' );

foreach ( $rss->entry as $entry ) {
    // get nodes in media: namespace for media information
    $media = $entry->children( 'http://search.yahoo.com/mrss/' );
    $thumbs = $media->group->thumbnail;
    $thumb_attrs = array();
    $index = 0;
    // get thumbnails attributes: url | height | width
    foreach ( $thumbs as $thumb ) {
        foreach ( $thumb->attributes() as $attr => $value ) {
            $thumb_attrs[$index][$attr] = $value;
            print $attr . ': ' . $thumb_attrs[$index][$attr] . "| ";
        }
        $index++;
        print  "<br>";
    }
} 
```

打印将输出：

```
url: http://i.ytimg.com/vi/te28_L-dO88/default.jpg| height: 90| width: 120| time: 00:00:49| 
... 
```

来自具有以下格式的 xml 标记：

```
<media:thumbnail url='http://i.ytimg.com/vi/4l4rwvAPhfA/default.jpg' height='90' width='120' time='00:02:23.500' yt:name='default'/>
... 
```

如何添加我没有进入数组的命名空间 yt name = 'default' 的属性？

如何从数组中获取所有宽度的最接近其他值的值？类似于[PHP - 数组中的最近值，](https://stackoverflow.com/questions/5464919/php-nearest-value-from-an-array)但考虑到我的数组是多维的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T04:56:34.613

simplexml 和命名空间的问题在于您必须按名称访问任何命名空间元素或属性——也就是说，您不能说“给我所有属性而不管命名空间”。所以你必须做一些循环，依靠 simplexml 的命名空间工具：

```
$rss = simplexml_load_file( 'http://gdata.youtube.com/feeds/api/playlists/PLEA1736AA2720470C?v=2&prettyprint=true' );
$namespaces=$rss->getNameSpaces(true); // access all the namespaces used in the tree
array_unshift($namespaces,""); // add a blank at the beginning of the array to deal with the unprefixed default
foreach ( $rss->entry as $entry ) {
    // get nodes in media: namespace for media information
    $media = $entry->children( 'http://search.yahoo.com/mrss/' );
    $thumbs = $media->group->thumbnail;
    $thumb_attrs = array();
    $index = 0;
    // get thumbnails attributes: url | height | width
    foreach ( $thumbs as $thumb ) {
        $attrstring="";
        foreach ($namespaces as $ns) {
                foreach ( $thumb->attributes($ns) as $attr => $value ) { // get all attributes, whatever namespace they might be in
                        $thumb_attrs[$index][$attr] = $value;
                        $attrstring.=$attr . ': ' . $thumb_attrs[$index][$attr] . "| ";
                }
        }
        print $attrstring;
        $index++;
        print  "<br>";
    }
} 
```

至于你问题的第二部分，我不是 100% 确定你在问什么。如果它确实与您链接到的问题相似，那么您是否只能在循环之前创建一个空数组，并将每个条目的宽度添加到该数组中？循环完成后，您将拥有一个仅包含宽度的扁平数组。

但是，如果您要问其他问题，也许您可​​以澄清一下？

# android - ListView 中的第一个和最后一个 EditText 显示相同的值

> ID：16085540
> 
> 赞同：0
> 
> 时间：2013-04-18T14:19:19.767
> 
> 标签：android, android-edittext

在视图中显示时，如果我滚动超过第一个框，我输入的值会`EditText`同时显示在第一个和最后一个框中。将值保存到数据库时，它只是按预期只保存最后一个值。`EditText``EditText``EditText`

是什么导致了这种行为？这是我的完整代码：

```
package com.example.expensemanager1;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnFocusChangeListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class InteractiveArrayAdapter extends ArrayAdapter<Model> {
    private final List<Model> list;
    private final Activity context;
    final int i;
    LayoutInflater mInflater;
    public InteractiveArrayAdapter(Activity context, List<Model> list) {
        super(context, R.layout.spared_list_row, list);
        this.context = context;
        this.list = list;
        i=list.size();
        notifyDataSetChanged();
    }

    static class ViewHolder {
        protected TextView membname;
        protected EditText membamount;
    }

    public class MyTextWatcher implements TextWatcher
    {
        private EditText editText;
        Model elemente;
        public MyTextWatcher(EditText editText, Model m)
        {
            this.editText = editText;
            this.elemente = m;
        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

            Log.d("TEST", "In afterTextChanged"); 

            editText.setFocusable(true);

            String ssss= s.toString();

            if(editText.getText().toString().length()>0)
             list.get((Integer)editText.getTag()).setamount(Double.parseDouble(s.toString()));
            else
                list.get((Integer)editText.getTag()).setamount(0);

            double sum=0.0;
            for (int j=0; j<i ; j++)
            {
                Model m1= list.get(j);                      

                sum += m1.getamount();          

            }

            Log.d("TEST", "sum" +sum );

            double balance = New_spared_list.getTextView();
            Log.d("TEST", "balance = "+ balance);
            sum = balance - sum; 
            New_spared_list.setX(sum);

            Log.d("TEST", "sum" +sum );

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

        }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
         View view = null;
        ViewHolder viewHolder = new ViewHolder();

        if (convertView == null) {
            final Model elemente = list.get(position);
            LayoutInflater inflator = context.getLayoutInflater();
            convertView = inflator.inflate(R.layout.spared_list_row, null);

            viewHolder.membname = (TextView) convertView.findViewById(R.id.membersTextView2);
            viewHolder.membamount = (EditText) convertView.findViewById(R.id.amount);
            final ViewHolder holder = viewHolder;
            viewHolder.membamount.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    //do something
                    LinearLayout parent = (LinearLayout) v.getParent();            
                    EditText membamount = (EditText) parent.findViewById(R.id.amount); 

                    membamount.setFocusable(true);
                membamount.setFocusableInTouchMode(true);
                membamount.requestFocus();

                }

            });

            viewHolder.membamount.addTextChangedListener(new MyTextWatcher(viewHolder.membamount, (Model) viewHolder.membamount.getTag()));

            convertView.setTag(viewHolder);
            convertView.setTag(R.id.membersTextView2, viewHolder.membname);
            convertView.setTag(R.id.amount, viewHolder.membamount);
           // viewHolder.membamount.setTag(list.get(position));
           // viewHolder.membamount.setHint(String.valueOf((list.get(position).getamount())));

        } else {

            viewHolder = (ViewHolder) convertView.getTag();
            ((ViewHolder) convertView.getTag()).membamount.setTag(list.get(position));
        }

        viewHolder.membamount.setTag(position);
        if(position % 2 == 0){  
            convertView.setBackgroundColor(Color.rgb(231, 247, 253));
           }

      //  viewHolder.membamount.setTag(list.get(position));

        viewHolder.membamount.setHint(String.valueOf(list.get(position).getamount()));
        viewHolder.membname.setText(list.get(position).getName());

        return convertView;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:35:34.887

在 getView() 结束时，还应该更改 membamount 中的文本；否则，如果它重用一个转换视图，它会保留以前的文本。

```
viewHolder.membamount.setText(list.get(position).getAmount()); 
```

# scala - Play Framework 2.1 - AngularJS 路由 - 最佳解决方案？

> ID：16085544
> 
> 赞同：32
> 
> 时间：2013-04-18T14:19:28.693
> 
> 标签：scala, angularjs, playframework

我正在学习 AngularJS 教程。Angular 使用它自己的 JS 路由机制来允许单页应用程序。Angular 的示例路由文件如下所示：

```
angular.module('phonecat', []).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/phones', {templateUrl: '/partials/phone-list',   controller: PhoneListCtrl}).
      when('/phones/:phoneId', {templateUrl: 'partials/phone-detail', controller: PhoneDetailCtrl}).
      otherwise({redirectTo: '/phones'});
}]); 
```

我试图想出一个好地方来存储我的部分（Angular 特定的 HTML 文件）。理想情况下，我希望能够从 Play 中对它们进行模板化（即，将它们作为 *.scala.html 文件）。我可以使用播放路由文件来完成此操作，如下所示：

```
GET     /partials/phone_index       controllers.Application.phone_index 
```

我基本上将/部分分配给这样的控制器操作：

```
def phone_index = Action {
  Ok(views.html.partials.phone_index())
} 
```

我正在寻找的解决方案是两种理想的结合：

1.  我会有某种映射，可以让我访问 /partial/* 下的任何文件并取回部分文件。
2.  我想要覆盖到特定部分的路由，因此我**可以**使用控制器操作来动态填充数据（很少见）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-22T13:53:48.117

当我尝试类似的事情时，我得出的结论是最好将其分成两部分：

*   将 Play 用作您通过 Ajax 调用与之交互的后端
*   将 Angular 模板存储在 Play`public`文件夹中（类似于`/public/angular/`）并使用默认的 AngularJs 方式来映射模板

我知道这听起来不太好，并且真的没有回答你关于如何做到这一点的问题，但是由于模板及其 url 在 Angular 中的映射方式，尝试链接这两个框架可能会出现问题，而且好处将非常任何更改都将意味着大量工作，从而消除了 Play 和 Angular 的主要优点，即快速开发。

这也允许您更好地分离关注点，如果您的项目增长可能很重要，因为您可以将 AngularJS 代码作为连接到后端的独立应用程序拿走，它会正常工作。

[你可以在这个Github 存储库](https://github.com/pvillega/play2demo-jasmine)中看到我所说的一些示例代码（基于 AngularJS 的 TODO 教程）。我警告你，代码不是很好，但应该给你一个想法，并且作为奖励向你展示如何将 Jasmine 集成到 Play 中，用于 AngularJS 单元测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-17T02:44:46.197

最终的种子 ( [https://github.com/angyjoe/eventual](https://github.com/angyjoe/eventual) ) 是构建 Play + AngularJS 应用程序的另一种方式。该代码是一个甜心并且有据可查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-04T15:03:54.303

这不会直接回答您的问题，但我发现这是构建 Play + Angular 应用程序的最佳方式：

[https://github.com/typesafehub/angular-seed-play](https://github.com/typesafehub/angular-seed-play)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-30T18:00:09.033

是的，可以创建客户端模板的服务器端元模板。这提供了一些独特的能力，因为这两种方法并不完全重叠。还有很多混淆的空间，所以请确保您知道为什么要编写 Play 块而不是 Angular 指令。

你是否应该这样做仍然是一个悬而未决的问题。这实际上取决于您是否真的需要访问模板中的服务器信息。我认为有必要和适当的一个例子是在您的视图中实施访问控制。

现在回答你的问题。通过内联部分而不是尝试为它们提供按需加载的路线来解决问题。请参阅[http://docs.angularjs.org/api/ng.directive:script](http://docs.angularjs.org/api/ng.directive:script)。

模板如下所示：

```
@(id: Long)(implicit request: RequestWithUser[AnyContent])

@import helper._

<!doctype html>
<html lang="en" ng-app="phonecat">
<head>
  <meta charset="utf-8">
  <title>Google Phone Gallery</title>
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <script src="lib/angular/angular.js"></script>
  <script src="js/app.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/services.js"></script>
  <script src="lib/angular/angular-resource.js"></script>
</head>
<body>
  <div ng-view></div>

  @ngTemplate("phone-list.html") {
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">Hello @request.user.name</div>
      </div>

      <div class="row-fluid">
        <div class="span2">
          <!--Sidebar content-->

          Search: <input ng-model="query">
          Sort by:
          <select ng-model="orderProp">
            <option value="name">Alphabetical</option>
            <option value="age">Newest</option>
          </select>

        </div>
        <div class="span10">
          <!--Body content-->

          <ul class="phones">
            <li ng-repeat="phone in phones | filter:query | orderBy:orderProp" class="thumbnail">
              <a href="#/phones/{{phone.id}}" class="thumb"><img ng-src="{{phone.imageUrl}}"></a>
              <a href="#/phones/{{phone.id}}">{{phone.name}}</a>
              <p>{{phone.snippet}}</p>
            </li>
          </ul>

        </div>
      </div>
    </div>
  }

  @ngTemplate("phone-detail.html") {
    <img ng-src="{{mainImageUrl}}" class="phone">

    <h1>{{phone.name}}</h1>

    <p>{{phone.description}}</p>

    <ul class="phone-thumbs">
      <li ng-repeat="img in phone.images">
        <img ng-src="{{img}}" ng-click="setImage(img)">
      </li>
    </ul>

    <ul class="specs">
      <li>
        <span>Availability and Networks</span>
        <dl>
          <dt>Availability</dt>
          <dd ng-repeat="availability in phone.availability">{{availability}}</dd>
        </dl>
      </li>
    </ul>
  }
</body>
</html> 
```

和应用程序：

```
'use strict';

/* App Module */

angular.module('phonecat', ['phonecatFilters', 'phonecatServices']).
  config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/phones', {templateUrl: 'phone-list.html',   controller: PhoneListCtrl}).
      when('/phones/:phoneId', {templateUrl: 'phone-detail.html', controller: PhoneDetailCtrl}).
      otherwise({redirectTo: '/phones'});
}]); 
```

只需包括这个助手：

```
@**
 * @ngTemplate
 * Generate an AngularJS inlined template.
 *
 * Note: Do not include scripts in your @template HTML. This will break the template.
 *
 * @param name
 * @param template
 *@
@(name: String)(template: Html)

<script type="text/ng-template" id="@name">@template</script> 
```

并确保在 Angular 应用程序的根范围内使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-20T23:32:21.690

对于问题 #1，您可以引入这样的路线：

```
/partials/:view    controllers.Application.showView(view:String) 
```

然后在您的控制器中，您需要从视图名称映射到实际视图：

```
Map("phone_index" -> views.html.partials.phone_index()) 
```

您可能希望延迟渲染模板或要求存在请求，那么您可能应该执行以下操作：

```
val routes = Map(
  "phone_index" -> { implicit r:RequestHeader => 
     views.html.partials.phone_index()) 
  } 
```

您的操作将如下所示：

```
def showView(view:String) = 
  Action { implicit r =>
    routes(view)
  } 
```

如果您想要特定路由的特定控制器方法（问题＃2），您只需在动态路由*上方*添加一个路由：

```
/partials/specific    controllers.Application.specific() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-26T21:17:53.423

我真的认为这不是一个好主意，即使它确实来自一个恭敬的心。

我认为将每个想法都保留为默认设置（约定优于配置原则）是一种非常好的做法，这对我来说意味着我们可能更感兴趣将每个范式（Play 和 AngularJS）分开，因为其中一个或两个可能会在近期或遥远的未来，它将为代码维护付出代价。

第二个非常重要的点是可测试性，如果你混合两种技术，你最终会得到一个混合，在你的应用程序的两边都提供真正好的测试覆盖率。干杯

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-23T10:05:37.013

这可能无法准确回答问题，但您可以尝试关注这个项目，因为它似乎是构建 Play/scala/Angular 应用程序的好例子：

[https://github.com/lashford/modern-web-template#master](https://github.com/lashford/modern-web-template#master)

[http://typesafe.com/activator/template/modern-web-template](http://typesafe.com/activator/template/modern-web-template)

# liferay - 如何在 Liferay 中获取所有登录用户列表？

> ID：16085553
> 
> 赞同：3
> 
> 时间：2013-04-18T14:19:57.927
> 
> 标签：liferay, liferay-6

我想在 liferay 中以管理员身份获取所有用户的登录详细信息。 **用户从哪里登录并不重要，但我想查看一次登录的所有用户的列表。** 当用户登录时，它会向管理员发送一些标识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:51:10.110

控制面板的**监控**选项允许您查看门户中的所有实时会话。

出于性能原因，此设置通常在生产中关闭。要启用实时会话数据的显示，请将门户属性**live.users.enabled**设置为 true。

# sql - 使用 T-SQL 的 JOIN 中的计算列

> ID：16085564
> 
> 赞同：0
> 
> 时间：2013-04-18T14:20:25.540
> 
> 标签：sql, sql-server, tsql, group-by, aggregate-functions

我想显示一个人提出的申请总数的总和。

我试过这个：

```
SELECT DISTINCT custID, firstName, AppID, AppDate, Amount
FROM CustTable
JOIN AppTable ON custID = AppID 
```

我每个客户有很多行，并且想对每个客户的总申请量求和

目前我看到这样的事情：

```
1 | Jon | APP_1 | 200 
1 | Jon | APP_2 | 200
1 | Jon | APP_3 | 200
1 | Jon | APP_4 | 200 
```

但我想要（最好有日期范围）：

```
1 | Jon | APP_1 | 800 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:22:33.550

你可以这样做：

```
select custID, firstName, sum(Amount)
FROM CustTable
JOIN AppTable
ON custID = AppID
group by custID, firstName 
```

这将返回：

```
1 | Jon | 800 
```

此外，您可以有这样的日期范围：

```
select custID, firstName, sum(Amount), 
       min(AppDate) firstDate, max(AppDate) lastDate, 
FROM CustTable
JOIN AppTable
ON custID = AppID
group by custID, firstName 
```

这将返回如下内容：

```
1 | Jon | 800 | 2013-01-01 | 2013-01-28 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:22:03.683

根据您表中的不同，我假设您也希望将其按 AppDate 分组：

```
SELECT custID, firstName, AppID, AppDate, SUM(Amount) AS Amount 
FROM CustTable
JOIN AppTable
ON custID = AppID

GROUP BY custID, firstName, AppID, AppDate 
```

您的结果列表没有 AppDate，因此当不按 AppDate 对值进行分组时，您必须这样做：

```
SELECT custID, firstName, AppID, SUM(Amount) AS Amount 
FROM CustTable
JOIN AppTable
ON custID = AppID

GROUP BY custID, firstName, AppID 
```

如果你想

```
1 | Jon | APP_1 | 800 
```

如在您的示例中，以字母顺序的第一个应用程序 ID 作为名称，它将是这样的

```
SELECT custID, firstName, MIN(AppID) AS AppID, SUM(Amount) AS Amount 
FROM CustTable
JOIN AppTable
ON custID = AppID

GROUP BY custID, firstName 
```

但老实说，在结果中包含 APP_1 并没有多大意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:22:45.150

这是一个基本`group by`查询：

```
SELECT custID, COUNT(*) as Num, SUM(Amount) as TotalAmount
FROM CustTable JOIN AppTable
     ON custID = AppID
group by custId 
```

但是，我看不到输出中第三列“APP1”在做什么。

# c++ - 来自boost Asio的多个async_wait_deadline_timer

> ID：16085565
> 
> 赞同：4
> 
> 时间：2013-04-18T14:20:31.867
> 
> 标签：c++, boost, timer, boost-asio

是否可以在同一个 boost::asio::deadline_timer 上多次调用 async_wait？

我的意思是如下所示：

```
t->expires_from_now(delay);
t->async_wait(f1);
t->async_wait(f2); 
```

这是否确保将调用这两个函数？这是否确保这两个函数将按此顺序调用？

如果没有，知道如何在计时器超时时连续调用 f1 和 f2 吗？（我不在乎是否在对 f1 和 f2 的调用之间执行了另一个处理程序）。

另一个问题：如果设置了两个计时器 t1 和 t2，使得 t1 的截止日期在 t2 的截止日期之前，我可以确定与 t1 相关联的处理程序将在与 t2 相关联的处理程序之前被调用吗？（在这种情况下，对于上述代码，我将为 f2 创建第二个计时器，其延迟略大于为第一个计时器设置的延迟）。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:08:49.923

仔细阅读[http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_deadline_timer/async_wait.html](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_deadline_timer/async_wait.html)上的文档，它指出

> 对于**每次**调用`async_wait()`，提供的处理程序将只调用**一次**。

（强调我的）。这意味着在您的情况下， f1 和 f2 都将被调用一次。

对于您的第二个问题：这取决于 3 个条件：

1.  当到期时间仅相差低于系统时钟（或操作系统的计时服务）分辨率的一小段时间时，可能会出现问题。这种情况下的行为由计时器实现定义（但对于 Boost 的默认实现不应该是问题，请参阅注释）。
2.  多线程环境中两个处理程序的可能并发。将两个处理程序包装到同一个链中，以解决与并发相关的问题。
3.  取消计时器的可能性。当后一个计时器在前一个计时器到期之前被取消时（通过设置另一个到期时间），它会在前一个计时器之前触发其处理程序。

**更新：**
我刚刚意识到您的第一个问题中有第二部分是关于调用处理程序的顺序。文件没有说明这一点。您可以在实现中查找它，但这可能会改变。
如果您希望按顺序执行两个函数，只需从第一个调用第二个。如果第二个处理程序应该仅在某些条件下“附加”到第一个处理程序，则延迟调用`async_wait`直到您知道处理程序链的整个范围，或者只是使它们彼此独立。
第三种可能性是滚动您自己的可附加处理程序。但请记住，处理程序被复制到`io_service::run`线程中，即复制到`async_wait`调用，因此可附加处理程序只需要一个指向实际处理程序链的指针，它需要考虑并发性等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-31T00:28:29.847

评价最高的答案是问题的第一部分。对于排序（正如其他人指出的那样），deadline_timer 可能会按时间顺序排列它们，但不能保证。boost::asio 建议将操作包装在一个链中以强制排序。

# jquery - 通过 JavaScript 通过 Urban Airship 发送推送通知

> ID：16085567
> 
> 赞同：0
> 
> 时间：2013-04-18T14:20:41.537
> 
> 标签：jquery, ajax, json, push-notification, urbanairship.com

我已经建立了一个简单的网站，其中包含一个带有 JavaScript onclick 方法的按钮，我想使用 Urban Airship 向我的手机发送推送通知。

如果我在 data 属性周围使用引号，我会得到“500（内部服务器错误）”。如果我不在 data 属性周围使用引号，我会从 Urban Airship 获得一个弹出授权窗口，我在其中写入我的应用程序密钥和主密钥。它似乎接受了这一点，但之后我得到一个“405（不允许的方法）”。

根据 Chrome 开发工具，两种方式都作为 GET 处理，即使它被指定为 POST（这是必需的）。有什么问题？

```
function sendButtonClick(){
    jQuery.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        username:'my app key',
        password:'my app secret',
        url: 'https://go.urbanairship.com/api/push/broadcast/',
        data: {"android": {"alert": "alerttest", "extra": {"extra test": "extra value test"}}},
        dataType: 'jsonp',
    });
}; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:52:33.073

您使用的服务器端技术是什么？你必须从那里开始。基本上，您不能通过桌面浏览器进行跨域调用。您可以执行此操作的方法是，使用有效负载调用您的服务器端方法，然后让服务器端发送通知。这是我编写的 c# 示例代码。

```
 public interface INotification
{
    void Set(string deviceId, string alert, int? badge, string sound);
}

public class BaseNotification
{

    public List<string> Aliases { get; set; }
    public List<string> Tags { get; set; }
}

 public class iOSNotification : BaseNotification, INotification
{
    public List<string> Device_Tokens { get; set; }
    public NotificationBody aps { get; set; }

    public iOSNotification()
    {
        Device_Tokens = new List<string>();
    }

    public void Set(string deviceId, string alert, int? badge, string sound)
    {
        Device_Tokens.Add(deviceId);
        aps = new NotificationBody
        {
            Alert = alert,
            Badge = badge.HasValue ? badge.Value : 0,
            Sound = sound
        };
    }
}

//in a static extensions
 public static string ToJSONString<T>(this IEnumerable<T> items)
   {
        var jsonString =  JsonConvert.SerializeObject(items, Formatting.Indented, new JsonSerializerSettings
            {
                ContractResolver = new LowerCaseContractResolver(),
                NullValueHandling = NullValueHandling.Ignore
            });

        jsonString = jsonString.Replace("\r\n", string.Empty);

        return jsonString;

    }

protected internal void SendPushNotification(List<INotification> payLoad, string uriKey) {

        var json = payLoad.ToJSONString();
        var Uri = GetAppSettings(uriKey);
        var encoding = new UTF8Encoding();

        var contentLength = encoding.GetByteCount(json);

        var request = (WebRequest)WebRequest.Create(Uri);

        request.Method = "POST";
        CredentialCache credentialCache = new CredentialCache();
        credentialCache.Add(new Uri(Uri), "Basic", GetCredentials());

        request.Credentials = credentialCache;

        request.Headers.Add("Authorization", "Basic " + Convert.ToBase64String(new ASCIIEncoding().GetBytes(_username + ":" + _password)));
        request.ContentType = "application/json";
        request.ContentLength = contentLength;

        using (var stream = request.GetRequestStream()) {

            stream.Write(encoding.GetBytes(json), 0, contentLength);
            stream.Close();

            var response = request.GetResponse();

            response.Close();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:01:18.037

您将无法在任何浏览器、移动设备或桌面上发布跨域。您最好的选择是在您的服务器上设置一个端点，该端点需要来自 jQuery 的 POST 请求（例如 yoursite.com/message/broadcast）。然后，在服务器上，对[https://go.urbanairship.com/api/push/broadcast](https://go.urbanairship.com/api/push/broadcast)进行 POST 。当它响应时，将响应作为您的响应发回。

你最好把你的 API 主密码保存在你的服务器上。

`NOTE: You'll want to make sure you don't include the API password on your client. In fact, I suggest leaving the auth header out in the client, and then add it on your server before sending the request off to UrbanAirship. So even if you could POST cross-domain (aka you were building an iOS native Cocoa application), you're still better off keeping the secure credentials on your server instead of the device)`

例如，使用[Sails](http://sailsjs.org)（javascript / Node.js 服务器）：

```
// api/MessageController.js
module.exports = {
  broadcast: function (req,res) {

   // Your message for UrbanAirship should be sent as JSON in req.body
   // e.g. req.body === '{ "android": { "alert": "foo" } } '

    var httpRequest = require('request');
    httpRequest({
      url: 'https://go.urbanairship.com/api/push/broadcast/',
      json: 'true',
      auth: {
        'user': 'YOUR_API_KEY',
        'pass': 'YOUR_MASTER_SECRET',
        'sendImmediately': true
      },
      body: req.body
    }, function (err) {

      // Send confirmation back to jQuery of either success (200) or error (500)
      if (err) res.send(err, 500);
      else res.send(200);

    });
  }
}; 
```

# python - Python：TypeError：“NoneType”对象没有属性“__getitem__”

> ID：16085568
> 
> 赞同：-5
> 
> 时间：2013-04-18T14:20:42.990
> 
> 标签：python, python-2.7

当我通过终端 m 运行我的 python 代码时，出现此错误：

```
def GPlag(text,encode=False):
        import urllib, urllib2, json

        if encode == True:
            text = text.encode('utf-8')

        query = urllib.quote_plus(text)
        base_url = 'http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q='
        url = base_url + '%22' + query + '%22'
        request = urllib2.Request(url,None)
        response = urllib2.urlopen(request)
        result = json.load(response)
        output = []

        if result['responseData']['results'] != []:
            firstMatch = result['responseData']['results'][0]
            output.append(firstMatch['title'])
            output.append(firstMatch['visibleUrl'])
            output.append(firstMatch['content'])

        return output

        def callGPlag(n):
            for s in n:
                outcome = GPlag(s,encode=True) 
```

它给;

```
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

在这一`if result['responseData']['results']`行。这是回溯：

```
Traceback (most recent call last): 
 ... in <module> GPlagFile(sys.argv[1]) 
 ... in GPlagFile outcome = GPlag(s,encode=True) 
 ... in GPlag if 'results' in result['responseData']: 
TypeError: argument of type 'NoneType' is not iterable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:26:33.977

替换行：

```
if result['responseData']['results'] != []: 
```

经过

```
if ( len(result) and
    'responseData' in result and 
    'results' in result['responseData'] and      
    result['responseData']['results'] != []): 
```

# javascript - 在 MSCRM 2011 中刷新表单上的“相关”网格

> ID：16085570
> 
> 赞同：1
> 
> 时间：2013-04-18T14:20:43.967
> 
> 标签：javascript, iframe, dynamics-crm-2011, dynamics-crm

在 MS CRM 2011 中的表单上，左侧有一个“相关”部分。在该部分中，存在与当前实体相关的实体（1:N 和 N:N 关系）。

我想通过 Javascript 刷新显示相关记录的网格（相关部分中的网格，而不是表单上的网格）。

早些时候，我用过：

```
 document.getElementById('area'+relationName+'Frame').contentWindow.document.getElementById('crmGrid_'+relationName).Refresh(); 
```

但是，在 Rollup 12 之后，此代码停止工作。

我尝试了另一个代码：

```
 var iframe = document.getElementById('area'+relationName+'Frame');
 iframe.src = iframe.src 
```

它刷新了一个网格，但网格的标题（视图选择器和搜索）消失了。它有效，但不是最佳的。

有更好的方法吗？

我认为没有支持的自定义方式；但是，有可行的解决方案仍然很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T20:05:45.013

对我来说

```
document.getElementById('area'+relationName+'Frame').contentWindow.document.getElementById('crmGrid_'+relationName).control.refresh(); 
```

工作得很好，但您必须确保控件所在的文档已经完全加载。您必须从父文档的“onload”或“ready”事件处理程序运行您的 refresh() 调用。

# user-controls - 从用户控件访问主控变量

> ID：16085573
> 
> 赞同：0
> 
> 时间：2013-04-18T14:20:55.990
> 
> 标签：user-controls, master-pages

我有一个带有变量的 masterPage。我知道如何将 childPage 上的变量与 masterType 一起使用。但是我搜索如何在用户控件中获取变量（控件在 childPage 上）？

也许 childPage 需要将 masterPage 的“指针”传递给用户控件？

我尝试在我的用户控件上使用 MasterType 但

```
'Master' is not a member of 'System.Web.UI.UserControl

On designer.vb
    Public Shadows ReadOnly Property Master() As MasterTypeName
                Get
                    Return CType(MyBase.Master, MasterTypeName)
                End Get
    End Property 
```

有没有办法让 userControl 知道 MasterType？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:25:24.623

与其试图弄清楚如何从母版页获取值到控件，不如按预期使用控件？控件旨在能够独立于它们所在的页面（和母版页）。相反，在您的用户控件中创建一个可由子页面设置的可公开访问的属性。例如，如果您在用户控件中有这个：

```
''' <summary>
'''Some summary to show in the properties window
''' </summary>
''' <value></value>
''' <returns></returns>
''' <remarks></remarks>
<Description("Your description here")> Public Property someValue As String = "something" 
```

然后，您可以在其所在的客户端代码或后面的代码中访问该属性。例如：

```
 <cc3:myControl ID='myCOntrol1' runat="server" someProperty="HelloWorld"/> 
```

或在代码隐藏中：

```
myControl1.someProperty ="HelloWorld" 
```

您也可以以类似的方式公开事件。

让我知道这是否有帮助，或者是否有原因这对您不起作用。

# html - HTML5 输入类型=数字 Polyfill 在 IE10 中不起作用

> ID：16085575
> 
> 赞同：6
> 
> 时间：2013-04-18T14:21:02.353
> 
> 标签：html, internet-explorer-10, polyfills

我试图使用这个 pollyfill：[https ://github.com/jonstipe/number-polyfill](https://github.com/jonstipe/number-polyfill)

但它在 IE10 中没有任何作用。也没有脚本错误。除了包含 JS 和 CSS 文件之外，还有什么其他的吗？

我会更进一步，并指出 polyfill 的官方演示甚至在 Windows 8 上的 IE10 中都不起作用：http: [//jonstipe.github.io/number-polyfill/demo.html](http://jonstipe.github.io/number-polyfill/demo.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:01:49.880

问题从一开始就很明显：

```
i = document.createElement("input");
i.setAttribute("type", "number");
if (i.type === "text") 
```

在 Internet Explorer 10 中的结果`i.type`是“数字”，这意味着 Internet Explorer 10 实际上支持数字输入类型——这通过[查阅他们的文档](http://msdn.microsoft.com/en-us/library/ie/hh773064%28v=vs.85%29.aspx)得到了进一步证实。您甚至可以通过尝试将字母放入数字输入来确认该功能已到位——当元素失去焦点时，它们将被删除。

如果您希望此工具逐步增强 Internet Explorer 中此控件的界面，您需要将条件解析为 true。

# jboss - JBoss AS 6 和 Log4j

> ID：16085583
> 
> 赞同：1
> 
> 时间：2013-04-18T14:21:31.507
> 
> 标签：jboss, log4j, jboss6.x

我知道有很多关于这个主题的帖子，但我没有发现其中任何一个有用或相关。

我有一个简单的要求。我正在从 JBoss AS 4.0.4 迁移到 JBoss AS 6。在我的 4.0.4 环境中，我在 server/myconfig/conf 文件夹中有一个 log4j.xml，在 server/myconfig/lib 中有一个 log4j.jar。我意识到 JBoss AS 6 已更改为原生日志框架。我们严重依赖 log4j，改变是不切实际的。我看到很多帖子说要在应用程序中打包 log4j jar 和 log4j.xml 文件。我在 deploy 和 lib 中有几十个 jar 和 war 文件。我真的会被期望将 log4j.jar 和 log4j.xml 打包到所有这些中吗？我希望不会，所以也许设置 -Djboss.as.logging.per-deployment=false 会有所帮助？但是我仍然看到人们说即使使用该设置也要将 log4j.jar 和 log4j.xml 放入 ear/war 文件中。

如果有人可以请告诉我如何模仿我的 4.0.4 设置。

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T15:25:00.227

JBoss 自动注入 log4J 1.2、SLF4J、common-logging 和 java.util.logging 的 API。不要**将**其与应用程序打包在一起。

您可以将日志记录配置添加到：*serverDirectory\standalone\configuration\standalone.xml*（或您选择使用的任何配置）。

下面是添加日志配置的部分（JBoss EAP 6）：

```
<subsystem xmlns="urn:jboss:domain:logging:1.3">
    <root-logger>
        <level name="INFO"/>
        <handlers>
            <handler name="CONSOLE"/>
            <handler name="FILE"/>
        </handlers>
    </root-logger>
</subsystem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:00:44.793

我认为没有必要在你的应用程序中打包 log4j jar。

做以下事情：

1.) 在 Standalone.conf.bat 文件中设置以下参数 set "JAVA_OPTS=%JAVA_OPTS% -Dorg.jboss.as.logging.per-deployment=false

2.) 为 log4j 制作一个模块。在 log4j 的模块文件夹中。作为参考，您可以检查已经存在的其他文件夹。

3.) 制作一个 jboss-deployment-structure.xml 将其放在 web-inf 文件夹中。该文件将包含以下内容

```
<jboss-deployment-structure>
    <deployment>
        <include>
            <module name="org.apache.log4j" />
        </include>
    </deployment>
</jboss-deployment-structure> 
```

它将在您的应用程序中包含 log4j jar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T13:17:49.817

我在 Jboss 6.1 上使用 Log4J 没有任何问题。

从来不需要在任何地方包含 Log4J jar，似乎包含（检查这个，我在 下找到它`client/lib`）。

我必须做的唯一特别的事情是将我的 Log4J 配置集成到`server/<config>/deploy/jboss-logging.xml`（布局与 a 非常相似`log4j.xml`）。

之后，我只是`org.apache.log4j.Logger`在我的课程中使用，一切都按预期工作。

# java - 如何获取 hideSoftInputFromInputMethod(token, flags) 所需的令牌？

> ID：16085584
> 
> 赞同：5
> 
> 时间：2013-04-18T14:21:32.293
> 
> 标签：java, android, service, input

所以我正在尝试制作android IME。我需要能够从我的 IME 本身中隐藏 IME。到目前为止，我只看到了有关如何从活动中显示\隐藏 IME 的示例，但我需要从 IME 中进行操作。我发现了`InputMethodManager.hideSoftInputFromInputMethod(token,flags)`，但它需要令牌，我不知道如何获得它。`getCurrentInputBinding().getConnectionToken()`不工作 - 它使应用程序崩溃。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T17:09:31.730

据说，根据其他地方对这个问题的回答（我自己还在尝试找出一种始终如一的工作方法），您需要的令牌来自 yourTextView.getWindowToken()。

但是，这对我不起作用，我见过很多人有同样的抱怨。

[编辑]
使用上面指定的令牌，我更幸运地使用 hideSoftInputFromWindow 而不是 hideSoftInputFromInputMethod 隐藏键盘。虽然由于我一开始并没有掌握这些功能之间的区别，但我可能无法理解您的实际问题。对不起！
[/编辑]

# javascript - 刷新页面之间的转换

> ID：16085594
> 
> 赞同：-8
> 
> 时间：2013-04-18T14:22:14.297
> 
> 标签：javascript, jquery, html, css, transition

今天我找到了这个网站：[http ://skainteractive.com/agencia/](http://skainteractive.com/agencia/)

当我从一个页面更改到另一个页面时，这是一个简单的 url 更改，刷新页面。但问题是，他们设法在我们在进入新页面之前查看的页面上创造了良好的效果。

我查看了他们的源代码，但我无法找出他们是如何做到的。我知道有一些方法可以做到这一点，但我想知道他们是如何做到的。因为它看起来非常好。

这是另一个很好地利用这种效果的例子：http: [//www.casadacalcada.com/](http://www.casadacalcada.com/)

他们怎么能这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T14:24:40.600

它们不会在页面之间转换。事实上，你在你登陆的同一个页面。

他们正在做的是：

*   通过 AJAX 请求加载 HTML。对于第一个站点，HTML 与其他数据一起嵌入到 JSON 响应中。收到响应后，他们从响应中提取 HTML 并将其放在当前页面上。

*   他们使用[History API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)看起来好像他们正在通过更改页面的 url 并修改浏览器的历史记录以使后退和前进按钮工作来跨页面移动浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:58:15.823

您可以为此使用 jquery 来显示一个新的 div：

`$(document).ready( function() { $("#more").click(function() { $("#show").fadeIn("slow"); }); });`

其中#more 是 div(click)，它使 div #show 通过淡入可见。一定要设置：`#show{ display:none; }`

# c++ - c++ qt QObject::connect: No such slot

> ID：16085611
> 
> 赞同：1
> 
> 时间：2013-04-18T14:22:43.630
> 
> 标签：c++, qt, connect, slot

我已经这样定义了我的插槽：

```
void choixPoints:: prendpixel1(Pixel depart)
{
//...
} 
```

我想执行以下句子：

```
Pixel depart= picmou->define(); //definition of a pixel, well defined 
connect(chp3, SIGNAL(clicked()), this, SLOT(prendpixel1(Pixel depart))); 
```

但是，当我执行时，我得到：

```
QObject::connect: No such slot choixPoints::prendpixel1(Pixel depart) 
```

为什么我的插槽不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:37:49.943

我认为问题在于，在您的 SLOT 定义中，您输入了一个变量名“depart”，这是不正确的。SLOT 和 SIGNAL 定义必须只有函数名和类型。所以：

```
connect(chp3, SIGNAL(clicked()), this, SLOT(prendpixel1(Pixel))); 
```

顺便说一句，我认为它也是空间敏感的，所以`SLOT(anotherfn(Pixel, Pixel))`也是错误的。

HTH，露丝

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:35:04.603

您是否在标头中将 void choixPoints:: prendpixel1(Pixel leave) 声明为公共插槽？ [http://qt-project.org/doc/qt-4.8/signalsandslots.html#a-small-example](http://qt-project.org/doc/qt-4.8/signalsandslots.html#a-small-example)

您还必须注册您的数据类型（此处：“像素”）： http: [//www.developer.nokia.com/Community/Wiki/Qt_Signal/Slot_with_custom_data_types](http://www.developer.nokia.com/Community/Wiki/Qt_Signal/Slot_with_custom_data_types)

# titanium - Titanium Alloy builds successfully but index.html not found

> ID：16085621
> 
> 赞同：1
> 
> 时间：2013-04-18T14:23:10.647
> 
> 标签：titanium, appcelerator, titanium-alloy

I'm exploring Titanium Alloy at the moment. So created a project based on the Two-tabbed Alloy Application template provided by Appcelerator in the dashboard. When I run the app with Titanium Mobile Web Previewer as run config, it compiles successfully, but when it opens the browser I get a page with only the text: 'File /index.html not found'. I googled and searched, but I cant find a solution.

By the way, the console reads:

```
Titanium Command-Line Interface, CLI version 3.1.0, Titanium SDK version 3.0.2.GA
Copyright (c) 2012-2013, Appcelerator, Inc.  All Rights Reserved.
[INFO] :   Compiling "development" build 
```

and then it opens the browser.

# java - 从链表返回值而不移动迭代器

> ID：16085622
> 
> 赞同：1
> 
> 时间：2013-04-18T14:23:10.957
> 
> 标签：java, inheritance, linked-list

我有 2 个课程：学生和注册表。注册表旨在保存学生列表。当我尝试从注册表类返回学生的值时，迭代器移动到下一个学生以获取下一个值，因此当只有 2 个学生在场时，我得到一个 NoSuchElemennt 异常。

```
public String format() 
{
    ListIterator<Student> iterator 
            = studentList.listIterator();

    for (int i = 0; i < studentList.size(); i++)
    {
        System.out.println("if Statement");
        if (iterator.hasNext())
        {
            System.out.println("hasNext");
            return String.format("%0s%0s%0s", 
            iterator.next().getSurName(), iterator.next().getForeName(),
            iterator.next().getStudentId());
        }

    }        

    return null;
} 
```

我希望它从 stud1 返回所有 3 个值，然后转到 stud2 等等。

~~这是学生和注册表源文件的链接以及两者的测试器； [https://www.dropbox.com/sh/ol2jyfbuyyjnrcg/1J4LlEaqc6](https://www.dropbox.com/sh/ol2jyfbuyyjnrcg/1J4LlEaqc6)~~

~~如果需要，我会发布更多代码。~~

由于答案已关闭，因此不再删除​​任何代码和链接中的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:28:55.833

**每次**调用时，您都在推进迭代器`.next()`。在当前迭代中只调用**一次**。

像这样：

```
Student res = iterator.next();
return String.format("%0s%0s%0s", res.getSurName(),res.getForeName(),res.getStudentId()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:27:06.580

您应该`next`只调用一次该方法，因为每次调用都会转发光标。

```
if (iterator.hasNext()) {
    Student currStudent = iterator.next();
    //use currStudent instead of calling next 
```

> 我希望它从 stud1 返回所有 3 个值，然后转到 stud2 等等。

由于您的迭代器是该方法的本地迭代器，因此一旦方法返回，它将消失。我认为最好使您的`format`方法成为`static`（实用程序）方法并将其签名更改为将 an`Student`作为参数。`public static String format(Student student)`. 这样，您可以在遍历列表时格式化所有学生。

**更新**

* * *

您可以编写一个实用程序方法，如下所示：

```
public static String format(Student student) {
    return String.format("%0s%0s%0s", student.getSurName(), student.getForeName(), student.getStudentId());
} 
```

对于可以格式化所有学生并返回格式的方法 -

```
public List<String> formatAll() {
    ListIterator<Student> iterator 
            = studentList.listIterator();
    List<String> formats = new ArrayList<String>();//to keep formats of all students
    //for (int i = 0; i < studentList.size(); i++)
    //{
        //System.out.println("if Statement");
        while (iterator.hasNext()) //while loop is better for iterators
        {
            Student currStudent = iterator.next();
            formats.add(format(student)); //calling utility method here
        }

    //}        

    return formats; // finally return the list of formats
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:41:23.353

要在不使用迭代器的情况下迭代列表，您应该使用增强型 for 循环。然后你的代码变成 -

```
public String format() 
{
ListIterator<Student> iterator 
        = studentList.listIterator();

for (Student student: studentList)
{
    System.out.println("For Loop");       

        return String.format("%s%s%s", 
        student.getSurName(), student.getForeName(),
        student.getStudentId());     

}   
 return null;   
} 
```

# c++ - app -> 回调调用时的扩展崩溃

> ID：16085626
> 
> 赞同：2
> 
> 时间：2013-04-18T14:23:14.660
> 
> 标签：c++, marmalade, marmalade-edk

我有一个 Marmalade 扩展程序和示例应用程序，它从扩展程序将 C 回调传递给函数，所以每当扩展程序尝试调用该函数时，它就会崩溃并显示神秘消息：

异常类型：EXC_BAD_ACCESS (SIGSEGV) 异常代码：0x00000008 处的 KERN_INVALID_ADDRESS 线程崩溃：0

虽然，在我调用该函数之前，我打印了它的地址，它是不同的并且看起来是有效的。那么是果酱限制还是我做错了什么？

ps：值得注意的是，我用clang（不是gcc）编译了我的果酱扩展，一切正常，但是回调......虽然我之前使用了默认的果酱gcc并且遇到了完全相同的问题。

示例应用程序：

```
class CDemoApp {
public:
    static CDemoApp* getInstance() {
        static CDemoApp instance;
        return &instance;
    }

    void setup()
    {
        app = CreateApp();
        window = CreateWindow();
        app->AddWindow(window);
        view = CreateView("canvas");

        button = CreateButton();

        button->SetEventHandler("click", (void*)NULL, CDemoApp::onButton1Click);

        view->AddChild(button);
        window->SetChild(view);

        app->ShowWindow(window);
    }

    void run() {
        app->Run();
    }

    static void onSDKInit(const char* err, void* context) {
        printf("Done.\n");
    }

    static bool onButton1Click(void* data, CButton* button) {
        if(!s3eMyExtDidInitialize()) {
            // crash happens here.
            // extension doesn't perform any ops, just calls the callback with dummy arguments
            s3eMyExtDoInitialize(APP_ID, APP_SECRET, CDemoApp::onSDKInit, NULL);
        }

        return true;
    }

private:
    CDemoApp() {};

private:
    CAppPtr app;
    CWindowPtr window;
    CViewPtr view;
    CButtonPtr button;
};

// Main entry point for the application
int main()
{
    if(!s3eMyExtAvailable())
    {
        s3eDebugErrorShow(S3E_MESSAGE_CONTINUE, "My extension is not found");
        return 0;
    }

    CDemoApp::getInstance()->setup();
    CDemoApp::getInstance()->run();

    return 0;
} 
```

从扩展中暴露的函数`s3eMyExtDoInitialize`如下所示：

```
typedef void (*my_callback)(const char* error, void* context);
void s3eMyExtDoInitialize_platform(const char* appId, const char* appSecret, my_callback callback, void* context) { 
    callback(NULL, NULL); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:13:10.410

好吧，显然没有办法将函数指针从应用程序直接传递到扩展程序，所以 Marmalade 提供了他们自己的回调系统，应该用来让事情正常工作。

# c# - 什么样的颜色混合才能使前景色与背景色不同？

> ID：16085628
> 
> 赞同：1
> 
> 时间：2013-04-18T14:23:20.867
> 
> 标签：c#, winforms, colors, blending, color-blending

假设我知道背景颜色并且我想相应地更改前景色以使文本与背景不同。例如，如果当前文本颜色（前景色）为红色，对于用户的某些更改，背景色也变为红色或接近红色（这将使文本难以辨认），在这种情况下，我想使用更改前景色一些颜色混合配方，使其与背景色不同，并保持易读性。

希望你能帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:41:13.437

根据[此博客条目](http://24ways.org/2010/calculating-color-contrast/)上的信息，我可以提出以下 C# 代码，该代码返回`Color.Black`或返回`Color.White`与给定（背景）颜色的最佳对比：

```
public Color GetContrastingColor(Color backColor)
{
    int r = (int)backColor.R;
    int g = (int)backColor.G;
    int b = (int)backColor.B;

    int yiqSpace = ((r * 299) + (g * 587) + (b * 114)) / 1000;

    if (yiqSpace > 131)
    {
        return Color.Black;
    }
    else
    {
        return Color.White;
    }
} 
```

该方法使用[YIQ](http://en.wikipedia.org/wiki/YIQ)来确定颜色是浅色还是深色，并返回一个对比色。

# mysql - mysql从时间戳获取月份不起作用

> ID：16085629
> 
> 赞同：5
> 
> 时间：2013-04-18T14:23:23.747
> 
> 标签：mysql, timestamp

我有一个查询可以从数据库中提取正确的数据，但它不会从时间戳中返回月份。在时间戳列中，我得到一个空值，即使时间戳存在。它作为 bigInt 存储在数据库中（这不是我的想法）。

我需要的是这样返回的日期：

```
Course |  fcpd   |   Month
216    0.5         04 
```

但我得到：

```
Course |  fcpd   |   Month
216    0.5        null

SELECT mdl_quiz.course, mdl_quiz.fcpd, MONTH(mdl_quiz_grades.timemodified) as Month FROM mdl_quiz INNER JOIN mdl_quiz_grades ON mdl_quiz.course = mdl_quiz_grades.quiz WHERE mdl_quiz_grades.userid = 9428 AND mdl_quiz.course = 215 
```

谁能指出我哪里出错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T14:48:26.173

您需要先将时间戳转换回日期，然后才能应用该`MONTH()`功能。

```
MONTH(mdl_quiz_grades.timemodified) 
```

变成

```
MONTH(FROM_UNIXTIME(mdl_quiz_grades.timemodified)) 
```

[在此处](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)阅读更多相关信息。

作为旁注，`int`时间戳就足够了，`bigint`没有必要。时间戳是一个 32 位数字，这就是为什么它可以保存 2038 年 1 月 19 日的最大日期。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-10T05:22:12.643

```
"SELECT count(*) as records FROM sms WHERE MONTH(tarih)=MONTH(NOW()) and ceptel='"&ceptel&"'" 
```

# java - 将控制台窗口打印到文本文件，java

> ID：16085631
> 
> 赞同：0
> 
> 时间：2013-04-18T14:23:35.770
> 
> 标签：java, webdriver, selenium-webdriver

我想问是否可以将我的自动化测试的控制台窗口打印到文本文件中。我是 webdriver 和 java 的新手，到目前为止，我已经使用下面的代码打印出来了。任何帮助将不胜感激，在此先感谢。

```
FileWriter fw = new FileWriter("c:\\selenium_output_.txt");
fw.write("test");
fw.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:26:32.780

如果您的自动化测试控制台写入`System.out`，您可以使用 重定向`System.out`到文件[`System.setOut`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)。更多[关于 SO 的其他答案](https://stackoverflow.com/questions/2851234/system-out-to-a-file-in-java)。（如果它也使用它，你也可以做同样的事情`System.err`。）

# view - 当我单击 {{#linkTo}} 并在 ember.js 中设置对象时

> ID：16085636
> 
> 赞同：0
> 
> 时间：2013-04-18T14:23:58.677
> 
> 标签：view, model, controller, ember.js, action

```
 App = Ember.Application.create({
   currentProject: 21
 }); 
```

默认值为 21，当 `App.currentProject`我点击 {{#linkTo}} 时，我想`:project_id`在`App.currentProject`.

路线：

```
App.Router.map(function() {
  this.resource('project', { path: '/project/:project_id' }, function(){
    this.resource('tasks', function(){
      this.route('new');
    });
  })
});

App.TasksRoute = Ember.Route.extend({
  model: function(params){
    return App.Project.find(params.project_id);
  },
  setupController: function(controller, model) {
    controller.set('content', model.tasks);
  }
}) 
```

模板：

```
{{#each controller}}
  <div class="panel">
    {{#linkTo 'tasks' this}}    //click this linkTo, render to project/:project_id/tasks URL and set the App.currentProject to the :project_id at the sametime
      <div class="top"><i class="batch-big b-code"></i>
        <h6>{{title}}</h6>
      </div>
    {{/linkTo}}
  </div>
{{else}}
  <div>There are no Projects.</div>
{{/each}} 
```

我不知道在哪里`App.currentProject`设置`project_id`，在路线：

```
App.TasksRoute = Ember.Route.extend({
  model: function(params){
    App.set('currentProject', params.project_id);   //I add the code to here,but it did not work
    return App.Project.find(params.project_id);
  },
  setupController: function(controller, model) {
    controller.set('content', model.tasks);
  }
}) 
```

模板{{#linkTo}}，我不知道如何设置动作。

版本信息

*   要求：2.1.4
*   jQuery：v1.9.1
*   余烬：v1.0.0-rc.1
*   车把：1.0.0-rc.3

# java - 无法弄清楚如何返回这个递归函数？

> ID：16085641
> 
> 赞同：0
> 
> 时间：2013-04-18T14:24:16.677
> 
> 标签：java, eclipse

Java 编程语言的新手，对如何运行此代码感到困惑！我正在使用 Eclipse。

```
public static String random(String n)
{
    int F = n.length();
    if(F <= 1) return n;
    String b = n.substring(0, F/2);
    String c = n.substring(F/2, F);
    return random(c) + random(b);
} 
```

我是在终端窗口中运行 java 程序的新手，我似乎无法弄清楚如何获取返回值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:28:32.117

把它放到这样的类中

```
public class MyRandom {

   public static void main(String[] args) {
    System.out.println(random("abc"));
   } 

   public static String random(String n) {
    int length = n.length();

    if (length <= 1)
        return n;
    String b = n.substring(0, length / 2);
    String c = n.substring(length / 2, length);
    return random(c) + random(b);
   }
} 
```

然后右键单击该文件并选择“运行方式”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:26:07.323

您可以在`main`方法中使用以下代码：

```
System.out.println(random("Hello")); 
```

由于`random`方法返回 a `String`，您可以在终端中将其打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:27:25.673

在标准输出打印中包装对您的函数的调用，如下所示： `System.out.println(random("test"));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:27:40.610

```
String returnValue = random("YourNString"); 
```

所以返回值将存储在`returnValue`

然后你可以做`System.out.println(returnValue)`

或者干脆做`System.out.println(random("YourNString"));`

# mysql - 我的工会工作了吗？

> ID：16085642
> 
> 赞同：0
> 
> 时间：2013-04-18T14:24:19.103
> 
> 标签：mysql, join, union

我们现在正在制作学校版的 Facebook aka Tigerbook。我们创建了以下三个数据表。

用户：

```
user    name
1       Hallie  
2       Dylan
3       Sarina
4       Dominic 
```

朋友们：

```
user    friend
1       2
1       3
1       4
2       1
3       1
4       1
2       4
4       2
3       2
2       3 
```

帖子：

```
user    postid  post
1       101     This is TigerBook!
2       102     I am pregnant.
1       103     I like peeps
4       104     Giant Buzz Lightyears rock.
3       105     Die Tucker die
1       106     Murhur de derpity derp
2       107     banana spaghetti squid
4       108     chicken 
```

我们只是使用了以下语法：

```
select user from users union select user from friends union select user from posts; 
```

它想出了这个：

```
user
1
2
1
4 
```

我们只是想知道加入是否有效，或者我们是否应该尝试其他方法。我们已经尝试过左连接和完全连接，但没有一个效果很好。

附带说明：当我们将 php 代码连接到网页时，它会在创建登录时自动生成用户，还是我们必须在用户登录之前创建用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:28:04.187

好吧，这显然不是`JOIN`......它`UNION`删除了`user`所有三个表的重复项......所以要回答你的问题，你的`UNION`工作。如果你想让`JOIN`用户发帖，你需要类似的东西

```
SELECT a.user, a.name, b.postid, b.post
FROM users a
JOIN posts b ON b.user = a.user 
```

这产生

```
| 用户 | 姓名 | 邮政编码 | 发布 |
-------------------------------------------------- --------
| 1 | 哈莉 | 101 | 这是虎书！|
| 2 | 迪伦 | 102 | 我怀孕了。|
| 1 | 哈莉 | 103 | 我喜欢偷看|
| 4 | 多米尼克 | 104 | 巨大的巴斯光年岩石。|
| 3 | 萨丽娜 | 105 | 模具塔克模具 |
| 1 | 哈莉 | 106 | Murhur de derpity derp |
| 2 | 迪伦 | 107 | 香蕉意大利面鱿鱼| 高分辨率照片| CLIPARTO
| 4 | 多米尼克 | 108 | 鸡|
```

[查看演示](http://sqlfiddle.com/#!2/3ea19/1)

# mysql - 使用 MySQL 数据库为 Java 应用程序制作安装程序

> ID：16085645
> 
> 赞同：4
> 
> 时间：2013-04-18T14:24:31.207
> 
> 标签：mysql, deployment, installation, java

我正在为我的 Java 应用程序寻找一个可以捆绑我自己的 JRE 和 MySQL 数据库的安装程序，并且我听说过 Install4J。Install4J 是否具有捆绑 MySQL Database 5.0 的功能，以便我的客户可以轻松安装以 MySQL 作为数据库的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T06:44:06.323

您可以使用**Inno Setup** .从[http://www.jrsoftware.org/isinfo.php下载](http://www.jrsoftware.org/isinfo.php)

对于安装 mysql 和 jre，您可以使用批处理文件并调用**inno setup**。

您应该使用批处理文件静默安装 mysql 和 jre。

静默安装 jre7u7 的示例：

```
jre-7u7.exe /s UPDATE=0 
```

静默安装 mysql 的示例：

```
msiexec /i "mysql-5.5.21.msi" /quiet INSTALLDIR="%PROGRAMFILES%\MySQL\MySQL Server 5.5" 
```

静默配置实例 mysql 的示例：

```
MySQLInstanceConfig.exe -i -q "-lC:\mysql_install_log.txt" "-nMySQL Server 5.5" "-p%pro%\MySQL\MySQL Server 5.5" -v5.5.21 "-t%PROGRAMFILES%\MySQL\MySQL Server 5.5\my-template.ini" "-c%pro%\MySQL\MySQL Server 5.5\my.ini" ServerType=DEVELOPMENT DatabaseType=MIXED ConnectionUsage=OLTP Port=3306 ServiceName=Mysql Charset=utf8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:43:32.090

您可以使用高级安装程序。从[http://www.advancedinstaller.com/](http://www.advancedinstaller.com/)下载。

您可以捆绑 jre 和数据库文件

# python - CSV 模板输出，不知道 CSV 中的内容

> ID：16085646
> 
> 赞同：0
> 
> 时间：2013-04-18T14:24:31.690
> 
> 标签：python, django

我有一个我加载的 CSV...

```
import csv
file = upload.filepath
file_read = csv.reader(file)
data = [row for row in file_read] 
```

在我的模板中，我想列出每个项目而不必知道名称....

我想我需要的是计算行中有多少项目，循环获取每个项目的次数？也许？

所以我的输出可能是

```
myemail,mynumber,test@test.com,1
myemail2,mynumber2,test@test2.com,2 
```

甚至

```
myname,0897654543
myname,0897654w543 
```

无论哪种方式，我都不知道 csv 中有多少列

**更新：**

那我可以这样做吗？

```
{% for item in data %}
   {% for i in item %}
    {{ i }}
   {% endfor %}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:45:31.277

你能用[`numpy.genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)吗？

```
import numpy as np
data = np.genfromtxt("yourfile.csv",delimiter=",") 
```

这将创建`data`一个 numpy 数组，其列数与您的 csv 文件中的列数一样多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:41:47.580

我不明白“在我的模板中我想列出每个项目”是什么意思。但是如果你只想打印出每一行，你可以这样做

```
for row in file_read :
    print row 
```

或单独打印每个项目，

```
for row in file_read :
    for item in row :
        print item 
```

# c# - 对象不包含“跳过”Umbraco 剃须刀的定义

> ID：16085649
> 
> 赞同：0
> 
> 时间：2013-04-18T14:24:42.627
> 
> 标签：c#, razor, umbraco

我正在尝试按它们的第一个字母对一些节点进行排序，并将它们分页在 razor.(Umbraco) 中。但是在遇到 foreach 时会出现“对象不包含‘跳过’的定义”错误。

```
pagesToList = homeNode.Children.OrderBy("Name");

IEnumerable<DynamicNode> nl = @homeNode.Children.Items;
pagesToList = nl.Where(x => x.Name.StartsWith(currentLetter)); 
```

这是@pagesToList 输出的内容：

```
System.Linq.Enumerable+WhereListIterator`1[umbraco.MacroEngines.DynamicNode]

foreach(dynamic item in pagesToList.Skip(1){

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:28:11.193

您可能使用了错误的属性。如果您只在**homeNode**下方的那些节点之后，则不要使用 Items 属性。另外，尽量不要投射你的物体。C# 有一个有效的 var 对象。假设 homeNode 是 DynamicNode，那么可能值得尝试以下操作：

```
pagesToList = homeNode.Children.OrderBy("Name").Where(x => x.Name.StartsWith(currentLetter));

```

然后你的代码应该可以工作。请注意，我们再次使用 var 是因为我们希望在编译时声明对象，而不是使用 dynamic，我们应该只在访问pagesToList 对象的一些未知或*动态属性时才真正这样做）：*

```
foreach（pagesToList.Skip（1）中的var项目）{

}

```

总而言之，您的代码似乎使用了属性“Items”，它为我们提供了一个 DynamicNode[] 数组，而不是一个 IEnumerable 对象。

我希望这能够帮到你。祝你好运！

# ios - Rotate UIButton and preserve its size

> ID：16085651
> 
> 赞同：1
> 
> 时间：2013-04-18T14:24:47.080
> 
> 标签：ios, objective-c, cocoa-touch, uiviewanimation, cgaffinetransform

I am trying to rotate buttons, that are shaped as a square (65 x 65). After I rotate them, the buttons change their sizes. Is there any way, to make a rotation and keep the size?

**Code:**

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];

self.stealthButton.transform = CGAffineTransformMakeRotation(radians);
self.recButton.transform = CGAffineTransformMakeRotation(radians);
self.toggleButton.transform = CGAffineTransformMakeRotation(radians);
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:30:55.970

试试这样可能对你有帮助，

```
CABasicAnimation *fullRotation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    fullRotation.fromValue = [NSNumber numberWithFloat:0];
    fullRotation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];
    fullRotation.duration = 1;
    fullRotation.repeatCount = 1;
    [button.layer addAnimation:fullRotation forKey:@"360"]; 
```

在您的项目中添加以下框架。

```
#import <QuartzCore/QuartzCore.h>
#import "QuartzCore/CALayer.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:33:35.540

他们不会改变他们的大小。他们改变框架的大小。

添加：

```
CGFrame oldFrame = self.stealthButton.frame;
//Do that for all the buttons
//Do your rotation
self.stealthButton.frame = oldFrame; 
```

但是：这样做实际上会缩小按钮的大小。从用户的角度来看，它会显得更小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:42:59.763

确保您将内容视图设置为居中。

```
self.stealthButton.contentMode = UIViewContentModeCenter;
self.recButton.contentMode = UIViewContentModeCenter;
self.toggleButton.contentMode = UIViewContentModeCenter; 
```

# c# - 使用 EF 进行更新\保存违反了数据库唯一性限制

> ID：16085654
> 
> 赞同：0
> 
> 时间：2013-04-18T14:25:10.093
> 
> 标签：c#, sql, asp.net-mvc, entity-framework

我正在使用 EF 更新实体。

这是我的代码：

```
 public MamConfiguration_V1 Save(MamConfiguration_V1 item)
    {
            item.ThrowIfNull("item");

            mMaMDBEntities.MamConfiguration_V1.AddObject(item);

            mMaMDBEntities.ObjectStateManager.ChangeObjectState(item, System.Data.EntityState.Modified);

            mMaMDBEntities.SaveChanges();

            return item;
    } 
```

但是，通过这种方式，我在数据库中得到了 PK 违规错误。

我更喜欢使用这种方式（创建一个新的 EF 实体）并将其标记为

修改了，我怎么能不打破唯一性限制？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T14:58:49.517

如果您使用此方法更新现有项目，那么您会收到异常，因为

```
 mMaMDBEntities.MamConfiguration_V1.AddObject(item); 
```

线。使用此代码，您似乎第二次尝试将项目放入表中。如果我猜对了并且您使用此方法更新现有项目，您只需删除此行 - EF 将根据您对对象字段所做的更改自动更新数据库。

# c++ - 来自迭代器循环的函数调用“调试断言失败”表达式：映射/设置迭代器不兼容

> ID：16085656
> 
> 赞同：0
> 
> 时间：2013-04-18T14:25:23.930
> 
> 标签：c++, iterator

来自迭代器循环的函数调用

从迭代器循环内部调用函数时出现错误，提示“调试断言失败”表达式：map/set 迭代器不兼容。不知道是什么原因。

```
char *text = new char[MAXLEN];
int j;
for( map<int, string>::iterator it=map.begin(); it!=map.end(); ++it)
{
    for (j=0;j<orows;j++)
    {
        strcpy(text, (*it).second.c_str());
        char val;
        obj->FindStatus(data[j].id, stripback, &val);
        data[j].status[j] = val;
    }
} 
```

# ruby - 在第一次失败时停止执行特定的 rspec 测试（不是测试套件）

> ID：16085658
> 
> 赞同：2
> 
> 时间：2013-04-18T14:25:43.037
> 
> 标签：ruby, testing, rspec

是否有一些编程方式可以强制 rspec 测试在第一次失败时停止？

例如，

1.  我有一个带有几个 rspec 测试的测试套件，我一次运行它们。
2.  每个 rspec 测试都位于单独的 spec.rb 文件中

如果这些测试中的任何一个发生故障，我想在失败的特定测试步骤上进一步停止执行该特定测试，但不停止执行我正在运行的整个测试套件。

我知道有以下方法：

```
RSpec.configure do |c|
  c.fail_fast = true
end 
```

但是在我在测试套件中运行的任何规范文件中定义它会导致套件的所有执行失败。

有什么办法可以处理这个案子？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-04T18:16:42.460

我知道这是一个老问题，但我在寻求自己实现同样的行为时偶然发现了它。经过多次徒劳的搜索，我想出了一些相当简单的实现方法，它实际上提供了所需的行为！

只需将以下内容添加到每个规范文件中，以在发生异常时跳过后续示例（在该特定文件中）：

```
 before :all do
    $continue = true
  end

  around :each do |example|
    if $continue
      $continue = false
      example.run
      $continue = true unless example.exception
    else
      example.skip
    end
  end 
```

这里的逻辑应该是不言自明的。继续运行示例直到发生异常，然后跳过该规范的其余示例。围绕每个钩子很好地促进了这种逻辑，因为它可以控制每个示例的执行。有关“around”钩子的更多信息，请参阅[RSpec 文档](http://www.rubydoc.info/gems/rspec-core/RSpec%2FCore%2FHooks%3Aaround)。

# routes - 如何以编程方式列出本体中两个实例之间的关系？

> ID：16085667
> 
> 赞同：0
> 
> 时间：2013-04-18T14:26:20.273
> 
> 标签：routes, jena, ontology, instances

我有一个由以下关系组成的本体

```
Company1 
  :hasSubsidary sub1 
  :hasDepartment Cars1 
  :hasSubdepartment Manufacturing 
  :isinBuilding  area1 
  :hasUnit PrecisionMaching 
  :hasMachine LatheMachine1 
```

我有一个本体模型，其中创建了这些个体并描述了关系。

Howe 可以使用 Jena 或任何其他 API 以语法方式列出给定输入参数的所有关系路径`Company1`吗？`Lathemachine1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:34:45.697

你没有说你的本体的命名空间是什么，所以我推测它是`http://example.com/ontologies/test#`. 鉴于此，您有两个基本选择：使用 SPARQL，或直接使用 Jena RDF API。

在第一种情况下，您的查询非常简单：

```
prefix ex: <http://example.com/ontologies/test#>
select distinct ?relationship where { ex:Company1 ?relationship ex:LatheMchine1 } 
```

[您可以在 Jena 文档](http://jena.apache.org/documentation/query/app_api.html)中了解如何从 Java 代码运行 SPARQL 查询。

在第二种情况下，它也非常简单：

```
Model m = ... your RDF model ... ;
String NS = "http://example.com/ontologies/test#";
Resource company1 = m.getResource( NS + "Company1" );
Resource lathe1 = m.getResource( NS + "LatheMachine1" );

Set<Property> relationships = new HashSet<Property>();
for (StmtIterator i = m.listStatements( company1, null, lathe1 ); i.hasNext();) {
  Statement s = i.next();
  relationships.add( s.getPredicate() );
} 
```

**发布者在评论中更全面地解释了这个问题后**更新：****

 **好的，所以您需要的是给定节点之间的路径。如果您只想要*一条*路径，而不是*所有*路径，您可以使用[`OntTools.findShortestPath()`](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/ontology/OntTools.html#findShortestPath%28com.hp.hpl.jena.rdf.model.Model,%20com.hp.hpl.jena.rdf.model.Resource,%20com.hp.hpl.jena.rdf.model.RDFNode,%20com.hp.hpl.jena.util.iterator.Filter%29)：

```
Path p = OntTools.findShortestPath( m, company1, lathe1, Filter.any() ); 
```

如果您确实想要所有路径，您可以使用代码`findShortestPath`作为模板进行简单的广度优先搜索。**

# c# - Windows App 认证测试：测试 Windows Store App

> ID：16085674
> 
> 赞同：-3
> 
> 时间：2013-04-18T14:26:52.590
> 
> 标签：c#, .net, windows-8, microsoft-metro, windows-store-apps

我在 Windows 商店应用程序认证工具包中测试了我的应用程序，但出现以下错误：

```
Crashes and hangs test
PASSED
App launch tests

FAILED
Crashes and hangs
Error Found: The crashes and hangs test detected the following errors:
Application .............._neutral__jarrs3vj594qe was detected by Windows Error Reporting and experienced a crash or hang.
Impact if not fixed: An app that stops responding or crashes can cause data loss and is a poor user experience.
How to fix: Investigate, debug the executable(s) in question to identify and fix the problem, then rebuild and re-test the app. 
Using Application Verifier Within Your Software Development Lifecycle 
```

任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:45:20.800

查看这些[通过 Windows 认证的提示](http://blogs.msdn.com/b/jennifer/archive/2012/11/12/common-certification-errors-when-submitting-to-the-windows-store.aspx)。

在[http://msdn.microsoft.com/en-us/library/windows/apps/jj657973.aspx#crashes_and_hangs_test](http://msdn.microsoft.com/en-us/library/windows/apps/jj657973.aspx#crashes_and_hangs_test)上有关于崩溃和挂起测试的具体信息。阅读这篇文章，但它建议采取以下纠正措施：

> 确保在测试计算机上启用了 UAC。
> 
> 确保您在具有足够大屏幕的计算机上运行测试。
> 
> 如果您的应用无法启动并且您的测试平台满足 ActivateApplication 的先决条件，您可以通过查看激活事件日志来解决问题。要在事件日志中查找这些条目：
> 1\. 打开 eventvwr.exe 并导航到 Application and Services Log\Microsoft\Windows\Immersive-Shell 文件夹。
> 2\. 过滤视图以显示事件 ID：5900-6000。
> 3\. 查看日志条目以获取可能解释应用程序无法启动的原因的信息。

# c++ - 我不能使用 DrawText()

> ID：16085675
> 
> 赞同：3
> 
> 时间：2013-04-18T14:26:59.423
> 
> 标签：c++, winapi, gdi

我正在尝试在 C++ 上使用 GDI 绘制一些文本

碰巧我有一个类有一个返回状态的方法，我想画它

状态是一个 std::string！

所以这是我到目前为止所拥有的：

```
 RECT status = RECT();
        status.left = rcClient.right-200;
        status.left = rcClient.left;
        status.top = rcClient.top;
        status.bottom = rcClient.bottom;

        DrawTextW(hdc, game->GetStatus().c_str(), 1, status, 0); 
```

我遇到的错误是：

```
错误 C2664：“FormatMessageW”：无法将参数 5 从“LPWSTR”转换为“char *”687 damas
错误 C2664：“FormatMessageW”：无法将参数 5 从“wchar_t *”转换为“char *”damas
错误 C2664：“DrawTextW”：无法将参数 2 从“const char *”转换为“LPCWSTR”  

```

我找不到解决此问题的方法...有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:33:42.820

A`std::string`使用字符，但`DrawTextW`期望使用宽字符（`WCHAR`s，与`wchar_t`s 相同）。

您可以`DrawTextA`使用您的字符串显式调用。它将使用宽字符复制您的字符串并将其传递给`DrawTextW`.

```
DrawTextA(hdc, game->GetStatus().c_str(), 1, &status, 0); 
```

（另请注意，它需要一个指向 的指针`RECT`，因此您也需要`&`。）

# yeoman - Grunt concat 和 css 文件的缩小

> ID：16085676
> 
> 赞同：1
> 
> 时间：2013-04-18T14:27:00.323
> 
> 标签：yeoman, gruntjs

我目前正在使用 Yeoman 生成的 Gruntfile 并希望连接和缩小我的 CSS。我为我的 JavaScript 执行此操作的方式似乎工作正常，但是当我尝试将相同的方法应用于我的 css 文件时，我只是将它们连接在一起而没有缩小。

这是我在 index.html 文件中所做的事情：

```
 <!-- build:css styles/dist.bundle.css -->
    <link rel="stylesheet" href="styles/loader.css" />
    <link rel="stylesheet" href="styles/social.css" />
    <link rel="stylesheet" href="styles/main.css" />
    <!-- endbuild --> 
```

请注意，如果我删除构建块注释，我会得到一个缩小版本，但只是在 3 个单独的文件中。

在我的 Gruntfile 配置中，我有以下内容：

```
 cssmin: {
        dist: {
            files: {
                '<%= yeoman.dist %>/styles/dist.bundle.css': [
                    '.tmp/styles/{,*/}*.css',
                    '<%= yeoman.app %>/styles/{,*/}*.css'
                ]
            }
        }
    } 
```

我的 usemin 配置只是默认配置：

```
 useminPrepare: {
        html: '<%= yeoman.app %>/index.html',
        options: {
            dest: '<%= yeoman.dist %>'
        }
    },
    usemin: {
        html: ['<%= yeoman.dist %>/{,*/}*.html'],
        css: ['<%= yeoman.dist %>/styles/{,*/}*.css'],
        options: {
            dirs: ['<%= yeoman.dist %>']
        }
    } 
```

谁能建议我如何实现我想要做的事情？或者这对于 usemin 和 cssmin 是不可能的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:02:36.560

你能粘贴你的 gruntfiles 吗？因为 usemin 本身不会连接/缩小/丑化，而是告诉将要使用的文件的任务，也许你没有要求 grunt 在连接后缩小文件

# python - Python 3.2 与 Python 2.7 代码问题

> ID：16085679
> 
> 赞同：4
> 
> 时间：2013-04-18T14:27:04.687
> 
> 标签：python, python-2.7, python-3.x, pygame

我有一个使用 pygame 绘制 mandlebrot 集的代码。这是代码。

```
import pygame, sys, math
from decimal import *
window=pygame.display.set_mode((1000, 1000))
window.fill((255, 255, 255))
pygame.display.update()
winrect=window.get_rect()
hq=3
getcontext().prec=20
colors=((255, 0, 0), (255, 128, 0), (255, 255, 0), (128, 255, 0), (0, 255, 0), (0, 255, 128), (0, 255, 255), (0, 128, 255), (0, 0, 255), (128, 0, 255), (255, 0, 255), (255, 0, 128))
def graph(scale):#left, right, bottom, top
    window.fill((0, 0, 0))
    minimum=-1
    y=((scale[3]-scale[2]))/(winrect.height)+scale[2]
    for a in range(winrect.width):
        x=((scale[1]-scale[0])*(a))/(winrect.width)+scale[0]
        d, e=x**2-y**2+x, 2*x*y+y
        for i in range(int(1/(50*(scale[1]-scale[0]))+25)):
            d, e=d**2-e**2+x, 2*d*e+y
            if math.sqrt(d**2+e**2)>2:
                if i<minimum or minimum==-1:
                    minimum=i
                break
    y=((scale[3]-scale[2])*winrect.height)/(winrect.height)+scale[2]
    for a in range(winrect.width):
        x=((scale[1]-scale[0])*a)/winrect.width+scale[0]
        d, e=x**2-y**2+x, 2*x*y+y
        for i in range(int(1/(50*(scale[1]-scale[0]))+25)):
            d, e=d**2-e**2+x, 2*d*e+y
            if math.sqrt(d**2+e**2)>2:
                if i<minimum or minimum==-1:
                    minimum=i
                break
    x=((scale[1]-scale[0])*1)/winrect.width+scale[0]
    for b in range(winrect.height):
        y=((scale[3]-scale[2])*b)/winrect.height+scale[2]
        d, e=x**2-y**2+x, 2*x*y+y
        for i in range(int(1/(50*(scale[1]-scale[0]))+25)):
            d, e=d**2-e**2+x, 2*d*e+y
            if math.sqrt(d**2+e**2)>2:
                if i<minimum or minimum==-1:
                    minimum=i
                break
    x=((scale[1]-scale[0])*winrect.width)/winrect.width+scale[0]
    for b in range(winrect.height):
        y=((scale[3]-scale[2])*b)/winrect.height+scale[2]
        d, e=x**2-y**2+x, 2*x*y+y
        for i in range(int(1/(50*(scale[1]-scale[0]))+25)):
            d, e=d**2-e**2+x, 2*d*e+y
            if math.sqrt(d**2+e**2)>2:
                if i<minimum or minimum==-1:
                    minimum=i
                break
    for a in range(winrect.width):
        for b in range(winrect.height):
            x=((scale[1]-scale[0])*a)/winrect.width+scale[0]
            y=((scale[3]-scale[2])*b)/winrect.height+scale[2]
            d, e=x**2-y**2+x, 2*x*y+y
            for i in range(minimum):
                d, e=d**2-e**2+x, 2*d*e+y
            for i in range(20*hq):
                d, e=d**2-e**2+x, 2*d*e+y
                if math.sqrt(d**2+e**2)>2:
                    window.set_at((a, b), colors[i-(int(i/len(colors))*len(colors))])
                    break
            for event in pygame.event.get():
                if event.type==pygame.QUIT:
                    pygame.quit()
                    sys.exit()
                if event.type==pygame.KEYDOWN:
                    if event.key==pygame.K_ESCAPE:
                        pygame.quit()
                        sys.exit()
        pygame.display.update()
    pygame.display.update()
graph([-3, 2, -2.5, 2.5, 0])#
scale=[-3, 2, -2.5, 2.5, 0]
scalea=scale[:]
while True:
    for event in pygame.event.get():
        if event.type==pygame.QUIT:
            pygame.quit()
            sys.exit()
        if event.type==pygame.KEYDOWN:
            if event.key==pygame.K_ESCAPE:
                pygame.quit()
                sys.exit()
            if event.key==pygame.K_r:
                graph([-3, 2, -2.5, 2.5, 0])
                scale=[-3, 2, -2.5, 2.5, 0]
                scalea=scale[:]
            if event.key==pygame.K_p:
                hq+=1
                graph(scale)
            if event.key==pygame.K_o:
                if not hq==1:
                    hq-=1
                    graph(scale)
            if event.key==pygame.K_SPACE:
                print(scale)
                print(scale[1]-scale[0])
        if event.type==pygame.MOUSEBUTTONDOWN:
            if not scalea[4]:
                scalea[0]=(((scale[1]-scale[0])*event.pos[0])/winrect.width)+scale[0]
                scalea[2]=(((scale[3]-scale[2])*event.pos[1])/winrect.height)+scale[2]
                scalea[4]=1
            else:
                scalea[1]=(((scale[1]-scale[0])*event.pos[0])/winrect.width)+scale[0]
                scalea[3]=(((scale[3]-scale[2])*event.pos[1])/winrect.height)+scale[2]
                scalea[4]=0
                if scalea[1]<scalea[0]:
                    scalea=[scalea[1], scalea[0], scalea[2], scalea[3], 0]
                if scalea[3]<scalea[2]:
                    scalea=[scalea[0], scalea[1], scalea[3], scalea[2], 0]
                scale=scalea[:]
                if scale[1]-scale[0]<scale[3]-scale[2]:
                    scale[1]+=((scalea[3]-scalea[2])-(scalea[1]-scalea[0]))/2
                    scale[0]-=((scalea[3]-scalea[2])-(scalea[1]-scalea[0]))/2
                else:
                    scale[2]-=((scalea[1]-scalea[0])-(scalea[3]-scalea[2]))/2
                    scale[3]+=((scalea[1]-scalea[0])-(scalea[3]-scalea[2]))/2
                graph(scale) 
```

当我在 python 3.2 中运行它时，它工作正常。图像如下所示：

![[IMG]http://i47.tinypic.com/2ps0d8n.jpg[/IMG]](https://i.stack.imgur.com/sg9IF.jpg)

然而，当我在 python 2.7 中运行它时，我得到了一个看起来像这样的可怕图像：

![[IMG]http://i47.tinypic.com/2a0nskk.jpg[/IMG]](https://i.stack.imgur.com/6ux3s.jpg)

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T14:27:52.903

是的，在文件顶部添加：

```
from __future__ import division 
```

Python 2在默认使用整数输入时使用*整数除法（地板除法）；*即使使用整数输入，Python 3 也切换到浮点除法。

请参阅[PEP 238](http://www.python.org/dev/peps/pep-0238/)，其中记录了更改：

> 当前除法 (/) 运算符对数值参数的含义不明确：如果参数是整数或长整数，它会返回除法数学结果的下限，但如果参数是浮点数或复数，它会返回除法结果的合理近似值. 当整数不是预期的但可能作为输入时，这使得预期浮点或复杂结果的表达式容易出错。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T14:27:44.607

`from __future__ import division`在顶部添加。

# glut - GLUT 鼠标点击检测

> ID：16085683
> 
> 赞同：1
> 
> 时间：2013-04-18T14:27:11.637
> 
> 标签：glut

我设计了一张图片并将其设置为窗口的背景。我想要的是图片的位充当按钮，例如，如果我使用桌面的屏幕截图作为窗口的背景图像，我想让开始按钮像按钮一样，我是否必须绘制定义鼠标点击具有特定动作的周边的区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T21:25:49.443

好吧，过剩只是为了绘图，而不是为了创建按钮或菜单。最好的解决方案是将您想要拥有按钮的区域保留在某个变量中，并测试鼠标单击是否在这些区域之一内。

矩形示例：

```
if(mouse_x>vertex_x[0] && mouse_x<vertex_x[1] && mouse_y>vertex_y[0] && mouse_y<vertex_y[1]) 
```

# javascript - 在 TABLE 中求和 TD

> ID：16085685
> 
> 赞同：0
> 
> 时间：2013-04-18T14:27:17.483
> 
> 标签：javascript, jquery, html

```
<table id="tab" border="1">
    <tr>
        <td>One</td><td>123</td><td></td><td>32</td>
    </tr>
    <tr>
        <td>Two</td><td>52</td><td></td><td>53</td>
    </tr>
    <tr>
        <td>Three</td><td>234</td><td></td><td>56</td>
    </tr>
</table>

$('#tab').click(function(){
   sum();
})

function sum(){
 //????
} 
```

从第二个和第四个 TD 求和列并为每个 TR 填写到第三个 TD 的最佳方法是什么？

直播：http : [//jsfiddle.net/bYf8C/](http://jsfiddle.net/bYf8C/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:32:59.330

```
function sum(){
    $("tr").each(function(){
        var sum = parseFloat($(this).find("td:eq(1)").text()) + 
                  parseFloat($(this).find("td:eq(3)").text());
        $(this).find("td:eq(2)").text(sum);
    })
} 
```

在这里，有一个小提琴：http: [//jsfiddle.net/bYf8C/10/](http://jsfiddle.net/bYf8C/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:30:56.950

演示：http: [//jsfiddle.net/bYf8C/2/](http://jsfiddle.net/bYf8C/2/)

```
$('#tab').click(function(){
   sum();
})

function sum(){
    $('#tab').find('tr').each(function(){
        var first = $(this).children('td:eq(1)').text(),
            second = $(this).children('td:eq(3)').text();

        $(this).children('td:eq(2)').html(function(){
          return parseInt(first) + parseInt(second);
        });
    });
} 
```

正如 Bojangles 在评论中建议的那样，`children()`比 快`find()`，而且`:eq`比`:nth-child`. 我的编辑反映了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:42:16.510

这里是：

```
$(function() {
  $('#tab').on('click', function sum() {
    $('tr', this).each(function(index, tr) {
      var td1, td3;
      td1 = parseInt(tr.children[1].textContent, 10);
      td3 = parseInt(tr.children[3].textContent, 10);
      tr.children[2].innerHTML = td1 + td3;
    });
  });
}); 
```

示例：http: [//jsbin.com/uvuzeq/1/edit](http://jsbin.com/uvuzeq/1/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:34:54.137

```
function sum(){
   $('#tab tr').each(function() {
      var number1 = parseInt($(this).find("td").eq(1).html()); 
      var number2 = parseInt($(this).find("td").eq(3).html());
      $(this).find("td").eq(2).html(number1 + number2)
   });
} 
```

小提琴：http: [//jsfiddle.net/bYf8C/11/](http://jsfiddle.net/bYf8C/11/)

# php - How do I Count Field Values from a Single Row?

> ID：16085696
> 
> 赞同：2
> 
> 时间：2013-04-18T14:27:47.503
> 
> 标签：php, mysql, mysqli

I'm new to PHP and MySQL and am struggling with this... I am collecting form data from a PHP insert page. It is a survey questionnaire. There are 20 questions, and all the answers will either be `A`, `B` and `C`. The table has an id column, and a column for each question (`Q1, Q2, Q3... Q20`). The data may look something like this;

```
+------+-----+
|  id  |  1  |
+------+-----+
|  Q1  |  A  |
|  Q2  |  B  |
|  Q3  |  A  |
|  .   |  .  |
|  .   |  .  |
|  .   |  .  |
|  Q20 |  C  |
+------+-----+ 
```

Now, what I am trying to do is to count how many values of `A`, `B` and `C` appear in a single row (with `id=1` for example).

I've found lots of ways of counting values in multiple columns, but so far have not found a way to count/group values in a single row.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:35:26.417

在 PHP 中，您可以将查询结果加载到一个数组中，然后用于`array_count_values`获取每个答案的计数：

```
$array = array();

while ($row = $result->fetch_assoc()) {
    $array[] = $row;
}

// print_r(array_count_values($array); 

foreach(array_count_values($array) as $key => $value)
{
     echo 'Answer ' . $key . ' was chosen ' . $value . ' times <br>';
} 
```

# [工作小提琴](http://phpfiddle.org/lite/code/1en-6ci)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:36:43.987

免责声明：根据记忆，因此可能不完全有效。

这个怎么样？

SELECT 1 AS 1, (SELECT COUNT(1) FROM Questions WHERE 1 = 'A') AS A, (SELECT COUNT(1) FROM Questions WHERE 1 = 'B') AS B, (SELECT COUNT(1) FROM Questions WHERE 1 = 'C') 作为 C

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:46:01.973

以下是使用 MySQL 查询的方法：

```
select id,
  sum(case when `1` = 'A' then 1 else 0 end) as CountA,
  sum(case when `1` = 'B' then 1 else 0 end) as CountB,
  sum(case when `1` = 'C' then 1 else 0 end) as CountC
from SurveyTable
group by id
order by id; 
```

这是一个测试数据有限的[SQL Fiddle](http://www.sqlfiddle.com/#!2/d48d1/1)。

* * *

**附录**。卡洛斯发布了一个更新的结构，导致以下答案。希望这些很接近:)

这将为您提供一排非常宽的总计：

```
select
  sum(case when Q1 = 'A' then 1 else 0 end) as Q1CountA,
  sum(case when Q1 = 'B' then 1 else 0 end) as Q1CountB,
  sum(case when Q1 = 'C' then 1 else 0 end) as Q1CountC,
  sum(case when Q2 = 'A' then 1 else 0 end) as Q2CountA,
  sum(case when Q2 = 'B' then 1 else 0 end) as Q2CountB,
  sum(case when Q2 = 'C' then 1 else 0 end) as Q2CountC,
  sum(case when Q3 = 'A' then 1 else 0 end) as Q3CountA,
  sum(case when Q3 = 'B' then 1 else 0 end) as Q3CountB,
  sum(case when Q3 = 'C' then 1 else 0 end) as Q3CountC,
  sum(case when Q4 = 'A' then 1 else 0 end) as Q4CountA,
  sum(case when Q4 = 'B' then 1 else 0 end) as Q4CountB,
  sum(case when Q4 = 'C' then 1 else 0 end) as Q4CountC,
  sum(case when Q5 = 'A' then 1 else 0 end) as Q5CountA,
  sum(case when Q5 = 'B' then 1 else 0 end) as Q5CountB,
  sum(case when Q5 = 'C' then 1 else 0 end) as Q5CountC
from SurveyTable; 
```

如果您想每个问题获得一行，请尝试以下操作：

```
select
  QuestionID,
  sum(case when Answer = 'A' then 1 else 0 end) as CountA,
  sum(case when Answer = 'B' then 1 else 0 end) as CountB,
  sum(case when Answer = 'C' then 1 else 0 end) as CountC
from (
    select 'Question1' as QuestionID, Q1 as Answer from surveytable
    union all select 'Question2', Q2 from surveytable
    union all select 'Question3', Q3 from surveytable
    union all select 'Question4', Q4 from surveytable
    union all select 'Question5', Q5 from surveytable) x
group by QuestionID 
```

[这里](http://www.sqlfiddle.com/#!2/649a1/2)有一个小提琴。

* * *

**另一个附录**： 需要的计数`ID`，并且因为`ID`每行有一个，所以不需要`SUM`.

这改变了方法。它首先将答案串在一起：

```
concat(q1,q2,q3,q4,q5) -- result for ID=1 in the test data: 'ABCAC' 
```

`A`...然后它会从字符串中吸取每一次出现：

```
replace(concat(q1,q2,q3,q4,q5), 'A', '') -- result for ID=1: 'BCC' 
```

...第一个字符串 ( `ABCAC`) 是长度`5`，第二个字符串 ( `BCC`) 是长度 3。长度的差异是`A`答案的数量：`2`。这差不多就是我能解释的了。现在进行查询：

```
select
  id,
  5 - length(replace(concat(q1,q2,q3,q4,q5), 'A', '')) AS CountA,
  5 - length(replace(concat(q1,q2,q3,q4,q5), 'B', '')) AS CountB,
  5 - length(replace(concat(q1,q2,q3,q4,q5), 'C', '')) AS CountC
from surveytable; 
```

更新的 Fiddle 在[这里](http://www.sqlfiddle.com/#!2/649a1/5)。

这仅提供原始数据。格式化会有点棘手，但应该不会太糟糕，特别是如果您使用前端语言进行格式化。如果您必须为此使用 MySQL，将上述内容放入子查询并在外部查询中应用格式可能会更容易：

```
select
  id,
  CONCAT('You have chosen ' ...and miles of formatting logic using CountA, etc)
from (
  select
    id,
    5 - length(replace(concat(q1,q2,q3,q4,q5), 'A', '')) AS CountA,
    5 - length(replace(concat(q1,q2,q3,q4,q5), 'B', '')) AS CountB,
    5 - length(replace(concat(q1,q2,q3,q4,q5), 'C', '')) AS CountC
  from surveytable) x 
```

# sparql - Sparql - 字母排序问题

> ID：16085699
> 
> 赞同：2
> 
> 时间：2013-04-18T14:27:54.860
> 
> 标签：sparql, allegrograph

我使用 AllegroGraph 和 Sparql 来查询结果。我正在尝试根据字母顺序进行排序，但 Sparql 更偏爱大写字母。以下是类似于我的问题的类似数据和查询。

数据：

```
<http://mydomain.com/person1> <http://mydomain.com/name> "John"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person1> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://mydomain.com/person>

<http://mydomain.com/person2> <http://mydomain.com/name> "Abraham"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person2> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://mydomain.com/person>    

<http://mydomain.com/person3> <http://mydomain.com/name> "edward"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>
<http://mydomain.com/person3> <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://mydomain.com/person> 
```

我正在尝试根据姓名的字母顺序进行排序 - 所以结果应该是亚伯拉罕、爱德华和约翰。但结果是亚伯拉罕、约翰和爱德华，因为爱德华从较小的情况开始。请让我知道如何实现这一目标。

询问：

```
select ?person ?name where
{
  ?person <http://mydomain.com/name> ?name.
  ?person <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://mydomain.com/person>.
  } order by asc(str(?name)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T20:55:29.013

SPARQL 1.1：`order by asc(UCASE(str(?name)))`

# angularjs - AngularJS：$HTTP.GET 被取消

> ID：16085700
> 
> 赞同：5
> 
> 时间：2013-04-18T14:27:57.437
> 
> 标签：angularjs, http-headers

我正在尝试使用 angularJS 的 $http 服务，但它似乎不起作用。我已经在网上阅读了有关此类问题的信息，但给出的解决方案无济于事。我的控制器中有以下内容：

```
app.controller('Ctrl', function($scope, $http){    
    var url = http://someurl?name=foo;
    $scope.submitRules = function(){
        $http({method: 'GET', url: url}).
              success(function(data, status) {
                $scope.status = status;
                $scope.data = data;
              }).
              error(function(data, status) {
                $scope.data = data || "Request failed";
                $scope.status = status;
              });
    };
}); 
```

我正在使用这个版本的 angularJS`<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular.min.js"></script>`

每当我尝试发送请求时，它都会显示请求状态已**取消**。我向其发送请求的 URL 运行良好，但它在 angularJS 中不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T17:20:36.803

我发现所有这些 CORS 的东西都令人困惑。但我能说什么呢？我是一个学习缓慢的人。您描述的问题可能可以通过控制器解决，但我认为最好在入口点进行设置。例如：

```
angular.module('myApp', ['ngResource', 'ui.bootstrap']).
    config(function($httpProvider) {

        // Enable CORS
        $httpProvider.defaults.useXDomain = true;
        delete $httpProvider.defaults.headers.common['X-Requested-With'];

        ...
  }); 
```

鉴于您提供的代码，这也可能有效（未经测试）：

```
app.controller('Ctrl', function($scope, $http, $httpProvider){    
    var url = http://someurl?name=foo;
    $scope.submitRules = function(){

        // Enable CORS
        $httpProvider.defaults.useXDomain = true;
        delete $httpProvider.defaults.headers.common['X-Requested-With'];

        $http({method: 'GET', url: url}).
              success(function(data, status) {
                $scope.status = status;
                $scope.data = data;
              }).
              error(function(data, status) {
                $scope.data = data || "Request failed";
                $scope.status = status;
              });
    };
}); 
```

无论哪种方式，所有的魔法都发生在这两行：

```
$httpProvider.defaults.useXDomain = true;
delete $httpProvider.defaults.headers.common['X-Requested-With']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T11:01:59.237

如果不是 CORS，您可以使用带有 CORS 扩展的铬检查，尝试设置您的请求超时：

```
app.controller('Ctrl', function($scope, $http){    
    var url = http://someurl?name=foo;
    $scope.submitRules = function(){
        $http({
            method: 'GET',
            url: url,
            timeout: 50000
        }).
        success(function(data, status) {
          $scope.status = status;
          $scope.data = data;
        }).
        error(function(data, status) {
          $scope.data = data || "Request failed";
          $scope.status = status;
        });
    };
}); 
```

设置 $httpProvider对我来说**从来没有**用过，而是服务器问题。

# python - Plotting flaws in Matplotlib

> ID：16085703
> 
> 赞同：1
> 
> 时间：2013-04-18T14:28:02.427
> 
> 标签：python, r, matplotlib, plot

Scatter plot using x,y coordinates proposes plots in Matplotlib that differ from those obtained using other programs. For example, here are the results of some PCA on the two fit score. The same graph using R and the same data provides different display…I also checked with Excell and Libreoffice : they provided the same display as R. Before Roaring against Matplotlib or report a bug, I would like to get other opinions and to check if I did things well. What are my flaws?

I checked that floats were not the problem, checked that coordinates order similarly,… So plot with R:

```
mydata = read.csv("C:/Users/Anon/Desktop/data.txt")  # read csv file
summary(mydata)
attach(mydata) 
plot(mydata) 
```

scatter plot made by R ![enter image description here](https://i.stack.imgur.com/tNOkt.png)

Same data plotted with Matplotlib:

```
import matplotlib.pyplot as mpl
import numpy as np
import os
# open the file with PCA results and convert it into float
file_data = os.getcwd() + "\\data.txt"
F = open(file_data, 'r')
DATA=F.readlines()
F.close()
for x in range(len(DATA)) :
    a = DATA[x]
    b = a.split(',')
    DATA[x] = b
for i in xrange(len(DATA)):
    for j in xrange(len(DATA[i])):
        DATA[i][j] = float(DATA[i][j])
print DATA[0]
X_train = np.mat(DATA)
print "X_train\n",X_train

mpl.scatter(X_train[:, 0], X_train[:, 1], c='white')
mpl.show() 
```

![scatter plot made by Matplotlib](https://i.stack.imgur.com/SmrAq.png) and results of printing X_train (so you can verify that data are the same) ![enter image description here](https://i.stack.imgur.com/9dZHj.png) With Excell: ![enter image description here](https://i.stack.imgur.com/XFCP2.png)

data: (I cannot put all the data, please tell me how to join the *.txt file ~40.5 Ko)

```
0.02753547770433    -0.037999362802379
0.05179194064903    0.0257492713593311
-0.0272928319004863 0.0065143681863637
0.0891355504379135  -0.00801696955147688
0.0946809371499167  -0.00502202338807476
-0.0445799941736001 -0.0435759273767196
-0.333617999778119  -0.204222004815357
-0.127212025425053  -0.110264460064754
-0.0243459270896855 -0.0622273166478512
0.0497080821876597  0.0272080474151131
-0.181221703468915  -0.134945934382777
-0.0699503258694739 -0.0835239795690277 
```

edit: So I yet exported PCA data (from scipy) into a text file and opened this common text file with python/matplotlib and R to avoid some prblms related to PCA. Plots were made after that handling (and the graph before PCA looks like a dome)

edit2: using numpy.loadtxt(), it displays as R but my custom method and numpy.loadtxt() provided the same data shape, size, type and values, so what's the mechanism involved?

```
X_train numpy.loadtxt()
[[ 0.02753548 -0.03799936]
 [ 0.05179194  0.02574927]
 [-0.02729283  0.00651437]
 ..., 
 [ 0.02670961 -0.00696177]
 [ 0.09011859 -0.00661216]
 [-0.04406559  0.09285291]] 
shape and size
(1039L, 2L) 2078

X_train custom-method
[[ 0.02753548 -0.03799936]
 [ 0.05179194  0.02574927]
 [-0.02729283  0.00651437]
 ..., 
 [ 0.02670961 -0.00696177]
 [ 0.09011859 -0.00661216]
 [-0.04406559  0.09285291]] 
shape and size
(1039L, 2L) 2078 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T19:00:15.020

问题是您表示`X_train`为矩阵而不是二维数组。这意味着当您使用 对其进行子集化时`X_train[:, 0]`，您不会得到一维数组 - 您会得到一个包含一列的矩阵（matplotlib 然后尝试分散）。您可以通过打印自己查看`X_train[:, 0]`。*

您只需更改行即可解决问题：

```
X_train = np.mat(DATA) 
```

至

```
X_train = np.array(DATA) 
```

* * *

*例如，根据您发布的数据，`X_train[:, 0]`是：

```
[[ 0.02753548]
 [ 0.05179194]
 [-0.02729283]
 [ 0.08913555]
 [ 0.09468094]
 [-0.04457999]
 [-0.333618  ]
 [-0.12721203]
 [-0.02434593]
 [ 0.04970808]
 [-0.1812217 ]
 [-0.06995033]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T18:16:29.907

在我看来，问题在于数组中读取的代码。你得到错误的维度。尝试使用 numpy.loadtxt 代替。[http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)

# jquery - Retrieving stock updates using Yahoo Finance

> ID：16085704
> 
> 赞同：2
> 
> 时间：2013-04-18T14:28:02.770
> 
> 标签：jquery, yahoo-finance, stockquotes

Basically what i am trying do is retrieving stock quotes for specific company . In my code I am giving symbol of specific company(**eg:FB**) in a **textbox(symb)** and when i click the **button(getupdate)** it should list out details regarding that specific stock which i enter the text box .

Here's my code :

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
<script>
$(document).ready(function($){
$('getupdate').click(function() {

        var symbol = $('input[id=symb]').val(); \\For Example:FB

        var url = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20WHERE%20symbol%3D'+symbol+'&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";

        $.getJSON(url, function(data) {
            var items = [];
            $.each(data.query.results.quote, function(key, val) {
                items.push('<li id="' + key + '">' + val + '</li>');

            });
            $('<ul/>', { 'class': 'my-new-list', html: items.join('')}).appendTo('body');
        });
});
});
</script>

</head>
<body>
<div style="padding:16px;">
    Stock Ticker : <input id="symb" type="textbox" value="Ticker"></input>
</div>
<button id="getupdate" name = "getupdate" type="button">Get Updates!</button>
</body>
</html> 
```

Where am i going wrong ?

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:51:57.713

您的 JS 代码中有几个错误：

1.  按钮的选择器不正确：`$('getupdate')`=> `$('#getupdate')`;
2.  价值内的错误引号`url`；
3.  Yahoo API 的查询字符串错误；
4.  错误的评论符号`\\For Example:FB`。

你的 JS 应该是这样的：

```
jQuery(document).ready(function($){
    $('#getupdate').click(function() {
            var symbol = $('input[id=symb]').val(); 
            var url = 'http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%3D%22' + symbol + '%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=';
            $.getJSON(url, function(data) {
                var items = [];
                $('#results').html('');
                $.each(data.query.results.quote, function(key, val) {
                    items.push('<li id="' + key + '">' + val + '</li>');

                });
                $('<ul/>', { 'class': 'my-new-list', html: items.join('')}).appendTo('#results');
            });
    });
}); 
```

`<button>`并且请在您的 HTML 中的标记之后添加此代码。这将帮助您在新查询之前轻松清除结果：

```
<div id="results"></div> 
```

这是一个例子：http: [//jsfiddle.net/6EFqk/1/](http://jsfiddle.net/6EFqk/1/)

我不确定输出格式是否正确，请根据需要重新格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:37:35.210

首先，您没有正确选择按钮。

```
$('#getupdate').click(function() { 
```

其次，你的斜线是向后的评论，它们总是向前而不是向后。

```
//For Example:FB 
```

最后，由于服务返回的这个原因，您没有得到任何结果：

> 当前表 'yahoo.finance.quotes' 已被阻止。它超出了时间或指令的分配配额

[http://jsfiddle.net/RVFW3/](http://jsfiddle.net/RVFW3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-05T11:57:34.860

我刚刚发现这个流在谷歌搜索这个主题。

也许这个网站会回答你的问题...... [http://bitbenderz.com/stockticker/](http://bitbenderz.com/stockticker/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T13:54:52.217

这是解决方案的一个版本：[jsfiddle](http://jsfiddle.net/marcmorgan/ZMLtJ/)

```
$.getJSON(yqlUrl1, function(data){
    $.each(data.query.results.row, function(index, item){

    var element = $('<div></div>');

    element.append('<span>' + item.symbol + '</span> ');
    element.append('<span>' + item.price + '</span> ');

    if (item.change.indexOf('+') > -1) {
        element.append('<span class="stockUp"> ' + item.change + '</span>');
    } else {
        element.append('<span class="stockDown"> ' + item.change + '</span>');
    }

    element.appendTo('#quotes');   
    });
}) 
```

# haskell - Haskell polymorphic calls without complete type knowledge

> ID：16085709
> 
> 赞同：9
> 
> 时间：2013-04-18T14:28:23.347
> 
> 标签：haskell, types, polymorphism

I'm studying Haskell since a little while, so I'm a newbie.

The following code is very easily understandable:

```
purStrLn $ show [1] 
```

Here we can infer all the types (with defaults), and all works well. But the following code works, too:

```
putStrLn $ show [] 
```

even if we can't infer the list type.

If I execute the code with ghci I obtain the following:

```
Prelude> []
[]
Prelude> :t it
it :: [a]
Prelude> 
```

so the type seems to be polymorphic. But in this case the show would be called with a partially applied type.

The same behavior is common with other types, for example with Data.Map.empty, so it isn't a list feature (or at least it seems like it).

Why and how it works?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T14:38:35.870

首先，这仅适用于`ghci`. 如果你尝试编译这个程序，`ghc`你会得到一个类型错误：

```
Test.hs:3:19:
    Ambiguous type variable `a0' in the constraint:
      (Show a0) arising from a use of `show'
    Probable fix: add a type signature that fixes these type variable(s)
    In the second argument of `($)', namely `show []'
    In the expression: putStrLn $ show []
    In an equation for `main': main = putStrLn $ show [] 
```

添加类型签名会使错误消失：

```
module Main where

main = putStrLn $ show ([]::[Int]) 
```

但是为什么它起作用了`ghci`？答案是默认的[扩展类型](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/interactive-evaluation.html#extended-default-rules)`ghci`：类型`a`默认为`()`（单位类型）。

这种行为的动机是用户在解释器中工作时总是指定类型有点烦人。正如 Vitus 在评论中指出的那样，运行`ghci`（`-Wall`或添加`:set -Wall`到您的`~/.ghci`）可以更容易地发现默认情况：

```
<interactive>:2:12:
    Warning: Defaulting the following constraint(s) to type `()'
               (Show a0) arising from a use of `show'
    In the second argument of `($)', namely `show []'
    In a stmt of an interactive GHCi command: it <- putStrLn $ show [] 
```

# android - 在黑莓中也可以与联系人同步 android 帐户吗？

> ID：16085713
> 
> 赞同：2
> 
> 时间：2013-04-18T14:28:29.237
> 
> 标签：android, blackberry, twitter, synchronization, account

我是黑莓开发的新手，我正在研究一个问题，但找不到任何东西。在android中，您的应用程序可以在帐户中看到，您可以将您的帐户与联系人同步（例如twitter）在黑莓4.6.1及更高版本中是否可以这样做？任何想法和来源都会很棒。谢谢。

# android - 如何保存来自 AT 命令的响应

> ID：16085714
> 
> 赞同：1
> 
> 时间：2013-04-18T14:28:31.773
> 
> 标签：android, at-command

我在 Android 的应用程序上工作。我寻找保存来自 AT 命令的响应。例如，当我执行此命令时：

```
 Runtime r = Runtime.getRuntime();
  Process process = r.exec(new String[] {"su", "-c", "echo -e 'AT\r' > /dev/smd0"}); 
```

我想保存响应

```
AT
OK 
```

我可以通过 adb 接口执行此命令来显示此响应：

```
 # cat /dev/smd0 
```

我在论坛上发现我应该编写此代码：

```
 Runtime r = Runtime.getRuntime();
                Process process = r.exec(new String[] {COMMAND TO EXECUTE });

                BufferedReader in = new BufferedReader(  
                                    new InputStreamReader(process.getInputStream()));  
                String line = null;  
                while ((line = in.readLine()) != null) {  

                    System.out.println(line);  
                }  
            } catch (IOException e) {  
                e.printStackTrace();  
            } 
```

例如，当我用“ls”替换 COMMAND TO EXECUTE 时，它工作正常。但是当我用“cat /dev/smd0”替换时，它会在 LogCat Invalide id 上显示给我：cat /dev/smd0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T21:13:48.650

好消息，我想我拥有您正在寻找的工具：[atinout](http://atinout.sourceforge.net/)。它将读取 AT 命令列表并将调制解调器的响应提供给标准输出（或文件）。例子：

```
$ echo AT | atinout - /dev/ttyACM0 -
AT
OK
$ 
```

甚至

```
$ atinout - /dev/ttyACM0 - <<EOF
> AT+CSCS="UTF-8"
> AT+CPBS="ME"
> AT+CPBW=,"0123456789",129,"B. Endian"
> AT+CPBW=,"8967452301",129,"L. Endian"
> EOF

OK

OK

OK

OK
$ 
```

输入的 AT 命令应该只是以“\n”结尾的普通文本行，在发送到调制解调器时，atinout 将负责以“\r”结尾的命令。

# php - 选择框使用 javascript 验证

> ID：16085718
> 
> 赞同：-3
> 
> 时间：2013-04-18T14:28:51.993
> 
> 标签：php, javascript

我试图要求用户通过使用 javascript 警报来验证他们的选择选项。如果用户点击继续，那么它将删除选择，如果他们点击取消，他们将返回页面。我已经完成了下拉菜单的 php 代码，因此它将使用数据库中的代码填充，然后用户可以选择要删除的值。我不知道 javascript 必须是什么才能要求验证。

到目前为止，我的 php 代码是：

```
<select>
<option selected name="offer">Click here to choose item</option>
<?
$sql = "SELECT * FROM items";
$res = $dbi->dbDo($sql);
while( $row = mysql_fetch_assoc($res) ) { 
print_r('<option>'.$row['name'].'</option>');
}
?>
</select>

<input type="submit" value="Delete" class="button-delete" onClick="submit()"></input> 
```

所以现在应该有一个叫做提交的javascript函数，但在他们提交之前必须进行确认。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:32:58.793

```
 function submit()
{
     var sel=document.getElementByName("offer").value;
     var r=confirm("do you really want to delete the selected option");
     var xmlhttp;
     if(r==true)
     {
         if(window.xmlHttpRequest)
         {
             xmlhttp=new xmlHttpRequest();
         }
         xmlhttp.onreadystatechange=function()
         {
            if(xmlhttp.readyState==4)
            {
                 alert(xmlhttp.responseText);
            }
         }
         xmlhttp.open("GET","hello.php?option="+sel,true);
         xmlhttp.send();
     }
} 
```

现在这里的文件 hello.php 将删除选定的选项

```
<?
$sql = "delete FROM items where itemvalue=".$_REQUEST["option"];
if($sql)
{
   echo("item deleted");
}
?> 
```

此 php 文件中的回显将显示为警报。

如果您喜欢，请单击它作为答案

# android - 我需要将地址列表从 asp.net 网络服务返回到 Android 应用程序

> ID：16085721
> 
> 赞同：0
> 
> 时间：2013-04-18T14:28:56.553
> 
> 标签：android, asp.net, vb.net, web-services, sql-server-2008

我正在使用 vb 在 asp.net 上创建一个 web 服务。该网络服务将从 SQL Server 2008 数据库中获取地址并返回到 Android 平台。到目前为止，我所拥有的只是获取数据库连接并打开它的代码。我怎样才能让它返回数据库中所有地址的列表？我该怎么做才能让 web 服务返回指定数据库中的所有条目？

```
Public Class Service1 Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function GetAddresses() As FuelStop()
        Dim sqlCon As New SqlConnection
        Dim resultList = New List(Of FuelStop)()
        Try
            sqlCon.ConnectionString = "Data Source=google.watersports.com;Initial Catalog=myDb;Persist Security Info=True;Connect Timeout=30;User ID=****;Password=******"
            Dim command As New SqlCommand("SELECT @Physical_Address_Street, @Physical_Address_Local, @Physical_Address_State, @Physical_Address_Zip, @Phone_Number FROM Gas_Stations WHERE Location_Type = 1")
            command.Parameters.Add("@Physical_Address_Street", SqlDbType.VarChar, 50).Value = "Physical_Address_Street"
            command.Parameters.Add("@Physical_Address_Local", SqlDbType.VarChar, 50).Value = "Physical_Address_Local"
            command.Parameters.Add("@Physical_Address_State", SqlDbType.VarChar, 50).Value = "Physical_Address_State"
            command.Parameters.Add("@Physical_Address_Zip", SqlDbType.VarChar, 50).Value = "Physical_Address_Zip"
            command.Parameters.Add("@Phone_Number", SqlDbType.VarChar, 50).Value = "Phone_Number"
            command.Connection = sqlCon
            sqlCon.Open() 
```

至于加油站课程，我所拥有的只是

```
Public Class FuelStop
    Property Physical_Address_Street As String
    Property Physical_Address_Local As String
    Property Physical_Address_State As String
    Property Physical_Address_Zip As String
    Property Phone_Number As String
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:23:39.883

嗯，我认为您将事情复杂化了试试这个：

```
Public Function GetAddresses() As FuelStop()
    Dim sqlCon As New SqlConnection
    Dim resultList = New List(Of FuelStop)()
    Try
        sqlCon.ConnectionString = "Data Source=google.watersports.com;Initial Catalog=myDb;Persist Security Info=True;Connect Timeout=30;User ID=****;Password=******"
        Dim command As New SqlCommand("SELECT Physical_Address_Street, Physical_Address_Local, Physical_Address_State, Physical_Address_Zip, Phone_Number FROM Gas_Stations WHERE Location_Type = 1")
        command.Connection = sqlCon
        sqlCon.Open() 
```

# git - 运行 repo 同步错误时：由于获取错误而退出同步

> ID：16085722
> 
> 赞同：28
> 
> 时间：2013-04-18T14:29:00.353
> 
> 标签：git, repository, repo

我正在尝试同步我的 jb 存储库，但我收到了这个奇怪的错误。有趣的是它并不总是在同一点崩溃（尽管它可能只是一个同步问题，因为我添加了 -j10）。

命令： `$ repo sync -j10`

错误： `error: Exited sync due to fetch errors`

我知道重新开始的可能性，但这有点烦人，我经常遇到这个问题。

谁能提出一个更快的解决方案？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-21T10:10:15.103

好的，感谢您的努力，我在[这里找到了类似的问题](http://forum.xda-developers.com/showthread.php?t=1358547)

概括：

调用`$ repo sync -f -j10`成功了。

看起来`-f`或`--force-broken`标志允许它从网络错误中恢复，更重要的是恢复损坏/丢失的对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-03T10:38:24.860

`repo sync -j1 -f --force-sync`

修复了我的 cm13.0 同步错误

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-13T06:46:10.583

有一个大多数人都知道的重大事实错误！人们认为，如果 repo 同步失败，他们必须重新从头下载。但这绝不是真的！在错误或手动终止后重新启动 repo sync 后，它只会继续从终止的位置同步，仅更新在 github 上更新的现有文件。以我的经验告诉你。

还有一个提示：在 repo 同步完成后，永远不要删除 .repo 文件夹。如果这样做，repo 工具将从头开始下载所有代码，而不是在之后运行 repo sync 时更新它们！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-04T07:43:58.340

我通过使用强制同步选项解决了它。

```
repo sync --force-sync 
```

请尝试相同的方法.....如果仍然出现错误，请尝试系统强制，即

```
repo sync --force-sync system/core 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-16T08:04:25.603

Delete the projects in which u r getting the errors, then sync that project again. It worked for me.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-08T12:49:42.223

删除，

```
rm -rf .git/rebase-apply
rm -rf .git/refs 
```

为我工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-26T10:35:57.240

我遇到过这个问题。我尝试了很多次，但没有奏效。即便如此，我有时也会添加 -f 参数。

最后，我删除了`.repo/projects/xxx`项目，再次 repo sync，它工作了。

# sql - 仅主键和主键约束有什么区别？

> ID：16085724
> 
> 赞同：8
> 
> 时间：2013-04-18T14:29:02.303
> 
> 标签：sql, constraints, primary-key

我对 SQL 很陌生，如果我的问题很愚蠢，请原谅我的无知。

仅主键和主键约束有什么区别？

**这**之间的区别

 **```
CREATE TABLE CUSTOMERS(
   ID   INT              NOT NULL,
   PRIMARY KEY (ID, NAME) 
```

和**这个**

```
CREATE TABLE CUSTOMERS(
   ID   INT              NOT NULL,
  CONSTRAINT [Pk_ID_Name] PRIMARY KEY (ID, NAME) 
```

谢谢你，破折号

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T14:32:54.420

在第二个版本中，您可以为约束命名，允许您使用名称删除它，而不必命名复合约束的每一列。

否则，他们会做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:33:11.430

好吧，在普通英语和一般英语中，我们也理解约束的一些含义，它是对某事的一种限制。因此，主键约束意味着将任何列作为主键施加的限制是什么。

浏览这些链接：[主键约束](http://www.google.co.in/search?q=primary%20key%20contsraing&sugexp=chrome,mod=3&sourceid=chrome&ie=UTF-8#q=primary%20key%20constraint&spell=1&sa=X&ei=zgNwUZXeEYbtrQe-3IDQCQ&ved=0CC4QvwUoAA&bav=on.2,or.r_qf.&bvm=bv.45368065,d.bmk&fp=cb7e50381dccf8de&biw=1366&bih=643)

和[主键](http://www.tutorialspoint.com/sql/sql-primary-key.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-09T19:41:54.293

主要区别在于，主键列只能在创建/添加表或列时创建，不能稍后创建。您可以在以后随时添加的主键约束。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T15:34:52.317

每个表只能有一个主键，但可以有多个约束**

# sharepoint - 是否可以从网页中打开客户端中的文件？

> ID：16085727
> 
> 赞同：0
> 
> 时间：2013-04-18T14:29:13.657
> 
> 标签：sharepoint, activex, client-side, silverlight-5.0

我知道，这是一个愚蠢的问题，但是，我的客户是愚蠢的两个。

我需要在 sharepoint 网页中提供一个链接以打开 Microsoft Outlook，并提供其他链接以打开 .exe 文件（SAP 客户端）。

有什么神奇的方法可以做到这一点吗？Silverlight、ActiveX、JS、Applet 等，欢迎提出任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:05:33.690

您可以通过以下两种方法之一使浏览器打开外部程序： 1\. 链接到设置为由外部程序处理的特殊 URL 2\. 链接到已注册为由外部程序打开的扩展名的 URL .

#1 最值得注意的例子是“mailto”协议。例如 mailto:someone@somewhere.com 将打开默认邮件程序，以编辑模式发送给收件人。另一个值得注意的例子是“itms”协议，它将打开 iTunes（尝试：itms://url.in.apple.com）。

您还可以使用已注册的示例指向资源。例如，以 *.torrent 结尾的 URL 将打开 uTorrent 或您机器上的任何 torrent 处理程序（例如：[http](http://releases.ubuntu.com/12.10/ubuntu-12.10-desktop-amd64.iso.torrent) ://releases.ubuntu.com/12.10/ubuntu-12.10-desktop-amd64.iso.torrent将从规范网站下载 Ubuntu）。

我对SAP不熟悉。如果 SAP 客户端有任何规范的文件扩展名 - 那么您可以在您的网站上获得资源。要打开 Outlook，您可以使用 mailto 协议。

在完全不同的路线上，您当然可以实现（然后......部署）一个 ActiveX，它可以做任何事情，包括创建您想要的任何进程。

# javascript - 如何将此模块模式转换为 require.js？

> ID：16085731
> 
> 赞同：0
> 
> 时间：2013-04-18T14:29:28.033
> 
> 标签：javascript, module, requirejs

我在我的 javascript 中创建了一个模块模式，所以我可以创建模块并随时使用它们。但我不知道如何将其转换为 Require.js。每个模块，即 Trades.toggleMenu、Trades.tabs 等，通常位于单独的文件中。但我只是将它们包括在这里以使故事简短。请帮忙：

JS：

```
(function (window, $) {

  var Trades = (function(Trades) {

    // All modules should be initialised here. For produdction, use a module dependency library, e.g. require.js
    Trades.main = function() {

        this.toggleMenu();
        this.validation.run($('#registration-form, #homeowner-login-form, #tradesmen-login-form'));
        this.tabs();

    };

    Trades.toggleMenu = function() {

    };

    Trades.tabs = function(el) {

    };

    Trades.vaildation = function(el) {
        return {

            run: function (formName) {
                //do something...
            }

        };
    };

    return Trades;

  }(Trades || {}));

  window.Trades = Trades;

  $(function() { Trades.main(); });

}(window, jQuery)); 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:59:32.677

您将有一个名为 Trades.js 的文件，它定义了“交易”模块：

```
define(["jquery"], function ($) {

    var Trades = (function(Trades) {
        ...
        return Trades;
    }(Trades || {}));

    return Trades;

}); 
```

您将按如下方式使用它：

```
require(["jquery", "Trades"], function ($, Trades) {

    $(function() {
        Trades.main();
    });

}); 
```

jQuery 可以通过使用 RequireJS/jQuery 组合文件 ( [http://requirejs.org/docs/jquery.html#get](http://requirejs.org/docs/jquery.html#get) ) 或通过在此答案中定义 jquery 的路径 ( [Require.JS shim config ) 配置为模块全球范围？](https://stackoverflow.com/questions/15765336/require-js-shim-config-global-scope/15766399#15766399)）。

# javascript - 在 Backbone.js 中设置自定义标头不起作用

> ID：16085733
> 
> 赞同：1
> 
> 时间：2013-04-18T14:29:32.947
> 
> 标签：javascript, backbone.js

我正在尝试以`backbone.js`一种方法在我的应用程序中设置自定义标头`save`。即使我可以在`fetch`方法中成功设置标题，也没有设置标题。

```
switch(method){
    case 'read' :
        model.fetch({
             headers:{
                 "Override-Authorization":'Basic ' + proxyAuth
             }
        });
        break;
    case 'create' || 'update' :
        sendAuthentication = function (xhr) {
            xhr.setRequestHeader('Override-Authorization','Basic ' + proxyAuth);
        };
        model.save({
            beforeSend:sendAuthentication,
            headers:{
                "Override-Authorization":'Basic ' + proxyAuth
            }
       });
       break;
    case 'delete' :
        model.delete({
            headers:{
                "Override-Authorization":'Basic ' + proxyAuth
            }
        });
        break;
    } 
```

在第一种情况下，通过`fetch`调用，标题被正确设置。在第二种情况下，使用该`save`方法，没有设置标题，即使我已经尝试过两种方式。有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T14:38:57.900

您可能想看看`Model#save`'s[文档](http://backbonejs.org/#Model-save)。

```
model.save([attributes], [options]) 
```

您实际上是在为模型设置一些属性，而不是覆盖标题。

```
model.save({}, {
  beforeSend:sendAuthentication,
  headers:{
    "Override-Authorization":'Basic ' + proxyAuth
  }
}); 
```

会成功的。

# java - 从 JTable 中的行生成标准差图

> ID：16085734
> 
> 赞同：1
> 
> 时间：2013-04-18T14:29:37.743
> 
> 标签：java, swing, jtable, jfreechart, standard-deviation

我正在尝试创建一个`JTable`可以单击一行的内容，它将显示标准偏差曲线。这是我`JTable`现在的样子。

![在此处输入图像描述](https://i.stack.imgur.com/9zZF8.png)

因此，例如，字符串的标准偏差`screen saver, action->login, login->disclaimer, ok`看起来像这样（我在 excel 中绘制它）

![在此处输入图像描述](https://i.stack.imgur.com/oMscP.png)

所以我的问题是#1 这可能吗，#2 如果可以，那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T01:11:04.343

[`ChartFactory.createHistogram()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartFactory.html#createHistogram%28java.lang.String,%20java.lang.String,%20java.lang.String,%20org.jfree.data.xy.IntervalXYDataset,%20org.jfree.chart.plot.PlotOrientation,%20boolean,%20boolean,%20boolean%29)有一个`IntervalXYDataset`这样的`HistogramDataset`可能是一个合适的选择。[在JWS 演示](http://www.jfree.org/jfreechart/samples.html)`HistogramDemo1`中的统计图表中看到的就是一个示例。您可以使用 确定单击了哪一行，如此[处](https://stackoverflow.com/a/12306104/230513)所示。您可以从using中检索所需的值，如此[处](https://stackoverflow.com/a/15731782/230513)所示。`ListSelectionListener``TableModel``getValueAt()`

# ios - 使用故事板导航一组复杂的视图，展开 segue 是不够的

> ID：16085735
> 
> 赞同：2
> 
> 时间：2013-04-18T14:29:41.977
> 
> 标签：ios, storyboard, uistoryboard, uistoryboardsegue

![在此处输入图像描述](https://i.stack.imgur.com/v2IKA.png)我有一个看起来像所附图像的故事板。

这个想法是有三个纵向视图，显示当前消耗，用户可以通过向左滑动来导航。为此，我正在使用向左滑动手势识别器。然后我添加右滑动手势识别器，然后连接到一个放松的 segue 以返回。这工作正常。

顺序是[电和气] -> [电] -> [气]。

每个纵向视图都有一个对应的横向详细视图。还设置了这些，以便用户可以通过滑动进行导航，我展开 segues 以便他们可以向后滑动。同样的顺序是 [both graph] -> [electricity graph] -> [gas graph]。

我还希望用户能够通过旋转设备从任何纵向视图移动到其相应的详细视图。我在每个纵向控制器中发现了旋转，并以编程方式执行 segue，就像这样（对于气体）。（请注意，代码对正确的方向还不够稳健，而我只是在试验。）

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)aToInterfaceOrientation duration:(NSTimeInterval)aDuration {

    [self performSegueWithIdentifier: @"SegueGasToLandscape" sender:self];
} 
```

因此，例如，用户可能会滑动两次以查看燃气画像页面，然后旋转设备以查看燃气消耗的详细图表。

从这里开始，我希望用户能够向右滑动以查看电力详细信息图表，然后再次向右滑动查看两者的图表 - 但这不会发生，因为这样做的方法是放松滑动那还没有发生。（事实上​​，景观电力视图控制器此时甚至还没有实例化。）

我认为我需要的不是使用展开转场，而是在整个过程中使用正常转场。但是，我想在不为现有控制器创建新实例的情况下执行此操作（就像展开转场一样），而是在需要时创建一个新的实例化（因为展开转场不需要）。

如果这很重要，我很乐意为 iOS 6.1 及更高版本编写代码。

有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T01:04:14.993

听起来您想使用 InstantiateViewControllerWithIdentifier：不要忘记设置接收视图控制器的 Storyboard ID。

```
if (!self.homeVC)
{
    self.homeVC = [self.storyboard instantiateViewControllerWithIdentifier:@"homeView"];
    [self presentViewController:self.homeVC animated:YES completion:nil];
} 
```

# sql - 如何在sql中获得'sum'小于一个值

> ID：16085736
> 
> 赞同：2
> 
> 时间：2013-04-18T14:29:42.237
> 
> 标签：sql, sql-server, sum

测试语句：</p>

```
create table #t
(
  isid int primary key identity(1,1),
  amount decimal(18,2)
)
go

insert into #t values(23.43)
insert into #t values(213.43)
insert into #t values(523.3)
insert into #t values(23.4)
insert into #t values(263.23)
insert into #t values(223.43)

drop table #t 
```

如何通过 isid 获得小于一个值（例如 500）的“总和”？有一个说法

```
select * from #t as a where exists(select 1 from #t where isid<=a.isid having sum(amount)<500) 
```

但它有一个错误。当第一个值大于 500 且第二个值为负数时。

前任：

```
insert into #t values(503.43)
insert into #t values(-13.43) 
```

结果将只有一个值（-13.43）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:38:44.947

为了实现这一点，我认为我们可以为集合中的所有值生成运行总计，并选择总和小于 500 的最大“isid”。

```
 create table T
    (
      isid int primary key identity(1,1),
      amount decimal(18,2)
    )
    go

    insert into T values(503.43)
    insert into T values(-13.43)
    insert into T values(5.00)
    insert into T values(1.00)
    insert into T values(55.00)

SELECT isid
FROM T
WHERE isid <= 
(
  SELECT MAX(B.isid)
  FROM
    (
      SELECT
      T1.isid,
      T1.Amount,
      SUM(T2.Amount) AS SummedAmount
      FROM T T1
      INNER JOIN T T2 ON T2.isid <= T1.isid
      GROUP BY T1.isid, T1.Amount
      HAVING SUM(T2.Amount) < 500
    ) B
) 
```

这是一个 SQLFiddle： [http ://www.sqlfiddle.com/#!3/968af/4](http://www.sqlfiddle.com/#!3/968af/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:09:35.443

@Lamak 如果在您的第​​一个测试数据中插入 -800 作为最后一行会发生什么？ ![结果图片](https://i.stack.imgur.com/i8ZX2.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:01:00.970

这是一种获取最大累积总和小于 500 的 isid 的方法，假设 isid 是按顺序编号的，没有间隙：

```
select minisid - 1
from (select MIN(isid) as minisid
      from (select *, (select SUM(amount) from #t t2 where t2.isid <= t.isid) as cumsum
            from #t t
           ) t
      where cumsum >= 500
     ) t 
```

如果您想在第二种情况下不返回任何行，请添加子句：

```
where minisid > 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T17:04:23.880

如果您使用的是 SQL-Server 版本，则可以使用该**[`OVER ()`](http://msdn.microsoft.com/en-us/library/ddcef3a6-0341-43e0-ae73-630484b7b398)**子句的增强：

```
WITH cte AS
( SELECT
      isid,
      SUM(Amount) OVER (ORDER BY isid
                        ROWS BETWEEN UNBOUNDED PRECEDING
                                 AND CURRENT ROW
                       ) AS sum_amount
  FROM t
)
SELECT MAX(isid)
FROM cte
WHERE sum_amount < 500 ; 
```

# android - 如何禁用外部触摸以隐藏 DialogPreference

> ID：16085740
> 
> 赞同：2
> 
> 时间：2013-04-18T14:30:03.617
> 
> 标签：android, dialog-preference

我正在开发一个自定义 DialogPreference。

当用户在对话框外单击时，它会被取消，我需要避免这种情况。

我知道 Dialog 有`setCanceledOnTouchOutside(boolean cancel)`我需要的方法，但 DialogPreference 没有。

在`onBindDialogView`我尝试：

```
getDialog().setCanceledOnTouchOutside(true); 
```

但`getDialog()`返回`null`。

我能怎么做？有人能帮我吗？

这是我的课：

```
public class UpdatePreference extends DialogPreference implements View.OnClickListener{

    public UpdatePreference(Context context, AttributeSet attrs) {
        super(context, attrs);
        setPersistent(false);
        setDialogLayoutResource(R.layout.update_dialog_layout);
        setPositiveButtonText("");
        setNegativeButtonText("");
    }

    @Override
    protected void onBindDialogView(View view) {
        super.onBindDialogView(view);   
        //init my components
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:51:00.697

您可以`AlerDialog.Builder`在显示对话框之前访问。在那里你可以指定`builder.setCancelable(false)`. 可能通过这种方式，您可以实现欲望行为。

```
@Override
protected void onPrepareDialogBuilder(Builder builder) {
    super.onPrepareDialogBuilder(builder);
    builder.setCancelable(false);
} 
```

# php - Where 子句中的数组

> ID：16085744
> 
> 赞同：0
> 
> 时间：2013-04-18T14:30:14.857
> 
> 标签：php, mysql, arrays, where

如何将数组插入 where 子句？这是获取 ID 的第一个查询：

```
$query = "SELECT id FROM #_categories WHERE alias = 'agenda'";
$result = mysql_query($query) or die(mysql_error());
   while($linha = mysql_fetch_array($result)){
   $vNome = $linha['id']; 
} 
```

现在第二个查询得到最终结果：

```
$query = "SELECT introtext FROM $tabela WHERE catid IN ($vNome) <> ''"; 
```

结果是：

```
SELECT introtext FROM #_content WHERE catid IN (36) <> '' 
```

为什么我不能将所有 ID 都放在子句 IN 中？

PS：抱歉英语不好，不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:35:09.563

您是否尝试过这样的嵌套选择语句：

```
SELECT introtext 
FROM $tabela 
WHERE catid 
IN (
    SELECT id 
    FROM #_categories 
    WHERE alias = 'agenda'
); 
```

可能有更有效的方法，但这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:35:28.623

将数组内爆为逗号分隔的字符串将使您有机会在`IN (...)`运算符中使用“1,2,3”字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:33:29.490

将循环更改为此

```
$vNome = array();
$i = 0;
while($linha = mysql_fetch_array($result)){
   $vNome[$i] = $linha['id']; 
   $i++;
} 
```

然后使用这个 $vNome 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:33:44.677

```
$vNome=array();
$result = mysql_query($query) or die(mysql_error());
  while($linha = mysql_fetch_array($result)){
  $vNome[] = $linha['id']; 
} 
```

然后是sql：

```
$query = "SELECT introtext FROM $tabela WHERE catid IN (".implode(",",$vNome).")"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T14:34:20.113

`IN`是一个 SQL 关键字。您不能将原始 PHP 数组传递给 SQL。

您必须先将数据读入数组，然后展开数组：

```
$query = "SELECT id FROM #_categories WHERE alias = 'agenda'";
$result = mysql_query($query) or die(mysql_error());
$vNome = array();
while($linha = mysql_fetch_array($result)) {
    $vNome[] = $linha['id']; // don't forget the [] to put it into an array, else the value will be scalar!
}
$query = "SELECT introtext FROM $tabela WHERE catid IN (".implode(",", $vNome).")"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T14:34:46.780

$vNome 不是一个数组。在您的 while 子句中，您只是覆盖了变量。在while之前，初始化变量

```
$vNome = array(); 
```

然后在一段时间内，将其更改为

```
$vNome[] = $linha['id']; 
```

现在，当涉及到第二个查询时，您不能只传入数组，您必须将其内爆。

```
$vNomeStr = implode (',',$vNome); 
```

然后，您可以在查询中使用 $vNomeStr。只要是数字，就可以正常工作，否则您还必须将每个项目封装在引号中。

# mysql - Sphinx中的时间戳增量索引

> ID：16085746
> 
> 赞同：0
> 
> 时间：2013-04-18T14:30:19.993
> 
> 标签：mysql, indexing, sphinx, delta-index

我正在尝试使用时间戳字段而不是文档中的示例中的 max_doc_id 来设置 main+delta 索引方案。

```
source main
{
    sql_query_pre   = \
    REPLACE INTO sph_counter (counter_id, last_update_time) VALUES (1, NOW())

sql_query       = \
    SELECT id, filename, absolute_path, last_update_time \
    FROM files \
    WHERE last_update_time <= ( SELECT last_update_time FROM sph_counter WHERE counter_id=1)
}

source delta
{
sql_query       = \
    SELECT id, filename, absolute_path, last_update_time \
    FROM files \
    WHERE last_update_time > ( SELECT last_update_time FROM sph_counter WHERE counter_id=1)

sql_query_pre   =
} 
```

索引和合并按预期工作，但是`sql_query_pre`源`main`永远不会更新表`last_update_time`中的`sph_counter`。

我不确定我的问题可能出在哪里。

我通过执行以下操作来运行它：

```
re-index the delta       (every 30 seconds) 
```

和：

```
merge delta into main    (every 10 mins)
re-index the delta       (after merge) 
```

我认为合并将运行`sql_query_pre`以更新`sph_counter` `last_update_time`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:05:43.970

> 我认为合并将运行 sql_query_pre 来更新 sph_counter last_update_time 我错了吗？

是的。在合并期间，Sphinx 不会对索引的“源”运行任何查询。除了获取索引文件的位置之外，它可能甚至没有从配置文件中读取信息。

最简单的方法是让增量索引也使用其 sql_query_pre 更新一个（单独的）计数器。

然后在合并之后，您可以将时间戳从增量记录复制到主记录。

# prolog - 确定旧的继承序言

> ID：16085748
> 
> 赞同：1
> 
> 时间：2013-04-18T14:30:21.057
> 
> 标签：prolog, family-tree

鉴于英国皇室，仅使用男性（X），女性（X）和父母（X，Y），其中X的父母是Y，如何创建继承线（X，Y），其中Y是继承人序言中的 X

我已经定义了所有的男性和女性以及父母

我也试过这个：

```
son(X,Y) :- parent(X,Y), male(Y).
daughter(X,Y) :- parent(X,Y), female(Y).
successor(X,Y):- (son(X,Z);daughter(X,Z)) , (Y=Z;successor(Z,Y)). 
```

显然它只在路易斯之后的安妮之前工作，它应该去安妮而不是彼得......

我已经根据他们在父母（X，Y）中的出生安排了事实。事实：

```
male(charles).
male(william).
male(peter).
male(henry).
male(andrew).
male(edward).
male(viscount).
male(savanna).

female(elizabeth).
female(anne).
female(zara).
female(beatrice).
female(eugenie).
female(louise).
female(isla).

parent(elizabeth,charles).
parent(elizabeth,anne).
parent(elizabeth,andrew).
parent(elizabeth,edward).

parent(anne,peter).
parent(anne,zara).
parent(charles,william).
parent(charles,henry).
parent(andrew,beatrice).
parent(andrew,eugenie).
parent(edward,louise).
parent(edward,viscount).
parent(peter,savanna).
parent(peter,isla). 
```

我在查询后继者（X，Y）时得到的结果。

```
X = elizabeth,
Y = charles ;
X = elizabeth,
Y = william ;
X = elizabeth,
Y = henry ;
X = elizabeth,
Y = andrew ;
X = elizabeth,
Y = beatrice ;
X = elizabeth,
Y = eugenie ;
X = elizabeth,
Y = edward ;
X = elizabeth,
Y = viscount ;
X = elizabeth,
Y = louise ; 
```

在此之后，当我尝试去安妮家时，它出错了。

```
X = anne,
Y = peter ;
X = anne,
Y = savanna ;
X = anne,
Y = isla ;
X = charles,
Y = william ;
X = charles,
Y = henry ;
X = edward,
Y = viscount ;
X = peter,
Y = savanna ;
X = elizabeth,
Y = anne ;
X = elizabeth,
Y = peter ;
X = elizabeth,
Y = savanna ;
X = elizabeth,
Y = isla ;
X = elizabeth,
Y = zara ;
X = anne,
Y = zara ;
X = andrew,
Y = beatrice ;
X = andrew,
Y = eugenie ;
X = edward,
Y = louise ;
X = peter,
Y = isla ; 
```

去我想要的安妮树时所需的输出是

```
 X = elizabeth,
    Y = anne;
    X = anne,
    Y = peter ;
    X = anne,
    Y = savanna ;
    X = anne,
    Y = isla ; 
```

我一直在尝试各种组合，这是迄今为止我得到的最接近的 X 是父母，而 Y 是父母（X，Y）中的孩子。

尝试过的后继组合：

```
successor(X,Y):- (son(X,Z);daughter(X,Z)) , (Y=Z;successor(Z,Y)). 
successor(X,Y):- parent(X,Z), (Y=Z ; successor(Z,Y)).
successor(X,Y):- (male(Z);female(Z)) , (Y=Z;successor(Z,Y)).
successor(X,Y):- (parent(X,Z),(male(Z);female(Z)), (Y=Z;successor(Z,Y)). 
```

他们都没有工作。

显示老继承人的实际结果是查尔斯家族，安德鲁家族，爱德华家族，最后是安妮家族。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:47:42.063

您的问题是您使用的条件比需要的更复杂，并且数据库不完整。

具体来说，查尔斯和彼得错过了性别，正如这段代码所示

```
?- forall(((parent(P,_) ; parent(P,_)), \+(male(P);female(P))), writeln(P)).
charles
charles
peter
peter
charles
charles
peter
peter
true. 
```

儿子和女儿取决于性别，并使您的条件失败。您可以更正您的数据库，或者坚持使用更简单的方法：

```
successor(X,Y) :- parent(X,Z), (Y=Z ; successor(Z,Y)). 
```

# css - 向带有png的div添加透视/孔效果？

> ID：16085749
> 
> 赞同：0
> 
> 时间：2013-04-18T14:30:25.293
> 
> 标签：css, html, png

当您单击`#video_background`或`#nav`div`#infowrap`淡入时。我想要但我发现几乎不可能保持与我现在完全相同的布局，`#infowrap`但在右下角通过 div 打一个“洞”，这样你就可以看到`#video_background`它洞。我已经考虑将 png 放在一个单独的 div 中，或者将 png 作为背景，但我无法让它工作。有任何想法吗？这是我的html：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="description" content=""/>
        <meta name="keywords"content=""/>
        <title></title>
        <link href="css/main.css" rel="stylesheet" type="text/css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    </head>

    <body>
<header>
            <div id="nav">
                <p><a id="btn" href="#">+</a></p>
            </div>
        </header>
        <div id="container">
            <div id="infowrap">
                <div class="mainwrap">

                    <div class="smallwrap">
                        <p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p>
                    </div>

                    <div class="smallwrap">
                        <p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p>
                    </div>

                    <div class="smallwrap">
                        <p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p>
                    </div>

                    <div class="smallwrap">
                        <p>Mustache art party pug whatever mixtape, pork belly sriracha gentrify swag. Try-hard selvage butcher high life, hashtag DIY ennui.</p>
                    </div>
                </div>
            </div>
        </div>
<video id="video_background" src="vid/147000037.mp4" autoplay loop>
<script>
                $('#video_background, #btn').on('click', function(){
                    $('#nav').toggleClass('rotate');
                });
        </script>

        <script>
        $(document).ready(function(){
          $("#video_background, #nav").click(function(){
            $("#infowrap").fadeToggle(250);
          });
        });
        </script>
    </body>

</html> 
```

我的CSS：

```
* {
    margin: 0;
    padding: 0;
}

body {
    width: 100%;
    height: 100%;
    margin: 0;
    font-family: "HelveticaNeue-UltraLight","HelveticaNeue-Light","Helvetica Neue",Helvetica,Arial,sans-serif;
}

header {
    z-index: 999;
    display: block;
    height: auto;
    width: 100%;
    position: fixed;
}

header a {
    text-decoration: none;
    font-size: 2.0em;
    color: #000000;
}

#nav {

    position: relative;
    float: right;
    top: 15px;
    right: 25px;
    color: #000000;
}

#video_background {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    z-index: -1000;
}

#container {
    height: 100%;
    width: 100%;
    display: block;
}

#infowrap {
    background: rgba(25,250,255,0.96);
    z-index: 900;
    display: none;
    position: fixed;
    top:10px;left:10px;right:10px;bottom:10px;
    vertical-align: center;
}

.mainwrap {
    width: 540px;
    height: 540px;
    margin: 50px auto 0 auto;
}

.smallwrap {
    width: 250px;
    height: 250px;
    margin: 10px;
    float: left;
    position: relative;
} 
```

# ruby - mysql2 MULTI_STATEMENTS 和错误报告

> ID：16085750
> 
> 赞同：1
> 
> 时间：2013-04-18T14:30:26.417
> 
> 标签：ruby, mysql2

我使用对客户端的一次调用提交多个数据库查询`mysql2`。客户端是使用`Mysql2::Client::MULTI_STATEMENTS`标志配置的。

如果其中一个查询有语法错误，我希望调用失败，但目前它成功，除非第一个语句中出现错误。

我的测试代码如下。有没有办法在仍然使用多语句查询（而不是单独发送每个查询）的同时实现这一点？

```
require 'mysql2/em'

def database
  @database ||= Mysql2::EM::Client.new(flags: Mysql2::Client::MULTI_STATEMENTS)
end

EM.run {
  database.query('select rand(1);bad syntax;').callback {|rs|
    rs.each {|r|
      p r
    }
    EM.stop
  }.errback {|e|
    p e
    EM.stop
  }
} 
```

# c# - 如何使用开放 XML 将超链接添加到 Word docx 中？

> ID：16085754
> 
> 赞同：8
> 
> 时间：2013-04-18T14:30:41.280
> 
> 标签：c#, sharepoint, openxml

我在将超链接添加到我的 word 文档时遇到问题。我不知道该怎么做。我想在我的 C# 代码中使用 open xml 在 word 文档中创建一个链接。是否有仅使用 href 或类似的其他解决方案？网上有一个来自 Open XML 的 HyperLink 类，但是如何使用它呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T14:47:18.600

试试这个

```
using (WordprocessingDocument doc = WordprocessingDocument.Open("", true))
{
    doc.MainDocumentPart.Document.Body.AppendChild(
        new Paragraph(
            new Hyperlink(new Run(new Text("Click here")))
            {
                 Anchor = "Description",
                 DocLocation = "location",
             }
        )
    );

    doc.MainDocumentPart.Document.Save();

} 
```

# ios - ios开发——理解xcode控制台输出

> ID：16085756
> 
> 赞同：-4
> 
> 时间：2013-04-18T14:30:46.953
> 
> 标签：ios, console

例如，当我记录字典时，我得到如下输出：

```
2013-04-18 16:24:45.905 pathFinderTest[9650:c07] -[__NSCFDictionary length]: unrecognized selector sent to instance 0x9271ee0
2013-04-18 16:24:45.912 pathFinderTest[9650:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFDictionary length]: unrecognized selector sent to instance 0x9271ee0'
*** First throw call stack:
(0x1c91012 0x10cee7e 0x1d1c4bd 0x1c80bbc 0x1c8094e 0x1c07c36 0x1c5113c 0x1cb64b6 0xb3c60a 0xb3c57c 0x2af7 0x28f8 0xf41c7 0xf4232 0x433d5 0x4376f 0x43905 0x4c917 0x25a5 0x10157 0x10747 0x1194b 0x22cb5 0x23beb 0x15698 0x1becdf9 0x1becad0 0x1c06bf5 0x1c06962 0x1c37bb6 0x1c36f44 0x1c36e1b 0x1117a 0x12ffc 0x22dd 0x2205)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

现在我知道错误在哪里以及在哪个文件中。但如果我没有呢？我习惯了java，它指向正确的文件和相应的行号。并不是说这总是问题所在，但通常这是一个好的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:16:01.100

如果您使用调试器运行应用程序，当您遇到异常时，Xcode 调试器将显示堆栈跟踪。这将指向您的应用程序中导致问题的确切文件和行。

如果这没有发生，那么在 Xcode 中执行以下操作：

*   查看 Xcode 左侧的断点面板
*   点击左下角的 + 按钮并选择“添加异常断点”
*   一个新的断点与一个对话框一起出现。接受默认值并点击完成
*   右键单击异常并选择“将断点移动到”并选择“用户”

现在调试您的应用程序并导致异常。现在，无论何时遇到异常，您都应该在调试器中获得有用的堆栈跟踪。

# transformation - geokettle shapefile 输入转换不是生成行号

> ID：16085758
> 
> 赞同：0
> 
> 时间：2013-04-18T14:30:48.227
> 
> 标签：transformation, shapefile, geokettle

有谁知道为什么在 GeoKettle 上，“Shapefile 文件输入步骤”没有生成行号？我该怎么做？使用“添加序列”步骤？

这一切都发生在转型上。

Tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:46:26.840

在对此内部进行了一些挖掘之后，我得出的结论是，这只是执行“Shapefile 文件输入”步骤的一个错误。我没有在生成相同行号的其他输入上找到这个...

GeoKettle 版本是这个答案的 2.5，反过来又基于 Pentaho Kettle 版本 3.2 ......

# android - Android PopupWindow 和 WRAP_CONTENT 不能一起工作

> ID：16085759
> 
> 赞同：21
> 
> 时间：2013-04-18T14:30:53.950
> 
> 标签：android, android-layout, layout, popupwindow

我打开一个这样的弹出窗口：

```
mInfoPopup = new PopupWindow(layout, 400, 600, true);
mInfoPopup.setWindowLayoutMode(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT); 
```

然后窗口会获得指定的确切大小 (400x600)，并且不会根据内容调整其大小。我需要更改哪些内容才能使弹出窗口真正环绕其内容？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-02T16:36:08.923

只需通过以下方式更改您创建它的方式：

```
PopupWindow popupMenu = new PopupWindow(layout, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, true); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-19T02:28:46.113

```
PopupWindow popupWin = new PopupWindow(mContext);
// WRAP_CONTENT works well for height, but not for width.
popupWin .setHeight(ViewGroup.LayoutParams.WRAP_CONTENT); 
// Measure layout here, then we can get measureHeight.
layout.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);
popupWin .setWidth(layout.getMeasuredWidth()); 
popupWin .setContentView(layout);
popupWin .showAsDropDown(anchorView,0 ,0, Gravity.NO_GRAVITY); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-18T10:22:20.510

我找到了一个适合我的解决方案（我正在使用 API 10），您可以使用它：

```
popupWindow.setWindowLayoutMode(
    ViewGroup.LayoutParams.WRAP_CONTENT,
    ViewGroup.LayoutParams.WRAP_CONTENT);
popupWindow.setHeight(1);
popupWindow.setWidth(1); 
```

如果您不设置高度/宽度或设置 0，它将不起作用。例子：

```
...
private Button button;

protected void onCreate(Bundle savedInstanceState) {
    ...
    attached_button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {                
            LayoutInflater layoutInflater = (LayoutInflater) getBaseContext()
                    .getSystemService(LAYOUT_INFLATER_SERVICE);
            View popupView = layoutInflater.inflate(R.layout.popup_layout, null);

            final PopupWindow popupWindow = new PopupWindow(getApplicationContext());
            popupWindow.setContentView(popupView);
            popupWindow.setWindowLayoutMode(
                    ViewGroup.LayoutParams.WRAP_CONTENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT);
            popupWindow.setHeight(1);
            popupWindow.setWidth(1);
            popupWindow.setFocusable(true);

            Button dismiss = (Button) popupView
                    .findViewById(R.id.dismiss);

            dismiss.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    popupWindow.dismiss();
                }
            });

            popupWindow.showAsDropDown(button);

        }
    }); 
```

我希望能帮助你。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-06T16:14:12.577

以下代码对我有用。

```
LayoutInflater layoutInflater = LayoutInflater.from(context);
View layout = layoutInflater.inflate(R.layout.popup_layout, null);
PopupWindow popup = new PopupWindow(context);
popup.setContentView(layout);
popup.setWidth(ListPopupWindow.WRAP_CONTENT);
popup.setHeight(ListPopupWindow.WRAP_CONTENT); 
```

在这里，`popup.setWidth(ListPopupWindow.WRAP_CONTENT) instead of popup.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT)`在我的案例中使用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-08T06:12:56.187

不要在布局中使用RelativeLayout，替换LinearLayout，也许它正在工作。

```
popview = LayoutInflater.from(context).inflate(R.layout.pop_citypicker, null);

popwindow = new PopupWindow(popview, ViewGroup.LayoutParams.MATCH_PARENT,
        ViewGroup.LayoutParams.WRAP_CONTENT); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-01T02:54:43.657

# 下面的代码可用于减少布局宽度和高度弹出窗口

我在那个自定义布局中使用了对齐的中心

```
 final PopupWindow popupWindow = new PopupWindow(getActivity());
            PopupMenu popup = new PopupMenu(getActivity(), v, Gravity.CENTER);
            LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View view = inflater.inflate(R.layout.popmenu1t1, null);
            l1 = (LinearLayout) view.findViewById(R.id.atoz);
            l2 = (LinearLayout) view.findViewById(R.id.ztoa);
            l3 = (LinearLayout) view.findViewById(R.id.phtol);
            l4 = (LinearLayout) view.findViewById(R.id.pltoh);
            l5 = (LinearLayout) view.findViewById(R.id.dhtol);
            l6 = (LinearLayout) view.findViewById(R.id.dltoh);
            l7 = (LinearLayout) view.findViewById(R.id.dotor);
            l8 = (LinearLayout) view.findViewById(R.id.drtoo);
            int width = 900;
            int height = 400;
            try {
                WindowManager wm = (WindowManager)view.getContext().getSystemService(Context.WINDOW_SERVICE);
                width = wm.getDefaultDisplay().getWidth();
                height = wm.getDefaultDisplay().getHeight();
            } catch (Exception e) {
                e.printStackTrace();
            }

            popupWindow.setWidth(width*3/6);
            popupWindow.setHeight(height*3/8);
            popupWindow.setFocusable(true);

            popupWindow.setContentView(view);
            popupWindow.setBackgroundDrawable(null);
            popupWindow.setOutsideTouchable(true);
            popupWindow.showAtLocation(view, Gravity.CENTER, 0, 0); 
```

## 这两行暂时没有使用 full

```
popupWindow.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
                 popupWindow.setHeight(WindowManager.LayoutParams.WRAP_CONTENT); 
```

## 快乐的编码朋友..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-08T22:42:39.810

```
 final PopupWindow newPartWindow = new PopupWindow(newPartIconView, 1, 1, false);
    newPartWindow.setWindowLayoutMode(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT); 
```

这对我有用，我们需要将宽度/高度初始化为 1 以使包装内容起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-31T14:14:46.970

我遇到了类似的问题，但即使在 new PopupWindow(...) 中设置大小也不起作用。

我有一个图像作为弹出窗口的背景，我解决了将它作为布局的背景（我正在使用新的 ConstraintLayout）和 android:background。该图像是一个 9-Patch 图像，因此它可以很好地调整大小。

# sql - 为 Access 中的所有 SQL 操作创建日志

> ID：16085766
> 
> 赞同：1
> 
> 时间：2013-04-18T14:31:20.487
> 
> 标签：sql, ms-access, vba

我目前在工作中遇到问题。有人在直接修改表。例如，在我的数据库中，我有像 ETS 这样的学校名称。好吧，今天它被命名为Polytechnique。

我试图通过他/她的 IP 地址或任何其他方式告诉谁进行了此修改。我目前不知道如何进行。

我想要的只是一个解决方案的开始，让我想出其中的一部分。遗憾的是，我暂时没有任何想法。

谢谢（对于任何错误，我很抱歉英语不是我的第一语言。我也可能被误认为是标签）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T14:57:43.910

（欢迎来到 SO。抱歉，还没有人回答你的问题。几乎从不会花这么长时间。）

简短的回答是：不。没有办法直接找出谁在修改您的表。Access 没有任何类型的自动更改日志记录，并且您不能在 VBA 中创建任何日志记录过程来监视对表的手动更改。

Access 作为前端的要求之一是您信任最终用户不会打开表并直接编辑数据。

为了防止将来发生这种情况，这里有一些选项：

1.  右键单击您的表格以隐藏它。但是，如果用户知道它在那里，则可以取消隐藏它。
2.  在您的 Access db 中有一个名为“显示导航选项”的选项。禁用此功能将隐藏侧边栏，因此用户无法看到表格。但是，按 F11 仍会再次显示它们。这可以很容易地用谷歌搜索，所以如果你的用户有动力，我不推荐它。
3.  将您的数据存储在 SQL 服务器中并使用连接字符串（不是直接链接）来检索和存储信息。
4.  通过 Sharepoint 分发您的 Access 数据库。用户将只能访问您指定的表单，而不能直接访问表。
5.  考虑使用另一个软件包来解决您的问题。

# sql - 在 SQL 查询中使用 SqlDataReader 的结果

> ID：16085767
> 
> 赞同：0
> 
> 时间：2013-04-18T14:31:22.390
> 
> 标签：sql, sql-server, vb.net

我想让我的读者的结果能够`WHERE`在另一个 SQL 命令的子句中使用。我试图将阅读器放入一个变量中使用，但它不起作用。我以前从未使用过阅读器，所以我不知道它们是如何工作的。谁能告诉我如何让读者的结果进入where语句？谢谢。

编码：

```
 Dim courseSelectCom = New SqlCommand("select stuff((select ','+course_name from course where school= '" & schoolSelect & "' for xml path ('')),  1, 1, '')", connection)

        Dim reader = courseSelectCom.ExecuteReader()
        If reader.Read() Then
            Dim courseVar As String
            courseVar = "%" & reader("course_name") & "%"

            Using totalStudentCom = New SqlCommand("SELECT COUNT(student_ID) FROM student " & "course_name like @course", connection)
                totalStudentCom.Parameters.AddWithValue("@course", courseVar)
                Dim result = totalStudentCom.ExecuteScalar()
                 MessageBox.Show("Students for course = " & result.ToString)
            End Using
        End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:37:55.010

这里有几个问题。
**首先**，您应该使用参数化查询而不是字符串连接来构建 sql 命令
**其次**，当打开 DataReader 时，连接对象无法提供另一个命令，除非您`MultipleActiveResultSets=True;`在连接字符串中指定了子字符串

```
Dim courseSelectCom = New SqlCommand("select course_name from course where school= @school", connection)
courseSelectCom.Parameters.AddWithValue("@school", schoolSelect)
Dim reader = courseSelectCom.ExecuteReader()
if reader.Read() then
    Dim courseVar As String
    courseVar = "%" & reader("course_name") & "%"

    Using totalStudentCom = new SqlCommand("SELECT COUNT(student_ID) FROM student " & _
                                "course_name like @course", connection)
        totalStudentCom.Parameters.AddWithValue("@course", courseVar)
        Dim result = totalStudentCom.ExecuteScalar()
        MessageBox.Show("Students for course = " & result.ToString)
    End Using
End If 
```

请记住，这仅在[启用 MARS时才有效](http://msdn.microsoft.com/en-us/library/h32h3abf.aspx)

# regex - while、数组和正则表达式的组合

> ID：16085768
> 
> 赞同：2
> 
> 时间：2013-04-18T14:31:23.123
> 
> 标签：regex, perl

循环失败。数组有什么问题？

我希望正则表达式`B`在解析第一个字符串和`M`解析第二个字符串时返回。

这样的正则表达式是如何构造的？

```
#!/usr/bin/perl

use warnings;
use strict;

my $a = "0.0 B/s";
my $b = "12.0 MiB/s";

while (defined (my $s = shift ("$a", "$b"))) {

    my $unit = $1 if ($a =~ m/.*([KMGT])i?B\/s$/);
    print "$unit\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:39:33.090

`shift`旨在用于数组，而不是列表。如果要使用`while`循环，则需要预先声明一个包含`$a`and的数组`$b`（顺便说一下，这对于变量名来说是一个不好的选择）。

话虽如此，`for`循环构造是这里更自然的选择：

```
for my $s ( $var1, $var2 ) { ... } 
```

鉴于您正在尝试提取测量单位，为什么不以稍微不同的方式做事：

```
say for map { my ( $s ) = /$regex/; $s } $var1, $var2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:38:09.743

1.  你的`while`有问题。
2.  当您`$a`想使用`$s`.

* * *

我会这样使用它：

```
#!/usr/bin/perl
use warnings;
use strict;
my $a = "0.0 B/s";
my $b = "12.0 MiB/s";
foreach my $s($a, $b) {
    print $1 if ($s =~ m/.*([KMGT])i?B\/s$/);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:43:05.517

你需要另一个替换：

```
for ($a, $b) {
  if (m!((?:[KMGT]i)?B)/s$!) {
    my $unit = $1; 
    $unit =~ s/(.).*/$1/;
    print "$unit\n" if $unit;
  }   
} 
```

# windows - “当前操作系统不支持 DPInst.exe”

> ID：16085769
> 
> 赞同：2
> 
> 时间：2013-04-18T14:31:29.763
> 
> 标签：windows, driver, dpinst

我有一个从 FTDI 安装 USB 串行驱动程序的安装程序。但是在某些计算机上（所有计算机都运行俄语 Windows XP，因此可能是某些语言问题）安装失败。我曾尝试使用干净的俄语 Windows XP Professional SP3 重复它，但它在那里工作，所以它不是一个明确的语言问题。

dpinst.log 文件说：

```
`信息：04/18/2013 14:05:34
信息：产品版本 2.1.0.0。
信息：版本：6.1.7601 Service Pack 1
信息：平台 ID：2（NT）
信息：服务包：1.0
信息：套件：0x0100，产品类型：1
信息：架构：X86。
信息：交互式 Windows 站
信息：命令行：'"D:\Something\DPInst32.exe"'
信息：DPInst 是多语言二进制文件。
信息：****************************************
信息：当前工作目录：'D:\Something\Drivers'
信息：在路径 'D:\Something\Drivers' 上运行
信息：未提供有效的“dpinst.xml”文件。
错误：当前操作系统不支持 DPInst.exe。
信息：返回代码 0x80000000`
```

我不使用 dpinst.xml 文件是正确的，但这不是必需的。或者？

在安装程序中，我使用开关运行 dpinst（32 或 64，取决于操作系统），`/c /q /sa /sw`但这可能无关紧要，因为双击 dpinst32.exe 也会出错。dpinst 版本是 2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T08:17:52.290

我在俄罗斯 Win7x64 上遇到了同样的问题（该软件包在英文 Win7x64 上运行良好）。

WDK 中有两个版本的 DPInst（redist\DIFx\DPInst 文件夹）：英语（EngMui 子文件夹）和多语言（MultiLin 子文件夹）。突然间，多语言版本似乎与本地化的 Windows 有问题。

我已经用英文替换了我原来的多语言 DPInst.exe，它解决了这个问题。英文版在俄语 Windows 上运行良好。

# ios - iOS：在地图上绘制不规则形状的多边形并知道用户是否踏入/踏出

> ID：16085771
> 
> 赞同：1
> 
> 时间：2013-04-18T14:31:37.613
> 
> 标签：ios, mkmapview

我主要在 MKMapView 上使用圆圈，并且我知道操作系统有一种方法可以判断用户是否进入或离开了圆形区域。

但是多边形呢？当用户进入或离开多边形区域（可能有十几个或更多边）时，操作系统可以告诉我吗？还是我必须自己计算？

我知道我没有提供任何代码，但在深入研究之前我想知道这是否可能。

# php - 自动递增字符串

> ID：16085772
> 
> 赞同：2
> 
> 时间：2013-04-18T14:31:40.597
> 
> 标签：php, auto-increment

我正在尝试建立一个分层的类别列表，如下所示：

```
1 Category
  1.1 Children
  1.2 Children
      1.2.1 Children 
```

这是我的代码：

```
$a = "1.1";
echo ++$a; // 2.1

$b = "1.1.1";
echo ++$b; // 1.1.2 
```

为什么`$a`增加到**2.1**而不是**1.2**之类的`$b`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:34:21.700

`"1.1"`解析为浮点值`1.1`，任何人都可以告诉你`1.1 + 1 = 2.1`

但是，`"1.1.1"`不能解析成数字，所以被当作字符串处理。PHP`++`以不同的方式支持字符串以使其有用，但这仅对字母（`A`通过`Z`，然后`AA`，`AB`...）真正成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:35:46.463

试试吧`$a = "1.1"; echo $a=$a+(1/10);`。

快乐编码:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:37:10.703

试试`$a = 1.1; echo $a + 0.1;` 我认为这就是你想要的

# c# - 防止同时调用 WCF 函数

> ID：16085775
> 
> 赞同：0
> 
> 时间：2013-04-18T14:31:57.967
> 
> 标签：c#, wcf, parallel-processing, locking, task

我有一个作为 Windows 服务运行的 WCF 服务。该服务引用一个包含类 X 的 DLL，该类具有公共方法 func1。func1 使用任务(TPL) 异步调用另一个方法 func2(private)。func2 独立执行长时间运行的任务。设置是：

## WCF

```
public string wcfFunc()
{
    X obj = new X();
    return obj.func1();
} 
```

## 动态链接库

```
public class X
    {
        static bool flag;
        public X()
        {
            flag = true;
        }   
        public string func1()
        {
            if (!flag)
                return "Already in action";

            Task t = null;
            t = Task.Factory.StartNew(() => func2(),TaskCreationOptions.LongRunning);    
            return "started";       
        }   
        void func2()
        {
            try
            {
                flag = false;
                //Does a long running database processing work through .Net code
            }
            catch (Exception)
            {
            }
            finally
            {
                flag = true;
            }
        }
} 
```

WCF 函数是从网站调用的。该网站由多个用户使用。不允许两次执行数据库处理func2。任何用户都可以触发它。但是在执行过程中，如果任何其他用户试图触发它，它应该表明处理已经在运行。我尝试使用静态变量“标志”来检查它，但它似乎不起作用。

有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:50:25.887

您可以阅读以下[文章](http://msdn.microsoft.com/en-us/library/ms731193.aspx)，为防止多次调用 WCF 服务方法，您首先需要确保除了设置并发模式之外，您的服务只能创建一个实例。

简而言之，对您的 ServiceBehavior 进行以下更改：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Single,  InstanceContextMode=InstanceContextMode.Single)]
public class YourService: IYourService
{...} 
```

**注意**：这将禁用服务公开的所有方法中的并发性，如果您不希望这样做，则必须将所需的方法移至单独的服务，然后按上述方式对其进行配置。

# excel - 仅当 Excel 中的 ID 相同时才插入新列

> ID：16085776
> 
> 赞同：0
> 
> 时间：2013-04-18T14:31:59.843
> 
> 标签：excel

我有 2 个具有类似表结构的工作表，如下所示：

```
|   ID   |   A   |   B   |   C   |
+--------+-------+-------+-------+
|   1    |   x   |   x   |   x   |
|   4    |   x   |   x   |   x   |
|   12   |   x   |   x   |   x   |
|   3    |   x   |   x   |   x   |
|        |
| ... (thousands of rows) 
```

其中 x 是值。是否可以创建一个新表（或工作表），仅在 Worksheet1 的 ID 相同的情况下组合两个工作表（类似于 SQL 查询），以便生成的表如下所示：

```
|   ID   |   A   |   B   |   C   |   D   |   E   |   F   |
+--------+-------+-------+-------+-------+-------+-------+
|   1    |   x   |   x   |   x   |   x   |   x   |   x   |
|   4    |   x   |   x   |   x   |   x   |   x   |   x   |
|   12   |   x   |   x   |   x   |   x   |   x   |   x   |
|   3    |   x   |   x   |   x   |   x   |   x   |   x   |
|        |
| etc... 
```

请注意，Worksheet1 的内容被添加到而不是从中减去。VBA 是必要的还是可以用公式来完成？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:31:35.530

你可以使用 vlookup 来解决这个问题。

vlookup 在 sheet2 中搜索 id 并在所选表的指定列号中返回相应的值。

# javascript - Javascript：如何使用第三方获取浏览器缩放级别

> ID：16085777
> 
> 赞同：2
> 
> 时间：2013-04-18T14:32:02.620
> 
> 标签：javascript, flash, browser

如何在所有已知浏览器中获取浏览器缩放级别？这是[如何在所有现代浏览器中检测页面缩放级别的新解决方法？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)

这个想法是使用 flash 或[HTML5 Canvas](http://www.w3schools.com/html/html5_canvas.asp)来找到解决方案。

目前找到了一种使用闪存的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:32:02.620

您需要使用 JavaScript 桥创建一个 flash 文件，如下所示：

```
[SWF(width='100',height='100')]
public class SizeHack extends Sprite
{
    public function SizeHack()
    {
        if(stage){
            onAddToStage();
        }
        else{
            addEventListener(Event.ADDED_TO_STAGE, onAddToStage);
        }
    }

    protected function onAddToStage(event:Event = null):void
    {
        removeEventListener(Event.ADDED_TO_STAGE, onAddToStage);

        // security settings to allow scripting between domains
        Security.allowDomain("*");
        Security.allowInsecureDomain("*");

        // register to javascript
        ExternalInterface.addCallback("getSize", onSizeRequet);

        // stage scale mode must be noscale
        stage.scaleMode = StageScaleMode.NO_SCALE;
    }

    private function onSizeRequet():Number
    {
        if(!stage){
            return 0;
        }
        return stage.stageHeight;
    }
} 
```

然后在你的 JavaScript 中：

```
<script type="text/javascript">
    swfobject.registerObject("FlashResizer", "10.0.0");

    function getBrowserZoom()
    {
        return swfobject.getObjectById("FlashResizer")
            .getSize();
    }
</script>

<div id="flashResizerDiv" style="position: absolute; display: block; height: 100px; width: 100%; top: 0; left: 0;">
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100" id="FlashResizer">
        <param name="movie" value="resizer.swf" />
        <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="resizer.swf" width="100%" height="100">
            <!--<![endif]-->
            <a href="http://www.adobe.com/go/getflashplayer">
                <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
            </a>
            <!--[if !IE]>-->
            </object>
        <!--<![endif]-->
    </object>
</div> 
```

现在，当您打电话时，`getBrowserZoom()`您将获得浏览器的精确缩放。

# macos - Delphi XE2 - 为 OSX 平台构建项目时未创建输出文件

> ID：16085785
> 
> 赞同：0
> 
> 时间：2013-04-18T14:32:16.283
> 
> 标签：macos, delphi, cross-platform, delphi-xe2

我有一些问题阻止 Delphi XE2 为 OSX 平台构建我的项目。我已经回到基础并创建了一个全新的“Hello World”控制台应用程序项目。该程序在 Win32 平台上编译/构建/运行良好。我将 OSX 添加为项目的新平台，并且我的远程配置文件配置正确，单击“测试连接”确认它可以看到我的 MacBook。问题是当我激活 OSX 平台，然后单击“构建”（在“调试”或“发布”下）然后进度窗口照常出现并且没有发生错误，但是没有创建输出文件并且没有创建“OSX32”子文件夹。

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:06:25.917

解决了它-不知道它是如何到达那里的，但是在工具->选项->环境变量中，我在“用户覆盖”下有一个条目，如下所示：

平台 = Win32

这意味着编译器只为 Win32 构建，无论当前激活哪个平台。

# java - 使用 FlowLayout 将 JPanel 添加到 JFrame

> ID：16085790
> 
> 赞同：0
> 
> 时间：2013-04-18T14:32:31.957
> 
> 标签：java, swing, jframe, jpanel, flowlayout

我试图使用 JPanel 的子类在屏幕上显示一个填充的椭圆，当我尝试使用 FlowLayout 将此子类的对象添加到 JFrame 时，椭圆没有正确显示我不知道问题是什么。请问你能帮帮我吗？

![在此处输入图像描述](https://i.stack.imgur.com/6EzPr.jpg)

这是我的代码

```
@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.BLACK);
    g.fillOval(0, 0, 50, 50);
} 
```

* * *

主要是

```
 JFrame frame = new JFrame("Ball");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300,300);
    frame.setVisible(true);
    frame.setLocationRelativeTo(null);
    frame.setLayout(new FlowLayout());
    BallPanel ball = new BallPane();
    frame.add(ball); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:33:27.663

当您创建任何自定义组件并进行自定义绘制时，您需要重写该`getPreferredSize()`方法以返回自定义组件的大小。理想情况下，您还将覆盖最小/最大尺寸。

然后布局管理器可以完成它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:35:03.353

请参阅的 Javadoc `FlowLayout`：

> 流布局让每个组件呈现其自然（首选）大小

由于您进行了一些自定义绘画，`BallPanel`因此无法计算其首选尺寸（基于您添加面板的组件）。因此，在`BallPanel`类中重写`getPreferredSize`返回正确尺寸的方法（正确意味着匹配您的自定义绘画）。考虑对`getMinimumSize`and做同样的事情`getMaximumSize`。

当我必须调试 Swing 布局问题时，我总是使用以特定颜色为组件添加边框。这样您就可以清楚地看到组件在其父容器中的大小，这可能是调试的一个很好的起点。在你的情况下，它会显示一个非常小的面板;-)

# android - 当用户搜索一个词时，搜索小部件会触发 ACTION_SEARCH 意图两次

> ID：16085791
> 
> 赞同：0
> 
> 时间：2013-04-18T14:32:40.163
> 
> 标签：android, search, android-intent

我按照 android[文档](http://developer.android.com/guide/topics/search/search-dialog.html)编写了一个带有搜索小部件的应用程序。

但我发现有两个`ACTION_SEARCH`意图被发送到`SearchActivity`. 所以，我怀疑那是我的错。
然后我尝试了**Google Play 应用程序**。我输入关键字搜索应用程序，我仍然捕捉到两个意图！这是日志猫。那么，应该如何处理呢？即使我用 singleTop Activity 覆盖 onNewIntent，它也需要搜索两次才能处理一次搜索操作！

> 04-18 22:26:19.007: I/ActivityManager(389): 从 pid 1721 04 开始 u0 {act=android.intent.action.SEARCH flg=0x10000000 cmp=com.android.vending/.AssetBrowserActivity (has extras)} -18 22:26:19.007：I/ActivityManager(389)：从 pid 1721 开始 u0 {act=android.intent.action.SEARCH flg=0x10000000 cmp=com.android.vending/.AssetBrowserActivity（有附加功能）}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-15T22:32:09.913

这是使用硬件键盘时模拟器中的错误。

[http://books.google.com/books?id=OFXJXbCXjTgC&pg=PT771&lpg=PT771&dq=android+search+intent+sent+twice+bug&source=bl&ots=Ora1AJjh4A&sig=9yFBjCwJ1ARbXePHzcPYpG_QdFQ&hl=en&sa=X&ei=bbddUpbZCcLi4AEioCIAwdUpbZCcLi4AEioCIAwedonepage= android%20search%20intent%20sent%20twice%20bug&f=false](http://books.google.com/books?id=OFXJXbCXjTgC&pg=PT771&lpg=PT771&dq=android+search+intent+sent+twice+bug&source=bl&ots=Ora1AJjh4A&sig=9yFBjCwJ1ARbXePHzcPYpG_QdFQ&hl=en&sa=X&ei=bbddUpbZCcLi4AOiioCIAw&ved=0CD8Q6AEwAw#v=onepage&q=android%20search%20intent%20sent%20twice%20bug&f=false)

您可以通过转到设置 -> 语言和输入并选择默认来禁用模拟器中的硬件键盘。

在模拟器中使用软键盘时，我只有一个意图。

# c# - ASP.NET 简单用户登录

> ID：16085795
> 
> 赞同：0
> 
> 时间：2013-04-18T14:32:53.350
> 
> 标签：c#, asp.net, vb.net, login

我正在使用一个简单的登录屏幕供用户在 asp.net 表单 c# 中登录屏幕。

我知道如何验证，以便用户拥有唯一的用户名等。我可以轻松地做到这一点。

我的问题是，一旦用户登录，我如何在不同页面之间验证用户。请记住，我没有使用内置的 asp.net Membership and Roles 表（有一些原因我不想使用它）。

我的想法是，一旦用户登录，只需设置一个会话变量并在需要访问权限的不同页面上检查它。如果我有一个有效的会话，那么我可以让用户查看该页面。

我可以做类似的事情：

```
 Session["ValidUser"] = "ValidUser"; 
```

我不确定的一件事是用户在登录后查看网站 10 小时。如何调整它以使会话不会超时。会话变量也是最好的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:40:04.060

会话是在 asp.net 中的页面之间持久化数据的标准方法。但是，您不会希望将会话保持 10 个小时左右。默认情况下，我相信它是 20 分钟。

您可以延长超时时间，但我建议您存储一个 cookie 或类似的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T14:42:56.357

是的，如果你不使用内置的 asp.net 成员，会话状态是最好的解决方案，而且它是最安全的，

您可以通过将其添加到您的 web.config 文件中将会话超时更改为十多个小时，其中超时以分钟为单位

```
<system.web>
 <sessionState mode="InProc" cookieless="false" timeout="600" />
</system.web> 
```

# php - 将文档重新添加到 Couchbase Server 2.0.1 失败

> ID：16085797
> 
> 赞同：1
> 
> 时间：2013-04-18T14:32:54.553
> 
> 标签：php, couchbase

我在运行 2.0.1 社区版 (build-170-rel) 的 Couchbase 集群上遇到了奇怪的行为。通过 PHP-lib 我执行以下代码：

```
$json = json_encode(array('hello' => 'world'));
$cb->add('test123',$json);
$cb->delete('test123');
$cb->add('test123',$json); 
```

该文档应该在服务器上，但查询不会返回任何结果，无论是通过 PHP 还是通过 Web 控制台。但令人惊讶的是，密钥确实不时出现在“TOP KEYS”部分下。

但是当我使用set命令而不是add时，执行上述代码后，文档就存在了。

你对正在发生的事情有什么想法吗？对我来说，似乎在删除文档时没有释放密钥。

有没有机会摆脱出现在“TOP KEYS”下的“孤立”键？非常感谢您的调查。

干杯，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:06:56.180

我已经在我的环境中进行了测试，没有任何问题（文档在控制台和代码中存储和访问）

您可以打印您正在执行的每个操作返回的值/代码吗？

# bash - 将多个变量回显到 dzen 条

> ID：16085800
> 
> 赞同：0
> 
> 时间：2013-04-18T14:32:59.973
> 
> 标签：bash, scripting

我有一个具有三个功能的 bash 脚本。每个都有一个输出，我通过管道传输到 dzen2。下面是脚本的伪代码版本。

```
printVol()
{
LEVEL=getVolume
VOL='Volume: '$LEVEL
echo $VOL
}

printBattery()
{
LEVEL=getBat
BAT='Battery: '$LEVEL
echo $BAT
}

printDate()
{
DTE=getDTE
echo $DTE
}

#this is the line I need to figure out
printVol | dzen2 -x 900 && printBat | dzen2 -w 150 && printDate | dzen2 
```

目标是将这些中的每一个打印到 dzen 栏。单独地，每个 dzen 调用都有效。如何同时将所有值发送到 dzen 栏？

编辑：我有三个不同的 dzen 调用，因为每个回声都需要专门定位在 dzen 条上。-x 和 -w 是定位标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:37:08.037

使用命令组：

```
{ printVol; printBat; printDate; } | dzen2 -x 900 -w 150 
```

我假设将所有选项聚合到一次调用中是有意义的`dzen`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:45:40.230

我不熟悉`dzen`- 我从您的示例中假设它从标准输入读取文本。所以在 bash 中，使用[进程替换](http://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution)

```
dzen2 -x 900 < <(printVol)  
dzen2 -w 150 < <(printBat) 
dzen2        < <(printDate) 
```

如果您需要将文本作为参数传递，则可以使用简单的命令替换：

```
dzen2 -x 900 "$(printVol)"  
dzen2 -w 150 "$(printBat)"  
dzen2        "$(printDate)" 
```

# javascript - 如果将大于0的数字插入框中，则javascript jquery检查复选框

> ID：16085801
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:00.330
> 
> 标签：javascript, jquery, input, checkbox, onchange

我有两个输入，文本和复选框：

```
<input type="text" id="09_1" name="09_1" class="rounded"/>
<input type="checkbox" checked id="h09_1" name="h09_1" class="rounded"/> 
```

文本框`09_1`由数据库查找的 jquery9result 更新为一个数字）我希望输入文本的更改触发一个检查复选框的 javascript 函数`h09_1`。

所以像：

```
 $("#09_1").on("change", function (event) {
            alert('test');

        }); 
```

此警报甚至不起作用，所以这是不正确的，但我在哪里。我显然希望它检查框而不是警告。

只有当数字大于 0 时才会选中复选框。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:58:39.390

我想你可能想要这个`keyup`活动

[http://jsfiddle.net/steelywing/zkBCx/2/](http://jsfiddle.net/steelywing/zkBCx/2/)

```
$('#09_1').on('keyup', function () {
    $('#h09_1').prop('checked', +$(this).val() > 0);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:03:17.663

如果您的代码没有触发，您可以尝试将“on”放在文档上，如下所示：

```
$(document).on("change", "#09_1", function (event) {

    if(!isNaN(this.value)){

           if(this.value > 0)
              $('#h09_1').attr('checked','checked');
           else 
              $('#h09_1').removeAttr('checked');

    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:40:37.033

查看这个[jsfiddle](http://jsfiddle.net/zkBCx/1/)它在​​输入更改时运行值检查。

```
 $('#09_1').change(function(){
        if($(this).val() > 0){
            $('#h09_1').attr('checked','checked');
        } else {
           $('#h09_1').removeAttr('checked');
        }
    }); 
```

# c# - 在 JsonConverter 中递归调用 JsonSerializer

> ID：16085805
> 
> 赞同：19
> 
> 时间：2013-04-18T14:33:12.570
> 
> 标签：c#, .net, json, serialization, json.net

我正在写一个`JsonConverter`来执行一些我需要在读/写时完成的转换任务。特别是，我采用了现有的序列化行为，并在写入/读取时添加了一些附加属性。

在 内部`JsonConverter`，我想利用传递的`JsonSerializer`实例来执行大部分转换功能。但是，当我这样做时，我最终会进入一个递归循环，其中序列化程序调用我的转换器，该转换器调用调用转换器的序列化程序等。

我见过人们做诸如 use 之类的事情`JsonConvert.SerializeObject`，从序列化器实例中传入所有转换器，*除了* `this`. 但是，这对我不起作用，因为它绕过了我在序列化程序上所做的所有其他自定义，例如自定义合同解析器和`DateTime`处理。

有没有办法我可以：

1.  使用传递给我的序列化程序实例，但以某种方式排除我的转换器，或者
2.  克隆传递给我的序列化程序（无需手动构建新序列化程序并逐个属性复制它）并删除我的转换器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-20T16:38:04.687

这是一个非常普遍的问题。使用“JsonConvert.SerializeObject”不是一个坏主意。但是，在某些情况下（通常是集合）可以使用的一个技巧是在写入时强制转换为接口，并在读取时反序列化为简单的派生。

下面是一个简单的转换器，它处理可能已经序列化为一组 KVP 而不是看起来像一个对象的字典（在这里显示我的年龄 :)）

注意“WriteJson”强制转换为 IDictionary<K,V>，“ReadJson”使用“DummyDictionary”。您最终得到了正确的结果，但使用了传递的序列化程序而不会导致递归。

```
/// <summary>
/// Converts a <see cref="KeyValuePair{TKey,TValue}"/> to and from JSON.
/// </summary>
public class DictionaryAsKVPConverter<TKey, TValue> : JsonConverter
{
    /// <summary>
    /// Determines whether this instance can convert the specified object type.
    /// </summary>
    /// <param name="objectType">Type of the object.</param>
    /// <returns>
    ///     <c>true</c> if this instance can convert the specified object type; otherwise, <c>false</c>.
    /// </returns>
    public override bool CanConvert(Type objectType)
    {
        if (!objectType.IsValueType && objectType.IsGenericType)
            return (objectType.GetGenericTypeDefinition() == typeof(Dictionary<,>));

        return false;
    }

    /// <summary>
    /// Writes the JSON representation of the object.
    /// </summary>
    /// <param name="writer">The <see cref="JsonWriter"/> to write to.</param>
    /// <param name="value">The value.</param>
    /// <param name="serializer">The calling serializer.</param>
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var dictionary = value as IDictionary<TKey, TValue>;
        serializer.Serialize(writer, dictionary);
    }

    /// <summary>
    /// Reads the JSON representation of the object.
    /// </summary>
    /// <param name="reader">The <see cref="JsonReader"/> to read from.</param>
    /// <param name="objectType">Type of the object.</param>
    /// <param name="existingValue">The existing value of object being read.</param>
    /// <param name="serializer">The calling serializer.</param>
    /// <returns>The object value.</returns>
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        Dictionary<TKey, TValue> dictionary;

        if (reader.TokenType == JsonToken.StartArray)
        {
            dictionary = new Dictionary<TKey, TValue>();
            reader.Read();
            while (reader.TokenType == JsonToken.StartObject)
            {
                var kvp = serializer.Deserialize<KeyValuePair<TKey, TValue>>(reader);
                dictionary[kvp.Key] = kvp.Value;
                reader.Read();
            }
        }
        else if (reader.TokenType == JsonToken.StartObject)
            // Use DummyDictionary to fool JsonSerializer into not using this converter recursively
            dictionary = serializer.Deserialize<DummyDictionary>(reader);
        else
            dictionary = new Dictionary<TKey, TValue>();

        return dictionary;
    }

    /// <summary>
    /// Dummy to fool JsonSerializer into not using this converter recursively
    /// </summary>
    private class DummyDictionary : Dictionary<TKey, TValue> { }
} 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2019-01-17T11:30:52.527

您确实可以使用传递给转换器的序列化程序实例，并排除当前转换器。但是，这不是线程安全的（请参阅此答案的评论）

```
public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
{
    serializer.Converters.Remove(this);
    serializer.Serialize(writer, value);
    serializer.Converters.Add(this);
} 
```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2016-04-27T21:38:36.013

对不起，但也许我很困惑。我使用这些方法来序列化我的对象：

```
using System;
using Newtonsoft.Json;

namespace Utilities
{
    public static class serializer
    {
        public static string SerializeObject(object objectModel) {
            return JsonConvert.SerializeObject(objectModel);
        }
        public static object DeserializeObject<T>(string jsonObject)
        {
            try
            {
                return JsonConvert.DeserializeObject<T>(jsonObject);
            }
            catch (Exception ex) { return null; }

        }
    }
}
```

我使用了这段代码：

```
userLoged = (modelUser)serializer.DeserializeObject<modelUser>((string)Session["userLoged"]);
```

希望这有用。

# dll - 在 WiX msi 基础安装程序中包含 dll

> ID：16085808
> 
> 赞同：3
> 
> 时间：2013-04-18T14:33:17.867
> 
> 标签：dll, wix, windows-installer, wix3.5, wix3.6

我目前正在 Visual Studio 2012 中制作 Outlook 插件，我为我的项目创建了一个安装程序，但为了让我的插件在我的客户端计算机上工作，我还需要添加 SharePoint Foundation ( [http://www.microsoft.com /en-us/download/details.aspx?id=21786](http://www.microsoft.com/en-us/download/details.aspx?id=21786) ) dll，但是当我尝试将它们从我的 C:\Windows\assembly 文件夹添加到 WiX msi 基础安装程序 Project\References - （通过右键单击并按添加参考），我收到以下错误“无法添加对 [文件路径] 的引用。请确保该文件是可访问的，并且它是有效的 WiX 参考。“你知道我能做什么吗？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:43:58.200

您需要将文件添加到 Product.wxs - 请参阅[http://wix.sourceforge.net/manual-wix3/wix_learning.htm](http://wix.sourceforge.net/manual-wix3/wix_learning.htm)。您只需通过引用添加 .wixlib 和其他项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:13:24.617

另一种方法是使用 WiX 3.7 Bootstrapper 项目。引导程序引擎通常称为“Burn”，因此您可能会在讨论中看到它。

引导程序项目允许您使用它们自己的安装程序来安装依赖项，例如您链接到的“SharePoint Foundation 2010 客户端对象模型可再发行组件”。引导程序的一个很好的例子是 WiX 3.7 安装程序本身，但大多数项目可以简单得多。

使用供应商提供的安装程序安装依赖项的优点是不必自己重新实现任何必要的逻辑，并允许它们由用户管理和升级。

# php - 我的代码只连接到 localhost mysql 服务器，但不连接到远程服务器

> ID：16085810
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:18.797
> 
> 标签：php, mysql

尝试连接到远程 Mysql 服务器时出现此错误：

`php_network_getaddresses: getaddrinfo failed: Hôte inconnu.`（翻译：）`Host unknown`。

**con.php：**

```
<?php 
  $db_host     = 'http://xxx.xxx.xxx.xxx';
  $db_username = 'xxx';
  $db_password = 'xxx';
  $db_name     = 'xxx';

  $con = mysql_connect($db_host,$db_username,$db_password);

  $select_db = mysql_select_db($db_name,$con);

?> 
```

连接到本地主机时一切正常，但对于远程连接它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:36:35.613

`$db_host = 'xxx.xxx.xxx.xxx';`反而

您不能为 Mysql 使用 HTTP 协议，因为它们都在不同的端口上运行/使用不同的协议。

更多 HTTP（Web 服务）= 80 Mysql（您的数据库）= 3306 只是要注意，正如 BenM 所提到的，这是默认端口。在大多数情况下，这不会改变。但是，您将其端口更改为任何其他端口（就像您可以使用任何其他服务一样）。

此外，请查看[PDO](http://php.net/manual/en/book.pdo.php)，因为 Mysql_ 函数将被弃用，并且在新系统和旧系统中使用也很危险。

看看我关于如何设置 PDO[的答案之一](https://stackoverflow.com/questions/16072212/learning-select-from-where-prepared-statements/16072437#16072437)

> > 编辑 1

正如您在评论中 benM 的回答中提到的那样，“无法建立连接，因为目标机器主动拒绝了它。”

所以现在如果您在数据库托管的实际服务器上具有 root 访问权限，那么您必须检查服务器是否（在我的例子中是 ubuntu 服务器）

运行这个命令：

```
sudo netstat -pan | grep mysql 
```

还看看这张图片：它几乎显示了 TCP 端口，如果它正在侦听或未列出（这里它正在侦听）

![在此处输入图像描述](https://i.stack.imgur.com/hwcOu.png)

再次假设您对实际的 linux / （无论服务器）具有 root 访问权限，我只精通 ubuntu，但也可以为您提供其他服务器信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T14:37:38.913

您无法使用 HTTP 协议连接到 MySQL（即由于端口冲突）。参数应该是 IP 字符串。删除`http`协议如下：

```
$db_host     = 'xxx.xxx.xxx.xxx';
$db_username = 'xxx';
$db_password = 'xxx';
$db_name     = 'xxx';

$con = mysql_connect($db_host, $db_username, $db_password);
$select_db = mysql_select_db($db_name, $con); 
```

您还应该注意，可以将 MySQL 配置为阻止除`localhost`对用户帐户的访问之外的任何内容。确保您使用的用户能够从任何域访问数据库。

最后，`mysql_*`函数系列现在已被弃用，您应该避免将它们用于新代码。相反，请查看[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

# blackberry - BlackBerry 上的电子邮件既不显示 HTML 也不显示文本版本

> ID：16085811
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:20.750
> 
> 标签：blackberry, html-email

有没有人遇到过 BlackBerry Bold（可能还有其他类似型号）不显示提供的 HTML 或电子邮件的文本版本的问题？

相反，它会显示自己的版本，如下所示：

```
[Sent by: "Name"]

[email@address.com]

<<image 1>>[Link:http://urlhere.com/img.gif]
Text from the email 
<<image 2>>[Link:http://urlhere.com/img.gif] 
```

*   是的，HTML 已启用
*   是的，它确实成功接收了其他 HTML 电子邮件

我正在处理的特定电子邮件，*遗憾的是无法共享所有代码*，是响应式的。一旦我删除了使其响应的代码片段，电子邮件就会正确显示。这是有问题的 CSS：http: [//jsfiddle.net/kjGg5/1/](http://jsfiddle.net/kjGg5/1/)

但是，我已经向这台完全相同的 BlackBerry 发送了其他响应式电子邮件，并且它们起作用了。

对缺少代码表示歉意，但即使其他人已经看到了这个问题，这也是一个开始。

此外，当电子邮件被转发时，它是空白的。我不知道这是否相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:17:01.523

因此，经过多次测试，如果 HTML 标头超过一定大小，黑莓似乎会窒息。我仍然不确定该大小是多少，但如果将来有人遇到此问题，请尝试缩小您的 HTML 标头大小。

更新：经过一些测试，似乎在 Blackberry 上正确呈现的最大 HTML 标头大小和电子邮件为 7.5kb。

# c# - 如何在“in”子句中使用实体框架中的参数？

> ID：16085812
> 
> 赞同：7
> 
> 时间：2013-04-18T14:33:21.613
> 
> 标签：c#, entity-framework, entity-framework-4, parameters

我正在使用 Entity Framework 4.0，我想使用以下查询：

为此，我执行以下操作：

```
strSQLQuery = "select * from MyTable where IDData IN (@IDs)";
lstParameters.Clear();
myParameter = new SqlParameter("@IDs", strIDs);
lstParameters.Add(myParameter);

myContext.MyTable.SqlQuery(strSQLQuery, lstParameters.ToArray<object>()).ToList<MyTable>(); 
```

但我得到一个例外，说它不可能转换`nvarchar`为`bigint`.

那是因为参数是类型字符串，而表中的ID是`bigint`。

我尝试创建一个长列表并添加一些 ID，但出现其他错误。

如何在查询中使用 ID 列表作为参数？

如果可能的话，我想使用参数。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T14:40:59.033

您的代码存在一些问题。

首先，要修复您的数据类型错误，您必须`strIDs`在执行其他任何操作之前转换为整数。这应该工作

```
var ids = strIDs.Select(s => long.Parse(s)); 
```

现在，既然您已经在使用实体框架，为什么不使用 Linq 而不是创建 SQL 查询呢？

```
var results =
    from r in myContext.MyTable
    where ids.Contains(r.IDData)
    select r; 
```

或流利的语法

```
var results = myContext.MyTable.Where(r => strIDs.Contains(r.IDData)); 
```

但是如果你真的要使用SQL，`IN`操作符是不支持这样的参数的。你必须这样写：

```
strSQLQuery = "select * from MyTable where IDData IN(@ID1, @ID2, @ID3, ...)"; 
```

因此，要做到这一点而无需太多努力，您可以`ids`像这样生成查询：

```
strSQLQuery = "select * from MyTable where IDData IN(" + String.Join(", ", ids.Select((s, i) => "@ID" + i)) + ")";
foreach(var parameter in ids.Select((s, i) => new SqlParameter("@ID" + i, s)))
{
    lstParametros.Add(parameter);
} 
```

# ruby-on-rails - 重置基本身份验证与

> ID：16085815
> 
> 赞同：1
> 
> 时间：2013-04-18T14:33:26.513
> 
> 标签：ruby-on-rails, authentication, login, logout

我正在尝试进行非常基本的身份验证。我已经尝试过使用 bcrypt-ruby 和用户身份验证在他的截屏视频中使用的一个 ryan bates。

对于一个非常小的项目，我想使用其他东西：

```
http_basic_authenticate_with :name => 'user', :password => 'secret' 
```

我有一个名为**$admin**的全局变量，并且我有一个将其值设置为**false**的方法（类似于注销）。

有没有办法重置此身份验证，以便用户（管理员）必须再次填写“登录凭据”？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:48:06.517

不幸的是，如果`basic_auth`用户在浏览器窗口关闭之前一直保持登录状态。如果用户使用 登录`basic_auth`，浏览器会存储认证信息，并在每次请求时通过 http 标头发送认证参数。

但是有一个小问题：使用 登录后`basic_auth`，当用户浏览您的应用程序并从一个链接转到另一个链接时（例如，从`http://appdomain.com/link1`到`http://appdomain.com/link2`他实际上是从`http://username:password@appdomain.com/link1`到`http://username:password@appdomain.com/link2`。浏览器隐藏了地址栏中的`username:password@`部分，所以您不知道。注销已通过 basic_auth 进行身份验证的用户的一种肮脏方法是创建一个链接或重定向到[http://invaliduser@appdomain.com/](http://invaliduser@appdomain.com/)浏览器不持有身份验证凭据... 编辑: 或作为替代重定向并将用户登录到无权限帐户，该帐户无法通过以下方式查看或在您的应用程序中执行任何操作`http://guest:password@appdomain.com`

希望它有所帮助。

# geometry - 如何更新three.js r58中的几何顶点位置？

> ID：16085817
> 
> 赞同：2
> 
> 时间：2013-04-18T14:33:29.053
> 
> 标签：geometry, three.js, updating, vertex

在 three.js 的 r56 版本中，这是有效的

```
geometry.verticesNeedUpdate = true 
```

在新的r58版本中它不是，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T19:58:38.227

[迁移文档](https://github.com/mrdoob/three.js/wiki/Migration#r56--r57)解释了版本之间的API 更改：

如果您使用的是*BufferGeometry*，`geometry.verticesNeedUpdate`则已更改为`geometry.attributes.index.needsUpdate`.

# visual-studio - Visual Studio 2012 安装程序 /norestart 被忽略

> ID：16085820
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:31.083
> 
> 标签：visual-studio, visual-studio-2012

我正在尝试对 VS 2012 进行完全无人值守的安装。它可以在某些 Windows 安装上不强制重启但在其他安装上不强制重启。这是我正在使用的命令行：

```
vs_professional.exe /adminfile AdminDeployment.xml /quiet /norestart 
```

我在启动 VS 2012 安装程序之前安装了 .NET 4.5。我对 AdminDeployment.xml 所做的唯一更改是：

```
<BundleCustomizations TargetDir="default" NoWeb="yes"/> 
```

我们有适用于 Windows 7 桌面的区域特定图像。安装程序可以在我们的北美映像上运行而不会强制重新启动，但是它会在安装 SQL CE 时强制重新启动而不提示我们的 EMEA 映像。以下是 SQL CE 日志中的一些消息：

> MSI (s) (E0:70) [18:32:09:942]：产品：Microsoft SQL Server Compact 4.0 SP1 x64 ENU。组件 '{3FA0170E-227C-37C7-BAC0-64691A992C81}' 的程序集 'Microsoft.VC90.CRT,version="9.0.30729.4148",publicKeyToken="1fc8b3b9a1e18e3b",processorArchitecture="amd64",type="win32"'正在使用中。您必须重新启动才能更新程序集。
> 
> MSI (s) (E0:70) [18:32:10:911]：产品：Microsoft SQL Server Compact 4.0 SP1 x64 ENU。组件 '{982245D9-F692-3224 -BEC0-C642D74C712F}' 正在使用中。您必须重新启动才能更新程序集。
> 
> MSI (s) (E0:70) [18:32:11:036]：产品：Microsoft SQL Server Compact 4.0 SP1 x64 ENU -- 安装操作成功完成。
> 
> MSI (s) (E0:70) [18:32:11:051]：Windows Installer 安装了产品。产品名称：Microsoft SQL Server Compact 4.0 SP1 x64 ENU。产品版本：4.0.8876.1。产品语言：1033。制造商：微软公司。安装成功或错误状态：0。
> 
> MSI (s) (E0:70) [18:32:11:067]：RebootAction 属性的值为 MSI (s) (E0:70) [18:32:11:067]：Windows 安装程序需要重新启动系统。产品名称：Microsoft SQL Server Compact 4.0 SP1 x64 ENU。产品版本：4.0.8876.1。产品语言：1033。制造商：微软公司。系统重启类型：1\. 重启原因：1.

在这种情况下，是什么导致 Windows 忽略该`/norestart`选项？我已经研究过尝试传递 msiexec 使用的一些参数，例如`REBOOT=ReallySuppress`[我发现这是一个有趣的选项]，但无济于事。

为什么 SQL CE 安装程序会忽略`/norestart`以及如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T20:49:39.520

答案（来自 Microsoft）是 SQL CE 安装程序中存在错误。解决方法是安装 SQL CE，然后安装 VS 2012 的其余部分。该缺陷将在 VS 的未来版本中修复。

以下是 SSCERuntime 的示例安装：

```
<installer path>\packages\SSCE40\SSCERuntime_x64-enu.exe /q /I REBOOT=R /l*v <log file> 
```

以下是MS的回复：

> 根据我们的日志分析，我们确定了导致重新启动的包：应用执行包：ssceruntime_x64_msi，操作：安装，路径：C:\ProgramData\Package Cache\E33F355F5E83D93099A732E2ECE02E07818B2696\packages\SSCE40\SSCERuntime_x64-enu.exe，参数：'"C :\ProgramData\Package Cache\E33F355F5E83D93099A732E2ECE02E07818B2696\packages\SSCE40\SSCERuntime_x64-enu.exe" /q /i /l*v 导致系统重启的错误如下： MSI (s) (E4:34) [ 10:16:48:964]：产品：Microsoft SQL Server Compact 4.0 SP1 x64 ENU。组件“{9DA4DC8A-9731-3F0E-8BD5-FC17CA6848AD}”的程序集“Microsoft.VC90.CRT,version="9.0.30729.4148",publicKeyToken="1fc8b3b9a1e18e3b",processorArchitecture="x86",type="win32"'正在使用中。您必须重新启动才能更新程序集。这是 VC++ 2008 dll，它显示另一个进程获取了这个 dll 的锁并且不允许更新它。我们发现这是 SSCERuntime 的一个错误，它没有使用 ExitCodes 编写来处理这种情况。我们的产品团队正在努力解决这个问题，并将考虑在 Visual Studio 的下一个版本中解决。目前，解决方法是先安装 ssceruntime.exe，然后在从 AdminDeployment.xml 文件中排除 SQLCE 组件后，使用命令“vs_professional.exe /adminfile AdminDeployment.xml /quiet /norestart”安装 VS2012。我们发现这是 SSCERuntime 的一个错误，它没有使用 ExitCodes 编写来处理这种情况。我们的产品团队正在努力解决这个问题，并将考虑在 Visual Studio 的下一个版本中解决。目前，解决方法是先安装 ssceruntime.exe，然后在从 AdminDeployment.xml 文件中排除 SQLCE 组件后，使用命令“vs_professional.exe /adminfile AdminDeployment.xml /quiet /norestart”安装 VS2012。我们发现这是 SSCERuntime 的一个错误，它没有使用 ExitCodes 编写来处理这种情况。我们的产品团队正在努力解决这个问题，并将考虑在 Visual Studio 的下一个版本中解决。目前，解决方法是先安装 ssceruntime.exe，然后在从 AdminDeployment.xml 文件中排除 SQLCE 组件后，使用命令“vs_professional.exe /adminfile AdminDeployment.xml /quiet /norestart”安装 VS2012。

# android - android，将 XML 布局视图添加到自定义类中的膨胀视图

> ID：16085821
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:32.663
> 
> 标签：android, xml, layout

我已经有一段时间没有在互联网上找到答案了，现在我问你是否可以帮助我。

简短：我应该如何覆盖 addView() （或其他东西）以将 XML 中定义的视图添加到我的“自定义视图膨胀 XML 布局”

Long：我想为我的 android 应用程序创建一个自定义视图，所以我从 RelativeLayout 创建了一个干净的子类。在此，我让 Inflater 加载一个 xml 布局以获得漂亮的样式。

但是现在，我想在自定义视图中添加一些东西，但不想以编程方式添加它（这很简单），而是使用 xml。我无法跨越脑海中的鸿沟来找到解决方案......

代码：自定义类：

```
public class Slider extends RelativeLayout {

    private RelativeLayout _innerLayout;

    public Slider(Context context) {
        super(context);
        init();
    }

    public Slider(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    protected void init() {
        LayoutInflater layoutInflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        _innerLayout = (RelativeLayout) layoutInflater.inflate(R.layout.layout_r, this);

    }

    @Override
    public void addView(View child) {
        //if (_innerLayout != null) _innerLayout.addView(child);
        super.addView(child);
    }

... all other addView's are overridden in the same way 
```

使用子类的 XML 文件：

```
<packagename....Slider
    android:id="@+id/slider1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/Red" >
        <TextView
            android:id="@+id/heading"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="HEADING" />

        <Button
            android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="bbb" />

... 
```

TextView 和 Button 被添加到子类中……当然……但是在那之后，我在 Slider、TextView、Button 和我的 R.layout.layout_r 中的膨胀布局中有 3 个孩子。但我只想要 1 个带有 Button 和 TextView 的孩子（layout_r）。

正如您在 addView 中看到的，我试图简单地将传递的“View child”添加到 _innerLayout。那行不通。Android 框架不断调用 addView 并以 StackOverFlowError 结束

还有两件事要告诉你：

1.  我知道从 XML 添加视图不会调用给定的 addView，但我也覆盖了所有其他视图，并且所有视图看起来都一样，因此无需显示它们。

2.  调试器告诉我，在 _innerLayout 获得膨胀的布局之前调用 addView

2.是什么原因？

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T09:05:46.917

您可以在此处查看如何将孩子充气到自定义视图[（vogella 教程）](http://www.vogella.com/tutorials/AndroidCustomViews/article.html#tutorial_compoundcontrols3)。

你需要的是：

1.  `<merge>`使用标签定义带有子元素的布局
2.  [使用LayoutInflater.inflate(res, this, true)](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate%28int,%20android.view.ViewGroup,%20boolean%29)在自定义视图构造函数中膨胀此布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T11:11:30.150

只需`addView()`在您的自定义视图中覆盖您的方法`Slider`并检查孩子的数量。如果`getChildCount() == 0`，那么这是第一次添加并且是视图初始化。

科特林示例：

```
override fun addView(child: View?, index: Int, params: ViewGroup.LayoutParams?) {
    if (childCount == 0) {
        super.addView(child, index, params)
    } else {
        // Do my own addition
    }
} 
```

# visual-studio-2010 - 从 Visual Studio 中查看 TFS 服务器端更改，无需获取最新版本

> ID：16085822
> 
> 赞同：3
> 
> 时间：2013-04-18T14:33:35.150
> 
> 标签：visual-studio-2010, tfs, azure-devops

在 Visual Studio 2010 中，我希望能够查看其他团队成员签入的更改，而无需实际执行最新获取（这将覆盖本地文件）。有没有办法对批量文件执行此操作，而不是选择每个文件并将其与服务器版本进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:09:03.727

我使用查看历史记录窗口，然后选择任何变更集并查看详细信息，您可以查看该变更集中包含的每个文件，然后选择与先前版本比较以查看特定更改。

![查看历史](https://i.stack.imgur.com/elTZy.png) ![变更集详细信息](https://i.stack.imgur.com/JAMLd.png) ![与上一个比较](https://i.stack.imgur.com/llRLO.png)

# vertex-buffer - VertexBuffer3d 或 ExternalInterface 太慢，如何优化？

> ID：16085832
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:45.917
> 
> 标签：vertex-buffer, stage3d

我在将 VertexBuffer 上传到上下文时发现了一些问题。

这个缓冲区的长度约为 200000 个项目，大约需要 +15 秒，显然玩家在将其上传到上下文时遇到了一些困难。

有没有人经历过这个？有什么解决办法吗？

我正在尝试分块上传矢量但没有成功（现在......）

**更新：**

**显然问题不在于上传，而在于其他地方。数据是从 javascript 创建的，因为它是自定义的 ThreeJS 后备。它适用于小场景，但对于较大的项目它会成倍地减慢。现在我也在调查 ExternalInterface 的通信速度。**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:05:51.787

使用 ByteArray 上传速度更快，顺便说一句，它从一个播放器到另一个播放器变化很大。ByteArray 和 Vector 之间有一个测试[http://jacksondunstan.com/articles/1617](http://jacksondunstan.com/articles/1617)用你的 GPU 试试这个。您也可以使用异步标志或从单独的线程执行此操作

# android - Android 应用内购买费用

> ID：16085833
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:47.177
> 
> 标签：android

我正在将应用内购买集成到我的应用程序中，但我有一些问题无法找到答案。

谁能告诉我谷歌通过使用谷歌支付流程在应用程序购买中销售数字内容的每笔交易收取的费用是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:39:43.623

标准收取 30% 的费用 :)[谷歌费用](https://support.google.com/googleplay/android-developer/answer/1153481?hl=en)具体如下：

> 在商家支持的位置，开发者可以使用应用内结算。应用内结算仅适用于通过 Google Play 分发的应用内销售的数字商品。Google Play 计划政策适用于应用内交易。标准 30% 的交易费用适用于 Google Play 上的应用内交易。

# c# - 处理 jQuery Ajax 方法引发的错误

> ID：16085834
> 
> 赞同：1
> 
> 时间：2013-04-18T14:33:52.800
> 
> 标签：c#, asp.net, web-services, jquery, burp

我有一个页面，我在其中使用 jQuery ajax 方法来调用一个简单的 Web 服务，该服务将从数据库中获取一些数据并将其绑定到页面中的一些控件。*在 select 的onchange*事件上调用 ajax 方法（这里的 HTTP 请求是 POST）。以下是jQuery ajax 方法

```
function CallAjax(url, jsonData, SucessFunction, FailurFunction) {
$.ajax({
    type: "POST",
    url: url,
    data: jsonData,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: SucessFunction,
    error: function(){
       alert('error occured');
    }
}); 
```

}

上述方法的 URL 是 somepage.aspx/getDataFromDatabse 其中 getDataFromDatabse 是 web 服务方法。我们的测试人员正在使用 burp 套件测试页面。当他们在浏览器中直接绑定访问 url(www.example.com/somepage.aspx/getDataFromDatabse) 时，burp 套件中显示的 HTTP 方法是 GET 并引发错误，用户被重定向到相应的页面. 但是当他们直接访问上面的 URL 并在 burp 套件中拦截请求并将 GET 请求更改为 POST 请求时，浏览器中会直接显示以下错误消息：

> {"Message":"处理请求时出错。","StackTrace":"","ExceptionType":""}

上面的 ajax 函数中的“错误”没有被执行，并且没有显示警告框，我们能够处理错误。如何处理此类错误并将用户重定向到自定义页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:53:49.957

看起来您的服务器的响应是有效的 JSon 响应，尽管它包含（对您而言）读取为错误的内容。因此，`$.ajax(...)`调用将响应视为成功，而不是错误。

您可以返回一个有效的 JSon 响应，并在该响应中指示是否存在错误，以及任何其他信息，例如用户友好的错误消息、重定向 URL 等。

调用的`error:`处理程序`$.ajax(...)`应该用于*真正的*服务器响应错误（即未处理的 500 错误、超时等）

例如，您成功的 JSON 响应可能类似于：

```
{
    success: true,
    errorMessage: null,
    errorRedirectUrl: null,
    data: { .... your successful data response .... }
} 
```

并且您失败的 JSON 响应（例如，由于验证问题，而不是服务器故障）将如下所示：

```
{
    success: false,
    errorMessage: 'There was an error processing the request.',
    errorRedirectUrl: 'http://....someurl...',
    data: null
} 
```

然后你检查调用`response.success == true`的`success:`选项`$.ajax(....)`，并适当地处理。

通过具有单一、一致的结构，该`success:`选项处理所有已完成的 ajax 请求，然后确定是否存在已*处理*的错误以及如何处理它，例如向用户显示警报、将它们重定向到 URL 等...

相反，该`error:`选项仅处理那些没有返回您可以使用的响应的 ajax 请求。

**更新：**

`GET`在您的服务器上，您已经在处理接收http 请求和http 请求之间的区别`POST`。所以，我认为你的问题是你还需要检测`POST`请求是否包含webservice方法需要的格式的有效数据。

因此，您的 Web 服务需要确定 http 请求中的 POST 数据是否采用它期望接收的格式，如果不是，则返回 HTTP 重定向响应 (302) 而不是返回错误。

你可以通过两种方式做到这一点：

1.  使用`Try... Catch...`块。您的 webservice 方法似乎已经抛出异常并返回它，因此捕获它然后不返回它，而是设置并返回 302 响应。

2.  如果对 web 服务的*真正*调用可以在正常操作下产生异常（这通常很糟糕！），您需要验证请求中接收到的数据，以查看它是否是 web 服务方法期望接收的（是否接收到数据？是ajax 请求发送的正确结构？等）

注意：如果请求*确实*包含有效数据，那么就没有简单的方法来检测这些数据是来自真实来源（ajax 调用）还是来自其他方式的伪造请求。有解决*方案*，但它们涉及并且可能需要多次调用以进行身份​​验证等。

# javascript - 自定义的javascript确认框

> ID：16085836
> 
> 赞同：0
> 
> 时间：2013-04-18T14:33:54.740
> 
> 标签：javascript, jquery, confirmation

![在此处输入图像描述](https://i.stack.imgur.com/vHwgF.jpg)我有自定义确认框....当我按下注销时，显示框...如果按下取消，框关闭，控件保持在同一页面...按下是时，必须进行注销。 ...对我来说，取消工作正常...但是当用户按下“是”时，没有响应...。谁能帮助我...提前谢谢...

我的代码：

```
<s:a href="logout" cssClass="planTabHeader" id="logoutId"> <img src="../../KY/images/common/header/lock.png" alt="logout" style="border: none;background-color: transparent;" /> &nbsp;Log out</s:a> 
```

javascript:

```
<script type = "text/javascript" > 
$(document).ready(function () {
    $($('#logoutId')).click(function (event) {

        var msg = "";
        var buttons = {};
        msg = "Are you sure you want to logout?";

        buttons["Yes"] = doLogout;

        buttons["Cancel"] = closeDialog;
        if (msg != "") {

            showDialog(buttons, "cancelConfirm", msg, "dialogNormal",
                "Confirmation", 470);

        }
        return false;
    });
});

function doLogout() {
    document.getElementById("logoutId").href = "logout";
}

function closeDialog() {
    /* alert("action is closeDialog"); */
    $("#cancelConfirm").dialog("close");
    $("#cancelConfirm").dialog("destroy");
} 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:43:38.280

扩展我上面的评论也许你的功能应该是

```
 function doLogout() {
window.location = "/logout"; // not sure on your url structure
  } 
```

# mysql - 使用 freeradius + mysql + apache 设置强制门户

> ID：16085842
> 
> 赞同：2
> 
> 时间：2013-04-18T14:34:10.560
> 
> 标签：mysql, apache, portal, freeradius

有人可以告诉我这种 wifi 强制门户设置的难度级别吗？

我在网络方面知识渊博，在 php/mysql 方面知识不多，但有足够的技能来设置我自己的网络服务器。和 4/10 的半径知识。

这是场景

1) 用户在连接后将被引导到一个强制门户页面`guest_ssid`

2) 将出现一个注册页面，用户将输入几个字段（例如电子邮件、姓名等）。

3）提交后将允许访问网络（仅3小时有效，带宽为512Kb）

我知道我需要 ff：

*   半径（计费和带宽限制）
*   用于网络服务器的 apache
*   mysql用于用户存储
*   pfsense 用于重定向到门户/墙花园

1）所以，我遵循了一个指南，在该指南中我设法使用 mysql 和 apache 安装了 freeradius。我有一张桌子，上面`radius`有这些桌子

半径表

*   辐射状
*   辐射检查
*   辐射组检查
*   辐射组回复
*   辐射邮报
*   回复
*   用户组

正如我在文件中所理解的那样，我应该将我的帐户放在`radcheck`表格中。

```
+----+----------+----------------+----+-------+
| id | username |   attribute    | op | value |
+----+----------+----------------+----+-------+
| 1  | john     | Cleartext-Pass | := | 12345 |
+----+----------+----------------+----+-------+ 
```

2）然后在我的 /var/www/html 里面`login.php` `login_success.php` `check_login.php`

Check_login.php

```
$host="localhost"; // Host name
$username="root"; // Mysql username
$password=""; // Mysql password
$db_name="radius"; // Database name
$tbl_name="radcheck"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$Cleartext-Pass")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB"); 
```

*！！这里的所有 php 代码都在使用我的其他数据库；它只包含一个表和用户和密码字段！*

我想我的问题是，如何让我的 php 登录在使用 mysql 作为用户存储的 freeradius 上工作？- 甚至不确定我是否在我的 php 中正确放置了语法/值

以及如何在 freeradius 中实施会话限制（3 小时）和带宽限制？

# javascript - 如何在彼此之上读取 2 个画布的像素？

> ID：16085848
> 
> 赞同：0
> 
> 时间：2013-04-18T14:34:21.677
> 
> 标签：javascript, html, canvas

我想获取一个区域的像素数据（如 getImageData()），其中 2 个画布位于彼此的顶部。顶部的画布具有透明度，因此您可以组合颜色。这有可能得到与眼睛一致的结果吗？还是有可能的解决方法？谢谢

# jquery - 使用主干渲染引导模式

> ID：16085852
> 
> 赞同：9
> 
> 时间：2013-04-18T14:34:29.617
> 
> 标签：jquery, backbone.js, twitter-bootstrap

我认为代码可以更好地解释我的问题：视图：

```
App.Views.ErrorModal = Backbone.View.extend({
  template: window.template('errorModal'),

  render: function(){
    this.$el.html(this.template(this.model.toJSON()));

    this.$("#errorApproveModal").modal({
        keyboard: true
    });

    return this;

  }

}); 
```

实例化时：

```
 var error = new App.Models.Errors({title: "Exporting Error", content: "Error"});
 var errorModal = new App.Views.ErrorModal({model: error});
 errorModal.render(); 
```

模态已加载，但我只得到一个空的 div

谢谢您的帮助！罗伊

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-31T22:51:36.830

最好创建一个单独的类来保存所有模态逻辑，然后从主视图中调用它。

尝试使用[这种方法](https://gist.github.com/andrewshatnyy/6126879)。

**模态JS**

```
var BaseModalView = Backbone.View.extend({

    id: 'base-modal',
    className: 'modal fade hide',
    template: 'modals/BaseModal',

    events: {
      'hidden': 'teardown'
    },

    initialize: function() {
      _.bindAll(this, 'show', 'teardown', 'render', 'renderView');
      this.render();
    },

    show: function() {
      this.$el.modal('show');
    },

    teardown: function() {
      this.$el.data('modal', null);
      this.remove();
    },

    render: function() {
      this.getTemplate(this.template, this.renderView);
      return this;
    },

    renderView: function(template) {
      this.$el.html(template());
      this.$el.modal({show:false}); // dont show modal on instantiation
    }
 }); 
```

**车把模板**

```
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h4 class="modal-title">Modal title</h4>
    </div>
    <div class="modal-body">
      ...
    </div>
    <div class="modal-footer">
      <a href="#" class="btn">Close</a>
      <a href="#" class="btn btn-primary">Save changes</a>
    </div>
  </div><!-- /.modal-content -->
</div><!-- /.modal-dialog --> 
```

**父视图** // 在按钮单击后触发

```
modalView = new BaseModalView();
modalView.show();

// Modal view automatically bound to the body and removes itself on hidden; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-25T17:57:34.457

## 一个简单的引导模式 -

我们可以扩展此视图以向其添加更多功能。我们也可以传递数据以查看 init。

### 查看文件

```
/**
 * ModalView
 * @version 0.0.1
 */
var ModalView = Backbone.View.extend({

  tpl: JST['modal-tpl'],
  className: 'modal-view',
  events: {
    'evt:show': 'show',
    'evt:hide': 'hide',
  },
  initialize: function(options) {
    this.options = options;
    _.bindAll(this, 'render', 'show', 'hide', 'remove');
    this.render();
  },
  render: function() {

    this.$el.html(this.tpl(this.options));
    this.$el.appendTo('body');
    this.$modal = this.$('.modal');

    this.$modal.on('hidden.bs.modal', _.bind(function() {
      this.close();
    }, this));

  },
  show: function() {
    this.$modal.modal('show');
  },
  hide: function() {
    this.$modal.modal('hide');
  },
  close: function() {
    //unbind events
    this.unbind();
    //Remove html from page
    this.remove();
  },

}); 
```

### 打开模态 -

```
//Pass modal data on init
var modal = new ModalView({
  modalContent: 'Hello User!'
});
modal.show();
//modal.trigger('evt:show'); 
```

### v3 的车把模板 -

```
<!-- Modal -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-label">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="modal-label">Modal</h4>
      </div>
      <div class="modal-body">
        {{{modalContent}}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div> 
```

*   在模态隐藏 - 我们必须删除模态 html，事件以避免多个实例。
*   Bootstrap 模态 HTML 应附加到正文 - 如果不是，您可能会遇到 z-index/backdrop 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:15:18.400

看起来您从未将其添加到页面中。

```
var errorModal = new App.Views.ErrorModal({model: error});
$('#my-div').html(errorModal.el);
errorModal.render(); 
```

我假设 bootstrap-modal 与大多数 jquery 插件一样，需要在调用之前将 html 放在页面上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-26T00:42:39.853

尝试从模态视图中删除淡入淡出和隐藏类。

# c# - 无法通过查询 LINQ 从 DDS 获取项目

> ID：16085855
> 
> 赞同：0
> 
> 时间：2013-04-18T14:34:39.300
> 
> 标签：c#, .net, episerver

我是 C# ASP.NET 的新手，我正在尝试从商店 (EPiServer) 获取商品。

视觉工作室说

> 无法解析符号 Where、OnderzoekId 和 ToList

我究竟做错了什么？我使用了这个[代码示例](http://tedgustaf.com/blog/2009/10/introduction-to-episerver-dynamic-data-store-dds/)：

```
[EPiServerDataStore(AutomaticallyCreateStore = true, AutomaticallyRemapStore = true)]
public class OnderzoekColumn
{
    private static int Counter = 0;
    public Identity Id { get; set; }
    public int ColumnId { get; set; }
    public int OnderzoekId { get; set; }
    public string ColumnName { get; set; }

    public OnderzoekColumn()
    {
        Initialize();
    }

    public OnderzoekColumn(int onderzoekId, string columnName)
    {
        Initialize();

        OnderzoekId = onderzoekId;
        ColumnName = columnName;
    }

    protected void Initialize()
    {
        Id = Identity.NewIdentity(Guid.NewGuid());
        ColumnId = System.Threading.Interlocked.Increment(ref Counter);
        OnderzoekId = 0;
        ColumnName = string.Empty;
    }

    public static List<OnderzoekColumn> GetOnderzoekColumns(int onderzoekId)
    {
        var store = typeof(OnderzoekColumn).GetStore();

        var columns = from c in store
                      where c.OnderzoekId == onderzoekId
                      select c;

        if (columns == null)
        {
            return new List<OnderzoekColumn>();
        }

        return columns.ToList<OnderzoekColumn>();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:26:33.097

linq 语句

```
var columns = from c in store
              where c.OnderzoekId == onderzoekId
              select c; 
```

正在尝试枚举集合，但 GetStore() 方法返回单个项目。尝试使用以下代码代替您的 GetOnderzoekColumns 方法（未经测试）

```
public static List<OnderzoekColumn> GetOnderzoekColumns(int onderzoekId)
{
  var store = typeof(OnderzoekColumn).GetStore();

  var columns = store.Items<OnderzoekColumn>().Where(c => c.OnderzoekId == onderzoekId);

  return columns.ToList();
} 
```

我将以下[扩展方法](http://world.episerver.com/Blogs/Jonas-Bergqvist/Dates/2011/2/Generic-Find-method-in-Dynamic-data-store/)添加到您的解决方案中，然后您可以使用强类型的 Find 方法，这将比上面更有效，它返回所有项目，然后使用 linq Where() 方法在内存中过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:17:42.900

我使用以下代码使其工作。我还删除了 AutomaticallyCreateStore 和 AutomaticallyRemapStore 属性。

```
public static List<OnderzoekColumn> GetOnderzoekColumns(int onderzoekId)
{
 var store = DynamicDataStoreFactory.Instance.GetStore(typeof(OnderzoekColumn));

 var query = from item in store.Items<OnderzoekColumn>()
             where item.OnderzoekId == onderzoekId
             select item;

 return query.ToList();
} 
```

# jquery - 无法在 ie 浏览器中找到（“部分”）

> ID：16085862
> 
> 赞同：-2
> 
> 时间：2013-04-18T14:35:02.130
> 
> 标签：jquery, xml

在浏览器中，find("Section") 不工作我有这个 xml 内容

```
 var xmlContent = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?/><Section type="two_column" name="Section Name" id="attr_id_lines_9810"><Column align="Left"><Label>One</Label><Value>test</Value></Column><Column align="Right"><Label>Two</Label><Value>222</Value></Column></Section>';
$(xmlContent).find("Section").each(function(){console.log($(this).attr('type");}); 
```

在 ie 浏览器中，此代码不起作用。但其他浏览器显示正确的结果。如果有人知道解决方案，请更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:01:03.793

XML 声明不是“自动关闭”或配对标记。删除斜线。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?/> 
```

应该：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
```

使用`filter()`, not`.find()`因为“Section”不是子元素。您还有一个不匹配的引号，并且缺少右括号（其中任何一个都会使 IE 发疯）。

```
$(xmlContent).find("Section").each(function(){console.log($(this).attr('type");}); 
```

应该：

```
$(xmlContent).filter("Section").each(function(){console.log($(this).attr('type'));}); 
```

放在一起就是：

```
var xmlContent = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Section type="two_column" name="Section Name" id="cust_attr_estimate_lines_9810"><Column align="Left"><Label>One</Label><Value>test</Value></Column><Column align="Right"><Label>Two</Label><Value>222</Value></Column></Section>';
$(xmlContent).filter("Section").each(function () {
    console.log($(this).attr('type'));
}); 
```

我可以在 IE8（以及 FF 和 Chrome）的开发者工具控制台中运行它，得到预期的结果（`two_column`）没有任何问题。

# jquery - iframe 内容未显示在 IE 的 jquery 对话框中。它只显示一个空白对话框

> ID：16085869
> 
> 赞同：1
> 
> 时间：2013-04-18T14:35:10.817
> 
> 标签：jquery, internet-explorer, iframe

```
$(function(){      
var options = {
      autoOpen: false,
      modal: true,
      show: 'slide',
      resizable: false,       
      width: 800,       
      height: 700       

 };       
     $('#dialog').append(iframe).appendTo("body").dialog(options);          
            // Dialog Link
            $('#dialog_click').click("callback",function(){         
                $('#dialog').dialog('open');                    
                return false;
            });
  }); 
```

这是我的 jQuery 部分，它在所有其他浏览器中都能正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:39:30.760

试试这个

```
 $(function(){      
        var options = {
        autoOpen: false,
        modal: true,           
        resizable: false,       
        width: 800,       
        height: 700       

             };       
 $('#dialog').append(iframe).appendTo("body").dialog(options);          
        // Dialog Link
        $('#dialog_click').click("callback",function(){         
            $('#dialog').dialog('open');                    
            return false;
        });
 }); 
```

# firefox - 如何在 Firebug 中隐藏样式侧面板？

> ID：16085870
> 
> 赞同：0
> 
> 时间：2013-04-18T14:35:20.977
> 
> 标签：firefox, firebug

是否可以在 Firebug 中隐藏样式侧面板？在我使用 Firebug 的大部分时间里，我不需要这个侧面板，所以我希望能够隐藏它以回收一些水平空间。

如果知道有用的话，我在 Firefox 20.0 上运行 Firebug 1.11.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:21:13.763

目前这是不可能的。尽管[Firebug 的问题跟踪器中已经有对此的增强请求](http://code.google.com/p/fbug/issues/detail?id=6095)。

尽管您可以通过向右拖动主面板和侧面板之间的分隔符来调整面板的大小以最小化它们。

塞巴斯蒂安

# mysql - 使用 SQL 获取每个房间的最后一篇文章

> ID：16085871
> 
> 赞同：1
> 
> 时间：2013-04-18T14:35:24.027
> 
> 标签：mysql, sql, join

我希望能够检索用户在应用程序中的每个房间发布的最后一篇文章。但是，通过我建立的查询，我总是检索第一个？

桌子看起来像这样

```
Rooms
id|name|subname 

Posts
id|title|description|id_room|date_posted 
```

我在这里错过了什么或做错了什么？

```
SELECT * FROM rooms AS rm
INNER JOIN posts AS pst ON pst.id_room = rm.id
WHERE pst.id = ( 
SELECT MAX( pst.id ) FROM posts ) 
GROUP BY rm.id 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:40:32.890

类似的东西应该更好（您的查询只检索 MAX pst.id，而不是按房间的 MAX pst.id）

```
select * from rooms as rm
inner join posts as pst on pst.id_room = rm.id
where pst.id in (select max(pst.id) from posts
                 group by pst.id_room) 
```

简化[SqlFiddle](http://sqlfiddle.com/#!2/9e0c1/6)，带有您的查询和我的查询。

# c - #Include 在我编译 Linux 内核时如何工作

> ID：16085873
> 
> 赞同：1
> 
> 时间：2013-04-18T14:35:26.657
> 
> 标签：c, linux

我需要用 arm-linux-gcc 作为嵌入式系统编译 2.6.28 linux 内核。我正在运行 Ubuntu 12.10 x86。我查看了 2.6 内核源代码，发现：

```
#include <linux/errno.h>
#include <linux/kernel.h>
#include <linux/input.h>
#include <asm/io.h>
#include <asm/irq.h>
... 
```

gcc 编译器是否会从 /usr/include /usr/local/include**或**Linux_2.6.28 源文件夹中包含这些文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T14:44:29.037

内核是*自包含的*。这意味着它不允许有任何外部依赖。换句话说，您的内核源代码树包含构建内核所需的*所有材料。*没有必要在其他任何地方寻找代码。

正如我在评论中所建议的，只需看一下主 Makefile。您会在源代码树的根目录下找到它。有点`ctrl+f`“包含”，这里有一些有趣的引语，我可以反馈给你：

```
# Look for make include files relative to root of kernel src
MAKEFLAGS += --include-dir=$(srctree)
# .... Other stuff
# Use USERINCLUDE when you must reference the UAPI directories only.
USERINCLUDE    := \
    -I$(srctree)/arch/$(hdr-arch)/include/uapi \
    -Iarch/$(hdr-arch)/include/generated/uapi \
    -I$(srctree)/include/uapi \
    -Iinclude/generated/uapi \
    -include $(srctree)/include/linux/kconfig.h

# Use LINUXINCLUDE when you must reference the include/ directory.
# Needed to be compatible with the O= option
LINUXINCLUDE    := \
    -I$(srctree)/arch/$(hdr-arch)/include \
    -Iarch/$(hdr-arch)/include/generated \
    $(if $(KBUILD_SRC), -I$(srctree)/include) \
    -Iinclude \
    $(USERINCLUDE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:42:11.293

这些文件不应该在 /usr/local 等中直接访问。如果是，这是一个问题，因为除非使用属于该内核的内核，否则您的内核将无法正确构建。随着内核的更新和改进，其中一些文件会定期更改。

内核使用的文件可以在`linux/include/...`目录中找到。编译器选项用于`-nostdinc`避免搜索标准包含位置，然后从内核源目录中添加适当的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T14:43:00.533

要找出某些给定编译包含哪些文件，请传递`-H`给`gcc`.

要添加用于搜索包含文件的目录，`-I` *请将 somedir*传递 给`gcc`，例如`-I /usr/local/include/`; 有[预处理器选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)可以删除目录或清除包含路径。

# c++ - QTableWidget 在不聚焦时挂起/暂停

> ID：16085879
> 
> 赞同：0
> 
> 时间：2013-04-18T14:35:37.727
> 
> 标签：c++, qt, qtablewidget

我目前有一个每秒更新 100 次的 qtable 小部件。它似乎工作正常，但是我注意到过了一会儿，直到您稍微移动滚动条才会显示更新的值。关于可能导致这种情况的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:43:24.330

建议：创建自己的模型，基于 QAbstractTableModel 并发出 dataChanged( QModelIndex(), QModelIndex() ); 当您的数据更新时。这将强制重绘所有可见项目。

# javascript - 为什么在 iPad 上使用 JSONP 块 ui 调用 jQuery AJAX 请求？

> ID：16085880
> 
> 赞同：0
> 
> 时间：2013-04-18T14:35:40.440
> 
> 标签：javascript, jquery, ios, ipad, jsonp

我正在使用下一个代码在我的 web 应用程序中执行长轮询。服务器配置为使用我稍后解析的数据响应我的请求`onSuccessGetMessages`。

```
function getMessages() {
  jQuery.ajax({
    type: 'get',
    dataType: 'jsonp',
    url: communicationInfo.urlToSend,
    timeout: communicationInfo.requestTimeout
  })
  .done(onSuccessGetMessages)
  .fail(function() {
    console.log("getMessages - failed");
    setTimeout(getMessages, communicationInfo.timeoutBetweenRequests);
  });
} 
```

问题是，虽然这在桌面 Chrome 中运行时效果很好，但在我的 iOS 6 iPad（chrome 和 safari）上，它会导致 GUI 动画和效果表现迟缓。

我该如何解决这个问题？

# c++ - Qt 中的控制台应用程序行为

> ID：16085887
> 
> 赞同：-2
> 
> 时间：2013-04-18T14:36:04.563
> 
> 标签：c++, qt

嗨，我只是想看看我的 Qt 创建器是否运行正常，当我在 Qt 中创建一个新项目并选择 Qt 控制台应用程序并将主要更改为：

```
#include <QtCore/QCoreApplication>

int main()
{

    return 0;
} 
```

然后它运行没有错误，但控制台窗口只出现不到一秒钟，只闪烁一次并关闭。这是正常的还是应该等我按键关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:37:53.287

不，这很正常，没有任何活动发生，因此它创建了应用程序，没有任何代码行，然后返回 0 并退出。

# xpath - 如何找到最后一个元素

> ID：16085888
> 
> 赞同：1
> 
> 时间：2013-04-18T14:36:07.817
> 
> 标签：xpath, biztalk, edi, edifact

我正在尝试使用 biztalk 中的 xpath - 编排在我的 edifact 文件的最后一个 Line 元素中找到 IMD。这是我的 xpath：

```
LastLineName = xpath(Message_2,"/*[local-name()='EFACT_D96A_INVOIC' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006']/*[local-name()='LINLoop1' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006']/*[local-name()='IMD_2' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006']/*[local-name()='C273_2' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006']/*[local-name()='C27304' and namespace-uri()='']last()"); 
```

这是我的 edifat 文件：

```
UNB+UNOB:1+BTS-SENDER:ZZZ+RECEIVE-PARTNER:ZZZ+130418:1513+19++++0++0'
UNH+19+INVOIC:D:01B:UN:EAN010'
BGM+380+353795+9'
DTM+171:2013-04-18'
LIN+1++8886419315339:VN'
IMD+++:::Razer Sphex - Full retai'
QTY+47:10'
PRI+AAA:89'
LIN+3++8886419330028:VN'
IMD+++:::Razer Deathadder RESPAWN'
QTY+47:10'
PRI+AAA:347'
LIN+4++8886419330127:VN'
IMD+++:::Razer Abyssus Gaming Mou'
QTY+47:1'
PRI+AAA:242,6'
LIN+5++8886419330660:VN'
IMD+++:::Razer Imperator 2012 Exp'
QTY+47:2'
PRI+AAA:447,5'
LIN+6++8886419311454:VN'
IMD+++:::Razer Lycosa gaming keyb'
QTY+47:2'
PRI+AAA:511,5'
LIN+7++8886419311614:VN'
IMD+++:::Razer Arctosa Silver Key'
QTY+47:2'
PRI+AAA:312'
LIN+10++8886419340317:VN'
IMD+++:::Anansi (MMO Keyboard)'
QTY+47:1'
PRI+AAA:639'
LIN+11++8886419330509:VN'
IMD+++:::Razer Naga - Molten Edit'
QTY+47:2'
PRI+AAA:479,5'
LIN+12++8886419330981:VN'
IMD+++:::Razer Naga Hex MOBA/ Act'
QTY+47:1'
PRI+AAA:479,5'
LIN+13++8886419312277:VN'
IMD+++:::Razer Carcharias Gaming'
QTY+47:2'
PRI+AAA:479,5'
LIN+14++8886419312628:VN'
IMD+++:::Razer Electra headset'
QTY+47:4'
PRI+AAA:383,5'
UNS+S'
MOA+139:790'
UNT+50+19'
UNZ+1+19' 
```

它返回：

> 有一个无效的令牌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:42:05.573

最后，你有

`last()`

位置索引器必须用方括号括起来。

所以简单地说：

`[last()]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:35:22.200

我解决了。抱歉，Arran，您对 [last()] 的看法完全正确。我只是需要把它放在另一个地方而不是建议的地方。

这是解决方案：

```
/*[local-name()='EFACT_D96A_INVOIC' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006']/*[local-name()='LINLoop1' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006'][last()]/*[local-name()='IMD_2' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006']/*[local-name()='C273_2' and namespace-uri()='http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006']/*[local-name()='C27304' and namespace-uri()='']/text() 
```

# vba - Powerpoint 事件处理 - 防止新的演示文稿

> ID：16085889
> 
> 赞同：2
> 
> 时间：2013-04-18T14:36:09.030
> 
> 标签：vba, add-in, powerpoint

我正在创建一个 Powerpoint 加载项。我想限制用户：

*   创建新演示文稿
*   打开现有演示文稿

我已经使用[本教程/概述](http://www.pptfaq.com/FAQ00004_Make_your_VBA_code_in_PowerPoint_respond_to_events.htm)来捕获`NewPresentation`和`PresentationOpen`事件。我想在用户与之交互之前关闭通过这些事件初始化的任何演示文稿。当我尝试使用关闭它时`.Close`方法关闭它时，我收到一个错误（下面的屏幕截图）。

在我的课堂模块中，我有以下内容来捕获`NewPresentation`事件。这工作正常，我收到消息框并且`Pres`是可以传递给`CloseNewPres`例程的有效 Presentation 对象。

```
Private Sub PPTEvent_NewPresentation(ByVal Pres As Presentation)
MsgBox "You cannot use this Charting tool with multiple presentations.", vbInformation
CloseNewPres Pres
End Sub 
```

在一个标准模块中，我有一个`CloseNewPres`例程，我希望关闭“新”演示文稿：

```
Sub CloseNewPres(Pres As Presentation)
    Application.Presentations(Pres.Name).Close
    'Pres.Close '<~~ This also fails.'
End Sub 
```

我收到以下错误。

![错误信息截图](https://i.stack.imgur.com/PHBaC.jpg)

关于为什么会发生这种情况的任何想法？或者我可以做些什么来关闭这些演示文稿？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:49:59.080

在我看来，您需要使用另一个与您使用的事件非常相似的事件：

```
Private Sub PPApp_AfterNewPresentation(ByVal Pres As Presentation) 
```

如果我设置`Pres.Close`在建议的范围内，它真的会关闭新创建的演示文稿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:48:24.247

我有最好的解释（这是我自己的解释）是它在吠叫，因为您试图在事件处理程序处理它时删除一个对象（演示文稿）。有点要求事件处理程序从自己的脚下拉出地毯。

顺便说一句，从事件处理程序中调用另一个例程并让 IT 执行操作是行不通的，因为事件处理程序仍然处于活动状态。

一种解决方法：

让事件处理程序以无模式方式加载表单。当您这样做时，事件处理程序中的剩余代码将运行完成。如果满足您的条件，表单的初始化代码可以关闭演示文稿。

表单不需要变得可见就可以工作。

是的。看起来很奇怪。但它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-21T10:09:58.103

在 C#.Net 中，您可以这样做，

```
using pp = Microsoft.Office.Interop.PowerPoint;

pp.Application app = Globals.ThisAddIn.Application;
app.AfterNewPresentation += Event_PresNew;

public void Event_PresNew(pp.Presentation pres)
{
//.....your code here....
} 
```

您还可以在下面看到您可以在 powerpoint 中使用的所有事件的列表， [https://docs.microsoft.com/en-us/office/vba/api/powerpoint.application.newpresentation(even)](https://docs.microsoft.com/en-us/office/vba/api/powerpoint.application.newpresentation(even))

# joomla2.5 - 从 webmatrix 连接时出现数据库登录错误

> ID：16085892
> 
> 赞同：0
> 
> 时间：2013-04-18T14:36:12.357
> 
> 标签：joomla2.5, webmatrix

我已经在 webmatrix 中以 mysql 作为数据库安装了 joomla 2.5 模板。输入密码并确认。在 webmatrix 中安装模板后，可以选择配置数据库连接。我正在尝试新的数据库连接，即 microsoft sql 2008 express。尝试使用 Windows 身份验证连接它没有连接。错误是

“无法打开数据库 xyz”

我的数据库名称存在。

请确认我 1) 我们可以连接到 sql express 还是需要独立应用程序？2）在我的电脑本地机器中没有安装mysql，那么在安装时为什么会询问mysql密码？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:06:00.137

得到了答案，

连接字符串错误。更正了连接字符串。

# c++ - 无法从 Visual C++ 表单应用程序中的表单访问全局变量

> ID：16085896
> 
> 赞同：0
> 
> 时间：2013-04-18T14:36:24.250
> 
> 标签：c++, visual-c++, global-variables

程序描述：从 XML 读取和显示数据操作系统：Windows 7 IDE：Microsoft Visual Studio 2010 Express

我的主源文件（*BABSEA CLE Library.cpp*）中有这个代码段：

```
int currentBook;
#include "Editor.h"
#include "checkoutline.h"
#include "Form1.h"
using namespace BABSEACLELibrary;
[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
//more code blablabla 
```

我尝试从（非主）表单（*checkoutline.h*）访问“currentBook”，这是一个简单的表单模板，其中添加了以下内容：

```
 private: System::Void checkoutline_Load(System::Object^  sender, System::EventArgs^  e) {
currentBook=0;} 
```

虽然它在主表单文件（*Form1.h*）中完美运行

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:52:18.677

哦，我删除了

```
#include "checkoutline.h" 
```

来自 checkoutline.cpp

都很好。谢谢！

# objective-c - 复制目录和子目录

> ID：16085897
> 
> 赞同：2
> 
> 时间：2013-04-18T14:36:25.377
> 
> 标签：objective-c, cocoa, nsfilemanager

我有一个类似这样的文件夹结构，

```
Folder 1  
     Folder 11 
       Folder 111 
       ... Some files .... 
     Folder 12 
       Folder 121 
       ... Some files .... 
     Folder 13 
     .... Some Files ... 

Folder 2 
```

现在以编程方式我必须将整个文件夹 1 复制到文件夹 2

我试过以下，

```
bool success = [[NSFileManager defaultManager] copyItemAtPath:Folder1Path toPath:Folder2Path error:nil]; 
```

但它只在 folder2 内创建 Folder1 ，

有没有办法递归复制子目录

# vim - 在vim中，当光标到达窗口末尾时，如何水平滚动一个字符？

> ID：16085901
> 
> 赞同：10
> 
> 时间：2013-04-18T14:36:33.373
> 
> 标签：vim

取而代之的是，vim 将视图滚动一整页，这使得跟踪一长行代码变得非常困难。

换行当然是禁用的，我们只想使用箭头键而不是`zl`.

是否有用于在 .vimrc 中配置所需行为的 vim 选项？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T14:52:42.960

您正在寻找

```
:set sidescroll=1 
```

（或任何其他小数字）。默认值为`0`，滚动半屏。另请参阅`sidescrolloff`光标必须到达边框多近才能触发滚动。

# html - 我可以在 DD 所在的同一行渲染 DT 吗？

> ID：16085910
> 
> 赞同：7
> 
> 时间：2013-04-18T14:36:57.940
> 
> 标签：html, css

我正在寻找与其术语一致的定义列表，以便

```
<dl>
  <dt>Email</dt><dd>contact@example.com</dd>
  <dt>Bio</dt><dd>Person's full-text bio, which spans multiple lines, and starts on the same line as the text <q>Bio</q>, just like the previous definitions. Any given solution should both allow this text to wrap below the &lt;dd&gt; and then provide a line break afterwards.</dd>
  <dt>Phone</dt><dd>(555) 123-4567</dd>
</dl> 
```

呈现为：

> **电子邮件：** contact@example.com
> 
> **Bio：**人物的全文bio，跨越多行，与文本“Bio”在同一行开始，就像前面的定义一样。任何给定的解决方案都应允许此文本在 <dd> 下方换行，然后在之后提供换行符。
> 
> **电话：** (555) 123-4567

**我已经尝试过**使用`dt,dd{display:inline}`，但这导致*所有*定义都显示在一行中。

**我已经查看了** [如何设置 dt 和 dd 的样式，以便它们在同一行？](https://stackoverflow.com/questions/1713048/how-to-style-dt-and-dd-so-they-are-on-the-same-line)它导致了更多的表格布局，在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-18T14:51:22.307

好的，这正是您想要的方式。我修复了 wazaminator 代码，以便它可以跨浏览器工作。问题是一些浏览器为 dds 添加了边距开始。我没有在 IE 中测试：

```
dt {
  float: left;
  clear: left;
  margin-right: 5px;
  font-weight: bold;
}

dd {
  margin-left: 0px;
} 
```

[http://jsfiddle.net/sPQmw/18/](http://jsfiddle.net/sPQmw/18/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T14:41:09.630

怎么样`dt { float: left; clear: left;}`？浮动将允许它在右侧有一个文本，并且清除阻止它们进入同一行。

编辑：找到了一种方法，但它不是很好的代码：将 dd 更改为 ap，并为您的 dt 添加一个边距。

这是小提琴：http: [//jsfiddle.net/sPQmw/13/](http://jsfiddle.net/sPQmw/13/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-18T15:26:45.890

如果您可以将每个 dt 和 dd 对包装在 a`<p>`中，则可以使用`display: inline`将两者放在同一行，而`<p>`将强制下一个 dt/dd 对到下一行。

HTML：

```
<dl>
    <p><dt>Email</dt><dd>contact@example.com</dd></p>
    <p><dt>Phone</dt><dd>(555) 123-4567</dd></p>
    <p><dt>Bio</dt><dd>Person's full-text bio, which spans multiple lines, and starts on the same line as the text <q>Bio</q>, just like the previous definitions. Any given solution should both allow this text to wrap below the &lt;dd&gt; and then provide a line break afterwards.</dd></p>
</dl> 
```

CSS：

```
dt {
    display: inline-block;
}

dd { display: inline; } 
```

JSFiddle：http: [//jsfiddle.net/fwAFq/](http://jsfiddle.net/fwAFq/)

# spring - 一对一 ORM 和插入数据库

> ID：16085916
> 
> 赞同：1
> 
> 时间：2013-04-18T14:37:25.050
> 
> 标签：spring, hibernate, spring-mvc

我有 Employee 和 Department 类的一对一映射。我在域中有 Bean 类。我有一个前端 JSP，它是一个员工表单。此表格有一个下拉框，列出了所有可用的部门。

现在我需要使用hibernate对员工进行插入操作。

```
<form:form action="add" method="post" modelAttribute="user">
    <div>
        <form:label path="emailAddress">Email</form:label>
        <form:input path="emailAddress" />
    </div>
    <div>
        <form:label path="deptartment">Department</form:label>
        <form:select path="department">
        <form:options items="${departmentList}" />
        </form:select>
    </div>
</form:form> 
```

控制器方法：

```
@RequestMapping(value = "add", method = RequestMethod.POST)
    public String getAddEmployeeSettingsPage(@ModelAttribute("employee") Employee employee,
            BindingResult result) {

        System.out.println(employee);
        return "empsettings";
    } 
```

现在，员工对象没有对部门的引用。我应该怎么做才能在控制器中获取员工对象以及相关的部门参考。希望我清楚。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:40:50.407

将 DAO 注入控制器，让控制器从部门获取以与 DAO 中的员工关联，并持久化员工。

理想情况下，您可能希望将所有这些逻辑包装到一个服务方法中，因此该服务将只接收一名员工，并将其保存在适当的部门中。另外，关系不是多对一的，许多员工属于一个部门。否则，您将拥有属于 Bob 部门的员工 Bob，员工 Sue 属于 Sue 部门，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:38:52.377

我找到了不需要注入的soln：

```
<div>
    <form:label path="department.departmentId">Department</form:label>
    <form:select path="department.departmentId">
    <form:options items="${departmentList}" itemValue="departmentId" itemLabel="departmentName"/>
    </form:select>
</div> 
```

只需在组合框中关联部门.. :)

# php - 加载“发送电子邮件”页面时出现 500 错误

> ID：16085917
> 
> 赞同：0
> 
> 时间：2013-04-18T14:37:26.127
> 
> 标签：php, html-email

Sp 我正在尝试发送一封电子邮件，代码运行良好，直到我从标准电子邮件切换到 html 电子邮件。

它住在这里： http: [//kenthomes.net/Amelia-Cove](http://kenthomes.net/Amelia-Cove)

单击“共享此计划”。

我的代码是：

```
 $person = $_POST["name"];

    //Where will you be pulling emails from?
    $emailDB = "emailAddresses";
    $type = $_POST["type"];

    //Get Share URL that is misformatted.
    $waybefore = $_GET["share"];
    $before = str_replace("*", "?", $waybefore);
    $shareMe = str_replace("!", "=", $before);

    $id = $_SERVER['HTTP_REFERER']; 
    $id = $_SERVER['HTTP_REFERER']; 
    //Where do you want a copy of this email to go to? (or null)
    $copyDB = "";

    if($_GET["com"])
    {
        $prettyType = "Community";
    }
    else if($_GET["inv"])
    {
        $prettyType = "Move-In Ready Home";
    }
    else if($_GET["mod"])
    {
        $prettyType = "Model Home";
    }

    $_POST["date"] = date("Y-m-d");

    $Emails = new Controller($emailDB, null, null, true);

    $ed = $Emails->getData();

    //
    // The good stuff
    //

    $emailTo = $_POST["email"];
    $subject = "Kent Homes - " . $person . " would like to share a " . ucwords(strtolower($_GET['type'])) . " with you!";

    $out = '<html><body>';
    $out .= $person . " thought you would like this " . $prettyType . " by Kent Homes.  Click the link to view: http://kenthomes.net" . $shareMe . "</br></br>";
    $out .= "Additional Message from " . $person . "</br>";
    $out .= $_POST['msg'];
    $out .= '</body></html>';

    $headers = "From: " . $person "<noreply@kenthomes.com>\r\n";
    $headers .= "Reply-To: <noreply@kenthomes.com\r\n";
    $headers .= "X-Mailer: PHP/" . phpversion()."\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

    //
    // Send 'er off!
    //

    mail($emailTo, $subject, $out, $headers);

    if($toEmail) {
        mail($emailTo, $subject, $out, $headers);
    }

    echo "<p>This " . ucwords(strtolower($_GET['type'])) . " has been sent to " . $_POST["email"] . ".</p>";
    unset($_POST["id"]); 
```

我收到错误：

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

这是 html 邮件内容之前功能代码的样子：

```
 $Captcha = new MCaptcha();
                if($_POST["submitit"])
                {
                    $answer = $Captcha->checkAnswer();
                    if($answer)
                    {
                        $person = $_POST["name"];
                        $emailTo = $_POST["email"];
                        $subject = "Kent Homes - " . $person . " would like to share a " . ucwords(strtolower($_GET['type'])) . " with you!";

                        //Where will you be pulling emails from?
                        $emailDB = "emailAddresses";
                        $type = $_POST["type"];

                        //Get Share URL that is misformatted.
                        $waybefore = $_GET["share"];
                        $before = str_replace("*", "?", $waybefore);
                        $shareMe = str_replace("!", "=", $before);

                        $id = $_SERVER['HTTP_REFERER']; 
                        $id = $_SERVER['HTTP_REFERER']; 
                        //Where do you want a copy of this email to go to? (or null)
                        $copyDB = "";

                        if($_GET["com"])
                        {
                            $prettyType = "Community";
                        }
                        else if($_GET["inv"])
                        {
                            $prettyType = "Move-In Ready Home";
                        }
                        else if($_GET["mod"])
                        {
                            $prettyType = "Model Home";
                        }

                        $out = $person . " thought you would like this " . $prettyType . " by Kent Homes.  Click the link to view: http://kenthomes.net" . $shareMe . " ";

                        $_POST["date"] = date("Y-m-d");

                        $Emails = new Controller($emailDB, null, null, true);

                        $ed = $Emails->getData();

                        mail($emailTo, $subject, $out, $headers);

                        if($toEmail) {
                            mail($emailTo, $subject, $out, $headers);
                        }

                        echo "<p>This " . ucwords(strtolower($_GET['type'])) . " has been sent to " . $_POST["email"] . ".</p>";
                        unset($_POST["id"]);
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:59:23.847

语法错误：

```
$out .= "Additional Message from " $person . "</br>"; 
```

这应该是：

```
$out .= "Additional Message from " . $person . "</br>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:46:11.303

我没有看到任何会导致 500 的代码问题。可能导致 500 的未见项目：

1.  是否包含并定义了“控制器”？
2.  在构造控制器时会发生什么会导致 500 的情况吗？
3.  您为制作此代码段而删除的代码中是否存在语法错误？

首先，我会检查您的 apache 日志。在 Ubuntu 中，它们通常位于 /var/log/apache2/error.log 中。如果您的错误日志中没有打印任何内容，则可能是您的内存或时间不足。我怀疑是这种情况，但如果是这样，那么这些将有所帮助：

ini_set('memory_limit', '1G'); 设置时间限制（3600）；

它们将帮助您进行诊断，但您想为您的用例配置运行时。

如果您的错误日志中确实打印了某些内容，请进行调查 - 这可能是问题所在。

如果这些都没有帮助，请尝试在脚本中间死去，看看它能走多远。一旦你到达有问题的代码段，它就会自行死亡，而不会打印出死亡消息。

死（“到了这里”）；

# ios - 添加到购物车功能 - 核心数据

> ID：16085920
> 
> 赞同：1
> 
> 时间：2013-04-18T14:37:31.820
> 
> 标签：ios, objective-c, core-data

我正在尝试为以下场景创建最佳设计。

类别 -> 产品列表

在显示产品列表的表格视图中，用户可以选择将该产品添加到购物车中。
因此，每当用户打开购物车时，他都可以看到他添加的所有产品。

我的问题是如何在 Core Data 中最好地设置此功能？维护单独的购物车实体的最佳解决方案是什么？或者关系是正确的方式吗？，如果是，你能告诉我购物车和产品之间应该是什么样的关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:31:20.757

按照您的`Cart`建议使用与实体***的多对多***关系创建`CartProduct`实体。`Cart`entity 可以包含有关购买的“元”信息，`CartProduct`并将链接到实际`Product`实体。

`CartProduct`实体和实体之间的关系类型`Product`本质上是 1-1，因此在 Xcode 中，在数据模型编辑器中，`CartProduct`选择实体后，请务必将`Product`实体作为关系添加到“***关系***”部分并保留“ ***To- ”许多关系***设置未选中。值将是这样的：

*   关系：产品
*   目的地：产品
*   逆： CartProduct

然后，`Product`在编辑器中选择实体并仔细检查是否存在看起来像这样的关系（再次确保未选中***To-Many Relationship***设置）：

*   关系：购物车产品
*   目的地：购物车产品
*   逆：产品

以上应该让你开始。

# visual-studio-2012 - 如何在 VS2012 构建/发布过程中执行 Durandal JS optimizer.exe？

> ID：16085921
> 
> 赞同：3
> 
> 时间：2013-04-18T14:37:32.303
> 
> 标签：visual-studio-2012, release-management, single-page-application, durandal

当我在 Web 服务器上运行以发布模式发布的 DurandalJS SPA 应用程序时，我得到 404 Not found for main-built.js 文件。

![404 未找到：main-built.js](https://i.stack.imgur.com/LRZU9.png)

所以我发现我需要运行 optimizer.exe 来生成丢失的文件 main-built.js

是否可以将 optimizer.exe 的执行作为 Visual Studio 2012 构建/发布过程的一部分？如果是，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:05:43.523

我将优化器步骤添加为 Pre Build 步骤。

因此，在您的 Web 项目的项目属性的 Pre Build Events 框中，我添加了以下内容：

```
cd $(ProjectDir)App\durandal\amd

optimizer.exe 
```

然后生成 main-built.js 作为构建过程的一部分。

请注意，如果您使用 msdeploy，您可能必须将 main-built.js 文件添加到您的项目中才能自动部署。我必须这样做，因为我们正在使用带有自动 Azure 发布的 TFS 托管构建服务。如果没有此步骤，则不会部署文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T16:21:29.047

这是我所做的：

将这些代码行放入`Post Build Events`

```
cd $(ProjectDir)App\durandal\amd
optimizer.exe 
```

将`main-built.js`在构建解决方案后创建，`\App`但不包含在项目中。然后我选择`Show All Files`并包含该文件。

然后，`main-built.js`我以后每次发布 Web 应用程序时都可以使用。

# javascript - 将一个数组推入另一个数组？

> ID：16085929
> 
> 赞同：0
> 
> 时间：2013-04-18T14:37:46.917
> 
> 标签：javascript

我有一个数组：

```
var fileMetaData = []; 
```

在一个循环中，我想将东西推送到数组中：

```
$('#gallery-manager-add-form .galleryImage').each(function(){

    fileMetaData.push(myTestArray);
}); 
```

测试 myTestArray 是：

```
var myTestArray = new Array(2);
myTestArray['a'] = 'foo';
myTestArray['b'] = 'bar'; 
```

问题是，当我得到数组的内容时，它只是一个逗号（，）。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T14:40:12.420

那是因为你混淆了数组和对象（你应该使用它们）。

如果您的键是`'a'`and `'b'`，请使用

```
var myTestArray = {};
myTestArray['a'] = 'foo';
myTestArray['b'] = 'bar'; 
```

如果您真的想使用数组，请使用

```
var myTestArray = [];
myTestArray.push('foo'); // no explicit key 
myTestArray.push('bar'); 
```

您只看到了一个逗号，因为数组的标准表示不查找属性，因此您打印的等价物`[[],[]].toString()`是`","`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:40:29.117

数组使用数字键。您已经使用了“a”和“b”。

像这样初始化它：

```
var myTestArray = ['foo', 'bar']; 
```

或者，使用它来保持您的代码几乎相同：

```
var myTestArray = new Array(2);
myTestArray[0] = 'foo';
myTestArray[1] = 'bar'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:40:55.317

`myTestArray['a']`当您为and赋值时`myTestArray['b']`，您不是将它们推入数组，而是将值分配给对象的属性。要将项目视为数组中的值，您需要使用整数索引，或者只使用`push`它们：

```
myTestArray[0] = 'foo';
myTestArray.push('bar'); 
```

但是另一部分，你正在推入`fileMetaData`数组 - 如果你试图从 推两个项目`myTestArray`，你需要以不同的方式做 - 如果你将一个数组推入另一个数组，你是在推数组，而不是这几项。您需要一次循环一个并以这种方式推送它们，或者使用诸如`concat`合并数组之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:44:01.627

这应该工作

```
$('#gallery-manager-add-form .galleryImage').each(function(){

    fileMetaData.push(myTestArray[0],myTestArray[1]);

}); 
```

一维数组 [http://jsfiddle.net/Gs6ZU/](http://jsfiddle.net/Gs6ZU/)

二维数组 [http://jsfiddle.net/fY9S5/1/](http://jsfiddle.net/fY9S5/1/)

# javascript - Angular.js 格式化程序未在模型值更改时触发

> ID：16085942
> 
> 赞同：3
> 
> 时间：2013-04-18T14:38:11.770
> 
> 标签：javascript, angularjs, angularjs-directive, formatter

[http://plnkr.co/edit/HN1PBGRsK6xqT9pwXcKY?p=preview](http://plnkr.co/edit/HN1PBGRsK6xqT9pwXcKY?p=preview)它应该很自我解释

`ctrl.$formatters`当我最初设置模型值时运行，但在我更新它之后不运行。

根据这个[是否在第一次填充视图时调用了 $formatters？](https://stackoverflow.com/questions/13995414/have-formatters-be-called-when-view-is-first-populated)每次更改模型值时它都应该触发，所以出了什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:57:51.653

使用自然模型设置器，`scope[attrs.ngModel]`而不是 setviewvalue。

```
app.directive('format', function($filter) {
  return {
    require: 'ngModel',
    link: function(scope, element, attrs, ctrl) {
    element.unbind('input').unbind('keydown').unbind('change');
        element.bind('blur', function() {
            if (element.val()) {
                scope.$apply(function() {
                    scope[attrs.ngModel] = element.val();
                });         
            }
        });

        ctrl.$formatters.unshift(function(modelValue) {
            if (modelValue) {
                var formatted = $filter('currency')(modelValue);
                return formatted;
            }
        });
    }
}
}); 
```

您还需要一个解析器才能正常工作。

# java - Java swing 区别 remove 和 removeAll

> ID：16085948
> 
> 赞同：0
> 
> 时间：2013-04-18T14:38:23.917
> 
> 标签：java, swing, removeall

java swing库中remove和removeAll有什么区别？我有一个控制面板和一个可以用控制面板更改的面板。此更改在父框架对象中完成。当我使用代码时：

```
public void showNextPanel(){
        if(hasNextPanel()){
            getSelectedPanel().setVisible(false);
            getContentPane().removeAll();
            getContentPane().add(controlPanel);
            selectedPanel++;
            getContentPane().add(getSelectedPanel());
            getSelectedPanel().setVisible(true);
            revalidate();
            repaint();
        }else{
            System.exit(0);
        }
    } 
```

然后一切都按预期工作。当我在 remove 语句中更改 removeAll 时，这个选定的面板变为灰色，但仍然可见。调整我的框架大小时，新框架是可见的，您可以看到它隐藏在先前选定的面板后面。然后我的代码是：

```
public void showNextPanel(){
        if(hasNextPanel()){
            getSelectedPanel().setVisible(false);
            getContentPane().remove(getSelectedPanel());
            selectedPanel++;
            getContentPane().add(getSelectedPanel());
            getSelectedPanel().setVisible(true);
            revalidate();
            repaint();
        }else{
            System.exit(0);
        }
    } 
```

为什么我的 JPanel 在使用 removeAll 时会消失，但在使用 remove 时不会消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:45:27.563

方法名称是一个很大的提示，确定的答案在 javadocs 中：

对于[`Container.remove(Component)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#remove%28java.awt.Component%29)：

> “从此容器中删除*指定的组件。”*

对于[`Container.removeAll()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#removeAll%28%29)：

> “从这个容器中删除*所有组件。”*

至于导致行为差异的原因，我的猜测是面板中还有一些其他组件在第一种情况下被删除，但在第二种情况下没有。

`getComponentCount()`在两种情况下都尝试在“删除”之后调用和记录/打印。

# php - 将带有属性的php数组转换为XML

> ID：16085949
> 
> 赞同：3
> 
> 时间：2013-04-18T14:38:27.807
> 
> 标签：php, arrays

我正在开发一个 XML 库，它可以从数组/jsons 创建/解析 xml。我设法用 xml_parser （和谷歌帮助：p）编写了解析器，因为 SimpleXML 对我正在做的事情还不够好。

我设法创建了一个看起来像这样的数组：

```
Array 
(
[flow] => Array
    (
        [math] => Array
            (
                [apply] => Array
                    (
                        [lt] => Array
                            (
                            )

                        [apply] => Array
                            (
                                [divide] => Array
                                    (
                                    )

                                [apply] => Array
                                    (
                                        [minus] => Array
                                            (
                                            )
                                    )
                            )

                        [otherStuff] => 0
                    )

            )

        [true] => Array
            (

            )

        [true_attr] => Array
            (
                [xsi:type] => SomeStuff
                [id] => 2
            )

    )

[flow_attr] => Array
    (
        [id] => 0
        [xmlns:xsi] => http://www.w3.org/2001/XMLSchema-instance
    )
) 
```

如您所见，它应该看起来像这样（不是最好的例子：p）：

```
<flow id="0">
 <math>
 <lalaa/>
  <appyl>
 </apply>
  </math>
</flow> 
```

请注意，空数组应以 /> 结尾，例如，等等

如您所见，我将它自己的节点分隔为包含节点属性的 node_attr。像 flow_attr、true_attr。

任何人都知道如何将此数组转换回xml？我只是迷路了，不知道该怎么办。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T14:51:32.047

```
function recurse2xml ($array, &$string = "") {
    foreach ($array as $key => $subArray) {
        if (substr($key, -5) == "_attr")
            continue;
        $attrs = "";
        if (isset($array["$key_attr"]))
            foreach ($array["$key_attr"] as $attr => $value)
                $attrs .= " $attr='".str_replace($value, "'", "\\'")."'";
        if (empty($subArray)) {
            $string .= "<$key$attrs />";
        } else {
            $string .= "<$key$attrs>";
            if (is_scalar($subArray))
                $string .= $subArray;
            else
                recurse2xml($subArray, $string);
            $string .= "</$key>";
        }
    }
    return $string;
} 
```

此函数调用 with`recurse2xml($array);`将您的数组树扩展为 xml 树（字符串形式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:45:15.977

试试[Array2XML](http://www.lalit.org/lab/convert-php-array-to-xml-with-attributes/)，对我来说完美无缺。包括CDATA Parts等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-13T08:18:05.807

```
function recursiveArrayToXml($array, &$return=""){
    foreach ($array as $key => $subarray){
        if(empty($key)) {continue;}
        $key = preg_replace('/[^\da-z]/i', '', $key);
        if(preg_match('/[0-9]/i',$key[0])){
            $key = 'x'.$key;
        }
        $return .= "<".$key.">";
        if(!is_array($subarray)){
            $return .= htmlentities($subarray);
        }else{
            recursiveArrayToXml($subarray, $return);
        }
        $return .= "</".$key.">\n";
    }
    return $return;
} 
```

此功能将类似于上面发布的修复元素名称和元素值中的问题。由 recursiveArrayToXml($myArray); 调用

# bash - 使用 BASH 脚本在 Zenity 中创建表单？

> ID：16085951
> 
> 赞同：1
> 
> 时间：2013-04-18T14:38:34.807
> 
> 标签：bash, zenity

我正在尝试使用 BASH 脚本在 zenity 中创建表单。

我尝试了官方网站 [https://help.gnome.org/users/zenity/stable/forms.html.en](https://help.gnome.org/users/zenity/stable/forms.html.en)上提供的那个，但它会引发错误。

代码和错误如下：

```
zenity --forms --title="Add Friend" --text="Enter information about your friend." \
  --separator="," --add-entry="First Name" --add-entry="Family Name" \
  --add-entry="Email" --add-calendar="Birthday" 
```

错误：

```
This option is not available. Please see --help for all possible usages 
```

在分析时我发现错误是由于 option `--forms`。

如果除了使用选项之外还有其他方法可以在 Zenity 中创建表单，请告诉我`--forms`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T19:59:50.610

您的命令在 ubuntu 上的**zenity 3.4.0**上运行良好：

![在此处输入图像描述](https://i.stack.imgur.com/F5YFm.jpg)

尝试更新zenity

# mysql - CakePHP 的内存分配问题

> ID：16085953
> 
> 赞同：1
> 
> 时间：2013-04-18T14:38:37.803
> 
> 标签：mysql, cakephp, memory

我仍然对 Cake 的内存使用有疑问。我阅读了很多威胁并尝试了 1000 种东西，但没有任何帮助。我使用 CakePHP 2.4.x。使用 MySQLdB。我编写了一个 API 来从数据库中选择日志数据。我做了一个测试来解释是什么让我如此困惑。我有一个选择，它返回 11 列的 1400 行。我的一般内存使用量（使用 memory_get_usage）约为 4MB。在我选择之后：

```
$condition = array('conditions'=> array(

    'LogBackend.created_at between ? AND ?' => array(
                                            $this->params['url']['from'],$this->params['url']['to']
                                       )));

    $this->data = $this->LogBackend->find('all', $condition). 
```

我的内存使用量刚刚爆炸到超过 9MB。仍然没有任何回报或对数据进行任何工作。只是选择。好吧 9MB 不算多，但如果我选择更多，应该可以大约 100k 行。我的 256MB 空间用完了。谁能告诉我这种荒谬的内存使用的原因？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T23:19:48.343

只需使用 paginate 代替，并以块的形式处理您的数据。Cake 是面向 20 行左右的大块的视图。但通常我们希望生成基于数百万行的报告。CakePhp 有一个名为 paginate 的函数，它可以被欺骗以非常有效地执行 mysql LIMIT 100000,1000。我通过非常激烈的谷歌搜索发现了这些黑客，Cakephp 1.3 的语法略有不同，如果没有人发布关于 Cake 3 的信息，并且它发生了变化，我可能有一天会回来发布。

```
// cakephp 2.4.1
$condition = array('conditions'=>
array('LogBackend.created_at between ? AND ?' =>
array($this->params['url']['from'],$this->params['url']['to'])));

$this->paginate['conditions'] = $conditions['conditions'];
$this->paginate['limit'] = 1000;
// could also use ['fields'] = array('filed1', 'field2'); to limit memory

/******* here is where we trick paginate to iter in the ctrlr *****/
$this->request->params['named']['page']=1;
$this->request->params['paging']['ModelName']['nextPage'] = true;
// get chunks
while ($this->request->params['paging']['ModelName']['nextPage']) {
    $Rows = $this->paginate("ModelName");
    // boil down this chunk of data 
    $this->request->params['named']['page']+=1;
} 
```

将数百万行传回视图是没有意义的。while 循环每次都会覆盖 $Rows，重新使用该核心内存。因此，挑战在于找到一种精巧的方法来提取数据，或者在循环期间编写一个新表以用于下一次细化。由于模型处理开销，在 Cakephp 上执行仍然较慢，因此如果有很多不需要的列，请使用 paginate['fields'] 仅处理您需要的字段。字段与列相同。

PHP 在哲学上确实与 Apache 紧密相连，所以它真的不适合这种事情。它旨在在 30 秒或更短的时间内获得结果并呈现网页。这不仅仅是蛋糕的责任。Python 和 Ruby 可能会更好，甚至 Perl。但是当您必须筛选工具以格式化为 html 时，您会像婴儿一样哭泣。

# jquery - 选择表单中的所有其他字段

> ID：16085954
> 
> 赞同：4
> 
> 时间：2013-04-18T14:38:44.133
> 
> 标签：jquery

我正在寻找在选中复选框时如何禁用表单上的所有其他输入。我现在有一半，但是当我的问题是当我单击复选框时，它会与其他元素一起禁用自身。我只希望其他元素被禁用。

[http://jsfiddle.net/rockitdev/8TF2a/3/](http://jsfiddle.net/rockitdev/8TF2a/3/)

```
 <form action="#" method="post">

<div>
    <label for="checkbox">Checkbox:</label>
    <input type="checkbox" name="checkbox" id="checkbox" />
</div>

<div>
     <label for="name">Text Input:</label>
     <input type="text" name="name" id="name" value="" tabindex="1" />
</div>

<div>
     <h4>Radio Button Choice</h4>

     <label for="radio-choice-1">Choice 1</label>
     <input type="radio" name="radio-choice-1" id="radio-choice-1" tabindex="2" value="choice-1" />

     <label for="radio-choice-2">Choice 2</label>
     <input type="radio" name="radio-choice-2" id="radio-choice-2" tabindex="3" value="choice-2" />
</div>

<div>
    <label for="select-choice">Select Dropdown Choice:</label>
    <select name="select-choice" id="select-choice">
        <option value="Choice 1">Choice 1</option>
        <option value="Choice 2">Choice 2</option>
        <option value="Choice 3">Choice 3</option>
    </select>
</div>

<div>
    <label for="textarea">Textarea:</label>
    <textarea cols="40" rows="8" name="textarea" id="textarea"></textarea>
</div>

<div>
    <input type="submit" value="Submit" />
</div> 
```

```
$('#checkbox').click(function () {
    var $this = $(this);
    // $this will contain a reference to the checkbox   
    if ($this.is(':checked')) {
        $('input:not(this)').attr("disabled", true);
    } else {

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:40:38.517

```
$('#checkbox').change(function(e){
  var $form = $(this).closest('form'); // locate the form we're referring to
  // alternative method: var $form = $(this.form);      

  $form.find(':input') // grab all input elements (buttons, inputs, select lists, etc.)
    .not(this) // exclude this checkbox
    .attr('disabled', !this.checked); // mark these elements as disabled
                                      // based on the checkbox value
}); 
```

用于`.not()`排除选择中的当前元素。而且我建议绑定到，`change`而不是`click`在用户决定浏览表单的情况下。

另外，一个[jsFiddle](http://jsfiddle.net/D6EMk/)（虽然在演示中我引用`this.form`了[input element](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)，但您也可以在我上面的示例中保留它`$form`。）

# java - 如何在 java GUI 程序中获得增量显示

> ID：16085956
> 
> 赞同：1
> 
> 时间：2013-04-18T14:38:46.390
> 
> 标签：java, swing

我在从 Java 控制台迁移到 GUI 程序时遇到问题。

我的控制台程序从字典中加载所有单词。然后它依次使用每个单词来解密密码，在屏幕上显示第一个单词的解密文本，然后是第二个单词，依此类推。

当我编写 GUI 程序时，我有命令

```
jTextArea.append(decipherment); 
```

但是直到程序对每个单词都破译然后所有的破译都一起显示，而不是我想要的一个一个显示之前，什么都没有显示。

我的 GUI 程序的结构包括一个带有代码的按钮：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    decrypt();
} 
```

然后有一个部分：

```
public void decrypt(){
    ...
} 
```

包含加载字典单词的代码，对每个单词进行解密并使用方法调用显示每个解密： `jTextArea.append(decipherment);`

但是，如前所述，不会显示单独的解密。而是程序运行到最后，然后一起显示所有解密。

在阅读了其他线程后，我感觉我没有正确编写 GUI 程序，但我还没有发现我的错误是什么。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:17:48.113

阅读 Swing 教程中关于[并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)的部分，以了解 GUI 被阻止的原因。

您可以使用 a`SwingWorker`作为您的后台线程，然后随时使用`publish`结果，以便可以更新 GUI。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T14:41:32.697

您的解密很可能与您的 GUI 在同一个线程中运行，并将其锁定。尝试生成一个新线程来运行您的解密，然后在 Swing 线程中更新您的 GUI。

尝试这样的事情：

```
Thread workThread = new Thread(new Runnable() {  // run process in new thread
  public void run() {
    decrypt();
  }
});

workThread.start(); 
```

如何更新您的 Swing 线程：

```
EventQueue.invokeLater(new Runnable() {  // update Swing thread here
  public void run() {
    jTextArea.append(decipherment);
  }
}); 
```

# linux - 查找过去 24 小时内更改过的文件

> ID：16085958
> 
> 赞同：322
> 
> 时间：2013-04-18T14:38:46.663
> 
> 标签：linux, bash, find

例如，MySQL 服务器正在我的 Ubuntu 机器上运行。在过去 24 小时内，某些数据已更改。

哪些 (Linux) 脚本可以找到过去 24 小时内已更改的文件？

请列出文件名、文件大小和修改时间。

* * *

## 回答 #1

> 赞同：568
> 
> 时间：2013-04-18T14:42:08.760

要在特定特定目录及其子目录中查找过去 24 小时（最后一整天）内修改的所有文件：

```
find /directory_path -mtime -1 -ls 
```

应该是你喜欢的

`-`之前`1`很重要 - 这意味着在一天或更短的时间内发生了任何变化。相反， a `+`before`1`将意味着至少一天前发生了任何变化，而在 the 之前没有任何内容`1`则意味着它在一天前被严格更改，不多也不少。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2016-12-08T18:30:19.550

另一种更人性化的方式：

```
find /<directory> -newermt "-24 hours" -ls 
```

或者：

```
find /<directory> -newermt "1 day ago" -ls 
```

或者：

```
find /<directory> -newermt "yesterday" -ls 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-04-18T14:48:43.277

你可以这样做

```
find . -mtime 0 
```

来自`man find`：

> [The] 自上次修改每个文件以来的时间除以 24 小时，其余的将被丢弃。这意味着要匹配 -mtime 0，文件必须在过去不到 24 小时前进行过修改。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-07-24T00:01:26.680

在 GNU 兼容系统（即 Linux）上：

```
find . -mtime 0 -printf '%T+\t%s\t%p\n' 2>/dev/null | sort -r | more 
```

这将列出过去 24 小时内修改过的文件和目录 ( `-mtime 0`)。它将以可排序和人类可读的格式 ( `%T+`) 列出它们以及最后修改时间，然后是文件大小 ( `%s`)，然后是完整文件名 ( `%p`)，每个都由制表符 ( `\t`) 分隔。

`2>/dev/null`丢弃任何 stderr 输出，以便错误消息不会混淆水域；`sort -r`按最近修改的优先排序结果；并`| more`一次列出一页结果。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-10-19T18:32:14.633

对于将来登陆这里的其他人（包括我自己），添加一个 -name 选项来查找特定的文件类型，例如：`find /var -name "*.php" -mtime -1 -ls`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-07-09T11:32:16.950

这个命令对我有用

```
find . -mtime -1 -print 
```

# floating-point - PLC 结构化文本，将十进制转换为实数（浮点数）。没有得到我期望的价值。(IEEE-754)

> ID：16085959
> 
> 赞同：4
> 
> 时间：2013-04-18T14:38:50.150
> 
> 标签：floating-point, decimal, ieee-754, plc, codesys

我有一个通过 Profibus DP 与 PLC 通信的硬件，它向我发送 4 个十六进制字节的数据，即“44 79 FF FF”，并且在 PLC 程序中，我为此输入数据声明了一个 BYTE 数组。问题是在 PLC 中，我在 BYTE 数组中收到的数据是“66 121 255 255”，这是十六进制的十进制值，但我的目标是将该值转换为 REAL，当我这样做时，我不是得到我期望的价值。

我创建了一个 DWORD( **`4bytesData`**)，我将所有 BYTES 插入其中。所以在我将 4 个字节插入**`4bytesData`**字节之前是：`in1 = 68`, `in2 = 121`, `in3 = 255`&`in4 = 255`

```
4bytesData := (SHL(SHL(SHL(BYTE_TO_DWORD(in1), 8) OR BYTE_TO_DWORD(in2), 8) OR     BYTE_TO_DWORD(in3), 8) OR in4);

realValue := DWORD_TO_REAL(4bytesData); 
```

其中 in1、in2、in3 和 in4 是字节 0-3。

我得到的价值是；**`4bytesData`**= 1148846079 & **`realValue`**= 1.148846e+009

我期望从中获得的价值**`realValue`**是= 9.9999993896484375E2

如果我使用这个网站（ [IEEE754 Analyzer/Converter](http://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml)）并转换十六进制值（4479FFFF），我得到我想要的值，如果我插入十进制值（1148846079），我得到的值与我在可编程逻辑控制器。

我希望你能理解我的问题，非常感谢提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:54:15.690

你已经想通了，似乎你只是没有意识到。转换`DWORD_TO_REAL`采用存储在其中的整数（十六进制）值`4bytesData`并将其转换为 IEEE754 REAL 格式。

这不是你想要做的。 `4479FFFF`已经采用 IEEE754 REAL 格式 - 您**正在**获取该值，将 REAL 解释为 DWORD，然后将 DWORD 值转换为 REAL。简短的回答是您不需要转换 -`4bytesData`格式已经正确。

**编辑**

跟进评论：

![在此处输入图像描述](https://i.stack.imgur.com/i9wEy.png)

这里 FunctionBlock2 声明了 rIn(REAL)、rOut(REAL) 和 sets `rOut:=rIn;`。这绕过了 ST 的强制类型转换。存储在此处的数据没有任何变化`D2000`- 它是相同的二进制数据。顶部功能块将其存储到内存中，底部功能块从内存中读取它。唯一的区别是顶部梯级将其解释为 DWORD（用于显示目的），而底部梯级将其解释为 REAL。

*编辑*

我一直在阅读 Beckhoff 手册。看来您可能还有其他选择。尝试[在同一内存位置声明 DWORD 和 REAL](http://infosys.beckhoff.com/english.php?content=../content/1033/tcplccontrol/html/tcplcctrl_variables_allocated.htm&id=14211)。如果不是，也许[指针会让你这样做](http://infosys.beckhoff.com/english.php?content=../content/1033/tcplccontrol/html/tcplcctrl_%5E.htm&id=14183)（不确定类型限制是否也适用于 Beckhoff 的指针？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-19T12:30:12.377

如果有人感兴趣，我制作了这个在 Beckhoff PLC 上工作的函数，用于将 4 字节数组转换为实数：

(**声明**)

```
FUNCTION BYTE_TO_REAL : REAL
VAR_INPUT
abValueIn : ARRAY[0..3] OF BYTE;
END_VAR
VAR
pByteIn1, pByteIn2, pByteIn3, pByteIn4: POINTER TO BYTE;
rValueOut : REAL;
END_VAR 
```

(**实施**)

```
pByteIn1 := ADR(rValueOut);
pByteIn2 := ADR(rValueOut) + SIZEOF(BYTE);
pByteIn3 := ADR(rValueOut) + 2 * SIZEOF(BYTE);
pByteIn4 := ADR(rValueOut) + 3 * SIZEOF(BYTE);

(*watch out, small endians needed here*)
pByteIn1^ := abValueIn[3]; 
pByteIn2^ := abValueIn[2]; 
pByteIn3^ := abValueIn[1]; 
pByteIn4^ := abValueIn[0]; 

BYTE_TO_REAL := rValueOut; 
```

正如我发现的那样，REAL 存储在 4 个字节上，最后是强字节。我的意思是，与[IEEE-754 转换器](https://babbage.cs.qc.cuny.edu/IEEE-754/index.xhtml)相比，字节的排序方向相反，所以我必须在代码中反转它。

我没有抓住十进制 - 十六进制的原始问题。在 twincat IDE 中，值在调试中以十进制显示，但在内部，这应该没有任何区别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:17:05.840

您的字节顺序可能是错误的，并且您的例程期望相反的**[字节序](http://en.wikipedia.org/wiki/Endianness)**。尝试 FFFF7944 而不是 4479FFFF 并查看是否按预期获得 9.9999993896484375E2。此外， 1148846079 是 00F4884E 作为 IEEE754 （如果需要更改字节顺序），因此您的感知中可能有不止一个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-14T01:11:22.607

小心嵌套所有 SHL。在 V2.3 中，您只能深入 4 层。我在不同的控制器（可能是目标的编译器）上发现你可以通过嵌套得到错误的评估。最好让他们保持自己的路线。将 4 行代码放入函数 FUNCTION BYTES_TO_DWROD : DWORD 中，您就可以一遍又一遍地重用您的转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-02T14:48:13.787

使用指针将值从 DWORD 移动到 REAL。它似乎阻止了转换。

# java - 如何确定 JSON 属性的数据类型？

> ID：16085965
> 
> 赞同：8
> 
> 时间：2013-04-18T14:39:20.747
> 
> 标签：java, json

在 Java 中，我知道您可以使用 isNull() 方法检查键是否存在。有没有办法检查密钥持有什么样的数据？

考虑以下示例。

我想要一个像 JSONBody.getDataType("key") 这样的函数，它会返回 String

```
{
    "key" : "value"
} 
```

我想要一个像 JSONBody.getDataType("key") 这样的函数，它会返回 JSONObject

```
{
    "key" : { 
        "parm1" : "value1",
        "parm2" : "value2"
    }
} 
```

我想要一个像 JSONBody.getDataType("key") 这样的函数，它会返回 JSONArray

```
{
    "key" : [
        "value1",
        "value2",
        "value3"
    ]
} 
```

我想要一个像 JSONBody.getDataType("key") 这样的函数，它会返回 Boolean

```
{
    "key" : true
} 
```

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T15:49:02.293

```
JSONObject stuff = new JSONObject(whatever);
Object thing = stuff.get("key");
String classNameOfThing = thing.getClass().getName();
Systen.out.println("thing is a " + classNameOfThing);
if (thing instanceof Integer) {
    System.out.println("thing is an Integer");
} 
```

# linux-kernel - ARM Linux 页表条目格式——未使用的位？

> ID：16085976
> 
> 赞同：7
> 
> 时间：2013-04-17T19:29:56.250
> 
> 标签：linux-kernel, arm, virtual-memory

我需要使用 PTE 的两位来存储我的内核模块在拦截页面保护错误时将使用的自定义“状态”值。

我正在开发具有 ARM Cortex A9（我相信是 ARM v7）的 Galaxy Nexus。Linux 内核版本 3.0.31。Linux PTE 定义如下（来自`arch/arm/include/asm/pgtable.h`：

```
/*
 * "Linux" PTE definitions.
 *
 * We keep two sets of PTEs - the hardware and the linux version.
 * This allows greater flexibility in the way we map the Linux bits
 * onto the hardware tables, and allows us to have YOUNG and DIRTY
 * bits.
 *
 * The PTE table pointer refers to the hardware entries; the "Linux"
 * entries are stored 1024 bytes below.
 */
#define L_PTE_PRESENT       (_AT(pteval_t, 1) << 0)
#define L_PTE_YOUNG         (_AT(pteval_t, 1) << 1)
#define L_PTE_FILE          (_AT(pteval_t, 1) << 2) /* only when !PRESENT */
#define L_PTE_DIRTY         (_AT(pteval_t, 1) << 6)
#define L_PTE_RDONLY        (_AT(pteval_t, 1) << 7)
#define L_PTE_USER          (_AT(pteval_t, 1) << 8)
#define L_PTE_XN            (_AT(pteval_t, 1) << 9)
#define L_PTE_SHARED        (_AT(pteval_t, 1) << 10)    /* shared(v6), coherent(xsc3) */ 
```

仅通过查看此定义列表，似乎第 3、4、5 位以及第 11 位及更高位可用。但是，我知道 20 个最高有效位 [31:12] 用于页码（我相信是 PFN），所以我不能使用其中任何一个。

**我可以自由使用位 [5:3] 还是会产生问题？**我花了几个小时寻找这个问题的答案，但我只能找到关于 Linux 如何将 PTE 位用于 x86 架构的文档。

## **更新**：

我已经编制了一份我认为每个 PTE 位的清单。

```
bit  0     PRESENT
bit  1     YOUNG
bit  2     MEMORY TYPES 0  B          FILE (only when not PRESENT)
bit  3     MEMORY TYPES 1  C
bit  4     AP0 
bit  5     AP1
bit  6     DIRTY
bit  7     RD_ONLY
bit  8     USER
bit  9     XN
bit 10     SHARED
bit 11     EXT_NG (no idea what this is)

bit 12     |---|
...        |PFN|
bit 31     |---| 
```

不幸的是，我看不到指定*没有*读取或写入权限的方法，但不知何故`mmap`似乎`PROT_NONE`仍然有效。我知道如何指定读取或 R/W 权限，但我仍然需要知道如何将页面设置为没有权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T21:42:57.390

您可以尝试清除 pte 中的当前位，这会导致页面错误吗？

# azure - Azure Appcmd 启动任务，为所有站点设置 preloadEnabled

> ID：16085986
> 
> 赞同：15
> 
> 时间：2013-04-18T14:40:06.717
> 
> 标签：azure, iis-8, appcmd

好的，所以我基本上正在使用新的 IIS 8.0 应用程序初始化模块实现天蓝色预热。

我有一个启动任务（cmd 文件），它基本上已经取消了 IIS 中的空闲超时和回收时间。我正在尝试向其中添加应用程序初始化。

我意识到我需要设置两件事；`startMode`和`preloadEnabled`。

我的应用程序在 IIS 中有许多站点（大约 10 个），所有站点都由 Azure 随机命名，并带有自己随机命名的应用程序池。

`startMode`很容易，因为可以通过执行以下操作将其设置为应用程序池默认值：

```
%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.startMode:AlwaysRunning 
```

这将其应用于所有应用程序池。

**然而**，这并不容易`preloadEnabled`。

要设置`preloadEnabled`，您可以将其用于命名站点：

```
%windir%\system32\inetsrv\appcmd set config -section:sites [name='MySite'].applicationDefaults.preloadEnabled 
```

但我需要它适用于我不知道名称的**所有**`startMode`网站（它们是随机的），一种默认值（我如何设置）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T13:12:17.090

找了一天，终于找到了。它基本上在 appcmd 中使用循环，通过使用管道将命令链接在一起（有点像`for`循环）。这里是：

```
%systemroot%\system32\inetsrv\AppCmd.exe list app /xml | %windir%\system32\inetsrv\appcmd set site /in -applicationDefaults.preloadEnabled:True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T20:28:53.407

要使用 appcmd 在应用程序级别（而不是站点级别）`IIS 8.5`设置，应使用以下命令。`preload`

```
appcmd set app "Default Web Site/ApplicationName" /preloadenabled:true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T07:42:06.357

对于仍在使用 IIS 7.5 的用户：

*   安装[应用程序初始化](http://www.iis.net/downloads/microsoft/application-initialization)模块以启用对 preloadEnabled 的支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-18T08:55:58.263

在 windows Server 2012 R2 和 IIS 8.5 中进入 CMD Adminitrator。

> cd C:\Windows\System32\inetsrv && appcmd list app /xml | appcmd 设置站点 /in -applicationDefaults.preloadEnabled:True /commit:apphost

# c# - 实现泛型类的集合

> ID：16085990
> 
> 赞同：2
> 
> 时间：2013-04-18T14:40:11.877
> 
> 标签：c#, generics, collections

我正在尝试创建一个像这样的自定义类，如下所示。

```
public MyClass<T> 
{
    public string Value1 { get; set; }
    public T Value2 { get; set; }
    public string Value3 { get; set; }
} 
```

T 的值可以是 string 或 int 或 datetime 。我假设我可以创建此类的新实例，例如

```
MyClass<int> intclass = new MyClass<int>();
MyClass<String> stringclass=new MyClass<String>(); 
```

等等。

是否可以创建上述类的集合，我可以将 intclass 和 stringclass 放入自定义集合中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T14:48:57.910

如果你想混合不同的泛型类型（所以有一个包含两者的集合`MyClass<int>`和`MyClass<string>`）你需要定义一些通用的基本类型*或*使用非强类型的集合：

```
public class MyClass<T> : MyClass
{
    public T Value2 { get; set; }
}

public class MyClass
{
    public string Value1 { get; set; }
    public string Value3 { get; set; }
} 
```

然后你可以定义一个集合，如：

```
List<MyClass> list = new List<MyClass>();
list.Add(new MyClass<int>());
list.Add(new MyClass<string>()); 
```

但是，您必须在检索条目时转换结果才能访问它们的`Value2`属性。

避免基类的另一种选择是简单地使用`List<object>`：

```
List<object> list = new List<object>();
list.Add(new MyClass<int>());
list.Add(new MyClass<string>()); 
```

但这与上面的问题相同，但似乎更糟（因为你可以在那里存储*任何东西*）

编辑：有多种方法可以`Value2`在基本的 non-generic 中允许无类型访问`MyClass`。一种方法是在基类上定义它的“无类型”版本，并在执行类型检查的子类上覆盖它：

```
public abstract class MyClass
{
    public string Value1 { get; set; }
    public abstract object Value2Untyped { get; set; }
    public string Value3 { get; set; }
}

public class MyClass<T> : MyClass
{
    public T Value2 { get; set; }

    public override object Value2Untyped
    {
        get
        {
            return Value2;
        }
        set
        {
            Value2 = (T)value;
        }
    }
} 
```

然后，对于针对基本 non-generic 键入的所有对象或集合`MyClass`，您仍然可以访问值，甚至可以在运行时设置值。（`set`当然是可选的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:43:03.637

你的意思是这样的？

```
List<MyClass<int>> intClassList = new List<MyClass<int>>();
intClassList.Add(new MyClass<int>()); 
```

# c - GCC构造函数不执行

> ID：16085992
> 
> 赞同：3
> 
> 时间：2013-04-18T08:08:09.307
> 
> 标签：c, gcc

这个问题是关于 gcc 构造函数的，编译和链接是正确的，但它没有运行。

有交流：

```
UTEST_BEGIN()
UID(a_test)
{
    printf("a test");
    return true;
}
UTEST_END(a) 
```

bc 是类似的：

```
UTEST_BEGIN()
UID(b_test)
{
    printf("b test");
    return true;
}
UTEST_END(b) 
```

代码对象正在使用 UID() 链接一些测试函数。我的第一个版本将 UTEST_BEGIN() UTEST_END() 添加到 UID() 中，最后我意识到 UTEST_BGIN() UTEST_END() 不是必需的，当我更改它们时会得到不可预测的结果。

当我更改 UTEST_BEGIN()、UID()、UTEST_END() 的定义时，我得到了不同的结果。

基本思想来自[can-i-auto-collect-a-list-of-function-by-c-macro](https://stackoverflow.com/questions/16007214/can-i-auto-collect-a-list-of-function-by-c-macro)！

测试1：

```
#define UTEST_BEGIN()                                   \
static const bool __m_en = true;                        \
static struct __uti *__m_uti_head = NULL;

bool utest_item_list_add_global(struct __uti *uti);
#define UID(f)                                                          \
static bool __uti_##f(void);                                            \
__attribute__((constructor))                                            \
static void uti_construct_##f(void)                                     \
{                                                                       \
    printf("%s\n", #f); \
    static struct __uti __m_uti_##f = {NULL, this_file_id, __uti_##f, #f };       \
    utest_item_list_add_global(&__m_uti_##f);                           \
}                                                                       \
static bool __uti_##f(void)

bool unit_test_item_pump_do(int file_id, bool (*f)(void), const char *f_name);
#define UTEST_END(file_name)                                            \
bool unit_test_##file_name(void)                                        \
{                                                                       \
    if (!__m_en)                                                        \
            return true;                                                \
    struct __uti *cur;                                                  \
    for(cur = __m_uti_head; cur; cur = cur->next) {                     \
            unit_test_set_run_last_line(__LINE__);                      \
            if (!unit_test_item_pump_do(this_file_id, cur->f, cur->f_name)) \
                    return false;                                       \
    }                                                                   \
    return true;                                                        \
} 
```

我得到了正确的结果。我可以通过链接调用 __uti_a_test() 和 __uti_b_test() 。事实上，__uti_xxx() 链接并没有与 __m_uti_head 关联，所以我想删除 UTEST_BEGIN() 和 UTEST_END()。

运行 gcc -E ac，宏扩展为：

```
static const bool __m_en = 1; 
static struct __uti *__m_uti_head = ((void *)0);

static bool __uti_a_test(void); 
__attribute__((constructor)) 
static void uti_construct_a_test(void) 
{ 
    static struct __uti __m_uti_a_test = {((void *)0), file_id_a, __uti_a_test, "a_test" }; 
    utest_item_list_add_global(&__m_uti_a_test); 
} 
static bool __uti_a_test(void)
{
    printf("a test");
    return 1;
}

bool unit_test_a(void) 
{ 
    if (!__m_en) 
        return 1; 
    struct __uti *cur; 
    for(cur = __m_uti_head; cur; cur = cur->next) { 
        unit_test_set_run_last_line(19); 
        if (!unit_test_item_pump_do(file_id_a, cur->f, cur->f_name)) 
            return 0; 
    } 
    return 1; 
} 
```

测试 2：

```
#define UTEST_BEGIN()

bool utest_item_list_add_global(struct __uti *uti);
#define UID(f)                                                          \
static bool __uti_##f(void);                                            \
__attribute__((constructor))                                            \
static void uti_construct_##f(void)                                     \
{                                                                       \
    printf("%s\n", #f);                                                 \
    static struct __uti __m_uti_##f = {NULL, this_file_id, __uti_##f, #f };       \
    utest_item_list_add_global(&__m_uti_##f);                           \
}                                                                       \
static bool __uti_##f(void)

#define UTEST_END(file_name) 
```

UID() 的定义与测试 1 相同。我将 UTEST_BEGIN() 和 UTEST_END() 保留为空白。编译和链接是正确的，但是 uti_construct_a_test() 和 uti_construct_b_test() 不执行。

运行 gcc -E ac，宏扩展为：

```
static bool __uti_a_test(void); 
__attribute__((constructor)) 
static void uti_construct_a_test(void) 
{ 
    static struct __uti __m_uti_a_test = {((void *)0), file_id_a, __uti_a_test, "a_test" }; 
    utest_item_list_add_global(&__m_uti_a_test); 
} 
static bool __uti_a_test(void)
{
    printf("a test");
    return 1;
} 
```

utest_item_list_add_global() 存在于其他 .c 文件中，该函数将节点添加到链接中：

```
static struct __uti *m_uti_head = NULL;
bool utest_item_list_add_global(struct __uti *uti)
{
        if (NULL == m_uti_head) {
                m_uti_head = uti;
                return true;
        }

        struct __uti *tail = m_uti_head;
        while (NULL != tail->next)
                tail = tail->next;
        tail->next = uti;
        return true;
} 
```

扩展的宏似乎是正确的。我认为问题出在链接阶段，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:56:41.277

我发现 gcc**属性**（（构造函数））具有以下事实：

cons.c 是一个包含构造函数的文件。

1.  如果 cons.c 文件中只有构造函数，将其编译为静态库，然后与 main() 链接，构造函数将被忽略。
2.  如果 main.c 中调用的函数在 cons.c 中存在，则将 cons.c 编译为静态库，然后将其与 main() 链接，构造函数将在 main 之前调用。
3.  如果使用“gcc main.c cons.c”，构造函数将在main之前调用。

缺点：

```
#include <stdio.h>
static void __attribute__((constructor)) construct_fun(void)
{
        printf("this is a constructor\n");
}

void cons(void)
{
        printf("this is cons\n");
} 
```

**测试1：**

主.c：

```
#include <stdio.h>
int main(void)
{
        printf("this is main\n");
} 
```

编译：

```
gcc -c cons.c
ar cqs libcon.a cons.o
gcc main.c libcon.a 
```

输出是：这是主要的

**测试2：**

主.c：

```
#include <stdio.h>
extern void cons(void);
int main(void)
{
        cons();
        printf("this is main\n");
} 
```

编译：

```
gcc -c cons.c
ar cqs libcon.a cons.o
gcc main.c libcon.a 
```

输出：

```
this is a constructor
this is cons
this is main 
```

**测试3：**

主程序

```
#include <stdio.h>
int main(void)
{
        printf("this is main\n");
} 
```

编译：

```
gcc main.c cons.c 
```

输出：

```
this is a constructor
this is main 
```

运行“gcc -v”，输出：

使用内置规范。COLLECT_GCC=gcc COLLECT_LTO_WRAPPER=/usr/libexec/gcc/i686-redhat-linux/4.7.2/lto-wrapper 目标：i686-redhat-linux 配置：../configure --prefix=/usr --mandir=/ usr/share/man --infodir=/usr/share/info --with-bugurl= [http://bugzilla.redhat.com/bugzilla](http://bugzilla.redhat.com/bugzilla)--enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --disable-build-with-cxx --disable-build-poststage1-with-cxx --with-system- zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c, c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --enable-java-awt=gtk --disable-dssi --with-java-home =/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile --enable-java-maintainer-mode --with-ecj-jar=/usr/share/ java/eclipse-ecj.jar --disable-libjava-multilib --with-ppl --with-cloog --with-tune=generic --with-arch=i686 --build=i686-redhat-linux 线程模型： posix gcc 版本 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)

我的问题是：

.c 文件中只存在构造函数，将其编译为静态库，为什么 gcc 忽略该构造？如何避免？

# ios - 在 iOS 中为视图使用 HTML 或任何标记语言

> ID：16085993
> 
> 赞同：5
> 
> 时间：2013-04-18T14:40:22.580
> 
> 标签：ios, user-interface

在我看来，以编程方式在 iOS 上实现接口过于冗长。当然，你可以在 IB 中做到这一点，但我喜欢重用我的代码，我讨厌不得不在 10 个不同的地方更改一件事，或者将我的界面分散到 100 个 IB 文件中以避免这种情况。另外，IB 很慢，虽然我有新一代的 Macbook Pro，但打开大文件还是要等 3-4 秒，更不用说缩放不足，而且一般的笨拙让我一听到就跑。

现在，对于手头的问题，是否有任何开源工作或其他方式来描述布局（不一定是视图“逻辑”），只是 HTML 或任何其他标记语言中的布局。

到目前为止，我已经看到它`CALayer`有一个`style`可以使用的属性，但是，它不支持定位。此外，我尝试使用`UIWebView`，但它似乎迫使我在 HTML 代码中也有我的逻辑，我不想这样做，而且它更慢。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:16:51.767

你可以看看[Nimbus CSS](http://docs.nimbuskit.info/NimbusCSS.html)。它完全符合您在 CSS 中的要求。它支持定位并且非常稳定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T13:16:39.163

我意识到这个问题已经有几年的历史了，但如果其他人正在寻找类似的东西，请查看 MarkupKit：

[https://github.com/gk-brown/MarkupKit](https://github.com/gk-brown/MarkupKit)

这是我创建的一个开源框架，允许您在标记中构建原生 iOS 应用程序。例如，您可以像这样创建一个标签实例：

```
<UILabel text="Hello, World" font="System 24" textColor="#ff0000"/> 
```

而不是这个：

```
UILabel *label = [UILabel new];

[label setText:@"Hello, World"];
[label setFont:[UIFont systemFontOfSize:24];
[label setTextColor:[UIColor colorWithRed:1.0 green:0.0 blue:0.0 alpha:1.0]]; 
```

它还支持动态本地化和类似 CSS 的样式等。

完整的项目文档可以在这里找到：

[https://github.com/gk-brown/MarkupKit/blob/master/README.md](https://github.com/gk-brown/MarkupKit/blob/master/README.md)

wiki 中提供了示例和其他信息：

[https://github.com/gk-brown/MarkupKit/wiki](https://github.com/gk-brown/MarkupKit/wiki)

希望你觉得它有用。

# ios - 如何对应用程序中的音乐进行编程以在特定时间播放？

> ID：16085994
> 
> 赞同：0
> 
> 时间：2013-04-18T14:40:26.860
> 
> 标签：ios, audio, core-audio

我想创建一个可以让我进入 iOS 音乐应用程序的应用程序，例如子视图控制器，但我不确定我该怎么做。你们谁能告诉我我能做什么？我还想学习如何在特定时间触发播放列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T14:44:38.987

您不能在 iOS 中的另一个应用程序中展示 iOS 音乐应用程序。您需要查看[iPod Library Access Programming Guide](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008765)并自己构建功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:45:37.687

您是否已经阅读过 Apple 的文档和教程？

[https://developer.apple.com/technologies/ios/audio-and-video.html](https://developer.apple.com/technologies/ios/audio-and-video.html)

您可以阅读 iPod 库

# android - 如何在 android 中使用 sdl gui (SDL_SetVideoMode,....)？

> ID：16085999
> 
> 赞同：1
> 
> 时间：2013-04-18T14:40:37.913
> 
> 标签：android, android-ndk, cross-platform, video-streaming, sdl

我打算使用 SDL 库在 android 屏幕中呈现一些视频流。为此，我首先为 android ICS 版本交叉编译 sdl 库。

然后我创建了一个小的 jni 文件，我只在我的方法中放了这 2 条指令：

```
 SDL_Surface *screen;
 LOGI("screen");
 screen = SDL_SetVideoMode(320, 240, 0, 0); 
```

但是无论我在 SDL_SetVideoMode(,,,) 中输入什么值，我总是会遇到分段错误（segv 11 代码=1）。

我想知道这是在 android 屏幕上呈现 sdl gui 的正确方法吗？

我现在真的被卡住了，我不知道如何绕过这个错误！！

如果有人可以帮助我，我将不胜感激！！！