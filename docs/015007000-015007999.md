# StackOverflow 问答 15007000-15007999

# macos - 在 mac OS 10.5.7 上将 gcc4.0.1 更新为 gcc4.2.1

> ID：15007000
> 
> 赞同：0
> 
> 时间：2013-02-21T16:12:20.343
> 
> 标签：macos, gcc

我想要我的 gcc 编译器。

我正在运行 mac OS 10.5.7。

我下载了具有 gcc4.0.1 的 Xcode3.0，它似乎工作正常。但是现在我需要安装的程序似乎需要gcc4.2.1。有简单的升级/安装方法吗？

我下载了 gcc4.2.1，但遇到了无数其他程序，我必须安装这些程序才能编译 gcc4.2.1 ( [http://gcc.gnu.org/install/prerequisites.html](http://gcc.gnu.org/install/prerequisites.html) )。我似乎无法在我的计算机上找到很多它们，例如。ISO C++98 编译器。

如果有人对如何最好地进行，我将不胜感激？

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:20:08.370

Xcode 3.1 带来了 gcc 4.2 并支持 10.5，所以改为使用它。我相信最新版本是 3.1.4。

# hadoop - hadoop上的分布式数据分配

> ID：15007005
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:12:32.817
> 
> 标签：hadoop, replication

我想问几台物理机上的几个虚拟机中的hadoop数据分配。我找到了设计分配策略的论文，将文件块的副本分配给不同的物理机并保持每台物理机的块数平衡。以确保在一台物理机器（包含多个虚拟机）上没有全部堆栈的文件块副本。

我想尝试执行那份文书工作。我一直坚持如何配置那些在由多个 VM 组成的分布式物理机上均匀分配的文件块副本。它是在 mapreduce 算法中编码还是在 hdfs 安装中配置？在纸面上，他们说他们将虚拟节点的位置信息添加到网络拓扑中。虚拟节点的网络位置可能会从 /default-rack 更改为 /Phy0。在物理节点的网络位置下方添加一层。

我不知道，如何在 hadoop 中配置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:48:04.343

hadoop 中的这种配置称为机架感知。

使用 core-site.xml 中的属性“topology.script.file.name”配置机架感知。

如果未配置“topology.script.file.name”，则为任何 IP 地址传递 /default-rack，即，所有节点都放置在同一个机架上。

在 hadoop 中配置机架感知包括两个步骤，

1.  在 core-site.xml 中配置“topology.script.file.name”，

    `<property>`

    `<name>topology.script.file.name</name>`

    `<value>core/rack-awareness.sh</value>`

    `</property>`

2.  根据需要实现 rack-awareness.sh 脚本，可以在此处找到示例 rack-awareness 脚本，

    [http://wiki.apache.org/hadoop/topology_rack_awareness_scripts](http://wiki.apache.org/hadoop/topology_rack_awareness_scripts)

# sharepoint-2007 - SharePoint：编辑时的字段值与显示时的字段值不同

> ID：15007008
> 
> 赞同：0
> 
> 时间：2013-02-21T16:12:38.333
> 
> 标签：sharepoint-2007

当我通过 DispForm（单个项目）或列表的任何视图查看某个字段时，我看到了某个值。但是当我选择编辑该字段时，显示的有效值与我在任何视图中看到的不同。

这种情况有时会发生——经常让人不舒服。

我什至无法想象这怎么会发生。有任何想法吗？

这是来自 AllItems 的一行： ![在此处输入图像描述](../Images/58dc1de01ac477877dde640cab8d791e.png)

这是编辑模式下的那一行： ![在此处输入图像描述](../Images/4ead5ac2f219fe69c6b23be909948c48.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:32:23.903

以下是我原始帖子中描述的情况如何解决的。

正如 Ondreij 所问的，有问题的字段是 Choice 字段。发送到 SharePoint 的电子邮件中提供了一个状态字段，我使用该值填充相关字段。

似乎发生的事情是有时字符串被写入*列表的某些部分*。当您在写入后检查字段的值时（使用编辑工具），我发现“真实”值没有从默认的“0”改变。

有几个问题。在一种情况下，有人将选择值之一列为“...BC...”，其中原始状态字符串使用“...Bureau Coordinator...”，这很容易。另一种情况是在选择字符串中有“...To...”，其中状态值作为“...to...”传递，这是偷偷摸摸的。

但最大的惊喜是状态 4，我们都无法分辨状态值和选择值之间的任何区别。但肯定有区别，因为如以下代码所示，将状态字符串替换为 Choice 字符串可以让一切按设计完成。

if(status.indexOf("2 - Sent") > -1) status = "2 - Sent To BC";

if(status.indexOf("3 - Sent") > -1) status = "3 - Sent To GFSS";

if(status.indexOf("4 - 已接受") > -1) status = "4 - 已被 GFSS 接受";

感谢 Ondreij 提出了一些导致解决方案的想法。

# windows-phone-7 - 无法获得 wp7 的确切市场，我可以在其中上传 wp7 应用程序

> ID：15007011
> 
> 赞同：0
> 
> 时间：2013-02-21T16:12:46.593
> 
> 标签：windows-phone-7

我开发了一个 windowsphone7 应用程序，我使用了 Visual Studio 2010 和 WP7 SDK 来开发该应用程序，并且我有一个注册为开发人员帐户。

现在该应用程序已准备好在市场上上传，我有 XAP 文件。

但确切的问题是我无法获得可以上传我的 XAP 文件的确切链接。

我尝试在互联网上进行各种搜索，我可以获得上传 WP8 应用程序但不是 WP7 应用程序的链接。

那是在询问 .appxupload 文件，谁能给我确切的链接，我可以在其中上传我的 windowsphone7 应用程序（XAP 文件）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:27:51.813

WP8 和 WP7 应用程序都使用相同的仪表板。 [http://dev.windowsphone.com](http://dev.windowsphone.com)。当您将 xap 上传到网站时，它会检测并确定您的目标设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:08:21.020

我得到了解决方案，实际上我的帐户没有“ **windows phone**开发者订阅”只有“ **windows store**开发者订阅”，我订阅了 windows 手机开发者订阅，现在一切都很好。我可以上传我的 xap 文件。

# django - Django editable=False 并且仍然显示在字段集中？

> ID：15007013
> 
> 赞同：7
> 
> 时间：2013-02-21T16:12:47.183
> 
> 标签：django, django-admin

我的models.py中有一个图像字段...

```
 qr_image = models.ImageField(
        upload_to="public/uploads/",
        height_field="qr_image_height",
        width_field="qr_image_width",
        null=True,
        blank=True,
        editable=False
    ) 
```

当它`editable=False`尝试显示它时，我得到一个令人讨厌的错误。我不希望该字段可编辑，但我确实希望图像显示在管理员“**编辑**”页面中，即**字段集**

我是 Django 的新手，有人可以告诉我这是否可能并在这里指出我正确的方向吗？

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-05-10T19:19:19.707

如果您有这样的 ModelAdmin：

```
class MyModelAdmin(admin.ModelAdmin):

    fieldsets = [
        ('Fieldset', {'fields': ['model_field', 'another_field', 'readonly_field']}),
    ] 
```

where `readonly_field`has `editable=False`or if it is a DateTimeField`auto_now_add=True`然后访问模型的管理页面将导致找不到字段错误。

要在您的字段集中包含一个只读字段，请`readonly_fields`像这样包含：

```
class MyModelAdmin(admin.ModelAdmin):

    fieldsets = [
        ('Fieldset', {'fields': ['model_field', 'another_field', 'readonly_field']}),
    ]
    readonly_fields = ('readonly_field',) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T16:20:12.583

实现此目的的一种简单方法是在 ModelAdmin 中将该字段设为只读：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.readonly_fields)

# php - jQuery，Ajax 从数据库中获取数据

> ID：15007017
> 
> 赞同：0
> 
> 时间：2013-02-21T16:12:54.670
> 
> 标签：php, jquery, sql, ajax, variables

我正在尝试通过 jQuery、Ajax 和 PHP 从 SQL 数据库中获取数据。

这是jQuery代码

```
$.ajax({
    url: 'OpenQuiz.php',
    data: '',
    dataType:'json',
    success: function(data) {
        var one = data[0];
    }
}

$(document).ajaxComplete(function(event,request,settings) {
    alert("check");
} 
```

这是名为“OpenQuiz.php”的 PHP 文件末尾的 json 编码行

```
echo json_encode($QuizName);
echo json_encode($options);
echo json_encode($votes);
echo json_encode($row_num);
echo json_encode($percentage);
echo json_encode($TruncPercentage); 
```

请注意：$options、$votes、$Percentage 和 $TruncPercentage 都是二维数组。$row_num 是一个整数。$Quiz_Name 是一维数组。

我发现 jQuery 运行良好并且调用了 ajax 请求，因为“检查”的警报框出现了。问题是我不知道如何在变量转移后访问它们。我知道它与 data[0] 有关，但我真的不明白“data[0]”是什么意思或它代表什么。基本上如何访问我在 PHP 文件中使用 json_encode 发送的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:16:27.913

data[0] is the first json_encoded item in the array returned. You shouldn't json_encode everything separately, you should build an array and json_encode this.

```
$items = array('QuizName'=>$QuizName,'options'=>$options, ... ,'TruncPercentage'=>$TruncPercentage);

echo json_encode($items); 
```

Then you retrieve with:

```
success: function(data) {
    var qn = data.QuizName,
        opt = data.options;
} 
```

And so on for each item, with data.[whatever], and [whatever] being the name of the item you gave it in the array. I know I originally said to retrieve by index (data[0]), but I prefer to retrieve explicitly so that the code is more maintainable.

As a side note, you can eliminate the `datatype:'json'` declaration in your ajax call by simply setting the header correctly on the PHP side:

```
header('Content-type: application/json'); 
```

Placing that at the top of the document will force the server to recognize the page as json. Far more consistent and explicit than having jQuery look for it.

# eclipse - Eclipse(pydev) 将文本编码 (utf-8) 更改为乱码

> ID：15007021
> 
> 赞同：1
> 
> 时间：2013-02-21T16:12:58.070
> 
> 标签：eclipse, encoding, utf-8, python-3.x, pydev

我正在使用 eclipse juno + pydev 开发 python 项目。

今天我打开我的 Eclipse，我看到一些希伯来文字变成了胡言乱语，“א”变成了“...？” 其他一些字母也发生了变化。

我尝试通过更改下一个值将文本编码更改为 UTF-8：

1.  windows -> 首选项 -> 工作区 -> 文本文件编码 -> 其他：UTF-8
2.  windows -> 首选项 -> 内容类型 -> 文本 -> UTF-8 + 更新
3.  项目 -> 属性 -> 资源 -> 文本文件编码 -> UTF-8

到目前为止没有运气，我仍然看到胡言乱语。

我还尝试从 TFS 恢复以前签入的副本（早期版本），但问题仍然存在。

有没有办法解决它？

# java - jslint-maven-plugin 不读取 jsSourceFolder 仍然读取默认值

> ID：15007028
> 
> 赞同：0
> 
> 时间：2013-02-21T16:13:17.413
> 
> 标签：java, maven, maven-plugin, jslint

我正在尝试使用 jslint maven 插件。我将它包含在我的 pom 文件中

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jslint-maven-plugin</artifactId>
            <version>1.0.1</version>
            <executions>
                <execution>
                    <id>execute-jslint</id>
                    <goals>
                        <goal>jslint</goal>
                        <goal>test-jslint</goal>
                    </goals>
                    <configuration>
                        <sourceJsFolder>
                            <file>${basedir}/src/main/webapp/static/js/</file>  
                        </sourceJsFolder>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

但是当我运行这个命令时，`maven jslint:jslint`我得到了这个错误

```
 [ERROR] Failed to execute goal org.codehaus.mojo:jslint-maven-plugin:1.0.1:jslint (default-cli) on project webshop-core: Execution default-cli of goal org.codehaus.mojo:jslint-maven-plugin:1.0.1:jslint failed: basedir /home/mymac/project1/src/main/js does not exist -> [Help 1] 

```

根据此链接[http://mojo.codehaus.org/jslint-maven-plugin/jslint-mojo.html#sourceJsFolder](http://mojo.codehaus.org/jslint-maven-plugin/jslint-mojo.html#sourceJsFolder)的参数，它仍然从默认值中读取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T22:04:26.103

这里有两个问题。首先，您不需要文件标签，因为 maven 知道您传递给 sourceJsFolder 的字符串是路径。其次，当您调用`mvn jslint:jslint`您正在使用的执行时`default-cli`，您还没有`sourceJsFolder`为此执行指定变量。你有两个选择；您可以将 sourceJsFolder 配置选项移到执行之外，如下所示：

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jslint-maven-plugin</artifactId>
        <version>1.0.1</version>
        <configuration>
            <sourceJsFolder>${basedir}/src/main/webapp/static/js</sourceJsFolder>
        </configuration>
        <executions>
            <execution>
        ... 
```

或者您也可以指定`default-cli`执行的配置：

```
<plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jslint-maven-plugin</artifactId>
        <version>1.0.1</version>
        <executions>
            <execution>
                <id>default-cli</id>
                <configuration>
                    <sourceJsFolder>${basedir}/src/main/webapp/static/js</sourceJsFolder>
                </configuration>
                ... 
```

# php - PHP date() 的年份值错误

> ID：15007030
> 
> 赞同：0
> 
> 时间：2013-02-21T16:13:21.827
> 
> 标签：php, date, datetime, date-range

给定开始日期和结束日期，我需要生成一个包含年份和星期值的数组。例如：

开始日期：**2013-01-01**

结束日期：**2013-02-23**

生成的数组：

```
数组 ( [0] => 数组 ( [week] => 01 [year] => 2013 )
[1] => 数组（[周] => 02 [年] => 2013 年）
[2] => 数组（[周] => 03 [年] => 2013 年）
[3] => 数组（[周] => 04 [年] => 2013 年）
[4] => 数组（[周] => 05 [年] => 2013 年）
[5] => 数组（[周] => 06 [年] => 2013 年）
[6] => 数组（[周] => 07 [年] => 2013 年）
[7] => 数组（[周] => 08 [年] => 2013 ））
```

这是我用来生成它的代码：

```
public static function getYearWeekRange($startdate, $enddate) {
    $array = array();
    $starttime = strtotime($startdate);
    $endtime = strtotime($enddate);
    while ($starttime <= $endtime) {
        $year = date('Y', $starttime);
        $week = date('W', $starttime);
        $array[] = array('week' => $week, 'year' => $year);
        $starttime = strtotime('+1 week', $starttime);
    }
    return $array;
} 
```

* * *

我的问题是，当我生成某些日期范围时，我在 2013 年初没有得到正确的年份值。例如：

开始日期：**2012-01-01**

结束日期：**2013-02-23**

在这种情况下，它应该有一个年 = 2013 和周 = 01 的子数组，实际上它的年值等于 2012。

例如，如果我将开始日期切换为 2013-01-05，则没有问题。

谁能提供一个解决方案来保证我的年份和周值始终正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:34:01.200

我能够使用以下方法解决我的问题：

```
public static function getWeekRange($startdate, $enddate) {
    $array = array();
    $p = new DatePeriod(
        new DateTime($startdate), 
        new DateInterval('P1W'), 
        new DateTime($enddate)
    );
    foreach ($p as $w) {
        $array[] = array('year' => $w->format('o'), 'week' => $w->format('W'));
    }
    return $array;
} 
```

# c# - 在指定列上加入两个列表

> ID：15007031
> 
> 赞同：7
> 
> 时间：2013-02-21T16:13:23.453
> 
> 标签：c#, list

我正在尝试在 ID 列上加入两个列表（flist 和 slist）。下面显示列表定义、类定义、列表内容和所需结果。

```
List<first> flist= new List<first>();
List<second> slist= new List<second>();

public class first
{
   public string name { get; set; }
   public int ID{ get; set; }
   public string itemAttr { get; set; }
}
public class second
{
   public int ID{ get; set; }
   public string itemAttr{ get; set; }
} 
```

列出内容

```
flist:
apples | 1
bananas| 2
trees  | 3

slist:
1      | fruit
3      | not-fruit 
```

期望的结果：

```
flist:
apples   |   1     | fruit
bananas  |   2     |
trees    |   3     | not-fruit 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T16:19:14.333

```
List<first> flist= new List<first>();
List<second> slist= new List<second>();

var result = from f in flist
             join s in slist on f.ID equals s.ID into g
             select new {
                 f.name,
                 f.ID,
                 itemAttr = g.Any() ? g.First().itemAttr : null
             }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:33:23.567

尝试这个

```
foreach(var f in first)
{
    foreach(var s in second)
    {
        if(f.ID == s.ID)
        {
            f.fAttr = item.itemAtrr;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:46:44.460

有什么问题？创建一个新类，其中第三个带有参数：ID、名称、itemAttr。使用此类创建新列表，并将写入所需位置所需的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:24:00.493

您可以在 Linq 中使用“左外”连接：

```
var joined = from l1 in flist
             join l2 in slist on l1.ID equals l2.ID into gj
             from l2_sub in gj.DefaultIfEmpty()
             select new { 
                 name = l1.name, 
                 ID = l1.ID, 
                 itemAttr = l2_sub == null ? String.Empty : l2_sub.itemAttr 
             }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T16:29:46.927

```
namespace WindowsFormsApplication26
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            List<first> flist = new List<first>();
            List<second> slist = new List<second>();

            flist.Add(new first("apples", 1));
            flist.Add(new first("bananas", 2));
            flist.Add(new first("trees", 3));

            slist.Add(new second(1, "Fruit"));
            slist.Add(new second(2, ""));
            slist.Add(new second(3, "Not-Fruit"));

            var result = (from t in flist
                          join x in slist
                          on t.ID equals x.ID

                          select new
                          {
                              Name = t.name,
                              Id = t.ID,
                              attrib = x.itemAttr

                          }).ToList();
        }

        public class first
        {
            public first()
            {

            }

            public first(string n, int id)
            {
                name = n;
                ID = id;
            }

            public string name { get; set; }
            public int ID { get; set; }

        }

        public class second
        {
            public second()
            {

            }

            public second(int id, string itm)
            {
                ID = id;
                itemAttr = itm;
            }

            public int ID { get; set; }
            public string itemAttr { get; set; }
        }
    }
} 
```

# c# - 迁移到 VS 2012 后，MVC3 内网应用程序未经授权

> ID：15007032
> 
> 赞同：1
> 
> 时间：2013-02-21T16:13:23.143
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2012, iis-express

我有一个 MVC3 内网应用程序，最初是在 VS 2010 中开发的。我只是试图在运行 VS 2012 的新机器上打开它，但我得到了这个：

> **错误消息 401.2.：**未经授权：由于服务器配置，登录失败。根据您提供的凭据和 Web 服务器上启用的身份验证方法，验证您是否有权查看此目录或页面。请与 Web 服务器的管理员联系以获得更多帮助。

它被配置为在本地 IIS Web 服务器下运行（使用 IIS express）。这个项目中有一个使用 .svc 文件的 WCF 服务，我可以很好地访问它。我只在通过浏览器访问 MVC 站点时收到此错误。如果我将项目切换到使用 Visual Studio 开发服务器，它似乎工作正常，但我必须在 IIS Express 下运行它，因为我需要能够远程访问该站点以测试某些功能。

我必须在 web.config 或项目属性中做些什么才能使这个项目在 VS 2012 中工作？

这是我的 web.config 中的一个片段

```
<authentication mode="Windows" />
<authorization>
  <deny users="?" />
</authorization>
<profile>
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile>
<roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
  </providers>
</roleManager>
<customErrors mode="Off" />
<httpModules>
  <add name="WindowsAuthentication" type="System.Web.Security.WindowsAuthenticationModule" />
</httpModules> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:40:40.457

这个问题的答案解决了我的问题：

[Windows 身份验证不起作用](https://stackoverflow.com/q/9484121/1715579)

我只是编辑了该`applicationhost.config`文件以允许 Windows 身份验证，并且该站点已在 IIS Express 下启动并运行：

```
<windowsAuthentication enabled="true">...</windowsAuthentication> 
```

# objective-c - 使用 HMAC256 在 C# 和 Objective-C 中进行等效散列

> ID：15007035
> 
> 赞同：2
> 
> 时间：2013-02-21T16:13:26.933
> 
> 标签：objective-c, hash, hmac

我正在与一个合作伙伴合作，我们无法让 C# 和 Objective-C 使用我们认为在各自语言中相同的工具来生成相同的哈希值。在 C# 中，我这样做：

```
byte[] noncebytes=new byte[32];
//We seed the hash generator with a new 32 position array.  Each position is 0.
//In prod code this would be random, but for now it's all 0s.
HMACSHA256 hmac256 = new HMACSHA256(noncebytes);          
string plaintext = "hello";
string UTFString = Convert.ToBase64String(
    System.Text.Encoding.UTF8.GetBytes(plaintext));  
string HashString = Convert.ToBase64String(
    hmac256.ComputeHash(System.Text.Encoding.UTF8.GetBytes(plaintext)));  //Convert that hash to a string. 
```

这会产生以下 base64string 哈希：

> Q1KybjP+DXaaiSKmuikAQQnwFojiasyebLNH5aWvxNo=

执行此操作的等效 Objective-C 代码是什么？我们需要客户端和服务器能够为匹配的数据生成匹配的哈希。

这是我们目前使用的 Objective-C 代码：

```
 ...

    NSData *zeroNumber = [self zeroDataWithBytes:32]; //empty byte array
    NSString *nonceTest = [zeroNumber base64String];  // using MF_Base64Additions.h here
    NSData *hashTest = [self hmacForKeyAndData:nonceTest withData:@"hello"]; //creating hash
    NSString *hashTestText = [hashTest base64String]; 
    NSLog(@"hello hash is %@",  hashTestText);

...

    //functions for zeroing out the byte.  I'm sure there's a better way

    - (NSData *)zeroDataWithBytes: (NSUInteger)length {
   NSMutableData *mutableData = [NSMutableData dataWithCapacity: length];
    for (unsigned int i = 0; i < length; i++) {
       NSInteger bits = 0;
      [mutableData appendBytes: (void *) &bits length: 1];
    } return mutableData;
}

//hash function

-(NSData *) hmacForKeyAndData:(NSString *)key withData:(NSString *) data {
    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];
    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
    CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
    return [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:13:09.730

注意问题的objective-c部分的第二行代码。

```
NSString *nonceTest = [zeroNumber base64String]; 
```

但应该是这样的：

```
NSString *nonceTest = [[NSString alloc] initWithData:zeroNumber encoding:NSASCIIStringEncoding]; 
```

当我们不需要 hmac 播种时，将字符串转换为 base64 是一种情况。

我们现在得到： Q1KybjP+DXaaiSKmuikAQQnwFojiasyebLNH5aWvxNo= 作为两个平台上的哈希值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:24:12.627

**更新**：

GitHub 上有一个相当不错的[项目，](https://github.com/rnapier/RNCryptor)它似乎可以完成您想要的一切，以及更多与加密相关的选项；包括单元测试。

* * *

```
NSData *hmacForKeyAndData(NSString *key, NSString *data)
{
    const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
    const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];
    unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
    CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
    return [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];
} 
```

（[来源](https://stackoverflow.com/a/8459123/620197)）

有了以上内容，我认为您将拥有 import `<CommonCrypto/CommonHMAC.h>`。编码为 Base64 的下一步：

```
+ (NSString *)Base64Encode:(NSData *)data
{
    //Point to start of the data and set buffer sizes
    int inLength = [data length];
    int outLength = ((((inLength * 4)/3)/4)*4) + (((inLength * 4)/3)%4 ? 4 : 0);
    const char *inputBuffer = [data bytes];
    char *outputBuffer = malloc(outLength);
    outputBuffer[outLength] = 0;

    //64 digit code
    static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    //start the count
    int cycle = 0;
    int inpos = 0;
    int outpos = 0;
    char temp;

    //Pad the last to bytes, the outbuffer must always be a multiple of 4
    outputBuffer[outLength-1] = '=';
    outputBuffer[outLength-2] = '=';

    /* http://en.wikipedia.org/wiki/Base64
     Text content   M           a           n
     ASCII          77          97          110
     8 Bit pattern  01001101    01100001    01101110

     6 Bit pattern  010011  010110  000101  101110
     Index          19      22      5       46
     Base64-encoded T       W       F       u
     */

    while (inpos < inLength){
        switch (cycle) {
            case 0:
                outputBuffer[outpos++] = Encode[(inputBuffer[inpos]&0xFC)>>2];
                cycle = 1;
                break;
            case 1:
                temp = (inputBuffer[inpos++]&0x03)<<4;
                outputBuffer[outpos] = Encode[temp];
                cycle = 2;
                break;
            case 2:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xF0)>> 4];
                temp = (inputBuffer[inpos++]&0x0F)<<2;
                outputBuffer[outpos] = Encode[temp];
                cycle = 3;                  
                break;
            case 3:
                outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xC0)>>6];
                cycle = 4;
                break;
            case 4:
                outputBuffer[outpos++] = Encode[inputBuffer[inpos++]&0x3f];
                cycle = 0;
                break;                          
            default:
                cycle = 0;
                break;
        }
    }
    NSString *pictemp = [NSString stringWithUTF8String:outputBuffer];
    free(outputBuffer); 
    return pictemp;
} 
```

# google-chrome - 如何强制 Chrome 刷新 javascript - 现有的解决方案都不起作用

> ID：15007039
> 
> 赞同：0
> 
> 时间：2013-02-21T16:13:46.083
> 
> 标签：google-chrome, google-chrome-devtools

我什么都试过了。我试过ctrl-shift-R。我试过ctrl-F5。我已经检查了开发人员工具中的禁用缓存框。我已经完全清除了我的浏览器缓存。但我一辈子都无法让 Chrome（Windows 7 的版本 24.0.1312.57 m - 最新版本）重新加载特定的内联 javascript（这意味着它在我的 html 页面中，而不是在单独的 js 中）文件。）

是否还有其他方法可以完成此操作，或者我是否需要完全卸载 Chrome 并重新加载？请不要告诉我改用 Firefox；该代码在 javascript 中有效，但在 Chrome 中无效，我需要能够在那里对其进行测试。

# selenium - 机器人框架浏览器支持

> ID：15007040
> 
> 赞同：2
> 
> 时间：2013-02-21T16:13:49.470
> 
> 标签：selenium, robotframework

机器人框架是否支持 IExplorer 或仅支持 Firefox 和 Chrome？（如果是，如何配置？）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T07:31:52.573

Robot Framework 本身不支持任何特定的浏览器，所以我猜你指的是 SeleniumLibrary 或 Selenium2Library，它们分别使用 selenium 和 selenium 2。这些浏览器的支持在 seleniumhq 上有很好的记录，并且那里有很多支持。建议新项目使用 Selenium2Library，因为这将得到持续的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:22:07.993

`IEdriver exe`从[这里](http://docs.seleniumhq.org/download/)下载 并将这个 exe 文件放在*Python*安装目录的*Scripts*文件夹中。例如，在我的情况下是.*`C:\Python27\Scripts`*

 *Ride 现在将为您启动*IE*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T09:31:51.647

请检查浏览器的驱动程序兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-26T19:06:11.823

您可能已经知道 IE 驱动程序。除此之外，您还需要检查 Python 版本 - Selenium2 版本 - IE 驱动程序版本 - IE 浏览器版本兼容性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-05T06:44:07.100

Open Browser `${WEBAPPURL} ${BROWSER}`是打开浏览器的关键字。

*   对于*Firefox*，您可以使用`firefox/ff`而不是`${BROWSER}`
*   对于 *谷歌浏览器*，您可以使用`googlechrome/gc/chrome`而不是`${BROWSER}`
*   对于*Internet Explorer*，您可以使用`internetexplorer/ie`而不是 `${BROWSER}`

对于*Firefox*，您不需要任何驱动程序，但*IE*和*Chrome*您需要安装驱动程序

您可以在[此处找到 Chrome](http://code.google.com/p/selenium/wiki/ChromeDriver)和[IE的安装程序和信息](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-05T16:52:30.283

除了@theheadofabroom 的回答，我应该补充一点，*Internet Explorer*不能很好地与*Robot Framework*配合使用。您的测试可能由于多种原因在*IE上不起作用，而在**FireFox*和*Chrome*上可能工作得很好，但最常见的是时间。*IE*太慢了，当*Robot Framework*去点击下一个元素时，它会在页面中搜索它，但它还没有加载。只要您正确安装了适用于*IE的**Selenium 网络驱动*程序并正确编写了您的*机器人框架*代码，我建议您添加一些**`Sleep`操作之间的关键字，以减慢代码速度并增加您想要单击的元素在*Robot Framework*搜索页面之前加载的可能性。如果您正在为*Chrome*编写并希望将其发送到*Firefox*或*IE* ，则尤其如此。**

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-06T03:30:20.800

不管浏览器如何，机器人类都支持键盘输入。它是 java.awt 包中的一个类，并不特定于任何浏览器。它用于自动化在网页浏览器（独立应用程序）上执行操作，其中网页正在自动化

请注意，它不能直接在 Web 浏览器上执行操作，因为它是一个独立的应用程序，但可以利用键盘快捷键间接执行操作。

例如，如果您想在浏览器中打开一个新选项卡，您可以使用 Robot 类来按下`Ctrl+t`而不是尝试单击新选项卡。使用它在程序中打开新选项卡的代码

```
Webdriver driver = new ChromeDriver(); //FirefoxDriver(), IntrrnetExplorerDriver();
driver.get("......");
//code goes here
//to open a new tab
Robot rob = new Robot();
rob.keyPress(Keys.VK_CTRL);
rob.keyPress(Keys.VK_t);
rob.keyRelease(Keys.VK_CTRL);
rob.keyRelease(Keys.VK_t);
//itetator to switch between the tabs 
```***

# google-closure-compiler - 使用多个文件的 Google 闭包编译器应用程序以及如何不打印标准输出

> ID：15007042
> 
> 赞同：1
> 
> 时间：2013-02-21T16:13:56.867
> 
> 标签：google-closure-compiler

我正在使用 Google 闭包编译器应用程序，但无法确定帮助菜单中的以下哪些命令会关闭标准输出的打印。

我正在组合多个 js 文件：

```
compiler-latest TimPeterson$ java -jar compiler.jar --js assets/js/file1.js 
assets/js/file2.js --js_output_file  assets/js/file.min.js 
```

*注意：*这是访问帮助菜单的命令

```
 compiler-latest TimPeterson$ java -jar compiler.jar --help 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:09:24.243

使用该`--js_output_file`选项时，编译器将警告和错误打印到终端（到标准错误）。在这种情况下，编译器不应向标准输出写入任何内容。

**请注意**，标准错误可能包括您希望以已编译形式编译的代码的重要部分。虽然这不是标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T12:15:03.177

您可以使用[https://github.com/knyga/kjscompiler](https://github.com/knyga/kjscompiler) 它编译项目中的 js 文件。并观察依赖关系

# php - 如何替换多行

> ID：15007044
> 
> 赞同：1
> 
> 时间：2013-02-21T16:13:59.670
> 
> 标签：php, mysql, sql, sql-update

mysql表示例：

```
<table>
  <tr>
    <td>id</td>
    <td>value</td>
  </tr>
  <tr>
    <td>aa</td><td>1111</td>
  </tr>
  <tr>
    <td>bb</td><td>1111</td>
  </tr>
  <tr>
    <td>cc</td><td>2222</td>
  </tr>
  <tr>
    <td>dd</td><td>3333</td>
  </tr>
  <tr>
    <td>ee</td><td>1111</td>
  </tr>
</table>
<br /> 
```

我是新来的，想知道是否有任何可以帮助我用 php 替换 1111s 到 4444s 的值。

我尝试了以下方法，但似乎没有用：

$sql="UPDATE tablename SET `id`= REPLACE( `id`,'1111','4444')";

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:15:41.420

you should replace the `value`,not the `ID`

```
$sql="UPDATE tablename SET `value` = REPLACE(`value`,'1111','4444')"; 
```

or simply

```
$sql="UPDATE tablename SET `value` = '4444' WHERE value = '1111'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:16:07.373

```
UPDATE tablename SET value = "4444" WHERE value = "1111" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:16:50.993

```
UPDATE tablename
SET    value='4444'
WHERE  value='1111' 
```

# php - 使用带有命名空间的 SimpleXML 删除子元素

> ID：15007046
> 
> 赞同：2
> 
> 时间：2013-02-21T16:14:09.520
> 
> 标签：php, xml, simplexml

XML:

```
<?xml version="1.0"?>
<saml:Assertion xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" ID="_9069a2d7-491f-49ca-a13f-96c5bad39b14" IssueInstant="2010-04-06T16:27:34Z" Version="2.0">
  <saml:Issuer Format="urn:oasis:names:tc:SAML:2.0:nameid-format:entity">https://ssl.perquisite.net/memberweb/federation</saml:Issuer>
  <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
      <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
      <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
      <Reference URI="#_9069a2d7-491f-49ca-a13f-96c5bad39b14">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
            <InclusiveNamespaces xmlns="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="#default saml ds xs xsi"/>
          </Transform>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>QpoCI6jZFhQi+PuYM6UaFBL9KEU=</DigestValue>
      </Reference>
    </SignedInfo>
    <SignatureValue>X8X6qSUDKa3h3+/girXCeOVxo8=</SignatureValue>
    <KeyInfo>
      <X509Data>
        <X509Certificate>MIIB2...CieOpEo35g==</X509Certificate>
      </X509Data>
    </KeyInfo>
  </Signature>
  <saml:Subject>
    <saml:NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:transient">654d2065-6eed-401f-bf6d-a181117a5fb8</saml:NameID>
  </saml:Subject>
  <saml:Conditions NotBefore="2010-04-06T16:27:04Z" NotOnOrAfter="2010-04-06T16:28:04Z"/>
  <saml:AuthnStatement AuthnInstant="2010-04-06T16:27:34Z">
    <saml:AuthnContext>
      <saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:X509</saml:AuthnContextClassRef>
    </saml:AuthnContext>
  </saml:AuthnStatement>
</saml:Assertion> 
```

代码：

`$xml`设置为上面的xml。

```
$sxml = new SimpleXMLElement($xml);
$sxml->registerXPathNamespace('saml', 'urn:oasis:names:tc:SAML:2.0:assertion');
$sxml->registerXPathNamespace('sig', 'http://www.w3.org/2000/09/xmldsig#');

$signodes = $sxml->xpath('/saml:Assertion/sig:Signature'); 
```

此时我想从 XML 中删除 sig:Signature 节点和所有子节点。我试过了：

```
$node = dom_import_simplexml($signodes[0]);
$node->parentNode->removeChild($node); 
```

和：

```
foreach($signodes as $item) {
    $node = dom_import_simplexml($item);
    $node->parentNode->removeChild($node);
} 
```

和：

```
unset($signodes); 
```

和：

```
foreach($signodes as $node) {
   unset($node);
} 
```

然后通过以下方式取回 XML：

```
$Canonical = $sxml->asXML(); 
```

以上所有似乎都对生成的 XML 没有影响（但也没有给出错误）。

任何人都知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:51:33.317

正如你看到 mkaatman 所说的，php 有一个方法 removeChild。（[http://php.net/manual/en/domnode.removechild.php](http://php.net/manual/en/domnode.removechild.php)）

您可以通过示例删除子节点： $node->parentNode->removeChild($node);

# c# - 正则表达式 firstname.middlename.lastname 拆分删除中间名和“.”

> ID：15007047
> 
> 赞同：0
> 
> 时间：2013-02-21T16:14:13.567
> 
> 标签：c#, regex, winforms, textbox

我正在寻找一个将 firstname.middlename.lastname 拆分为的正则表达式：

第一个 中间 最后一个

但随后删除整个中间名（包括名字和姓氏之间的句点）

我将其传递给文本框以向用户显示名字姓氏。

如果这有什么不同，我正在为此使用winforms。

* * *

感谢这个论坛上一些好心人的快速行动，这是我的解决方案的答案！：

```
 string strName =  Environment.UserName.ToString();
        strName = System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase(strName.ToLower());

        String shortName = Regex.Replace(strName, @"[.]\w*[.]", " ");

        uxCreator.SelectedText = shortName; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:21:00.793

除非有使用 Regex 的迫切理由，否则我会选择更简单的方法：

```
String fullName = "Harry.Bob.McGraw";
String[] names = fullName.Split('.');
String shortName = String.Format("{0} {1}", names[0], names[2]); 
```

这为您提供了 shortName 中的缩短名称。

另外，如果你真的必须有正则表达式，那么你可以使用

```
String fullName = "Harry.Bob.McGraw";
String shortName = Regex.Replace(fullName, @"[.]\w*[.]", " "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:33:02.337

一些非常简单的事情（没有拆分）怎么样？

```
string input = "Harry.Bob.McGraw";
string pattern = @"(?<=\w+)\.\w+\.(?=\w+)";

var result = Regex.Replace( input, pattern, " " );

// result = "Harry McGraw" 
```

您可以使用相同的表达式进行拆分：

```
var result = Regex.Split( input, pattern );

// result[0] = "Harry"
// result[1] = "McGraw" 
```

*注意：正则表达式与 Matrin 的基本没有区别。我已经包含了零宽度断言（又名环视），以防您想将其应用于更大的文本主体。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:16:11.640

I wouldn't use a RegEx. It's easier to use the string manipulation functions:

[http://www.developerfusion.com/code/4398/string-manipulation-in-c/](http://www.developerfusion.com/code/4398/string-manipulation-in-c/)

# asp.net - SSRS - .net 报告应用程序中的链接不可点击

> ID：15007052
> 
> 赞同：0
> 
> 时间：2013-02-21T16:14:28.607
> 
> 标签：asp.net, ssrs-2008, reporting-services

我有一个为文本框指定“转到 URL”操作的报告。我使用的 URL 只是数据集中的一个字段，因此 URL 的表达式类似于“=Fields!URLLinkText.Value”。当我将报告部署到 SSRS 报告管理器时，链接工作正常。它是可点击的并打开 URL。但是，当我从自定义 asp.Net 报告应用程序链接到报告时，该链接不可点击。当我将鼠标悬停在链接上时，鼠标的光标甚至不会改变。似乎文本框的超链接/转到属性已完全删除。起初，我认为这一定是报告应用程序的配置问题，它禁用了外部超链接。但是，我创建了另一份报告，其中只有一个带有 Go To Action 的文本框来访问 www.CNN。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:50:17.820

You will need to handle the Hyperlink clicked event for your reportviewer control:

Assign the handler in your reportviewer constructor

```
 YourReportViewerControl.Hyperlink += new HyperlinkEventHandler(YourReportViewerControl_Hyperlink);

void YourReportViewerControl_Hyperlink(object sender, HyperlinkEventArgs e)
        {
                e.Cancel = true;

                System.Diagnostics.Process.Start(e.Hyperlink);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:46:37.853

我只是发布一个可能相关的问题。但它不涉及任何自定义报告应用程序。 [http://weblogs.asp.net/mnissen/archive/2009/03/26/reporting-services-does-not-display-hyperlink-for-placeholder-with-go-to-url-action.aspx](http://weblogs.asp.net/mnissen/archive/2009/03/26/reporting-services-does-not-display-hyperlink-for-placeholder-with-go-to-url-action.aspx)

您可以尝试一些不同的选项：将链接包装在 javascript 中，尝试“servername:port”而不是站点名称（如果它是内部的），或者尝试反转斜杠，如 http 反斜杠反斜杠...

# angularjs - 如何在简单对象上使用 Angular.js ng-repeat

> ID：15007053
> 
> 赞同：0
> 
> 时间：2013-02-21T16:14:30.020
> 
> 标签：angularjs

这有什么问题？它输出的列表看起来很奇怪，最后一个元素（正确的一个）与其余元素未对齐。另外我需要运行一个随机化元素的函数，应该去哪里？

```
<div ng-controller="getAnswers" id="pannel">
    <div id="base"></div>
    <ul class="answers">
        <li ng-repeat="wrong in answers.incorrect" class="answer" id="wrong{{$index}}">{{wrong}}</li>
        <li class="answer ng-scope" id="correct">{{answers.correct}}</li>
    </ul>
</div> 
```

$scope.answers 看起来像这样

```
{correct: "작아",
incorrect: ["자가", "작ㅏ", "작"]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:56:14.713

I resolved the issue by changing the data to this format and looping through it that way. Makes more sense to build the UL in one pass anyway.

```
[
{correct: "correct", text: "작아"}, 
{correct: "incorrect", text: "자가"}, 
{correct: "incorrect", text: "작ㅏ"}, 
{correct: "incorrect", text: "작"}
] 
```

# c - 释放指向结构的指针

> ID：15007054
> 
> 赞同：0
> 
> 时间：2013-02-21T16:14:36.473
> 
> 标签：c, malloc, free

我有这个代码

```
 struct PDATA{
    int NTH;
    int NPH;
    double th_start;
    double th_step;
    double ph_start;
    double ph_step;
    };

    typedef struct PDATA *PDATA_P;

    struct PDATA PAT_DATA;
    PDATA_P PAT_DATA_P;

    PAT_DATA_P = (PDATA_P) malloc(sizeof(struct PDATA));
    PAT_DATA_P=&PAT_DATA;

    ....

    free(PAT_DATA_P); 
```

当我释放指针时，我收到此错误：

```
*** glibc detected *** /home/pc-linux/Desktop/Projects/AM_v0.1/Debug/AM_v0.1: free(): invalid pointer: 0xbfffe03c *** 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:16:59.457

你的错误就行了`PAT_DATA_P = &PAT_DATA`

`PAT_DATA`在栈上分配。

也许您`*PAT_DATA_P = PAT_DATA`的意思是复制成员，而不是分配指针？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:21:35.983

您使用以下行将堆栈中分配的变量的地址分配给您的指针：

```
PAT_DATA_P=&PAT_DATA; 
```

然后你尝试释放它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:22:47.767

始终初始化要创建的变量。这是一个很好的做法。
PAT_DATA 未在任何时候初始化，因此无法使用。

# vba - 应用程序关闭时存储从 Excel 2010 宏生成的变量/对象

> ID：15007055
> 
> 赞同：0
> 
> 时间：2013-02-21T16:14:38.327
> 
> 标签：vba, excel, collections, excel-2010

我创建了一个启用宏的工作簿来进行一些容量建模。我捕获最终用户的假设和参数，然后将它们传递给几个函数。这会生成预计时间表的图表和表格，以提供特定时间范围内的容量。在宏中，我正在创建诸如“项目”或“阶段”或“单元”之类的对象，它们是类模块。其中一些是其他对象的集合。我正在尝试存储这些对象，以便在重新打开工作簿时程序不必每次都重新创建它们。我能想到的最简单的解决方案是将所有内容打印到一个隐藏的工作簿中，`Workbook_BeforeClose()`然后在`Workbook_Open()`. 不知道有没有更好的解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:28:45.903

隐藏的工作簿应该没问题 - 我会将其设置`xlVeryHidden`为阻止（大多数）用户查找数据表。

如果工作簿特定于特定用户，而不是电子表格，那么您可以使用注册表来存储/检索信息

```
x = GetSetting(appname := "MyApp", section := "Startup", key := "Left", default := "25")
'Shorter: x = GetSetting("MyApp","Startup", "Left", 25)
SaveSetting appname := "MyApp", section := "Startup", key := "Left", setting := 50 
'Shorter: SaveSetting "MyApp","Startup", "Left", 50 
DeleteSetting "MyApp", "Startup" , "Left" 
```

还有`GetAllSettings`一个会将一个完整的部分加载到一个二维数组中，其中包含设置的名称`(arraypos,0)`和值`(arraypos,1)`

# internet-explorer - IE8 线性渐变、边界半径和不透明度

> ID：15007057
> 
> 赞同：0
> 
> 时间：2013-02-21T16:14:43.900
> 
> 标签：internet-explorer, css, internet-explorer-8, opacity, css3pie

我有一个具有线性渐变、边框半径和不透明度的 div。这适用于 ie9+、ff、chrome 等。

但在 IE8 中我有一个问题（使用 css3pie）：
`filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#40000000", endColorstr="#40FFFFFF",GradientType=1 );`
这将获得我的渐变和不透明度，但忽略了我的`border-radius: 0 0 100% 0;`

当我使用饼图背景时：
`-pie-background: linear-gradient(right, #cce6f5 21%, '.$block_color.' 110%);`
我的线性渐变有效，我的边界半径有效，但我无法让不透明度工作。我试过了：

```
opacity:0.4 // not supported in IE8
-ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=40);
filter: alpha(opacity=40); 
```

以上都不起作用。

我怎样才能让他们三个都在 IE 8 中的同一个 div 上工作？

**编辑** 块的完整 css：

```
width: 204px;
height: 87px;
margin-top: 20px;

opacity: 0.4;
-ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=40);

-o-border-bottom-right-radius: 100%; /* Opera */
-webkit-border-bottom-right-radius: 100%;
-moz-border-radius-bottomright: 100%;
border-radius:0 0 100% 0;

position:relative;
z-index:1;

background-image: linear-gradient(right, #cce6f5 21%, '.$block_color.' 110%);
background-image: -o-linear-gradient(right , #cce6f5 21%, '.$block_color.' 110%);
background-image: -moz-linear-gradient(right , #cce6f5 21%, '.$block_color.' 110%);
background-image: -webkit-linear-gradient(right , #cce6f5 21%, '.$block_color.' 110%);
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#40'.$ms_block_color.'",endColorstr="#40CCE6F5",GradientType=1 );
zoom:1;
background-image: -webkit-gradient(
  linear,
  right ,
  left ,
  color-stop(0.21, #cce6f5),
  color-stop(0.80, '.$block_color.')
);
behavior: url(/includes/PIE.htc); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:26:55.553

If u having a conflict with IE8 try this example:

```
.div {
background:rgb(0,0,0);
background:rgba(0,0,0,0.4);
-pie-background:rgba(0,0,0,0.4);
} 
```

also: 1\. set background with alpha channel transparancy: 1st for IE no PIE, 2nd for IE PIE, 3rd for others 2\. Use behavior for IE8 3\. prevent IE9 using PIE example:

```
:root *> .div {
  behavior: none;
} 
```

Keep in mind that there are three declarations for the background. The first is the fallback which will show a solid background color if PIE doesn't work (i.e. Javascript is switched off). The second is the declaration for PIE which will be ignored by all browsers other than IE using PIE. The third sets the background with alpha transparency. Browsers that don't support this will ignore it and use the earlier declaration.

i hope this will help u :)

# bash - 查找文件，原地重命名 unix bash

> ID：15007058
> 
> 赞同：10
> 
> 时间：2013-02-21T16:14:44.843
> 
> 标签：bash, unix, rename, mv

这应该是相对微不足道的，但我已经尝试了一段时间没有太多运气。我有一个目录，有许多子目录，每个子目录都有自己的结构和文件。

我正在寻找`.java`工作目录下任何目录中的所有文件，并将它们重命名为特定名称。例如，我想命名所有的 java 文件`test.java`。

如果目录结构如下：

```
./files/abc/src/abc.java
./files/eee/src/foo.java
./files/roo/src/jam.java 
```

我想简单地重命名为：

```
./files/abc/src/test.java
./files/eee/src/test.java
./files/roo/src/test.java 
```

我的部分问题是路径中可能有空格。我不需要担心重命名文件中的类或任何内容，只需将文件名放在适当的位置即可。

如果一个目录里有多个`.java`文件，我不介意它是否被覆盖，或者给出提示，选择做什么（要么都可以，每个目录中不太可能有多个。

我试过的：

我已经研究过`mv`和`find`; 但是，当我将它们放在一起时，我似乎做错了。我想确保将文件保留在当前位置并重命名，而不是移动。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-21T16:18:14.787

GNU 版本`find`具有将`-execdir`目录更改为文件所在位置的操作。

```
find . -name '*.java' -execdir mv {} test.java \; 
```

如果您的版本`find`不支持`-execdir`，那么您可以通过以下方式完成工作：

```
find . -name '*.java' -exec bash -c 'mv "$1" "${1%/*}"/test.java' -- {} \; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T16:23:23.763

如果您的`find`命令（如我的命令）不支持`-execdir`，请尝试以下操作：

```
find . -name "*.java" -exec bash -c 'mv "{}" "$(dirname "{}")"/test.java' \; 
```

# ruby-on-rails - 为什么将 find 与 will_paginate 一起使用很危险？

> ID：15007061
> 
> 赞同：0
> 
> 时间：2013-02-21T16:14:51.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, will-paginate

在整理了一个错误后，我在常见问题解答中发现了以下内容。

您可能正在尝试对静态数组进行分页，而不是在数据库中执行分页查询。例如，在 Active Record 查找或所有方法之后链接分页调用是错误的：

**上述行将返回所需的结果，但违背了分页的目的。在这里，find 查询会首先从数据库中加载所有记录，这是很危险的，应该避免。**

我的问题是为什么对查找进行分页很危险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:19:12.100

分页是为了防止不必要的数据库加载：你只想要数据库中的一些元素，所以你只加载它们。

使用 find 加载所有内容，然后进行排序。

`Dangerous`== 沉重的数据库负载，因此潜在的崩溃。

# sql - RANK 分区函数与 SUM OVER 结合使用

> ID：15007067
> 
> 赞同：4
> 
> 时间：2013-02-21T16:15:08.860
> 
> 标签：sql, sql-server-2008-r2

我有以下工作，但我认为我已经完成了我通常的技巧，即过度复杂化可能更简单的事情。

如果您运行该脚本，您将看到我想要实现的目标 - 最初按部门分数排名，然后按每个部门内每个姓名的分数排名。

如何简化以下内容？：

```
IF OBJECT_ID('TEMPDB..#Table') IS NOT NULL BEGIN DROP TABLE #Table END;
 CREATE TABLE #Table 
    (
    Department VARCHAR(100),
    Name VARCHAR(100),
    Score INT
    );

INSERT INTO #Table VALUES
('Sales','michaeljackson',7),
('Sales','jim',10),
('Sales','jill',66),
('Sales','j',1),    
('DataAnalysis','jagoda',66),
('DataAnalysis','phil',5),
('DataAnalysis','jesus',6),
('DataAnalysis','sam',79),
('DataAnalysis','michaeljackson',9999);

WITH SumCte AS
    (
    SELECT  Department,
        sm = sum(Score) 
    FROM    #Table
    GROUP BY Department
    )
, RnkDepCte AS
    (
    SELECT  Department,
        rk =RANK() OVER (ORDER BY sm DESC)
    FROM    SumCte
    )
, RnkCte AS
    (
    SELECT  Department,
        Name,
        Score,
        rnk = RANK() OVER (PARTITION BY a.Department ORDER BY a.Score DESC)
    FROM    #Table a 
    )   
SELECT a.Department,
       a.Name,
       a.Score,
       FinalRank = RANK() OVER (ORDER BY ((10000/b.rk) + (100/a.rnk)) DESC)
FROM   RnkCte a 
       INNER JOIN RnkDepCte b 
        ON a.Department = b.Department 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T16:23:00.147

有一个更简单的方法。试试这个：

```
select t.*,
       RANK() over (order by sumscore desc, score desc)
from (select t.*,
             SUM(score) over (partition by department) as SumScore
       from #Table t
      ) t 
```

# asp.net-mvc - MVC 4 - 如何从下拉列表中获取所选项目

> ID：15007068
> 
> 赞同：1
> 
> 时间：2013-02-21T16:15:13.823
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我对 MVC 很陌生。我有以下剃刀代码：

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset style="margin:5px">
        <legend>List a Bicycle for Sale</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.BicycleManfacturer)
        </div>
        <div class="editor-field">
            @Html.DropDownList("ManufacturerList")
        </div>

        ....
        ....

        <div class="float-right">
            <input type="submit" value="List Bike" />
        </div>
    </fieldset>
} 
```

“ManufacturerList”是`SelectedListItem`存储在 ViewBag 中的列表（我不想为所有下拉列表创建模型）。它是通过这种方法构建的：

```
 private void HydrateManufacturerList()
    {
        var manufacturerList = (from row in db.BicycleManufacturer.ToList()
                                select new SelectListItem
                                {
                                    Text = row.Description,
                                    Value = row.BicycleManufacturerId.ToString()
                                }).ToList();
        manufacturerList.Add(new SelectListItem
        {
            Text = "-- Select Manufacturer --",
            Value = "0",
            Selected = true
        });
        ViewBag.ManufacturerList = manufacturerList.OrderBy(row => row.Text);
    } 
```

我有以下代码在提交完成时被调用：

```
 [HttpPost]
    public ActionResult Create(BicycleSellerListing bicyclesellerlisting)
    {
        bicyclesellerlisting.ListingDate = System.DateTimeOffset.Now;

        if (ModelState.IsValid)
        {
            db.BicycleSellerListing.Add(bicyclesellerlisting);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(bicyclesellerlisting);
    } 
```

当用户将视图发布回我的控制器并执行此方法时，我无法弄清楚如何从下拉列表中获取所选制造商。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:33:21.713

利用

```
public ActionResult Create(BicycleSellerListing bicyclesellerlisting, FormCollection collection)
{ 
  ... 
```

根据您的下拉列表名称，您可以获得所有输入，包括下拉选择的项目，如**collection["ManufacturerList"]或类似的。**

# ios - UIView stops animation after Device rotation

> ID：15007073
> 
> 赞同：3
> 
> 时间：2013-02-21T16:15:29.870
> 
> 标签：ios, objective-c, uiview, autoresizingmask

I have some view and image view.

```
_contentView = [[UIView alloc] initWithFrame:self.bounds];
_contentView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
....

UIImageView *imageView = [[UIImageView alloc] initWithImage:someImage];
[_contentView addSubview:imageView]; 
```

This imageView runs some animation.

```
[UIView animateWithDuration:1.6f delay:0.0 options:UIViewAnimationOptionAllowUserInteraction |UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat animations:^{
    imageView.center = somePoint;
} completion:^(BOOL finished) {

}]; 
```

The problem is that after rotation animation stops. If i change autoresizing mask of the _contentView to flexible bounds animation continues after rotation. But i need it to be with flexible size. Can someone explain why animation stops after rotation?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-25T19:53:06.410

# 对于 2019 年..

# 这两个秘密是这样的：

# 1.您必须在重新开始动画之前重置该值

我实际上不知道为什么——这完全是神秘的——但这是事实。

# 2\. 您必须在协调器完成时重新启动它。

它在其他任何地方都不起作用，例如在 willTransition 的主体中。

所以 ...

你有一个动画约束..

```
@IBOutlet var slider: NSLayoutConstraint! 
```

（假设初始值为“55”）

你不断地为它制作动画以制作一个包装卷轴，比方说：

```
func slide() {
    let w = sliderView.frame.width

    ////////// SECRET TIP ------->
    slider.constant = 55
    ////////// <--------SECRET TIP

    view.layoutIfNeeded()
    UIView.animate(withDuration: 10, delay: 0,
      options: [.repeat, .curveLinear, .beginFromCurrentState],
      animations:{ [weak self] in
        self?.slider.constant = w
        self?.view.layoutIfNeeded()
    })
} 
```

删除 Secret Tip 行，它根本不起作用 - 试试吧！

当屏幕出现时你开始..

```
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    slide()
} 
```

当屏幕旋转时，您继续动画：

```
override func willTransition(to newCollection: UITraitCollection,
  with coordinator: UIViewControllerTransitionCoordinator) {
    super.willTransition(to: newCollection, with: coordinator)
    coordinator.animate(alongsideTransition: { _ in
    },completion: { [weak self] _ in
        self?.slide()
    })
} 
```

而已！

（请注意，实际上您实际上不需要取消、暂停或以其他方式操作动画：iOS 将通过上述方式顺利处理。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T22:11:05.117

我有同样的问题，也许你使用这个空白？只需设置 [UIView setAnimationsEnabled:YES] 再次激活动画。我希望这个解决方案对您有所帮助。

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    [UIView setAnimationsEnabled:NO];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T16:24:56.373

在播放动画时禁用设备旋转，如果在动画期间旋转了设备，则在动画结束后旋转屏幕。这应该可以解决问题。

# javascript - 如何检索 onload 中调用的函数？

> ID：15007076
> 
> 赞同：1
> 
> 时间：2013-02-21T16:15:35.370
> 
> 标签：javascript

有没有办法让我检索和更改 onload 函数的值？

IE

我想在这个标签上获取 onload 的值：

```
 <body onLoad="test();"> 
```

我有办法做到这一点吗？

因为我需要更改在某些情况下调用的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:23:21.550

是的，您可以从`window.onload`.

```
var func = window.onload; 
```

* * *

给出你的例子，你会得到一个看起来像这样的函数：

```
var func = function(event) {
    test();
}; 
```

* * *

因此，您可以在需要时调用您的函数，尽管您没有`event`对象可以传递它。

```
func(); 
```

* * *

要更改它，只需在`onload`事件发生之前的某个时间进行：

```
<body onload="test();">

    <script>
    var func = window.onload;

    alert(func); // alerts the function

    if (condition_is_met) {
        window.onload = function() { 
            /* my new func */ 
        };
    }
    </script>

</body> 
```

这将用一个新函数覆盖原来的函数。只要您在事件发生之前执行此操作，就会调用您的新函数。

# mysql - MySQL INSERT ... SELECT 与聚合值失败，CASE 语句未找到 Case

> ID：15007077
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:15:36.900
> 
> 标签：mysql, sql, aggregate-functions

我想从聚合查询的输出中向我的表中插入一个新行：

```
INSERT INTO table_name (id) SELECT MAX(id) + 1 FROM table_name; 
```

但它失败并出现以下错误：

```
ERROR 1339 (20000): Case not found for CASE statement 
```

如果我`+ 1`像这样将部分添加到聚合函数中：

```
INSERT INTO table_name (id) SELECT MAX(id + 1) FROM table_name; 
```

它产生相同的错误。如果我删除该`+ 1`部分，它当然会失败，因为它`id`是主键：

```
ERROR 1062 (23000): Duplicate entry '48' for key 'PRIMARY' 
```

如何在不修改表结构的情况下在 MySQL 5.5.29-0ubuntu0.12.10.1 中实现这一点？

### 更新

这可能是因为原始表中缺少一个非空字段，如果我明天找到它，我会在这里发布解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:19:46.953

既然你想将最后一个 id 加一，为什么不使用`AUTO_INCREMENT`column 为 column `ID`。

```
CREATE TABLE tableName
(
    ID INT AUTO_INCREMENT PRIMARY KEY,
    ....
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T15:24:31.703

尽管错误表示不同，但问题的原因是插入中缺少非空字段。

填写每个字段都会产生正确的`MAX(id) + 1`查询。

# javascript - 被函数参数、闭包和作用域链之间的交互弄糊涂了

> ID：15007080
> 
> 赞同：4
> 
> 时间：2013-02-21T16:15:46.967
> 
> 标签：javascript, variables, closures

有问题的代码：

```
 function addLinks () {
    for (var i=0, link; i<5; i++) {
        link = document.createElement("a");
        link.innerHTML = "Link " + i;
        link.onclick = function (num) {
            return function () {
                alert(num);
            };
        }(i);
        document.body.appendChild(link);
    }
  }
  window.onload = addLinks; 
```

我的问题是，因为返回的函数是一个闭包，而变量`num`是每次函数执行时的全局变量，`num`应该保持当前值替换旧值，并且应该在任何地方自动更新该值。但这并没有发生——当我单击每个链接时，我会得到不同的值。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:23:31.097

`num`被匿名函数关闭。按原样`function (num) { return function () {}}(i)`传递给内部函数，并根据当时的值返回一个新函数。`i``i`

如果您希望点击回调始终提醒 的最大值`i`，实际上更简单：

```
link.onclick = function () {
    alert(i);
} 
```

`function (var varname)`只是无效的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:29:55.557

想一想：如果你有三个这样的链接怎么办：

```
<a href="#">0</a>
<a href="#">1</a>
<a href="#">2</a> 
```

您希望他们在您单击它们时提醒他们的号码，因此您可以这样做：

```
var links = $('a');
for (var i = 0; i < links.length; i++) {
    links[0].onclick = function () {
        alert(i);
    }
} 
```

乍一看，你会期望，例如，因为你在第一个链接上分配了点击处理程序 when ，它会在你点击它时发出`i = 0`警报。`0`但是，当您单击它时，它实际上会发出警报`3`。

您自己说过，您的代码正在创建一个闭包。上面的代码所做的是将函数处理程序分配给每个链接的单击事件。这些函数处理程序中的每一个都维护对变量的引用`i`（注意：不是当前值！）。

在您分配函数处理程序时，它实际上并不评估`i`具有什么值（因为它不需要它）。当您单击时，啊哈，那是它检查具有什么值`i`并发出警报的时候。

当您单击一个链接时，您的`for`循环将完成很长时间，并带有`i = 3`，这就是您的单击处理程序发出的警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:23:21.080

请查看您的函数后的 (i)。这种类型的符号仅用于自调用函数。就好像您正在设置 link.onclick = 一个数字，而它需要一个函数。您可以简单地使用以下内容。

```
 link.onclick = function (event) {
        event.preventDefault();
        alert(i);
    }; 
```

请注意，点击函数默认接收“事件”作为参数。确保调用事件的 preventDefault() 方法，否则由于锚元素的性质，它会冒泡 DOM 并触发回发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:26:44.740

您还没有解释变量`num`的来源或使用方式。我猜你的意思是提醒`i`. 点击处理程序将事件对象作为参数，所以我会这样尝试：

```
function addLinks () {
for (var i=0; i<5; i++) {
    var link = document.createElement("a");
    link.innerHTML = "Link " + i;
    link.onclick = function (event) {
            alert(i);
    };
    document.body.appendChild(link);
}
}
window.onload = addLinks; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T16:45:51.953

这很奇怪，与我认为对闭包的了解不一致。唯一的变化（在`addLinks`问题的第一个版本中）：

```
link.onclick = function (num) 
```

到

```
link.onclick = function () 
```

您会得到预期的结果，即在`num`任何时候单击链接时都会提示全局变量的实际值。

它可能与解释器在遇到闭包时如何保存在闭包中引用的范围变量有关。当一个变量在闭包中被引用时，从当前范围向上搜索该变量最接近的出现。

虽然在第一种情况下，它被定义为参数（对于在多次声明后*调用的函数），但它每次都有不同的值，因此每个闭包“记住”不同的范围值。*

在第二种情况下，发现的唯一事件是在全局范围内，这导致`num`无论调用哪个处理程序，都会使用 的实际值。

# macos - I am trying to port the code of kvm for freeBSD to MAC .. there are assembly language commands related to i386 processor .

> ID：15007087
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:15:59.730
> 
> 标签：macos, freebsd, kvm

I am trying to port the code of kvm for freeBSD to MAC .. there are assembly language commands related to i386 processor . What is the significance of .type and .size commands ? and what are mac assembly language commands for these two ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T22:44:17.487

开始之前：如果您不确定这些指令是什么，那么您确实无法尝试将 KVM 移植到 Mac OS X。这样做需要对这两种操作系统以及 x86 有深入的了解建筑学。

话虽如此，Mac OS X 中不存在与`.type`and的等价物`.size`。它们仅在生成 COFF 输出时在 GNU 汇编器中处于活动状态，而在 Mac OS X 平台上不使用。

# asp.net - Windows Server 2008 R2 终端服务服务器上的 ASP.Net 本地调试

> ID：15007092
> 
> 赞同：0
> 
> 时间：2013-02-21T16:16:07.300
> 
> 标签：asp.net, visual-studio-2012, visual-studio-debugging, terminal-services

我们有一个 Windows Server 2008 R2 盒子设置为终端服务器，上面安装了 Visual Studio 2012，以便远程开发人员能够在我们的 ASP.net 系统上进行开发。

我们希望能够像使用 Visual Studio 内部开发服务器在本地机器上开发时一样对外部项目进行调试。

我正在尝试在 VS2012 中的 ASP.Net 项目 (F5) 上开始本地调试 - 项目编译 - IE 提供了我的 localhost url，然后它只是以“正在连接...”旋转，页面永远不会出现。

在本地机器上调出相同的工作区并进行调试就可以了。

我已经用尽我的 google-fu 在这里寻找解决方案，并谦虚地向大家询问任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:04:25.963

在服务器上进行调试时，Visual Studio 的工作方式略有不同。您真的不想使用 VStudio 在 Web 服务器上播放/调试。您需要使用菜单选项“调试”、“附加到进程”。将有多个进程在运行，因此可能需要多次尝试才能找到正确的进程。

不过要小心。因为您的断点实际上会冻结整个服务器的 IIS。对于当时使用 IIS 的每个人来说，这可能是一个很大的不便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:24:56.987

如果您尝试从 IIS 服务器调试项目，则需要验证该帐户是否具有管理员权限，此外，如果项目已使用其源文件进行部署，您可以将进程（可能是 w3wp.exe）附加到Visual Studio 并对其进行调试。

另一种方法是使用 Visual Studio 打开解决方案并更改服务器的 Web 项目属性：使用 Visual Studio 开发服务器。

让我知道有关您的方案的更多信息，以便为您提供更多路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:35:55.743

我要做的是附加到服务器上的 IIS 进程：http: [//msdn.microsoft.com/en-us/library/vstudio/3s68z0b3.aspx](http://msdn.microsoft.com/en-us/library/vstudio/3s68z0b3.aspx) 您甚至可以在您的机器上执行此操作。

确保在 web.config 中为该应用启用了调试，并且您已安装远程项目。添加断点，通过附加到 IIS 应用程序池进程进行调试，它将触发断点。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-10-21T12:38:06.757

我能够将进程附加到 SPUCWorkerProcess.exe，即使它是农场解决方案而不是沙盒解决方案

# javascript - Simulating Option selection in qUnit?

> ID：15007095
> 
> 赞同：1
> 
> 时间：2013-02-21T16:16:22.110
> 
> 标签：javascript, jquery, html, unit-testing, qunit

I'm trying to write qUnit tests based around the selection of an option. However, adding a click event to the specific option doesn't work, so I've been trying to use the .change() event, but when there's more than one, I get a call stack error like this:

```
Maximum call stack size exceeded 
```

Here's my unit Test:

```
test( "Testing",  function() {

    $('#target_select').val(5);
    $('#target_select').change();
    $('#target_select').val(6);
    $('#target_select').change();

    equal($('#some_target').is(':disabled'), true, "It's disabled, man" );

}); 
```

So my question is how do I either accurately simulate this event, or how do I stop this from happening? If I use only one event, the tests aren't accurate.

# c# - 如何根据字符串数组的内容从字符串中删除字符串？

> ID：15007097
> 
> 赞同：-3
> 
> 时间：2013-02-21T16:16:27.977
> 
> 标签：c#, arrays, string

检查某物是否包含 myString 中任何元素的任何实例。某些东西可能是“餐具柜：1 森林”、“SB：1 山”、“SB 1 平原”等。如果某些东西确实包含数组的任何元素，那么这些元素后面总是会跟一个空格、一个数字、一个空格和一个字符串：“1 Swamp”。

```
string[] myString = {"Side", "side", "Board", "board", "Sideboard", "sideboard", "SB", "sb", "SB:", "sb:"};

if(myString.Any(s => something.Contains(s)))
{
    // newSomething = something but with any instance of any element in myString removed
    // from the start of something up to the first whitespace.
} 
```

我需要帮助删除上述 if 语句块中的部分注释。

## 编辑

这些是一些直率的回答，但我明白！

我确实浏览了介绍并尝试搜索相关内容但找不到这种情况。这是我为个人使用而非作业而制作的一个小程序。我对正则表达式一无所知。

至于澄清，在程序中发现“某物”包含“myString”数组中的任何元素的地方，我只想从“某物”中字符串的开头删除这些元素。

例如：某物=“餐具柜：1个由内而外”

我只想从字符串的开头和数字之前删除“myString”元素，因为数字之后的字符串也可能包含“myString”的元素。

此外，在提交这个问题后，我立即找到了一种删除方法：我只是使用了 TrimStart() 和一个包含“myString”中元素的单个字符的数组。这做到了我想要的，但我保留了这个问题以寻找更优雅的解决方案。因此，出于所有意图和目的，这个问题已经得到解答。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:59:04.933

```
string newSomething = something.Substring(0, something.IndexOf(' ')); 
```

上面的代码将返回一个以“something”字符串中的第一个空格实例结尾的字符串。如果 'something' 字符串中没有空格，则会出现异常。

不知道这是不是你要找的，祝你好运。

# powershell - 如何使用 powershell 的 read-host 功能接受外部服务的密码？

> ID：15007104
> 
> 赞同：30
> 
> 时间：2013-02-21T16:16:33.373
> 
> 标签：powershell, powershell-2.0, user-input, securestring

我正在编写一个脚本来连接到 SOAP 服务。建立连接后，我需要在发送的每个命令中传入用户名/密码。我遇到的问题是，当我使用 read-host 执行此操作时，我的密码以明文形式显示并保留在 shell 中：

```
PS C:\Users\Egr> Read-Host "Enter Pass"
Enter Pass: MyPassword
MyPassword 
```

如果我使用 -AsSecureString 隐藏它，则该值将无法再传递给服务，因为它现在是一个 System.Security.SecureString 对象：

```
PS C:\Users\gross> Read-Host "Enter Pass" -AsSecureString
Enter Pass: **********
System.Security.SecureString 
```

当我通过这个时，它不起作用。我不关心以明文形式传递给服务的密码，我只是不希望他们在输入密码后停留在用户的外壳上。是否可以隐藏 Read-Host 输入，但仍将密码存储为明文？如果没有，有没有办法可以将 System.Security.SecureString 对象作为明文传递？

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-21T16:30:11.533

$Password 是一个安全字符串，这将返回纯文本密码。

```
[Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($Password)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:32:23.480

您可以将密码（输入）保存为变量并将其传递给您的服务。如果代码在脚本中或作为函数运行，则包含密码的变量将在完成后被删除（它们存储在临时本地范围内）。如果您在控制台中运行命令（或点源脚本，如`. .\myscript.ps1`），密码变量将保留在会话范围内，并且它们将被存储，直到您将其删除或关闭会话。如果您想确保在脚本运行后删除该变量，您可以自己删除它。像这样：

```
#Get password in cleartext and store in $password variable
$password = Read-Host "Enter Pass"

#run code that needs password stored in $password

#Delete password
Remove-Variable password 
```

要了解有关变量如何存储在作用域中的更多信息，请查看[about_Scopes](http://technet.microsoft.com/en-us/library/hh847849.aspx)

# php - 如何在php中执行jar文件

> ID：15007111
> 
> 赞同：0
> 
> 时间：2013-02-21T16:16:52.120
> 
> 标签：php, jar

我读了很多关于那个，但我的问题仍然存在：

我想做的是：

```
echo shell_exec("/usr/bin/nohup /usr/bin/java -Xmx1g -jar /var/www/html/myDir/ff.jar &"); 
```

它给了我这个错误：

```
Error occurred during initialization of VM Could not reserve enough space for code cache 
```

我使用`nohup`，因为即使 php 终止，jar 也必须运行。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:55:56.450

你在运行它的机器上启用了 SELinux 吗？请参阅[http://archimedeseureka.blogspot.com/2011/01/executing-java-from-php-in-rhelcentos.html](http://archimedeseureka.blogspot.com/2011/01/executing-java-from-php-in-rhelcentos.html) - 我在 Fedora 18 系统上遇到了这个问题，设置 httpd_execmem 似乎已经解决了它。

# sql-server - SQL Server：存储过程或函数

> ID：15007112
> 
> 赞同：1
> 
> 时间：2013-02-21T16:16:52.543
> 
> 标签：sql-server, function, stored-procedures

我有一个有 2 列（`A as bool`和`B as text`）的表，这些列可以是：

1.  两者都是空的
2.  如果 A 为 False，则 B 应为空
3.  如果 A 为 True，则 B 不应为空

有规则。我想创建一个存储过程或函数来在添加或更新行时检查这些规则（通过触发器）。存储过程或函数哪个更好？如果是函数，是什么类型？一般来说，哪个变体是最好的（返回布尔值或其他方式等）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T16:26:40.843

我认为您在使用[`CHECK`Constraint](http://msdn.microsoft.com/en-gb/library/ms188258%28v=sql.105%29.aspx)。

例子：

```
ALTER TABLE Xxx
  ADD CONSTRAINT chk_Xxx 
  CHECK ( (A IS NULL AND B IS NULL) 
       OR (A = 0 AND B IS NULL) 
       OR (A = 1 AND B IS NOT NULL)
        ) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:29:16.977

我会使用连接到 UDF 的 CHECK CONSTRAINT。
这是一个愚蠢的例子，验证如果你插入一个人，他们的年龄将大于 17。

```
if NOT exists (select *  from sysobjects 
    where id = object_id('dbo.udfOlderThan17Check') and sysstat & 0xf = 0)
    BEGIN
        print 'Creating the stubbed version of dbo.udfOlderThan17Check'
        EXEC ( 'CREATE FUNCTION dbo.udfOlderThan17Check ( @j as smallint ) RETURNS bit AS BEGIN RETURN 0 END')
    END
GO

ALTER FUNCTION dbo.udfOlderThan17Check ( @Age smallint  )
    RETURNS bit AS
    BEGIN
        declare @exists int

        select @exists = 0

        if ( @Age IS NULL )
            BEGIN
                select @exists = 1 -- NULL VALUES SHOULD NOT BLOW UP THE CONSTRAINT CHECK   
            END

        if ( @exists = 0 )

        BEGIN

            if @Age > 17
                begin
                    select @exists = 1
                end     

            END

        return @exists
    END

GO

IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[Person]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
    BEGIN
        DROP TABLE [dbo].[Person]
    END
GO

CREATE TABLE [dbo].[Person]
(
      PersonUUID [UNIQUEIDENTIFIER] NOT NULL DEFAULT NEWSEQUENTIALID()
    , Age smallint not null
)

GO

ALTER TABLE dbo.Person ADD CONSTRAINT PK_Person
PRIMARY KEY NONCLUSTERED (PersonUUID)
GO

ALTER TABLE dbo.Person
ADD CONSTRAINT [CK_Person_AgeValue] CHECK ([dbo].[udfOlderThan17Check]( [Age] ) != 0)
GO 
```

以下是一些“测试”：

```
INSERT INTO dbo.Person (Age) values (33)
INSERT INTO dbo.Person (Age) values (16)

INSERT INTO dbo.Person (Age) select 333 UNION select 58
INSERT INTO dbo.Person (Age) select 444 UNION select 4

select * from dbo.Person 
```

# cordova - Phonegap 2.4.0 - NetworkStatus alert

> ID：15007113
> 
> 赞同：0
> 
> 时间：2013-02-21T16:16:54.333
> 
> 标签：cordova

I'm trying to learn phonegap using the "PhoneGap Mobile Application Development Cookbook", published by PACKT publishing. Chapter 2 discusses file systems and this seems to be giving some errors. I copied the sample code and I get the following error:

![enter image description here](../Images/6e4d7570bbf0d8abfd7295648ebe693c.png)

"NetworkStatusxxxxxxxxxx"] (the number is different every time). I've been looking for a solution for several hours now, but without success, who can help?!

My code:

```
!DOCTYPE html> 
```

File Download

```
var downloadDirectory;

document.addEventListener("deviceready", onDeviceReady, true);

function onDeviceReady() {
    window.requestFileSystem(
        LocalFileSystem.PERSISTENT, 
        0, 
        onFileSystemSuccess, 
        null
    );

    x$('#download_btn').on( 'click', function(e) {
        download();
    });
}

function onFileSystemSuccess(fileSystem) {
    fileSystem.root.getDirectory('my_downloads',{create:true},
        function(dir) {
            downloadDirectory = dir;
        },fail);
}

function fail(error) {
    x$('#message').html('We encountered a problem: ' + error.code);
}

function download() {
    var fileURL = document.getElementById('file_url').value;
    var localFileName = getFilename(fileURL);

    x$('#message').html('Downloading ' + localFileName);

    var fileTransfer = new FileTransfer();
    fileTransfer.download(fileURL, downloadDirectory.fullPath + '/' + localFileName, 
        function(entry){
            x$('#message').html('Download complete. File saved to: ' + entry.fullPath);
        }, 
        function(error){
            alert("Download error source " + error.source);
        }
    );
}

// Obtain the filename
function getFilename(url) {
   if (url) {
      var m = url.toString().match(/.*\/(.+?)\./);
      if (m && m.length > 1) {
         return m[1] + '.' + url.split('.').pop();
      }
   }
   return "";
}
</script> 
```

```
<input type="text"      id="file_url"       value="http://blogs.adobe.com/adobeingovernment/files/2012/07/phonegap.jpg" />
<input type="button"    id="download_btn"   value="Download" />

<div id="message"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T10:40:47.083

当您在 cordova ios 项目中使用 android 版本的 cordova.js 时会发生这种情况。创建一个新的 ios cordova 项目，从创建的项目中复制 cordova-xxxjs 并放置在您现有的项目中，替换已经存在的 cordova-xxxjs 文件。然后，从 Xcode 中清理项目并再次构建。瞧！从现在开始没有警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:15:45.790

如果加载 phonegap javascript 文件时出错，通常会发生这种情况。多次让我感到困扰的一件事是使用了错误的`cordova.js`文件——如果你正在构建一个 Android 应用程序，你必须使用 Android 生成的`cordova.js`文件，这同样适用于 iOS 应用程序。

# extjs - 列表视图中的 extjs 模型关联

> ID：15007115
> 
> 赞同：9
> 
> 时间：2013-02-21T16:17:00.717
> 
> 标签：extjs, extjs4, extjs-mvc

我有两个模型：页面和部门。我在 extjs 的列表视图中显示页面，我想在列表视图中显示部门名称而不是部门 ID。我还没有真正通过 GUI 将部门添加到页面中，只能通过直接 db insert 语句，但我希望至少能够在列表视图中显示部门名称。

到目前为止，我有以下内容，这显示了 department_id

# 楷模

```
Ext.define('ExtMVC.model.Department', {
    extend: 'Ext.data.Model',
    fields: ['name']
});

Ext.define('ExtMVC.model.Page', {
    extend: 'Ext.data.Model',
    fields: ['title','body','department_id'],
    associations: [
        {type: 'belongsTo', model: 'Department'}
    ]
}); 
```

# 商店

```
Ext.define('ExtMVC.store.Pages', {
    extend: 'Ext.data.Store',
    model: 'ExtMVC.model.Page',
    autoLoad: true,
    proxy: {
      type: 'rest',
      url: '/admin/pages',
      format: 'json'
    }
});
Ext.define('ExtMVC.store.Departments', {
    extend: 'Ext.data.Store',
    model: 'ExtMVC.model.Department',
    autoLoad: true,
    proxy: {
      type: 'rest',
      url: '/admin/departments',
      format: 'json'
    }
}); 
```

# 列表显示

```
Ext.define('ExtMVC.view.page.List' ,{
    extend: 'Ext.grid.Panel',
    alias : 'widget.pagelist',

    title : 'All Pages',
    store: 'Pages',

    initComponent: function() {
        this.tbar = [{
            text: 'Create Page', action: 'create'
        }];

        this.columns = [
            {header: 'Title',       dataIndex: 'title',       flex: 1},
            {header: 'Department',  dataIndex: 'department_id',  flex: 1}
        ];
        this.callParent(arguments);
    }
}); 
```

# 控制器 (fwiw)

```
Ext.define('ExtMVC.controller.Pages', {
    extend: 'Ext.app.Controller',

    init: function() {
      this.control({
            'pagelist': {
                itemdblclick: this.editPage
            },
            'pagelist > toolbar > button[action=create]': {
                click: this.onCreatePage
            },
            'pageadd button[action=save]': {
              click: this.doCreatePage
            },
            'pageedit button[action=save]': {
              click: this.updatePage
            }
        });
    },

    onCreatePage: function () {
      var view = Ext.widget('pageadd');
    },

    onPanelRendered: function() {
        console.log('The panel was rendered');
    },

    doCreatePage: function (button) {
      var win = button.up('window'),
      form = win.down('form'),
      values = form.getValues(),
      store = this.getPagesStore();
      if (form.getForm().isValid()) {
        store.add(values);
        win.close();
        this.getPagesStore().sync();
      }
    },

    updatePage: function (button) {
        var win = button.up('window'),
            form = win.down('form'),
            record = form.getRecord(),
            values = form.getValues(),
            store = this.getPagesStore();
        if (form.getForm().isValid()) {
            record.set(values);
            win.close();
            this.getPagesStore().sync();
        }
    },

    editPage: function(grid, record) {
      var view = Ext.widget('pageedit');
      view.down('form').loadRecord(record);
    },

    stores: [
        'Pages',
        'Departments'
    ],

    models: [
      'Page'

    ],

    views: [
        'page.List',
        'page.Add',
        'page.Edit'
    ]
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-17T19:07:31.537

Ext 的关联显然不是为在商店中使用而设计的，而是为处理单个记录而设计的……所以，我同意已经说过的，你最好在服务器端扁平化你的模型。尽管如此，有可能实现您想要的。

在您调用生成的 getter 方法（即）之前，该关联不会加载您的关联模型（即 Department `getDepartment()`）。尝试采用这种方式，即为商店中加载的每个页面记录调用此方法将需要大量的 hack，因为网格对商店的事件**同步**`refresh`反应，而该`getDepartment()`方法**异步**返回......

这就是为什么您必须在加载页面的同一请求中加载部门数据。也就是说，您的服务器必须返回以下形式的记录：

```
{title: 'First Page', body: 'Lorem', department_id: 1, department: {name: 'Foo'}} 
```

为了让您的 Page 模型的代理使用它，您需要以这种方式配置您的关联：

```
Ext.define('ExtMVC.model.Page', {
    // ...
    associations: [{
        type: 'belongsTo'
        // You need the fully qualified name of your associated model here
        // ... which will prevent Ext from generating everything magically
        ,model: 'ExtMVC.model.Department'

        // So you must also configure the getter/setter names (if you need them)            
        ,getterName: 'getDepartment'

        // Child data will be loaded from this node (in the parent's data)
        ,associationKey: 'department'

        // Friendly name of the node in the associated data (would default to the FQ model name)
        ,name: 'department'
    }]
}); 
```

然后是真正丑陋的部分。您的网格列无法使用经典`dataIndex`属性访问关联数据。但是，如果已经加载了相关记录，则可以通过以下方式访问`TemplateColumn`：

```
{
    header: 'Department'
    ,xtype: 'templatecolumn'
    ,tpl: '{department.name}'
} 
```

不幸的是，这将阻止您使用您可能已全局配置的一些更合适的列类（日期列等）。此外，该列丢失了它所代表的模型字段，这意味着某些基于自省的功能将无法发挥作用（例如，网格过滤器 ux 使用字段类型来自动决定筛选）。

但是在您暴露的特定情况下，这无关紧要...

## 完整示例

当你把它们放在一起（或[看到它在行动中](http://jsfiddle.net/rixo/vdazU/)）时，它会给出什么......

```
Ext.define('ExtMVC.model.Department', {
    extend: 'Ext.data.Model',
    fields: ['name'],
    proxy: {
        type: 'memory'
        ,reader: 'json'
        ,data: [
            {id: 1, name: 'Foo'}
            ,{id: 2, name: 'Bar'}
            ,{id: 30, name: 'Baz'}
        ]
    }
});

Ext.define('ExtMVC.model.Page', {
    extend: 'Ext.data.Model',
    fields: ['title','body','department_id'],
    associations: [{
        type: 'belongsTo'
        ,model: 'ExtMVC.model.Department'
        ,getterName: 'getDepartment'
        ,associationKey: 'department'
        ,name: 'department'
    }],
    proxy: {
        type: 'memory'
        ,reader: 'json'
        ,data: [
            {title: 'First Page', body: 'Lorem', department_id: 1, department: {name: 'Foo'}}
            ,{title: 'Second Page', department: {name: 'Bar'}}
            ,{title: 'Last Page', department: {name: 'Baz'}}
        ]
    }
});

Ext.define('ExtMVC.store.Pages', {
    extend: 'Ext.data.Store',
    model: 'ExtMVC.model.Page',
    autoLoad: true
});

Ext.define('ExtMVC.view.page.List', {
    extend: 'Ext.grid.Panel',
    alias : 'widget.pagelist',

    title : 'All Pages',
    store: Ext.create('ExtMVC.store.Pages'),

    initComponent: function() {
        this.tbar = [{
            text: 'Create Page', action: 'create'
        }];

        this.columns = [
            {header: 'Title', dataIndex: 'title', flex: 1}
            ,{header: 'Department', xtype: 'templatecolumn', flex: 1, tpl: '{department.name}'}
        ];

        this.callParent(arguments);
    }
});

Ext.widget('pagelist', {renderTo: 'ct', height: 200}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T14:06:00.350

正如其中一条评论所提到的，在使用网格/列表时，将部门名称绑定到 Pages 模型会简单得多。显示的非规范化并不是一件坏事。

另一种选择可能是反转建模，因为您可以说一个部门“有很多”页面。

这允许您在关系上定义主键和外键，然后您的百货商店将（每行）有一个自动的“pages()”存储，其中将包含子信息。

我通常为我想将“pages()”绑定到列表/网格的主/详细表单执行此操作，但例如将部门模型保留为表单上的主记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T11:27:53.993

为什么不应该在网格的列上使用渲染器配置功能？

这意味着在应用程序启动时预先（自动）加载部门存储（无论如何，您可能在更多地方需要它，将网格单元编辑器视为完整的部门列表）。

```
{
  name:'Department',
  dataIndex:'department_id',
  renderer: function(deptId){
    return Ext.data.StoreManager.lookup('Departments').getById(deptId).get('name');
  }
} 
```

PS：我正在使用自己的非规范化进行显示，但感觉不太好；）

# ibm-mobilefirst - Worklight Application Center v5.0.5 - 应用程序在 ios6 的下载阶段失败，适用于 ios5

> ID：15007119
> 
> 赞同：0
> 
> 时间：2013-02-21T16:17:12.900
> 
> 标签：ibm-mobilefirst

我正在尝试从运行 ios 6.1.2 的 iPhone 5 上的 Worklight Application Center Client（5.0.5 版本）下载应用程序。

十分之九的应用程序下载和安装将失败，而十分之一的应用程序将正确下载和安装。

我也尝试过使用运行 io5.1 的 iPhone，安装效果很好。它在运行 ios5.1 的 iPad 上也能正常工作。它在另一台运行 ios6.0 的 iPhone 上失败

我已经检查了诸如应用程序签名之类的问题，以及我是否使用了正确的 UDID，我可以说这些问题并没有导致问题，尤其是当您认为它在某些时候有效时。

这似乎与ios6特别有关。有没有其他人看到过这种行为或可以在解决它方面提供任何帮助？

提前致谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:53:55.577

iOS 6 的情况似乎在不久的将来发布的 Worklight 5.0.6 更好。

# asp.net - 如何检查 sproc 是否不返回结果

> ID：15007127
> 
> 赞同：0
> 
> 时间：2013-02-21T16:17:25.430
> 
> 标签：asp.net, sql, stored-procedures

我有一个存储过程，它接受部门名称并以 int 的形式返回部门 ID。我正在尝试使用该过程来确定具有指定名称的部门是否已经存在。我怎样才能做到这一点？如果 sproc 没有返回任何结果，那么它所代表的值是什么？它是空的吗？我是否应该使用单独的 sproc 来确定部门是否已经存在？这是我当前的存储过程：

```
 @Department_Name varchar(100),
    @Id int OUTPUT
AS
    SET NOCOUNT ON
SELECT @Id = Id FROM Department
WHERE Name = @Department_Name
    RETURN @Id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:22:43.923

“将结果集或数据从过程返回到调用程序有两种方式：输出参数和返回码”

[从存储过程返回数据](http://msdn.microsoft.com/en-us/library/ms188655.aspx)

[存储过程 - 输出参数和返回值](http://sqlserverpedia.com/wiki/Stored_Procedures_-_Output_Parameters_&_Return_Values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:24:09.573

> 可以在存储过程中使用返回值来向调用程序提供存储过程的执行状态。返回值 -99 到 0 保留供 SQL Server 内部使用。您可以创建自己的参数，这些参数可以传递回调用程序。默认情况下，存储过程（或任何一组 SQL 语句）的成功执行将返回 0。

您可以返回一些值来指示您的**@Id**为空。以及如何在 ASP 中获取从 SP 返回的值，您可以在此处阅读： [http](http://www.4guysfromrolla.com/webtech/tips/t100901-1.shtml) ://www.4guysfromrolla.com/webtech/tips/t100901-1.shtml 或者您可以参考这个答案：[https://stackoverflow。 com/a/2342862/1048105](https://stackoverflow.com/a/2342862/1048105)

# android - 在 Android 中清除 OpenGL 显示。

> ID：15007129
> 
> 赞同：2
> 
> 时间：2013-02-21T16:17:30.093
> 
> 标签：android, opengl-es

我有一个类可以确定是否应该通过布尔值绘制正方形。问题是，即使布尔值是假的，正方形也会保持不变。我的问题是，如果布尔值出现错误，我如何删除绘制的正方形？

```
public void onDrawFrame(GL10 unused) {

    // Draw background color
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    // Set the camera position (View matrix)
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    // Draw square
    Matrix.setRotateM(mRotationMatrix, 0, mAngle, 0, 0, -1.0f);

    // Combine the rotation matrix with the projection and camera view
    Matrix.multiplyMM(mMVPMatrix, 0, mRotationMatrix, 0, mMVPMatrix, 0);

    if (drawObject == true) {
    mSquare.draw(mMVPMatrix);
    }

    // Draw Square
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:22:09.527

好的，我找到了答案。

创建一个方法：

```
public void clearBuffers(boolean color, boolean depth, boolean stencil) {
    int bits = 0;
    if (color) {
        bits = GLES20.GL_COLOR_BUFFER_BIT;
    }
    if (depth) {
        bits |= GLES20.GL_DEPTH_BUFFER_BIT;
    }
    if (stencil) {
        bits |= GLES20.GL_STENCIL_BUFFER_BIT;
    }
    if (bits != 0) {
        GLES20.glClear(bits);
    }
} 
```

然后调用它：

```
 clearBuffers(true, true, true); 
```

清除屏幕上的所有内容。

# android - 在延伸到最大宽度的行和列上布置按钮

> ID：15007132
> 
> 赞同：0
> 
> 时间：2013-02-21T16:17:41.057
> 
> 标签：android, android-layout

我需要布局 4 行，每行并排包含 2 个按钮。棘手的部分（至少对我来说）是按钮需要具有相同的宽度和高度，具有最小和最大宽度和高度，并在其容器中居中。我可以接受相同宽度和高度的代码解决方案。

我尝试了以下布局，但按钮似乎不尊重最大宽度，它总是随着列的延伸超过它的最大允许宽度。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@+id/tableLayout1"
android:stretchColumns="*">
<TableRow
    android:id="@+id/tableRow1">
    <Button
        android:text="Button"
        android:layout_column="0"
        android:id="@+id/button1"
        android:minWidth="64"
        android:minHeight="64"
        android:maxWidth="128"
        android:maxHeight="128" />
    <Button
        android:text="Button"
        android:layout_column="1"
        android:id="@+id/button2"
        android:minWidth="64"
        android:minHeight="64"
        android:maxWidth="128"
        android:maxHeight="128" />
</TableRow>
<TableRow
    android:id="@+id/tableRow2">
</TableRow> 
```

任何帮助表示赞赏...

更新：我想要以下内容：

```
-----------------------
|   btn1   |   btn2   |
|   btn3   |   btn4   |
|   btn5   |   btn6   |
|   btn7   |   btn8   |
----------------------- 
```

这个想法是让布局扩展 100% 的宽度，因此列和按钮也是如此。但是按钮应该只扩展到最大宽度并以列为中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:28:07.320

您必须尝试利润，尽管我没有完全理解您的问题。抱歉:) 但我试过了...

![在此处输入图像描述](../Images/5ca301ef846310872dac072084cae45d.png)

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tableLayout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:divider="#fff000"
android:stretchColumns="*" >

<TableRow android:id="@+id/tableRow1" >

    <Button
        android:layout_column="0"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />

    <Button
        android:layout_column="1"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />
</TableRow>

<TableRow android:id="@+id/tableRow2" >

    <Button
        android:layout_column="0"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />

    <Button
        android:layout_column="1"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />
</TableRow>

<TableRow android:id="@+id/tableRow3" >

    <Button
        android:layout_column="0"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />

    <Button
        android:layout_column="1"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />
</TableRow>

<TableRow android:id="@+id/tableRow4" >

    <Button
        android:layout_column="0"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />

    <Button
        android:layout_column="1"
        android:layout_margin="20dp"
        android:maxHeight="128dp"
        android:maxWidth="128dp"
        android:minHeight="64dp"
        android:minWidth="64dp"
        android:text="Button" />
</TableRow> 
```

# ios - ARC 语义问题：没有可见的@interface

> ID：15007133
> 
> 赞同：1
> 
> 时间：2013-02-21T16:17:41.480
> 
> 标签：ios, xml, ios6

我想使用那些[http://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Source/XMLSupport/?r=129](http://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Source/XMLSupport/?r=129)文件解析一个简单的文件，但是当我想使用“nodesForXPath”函数它给了我一个错误，我实际上无法弄清楚为什么？看看这里：

[http://i45.tinypic.com/dwv0w.png](http://i45.tinypic.com/dwv0w.png)

这是来自 Google Data API 的 GDataXMLNode.m 文件中的函数实现：

[http://i45.tinypic.com/25krdrp.png](http://i45.tinypic.com/25krdrp.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:23:45.767

`nodesForXPath:error:`是编译器找不到的方法，在里面`GDataXMLDocument`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:45:32.777

`nodesForXPath`function 是为 class`GDataXMLNode`而不是为 class定义的`GDataXMLDocument`。所以，它给你一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:20:07.307

看起来你还没有导入 GDataXMLDocument.h

# javascript - Twitter JSON 调用仅适用于主页

> ID：15007138
> 
> 赞同：0
> 
> 时间：2013-02-21T16:17:53.120
> 
> 标签：javascript, json, api, twitter

我在我的网站 JSON、twitter API 和 Javascript 上显示一条推文。这条推文显示在我的主页上，但没有出现在任何子页面上。在子页面上，我在 JSON 调用中收到 401（未经授权）错误。有没有办法来解决这个问题？这是我的脚本：

```
(function($){
    $.fn.tweets = function(options) {
        $.ajaxSetup({ cache: true });
        var defaults = {
            tweets: 1,
            before: "<span>",
            after: "</span>"
        };
        var optionsWithDefaults = $.extend(defaults, options);
        return this.each(function() {
            var obj = $(this);
            $.getJSON('http://api.twitter.com/1/statuses/user_timeline.json?callback=?&screen_name='+optionsWithDefaults.username+'&count=' + optionsWithDefaults.tweets,
                function(data) {
                    $.each(data, function(i, tweet) {
                        if(tweet.text !== undefined) {
                            $(obj).append(optionsWithDefaults.before+tweet.text+optionsWithDefaults.after);
                        }
                    });
                }
            );
        });
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:55:01.113

如果您`401 Unauthorized`从 Twitter API 收到 HTTP 错误，则意味着您正在尝试访问需要用户身份验证的 API 的某些部分（请参阅[错误代码和响应](https://dev.twitter.com/docs/error-codes-responses)）。

由于您没有指定其他页面中的不同之处，我认为您正在尝试请求不同的内容，例如搜索。对于此类请求，您需要获得授权。要了解有关如何授权用户的更多信息，我建议您查看[实施使用 Twitter 登录](https://dev.twitter.com/docs/auth/implementing-sign-twitter)。

# android - Android File Transfer 看不到应用创建的文件夹

> ID：15007139
> 
> 赞同：7
> 
> 时间：2013-02-21T16:17:53.647
> 
> 标签：android, macos, file, transfer

我已经在 mac 上安装了“android 文件传输”。我的应用程序创建一个文件夹并在其中创建一个文件（AndroidManifest.xml 中存在权限），将一些数据写入该文件。文件存在，我可以使用我的 android 设备中的标准文件管理器访问它。它显示了许多文件夹，包括我的文件夹，我什至可以在设备上看到我的文件的内容。

但问题是“android 文件传输”显示了所有其他文件夹，但没有显示我的文件夹和文件。我什至尝试只创建一个文件，而不是目录。结果相同。

拔下设备或重新启动“android 文件传输”没有帮助。

也许“android文件传输”是坏掉的工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T16:21:58.017

> 也许“android文件传输”是坏掉的工具？

不。

在 Android 3.0+ 上，您需要让媒体扫描仪为您的文件编制索引，然后它才能通过 MTP 显示到您的 Mac。[静态`scanFile()`方法`MediaScannerConnection`](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28android.content.Context,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20android.media.MediaScannerConnection.OnScanCompletedListener%29)是您最好的选择恕我直言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-18T07:02:26.333

我只是有一个类似的问题。对于 Android 6.0.1，只需重启设备即可解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-17T18:35:58.687

这是一个调用 Android Media Scanner 的简单工具。

[https://play.google.com/store/apps/details?id=com.addz.mediascanner&hl=en](https://play.google.com/store/apps/details?id=com.addz.mediascanner&hl=en)

在您的 Android 设备上安装并运行它，丢失的文件应该会显示在您计算机上的 Android 文件传输中。

# sql - VM 快照期间与 SQL 的 BizTalk 连接问题

> ID：15007140
> 
> 赞同：3
> 
> 时间：2013-02-21T16:17:55.287
> 
> 标签：sql, vmware, biztalk

我们有一个用于 BizTalk 的 VM 和一个用于 SQL 后端的单独 VM。我们使用 Veeam 进行备份，这基本上会启动虚拟机的快照。在 SQL VM 上完成此快照时，应用程序服务器上的 BizTalk 服务将失败。通常它们会自动重新启动，但有时这需要手动干预才能启动服务。下面的错误记录在 BizTalk 服务器上。

是否有任何超时设置或配置更改允许 BizTalk 服务在快照过程中保持正常运行？

发生错误，需要终止 BizTalk 服务。最常见的原因如下： 1) 意外的内存不足错误。或 2) 无法连接或失去与 BizTalk 数据库之一的连接。该服务将在 1 分钟后关闭并自动重启。如果有问题的数据库仍然不可用，则此循环将重复。

错误消息：[DBNETLIB][ConnectionRead (recv()).]一般网络错误。检查您的网络文档。错误来源：

BizTalk 主机名：BizTalkServerApplication Windows 服务名称：BTSSvc$BizTalkServerApplication

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-23T20:46:42.310

我们在使用 BizTalk 2009 和 BizTalk 2013 时遇到了相同的情况和错误，每个都设置有两台应用服务器和一台 SQL DB 服务器。

当我们的 VMware 在应用程序服务器上执行快照备份的最后一步时，它会冻结应用程序服务器大约 10 秒，阻止它接收数据包。在 SQL Server 2008 和 2012 上，默认情况下它将每 30 秒（30,000 毫秒）向客户端发送一次保持活动数据包。如果 SQL Server 未能接收到来自 App 服务器的响应，它将每隔 1 秒（1,000 毫秒）发送 5 次重试（默认设置）的 keep-alive 请求。如果 SQL 仍然没有收到响应，它将终止连接，这将导致应用服务器上的 BizTalk 主机重置，在我们的例子中，当我们的德国制造的 ERP 系统在此期间将其 EDI 文档发送到 BizTalk重置期间，传输将失败。

我们通过在 DB 和 App 服务器上运行 NetMon 来解决问题，等待下一条错误消息。经过检查，我们看到五个 SQL keep-alive 数据包以 1 秒的间隔发送到应用服务器，同时应用服务器上根本没有收到任何数据包。乍一看，人们可能会认为它们“只是丢弃了网络数据包”，但这种情况很少见。然后，我们对 VM 快照的时间进行了关联，现在确认每天每次快照完成时，应用服务器都会冻结。

作为中短期解决方法，我们通过添加注册表值 TcpMaxDataRetransmissions 并将其设置为 30（因此在 SQL 声明连接前 30 秒），提高了在声明连接失效之前的 SQL 重试次数（默认为 5）。客户无反应）。这暂时掩盖了我们的问题，请自行决定使用。

我们还在研究基于代理的虚拟机快照版本，它可能会缓解服务器冻结的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:51:37.783

> 是否有任何超时设置或配置更改允许 BizTalk 服务在快照过程中保持正常运行？

我不知道，但是您可能希望在 BizTalk 安装目录中的*btsntsvc.exe.config文件中使用 Google 配置选项。*

通过 BizTalk 的所有消息都写入 BizTalkMsgBoxDb，如果您正在运行跟踪、BAM 等，则涉及其其他数据库。唯一可以缓存“资料”和处理数据库中断的服务是企业单点登录 (ESSO)服务。因此，BizTalk 需要与数据库服务器建立持久连接以保持“启动”状态，这就是为什么您的主机实例 (BizTalkServerApplication) 正在停止 - 如果数据库不存在，它根本无法处理消息。

我要补充一点，Microsoft 可能不支持您的备份方法，我进一步建议您认真考虑在备份期间使数据库服务器脱机的方法是否可行？

BizTalk 为产品中内置的各种数据库提供了一个非常强大的备份解决方案，我建议您看看使用这种*受支持*的方法。

如果您确实需要拍摄数据库系统的快照（例如每晚一次），您可能需要考虑停止 BizTalk 主机实例，执行快照，然后通过某些脚本任务重新启动主机实例。

您可能还需要考虑检查累积更新中是否包含针对您的 BizTalk Server 版本的任何修补程序，这些修补程序可能有助于解决您的问题。

# html - 将目录内容获取到主干中的 json

> ID：15007144
> 
> 赞同：0
> 
> 时间：2013-02-21T16:18:02.243
> 
> 标签：html, backbone.js, render, models, fetch

我有包含图像的文件夹；我在文件夹 uploads/ 上调用 fetch，我的 GET 以 HTML 格式返回以下响应（无 json 等）

```
<h1>Index of /backbone_images/uploads</h1>
<ul><li><a href="/backbone_images/"> Parent Directory</a></li>
<li><a href="2012-12-11%2015.30.221.jpg"> 2012-12-11 15.30.221.jpg</a></li>
<li><a href="ian1.jpg"> in1.jpg</a></li>
<li><a href="imagedummy.png"> imagedummy.png</a></li> 
```

我尝试使用以下代码将/我获取的数据渲染到模型等中：

```
window.Person = Backbone.Model.extend({});

window.AddressBook = Backbone.Collection.extend({
    url: 'uploads/',// declare url in collection
    model: Person
});

    window.Addresses = new AddressBook();

    window.AppView = Backbone.View.extend({
        el: $('#left_col'),
        initialize: function() {
            Addresses.bind('reset', this.render); // bind rendering to Addresses.fetch()
        },
        render: function(){
            console.log(Addresses.toJSON());
        }
    });

    window.appview = new AppView();
    Addresses.fetch(); 
```

但是没有任何东西被渲染或附加到我的左列：所以-->我可以从包含这样的图像的目录中获取吗？另外，我可以对 HTML 响应做什么，如何将其加载到模型中，使其呈现等（如果有任何方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:01:05.733

您应该将 HTML 响应更改为 JSON 格式，以便`Backbone`正确呈现它（尽管有一种方法可以显示`HTML`上面的内容，但这不是推荐的方法，因为它更好地呈现原始数据）。

你可以这样做：

**HTML：**

```
<div id="container">
</div> 
<script id="template" type="text/html">
    <li><img src=<%- dir %><%- image %> /></li>
</script> 
```

**JavaScript：**

```
$(function(){
    /** Your response object would look something like this. */
    var json = {'parent_directory': 
                   {'dir_desc': 'Index of /backbone_images/uploads',
        'images': [
            {'dir': '/images/', 'image': 'image1.jpg'}, 
            {'dir': '/images/', 'image': 'image2.jpg'}, 
            {'dir': '/images/', 'image': 'image3.jpg'}
        ]
    }};

    /** Create a simple Backbone app. */
    var Model = Backbone.Model.extend({});

    var Collection = Backbone.Collection.extend({
        model: Model
    });

    var View = Backbone.View.extend({
        tagName: 'ul',
        initialize: function() {
            this.render();
        },
        template: _.template($('#template').html()),
        render: function() {
            _.each(this.collection.toJSON(), function(val){ 
                this.$el.append(this.template({
                    image: val.image, 
                    dir: val.dir}));
            }, this);
            return this;
        }
    });

    /** Create a new collection and view instance. */
    var newColl = new Collection(json.parent_directory.images);
    var newView = new View({collection: newColl});
    $('#container').html(newView.el);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:44:29.707

您应该将其绑定到`sync`事件

我也更喜欢使用`listenTo`

`this.listenTo(Addresses, 'sync', this.render)`

# c - 为 ATMEL 的 AT89C51 微控制器设置 I/O 引脚的 C 代码

> ID：15007148
> 
> 赞同：0
> 
> 时间：2013-02-21T16:18:14.210
> 
> 标签：c, io, atmel

任何人都可以帮助我如何在 C 编程中设置 I/O 配置。这是我的代码，我使用 keil uvision4 作为我的 ide 来生成 hex 文件和 isis proteus 来建模电路。

当我尝试使用`DDRA=0xFF`and时`PORTA=0`。我收到未定义 DDRA 和 PORTA 的错误。是否有任何特定的标题我必须包括不是

这是代码

```
 #include <AT89X51.H>

 #define PORT2     P2

void main (void)
{
DDRA=0xff;
    PORTA=0xff; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-22T23:13:25.437

我知道这很旧，但我刚刚遇到它，也许其他人也会

看起来您缺少一个包含：

```
#include <avr/io.h> 
```

这应该为您提供您正在寻找的 PORTx 和 DDRx 定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:53:06.333

您可能需要包含一个注册文件示例`#include <REGX51.H>`。它具有端口的定义，因此您可以`P2`直接使用 etc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T13:42:21.480

我认为这 3 个 regs：PORTA DDRA PINA 只能用于 AVR MCU 系列，例如 ATmega8，不能用于 51 cmpatibility MCU。

这就是为什么您找不到 regs 的定义位置的原因。

执行以下操作：

1, `#include <REGX51.H>`, 不是`avr/io.h`AVR MCU 系列

2、操作IO口为P0、P1、P2

当你想写端口时，P0 = 0xFF;

# c++ - 使用 OpenGL 绘图而不杀死 CPU 并且不并行化

> ID：15007150
> 
> 赞同：3
> 
> 时间：2013-02-21T16:18:15.830
> 
> 标签：c++, performance, qt, opengl, concurrency

我正在为我的工作编写一个简单但有用的 OpenGL 程序，其中包括显示矢量场的外观。所以程序只是从文件中获取数据并绘制箭头。我需要画几千支箭。我正在将 Qt 用于 Windows 和 OpenGL API。

箭头单元是一个圆柱体和一个圆锥体，在函数 Arrow() 中组合在一起。

```
for(long i = 0; i < modifiedArrows.size(); i++) {
    glColor4d(modifiedArrows[i].color.redF(),modifiedArrows[i].color.greenF(),
        modifiedArrows[i].color.blueF(),modifiedArrows[i].opacity);
    openGLobj->Arrow(modifiedArrows[i].fromX,modifiedArrows[i].fromY,
        modifiedArrows[i].fromZ,modifiedArrows[i].toX,
        modifiedArrows[i].toY,modifiedArrows[i].toZ, 
        simulationSettings->vectorsThickness);
} 
```

现在的问题是运行一个无限循环来继续绘制它会使 CPU 完全忙碌，这不是很好。我尽可能地尝试从 paintGL() 函数中删除所有计算，只剩下简单的计算。我用 glFlush() 和 glFinish() 结束 paintGL() 函数，但我的主 CPU 总是满的。

如果我删除这个循环，CPU 就不会太忙了。但无论如何我都要画上千支箭。

除了并行化之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T18:43:53.543

你没有指出你是如何实现你的 openGLobj->Arrow 方法的，但是如果你在这上面使用 100% CPU 时间，你可能正在用[immediate mode](https://stackoverflow.com/questions/6733934/what-does-immediate-mode-mean-in-opengl)绘制箭头。这确实是 CPU 密集型的，因为您必须为 glBegin() 和 glEnd() 中的每条指令将数据从 CPU 传输到 GPU。如果您使用 GLUT 来绘制数据，那么它也非常低效。

此处的方法是使用 GPU 内存和处理能力来显示您的数据。Phyatt 已经为您指出了一些方向，但我会尝试更具体：使用[顶点缓冲区对象 (VBO)](http://www.songho.ca/opengl/gl_vbo.html)。

这个想法是预先分配所需的内存以在 GPU 上显示您的数据，并在需要时更新这块内存。这可能会对代码的效率产生巨大影响，因为您将使用高效的视频卡驱动程序来处理 CPU->GPU 传输。

为了说明这个概念，我将在答案的末尾向您展示一些伪代码，但这绝不是完全正确的。我没有测试它，也没有时间为你实现绘图，但它是一个可以让你理清思路的概念。

```
class Form
{
    public:
    Form()
    {
        // generate a new VBO and get the associated ID
        glGenBuffers(1, &vboId);

        // bind VBO in order to use
        glBindBuffer(GL_ARRAY_BUFFER, vboId);

        //Populate the buffer vertices.
        generateVertices();

        // upload data to VBO
        glBufferData(GL_ARRAY_BUFFER_ARB, vertices.size(), vertices.data(), GL_STATIC_DRAW_ARB);
    }

    ~Form()
    {
        // it is safe to delete after copying data to VBO
        delete [] vertices;

        // delete VBO when program terminated
        glDeleteBuffersARB(1, &vboId);
    }

    //Implementing as virtual, because if you reimplement it on the child class, it will call the child method :)
    //Generally you will not need to reimplement this class
    virtual void draw()
    {
        glBindBuffer(GL_ARRAY_BUFFER, vboId);
        glEnableClientState(GL_VERTEX_ARRAY);           
        glVertexPointer(3, GL_FLOAT, 0, 0);

        //I am drawing the form as triangles, maybe you want to do it in your own way. Do it as you need! :)
        //Look! I am not using glBegin() and glEnd(), I am letting the video card driver handle the CPU->GPU 
        //transfer in a single instruction!
        glDrawElements(GL_TRIANGLES, vertices.size(), GL_UNSIGNED_BYTE, 0);

        glDisableClientState(GL_VERTEX_ARRAY);

        // bind with 0, so, switch back to normal pointer operation
        glBindBufferARB(GL_ARRAY_BUFFER_ARB, 0);
    }

private:
    //Populate the vertices vector with the form vertices.
    //Remember, any geometric form in OpenGL is rendered as primitives (points, quads, triangles, etc).
    //The common way of rendering this is to use multiple triangles.
    //You can draw it using glBegin() and glEnd() just to debug. After that, instead of rendering the triangles, just put
    //the generated vertices inside the vertices buffer.
    //Consider that it's at origin. You can use push's and pop's to apply transformations to the form.
    //Each form(cone or cilinder) will have its own way of drawing.
    virtual void generateVertices() = 0;

    GLuint vboId; 
    std::vector<GLfloat> vertices;
}

class Cone : public Form
{
public:
    Cone() : Form() {}
    ~Cone() : ~Form() {}

private:
    void generateVertices()
    {
        //Populate the vertices with cone's formula. Good exercise :)
        //Reference: http://mathworld.wolfram.com/Cone.html
    }

    GLuint vboId; 
    std::vector<GLfloat> vertices;
}

class Cilinder : public Form
{
public:
    Cone() : Form() {}
    ~Cone() : ~Form() {}

private:
    void generateVertices()
    {
        //Populate the vertices with cilinders's formula. Good exercise :)
        //Reference: http://math.about.com/od/formulas/ss/surfaceareavol_3.htm
    }

    GLuint vboId; 
    std::vector<GLfloat> vertices;
}

class Visualizer : public QOpenGLWidget
{
public:
    //Reimplement the draw function to draw each arrow for each data using the classes below.
    void updateGL()
    {
        for(uint i = 0; i<data.size(); i++)
        {
            //I really don't have a clue on how you position your arrows around your world model.
            //Keep in mind that those functions glPush, glPop and glMatrix are deprecated. I recommend you reading
            //http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Chapter-3:-3D-transformation-and-projection.html if you want to implement this in the most efficient way.
            glPush();
                glMatrix(data[i].transform());
                cilinder.draw();
                cone.draw();
            glPop();
        }
    }

private:
    Cone cone;
    Cilinder cilinder;
    std::vector<Data> data;
} 
```

最后一点，我不能保证这是最有效的做事方式。可能，如果您有大量数据，您将需要一些数据结构，例如[八叉树](http://en.wikipedia.org/wiki/Octree)或[场景图](http://en.wikipedia.org/wiki/Scene_graph)来优化您的代码。

I recommend you taking a look at [OpenSceneGraph](http://www.openscenegraph.org/projects/osg) or [Visualization ToolKit](http://www.vtk.org/) to see if that methods are not already implemented for you, what would save you a lot of time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:17:56.927

试试这个链接以获得一些想法：

*   [OpenGL 编码（尤其是 wrt 面向对象）有哪些最佳实践？](https://stackoverflow.com/questions/166356/what-are-some-best-practices-for-opengl-coding-esp-w-r-t-object-orientation)

基本上，我所看到的人们为提高 FPS 和掉落质量所做的工作包括以下内容：

*   使用显示列表。（缓存复杂或重复的矩阵堆栈）。

*   使用顶点数组。

*   使用较少面的更简单的几何体。

*   使用更简单的照明。

*   使用更简单的纹理。

OpenGL 的主要优点是可以与很多显卡一起使用，这些显卡可以非常快速地执行大量 4x4 矩阵转换、乘法等，并且它们提供更多 RAM 内存来存储渲染或部分渲染的对象。

假设所有的向量都发生了如此大的变化并且经常发生你无法缓存任何渲染的情况......

我解决这个问题的方法是将绘图简化为仅线和点，并以所需的帧速率进行绘制。（圆柱体的线条和方向末端的彩色点。）

在画得足够快之后，尝试使绘图更复杂，比如用矩形棱柱代替直线，用金字塔代替彩色点。

圆形物体通常需要更多的表面和计算。

我不是这方面的专家，但我会在谷歌上搜索其他处理优化的 OpenGL 教程。

希望有帮助。

编辑：由于评论，删除了对 NeHe 教程的引用。

# c# - 如何在某些情况下禁用转换器

> ID：15007152
> 
> 赞同：2
> 
> 时间：2013-02-21T16:18:20.540
> 
> 标签：c#, wpf, xaml

**当autosize**为 false时如何禁用以下转换器。**我应该在什么都不做的**地方放什么代码。

```
[ValueConversion(typeof(Boolean), typeof(Double))]
public class ConvertAutoSize2HeightWidth : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Boolean autosize = (Boolean)value;
        if (autosize)
            return Double.NaN;
        else
            //**do nothing**
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:31:02.917

你可以尝试退货[`Binding.DoNothing`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.donothing.aspx)。

> 绑定源属性或转换器可以返回 Binding.DoNothing 以指示绑定引擎不执行任何操作。例如，指示绑定引擎不要将值传输到绑定目标，不要移动到[PriorityBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.prioritybinding.aspx)中的下一个[绑定](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.aspx)，或者不要使用**FallBackValue**或默认值。

# javascript - 一页上的多个地图 - ColdFusion

> ID：15007155
> 
> 赞同：2
> 
> 时间：2013-02-21T16:18:28.930
> 
> 标签：javascript, google-maps-api-3, coldfusion, coldfusion-8

卡在谷歌地图上

使用 ColdFusion - 我正在填充 Arena 的列表...如果有地图，我想要下拉地图 - 并链接以添加地图。用于填充地图并标记它的链接可以正常工作。

当我有多个条目时 - 我没有得到多个地图 - 只得到最后结果的地图显示。

我已经尝试过一些我过去使用过的其他编码 - 但仍然没有运气好使用多个地图 - 所以从这个看起来更简单的 javascript 开始。

任何帮助表示赞赏。删除旧代码 - 转到当前工作 - 只是不显示标记

```
 <img src="../images/gps1.png" height=25 border=0 alt="Show Map" onclick="javascript:showElement('g#aid#')"> 
```

另外 - 当我使用 style="display:none;" 使用 Google Map Div：

```
 <div id="g#aid#" style="width: 600px; height: 300px;" style="display:none;"></div> 
```

下拉地图被窃听而不是居中。没有它——它关闭和打开都很好——但总是默认打开。

正如建议的那样 - 这是 Javascript 输出...下面是 2 个结果的输出...只有最后一个显示地图..

以下是一些进展 - 从 Google API 开始 - 这就是我所在的位置......

有一个身体负载来完成这项工作......

所有地图都正确显示......甚至添加了另一个......只是没有得到标记......我已经尝试过谷歌标记代码......还没有运气......所以只是去正确显示地图的代码......

只需要弄清楚地图标记...

```
 <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

    <cfoutput query=arena">

    <script>
    var map;
    function initialize() {
    var mapOptions = {
      zoom: 13,
      center: new google.maps.LatLng(#arena.agpslat#,#arena.agpslong#),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('g#arena.aid#'),
        mapOptions);

    }

    google.maps.event.addDomListener(window, 'load', initialize);
   </script>

   <div id="g#arena.aid#" style="width: 600px; height: 300px;"></div>

    </cfoutput> 
```

添加这个：没有给我一个标记......

```
 var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: '#arena.arename#'
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:47:47.000

问题是您正在调用 JS 文件并在查询循环中定义同名函数。您需要将这些东西移出您的查询循环，以便您只调用文件并创建一次函数。

因此，与其在循环中每次都重新创建初始化函数，不如将其移出循环。而是从循环中调用该函数，每次将不同的 lat/lng 值、div ID 和名称传递给它。

从 body 标记中删除对您的初始化函数的任何现有调用，只需在窗口加载时使用 google 事件侦听器，每次将不同的参数传递给`initialize`.

类似于以下内容：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>

 <script>
  var arenas = []; // array of arenas, to be populated later within the query loop
  function initialize() {
    var intArena, myLatlng, mapOptions, map, marker;

    // loop over all the arenas, creating maps and markers for each
    for (intArena = 0; intArena < arenas.length; intArena++) {
      myLatlng = new google.maps.LatLng(arenas[intArena].lat, arenas[intArena].lng);
      mapOptions = {
        zoom: 11,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      map = new google.maps.Map(document.getElementById(arenas[intArena].id), mapOptions);

      marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          title: arenas[intArena].name
      });
    }
  }

  google.maps.event.addDomListener(window, 'load', initialize);
 </script>

<cfoutput query="arena">
  <cfif arena.agpslat is not "" and arena.agpslong is not "">
    <script>
      // add struct of arena data to the array for use later on in the initialize function
      arenas.push({
        lat: #arena.agpslat#, 
        lng: #arena.agpslong#, 
        id: 'g#arena.aid#', 
        name: '#JsStringFormat(arena.arenaname)#'
      });
    </script>

    <div id="g#arena.aid#" style="width: 600px; height: 300px;"></div>
  </cfif>  

  <div align=center>g#arena.aid#<br><b>[ <a href="arenagps.cfm?aid=#arena.aid#"><font color=cc3300>Change/Add Using Map Function</font></a> ]</b><br></div>
 </cfoutput> 
```

另请注意，我已在对您的查询列的引用前加上查询名称。正确界定所有变量的范围几乎总是一个好主意。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T00:44:23.813

得到......谢谢所有的建议......

需要一个

```
 <body onload="initialize()"> 
```

ColdFusion Coding - 使用变量重命名函数和 mapoption - 所以它们总是不同的。

```
 <cfoutput query=arena>

  <cfif arena.agpslat is not "" and arena.agpslong is not "">

   <script type="text/javascript">
 function initialize() {
    var #arena.aid#Latlng = new google.maps.LatLng(#arena.agpslat#,#arena.agpslong#);

    var #arena.aid#Options = {
        zoom: 15,
        center: #arena.aid#Latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById("g#arena.aid#"), #arena.aid#Options);

    var marker = new google.maps.Marker({
        position: #arena.aid#Latlng,
        map: map,
        title: '#arena.arenaname#'
      });

}

google.maps.event.addDomListener(window, 'load', initialize);
  </script>

  <div id="g#arena.aid#" style="width: 600px; height: 300px;"></div>

  <div align=center>g#arena.aid#<br><b>[ <a href="arenagps.cfm?aid=#arena.aid#"><font color=cc3300>Change/Add Using Map Function</font></a> ]</b><br></div>

  </cfif>

 </cfoutput> 
```

# css - Rails App上的自定义字体未加载

> ID：15007158
> 
> 赞同：0
> 
> 时间：2013-02-21T16:18:33.837
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, sass

超级简单的问题，我期待。我正在尝试将我的自定义字体上传到服务器，如下所示：

**自定义.css.scss**

```
p, ol, li, a, td, ul, h1, h2, h3, h4, h5, h6, label {
  font-family: rockwell;
  src: url('/assets/Rockwell.TTF');
  text-align: left;
  em {
    font-family: rockwell;
    font-style: italic;
    src: url('/assets/RockwellItalic.TTF');
  }
  strong {
    font-family: rockwell;
    font-weight: bold;
    src: url('/assets/RockwellBold.TTF');
  }
} 
```

我尝试将这三个 TTF 文件直接放在 app/assets（当前尝试）和 app/assets/stylesheets 中。当我做后者时，我尝试了 src url 作为 /stylesheets/Rockwell.ttf 和 /app/assets/stylesheets/Rockwell.ttf。

这些都没有真正起作用。当我的朋友在他的浏览器中加载网站时，它是另一种字体。知道我做错了什么吗？/ 如何解决？如果这是纯 CSS3，我如何确保我使用的是 CSS3？

编辑——我一直在试图弄清楚应用程序是否无法找到字体文件，所以我检查了检查元素的网络/字体选项卡。无论我是否提供了真实的路径（我错误地尝试过 /stylesheetsRockwell.ttf），都没有出现任何内容。

编辑——用粗体和斜体包装的可能方法？

```
@font-face {
  font-family: 'Rockwell';
  src: url('<%= asset_path("Rockwell.ttf") %>');
  font-weight: normal;
  font-style: normal;
  strong {
    src: url('<%= asset_path("RockwellBold.ttf") %>');
  }
  em {
    src: url('<%= asset_path("RockwellItalic.ttf") %>');
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:44:00.423

什么对我有用：

我将字体添加到新的 assets/fonts/ 目录，然后将其添加到资产路径

**配置/应用程序.rb**

```
config.assets.paths << "#{Rails.root}/app/assets/fonts" 
```

然后我声明了一堆字体，我将它们分别分配给我想要的正常、粗体和斜体的项目：

**排版.css.erb.scss**

```
/* font families */

@font-face {
  font-family: 'Rockwell';
  src: url('<%= asset_path("Rockwell.ttf") %>');
  font-weight: normal;
  font-style: normal;
}
@font-face {
  font-family: 'Rockwell Italic';
  src: url('<%= asset_path("RockwellItalic.ttf") %>');
}
@font-face {
  font-family: 'Rockwell Bold';
  src: url('<%= asset_path("RockwellBold.ttf") %>');
}

p, ol, small, ul, li, td, th, h3, h4, h5 ,h6, label {
  font-family: Rockwell; # The elements I wanted defaulted to normal
}

h1, h2, a, strong {
  font-family: 'Rockwell Bold'; # The elements I wanted defaulted to bold
}

li {
  small {
    font-family: 'Rockwell Bold'; # Subset I wanted defaulted bold
  }
}

em {
  font-family: 'Rockwell Italic'; # Manual italic
}

# Whenever I wanted italic or bold, I did it through font-family for consistency. 
```

这意味着将所有 css 文件转换为 css.erb.scss 文件，因此他们理解“<%=asset_path”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:59:48.060

在 Rails 项目中，我像处理样式表或图像一样构建字体：

> 样式/样式表/myStyle.css
> 
> 样式/图像/myImage.jpg
> 
> 样式/字体/myFont.ttf

# qt - OpenGL 纹理映射内存泄漏

> ID：15007160
> 
> 赞同：2
> 
> 时间：2013-02-21T16:18:42.837
> 
> 标签：qt, opengl, opencv, memory-leaks, textures

我正在编写一个视频内容分析应用程序，用于分析录制和实时视频。

我使用 opengl 在 qt 界面上显示视频（使用 qglwidgets）。如果显卡支持，我正在使用带有图片缓冲区对象的纹理映射（这里是参考： http: [//www.songho.ca/opengl/gl_pbo.html](http://www.songho.ca/opengl/gl_pbo.html)）来显示视频（从 OpenCV 的 IPLImage 加载）。

问题是，应用程序的内存随着时间的推移不断增加。大约。每秒 4-8KB。我正在使用任务管理器来验证这一点。
我已经缩小了视频渲染的问题范围，因为我看到很多关于未释放纹理的帖子，这会导致内存使用，但我无法找到解决我的问题的方法。

我只在 initializeGL() 中使用 glGenTextures，所以纹理只生成一次并重复使用。

这是问题所在的代码：

```
void paintGL(){  
static int index = 0;  
int nextIndex = 0;                  // pbo index used for next frame  
if(paintFlag){  
    if(pboMode > 0) {  
// "index" is used to copy pixels from a PBO to a texture object  "nextIndex" is used to update     pixels in a PBO    

if(pboMode == 1){  
// In single PBO mode, the index and nextIndex are set to 0  

        index = nextIndex = 0;
        }
        else if(pboMode == 2)
        {
            // In dual PBO mode, increment current index first then get the next index
            index = (index + 1) % 2;
            nextIndex = (index + 1) % 2;
        }

        // start to copy from PBO to texture object ///////

        // bind the texture and PBO
        glBindTexture(GL_TEXTURE_2D, texture);
        glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, pboIds[index]);

        // copy pixels from PBO to texture object
        // Use offset instead of ponter.
        glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, WIDTH, HEIGHT, GL_BGR, GL_UNSIGNED_BYTE, 0);

        // measure the time copying data from PBO to texture object
        //t1.stop();
        //copyTime = t1.getElapsedTimeInMilliSec();
        ///////////////////////////////////////////////////

        // start to modify pixel values ///////////////////
        //       t1.start();

        // bind PBO to update pixel values
        glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, pboIds[nextIndex]);

        // map the buffer object into client's memory
        // Note that glMapBufferARB() causes sync issue.
        // If GPU is working with this buffer, glMapBufferARB() will wait(stall)
        // for GPU to finish its job. To avoid waiting (stall), you can call
        // first glBufferDataARB() with NULL pointer before glMapBufferARB().
        // If you do that, the previous data in PBO will be discarded and
        // glMapBufferARB() returns a new allocated pointer immediately
        // even if GPU is still working with the previous data.
        glBufferDataARB(GL_PIXEL_UNPACK_BUFFER_ARB, DATA_SIZE, 0, GL_STREAM_DRAW_ARB);
        GLubyte* ptr = (GLubyte*)glMapBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, GL_WRITE_ONLY_ARB);
        if(ptr)
        {
            // update data directly on the mapped buffer
            //updatePixels(ptr, DATA_SIZE);
            memcpy(ptr,original->imageData,DATA_SIZE);
            glUnmapBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB); // release pointer to mapping buffer
        }

        // measure the time modifying the mapped buffer
        //t1.stop();
        //updateTime = t1.getElapsedTimeInMilliSec();
        ///////////////////////////////////////////////////

        // it is good idea to release PBOs with ID 0 after use.
        // Once bound with 0, all pixel operations behave normal ways.
        glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, 0);
    }
    else
    {
        ///////////////////////////////////////////////////
        // start to copy pixels from system memory to textrure object
        //t1.start();

        glBindTexture(GL_TEXTURE_2D, texture);
        glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, WIDTH, HEIGHT, GL_BGR, GL_UNSIGNED_BYTE, (GLvoid*)original->imageData);

        //t1.stop();
        //copyTime = t1.getElapsedTimeInMilliSec();

    }
    paintFlag=false;
}

// clear buffer
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);
glBegin(GL_QUADS);
glTexCoord2i(0,1); glVertex2i(0,HEIGHT);
glTexCoord2i(0,0); glVertex2i(0,0);
glTexCoord2i(1,0); glVertex2i(WIDTH,0);
glTexCoord2i(1,1); glVertex2i(WIDTH,HEIGHT);
glEnd();
glFlush();
glBindTexture(GL_TEXTURE_2D, 0);
swapBuffers();
glDeleteBuffers(1,&texture);
updateGL(); 
} 
```

代码与教程中的代码几乎相同。但是，我的纹理数据来自 IplImage 结构，该结构由单独的线程不断更新。我还使用 boost 的 lock_guard 进行同步。

我在这里做错了什么吗？

编辑：我正在添加剩余的代码：

```
//Constructor, this is where all the allocation happens
const int    DATA_SIZE = WIDTH * HEIGHT * 3;
QGLCanvas::QGLCanvas(QWidget* parent,QString caption)
    : QGLWidget(parent)
{
    imageFormat=QImage::Format_RGB888;
this->name=caption;
original=cvCreateImage(cvSize(WIDTH,HEIGHT),IPL_DEPTH_8U,3);
if(this->name=="Background")
    bgFrameBackup=cvCreateImage(cvSize(WIDTH,HEIGHT),IPL_DEPTH_8U,3);
cvZero(original);
//cvShowImage("w",original);
//cvWaitKey(0);

switch(original->nChannels) {
case 1:
    format = GL_LUMINANCE;
    break;
case 2:
    format = GL_LUMINANCE_ALPHA;
    break;
case 3:
    format = GL_BGR;
    break;
default:
    return;
}

drawing=false;
setMouseTracking(true);
mouseX=0;mouseY=0;
startX=0; endX=0;
startY=0; endY=0;
dialog=new EntryExitRuleDialog();
makeCurrent();
GLenum result=glewInit();
if(result){
    qDebug()<<(const char*)(glewGetErrorString(result));
}
//qDebug()<<"Open GL Version: "<<(const char*)glGetString(GL_VERSION);
bgColor=QColor::fromRgb(100,100,100);
initializeGL();
qglClearColor(bgColor); 
glInfo glInfo;
glInfo.getInfo();

#ifdef _WIN32
// check PBO is supported by your video card

if(glInfo.isExtensionSupported("GL_ARB_pixel_buffer_object"))
{
    // get pointers to GL functions
    glGenBuffersARB = (PFNGLGENBUFFERSARBPROC)wglGetProcAddress("glGenBuffersARB");
    glBindBufferARB = (PFNGLBINDBUFFERARBPROC)wglGetProcAddress("glBindBufferARB");
    glBufferDataARB = (PFNGLBUFFERDATAARBPROC)wglGetProcAddress("glBufferDataARB");
    glBufferSubDataARB = (PFNGLBUFFERSUBDATAARBPROC)wglGetProcAddress("glBufferSubDataARB");
    glDeleteBuffersARB = (PFNGLDELETEBUFFERSARBPROC)wglGetProcAddress("glDeleteBuffersARB");
    glGetBufferParameterivARB = (PFNGLGETBUFFERPARAMETERIVARBPROC)wglGetProcAddress("glGetBufferParameterivARB");
    glMapBufferARB = (PFNGLMAPBUFFERARBPROC)wglGetProcAddress("glMapBufferARB");
    glUnmapBufferARB = (PFNGLUNMAPBUFFERARBPROC)wglGetProcAddress("glUnmapBufferARB");

    // check once again PBO extension
    if(glGenBuffersARB && glBindBufferARB && glBufferDataARB && glBufferSubDataARB &&
        glMapBufferARB && glUnmapBufferARB && glDeleteBuffersARB && glGetBufferParameterivARB)
    {
        pboSupported = true;
        cout << "Video card supports GL_ARB_pixel_buffer_object." << endl;
    }
    else
    {
        pboSupported = false;
        cout << "Video card does NOT support GL_ARB_pixel_buffer_object." << endl;
    }
}

#else // for linux, do not need to get function pointers, it is up-to-date
if(glInfo.isExtensionSupported("GL_ARB_pixel_buffer_object"))
{
    pboSupported = pboUsed = true;
    cout << "Video card supports GL_ARB_pixel_buffer_object." << endl;
}
else
{
    pboSupported = pboUsed = false;
    cout << "Video card does NOT support GL_ARB_pixel_buffer_object." << endl;
}
#endif

if(pboSupported){
    glGenBuffersARB(2, pboIds);
    glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, pboIds[0]);
    glBufferDataARB(GL_PIXEL_UNPACK_BUFFER_ARB, DATA_SIZE, 0, GL_STREAM_DRAW_ARB);
    glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, pboIds[1]);
    glBufferDataARB(GL_PIXEL_UNPACK_BUFFER_ARB, DATA_SIZE, 0, GL_STREAM_DRAW_ARB);
    glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, 0);
    //Note: pboMode=2 somehow does not work while calibration. Fix this later.
    pboMode=1;
}
else{
    pboMode=0;
}

paintFlag=false;
}

void QGLCanvas::setImage(IplImage image){

if(QString(this->name)=="Background"){
    cvCopyImage(&image,bgFrameBackup);
}
//cvShowImage(name,&image);
//  Display a rectangle between startX ,startY and endX,endY if we are in calibration mode
//and drawing flag is set.(typically, by a mouse click)
if(QString(this->name)=="Calibrate" && calibrating ){
    if(drawing) 
        cvRectangle(&image,cvPoint(startX,startY),cvPoint(endX,endY),cvScalarAll(0xee)); 
    if(select_object) //During calibration
        cvRectangle(&image,cvPoint(selection.x,selection.y),cvPoint(selection.x+selection.width,selection.y+selection.height),cvScalarAll(0xee)); 
    //Draw existing calibration rectangles

    for (list<CvRect>::iterator it=calibration_rect_list->begin(); it!=calibration_rect_list->end(); ++it)
    {
        cvRectangle(&image, cvPoint((*it).x, (*it).y), cvPoint((*it).x + (*it).width, (*it).y + (*it).height), CV_RGB(100,255,0), 2, 8, 0);
    }

}
//Only draw on the video widget with the name "Final"
if(QString(this->name)=="Final")
{

    if(calibrating && drawing) 
        cvRectangle(&image,cvPoint(startX,startY),cvPoint(endX,endY),cvScalarAll(0xee)); 
    //If we are adding a rule, the corresponding rule shape must be drawn on the widget.
    if(addingRule && drawing){
        if(currentShape==RULE_SHAPE_RECT){
            cvRectangle(&image,cvPoint(startX,startY),cvPoint(endX,endY),cvScalarAll(0xee)); 
        }
        else if(currentShape==RULE_SHAPE_POLY){
            int linecolor=0xee;
            if(points.count()>0){
                //Draw polygon...
                for(int i=1;i<points.count();i++){
                    cvLine(&image,cvPoint(points[i-1]->x(),points[i-1]->y()),cvPoint(points[i]->x(),points[i]->y()),cvScalarAll(linecolor));
                }

                cvLine(&image,cvPoint(startX,startY),cvPoint(endX,endY),cvScalarAll(0xee));
                cvLine(&image,cvPoint(endX,endY),cvPoint(points[0]->x(),points[0]->y()),cvScalarAll(linecolor));
            }
        }
        else if(currentShape==RULE_SHAPE_TRIPLINE){
            for(int i=1;i<points.count();i++){
                cvLine(&image,cvPoint(points[i-1]->x(),points[i-1]->y()),cvPoint(points[i]->x(),points[i]->y()),cvScalarAll(0xee));
            }
            cvLine(&image,cvPoint(startX,startY),cvPoint(endX,endY),cvScalarAll(0xee));
        }

    }
    if(entryExitRuleCreated && currentZoneType==RULE_ZONE_TYPE_ENTRY_EXIT ){
        //Highlight appropriate sides of the currentRule to mark them as Entry/Exit Zone
        for(int i=0;i<currentRule->points.count();i++){
            QPoint* P1=currentRule->points[i];
            QPoint* P2;
            //Implement cyclic nature of polygon
            if(i<currentRule->points.count()-1)
                P2=currentRule->points[i+1];
            else P2=currentRule->points[0];
            int deltax=mouseX-P1->x();
            int deltax1=P2->x()-P1->x();
            float m,m1;
            if(deltax!=0)
                m= (float)(mouseY-P1->y())/deltax;
            if(deltax1!=0 && deltax!=0){
                m1=(float)(P2->y()-P1->y())/deltax1;
                if(round(m,1)==round(m1,1))//Mouse pointer lies on the line whose slope is same as the polygon edge
                {
                    //Mouse pointer is on the edge of a polygon, highlight the edge
                    if(abs(P1->y()-P2->y()) >= abs(mouseY-P2->y()) && abs(P1->y()-P2->y()) >= abs(mouseY-P1->y()) 
                        &&  abs(P1->x()-P2->x()) >= abs(mouseX-P2->x()) && abs(P1->x()-P2->x()) >= abs(mouseX-P1->x())
                        ){
                            edgeHighlighted=true;
                            highlightedEdge[0]=P1;
                            highlightedEdge[1]=P2;
                            currentEdgeNumber=i;
                            break;
                    }
                }
                else{
                    edgeHighlighted=false;
                }
            }
            else{
                //Vertical edge of a polygon.
                if(abs(mouseX-P1->x())<4) { //Same vertical line
                    if(abs(P1->y()-P2->y()) > abs(mouseY-P2->y()) && abs(P1->y()-P2->y()) > abs(mouseY-P1->y())){
                        //Current y lies between the two vertices of an edge
                        //Mouse pointer is on the edge of polygon,highlight the edge
                        //qDebug()<<"P1="<<P1->x()<<","<<P1->y()<<", P2="<<P2->x()<<","<<P2->y();
                        edgeHighlighted=true;
                        highlightedEdge[0]=P1;
                        highlightedEdge[1]=P2;
                        currentEdgeNumber=i;
                        break;
                    }
                    else
                        edgeHighlighted=false;
                }
            }

        }
        if(edgeHighlighted || edgeHighlightedFromButton){
            cvLine(&image,cvPoint(highlightedEdge[0]->x(),highlightedEdge[0]->y()),cvPoint(highlightedEdge[1]->x(),highlightedEdge[1]->y()),cvScalar(0xff,0x00,0x00),3);
        }
    }
}

{
    //qDebug()<<name<<":Saving original image";
    ExclusiveLock xlock(globalXMutex);
    this->original=&image;
    paintFlag=true;
}

updateGL(); 

/*if(this->name=="Final"){
cvShowImage("Final",original);
cvWaitKey(1);
}*/
}

//Texture is generated here
void QGLCanvas::initializeGL(){

glDisable(GL_LIGHTING);
glEnable(GL_TEXTURE_2D);
glClearColor(0, 0, 0, 0);                   // background color
glClearStencil(0);                          // clear stencil buffer
glClearDepth(1.0f);                         // 0 is near, 1 is far
glDepthFunc(GL_LEQUAL);

glEnable(GL_TEXTURE_2D);
glGenTextures(1,&texture);
glBindTexture(GL_TEXTURE_2D,texture);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
glBindTexture(GL_TEXTURE_2D,texture);
glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,WIDTH,HEIGHT,0,GL_BGR,GL_UNSIGNED_BYTE,NULL);
glBindTexture(GL_TEXTURE_2D, 0);

glClearStencil(0);                          // clear stencil buffer
glClearDepth(1.0f);                         // 0 is near, 1 is far
glDepthFunc(GL_LEQUAL);
setAutoBufferSwap(false);
}

void QGLCanvas::resizeGL(int width,int height){

if (height==0)                                      // Prevent A Divide By Zero By
{
    height=1;                                       // Making Height Equal One
}

glViewport(0,0,WIDTH,HEIGHT);                       // Reset The Current Viewport
glMatrixMode(GL_PROJECTION);                        // Select The Projection Matrix
glLoadIdentity();                                   // Reset The Projection Matrix
glOrtho(0.0f,WIDTH,HEIGHT,0.0f,0.0f,1.0f);
glEnable(GL_TEXTURE_2D);

glMatrixMode(GL_MODELVIEW);                         // Select The Modelview Matrix
glLoadIdentity();                                   // Reset The Modelview Matrix

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:26:52.423

您在纹理对象（应该是缓冲区对象）上调用 glDeleteBuffers()，或者更确切地说，我认为根本不应该在这里。与其他 GL 对象一样，每次 glGen() 调用只需 glDelete() 一次。

您正在调用 glFlush() 和 swapBuffers()，我相信 Qt 会为您解决这个问题。

OpenGL 驱动程序可能存在内存泄漏。尝试不使用 PBO。

在每次 GL 调用后尝试 glGetError() 以查看您是否在其他地方犯了错误。

# php - 查询生成器：将参数传递给匿名函数

> ID：15007161
> 
> 赞同：8
> 
> 时间：2013-02-21T16:18:44.737
> 
> 标签：php, laravel

我在将变量传递给查询构建器闭包时遇到问题，这是我的代码：

```
function get_usersbyname($name){
    dd($name);
    $resultset = DB::table('users')->where(function($query){
        $query->where('username', 'LIKE', $name);
    });
....
} 
```

如果我运行它，它会返回一个错误“ `undefined name variable`”，但我已经传递了`$name`变量并检查了它的存在。我也找不到任何资源来解释如何将变量传递给查询构建器匿名函数。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-21T16:26:01.153

您需要告诉匿名函数使用该变量，例如...

因为该变量超出了匿名函数的范围，所以需要使用**use**关键字传入，如下例所示。

```
function get_usersbyname($name){
    dd($name);
    $resultset = DB::table('users')->where(function($query) use ($name) {
        $query->where('username', 'LIKE', $name);
    });
....
} 
```

# mpi - MPI_Publish_name 可以用于两个单独启动的应用程序吗？

> ID：15007164
> 
> 赞同：4
> 
> 时间：2013-02-21T16:18:54.957
> 
> 标签：mpi, openmpi

我编写了一个 OpenMPI 应用程序，它由分别启动的服务器和客户端部分组成：

```
me@server1:~> mpirun server 
```

和

```
me@server2:~> mpirun client 
```

`server`使用 . 创建一个端口`MPI_Open_port`。问题是：OpenMPI 是否有机制将端口通信`client`？我想这在这里不起作用，因为`MPI_Publish_name`不知道应该将信息发送到哪台其他计算机。`MPI_Lookup_name``server`

对我来说，看起来只有使用单个启动的进程`mpirun`才能与`MPI_Publish_name`.

我还找到[了 ompi-server](http://www.open-mpi.org/doc/v1.4/man1/ompi-server.1.php)，但是文档太简单了，我无法理解。有谁知道这是如何使用的？

相关：[MPICH：如何发布名称以便客户端应用程序可以查找名称？](https://stackoverflow.com/questions/14210558/mpich-how-to-publish-name-such-that-a-client-application-can-lookup-name-it)和[https://stackoverflow.com/questions/9263458/client-server-example-using-ompi-does-not-work](https://stackoverflow.com/questions/9263458/client-server-example-using-ompi-does-not-work)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T17:35:22.670

`MPI_Publish_name`提供了一个 MPI 信息对象，它可能有一个 Open MPI 特定的布尔键`ompi_global_scope`。如果此键设置为 true，则名称将发布到全局范围，即发布到已运行的`ompi-server`. `MPI_Lookup_name`默认情况下，如果提供了 URI，则首先进行全局名称查找`ompi-server`。

## 使用专用的 Open MPI 服务器

该过程涉及几个步骤：

1）启动`ompi-server`集群中可以从所有节点访问的某个地方。出于调试目的，您可以将`--no-daemonize -r +`参数传递给它。它会启动并在标准输出中打印一个与此类似的 URI：

```
$ ompi-server --no-daemonize -r +
1221656576.0;tcp://10.1.13.164:36351;tcp://192.168.221.41:36351 
```

2) 在服务器中，构建一个 MPI info 对象并将`ompi_global_scope`key 设置为 true：

```
MPI_Info info;

MPI_Info_create(&info);
MPI_Info_set(info, "ompi_global_scope", "true"); 
```

然后将信息对象传递给`MPI_Publish_name`：

```
MPI_Publish_name("server", info, port_name); 
```

3）在客户端，调用`MPI_Lookup_name`将首先在全局上下文中自动进行查找（这可以通过在 MPI 信息对象中提供正确的键来更改，但在您的情况下，默认行为就足够了）。

为了让客户端和服务器代码都知道它的`ompi-server`位置，您必须将其 URI 提供给带有选项的两个`mpirun`命令。`--ompi-server 1221656576.0;tcp://10.1.13.164:36351;tcp://192.168.221.41:36351`

另一种选择是`ompi-server`将 URI 写入文件，然后可以在`mpirun`要运行的节点上读取该文件。例如，如果您在`mpirun`执行两个命令的同一节点上启动服务器，那么您可以使用`/tmp`. 如果您`ompi-server`在不同的节点上启动，那么共享文件系统（NFS、Lustre 等）就可以了。无论哪种方式，命令集都是：

```
$ ompi-server [--no-daemonize] -r file:/path/to/urifile
...
$ mpirun --ompi-server file:/path/to/urifile server
...
$ mpirun --ompi-server file:/path/to/urifile client 
```

## 无服务器方法

如果`mpirun`在同一个节点上运行两者，`--ompi-server`还可以指定已运行`mpirun`实例的 PID，以用作名称服务器。它允许您在服务器中使用本地名称发布（即跳过“运行 ompi-server”和“制作信息对象”部分）。命令的顺序是：

```
head-node$ mpirun --report-pid server
[ note the PID of this mpirun instance ]
...
head-node$ mpirun --ompi-server pid:12345 client 
```

where`12345`应该替换为服务器的真实 PID `mpirun`。

您还可以让服务器`mpirun`打印其 URI 并将该 URI 传递给客户端`mpirun`：

```
$ mpirun --report-uri + server
[ note the URI ]
...
$ mpirun --ompi-server URI client 
```

`/path/to/file`如果您指定（注意：`file:`此处没有前缀）而不是`+`在`--report-uri`选项之后，您也可以将 URI 写入文件：

```
$ mpirun --report-uri /path/to/urifile server
...
$ mpirun --ompi-server file:/path/to/urifile client 
```

请注意，返回的 URI`mpirun`的格式与 an 的格式相同`ompi-server`，即它包含主机 IP 地址，因此如果第二个`mpirun`节点在不同的节点上执行，它也可以工作，该节点能够通过 TCP/IP 与第一个节点通信（并且`/path/to/urifile`存在于共享文件系统上）。

我使用 Open MPI 1.6.1 测试了以上所有内容。某些变体可能不适用于早期版本。

# typo3 - 如何在extbase的外键列中查找没有值的记录

> ID：15007165
> 
> 赞同：0
> 
> 时间：2013-02-21T16:18:56.970
> 
> 标签：typo3, extbase

在 extbase 中，我怎样才能找到所有在外部链接列中没有值的记录。

我有一个可以与不同对象相关的模型。这种关系是 1:n，称为“dayend”。

我现在在响应存储库中创建一个这样的查询：

```
$query->equals("dayend", null); 
```

这不起作用，这意味着约束被完全忽略。该列中的原始值为“0”。因此，我也尝试了

```
$query->equals("dayend.uid", 0); 
```

但是，这会引发错误：“无法确定关系类型。”

我的目标是获取与任何“dayend”对象无关的所有对象。有任何想法吗？

# excel - Visual Basic 编译器错误

> ID：15007171
> 
> 赞同：3
> 
> 时间：2013-02-21T16:19:15.343
> 
> 标签：excel, vba

我在下面的编码中收到一个错误，标记行中的 Object Required。请帮帮我。Temp文件是一个模板，详细信息来源于Combo代码，Combo代码是需要填写在模板中的数据，根据下面的代码发送电子邮件。

```
Sub Emails()
    Dim R_No As Integer

    Templ.Select
    Templ.Range("C11") = ""
    Templ.Range("D11") = ""
    Templ.Range("E11") = ""
    Temp1.Range("F11") = "" <-------- Error
    Temp1.Range("G11") = ""
    Templ.Range("C14") = ""
    Templ.Range("D14") = ""
    Templ.Range("E14") = ""
    Temp1.Range("F14") = ""
    Temp1.Range("G14") = ""
    Rows("10:11").Select
    Selection.EntireRow.Hidden = True
    Rows("13:14").Select
    Selection.EntireRow.Hidden = True

    R_No = 2
    Do Until Combo.Cells(R_No, 1) = ""
        If Combo.Cells(R_No, 1) = "Order" Then
            Combo.Cells(R_No, 13) = Combo.Cells(R_No, 2)
        Else
            Combo.Cells(R_No, 13) = Combo.Cells(R_No, 2) & "  &  " & Combo.Cells(R_No, 4)
        End If

        If Combo.Cells(R_No, 7) = Combo.Cells(R_No + 1, 7) Then
            If Combo.Cells(R_No, 1) = Combo.Cells(R_No + 1, 1) Then
                If Combo.Cells(R_No, 1) = "Order" Then
                    Rows("10:11").Select
                    Selection.EntireRow.Hidden = False
                    If Templ.Range("C11") = "" Then
                        Templ.Range("C11") = Combo.Cells(R_No, 2)
                        Templ.Range("D11") = Combo.Cells(R_No, 3)
                        Templ.Range("E11") = Combo.Cells(R_No, 5)
                        Temp1.Range("F11") = Combo.Cells(R_No, 6)
                        Temp1.Range("G11") = Combo.Cells(R_No, 9)
                    Else
                        Templ.Range("C11") = Templ.Range("C11") & Templ.Range("I2") & Combo.Cells(R_No, 2)
                        Templ.Range("D11") = Templ.Range("D11") & Templ.Range("I2") & Combo.Cells(R_No, 3)
                        Templ.Range("E11") = Templ.Range("E11") & Templ.Range("I2") & Combo.Cells(R_No, 5)
                        Templ.Range("F11") = Templ.Range("F11") & Templ.Range("I2") & Combo.Cells(R_No, 6)
                        Templ.Range("G11") = Templ.Range("G11") & Templ.Range("I2") & Combo.Cells(R_No, 9)
                    End If
                End If
                If Combo.Cells(R_No, 1) = "Receipt" Then
                    Rows("13:14").Select
                    Selection.EntireRow.Hidden = False
                    If Templ.Range("C14") = "" Then
                        Templ.Range("C14") = Combo.Cells(R_No, 2) & "-" & Combo.Cells(R_No, 4)
                        Templ.Range("D14") = Combo.Cells(R_No, 3)
                        Templ.Range("E14") = Combo.Cells(R_No, 5)
                        Temp1.Range("F14") = Combo.Cells(R_No, 6)
                        Temp1.Range("G14") = Combo.Cells(R_No, 9)
                    Else
                        Templ.Range("C14") = Templ.Range("C14") & Templ.Range("I2") & Combo.Cells(R_No, 2) & "-" & Combo.Cells(R_No, 4)
                        Templ.Range("D14") = Templ.Range("D14") & Templ.Range("I2") & Combo.Cells(R_No, 3)
                        Templ.Range("E14") = Templ.Range("E14") & Templ.Range("I2") & Combo.Cells(R_No, 5)
                        Templ.Range("F14") = Templ.Range("F14") & Templ.Range("I2") & Combo.Cells(R_No, 6)
                        Templ.Range("G14") = Templ.Range("G14") & Templ.Range("I2") & Combo.Cells(R_No, 9)
                    End If
                End If
            Else
                If Combo.Cells(R_No, 1) = "Order" Then
                    Rows("10:11").Select
                    Selection.EntireRow.Hidden = False
                    If Templ.Range("C11") = "" Then
                        Templ.Range("C11") = Combo.Cells(R_No, 2)
                        Templ.Range("D11") = Combo.Cells(R_No, 3)
                        Templ.Range("E11") = Combo.Cells(R_No, 5)
                        Temp1.Range("F11") = Combo.Cells(R_No, 6)
                        Temp1.Range("G11") = Combo.Cells(R_No, 9)
                    Else
                        Templ.Range("C11") = Templ.Range("C11") & Templ.Range("I2") & Combo.Cells(R_No, 2)
                        Templ.Range("D11") = Templ.Range("D11") & Templ.Range("I2") & Combo.Cells(R_No, 3)
                        Templ.Range("E11") = Templ.Range("E11") & Templ.Range("I2") & Combo.Cells(R_No, 5)
                        Templ.Range("F11") = Templ.Range("F11") & Templ.Range("I2") & Combo.Cells(R_No, 6)
                        Templ.Range("G11") = Templ.Range("G11") & Templ.Range("I2") & Combo.Cells(R_No, 9)
                    End If
                End If
                If Combo.Cells(R_No, 1) = "Receipt" Then
                    Rows("13:14").Select
                    Selection.EntireRow.Hidden = False
                    If Templ.Range("C14") = "" Then
                        Templ.Range("C14") = Combo.Cells(R_No, 2) & "-" & Combo.Cells(R_No, 4)
                        Templ.Range("D14") = Combo.Cells(R_No, 3)
                        Templ.Range("E14") = Combo.Cells(R_No, 5)
                        Temp1.Range("F14") = Combo.Cells(R_No, 6)
                        Temp1.Range("G14") = Combo.Cells(R_No, 9)
                    Else
                        Templ.Range("C14") = Templ.Range("C14") & Templ.Range("I2") & Combo.Cells(R_No, 2) & "-" & Combo.Cells(R_No, 4)
                        Templ.Range("D14") = Templ.Range("D14") & Templ.Range("I2") & Combo.Cells(R_No, 3)
                        Templ.Range("E14") = Templ.Range("E14") & Templ.Range("I2") & Combo.Cells(R_No, 5)
                        Templ.Range("F14") = Templ.Range("F14") & Templ.Range("I2") & Combo.Cells(R_No, 6)
                        Templ.Range("G14") = Templ.Range("G14") & Templ.Range("I2") & Combo.Cells(R_No, 9)
                    End If
                End If
            End If
        Else
            If Combo.Cells(R_No, 1) = "Order" Then
                Rows("10:11").Select
                Selection.EntireRow.Hidden = False
                If Templ.Range("C11") = "" Then
                        Templ.Range("C11") = Combo.Cells(R_No, 2)
                        Templ.Range("D11") = Combo.Cells(R_No, 3)
                        Templ.Range("E11") = Combo.Cells(R_No, 5)
                        Temp1.Range("F11") = Combo.Cells(R_No, 6)
                        Temp1.Range("G11") = Combo.Cells(R_No, 9)
                    Else
                        Templ.Range("C11") = Templ.Range("C11") & Templ.Range("I2") & Combo.Cells(R_No, 2)
                        Templ.Range("D11") = Templ.Range("D11") & Templ.Range("I2") & Combo.Cells(R_No, 3)
                        Templ.Range("E11") = Templ.Range("E11") & Templ.Range("I2") & Combo.Cells(R_No, 5)
                        Templ.Range("F11") = Templ.Range("F11") & Templ.Range("I2") & Combo.Cells(R_No, 6)
                        Templ.Range("G11") = Templ.Range("G11") & Templ.Range("I2") & Combo.Cells(R_No, 9)
                End If
            End If
            If Combo.Cells(R_No, 1) = "Receipt" Then
                Rows("13:14").Select
                Selection.EntireRow.Hidden = False
                If Templ.Range("C14") = "" Then
                        Templ.Range("C14") = Combo.Cells(R_No, 2) & "-" & Combo.Cells(R_No, 4)
                        Templ.Range("D14") = Combo.Cells(R_No, 3)
                        Templ.Range("E14") = Combo.Cells(R_No, 5)
                        Temp1.Range("F14") = Combo.Cells(R_No, 6)
                        Temp1.Range("G14") = Combo.Cells(R_No, 9)
                    Else
                        Templ.Range("C14") = Templ.Range("C14") & Templ.Range("I2") & Combo.Cells(R_No, 2) & "-" & Combo.Cells(R_No, 4)
                        Templ.Range("D14") = Templ.Range("D14") & Templ.Range("I2") & Combo.Cells(R_No, 3)
                        Templ.Range("E14") = Templ.Range("E14") & Templ.Range("I2") & Combo.Cells(R_No, 5)
                        Templ.Range("F14") = Templ.Range("F14") & Templ.Range("I2") & Combo.Cells(R_No, 6)
                        Templ.Range("G14") = Templ.Range("G14") & Templ.Range("I2") & Combo.Cells(R_No, 9)
                End If
            End If
            Templ.Range("C6") = "Dear " & Left(Combo.Cells(R_No, 7), InStr(1, Combo.Cells(R_No, 7), " ") - 1) & ","
            Templ.Range("A1:H48").Select
            ThisWorkbook.EnvelopeVisible = False
            ThisWorkbook.EnvelopeVisible = True

            With ThisWorkbook.Sheets("Templete").MailEnvelope
               .Item.Subject = "Reminder- Order(s) / Receipt(s) Pending Your Urgent Approval"
               .Item.To = Combo.Cells(R_No, 8)
               .Item.cc = " "
               If Combo.Cells(R_No, 10) <> "" Then
                    .Item.cc = Combo.Cells(R_No, 12)
               Else
               End If
               .Item.Send

               Templ.Range("C11") = ""
               Templ.Range("D11") = ""
               Templ.Range("E11") = ""
               Templ.Range("F11") = ""
               Templ.Range("G11") = ""
               Templ.Range("C14") = ""
               Templ.Range("D14") = ""
               Templ.Range("E14") = ""
               Templ.Range("F14") = ""
               Templ.Range("G14") = ""

               Rows("10:11").Select
               Selection.EntireRow.Hidden = True
               Rows("13:14").Select
               Selection.EntireRow.Hidden = True
            End With
        End If
        R_No = R_No + 1
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T16:20:37.930

F11 语句具有 temp1 {ONE} 而不是 TEMPL。G11也一样

```
Templ.Range("E11") = ""
Temp1.Range("F11") = "" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T21:55:11.163

正如cardmagik 指出的那样，您需要将`Temp1`（末尾带有数字一）替换为（末尾`Templ`带有字母L）。

此外，只是对您的代码的一些改进建议：

*   始终`Option Explicit`在模块的开头使用 - 这样，如果您拼错了这个示例中的变量，您会被告知！
*   要在开头清空单元格，只需编写`Temp.Range("C11:G11,C14:G14").Value = ""`而不是拼出每个单元格
*   几乎所有的时间你都可以`X.Select`，然后`Selection.DoSomething`，你可以用`X.DoSomething`- 更容易阅读，更少出错和更快执行来替换它
*   结合以上两点，可以化简

    ```
    行（“10:11”）。选择
    Selection.EntireRow.Hidden = True
    行（“13:14”）。选择
    Selection.EntireRow.Hidden = True

    ```

    至`Rows("10:11,13:14").EntireRow.Hidden = True`
*   你有很多重复的代码。例如，

    ```
    Templ.Range("C11") = Combo.Cells(R_No, 2)
    Templ.Range("D11") = Combo.Cells(R_No, 3)
    Templ.Range("E11") = Combo.Cells(R_No, 5)
    Temp1.Range("F11") = Combo.Cells(R_No, 6)
    Temp1.Range("G11") = Combo.Cells(R_No, 9)
    ```

    被调用了 3 次 - 如果您考虑第 14 行的非常相似的代码，甚至 6x！相反，使用两个参数创建一个`Sub`- 并将其称为 6x！这个子可能看起来像这样：

    ```
    Private Sub FillDefault(rowTarget As Long, rowSource as Long)
    Templ.Range("C" & rowTarget) = Combo.Cells(rowSource, 2)
    Templ.Range("D" & rowTarget) = Combo.Cells(rowSource, 3)
    Templ.Range("E" & rowTarget) = Combo.Cells(rowSource, 5)
    Templ.Range("F" & rowTarget) = Combo.Cells(rowSource, 6)
    Templ.Range("G" & rowTarget) = Combo.Cells(rowSource, 9)
    结束子

    ```

    然后用`FillDefault 11, R_No`and调用它`FillDefault 14, R_No`
*   你的嵌套`IF...THEN...ELSE...`语句在这个版本中完全没有意义——**每个分支都在做同样的事情！！！**- 除了所有其他步骤之外，您只需在一个分支中发送电子邮件！所以最好先完成其他步骤 - 然后发送电子邮件
*   而不是`IF cond1 Then x = 1 Else x = 2`你可以使用`x = Iif(cond1, 1, 2)`- 这通常会导致代码缩短，尤其是。如果 x 是一个较长的术语
*   你的工作表真的被称为`Templete`还是更确切地说`Template`？
*   引用行号时，最好使用 Long 而不是 Integer - Integers 只能工作到 32,768

总而言之，我重新编写了您的代码 - 并将其从高达 169 行减少到 60 行（尽管这可以进一步减少，但为了便于阅读）：

```
Sub Emails()
    Dim R_No As Long

    ClearSheet

    R_No = 2
    Do Until combo.Cells(R_No, 1) = ""

        combo.Cells(R_No, 13) = combo.Cells(R_No, 2) & _
            IIf(combo.Cells(R_No, 1) <> "Order", "  &  " & combo.Cells(R_No, 4), "")

        Select Case combo.Cells(R_No, 1)
            Case "Order":
                Rows("10:11").EntireRow.Hidden = False
                Fill rowTarget:=11, rowSource:=R_No, blnAdd:=(Templ.Range("C11") = "")
            Case "Receipt":
                Rows("13:14").EntireRow.Hidden = False
                Fill rowTarget:=14, rowSource:=R_No, blnAdd:=(Templ.Range("C14") = "")
        End Select

        If combo.Cells(R_No, 7) <> combo.Cells(R_No + 1, 7) Then
            SendMail R_No
            ClearSheet
        End If
        R_No = R_No + 1
    Loop
End Sub

Private Sub ClearSheet()
    Templ.Range("C11:G11,C14:G14").Value = ""
    Rows("10:11,13:14").EntireRow.Hidden = True
End Sub

Private Sub Fill(rowTarget As Long, rowSource As Long, _
    Optional blnAdd As Boolean = False)
    Dim a As Variant, i As Integer
    a = Array(2, 3, 5, 6, 9)
    For i = 0 To 4
        Templ.Cells(rowTarget, i + 3) = _
            IIf(blnAdd, Templ.Cells(rowTarget, i + 3) & Templ.Range("I2"), "") & _
            combo.Cells(rowSource, a(i))
    Next
End Sub

Private Sub SendMail(R_No As Long)
    Templ.Range("C6") = "Dear " & Left(combo.Cells(R_No, 7), _
        InStr(1, combo.Cells(R_No, 7), " ") - 1) & ","
    Templ.Range("A1:H48").Select
    ThisWorkbook.EnvelopeVisible = True

    With ThisWorkbook.Sheets("Templete").MailEnvelope.Item
       .Subject = "Reminder- Order(s) / Receipt(s) Pending Your Urgent Approval"
       .To = combo.Cells(R_No, 8)
       .cc = " "
       If combo.Cells(R_No, 10) <> "" Then
            .cc = combo.Cells(R_No, 12)
       End If
       .Send
    End With
End Sub 
```

！

# java - JSlider getValueIsAdjusting 奇怪的行为

> ID：15007178
> 
> 赞同：1
> 
> 时间：2013-02-21T16:19:29.717
> 
> 标签：java, swing, jslider, jspinner, changelistener

...或者也许我的编程是奇怪的行为...

我正在尝试创建一个在我的程序中经常使用的类。它是一个创建 JPanel 控件的类，该控件在一个窗格的顶部包含一个 Jlabel，在另一个窗格中包含一个 JSlider 和 JSpinner。我希望 JSpinner 在 JSlider 更改时更改，反之亦然。我希望它们的价值相互关联。这是为了 JSpinner 微调 JSpinner 选择。

这是该类的代码（“ij”导入用于政府的 ImageJ 应用程序）：

```
import ij.*;
import ij.process.*;
import ij.gui.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

 public class LabeledSliderSpinner extends JPanel implements ChangeListener {

JPanel sspanel = new JPanel();
JSlider slider;
SpinnerModel model;
JSpinner spinner;

public LabeledSliderSpinner() {}

public LabeledSliderSpinner(String label, int left, int x, int right) {

    JLabel sslabel = new JLabel(label);

    JSlider slider = new JSlider(JSlider.HORIZONTAL, left, right, x);
    slider.setMajorTickSpacing(25);
    slider.setMinorTickSpacing(5);
    slider.setPaintTicks(true);
    slider.setPaintLabels(true);
    slider.setPaintTrack(true);
    slider.setVisible(true);

    slider.addChangeListener(this);

    model = new SpinnerNumberModel(x, left, right, 1);
    JSpinner spinner = new JSpinner(model);
    spinner.setEditor(new JSpinner.NumberEditor(spinner, "####"));

    spinner.addChangeListener(this);

    sspanel.add(slider);
    sspanel.add(spinner);

    add(sslabel);
    add(sspanel);
    setVisible(true);
}

public void stateChanged(ChangeEvent e) {
    String a = "";

    Object o = e.getSource();
    Class c = o.getClass();
    String controlName = c.getName();

    if (controlName == "javax.swing.JSpinner") {
// not coded yet
    }

    else 

    if (controlName == "javax.swing.JSlider") {
        if (!slider.getValueIsAdjusting()) {
            int fps = (int)slider.getValue();
            spinner.setValue(new Integer(fps));
        }
    }

}
} 
```

它是这样调用的：

`LabeledSliderSpinner lss = new LabeledSliderSpinner("Homing Line", minx, x, maxx);`

在 stateChanged 方法中，我确定当它到达 getValueIsAdjusting 测试时，它甚至没有完成 stateChanged 方法。它只是回到主要功能。滑块旋钮移动。微调器值不会改变。我什至在 getValueIsAdjusting 测试中打开了一个对话框。它永远不会进入。我尝试打开一个对话框作为 getValueIsAdjusting 测试的 else 条件，但它永远不会打开任何一个对话框。它只是从 stateChanged() 返回。

我可以使用更好的方法来确定 stateChanged 是否因为滑块或微调器而被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:53:24.980

[`SpinSlider`](https://stackoverflow.com/a/6067986/230513)在这种情况下可能会有所帮助。

![图片](../Images/371c0bac290ddc7a219b3b7c21643e67.png)

# kineticjs - NS_ERROR_NOT_AVAILABLE：组件不可用动力学 4.3.3

> ID：15007180
> 
> 赞同：0
> 
> 时间：2013-02-21T16:19:40.747
> 
> 标签：kineticjs

我收到此错误消息，不知道在哪里寻找。它在 firefox 18.02 firebug 上说它在：kinetic.min.js（第 1 行）版本 4.3.3

感谢您提前提供任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:47:40.513

当您在画布上绘制某些东西时，您有一个未捕获的异常。

将您的 kinetic.min.js 更改为`http://www.html5canvastutorials.com/libraries/kinetic-v4.3.3-beta.js`仅用于调试，然后使用 try/catch 包装您的代码以捕获错误。

```
try {
  .... your code here ....
} catch(err) {
  console.log(err);
  console.trace();
} 
```

# javascript - Highstock 日期输入 jquery ui datepicker 位置变化

> ID：15007182
> 
> 赞同：4
> 
> 时间：2013-02-21T16:19:44.963
> 
> 标签：javascript, jquery, jquery-ui, highcharts, highstock

在 Highstock 中，您可以使用 jquery ui datepicker 而不是在日期字段中输入文本，如本演示中... [http://jsfiddle.net/hcharge/aNde9/](http://jsfiddle.net/hcharge/aNde9/)

```
datepicker 
```

单击输入一次，将打开日期选择器，它应该位于输入字段下方，但是如果您关闭它并再次打开它，它就会粘在容器的顶部。在网页中实现，这将是浏览器窗口的顶部。

这是一个已知的问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T13:04:13.573

日期选择器通过小部件样式的“顶部”属性控制其垂直位置 - 出于某种原因，在随后的日期选择器激活中，“顶部”始终设置为 0。

如果我们让小部件的数据“记住”正确的位置并在后续调用中明确设置该位置，则解决方法相对容易。请参阅下面的 datePicker 选项中定义的 'onClose' 和 'beforeShow' 函数：

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?', function(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1,
            inputDateFormat: '%Y-%m-%d',
            inputEditDateFormat: '%Y-%m-%d'
        },

        title : {
            text : 'AAPL Stock Price'
        },

        series : [{
            name : 'AAPL',
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }]

    }, function(chart){

        // apply the date pickers
        setTimeout(function(){
            $('input.highcharts-range-selector', $('#'+chart.options.chart.renderTo))
            .datepicker({
                beforeShow: function(i,obj) {
                    $widget = obj.dpDiv;
                    window.$uiDatepickerDiv = $widget;
                    if ($widget.data("top")) {
                        setTimeout(function() {
                            $uiDatepickerDiv.css( "top", $uiDatepickerDiv.data("top") );
                        },50);
                    }
                }
                ,onClose: function(i,obj) {
                    $widget = obj.dpDiv;
                    $widget.data("top", $widget.position().top);
                }
            })
        },0)
    });
}); 
```

这是[**jsFiddle 的链接**](http://jsfiddle.net/martyk/aNde9/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:51:11.400

您需要设置相同的输入格式，因此或将`dateFormat`datepicker 更改为与 Highstock 相同，或更改`inputRangeFormat`Highstock。

# xcode - Xcode Clang 总线错误 10

> ID：15007183
> 
> 赞同：7
> 
> 时间：2013-02-21T16:19:44.817
> 
> 标签：xcode, llvm, clang

当我试图在 Xcode 上构建我的代码时，我得到了

```
clang: error: unable to execute command: Bus error: 10
clang: error: linker command failed due to signal (use -v to see invocation) 
```

有谁知道为什么？该代码在我同事的机器上构建良好。只是不在我身上。我把 DerivedData 清空了好几次，没用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-29T07:53:52.410

您是否尝试删除所有项目派生数据文件夹，在您的情况下，它会在这里：/Users/User_Name/Library/Developer/Xcode/DerivedData/。删除所有项目的文件夹 [不用担心，它是安全的] 并从 Xcode 菜单中执行 Product > Clean your projects。

我试试，成功了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T15:58:53.577

删除派生数据有时是不够的。检查框架路径的正确性也是一个好主意。当我将框架复制到项目中时，我遇到了“总线错误 10”链接问题，但我的框架路径是挂载 .dmg 文件时创建的卷的路径。删除框架路径（在构建设置中）为我解决了这个问题 - 除了删除派生数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T10:17:49.620

```
SIGBUS (10) / Bus error 10 means a signal sent to an application if an attempts is made to access memory outside of its address space. This  may be due to bad pointer that has an invalid address in it. 
```

这可能发生在不同的场景中。就我而言，是在进行**迦太基更新时。**

只有通过日志，您才能确定确切的原因。检查这个[苹果文档链接](https://developer.apple.com/documentation/xcode/diagnosing-issues-using-crash-reports-and-device-logs)。

您也可以尝试以下解决方案：

1.  清理项目/构建文件夹并运行项目
2.  [删除派生数据](https://stackoverflow.com/a/28433526/1753005)-> 运行项目
3.  重启系统 ->[删除派生数据](https://stackoverflow.com/a/28433526/1753005)-> 运行项目

在我的情况下，**解决方案 3 有效**。

# php - MySQL跨多个表删除

> ID：15007188
> 
> 赞同：2
> 
> 时间：2013-02-21T16:19:55.317
> 
> 标签：php, mysql, pdo

我正在编写一个 cron 脚本（在 MySQL 数据库的 PHP PDS 中），它将从数据库中删除超过 30 天的数据。我已经尝试在我的表和语句上进行级联和删除，但它们没有奏效，所以我在这里采用了一种更简单的方法来让它工作，但我知道这不是最有效的处理器方法。

请注意，其中一些表（尤其是链接表）有数十万行，这就是为什么我想比这里的表更聪明一点。

表结构很简单，有一个带有时间戳和id的表键表。该 id 在所有表中重复为`tablekey_id`.

我目前的 cron 工作如下。

```
/* Cron script to delete old data from the database. */
if (@include dirname(dirname(dirname(__FILE__))) . '/dbconn/website_connections.php') {
    $conn = $connectionFromOtherFile;
    $keyTable = 'table_key';
    $linksTable = 'links';
    $domainsTable = 'link_domains';
    $terms = 'searched_domains';

    $query = $conn->query("SELECT `id` FROM `$keyTable` WHERE `timestamp` < (NOW() - INTERVAL 30 DAY)");
    $query->setFetchMode(PDO::FETCH_ASSOC);

    while($row = $query->fetch()) {
        $conn->exec("DELETE FROM `$linksTable` WHERE `tablekey_id` = $row[id]");
        $conn->exec("DELETE FROM `$domainsTable` WHERE `tablekey_id` = $row[id]");
        $conn->exec("DELETE FROM `$terms` WHERE `tablekey_id` = $row[id]");
        $conn->exec("DELETE FROM `$keyTable` WHERE `id` = $row[id]");
    }
} 
```

有没有办法把它变成一个声明？请并感谢您的帮助。

编辑：继承人我结束了。

```
/* Cron script to delete old data from the database. */
if (@include dirname(dirname(dirname(__FILE__))) . '/dbconn/website_connections.php') {
    $conn = $connectionFromOtherFile;
    $keyTable = 'table_key';
    $linksTable = 'links';
    $domainsTable = 'link_domains';
    $terms = 'searched_domains';
         $delete = $conn->prepare("DELETE tablekey, linktable, domaintable, searched
                            FROM `$keyTable` AS tablekey
                            LEFT OUTER JOIN `$linksTable` AS linktable on tablekey.id = linktable.tablekey_id
                            LEFT OUTER JOIN `$domainsTable` AS domaintable on tablekey.id = domaintable.tablekey_id
                            LEFT OUTER JOIN `$terms` AS searched on  tablekey.id = searched.tablekey_id
                            WHERE tablekey.id = :tablekey_id");

    $query = $conn->query("SELECT `id` FROM `$keyTable` WHERE `timestamp` < (NOW() - INTERVAL 30 DAY)");
    $query->setFetchMode(PDO::FETCH_ASSOC);

    while($row = $query->fetch()) {
        $delete->execute(array('tablekey_id' => $row['id']));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:33:21.590

您应该能够使用这样的一个查询进行删除：

```
DELETE kt, lt, dt, t
FROM `$keyTable` AS kt
LEFT OUTER JOIN `$linksTable` AS lt on kt.id = lt.tablekey_id
LEFT OUTER JOIN `$domainsTable` AS dt on kt.id = dt.tablekey_id
LEFT OUTER JOIN `$terms` AS t on  kt.id = t.tablekey_id
WHERE kt.id = $row[id] 
```

请注意，我在这里使用了外连接，因为我不确定其他表`keyTable`是否可以保证有带有 that 的记录`tablekey_id`。如果是，您可以使用内部联接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:25:37.497

如果 tablekey_id 被索引，即使有数千行也应该没问题。如果你想让你的数据库模式简单，我会保留 4 个查询，删除不是 CPU 密集型的。如果你真的想要一个语句，你将不得不使事情复杂化并使用带有外键约束的级联删除：

> CASCADE：删除或更新父表中的行，并自动删除或更新>子表中匹配的行。支持 ON DELETE CASCADE 和 ON UPDATE CASCADE。在两个表之间，不要定义多个作用于父表或子表中的同一列的 ON UPDATE CASCADE 子句。

来源：[http ://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

这就是承认你的数据库是 innoDB

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:28:33.820

首先你想像现在一样检索 ID 列表，然后你想构造 4 个这样的查询：

```
DELETE FROM 'table' where 'id' IN ('id1', 'id2', 'id4') 
```

这应该证明比单独删除更有效。它将查询数量减少到 5 而不是 1+ 4N

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:24:09.587

据我所知，PDO 只接受一个声明......

您可以查看从第一个（或您是主）表中删除的触发器...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-21T16:51:30.173

有时我用它来解决我的问题。首先将 ids 放入字符串中。

```
$ids = array();
while($row = $query->fetch()) {
    $ids[] = $row[id];
}
$ids_str = implode(',', $ids);

$conn->exec("DELETE FROM `$linksTable` WHERE `tablekey_id` in ($ids_str) ");
$conn->exec("DELETE FROM `$domainsTable` WHERE `tablekey_id` in ($ids_str)");
$conn->exec("DELETE FROM `$terms` WHERE `tablekey_id` in ($ids_str)");
$conn->exec("DELETE FROM `$keyTable` WHERE `id` in ($ids_str)"); 
```

# javascript - ASP.NET 如何在回发后保持 Datagrid 中的滚动位置

> ID：15007190
> 
> 赞同：0
> 
> 时间：2013-02-21T16:20:00.527
> 
> 标签：javascript, asp.net

我有一个包含数据网格的 aspx 页面。此数据网格通过 SQL 查询填充到代码隐藏中，并且可以包含 1 到 1000 行。

用户可以单击每一行并编辑该行的数据。然而，一旦他们保存，无论他们在哪里，数据网格都会滚动回顶部。我想保持数据网格中的滚动位置，以便用户可以轻松地编辑下一行。我的 aspx 页面上有以下内容：

```
<script src="common.js" type="text/javascript"></script>

    <script type = "text/javascript">

        function setScroll(val) {
            document.getElementById("hidscrollPos").value = val.scrollTop;
        }

        function scrollTo(what) {
            document.getElementById(what).scrollTop =
        document.getElementById("hidscrollPos").value;
        }
</script>

<body MS_POSITIONING="GridLayout" onload="javascript:scrollTo('divDataGrid')">
<form id="form1" method="post" runat="server">
<asp:Panel ID="Panel4" style="left: 0px; position: absolute; top: 354px" runat="server">
<div id="divDataGrid" style="overflow:scroll;" onscroll="javascript:setScroll(this);">
    <asp:DataGrid ID="grdItem" runat="server" AllowSorting="True"
        AutoGenerateColumns="False" style="position: absolute; top: 50px" 
        CssClass="grdGrid" Font-Size="X-Small" GridLines="None" Width="97%" 
        Height="4px" CellPadding="1">

</asp:DataGrid>
</div>
</asp:Panel>
<input type="hidden" id="hidscrollPos" name="scrollPos" value="0" runat="server" />
</form>
</body> 
```

在数据网格中，我定义了 11 个我认为（希望？）与此问题无关的 asp:TemplateColumns。如果需要，我当然可以添加该代码。

我的 .css 文件包含 grdGrid：

```
.grdGrid
{
FONT-SIZE: 12px;
FONT-FAMILY: Verdana;
BACKGROUND-COLOR: white
} 
```

我正在使用 Visual Studio 2008 和 IE9。用户将使用 IE8 或 IE9。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:21:53.143

您可以将数据网格包装在 UpdatePanel 中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:55:43.867

在把我的头撞在墙上几个小时之后，我终于弄明白了。

上面发布的代码是正确的并且可以完美运行。问题是 divDataGrid 包含在另一个 div 中，并且该 div 具有溢出：自动设置。所以我看到的滚动条来自那个 div，而不是 divDataGrid 或 grdItem。

一旦我从前一个 div 中删除了 overflow:auto 设置，一切都开始工作了。

# sql-server - 使用 Hibernate 命名策略生成模式的案例更改

> ID：15007198
> 
> 赞同：0
> 
> 时间：2013-02-21T16:20:24.007
> 
> 标签：sql-server, hibernate

我正在从休眠 hbm2ddl 工具工具创建 ddl。

我在生成 ddl 时有多对一的关系 SensorInterfaceConfCalibration.java 类，它为其他表生成很好，但它在

```
CREATE TABLE SEN_INT_CONF_CALIB(calibration_id numeric(19,0) null, SENSOR_INTERFACE_CONF_ID numeric(19,0) not null...etc...) 
```

我使用 Namingstrategy.java 返回大写的表名和列名

我正在使用休眠版本 3.5.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:47:07.967

哦...解决了问题..实际上我必须添加 @Table(name='SEN_INT_CONF_CALIB') 而不是 @join Table

# ios - 限制 UIImageView 中绘图的边界

> ID：15007204
> 
> 赞同：1
> 
> 时间：2013-02-21T16:20:53.117
> 
> 标签：ios, objective-c, uiimageview

我有一个带有图像的 UIImageView，该视图已设置为适合纵横比，因此当我加载新图像时，图像的大小会改变。

在该 UIImageView 之上是另一个 UIImageView，我允许用户在图像中围绕一个人画一条线。

这一切都完美无缺，但是我能够绘制图像（仍在 UIImageView 中）。是否可以将绘图的边界限制为图像的大小而不是视图的大小？

我已经计算出视图中图像的宽度和高度，但是当我将它们作为参数放入 drawInRect 时，它不再在屏幕上绘制。

这非常适合在完整视图中绘制：

```
[self.drawImage.image drawInRect:CGRectMake(0,0,self.view.frame.size.width, self.view.frame.size.height)]; 
```

# actionscript-3 - 错误 #1009 在外部类文件中使用事件侦听器

> ID：15007205
> 
> 赞同：0
> 
> 时间：2013-02-21T16:20:55.233
> 
> 标签：actionscript-3, flash, flash-cs6

（AS3/Flash 的新手，所以如果我对某事一无所知，请放轻松...）

尝试利用外部类文件创建连续滚动的背景图像。我通过将它放在文档类文件中来让它工作，但是尝试将它放在它自己的外部类文件中并从文档类文件中调用它会导致我的标题中出现错误。

文档类文件：

```
package {

    import flash.display.MovieClip; 
    import org.masteringmoneybasics.piggy._class_BG

    public class Main extends MovieClip {
        public function Main() {
            //Create instance of background class
            new _class_BG();
            } 

    }
} 
```

外部类文件：

```
package org.masteringmoneybasics.piggy {

    import flash.display.*
    import flash.events.Event
    import flash.display.Bitmap;
    import flash.display.BitmapData;

    public class _class_BG{
        //BG Variables
        var scrollSpeed:uint = 6;
        var bgLeft:Bitmap
        var bgRight:Bitmap

        [Embed(source="../../../assets/side_of_mountain.png")]
            private var bgImage:Class;

        public function _class_BG() {
                    //This adds two instances of the background to the stage
            bgLeft = new bgImage();
            bgRight = new bgImage();
            bgLeft.height = 500;
            bgRight.height = bgLeft.height;
            bgLeft.width = 1300;
            bgRight.width = bgLeft.width;
            bgLeft.x = 0;
            bgRight.x = bgLeft.width;
            addChild(bgLeft);
            addChild(bgRight);

            //Adds an event lsitener to the stage
            stage.addEventListener(Event.ENTER_FRAME, moveScroll); //<<<<<< ERROR HERE
        }

        public function moveScroll(e:Event):void{
            bgLeft.x -= scrollSpeed;
            bgRight.x -= scrollSpeed;

            if(bgLeft.x < -bgLeft.width){
                bgLeft.x = bgRight.x + bgRight.width;
            }else if(bgRight.x < -bgRight.width){
                bgRight.x = bgLeft.x + bgLeft.width;
            }
        }

    }

} 
```

如果我移除舞台。在事件侦听器中引用，它运行没有错误，但图像不会像他们应该的那样出现在舞台上。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:41:06.403

您试图在主类外部类中初始化阶段。事实上，阶段还没有到来。看到你的 _class_BG，addChild() 有点不对。因为您没有检查 Main 类，所以完美添加了阶段。

FlashBuilder这个问题一定要小心。在外部类（相关的 DisplayObject）完全加载或初始化后首先添加到 Main 类的阶段。

参考以下代码。

在_class_BG 上课认真`addEventListener(Event.ADDED_TO_STAGE,init);`

```
package {

    import flash.display.MovieClip; 

        public class Main extends MovieClip {
            public function Main() {
                var sp:_class_BG = new _class_BG();
                addChild(sp);
            }   
        }
} 
```

* * *

```
package {

    import flash.display.*;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.events.Event;

    public class _class_BG extends Sprite {
        //BG Variables
        private var scrollSpeed:uint = 6;
        private var bgLeft:Bitmap
        private var bgRight:Bitmap

        [Embed(source="../asset/myTestImage.png")]
        private var bgImage:Class;

        public function _class_BG() 
        {
            if(!stage)
                addEventListener(Event.ADDED_TO_STAGE, init);
            else
                init();
        }

        private function init(e:Event = null):void
        {
             removeEventListener(Event.ADDED_TO_STAGE, init);

            //This adds two instances of the background to the stage
            bgLeft = new bgImage();
            bgRight = new bgImage();
            bgLeft.height = 500;
            bgRight.height = bgLeft.height;
            bgLeft.width = 1300;
            bgRight.width = bgLeft.width;
            bgLeft.x = 0;
            bgRight.x = bgLeft.width;
            addChild(bgLeft);
            addChild(bgRight);

            //Adds an event lsitener to the stage
            stage.addEventListener(Event.ENTER_FRAME, moveScroll);
        }

        public function moveScroll(e:Event):void{
            bgLeft.x -= scrollSpeed;
            bgRight.x -= scrollSpeed;

            if(bgLeft.x < -bgLeft.width){
                bgLeft.x = bgRight.x + bgRight.width;
            }else if(bgRight.x < -bgRight.width){
                bgRight.x = bgLeft.x + bgLeft.width;
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:29:00.950

只有顶层 Displayable 可以访问场景。更重要的是，它是只读的，这意味着您不能通过原始阶段属性传递它。

最简单的方法是......我不知道，也许将阶段传递给您的构造函数？构造函数的相关部分是：

```
 public function _class_BG(myStage : Stage) {

        // SNIP

        //Adds an event lsitener to the stage
        myStage.addEventListener(Event.ENTER_FRAME, moveScroll);
    } 
```

在 Main 中（您可以在其中访问舞台）：

```
public class Main extends MovieClip {
    public function Main() {
        //Create instance of background class
        addChild(new _class_BG(stage));
    } 
} 
```

您应该考虑一些其他构建逻辑的方法，通过舞台会很快变得毛茸茸。但它应该工作。

**编辑：**

舞台->我的舞台；另外，在 Main() 中添加孩子。

# asp.net-mvc - ASP.NET、MVC、C# 网站通过应用程序传递一个值

> ID：15007209
> 
> 赞同：1
> 
> 时间：2013-02-21T16:21:06.393
> 
> 标签：asp.net-mvc

这对我来说有点困惑。

我需要捕获传递给主页的 URI 查询字符串。

当用户访问网站上的不同页面时，我有一个需要该 URI 查询字符串的局部视图。

我需要在局部视图中动态创建一个链接，这等于对主页的原始调用。

例子 -

如果用户转到 - `http://www.mysite.com?mode=Joe`，我需要动态创建的链接等于 -`Http://www.mysite.com?mode=Joe`

如果用户转到 - `http://www.mysite.com?mode=Tommy`，我需要动态创建的链接等于 -`Http://www.mysite.com?mode=Tommy`

仅供参考 - 文件中使用了部分视图`_Layout.cshtml`。里面的电话——`_Layout.cshtml`看起来像这样——

```
@Html.Partial("MyPartial") 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:24:46.877

有很多方法可以做到这一点，但最简单的可能是将其保存到主页上的会话中，然后从您的部分访问该会话变量。

如果会话到期，您将需要决定该怎么做。

另一种可能的方法是将其写入主页请求上的 cookie，然后在您的部分访问请求 cookie。同样，您需要决定在浏览过程中禁用或清除 cookie 的方法。

* * *

或者，您可以查看以下链接中使用的方法来设置整个站点的语言。确切的实现会有所不同，但概念是相同的：

[如何自动将当前路由中的特定值添加到所有生成的链接？](https://stackoverflow.com/questions/5060346/howto-automatically-add-a-specific-value-from-current-route-to-all-generated-lin)

# excel - SSRS 2008 R2 - 导出到 Excel 时的 MAX TABS

> ID：15007210
> 
> 赞同：5
> 
> 时间：2013-02-21T16:21:07.483
> 
> 标签：excel, ssrs-2008, reporting-services

当我将 SSRS 报告导出到 excel 时，分页符会变成 excel 选项卡。通过此导出可以创建的最大选项卡是否有限制？

我知道存在行/列限制，但不确定制表符/分页符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T17:46:33.220

工作簿中工作表的限制取决于计算机内存。

[看看这篇文章](http://office.microsoft.com/en-001/excel-help/excel-specifications-and-limits-HP005199291.aspx)

出口没有什么不同。

# asp.net - 链接以将数据从 HTML 表导出到 Excel。VB.NET

> ID：15007213
> 
> 赞同：-2
> 
> 时间：2013-02-21T16:21:30.880
> 
> 标签：asp.net, html, vb.net

我有一个 asp.net 网页，上面有各种数据。其中之一是标准的 html 表。10 列乘 5 行。我想在表格下方放置一个链接，允许用户单击它，它将表格中的数据导出到 Excel 工作表中。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:04:46.627

如果您想从数据库中导出数据，我假设数据是动态的？基于这个假设，为什么不在 GridView 或 ASP 表中显示数据？这样，您将能够更好地导出数据。

如果您是从代码动态创建表格，那么我想那是不同的，但您还没有说明如何生成页面。

将控件导出到 excel：只需将 Gridview1 更改为要导出的控件的 ID。您的 ASP 表或您的 gridview ID。

```
 Dim sw As New StringWriter()
    Dim hw As New System.Web.UI.HtmlTextWriter(sw)
    Dim frm As HtmlForm = New HtmlForm()

    Page.Response.AddHeader("content-disposition", "attachment;filename=ExportFromWebPage.xls")
    Page.Response.ContentType = "application/vnd.ms-excel"
    Page.Response.Charset = ""
    Page.EnableViewState = False
    frm.Attributes("runat") = "server"
    Controls.Add(frm)
    frm.Controls.Add(GridView1)
    frm.RenderControl(hw)
    Response.Write(sw.ToString())
    Response.End() 
```

-编辑。我在这里展示了我的天真，只是假设这不适用于本机 html 表。我以为我试试看，它实际上会起作用。只需在服务器上运行您的表格并为其提供一个 ID，然后替换`gridview1`为您为 HTML 表格提供的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:44:03.670

我只是想放一些你可以使用的文章或其他答案，但是谷歌搜索 html 表格到 excel 你可以找到一些答案。

[使用 jquery](https://stackoverflow.com/questions/11301223/html-table-to-excel-using-jquery) [将 html 表导出到 excel 如何使用 javascript 将 html 表导出到 excel](https://stackoverflow.com/questions/6566831/how-to-export-html-table-to-excel-using-javascript)

# xsd - XSD 可以添加一个约束来比较两个元素吗？

> ID：15007227
> 
> 赞同：2
> 
> 时间：2013-02-21T16:22:05.770
> 
> 标签：xsd, xsd-1.1

XSD 可以添加一个约束来比较两个元素吗？假设我在 DataRangeType 下有 Begin End 我想添加一个约束说`Begin <= End`. 这是可行的吗？

顺便说一句，我正在使用 XMLSpy 2013。

```
<xs:complexType name="DataRangeType">
    <xs:sequence>
        <xs:element name="Begin" type="xs:date"/>
        <xs:element name="End" type="xs:date"/>
    </xs:sequence>
</xs:complexType> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:40:24.637

它在 XSD 1.1 中通过断言是可行的。我不相信约束在 XSD 1.0 中是可以表达的。

[附录]你问一个例子。这个给你。

```
<xs:complexType name="DataRangeType">
  <xs:sequence>
    <xs:element name="Begin" type="xs:date"/>
    <xs:element name="End" type="xs:date"/>
  </xs:sequence>
  <xs:assert test="Begin &lt;= End"/>
</xs:complexType> 
```

# css - 如何为圆形图像添加圆形边框（使用边框半径进行圆形）

> ID：15007229
> 
> 赞同：0
> 
> 时间：2013-02-21T16:22:09.037
> 
> 标签：css

我已将个人资料图像设置为显示“圆形”。为了实现这一点，我将边框半径设置为 50%。

当我尝试为该圆形图像添加边框（即。`border:1px black solid;`）时，它不遵循圆形图案，但它只是为方形图像添加边框。

如何添加圆形边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:26:02.523

you just need to apply the border-radius to the same element that gets the border and the rounded corners.

@ben c.taylor : I don't know if it's a hack, but it works on Chrome at least, just tested.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:26:34.047

Use the CSS `background-image` property to set the image as a background image of a div element for example. Then apply `border-radius` to this.

Dont forget your browser prefixes though!

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-21T16:24:38.057

图像也不支持边框半径，html5 画布图像。尝试使用带有背景图像的 div。例子：

> < div style="background-image: url('profilpic.png'); 边框半径: 10px; *(etc...)* ">

它会有边界半径

# backbone.js - 将行为附加到流星集合的最佳方法是什么？

> ID：15007231
> 
> 赞同：22
> 
> 时间：2013-02-21T16:22:12.550
> 
> 标签：backbone.js, model, meteor, behavior

在 Meteor 中，当您从数据库中检索记录时，它只是一条记录。因此，如果我有一个名为 的集合`Dogs`， a`dog`可能有`fur: 'brown'`or `breath: 'stinky'`，但它没有`bark()`方法。

显然，我可以创建一些期望 a`dog`作为参数的函数，然后对它执行操作`dog`。我什至可以将所有这些函数封装到一个构造函数中。我对这种方法并不疯狂，但如果有人有一种干净而明智的方法来做到这一点，我会全力以赴。

我的另一个想法是`dog`将`Backbone.Model`. 这可能很有趣，因为`fetch`and`save`可以被重新定义为做`find`and `insert`or `update`，你也可以在那里定义你的所有行为，但我读过这种类型的事情通常是不鼓励的。

有正确的方法吗？有没有`Meteor.Model`正式的作品？其他人是如何解决这个问题的？

**编辑**

对于那些在接受答案一年多后提出这个问题的人：在此编辑时，我正在使用[Exygy 的 minimongoid mrt 包](https://github.com/Exygy/minimongoid)，它对接受答案链接的博客文章中提到的[haihappen 版本进行了一些改进。](https://github.com/haihappen/minimongoid)

我目前正在为存储库做出贡献，以使结果集更像关系。希望其他人能利用它并愿意贡献有用的功能。

**编辑**

另一个答案建议`transform`在创建集合时使用该属性。虽然我肯定更喜欢我不需要自己构建的东西，但这个功能增加了很多可能性，我希望任何正在为 Meteor 开发 ORM 的团队都能在核心上利用这个.

[这是一篇](https://medium.com/@davidjwoody/meteors-new-feature-will-transform-your-mongo-collections-5aa02d00e41b)解释如何使用该`transform`属性的博客文章。

此外，[minimongoid 现在可以作为 Meteor 包](https://atmospherejs.com/kaptron/minimongoid)使用，我仍在使用它。它支持验证和声明关系。我也为这个包添加了一些功能，所以如果一个板有很多块，`board.pieces().create(attributes)`将保留一个新`piece`记录`attributes`并自动与`board`. 在我见过的各种解决方案中，这似乎是最全面的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-04T07:39:49.950

您可以使用`transform`Collection 中的参数使用自定义函数重载对象

```
var Dogs = new Meteor.Collection("dogs", 
{
    transform:function(entry)
    {
        entry.bark = function(){ console.log(this.barkSound);};
        return entry;
    }
}); 
```

然后：

```
var aDogID = new Dogs.insert({barkSound: "ruff"})
Dogs.find(aDogID).bark(); // "ruff" 
```

**奖励：**如果出于任何原因您想使用 Andrew Ferk 提出的类似概念，只需使用 _.defaults(object, *defaults) 函数。

```
var defaults = {
             barkSound: "ruff",
             bark: function() {
                        console.log(this.barkSound);
                    }
            }

Dogs = new Meteor.Collection("dogs",
        {
            transform: function(object) {
                return _.defaults(object, defaults);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T21:56:06.117

这是重写 Meteor.Collection 以支持对象上的方法的开始。

```
Meteor.Kollection = Meteor.Collection;
Meteor.Kollection.extend = function(constructor) {
  var parent = this;
  var child = function() {
    Meteor.Kollection.apply(this, arguments);
    constructor.apply(this, arguments);
  };

  _.extend(child, parent);

  function __proto__() { this.constructor = child; };
  __proto__.prototype = parent.prototype;
  child.prototype = new __proto__;

  return child;
};

Meteor.Collection = Meteor.Kollection.extend(function(name, options) {
  if (options && options.defaults) {
    this.defaults = options.defaults;
  }
});

Meteor.Collection.prototype.applyDefaults = function(attrs) {
  return _.defaults(attrs, this.defaults);
};

Meteor.Collection.prototype.create = function(attrs) {
  if (typeof attrs !== "object") attrs = {};
  return this.applyDefaults(attrs);
};

Meteor.Collection.prototype.findOne = function(selector, options) {
  var object = Meteor.Kollection.prototype.findOne.apply(this, arguments);
  return this.applyDefaults(object);
}; 
```

您可能会注意到新的*collection* .create 方法，并且该*collection* .findOne 已被覆盖。我想所有的*collection* .* 方法都需要被覆盖，但这是一个开始。

那么你能用这个做什么呢？

```
var Dogs = new Meteor.Collection("dogs", { defaults: {
  barkSound: "ruff",
  bark: function() {
    console.log(this.barkSound);
  }
}});

if (Meteor.isClient) {
  var regularDog = Dogs.create();
  regularDog.bark(); // ruff

  var smallDog = Dogs.create({
    barkSound: "yip"
  });
  smallDog.bark(); // yip

  Dogs.insert(smallDog, function(error, id) {
    Dogs.findOne(id).bark(); // yip
  });
}); 
```

我不确定这是怎么发生的，但是对象中的任何函数在插入时都会被删除。因此，我们可以直接将方法应用于对象。首先，您通过传入具有该`defaults`属性的对象来创建您的集合。该属性可以包括属性或方法。要为给定集合创建新对象，请使用*collection* .create(attrs)，其中 attrs 是一个选项参数，其中包括附加或覆盖的属性和方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-20T01:53:58.950

[天文学](https://atmospherejs.com/jagi/astronomy)是对流星模型这个老问题的新答案。作者计划了更多功能正在开发中，并得到其他著名 Meteor 包作者的支持。唯一的缺点*可能是*它有点流血。

天文学也是[高度模块化](https://github.com/jagi/meteor-astronomy/wiki/Modules)的，这是以流星打包/模块化风格构建的主要示例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T16:52:17.847

虽然可能有一个[官方模型系统正在开发中，](https://trello.com/card/models-and-schemas/508721606e02bb9d570016ae/49)但您现在可以做一些事情：

马里奥·乌勒（Mario Uhler）有一个像 activerecord 一样非常好，在咖啡脚本中：[https ://coderwall.com/p/_q9b1w](https://coderwall.com/p/_q9b1w)

还有一个由 Tom Coleman 制作的社区包，它对模型非常有用：[https](https://github.com/tmeasday/meteor-models) ://github.com/tmeasday/meteor-models ，您可能需要[陨石](https://github.com/oortcloud/meteorite)将其添加为一个包。

当然，正如您建议的 Backbone。我个人使用js原型，但可能不是每个人都喜欢，我只是使用它们，所以当meteor的模型系统出来时它很容易过渡，也很容易在客户端和服务器之间共享，不需要添加太多的包。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-02T17:04:20.590

就 Meteor 而言，这是一个相对古老的问题，但我认为[dburles:collection-helpers](https://atmospherejs.com/dburles/collection-helpers)通过实施 Flavien Volken 的建议符合您想要实现的目标。也许它对最近在这里闲逛的人有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-21T05:44:47.887

除了@Flavien Volken 的答案，您可以将参数传递给您添加到集合中的方法。

```
Car = new Mongo.Collection('car', {
    transform: function(entry) {
        entry.is_watched = function(userId) {
            var is_watched = false;
            if (entry.watchList) {
                for (var i in entry.watchList) {
                    if (entry.watchList[i].userId == userId) {
                        is_watched = true;
                        break;
                    }
                }
            }
            return is_watched;
        };
        return entry;
    }
}); 
```

在模板中（传递登录用户的 id）：

```
{{# if is_watched currentUser._id }}
    Watched
{{ else }}
    Not watched
{{/ if }} 
```

# java - 获取 Java 中的硬盘访问次数

> ID：15007238
> 
> 赞同：1
> 
> 时间：2013-02-21T16:22:49.383
> 
> 标签：java, hard-drive, measurement, sigar

我想测量一个程序对硬盘的访问量（即读/写了多少字节）。我用谷歌搜索了这个问题，发现 Sigar 应该能够记录这样的事情，但是在继续搜索之后，我没有找到任何可以获取读/写计数的东西。在程序开始之前，我做

```
sigar = new Sigar();
sigar.enableLogging(true); 
```

之后，我愿意

```
sigar.enableLogging(false);
for ( FileSystem fs : sigar.getFileSystemList() )
{
  if ( fs.getType() == FileSystem.TYPE_LOCAL_DISK )
  {
        System.out.println("Dev: " + fs.getDevName() + ": " + sigar.getDiskUsage(fsName).getReads() +" "+ sigar.getDiskUsage(fsName).getWrites());
  }
} 
```

但这并没有返回任何感觉（我已经用一个 java-Program 试过了，它只写数字，它说有硬盘使用。

`sigar.getDiscUsage`似乎也只显示文件系统的大部分被使用了，而不是访问了多少。有没有人暗示如何用 sigar 或另一个图书馆来衡量这个？

在此先感谢 DaGeRe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-05-12T16:32:27.440

有一个名为 Tracer-IO Probes for jvisualvm 的插件，可以计算以下内容：

*   文件 I/O 计数：读/写操作的调用计数
*   文件 I/O 字节：读取或写入文件的字节数
*   文件 I/O 大小：每次读/写操作的平均字节数

它将首先显示 1 个 22 字节的写入计数，然后显示 2 个 22 字节的读取计数......

[jvisualvm IO 探测](https://i.stack.imgur.com/Xoul0.png)

...对于这个写入和读取 22 个字节的程序

```
System.in.read();
byte[] bytes = "Writing this to a file".getBytes();
Path path = Files.createTempFile("io-probes-test", ".txt");
path.toFile().createNewFile();
Thread.sleep(2000L);
Files.write(path, bytes);
Thread.sleep(10000L);
Files.readAllBytes(path);
Thread.sleep(2000L);
path.toFile().delete();
Thread.sleep(5000L); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T05:54:36.967

我管理[OSHI](https://github.com/oshi/oshi)项目。有一个带有方法的[OSProcess 类](http://oshi.github.io/oshi/apidocs/oshi/software/os/OSProcess.html)`getBytesRead()`，`getBytesWritten()`它将返回该程序对磁盘的访问。

它不会在进程级别返回确切的读取/写入次数，但在设备级别会返回：[HWDiskStore 类](http://oshi.github.io/oshi/apidocs/oshi/hardware/HWDiskStore.html)具有方法`getReads()`，`getReadBytes()`并且写入方法相同，因此如果您同时测量程序和磁盘，则可以可能会制定一个比率并对程序本身有一个很好的估计。

获取该数据的代码...从 SystemInfo 对象开始：

```
SystemInfo si = new SystemInfo(); 
```

获取包含计数和字节的硬盘列表：

```
HardwareAbstractionLayer hal = si.getHardware();
List<HWDiskStore> disks = hal.getDiskStores(); 
```

要获取带有字节的进程列表：

```
OperatingSystem os = si.getOperatingSystem(); 
List<OSProcess> procs = os.getProcesses(); 
```

或者如果您知道您正在测量的进程 ID：

```
OSProcess proc = os.getProcess(pid); 
```

# shell - 如何定期保存程序输出的最后一行？

> ID：15007241
> 
> 赞同：3
> 
> 时间：2013-02-21T16:23:03.993
> 
> 标签：shell, unix, redirect, command-line

我运行一个每秒生成一行输出的程序。每次生成新行时，我都需要将它（并且只有它）保存到特定的文本文件中。生成新行时，必须用新行覆盖文件。

我认为这一定是非常简单的解决方案，但由于我对 shell 命令的了解不足，我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:27:40.147

这样的事情将是一种可能的解决方案

```
./your_program | (while true; do read tmp && echo "$tmp" > $file; done) 
```

`$file`你的文件在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:46:05.063

```
... | awk '{ print > "output"; close( "output" )}' 
```

将使用每个新的输出行截断输出文件。

# javascript - 项目jQuery的图像调整大小

> ID：15007242
> 
> 赞同：1
> 
> 时间：2013-02-21T16:23:04.723
> 
> 标签：javascript, jquery, html, css, ajax

我已经设法自动适应每行画廊的图像，具体取决于它是水平的（每行一个图像）还是垂直的（每行两个图像）。

现在的问题是我希望图像是可缩放的（在窗口调整大小时调整大小），但我不知道如何实现它。我应该怎么做？

这是我的代码：

```
var gallery = new Gallery($('#gallery_images_inner'));

function Gallery(selector){

this.add_module = function(type, image){
    var container = $('<div />' , {
        'class' : 'gallery_container'
    }).append(image);
    if(type == 'horizontal'){
        var h_ar = image.attr('height') / image.attr('width');
        container.css({
            'width' : selector.width(),
            'height' : selector.width()*h_ar
        })
    }
    if(type == 'vertical'){
        container.css({
            'width' : v_width,
            'height' : v_height
        })
    }
    container.appendTo(selector);
    container.children('img').fitToBox();
}
var _this = this;
var gutter = 0;
// start vars for counting on vertical images
var v_counter = 0;
var w_pxls = 0;
var h_pxls = 0;
// iterates through images looking for verticals
selector.children('img').each(function(){
    if($(this).attr('width') < $(this).attr('height')){
        v_counter++;
        h_pxls += $(this).attr('height');
        w_pxls += $(this).attr('width');
    }
})
// calculates average ar for vertical images (anything outside from aspect ratio will be croped)
var h_avrg = Math.floor(h_pxls/v_counter);
var w_avrg = Math.floor(w_pxls/v_counter);
var v_ar = h_avrg/w_avrg;
var v_width = (selector.width())/2;
var v_height = v_width*v_ar;
selector.children('img').each(function(){
    if(parseInt($(this).attr('width')) > parseInt($(this).attr('height'))){
        _this.add_module('horizontal', $(this));
    }else{
        _this.add_module('vertical', $(this));
    }
})
selector.isotope({
    masonry: {
        columnWidth: selector.width() / 2
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:50:13.890

对包含图像的容器使用百分比（对于它的宽度和高度）.. 然后也对图像的宽度和高度使用百分比（它不必是 100%，它只需要是相对于它的容器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:17:51.847

这会更好地用 CSS 来解决。只需将 img 宽度设置为 100%，它就会随着其父级的大小扩展合同。在下面的示例中，.container 占据了 25% 的窗口，而 img 占据了 100%。您可以使用 firebug 更改容器的宽度并查看差异。

```
<DOCTYPE html>
<html>
<head>
    <style>
        .container {
            width: 25%;
        }
        .container img {
            width: 100%;
        }
    </style>
</head>
<body>

    <div class="container">
        <img src="http://ldlocal.web44.net/test2/img/gallery0.jpg">
    </div>

</body>
</html> 
```

# c# - 如何用c#读取包含逗号的sql列作为一个字段

> ID：15007243
> 
> 赞同：3
> 
> 时间：2013-02-21T16:23:06.243
> 
> 标签：c#, sqldatareader

我有一个使用 C# 读取的 sql08 数据库表。其中一列（College）包含一些数据有逗号的数据：`Miami, FL`或`Miami, OH`，而有些则没有：`USC`。我的输出 .csv 将数据从包含行的逗号向右移动一列。我希望我的输出包含`Miami,FL`一个字段：`|Miami,FL|`不是`|Miami| |FL|`

```
myWriter.WriteLine("Player, Position, Current Team, College");
SqlDataReader myReader = null;
SqlCommand myCommand = new SqlCommand("Select * FROM FootballRoster", myConnection);

myReader = myCommand.ExecuteReader();
while (myReader.Read())
{
    string myPlayer = myReader.GetString(0);
    string myPosition = myReader.GetString(1);
    string myCurTeam = myReader.GetString(2);
    string myCollege = myReader.GetString(3);

    myWriter.WriteLine("{0}, {1}, {2}, {3},", myPlayer, myPosition, myCurTeam, myCollege);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:27:08.743

You can find the answer in here

[Dealing with commas in a CSV file](https://stackoverflow.com/questions/769621/dealing-with-commas-in-a-csv-file)

Basically you need to escape the ',' characters. you can use '' to do it

Here you have the spec for CSV format

[https://www.rfc-editor.org/rfc/rfc4180](https://www.rfc-editor.org/rfc/rfc4180)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:27:12.797

尝试将值放在双引号内：

```
myWriter.WriteLine("\"{0}\", \"{1}\", \"{2}\", \"{3}\",", myPlayer, myPosition, myCurTeam, myCollege); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:29:26.130

通常在 .CSV 中，如果字符串包含逗号，则将字段用双引号引起来。

因此，佛罗里达州迈阿密在 .CSV 文件中变为“迈阿密，佛罗里达州”。

所以你可以做类似的事情......

```
string myCollege = "";

if(myReader.GetString(3).Contains(","))
 {
    myCollege = "\"" + myReader.GetString(3) + "\"";
 }
else
 {
    myCollege = myReader.GetString(3);
 } 
```

# c++ - c++中的外部模板构造函数

> ID：15007244
> 
> 赞同：0
> 
> 时间：2013-02-21T16:23:11.927
> 
> 标签：c++, templates, c++11, constructor, extern

很长一段时间以来，我一直在努力解决将模板化函数的实现与定义分开的老问题。C++0x'`extern`似乎是一个解决方案，但我无法正确应用它

我的代码：

`main.cpp`

```
#include <iostream>
#include <string>

#include "lexer.h"

int main(int argc, char const *argv[]) {
    std::string foo("foo");
    new lexer((foo.begin()),(foo.end()));
    return 0;
} 
```

`lexer.h`

```
#ifndef lexer_h
#define lexer_h
class lexer {
    public:
    extern template<class InputIterator>
    lexer(InputIterator i, InputIterator end);
};
#endif //lexer_h 
```

`lexer.cpp`

```
#include "lexer.h"
template<class InputIterator >
lexer::lexer(InputIterator i, InputIterator end) {
    //make it work
}; 
```

编译`g++ main.cpp lexer.cpp -std=c++0x`。我想稍后使用目标文件。

那么它看起来如何固定呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:50:32.747

除非您知道用作 参数的完整类型集，否则`InputIterator`定义需要进入头文件。

只有当您知道所需的完整实例化（参数）集时，模板定义（实现）才能与声明分开。编译器无法记住在一个`.cpp`（翻译单元）中使用了哪些实例化，并使用另一个`.cpp`.

正如 Andy 所提到的，您似乎正在寻找的行为以前被分配给 C++03`export`关键字，该关键字很少被实现，并且结果不如预期的有用，现在已完全从标准中删除。

如果您确实想走这条路（我现在正在编写一个类似的库！），`extern`关键字需要超出`class {}`范围，并且`.cpp`文件需要显式实例化所需的特化。

```
// header file

class lexer {
    public:
    template<class InputIterator>
    lexer(InputIterator i, InputIterator end);
};

extern template lexer::lexer( foo::iterator, foo::iterator );
extern template lexer::lexer( bar::iterator, bar::iterator );

// source file

template<class InputIterator >
lexer::lexer(InputIterator i, InputIterator end) {
    //make it work
};

template lexer::lexer( foo::iterator, foo::iterator );
template lexer::lexer( bar::iterator, bar::iterator ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:36:18.067

它不起作用的原因是您没有实例化您的类模板，也没有实例化您的类模板的构造函数：在处理调用该构造函数`.cpp`以外的翻译单元（即文件）`lexer.cpp`时，编译器将无法查看它的定义，因此它不会为它发出任何目标代码；另一方面，在唯一*可以*看到其定义 ( `lexer.cpp`) 的翻译单元中，您没有调用构造函数，因此编译器也不会发出任何目标代码。

结果，您的程序的编译翻译单元中不存在您的构造函数的目标代码，并且链接器在尝试创建可执行文件时会抱怨对您的类的构造函数的*未解析引用。*

*当您知道*模板将（显式）在另一个翻译单元中实例化时，该`extern`关键字用于*防止*在一个翻译单元中实例化模板（即使其完整定义可见！） ，从而节省编译时间。有关说明，请参阅**[StackOverflow 上的此问答](https://stackoverflow.com/questions/8130602/using-extern-template-c0x)**。

 *来自 C++11 标准的第 14.7.2/2 段：

> 显式实例化的语法是：
> 
> 显式实例化：extern(opt) 模板声明
> 
> 显式实例化有两种形式：显式实例化定义和显式实例化声明。显式实例化**声明**以`extern`关键字开头。

因此，您提供的只是一个声明。除非`.cpp`您在同一个翻译单元（唯一一个可以访问这些定义）。

C++03 有一个名为的关键字`export`，它允许执行您想要实现的目标，但在 C++11 的标准化过程中[**已将其删除**](https://stackoverflow.com/questions/5416872/using-export-keyword-with-templates)，因为事实证明它对于编译器供应商来说难以实现。*

# python - 如何检索 Matplotlib savefig() 函数支持的文件格式列表？

> ID：15007248
> 
> 赞同：14
> 
> 时间：2013-02-21T16:23:22.740
> 
> 标签：python, matplotlib

[函数](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.savefig)[文档`savefig()`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.savefig)说支持的文件格式列表取决于使用的后端。如何获取特定后端支持的图像格式列表？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-21T16:29:58.790

你只需要问`canvas`：

```
plt.gcf().canvas.get_supported_filetypes() 
```

或者

```
plt.gcf().canvas.get_supported_filetypes_grouped() 
```

[文件](http://matplotlib.org/api/backend_bases_api.html#matplotlib.backend_bases.FigureCanvasBase.get_supported_filetypes)

# objective-c - 有没有办法知道您当前处于哪个运行循环或框架？

> ID：15007251
> 
> 赞同：0
> 
> 时间：2013-02-21T16:23:33.587
> 
> 标签：objective-c

我正在输出调试日志，我想知道我的代码中的特定方法是否在当前的 runloop 和后续的 runloop 中执行。有没有办法做到这一点？

例如，最简单意义上的运行循环：

```
int i = 0;
while (1) {
  // process event queue
  // here I want to print a number 
  // that signifies n-th time I am processing the run loop
  NSLog(@"%d", i);
  i++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:14:33.203

以这种方式检查您是否在主运行循环中：

```
if ([NSRunLoop currentRunLoop] == [NSRunLoop mainRunLoop]) {
    // ...
} 
```

对于在后台线程或 runloop 上运行的任何方法，此测试将失败（runloops 属于线程，并且每个线程都存在一个。）

如果您需要确定某段代码是否在特定运行循环上肯定运行，您可以将有问题的运行循环引用缓存在您知道它将运行的地方：

```
-(void)IKnowThisMethodRunsInASpecialRunLoop {
    _runLoopToWatch = [NSRunLoop currentRunLoop];
} 

// ... later ...

-(void)someMethod {
    if ([NSRunLoop currentRunLoop] == _runLoopToWatch ) {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:33:37.580

如果你给每个线程一个名字，你可以查询它。

```
NSThread *thread = [NSThread currentThread];
[thread name]; 
```

# python - 为什么 scikit-image 将视频的帧数作为浮点数返回？

> ID：15007253
> 
> 赞同：1
> 
> 时间：2013-02-21T16:23:38.833
> 
> 标签：python, scikit-image

我想知道为什么 scikit-image 将视频的帧数作为浮点数返回。是否有过视频具有小数帧的情况？

这个代码片段...

```
import skimage.io as io
v = io.Video('videos/intersection_cine.avi')
v.frame_count() 
```

...返回 17313.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T19:50:11.380

`skimage.io.Video`通过使用 OpenCV 工作，并且`frame_count`它使用 OpenCV 的函数`GetCaptureProperty`，无论传递什么属性，它总是返回一个双精度值。

反过来，此函数会根据视频捕获的创建方式/位置调用另一个函数。例如，它可以基于 GStreamer，它总是返回一个整数`frame_count`。当使用 QuickTime 时，`frame_count`它​​被定义为`movieDuration*movieFPS/1000`，因此是一个浮点值。

# css - 为特殊字符设置字体的 Web 安全方法

> ID：15007257
> 
> 赞同：1
> 
> 时间：2013-02-21T16:24:02.350
> 
> 标签：css, unicode, utf-8, special-characters

有一个网站，其中包含大量异国语言的文本片段。它们将需要几个特殊的 Unicode 字符。

我需要一种方法来保证在每个主要操作系统的每个主要浏览器中正确显示每个特殊字符。

如果我使用标准的网络安全模式，例如“'Times New Roman', Times, serif;”，是否有可能特殊字符在不同的机器上看起来会有所不同？

编辑：我实际上并不需要使用*所有*的 Unicode 字符。如果它们可以安全使用，那么具有尽可能多的特殊字母的较小但广泛支持的子集也可以做到这一点。

Edit2：我想要实现的是一种方法，我可以指定（和使用）尽可能多的特殊字符，在所有主流浏览器和操作系统中正确呈现，以防止出现外来语言文本已满的情况问号或错误呈现的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:47:47.247

您将需要一个可下载的字体（网络字体），或者可能需要几个这样的字体，使用`@font-face`. 如果使用得当，现在几乎所有相关的浏览器都支持这种技术。困难的部分是决定字体，具体的解决方案取决于所需的字符库。有关一般信息和一些提示，请参阅我[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

“网络安全字体”不是。确实，大多数系统都有一种名为 Times New Roman 的字体，尽管它的字符库各不相同，例如 Android 没有它。但Times New Roman在人物覆盖方面相当不足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:43:29.350

使任何两个符号按像素完美呈现是不可能的，或者至少非常非常困难。举一个简单的例子，在 OSX 和 Windows 之间，您会发现任何给定字体的字体粗细都存在很大差异。但似乎您的担心只是避免将角色完全替换为另一个角色。例如，不支持的字符被替换为问号或方框。

如果这是真的，第一步将是找到一个包含所有你想要的字符的字体。如果该字体恰好是[“网络安全字体”](http://www.ctc-aspire.co.uk/blog-post-36-web-safe-fonts-157-34.html) ——也就是说，大多数常见操作系统的标准字体——那么请继续使用它。

如果该字体碰巧不是网络安全字体，请[@font-face](http://css-tricks.com/snippets/css/using-font-face/)它。这允许任何支持 @font-face 的浏览器显示您引用的任何字体。

请注意，如果您打算这样做，则需要了解字体的许可证。您不想绕过@font-面向本地托管的 Proxima Nova。

并且在主题支持上，`@font-face`拥有卓越的浏览器支持。这是[一篇关于@font-face 跨浏览器支持的好文章](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)。

当然，这只是如何实现跨浏览器解决方案的方法。如果您要问的是“我该怎么做，*我*应该使用什么字体？” 嗯......这是一个不同的问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:04:32.777

对于异国语言？您不能保证这一点，因为许多用户在他们的系统上不支持外来语言。即使您使用@font-face，标准的美国或欧洲 Windows 计算机也无法正确显示阿拉伯语或某些其他语言，因为缺少这种支持，而不仅仅是缺少字体。

查看有关韩国、沙特阿拉伯、中国等的 Wikipedia 文章 - 它们都带有警告框“本文包含 [语言] 字符。如果没有适当的渲染支持，您可能会看到问号、方框或其他符号”。如果可以解决，他们早就解决了。

因此，您唯一的选择是将图像用于外来语言的文本 - 这就是 Omniglot 所做的，参见例如[http://www.omniglot.com/writing/akkadian.htm](http://www.omniglot.com/writing/akkadian.htm) - 或者像 Wikipedia 那样显示文本，以及链接教人们如何激活对这些语言的支持。

# java - 将 XMLWorkerHelper 与 IText 一起使用

> ID：15007261
> 
> 赞同：2
> 
> 时间：2013-02-21T16:24:09.850
> 
> 标签：java, pdf-generation, itext

我是使用 iText 的新手，我不知道 XMLWorkerHelper 类是如何工作的。我正在尝试创建一个方法，该方法采用包含 html 文档的字符串，将 html 转换为 pdf 文档，并将 pdf 作为字节数组返回。如果有人能指出以下代码中的错误，我将不胜感激。

```
Document document = new Document(); 
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PdfWriter pdfWriter = PdfWriter.getInstance(document, baos);
document.open();
StringReader stringReader = new StringReader(articleString);
StringWriter stringWriter = new StringWriter();<br/>
Tidy tidy = new Tidy();
tidy.setXHTML(true);
tidy.parse(stringReader, stringWriter);
System.out.println("Before XMLWorkerHelper");
XMLWorkerHelper xwh = XMLWorkerHelper.getInstance();
xwh.parseXHtml(pdfWriter, document, new StringReader(stringWriter.toString()));
System.out.println("After XMLWorkerHelper");
document.close();
stringReader.close();
result = baos.toByteArray(); 
```

我正在使用的代码在上面。html 代码在变量 articleString 中。重要的部分在两个 System.out.println 语句之间。这是 Web 应用程序的一部分，System.out 将连同任何错误或异常消息一起写入服务器日志，但发生的情况是应用程序似乎只是在两个 println 语句之间终止而没有引发任何异常。因此打印了“Before XMLWorkerHelper”行，但没有打印“After XMLWorkerHelper”行。

我使用的jar文件是itextpdf-5.4.0.jar、itext-pdfa-5.4.0.jar、itext-xtra-5.4.0.jar、xmlworker-5.4.0.jar

我要转换的 html 文件只是“测试文章”，它被 jTidy 转换为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
</head>
<body>
Tester Article
</body>
</html> 
```

我尝试使用 iText 5.0 jar 中的旧 HTMLWorker 类代替 XMLWorkerHelper 代码，一切正常。我用来代替上面 XMLWorkerHelper 行的 HTMLWorker 代码是：

```
HTMLWorker htmlWorker = new HTMLWorker(document);
htmlWorker.parse(new StringReader(stringWriter.toString())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T06:27:49.477

我希望这已经解决了。如果没有，请尝试删除
代码。如果这没有帮助，请尝试将您的 stringWriter.toString() 放入 InputStream，然后在 parseXHtml 上使用流代替 stringWriter.toString()

输入流

```
InputStream stream = new ByteArrayInputStream(stringWriter.toString().getBytes("UTF-8")); 
```

XMLWorkerHelper：

```
XMLWorkerHelper.getInstance().parseXHtml(pdfWriter, document, stream); 
```

希望这可以帮助您或任何在查看此问题时遇到相同问题的人

# java - 翻转多维数组java

> ID：15007264
> 
> 赞同：2
> 
> 时间：2013-02-21T16:24:17.953
> 
> 标签：java, arrays, multidimensional-array

我有一个类可以创建具有所需宽度和高度的字符画布。

在此我有一个方法 drawLetter() （它基本上改变了字符，使一个字母出现在画布上（就像非常简单的 ASCII 艺术）

我还有 3 种其他方法 rotateClockwise、flipHorizo​​ntal 和 FlipVertical

rotate 和 flipHorizo​​ntal 我做得很好，它们工作但我似乎无法弄清楚我在垂直翻转数组时出错的地方（出于兴趣，我认为我的水平和垂直方向错误，但我放了一个我正在尝试的样本在下面完成）

这是我无法解决的问题：

这个：

```
# # # ~
~ # ~ ~
~ # ~ ~
~ ~ ~ ~ 
```

对此：

```
~ # # #
~ ~ # ~
~ ~ # ~
~ ~ ~ ~ 
```

显然它将像我的其他方法一样在 for 循环中完成，下面我将发布我已经为水平完成的方法并顺时针旋转以证明它不是我做不到的作业

```
void mirrorHorizontally()
{
    char[][]horizontalImage = new char[height][width];

    for (int i = 0; i < height /2; i++)
    { 
       for(int j = 0; j < width; j++)
       {  
           horizontalImage[height - (i+1)][j] = canvasArray[i][j];           
           horizontalImage[i][j] = canvasArray[height - (i+1)][j];
       }
    }   
    printPicture(horizontalImage);
}

void rotateClockwise()
{
    char[][] rotatedImage = new char[height][width];

    for(int i=0; i< canvasArray.length; i++)
    {
        for(int j= canvasArray.length-1; j >= 0; j--)
        {
            rotatedImage[i][rotatedImage.length-1-j] = canvasArray[j][i]; 
        }
    }

    printPicture(rotatedImage);
} 
```

canvasArray 是对 char[][] 类变量不感兴趣的原始图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:35:31.570

这应该适合您的需求：

```
public static char[][] mirror(int width, int height, char[][] in) {
    char[][] out = new char[height][width];
    for (int i = 0; i < height; i++) {
        for (int j = 0; j < width; j++) {
            out[i][width - j - 1] = in[i][j];
        }
    }
    return out;
} 
```

例如：

```
char[][] in = new char[][] {
    new char[] { '#', '#', '#', '~' },
    new char[] { '~', '#', '~', '~' },
    new char[] { '~', '#', '~', '~' },
    new char[] { '~', '~', '~', '~' },
    new char[] { '~', '~', '~', '~' }
};

for (char[] line : mirror(4, 5, in)) {
    for (char row : line) {
        System.out.print(row);
    }
    System.out.println();
} 
```

印刷：

```
~###
~~#~
~~#~
~~~~
~~~~ 
```

# android - 如何更改 DialogFragment 周围的背景颜色？

> ID：15007272
> 
> 赞同：48
> 
> 时间：2013-02-21T16:24:40.960
> 
> 标签：android, background, android-dialogfragment, android-styles

我正在建立一个自定义`DialogFragment`。对话框布局设置为`my_dialog.xml`，但如何修改对话框周围的颜色（透明灰色）？

![在此处输入图像描述](../Images/f9e2a130d288ea05f59efcf48efc881a.png)

**my_dialog.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" >

    <TextView
        android:id="@+id/hello"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:background="@android:color/holo_orange_light"
        android:gravity="center"
        android:text="hello" />

</RelativeLayout> 
```

**MyDialogFragment.java**

```
public class MyDialogFragment extends DialogFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.my_dialog, container);

        getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-22T11:01:36.013

我必须在对话框样式中设置`android:windowIsFloating`为 false 和`android:windowBackground`我的自定义颜色：

**样式.xml**

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="MyDialog" parent="@android:style/Theme.Dialog">
        <item name="android:windowFrame">@null</item>
        <item name="android:windowBackground">@color/orange_transparent</item>
        <item name="android:windowIsFloating">false</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowTitleStyle">@null</item>
        <item name="android:colorBackgroundCacheHint">@null</item>
        <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
        <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
        <item name="android:gravity">center</item>
    </style>

</resources> 
```

**我的对话片段**

```
public class MyDialogFragment extends DialogFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setStyle(DialogFragment.STYLE_NO_TITLE, R.style.MyDialog);
    }
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-11-29T12:39:20.667

我想要一个透明的背景`DialogFragment`，并且在代码中，这很好用：

```
@Override
public void onStart() {
    super.onStart();

    Window window = getDialog().getWindow();
    window.setBackgroundDrawableResource(android.R.color.transparent);
} 
```

当然，您可以指定任何颜色或`Drawable`使用`setBackgroundDrawable()`or `setBackgroundDrawableResource()`。

这至少有效，**`onStart()`**但[似乎](https://stackoverflow.com/questions/15007272/how-to-change-the-background-color-around-a-dialogfragment#comment21084239_15007397)`onCreate()`无效，而且不一定 有效。`onCreateView()`

也就是说，在大多数情况下[，使用样式在 XML](https://stackoverflow.com/a/15022647/56285)中执行此操作可能更简洁，如下所示：

```
<style name="MyDialogStyle" parent="@android:style/Theme.Holo.Light.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
</style> 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-10-17T22:03:29.937

要获得完全透明的对话框，您可以在`onCreateView`以下设置

*   `setBackgroundDrawable`至`Color.TRANSPARENT`
*   `setDimAmount`至`0`

请参阅此处的代码示例：

```
public class TextEditor extends DialogFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_text_editor, container);

        // make dialog itself transparent
        getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));

        // remove background dim 
        getDialog().getWindow().setDimAmount(0);

        //[add more custom code here...]

        return view;
    }
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-09-02T09:03:29.013

我发现我只需要这样做：

```
<style name="MyDialog" parent="@android:style/Theme.Dialog">
    <!--  other attributes  -->
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-16T06:36:14.670

那些在 ' `onCreateDialog`' 而不是 ' `onCreateView`' 中使用 AlertDialog builder 的人可以像下面的代码一样分配主题。完整的主题集可以从[R.style](http://developer.android.com/reference/android/R.style.html)中找到。不要忘记其中一些是最近支持的，并且在旧设备手机上不可用。

```
@Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), android.R.style.Theme_Translucent);
        View view = getActivity().getLayoutInflater().inflate(R.layout.dialog_album, null);
        builder.setView(view);

        return builder.create();
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-12T10:43:24.997

覆盖 onCreate 并在那里设置样式应该可以工作。

```
@Override
public void onCreate(Bundle savedInstance){
    super.onCreate(savedInstance);
    setStyle(DialogFragment.STYLE_NO_FRAME, android.R.style.Theme_Translucent);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-21T16:28:19.450

`Background`在我刚刚编辑的代码上更改您的文本，`XML` 用您的代码替换它

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center" >

<TextView
    android:id="@+id/hello"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:gravity="center"
    android:text="hello" /> 
```

因为你给了`TextView`100dp的高度和宽度。并为其设置一个填充整个对话框的背景。因为您的主要布局是 wrap_content。如果对您有帮助，请务必接受答案。
编辑：要更改`background` 刚刚添加到您的布局或文本视图 `android:background="#232323"`中，您可以将这些数字更改为您喜欢的任何颜色。`drawable`或者您可以设置背景`android:background="@drawable/yourpicturename"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-02T06:05:25.743

Jul 的回答对我来说几乎是好事。但它似乎在使用 AlertDialog.Builder 时不起作用。

我必须在这里设置样式：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    // Use the Builder class for convenient dialog construction
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity(), R.style.MyDialog ); 
```

# wpf - 由 TextBox 样式覆盖的 DatagridCell 样式

> ID：15007273
> 
> 赞同：1
> 
> 时间：2013-02-21T16:24:44.483
> 
> 标签：wpf, xaml, datagrid, textbox, styles

我有一个`Style`for `DataGridCell`（只有触发器很重要。）

```
<Style x:Key="DataGridCellStyle" TargetType="{x:Type DataGridCell}">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderBrush" Value="Transparent" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridCell}">
                <Border Background="Transparent" BorderBrush="{TemplateBinding BorderBrush}"   BorderThickness="0"  SnapsToDevicePixels="True" >
                    <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center" Margin="4, 0, 0, 0"/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Foreground" Value="{StaticResource DarkForegroundBrush}" />
        </Trigger>
        <Trigger Property="IsEnabled" Value="False">
            <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

当我像这样定义列时它起作用：

```
<DataGridTemplateColumn Header="Column1" Width="Auto" IsReadOnly="True">
     <DataGridTemplateColumn.CellTemplate>
         <DataTemplate>
             <TextBlock Text="{Binding Property1, Mode=OneWay}" />
         </DataTemplate>
     </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

但是当我有`TextBox`而不是`TextBlock`这样的时候：

```
<DataGridTemplateColumn Width="Auto" Header="Column1">
     <DataGridTemplateColumn.CellTemplate>
           <DataTemplate>
                 <TextBox Text="{Binding Path=Property1, Mode=OneWay}" IsReadOnly="True" TextWrapping="Wrap" />
           </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

它不起作用，因为`TextBox`它有它自己的`Style`. 我需要使用`TextBox`，因为我想让用户从单元格中选择文本。但我也需要在选择**单元格/行时**`Foreground`更改颜色。

 **> *(Background color is dark and foreground color is light, but when a cell/row is selected then the background color is light and foreground color should be dark)*

**编辑**

我编辑了我的问题以使其更清楚。对之前的误解深表歉意。我的目标是拥有`TextBox`并`DataGridCell`使用`Trigger`s from `DataGridCellStyle`。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:23:14.940

它不是离开/采用文本块/文本框样式。*你把一个文本框放在那里，一个文本框有背景。*

尝试将 TextBox 背景设置为透明。如果您只想从单元格中选择文本，我还建议您删除文本框边框。

您可以设置以下属性以获得所需的外观。

`Background="Transparent" BorderThickness="0" IsReadOnly="True"`

在 TextBox 上设置前景

```
<DataTemplate>
    <TextBox Name="Display" Text=.../>
    <DataTemplate.Triggers>

        <DataTrigger Binding="{Binding
                     RelativeSource={RelativeSource
                     Mode=FindAncestor,AncestorType={x:Type DataGridCell}},Path=IsSelected}" Value="true">
            <Setter TargetName="Display" Property="Foreground">
                <Setter.Value>
                    <SolidColorBrush Color="{StaticResource DarkForegroundBrush}"/>
                </Setter.Value>
            </Setter>
        </DataTrigger>
    </DataTemplate.Triggers/>
</DataTemplate> 
```**

# image - IE10 渲染工件

> ID：15007277
> 
> 赞同：0
> 
> 时间：2013-02-21T16:24:54.313
> 
> 标签：image, windows-8, rendering, internet-explorer-10, artifacts

我正在 Windows 8 上的 IE10 中测试[我的网站](http://www.raditaz.com)，并且不断在某些元素周围或之上获得一堆渲染工件。这是一个屏幕截图（注意黑条）：

![在此处输入图像描述](../Images/c6e687f10d64ffcee1e5843b5c3fdbd3.png)

工件的出现不一致——当我与页面交互时，它们会忽明忽暗——但总是在相同的位置，在刷新时。

我在 Mac 上运行 Parallels 中的 Windows 8，所以我最初的预感是这是一个视频卡驱动程序问题，但 Windows 8 中的其他浏览器没有显示这些工件。驱动程序问题不会以同样的方式影响所有浏览器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:53:52.540

我找不到登录有任何问题，但是我确实注意到在我的桌面上显示 IE10 的工件（无论如何这不是一台功能强大的机器）

具有讽刺意味的是，当平行检查时，同样的工件没有出现。 ![在此处输入图像描述](../Images/d5915b321efc6fd09c8cfa031689f430.png)

如果您可以缩小一致的测试用例的范围，我们可以对其进行检查，但在这种情况下，我的“答案”将是它只是一个虚拟工件。我会测试我展示的另一个，但奇怪的是没有出现在虚拟机上。

我们团队中的两个人一起编写了一些关于在 Mac 上为其他技术（VMware Fusion 和 VirtualBox）设置 VM 的优秀文档，也许也可以尝试一下。

[在 Mac 上设置 Win8/VMware Fusion](http://aka.ms/virtualboxmac)

[在 Mac 上设置 Win8/VMware Fusion](http://aka.ms/fusionmac)

[在 Mac 上设置 Win8/Parallels](http://aka.ms/parallelsmac)

还有这个很棒的网站可以测试你的浏览器的外观——我会在那里运行它并检查所有生成的图像

[http://browsershots.org/](http://browsershots.org/)

# serialization - 使用 JMS 序列化程序包添加额外字段

> ID：15007281
> 
> 赞同：40
> 
> 时间：2013-02-21T16:25:02.157
> 
> 标签：serialization, symfony, jmsserializerbundle

我有一个实体，我通常使用 JMS Serializer 包进行序列化。我必须在序列化中添加一些不存在于实体本身但通过一些数据库查询收集的字段。

我的想法是创建一个自定义对象，用实体字段填充字段并添加自定义对象。但是对于类的每个变体（我使用很多序列化组），这似乎有点棘手和昂贵。

有没有更好/标准的方法来做到这一点？使用工厂？前/后序列化事件？

也许我可以监听序列化并检查实体类型和序列化组添加自定义字段？但是，与其对每个实体进行查询，不如收集相关实体的所有数据，然后将其添加到它们中。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-05-21T17:05:57.997

我自己找到了解决方案，

要在序列化完成后添加自定义字段，我们必须创建一个监听器类，如下所示：

```
<?php

namespace Acme\DemoBundle\Listener;

use JMS\DiExtraBundle\Annotation\Service;
use JMS\DiExtraBundle\Annotation\Tag;
use JMS\DiExtraBundle\Annotation\Inject;
use JMS\DiExtraBundle\Annotation\InjectParams;
use Symfony\Component\HttpKernel\Event\PostResponseEvent;
use Acme\DemoBundle\Entity\Team;
use JMS\Serializer\Handler\SubscribingHandlerInterface;
use JMS\Serializer\EventDispatcher\EventSubscriberInterface;
use JMS\Serializer\EventDispatcher\PreSerializeEvent;
use JMS\Serializer\EventDispatcher\ObjectEvent;
use JMS\Serializer\GraphNavigator;
use JMS\Serializer\JsonSerializationVisitor;

/**
 * Add data after serialization
 *
 * @Service("acme.listener.serializationlistener")
 * @Tag("jms_serializer.event_subscriber")
 */
class SerializationListener implements EventSubscriberInterface
{

    /**
     * @inheritdoc
     */
    static public function getSubscribedEvents()
    {
        return array(
            array('event' => 'serializer.post_serialize', 'class' => 'Acme\DemoBundle\Entity\Team', 'method' => 'onPostSerialize'),
        );
    }

    public function onPostSerialize(ObjectEvent $event)
    {
        $event->getVisitor()->addData('someKey','someValue');
    }
} 
```

这样您就可以将数据添加到序列化元素。

相反，如果要在序列化之前使用 pre_serialize 事件编辑对象，请注意，如果要使用 pre_serialize 添加值，则需要已经有一个变量（和正确的序列化组）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-29T07:07:34.343

我很惊讶为什么没有人提出更简单的方法。你只需要使用@VirtualProperty：

```
<?php

// ...
/**
 * @JMS\VirtualProperty
 * @JMS\SerializedName("someField")
 */
public function getSomeField()
{
    return $this->getTitle() . $this->getPromo();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-08-24T23:04:00.197

进一步回答原来的问题。以下是您如何限制某些序列化组的添加数据（在此示例`some_data`中，仅在我们不使用该`list`组时添加：

```
public function onPostSerializeSomeEntityJson(ObjectEvent $event) {

    $entity = $event->getObject();

    if (!in_array('list', (array)$event->getContext()->attributes->get('groups'))) {

        $event->getVisitor()->addData('user_access', array(
            'some_data' => 'some_value'
        ));
    }
} 
```

`(array)$event->getContext()->attributes->get('groups')`包含使用的序列化组的数组。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-14T08:44:02.857

接受的答案仅在访问者来自 时才有效`\JMS\Serializer\GenericSerializationVisitor`。这意味着它适用于 JSON，但不适用于 XML。

这是一个处理 XML 的示例方法。它查看访问者对象支持的接口并采取适当的行动。它展示了如何将链接元素添加到 JSON 和 XML 序列化对象......

```
public function onPostSerialize(ObjectEvent $event)
{
    //obtain some data we want to add
    $link=array(
        'rel'=>'self',
        'href'=>'http://example.org/thing/1',
        'type'=>'application/thing+xml'
    );

    //see what our visitor supports...
    $visitor= $event->getVisitor();
    if ($visitor instanceof \JMS\Serializer\XmlSerializationVisitor)
    {
        //do XML things
        $doc=$visitor->getDocument();

        $element = $doc->createElement('link');
        foreach($link as $name => $value) {
            $element->setAttribute($name, $value);
        }
        $doc->documentElement->appendChild($element);
    } elseif ($visitor instanceof \JMS\Serializer\GenericSerializationVisitor)
    {
        $visitor->addData('link', $link);
    }

} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-13T12:15:42.923

这个怎么样：http: [//jmsyst.com/libs/serializer/master/handlers](http://jmsyst.com/libs/serializer/master/handlers)

总之，您定义了一个接收对象并返回文本或数组（将转换为 json）的类。

您的“IndexedStuff”类包含一个奇怪的计算字段，由于某种原因应该在序列化时计算。

```
<?php

namespace Project/Model;

class IndexedStuff
{
   public $name;
   public $value;
   public $rawData;
} 
```

现在创建处理程序

```
<?php

namespace Project/Serializer;

use JMS\Serializer\Handler\SubscribingHandlerInterface;
use JMS\Serializer\GraphNavigator;
use JMS\Serializer\JsonSerializationVisitor;
use JMS\Serializer\Context;

class MyHandler implements SubscribingHandlerInterface
{
    public function setEntityManager(Registry $registry) {
         // Inject registry instead of entity manager to avoid circular dependency
         $this->em = $registry->getEntityManager();
    }
    public static function getSubscribingMethods()
    {
        return array(
            array(
                'direction' => GraphNavigator::DIRECTION_SERIALIZATION,
                'format' => 'json',
                'type' => 'Project/Model/IndexedStuff',
                'method' => 'serializeIndexedStuffToJson',
            ),
        );
    }

    public function serializeIndexedStuffToJson(JsonSerializationVisitor $visitor, Project/Model/IndexedStuff $stuff, array $type, Context $context)
    {
        // Build your object here and return it
        $score = $this->em->find("ProjectBundle:Calculator", $stuff->value)
        return array("score" => $score->getIndexScore(), "name"=> $score->name
    }
} 
```

最后注册服务

```
services:
  project.serializer.stuff:
      class: Project\Serializer\MyHandler
      calls:
        - [setEntityManager, ["@doctrine"]] 
```

现在，无论你想序列化“IndexedStuff”类型的对象，你都会得到一个像这样的 json

`{"name": "myName", "score" => 0.3432}`

通过这种方式，您可以完全自定义实体的序列化方式

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-03T04:50:42.490

addData 自 2.0.0 以来已被弃用，因此我们需要这样做：

```
use JMS\Serializer\EventDispatcher\ObjectEvent;

class MySerializerHandler {

    public function onPostSerialize(ObjectEvent $event)
    {
        /** @var MySpecialObjectType $object */
        $myObject = $event->getObject();

        $key = 'customDataKey';
        $value = 'myvalue';

        $event->getVisitor()->visitProperty(
            new StaticPropertyMetadata('', $key, $value),
            $value
        );
    }
} 
```

服务.yaml

```
services:
    MySerializerHandler:
        tags:
          - { name: jms_serializer.event_listener, class: 'MySpecialObjectType', event: serializer.post_serialize, method: 'onPostSerialize' } 
```

[https://github.com/schmittjoh/serializer/blob/c9c82c841b8ebe682ca44972d64fded215f72974/UPGRADING.md#from-1130-to-200](https://github.com/schmittjoh/serializer/blob/c9c82c841b8ebe682ca44972d64fded215f72974/UPGRADING.md#from-1130-to-200)

# sql - 如果指定了 SELECT DISTINCT，则 ORDER BY 项目必须出现在选择列表中.....我花了几个小时但没有找到

> ID：15007282
> 
> 赞同：3
> 
> 时间：2013-02-21T16:25:06.473
> 
> 标签：sql, sql-server, distinct, case

以下是我的大型 sql 查询的一部分，在花费数小时后我找不到解决问题的方法。我的要求只是对 RaceNumber 上的记录进行升序排序并将空记录放在底部

```
SELECT DISTINCT TP.racenumber, 
                TP.teamid, 
                TP.teamname 
FROM   tblteamprofile TP 
ORDER  BY CASE 
            WHEN TP.racenumber IS NULL THEN 1 
            ELSE 0 
          end, 
          TP.teamid, 
          TP.teamname 
```

任何人都可以帮助我这只是我的卑微请求......！请

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T16:27:20.223

将缺少的 ORDER BY 项添加到 SELECT 列表中：

```
SELECT DISTINCT   
  TP.RaceNumber, 
  CASE WHEN TP.RaceNumber is null THEN 1 ELSE 0 END, 
  TP.TeamID,     
  TP.TeamName     
FROM 
  tblTeamProfile TP 
ORDER BY 
  CASE WHEN TP.RaceNumber is null THEN 1 ELSE 0 END,
  TP.TeamID,
  TP.TeamName 
```

* * *

正如 Factor Mystic 在评论中敏锐地指出的那样，如果您的 RDBMS 允许在 ORDER BY 子句中重新使用别名，您可以简化查询：

```
SELECT DISTINCT   
  TP.RaceNumber, 
  CASE WHEN TP.RaceNumber is null THEN 1 ELSE 0 END AS RaceNumberFlag, 
  TP.TeamID,     
  TP.TeamName     
FROM 
  tblTeamProfile TP 
ORDER BY 
  RaceNumberFlag,
  TP.TeamID,
  TP.TeamName 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T16:30:10.543

`SELECT`问题是如果它不是查询列表的一部分，数据库引擎不知道如何选择该特定值`SELECT DISTINCT`。

如果您不想选择该列，则应该可以使用 a`GROUP BY`而不是：`DISTINCT`

```
SELECT TP.racenumber, TP.teamid, TP.teamname 
FROM tblteamprofile TP 
GROUP BY TP.racenumber, TP.teamid, TP.teamname, 
    CASE WHEN TP.racenumber IS NULL THEN 1 ELSE 0 END
ORDER BY CASE WHEN TP.racenumber IS NULL THEN 1 ELSE 0 END, 
    TP.teamid, TP.teamname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:27:51.793

也许顺序应该是这样的：

```
order by (case when tp.RaceNumber is NULL then 1 else 0 end),
         tp.RaceNumber 
```

如果要按 RaceNumber 排序，为什么查询中有 TeamId 和 TeamName？

# arrays - 使用数组比较两张纸

> ID：15007293
> 
> 赞同：6
> 
> 时间：2013-02-21T16:25:40.607
> 
> 标签：arrays, excel, compare, excel-2010, vba

由于我拥有的数据量，我的代码非常慢（每张纸 10 分钟以上）。我相信可能有一种方法可以使用数组来加速它，但我不确定如何去做。我将尝试详细解释情况。

我有两张包含发票#s、零件#s 和销售价格（以及其他信息）的工作表，我试图比较它们以找出差异。我使用发票# 和两张表上的零件# 的串联为每行数据创建了一个唯一编号。我还按该数字手动对两张纸进行了排序。我想找出哪些独特的#s 在 sheet1 上而不是在 sheet2 上，反之亦然。（另一部分是检查那些匹配的，看看销售价格是否不同，但我想我可以很容易地弄清楚这一点。）目标是查看供应商部分或全部遗漏了哪些发票和我的公司。

我在一张纸上有大约 10k 行数据，在另一张纸上有 11k 行。下面是我现在使用的代码，修改自我在 www.vb-helper.com/howto_excel_compare_lists.html 找到的代码，以及查看本网站上类似问题的答案。有一个几乎相同的第二个潜艇，床单颠倒了。我不知道是否有可能只写一个双向的。

```
Private Sub cmdCompare2to1_Click()
Dim first_index As Integer
Dim last_index As Integer
Dim sheet1 As Worksheet
Dim sheet2 As Worksheet
Dim r1 As Integer
Dim r2 As Integer
Dim found As Boolean

Set sheet1 = Worksheets(1)
Set sheet2 = Worksheets(2)

Application.ScreenUpdating = False

first_index = 1
last_index = sheet1.Range("a" & Rows.Count).End(xlUp).Row

' For each entry in the second worksheet, see if it's
' in the first.
For r2 = first_index To last_index
    found = False
    ' See if the r1-th entry on sheet 2 is in the sheet
    ' 1 list.
    For r1 = first_index To last_index
        If sheet1.Cells(r1, 16) = sheet2.Cells(r2, 9) Then
        ' We found a match.
            found = True
            Exit For
        End If
    Next r1

    ' See if we found it.
    If Not found Then
        ' Flag this cell.
        sheet2.Cells(r2, 9).Interior.ColorIndex = 35
        End If
Next r2

Application.ScreenUpdating = True

End Sub 
```

它适用于小型数据集，但由于我正在处理大量行，它只需要很长时间，而且没有一个会计师想要使用它。理想情况下，它不仅仅是将差异变为绿色，而是将它们复制到单独的工作表中，即：工作表 3 的所有内容都在工作表 2 上而不是工作表 1 上，但我会采取我现在能得到的。

在四处寻找解决方案后，似乎互联网上的每个人都同意需要使用数组来加快速度。但是，我不知道如何将这些可爱的建议应用到我当前的代码中。我意识到很有可能必须废弃此代码并重新开始，但我再次问如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T17:01:42.677

欢迎来到 SO。好问题。试一试这个过程。您可能可以稍微整理一下，但它应该可以工作并且速度要快得多。

如需参考，请参阅[此链接](http://fastexcel.wordpress.com/2011/10/26/match-vs-find-vs-variant-array-vba-performance-shootout/)。

**更新：**我在两个随机生成的 10K 和 11K 行数据集上对此进行了测试。只用了不到一眨眼的时间。我什至没有时间看我开始的时间。

```
Option Explicit

Private Sub cmdCompare2to1_Click()

Dim sheet1 As Worksheet, sheet2 As Worksheet, sheet3 As Worksheet
Dim lngLastR As Long, lngCnt As Long
Dim var1 As Variant, var2 As Variant, x
Dim rng1 As Range, rng2 As Range

Set sheet1 = Worksheets(1)
Set sheet2 = Worksheets(2)
Set sheet3 = Worksheets(3) ' assumes sheet3 is a blank sheet in your workbook

Application.ScreenUpdating = False

'let's get everything all set up
'sheet3 column headers
sheet3.Range("A1:B1").Value = Array("in1Not2", "in2Not1")

'sheet1 range and fill array
With sheet1

    lngLastR = .Range("A" & .Rows.Count).End(xlUp).Row

    Set rng1 = .Range("A1:A" & lngLastR)
    var1 = rng1

End With

'sheet2 range and fill array
With sheet2

    lngLastR = .Range("A" & .Rows.Count).End(xlUp).Row

    Set rng2 = .Range("A1:A" & lngLastR)
    var2 = rng2

End With

'first check sheet1 against sheet2
On Error GoTo NoMatch1
For lngCnt = 1 To UBound(var1)

    x = Application.WorksheetFunction.Match(var1(lngCnt, 1), rng2, False)

Next

'now check sheet2 against sheet1
On Error GoTo NoMatch2
For lngCnt = 1 To UBound(var2)

    x = Application.WorksheetFunction.Match(var2(lngCnt, 1), rng1, False)

Next

On Error GoTo 0
Application.ScreenUpdating = True
Exit Sub

NoMatch1:
    sheet3.Range("A" & sheet3.Rows.Count).End(xlUp).Offset(1) = var1(lngCnt, 1)
    Resume Next

NoMatch2:
    sheet3.Range("B" & sheet3.Rows.Count).End(xlUp).Offset(1) = var2(lngCnt, 1)
    Resume Next

End Sub 
```

# codeigniter - Codeigniter 获取行对象的键

> ID：15007295
> 
> 赞同：0
> 
> 时间：2013-02-21T16:25:45.170
> 
> 标签：codeigniter

我正在使用代码点火器。我对返回对象 $a 的数据库进行了查询。

要访问 $ai 属性的值，必须执行类似的操作

```
$a->property 
```

有什么方法我也可以找到该物业的名称吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:37:48.447

希望对你有帮助

```
$query = $this->db->query('SELECT * FROM some_table');

foreach ($query->list_fields() as $field)
{
   echo $field;
} 
```

或者

```
$fields = $this->db->field_data('table_name');

foreach ($fields as $field)
{
   echo $field->name;
   echo $field->type;
   echo $field->max_length;
   echo $field->primary_key;
} 
```

# c++ - 直方图均衡不适用于彩色图像 - OpenCV

> ID：15007304
> 
> 赞同：29
> 
> 时间：2013-02-21T16:26:11.183
> 
> 标签：c++, opencv, image-processing, histogram, histogram-equalization

我正在尝试使用以下函数使用 OpenCV 执行直方图均衡

```
Mat Histogram::Equalization(const Mat& inputImage)
{
    if(inputImage.channels() >= 3)
    {
        vector<Mat> channels;
        split(inputImage,channels);
        Mat B,G,R;

        equalizeHist( channels[0], B );
        equalizeHist( channels[1], G );
        equalizeHist( channels[2], R );
        vector<Mat> combined;
        combined.push_back(B);
        combined.push_back(G);
        combined.push_back(R);
        Mat result;
        merge(combined,result);
        return result;
    }
    return Mat();
} 
```

但是当我得到结果时，输入和输出图像似乎没有区别，我做错了什么？

抱歉图像质量不好，“预处理”（左）是直方图均衡，你可以看到它与输入（右）相同。

![在此处输入图像描述](../Images/e3b16606f4189987e0bfc3d44db729fa.png)

错过了什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-02-21T18:36:52.510

直方图均衡是一个非线性过程。通道分割和单独均衡每个通道不是对比度均衡的正确方法。均衡涉及图像的**强度**值而不是颜色分量。因此对于简单的 RGB 彩色图像，不应在每个通道上单独应用 HE。相反，它应该被应用，以便在不干扰图像色彩平衡的情况下均衡强度值。因此，第一步是将图像的颜色空间从 RGB 转换为将强度值与颜色分量分开的颜色空间之一。其中一些是：

*   [HSV/HLS](http://en.wikipedia.org/wiki/HSL_and_HSV)
*   [YUV](http://en.wikipedia.org/wiki/YUV)
*   [YCbCr](http://en.wikipedia.org/wiki/YCbCr)

将图像从 RGB 转换为上述颜色空间之一。**YCbCr**是首选，因为它是为**数字**图像设计的。执行强度平面 Y 的 HE。将图像转换回 RGB。

在您目前的情况下，您没有观察到任何显着变化，因为图像中只有 2 种突出的颜色。当图像中有很多颜色时，分割方法会导致颜色不平衡。

例如，考虑以下图像：

## 输入图像

[![输入图像](../Images/88cde8bb09515c074238445988edf5fb.png)](https://i.stack.imgur.com/elrNE.jpg)

## 强度图像均衡

[![强度均衡](../Images/b1959d24f51e6ad10e11b258792136a2.png)](https://i.stack.imgur.com/py1g6.jpg)

## 独立通道均衡

（注意假颜色）

[![分裂均衡](../Images/4cf835c38eb00a81b56f3ee97632c5fc.png)](https://i.stack.imgur.com/XBhXW.jpg)

**这是使用YCbCr**颜色空间对彩色图像进行直方图均衡的 OpenCV 代码。

```
Mat equalizeIntensity(const Mat& inputImage)
{
    if(inputImage.channels() >= 3)
    {
        Mat ycrcb;

        cvtColor(inputImage,ycrcb,CV_BGR2YCrCb);

        vector<Mat> channels;
        split(ycrcb,channels);

        equalizeHist(channels[0], channels[0]);

        Mat result;
        merge(channels,ycrcb);

        cvtColor(ycrcb,result,CV_YCrCb2BGR);

        return result;
    }
    return Mat();
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-12-27T10:04:45.697

还有 python 版本，@sga：

```
import cv2
import os

def hisEqulColor(img):
    ycrcb=cv2.cvtColor(img,cv2.COLOR_BGR2YCR_CB)
    channels=cv2.split(ycrcb)
    print len(channels)
    cv2.equalizeHist(channels[0],channels[0])
    cv2.merge(channels,ycrcb)
    cv2.cvtColor(ycrcb,cv2.COLOR_YCR_CB2BGR,img)
    return img

fname='./your.jpg'
img=cv2.imread(fname)

cv2.imshow('img', img)
img2=hisEqulColor(img)
cv2.imshow('img2',img2) 
```

# 然而这会在图像中产生噪声（例如，下面的左图）[![在此处输入图像描述](../Images/64d23679c7051e00cd8b9bdaac796a8a.png)](https://i.stack.imgur.com/M2FKS.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-26T09:17:01.047

我为 BGRA 图像实现了直方图均衡。我认为此功能对您的目标很有用（但您应该忽略 alpha 通道）。

```
Mat equalizeBGRA(const Mat& img)
{
Mat res(img.size(), img.type());
Mat imgB(img.size(), CV_8UC1);
Mat imgG(img.size(), CV_8UC1);
Mat imgR(img.size(), CV_8UC1);
Vec4b pixel;

if (img.channels() != 4)
{
    cout << "ERROR: image input is not a BGRA image!" << endl;
    return Mat();
}

for (int r = 0; r < img.rows; r++)
{
    for (int c = 0; c < img.cols; c++)
    {
        pixel = img.at<Vec4b>(r, c);
        imgB.at<uchar>(r, c) = pixel[0];
        imgG.at<uchar>(r, c) = pixel[1];
        imgR.at<uchar>(r, c) = pixel[2];
    }
}

equalizeHist(imgB, imgB);
equalizeHist(imgG, imgG);
equalizeHist(imgR, imgR);

for (int r = 0; r < img.rows; r++)
{
    for (int c = 0; c < img.cols; c++)
    {
        pixel = Vec4b(imgB.at<uchar>(r, c), imgG.at<uchar>(r, c), imgR.at<uchar>(r, c), img.at<Vec4b>(r, c)[3]);
        res.at<Vec4b>(r, c) = pixel;
    }
}

return res;
} 
```

# awesomium - Awesomium 1.7\. How change awesomium browser version?

> ID：15007306
> 
> 赞同：7
> 
> 时间：2013-02-21T16:26:16.240
> 
> 标签：awesomium

Javascript detect awesomium browser like Chrome browser Version 18.0.1003.1 Can I configure awesomium browser version like on my machine or Chrome 22 or later? I need this for supporting touch events on javascript.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-23T08:20:06.937

您无法更改 Awesomium 使用的 Chrome 版本。您所能做的就是确保您使用的是最新版本的 Awesomium。

当前版本的 Awesomium (1.7) 使用 Chrome 18。

# c# - 与 int 变量结合的多种变量类型

> ID：15007307
> 
> 赞同：0
> 
> 时间：2013-02-21T16:26:17.300
> 
> 标签：c#

我有以下 C# 中简单控制台应用程序的代码。每当我输入第二个输入的 AIR 速率时，我都会得到“输入字符串格式不正确”作为错误。正确的格式是什么？如何将其合并到我制作的当前代码中？我不熟悉不同的变量类型。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            int AIR, MIR, PMT, IP, PP, ABorrowed, Term;

            Console.WriteLine("Please enter the amount borrowed on your loan ");
            ABorrowed = int.Parse(Console.ReadLine());
            Console.WriteLine("Please enter the interest rate for your loan ");
            AIR = int.Parse(Console.ReadLine());
            Console.WriteLine("Please enter term of your loan in months ");
            Term = int.Parse(Console.ReadLine());

            MIR = AIR / 1200;

            PMT = ABorrowed * (MIR/1-(1/(1+MIR)^Term));

            IP = ABorrowed * MIR;

            PP = PMT - IP;

            Console.WriteLine("Your total payment for this month is "+PMT);
            Console.WriteLine("Of that payment " + IP + " is interest rate");
            Console.WriteLine("and the Payment Portion is " + PP);
            Console.ReadLine();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:29:09.090

> 正确的格式是什么？如何将其合并到我制作的当前代码中？

问题是您没有在命令行上输入整数。

我们真的不能说更多，因为你没有指定你*在*写什么......但是如果你只是写一些像“100”这样简单的东西应该没问题（就那个错误而言）。

我*强烈*建议你使用`camelCase`你的局部变量，在第一次使用时声明它们（而不是在方法的顶部），并给它们更有意义的名称 - 例如`monthlyPayment`代替`PMT`. 正如 IronMan84 所说，您可能还想使用`decimal`任何货币价值，尽管我猜在抵押贷款的水平上，美分不太可能有太大的不同。不过，使用`decimal`利率会很有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:28:59.363

利率通常以`decimal`或`double`变量类型完成。试图在`int`变量中这样做会导致这些问题。

`int`类型根本不是为了处理十进制值而构建的。它们用于存储整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:49:13.990

如果 AIR var 的值为 ie xx.xx，您应该使用十进制或双精度类型的 var。此外，您的应用程序（金融）中的所有变量都应该是十进制/双精度。

# java - Puppet: Could not reserve enough space for object heap. Could not create the Java virtual machine

> ID：15007308
> 
> 赞同：1
> 
> 时间：2013-02-21T16:26:23.247
> 
> 标签：java, puppet

I've the following two errors on my puppetmaster when i try to run the manifests on the masternode:

```
change from absent to latest failed: Execution of '/usr/bin/keytool -importcert 
-noprompt -alias puppetca -file /etc/puppetlabs/puppet/ssl/certs/ca.pem 
-keystore /etc/puppetlabs/activemq/broker.ts -trustcacerts' returned 1: 
Error occurred during initialization of VM Could not reserve enough space for 
object heap Could not create the Java virtual machine. 
```

and...

```
change from absent to latest failed: Execution of '/usr/bin/keytool 
-importkeystore -srcstoretype PKCS12 -destkeystore 
 /etc/puppetlabs/activemq/broker.ks -srckeystore 
 /tmp/domain.com.20130221-957-17scina-0 -alias domain.com' returned 1: 
 Error occurred during initialization of VM Could not reserve enough space 
 for object heap Could not create the Java virtual machine. 
```

(i've changed my domain to domain.com)

I tried to set the activemq_heap_mb parameter, but it doesn't help.

I appreciate any suggestions :)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:12:22.500

您可以尝试将 -Xmx128m 添加到您的 keytool 命令中。

如果您仍然收到错误，请尝试 -Xmx256m 或 -Xmx512m

# python - Embedding Python 3.3

> ID：15007309
> 
> 赞同：0
> 
> 时间：2013-02-21T16:26:25.257
> 
> 标签：python, c, python-3.x, linker, embedding

I try to embed Python 3.3, as described [here](http://docs.python.org/3.3/extending/embedding.html).

I'm on MacOS 10.8 which has Python 2.7 so I downloaded binary distribution of version 3.3 from python.org. From it I got all the headers and "Python" which I renamed to "python33" so it wont collide with installed "Python" lib. I put everything into a folder:

embed.c /include python33

"file python33" says:

```
python33 (for architecture i386):   Mach-O dynamically linked shared library i386
python33 (for architecture x86_64): Mach-O 64-bit dynamically linked shared library x86_64 
```

and embed.c is:

```
#include <Python.h>

int
main(int argc, char *argv[])
{
  Py_Initialize();
  PyRun_SimpleString("print 'test'\n");
  Py_Finalize();
  return 0;
} 
```

But when I do "gcc embed.c -I./include -L. -lpython33" it breaks with:

```
ld: library not found for -lpython33 
```

Please, does anyone know how to make it compile?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:34:01.107

首先，该库必须以“libxxx.so”的形式命名，然后链接器将使用“-L”找到它。-lxxx'。

即使那样，生成的可执行文件也无法工作，因为人们不仅要复制/创建库，还要复制/创建整个框架。

更多信息：http: [//lists.apple.com/archives/cocoa-dev/2013/Feb/msg00522.html](http://lists.apple.com/archives/cocoa-dev/2013/Feb/msg00522.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:31:32.083

运行`python3.3-config --cflags`，您将获得系统所需的 cflags。对于 ldflags，命令是`python3.3-config --ldflags`

# javascript - TinyMCE with contenteditable

> ID：15007311
> 
> 赞同：8
> 
> 时间：2013-02-21T16:26:29.707
> 
> 标签：javascript, tinymce, wysiwyg, contenteditable

我读过 TinyMCE 支持 contenteditable 而不是 textarea / iframe 版本

**来源：**

[http://www.tinymce.com/forum/viewtopic.php?id=22164](http://www.tinymce.com/forum/viewtopic.php?id=22164)

*它说：*

> 我在 TinyMCE v3.5.2 的源代码中发现了一个名为“content_editable”的配置属性。此标志可防止 iframe 被渲染。

**Javascript**

```
tinyMCE.init({
    // General options
    mode : "exact",
    element : "my_id",
    theme : "advanced",
    plugins : "table,inlinepopups",
editor_selector : "tinymce",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,formatselect,code",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    theme_advanced_toolbar_location : "external",
    theme_advanced_toolbar_align : "left",
    theme_advanced_resizing : true,
    content_editable: true,

    // Example content CSS (should be your site CSS)
    content_css : "/js/tinymce/examples/css/content.css",

    // Style formats
    style_formats : [
            {title : 'Bold text', inline : 'b'},
            {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
            {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
            {title : 'Example 1', inline : 'span', classes : 'example1'},
            {title : 'Example 2', inline : 'span', classes : 'example2'},
            {title : 'Table styles'},
            {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
    ],

    formats : {
            alignleft : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'left'},
            aligncenter : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'center'},
            alignright : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'right'},
            alignfull : {selector : 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', classes : 'full'},
            bold : {inline : 'span', 'classes' : 'bold'},
            italic : {inline : 'span', 'classes' : 'italic'},
            underline : {inline : 'span', 'classes' : 'underline', exact : true},
            strikethrough : {inline : 'del'},
            customformat : {inline : 'span', styles : {color : '#00ff00', fontSize : '20px'}, attributes : {title : 'My custom format'}}
    },
}); 
```

**HTML**

```
<div class="tinymce" id="my_id" contenteditable="true">test</div> 
```

**我改变了什么**

*   我使用“精确”模式让 tinyMCE 接受 div。 [http://www.tinymce.com/wiki.php/Configuration:elements](http://www.tinymce.com/wiki.php/Configuration:elements)
*   我将 ID 添加为 JS 中的元素。
*   我有一个与班级匹配的 editor_selector。
*   我在 JS 中添加 content_editable 并将其设置为 true。

**这发生了**

没有。脚本运行并没有给我任何错误。有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-02T05:16:17.610

TinyMCE 4 正式支持此功能 - 请参阅“内联”示例：[http ://www.tinymce.com/tryit/inline.php](http://www.tinymce.com/tryit/inline.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:22:38.117

没有名为“content_editable”的官方[配置参数](http://www.tinymce.com/wiki.php/Configuration)，但我在源代码中找到了它。

确实，tinymce 使用 contenteditable iframe 来编辑其内容。我关注了讨论，但正如 Spoke 所说，会有很多权衡，而且对于新的浏览器，你永远无法确定这样的编辑器会如何反应。我建议不要使用这样的编辑器。

# git - 在 Windows 和 Mac 之间共享文件的 git 错误

> ID：15007315
> 
> 赞同：1
> 
> 时间：2013-02-21T16:26:39.610
> 
> 标签：git, netbeans, merge, git-bash, git-gui

我最近遇到了一个问题，因为 HEAD 和这些文件，git 无法合并。（网豆说）

所以我尝试用 Git Bash 来做，它给了我一些关于 .DS_Store 的错误。所以我删除了这些文件，现在当我尝试合并时，几乎所有文件都有“都已修改”的文本，即使它们看起来完全相同。

```
@@@ -1,10 -1,10 +1,22 @@@
 -<html>

 -<head>

 -  <title>403 Forbidden</title>

 -</head>

 -<body>

 -

 -<p>Directory access is forbidden.</p>

 -

 -</body>

  <<<<<<< HEAD
 +<html>
 +<head>
 +  <title>403 Forbidden</title>
 +</head>
 +<body>
 +
 +<p>Directory access is forbidden.</p>
 +
 +</body>
  =======
++<html>
++<head>
++  <title>403 Forbidden</title>
++</head>
++<body>
++
++<p>Directory access is forbidden.</p>
++
++</body>
  >>>>>>> 4dd01fd4
  </html> 
```

但它似乎增加了一个额外的意图？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:32:40.153

我认为这是因为文件中有不同的行尾（回车符（\r）/换行符（\n））。检查它们是否一致。

我认为旧文件已保存在 Windows(\r\n) 下。

# c++ - Compiling quantum gis dtclassifier c++ plugin

> ID：15007317
> 
> 赞同：1
> 
> 时间：2013-02-21T16:26:42.950
> 
> 标签：c++, plugins, gis, qgis

Quantum GIS (qgis) is an open source GIS software. The functionality of qgis can be extended by plugins written in python or c++. This question is related to the [DTClassifier](http://gis-lab.info/qa/dtclassifier-eng.html) which is c++ based. DTClassifier make it possible to automate the classification of raster maps, such as automate the classification of forests on remote sensed data.

I want to install the plugin on qgis 1.8.0 (Ubuntu 12.04 64-bit), that is done by placing the compiled linux [DTClassifier plugin file](http://svn.gis-lab.info/dtclassifier/trunk/bin/dtclassifier-linux.tar.bz2) into

```
/usr/lib/qgis/plugins 
```

However, that is a 32-bit binary сompiled under 32-bit Slackware 13.1 using OpenCV 2.3.1 while my os is Ubuntu 12.04 64 bit. Puting the file into

```
/usr/lib/qgis/plugins 
```

is not recognized by qgis. Maybe because I have 64-bit os and OpenCV 2.4.1\. So I tried to compile the provided source code but failed to do so. **Anybody who could provide me with help how to compile the plugin or provide a already compiled file?**

This is what I have accomplished so far:

I installed OpenCV 2.4.1, and Qt4, and downloaded the source for DTClassifier

```
svn co http://svn.gis-lab.info/dtclassifier/trunk dtclassifier 
```

This source was put into the qgis-1.8.0 source. Then cmake was run with the CMakeLists.txt:

I found this [(forum message)](http://lists.osgeo.org/pipermail/qgis-developer/2011-September/015882.html) which is points to a 64-bit version for Ubuntu 11.04, but I could not make it work.

The details of what I have tried so far can be found below:

```
~/qgis-1.8.0/src/plugins/dtclassifier cmake . 
```

The CMakeLists.txt

```
# set path to additional CMake modules
cmake_minimum_required (VERSION 2.6)
SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/CMakeModules ${CMAKE_MODULE_PATH})

FIND_PACKAGE(OpenCV REQUIRED)
FIND_PACKAGE(Qt4)
INCLUDE(${QT_USE_FILE})

########################################################
# Files

SET (CLASSIFIER_SRCS
 classifier.cpp
 classifierdialog.cpp
 classifierutils.cpp
 rasterfileinfo.cpp
 layerselectordialog.cpp
)

SET (CLASSIFIER_UIS
 classifierdialogbase.ui
 layerselectordialogbase.ui
)

SET (CLASSIFIER_MOC_HDRS
 classifier.h
 classifierdialog.h
 layerselectordialog.h
)

SET (CLASSIFIER_RCCS  classifier.qrc)

########################################################
# Build

QT4_WRAP_UI (CLASSIFIER_UIS_H  ${CLASSIFIER_UIS})
QT4_WRAP_CPP (CLASSIFIER_MOC_SRCS  ${CLASSIFIER_MOC_HDRS})
QT4_ADD_RESOURCES(CLASSIFIER_RCC_SRCS ${CLASSIFIER_RCCS})

ADD_LIBRARY (classifierplugin MODULE
${CLASSIFIER_SRCS}
${CLASSIFIER_MOC_SRCS}
${CLASSIFIER_RCC_SRCS}
${CLASSIFIER_UIS_H}
)

INCLUDE_DIRECTORIES(
 ${CMAKE_CURRENT_BINARY_DIR}
 ${GDAL_INCLUDE_DIR}
 ${OpenCV_INCLUDE_DIR}
 ../../core/raster
 ../../core/renderer
 ../../core/symbology
 ../../core
 ../../gui
 ..
 .
 #/usr/include/opencv2
 )

TARGET_LINK_LIBRARIES(classifierplugin
 qgis_core
 qgis_gui
 ${OpenCV_LIBS}
 #/usr/lib/libopencv_core.so
 #/usr/lib/libopencv_ml.so
 #/usr/lib/libopencv_highgui.so
 #/usr/lib/libopencv_imgproc.so
)

########################################################
# Install

INSTALL(TARGETS classifierplugin
RUNTIME DESTINATION /usr/lib/qgis/plugins
LIBRARY DESTINATION /usr/lib/qgis/plugins
) 
```

It did not give any error

```
-- Configuring done
-- Generating done
-- Build files have been written to: qgis-1.8.0/src/plugins/dtclassifier 
```

. But then make fails complaining a lot:

```
make
[  6%] Building CXX object CMakeFiles/classifierplugin.dir/classifier.cpp.o
In file included from /qgis-1.8.0/src/plugins/dtclassifier/../../gui/qgisinterface.h:40:0,
from /qgis-1.8.0/src/plugins/dtclassifier/classifier.cpp:23:
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:30:19: error: variable ‘CORE_EXPORT QGis’ has initializer but incomplete type
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:30:19: warning: extended initializer lists only available with -std=c++0x or -std=gnu++0x [enabled by default]
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:32:3: error: expected primary-expression before ‘public’
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:32:3: error: expected ‘}’ before ‘public’
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:32:3: error: expected ‘,’ or ‘;’ before ‘public’
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:38:22: error: uninitialized const ‘QGIS_VERSION_INT’ [-fpermissive]
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:77:47: error: storage size of ‘qgisVectorGeometryType’ isn’t known
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:80:41: error: storage size of ‘qgisFeatureTypes’ isn’t known
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:108:25: error: uninitialized const ‘DEFAULT_IDENTIFY_RADIUS’ [-fpermissive]
/qgis-1.8.0/src/plugins/dtclassifier/../../core/qgis.h:109:1: error: expected declaration before ‘}’ token
make[2]: *** [CMakeFiles/classifierplugin.dir/classifier.cpp.o] Error 1
make[1]: *** [CMakeFiles/classifierplugin.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:14:08.940

**在 Quantum GIS (qgis) 版本 1.8.0 Ubuntu 64 位上编译 DTClassifier c++ 插件。**

这是我如何在 Ubuntu 12.04 64 位上编译 DTClassifier 插件的简短说明。这可能不是最佳实践，但确实有效！

**获取源代码**

找出哪个版本的 qgis 与插件兼容。在 DTClassifier 的文档中，它已使用 OpenCV 2.3.1 在 32 位 Slackware 13.1 上的 qgis 1.8 上编译和测试。我的出发点是首先在我的系统上编译 qgis。所以我发现这个关于编译 qgis 的[优秀指南](http://www.qgis.org/api/INSTALL.html#toc3)我按照指南中的步骤 1 - 3.7 进行操作，除了我没有使用步骤 3.6 中建议的源

```
git://github.com/qgis/Quantum-GIS.git 
```

这是 qgis 1.9 但这里我们需要**qgis 1.8**。[因此，请下载我从“7 Sources and Sample Datase”](http://hub.qgis.org/projects/quantum-gis/wiki/Download#71-Source-Code) 1.8 Final Release下载的 qgis 版本 1.8的源代码。（如何编译的说明也在源代码存档中作为文件“INSTALL”提供。）

**关于我编译 qgis 的经验的注释。**

我在使用 proj 和/或 gdal 库时遇到了一些麻烦。起初我有一个更高版本的 gdal 库，但使用 gdal 1.7.3 和 proj 4.8（由 synaptic 报告但 proj 命令报告版本 4.7）在整理 proj/gdal 故障后，编译成功，可以尝试 qgis。

如果您在尝试执行已编译的 qgis 文件时遇到错误，这可能会对您有所帮助：加载共享库时出错：[libqgis_core.so.1.8.0: 无法打开共享对象文件：没有这样的文件或目录](http://hub.qgis.org/wiki/quantum-gis/Building_QGIS_from_Source)

**继续编译 DTClassifier**

DTClassifier 依赖于 OpenCV 库。我按照这个优秀的指南安装和测试 OpenCv 2.4.1 安装-opencv [-2-4-1-ubuntu-12-04-lts](http://www.samontab.com/web/2012/06/installing-opencv-2-4-1-ubuntu-12-04-lts/)。

DTClassifier 的源码放在

```
qgis-1.8.0/src/plugins/dtclassifier 
```

然后到 plugins 目录中的 cmakelist 文件需要还应该构建 DTClassifier 的信息：

```
qgis-1.8.0/src/plugins/CMakeLists.txt 
```

此行已添加

```
ADD_SUBDIRECTORY(dtclassifier) 
```

然后重复qgis的编译过程。请记住从安装指南中的步骤 3.7 运行“ccmake ..”，以便更新配置信息。现在配置应该有包含 OpenCV 库配置的行。这一次“make”运行得更快，因为之前的编译。

在 qgis 中，DTclassifier 插件现在应该在 qgis 插件管理器中显示为 DTclassifier。但是我在 qgis 1.8.0 的 ubuntu apt-get 版本中运行插件。所以生成的编译 DTClassifier 文件

```
qgis-1.8.0/build-master/output/lib/qgis/plugins/libclassifierplugin.so 
```

需要放在qgis plugins目录下（通常是“/usr/lib/qgis/plugins”）。

**它对我有用，希望它也对你有用！**

注意：如果您尝试针对 qgis 1.9 编译 DTClassifier，那么您很可能会得到与此类似的错误列表：

```
 classifierdialog.cpp:328:13: error: ‘class QgsVectorDataProvider’ has no member named ‘select’ 
```

那是因为 1.9 版本的 qgis 类的 API 发生了变化？

# jax-rs - JAX-RS: Custom TypeConverter for resteasy-jettison

> ID：15007318
> 
> 赞同：0
> 
> 时间：2013-02-21T16:26:43.823
> 
> 标签：jax-rs, jboss7.x, resteasy, jettison

Is there any way to provide Custom TypeConverter in resteasy-jettison? By default jettison parse String value into int if it contains only numbers... I need to change it.

With clean jettison, there is possibility to write own implementation of TypeConverter (described in [jettison user's guide](http://jettison.codehaus.org/User%27s+Guide#UsersGuide-Typeconversion)... But I have no Idea where could I update jettison configuration with such class.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:04:09.910

将系统属性设置为以下类。

System.setProperty("jettison.mapped.typeconverter.class", "org.codehaus.jettison.mapped.SimpleConverter");

所以 jettison 有一个简单的转换器，它总是将值输出为字符串。

# asp.net-mvc-4 - Initialize DefaultRoleProvider connectionstring with code

> ID：15007320
> 
> 赞同：1
> 
> 时间：2013-02-21T16:26:44.807
> 
> 标签：asp.net-mvc-4, roleprovider

I have a wbe app mvc c#4.0, I want to Initialize DefaultRoleProvider connectionstring from code at runtime (don't want it from web.config). I created a class MyRoleProvider : DefaultRoleProvider

```
public class MyRoleProvider : DefaultRoleProvider  
{

    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
    {
        base.Initialize(name, config);

        // Update the private connection string field in the base class.  
        bool IsLocal = bool.Parse(ConfigurationManager.AppSettings["IsLocal"] as string);

        string connectionString = "local connectionString ... ";
        if (IsLocal == false)
            connectionString = "prod connectionString ...";
        //ToDo- how to set connection string next property of provider.  
        ??
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:51:07.467

再想一想，你可以尝试一些基于反射的东西，像这样：

```
public class CustomRoleProvider : SqlRoleProvider  
{    
    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
    {  
        base.Initialize(name, config);

    // Update the private connection string field in the base class.  
    bool IsLocal = bool.Parse(ConfigurationManager.AppSettings["IsLocal"] as string);

    string connectionString = "local connectionString ... ";
    if (!IsLocal)
    {
        connectionString = "prod connectionString ...";
        System.Reflection.FieldInfo field;
        field = this.GetType()
            .GetField("_sqlConnectionString",
                System.Reflection.BindingFlags.Instance 
                | System.Reflection.BindingFlags.NonPublic);
        field.SetValue(this, connectionString);
    }
} 
```

--------------------**初稿**

恐怕您可以这样做的最好方法是动态选择连接字符串名称，并引用已在 web.config 中声明的另一个连接。像这样的类扩展`SqlRoleProvider`：

```
public class CustomRoleProvider : SqlRoleProvider  
{

    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
    {  
        bool IsLocal = bool.Parse(ConfigurationManager.AppSettings["IsLocal"] as string);

        string connectionStringName = "local connectionString name ";
        if (!IsLocal)
            connectionStringName = "prod connectionString name";
        config.Set("connectionStringName", connectionStringName );
        base.Initialize(name, config);
    }  
} 
```

希望这会有所帮助

# css - Clear fix and uncollapse margins with CSS without side effects?

> ID：15007322
> 
> 赞同：3
> 
> 时间：2013-02-21T16:26:49.063
> 
> 标签：css, css-float, margin

What's a *general* good way to clearfix and uncollapse margins with CSS without side effects (nor additional HTML elements)?

The following cause side effects (and would like to avoid them):

*   Setting `overflow: hidden` or `overflow: auto`: Clips `box-shadow`, CSS transforms, and other content one may want to show outside the box. Thus it can't be used in several cases (but otherwise works great).
*   Setting `border` or `padding`: Obvious positioning/sizing effects.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:26:49.063

The clear and collapse fix, based on [this clear fix](http://perishablepress.com/new-clearfix-hack/), with added margin uncollapse:

```
.group:before, /* :before to uncollapse the top margin */
.group:after{
    display: block;
    clear: both; /* clear fix */
    content: "\a0 "; /* &nbsp; - just a space doesn't uncollapse margins */
    visibility: hidden; /* make sure not to show anything */
    height: 0;
}
.group{
    zoom: 1; /* solves it all for IE < 8, and doesn't hurt other browsers */
} 
```

**Demo**: [jsFiddle](http://jsfiddle.net/cQb49/), [IE7 render with netrenderer](http://netrenderer.com/?render&browser=ie7&voffset=0&go=1&url=http://jsfiddle.net/cQb49/show)

Note that `content: "\a0 ";` is equivalent to `&nbsp;` and is used instead of a non-whitespace character (eg `.`) so that when you select the block and copy it, you do *not* get extra visible characters, which otherwise happens in some browsers (for example IE9).

The drawbacks with this solution are:

*   `:before` and `:after` are defined, so special care needs to be taken if they are to be used.
*   For every new selector you want to have this fix applied to you have to specify the selector 3 times.
*   Not very short/trivial.

A similar solution is used by [YUI, described in this article](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/) (but without `&nbsp;`).

# html - HTML 链接 -> 边框

> ID：15007329
> 
> 赞同：0
> 
> 时间：2013-02-21T16:27:02.933
> 
> 标签：html, css, hover, border

在我们的主页上，我们有几个元素作为菜单点。（图片+标题+小描述）。问题是当鼠标悬停时菜单元素总是有一个边框。（即使我隐藏了边框）。

你可以看看：www.scf-software.com

图片中的问题：

*   img5.fotos-hochladen.net/uploads/problem23km5l7qcrp.png
*   fotos-hochladen.net/view/problemk1zm7540qh.png

非常感谢你！我真的投入了很多时间，但直到现在我都无法解决它:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:33:20.603

更改您的规则：

```
a:hover {
   background-color: #c7d1d6;
} 
```

您看到的轮廓是链接的背景（包含菜单所有图像的链接）由于该 CSS 规则而发生变化。

**编辑** 根据 Chrome，它是 site.css 的第 28 行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:35:31.227

你试过在你的 A 标签上放一个类吗？然后在 CSS 中声明悬停状态并告诉它没有边框？

```
<a class="something" href="#">
        <div class="menuePoint">
            <div class="menuePointIcon">U</div>
            <div class="menuePointTitle">SCF</div>
            <div class="menuePointDesc">Über SCF Software OG</div>
        </div>
        </a>

.something:hover
{background-color:white;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:39:16.673

您必须**删除**

```
a:hover {
    background-color: #C7D1D6;
} 
```

从**第 28 行的****site.css**文件中

# ios - Connect to the facebook login

> ID：15007331
> 
> 赞同：1
> 
> 时间：2013-02-21T16:27:09.680
> 
> 标签：ios, facebook

I want to connect to the Facebook Login through api, I can Login and get information but everything is from Facebook:

here is my code how can I write this code return [FBSession.activeSession handleOpenURL:url]; to

```
return [[[HttpRequest sharedHttpRequest] session] handleOpenURL:url]; 
```

I should have session.activeSession, but if I right it like this I will have an error

```
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation
{

//return [FBSession.activeSession handleOpenURL:url];

// return [[[HttpRequest sharedHttpRequest] session] handleOpenURL:url];
} 
```

would you please help me to implement this method,

Thanks in advance!

**UPDATE :** It never use the url and stringByAppendingString:@"connect-fb"

I can login and I can get information but it never use api for example it works with this NSString *url = [BASE_URL stringByAppendingString:@"connect-fb"]; and also if I put what ever I want in stringByAppendingString:@"everything"

Here is my method for login and connect to api:

```
 -(void) getApiUserInfos
{

if (FBSession.activeSession.isOpen) {
    [[FBRequest requestForMe] startWithCompletionHandler:
     ^(FBRequestConnection *connection,
       NSDictionary<FBGraphUser> *user,

       NSError *error) {

         if (!error) {

             NSString *url = [BASE_URL stringByAppendingString:@"connect-fb"];
             NSLog(@"%@",url);
             NSString *post = [NSString 
 stringWithFormat:@"facebookId=%@&firstName=%@&lastName=%@&email=%@",
                               self.facebookId = user.id,
                               self.firstName= user.first_name,
                               self.lastName= user.last_name,
                               self.email=user.email];

             NSLog(@"post : %@",post);
             post = [post stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

             NSData *postData = [NSData dataWithBytes: [post UTF8String] length: [post 
 lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];

             NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL 
 URLWithString:url]

                                           cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                                timeoutInterval:600];

             [request setHTTPMethod:@"POST"];
             [request setHTTPBody:postData];

             [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue 
 alloc] init]
                                    completionHandler:
              ^(NSURLResponse *response, NSData *data, NSError *error) {

                  return;

                  if(error)
                  {
                      NSLog(@"Errorr");
                  }

                  ///write for if error
                    NSString *ret = [NSString stringWithUTF8String:[data bytes]];

                  NSLog(@"api yser infos RETSTRING : %@",ret);

              }];                 
         }
     }];
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:53:58.403

我想你已经有了你的应用程序的`FacebookAppId`.

假设它是：`123456789012345`

您必须输入 YourApp-Info.plist。

在键下：

`FacebookAppId`作为`123456789012345`

`URLTypes`- `Item0`- `UrlSchemes`-`Item0`作为`fb123456789012345`

那么你的开放网址应该是：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation
{

    return [FBSession.activeSession handleOpenURL:url];
} 
```

**编辑：**

您可以尝试使用获取用户数据的替代方法。非常适合我。

```
- (void)fetchUserData
{
    NSLog (@"fetching user data");

    if (FBSession.activeSession.isOpen)
    {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection,
           NSDictionary<FBGraphUser> *user,
           NSError *error)
        {
            if (!error)
            {
                NSLog (@"FB:          id: %@", user.id);
                NSLog (@"FB:    username: %@", user.username);
                NSLog (@"FB:        link: %@", user.link);
                NSLog (@"FB:        name: %@", user.name);
                NSLog (@"FB:  first_name: %@", user.first_name);
                NSLog (@"FB:   last_name: %@", user.last_name);
                NSLog (@"FB: middle_name: %@", user.middle_name);
                NSLog (@"FB:    birthday: %@", user.birthday);
                NSLog (@"FB:       email: %@",[user objectForKey:@"email"]);
                NSLog (@"FB:      gender: %@",[user objectForKey:@"gender"]);
            }
            else
            {
                NSLog (@"fetchUserData: error");
            }
        }];
    }
} 
```

**编辑2：**

不是最终的解决方案，只是向前迈了一步：

我将您的请求创建修改为：

```
NSString *post = [NSString stringWithFormat:@"facebookId=%@&firstName=%@&lastName=%@&email=%@",
                                  self.facebookId = user.id,
                                  self.firstName = user.first_name,
                                  self.lastName = user.last_name,
                                  self.email = [user objectForKey:@"email"]]; //this line changed 
```

和完成处理程序：

```
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[[NSOperationQueue alloc] init]
                       completionHandler: ^(NSURLResponse *response, NSData *data, NSError *error)
{
    //return; - ditch this

    if(error)
    {
        NSLog(@"Error: %@", [error localizedDescription]); // returns "unsuported URL"
    }
    else
    {
         NSString *ret = [NSString stringWithUTF8String:[data bytes]];

         NSLog(@"api yser infos RETSTRING : %@",ret);
    }            
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:41:06.807

您确定在您的代码中导入库吗？

```
#import "FBConnect.h"
#import "Facebook.h" 
```

# sql - 按两列和另一列的最大值分组

> ID：15007338
> 
> 赞同：2
> 
> 时间：2013-02-21T16:27:20.640
> 
> 标签：sql, oracle

我需要能够按两列分组，并且只带回这两列的另一列的 id 为最大值的行。我所追求的细节在第四列中，称为答案

```
COLUMN1 | COLUMN2 | NUMBERCOL  |  Answer
--------------- ----------------------------
 123    |   456   |      1     |    a
 123    |   456   |      2     |    x
 123    |   456   |      3     |    s
 654    |   564   |      1     |    a
 654    |   564   |      2     |    s
 654    |   564   |      3     |    p
 654    |   564   |      4     |    b 
```

所以我需要第一个分组结果的答案 s 和第二个分组结果的答案 b

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:32:58.497

您可以使用带有 a 的子查询`JOIN`来获取结果：

```
select t1.column1,
  t1.column2,
  t1.numbercol,
  t1.answer
from yourtable t1
inner join
(
  select column1, column2,
    max(numbercol) MaxNum
  from yourtable
  group by column1, column2
) t2
  on t1.column1 = t2.column1
  and t1.column2 = t2.column2
  and t1.numbercol = t2.MaxNum 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/bc9fd/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:30:57.547

您可以为此使用分析函数：

```
select t.*
from (select t.*,
             row_number() over (partition by column1, column2 order by numbercol desc) as seqnum
      from t
     ) t
where seqnum = 1 
```

这不是通过聚合数据来实现的，而是通过为行分配一个序列号来实现的。对于 (column1, column2) 的每个新值，序号都会重新开始，并且顺序由 numbercol 确定。最高的 numbercol 的值为 1，第二高的为 2，依此类推。这是 Oracle 中分析函数的一个示例（在其他数据库中称为“窗口”函数）。

最后一个`where`子句选择您想要的行 - 具有最高 numbercol 的行。

# python - 动态更改 Django 模型属性

> ID：15007341
> 
> 赞同：0
> 
> 时间：2013-02-21T16:27:29.530
> 
> 标签：python, django, factory-boy

我正在尝试使用[factory_boy](https://github.com/rbarrois/factory_boy)为 django 应用程序创建具有循环依赖[项 factory_boy: 循环依赖项](https://factoryboy.readthedocs.org/en/latest/subfactory.html#circular-dependencies)的应用程序的固定装置。

楷模：

```
from django.db import models

class A(models.Model):
    b = models.ForeignKey(B)

class B(models.Model):
    c = models.ForeignKey(C)

class C(models.Model):
    a = models.ForeignKey(A, null=False) 
```

工厂：

```
# in AFactory
b = SubFactory(BFactory)
# in BFactory
c = SubFactory(CFactory)
# in CFactory
a = CircularSubFactory('a_factory', 'AFactory', b__c__a=None) 
```

当使用这些工厂运行我的 factory_boy 脚本时，我遇到了一个`ValueError: Cannot assign None: "C.a" does not allow null values`错误，这是正常`C.a`的`null=False`。

是否可以加载`C`、更改`C.a`设置`null=True`然后运行我的 factory_boy 脚本？

几点：

*   我知道那会很丑陋，但似乎我别无选择。不过，它只会在内部用于创建固定装置。
*   我无法更改我的模型，因为它是一个已经运行的应用程序，这些类是核心的一部分。

# r - 从多个数据帧中绘制多条线

> ID：15007342
> 
> 赞同：2
> 
> 时间：2013-02-21T16:27:37.007
> 
> 标签：r, plot, ggplot2, dataframe

我是 R 的初学者。所以我有 2 个数据文件，A.dat 和 B.dat，例如：

```
1   101203
2   3231233  
3   213213
... 
```

所以我做了

```
A <- read.table("A.dat", col.names = c("time","power"))
B <- read.table("B.dat", col.names = c("time","power")) 
```

我想在同一个系统中为 A 和 B 做线图（对不起，我还不能上传图片）。关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:34:37.217

我更喜欢使用`ggplot2`（包可以从 CRAN 下载）。这首先需要一点数据处理：

```
A$group = "A"
B$group = "B"
dat = rbind(A,B) 
```

然后绘制图形：

```
ggplot(aes(x = time, y = power, color = group), data = dat) + geom_line() 
```

对于基本图形，这样的事情应该可以工作：

```
plot(power~time, A)
lines(power~time, B) 
```

# c++ - Mex 类内存泄漏 - STL 映射是否需要析构函数？

> ID：15007349
> 
> 赞同：2
> 
> 时间：2013-02-21T16:27:57.707
> 
> 标签：c++, matlab, memory-leaks, destructor, mex

我正在寻找一些 mex 代码中的内存泄漏（我正在工作的 IT 支持没有安装有用的调试标志，使得 Valgrind 几乎没用......）。

我发现的潜在来源之一是我自制的 Matrix 课程。它使用映射的 STL 映射（即`map<int, map<int, double> >`存储矩阵。我曾假设由于我使用了 STL，C++ 可以在程序执行结束时自动处理垃圾收集，但我现在想知道，我需要对析构函数进行硬编码以先清除内部映射，然后再清除外部映射？

唯一的其他实例变量是几个整数，所以我看不到那些会导致任何问题。

为清楚起见，Matrix 类定义的相关部分：

```
class Matrix
{
    public:
        std::map< int, std::map<int, double> > elems;
        int rows;
        int cols;

        Matrix( );
        Matrix( int numRows, int numCols );

        // ... Getters, setters, operations and other miscellanea
} 
```

（我意识到将我的实例变量声明为公共是草率的 OO 实践，但这对你来说是 hacky 研究代码！）。

如果它不是析构函数，我想知道它是否在以下代码中：

```
 Matrix D;
    distance_cost( &D, &traj1, &traj2 ); // Init Matrix and flesh out data
    plhs[1] = mxCreateDoubleMatrix( D.rows, D.cols, mxREAL ); // Prepare output
    D_output = mxGetPr( plhs[1] );
    D.toDouble( D_output ); // Convert Matrix data maps to double* for Matlab 
```

where`distance_cost`是这样定义的：

```
void distance_cost( Matrix *Q, Trajectory *A, Trajectory *B) {

    int M = A->length( );
    int N = B->length( );

    (*Q) = Matrix( M, N );

    for( int m=0; m < M; m++ ) {
        for( int n=0; n < N; n++ ) {
            float dist = A->at(m).dist2D( B->at(n) );
            Q->set(m,n,dist);
        }
    }

} 
```

并且`toDouble()`是：

```
void Matrix::toDouble( double *dbl ) const {
    for( int i=0; i < this->rows; i++ ) {
        for( int j=0; j < this->cols; j++ ) {
            dbl[i+j*this->rows] = this->at(i,j);
        }
    }
} 
```

欢迎对我草率地使用内存管理的任何帮助、建议或批评 - 我已经把自己陷入了泥潭，无法真正弄清楚如何摆脱它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:36:23.723

如果这些都是 中的所有成员变量`Matrix`，那么您很可能没问题。

*   `std::map< int, std::map<int, double> > elems;`
*   `int rows;`
*   `int cols;`

一个特定的函数总是有可能泄漏内存。但是从您向我们展示的内容来看，您不会泄漏任何内存。

# twitter-bootstrap - Bootstrap 词缀 nav 包裹在小屏幕上

> ID：15007355
> 
> 赞同：0
> 
> 时间：2013-02-21T16:28:08.533
> 
> 标签：twitter-bootstrap, fluid-layout

我在引导程序中有一个附加的导航，效果很好，直到你在 iPhone 上查看。它对于垂直方向来说太宽了。我只想导航到“nowrap”和“overflow-x：scroll”。我正在利用所有

*   Bootstrap 的流畅布局
*   引导响应功能
*   “固定”导航

我以为我只是`white-space:nowrap; overflow-x:scroll;`在导航的某个部分，但无法让它工作。

在更广泛的媒体上表现出色： ![在此处输入图像描述](../Images/47f9bc04f5b31cfd87f7fc66141720cc.png)

在狭窄的媒体上不太好，试图只在导航上获得水平滚动（而不是整个页面）： ![在此处输入图像描述](../Images/b984777feba82725074a3535a4f6bd4b.png)

这是一个小提琴。调整结果窗格的大小，直到它非常窄（如垂直方向的 iPhone 屏幕）：http: [//jsfiddle.net/dirkraft/HQJfb/2/](http://jsfiddle.net/dirkraft/HQJfb/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:27:34.600

那么您遇到的问题可以通过使用媒体查询来解决 iphone 分辨率，如下所示： Js fiddle with your example [http://jsfiddle.net/shail/HQJfb/6/](http://jsfiddle.net/shail/HQJfb/6/show)

![iphone4](../Images/8913a1af5fce2c146e47b36d2d2d8f87.png)

```
@media (max-width: 480px) {
.row-fluid:after, .row-fluid:before {
    margin-bottom:10px;
}
.navbar .nav {
    margin: 0px;
}
.navbar .nav > li > a {
    padding:10px 8px;
}
} 
```

# ruby - 如何从字符串Ruby中提取单个段落

> ID：15007356
> 
> 赞同：0
> 
> 时间：2013-02-21T16:28:09.570
> 
> 标签：ruby

在我的应用程序中，我试图从一篇文章中提取第一段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:35:21.710

这可以通过以下方式完成：

```
test =  <<PARAGRAPH
I've actually been using the latest version of JAWS (the popular Windows screen reader software for blind people) recently, as part of my work on HTML5\. From a usability point of view it is possibly the worst software I have ever used. I'm still horrified at how bad the accessibility situation is.

For example, JAWS will happily take the last sentence of a paragraph, and the first sentence of the next paragraph, and run them into each other as one sentence, if there's no full stop at the end of the first paragraph. If you really want to make your Web pages more readable to blind users, forget longdesc or even alt, or even markup of any kind, just make sure you're using full punctuation! And that's just one example.
'
PARAGRAPH

puts test[/(.*)/]   # This will print the first paragraph. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:50:42.587

一种方法：

```
>> str="<p>sadsda</p>"
=> "<p>sadsda</p>"
>> str.scan(/<p>(.*)<\/p>/)
=> [["sadsda"]]
>> str.scan(/<p>(.*)<\/p>/)[0]
=> ["sadsda"] 
```

# java - java中的集合中的静态方法需要澄清吗？

> ID：15007360
> 
> 赞同：1
> 
> 时间：2013-02-21T16:28:19.810
> 
> 标签：java

我知道泛型，但我不清楚这种语法。例如，在 Collections.sort() 中：

```
public static <T> void sort(List<T> list, Comparator<? super T> c) 
```

`<T>`返回类型 void 之前的 static 有什么意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:41:28.383

方法签名来自`sort`：

```
public static <T> void sort(List<T> list, Comparator<? super T> c) { 
```

这`<T>`定义了一个可以在方法定义中引用的任意泛型类型 T。

我们在这里说的是该方法需要`List`某种类型的 a（我们不在乎）T 和`Comparator`另一种类型的 a，但这种类型**必须**是 T 的超类型。这意味着我们可以这样做：

```
Collections.sort(new ArrayList<String>(), new Comparator<String>());
Collections.sort(new ArrayList<Integer>(), new Comparator<Number>()); 
```

但不是这个

```
Collections.sort(new ArrayList<String>(), new Comparator<Integer>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:39:09.840

> `<T>`返回类型 void 之前的 static 有什么意义？

这是一个*泛型方法*，并且`<T>`是它的类型参数。它表示，`List<T>`只要比较器能够比较这种类型的对象或其任何超类型 ( `Comparator<? super T>`)，它就会对包含任何类型 ( ) 的对象的列表进行排序。因此，编译器将允许您调用`sort`传递，例如 a`List<Integer>`和 a `Comparator<Number>`（作为`Integer`的子类型`Number`），但不能调用 a`List<Object>`和 a `Comparator<String>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:29:13.667

您可以在不实例化的情况下进行排序`Collections`。该`sort()`方法是`Collections`类的静态方法。

考虑以下之间的语法差异：

```
Collections col = new Collections();
col.sort(someCollection); 
```

和

```
Collections.sort(someCollection); 
```

该`sort()`方法不必依赖某些可能的 Collections 对象的属性。因此，最好将 is 声明为一种`static`设计方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T16:39:19.257

称为类型参数，`<T>`此处用于抽象排序方法正在操作的项目的类型。您可以为类或方法设置类型参数。这是为方法指定类型参数的语法，该参数必须在方法的返回类型之前。

# c# - 具有相对源的数据绑定依赖属性

> ID：15007361
> 
> 赞同：0
> 
> 时间：2013-02-21T16:28:20.910
> 
> 标签：c#, wpf, data-binding, user-interface, mvvm

我在当前代码中面临一个问题。

UI 有一个按钮，该按钮数据绑定到依赖属性 showbutton。它建立在 MVVM 架构之上。

XAML 看起来像这样。

```
<Grid>
.........
<Button .... IsEnabled="{Binding Path=class1.class2.showbutton,RelativeSource={RelativeSource FindAncestor, AncestorType=views:view2, Mode=FindAncestor, AncestorLevel=1}}"/> 
```

...... <\网格>

注册的依赖属性看起来像这样

```
public static readonly DependencyProperty buttonDisplay= DependencyProperty.Register("showbutton", typeof(bool), typeof(class2), new PropertyMetadata((bool)false));

public bool showbutton
{
    get { return (bool)GetValue(buttonDisplay); }
    set { SetValue(buttonDisplay, value); }
} 
```

更新被称为直通

```
private void UpdateProperties()
 {
   showbutton= User.CheckPrivilege("ShudEnable");        }
 } 
```

该按钮未根据 showbutton 启用。可能是什么问题？是否可以以编程方式更改 showbutton 值。如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:51:39.010

试试这个 DataContext.class1.class2.showbutton - 确保绑定路径是正确的。您可以使用名为 snoop 的实用程序检查绑定错误。 [http://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/)

# c# - 如何包装 System.Data.Linq.Table 到通用方法？

> ID：15007370
> 
> 赞同：1
> 
> 时间：2013-02-21T16:28:57.210
> 
> 标签：c#, linq, generics

```
protected void saveform<T>(System.Data.Linq.Table<T> table, bool submit) 
    where T : class
{
    try
    {
        using (DataContext dc = new DataContext())
        {
            var form = (from f in table
                        join r in dc.tbRecords on f.recordId equals r.recordId
                        where r.pID == pId
                        select new {f, r}).SingleOrDefault();
        ... 
```

但是我在编译时收到了这个错误信息：

> “T”不包含“recordId”的定义，并且找不到接受“T”类型的第一个参数的扩展方法“recordId”（您是否缺少 using 指令或程序集引用？）

我该如何处理？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:53:38.950

你怎么知道 T 有一个 'recordId' 属性？它只被限制为一个对象......

一个可能的解决方案是将您的实体包装在一个接口中：

```
public interface IRecord
{
    public int recordId { get; }
} 
```

您可以使用部分类来使您的实体实现此接口。

然后，将方法上的泛型类型约束到该接口，例如

```
protected void saveform<T>(System.Data.Linq.Table<T> table, bool submit) where T : IRecord 
```

# memory - 哪种编程语言更适合实现基于搜索的问题求解器？

> ID：15007374
> 
> 赞同：2
> 
> 时间：2013-02-21T16:29:01.990
> 
> 标签：memory, artificial-intelligence, memory-efficient

我目前正在开始为人工智能课程做最后的项目（作为我的计算机科学学士学位的一部分）。在这个项目中，我们需要在人工智能领域选择一个有趣的问题，扩展课堂上的一个或多个主题，并解决它。我们稍后会写一份报告来讨论我们的结果并提交报告和我们编写的代码。

显然，我们不希望在经典问题的研究中达到最先进的水平，而是要么检查并解决（在很大程度上）一个不常见的问题（大多数选择这种方法的人选择解决一些简单的计算机，要么AI 研究社区尚未彻底解决的棋盘游戏）或以某种新颖的方式检查更常见的问题，可能提出一种新的有趣的启发式或对现有算法的一些修改。在后一种情况下，我们预计不会超越现代研究结果，只是提供一些新的视角。

我和我的伙伴为该项目选择的主题是推箱子，这使我们处于第二组（它没有被研究死，因为只有三分之二的常见测试集可以由最好的求解器解决，但状态这个问题的最先进的解决方案似乎太复杂了，我们希望通过一个为期两周的兼职项目来接近他们）。我们想尝试使用搜索问题方法解决推箱子问题。

无论如何，在开始实现我们的推箱子求解器之前，我开始想知道我们熟悉的几种语言（C、C++、Java 和 Python）中的哪一种更适合用于实现基于搜索的求解器来执行在一个非常大的搜索空间上搜索（推箱子有一个非常深的搜索树，有些问题需要超过 300 步才能解决，并且分支因子非常高[在某些问题中超过 100]；请注意，这个高分支因子是在以下情况下实现的只考虑石头\盒子移动，不考虑玩家移动，因此在每种状态下，我们可以将任何石头移动到四个方向中的任何一个）。

我开始考虑这个问题的主要原因是因为在另一门关于人工智能的课程中——处理将人工智能技术应用于产品设计——我创建了一个自动化房间设计师，它将通过搜索所有可能的房间设计的状态空间来设计一个房间（具有给定的房间大小和一套家具）并返回得分最高的状态（通过一些启发式方法测量）。该程序是用 Java 编写的，每次运行时都会耗尽内存，只搜索了数万个搜索节点。我认为发生这种情况的主要原因是因为我为那个项目选择了一种非常面向对象的方法；它是用 Java 编写的，每个搜索状态都由一个对象表示，每个这样的状态，当由一个搜索器对象到达时，

现在，我知道问题的一部分是使用内存密集型算法 (A*)，以及我选择实现它的方式，但我想知道使用 Java 是否也存在问题。所以这让我想到了两个问题：
1\. 一般来说，在实现搜索问题和搜索算法时，哪种编程方法更合适？（面向对象、函数式或其他）
2\. 在实现搜索问题和搜索算法时，哪种编程语言更合适，Java、C、C++ 还是 Python？（其他语言也是可能的，但前提是它们的语法与上述语言之一非常相似）

具体来说，这些语言的哪些特性和特性可用于实现一个问题解决程序，该程序旨在以内存（和运行时）有效的方式在非常大的搜索空间上进行搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:05:18.623

我认识一些人，他们都在做像你在 Java 中描述的那样的内存密集型算法。你可以让它工作，但你必须求助于[原始集合](https://stackoverflow.com/questions/3307622/java-primitive-collections-library)和数组。

话虽如此，我认为这不是很聪明。如果您想编写高效的 Java 代码，您基本上可以编写类似于 C/C++ 代码的代码。然后你也可以采取最后一步，直接编写 C/C++，获得进一步优化的机会（可能在速度和内存方面再获得 2 倍）。

这让我想到了你的问题：

> 1.  一般来说，在实现搜索问题和搜索算法时，哪种编程方法更合适？（面向对象、功能或其他）

函数式程序通常看起来非常漂亮，并且看起来很适合算法问题。问题在于，大多数命令式算法通常更快（并且在没有错误的情况下更难编写）。面向对象，嗯，我不知道，我把它算作命令式的。对象层次结构引入了您通常不想要的计算开销（与它购买的东西相比）。

> 2.  在实现搜索问题和搜索算法时，哪种编程语言更合适，Java、C、C++ 还是 Python？（其他语言也是可能的，但前提是它们的语法与上述语言之一非常相似）

我认为 Python 在简洁性上类似于函数式语言（它具有一流的功能），但对于任何严肃的事情来说它都太慢了。在您提出的语言中，我可能会选择 C++，因为 Java 不是更好但可能更慢。一种可能性是使用 Scala 之类的东西，它允许以接近或等于 Java 的速度进行简洁的编程（类似于 Python）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:47:25.297

我的意见：

Java：过于冗长/丑陋的语法，尤其是对于数学事物。并且使用了太多的内存/cpu 资源。

C：绝对可怕，如果你习惯于面向对象的无指针语言

C++：功能强大且速度快，但编译过于繁重/慢，无法使用许多不同的算法进行实验。

Python：它们中最慢的。可能很适合创建原型，但不太适合大型计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T09:05:54.760

通过使用 C++ 结构，您*可能会*在 Java 的对象上节省一些空间，但**问题的根源在于您当前的算法实现**：看起来您的内存需求呈指数级增长。

伪计算：假设您的`n = 10 000`. 因此，您需要`100 000 000`转换为`1 Gb`RAM 的对象。假设通过从 Java 切换到 C++（并将已知问题换成未知问题），您将其降低到`0.5 GB`RAM。太好了，除了如果你的 n 翻倍，你的内存分配会翻四倍......所以对于 n = 20 000，你需要`4 GB`Java RAM 和`2 GB`C++ RAM......

相反，如果您专注于内存效率更高的算法实现，您会发现突然之间您使用的是 MB，而不是带有大 n 的 GB。[通过实现即时选择（将基于列表的体系结构换成基于迭代器的体系结构），我已经非常深刻地体验了这一点。](http://blog.athico.com/2012/07/scaling-planner-with-jit-selectors-in.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T10:25:55.503

使用最佳优先搜索 (BFS) 时，空间需求通常最难管理，因为您实际上存储了整个搜索空间，而且它的大小通常是指数级的。

可以通过丢弃看起来没有希望（低分）的部分搜索空间来管理空间，或者导致放弃搜索的完整性（当“足够好”的答案是可以的）或者如果抛出部分则导致重新搜索的搜索需要重新访问。这个想法的极端版本​​被称为“深度优先搜索”（DFS），它只保留当前最有希望的分支。DFS 和 BFS 之间的折衷是所谓的[束搜索](http://en.wikipedia.org/wiki/Beam_search)。这种空间权衡方案独立于编程语言；您将它们连接到您的搜索算法中。

一旦你意识到你可以而且必须有效地管理空间，现在你必须管理搜索时间。一般来说，最好的算法总是获胜，而且通常不是原始搜索。在人工智能世界中，您通常不知道“最佳算法”，因此求助于蛮力搜索。对于原始蛮力搜索，您需要针对您可以获得的问题的最佳启发式算法，这不是算法问题；这是您必须以某种方式获得的领域知识。大多数人工智能可以说是关于试图捕捉和利用领域知识。算法和启发式知识都与语言无关。

最后，您可以通过使用*并行*语言来帮助管理搜索时间（尽管这最多只能为您购买 N 加速的恒定因子）。为此，您需要一种能够按需大量廉价生成并行计算的语言。我们的许多现代语言（Java、C#）都有笨拙的内置“线程”结构和笨拙的调用。C 和 C++ 没有这个内置的，但你可以使用“fork”库；不幸的是，这些使用起来更加笨拙并且通常有限制（例如，您不能拥有比操作系统提供给您的线程更多的并行粒度，最多限制为几千个，或者因为[大堆栈假设](https://stackoverflow.com/a/1053159/120163)。一个实用的在这种情况下，方案是将您的线程视为工作线程，每个线程扩展一个单元的一部分边界。

另一种方案是有足够的颗粒来很好地匹配你的问题结构；您基本上使用并行性来管理搜索空间中的节点。为此，您必须解决大堆栈问题，否则堆栈空间不足 :-( 我们使用称为 PARLANSE 的专有语言执行一些基于搜索的算法来支持软件工程工具，该语言几乎可以轻松地分叉子项。PARLANSE 类似于 lisp ; 它有一个 **(|| ABC )**内置并行运算符，用于分叉子计算 ABC 等，以及偏序并行和通用并行**(spawn X)**分叉子计算 X。所有这些运算符都很便宜；他们只需要几百个周期来分叉一个并行的工作；这是可能的，因为运算符是语言内置的，编译器可以理解它们。您可以看到[使用 PARLANSE 编码的深度优先搜索。](https://stackoverflow.com/a/1866161/120163)，您必须努力寻找**(||**运算符，但它在那里（提示：找到内部循环！）。PARLANSE 并行性的一个非常有用的属性是能够*中止*计算及其子项；这允许“最佳答案”在搜索空间中传播其结果并杀死其他搜索子节点。

IBM 的[X-10 并行超级计算语言](http://en.wikipedia.org/wiki/X10_%28programming_language%29)具有生成看起来很有希望的动态子代（**完成构造）的设施。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T18:06:23.477

如果您仅限于使用大多数人熟悉的语言，我可能会推荐 c++。

如果你想分支到人工智能领域常见的语言，并且我发现在其中实现求解器相对容易，我会使用 prolog。我知道你可以在网上找到启发式算法的例子。我相信您知道，Minimax 和 alpha-beta 修剪很常见。

另外，我使用了一种与 prolog 相关联的语言，称为 GDL。请参阅：[http](http://en.wikipedia.org/wiki/Game_Description_Language) ://en.wikipedia.org/wiki/Game_Description_Language 。它包含您可能在 lisp 语法中称为 prolog 谓词的内容。

# xml - 转换后的 drupal rss xml 有标签

> ID：15007378
> 
> 赞同：0
> 
> 时间：2013-02-21T16:29:15.380
> 
> 标签：xml, jsp, drupal, xslt, rss

我有一个 Drupal 站点设置。它为提要发送的 rss 很简单，页面有一个图像和一些用于测试的文本。

在另一个环境中 - 非 Drupal - 我正在通过转换 xml 在 jsp 页面上导入提要。

```
<c:import url="http://myfeedurl/rss.xml" var="inputDoc" scope="session"/>
<c:import url="drupal.xsl" var="stylesheet" />
<x:transform xml="${inputDoc}" xslt="${stylesheet}"/> 
```

一切正常，就像抓取 xml 流并将其呈现在页面上一样。但是，它会吐出内容中的 html 标签。所以我看到的不是“这是一个测试”`<div class="field-item even" property="content:encoded"><p>This is a test</p> </div>`

我想知道这是否是 Drupal rss 问题，或者我的渲染端是否需要一些东西。我以前用其他 rss 提要做过这个，它显示正确。

当您在正确的 rss 提要上查看源代码时，xml 就在标签中，因为它应该是。

当您在这个 drupal 提要上查看源代码时，它看起来像这样`&lt;div class=&quot;field-item even&quot; property=&quot;content:encoded&quot;&gt;&lt;p&gt;This is a test&lt;/p&gt; &lt;/div&gt;`，而不是 html。

任何帮助，将不胜感激....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:31:49.120

Drupal 使用 HTML 实体来保存标签。如果您不希望这样，则需要在 Drupal 方面剥离它们。确切的方法取决于您生成提要的方式。

如果确实需要它们，则需要在渲染实体之前对其进行解码，否则转义的实体将显示为字符。您可以为此使用[http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29 。](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)

# dynamic - 将 RatingBar 动态添加到 ListFragment

> ID：15007380
> 
> 赞同：0
> 
> 时间：2013-02-21T16:29:19.667
> 
> 标签：dynamic, android-listview, android-listfragment, ratingbar

我有一个 ListFragment，它只包含我想要动态填充的 ListView。问题是我想用 RatingBar 视图填充它。我所做的是声明一个 RatingBar，然后将其添加到视图中。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    RatingBar rb = new RatingBar(this.getActivity());
    rb.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

    getListView().addView(rb);

    return (LinearLayout)inflater.inflate(R.layout.tab_frag1_layout, container, false);
} 
```

我得到了错误：

```
java.lang.IllegalStateException: Content view not yet created 
```

如何在 ListFragment 内的每个 ListView 行中添加 RatingBar？

**编辑：**好的，所以我将代码更改为：

```
RatingBar rb = new RatingBar(getActivity());
rb.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, 
                   LayoutParams.WRAP_CONTENT));
rb.setIsIndicator(true);
rb.setNumStars(5);

List<RatingBar> lrb =  new ArrayList<RatingBar>();

for (int i = 0; i < li.size(); i++)
    lrb.add(rb);

setListAdapter(new ArrayAdapter<RatingBar>(this.getActivity(),
               android.R.layout.simple_selectable_list_item, lrb)); 
```

但是，虽然我没有收到错误，但我得到了这些结果：

![模拟器结果](../Images/4730a5865340b212f813b5ad218aefb6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:46:07.677

ArrayAdapter 显示比简单的“TextViews”更不方便。您必须创建自己的适配器，可能是从简单的[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)派生而来。然后你必须用你的数据填充你的适配器。它将使用正确的视图更新列表视图。你可以看看[这个教程](http://www.vogella.com/articles/AndroidListView/article.html)。

# jquery - 确定元素的宽度

> ID：15007384
> 
> 赞同：0
> 
> 时间：2013-02-21T16:29:31.207
> 
> 标签：jquery, html

我有一个元素需要在单击按钮时移入屏幕，然后在再次单击时退出屏幕。

问题是我不想写一个特定的盒子宽度，因为它并不总是一样的。我认为这段代码应该这样做，但我得到一个 ReferenceError 说“找不到变量：宽度”。任何想法如何改进它？

```
var itemWidth = $("#about_box").css(width);

console.log($("#about_box").width());

var itemOut = false;

$(document).ready(function() {

    $("#about").click(function(){

        var value1 = 30;
        var value2 = -itemWidth;

        console.log(itemOut);

        if (itemOut == false) {
            $("#about_box").stop();
            $("#about_box").animate({left: value1}, 350);
            itemOut= true;
        } else {
            $("#about_box").stop()
            $("#about_box").animate({left: value2}, 150);
            itemOut = false;
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:36:34.073

您应该使用以下选项之一：

```
$("#about_box").width() //element only width
$("#about_box").innerWidth() //element + padding width
$("#about_box").outerWidth() //element + padding + border width 
```

并在 $(document).ready 处理程序中使用它，因为在此之前您可能不会获得任何宽度，因为 DOM 尚未呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:34:01.033

你错过了这里的报价

`var itemWidth = $("#about_box").css(width);`

应该

`var itemWidth = $("#about_box").css("width");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:34:34.673

此行有语法错误并抛出异常：`var itemWidth = $("#about_box").css(width);`

您需要使用：

`var itemWidth = $("#about_box").css('width');`

或者

`var itemWidth = $("#about_box").width();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:34:35.877

```
var itemWidth = $("#about_box").css(width); 
```

更改为： var itemWidth = $("#about_box").width(); 并考虑是否需要外部宽度（填充）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T16:36:37.450

它应该是：

```
var itemWidth = $("#about_box").css("width"); 
```

即引号中的宽度。

# python - 如何使用 python mechanize 发送有效载荷

> ID：15007388
> 
> 赞同：3
> 
> 时间：2013-02-21T16:29:41.987
> 
> 标签：python, json, payload

我想从互联网上获取信息，我使用 python mechanize 模块来做到这一点，但是它需要在请求时发布有效负载，我尝试了很多方法但仍然失败。请帮我。
这是我掌握的帖子数据：

## 要求

URL：xxxxxx
请求方法：POST
状态码：200 OK

# 请求标头

```
**Accept:application/json, text/javascript, */*; q=0.01**  
Accept-Charset:gb18030,utf-8;q=0.7,*;q=0.3  
Accept-Encoding:gzip,deflate,sdch  
Accept-Language:en-US,en;q=0.8,zh-CN;q=0.6,zh;q=0.4  
Connection:keep-alive  
Content-Length:52  
**Content-Type:application/json; charset=UTF-8**  
Cookie:ASP.NET_SessionId: sanntewiq5cz5uq1y0l5g3gy  
Host:xxx.xxx.xxx.xxx:8500  
Origin:xxx.xxx.xxx.xxx:8500  
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.17 (KHTML, like Gecko)  Chrome/24.0.1312.57 Safari/537.17  
**X-Requested-With:XMLHttpRequest** 
```

# 请求有效载荷

**{dispatchorderid:"966A48E572624F2FB2E99F371C232729"}**

# 这是我的代码：

```
br = mechanize.Browser()
payload = {'dispatchorderid': "966A48E572624F2FB2E99F371C232729"}
json_data = json.dumps(payload)
br.addheaders = [('Content-Type', 'application/json; charset=UTF-8'),
                ('Accept', 'application/json, text/javascript, */*; q=0.01'),
                ('X-Requested-With', 'XMLHttpRequest')]
br.set_debug_http(True)
res = br.open(url, json_data) 
```

## 当我运行这个脚本时，发送信息是：

send: 'POST /DealerManage/AddDispatchorder.aspx/GetDispatchorderEntityList HTTP/1.1\r\nAccept-Encoding: identity\r\nContent-Length: 55
Connection: close
Accept: application/json, text/javascript, */* ; q=0.01
主机：125.64.15.71:8500
Cookie：ASP.NET_SessionId=34dyw50d3omel2vbsvm41zwp
X-Requested-With：XMLHttpRequest
*** *Content-Type：application/x-www-form-urlencoded'***

为什么 Content-Type 不会更改为 'application/json; 字符集=UTF-8'？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-01-05T01:59:57.377

`requests`这个问题真的很老了，但现在使用这个包要容易得多：

```
import requests
head = { 'Content-Type': 'application/json; charset=UTF-8',
         'Accept': 'application/json, text/javascript, */*; q=0.01',
         'X-Requested-With': 'XMLHttpRequest' }
data = dict(dispatchorderid="966A48E572624F2FB2E99F371C232729")
response = requests.post(url, json.dumps(data), headers=head)

print response.text 
```

# php - JQuery动态改变数字

> ID：15007392
> 
> 赞同：0
> 
> 时间：2013-02-21T16:29:57.743
> 
> 标签：php, ajax, jquery, jquery-effects

网店。大车。购物车中的产品：

```
name | price | count | pricecount  
Car  | 10usd |   2   |   20usd 
```

count 是`<input type='number' class='changecount'>`，如果我改变它，我想取输入的数字，然后乘以 price 并更改 pricecount 的文本值。但我想这样做，效果如下：

```
price = 10; count = 2; pricecount = 20; ->> change count to 3 so pricecount = 30;
pricecount changes from 20 to 30 with effect showing 21,22,23..30 (like timer) 
```

更改文本但没有效果

```
$('.changecount').blur(function(){
    var $price = $(this).parent().siblings('.gprice').text();
    var $value = $(this).val();
    var $pricecount = $price * $value;
    $(this).parent().siblings('.gpricecount').text($pricecount);
}); 
```

我怎样才能用 JQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:41:41.783

您可以创建一个定期更改数字的函数：

```
function IncreaseTotalPrice( item, lowVal, highVal) {
    //item is the DOM element that displays the price

    while(lowVal < highVal) {
        lowVal++;
        item.text(lowVal);
        sleep(100); //wait 0.1 sec before continuing the loop and changing the number again
    }
}

function sleep(milliseconds) {
  var start = new Date().getTime();
  for (var i = 0; i < 1e7; i++) {
    if ((new Date().getTime() - start) > milliseconds){
      break;
    }
  }
} 
```

注意：我喜欢使用该`sleep()`功能。`setTimeout()`和`setInterval()`工作一样好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:43:07.900

您可以做到这一点的一种方法是利用`setInterval`对您的文本执行定期预定的 +1 操作。

像这样从一个数字变为 30，通过使其每秒滴答 1 次：

```
var interval = 1000,      // one second
    max = 30,
    textbox = $('#textbox'),
    schedule = setInterval(function () {

        var currentValue = textbox.val();

        // if we've already reached the max limit,
        // break schedule
        if (currentValue >= max) { 
            clearInterval(schedule);
        }

        // add 1
        textbox.val(currentValue + 1);                        

    }, interval); 
```

代码很脏，但你应该能够很好地理解我的意思。一件好事`setInterval`是它是非阻塞的，因此您的其他进程应该能够在此过程中继续进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:44:41.407

查看这个[DEMO](http://jsbin.com/udetot/2/edit)并告诉我它是否能解决您的问题。改变左边的价格，看看右边输入的效果

```
var timer = null;
$("#price1").change(function(){
    if(!updating) updatePrice();
  });
});

    var updating = false;
    function updatePrice() {
      console.log("tick");
      var $price1 = $("#price1");
      var $price2 = $("#price2");
      var dif = +$price1.val() - +$price2.val();

      if(dif < 0) {
        $price2.val(+$price2.val()-1);
      }else if(dif > 0) {
        $price2.val(+$price2.val()+1);
      }

      if(dif !== 0){
        updating = true;
        setTimeout(updatePrice, 1000);
      }else {
        updating = false; 
      }

    } 
```

**更新：**泄漏已修复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:34:49.697

Jquery.blur 不是你想的那样。它不会产生模糊效果，但会移除控件的焦点。淡入淡出可能是您的一个选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T16:49:09.533

尝试 JQuery FlipCounter 插件，例如：

[http://www.jqueryrain.com/?LCnNoMur](http://www.jqueryrain.com/?LCnNoMur)

[http://keith-wood.name/flightBoard.html](http://keith-wood.name/flightBoard.html)

# html - CakePHP - 使用 $this->Html->link with $this->Html->image....生成 ascii 而不是实际的 HTML

> ID：15007396
> 
> 赞同：9
> 
> 时间：2013-02-21T16:30:04.073
> 
> 标签：html, cakephp

我正在使用 cakephp 2.3.0。我在手册中搜索了很长时间，但没有找到答案。我正在尝试使用 $this->Html->link 以及 $this->Html->image。我正在尝试创建单击图像的能力。关于为什么生成引号的 ascii 渲染的任何想法？

这是我在 ctp 视图中的代码段代码集：

```
echo $this->html->tableCells(
        array(
            array(
                array (
                   $this->Html->link($myActivity['Activity']['name'], array('controller' => 'users', 'action' => 'edit'), array('title' => '')), 
                            array('align' => 'left')),
                    array ($myActivity['Activity']['status'], array('align' => 'left')),
                    array ($myActivity['Activity']['any_messages'], array('align' => 'left')),
                    $date2,
                    array ($this->Html->link(
                            $this->Html->image('pencil.jpg', array('alt' => 'Edit', 'border' => '0', 'width' => '25')), 
                            array('controller' => 'users', 'action' => 'add'), array('title' => ''))
                    ),
                    $this->Html->image('trashcan.jpg', array('alt' => 'Delete', 'border' => '0', 'width' => '25')),
                    $this->Html->image('copy.png', array('alt' => 'Copy', 'border' => '0', 'width' => '25')),
            )
         )  
      ); 
```

下面是上面代码的实际 HTML 结果。如您所见，生成的 HTML 显示的是 ascii 版本的引号 (") 和 '<' 和 '>'：

```
<tr>
    <td align="left">
        <a href="/activities/index.php/users/add" title="">Running</a>
    </td>
    <td align="left">Live</td>
    <td align="left">no</td>
    <td>02/18/13</td>
    <td>
        <a href="/activities/index.php/users/edit" title="">&lt;img src=&quot;/activities/app/webroot/img/pencil.jpg&quot; alt=&quot;Edit&quot; border=&quot;0&quot; width=&quot;25&quot; /&gt;</a>
    </td>
    <td>
        <img src="/activities/app/webroot/img/trashcan.jpg" alt="Delete" border="0" width="25">
    </td>
</tr> 
```

下面是我期望的 HTML 的样子：

```
<tr>
    <td align="left">
        <a href="/activities/index.php/users/add" title="">Running</a>
    </td>
    <td align="left">Live</td>
    <td align="left">no</td>
    <td>02/18/13</td>
    <td>
        <a href="/activities/index.php/users/edit" title="">
            <img src="/activities/app/webroot/img/pencil.jpg" alt="Edit" border="0" width="25"></a>
    </td>
    <td>
        <img src="/activities/app/webroot/img/trashcan.jpg" alt="Delete" border="0" width="25">
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-21T16:36:46.780

您需要将选项添加到调用`escape`的选项数组中。`link()`将其设置为`false`，如下所示：

```
echo $this->Html->link(
    $this->Html->image('mydog.jpg'), '/lol.html', array('escape' => false)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-12T06:00:00.070

```
echo $this->Html->image('imagename',array('alt'=>'myimage','class'=>'img-responsive')); 
```

这是没有任何链接的**普通**图像，现在用链接标签包装它

```
echo $this->Html->link($this->Html->image('imagename',array('alt'=>'myimage', 'title'=>'myimage','class'=>'img-responsive')), [
                      'controller' => 'controllerName',
                      'action'     => 'actionName',
                      'id'         => $value['id'], //if any parameters are passed
                      ],['escape'    => false]); 
```

同样，您可以将图像标签分配给变量并使用它

```
$myImageVar = $this->Html->image('imagename',array('alt'=>'myimage','class'=>'img-responsive'));

echo $this->Html->link($myImageVar, [
                          'controller' => 'controllerName',
                          'action'     => 'actionName',
                          'id'         => $value['id'], //if any parameters are passed
                          ],['escape'    => false]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-08T18:04:17.120

是的 可以将图像作为锚标记。您只需要为它设置 escape = false ，如下所示：-

```
<?php
$thumb_img = $this->Html->image('yourimage.png',array('alt'=>'yoursite.com','class'=>'yourclass'));

echo $this->Html->link( $thumb_img, array('controller'=>'yourcontroller','action'=>'youraction'), array('escape'=>false));

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-29T13:20:07.017

尝试这个 ：

```
echo $this->Html->link('', array(
   'controller' => 'Mycont',
   'action'     => 'deletepic',
   $id
), array(
   'confirm'    => 'Are you sure you want to delete the image?',
   'class'      => 'deleteImg'
)); 
```

我已将图像链接到类 deleteImg。

# java - Java 扫描器分隔符

> ID：15007404
> 
> 赞同：5
> 
> 时间：2013-02-21T16:30:17.890
> 
> 标签：java, regex, parsing, tokenize, delimiter

我正在使用扫描仪和分隔符来标记我的 .txt 文件（这是我必须做的功课）。该文件的第一个版本如下所示：

```
5,5,5,6,5,8,9,5,6,8, good, very good, excellent, good
7,7,8,7,6,7,8,8,9,7,very good, Good, excellent, very good
8,7,6,7,8,7,5,6,8,7 ,GOOD, VERY GOOD, GOOD, AVERAGE
9,9,9,8,9,7,9,8,9,9 ,Excellent, very good, very good, excellent
7,8,8,7,8,7,8,9,6,8 ,very good, good, excellent, excellent
6,5,6,4,5,6,5,6,6,6 ,good, average, good, good
7,8,7,7,6,8,7,8,6,6 ,good, very good, good,  very good
5,7,6,7,6,7,6,7,7,7  ,excellent, very good, very good, very good 
```

我使用`useDelimiter("[ ]*(,)[ ]*")`的文件的第二个版本如下所示：

```
5 5 5 6 5 8 9 5 6 8 good, very good, excellent, good
7 7 8 7 6 7 8 8 9 7 very good, Good, excellent, very good
8 7 6 7 8 7  5 6 8 7 GOOD, VERY GOOD, GOOD, AVERAGE
9 9 9 8 9 7 9  8 9 9 Excellent, very good, very good, excellent
7 8 8 7 8 7 8 9 6 8 very good, good, excellent, excellent
6 5 6 4 5 6 5 6 6 6 good, average, good, good
7  8 7 7 6 8 7 8 6 6 good, very good, good,  very good
5 7 6 7 6 7 6 7 7 7  excellent, very good, very good, very good 
```

而且我想不出一个正则表达式来帮助我用空格分隔数字和用逗号分隔单词。基本上我需要一个有 14 个值的数组（非常好是一个变量）

注意有多个空格（这样做是为了让我们更难）。

因此，我们将不胜感激任何形式的帮助。

PS我们只允许使用**分隔符**（没有分割等..）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:22:19.857

这应该有效，关键是正向后视（`(<?=)`）和交替（`|`）：

```
String input = "9 9 9 8 9 7 9  8 9 9 Excellent, very good, very good, excellent";
Scanner s = new Scanner(input).useDelimiter("(?<=\\d)[\\s,]+|\\s*,\\s*");
while (s.hasNext()) {
    System.out.println("Token: ." + s.next() + ".");
} 
```

印刷：

```
Token: .9.
Token: .9.
Token: .9.
Token: .8.
Token: .9.
Token: .7.
Token: .9.
Token: .8.
Token: .9.
Token: .9.
Token: .Excellent.
Token: .very good.
Token: .very good.
Token: .excellent. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:39:49.397

你可以试试这个`(((?<=[0-9]+)\s*(?=[0-9]+))|(,\s*(?=[a-zA-Z]+))|((?<=[0-9]+)\s*(?=[a-zA-Z]+)))`，看起来很糟糕，但应该可以

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T16:51:08.547

请注意，它`Scanner`允许您随时更改分隔符。如果您可以依赖输入文本的开头始终包含 10 个数字，结尾始终包含 4 个单词组，那么您可以简单地从仅在空格 ( `\s+`) 上拆分的分隔符开始，然后在 10 次调用后`nextInt()`切换到拆分的分隔符在逗号和空格 ( `\s*,\s*`) 上。

就像是：

```
String input = "5 5 5 6 5 8 9 5 6 8 good, very good, excellent, good";
Scanner scanner = new Scanner(input).useDelimiter("\\s+");
int[] results = new int[14];
for (int i = 0; i < 10; ++i) {
    results[i] = scanner.nextInt();
}
scanner.useDelimiter("\\s*,\\s*");
scanner.skip("\\s*");
for (int i = 10; i < 14; ++i) {
    String wordPhrase = scanner.next();
    int wordValue;
    if ("average".equalsIgnoreCase(wordPhrase))
        wordValue = 1;
    else if ("good".equalsIgnoreCase(wordPhrase))
        wordValue = 2;
    else if ("very good".equalsIgnoreCase(wordPhrase))
        wordValue = 3;
    else if ("excellent".equalsIgnoreCase(wordPhrase))
        wordValue = 4;
    else
        wordValue = 0;
    results[i] = wordValue;
} 
```

[也可以通过使用零宽度环视断言](http://www.regular-expressions.info/lookaround.html)的单个分隔符正则表达式来执行此操作，但这对于简单的作业问题可能有点先进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:42:59.007

```
String[] str = expression.split("(,\\s+)|(\\s+)"); 
```

试试这个：

# .net - .NET Request.Browser 错误识别 Opera 版本

> ID：15007406
> 
> 赞同：1
> 
> 时间：2013-02-21T16:30:21.773
> 
> 标签：.net, asp.net-mvc, browser, opera

.Net MVC 3 中的以下代码在应返回“Opera 12”或“Opera 11”时返回“Opera 9”已经在多台机器上确认了这一点，Win 7 64 位和 XP 32 位。

```
public ActionResult TestBrowser()
{
    return Content(Request.Browser.Browser + " " + Request.Browser.MajorVersion);
} 
```

出于某种原因，Opera 的浏览器标签中有一个 9.8，实际版本号在末尾。
![Opera 帮助...关于](../Images/0bbe4b9447e78e12615cbc61d72d3ddf.png)

这是 Opera 的错误格式化浏览器标签，还是**HttpBrowserCapabilitiesBase**类的错误解析错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:50:41.527

我发现这解释了 Opera 的用户代理字符串以及为什么 Opera/9.80 现在硬编码在用户代理字符串中。

[http://my.opera.com/community/openweb/idopera/](http://my.opera.com/community/openweb/idopera/)

就像我在评论中所说的那样，最好查看功能检测，因为您可能很快就会遇到与 IE 10 相同的问题。

编辑：一种解决方案可能是自己解析用户代理字符串。

编辑 2：如果您想进行浏览器检测，可以使用 Modernizr Javascript 库（[http://modernizr.com/](http://modernizr.com/)），它做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:12:58.383

@Sashenka：正如您所指出的，需要 Opera 字符串的硬部分。如果其他浏览器出于类似原因不需要类似的想法，我不会感到惊讶。然而，特征检测只是另一种蠕虫，等待着你在蜂后。例如，IE 的每个版本都改变了它们处理事物的方式；即，您根本不能信任 M$。解析用户代理字符串并不是那么困难，几乎可以保证成功。综上所述，我想知道按照标准编写代码，根据需要包含 IE 绷带，让每个浏览器按照设计者的意图呈现页面是否更容易；好，坏或无所谓！:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:59:53.173

根据我的经验，正确的版本控制（假设它不是欺骗的用户代理字符串）始终是最后一个斜杠之后显示的版本。所以删除前面的所有内容，包括最后一个斜杠，其余的将是您当前的版本。

# sparql - 有没有办法使用变量而不用 SPARQL“select *”返回它？

> ID：15007408
> 
> 赞同：4
> 
> 时间：2013-02-21T16:30:33.253
> 
> 标签：sparql, semantic-web, blank-nodes

有没有办法在使用 SPARQL 时使用一种占位符变量而不返回它`SELECT *`？

例如：

```
SELECT * WHERE { 
   ?s dcterms:title ?title; 
      foaf:person ?name. 
   ?s2 :inProject ?s. 
} 
```

在我不想返回`?s`变量的地方，只返回`?title`、`?name`和`?s2`变量，同时离开`SELECT *`.

我知道我可以通过使用来限制选择结果`SELECT ?title ?name ...`，但我只是好奇是否有某种占位符变量的表示法或某种方式来管理它。

* * *

## 编辑：

我了解您可以在某些情况下使用空白节点来完成此操作，例如：

```
SELECT * WHERE { 
   _:s dcterms:title ?title; 
       foaf:person ?name. 
   ?s2 :inProject _:s. 
} 
```

但是，由于空白节点不能跨基本图形模式使用，这不会引起问题吗？例如，这在这种情况下会中断：

```
SELECT * WHERE { 
   _:s dcterms:title ?title; 
       foaf:person ?name. 
   OPTIONAL { ?s2 :inProject _:s. }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:59:00.590

For variables scoped to a single pattern yes, use the blank node variable syntax as you demonstrated in your question

In the general case no, if you use a variable then `SELECT *` will return it.

One possible workaround is to use sub-queries where you do list variables and leave out the variables you don't want e.g.

```
SELECT * WHERE
{ 
  {
    SELECT ?title ?name ?s2 WHERE 
    {
      ?s dcterms:title ?title; 
      foaf:person ?name. 
      OPTIONAL{ ?s2 :inProject ?s. }
    }
  }
} 
```

But then I assume this is exactly what you are trying to avoid since you end up listing variables anyway.

# json - JSON 响应总是返回 true

> ID：15007409
> 
> 赞同：0
> 
> 时间：2013-02-21T16:30:34.657
> 
> 标签：json, codeigniter

我在解决我的回复时遇到问题，但我的回复总是正确的。我正在提交一份忘记密码的表格，我只有一个字段，那就是电子邮件。我根据电子邮件在数据库中检查记录，如果返回记录，我将 json 设置为 true，否则设置为 false。这是我的 Codeigniter 控制器的代码：

```
 public function checkEmail()
    {     
        // set the validation rules
        $this->form_validation->set_rules('checkemail', 'E-Mail', 'valid_email');
        $this->form_validation->set_error_delimiters('<br /><p class=jsdiserr>', '</p><br />');
        // if validation is passed
        if ($this->form_validation->run() != FALSE) 
        {
            $ids=array();
            $ids[0]=$this->db->where('email', $this->input->post('checkemail'));

            $query = $this->backOfficeUsersModel->get();

            if($query)
            {
                $data = array(
                    'userid'       => $query[0]['userid'],
                    'username'       => $query[0]['username'],
                    'password'       => $query[0]['password'],
                    'firstname'       => $query[0]['firstname'],
                    'lastname'       => $query[0]['lastname'],
                    'email'       => $query[0]['email']

                );           
                $currentUser = array();
                $currentUser = $this->session->set_userdata($data);

                echo json_encode(array("success" => "true"));
        } else {   

                echo json_encode(array("success" => "false"));
        }
        //  form validation has failed 
        } else {     
            $errorMessage = "Wrong email!";
        }
    }   // end of function checkEmail 
```

现在，当我检查我的 javascript 文件中的结果时，我总是正确的。这是代码：

```
 $("#formSendPassword").submit(function(e){     
       e.preventDefault();

        var email = $(this).find("#checkemail").val();   
        var obj = {email: email};
        var url = $(this).attr("action");
        $.post(url, obj, function(r){
            if(r.success == "true") {
              console.log(r.success);
              $('#forgotPasswordForm').hide();
              $('#successMailMessage').fadeIn()
            } else {
              $('#forgotPasswordForm').hide();
              $('#errorMailMessage').fadeIn()
            }  
        }, 'json')
    }) 
```

任何人都可以帮我解决这个问题吗？

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:15:32.113

首先修改PHP...

```
json_encode(array("success" => "true")); 
```

到

```
json_encode(array("success" => true)); 
```

并且

```
json_encode(array("success" => "false")); 
```

到

```
json_encode(array("success" => false)); 
```

然后通过更改...修改JS如下

```
if(r.success == "true") { 
```

到...

```
if(r.success === true) { 
```

看看你如何从那里开始！

* * *

编辑：与 OP 联络后，我们得出结论，实际问题是 JS 发布数据的方式。

```
var obj = {email: email}; 
```

本来应该...

```
var obj = {checkemail: email}; 
```

PHP 还有一些与问题无关但现已修复的特定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:31:54.713

```
if ($this->form_validation->run() != FALSE) 
```

应该

```
if ($this->form_validation->run() !== FALSE) 
```

或者干脆

```
if (!$this->form_validation->run()) 
```

是检查错误的最佳方法...！= 可能并不总是如您所愿！

您需要在 JS 中解析 JSON：`myObj = $.parseJSON(r);`

然后使用`myObj.success`

# c# - C# 中的 Winform 停止显示 unicode 汉字

> ID：15007411
> 
> 赞同：0
> 
> 时间：2013-02-21T16:30:48.063
> 
> 标签：c#, winforms, unicode, fonts

我在 Visual Studio 2010 C# Winform 中有一个奇怪的 Unicode 字符显示行为。我正在使用 Windows 7 x64。出于某种原因，我能够在代码中执行类似的操作，并在按下按钮时让字符正确显示。字体是默认的 Microsoft Sans Serif。

```
 private void button1_Click(object sender, EventArgs e)
  {
    button1.Text = "Initialize System 初始化系统";
  } 
```

但是，在我关闭项目并重新打开它之后，按钮现在只显示 2 个方块，就好像缺少字符一样。我不明白会发生什么变化以及为什么它第一次起作用。

一些帖子建议使用 MS Gothic 作为控件，但由于某些原因，我什至无法在属性窗口中选择它。自从我签入控制面板-> 字体以来，字体就在我的系统中。MS Gothic 在那里。

是否有一些设置可以更改 winform 中的字体设置以允许 MS Gothic 字体？

我现在可以让它工作的唯一方法是覆盖按钮的绘制事件，然后在那里进行渲染。不过，这在像 DataGrid 这样的组件上更难做到。这是适用于带有中文字符的按钮的代码：

```
private void _Paint(object sender, PaintEventArgs e)
{
  Button btn = (Button)sender;
  SolidBrush drawBrush = new SolidBrush(btn.ForeColor);
  StringFormat sf = new StringFormat { Alignment = StringAlignment.Center,
                                       LineAlignment = StringAlignment.Center };
  string text = "Initialize System 初始化系统";
  btnIntialize.Text = string.Empty;
  e.Graphics.DrawString(text, btn.Font, drawBrush, e.ClipRectangle, sf);
  drawBrush.Dispose();
  sf.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:16:56.667

由于您使用的是简体中文而不是日文，因此正确的字体是 SimSun 或 Ms Song。

Microsoft 有时会自动为您切换字体，例如，当您将初始化文本复制粘贴到 Word 中时，您会看到英文部分是用 Arial 等编写的，而中文文本会自动切换到 SimSun 或任何默认值电脑上的中文字体。我想这就是最初正确显示文本时发生的情况。然后，在保存项目时，它遇到了一个按钮标题不能使用两种不同字体的问题，因此它将按钮字体保存为 Microsoft Sans Serif，因此现在为您提供方形框。解决方法是使用 SimSun 或 Ms Song 作为按钮，因为这些字体可以显示英文和中文字符。如果您希望同一个按钮也显示德语或韩语等，您将遇到问题。如果是这样的话，

# mysql - MySQL密码中括号的使用

> ID：15007414
> 
> 赞同：3
> 
> 时间：2013-02-21T16:30:55.307
> 
> 标签：mysql, bash

我正在尝试使用 mysqldump 为我的数据库拍摄快照，但是 root 密码中有括号，这会导致我出现问题。据我所知，我可以用 [] 包围密码以使其正常工作，但我仍然遇到问题。

格式化这个的正确方法是什么？

```
mysqldump -u root -p[(pwdwithbrackets)] databasename > file.sql
-bash: syntax error near unexpected token `(' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T16:33:31.273

使用 shell 转义技术：

```
-p\(pwdwithbrackets\) 
```

... 或者：

```
'-p(pwdwithbrackets)' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T16:32:33.913

只需用引号括起来。

更好的是，不要将参数传递给`-p`并在出现提示时输入它。以任何方式暴露密码都是不可取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:40:05.640

无论如何，最好避免在命令行上以纯文本形式输入密码。

相反，您可以将它们放在用户的 MySQL 配置文件中：

```
$ cat > ~/.my.cnf
[client]
user = root
password = [(pwdwithbrackets)]
^D

$ mysqldump databasename > file.sql 
```

当密码包含方括号和括号时，我测试并确认这有效。

您还可以将选项放在任何其他文件中，然后使用它：

```
$ mysqldump --defaults-file=myconf.cfg database > file.sql 
```

# c++ - 如何递归访问父范围？

> ID：15007415
> 
> 赞同：0
> 
> 时间：2013-02-21T16:30:55.727
> 
> 标签：c++, scope

我试着做一个花哨的宏来获得一些调试信息：你当前所在的范围的名称！这可以通过例如断言来获取。我试图让它递归：

```
// Global namespace
struct ScopeDef{ static const char* GetName() {return "";} };
typedef ScopeDef ScopeDefParent;

// Macro to place into your namespace/scope
#define NG_SCOPEDEF(scopename) \
    struct ScopeDef { \
        static const char* GetName() {return scopename;} \
        typedef ScopeDefParent Parent; \
    }; \
    typedef ScopeDef ScopeDefParent; 
```

并像这样使用它：

```
// Recursive template for testing
template< class T > void PrintImpl() {
    PrintImpl< T::Parent >();
    printf("::%s", T::GetName() );
}
template<> void PrintImpl< ::ScopeDef >() {}
template< class T > void PrintS() { PrintImpl<T>(); printf("\n");}

// Lets try it:
namespace First {
    NG_SCOPEDEF( "First" );
    namespace Second {
        NG_SCOPEDEF( "Second" );
        static void AFun() {
            // This prints "::First::Second"
            PrintS<ScopeDef>();
        }
    }
    struct Third {
        NG_SCOPEDEF( "Third" );
        static void BFun() {
            // This is endless recursion
            PrintS<ScopeDef>();
        }
    };
} 
```

它在类范围内不起作用，因为定义的顺序无关紧要。

这不是一个好的解决方案。那么有没有办法以某种方式访问​​父范围？在常规代码中，我只会限定 ("::First::ScopeDef")，但这对于宏来说不算什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:58:04.360

您可以在 C++ 中执行类似的操作，在打开范围时放入宏，并在范围退出时让析构函数负责清理。这个例子会打印出完整的范围到stderr，这段代码的输出如下。

```
main
main::First
main::First::Second
main::First::Second::DummyClass::DummyFunction
main::First
main 
```

这是代码：

```
#include <stdio.h>

class NG_SCOPE_CLASS;

NG_SCOPE_CLASS* NG_SCOPE_END = 0;

class NG_SCOPE_CLASS
{
public: 
    NG_SCOPE_CLASS(const char* scope)
    {
        _scope = scope;
        _prev = NG_SCOPE_END;
        NG_SCOPE_END = this;
    }
    ~ NG_SCOPE_CLASS()
    {
        NG_SCOPE_END = _prev;
    }
    void PrintScope()
    {
        if(_prev)
        {
            _prev->PrintScope();
            fprintf(stderr, "::");
        }
        fprintf(stderr, "%s", _scope);
    }
private:
    NG_SCOPE_CLASS* _prev;
    const char* _scope;
};

#define NG_SCOPE_PRINT { if(NG_SCOPE_END) { NG_SCOPE_END->PrintScope(); fprintf(stderr, "\n"); } }
#define NG_SCOPE(X) NG_SCOPE_CLASS _NG_SCOPE_CLASS(X)

// THAT'S IT FOR THE DEFINITIONS ABOVE, BELOW IS JUST SOME SAMPLE CODE.

class DummyClass
{
public:
    void DummyFunction()
    {
        NG_SCOPE("DummyClass::DummyFunction");
        NG_SCOPE_PRINT;
    }
};

int main(int argc, const char* argv[])
{
    NG_SCOPE("main");
    NG_SCOPE_PRINT;
    {
        NG_SCOPE("First");
        NG_SCOPE_PRINT;
        {
            NG_SCOPE("Second");
            NG_SCOPE_PRINT;
            DummyClass theDummyInstance;
            theDummyInstance.DummyFunction();
        }
        NG_SCOPE_PRINT;
    }
    NG_SCOPE_PRINT;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T11:48:26.453

为了完整起见，我们的工作解决方案：

```
#if defined(_MSC_VER)
    // GCC solution below. Note MSVC gives warning about unused typedefs but can be suppressed.
    #define NG_SCOPEDEF(scopename) \
        struct ScopeDefTag { static const char* Name(){return (scopename);}; }; \
        typedef ::Scopes::Impl< ScopeDefTag, ScopeDef > ScopeDefHelper; \
        struct ScopeDef : ScopeDefHelper {}
#else
    // GCC seems to not look ahead.
    #define NG_SCOPEDEF(scopename) \
        struct ScopeDefTag { static const char* Name(){return (scopename);}; struct SDH : ::Scopes::Impl< ScopeDefTag, ScopeDef >{}; }; \
        struct ScopeDef : ScopeDefTag::SDH {}
#endif

namespace Scopes {
struct Chain {
    const char* const   m_Lit;
    const Chain* const  m_Prev;
    Chain(const char* lit, const Chain* prev) :m_Lit(lit), m_Prev(prev) {}
};

template< bool DMY = true >
struct RootScopeDef
{
    static const Chain chain;
    static const Chain* Get() { return &chain; }
};
// Being template just to have this in header:
template< bool DMY > const Chain RootScopeDef<DMY>::chain = Chain( "", 0 );

template< class TAG, class PARENT >
struct Impl {
    static const Chain chain;
    static const Chain* Get() { return &chain; }
    typedef PARENT Parent;
};

template< class TAG, class PARENT >
const Chain Impl<TAG, PARENT>::chain = Chain( TAG::Name(), &PARENT::chain );

} // namespace

// Global namespace
typedef Scopes::RootScopeDef<> ScopeDef; 
```

它基于编译器中的漏洞，不符合标准！MSVS 认为用作模板参数的 ScopeDef 不是下一个，因为它依赖于那个 typedef，所以它解析为父级，后面会被遮蔽。这也适用于将宏放置在模板中的情况，因为 MSVS 会延迟实例化它们。相反，GCC 似乎只是不向前看，而是将 SDH 的基础解析为正确的基础。MSVS 将在此处生成 m_Prev 引用的无限循环。

底线：这为您提供了一种打印命名空间和类以进行调试的好方法，但也可以用作模板专业化的类型！

# datetime - 批处理文件：仅获取文件时间戳日期和天数

> ID：15007417
> 
> 赞同：0
> 
> 时间：2013-02-21T16:30:59.513
> 
> 标签：datetime, batch-file

以下几行输出文件夹中某些文件的名称、分隔符和时间戳。

```
for /f "eol=: delims=" %%F in (
  'dir /b /a-d /one *.txt *.pdf *.doc* *.xls* *.msg 2^>nul'
) do echo %indent%%fileBullet% %%F%delimeter% %%~tF 
```

所以，产生这样的东西

```
Response.docx; 02/07/2013 12:13 PM 
```

我想删除时间戳的时间部分（仅限日期），然后是文件的天数。所以

```
Response.docx; 02/07/2013; 14 
```

我在网上找到了一些相当冗长的解决方案，其中包含十几行。有没有一个简短而甜蜜的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:41:06.420

这是更短更甜的东西。它不像你想的那么短小精悍，但至少不是 12 行代码。:)

```
for /f "eol=: delims=" %%F in (
  'dir /b /a-d /one *.txt *.pdf *.doc* *.xls* *.msg 2^>nul'
) do call :datediff "%indent%%fileBullet% %%F%delimeter%" %%~tF

goto :EOF

:datediff
echo wscript.echo DateDiff^("d", "%2", Date^(^)^)>"%temp%\dd.vbs"
set /P i="%~1 %2%delimeter% "<NUL
cscript /nologo "%temp%\dd.vbs"
del /q "%temp%\dd.vbs" 
```

# android - getIdentifier() 总是返回 0

> ID：15007419
> 
> 赞同：2
> 
> 时间：2013-02-21T16:31:13.540
> 
> 标签：android, android-resources

我正在尝试从 strings.xml 获取值为“Hello”的字符串的 ID，以执行以下操作：

```
getContext().getResources().getIdentifier("Hello", "string", getContext().getPackageName()); 
```

它返回 0。为什么返回 0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:35:51.047

因为您正在传递字符串*value*，而您应该传递字符串的*资源名称*。

查看方法签名：[`getIdentifier(String name, String defType, String defPackage)`](http://developer.android.com/reference/android/content/res/Resources.html).

当找不到资源时，`0`返回与您所经历的一致。

**编辑：**

1.  不鼓励使用`getIdentifier()`- 引用参考：

    > 注意：不鼓励使用此功能。按标识符检索资源比按名称检索资源效率更高。

2.  我不知道根据相关字符串的值获取字符串 ID 的直接方法。但是我已经看到了两种解决方法/黑客：

    1.  命名您希望对其执行查找的所有字符串，如下所示：例如`stringN`，`N`对于每个字符串，从 0 开始的整数递增。您最终会得到丑陋的名称，例如`string0`,`string1`等。然后您自己进行查找 - 您迭代`N`，创建字符串 ID: `stringN`，获取它的值并检查匹配。在我看来，这很丑陋。

    2.  使用[Typed Array](http://developer.android.com/guide/topics/resources/more-resources.html#TypedArray)资源并将所有字符串放在那里。它与方法 1 基本相同，但避免了创建令人讨厌的、污染性的资源名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T15:41:54.717

如果清单中的包名称不同，您将无法获得标识符，因为您的包名称不正确，为了动态获取资源的正确包名称，您应该使用：

```
String rPackageName = mContext.getResources().getResourcePackageName(R.some.wellKnownResource); 
```

'rPackageName' 是你应该传递给函数的包名

```
getIdentifier(String name, String defType, String defPackage) 
```

# ruby - 布尔值有什么特别之处？

> ID：15007420
> 
> 赞同：0
> 
> 时间：2013-02-21T16:31:16.610
> 
> 标签：ruby, boolean, naming-conventions

在 Ruby 中，有一个约定，方法名称以问号结尾，表示它的返回值是布尔值。为什么布尔值被认为如此特别？如果您知道方法的返回值是特别布尔值，有什么方便的吗？毕竟，在 Ruby 中，您可以将各种返回值（getter）方法插入到条件中，而无需关心它是否为布尔值。

我认为仅使用问号来表示布尔值是一种浪费。应该有更多有用的用途。我有很多用例，我想要一对 getter 和 setter 方法，setter 方法应该返回`self`，以便我可以在方法链中使用它。`get_foo`并将它们命名为`set_foo`看起来很麻烦。我不想遵循约定，而是想像这样命名一对 getter 和 setter 方法：

```
def foo?; @foo end
def foo v; @foo = v end 
```

其中的值`@foo`不是（必然）布尔值。（除了可能会批评打破惯例会混淆其他程序员），这样做有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:38:35.840

在方法名称中使用问号表示方法是谓词是一种惯例。AFAIK，这个谓词不需要（按照惯例）返回一个布尔值，这要归功于真/假值的简单规则。

> 除了可能会批评打破惯例会混淆其他程序员之外，这样做有什么问题吗？

让程序员同胞感到困惑和惊讶是不好的。鲁比不在乎。这只是一个约定。约定的存在是有原因的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T16:37:36.100

没有什么特别的，这只是一个约定。一个问题可以用“是”或“否”来回答，也可以用其他东西来回答，比如某人的名字。

通过在带有问号的方法上返回布尔值，它表明它是一个显式行为。

如果您的答案是“是”或“否”，那么您的代码读者很容易识别您的方法的行为，甚至无需查看实现。另一方面，如果你让它返回任何其他类型，那么读者如果不阅读你的类和方法定义就更难理解你的代码。

布尔值只有两种可能的答案。如果返回值不是布尔值，它可以是任何东西，这根本没有帮助。您仍然需要查看方法实现。您应该始终进一步了解某些代码，但是使用此约定会使其更简单。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T16:45:46.417

您*可以*将任何内容放入流控制结构中，但语义布尔值是合适的。真实人类语言中的“如果”通常采用布尔值，许多编程语言中的构造也是如此。Ruby 喜欢使事情变得方便，并为语言中的所有内容分配一个“真实性”值，这会影响它在布尔上下文中的行为方式。

换句话说，布尔值是唯一几乎专门用于流控制的东西，所以约定是让它们看起来“正确”用于流控制结构。这是他们的原生环境。

> （除了可能会批评打破惯例会混淆其他程序员），这样做有什么问题吗？

在同样的意义上，以 1920 年代喜剧演员的名字命名所有变量并没有错，不，这没有错。但是，就像以 1920 年代喜剧演员的名字命名所有变量一样，这不是一个好主意。在我所知道的任何语言——人类或计算机——中，问号都没有表示“获取”的意思。因此，您的代码语义不符合该约定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T18:12:04.220

这个问题和答案归结为“POLS”AKA“[最小惊喜原则](http://en.wikipedia.org/wiki/Principle_of_least_surprise)”。

方法名称可以是由下划线分隔的字母和数字的随机选择，用 '!'、'?' 如果我们选择这样做，'=' 会洒在它们身上。它们可以由代码在运行时随机创建，只要其余代码使用相同的字符排列，程序就会运行，Ruby 会很高兴。

我们人类，程序员，确定所用方法的名称，以表示某事、一个特征或一个动作。尝试使用随机命名的方法会导致疯狂，或者至少是一个非常难以维护的程序。因此，相反，我们尝试为事物使用合理的名称。有时它们是动词或形容词，有时它们更具描述性，因为该方法做了几件事。

作为该命名的一部分，有时我们希望提供有关方法行为的额外提示。按照 Ruby 的约定，我们使用“！” 警告编码人员该方法改变了某些东西或具有破坏​​性。“=”表示该方法接受一个参数并将其分配给接收者/对象。这是一个 setter 方法，在许多其他语言中，使用“set_flag...”或“set_value...”作为名称是惯用的。这只是该语言的约定，该语言的开发人员遵循。

我们用 ”？” 在 Ruby 中问一个关于对象的问题，关于该对象是否正确。我们可以说“is_true？” 还是“真的？” 并表明我们正在测试某件事是否属实。如果它是真或假，它是一个布尔响应，所以我们返回一个真/假值。

# asp.net - 如何从后面的代码中设置 html 表格标题？ASP.NET

> ID：15007421
> 
> 赞同：0
> 
> 时间：2013-02-21T16:31:17.143
> 
> 标签：asp.net

我的 aspx 页面中有一个表格：

```
<table id="tbl" runat="server">
</table> 
```

我需要在后面的代码中设置表格标题，使其呈现如下：

```
<table id="tbl" runat="server">
   <caption>Monthly savings</caption>
</table> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:39:55.000

这不可能。控件`HtmlTable`只能包含`<tr>`它们，其他所有内容都将被删除。这是[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable.aspx)的完整说明：

> 不支持复杂的表模型。您不能拥有带有嵌套`<caption>, <col>, <colgroup>, <tbody>, <thead>, or <tfoot>`元素的 HtmlTable 控件。这些元素会在没有警告的情况下被删除，并且不会出现在输出 HTML 中。如果您尝试以编程方式将这些表模型元素添加到 HtmlTable 控件的 Control.Controls 集合中，则会引发异常。

您的选择是切换到`asp:Table`控制，或切换回纯标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:40:30.500

Brad M 之前的响应几乎是正确的，您必须添加一个 runat="server" 属性、一个 ID 属性并将其设置为您认为合适的某个值，然后在服务器端代码：

一个很大的警告思想，你需要在表格元素之前放置标题，里面是不可能的

```
idYouGave.InnerText = "Monthly savings"; 
```

由于您不能直接在 内部使用，请执行以下操作来实现您想要的：

```
<tr>
  <th colspan="numOfCols"><caption>...</caption></th>
</tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:34:54.750

只需将 runat="server" 属性添加到您的标题元素，并给它一个 ID。然后在后面的代码中将其称为 caption.InnerText = "Monthly Savings";

# c# - 在文本框中输入时，如何检查文本框中的文本是否相同？

> ID：15007423
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:31:24.617
> 
> 标签：c#

我有这个表格：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace GatherLinks
{
    public partial class ChangeLink : Form
    {

        public ChangeLink()
        {
            InitializeComponent();

        }

        public string getText()
        {
            return textBox1.Text;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (!string.IsNullOrEmpty(textBox1.Text))
            {
                DialogResult = DialogResult.OK;
            }
            else
            {

            }

        }

        private void ChangeLink_Load(object sender, EventArgs e)
        {
            this.AcceptButton = button1;
        } 

    }
} 
```

Form1中的这段代码：

```
public void KeysValuesUpdate()
        {
            DialogResult dr = DialogResult.None;
            using (var w = new StreamWriter(keywords_path_file))
            {

                crawlLocaly1 = new CrawlLocaly(this);
                crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
                if (FormIsClosing != true)
                {
                    dr = crawlLocaly1.ShowDialog(this);
                }
                if (dr == DialogResult.OK)
                {
                    if (LocalyKeyWords.ContainsKey(mainUrl))
                    {
                        LocalyKeyWords[mainUrl].Clear();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    else
                    {
                        LocalyKeyWords[mainUrl] = new List<string>();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    Write(w);
                    ClearListBox();
                }
                if (dr == DialogResult.Cancel)
                {
                    Write(w);
                }
                if (dr == DialogResult.None)
                {
                    Write(w);
                }
            }
        } 
```

这个 KeysValuesUpdate() 函数在这里被调用：

```
private void button2_Click(object sender, EventArgs e)
        {
            cl = new ChangeLink();
            cl.StartPosition = FormStartPosition.CenterParent;
            DialogResult dr = cl.ShowDialog(this);
            if (dr == DialogResult.Cancel)
            {
                cl.Close();
            }
            else if (dr == DialogResult.OK)
            {
                label4.Text = cl.getText();
                mainUrl = cl.getText();
                if (!LocalyKeyWords.ContainsKey(mainUrl))
                {
                    newUrl = true;
                    KeysValuesUpdate();
                }
                else
                {
                    newUrl = false;
                    KeysValuesUpdate();
                }
                OptionsDB.set_changeWebSite(cl.getText());
                cl.Close();
                listBox1.SelectedIndex = listBox1.Items.Count - 1;
            }
        } 
```

当我单击 button2 时，它会打开带有文本框的新表单，然后在里面我可以输入文本。然后我检查里面的文本是否已经存在，那么 newUrl 是 false 还是 true。然后，当我单击新表单中的确定按钮时，它会检查我输入的文本是否包含/存在。

我希望当用户在输入的同时在文本框中键入内容时，如果它是包含/存在键，然后将文本框中的文本着色为红色，用户一直在输入并且文本不是包含/EXist，将其颜色变回黑色但每次如果文本框包含/存在中的文本已经将其着色为红色，并且仅当它匹配大小写而不是文本在其他文本内时：

这是黑色的：例如：Danny hello all

但是如果我只在文本框中输入：你好，那么你好这个词将是红色的，那么如果我在你好之后继续输入，那么文本框中的所有文本都是黑色的，如果我删除文本并只保留单词你好，那么它将是又红了。

当我在文本框中输入文本时，这应该是根据上面的代码和实时的。

使用 textBox1 文本更改事件更新代码的新表单再次：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace GatherLinks
{
    public partial class ChangeLink : Form
    {
        Form1 f1;

        public ChangeLink(Form1 f)
        {
            InitializeComponent();

            f1 = f;
        }

        public string getText()
        {
            return textBox1.Text;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (!string.IsNullOrEmpty(textBox1.Text))
            {
                DialogResult = DialogResult.OK;
            }
            else
            {

            }

        }

        private void ChangeLink_Load(object sender, EventArgs e)
        {
            this.AcceptButton = button1;
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            if (f1.mainUrl.Contains(textBox1.Text))
            {
                textBox1.ForeColor = Color.Red;
            }
            else
                textBox1.ForeColor = Color.Black;
        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:09:24.457

```
private void textBox_TextChanged(object sender, EventArgs e)
        {
            if (Regex.IsMatch(yourtext, @"\b" + textBox.Text + @"\b"))
            {
                textBox.ForeColor = Color.Red;
            }
            else
                textBox.ForeColor = Color.Black;
        } 
```

将包含变量名称的数据放在`yourtext`.

我已经编辑了答案。正如您要求的那样，它与整个单词完美匹配。要使用`Regex`类，请包含`System.Text.RegularExpressions`命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:55:33.130

您只需定义一个方法即可实现 textBox1 **TextChanged事件处理程序**

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    var textBox = sender as TextBox;
    String text = textBox.Text;
    if (SomeCheck(text))
    {
        textBox.ForeColor = Color.Red;
    }
    else
    {
        textBox.ForeColor = Color.Black;
    }
} 
```

并将方法分配给`textBox1_TextChanged`文本`OnTextChanged`框的属性

# mysql - 从 MySQL Workbench 复制到 Excel

> ID：15007424
> 
> 赞同：1
> 
> 时间：2013-02-21T16:31:31.960
> 
> 标签：mysql, excel, mysql-workbench

我必须构建报告，并且需要执行一些数据库查询，这些查询会返回一堆结果。

有没有办法可以复制 1+ 行/列并将它们复制到 Excel 工作表中？excel表格以特定方式格式化，数据需要以某种方式放置在那里，那么如何从mysql工作台复制并粘贴到excel中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-17T16:20:43.517

1.  转到工作台并选择您需要的行。复制它们。
2.  在您的电脑上创建一个新文件，将数据粘贴到其中。将其另存为 .csv
3.  在 MS Excel 中打开新创建的 csv 文件。数据将被很好地格式化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-18T14:28:56.257

我能想出的最佳答案是使用不同的程序：

[http://www.heidisql.com/](http://www.heidisql.com/)

到目前为止，这个程序效果很好！我也比 MySQL Workbench 更喜欢它！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-02T09:54:27.727

在我的要求中，我必须复制列名、数据类型及其约束。我执行了命令

```
desc tableName 
```

其中 tableName 是必需的表名。在 heidisql 中执行查询你必须按“F9”键。它将显示表格的整个结构。现在要在excel中复制粘贴，您必须右键单击结果然后您才能看到

[![在此处输入图像描述](../Images/93e526c4d185c42748246ebd89b2dfee.png)](https://i.stack.imgur.com/QE8Y1.png)

“导出网格行”

右键单击倒数第三个选项。然后选择单选按钮文件，然后选择文件名。无需对编码部分进行任何更改，您可以从输出格式中进行选择，例如 excel csv、html 表格等，然后就可以了。去打开你的文件，然后完整的结果将被复制到 Excel 表中。谢谢

# html - 如何将带有'transform：scale'的iframe放在左侧

> ID：15007426
> 
> 赞同：0
> 
> 时间：2013-02-21T16:31:34.863
> 
> 标签：html, css, iframe

所以我有这个 iframe 并且没有任何 'transform:scale' css 它显示在 div 的左上角但是在我添加之后

```
-webkit-transform:scale(0.6,1);
margin-left:0.0em; 
```

到它的 css 属性它会自动将它自己缩放到中心，我真的不希望它也这样做。

这是我的 jsfiddle 链接：[JS Fiddle 链接](http://jsfiddle.net/686rN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:44:05.607

您需要提供一个[transform-origin](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)，如下所示：

```
-webkit-transform-origin:0 0;
-webkit-transform:scale(0.6,1); 
```

默认值为`50% 50%`，这就是为什么您会看到`iframe`出现移动到您的`div`.

[这是一个更新的 fiddle](http://jsfiddle.net/cherryflavourpez/fzWW3/)，包括您应该包括的所有其他前缀版本。

# linux - 如何避免警告“GC警告：限制标记线程数”

> ID：15007428
> 
> 赞同：0
> 
> 时间：2013-02-21T16:31:38.783
> 
> 标签：linux, mono, warnings

我正在使用 linux 并在运行我的二进制文件时收到警告“GC 警告：限制标记线程数”。在使用谷歌时，我发现它也是其他人面临的问题，但我可以找到一种方法来阻止这个警告。你能告诉一个出路吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:24:26.580

[http://lists.ximian.com/pipermail/mono-bugs/2010-August/103261.html](http://lists.ximian.com/pipermail/mono-bugs/2010-August/103261.html)

> 该警告是无害的，如果您不想看到它，请将环境变量 GC_MARKERS 定义为 4 之类的值。

# perl - 从脚本使用的包中访问属于脚本的方法

> ID：15007431
> 
> 赞同：1
> 
> 时间：2013-02-21T16:31:53.583
> 
> 标签：perl, packages

如果有人能想出一种更雄辩的方式来表达我的标题，请随时提供建议……我觉得好像有一个词可以表达我正在尝试做的事情，但它正在逃避我。

无论如何，我已经制作了一堆 Perl 脚本，每个脚本都有一个“usage()”方法，基本上描述了如何使用相应的脚本。现在，我还有一个包，这些脚本（Flags.pm）中的每一个都使用它，它解析命令行参数以供脚本使用。我想要做的是拥有它，以便在 Flags.pm (getArguments()) 中调用的方法将尝试确定是否设置了特定标志（例如 -help），然后从该方法中调用父脚本“用法（）“ 方法。

这个想法是避免在每个脚本中调用“usage()”的代码，因为每个脚本都会在相同的条件下调用它。我希望 Flags.pm 中的 getArguments() 来处理它。基本上，我只是想实现这一目标......

**标志.pm**

```
package Flags;

sub getArguments() {
   usage();
}

1; 
```

**MyScript.pl**

```
use Flags;

sub usage() {
   print "Hello World";
}

$args=Flags->getArguments(); 
```

*TL;DR：为脚本导入 Perl 包。想要从导入包的方法中调用在脚本中找到的方法。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:04:55.307

我可能会选择传递对`getArguments`打印使用信息的 sub 的引用：

```
package Flags;

use strict; use warnings;

sub getArguments {
    my $usage = shift;
    return $usage->(__PACKAGE__);
}

package main;

use strict; use warnings;

sub usage {
    my $pkg = shift;
    return sprintf "%s: Usage information", $pkg;
}

print Flags::getArguments(\&usage), "\n"; 
```

输出：

```
C:\temp> uu
标志：使用信息
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:38:55.283

根据我从您的三段文本中了解到的情况，您想要的是您的 Flags.pm 子例程调用`usage`主脚本的子例程，无论该子例程是什么。为什么不这样做：

```
sub getArguments() {
   main::usage();
} 
```

`main`是顶级包，即您的主脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:59:01.007

不是一个正确的方法。

```
package Flags;

our $USAGE;

sub set_usage {
   $USAGE = $_[0];
}

sub usage {
   print 'No usage'
      unless defined $USAGE;
   print $USAGE;
}

sub getArguments() {
   usage();
}

1; 
```

和.pl

```
use Flags;

Flags->set_usage('Usage here');

$args=Flags->getArguments(); 
```

如果你想使用子

```
package Flags;

our $USAGE;

sub set_usage {
   $USAGE = $_[0];
}

sub usage {
   print 'No usage'
      unless defined $USAGE;
   &$USAGE;
}

sub getArguments() {
   usage();
}

1; 
```

和.pl

```
use Flags;

my $usage_sub = sub {
    print 'Hello World!!!';
}

Flags->set_usage($usage_sub);

$args=Flags->getArguments(); 
```

# asp.net-mvc-3 - 如何保证长时间的操作完成

> ID：15007432
> 
> 赞同：0
> 
> 时间：2013-02-21T16:31:53.583
> 
> 标签：asp.net-mvc-3

通常，帐单应该在预定日期在后台执行（我还没有弄清楚如何做到这一点，但这是另一个话题）。

但有时，用户可能希望手动执行计费。单击后，无论用户端发生什么（例如关闭浏览器、机器死机、网络中断等），我都想确保操作完成。

我很确定 db.SaveChanges() 将其数据库操作包装在事务中，所以从服务器的角度来看，我相信整个事情要么完成要么失败，没有部分影响。

但是 POST 和 db.SaveChanges() 之间的所有工作呢？有没有办法确保用户不会无意或故意阻止它完成？

我想这个问题的一个必然结果是正在运行的异步控制器或正在运行`Task`或`Thread`用户断开连接会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:37:46.073

我之前的项目实际上是在 MVC 中做一个计费系统。`Task`我清楚地记得测试如果我使用然后快速退出该站点会发生什么。它很好地完成了所有计算，在 SQL Server 中运行了一个存储过程，并在完成后给我发送了一封电子邮件。

因此，回答您的问题：如果您将操作包装在 a 中`Task`，它应该无论如何都可以毫无问题地完成。

# c# - 如何使用 c# 处理 word 文档

> ID：15007435
> 
> 赞同：0
> 
> 时间：2013-02-21T16:32:08.530
> 
> 标签：c#, ms-word, interop

我想做下一个，但不知道怎么做，请帮助我。

首先，我通过以下方式打开 Word 文档

```
wordApp.Documents.Open; 
```

然后我尝试用另一个名称保存它以使用

```
aDoc.SaveAs(ref saveas...); 
```

现在我想逐字浏览 savedAs 文档。我需要逐字逐句逐字逐句逐字逐句阅读。

所以，实际上我想得到这个词，检查它的一些规则，然后逐个字母地阅读那个词并对这些字母进行更改（音译），所以最后我会得到音译文件。我试图使用 for loop insdie for loop 编写此代码，但我不知道如何逐字循环整个文档......同时重写新形式的单词而不是当前使用的单词.

请帮助我使用正确的 Interop.Word 命令来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:45:06.523

本文解释了如何从 word doc 中检索单词

[http://zirmandli.wordpress.com/2007/07/04/read-word-doc-using-c/](http://zirmandli.wordpress.com/2007/07/04/read-word-doc-using-c/)

通过调用以下方法检索文档：

```
Word.Document doc = wordApp.Documents.Open(ref file, ref nullobj, ref nullobj,
                                      ref nullobj, ref nullobj, ref nullobj,
                                      ref nullobj, ref nullobj, ref nullobj,
                                      ref nullobj, ref nullobj, ref nullobj); 
```

# android - Selenium、WebDriver、HtmlUnit 等价于 android

> ID：15007445
> 
> 赞同：1
> 
> 时间：2013-02-21T16:32:45.427
> 
> 标签：android, selenium, webdriver, html-parsing, htmlunit

这就是我正在尝试做的事情： 1\. 我有一台平板电脑，我想连接到大学的 wi-fi 以访问互联网 2\. 除非你打开浏览器，否则无法连接到互联网 3\. 你会自动重定向到大学用户名密码页面 4\. 你输入你的大学证书然后繁荣 => 你有互联网

问题？？？我讨厌每天都输入我的密码，虽然 chrome for android 可以存储它，但我仍然需要打开浏览器等等等等。

解决方案：使用 Selenium、WebDriver、HtmlUnit 或某种无头浏览器在后台以编程方式填写登录表单。

问题 2：这些无头浏览器无法在 Android 上运行（或者我无法让它们运行）

有谁知道一个可以在 Android 设备上运行的简单无头浏览器，它可以填写一个简单的表格并提交它？我想做的事情还有其他选择吗？

提前感谢您的帮助。

一些相关问题：[HttpUnit/HtmlUnit 等效于 android](https://stackoverflow.com/questions/9721544/httpunit-htmlunit-equivalent-for-android)，[Android：填写表单数据和提取 HTML](https://stackoverflow.com/questions/8997546/android-fill-form-data-and-extract-html)，[Html Parsing in android](https://stackoverflow.com/questions/4591029/html-parsing-in-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:29:16.633

登录后，大学如何验证您的身份？例如，它是否基于在您的网络浏览器中设置 cookie？如果您在第一个 Web 浏览器中通过身份验证后使用另一个 Web 浏览器登录会发生什么？

一旦你知道它如何验证你，你应该能够设计一个合适的方法。例如，如果它是设备范围的身份验证，例如基于您的 mac 地址，那么也许您可以编写一个嵌入 WebView 的简单 Android 应用程序，和/或用 Java 编写普通的旧 HTTP 请求/响应编程。但是，如果它是基于浏览器的，那么您需要（自动）使用您要使用的浏览器登录，或者找到一种方法将相关的 cookie 插入您要用于 Web 浏览的浏览器中。

# android - 隐藏 ActionBarSherlock 标题并仅显示徽标

> ID：15007452
> 
> 赞同：6
> 
> 时间：2013-02-21T16:33:00.390
> 
> 标签：android, android-actionbar, actionbarsherlock

我需要在 ActionBarSherlock 上隐藏标题并仅显示徽标。

当我使用`actionBar.setDisplayShowTitleEnabled(false);`图标时也隐藏。

**更新：**谢谢你们，但我找到了解决方案。问题可能已关闭

在**style.xml 中**：

```
<style name="FooBar" parent="Theme.Sherlock.Light">
         <item name="android:actionBarStyle">@style/FooBar.ActionBar</item>
         <item name="actionBarStyle">@style/FooBar.ActionBar</item>
    </style>

    <style name="FooBar.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
        <item name="android:displayOptions">showHome|useLogo</item>
        <item name="displayOptions">showHome|useLogo</item>
    </style> 
```

在**AndroidManifest.xml**中：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/FooBar"
    android:allowBackup="true"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:36:59.250

做

```
actionbar.setTitle(""); 
```

工作？

# java - 不能从静态上下文引用非静态方法

> ID：15007456
> 
> 赞同：1
> 
> 时间：2013-02-21T16:33:14.613
> 
> 标签：java, switch-statement

***我的班级看起来像这样：***

```
public class Month
 {
private int numOfMonth;
private int monthNum;

public int monthNum()
{
    return monthNum = 1;
}

public void setMonthNum(int monthNum){

    switch (monthNum)
    {
    case 1: System.out.println("January"); break;
    case 2: System.out.println("February");break;
    case 3: System.out.println("March");break;
    case 4: System.out.println("April");break;
    case 5: System.out.println("May");break;
    case 6: System.out.println("June");break;
    case 7: System.out.println("July");break;
    case 8: System.out.println("August");break;
    case 9: System.out.println("September");break;
    case 10: System.out.println("October");break;
    case 11: System.out.println("November");break;
    case 12: System.out.println("December");break;
    }

}

    public String getName() 
    {
        return "" + monthNum;
    }

} 
```

***我的驱动如下：***

```
import java.util.Scanner;

public class monthDriver
{
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);

    System.out.println("Enter month number: ");
    int monthNum = in.nextInt();

    System.out.println("Month number " + monthNum + " is the month of " + Month.getName());

}
 } 
```

我得到编译时错误：

```
"monthDriver.java:12: error: non-static method getName() cannot be referenced from a static context
    System.out.println("Month number " + monthNum + " is the month of " + Month.getName());1 error" 
```

请记住，我是一名学生，学术诚信对我很重要，为什么我会收到这样的错误？另外，以后有什么建议可以提高我的编码效率吗？感谢您所有的时间和精力。非常**感谢**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:40:25.573

方法一：

您可以通过像这样放置静态来解决您的问题：

```
public static String getName() 
    {
        return "" + monthNum;
    } 
```

你打电话应该是这样的

```
System.out.println("Month number " + monthNum + " is the month of " + Month.getName()); 
```

方法二：

创建对象`class Month`然后：

```
public static void main(String[] args)
{
    Scanner in = new Scanner(System.in);

    System.out.println("Enter month number: ");
    int monthNum = in.nextInt();
    Month obj=new Month();
    System.out.println("Month number " + monthNum + " is the month of " + obj.getName());

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:41:02.270

对于初学者来说，如果您想访问一个类的方法（在您的情况下为 Month）而不首先实例化该类本身，而是直接使用 Month.getName()，那么该方法必须定义为静态的。

关于什么时候在一个类中使用静态或非静态方法，你可以在网上找到这么多的文章来填满一个库:-)

关于上面代码的另一个小注释。您可能对使用枚举感兴趣，而不是使用开关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:45:52.700

你的代码看起来有点原始和混乱。我建议使用：

```
 public static String getMonthNameForNum(int monthNum) {
    switch (monthNum) {
        case 1:
            return "January";
        case 2:
            return "February";
        case 3:
            return "March";
        case 4:
            return "April";
        case 5:
            return "May";
        case 6:
            return "June";
        case 7:
            return "July";
        case 8:
            return "August";
        case 9:
            return "September";
        case 10:
            return "October";
        case 11:
            return "November";
        case 12:
            return "December";
        default:
            return "UNKNOWN";
    }
} 
```

然后像这样使用它：

```
 System.out.println("Month number " + monthNum + " is the month of " + Month.getMonthNameForNum(monthNum)); 
```

PS 当然，这应该只是教育代码，在现实生活中你会使用标准日历等来获取月份名称！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T17:12:15.590

我不会更正您的程序或增强您的程序，但您需要了解基本概念以及您做错了什么。

有时您想创建对所有类实例（即对象）通用的变量。同样，您还将定义静态方法

从此[链接](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)阅读。我只是在这里粘贴片段。

Java 编程语言支持静态方法和静态变量。声明中带有 static 修饰符的静态方法，****应该使用类名调用，而不需要创建类的实例，如**

```
 ClassName.methodName(args) 
```

并非所有实例和类变量和方法的组合都是允许的：

实例方法可以直接访问实例变量和实例方法。

实例方法可以直接访问类变量和类方法。

类方法可以直接访问类变量和类方法。

**类方法不能直接访问实例变量或实例方法——它们必须使用对象引用。此外，类方法不能使用 this 关键字，因为没有实例可供 this 引用。**

在您的情况下，最后一条规则适用，因为这是实例方法，因此您不能调用 Month.setMonthnum(bla)

```
 public void setMonthNum(int monthNum) 
```

# html - Magento customer.xml 标签

> ID：15007457
> 
> 赞同：0
> 
> 时间：2013-02-21T16:33:15.143
> 
> 标签：html, xml, magento, label

我正在 Magento 中编辑我的 customer.xml 文件。我的目标是我想设置我的帐户和我的购物车等的样式，以便第一个单词是正常的字体粗细，第二个单词是粗体，我显然知道如何设置这个样式但无法让它工作。我尝试过使用 span 和 strong ，它只返回 'Array' 而不是 My Account。

![我正在努力实现的示例](../Images/e9812c96bf9e7bb4221ba33dfc9f82db.png)

xml文件中有问题的代码是这样的：

```
<label>My Account</label>
<label>My <strong>Account</strong></label>
<label>My <span>Account</span></label> 
```

最后两个中的任何一个都返回“ARRAY”

任何人都知道如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:36:50.010

尝试在 CDATA 标记内添加文本以强制将文本视为字符数据。

```
<label><![CDATA[My <strong>Account</strong>]]></label> 
```

不过，我不确定这将如何在 Magento 中工作。

您可以尝试修改 links.phtml 模板来满足您的需要。

模板/页面/html/top.links.phtml

# java - 有关使用 crawler4j 库在 Java Web crwaler 中进行模式匹配的一些信息

> ID：15007462
> 
> 赞同：0
> 
> 时间：2013-02-21T16:33:22.133
> 
> 标签：java, pattern-matching, web-crawler, crawler4j

我想使用 Java 实现一个非常简单的网络爬虫，我找到了这个库： crawler4j: [http://code.google.com/p/crawler4j/](http://code.google.com/p/crawler4j/)

我需要一个执行以下操作的爬虫：

从一个 URL（由我指定）开始并*识别当前页面中是否有特定单词*，例如自己的名称或公司名称（这个单词也是由我指定的）

如果找到这个词，当前页面的 URL 必须保存在数据库中。

所以，没有语义分析，只有句法分析（爬虫必须尝试将网页内容与我指定的某些令牌匹配）

我会知道这个令牌研究（查找当前页面中是否包含一个单词）是由`WebCrawler`crawler4j 的抽象类实现的功能还是我必须自己实现它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:29:19.753

正如 user1887511 所指出的，实现起来非常简单。改编自[这里](https://code.google.com/p/crawler4j/)。

```
 static String wordToFind = "...";
  public void visit(Page page) {          
            if (page.getParseData() instanceof HtmlParseData) {
                    HtmlParseData htmlParseData = (HtmlParseData) page.getParseData();
                    String text = htmlParseData.getText();
                    if(text.indexOf(wordToFind)!=-1)
                            saveToDB(page.getWebURL().getURL()):
            }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:51:37.207

你必须自己实现它，代码中的起点是 visit() 子类/方法，当访问页面时调用它......并解析给你，然后你可以对页面做任何你想做的事情 - text ...例如使用正则表达式模式。

# apache - 具有自定义算法的 Apache Giraph 进程图

> ID：15007464
> 
> 赞同：0
> 
> 时间：2013-02-21T16:33:24.110
> 
> 标签：apache, graph, frameworks, jar, dependencies

我有一个自定义算法来处理接受 txt 文件作为输入的图形。因为它是一个大规模图，所以我想在 apache giraph 框架中实现它。我做了很多研究，但我仍然不确定我是否走在正确的道路上。

我正在读取一个包含图形数据的 .csv 文件并使用解析器将其转换为 txt 文件并上传到 hadoop 的 HDFS 文件系统。

我已经阅读了 apache 快速入门指南中的 SimpleShortestPathsVertex 示例，我可以看到它使用 jar-with-dependencies jar 文件处理来自 HDFS 中的文件的数据。

我的问题是我还不明白如何在 apache giraph 框架中添加我的算法并启动图形的过程。我可以使用 eclipse 将我的算法添加到 apache 框架并从那里修改它还是有任何其他方式？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:28:04.973

看看这里： [https ://cwiki.apache.org/confluence/display/GIRAPH/Shortest+Paths+Example](https://cwiki.apache.org/confluence/display/GIRAPH/Shortest+Paths+Example)

你可以在哪里运行这个例子？如是。熟悉 hadoop 的不同可写格式！否则很难将这些用于您的算法。

所有关于图的计算都在 compute() 函数中完成。（如果您更高级，请查看 workerContext preSuperstep 和 Aggregators！）您可以更改示例，但是一旦使用其他数据类型，您就必须更改 VertexReader 和 VertexWriter。

如果您有特定的算法，请确定计算所需的内容并指定输入文件的布局。然后调整您的 VertexReader 和 -Writer。然后最后开始实现你的 compute() 函数！

当然你可以使用eclipse！只需引用 Giraph jar（对我来说它是“giraph-0.1-jar-with-dependencies.jar”）并开始编码。您只需要一个特定于您的算法的这些文件的实例：

*   YourGiraphJob（启动 Hadoop/Giraph 作业的文件）
*   YourVertex（指定在每个顶点上执行的 compute() 函数）
*   YourInputFormat（指定YourReader的可写格式）
*   YourOutputFormat（指定YourWriter的可写格式）
*   YourReader（指定您的 inputFile 是如何转换的，例如，对于每一行，可以使用给定信息初始化一个 Vertex）
*   YourWriter（指定如何从顶点生成 outputFile）

（如果你想使用聚合器，可以选择一个 WorkerContext。）

只需结帐： http: [//giraph.apache.org/source-repository.html](http://giraph.apache.org/source-repository.html) 使用 Eclipse，您应该拥有包含示例应用程序的代码，您可以使用它！

# php - 我不知道如何在 sfguard 中建立用户和权限之间的嵌入关系

> ID：15007465
> 
> 赞同：0
> 
> 时间：2013-02-21T16:33:24.603
> 
> 标签：php, symfony-1.4, sfguard

我有我`sf_guard_user`的字段，我想在权限和用户之间创建一个嵌入式关系，以便有一个表单，`sf_guard_user`能够为用户添加或修改权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:18:21.690

You need to create a form with this class `sfGuardUserForm`. And inside this class, you have a widget called `sf_guard_user_permission_list` that handle permissions relation.

# javascript - 在javascript中设置默认值

> ID：15007466
> 
> 赞同：-2
> 
> 时间：2013-02-21T16:33:25.800
> 
> 标签：javascript

通过以下方式设置默认值与哪种方式正确之间有什么区别？

```
1) var1 = var1 || 'default_value'
2) var1 = typeof(var1) !== 'undefined' ? var1 : 'default_value'
3) var1 = var1 !== 'undefined' ? var1 : 'default_value'
4) var1 = var1 != 'undefined' ? var1 : 'default_value' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:37:34.813

第二个是四个中*最*正确的一个。它将按您的意愿工作（如果未设置变量，请使用默认值）。

1.  如果`var1`为 false ( `0`, `false`, `null`, `''`, 以及`undefined`) ，这也将使用默认值
2.  `var1`如果不等于字符串，这将使用默认值`'undefined'`
3.  `var1`如果不等于字符串，这将使用默认值`'undefined'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:39:49.120

第一个和第二个有效，但适用于不同的条件。

第三个和第四个将值与`"undefined"`根本无法确定它是否为未定义值的字符串进行比较。

如果当前值评估为 false，则第一种方法使用默认值。这适用于大多数值，但如果您例如将其`true`用作布尔值的默认值，则无法将其设置为`false`并使其在测试中存活：

```
var var1 = false;

var1 = var1 || true; 
```

现在它`true`已经有了价值。对于其他一些特定值，您将遇到同样的问题，例如`0`or `""`。

第二个是与不同数据类型最一致的。然而，第一个经常使用，因为它更短。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:43:11.747

这些都做了非常不同的事情：

1.  `var1 = var1 || 'default_value'`

    `var1``'default_value'`如果`var1`是[假](http://james.padolsey.com/javascript/truthy-falsey/)的( `NaN`, `false`, `0`, `''`, )将等于`undefined`。这意味着 if `var1`is 任何这些值（也许最值得注意的是`false`,`0`或`''`）`var1`将等于`default_value`。

2.  `var1 = typeof(var1) !== 'undefined' ? var1 : 'default_value'`

    `var1``'default_value'`如果`var1`' 的类型严格等于 ，则将等于`'undefined'`。

3.  `var1 = var1 !== 'undefined' ? var1 : 'default_value'`

    `var1``'default_value'`仅当`var1`不严格等于字符串时才会等于`'undefined'`。

4.  `var1 = var1 != 'undefined' ? var1 : 'default_value'`

    `var1``'default_value'`仅当`var1`不等于字符串时才会等于`'undefined'`。

最后两个可能是错误的。您很少想检查变量的值是否是字符串`'undefined'`。您可能打算`undefined`直接检查。

要完全理解其中的每一个，您应该阅读严格相等 ( `===`) 运算符和相等运算符 ( `==`) 之间的区别。[MDN 的比较运算符文章很好地解释了这一点](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)。

# c# - 从 WinForms 中的“ImageList”迁移到 WPF

> ID：15007467
> 
> 赞同：5
> 
> 时间：2013-02-21T16:33:27.467
> 
> 标签：c#, wpf, winforms, imagelist

我想将一个项目移动到 WPF，并且在其中我有一个`ImageList`（通过在设计视图中选择 25 个图像来加载），我用它来创建按钮，如下所示： 我已将项目简化为以下代码。**这是我的整个项目**（除了 .Designer.cs 中的自动生成代码）：

```
public partial class Form1 : Form
{
    Button[] buttonList = new Button[25];
    Size buttonSize = new Size(140, 140);
    public Form1()
    {
        InitializeComponent();
        this.ClientSize = new Size(142 * 5, 142 * 5);
        for (int i = 0; i < buttonImages.Images.Count; i++)
        {
            buttonList[i] = new Button();
            buttonList[i].Size = buttonSize;
            buttonList[i].Location = new Point(
                (i % 5) * (buttonSize.Width + 2) + 1,
                (i / 5) * (buttonSize.Height + 2) + 1);
            buttonList[i].Image = buttonImages.Images[i];
        }
        SuspendLayout();
        Controls.AddRange(buttonList);
        ResumeLayout(false);
    }
} 
```

我似乎无法理解如何在 WPF 中完成这项琐碎的任务。尽我所能从这里的答案中看出[（像这样）](https://stackoverflow.com/questions/940879/accessing-resourcedictionary-from-wpf-usercontrol)我应该是

*   用图像填充文件夹
*   创建引用它们的 ResourceDictionary
*   创建另一个引用 ResourceDictionary 引用的文件
*   创建一个其他东西（我不知道是什么），它通过 ResourceDictionary 访问图像以将它们加载到按钮（但按钮类甚至没有构造函数......？？？！！！）

有人可以帮助将其翻译成 WPF 吗？老实说，我只是不知道从哪里开始。

如果它很重要，这就是它运行时的样子： ![在此处输入图像描述](../Images/8df600744763c39c254a075676f74bf2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:55:22.450

我们将为此使用 MVVM。

首先我们要做一个模型。

```
public class MyModel
{
   public BitmapSource Picture { get; set; }
   public string Description { get; set; }
} 
```

然后我们的 ViewModel

```
public class MyViewModel
{
   public ObservableCollection<MyModel> Images { get; set; }

   public ICommand ButtonClicked { get; set; }

   ... Logic to populate the images
} 
```

然后我们的观点

```
<Window x:Class="TestWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:TestWPF"
        Title="MainWindow"
        Height="350"
        Width="525">
    <Window.Resources>
        <loc:MyViewModel x:Key="ViewModel" />
    </Window.Resources>
    <Grid DataContext="{StaticResource ViewModel}">
        <ListView ItemsSource="{Binding Images}">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Button Command="{Binding ButtonClicked, RelativeSource=Parent}"
                            CommandParameter="{Binding Description}">
                        <Image Width="50"
                               Height="50"
                               Source="{Binding Picture}"></Image>
                    </Button>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Window> 
```

这将创建一个应该以相同方式运行的列表。

# java - 具有级联的 Hibernate JPA 删除实体（已删除的实体传递给持久化）

> ID：15007479
> 
> 赞同：0
> 
> 时间：2013-02-21T16:34:06.483
> 
> 标签：java, hibernate, jpa

我已经搜索并阅读/研究了网络上几乎每个链接，这些链接涉及删除父实体和通过我的 OneToMany 集合进行删除级联的问题。我已经尝试了许多建议，包括删除对包含的集合的所有引用、不同的 Cascade 类型组合等。但当我尝试删除父实体时，我在持久化已删除的实体时不断遇到异常。

我有一个 Adhesive 实体类，其中包含与 AdhesiveChemicals 的 OneToMany 关系，如下所示：

```
@Entity
@Table(name = "Adhesive")
@NamedQueries({
public class Adhesive implements Serializable {

    private static final long serialVersionUID = 1L;
    // @Max(value=?)  @Min(value=?)//if you know range of your decimal fields consider  using these annotations to enforce field validation
    private Long adhesiveId;
    private String adhesiveName;
    private String costPerDryPound;
    private String solidPercent;
    private String totalActCost;
    private String totalDry;
    private String totalWet;
    private Boolean inactive;
    private List<AdhesiveChemicals> adhesiveChemicals;
    private List<AdhesiveComponent> adhesiveComponentsList;

    @OneToMany(cascade= {CascadeType.REMOVE, CascadeType.MERGE, CascadeType.REFRESH}, mappedBy="adhesive", targetEntity=AdhesiveChemicals.class, orphanRemoval=true)
    @LazyCollection(LazyCollectionOption.FALSE)
    public List<AdhesiveChemicals> getAdhesiveChemicalsList() {
        return adhesiveChemicals;
    }

    public void setAdhesiveChemicalsList(List<AdhesiveChemicals> adhesiveChemicals) {
        this.adhesiveChemicals = adhesiveChemicals;
    }

    @OneToMany(mappedBy="adhesive", targetEntity=AdhesiveComponent.class)
    @LazyCollection(LazyCollectionOption.FALSE)
    public List<AdhesiveComponent> getAdhesiveComponentsList() {
        return adhesiveComponentsList;
    }

    public void setAdhesiveComponentsList(List<AdhesiveComponent> adhesiveComponentsList) {
        this.adhesiveComponentsList = adhesiveComponentsList;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (adhesiveId != null ? adhesiveId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Adhesive)) {
            return false;
        }
        Adhesive other = (Adhesive) object;
        if ((this.adhesiveId == null && other.adhesiveId != null) || (this.adhesiveId != null && !this.adhesiveId.equals(other.adhesiveId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "Adhesive{" + "adhesiveId=" + adhesiveId + ", adhesiveName=" + adhesiveName +
                ", costPerDryPound=" + costPerDryPound + ", solidPercent=" + solidPercent +
                ", totalActCost=" + totalActCost + ", totalDry=" + totalDry + ", totalWet=" +
                totalWet + ", inactive=" + inactive + '}';
    }

} 
```

粘合剂化学品类：

```
@Entity
public class AdhesiveChemicals implements Serializable {
private static final long serialVersionUID = 1L;
private Long id;
private String wetLbs;
private String dryLbs;
private String actualCost;
private Adhesive adhesive;
private Chemical chemical;

@ManyToOne(fetch= FetchType.EAGER, optional=false)
@JoinColumn(name="adhesive_id")
public Adhesive getAdhesive() {
    return adhesive;
}

public void setAdhesive(Adhesive adhesive) {
    this.adhesive = adhesive;
}

@ManyToOne(fetch = FetchType.EAGER, optional=false)
@JoinColumn(name="chemical_id")
public Chemical getChemical() {
    return chemical;
}

public void setChemical(Chemical chemical) {
    this.chemical = chemical;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof AdhesiveChemicals)) {
        return false;
    }
    AdhesiveChemicals other = (AdhesiveChemicals) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "AdhesiveChemicals{" + "wetLbs=" + wetLbs + ", dryLbs=" + dryLbs
        + ", actualCost=" + actualCost + ", adhesive=" + adhesive + ", chemical=" + chemical + '}';
} 
```

调用删除粘合剂的代码在这里：

```
 // Handler for Button[fx:id="pricingAdhesiveDeleteButton"] onMouseClicked
public void doAdhesiveDelete(MouseEvent event) {
    // handle the event here
    logger.info("Entering {}.doAdhesiveDelete.", this.getClass().getName());
    if (pricingAdhesiveTable.getSelectionModel().getSelectedIndex() < 0) {
        return;
    }
    DialogFX dialog = new DialogFX(DialogFX.Type.QUESTION);
    dialog.setTitleText("Delete?");
    dialog.setMessage("  Do you really wish to delete " + tempAdhesive.getAdhesive() + "?   ");
    if (dialog.showDialog() == 1) {
        return;
    }
    tempAdhesive.getAdhesiveChemicalsList().clear();
    pricingAdhesiveTableList.remove(tempAdhesive);
//        for (AdhesiveChemicals adhesiveChemicals : acList) {
//            costingService.removeAdhesiveChemicals(adhesiveChemicals.getId());
//        }
    costingService.removeAdhesive(tempAdhesive.getId());
    init();
    pricingAdhesiveDeleteButton.setDisable(true);
} 
```

costingService 是一个 Glassfish 服务，它实现了数据库上的所有创建/更新/删除方法。removeAdhesive 方法如下所示：

```
@Service
@Transactional(readOnly=false)
public class CostingServiceImpl implements CostingService {
private static final Logger logger =      LoggerFactory.getLogger(CostingServiceImpl.class.getName());
private EntityManager em;

@PersistenceContext(name="LamtecVoyagerPU")
public void setEntityManager(EntityManager entityManager) {
    this.em = entityManager;
}

    @Override
public void removeAdhesive(Long Id) {
    logger.info("Entering {}.removeAdhesive.", this.getClass().getName());
    Adhesive a = em.find(Adhesive.class, Id);
//        a.getAdhesiveChemicalsList().clear();
    em.remove(a);
} 
```

如您所见，在这一点上，我将级联限制为一对多关系上的 REFRESH、MERGE 和 REMOVE，并且我将孤儿删除设置为 true。但是，当我尝试删除包含一些 AdhesiveChemicals 的粘合剂时，会引发以下异常。（其中有一些额外的东西与客户端和服务器之间的通信有关。）

```
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1440)
at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
at javafx.event.Event.fireEvent(Event.java:171)
at javafx.scene.Scene$ClickGenerator.postProcess(Scene.java:3113)
at javafx.scene.Scene$ClickGenerator.access$8600(Scene.java:3051)
at javafx.scene.Scene$MouseHandler.process(Scene.java:3333)
at javafx.scene.Scene$MouseHandler.process(Scene.java:3164)
at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3119)
at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1559)
at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2261)
at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:228)
at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
at com.sun.glass.ui.View.notifyMouse(View.java:922)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
at com.sun.glass.ui.win.WinApplication$2$1.run(WinApplication.java:67)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
... 31 more
Caused by: org.springframework.transaction.UnexpectedRollbackException: JTA transaction unexpectedly rolled back (maybe due to a timeout); nested exception is javax.transaction.RollbackException: Transaction marked for rollback.
at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1012)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy463.removeAdhesive(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.remoting.support.RemoteInvocationTraceInterceptor.invoke(RemoteInvocationTraceInterceptor.java:77)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy464.removeAdhesive(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.remoting.support.RemoteInvocation.invoke(RemoteInvocation.java:205)
at org.springframework.remoting.support.DefaultRemoteInvocationExecutor.invoke(DefaultRemoteInvocationExecutor.java:38)
at org.springframework.remoting.support.RemoteInvocationBasedExporter.invoke(RemoteInvocationBasedExporter.java:78)
at org.springframework.remoting.support.RemoteInvocationBasedExporter.invokeAndCreateResult(RemoteInvocationBasedExporter.java:114)
at org.springframework.remoting.httpinvoker.HttpInvokerServiceExporter.handleRequest(HttpInvokerServiceExporter.java:73)
at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:49)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
at org.springframework.remoting.support.RemoteInvocationUtils.fillInClientStackTraceIfPossible(RemoteInvocationUtils.java:47)
at org.springframework.remoting.support.RemoteInvocationResult.recreate(RemoteInvocationResult.java:115)
at org.springframework.remoting.support.RemoteInvocationBasedAccessor.recreateRemoteInvocationResult(RemoteInvocationBasedAccessor.java:85)
at org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:148)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy14.removeAdhesive(Unknown Source)
at com.lamtec.pricingclient.PricingPresenter.doAdhesiveDelete(PricingPresenter.java:982)
... 36 more
Caused by: javax.transaction.RollbackException: Transaction marked for rollback.
at com.sun.enterprise.transaction.JavaEETransactionImpl.commit(JavaEETransactionImpl.java:473)
at com.sun.enterprise.transaction.JavaEETransactionManagerSimplified.commit(JavaEETransactionManagerSimplified.java:855)
at com.sun.enterprise.transaction.UserTransactionImpl.commit(UserTransactionImpl.java:208)
at org.springframework.transaction.jta.JtaTransactionManager.doCommit(JtaTransactionManager.java:1009)
... 102 more
Caused by: javax.persistence.EntityNotFoundException: deleted entity passed to persist: [com.lamtec.lamteccommon.data.costing.AdhesiveChemicals#<null>]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1369)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1315)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1321)
at org.hibernate.ejb.AbstractEntityManagerImpl$3.mapManagedFlushFailure(AbstractEntityManagerImpl.java:1235)
at org.hibernate.transaction.synchronization.CallbackCoordinator.beforeCompletion(CallbackCoordinator.java:122)
at org.hibernate.transaction.synchronization.HibernateSynchronizationImpl.beforeCompletion(HibernateSynchronizationImpl.java:51)
at com.sun.enterprise.transaction.JavaEETransactionImpl.commit(JavaEETransactionImpl.java:435)
... 105 more 
```

填充包含 Adhesives 的列表的原始查询（默认情况下，由于急切获取，AdhesiveChemicals）：

```
 @Override
public List<Adhesive> listAdhesives() {
    logger.info("Entering {}.listAdhesives.", this.getClass().getName());
    Query query = em.createNamedQuery("Adhesive.findAll");
    List<Adhesive> result = new ArrayList<>();
    try {
        result = query.getResultList();
    } catch (Exception ex) {
        logger.info("Not able to get Adhesive list");
        throw ex;
    }
    return result;

} 
```

其结果被放置在定价粘合剂表列表中。当我尝试删除要删除的粘合剂时，我也将其从定价AdhesiveTableList 中删除，如上面的 doAdhesiveDelete 代码所示。

请不要担心我的感受。我已经在这个问题上打败了自己。我还有许多其他的删除工作正常，但这个继续让我感到困惑。如果您需要更多信息，请告诉我。
哦，数据库是 MS SQL Server，我使用 Hibernate 3.6 作为我的 JPA 提供程序。Glassfish 是 3.X 版。

谢谢。

# javascript - JSONP 事件提供未经授权的消息

> ID：15007480
> 
> 赞同：0
> 
> 时间：2013-02-21T16:34:08.680
> 
> 标签：javascript, jquery, jsonp, jquery-events

下面的代码在收到“401 - Unauthorized”错误时会抛出错误，而不会转到 .fail 或 .always 。有没有办法触发失败并检索来自服务器响应的错误 [myErrorMessage]？

**JavaScript**

```
$(document).ready(function() {

    var jqXHR = $.ajax({
        url: "http://[myDomain]/[myPage]",
        dataType: "jsonp",
        jsonpCallback: "myFunction"
    })
        .done(function() { alert("success"); })
        .fail(function() { alert("error"); })
        .always(function() { alert("complete"); });

    function myFunction(data) {
        alert("callback");
    }

}); 
```

**请求结果**

```
GET http://[myDomain]/[myPage]?callback=myJsFunction&_=1361463044315 HTTP/1.1
Host: [myDomain]
Connection: keep-alive
Accept: */*
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17
Referer: http://[myTotallyDifferentDomain]/Default.aspx
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

**响应结果**

```
HTTP/1.1 401 Unauthorized
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/json; charset=utf-8
Expires: -1
Server: Microsoft-IIS/8.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Thu, 21 Feb 2013 16:10:42 GMT
Content-Length: 67

{"Message":"[myErrorMessage]"} 
```

**铬结果**

```
GET http://[myDomain]/[myPage]?callback=myJsFunction&_=1361463044315 401 (Unauthorized) jquery.min.js:5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:42:09.020

从 jQuery 1.9 开始，JSONP 请求不会因错误而进入失败处理程序，这是记录在案的行为。

据我所知，没有办法解决它。（当然，除了使用代理）

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# jquery - 是否可以在 Orchard CMS 中创建填充内容 DIV 宽度和高度的图像滑块？

> ID：15007482
> 
> 赞同：1
> 
> 时间：2013-02-21T16:34:11.777
> 
> 标签：jquery, asp.net-mvc, slider, orchardcms, flexslider

Orchard CMS 有几个图像滑块和功能项目滑块。然而，所有这些都使用具有固定宽度和高度的图像库。

如果站点具有固定宽度，则此方法有效，但对于动态站点，站点可以根据窗口大小在宽度和高度上扩展，这看起来不太好。

有没有办法放置一个内容滑块（例如 FlexSlider 2），填充它所在的 DIV 的整个宽度和高度，同时仍然使用 Orchard 的图片库功能？

这是一个包含灵活滑块的动态布局示例：

```
**HEADER** Header Content with dynamic width and fixed height (e.g. 100 pixels)**HEADER**

**CONTENT** slider Content with dynamic width and height **CONTENT**

**FOOTER** Footer Content with dynamic width and fixed height (e.g. of 30 pixels)**FOOTER** 
```

任何帮助都将不胜感激，Orchard 看起来是一个很棒的工具，如果它能够配合使用它会很棒。

# node.js - 使用 NGINX 对多个节点服务器的请求流量进行负载平衡

> ID：15007485
> 
> 赞同：3
> 
> 时间：2013-02-21T16:34:29.623
> 
> 标签：node.js, nginx

根据这个**[答案](https://stackoverflow.com/questions/2387724/node-js-on-multi-core-machines#8685968)**：

> 您应该在一个机器上运行多个节点服务器，每个核心 1 个，并在它们之间拆分请求流量。这提供了出色的 CPU 关联性，并且将随核心数几乎线性地扩展吞吐量。

明白了，为了简单起见，假设我们的盒子有 2 个内核。

我需要一个完整的示例，一个`Hello World`使用 NGINX 在两个节点服务器之间进行负载平衡的应用程序。

这也应该包括任何 NGINX 配置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T16:49:20.633

应用程序.js

```
var http = require('http');
var port = parseInt(process.argv[2]);

http.createServer(function (req, res) {
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Hello World\n');
}).listen(port);

console.log('Server running at http://localhost:' + port + '/'); 
```

nginx配置

```
upstream app  {
  server localhost:8001;
  server localhost:8002;
}

server {
  location / {
    proxy_pass  http://app;
  }
} 
```

启动您的应用程序

```
node app.js 8001
node app.js 8002 
```

[HttpUpstreamModule 文档](http://nginx.org/en/docs/http/ngx_http_upstream_module.html)

附加阅读材料

*   [集群模块](http://nodejs.org/api/cluster.html)- 仍处于试验阶段，但您不需要 nginx
*   [永远模块](https://github.com/nodejitsu/forever)- 以防您的应用程序崩溃
*   [nginx 和 websockets](http://metacogni.tv/blog/2013/02/19/websockets-with-nginx-plus-ssl-also/) - 如何在新的 nginx 版本中代理 websockets

# assembly - 在 MASM 上构建 16 位代码而不是 32 位代码

> ID：15007492
> 
> 赞同：4
> 
> 时间：2013-02-21T16:34:41.267
> 
> 标签：assembly, x86, 32-bit, masm32

问题是当我构建一个 32 位 application.exe 时，我得到一个带有 16 位机器代码的应用程序。

这是代码（取自一本书）：

```
 .386
    .model flat
    .const
URL db  "http://www.lionking.org/`cubbi/", 0
    .code

_start:
    xor ebx, ebx
    push ebx
    push ebx
    push ebx
    push offset URL
    push ebx
    push ebx
;        call ShellExecute 
    push ebx
;        call ExitProcess

end     _start 
```

要构建我在控制台中编写的应用程序

*   ml winurl.asm（我试过 ml /c winurl.asm 但没有其他结果）
*   链接 winurl.obj

然后我有一个 16 位机器码的可执行文件：

```
PU = ?86, Uirtual 8086 Mode, Id/Step = 0F62, A20 enabled
09E4:0000 33DB   XOR    BX,BX
09E4:0002 53     PUSH   BX
09E4:0003 53     PUSH   BX
09E4:0004 53     PUSH   BX
09E4:0005 680000 PUSH   0000h
09E4:0008 0000   ADD    [BX+SI],AL
09E4:000A 53     PUSH   BX
09E4:000B 53     PUSH   BX
09E4:000C 53     PUSH   BX
09E4:000D 0000   ADD    [BX+SI],AL
09E4:000F 006874 ADD    [BX+SI+74h],CH
09E4:0012 7470   JZ Short 0084 
```

我不需要正常工作的代码。我只想用 32 位代码组装一个应用程序，或者我想了解我做错了什么。

感谢您的关注。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:28:35.697

除非您告诉反汇编程序您的代码是 16 位（或 32 位）并且除非它可以以某种方式猜测（例如基于可执行文件的格式，如果有的话），否则反汇编程序无法知道它是两者中的哪一个.

我从您的 16 位反汇编中获取指令字节并将它们反汇编为 32 位代码：

```
00000000:i33DB                           xor       ebx,ebx
00000002:i53                             push      ebx
00000003:i53                             push      ebx
00000004:i53                             push      ebx
00000005:i6800000000                     push      00000000
0000000A:i53                             push      ebx
0000000B:i53                             push      ebx
0000000C:i53                             push      ebx
0000000D:i0000                           add       [eax],al ; 0s between code & data
0000000F:i006874                         add       [eax+74],ch ; db 0,"ht"
00000012:i7470                           je ; db "tp" 
```

这是从您的程序集源生成的正确的 32 位机器代码，您没有正确反汇编它。不知何故，您将其分解为 16 位，这是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T14:48:24.217

您应该告诉反汇编程序您已经创建了 32 位代码。证明：
来自：

```
push offset URL 
```

反汇编程序显示了这一点：

```
09E4:0005 680000 PUSH   0000h  
09E4:0008 0000   ADD    [BX+SI],AL 
```

你看到第二个命令 OP-code 是 0000h，这是第一个操作的参数。反汇编程序认为它是 4 字节（我不知道 OP 代码中参数大小的确切区别是什么，可以肯定这是因为 16 - 32 位）。

# wordpress - Wordpress 中的联系表 7 - 如何隐藏电子邮件中未完成的字段？

> ID：15007502
> 
> 赞同：1
> 
> 时间：2013-02-21T16:35:24.970
> 
> 标签：wordpress, email, field, contact-form, contact-form-7

谁能帮我找到一种方法来隐藏发送的电子邮件中的字段？

基本上我有多行（如多个订单列表），如果用户只填写第一行，我不希望其他空行显示在电子邮件中。

这是表单的一段代码（但还有 8 行，即 10 个订单）：

```
<tr class="stationary-order-input">
        <td>[text order-1-page-number]</td>
        <td>[text order-1-item-number]</td>
        <td>[text order-1-item-description]</td>
        <td>[text order-1-quantity]</td>
    </tr>
    <tr class="stationary-order-input">
        <td>[text order-2-page-number]</td>
        <td>[text order-2-item-number]</td>
        <td>[text order-2-item-description]</td>
        <td>[text order-2-quantity]</td>
    </tr> 
```

这是我的电子邮件设置方式的一部分（最多 ORDER 10）：

```
ORDER 1 - Details:

Page number: [page-number]
Item number: [item-number]
Item description: [item-description]
Quantity: [quantity]

ORDER 2 - Details:

Page number: [order-2-page-number]
Item number: [order-2-item-number]
Item description: [order-2-item-description]
Quantity: [order-2-quantity] 
```

目前，所有 10 个订单都将显示在电子邮件中，即使用户尚未完成所有订单。那么如何在电子邮件中隐藏这些不完整的字段呢？

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-02T22:21:30.430

在联系表 7 的邮件 1 字段中，电子邮件字段底部有一个复选框。它声明从输出中排除带有空白邮件标签的行，并在其上打上复选标记。然后保存表格

现在，当客户填写表格并且不填写某些字段时，它不会显示在您的电子邮件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T23:25:56.067

尝试以下过滤器，尚未在实时站点中测试，并且我的本地站点不发送电子邮件，所以我不确定。

由于 CF7 有一些内部值，我认为最好单独检查每个字段，例如`your-address`,`your-phone`等：

```
add_filter( 'wpcf7_posted_data', 'cf7_so_15007502' );

function cf7_so_15007502( $posted_data )
{
    if( isset( $posted_data['your-address'] ) && '' == $posted_data['your-address'] )
        unset( $posted_data['your-address'] );

    if( isset( $posted_data['your-phone'] ) && '' == $posted_data['your-phone'] )
        unset( $posted_data['your-phone'] );

    return $posted_data;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T13:25:35.220

只需选中消息正文字段下与文本“从输出中排除带有空白邮件标签的行”平行的复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T14:33:29.407

这是从邮件中删除 Contact Form 7 标签的更动态的方法。

```
function on_wpcf7_mail_components( $data, $form, $mail )
{        
    foreach ( (array) $form->form_scan_shortcode() as $shortcode )
    {
        if ( empty( $shortcode['name'] ) )
        {
            continue;
        }

        $tag = sprintf( '[%s]', $shortcode['name'] );

        $data['body'] = str_replace( $tag , '', $data['body'] );
    }

    return $data;
}

add_filter( 'wpcf7_mail_components', 'on_wpcf7_mail_components', 10, 3 ); 
```

# stored-procedures - ZF2 从 SP 调用中检索出参数

> ID：15007506
> 
> 赞同：0
> 
> 时间：2013-02-21T16:35:31.937
> 
> 标签：stored-procedures, parameters, zend-framework2, out

我创建了一个带有以下声明的存储过程：

* * *

```
DELIMITER $$

DROP PROCEDURE IF EXISTS my_test$$

CREATE PROCEDURE my_test(input_number INT, OUT out_number text)
BEGIN
IF (input_number = 0) THEN
          SET out_number='Errorrrr';
ELSE
          SET out_number='Testing';
END IF; 
```

结束$$

分隔符；

* * *

以下是我调用此 SP 的 ZF2 代码：

* * *

```
 $spResponse = 0;
    $prepareStmt = $this->dbGateway->createStatement ();
    $prepareStmt->prepare ( 'CALL my_test(?,?)' );
    $prepareStmt->getResource ()->bindParam ( 1, $spRequest );
    $prepareStmt->getResource ()->bindParam ( 2, $spResponse, \PDO::PARAM_STR, 2 );
    $resultSet = $prepareStmt->execute (); 
```

* * *

这段代码给了我以下错误：

* * *

语法错误或访问冲突：例程 zf2.my_test 的 1414 OUT 或 INOUT 参数 2 不是 BEFORE 触发器中的变量或 NEW 伪变量

* * *

有人可以建议问题出在哪里吗？另外，我如何检索“OUT”参数的值。

感谢您的回应和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:29:23.763

[此低级代码](https://stackoverflow.com/questions/15173452/how-to-execute-mysql-stored-procedure-in-zend-framework-2-with-multiple-result-s)检索基本 PDO 连接对象。这样您就可以以 PHP 方式处理结果

# log4j - Log4j 日志在部署到 CloudFoundry 时隐藏或吞下

> ID：15007509
> 
> 赞同：2
> 
> 时间：2013-02-21T16:35:45.277
> 
> 标签：log4j, cloud-foundry

我刚刚将我的第一个应用程序部署到 CloudFoundry，并使用 log4j。当我将应用程序部署到本地 tomcat 服务器时，日志打印得很好，一切都很好。但是，当我使用“vmc logs”命令从 CloudFoundry 上的实例获取日志时，我只得到了 tomcat 初始化日志和以下消息：

```
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

我用 log4j 打印的任何进一步内容都不可见。System.out.println 消息显示，但没有 log4j 消息。

我已将 log4j.properties 文件放在我的 WEB-INF 目录中，以下是它的内容：

```
# Set root logger level to DEBUG and its only appender to A1.
log4j.rootLogger=INFO, A1
# A1 is set to be a ConsoleAppender.
log4j.appender.A1=org.apache.log4j.ConsoleAppender
# A1 uses PatternLayout.
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-5p %-35c{1} %m%n
log4j.logger.org.springframework=WARN 
```

我的 logger 对象的创建与我的课程中可能预期的一样：

```
private static Logger log = Logger.getLogger(MyClass.class); 
```

关于我缺少什么配置以使我的 log4j 日志显示在我的 CloudFoundry 日志中的任何建议？还是我错误地检索它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T19:30:45.860

Log4j 是否默认设置为输出到 STDOUT？'vmc logs' 将仅返回 STDOUT、STDERR 和暂存日志文件的内容。

如果您的应用程序正在记录到不同的文件，则使用“vmc 文件”查看内容。

# wordpress - 如何删除magento网站上的重定向？

> ID：15007512
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:35:46.063
> 
> 标签：wordpress, magento, templates, redirect

我的客户端站点出现问题。由于**为 magento 设置了一些重定向**.. 我无法**访问 wordpress 页面。**. 每当我尝试访问 wordpress 页面时，我都会被重定向到一个**magento 404 not found 页面**......所以请让我知道如何在我的 magento 网站上删除重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:45:42.703

你的问题模棱两可。是在 .htaccess （或其他地方）中进行重定向，还是他们在`core_url_rewrite`表中有重定向冲突？

我猜是前者。您需要为您的 Wordpress 区域创建一个与您的 Magento 区域截然不同的别名或位置。通常这是通过一个单独的子域来实现的，例如[http://blog.example.com/](http://blog.example.com/)或通过像[http://www.example.com/blog/](http://www.example.com/blog/)这样的后缀。

# sql - Postgresql，根据唯一字段从表中获取最新条目

> ID：15007516
> 
> 赞同：1
> 
> 时间：2013-02-21T16:35:58.633
> 
> 标签：sql, postgresql

我正在使用以下内容返回基于“服务器”的最新唯一记录列表

```
select server, fail, date, time
from (
    select server, fail, date, time,
           rank() over (partition by server order by date desc, time desc) as rank
    from querytimes
) dt
where dt.rank <= 1; 
```

它可以工作，但是速度很慢。

时间：21470.742 毫秒

输出示例，

```
 server       | fail |    date    |   time
-------------------+------+------------+----------
serv1.test.com  | No   | 2013-02-21 | 10:25:03
serv2.test.com  | No   | 2013-02-21 | 10:25:03
serv3.test.com  | No   | 2013-02-21 | 10:25:03
serv4.test.com  | No   | 2013-02-21 | 10:25:03
serv5.test.com  | No   | 2013-02-21 | 10:25:03
serv6.test.com  | No   | 2013-02-21 | 10:25:03
serv7.test.com | No   | 2013-02-21 | 10:25:02
serv8.test.com | No   | 2013-02-21 | 10:25:01
serv9.test.com | No   | 2013-02-21 | 10:25:01
serv10.test.com | No   | 2013-02-21 | 10:25:02
serv11.test.com | No   | 2013-02-21 | 10:25:02
serv12.test.com | No   | 2013-02-21 | 10:25:02
serv13.test.com | No   | 2013-02-21 | 10:25:01
serv14.test.com | No   | 2013-02-21 | 10:25:01 
```

有没有更有效的方法来做这种类型的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:47:20.880

您可以尝试 PosgreSQL 特定`DISTINCT ON`子句，例如：

```
select distinct ON (server) server, fail, date, time
from querytimes
order by server, date desc, time desc; 
```

如果速度不够快，请尝试在`(server,date,time)`.

PS 使用保留字如`date`,`time`作为列名是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:23:25.943

只是一个想法 - 如果您想要的所有记录都是最近的，您可以通过首先将搜索空间限制为小于 x 分钟的记录来减少所涉及的记录数量 - 可能使用公用表表达式进行过滤从巨大的表中取出一个记录子集，然后对该较小的记录集进行真正的查询。

```
With MostRecent as
( SELECT * from querytimes WHERE ( ...Postgres code to get latest... )
)
SELECT ...yourquery... FROM MostRecent 
```

在[http://www.postgresql.org/docs/7.4/static/functions-datetime.html可以使用大量的日期函数](http://www.postgresql.org/docs/7.4/static/functions-datetime.html)

# visual-studio-2010 - 重新打开 Visual Studio 后 Visual Studio 松动默认浏览器设置

> ID：15007519
> 
> 赞同：0
> 
> 时间：2013-02-21T16:36:10.197
> 
> 标签：visual-studio-2010, default-browser

我在 SO 中发现了几个问题，我们可以在其中更改 Visual Studio 中的默认浏览器设置。

[Visual Studio 打开默认浏览器而不是 Internet Explorer](https://stackoverflow.com/questions/79954/visual-studio-opens-the-default-browser-instead-of-internet-explorer)

这很好用。但是当我关闭并打开 Visual Studio 时，Visual Studio 会打开默认浏览器而不是 Internet Explorer。无论我们关闭和打开 Visual Studio，有什么方法可以将 IE 设置为默认浏览器？

# character - 字符输出 - PHP 包括

> ID：15007526
> 
> 赞同：0
> 
> 时间：2013-02-21T16:36:34.603
> 
> 标签：character, currency, symbols

这里的问题 - 我的 html 文档类型标题如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"> 
```

如果我写一些包含“£”符号的文本，它会正确显示。

如果我包含一个使用“£”符号的 php 脚本，我会得到奇怪的字符输出：

�</p>

我知道我可以用 html 字符代码“£”替换 £，但由于我的网站很大，所以不实用。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:41:54.193

不能使用`utf8_encode`功能吗？

# objective-c - -convertPoint:toCoordinateFromView：Google Maps SDK for iOS 的方法

> ID：15007528
> 
> 赞同：3
> 
> 时间：2013-02-21T16:36:36.310
> 
> 标签：objective-c, google-maps-sdk-ios

如何实现 MapKit 方法

```
[googleMapView convertPoint:nePoint toCoordinateFromView:pinView]; 
```

在适用于 iOS 的 Google Maps SDK 中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T22:46:49.023

你可以使用这样的东西：

```
GMSMapView* mapView = ...;
CGPoint point = ...;
...
CLLocationCoordinate2D coordinate = 
    [mapView.projection coordinateForPoint: point]; 
```

在这种情况下`point`应该是相对于地图视图。

如果您有一个相对于另一个视图的点（例如`pinView`在您的情况下），您需要先将其转换为相对于地图视图的点。您可以通过以下方式做到这一点：

```
UIView* pinView = ...;
CGPoint pinViewPoint = ...;
...
CGPoint mapViewPoint = [pinView convertPoint: pinViewPoint toView: mapView]; 
```

所以将它们结合在一起：

```
GMSMapView* mapView = ...;
UIView* pinView = ...;
CGPoint pinViewPoint = ...;
...
CGPoint mapViewPoint = [pinView convertPoint: pinViewPoint toView: mapView];
CLLocationCoordinate2D coordinate = 
    [mapView.projection coordinateForPoint: mapViewPoint]; 
```

# javascript - 被 CORS 图像污染的画布

> ID：15007536
> 
> 赞同：2
> 
> 时间：2013-02-21T16:36:50.633
> 
> 标签：javascript, canvas, cross-domain, cors, pixastic

我在使用支持 CORS 的图像和画布（Pixastic）时遇到问题。

在服务器上我有

```
Header set Access-Control-Allow-Origin "*" 
```

在我的 htaccess 文件中。

在客户端，我尝试在 HTML 中设置 crossorigin 属性，如下所示：

```
<img src="http://myseconddomain/image.jpg" crossorigin="anonymous" /> 
```

没有成功。之后我尝试了 Pixastic 的代码：

```
var el = elements[i];
el.crossOrigin = 'anonymous'; 
```

也不行。

我还禁用了 chrome 的缓存，但没有帮助。

Chrome 正在记录：

```
Uncaught Error: SECURITY_ERR: DOM Exception 18 
Unable to get image data from canvas because the canvas has been tainted by cross-origin data. 
```

即使 HTML 看起来不错（`crossorigin`设置了属性），图像标题看起来也不错（`Access-Control-Allow-Origin`）...我不知道接下来要尝试什么，所以欢迎任何建议！

不幸的是，我无法提供任何链接，因为您可以猜到这个应用程序离生产还很远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:45:04.903

我找到了一种方法，我会在这里发布，希望有一天它会对某人有所帮助。

碰巧我没有在 Pixastic 的代码中弄乱正确的函数，因为 init() 函数并不总是像我最初想象的那样被调用。

我在 Pixastic.process() 函数中添加了以下行：

```
dataImg.crossOrigin = "anonymous"; 
```

它成功了。

# html - CSS Stacked Paper Effect 不在 IE 中呈现

> ID：15007538
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:36:54.620
> 
> 标签：html, css, internet-explorer

我创建了一个基本网站，使用 CSS 来创建带有线条的堆叠纸效果。

该网站临时托管在[www.aspireddesign.co.uk/jhtutoring](http://www.aspireddesign.co.uk/jhtutoring)

这是 CSS 文件：[CSS 源](http://aspireddesign.co.uk/jhtutoring/css/main.css)

该网页在 Chrome、Firefox、Safari（在 iPhone 和 iPad 上）中呈现良好，但在 Internet Explorer 上不呈现（仅尝试过版本 8）。

CSS 使用 :before 和 :after 伪元素，这可能是问题吗？

线标也显示为块而不是蓝色。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:50:06.737

由于该版本不支持 rgba 颜色，您的行在 IE8 中未显示为蓝色 - 请参阅[http://css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)。

它们也不会在 IE9 中工作，因为您的 HTML 正在触发怪癖模式。如果您将其更改为以标准模式渲染，它应该可以工作。请参阅此处了解更多信息： http: [//msdn.microsoft.com/en-gb/library/ie/gg699338 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/ie/gg699338(v=vs.85).aspx)

# ios - 如何从“发送者”对象访问用户定义的运行时属性？

> ID：15007542
> 
> 赞同：14
> 
> 时间：2013-02-21T16:37:10.563
> 
> 标签：ios, objective-c, xcode, interface-builder

我有`UIButton`一个故事板场景。该按钮配置了用户定义的运行时间属性“类型”（字符串）。按下按钮时调用

`-(IBAction)pressedButton:(id)sender`

我可以从“发件人”访问用户定义的运行时间属性吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-21T16:39:39.637

是的：

```
-(IBAction)pressedButton:(id)sender
{
    id value = [sender valueForKey:key];
} 
```

* * *

请注意，您不能使用用户定义的运行时属性，**除非您将 UIButton 子类化并将其添加为强属性**，例如

```
@interface UINamedButton : UIButton
@property (strong) NSString *keyName;
@end 
```

如果你设置了一个用户定义的运行时间属性，而你没有这样做，那么 Xcode 将会很不幸地崩溃。

然后你可以得到这个值

```
-(IBAction)clicked:(UIControl *)sender
    {
    NSString *test = @"???";

    if ( [sender respondsToSelector:@selector(keyName)] )
            test = [sender valueForKey:@"keyName"];

    NSLog(@"the value of keyName is ... %@", test);

    // if you FORGOT TO SET the keyName value in storyboard, that will be NULL
    // if it's NOT a UINamedButton button, you'll get the "???"

    // and for example...
    [self performSegueWithIdentifier:@"idUber" sender:sender];
    // ...the prepareForSegue could then use that value in the button.

    // note that a useful alternative to
    // if ( [sender respondsToSelector:@selector(stringTag)] )
    // is... 
    // if ( [sender respondsToSelector:NSSelectorFromString(@"stringTag")] )
    } 
```

# rake - Rake FileList 排除方法适用于 irb 但不适用于我的 rakefile

> ID：15007546
> 
> 赞同：0
> 
> 时间：2013-02-21T16:37:21.470
> 
> 标签：rake

目标：收集所有文件，完成目录结构，匹配目录结构。

皱纹：需要过滤掉一个讨厌的不受欢迎的目录，它匹配但幸运的是唯一地命名为“不想要”。实际字符串已更改以保护无辜者。

*   源/dir1/content/scripts -**好的**
*   源/dir2/subdir1/content/scripts -**好的**
*   source/dir3/do-not-want/content/scripts -**嗯...不想要**

下面的脚本有效，但我必须单独检查不需要的路径，这是不必要的。当我在 irb 中使用 exclude 测试同一个 FileList 时，它可以按需要工作。从我的 rakefile 中，我看到FileList 返回**的不想要的**目录。

```
FileList['source/**/content/scripts'].exclude('do-not-want').each do |f|
    unless /do-not-want/ =~ f #hmm why does the exclude above not actually exclude do-not-want directories?
        Dir.chdir(f) do |d|
            puts "directory changed to #{d} and copying scripts from #{d} to common directory #{target}"
            FileUtils.cp_r('.', target)
        end         
    end
end 
```

当然，我在做一些愚蠢的事情。

*奖励积分*：如果你帮助我学习 rake/ruby 并向我展示一种更好的方法来实现相同的目标，同时战胜皱纹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T09:21:22.273

我认为您应该使用`FileList['source/**/content/scripts'].exclude(/\/do-no-want\//)`过滤掉包含“/do-no-want/”子字符串的路径。

尝试将输出添加到您的 rake 文件中，以便您可以查看和调试那里发生的事情。

# ms-office - docx4j 无法读取 POI 保存的文件，谁的错？

> ID：15007550
> 
> 赞同：1
> 
> 时间：2013-02-21T16:37:31.647
> 
> 标签：ms-office, apache-poi, docx4j

当我在使用 POI 使用 XPath 处理一些文本后保存 docx 文件时，然后我将 ByteArrayOutputStream 传递给新的 ByteArrayInputStream 并将其提供给 dox4j

```
wordMLPackage = WordprocessingMLPackage.load(
    bis
); 
```

对于我的 4 个模板中的 3 个，这会引发异常：

```
 org.docx4j.openpackaging.exceptions.InvalidFormatException: Unexpected package (docx4j supports docx/docxm and pptx only
     at org.docx4j.openpackaging.contenttype.ContentTypeManager.createPackage(ContentTypeManager.java:834) 
```

代码看起来像这样：

```
 /* Return a package of the appropriate type.  Used when loading an existing
 * Package, with an already populated [Content_Types].xml.  When 
 * creating a new Package, start with the new WordprocessingMLPackage constructor. */
public OpcPackage createPackage() throws InvalidFormatException { 

    /*
     * How do we know what type of Package this is?
     * 
     * In principle, either:
     * 
     * 1\. We were told its file extension or mime type in the
     * constructor/method parameters, or
     * 
     * 2\. Because [Content_Types].xml contains an override for PartName
     * /document.xml of content type
     * application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml
     * 
     * The latter approach is more reliable, so ..
     * 
     */
    OpcPackage p;

    if (getPartNameOverridenByContentType(ContentTypes.WORDPROCESSINGML_DOCUMENT) != null
            || getPartNameOverridenByContentType(ContentTypes.WORDPROCESSINGML_DOCUMENT_MACROENABLED) != null
            || getPartNameOverridenByContentType(ContentTypes.WORDPROCESSINGML_TEMPLATE ) != null
            || getPartNameOverridenByContentType(ContentTypes.WORDPROCESSINGML_TEMPLATE_MACROENABLED) != null ) { 
        log.info("Detected WordProcessingML package ");
        p = new WordprocessingMLPackage(this);
        return p;
    } else if (getPartNameOverridenByContentType(ContentTypes.PRESENTATIONML_MAIN) != null
            || getPartNameOverridenByContentType(ContentTypes.PRESENTATIONML_TEMPLATE) != null
            || getPartNameOverridenByContentType(ContentTypes.PRESENTATIONML_SLIDESHOW) != null) { 
        log.info("Detected PresentationMLPackage package ");
        p = new PresentationMLPackage(this);
        return p;
    } else if (getPartNameOverridenByContentType(ContentTypes.SPREADSHEETML_WORKBOOK) != null
            || getPartNameOverridenByContentType(ContentTypes.SPREADSHEETML_WORKBOOK_MACROENABLED) != null
            || getPartNameOverridenByContentType(ContentTypes.SPREADSHEETML_TEMPLATE) != null
            || getPartNameOverridenByContentType(ContentTypes.SPREADSHEETML_TEMPLATE_MACROENABLED) != null) {
        //  "xlam", "xlsb" ?
        log.info("Detected SpreadhseetMLPackage package ");
        p = new SpreadsheetMLPackage(this);
        return p;

    } else if (getPartNameOverridenByContentType(ContentTypes.DRAWINGML_DIAGRAM_LAYOUT) != null) {
        log.info("Detected Glox file ");
        p = new GloxPackage(this);
        return p;
    } else {
        throw new InvalidFormatException("Unexpected package (docx4j supports docx/docxm and pptx only");
        //return new Package(this);
    }
} 
```

它似乎无法匹配某些特定的内容类型覆盖。在我的起始 docx 模板中有一个 [Content_Types].xml 文件，其中包含：

```
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
    <Override PartName="/_rels/.rels"       ContentType="application/vnd.openxmlformats-package.relationships+xml" />
    <Override PartName="/word/fontTable.xml"        ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml" />
    <Override PartName="/word/_rels/document.xml.rels"      ContentType="application/vnd.openxmlformats-package.relationships+xml" />
    <Override PartName="/word/media/image1.wmf"         ContentType="image/x-wmf" />
    <Override PartName="/word/comments.xml"         ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml" />
    <Override PartName="/word/numbering.xml"        ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml" />
    <Override PartName="/word/footer1.xml"      ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml" />
    <Override PartName="/word/document.xml"         ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml" />
    <Override PartName="/word/styles.xml"       ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml" />
    <Override PartName="/docProps/app.xml"      ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" />
    <Override PartName="/docProps/core.xml"         ContentType="application/vnd.openxmlformats-package.core-properties+xml" />
</Types> 
```

使用 POI 处理后，[Content_Types].xml 如下所示：

```
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
  <Default Extension="xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml"/>
  <Override PartName="/_rels/.rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
  <Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/>
  <Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/>
  <Override PartName="/word/_rels/document.xml.rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
  <Override PartName="/word/comments.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml"/>
  <Override PartName="/word/fontTable.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml"/>
  <Override PartName="/word/footer1.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml"/>
  <Override PartName="/word/media/image1.wmf" ContentType="image/x-wmf"/>
  <Override PartName="/word/numbering.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml"/>
  <Override PartName="/word/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml"/>
</Types> 
```

请注意，缺少 PartName="/word/document.xml" 的覆盖！

这是没有 word/document.xml 覆盖的可接受文件内容类型文件吗？它在 LibreOffice 中打开，没有任何投诉。docx4j 是否依赖于内容类型中可能不存在的覆盖标签，或者 POI 是否没有为我的某些文件正确编写内容类型（4 个中的 3 个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:29:20.307

**披露：我是 docx4j 项目负责人**

根据规范，POI 所做的似乎是合法的，但并不理想。

根据 ECMA-376 第 2 部分，“获取部件的内容类型”，当指定 POI 的方式时，docx4j 应该找到 docx 的内容类型。

第 1 部分中的 WordprocessingML 章节，在“包结构”部分中说：

> 首先，必须定义关系部分和主文档部分（唯一需要的部分）的内容类型（物理位于包中的 /[Content_Types].xml 中）：

```
<Types
 xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
 &lt;Default Extension="rels"
 ContentType="application/vnd.openxmlformatspackage.
 relationships+xml"/> 
<Override PartName="/document.xml"
 ContentType="application/vnd.openxmlformatsofficedocument.
 wordprocessingml.document.main+xml"/> </Types> 
```

我对此的理解是，您必须定义主文档部分的内容类型（POI 所做的），并且仅提示使用 Override 来执行此操作。

当大多数部分是 .xml 并且需要覆盖以指定不同的东西时，将 .xml 默认值用于匹配一个（或者可能是 2 或 3 个部分）的东西对我来说没有多大意义。我想知道为什么 POI 会这样做——与规范中的建议不同，也与 Word 发出的不同。

也就是说，[https://github.com/plutext/docx4j/commit/1c1190fc3a2fc6e191c825a0e30fde2654cc997c](https://github.com/plutext/docx4j/commit/1c1190fc3a2fc6e191c825a0e30fde2654cc997c)应该解决这个问题。

# php - 如何更改此代码以仅在 PHP 中显示一次输出？

> ID：15007555
> 
> 赞同：0
> 
> 时间：2013-02-21T16:37:41.843
> 
> 标签：php, preg-replace

基本上我有一个代码，当你输入一个列在数组中的单词时，它会从另一个数组中的一个单词中随机替换它。在这种情况下，我想将**$bye**中的单词替换为 $hello 中的单词，并将**$animal**中的单词随机替换为**$colour**中的单词。

这一切都很好，但我想知道的是我将如何制作它，以便在回声中它不会显示它两次而只是组合它。

例如，如果我输入**“bye my cat”**，它会给我例如**“hi my red”**，而不是它当前给出的**“yo my catbye my red”**。

这是我当前的代码：

```
$hello=array('hello', 'hi', 'yo');  //$replacements
shuffle($hello);

$animal = array('/mouse/', '/cat/', '/dog/'); //pattern

$colour = array('yellow', 'blue', 'red');  //$replacements
shuffle($dog);

echo preg_replace($bye, $hello, $words);
echo preg_replace($mouse, $dog, $words);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:42:00.947

```
echo preg_replace($mouse, $dog, preg_replace($bye, $hello, $words)); 
```

你可以把它们结合起来..

或将第一次替换的结果分配回`$words`，然后执行第二次

```
$words =  preg_replace($bye, $hello, $words);
echo preg_replace($mouse, $dog, $words); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:43:07.227

可能需要添加

```
echo '<br>'; 
```

在第一次 preg_replace 之后？甚至代替 preg_replace 这里适合 str_replace

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:50:01.530

我稍微修改了你的代码......这是一个概念问题：

```
<?php
$words= "bye my cat";
echo $words."</br>";

$hello=array('hello', 'hi', 'yo');  //$replacements
shuffle($hello);

$pattern = array('/bye/', '/cat/', '/dog/'); //pattern

$replacements = array('hello', 'red', 'blue');  //$replacements

echo preg_replace($pattern, $replacements, $words);

?> 
```

我希望你能清楚XD

PS：输出没问题。

萨卢多斯。

# networking - 如何使用 Wireshark 监控 Google 文档的实时更新？

> ID：15007560
> 
> 赞同：0
> 
> 时间：2013-02-21T16:37:47.543
> 
> 标签：networking, google-docs, wireshark, web-traffic, network-monitoring

我正在尝试更好地了解 Google 文档如何即时生成和处理更改文档的请求，并且想知道我是否可以使用 Wireshark 监控某些特定内容。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:53:06.067

Google Docs 使用 HTTPS 加密其通信。您无法监控任何与内容相关的特定更改，只能见证用户正在联系`docs.google.com`。

也就是说，如果您愿意深入研究[时序](http://www.ieee-security.org/TC/SP2011/PAPERS/2011/paper001.pdf) [分析](http://users.ece.cmu.edu/~dawnsong/papers/ssh-timing.pdf)领域，您也许可以从加密会话中重建细节。但这需要大量的手工工作。

# kml - 具有给定方位角的引脚的 KML 线

> ID：15007565
> 
> 赞同：0
> 
> 时间：2013-02-21T16:38:10.750
> 
> 标签：kml

我有一个点和方位角的坐标。我想在该点的坐标中放置一个大头针，并从该点开始画一条一定长度 L 的线段，并以某个给定的方位角定向。在 KML 中是否有一种简单的方法可以做到这一点？

我不想计算第二个点的坐标来绘制线段。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:06:14.013

似乎没有办法在 kml 本身中进行计算，因此必须在构建 kml 之前计算线段端点或从服务器提供 kml。因此，简短的回答似乎是不可能的。

但是我想知道您是否可以创建一个由已知长度和方向的线组成的模型，并在引脚位置绘制“模型”。当然，这将允许构建更复杂的线条，带有箭头或延伸到地面的平面等。

我尝试了一个使用 Google Sketchup 的快速示例，它似乎工作正常

希望这可以帮助

鲍勃·J。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:35:13.320

KML 不会为您进行计算。您需要自己进行计算。

# javascript - 使用 JS 进行样式设置时，CSS 优先级

> ID：15007566
> 
> 赞同：1
> 
> 时间：2013-02-21T16:38:11.880
> 
> 标签：javascript, css

这个问题是关于优先级的。我有一个`<ul>`包含我的导航项目的`<li>`我有一个 id 用于`<ul>`引用嵌套在其中的`<li>`和标签以进行样式设置。`<a>`这一切都很好，但是当我使用 JavaScript 向这些特定`<a>`标签添加一个类时，在将鼠标悬停在链接上时改变外观没有任何反应。

我知道代码是正确的，因为我已经对其进行了测试，但是在引用样式时，ID 样式似乎优先于 Class 样式。

我将如何寻找解决方案，我的一个想法是在添加类之前删除 mouseenter 上的现有 ID，然后在 mouseleave 上反之亦然。有更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:41:58.703

ID 样式更强大，但您也可以在添加样式链接的类时使用它。

所以，如果你的菜单是

```
<ul id="main">
    <li><a href=#></a></li>
</ul> 
```

并且 JS 将类“悬停”添加到元素，然后使用 CSS

```
#main .hovered {
.. styles here
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T16:40:42.933

尝试将 !important 添加到需要覆盖的值的 CSS 末尾。

```
.class { color: #fbfbfb !important; } 
```

# java - 高级项目实例管理问题

> ID：15007568
> 
> 赞同：0
> 
> 时间：2013-02-21T16:38:15.950
> 
> 标签：java

我一直在开发一个大型角色扮演游戏。问题是我在设计如何管理项目和库存系统时遇到了麻烦。目前我有类似的东西：

*   公共抽象类 Item 有 5 个嵌套类，它们都是抽象的和静态的，代表 Items 的类型。每个嵌套类都有唯一的 use()、delete()（最终确定类实例）和 sell()（触发删除）void。它们还具有可选的 getter 和 setter 方法，例如填充所有必要字段的 setAll() 方法。
*   默认值：具有基本价格、可交易性布尔值、字符串名称等...非常灵活
*   武器：除了默认类型具有的东西之外，它具有整数用于装备时的统计奖励（用于equip() 和 unequip() voids）。与公开课英雄互动。
*   装备：与武器类似，只是它有一个名为“EquipSlot”的枚举字段，用于确定装备的位置。
*   消耗品：与默认类似，只是有一个consume() void，允许玩家在使用英雄时对英雄应用某些效果。消费通常意味着触发 delete() void。
*   特殊：通常与任务相关的项目，其中“可交易”布尔值是*静态的、最终的并且总是错误*的。

现在，我制作定制物品的方式是这样的。

*   首先，我创建了一个新类（不是抽象的）
*   然后，我让它扩展 Item.ItemType
*   然后，我创建了一个内部有 setAll(info) void 的构造函数。
*   然后，我可以在其他类中使用这个类。

这一切看起来像这样：

```
package com.ep1ccraft.Classes.Items.Defaults;

import com.ep1ccraft.apis.Item.*;

public class ItemExample extends Item.Default {
    public ItemExample() { // Constructor
        this.setAll(lots of arguments here);
    }
} 
```

那么我可以这样做：

```
ItemExample something = new ItemExample(); 
```

而且我有一个完美的 ItemExample，其中包含我想要的所有属性，因此，我可以制作它的各种实例，并使用诸如“getName()”之类的惊人方法之类的东西。

问题在于命名实例，因为我不知道如何制作一个自动化表单，该表单将为实例提供与另一个实例不同的名称，因此它们不会发生冲突。另外，我想实现一个使用插槽作为容器并且可以保持堆栈（仅限可堆叠物品）的库存系统，它的主要特点是您可以将它们拖放到其他插槽中（例如，重新组织或移动到另一个库存实例，如银行，或放置在英雄的武器或装备槽中，如果允许的话），您可以单击它们以显示一个屏幕，其中显示项目的名称、描述和可能的操作（哪个触发前面提到的 delete() 和 use() 无效）。

感谢您阅读所有内容！我知道也许我要求太多，但无论如何我都会感激任何答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:36:49.360

所以基本上，您要求为您的对象提供一个唯一标识符。对此可能有无数种方法，但立即想到的三种不同方法是：

**1：一个UUID；就像是：**

```
java.util.UUID.randomUUID() 
```

*优点*：一个非常非常简单的解决方案......

*缺点*：它确实会生成大量字节（16 + 对象本身），占用内存/磁盘存储，这可能是 MMO 中的一个问题

**2：全球流水号；就像是：**

```
class ID {
    private static volatile long id = 0;
    public synchronized long nextId() {
        return id++;
    }
} 
```

*优点*：同样，一个简单的解决方案......

*缺点*：尽管这是一个非常简单的类，但它确实包含“易失性”和“同步”，这对于 MMO 来说可能是一个问题，尤其是在它被大量使用的情况下。此外，如果您的数字用完，运行 X 年后会发生什么。64 位长确实需要创建很多命名对象，毕竟这可能不是问题......你必须自己做数学。

**3：命名的全球流水号；就像是：**

```
class NamedID {
    private static volatile Map<String, Long> idMap = new HashMap<String, Long>();
    public synchronized long nextId(String name) {
        Long id = idMap.get(name);
        if (id == null) {
            id = 0;
        } else {
            id++;
        }
        idMap.put(name, id);
        return id;
    }
} 
```

*优点*：您可以将 id 的“本地化”设置为您使用的任何名称。

*缺点*：一个更复杂的解决方案，并且在速度方面比“2”差，因为同步持续时间更长。

注意：我不知道如何更快地提出最后一个建议；我想过使用 a `ConcurrentHashMap`，但这不起作用，因为它在较低级别上工作；即它不能保证两个线程在`idMap.get`和 `idMap.put`语句之间不会相互干扰。

# hash - MD5/SHA1 哈希函数需要更快、不安全的替换

> ID：15007570
> 
> 赞同：1
> 
> 时间：2013-02-21T16:38:20.060
> 
> 标签：hash, md5, sha1, checksum

我需要一个非加密安全散列函数，它产生至少 16 个字节的输出。

我目前正在使用 MD5，但它太慢了，大约是 5 倍。

Adler32、CRC32 等不产生所需的输出量。

有没有办法将校验和转换为哈希函数，产生所需的 16 字节以上的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T15:18:48.070

我最初使用了 4 个不同的 32 位校验和，并将它们的输出连接成 16 个字节。

然后我正确地解决了这个问题：[优化使用零流更新 MD5/SHA1](https://stackoverflow.com/questions/15007629/optimise-updating-md5-sha1-with-streams-of-zeros#comment-21094060)

# ruby-on-rails - 导轨 2.3。validates_uniqueness_of 一个序列化的字段

> ID：15007571
> 
> 赞同：0
> 
> 时间：2013-02-21T16:38:20.860
> 
> 标签：ruby-on-rails, serialization, validates-uniqueness-of

我在模型中有一个序列化的字段，当我尝试验证它的唯一性时，它不起作用。（在这个应用程序上仍然使用 Rails 2.3）

应用程序/模型/foo.rb

```
class foo < ActiveRecord::Base

   serialize :rules

   validates_uniqueness_of :rules

end 
```

我试图将内容存储在哈希字段中并验证内容哈希的唯一性。然后我遇到了回调顺序的另一个问题。

```
require 'digest/md5'

class foo < ActiveRecord::Base

   before_save :update_content_hash

   validates_uniqueness_of :content_hash

   def update_content_hash
      self.content_hash = OpenSSL::Digest::SHA1.hexdigest(self.rules.flatten)

   end
end 
```

但是，查看 Active Record 回调顺序后，before_save 是*在*验证后执行的，因此它将始终有效，因为默认值为 nil，之后它会更新为新的内容哈希。

[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

也许我没有想清楚，有什么解决办法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:45:25.243

尝试这个：

```
 before_validation :update_content_hash 
```

# mysql - sql查询字符串中的双引号

> ID：15007576
> 
> 赞同：0
> 
> 时间：2013-02-21T16:38:37.620
> 
> 标签：mysql, string

当尝试创建一个字符串来保存以下用于将 CSV 文件导入 MySql 的查询时，查询本身会阻止我尝试创建的字符串。

```
string Query = "load data local infile" + " " + "'" + Filename + "'" + " " + "into table" + " " + Table + "'FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES"; 
```

我对这`ENCLOSED BY '"'`部分有什么要求吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:41:06.630

您需要使用以下命令转义双引号字符`\`：`"\""`

```
string Query = "load data local infile" + " " + "'" + Filename + "'" + " " + "into table" + " " + Table + "' FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:12:57.467

这是完整的方法。

```
 public static void MySqlCSVImport(string Filename, string Table, string Server, string Database, string User, string Password)
        {
            try
            {
               //enclosed by '"'
                string connectionString = "server=" + Server + ";database=" + Database + ";User Id=" + User + ";password=" + Password + "";
                MySqlConnection mySqlConnection = new MySqlConnection(connectionString);
                mySqlConnection.Open();

                string Query = "load data local infile" + " " + "'" + Filename + "'" + " " + "into table" + " " + Table + "' FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES";

                MySqlCommand cmd = new MySqlCommand(Query, mySqlConnection);

                cmd.ExecuteNonQuery();

            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:33:32.010

如果对任何人有帮助，请通过以下方法修复该问题。

```
 public static void MySqlCSVImport(string Filename, string Table, string Server, string Database, string User, string Password, string Port)
        {
            try
            {
               //enclosed by '"'
                string FixFilePath = Filename.Replace(@":\", ":\\");
                string c = "'" + "\\n" + "'";
                string d = ";";

                string connectionString = "server=" + Server + ";database=" + Database + ";User Id=" + User + ";password=" + Password + "";
                MySqlConnection mySqlConnection = new MySqlConnection(connectionString);
                mySqlConnection.Open();

                string Query = "load data local infile" + " " + "'" + FixFilePath + "'" + " " + "into table" + " " + Table + " FIELDS TERMINATED BY ',' ENCLOSED BY '\"' LINES TERMINATED BY" + " " + c + d;

                MySqlCommand cmd = new MySqlCommand(Query, mySqlConnection);

                cmd.ExecuteNonQuery();

            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

# sharepoint - sharepoint 2010 dataformwebpart 下拉列表过滤器

> ID：15007577
> 
> 赞同：0
> 
> 时间：2013-02-21T16:38:39.177
> 
> 标签：sharepoint, sharepoint-2010, web-parts, sharepoint-designer, dataformwebpart

我在一个站点页面上有两个连接的 DataFormWebparts，一个 Web 部件过滤另一个 Web 部件中的数据，只要设计风格允许单击选项，即信息以文本格式排列，这就可以正常工作。

但是，如果我将样式更改为下拉列表，则过滤不再起作用。我假设这是因为不再有触发事件的超链接，但是有没有办法让它以这种格式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:55:53.440

jquery 来救援。隐藏链接。显示下拉列表并使用 jquery 或 javascript，触发链接单击下拉索引更改。尝试用谷歌搜索。希望这些提示有所帮助

面临同样的问题。我这样做是因为我没有多少时间

# java - Coldfusion和Java中的编码不同

> ID：15007579
> 
> 赞同：2
> 
> 时间：2013-02-21T16:38:47.153
> 
> 标签：java, android, coldfusion, coldfusion-10

当我用 charset 对字符串进行编码时，`UTF-8`它会在 Java 和 ColdFusion 中给出不同的结果

**要编码的字符串：**

```
 ONE TWO`< newline >`THREE FOUR 
```

**在 Android (Java) 中的结果：**

```
 ONE+TWO%0ATHREE+FOUR 
```

**ColdFusion 中的结果：**

```
 ONE%20TWO%0D%0ATHREE%20FOUR 
```

我认为`UTF-8`定义了一个标准，并且在使用`UTF-8`. 但似乎并非如此。我应该依赖哪个字符集？

## 编辑：

对字符串进行编码的 ColdFusion 代码：

```
<cfset encodedString = URLEncodedFormat(str,"UTF-8")> 
```

用于编码字符串的 Java 代码：

```
URLEncoder.encode(str,"UTF-8"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:41:07.727

您的问题**与 utf-8 无关**。因为这里只有普通的 ascii 字符！

您正在做的是 URL 编码，并且确实有多个版本。

在 HTTP 查询字符串中，空格被编码为`+`.

空间的百分比`%`编码是`%20`.

有时你可以使用任何一种编码，有时你不能......通常，使用空格，就像Android类所做的那样，*在我的经验*`+`中更兼容。因为那里有很多无法正确解码的损坏代码。

 *[https://en.wikipedia.org/wiki/Query_string#URL_encoding](https://en.wikipedia.org/wiki/Query_string#URL_encoding)

[https://en.wikipedia.org/wiki/Percent-encoding](https://en.wikipedia.org/wiki/Percent-encoding)*

# objective-c - 透明窗口中的圆形 NSView

> ID：15007580
> 
> 赞同：4
> 
> 时间：2013-02-21T16:38:48.913
> 
> 标签：objective-c, cocoa, nsview, nswindow

我正在尝试制作一个带有圆形视图的透明 NSWindow 。

我正在尝试使用透明窗口获得圆形视图。

这就是它现在的样子：（见角落里的小点）

![在此处输入图像描述](../Images/84a7fec36a174f1db8fb73472c6ea178.png)

这是另一个边框半径设置为 10px（在 NSView drawRect 中设置）的示例：

![在此处输入图像描述](../Images/0d00a70ca63928f7e6f5925c93ebd2e2.png)

我正在使用此 Apple 示例中的代码：[https ://developer.apple.com/library/mac/#samplecode/RoundTransparentWindow/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/RoundTransparentWindow/Introduction/Intro.html)

特别是我的 NSWindow 子类中的这个方法：

```
- (id)initWithContentRect:(NSRect)contentRect
                styleMask:(NSUInteger)aStyle
                  backing:(NSBackingStoreType)bufferingType
                    defer:(BOOL)flag {
    // Using NSBorderlessWindowMask results in a window without a title bar.
    self = [super initWithContentRect:contentRect styleMask:NSBorderlessWindowMask backing:NSBackingStoreBuffered defer:NO];
    if (self != nil) {
        // Start with no transparency for all drawing into the window
        [self setAlphaValue:1.0];
        // Turn off opacity so that the parts of the window that are not drawn into are transparent.
        [self setOpaque:NO];
    [self setBackgroundColor:[NSColor clearColor]];

    }
    return self;
} 
```

这在我的 NSView 子类中：

```
- (void)drawRect:(NSRect)dirtyRect
{
    [[NSColor redColor] set];
    NSBezierPath* thePath = [NSBezierPath bezierPath];
    [thePath appendBezierPathWithRoundedRect:dirtyRect xRadius:3 yRadius:3];
    [thePath fill];
} 
```

谁能告诉我我在这里缺少什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T18:02:20.113

Are you looking for something like the following, where there's a red outline (stroke), but the center area is transparent?

![enter image description here](../Images/d3bd8ffdf269fe86566fa4729aca251f.png)

If so, to achieve that, I used the following code:

```
- (void)drawRect:(NSRect)frame {
    frame = NSInsetRect(self.frame, 3.0, 3.0);

    [NSBezierPath setDefaultLineWidth:6.0];

    NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:frame
                                             xRadius:6.0 yRadius:6.0];
    [[NSColor redColor] set];
    [path stroke];
} 
```

If that's what you're looking for, you can probably use that as a starting point. You'll want to make sure that you inset the `frame` rect one half of the stroke line width, so as to avoid the problem with clipping the corners like you were seeing.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:52:32.927

不确定这是否是您正在寻找的，但 Matt Gemmell 有一个很棒的课程，名为 MAAttachedWindow，可以在这里找到：http: [//mattgemmell.com/2007/10/03/maattachedwindow-nswindow-subclass/](http://mattgemmell.com/2007/10/03/maattachedwindow-nswindow-subclass/)

它有点旧，但当我需要做一个“浮动”弹出窗口并配置透明度、边框半径，甚至在需要时为上下文添加一个小箭头时，它仍然对我很有用。我用它所有的时间。

# android - Android：待处理的通知意图应仅使用一次

> ID：15007581
> 
> 赞同：1
> 
> 时间：2013-02-21T16:38:49.817
> 
> 标签：android, notifications, launcher, android-pendingintent

我有一个对我来说似乎很奇怪的问题。当警报响起时，我会抛出不同的通知。每个通知都有一个pendingIntent，其中包含一个可序列化的对象。当我使用片段时，每个pendingIntent 都被发送到同一个活动，即主要活动。根据 pendingIntent 中包含的对象，会显示另一个片段。这很完美。问题是如果我关闭应用程序并通过启动器图标再次打开它，则显示的不是定义的主片段，而是前一个片段（已从通知创建）。正如我在 Logcat 中观察到的那样，似乎当我单击启动器图标时启动的 MainActivity 仍然显示为 pendingIntent。是不是pendingIntent用了之后就被删除了？我'

# android - 创建没有 Eclipse 的 Android 签名 APK。.

> ID：15007587
> 
> 赞同：0
> 
> 时间：2013-02-21T16:39:04.180
> 
> 标签：android, android-layout, android-intent

我有一些要求，我需要在没有 Eclipse 的情况下创建 android 签名的 APK。任何人都可以指导我有什么办法可以做到这一点？我使用 eclipse 开发了一个项目。现在我有完整的项目，我想在没有 eclipse 的情况下创建它的 APK。. . 提前加星-:)p。。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:59:38.087

您将需要使用 ant 工具进行构建。[Google 在此处](http://developer.android.com/tools/building/building-cmdline.html)提供了一些有关您如何执行此操作的文档。您也可以查看[本教程](http://www.vogella.com/articles/AndroidBuildAnt/article.html)以供参考。

# function - 对静态字符使用左函数

> ID：15007588
> 
> 赞同：1
> 
> 时间：2013-02-21T16:39:09.883
> 
> 标签：function, ms-access-2010, trim

是否可以使用 Left 函数或其他更适合的函数将字段中的值左修剪为静态字符，在这种情况下为破折号？破折号之前没有固定数量的字符，因此长度会更大或更小，但字段中始终会有破折号。

以下是该字段中可能存在的一些值的示例：

测试 1 - 测试 1 描述

测试 1 测试 2 - 测试 1 测试 2 说明

测试1 测试2 测试3 - 测试1 测试2 测试3 说明

Test4 - Test4 说明

修剪后，记录一的最终结果将是 Test1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:40:59.257

您可以混合使用 Left 或 Mid 和 Instr。

```
 Left(Description,Instr(Description,"-")-1) 
```

其中 Description 是您的字段的名称。

# c# - 运行 FFTPitchDetector 时出现 IndexOutOfRangeException

> ID：15007590
> 
> 赞同：0
> 
> 时间：2013-02-21T16:39:15.180
> 
> 标签：c#, fft, naudio

我在实施时遇到了一些问题`FFTPitchDetector`。我真正想做的是从吉他输入中获取实时频率，我不太确定如何使用`FftPitchDetector.cs`. 任何想法？

```
private void sourceStream_DataAvailable(object sender, NAudio.Wave.WaveInEventArgs e)
{    
   if (waveWriter == null) return;

    byte[] buffer = e.Buffer;
    float[] floats = new float[buffer.Length];
    float sample32 = 0;
    int bytesRecorded = e.BytesRecorded;

    waveWriter.Write(buffer, 0, bytesRecorded);

    for (int index = 0; index < e.BytesRecorded; index += 2)
    {
        short sample = (short)((buffer[index + 1] << 8) |
                                buffer[index + 0]);
        sample32 = sample / 32768f;
        sampleAggregator.Add(sample32);
    }

    floats = bytesToFloats(buffer);

    FftPitchDetector PitchDetect = new FftPitchDetector(sample32);
    PitchDetect.DetectPitch(floats, bytesRecorded);

    Console.WriteLine("{0}",sample32);
}

private static float[] bytesToFloats(byte[] bytes)
{
    float[] floats = new float[bytes.Length / 2];

    for (int i = 0; i < bytes.Length; i += 2)
    {
        floats[i / 2] = bytes[i] | (bytes[i + 1] << 8);
    }

    return floats;
} 
```

当我执行代码时，有一个错误`IndexOutOfRangeException was unhandled`指向该行

```
fftBuffer[n * 2] = buffer[n-inFrames] * window(n, frames); 
```

在`fftPitchDetector.cs`. 我的代码有什么问题？

有没有 C# Guitar Tuner 的开源代码？我希望将其外包到我的项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:46:25.477

问题是，`fftBuffer[]`或者`buffer[]`您试图访问数组中不存在的索引。

因此，如果`fftBuffer[]`有 4 个项目并且`n * 2`总计 6 个，那么您正在尝试访问`fftBuffer[6]`不存在的项目。

所以基本上你需要在尝试访问它们的值之前检查每个数组中有多少项目。

您需要在代码中进行检查，例如：

```
if ((n * 2) < fftBuffer.length && (n - inFrames) < buffer.length) {
    fftBuffer[n * 2] = buffer[n-inFrames] * window(n, frames);
} 
```

首先确保要用于每个数组的索引不大于数组的项目数。

# c# - 如何通过代码动态更新listviewitem

> ID：15007591
> 
> 赞同：0
> 
> 时间：2013-02-21T16:39:16.017
> 
> 标签：c#, wpf, listview

我有一个列表视图，并且想更新特定列表视图项（行）的其中一列的文本。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:24:19.097

没有任何上下文很难说，因为有很多方法可以填充您的列表！

通用答案是您将列表绑定到集合视图，该集合视图本身将其源绑定到您的视图模型（或者如果您不需要`CollectionView`功能，则直接绑定到您的视图模型）。

当您想要修改列表时，请确保在您的属性上[发出修改通知](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.85%29.aspx)，并且 XAML 绑定将负责更新所有内容。

这真的是关于依赖属性和绑定的基本内容，你应该阅读更多关于这个主题的内容。[MVVM-light](http://www.galasoft.ch/mvvm/)是一个非常轻量级的框架，它允许您以非常干净整洁的方式处理各种与绑定相关的问题。您还可以从网站作者那里找到一些关于所有这些主题的非常好的不言自明的网络广播。

# c++ - pcap_next 调用用 len 填充 pcap_pkthdr 等于 0

> ID：15007595
> 
> 赞同：1
> 
> 时间：2013-02-21T16:39:23.610
> 
> 标签：c++, c, libpcap

我正在使用作为静态库（**libpcap.a**）构建的**1.1.1**版**libpcap 。**当我尝试在 RHEL 6 64 位（可执行模块本身构建为 32 位 ELF 映像）上执行以下代码块时，出现分段错误：

 ****```
const unsigned char* packet;
pcap_pkthdr pcap_header = {0};
unsigned short ether_type = 0;

while ( ether_type != ntohs( 0x800 ) )
{
    packet = pcap_next ( m_pcap_handle, &pcap_header );
    if (packet != NULL)
    {
        memcpy ( &ether_type, &( packet[ 12 ] ), 2 );
    }
    else
    {
    /*Sleep call goes here*/
    }
}

if ( raw_buff ->data_len >= pcap_header.caplen )
{
    memcpy ( raw_buff->data, &(packet[14]), pcap_header.len -14 );
    raw_buff->data_len = pcap_header.len -14;
    raw_buff->timestamp = pcap_header.ts; 
} 
```

一些调查显示**pcap_header.len**字段在**pcap_next**返回时等于零。事实上**caplen**字段似乎正确地反映了数据包的大小。如果我尝试从**数据包**地址转储数据包内存 - 数据似乎是有效的。由于**len**字段等于零，我知道它是无效的。它应该至少是**卡普伦**量级。它是一个错误吗？我应该采取什么步骤来解决这个问题？

GDB将**pcap_header**内容显示为：

(gdb) p pcap_header

$1 = {ts = {tv_sec = 5242946，tv_usec = 1361456997}，caplen = 66，len = 0}

也许我可以应用一些解决方法？我不想升级**libpcap**版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:40:55.443

2.6.27 之前的内核不支持在 64 位内核上使用 libpcap 1.0 或更高版本运行 32 位二进制文​​件。

libpcap 1.0 及更高版本在可用的 Linux 内核上使用“内存映射”捕获机制，并且该机制的第一个版本并没有确保内核和使用“内存映射”捕获机制的代码之间共享的数据结构在 32 位和 64 位模式下以相同的方式在内存中布局。

2.6.27 内核之前的 2.6 内核只有该机制的第一个版本。2.6.27 内核具有该机制的第二个版本，它*确实*确保在 32 位和 64 位模式下数据结构在内存中的布局方式相同，因此 32 位用户模式代码的工作方式相同在 32 位和 64 位内核之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:20:04.417

希望我用谷歌搜索“ [https://bugzilla.redhat.com/show_bug.cgi?id=557728](https://bugzilla.redhat.com/show_bug.cgi?id=557728) ”缺陷描述，现在看来它仍然相关。当我将我的应用程序链接到**libpcap**的共享库版本而不是将它与静态链接时，问题就消失了。然后一个系统在运行时将我的应用程序链接到一个**libpcap** ，该 libpcap随 RHEL 一起提供。

此致，亚历山大·切尔尼亚耶夫。****

# ios - 如何在 iOS 应用中更改 fb 对话框标题？

> ID：15007596
> 
> 赞同：2
> 
> 时间：2013-02-21T16:39:30.693
> 
> 标签：ios, facebook, dialog, facebook-ios-sdk, apprequests

如何更改“发送请求”对话框中的标题？

![在此处输入图像描述](../Images/aa043751e786296332ada024269d6827.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:16:45.997

您可以在 presentRequestsDialogModallyWithSession 方法中设置 title 参数。

```
 [FBWebDialogs
     presentRequestsDialogModallyWithSession:nil
     message:msg
     title:@"Change your title here"
     parameters:nil
     handler:nil
 ]; 
```

# php - 如何从字符串中删除 iframe 标记？

> ID：15007597
> 
> 赞同：5
> 
> 时间：2013-02-21T16:39:31.207
> 
> 标签：php

我有这种类型的字符串，带有 iframe（youtube 视频）。如何从字符串结尾仅回显文本中删除 iframe？

```
Scelerisque scelerisque. Sit elit vut sit, aliquam. Elementum. Enim dignissim nisi mauris, aliquet aenean, proin, porttitor tristique et, pulvinar tincidunt! Diam risus eu diam, ultrices diam pulvinar platea ridiculus augue adipiscing aliquet adipiscing a mid lundium, ultricies eros, pulvinar? Etiam, sagittis dignissim egestas sit.<iframe width="560" height="315" src="http://www.youtube.com/embed/f8Q_BHzJ0fI" frameborder="0" allowfullscreen></iframe>Cum integer. Sit nisi. Augue, risus, scelerisque aliquam aliquet nunc nascetur purus! Diam ut sit lundium a phasellus ac pulvinar egestas nec! Lectus urna habitasse lacus turpis nunc quis tortor integer. 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-21T16:43:24.857

```
$string = preg_replace('/<iframe.*?\/iframe>/i','', $originalString); 
```

# javascript - Javascript 数组 - 如何选择一个随机十六进制值？

> ID：15007603
> 
> 赞同：1
> 
> 时间：2013-02-21T16:39:53.203
> 
> 标签：javascript, arrays

我有一个部分十六进制值的数组，这些值将随机字母附加到它们上，形成一个完整的十六进制值。

然后将这些随机应用于 div 层，有效地为它们着色不同的颜色。然而，我目前得到的是“马蒂斯”效果，而不是一种颜色的变化。

如果你强制`var color = setHex();`使用**getRandomColor**函数，你会看到我想要的效果`var color = '#CC0';`。

 **我想知道为什么当我应该只传递一个十六进制值时会发生“马蒂斯”效应。我该如何阻止这个？

**请参阅此处的示例：http:** [//jsfiddle.net/fyQhg/](http://jsfiddle.net/fyQhg/)

```
// Set Hex

function setHex() {

var hexArray = ['#CC0','#FF9','#339'];
var randomHex = hexArray[Math.floor(Math.random() * hexArray.length)];

document.getElementById('inner').innerHTML = randomHex;

return randomHex;

}

// random color
function getRandomColor() {
var letters = '0123456789ABCDEF'.split('');

var color = setHex();
for (var i = 0; i < 3; i++ ) {
    color += letters[Math.round(Math.random() * 7)];
}
return color;
}

//ditribute random colors
function buttonClick() {

var i,j, colorblock = document.getElementsByClassName('shade');
    for (i=0, j=colorblock.length; i<j; i++) {
            colorblock[i].style.background = getRandomColor();
        }   
    }

    window.onload = buttonClick(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:45:44.983

```
var base = setHex();
// random color
function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = base;   

    for (var i = 0; i < 3; i++ ) {
            color += letters[Math.round(Math.random() * 7)];
    }

    return color;
} 
```

在方法之外声明基数是可行的。[**例子**](http://jsfiddle.net/fyQhg/1/)

* * *

**解释**

在这种方法中：

```
for (i=0, j=colorblock.length; i<j; i++) {
    colorblock[i].style.background = getRandomColor();
} 
```

您`getRandomColor()`在该循环中反复调用。因此，您也在`setHex()`重复调用，每次循环循环时都会创建一个新的随机颜色。

因此，通过移出`setHex()`该循环内的方法，`base`您实际上`setHex()`每次加载只调用一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:50:32.780

为什么？因为函数`getRandomColor()`调用`setHex()`每次都会返回其他内容。

如何停止？

```
var color = setHex();
for (i=0, j=colorblock.length; i<j; i++) {
        colorblock[i].style.background = getRandomColor(color);
    }   
} 
```

和

```
function getRandomColor(color) {
    var letters = '0123456789ABCDEF'.split('');

    for (var i = 0; i < 3; i++ ) {
        color += letters[Math.round(Math.random() * 7)];
    }
    return color;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:50:32.230

每次您打电话时，`getRandomColor`您都是在打电话`setHex`并选择另一种随机基色。只需设置一次基色，将其存储在变量中并使用它。

例如：

```
var hexBase;

function setHex() {
    var hexArray = ['#CC0','#FF9','#339'];
    if (!hexBase) {
         hexBase = hexArray[Math.floor(Math.random() * hexArray.length)];
    }
    return hexBase; 
} 
```

[小提琴](http://jsfiddle.net/fyQhg/3/)

似乎您已经接近此解决方案，因为您将 setHex 的结果存储在 div 中，但您再也没有检查过它。此外，当您可以将它们存储在 JavaScript 中时，您不需要将它们存储在 DOM 中。

最后，如果您想避免使用全局变量，您可以将整个事物包装在一个函数中（例如您的`onload`函数或 IIFE）。**

# c++ - 从 Complex* 到 double 的无效转换

> ID：15007606
> 
> 赞同：1
> 
> 时间：2013-02-21T16:39:58.447
> 
> 标签：c++, casting, double

我必须返回两个复数之间的距离，我得到的错误是在返回行中显示“从 Complex* 到 double 的无效转换”。

```
double Complex::distance(const Complex &a, const Complex &b)
{
    Complex *number = new Complex();

    number->modificaRe(a.real() - b.real());
    number->modificaIm(a.imag() - b.imag());

    return (double)number;
} 
```

你能告诉我我做错了什么吗？更不用说老师给我们这个函数的定义是“静态双精度”，但我又遇到了另一个错误，所以我只是删除了“静态”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:44:13.343

问题是一个替身不能同时携带复数的实部和虚部。

我相信两个复数之间的距离是差异平方和的平方。

所以，你的代码应该是......

```
double Complex::distance(const Complex &a, const Complex &b)
{
  double number;

  double r = a.real() - b.real();
  double i = a.imag() - b.imag();

  number = sqrt(r*r + i*i);

  return number;
} 
```

正如 H2CO3 指出的那样，使用 std::hypot 可能会更安全......所以

```
double Complex::distance(const Complex &a, const Complex &b)
{
  return std::hypot(a.real() - b.real(), a.imag() - b.imag());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:53:03.667

最简单的解决方案是使用标准库的[`std::comlpex`](http://en.cppreference.com/w/cpp/numeric/complex)类模板。您可以使用减法并`std::abs`获得“距离”：

```
#include <complex>
#include <iostream>

template <typename T>
T complex_distance(const std::complex<T>& a, const std::complex<T>& b)
{
  return std::abs(b-a);
}

int main()
{
  std::complex<double> c1(-1,-1);
  std::complex<double> c2(2,2);
  std::cout << (c2-c1) << std::endl;
  std::cout << complex_distance(c2,c1) << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:53:49.433

如果我没记错的话，可以使用 pythagorus 计算距离 - 因此不需要在 distance() 中创建 Complex 对象。

```
double Complex::distance(const Complex &a, const Complex &b)
{    
    double x = a.real() - b.real();
    double y = a.imag() - b.imag();

    return sqrt(x * x + y * y);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:42:09.037

不支持从指向 a 的指针强制转换为`Complex`a 。`double`甚至不清楚为什么要在此处创建指针而不是仅将其分配到堆栈上。

例如：

```
double Complex::distance(const Complex &a, const Complex &b)
{
    Complex number;

    number.modificaRe(a.real() - b.real());
    number.modificaIm(a.imag() - b.imag());

    return (double)number;
} 
```

# jquery - 使用jquery动态删除图像

> ID：15007610
> 
> 赞同：0
> 
> 时间：2013-02-21T16:40:12.810
> 
> 标签：jquery

我知道使用 jquery，如果我想在点击事件上加载图像运行时，使用这种语法，

```
 $("#open_door").attr("src", "../assets/door_open.gif"); 
```

但是如果我想在另一个按钮的单击事件中删除相同的图像运行时，那么？我想要相同的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:41:47.007

如果您无法从 dom 中删除图像，请将其隐藏：

```
$("#open_door").css("display","none"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:50:12.527

您可以简单地将 elemenet 的可见性 css 属性更改为隐藏。这将允许它保持其在页面布局中的位置，但不会被看到。

```
$('#open_door').css('visibility', 'hidden'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:42:16.993

你可以这样做：

```
$("#open_door").attr("src", ""); // Set the src to "" (nothing) 
```

或者：

```
$("#open_door").remove(); // remove #open_door from the DOM. 
```

关于您对问题的评论，在 SO 的其他地方找到了这个：

```
$("#myimg").removeAttr("src").attr("src", ""); 
```

或者作为最后的手段，您可以将完全白色的图像上传到您的服务器，并改为显示：

```
$("#open_door").attr("src", "path/to/white/image.jpg"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T21:51:43.003

我对 Safari 也有类似的问题。它不会让我将属性设置为空白值。我想要一个按钮来触发一个简短的 gif 动画播放一次……在这种情况下，Spock 给了 Kirk 一个很好的 SMACK！

这是动画： [http ://www.lowbird.com/data/images/2012/06/tumblr-lq96pfhnuq1qlc8fao1-400.gif](http://www.lowbird.com/data/images/2012/06/tumblr-lq96pfhnuq1qlc8fao1-400.gif)

我的解决方案对我来说有点麻烦，但我使用了 .hide() 方法。如果您希望动画再次显示，您只需在更早的时间再次 .show() div。干得好：

```
 $('#smackKirk').on('click', function(){
    $('#animate').show(); // not necessary in chrome     
    $('#animate').attr("src", "http://www.lowbird.com/data/images/2012/06/tumblr-lq96pfhnuq1qlc8fao1-400.gif");
    setTimeout(function() {
        $('#animate').attr('src',"");
            $('#animate').hide(); // not necessary in chrome 
    }, 2400); 
```

# php - wamp 中的梨安装

> ID：15007611
> 
> 赞同：0
> 
> 时间：2013-02-21T16:40:14.343
> 
> 标签：php, wamp, pear

我在 Windows 7 上运行 wamp 2.2。当我尝试**pear install phpunit/PHPUNIT 时**。它显示了一些**mkdir**问题。然后我尝试

```
pear config-set autodiscover 1 
```

**PEAR_Config::writeConfigfile fopen<'C:\windows\pear.ini','w'> failed<'C:\windows\pear.ini'>: failed to open stream: Permission denied**
然后我检查了我的 pear.bat 文件. 我在下面看到一些警告，

```
REM launch pearcmd
GOTO RUN
:PEAR_INSTALL_ERROR
ECHO PHP_PEAR_INSTALL_DIR is not set correctly.
ECHO Please fix it using your environment variable or modify
ECHO the default value in pear.bat
ECHO The current value is:
ECHO %PHP_PEAR_INSTALL_DIR%
GOTO END
:PEAR_INSTALL_ERROR2
ECHO PHP_PEAR_INSTALL_DIR is not set correctly.
ECHO pearcmd.php could not be found there.
ECHO Please fix it using your environment variable or modify
ECHO the default value in pear.bat
ECHO The current value is:
ECHO %PHP_PEAR_INSTALL_DIR%
GOTO END
:PEAR_BIN_ERROR
ECHO PHP_PEAR_BIN_DIR is not set correctly.
ECHO Please fix it using your environment variable or modify
ECHO the default value in pear.bat
ECHO The current value is:
ECHO %PHP_PEAR_BIN_DIR%
GOTO END
:PEAR_PHPBIN_ERROR
ECHO PHP_PEAR_PHP_BIN is not set correctly.
ECHO Please fix it using your environment variable or modify
ECHO the default value in pear.bat
ECHO The current value is:
ECHO %PHP_PEAR_PHP_BIN%
GOTO END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:43:23.610

安装程序正在寻找位于环境变量中的 PEAR 目录`PHP_PEAR_INSTALL_DIR`。那里提供的说明说要在 pear.bat 中设置安装目录或设置该环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:58:17.447

“failed to open stream: Permission denied”表示由于缺少写权限而无法写。我看到它正在尝试写入 windows 文件夹，而您正在使用 windows 7。UAC 可能会阻止写入尝试。如果您没有尝试在具有提升权限的命令窗口中运行批处理文件，我建议您这样做。

右键单击 CMD > 以管理员身份运行

执行 .bat 文件

# php - 哪里不存在mysql

> ID：15007613
> 
> 赞同：0
> 
> 时间：2013-02-21T16:40:23.087
> 
> 标签：php, mysql

当有人访问我的站点时，我想记录用户 ip，但是当您到达站点时，该表可能不存在，因此 UPDATE 查询给了我一个错误。而且我还需要检查现有表。我试过：阅读，但如果表不存在，似乎没有一个能解决这个问题。**这可能是一个错字。**

```
$db->query("INSERT INTO track (tm, user_agent, host, ip, port, lang) VALUES ('$tm','$user_agent','$host','$ip','$port','$lang') WHERE NOT EXISTS (
    SELECT ip FROM track WHERE ip='$ip'"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T16:44:10.687

您可能想查看[INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)，它允许您在密钥已存在时指定操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:45:41.297

我发现你的错字了。

您的（坏）代码具有更好的格式：

```
$db->query("
    INSERT INTO track (
        tm, 
        user_agent, 
        host, 
        ip, 
        port, 
        lang
    ) 
    VALUES (
        '$tm',
        '$user_agent',
        '$host',
        '$ip',
        '$port',
        '$lang'
    ) 
    WHERE NOT EXISTS 
    (
        SELECT ip FROM track WHERE ip='$ip'
"); 
```

修复后：

```
$db->query("
    INSERT INTO track (
        tm, 
        user_agent, 
        host, 
        ip, 
        port, 
        lang
    ) 
    VALUES (
        '$tm',
        '$user_agent',
        '$host',
        '$ip',
        '$port',
        '$lang'
    ) 
    WHERE NOT EXISTS 
    (
        SELECT ip FROM track WHERE ip='$ip'
    ) -- that was missing
"); 
```

无论如何，您可能需要这样的东西：

```
 // check if ip exists
    $query = $db->$query("
        SELECT count(ip) FROM track WHERE ip='$ip'
    ");

    $result = $query->fetchFirstRowSomehow(); // i dont know methods you have in $db object

    $rows = $result['0']; // getting first (only) column that should contain count()

    if ($rows == 0)
    {
        // your insert code here
    }
    else
    {
        // your update code here
    } 
```

# php - 用于 codeigniter 的 datamapper orm。关于加载时间和关系

> ID：15007619
> 
> 赞同：0
> 
> 时间：2013-02-21T16:40:45.423
> 
> 标签：php, codeigniter, codeigniter-datamapper

我正在构建一个基于 codeigniter 的诊所管理/患者电子记录项目，我决定选择一个 orm，因为我的数据库之间有很多关系。

所以我下载了datamapper 1.8.2并开始了一个新的codeigniter项目，我首先注意到的是加载时间！

codeigniter 欢迎页面现在在 1 秒 ++ 内加载！还没有任何逻辑！这是正常的吗？它可以接受吗？通常 ci 在我的机器上加载 0.002 秒，但使用**datamapper orm 时它的 1.06 处于最佳状态！**

第二个问题是关于关系的。

例如，我有 2 张桌子

表 1 用户。我用来存储我所有的办公室人员，还有角色

示例（用户）

```
|ID|name|role   |
|1 |Demo|admin  |
|2 |Demo|doctor |
|3 |Demo|nurse  |
|4 |Demo|patient| 
```

第二张桌子是访问

```
|id|doctor_id|patient_id|.....
|1 |2        |4         |...... 
```

那么我该如何设置这个，以便datamapper能够理解用户中的每个用户都有一个角色，以及表访问`has_one(doctors,patient)`和用户（医生，患者）`has_many(visits)`？因为每次就诊必须只有一位医生和一位患者，但每位患者/医生可以多次就诊。

当前设置试用

```
class Visit extends DataMapper {
    var $has_one = array(
        'doctor' => array(
            'class' => 'user',
            'join_self_as' => 'doctor_id',
            'other_field' => 'visit'
        ),
        'patient' => array(
            'class' => 'user',
            'join_self_as' => 'patient_id',
            'other_field' => 'visit'
        )
    );
    var $has_many = array(); 
```

用户

```
class User extends DataMapper {
    var $has_one = array();
    var $has_many = array(
        'visit' => array(
            'class' => 'visit',
            'other_field' => 'doctor_id',
            'join_self_as' => 'doctor_id',
        )
    ); 
```

但是当我尝试通过

```
$u=new user(2);
$u->visit->get(); 
```

它给了我错误

```
DataMapper Error: 'doctor_id' is not a valid parent relationship for Visit. Are your relationships configured correctly? 
```

帮助 ？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:13:32.597

无论有没有 ORM，作为开发人员，您始终必须了解您使用的工具，在这种情况下，您编写的代码用于生成在您的数据库中触发的查询。随着查询的进行，Datamapper 比大多数更有效，尽可能使用连接而不是多个查询。

要查看 Datamapper 生成了哪些查询，请启用 CI 的分析器。您将很快看到您的代码是否有效，或者您是否必须运行更多查询。

您是否启用了生产缓存？如果没有，Datamapper 将为您加载的每个模型、每个页面请求运行一个 DESCRIBE TABLE。虽然这在开发中是可以的（当您的表结构仍在更改时），但这在生产中不是一个好主意，并且可能会占大部分时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:37:09.673

你的关系没有正确定义：

```
class Visit extends DataMapper {
    var $has_one = array(
        'doctor' => array(
            'class' => 'user',
            'join_self_as' => 'doctor',
        ),
        'patient' => array(
            'class' => 'user',
            'join_self_as' => 'patient',
        )
    );

class User extends DataMapper {
    var $has_many = array(
        'visit' => array(
            'join_other_as' => 'doctor',
        )
    ); 
```

您只需覆盖非默认值，Datamapper 将填写其余部分。另外，不要使用 '_id' 后缀，它是强制性的，Datamapper 会自动添加它。

对于访问，您必须指定在关系中使用哪个 FK 来表示它自己的 'id'，对于 'doctor' 关系将是 'doctor_id'，对于 'patient' 关系将是 'patient_id'。

对于用户，您必须告诉它另一个表中的 FK 不是“visit_id”（这是默认值），而是“医生 ID”。

# awk - 直接从文本文件中绘制函数

> ID：15007620
> 
> 赞同：7
> 
> 时间：2013-02-21T16:40:46.247
> 
> 标签：awk, gnuplot

有没有办法根据文本文件中的值绘制函数？

我知道如何在 gnuplot 中定义一个函数然后绘制它，但这不是我需要的。我有一个表，其中包含定期更新的函数的常量。当这个更新发生时，我希望能够运行一个用这条新曲线绘制图形的脚本。由于要绘制的数字很少，我想使该过程自动化。

这是一个带有常量的示例表：

```
location a  b  c
1        1  3  4
2 
```

我看到有两种方法可以解决问题，但我不知道它们是否以及如何实施。

1.  然后我可以使用 awk 生成字符串：`f(x)=1(x)**2+3(x)+4`，将其写入文件并以某种方式让 gnuplot 读取这个新文件并在一定`x`范围内绘图。
2.  或者在 gnuplot 中使用 awk 之类的东西`f(x) = awk /1/ {print "f(x)="$2`，或者直接在 plot 命令中使用 awk。

无论如何，我被卡住了，还没有在网上找到解决这个问题的方法，你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T13:03:52.210

另一种可能为此提供一些通用版本，您可以执行以下操作：

假设，参数存储在一个文件`parameters.dat`中，第一行包含变量名称，其他所有参数集，如

```
location a b c
1        1 3 4 
```

脚本文件如下所示：

```
file = 'parameters.dat'
par_names = system('head -1 '.file)
par_cnt = words(par_names)

# which parameter set to choose
par_line_num = 2
# select the respective string
par_line = system(sprintf('head -%d ', par_line_num).file.' | tail -1')
par_string = ''
do for [i=1:par_cnt] {
  eval(word(par_names, i).' = '.word(par_line, i))
}
f(x) = a*x**2 + b*x + c

plot f(x) title sprintf('location = %d', location) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T17:43:25.400

这个问题（[gnuplot 将一个数字从数据文件存储到变量](https://stackoverflow.com/questions/11211339/gnuplot-store-one-number-from-data-file-into-variable)中）在第一个答案中对我有一些提示。

就我而言，我有一个包含抛物线参数的文件。我已将参数保存在 gnuplot 变量中。然后我绘制包含每个时间步的参数变量的函数。

```
#!/usr/bin/gnuplot

datafile = "parabola.txt"

set terminal pngcairo size 1000,500
set xrange [-100:100]
set yrange [-100:100]
titletext(timepar, apar, cpar) = sprintf("In timestep %d we have parameter a = %f, parameter c = %f", timepar, apar, cpar)

do for [step=1:400] {
  set output sprintf("parabola%04d.png", step)

  # read parameters from file, where the first line is the header, thus the +1
  a=system("awk '{ if (NR == " . step . "+1) printf \"%f\", $1}' " . datafile)
  c=system("awk '{ if (NR == " . step . "+1) printf \"%f\", $2}' " . datafile)

  # convert parameters to numeric format
  a=a+0.
  c=c+0.

  set title titletext(step, a, c)

  plot   c+a*x**2
} 
```

这给出了一系列名为 parabola0001.png、parabola0002.png、parabola0003.png、...的 png 文件，每个文件都显示一个抛物线，其中包含从名为 .png 的文件中读取的参数`parabola.txt`。标题包含给定时间步的参数。

要了解 gnuplot`system()`函数，您必须知道：

*   gnuplot 不解析双引号内的内容
*   点用于连接 gnuplot 中的字符串
*   必须对 awk`printf`命令的双引号进行转义，以将它们隐藏在 gnuplot 解析器中

要测试这个 gnuplot 脚本，请将其保存到具有任意名称的文件中，例如`parabolaplot.gplot`并使其可执行 ( `chmad a+x parabolaplot.gplot`)。该`parabola.txt`文件可以创建

`awk 'BEGIN {for (i=1; i<=1000; i++) printf "%f\t%f\n", i/200, i/100}' > parabola.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:45:46.140

```
awk '/1/ {print "plot "$2"*x**2+"$3"*x+"$4}' | gnuplot -persist 
```

将选择线并绘制它

# magento - 应用目录价格规则之前的 Magento 产品价格

> ID：15007622
> 
> 赞同：1
> 
> 时间：2013-02-21T16:41:02.000
> 
> 标签：magento, product

我希望能够在应用目录价格规则之前在我的 Magento 商店中显示产品的价格。理想情况下，我只想在后端的“价格”框中输入数字，没有税，没有规则，没有任何类型的修改。

`$_product->getFinalPrice()`非常适合在所有这些规则之后显示最终价格，通常正是我所需要的。有没有显示“非最终”价格的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:43:16.070

假设它是一个标准产品对象，您可以使用`$_product->getPrice()`which 应该检索在该产品后端的价格字段中输入的值。

# c - 使用零流优化更新 MD5/SHA1

> ID：15007629
> 
> 赞同：4
> 
> 时间：2013-02-21T16:41:13.803
> 
> 标签：c, optimization, cryptography, md5, sha1

是否可以优化功能：

```
MD5_Update(&ctx_d, buf, num); 
```

如果你知道`buf`它只包含零？

或者这在数学上是不可能的？

SHA1 也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:03:02.720

如果您控制哈希函数的输入，那么您可以使用简单的计数而不是所有的零，也许使用某种转义。例如，十六进制的 000020 可能意味着 32 个零。（非常）基本的压缩功能可能比 MD5 或 SHA1 快得多。

显然，如果您保存一个或多个哈希计算块，此解决方案只会更快。例如，散列 3 个字节或 16 个字节都没有关系，因为输入将在使用之前由散列函数填充和扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:53:55.823

密码散列实际上应该对输入的微小变化产生显着的输出变化，请参阅[http://en.wikipedia.org/wiki/Avalanche_effect](http://en.wikipedia.org/wiki/Avalanche_effect)。听起来您正在寻找一些散列数据和一些预先用零填充的散列数据之间的某种关系。按照设计，您输入的这种更改应该会产生不明确相关的输出。

编辑：要直接回答您的问题，通过设计“密钥或明文的微小变化应该会导致密文发生剧烈变化”，这意味着它*在*数学上很难做到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:55:50.703

你可能会得到一些加速，但它会相对较小。高性能散列最重要的是选择优化的实现，如果可能的话，使用 GPU（甚至 FPGA/ASIC）来利用并行性。

SHA-1 有一个已知的加速，它具有固定的 IV 和只有一点不同的消息。这个加速大约是 21%。请参阅[新攻击使某些密码破解速度更快 - Ars Technica](http://arstechnica.com/security/2012/12/oh-great-new-attack-makes-some-password-cracking-faster-easier-than-ever)。

当您有一个完全固定的消息但变量 IV 时，您可能会获得类似的加速。但要实现这一点需要做很多工作，尤其是作为非专家。购买额外的硬件可能*比*将代码加速几个百分点便宜得多。

* * *

如果消息的开头包含多个常量块，则可以对它们进行一次哈希处理，并缓存哈希函数的中间状态。可能适用于您的情况，也可能不适用于您的情况。

# facebook - 在 iframe 中托管使用 Facebook 登录的页面

> ID：15007631
> 
> 赞同：1
> 
> 时间：2013-02-21T16:41:20.847
> 
> 标签：facebook, iframe

有没有办法显示FB登录：

> `https://www.facebook.com/login.phpskip_api_login=1&next=https%3A%2F%2Fwww.facebook.com%2Fdialog%2Foauth%3Fclient_id%3D199667856843796%26redirect_uri%3Dhttps%253A%252F%252Flocalhost%252FShoppingCart%252FLogin%252FExternalLoginCallback%253F__provider__%253Dfacebook%2526__sid__%253Dc750cc60beac497fbad2dfd340921f7e%26scope%3Demail%26from_login%3D1&cancel_uri=https%3A%2F%2Flocalhost%2FShoppingCart%2FLogin%2FExternalLoginCallbac...`

在 IFrame 中？

我正在使用 MVC 4 OAuthWebSecurity.RegisterFacebookClient 进行 FB 登录，并且该页面托管在 iframe 中

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:58:05.620

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T08:52:44.440

您可以尝试为 facebook 登录打开新窗口，然后返回您的 iframe

# objective-c - #import 的用法——在非常大的项目中使用 #import 的一般准则 (ObjC)

> ID：15007636
> 
> 赞同：0
> 
> 时间：2013-02-21T16:41:33.893
> 
> 标签：objective-c, xcode, dependencies, header-files, build-time

`#import`我的标头和实现在哪里？
有关于我应该做什么的规则吗？
有没有办法在单个头文件中导入所有内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T06:48:43.943

鉴于*“在大型项目中使用#import 的一般准则。* ”。

嗯，Objective-C 在这方面很像 C 和 C++。将所有`#include`s/ `#import`s 填充到您的标头中会引入许多不必要的依赖关系，这会为您的构建增加大量时间。因此，还可以在有关 C 和 C++ 依赖项的主题中寻求更多信息。

> #import 我的标头和实现在哪里？

通常，您应该`#import`只在存在物理依赖的地方编写。由于每个 objc 对象都进行了引用计数，并且您的属性/变量通常不需要存在于标头中，因此`#import`s 远低于 C++。

Robin van Dijke 在他的回答 (+1) 中概述了身体依赖的常见情况。

> 有关于我应该做什么的规则吗？有没有办法在单个头文件中导入所有内容？

好吧，这取决于您的项目的大小。有些人将他们使用的所有框架都添加到 PCH（预编译头文件）中。有些人把最常用的放在 PCH 中，有些人根本不使用 PCH 文件。构建时间越长，项目越复杂，PCH 应该包含的内容就越少。

如果您正在处理“非常大”的项目，您可能不应该在 PCH 中添加更多的 Foundation。

另一个常见的错误是有些人会使用 PCH，因此他们需要输入更少（几乎）。问题在于他们项目的常见包含/标题更改，当发生这种情况时，必须完全重建目标。

此外，如果您可以避免`#import`在标头中添加框架/库，则可以节省大量构建时间。

向标头添加`#import`s 会导致依赖关系进一步扩散。大量不相关的代码/框架很容易对一些源文件可见，而实际上对大部分源文件可见。

最后，您应该真正尝试将经常更改的标题保留在其他标题之外。

最大的收获是你应该：

*   根据功能分离您的程序
*   赞成前向声明超过`#import`. 编译器必须知道名称，但通常只有在创建/发送对象时才需要导入。
*   尝试将依赖项重的实现保留在`*.m`文件中。

每隔一段时间，它可以帮助检查一些源文件的预处理输出——看看实际`#import`编辑了什么——结果可能会非常令人惊讶。

笔记：

*   必须为项目中的每种语言生成 PCH。
*   根据需要编译源代码；例如，如果您有 C 程序，请不要将它们编译为 ObjC。
*   随着项目复杂性的增加，除以目标（例如静态库、模块、逻辑划分测试......）所获得的收益将会增加。以低依赖性正确构建依赖目标本身就是一个很大的话题。如果结构正确，它确实可以帮助您以更高的频率构建和测试（如果您使用持续集成或拥有多个开发人员，这也很重要）。就像头文件依赖一样，如果您从一开始就没有考虑到这一点，那么旧问题可能需要花费大量工时来纠正（在它已经变得难以忍受的缓慢之后）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T08:33:34.093

可以使用以下约定：

在以下情况下在头文件中使用`#import`- 您对导入的类进行子类化 - 您使用来自导入的头文件的协议 - 您使用来自导入的头文件的其他 C 数据结构（枚举、结构）

例子：

```
#import "SuperClass.h"
#import "Protocol.h"

@class SomeOtherClass

@interface Subclass : SuperClass <Protocol>
    SomeOtherClass _instanceVariableToOtherClass
@end 
```

否则`@class`在头文件中使用

对于所有其他情况，`#import`请在 .m 文件中使用。

注：`#import "class.h"`其实是这样的：

```
#pragma once
#include "class.h" 
```

因此，请注意每个类只导入一次以防止包含循环/循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T11:45:28.753

[首先阅读这个官方网站，这可能对你有帮助。](https://developer.apple.com/library/mac/#referencelibrary/GettingStarted/Learning_Objective-C_A_Primer/)

它类似于，`#include`语句中的`C language`，

基本上`#import`声明有两个定义，

```
1) #import "headerFile.h" // This statement is use for Import any header file in current file (UIController)

2) #import<FramWorkName> // This statement basically use for add any framework in current file (UIController) 
```

要在项目中的任何位置使用任何文件，然后将文件 ( `#import "fileName.h"`) 添加到`.pch file`. **它是 Prefix 头文件**被编译并存储在缓存中，然后在编译期间自动包含在每个文件中。这可以加快编译速度，并允许您包含一个文件，而无需向使用它的每个文件添加导入语句。它们不是必需的，而且每次更改它们时编译速度实际上都很慢。此文件在您的项目中可用`.pch file extension`。

**像这样：**

```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import "MyFile_Name.h" 
```

您还可以使用`PROTOCOL`for 定义要由其他类实现的方法。

[有关如何创建的更多信息`POTOCOL`，这里是详细的最佳示例。](http://iosdevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T18:59:37.630

只是为了好玩-我将添加一些“基本原则”-尽管没有已经说过*的那么详细-有时可以帮助理解整个“过程”。*

`Implementation.m`文件永远不会（*据我所知*）`#import`'ed - 这就是编译器在“编译”时“正在做”的事情。

您希望所有已编译 ( `.m`) 文件“了解”的任何标头都可以放入`.pch`文件中。我通常还会将所有类共享的指令（即`#import <Cocoa/Cocoa.h>`等）粘贴在其中 - 所以我不必在每个文件中*查看它们。*

如果您要在头文件中引用***以前未声明的类***，即`AppDelegate.h`

```
@property (nonatomic, strong) HTTPServer *http; 
```

你*可以* `#import "HTTPServer.h" at the top of that file (or even in the`.pch`)...但通常最好如下引用“转发类”...

```
 @class HTTPServer;
 @interface AppDelegate : NSObject  ➜ ... 
```

然后`#import "HTTPServer.h"`在`AppDelegate`'s`.m`文件中。*您需要访问*头文件的主要原因......是在您自己的类的“范围”内**调用**该外部类的**实例的**方法和**使用属性等。**这就是为什么你可以简单地在你的标题中“提及”“逃脱” - 你实际上还没有对它做任何事情。**`@class`**

 **唯一需要考虑的另一件事 - 如果您正在构建独立应用程序，这可能不是这种情况 - 但是在构建框架或捆绑包等时......您的类*将*在“API-kind- of-way”……您可能希望在构建过程中添加一个“复制文件”阶段，这将允许“其他人”通过您的“公共头文件”文件“了解”您的类。在这种情况下......您可以简单地公开一个头文件，该文件导入您的类所需的前向声明，供其他人使用`#import`. 这就是您能够访问“伞形框架”中所有类的方式，例如`<Foundation/Foundation.h>`使用单个`#import`......它在第一个“.h”文件中公开了它“可用”的标题...... á la。 .

```
#import <Foundation/NSArray.h>
#import <Foundation/NSAutoreleasePool.h> 
```

如果您曾经在 Xcode 之前使用过编译器，那么考虑它的方式是，您需要导入的任何标头都与`-I`命令行上的“包含”指令相同。给定一个头文件和一个包含语句`src/headers/header.h`的源代码文件..编译命令将是`source.c``#include "header.h"`

`gcc -Iheaders/ source.c -o executable`

您可以通过导航到“日志导航器”和 Xcode 并检查所有步骤来了解在 Xcode 中编译某些内容时实际发生的情况。

![代码日志](../Images/19d9996498a24ed6cf1c8e9f7a5332e4.png)**

# python - 删除行读引起的回车

> ID：15007637
> 
> 赞同：24
> 
> 时间：2013-02-21T16:41:40.340
> 
> 标签：python, python-2.7

我有一个清单：

```
Cat
Dog
Monkey
Pig 
```

我有一个脚本：

```
import sys
input_file = open('list.txt', 'r')
for line in input_file:
    sys.stdout.write('"' + line + '",') 
```

输出是：

```
"Cat
","Dog
","Monkey
","Pig", 
```

我想要：

```
"Cat","Dog","Monkey","Pig", 
```

我无法摆脱处理列表中的行时出现的回车。最后摆脱 , 的奖励点。不知道如何找到并删除最后一个实例。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-21T16:42:32.003

[str.rstrip](http://docs.python.org/2/library/stdtypes.html#str.rstrip)或简单的[str.strip](http://docs.python.org/2/library/stdtypes.html#str.strip)是从文件读取的数据中拆分回车符（换行符）的正确工具。注意 str.strip 将从两端删除空格。如果您只对剥离换行感兴趣，只需使用`strip('\n')`

换行

```
 sys.stdout.write('"' + line + '",') 
```

至

```
sys.stdout.write('"' + line.strip() + '",') 
```

请注意，在您的情况下，一个更简单的解决方案是

```
>>> from itertools import imap
>>> with open("list.txt") as fin:
    print ','.join(imap(str.strip, fin))

Cat,Dog,Monkey,Pig 
```

或仅使用列表理解

```
>>> with open("test.txt") as fin:
    print ','.join(e.strip('\n') for e in  fin)

Cat,Dog,Monkey,Pig 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-21T16:43:58.007

您可以使用[`.rstrip()`](http://docs.python.org/2/library/stdtypes.html#str.rstrip)从字符串的右侧删除换行符：

```
line.rstrip('\n') 
```

或者您可以告诉它删除*所有*空格（包括空格、制表符和回车符）：

```
line.rstrip() 
```

它是从字符串两侧*删除*空格或特定字符的[`.strip()`方法](http://docs.python.org/2/library/stdtypes.html#str.strip)的更具体版本。

 *对于您的*特定*情况，您可以坚持使用简单`.strip()`的方法，但对于您只想删除换行符的一般情况*，*我会坚持使用 `.rstrip('\n')。

我会使用不同的方法来编写你的字符串：

```
with open('list.txt') as input_file:
    print ','.join(['"{}"'.format(line.rstrip('\n')) for line in input_file]) 
```

通过使用`','.join()`你避免了最后一个逗号，并且使用该[`str.format()`方法](http://docs.python.org/2/library/stdtypes.html#str.format)比很多字符串连接更容易（更不用说更快了）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:48:28.000

首先，为了让它全部出现在一行上，你应该去掉`'\n'`. 我发现`line.rstrip('\n')`工作得很好。

为了摆脱最后的“，”，我会将所有单词放在一个列表中，并加上引号。然后使用join()，用“，”连接列表中的所有单词

```
temp = []
for line in file:
    i = line.rstrip('\n')
    word = '"'+i+'"'
    temp.append(word)
print ",".join(temp) 
```

那应该得到所需的输出*

# linux - cron.daily 的脚本

> ID：15007640
> 
> 赞同：1
> 
> 时间：2013-02-21T16:41:45.910
> 
> 标签：linux, cron

我需要让我的 Java 程序每天在 linux 机器上运行一次。所以我用一行创建了一个简单的文件：

```
java -jar /opt/location/my_jar.jar 
```

并将其放入 etc/cron.daily 中，假设它每天运行一次。但它根本不运行。我尝试使用 .sh 扩展名，或者只是没有扩展名的文件名。尽管如此，还是没有运气。

我用谷歌搜索了它，我得到了很多相互矛盾的信息。有人可以帮忙吗？

编辑：

根据 Satish 和 Mithrandir 给出的答案，我正在总结它现在的位置。

1.我使用 vi 创建了 run_conversions 脚本，以解决 Windows 上的行尾字符问题。现在脚本是

```
#!/bin/sh
/usr/bin/java -jar /opt/location/my_jar.jar 
```

2.我把它放在/etc/cron.hourly。

3.检查 /var/log/cron 的日志我看到它每小时开始 run_conversions 并完成 run_conversions。到目前为止，一切都很好。

4.但我的 jar 文件似乎没有运行。我知道这一点，因为当它正常运行时，它应该更新数据库——而数据库没有更新。

5.这是奇怪的事情：当我手动运行 cron.hourly 时，但调用

```
run-parts /etc/cron.hourly 
```

jar 文件被正确命中，并且数据库正在更新。

总结一下：通过运行部件运行它时，它可以工作。当让它每小时运行一次时，它不会。

有任何想法吗？

编辑2：

根据 Satish、Mithrandir 和 vahid 的建议，我将 run_conversions_loc 更改为如下所示：

```
#!/bin/bash
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bexport SHELL=/bin/bash
/usr/bin/java -jar /opt/tf/conversions/aff_networks2.jar > /opt/tf/conversions/runconversions.txt 
```

我从 cron.hourly 中删除了脚本，并将这一行添加到 crontab：

```
*/10 * * * * /opt/tf/conversions/run_conversions_loc 
```

该脚本现在每 10 分钟运行一次，并在 cron 日志中注册，如下所示：

```
Feb 24 09:30:01 backsome CROND[7933]: (root) CMD (/opt/tf/conversions/run_conversions_loc) 
```

到目前为止，它看起来不错。但是数据库——它应该更新——没有更新。

`ftr.properties`深入研究一下，jar 文件 aff_networks2.jar 正在本地目录中寻找一个文件——与它所在的目录相同。该文件存在于该目录中。但它没有正确读取。我知道这是因为在输出文件 runco​​nversions.txt 中，应该从属性文件中读取的值是 null。

完成图片需要两件事：

1.  转换目录中的所有内容都有 777 权限。我知道不建议提供这样的扩展权限，但我想确保（至少尝试）这不是问题。

2.  当我通过调用它从 shell 运行脚本时`./run_conversions_loc`，会找到属性文件并更新数据库。我以 root 身份登录到 shell，我还以 root 身份创建了所有相关文件，并以 root 身份安装了用于在 crontab 中调用脚本的行。

有什么想法为什么 cron 不读取属性文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:09:18.660

示例解决方案：

在命令行上手动运行命令：

```
[root@04 cron.daily]# /usr/bin/java -jar /root/HelloWorld.jar
Hello World #1 
```

让我们在 / 中创建一个脚本`etc/cron.daily/test.sh`并赋予执行权限：

```
#!/bin/bash
/usr/bin/java -jar /root/HelloWorld.jar 
```

**注意：**运行`dos2unix`以防您遇到 dos 字符问题或错误`/bin/bash^M: bad interpreter: No such file or directory`

```
[root@04 cron.daily]# unix2dos test.sh
unix2dos: converting file test.sh to DOS format ... 
```

测试一下，瞧！！

```
[root@04 cron.daily]# run-parts /etc/cron.daily
/etc/cron.daily/ldiscan:

kcore: Value too large for defined data type
/etc/cron.daily/test.sh:

Hello World #1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:58:56.120

its probably your environment variables

does it work as the current user logged in when executing the script ?

if so

run:

```
env|egrep "(^PATH=|^SHELL=)"|awk '{print "export "$1}' 
```

then take the output and put it on the top of your script and try another cron in 2 minutes from now to see if it worked

**Updated answer in response to Eddy's Comment 24th Feb 2013.**

I want to give you a crash course on crontab.

1.  setting up crontab can be done via global /etc/crontab or under user as crontab -e (to edit specific user's cron) or crontab -l (lists - stored in /var/spool/cron for each user)

I see you are trying to attempt a run ever 10 minutes which is fine in /etc/crontab

The reason why I suggested giving the entire class path of your current shell is because most of the time the script is trying to use a unix command that is not available as part of the crontab's PATH (which resides right at the very top of /etc/crontab file itself)

To debug path issues its usually a good idea to watch the mailbox of the user that crontab is executing the task as : so tail -100 /var/spool/mail/root and looking out for any messages related to that cron task as well as the cron logs itself as someone has suggested -

I do not think your problem is paths here though..

You are trying to run a java jar file and it may be that your jar file needs other files in that conversion folder and that when you are running it you are already in that folder....

so in your script you could run

```
cd /opt/tf/conversions/;
 /usr/bin/java -jar aff_networks2.jar > /opt/tf/conversions/runconversions.txt 
```

But since this is such a small script you could get away with placing the entire thing as a cron entry and bypassing a shell script altogether something like this

```
*/10 *    * * *   root cd /opt/tf/conversions/; /usr/bin/java -jar aff_networks2.jar > /opt/tf/conversions/runconversions.txt 
```

Hope this helps solve this issue

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:47:56.623

将您的文件更改为：

```
#!/bin/sh
/usr/bin/java -jar /opt/location/my_jar.jar 
```

检查是否`/usr/bin/java`实际上是安装命令的位置 ( `which java`)。将文件的权限更改为可执行：

```
chmod +x /opt/location/my_jar.jar 
```

# asp.net - 访问资源集合项时出现 ArgumentOutOfRangeException

> ID：15007646
> 
> 赞同：0
> 
> 时间：2013-02-21T16:41:50.550
> 
> 标签：asp.net, exception, infragistics, outofrangeexception

我在哪里可以在 asp.net 生命周期方法中创建此对象而不会收到超出范围的异常。现在，我真正可以获得包含值的资源集合的唯一地方是用于 webschedule 信息的 onreasourcefetched 方法。但是我需要在创建 webscheduleinfo 并且它的视图中填充用户之前执行此操作。

```
protected void Page_Init(object sender, EventArgs e)
        {
            ResourcesCollection resources = WebScheduleInfo1.VisibleResources;

            int count = resources.Count;
            Resource obje = (Resource)resources.GetItem(1);
            string name = obje.Name;
            resources.Clear();
            resources.Add(obje);
            this.WebScheduleInfo1.ActiveResourceName = name;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:58:22.473

You are getting a count of resources but you are not checking to make sure that count is greater than 0.

`(Resource)resources.GetItem(1)` will fail unless the resources collection has at least 2 items in it.

The collection is 0 based, so if you want the first item do something like this:

```
protected void Page_Init(object sender, EventArgs e)
{
    ResourcesCollection resources = WebScheduleInfo1.VisibleResources;

    int count = resources.Count;

    if( count > 0 )
    {
        Resource obje = (Resource)resources.GetItem(0);
        string name = obje.Name;
        resources.Clear();
        resources.Add(obje);
        this.WebScheduleInfo1.ActiveResourceName = name;
    }
} 
```

# wpf - 如何在 XAML 中创建具有单个行属性的列表视图？

> ID：15007649
> 
> 赞同：0
> 
> 时间：2013-02-21T16:41:59.067
> 
> 标签：wpf, visual-studio-2010, xaml, listview, expression-blend

这是我想要做的一个模型：

[https://www.dropbox.com/s/1nw78dqxuulvq73/Tree-01.png](https://www.dropbox.com/s/1nw78dqxuulvq73/Tree-01.png)

这是迄今为止我在 XAML 中的代码（尽管我认为我没有正确解决问题）：

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="CCListView.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">

<Grid x:Name="LayoutRoot">

<Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="auto"/>
    <ColumnDefinition Width="*"/>
</Grid.ColumnDefinitions>

<ListView Grid.Row="0" Grid.Column="0" ItemContainerStyle="{DynamicResource CustomListViewItemStyle}"
          AlternationCount="2" Background="black" BorderThickness="0">

        <ListView.View>
            <GridView>
                <GridViewColumn Header="Title" DisplayMemberBinding="{Binding Path=ContInfo}" />
            </GridView>
        </ListView.View>

    <ListViewItem>
        <ListViewItem.FontSize>15</ListViewItem.FontSize>
        <ListViewItem.Foreground>black</ListViewItem.Foreground> 
        <ListViewItem.Content>test</ListViewItem.Content>     
    </ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>       

</ListView>

    <ListView Grid.Row="0" Grid.Column="1" ItemContainerStyle="{DynamicResource CustomListViewItemStyle}"
          AlternationCount="2" Background="black" BorderThickness="0">

        <ListView.View>
            <GridView>
                <GridViewColumn Header="Title" DisplayMemberBinding="{Binding Path=ContInfo}" />
            </GridView>
        </ListView.View>

    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>
    <ListViewItem>test</ListViewItem>       

</ListView>
</Grid> 
```

任何帮助将不胜感激！谢谢！维斯代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:45:45.363

我认为您可以使用 GroupStyle 和 CollectionViewSource 绑定来实现这一点。

参考示例图片上的名称，您需要为“组”对象提供视图模型。在该视图模型中，您将拥有“Item”对象的 ObservableCollection。

然后，您将在窗口的 Resources 部分中有一个 CollectionViewSource，它绑定到 Group 对象的集合。然后为您的 ListBox 创建一个 GroupStyle，它可以针对 DataTemplates 来格式化 ListBox 中的数据。

我知道我可能没有很好地解释这一点，所以我提供了一个指向具有类似功能的项目的链接。

[http://msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

# node.js - ZeroMQ 上的每个队列都需要自己的端口吗？

> ID：15007657
> 
> 赞同：1
> 
> 时间：2013-02-21T16:42:19.583
> 
> 标签：node.js, zeromq

我们希望在 nodejs 中构建一个外观，它将接受来自客户端的请求，然后使用请求/回复模式将请求分流到多个服务到多个不同的后端服务。我们希望在后端服务之一关闭的情况下将这些请求保留在单独的队列中。从最初阅读 ZeroMQ 文档开始，似乎每个队列都绑定到自己的端口。向套接字发送消息时，似乎没有办法命名要发送到的队列/主题。端口和队列之间是否存在一对一的映射？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:44:13.323

ZeroMQ 没有“队列”或“主题”的概念。您的应用程序由任务组成，通过某种协议（例如 tcp://）连接，并以各种模式相互发送消息。在您的示例中，一项任务将绑定到地址：端口，并且工作人员将连接到它。然后，发送者将请求发送到其套接字，后者将它们分发给工作人员。

学习 ZeroMQ 的最佳方法是在设计自己的应用程序之前至少阅读指南的前几章。您熟悉的许多现有消息传递概念通过 ZeroMQ 消失在更简单的模式中。

# c++ - 文件变得非常需要将数据分离到另一个文件中，但也需要使用私有变量。我怎样才能正确地做到这一点？

> ID：15007659
> 
> 赞同：0
> 
> 时间：2013-02-21T16:42:27.823
> 
> 标签：c++, file

所以我有一个巨大的（遗留）文件，称之为 HUGE.cxx。我正在添加新功能，但文件变得越来越大。我尝试为不同的工作创建不同的类，但对于某些任务，我需要访问私有变量。这是正在发生的事情的粗略草稿

```
//HUGE.h
class Huge{
  NewFeature object;
  //...more stuff
};

//HUGE.cxx
Huge::Huge(){    
  //imagine object keeps track of id->func callback
  object.on('uniqueID1', boost::bind(&HUGE::onID1Clicked,this));
}
void Huge::onID1Clicked()const{ return satisfiesSomeCondition(); }
//called internally when user right clicks
void Huge::createPopup()const{
   for itr = object.begin to end  
      callback = itr->second;
      //if satisfies condition add to popupmenu
      if(callback()) addToPopupMenu( itr->first );
}
//event handler
void Huge::event(id){
  //oh uniqueID1 was clicked as a menu item in right click
  case 'uniqueID1': doSpecificFunctionality(); break;
} 
```

所以你看，我有一些依赖项，但是文件太大了，我的更改也是如此。您对进一步分离成更多文件有什么建议吗？我知道我可以向 Huge 文件添加一个朋友声明并添加另一个类，但如果可能的话想避免这个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:47:56.730

听起来您实际上需要进行重大重构，将关注点分离到适当的位置。

但是，为了解决您眼前的问题，没有特别的理由为什么`Huge`需要在`Huge.cxx`. 您可以将函数定义拆分为单独的文件，只要每个函数都在*某处*定义。

你最终可能会得到：

*   `Huge.h`
*   `Huge-private.cxx`
*   `Huge-public.cxx`

或者，拆分代码是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:48:23.747

只要所有`.cxx`文件包括`HUGE.h`，并且所有使用的函数都在那里声明（应该是这种情况），您就可以将实现拆分为任意数量的`.cxx`文件。您甚至可以将每个函数放入自己的文件中。

要调用一个函数，编译器只需要从`HUGE.h`. 稍后，当所有编译的文件链接在一起时，链接器将适当地组合来自不同目标文件的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T16:48:54.543

严肃的建议：了解重构 ( [http://refactoring.com](http://refactoring.com) ) 和设计模式。

没有看到*整个*事情，很难或不可能告诉你一些真正具体的事情。你可能需要一个重构弹药库。对于某些部分，提取方法和合并通用功能是正确的；对于其他部分，依赖倒置可能是首选工具。

除了一些临界质量之外，（干净的）重写可能是最明智和最有利可图的事情：首先定义输入和预期输出是什么（在此期间，编写测试）。

# c# - AutoMapper 并将日期时间转换为字符串

> ID：15007660
> 
> 赞同：21
> 
> 时间：2013-02-21T16:42:29.400
> 
> 标签：c#, .net, linq, automapper

我无法理解以下问题。我感觉这是 LINQ 和表达式树的限制，但不确定如何接受 lambda 主体。我可以在不创建自定义转换器的情况下实现这一目标吗？

```
 Mapper.CreateMap<I_NEWS, NewsModel>()                  
              .ForMember(x => x.DateCreated, opt => opt.MapFrom(src => {
                  var dt = (DateTime)src.DateCreated;
                  return dt.ToShortDateString();                      
              })); 
```

我收到此错误： **无法将带有语句体的 lambda 表达式转换为表达式树**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T14:52:20.570

要使用 lambda 主体，请使用`.ResolveUsing`而不是`.MapFrom`.

根据[作者](https://github.com/AutoMapper/AutoMapper/issues/227)：

> *MapFrom 有一些额外的东西需要表达式树（如空检查等）。*

所以你的陈述看起来像这样：

```
 Mapper.CreateMap<I_NEWS, NewsModel>()                  
              .ForMember(x => x.DateCreated, opt => opt.ResolveUsing(src => {
                  var dt = (DateTime)src.DateCreated;
                  return dt.ToShortDateString();                      
              })); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-21T16:44:58.950

尝试这个：

```
Mapper.CreateMap<I_NEWS, NewsModel>().ForMember(x => x.DateCreated,
  opt => opt.MapFrom(src => ((DateTime)src.DateCreated).ToShortDateString())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-29T06:12:16.403

如果 Nullable 是目的地，那么：

`Mapper.CreateMap() .ForMember( dest => dest.StartDate, opt => opt.MapFrom( src => string.IsNullOrEmpty(src.StartDate) ? new DateTime?() : DateTime.ParseExact(src.StartDate, DATEFORMAT, CultureInfo.InvariantCulture) ) )`

# vb.net - 按钮颜色更改在其他计算机上不起作用

> ID：15007663
> 
> 赞同：0
> 
> 时间：2013-02-21T16:42:39.683
> 
> 标签：vb.net, winforms, button, timer

我有一个奇怪的问题，我似乎无法弄清楚。我有一个计时器，它每 3 秒运行一次，并将按钮颜色更改为黄色、黑色或绿色，具体取决于是否有待处理的计划、没有计划或当前正在运行的计划。

当我进入调试模式并添加计划或运行一次时，它在我的计算机上运行良好，它会改变颜色。我把这个程序放到一个虚拟机上，用同样的数据参数做了同样的计划，但是按钮没有改变颜色。我在两台机器上都安装了 .net 4.0。

```
Public Sub createTimer()

        buttonTimer = New Timer()
        buttonTimer.Start()
        buttonTimer.Interval = 3000
        AddHandler buttonTimer.Tick, AddressOf buttonTimer_Tick 
```

加载页面时，从 runonce 函数调用 createTimer()。

```
Public Sub buttonTimer_Tick(sender As Object, e As EventArgs)

  If Scheduler.AutomationRunning = True Then
       btnAutoStartMenu.ForeColor = Color.Green
  ElseIf Scheduler.AutomationRunning = False And Automation.ScheduleList.Count > 0 Then
       btnAutoStartMenu.ForeColor = Color.Yellow
  ElseIf Scheduler.AutomationRunning = False And Automation.ScheduleList.Count = 0 Then
       btnAutoStartMenu.ForeColor = Color.Black
  End If 
```

我想知道它可能是我未包含在安装程序中的 dll 吗？但是颜色变化似乎很容易内置到 .net 框架中，所以在两者上都有 4.0 应该可以解决这个问题吗？

编辑：另外，在另一个虚拟机实例上尝试过，同样的问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:24:04.387

@RoadBump 是正确的。如果`Scheduler`是会发生什么`Nothing`？

您应该通过添加一些错误处理来获得更多线索：

```
Try
    If Scheduler.AutomationRunning = True Then
       btnAutoStartMenu.ForeColor = Color.Green
    ElseIf Scheduler.AutomationRunning = False And Automation.ScheduleList.Count > 0 Then
       btnAutoStartMenu.ForeColor = Color.Yellow
    ElseIf Scheduler.AutomationRunning = False And Automation.ScheduleList.Count = 0 Then
       btnAutoStartMenu.ForeColor = Color.Black
    End If
Catch ex as Exception
    btnAutoStartMenu.ForeColor = Color.Red
End Try 
```

因此，如果您的按钮变红，那么您需要开始进一步调查

# java - Weka：没有在 Java API 中获取输出

> ID：15007668
> 
> 赞同：0
> 
> 时间：2013-02-21T16:42:53.017
> 
> 标签：java, machine-learning, classification, weka

我正在实现一个分类过滤器，它根据训练数据中存在的属性进行过滤。

```
//implement filter that standardizes via training set
Standardize filter = new Standardize();
filter.setInputFormat(trainingData);

//create a classifier
M5P m5p = new M5P();

//Create a filtered classified, set its filter and classifier
FilteredClassifier fc = new FilteredClassifier();
fc.setFilter(filter);
fc.setClassifier(m5p);

// train and make predictions
fc.buildClassifier(trainingData);
for (int i = 0; i < testingData.numInstances(); i++) {
    double pred = fc.classifyInstance(testingData.instance(i));
    System.out.print("ID: " + testingData.instance(i).value(0));
    System.out.print(", actual: " + testingData.classAttribute().value((int) testingData.instance(i).classValue()));
    System.out.println(", predicted: " + testingData.classAttribute().value((int) pred));
} 
```

然后代码*应该*做出一些预测。但是，我得到空白输出。

```
ID: 6.0, actual: , predicted: 
ID: 4.0, actual: , predicted: 
ID: 4.0, actual: , predicted: 
ID: 5.0, actual: , predicted: 
ID: 5.0, actual: , predicted: 
ID: 4.0, actual: , predicted: 
ID: 4.0, actual: , predicted: 
ID: 7.0, actual: , predicted: 
```

有想法该怎么解决这个吗？谢谢！

# batch-file - 批量读取嵌套 FOR 循环中的文件

> ID：15007672
> 
> 赞同：0
> 
> 时间：2013-02-21T16:42:55.760
> 
> 标签：batch-file

我正在尝试访问文件并在嵌套循环中读取其内容，但内部循环无法访问该文件..（批量）

这是代码（整个脚本的一小部分）：

```
for %%b in (!directory!) do (
   echo File used: %%b
   for /f "delims= " %%c in (%%b) do (
      echo %%c
   )
) 
```

问题是：

如果“%%b”等于“C:\Documents and settings\test\test.txt”，内部循环将尝试访问“C:\Documents”（因为有空格）。如果我在“%%b”周围加上双引号，它会将其解析为字符串而不是文件本身。

我该如何处理？该文件是动态的，我不知道它的名称...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:14:40.807

使用 FOR /F 读取名称中包含空格的文件时，您需要使用 USEBACKQ 选项。USEBACKQ 改变了各种引号的语义。通常无引号表示文件，双引号表示字符串，单引号表示命令。USEBACKQ 选项修改为无引号或双引号表示文件，单引号表示字符串，反引号表示命令。在命令提示符下键入`HELP FOR`以获取更多信息。

```
for %%b in (!directory!) do (
   echo File used: %%b
   for /f "usebackq delims= " %%c in ("%%b") do (
      echo %%c
   )
) 
```

# c++ - 圆霍夫中心坐标

> ID：15007673
> 
> 赞同：0
> 
> 时间：2013-02-21T16:42:56.557
> 
> 标签：c++, opencv

在`opencv`，我正在使用霍夫变换来寻找圆形这里是代码

```
HoughCircles (diff, circles, CV_HOUGH_GRADIENT, 2, src.cols / 5, 200, 80, 20, 62);    

for (size_t i = 0; i < circles.size(); i++ )
{
    //if(circles[i][2]<62)
    {
        Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
        int radius = cvRound(circles[i][2]);
        // draw the green circle center
        circle( src, center, 3, Scalar(0,255,255), -1, 8, 0 );
        // draw the blue circle outline
        circle(src, center, radius, Scalar(0,255,0), 3, 8, 0 );
    }
} 
```

我面临的问题是，有时如果它找到 3 个圆，第三个中心坐标是分数而不是整数，因为如果它找到 4 个圆，它也会给出这个错误

> xyz.exe 中 0x75ebc41f 处的未处理异常：Microsoft C++ 异常：内存位置 0x002df08c 处的 cv::Exception。

如果我尝试`cout`中心坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:52:52.943

嗯，这很有趣。我运行了你的代码并填写了之前和之后，没有任何问题。老实说，我只在linux和mac机器上测试过。这是我的全长代码，试试看会发生什么。另外，请[在此处](https://stackoverflow.com/questions/12687684/how-to-find-out-what-is-causing-cvexception-at-memory-location)查看此解决方案。

```
int main(int argc, char* argv[]) {

VideoCapture capture(0);
if (!capture.isOpened()) {
    LOG(FATAL) << "COULD NOT OPEN CAPTURE";
}

Mat frame;
capture >> frame;
if (frame.empty()) {
    LOG(FATAL) << "FRAME IS EMPTY!";
}

char key;
while ((int)key != 27) {

    capture >> frame;

    Mat gray;
    cvtColor(frame, gray, CV_BGR2GRAY);
    GaussianBlur(gray, gray, Size(9, 9), 2, 2);

    vector<Vec3f> circles;
    HoughCircles(gray, circles, CV_HOUGH_GRADIENT, 2, gray.cols/5,200,80,20,62);

    for (size_t i = 0; i < circles.size(); ++i) {
        Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
        int radius = cvRound(circles[i][2]);
        // draw the green circle center
        circle(frame, center, 3, Scalar(0,255,255), -1, 8, 0 );
        // draw the blue circle outline
        circle(frame, center, radius, Scalar(0,255,0), 3, 8, 0 );
    }

    imshow("frame", frame);
    key = waitKey(1);
}

return 0;
} 
```

# javascript - javascript中的锚元素

> ID：15007675
> 
> 赞同：0
> 
> 时间：2013-02-21T16:42:59.943
> 
> 标签：javascript, jquery

当分配给锚元素的 onclick 事件的事件处理程序返回任何值时，该值在哪里。例如：

```
<a href="some.htm"  id="maiz">
<script>
function test(){return x=5;}
document.getElementById("maiz").onclick=test;

<script> 
```

如果是这样，元素会收到该值吗？我现在如何访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:46:01.173

除事件机制外，没有代码在等待来自事件处理程序的返回值。因此，您无法获取返回值并对其进行处理。

`return false;`在事件处理程序中使用会取消事件。例如：

```
<HTML>
<HEAD>
<TITLE>Cancelling Hyperlinks</TITLE>
</HEAD>
<BODY>
<A HREF="c:" onclick="return false;">C drive</A>
</BODY>
</HTML> 
```

它相当于

```
event.stopPropagation();
event.preventDefault(); 
```

[在这里](http://www.htmlgoodies.com/beyond/javascript/advanced-javascript-event-handling.html)阅读更多...

**更新**

使用返回值的事件：

```
onclick of HREF:
return false cancels navigation after the code is executed

onsubmit of form
return false cancels submission of the form 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:52:36.627

一般你访问一个返回值的方法如下图所示。

```
function test(){return x=5;}

var result = test(); 
```

您只能对事件返回 true / false，从而停止执行更多事件。

# python - 用 numpy 同时对角化矩阵

> ID：15007676
> 
> 赞同：6
> 
> 时间：2013-02-21T16:43:04.157
> 
> 标签：python, numpy, eigenvalue, diagonal

我有一个*m* × *n* × *n* `numpy.ndarray`的*m*个同时可对角化的方阵，并想用它`numpy`来获得它们的同时特征值。

例如，如果我有

```
from numpy import einsum, diag, array, linalg, random
U = linalg.svd(random.random((3,3)))[2]

M = einsum(
    "ij, ajk, lk",
    U, [diag([2,2,0]), diag([1,-1,1])], U) 
```

中的两个矩阵`M`同时可对角化，我正在寻找一种获取数组的方法

```
array([[2.,  1.],
       [2., -1.],
       [0.,  1.]]) 
```

（直到行的排列）从`M`. 有没有内置的或简单的方法来获得这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-12T18:27:15.130

Cardoso 和 Soulomiac 在 1996 年发表了一种基于 Givens 旋转的相当简单且非常优雅的同步对角化算法：

Cardoso, J. 和 Souloumiac, A. (1996)。用于同时对角化的雅可比角。SIAM 矩阵分析与应用杂志，17（1），161-164。doi:10.1137/S0895479893259546

我在此响应的末尾附上了算法的 numpy 实现。警告：事实证明，同时对角化是一个有点棘手的数值问题，没有算法（据我所知）可以保证全局收敛。然而，它不起作用的情况（见论文）是退化的，实际上我从来没有让雅可比角算法对我失败。

```
#!/usr/bin/env python2.7
# -*- coding: utf-8 -*-
"""
Routines for simultaneous diagonalization
Arun Chaganty <arunchaganty@gmail.com>
"""

import numpy as np
from numpy import zeros, eye, diag
from numpy.linalg import norm

def givens_rotate( A, i, j, c, s ):
    """
    Rotate A along axis (i,j) by c and s
    """
    Ai, Aj = A[i,:], A[j,:]
    A[i,:], A[j,:] = c * Ai + s * Aj, c * Aj - s * Ai 

    return A

def givens_double_rotate( A, i, j, c, s ):
    """
    Rotate A along axis (i,j) by c and s
    """
    Ai, Aj = A[i,:], A[j,:]
    A[i,:], A[j,:] = c * Ai + s * Aj, c * Aj - s * Ai 
    A_i, A_j = A[:,i], A[:,j]
    A[:,i], A[:,j] = c * A_i + s * A_j, c * A_j - s * A_i 

    return A

def jacobi_angles( *Ms, **kwargs ):
    r"""
    Simultaneously diagonalize using Jacobi angles
    @article{SC-siam,
       HTML =   "ftp://sig.enst.fr/pub/jfc/Papers/siam_note.ps.gz",
       author = "Jean-Fran\c{c}ois Cardoso and Antoine Souloumiac",
       journal = "{SIAM} J. Mat. Anal. Appl.",
       title = "Jacobi angles for simultaneous diagonalization",
       pages = "161--164",
       volume = "17",
       number = "1",
       month = jan,
       year = {1995}}

    (a) Compute Givens rotations for every pair of indices (i,j) i < j 
            - from eigenvectors of G = gg'; g = A_ij - A_ji, A_ij + A_ji
            - Compute c, s as \sqrt{x+r/2r}, y/\sqrt{2r(x+r)}
    (b) Update matrices by multiplying by the givens rotation R(i,j,c,s)
    (c) Repeat (a) until stopping criterion: sin theta < threshold for all ij pairs
    """

    assert len(Ms) > 0
    m, n = Ms[0].shape
    assert m == n

    sweeps = kwargs.get('sweeps', 500)
    threshold = kwargs.get('eps', 1e-8)
    rank = kwargs.get('rank', m)

    R = eye(m)

    for _ in xrange(sweeps):
        done = True
        for i in xrange(rank):
            for j in xrange(i+1, m):
                G = zeros((2,2))
                for M in Ms:
                    g = np.array([ M[i,i] - M[j,j], M[i,j] + M[j,i] ])
                    G += np.outer(g,g) / len(Ms)
                # Compute the eigenvector directly
                t_on, t_off = G[0,0] - G[1,1], G[0,1] + G[1,0]
                theta = 0.5 * np.arctan2( t_off, t_on + np.sqrt( t_on*t_on + t_off * t_off) )
                c, s = np.cos(theta), np.sin(theta)

                if abs(s) > threshold:
                    done = False
                    # Update the matrices and V
                    for M in Ms:
                        givens_double_rotate(M, i, j, c, s)
                        #assert M[i,i] > M[j, j]
                    R = givens_rotate(R, i, j, c, s)

        if done:
            break
    R = R.T

    L = np.zeros((m, len(Ms)))
    err = 0
    for i, M in enumerate(Ms):
        # The off-diagonal elements of M should be 0
        L[:,i] = diag(M)
        err += norm(M - diag(diag(M)))

    return R, L, err 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:31:45.307

I am not aware of any direct solution. But why not just getting the eigenvalues and the eigenvectors of the first matrix, and using the eigenvectors to transform all other matrices to the diagonal form? Something like:

```
eigvals, eigvecs = np.linalg.eig(matrix1)
eigvals2 = np.diagonal(np.dot(np.dot(transpose(eigvecs), matrix2), eigvecs)) 
```

You can the add the columns to an array via `hstack` if you like.

UPDATE: As pointed out below, this is only valid if no degenerate eigenvalues occur. Otherwise one would have to check first for the degenerate eigenvalues, then transform the 2nd matrix to a *blockdiagonal* form, and diagonalize eventual blocks bigger than 1x1 separately.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T15:35:38.247

如果您事先知道两个矩阵的特征值的大小，则可以对两个矩阵的线性组合进行对角化，并选择系数来打破退化。例如，如果两者的特征值都在 -10 和 10 之间，您可以对角化 100*M1 + M2。精度略有下降，但对于许多用途来说已经足够了——而且快速简单！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T16:02:23.857

我确信我的解决方案还有很大的改进空间，但我提出了以下三个函数集，以一种半稳健的方式为我进行计算。

```
def clusters(array,
             orig_indices = None,
             start = 0,
             rtol=numpy.allclose.__defaults__[0],
             atol=numpy.allclose.__defaults__[1]):
    """For an array, return a permutation that sorts the numbers and the sizes of the resulting blocks of identical numbers."""
    array = numpy.asarray(array)
    if not len(array):
        return numpy.array([]),[]
    if orig_indices is None:
        orig_indices = numpy.arange(len(array))
    x = array[0]
    close = abs(array-x) <= (atol + rtol*abs(x))
    first = sum(close)
    r_perm, r_sizes = clusters(
        array[~close],
        orig_indices[~close],
        start+first,
        rtol, atol)
    r_sizes.insert(0, first)
    return numpy.concatenate((orig_indices[close], r_perm)), r_sizes

def permutation_matrix(permutation, dtype=dtype):
    n = len(permutation)
    P = numpy.zeros((n,n), dtype)
    for i,j in enumerate(permutation):
        P[j,i]=1
    return P

def simultaneously_diagonalize(tensor, atol=numpy.allclose.__defaults__[1]):
    tensor = numpy.asarray(tensor)
    old_shape = tensor.shape
    size = old_shape[-1]
    tensor = tensor.reshape((-1, size, size))
    diag_mask = 1-numpy.eye(size)

    eigvalues, diagonalizer = numpy.linalg.eig(tensor[0])
    diagonalization = numpy.dot(
        numpy.dot(
            matrix.linalg.inv(diagonalizer),
            tensor).swapaxes(0,-2),
        diagonalizer)
    if numpy.allclose(diag_mask*diagonalization, 0):
        return diagonalization.diagonal(axis1=-2, axis2=-1).reshape(old_shape[:-1])
    else:
        perm, cluster_sizes = clusters(diagonalization[0].diagonal())
        perm_matrix = permutation_matrix(perm)
        diagonalization = numpy.dot(
            numpy.dot(
                perm_matrix.T,
                diagonalization).swapaxes(0,-2),
            perm_matrix)
        mask = 1-scipy.linalg.block_diag(
            *list(
                numpy.ones((blocksize, blocksize))
                for blocksize in cluster_sizes))
        print(diagonalization)
        assert(numpy.allclose(
                diagonalization*mask,
                0)) # Assert that the matrices are co-diagonalizable
        blocks = numpy.cumsum(cluster_sizes)
        start = 0
        other_part = []
        for block in blocks:
            other_part.append(
                simultaneously_diagonalize(
                    diagonalization[1:, start:block, start:block]))
            start = block
        return numpy.vstack(
            (diagonalization[0].diagonal(axis1=-2, axis2=-1),
             numpy.hstack(other_part))) 
```

# twitter-bootstrap - Twitter引导模态框，边距在不同的开发框上表现不同

> ID：15007684
> 
> 赞同：0
> 
> 时间：2013-02-21T16:43:11.620
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2, modal-dialog

我有这个 twitter 引导框模式，它以默认边距类型出现在屏幕上：

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

我有这个 jquery 代码，我用它来调整默认的上边距，所以它到目前为止不会“浮动”：

```
 $("#myModal").modal({ // wire up the actual modal functionality and show the dialog
            "backdrop": "static",
            "keyboard": true,
            "show": false // ensure the modal is not shown immediately
        }).css({
                    'width': function () {
                        return ($(document).width() * .95) + 'px';
                        //return $(document).width() + 'px';
                    },
                    'margin-left': function () {
                        return -($(this).width() / 2);
                    }
                    ,'margin-top': function () {
                        return -$(this).height() * 1.20;
                    }
                }); 
```

html def 在这里：

```
 <div id="myModal"
     class="modal hide fade"
     tabindex="-1"
     role="dialog"
     aria-labelledby="label1"
     aria-hidden="true"
     data-backdrop="static"
     data-keyboard="false"
     data-show="false">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="label1">Label</h3>
  </div>

  <div class="modal-body" style="max-height: 580px;">
    <table id="main_table" class="table table-striped">
      <tr>          
        <th width="">Reserved By</th>
      </tr>

    </table>
    <div class="navbar">
      <div class="navbar-inner">
        <a style="width: 93%;" class="brand pull-left toggle_drop_down" href="#" data-toggle="collapse" data-target="#emp-list">
          Click here to search for employees not in your list
        </a>
        <button type="button" class="btn pull-right down_chevron" data-toggle="collapse" data-target="#emp-list">
          <i class="icon-chevron-down icon-black"></i>
        </button>
        <button type="button" class="btn pull-right up_chevron" data-toggle="collapse" data-target="#emp-list" style="display:none;">
          <i class="icon-chevron-up icon-black"></i>
        </button>
      </div>
    </div>
    <div id="emp-list" class="collapse out">

      <table cellpadding="0" cellspacing="0" border="0"
             id="employee_list"
             class="display table table-striped"
             data-source="<%= home_url(format: "json") %>">
        <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th></th>
        </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
  <!--<div class="modal-footer">-->
  <!--<a href="#" class="btn primary">Close</a></div>-->
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div> 
```

这段代码在我的机器上看起来很棒，但部署到我们的开发服务器或其他用户框时它根本不起作用......就像它不会漂浮很远。我不确定为什么它不同，其他开发人员机器运行相同的 windows/chrome/rubymine/rails 服务器和 rails 版本。我只是在这里抓住稻草试图找出为什么存在差异。

（我们部署的开发服务器也是一个 linux 机器，但仍然在 chrome 上点击它，它看起来与我点击我的 localhost:3000 时不一样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:51:36.803

通过动态使用高度找到了一种更好的方法：

```
 $("#myModal .modal-body").css({
                'max-height':function () {
                    var h =  $(window).height()-250;
                    //alert(h); let me know what the windows are reporting
                    return (h);
                }

        }); 
```

# php - 测试用户是否填写了表单中的所有输入

> ID：15007687
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:43:22.507
> 
> 标签：php, javascript

我的页面中有一个登录表单，我想测试用户是否填写了所有输入，这是我尝试过的代码，但它不起作用：

```
<?php session_start() ?>
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <script type="text/javascript">

            var check {};

            check['login'] = function () {

                var login = document.getElementById('login');
                if(login.value.length > 0)
                {
                    return true;
                }
                else
                {
                    return false;
                }

            };

            check['mdp'] = function () {

                var mdp = document.getElementById('mdp');
                if(login.value.length > 0)
                {
                    return true;
                }
                else
                {
                    return false;
                }

            };

            var inputs = document.getElementsByTagName('input');

            for(var i=0; i<inputs.length; i++)
            {
                inputs[i].onkeyup = function() {
                    check[this.id](this.id);
                }
            }

            var result = true;

            for (var i in check)
            {
                result = check[i](i) && result;
            }

            var myForm = document.getElementById('form1');

            if (!result)
            {
                alert('Vueillez saisir tous les champs !');
            }

            myForm.addEventListener('valider', function (e) {
                if (!result) {
                    e.preventDefault();

                }
            });

        </script>
    </head>
    <body>
        <?php

            require_once('bdd.inc.php');

            if (isset($_POST['valider'])) {

                $auth = false;

                foreach($clients as $client)
                {
                    if($_POST['login'] == $client['Pseudo'] && $_POST['mdp'] == $client['MotDePasse'])
                    {
                        $_SESSION['login'] = $_POST['login'];
                        $_SESSION['mdp'] = $_POST['mdp'];
                        $auth = true;
                        break;
                    }
                }

                if(!$auth)
                {
                    header('location:authentification.php?auth=false');
                }
            }

        ?>
        <form method="post" action="authentification.php" id="form1" name="form1">
            <table>
                <tr>
                    <td>Login :</td>
                    <td><input type="text" name="login" id="login"></td>
                </tr>
                <tr>
                    <td>Mot de passe :</td>
                    <td><input type="text" name="mdp" id="mdp"></td>
                </tr>
                <tr><td colspan="2" align="center"><input type="submit" value="Valider" name="valider" id="valider"></td></tr>
                <?php
                    if(isset($_GET['auth']))
                    {
                        if($_GET['auth'] == 'false')
                        {
                            echo '<div style="color:red">Désolé, Votre pseudo ou votre mot de passe est erroné !</div>';
                        }
                    }
                ?>
            </table>
        </form>
    </body>
</html> 
```

问题是当我单击提交按钮时，尽管输入未填写，它仍将我重定向到操作页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:02:35.750

问题是浏览器会`type="submit"`在 JavaScript 脚本完成执行之前提交一个按钮。您想要做的是让您的脚本在验证后提交您的表单。因此，将您的输入类型更改为按钮，并从 javascript 本身进行提交。

编辑：（每条评论）

您已经通过 JavaScript 提交表单。为了让您的代码正常工作，我只需将您的输入按钮从提交类型更改为按钮。所以改成`<input type="submit" value="Valider" name="valider" id="valider">`这样：

```
<input type="button" value="Valider" name="valider" id="valider"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:10:56.983

你可以试试

```
<?php 
session_start();
require_once('bdd.inc.php');
if (isset($_POST['valider'])) {

    $auth = false;

    foreach($clients as $client)
    {
        if($_POST['login'] == $client['Pseudo'] && $_POST['mdp'] == $client['MotDePasse'])
        {
            $_SESSION['login'] = $_POST['login'];
            $_SESSION['mdp'] = $_POST['mdp'];
            $auth = true;
            break;
        }
    }

    if(!$auth)
    {
        header('location:authentification.php?auth=false');
    }
}
?>
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <script type="text/javascript">
            function validation(form)
            {
                var login = document.getElementById('login');
                var mdp = document.getElementById('mdp');
                if(login.value == '' || mdp.value == '')
                    alert('You must fill in all fields!');
                else
                    form.submit();

                return false;
            }
        </script>
    </head>
    <body>

        <form method="post" action="authentification.php" id="form1" name="form1" onsubmit="validation(this);return false">
            <table>
                <tr>
                    <td>Login :</td>
                    <td><input type="text" name="login" id="login"></td>
                </tr>
                <tr>
                    <td>Mot de passe :</td>
                    <td><input type="text" name="mdp" id="mdp"></td>
                </tr>
                <tr><td colspan="2" align="center"><input type="submit" value="Valider" name="valider" id="valider"></td></tr>
                <?php
                    if(isset($_GET['auth']))
                    {
                        if($_GET['auth'] == 'false')
                        {
                            echo '<div style="color:red">Désolé, Votre pseudo ou votre mot de passe est erroné !</div>';
                        }
                    }
                ?>
            </table>
        </form>
    </body>
</html> 
```

# javascript - jQuery 的淡入淡出错误

> ID：15007688
> 
> 赞同：0
> 
> 时间：2013-02-21T16:43:23.013
> 
> 标签：javascript, jquery

在我的页面上，当用户说 1000 像素向下滚动页面时，我的导航淡出，当我向上滚动时，导航淡入。我使用以下完美工作...

```
// Fade Navigation

if(!$('nav ul').is(':visible')) {
    $('nav ul').stop().fadeIn(500);
} else {
    $('nav ul').stop().fadeOut(500);
} 
```

我唯一的问题是，如果你滚动得非常快，动画不知道它是否可见，有没有办法阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:53:25.567

如果您`true`作为第二个参数传入`.stop()`，它将停止动画*并将*元素跳转到动画实际完成时应该处于的状态。

即，如果您`$('nav ul').stop(true, true).fadeIn(500)`在元素淡出时调用，它将停止淡出，*并*使其在开始动画*之前*跳转到其逻辑结束（完全淡出） 。`.fadeIn()`

使用它，您应该能够摆脱以下代码块而不是上面的代码块：

```
$('nav ul').stop(true, true).fadeToggle(500); 
```

虽然它看起来有点生涩，但你可以用更复杂的逻辑来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:17:48.030

我一直在玩这个。请参阅代码中的注释。

```
<nav class="main">
    <ul>
        <li>One</li>
        <li>Two</li>
    </ul>
</nav>

<script type="text/javascript">

    // Do this outside of the onscroll handler.  onscroll is fired a lot,
    // so performance will slow if you're having to create jq instances
    // or navigate the dom several times
    var $wnd = $(window);
    var $nav = $('nav.main');

    // Added this to block the main handler from executing
    // while we are fading in or out...in attempt
    // to smooth the animation
    var blockHandler = false;

    window.onscroll = function () {
        if (!blockHandler) {
            blockHandler = true;

            // I've used 50 here, but calc the offset of your nav
            // and add the height to it.  Or, maybe just half the
            // height to it so you can see the animation.
            if ($wnd.scrollTop() < 50) {
                $nav.fadeIn(500, function () {
                    blockHandler = false;
                });
            } else {
                $nav.fadeOut(500, function () {
                    blockHandler = false;
                });
            }
        }
    };

</script> 
```

# asp.net-mvc - MVC 异步错误 - 无法同步执行异步操作方法“完成”

> ID：15007696
> 
> 赞同：1
> 
> 时间：2013-02-21T16:43:41.410
> 
> 标签：asp.net-mvc, asynchronous

我在 VS 2010 中使用 MVC4。我有一个异步操作，我正在尝试开始工作。我的控制器继承自 AsyncController 并且我有 ~Async 和 ~Completed 方法。我能够在示例测试项目中正确执行我的异步操作。但是当我将它作为我的核心网络应用程序的一部分运行时，它会出现此异常

[InvalidOperationException：无法同步执行异步操作方法“Complete”。] System.Web.Mvc.Async.AsyncActionDescriptor.Execute(ControllerContext controllerContext, IDictionary `2 parameters) +133 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 参数) +39

我正在使用 Unity 进行依赖注入、ActionAttributeFilters 和 MVCSiteMapProvider，我想知道其中之一是否会导致上述问题。任何帮助表示赞赏。

谢谢

**整个堆栈跟踪**

```
[InvalidOperationException: The asynchronous action method 'Complete' cannot be executed synchronously.]
System.Web.Mvc.Async.AsyncActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +133
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
System.Web.Mvc.<>c__DisplayClass13.<InvokeActionMethodWithFilters>b__10() +129
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +978122
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +314
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +978400
NotFoundMvc.ActionInvokerWrapper.InvokeActionWith404Catch(ControllerContext controllerContext, String actionName) in c:\Users\Andrew Davey\projects\opensource\NotFoundMvc\src\NotFoundMvc\ActionInvokerWrapper.cs:40
NotFoundMvc.ActionInvokerWrapper.InvokeAction(ControllerContext controllerContext, String actionName) in c:\Users\Andrew Davey\projects\opensource\NotFoundMvc\src\NotFoundMvc\ActionInvokerWrapper.cs:21
System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__19() +40
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +20
System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +67
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +53
System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +42
System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +20
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +53
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:41:47.753

看起来 NotFoundMVC Lib 导致了这个问题。卸载此软件包，您将可以正常工作！

# ruby-on-rails - 如何使用 google_premier 设置地理编码器？

> ID：15007697
> 
> 赞同：5
> 
> 时间：2013-02-21T16:43:41.757
> 
> 标签：ruby-on-rails, google-maps, google-maps-api-3, rails-geocoder

我已阅读 geocoder gem 的文档，其中[说明](https://github.com/alexreisner/geocoder#google-google-google_premier)您可以在使用 Google Premier 时设置密钥、客户端和通道。

根据我在这里阅读的其他一些帖子，现在可以使用 API 密钥，只要您低于免费阈值，仍然可以不付费。当我们使用 Heroku 托管时，我们需要这样做，并且我们不断达到每日限额。我们不是我们自己，但如果没有任何其他标识，我们可能会达到与其他 Heroku 站点共享的 IP 标识的限制。使用密钥将有助于识别我们，从而防止我们达到极限。

但是，当我查看 Google API 的注册页面时，对于已安装的应用程序、Web 应用程序等，有一系列令人费解的客户端 ID、API 密钥和秘密。哪种组合是让地理编码器突然出现所需的组合？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T13:51:43.870

要回答这个问题：

订阅 Google Premier 时，您应该收到一个以 gme- 开头的客户端 ID 和一个密钥（请参阅[https://developers.google.com/maps/documentation/business/articles/prelaunch_checklist#welcome_letter](https://developers.google.com/maps/documentation/business/articles/prelaunch_checklist#welcome_letter)）

geocoder 需要的第三个参数是通道，可以是任何类型的字符串（请参阅[https://developers.google.com/maps/documentation/business/guide#Channels](https://developers.google.com/maps/documentation/business/guide#Channels)）

您需要在 Google 门户中添加发起请求的授权 url 列表（请参阅[https://developers.google.com/maps/documentation/business/guide#URLs](https://developers.google.com/maps/documentation/business/guide#URLs)）。

从[Geocoder doc](https://github.com/alexreisner/geocoder#google-google-google_premier)中，您可以使用如下设置：

```
# -*- encoding : utf-8 -*-
Geocoder.configure do |config|
  config.lookup = :google_premier
  config.api_key = ["gme-client-id","key", "channel"]
  config.timeout = 10
  config.units = :km
end 
```

**但**使用此处推荐的客户端地理编码可能是更好的选择：[https ://developers.google.com/maps/articles/geocodestrat?hl=fr#client](https://developers.google.com/maps/articles/geocodestrat?hl=fr#client)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-04T19:45:56.720

这对我有用：

```
Geocoder.configure(
  :lookup => :google_premier,
  :api_key => [ 'GOOGLE_CRYPTO_KEY', 'GOOGLE_CLIENT_ID', 'GOOGLE_CHANNEL' ],
  :timeout => 5,
  :units => :km,
) 
```

您需要替换 Google Maps for Business 欢迎电子邮件中的相应值。渠道是您选择的价值。

# java - Tomcat 零星延迟

> ID：15007706
> 
> 赞同：8
> 
> 时间：2013-02-21T16:44:16.620
> 
> 标签：java, performance, tomcat, tomcat6, low-latency

我一直在对 Tomcat 上的页面响应时间进行微优化，并且在几乎所有情况下，如果我一遍又一遍地刷新，我会看到**50 毫秒**的响应时间，但如果页面在一两秒内没有被点击，响应时间就会回升到**500 毫秒**。

无论本地，不是本地，APR，NIO，JIO，静态或动态响应（即提供静态文件或动态处理响应），我都看到了相同的行为。到目前为止，我还没有看到这种行为在 Tomcat 上**没有**发生（无论频率如何，它都是一致的低于 400 毫秒）。

我也使用 Visual VM 来查看是否有任何线索。

我认为这是某种保持活力，但是当我运行 Apache Bench 时，我得到了更快的响应时间（低于 50 毫秒）（显然是因为它经常点击它）。

那么如何在 Tomcat 中保持低延迟不经常点击的 URL？也许这个问题更适合ServerFault？

**更新：**我几乎肯定它是 Tomcat 6 的问题。我以为我已经在 Tomcat 7 上进行了测试，但我只是再次对其进行了测试并且没有问题（请参见下面的结果）。即使是最新的 Tomcat 6 仍然存在这个问题。

**这是`ab`Tomcat 6 的输出（注意最大值）：**

```
Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.0      0       0
Processing:    14   39  45.2     30     314
Waiting:       14   38  45.2     30     314
Total:         14   39  45.2     30     314 
```

**这是`ab`Tomcat 7 的输出，请注意最大值：**

```
Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   0.0      0       0
Processing:    25   38   8.8     37      67
Waiting:       25   37   8.7     36      66
Total:         25   38   8.8     37      67 
```

Tomcat 版本是唯一的区别（相同的机器、相同的 JDK 等）。我确信最新的 Tomcat 6 会很好，但它在第一次请求时有类似的延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T03:19:05.380

偷看tomcat代码，我决定搜索“弱”这个词，理论是你的问题是当你不快速重新请求时收集了弱引用中的东西。

我想出了以下猜测......我发现了这个有趣的类：

[http://svn.apache.org/viewvc/tomcat/tc6.0.x/trunk/java/javax/el/BeanELResolver.java?revision=1027187&view=markup](http://svn.apache.org/viewvc/tomcat/tc6.0.x/trunk/java/javax/el/BeanELResolver.java?revision=1027187&view=markup)

它似乎维护了一个 BeanProperties 对象的缓存，其中一部分由 WeakHashMap 处理，并且每当缓存填满时，所有内容都放入 WeakHashMap 并可以进行垃圾回收。如果请求弱地图中的项目，则将它们放回主地图（不是弱地图）。如果您的页面在处理结束时触发此行为（通过添加诸如 BeanProperties 中的缓存大小之类的内容，您可能最终会丢弃几乎所有缓存的 bean 描述。

方便地有一个属性可以调整这个：

```
private static final String CACHE_SIZE_PROP =
    "org.apache.el.BeanELResolver.CACHE_SIZE"; 
```

所以也许尝试玩一下，看看它是否会影响行为？然而，这可能不是，因为我在 Tomcat 7 的这个类中没有看到很大的变化（快速查看），你说你的问题消失了。（您在之前的调优工作中是否一直在调整此属性？）

# c# - 使用 Javascript 打印 <%# %>

> ID：15007707
> 
> 赞同：0
> 
> 时间：2013-02-21T16:44:20.410
> 
> 标签：c#, javascript, asp.net, printing

我需要`DataViewGrid`从一个用 ASP.NET 制作的网站打印一个并使用 JavaScript 来完成它，因为实现它似乎更容易是 C#。下面是我用来尝试打印文档的代码。

```
<script type="text/javascript">
function doPrint() {
    var prtContent = document.getElementById('<%# dgvInvoices.ClientID %>');
    prtContent.border = 0;
    var WinPrint = window.open('', '', 'left=100,top=100,width=1000,height=1000,toolbar=0,scrollbars=1,status=0,resizable=1');
    WinPrint.document.write(prtContent.outerHTML);
    WinPrint.document.close();
    WinPrint.focus();
    WinPrint.print();
    WinPrint.close();
} 
```

我不得不更改第 3 行，`('<%= dgvInvoices.ClientID %>');`因为它给了我一个控制错误，现在我相信这会阻止我的文档打印。有没有人对此有任何解决方法或修复？还是用 C# 打印的简单方法？

原来的错误是：

> *无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:39:22.450

如果您使用 ASP.NET Ajax 并在您的页面或母版页中有一个 ScriptManager，您可以这样做：

```
var prtContent = $get('<%= this.dgvInvoices.ClientID %>'); 
```

此外，如果您使用 .Net 框架版本 4 或更高版本，您可以`ClientIDMode="Static"`在控件中设置属性，因此 ClientID 将呈现为已声明，您将能够使用`document.getElementById`javascript 函数将声明的 ID 作为参数传递。

# css - 具有背景图像的元素的不透明度，例如 IE7-IE8 中的输入字段

> ID：15007708
> 
> 赞同：0
> 
> 时间：2013-02-21T16:44:20.723
> 
> 标签：css, cross-browser

我似乎无法让这个工作，虽然理论上应该是可能的，我现在已经尝试了一个多星期，但它在 IE7 或 IE8 中不起作用，在 FF、Chrome、Safari 中按预期工作...

小提琴上的代码 => [http://jsfiddle.net/xqQ7r/4/](http://jsfiddle.net/xqQ7r/4/)

HTML：

```
<div style="margin: 50px 0px 0px 250px;">
    <input type="button" class="button" value="test button" />
</div> 
```

CSS：

```
.button {
    position: relative;
    background-image: url('http://i.imgur.com/mxCABKj.png');
    background-repeat: repeat-x;
    background-position: left top;
    height: 33px;
    line-height: 31px;
    min-width: 100px;
    color: #ffffff;
    font-size: 12px;
    padding-right: 9px;
    padding-left: 9px;
    padding-bottom: 4px;
    font-weight: bold;
    /* text shadow */
    text-shadow: 0px 1px 0px #4f4f4f;
    /* borders */
    border-radius: 3px;
    border: 1px solid #333333;
    box-shadow: 0px 0px 4px 0px #4f4f4f;
    opacity: .75;
    /* Standards Compliant Browsers */
    filter: alpha(opacity=75);
    /* IE 7 and Earlier */
    /* Next 2 lines IE8 */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=75)";
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=75);
}

.button:hover {
    opacity: 1;
    filter: alpha(opacity=100);
    /* IE 7 and Earlier */
    /* Next 2 lines IE8 */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    cursor: pointer;
} 
```

提前感谢所有想法和解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:56:09.837

实际上，它正在工作。

我在这里修改了您的代码的修改版本[http://jsfiddle.net/xqQ7r/8/](http://jsfiddle.net/xqQ7r/8/)

我刚刚将按钮的不透明度修改为 0.25，将背景颜色修改为红色**，这样您就可以看到**效果了。

```
.button {
    background-color:red;
    opacity: 0.275;
} 
```

这是用于不透明度的跨浏览器 .css

```
.transparent_class {
  /* IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

  /* IE 5-7 */
  filter: alpha(opacity=50);

  /* Netscape */
  -moz-opacity: 0.5;

  /* Safari 1.x */
  -khtml-opacity: 0.5;

  /* Good browsers */
  opacity: 0.5;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T17:07:16.097

你总是可以使用 jQuery。

```
 $('.button').css('opacity', 0.275); 
```

# java - 自动发送输入信号？

> ID：15007709
> 
> 赞同：0
> 
> 时间：2013-02-21T16:44:25.320
> 
> 标签：java, terminate, enter

我正在使用代码来恢复密码。当用户请求重置密码时，它会向用户的手机发送一条短信。我的问题是它在运行时给了我这个输出。

==================================================== ==============================

Now Sleeping - 按回车键终止。

但我想自动发送输入信号，这样工作就会自动终止。我该怎么做？

我的代码如下：

```
 if (rs3.next()) {
                    String port = "COM3"; //Modem Port.
                    int bitRate = 460800; //this is also optional. leave as it is.
                    String modemName = "Huawei E165G"; //this is optional.
                    String modemPin = ""; //Pin code if any have assigned to the modem.
                    String SMSC = "+947100003"; //Message Center Number ex. Mobitel

                    GsmModem gsmModem = new GsmModem();
                    GsmModem.configModem(port, bitRate, modemName, modemPin, SMSC);
                    gsmModem.Sender(mobileno, "Your new password is "+rs3.getString("password")+"  Please change your password in your next login. >>Fast Inventory<<"); // (tp, msg) 
                    System.out.println("Code came here");

                    Statement s2=Db.connectDb().createStatement();
                    s2.executeUpdate("UPDATE user SET lockstatus='0' WHERE uid='"+username.getText()+"'");
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

我正在使用 SMSlib。

# ios - Xcode 模拟尺寸指标 - 自由形式和无设置之间的差异

> ID：15007711
> 
> 赞同：11
> 
> 时间：2013-02-21T16:44:36.853
> 
> 标签：ios, xcode, uikit

当我制作自定义 UIViews 时，我通常首先创建一个 xib 文件，然后在 Attributes Inspector 中将 Simulated Metrics 部分中的 Size 属性更改为 None，这样我就可以将视图调整为我想要的大小。我想知道，这个设置和自由格式设置有区别吗？我正在使用 Xcode 4.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T13:19:23.370

更改模拟指标的唯一区别是视图在界面构建器中的外观。您可以转到检查器的大小选项卡并更改视图的大小。在 iOS 中，这仅在您将一个视图包含在另一个视图中并想查看它的外观时才有用

```
UIViewcontroller *vc = ...
[self addChildViewController:vc];
[self.view addSubview:vc.view];
vc.view.frame = CGRectMake(0, 0, 50, 50); 
```

# java - PostgreSQL 与 MS SQL Server 与 java 的兼容性

> ID：15007715
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:44:55.073
> 
> 标签：java, sql, sql-server, postgresql

我必须设计一个 Java 应用程序，它也具有数据库连接性。我无法决定应该使用哪个数据库？“PostgreSQL”或“SQL Server 2008”。我想知道哪个与Java语言的兼容性更好？还有哪一个更容易使用和实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:54:03.877

这是一个非常主观的问题，可能会被关闭，但就其价值而言，这是我的看法：

两个数据库服务器都使用 JDBC 和几个 ORM（如 Hibernate）与 Java 兼容。

您需要考虑的不是 Java 兼容性，而是：

*   您的资源（财务和计算）
*   您对一种 DBMS 的熟悉程度高于另一种

SQL Server 安装起来有点麻烦。对于管理工具，您可以查看 SSMS，这可能有点像野兽，但非常擅长它的功能。

PostgreSQL 在安装方面更轻。PgAdmin III 工具非常有效，而且在我看来，它更易于使用。

SQL Server 的免费版本有数据库限制。它的付费版本没有，但价格昂贵。PostgreSQL 对数据库大小没有任何限制，而且它是开源的。

两个 DBMS 都有一个充满活力的社区，并且可以随时获得帮助。

希望这可以帮助。

- 编辑 -

作为数据库的起点，每个数据库服务器都将与其他数据库服务器一样容易学习；尽管服务器提供的工具可能会缓和一些学习曲线。

如果我必须回到第一方并重新学习所有内容，我会这样做：

*   选择 PostgreSQL。我会选择 PostgreSQL 来学习，因为它完全符合 ACID，对语法错误几乎没有容忍度，并且在结果集中提供了您所要求的内容。
*   我会先学习命令行实用程序，然后是 PgAdmin III，因为它可以让我在不牵手的情况下尽可能多地接触数据库。
*   阅读[PostgreSQL.com](http://www.postgresql.org/docs/)上的文档并使用 Stack Overflow 和 dba.stackoverflow.com 补充问题
*   不要恐慌。学习 DBMS 是一项艰巨的任务，我还没有完成。有时会感到沮丧和艰难。很容易想退出。不。坚持下去，继续努力，回报是值得的。

PostgreSQL 社区很棒，我得到的答案以及在 SO 上的其他帖子上看到的答案都是一流的。对于某些示例，请查看 a_horse_with_no_name 和 Erwin Brandstetter 的任何答案，我保证您会学到一些东西。

# sql-server-2008 - SqlBindParameter nvarchar(max) 列上的精度值无效

> ID：15007721
> 
> 赞同：1
> 
> 时间：2013-02-21T16:45:16.303
> 
> 标签：sql-server-2008, nvarchar, sqlbindparameter

我有一个表，其中有一列 ( `[To]`) 定义为`nvarchar(max)`. 根据[http://msdn.microsoft.com/en-gb/library/ms186939.aspx](http://msdn.microsoft.com/en-gb/library/ms186939.aspx)，一列的最大长度`nvarchar(max)`为 2^32。

我正在尝试将一个 > 4000 个字符的字符串（我猜成功的阈值是 4000，但我实际上还没有证明）绑定到该列并且它因 HY104:1:0 失败

> *SQLBindParameter:HY104:1:0:[Microsoft][SQL Server Native Client 11.0]无效的精度值*

我尝试绑定的示例字符串长度为 21707。

我尝试使用以下 ODBC 驱动程序运行，结果对所有驱动程序都是相同的：

```
{SQL Server}
{SQL Server Native Client 10.0}
{SQL Server Native Client 11.0} 
```

我正在打的实际电话是：-

```
Q->ret = SQLBindParameter(Q->stmt, i, SQL_PARAM_INPUT, SQL_C_WCHAR, SQL_WVARCHAR, 
    (SQLINTEGER) (len ? len : 1), 0, data, (SQLINTEGER) len, 0); 
```

在哪里：-

```
len = 21707
data = unicode string of length 21708 characters (43414 bytes) followed by (WORD)0 
```

SQL 服务器详细信息：

```
Microsoft SQL Server Express Edition with Advanced Services (64-bit)
10.50.2550.0
Windows 7 64 bit 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:22:26.893

答案是，我需要在绑定长字符串时使用 SQL_WLONGVARCHAR 而不是 SQL_WVARCHAR。

# entity-framework - 获取刚刚保存到数据库 MVC4 ASP.Net 的模型的记录 ID

> ID：15007726
> 
> 赞同：3
> 
> 时间：2013-02-21T16:45:26.740
> 
> 标签：entity-framework, asp.net-mvc-4

将 ASP.Net/C# 与 MVC4 和 EF 5 一起使用。我有一个基本模型，其中几个其他模型通过 id 链接到。例如

```
 public class Person
    {
        public int Id { get; set; }
        public DateTime? Created { get; set; }
        public DateTime? Submitted { get; set; }
        public DateTime? Finalized { get; set; }

        public string UserProfileSite { get; set; }
        public int UserId { get; set; }

        public virtual ICollection<Demographic> Demographics { get; set; }
        public virtual ICollection<Demographic> Demographics { get; set; }
     } 
```

Demographics 有一个带有 personId 的外键。当他们添加一个人时，他们会被派去填写人口统计信息。但是，由于人口统计数据有一个外键 personId 我需要创建人员记录。

我可以在进入人口统计视图之前创建该人，如下所示：

```
Person person = new Person();
person.UserId = curuser.UserId;
person.UserProfileSite = curuser.Site;
person.Created = DateTime.Now;
db.Persons.Add(person);
db.SaveChanges(); 
```

如何获取刚刚保存到数据库的记录的 personId，以便将其传递给我的 Demographics，以便模型具有 personId 的外键？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T16:47:31.653

假设您没有在实体框架中打开 changeTracking，您应该能够在将对象保存到数据库后简单地获取对象的 id

```
Person person = new Person();
person.UserId = curuser.UserId;
person.UserProfileSite = curuser.Site;
person.Created = DateTime.Now;
db.Persons.Add(person);
db.SaveChanges();
var personId = person.Id; 
```

# c# - “命名空间”，但用作“类型”

> ID：15007727
> 
> 赞同：102
> 
> 时间：2013-02-21T16:45:28.320
> 
> 标签：c#, class, namespaces

我的程序使用一个名为`Time2`. 我添加了参考，`TimeTest`但我不断收到错误，`'Time2' is a 'namespace' but is used like a 'type'`.

有人可以告诉我这个错误是什么以及如何解决它吗？

```
namespace TimeTest
{
  class TimeTest
  {
    static void Main(string[] args)
    {
        Time2 t1 = new Time2();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-02-21T16:49:22.013

我怀疑你*至少有两次*遇到同样的问题。

这里：

```
namespace TimeTest
{
    class TimeTest
    {
} 
```

...您正在声明一个与它所在的命名空间同名的类型。[不要那样做。](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/do-not-name-a-class-the-same-as-its-namespace-part-one)

现在你显然有同样的问题`Time2`。我*怀疑*如果你添加：

```
using Time2; 
```

到您的`using`指令列表中，您的代码将编译。但是请，请，请解决更大的问题：有问题的名称选择。（点击上面的链接，了解*为什么*这是一个坏主意的更多细节。）

（此外，除非您真的对编写基于时间的类型感兴趣，否则我建议您不要这样做……我说的是*确实*这样做的人。使用内置功能或第三党图书馆，例如，嗯，[我](http://nodatime.org)的。正确处理日期和时间令人惊讶地毛茸茸。:)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-11-17T01:44:18.767

```
namespace TestApplication // Remove .Controller
{
    public class HomeController : Controller
    {
       public ActionResult Index()
        {
            return View();
        }
    }
} 
```

从名称空间中删除控制器字

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-10-03T07:57:18.487

所有答案都指出了原因，但有时更大的问题是确定所有定义不正确命名空间的位置。使用像 Resharper 这样使用文件夹结构自动调整命名空间的工具，很容易遇到这个问题。

您可以通过使用以下正则表达式在项目/解决方案中搜索来获取创建问题的所有行：

```
namespace .+\.TheNameUsedAsBothNamespaceAndType 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-08T22:24:08.210

如果您正在开发一个大型应用程序并且无法更改任何名称，您可以键入 a`.`以从命名空间中选择您想要的类型：

```
namespace Company.Core.Context{
  public partial class Context : Database Context {
    ...
  }
}
...

using Company.Core.Context;
someFunction(){
 var c = new Context.Context();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-30T03:46:26.510

我在名为“Response”的文件夹中创建了一个类“Response.cs”时遇到了这个问题。所以 VS 正在捕获`new Response ()`as 文件夹/命名空间。

所以我将类名更改为 StatusResponse.cs 并调用`new StatusResponse()`.This 解决了这个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-17T14:11:33.160

与`class TimeTest`相冲突`namespace TimeTest`。

**如果您无法更改命名空间和类名：**

为类类型创建别名。

```
using TimeTest_t = TimeTest.TimeTest;

TimeTest_t s = new TimeTest_t(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-24T02:32:22.360

**请检查您的类和命名空间名称是否相同...**

当命名空间和类名相同时会发生这种情况。当你想使用命名空间时，做一件事写命名空间的全名。

```
using Student.Models.Db;

namespace Student.Controllers
{
    public class HomeController : Controller
    {
        // GET: Home
        public ActionResult Index()
        {
            List<Student> student = null;
            return View();
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-05T20:16:36.113

如果您在这里解决与 EF Core 相关的问题，请参考以下提示：

**命名迁移的子文件夹与数据库上下文的名称不同**。

这将为您解决。

我的错误是这样的： ModelSnapshot.cs error CS0118: Context is a namespace but is used like a type

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2019-12-09T09:58:16.497

如果错误是

第 26 行：
第 27 行：@foreach（模型中的客户客户）第 28 行：{ 第 29 行：

给出完整的名称空间
，如 @foreach（模型中的 Start.Models.customer 客户）

# scala - Scala 在使用 foldLeft 时假定类型错误

> ID：15007738
> 
> 赞同：0
> 
> 时间：2013-02-21T16:45:55.900
> 
> 标签：scala, syntax, reduce, fold

我正在尝试在 Scala 中创建一个叉积函数，其中`k`是我构建叉积的次数。

```
val l = List(List(1), List(2), List(3))
(1 to k).foldLeft[List[List[Int]]](l) { (acc: List[List[Int]], _) =>
    for (x <- acc; y <- l)
        yield x ::: l
} 
```

但是，此代码无法编译：

```
test.scala:9: error: type mismatch;
    found   : List[List[Any]]
    required: List[List[Int]]
    for (x <- acc; y <- l)
           ^ 
```

为什么它总是认为我有一个`List[Any]`'s 那里？显然，我正在处理的一切都是`List`s of `Int`s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:04:42.077

您的 for 理解有效地产生 List[List[Int 或 List[Int]]]，因此推断的类型是 List[List[Any]]。这是repl的一个例子：

```
scala> val l = List(List(1), List(2), List(3))
l: List[List[Int]] = List(List(1), List(2), List(3))
val x = for {
     |     x <- l
     |     y <- l
     |   } yield x ::: l
x: List[List[Any]] = List(List(1, List(1), List(2), List(3)), List(1, List(1), List(2), List(3)), List(1, List(1), List(2), List(3)), List(2, List(1), List(2), List(3)), List(2, List(1), List(2), List(3)), List(2, List(1), List(2), List(3)), List(3, List(1), List(2), List(3)), List(3, List(1), List(2), List(3)), List(3, List(1), List(2), List(3))) 
```

# apache - 无法连接到运行 Apache 的 AWS 实例

> ID：15007742
> 
> 赞同：1
> 
> 时间：2013-02-21T16:46:17.490
> 
> 标签：apache, amazon-web-services, firewall

我有一个运行 Apache 服务器的 AWS 实例。从本地计算机访问时，Apache 正在运行。通过弹性 IP 的 RDP 连接正在工作。端口 80 已为安全组打开但是，无法从浏览器访问弹性 IP。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-26T02:09:30.293

可能是安全组未配置为允许 HTTP。

1.  转到[http://aws.amazon.com](http://aws.amazon.com) 登录。
2.  单击 EC2。然后单击安全组。单击您的实例正在使用的安全组。
3.  单击入站选项卡。点击编辑按钮。
4.  在这里，为 HTTP 添加 IP 地址（或 Anywhere）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:15:57.100

不幸的是，这些信息不足以让我提供明确的答案。

但是，您可以提出以下一些问题来帮助您找出可能出现的问题：

*   当你运行时会发生什么`telnet 50.40.30.20 80`（ `50.40.30.20`你的 EIP 在哪里）？
*   您提到 RDP 正在工作，这是一个 Windows 实例（需要为 RDP 打开端口 3389）？还是需要为 SSH 打开端口 22 的 Linux 实例？
*   如果是 Linux，SELinux 是否正在运行？如果是这样，您可能会发现 [这](http://www.crypt.gen.nz/selinux/disable_selinux.html)有助于暂时或永久禁用它，以查看它是否会影响您访问 Apache 的能力。

# java - 无法找到或加载主类、环境变量

> ID：15007743
> 
> 赞同：2
> 
> 时间：2013-02-21T16:46:21.330
> 
> 标签：java, class, load, find, main

我知道这已经出现了很多次，但以前的回应似乎没有帮助。我的环境变量是：

*   类路径 `C:\Program Files\Java\jre7\lib;C:\Program Files\Java\jdk1.7.0_15\bin;`
*   小路 `C:\Program Files\Java\jdk1.7.0_15\bin;`

当移动到如下目录时，`C:\Users\Oli\My Documents\java`我可以使用 编译`javac`，但不能使用 java 运行程序。我知道它很可能与环境变量有关，但我无法让它工作。PS错误是“*找不到或加载主类*”

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:20:50.207

CLASSPATH 是 JRE 查找类的地方。您已将 CLASSPATH 设置为一个值，并希望从当前目录运行该类，这将不起作用.. 对于您可以使用的即时解决方案

java -cp C:\Users\Oli\My Documents\java 类名

或撤消设置 CLASSPATH。默认 CLASSPATH 是当前目录

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:26:22.573

让我们假设您的“.java”文件默认包（未定义包）在“C:\Src”中存在，在这种情况下您不需要设置 CLASSPATH。

```
 cd C:\Src
  javac MyJava.java
  java MyJava 
```

如果有包说 com.test

```
cd C:\Src
javac com\test\MyJava.java
java com.test.MyJava 
```

但是，如果您与源文件不在同一个文件夹中并且想要从任何地方运行

```
set CLASSPATH=%CLASSPATH%;C:\src
javac MyJava.java or javac com\test\MyJava.java 
```

和 java com.test.MyJava 或 java com.test.MyJava

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T17:12:20.973

取消设置 CLASSPATH 并使用 JVM 提供的默认路径。这是涵盖环境变量的 Java 教程的[链接。](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-01T02:22:39.610

似乎问题不在路径中......您的代码是否使用“包”语句？（即包my_package；）

如果是这样，请转到“java”目录并执行：

java my_package.MyClass

其中 'my_package' 是...包的名称，而 MyClass 是您编译的 .java 文件（没有 .class 扩展名）。

祝你好运。

# ios - 第一次键盘出现时的动画有时不流畅

> ID：15007744
> 
> 赞同：0
> 
> 时间：2013-02-21T16:46:23.167
> 
> 标签：ios, animation, uiview

我经常注意到，当键盘第一次出现时，UIView 动画在第一次 becomeFirstResponder 事件期间往往不流畅。我指的是随着键盘动画发生的动画，例如手动滚动 UIView 以使 textField 可见。动画在第一次执行后总是很流畅。

出现这种情况是否有技术原因？我在想，第一次运行时 UIView 动画可能会发生一些延迟加载或优化，然后存储在缓存中以供重用。有没有关于这方面的经验教训？如果这些观众不清楚，我可以尝试在测试项目中重新创建问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:29:49.747

虽然这并不能回答为什么会发生这种情况，但它解释了如何解决它。

[为什么 iOS 动画第一次运行时会变慢？](https://stackoverflow.com/questions/8044379/why-are-ios-animations-slow-the-first-time-they-are-run)

基本上，您需要在“DID”事件而不是“WILL”或“SHOULD”上制作动画。系统在“将/应该”事件期间执行其动画，因此显然发生了一些勾结。这不能解释为什么第一次运行和所有其他运行之间的行为不一致。

正如你们中的一些人一样，我认为我应该将动画放在“textFieldWillBeginEditing”中，因为我希望动画与键盘动画同时运行。幸运的是，将动画代码放入“DID”实际上仍然可以确保动画同时发生。极好的。

如果有人仍然对第一次和第二次运行之间的不一致有解释，我仍然会保留他的问题并奖励你一个赞成票和问题答案。谢谢！

# inno-setup - Inno Setup，在文件夹选择步骤中显示一个 msgbox

> ID：15007750
> 
> 赞同：3
> 
> 时间：2013-02-21T16:46:37.237
> 
> 标签：inno-setup

我试图仅在用户到达文件夹选择页面时显示消息框，以下是在设置开始时显示消息框的实际代码：

```
[code]
var ApplicationPath: string;

function GetAppPath(Param: String): String;
begin
RegQueryStringValue(HKLM, 'SOFTWARE\XXX\XXX', 'Install Dir', ApplicationPath)
  if ApplicationPath = '' then
    begin
    MsgBox('Install folder non found', mbError, MB_OK);
    result:=ApplicationPath;
    end
    else
    MsgBox('Install folder found in "' + ApplicationPath + '". NOTE: close the program before proceeding.', mbInformation, MB_OK);
    result:=ApplicationPath;
    end;
end. 
```

我需要类似的东西：

If (PageId = wpSelectDir) then... **[运行上面的代码]**

但我真的不知道如何，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:49:31.237

理想的活动是[`CurPageChanged`](http://jrsoftware.org/ishelp/topic_scriptevents.htm#CurPageChanged). 当显示选择目录页面时，您可以使用这种方式运行代码：

```
[Code]
procedure CurPageChanged(CurPageID: Integer);
var
  AppPath: string;
begin
  if (CurPageID = wpSelectDir) then
  begin
    // this will query the string value in registry; if that succeed and the
    // value is read, then the message box about success is shown, otherwise
    // the error message box about failure is shown
    if RegQueryStringValue(HKLM, 'SOFTWARE\XXX\XXX', 'Install Dir', AppPath) then
      MsgBox('Installation folder found...', mbInformation, MB_OK)
    else
      MsgBox('Installation folder not found...', mbError, MB_OK);
  end;
end; 
```

# c# - Oracle SQL 中的 unicode 字符集

> ID：15007752
> 
> 赞同：0
> 
> 时间：2013-02-21T16:46:39.813
> 
> 标签：c#, sql, oracle, unicode, type-conversion

我有一个 C# 服务，它当前从第 3 方应用程序插入的数据库（Oracle 11）中读取信息。

第 3 方应用程序正在从 XML 生成代码，并将信息保存为 unicode。

C# 应用程序使用以下方法读取文本：

```
public static String GetUnicodeString(Byte[] bytes)
{
    return UnicodeEncoding.Unicode.GetString(bytes, 0, bytes.Length);
} 
```

数据库中的文本在每个字符之间都有十六进制 00。例子：

> 考虑字符串：测试
> 
> 非 UNICODE 十六进制值：54 65 73 74
> 
> DB中的UNICODE十六进制值：54 00 65 00 73 00 74 00

如果我遍历整个字符串，添加十六进制 00 可以正常工作，但这听起来不是最有效的方式，而且看起来很丑。

如何将字符串转换为 3rd 方应用程序当前生成的格式（字符之间为十六进制 00）？

以下是有关如何在数据库中呈现字符串的示例（blob 列）： ![在此处输入图像描述](../Images/3fbdb1b60caf013073f57784b66d3d24.png)

# iphone - 该子视图的背景图像覆盖的子视图的标题（iphone）

> ID：15007753
> 
> 赞同：0
> 
> 时间：2013-02-21T16:46:44.110
> 
> 标签：iphone, uitextfield, background-image, title

我的主视图上有一个子视图，使用点击弹出。

我为其设置了背景图像，但现在标题已被覆盖。我需要做什么来解决这个问题？我应该更改 viewDidLoad 中的任何内容吗？

这是我添加背景图像的方式：

```
 UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"test.png"]];
    imageView.frame = CGRectMake(0.0, ViewHeight, kDeviceWidth, 230.0);

    container.opaque = NO;
    container.backgroundColor = [UIColor clearColor];
    [self.formView addSubview:imageView];
    [self.formView addSubview:frame]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:03:20.567

如果要在背景图像上添加标题，则需要像这样将标题添加到图像视图

```
[imageView addSubview title]; 
```

如果您想在表单视图顶部添加标题，请执行此操作

```
[self.formView addSubview:imageView];

[self.formView addSubview:title]; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:09:51.830

每个层都有称为 zPosition 的属性。通过更改 zPosition，您可以控制绘制图层的顺序。具有较大 zPosition 的 CALayers 覆盖具有较小 zPosition 的 CALayers。zPosition 默认为 0，因此为背景图像层设置 -1 值应该可以工作。

要更改此属性，您必须使用 QuartzCore 框架：单击 Project - Targets - ProjectName - Build Phases - Link Binary With Libraries - Plus - QuartzCore。

```
#include <QuartzCore/QuartzCore.h>

imageView.layer.zPosition = -1; 
```

# symfony1 - 显示基于外键/连接的选择

> ID：15007754
> 
> 赞同：0
> 
> 时间：2013-02-21T16:46:51.737
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我有以下架构：

```
Template

UserTemplate
  template_id

Costs
  template_id
  amount
  value 
```

我想要做的是创建一个`sfWidgetFormDoctrineChoice`基于`UserTemplate`id 显示运费的。

```
 $this->widgetSchema['cost'] = new sfWidgetFormDoctrineChoice(array(
      'model'      => 'Costs',
      'key_method' => 'getValue',
      'method'     => 'getAmount',
      'add_empty'  => 'Please Select Amount', 
      'expanded'   => false,
      'multiple'   => false
    )); 
```

这将显示所有成本。

理想情况下，我希望将其限制为 UserTemplate。

我已经研究过创建一个自定义查询并将其传递到小部件中，但我不确定这是否是正确的方法

因此，如果我有一堆成本分配给 12 的模板 ID 并且用户模板引用 12，当我在 example.com/user-template/12 上时 - 我希望在我的表单中看到这方面的成本小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:34:19.177

创建自定义查询并将其传递给小部件正是您要查找的内容。您必须根据`template_id`您在 URL 中使用的内容来构建查询。

# php - 列表框中的函数结果

> ID：15007756
> 
> 赞同：0
> 
> 时间：2013-02-21T16:46:58.273
> 
> 标签：php, list

为了在我的页面中尽可能多地保持 php 代码与 html 分离，我正在尝试创建一个函数，该函数可用于填充其他页面上的列表/下拉框。使用 msqli，我查询了我的表“acc_vat_rates！并选择了我感兴趣的两个字段，“vat_rate_id”和“vat_rate_name”，然后循环遍历结果并填充一个名为 $vatratearray 的数组，代码如下...

```
<?php 

function vat_rates(){
    $conn = new mysqli("192.168.1.81", "root", "", "cloudoneaccountsdb");
$queryvat = "SELECT vat_rate_id,vat_rate_name FROM acc_vat_rates ORDER BY vat_rate_id";
$resultsvat = $conn->query($queryvat);
//SET UP AN ARRAY NOW
$vateratearray = array();
while ($rowvat= $resultsvat->fetch_assoc())
    $vatratearray[] = $rowvat['vat_rate_id']." "." ". $rowvat['vat_rate_name'];
//print_r($vateratearray);

foreach($vatratearray as $key => $value)
//echo "<p>{$value} <?br></p>";
echo '<option value="'.$value.'">'.$value.'</option>';
}

?> 
```

该函数存储在一个名为“global_functions.php 的页面中以包含在其他页面中所有上述工作正常。然后我使用函数“function vat_rates() 作为其他页面上列表框的选项值，但是，这就是我的问题开始的地方。当该函数填充一个列表框时，它会同时显示record_id和名称，这没关系，但是当我发布所选行时，它还会发布我不需要的“id”和“name”。我只希望发布“id”以包含在数据库中。

我已经有一段时间了，所以任何帮助将不胜感激。谢谢...大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:10:27.967

你可以改变你的while循环并删除foreach：

```
while ($rowvat= $resultsvat->fetch_assoc()){
    echo '<option value="'.$rowvat['vat_rate_id'].'">'.$rowvat['vat_rate_name'].'</option>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:11:11.620

尝试这个：

```
 while ($rowvat= $resultsvat->fetch_assoc())
        {

            array_push($vatratearray, 
              array('vat_rate_id' => $rowvat['vat_rate_id'], 
                    'vat_rate_name' => $rowvat['vat_rate_name']

              ));

        }    

        foreach($vatratearray as $key => $value)
        {
        echo '<option value="'.$value['vat_rate_id'].'">'.$value['vat_rate_id'].'  '$value['vat_rate_name'].'</option>';
        } 
```

您可以对这段代码进行很多改进......您甚至可以在 while 循环中创建选项；就像其他答案一样XD

萨卢多斯 ;)

# sql - 关系代数和 SQL Oracle

> ID：15007757
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:46:59.033
> 
> 标签：sql, oracle, algebra

我需要从一个表中输出数据，但前提是该客户名称已出现在另一个表中并且我不太确定如何使其工作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:55:05.583

您可以使用`INNER JOIN`which 将返回出现在两个表中的所有行：

```
select t1.*
from table1 t1
inner join table2 t2
  on t1.name = t2.name 
```

如果您在学习`JOIN`语法方面需要帮助，那么这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:49:59.480

这是一个基本的 SQL 查询：

```
SELECT *
FROM t
WHERE t.name IN (SELECT name FROM t2); 
```

还有其他表达方式。您是 SQL 新手吗？

# hibernate - JPA @Onetomany 和 @manytoone 按复合主键的一部分获取

> ID：15007760
> 
> 赞同：1
> 
> 时间：2013-02-21T16:47:16.950
> 
> 标签：hibernate, jpa

我有两个实体 Order 和 Items。在 Order 实体中，id 是 OrderId、UserId 的复合主键，但在 Items 中，外键只是 Order Id。

如何使用订单 ID 获取商品列表

```
public class Order {
   @EmbeddedId
   private CompositePrimaryKey pk;

   @OneToMany
   @JoinColumn(name="ORDER_ID")
   private List<Items> itemsLst;
}

public Class Items {
   @Id
   @Column(name="ORDER_ID")
   private Integer orderId;
} 
```

上面的代码不起作用。我知道桌子设计不好，但是现在很难改变桌子的设计，改变会影响很多地方。所以保持当前的设计我可以做任何事情。

我尝试使用 mappedBy，如上所述，在任何一种情况下我都会出错。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T08:26:59.040

如果您在 Order 和 Item 之间有 OneToMany，那么 ORDER_ID 不能是 Item 的主键，因为它不是唯一的。也许还有其他问题，但这是一个显而易见的问题，我可以在没有看到错误的情况下发现它。

# asp.net - 阅读 ASP.NET ASPX 评论

> ID：15007764
> 
> 赞同：0
> 
> 时间：2013-02-21T16:47:21.107
> 
> 标签：asp.net, visual-studio-2010

我正在接管一个在我们公司内部运行的旧 ASP.NET 项目。

我关注的大部分内容，但我不确定这些代码是否被注释掉，或者这是否是为了从浏览器中隐藏代码。

绿色是评论的颜色，很多东西都是绿色的。

我的大部分工作通常是在 Windows 窗体或偶尔的 T-SQL 上。我问过我们网站编程的工作人员这是否是评论，他不确定。他说他以前从未见过这种类型的编码。

它运行还是评论？

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <%--<style type="text/css">
        td {color: Purple; border-color: purple;}
   </style>--%>
<%--<script language="javascript" type="text/javascript">
// This Script is used to maintain Grid Scroll on Partial Postback
var scrollTop;
//Register Begin Request and End Request 
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
//Get The Div Scroll Position
Function BeginRequestHandler(sender, args) 
{
var m = document.getElementById('divGrid');
scrollTop=m.scrollTop;
}
//Set The Div Scroll Position
function EndRequestHandler(sender, args)
{
var m = document.getElementById('divGrid');
m.scrollTop = scrollTop;
} 
</script>--%>
    <cc1:ToolkitScriptManager ID="ScriptManager1" runat="server"> 
```

由于代码块不会显示注释颜色，因此我将显示屏幕截图。

![截屏](../Images/905173344ad46780f1e5bce0301e757a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:03:27.443

<%-- 和 --%> 之间的所有内容都被注释掉并且不会运行，这似乎是该页面的大部分内容。所以，是的，如果它是绿色的，它会被注释掉并且不会运行。

# c# - 如何使用 Microsoft Fakes 填充 DbContext？

> ID：15007766
> 
> 赞同：5
> 
> 时间：2013-02-21T16:47:22.623
> 
> 标签：c#, entity-framework, testing, mocking

我正在创建一个调用创建任务方法的单元测试。create task 方法调用了一些模拟的外部对象，这是我测试的目的，但在我测试的方法中，还有一个`SaveChanges`调用可以保存我的任务。我想要做的是填充`DbContext`里面的类，`System.Data.Entity`以便该`SaveChanges`方法不再访问数据库。

我添加了一个假程序集，`System.Data.Entity`但是当我使用`System.Data.Entity`.Fakes 时，它说“无法解析符号'Fakes'”，尽管我可以访问`System.Data.Fakes`（但我没有为 System.Data 添加假程序集）

我在我的实体上下文中伪造了其他方法，但我不能在我的实体上伪造 SaveChanges 方法，因为该方法是从 DbContext 继承的。

```
ShimDBEntities.AllInstances.SaveChanges = (x) => { ... }; 
```

上面的代码块说“无法解析符号'SaveChanges'”。

那么如何使用 Microsoft Fakes 填充 DbContext 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:49:55.940

我设法通过`SaveChanges`在我的类中创建一个方法`BaseRepository`并在我拥有的所有派生存储库中使用它来做到这一点`db.SaveChanges`。

然后我调整了我的方法`BaseRepository`，这样我的`SaveChanges`方法就什么都不做

# c++ - 任何为 C++ 提供 betainv 的库

> ID：15007768
> 
> 赞同：4
> 
> 时间：2013-02-21T16:47:29.067
> 
> 标签：c++, math, g++, libraries, beta-distribution

有谁知道`betainv`在 c++ 中提供该功能的任何库？

计算带有参数的 beta 分布`betainv(x,a,b)`的分位数`xth``a,b`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:02:52.677

[Boost C++ 库](http://boost.org)有一个[beta 分布](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists/beta_dist.html)，所有的 boost 分布都包括逆累积密度函数：分[位数](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/nmp.html#math_toolkit.dist.dist_ref.nmp.h11)。

例如

```
double probability=...;
beta_distribution<> mybeta(2, 5);
cout << quantile(mybeta, probability); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:49:57.927

我不确定，但我相信[*Wolfram Mathematica*](http://reference.wolfram.com/mathematica/guide/CLanguageInterface.html)、[*MatLab*](http://www.codeproject.com/Articles/4202/Solving-Engineering-Problems-Using-MATLAB-C-API)或[*R*](https://stackoverflow.com/questions/2463437/r-from-c-simplest-possible-helloworld)的 API应该提供这种方法。

# asp.net - 如何在后面的代码中从当前的 aspx 页面获取内部 html

> ID：15007769
> 
> 赞同：2
> 
> 时间：2013-02-21T16:47:29.593
> 
> 标签：asp.net, web-applications

我如何能够在代码隐藏中获取当前 aspx 页面的 innerHtml？当用户单击pdf按钮时，我想使用innerHTML并传递给pdf转换器功能，但我需要当前页面html作为字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:15:49.483

我会做一个回发并使用 javascript 来提供当前的 innerHTML

```
__doPostBack(**event target**, document.documentElement.innerHTML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:21:03.573

您可以覆盖`Render`页面的方法。

```
protected override void Render(HtmlTextWriter writer)
{
     StringBuilder sb = new StringBuilder();
     HtmlTextWriter tw = new HtmlTextWriter(new StringWriter(sb));
     base.Render(tw);
     string innerHtml = sb.ToString();
} 
```

innerHtml 将包含页面的整个呈现的 html 代码。稍微简化的版本。

# c++ - 获取当前线程时间的 id 操作是否昂贵？

> ID：15007771
> 
> 赞同：10
> 
> 时间：2013-02-21T16:47:38.147
> 
> 标签：c++, c, multithreading

我将在代码中性能非常关键的地方使用当前正在运行的线程的 id，所以我应该选择是在某处缓存该 id 还是调用一个方法（`gettid`对于类 unix 系统和`GetCurrentThreadId`Windows）来获取它时间。那么哪个更好呢？获取线程ID是系统调用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T17:15:13.650

至少在 Windows 中，`GetCurrentThreadId()`是*相当*便宜的，而且不涉及系统调用。基本上它可以：

```
int GetCurrentThreadId() { 
    _asm { 
        mov eax, fs:[18h]
        mov eax, [eax+24h]
    }
} 
```

将值缓存在您自己的变量中可能会有一点好处，但不是很多。主要好处可能是如果您将变量与其他常用变量一起存储，这可以提高局部性（从而提高缓存使用率）。

因此，除非您正在处理如此紧密的循环，以至于消除内存提取（或可能两个）的可能性很大，否则您不太可能通过缓存它返回的值来获得太多收益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:51:49.543

不，这不是一个昂贵的电话。这是一个系统调用或类似的，但远非昂贵。显然，如果您可以将值缓存在一个简单的变量中，那么它的速度会提高 10 倍。

但就像所有与性能相关的查询一样，这实际上取决于您的基准测试。你可以很容易地设置使用单个线程，调用函数来获取线程 ID，然后做你想做的事情。测量运行一些测试需要多长时间。然后用相同范围内的常数值替换对线程 ID 的调用，看看效果如何。

# cuda - L1缓存的CUDA银行冲突？

> ID：15007773
> 
> 赞同：1
> 
> 时间：2013-02-21T16:47:39.190
> 
> 标签：cuda, opencl, gpu, nvidia, bank-conflict

在 NVIDIA 的 2.x 架构上，每个 warp 有 64kb 的内存，默认情况下划分为 48kb 的共享内存和 16kb 的 L1 缓存（服务`global`和`constant`内存）。

我们都知道访问共享内存的银行冲突——内存被分成 32 个大小为 32 位的银行，以允许所有 32 个线程同时独立访问。另一方面，全局内存虽然慢得多，但不会遇到存储库冲突，因为内存请求是通过 warp 合并的。

**问题：** 假设来自全局或常量内存的一些数据缓存在 L1 缓存中，用于给定的 warp。对这些数据的访问是否会受到存储冲突的影响，例如共享内存（因为 L1 缓存和共享内存实际上是相同的硬件），还是像全局/常量内存那样没有存储冲突？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T17:27:59.920

> 在 NVIDIA 的 2.x 架构上，每个 warp 有 64kb 的内存，默认情况下划分为 48kb 的共享内存和 16kb 的 L1 缓存

计算能力 2.x 设备的每个流式多处理器 (SM) 具有 64 KB 的 SRAM，可配置为

*   16 KB L1 和 48 KB 共享内存，或
*   48 KB L1 和 16 KB 共享内存。

> （服务全局和常量内存）。

加载和存储到全局内存、本地内存和表面内存通过 L1。对常量内存的访问通过专用的常量缓存。

> 我们都知道访问共享内存的存储库冲突——内存被划分为 32 个 32 位大小的存储库，以允许所有 32 个线程同时独立访问。另一方面，全局内存虽然慢得多，但不会遇到存储库冲突，因为内存请求是通过 warp 合并的。

通过 L1 对全局或本地内存的访问是按高速缓存行 (128 B) 完成的。当向 L1 发出加载请求时，LSU 需要执行地址发散计算以确定哪些线程正在访问同一缓存行。然后 LSU 单元必须执行 L1 缓存标记查找。如果该行被缓存，则将其写回寄存器文件；否则，请求被发送到 L2。如果 warp 具有未被请求服务的线程，则请求重播并使用剩余线程重新发出操作。

warp 中的多个线程可以访问缓存行中的相同字节而不会引起冲突。

> 问题：假设来自全局或常量内存的一些数据缓存在 L1 缓存中，用于给定的 warp。

常量内存不缓存在 L1 中，而是缓存在常量缓存中。

> 对这些数据的访问是否会受到存储冲突的影响，例如共享内存（因为 L1 缓存和共享内存实际上是相同的硬件），还是像全局/常量内存那样没有存储冲突？

L1 和常量缓存一次访问一个缓存行，因此没有存储体冲突。

# php - 使用 PHP 和 Drupal 用户名

> ID：15007774
> 
> 赞同：0
> 
> 时间：2013-02-21T16:47:40.147
> 
> 标签：php, drupal

我正在尝试做一些事情，PHP 读取登录的用户名（我正在使用 Drupal），然后在我为该用户创建的目录中读取一个简单的 csv 文件。

我确认，是的，php 正在读取我的用户名并将其存储到我设置的变量（$uname）中。我做了一个测试，我回显了 $uname 并且它有效，并且确实在网站上显示了我的用户名。但是，当我连接路径时，我收到一条错误消息，指出该目录不存在，并且该错误显示除用户名之外的所有内容。

这是我所拥有的：

```
<?php

global $user;
$uname= $user->name;
$fdir = "./users/";
$fname="test.csv";
$slash = "/";

$fpath = $fdir.$uname.$slash.$fname;

$file_handle = fopen($fpath, "r");

while (!feof($file_handle) ) {

$line_of_text = fgetcsv($file_handle, 1024);

print $line_of_text[0] . $line_of_text[1]. $line_of_text[2] . "<BR>";

}

fclose($file_handle);

?> 
```

更新：

*如果*文件与 PHP 脚本位于同一目录中，我可以使用用户名读取 csv 。但是，我无法让它使用用户名进入以用户命名的子目录。我怎样才能做到这一点？

谢谢你看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:52:42.770

嗯...嗯，你会发现这很奇怪，但只有当你将它放入你在 Drupal 中创建的文章或页面中并将其设置为包含 PHP 代码时，此代码才有效。如果您在 Drupal 之外运行它（即，作为一个独立的 PHP 脚本），它不起作用并且它不会获取登录到 Drupal 站点的用户名。嗯。

# php - PHP 正则表达式。如何获得匹配的数组？

> ID：15007777
> 
> 赞同：1
> 
> 时间：2013-02-21T16:47:55.480
> 
> 标签：php, regex

我有一个格式如下的字符串：

```
5;1-x;1-2;(1-x;)+ 
```

我使用 1-x 作为从 1 到无穷大的所有整数的符号，使用 (1-x;)+ 来标记最后一个整数可以重复任意次数。

一些示例字符串：

```
5;1;1;1
5;7;2;7;5;1;9 
```

如何将这些字符串与正则表达式匹配并获得所有 (1-x;)+ 匹配项？

我尝试了以下方法：

```
preg_match_all('%5;([1-9]{1}[0-9]*);([1-2]);([1-9]{1}[0-9]*;?)+%',
               $str, $matches); 
```

字符串 "5;1;1;1" 的结果是：

```
array(4) {
  [0]=>
  array(1) {
    [0]=>
    string(7) "5;1;1;1"
  }
  [1]=>
  array(1) {
    [0]=>
    string(1) "1"
  }
  [2]=>
  array(1) {
    [0]=>
    string(1) "1"
  }
  [3]=>
  array(1) {
    [0]=>
    string(1) "1"
  }
} 
```

对于字符串 "5;7;2;7;5;1;9" 它是：

```
array(4) {
  [0]=>
  array(1) {
    [0]=>
    string(13) "5;7;2;7;5;1;9"
  }
  [1]=>
  array(1) {
    [0]=>
    string(1) "7"
  }
  [2]=>
  array(1) {
    [0]=>
    string(1) "2"
  }
  [3]=>
  array(1) {
    [0]=>
    string(1) "9"
  }
} 
```

如您所见，只有 (1-x;)+ 中的最后一个整数在匹配数组中，但我希望匹配数组包含值 7、5、1 和 9，而不仅仅是最后一个。这甚至可以使用正则表达式还是我需要使用另一种方法来验证并从这些字符串中获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:52:46.887

单程

```
//$str = "5;1;1;1";
$str = "5;7;2;7;5;1;9";
$pattern = '%^5;([1-9]\d*;)[12];((?:[1-9]\d*;?)+)$%';

$str = preg_replace( $pattern, '$1$2', $str, -1, $count );

if ( $count ) {
   print_r( explode( ';', $str ) );
} else {
   echo 'Invalid string';
} 
```

这`-1`意味着更换次数没有限制。
`$count`是替换的次数。`1`如果字符串有效，否则将是`0`。

以上假设如果字符串以`;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:04:45.290

老实说，我只会分解字符串并删除不需要的第一个和第三个元素，如下所示：

```
$array = explode(';', $string);
$diff_array = array(0 => 'not_used', 2 => 'not_used');
$final_array = array_key_diff($array, $diff_array); 
```

这为您提供了一个包含所有值的数组，除了您似乎不感兴趣的第一个和第三个元素。

如果您随后需要验证剩余元素确实是值 >= 1 的整数，您可以像这样在其上运行 array_filter：

```
$filtered_array = array_filter($final_array, function($value) {
    if ((string)(int)$value == $value && (int)$value >= 1) return true;
    return false;
} 
```

# java - 实现迭代语句的最有效的记忆方法是什么？

> ID：15007784
> 
> 赞同：1
> 
> 时间：2013-02-21T16:48:35.357
> 
> 标签：java, performance, algorithm

我知道有办法知道周期或迭代语句的成本，但我想知道两件事：

**第一个。** 这两个上市哪个更划算？（或者如果有更好的方法，我全神贯注）：

**更新：**然后问题是：他们中的哪两个会正确使用内存/GC？请记住，下一个循环不需要`reqObj`和的“值”。`resObj`

```
for (TransactionLog transactionLog : transactionLogList) {
 RequestObj reqObj = new RequestObj();
 ResponseObj resObj;
 try {

  //do things with these 2 babes and the transactionLog

 } catch (WhateverException ex) {
  log.error("Error in XYZ while doing whatever", ex);
  //execute code without throwing anything up
 } finally {
  reqObj = null;
  resObj = null;
 }
} 
```

**或者**

```
RequestObj reqObj = new RequestObj();
ResponseObj resObj;
for (TransactionLog transactionLog : transactionLogList) {
 try {
  //do things with these 2 babes and the transactionLog

 } catch (WhateverException ex) {
  log.error("Error in XYZ while doing whatever", ex);
  //execute code without throwing anything up
 } finally {
  //do something
 }
} 
```

**和第二。** 我在哪里可以找到一个好地方/书/网站来学习这个“算法最佳实践”和函数 O(letter) 来计算交互的语句成本？

PD：对不起我的英语……他不是很好看。xD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:53:45.630

本地对象更清晰，更不容易出错，并且垃圾收集器可以很好地处理这些对象。对于像 StringBuilder 这样的可重用对象，您可以在每个周期中清除而不是执行 new StringBuilder，我很惊讶它也成立（有人说）。

正如设置为 null 是初学者的签名一样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T18:05:41.337

如果`RequestObj`并且`ResponseObj`是`AutoCloseable`（或者您这样实现它们），那么您应该考虑使用 Java 7 提供的**try-with-resources**块。它可以处理它们需要或您想要的任何清理，而不需要额外的`finally`（或中的附加捕获`finally`，就此而言；这些异常被抑制）。

```
try( RequestObj reqObj = new RequestObj(); ResponseObj resObj = ... ) {
  // Do stuff

} catch (WhateverException ex) {
  log.error("Error in XYZ while doing whatever", ex);
  // execute code without throwing anything up
} 

// No finally block required 
```

您不应该担心 GC/内存问题，因为在您的情况下这似乎是过早的优化。最好保持你的代码干净和可读。

更多信息：[http ://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

# java - 动态修改类路径

> ID：15007794
> 
> 赞同：1
> 
> 时间：2013-02-21T16:48:59.453
> 
> 标签：java, classpath, classloader, urlclassloader

我想在下面添加配置文件`/home/nameuser/.myProject/conf`在运行时将配置文件添加到类路径中。

我尝试使用`URLClassLoader`但没有成功。

```
URL[] url={new URL("file://foo")};
URLClassLoader loader = new URLClassLoader(url); 
```

或者

```
ClassLoader currentThreadClassLoader
 = Thread.currentThread().getContextClassLoader();

// Add the conf dir to the classpath
// Chain the current thread classloader
URLClassLoader urlClassLoader
 = new URLClassLoader(new URL[]{new File("mtFile").toURL()},
                      currentThreadClassLoader);

// Replace the thread classloader - assumes
// you have permissions to do so
Thread.currentThread().setContextClassLoader(urlClassLoader); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:46:26.373

我成功了

谢谢Darcy Qiu很好`URL[] url={new URL("file:///home/nameuser/.myProject/conf/")};`，我不得不做而不是`URL[] url={new URL("file:///home/nameuser/.myProject/conf/myfile")};`

# jquery-ui - jquery ui可排序即10

> ID：15007795
> 
> 赞同：0
> 
> 时间：2013-02-21T16:49:07.983
> 
> 标签：jquery-ui

如何让[jquery ui 可排序演示](http://api.jqueryui.com/sortable/)在 IE 10 中工作？它适用于 Firefox 和 Chrome。在 IE 10 中，它会拖动，但不会掉落。

我试过了：

```
 forceHelperSize: true,
    forcePlaceHolderSize: true,
    helper: 'clone' 
```

IE 10.0.9200.16384，Windows 8 Professional 64位，浏览器模式默认文档渲染模式：IE10，文档模式：标准

# php - 隐藏下载链接的替代方法

> ID：15007797
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:49:10.203
> 
> 标签：php, html, upload, download

我目前正在使用此代码隐藏下载链接，但它为某些用户提供了未完成的下载。我不知道为什么，但是太多的用户向我报告了这个问题。我目前的代码是：

```
file = "../".$realFileName;
$fakeFileName= 'Upbaz.ir-'.base64_decode($_GET['ffname']);
$fp = fopen($file, 'rb');
header("Content-Type: application/octet-stream");
header("Content-Disposition: attachment; filename=$fakeFileName");
header("Content-Length: " . filesize($file));
fpassthru($fp); 
```

有人知道隐藏下载链接的其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:53:12.293

增加脚本运行时间

```
@set_time_limit(120); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:55:09.800

这个脚本将处理文件的下载，它包括一个缓冲区/不同的 ext 类型（如果你愿意的话）。隐藏链接的一个好方法是将文件放在受保护的目录中，并将链接存储在数据库中。用户看到与文件绑定的 ID 或会话，服务器会找到该文件并提供它。

```
if ($fd = fopen ($fullPath, "r")) {
    $fsize = filesize($fullPath);
    $path_parts = pathinfo($fullPath);
    $ext = strtolower($path_parts["extension"]);
    switch ($ext) {
        case "txt":
            header("Content-type: application/txt"); // add here more headers for diff. extensions
            header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\""); // use 'attachment' to force a download
            break;
        default:
            header("Content-type: application/octet-stream");
            header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\"");
    }
    header("Content-length: $fsize");
    header("Cache-control: private"); //use this to open files directly
    while(!feof($fd)) {
        $buffer = fread($fd, 2048);
        echo $buffer;
    }
}
fclose ($fd); 
```

.htaccess 来保护目录（你应该只有这些文件的目录

```
deny from all 
```

上面的脚本修改为你的：

```
$file = "../".$realFileName;
$fakeFileName= 'Upbaz.ir-'.base64_decode($_GET['ffname']);
if ($fd = fopen ($file, "r")) {
        $fsize = filesize($file);

        header("Content-type: application/octet-stream");
        header("Content-Disposition: attachment; filename=\"$fakename\"");

        header("Content-length: $fsize");
        header("Cache-control: private"); //use this to open files directly
        while(!feof($fd)) {
            $buffer = fread($fd, 2048);
            echo $buffer;
        }
    }
    fclose ($fd); 
```

# memory-leaks - 响应时间的总体趋势表明？

> ID：15007806
> 
> 赞同：0
> 
> 时间：2013-02-21T16:49:34.413
> 
> 标签：memory-leaks, loadrunner

我有一个使用 URL 模式录制并粘贴在下面的简单 VUGen 导航脚本。我有两个问题：

1.  不能在 URL 模式录制的脚本中使用 web_reg_find() 吗？在脚本中的某个步骤之前放置验证（web_reg_find）时，我知道将出现一个文本。生成日志只告诉我 web_reg_find 是成功的（不是我习惯使用 HTML 模式的方式，而且生成日志通常也会公开值本身）。

2.  在具有 2 个用户的控制器中以 sceanrio 的形式运行以下脚本时，在运行事务时间达到峰值 10 分钟后，JVM 中的 CPU 使用率达到峰值（99.9%），并且内存也“最大化”。通常认为这与堆和 GC 设置 ++ 有关。但是脚本本身是否有可能使这种情况发生。可能导致脚本成为响应时间/内存/cpu 使用高峰的原因的更多细节是，我正在测试的应用程序根本没有与任何服务集成，所有服务都围绕它进行了模拟。我也只使用一个用户登录所有我的请求，因为这被嘲笑了，我每次都得到相同的响应。但它确实会在任何交易中引发错误。也没有实现注销/清理逻辑，这可能会导致网络服务器上的会话累积，因此可能就是这种情况。我的下一步是在峰值发生一段时间后使用 JVisualVM 挖掘高 CPU 使用率。所以我的一般问题是：这种现象，如 10 分钟后的响应时间峰值和 WAS（实际上是 JBoss）上的内存/CPU 消耗峰值，是否与脚本本身有关？任何人都经历过他们的脚本是这个的来源？是由于脚本本身的原因吗？任何人都经历过他们的脚本是这个的来源？是由于脚本本身的原因吗？任何人都经历过他们的脚本是这个的来源？

Action() { //将 sessionID i 保存在参数中，以便在脚本期间进一步手动关联 web_reg_save_param_ex("ParamName=SessionID", "LB=jsessionid=", "RB=?", SEARCH_FILTERS, "Scope=Headers", LAST);

```
 //lr_output_message("Sesjons ID: %s", lr_eval_string ("+{SessionID}"));
    web_url("something", 
            "URL={url}/something/", 
            "Resource=0", 
            "RecContentType=text/html", 
            "Referer=", 
            "Snapshot=t1.inf", 
            "Mode=HTTP", 
            LAST);

    web_concurrent_start(NULL);

    web_url("modig-ver-1359533772000.css", 
            "URL={url}/something/css/modig-ver-1359533772000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t2.inf", 
            LAST);

    web_url("bootstrap-transition-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-transition-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t3.inf", 
            LAST);

    web_url("bootstrap-alert-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-alert-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t4.inf", 
            LAST);

    web_url("datepicker-ver-1360590665000.css", 
            "URL={url}/something/css/datepicker-ver-1360590665000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t5.inf", 
            LAST);

    web_url("ViseForslagTilSomethingPage-ver-1360590665000.css", 
            "URL={url}/something/css/ViseForslagTilSomethingPage-ver-1360590665000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t6.inf", 
            LAST);

    web_url("bootstrap-carousel-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-carousel-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t7.inf", 
            LAST);

    web_url("bootstrap-button-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-button-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t8.inf", 
            LAST);

    web_url("GettingreadyForSomethingPage-ver-1360590665000.css", 
            "URL={url}/something/css/GettingreadyForSomethingPage-ver-1360590665000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t9.inf", 
            LAST);

    web_url("bootstrap-collapse-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-collapse-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t10.inf", 
            LAST);

    web_url("bootstrap-tooltip-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-tooltip-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t11.inf", 
            LAST);

    web_url("bootstrap-dropdown-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-dropdown-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t12.inf", 
            LAST);

    web_url("bootstrap-modal-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-modal-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t13.inf", 
            LAST);

    web_url("VurderePiceofshitListePanel-ver-1360590665000.css", 
            "URL={url}/something/css/VurderePiceofshitListePanel-ver-1360590665000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t14.inf", 
            LAST);

    web_url("bootstrap-popover-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-popover-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t15.inf", 
            LAST);

    web_url("bootstrap-scrollspy-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-scrollspy-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t16.inf", 
            LAST);

    web_url("bootstrap-tab-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-tab-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t17.inf", 
            LAST);

    web_url("bootstrap-affix-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-affix-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t18.inf", 
            LAST);

    web_url("bootstrap-datepicker-ver-1360590665000.js", 
            "URL={url}/something/js/bootstrap-datepicker-ver-1360590665000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t19.inf", 
            LAST);

    web_url("BasePage-ver-1360590665000.css", 
            "URL={url}/something/css/BasePage-ver-1360590665000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t20.inf", 
            LAST);

    web_url("jquery.placeholder-local-modernisering-version-ver-1360590665000.js", 
            "URL={url}/something/js/jquery.placeholder-local-modernisering-version-ver-1360590665000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t21.inf", 
            LAST);

    web_url("bootstrap-typeahead-ver-1359533772000.js", 
            "URL={url}/something/js/bootstrap/bootstrap-typeahead-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t22.inf", 
            LAST);

    web_url("BasePage-ver-1360590665000.js", 
            "URL={url}/something/js/BasePage-ver-1360590665000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t23.inf", 
            LAST);

    web_url("GettingreadyForSomethingPage-ver-1360590665000.js", 
            "URL={url}/something/js/GettingreadyForSomethingPage-ver-1360590665000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t24.inf", 
            LAST);

    web_url("BstreetPanel-ver-1360590665000.js", 
            "URL={url}/something/js/BstreetPanel-ver-1360590665000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t25.inf", 
            LAST);

    web_url("wicket-debugbar-ver-1355500350000.css", 
            "URL={url}/something/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-debugbar-ver-1355500350000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t26.inf", 
            LAST);

    web_url("BstreetPanel-ver-1360590665000.css", 
            "URL={url}/something/css/BstreetPanel-ver-1360590665000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t27.inf", 
            LAST);

    web_url("wicket-debugbar-ver-1355500350000.js", 
            "URL={url}/something/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-debugbar-ver-1355500350000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t28.inf", 
            LAST);

    web_url("FatteSomethingPage-ver-1360590665000.css", 
            "URL={url}/something/css/FatteSomethingPage-ver-1360590665000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t29.inf", 
            LAST);

    web_url("PiceofshitPanel-ver-1360590665000.js", 
            "URL={url}/something/js/PiceofshitPanel-ver-1360590665000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t30.inf", 
            LAST);

    web_url("wicket-ver-1355500350000.png", 
            "URL={url}/something/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-ver-1355500350000.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t31.inf", 
            LAST);

    web_url("bug-ver-1355500350000.png", 
            "URL={url}/something/wicket/resource/org.apache.wicket.devutils.inspector.InspectorPage/bug-ver-1355500350000.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t32.inf", 
            LAST);

    web_url("remove-ver-1355500350000.png", 
            "URL={url}/something/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/remove-ver-1355500350000.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t33.inf", 
            LAST);

    web_url("jquery-1.8.2-ver-1359533772000.js", 
            "URL={url}/something/js/jquery/jquery-1.8.2-ver-1359533772000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t34.inf", 
            LAST);

    web_url("harddrive-ver-1355500350000.png", 
            "URL={url}/something/wicket/resource/org.apache.wicket.devutils.debugbar.SessionSizeDebugPanel/harddrive-ver-1355500350000.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t35.inf", 
            LAST);

    web_concurrent_end(NULL);

    web_concurrent_start(NULL);

    web_url("prosessteg_gettingready.png", 
            "URL={url}/something/css/images/prosessteg_gettingready.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t36.inf", 
            LAST);

    web_url("somelogo.jpg", 
            "URL={url}/something/css/images/somelogo.jpg", 
            "Resource=1", 
            "RecContentType=image/jpeg", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t37.inf", 
            LAST);

    web_url("glyphicons-halflings-white.png", 
            "URL={url}/something/img/glyphicons-halflings-white.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t38.inf", 
            LAST);

    web_concurrent_end(NULL);

    web_reg_save_param_ex(
            "ParamName=someOtherThingsId",
            "LB=something/someOtherThing/",
            "RB=/gettingready",
            SEARCH_FILTERS,
            "Scope=Headers",
            LAST);

    //lr_output_message("SomeOtherThings ID:", lr_eval_string ("{someOtherThingsId}"));

    lr_think_time(3);

    lr_start_transaction("Logg inn");

    web_submit_data("create;jsessionid=+{SessionID}", 
            "Action={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0-1.IFormSubmitListener-createeSomeOtherThingForm", 
            "Method=POST", 
            "RecContentType=text/html", 
            "Referer={url}/something/someOtherThing/create;jsessionid=+{SessionID}?0", 
            "Snapshot=t39.inf", 
            "Mode=HTTP", 
            ITEMDATA, 
            "Name=neste", "Value=x", ENDITEM, 
            "Name=fnr", "Value={fnr}", ENDITEM, 
            "Name=someOtherThingsidbuse", "Value=", ENDITEM, 
            "Name=userId", "Value=P114818", ENDITEM, 
            "Name=authenticationLevel", "Value=3", ENDITEM, 
            "Name=identType", "Value=internal", ENDITEM, 
            "Name=consumerId", "Value=something", ENDITEM, 
            LAST);

    web_concurrent_start(NULL);

    web_url("modal-ver-1355500286000.js", 
            "URL={url}/something/wicket/resource/org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow/res/modal-ver-1355500286000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t40.inf", 
            LAST);

    web_url("wicket-ajax-jquery-ver-1355500070000.js", 
            "URL={url}/something/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-ajax-jquery-ver-1355500070000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t41.inf", 
            LAST);

    web_url("wicket-event-jquery-ver-1355500070000.js", 
            "URL={url}/something/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-event-jquery-ver-1355500070000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t42.inf", 
            LAST);

    web_url("modal-ver-1355500286000.css", 
            "URL={url}/something/wicket/resource/org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow/res/modal-ver-1355500286000.css", 
            "Resource=1", 
            "RecContentType=text/css", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t43.inf", 
            LAST);

    web_url("wicket-ajax-jquery-debug-ver-1355500070000.js", 
            "URL={url}/something/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-ajax-jquery-debug-ver-1355500070000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t44.inf", 
            LAST);

    web_concurrent_end(NULL);

    web_url("glyphicons-halflings.png", 
            "URL={url}/something/img/glyphicons-halflings.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t45.inf", 
            LAST);

    lr_end_transaction("Logg inn",LR_AUTO);

    lr_think_time(5);

    lr_start_transaction("Neste Gettingready something");

    web_url("gettingready", 
            "URL={url}/something/someOtherThing/{someOtherThingsId}/gettingready?2-1.IBehaviorListener.0-neste&_=1361189220848", 
            "Resource=0", 
            "RecContentType=text/xml", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t46.inf", 
            "Mode=HTTP", 
            LAST);

    web_url("vurderepiceofshit", 
            "URL={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit", 
            "Resource=0", 
            "RecContentType=text/html", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/gettingready?3", 
            "Snapshot=t47.inf", 
            "Mode=HTTP", 
            LAST);

    web_url("AjaxFormChoiceComponentUpdatingBehavior-ver-1355500070000.js", 
            "URL={url}/something/wicket/resource/org.apache.wicket.ajax.form.AjaxFormChoiceComponentUpdatingBehavior/AjaxFormChoiceComponentUpdatingBehavior-ver-1355500070000.js", 
            "Resource=1", 
            "RecContentType=text/javascript", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?5", 
            "Snapshot=t48.inf", 
            LAST);

    web_concurrent_start(NULL);

    web_url("icon_ikke_ok.png", 
            "URL={url}/something/css/images/icon_ikke_ok.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?5", 
            "Snapshot=t49.inf", 
            LAST);

    web_url("icon_ok.png", 
            "URL={url}/something/css/images/icon_ok.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?5", 
            "Snapshot=t50.inf", 
            LAST);

    web_url("Prosessteg_vurdere_piceofshit.png", 
            "URL={url}/something/css/images/Prosessteg_vurdere_piceofshit.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?5", 
            "Snapshot=t51.inf", 
            LAST);

    web_url("icon_vurderes.png", 
            "URL={url}/something/css/images/icon_vurderes.png", 
            "Resource=1", 
            "RecContentType=image/png", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?5", 
            "Snapshot=t52.inf", 
            LAST);

    web_concurrent_end(NULL);

    lr_end_transaction("Neste Gettingready something",LR_AUTO);

    lr_think_time(5);

    lr_start_transaction("Velg Oppfyllt og trykk lagre");

    web_submit_data("vurderepiceofshit_2", 
            "Action={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?3-1.IBehaviorListener.0-vurderePiceofshitListe-vurderePiceofshitRepeater-4-vurderePiceofshitListItem-piceofshitHoved-innerPanel-piceofshitDetaljer-piceofshitForm-piceofshitsregelValg", 
            "Method=POST", 
            "RecContentType=text/xml", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?5", 
            "Snapshot=t53.inf", 
            "Mode=HTTP", 
            ITEMDATA, 
            "Name=piceofshitsregelValg", "Value=OPPFYLT", ENDITEM, 
            LAST);

    web_submit_data("vurderepiceofshit_3", 
            "Action={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?4-1.IFormSubmitListener-vurderePiceofshitListe-vurderePiceofshitRepeater-4-vurderePiceofshitListItem-piceofshitHoved-innerPanel-piceofshitDetaljer-piceofshitForm", 
            "Method=POST", 
            "RecContentType=text/html", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?5", 
            "Snapshot=t54.inf", 
            "Mode=HTTP", 
            ITEMDATA, 
            "Name=piceofshitForm33_hf_0", "Value=", ENDITEM, 
            "Name=piceofshitsregelValg", "Value=OPPFYLT", ENDITEM, 
            LAST);

    lr_end_transaction("Velg Oppfyllt og trykk lagre",LR_AUTO);

    lr_think_time(5);

    lr_start_transaction("Velg neste etter Oppfyllt Uttak av pensjon");

    web_url("Neste", 
            "URL={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?7-1.ILinkListener-neste", 
            "Resource=0", 
            "RecContentType=text/html", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/vurderepiceofshit?7", 
            "Snapshot=t55.inf", 
            "Mode=HTTP", 
            LAST);

    lr_end_transaction("Velg neste etter Oppfyllt Uttak av pensjon",LR_AUTO);

    lr_think_time(5);

    lr_start_transaction("Send til beslutning");

    web_url("Send til beslutning", 
            "URL={url}/something/someOtherThing/{someOtherThingsId}/forslagsomething?8-1.ILinkListener-neste", 
            "Resource=0", 
            "RecContentType=text/html", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/forslagsomething?8", 
            "Snapshot=t56.inf", 
            "Mode=HTTP", 
            LAST);

    lr_end_transaction("Send til beslutning",LR_AUTO);

    lr_think_time(5);

    lr_start_transaction("Huk av for godkjent beslutning");

    web_submit_data("fattesomething", 
            "Action={url}/something/someOtherThing/{someOtherThingsId}/fattesomething?9-1.IBehaviorListener.0-tabbedPanel-content-panels-0-panel-tableBody-kontrollpunkter-0-kontrollpunkt-beslutningForm-valgtBeslutning", 
            "Method=POST", 
            "RecContentType=text/xml", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/fattesomething?9", 
            "Snapshot=t57.inf", 
            "Mode=HTTP", 
            ITEMDATA, 
            "Name=valgtBeslutning", "Value=0", ENDITEM, 
            LAST);

    lr_end_transaction("Huk av for godkjent beslutning",LR_AUTO);

    lr_think_time(5);

    lr_start_transaction("Godkjenn og iverksett");

    web_url("fattesomething_2", 
            "URL={url}/something/someOtherThing/{someOtherThingsId}/fattesomething?9-1.ILinkListener-godkjenn", 
            "Resource=0", 
            "RecContentType=text/html", 
            "Referer={url}/something/someOtherThing/{someOtherThingsId}/fattesomething?9", 
            "Snapshot=t58.inf", 
            "Mode=HTTP", 
            LAST);

    web_url("thatsallfolks.jpg", 
            "URL={url}/something/css/images/thatsallfolks.jpg", 
            "Resource=1", 
            "RecContentType=image/jpeg", 
            "Referer={url}/something/wicket/bookmarkable/no.nav.something.web.pages.terminus.TerminusPage?someOtherThingId={someOtherThingsId}", 
            "Snapshot=t59.inf", 
            LAST);

    lr_end_transaction("Godkjenn og iverksett",LR_AUTO);

    return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:23:35.240

web_reg_find() 上下文是下一个调用。在 HTML 模式下，调用包括子调用。您需要非常小心地在 URL 模式下放置 web_reg_*() 调用，以确保您拥有正确的上下文。是的，web_reg_find() 每次都会成功执行，即使它没有找到值。您将需要手动检查您的代码，以了解在调用中找到了多少文本实例。

当您提出更大的问题时，脚本是否会导致错误。一般来说，是的，它可以。如果您以超出预期用途的规范方式执行接口，则生成错误错误的可能性很高。一些常见的原因是什么，对多个用户使用相同的登录凭据，所有用户在生产中都是不同的，用户对同一组数据进行操作导致锁定和阻塞问题，在生产中每个数据集都是不同的没有思考时间或迭代时间（本质上是爆破界面）等......

If you exercise the interface in question in an in-spec manner, the same way in which a user will be exercising the interface, and you find errors then the errors are directly related to the code in use on the server. I would recommend leveraging any number of commercial or open source JVM diagnostic utilities to see where the resources are being consumed and pass that information back to the developers.

# python - Python索引最小值列表列表

> ID：15007807
> 
> 赞同：-1
> 
> 时间：2013-02-21T16:49:38.597
> 
> 标签：python, list, min, nonetype, type-2-dimension

我在 Python 中有一个 2D 列表列表，我需要在第 1 列中找到最低的浮点数，然后在同一行但在第 0 列返回值。

```
mylist =  [['someid-1', None] ,['someid-2', 4545.474] ,['someid-3', 200.1515] ,['someid-4', None] ,['someid-4', 0]] 
```

在这种情况下，我想返回：someid-3

目前我**只附加****不是** 的值，`None`然后这样做：（对于这样一个“简单”的任务来说这似乎很复杂）

```
 mylist.sort(key=lambda x: x[1])
    if len(temp_op_distance_list) != 0 and temp_op_distance_list[0][1] != None:
        return temp_op_distance_list[0][0] 
```

有关整个 Python 项目的一些信息。

*该列表大约有 8000 个条目，其值为 'None' 和 some `floats`。此代码收集到 3D 空间中 Mousepointer 的距离并测试 Programm 中的所有 3D 对象。当有值时`None`，对象没有被击中。*

**编辑**：正确的列表格式-当然你们都是对的，指出我的列表不正确。对于那个很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:59:25.480

假设您的列表是正确的 Python 列表

```
mylist =  [['someid-1', None] ,['someid-2', 4545.474] ,['someid-3', 200.1515] ,['someid-4', None] ,['someid-4', 0]] 
```

您可以简单地创建一个生成器表达式，仅选择有效的非零项并确定`min`使用键为`itemgetter(1)`

```
>>> from operator import itemgetter
>>> min((e for e in mylist if e[1]), key = itemgetter(1))[0]
'someid-3' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:52:22.720

结合[过滤](http://docs.python.org/2/library/functions.html#filter)[`min()`](http://docs.python.org/2/library/functions.html#min)：_

```
from operator import itemgetter

id = min(filter(itemgetter(1), mylist), key=itemgetter(1))[0] 
```

*   `filter(itemgetter(1), mylist)`删除第二个元素为假的所有元素；`False`在布尔上下文中。这包括`0`和`None`。

*   `min(..., key=itemgetter(1))`根据您给它的键找到最小值；所以过滤后具有最低浮点值的列表。

*   `[0]`从您的列表中选择 id 条目。

一个快速演示（带有语法正确的输入列表）：

```
>>> mylist = [
...     ['someid-1', None], 
...     ['someid-2', 4545.474], 
...     ['someid-3', 200.1515], 
...     ['someid-4', None], 
...     ['someid-5', 0]
... ]
>>> from operator import itemgetter
>>> min(filter(itemgetter(1), mylist), key=itemgetter(1))[0]
'someid3' 
```

# java - 在移动到下一条语句之前，如何等待使用 Runtime.exec 或 ProcessBuilder.start 执行的批处理文件处理结束？

> ID：15007809
> 
> 赞同：0
> 
> 时间：2013-02-21T16:49:40.903
> 
> 标签：java, runtime.exec, processbuilder

我为一个项目编写了一个小应用程序..它将执行以下任务：

1.  写入 commands.bat 文件。这个 bat 文件有一些源代码服务器命令，需要一些时间来处理。
2.  使用 ProcessBuilder 执行 commands.bat 并使用 redirectOutput(File file) 方法获取 outputfile.txt。
3.  读取 outputfile.txt 并获得所需的输出。

当我运行这个应用程序时，程序控制从第 1 步开始并完全执行。在步骤 2 中，控件启动一个驱动批处理文件的进程。现在 commands.bat 文件需要一些时间才能完成（取决于源代码服务器的响应）。有时这个批处理花费的时间比合理的时间多一点，控件没有等待并开始执行第 3 步，这样我就没有在 outfile.txt 中获得完整的流。我还使用了类似的东西：

*   waitfor()：即使使用此控件也不等待进程结束（技术上我可能错了）
*   线程.sleep()。这不起作用，因为批处理文件处理所花费的时间不确定。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:37:20.787

这就是我等待批处理文件执行的方式。希望你现在已经解决了这个问题。但是，它可能会帮助其他看到这个问题的人

`// Any command you want to run in my case im executing a batch file`
`String cmd = "load_execute.bat";`
`//FILE_PATH is the directory where to starting from`

```
 ProcessBuilder builder = new ProcessBuilder("cmd.exe", "/c", cmd).redirectErrorStream(true);
        builder.directory(new File(FILE_PATH));
        Process process = builder.start();

        //Redirect stream from cmd stream to local print stream
        BufferedReader input = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String line;
        while ((line = input.readLine()) != null) {
            System.out.println(line);
        }
        input.close();
        res = process.waitFor();` 
```

# magento - 如何在类中查找可编辑属性的列表 - Magento

> ID：15007810
> 
> 赞同：2
> 
> 时间：2013-02-21T16:49:41.030
> 
> 标签：magento, magento-1.7

创建产品时，我可以通过 API 使用以下内容：

```
$newProductData = array(
                'name'              => (string)$stockItem->STOCK_DESC,
                'websites'          => array(1,2), // array(1,2,3,...)
                'short_description' => (string)$stockItem->STOCK_DESC,
                'description'       => (string)$stockItem->LONG_DESC,
                'status'            => 1,
                'weight'            => $stockItem->WEIGHT,
                'tax_class_id'      => 1,
                'categories'        => array(3108),
                'price'             => $stockItem->SELL_PRICE
            );

            $my_set_id = 9;  // Use whatever set_id you want here
            $type = 'simple';

            $mc = new Mage_Catalog_Model_Product_Api();
            $mc->create($type, $my_set_id, $stockItem->STOCK_CODE, $newProductData); 
```

当我查看`$mc->create`电话时，我发现它是这样做的：

```
foreach ($product->getTypeInstance(true)->getEditableAttributes($product) as $attribute) {
} 
```

这表明存在可以针对对象进行编辑的属性列表。

我如何找到这些？是否有特定的位置可以找到此信息？

**编辑**：我刚刚做了：

```
Mage::log($product->getTypeInstance(true)->getEditableAttributes($product)); 
```

并查看了结果。似乎所有可编辑的属性都可以在下面找到，`[attribute_code] =>`但我仍然想要一种更好的方法来了解在哪里获取此列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:25:22.173

这将完全取决于您尝试编辑的产品的属性集，以及每个单独属性的配置。UI 中没有任何地方可以为您列出这些属性。您最好的选择是为您的产品运行一些自定义代码

```
$product = Mage::getModel('catalog/product')->load($product_id);
foreach ($product->getTypeInstance(true)->getEditableAttributes($product) as $code=>$attribute)    
{
    var_dump($code); 
} 
```

以下是如何追踪这些信息。如果你跳转到`getEditableAttributes`方法

```
#File: app/code/core/Mage/Catalog/Model/Product/Type/Abstract.php
public function getEditableAttributes($product = null)
{
    $cacheKey = '_cache_editable_attributes';
    if (!$this->getProduct($product)->hasData($cacheKey)) {
        $editableAttributes = array();
        foreach ($this->getSetAttributes($product) as $attributeCode => $attribute) {
            if (!is_array($attribute->getApplyTo())
                || count($attribute->getApplyTo())==0
                || in_array($this->getProduct($product)->getTypeId(), $attribute->getApplyTo())) {
                $editableAttributes[$attributeCode] = $attribute;
            }
        }
        $this->getProduct($product)->setData($cacheKey, $editableAttributes);
    }
    return $this->getProduct($product)->getData($cacheKey);
} 
```

您可以看到此方法获取特定产品上所有属性集的列表。（即作为产品属性集成员的所有属性）。一旦有了这个列表，它就会遍历每一个并检查其`apply_to`属性是否与当前产品的类型 id 匹配。

应用到属性设置为

```
Catalog -> Attributes -> Manage Attributes -> [Pick Attribute] 
```

![在此处输入图像描述](../Images/aeae50b189a7852eaa64876a4afc7288.png)

此表单域更新数据库表`catalog_eav_attribute`。如果您运行以下查询，您可以看到存储的此值的示例

```
select attribute_id, apply_to from catalog_eav_attribute where apply_to is NOT NULL;
75  simple,configurable,virtual,bundle,downloadable
76  simple,configurable,virtual,bundle,downloadable
77  simple,configurable,virtual,bundle,downloadable
78  simple,configurable,virtual,bundle,downloadable
79  virtual,downloadable 
```

因此，获取您产品的属性集。获取该集合中的属性列表。比较属性`apply_to`字段的值与产品的值`type_id`。这将让您构建这些属性的列表。

# jenkins - 插件更新后的詹金斯严重错误

> ID：15007811
> 
> 赞同：7
> 
> 时间：2013-02-21T16:49:42.530
> 
> 标签：jenkins, jenkins-plugins

我试图更新我的几个 jenkins 插件（不记得是哪个）但挂了。大约 15 分钟后，我决定重新启动 jenkins 服务器。这是我在詹金斯 UI 上得到的：

```
org.jvnet.hudson.reactor.ReactorException: java.lang.Error: java.lang.reflect.InvocationTargetException
    at org.jvnet.hudson.reactor.Reactor.execute(Reactor.java:246)
    at jenkins.InitReactorRunner.run(InitReactorRunner.java:43)
    at jenkins.model.Jenkins.executeReactor(Jenkins.java:894)
    at jenkins.model.Jenkins.<init>(Jenkins.java:796)
    at hudson.model.Hudson.<init>(Hudson.java:81)
    at hudson.model.Hudson.<init>(Hudson.java:77)
    at hudson.WebAppMain$2.run(WebAppMain.java:214)
Caused by: java.lang.Error: java.lang.reflect.InvocationTargetException
    at hudson.init.InitializerFinder.invoke(InitializerFinder.java:124)
    at hudson.init.InitializerFinder$TaskImpl.run(InitializerFinder.java:184)
    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:259)
    at jenkins.model.Jenkins$7.runTask(Jenkins.java:883)
    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:187)
    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:94)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at hudson.init.InitializerFinder.invoke(InitializerFinder.java:120)
    ... 8 more
Caused by: java.lang.NoClassDefFoundError: hudson/PluginManager$PluginUpdateMonitor
    at hudson.maven.PluginImpl.init(PluginImpl.java:54)
    ... 13 more
Caused by: java.lang.ClassNotFoundException: hudson.PluginManager$PluginUpdateMonitor
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 14 more 
```

我试图将战争从 1.486 更新到 1.502，但行为没有改变。我该怎么做才能让 Jenkins 再次运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T16:54:56.870

这是一个[已知的错误](https://issues.jenkins-ci.org/browse/JENKINS-15892)。

复制/粘贴以供参考：

> 在干净的主目录上启动 1.490，然后要求将 Maven 插件升级到版本 1.491，然后重新启动。重启后，Maven 插件出现链接错误，这是可以预见的（因为它使用的是 1.491+ 核心 API）；但是所有 Jenkins 都无法启动，因此无法使用 GUI 来退出更新。**（解决方法：删除 $JENKINS_HOME/plugins/maven-plugin.jpi.pinned。）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T10:15:26.287

对我不起作用，所以我只是删除了每个 $JENKINS_HOME/plugins/maven-plugin* 文件。

完毕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T20:13:21.883

尝试更新插件并删除\同时取消固定某些插件时出现相同的错误。

最后能够通过删除插件文件夹中的所有“禁用”文件，恢复所有 Maven 文件（如果根据先前解决方案的建议删除），重新启动 Jenkins 实例来解决问题。

理解这是因为与插件加载冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-25T05:03:49.183

上述方法都不适合我。

1.  解决方法：删除`$JENKINS_HOME/plugins/maven-plugin.jpi.pinned`
2.  删除文件夹中所有“ `DISABLED`”文件`Plugins`，恢复所有`Maven`文件

根据[https://issues.jenkins-ci.org/browse/JENKINS-43446](https://issues.jenkins-ci.org/browse/JENKINS-43446)：

> 我将我的 Maven 降级到 3.3.9 版，它对我有用。

# c# - 搜索字符串数组是否包含数组 if char's

> ID：15007812
> 
> 赞同：0
> 
> 时间：2013-02-21T16:49:46.600
> 
> 标签：c#, string, algorithm, full-text-search, text-files

目前正在摆弄我正在做的一个小项目，这是一个倒计时类型的游戏（电视节目）。目前，该程序允许用户选择最多 9 个字母的元音或辅音，然后要求他们使用这 9 个字母输入他们能想到的最长单词。

我有一个大文本文件充当字典，我使用用户输入的字符串搜索它以尝试匹配结果以检查他们输入的单词是否是有效单词。我的问题是，我想在字典中搜索由九个字母组成的最长单词，但我似乎无法找到实现它的方法。

到目前为止，我已经尝试将每个单词放入一个数组并搜索每个元素以检查它是否包含字母，但如果可以从 9 个字母中组成的最长单词是 8 个字母的单词，这不会涵盖我。有任何想法吗？目前我有这个（这是在表单上的提交按钮下，很抱歉没有提供代码或提到它是一个 Windows 表单应用程序）：

```
StreamReader textFile = new StreamReader("C:/Eclipse/Personal Projects/Local_Projects/Projects/CountDown/WindowsFormsApplication1/wordlist.txt");
int counter1 = 0;
String letterlist = (txtLetter1.Text + txtLetter2.Text + txtLetter3.Text + txtLetter4.Text + txtLetter5.Text + txtLetter6.Text + txtLetter7.Text + txtLetter8.Text + txtLetter9.Text); // stores the letters into a string
char[] letters = letterlist.ToCharArray(); // reads the letters into a char array
string[] line = File.ReadAllLines("C:/Eclipse/Personal Projects/Local_Projects/Projects/CountDown/WindowsFormsApplication1/wordlist.txt"); // reads every line in the word file into a string array (there is a new word on everyline, and theres 144k words, i assume this will be a big performance hit but i've never done anything like this before so im not sure ?)

line.Any(x => line.Contains(x)); // just playing with linq, i've no idea what im doing though as i've never used before
for (int i = 0; i < line.Length; i++)// a loop that loops for every word in the  string array
//  if (line.Contains(letters)) //checks if a word contains the letters in the char array(this is where it gets hazy if i went this way, i'd planned on only using words witha  letter length > 4, adding any words found to another text file and either finding the longest word then in this text file or keeping a running longest word i.e.  while looping i find a word with 7 letters, this is now the longest word, i then go to the next word and it has 8 of our letters, i now set the longest word to this)

counter1++;
if (counter1 > 4) 
```

txtLongest.Text += line + Environment.NewLine;

迈克的代码：

```
using System; 
```

使用 System.Collections.Generic；使用 System.Linq；

课堂节目

```
static void Main(string[] args) {
    var letters = args[0];

    var wordList = new List<string> { "abcbca", "bca", "def" }; // dictionary

    var results = from string word in wordList // makes every word in dictionary into a seperate string
                  where IsValidAnswer(word, letters) // calls isvalid method
                  orderby word.Length descending // sorts the word with most letters to top
                  select word; // selects that word

    foreach (var result in results) {
        Console.WriteLine(result);    //  outputs the word
    }
}

private static bool IsValidAnswer(string word, string letters) {
    foreach (var letter in word) {
        if (letters.IndexOf(letter) == -1) { // checks if theres letters in the word
            return false;
        }

        letters = letters.Remove(letters.IndexOf(letter), 1);
    }

    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:14:38.620

这是我在几分钟内敲定的答案，应该可以满足您的要求。正如其他人所说，这个问题很复杂，所以算法会很慢。LINQ 查询评估字典中的每个字符串，检查提供的字母是否可用于生成所述单词。

```
using System;
using System.Collections.Generic;
using System.Linq;

class Program
{
    static void Main(string[] args) {
        var letters = args[0];

        var wordList = new List<string> { "abcbca", "bca", "def" };

        var results = from string word in wordList
                      where IsValidAnswer(word, letters)
                      orderby word.Length descending
                      select word;

        foreach (var result in results) {
            Console.WriteLine(result);    
        }
    }

    private static bool IsValidAnswer(string word, string letters) {
        foreach (var letter in word) {
            if (letters.IndexOf(letter) == -1) {
                return false;
            }

            letters = letters.Remove(letters.IndexOf(letter), 1);
        }

        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T02:14:56.690

第 1 步：构建每个单词按字母排序的 trie 结构。

示例：EACH 排序为 ACEH 在 trie 中存储为 A->C->E->H->(EACH, ACHE, ..) （ACHE 是 EACH 的变位词）。

步骤2：对输入的字母进行排序，在trie中找到与该组字母对应的最长单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T00:08:43.317

我对此有了更多的想法。我认为有效地做到这一点的方法是通过预处理字典，按字母顺序对每个单词中的字母进行排序，并按字母顺序对列表中的单词进行排序（您可能必须使用某种多映射结构来存储原始单词和排序后的词）。

完成此操作后，您可以更有效地找到可以从字母池中生成的单词。如果其他人没有击败我，我稍后会回来充实执行此操作的算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:55:40.353

那么你在哪里卡住了？从缓慢的蛮力方法开始，只需找到包含所有字符的所有单词。然后按长度排序单词以获得最长的单词。如果您不想返回一个比要查找的字符数短的单词（我猜只有在存在重复字符时才会出现问题？？？），然后添加一个测试并消除这种情况。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-21T16:55:25.717

您是否尝试过实施这样的事情？很高兴看到您尝试过的代码。

```
string[] strArray = {"ABCDEFG", "HIJKLMNOP"};
string findThisString = "JKL";
int strNumber;
int strIndex = 0;
for (strNumber = 0; strNumber < strArray.Length; strNumber++)
{
    strIndex = strArray[strNumber].IndexOf(findThisString);
    if (strIndex >= 0)
        break;
}
System.Console.WriteLine("String number: {0}\nString index: {1}",
    strNumber, strIndex); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T17:10:12.383

这必须完成工作：

```
private static void Main()
{
    char[] picked_char = {'r', 'a', 'j'};
    string[] dictionary = new[] {"rajan", "rajm", "rajnujaman", "rahim", "ranjan"};
    var words = dictionary.Where(word => picked_char.All(word.Contains)).OrderByDescending(word => word.Length);

    foreach (string needed_words in words)
    {
        Console.WriteLine(needed_words);
    }
} 
```

输出 ：

* * *

`rajnujaman`
`ranjan`
`rajan`
`rajm`

# ios - 如何从容器/父视图控制器和多个子视图控制器共享数据数组

> ID：15007813
> 
> 赞同：2
> 
> 时间：2013-02-21T16:49:47.440
> 
> 标签：ios, objective-c, uiviewcontroller

我有一个场景，其中有一个父容器视图控制器，其子视图占据了大部分屏幕。该子视图用于交换相同数据的 3 个不同视图（地图、表格和图库）。有一个分段控件，用于选择用户想要查看的数据视图。我在父容器视图控制器中有一个我的模型类型的数组集合，我想让这 3 个不同的子视图控制器分别在各自的视图中显示这些数据。是否有任何干净的方法可以做到这一点而不必复制数据 4 次（一次在父项中，3 次在子项中）？我假设我将不得不复制数据，因为孩子不应该能够调用父视图控制器来访问它的数组。这也不是一个合适的继承情况，因为父级更像是一个容器而不是相同类型的视图控制器。这也不是委托的情况，因为孩子不需要通知父母任何事情，反之亦然。

任何建议都非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:27:38.563

我将创建一个类（下面的 MyDataController）来管理数据，并使用共享实例从我的应用程序中的任何位置访问它。

接口（MyDataController.h）

```
@interface MyDataController : NSObject {
   NSMutableArray *myData; // this would be the collection that you need to share
}
+ (MyDataController*)sharedDataController;
// ... add functions here to read / write your data
@end 
```

实现（MyDataController.m）

```
static MyDataController* sharedDataController; // this will be unique and contain your data

@implementation MyDataController

+ (MyDataController*)sharedDataController
{
    if (!sharedDataController)
        sharedDataController = [[[MyDataController alloc] init] autorelease]; // no autorelease if ARC
    return sharedDataController;
}

// ... implement your functions to read/write data
@end 
```

最后，从任何地方访问这个静态对象：

```
MyDataController *dataController = [MyDataController sharedDataController]; // this will create or return the existing controller; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:27:39.767

您可以将数据放在单例类中，然后让您的每个子视图控制器从单例中获取数据。

# jquery - Fancybox 幻灯片仅可使用一次

> ID：15007825
> 
> 赞同：3
> 
> 时间：2013-02-21T16:50:21.680
> 
> 标签：jquery, fancybox, fancybox-2

我的 Fancybox 幻灯片只运行一次并停止。据我所知，它没有循环回来，因为我不知道是什么东西坏了。如果你去他们的页面“扩展功能”并尝试一下，你会发现它在那里也不起作用..或者至少对我来说。

```
<!-- Add Fancybox library -->
<script type="text/javascript" src="http://www.Website.com/+Fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="/+Fancybox/jquery.fancybox.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.Website.com/+Fancybox/jquery.fancybox.css" media="screen" />
<link rel="stylesheet" type="text/css" href="http://www.Website.com/+Fancybox/helpers/jquery.fancybox-buttons.css" />
<script type="text/javascript" src="http://www.Website.com/+Fancybox/helpers/jquery.fancybox-buttons.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.Website.com/+Fancybox/helpers/jquery.fancybox-thumbs.css" />
<script type="text/javascript" src="http://www.Website.com/+Fancybox/helpers/jquery.fancybox-thumbs.js"></script>
<script type="text/javascript" src="http://www.Website.com/+Fancybox/helpers/jquery.fancybox-media.js"></script>

<!-- Fancybox Properties -->
<script>
$(document).ready(function() {

    $.noConflict();

        $('.fancybox').fancybox({
        padding     :  0,
        prevEffect  : 'fade',
        nextEffect  : 'fade',
        openEffect  : 'elastic',
        closeEffect : 'elastic',
        autoPlay    : 'true',
        mouseWheel  : 'true',
        helpers     : {
            buttons : {},
            title   : {
                    type: 'outside'
            }
        }
    });
});
</script> 
```

响应式 Fancybox： http: [//www.fancyapps.com/fancybox/](http://www.fancyapps.com/fancybox/)

谷歌浏览器：v24.0.1312.57

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:28:25.513

如果使用 jQuery 1.9.x，我可以确认存在错误

Fancybox v2.1.3 使用 jQuery 1.9.x 被破坏，你可以[在这里看到](https://stackoverflow.com/q/14344289/1055987)。然后发布了 v2.1.4 以使其与 jQuery v1.9.x 一起使用，但在我看来，`buttons`helpers js 文件也必须进行修补。

作为一种解决方法，您可以回滚到 jQuery v1.8.3。

查看使用 jQuery 1.8.3的**[工作 JSFIDDLE 。](http://jsfiddle.net/bpgP3/)**

使用 jQuery 1.9.1查看**[损坏的 JSFIDDLE 。](http://jsfiddle.net/PpdXT/)**

PS。我确实在**[github上打开了一个问题](https://github.com/fancyapps/fancyBox/issues/532)**

****更新：**

该问题已在**[上次提交](https://github.com/fancyapps/fancyBox/commit/6208e1213bec87cdb6b13b134a3fd3d425802c24)**中修复（但未在 fancyapps 主页示例中更新，但可下载文件也未更新）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:55:59.260

我不知道这是否会导致你的问题，但如果你设置`jQuery.noConflict();`你必须使用`jQuery`而不是`$`这样：`jQuery('.fancybox').fancybox({...`

# aptana3 - Aptana Studio 3 的更新程序不起作用（win 7）

> ID：15007829
> 
> 赞同：0
> 
> 时间：2013-02-21T16:50:31.430
> 
> 标签：aptana3

我的 Aptana Studio 3 Updater 仅显示此消息（据我所知，它正确获取更新（从 3.2.2 到 3.3.1 ...））：

> 访问权限不足，无法应用此更新。

我的系统是标准的 Windows 7 系统 - 我是否必须更改文件夹的任何访问权限才能成功完成更新？

非常感谢！

# android - xml 在设备上不起作用

> ID：15007835
> 
> 赞同：1
> 
> 时间：2013-02-21T16:50:37.403
> 
> 标签：android, xml

在我的 Nexus 4 上，我的应用看起来像[这样](http://i.imgur.com/j1jDKeC.png)。该应用程序在 Eclipse WYSIWYG 屏幕上看起来非常正常。这个xml文件是：（因为原件很长，我已经删除了所有的文本视图和按钮，因为我认为这与问题无关）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="100"
android:background="@drawable/testbg">

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="33"
    android:orientation="vertical" >

    ---- bunch of textviews ---

</RelativeLayout>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="57"
    android:orientation="vertical" >

    ---- more TextViews ----

</RelativeLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="10"
    android:orientation="horizontal"
    android:weightSum="3" >

    ---- 3 buttons ----       

    </LinearLayout>

</LinearLayout> 
```

为什么会这样？xml只是损坏了吗？

# matlab - Matlab绘图功能

> ID：15007842
> 
> 赞同：2
> 
> 时间：2013-02-21T16:50:49.903
> 
> 标签：matlab, plot

我正在尝试使用 Matlab 中的绘图做一些相对简单的事情，但它不起作用。在概念上，这个想法很简单。作为一个简单的例子，我试过这个，

```
x = [1 2 3 4 5];
y = [1 2 3 4 5];

TColor1 = 'b';
TLine1 = '-';
plot(x,y,TLine1,TColor1) 
```

我想使用预定义的字符串来更改绘图的属性。颜色字符串正常工作，但线字符串不起作用。我不明白代码的问题。

我需要这个功能的原因是我有很大的代码，我在几个“for”循环中输出大量的图。我需要能够在“for”循环之外更改绘图属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:52:31.060

只需使用

```
plot(x,y, [TLine1,TColor1]) 
```

（注意方括号。）

# encryption - web.config中episerver标签的加密

> ID：15007844
> 
> 赞同：0
> 
> 时间：2013-02-21T16:51:03.430
> 
> 标签：encryption, msbuild, episerver

我正在使用和为公共`EPiServer`站点的构建过程添加加密。大多数情况下，它进展顺利，但在 web.config 中加密标签时却不行。`MSBuild``aspnet_regiis``episerver`

命令：

```
aspnet_regiis -pef "episerver" "C:\Path\to\my\site" -prov "RsaProvider" 
```

在我的开发机器（安装了 EPiServer）上它运行没有问题，但是在我的构建机器（没有安装它）上，我得到了这个：

```
Could not load file or assembly 'EPiServer.Configuration, Version=6.1.379.0, Culture=neutral, PublicKeyToken=8fe83dea738b45b7' or one of its dependencies. The system cannot find the file specified. 
```

其他标签，例如`connectionStrings`在构建服务器上得到正确加密，因此所有密钥和访问权限都已到位。

我的猜测是这是由于构建服务器上没有安装 EPiServer，但是真的有必要安装 EPiServer 才能加密 web.config 吗？我认为加密只会读取 web.config 并加密所选标签中的文本？

任何关于如何让我的构建服务器加密`episerver`web.config 中的标签的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:57:44.673

当您安装 EPiServer 时，它会在 GAC 中添加许多 dll，这就是它在您的本地机器上而不是在构建机器上工作的原因。

web.config 中的部分是在 EPiServer.Configuration.dll 中定义的自定义配置部分（在此处阅读有关它们的更多信息（[如何：使用 ConfigurationSection 创建自定义配置部分](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)）。您可以将其添加为对项目的引用（设置将本地复制为true)，或者您可以简单地在构建机器上安装EPiServer。我已经完成了后者，因为无论您是否将它们添加到您的项目中，构建机器都不会阻塞任何EPiServer dll。

# moodle - 在 Moodle 网站首页显示最新消息和即将发生的事件

> ID：15007847
> 
> 赞同：0
> 
> 时间：2013-02-21T16:51:11.463
> 
> 标签：moodle

我是moodle的新手，我正在努力为moodle网站开发一个主题。我必须在首页上显示三个相邻的框。一个框将显示即将发生的事件，另一个将显示最新消息。我注意到最新消息和即将发生的事件的框在内页中正确显示，但我不知道如何在首页上显示这些框。我正在使用moodle 2.3.3。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:01:31.203

您可以使用 Moodle 的 HTML 编辑器将您的代码添加到首页的“摘要”中。

如果您对 php 和 html 感到满意，您应该将您的框从您的 Moodle 主题 (/theme/*your_current_theme*/layout/frontpage.php) 直接添加到 frontpage.php。

编辑你的frontpage.php，它可能看起来像这样：

```
<!-- start of moodle content -->
        <div id="page-content">
            <div id="region-main-box">
                <div id="region-post-box">

                    <!-- main mandatory content of the moodle page  -->
                    <div id="region-main-wrap">
                        <div id="region-main">
                            <div class="region-content">
                                <?php echo $OUTPUT->main_content() ?>

                                HERE IS THE PLACE TO ADD BOXES.

                            </div>
                        </div>
                    </div>
                    <!-- end of main mandatory content of the moodle page --> 
```

# asp.net - 获取对象引用必须设置为通用处理程序中的对象实例

> ID：15007848
> 
> 赞同：-2
> 
> 时间：2013-02-21T16:51:13.833
> 
> 标签：asp.net, sql

我正在尝试从我的 sql 数据库中读取一些图像数据，我正在编写它；我需要做的就是让它阅读。但是我收到了第 18 行问题中所述的错误？有人能帮帮我吗？

这是代码：

[http://codepad.org/d3Yd702T](http://codepad.org/d3Yd702T)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:53:50.707

`RevisionConnectionString`您的 web.config 文件中是否有一个连接字符串？

在您的 web.config 文件中，在部分中添加以下`<configuration>`内容：

```
<connectionStrings>
    <add name="RevisionConnectionString" connectionString="whatever it should be for you;" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:02:50.300

属性`ConfigurationManager.ConnectionStrings`获取`ConnectionStringsSection`当前应用程序默认配置的数据。

一个`ConnectionStringsSection`对象包含配置文件的 connectionStrings 部分的内容。

并且配置文件是您的`web.config`，这意味着在其中您应该有部分将 conn 字符串声明为与数据源的关系。

所以，首先检查是否有连接字符串，如果有，检查名称是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:55:46.733

第 18 行显示了这一点：

```
string strConnection = ConfigurationManager.ConnectionStrings["RevisionConnectionString"].ToString(); 
```

这只能意味着您没有带键的 ConnectionString`RevisionConnectionString`

# ios - 使用 UIAppearance API 自定义 UIBarButtonSystemItem 的色调颜色

> ID：15007853
> 
> 赞同：5
> 
> 时间：2013-02-21T16:51:41.380
> 
> 标签：ios, objective-c, uikit, uibarbuttonitem, uiappearance

我知道我可以`UIBarButtonItem`通过自定义文本

```
setTitleTextAttributes:forState: 
```

还有一种方法可以`UITabBar`通过以下方式自定义图标

```
setSelectedImageTintColor: 
```

有没有办法自定义 a 的色调颜色`UIBarButtonSystemItem`（例如垃圾桶图标颜色），只是为了获得一致的用户体验？我什么也找不到。

如果这不可能，我将如何进行？我应该保存图标的颜色修改版本吗？我在哪里可以找到它？修改它的最简单方法是什么？

**编辑**

为了澄清，这不是`UIBarButtonItem`我要求的背景颜色，而是图标轮廓的颜色。

**编辑**

设置 tint color`UIBarButtonItem`生成按钮集的背景颜色。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    [[UINavigationBar appearance] setTintColor:[UIColor greenColor]];

    UIBarButtonItem* trashButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemTrash target:nil action:nil];

    trashButton.tintColor = [UIColor blackColor];
    UIViewController* viewController = [[UIViewController alloc] init];
    UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:viewController];
    [viewController.navigationItem setRightBarButtonItem:trashButton];

    self.window.rootViewController = navController;
    return YES;
} 
```

产生[这个](https://www.dropbox.com/s/yis6z5j3wzamdmm/Untitled.png)。

**编辑 2**

事实证明，系统图标的轮廓颜色实际上可以通过`tintColor`的属性设置`UIBarButtonItem`，但前提是其`style`属性具有值`UIBarButtonItemStylePlain`。（即便如此，有些颜色是特殊的，并留下轮廓白色。其中一种颜色是`[UIColor blackColor]`）但是，`UIBarButtonItem`在 a中使用`UINavigationBar`the`style`是被迫的`UIBarButtonItemStyleBordered`。在这种情况下，`tintColor`设置按钮的背景颜色并将轮廓留白。

当我`UIBarButtonItem`在导航栏中使用 s 时，我的问题仍未解决。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T17:05:17.997

**注意**：以下仅适用于添加到工具栏的按钮，不适用于导航栏。

使用 的`tintColor`属性`UIBarButtonItem`。要么在特定实例上调用它，要么在`appearance`所有按钮项上调用它。

小心设置所有按钮项目的色调`appearance`。设置色调时，并非所有按钮项看起来都正确。

更新：

```
UIBarButtonItem *btnAdd = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addAction)];
btnAdd.tintColor = [UIColor blackColor]; 
```

这将使按钮的图标变黑（背景将是工具栏的色调）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T19:52:40.063

我通过在外部编辑器中更改条形按钮系统项 png 文件的颜色解决了我的问题，包括该图像到项目中并通过加载它

```
[[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"UIButtonBarTrashBlack"] style:UIBarButtonItemStyleBordered target:self action:@selector(myAction)]; 
```

我使用有用的[UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)找到了内部系统映像。

我使用免费软件[GIMP](http://gimp.lisanet.de/Website/Download.html)编辑了艺术品的颜色。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-15T01:39:09.153

而不是使用黑色，使用这个：

> [UIColor colorWithRed:0 green:0 blue:0 alpha:1]; // [UIColor blackColor] 使其变为白色

# sql-server-2008 - 如何制作架构图

> ID：15007856
> 
> 赞同：0
> 
> 时间：2013-02-21T16:51:57.703
> 
> 标签：sql-server-2008, database-schema

我有个问题。我想制作一个架构。以及表格的图表并显示它们之间的关系。我下载了 management studio 2008 和 sql sever 2008。我正在浏览帮助并遇到了这个：“要使用 SQL Server Management Studio 创建架构 在 SQL Server Management Studio 中，打开对象资源管理器并展开数据库文件夹。展开数据库在其中创建新的数据库架构。 **右键单击安全文件夹，指向新建，然后单击架构。** 在常规页面上，在架构名称框中输入新架构的名称。在架构所有者框中，输入拥有架构的数据库用户或角色的名称。单击“确定”。

"

但是没有架构选项，当我右键单击时：s 怎么办？请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:00:15.247

关于为什么您没有获得创建模式选项的一个选项是您转到服务器级别的安全文件夹，确保您首先展开数据库并转到其中的安全文件夹，那里应该出现创建新模式的选项。

无论如何，我相信您可能会感到困惑，因为您正在谈论具有表关系的图表。如果那是你真正想要的，你需要创建一个数据库图。为此，您应该展开要在其中创建该图表的数据库，右键单击“数据库图表”文件夹，然后选择“新建数据库图表”选项。

# c# - 贵忙弹出

> ID：15007859
> 
> 赞同：0
> 
> 时间：2013-02-21T16:52:11.013
> 
> 标签：c#

我有一个gui。当我按下按钮时，我的 gui 与软件交互。这需要几秒钟。在此期间，我想要一个对话框、弹出窗口或类似的东西出现在我的 gui 前面，告诉用户等待（带有一条消息）。当 gui 与软件的交互完成时，弹出窗口会自动关闭，用户可以再次正常与 gui 交互。

有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:53:50.483

诀窍是分离一个线程，以免占用 UI 线程。这通常是通过[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)实现的。

有一个在 codeplex 上设置所有这些的[演练。](http://www.codeproject.com/Articles/33885/Working-with-BackgroundWorker-Creating-Your-Own-Lo)后台工作程序完成后，加载表单关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:00:25.093

下面简要介绍如何使用 BackgroundWorker 组件来完成它。

将 BackgroundWorker 放到您的 Form 上，然后在按钮的 Click 处理程序中，在当前表单上方显示您的弹出指示符 Form，并使用其 RunWorkerAsync 方法启动您的 worker。处理工人 DoWork 事件，它的处理程序运行长时间运行的任务。还要处理工作人员的完成事件（现在不确定它是如何准确调用的），并在其中隐藏您的弹出表单。您可以在 DoWork 事件 eventargs（Result 属性）中跟踪操作结果，还可以使用已完成事件 eventarg 的 Error peroperty 捕获长时间运行的任务期间的任何异常。操作进度可以在 DoWork 处理程序中通过 worker 的 ReportProgress 方法进行报告，并且可以在 GUI 中通过 worker 的相应事件进行捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:56:51.100

您还可以将鼠标光标设置为在长时间运行之前等待

```
this.Cursor = Cursors.WaitCursor; 
```

然后恢复正常，然后就完成了

```
this.Cursor = Cursors.Default; 
```

# javascript - Angular.js：ng-repeat 中的双向绑定

> ID：15007860
> 
> 赞同：12
> 
> 时间：2013-02-21T16:52:15.293
> 
> 标签：javascript, angularjs

我正在开发一个 Angular 应用程序。

**我想生成一个带有任意数量的文本输入字段的表单，每个输入字段都有**双向绑定。没有按钮，没有观察者。`ng-model`由于范围界定（如果我没记错的话）无法正常工作。输入字段是从带有 ng-repeat 的数组生成的，如下所示：

```
 <div ng-repeat="item in items">
   <label>{{item.name}}</label>
   <input type="text" placeholder="{{item.default}}" ng-model="{{item.value}}"> <!-- this input should be bound -->
 </div> 
```

我只想要一个简单的绑定来`items`根据输入的变化更新控制器中的数组。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T17:12:06.557

只需更改输入标签，使其显示为：

```
<input type="text" placeholder="{{item.default}}" ng-model="item.value"> 
```

注意`ng-model`没有花括号。

工作 plunk：[http ://plnkr.co/edit/CLdem9yIw2Sk1U52Iajl?p=preview](http://plnkr.co/edit/CLdem9yIw2Sk1U52Iajl?p=preview)

# javascript - 按属性名称排列的 XML 结果数

> ID：15007864
> 
> 赞同：2
> 
> 时间：2013-02-21T16:52:19.833
> 
> 标签：javascript, jquery, xml

我正在使用以下 XML 文件

```
 <OnThisDate date="2013-02-22">
      <event jobnumber="14434" allocated="1" name="ADI UK ">
        <i1001 driverID="30" driverName="None None" groupname="i100"/>
        <i251 driverID="0" driverName="" groupname="i25"/>
        <i252 driverID="0" driverName="" groupname="i25"/>
      </event>

      <event jobnumber="14559" allocated="1" name="Travel">
        <i1006 driverID="46" driverName="Martin Macklin" groupname="i100"/>
      </event>

      <event jobnumber="14560" allocated="1" name="Travel">
        <i1005 driverID="0" driverName="" groupname="i100"/>
      </event>

      <event jobnumber="14690" allocated="1" name="Travel">
        <i253 driverID="0" driverName="" groupname="i25"/>
      </event>

      <event jobnumber="14695" allocated="1" name="Holiday">
        <i602 driverID="10" driverName="Alan Linney " groupname="i60"/>
      </event>

      <event jobnumber="13595" allocated="1" name="Sandown Park Racecourse">
        <i1002 driverID="6" driverName="Simon Latcham" groupname="i100"/>
      </event>

      <event jobnumber="14447" allocated="1" name="Sandown Racecourse">
        <i125 driverID="35" driverName="Carl Boxall" groupname="i12"/>
      </event>

      <event jobnumber="14030" allocated="1" name="Warwick Racecourse">
         <i601 driverID="5" driverName="Tom Robson" groupname="i60"/>
      </event>
     </OnThisDate> 
```

每个事件下的节点都有一个**groupname**属性，我想按 group name 获得总结果，所以在示例中 groupname i25 的总和为 3

我已经能够使用此代码获得事件子项的总和

```
var count=$(data).find('event').children().size();
console.log(count) 
```

但我不知道如何让它其余的工作

请问有什么帮助吗？， 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:01:53.210

要获取具有特定组名的所有元素的计数：

```
var groupname = "i25";
var count = $(data).find('*[groupname="' + groupname + '"]').length; 
```

[演示](http://jsfiddle.net/FW7ad/)

旁注：`.size()`自 jQuery 1.8 起已弃用。`.length`建议改用。

# python - Python with MongoEngine - 访问自定义模型属性列表

> ID：15007867
> 
> 赞同：1
> 
> 时间：2013-02-21T16:52:34.010
> 
> 标签：python, mongodb, inheritance, copy

在我拥有的一些 Python 模型类中寻找对自定义模型属性列表的轻松访问。我使用 MongoEngine 作为我的 ORM，但问题是一般继承和 OOP。

具体来说，我希望能够从我将在所有模型类中继承的 Mixin 类中的方法访问自定义模型属性。

考虑以下类结构：

```
class ModelMixin(object):
    def get_copy(self):
        """
        I'd like this to return a model object with only the custom fields
        copied.  For the City object below, it would run code equivalent to:

          city_copy = City()
          city_copy.name = self.name
          city_copy.state = self.state
          city_copy.popluation = self.population
          return city_copy

        """

class City(BaseModel, ModelMixin):
    name = orm_library.StringField()
    state = orm_library.StringField()
    population = orm_library.IntField() 
```

这将允许以下操作：

```
>>> new_york = City(name="New York", state="NY", population="13000000")
>>> new_york_copy = new_york.get_copy() 
```

但是，它必须适用于*任意*模型。不知何故，它必须确定在子类中定义了哪些自定义属性，实例化该子类的实例，并仅复制那些自定义属性，*而不复制父 BaseModel 类（具有大量随机里面的东西我不关心*。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:41:00.217

我认为您可以使用多种工具来实现这一目标（如果我下面的代码不能完全满足您的需求，您应该能够很容易地对其进行调整）。即：

*   该`__class__`属性将为您提供对象的类
*   该`vars()`函数将枚举对象（或类）的属性
*   和`setattr()`函数`getattr()`可以让您通过名称操作任意属性。
*   为了区分您感兴趣的类属性（在您的情况下，那些是 MonogEngine 字段），我检查模型属性本身的类类型；[快速浏览一下 MongoEngine 资源似乎表明您希望将其更改为“BaseField”](https://github.com/MongoEngine/mongoengine/blob/master/mongoengine/fields.py#L41)

* * *

```
class ModelMixin(object):
    def get_copy(self):

        # Get the class for the 

        C = self.__class__

        # make a new copy

        result = C()

        # iterate over all the class attributes of C
        # that are instances of BaseField

        for attr in [k for k,v in vars(C).items() if v.__class__ == BaseField]:
            setattr(result, attr, getattr(self, attr))

        return result 
```

测试上述内容（为 MongoEngine 模型/字段创建虚拟类）

```
class BaseField(object):
    pass

class BaseModel(object):
    baseField = BaseField()

class City(BaseModel, ModelMixin):
    x = BaseField()
    y = BaseField()

c = City()
c.x = 3
c.y = 4
c.baseField = 5

d = c.get_copy()
print d.x # prints '3'
print d.y # prints '4'
print d.baseField # correctly prints main.BaseField, because it's not set for d 
```

# git - git 中 CVS 风格的标签实现

> ID：15007868
> 
> 赞同：2
> 
> 时间：2013-02-21T16:52:36.583
> 
> 标签：git, tags

我遇到了一个奇怪的问题，我无法自己回答，尽管我已经使用 git 很长时间了。

`git`当单个文件被视为生产就绪时，流程需要标记单个文件。当其他文件也“准备好”时，它们也需要被“标记”。文件被首先标记可能会改变直到那一刻，但我们仍然需要能够一次检索所有“准备好的”文件。

如果可以在提交中标记单个文件，它会起作用，但事实并非如此。

你能给我任何线索，解决方法，我怎么能做到这一点：在几个提交中检索几个文件，通过单一标准链接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:00:43.547

出于这样的目的标记文件要求文件签入的分支不会更改，例如，如果分支上的某个版本被标记，然后分支是变基，那么标记仍将指向“旧”版本而不跟随到“新”分支。因此，对于“文件尚未交付”的情况，标记可能无法正常工作。

我认为更好的做法是创建一个特殊的`production_ready`分支，然后挑选您认为已准备好生产的更改到该分支上。这样，当实际“交付生产”发生时，您只需合并`production_ready`分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T11:06:30.587

按您的要求，

使用 git 进行软件开发。`git add .`执行向索引添加新更改并根据需要将它们提交到您的存储库的正常`git commit -m "commit message"`过程。

在一天结束的时候，你会想让鞋帮开心，并将你当前的所有工作都签入到另一个 CM 系统。问题是该系统要求您标记/标记每​​个文件而不是“一组”文件。您可以通过在签入后立即使用与相应 git 提交的 SHAID 哈希匹配的标签（可通过键入 访问`git log`）标记旧 CM 系统中的所有产品文件来处理此问题。

这允许您对一组与特定 git 提交相对应的文件进行一对一的记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T11:10:12.667

感谢 git 的灵活性，我们找到了答案！该解决方案有其自身的缺点，但它确实有效。

这个想法很简单。所有`production-ready`更改都将在单独的分支中进行跟踪，并且文件将不会通过与开发分支合并出现在那里，而是通过从中仅检出所需的文件。

尽管我们丢失了所有的前历史，但我们将获得如何一次性检索所有文件的`production-ready`简洁明了的方法。`production-ready`

在我们的辩护中，我可能会补充说，可以通过将提交消息添加到`pre-production`签出文件的提交的分支 id 中来解决这个历史问题。并且还可以通过扭曲简​​单的 git 命令来执行一系列需要的命令来简化该过程。

这些命令是：

```
git checkout pre-production 
```

切换到`pre-production`分支。

```
git checkout development file/name 
```

从`development`分支签出所需的文件。

```
git commit -m "Moving file/name to pre-production from commit id 5364afb23" 
```

提交并标记运动。

# xml - 创建具有适当样式的基于 XML 的语言

> ID：15007870
> 
> 赞同：0
> 
> 时间：2013-02-21T16:52:46.210
> 
> 标签：xml, xml-parsing

例如，查看 MathML 或 SVG。这些不仅仅是基于 XML 的语言，它们是基于 XML 的语言，您可以将它们直接嵌入到 HTML 文档中，并且可以完美呈现。您不需要名称空间或文档类型或 XSL 文档或样式表，或任何其他垃圾来使它们正常工作（至少在最新的 Firefox 中不需要）。

我很好奇，我如何制作自己的基于 XML 的语言，并且还可以直接嵌入到 HTML 文档中？我怎样才能让它完全按照我的意愿呈现，例如使用适当的样式，而不必将样式表嵌入到文档中？

我想知道如何让我的浏览器 firefox “了解”我自己创​​建的 xml 语言的正确样式方法和格式化方法（显然它只能在我自己的机器上正确呈现）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:45:40.197

答案是 XSLT。您可以编写在浏览器中运行的 XSLT 样式表来呈现 XML。现在所有的浏览器都支持 XSLT 1.0，我们 (Saxonica) 提供了 XSLT 2.0 的跨浏览器实现，称为 Saxon-CE，它即将成为开源。

# php - 使用控制器插件扩展 zend 框架中的现有布局

> ID：15007871
> 
> 赞同：0
> 
> 时间：2013-02-21T16:52:49.467
> 
> 标签：php, zend-framework, layout, extending

我有一个布局文件如下：

```
<?php echo $this->doctype(); ?>
<html>
    <head>
        <?php echo $this->headTitle(); ?>
        <?php echo $this->headLink(); ?>
    </head>
    <body>
        <?php echo $this->layout()->content; ?>
    </body>
</html> 
```

我有一个用另一个模板编写的菜单系统

```
<p>
    <div>
        menu code goes here
    </div>
    <p>
        <?php echo $this->actionContent; ?>
    </p>
</p> 
```

我希望动作方法的输出应该放在**$this->actionContent**中，所有这些都应该放在布局中。

然后我写了一个Controller插件如下：

```
class ZFExt_Controller_Plugin_Addmenu extends Zend_Controller_Plugin_Abstract 
{
    public function postDispatch(Zend_Controller_Request_Abstract $request)
    {
        $view = Zend_Controller_Front::getInstance()
                      ->getParam('bootstrap')
                      ->getResource('view');

        if (false !== $request->getParam('menu'))
        {
            $response = $this->getResponse();
            $content = $response->getBody(true);
            $view->menuContent = $content['default'];
            $updatedContent = $view->render('menu.phtml');
            $response->setBody($updatedContent);
        }
    }
} 
```

在控制器类中

```
class IndexController extends Zend_Controller_Action {

    public function indexAction() {

    }

    public function viewAction()
    {
          $this->getRequest()->setParam('menu', false);
    }
} 
```

因此，无论哪个操作不想要那里的菜单，我们都可以传递一个值为“false”的参数“menu”。

我的问题是：这是正确的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T06:39:05.673

首先，我可能不会从动作中呈现菜单。我倾向于认为动作对应于 HTTP 请求，为等待的客户端构建完整的页面/响应，而不仅仅是页面片段。我要么有一个单独的类/组件句柄菜单创建，要么只使用`Zend_Navigation`.

除此之外，如果我理解正确，您只是希望每个操作都能够启用/禁用布局的菜单部分，对吧？

那么，如何简单地在视图中设置一个开关来启用/禁用布局中的菜单。

布局如下所示：

```
<?php echo $this->doctype(); ?>
<html>
    <head>
        <?php echo $this->headTitle(); ?>
        <?php echo $this->headLink(); ?>
    </head>
    <body>
        <?php if ($this->renderMenu): ?>
            // render menu here 
        <?php endif; ?>
        <?php echo $this->layout()->content; ?>
    </body>
</html> 
```

然后在您的操作中，如果您想禁用菜单渲染，您可以设置：

```
$this->view->renderMenu = false; 
```

可能还值得`$view->renderMenu`在请求调度周期的某个时刻为标志设置一个默认值——可能是在引导程序中，或者在控制器插件中，或者在控制器中`init()`。

# sql - 根据小时过滤窗口功能

> ID：15007872
> 
> 赞同：3
> 
> 时间：2013-02-21T16:52:49.470
> 
> 标签：sql, postgresql, greenplum

我想使用两个不同（但相似）的窗口函数来计算两个值 `SUM`和`COUNT`on `is_active over user_id+item`，只到行的时间 - 负 1 小时。我的直觉是使用 ROWS`UNBOUNDED PRECEDING`但这样我就不能随着时间的推移进行过滤

```
COUNT(1) OVER(PARTITION BY user_id, item ORDER BY req_time ROWS UNBOUNDED PRECEDING) 
SUM(is_active) OVER(PARTITION BY user-id, item ORDER BY req_time ROWS UNBOUNDED PRECEDING) 
```

但是，这没有考虑“1 小时前”间隔因素

考虑以下数据：

```
user_id |     req_time       | item  | is_active |  
--------+--------------------+-------------------+---
1   | 2011-01-01 12:00:00|   1   |     0     |
1   | 2011-01-01 12:30:00|   1   |     1     |
1   | 2011-01-01 15:00:00|   1   |     1     |
1   | 2011-01-01 16:00:00|   1   |     0     |
1   | 2011-01-01 16:00:00|   2   |     0     |
1   | 2011-01-01 16:20:00|   2   |     1     |
2   | 2011-02-02 11:00:00|   1   |     1     |
2   | 2011-02-02 13:00:00|   1   |     0     |
1   | 2011-02-02 16:20:00|   1   |     0     |
1   | 2011-02-02 16:30:00|   2   |     0     | 
```

我希望得到以下结果：“值 1”是 SUM(is_active)，“值 2”是 COUNT(1)：

```
user_id |     req_time       | item  | value 1 | value 2 |  
--------+--------------------+-----------------+---------+
1   | 2011-01-01 12:00:00|   1   |    0    |    0    |
1   | 2011-01-01 12:30:00|   1   |    0    |    0    |
1   | 2011-01-01 15:00:00|   1   |    1    |    2    |
1   | 2011-01-01 16:00:00|   1   |    2    |    3    |
1   | 2011-01-01 16:00:00|   2   |    0    |    0    |
1   | 2011-01-01 16:20:00|   2   |    0    |    0    |
2   | 2011-02-02 11:00:00|   1   |    0    |    0    |
2   | 2011-02-02 13:00:00|   1   |    1    |    1    |
1   | 2011-02-02 16:20:00|   1   |    2    |    4    |
1   | 2011-02-02 16:30:00|   2   |    1    |    2    | 
```

我正在使用基于 Postgresql 8.2.15 的 Greenplum 4.21

提前致谢！吉利比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:57:07.813

我不确定如何使用窗口函数来做到这一点，至少很容易。

`select`我知道的最简单的方法是在子句中使用相关子查询：

```
select t.*,
       (select count(*) from t t2
        where t2.user_id = t.user_id and t2.item = t.item and
              t2.req_time < t.req_time - interval '1 hour'
       ) as value1,
       (select SUM(is_active) from t t2
        where t2.user_id = t.user_id and t2.item = t.item and
              t2.req_time < t.req_time - interval '1 hour'
       ) as value2
from t 
```

您可以在*没有*相关子查询的情况下执行此操作。只是有点麻烦。. .

```
select t.user_id, t.req_time, t.item,
       count(*) as value1,
       sum(t2.isactive) as value2
from t left outer join
     t t2
     on t.user_id = t2.user_id and
        t.item = t2.item and
        t2.req_time < t.req_time - interval '1 hour'
group by t.user_id, t.req_time, t.item 
```

这可能比相关子查询版本更有效（因为有两个相关性）。而且，它应该在 GreenPlum 中工作。我没有意识到它缺乏对相关子查询的支持。这是 ANSI 的一个重大突破。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:11:14.533

[8.3 在 SQL Fiddle](http://sqlfiddle.com/#!10/a7ea5/8)。只有一个子选择。

```
select user_id, req_time, item, v[1] as value1, v[2] as value2
from (
    select t.*,
        (
            select array[
                coalesce(sum(is_active::integer), 0),
                count(*)
                ] as v
            from t s
            where
                user_id = t.user_id
                and item = t.item
                and req_time <= t.req_time - interval '1 hour'
        ) as v
    from t
) s
order by req_time, user_id, item 
```

# javascript - 我应该如何在同一 html 的多个实例中编辑字符串？

> ID：15007873
> 
> 赞同：0
> 
> 时间：2013-02-21T16:52:51.700
> 
> 标签：javascript, jquery, jquery-selectors

我在下面有这段代码，有不同的数据，在我正在处理的页面上重复了 10 次以上：

HTML：

```
 <div class="kpaGraph">
        <p>Target: 43%</p>
        <div class="progress">
            <div class="bar"></div>
        </div>
    </div>
    <div class="kpaBottom">
      <div class="strong">
        <p>311</p>
      </div>
      <div class="weak">
        <p>number of teachers trained</p>
      </div>
    </div> 
```

我想以相同的方式在此代码的所有实例中使用 Javascript/jQuery 根据 (43%) 中的数字更改`div.strong p`(311) 中的数字。`div.kpaGraph p`最干净的方法是什么？我应该全选`$('div.kpaGraph p')`然后使用`each()`还是应该创建一个函数并在所有函数上运行它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:02:47.897

您可以使用以下内容来找到与`.each()`on结合使用的正确元素`$('div.kpaGraph p')`：

```
$(this).parent().next('div.kpaBottom').find('div.strong p') 
```

例如，使用以下命令将获取 kpaGraph p 节点中的值并将其附加到以下 kpaBottom 节点中的 p 节点：

```
$('div.kpaGraph p').each(function () {
    $(this).parent().next('div.kpaBottom').find('div.strong p').html('foo');
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/8ZrSE/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:03:37.493

有几种方法。

您可以使用“下一步”。

```
$('.kpaGraph').each(function(){
   var $kpaStrong = $(this).next('.kpaBottom .strong p');//this is the elm that has 311
}); 
```

或者你必须以某种方式在他们之间建立一种关系，这样你才能知道他们在一起，就像一个共同的父母一样。

```
<div class="kpaWr">
    <div class="kpaGraph">
        <p>Target: 43%</p>
        <div class="progress">
            <div class="bar"></div>
        </div>
    </div>
    <div class="kpaBottom">
        <div class="strong">
            <p>311</p>
        </div>
        <div class="weak">
            <p>number of teachers trained</p>
        </div>
    </div>
</div> 
```

然后使用 jQuery，您可以像这样选择它：

```
$('.kpaGraph').each(function(){
   var $kpaStrong = $(this).closest('.kpaWr').find('.kpaBottom .strong p');//this is the elm that has 311
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:10:03.273

像这样的东西也可能很干净：

```
$("div.strong p").text(function(index, text){
    return $(this).closest("div.kpaBottom").prev("div.kpaGraph").find("p").text();
}); 
```

这会将文本更改为`Target: 43%`您的示例中的文本。

# android - EventLog.readEvents() 不工作

> ID：15007874
> 
> 赞同：1
> 
> 时间：2013-02-21T16:52:54.437
> 
> 标签：android

我在 Android 应用程序中使用以下代码来读取事件日志

```
 final Collection<Event> events = new ArrayList<Event>();
    try {
        final int tag = EventLog.getTagCode("am_proc_start");
        EventLog.readEvents(new int[] { tag }, events);
        System.out.println(events);
    } catch (final IOException e) {
        e.printStackTrace();
    } 
```

但我得到的是一个空的事件列表。我仍然可以通过运行命令来获取所有这些事件`adb logcat events -v`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:02:41.383

首先添加`android.permission.READ_LOGS`权限，然后在 Android 4.1+ 上，使用这个 shell 命令来实际授予权限：

```
adb shell pm grant your.app.package android.permission.READ_LOGS 
```

现在我可以成功读取所有日志。

# javascript - 如何使用D3对角函数绘制曲线？

> ID：15007877
> 
> 赞同：21
> 
> 时间：2013-02-21T16:53:00.873
> 
> 标签：javascript, svg, d3.js, curve

我查看了示例[http://bl.ocks.org/mbostock/raw/4063570/](http://bl.ocks.org/mbostock/raw/4063570/)：

![在此处输入图像描述](../Images/6a17f53fcb1fda17934cc568e3171d82.png)

它从源目标从左到右生成漂亮的合并行。

在我的情况下，我需要手动布局节点并放置 x、y 坐标。在这种情况下，这些线不会在源节点处合并。这是重现此问题的测试代码：

```
var data = [ {name: "p1", children: [{name: "c1"}, {name: "c2"}, {name: "c3"}, {name: "c4"}]}];
var width = 400, height = 200, radius = 10, gap = 50;

// test layout
var nodes = [];
var links = [];
data.forEach(function(d, i) {
    d.x = width/4;
    d.y = height/2;
    nodes.push(d);
    d.children.forEach(function(c, i) {
        c.x = 3*width/4;
        c.y = gap * (i +1) -2*radius;
        nodes.push(c);
        links.push({source: d, target: c});
    })
})

var color = d3.scale.category20();

var svg = d3.select("#chart").append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g");
var diagonal = d3.svg.diagonal()
        .projection(function(d) { return [d.x, d.y]; });

var link = svg.selectAll(".link")
        .data(links)
        .enter().append("path")
        .attr("class", "link")
        .attr("d", diagonal);

var circle = svg.selectAll(".circle")
        .data(nodes)
        .enter()
        .append("g")
        .attr("class", "circle");

var el = circle.append("circle")
        .attr("cx", function(d) {return d.x})
        .attr("cy", function(d) {return d.y})
        .attr("r", radius)
        .style("fill", function(d) {return color(d.name)})
        .append("title").text(function(d) {return d.name}); 
```

[在http://jsfiddle.net/zmagdum/qsEbd/](http://jsfiddle.net/zmagdum/qsEbd/)有这个示例：

![在此处输入图像描述](../Images/45760e925a8710759671037bcc1e60de.png)

但是，看起来靠近节点的曲线的行为与期望的相反。我希望他们在节点处水平直线开始并在中间形成一条曲线。这样做有诀窍吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-03T15:14:49.727

`x`该解决方案基于出色的@bmdhacks 解决方案，但是，我相信我的解决方案稍微好一些，因为它不需要交换`y`数据本身。

这个想法是您可以使用`diagonal.source()`and`diagonal.target()`交换`x`and `y`：

```
var diagonal = d3.svg.diagonal()
    .source(function(d) { return {"x":d.source.y, "y":d.source.x}; })            
    .target(function(d) { return {"x":d.target.y, "y":d.target.x}; })
    .projection(function(d) { return [d.y, d.x]; }); 
```

*所有`x y`交换现在都封装在上面的代码中。*

结果：

![在此处输入图像描述](../Images/38aace371e509d6d102fae7bba1e907e.png)

这里也是[jsfiddle](http://jsfiddle.net/Lm4Qx/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-15T17:55:48.920

请注意，在块示例中，x 和 y 值在链接中交换。这通常会将链接绘制在错误的位置，但他还提供了一个投影功能，可以将它们交换回来。

```
var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.y, d.x]; }); 
```

这是应用了这种技术的 jsfiddle：http: [//jsfiddle.net/bmdhacks/qsEbd/5/](http://jsfiddle.net/bmdhacks/qsEbd/5/)

# android - Android中带有圆角的自定义视图

> ID：15007878
> 
> 赞同：1
> 
> 时间：2013-02-21T16:53:02.947
> 
> 标签：android, android-view, android-ui, android-custom-view

我有一个自定义视图，其中包含几层图像、带有文本的布局、绘图等。我想将视图的一个角设为圆形（右上角）。换句话说，我想裁剪这个角使其变圆 - 而不是设置圆角背景。

我设法通过使用来做到这一点`clipPath()`，但它运行缓慢，因为我必须为此视图打开硬件加速 - 所以这个解决方案不适合我。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-06T11:57:10.097

这是扩展 ImageView 的自定义圆形 ImageView 类。这里变量 CORNER_RADIUS 是半径的值。使用此代码，您只需从该视图扩展该类即可创建任何圆形视图。

```
public class RoundedImage extends android.support.v7.widget.AppCompatImageView
 {
private final static float CORNER_RADIUS = 100.0f;

private Bitmap maskBitmap;
private Paint paint, maskPaint;
private float cornerRadius;

public RoundedImage(Context context) {
    super(context);
    init(context, null, 0);

}

public RoundedImage(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context, attrs, 0);
}

public RoundedImage(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context, attrs, defStyle);
}

private void init(Context context, AttributeSet attrs, int defStyle) {
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    cornerRadius = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, CORNER_RADIUS, metrics);

    paint = new Paint(Paint.ANTI_ALIAS_FLAG);

    maskPaint = new Paint(Paint.ANTI_ALIAS_FLAG | Paint.FILTER_BITMAP_FLAG);
    maskPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

    setWillNotDraw(false);
}

@Override
public void draw(Canvas canvas) {
    Bitmap offscreenBitmap = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas offscreenCanvas = new Canvas(offscreenBitmap);

    super.draw(offscreenCanvas);

    if (maskBitmap == null) {
        maskBitmap = createMask(canvas.getWidth(), canvas.getHeight());
    }

    offscreenCanvas.drawBitmap(maskBitmap, 0f, 0f, maskPaint);
    canvas.drawBitmap(offscreenBitmap, 0f, 0f, paint);
}

private Bitmap createMask(int width, int height) {
    Bitmap mask = Bitmap.createBitmap(width, height, Bitmap.Config.ALPHA_8);
    Canvas canvas = new Canvas(mask);

    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setColor(Color.WHITE);

    canvas.drawRect(0, 0, width, height, paint);

    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
    canvas.drawRoundRect(new RectF(0, 0, width, height), cornerRadius, cornerRadius, paint);

    return mask;
} 
```

}

使用方法是：

```
<com.packagename.RoundedImage
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:scaleType="centercrop"
 /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:19:24.120

如果您为该自定义视图创建透明画布，这应该不是问题。然后在其余图形之前在其上绘制一个圆角矩形作为背景。

圆角矩形应大于画布并向左移动，以使画布的右上角保持透明。

但是，您是否在自定义视图中绘制更大的图像并且只想剪辑那个角落而不是用角落形状擦除那个角落充满油漆的路径

```
mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

# android - 清单应用程序标记中的错误

> ID：15007894
> 
> 赞同：0
> 
> 时间：2013-02-21T16:53:55.187
> 
> 标签：android, xml

我正在研究 gps 教程，我在应用程序标签中的“@drawable/icon”处收到错误，错误是“找不到与给定名称匹配的资源”。我错过了什么？

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.ballincoliig.gun.powder.mills.walking.trail"
        android:versionCode="1"
        android:versionName="1.0" >

        <application
            android:icon="@drawable/icon" android:label="@string/app_name">
            <activity
                android:name="GPSActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <uses-library android:name="com.google.android.maps" />
        </application>

        <uses-sdk android:minSdkVersion="4" />

        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.INTERNET" />

    </manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:58:35.620

Here you can get your answer [Set icon for android application](https://stackoverflow.com/questions/5350624/set-icon-for-android-application)

You will see that there are some folders to update your icon according the resolution of the device you are developing.

# javascript - 带圆角的 HTML5 画布

> ID：15007903
> 
> 赞同：7
> 
> 时间：2013-02-21T16:54:19.037
> 
> 标签：javascript, html, css, canvas, rounded-corners

我想要一个带圆角的 HTML5 画布。我正在使用 CSS 属性`border-radius: 15px`来圆角。

但是，当我在画布的角落画一些东西时，我可以在角落里画画。

开头：

![](../Images/303070d0fdb619c813588c2a187fdff6.png)

是）我有的：

![](../Images/fb884bb30eefc48eaca8ca033d600770.png)

我想要的是：

![在此处输入图像描述](../Images/540f2b2b708be39be6655e2334ff8d90.png)

你有什么办法可以避免这种情况吗？我想过创建一个掩码，但我真的不知道该怎么做。有关信息，这适用于 Firefox，但不适用于 Chrome/Safari/Opera。

这是一个小例子：

[http://jsfiddle.net/XYHpJ/](http://jsfiddle.net/XYHpJ/)

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T13:49:36.420

只需在 stackoverflow 上使用此示例：[https ://stackoverflow.com/a/12336233/1312570](https://stackoverflow.com/a/12336233/1312570)

解决方案：[http://jsfiddle.net/rzSmw/](http://jsfiddle.net/rzSmw/)

```
#canvas_container
{
    background: #fff;
    border: 1px solid #aaa;
    border-radius: 15px;
    height: 515px;
    margin: 20px 20px;
    overflow: hidden;
    width: 690px;

    /* this fixes the overflow:hidden in Chrome/Opera */
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-21T17:02:54.497

避免这种情况的最佳方法是在`<canvas>`内部插入“容器”标签，然后将其`border-radius`应用于容器。像这样：

```
<div id="container">
    <canvas></canvas>
</div> 
```

使用这个 CSS：

```
#container {
    border-radius: 10px;
    background-color: white;
    border: 1px solid #000;
    overflow: hidden;
}

#container > div {
    height: 200px;
    background-color: red;
} 
```

一个工作示例：http: [//jsbin.com/onuqid/2/](http://jsbin.com/onuqid/2/)

您还可以按照[Allendar](https://stackoverflow.com/questions/15007903/html5-canvas-with-rounded-corner#comment21083821_15008092)在评论中的建议使用`display: block;`和摆脱包装器。

# data-structures - 如何在给定数组和给定数组索引上构建最大堆？

> ID：15007906
> 
> 赞同：1
> 
> 时间：2013-02-21T16:54:28.063
> 
> 标签：data-structures, heap

我有以下问题：

给定一个整数数组 A，并给定 t**个不重叠的**部分 [L1,R1],[L2,R2]...[Lt,Rt]

使得每个部分都是数组 (A) 处的开始索引 (Li) 和结束索引 (Ri)，

找到一个数据结构，它以 O(t + klogk) 复杂度返回这些部分中的前 k 个元素（索引在部分中，元素在数组 A 中）。

非常感谢帮助者 Avihai。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-08T13:19:37.790

问题的措辞有点模棱两可：什么算作复杂性操作的一部分`O(t+klogk)`？

我在回答这个问题时看到了 3 个选项。对于前两个，我认为这是解释原始问题的错误方式，我提供了答案。对于第三个也是最后一个选项，我没有解决方案。我仍然认为有必要把问题弄清楚，并将我的答案添加到前两个中。此外，如果不是不可能的话，在评论中添加对此事的长时间讨论也会令人困惑。

以下是我看到的用于回答我开始的问题的选项：

### 选项 1 - 数据结构构建（使用部分）不包括在内

从原始问题的当前措辞听起来，该问题要求可以使用数组`A`和部分预先构建的数据结构，`[L1,R1],[L2,R2],...,[Lt,Rt]`并且考虑复杂性要求的唯一操作是对数据结构执行的操作以提取最高`k`值。

这没有多大意义，因为目前尚不清楚为什么`t`在这种情况下会变得复杂？从您在评论中链接到 Juan 的答案的这个答案中，您可以看到，通过仅使用相关元素预先构建一个堆，您可以获得[从](https://stackoverflow.com/questions/11209556/print-the-biggest-k-elements-in-a-given-heap-in-oklogk?noredirect=1&lq=1)`O(klogk)`数据结构中获取`k`最高价值的元素（一旦存在）。

### 选项 2 - 包括所有操作

如果我们阅读它，就好像问题要求将数据结构构建为考虑复杂性要求的操作的一部分（我们只得到数组和索引列表`[L1,R1,L2,R2,...,Lt,Rt]`并且必须使用它），那么复杂性要求**不是有可能实现**。如果你想建立一个数据结构，你至少需要检查所有需要插入数据结构的元素，如果你不想建立一个数据结构并且你打算使用数组作为它那么你将不得不检查你需要找到最大值的所有元素。无论哪种方式，如果你得到数组中的元素数量在`t=1`哪里`L1=1, R1=n`，你将不得不遍历其中的所有元素`n``A``A`（您没有关于`A`“元素”顺序的假设）。这意味着您至少需要`O(n)`并且要求是`O(t+klogk)`. 为了更清楚地说明这些是完全不相关的数量 - 您可以考虑 的情况`k=1`，这意味着只找到最高元素，而`A`可以是任意长度（比如说 10,000）。

### 选项 3 - 仅使用数组豁免构建数据结构

这让我想到了问题背后的原始含义：`A`事先从给定的数组构建一个数据结构（其构建将不包含在复杂性要求中），以便稍后为您提供部分的索引`[L1,R1],[L2,R2],...[Lt,Rt]`和一个整数`k`您之前构建的数据结构将允许您获取原始数组中`k`由新给定索引 () 定义的部分中的最高元素。不幸的是，我还没有想出解决这个问题的办法——或者证明不存在这样的解决方案，但至少现在这个问题是有道理的。`L1,R1,L2,R2,...,Lt,Rt``A``O(t+klogk)`

我很想知道哪个选项是问题的初衷，如果我想出选项 3 的解决方案，我将相应地编辑这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:24:24.460

我会构建一个间接表 T，它将 [0..t] 映射到由部分映射的索引。

然后我会使用这个间接表运行 heapify 算法。每次算法访问 A[i] 时，它都会被 A[T[i]] 替换。

间接表构建和 heapify 都是 O(t)。获取前 k 个元素将花费 O(t log n)。

编辑： [维基百科在其文章中解释](http://en.wikipedia.org/wiki/Binary_heap)了如何在 O(t) 中构建堆。

基本上它是一系列冒泡操作：

```
for i from floor(A.size()/2) to 0:
    bubble_down(A, i) 
```

文章中有一个证明为什么这是 O(t)。

# c# - 与在中继器内触发 CheckedChange 事件相关的问题

> ID：15007910
> 
> 赞同：1
> 
> 时间：2013-02-21T16:54:39.693
> 
> 标签：c#, asp.net

我有一个 asp.net 应用程序，我在用户控件中添加了中继器，并在中继器中添加了`asp Checkbox`

```
<asp:Repeater ID="Repeater1" runat="server" 
    onitemdatabound="Repeater1_ItemDataBound" 
    onitemcommand="Repeater1_ItemCommand" >
    <ItemTemplate>
        <table>
            <tr>
                <td>    
                     <asp:CheckBox runat="server" ID="chkSelect" AutoPostBack="true" Visible="false" OnCheckedChanged="chkSelect_CheckedChanged" />
                </td> 
```

在 CodeBehind 文件中：

```
 protected void chkSelect_CheckedChanged(object sender, EventArgs e)
        {
            string s = "";
        } 
```

但是单击复选框时该事件不会触发。

我还尝试在 Repeater 控件的 itemDataBound 事件触发时动态添加事件：

```
<asp:Repeater ID="Repeater1" runat="server" 
    onitemdatabound="Repeater1_ItemDataBound" 
    onitemcommand="Repeater1_ItemCommand" >
    <ItemTemplate>
        <table>
            <tr>
                <td>    
                     <asp:CheckBox runat="server" ID="chkSelect" AutoPostBack="true" Visible="false" />
                </td> 
```

在后面的代码中：

```
 protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            if (((DataRowView)e.Item.DataItem).Row["DataType"].ToString().Trim().Equals("bool"))
            {
                CheckBox chkSelect = (CheckBox)e.Item.FindControl("chkSelect");
                chkSelect.CheckedChanged += new EventHandler(chkSelect_CheckedChanged);
                chkSelect.Visible = true;
            } 
```

但仍然没有触发事件..

如何调用Repeater Control内部的CheckBox控件事件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:06:26.417

只是颠倒逻辑。

默认情况下使用处理程序创建`CheckBox`可见的`CheckedChanged`：

```
<asp:Repeater ID="Repeater1" runat="server" 
    onitemdatabound="Repeater1_ItemDataBound" 
    onitemcommand="Repeater1_ItemCommand" >
    <ItemTemplate>
        <table>
            <tr>
                <td>    
                     <asp:CheckBox runat="server" ID="chkSelect" AutoPostBack="true" OnCheckedChanged="chkSelect_CheckedChanged" />
                </td> 
```

在`ItemDataBound`活动中，`Visible=false`为您不想显示的人设置：

```
protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (!((DataRowView)e.Item.DataItem).Row["DataType"].ToString().Trim().Equals("bool"))
    {
        CheckBox chkSelect = (CheckBox)e.Item.FindControl("chkSelect");
        chkSelect.Visible = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:29:02.113

`ItemCreated`如果您将事件连接到事件而不是事件中，您可能能够触发`ItemDataBound`事件：

```
protected void Repeater1_ItemCreated(object sender, RepeaterItemEventArgs e)
   {
       CheckBox chkSelect = (CheckBox)e.Item.FindControl("chkSelect");
       if(chkSelect != null)
       {
            chkSelect.CheckedChanged += new EventHandler(chkSelect_CheckedChanged);
            chkSelect.Visible = true;
       }
   } 
```

原因是`ItemDataBound`只会触发数据绑定。因此，当您回发时，您的Repeater 将从ViewState 重建，并`ItemCreated`为每一行执行，但`ItemDataBound`不是。

# php - 删除 2 个字符之间但有条件的文本

> ID：15007911
> 
> 赞同：0
> 
> 时间：2013-02-21T16:54:43.100
> 
> 标签：php

我需要删除此字符串中的文本：

> bca.pzb。(4-86) 11,52 -十一和五十二-

我需要删除`-eleven and fiftytwo-`并离开`bca.pzb. (4-86) 11,52`

我尝试研究如何使用`preg_match`其他方法来做到这一点，但我不知道如何识别“-”...“-”和“（4-86）”中的“-”之间的文本.

如何删除“-”之间的文本但忽略“（4-86）”中的“-”？

感谢任何人的任何提示。

编辑：

谢谢大家的回答！根据要求，我在这里报告更多数据。我将所有文本行都以这种方式格式化，它们当然可以更改数字和字符串，但它们都是这样的：

```
54 pzt. 9,42 -nine and fortytwo-
66 pzt. 6,54 -six and fiftyfour-
23 pzt. 4,62 -four and sixtytwo -
dxd.pzt.(7-8) 15,17 -fifteen and seventeen-
dxd.pzt.(1-5) 5,84 -five and eightyfour-
dxd.pzt.(4-8) 29,92 -twentynine and ninetytwo-
dxd.pzt.(5-3) 4,61 -four and sixtyone-
dxd.pzt.(4-1) 4,42 -four and fourtytwo- 
```

每次加载某个网页时，我都会有 200 行这样的行。

我需要删除第二部分中的所有文本，其中数字写为单词，并保留第一部分。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:59:02.117

由于您只提供了一个示例，因此我只能猜测您要删除的内容。但是，您可以试试这个，它会删除由连字符包围的*最右边的文本，以及它之前的单个空格：*

```
$string = 'bca.pzb. (4-86) 11,52 -eleven and fiftytwo-';
$removed = preg_replace('/ -[^-]*-$/', '', $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T17:01:13.187

```
echo preg_replace("/-([^-]+)-$/", "", 'bca.pzb. (4-86) 11,52 -eleven and fiftytwo-'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:57:42.567

我认为您可以尝试以下方法：

preg_match('/-(.*)-/s',$html,$content_arr);

结果将在 $content_arr

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T16:58:16.310

一种可能性是搜索字母数字字符 + 破折号之间的空格：

```
$text = preg_replace('/\-[\w\s]+\-/', '', $originalText); 
```

它会起作用，但它会删除所有匹配项，例如 -some text-，因此如果存在格式不同的行，您可能会遇到麻烦

# c# - FindResource 不查找资源，尽管它们确实存在

> ID：15007912
> 
> 赞同：1
> 
> 时间：2013-02-21T16:54:55.003
> 
> 标签：c#, winapi, resources, pinvoke

我的[手指很痛](https://encrypted-tbn2.gstatic.com/images?q=tbn%3aANd9GcTeeWCg7vr2JfeYc9Mi8mReYFXOWDvFJuNCPxm5WCbaFD5WAQRz)。我正在尝试使用 WinApi (FindResource) 从我的 exe 加载资源。我已经使用 WinApi 成功创建了一个字符串资源，并通过 PE 资源管理器、资源黑客和十六进制编辑器验证了它们确实存在。

我不能做的是通过 FindResource 找到它们。该函数完成，返回一些指针并将 LastError 设置为 0。但指针**b**指向无效内存。我尝试以 4 种不同的方式导入 FindResource，并且都具有相同的结果（b1、b2、b3、b4 表示每个声明的 b）。我发现我需要先 LoadLibrary 才能让 FindResource 找到“某物”（**a1** = **a2**是 2 个相同的模块句柄，它们在加载后**正好**指向内存中 exe 的开头，只是用不同的函数获得的）。

* * *

我认为**a** (a = a1 = a2) 和**b**必须位于同一内存空间中（偏移到模块开头？）。但是 b 到 a 的差异始终相同 16568。在十六进制编辑器中，我看到我的字符串在偏移量 8000 左右，并且在每个资源创建后都会有所不同。我有一些想法可能是错的，但我不确定：

*   `MAKELANGID(0, 0)`~ 我知道 0 和 0 代表中立，我在某处读到可能有关于`*.mui`文件的内容？
*   资源创造制造了破碎的资源？实际上，两个资源编辑器都没有问题来显示我的资源
*   导入声明可能是错误的，但我尝试了很多可能性，这些是最好的
*   资源需要打开/锁定/什么？

**我怎样才能成功找到资源？我的代码中有错误吗？**

* * *

```
public static class MyClass
{
    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern IntPtr LoadLibrary([MarshalAs(UnmanagedType.LPStr)] string fileName);
    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern bool FreeLibrary(IntPtr module);
    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, SetLastError = true)]
    public static extern IntPtr GetModuleHandle([MarshalAs(UnmanagedType.LPStr)] string filename);

    [DllImport("kernel32.dll")]
    public static extern IntPtr BeginUpdateResource([MarshalAs(UnmanagedType.LPStr)] string filename, bool deleteExistingResources);
    [DllImport("kernel32.dll")]
    public static extern bool UpdateResource(IntPtr resource, [MarshalAs(UnmanagedType.LPStr)] string type, [MarshalAs(UnmanagedType.LPStr)] string name, ushort language, IntPtr data, uint dataSize);
    [DllImport("kernel32.dll")]
    public static extern bool EndUpdateResource(IntPtr resource, bool discard);

    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, EntryPoint = "FindResource", SetLastError = true)]
    public static extern IntPtr FindResource1(IntPtr module, [MarshalAs(UnmanagedType.LPStr)]string name, [MarshalAs(UnmanagedType.LPStr)] string type);
    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, EntryPoint = "FindResource", SetLastError = true)]
    public static extern IntPtr FindResource2(IntPtr module, IntPtr name, IntPtr type);
    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, EntryPoint = "FindResource", SetLastError = true)]
    public static extern IntPtr FindResource3(IntPtr module, [In, MarshalAs(UnmanagedType.LPStr)]string name, [In, MarshalAs(UnmanagedType.LPStr)] string type);
    [DllImport("kernel32.dll", CharSet = CharSet.Ansi, EntryPoint = "FindResource", SetLastError = true)]
    public static extern IntPtr FindResource4(IntPtr module, string lpName, string lpType);

    public static ushort MAKELANGID(ushort primaryLanguage, ushort subLanguage)
    {
        return Convert.ToUInt16((subLanguage << 10) | primaryLanguage);
    }

    private static void test()
    {
        string filename1 = "MyApp.exe";
        string filename2 = "MyApp2.exe";
        //if (!File.Exists(filename2))
        {
            // creating resource: name = TEST, type = SYSO, lang-id = neutral
            File.Copy(filename1, filename2, true);
            IntPtr res = BeginUpdateResource(filename2, false);
            string s = "aaahello world";
            UpdateResource(res, "SYSO", "TEST", MAKELANGID(0, 0), Marshal.StringToHGlobalAnsi(s), (uint) (s.Length));
            EndUpdateResource(res, false);
        }
        // find resource
        IntPtr a1 = LoadLibrary(filename2);
        IntPtr a2 = GetModuleHandle(filename2);
        IntPtr hInstance = Marshal.GetHINSTANCE(typeof(MyClass).Module);
        if (a1 == a2)
            Console.WriteLine("a1 = a2 = " + a2 + ", hInstance: " + hInstance);
        else
            Console.WriteLine(a1 + " != " + a2);

        for (int i = 0; i < 10; i++)
            Console.WriteLine("." + Marshal.ReadByte(a2 + i));

        IntPtr b1 = FindResource1(a2, "TEST", "SYSO");
        IntPtr b2 = FindResource2(a2, Marshal.StringToHGlobalAnsi("TEST"), Marshal.StringToHGlobalAnsi("SYSO"));
        IntPtr b3 = FindResource3(a2, "TEST", "SYSO");
        IntPtr b4 = FindResource4(a2, "TEST", "SYSO");

        Console.WriteLine(" -> res: " + b1 + ", " + (b1.ToInt32() - a2.ToInt32()) + ", " + Marshal.PtrToStringAnsi(b1));
        Console.WriteLine(" -> res: " + b2 + ", " + (b2.ToInt32() - a2.ToInt32()) + ", " + Marshal.PtrToStringAnsi(b2));
        Console.WriteLine(" -> res: " + b3 + ", " + (b3.ToInt32() - a2.ToInt32()) + ", " + Marshal.PtrToStringAnsi(b3));
        Console.WriteLine(" -> res: " + b4 + ", " + (b4.ToInt32() - a2.ToInt32()) + ", " + Marshal.PtrToStringAnsi(b4));

        for (int i = 0; i < 10; i++)
            Console.WriteLine("." + Marshal.ReadByte(b1 + i));
    }

    [STAThread]
    public static void Main()
    {
        test();
        Console.ReadKey();
    }
} 
```

* * *

我知道互联网上有很多很多关于 FindResource 的帖子，我阅读了很多，但没有一个解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T18:58:49.243

[`FindResource()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648042%28v=vs.85%29.aspx)返回句柄，而不是指向资源的指针；获取数据需要更多步骤。您需要[`LoadResource()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046%28v=vs.85%29.aspx)然后[`LockResource()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648047%28v=vs.85%29.aspx)获取指向实际资源字节的指针。

据我所知，这是旧 16 位时代的遗留物。

# c++ - 在释放数据之前使数组变满

> ID：15007921
> 
> 赞同：0
> 
> 时间：2013-02-21T16:55:14.597
> 
> 标签：c++, qt, bluetooth, buffer

我正在实现一个通过蓝牙接收数据并将其返回到数组中的函数`unsigned char buf[10]`。这是我的函数，每 x 毫秒通过 a 调用一次`QTimer`：

```
void gui::listen_device()
{
    unsigned char crcval;

    int count = 0;

    fd_set readmask;
    struct timeval tv;

    int v = 0, v1 = 0, v2 = 0;

    tv.tv_sec = 0;
    tv.tv_usec = 100000;

    int i;
    memset (buf, 0, 10);
    FD_ZERO (&readmask);
    FD_SET (sock, &readmask);
    if (select (255, &readmask, NULL, NULL, &tv) > 0)
    {
        if (FD_ISSET (sock, &readmask))
        {
            numb = read (sock, buf, 10);

                // print of counter
                printf ("%d ->", buf[0]);
                fprintf (data, "%d,", buf[0]);
                for (i = begin; i < numb-1; i++)
                {
                    v = buf[i];
                    printf ("%d,", v);
                    fprintf (data, "%d,", v);
                }

                //---------------//
                crcval = BP_CRC8(buf,9);
                printf(" crcf=%x crcc=%x", buf[9], crcval);
                if (crcval == buf[9])
                {
                    printf("crc ok\n");
                    begin = 1;
                }
                else
                {
                    printf("crc fail\n");
                    begin = numb -1;
                }
                //---------------//

                printf ("\n");
                fprintf (data, "\n");
        }
    }
} 
```

`buf`我希望该函数仅在已满时才返回。`begin`因此，如果`buf`上次计时器到来时未满，我创建了一个全局变量。

这是`.txt`文件中的输出。

```
0,0,0,0,0,0,0,0,0,
1,0,0,0,0,0,0,0,0,
2,0,0,0,0,0,0,0,0,
3,0,0,0,0,0,0,0,0,
4,0,0,0,0,0,0,
0,
5,0,0,0,0,0,0,0,0,
6,0,0,0,0,0,0,0,0,
7,0,0,0,0,0,0,0,0,
8,0,0,0,0,0,0,0,0,
9,0,0,
0,0,0,
10,0,0,0,0,
11,0,0,0,0,0,0,0,0,
12,0,0,0,0,0,0,0,0,
13,0,0,0,0,0,0,0,0,
14,0,0,0,0,0,0,0,0,
15,0,0,0,0,0,0,0,0,
16,0,0,0,0,0,0,0,0, 
```

它不时地返回给我一个不完整的`buf`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:12:54.430

恕我直言，您必须**更改程序的体系结构**。这里有很多洞。

*   您每隔 x 毫秒调用一次函数，并且保证在下一个 x 毫秒发生时会完成。
*   您从 gui 运行您的聆听 - 所以，您的 gui 正在等待，而不是在这里重新绘制。在后台执行。
*   如果你说，那个函数会返回一些东西——你的`return`? 重写你的代码。

希望这些建议对您有所帮助！祝你好运！

# jakarta-ee - 如何从 CDI 拦截器中清除 EclipseLink 查询结果缓存？

> ID：15007922
> 
> 赞同：4
> 
> 时间：2013-02-21T16:55:15.657
> 
> 标签：jakarta-ee, jpa, eclipselink, cdi, interceptor

我正在使用 EclipseLink 的查询结果缓存：

```
 @NamedQuery(name = "User.findAll",
    query = "SELECT s FROM ...",
    hints= {
            @QueryHint(name=QueryHints.QUERY_RESULTS_CACHE, value=HintValues.TRUE)
            ... 
```

我首先使用名为“CacheManager”的无状态bean手动清除缓存，该bean具有以下方法：

```
public void invalidateCacheForQuery(String namedQueryName) {
    log.info("CacheManagerService: clearing cache for named query " + namedQueryName);
     ((JpaCache) em.getEntityManagerFactory().getCache())
         .clearQueryCache(namedQueryName);
} 
```

每当有可能使查询结果过时的修改（添加/删除）时，我都会调用此方法。调用是在修改后直接进行的，例如

```
em.merge(u);
cacheMan.invalidateCacheForQuery("..."); // for each cached query 
```

（我在这里偷工减料，这是我所做的事情的本质）。

上面的解决方案效果很好——如果没有清除缓存，我的 JUnit 测试将失败，如果存在上述“invalidateCacheForQuery”调用，它们不会失败（如果不存在则失败）。

然后我试图通过定义一个拦截器来让我的生活更轻松：

```
@EJB CacheManager cacheMan;

@AroundInvoke
public Object clearQueryCacheAfterwards(InvocationContext ctx)
        throws Exception {

    // this does something like em.persist that might make cached query results
    // invalid:
    final Object result = ctx.proceed(); 

    // hera are calls cacheMan.invalidateCacheForQuery for all of the relevant named
    // queries. Yes, this is done after ctx.proceed().

    return result;
} 
```

注意：我保持上面的代码简洁：拦截器注释接受一个类对象作为它的参数，我使用类对象来查找它的所有 NamedQueries 的名称，这些名称有一个 QueryHint 指示它们已被缓存。这只是为了解释我如何找到要清除的命名查询。

拦截器方法不起作用，我不知道为什么。**我知道`invalidateCacheForQuery(String namedQueryName)`当我得到正确的日志消息时，也会使用拦截器方法（使用正确的命名查询名称）调用该方法。**我还从拦截器中获取日志消息。因此拦截器机制正在工作，例如，它不是一个简单的问题，比如 beans.xml 中缺少定义。但是，我知道缓存清除不起作用，因为如果我根本没有清除缓存，我的 JUnit 测试会以同样的方式失败。

查看日志，这些连续的行让我确定拦截器正在做它应该做的事情：

```
ClearQueryCacheInterceptor: clearing query cache for named query User.findAll 
CacheManagerService: clearing cache for named query User.findAll 
```

我还尝试`@PersistenceContext(unitName="...") EntiytyManager em;`在拦截器中使用并通过它清除缓存，而不使用 CacheManager EJB。

因此，回顾一下冗长的解释：我有两种方法调用相同的方法，使 EclipseLink 的查询结果缓存无效。我通过日志记录验证了这两种方法都设法使用相同的参数（NamedQuery 名称）调用该方法。内联“在 em.persist() 之后”方式有效，但在拦截器中执行基本完全相同的事情却没有。感觉就像我正在使用拦截器清除 EclipseLink 缓存的另一个实例，但我不知道这怎么可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T10:51:39.620

您的问题是您在使用 Interceptor 方法时正在处理两个不同的 PersistenceContexts。

看起来您的拦截器配置在实体级别上工作，它不共享 EJB 容器的 PersistenceContext。尝试将拦截器移动到您的服务层（将其应用于持久/修改数据的 EJB）。它不像您尝试做的那样自动，但应该可以工作。

# javascript - 创建嵌套的 Javascript 对象

> ID：15007929
> 
> 赞同：0
> 
> 时间：2013-02-21T16:55:27.697
> 
> 标签：javascript, arrays, javascript-objects, dynamic-arrays

我显然不能抽象地思考这样做......但我想从一个使用数组值作为属性名称的数组中创建一个 Javascript 对象，但它们应该是相互嵌套的对象。

所以如果我有一个这样的数组：

```
['First', 'Second', 'Third', 'Fourth'] 
```

我的预期输出是：

```
{
    First: {
        Second: {
            Third: {
                Fourth: {}
            }
        }
    }
} 
```

**更新** 这是我在评论中提到的使用的功能：

```
function appendKey(obj, to, key) {
    if (obj.hasOwnProperty(to)) {
        appendKey(obj[to], to, key);
    } else {
        obj[key] = {};
    }

    return obj;
} 
```

我的意图是这样称呼它：

```
var data = ['First', 'Second', 'Third', 'Fourth'];
data = appendKey(data, 'First', 'Second');
data = appendKey(data, 'Second', 'Third');
data = appendKey(data, 'Third', 'Fourth'); 
```

显然，这可以放入一个循环中，这就是我想这样做的原因。我的输出最终是：

```
data = { 'First' : { 'Second' } } // it works this time!

data = { 'First' : { 'Second' },
         'Third' : { } }

data = { 'First' : { 'Second' },
         'Third' : { 'Fourth' { } } } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T17:03:47.800

在循环之外，将基础对象存储在一个变量中，并有一个单独的变量来存储当前对象*（开始时与基础对象相同）*。

在循环内部，获取“当前”对象，使用当前数组成员为其指定一个键，为该键分配一个新对象，并使该新对象成为新的“当前”对象。

```
var arr = ['First', 'Second', 'Third', 'Fourth'],
    obj = {},
    currObj = obj;

arr.forEach(function(key) {
    currObj = (currObj[key] = {});
});

console.log(obj); // {First:{Second:{Third:{Fourth:{}}}}} 
```

*演示：http:* [//jsfiddle.net/qunDt/](http://jsfiddle.net/qunDt/)

* * *

`forEach` 如果您愿意，可以稍微展开代码。

```
arr.forEach(function(key) {
    currObj[key] = {};
    currObj = currObj[key];
}); 
```

* * *

如果你想要一个纯粹的递归方法，你可以这样做：

```
function nested(list, o) {
    if (list.length === 0)
        return o;
    o[list.shift()] = nested(list, {})
    return o;
}

var obj = nested(arr, {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:06:47.483

```
var names = ['First', 'Second', 'Third', 'Fourth'];

var build = function(soFar,remaining) {
    if(remaining.length === 0) {return soFar;}
    var outer = {};
    outer[names.pop()] = soFar;
    return build(outer, names);
}

var result = build({}, names); 
```

# jquery - 具有相同类的多个 div 上的 Jquery .slideUp

> ID：15007933
> 
> 赞同：1
> 
> 时间：2013-02-21T16:55:40.290
> 
> 标签：jquery, show-hide, slideup, mouseenter, mouseout

嗨，我对 jquery 以及正确使用它以将函数应用于 div 的方式非常陌生，但它与多个 div 共享它的类。我想要的是在鼠标输入上一次应用 .slideUp() 到一个 div 。我的问题是它们都有相同的类，当我的鼠标进入任何 div 时，它们都会向上滑动。下面是我使用 .hide 切换的带有 jquery 的 html。我知道我需要使用某种变量或选择器来告诉 jquery 要做什么，但我想不出该怎么做。任何帮助都感激不尽。

这是jQuery

```
$(document).ready(function(){

        $(".item1, .item2, .item3").mouseenter(function(){
          $(".black_overlay").toggle();
        }); 
```

这是html

```
<div id="container">
            <div class="item1">
                <div class="black_overlay"><h1 id="mini">New Art Exchange<br/>
                Culture Cloud Campaign</h1></div>               
            </div>
            <div class="item3">
                <div class="black_overlay"><h1 id="mini">New Art Exchange<br/>
                Culture Cloud Campaign</h1></div>
            </div>
            <div class="item2">
                <div class="black_overlay"><h1 id="mini">New Art Exchange<br/>
                Culture Cloud Campaign</h1></div>   
            </div>
            <div class="item3">
                <div class="black_overlay"><h1 id="mini">New Art Exchange<br/>
                Culture Cloud Campaign</h1></div>
            </div>
            <div class="item2">
                <div class="black_overlay"><h1 id="mini">New Art Exchange<br/>
                Culture Cloud Campaign</h1></div>
            </div>          
</div> 
```

所有这些 div 最终都会在 wordpress 中发布，使用砖石在屏幕上组织它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:58:34.953

用于`.find()`选择除外的一项：

```
$(".item1, .item2, .item3").mouseenter(function(){
      $(this).find(".black_overlay").toggle();
    }); 
```

# mysql - 如何在 MySQL Workbench 中自动更新数据库？

> ID：15007935
> 
> 赞同：0
> 
> 时间：2013-02-21T16:55:40.413
> 
> 标签：mysql, mysql-workbench, eer-model

我刚刚下载了 MySQL Workbench 5.2 并且非常喜欢它。我使用 New Connection 创建了一个数据库，并像往常一样创建了我的数据库。然后我创建了一个 EER 模型并使用了数据库。然后我在我的数据库中编辑了一些字段（在非 EER 模型中），但新数据没有在 EER 模型中更新。有没有一种方法可以自动更新 EER 模型中数据库中的数据，而无需每次都创建新的 EER 模型？谢谢

编辑：还有一种方法可以在 EER 模型接口之外创建外键。还是必须在那里做？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:57:22.907

您必须根据对数据库所做的更改重新创建 ER 图。Workbench 不会自动执行此操作（据我所知）。

`ALTER TABLE`您可以使用语法创建外键约束。[请参阅文档](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)：

> InnoDB 使您可以使用以下方法向表添加新的外键约束`ALTER TABLE`：

```
ALTER TABLE tbl_name
    ADD [CONSTRAINT [symbol]] FOREIGN KEY
    [index_name] (index_col_name, ...)
    REFERENCES tbl_name (index_col_name,...)
    [ON DELETE reference_option]
    [ON UPDATE reference_option] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:25:52.007

MySQL Workbench 支持双向同步。每当您更改模型或数据库中的某些内容时，只需使用 Database -> Synchronize Model 打开同步向导，该向导会检测所有更改并为您提供一个详细信息窗格，您可以在其中选择要在哪个方向同步的内容（如果默认值没有满足您的需求）。

# c++ - C++中接口的多重继承

> ID：15007940
> 
> 赞同：7
> 
> 时间：2013-02-21T16:56:02.620
> 
> 标签：c++, inheritance, interface, multiple-inheritance, boost-mpl

我有一个对象接口和一个派生对象可能想要支持的开放式接口集合。

```
// An object
class IObject
{
    getAttribute() = 0
}

// A mutable object
class IMutable
{
    setAttribute() = 0
}

// A lockable object 
class ILockable
{
    lock() = 0
}

// A certifiable object 
class ICertifiable
{
    setCertification() = 0
    getCertification() = 0
} 
```

一些派生对象可能如下所示：

```
class Object1 : public IObject, public IMutable, public ILockable {}
class Object2 : public IObject, public ILockable, public ICertifiable {}
class Object3 : public IObject {} 
```

这是我的问题：有没有办法编写只采用这些接口的某些组合的函数？例如：

```
void doSomething(magic_interface_combiner<IObject, IMutable, ILockable> object);

doSomething( Object1() )  // OK, all interfaces are available.
doSomething( Object2() )  // Compilation Failure, missing IMutable.
doSomething( Object3() )  // Compilation Failure, missing IMutable and ILockable. 
```

我发现最接近的是 boost::mpl::inherit。我取得了一些有限的成功，但它并不能完全满足我的需要。

例如：

```
class Object1 : public boost::mpl::inherit<IObject, IMutable, ILockable>::type
class Object2 : public boost::mpl::inherit<IObject, ILockable, ICertifiable>::type
class Object3 : public IObject

void doSomething(boost::mpl::inherit<IObject, ILockable>::type object);

doSomething( Object1() )  // Fails even though Object1 derives from IObject and ILockable.
doSomething( Object2() )  // Fails even though Object2 derives from IObject and ILockable. 
```

我认为类似于 boost::mpl::inherit 的东西但是会生成一个继承树，其中提供的类型的所有可能排列可能会起作用。

我也很好奇解决这个问题的其他方法。理想情况下，编译时检查而不是运行时检查（即没有dynamic_cast）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T17:16:41.557

您应该使用`static_assert`来检查函数中的类型：

```
#include <type_traits>

template< typename T >
void doSomething( const T& t )
{
   static_assert( std::is_base_of<IObject,T>::value, "T does not satisfy IObject" );
   static_assert( std::is_base_of<IMutable,T>::value, "T does not satisfy IMutable" );

   // ...
} 
```

这将为您提供非常好的错误消息，告诉您哪些接口不满意。如果您需要重载函数并拥有仅适用于特定接口组合的版本，您还可以使用`enable_if`：

```
#include <type_traits>

template< typename T, typename... Is >
struct HasInterfaces;

template< typename T >
struct HasInterfaces< T > : std::true_type {};

template< typename T, typename I, typename... Is >
struct HasInterfaces< T, I, Is... >
  : std::integral_constant< bool,
      std::is_base_of< I, T >::value && HasInterfaces< T, Is... >::value > {};

template< typename T >
typename std::enable_if< HasInterfaces< T, IObject, IMutable >::value >::type
doSomething( const T& t )
{
  // ...
} 
```

当不满足接口要求时，会使函数从重载集中*消失。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:18:00.933

You can write an interface checking class using recursive variadic inheritance:

```
template<typename... Interfaces>
struct check_interfaces;
template<>
struct check_interfaces<> {
   template<typename T> check_interfaces(T *) {}
};
template<typename Interface, typename... Interfaces>
struct check_interfaces<Interface, Interfaces...>:
public check_interfaces<Interfaces...> {
   template<typename T> check_interfaces(T *t):
      check_interfaces<Interfaces...>(t), i(t) {}
   Interface *i;
   operator Interface *() const { return i; }
}; 
```

For example:

```
struct IObject { virtual int getAttribute() = 0; };
struct IMutable { virtual void setAttribute(int) = 0; };
struct ILockable { virtual void lock() = 0; };

void f(check_interfaces<IObject, IMutable> o) {
   static_cast<IObject *>(o)->getAttribute();
   static_cast<IMutable *>(o)->setAttribute(99);
}

struct MutableObject: IObject, IMutable {
   int getAttribute() { return 0; }
   void setAttribute(int) {}
};

struct LockableObject: IObject, ILockable {
   int getAttribute() { return 0; }
   void lock() {}
};

int main() {
   f(new MutableObject);
   f(new LockableObject);  // fails
} 
```

Note that `check_interfaces` has a footprint of one pointer per interface checked; this is because it performs type erasure on the declared type of the actual argument.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T19:22:23.577

使用[`std::enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)and的解决方案[`std::is_base_of`](http://en.cppreference.com/w/cpp/types/is_base_of)：

```
#include <type_traits>

// An object
struct IObject
{
    virtual void getAttribute() = 0;
};

// A mutable object
struct IMutable
{
    virtual void setAttribute() = 0;
};

// A lockable object 
struct ILockable
{
    virtual void lock() = 0;
};

// A certifiable object 
struct ICertifiable
{
    virtual void setCertification() = 0;
    virtual void getCertification() = 0;
};

struct Object1 : public IObject, public IMutable, public ILockable
{
    void getAttribute() {}
    void setAttribute() {}
    void lock() {}
};

struct Object2 : public IObject, public ILockable, public ICertifiable
{
    void getAttribute() {}
    void lock() {}
    void setCertification() {}
    void getCertification() {}
};

struct Object3 : public IObject
{
    void getAttribute() {}
};

template<typename T>
void doSomething(
    typename std::enable_if<
        std::is_base_of<IObject, T>::value &&
        std::is_base_of<IMutable, T>::value &&
        std::is_base_of<ILockable, T>::value,
        T>::type& obj)
{
}

int main()
{
    Object1 object1;
    Object2 object2;
    Object3 object3;

    doSomething<Object1>(object1);  // Works
    doSomething<Object2>(object2);  // Compilation error
    doSomething<Object3>(object3);  // Compilation error
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T17:12:33.443

也许这不是最优雅的方式，因为它是用 C++03 语法完成的

```
template <typename T, typename TInterface>
void interface_checker(T& t)
{
    TInterface& tIfClassImplementsInterface = static_cast<TInterface&>(t);
} 
```

这是给你精神的绝招。现在在你的情况下：

```
template <typename T, typename TInterface1, typename TInterface2, typename TInterface3 >
void magic_interface_combiner(T& t)
{
    TInterface1& tIfClassImplementsInterface = static_cast<TInterface1&>(t);
    TInterface2& tIfClassImplementsInterface = static_cast<TInterface2&>(t);
    TInterface3& tIfClassImplementsInterface = static_cast<TInterface3&>(t);
} 
```

我想使用 C++11 类型特征可以更智能地完成它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T17:24:30.887

只是为了让您稍微了解一下 C++11：

没有递归的单一类型：

```
template <typename... Ts>
class magic_interface_combiner {
  typedef std::tuple<Ts*...> Tpl;
  Tpl tpl;

  template <typename T, int I>
  T *as_(std::false_type)
  {
    static_assert(I < std::tuple_size<Tpl>::value, "T not found");
    return as_<T, I+1>(std::is_same<T, typename std::tuple_element<I+1, Tpl>::type>{});
  }
  template <typename T, int I>
  T *as_(std::true_type) { return std::get<I>(tpl); }

public:
  template <typename T>
  magic_interface_combiner(T * t) : tpl(static_cast<Ts*>(t)...) {}

  template <typename T> T * as() { return as_<T, 0>(std::false_type{}); }
};

// no template    
void doSomething(magic_interface_combiner<IObject, IMutable, ILockable> object)
{
} 
```

两种类型但没有递归：

```
template <typename T>
class single_interface_combiner {
  T *p;
public:
  single_interface_combiner(T *t) : p(t) {}
  operator T* () { return p; }
};

template <typename... Ts>
struct magic_interface_combiner : single_interface_combiner<Ts>... {
  template <typename T>
  magic_interface_combiner(T* t) : single_interface_combiner<Ts>(t)... {}

  template <typename T>
  T * as() { return *this; }
}; 
```

# java - 在Java中拆分字符串，

> ID：15007941
> 
> 赞同：2
> 
> 时间：2013-02-21T16:56:02.913
> 
> 标签：java, string, split, java.util.scanner, arrays

我试图将一个字符串拆分为一个字符串数组，但是当它拆分字符串时，只有第一部分在拆分之前位于 [0] 插槽的数组中，但在 [1] 或更高版本中没有任何内容。这在尝试输出 spliced[1] 时也会返回 java 异常错误

```
import java.util.Scanner;

public class splittingString
{

    static String s;

    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter the length and units with a space between them");
        s = input.next();
        String[] spliced = s.split("\\s+");
        System.out.println("You have entered " + spliced[0] + " in the units of" + spliced[1]);
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T17:00:52.260

你应该使用： -

```
input.nextLine() 
```

目前，您正在使用 next 它将返回空格分隔

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:01:03.783

`input.next()`读取单个单词而不是整行（即将在第一个空格处停止）。要阅读整行，请使用`input.nextLine()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T17:01:33.473

假设您的输入是`12 34`，`s`变量的内容是`12`，不是`12 34`。您应该使用`Scanner.nextLine()`阅读整行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-21T17:01:44.340

问题不在于`split()`函数调用。相反，问题在于您用于从控制台读取输入的功能。

`next()`只读取您键入的第一个单词（在遇到的第一个空格之后基本上不会读取）。

而是使用`nextLine()`. 它将读取整行（包括空格）。

这里更正的代码：

```
import java.util.Scanner;

public class StringSplit {

    static String s;

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        System.out
                .println("Enter the length and units with a space between them");
        s = input.nextLine();
        String[] spliced = s.split("\\s+");
        System.out.println("You have entered " + spliced[0]
                + " in the units of" + spliced[1]);

    }

} 
```

# c# - 为什么 dataGridView 只能在我自己的电脑上工作？

> ID：15007945
> 
> 赞同：0
> 
> 时间：2013-02-21T16:56:13.087
> 
> 标签：c#, .net, datagridview

我最近创建了一个任务管理软件，它基于在通过以下函数绑定到数据库的 dataGridView 中显示任务：

```
public void Bind(string sqlquery)
    {
        mySqlConnection = new MySqlConnection(
            "SERVER=localhost;" +
            "DATABASE=test;" +
            "UID=root;" +
            "PASSWORD=Pa$$123;");
        try
        {
            mySqlConnection.Open();
            string query = sqlquery;

            mySqlDataAdapter = new MySqlDataAdapter(query, mySqlConnection);
            mySqlCommandBuilder = new MySqlCommandBuilder(mySqlDataAdapter);

            mySqlDataAdapter.UpdateCommand = mySqlCommandBuilder.GetUpdateCommand();
            mySqlDataAdapter.DeleteCommand = mySqlCommandBuilder.GetDeleteCommand();
            mySqlDataAdapter.InsertCommand = mySqlCommandBuilder.GetInsertCommand();

            dataTable = new DataTable();
            mySqlDataAdapter.Fill(dataTable);

            bindingSource = new BindingSource();
            bindingSource.DataSource = dataTable;

            dataGridView1.DataSource = bindingSource;
        }
        catch {

            notifyIcon1.BalloonTipTitle = "Erreur de connexion";
            notifyIcon1.BalloonTipText = "La connexion au serveur est échouée, nous éssayons de se connecter à nouveau, si un ce problème dure plus de 5 minutes ou si vous rencontrez des problèmes d'affichage nous vous conseillons de fermer l'application et la relancer à nouveau";
            notifyIcon1.BalloonTipIcon = ToolTipIcon.Warning;
            notifyIcon1.ShowBalloonTip(5000);
        }

        //close mysql conn
        mySqlConnection.Dispose();
    } 
```

在运行 Windows 7 (x86) 的计算机上一切正常，但是当我尝试在其他计算机上使用该应用程序时，我的 datagridview 为空白，并且看不到任何显示的数据。

为什么 dataGridView 只能在我的电脑上工作，而不能在其他电脑上工作？

**编辑：**
我的目标是 .NET Framework 4.0 Client Profile，我使用 VS2010 Express Edition 进行应用程序部署，我尝试将 Target Net Framework 更改为旧版本，但结果是相同的。

我还尝试在其他 4 台计算机上使用该应用程序：Windows XP SP3、Windows 7 (x86)、Windows 7 (x64)，结果相同。除非我在自己的计算机上运行应用程序，否则 dataGridView 中不会显示任何数据。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T16:58:06.657

您正在连接到 Localhost

```
mySqlConnection = new MySqlConnection(
        "SERVER=localhost;" +
        "DATABASE=test;" +
        "UID=root;" +
        "PASSWORD=Pa$$123;"); 
```

这大概是在你的开发机器上，你需要更改连接才能使用网络上的真实服务器

# php - 将参数传递给颜色框

> ID：15007946
> 
> 赞同：0
> 
> 时间：2013-02-21T16:56:14.503
> 
> 标签：php, jquery, codeigniter, parameters, colorbox

我正在使用[彩盒](http://www.jacklmoore.com/colorbox)。

```
<a class="publishpost" href="<?= base_url()."publish_ads/publishon/".$adds[$i]->getId()?>"></a>
                        <script>
                                $(document).ready(function(){ 
                                    $('.publishpost').colorbox({ width: '900px', height: '500px' });
                                });
                        </script> 
```

我有这个指向 codeigniter 控制器的链接。我想从加载颜色框的视图中访问一些变量。我怎样才能做到这一点。我想到了一个表单或者可能是 jquery 的东西，但我仍然不知道如何传递参数。

我打算作为参数传递的值是这样的，例如：

```
<div class="external_wall_right_col_sub_ad_img"><img src="<?=$img?>" alt="small ad"></div> 
```

我想将 $img 变量传递给颜色框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:21:40.120

我正在回答我自己的问题：

我使用通过 post 发送数据的颜色框的 data 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:47:31.617

决定你希望前端如何工作取决于你——但是，传递数据，我可以帮你。

如果您选择使用表单，您可以访问您要提交的控制器中的表单数据。从那里您可以定义 $img 变量，如下所示：

```
$data['img'] = $this->input->post('input_name'); 
```

然后，当您加载视图时，传递数据：

```
$this->load->view('view_name', $data); 
```

这会将 $data 中声明的所有变量传递给您的视图。您现在可以根据需要在视图中访问该变量：

```
<img src="<?php echo $img; ?>" alt="small ad"> 
```

# tar - 将 archive.tar.gz 中包含的文件提取到名为 archive 的新目录

> ID：15007947
> 
> 赞同：35
> 
> 时间：2013-02-21T16:56:15.310
> 
> 标签：tar

我有一个包含大约 800 个 .tgz 档案的目录，每个档案包含大约 10 个文件。实际上，我想将每个存档转换为同名目录。是否有一个简单的单行命令来执行此操作，或者我应该编写一个脚本？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-21T17:44:17.980

自 GNU tar 1.28 以来的更新：使用`--one-top-level`，请参阅[https://www.gnu.org/software/tar/manual/tar.html#index-one_002dtop_002dlevel_002c-summary](https://www.gnu.org/software/tar/manual/tar.html#index-one_002dtop_002dlevel_002c-summary)

旧版本需要为此编写脚本。您可以使用 tar -C 选项来指定要放置解压的目录。

下面的脚本假定目录不存在并且必须创建。如果目录确实存在，则脚本仍然可以工作 - mkdir 只会失败。

```
tar -xvzf archive.tar.gx -C archive_dir 
```

例如

```
for a in *.tar.gz
do
    a_dir=${a%.tar.gz}
    mkdir --parents $a_dir
    tar -xvzf $a -C $a_dir
done 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-12-10T10:52:29.277

如果`GNU tar`考虑到足够现代，那么这应该是这里的最佳答案：[https ://unix.stackexchange.com/a/478341/34069](https://unix.stackexchange.com/a/478341/34069)

为简洁起见，这是摘录：

```
tar -xvf bash.html_node.tar.gz --one-top-level 
```

它将存档提取到以存档文件名命名的新目录中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-23T08:54:56.953

创建一个要像这样提取的`mkdir archive` 文件夹，并在提取时使用 -C 传递文件夹名称， `tar -xvf archive.zip -C archive`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-24T20:57:31.523

将文件从一个目录提取到第二个目录，同时将文件名保留在第二个目录中，即没有完整的文件路径和文件扩展名

```
%sh
for file in /mnt/dir1/*.tar.gz; 
do 
y=${file##*/}; 
z=${y%%.*}; 
mkdir -p /mnt/dir2/$z && tar -xzvf $file -C /mnt/dir2/$z;
done 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-09-12T22:14:15.330

好吧，如果你运行`$ tar -zxf some-archive.tar.gz -C .`，（注意最后的点）一个名为的新目录`some-archive/`将在你当前所在的目录中创建。

也许这就是你的问题的意思？这是我通常想要的，所以它也可能对你有用。

# ruby-on-rails - Gem will_paginate ignore :include ActiveRecord find 方法的参数

> ID：15007948
> 
> 赞同：1
> 
> 时间：2013-02-21T16:56:18.203
> 
> 标签：ruby-on-rails, include, will-paginate, rails-activerecord

我试图优化我的 Rails 2 应用程序，以限制 mySQL 查询数量。这是一个简单的例子，有 3 个模型：

一篇文章有​​很多图片，通过一个连接模型ArticlePicture。“主图”是第一个，尊重图片的顺序。

```
class Article < ActiveRecord:Bast
  has_many :articles_pictures, :order => 'sequence'
  has_many :pictures, :through => :articles_pictures, :order => 'sequence'
  has_one :main_picture, :through => :articles_pictures, :source => :picture, :conditions => ["# {ArticlesPicture.table_name}.sequence = ?", 0]
end 
```

文章图片是文章和图片之间的连接模型，具有“序列”字段。

```
class ArticlesPicture < ActiveRecord::Base
  belongs_to :article
  belongs_to :picture
end 
```

一张图片可以属于许多文章。

```
class Picture < ActiveRecord::Base
  has_many :articles_pictures
  has_many :articles, :through => :articles_picture
end 
```

在我的控制器中，我调用所有文章，并对其进行分页：

```
@articles = Article.all.paginate(:per_page => 50) 
```

在我看来，我列出了带有“每个”调用的文章

```
article.main_picture 
```

显然，Rails 为前 50 张图片调用了“SELECT”，这不是很优化。所以我试着用

```
@articles = Article.find(:all, :include => :main_picture).paginate(:per_page => 50) 
```

但是Rails会为整个图片表创建一个“SELECT”，即

```
SELECT `articles_pictures`.*
FROM `articles_pictures`
WHERE (`articles_pictures`.article_id IN (1,2,3,4,5,6,7,8,9,10,11,12,.....) 
```

有什么我忘记的选择吗？

问候

皮埃尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:58:26.527

First thing, using `all` with `pagination` means `no using pagination`. Using `all` makes `heavy load` on `db`. It will load all data in `memory`. For large data it takes `long time` to load. Sometimes may `crash` with full memory. So we use `pagination` to load `some data at a time` to give user more responsive. So don't use `all`.

```
 @articles = Article.all.paginate(:per_page => 50) 
```

Use like this:

```
 @articles = Article.paginate(:per_page => 50)
 @articles = Article.paginate(:per_page => 50, :include => :main_picture) 
```

# antlr - 特殊注释无法匹配词法分析器规则

> ID：15007951
> 
> 赞同：1
> 
> 时间：2013-02-21T16:56:35.440
> 
> 标签：antlr

我喜欢解析的一个示例文本是这样的 -

```
@comment {
    { something }
    { something else }
} 
```

基本上“@comment”是搜索的关键，之后是一对匹配的大括号。我不需要解析大括号之间的内容。由于这类似于 C' 多行注释，因此我的语法基于此：

```
grammar tryit;

tryit : top_cmd 
        ;

WS : ('\t' | ' ')+  {$channel = HIDDEN;};

New_Line : ('\r' | '\n')+   {$channel = HIDDEN;};

top_cmd :cmds 
        ;

cmds
    : cmd+
    ;

cmd
    : Comment
    ;

Comment
    : AtComment    Open_Brace  ( options {greedy = false; }: . )+  Close_Brace
    ;

AtComment
    : '@comment'
    ;

Open_Brace
    : '{'
    ;

Close_Brace
    : '}'
    ; 
```

但是在 ANTLRWORKS 中进行测试时，我立即得到了 EarlyExitException。

你看出什么问题了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:23:16.653

我看到了两个问题：

1.  您没有考虑`"@comment"`和 first之间的空格`"{"`。请注意，空格被放在解析器规则的隐藏通道上，***而不是***词法分析器规则！
2.  与`( options {greedy = false; }: . )+`您匹配的只是第一个`"}"`，而不是平衡的大括号。

尝试这样的事情：

```
tryit
 : top_cmd 
 ;

top_cmd
 : cmds 
 ;

cmds
 : cmd+
 ;

cmd
 : Comment
 ;

Comment
 : '@comment' ('\t' | ' ')* BalancedBraces
 ;

WS
 : ('\t' | ' ')+  {$channel = HIDDEN;}
 ;

New_Line
 : ('\r' | '\n')+   {$channel = HIDDEN;}
 ;

fragment
BalancedBraces
 : '{' (~('{' | '}') | BalancedBraces)* '}'
 ; 
```

# functional-programming - 在 OCaml 中使用 Array 实现 Stack 时如何保持多态性？

> ID：15007954
> 
> 赞同：2
> 
> 时间：2013-02-21T16:56:48.790
> 
> 标签：functional-programming, ocaml

我`stack`正在`OCaml`使用`array`.

我希望它接受任何类型。这是我实施的一部分，我的问题也是关于它的。

* * *

```
type 'a stack = {mutable storage : 'a array; mutable n : int};;
let create () = {storage = Array.make 2 0; n = -1};; 
```

* * *

因此，在上面，当我定义堆栈的类型时，就可以了。`storage`is a which is a array接受`'a array`任何类型。

但是当我实现该`create`功能时，我遇到了问题。我怎样才能初始化一个`'a array`？我不能，对吧？当我创建它时，我必须给它一个初始值，对吗？

* * *

**那么如何使用具有多态性的数组创建堆栈呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:52:42.210

为什么要在 OCaml 中使用数组来实现堆栈？这没有任何意义，这不是 C++ 或 Java。不可变堆栈：

```
 type 'a stack = Empty | Stack of 'a * 'a stack

 let pop = function
   | [] -> raise (Invalid_argument "empty stack")
   | x :: s -> x, s

 let push x s = x :: s

 let is_empty s = (s = Empty) 
```

可变堆栈：

```
type 'a stack = 'a list ref

let create () = ref []

let pop s =
  match !s with
    | [] -> raise (Invalid_argument "empty stack")
    | x :: xs -> s := xs ; x

let push x s = (s := x :: !s)

let is_empty s = (!s = []) 
```

PS 在您声称数组会以某种方式更快之前，您应该进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:20:18.477

您的`storage`字段是可变的，因此您可以在不同的时间将不同的数组放在那里。所以你可以用一个完全多态的空数组进行初始化（就像一个空列表）。

另一种方法是对`storage`字段使用选项类型并在第一次推送操作时创建数组。

我有时会在我的生产代码中遇到此类问题。我通常最终使用选项类型。

（更好的方法是对堆栈使用列表。除非您需要访问除顶部以外的元素，否则数组只会造成麻烦而不会带来任何好处。）

**更新**

这是一个函数，它返回一个两倍于所提供数组的数组。为了灵活性，不保证额外元素具有任何特定值（尽管实际上它们只是原始数组的第 0 个元素的副本）。

```
let double array =
    let len = Array.length array in
    if len = 0 then array  (* 2 * 0 = 0 *)
    else
        Array.init
            (2 * len)
            (fun x -> if x < len then array.(x) else array.(0)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T17:18:36.947

You could allocate the array lazily:

```
type 'a stack = {mutable storage : 'a array option; mutable n : int}
let create () = {storage = None; n = -1} 
```

Your push function would then check whether the stack is initialised already and create the array of not.

However, on a more general note, I think you're better of defining your stack with an 'a list ref. Or even better, use an immutable stack, i.e. a list.

# php - html实体不转换特殊字符

> ID：15007956
> 
> 赞同：2
> 
> 时间：2013-02-21T16:56:51.053
> 
> 标签：php, character, html-entities

我正在使用 htmlentities 转换带有重音符号的字符，但它没有转换这种类型的引号“。相反，浏览器会显示一个带有问号的奇怪符号 </p>

如何转换这些显示为符号的字符？例如，名为“Hello Colors”的书在桌子上。

我已经尝试过这个命令，但它不起作用：

```
htmlentities($message);
htmlentities($message, ENT_QUOTES, 'UTF-8');
htmlentities($message, ENT_NOQUOTES, 'UTF-8');
htmlentities($message, ENT_COMPAT, 'UTF-8'); 
```

谢谢你。

如果我执行以下操作，我刚刚意识到一些奇怪的事情

```
echo $message; die(); 
```

显示调试报价的白页显示！那么发生了什么？为什么它没有在网站页面中正确显示？:S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T17:04:50.577

看起来您错过了浏览器中的字符集规范，

尝试将`<meta charset="UTF-8">`其添加到您的网页头部部分。我以前遇到过这样的问题，以 UTF -8 显示多语言文本，我做了同样的事情来解决这个问题。

希望这可以帮助

顺便提一句

对于 HTML 5 `<meta charset="UTF-8">`作品

在 HTML 4 的情况下

```
<meta http-equiv="Content-type" content="text/html;charset=UTF-8"> 
```

如果是 XML，您必须指定

```
<?xml version="1.0" encoding="UTF-8"?> 
```

这里是您可以获取所有信息的地方

[在 HTML 中声明字符编码](http://www.w3.org/International/questions/qa-html-encoding-declarations)

有几种方法可以设置内容字符集，即使您也可以设置服务器以始终呈现 utf-8，您可以在此处阅读[服务器设置](http://www.w3.org/International/O-HTTP-charset)部分中的更多信息

**编辑 ： -**

在评论区与你对话后，

**你的问题是 Joomla**

您通过将字符集 ISO-8859 放在网页中进行了测试，它的工作原理清楚地证明了您在 ISO 中而不是在 UTF-8 中获取内容

我认为您的mysql数据库可能不在UTF-8中，这就是为什么它将ISO文本发送到前面，您可以将数据库更改为UTF-8 general-ci或ISO latin1，这可行并且可行，我建议您将 DB 更改为 utf-8-general-ci，因为您已经有标头设置为 utf-8 的 html 页面，这将解决您的问题。

此外，如果您无法更改数据库，那么您已经知道它在 ISO 字符集中，因此将所有 Joomla 模板标题更改为 ISO 字符集。

看起来像这样

`<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">`

或者

在php中

```
header('Content-Type: text/html; charset=iso-8859-1'); 
```

通过删除现有的 charset utf-8 声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:06:45.600

试试下面的代码，它对我有用：

```
<?php
$message = "“Hello Colors“";
$message = iconv('UTF-8', 'ASCII//TRANSLIT', $message);
echo htmlentities($message);
?> 
```

结果：

```
&quot;Hello Colors&quot; 
```

# java - Java、XMLEvent 位置字符

> ID：15007961
> 
> 赞同：2
> 
> 时间：2013-02-21T16:57:04.330
> 
> 标签：java, stax

我正在使用 StAX XMLEventReader 解析以下字符串：

```
final String xmlstr = "<context><book><author>TheName</author></book></context>"; 
```

我正在观察该`event.getLocation().getCharacterOffset()`值并得到一些奇怪的行为：虽然 START_ELEMENT 的索引报告在元素声明之后的位置（例如，上下文元素的索引 9），但报告“TheName”的 CHARACTERS 事件在索引 32 上。 为什么？有没有办法纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:53:04.993

我从最新的jdk6到最新的jdk7时遇到了类似的问题。com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl 中似乎有一个错误。[getCharacterOffset() 返回不正确的值](https://stackoverflow.com/questions/12656824/getcharacteroffset-returns-incorrect-value)建议使用不同的 XML 解析器。

（从评论移到答案）

编辑：我对此进行了一些更系统的测试，并发现 jdk6 中的案例是错误的，而 jdk7 中的案例是正确的，*反之亦然*。有趣的是，行号和行列值在两个 jdk 中似乎是一致且正确的。

# soapui - 如何将响应中的值添加到 SoapUI 中的统计输出？

> ID：15007962
> 
> 赞同：0
> 
> 时间：2013-02-21T16:57:05.200
> 
> 标签：soapui

在 SoapUI 中，您可以通过单击统计图标来查看负载测试的统计信息。

从这里，您可以将结果导出到文件中。

目前它导出时间、线程、字节等。

有什么办法可以从响应中附加一个值到这个文件？

我想保留时间和线程等，但我想在响应中添加来自 XML 节点的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:05:12.787

您可以通过 groovy 脚本执行此操作。

*   在 soapUI 中的测试用例中添加一个 groovy 脚本步骤。
*   右键选择Get Data > Test Step > Response 和对应的字段，soapUI会自动为你创建代码如下（只有你使用pro版本，你可以这样做，否则你需要自己写代码）

    > ```
    > ${object1#Response#declare namespace ns2=\'http://namespace.suha.com\'; 
    > ```
    > 
    > //ns2:namespaceResponse[1]/方法名[1]}

此代码采用相应字段的值。

*   如下创建一个变量

    > def object1= context.expand( '${object1#Response#declare namespace ns2=\' [http://namespace.suha.com](http://namespace.suha.com) \'; //ns2:namespaceResponse[1]/methodname[1]}' )

*   到目前为止，您已经从响应消息中获取了所需字段的值，并使用该字段的值创建了一个变量。现在您可以将变量打印到日志中，如下所示。

> ```
>  `log.info (“object1")` 
> ```

*   您可以创建一个 .txt 文件并将变量写入该文件，如下所示。

    > ```
    > today = new Date()
    > sdf = new java.text.SimpleDateFormat("dd-MM-yyyy-hh-mm")
    > todayStr = sdf.format(today)
    > new File( "D:/" + todayStr + "report.txt" ).write(object1, "UTF-8" ) 
    > ```

# php - 有没有办法可以显示每个循环的前半部分，然后显示另一半？

> ID：15007966
> 
> 赞同：0
> 
> 时间：2013-02-21T16:57:12.883
> 
> 标签：php, for-loop, foreach

现在如何在每个循环中显示一半的行，然后再显示其余的行？for each 循环将打印 6 行，所以我想现在打印前 3 行，稍后打印 4-6 行。

我尝试使用一个while循环，但它不起作用，尝试将它放在里面和同一行的3个重复项。

```
$i = 1;
while($i <= 3) {
foreach ($items as $res) {
    $image = $res['image_name'];
    $id = $res['id'];
    //echo '<img src="/e-com/images/'.$image.'" />'; ?>

<tr>
    <td><?php echo $res['id']; ?></td>
    <td><?php echo $res['item_name']; ?> </td>
    <td><?php echo "£ ".$res['price']; ?> </td>
    <td><?php echo $res['category']; ?> </td>
    <td><?php echo $res['date_added']; ?> </td>
    <td><?php echo "<a href='http://localhost/e-com/index.php/product/to_edit/$id'   >Edit</a>";     ?></td>
    <td><?php echo "<a href='' onclick='dltCnfrm(\"$id\"); return false'>Delete</a>"; ?></td>
</tr>

    <?php $i++;
    } }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:00:15.190

签出`array_slice()`（[http://php.net/manual/en/function.array-slice.php](http://php.net/manual/en/function.array-slice.php)）作为一个选项。您可以将前三个元素拉出`$items`到他们自己的数组中，单独处理它们，然后在其他点拉出最后三个并处理它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:01:58.643

这个怎么样？

```
$first = array();
$second = array();
foreach ($items as $i => $res) {
    $image = $res['image_name'];
    $id = $res['id'];
    $html = "
<tr>
    <td>".$res['id']."</td>
    <td>".$res['item_name']."</td>
    <td>£ ".$res['price']."</td>
    <td>".$res['category']."</td>
    <td>".$res['date_added']."</td>
    <td><a href='http://localhost/e-com/index.php/product/to_edit/".$id."'   >Edit</a></td>
    <td><a href='' onclick='dltCnfrm(".$id."); return false'>Delete</a></td>
</tr>";
    if($i < 3) {
      $first[] = $html;
    } else {
      $second[] = $html;
   }
 }

echo implode("", $first); 

///few lines below

echo implode("", $second); 
```

# html - 如何使图像和顶部标题占据页面宽度的 100%？

> ID：15007970
> 
> 赞同：0
> 
> 时间：2013-02-21T16:57:31.270
> 
> 标签：html, css, image, position

我有以下代码：

```
 HTML: 

 <header class="top">
 <h1>CHCF</h1>
 </header>
 <div class="img">
 <img src="/chcf/backdrop.jpg" class="backdrop">
 </div>
 <div class="lower">
 <h1>Hello</h1>
 </div>

 CSS: 

 body {
 }
 h1 {
 color: #FFFFFF;
 text-align: center;
 }
 .top {
 background-color: #000000;
 left: 0px;
 position: absolute;
 top: 0px;
 width: 100%;
 }
 .backdrop {
 left: 0px;
 margin-top: 77px;
 position: relative;
 width: 100%;
 }
 .lower {
 background-color: #FFFFFF;
 color: #000000;
 margin-top: -300px;
 opacity: 0.7;
 overflow: hidden;
 position: absolute;
 width: 100%;
 } 
```

使用以下代码，我能够实现我想要的，即在图像顶部显示文本。但是，通过在 .backdrop 中使用 position:relative 使得图像和顶部标题不会占据页面宽度的 100%。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:32:23.273

From what I gathered from your code, I think this will help. The top, background, and lower are all 100% and now .backdrop can be relative

```
 body{
    padding:0px;
    margin:0px;
 }
 .background{
    position:absolute;
    width:100%;
 }
 .backdrop{
    width:100%;
 }
 .forground{
    z-index:3;
    position:absolute;
    width:100%;
 }
 .headerstuff{
    background-color:#ffffff;
 }
.top{
    width:100%;
}

 <div class="background">
 <img src="winter.jpg" class="backdrop">
 </div>

 <div class="forground">
     <header class="headerstuff top">
     <h1>CHCF</h1>
     </header>

     <div class="headerstuff lower">
     <h1>Hello</h1>
 </div>
 </div> 
```

# php - 将两张图片上传到 MySQL

> ID：15007972
> 
> 赞同：0
> 
> 时间：2013-02-21T16:57:37.433
> 
> 标签：php, mysql, image

我已成功上传一张图片，但无法处理多张图片。如何上传第二张图片？我是否在数据库中创建一个新字段并将其命名为 photo02，然后输入另一个名为 photo2 的表单输入。如何更改目标以上传和移动两个文件？

表格

```
Photo: <input type="file" name="photo" multiple>
Photo: <input type="file" name="photo" multiple> 
```

编码

```
$target = "upload/"; 
$target = $target . basename( $_FILES['photo']['name']);

$pic=($_FILES['photo']['name']); 

mysql_query("INSERT INTO `employees` VALUES ('$pic' )") ; 

if(move_uploaded_file($_FILES ['photo'] ['tmp_name'], $target)) 
{ 
require_once 'SimpleImage.php';
$image = new SimpleImage();
$image->load($target);
$image->resize(50,50);
$image->save($target); 
```

输出

```
echo '<b> Picture 1: </b>','<img src="/upload/' . $row->photo . '" border=1>';
echo '<b> Picture 2: </b>','<img src="/upload/' . $row->photo . '" border=1>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T21:41:55.557

在数组 $_FILES 上使用 foreach

```
if(isset($_FILES ['uploaded_files']))
{
     **foreach($_FILES['uploaded_files']['name'] as $key=>$value)**
     {
          if(is_uploaded_file($_FILES['uploaded_files']['tmp_name'][$key]) && $_FILES[['uploaded_files']['error'][$key] == 0)
          {
                $filename = $_FILES['uploaded_files']['name'][$key];
                $filename = time().rand(0,999).$filename;

                if(move_uploaded_file($_FILES['uploaded_files']['tmp_name'][$key], 'uploads/'. $filename))
                {
                      echo 'The file '. $_FILES['uploaded_files']['name'][$key].' was uploaded successful';
                }
                else
                {
                      echo 'There was a problem uploading the picture.';
                } 
          }
          else
          {
            echo 'There is a problem with the uploading system.';
          }
     }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:03:06.993

练习是一样的，你只需要放一个多重属性：

```
 <input type="file" name="photo" multiple> 
```

然后 $_FILES 数组将包含更多图片。

您可以使用 print_r($_FILES); 查看它

# r - 使用列名的字符向量访问 data.table 中的列

> ID：15007979
> 
> 赞同：8
> 
> 时间：2013-02-21T16:57:46.863
> 
> 标签：r, data.table

假设我有一个 R data.table：

```
 DT = data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9) 
```

我有一个列名的字符向量，我想提取或者更一般地操作：

```
cols = c("x","y") 
```

例如，我如何使用 cols 来生成等价的

```
 DT[,lapply(.SD[,list(x,y)], min) ] 
```

有没有办法使用 cols 向量指定 list(x,y) ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T17:06:26.140

您可以对变量使用“查找一级”（如在 Unix 终端中）的`data.table`语法：`..`

```
> all.equal(DT[,list(x,y)], DT[, ..cols])
[1] TRUE
> all.equal(DT[,.SD[,list(x,y)][min(v)]], DT[,.SD[ ,min(v)], .SDcols = cols])
[1] TRUE 
```

我相信FAQ 1.6下的更多细节：http: [//datatable.r-forge.r-project.org/datatable-faq.pdf](http://datatable.r-forge.r-project.org/datatable-faq.pdf)

# javascript - 可以使用 javascript/jquery/AngularJS 或其他方式操作 Chrome 应用程序“webview”dom

> ID：15007984
> 
> 赞同：1
> 
> 时间：2013-02-21T16:58:07.360
> 
> 标签：javascript, jquery, webview, angularjs, google-chrome-app

你好，Stack Over Flow Geniuses。我希望我有我希望是一个简单的问题。我正在创建一个打包的应用程序，并且可以访问我不需要用 JavaScript 解析但想从一个非常简单的 Jane 视图以新方式重新表示数据的数据。更容易接受的东西

所以我的问题是：

是否可以使用 java 脚本或 jquery 或 Angular 访问“Web 视图”（Chrome 打包应用程序对 Iframe 的回答）的 dom，并仅操纵投影在该 IFrame（Web 视图）中的数据的外观和感觉？

任何示例代码将不胜感激。

如果上述问题没有意义，我在这里提供了更详细的解释 ** 如果您不关心我为什么要这样设置，请忽略 **：

我有一个使用 ajax 为某些内部系统动态更新信息列表的页面。每个系统本质上只是以无组织的方式吐出数据。提供的信息非常......嗯......我该怎么说......平淡无奇哈哈。目标是从浏览器侧视图中删除它，以便不打开另一个选项卡；同时保持服务器端数据完整的功能和完整性。我特别需要我的团队能够仅在本地访问/操作数据视图，并从本质上提供更简单的数据视图并以另一种方式操作。这是为了确保每个部门的数据都可以重新格式化，而不会影响每个人对数据的看法，因为每个人都以不同的方式使用它。

我已经完成了 ajax 拉取并解析了数据，并且需要进行多次调用来刷新已经在服务器端完成的数据。我觉得通过 Web 表单实时加载页面并从那里操作数据以显示我想要的方式和位置会更容易。

任何有关如何轻松完成此任务的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T19:38:44.177

是的，您可以在 WebView 中调用 executeScript：

```
var wv = document.querySelector('webview');
wv.executeScript({code: "document.body.style.backgroundColor = 'black';"}) 
```

虽然这不是做你需要的最实用的方法。如果可能的话，我宁愿说服服务器端开发人员生成数据的 JSON 提要，并让您的 Packaged App XHR 将其放入并适当地格式化它。

**更新**：如果您只需要重新格式化 Webview 内容，您还可以使用更简单的[`insertCSS`](http://developer.chrome.com/extensions/tabs.html#method-insertCSS)方法：

```
var wv = document.querySelector('webview');
wv.insertCSS({code: "body { background-color: black;}"}) 
```

# jquery - jQuery 在dreamweaver 中运行良好，但在任何浏览器中都没有。怎么修？

> ID：15007989
> 
> 赞同：2
> 
> 时间：2013-02-21T16:58:19.297
> 
> 标签：jquery

当谈到使用 jQuery 时，我绝对是个新手。我正在编写代码并在 Dreamweaver 中对其进行测试。在我尝试在浏览器中运行它之前，它可以完美运行。jQuery 的目标是隐藏一个`<div>`，将文本附加到另一个`<div>`并显示`<div>`。我将所有的编码都放在一个名为 scripts.js 的文件中。

这个文件的内容是

```
$(document).ready(function() { //SignIn validation + content change

    $("#enter_email").hide();
    $("#enter_password").hide();
    $("#main2").hide();

    $("#signIn").click(function(event){
        var email = $("#Email").val();
        var password = $("#password").val();
        if(email == "" && password == "" )
            $("#enter_email").show().add("#enter_password").show(); 
        else if(email != "" && password == "")
            $("#enter_password").show();
        else if(email == "" && password != "" )
            $("#enter_email").show();
        else if(email == "admin" && password == "password")
            $("#login").hide().add("#register").hide().add("#displayUserName").text(', ' + email).add("#main2").show().remove("#register");
        else
        (overlay());
    }); 

    var now = new Date();
    var hours = now.getHours();
    var msg;
    if(hours<12)
        msg = "Good Morning";
    else if(hours<18)
        msg = "Good Afternoon";
    else
        msg = "Good Evening";
    $('#greeting').text(msg);

    //Control the look of selected catalog categories

    $(".shop-links1").click(function(){//Add category to selected
        $(".clear").show();
        $("#selected").show();
        $("#catalogNav1").hide();   
        $('div[class="shop-links1"]').add("#selected ul").append("<li><a class='selectedLinks' href=''>Category: " + $(this).text() + " </a></li>");        });

    $(".shop-links2").click(function(){//Add price to selected
        $(".clear").show();
        $("#selected").show();
        $("#catalogNav2").hide();   
        $('div[class="shop-links2"]').add("#selected ul").append("<li><a class='selectedLinks' href=''>Price: " + $(this).text() + " </a></li>");
        });

    $(".shop-links3").click(function(){//Add size to selected
        $(".clear").show();
        $("#selected").show();
        $("#catalogNav3").hide();   
        $('div[class="shop-links3"]').add("#selected ul").append("<li><a class='selectedLinks' href=''>Size: " + $(this).text() + " </a></li>");
        });

    $(".shop-links4").click(function(){//Add artist to selected
        $(".clear").show();
        $("#selected").show();
        $("#catalogNav4").hide();   
        $('div[class="shop-links4"]').add("#selected ul").append("<li><a class='selectedLinks' href=''>Artist: " + $(this).text() + "</a></li>");
        });

    $(".clear").click(function(){
        $(".clear").hide();
        $("#selected ul li:not(:first)").remove();
        $("#selected").hide();
        $("#catalogNav1").show();
        $("#catalogNav2").show();
        $("#catalogNav3").show();
        $("#catalogNav4").show();   
    });

    //Sort catalog

    $("#tops").click(function(){//Sort by tops
            $(".tops").show();
            $(".tunics").hide();
            $(".dresses").hide();
        });

        $("#tunics").click(function(){//Sort by tunics
            $(".tops").hide();
            $(".tunics").show();
            $(".dresses").hide();

        });

        $("#dresses").click(function(){//Sort by dresses
            $(".tops").hide();
            $(".tunics").hide();
            $(".dresses").show();
        });

});//End document.ready 
```

注释“//控制所选目录类别的外观”下的区域是我用来执行此操作的。

HTML头是

```
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/scripts.js"></script>

<!-- Unique title on each page to increase search engine optimisation.  Should always contain accurate information as well as some of the main focus areas. --> 
<title>Art on Fashion</title> 

<!-- Page description meta tag gives search engines a summary of what the page is about -->
<meta name="description" content="This site has been created and submitted in partial fulfilment of the BSc Hons Information and Communication Technologies course, it is a final year project that focuses on XHTML, PHP, JavaScript, SEO, MySQL, CSS and a Content Management System"/>

<link href="css/styles.css" rel="stylesheet" type="text/css" media="screen" />

</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:49:44.050

~~我不相信`href`留空是有效的 HTML。~~ 如果您使用 jQuery 拦截`click`锚标记的默认行为，请`<a>`使用`href="#"`.

不要忘记将[jQuery`preventDefault()`](http://api.jquery.com/event.preventDefault/)`click`放在每个处理函数的顶部，这将：

*   防止页面跳到顶部，
*   防止将哈希添加到 URL，
*   以及防止将哈希 URL 添加到浏览历史记录中。

jQuery：

```
$(".shop-links2").click(function(event){
   event.preventdefault();
   // your click handler code
}); 
```

HTML：

```
<a href="#" class="shop-links2 ..... 
```

# javascript - jQuery self = 这会重置点击

> ID：15007992
> 
> 赞同：0
> 
> 时间：2013-02-21T16:58:28.093
> 
> 标签：javascript, jquery, jquery-mobile, bing-maps

我有一段代码将 Bing 地图集成到 jQuery Mobile 框架中，如果不是每个标记中显示的文本，事情运行良好

标记显示在正确的位置，但是文本似乎更改为最后生成的标记之一

这是我的代码

```
for (var i = 0; i < locations.length; i++)
{
  marker_description = locations[i].description;
      marker_title = locations[i].title;
  var self = this;

  self.addMarker({'location': locations[i].lat +','+locations[i].long, 'bounds' : true })
  .click(function() {
      self.openInfoWindow({
        'title': marker_title,
        'description': marker_description
      }, this);
  });
} 
```

所以问题是当我点击每个标记时，打开的弹出窗口显示循环最后一项的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:59:39.467

当你定义的回调被调用时，你的变量已经改变了。

您可以通过立即执行的闭包来保护它们，如下所示：

```
for (var i = 0; i < locations.length; i++) {
   (function(i){
      var marker_description = locations[i].description; // be careful to use local variables
      var marker_title = locations[i].title;
      var self = this;
      self.addMarker({'location': locations[i].lat +','+locations[i].long, 'bounds' : true })
      .click(function() {
          self.openInfoWindow({
            'title': marker_title,
            'description': marker_description
          }, this);
      });
  })(i);
} 
```

请注意`var`我添加以使变量本地化。

# python - Image processing using Python and SciPy

> ID：15007998
> 
> 赞同：3
> 
> 时间：2013-02-21T16:58:43.050
> 
> 标签：python, numpy, scipy, python-imaging-library

I am trying to do image processing with Python. What I actually want to do is I have image with human and I need to indetify human faces or detect circle (basically human face). what I have done so far us

1.  I have done edge detection for image using sobel edge detection.

2.  Then I have converted image into binary image which saves binary image ad prints out array of the image which is 0 or 255 (Black and White)

3.  Now what I'm confused about after this what can I do to detect circle in image and print out how many human present in image.

4.  I am using still images so I am giving the input for the image

I am using Python, PIL, NumPy, and SciPy. I do not want to use OpenCV. I want to detect human face and count how many people are in image and then print out the number of people in image.

```
import numpy
import scipy
from scipy import ndimage

im = scipy.misc.imread('test5.jpg')
im = im.astype('int32')
dx = ndimage.sobel(im, 0)  # horizontal derivative
dy = ndimage.sobel(im, 1)  # vertical derivative
mag = numpy.hypot(dx, dy)  # magnitude
mag *= 255.0 / numpy.max(mag)  # normalize (Q&D)
scipy.misc.imsave('sobel.jpg', mag) 
```

The code above its not mine I got it from online.

I have also asked this question in other forum as well.[HERE](http://forums.devshed.com/showthread.php?p=2857698&mode=linear#post2857698)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:10:48.943

你想要做的是可以使用 scipy、numpy 和 sklearn。

首先你要收集很多人脸的数据，然后是很多不是人脸的随机数据。

因此，假设您有 2000 张人脸图像和 10000 张非人脸图像。然后您需要将它们全部加载，标准化它们的大小和强度，然后将它们传递给 SVM 进行分类。人脸照片的标签应该是1，非人脸的标签应该是0。

```
images = [image1, image2, image3... imagen]
labels = [0 1 1 ... 0] 
```

当你在上面构建了这个之后，你需要将它传递给一个 svm：

```
faceclassifier = SVC()
faceclassifier.fit(images, labels) 
```

在此处查看更多信息 [http://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html](http://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html)

然后在每个新的查询图像中获取所有带有滑动窗口的块，并将每个块通过 SVM。

如果 SVM 结果高，则将其分类为表示人脸的块，如果不是，则不是人脸。

一般来说，您无法使用图像处理技术构建准确的人脸检测器，您应该使用计算机视觉和机器学习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-06T05:46:47.063

好吧，您应该研究 Viola Jones 算法。opencv 库本身有一个很好的实现。这是目前用于检测图像中人脸的最佳算法之一。尽管当您倾向于制作深度架构时，会有更好的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T09:08:46.533

I agree with entropiece posted. Using computer vision and machine learning is the usual approach to problems like this.

However, if you still want to try and attempt using circle detection to this end, you might want to look into Circle Hough Transform. It's fairly straightforward to code, even from scratch if you don't want to use any other libraries.