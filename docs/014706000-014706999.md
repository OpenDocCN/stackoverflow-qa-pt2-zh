# StackOverflow 问答 14706000-14706999

# jquery - 更改网格 kendo ui 中过滤或排序列的颜色

> ID：14706001
> 
> 赞同：0
> 
> 时间：2013-02-05T11:05:03.020
> 
> 标签：jquery, colors, kendo-ui

嗨，我想更改已过滤或排序的列（剑道 ui 网格）的背景颜色。我想改变整列的颜色，而不仅仅是标题。有谁知道如何通过 css 类实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T23:09:54.300

我知道我在这个游戏上迟到了，但我在我正在构建的应用程序中也有这个要求，我想我会分享一个解决方案。突出显示单元格是很容易的部分 - 进入 Kendo 找出要突出显示*的*单元格是诀窍。我使用了@Atanas Korchev 的回复并对其进行了修改以防止它突出显示 Kendo 页脚：

```
var filterObj = $("#grid").data("kendoGrid").dataSource.filter;
if (filterObj.arguments && filterObj.arguments[0]) {
    filterObj.arguments[0].filters.forEach(function(val) {
        var index = $(".k-header[data-field='" + val.field + "']").index();
        $("#grid tr[role='row']").find("td:eq(" + index + ")").css("background-color", "red");
    });
} 
```

大警告 - 我在没有咨询 Kendo 文档（充其量是一个迷宫）的情况下完全自行对其进行了逆向工程，因此您不能*保证*在未来的版本中继续工作。我们至少暂时固定在我们的剑道版本上，所以它对我们有用（现在）。另外，我没有花足够的时间来真正理解为什么“参数”列表中只有一个对象 - 如果您的用例或配置是以某种方式不同（再次，在我的本地场景中，它似乎从未超过 1 个参数，这让我有点紧张）。无论如何，这只是一个 .forEach ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:19:42.687

您可以找到第 n 个单元格（对应于过滤列的索引）并设置它们的 CSS 样式：

```
$("#grid tr").find("td:eq(1)").css('background', 'grey'); 
```

这会将每隔一个单元格的背景设置为灰色。这是一个现场演示：

[http://jsbin.com/ixozad/1/edit](http://jsbin.com/ixozad/1/edit)

# sql - 如何使用基于自定义（egXML）文件的 SSIS 导入选择性表

> ID：14706003
> 
> 赞同：2
> 
> 时间：2013-02-05T11:05:03.253
> 
> 标签：sql, sql-server, oracle, ssis, data-migration

我的 oracle 数据库中有大约 1200 个表，需要将它们导入 SQL Server 数据库。但我想以这样一种方式配置导入，即在任何给定的导入中，我应该能够选择需要导入的表。

因此，我有一个自定义 XML 文件，其中列出了所有表和每个表的标志，指示是否要导入该表。我还创建了包来导入*所有*表，并且想修改它以检查表是否要在运行时从 XML 文件中导入。

我正在考虑实现类似 given [here](http://www.simple-talk.com/sql/ssis/xml-configuration-files-in-sql-server-integration-services/)的东西，但不想为这么多表执行此操作，也不知道它是否可以完成这项工作。

我怎样才能解决这个问题？我可以为此使用 SSIS 配置文件吗（虽然不确定）？有什么方法可以在运行时读取 XML 并基于 XML 文件（或任何其他具有键值对的文件）导入表。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:12:28.747

看起来工作量很大，但这就是我的方法：

1.  为每个需要导入的表创建一个包 - 所以 1200 个包。
2.  将包名称与标志列一起存储在元数据表中，指示是否需要执行包。
3.  创建父包。
4.  在父包中添加执行sql任务。像这样的 SQL 命令：`select PackageName from metadataTable where Flag =1`检索需要执行的包的列表。
5.  将结果集映射到对象变量。
6.  为每个循环容器添加一个。
7.  在 for each 循环容器中添加执行包任务，并参数化包名称属性。

整个设置读取需要执行的包，并一个接一个地执行它们。

如果您喜欢这种方法，请查看 Andy Leonard 的[SSIS 框架](http://sqlblog.com/blogs/andy_leonard/archive/2011/09/16/designing-an-ssis-framework.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T15:49:13.270

塞缪尔万加有一个可靠的方法。我唯一想做的就是使用一些东西以编程方式生成这 1200 个包。

根据您对 SSIS 对象模型和一般 .NET 开发的熟悉程度，如果您喜欢编码，我会研究[EzAPI 。](http://sqlsrvintegrationsrv.codeplex.com/releases/view/21238)

否则，请查看[BIML](http://www.varigence.com/documentation/biml/)和 BIDSHelper 的[包](http://bidshelper.codeplex.com/)[生成](http://bidshelper.codeplex.com/wikipage?title=Biml%20Package%20Generator)功能。您不需要 Mist 的许可来创建您的 BIML 脚本，您可以浏览[BIMLScript](http://bimlscript.com/)上的现有脚本并解决您的大部分需求。复制、粘贴、生成。

# ios - 在 iOS 中计算 UIBezierPath 帧

> ID：14706005
> 
> 赞同：0
> 
> 时间：2013-02-05T11:05:08.173
> 
> 标签：ios, objective-c, uibezierpath

我使用 UIBezierPath 实现了一个自由手绘模块，但我想在完成绘制后获得曲线的所有帧，我该怎么做。

如果有办法获得连接路径的路径点，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:40:04.487

您的问题并不完全清楚，但是如果您想要 a 的边界矩形`UIBezierPath`，则有一个`bounds`属性。

如果您想知道连接另一条路径的最后一个点的位置，则有该`currentPoint`属性。

如果你想检查路径的不同部分，你必须深入到底层`CGPath`和`CGPathApply`函数。

如果你想测试一个点是否在路径内（将被填充），你可以使用该`containsPoint:`方法，如果你想测试一个点是否是路径的一部分，你必须自己使用 Bézier 进行数学运算公式...

# css - 在桌面版和移动版网站之间切换的策略

> ID：14706011
> 
> 赞同：2
> 
> 时间：2013-02-05T11:05:14.687
> 
> 标签：css, responsive-design, media-queries

现在研究了几个小时，我想找到一个聪明的解决方案，让用户有机会切换到网站当前移动版本的桌面版本。

从技术上讲，我要么有一个专门的移动站点，要么有一个带有媒体查询的站点，这使得设计负责。

对我来说，具有响应式设计的单一网站的最后一个选择是非常有趣的。

1.) 你能想到什么方法来操纵用户的设计？

2.) 它应该在服务器端还是客户端？优点缺点？

3.) 您对可能的解决方案有哪些经验？

我知道那里已经有一些问题......

[https://stackoverflow.com/questions/11146768/switching-between-mobile-and-desktop-site](https://stackoverflow.com/questions/11146768/switching-between-mobile-and-desktop-site)

[从移动版切换到完整网站（桌面版）](https://stackoverflow.com/questions/11314944/switch-from-mobile-version-to-full-website-desktop-version-solved)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:07:43.200

最简单的 CSS 修复将是：例如：

```
#wrap {
 width: 1020px;
}

@media only screen and (max-width: 900px) { /* Screen which has a maximum width of 900px */

  #wrap {
    width: 500px;
  } 

} 
```

# java - 如何在不杀死 VM 的情况下关闭和重新打开 Spring Data Neo4J 上下文

> ID：14706012
> 
> 赞同：7
> 
> 时间：2013-02-05T11:05:16.457
> 
> 标签：java, spring-mvc, neo4j, spring-data, spring-data-neo4j

我正在运行一个 spring data neo-4j 应用程序（不是基于 Web 的），它在正常操作期间工作正常。

如果我关闭 Spring Context 'ctx.close()'，neo 4J 数据库上的锁就会消失。

然后，从应用程序的同一个实例中，如果我获取另一个上下文，我会看到锁回来了，但是如果我尝试从该上下文中读取/写入该数据库，我会收到一个错误：

```
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.data.neo4j.config.Neo4jConfiguration#0': Unsatisfied dependency expressed through bean property 'conversionService': : Error creating bean with name 'mappingInfrastructure' defined in class org.springframework.data.neo4j.config.Neo4jConfiguration: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public final org.springframework.data.neo4j.support.MappingInfrastructureFactoryBean org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$64cefd6f.mappingInfrastructure() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'typeRepresentationStrategyFactory' defined in class org.springframework.data.neo4j.config.Neo4jConfiguration: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public final org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$64cefd6f.typeRepresentationStrategyFactory() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'graphDatabaseService': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.neo4j.kernel.EmbeddedGraphDatabase]: Constructor threw exception; nested exception is java.lang.IllegalStateException: Unable to lock store [C:\app_data\gelato\data\neostore], this is usually a result of some other Neo4j kernel running using the same store.; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingInfrastructure' defined in class org.springframework.data.neo4j.config.Neo4jConfiguration: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public final org.springframework.data.neo4j.support.MappingInfrastructureFactoryBean org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$64cefd6f.mappingInfrastructure() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'typeRepresentationStrategyFactory' defined in class org.springframework.data.neo4j.config.Neo4jConfiguration: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public final org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$64cefd6f.typeRepresentationStrategyFactory() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'graphDatabaseService': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.neo4j.kernel.EmbeddedGraphDatabase]: Constructor threw exception; nested exception is java.lang.IllegalStateException: Unable to lock store [C:\app_data\gelato\data\neostore], this is usually a result of some other Neo4j kernel running using the same store. 
```

有没有办法在应用程序的单个实例中成功关闭然后重新打开应用程序上下文（即不关闭虚拟机）？

我最初在图形数据库上调用了 shutdown()，但改变了这一点，因为 Michael Hunger 告诉我不要这样做。

我们的问题可以像这样在我们的域中重现。

```
AbstractApplicationContext ctx = new FileSystemXmlApplicationContext("neo4jconfig.xml");
OurDomainService domainService = (OurDomainService) ctx.getBean(OurDomainServiceImpl.class);
// This works
domainService.save(data);
// this releases the lock
ctx.close();
// this re-creates the lock and the context looks actvive
ctx = new FileSystemXmlApplicationContext("neo4jconfig.xml");
domainService = (OurDomainService) ctx.getBean(OurDomainServiceImpl.class);
// this errors out
domainService.save(data); 
```

这是我们用来创建上下文的 XML 文件。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context.xsd
http://www.springframework.org/schema/data/neo4j
http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx.xsd">

<context:spring-configured/>
    <context:annotation-config/>
    <context:component-scan base-package="OurData" />

    <neo4j:config storeDirectory="c:/app_data/data"/>
    <neo4j:repositories base-package="OurData"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:59:32.577

您不应该这样做，在您的情况下，spring-context 应该处理生命周期。

在您的情况下重新启动时会发生什么？

您关闭应用程序上下文

```
ctx.close() 
```

您可能应该使用 WebApplicationContext(Utils) 通过 web.xml 获取配置的 Spring Context。像这样：

```
WebApplicationContext springContext = 
    WebApplicationContextUtils.getWebApplicationContext(getServletContext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:17:59.930

查看我的最后评论和您的回复已经编辑了我的完整答案。

下面的两个主要文件。

第一个使用`WrappingNeoServerBootstrapper`

Neo4j 服务器的引导程序，采用已实例化的 {@link org.neo4j.kernel.GraphDatabaseAPI} 和可选配置，并使用该数据库启动服务器。使用它从已经使用 {@link EmbeddedGraphDatabase} 或 {@link HighAvailableGraphDatabase} 的应用程序中启动完整的 Neo4j 服务器。这为您的应用程序提供了服务器 REST API、Web 管理界面和统计跟踪的全部优势。

```
package sandbox;

import org.neo4j.server.WrappingNeoServerBootstrapper;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.neo4j.support.Neo4jTemplate;

public class GalaxyServiceTest {

    private final static Logger slf4jLogger = LoggerFactory.getLogger(GalaxyServiceTest.class);
    @Autowired
    private GalaxyService galaxyService;
    @Autowired
    private Neo4jTemplate template;

    public static void main(String args[]) throws InterruptedException {
        GalaxyServiceTest main = new GalaxyServiceTest();
        ApplicationContextLoader loader = new ApplicationContextLoader();
        loader.load(main, "/spring/helloWorldContext.xml");
        // The server starts with loading of above Context.xml
        WrappingNeoServerBootstrapper neoServer = loader.getApplicationContext().getBean("serverWrapper", WrappingNeoServerBootstrapper.class);
        //process something in repository 
        main.doSomething();
        // do a graceful stop
        int stop = neoServer.stop(0);
        slf4jLogger.info("stopping Server status code {} ", stop);
        //Restart the server 
        neoServer.start();
        slf4jLogger.info("Restarting Server ");
        // Process something in Repository
        main.doSomething();

    }

    public void doSomething() {
        galaxyService.makeSomeWorlds();
        Iterable<World> allWorlds = galaxyService.getAllWorlds();
        for (World world : allWorlds) {
            slf4jLogger.info("World Name is {}", world.toString());
        }
    }
} 
```

应用程序上下文定义xml

```
 <context:annotation-config />
    <context:spring-configured/>
    <context:component-scan base-package="sandbox" />

    <bean id="transactionManager" 
          class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManager">
            <bean id="jotm" class="org.springframework.data.neo4j.transaction.JotmFactoryBean"/>
        </property>
    </bean>
    <neo4j:config graphDatabaseService="graphDatabaseService" />
    <bean id="serverWrapper" class="org.neo4j.server.WrappingNeoServerBootstrapper"
          init-method="start" destroy-method="stop">
        <constructor-arg ref="graphDatabaseService" />
    </bean>

    <bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase" 
          destroy-method="shutdown">
        <constructor-arg value="target/test-db"/>
    </bean>
    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>

    <neo4j:repositories base-package="sandbox"></neo4j:repositories>

</beans> 
```

我希望这有帮助。

# codeigniter - 如何结合策略和 mvc 模式

> ID：14706015
> 
> 赞同：1
> 
> 时间：2013-02-05T11:05:21.723
> 
> 标签：codeigniter, model-view-controller, uml, software-design, class-diagram

我正在尝试制作我的项目类图。在我的项目中，文本内容被转换为视觉效果，我使用了视觉效果的策略和工厂模式，但目前我在服务器端使用 php 代码点火器，我不太了解类图中的 mvc 模式。所以我的问题是如何将它们结合起来？![在此处输入图像描述](../Images/c72f028024ac3afe1e5f7595e1bb23cb.png)

编辑：IVisual 在这里用于战略模式（时间线、地理位置、关系表都是策略），VisualFactory 用作创建任何类型视觉的工厂类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:32:33.683

MVC 旨在将您的模型（数据）、视图（呈现的 html）和控制器（请求/响应引擎，在您的情况下为 php 控制器）之间分离。

您的视图将包含所有承载数据的类，例如，您将需要一个或多个承载国家 XYZ 地理位置的类是纬度：XX 和经度：YY

您的控制器只是模型和视图之间的网关。例如，控制器会收到一个对[http://myapp.com/page1](http://myapp.com/page1)的请求，然后控制器连接数据库，带上一个模型并将其传递给视图，然后视图将识别您需要表示地理位置数据并将呈现 html。

MVC 处于更高层次的软件设计中，通常嵌入在您使用的框架中

希望能帮助到你，

# java - 在 JSP 页面上访问 JSTL 中的嵌套对象

> ID：14706019
> 
> 赞同：2
> 
> 时间：2013-02-05T11:05:26.670
> 
> 标签：java, spring, jsp, nested, jstl

**我有两节课：**

让我们说

```
class ABC{

private String a,b;

public void setA(String a){
this.a = a;
}

public void setB(String b){
this.b = b;
}

public String getA(){
return this.a;
}

public String getB(){
return this.b ;
}

}

class XYZ{

private ABC abc;

public void setABC(ABC abc){
this.abc = abc;
}

public ABC getABC(){
return this.abc;
}

} 
```

类 XYZ 具有类 ABC 属性。

我想在 JSTL 的帮助下
以这种方式访问​​ JSP 页面之一中的类 ABC 属性的 a 或 b

```
${XYZ.ABC.A} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:17:51.580

要在 JSP 中引用 bean 需要将对象放入请求中。

```
request.setAttribute("xyz", xyz); 
```

然后通过`${xyz.abc.a}`JSP 访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:09:53.747

可以使用 JSTL 标签。试试这个 ${XYZ object name.abc.a}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:10:17.287

代替

```
public void setABC(ABC abc){
this.abc = abc;
}

public ABC getABC(){
return this.abc;
} 
```

采用

```
public void setAbc(ABC abc){
this.abc = abc;
}

public ABC getAbc(){
return this.abc;
} 
```

使用此 JSTL 语法 ${XYZ.abc.a} 检索信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-20T14:56:18.730

我看到这个问题出现了很多，所以我添加了明确的语法，并在最后添加了一个示例。

第一个问题是，据我所知，您不能轻松地将多个模型添加到表单中。

```
modelAttribute="productDTO" //is okay

modelAttribute="productDTO, vatDTO" //doesn't work 
```

不像其他海报说的，只是尝试

```
${A.B.C} 
```

如果 B 是需要自己的模型的对象，也将不起作用。简单的解决方案不是创建一个特殊的 DTO 来容纳所有额外的对象，而是向您的“productDTO”类添加一个额外的“getter”方法，该方法只返回一个字符串代码或其他简单类型：

```
 public class ProductDTO implements Serializable {

       private static final long serialVersionUID = -5974170234812308892L;
       VatCode vatCode; //an object

       public String getVatCodeAsString() {
           return vatCode.getVATCode(); //useful if it's a code or something flat
       }

       public VatCode getVatCode() {
           return vatCode(); //the JSP won't know what this model is
       } 
```

然后你可以在你的jsp页面中访问这个方法：

```
value="${productDTO.vatCodeAsString} 
```

我使用它，我可以保证它有效。

* * *

但是，如果您需要访问复杂的对象，则语法如下：

在您的控制器中：

```
 ProductAdminWebDTO productAdminWebDTO = new ProductAdminWebDTO();
 productAdminWebDTO.setProductDTO(productService.getProductByID(prodNo)); 
 modelAndView.addObject("productAdminWebDTO", productAdminWebDTO); 
```

其中 ProductAdminWebDTO 包含：

```
private ProductDTO productDTO; 
```

ProductDTO 包含：

```
 private String productName; //(make sure to add correct getter, setters) 
```

在您的 JSP 中：

```
 <form:form method="post" id="viewForm"
               action="GET" modelAttribute="productAdminWebDTO">

<form:input path="productDTO" id="productDTO" type="text" value="${productAdminWebDTO.productDTO.productName}"/> 
```

请注意，顶级元素是“productAdminWebDTO”，但在路径中，您只添加与包含的变量对应的元素。但是完整的路径，（正如其他海报所指出的），在价值。

# ios - 用于越狱 iOS 设备的批处理/Bash 脚本

> ID：14706025
> 
> 赞同：0
> 
> 时间：2013-02-05T11:05:49.377
> 
> 标签：ios, scripting, batch-file

所以我有一部越狱的 iPhone，想在我的手机上自动执行一些任务，但我更愿意自己做，而不是下载可以实现相同功能的调整或应用程序。

我没有Mac电脑，所以开发应用程序和/或调整将是一件痛苦的事，从我读过的内容来看，所以我开始考虑批处理文件。以及可用于在 Windows 中自动执行操作的文件`.js`。`.vbs`

iOS 是否有与批处理文件脚本类似或等价的功能？在我的手机上启动该脚本文件后，我可以编写一个可以在我的 iPhone 上执行简单任务的脚本吗？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:11:06.757

是的，越狱手机可以访问 bash，因此您可以创建 bash 脚本文件。

[请参阅此处](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html)了解如何开始编写 bash 脚本。您将其写入文件（通常以 结尾`.sh`），使其可执行（通过`chmod +x scriptFile.sh`），然后运行它（`./scriptFile.sh`）。还可以访问 Ruby 和 Python，因此如果您愿意，也可以使用这些语言编写脚本。

您也不需要在设备上编写脚本，您可以在您的 PC 上编写它们，并通过 SCP 传输文件。这有点复杂，因为您需要安装 SSH（**并确保更改默认密码，有一个关于如何通过 Cydia 的指南**）和其他工具才能复制它们。

# java - 在 Spring applicationContext.xml 中使用 P6Spy 和数据源

> ID：14706029
> 
> 赞同：4
> 
> 时间：2013-02-05T11:06:01.503
> 
> 标签：java, spring, hibernate, logging, p6spy

我使用 Hibernate 4、Spring 3、JSF 2.0 和 Weblogic 10.3.6 作为服务器。

我在 Weblogic 服务器上创建了数据源，在 applicationContext.xml 中我将数据源定义为

```
<!-- Data Source Declaration -->    
    <bean id="DataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/​myDS"/>   
</bean> 
```

如果我想使用 P6Spy 来记录 SQL 参数，我应该如何以及在何处在 applicationcontext.xml 中添加以下内容？

```
 <property name="hibernate.connection.driver_class">com.p6spy.engine.spy.
  P6SpyDriver</property> 
```

任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-15T06:12:06.850

The easiest way to integrate p6spy using spring is to use the P6DataSource class. The P6DataSource class is just a proxy for the real data source. This lets you obtain the real data source using any of the spring data source factory implementations.

```
<bean id="dataSource" class="com.p6spy.engine.spy.P6DataSource">
  <constructor-arg>
    <bean id="DataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
      <property name="jndiName" value="jdbc/​myDS"/>   
    </bean>
  </constructor-arg>
</bean> 
```

If you are using an XADatasource, just change the classname to P6ConnectionPoolDataSource as shown below. Note: P6ConnectionPoolDataSource implements the ConnectionPoolDataSource and XADataSource interfaces.

```
<bean id="dataSource" class="com.p6spy.engine.spy.P6ConnectionPoolDataSource">
  <constructor-arg>
    <bean id="DataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
      <property name="jndiName" value="jdbc/​myDS"/>   
    </bean>
  </constructor-arg>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T09:22:13.893

您需要在 applicationContext.xml 文件中创建会话工厂的 bean，如下所示：

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>
    </bean>
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.p6spy.engine.spy.
  P6SpyDriver" />
        <property name="url" value="jdbc\:mysql\://localhost\:3306/testdb" />
        <property name="username" value="my_username" />
        <property name="password" value="my_password" />
    </bean> 
```

有关 P6Spy 库的更多信息，请参阅：[http ://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-solution/。](http://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-solution/)

我们可以省略“dataSource”bean，直接写属性。参考：[如何为 sql server 配置休眠配置文件](https://stackoverflow.com/questions/3585544/how-to-configure-hibernate-config-file-for-sql-server)

# c# - 与 Internet 断开连接时卡在 UploadFromStream

> ID：14706033
> 
> 赞同：0
> 
> 时间：2013-02-05T11:06:10.100
> 
> 标签：c#, winforms, azure, try-catch

我有一个 try/catch 方法，如下所示。当互联网连接断开时，try 中的代码阻塞，不进入 catch，应用程序停止响应。当互联网连接恢复时，问题就消失了，一切正常。

这是我的代码的一部分：

```
using (var fileStream = System.IO.File.OpenRead(strLocatie))
{
    try
    {
        blobSAS.UploadFromStream(fileStream);
    }
    catch
    {
    }
} 
```

我可以设置一个超时，以便当 try 块花费超过 1000 毫秒时，代码会自动进入 catch 吗？

整体方法：

```
public void uploadImages(string strLocatie, string naamBestand, string directoryname)
{
    try
    {
        string dag = DateTime.Now.Day.ToString();
        if (dag.Length == 1)
        {
            string temp = dag;
            dag = "0" + temp;
        }
        string maand = DateTime.Now.Month.ToString();
        if (maand.Length == 1)
        {
            string temp = maand;
            maand = "0" + temp;
        }
        if (signature == null)
        {
            getKey();
        }
        string datum = dag + "-" + maand + "-" + DateTime.Now.Year.ToString();
        CloudBlobClient blobClient = new CloudBlobClient(sUrl, new StorageCredentialsSharedAccessSignature(signature));
        CloudBlobContainer blobContainer = blobClient.GetContainerReference(container1);
        blobContainer.GetDirectoryReference(sUrl + container1);
        CloudBlockBlob blobSAS = new CloudBlockBlob(sUrl + container1 + "/" + directoryname + "/" + datum + "/" + naamBestand,
                        new StorageCredentialsSharedAccessSignature(signature));
        using (var fileStream = System.IO.File.OpenRead(strLocatie))
        {
            try
            {
                blobSAS.UploadFromStream(fileStream);
            }
            catch
            {
            }
        }
        File.Delete(strLocatie);
    }
    catch
    {
    }

} 
```

如果互联网连接已经断开，在启动应用程序之前，catch 工作完美......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:25:13.607

您可以在 blobClient 上设置超时

```
 var storageAccount = CloudStorageAccount.Parse("DefaultEndpointsProtocol=https;AccountName=<YOURACCOUNTNAME>;AccountKey=<YOURACCOUNTKEY>");
_blobClient = storageAccount.CreateCloudBlobClient();
_blobClient.Timeout = new System.TimeSpan(1,0,0); 
```

然后，您还可以设置似乎将副本分布在多个线程中的并行设置。如果你有大带宽，你可以增加下面的线程数，因为 Azure 接受以任何到达顺序分解成块的 blob。

```
_blobClient.ParallelOperationThreadCount = 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:25:28.190

您可以在与 关联的上为请求指定[超时](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblobclient.timeout.aspx)。默认值为 90 秒。`CloudBlobClient``CloudBlockBlob`

CloudBlockBlob 提供了`ServiceClient`访问 CloudBlobClient 实例的属性

但我不确定这是否能解决您的问题。

您也可以尝试使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblob.enduploadfromstream.aspx)将您的流上传到云端，以便您的应用程序负责并在后台上传数据。

CloudBlockBlob 类也提供方法[BeginUploadFromStream](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblockblob_methods.aspx)和[EndUploadFromStream](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblob.enduploadfromstream.aspx)来异步上传数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:25:39.763

您必须设置 CloudBlockBlob 的 blobrequestoptions。在这里您可以设置超时。但是，最好在后台工作人员中上传文件。这样，您的应用程序始终是响应式的。

[blobrequestoptions](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.blob.blobrequestoptions.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:26:13.570

从重载调用到 s中有一个[timeout 属性`BlobRequestOption`](http://msdn.microsoft.com/sv-se/library/microsoft.windowsazure.storageclient.blobrequestoptions.timeout%28en-us%29.aspx)`UploadFromStream`。

是否可以指定超时，例如：

```
BlobRequestOptions blobRequestOptions = new BlobRequestOptions();
blobRequestOptions.Timeout = TimeSpan.FromSeconds(20.0)
blobSAS.UploadFromStream(fileStream, blobRequestOptions); 
```

# android - 外部 Micro SD 卡中的 SQLite 数据库

> ID：14706036
> 
> 赞同：1
> 
> 时间：2013-02-05T11:06:21.897
> 
> 标签：android, sqlite

我想知道。

我的标签中有一张外部微型 SD 卡。

我想在我的 Micro sd 卡中创建一个 SQLite 数据库。

```
public static final String  DATABASE_FILE_PATH = "/extSdCard"; 
```

我正在提供外部 micro sd 卡的路径，但显示错误。

```
Unable to open Database 
```

是否可以在外部存储卡中创建数据库？

更新：-

```
public static final String  DATABASE_FILE_PATH = "/extSdCard";
    public static final String  DATABASE_NAME = "mytest";

public SDcardDatabase(final Context context) {
        super(context,DATABASE_FILE_PATH +  DATABASE_NAME, null, 1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:29:37.320

我们可以通过这个给定的路径在外部 sdcard 中创建数据库。

```
"/mnt/externalSDcard/dbname" 
```

有关详细信息，请检查：-

[三星 Tab2 中的 SQLite 数据库（外部 Micro sd 卡）](https://stackoverflow.com/questions/14727006/sqlite-database-in-samsung-tab2-external-micro-sd-card/14744166#14744166)

[https://android.stackexchange.com/questions/33182/why-is-the-sd-card-mounted-to-sdcard-external-sd-instead-of-sdcard-or-m](https://android.stackexchange.com/questions/33182/why-is-the-sd-card-mounted-to-sdcard-external-sd-instead-of-sdcard-or-m)

# sql - 从同一个表中获取单列记录

> ID：14706038
> 
> 赞同：0
> 
> 时间：2013-02-05T11:06:34.140
> 
> 标签：sql, sql-server, sql-server-2008

我在从我的数据表中检索记录时遇到了一些问题。有人可以给我任何建议吗？

```
Id LearnerId ConnectionId  IsApproved   
3   1            38       1
5   39           1        1 
7   1            31       1 
13  1            30       1 
31  1            40       1 
34  41           1        1 
35  31           1        1 
39  1            42       1 
```

这就是我的桌子的样子。我想使用该表上的选择查询来选择如下记录：

```
AllId
38
39
31
30
40
41
31
42 
```

如何编写查询以找到上述记录列表？我想收集除 1 以外的所有 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:10:24.577

您可以`UNION ALL`在两个查询之间使用 a。第一个将返回`connectionid`值，第二个将返回`learnerid`值：

```
select ConnectionId as AllId
from LearnerConnections
where LearnerId = 1
union all
select LearnerId as AllId
from LearnerConnections
where ConnectionId = 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/9db95/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:10:33.670

```
SELECT CASE LearnerId
            WHEN 1 THEN ConnectionId
            ELSE LearnerId
       END AS AllId
FROM tablename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:09:41.097

```
select  Id
from    YourTable
union all
select  LearnerId
from    YourTable
union all
select  ConnectionId
from    YourTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:10:52.840

```
SELECT  Id AS AllId
FROM    YourTable
union all
SELECT  LearnerId AS AllId
FROM        YourTable
union all
SELECT  ConnectionId AS AllId
FROM        YourTable 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T11:46:40.020

```
SELECT LearnerId AS AllId FROM tableName
WHERE ConnectionId = 1
UNION
SELECT ConnectionId AS AllId FROM tableName
WHERE LearnerId = 1 
```

# extjs - 单击复选框列时限制行编辑器

> ID：14706039
> 
> 赞同：1
> 
> 时间：2013-02-05T11:06:41.487
> 
> 标签：extjs, extjs4.1

我有一个带有 CheckBoxColumn 和 RowEditor 插件的网格，该插件配置了 clicksToEdit: 1

**单击 CheckBoxColumn 时，如何防止 RowEditor 打开？**因为我一次不能选择多于一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:51:21.667

RowEditor 有 'beforeedit' 事件。这个事件的第二个参数是一个编辑事件对象——e。

编辑事件对象有一个属性“取消” - 将其设置为 true 以取消编辑或从您的处理程序返回 false。

因此，我们可以将其设置为 'true' 或 'false' 来禁用或启用 RowEditor：

```
 {
        xtype: 'checkbox',
        fieldLabel: 'Disable row Editor',
        listeners: {
            change: function(cb) {
                var editor = cb.up('grid').editingPlugin;
                editor.on({
                    beforeedit: function(plugin, e) {
                        e.cancel = cb.checked;
                    }
                });
            }
        }
    } 
```

请参阅 jsfiddle 上的实时示例：http: [**//jsfiddle.net/p7Vzu/**](http://jsfiddle.net/p7Vzu/)

# java - J2SSH ChannelInputStream 读取方法被 tail -f 锁定

> ID：14706040
> 
> 赞同：1
> 
> 时间：2013-02-05T11:06:41.427
> 
> 标签：java, bash, tail, j2ssh

J2SSH ChannelInputStream 读取方法能够从命令中获取输出。但是，如果我尝试通过 J2SSH 执行“tail -f file.txt > output.txt &”（bash），读取方法会被锁定。我认为这是因为在“tail -f”中没有可读取的输出......

好吧，我要做的是在后台启动“tail -f”，读取 bash 输出以确保“tail”已正确启动（没有从 bash 收到退出代码错误）并按照我的流程java 代码（是的，tail -f 将继续在操作系统中运行）。但是，我被锁定在 (ChannelInputStream) 读取方法中，等待输出，可能来自 tail -f...

如果我杀掉tail -f 进程，代码流就恢复正常了。这意味着（ChannelInputStream）读取方法不适用于“tail -f”。

有什么建议么？有什么方法可以将 bash 中的内容发送到 read 方法以跟随流程？

```
 while  ((bytesRead = stream.read(buffer,0,buffer.size()-1)) > 0){ ... 
```

“流是 ChannelInputStream 类型”

# haskell - 从元组列表中获取唯一路径

> ID：14706041
> 
> 赞同：3
> 
> 时间：2013-02-05T11:06:42.457
> 
> 标签：haskell, functional-programming

给定一个列表元组，我需要从中找到所有唯一路径：

```
Example I/P: [(1,2),(2,3),(3,4),(9,11),(4,5),(5,6),(6,7),(3,9)]
O/P: [[(1,2),(2,3),(3,4),(4,5),(5,6),(6,7)],[(1,2),(2,3),(3,9),(9,11)]] 
```

如果元组的第二个元素与另一个元组的第一个元素匹配，则两个元组可以连接，即：一个元组是`(_,a)`，另一个元组是 like `(a,_)`。

对此最有效的实施是什么？我需要找到最适合它的数据结构。有什么建议么 ？我将在其中执行算法的元组数量将超过 400,000。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:18:01.397

```
{-# LANGUAGE NoMonomorphismRestriction #-}
import Data.List (permutations, nub)

path :: Eq a => [(a, a)] -> [(a, a)]
path [] = []
path [x] = [x]
path (u@(_, a):v@(b, _):xs) = if a == b then u:path (v:xs) else [u]

allPaths = nub . map path . permutations 
```

（您可以优化链生成，但我认为这个问题具有指数时间复杂度）

**已编辑**

通常，您必须更精确地定义要返回的路径。

忽略循环不变量 ([(1,2),(2,3),(3,1)] == [(2,3),(3,1),(1,3)]) 可以生成所有路径（不使用排列）

```
{-# LANGUAGE NoMonomorphismRestriction #-}
import Data.List (permutations, nub, sortBy, isInfixOf)

data Tree a = Node a [Tree a] deriving Show

treeFromList :: Eq a => a -> [(a, a)] -> Tree a
treeFromList a [] = Node a []
treeFromList a xs = Node a $ map subTree $ filter ((a==).fst) xs
  where subTree v@(_, b) = treeFromList b $ filter (v/=) xs

treesFromList :: Eq a => [(a, a)] -> [Tree a]
treesFromList xs = map (flip treeFromList xs) $ nub $ map fst xs ++ map snd xs

treeToList :: Tree a -> [[a]]
treeToList (Node a []) = [[a]]
treeToList (Node a xs) = [a:ws | ws <- concatMap treeToList xs]

treesToList :: [Tree a] -> [[a]]
treesToList = concatMap treeToList

uniqTrees :: Eq a => [[a]] -> [[a]]
uniqTrees = f . reverse . sortBy ((.length).compare.length)
  where f [] = []
        f (x:xs) = x: filter (not.flip isInfixOf x) (f xs)

allPaths = uniqTrees . treesToList . treesFromList 
```

然后

```
*Main> allPaths [(1, 2), (1, 3), (2, 3), (2, 4), (3, 4), (4, 1)]
[[2,4,1,2,3,4],[2,3,4,1,2,4],[1,3,4,1,2,4],[1,3,4,1,2,3],[1,2,4,1,3,4],[1,2,3,4,1,3]] 
```

`uniqTrees`效率低下，一般可以做很多优化。

如果你想避免循环不变，你可以标准化一个循环选择最小base10表示，在前面的例子中 ([(1,2),(2,3),(3,1)] == [(2,3), (3,1),(1,3)]) 1231 < 2313 然后

```
normalize [(2,3),(3,1),(1,3)] == [(1,2),(2,3),(3,1)] 
```

您可以标准化一个路径，将其旋转 n 次并采用“head . sortBy toBase10 . rotations”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:19:07.013

我认为您的问题适合 NP 类别，因为：

> 哈密​​顿路径，也称为哈密顿路径，是图的两个顶点之间的路径，每个顶点恰好访问一次。
> 
> 一般来说，寻找哈密顿路径的问题是 NP 完全的（Garey and Johnson 1983, pp. 199-200），因此唯一已知的确定给定一般图是否具有哈密顿路径的方法是进行穷举搜索（[来源](http://mathworld.wolfram.com/HamiltonianPath.html)）

您的问题甚至“更难”，因为您事先不知道最终节点是什么。

在数据结构方面可以尝试模拟 Haskell 中的哈希表结构，因为这种数据类型在图形中很常用，你的问题可以转化为图形。

# jquery - jQuery ajaxSend 未在 IE8 中触发

> ID：14706045
> 
> 赞同：0
> 
> 时间：2013-02-05T11:06:55.430
> 
> 标签：jquery, internet-explorer-8

我正在尝试使用以下代码拦截用于测试目的的 ajax 调用：

```
function(callback){
  $(document).on("ajaxSend", function(event, jqxhr, settings) {
    $(document).off("ajaxSend");
    jqxhr.abort();
    callback(settings);
  }); 
} 
```

它将拦截请求，中止它并调用回调。

我已经尝试过“ajaxStart”事件，它确实被触发了，但我需要我的测试设置。

所有这些代码都适用于 Chrome 和 Firefox，但对于 IE8，事件不会被触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:25:11.857

我找到了我的测试无法在 IE 上运行的原因。

即使我的 AJAX 请求被中止，IE 在调用我为测试传递的虚拟 URL 时仍存在问题。

我已经通过了，`$.get("http://localhost")`而我的应用程序托管在 `localhost:8008`.

将 get 方法更新为`$.get(window.location.href)`已解决该问题。

# android - 奇怪的错误：在外部存储中创建文件会将资源 id 变成无效 id

> ID：14706048
> 
> 赞同：0
> 
> 时间：2013-02-05T11:06:58.977
> 
> 标签：android, android-resources

我有一些活动，其中一个创建某种被序列化为文件的对象，另一个活动应该在数据目录中显示序列化对象的列表（并且有一个“创建新”按钮，用于启动活动创建一个新对象）

当目录为空时，一切正常，没有崩溃。实际上，该目录不必为空。应该显示的文件都以特定的扩展名结尾，主应用程序会将它们过滤掉。如果我更改文件的扩展名，应用程序不会崩溃。

当我创建其中一个对象时，该对象已正确保存到其中`/sdcard/data/org.my.package/files/the_object_file`，但此时，如果我打开应该显示序列化对象列表的活动，我会得到一个`android.content.res.Resources$NotFoundException`.

我还必须说这些活动使用片段，并且异常发生在一段代码中，如下所示：

```
public class ShowObjectsActivity extends FragmentActivity {

    public static final int SHOW_CREATE_OBJECT_ACTIVITY = 3;

    public static final int CREATE_OBJECT = RESULT_FIRST_USER + 1;
    public static final int LOAD_OBJECT = RESULT_FIRST_USER + 2;

    public static final String THE_OBJECT = "org.my.package.THE_OBJECT";

    private MainObjectsFragment mainFragment = null;

    private String[] objectNames = null;
    private ObjectSerializer serializer = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.objects);

        if (mainFragment == null) {
            mainFragment = new MainObjectsFragment();

            // Fails on the following .add
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.objects_fragment_container, mainFragment).commit();
        }

        Intent intent = getIntent();
        serializer = new ObjectSerializer(
                intent.getStringExtra(TheMainActivity.APP_FILES_DIRECTORY));
        this.objectNames = intent.getStringArrayExtra(
                TheMainActivity.OBJECTS_NAMES);
        if (this.objectNames == null) {
            this.objectNames = new String[0];
        }

    }

    @Override
    public void onStart() {

        super.onStart();
        // Set the ArrayAdapter for the ListView
        mainFragment.setObjectsAdapter(this,
                                       this.objectNames);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == SHOW_CREATE_OBJECT_ACTIVITY) {
            if (resultCode == RESULT_OK) {
                setResult(CREATE_OBJECT, intent);
                finish();
            }
        }
    }

    public void createNewObject(View view) {

        Intent intent = new Intent(this, NewObjectActivity.class);
        startActivityForResult(intent, SHOW_CREATE_OBJECT_ACTIVITY);
    }

} 
```

`objects.xml`布局文件是这个：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/objects_fragment_container"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent" /> 
```

的方法`TheMainActivity`，它启动应该显示对象列表的活动，如下所示：

```
public void showObjectsActivity(View view) {

    if (!isExternalStorageAvailable()) {
        AlertDialog.Builder dialog = new AlertDialog.Builder(this);
        dialog.setTitle(R.string.external_storage_not_available_title);
        dialog.setMessage(R.string.external_storage_not_available_msg);
        dialog.setNeutralButton(R.string.close, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                // Empty
            }
        });

        dialog.create().show();
    } else {
        Intent intent = new Intent(this, ShowObjectsActivity.class);
        String app_files_directory = getTheFilesDir();
        // When the file is in the directory the following is the array I'd expect.
        // an array with the names of the objects
        intent.putExtra(OBJECTS_NAMES,
                        new ObjectSerializer(
                                app_files_directory).listObjectNames());
        intent.putExtra(APP_FILES_DIRECTORY, app_files_directory);

        startActivityForResult(intent, SHOW_OBJECTS);
    }
} 
```

请注意，`MainObjectsFragment` `onCreateView`不做任何与名称数组相关的事情。此外，在完全触及意图*之前*`ShowObjectsActivity`发生的崩溃。

 *这是回溯：

```
E/AndroidRuntime( 1186): FATAL EXCEPTION: main
E/AndroidRuntime( 1186): android.content.res.Resources$NotFoundException: Resource ID #0x7f050002 type #0x12 is not valid
E/AndroidRuntime( 1186):        at android.content.res.Resources.loadXmlResourceParser(Resources.java:2297)
E/AndroidRuntime( 1186):        at android.content.res.Resources.getLayout(Resources.java:988)
E/AndroidRuntime( 1186):        at android.view.LayoutInflater.inflate(LayoutInflater.java:349)
E/AndroidRuntime( 1186):        at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:363)
E/AndroidRuntime( 1186):        at android.widget.ArrayAdapter.getView(ArrayAdapter.java:354)
E/AndroidRuntime( 1186):        at android.widget.AbsListView.obtainView(AbsListView.java:1523)
E/AndroidRuntime( 1186):        at android.widget.ListView.makeAndAddView(ListView.java:1786)
E/AndroidRuntime( 1186):        at android.widget.ListView.fillDown(ListView.java:705)
E/AndroidRuntime( 1186):        at android.widget.ListView.fillFromTop(ListView.java:762)
E/AndroidRuntime( 1186):        at android.widget.ListView.layoutChildren(ListView.java:1639)
E/AndroidRuntime( 1186):        at android.widget.AbsListView.onLayout(AbsListView.java:1318)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1285)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1161)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.onLayout(LinearLayout.java:1078)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1285)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1161)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.onLayout(LinearLayout.java:1078)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.widget.FrameLayout.onLayout(FrameLayout.java:369)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1285)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1161)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.onLayout(LinearLayout.java:1078)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.widget.FrameLayout.onLayout(FrameLayout.java:369)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1285)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1161)
E/AndroidRuntime( 1186):        at android.widget.LinearLayout.onLayout(LinearLayout.java:1078)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.widget.FrameLayout.onLayout(FrameLayout.java:369)
E/AndroidRuntime( 1186):        at android.view.View.layout(View.java:7243)
E/AndroidRuntime( 1186):        at android.view.ViewRoot.performTraversals(ViewRoot.java:1181)
E/AndroidRuntime( 1186):        at android.view.ViewRoot.handleMessage(ViewRoot.java:1906)
E/AndroidRuntime( 1186):        at android.os.Handler.dispatchMessage(Handler.java:130)
E/AndroidRuntime( 1186):        at android.os.Looper.loop(SourceFile:351)
E/AndroidRuntime( 1186):        at android.app.ActivityThread.main(ActivityThread.java:4070)
E/AndroidRuntime( 1186):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1186):        at java.lang.reflect.Method.invoke(Method.java:538)
E/AndroidRuntime( 1186):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:906)
E/AndroidRuntime( 1186):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:664)
E/AndroidRuntime( 1186):        at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  197):   Force finishing activity org.my.package/.ShowObjectsActivity
W/ActivityManager(  197):   Force finishing activity org.my.package/.TheMainActivity 
```

难道我做错了什么？为什么数据目录中存在文件会导致`ResourceNotFound`错误？

* * *

**编辑：**我想我开始了解错误是如何发生的。的`MainObjectsFragment`布局包含一个`ListView`. 我提供了一个`TextView`来显示视图是否为空，并且 xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.5">

        <ListView
            android:id="@+id/main_objects_view"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

        <TextView
            android:id="@android:id/empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="@string/no_objects_available"
            android:textSize="22sp"
            android:gravity="center" />
    </LinearLayout>

    <Button
        android:id="@+id/new_object_button"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/new_object"
        android:textSize="18sp"
        android:onClick="createNewObject" />

</LinearLayout> 
```

（IntelliJ 声明上面的 XML 有一个未绑定的命名空间`''`。所有其他文件看起来完全一样，不会触发警告。我不知道我的文件是否有问题，或者是否是 IntelliJ 中的错误） .

起初我以为错误可能是由于这样一个事实引起的，如果适配器是空的，那么`TextView`显示的是而不是`ListView`. 但是片段的代码*总是*搜索`ListView`.

我检查了生成的`R.java`文件，它*确实*包含`id`具有正确名称的文件。

* * *

我在这里也发布了代码`MainObjectsFragment`：

```
public class MainObjectsFragment extends Fragment {

    public ListView objectsList;
    public Button newObjectButton;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.main_objects_fragment, container, false);
        this.objectsList = (ListView) view.findViewById(R.id.main_objects_view);

        // Before I only placed this empty TextView via xml. This does not change
        // the error at all.
        TextView emptyText = new TextView(getActivity());
        emptyText.setText(getActivity().getString(R.string.no_objects_available));
        emptyText.setTextSize(TypedValue.COMPLEX_UNIT_SP, 22);
        emptyText.setGravity(Gravity.CENTER);

        this.objectsList.setEmptyView(emptyText);
        this.objectsList.setAdapter(
                new ArrayAdapter<String>(getActivity(), R.id.main_objects_view,
                                         new String[0])
        );
        this.newObjectButton = (Button) view.findViewById(R.id.new_object_button);
        return view;
    }

    public void setCharsAdapter(Context ctx, String[] data) {

        this.objectsList.setAdapter(
                new ArrayAdapter<String>(ctx, R.id.main_objects_view, data));
    }
} 
```*

# html - HTML 下拉菜单。根据下拉菜单更改 Div

> ID：14706050
> 
> 赞同：0
> 
> 时间：2013-02-05T11:07:00.897
> 
> 标签：html, jsf-2

嘿，谁能帮帮我，我正在尝试根据我在下拉菜单中选择的内容在屏幕上显示一个 div

```
<------------DropdownDiv---------->

    <div id="recordActivityDropdownDiv" style="padding: 5px">
        <h:selectOneMenu id="recordActivityDropdown" style="width:200px;" value="">
            <f:selectItem itemLabel="Email" itemValue="1"/>
            <f:selectItem itemLabel="Letter" itemValue="2"/>                                
        </h:selectOneMenu>  
    </div>

<------------Display this is letter is selected in dropdown menu Div---------->

    <div style="height:100%; width:99%; float:left">
        <div style="padding-top: 15px; padding-left: 5px; width: 20%; float: left;">
        letter:
        </div>
        <div style="height:100%; width:77%; float:left">
            <div style="padding: 5px; float:left;">
                <h:inputText id="letterbox" style="width:200px" value="" />
        </div>              
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:42:40.730

如评论中所述，您的代码看起来有点像这样：

```
...
    <h:selectOneMenu value="#{bean.selectValue} id="recordActivityDropdown" style="width:200px;" value="">
        <f:selectItem itemLabel="Email" itemValue="1"/>
        <f:selectItem itemLabel="Letter" itemValue="2"/>
        <f:ajax listener="#{bean.valueChanged}" update="myGroup" />                                
    </h:selectOneMenu>  
...

...
<h:panelGroup id="myGroup" style="height:100%; width:99%; float:left">
    <div style="padding-top: 15px; padding-left: 5px; width: 20%; float: left;">
        letter: <h:outputText value="#{bean.selectValue}" />
    </div>
    ...              
</h:panelGroup>
... 
```

这将更新（通过`ajax`）现在`panelGroup`是您的“div”。它将获取的值`selectOneMenu`并将其打印到 div。

也可以看看 ：

*   [Ajax 支持在 h:selectOneMenu](https://stackoverflow.com/questions/5873711/ajax-support-in-hselectonemenu)
*   [如何从 <h:selectOneMenu> 中获取价值？](https://stackoverflow.com/questions/10584223/how-to-get-value-from-hselectonemenu)

# c# - 将 ForEach 循环嵌套到 Linq

> ID：14706053
> 
> 赞同：1
> 
> 时间：2013-02-05T11:07:08.773
> 
> 标签：c#, linq, foreach, linq-to-entities, nested-loops

我正在尝试将下面嵌套的每个循环转换为 Linq。但是我仍然无法成功。

```
var objAct = new List<InformaticsBenchmarkSummary>();
foreach (var item in op)
{
    foreach (var lstTp5 in lstTopFive)
    {
        if (item.UnitOfOperations.ContainsKey(lstTp5.SystemID))
        {
            var objIbm = new InformaticsBenchmarkSummary();
            objIbm.CompanyId = item.CompanyId;
            objIbm.CompanyName = item.CompanyName;
            objIbm.LocationId = item.LocationId;
            objIbm.LocationName = item.LocationName;
            objIbm.UnitOfOperations.Add(lstTp5.SystemID, 
                                        item.UnitOfOperations[lstTp5.SystemID]);
            objAct.Add(objIbm);
        }
    }
} 
```

`UnitOfOperations`类型在哪里`Dictionary<int,string>()`；
`op`又`List<InformaticsBenchmarkSummary>()`
`lstTopFive`是`List<int>()`

我试过了，类似这样的东西，但在语法上不成功

```
var output = from item in op
from lstTp5 in lstTopFive
where item.UnitOfOperations.ContainsKey(lstTp5.SystemID)
let v = new InformaticsBenchmarkSummary()
{
     CompanyId = item.CompanyId,
     CompanyName = item.CompanyName,
     LocationId = item.LocationId,
     LocationName = item.LocationName
}
.UnitOfOperations.Add(lstTp5.SystemID, item.UnitOfOperations[lstTp5.SystemID])
select v; 
```

嵌套循环完美地工作，但我认为，对此的 linq 会提高性能。感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:38:09.107

在 Linq 查询语法中不可能在`UnitOfOperations.Add`选择中使用 。但是您可以使用方法链和`SelectMany`方法来做到这一点：

```
var objAcu = (op.SelectMany(item => lstTopFive, (item, lstTp5) => new { item, lstTp5 })  // <- Bad readability
                .Where(t => t.item.UnitOfOperations.ContainsKey(t.lstTp5.SystemID))
                .Select(t =>
                        {
                            var objIbm = new InformaticsBenchmarkSummary
                            {
                                CompanyId = t.item.CompanyId,
                                CompanyName = t.item.CompanyName,
                                LocationId = t.item.LocationId,
                                LocationName = t.item.LocationName
                            };
                            objIbm.UnitOfOperations.Add(t.lstTp5.SystemID, t.item.UnitOfOperations[t.lstTp5.SystemID]);
                            return objIbm;
                        })).ToList(); 
```

如果属性`UnitOfOperations`具有 public `set`，在这种情况下，您可以使用查询语法。

你如何替换 1 `foreach`？由一个`from ... in ...`

然后，要替换 2 `foreach`，请使用 2`from ... in ...`

```
var objAct = (from item in op  // First foreach loop
              from lstTp5 in lstTopFive  // Second foreach loop
              where item.UnitOfOperations.ContainsKey(lstTp5.SystemID)
              select new InformaticsBenchmarkSummary
              {
                  CompanyId = item.CompanyId,
                  CompanyName = item.CompanyName,
                  LocationId = item.LocationId,
                  LocationName = item.LocationName,
                  UnitOfOperations = { { lstTp5.SystemID, item.UnitOfOperations[lstTp5.SystemID] } }
              }).ToList(); 
```

但我怀疑它会提高这种操作的性能。

无论如何，我不明白你试图达到什么目的。因为在输出的所有项目中，字典中都会有一个且只有一个元素`UnitOfOperations`。真的是你想做的吗？

### 更新

```
List<int> systemIdTop5 = lstTopFive.Select(tp5 => tp5.SystemID).ToList();
var objAct = (from item in op
              select new InformaticsBenchmarkSummary
              {
                  CompanyId = item.CompanyId,
                  CompanyName = item.CompanyName,
                  LocationId = item.LocationId,
                  LocationName = item.LocationName,
                  UnitOfOperations = systemIdTop5.Intersect(item.UnitOfOperations.Keys)
                                                 .ToDictionary(systemId => systemId, systemId => item.UnitOfOperations[systemId])
              }).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:57:12.357

你很接近，但你不能`void`像这样在 LINQ 查询中使用返回方法。（如果它不是`void`-return，那么`v`将是 的结果`Add()`，这很可能是错误的。）

如果你想创建一个新`Dictionary`的 for `UnitOfOperations`，你可以像其他属性一样设置它。但是如果你不能这样做（可能是因为`UnitOfOperations`有一个私有设置器）或者你不想这样做（因为`UnitOfOperations`被初始化为你想要保留的某个值），你可以使用 C# 的一个鲜为人知的特性：里面的集合初始化器对象初始化器：

```
UnitOfOperations = { { lstTp5.SystemID, item.UnitOfOperations[lstTp5.SystemID] } } 
```

这段代码的效果和你写的一样：

```
createdObject.UnitOfOperations.Add(lstTp5.SystemID, item.UnitOfOperations[lstTp5.SystemID]); 
```

唯一的区别是它不是语句，它是表达式的一部分，这意味着您可以在 LINQ 查询中使用它。

整个查询将是：

```
var output = from item in op
             from lstTp5 in lstTopFive
             where item.UnitOfOperations.ContainsKey(lstTp5.SystemID)
             select new InformaticsBenchmarkSummary()
             {
                 CompanyId = item.CompanyId,
                 CompanyName = item.CompanyName,
                 LocationId = item.LocationId,
                 LocationName = item.LocationName,
                 UnitOfOperations =
                 {
                     { lstTp5.SystemID, item.UnitOfOperations[lstTp5.SystemID] }
                 }
             }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T12:19:18.370

据我所知，您遇到困难的是您的 UnitOfOperations。如果它在构造函数中被初始化，你可以使用这个：

```
 var output = from item in op
                     from lstTp5 in lstTopFive
                     where item.UnitOfOperations.ContainsKey(lstTp5.SystemID)
                     select
                         new InformaticsBenchmarkSummary()
                             {
                                 CompanyId = item.CompanyId,
                                 CompanyName = item.CompanyName,
                                 LocationId = item.LocationId,
                                 LocationName = item.LocationName,
                                 UnitOfOperations = { { lstTp5.SystemID, item.UnitOfOperations[lstTp5.SystemID] } }
                             }; 
```

结果是一个`IEnumerable`，如果你想要它作为一个列表，调用`output.ToList()`。

两个旁注：

1.  我不相信这会更快。它仍然是一个内部循环。
2.  这可能会在结果中产生几乎重复的项目（不同`UnitOfOperations`），但我想这是需要的。在最坏的情况下，in 中的所有项目`op`都有一个`UnitOfOperations`包含所有`SystemID`in的项目，`lstTopFive`从而为我们提供了 中的`op.Count()*lstTopFive.Count()`项目总数`output`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T04:41:03.390

可以帮助你：

```
var output = from item in op
                 join lstTp5 in lstTopFive on item.UnitOfOperations.Key equals lstTp5.SystemID
                 select new InformaticsBenchmarkSummary
                 {
                     CompanyId = item.CompanyId,
                     CompanyName = item.CompanyName,
                     LocationId = item.LocationId,
                     LocationName = item.LocationName,
                     UnitOfOperations = item.UnitOfOperations 
                 }; 
```

# c# - StreamReader 返回空字符串

> ID：14706054
> 
> 赞同：3
> 
> 时间：2013-02-05T11:07:09.827
> 
> 标签：c#, http, get, streamreader, getresponse

我有以下代码：

```
 System.Net.WebRequest req = System.Net.WebRequest.Create(url);
  req.Credentials = new NetworkCredential("admin", "password");
  System.Net.WebResponse resp = req.GetResponse();
  System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream());
  var result = sr.ReadToEnd().Trim(); 
```

当我运行代码时，结果只是一个空字符串。但是，当我单步执行代码时，结果是一个包含数据的字符串，正如我所期望的，当我在这一行上放置一个断点时：

```
System.Net.WebResponse resp = req.GetResponse(); 
```

所以我认为问题在于这一行或后续行。不知道如何进行，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T09:58:12.380

我在 WebResponse 上使用 CopyToAsync() 时遇到了类似的问题，结果表明 Stream 的指针最终位于 Stream 的末尾（它的指针位置等于它的长度）。

如果是这种情况，您可以在读取字符串内容之前重置指针，如下所示...

```
var responseStream = resp.GetResponseStream();

responseStream.Seek(0, SeekOrigin.Begin);

var sr = new StreamReader(responseStream);
var result = sr.ReadToEnd().Trim(); 
```

虽然，由于您是直接读取流，而不是将其复制到新的 MemoryStream 中，但这可能不适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:10:23.313

可能是 **“req.GetResponse();”** 花费更多时间......当你设置断点时，它有时间完成任务。

你需要检查

```
resp.StatusDescription 
```

前

```
System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream()); 
```

# jquery - 使用jQuery表单插件通过ajax上传表单

> ID：14706055
> 
> 赞同：0
> 
> 时间：2013-02-05T11:07:13.627
> 
> 标签：jquery, jquery-plugins, jquery-forms-plugin

我正在尝试上传以下表格

```
<form id="filesend" enctype="multipart/form-data" method="post" action="upload.php"> Choose the file you want to send <br> <input name="file" type="file"><br><input type="submit"></form> 
```

使用以下 jquery 代码

```
<script>
$('document').ready(function() { 
var options= { target:'#close'}
$('#filesend').submit( function (){
$(this).ajaxSubmit(options);
          return false;         
})})
</script> 
```

但是什么也没发生，表单像普通的 html 表单一样提交并导航到 upload.php，是的，我已经包含了插件。关于我可能会出错的任何想法。

编辑

我刚刚注意到一些有趣的事情。如果我通过 chrome 的调试器并观察执行的每一步，文件将被上传到数据库两次。但是在没有任何断点的情况下通过它会导致它只被上传一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:11:42.123

问题出在这部分：

```
$(#filesend).submit( function (){
    $(this).ajaxSubmit(options);
    return false;         
}) 
```

选择器应该是一个字符串，所以：`$('#filesend')`- 注意单引号（你也可以使用双引号）。

没有它们，它试图将命名变量的值传递`#filesend`给函数；我不确定这是一个有效的变量名，因此它可能会引发错误 - 检查浏览器的开发人员工具控制台会告诉您是否因此引发了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:12:14.293

无法通过 ajax 上传文件。您可以使用 IFrame 上传文件，而无需刷新页面。您可以在此处查看更多详细信息：

[http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)

XHR2 支持通过 AJAX 上传文件。例如通过 FormData 对象，但不幸的是，所有/旧浏览器都不支持它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:12:59.943

我认为您不能使用 Ajax 提交文件。基于 JQuery 的文件上传插件允许您“很好地”显示文件上传输入框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:13:54.860

您的代码中存在语法问题

仔细看这里

```
$('#filesend').submit( function (){
$(this).ajaxSubmit(options);
          return false;         
})}); 
```

选择器需要结束 ins 字符串，即`'#filesend'`.

# paypal - PayPal 定期付款项目 Purhcase

> ID：14706058
> 
> 赞同：0
> 
> 时间：2013-02-05T11:07:17.677
> 
> 标签：paypal, payment, recurring

我正在使用 PayPal Recurring Payments (SOAP API) 开发支付系统。

我正在创建一个循环配置文件并设置每月计费金额、周期等。现在，当用户想要升级他的计划时，我想通过使用与他关联的相同信用卡信息向买家收取差额经常性的个人资料。我们怎样才能做到这一点？我们应该做一个完全独立的交易吗？还是 DoReferenceTransaction API？

如果我进行单独的交易，如果每月循环日在接下来的 72 小时内，PayPal 是否允许我进行另一笔交易？

请分享你的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:08:14.493

我会像你提到的那样参考交易。这将与个人资料分开，所以是的，如果经常性付款在正常处理之后很快到来。

# javascript - 页面刷新后如何在jquery中保留一个值

> ID：14706059
> 
> 赞同：-2
> 
> 时间：2013-02-05T11:07:18.000
> 
> 标签：javascript, jquery, ruby-on-rails-3

使用 jquery 刷新页面后，来自 text_box 的值是空白的。有什么建议吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:08:22.830

您可以使用[本地存储](http://www.w3schools.com/html/html5_webstorage.asp)或[会话存储](http://www.w3schools.com/html/html5_webstorage.asp) 或[cookie](http://www.w3schools.com/js/js_cookies.asp)在客户端存储值，刷新后值将可用。

**使用本地存储**

在使用 Web 存储之前，请检查浏览器对 localStorage 和 sessionStorage 的支持：

```
if(typeof(Storage)!=="undefined")
{
     localStorage.lastname="Smith";
}
else
{
   // Sorry! No web storage support..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:22:37.493

我不确定我是否完全理解您的问题，但我想您想要以下内容

```
<%= text_field_tag 'name', params[:some_param] ? params[:some_param] : nil %> 
```

如果您有一些变量（例如@instance_variable）并且您希望该值进入文本字段，请使用以下

```
<%= text_field_tag 'name', @instance_variable ? @instance_variable : nil %> 
```

参考[`text_field_tag`](http://api.rubyonrails.org/v2.3.8/classes/ActionView/Helpers/FormTagHelper.html#M002240)

# powershell - 选择要查找的字符串，然后选择从找到的单词起 3 行的字符串的一部分

> ID：14706062
> 
> 赞同：0
> 
> 时间：2013-02-05T11:07:30.850
> 
> 标签：powershell

我正在尝试使用 powershell 执行以下操作：我正在尝试搜索一个单词，然后一旦找到该单词，我需要向上 3 行读取字符 34 到 42 并将其打印出来。

测试文件：

1.  我要在这里走很长一段路，我们步行步行到 yadda yadda 河。
2.  拉拉拉拉拉——她说
3.  滚滚滚 他说
4.  井干了

我有什么：选择字符串 $TestFile -pattern "well" -simplematch 3{34,42}

我不知道的是：如何打印出“walk walk walk”部分。

每次打印出整行 1\. 2\. 和 3 时会发生什么。我只需要“walk walk walk”这一部分

如果有帮助，我将其用于日志文件。在文件中，error 一词位于错误代码下方 3 行，通常是一个字符串，位于其上方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:29:39.917

使用上下文参数：

```
PS> (Get-ChildItem $TestFile | Select-String well -Context 3).Context.PreContext[-3].Substring(35,15)
walk walk walk 
```

# javascript - MoSync：在默认网络浏览器中打开链接

> ID：14706065
> 
> 赞同：0
> 
> 时间：2013-02-05T11:07:39.570
> 
> 标签：javascript, mosync

我正在使用 MoSync 构建一个 HTML5 应用程序，我想从 JavaScript 在设备的默认网络浏览器中打开一个 URL。您能否粘贴一些示例代码，如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:33:53.297

现在您需要用 C++ 编写一些代码来打开外部浏览器。这是描述如何做到这一点的博客文章： [http ://www.mosync.com/blog/2013/01/how-extend-javascript-custom-c-code-opening-google-maps-hybrid-app](http://www.mosync.com/blog/2013/01/how-extend-javascript-custom-c-code-opening-google-maps-hybrid-app)

在即将推出的 MoSync SDK 3.2.1 和 MoSync Reload 1.0 中，此功能将通过调用以下方式直接从 JavaScript 中获得：

```
mosync.app.openExternalURL("http://yourpage.com"); 
```

# python - python tkinter 和一个简单的 web 包装器

> ID：14706069
> 
> 赞同：20
> 
> 时间：2013-02-05T11:07:57.417
> 
> 标签：python, tkinter

我正在编写一个带有 UI 的简单 python 程序，但我不知道如何在程序中放置一个网页。我尝试在 Google 上搜索，但找不到任何简单的实现。任何链接都会很棒。回顾一下，我只想要一个简单的 GUI python 程序，其中嵌入了一个网页，基本上是这样的：

```
# File: hello1.py

from Tkinter import *

root = Tk()

w = Label(root, text="This is where i was the web page embeded")
w.pack()

root.mainloop() 
```

谢谢，

编辑：

解决了问题，使用了webkit

```
#!/usr/bin/env python
import gtk
import webkit
import gobject

gobject.threads_init()
win = gtk.Window()
bro = webkit.WebView()
bro.open("http://www.google.com")
win.add(bro)
win.show_all()
gtk.main() 
```

杰克

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2019-04-04T08:54:42.793

您可以在 tkinter 中嵌入 HTML 并打开完整的网页（甚至使用 CSS 和 javascript）。使用[cefpython 模块](https://github.com/cztomczak/cefpython)，您可以在 tk 窗口中嵌入成熟的 Chromium 浏览器。

```
from cefpython3 import cefpython as cef
import ctypes
try:
    import tkinter as tk
except ImportError:
    import Tkinter as tk
import sys
import platform
import logging as _logging

# Fix for PyCharm hints warnings
WindowUtils = cef.WindowUtils()

# Platforms
WINDOWS = (platform.system() == "Windows")
LINUX = (platform.system() == "Linux")
MAC = (platform.system() == "Darwin")

# Globals
logger = _logging.getLogger("tkinter_.py")

class MainFrame(tk.Frame):

    def __init__(self, root):
        self.browser_frame = None
        self.navigation_bar = None

        # Root
        root.geometry("900x640")
        tk.Grid.rowconfigure(root, 0, weight=1)
        tk.Grid.columnconfigure(root, 0, weight=1)

        # MainFrame
        tk.Frame.__init__(self, root)
        self.master.title("Tkinter example")
        self.master.protocol("WM_DELETE_WINDOW", self.on_close)
        self.master.bind("<Configure>", self.on_root_configure)
        self.bind("<Configure>", self.on_configure)
        self.bind("<FocusIn>", self.on_focus_in)
        self.bind("<FocusOut>", self.on_focus_out)

        # NavigationBar
        self.navigation_bar = NavigationBar(self)
        self.navigation_bar.grid(row=0, column=0,
                                 sticky=(tk.N + tk.S + tk.E + tk.W))
        tk.Grid.rowconfigure(self, 0, weight=0)
        tk.Grid.columnconfigure(self, 0, weight=0)

        # BrowserFrame
        self.browser_frame = BrowserFrame(self, self.navigation_bar)
        self.browser_frame.grid(row=1, column=0,
                                sticky=(tk.N + tk.S + tk.E + tk.W))
        tk.Grid.rowconfigure(self, 1, weight=1)
        tk.Grid.columnconfigure(self, 0, weight=1)

        # Pack MainFrame
        self.pack(fill=tk.BOTH, expand=tk.YES)

    def on_root_configure(self, _):
        logger.debug("MainFrame.on_root_configure")
        if self.browser_frame:
            self.browser_frame.on_root_configure()

    def on_configure(self, event):
        logger.debug("MainFrame.on_configure")
        if self.browser_frame:
            width = event.width
            height = event.height
            if self.navigation_bar:
                height = height - self.navigation_bar.winfo_height()
            self.browser_frame.on_mainframe_configure(width, height)

    def on_focus_in(self, _):
        logger.debug("MainFrame.on_focus_in")

    def on_focus_out(self, _):
        logger.debug("MainFrame.on_focus_out")

    def on_close(self):
        if self.browser_frame:
            self.browser_frame.on_root_close()
        self.master.destroy()

    def get_browser(self):
        if self.browser_frame:
            return self.browser_frame.browser
        return None

    def get_browser_frame(self):
        if self.browser_frame:
            return self.browser_frame
        return None

class BrowserFrame(tk.Frame):

    def __init__(self, master, navigation_bar=None):
        self.navigation_bar = navigation_bar
        self.closing = False
        self.browser = None
        tk.Frame.__init__(self, master)
        self.bind("<FocusIn>", self.on_focus_in)
        self.bind("<FocusOut>", self.on_focus_out)
        self.bind("<Configure>", self.on_configure)
        self.focus_set()

    def embed_browser(self):
        window_info = cef.WindowInfo()
        rect = [0, 0, self.winfo_width(), self.winfo_height()]
        window_info.SetAsChild(self.get_window_handle(), rect)
        self.browser = cef.CreateBrowserSync(window_info,
                                             url="http://www.google.com") #todo
        assert self.browser
        self.browser.SetClientHandler(LoadHandler(self))
        self.browser.SetClientHandler(FocusHandler(self))
        self.message_loop_work()

    def get_window_handle(self):
        if self.winfo_id() > 0:
            return self.winfo_id()
        elif MAC:
            from AppKit import NSApp
            import objc
            return objc.pyobjc_id(NSApp.windows()[-1].contentView())
        else:
            raise Exception("Couldn't obtain window handle")

    def message_loop_work(self):
        cef.MessageLoopWork()
        self.after(10, self.message_loop_work)

    def on_configure(self, _):
        if not self.browser:
            self.embed_browser()

    def on_root_configure(self):
        # Root <Configure> event will be called when top window is moved
        if self.browser:
            self.browser.NotifyMoveOrResizeStarted()

    def on_mainframe_configure(self, width, height):
        if self.browser:
            if WINDOWS:
                ctypes.windll.user32.SetWindowPos(
                    self.browser.GetWindowHandle(), 0,
                    0, 0, width, height, 0x0002)
            elif LINUX:
                self.browser.SetBounds(0, 0, width, height)
            self.browser.NotifyMoveOrResizeStarted()

    def on_focus_in(self, _):
        logger.debug("BrowserFrame.on_focus_in")
        if self.browser:
            self.browser.SetFocus(True)

    def on_focus_out(self, _):
        logger.debug("BrowserFrame.on_focus_out")
        if self.browser:
            self.browser.SetFocus(False)

    def on_root_close(self):
        if self.browser:
            self.browser.CloseBrowser(True)
            self.clear_browser_references()
        self.destroy()

    def clear_browser_references(self):
        self.browser = None

class LoadHandler(object):

    def __init__(self, browser_frame):
        self.browser_frame = browser_frame

    def OnLoadStart(self, browser, **_):
        if self.browser_frame.master.navigation_bar:
            self.browser_frame.master.navigation_bar.set_url(browser.GetUrl())

class FocusHandler(object):

    def __init__(self, browser_frame):
        self.browser_frame = browser_frame

    def OnTakeFocus(self, next_component, **_):
        logger.debug("FocusHandler.OnTakeFocus, next={next}"
                     .format(next=next_component))

    def OnSetFocus(self, source, **_):
        logger.debug("FocusHandler.OnSetFocus, source={source}"
                     .format(source=source))
        return False

    def OnGotFocus(self, **_):
        """Fix CEF focus issues (#255). Call browser frame's focus_set
           to get rid of type cursor in url entry widget."""
        logger.debug("FocusHandler.OnGotFocus")
        self.browser_frame.focus_set()

class NavigationBar(tk.Frame):
    def __init__(self, master):
        self.back_state = tk.NONE
        self.forward_state = tk.NONE
        self.back_image = None
        self.forward_image = None
        self.reload_image = None
        tk.Frame.__init__(self, master)

        # Back button
        back = b'iVBORw0KGgoAAAANSUhEUgAAAGAAAABgBAMAAAAQtmoLAAAAKlBMVEUAAAAyMjIzMzMzMzMyMjIzMzMxMTEzMzMtLS0zMzMkJCQyMjIrKysxMTExeYOJAAAADnRSTlMAgH3/cGlU1BHPDsoMWDQYbKYAAACNSURBVHgB7deBBYBAAIXha4YWaIdXJYlGaJwAzRFojhMarQnO+eWg3g9AvijnXXDZnKuawKpbCEgLA6QOAtLKAKmHgDYIDLuBDDBS4KDA+TsgQmC6IXAZyADpEkA6CogC/AH+SpQIlIAf7v2vYSIGfJBR4ihFmNjx+KHE8AliLjlD6dAFUxqMdX4dcM49/KeCIizV7gUAAAAASUVORK5CYII='        
        self.back_image = tk.PhotoImage(data=back)
        self.back_image = self.back_image.zoom(25).subsample(100)
        self.back_button = tk.Button(self, image=self.back_image,command=self.go_back)
        self.back_button.grid(row=0, column=0)

        # Forward button
        forward = b'iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAA1UlEQVR4Ae3cAQbCYBzG4Q6QiI4wYIbtPU1HCAgQSOcLgtBtamHQAb5/43noAu8Pmu37NgAAAAAAAAAAAC0luU7TdNuUMP4lyfv7E6GxefDzMr4IheOL0FiS0zK2CI2N43hcRhahQJJDkqcIhYZh2IsgAiKIgAgi8BPhURiBrut2IoiACCIgggj8WQQR5mHvhRHo+35bEAERBMD4xl8V4/v7iQcw42N842N8L+XxWYrxMb7xMb5TMsZ/GX+Nh/RwTNVBbVxV4LIOXFcDAAAAAAAAAADwAephJFWvaMW3AAAAAElFTkSuQmCC'        
        self.forward_image = tk.PhotoImage(data=forward)
        self.forward_image = self.forward_image.zoom(25).subsample(100)
        self.forward_button = tk.Button(self, image=self.forward_image,command=self.go_forward)
        self.forward_button.grid(row=0, column=1)

#        Reload button
        refresh = b'iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAADwklEQVR4Ae2aY5jGVhCFZ+3a9iK7+XLPqW23v2rbtm3btm3btm3bbWpN8i0nt83z3Hd+Z+ac6GokEAgEAoFAIBAIBKyIGjkr1sJBuIoP8zV8w6/4Oh/GVTgIayWzRI0yJLiT+COZGjvzZnzLtJ/4Grdg+3gcGRTchqn4oG90bsvHmQ46vsPZycyDke/BgJsUR/IrpkMP3M0lpVaqgE2YFm+ghusNUbyOp9081eQXbqAyIW5hahBXurGz8gs3wOX4KVOjeBuUv+C6TIs2UMfjmVoGvnXLKPnFGWArru9Xzgs8kxu5mX7/53d2xJ2cCytwW57Jl/qx8BO3VfKLMTBVE++tfh9xUtwp/cA+nMbvq15/A9PCDfC8KsW/4IG948og6J0Yh/Pr/CyFG3Bb55b5EvtGY8gQiCfitfRvAAvgp5wiz7hJh/cfw8deDVSmwefZArg8bpNhEo2HW/wZqMGjOQWOkloZAWzgeZ4MuNVz0p9gcFtO8mIgauf72SmA1MoIUfKLM4Dts59u1C4jhEd5+oijdn6iPt1v2GUl34MBbKrTYhdD+R4MPKLSvj5Vk5V8DwZcTybt5jIicDBTjwawh3p9Pu/sMJTvwcD9evCyk+/BQDKanv9UnJ18DwawmEr5gQwb7s3Uv4Gt1BdwgaV8DwZ4gkq5haV8DwZw678TuoWkXOAp9QpNJeWCr6uHOpaUC719NVGLlAu9bo0aS/4KdY0p5YJPl/wjxm3/NpAsLOUCJ6onsKWUC26jfqPnSblwi2cmc+UiatfTaVeRcoH71FdwpBQETlNP+3YRD0tKK9wE/L6QH0Yl0lNct5kUAA7SdfqmEBvwqPW2Su5O9Reqyh1iBTbR9wY7izE8S9dwq4sVE7XoKR2+iTvFkGTm7NGr6bQR25lu7iriNj6Tyb+u9Wjwni6Bq6RWLKjLObZ90Xza7lYzO+BQ8JRsZjePmFPDh+2PmKQWh+RkvViKIO7MO+TjFXHbCHb9bszJ+KlqiLLDLWR5zOqmxStMs+GWEU3RB934AvtyrCH+mPfDj7m5DpJiwTnVWw04/uDEc2V179WfrVCmasL9w232YEMyH07ml0yryWeDGGDSboMZf/+TT9bM8dGdzMKNeIWSruM8qRdP1OmVskEcJTXiEyzFT8zEf+1WE//0TmzU9PdgMrX8R9Rg/RG2Xb7lVjN6dfw3vvJTt4PBVrFZ6/FjQxL/KrY32GX11PytpR+ZzCe1/+P2+2SWP9rvH/qt/f73lsoXcSF3xGLxRGJEIBAIBAKBQCAQCPwM9/tgs3UybYkAAAAASUVORK5CYII='        
        self.reload_image = tk.PhotoImage(data=refresh)
        self.reload_image = self.reload_image.zoom(25).subsample(100)
        self.reload_button = tk.Button(self, image=self.reload_image,command=self.reload)
        self.reload_button.grid(row=0, column=2)

        # Url entry
        self.url_entry = tk.Entry(self)
        tk.Grid.rowconfigure(self, 0, weight=100)
        tk.Grid.columnconfigure(self, 3, weight=100)

        # Update state of buttons
        self.update_state()

    def go_back(self):
        if self.master.get_browser():
            self.master.get_browser().GoBack()

    def go_forward(self):
        if self.master.get_browser():
            self.master.get_browser().GoForward()

    def reload(self):
        if self.master.get_browser():
            self.master.get_browser().Reload()

    def set_url(self, url):
        self.url_entry.delete(0, tk.END)
        self.url_entry.insert(0, url)

    def on_url_focus_in(self, _):
        logger.debug("NavigationBar.on_url_focus_in")

    def on_url_focus_out(self, _):
        logger.debug("NavigationBar.on_url_focus_out")

    def on_load_url(self, _):
        if self.master.get_browser():
            self.master.get_browser().StopLoad()
            self.master.get_browser().LoadUrl(self.url_entry.get())

    def on_button1(self, _):
        """Fix CEF focus issues (#255). See also FocusHandler.OnGotFocus."""
        logger.debug("NavigationBar.on_button1")
        self.master.master.focus_force()

    def update_state(self):
        browser = self.master.get_browser()
        if not browser:
            if self.back_state != tk.DISABLED:
                self.back_button.config(state=tk.DISABLED)
                self.back_state = tk.DISABLED
            if self.forward_state != tk.DISABLED:
                self.forward_button.config(state=tk.DISABLED)
                self.forward_state = tk.DISABLED
            self.after(100, self.update_state)
            return
        if browser.CanGoBack():
            if self.back_state != tk.NORMAL:
                self.back_button.config(state=tk.NORMAL)
                self.back_state = tk.NORMAL
        else:
            if self.back_state != tk.DISABLED:
                self.back_button.config(state=tk.DISABLED)
                self.back_state = tk.DISABLED
        if browser.CanGoForward():
            if self.forward_state != tk.NORMAL:
                self.forward_button.config(state=tk.NORMAL)
                self.forward_state = tk.NORMAL
        else:
            if self.forward_state != tk.DISABLED:
                self.forward_button.config(state=tk.DISABLED)
                self.forward_state = tk.DISABLED
        self.after(100, self.update_state)

if __name__ == '__main__':
    logger.setLevel(_logging.INFO)
    stream_handler = _logging.StreamHandler()
    formatter = _logging.Formatter("[%(filename)s] %(message)s")
    stream_handler.setFormatter(formatter)
    logger.addHandler(stream_handler)
    logger.info("CEF Python {ver}".format(ver=cef.__version__))
    logger.info("Python {ver} {arch}".format(
            ver=platform.python_version(), arch=platform.architecture()[0]))
    logger.info("Tk {ver}".format(ver=tk.Tcl().eval('info patchlevel')))
    assert cef.__version__ >= "55.3", "CEF Python v55.3+ required to run this"
    sys.excepthook = cef.ExceptHook  # To shutdown all CEF processes on error
    root = tk.Tk()
    app = MainFrame(root)
    # Tk must be initialized before CEF otherwise fatal error (Issue #306)
    cef.Initialize()
    app.mainloop()
    cef.Shutdown() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-13T23:04:45.537

使用 pywebview 怎么样？它不在 tkinter 中运行。但这很简单。

[https://pypi.org/project/pywebview/](https://pypi.org/project/pywebview/)

```
import webview
webview.create_window('Hello world', 'https://pywebview.flowrl.com/hello')
webview.start() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-02T22:35:10.767

尝试使用 Tkinterweb！ [https://pypi.org/project/tkinterweb/](https://pypi.org/project/tkinterweb/)

演示代码：

```
from tkinterweb import HtmlFrame #import the HTML browser
try:
  import tkinter as tk #python3
except ImportError:
  import Tkinter as tk #python2

root = tk.Tk() #create the tkinter window
frame = HtmlFrame(root) #create HTML browser

frame.load_website("http://google.com") #load a website
frame.pack(fill="both", expand=True) #attach the HtmlFrame widget to the parent window
root.mainloop() 
```

# sql - 用于根据硬编码值拆分列的 SQL 查询

> ID：14706071
> 
> 赞同：0
> 
> 时间：2013-02-05T11:07:59.617
> 
> 标签：sql, sql-server, sql-server-2008

我有一张桌子，例如假设这个设置

表**MyTable**有各种列**Id**、 **UserId**、 col1 、 col2 col3 ，包括名为**Stuff**的列。

我想通过查询从 MyTable 输出某些列，但我想拆分“Stuff”列，以便在查询中显示 2 个新列

我可以定义硬编码的类别，我不确定如何在 sql 中表示

```
Categoy1 = "alpha, bravo, delta, gamma';
Categoy2 = "charlie, echo, hotel';

MyTable

ID |    UserID |      Stuff       | Other Cols....
----------------------------------------------------------
1          1          alpha
2          2          hotel
3          1          charlie
4          1          echo
5          1          gamma
6          2          bravo
7          2          delta 
```

我希望显示选择查询

```
UserId  |  Category1           |  Catergory2
----------------------------------------------------------
1            alpha, gamma            charlie, echo
---------------------------------------------------------
2            bravo, delta            hotel
---------------------------------------------------------- 
```

即根据 stuff 列是否包含来自 category1 或 category2 的项目，基于不同的 userId 生成 2 个列，类别内容可以用逗号分隔，如上所示

请你能说明如何做到这一点

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:57:09.847

My try, the technique I learned from Stack Overflow!... Please check:

```
DECLARE @Categoy1 NVARCHAR(MAX) = 'alpha, bravo, delta, gamma',
        @Categoy2 NVARCHAR(MAX) = 'charlie, echo, hotel'
SELECT 
    UserID,      
    STUFF((SELECT  ', ' + display_term
       FROM sys.dm_fts_parser('"'+ ',' + @Categoy1  + '"', 1033, NULL, 0) INNER JOIN 
            YourTable T on display_term=[Stuff]
            WHERE T.UserID= x.UserID
        FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)'), 1, 2, '') Category1,
    STUFF((SELECT  ', ' + display_term
       FROM sys.dm_fts_parser('"'+ ',' + @Categoy2  + '"', 1033, NULL, 0) INNER JOIN 
            YourTable T on display_term=[Stuff]
            WHERE T.UserID= x.UserID
        FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)'), 1, 2, '') Category2
FROM YourTable x
GROUP BY UserID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:35:36.097

您可以使用 xml 扩展来连接字符串，然后将类别硬编码到每个子查询中：

```
CREATE TABLE #T (ID INT, UserID INT, [Stuff] VARCHAR(300))
INSERT #T VALUES
    (1, 1, 'alpha'),
    (2, 2, 'hotel'),
    (3, 1, 'charlie'),
    (4, 1, 'echo'),
    (5, 1, 'gamma'),
    (6, 2, 'bravo'),
    (7, 2, 'delta');

SELECT  UserID,
        [Category1] = STUFF((   SELECT  ', ' + [Stuff]
                                FROM    #T t2
                                WHERE   [Stuff] IN ('alpha', 'bravo', 'delta', 'gamma')
                                AND     t.UserID = t2.UserID
                                FOR XML PATH(''), TYPE
                            ).value('.', 'NVARCHAR(MAX)'), 1, 2, ''),
        [Category2] = STUFF((   SELECT  ', ' + [Stuff]
                                FROM    #T t2
                                WHERE   [Stuff] IN ('charlie', 'echo', 'hotel')
                                AND     t.UserID = t2.UserID
                                FOR XML PATH(''), TYPE
                            ).value('.', 'NVARCHAR(MAX)'), 1, 2, '')
FROM    (   SELECT  DISTINCT UserID
            FROM    #T
        ) t 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/cabab/1)**

您可以在 CTE ( `Categories`) 的开头定义您的类别以提高可读性：

```
WITH Categories AS
(   SELECT  Category, Name
    FROM    (VALUES
                (1, 'alpha'), 
                (1, 'bravo'), 
                (1, 'delta'), 
                (1, 'gamma'),
                (2, 'charlie'),
                (2, 'echo'), 
                (2, 'hotel')
            ) t (Category, Name)
), Data AS
(   SELECT  UserID, [Stuff], Category
    FROM    T
            INNER JOIN Categories c
                ON c.Name = T.[Stuff]
)
SELECT  UserID,
        [Category1] = STUFF((   SELECT  ', ' + [Stuff]
                                FROM    Data t2
                                WHERE   Category = 1
                                AND     t.UserID = t2.UserID
                                FOR XML PATH(''), TYPE
                            ).value('.', 'NVARCHAR(MAX)'), 1, 2, ''),
        [Category2] = STUFF((   SELECT  ', ' + [Stuff]
                                FROM    Data t2
                                WHERE   Category = 2
                                AND     t.UserID = t2.UserID
                                FOR XML PATH(''), TYPE
                            ).value('.', 'NVARCHAR(MAX)'), 1, 2, '')
FROM    (   SELECT  DISTINCT UserID
            FROM    T
        ) t 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/cabab/8)**

# java - 如何使列表可序列化为 RPC？

> ID：14706074
> 
> 赞同：1
> 
> 时间：2013-02-05T11:08:08.613
> 
> 标签：java, gwt, serialization

我有一个我可以毫无问题`List<Foo> foos`地发送给一个。`GWT RPC service`但是，如果我将该列表包装到一个新对象中，我会在启动时遇到异常。

```
subtype MyDTO is not assignable to 'com.google.gwt.user.client.rpc.IsSerializable' or 'java.io.Serializable' nor does it have a custom field serializer (reached via MyDTO) 
```

为什么我可以发送列表本身，而不是包装对象？

和：

```
class MyDTO {
    List<Foo> foos; //containing Rectanlges (see below)
    public MyDTO() {}

    List<Foo> getFoos() { return foos; }
    void setFoos(List<Foo> foots) { this.foos = foos; }
} 
```

与 Foo 一起使用如下界面：

```
interface Foo {
    abstract int getX();
    abstract void setX(int x);
}

class Rectangle implements Foo {
    private int x;
    public Rectangle() {};

    //impl of foo methods
} 
```

当然这个结构没有多大意义，但它描述了我的问题。如果我只是通过 RPC 发送 List foos 一切正常。

如果我发送包含 foos 列表的 MyDTO 包装器，则会引发提到的异常。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:11:36.497

使 MyDTO 实现`Serializable`。`List`默认情况下是可序列化的。

# c# - 脱离上下文使用 LINQ 变量

> ID：14706078
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:08:14.483
> 
> 标签：c#, linq

如何在 if 块中使用“x”变量？如果语句为真，我想返回 x 的 Id 字段。

```
if (UserList.Any(x => x.Type == (int)UserType.SuperUser))
{
    return x.Id;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:09:58.373

您无法访问 lambda 表达式之外的“LINQ 变量”。

您要做的是获取满足条件`Id`的任何元素的属性。`x``x.Type == (int)UserType.SuperUser`

在这种情况下，将您`Any()`的替换为[`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/bb340482.aspx).

```
var item = UserList.FirstOrDefault(x => x.Type == (int)UserType.SuperUser);
if(item != null)
    return item.Id; 
```

`FirstOrDefault(x => condition on x)`返回满足条件的第一个元素，`null`如果没有元素满足条件。

如果要获取`Id`所有满足条件的元素的值，使用[`Where`](http://msdn.microsoft.com/en-us/library/bb534803.aspx)和[`Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)extension方法：

```
return UserList.Where(x => x.Type == (int)UserType.SuperUser).Select(x => x.Id); 
```

`Where(x => condition(x))`如果您希望获得“正常”列表，则返回`IEnumerable`包含满足条件的所有元素的 an，添加`ToList()`before `;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:14:19.073

您期望多少匹配：即您希望列表中有多少用户具有 SuperUser 类型？

如果您希望只有一个匹配的用户（因此匹配的用户为零或匹配的用户不止一个是错误的），那么使用 Single：

```
return UserList.Single(x => x.Type == (int)UserType.SuperUser).Id; 
```

（请注意，如果没有一个完全匹配的用户，这将引发异常；或者，您可以使用 SingleOrDefault 然后测试 null。）

如果您希望有一个或多个，而您只想返回第一个：

```
return UserList.First(x => x.Type == (int)UserType.SuperUser).Id; 
```

（请注意，如果没有一个完全匹配的用户，这将引发异常；或者，您可以使用 FirstOrDefault 然后测试是否为空。）

如果您希望有一个或多个，并且想要返回所有匹配用户的所有 Id 的数组：

```
return UserList.Where(x => x.Type == (int)UserType.SuperUser).Select(u => u.Id).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:47:14.653

只是为了添加已经发布的好答案。

要使 Sam Holloways 答案中的最后一个代码示例看起来像您直接使用 x ，您可以将其重写为类似 SQL 的语法（不记得那叫什么）：

```
IEnumerable<int> userIds = from x in UserList 
                                    where x.Type == UserType.SuperUser 
                                    select x.Id; 
```

您可以使用 userIds 上的 count 方法来确定是否有人满足您的条件。

由于您要返回 id，而且我猜 id 是一个 int，无论如何您都必须返回一些东西，而且我猜如果它不存在，您将返回 0，您可以使用：

```
return UserList.Where(x => x.Type == UserType.SuperUser).Select(x => x.Id).FirstOrDefault(); 
```

# php - 获取报价单的产品属性

> ID：14706080
> 
> 赞同：0
> 
> 时间：2013-02-05T11:08:17.237
> 
> 标签：php, magento, attributes, cart

您好我正在尝试从购物车项目中获取产品属性管理值或 ID（因为它是多语言）。我已经尝试过很多版本的代码，比如这个：

```
 $session = Mage::getSingleton('checkout/session');
    foreach ($session->getQuote()->getAllItems() as $item) {
        $_product = Mage::getModel('catalog/product')->load($item->getId());
        $attribute = $_product->getAttribute('producttype');
    } 
```

但我只会得到错误或空值。另外，我如何确保没有获得商店特定的语言值，而是属性管理值/id？也许有更好的方法可以直接从报价项目中读出项目属性，而无需先加载产品？提前致谢！

* * *

解决了：

```
 $session = Mage::getSingleton('checkout/session');
    foreach ($session->getQuote()->getAllVisibleItems() as $_item)
    {
        $_product = Mage::getModel('catalog/product')->load($_item->getProductId());
        $attributeId = $_product->getProducttype();
    } 
```

并按值 ID 而不是文本进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:12:57.913

如果您需要获取特定商店的产品价值，而报价中的商品属于不同的商店视图，您可以执行以下操作：

```
$_product = Mage::getModel('catalog/product')
    ->setStoreId($adminStoreId)
    ->load($item->getId());

$value = $_product->getData('producttype'); 
```

# javascript - 通过 jQuery Ajax POST 请求上传文件数据时出错

> ID：14706081
> 
> 赞同：0
> 
> 时间：2013-02-05T11:08:20.060
> 
> 标签：javascript, jquery, asp.net-mvc-3, odata

我在尝试通过 jQuery Ajax POST 请求上传大于 50kB 的文件时收到错误消息。我将请求发送到 OData 服务（ASP.Net MVC 应用程序）

我在浏览器控制台中收到的错误是“413 Request Entity Too Large”

下面是我用来上传的代码

```
 var fileData =
        {
            fileBinaryData:  encodedData //file data in encoded format ( 64 bit),
            Description: "my first file"
        };

    fileData = JSON.stringify(fileData);

 $.ajax({
     url: // some odata url ,
     type: "POST",
     data: fileData,
     success: function (res) {
        // do something
     },
     contentType: "application/json",
     beforeSend: function (xhr) {
         xhr.setRequestHeader("Accept", "application/json");
     }
 }); 
```

a) 以上代码是通过 jQuery ajax 将文件数据上传到服务的正确方法吗 b) 我已修改我的 web.config 以接受大型请求。c）我不想使用像uploadify之类的插件

编辑 1：我使用 javascripts 的 FileReader() 来读取文件。

```
 var reader = new FileReader();

    //then applied reader.onloadend method etc
    if (file.webkitSlice) {               
         var blob = file.slice(start, stop + 1);
     } else if (file.mozSlice) {
         var blob = file.mozSlice(start, stop + 1);
     }    
    reader.readAsBinaryString(blob); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:17:22.130

终于解决了使用 jQuery fileUpload 插件

# node.js - 生产中的 httpsys 模块

> ID：14706085
> 
> 赞同：0
> 
> 时间：2013-02-05T11:08:26.137
> 
> 标签：node.js

我有一个 nodejs 应用程序需要使用 Windows 商店中的证书在 Windows 中运行。为此，我找到了一个名为 httpsys 的模块，我可以将特定端口绑定到证书。所以我想知道这个模块是否已经在 prod 中使用，以及使用它是否有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:16:48.043

模块作者说

> 这是该模块的一个非常早期的版本。没有做太多的测试或性能优化。

我想目前还没有太多经验，但为什么不自己尝试一下，给开发者一些反馈呢？

# google-maps - android：如何使用 android-support-v4-r6-googlemaps.jar 访问 NotificationCompat.Builder？

> ID：14706088
> 
> 赞同：1
> 
> 时间：2013-02-05T11:08:32.530
> 
> 标签：google-maps, android-notifications, android-support-library

在我的应用程序中，我只使用一个 FragmentActivity 并将所有其他功能实现为 Fragments。该应用程序应兼容至 Android 1.6。

由于我需要一个 Mapview，我实现了 android-support-v4-r6-googlemaps.jar，效果很好。

现在我必须实现一个带有通知的警报系统，然后我就卡住了。对于通知，我似乎需要 NotificationCompat.Builder，它位于 android-support-v4.jar 中，但不在我的 support-library 中。我不能在同一个应用程序中使用这两个库，但我至少需要来自 android-support-v4.jar 的 Notification 包。我可以以某种方式提取这个包吗？或者有没有其他解决方案？

我在很多小时内一直在寻找解决方案，但找不到任何帮助。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:46:35.573

我一直有同样的问题。

现在我只是检查 android 版本，对旧版本使用弃用的方法并抑制弃用警告。

不是一种非常干净的处理方式，但现在，它会做。

# asp.net - css不能在ajax组合框上工作

> ID：14706092
> 
> 赞同：0
> 
> 时间：2013-02-05T11:08:45.237
> 
> 标签：asp.net, css, ajax, combobox

早期的组合框工作正常。但是在将 css 应用到网页后，组合框 itemlist 会落在页面上的其他位置。它恰好将css应用于页面。网页图片如下所示：

![在此处输入图像描述](../Images/e6b5e2d4ad8801e683258c5d7e01f766.png)

我用过以下css。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
<style type="text/css">
    body {
        font-size: .813em;
        max-width: 1244px;
        padding-left: 12px;
        padding-right: 12px;
        margin: 0;
        margin-left: auto;
        margin-right: auto;
        font: .875em/1.35 'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif;
        background-color:white;
        color: #2a2a2a;   
        line-height: 1.538;    
        height: 100%;
        display: block;
    }

    #Container {
        /*max-width:90%;*/
        clear:right;
        margin-right:auto;
        margin-left:auto;  
        min-width: inherit;
        position: relative;   
        width:inherit; 
    }

    #ux-header {
        padding: 20px 0 0;
        clear: right;
        font-size: .813em;
        line-height: 1.538;
        font-family: 'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif;
        color: #959595;
        position: relative;
        z-index: 9998;
        background-color:#eee;
    }

        #ux-header .BrandLogo {
            margin: 0;
            float: left;
            height: 40px;
            overflow: hidden;
        }

        #ux-header .GlobalBar {
            margin: 0;
            overflow: hidden;
            width: 330px;
            width: auto;
            float: right;
            line-height: 1.25;
            font-size: 12px;
        }

        #ux-header .internav {
            padding: 5px 0 12px;
            margin: 0;
            line-height: 1.75;
            font: 14px 'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif;
            border-bottom: solid 1px #ccc;
            clear: both;
        }

    div#body {
        padding-top: 35px;
        clear: both;
        min-width:inherit;
        max-height:100%;
        width:auto;
    }

    div#form {
        margin: 0;
        position:relative;    
        max-width:initial;
       width:auto;       
    }

    div#leftNav {
        width: auto;
        margin: 0 -1px 0 0;
        border-right: 1px solid #b6b6b6;
        float: left;
        position: relative;
    }

        div#leftNav.leftNavResize1 {
          width:750px;
        }
    div#Content1.leftform {    
        float:left;
        margin:10px 0px 10px 20px;

    }
    div#Content2.rightImage {
        float:left;
        margin:10px 60px 10px 0px;
        width:auto;    
        text-align:center;
    }

    div#form {
        width:60%;
        float:left;
    }

    div#content {
        border-left: 1px solid #b6b6b6;
        padding-left: 20px;
        margin: 0;
        overflow-x: auto!important;
        min-height: 300px;
        word-wrap: break-word;
        width:auto;    
    }

    .topic .title {
        font-family: Segoe UI,Verdana,Arial;
    }

    h1, h1.heading {
        font-size: 3em;
        color: #707070;
    }

    h1 {
        color: #707070;
        font: 100 2.571em/1.167 'Segoe UI Light','Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif;
        margin-top: 0;
        display: block;
        font-size: 2em;
        /*-webkit-margin-before: 0.67em;*/
        -webkit-margin-after: 0.67em;
        -webkit-margin-start: 0px;
        -webkit-margin-end: 0px;
        /*font-weight: bold;*/
    }

    input[type="text"] {
         border-radius: 5px;
         border: 1px solid #999;
         font-family: 'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif;
         width:197px;
         padding:3px;
         border-spacing:3px;
         margin-left:0px;
         margin-right:auto;
    }

        input[type="text"]:focus {
            outline: none;
            box-shadow: 0px 0px 5px #61C5FA;
            border: 1px solid #5AB0DB;
            border-radius: 5px;
            font-family:inherit;
        }

        input[type="text"]:hover {
            border: 1px solid #999;
            border-radius: 5px;
            box-shadow: 0px 0px 5px #61C5FA;
            font-family:inherit;
        }

        input[type="text"]:focus:hover {
            outline: none;
            box-shadow: 0px 0px 5px #61C5FA;
            border: 1px solid #5AB0DB;
            border-radius: 5px;
            font-family:inherit;
        }

    select {
         border-radius: 5px;
         border: 1px solid #999;
         font-family: 'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif;
         width:204px;
         padding:3px;
         border-spacing:3px;
         margin-left:0px;
         margin-right:auto;
    }
        select:focus {
            outline: none;
            box-shadow: 0px 0px 5px #61C5FA;
            border: 1px solid #5AB0DB;
            border-radius: 5px;
            font-family:inherit;
        }

        select:hover {
            border: 1px solid #999;
            border-radius: 5px;
            box-shadow: 0px 0px 5px #61C5FA;
            font-family:inherit;
        }

        select:focus:hover {
             outline: none;
            box-shadow: 0px 0px 5px #61C5FA;
            border: 1px solid #5AB0DB;
            border-radius: 5px;
            font-family:inherit;
        }

    textarea {
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
        border: 1px solid #999;
        font-family: 'Segoe UI','Lucida Grande',Verdana,Arial,Helvetica,sans-serif;
        width: 200px;
        height:45px;
        border-spacing:3px;
        margin-left:0px;
         margin-right:auto;
    }

        textarea:focus {
            outline: none;
            box-shadow: 0px 0px 5px #61C5FA;
            border: 1px solid #5AB0DB;
            border-radius: 5px;
            font-family:inherit;
        }

        textarea:hover {
            border: 1px solid #999;
            border-radius: 5px;
            box-shadow: 0px 0px 5px #61C5FA;
            font-family:inherit;
        }

        textarea:focus:hover {
             outline: none;
            box-shadow: 0px 0px 5px #61C5FA;
            border: 1px solid #5AB0DB;
            border-radius: 5px;
            font-family:inherit;
        }

    table {
        border-spacing:2.5px;
        column-width:auto;
        margin:auto;    
        vertical-align:middle;
    } 
```

html代码

```
<body class="body">
    <form id="form1" runat="server">
    <div id="Container">
        <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></asp:ToolkitScriptManager>
        <div id="ux-header" class="Chrome ltr">
            <div class="BrandLogo">
            <a href="http://msdn.microsoft.com/en-us">
                <span class="BrandLogoImage msdn" title="MSDN"></span>
            </a>
            </div>
            <div class="GlobalBar">

            </div>
            <div class="internav">            

            </div>
        </div>
        <div id="body">        
            <div id="leftNav" class="leftNavResize1">
                <div class="topic" xmlns="http://www.w3.org/1999/xhtml">
                    <h1 class="title">Pest Master</h1>                   
                </div> 
                <div id="form">
                    <table style="width:auto;float:left">
                        <tr>
                            <td style="width:25%">
                                <asp:Label ID="Label1" runat="server" Text="Pest Classification"></asp:Label>
                            </td>
                            <td style="width:45%">
                                <asp:DropDownList ID="ComboBox1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="ComboBox1_SelectedIndexChanged"></asp:DropDownList>
                            </td>                            
                        </tr>
                        <tr>
                            <td>
                                <asp:Label ID="Label2" runat="server" Text="Pest Name"></asp:Label>
                            </td>
                            <td>
                                <asp:ComboBox ID="ComboBox2" runat="server" AutoPostBack="True" OnSelectedIndexChanged="ComboBox2_SelectedIndexChanged" Width="172px"></asp:ComboBox>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <asp:Label ID="Label3" runat="server" ForeColor="" Text="Measurement Unit"></asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <asp:Label ID="Label4" runat="server" Text="Pest Description"></asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="TextBox2" runat="server" TextMode="MultiLine"></asp:TextBox>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <asp:Label ID="Label5" runat="server" Text="Pest Function"></asp:Label>
                            </td>
                            <td>
                                <asp:DropDownList ID="DropDownList1" runat="server"></asp:DropDownList>
                            </td>
                        </tr>
                        <tr>    
                            <td>
                                <asp:Label ID="Label6" runat="server" Text="Function Description"></asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="TextBox3" runat="server" TextMode="MultiLine"></asp:TextBox>                                
                            </td>
                        </tr>
                <%--         <tr>
                            <td >

                            </td>
                            <td>

                            </td>
                        </tr>
           <tr>
                <td>
                    <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/Images/cl.png" AlternateText="abc" Width="150px" Height="40px" OnClick="ImageButton1_Click"/>
                </td>
                <td>
                    <asp:TextBox ID="TextBox4" runat="server" TextMode="MultiLine" Width="175px"></asp:TextBox>
                </td>
            </tr>--%>
                    </table>
                    <div style="width:22%;float:left;margin-top:5px;margin-left:70px">
                        <asp:Button ID="Button1" runat="server" CssClass="pivot-switch" Text="Save" ValidationGroup="validate" OnClick="Button1_Click" />
                    </div>
                    <div style="width:22%;float:left;margin-top:5px;margin-left:0px">
                        <asp:Button ID="Button4" runat="server" CssClass="pivot-switch" Text="Delete" OnClick="Button4_Click" />
                    </div>
                </div>               
                <div id="Content2" class="rightImage">
                         <asp:Image ID="Image1" ImageUrl="~/Images/pest2.jpg" Width="160px" runat="server" />
                    </div>               
            </div>        
            <div id="content" class="content">    
                <div>
                    <asp:GridView ID="GridView1" AutoGenerateColumns="false" CssClass="mGrid" runat="server" OnRowDataBound="GridView1_RowDataBound" OnSelectedIndexChanged="GridView1_SelectedIndexChanged">
                        <Columns>
                            <asp:TemplateField HeaderText="Sno" ItemStyle-HorizontalAlign="Center">
                                <ItemTemplate>
                                    <%# ((GridViewRow)Container).RowIndex +1 %>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Pest Classification">
                                <ItemTemplate>
                                    <asp:Label ID="Label8" runat="server" Text='<%#Eval("PestClassification") %>'></asp:Label>                                    
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText ="Pest Name">
                                <ItemTemplate>
                                    <asp:Label ID="Label9" runat="server" Text='<%#Eval("PestName") %>'></asp:Label>                                   
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField Visible="false">
                                <ItemTemplate>
                                    <asp:Label ID="Label10" runat="server" Text='<%#Eval("PID") %>'></asp:Label>                                   
                                </ItemTemplate>
                            </asp:TemplateField> 
                             <asp:TemplateField  Visible="false">
                                <ItemTemplate>
                                    <asp:Label ID="Label12" runat="server" Text='<%#Eval("FunctionDescription") %>'></asp:Label>                                   
                                </ItemTemplate>
                            </asp:TemplateField> 
                             <asp:TemplateField Visible="false">
                                <ItemTemplate>
                                    <asp:Label ID="Label13" runat="server" Text='<%#Eval("MeasurementUnit") %>'></asp:Label>                                   
                                </ItemTemplate>
                            </asp:TemplateField> 
                             <asp:TemplateField Visible="false">
                                <ItemTemplate>
                                    <asp:Label ID="Label14" runat="server" Text='<%#Eval("CID") %>'></asp:Label>                                   
                                </ItemTemplate>
                            </asp:TemplateField>        
                             <asp:TemplateField Visible="false">
                                <ItemTemplate>
                                    <asp:Label ID="Label15" runat="server" Text='<%#Eval("GroupID") %>'></asp:Label>                                   
                                </ItemTemplate>
                            </asp:TemplateField>  
                               <asp:TemplateField Visible="false">
                                <ItemTemplate>
                                    <asp:Label ID="Label16" runat="server" Text='<%#Eval("PestDescription") %>'></asp:Label>                                   
                                </ItemTemplate>
                            </asp:TemplateField>                  
                        </Columns>
                    </asp:GridView>   
                 </div>                                                                             
            </div>
        </div>
        <!-- ModalPopupExtender -->
        <asp:HiddenField ID="HiddenField1" runat="server" />
         <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server"  
                PopupControlID="Panel2" TargetControlID="HiddenField1"
                CancelControlID="btnClose" BackgroundCssClass="modalBackground"></asp:ModalPopupExtender>
         <asp:Panel ID="Panel2" runat="server" CssClass="modalPopup" align="center" style = "display:none">
            record successfully updated<br />            
            <asp:Button ID="btnClose" runat="server" Text="Close" />            
        </asp:Panel>
        <!-- ModalPopupExtender -->

         <!-- ModalPopupExtender -->

         <asp:ModalPopupExtender ID="ModalPopupExtender2" runat="server"  
                PopupControlID="Panel1" TargetControlID="Button3"
                CancelControlID="btnClose" BackgroundCssClass="modalBackground"></asp:ModalPopupExtender>
         <asp:Panel ID="Panel1" runat="server" CssClass="modalPopup" align="center" style = "display:none">
            <table>
                <tr>
                    <td>
                        <asp:Label ID="Label7" runat="server" Text="abc"></asp:Label></td>
                    <td>
                        <asp:TextBox ID="TextBox5" runat="server" TextMode="MultiLine"></asp:TextBox></td>
                </tr>
                <tr>
                    <td>
                        <asp:Button ID="Button3" runat="server" Text="Save" /></td>
                    <td><asp:Button ID="Button2" runat="server" Text="Close" />  </td>
                </tr>
            </table>            

        </asp:Panel>
        <!-- ModalPopupExtender -->

        <!--confirmbuttonextender-->
        <asp:ConfirmButtonExtender ID="ConfirmButtonExtender1" TargetControlID="Button4" ConfirmText="do u want to delete" runat="server"></asp:ConfirmButtonExtender>
        <!--confirmbuttonextender-->

        <asp:Panel ID="Panel3" runat="server">
            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ValidationGroup="validate" ControlToValidate="ComboBox1" SetFocusOnError="true" InitialValue="0" Display="None" ErrorMessage="Select One Option"></asp:RequiredFieldValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender1" TargetControlID="RequiredFieldValidator1" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ValidationGroup="validate" ControlToValidate="ComboBox2" SetFocusOnError="true" InitialValue="-1" Display="None" ErrorMessage="Select One Option or enter pest name"></asp:RequiredFieldValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender2" TargetControlID="RequiredFieldValidator2" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ValidationGroup="validate" ControlToValidate="TextBox1" SetFocusOnError="true" Display="None" ErrorMessage="enter measurement unit"></asp:RequiredFieldValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender3" TargetControlID="RequiredFieldValidator3" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ValidationGroup="validate" ControlToValidate="TextBox2" SetFocusOnError="true" Display="None" ErrorMessage="enter pest description"></asp:RequiredFieldValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender4" TargetControlID="RequiredFieldValidator4" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ValidationGroup="validate" ControlToValidate="DropDownList1" SetFocusOnError="true" InitialValue="0" Display="None" ErrorMessage="Select One Option"></asp:RequiredFieldValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender5" TargetControlID="RequiredFieldValidator5" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator6" runat="server" ValidationGroup="validate" ControlToValidate="TextBox3" SetFocusOnError="true" Display="None" ErrorMessage="enter functional description"></asp:RequiredFieldValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender6" TargetControlID="RequiredFieldValidator6" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RegularExpressionValidator ID="RegularExpressionValidator4" runat="server" ValidationGroup="validate" ValidationExpression="^[a-zA-Z0-9\s\.]*$" Display="None" SetFocusOnError="true" ControlToValidate="ComboBox2" ErrorMessage="invalid input"></asp:RegularExpressionValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender10" TargetControlID="RegularExpressionValidator4" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ValidationGroup="validate" ValidationExpression="^[a-zA-Z0-9\s\.]*$" Display="None" SetFocusOnError="true" ControlToValidate="TextBox1" ErrorMessage="invalid input"></asp:RegularExpressionValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender7" TargetControlID="RegularExpressionValidator1" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RegularExpressionValidator ID="RegularExpressionValidator2" runat="server" ValidationGroup="validate" ValidationExpression="^[a-zA-Z0-9\s\.]*$" Display="None" SetFocusOnError="true" ControlToValidate="TextBox2" ErrorMessage="invalid input"></asp:RegularExpressionValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender8" TargetControlID="RegularExpressionValidator2" runat="server"></asp:ValidatorCalloutExtender>
            <asp:RegularExpressionValidator ID="RegularExpressionValidator3" runat="server" ValidationGroup="validate" ValidationExpression="^[a-zA-Z0-9\s\.]*$" Display="None" SetFocusOnError="true" ControlToValidate="TextBox3" ErrorMessage="invalid input"></asp:RegularExpressionValidator>
            <asp:ValidatorCalloutExtender ID="ValidatorCalloutExtender9" TargetControlID="RegularExpressionValidator3" runat="server"></asp:ValidatorCalloutExtender>
        </asp:Panel>
    </div>
    </form>
</body> 
```

请提出一些建议。

# mysql - MySQL更新不允许的标头名称？

> ID：14706097
> 
> 赞同：0
> 
> 时间：2013-02-05T11:09:25.870
> 
> 标签：mysql, sql-update

为了避免撕掉我的头发，我想我只是在这里提出这个问题，因为我对 PHP Mysql 更新感到很恼火：我经常使用的东西，我认为我理解了！

基本上，是否有任何已知会破坏 MySQL 更新功能的表头名称？我有一个运行良好的更新 mysql_query 函数，例如：

```
UPDATE table_name SET
part_number='000 - New Product',
product_code='1',
barcode_ref='1',
type='new type'
WHERE id='999' 
```

但是，如果我在代码中包含名为“触发器”的表头，它会破坏它！

```
UPDATE table_name SET
part_number='000 - New Product',
trigger='YES',
product_code='1',
barcode_ref='1',
type='new type'
WHERE id='999' 
```

上面的sql返回错误：`**You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'trigger='YES', part_number='000 - New Product', product_code='1', barcod' at line 1**`

我对名为“trigger”的列进行了相同的复制，并将其重新命名为“testing_t”，并且立即一切都像以前一样完美。我已经尝试将我的 mysql_real_escape_string 转储到变量以在 UPDATE 命令中使用并内联执行它们，甚至尝试对字符串进行硬编码，但它仍然会中断。

任何人都可以对此有所了解吗？理想情况下，我真的不想更改我的表头名称，因为我不想在整个站点上修改对它的引用。显然，如果没有其他选择，那么我会的，但我希望我只是愚蠢，并且有人可以解释它为什么会发生/如何阻止它发生！

提前致谢，

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:10:47.040

使用这个查询

```
UPDATE table_name SET
`part_number`='000 - New Product',
`trigger`='YES',
`product_code`='1',
`barcode_ref`='1',
`type`='new type'
WHERE id='999' 
```

您的查询将失败，因为您没有`trigger`写````

`trigger`是 mysql 中用于创建触发器的保留字。

要将保留字用作列名，您必须在里面写下该字````

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:14:15.323

`trigger`是一个 mySQL 关键字。如果您将所有列名括在 `` 中，您将是安全的。最好不要将这些关键字用作列名。

其他关键字在这里[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:13:16.843

mySQL 有一系列保留字，TRIGGER 就是其中之一。请参阅此单词列表作为指南，以了解不应调用列/表的内容：

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# c# - 互联网日历文件“abc.ics”不包含任何约会

> ID：14706099
> 
> 赞同：2
> 
> 时间：2013-02-05T11:09:30.123
> 
> 标签：c#, asp.net, icalendar

我创建了一个 .ics VTODO 日历，但是当我在 Microsoft Outlook 中打开该文件时，它显示以下错误

![在此处输入图像描述](../Images/d98f101c741dbab14364710b9c30c724.png)

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//DDay.iCal//NONSGMLddaysoftware.com//EN
BEGIN:VTODO
CREATED:20070101T000000Z
DESCRIPTION:fdsdsfds
DTSTAMP:20070101T000000Z
DTSTART:20070101T080000
DUE;VALUE=DATE:20070107
DURATION:P5DT16H
SEQUENCE:0
STATUS:NEEDS-ACTION
SUMMARY:xxxx
UID:b6709c95-5523-46aa-a7e5-1b5ea034b86a
BEGIN:VALARM
ACTION:DISPLAY
DESCRIPTION:Reminder
TRIGGER:-PT30M
END:VALARM
END:VTODO
END:VCALENDAR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-28T23:06:40.167

Outlook 不支持 VTODO：请参阅 Microsoft 的规范 ( [https://msdn.microsoft.com/en-gb/library/cc463911.aspx](https://msdn.microsoft.com/en-gb/library/cc463911.aspx) )

# java - 使用 Class.forName 获取课程

> ID：14706113
> 
> 赞同：4
> 
> 时间：2013-02-05T11:10:07.600
> 
> 标签：java, reflection

看看下面的这一行：

```
targetClass = Class.forName(className).newInstance().getClass(); 
```

我的问题是他为什么要调用 newInstance().getClass();

写就够了吗

```
targetClass = Class.forName(className); 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:14:17.463

调用 没有意义 `newInstance().getClass()`，因为它会产生与`Class`实例化相同的实例。

相反，它会创建一个额外的实例，该实例将立即被“删除”。如果类没有默认构造函数，即使它也不起作用。

此外，实例化、初始化等的成本可能是显着的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:17:52.577

是的。

```
Class<T> targetClass = Class<T>.forName(className); 
```

对象创建更好地使用 getConstructor。

```
T obj = targetClass.getConstructor().newInstance(); 
```

调用[Class.newInstance](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)会出现 javadoc 中提到的问题。

# wpf - WPF：将依赖属性格式化为字符串以显示在文本块中的正确方法是什么？

> ID：14706117
> 
> 赞同：2
> 
> 时间：2013-02-05T11:10:17.650
> 
> 标签：wpf, wpf-controls

[这是基于上一个问题的答案](https://stackoverflow.com/a/14663560/2006434)的后续行动。我设法提出了一个 DependencyProperty，它将使用计时器进行更新以始终具有最新的日期时间，以及一个显示日期时间的文本块。由于它是一个 DependencyProperty，每当计时器更新值时，文本块也会显示最新的 DateTime。

依赖对象

```
 public class TestDependency : DependencyObject
    {
        public static readonly DependencyProperty TestDateTimeProperty =
            DependencyProperty.Register("TestDateTime", typeof(DateTime), typeof(TestDependency),
            new PropertyMetadata(DateTime.Now));

        DispatcherTimer timer;

        public TestDependency()
        {
            timer = new DispatcherTimer(new TimeSpan(0,0,1), DispatcherPriority.DataBind, new EventHandler(Callback), Application.Current.Dispatcher);
            timer.Start();

        }

        public DateTime TestDateTime
        {
            get { return (DateTime)GetValue(TestDateTimeProperty); }
            set { SetValue(TestDateTimeProperty, value); }
        }

        private void Callback(object ignore, EventArgs ex)
        {
            TestDateTime = DateTime.Now;
        }

    } 
```

窗口 Xaml

```
 <Window.DataContext>
        <local:TestDependency/>
    </Window.DataContext>
    <Grid>
        <TextBlock Text="{Binding TestDateTime}" />
    </Grid> 
```

这很好用，但我想知道，如果我想以不同的方式格式化时间字符串，我该怎么办，有没有办法`ToString(formatter)`在日期时间上调用它，然后在文本块中显示它，同时保持使用 DependencyProperty 自动更新文本块的能力？如果可能的话，在后面的代码中执行此操作的正确方法是什么，以及在 Xaml 中执行此操作的正确方法是什么？

而且，如果我要显示多个文本框，每个文本框都有不同的日期时间格式，那么仅使用 1 个计时器在不同文本框中显示所有不同日期时间格式的正确方法是什么，我是否必须为每种格式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T11:29:14.000

您可以为此使用字符串格式：

```
<Window.DataContext>
    <wpfGridMisc:TestDependency/>
</Window.DataContext>
<StackPanel>
    <TextBlock Text="{Binding TestDateTime, StringFormat=HH:mm:ss}"/>
    <TextBlock Text="{Binding TestDateTime, StringFormat=MM/dd/yyyy}"/>
    <TextBlock Text="{Binding TestDateTime, StringFormat=MM/dd/yyyy hh:mm tt}"/>
    <TextBlock Text="{Binding TestDateTime, StringFormat=hh:mm tt}"/>
    <TextBlock Text="{Binding TestDateTime, StringFormat=hh:mm}"/>
    <TextBlock Text="{Binding TestDateTime, StringFormat=hh:mm:ss}"/>
</StackPanel> 
```

另外我认为您应该在更新 DependencyProperty 时使用 SetCurrentValue()，您可以[在此处阅读原因](https://stackoverflow.com/a/4232379/1069200)

```
private void Callback(object ignore, EventArgs ex)
{
    SetCurrentValue(TestDateTimeProperty, DateTime.Now);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:32:27.040

Binding 有一个[StringFormat](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)属性：

```
<TextBlock Text="{Binding TestDateTime, StringFormat=HH:mm:ss}"/> 
```

另请参阅[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)和[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

# java - java api将java对象转换为json/json到java对象

> ID：14706122
> 
> 赞同：0
> 
> 时间：2013-02-05T11:10:26.180
> 
> 标签：java, json, api

我需要一个 API 来将 Java 对象转换为 Json 并将 Json 转换为 Java 对象。我在网上搜索了我找到**Gson**和**Jackson**的地方。

谁能帮我看看它们之间有什么区别，哪个是最好用的。或任何其他 API 建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:32:54.870

你也有[Genson](http://code.google.com/p/genson/)。

它的主要优点是易于使用、易于扩展和定制、性能和良好的功能。

它的一些特点是：

*   处理多态类型
*   做有和没有注释的事情的能力
*   反序列化到 pojos，即使它们不提供默认构造函数（并且实际上传递的值不仅仅是 null），而无需任何额外的代码
*   与泽西岛的开箱即用集成（0 代码）

# c# - json.net 与 c 锐利

> ID：14706124
> 
> 赞同：-2
> 
> 时间：2013-02-05T11:10:27.473
> 
> 标签：c#, json.net

```
string jsondata = @"{""meta"":{""code"":200}}";
dynamic json = JsonConvert.DeserializeObject(jsondata); 
```

我有上面的 json 数据，并为它创建了类。我也反序列化了它 - 我如何迭代这个 json 变量

```
public class Meta
{
    public int code { get; set; }
}

public class RootObject
{
    public Meta meta { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:14:14.777

要使用您的代码，您应该使用类型化的转换

```
string jsondata = @"{""meta"":{""code"":200}}"; 
Meta json = JsonConvert.DeserializeObject<Meta>(jsondata); 
```

然后您可以访问元 obj 中的所有成员。

* * *

使用普通的 .net json 运行时，您可以反序列化字符串

```
string jsondata = @"{""meta"":{""code"":200}}"
Meta meta = JsonHelper.JsonDeserialize<Meta>(jsondata); 
```

有关更多信息，请参阅[http://www.codeproject.com/Articles/272335/JSON-Serialization-and-Deserialization-in-ASP-NET](http://www.codeproject.com/Articles/272335/JSON-Serialization-and-Deserialization-in-ASP-NET)

你需要有这个代码

```
 using System;
 using System.Collections.Generic;
 using System.Linq;
 using System.Web;
 using System.Runtime.Serialization.Json;
 using System.IO;
 using System.Text;  
 /// <summary>
 /// JSON Serialization and Deserialization Assistant Class
 /// </summary>
 public class JsonHelper
 {
     /// <summary>
     /// JSON Serialization
     /// </summary>
     public static string JsonSerializer<T> (T t)
     {
         DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
         MemoryStream ms = new MemoryStream();
         ser.WriteObject(ms, t);
         string jsonString = Encoding.UTF8.GetString(ms.ToArray());
         ms.Close();
         return jsonString;
     }  
     /// <summary>
     /// JSON Deserialization
     /// </summary>
     public static T JsonDeserialize<T> (string jsonString)
     {
         DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
         MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(jsonString));
         T obj = (T)ser.ReadObject(ms);
         return obj;
     }
 } 
```

# wireless - TinyOS 中的数据包确认

> ID：14706131
> 
> 赞同：2
> 
> 时间：2013-02-05T11:10:44.980
> 
> 标签：wireless, tinyos, nesc

我正在使用 telosB 微粒进行实施。我遇到了一种确认数据包的方法，

```
task void send() {
    call PacketAcknowledgements.requestAck(&myMsg);
    if(call AMSend.send(1, &myMsg, 0) != SUCCESS) {
      post send();
    }
  }
 event void AMSend.sendDone(message_t *msg, error_t error) {
    if(call PacketAcknowledgements.wasAcked(msg))
      // do something if packet was acked
    else
      // do something else if packet was not acked (possibly resend)
  } 
```

实际上我的疑问是，接收节点应该必须确认数据包，或者它的应用程序中应该有 PacketAcknowledgements 接口才能发送 ACK。这种类型的确认是如何工作的？

而且我已经检查了我自己的确认类型，它的工作方式就像在收到数据包后，mote 确认数据包，如果源 mote 在特定时间范围内没有收到肯定的 ack，则重新传输数据包。

那么哪种方式更好呢？

请指导，谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T00:45:18.340

在 TinyOS 中，确认是在最低的通信抽象级别 - 活动消息[[1]](http://www.tinyos.net/tinyos-2.x/doc/html/tep116.html)上实现的。这意味着任何使用活动消息操作的组件都具有对同步确认的内置支持。

> 实际上我的疑问是，接收节点应该必须确认数据包，或者它的应用程序中应该有 PacketAcknowledgements 接口才能发送 ACK。

如果您曾经`PacketAcknowledgements.requestAck(&myMsg)`请求确认，那么您不必在 Receive.receive 事件处理程序中编写额外的代码来处理确认，因为这是由底层通信层为您完成的。您需要做的就是将组件/模块使用的 PacketAcknowledgements 接口连接到提供者之一（AMSenderC 或 ActiveMessageC）。

> 这种类型的确认是如何工作的？

高级想法如下 - 调用`PacketAcknowledgements.requestAck(&myMsg)`在数据包头中设置一个标志，并告诉发送方组件在收到确认（或超时）之前不要发出 sendDone 事件。当接收器组件在另一端处理数据包时，它会读取标志并在请求时发送和确认。

说了这么多，你对数据包的确认方式的描述似乎与 PacketAcknowledgements 提供的非常相似，所以我个人会避免自己编写额外的代码来处理确认并坚持使用提供的工具。

# iphone - CNCopySupportedInterfaces 提供所有已配置 Wifi 接口信息的列表，还是仅列出当前处于活动状态的一个？

> ID：14706134
> 
> 赞同：2
> 
> 时间：2013-02-05T11:10:50.213
> 
> 标签：iphone, ios5, captivenetwork

我想使用`CNCopySupportedInterfaces`API 来获取 Wifi 接口的 SSID。但我只是对 API 有疑问`CNCopySupportedInterfaces`。此 API 会提供所有已配置 Wifi 接口的列表，还是仅提供一个当前处于活动状态的接口或有关当时可访问（但未配置）的所有接入点的信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T11:17:54.340

`CNCopySupportedInterfaces`和`CNCopyCurrentNetworkInfo`CaptiveNetwork ，[只会](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)提供您连接的 wifi 名称和详细信息，如果不使用`private library (Apple80211)`它，将不会为您提供其他可访问的 wifi 列表或其他信息。

您可以参考：[如何使用 CaptiveNetwork 获取当前 WiFi 热点名称](https://stackoverflow.com/q/4712535/1241690)以获取更多信息。

如果您对 Apple80211 感兴趣，可以查看[iphone-wireless 项目。](http://code.google.com/p/iphone-wireless/)存在一个示例应用程序[“Stumber”](http://code.google.com/p/iphone-wireless/wiki/Stumbler)，它完全符合您的要求。但是如果你想发布到 App Store，你不能在你的应用程序中使用它，因为它使用私有 API。Apple 拒绝使用私有 API 的应用程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-12T17:47:47.123

从 iOS 9 Beta 4 开始，不推荐使用 CNCopySupportedInterfaces。随之而来的痛苦万分……

[https://forums.developer.apple.com/message/31340#31340](https://forums.developer.apple.com/message/31340#31340)

# java - StringBuilder 与连接字符串和 int（或任何其他数字）

> ID：14706142
> 
> 赞同：1
> 
> 时间：2013-02-05T11:11:03.953
> 
> 标签：java

什么是更好的

```
int i = 45;
String str = "dsfgdsgf"+i; 
```

或者

```
int i = 45;
String str = new StringBuilder().append("dsfgdsgf").append(i).toString(); 
```

我在某处读到 StringBuilder 总是比连接字符串更好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T11:17:08.080

性能没有差异，因为编译器会在内部将第一个版本转换为第二个版本。

由于第一个版本更具可读性，您应该在将固定数量的项目连接成字符串时使用它。

`StringBuilder`当您多次附加到字符串时使用，例如在循环中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T11:17:17.833

在这两种情况下不应该有性能差异：[prooflink](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.18.1.2)。编译器隐式使用 StringBuilder 来连接字符串。

当然，在大多数情况下，**1**案例比**2更具可读性。**

在显式转换整数值方面也没有太大差异：

StringBuilder 转换使用[AbstractStringBuilder#append(int)](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/AbstractStringBuilder.java#AbstractStringBuilder.append%28int%29)和使用[String#valueOf(int)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf%28int%29)显式转换调用[Integer#toString(int)](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.toString%28int%29)内部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T11:15:05.710

如果您只是以已知格式连接值，请考虑：

```
int i = 45;
String str = String.format("%s%d", "dsfgdsgf", i); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T11:24:20.580

Java 中的字符串是不可变的对象。这意味着通过编写`String str = "dsfgdsgf"+i;`您实际上是在创建一个新的 String 对象并将旧对象留给垃圾收集器。

`StringBuilder`另一方面是一个可变对象，因此该对象被修改。最好你应该使用`StringBuilder.append()`或`StringBuffer.append()`尽可能。

注意`StringBuilder`不是`synchronized`，`StringBuffer`而是。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T11:15:01.727

我们应该使用 StringBuilder，如果您通过附加、删除等多次修改字符串。在您的情况下，您正在使用 StringBuilder 并再次将其转换为 String。我认为您使用第二种方法不会节省太多，因为您是创建一个新的 StringBuilder 对象并附加并再次将其转换为 String

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T11:15:42.247

是的，StringBuilder 比连接字符串更好。当您使用以下代码行时`String str = "dsfgdsgf"+i;`

它在内部使用 StringBuilder。所以你只是通过直接使用 StringBuilder 来避免额外的步骤。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-05T11:16:27.900

您的第二个选项更好，因为它不可能与字符串连接；因此，在进行连接之前，必须先将 String 转换为 StringBuilder，然后再将结果转换回 String。

# javascript - 根据收到的 JSON 的 Ember 数据模型

> ID：14706146
> 
> 赞同：0
> 
> 时间：2013-02-05T11:11:11.540
> 
> 标签：javascript, json, ember.js, jsonp, ember-data

我得到具有如下结构的 JSON：

```
{
  "description":"text",
  "images":[{"id":"1","url":"image url"},{"id":"2","url":"url"}],
  "seats":3,
  "taken_seats":[{"number":1,"id":"1"},{"number":3,"id":"2"}],
  "title":"vel ad eius",
  "id":"1",
  "options":[]
} 
```

如何结构化 DS.model 来处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:50:04.133

**字符串值**（描述、标题）将使用`DS.attr('string')`

**数量**（座位）将使用`DS.attr('number')`

**数组**（图像、采取的座位、选项）将使用类似的关系`DS.hasMany('App.Image')`，您必须在适配器中设置映射才能[在此处](https://stackoverflow.com/a/14521612/793002)`embedded`查看详细信息。

您可能觉得您不需要数组的关系，例如，如果您不想/可以在选项数组中列出对象的可能键。解决方案是根据您的需要注册一个自定义转换，然后您可能会遇到一些异常行为，尤其是`isDirty`对象的标志，有关详细信息，请参见[此处](https://stackoverflow.com/a/14697200/793002)

# bash - bash中的多个命令优先级

> ID：14706147
> 
> 赞同：1
> 
> 时间：2013-02-05T11:11:11.970
> 
> 标签：bash, process, wait

> **可能重复：**
> [当任何子进程以代码结束时，如何在 bash 中等待多个子进程完成并返回退出代码！= 0？= 0？](https://stackoverflow.com/questions/356100/how-to-wait-in-bash-for-several-subprocesses-to-finish-and-return-exit-code-0)

我有以下问题：

我有 3 个进程放入脚本中

进程1 进程2 进程3

我希望进程 1 和 2 同时运行，但它们都在进程 3 开始之前完成。

我想它类似于以下内容..但我不确定那个“等待”

```
#!/bin/sh

    (
      process1 &
      process2 &

      wait

      process3

                ) 
```

谢谢

法比奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:21:04.797

只需保存两个进程的 pid 并等待两者都退出

```
#!/bin/bash

process1 &
pid1=$!
process2 &
pid2=$!

wait ${pid1}
echo "Return value of process1: $?"
wait ${pid2}
echo "Return value of process2: $?"

process3 
```

# sql - 如何将我的数据库上的所有 sql server managment studio activite 作为可执行的 tsql 日志获取？

> ID：14706151
> 
> 赞同：1
> 
> 时间：2013-02-05T11:11:26.193
> 
> 标签：sql, sql-server, database, tsql, ssms

我们有一个大型数据库（许多表、SP、函数和...），我们的数据库程序员超过 10 人。所有主题都可以使用我们的主服务器计算机或他的本地系统上的数据库。

**我们的要求：**

我们希望每个数据库程序员都可以通过 SQL SERVER MANAGMENT STUDIO（或您的建议工具）应用他的定义（创建表、触发器、sp、fn 和...）和修改（在表、sp、触发器、fn 和...上）并在每天结束时将所有这些活动作为 TSQL 脚本。

因此，我们希望将数据库程序员活动的自动日志记录为 TSQL 脚本（子 tsql 查询的序列）。例如：

**我的活动：**

> **我的第一个活动>>** 我以设计模式打开我的客户表，右键单击表并单击设计。然后我将 ID 字段的数据类型从 INT 更改为 BigInt。然后保存
> 
> **我的第二个活动>>** 我更改了 PR_Customer_Insert 存储过程并执行它。

**现在我想要一个像这样的可执行日志：**

```
-- UserName: Ram
-- 2013-02-10 10:20:35
Alter Table ALTER TABLE Customer ALTER COLUMN Id TYPE bigint;
Go

-- UserName: Ram
-- 2013-02-10 10:45:00
Drop Sp DROP PROCEDURE dbo.PR_Customer_Insert;

-- UserName: Ram
-- 2013-02-10 10:45:00
Create sp CREATE PROCEDURE PR_Customer_Insert
@id int,
@name nvarchar(30) AS

 INSERT INTO Customer
 (
    @id,
    @name
 )

GO 
```

我们知道比较两个数据库是一种解决方案，但我们希望访问 SSMS 查询管道......

**我的问题：**

这个请求有什么办法（自动生成的日志是一个可执行的 TSQL 脚本）？自动生成此脚本的最佳解决方案是什么？？？您如何看待数据库团队合作中的这个想法？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:42:04.570

可能使用[DDL 触发器](http://msdn.microsoft.com/en-us/library/ms190989%28v=sql.105%29.aspx)，但在某个数据库上

简单的例子：

```
--Create table EvtLog     
CREATE TABLE EvtLog 
 (
  LoginName NVARCHAR(100),
  PostTime DATETIME,  
  EventType NVARCHAR(100),
  TSQLCommand NVARCHAR(2000)  
  )
GO
--Create the DDL trigger 
CREATE TRIGGER trPreventTblChange 
ON DATABASE
FOR DROP_TABLE, CREATE_TABLE, ALTER_TABLE, 
    DROP_PROCEDURE, CREATE_PROCEDURE, ALTER_PROCEDURE
AS
DECLARE @Data XML
SET @Data = EventData()
INSERT EvtLog (LoginName, PostTime, EventType, TSQLCommand)
SELECT @Data.value('(/EVENT_INSTANCE/LoginName)[1]', 'nvarchar(100)'),
       @Data.value('(/EVENT_INSTANCE/PostTime)[1]', 'nvarchar(100)'),       
       @Data.value('(/EVENT_INSTANCE/EventType)[1]', 'nvarchar(100)'),
       @Data.value('(/EVENT_INSTANCE/TSQLCommand)[1]', 'nvarchar(2000)');
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:40:58.223

设置数据库[DDL 触发器](http://msdn.microsoft.com/en-us/library/ms190989%28v=sql.105%29.aspx)并[使用 EVENTDATA 函数](http://msdn.microsoft.com/en-us/library/ms187909.aspx)查找有关已完成操作的更多信息，并将其插入到您可以在一天结束时查询的表中

例子

```
CREATE TRIGGER [LogDDL] ON DATABASE 
    FOR DDL_DATABASE_LEVEL_EVENTS 
AS 
DECLARE @xml XML;
SELECT @xml = EVENTDATA(); 

INSERT ChangeLog 
( 
    ObjectName, 
    SQL 
)  
VALUES
( 
    @xml.value('(/EVENT_INSTANCE/ObjectName)[1]', 'sysname'), 
    @xml.value('(/EVENT_INSTANCE/TSQLCommand)[1]', 'nvarchar(max)') 
); 
```

# c# - 静态类构造函数和静态类字段的范围

> ID：14706155
> 
> 赞同：0
> 
> 时间：2013-02-05T11:11:39.293
> 
> 标签：c#, scope, static-classes

我在一个解决方案中有 2 个控制台应用程序（Console1 和 Console2）。两个应用程序都引用一个类库 (CL)。CL 包含一个静态类 (SC)，其中包含每个构造函数设置的字段。

我的问题是，如果我在 Console1 中调用静态类，并且在第一次调用任何包含在 SC 中设置的静态方法和字段的 Console1 时调用 SC 的构造函数。现在，如果我同时运行 Console2，虽然是独立运行，并且还访问 SC，那么静态类 SC 的确切范围是什么？在 Console1 中调用其构造函数等任何更改是否会对 SC 在 Console2 中使用时的行为方式产生任何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:15:48.023

范围是 AppDomain。

因为您有两个单独的进程，所以您有两个单独的 AppDomain 和两个单独的静态类“实例”。没有状态共享——根本没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:29:11.267

您的问题可能与静态类有关，但您得到的答案都归结为：如果您运行一个项目的两个单独实例，则一个实例中使用的类不会与另一个实例交互。事实上，你可以运行同一个项目的两个实例，你不会有任何问题。运行两个 Microsoft Word 实例没有什么不同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:16:44.077

如果 Console1 和 Console2 像两个完全独立的 exe 文件一样独立运行，则会再次调用 SC 构造函数，否则不会。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:17:07.503

控制台 1 和 2 作为单独的进程运行。程序集是按进程加载的（准确地说是按应用程序域），每个程序都会初始化静态构造函数等。因此，“程序集的运行实例”是完全独立的。

# r - 奇怪的应用问题

> ID：14706158
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:11:45.427
> 
> 标签：r, lapply

我有一个清单，`mm`：

```
 head(mm)
[[1]]
[1] "8  1901 - 1908  >>Primus<< sbk"

[[2]]
[1] "12  1901 - 1912  A & B:s skofabriks arbetares sbk."

[[3]]
[1] "5  1907 - 1911  A. B. Elevators arberates sbk"

[[4]]
[1] "5  1901 - 1905  Abk. N.K.B. (Nya Klöfverbladet)"

[[5]]
[1] "2  1904 - 1905  absolutisternas sbk"

[[6]]
[1] "12  1901 - 1912  Aftonbladets personals sbk"

length(mm)
[1] 429

dput(head(mm))
list("8  1901 - 1908  >>Primus<< sbk", "12  1901 - 1912  A & B:s skofabriks arbetares sbk.", 
    "5  1907 - 1911  A. B. Elevators arberates sbk", "5  1901 - 1905  Abk. N.K.B. (Nya Klöfverbladet)", 
    "2  1904 - 1905  absolutisternas sbk", "12  1901 - 1912  Aftonbladets personals sbk") 
```

我也有公司名称：

```
head(unique(data$Name))
[1] ">>Primus<< sbk"                    "A & B:s skofabriks arbetares sbk." "A. B. Elevators arberates sbk"    
[4] "Abk. N.K.B. (Nya Klöfverbladet)"   "absolutisternas sbk"               "Aftonbladets personals sbk"

length(unique(data$Name))
[1] 429 
```

我正在尝试制作一个新列表，其中每个元素 om`mm`列表在我的每个公司中重复出现的次数`data frame`：

```
data[1:20,1:2]
     Year                              Name
1    1901                    >>Primus<< sbk
185  1902                    >>Primus<< sbk
382  1903                    >>Primus<< sbk
597  1904                    >>Primus<< sbk
822  1905                    >>Primus<< sbk
1059 1906                    >>Primus<< sbk
1310 1907                    >>Primus<< sbk
1567 1908                    >>Primus<< sbk
2    1901 A & B:s skofabriks arbetares sbk.
186  1902 A & B:s skofabriks arbetares sbk.
383  1903 A & B:s skofabriks arbetares sbk.
598  1904 A & B:s skofabriks arbetares sbk.
823  1905 A & B:s skofabriks arbetares sbk.
1060 1906 A & B:s skofabriks arbetares sbk.
1311 1907 A & B:s skofabriks arbetares sbk.
1568 1908 A & B:s skofabriks arbetares sbk.
1827 1909 A & B:s skofabriks arbetares sbk.
2090 1910 A & B:s skofabriks arbetares sbk.
2355 1911 A & B:s skofabriks arbetares sbk.
2602 1912 A & B:s skofabriks arbetares sbk.

dput(data[1:20,1:2])
structure(list(Year = c(1901L, 1902L, 1903L, 1904L, 1905L, 1906L, 
1907L, 1908L, 1901L, 1902L, 1903L, 1904L, 1905L, 1906L, 1907L, 
1908L, 1909L, 1910L, 1911L, 1912L), Name = c(">>Primus<< sbk", 
">>Primus<< sbk", ">>Primus<< sbk", ">>Primus<< sbk", ">>Primus<< sbk", 
">>Primus<< sbk", ">>Primus<< sbk", ">>Primus<< sbk", "A & B:s skofabriks arbetares sbk.", 
"A & B:s skofabriks arbetares sbk.", "A & B:s skofabriks arbetares sbk.", 
"A & B:s skofabriks arbetares sbk.", "A & B:s skofabriks arbetares sbk.", 
"A & B:s skofabriks arbetares sbk.", "A & B:s skofabriks arbetares sbk.", 
"A & B:s skofabriks arbetares sbk.", "A & B:s skofabriks arbetares sbk.", 
"A & B:s skofabriks arbetares sbk.", "A & B:s skofabriks arbetares sbk.", 
"A & B:s skofabriks arbetares sbk.")), .Names = c("Year", "Name"
), row.names = c(1L, 185L, 382L, 597L, 822L, 1059L, 1310L, 1567L, 
2L, 186L, 383L, 598L, 823L, 1060L, 1311L, 1568L, 1827L, 2090L, 
2355L, 2602L), class = "data.frame") 
```

因此，例如 'mm[[1]]' 将重复 8 次，因为 company`>>Primus<< sbk`出现了 8 次：

```
length(data[data$Name==">>Primus<< sbk",2])
[1] 8 
```

我的做法是：

```
mm=lapply(1:length(maxz),function(x) paste(diffz[[x]]+1,"",minz[[x]],"-",maxz[[x]],"",names(maxz)[[x]]))

hb=lapply(seq_along(mm),function(x,m) rep(mm[[x]],length(data[data$Name==m,2])),m=unique(data$Name)) 
```

但是在上面`warning`运行后我得到了这个`hb`：

```
There were 50 or more warnings (use warnings() to see the first 50)

head(warnings())
$`longer object length is not a multiple of shorter object length`
data$Name == m

$`longer object length is not a multiple of shorter object length`
data$Name == m 
```

我究竟做错了什么？：（

`EDIT`：

这是一个有效的解决方法：

此致！

```
mm=lapply(1:length(maxz),function(x) paste(diffz[[x]]+1,"",minz[[x]],"-",maxz[[x]],"",names(maxz)[[x]]))

names(mm)=names(minz)

hb=lapply(names(mm),function(x) rep(mm[[x]],length(data[data$Name==x,2]))) 
```

在哪里

```
head(names(minz))
[1] ">>Primus<< sbk"                    "A & B:s skofabriks arbetares sbk." "A. B. Elevators arberates sbk"    
[4] "Abk. N.K.B. (Nya Klöfverbladet)"   "absolutisternas sbk"               "Aftonbladets personals sbk" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:57:25.427

如果您使用标准数据结构在 R: 中存储数据，您会发现生活变得更加轻松`the data.frame`。以下代码将您的输入转换为数据框，然后使用子集来重复行。

```
mm <- list("8  1901 - 1908  >>Primus<< sbk", "12  1901 - 1912  A & B:s skofabriks arbetares sbk.", 
    "5  1907 - 1911  A. B. Elevators arberates sbk", "5  1901 - 1905  Abk. N.K.B. (Nya Klöfverbladet)", 
    "2  1904 - 1905  absolutisternas sbk", "12  1901 - 1912  Aftonbladets personals sbk")

# Convert to a character vector
m <- unlist(mm)

# Convert multiple character separator to single
m2 <- gsub(" {2, }", ",", m)

# Parse with read.csv
df <- read.csv(text = m2, header = false)
names(df) <- c("n", "years", "company")

# Finally, duplicate each row
df[rep(1:nrow(df), df$n), -1] 
```

# php - PHP REST API 逻辑

> ID：14706159
> 
> 赞同：0
> 
> 时间：2013-02-05T11:11:49.443
> 
> 标签：php, web-services, api, http, rest

我最近阅读了几个教程来介绍自己以了解更多有关其余 API 的信息。但是，我在这里和那里有一些疑问，希望有人可以帮助我解决这个问题。

阅读[HTML 和 REST 初学者指南](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest)，其中指出：

“最好将资源视为名词。例如，以下内容不是 RESTful：

1 /clients/add

这是因为它使用 URL 来描述操作。这是区分 RESTful 和非 RESTful 系统的一个相当基本的点。 "

因此，我想知道在我拥有用户资源并访问它以执行通常的插入/更新/删除/检索的这种情况下

如下：

www.example.com/users [get] <-- 检索所有记录
www.example.com/users/1 [get] <-- 检索 id 为 1 的记录
www.example.com/users/1 [put ] <-- 更新 id 为 1 的记录
www.example.com/user/1 [delete] <-- 删除 id 为 1 的记录
www.example.com/user [post] <-- 插入一个新的用户记录

这将用完 4 个常用动词来提出请求。

如果我需要诸如登录之类的功能，或者通常可能需要任何其他类型的操作命令，该怎么办？在这种情况下应该如何形成 url 以及路由器应该如何重定向？

编辑：

在查看了各种评论和答案之后。我从他们那里得到的结论是，最终的解决方案将是“尽可能使用休息原则，并在不使用时使用带有函数的查询字符串方法”。

但是，我正在考虑实现的一个轻微变体（不再是一个宁静的实现，而是遵循类似的概念）并且想知道它是否可以这样工作。希望大家可以给我这方面的建议。

使用我需要实现的相同身份验证/登录功能，是否可以改为：

www.example.com/users [get] <-- 检索所有记录
www.example.com/users/1 [get] <-- 检索 id 为 1 的记录
www.example.com/users/1 [put ] <-- 更新 id 为 1 的记录
www.example.com/user/1 [delete] <-- 删除 id 为 1 的记录
www.example.com/user [post] <-- 插入一个新的用户记录

像往常一样，如果我需要执行某项操作，它将是这样的：

[controller]/[action] --- user/authenticate [post] --- 登录
[controller]/[id]/[action] --- user/1/authenticate [put] --- 注销

这行得通吗？我会面临任何可预见的问题吗？是否已经有类似的实现？请多多指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:10:20.787

REST 是无状态的，因此您需要将所有需要的信息放入所有查询中。这个想法是使用 HTTP 动词（GET、PUT、DELETE、POST - 正如您已经描述的那样）。

如果您想要 REST API 的用户身份验证，请使用 HTTP 基本身份验证或您自己的身份验证。您必须将每个请求的身份验证信息发送到服务器（无状态）。

如果您不想要 HTTP 基本身份验证，您可以尝试一些令牌身份验证或任何其他身份验证。

编辑：如果你想要一个“检查登录”资源，建立你自己的。例如带有 http 基本身份验证标头信息的 GET /account/checklogin。此请求的结果取决于您的身份验证信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:18:36.663

有些动作很难以真正的 RESTful 方式建模 - 但登录，例如，可以使用以下伪代码实现：

```
GET the user rights whose userID is x and password is y
if (user rights found)
  assign rights to current user
else
  do not assign rights to user 
```

有关如何检索用户权限的信息，请参阅[此问题。](https://stackoverflow.com/questions/4024271/rest-api-best-practices-where-to-put-parameters/4026505#4026505)这个问题的重点是您通常需要多种方式来访问您的资源。有些是基于 ID 或众所周知的属性，例如：

*   www.example.com/users/department [get]（获取一个部门的所有用户）
*   www.example.com/users/roleName [get]（获取特定角色的所有用户）
*   www.example.com/users/status/active [get]（获取所有“活跃”的用户）

但是，某些访问用户的方式（尤其是当您需要组合两个或更多过滤属性时）使用查询字符串参数更易于管理。例如：

www.example.com/users?department=xxx&role=yyy&status=active [获取]

因此，您的 REST API 可能会按照以下方式公开一个 URL：

www.example.com/users?userName=xxxx&password=yyy [获取]

此 URL 将根据用户数据库匹配用户名和密码参数，并返回 404（如果它们与已知用户不匹配）或代表用户的文档及其访问权限。

然后，您的客户端代码管理当前用户的会话 - 即将状态设置为“已登录”，并将会话与该用户配置文件相关联。

完成这项工作的关键是将责任分配给正确的层 - API 不应该管理用户会话，这是客户端应用程序的责任。在某些情况下，它的效果并不特别好——不过，不确定你的情况是否如此。

如果您真的想使用 POST 请求，当然可以将“登录”方法视为该用户会话的开始。因此，您可以执行以下操作：

www.example.com/session [POST] 带有参数 userID 和密码。

这将返回用户配置文件和权限的表示；它还可以创建可在 URL 下访问的文档

www.example.com/session/sessionID

www.example.com/session/user/ID/session

然而，一般来说，在 API 中管理会话状态是一个非常危险的想法 - 几乎总是，您希望客户端会话由与客户端交互的应用程序管理，而不是由它与之交谈的 API 管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:10:20.077

> 如果我需要诸如登录之类的功能，或者通常可能需要任何其他类型的操作命令，该怎么办？在这种情况下应该如何形成 url 以及路由器应该如何重定向？

*拥有 login- action*资源不是 RESTful ，但提供 login-form 资源*是RESTful：*

```
/login-form 
```

您在响应中返回的 HTML 表单作为**code-on-demand**；您正在提供一个已配置的软件来帮助用户提供他们的登录凭据。

将资源标识为 just 不会有任何问题`/login`- 我添加了表单部分以使示例清晰。

您应该避免在需要身份验证的情况下进行重定向，因为它会破坏 Web 浏览器以外的客户端的界面；相反，您可以：提供登录表单的链接；或实际在响应中提供登录表单代码。

如果您想管理身份验证，我更喜欢创建身份验证令牌的方法；对于 Web 浏览器，我认为为了帮助客户端为每个请求提供令牌而*重载*单个 cookie 是可以接受的，因为他们没有其他合理的方式来控制他们发送的 Auth 标头；显然，如果您正在编写自己的客户端应用程序，这不是问题。

**在下面回答您的评论**，auth-token 场景中登录表单的目的是创建一个新的身份验证令牌。因此，以 REST 的方式思考，您对 auth-token 的用户列表进行建模并发布 auth-token 的表示。此表示可能包含用户的用户名和密码。您可以让用户选择他们自己的令牌，或者您可以为他们选择它并在响应中返回它。不需要*操作*-URI，并且在成功创建新的 auth-token 后设置任何 cookie。

我建议学习 Amazon S3 REST API。它与您的要求略有不同，但它是我见过的对潜在 REST 身份验证系统的最佳深入描述：

[http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAPI.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAPI.html)

您关于以 REST 方式管理用户的想法是准确的。

希望能帮助到你 ：）

# c++ - QMainWindow如何将dockwidgets锁定到位

> ID：14706160
> 
> 赞同：2
> 
> 时间：2013-02-05T11:11:51.170
> 
> 标签：c++, qt

我想锁定我的 gui 的当前用户定义布局。我的 gui 是一个 QMainWindow，其中 QMainWindow 作为中央小部件和其他所有东西，包括多个 GLWidgets 作为停靠小部件。所以几乎所有东西都可以放在任何地方。一旦用户激活了锁，我用一个新的 QWidget 替换了 dockwidgets 的标题小部件。这已经使它们保持原位就好了。

现在我想防止手动调整小部件的大小，但仍然允许在 QMainWindow 大小更改时自动调整大小。因此，在锁定时将dockwidgets设置为固定大小不是一种选择，我宁愿需要一种方法来隐藏小部件之间的调整大小处理程序。

# c++ - 使用 C++ FindContours 在视频图像中查找轮廓的问题

> ID：14706163
> 
> 赞同：2
> 
> 时间：2013-02-05T11:12:06.557
> 
> 标签：c++, image-processing, opencv, video-processing, contour

我现在正在工作的程序*几乎*完成了，但我对结果不是很满意。通过使用 Canny 算法，我设法非常清楚地了解了对象的轮廓，但是程序在识别轮廓并用红线绘制轮廓时存在一些问题。该程序：

```
void setwindowSettings(){
    namedWindow("Contours", CV_WINDOW_AUTOSIZE);

    createTrackbar("LowerC", "Contours", &lowerC, 255, NULL);
    createTrackbar("UpperC", "Contours", &upperC, 255, NULL);
}

void wait(void)
{
    long t=30000000;
    while(t--);
}

int main(void)
{
VideoCapture cap(0); // open the default camera
if(!cap.isOpened())  // check if we succeeded
    return -1;

Mat frame,foreground,image;
double pt1, pt2, area;
Rect rect;
int i;

vector<vector<Point> > contours;
vector<vector<Point> > largest_contours;

namedWindow("Capture", CV_WINDOW_AUTOSIZE);
setwindowSettings();

while(1){
    cap >> frame; // get a new frame from camera
    if( frame.empty() )
            break;
    image=frame.clone();

    cvtColor(image,foreground,CV_BGR2GRAY);
    GaussianBlur(foreground,foreground,Size(9,11),0,0);
    Canny(foreground,foreground,lowerC,upperC,3);

    findContours(foreground,contours,CV_RETR_EXTERNAL,CV_CHAIN_APPROX_SIMPLE);  

    if(contours.empty())
        continue;

    double largest_area = 0;

    for( i= 0; i < contours.size(); i++){  // get the largest contour
        area = fabs(contourArea(contours[i]));
        if(area >= largest_area){
            largest_area = area;
            largest_contours.clear(); 
            largest_contours.push_back(contours[i]);
        }
    }

    if(largest_area>=3000){   // draw the largest contour if exceeded minimum largest area 
        drawContours(image,largest_contours,-1,Scalar(0,0,255),2);
        printf("area = %.f\n",largest_area);
    }

    wait();

    imshow( "Capture",image );
    imshow("Contours",foreground);

    if(waitKey(30) >= 0) break;
}
// the camera will be deinitialized automatically in VideoCapture destructor
return 0;
} 
```

节目摘要：

1.  从相机获取图像
2.  噪声过滤（转换为灰色→模糊→Canny）
3.  寻找轮廓
4.  找到图像中最大的轮廓及其区域，即对象
5.  在物体周围画一条红线，打印出最大的区域
6.  冲洗并重复

结果：

我很少得到我想要的；检测到轮廓，绘制红线（**GOOD ONE**）：

![检测到轮廓。 注意到一半的轮廓线消失了](../Images/b1c129a093bf7b43bc467e0455746842.png)

...通常我得到这个；未检测到轮廓，未检测到红线（**BAD ONE**）：

![未检测到轮廓，尽管有轮廓](../Images/129597885e1912e890eeb25745f2351b.png)

**获得GOOD ONE**的机会`1/20`不是很好。`Contours`此外，当物体周围出现红线时，屏幕中物体的轮廓线会闪烁（参见 GOOD ONE 图片）。我正在使用我的一个对象（一个黑色的小方块）来回答这个问题，但请注意，此对象检测程序的主要目标是**检测对象，无论其形状或颜色如何。**

所以我的问题是：

1.  尽管轮廓清晰如初，为什么我仍然会得到 BAD ONES？
2.  任何人都可以分享关于如何改进轮廓检测的更好的想法吗？（即更好的模糊算法）
~~*   ~~在物体周围画红线时，如何避免轮廓线闪烁？~~~~

 ~~**编辑：**我刚刚发现轮廓线闪烁不是因为它周围绘制的红线（使用`drawContours`或`line`函数），而是在`findContours`函数检测到最大轮廓并计算为最大轮廓之后发生。

关于没有的问题。3 单击[此处](https://stackoverflow.com/questions/14750464/blinking-contour-line)。[视频在这里，点击它！！！](http://www.youtube.com/watch?v=4GLabxxd228&feature=youtu.be)

提前致谢。

PS：我在 Visual C++ 2010 Exp 女士上使用 OpenCV 2.4.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:47:12.493

1.  由于您使用的是最大轮廓的事实，所以我假设您正在尝试检测出现在相机视野中的最大物体。我想知道为什么右上角的窗口灯/明亮光源不会创建任何轮廓（可能是由于模糊）。您可以存储背景图像并将其从对象出现的图像中减去。这样您就可以导出对象。您可以在差异图像中应用轮廓查找。差异图像`absdiff(frame_now,frame_backgrnd,diff)`在哪里。`diff`
2.  如果物体在运动并且您想要检测，您可以使用光流结合最大轮廓来检测物体。
3.  尝试在没有模糊功能的情况下进行处理，然后检测最大的轮廓区域。
4.  为了绘制点试试这个

    ```
    for(int i = 1;i<(int)largest_contours[0].size();i++)
         line(image,largest_contours[0][i-1],largest_contours[0][i],cv::Scalar(0,0,255),2,8,0); 
    ```~~

# php - 我的联系表没有发送邮件

> ID：14706176
> 
> 赞同：1
> 
> 时间：2013-02-05T11:12:44.077
> 
> 标签：php, html, contact-form

我已将这两个文件上传到服务器，但是当我提交表单时，会收到感谢消息，但我的收件箱中没有邮件。请帮助我。

我的 HTML 页面是

```
<form name="htmlform" method="post" action="html_form_send.php">
<table width="450px">

</tr>

<tr>
<td valign="top">
<label for="first_name">First Name *</label>
</td>
<td valign="top">
<input  type="text" name="first_name" maxlength="50" size="30">
</td>
</tr>
<tr>
<td valign="top"">
<label for="last_name">Last Name *</label>
</td>
<td valign="top">
<input  type="text" name="last_name" maxlength="50" size="30">
</td>
</tr>
<tr>
<td valign="top">
<label for="email">Email Address *</label>
</td>
<td valign="top">
<input  type="text" name="email" maxlength="80" size="30">
</td>
</tr>
<tr> 
<td valign="top">
<label for="telephone">Telephone Number</label>
</td>
<td valign="top">
<input  type="text" name="telephone" maxlength="30" size="30">
</td>
</tr>
<tr>
<td valign="top">
<label for="comments">Comments *</label>
</td>
<td valign="top">
<textarea  name="comments" maxlength="1000" cols="25" rows="6"></textarea>
</td>
</tr>
<tr>
<td colspan="2" style="text-align:center">
</td>
</tr>
</table>
</form> 
```

我已将这两个文件上传到服务器，但是当我提交表单时，会收到感谢消息，但我的收件箱中没有邮件。请帮助我。

我的 PHP 编码是

```
<?php
if(isset($_POST['email'])) {

    // CHANGE THE TWO LINES BELOW
    $email_to = "anshu_mah@yahoo.co.in";

    $email_subject = "website form submissions";

    function died($error) {
        // your error code can go here
        echo "We're sorry, but there's errors found with the form you submitted.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $first_name = $_POST['first_name']; // required
    $last_name = $_POST['last_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- place your own success html below -->

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
die();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:17:16.753

邮件可能被您的传入服务器阻止，因为看起来发件人无效，这看起来类似于垃圾邮件。

如果您有权访问它，请检查服务器上的过滤器日志。这应该在 cPanel 中作为“跟踪电子邮件”提供。如果您的邮件被阻止，您将在列表中看到它并带有一个标记，表示有问题，将鼠标悬停在该标记上，您将看到原因。

如果是这种情况，并且原因类似于“发件人验证失败”，您可能想尝试`-f`“来自地址的信封”附加参数：

```
mail($email_to, $email_subject, $email_message, $headers, "-f $email_from"); 
```

邮件功能参考，包括关于“附加参数”的注释，专门`-f`针对 sendmail：

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

> Additional_parameters 参数可用于将附加标志作为命令行选项传递给配置为在发送邮件时使用的程序，如 sendmail_path 配置设置所定义。例如，这可用于在使用带有 -f sendmail 选项的 sendmail 时设置信封发件人地址。
> 
> 运行 Web 服务器的用户应作为受信任用户添加到 sendmail 配置中，以防止在使用此方法设置信封发件人 (-f) 时将“X-Warning”标头添加到邮件中。对于 sendmail 用户，此文件是 /etc/mail/trusted-users。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:18:29.063

$email_to = 'nobody@example.com';

$email_subject = '主题';

$email_message = '你好';

$headers = '来自：webmaster@example.com' 。"\r\n" 。

```
'Reply-To: webmaster@example.com' . "\r\n" .

'X-Mailer: PHP/' . phpversion(); 
```

邮件（$email_to，$email_subject，$email_message，$headers）；

试试这个，让我知道

# c# - WinFORMS 中的 WPF 用户控件：项目结构

> ID：14706179
> 
> 赞同：2
> 
> 时间：2013-02-05T11:12:59.997
> 
> 标签：c#, .net, winforms, wpf-controls, winforms-interop

**设想**

我决定为我的新应用程序开发 WPF 技术。此应用程序必须在 WinForms 窗口中单击菜单时调用。因此，我创建了一个 WPF 用户控件库并将其集成到使用 Element Host 的父 WinForms 表单中显示。

**我的应用程序**

它包含 3 个子用户控件，它们被封装在另一个带有 tabContent 控件的用户控件中。我更喜欢这种方法，因为从 Child UserControl 触发事件并在 WinForms 中处理（订阅事件）似乎很痛苦。

**我的问题**

现在面临着访问 Winforms 中的 UserControl 元素的同样痛苦的任务，我出于适当的项目结构原因在其中创建了 Data Manager 类（UserControl 不应包含 Data Manager 类 UI）。请指导我如何构建我的项目/如何订阅事件/访问 WPF 中的 WPFUserControl 元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:48:03.897

看看[MVVM Light Toolkit](http://mvvmlight.codeplex.com/)的 Messenger 类（也可以单独使用）。它有助于解耦您的控件。信使使用发布/订阅模式。您的 WPF 用户控件可以发布对象，WinForms 主机可以监听这些通知。交换的消息（对象）最好放在单独的程序集中，因为它们定义了 WPF UC-library 和 WinForms 应用程序之间的共享契约。

# php - 带有送货地址和帐单地址的贝宝表单变量

> ID：14706180
> 
> 赞同：0
> 
> 时间：2013-02-05T11:13:04.053
> 
> 标签：php, paypal

我想将帐单和送货地址分别发送到贝宝，在提交表单后，贝宝会向管理员发送一封带有帐单和送货地址的邮件。我正在使用**first_name、last_name、address1、address2**我需要不同的详细信息，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:54:31.227

PayPal 不透露买家的账单地址——只透露收货地址。您可以提供买家的送货地址，但不能提供账单地址。（如果买家没有 PayPal 账户，PayPal 将默认使用收货地址作为账单地址。）如果您绝对必须拥有买家的账单地址，您需要先收集并存储在您的网站上将买家发送到 PayPal。

传递买家收货地址的正确变量是`first_name`、`last_name`、`address1`、`address2`、`city`、`state`、`zip`和`country`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:17:40.093

使用类似 ship_first_name、ship_last_name、ship_address1、ship_address2 的命名约定，并用于账单 bill_first_name、bill_last_name、bill_address1、bill_address2。认为它会帮助你。谢谢。

# jslint - Jslint 无法通过对象

> ID：14706187
> 
> 赞同：0
> 
> 时间：2013-02-05T11:13:17.510
> 
> 标签：jslint

我刚开始将 jslint 与骨干一起使用。在项目开始时，我创建对象：

```
 App = {
  Models: {},
  Views: {},
  Controller: {}
 } 
```

并得到错误：“在定义之前使用了'App'。” 后来我把它用作：

```
 App.Models.Task = Backbone.Model.extend({}) 
```

此时 jslint 无法让我通过。它说

意外的“应用程序”。App.Models.Task = Backbone.Model.extend({}) // 第 17 行，位置 1 #8 停止。（7% 扫描）。

我读过可能 jslint 将其视为严重错误，因为它已停止但它不是错误。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:17:20.107

它应该是`var App`（或者`window.App`，取决于您的目标；但是，在我看来，即使是全局变量也最好先定义为本地变量，然后在单个语句中导出到外层空间）。否则 JSLint（非常正确）认为您只是忘记在其他地方定义此变量，或者在其名称中打错字。

# c# - 防止恶意请求 - DOS 攻击

> ID：14706188
> 
> 赞同：13
> 
> 时间：2013-02-05T11:13:19.090
> 
> 标签：c#, asp.net-mvc, ddos

我正在开发一个 asp.net MVC Web 应用程序，客户要求我们尽最大努力使其尽可能地抵御拒绝服务攻击。他们担心该站点可能会收到恶意的大量请求，以减慢/关闭该站点。

我已经与产品负责人讨论过这个问题，因为它确实超出了实际 Web 应用程序的范围。我相信托管/网络团队有责任监控流量并响应恶意请求。

然而，他们坚持认为应用程序应该内置一些预防措施。不过，他们不想实施 CAPTCHA。

有人建议我们限制在给定时间范围内可以为会话发出的请求数量。我正在考虑做这样的事情 [在 ASP.NET MVC 中实现请求限制的最佳方法？](https://stackoverflow.com/questions/33969/best-way-to-implement-request-throttling-in-asp-net-mvc)但是使用会话 ID 而不是客户端 IP，因为这会给来自公司防火墙后面的用户带来问题——他们的 IP 都是相同的。

他们还建议添加关闭站点某些区域的功能 - 建议管理员用户可以关闭数据库密集区域......但是这将通过 UI 进行控制，如果它受到 DOS 攻击，管理员肯定会无论如何，用户将无法访问它。

我的问题是，这样做真的值得吗？当然，真正的 DOS 攻击会更先进吗？

你有什么其他的建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T12:11:37.307

拒绝服务攻击几乎可以是任何会影响您对其他人的服务稳定性的攻击。在这种情况下，您谈论的是网络 DoS，并且如前所述，这通常不会发生在您的应用程序级别。

理想情况下，这种攻击将在网络级别得到缓解。有专门为此构建的防火墙，例如[Cisco ASA 5500 系列](http://www.cisco.com/en/US/products/ps6120/prod_models_comparison.html)，它的工作方式从基本保护到高吞吐量缓解。它们是非常聪明的盒子，我可以保证它们在阻止此类攻击方面的有效性，只要使用正确的吞吐量模型即可。

当然，如果无法访问为您执行此操作的硬件防火墙，您可以采取一些权宜之计来帮助防御这些类型的攻击。**请注意，这些都不会像专用防火墙那样有效。**

一个这样的例子是 IIS 模块[动态 IP 限制](http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions)，它允许您定义最大并发请求的限制。然而，在实践中，这有一个缺点，它可能会开始阻止来自浏览器的合法请求，这些浏览器对于下载脚本和图像等具有高并发请求吞吐量。

最后，你可以做的事情*真的很*粗糙，但也*很*有效，就像我之前写的一样。基本上，它是一个小工具，用于监控来自同一 IP 的重复请求的日志文件。因此，假设 10 个请求`/Home`超过 2 秒`1.2.3.4`。如果检测到这种情况，将添加防火墙规则（在 Windows 高级防火墙中，使用 shell 命令添加）以阻止来自该 IP 的请求，然后可以在 30 分钟左右后删除该规则。

就像我说的那样，它非常粗糙，但是如果您*必须*在服务器级别执行此操作，那么您实际上并没有很多明智的选择，因为它不应该在其中完成。您完全正确，因为责任在一定程度上取决于托管服务提供商。

最后，您对 CAPTCHA 的看法也是正确的。如果有的话，它可以通过一遍又一遍地执行图像生成（这可能是资源密集型）来协助 DoS，从而使您的资源更加匮乏。验证码生效的时间是，如果您的网站被自动注册机器人发送垃圾邮件，但我相信您已经知道这一点。

如果您*真的*想在应用程序级别做某事只是为了取悦现有的权力，那么在您的应用程序中实施基于 IP 的请求限制是可行的，尽管 90% 无效（因为您仍然必须处理请求）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:30:39.490

如果您绝对必须熬夜，您可以在云中实施解决方案并扩展服务器，但它可能会变得昂贵......

另一个想法是记录注册用户的 IP 地址。在 DOS 事件中，将所有流量限制为来自“好”用户的请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T20:50:09.153

在应用程序级别防止真正的 DoS 攻击是不可行的，因为请求很可能会在它杀死您的应用程序之前杀死您的网络服务器，因为您的应用程序与一个应用程序池相关联，该应用程序池再次具有最大并发请求由您使用的服务器技术定义。

这篇有趣的文章 [http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45](http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45) 指出 windows 7、windows Vista 和 Windows 8 最多有 10 个并发要求。它进一步说明了“您将需要一个 Windows 服务器操作系统才能看到高负载下异步方法的好处”。

您可以增加与您的应用程序关联的应用程序池的 HTTP.sys 队列限制，以增加将排队的请求数量（以便在线程准备好时进行后续计算），这将阻止 HTTP 协议栈（HTTP .sys）在超出限制并且没有工作进程可用于处理进一步请求时返回 Http 错误 503。

您提到客户要求您“尽最大努力使其尽可能抵御拒绝服务攻击”。我的建议可能不适用于您的情况，但您可以考虑实施文章中提到的基于任务的异步模式 (TAP) 以满足客户的要求。

此模式将在执行长期操作时释放线程并使线程可用于进一步的请求（从而使您的 HTTP.sys 队列保持较低）-同时还为您的应用程序提供了在向第三方服务发出多个请求时提高整体性能的好处或执行多个密集的 IO 计算。

此措施不会使您的应用程序对 DoS 攻击具有弹性，但它会使您的应用程序对提供服务的硬件尽可能负责。

# php - 带有 zend 框架的 IN() 子句中的多列

> ID：14706190
> 
> 赞同：1
> 
> 时间：2013-02-05T11:13:31.143
> 
> 标签：php, mysql, sql, zend-framework

是否可以在 zend frameowrk 中进行此类查询？

```
SELECT * 
FROM `relations` 
WHERE (root_type, root_id) IN ( ("PRJ", 12), ("PRJ", 13), ("GRP", 42)) 
```

我只找到了一种在一个列上使用 IN 子句而不是在两列上进行查询的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:36:19.437

您可以`JOIN`改为使用它们，如下所示：

```
SELECT r.*
FROM relations r
INNER JOIN
(
   SELECT 'PRJ' AS root_typ, 12 AS root_id
   UNION ALL 
   SELECT 'PRJ',             13
   UNION ALL 
   SELECT 'GRP',             42
) AS t  ON r.root_type = t.root_type
       AND r.root_id   = t.root_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:09:51.880

这是一个[使用 Zend_Db_Statement 的 ZF1 查询](http://framework.zend.com/manual/1.12/en/zend.db.statement.html)：

```
//common way to aquire currently selected db adapter
$db = Zend_Db_Table::getDefaultAdapter();
//$db is the currently selected database adapter.
$stmt = $db->query(
            SELECT * FROM `relations` 
            WHERE (root_type, root_id) 
            IN ( ("PRJ", 12), ("PRJ", 13), ("GRP", 42))
            ); 
```

这个答案不是为了讽刺。对于复杂的数据库查询，`Zend_Db_Statement`通常是执行查询的*最简单/最简单/最好*的方式。

如果您想要更适合您需求的解释，请提供有关您的结构的更多信息。在 Zend Framework（1 或 2）中，通常有很多方法可以完成任何给定的任务。

# iphone - glUniform4fv 给出 GL_INVALID_OPERATION

> ID：14706192
> 
> 赞同：18
> 
> 时间：2013-02-05T11:13:37.107
> 
> 标签：iphone, ios, opengl-es, shader

我试图在 iOS 和 OpenGL ES 中开发一个基本游戏，但我被制服的这个问题所困扰，这是将值传递给我的制服的代码：

```
glBindVertexArrayOES(_vertexArray);

// Render the object with ES2
glUseProgram(self.shaderProgram);

glUniformMatrix4fv(uniformModelViewProjection, 1, 0, modelViewProjectionMatrix.m);

// Get uniform center position
glUniform4fv(uniformCenterPosition, 1, centerPosition.v);
// Get uniform time position
glUniform1f(uniformTime, time);

// Set the sampler texture unit to 0
glUniform1i(uniformTexture, 0);
glDrawArrays(GL_POINTS, 0, numVertices); 
```

请注意，在 glUseProgram 之前和 glDrawArrays 调用之前放置了 glUniform 函数。通过追踪确认，统一位置看起来也很好。这是我在 XCode 中运行 OpenGL ES Analyzer 工具时得到的结果：

![在此处输入图像描述](../Images/d04f6ece72fe1533f8cd3949b01d8840.png)

它为 glUniform4fv 返回一个 GL_INVALID_OPERATION，注意表示的值似乎是正确的。

[以下是我从文档](http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml)中找到的 GL_INVALID_OPERATION 错误的可能原因：

*   没有当前程序对象。
*   着色器中声明的统一变量的大小与 glUniform 命令指示的大小不匹配。
*   此函数的有符号或无符号整数变体之一用于加载 float、vec2、vec3、vec4 类型的统一变量或这些变量的数组，或者如果此函数的浮点变体之一用于加载int、ivec2、ivec3、ivec4、unsigned int、uvec2、uvec3、uvec4 或这些类型的数组的统一变量。
*   此函数的有符号整数变体之一用于加载 unsigned int、uvec2、uvec3、uvec4 或这些类型的数组的统一变量。
*   此函数的无符号整数变体之一用于加载 int、ivec2、ivec3、ivec4 或这些类型的数组的统一变量。
*   location 是当前程序对象的无效统一位置，并且 location 不等于 -1。
*   count 大于 1 并且指示的统一变量不是数组变量。
*   使用 glUniform1i 和 glUniform1iv 以外的命令加载采样器。

他们似乎都没有解释为什么我收到这个错误。快把我逼疯了，求救！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T14:33:41.807

添加我的评论作为答案，因为它原来是解决方案：

我能想象到的唯一原因是第 2 点和第 3 点：

> *   着色器中声明的统一变量的大小与 glUniform 命令指示的大小不匹配。
> *   此函数的有符号或无符号整数变体之一用于加载 float、vec2、vec3、vec4 类型的统一变量或这些变量的数组，或者如果此函数的浮点变体之一用于加载int、ivec2、ivec3、ivec4、unsigned int、uvec2、uvec3、uvec4 或这些类型的数组的统一变量。

因此，请确保相应的统一变量确实像`vec4`在着色器中那样声明（也许它是一个`vec3`？）。

# java - 如何从 Java 访问 C++ 库 (DLL) 的方法

> ID：14706193
> 
> 赞同：4
> 
> 时间：2013-02-05T11:13:45.350
> 
> 标签：java, dll

我有一个用 C++ 编写的库（实际上是一个 Firefox 插件，xyz.dll），我需要从 Java 访问它的方法。

```
public class AccessLibrary {
    public interface Kernel32 extends Library {
        public void showVersion();
    }

    public static void main(String[] args) {
        Kernel32 lib = (Kernel32) Native.loadLibrary("xyz.dll", Kernel32.class);
        lib.showVersion();
    }
} 
```

执行时出现以下错误：

```
java -jar dist/accessLibrary.jar
Exception in thread "main" java.lang.UnsatisfiedLinkError: Error looking up function  'showVersion': The specified procedure could not be found. 
```

在原生库源码中，方法是这样定义的

```
void CPlugin::showVersion() {
    /* ... */
} 
```

我对 Java 很陌生。可能是我缺少一些基本的东西。调查了类似的问题，但没有一个能解决我的问题。

忘了说我使用的是 Windows 7 64bit 和 Java 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:28:51.087

首先，您不能导出类​​方法并将其加载到 java 中。这个名字会被破坏，java 不知道如何正确地调用它。你需要做的就是把它分解成一个单独的函数。

在那之后：

正如已经指出的，确保导出函数。您可以使用以下两种方式之一进行导出。第一个就是提到的，就是使用__declspec(dllexport)。二是放到def文件中。

此外，请确保将其标记为 extern "C"，否则名称将被破坏。所有详细信息都在这里：[使用 dllexport 从 DLL 导出函数](https://stackoverflow.com/questions/538134/exporting-functions-from-a-dll-with-dllexport)

所以签名应该是这样的：

```
extern "C" __declspec(dllexport) void showVersion () {
} 
```

最后，依赖工具可以在这里下载：http: [//www.dependencywalker.com/](http://www.dependencywalker.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:18:10.023

我认为您的本机库需要提供 C 风格的界面，例如

```
__declspec( dllexport ) void showVersion() {
  /* ... */
} 
```

理想情况下，查看您的 DLL `depends.exe`（可通过 Windows SDK 获得），您将看到您的 DLL 是否提供了正确的函数导出。

# php - 使文本框不可见或只读

> ID：14706194
> 
> 赞同：2
> 
> 时间：2013-02-05T11:13:50.940
> 
> 标签：php, jquery, html, mysql, css

```
<html>
<body>
  <form action="MyInserts.php" method="GET">
    <a href="http://localhost/login.htm" target="_blank">CLICK HERE TO LOGIN</a>
    <br>
    <p><u>Create Acct</u></p>
    <br>
    firstname: <input type="text" name="firstbox"><br>
    lastname:  <input type="text" name="lastbox"><br>
    id number:  <input type="text" name="idbox"><br>

    <input type="submit" value="Create">
  </form>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T11:15:30.737

只读：

```
<INPUT TYPE="text" NAME="firstbox" readonly="readonly"> 
```

禁用：

```
<INPUT TYPE="text" NAME="firstbox" disabled="disabled"> 
```

无形的：

```
<INPUT TYPE="text" NAME="firstbox" type="hidden"> 
```

**更新**

> READONLY 和 DISABLED 都删除了输入字段的功能，但程度不同。READONLY 锁定字段：用户不能更改值。DISABLED 做同样的事情，但更进一步：用户不能以任何方式使用该字段，不能突出显示要复制的文本，不能选中复选框，不能提交表单。事实上，如果提交表单，甚至不会发送禁用字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T11:15:46.800

只读 ：

```
<INPUT TYPE="text" NAME="firstbox" readonly> 
```

无形的

```
<INPUT TYPE="text" NAME="firstbox" style="display: none"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:15:16.243

注意：要使用 jQuery，您必须通过添加以下内容来包含它：

```
<script type='text/javascript' src='//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js'></script> 
```

用 jQuery 隐藏它：

```
<script type='text/javascript'>
    $(function() {
        $('input[type="text"]').first().hide();
    });
</script> 
```

要禁用它，请将其替换为上面：

```
$(function() {
    $('input[type="text"]').first().prop('disabled', true);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:16:14.653

在文本框标签的该属性中使用只读，

```
<INPUT TYPE="text" NAME="firstbox" readonly> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T11:16:15.930

添加`readonly="readonly"`

```
<INPUT TYPE="text" NAME="firstbox" readonly="readonly"> 
```

**[演示](http://jsfiddle.net/mnrjr/)**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T11:16:34.900

使用 CSS：

```
input[name=firstbox]
{
   display: none;
} 
```

或更改html：

```
<INPUT TYPE="text" NAME="firstbox" readonly> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-05T11:17:21.713

您可以使用`disabled="disabled"` 示例

```
<input type="text" name="firstbox" disabled="disabled" /> 
```

或者`readonly="readonly"`

```
<input type="text" name="firstbox" readonly="readonly" /> 
```

演示：http: [//jsfiddle.net/enve/SyDpX/](http://jsfiddle.net/enve/SyDpX/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-05T11:20:08.003

CSS 属性：

*   [能见度](https://developer.mozilla.org/en-US/docs/CSS/visibility)
*   [展示](https://developer.mozilla.org/en-US/docs/CSS/display)

HTML 属性：

*   [只读](https://developer.mozilla.org/en-US/docs/XUL/textbox#a-readonly)
*   [禁用](https://developer.mozilla.org/en-US/docs/XUL/textbox#a-disabled)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-05T11:32:52.310

使用它来禁用文本框：

```
<INPUT TYPE="text" NAME="firstbox" disabled> 
```

# c++ - 查找抛出 std::out_of_range 的对象

> ID：14706205
> 
> 赞同：7
> 
> 时间：2013-02-05T11:14:31.103
> 
> 标签：c++, debugging, exception, stl

我的一个程序抛出一个`std::out_of_range`. 我知道原因，我正在`-1`某处访问带有索引的向量。我不知道的是向量的名称（变量名）和代码中的位置。我的程序产生的错误信息如下所示：

```
terminate called after throwing an instance of 'std::out_of_range'
  what():  vector::_M_range_check
zsh: abort (core dumped)  ./main.x config.cfg 
```

而由其他人（他`g++`也使用）的代码产生并发布在问题[C++ 访问向量](https://stackoverflow.com/questions/4247079/c-accessing-vector)中的错误消息如下所示：

```
Error for vec.at(i).setVec(tmp);
Error is:  terminate called after throwing an instance of 'std::out_of_range'
  what():  vector::_M_range_check 
```

即告诉他变量的名称。我的问题是：

有没有办法告诉`g++`/`gcc`给我扩展信息？甚至可能包括行号（不知道这是否可能，但是嘿，一个人可以梦想；））。只是为了好玩，我用这个选项
运行我的程序（我可能会补充一点，我在使用实际调试器方面的经验几乎为零）这也没有告诉我任何新的东西，事实上，它并没有告诉我错误是由于异常。 `gdb``catch thrown``std::out_of_range`

顺便说一句，我的编译器标志（用于调试）是：

```
CFLAGS = --exceptions -I$(ROOTSYS)/include --std=c++11 -Wall -g -O0 -fno-inline -fno-eliminate-unused-debug-types 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:57:39.017

将断点放在`std::out_of_range::out_of_range`. 与所有 C++ 对象一样，异常对象在其构造函数退出后开始其生命。

[编辑] 评论说得很清楚：由`std::out_of_range::what()`. 这是实现定义的。显然，在您的情况下，它由`__FUNCTION__`GCC 宏组成，该宏命名当前（即抛出）函数。但是这样的函数只知道`this`，即指向当前对象的指针而不是它的名称。在另一种情况下，对象名称是通过其他方法检索的，而不是`std::out_of_range::what()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T13:19:24.600

在 gdb shell 中命中断点后输入`bt`（回溯）命令。这将打印堆栈跟踪（导致错误的一系列函数调用）。

要获取变量名称，您现在可以使用`up`命令在堆栈中向上导航，并查看每个函数中使用了哪些变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-22T11:08:28.777

为了避免在每次抛出异常时都遇到断点，并且仅在`std::out_of_range`使用以下命令时停止`gdb`：

```
catch throw std::out_of_range 
```

然后运行 ​​commad`bt`或者`where`当断点被击中时，看看代码中哪里抛出了异常

# c# - 几秒钟后如何隐藏此错误消息？

> ID：14706207
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:14:43.230
> 
> 标签：c#, asp.net

我正在开发一个简单的注册系统，其中所有事件都将列在 GridView 中，用户可以通过单击事件旁边显示的注册按钮来单击事件中的注册。工作正常，但我只有一个问题，如下所示：当用户尝试注册他已经在其中注册的事件之一时，他将在 GridView 下收到一条错误消息。问题当他在另一个事件中成功注册时，此消息将一直显示。我想要的只是显示这条消息几秒钟。

**那么该怎么做呢？**

这是我在 ASP.NET 中的代码：

```
<asp:GridView ID="ListOfAvailableEvents_GrivView" runat="server" AutoGenerateColumns="False"
        DataKeyNames="ID" CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333"
        GridLines="None" AllowPaging="True" PageSize="10" 
        onrowdatabound="ListOfAvailableEvents_GrivView_RowDataBound">
    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" CssClass="generaltext" />
    <Columns>
        <asp:TemplateField HeaderText="">
            <ItemTemplate>
                <asp:LinkButton ID="lnkTitle" runat="server" CssClass="button" Text="Book &rarr;" OnClick="lnkTitle_Click"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
        <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
        <asp:BoundField DataField="Location" HeaderText="Location" SortExpression="Location" />
        <asp:BoundField DataField="StartDateTime" HeaderText="Start Date & Time" SortExpression="StartDateTime" />
        <asp:BoundField DataField="EndDateTime" HeaderText="End Date & Time" SortExpression="EndDateTime" />
    </Columns>
    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
    <HeaderStyle Font-Bold="True" CssClass="complete" />
    <EditRowStyle BackColor="#999999" />
    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <EmptyDataTemplate><h2>No Events Available</h2></EmptyDataTemplate>
</asp:GridView>

<span id="errorSpan" runat="server" style="color:Red;"></span>

<asp:Button ID="btnModalPopUp" runat="server" Style="display: none" />
<ajaxToolkit:ModalPopupExtender ID="modalPopupExtender1" runat="server" TargetControlID="btnModalPopUp"
    PopupControlID="pnlPopUp" BackgroundCssClass="popUpStyle" PopupDragHandleControlID="panelDragHandle"
    OkControlID="OKButton">
</ajaxToolkit:ModalPopupExtender>
<asp:HiddenField ID="HiddenField1" runat="server" />

<asp:Panel ID="pnlPopUp" runat="server" CssClass="popUpStyle">
    <%--<asp:Label ID="lblQuestion" runat="server" Text="Are you sure you want to register in" />--%>
    <table class="tableClass" width="400px">
        <tr>
            <th valign="middle" colspan="2" align="center" bgcolor="#99CCFF" style="font-weight: bold;
                font-size: larger">
                Event Details
            </th>
        </tr>
        <tr>
            <td class="thClass">
                Title:
            </td>
            <td class="tdClass">
                <asp:Label ID="lblTitle" runat="server"></asp:Label>
            </td>
        </tr>
        <tr>
            <td class="thClass">
                Description:
            </td>
            <td class="tdClass">
                <asp:Label ID="lblDescription" runat="server"></asp:Label>
            </td>
        </tr>
        <tr>
            <td class="thClass">
                Location:
            </td>
            <td class="tdClass">
                <asp:Label ID="lblLocation" runat="server" />
            </td>
        </tr>
        <tr>
            <td class="thClass">
                Start Date & Time:
            </td>
            <td class="tdClass">
                <asp:Label ID="lblStartDateTime" runat="server" />
            </td>
        </tr>
        <tr>
            <td class="thClass">
                End Date & Time:
            </td>
            <td class="tdClass">
                <asp:Label ID="lblEndDateTime" runat="server" />
            </td>
        </tr>
    </table>
    <center>
    <asp:Button ID="confirmButton" runat="server" Text="Register" OnClick="btnSendConfirmationEmail_Click" />
    <asp:Button ID="OKButton" runat="server" Text="Cancel" /></center>
</asp:Panel> 
```

C#代码隐藏：

```
protected void btnSendConfirmationEmail_Click(object sender, EventArgs e)
{
    int eventID = Convert.ToInt32(HiddenField1.Value);
    if (!UserHasBooking(userNetworkID, eventID))
    {
        checkUserID(userNetworkID, eventID);

        SmtpClient sc = new SmtpClient("Mail Server");
        StringBuilder sb = new StringBuilder();
        MailMessage msg = new MailMessage();

        //Variables for retrieving the Booking Information
        string title = lblTitle.Text;
        string description = lblDescription.Text;
        string location = lblLocation.Text;
        string startDateTime = lblStartDateTime.Text;
        string endDateTime = lblEndDateTime.Text;

        //Message Information
        string toAddress = userNetworkID + "@mailserver.com";
        string fromAddress = "Test@MailServer.com";
        string mailSubject = "Registration Notification: " + title + " (" + startDateTime + " - " + endDateTime + ")";
        string messageBody = "............";

        try
        {
            msg.To.Add(toAddress);
            msg.From = new MailAddress(fromAddress, "Registration System");
            msg.Subject = mailSubject;
            msg.Body = messageBody;
            msg.IsBodyHtml = true;
            sc.Send(msg);
        }

        catch (Exception ex)
        {
            throw ex;
            // something bad happened
            //Response.Write("Something bad happened!");
        }

        finally
        {
            if (msg != null)
            {
                msg.Dispose();
            }
        }
    }
    else
    {
        errorSpan.InnerText = "You already have a booking in this event";
    }
} 
```

错误信息是：errorSpan.InnerText = "您已经预订了此活动";

**那么如何解决呢？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T18:34:58.090

```
<script type="text/javascript">
        window.onload = function () {
            var seconds = 5;
            setTimeout(function () {
                document.getElementById("<%=lblreg.ClientID %>").style.display = "none";
            }, seconds * 1000);
        };
    </script> 
```

只需在标题部分添加此代码......它就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:26:45.847

定义函数：

```
function hideError(){
        setTimeout(function () {
            $("#errorSpan").hide();
        }, sec * 1000);
    } 
```

在 else 部分调用以下语句

```
string javaScript =
"<script language=JavaScript>\n" +
"hideError();\n" +
"</script>";

RegisterStartupScript("hideError", javaScript); 
```

或者

```
ClientScript.RegisterClientScriptBlock(GetType(), "close", "<script language='javascript'>hideError();</script>", false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T18:08:36.770

```
<script type="text/javascript">
        window.onload = function () {
            var seconds = 5;
            setTimeout(function () {
                document.getElementById("<%=lblMessage.ClientID %>").style.display = "none";
            }, seconds * 1000);
        };
    </script> 
```

只需在标题部分添加此代码......它的工作原理..

# c++ - 为什么 fork() 可能不会返回给孩子？

> ID：14706209
> 
> 赞同：1
> 
> 时间：2013-02-05T11:14:43.527
> 
> 标签：c++, linux, fork

我的应用程序需要`fork()`，但有时（大约 1/10 倍）`fork`不会返回给孩子。我的代码的分叉部分相当于：

```
void myFunc()
{
  pid_t pid = fork();
  if( pid == -1 )
  {
    printf( "Error! %d\n", errno );
    exit(1);
  }
  else if( pid == 0 )
  {
    printf( "In the child\n" );
    _Exit(0);
  }
  else
  {
    printf( "In the parent\n" );
    int status;
    if( waitpid( pid, &status, 0 ) == pid )
    {
      // check status
    }
    printf( "Finished waitpid\n" );
  }
} 
```

虽然大多数时候我看到输出：

```
In the parent
In the child
Finished waitpid 
```

有时我只是看到

```
In the parent 
```

现在，我怀疑这可能是因为我们在这个平台上的内存非常有限，所以我已经超出了父应用程序中的标记，并且没有足够的内存来`fork`. 但是，在这种情况下，我希望调用`fork()`返回 -1，并且我会陷入错误状态。

是否有可能我仍然会瞬间耗尽内存，但`fork()`没有告诉我这件事？

# jquery - jQuery - 在文本区域中识别和标记链接

> ID：14706211
> 
> 赞同：0
> 
> 时间：2013-02-05T11:14:50.320
> 
> 标签：jquery, hyperlink, textarea, href

我有一个文本区域

```
<textarea id="postContent" class="input-block-level" placeholder="Tell us about it!" rows="4"></textarea> 
```

我需要一个脚本来突出显示在 textarea 中写入的链接，将它们存储在一个变量（数组）中以供以后处理并删除所有 html-tags。这种行为在 twitter 上的推文框中是众所周知的。

所以内容可能是

> 看看我今天在 www.stackoverflow.com 上发现了什么！

在这种情况下，www.stackoverflow.com 应该突出显示（用`<p>`fe 包裹）而不带“！”。

你会如何用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T11:37:38.357

如果要突出显示链接，则必须使用 textarea 的 innerHTML ....（我不建议这样做）您的正则表达式放在这里 = var regEx = /((ht|f)tps?://\S*) /G;

其次，您可以使用 textarea 中的点击事件来识别链接...点击处理程序应该查看它是 url 还是纯文本..如果链接打开新窗口..否则返回 false....

# meteor - 您将如何使用meteor.js 构建类似pinterest 的页面

> ID：14706215
> 
> 赞同：8
> 
> 时间：2013-02-05T11:15:02.730
> 
> 标签：meteor, pinterest

我希望你们都知道 pinterest 样式布局及其行为：

*   我们收集了许多（比如说 1000 个）产品
*   在页面加载时，我们只显示该集合的一小部分（即 20 个第一批产品）
*   当用户向下滚动并到达页面底部时，我们会呈现接下来的 20 个产品
*   页面被许多客户查看，每个客户都有自己的一组展示产品

奖励任务：

*   当 Products 集合获得新项目时，它们会显示在页面顶部（作为显示产品列表中的第一个项目）

我正在考虑**如何以 Meteor 方式编写该逻辑**。让我们跳过用户界面代码，我只对业务逻辑感兴趣。

我正在考虑将 ProductsDisplayed 集合作为助手，它是空的，并且在页面加载时由 20 个产品填充，然后当达到滚动点时，我从原始 Products 集合等中插入 20 个产品。

问题：

*   如何在客户端之间有不同的 ProductsDisplayed 集合，
*   如何从 Products 集合中查询下 20 个产品，而不是之前的产品

但也许关于 ProductsDisplayed 的整个想法是错误的。我很想知道你的想法！

**更新！**
我改变了只使用 Products 集合的方法。

服务器：

```
Meteor.publish "productsDisplayed", (number) ->
  Products.find {},
    limit: number 
```

客户：

```
Meteor.autosubscribe ->
  Meteor.subscribe "productsDisplayed", Session.get('productsDisplayedNumber') 
```

并在达到滚动点时增加 20 个会话“productsDisplayedNumber”。但是自动订阅会重新渲染整个模板，而不仅仅是新元素。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T16:16:11.713

我终于解决了这个问题。解决方案是让客户只收集，像这样：

```
# on client
# client side only collection
ProductsDisplayed = new Meteor.Collection(null) 
```

然后当达到滚动点时，向服务器询问下 N ( `limitNo`) 个产品

```
# on client
Meteor.call 'getProducts', limitNo, skipNo, (err, products) =>

  _.each products, (item, index) =>
    # get rid of _id
    delete item._id

    ProductsDisplayed.insert( item ) 
```

`skipNo`递增 N，始终要求下一组数据。在服务器端我有：

```
# on server
Meteor.methods
  getProducts: (limitNo, skipNo) ->

    productsCursor = Products.find( {}, {
      limit: limitNo,
      skip: skipNo
    })

    productsCursor.fetch() 
```

这个 Meteor 方法从 Products 集合中返回我的下一组产品。

当然视图模板显示 ProductsDisplayed 集合内容：

```
Template.products.products = ->
  ProductsDisplayed.find {} 
```

所以你怎么看？

# extjs - 在 extjs 中为箭头键创建事件

> ID：14706218
> 
> 赞同：2
> 
> 时间：2013-02-05T11:15:10.270
> 
> 标签：extjs, extjs4, extjs4.1

如何获取extjs中箭头键的字符代码？

我尝试了下面的代码，它可以很好地获取所有键盘按钮的字符代码，但不能获取箭头键（也是 Backspace）。

```
Ext.getDoc().on('keypress', function(event, target) {
        console.log(event.getCharCode())
}); 
```

在问这里之前，我已经浏览了我无法理解的[文档。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element-event-keypress)

并且如果我按下`backspace`则页面将重定向到上一页。我计划在未来保留自己的功能`backspace`。如何在 extjs 中覆盖它？

我是初学者。所以，请提供简单的例子..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:41:47.657

要存档此内容，您需要使用监控，例如

```
instance.mon(Ext.getDoc(), Ext.EventManager.getKeyEvent(), instance.callBack, instance) 
```

见**[JSFiddle](http://jsfiddle.net/v7hZH/6/)**（我想你可以检查正确的键）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:47:50.580

在文档中有一个例子：http: [//dev.sencha.com/deploy/ext-4.1.0-gpl/examples/keynav/keynav.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/keynav/keynav.html)

# python - 如何在 Selenium webdriver 中录制视频

> ID：14706225
> 
> 赞同：15
> 
> 时间：2013-02-05T11:15:30.847
> 
> 标签：python, selenium, webdriver, selenium-webdriver, video-recording

我有每天晚上运行的自动化脚本（大约 350 个脚本或测试用例）。我想录制每个测试用例（Python 脚本）的视频。有没有可以用来分别控制每个测试用例的视频录制的工具或方法？

例如，在测试用例设置期间开始录制，在拆卸期间停止录制并使用指定的名称和日期在本地保存视频。所以每个测试用例我应该有 350 个视频（最好只保存失败的测试用例的视频）。

有没有办法将此功能集成到我用于设置和拆卸的代码中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-06T03:11:00.147

一个简单的 webdriver 没有录制视频的功能；您需要使用第三方库，例如[Castro](https://pypi.org/project/castro/)。

对于 Java Webdriver，请查看博客文章*[Screen Recording (Video) of Java Webdriver script](http://roadtoautomation.blogspot.in/2013/03/screen-recording-video-of-java-webdiver.html)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:15:24.320

你可以在 Python中使用[Castro ...](http://pypi.python.org/pypi/castro/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T08:54:06.860

您可以使用以下 Web 服务[http://bit.ly/video-recorder-service](http://bit.ly/video-recorder-service)可以通过简单的 http 请求进行远程控制。

我已将其用于网格环境中的 webdriver 测试。

# ruby-on-rails - 从数组更改闪存消息颜色

> ID：14706228
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:15:40.620
> 
> 标签：ruby-on-rails, ruby, hash, flash-message

我有一个对应于各种闪存消息的符号列表：

```
:is_self
:already_exist
:already_added 
:invited 
:added 
```

每次我运行我的方法时，`answer`都会为变量分配这些符号之一。`message`我将要显示的 Flash 消息分配给变量：

```
message = t("flash.#{answer.to_s}") 
```

这工作正常。在我的方法结束时，我有类似的东西：

```
respond_to do |format|
  format.html { redirect_to url, flash: { info: message } }
end 
```

我想更改 Flash 消息的颜色（在 之间切换`info: success: error:`）。如何设置一个包含正确颜色的散列变量来显示 Flash 消息？我试过类似的东西：

```
new_hash = { :is_self => "info:" , :already_exist => "info:" , :already_added => "info:", :invited => "success:", :added => "success:", }
flash_color = new_hash[answer] 
```

进而：

```
respond_to do |format|
  format.html { redirect_to url, flash: { flash_color message } }
end 
```

但我不会工作。我不知道如何给出正确的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:14:47.380

假设，如果您使用[twitter bootstrap 进行样式 flash](http://getbootstrap.com/components/#Alert)，您可以将您的选择样式保存在`application_helper.rb`

```
module ApplicationHelper
  def flash_class(level)
    case level
    when :notice then "alert alert-info"
    when :success then "alert alert-success"
    when :error then "alert alert-warning"
    when :alert then "alert alert-danger"
    end
  end
end 
```

在文件夹布局上创建文件`_flash_message.html.erb`并粘贴

```
<div>
  <% flash.each do |key, value| %>
    <div class="alert <%= flash_class(key).to_s %> fade in">
      <a href="#" data-dismiss="alert" class="close">×</a>
      <%= value %>
    </div>
  <% end %>
</div> 
```

并调用您刚刚在视图中渲染的闪光灯

```
<%= render 'layouts/flash_message' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:30:00.623

你有点混淆了语法。您最初获得的映射：

```
{ info: message } 
```

是将符号映射`:info`到 的值的哈希值`message`。可以写成`{ :info => message }`

在您的哈希`new_hash`中，您在字符串中包含冒号，冒号在 ruby​​ 1.9 哈希语法中用于指示符号。我希望您会遇到语法错误，因为您不再以有效的方式设置哈希。

我认为您需要使用更传统的哈希语法并在`new_hash`. 像这样的东西应该工作：

```
new_hash = { 
  :is_self => :info, 
  :already_exist => :info, 
  :already_added => :info, 
  :invited => :success, 
  :added => :success, 
} 
```

和：

```
flash_color = new_hash[answer]
respond_to do |format|
  format.html { redirect_to url, flash: { flash_color => message } }
end 
```

PS 你这么称呼它也有点令人困惑`flash_color`——颜色只是它在前端设计的副产品。它们实际上只是闪存哈希中的键。

# rss - 雅虎管道和自定义 RSS

> ID：14706230
> 
> 赞同：0
> 
> 时间：2013-02-05T11:15:46.463
> 
> 标签：rss, yahoo-pipes

我创建了一个自定义 yahoo 管道，以从我想通过电子邮件发送作为提醒的网站中提取特定事件。

我在不同的自定义字段中创建了重复的 item.content，这些字段被解析并去除了不必要的东西，并且通过单击管道输出，一切都在那里。

然而，当谈到 RSS 输出时，不幸的是，只有少数标准项目被提取出来。

有什么方法可以提取我创建的其他项目吗？

非常感谢安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:18:54.513

根据定义，RSS 提要只有标准项目。最简单的方法是使用创建 RSS 模块。将每个标准 RSS 字段映射到您的自定义内容字段 - 因为您是 RSS 的唯一消费者，您只需要记住描述字段实际上是其他内容。

如果您使用 RSS 字段来提供其他内容，您还可以获得包含所有字段的 json 输出，并阅读 json 以创建您的电子邮件。

# java - 当我尝试 UnsortedReadableList.loadFrom(Vector) 时出现 IllegalArgumentException

> ID：14706249
> 
> 赞同：1
> 
> 时间：2013-02-05T11:16:50.203
> 
> 标签：java, blackberry, illegalargumentexception

以下代码：

```
UnsortedReadableList collection = new UnsortedReadableList();
Vector messages = new Vector();

// ApplicationMessageImpl is simple implementation of 
// net.rim.blackberry.api.messagelist.ApplicationMessage interface
messages.addElement(new ApplicationMessageImpl("bla-bla"));
collection.loadFrom(messages); 
```

生产`IllegalArgumentException` ![在此处输入图像描述](../Images/99d9e8ecdc50b45c713754f92bb2df22.png)

有人可以帮我理解为什么吗？我在异常中看不到任何细节

更新

![在此处输入图像描述](../Images/75b39f19ed676d875c6029edfe4111d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:56:51.907

的[`UnsortedReadableList.loadFrom()`JavaDoc](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/collection/util/UnsortedReadableList.html#loadFrom%28java.lang.Object%29)说明了有关集合参数：

> 收藏 - 此列表的新内容；应该是 ReadableSet、ReadableList、Object 数组或 Enumeration。

`Vector`您作为参数提供的不是上述类型之一。`Vector.toArray()`但是确实提供了一个`Object[]`. 因此，我会尝试以下方法：

```
UnsortedReadableList collection = new UnsortedReadableList();
Vector messages = new Vector();

// ApplicationMessageImpl is simple implementation of 
// net.rim.blackberry.api.messagelist.ApplicationMessage interface
messages.addElement(new ApplicationMessageImpl("bla-bla"));
Object[] messageArray = new Object[messages.size()];
messages.copyInto(messageArray));
collection.loadFrom(messageArray); 
```

# gwt - GWT：通过将 gwt-maven-plugin 属性 disableClassMetadata 设置为 true 来禁用动态日志记录

> ID：14706250
> 
> 赞同：2
> 
> 时间：2013-02-05T11:16:54.747
> 
> 标签：gwt, logging, gwt-maven-plugin

我们最近向我们的 gwt Web 应用程序添加了动态日志记录。

为了实现这一点，我们在 webapp.gwt.xml 文件中添加了一个小 javascript 函数，该函数在 URL 中查找**“?logging”**参数并返回**true**或**false**。

```
<define-property name="dynamicLogging" values="TRUE, FALSE"/>
<property-provider name="dynamicLogging">
    <![CDATA[
        var logging = false;
        var strHref = window.location.href;

        if (strHref.indexOf("?") > -1) {
          var strQueryString = strHref.substr(strHref.indexOf("?")).toLowerCase();
          var aParam = strQueryString.split("&").toString();

          logging = aParam.indexOf("logging") > -1;
        }

        if (logging) {
          return 'TRUE'
        } else {
          return 'FALSE'
        }
    ]]>
</property-provider> 
```

此函数用于激活 gwt.logging 并将 logLevel 设置为“FINEST”。

```
<set-property name="gwt.logging.enabled" value="TRUE">
    <when-property-is name="dynamicLogging" value="TRUE"/>
</set-property>

<set-property name="gwt.logging.logLevel" value="FINEST">
    <when-property-is name="dynamicLogging" value="TRUE"/>
</set-property> 
```

在我们的 gwt-maven-plugin 配置中，我们将**disableClassMetadata**属性设置为 true 以生成更小的排列文件。我们谈论约 90kb 的排列。

```
<plugin>
   <groupId>org.codehaus.mojo</groupId>
   <artifactId>gwt-maven-plugin</artifactId>
   <configuration>
      <style>OBF</style>
      <draftCompile>false</draftCompile>
      <disableClassMetadata>true</disableClassMetadata>
      <disableCastChecking>true</disableCastChecking>
      <disableAggressiveOptimization>false</disableAggressiveOptimization>
      <optimizationLevel>9</optimizationLevel>
      <enableClosureCompiler>true</enableClosureCompiler>
      <logLevel>INFO</logLevel>
   </configuration>
</plugin> 
```

但这会禁用我们的动态日志记录！到目前为止，我们发现的唯一一件事是，JavaScript 函数在两种配置中都能正常工作。（disableClassMetadata= **true**和**false**）

[Maven GWT 插件网站](http://mojo.codehaus.org/gwt-maven-plugin/compile-mojo.html#disableClassMetadata)上的描述没有合理解释为什么这会影响 webapp.gwt.xml 文件中的任何代码。

谢谢你的帮助！

# html - 按钮图像状态：点击时Png文件消失

> ID：14706251
> 
> 赞同：0
> 
> 时间：2013-02-05T11:16:58.270
> 
> 标签：html, css, button, mobile, png

您好 Stackoverflow 社区，我很难弄清楚这一点，我正在使用 css 将按钮的状态从正常/单击/悬停更改。

这是我的 HTML，只是按钮所在的 div 层

```
<div id="newsarticle"><a href="/twitter.html" id="button-twitter"></a></div> 
```

这是我的CSS

```
/*Twitter */
#button-twitter {
display: block;
width: 100px;
height: 20px;
background:url('../images/btns/quicklinks-normalState-twitter.png'); no-repeat top;
        }                   
#button-twitter:hover {
background:url('../images/btns/quicklinks-hoverState-twitter.png') no-repeat top;
}
#button-twitter:active {
background: url('../images/btns/quicklinks-clickedState-twitter.png') no-repeat top;
/*Twitter */ 
```

在 Mobile 和 Ipad 上发生的情况是，当您单击时，您切换到活动状态，然后它就消失了，您在缺少按钮的情况下等待片刻，直到您转到下一页。

这不会仅在台式机移动设备和 ipad 上发生，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:35:48.080

我认为这里可能发生的是移动设备上的点击事件没有被足够快地触发（在链接上的操作请求之前）。我建议将其添加到您的身体中：

```
 <body ontouchstart="">
    ...
   </body> 
```

或者，您可以查看一个名为[Fastclick的小型 JS 库。](http://labs.ft.com/2011/08/fastclick-native-like-tapping-for-touch-apps/)

# c# - JavaScript 查找月差并用另一个值计算

> ID：14706254
> 
> 赞同：0
> 
> 时间：2013-02-05T11:17:13.950
> 
> 标签：c#, javascript, .net

我正在研究 ASP.NET c# 中的网格视图。在gridview中如果有4个TextBox在其中

```
1st field - hire/month
2nd field - from date
3rd field - to date
4th field - required machine month 
```

这个概念是这样工作的。

from_date 和 to_date 之间的差异应以月份为单位，并应乘以租用/月以获得 required_machine_month 字段。请帮助我。

我不知道 JavaScript，尽管我通过获取一个函数的差异并将该函数调用到另一个函数并将其相乘以获得输出来尽力而为。

但是 JavaScript 完全失败并且似乎不起作用。请给我一个好的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:20:45.207

您可以在您的类中创建一个返回计算值的属性并将该属性放在网格中，因此不需要 Javascript。像那样：

```
 public string RequiredMachineMonth
   {
       get
       {
            return ... //Your logic based on 'to' and 'from' here
       }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:31:42.720

如果您在网格中使用 TemplateField 并提供如下文本框`class`属性，则可以使用 JQuery 作为一种简单的方法：

```
<asp:TemplateField>
    <ItemTemplate>
        <input type="text" class="to-date"/>
    <ItemTemplate>
</asp:TemplateField> 
```

并假设你已经给出了这样的类：`hire-month',`to-date `,`from-date `,`required` 然后在 jquery 中使用类似的东西

```
<script type="text/javascript">
    $(document).ready(function(){
        $('.to-date, .from-date').change(function(){
            var required = $(this).parent().children('.required');
            var toDate = $(this).parent().children('.to-date').val();
            var fromDate = $(this).parent().children('.from-date').val();
            required.val(toDate + fromDate); //put your logic here
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:38:52.427

```
var DisplayTo = new Date();
var DisplayFrom = new Date("2012-03-05");

var diff = DisplayTo.getMonth() - DisplayFrom.getMonth() + (12 * (DisplayTo.getFullYear() - DisplayFrom.getFullYear()));
var machineMonth = hiremonth * diff; 
```

你试过这个吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T05:15:12.197

感谢您的所有帮助.. 最后我得到了脚本工作。但它很长。我把它贴在下面供任何人使用。如果有人不清楚。请随时询问，以便我可以告诉我我做了什么。

```
<script type="text/javascript" language="javascript">

function req_mac_month(numbers,fromDate,toDate,mcMonth)
{
    //alert("Executed");
    var reqnum=document.getElementById(numbers).value;
    var sdate=document.getElementById(fromDate).value;
    var edate=document.getElementById(toDate).value;
    //var diff=DisplayTo.getMonth() - DisplayFrom.getMonth() + (12 * (DisplayTo.getFullYear() - DisplayFrom.getFullYear()));
    //var diff=Math.ceil((DisplayTo.getTime()-DisplayFrom.getTime())/(1000*60*60*24));
    var day1, day2;
    var month1, month2;
    var year1, year2;
    //var noofmonths;
    day1 = sdate.substring(0, sdate.indexOf("-"));
    month1 = sdate.substring(sdate.indexOf("-") + 1, sdate.lastIndexOf("-"));
    year1 = sdate.substring(sdate.lastIndexOf("-") + 1, sdate.length);

    day2 = edate.substring(0, edate.indexOf("-"));
    month2 = edate.substring(edate.indexOf("-") + 1, edate.lastIndexOf("-"));
    year2 = edate.substring(edate.lastIndexOf("-") + 1, edate.length);

    date1 = year1 + "/" + month1 + "/" + day1;
    date2 = year2 + "/" + month2 + "/" + day2;

    firstDate = Date.parse(date1)
    secondDate = Date.parse(date2)

    msPerDay = 24 * 60 * 60 * 1000

    dbd = trunc(((Math.round(((secondDate.valueOf() - firstDate.valueOf()) / msPerDay) + 1))/30),4);
            reqmcmonthtotal = dbd * reqnum ;
            document.getElementById(mcMonth).value= reqmcmonthtotal;
    return true;      
}
</script> 
```

在后面的代码中......，

```
TextBox rnum = grvps.FooterRow.FindControl("Ftxteditreqnum") as TextBox;
TextBox fromDate = grvps.FooterRow.FindControl("txtFromDate") as TextBox;
TextBox toDate = grvps.FooterRow.FindControl("txtEndDate") as TextBox;
TextBox mcMonth = grvps.FooterRow.FindControl("Ftxteditreqmcmth") as TextBox;

string req_mac_month = string.Format("return req_mac_month('{0}','{1}','{2}','{3}');", rnum.ClientID, fromDate.ClientID, toDate.ClientID, mcMonth.ClientID);
rnum.Attributes.Add("onchange", req_mac_month);
fromDate.Attributes.Add("onchange", req_mac_month);
toDate.Attributes.Add("onchange", req_mac_month); 
```

# django - 如何创建随机密码？create_user 函数

> ID：14706257
> 
> 赞同：9
> 
> 时间：2013-02-05T11:17:19.070
> 
> 标签：django

> **可能重复：**
> [Django 密码生成器](https://stackoverflow.com/questions/9480641/django-password-generator)

```
d = Data.objects.get(key=key)    
User.objects.create_user(username = d.name, email= d.email, password =  password) 
```

如何创建随机密码并通过电子邮件将其发送给用户（`d.email`）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-05T11:21:27.083

在 django[`make_random_password`](https://docs.djangoproject.com/en/stable/topics/auth/customizing/#django.contrib.auth.models.BaseUserManager.make_random_password)中是一个生成随机密码的内置方法

```
my_password = User.objects.make_random_password() 
```

它接受参数 `length`，`allowd_chars`您可以限制密码长度以及特殊符号和数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:24:18.910

```
def view_name(request):
    #make random password
    randompass = ''.join([choice('1234567890qwertyuiopasdfghjklzxcvbnm') for i in range(7)])

    #sending email
    message = "your message here"
    subject = "your subject here"
    send_mail(subject, message, from_email, ['to_email',]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T11:21:49.370

使用它来创建随机密码：

[在 Python 中使用大写字母和数字生成随机字符串](https://stackoverflow.com/questions/2257441/python-random-string-generation-with-upper-case-letters-and-digits)

并发送电子邮件。

```
from django.core.mail import send_mail
password = rand_string
send_mail('Subject here', 'Here is the password: .'+password,
               'from@example.com', ['someone@gmail.com'],
               fail_silently=False) 
```

您需要在 settings.py 中定义一些 EMAIL 设置

```
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'someone@gmail.com'
EMAIL_HOST_PASSWORD = 'mypassword' 
```

# html - 如何在 IE 中使用 HTML 5 录制音频文件

> ID：14706259
> 
> 赞同：2
> 
> 时间：2013-02-05T11:17:20.643
> 
> 标签：html, internet-explorer

我对此进行了很多搜索，但我发现只有在谷歌浏览器中才能录制此录音。

您能指导我们如何使用 HTML 5 在 IE 中录制和播放录制的文件吗？

谢谢-Vivek Deshmukh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:22:09.750

简单的答案是你不能。您将需要使用 Flash 或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:21:07.310

AFAIK，IE 还没有真正准备好 HTML5，至少不能用于更高级的操作，比如录音。在这方面，Chrome 或 Safari 等 WebKit 浏览器的速度要快得多。

您正在使用/测试哪个版本？

# python - Python：替换从字符开始的字符串

> ID：14706261
> 
> 赞同：2
> 
> 时间：2013-02-05T11:17:21.823
> 
> 标签：python, string, replace

我需要一种**优化**的方法来替换字符串中从“/”开始的所有尾随字符。

例如：

```
mytext = "this is my/string" 
```

我想要这样的结果

```
mytext = "this is my/text" 
```

只有'/'之后的字符串必须被替换并且必须以优化的方式完成。谁能为我找到解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:21:44.193

我不确定您所说的优化是什么意思，但我会这样做：

```
>>> import re
>>> mytext = "this is my/string"
>>> re.sub('/.*','/text',mytext)
'this is my/text' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:24:28.437

这似乎是最快的：

```
s = "this is my/string"
mytext = s[:s.rindex('/')] + '/text' 
```

我测试过的：

```
>>> s = "this is my/string"
>>> pattern = re.compile('/.*$')

>>> %timeit pattern.sub('/text', s)
1000000 loops, best of 3: 730 ns per loop

>>> %timeit s[:s.rindex('/')] + '/text'
1000000 loops, best of 3: 284 ns per loop

>>> %timeit s.rsplit('/', 1)[0] + '/text'
1000000 loops, best of 3: 321 ns per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:28:46.220

正则表达式 速度很慢，因为您需要（第一个？）`/`字符之后的所有文本，所以最好的方法是：

```
mytext[:mytext.index('/')+1] + 'the replacement text' 
```

但是，如果您没有“/”，这将失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:30:21.120

不确定它有多快，也没有错误检查，但我会找到斜线并组合字符串。

```
s = 'this is my/string'
result = s[:s.find('/')+1]+'text' 
```

# php - 如何用另一个替换数组值中的单词

> ID：14706264
> 
> 赞同：0
> 
> 时间：2013-02-05T11:17:33.903
> 
> 标签：php, arrays

```
 <?php
$array1 = array(
                1 => "Lorem ipsum w1 lorem ipsum",
                2 => "Lorem ipsum w1 lorem ipsum",
                3 => "Lorem ipsum w1 lorem w1 ipsum",
                4 => "Lorem ipsum w1 lorem ipsum",
                5 => "Lorem ipsum w1 lorem ipsum",
                );
?> 
```

如何用另一个单词“w2”替换单词“w1”，然后生成一个新数组，如

```
 <?php
    $array1 = array(
                1 => "Lorem ipsum w2 lorem ipsum",
                2 => "Lorem ipsum w2 lorem ipsum",
                3 => "Lorem ipsum w2 lorem w2 ipsum",
                4 => "Lorem ipsum w2 lorem ipsum",
                5 => "Lorem ipsum w2 lorem ipsum",
                );
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:20:08.853

```
$res = array();
foeach($array1 as $key=>$val){
  $res[$key]   = str_replace("W1","W2",$val);
}

print_r($res); 
```

有关 str_replace 的详细信息，请参阅[this](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T11:20:21.583

您可以使用其中一个[`str_replace`](http://php.net/manual/en/function.str-replace.php)或[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)取决于您需要多少功能来执行此操作。

这两个函数都接受一个数组作为`$subject`参数，所以它可以很简单

```
$array1 = array(...); // strings with "w1"
$array1 = str_replace('w1', 'w2', $array1); 
```

# php - 提交后依赖选择消失

> ID：14706266
> 
> 赞同：-2
> 
> 时间：2013-02-05T11:17:36.877
> 
> 标签：php, jquery, forms, web-applications

我有一个显示列表的搜索表单。

In the form there is a dependant select for the cities (when a country is selected the select for the cities is shown).

问题：当我提交表单时，页面会刷新，因此城市的选择消失了。在推送提交后我应该怎么做才能保持该选择？我应该使用ajax 提交表单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:21:47.407

您需要检查选择框的`post`or值并设置该特定值：`get``SELECTED`

```
<?php @$selected[$_GET['test']] = 'SELECTED'; ?>
<form>
  <select name="test">
    <option value="a" <?=@$selected['a']?>>1</option>
    <option value="b" <?=@$selected['b']?>>2</option>
    <option value="c" <?=@$selected['c']?>>3</option>
    <option value="d" <?=@$selected['d']?>>4</option>
  </select>
  <input type="submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:22:22.347

做一个检查`if($_POST["county"]!=""){"load your cities drop down. and city drop down will be filtered by county drop down."}`。认为它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:29:13.053

选择 1 -> 国家

选择 2 -> 国家/地区的城市。我假设选项是使用 AJAX 加载的

`$_POST`您可以使用和 using从 Select 1 中选择选项，`selected="selected"`即使 Select 2 值存在于 中，也无法选择它们`$_POST`。

您将不得不为此使用 AJAX 表单提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T12:25:26.540

首先，您需要保存列表中的值，假设它是`$_POST['city']`. 然后，如果您在同一页面上并重新生成相同的城市列表，假设代码类似于：

```
foreach ($cities as $city)
{
    echo "<option value='{$city}'>{$city}</option>";
} 
```

将其更改为：

```
foreach ($cities as $city)
{
    echo "<option value='{$city}'";
    if ($city == $_POST['city']) { echo ' selected="yes"'; }
    echo ">{$city}</option>";
} 
```

如果我们不是在谈论同一个页面，那么一旦你得到`$_POST['city']`，将它保存到一个会话变量中，例如`$_SESSION['city']`，然后像上面一样使用。这也可以扩展到国家等。

# ios - 滚动时的iOS / CALayerInvalidGeometry Trace

> ID：14706267
> 
> 赞同：0
> 
> 时间：2013-02-05T11:17:37.897
> 
> 标签：ios, uiscrollview, scroll, calayer

当在滚动的某个点触发动作时，我随机发生以下错误，但经常发生以下错误：

```
CALayerInvalidGeometry Trace: <redacted> <redacted> <redacted> <redacted> <redacted> <redacted> <redacted> -[Show scrollViewWillEndDragging:withVeloci... 
```

而且，更准确地说：

```
Incident Identifier: 4FE03135-D442-4CEA-B230-8322647262EE
CrashReporter Key:   6f005b28e796b18f3ab2687bb364b2be1eb137cd
Hardware Model:      iPhone5,2
Process:         etapes [2916]
Path:            /var/mobile/Applications/BF2F1016-8C00-40A3-BB75-0933F53741F0/******.app/****
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000064
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   UIKit                             0x33df7b06 -[UIView(CALayerDelegate) actionForLayer:forKey:] + 138
1   QuartzCore                        0x33ba7786 -[CALayer actionForKey:] + 70
2   QuartzCore                        0x33ba7732 _ZL12actionForKeyP7CALayerPN2CA11TransactionEP8NSString + 54
3   QuartzCore                        0x33ba7626 CA::Layer::begin_change(CA::Transaction*, unsigned int, objc_object*&) + 126
4   QuartzCore                        0x33ba2322 CA::Layer::setter(unsigned int, _CAValueType, void const*) + 178
5   QuartzCore                        0x33bce782 -[CALayer setBackgroundColor:] + 30
6   UIKit                             0x33e0ef50 -[UIView(Internal) _setBackgroundCGColor:withSystemColorName:] + 1016
7   etapes                            0x000fc8d2 0xdd000 + 129234
8   etapes                            0x000f8c6a 0xdd000 + 113770
9   CoreFoundation                    0x31fe9ad0 __invoking___ + 64
10  CoreFoundation                    0x31f4128a -[NSInvocation invoke] + 286
11  Foundation                        0x328eaf60 -[NSInvocationOperation main] + 108
12  Foundation                        0x32874a84 -[__NSOperationInternal start] + 836
13  Foundation                        0x328ecfe2 __block_global_6 + 98
14  libdispatch.dylib                 0x3a0f1790 _dispatch_call_block_and_release + 8
15  libdispatch.dylib                 0x3a0f15d8 _dispatch_client_callout + 20
16  libdispatch.dylib                 0x3a0f4e40 _dispatch_main_queue_callback_4CF + 224
17  CoreFoundation                    0x31fba1ac __CFRunLoopRun + 1284
18  CoreFoundation                    0x31f2d238 CFRunLoopRunSpecific + 352
19  CoreFoundation                    0x31f2d0c4 CFRunLoopRunInMode + 100
20  GraphicsServices                  0x35b0b336 GSEventRunModal + 70
21  UIKit                             0x33e492b4 UIApplicationMain + 1116
22  etapes                            0x000df15e 0xdd000 + 8542
23  etapes                            0x000df114 0xdd000 + 8468 
```

我很难理解这个错误，因此要纠正它。感谢任何有经验的 ios 开发人员对此的反馈

# javascript - 奇怪的 JavaScript 行为

> ID：14706280
> 
> 赞同：2
> 
> 时间：2013-02-05T11:18:04.573
> 
> 标签：javascript, jquery, scope, closures

我遇到了一个非常奇怪的 JavaScript 行为。我正在使用 jQuery 1.9 和 farbtastic 颜色选择器：

虽然此代码有效：

```
$('#colorpicker_1').hide();
$('#colorpicker_1').farbtastic('#color_1');
$('#colorbody_1').click(function(){$('#colorpicker_1').slideToggle()});

$('#colorpicker_2').hide();
$('#colorpicker_2').farbtastic('#color_2');
$('#colorbody_2').click(function(){$('#colorpicker_2').slideToggle()});

$('#colorpicker_3').hide();
$('#colorpicker_3').farbtastic('#color_3');
$('#colorbody_3').click(function(){$('#colorpicker_3').slideToggle()});

$('#colorpicker_4').hide();
$('#colorpicker_4').farbtastic('#color_4');
$('#colorbody_4').click(function(){$('#colorpicker_4').slideToggle()}); 
```

这不起作用，我完全不知道为什么它不起作用：

```
var cstatusIDs = new Array();
cstatusIDs.push(1);
cstatusIDs.push(2);
cstatusIDs.push(3);
cstatusIDs.push(4);

for(var z=0; z < cstatusIDs.length; z++)
{
    var cstatus_id = cstatusIDs[z];

    console.log(cstatus_id); // outputs 1,2,3,4

    $('#colorpicker_'+cstatus_id).hide();
    $('#colorpicker_'+cstatus_id).farbtastic('#color_'+cstatus_id);
    $('#colorbody_'+cstatus_id).click(function(){$('#colorpicker_'+cstatus_id).slideToggle()});
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:32:11.297

问题是在单击处理程序范围之外定义的事实`cstatus_id`，并且每次循环运行时其值都会更改。由于在触发单击事件之前不会实际评估单击处理程序，因此当时所有处理程序都使用`cstatus_id`.

要解决此问题，请将处理程序包装在一个闭包中，以便每个实例都有自己的唯一 ID。

```
var cstatusIDs = [1, 2, 3, 4];

for(var z=0; z < cstatusIDs.length; z++)
{
    var cstatus_id = cstatusIDs[z];

    console.log(cstatus_id); // outputs 1,2,3,4

    $('#colorpicker_'+cstatus_id).hide();
    $('#colorpicker_'+cstatus_id).farbtastic('#color_'+cstatus_id);

    (function(id) {
        $('#colorbody_' + id).click( function() {
            $('#colorpicker_' + id).slideToggle()
        });
    })(cstatus_id)
} 
```

# ruby-on-rails - 轮胎 - 查找包含所有单词的记录

> ID：14706283
> 
> 赞同：2
> 
> 时间：2013-02-05T11:18:08.163
> 
> 标签：ruby-on-rails, tire

我对 Rails 轮胎宝石及其搜索有疑问。假设我有一个搜索查询`'alpha street smith'`，并且 ES 中只有一条记录包含这三个单词但在不同的列中。因此，例如 company_name 是`'alpha'`， company_address 是`'street'`， company_director_name 是`'smith'`。
Tire 会找到此记录，但它也会返回包含查询中任一单词的记录。例如，如果 company_name 是`'alpha'`但没有其他术语匹配，它仍然会被返回。那么我怎样才能实现只返回包含所有搜索词的记录呢？

# mysql - MySQL 查询发起

> ID：14706291
> 
> 赞同：0
> 
> 时间：2013-02-05T11:18:41.730
> 
> 标签：mysql, reporting

有谁知道是否有办法找出查询是从哪里执行的？

我有一个不断失败的查询，并且查明它的努力失败了。

我已经设置了查询日志和一切，只是找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:19:22.433

我想通了...我找到了查询并将其作为输出放置，以便在它失败时获得更多信息...我实际上会将其应用于我的所有查询。

```
function QueryResult($sql, $PVal) {
    if($sql != NULL) {
        $rs = mysql_query($sql) or die($sql. 'in '.__FILE__.' '.mysql_error());
        return $rs;
    } //end if
    else {
        return '<b>MySQL Error</b>: Empty Query!';
    } //end else
} 
```

# json - 如何在 Grails 中为 JSON 转换器设置日期格式

> ID：14706293
> 
> 赞同：8
> 
> 时间：2013-02-05T11:19:02.133
> 
> 标签：json, date, grails, converter

我的 Grails 控制器中有一个方法应该返回一个 JSON，JSON 的一个属性是一个 Date 对象，但是当我这样做时：

```
render myObject as JSON 
```

输出是这样的：

```
{
    "dateProperty": "2010-12-31T23:00:00Z",
    "otherProperty" : "aValue..."
} 
```

有没有办法更改转换器使用的默认日期格式？

我尝试在**Config.groovy**`grails.converters.json.date`中设置属性，但这不起作用。 我做错了什么还是有其他方法可以做到这一点？ `grails.date.formats`

 **谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T14:25:57.817

我通常使用自定义 Marshaller。假设您有以下域

```
class Address { 
  String addressOne
  String city
  //bla bla
  Date dateCreated
} 
```

像这样在 src/groovy 下创建一个类

```
class AddressMarshaller {
  void register() {
     JSON.registerObjectMarshaller(Address) { Address address ->
      return [ 
         id: address.id,
         addressOne: address.addressOne,
         city: address.city,
         dateCreated: address.dateCreated.format('yyyy-MM-dd')
      ]
  }
} 
```

然后在您的引导文件中执行以下操作：

```
[ new AddressMarshaller() ].each { it.register() } 
```

我这样做的原因是因为我有多个编组器。

现在，无论何时`address as JSON`，您都会得到您所描述的 JSON，并且您的日期格式是正确的。我知道这对于在 JSON 中格式化日期似乎有点矫枉过正，但这还有很多其他好处。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T00:38:55.707

如果您想要所有 Date 类型的默认 JSON 编组器，您还可以使用一些非常简单的东西，如[这个 SO answer](https://stackoverflow.com/a/694845/1024571)中所示。@Gregg 的答案对于单个域类要灵活得多。**

# java - 动态生成一个jsf表单问题

> ID：14706298
> 
> 赞同：1
> 
> 时间：2013-02-05T11:19:11.340
> 
> 标签：java, jsf, data-binding, primefaces, richfaces

我正在尝试使用 jsf 和生成表单元素的后 bean 动态呈现表单。

这是后台bean的代码：

```
@ManagedBean(name = "reviewReportBean")
@SessionScoped
public class ReviewReportBean implements Serializable {
... ... ...
private HtmlPanelGrid dynamicPanelGrid;
... ... ...
public HtmlPanelGrid dynamicPanelGrid() {
Application application = FacesContext.getCurrentInstance().getApplication();
List childrenList = dynamicPanelGrid.getChildren();
childrenList.clear();
... ... ...
Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction tx = null;
    try 
    {
    ... ... ...     
    HtmlOutputLabel label = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);
    label.setValue("Mpla Mpla Mpla");
    ... ... ...         
    childrenList.add(label);
    ... ... ...     
    String hq9 = "select ... WHERE it (:itid)";
    SQLQuery query9 = session.createSQLQuery(hq9);
    query9.setParameter("itid",imageTypeId);
    query9.addEntity(ReportFormFields.class);
    reportFormFields = query9.list();
    for(int i=0; i<reportFormFields.size(); i++){
        System.out.println("-------------------------");
        System.out.println(">> Field Id: " + reportFormFields.get(i).getRffFieldId());
        System.out.println(">> Field Name: " + reportFormFields.get(i).getRffFieldName());
        ... ... ...

        HtmlOutputLabel output = (HtmlOutputLabel)application.createComponent(HtmlOutputLabel.COMPONENT_TYPE);
        output.setValue(reportFormFields.get(i).getRffFieldLabel());
        childrenList.add(output);
        if(reportFormFields.get(i).getRffFieldType().equals("Option List")){
            HtmlSelectOneMenu combomenu = (HtmlSelectOneMenu)application.createComponent(HtmlSelectOneMenu.COMPONENT_TYPE);
            UISelectItems comboItems = new UISelectItems();
            String listOptions =reportFormFields.get(i).getRffFieldOptions();
            String array[] = listOptions.split("(?<!\\\\),");

            for(int j = 0;j<array.length;j++){
                System.out.println(">>> list option " + j + " is " + array[j]);
            }
            comboItems.setValue(array);
            combomenu.getChildren().add(comboItems);
            childrenList.add(combomenu);

            }else{
                HtmlInputText input = (HtmlInputText)application.createComponent(HtmlInputText.COMPONENT_TYPE);
                childrenList.add(input);
            }
            ... ... ...
        }
        ... ... ...
    }
    ... ... ...
    return dynamicPanelGrid;
    }
} 
```

这就是我尝试使用后台 bean 代码在我的视图（xhtml）中动态生成表单的方式：

```
<h:panelGrid id="dynaPanelGrid7" 
binding="#{reviewReportBean.dynamicPanelGrid}" >
</h:panelGrid> 
```

但表格根本没有生成。但是，如果我这样称呼它（直接调用该方法以生成表单）：

```
<h:panelGrid id="dynaPanelGrid7" 
binding="#{reviewReportBean.dynamicPanelGrid()}" >
</h:panelGrid> 
```

我收到以下错误：

```
can't parse argument number reviewReportBean.dynamicPanelGrid(): /views/view.xhtml @199,63 binding="#{reviewReportBean.dynamicPanelGrid()}": Illegal Syntax for Set Operation 
```

但如果随后我尝试这样称呼它：

```
<h:panelGrid id="dynaPanelGrid7" 
binding="#{reviewReportBean.dynamicPanelGrid}" >
</h:panelGrid> 
```

表格被渲染！！

所以我猜对象 dynamicPanelGrid 已填充...

关于如何更改我的代码以使表单正常工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:25:32.517

`dynamicPanelGrid`是您的字段（属性）的名称。Getter 和 setter 应该如下所示：

```
@PostConstruct
public void init() {
    // init your dynamicPanelGrid
}

public HtmlPanelGrid getDynamicPanelGrid() {
    return dynamicPanelGrid;
}

public void setDynamicPanelGrid(HtmlPanelGrid dynamicPanelGrid) {
    this.dynamicPanelGrid = dynamicPanelGrid;
} 
```

阅读有关[Java Bean](http://docs.oracle.com/javase/tutorial/javabeans/index.html)的信息。

比你的绑定属性应该是这样的：

```
binding="#{reviewReportBean.dynamicPanelGrid}" 
```

# java - 如何在 Play 2.0.4 中每天安排任务 + onStart()？

> ID：14706300
> 
> 赞同：16
> 
> 时间：2013-02-05T11:19:24.093
> 
> 标签：java, playframework-2.0, akka, scheduler

当我尝试使用该类扩展 GlobalSettings 时，我需要每天在 playframework2.0.4 中执行一段代码。但它适用于每个请求的实例。我希望它在服务器启动并每天执行 1 次时工作。

```
package controllers;
import java.util.concurrent.TimeUnit;
import akka.util.Duration;
import play.Application;
import play.GlobalSettings;
import play.libs.Akka;

public class ParserJobApp extends GlobalSettings{
@Override
public void onStart(Application app) {
    Akka.system().scheduler().schedule(Duration.create(0, TimeUnit.MILLISECONDS),Duration.create(6, TimeUnit.SECONDS), new Runnable() { 
        @Override
        public void run() {
            System.out.println("AAA ---    "+System.currentTimeMillis());
        }
    });
}
} 
```

这是我的控制器，开始上面的课程

```
public class Application extends Controller {

public static Result index() { 
  ParserJobApp pr=new ParserJobApp();
  pr.onStart(null);
  System.out.println("sfsdfsdf");
return ok(index.render("Your new "));

}
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-05T11:44:10.153

调度程序任务只能放在 Global 类中。创建两个任务，首先安排一次`initialDelay`= 0 毫秒。

对于第二个任务，您需要使用常见的日期/时间类计算当前 DateTime 和下一次计划发生（即明天 8:00 点）之间的秒数，然后将此差异设置为`initialDelay`并设置`frequency`为 24 小时。

结果，它将在应用程序启动时启动，并将安排任务在每天所需的时间执行。

**编辑**

有完整的示例，（保存/编辑类：）`/app/Global.java`：

```
import akka.util.Duration;
import org.joda.time.DateTime;
import org.joda.time.Seconds;
import play.Application;
import play.GlobalSettings;
import play.Logger;
import play.libs.Akka;
import java.util.concurrent.TimeUnit;

public class Global extends GlobalSettings {

    @Override
    public void onStart(Application application) {

        Akka.system().scheduler().scheduleOnce(
                Duration.create(0, TimeUnit.MILLISECONDS),
                new Runnable() {
                    @Override
                    public void run() {
                        Logger.info("ON START ---    " + System.currentTimeMillis());
                    }
                }
        );

        Akka.system().scheduler().schedule(
                Duration.create(nextExecutionInSeconds(8, 0), TimeUnit.SECONDS),
                Duration.create(24, TimeUnit.HOURS),
                new Runnable() {
                    @Override
                    public void run() {
                        Logger.info("EVERY DAY AT 8:00 ---    " + System.currentTimeMillis());
                    }
                }
        );
    }

    public static int nextExecutionInSeconds(int hour, int minute){
        return Seconds.secondsBetween(
                new DateTime(),
                nextExecution(hour, minute)
        ).getSeconds();
    }

    public static DateTime nextExecution(int hour, int minute){
        DateTime next = new DateTime()
                .withHourOfDay(hour)
                .withMinuteOfHour(minute)
                .withSecondOfMinute(0)
                .withMillisOfSecond(0);

        return (next.isBeforeNow())
                ? next.plusHours(24)
                : next;
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-06-18T15:14:04.687

这是我的解决方案，它更轻巧并且支持用于调度的 cron 表达式。在此示例中，调度程序将在每天上午 10:00 运行。

在您的全球课程中关注：

```
private Cancellable scheduler;

@Override
public void onStart(Application application) {
    super.onStart(application); 
    schedule(); 
}

@Override
public void onStop(Application application) {
    //Stop the scheduler
    if (scheduler != null) {
        scheduler.cancel();
    }
}

private void schedule() {
    try {
        CronExpression e = new CronExpression("0 00 10 ? * *");
        Date nextValidTimeAfter = e.getNextValidTimeAfter(new Date());
        FiniteDuration d = Duration.create(
            nextValidTimeAfter.getTime() - System.currentTimeMillis(), 
            TimeUnit.MILLISECONDS);

        Logger.debug("Scheduling to run at "+nextValidTimeAfter);

        scheduler = Akka.system().scheduler().scheduleOnce(d, new Runnable() {

        @Override
        public void run() {
            Logger.debug("Ruuning scheduler");
            //Do your tasks here

            schedule(); //Schedule for next time

        }
        }, Akka.system().dispatcher());
    } catch (Exception e) {
        Logger.error("", e);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-09T11:08:52.750

这可以使用全局类来完成，并通过 onstart 方法完成。[https://www.playframework.com/documentation/2.5.x/JavaGlobal](https://www.playframework.com/documentation/2.5.x/JavaGlobal)

下面的代码以 10 分钟间隔打印 JVM 统计信息。可以配置持续时间以满足需要。

下面给出了编码的抽象视图。希望这有帮助

```
public class Global extends GlobalSettings {

private Cancellable scheduler;

@Override
public void onStart(Application application) {
    int timeDelayFromAppStartToLogFirstLogInMs = 0;
    int timeGapBetweenMemoryLogsInMinutes = 10;
    scheduler = Akka.system().scheduler().schedule(Duration.create(timeDelayFromAppStartToLogFirstLogInMs, TimeUnit.MILLISECONDS),
            Duration.create(timeGapBetweenMemoryLogsInMinutes, TimeUnit.MINUTES),
            new Runnable() {
                @Override
                public void run() {
                    System.out.println("Cron Job");
                    // Call a function (to print JVM stats)
                }
            },
            Akka.system().dispatcher());
    super.onStart(application);
}

@Override
public void onStop(Application app) {
    scheduler.cancel();
    super.onStop(app);
}

} 
```

# html - 输入和提交的宽度

> ID：14706307
> 
> 赞同：0
> 
> 时间：2013-02-05T11:19:48.987
> 
> 标签：html, forms, input, submit

我有一个表单，我希望提交的宽度与其他输入的宽度相同。但提交似乎更小。我在这里简化了案例。我使用 Firebug 或 Chrome 检查器，它说未提交的输入多出 4 个像素。谁能解释一下为什么，那个 4px 是从哪里来的？

我在这里简化了示例：http: [//jsfiddle.net/Mq5bq/](http://jsfiddle.net/Mq5bq/)

HTML：

```
<form id="form" action="admin_comprovar.php" method="post"><br />
  <input type="text" name="nom" value="name"/><br />
  <input type="text" name="mail" value="mail"/><br />    
  <input type="submit" value="submit">
</form> 
```

CSS：

```
input { width:180px; padding: 0; }
input[type="submit"] { width:180px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:25:03.900

这是因为`<input type="text">`元素有一个增加宽度的边框。
但是提交按钮没有边框。看看[这个](http://jsfiddle.net/Mq5bq/2/)。
上面的示例删除了边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:27:27.940

另一种方法是将边框和填充数*计入*宽度/高度：

```
input {
    width:180px;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
} 
```

[小提琴演示](http://jsfiddle.net/Mq5bq/3/)

# php - 基于域重写基本 url

> ID：14706311
> 
> 赞同：2
> 
> 时间：2013-02-05T11:19:56.010
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, yii

我正在用 Yii 做一个网站，它由不同的模块组成，应该从不同的顶级域访问。因此，我需要每个基础都依赖于模块。此外，还应检查国家代码并将其作为获取参数发送。像[这样](https://stackoverflow.com/questions/1187117/how-to-rewrite-url-based-on-domain-in-apache-and-add-extra-parameter)的东西：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^([^.]+)\.micrositedomain\.com$
RewriteRule ^(.*)$   http://bigsite.com/microsite/$1?lang=en [QSA]
RewriteCond %{HTTP_HOST} ^([^.]+)\.micrositedomain\.es$
RewriteRule ^(.*)$   http://bigsite.com/microsite/$1?lang=es [QSA]

RewriteCond %{HTTP_HOST} ^([^.]+)\.micrositedomain2\.com$
RewriteRule ^(.*)$   http://bigsite.com/microsite2/$1?lang=en [QSA]
RewriteCond %{HTTP_HOST} ^([^.]+)\.micrositedomain2\.es$
RewriteRule ^(.*)$   http://bigsite.com/microsite2/$1?lang=es [QSA] 
```

但是，我不太确定在哪里处理这个问题。它显然应该在根目录中的 .htaccess 中，但我不知道如何将它与已经存在的 .htaccess 混合：

```
RewriteEngine on
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

另外，我很确定我的托管管理员应该将每个域（www.micrositedomain.com、www.micrositedomain2.com ...）指向 bigsite.com 根目录，而不是每个模块，但我不能保证。

我应该按照哪个步骤来完成？

# tl;博士

对于那些赶时间的人，我想：

*   **将来自不同域/国家代码的 url 重写为单个域，并传递这些参数。**
*   **告诉我的主机管理员域名应该指向哪里。**

在我的情况下你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:34:44.003

我不确定如何在 .htaccess 中制作，但你可以在 yii 配置中制作。尝试这样的事情

```
'urlManager'=>array(
    'urlFormat'=>'path',
    'showScriptName'=>false,
    'rules'=>array(
        'http://<module:\w+>\.<domain:(micrositedomain|microdomain2)>\.<zone:(com|es)>/<controller>/<action>'=>'<module>/<controller>/<action>', 
```

之后，您应该将一些 MyController.php 放在 components 文件夹中

```
class MYController extends CController
{
    public $domain='micrositedomain';
    public $language='en';

    public function init() {
        if(isset($_GET['zone']))
        {
            $this->language=($_GET['zone']=='com')?'en':$_GET['zone'];
        }
        if(isset($_GET['domain']))
        {
            $this->domain=$_GET['domain'];
        }
    }
} 
```

你所有的控制器都应该扩展它。

您的所有域都应指向您的应用程序的目录

# javascript - javascript正则表达式从字符串中删除子字符串

> ID：14706313
> 
> 赞同：2
> 
> 时间：2013-02-05T11:20:00.357
> 
> 标签：javascript, regex, replace

我有以下网址

```
example.com/p/deals&post_id=3 
```

其中 post id 是一个获取变量。我想清理 url 字符串，返回的结果应该是

```
example.com/p/deals 
```

我一直在尝试使用 JavaScript `.replace`，但由于 url 末尾的 get 变量，似乎不起作用。我将如何构建一个正则表达式来排除这个子字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:23:40.333

为此不需要正则表达式。只需[拆分字符串](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)并从数组中取出第一个字符串：

```
var str = "example.com/p/deals&post_id=3";
var san = str.split("&")[0]; 
```

这是[一个工作小提琴](http://jsfiddle.net/JamesHill/ks4gH/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:41:39.733

要匹配包含第一个 & 之后的所有字符，您将使用该模式

> \&(.*)

并简单地替换为空字符串。

JS将是

```
var urlString = "example.com/p/deals&post_id=3";
var searchP = "\&(.*)" ;
var replaceP = "" ;
var rEx = new RegExp( searchP, urlString ) ;
var replacedText = sourceText.replace( rEx, replaceP ) ; 
```

# discovery - stm32f0 uart编程

> ID：14706314
> 
> 赞同：2
> 
> 时间：2013-02-05T11:20:06.120
> 
> 标签：discovery, stm32, uart, usart

我试图让usart在我的stm32f0-discovery上工作，但现在我发现关于这种“缺乏”的文档有没有人有任何usart为stm32f050工作的例子？

谢谢。

巴特·特尼森

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T10:17:29.613

经过两天在互联网上搜索后，好的。我找到了这段小代码，并设法让它工作：

```
 USART_InitTypeDef USART_InitStructure;
  GPIO_InitTypeDef GPIO_InitStructure;

  RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOA, ENABLE);

  RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2,ENABLE);

  GPIO_PinAFConfig(GPIOA, GPIO_PinSource2, GPIO_AF_1);
  GPIO_PinAFConfig(GPIOA, GPIO_PinSource3, GPIO_AF_1);

  //Configure USART2 pins:  Rx and Tx ----------------------------
  GPIO_InitStructure.GPIO_Pin =  GPIO_Pin_2 | GPIO_Pin_3;
  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
  GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
  GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;
  GPIO_Init(GPIOA, &GPIO_InitStructure);

  USART_InitStructure.USART_BaudRate = 9600;
  USART_InitStructure.USART_WordLength = USART_WordLength_8b;
  USART_InitStructure.USART_StopBits = USART_StopBits_1;
  USART_InitStructure.USART_Parity = USART_Parity_No;
  USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
  USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
  USART_Init(USART2, &USART_InitStructure);

  USART_Cmd(USART2,ENABLE);

  while(1)
  {
   while (USART_GetFlagStatus(USART2, USART_FLAG_TXE) == RESET);

   USART_SendData(USART2, 'X');
  }
} 
```

*注意：此 uart 使用引脚 PA2 和 PA3（RX 和 TX）。

当 uart 的 sendbuffer 的缓冲区为空时，它会发送一个 X。更好的是，这段代码只使用了 stm32f0xx.h 文件。所以它去掉了任何不必要的部分。

希望有人也可以使用它，因为我花了很多精力才找到这个简单的代码。也许有一天我会写一篇关于使用 stm32f0 进行 uart 编程的指南。

*编辑：

我确实写了一篇关于 usart 的教程。它可以在这里找到：

[教程 usart stm32f0](http://bartteunissen.com/blog/stm32f0-usart/) 希望这可以帮助很多人。

# android - 如何在细节 PreferenceFragment 中加载相同的屏幕首选项

> ID：14706319
> 
> 赞同：7
> 
> 时间：2013-02-05T11:20:20.760
> 
> 标签：android, android-fragments, android-preferences, preferenceactivity

我正在尝试为平板电脑做一些类似 android 中的设置首选项的事情。

当我单击“更多”时，“无线和网络”首选项屏幕显示在右侧片段上，而不是触摸“VPN”，在同一片段中打开“VPN”首选项屏幕。

我怎样才能做到这一点 ？

这是我的偏好xml

```
<PreferenceScreen android:title="Title A">
        <PreferenceScreen android:title="TITLE B">
            <PreferenceCategory
                android:title="category">
                <ListPreference android:key="list"
                    android:title="list" android:entries="@array/list_vals"
                    android:entryValues="@array/list_vals1"
                    android:defaultValue="1" android:dialogTitle="list title"
                    android:negativeButtonText="cancel" />
            </PreferenceCategory>
        </PreferenceScreen>
</PreferenceScreen> 
```

问题是我不希望将标题为 B 的嵌套首选项屏幕加载到整个屏幕上我只想加载到正确片段的位置...

注意：到目前为止，我使用此文档创建了我的示例[http://developer.android.com/guide/topics/ui/settings.html#PreferenceHeaders](http://developer.android.com/guide/topics/ui/settings.html#PreferenceHeaders)

![在此处输入图像描述](../Images/f016eda7d63ab1cacaf666d2cbdf8ad5.png)

![在此处输入图像描述](../Images/b18b76f6e6e4ca1810e61d9c41f2ac8e.png)

**编辑***

这是我的活动

```
public class SettingsActivity extends PreferenceActivity {
    @Override
    public void onBuildHeaders(List<Header> target) {
        loadHeadersFromResource(R.xml.preference_headers, target);
    }
} 
```

我没有布局，所以我怎么知道我的主片段 ID 是什么，我的详细片段 ID 是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T13:00:02.277

简短的示例，定义一个`PreferenceActivity`，并为主要类别提供一个头文件：

*类`SettingsActivity`：*

```
public class SettingsActivity extends PreferenceActivity {
    @Override
    public void onBuildHeaders(List<Header> target) {
        super.onBuildHeaders(target);
        loadHeadersFromResource(R.xml.headers,target);
    }
} 
```

*文件`/res/xml/headers.xml`：*

```
<?xml version="1.0" encoding="utf-8"?>

<preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
    <header android:title="Preference Header"
        android:fragment="com.example.SettingsDemo.PrefFragment"/>
</preference-headers> 
```

`PreferenceFragment`如上所述创建一个`android:fragment`，提供它自己的首选项文件：

*类`PrefFragment`：*

```
public class PrefFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }
} 
```

*文件`/res/xml/prefs.xml`：*

```
<?xml version="1.0" encoding="utf-8"?>

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
 <PreferenceCategory android:title="Preferences">
 <SwitchPreference android:title="Preference" />
    <PreferenceScreen android:title="Sub Preferences"
        android:fragment="com.example.SettingsDemo.SubPrefFragment"/>
 </PreferenceCategory>
</PreferenceScreen> 
```

`PreferenceFragment`如上所述创建一个孩子`android:fragment`，也提供它自己的首选项文件：

类`SubPrefFragment`：

```
public class SubPrefFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.sub_prefs);
    }
} 
```

文件`/res/xml/sub_prefs.xml`：

```
<?xml version="1.0" encoding="utf-8"?>

<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory android:title="Sub Preferences">
        <CheckBoxPreference android:title="Sub Preference"/>
    </PreferenceCategory>
</PreferenceScreen> 
```

就是这样。将`PreferenceActivity`自动显示所有子片段。

结果：

主要`PreferenceFragment`： ![在此处输入图像描述](../Images/3f38aeafc08040068722346fe971a71f.png)

替换为 sub `PreferenceFragment`，在同一标题下： ![在此处输入图像描述](../Images/434f796fddcf308cf4f6e57873858bd4.png)

# c# - 如果文件仍处于打开状态，则在 page_unload 事件中关闭文件

> ID：14706323
> 
> 赞同：0
> 
> 时间：2013-02-05T11:20:24.560
> 
> 标签：c#, asp.net

我有一个网站的问题。工作是创建制表符分隔的文本文件并通过网络服务上传。

我正在使用“使用”关键字创建文本文件。

```
 using (StreamWriter sw = new StreamWriter(path))
        {
            sw.Write(sb.ToString());
            sw.Close();
        } 
```

到这里为止，万一出错也很好。但我提交如下

```
 request.FeedContent = File.Open(HttpContext.Current.Server.MapPath("~/filename.txt"), FileMode.Open, FileAccess.Read); 
```

feedcontent 接受一个流。现在有时在这种情况下会出现错误（服务器错误等），应用程序开始给出错误：-进程无法访问文件'\\user\htdocs\filename.txt'，因为它正在被另一个进程使用。当我们想要重复这个过程时。

问题被放大了，因为文件没有在同一天关闭，并且只能在第二天重新提交。

我以后如何在 page_unload 事件中或通过其他方式释放资源？

# ios - 在 ios 中从 box cloud (box.com) 访问用户数据

> ID：14706324
> 
> 赞同：1
> 
> 时间：2013-02-05T11:20:25.997
> 
> 标签：ios, cloud, box-api

我正在尝试从盒子用户帐户中获取数据。现在我已经生成了令牌，但我无法获取根文件夹内容（例如）。

要获得令牌，我会通过以下请求获得票证：

```
https://www.box.com/api/1.0/rest?action=get_ticket&api_key=BoxApiKey 
```

之后，我在我的应用程序中调用 webView 来加载此页面：

```
https://m.box.com/api/1.0/auth/ticket 
```

用户登录成功后，我解析网页并提取令牌。

现在出现问题，我无法获取根文件夹内容。这就是我尝试使用 AFNetworking 的方法：

1.  我在 AFHTTPClient 类中添加了这个方法（如[她](https://stackoverflow.com/questions/12091341/oauth-2-bearer-authorization-header)所建议的那样）

    ```
    -(void)setAuthorizationHeaderWithTokenBearer:(NSString *)token
    {
       [self setDefaultHeader:@"Authorization" value:[NSString stringWithFormat:@"Bearer %@", token]];
    } 
    ```

2.  我的电话：

    ```
    NSURL *url = [NSURL URLWithString:@"https://www.box.com/api/2.0/folders/0"];
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
    [httpClient setAuthorizationHeaderWithTokenBearer:token];

    [httpClient postPath:@"" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSString *responseStr = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
        NSLog(@"Request Successful, response '%@'", responseStr);
    } failure:^(AFHTTPRequestOperation *operation, NSError *e) {
        NSLog(@"[HTTPClient Error]: %@", e.localizedDescription);
    }]; 
    ```

但我有这个本地化描述：

```
[HTTPClient Error]: Expected status code in (200-299), got 401 
```

你能帮我解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:50:25.993

您看到了一个问题，因为您使用的标头样式是 OAuth 2，而您拥有的令牌是 V1 Auth。

如果您使用此标头

```
Authorization: Bearer {ACCESS_TOKEN} 
```

您需要通过`[OAuth 2 process][1]`

但是，如果您使用此标头

```
Authorization BoxAuth api_key={api key}&auth_token={v1 auth token} 
```

您需要通过 V1 身份验证流程获取令牌，这是您概述的流程。

作为旁注，您应该尝试使用 OAuth 2 流程，因为 V1 流程将在今年晚些时候被弃用。

# android - 在模拟器上请求应用程序下载时出现 ActivityNotFound 异常

> ID：14706325
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:20:30.883
> 
> 标签：android, android-emulator

我尝试使用意图下载apk文件

```
 Intent intent = new Intent(Intent.ACTION_VIEW);           
 intent.setDataAndType(uri,"application/vnd.android.package-archive");
 intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);     
 startActivity(intent); 
```

我有一个例外

```
 02-05 16:48:35.207: E/AndroidRuntime(2719): FATAL EXCEPTION: main
02-05 16:48:35.207: E/AndroidRuntime(2719): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://192.168.102.157:8080/ApkDownload/Download typ=application/vnd.android.package-archive }
02-05 16:48:35.207: E/AndroidRuntime(2719):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
02-05 16:48:35.207: E/AndroidRuntime(2719):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:29:24.600

系统安装程序只能打开本地文件系统上的 APK 文件。您可以自己下载 APK 然后安装它，或者您可以使用相同的意图而不使用 mime 类型使用默认浏览器下载它（然后用户必须单击下载的文件来安装它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:43:51.743

好的，您收到**ActivityNotFoundException**的异常是因为您的 android 模拟器上没有安装 Google Play。

在任何实际设备上测试它应该没有任何问题。

有关**Google Play On Emulator**的更多信息，请访问此链接[Google Play On Emulator](https://stackoverflow.com/questions/11154222/google-play-on-android-4-0-emulator)

# sql-server - 如何从未更改的数据表更新数据库

> ID：14706329
> 
> 赞同：0
> 
> 时间：2013-02-05T11:20:39.027
> 
> 标签：sql-server, vb.net

我想从我的本地数据库更新我的服务器数据库

```
Dim mycon As New SqlConnection(myserverConString)
Dim myAdapter As New SqlDataAdapter("SELECT * FROM MYTABLE", mycon)
Dim mybuilder As New SqlCommandBuilder(myAdapter)
myAdapter.UpdateCommand = mybuilder.GetUpdateCommand(True)
dim dt as datatable 
'code to fill dt from my local db
'using select statement
For Each DR As DataRow In dt.Rows
   DR.SetModified()
Next
dt.AcceptChanges()
myAdapter.Update(dt) 
```

问题是使用的数据表实际上不包含任何更改，并且命令生成器更新命令使用错误的“位置”我发现使用的更新命令是

```
UPDATE [MYTABLE] SET [COLUMN0] = @COLUMN0, [COLUMN1]=@COLUMN1 WHERE 
([COLUMN0]=@Original_COLUMN0) AND ([COLUMN1]=@Original_COLUMN1)) 
```

COLUM0 是主键

COLUMN1 是本地数据库中的更新值，

我想在相同模式的服务器数据库中更新它。

COLUMN1 不能在“WHERE 子句”中使用，因为它是更改后的值

并且 dt 没有原始值。

我的代码没有给出任何错误，

但它也没有更新任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:28:10.187

如果您从本地数据库更新，为什么要检查子句`COLUMN1`中的值？`WHERE`只需将所有行更新为本地`COLUMN1`值。

只需使用

```
UPDATE [MYTABLE] 
SET [COLUMN1] = @COLUMN1 
WHERE [COLUMN0] = @Original_COLUMN0 
```

**编辑：**您最好在行中添加时间戳，以使 SqlCommandBuilder 更容易检测更改。

来自[The SQLCommandBuilder is way Better than its Reputation](http://petermeinl.wordpress.com/2011/03/13/the-sqlcommandbuilder-is-way-better-than-its-reputation/)

> SQLCommandBuilder 支持不同的 ConflictOptions 来检测乐观更新冲突：
> 
> OverwriteChanges（= 无控制） CompareAllSearchableValues（比较所有可搜索列的值） CompareRowVersion（比较列与数据类型 RowVersion (~Timestamp) 的值我更喜欢使用 CompareRowVersion。请参阅 DB Concurrency Control with .NET-Details。

还可以阅读[DB Concurrency Control with .NET –](http://petermeinl.wordpress.com/2011/03/14/db-concurrency-control-patterns-for-applications/)了解如何执行此操作的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:34:13.060

我找到了答案，只是在update语句前加了一行代码

```
dt=dt.getchanges()
myAdapter.update(dt) 
```

# r - 生成日期序列

> ID：14706330
> 
> 赞同：5
> 
> 时间：2013-02-05T11:20:38.610
> 
> 标签：r

我想用下一个代码生成日期序列：

```
vm1=strptime("2000-01-01 00:00:00", format="%Y-%m-%d %H:%M:%S")
vm2=strptime("2011-12-31 23:55:00", format="%Y-%m-%d %H:%M:%S")
vm3=seq(vm1, vm2, by = min(300)) 
```

问题是在某些特定日期程序会更改时区并省略部分生成的数据。例如：

```
vm3[24500:24510] 
```

我将不胜感激任何帮助或指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T11:28:12.863

这部分`vm3`对我来说看起来不错（英国语言环境，`GMT/BST`时区）。考虑强制您的日期使用通用时间，然后稍后更正到您的本地时区。

```
vm1=strptime("2000-01-01 00:00:00", format="%Y-%m-%d %H:%M:%S", tz = "UTC")
vm2=strptime("2011-12-31 23:55:00", format="%Y-%m-%d %H:%M:%S", tz = "UTC")
vm3=seq(vm1, vm2, by = "300 mins")
any(is.na(vm3)) #FALSE 
```

顺便说一句，你想要一个`by`论点`"300 mins"`，而不是`min(300)`。 `min`是最小函数；它与分钟无关。

# php - 从php中的二维数组中删除值

> ID：14706331
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:20:39.460
> 
> 标签：php

我有以下二维数组：

```
 Array ( [0] =>
             Array ( [0] => 20130202 
                     [1] => unknown 
                     [2] => 0 
                     [3] => 1 
                     [4] => 0 
                     [5] => 0 
                     [6] => 0 
                     [7] => 19022 
                     [8] => 0 
                     [9] => 0 ) 
          [1] => 
              Array ([0] => 20130202 
                     [1] => ZZ 
                     [2] => 1 
                     [3] => 0 
                     [4] => 0 
                     [5] => 0 
                     [6] => 0 
                     [7] => 4 
                     [8] => 0 
                     [9] => 0 ) 
                  *
                  * 
```

我尝试删除内部数组上的特定以下条目：2、4、6、7、8、9。我正在使用的代码如下：

```
 foreach ($array_with_values as $key => $obj) {
        if ($key == 2 || $key == 4 || $key == 6 || $key == 7 || $key == 8 || $key == 9){
            unset($obj[$key]);
        }
      } 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:28:22.617

你需要做的是...`unset($array_with_values[$key])`

考虑以下代码块...

```
$arr = array(1,2,3,4,6);

foreach($arr as $key => $a)
{
    if($a == 2)
    unset($a);
}

print_r($arr);

foreach($arr as $key => $a)
{
    if($a == 2)
    unset($arr[$key]);
}

print_r($arr); 
```

我希望你明白我想解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:26:30.793

您可以过滤您想要的内容，而不是关注您想要删除的内容：

```
$keys = array_flip([0, 1, 3, 5]);

foreach ($outer as &$inner) {
    $inner = array_intersect_key($inner, $keys);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:27:38.233

尝试这个：

```
foreach ($array_with_values as $key => $obj) {
        if ($key == 2 || $key == 4 || $key == 6 || $key == 7 || $key == 8 || $key == 9){
            unset($array_with_values[$key]);
        }
      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:30:36.960

我会这样做：

```
$unwanted = array(2, 4, 6, 7, 8, 9);

for ($i = 0; $i < sizeof($outerArray); $i++) {
    for ($j = 0; $j < sizeof($unwanted); $j++) {
        unset($outerArray[$i][$unwanted[$j]]);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T11:21:57.913

只用这个`unset($array_with_values[$key]);`

```
 foreach ($array_with_values as $key => $obj) {
    if ($key == 2 || $key == 4 || $key == 6 || $key == 7 || $key == 8 || $key == 9){
        unset($array_with_values[$key]);
    }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T11:23:37.133

```
 foreach ($array_with_values as $key => $obj) {
    if ($key == 2 || $key == 4 || $key == 6 || $key == 7 || $key == 8 || $key == 9){
        unset($obj[$key]);
    }
  } 
```

在这里，您的第一个数组的键将是 0,1，因此请执行以下操作：

```
 $delete = array (2,4,6,7,8,9);
 foreach ($array_with_values as $key => $obj) {
    foreach($delete as $val){
        unset($obj[$val]);
    }
  } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T11:24:48.833

尝试这个

```
$big_array = array(

 array(20130202 ,'unknown',0,1,0,0,0,19022,0,0),
 array(20130202 ,'ZZ',1,0,0,0,0,4,0,0)
 );

 foreach ($big_array as $ikey => $array) {

       foreach ($array as $key => $val) {

          if (in_array($key, array(2,4,6,7,8,9))) {
             unset($big_array[$ikey][$key]);
          }
       }
    }

print_r($big_array); 
```

# visual-studio-2010 - Visual Studio 2012 不支持项目类型

> ID：14706336
> 
> 赞同：2
> 
> 时间：2013-02-05T11:20:53.847
> 
> 标签：visual-studio-2010, visual-studio-2012, upgrade

我遇到了最初在 VS 2010 中创建的 Web 应用程序项目，然后由我们 3 名开发人员团队中的其他人导入。该解决方案是一个包含多个项目的非常复杂的 MVC4 项目。

当我尝试打开解决方案时，我收到 MVC4 Web 应用程序的项目不支持消息。所有其他项目都是类库，它们加载没有任何问题。

我是三个收到此错误的唯一一个。更奇怪的是，如果我共享我的解决方案文件夹，其他开发人员可以毫无问题地打开我的解决方案。

我已尝试修复 VS 2012 安装，但仍然出现错误。

我可以尝试卸载/重新安装，但我真的很好奇为什么会这样。

我查看了 CSPROJ 文件，发现 VisualStudioVersion 属性设置为 10.0。这肯定不对吧？

```
 <PropertyGroup>
    <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
    <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
  </PropertyGroup> 
```

如果有人对为什么会发生此问题有任何解释，我很想听听！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T20:25:57.783

我第一次遇到无法在 Visual Studio 2012 中打开 MVC 4 csproj 解决方案的问题。

我的 ProjectTypeGuids 元素中有 2 个 GUID，我的计划是一次取出一个。当我删除与测试项目类型对应 的[GUID {3AC096D0-A1C2-E12C-1390-A8335801FDAB} 时，项目正常加载。](http://www.mztools.com/articles/2008/mz2008017.aspx)

您可能不需要执行将它们全部删除来解决问题的核选项，因为它可能与测试项目有关。

此外，这似乎发生在 Visual Studio 和 MVC 的先前版本中，因为这里还有另一个 Stack [Question](https://stackoverflow.com/questions/7478513/open-an-exising-mvc-3-project-in-visual-studio-11-developer-preview)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T15:26:56.910

虽然删除 GUID 允许加载项目，但对于我的 MVC 4 项目，我必须卸载并重新安装 Visual Studio 2012。

我试图通过添加所有更新、服务包和额外组件来避免这种情况，但没有一个让 VS 了解我的机器上安装了 .NET 4.5 / MVC 4。在我匆忙中，我忘记了我安装了哪些更新，否则我会列出它们。

卸载 + 重新安装让 VS 了解我的机器上安装了 .NET 4.5 和 MVC 4。项目现在加载、构建和运行。

高温高压

# android - 我想从活动访问和启动广播接收器并做某事

> ID：14706337
> 
> 赞同：0
> 
> 时间：2013-02-05T11:20:54.250
> 
> 标签：android

我正在尝试开发一个android应用程序，我想在拨打电话时从手机发送消息。

目的地号码取自应用程序数据库。

我已经完成了那部分，但我无法在我的活动中访问广播接收器：

```
public class PARENT_CALLActivity extends Activity 
{
/** Called when the activity is first created. */

String PARENT=null;
EditText edparent;
Button submit;
String parent_number;

public static final String BROADCAST = "sha.pcall.android.action.broadcast";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edparent=(EditText)findViewById(R.id.editText1);
    submit=(Button)findViewById(R.id.btnsubmit);

    submit.setOnClickListener(new OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
            // TODO Auto-generated method stub

            PARENT=edparent.getText().toString();   

            MyDabasehandler db=new MyDabasehandler(getApplicationContext());

            if(db.getContact().equals(null))
            {
                db.addContact(new Contacts(PARENT));

            }
            else
            {
                db.editContact();
            }

            Intent intent = new Intent(getApplicationContext(),LocationUpdateReceiver.class);
            sendBroadcast(intent);

             finish();
        }

    });       
}

public class LocationUpdateReceiver extends BroadcastReceiver 
{

    @Override
    public void onReceive(Context context, Intent intent)
    {

        String outgoing_number=intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

        Toast.makeText(context, outgoing_number, Toast.LENGTH_LONG).show();
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:34:31.223

如果您通过扩展广播接收器来创建单独的类，我建议您在单独的类文件中进行。如果您只想在活动打开时接收广播，请创建一个私有广播接收器变量。就像在这个问题中一样：

[在哪里注册广播接收器（活动生命周期乐趣）](https://stackoverflow.com/questions/4980398/where-to-register-a-broadcastreceiver-activity-lifecycle-fun)

在后一种情况下，您可以使用称为 registerreceiver 的方法注册广播接收器变量。 [链接在这里](http://developer.android.com/reference/android/content/Context.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter%29)

这一切实际上取决于要求。如果即使您的应用程序已关闭（或活动不在前台），您也想接收广播，您需要在清单文件中注册广播接收器，如下所示：

```
 <receiver 
        android:name="com.example.myapp.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND">
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example.myapp" />
        </intent-filter>
    </receiver> 
```

这是一个谷歌云消息广播接收器的例子。您还需要添加意图过滤器，以指定要接收的广播类型。在上面的例子中，广播接收器可以接收（见intent-filter标签）两个带有动作的意图：

```
"com.google.android.c2dm.intent.RECEIVE" 
```

和

```
"com.google.android.c2dm.intent.REGISTRATION" 
```

完成此操作后，您可以在广播接收器的重写 onReceive() 方法中完成任务。

希望这可以帮助。

# java - 从 android 设备通过 Wifi 访问打印机

> ID：14706343
> 
> 赞同：5
> 
> 时间：2013-02-05T11:21:14.677
> 
> 标签：java, android, sockets, printing, printer-control-language

我正在开发一个计费应用程序`android`。

我的硬件要求是：`Android`选项卡、`WiFi`设备、打印机。

我的应用程序 UI 有输入控件。填写完输入后，通过单击提交按钮将值移动到 SQLite 数据库。当我单击提交按钮时，我想通过打印输出这些详细信息`wifi`。

市场上有许多`android`应用程序。但我想在我的应用程序中进行自定义。有没有更好`API`的呢？

我想通过`Wifi`我的 android 应用程序访问打印机。我在谷歌搜索。我没有得到更好的解决方案。

帮我看看！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:44:43.087

[我在这里](https://download.epson-biz.com/?service=pos)找到了适用于 android 的 sdk 。但此 sdk 仅支持 Epson 打印机（M-T88V、TM-T70、TM-P60 TM-U220）。这不适用于其他打印机。

谢谢你。。

# tridion - Tridion 2011 SP1 HR1 - 使用哪个扩展？

> ID：14706345
> 
> 赞同：4
> 
> 时间：2013-02-05T11:21:19.460
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们要求在页面发布时，我们需要：

1.  查找具有基于特定模式的组件的组件表示。
2.  从该组件中提取某些字段值并将它们存储在我们的 .NET 应用程序（在内容交付端）可用的自定义数据库表中。

我认为这是 Deployer 扩展或 Storage 扩展的一个很好的候选者——但我有点不清楚哪个以及为什么从来没有写过？

我已经排除了事件系统，因为这种代码将位于 CM 上，这对我来说似乎是错误的“一面”——我的重点是扩展页面发布后在 CD 端发生的事情。

阅读有关 Tridion World 的几篇文章（[this](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/Deployer_Extensions_With_Eclipse_1.aspx)、[this](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx)、[this](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extendingbrokerstorage.aspx)和[this](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/cdn_integration.aspx)），我认为存储扩展会是更好的选择？

[Mihai 的](http://www.sdltridionworld.com/articles/sdltridion2011/tutorials/extending-content-delivery-storage-sdltridion-2011-1.aspx)文章似乎和我们需要的很接近，他使用了一个新的项目类型映射：

```
<ItemTypes defaultStorageId="brokerdb" cached="true">
    <Item typeMapping="PublishAction" cached="false" storageId="searchdb" /></ItemTypes> 
```

但是，当内容发布时，Tridion 如何“知道”使用这种新的项目类型（它不是[定义的 TYPE_NAME](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=ConfiguringContentBroker.xml&docid=task_005JJFGGGD8858699HHFHJF&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDoctask_005JJFGGGD8858699HHFHJF&url=/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=typeMapping&sid=lcSearch.runSearch1360062654324&currentQuery=typeMapping&currentScope=)之一，这是重点）？

我应该澄清一下，我是 .NET/C# 开发人员而不是 Java 开发人员，所以这对 Java 人来说可能真的很明显——如果是，请道歉！

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:59:28.437

默认情况下，Tridion 不知道如何部署您的新实体。我的建议是创建一个部署模块（您的链接应该为您提供有关如何执行此操作的足够信息），该模块在（部署过程的）后处理阶段执行，处理部署/传输包中的所有组件，提取所需信息并使用自定义存储扩展来存储所需信息。

请注意：您需要在配置中设置您的新类型，但您还需要自己从该 Deployer 模块中使用它。

希望这可以帮助。

# webforms - MiniProfiler 与 ASP.NET WebForms 经典模式

> ID：14706346
> 
> 赞同：4
> 
> 时间：2013-02-05T11:21:22.797
> 
> 标签：webforms, mvc-mini-profiler, mvcminiprofiler

我们正在尝试使用在经典模式应用程序池中运行的 ASP.NET WebForms 应用程序配置 MiniProfiler（无法将其更改为集成）。我们无法让处理程序工作，因此加载资源失败。

[为了解决这个问题，我们包含了来自https://github.com/SamSaffron/MiniProfiler/tree/master/StackExchange.Profiling/UI](https://github.com/SamSaffron/MiniProfiler/tree/master/StackExchange.Profiling/UI)的 .js、.css、.tmpl 和 .html之后这些资源被加载，但是我们还是什么都看不到。

初始化脚本在最终的 html 中呈现，但 ... 块永远不会生成。我假设是因为脚本永远不会运行。我们尝试加载 jQuery v1.7.1 和更新版本；都没有工作。

控制台中没有 404 或任何东西（Chrome 或 FireFox）。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:53:56.587

您是否在本地计算机或服务器上的 IIS 中运行探查器时遇到问题？

miniprofiler.com 网站上的快速代码示例建议将 MiniProfile.Start() 调用包装在 Request.IsLocal 条件（下面的代码）中，这将阻止分析器在服务器上呈现（除非您从服务器本身）。尝试删除 Request.IsLocal 代码，看看是否有帮助。

```
protected void Application_BeginRequest()  
{  
    if (Request.IsLocal)  
    {  
        MiniProfiler.Start();  
    }   
} 
```

# java - JSF 验证器中的 NPE

> ID：14706347
> 
> 赞同：1
> 
> 时间：2013-02-05T11:21:27.530
> 
> 标签：java, sql

我在 JSF 验证器中得到 NPE，但找不到导致此问题的原因：

```
// Validate Datacenter Name
    public void validateDatacenterName(FacesContext context, UIComponent component, Object value) throws ValidatorException, SQLException
    {
        // Original value
        Object modelValue = ((UIInput) component).getValue();

        String oriDCName = modelValue.toString();

        String s; // New inserted value

        if (value != null && !(s = value.toString().trim()).isEmpty())
        {

            if (s.length() > 18)
            {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  Value is too long! (18 digits max)", null));
            }

            if (ds == null)
            {
                throw new SQLException("Can't get data source");
            }

            Connection conn = null;
            PreparedStatement ps = null;
            ResultSet rs;
            String resDCName = null;
            try
            {
                conn = ds.getConnection();
                // if componentsstatsid <> edited componentstatsid in jsf -> throw validator exception
                ps = conn.prepareStatement("SELECT NAME from COMPONENTSTATS where NAME = ?");
                ps.setString(1, s);
                rs = ps.executeQuery();

                while (rs.next())
                {
                    resDCName = rs.getString(1);
                }

                if (resDCName != null && (!resDCName.equals(oriDCName) ))
                {
                    throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                            "  '" + s + "' is already in use!", null));
                }

            }
            catch (SQLException x)
            {
                throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                        "  SQL error!", null));
            }
            finally
            {
                if (ps != null)
                {
                    ps.close();
                }
                if (conn != null)
                {
                    conn.close();
                }
            }
        }
        else
        {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                  "  This field cannot be empty!", null));
        }

    } 
```

当我输入唯一的新值时，我得到 NPE。当我输入已经在数据库表中找到的值时，我得到`...is already in use!`.

问题出在某个地方，`if (resDCName != null && (!resDCName.equals(oriDCName) ))`但我无法解决。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:27:51.237

像下面的代码一样改变你的逻辑。我假设您希望 resDCname 不应该等于 origDCName。

```
while (rs.next())
{

    resDCName = rs.getString(1);
 if (resDCName != null && resDCName.equals(oriDCName))
    {
       throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                           "  '" + s + "' is already in use!", null));
     }
   } 
```

# c - 如何计算 linux 内核中的 fb_videomode 参数？

> ID：14706351
> 
> 赞同：0
> 
> 时间：2013-02-05T11:21:37.183
> 
> 标签：c, linux-kernel, framebuffer, lcd

我想写一个驱动程序到[http://www.trulydisplays.com/tft/specs/3.5in%20480x800%20TFT480800-25-E%20Spec.pdf](http://www.trulydisplays.com/tft/specs/3.5in%20480x800%20TFT480800-25-E%20Spec.pdf) 如何计算以下所有参数：

```
struct fb_videomode {
    const char *name;   /* optional */
    u32 refresh;        /* optional */
    u32 xres;
    u32 yres;
    u32 pixclock;
    u32 left_margin;
    u32 right_margin;
    u32 upper_margin;
    u32 lower_margin;
    u32 hsync_len;
    u32 vsync_len;
    u32 sync;
    u32 vmode;
    u32 flag;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:21:47.807

我希望这些字段在显示设备的[**EDID中可用。**](http://en.wikipedia.org/wiki/Extended_display_identification_data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T16:34:47.953

该文档可能会有所帮助。我用这个文件来计算上面的信息。

[帧缓冲设备](https://www.kernel.org/doc/Documentation/fb/framebuffer.txt)

祝你好运

# javascript - 插入 jquery 标签后加载 jquery

> ID：14706352
> 
> 赞同：0
> 
> 时间：2013-02-05T11:21:38.837
> 
> 标签：javascript, jquery

我插入 jquery 标签

```
 var newScript = document.createElement("script");
        newScript.id = "grazit_jq";
        newScript.type = "text/javascript"           
        newScript.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js";
        script.parentNode.appendChild(newScript); 
```

之后我想检查 jquery 是否存在。

我这样做有几种方式。一种方式是这样的：

```
 var checkJquery=function(){
        if(typeof(jQuery) === 'undefined')
        {
           console.log('jQuery doesnt exist');
            window.setTimeout(arguments.callee,1000);
            return;
        }
        else{
        sprk_lib=new sprk();
           sprk_lib.load(jQuery);
        }
    };
  sprk.prototype.load=function($){

 console.log($); 
```

}; **更新** 现在我更新了代码。一旦 jQuery 对象可用，它将立即调用该函数。

在该函数中，我将执行我的 jquery 代码。你认为会有问题吗？这样做可以吗？

> 原来的

我在那儿等。问题是在控制台日志中，它返回 null 并且打印 jQuery 存在。如何在加载 jquery 之前停止脚本，然后继续执行脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:29:06.597

考虑使用已建立的 JavaScript 脚本加载器，例如[LABjs](http://labjs.com/)或[LazyLoad](https://github.com/rgrove/lazyload/) ，它们提供可靠的回调，在脚本完全加载之前不会触发。

查看[5 个 JavaScript 脚本加载器的摘要](http://www.netmagazine.com/features/essential-javascript-top-five-script-loaders)。

例如：

```
LazyLoad.js('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', function () {
  console.log('jQuery exists!');
  console.log('Document title: ' + $("title").text());
}); 
```

需要注意的一点——如果你想推迟所有进一步的脚本执行，直到 jQuery 加载之后，你可以将脚本的其余部分放在这个回调函数中。但是，这会破坏大量最佳实践（关注点分离、松散耦合等），因此最好的办法是将现有函数作为回调传递，该回调可以反过来调用其他函数等。例如：

```
function doSomething() {
  console.log('I am doing something!')
  doSomethingElse();
}

function doSomethingElse() {
  console.log('I am doing something else!');
}

LazyLoad.js('https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', doSomething); 
```

您可以进一步改进您的应用程序架构（例如通过引入[PubSub](http://addyosmani.com/blog/tag/pubsub/)），但这超出了这个问题的范围，所以我将把它留在那里。

# c# - 以命名空间为前缀时如何查找 Xml 元素？

> ID：14706356
> 
> 赞同：1
> 
> 时间：2013-02-05T11:21:51.430
> 
> 标签：c#, asp.net, xml, xslt, xpath

我有一个如下的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ea:Stories ea:WWVersion="2.0" xmlns:aic="http://ns.adobe.com/AdobeInCopy/2.0" xmlns:ea="urn:SmartConnection_v3">
<ea:Story ea:GUID="D8BEFD6C-AB31-4B0E-98BF-7348968795E1" pi0="style=&quot;50&quot; type=&quot;snippet&quot; readerVersion=&quot;6.0&quot; featureSet=&quot;257&quot; product=&quot;8.0(370)&quot; " pi1="SnippetType=&quot;InCopyInterchange&quot;">
<ea:StoryInfo>
<ea:SI_EL>headline</ea:SI_EL>
<ea:SI_Words>4</ea:SI_Words>
<ea:SI_Chars>20</ea:SI_Chars>
<ea:SI_Paras>1</ea:SI_Paras>
<ea:SI_Lines>1</ea:SI_Lines>
<ea:SI_Snippet>THIS IS THE HEADLINE</ea:SI_Snippet>
<ea:SI_Version>AB86A3CA-CEBC-49AA-A334-29641B95748D</ea:SI_Version>
</ea:StoryInfo>
</ea:Story>
</ea:Stories> 
```

如您所见，所有元素都有“ea:”，这是一个命名空间前缀。

我正在编写一个 XSLT 文件来显示 SI_Snippet 文本，即“这是标题”。

如何在 XSLT 文件中写入 xpath？它应该包含命名空间还是应该被排除？

```
//ea:Story[ea:SI_EL='headline']/ea:SI_Snippet or 
//Story[SI_EL='headline']/SI_Snippet 
```

实际上，我使用的在线工具都失败了：http: [//xslt.online-toolz.com/tools/xslt-transformation.php](http://xslt.online-toolz.com/tools/xslt-transformation.php)

那么应该有另一种方式吗？

如果稍后，它如何知道要查看哪个命名空间？我应该在运行时将命名空间传递给 XslTransformer 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:04:55.507

您应该在 XSLT 中声明名称空间，然后使用您给它的前缀：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:ea="urn:SmartConnection_v3">
    <xsl:template match="/">
       <xsl:value-of select="//ea:Story[ea:SI_EL='headline']/ea:SI_Snippet" />
    </xsl:template>

    <!-- ...  -->
</xsl:stylesheet> 
```

注意`xmlns:ea="urn:SmartConnection_v3"`根元素中的 。这个很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:32:29.973

尝试使用`XDocument`？

```
var xml = @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>
<ea:Stories ea:WWVersion=""2.0"" xmlns:aic=""http://ns.adobe.com/AdobeInCopy/2.0"" xmlns:ea=""urn:SmartConnection_v3"">
<ea:Story ea:GUID=""D8BEFD6C-AB31-4B0E-98BF-7348968795E1"" pi0=""style=&quot;50&quot; type=&quot;snippet&quot; readerVersion=&quot;6.0&quot; featureSet=&quot;257&quot; product=&quot;8.0(370)&quot; "" pi1=""SnippetType=&quot;InCopyInterchange&quot;"">
<ea:StoryInfo>
<ea:SI_EL>headline</ea:SI_EL>
<ea:SI_Words>4</ea:SI_Words>
<ea:SI_Chars>20</ea:SI_Chars>
<ea:SI_Paras>1</ea:SI_Paras>
<ea:SI_Lines>1</ea:SI_Lines>
<ea:SI_Snippet>THIS IS THE HEADLINE</ea:SI_Snippet>
<ea:SI_Version>AB86A3CA-CEBC-49AA-A334-29641B95748D</ea:SI_Version>
</ea:StoryInfo>
</ea:Story>
</ea:Stories>";

XDocument xdoc = XDocument.Parse(xml.ToString());
XElement v = xdoc.Descendants().FirstOrDefault(x => x.Name.LocalName == "SI_Snippet"); 
```

**编辑**

```
XPathNavigator navigator = xmldDoc.CreateNavigator();
XmlNamespaceManager ns = new XmlNamespaceManager(navigator.NameTable);
ns.AddNamespace("ea", "urn:SmartConnection_v3");
var v = xmlDoc.SelectSingleNode("//ea:SI_Snippet", ns); 
```

# java - JVM 是否交换堆？

> ID：14706360
> 
> 赞同：7
> 
> 时间：2013-02-05T11:22:07.300
> 
> 标签：java, jvm, heap-memory

当抛出与堆空间不足相关的异常时，我增加了 java Xmx 内存限制。但是，我目前正在经历一个很长的执行时间，这可能与内存有关，但我还没有看到抛出的异常（还）。

我想知道什么可能导致执行时间长。JVM 是否将堆交换到磁盘？

我正在使用 HotSpot 1.6.0 更新 34。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T11:25:07.447

JVM 不会交换到磁盘，不。操作系统可能会这样做。您可以通过检查进程中的操作系统统计信息来检测这一点。

随着 JVM 内存耗尽，垃圾收集被触发的频率越来越高。每次运行都会释放更少的内存，从而进一步提高 GC 的速率。最终很多时间都花在了 GC 上，这很可能是你看到的减速。

JVM 不会等到 0 字节被释放才抛出`OutOfMemoryError`。当 GC 花费的时间与释放的字节数相比太长时，它实际上会放弃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:24:47.540

更大堆的一个可能后果是 GC 时间增加 - JVM 必须分析更大的空间，因此需要更长的时间 - 特别是如果它是一个 stop-the-world GC。

你能把你的问题具体一点吗？

你正在使用什么堆大小？你看到的持续时间是多少？您的应用程序中对象的使用模式是什么？例如，一些长寿命的对象，或许多短寿命的对象。

# asp.net-mvc-4 - MVC 应用中的审批流程

> ID：14706364
> 
> 赞同：2
> 
> 时间：2013-02-05T11:22:23.903
> 
> 标签：asp.net-mvc-4, workflow

我正在开发一个系统，用户在其中更改数据并提交更改。现在我们正在考虑引入工作流程，即引入数据提交的审批流程。有人会批准数据。在数据修改未被批准之前，不应将其保存在数据库中。

1.  有人知道 Web 应用程序中的工作流程吗？
2.  我们的应用程序涉及在多个表中进行编辑，以及在审批过程中我们将如何存储数据。

谢谢，-纳伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:44:56.643

有许多选项，但大多数都围绕将数据存储在临时状态（数据库表、XML 文档、JSON 数据结构等），然后在工作流结束后持续存在。这可能会导致许多并发症，例如：中毒事务、乱序处理、工作流过程中的超时以及处理过程中对工作流的更改等等。我怀疑您会想要使用某种形式的编排过程（BizTalk、ESB、NServiceBus、Windows 工作流等）。

如果您想手动管理工作流程。

**直播表**

```
[dbo].[MyTable] (
    -- columns here
) 
```

**加工表**。工作流过程完成后，您会将数据从处理表复制到活动表。

```
[dbo].[MyTableInProcess] (
    -- identical columns as MyTable
    , [State]
    , [ApprovingUser]
    , [DateProcessCommenced]
) 
```

请注意，此实现`extremely crude`需要做大量工作才能被视为生产就绪，但希望能让您走上正确的道路。

# python - 如何将设置 TEMPLATE_CONTEXT_PROCESSORS 中定义的上下文传递给我的自定义视图

> ID：14706366
> 
> 赞同：0
> 
> 时间：2013-02-05T11:22:29.057
> 
> 标签：python, django, django-socialauth

我在使用 Django Social Auth 时遇到了这个问题。我有这个模板。

```
{% block content %}
<div id="content-main">
    <ul>
        {% for name in social_auth.backends %}
        <li>
            <a rel="nofollow" href="{% url "socialauth_begin" name %}">{{ name|title }}</a>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %} 
```

如果我使用标准 urlpattern（它是登录页面），它会正确呈现

```
url(r'^accounts/login/$', 'django.contrib.auth.views.login'), 
```

但是如果我使用我的自定义视图，我该如何传递定义的上下文`TEMPLATE_CONTEXT_PROCESSORS`？

这是我的观点和`settings.py`文件中的条目

```
def login(request):
    t = loader.get_template('registration/login.html')
    c = Context( {} )
    return HttpResponse(t.render(c))

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'social_auth.context_processors.social_auth_by_name_backends',
    'social_auth.context_processors.social_auth_backends',
    'social_auth.context_processors.social_auth_login_redirect',
) 
```

在我看来，这是有道理的`context`，我将它传递给一个空对象，我应该怎么做才能传递正确的`context`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:26:26.410

您需要使用`RequestContext`并返回响应来呈现模板。这通常是这样完成的：

```
def someview(request):
    context = { }
    return render_to_response('some_template.html', context,
                context_instance = RequestContext(request)) 
```

更多文档在[Subclassing RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)。

# xcode4.5 - iPod 中未显示定位服务权限（警报）

> ID：14706367
> 
> 赞同：0
> 
> 时间：2013-02-05T11:22:30.147
> 
> 标签：xcode4.5, core-location, ipod-touch, ios6-maps

我已将基于 GPS 的 iPhone 应用程序（iOS 6）上传到应用商店。我的一位朋友告诉我，核心位置权限不是要求他的设备（iPod）。由于他的位置没有更新，他错过了这些功能。我在这里尝试了很多设备（iPhone 4S、5 和 iPad），但都运行良好。我不知道我的应用程序有什么问题。如果任何人有想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:39:02.897

很有可能他正在测试的 iPod 不具备定位功能。如果设备不能进行位置更新，它永远不会提示用户输入位置。

如果设备无法使用位置，我会嵌入警报，以便用户/测试人员知道为什么位置更新不起作用。

较新的 iPad/iPod Touch 设备可以根据新的 Wifi 平铺获取位置更新，但该功能（iOS 6 的新功能）不向后兼容旧设备。这就是为什么最好先测试位置可用性，然后在不可用时发出警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:23:17.130

API 最近得到了更新（iOS 6），我记得获取位置权限并显示其消息（目的）的方法已被弃用。

查看文档并找到已弃用的内容。

我希望它有所帮助。

# java - 将 int/long 零转换为 double

> ID：14706372
> 
> 赞同：1
> 
> 时间：2013-02-05T11:22:41.423
> 
> 标签：java, integer, double, type-conversion, long-integer

考虑到这个代码片段：

```
int i = 0;
double d1 = (double) i;
long l = 0L;
double d2 = (double) l; 
```

在我的机器上运行这`0.0`两种转换。**但是可以`d1`而且`d2`永远不是`0.0`吗？**

据我了解，这是规范中所说的扩大[的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)*原始转换*：

> 加宽基元转换不会丢失有关数值整体大小的信息。

也

> 将 int 或 long 值转换为 float，或将 long 值转换为 double，可能会导致精度损失

据我了解规范，以上将意味着`int 0`它将始终成为`double 0.0`但`long 0`可以转换为其他东西（例如`1E-20`或类似的东西）。我的规格解释正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:25:56.203

完整的报价是：

> int 或 long 值到 float 或 long 值到 double 的扩大转换可能会导致精度损失 - 也就是说，结果可能会丢失值的一些最低有效位。**在这种情况下，生成的浮点值将是整数值的正确舍入版本，使用 IEEE 754 舍入到最近模式。**

（强调我的）

这涵盖了`int`/`long`值不能在`float`/中精确表示的`double`情况（在这种情况下，选择最接近的可表示值）。显然，`0` **可以**表示，因此不会期望精度损失。

# php - Yii 在另一个视图中渲染视图

> ID：14706381
> 
> 赞同：0
> 
> 时间：2013-02-05T11:23:45.077
> 
> 标签：php, pdf, frameworks, yii

我的应用程序中有一个渲染视图，当我导出为 PDF 时，我想使用之前渲染的数据。现在我用另一种方式来做，我再次加载所有的东西来导出。我该怎么做？

我已经使用了这段代码，但没有成功：

```
array('label'=>'Export pdf', 'url'=>array($this->renderPartial(
      'ViewPDF2', array('sessao' => $GLOBALS['session'],'name_project'=>$model->name_project,'id_project'=>$model->i‌d_project,'dataStart'=>$model->data_start,'dataEnd'=>$model->data_end)))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:21:59.330

我不确定您是如何在视图中获得该代码的？您将该数组作为参数传递给某个函数？我们现在只能看到您正在定义一个数组。

在视图中渲染视图的一般方法是这样的（这是容器视图文件）：

```
<?php //view code here ?>
<!-- some html in your view-->
<div id='included_view' >    
  <?php $this->renderPartial('viewName', array('argForView'=>$foo)); ?>
</div>

<!-- rest of view --> 
```

请注意，使用`$foo`there 意味着您之前将该变量传递给容器视图（或者您`$foo`在之前的 PHP 代码块中定义`renderPartial`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T05:27:59.210

在 url 参数中，您应该使用 URL 地址，该 URL 地址指的是该操作呈现导出为 PDF 的视图的操作。renderPartial 方法只是以您自己的布局格式呈现视图文件。

# java - Reg 表达式接受 1 到 48 之间的值？

> ID：14706382
> 
> 赞同：-6
> 
> 时间：2013-02-05T11:23:50.550
> 
> 标签：java, regex

我希望 Reg 表达式接受 [1-48] 范围内的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:32:38.117

你可以试试这个正则表达式：`^0*(?:[1-9]|[1-3][0-9]|4[0-8])$`

但是，如果可能，我建议使用另一种数字验证机制。正如评论中已经指出的那样，正则表达式旨在匹配字符串模式。

以下是对正则表达式的部分解释：

*   `^`: 字符串的开头
*   `0*`: 匹配任何前导 0
*   `(?:`：对 OR 进行分组（非捕获组）
    *   `[1-9]`: 匹配 1 到 9
*   `|`： 或者
    *   `[1-3][0-9]`: 匹配 10 到 39
*   `|`： 或者
    *   `4[0-8]`: 匹配 40 到 48
*   `)`：结束对 OR 的分组
*   `$`: 字符串结束

看到它在[这个 RegExr](http://regexr.com?33lnh)中工作。

您可能会发现一些有用的资源，以帮助您将来自己设计/测试它们：

*   [正则表达式教程](http://docs.oracle.com/javase/tutorial/essential/regex/)
*   在线正则表达式测试工具：[RegExr](http://gskinner.com/RegExr/)或[RegexPlanet](http://www.regexplanet.com/advanced/java/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:57:54.060

I am not understood why you using regEx for this. You can directly say

```
if( x >= 1 && x <=48) {
   // x will fall in range[1-48] inclusive
} 
```

# objective-c - 如何将数据写入流，直到来自服务器的所有数据都写入 NSOutputstream

> ID：14706383
> 
> 赞同：0
> 
> 时间：2013-02-05T11:23:52.047
> 
> 标签：objective-c, nsoutputstream

如何将数据连续写入流并解析流，直到来自服务器的所有数据都写入 NSOutputstream

```
 NSLog(@"Response %@",[[NSString alloc] initWithData:self.m_cWebData encoding:NSUTF8StringEncoding]);
     NSUInteger written = [oStream write:(const uint8_t *)[self.m_cWebData bytes] maxLength:[self.m_cWebData length]];
     NSLog(@"Rcvd Data=%d written = %d",[self.m_cWebData length],written);
     [self.m_cWebData replaceBytesInRange:NSMakeRange(0,written) withBytes:"" length:0];
     NSLog(@"Rcvd Data after Reset =%d ",[self.m_cWebData length]); 
```

而且我也开始解析。但是 Stream:handleEvent 没有被调用用于流事件。如果流未获取总服务器响应数据并且还有更多数据要写入流，如何将数据写入流。如何来处理这个案子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:43:24.300

```
do {
    bytesWritten = [oStream write:(const uint8_t *)[self.m_cWebData bytes] maxLength:dataLength - bytesWrittenSoFar];

    NSLog(@"Rcvd Data=%d written = %d",[self.m_cWebData length],bytesWritten);
    [self.m_cWebData replaceBytesInRange:NSMakeRange(0,bytesWritten) withBytes:"" length:0];

    NSLog(@"Rcvd Data after Reset =%d ",[self.m_cWebData length]);
    assert(bytesWritten != 0);
    if (bytesWritten == -1) {

    } else {
       bytesWrittenSoFar += bytesWritten;
    }
} while (bytesWrittenSoFar != dataLength); 
```

# python - Pyocrypt DES3文件加密、解密缺失部分文本

> ID：14706384
> 
> 赞同：2
> 
> 时间：2013-02-05T11:23:52.603
> 
> 标签：python, encryption, io, des

我在 Python 中使用[Crypto的这个](https://sourceforge.net/projects/cryptopy/)[博客](https://www.laurentluce.com/posts/python-and-cryptography-with-pycrypto/)（在标题*Applications*下）的 3DES 加密，我一直在[有趣的文件树上](https://github.com/GiovanniMoretti/159251-directoryTreeOfFunFiles)测试它，作为这个问题的一个例子，[An Accountant and his Frog.txt](https://github.com/GiovanniMoretti/159251-directoryTreeOfFunFiles/blob/master/An%20Accountant%20and%20his%20Frog.txt)在许多其他文件（文件大小变化很大，例如[TOASTERS](https://github.com/GiovanniMoretti/159251-directoryTreeOfFunFiles/blob/master/TOASTERS.TXT)）。

**pyencrypt**

```
import os
from Crypto.Cipher import DES3

def encrypt_file(in_filename, out_filename, chunk_size, key, iv):
    des3 = DES3.new(key, DES3.MODE_CFB, iv)
    with open(in_filename, 'r') as in_file:
        with open(out_filename, 'w') as out_file:
            while True:
                chunk = in_file.read(chunk_size)
                if len(chunk) == 0:
                    break
                elif len(chunk) % 16 != 0:
                    chunk += ' ' * (16 - len(chunk) % 16)
                out_file.write(des3.encrypt(chunk))

def decrypt_file(in_filename, out_filename, chunk_size, key, iv):
    des3 = DES3.new(key, DES3.MODE_CFB, iv)

    with open(in_filename, 'r') as in_file:
        with open(out_filename, 'w') as out_file:
            while True:
                chunk = in_file.read(chunk_size)
                if len(chunk) == 0:
                    break
                out_file.write(des3.decrypt(chunk)) 
```

**用法**

```
import pyencrypt, md5
from Crypto import Random
iv = Random.get_random_bytes(8)
m = md5.new()
m.update("encryptionkey")
key =  m.digest()
.encrypt_file("C:\\treeoffunfiles\\Accountant and his frog.txt", 'C:\\treeoffun\\to_enc.enc', 8192, key, iv)
pyencrypt.decrypt_file('C:\\treeoffunfiles\\to_enc.enc', 'C:\\treeoffunfiles\\to_enc.dec', 8192, key, iv) 
```

而且文件的加密很棒（没有抱怨）！但文件的[解密](http://pastebin.com/s4CmJC5y)不是那么好。这是原始文件和[notepad++的解密文件之间的](https://sourceforge.net/projects/npp-compare/)[比较](https://www.diffnow.com/v1?report=m8hzi)输出。

[![记事本++](../Images/2894b75ef64211ff7ce7196ea0fb3a19.png)](https://i.stack.imgur.com/uRYP5.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/3qnyhvzf.b5w.png)）]

关于为什么解密文件缺少原始内容的任何想法？以及如何使解密（必要时加密）更准确（跨大小可能不同的文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T03:18:05.250

建议的答案已在[DSM](https://stackoverflow.com/users/487339/dsm)的评论中发布（我一直在等待他发布答案，这可以暂时保留）。

> 这对我有用，但我不在 Windows 上。您能否改为以二进制模式（“rb”/“wb”）打开文件，看看是否有帮助？– 帝斯曼

问题是 3DES 加密的原始实现是在`unix`机器上运行的。而`windows`系统上的结果不同。

为了修复`chunks`丢失数据的问题，DSM 建议将文件输入/输出更改为二进制而不是常规读/写，这已经给出了所需的输出，如此[处所示](http://www.diffnow.com/?report=vdtrs)。

仅供参考 diffnow 仅将结果存储 1 个月。

# android - 来自 AVD 的 GET 请求

> ID：14706387
> 
> 赞同：0
> 
> 时间：2013-02-05T11:24:01.547
> 
> 标签：android

当我将 url 提供为 10.0.2.2 时，AVD 浏览器能够获取。但是，当我提供端口号 10.0.2.2:50178/（我正在运行来自 Visual Studio Express 2012 for Web 的 .net WCF 服务）时，响应显示“主机名无效”。我需要为港口做点什么吗？

我在 Windows 7 防火墙设置的“入站规则”中添加了端口号。它没有用。

# mysql - 插入多行，其中大部分是常量

> ID：14706393
> 
> 赞同：5
> 
> 时间：2013-02-05T11:24:18.850
> 
> 标签：mysql, insert

我必须在表中插入大量记录。它没有完全标准化，因此大部分字段都是重复的。

我知道正确的命令是：

```
INSERT INTO table_name (field1, field2, ..., field_n) 
VALUES (value1, value2, ..., value_n),
    ...
    (value1, value2, ..., value_n) 
```

但我想知道是否可以保持某些值固定并仅指示不同的值。

让我们说而不是

```
INSERT INTO table_name (shop, month, sale)
VALUES (1, 2, 23),
    (1, 2, 28),
    (1, 2, 29),
    (1, 2, 30) 
```

有类似的东西

```
INSERT INTO table_name (shop, month, sale)
VALUES (1, 2, 23), ... 28 / 29 / 30 
```

如果不可能，我会创建一个带有循环、输入字符串等的过程。这不是一个大问题，但我的意思是要知道 INSERT INTO 是否有任何特殊性允许在没有过程的情况下执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:01:09.013

您可以尝试以下方法：

```
INSERT INTO table_name (shop, month, sale)
SELECT * FROM
(SELECT 1 as shop, 2 as month) as sm,
(SELECT 23 as sale UNION ALL SELECT 28 UNION ALL SELECT 30) as sales; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:31:44.277

您可以使用默认约束，当您未在 insert into 语句中指定默认值时，该约束将添加默认值。如果您指定一个值，该值将被添加。

只需为表格中的列设置默认值

```
ALTER TABLE tblname ALTER columnName SET DEFAULT 'value' 
```

参考[http://www.w3schools.com/sql/sql_default.asp](http://www.w3schools.com/sql/sql_default.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:48:05.503

您可以使用临时表插入不同的值，然后使用 insert ... select。我不知道这是否会为你节省一大笔钱：

```
CREATE TEMPORARY TABLE sale_temp (sale int);
INSERT sale_temp (sale) VALUES (23), (28), (29), (30);
INSERT INTO table_name (shop, month, sale)
SELECT 1, 2, sale
  FROM sale_temp;
DROP TABLE sale_temp; 
```

# mysql - EER 帮助付款

> ID：14706398
> 
> 赞同：0
> 
> 时间：2013-02-05T11:24:28.803
> 
> 标签：mysql, entity-relationship, mysql-workbench, payment-processing, visual-modeler

伙计们，我正在 Mysql Workbench 中开发我的项目，并且对我的项目感到困惑。

我有几个问题：

我们如何管理不同类型的付款？我的意思是我的数据库有一个支付表，我的系统有 3 种支付模式。

1]信用卡（将存储各自的信息）

2]DebitCard（将存储各自的信息）

3]货到付款（以现金支付，稍后更新）

我在这里上传了一张图片来告诉你我在想什么

账单表 - 由账单生成和东西组成。付款表-至于付款何时完成（我已从所有表中添加了类型 id 和 fks，以便我可以在 select 方法上使用 if/else 子句。）这是一个好的实践吗？家表-是货到付款丁字裤

有没有更好的方法来做到这一点？请帮忙。

![在此处输入图像描述](../Images/4e1a090066e2cc919e63025147a46e22.png)

我进一步修改了图像并删除了类型条件，而是使用 if(payment_type) 子句访问相应的数据库，我相信这应该可以完成工作。这有什么过错吗？请帮忙

![在此处输入图像描述](../Images/b4e4325a6fb67e295ac44a71fd04dad7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T00:54:55.283

确实。有。我会选择继承。

这里有一个简单的图表：

![在此处输入图像描述](../Images/d96ae0afc0d0c047b7998bb84544439a.png)

您需要包含您的属性和符号（oneTOone、manyTOone、...）。做一些关于继承的研究。

看这里：[http](http://de.scribd.com/doc/7122945/ER-Diagram) ://de.scribd.com/doc/7122945/ER-Diagram 如果你 google 或 stackoverflowle，还有更多。

问候 ;-）

# sql-server-2008 - 全文索引未创建

> ID：14706400
> 
> 赞同：3
> 
> 时间：2013-02-05T11:24:36.073
> 
> 标签：sql-server-2008

我试图在我的表格列中创建全文索引，但它给了我错误。

我的查询如下：

```
create table products
(
p_id int primary key,
p_name varchar(50),
)

insert into products values(1,'Sugar')
insert into products values(2,'Tea')
insert into products values(3,'Flour')
insert into products values(5,'Soap')

create index pname on products(p_name)
select * from products

create fulltext catalog product as default

create fulltext index on products(p_name) key index pname on product 
```

它给出了这个错误：

> 消息 7653，级别 16，状态 2，第 1 行“pname”不是强制执行全文搜索键的有效索引。全文搜索键必须是唯一的、不可为空的、单列索引，该索引不脱机，未在非确定性或不精确的非持久计算列上定义，没有过滤器，最大大小为 900字节。为全文键选择另一个索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T12:46:09.840

您应该为您的 PRIMARY KEY 命名，并将其用作最后一条语句中的 KEY INDEX。

```
create table products
(
p_id int CONSTRAINT [PK_products] PRIMARY KEY,
p_name varchar(50),
)

....
create fulltext index on products(p_name) key index PK_products on product 
```

[关键索引 index_name](http://msdn.microsoft.com/en-us/library/ms187317.aspx)

**Is the name of the unique key index on table_name. The KEY INDEX must be a unique, single-key, non-nullable column. Select the smallest unique key index for the full-text unique key. For the best performance, we recommend an integer data type for the full-text key.**

# django - 如何使用 django_auth_ldap 将 Django Auth 系统限制为特定的 LDAP 组

> ID：14706401
> 
> 赞同：1
> 
> 时间：2013-02-05T11:24:36.610
> 
> 标签：django, ldap

我正在使用 OpenLDAP，我想使用 django_auth_ldap 将它连接到 Django。无论我试图遵循什么选项，它都无法正常工作，我也找不到正确的解决方案。

以下是使用的各种软件的版本：

*   OpenLDAP 20423 (LDAPv3)
*   Django 1.4.1 或 1.4.3（我都试过了）
*   django_auth_ldap 1.1.3

我的 LDAP 目录有一个名为`noc.noc`我用来进行测试的用户。

`settings.py`我用以下几行更新了我的文件：

```
import ldap, logging
from django_auth_ldap.config import LDAPSearch, PosixGroupType

.
.
.

logger = logging.getLogger('django_auth_ldap')
logger.addHandler(logging.StreamHandler())
logger.setLevel(logging.DEBUG) 

AUTHENTICATION_BACKENDS = (
    'django_auth_ldap.backend.LDAPBackend',
    'django.contrib.auth.backends.ModelBackend',
)

AUTH_LDAP_SERVER_URI = "ldap://ldap.XXX.XX"
AUTH_LDAP_BIND_DN = "cn=<LDAPUSER>,dc=XXX,dc=XX"
AUTH_LDAP_BIND_PASSWORD = "<LDAPPASSWORD>"

AUTH_LDAP_USER_SEARCH = LDAPSearch("dc=XXX,dc=XX",
    ldap.SCOPE_SUBTREE, "(uid=%(user)s)")

AUTH_LDAP_GROUP_TYPE = PosixGroupType(name_attr='cn')
AUTH_LDAP_REQUIRE_GROUP = "cn=<USERGROUP>,ou=Groups,dc=XXX,dc=XX"

AUTH_LDAP_GROUP_SEARCH = LDAPSearch("ou=Groups,dc=XXX,dc=XX",
    ldap.SCOPE_SUBTREE, "(objectClass=posixGroup)"
)

AUTH_LDAP_USER_ATTR_MAP = {
    'first_name': 'givenName',
    'last_name': 'sn',
    'email': 'mail',
} 
```

当我尝试`noc.noc`在我的 Django 界面上与用户连接时，我收到以下日志消息：

```
search_s('dc=XXX,dc=XX', 2, '(uid=%(user)s)') returned 1 objects: 
cn=noc.noc,ou=users,dc=XXX,dc=XX
cn=noc.noc,ou=users,dc=XXX,dc=XX is not a member of cn=<USERGROUP>,ou=groups,dc=XXX,dc=XX
Authentication failed for noc.noc 
```

如果我删除该行：

```
AUTH_LDAP_REQUIRE_GROUP = "cn=<USERGROUP>,ou=Groups,dc=XXX,dc=XX" 
```

与界面的连接有效，但它也适用于 LDAP 数据库中的任何用户，这不是我想要的。

我还使用以下命令检查了用户是否在 ldap 数据库和正确的组中：

```
ldapsearch -h 'ldap.XXX.XX' -D 'cn=<LDAPUSER>,dc=XXX,dc=XX' -w '<LDAPPASSWORD>' -b 'cn=<USERGROUP>,ou=Groups,dc=XXX,dc=XX' 
```

结果是：

```
# extended LDIF
#
# LDAPv3
# base <cn=<USERGROUP>,ou=Groups,dc=XXX,dc=XX> with scope subtree
# filter: (objectclass=*)
# requesting: ALL
#

# <USERGROUP>, Groups, XXX.XX
dn: cn=<USERGROUP>,ou=Groups,dc=XXX,dc=XX
cn: <USERGROUP>
gidNumber: 501
memberUid: cn=user1,ou=Users,dc=XXX,dc=XX
memberUid: cn=noc.noc,ou=Users,dc=XXX,dc=XX
objectClass: posixGroup

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1 
```

我尝试了其他参数`settings.py`并在网上寻找类似的问题，但我阅读的解决方案没有解决我的问题。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:52:58.697

Django-auth-ldap 使用 CN 来识别组成员而不是 DN。为此，解决方案是替换：

```
cn=noc.noc,ou=Users,dc=XXX,dc=XX 
```

在`memberUid`LDAP 中的组字段中：

```
noc.noc 
```

这解决了这个问题。

另一种解决方案是修改 django-auth-ldap 的来源。为此，您必须编辑文件`config.py`（在我安装的 /usr/local/lib/python2.6/dist-packages/django-auth-ldap 中找到）并找到名为：

```
def user_groups(self, ldap_user, group_search): 
```

班级：

```
class PosixGroupType(LDAPGroupType): 
```

然后替换该行：

```
user_uid = ldap_user.attrs['uid'][0] 
```

经过：

```
user_uid = ldap_user.dn 
```

这也应该可以解决问题。

# performance - Solr 默认“示例”中的剩余/未使用字段

> ID：14706403
> 
> 赞同：2
> 
> 时间：2013-02-05T11:24:41.363
> 
> 标签：performance, solr

我开始根据原始示例配置 Solr，因此示例中包含了许多随机字段。

我可能会使用其中的一两个，但在大多数情况下，它们都只是坐在那里未使用（我的数据配置中没有提到它们或向它们存储数据。

这是否会对性能产生任何影响（即使是少量）？我应该继续删除它们还是没关系？

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:58:00.490

I recommend deleting the fields and associated unused types. Possibly no performance impact, but there are some dynamic fields and copyFields which may cause confusion down the line. Or just build a new config directly instead (you only need two files to start: schema.xml and solrconfig.xml).

If you are doing it by trimming unused fields, make sure to keep or change whatever your uniqueKey points at, whatever your 'df' default field is and _ version_ (no spaces with underscores).

The last one is requires for real-time get and updateLog, which are enabled in example's solrconfig.xml as well. Easier to keep _ version_ than to try removing all those things.

(Update Jan 2017: There is now [a presentation video](https://www.youtube.com/watch?v=lc6krl8iC9o), specifically working through examples and how to clean them)

# vba - MS Word 宏，将当前段落文本复制到剪贴板

> ID：14706407
> 
> 赞同：1
> 
> 时间：2013-02-05T11:24:49.280
> 
> 标签：vba, ms-word

从这个[页面](http://support.microsoft.com/kb/212529)我发现了如何创建一个选择当前段落文本的宏。

```
Sub SelectCurrentParagraph()
   Selection.Paragraphs(1).Range.Select
End Sub 
```

但是我这样做了：当我将光标放在段落内时，宏将选择段落文本并将其复制到剪贴板。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:41:53.157

您可以使用不同的单位（即 wdParagraph、wdCharacter、wdLine）来移动单词。这将选择当前段落并复制到剪贴板。

```
Sub SelectCurrentParagraph()
    Selection.StartOf Unit:=wdParagraph
    Selection.MoveEnd Unit:=wdParagraph
    Selection.Copy
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T11:42:14.977

以下将复制您的选择，但检查`wdSelectionNormal`将跳过帧、形状等：

```
Selection.Paragraphs(1).Range.Select

If Selection.Type = wdSelectionNormal Then
    Selection.Copy
End If 
```

# html - 使用后的影响

> ID：14706411
> 
> 赞同：0
> 
> 时间：2013-02-05T11:25:10.297
> 
> 标签：html, action, forms

假设我有一个表单，它`POST`指向生成表单的相同 URL。我们还假设 URL 是`somedomain.com/contractor/1/1/add-workers`，并且在表单的生命周期内 URL 保持不变*非常重要。*

所以我设置了表单的 action="." 因为该表单旨在发布到相同的 URL。

在什么情况下，这会使我的操作属性容易受到用户的操纵**/**摆弄？假设用户在发布表单之前`somedomain.com/contractor/1/1/add-workers`在地址栏中手动更改`somedomain.com/contractor/1/2/add-workers`，我认为这没有任何影响，但是我应该记住哪些其他情况下操作属性可能会受到用户（无意）的影响？

# codeigniter-2 - 动态 CMS 页面和静态页面 CodeIgniter

> ID：14706413
> 
> 赞同：1
> 
> 时间：2013-02-05T11:25:14.433
> 
> 标签：codeigniter-2

我正在使用 Codeigniter 2，我有一些从后台创建的动态页面 (CMS)，页面名称为 ID。有些页面是静态的，有一个例子：

动态页面：

```
www.domain.com/privacy
www.domain.com/about 
```

和静态页面：

```
www.domain.com/invitation 
```

所以问题是如何路由此页面：我尝试使用：

```
 $route['([a-z0-9\-]+)'] = 'home/cms/$1'; 
```

但它给了我 404 静态页面（`www.domain.com/invitation`）

任何帮助，并提前感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:37:50.043

您可以从文件中的重定向中显式删除静态`.htaccess`文件：

```
RewriteEngine on
RewriteCond $1 !^(invitation\.php|index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

或者，您可以使用该[`_remap`功能](http://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping)。在`_remap`函数内部，您将检查“方法”是否存在物理文件 - 如果存在，则加载它 - 如果不存在，则路由到控制器方法：

```
public function _remap($method, $params = array())
{
    $filepath = BASEPATH.$method.".php";
    if (file_exists($filepath))
    {
        include($filepath);
        return;
    }
    else if (method_exists($this, $method))
    {
        return call_user_func_array(array($this, $method), $params);
    }
    else
    {
        show_404();
    }
} 
```

# database - 在 Postgresql 中记录特定的数据库查询

> ID：14706418
> 
> 赞同：0
> 
> 时间：2013-02-05T11:25:38.927
> 
> 标签：database, postgresql, logging, grep

是否可以记录仅在 postgresql 中的特定数据库上执行的查询？

一种可能的解决方案是记录数据库名称，最后 grep 它们。如果有更好的方法会很有帮助，因为生成的日志非常庞大，grep 不是很方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:33:03.227

contrib 模块 pg_stat_statements 将能够做到这一点：

[http://www.postgresql.org/docs/current/static/pgstatstatements.html](http://www.postgresql.org/docs/current/static/pgstatstatements.html)

因为它只跟踪安装模块的数据库的语句。

# javascript - 如何删除默认图像图标

> ID：14706423
> 
> 赞同：3
> 
> 时间：2013-02-05T11:25:53.123
> 
> 标签：javascript, internet-explorer, google-chrome

**我面临的十字符号问题出现在 chrome 和 IE 中的图像** ![](../Images/bc9d1279faad1d9c98b2243f447e5230.png) **是我想要从外部 java 脚本文件中获得的场景（我想要这样的东西）。** ![在此处输入图像描述](../Images/4205fba9b5a91e51b279c654433e50b0.png)

当图像标签无法从源中找到图像时，第一张图像具有十字图标。mozilla 会非常巧妙地处理这个问题，但是 chrome 和 IE 会显示一个我不想要的十字图标..

我找到了不通用的解决方案，当图像没有从每个图像标签上的指定 url 获取图像时，我必须传递一个透明的图像 url.. 像这样

```
<img src="i/ibm.png" onerror="this.src='i/1x1trns.png';"> 
```

但在我的页面中有超过 20 张图片，在整个项目中超过 200 张，所以在这种情况下，我想从单个外部 javascript 文件中处理这个......

所以任何人知道这个问题请告诉我一个解决方案......谢谢合作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:21:17.187

在标签中定义 jQuery 有点脏，但是`<head />`您需要为.`$.ready``$.ready``<head />`

**或者**

在拥有这些图像之前，您需要添加 jQuery。

试试这个代码

```
<body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("img").on("error", function() {
                $(this).attr("src", "i/1x1trns.png");
            });
        });
    </script>
    <img src="not-a-valid-image.png" alt="Logo not found" />
</body> 
```

我在我的一个项目中使用了这种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:42:22.027

```
var imgs = document.getElementsByTagName('img');

for (var i = 0; i < imgs.length; i++) {
    (function(img_elem) {
        var img = new Image();
        img.src = img_elem.src;
        img.onerror = function() {
             img_elem.src = 'i/1x1trns.png';
        };
    })(imgs[i]);
} 
```

[http://jsfiddle.net/Ypa7N/](http://jsfiddle.net/Ypa7N/)

# javascript - Primefaces 运行 java 脚本 onComplete/onClick

> ID：14706432
> 
> 赞同：3
> 
> 时间：2013-02-05T11:26:23.213
> 
> 标签：javascript, jsf, primefaces

我有 ap:command 按钮，如下所示。

```
<p:commandButton id="settings" ajax="false" onComplete="window.alert('sometext');"      value="#{messages.settings}"
styleClass="cancelButton" style="font-family: sans-serif, Arial, Helvetica, Geneva; font-size: 10pt; width: 90px;" /></td> 
```

我希望这个按钮运行一个 java 脚本 onComplete 或 onClick 但我无法让它们中的任何一个工作。我实际上希望它打开一个弹出窗口，但在这里我尝试使用更简单的脚本来发出警报。但这也不起作用。什么都没有发生。

谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T11:29:36.523

首先：没有大写字母`onxxx`（其中xxx是 *开始*/*完成*/*成功*）

由于您设置`ajax="false"`按钮不会执行任何 ajax ，这意味着`onstart`/ `oncomplete`/`onsuccess`根本不会被触发

采用`onclick="alert('wow')"`

如果你将删除`ajax="false"`你将能够使用`oncomplete="alert('wow')"`

# javascript - 将文本从 HTML 转换为 MS Word

> ID：14706436
> 
> 赞同：6
> 
> 时间：2013-02-05T11:26:38.237
> 
> 标签：javascript, html, ms-word

我正在尝试将 HTML（来自 CK 编辑器）转换为 MS Word：

```
wordDoc = new ActiveXObject("Word.Application"); 
```

但结果显示 Word 文档中的所有 HTML 标记（如`span`, `strong`）。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T08:36:13.720

有一些完整的解决方案可以解决您的问题。试试这些：

*   [http://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)
*   [http://www.phpdocx.com/](http://www.phpdocx.com/)
*   [http://phpword.codeplex.com/](http://phpword.codeplex.com/)
*   [http://www.phplivedocx.org/articles/brief-introduction-to-phplivedocx/](http://www.phplivedocx.org/articles/brief-introduction-to-phplivedocx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T03:00:50.990

[Pandoc](http://johnmacfarlane.net/pandoc/%22pandoc%22) allows conversion between html and word documents (among many other formats). Pandoc is an haskel library but there are bundled installer for all platform. To convert your document you will need to use this command.

```
pandoc -o file.doc file.html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T13:59:06.860

当您在寻找 WORD 解决方案时，PDF 解决方案也可以吗？如果是这样，请尝试[http://www.fpdf.org](http://www.fpdf.org)。但是，如果您绝对必须将 WORD 作为最终结果，这又是行不通的。除非您需要用户在文档上键入，否则 PDF 通常会更好，因为它们可以防止用户修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T11:21:52.827

根据您的问题，我了解您希望将 HTML 转换为具有所有样式的 Word（Css 应用）

我有这样的requirenmnet，我在下面的代码中实现了它对我来说完全有用。请检查下面的代码可能对您有帮助

在这里，我从 GridView 创建 Word 文件，并且我已将样式应用于该网格。它在 Word 文件中创建与在浏览器中显示的相同的网格。您只需要为您的工作更改与样式 (css) 相关的标签。

```
Protected Sub CreateHTMlToWord()
        Try

            Dim sHtml As New StringBuilder
            Dim htmlForm As New HtmlForm
            grdHTMLData.GridLines = GridLines.Both 'Grid View Fill with data

            Response.ClearContent()
            Response.AddHeader("content-disposition", "attachment; filename=estPage.doc")
            Response.ContentType = "application/vnd.doc"

            Dim str As New IO.StringWriter
            Dim htex As New HtmlTextWriter(str)
            htmlForm.Controls.Add(grdHTMLData)
            htmlForm.EnableViewState = False
            Me.Controls.Add(htmlForm)
            htmlForm.RenderControl(htex)

            sHtml.Append("<html>")
            sHtml.Append("<head>")
            sHtml.Append("<style type='text/css'>")
            sHtml.Append(".mGrid{width: 100%; background-color: #F8FCFE; margin: 5px 0 10px 0; border-collapse: collapse;}")
            sHtml.Append(".mGrid td{ padding: 2px; color: black;} .mGrid td a:link{ color: #000;}")
            sHtml.Append(".mGrid th{ padding: 4px 2px; color: #fff; background: #4A7298; font-size: 0.9em;}")
            sHtml.Append(".mGrid th a:link{ color: #fff; font-weight: bold;} .mGrid .alt{ background-color: #E1EEF7;}")
            sHtml.Append(".mGrid .pgr{ background: #E1EEF7;} .mGrid .pgr table{ margin: 5px 0;}")
            sHtml.Append(".mGrid .pgr td span{ border-width: 0; font-weight: bold; color: #666; line-height: 12px;}")
            sHtml.Append(".mGrid .pgr td a{ color: #666;} .mGrid .pgr td a:link{ color: #4A7298; padding: 0 5px; text-decoration: underline;}")
            sHtml.Append(".mGrid .pgr td a:active{ text-decoration: none; font-weight: bold;}")
            sHtml.Append(".mGrid .pgr td a:hover{ color: #fff; background-color: #4A7298; text-decoration: none;} .mGrid a:hover{ text-decoration: underline;}")
            sHtml.Append(".mGridHdr th{ text-align: left;}")
            sHtml.Append("</style>")
            sHtml.Append("</head>")
            sHtml.Append("<body>")
            sHtml.Append(str.ToString)
            sHtml.Append("</body>")
            sHtml.Append("</html>")

            Response.Write(sHtml.ToString)
            Response.Flush()
            Response.Close()

        Catch ex As Exception

        End Try
    End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T03:32:57.207

我能想象的就像以下步骤：

1.  将您的 HTML 转换为 OpenXML，
2.  然后创建对应word文档结构的文件，
3.  压缩成 docx。

# java - 在字符之间插入特殊符号

> ID：14706437
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:26:44.217
> 
> 标签：java, string

我有一个带有数字的字符串，我想在每两个数字之间添加这个符号“：”，就好像字符串是**0123456789**我希望它像这样**01:23:45:67:89**

有什么办法插入吗？？正如我读到的有关 replace() 但这对我的情况没有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:32:05.307

你可以使用这个神奇的正则表达式：

```
System.out.println("0123456789".replaceAll(".{2}(?!$)", "$0:")); 
```

*   `.{2}`匹配 2 个字符
*   `(?!$)`没有结束
*   `$0:``:`包含的第一个匹配参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:52:11.243

```
String x="0123456789";
String result="";
for(int i=0;i<x.length();i++){
    result+=x.charAt(i);
    if(i%2==1 && i+1<x.length())
       result+=":";
} 
```

# php - Rss - 显示 pubDate 和 dc:date 相同的功能

> ID：14706441
> 
> 赞同：0
> 
> 时间：2013-02-05T11:26:50.123
> 
> 标签：php, function, rss, feed, pubdate

我在同一个网站上有 4 个 RSS 提要。我的功能如下所示：

```
 //-- get_rss     ----------------------------------------------------------------------------------
   //   Returns the RSS feed in LI elements
   //   @param $url (feed url) is recieved from page template
  //    @param $lang (possibillity to declare language if available) is recieved from page template
  //---------------------------------------------------------------------------------------------

function get_rss($url, $lang, $articles) {
$rss = new rss_php;
$rss->load($url);
$items = $rss->getItems();

// Sets the maximum items to be listed
$max_items = $articles;

$count = 0;

$html = '';
// Translates months to swedish
foreach($items as $index => $item) {
$pubdateForeignString = substr($item['pubDate'], 4);
$pubdateEnglishString = str_replace(array('maj', 'okt'), array('may', 'oct'), $pubdateForeignString);
$pubdate = date("Y-m-d", strtotime($pubdateEnglishString));

$html .= '
<ul class="rssList">
<li class="itemTitle"><a href="'.$item['link'].'" title="'.$item['title'].'" rel="external"><h2>'.$item['title'].'</h2></a></li>
<li class="itemText">'.$item['description'].'</li>
<li class="itemLink"><a href="'.$item['link'].'" title="'.$item['title'].'" rel="external" class="readmore">Läs mer</a><em>Publicerad: '.$pubdate.'</em></li>
</ul>';
$count++; //Increase the value of the count by 1
if($count==$max_items) break; //Break the loop is count is equal to the max_loop
}    
echo $html;
 } 
```

2 个 rss-feed 有 pubDate，另外 2 个有 dc:date。因此，如果我将 pubDate 更改为 dc:date 2 工作，其他将显示“1970-01-01”，如果我将 dc:date 更改为 pubDate，我会得到同样的结果，但反过来。

**现在我的问题是“编辑”函数的最简单方法是什么，以便我可以同时运行这两种类型？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:28:56.407

得到他们两个。如果一个等于时间戳 0 (1970-01-01)，则选择另一个。

# api - gmap v3的谷歌地图密钥

> ID：14706443
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:27:00.160
> 
> 标签：api, google-maps, google-maps-api-3

我有一个关于 googlemap api version3 的问题，基本上我们已经在我们的内部网络应用程序中使用了 google map api 行驶距离和地理代码功能，因为我们在我们的 google map key 上为 google 付费，

所以我的问题是在旧的谷歌地图 v2 上，我们确实必须加密我们的地图密钥并发回谷歌才能获得工作地理编码或行驶距离，同样我们仍然必须使用地图 api 加密谷歌地图密钥V3 ? 或者我们不需要谷歌地图 V3 的地图密钥？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:46:52.573

取自：[谷歌地图 API](https://developers.google.com/maps/signup)

> Google Maps JavaScript API v3 不需要 API 密钥即可正常运行。但是，我们强烈建议您使用 API 控制台密钥加载 Maps API，该密钥允许您监控应用程序的 Maps API 使用情况

# javascript - 通过jquery获取除最后一个之外的输入值

> ID：14706446
> 
> 赞同：2
> 
> 时间：2013-02-05T11:27:16.470
> 
> 标签：javascript, jquery

我想通过 jquery 获取输入中的所有值，除了最后一个类中的最后一个输入`.tr`，但它对我不起作用，如何解决？

我尝试如下：

**演示：http:** [//jsfiddle.net/d4xZK/](http://jsfiddle.net/d4xZK/)

**HTML：**

```
<div class="tr">
    <input type="text" value="111">
</div>
<div class="tr">
    <input type="text" value="222">
</div>
<div class="tr">
    <input type="text" value="333">
</div>
<div class="tr">
    <input type="text" value="444">
</div> 
```

**jQuery：**

```
$('.tr').each(function(){
    var mpiVal = $('.tr input').not(':last').val();
    alert(mpiVal)
)} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:29:24.390

你可以[`slice()`](http://api.jquery.com/slice/)关闭最后一个：

```
$('.tr').slice(0, -1).each(function() {
    var mpiVal = $('input', this).val();
    console.log(mpiVal);
}); 
```

[**演示**](http://jsfiddle.net/e5T7X/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:32:38.427

```
$('.tr').not(':last').each(function(){
    var mpiVal = $(this).children('input').val();
    alert(mpiVal)
}); 
```

在这里演示[http://jsfiddle.net/d4xZK/4/](http://jsfiddle.net/d4xZK/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:33:10.687

或者您可以简单地为此使用正确的选择器；

```
$('.tr:not(:last) input').each(function(){
    var mpiVal = $(this).val();
    alert(mpiVal);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:33:18.130

最后一行有语法错误

```
 var arr = []
  $('.tr:not(:last)').each(function(){
     arr.push.call(arr,$(this).find('input').first().val());         
  });
  alert(arr); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T11:34:43.510

```
$(".tr:not(:last) input").map(function(){ return $(this).val() }).get() 
```

退货`["111", "222", "333"]`

# php - WordPress 警告

> ID：14706451
> 
> 赞同：0
> 
> 时间：2013-02-05T11:27:31.450
> 
> 标签：php, wordpress, header, foreach, warnings

我正在做一个非政府组织项目。我在本地主机上准备了一些东西，现在上传到我们的测试服务器。但是当我尝试打开我的 wordpress 的 wp-admin 时，我收到以下警告。

```
 Warning: Invalid argument supplied for foreach() in /home/zooliepd/public_html/clients/sparsha/wp-includes/post.php on line 3589

Warning: Cannot modify header information - headers already sent by (output started at /home/zooliepd/public_html/clients/sparsha/wp-includes/post.php:3589) in /home/zooliepd/public_html/clients/sparsha/wp-includes/pluggable.php on line 876 
```

在我的网站上，我在主页上创建了帖子页面。

我试图将 ob_start(): 放在我的头文件中，但它没有用！并且在给定行号的 post 文件中没有空格。

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:33:21.953

```
Warning: Invalid argument supplied for foreach() in /home/zooliepd/public_html/clients/sparsha/wp-includes/post.php on line 3589 
```

这是因为`foreach`期望那里有一个数组，请执行以下操作：

```
if(is_array($your_arry)){
   foreach(){....}
} 
```

把你`foreach`放在这个条件下

如果第一个警告是固定的，第二个将自动运行，因为第二个是由第一个引起的。:D

# google-ads-api - 通过 Google Adwords API 获取 DynamicSearchAd 和 TextAd

> ID：14706452
> 
> 赞同：1
> 
> 时间：2013-02-05T11:27:33.057
> 
> 标签：google-ads-api

Google 提供了通过 API 获取 TextAd 的不错示例：[https ://code.google.com/p/google-api-adwords-php/source/browse/examples/v201209/BasicOperations/GetTextAds.php](https://code.google.com/p/google-api-adwords-php/source/browse/examples/v201209/BasicOperations/GetTextAds.php)

我预计获取 DynamicSearchAd 就像将第 54 行修改为：

$selector->predicates[] = new Predicate('AdType', 'IN', array('TEXT_AD', 'DYNAMIC_SAERCH_AD'));

但是，对于带有一堆否定关键字、0 个积极关键字和一堆广告的广告系列[在界面中可见]，我的结果是一堆否定关键字和 0 个广告，就像它们不存在一样。我已经在谷歌上搜索了很长时间，但最近关于无关键字广告的帖子是从 2012 年开始的，从那时起，我相信 DynamicSearchAds 从测试版中退出，并不是所有人都可以使用的。

我在示例示例中玩了很多，更改字段[例如删除 Headline 并仅保留 Id 等]，但没有成功。

所以我的问题是，我应该如何修改这个例子来获得 DSA ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T13:33:18.053

您在 Predicate 中不断出现打印错误。

```
'DYNAMIC_SAERCH_AD' must be 'DYNAMIC_SEARCH_AD' 
```

# sql - SQL中的不同选择和排序依据

> ID：14706453
> 
> 赞同：1
> 
> 时间：2013-02-05T11:27:34.553
> 
> 标签：sql

我在 sql 中编写了一个查询，我将只保留一次 Companies.ID，这就是我使用 Distinct 的原因。

```
SELECT DISTINCT Companies.ID, Companies.Company, Abo.Ende 
FROM Companies
LEFT JOIN Abo on Companies.ID = Abo.CompanyID 
ORDER BY Abo.Ende 
```

表 Abo.Ende 有更多 Abo.CompanyID 条目，我希望得到具有最新 Abo.Ende 的不同 Companies.ID 作为结果。注意：Abo.Ende 是一个日期时间字段，我想获得最新的。

我想知道这是否是最好的方法。还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:30:21.183

你需要`group by`，而不是`distinct`：

```
SELECT Companies.ID, Companies.Company, max(Abo.Ende)
FROM Companies
LEFT JOIN Abo on Companies.ID = Abo.CompanyID 
GROUP BY Companies.ID, Companies.Company 
```

对您的`DISTINCT`使用情况的评论：

`DISTINCT`对*整*行进行操作。因此它将返回单行中所有列值的不同组合。如果您包括一个 PK 列（可能`companies.id`在您的情况下）， distinct 不会“删除”任何行，因为 PK 根据定义是唯一的，如果一列在所有行中都是唯一的，那么结果的所有列都是“唯一的”（在`DISTINCT`操作员的意义上）也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:31:26.533

尝试：

```
SELECT Companies.ID, 
       Companies.Company, 
       MAX(Abo.Ende) AS Ende
FROM Companies
LEFT JOIN Abo on Companies.ID = Abo.CompanyID
GROUP BY Companies.ID, 
       Companies.Company 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:42:15.413

```
SELECT Companies.ID, Companies.Company, max(Abo.Ende)
FROM Companies
LEFT JOIN Abo on Companies.ID = Abo.CompanyID 
GROUP BY Companies.ID, Companies.Company 
```

# vb.net - vb.net 在发送 smtp 表单时没有响应

> ID：14706457
> 
> 赞同：0
> 
> 时间：2013-02-05T11:27:48.553
> 
> 标签：vb.net, smtp, progress-bar

我有这个代码：

```
For i = 0 To DataGridView1.RowCount - 2
    If send_email(body, DataGridView1.Rows(i).Cells(8).Value.ToString) Then
        countSentMail = countSentMail + 1
        System.Threading.Thread.Sleep(2 * 1000)
        ProgressBar1.PerformStep()
    End If
Next i

Private Function send_email(ByVal body As String, ByVal emailAddress As String) As Boolean
    Try
        Dim SmtpServer As New SmtpClient()
        Dim mail As New MailMessage()
        SmtpServer.Port = [port]
        SmtpServer.Host = [ip]
        mail = New MailMessage()
        mail.From = New MailAddress([email_from])
        mail.To.Add([email_to])
        mail.Bcc.Add([email_bbc])
        mail.Subject = [subject]
        mail.Body = body
        Mail.IsBodyHtml = True
        SmtpServer.Send(mail)
        send_email = True
    Catch ex As Exception
        send_email = False
    End Try
End Function 
```

当代码运行时，表单/应用程序会“无响应”，直到发送所有电子邮件并且进度条变得无用。如果我注释掉发送功能的内容 - 进度条按我的预期工作。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T10:55:19.560

很抱歉延迟回复。

是的。您`send_email`在增加之前调用`ProgressBar1`

`send_email`使用`SmtpClient.Send()`它是同步的并等待服务器响应。

您可以`SmtpClient.SendAsync()`改用，它将继续执行并在后台等待服务器响应。

# ios - MagicalRecord ios 迁移没有看到迁移的数据

> ID：14706460
> 
> 赞同：0
> 
> 时间：2013-02-05T11:28:03.233
> 
> 标签：ios, core-data, migration, magicalrecord

我正在尝试使用 MagicalRecord 迁移 ios 核心数据数据库。我添加了一些属性并重命名了一个实体。我设置了映射并从它看起来像它的工作。

我遇到的问题是在初始迁移时，迁移的数据没有显示出来。它在 .sqlite 文件中，但在表格中没有看到。如果我关闭应用程序并重新启动，日期就在那里。

有谁知道我是否必须更改我的 fetch 请求中的 inContext 才能在初始迁移时查看这些数据？

# java - 使用标准 se 应用程序测试 glassfish EJB

> ID：14706461
> 
> 赞同：1
> 
> 时间：2013-02-05T11:28:03.960
> 
> 标签：java, glassfish-3, jndi, ejb-3.1

***上下文#1：***

我的电脑上的 glassfish 3.1 服务器。

一个简单的 ejb 部署在服务器上。

在日食（同一台电脑）中：

```
public class App
{
    public static void main(String[] args) throws Exception
    {
    Properties p = new Properties();
    p.setProperty("java.naming.factory.initial","com.sun.enterprise.naming.SerialInitContextFactory");
    String jndiname = "java:global/simpleEjb";
    Context context = new InitialContext(p);
    System.out.println(daoService.sayHello());

} 
```

}

在我的 pom.xml 中：

```
 <dependency>
        <groupId>org.glassfish.appclient</groupId>
        <artifactId>gf-client</artifactId>
        <version>3.1</version>
        <scope>system</scope>
        <systemPath>C:\Java\glassfish3\glassfish\lib\gf-client.jar</systemPath>
    </dependency> 
```

它正在工作。

***真实背景：***

Glassfish 在另一台机器上的 ubuntu 服务器上运行。

所以在我的应用程序中：

```
 Properties p = new Properties();
    p.setProperty("java.naming.factory.initial","com.sun.enterprise.naming.SerialInitContextFactory");
    p.setProperty("org.omg.CORBA.ORBInitialHost","10.12.3.93");
    p.setProperty("org.omg.CORBA.ORBInitialPort","3700"); 
```

*   如果我让我的本地服务器运行：它正在调用我本地服务器上的 ejb ！
*   如果我停止我的本地服务器：没有例外，但我的应用程序永远不会结束（挂起查找 - 即使等待超过 10 分钟）。

我还尝试修改我的 pom.xml 替换以前的依赖项：

```
 <dependency>
        <groupId>org.glassfish.appclient</groupId>
        <artifactId>gf-client</artifactId>
        <version>3.1</version>
        <type>pom</type>
        <scope>compile</scope>
        <exclusions>
            <exclusion>
                <artifactId>tools</artifactId>
                <groupId>com.sun</groupId>
            </exclusion>
            <exclusion>
                <groupId>org.eclipse.persistence</groupId>
                <artifactId>org.eclipse.persistence.core</artifactId>
            </exclusion>
        </exclusions> 
    </dependency> 
```

并添加：

```
<repositories>
    <repository>
        <id>EclipseLink</id>
        <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
    </repository>
</repositories> 
```

但同样的结果...

我要疯了……我不明白发生了什么。

如果我尝试更改主机 ip：

```
Connection failure: socketType: IIOP_CLEAR_TEXT; hostname: 10.12.3.94; port: 3700 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:31:27.623

好的，我得到了解决方案：

我的 /etc/hosts 文件中有一个“问题”。

有 ：

我的服务器 127.0.0.1

我换成了

我的服务器 10.12.3.93

# c# - 获取特定类型的对象

> ID：14706463
> 
> 赞同：2
> 
> 时间：2013-02-05T11:28:09.753
> 
> 标签：c#, linq, nhibernate, inheritance, types

我正在尝试获取具有`E`特定类型对象的 Host 对象，如下所示：

```
return Session.Query<Host>().Where(x => x.E is B).ToList(); 
```

这似乎不起作用，可能是因为 E 属于 A 类型，而 B 继承自 A。继承可能是问题所在。更多（简化）细节：

```
class Host
{
    public A E { get; set; }
}

class B : A
{

} 
```

任何想法为什么上述不起作用？谢谢。

PS：

**请注意，以上应该可以工作 - 我使用了错误的类名！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:32:06.993

```
return Session.Query<Host>().Where(x => x.E.GetType().Equals(typeof(B)).ToList(); 
```

此代码适用于 LinqPad：

```
void Main()
{
    var x = new Host { E = new B() };

    Console.Write(x.E.GetType().Equals(typeof(B)));
}

class A { }
class B : A { }
class Host { public A E { get; set; } } 
```

# java - java中的命令行

> ID：14706467
> 
> 赞同：0
> 
> 时间：2013-02-05T11:28:11.277
> 
> 标签：java

我有通过线程处理文件的代码，我的问题是如何输入文件名来处理它？

什么是参数命令行，我们如何处理它？在此处输入代码

```
import java.io.*;
import java.security.*;

public class DigestThread extends Thread {
    private File input;

    public DigestThread(File input) {
        this.input = input;
    }

    public void run() {
        try {
            FileInputStream in = new FileInputStream(input);
            MessageDigest sha = MessageDigest.getInstance("SHA");
            DigestInputStream din = new DigestInputStream(in, sha);
            int b;
            while ((b = din.read()) != -1)
                ;
            din.close();
            byte[] digest = sha.digest();
            StringBuffer result = new StringBuffer(input.toString());
            result.append(": ");
            for (int i = 0; i < digest.length; i++) {
                result.append(digest[i] + " ");
            }
            System.out.println(result);
        }
        catch (IOException e) {
            System.err.println(e);
        }
        catch (NoSuchAlgorithmException e) {
            System.err.println(e);
        }
    }

    public static void main(String[] args) {
        for (int i = 0; i < args.length; i++) {
            File f = new File(args[i]);
            Thread t = new DigestThread(f);
            t.start();
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:34:51.107

尝试这个

```
public void setFile(File f){
input = f;
}
public static void main(String[] args) {
for (int i = 0; i < args.length; i++) {
JFileChooser fc = new JFileChooser();
setFile(fc.getSelectedFile());
Thread t = new DigestThread(f);
t.start( );
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:37:00.337

在命令行中：

**java DigestThread 文件名1 文件名2**

在 NetBeans 中：

转到项目：**属性**-->**运行--> 并在“****参数**”旁边键入参数

**运行**| **运行主项目**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:39:28.990

您可以将文件名作为命令行参数发送到 Java 程序。

例如，

在 CMD.EXE 中：假设`java.exe`在环境路径变量中`PATH`

`X:\Path\to\your\dotClass\File> java DigestThread path/to/your/filename.ext`

或在 BASH 中：假设`java`在环境路径变量中`PATH`

`/path/to/your/dotClass/file $ java DigestThread path/to/your/filename.ext`

此外，如果您使用的是 Netbeans，请参阅此处[http://netbeanside61.blogspot.in/2009/02/using-command-line-arguments-in.html](http://netbeanside61.blogspot.in/2009/02/using-command-line-arguments-in.html)，了解如何使用命令行参数启动程序。

# plone - 克隆外部发布的内容有时会询问密码

> ID：14706470
> 
> 赞同：2
> 
> 时间：2013-02-05T11:28:12.660
> 
> 标签：plone

我对 Plone 内容有一个奇怪的问题。

1) 有时，在没有 Plone 询问用户名/密码的情况下，未经身份验证的用户无法访问一些外部可见的页面。这些相同的页面以前可以被匿名用户访问。

2) 当经过身份验证的成员在他的导航器中打开这些页面之一时，匿名用户可以再次访问该页面 - 直到同样的问题再次出现，通常在几天后。

我还没有了解这种情况何时/哪些情况`"being available for anonymous"`会`"not available"`发生。内容项的“官方状态”始终保持不变`"externally visible"`（使用默认的 Plone 内网工作流程）。

克隆版本 4.2.0.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:59:46.037

即使页面本身可供匿名用户使用，但编码错误的站点可能包含触发未经授权异常并将用户重定向到登录页面的元素（viewlet、portlet）。例如，自定义新闻列表错误地引用了未发布的新闻项目，并且当匿名用户尝试从该项目读取数据时，会发生未经授权的异常。

调试此问题的最佳方法是在 Zope 管理界面 *error_log* 服务中启用未经授权的异常记录，并查看哪些 Python 代码实际导致登录页面显示。

但是，香草 Plone 安装不应该有这种行为。它涉及到自定义。

2) 的一个可能原因是您的前端 Web 服务器或缓存配置错误，并且它为匿名用户缓存了“登录”页面。出于调试目的，我建议您直接通过 Zope 端口访问该站点，并跳过调试链中的所有前端 Web 服务器以供初学者使用。

# java - 缺少请求参数

> ID：14706471
> 
> 赞同：0
> 
> 时间：2013-02-05T11:28:14.130
> 
> 标签：java, httprequest, jsf-1.2, scriptlet

我们有一个使用 JSF 1.2 制作的应用程序。我们使用 JBoss 4.2 和 Apache。

我们遇到的问题在生产环境中随机出现。

我们在 JSP 页面中有一个静态链接，类似于：

```
<a href="https://myhost/mypage.jsp?param=MYPARAM">link</a> 
```

MYPARAM 使用 BASE64 编码。

在 mypage.jsp 文件中，我们执行以下操作：

```
<body>
<% String param = request.getParameter("param");
   String decoded = new BASE64Decoder().decodeBuffer(param));%>
... 
```

有时，字符串参数为 NULL，因此它会启动 NullPointerException。

如您所见，这很简单。

关于这里发生了什么的一些想法？我已经在谷歌上搜索了几天，但我没有找到关于发生了什么的线索......

我们在代码的另一部分有同样的问题：

```
FacesContext facescontext = FacesContext.getCurrentInstance();
facescontext.getExternalContext().redirect("/myservlet?param=TYPE"); 
```

var TYPE 有时会丢失，在我们代码的其他部分产生另一个 NullPointerException，而它永远不应该为 NULL。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:21:51.600

jsp页面内

```
<a href="http://myhost/mypage.jsp?param=MYPARAM">link</a> 
```

在 mypage.jsp 中

```
String param = request.getParameter("param"); 
```

工作很好

# ios - 如何在不禁用 UIButtons 的情况下禁用 UITableViewCell？

> ID：14706475
> 
> 赞同：0
> 
> 时间：2013-02-05T11:28:40.997
> 
> 标签：ios, objective-c, ios6

我知道这是一个非常简单的问题，我检查了 stackoverflow 中的几乎所有问题，但我找不到合适的解决方案。

我有一个自定义的 UITableViewCell，

我试过

```
[cell setSelectionStyle:UITableViewCellSelectionStyleNone]; 
```

和

```
[cell setUserInteractionEnabled:NO]; 
```

已经，但它仍然会阻止选择单元格内的按钮。我尝试实现几个委托方法，但仍然没有运气。

我希望你们能帮助我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:46:50.850

只需分配`UIButton`，您要作为操作执行的选择器；在`tableView:cellForRowAtIndexPath:`，并且什么都不做`tableView:didSelectRowAtIndexPath:`

评论后编辑：

并放入就是`[cell setSelectionStyle:UITableViewCellSelectionStyleNone];`这样。`indexPath.row == 0``tableView:cellForRowAtIndexPath:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:38:29.927

我真的不知道你为什么想要这种行为，但如果你必须需要它，那么为什么不在按钮下方添加另一个视图，该按钮将所有其他视图作为子视图。不要将按钮作为您刚刚创建的容器的子视图，然后禁用没有按钮的特定容器视图。这样该按钮将被启用，而所有其他视图将被禁用。

# regex - 正则表达式的两个部分中相同数量的字符

> ID：14706481
> 
> 赞同：3
> 
> 时间：2013-02-05T11:29:03.560
> 
> 标签：regex, preg-replace

我将首先说我正在使用 PHP 和 preg_replace

我创建了一些正则表达式`/(={2,6})\W+(={2,6})/`来尝试匹配

```
Lorem Lorem Lorem Lorem Lorem 
==Etymology==

==Links==

Lorem Lorem Lorem Lorem Lorem 
```

( [http://pastebin.com/5kAKQM1x](http://pastebin.com/5kAKQM1x) )

这样我就可以把它变成

```
Lorem Lorem Lorem Lorem Lorem 
==Etymology==
<<My Insert Here>>
==Links==

Lorem Lorem Lorem Lorem Lorem 
```

( [http://pastebin.com/aamRSXU4](http://pastebin.com/aamRSXU4) )

问题是我的正则表达式也匹配

```
Ussher believed the whole creation process occurred on that day.

==Religious views==

===Jewish traditions===
In rabbinic writings and the 
```

( [http://pastebin.com/HJ2Vy7Md](http://pastebin.com/HJ2Vy7Md) )

如何确保`=`两边的 's 符号数量相同？我如何使用`{2,6}`不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:37:26.183

使用反向引用 `/(={2,6})\W+\1/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:40:28.290

使用对前一个捕获的反向引用

```
(={2,6})(\S+)(\1) 
```

（我假设您的意思是 \S+ 而不是 \W+）...

# mysql - 使用 CodeIgniter 使用会话存储购物车

> ID：14706484
> 
> 赞同：0
> 
> 时间：2013-02-05T11:29:11.243
> 
> 标签：mysql, codeigniter, session

我想做一个电子商务网站，不想强迫用户有一个帐户来购买商品，他们可以随时做。

我可以使用 CodeIgniter 中的会话类来执行此操作，并且能够长时间（可能是 6 个月或一年）保持用户会话（即他们的购物车项目）吗？我阅读了关于会话的 CI 用户指南，它说它为您提供了通过在配置文件中将 session_expire_on_close 变量声明为 false 来设置会话不过期的选项，我猜即使在用户关闭后会话也会继续运行浏览器。

每当用户访问该站点或在他们的购物篮中添加一些东西时，我都可以开始会话。然后当他们离开并决定回来时，我可以从我的数据库中的会话表中验证他们的购物车信息并将其返回给他们。

我还想知道是否应该将购物车项目存储在 ci_sessions 表中，作为 user_data 列的用户指南中的示例给出？那就足够了吗？

只是想知道我是否朝着正确的方向前进。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:51:56.447

简短的回答：是的，你在正确的道路上。

我会怎么做（其中一些可能很明显）：

1.  将`session`库添加到`config/autoload.php`，使其自动启动。

2.  根据需要设置“会话变量”部分`config/config.php`- `sess_expiration = some long time`、`sess_expire_on_close = false`等`use_database = true`。

3.  为简单起见，仅在会话中存储产品 ID。下面以一个基本`add_to_cart`函数为例：

    ```
    public function add_to_cart($product_id) {

    // Whenever a user adds an item to their cart, pull out any they already have in there

    $cart_products = $this->session->userdata('cart_products');

    // Add the new item

    $cart_products[] = $product_id;

    // And put it back into the session

    $this->session->set_userdata('cart_products', $cart_products);

    } 
    ```

4.  使用会话中的 product_ids 从您的数据库中提取更多详细信息（例如产品名称）并将其显示在屏幕上。

因为 CI 保留自己的 session_id，所以这种方法应该在每次用户重新访问您的站点时自动重新填充会话，您不需要手动查询 ci_sessions 表或使用标准的 PHP 会话。

以上内容未经测试，但希望对您有所帮助，如果有任何需要澄清的地方，请大声疾呼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:38:41.367

CodeIgniter 使用它自己的会话（[见此](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)），它不会干扰[PHP 会话](http://www.php.net/manual/en/book.session.php)。

因此，您可以使用常规 PHP 会话

```
session_start(); 
```

创建或重新打开现有会话，其 ID 存储在 cookie 中（通常是[`PHPSESSID`](http://php.net/manual/en/function.session-name.php)）。然后使用该会话而不是 CodeIgniter 的会话

```
$_SESSION['MyData'] = 12345; 
```

也许您可以在您的 CodeIgniter 配置中检查 cookie 名称在 config.php 中没有冲突，`sess_cookie_name`.

# java - 如何在另一个类中获取在一个类中声明的编辑文本的数据

> ID：14706487
> 
> 赞同：0
> 
> 时间：2013-02-05T11:29:21.307
> 
> 标签：java, android, android-edittext

我试图从链接中解析数据，并从编辑文本中获取有关城市和州的信息我想获取编辑文本的数据将其保存在一个字符串中，然后在另一个类中使用该字符串。我通过创建一个对象并调用该函数来尽力而为，但它不起作用请有人帮助我

这是获取文本并将该字符串返回给函数的代码。

```
 public String et(){
    location= et.getText().toString();
    return this.location;
} 
```

这是我通过将其保存在字符串中来使用此编辑文本的另一个类

```
 public void test(){
    Main mm= new Main();
    location1= mm.et();
    } 
```

但它在我出错的地方不起作用，我不知道。我知道它的愚蠢问题，但请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:35:51.163

您可以将第一个函数的结果打印到文件中，然后将该文件加载到第二个函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:38:16.467

将位置设置为 a`static String`并使用`Class_Name.location`;在其他类中访问它

```
class myClass {
static String location=null;
 public void et(){
    location= et.getText().toString();
      }
} 
```

//现在考虑方法et被调用并且位置变量已经初始化为一些字符串

```
 class aClass {
    public static void main(String args[])
    {
    System.out.println(myClass.location);
    }

    } 
```

# ios - iOS 上的 Facebook 深度链接冲突

> ID：14706493
> 
> 赞同：0
> 
> 时间：2013-02-05T11:29:36.387
> 
> 标签：ios, facebook, conflict, deep-linking

我有两个 iOS 应用程序使用同一个 Facebook 应用程序来执行 Facebook Connect。一个应用程序必须使用深度链接，而其他应用程序则不应该。问题是我不知道如何处理不应该的情况。

`- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation`当应用程序不应该使用深度链接但它似乎不起作用时，我尝试使用该方法并返回 NO。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:50:03.727

至少您可以尝试使您不想处理 url 的应用程序崩溃。（例如抛出异常）

您是否尝试过指定两个不同的 URL 方案后缀？

# symfony - 如何将 Mysql 中的“BETWEEN”函数翻译为 Doctrine？

> ID：14706495
> 
> 赞同：0
> 
> 时间：2013-02-05T11:29:39.807
> 
> 标签：symfony, doctrine, dql

我正在开发一些代码，需要执行这个查询

（传统的MYSQL）

```
SELECT * FROM `SistemaPuntuacions` WHERE `rankingActual` BETWEEN (SELECT `rankingActual` FROM `SistemaPuntuacions` WHERE `user_id` = $id) -5 AND (SELECT `rankingActual` FROM `SistemaPuntuacions` WHERE `user_id` = $id) +5 ORDER BY `rankingActual`" 
```

基本上，我在 SistemaPuntuacions 中有一个用户列表，以及他们的排名（rankingActual）。我需要显示该用户排名上方的 5 个用户和下方的 5 个用户。

但是教义语言中没有“BETWEEN”，所以我被困在那里。

我能得到一些帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:17:36.867

好吧，实际上在 DQL 中有[一个](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/dql-doctrine-query-language.html)BETWEEN。此代码片段来自官方文档。

```
<?php
$query = $em->createQuery('SELECT u.name FROM CmsUser u WHERE u.id BETWEEN ?1 AND ?2');
$query->setParameter(1, 123);
$query->setParameter(2, 321);
$usernames = $query->getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:32:22.773

您可以像这样使用本机 SQL：

```
$sql = 'SELECT * FROM `SistemaPuntuacions` WHERE `rankingActual` BETWEEN (SELECT `rankingActual` FROM `SistemaPuntuacions` WHERE `user_id` = $id) -5 AND (SELECT `rankingActual` FROM `SistemaPuntuacions` WHERE `user_id` = $id) +5 ORDER BY `rankingActual`';
$rows = $this->container->get('database_connection')->query($sql); 
```

# android - 如何在android中清除微调器值

> ID：14706497
> 
> 赞同：5
> 
> 时间：2013-02-05T11:29:53.257
> 
> 标签：android, spinner

当我在第一个微调器中选择项目（除第一个项目）时，我有两个微调器，它保存在数组中，它在微调器第二个中填充来自 Web 服务的数据。我希望当我再次选择第一个作为微调器标题的数据时，它应该清除微调器第二个中的所有值。我做了所有的把戏，但无能为力。建议我。

我的代码是：

```
 if(spinner1== 0) {
        spinner2List.clear();
        ArrayAdapter<String> adapterEmpty = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, spinner2List);
        adapterEmpty.setDropDownViewResource(R.layout.spinner_layout);

        // Apply the adapter to the spinner
        spinner2.setAdapter(adapterEmpty);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T11:33:06.410

当您选择一个第一个微调器项目时，您可以在第一个微调器 onItemSelected() 方法中使用下面的代码来清除您的第二个微调器。

```
 Spinner2.setAdapter(null) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T11:35:30.217

您已调用`spinner2List.clear();`但尚未通过 using**`notifyDataSetChanged();`**方法通知适配器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-13T13:51:49.263

以下代码用于清除微调器值：-

```
ArrayList<String> allAreaNames;

                allAreaNames.clear();

                ArrayAdapter<String> AreaAdapter = new ArrayAdapter<String>
                        (context, android.R.layout.simple_spinner_item, allAreaNames);

                AreaAdapter.setDropDownViewResource
                        (android.R.layout.simple_spinner_dropdown_item);

                AreaSpinner.setAdapter(AreaAdapter); 
```

# java - 如何知道 virgo 服务器从代码中加载了所有的 bundle

> ID：14706499
> 
> 赞同：1
> 
> 时间：2013-02-05T11:30:01.097
> 
> 标签：java, eclipse-virgo

有没有办法从 java 代码中知道 virgo 服务器已完成加载所有包。

我在其中一个包（不是计划中的最后一个）中有一个代码，需要在服务器启动时激活一些逻辑。

# python-2.7 - 从 Pygame 创建安装包

> ID：14706500
> 
> 赞同：0
> 
> 时间：2013-02-05T11:30:06.590
> 
> 标签：python-2.7, installation, windows-installer, pygame, pyinstaller

这些天我正在做一个蛇游戏作为任务......并希望它会在2-3天内完成......我想知道是否有办法制作安装类型的包......就像一些**设置一样。 exe**，所以我只需要在*windows*上安装游戏然后玩它....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:03:01.147

Normally you do not need a "setup.exe"-type installer for PyGame games.

I use cx_freeze ([http://sourceforge.net/projects/cx-freeze/](http://sourceforge.net/projects/cx-freeze/)) in Cygwin ([http://cygwin.org/](http://cygwin.org/)) to create binaries for my MS Windows Pygame projects. It is a litte tricky to figure out, but it produces excellent executables.

In most cases it is enough to put the directory produced by cx_freeze into a ZIP file and distribute that.

If you really need an installer, you have to create it *after* you have created the binary.

Try one of these:

*   [http://www.installjammer.com/](http://www.installjammer.com/) (discontinued)

*   [http://nsis.sourceforge.net/](http://nsis.sourceforge.net/)

*   [http://www.flexerasoftware.com/products/installanywhere.htm](http://www.flexerasoftware.com/products/installanywhere.htm) (commercial)

# android - 来自 ViewPagerIndicator 的自定义 PageIndicator 没有样式

> ID：14706501
> 
> 赞同：0
> 
> 时间：2013-02-05T11:30:08.913
> 
> 标签：android, viewpagerindicator

`JakeWharton`我正在尝试使用/在选项卡中放置新项目的指示符（显示有新内容的小徽章）`Android-ViewPagerIndicator`。

`PageIndicator`我从库扩展并创建了我的自定义`CustomPageIndicator`. 我复制的大部分东西`TabPageIndicator`。我刚刚更改了 addTab 方法中返回的视图。这个视图是从 xml 膨胀而来的。

当我运行我的应用程序时，创建的指标`CustomPageIndicator`没有任何样式集。应用程序中的所有其他指标都很好。

我尝试将样式和背景设置`ViewPagerIndicator`为自定义 xml 布局的根视图和根视图。结果非常糟糕。我得到了一些颜色，但突出显示不起作用等。

代码：

*   [自定义页面指示器](https://gist.github.com/pzagor2/4713748)
*   [自定义xml布局](https://gist.github.com/pzagor2/4713760)

它的样子：

![在此处输入图像描述](../Images/877c62fc19249347495e74ef3248cbe8.png)

那么我必须添加什么来获得自定义指标的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T08:02:50.743

好的，我在 github 上的这个主题的帮助下让它工作了。 [https://github.com/JakeWharton/Android-ViewPagerIndicator/issues/94](https://github.com/JakeWharton/Android-ViewPagerIndicator/issues/94)

我所做的更改：

- 向 CustomTabView 添加了一个不同的超级调用（这是我膨胀表单 XML 的视图）

```
super(context, null,com.viewpagerindicator.R.attr.vpiTabPageIndicatorStyle); 
```

-将 CustomPageIndicator(Context context, AttributeSet attrs) 构造函数中的超级调用更改为

```
super(new ContextThemeWrapper(context,R.style.Theme_VPI), attrs); 
```

R.style.Theme_VPI 是我的 style.xml 中定义的自定义主题

```
<style name="Theme.VPI" parent="Theme.abstyle">
    <item name="vpiTabPageIndicatorStyle">@style/CustomTabPageIndicator</item>
</style> 
```

# ms-access - 如何在access 2010中创建自定义主键？

> ID：14706502
> 
> 赞同：1
> 
> 时间：2013-02-05T11:30:11.443
> 
> 标签：ms-access, ms-access-2007

我是新手，我正在构建一个表，其主键是申请人 ID，并采用五位数字 xxx07 的格式，其中 xxx 是 100 到 999 之间的任何数字。例如 10107

我在创建此自定义计算 ID 时遇到问题，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:00:04.017

多用户系统中序号比较复杂，例如：[Access VBA: Find max number in column and add 1](https://stackoverflow.com/questions/11949603/access-vba-find-max-number-in-column-and-add-1/11950647#11950647)

如果可能，请考虑将自动编号作为您的主键，并将申请人 ID 添加为具有唯一索引的附加字段。它会让事情变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:39:37.463

请参阅：[增加您的计数器](http://599cd.com/tips/access/incrementing-your-own-counter/?key=AllExperts "增加你的计数器")

而不是他们的公式（只是增加一个），你可能想尝试类似的东西：

```
Private Sub Form_BeforeInsert(Cancel As Integer)
    Dim x As Integer = Nz(DMax("MyCounter", "CustomerT"))
    If x = 0 Then
        MyCounter = 10007
    Else
        MyCounter = x + 100
    End If
End Sub 
```

但它不会停止在 99907。

# sql - 所需形式的 T-SQL 形状表

> ID：14706504
> 
> 赞同：1
> 
> 时间：2013-02-05T11:30:17.150
> 
> 标签：sql, tsql, pivot

我有两张桌子：TableA 和 TableB

表 A：columnBLA、objName、objID

表 B：objID、ColumnIndex、StringValue、NumberValue、DateValue

```
TableA has a row: bla, Object Name, 21

TableB also has data for objID=21:

21, 1, a, NULL, NULL
21, 1, b, NULL, NULL
21, 1, c, NULL, NULL
21, 2, NULL, 11, NULL
21, 2, NULL, 22, NULL
21, 2, NULL, 33, NULL
21, 3, NULL, NULL, 1/1/2012
21, 3, NULL, NULL, 1/1/2013
21, 3, NULL, NULL, 1/1/2014 
```

现在我想将这些数据重塑为以下形式：

```
a, 11, 1/1/2012
b, 22, 1/1/2013
c, 33, 1/1/2014 
```

我已经做到了这一点：

```
Select StringValue, NumberValue, DateValue
From
(Select StringValue
From TableA ta WITH (NOLOCK), TableB tb WITH (NOLOCK)
WHERE ta.objID = tb.objID
AND t.objName = N'Object Name'
AND d.ColumnIndex = 1) As StringValues
,
(Select NumberValue
From TableA ta WITH (NOLOCK), TableB tb WITH (NOLOCK)
WHERE ta.objID = tb.objID
AND t.objName = N'Object Name'
AND d.ColumnIndex = 2) As NumberValues
,
(Select DateValue
From TableA ta WITH (NOLOCK), TableB tb WITH (NOLOCK)
WHERE ta.objID = tb.objID
AND t.objName = N'Object Name'
AND d.ColumnIndex = 1) As DateValues 
```

但我得到了不想要的结果。有人告诉我我应该为此使用 PIVOT，但我的 SQL 知识并没有那么远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:43:28.647

这是同时使用 an`UNPIVOT`和 a 的一种方法`PIVOT`：

```
select objid, stringvalue, numbervalue, datevalue
from
(
  select objid, col, value,
    row_number() over(partition by objid, col order by value) rn
  from
  (
    select a.objid,
      b.stringvalue,
      b.numbervalue,
      b.datevalue
    from tablea a
    left join tableb b
      on a.objid = b.objid
  ) src
  unpivot
  (
    value
    for col in (stringvalue, numbervalue, datevalue)
  ) unpiv
) s
pivot
(
  max(value)
  for col in (stringvalue, numbervalue, datevalue)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/632ab/5)。unpivot从您的单独列*中*获取值并将其转换为行。然后我将 a`row_number()`应用于数据，然后应用数据*透视*表将其转换回列。

不使用`PIVOT`and`UNPIVOT`函数的另一种方法是应用 a`row_number()`然后使用带有`CASE`表达式的聚合函数：

```
select objid,
  max(case when columnindex = 1 then stringvalue end) stringvalue,
  max(case when columnindex = 2 then numbervalue end) numbervalue,
  max(case when columnindex = 3 then datevalue end) datevalue
from
(
  select a.objid,
    b.stringvalue,
    b.numbervalue,
    b.datevalue,
    b.columnindex,
    row_number() over(partition by a.objid, b.columnindex 
                      order by b.columnindex) rn
  from tablea a
  left join tableb b
    on a.objid = b.objid
) src
group by objid, rn 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/632ab/12)

两个查询的结果是：

```
| OBJID | STRINGVALUE | NUMBERVALUE | DATEVALUE |
-------------------------------------------------
|    21 |           a |          11 |  1/1/2012 |
|    21 |           b |          22 |  1/1/2013 |
|    21 |           c |          33 |  1/1/2014 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:33:45.220

使用`CTE`和`row_number()`。[小提琴演示](http://sqlfiddle.com/#!3/630f7/29)

```
;with cte as (
  select row_number() over (partition by columnIndex 
                            order by StringValue, NumberValue, DateValue) rn,
  StringValue, NumberValue, DateValue
  from tableB tb join tableA ta on tb.objId = ta.objid
)
select t1.StringValue, t2.NumberValue, t3.DateValue
from cte t1 join cte t2 on t1.rn = t2.rn 
            join cte t3 on t1.rn = t3.rn 
where not (t1.stringValue is null or t2.numberValue is null or t3.datevalue is null)
order by t1.stringValue 
```

# ruby - 使用 ruby 对数组中中间有数字的文件名进行排序

> ID：14706509
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:30:35.270
> 
> 标签：ruby, sorting

我有一个用例，其中一组文件被命名为：

```
`a1@1x.jpg, a2@1x.jpg, a3@1x.jpg....a10@1x.jpg, a11@1x,jpg,a12@1x.jpg.... a99@1x.jpg,a100@1x.jpg` 
```

当我在数组中读到这个时，我得到的顺序为`(files=Dir.entries("./pics").grep(/^#{fileNamePattern}[0-9]/))`

```
["a1@1x.jpg", "a10@1x.jpg", "a11@1x.jpg".... "a2@1x.jpg", "a20@1x.jpg"...] and so on 
```

**我想根据' a** '之后的数字按升序对该数组进行排序

```
["a1@1x.jpg", "a2@1x.jpg", "a3@1x.jpg"...."a10@1x.jpg", "a11@1x.jpg","a12@1x.jpg"...."99@1x.jpg","a100@1x.jpg"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:57:23.797

```
files.sort_by{|f| f[/\d+/].to_i} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:35:48.090

尝试

```
files=Dir.entries("./pics").grep(/^#{fileNamePattern}[0-9]/)
files = files.sort_by do |f| 
  f =~ /^{#fileNamePattern}(\d*)/   # Match filename, extracting number
  $1.to_i                           # Convert extracted number-string to integer
end 
```

# jakarta-ee - jboss seam中的对话是什么？

> ID：14706510
> 
> 赞同：0
> 
> 时间：2013-02-05T11:30:36.150
> 
> 标签：jakarta-ee, jboss, seam2

我是 Seam 框架的新手，几周以来一直在使用它。我遇到了一些与接缝对话相关的标签。但是我不明白对话的含义以及何时使用它？

任何人都可以通过一个例子给我一些关于这个的细节吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:42:16.320

会话是请求和会话之间的中间上下文。如前所述，它不仅与 SGBD 会话有关`glmlima`。您可以始终使用一个对话，即您希望通过许多请求和页面来维护您的 bean 的状态（例如当您想要购买演出门票时）并且不想将其保留在您的会话中。

对话会持续多久，只要您想使用它，您就可以在会话中进行任意数量的对话。

我希望它有助于理解会话上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:42:32.920

您使用的是哪个 Seam 框架版本？简而言之，会话范围内的持久性上下文允许您编写跨越多个服务器请求的乐观事务，而无需使用 merge() 操作，无需在每个请求开始时重新加载数据，并且无需需要处理 LazyInitializationException 或 NonUniqueObjectException (Seam Docs)。

如果您想了解有关对话的基本概念，我建议您阅读此[Seam Conversation](http://docs.jboss.org/seam/1.1GA/reference/en/html/conversations.html)。

如果您使用的是 Seam 3，它会聚合 JavaEE6 的新特性，比如 CDI。

# ios - 添加视图时 UIScrollView 不会滚动

> ID：14706513
> 
> 赞同：0
> 
> 时间：2013-02-05T11:30:47.030
> 
> 标签：ios, uiview, uiscrollview, scroll, interface-builder

我想在 IB 中构建一个大视图，然后将其添加到我的滚动视图中。为此，我已按照[这些说明](https://stackoverflow.com/questions/9118796/steps-for-creating-uiscrollview-with-interface-builder/9119126#9119126)进行操作。

我的视图在滚动视图中正确绘制，但无法滚动。我记录了内容大小，一切都是正确的：`Content view size: 320.000000 x 714.000000`

当我`[self.view addSubview:self.contentView];`用 `[self.view addSubview:[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 1)]];`滚动视图替换时，正如预期的那样，它是空的，但至少显示了滚动条并且我可以滚动。我在 nib 文件中的视图有问题吗？

这是我的`viewDidLoad`：

```
[super viewDidLoad];
[self.navigationController setToolbarHidden:YES animated:YES];

NSLog(
    @"Content view size: %f x %f",
    _contentView.frame.size.width,
    _contentView.frame.size.height);
[self.view addSubview:self.contentView];
((UIScrollView *)self.view).contentSize = self.contentView.frame.size; 
```

我的代码中唯一的区别是，我在导航控制器中有滚动视图。这有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:06:08.703

问题出在第 4 点，即“将文件所有者的视图出口设置为滚动视图”。而不是在头文件中设置滚动视图的出口。并像这样更改 viewDidLoad 的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [scrollview addSubview:self.contentView];
    scrollview.contentSize = self.contentView.frame.size;
} 
```

然后它的工作完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:39:33.513

它应该如下所示

```
//Considering self.contentView as UIScrollView added in xib
UIView *view=[[UIView alloc] initWithFrame:CGRectMake(0,0,320,700)];
[self.contentView addSubView:view];
[self.contentView setContentSize:CGSizeMake(320,700)]; 
```

上面的代码应该可以正常工作..

# spring - Flyway 不能从 Spring bean 开始

> ID：14706515
> 
> 赞同：1
> 
> 时间：2013-02-05T11:31:04.690
> 
> 标签：spring, flyway, jboss-4.2.x

我有一个问题，似乎无法诊断它。

我正在使用 flyway 和 spring bean 进行迁移。这是示例配置：

```
<bean id="fib.flyway" class="com.googlecode.flyway.core.Flyway" init-method="migrate">
    <property name="dataSource" ref="dataSource" />
    <property name="table" value="FLYWAY_FIB_METATABLE"></property>
    <property name="sqlMigrationPrefix" value="FIB_"></property>
</bean> 
```

我使用 maven 构建我的项目，然后将其部署在本地 Jboss 4.2 服务器上。一切正常。

当我将项目推送到 git 存储库并且 hudson 运行测试时，Flyway 的行为也应如此。但是当它部署在服务器上时，我观察到这个错误：

```
ERROR [org.springframework.web.context.ContextLoader] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fib.flyway' defined in class pa
th resource [pl/com/betacom/fib/dao-context.xml]: Invocation of init method failed; nested exception is java.lang.Illeg
alStateException: zip file closed 
```

这是来自 flyway bean 初始化 + stackTrace 的日志。在未来，我想为不同的应用程序模块使用 Flyway 的多个实例（这就是类路径扫描器发现更多 sql 文件的原因，但我认为情况并非如此）。

```
2013-02-05 12:20:06,705 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Creating shared instance of singleton bean 'fib.flyway'
2013-02-05 12:20:06,705 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Creating instance of bean 'fib.flyway'
2013-02-05 12:20:06,705 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'org.springframework.aop.aspectj.AspectJPointcutAdvisor#0'
2013-02-05 12:20:06,705 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#0'
2013-02-05 12:20:06,705 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#1'
2013-02-05 12:20:06,705 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#2'
2013-02-05 12:20:06,705 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#3'
2013-02-05 12:20:06,715 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Eagerly caching bean 'fib.flyway' to allow for resolving potential circular references
2013-02-05 12:20:06,721 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Returning cached instance of singleton bean 'dataSource'
2013-02-05 12:20:06,722 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] Invoking init method  'migrate' on bean with name 'fib.flyway'
2013-02-05 12:20:06,778 DEBUG [com.googlecode.flyway.core.dbsupport.DbSupportFactory] Database: Oracle 10.2
2013-02-05 12:20:06,782 DEBUG [com.googlecode.flyway.core.Flyway] DDL Transactions Supported: false
2013-02-05 12:20:06,784 DEBUG [com.googlecode.flyway.core.Flyway] Schema: TP2
2013-02-05 12:20:06,836 DEBUG [com.googlecode.flyway.core.metadatatable.MetaDataTableTo20FormatUpgrader] No metadata table upgrade to the Flyway 2.0 format necessary
2013-02-05 12:20:06,841 DEBUG [com.googlecode.flyway.core.metadatatable.MetaDataTableTo202FormatUpgrader] No metadata table upgrade to the Flyway 2.0.2 format necessary
2013-02-05 12:20:06,868 DEBUG [com.googlecode.flyway.core.util.FeatureDetector] Spring Jdbc available: true
2013-02-05 12:20:06,873 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Scanning for resources at 'db/migration' (Prefix: 'FIB_', Suffix: '.sql')
2013-02-05 12:20:06,874 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Scanning URL: jar:file:/opt/SabaWeb/JBoss_Tomcat/server/default/tmp/deploy/tmp2387195156463610954saba.ear-contents/betacom-custom.jar!/db/migration
2013-02-05 12:20:06,875 DEBUG [com.googlecode.flyway.core.util.FeatureDetector] JBoss VFS v2 available: true
2013-02-05 12:20:06,878 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Scanning URL: jar:file:/opt/SabaWeb/JBoss_Tomcat/server/default/tmp/deploy/tmp2387195156463610954saba.ear-contents/flex.jar!/db/migration
2013-02-05 12:20:06,878 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Scanning URL: jar:file:/opt/SabaWeb/JBoss_Tomcat/server/default/tmp/deploy/tmp2387195156463610954saba.ear-contents/recruitment.jar!/db/migration
2013-02-05 12:20:06,879 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Filtering out resource: db/migration/ (filename: )
2013-02-05 12:20:06,879 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Filtering out resource: db/migration/BC_1.01__Init.sql (filename: BC_1.01__Init.sql)
2013-02-05 12:20:06,879 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Filtering out resource: db/migration/BC_1.02__Finder70992_400.sql (filename: BC_1.02__Finder70992_400.sql)
2013-02-05 12:20:06,879 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Filtering out resource: db/migration/REC_0001__Init_DDL_PCK.sql (filename: REC_0001__Init_DDL_PCK.sql)
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.01__Init_DDL.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.02__Init_pck_fib_pks.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.03__Init_pck_fib_pkb.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.04__Insert_PoollessEmployees_Instance.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.05__Repair.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.06__PoolModifications.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.07__Pool_Modification_pck_fib_pks.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.08__Pool_Modification_pck_fib_pkb.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.09__Pool_Modification_ListOfValues.sql
2013-02-05 12:20:06,880 DEBUG [com.googlecode.flyway.core.util.scanner.ClassPathScanner] Found resource: db/migration/FIB_1.10__PoolTaking_Constraint_Remove.sql
2013-02-05 12:20:06,916 ERROR [org.springframework.web.context.ContextLoader] Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fib.flyway' defined in class path resource [pl/com/betacom/fib/dao-context.xml]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: zip file closed
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1337)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:221)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:729)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:381)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderServlet.init(ContextLoaderServlet.java:81)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4071)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4375)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:790)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:770)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:553)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:296)
    at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.apache.catalina.core.StandardContext.init(StandardContext.java:5312)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:296)
    at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:301)
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:104)
    at org.jboss.web.AbstractWebDeployer.start(AbstractWebDeployer.java:375)
    at org.jboss.web.WebModule.startModule(WebModule.java:83)
    at org.jboss.web.WebModule.startService(WebModule.java:61)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy44.start(Unknown Source)
    at org.jboss.web.AbstractWebContainer.start(AbstractWebContainer.java:466)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.interceptor.DynamicInterceptor.invoke(DynamicInterceptor.java:97)
    at org.jboss.system.InterceptorServiceMBeanSupport.invokeNext(InterceptorServiceMBeanSupport.java:238)
    at org.jboss.wsf.container.jboss42.DeployerInterceptor.start(DeployerInterceptor.java:87)
    at org.jboss.deployment.SubDeployerInterceptorSupport$XMBeanInterceptor.start(SubDeployerInterceptorSupport.java:188)
    at org.jboss.deployment.SubDeployerInterceptor.invoke(SubDeployerInterceptor.java:95)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy45.start(Unknown Source)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1015)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy9.deploy(Unknown Source)
    at org.jboss.deployment.scanner.URLDeploymentScanner.deploy(URLDeploymentScanner.java:421)
    at org.jboss.deployment.scanner.URLDeploymentScanner.scan(URLDeploymentScanner.java:634)
    at org.jboss.deployment.scanner.AbstractDeploymentScanner$ScannerThread.doScan(AbstractDeploymentScanner.java:263)
    at org.jboss.deployment.scanner.AbstractDeploymentScanner.startService(AbstractDeploymentScanner.java:336)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy4.start(Unknown Source)
    at org.jboss.deployment.SARDeployer.start(SARDeployer.java:302)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:766)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy5.deploy(Unknown Source)
    at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:482)
    at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
    at org.jboss.Main.boot(Main.java:200)
    at org.jboss.Main$1.run(Main.java:508)
    at java.lang.Thread.run(Thread.java:595)
Caused by: java.lang.IllegalStateException: zip file closed
    at java.util.zip.ZipFile.ensureOpen(ZipFile.java:518)
    at java.util.zip.ZipFile.getEntry(ZipFile.java:251)
    at java.util.jar.JarFile.getEntry(JarFile.java:204)
    at sun.net.www.protocol.jar.URLJarFile.getEntry(URLJarFile.java:90)
    at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:112)
    at sun.net.www.protocol.jar.JarURLConnection.getInputStream(JarURLConnection.java:124)
    at java.net.URL.openStream(URL.java:1007)
    at java.lang.ClassLoader.getResourceAsStream(ClassLoader.java:1163)
    at org.apache.catalina.loader.WebappClassLoader.getResourceAsStream(WebappClassLoader.java:1176)
    at com.googlecode.flyway.core.util.ClassPathResource.loadAsBytes(ClassPathResource.java:112)
    at com.googlecode.flyway.core.resolver.sql.SqlMigrationResolver.extractMigrationInfo(SqlMigrationResolver.java:120)
    at com.googlecode.flyway.core.resolver.sql.SqlMigrationResolver.resolveMigrations(SqlMigrationResolver.java:90)
    at com.googlecode.flyway.core.resolver.CompositeMigrationResolver.collectMigrations(CompositeMigrationResolver.java:219)
    at com.googlecode.flyway.core.resolver.CompositeMigrationResolver.doFindAvailableMigrations(CompositeMigrationResolver.java:157)
    at com.googlecode.flyway.core.resolver.CompositeMigrationResolver.resolveMigrations(CompositeMigrationResolver.java:127)
    at com.googlecode.flyway.core.info.MigrationInfoServiceImpl.refresh(MigrationInfoServiceImpl.java:86)
    at com.googlecode.flyway.core.info.MigrationInfoServiceImpl.<init>(MigrationInfoServiceImpl.java:79)
    at com.googlecode.flyway.core.migration.DbMigrator$1.doInTransaction(DbMigrator.java:137)
    at com.googlecode.flyway.core.migration.DbMigrator$1.doInTransaction(DbMigrator.java:133)
    at com.googlecode.flyway.core.util.jdbc.TransactionTemplate.execute(TransactionTemplate.java:54)
    at com.googlecode.flyway.core.migration.DbMigrator.migrate(DbMigrator.java:132)
    at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:856)
    at com.googlecode.flyway.core.Flyway$1.execute(Flyway.java:820)
    at com.googlecode.flyway.core.Flyway.execute(Flyway.java:1259)
    at com.googlecode.flyway.core.Flyway.migrate(Flyway.java:820)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1413)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1374)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1334)
    ... 154 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:48:21.473

这已在 SCM 中修复，并将作为下一个版本的一部分提供。

# javascript - 使用请求动画帧在画布中绘制线条动画

> ID：14706520
> 
> 赞同：0
> 
> 时间：2013-02-05T11:31:31.097
> 
> 标签：javascript, canvas, requestanimationframe

我正在努力使用请求动画框架创建线条绘制动画。当我使用 setInterval 函数时，一切正常，但我在某处读到请求 ani 帧更加优化，并且间隔中的所有函数都应该以这种方式编写。

所以这是我的代码：

> var topMinX = 3; 变量 topMaxX = 75; var topMinY = 2;
> 变量 topMaxY = 2; 变量最小值；变量最大值；

```
//request animation frame
   (function animate(){
        var t = setTimeout(function(){
            requestAnimFrame(animate);
            var d = render(topMinX,topMaxX,topMinY,topMaxY,true);
        },20);

    })();

     function render(xMin,xMax,yMin,yMax,direction){
        if(direction){
            min = xMin;
            max = xMax
         }else{
            min = yMin;
            max = yMax;
         }      

        if(min<max){
             context.beginPath();
             if(direction){
                context.moveTo(xMin,yMin);
                xMin = xMin+2;
                alert(xMin);
                context.lineTo(xMin,yMax);
             }else{
                context.moveTo(xMin,yMin);
                yMin = yMin+2;
                context.lineTo(xMax,yMin);
             }                   
             context.lineWidth = 4;
             context.stroke();              
        }

     } 
```

问题是 xMin 值不会增加。它总是会警告 5，我希望它在每次迭代中增加 2。基本上我只想画一个正方形，所以我不需要任何对角线移动，这就是我添加方向参数的原因。

我是画布新手并请求 ani 框架，所以任何帮助都会更有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:21:04.213

我不知道方形绘图，但这里的问题似乎在于将变量传递给函数。

您在开始时定义的那些变量在进一步传递给函数时不会改变

你可以在这里查看它是如何工作的：

```
function swap(a, b) {
   var tmp = a;
   a = b;
   b = tmp; //assign tmp to b
}

var x = 1, y = 2;
swap(x, y);

alert("x is " + x + " y is " + y); // "x is 1 y is 2" 
```

还有你在[FIDDLE上的例子](http://jsfiddle.net/79zcp/1/)

它确实画了一条线，并且 topMinX 递增

# css - td 和 height 在 IE 中无法正常工作

> ID：14706522
> 
> 赞同：3
> 
> 时间：2013-02-05T11:31:37.453
> 
> 标签：css, html, internet-explorer

请帮帮我

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body style="margin: 0px; padding: 0px;">
        <table style="width: 600px;">
            <tr>
                <td rowspan="2" style="background: #FF0;">Left<br/><br/><br/><br/><br/><br/><br/><br/><br/>&nbsp;</td>
                <td colspan="2" height="30px" style="background: #FCC;height: 30px;">header</td>
            </tr>
            <tr>
                <td>Content</td>
                <td style="background: #EEE;">Right</td>
            </tr>
        </table>        
    </body>
</html> 
```

它在 Firefox 或 chrome 中工作正常，但 IE 忽略高度属性和带有文本标题的单元格的高度不正确。如何解决？

演示：[小提琴](http://jsfiddle.net/arunpjohny/UzCRc/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:02:44.467

使用 td 内的元素设置高度，如下所示：

```
<div style="display:block;height:30px;">header</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:02:17.237

试试这个代码：

```
 <!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 </head>
 <body style="margin: 0px; padding: 0px;">
    <table style="width: 600px; height:500px">
        <tr>
            <td rowspan="2" style="background: #FF0;">Left</td>
            <td colspan="2" height="80px" style="background: #FCC;">header</td>
        </tr>
        <tr>
            <td>Content</td>
            <td style="background: #EEE;">Right</td>
        </tr>
    </table>        
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:09:07.407

html 5 不再支持 height 并且在 html 4 中已弃用 由于您使用的是 html5 我建议使用

样式=“高度：30px；”

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 </head>
 <body style="margin: 0px; padding: 0px;">
    <table style="width: 600px; height:500px">
        <tr>
            <td rowspan="2" style="background: #FF0;">Left</td>
            <td colspan="2" style="height:30px;background: #FCC;">header</td>
        </tr>
        <tr>
            <td>Content</td>
            <td style="background: #EEE;">Right</td>
        </tr>
    </table>        
</body>
</html> 
```

参考[http://www.w3schools.com/tags/att_td_height.asp](http://www.w3schools.com/tags/att_td_height.asp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-05T12:08:51.133

我认为转换为 DIV 和 CSS 会很好：

```
<style>
    #leftPanel {
        background: #FF0;
        float: left;
        width: 135px;
    }
    #headerPanel {
        background: #FCC;
        height: 30px;
    }
    #contentPanel {
        float: left;
    }
    #rightPanel {
        background: #EEE;
        float: right;
        width: 200px;
        height: 150px;
    }
    #containerPanel {
        width: 600px;
    }
</style>

<div id="containerPanel">
    <div id="leftPanel">
    Left<br/><br/><br/><br/><br/><br/><br/><br/><br/>&nbsp;
    </div>
    <div id="headerPanel">
        header
    </div>
    <div id="contentPanel">
        Some content here...
    </div>
    <div id="rightPanel">
        Right
    </div>
</div> 
```

# vb.net - 是什么导致此代码中的“CA2202：不要多次处理对象”，我该如何重构？

> ID：14706523
> 
> 赞同：5
> 
> 时间：2013-02-05T11:31:38.813
> 
> 标签：vb.net, visual-studio, code-analysis

我有下面的函数，它用于在不添加 XML 声明的情况下序列化对象。我刚刚打开了包含 Visual Studio 2012 的项目，代码分析提出了“CA2202：不要多次处理对象”警告。

现在在其他情况下，我已通过删除不需要的 [object].Close 来修复此警告，但在这种情况下，我看不到需要更改的内容，并且在准确时[对警告的帮助](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CA2202%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v3.5%29;k%28DevLang-VB%29&rd=true)并不完全正确关于它是如何引起的或如何修复它的信息。

究竟是什么导致警告显示，我该如何重构以避免它？

```
''' <summary>
''' Serialize an object without adding the XML declaration, etc.
''' </summary>
''' <param name="target"></param>
''' <returns></returns>
''' <remarks></remarks>
Public Shared Function SerializeElementToText(Of T As New)(target As T) As String
    Dim serializer As New XmlSerializer(GetType(T))
    'Need to serialize without namespaces to keep it clean and tidy
    Dim emptyNS As New XmlSerializerNamespaces({XmlQualifiedName.Empty})
    'Need to remove xml declaration as we will use this as part of a larger xml file
    Dim settings As New XmlWriterSettings()
    settings.OmitXmlDeclaration = True
    settings.NewLineHandling = NewLineHandling.Entitize
    settings.Indent = True
    settings.IndentChars = (ControlChars.Tab)
    Using stream As New StringWriter(), writer As XmlWriter = XmlWriter.Create(stream, settings)
        'Serialize the item to the stream using the namespace supplied
        serializer.Serialize(writer, target, emptyNS)
        'Read the stream and return it as a string
        Return stream.ToString
    End Using 'Warning jumps to this line
End Function 
```

我试过这个，但它也不起作用：

```
 Using stream As New StringWriter()
        Using writer As XmlWriter = XmlWriter.Create(stream, settings)
            serializer.Serialize(writer, target, emptyNS)
            Return stream.ToString
        End Using
    End Using 'Warning jumps to this line instead 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T11:55:58.597

这是一个错误警告，由 XmlWriter 处理您传递的流引起。这使您的 StringWriter 被处理*了两次*，首先是 XmlWriter ，然后是您的 Using 语句。

这不是问题，两次处理 .NET 框架对象不是错误，也不会造成任何问题。如果 Dispose() 方法实施不当，*可能*会出现问题，FxCop 不会冒险不告诉您，因为它不够聪明，无法知道 Dispose() 方法是否正确。

没有任何方法可以重写代码以避免出现警告。StringWriter 实际上没有任何要处理的内容，因此将其从 Using 语句中移出是可以的。但这会产生另一个警告，CA2000。最好的办法就是忽略这个警告。如果您不想再查看它，请使用 SuppressMessageAttribute。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:49:20.973

尝试修改代码以具有 2 个单独的用途：

```
Using stream As New StringWriter()
    Using writer As XmlWriter = XmlWriter.Create(stream, settings)

    End Using
End Using 
```

# hadoop - RuntimeException：在运行我的 UDAF 时使用空指针异常配置对象时出错？

> ID：14706524
> 
> 赞同：1
> 
> 时间：2013-02-05T11:31:40.787
> 
> 标签：hadoop, hive

我一直在尝试编写一个 UDAF 来计算加权平均值。我以类似于现有 UDAF 的方式编写它来计算平均值，但它似乎只适用于我的本地机器。我不确定出了什么问题....有人遇到过类似的问题，以下是生成的错误：

```
java.lang.RuntimeException: Error in configuring object
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:413)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:348)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at                        org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1127)
    at org.apache.hadoop.mapred.Child.main(Child.java:264)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at     sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 9 more
Caused by: java.lang.RuntimeException: Error in configuring object
     at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:93)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
    ... 14 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    ... 17 more
Caused by: java.lang.RuntimeException: Map operator initialization failed
    at org.apache.hadoop.hive.ql.exec.ExecMapper.configure(ExecMapper.java:121)
    ... 22 more
Caused by: java.lang.NullPointerException
at org.apache.hadoop.hive.ql.exec.GroupByOperator.initializeOp(GroupByOperator.java:325)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:360)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:436)
    at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:392)
    at org.apache.hadoop.hive.ql.exec.SelectOperator.initializeOp(SelectOperator.java:62)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:360)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:436)
    at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:392)
    at org.apache.hadoop.hive.ql.exec.TableScanOperator.initializeOp(TableScanOperator.java:166)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:360)
    at org.apache.hadoop.hive.ql.exec.MapOperator.initializeOp(MapOperator.java:441)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:360)
    at org.apache.hadoop.hive.ql.exec.ExecMapper.configure(ExecMapper.java:98)
    ... 22 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:13:40.253

我解决了这个问题..似乎有一些 jar 文件问题......每当我导出一些更改时，有些更改会起作用，而有些则不会，所以我想答案是每次你计划添加时终止你的 hive 会话一个jar文件！：/奇怪，但它的工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-18T06:27:13.733

在我的情况下，我正在运行 Hive 查询（从使用 serde jar 创建的表中选择语句），但是当我进行选择查询时，类路径中缺少 jar。因此，我使用以下命令将 jar 添加到配置单元中的类路径中：-

添加jar /usr/lib/hive/lib/hive-contrib-0.7.0-cdh3u0.jar；

然后进行选择查询它解决了我的问题。

# javascript - Backbone.js 或 Spine.js 是否仅适用于您主动更改记录客户端的“离线”应用程序？

> ID：14706527
> 
> 赞同：0
> 
> 时间：2013-02-05T11:31:43.233
> 
> 标签：javascript, web-applications, backbone.js, spine.js

我正在制作一个网站，在该网站的左侧有一个非常细的垂直条，上面有主菜单。这是您在网站上拥有的唯一内容。然后，当您单击一个菜单项时，主菜单栏的右侧会弹出另一个栏。这是子菜单。然后你可以点击子菜单，出现最后一个菜单。当您单击此菜单上的某个项目时，您会在最后一个菜单的右侧看到一个包含页面内容的大框。此框通常包含图片库或视频列表（例如当您搜索 YouTube 时）。

但是，我希望它反应灵敏，所以我需要在 localStorage 中缓存菜单。所以我想使用一种 MVC 模式。并尝试使用 Spine.js，我将菜单加载到模型 MenuModel 中。现在，我不想一次加载所有可用的 1000 个菜单对象，所以我需要一种方法来预加载我需要的那些。

在我看来，Spine.js 并不适合。我做错了什么，还是 Spine.js 不是像我在这里做的那样用于加载菜单等？我的意思是，从来没有在客户端添加任何记录，也没有修改或删除。仅从服务器获取并存储在模型中。Spine.js 是否更适合您主动更改记录并与服务器同步的应用程序而不是我需要的？

编写自己的课程是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:30:53.257

不确定 Spine.js，但您可以通过创建模型在 Backbone 中执行类似操作`Menu`。

每个菜单都有对父菜单的引用（除了顶部的菜单）。

每当您获取菜单项时，都将它们存储在本地存储中。

每当用户单击菜单项时，您首先检查它是否存储在本地存储中。如果是，请从本地存储中显示它们，否则从服务器中获取它们。

说你必须想出一个策略来找出何时更新你的本地存储。

# xcode - iPad：本地存储数据有多少空间？

> ID：14706529
> 
> 赞同：0
> 
> 时间：2013-02-05T11:31:44.200
> 
> 标签：xcode, ipad, store

对不起，也许我的英语找不到正确的答案。如果问题已经存在，请关闭我的问题。

我即将开始一个新的大项目，一个 iPad 应用程序，它将使用一大堆数据，包括图像、PDF 文件和一般变量，我正在考虑将所有数据存储在本地（在 Sql Lite 中）。

我想知道我可以在 iPad 上保存多少数据？我可以使用所有的硬盘空间吗（基于每个不同 iPad 的不同磁盘度量）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:03:28.153

To your Question -- **I was wondering how many data can I save on an iPad? Can I use all the hard disk space (based on the different measures of disk of each different iPad)??**

Yes, You surely can. All remaining free (Available) space of iPad is available to your iOS App.

Useful link for your reference: [http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html)

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:47:39.903

该应用程序在 App Store 上的大小不能超过 2GB，但下载并安装后，您可以根据需要向其中添加任意数量的附加数据。

# c# - SignalR 的 Ninject 依赖注入

> ID：14706530
> 
> 赞同：5
> 
> 时间：2013-02-05T11:31:57.550
> 
> 标签：c#, asp.net, asp.net-mvc, ninject, signalr

在我的`NinjectWebCommon.cs`文件中，根据`CreateKernel`我正在应用这样的注入的方法

```
private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);

        // Web API Injection
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);                     

        // SignalR Injection
        GlobalHost.DependencyResolver = new SignalR.Ninject.NinjectDependencyResolver(kernel);

        return kernel;
    } 
```

我在想应该为我做这件事，但我在 SignalR 注入时不断收到错误消息

> “不能将类型‘SignalR.Ninject.NinjectDependencyResolver’隐式转换为‘Microsoft.AspNet.SignalR.IDependencyResolver’”

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T14:53:10.950

我不确定你是否找到了答案。从 1.0.0 版开始，他们已经改变了 DI 在 SignalR 中的工作方式，并且 SignalR.Ninject 包不起作用 - 我写了一篇关于此的小博客文章：http: [//myrandomcodesnippets.wordpress.com/2013/03/ 29/ninject-dependency-injection-with-signalr-1-0-1/](http://myrandomcodesnippets.wordpress.com/2013/03/29/ninject-dependency-injection-with-signalr-1-0-1/)

基本上，您需要创建自己的实现，这与 SignalR.Ninject 实现相同：

```
GlobalHost.DependencyResolver = new SignalRNinjectDependencyResolver(kernel); 
```

当您创建新类时，它将希望从 IDependancyResolver 继承不要打扰这个并使用：

```
public class SignalRNinjectDependencyResolver : DefaultDependencyResolver
{
    private readonly IKernel _kernel;

    public SignalRNinjectDependencyResolver(IKernel kernel)
    {
        _kernel = kernel;
    }

    public override object GetService(Type serviceType)
    {
        return _kernel.TryGet(serviceType) ?? base.GetService(serviceType);
    }

    public override IEnumerable<object> GetServices(Type serviceType)
    {
        return _kernel.GetAll(serviceType).Concat(base.GetServices(serviceType));
    }
} 
```

希望这可以帮助。

# sencha-touch-2 - 字段集中的图片库？

> ID：14706531
> 
> 赞同：0
> 
> 时间：2013-02-05T11:32:00.267
> 
> 标签：sencha-touch-2, photo-gallery

我使用字段集设计编辑表单。例如，

```
items: [
    {
        xtype: 'textfield',
        name: 'nameEn',
        label: 'Name (English)',
        placeholder: '',
        autoCapitalize: false,
        required: true,
        clearIcon: true
    },
    {
        xtype: 'textareafield',
        name: 'descriptionEn',
        label: 'Description (English)'
    },
    {
        xtype: 'togglefield',
        name: 'verified',
        label: 'Verified'
    }
] 
```

现在我需要照片（供查看，但将来可以上传/删除）。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:48:26.923

好吧，为了显示，您可以使用`xtype:image`（[此处的文档](http://docs.sencha.com/touch/2-1/#!/api/Ext.Img)），对于上传，您可以使用`xtype:textfield`属性`inputType:'file'`。但是，您应该注意，在 iOS 上，如果不打包应用程序，您可能无法进行文件上传（如[本论坛帖子](http://www.sencha.com/forum/showthread.php?127683-Sencha-Touch-File-Upload)中所述）。如果您希望用户能够使用相机拍照，您可以使用按钮，并在处理程序中使用[`Ext.device.Camera`组件](http://docs.sencha.com/touch/2-1/#!/api/Ext.device.Camera)。

如果您想要多张照片，您可能需要围绕组件使用[`hbox`布局。](http://docs.sencha.com/touch/2-1/#!/api/Ext.layout.HBox)`image`

祝你好运！

编辑：这是一个`panel`带有`hbox`布局和水平滚动的示例。基本上，您可以在 Sencha Touch 中制作的最简单的图片库（我认为）：

```
{
  xtype: 'panel',
  layout: 'hbox',
  scrollable: { direction: 'horizontal' },
  items: [
    {
      xtype: 'image',
      src: 'path/to/image.png'
    },
    {
      xtype: 'image',
      src: 'path/to/another/image.jpg'
    },
    ...
  ]
} 
```

# javascript - ToolTip Parent Fading On .fadeOut - 无意

> ID：14706532
> 
> 赞同：0
> 
> 时间：2013-02-05T11:32:05.230
> 
> 标签：javascript, jquery, selector, parent

我对 Javascipt/Jquery 有点陌生（我早就知道它了，但才真正开始搞砸）。

我正在尝试为以下标记编写一个简单的工具提示函数：

```
<ul class="exec-List">
    <li class="give-tooltip">
        <img src="test.png" /> 

            <span title="Loloscoped" class="tooltip-span">Content</span>

    </li>
    <li>
         <img src="test.png" /> 

            <span title="Loloscoped" class="tooltip-span">Content</span>

   </li>
</ul> 
```

**这是我到目前为止所拥有的：**

```
function simple_tooltip( target_items, target_class, give_class )
{

$( target_items ).each(function( i )
{       

    var current_item = $(this);

    if( current_item.hasClass( 'give-tooltip' ) )
    {
        alert( 'has tooltip class' );   

        var current_child = current_item.children(this);

        if( current_child.hasClass( 'tooltip-span' ))
        {
            current_item.mouseenter(function()
            {
                current_child.fadeIn( 400 );
            });
            current_item.mouseleave(function()
            {
                current_child.fadeOut( 400 );
            });
        }
    }

});

} 
```

问题是，淡入和淡出的选择器是针对整个项目，而不是类“工具提示跨度”的跨度。我相信是这样的，因为当鼠标离开`<li>`元素时，整个元素就`<li>`消失了。当鼠标进入时`<span>`显示出来，但我相信如果`<li>`它也被隐藏它也会淡入。

我在选择孩子时做错了什么？

我会使用：

```
display: none; 
```

在另一个班级：

```
display: block !important; 
```

在 CSS 中，但我需要一个淡入淡出时间，这是你无法通过`display`属性实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:35:19.203

我仍然无法解决它，所以我将我的 JS 更改为从孩子到父母，而不是从父母到孩子。

这是有效的代码：

```
function tooltip( target_tag, parent_class, tooltip_class )
{

$( target_tag ).each(function()
{
        var current_item = $(this);
        var current_parent = current_item.parent(this);
        if( ( current_parent.get(0).tagName == 'LI' ) && ( current_parent.hasClass( parent_class ) ) )
        {
            current_parent.mouseenter(function()
            {
                current_item.fadeIn( 400 );
            }).mouseleave(function()
            {
                current_item.fadeOut( 400 );
            });
        }
});

}

$(document).ready(function()
{
     tooltip( "span", "give-tooltip", "tooltip-span" );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:51:17.423

我相信您想在父 li 悬停时显示带有类**tooltip-span 的跨度，带有类****give-tooltip**

如果我理解正确，您可以用以下代码替换您的代码

```
$('li.give-tooltip').hover(
   function(){
               $(this).find('span.tooltip-span').fadeIn(400);
             },
   function(){
               $(this).find('span.tooltip-span').fadeOut(400);
             }
); 
```

# java - 在 Web 应用程序中嵌入工具来设计表单并连接到应用程序数据

> ID：14706534
> 
> 赞同：0
> 
> 时间：2013-02-05T11:32:05.643
> 
> 标签：java, forms, jsp

对于以下情况，您建议使用哪种工具或方法：

JSP/Servlets Web 应用程序

需要在 Web 应用程序运行时设计表单并将此表单连接到数据库中的实际数据（例如从特定字段列表中选择表单字段）

保存并使用上述表格将数据存储到DB

欢迎任何方法或工具指示

基本思想是： h 有可能从应用程序设计一个表单，然后让用户使用它来存储数据，例如管理员登录，创建/设计一个具有某些字段的字段（将这些字段连接到来自db)，存储该表单，发布它以供用户使用。用户登录，选择刚刚发布的表单，输入数据，保存到数据库

编辑：我收到了反对票，虽然没关系，因为我主要是在寻求建议，请说明是什么让这个问题如此糟糕以至于你需要反对票，而不是暗示我应该改变什么。在我看来，这个问题与我在尝试构建解决方案时面临的特定问题有关。

编辑 2：我需要在应用程序运行时设计表单，并从应用程序再次使用该表单。它与 JSP 页面中的编码表单或与数据库的连接或类似的事情无关。

# php - PHP：将变量名传递给函数时是否需要更改它们？

> ID：14706539
> 
> 赞同：0
> 
> 时间：2013-02-05T11:32:25.553
> 
> 标签：php, variables, parameters

我有一个主体函数和一个在第一个函数中调用的函数。

如下所示，我在第二个函数中使用时没有更改参数名称。

是否需要更改参数名称以在 _display_bar(); 中使用？如果我不这样做会有什么副作用？

```
 function main_func($form, &$form_state, $key, $code) {
    $output = '';
    ...
    $output .= _display_navbar($trans, $status_names);

    return $output
    }

    function _display_navbar($trans, $status_names) {
     $trans = 'bla';
     $status_names = 'another bla';
   $bar = $trans . ':' .$status_names;
     return $bar;
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:35:38.063

变量具有函数作用域。除非您特别声明，否则名称仅在函数内部有效。它们不会渗入其他范围。没有副作用。您不需要使用唯一的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:35:41.440

一旦将变量传递给函数，变量的名称就不再重要了。只有数据通过。所以你的功能可能是这样的：

```
function _display_navbar($foo, $bar) {
   $foo = 'bla';
   return $bar;
} 
```

无论变量名是什么，它都会返回作为第二个参数传递的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:36:25.580

作为函数参数传递的名称*必须在*它们被调用时的范围内。

它们是否与正式函数参数具有相同的名称并不重要，但您必须认识到，仅仅因为它们具有相同的名称并不意味着将它们带入范围。

因此，在您的代码中：

```
function main_func($form, &$form_state, $key, $code) {
    $output = '';
    ...
    $output .= _display_navbar($trans, $status_names); 
```

最后一行将是不正确的，*除非* `$trans`并且`$status_names`当时在范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:41:03.327

其实没关系。但是你最好不要有相同的名字——这很混乱。让我给你举个例子。$s 在第一次调用 sum 后将有 3；7 在第二个函数调用 sum 之后。参数的名称与函数参数名称不同。

完全回答您的问题 - 绝对没有副作用。

```
function main()
{
    $a = 1;
    $b = 2;
    $s = sum($a, $b);

    $d = 3;
    $e = 4;
    $s = sum($d, $e);
}

function sum($first, $second) 
{
    $ret = $first + $second;
    return $ret;
} 
```

# android - 在 Facebook 上分享多张照片

> ID：14706543
> 
> 赞同：0
> 
> 时间：2013-02-05T11:32:29.653
> 
> 标签：android

我想在我的应用程序中分享多张照片。我可以使用 facebook graph API 上传一张照片，但如何分享多张照片

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:14:53.783

Android 不提供用于选择多个图像/图片或任何其他媒体类型*的开箱即用* *Intent 。*来源：[https](https://stackoverflow.com/a/12919585/450534) ://stackoverflow.com/a/12919585/450534 （我通常会把马克墨菲的话当作福音，除非有人可以挑战它）

最接近的意图是`ACTION_SEND_MULTIPLE.`那个。但是，这不是您的选择。

您将需要创建一个*自定义选择器*，类似于 Facebook 在其自己的移动应用程序中所做的那样。

您将在此处获得用于实现自己的多图像选择器的完整功能示例：http: [//vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-多选/](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

最后，要将多张图片一次性上传到 Facebook，您需要发送[Batch Requests](https://developers.facebook.com/docs/reference/api/batch/)。

但是对于您正在寻找的东西，肯定没有现成的解决方案。结合以上所有，然后你会的。但恐怕没有什么直截了当的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-13T21:05:59.117

我设法使用意图在 Facebook 上分享了多张照片。变量“caminhos”是一个 ArrayList < String >，其中包含您要共享的图像的路径。

```
protected void share(String nameApp, String imagePath, String text) {
// TODO Auto-generated method stub

try {
    List<Intent> targetedShareIntents = new ArrayList<Intent>();
    Intent share = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
    share.setType("image/jpeg");
    List<ResolveInfo> resInfo = getActivity().getPackageManager()
            .queryIntentActivities(share, 0);
    if (!resInfo.isEmpty()) {
        for (ResolveInfo info : resInfo) {
            Intent targetedShare = new Intent(
                    android.content.Intent.ACTION_SEND_MULTIPLE);
            targetedShare.setType("image/png"); // put here your mime
            // type
            if (info.activityInfo.packageName.toLowerCase().contains(
                    nameApp)
                    || info.activityInfo.name.toLowerCase().contains(
                            nameApp)) {
                targetedShare.putExtra(Intent.EXTRA_SUBJECT, text);
                targetedShare.putExtra(Intent.EXTRA_TEXT, text);
                ArrayList<Uri> files = new ArrayList<Uri>();
                for(int j= 0;j<caminhos.size();j++){
                    if(!caminhos.get(j).isEmpty()){
                        File file = new File(caminhos.get(j));
                        Uri uri = Uri.fromFile(file);
                        files.add(uri);
                    }
                }

                targetedShare.putParcelableArrayListExtra(Intent.EXTRA_STREAM,
                        files);
                targetedShare.setPackage(info.activityInfo.packageName);
                targetedShareIntents.add(targetedShare);
            }
        }
        Intent chooserIntent = Intent.createChooser(
                targetedShareIntents.remove(0), "Select app to share");
        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS,
                targetedShareIntents.toArray(new Parcelable[] {}));
        startActivity(chooserIntent);
    }
} catch (Exception e) {
} 
```

}

# php - 网格过滤器不适用于多个值

> ID：14706547
> 
> 赞同：0
> 
> 时间：2013-02-05T11:32:33.373
> 
> 标签：php, javascript, jquery, datasource, kendo-ui

我在这个网格上的过滤器有问题：

网格声明：

```
 >$("#grid2").kendoGrid({
                dataSource: {
                    transport: {
                        read: "datos/CargarTipo_Impresion_s.php" //php file with mysql sentence
                    },
                    batch: true,
                    schema: {
                        model: 
                            id: "notipoimpresion",
                            fields: 
                                notipoimpresion: { type: "number" },
                                descripcion: { type: "string" },
                                nogrupo: { type: "number" },
                            }
                        }
                    },
                    //send notipoimpresion like parameter to the page : CargarTipo_Impresion_s.php
                    serverFiltering: true,
                    //filter: { field: "notipoimpresion", operator: "eq", value: "1,2" }, // with this filter is ok, show data
                    //filter: { field: "notipoimpresion", operator: "eq", value: 2 }, //with this filter is ok , show data
                    //filter: { field: "notipoimpresion", operator: "eq", value: '1,2' }, //with this filter is ok, show data

                    filter: { field: "notipoimpresion", operator: "eq", value: value_codigos_tipo_impresion }, //with this filter doesn´t show data
                    //value_codigos_tipo_impresion, can have this values: "1" or "1,2" or "1,2,4", etc.
                   //value_codigos_tipo_impresion, receive the value from a form text 
```

在 CargarTipo_Impresion_s.php 中使用：

> $codigos_tipo_impresion = mysql_real_escape_string($_REQUEST["filter"]["filters"][0]["value"]);

并执行一个mysql语句

在其他带有 php 变量的示例中！

> 过滤器：{字段：“notipoimpresion”，运算符：“eq”，值：“？php var_codigos_tipo_impresion；？” },

当 $var_codigos_tipo_impresion: 可以有值：“1”、“1,2”、“1,2,3·等...

谁能告诉我，为什么不做过滤器？或者有什么问题？

谢谢
JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:03:35.120

示例和解决方案：代码更正和版本 KendoUI CSS 和 JavaScript：v2012.3.1114

jsfiddle.net/jcpaquot/vJTwF/6][1]

# iphone - cell.titleLabel 的字体设置应该放在 cellForRowAtIndexPath: 方法中的什么位置？

> ID：14706553
> 
> 赞同：1
> 
> 时间：2013-02-05T11:32:54.413
> 
> 标签：iphone, ios, objective-c, uitableview

我应该在方法`cell.titleLabel`的`cell == nil`一部分中设置 a 的字体`cellForRowAtIndexPath:`吗？还是之后？我还以`UIImage`编程方式添加了一些标签和一个。`UIImage`不会改变，但标签的值会改变。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *identifier = @"identifier";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
  if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease];

 [cell.titleLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 15.0f]];
      [cell.descriptionLabel setFont:[UIFont fontWithName: @"Asap-Regular" size: 10.0f]];

  }

  **// or should it go here?**

  return cell;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:40:22.797

您在大括号中设置字体是正确的，因为此代码应该执行一次。外部大括号应该是访问您的数据源的代码，例如，当您像这样做某事时 `cell.label.text = [self.dataArray objectAtIndex:i];`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *identifier = @"identifier";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
  if (cell == nil) {
     //executed once per cell
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault          reuseIdentifier:identifier] autorelease];
    [cell.titleLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 15.0f]];
    [cell.descriptionLabel setFont:[UIFont fontWithName: @"Asap-Regular" size: 10.0f]];
  }
//Executed every time
 cell.label.text = [self.dataArray objectAtIndex:i];
  return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:40:36.180

如果单元格字体与行号无关，那么它总是必须进入 if(cell == nil)。

# php - 如何在 php 中将 HTML 动态表作为邮件发送？

> ID：14706563
> 
> 赞同：0
> 
> 时间：2013-02-05T11:33:22.173
> 
> 标签：php, javascript, jquery, html, email

在这里，我有一个代码，例如从 index.php 获取数据，如果用户输入数据，它将显示为表格，并且它应该通过电子邮件发送到一些预定义的邮件。但是在这里我动态地获取数据，我尝试使用 $_REQUEST 和 $_POST 两种方法来获取数据，但是在邮件函数中我试图更改消息参数但是通过 php 标签它没有采用并显示一些语法错误。

请在此处查看代码

```
<?php
$to="xxxxxxx@gmail.com";
$fn="Fisrt Name";
$ln="Last Name";
$name=$fn.' '.$ln;
$from="xxxxx@xxx.com";
$subject = "Welcome to Website";

include('newsmtp/smtpwork.php');

 ?>
 <?php

 $message = 'Dear $firstName, 

 Your Welcome Message.'.'
 <table border=1>

    <tr>
        <td>First Name:</td>
        <td><?php $firstName=$_POST['firstname'];
        echo $firstName;?></td>
    </tr>

    <tr>
        <td>Last Name:</td>
        <td><?php $lastname=$_POST['lastname'];
        echo $lastname;?></td>

    </tr>

    <tr>

        <td>Title:</td>
        <td><?php $title=$_POST['title'];
        echo $title;?></td>
    </tr>

    <tr>

        <td>Address:</td>
        <td><?php $address=$_POST['address'];
        echo $address;?></td>
    </tr>

    <tr>

        <td>Phone Number:</td>
        <td><?php $phone=$_POST['phone'];
        echo $phone;?></td>
    </tr>

    <tr>

        <td>Course Name:</td>
        <td><?php $course=$_POST['coursename'];
        echo $course;?></td>

    </tr>

    <tr>

        <td>Website:</td>
        <td><?php $website=$_POST['website'];
        echo $website;?></td>

    </tr>

</table>

Thanks
xxxxxxxxxxxx
';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:44:44.917

试试这个方法，在 $message 变量之外的变量中分配发布的值，并在 $message 变量中打印变量

```
$firstname  = $_POST['firstname'];
$lastname   = $_POST['lastname'];
$title      = $_POST['title'];
$address    = $_POST['address'];
$phone      = $_POST['phone'];
$course     = $_POST['course'];
$website    = $_POST['website'];

    $message = 'Dear '.$firstName.', 
     Your Welcome Message.'.'
     <table border=1>
        <tr>
            <td>First Name:</td>
            <td>'.$firstname.' </td>
        </tr>
        <tr>
            <td>Last Name:</td>
            <td>'.$lastname.'</td>
        </tr>
     <tr>
        <td>Title:</td>
        <td>'.$title.'</td>
    </tr>
    <tr>
        <td>Address:</td>
        <td>'.$address.'</td>
    </tr>
    <tr>
        <td>Phone Number:</td>
        <td>'.$phone.'</td>
    </tr>
    <tr>
        <td>Course Name:</td>
        <td>'.$course.'</td>
    </tr>
    <tr>
        <td>Website:</td>
        <td>'.$website.'</td>
    </tr>
</table>
Thanks
xxxxxxxxxxxx
';
?> 

$to       ="xxxxxxx@gmail.com";
$subject  = "Welcome to Website";
$headers  = 'From: xxxxxx <noreply@xxxxxxx.com>' . "\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html;\n\tcharset=\"iso-8859-1\"\r\n";

$sent   = @mail($to,$subject,$message,$headers); 

        if ($sent) {
            return true;
        } else {
            return false;
        } 
```

还添加必要的标头以作为 Vinoth Babu 发送 HTML 邮件，Naveen 建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:44:34.143

```
$to = "naveen@gmail.com";
$subject = $name ." is contact ";

 $headers = "MIME-Version: 1.0" . "\n";
 $headers .= "Content-type:text/html;charset=iso-8859-1" . "\n";
@mail($to,$subject,$message,$headers); 
```

将标题设置为 mime 版本和消息类型，例如 text/html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:37:13.013

要发送 HTML 内容/表格，您必须在该邮件的标题中添加以下内容，

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

mail($to, $subject, $message, $headers); 
```

请参考下面的链接，

[邮件功能](http://php.net/manual/en/function.mail.php)

# c# - 在单元测试中使用语句的性能影响

> ID：14706568
> 
> 赞同：3
> 
> 时间：2013-02-05T11:33:28.233
> 
> 标签：c#, wcf, unit-testing

我有一个本地托管的 WCF 服务，它公开了一个返回您传递给它的字符串值的基本方法。

我还有一个单元测试，我尝试调用服务 10000 次，并监控调用完成所需的时间。

我的 using 语句在我的测试中的位置至关重要，如果放置不正确会产生很大的不同，但是我不明白为什么会发生这种情况。

示例 1：（35 秒）

```
 [TestMethod]
    public void TestGetDataOutsideUsing()
    {
        const int count = 10000;
        var operations = new List<int>();
        for (var i = 0; i < count; i++)
            operations.Add(i);
        using (var proxy = new BasicHttpServiceClient())
        {
            var timer = Stopwatch.StartNew();
            System.Threading.Tasks.Parallel.ForEach(operations, x => { proxy.GetData(x.ToString(CultureInfo.InvariantCulture)); });
            timer.Stop();
            Console.WriteLine("{0:###0.0000000} ms", timer.ElapsedMilliseconds);
            Console.WriteLine("{0:###0.0000000} per millisecond", (count / (decimal)timer.ElapsedMilliseconds));
            Console.WriteLine("{0:###0.0000000} per second", (count / ((decimal)timer.ElapsedMilliseconds / 1000)));
            Console.WriteLine("{0:###0.0000000} per minute", (count / ((decimal)timer.ElapsedMilliseconds / 1000 / 60)));
        }
    } 
```

示例 2：（6.2 秒）

```
 [TestMethod]
    public void TestGetDataInsideUsing()
    {
        const int count = 10000;
        var operations = new List<int>();
        for (var i = 0; i < count; i++)
            operations.Add(i);
        var timer = Stopwatch.StartNew();
        System.Threading.Tasks.Parallel.ForEach(operations, x =>
            {
                using (var proxy = new BasicHttpServiceClient())
                {
                    proxy.GetData(x.ToString(CultureInfo.InvariantCulture));
                }
            });
        timer.Stop();
        Console.WriteLine("{0:###0.0000000} ms", timer.ElapsedMilliseconds);
        Console.WriteLine("{0:###0.0000000} per millisecond", (count / (decimal)timer.ElapsedMilliseconds));
        Console.WriteLine("{0:###0.0000000} per second", (count / ((decimal)timer.ElapsedMilliseconds / 1000)));
        Console.WriteLine("{0:###0.0000000} per minute", (count / ((decimal)timer.ElapsedMilliseconds / 1000 / 60)));
    } 
```

第一个示例和第二个示例之间的唯一区别是 using 语句的位置。我原以为在 ForEach 中使用 using 语句会花费更长的时间，但事实证明并非如此。

为什么会这样，上面的哪个例子是测试这个的准确方法？我可能以错误的方式进行此测试吗？

我想做的就是对我的服务进行 10000 次并发调用，看看需要多长时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:48:04.947

在第一个示例中，只有一个`Proxy`对象；在第二个示例中，有多个`Proxy`对象。

我认为这与`using`语句没有直接关系，而是如何使用。在第一个示例中，`Proxy`对象成为并行操作的瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T12:00:24.043

这是两个非常不同的事情：

*   在第一个示例中，您在单个代理对象上运行多个线程，这有效地序列化了处理¹并破坏了并行性。
*   在第二个示例中，每个线程都有自己的代理对象，这允许它独立于（并同时运行）其他线程运行。

工作量更小于等于²，但第二个示例完成得更快，因为更多的工作可以并行完成。

* * *

*¹我假设那里有一个锁，否则你有一个竞争条件。*

*²忽略创建所有这些代理的成本。*

# ruby - Capistrano 部署“任务暂存不存在”

> ID：14706569
> 
> 赞同：2
> 
> 时间：2013-02-05T11:33:31.400
> 
> 标签：ruby, deployment, capistrano, web-deployment

我希望有人可以帮助我，我将进入通过 capistrano 部署站点的第一次体验，但是，每当我运行时，`cap deploy:check`我都会收到错误**，任务“暂存”不存在**，问题是什么？

这是我的 deploy.rb

```
set :application, "Myproject"
set :repository, "******@bitbucket.org/simonainley/myproject.git"

set :scm, :git
set :ssh_options, {:forward_agent =>true}

set :stages, %w(staging production)
set :default_stage, "staging"
require 'capistrano/ext/miltistage' 
```

这是我的 staging.rb

```
role :server, "**.**.**.***"
set :user, "user"
set :password, "password"

set :branch, "dev"
set :web_directory, "/home/***/public_html/staging/****"

namespace :deploy do |
    desc "Deploys code to the staging enviroment."
    task :default_stage, :roles => :server, :except => {:;no_release => true}
        run [
            "cd #{web_directory}",
            "git reset --hard",
            "git checkout #{branch}",
            "git fetch",
            "git pull origin #{branch}" ].join("; ")
    end
end 
```

我假设我缺少设置或变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:36:09.353

你有一个错字；该行应该是：

```
require 'capistrano/ext/multistage' 
```

# package - Backtrack 5 r3“apt-get upgrade”错误 [需要帮助]

> ID：14706573
> 
> 赞同：1
> 
> 时间：2013-02-05T11:33:40.487
> 
> 标签：package, apt-get

```
root@bt:~# apt-get upgrade
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages have been kept back:
  smartphone-pentest-framework
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
1 not fully installed or removed.
After this operation, 0B of additional disk space will be used.
Do you want to continue [Y/n]? y
Setting up w3af (1.2-bt2) ...
tar: pybloomfiltermmap-0.2.0.tar.gz: Cannot open: No such file or directory
tar: Error is not recoverable: exiting now
tar: Child returned status 2
tar: Exiting with failure status due to previous errors
/var/lib/dpkg/info/w3af.postinst: line 4: cd: pybloomfiltermmap-0.2.0: No such file or directory
python: can't open file 'setup.py': [Errno 2] No such file or directory
svn: Working copy 'w3af' locked
svn: run 'svn cleanup' to remove locks (type 'svn help cleanup' for details)
dpkg: error processing w3af (--configure):
 subprocess installed post-installation script returned error exit status 1
Errors were encountered while processing:
 w3af
E: Sub-process /usr/bin/dpkg returned an error code (1)
root 
```

* * *

我已经复制并粘贴了我在更新上面的包装“智能手机-pentest-framework”时遇到的错误。

出了什么问题，问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T08:48:07.597

正如你所看到的“/var/lib/dpkg/info/w3af.postinst: line 4: cd: pybloomfiltermmap-0.2.0: No such file or directory”如此简单的解决方案来更改下载 URL 是他们拥有的诀窍随着存储库移动到[https://svn.code.sf.net/p/w3af/code/trunk](https://svn.code.sf.net/p/w3af/code/trunk) ，他们的脚本中出现错误， 因此只需编辑 w3af.postinst 文件（vi /var/lib/dpkg/info/w3af.postinst）并用[https://svn.code.sf.net/p/w3af/code/trunk](https://svn.code.sf.net/p/w3af/code/trunk)保存文件替换旧网址， 然后再次运行 w3af 设置...

# mobile - 如何开发支持所有平台的移动应用程序

> ID：14706577
> 
> 赞同：2
> 
> 时间：2013-02-05T11:33:51.637
> 
> 标签：mobile

> 我有新的应用程序作为游戏。关于家庭和产品的游戏，如电视冰箱液晶显示器..等。所以使用可以将产品拖到你家的房间里，就像你正在准备你的新家一样，但这将是一个游戏，当用户完成他的家时，他会喜欢并在 Facebook 上分享它。这个游戏将是所有**移动平台都支持的****应用程序**。所以我怎么能做这个解决方案我知道java，但我无法想象我怎么能做到这一点。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:47:12.567

最简单的答案是编写一个 Web 应用程序。每个现代移动设备（可能）都有一个网络浏览器。有两种选择：（我相信你可以找到几十个教程）

*   让您的应用程序位于网站上的某个位置。一旦你有一个网站就不太难了。

*   部署一个可执行文件。尝试谷歌搜索“如何部署 html5 可执行文件”之类的内容。[这](https://stackoverflow.com/questions/9504651/pack-an-html5-app-and-deploy-it-on-the-desktop)看起来可能会有所帮助。

如果每个所需的移动设备都有一个 JVM（我敢打赌他们没有），那么您可以编写一个可以在所有设备上运行的 Java 应用程序。

有专门为此目的设计的程序，尽管我手头没有一个的名字。**

# javascript - JavaScript - 提交事件

> ID：14706578
> 
> 赞同：1
> 
> 时间：2013-02-05T11:33:52.157
> 
> 标签：javascript, jquery, ink.sapo.pt

我正在尝试使用来自 ink.sapo.pt [http://ink.sapo.pt/index.php/js/ui#formvalidator的表单验证器](http://ink.sapo.pt/index.php/js/ui#formvalidator)

我想拦截提交事件来编写我自己的代码，但总是调用以下事件：

```
$("#myform").submit(function() {
   alert('Handler for .submit() called.');
}); 
```

即使 onsubmit 属性为假。

基本上我希望ink.sapo.pt 验证我的表单，但我想在每次验证表单时使用我自己的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:51:23.210

纯java脚本

```
<form id="myform" class="ink-form block" method="post" action="#" 
onsubmit="submitForm(this);">

function submitForm(formObj)
{
    if(SAPO.Ink.FormValidator.validate(formObj))
    {
          //Button Action
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:35:05.027

尝试这个：

```
$("#myform").submit(function(ev) {
   ev.preventDefault();
   alert('Handler for .submit() called.');
}); 
```

基本上，您可以猜到，添加的行所做的是避免指定事件的默认行为。

# html - 页面在 Chrome、FF 中工作正常，在 IE 中完全左对齐

> ID：14706583
> 
> 赞同：0
> 
> 时间：2013-02-05T11:34:01.500
> 
> 标签：html, css, internet-explorer

我正在从模板构建一个网站，我将页面顶部的边框更改为 div 上的边框，这样我就可以包含一些链接......一切都很好，但是当我突然检查 IE 时，整个页面都与左边。

我已经完成了更改，包括从我最初开始使用的模板中恢复 CSS……还没有修复它。我完全糊涂了，我已经逐行通过了这个并且无法弄清楚。

页面可见[http://test.crucialsolutions.net/](http://test.crucialsolutions.net/)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:51:07.413

Using a DocType should fix this issue...

```
<!DOCTYPE html> 
```

and in your body and the class `main` you need to edit the margin like the following:

```
margin: 0 auto; 
```

You don't have a width in `class: main`. So add

```
width: 100%; /* according to your width size like width: 960px; */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:39:25.010

用这个 css = style="width:1000px;margin:0px auto" 使用外部 div

```
<div style="width: 1000px; margin: 0px auto;">
    <!--your code here-->
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:43:27.867

你在“标题类”上没有宽度属性，你必须给出：100% with float left .. 然后是内部 div .. “header_resize” 和其他类似的效果很好

# jquery - 基于字段选项 Jquery 禁用选项卡

> ID：14706584
> 
> 赞同：0
> 
> 时间：2013-02-05T11:34:07.517
> 
> 标签：jquery, tabs

嗨，我在 jquery 中有三个选项卡，

如果选择了以下两个字段，我想禁用第二个和第三个选项卡，第一个选项卡上的选项“否”。

```
<!--    Chest compressions performed    -->
<tr id="ContainerQ110I1039">
    <td>Chest compressions performed&nbsp;</td>
    <td><select name="Q110I1039" id="Q110I1039">
            <option value=""  ></option>
            <option value="0"  >No</option>
            <option value="1"  >Yes</option>
        </select>
    </td>
 </tr>
<!--    Defibrillation delivered    -->
<tr id="ContainerQ111I1040">
    <td>Defibrillation delivered&nbsp;</td>
    <td><select name="Q111I1040" id="Q111I1040" >
            <option value=""  ></option>
            <option value="0"  >No</option>
            <option value="1"  >Yes</option>
        </select>
    </td>
 </tr> 
```

以下是标签

```
<ul class='tabs'>
 <li><a href='#tab1'>2222 calls</a></li>
 <li><a href='#tab2'>Cardiac Arrest</a></li>
 <li><a href='#tab3'>Outcome </a></li>
</ul> 
```

以下是到目前为止的jquery

```
<script language="javascript">
        // Wait until the DOM has loaded before querying the document
        $(document).ready(function(){
            $('ul.tabs').each(function(){
                // For each set of tabs, we want to keep track of
                // which tab is active and it's associated content
                var $active, $content, $links = $(this).find('a');

                // If the location.hash matches one of the links, use that as the active tab.
                // If no match is found, use the first link as the initial active tab.
                $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);

                $active.addClass('active');
                $content = $($active.attr('href'));

                // Hide the remaining content
                $links.not($active).each(function () {
                    $($(this).attr('href')).hide();
                });

                // Bind the click event handler
                $(this).on('click', 'a', function(e){
                    // Make the old tab inactive.
                    $active.removeClass('active');
                    $content.hide();

                    // Update the variables with the new link and content
                    $active = $(this);
                    $content = $($(this).attr('href'));

                    // Make the tab active.
                    $active.addClass('active');
                    $content.show();

                    // Prevent the anchor's default click action
                    e.preventDefault();
                });

            });
        });
    </script> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:11:47.403

使用 jQuery，你也许可以实现这样的东西：

```
$("select").change(function () {
    if ($("#Q110I1039").find(":selected").text() == "No" && $("#Q111I1040").find(":selected").text() == "No") {
        $(".tabs li").not(":first-child").find("a").addClass("disabled");
    }
}); 
```

我们在这里所做的是，每次我们选择一个答案时，我们都会检查两个答案是否都设置为**NO**。如果是这种情况，我们将添加到所有选项卡，除了第一个选项卡，**禁用**类。

然后我们添加此代码以“阻止”选项卡：

```
$(document).on("click", ".disabled", function () {
    return false;
}); 
```

因此，如果您单击它们，则不会发生任何事情。

这是一个[**演示**](http://jsfiddle.net/Dim13i/wQmYJ/1/)

# java - Google App Engine 不显示 .png 文件

> ID：14706590
> 
> 赞同：1
> 
> 时间：2013-02-05T11:34:36.893
> 
> 标签：java, google-app-engine

我正在尝试使用 Eclipse 中的插件通过 Google App Engine 部署一个基本的登录页面。

我已经浏览了这里的大量帖子，但无法使用任何解决方案来解决这个问题。我有一个包含 .png 图像 (/bg) 的文件夹，它们应该显示为我网站的背景。我有另一个用于图标的 .png 文件 (/icons) 文件夹，这些似乎没有问题。这两个文件夹都位于 /img 文件夹中。我在 appengine-web.xml 文件中列出了 .png 文件，但仍然无法正常工作。

```
<static-files>
   <include path="**" />
   <!-- The following line requires App Engine 1.3.2 SDK -->
   <include path="**.nocache.*" expiration="0s" />
   <include path="/**.png" expiration="120d"/>
   <include path="**.cache.*" expiration="365d" />
   <exclude path="**.gwt.rpc" />
</static-files> 
```

我已经多次调整和更改图像名称，现在认为这可能是文件长度/格式问题。似乎没有什么不同。当我在部署后从 Google 下载该应用程序时，整个文件夹似乎已经消失（或从未上传）。我尝试了很多组合我不知道从哪里开始

一切都从 Eclipse / jetty 服务器本地运行，没有问题。

文件名如下所示：bg1at1024.png

它让我发疯，我希望得到一些帮助。

谢谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:44:19.690

你在上传之前检查过你的战争文件的内容吗？可能是 maven（或您正在使用的任何东西）首先不包含此文件夹。

# css - CSS 'lookbehind' 使用 sass / less

> ID：14706595
> 
> 赞同：2
> 
> 时间：2013-02-05T11:34:51.167
> 
> 标签：css, sass, less, modernizr

我目前正在使用 sass 来帮助构建我的 CSS。下面给出一个微不足道的。

```
.container {
    .list {
        .selected {
            background-image : url('highlighted.png');
        }
    }
} 
```

但是我也在使用modernizr（[http://modernizr.com/docs/](http://modernizr.com/docs/)）并且希望尽可能使用CSS3。在此示例中，我想测试`border-radius`, 和使用`border-radius`而不是背景图像的可用性。因此我需要检查元素`borderradius`上是否存在类。`html`是否可以通过某种方式来实现这一目标？或者我是否必须在`.borderradius`课程中再次重复代码，最终结果如下：

```
.container {
    .list {
        .selected {
            background-image : url('highlighted.png');
        }
    }
}

.borderradius .container {
    .list {
        .selected {
            background : yellow;
            border-radius : 10px;
        }
    }
} 
```

在我看来，这在大型项目中看起来很混乱且难以维护。有没有人有更优雅的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T11:37:01.847

您可以使用与号 (&) 引用父选择器，如下所示：

```
.container {
    .list {
        .selected {
            background-image : url('highlighted.png');
            .borderradius & {
                background : yellow;
                border-radius : 10px;
            }
        }
    }
} 
```

这将编译为：

```
.container .list .selected { 
    background-image : url('highlighted.png');
}

.borderradius .container .list .selected {
    background : yellow;
    border-radius : 10px;
} 
```

查看[这篇文章](http://thesassway.com/intermediate/referencing-parent-selectors-using-ampersand)，或者[这篇](http://joeloliveira.com/2011/06/28/the-ampersand-a-killer-sass-feature/)文章，以更深入地解释这有多么有用：

> ...您可以在选择器声明的末尾放置一个尾随 & 字符来代替重复选择器，然后坐下来享受 Sass 的精彩

# apache - 使用 .htaccess 强制使用 HTTPS 和 HTTP

> ID：14706597
> 
> 赞同：0
> 
> 时间：2013-02-05T11:34:57.210
> 
> 标签：apache, .htaccess, mod-rewrite

我在同一台服务器下有多个域，但我的 https 证书仅适用于其中一个。

1.  我需要强制 https：`mydomain1.com`
2.  所有其他域 ( `mydomain2.com`, `mydomain3.com`...) 必须使用 http。

我知道这一定是一个简单的规则，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:39:20.307

我认为你应该编辑你的[主机](https://www.digitalocean.com/community/articles/how-to-set-up-apache-virtual-hosts-on-ubuntu-12-04-lts)文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:01:23.160

如果端口不是 SSL 而域是 mydomain1.com，则强制重定向到 https://

```
 RewriteCond %{SERVER_PORT} !^443$  
 RewriteCond %{HTTP_HOST} mydomain1.com$  
 RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L,QSA] 
```

# json - 如何解决杰克逊中财产的吸气剂定义冲突

> ID：14706600
> 
> 赞同：17
> 
> 时间：2013-02-05T11:35:00.663
> 
> 标签：json, spring, jackson

我有一些模型类。

```
public interface Product extends Serializable {
    public Sku getDefaultSku();

   public void setDefaultSku(Sku defaultSku);
}

public interface Sku extends Serializable {
     public Boolean isTaxable();

    public Boolean getTaxable();

    public void setTaxable(Boolean taxable);
}

public interface PremiumProduct extends Product {
   public Long getProductCode();

   public void setProductCode(Long productCode);
} 
```

无法修改产品和 Sku 实施。我只从产品扩展。之后，我从 Spring MVC 控制器传输 JSON 对象。我的控制器方法是

```
@RequestMapping(value="/productDetail", method=RequestMethod.GET)
    public @ResponseBody Product getCustomerName(@RequestParam String productUrl) throws Exception {

      Product product = catalogService.findProductByURI(productUrl);      

                return product;
    } 
```

我有以下例外。

```
<h2>HTTP ERROR 500</h2>
<p>Problem accessing /productDetail. Reason:
<pre>    Conflicting getter definitions for property "taxable":

org.broadleafcommerce.core.catalog.domain.SkuImpl#getTaxable(0 params) vs org.broadleafcommerce.core.catalog.domain.SkuImpl#isTaxable(0 params)
(through reference chain: com.yoma.product.PremiumProductImpl["defaultSku"])</pre></p>

<h3>Caused by:</h3>
<pre>org.codehaus.jackson.map.JsonMappingException: Conflicting getter definitions for property "taxable":
org.broadleafcommerce.core.catalog.domain.SkuImpl#getTaxable(0 params) vs
org.broadleafcommerce.core.catalog.domain.SkuImpl#isTaxable(0 params)
(through reference chain: com.yoma.product.PremiumProductImpl["defaultSku"])
   at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:740)
   at org.codehaus.jackson.map.ser.StdSerializerProvider.findValueSerializer(StdSerializerProvider.java:344)
   at org.codehaus.jackson.map.ser.impl.PropertySerializerMap.findAndAddSerializer(PropertySerializerMap.java:39)
   at org.codehaus.jackson.map.ser.BeanPropertyWriter._findAndAddDynamic(BeanPropertyWriter.java:463)

   at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:441)
   at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
   at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
   at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:610)
   at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:256)
   at org.codehaus.jackson.map.ObjectMapper._configAndWriteValue(ObjectMapper.java:2566)
   at org.codehaus.jackson.map.ObjectMapper.writeValueAsString(ObjectMapper.java:2088)
   at com.yoma.controller.catalog.ProductController.getCustomerName(ProductController.java:69)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
   at java.lang.reflect.Method.invoke(Method.java:597)
   at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
   at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
   at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
   at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
   at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
   at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
   at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
   at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
   at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:643)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1331)
   at org.broadleafcommerce.cms.web.URLHandlerFilter.doFilterInternal(URLHandlerFilter.java:74)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.profile.web.core.security.SessionFixationProtectionFilter.doFilter(SessionFixationProtectionFilter.java:90)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.core.web.order.security.CartStateFilter.doFilter(CartStateFilter.java:86)

   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.profile.web.core.security.CustomerStateFilter.doFilter(CustomerStateFilter.java:147)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.common.security.handler.CsrfFilter.doFilter(CsrfFilter.java:83)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:144)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.broadleafcommerce.common.web.BroadleafRequestFilter.doFilterInternal(BroadleafRequestFilter.java:146)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:448)
   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131)
   at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)
   at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1067)
   at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:377)
   at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1001)
   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129)
   at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
   at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
   at org.eclipse.jetty.server.Server.handle(Server.java:360)
   at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
   at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)

   at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)
   at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:630)
   at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
   at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
   at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:622)
   at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
   at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.IllegalArgumentException: Conflicting getter definitions for property "taxable":
org.broadleafcommerce.core.catalog.domain.SkuImpl#getTaxable(0 params) vs
org.broadleafcommerce.core.catalog.domain.SkuImpl#isTaxable(0 params)
   at org.codehaus.jackson.map.introspect.POJOPropertyBuilder.getGetter(POJOPropertyBuilder.java:162)

   at org.codehaus.jackson.map.introspect.POJOPropertyBuilder.getAccessor(POJOPropertyBuilder.java:111)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.removeIgnorableTypes(BeanSerializerFactory.java:701)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.findBeanProperties(BeanSerializerFactory.java:558)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.constructBeanSerializer(BeanSerializerFactory.java:430)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.findBeanSerializer(BeanSerializerFactory.java:343)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:287)
   at org.codehaus.jackson.map.ser.StdSerializerProvider._createUntypedSerializer(StdSerializerProvider.java:782)
   at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:735)
   ... 98 more
</pre>
<h3>Caused by:</h3><pre>java.lang.IllegalArgumentException: Conflicting getter definitions for property "taxable": org.broadleafcommerce.core.catalog.domain.SkuImpl#getTaxable(0 params) vs org.broadleafcommerce.core.catalog.domain.SkuImpl#isTaxable(0 params)
   at org.codehaus.jackson.map.introspect.POJOPropertyBuilder.getGetter(POJOPropertyBuilder.java:162)

   at org.codehaus.jackson.map.introspect.POJOPropertyBuilder.getAccessor(POJOPropertyBuilder.java:111)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.removeIgnorableTypes(BeanSerializerFactory.java:701)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.findBeanProperties(BeanSerializerFactory.java:558)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.constructBeanSerializer(BeanSerializerFactory.java:430)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.findBeanSerializer(BeanSerializerFactory.java:343)
   at org.codehaus.jackson.map.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:287)
   at org.codehaus.jackson.map.ser.StdSerializerProvider._createUntypedSerializer(StdSerializerProvider.java:782)
   at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:735)
   at org.codehaus.jackson.map.ser.StdSerializerProvider.findValueSerializer(StdSerializerProvider.java:344)
   at org.codehaus.jackson.map.ser.impl.PropertySerializerMap.findAndAddSerializer(PropertySerializerMap.java:39)
   at org.codehaus.jackson.map.ser.BeanPropertyWriter._findAndAddDynamic(BeanPropertyWriter.java:463)

   at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:441)
   at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
   at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
   at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:610)
   at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:256)
   at org.codehaus.jackson.map.ObjectMapper._configAndWriteValue(ObjectMapper.java:2566)
   at org.codehaus.jackson.map.ObjectMapper.writeValueAsString(ObjectMapper.java:2088)
   at com.yoma.controller.catalog.ProductController.getCustomerName(ProductController.java:69)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
   at java.lang.reflect.Method.invoke(Method.java:597)
   at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
   at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
   at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
   at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
   at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
   at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
   at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
   at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
   at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
   at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:643)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1331)
   at org.broadleafcommerce.cms.web.URLHandlerFilter.doFilterInternal(URLHandlerFilter.java:74)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
   at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.profile.web.core.security.SessionFixationProtectionFilter.doFilter(SessionFixationProtectionFilter.java:90)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.core.web.order.security.CartStateFilter.doFilter(CartStateFilter.java:86)

   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.profile.web.core.security.CustomerStateFilter.doFilter(CustomerStateFilter.java:147)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.broadleafcommerce.common.security.handler.CsrfFilter.doFilter(CsrfFilter.java:83)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:144)
   at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
   at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.broadleafcommerce.common.web.BroadleafRequestFilter.doFilterInternal(BroadleafRequestFilter.java:146)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1302)
   at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:448)
   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131)
   at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)
   at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
   at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1067)
   at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:377)
   at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
   at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1001)
   at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129)
   at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
   at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
   at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
   at org.eclipse.jetty.server.Server.handle(Server.java:360)
   at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
   at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)

   at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)
   at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:630)
   at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
   at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
   at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:622)
   at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
   at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
   at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
   at java.lang.Thread.run(Thread.java:619)
</pre> 
```

那么，我怎样才能从我的控制器中获取我的 JSON。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-05T14:13:46.373

例如，您可以尝试忽略`isTaxable()`以解决冲突：

```
@JsonIgnore
public Boolean isTaxable(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-07T01:45:56.773

根据程序员布鲁斯的回答，我的问题可以通过以下解决方案来解决。

我写了 MixIn 类，

```
abstract class IgnoreSetValueMixIn {    
  @JsonIgnore public abstract Boolean getTaxable();
  @JsonIgnore public abstract Boolean isTaxable();
  @JsonManagedReference  public abstract Sku getDefaultSku();
  @JsonBackReference public abstract Product getDefaultProduct();
} 
```

在控制器中，

```
@RequestMapping(value="/productDetail", method=RequestMethod.GET)
    public @ResponseBody String getCustomerName(@RequestParam String productUrl, HttpServletResponse response) throws Exception {
    ObjectMapper mapper = new ObjectMapper();

            mapper.getSerializationConfig().addMixInAnnotations(Sku.class, IgnoreSetValueMixIn.class);
            mapper.getSerializationConfig().addMixInAnnotations(SkuImpl.class, IgnoreSetValueMixIn.class);

return mapper.writeValueAsString(product);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-05T16:52:18.850

> 产品和 Sku 实现无法修改。

[杰克逊混音注释](https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations)来救援！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T10:35:50.193

你也可以试试[Genson](http://code.google.com/p/genson/) lib。要在春季启用它，您需要注册消息转换器，然后一切都应该正常工作。

```
<mvc:annotation-driven>
  <mvc:message-converters>
    <bean class="com.owlike.genson.ext.spring.GensonMessageConverter"/>
  </mvc:message-converters>
</mvc:annotation-driven> 
```

# android - 使用 ksoap2 调用 Web 服务非常慢（只是有时）

> ID：14706602
> 
> 赞同：0
> 
> 时间：2013-02-05T11:35:06.570
> 
> 标签：android, ksoap2

在我的应用程序中，我使用 ksoap2 库调用了一些 Web Serices (WS)，并且几乎所有时间它都运行得很快。但有时，WS 的调用很慢。

我有这样的代码：

```
beforecall = System.currentTimeMillis();
androidHttpTransport1.call(NameSpaces.NAMESPACE+UserWSMethodName.GETUSERINFO,envelope1);
Log.d("soapdebug","call duration="+(System.currentTimeMillis()-beforecall)); 
```

通常我会得到 1 或 2 秒（最大），但有时我会得到 11 秒......当呼叫太慢时，所有 WS 都会发生这种情况，一段时间后（例如几个小时）它会恢复正常并变得快...

在wireshark中，我看到对于每个调用，`call()`调用方法之间经过的时间和服务器使用[SYN]数据包建立TCP连接的时间大约是10秒，所以在这段时间内时间是花了，但我不明白为什么有时会发生这种情况。

什么可能导致问题？可能是设备配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:13:41.487

我为解决这个问题所做的只是重新启动连接移动设备的路由器。

# php - 在php中单引号真的比双引号更优化吗？

> ID：14706605
> 
> 赞同：0
> 
> 时间：2013-02-05T11:35:23.957
> 
> 标签：php, string, double-quotes

我正在编写一些真正对时间敏感的生产应用程序，它应该为数百万客户提供服务。

服务器端是用 php 编写的，并且有一些文件包含大约 200 个预定义字符串，长度约为 5 到 25 个字符，这些字符串都是双引号，其中没有任何变量。例如：

```
 define("DEFCON_ONE", "id");
 define("DEFCON_TWO", "name");
 ....... 
```

将这些字符串从双引号更改为单引号是否真的节省了一些 CPU 周期，因为 php 解释器不会搜索 \n 或其中的变量？

这些应用程序对时间非常敏感，所以如果是这种情况，我会去更改每个文件和每一行代码，但我只想在去更改所有内容之前确定。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:54:20.193

In a micro optimization way, yes.

Double quotes force PHP to parse it even if there aren't variables inside the string.

But don't worry, we have a lot of ways to optimize our code before to attack micro optimizitaion :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:38:33.077

即使存在，性能影响也可以忽略不计。据说单引号更快，因为其中包含的任何内容都不会被解析为变量或特殊字符。WHere 作为双引号解析特殊字符和变量。例如：

```
$var = 'world';

echo 'hello\n$var';

echos:
hello\n$var

echo "hello\n$var";

echos
hello
world 
```

就个人而言，如果您没有在字符串中使用特殊字符或变量，请坚持使用单引号，否则只需使用双引号。但是性能不应该是这方面的担忧。过早的优化我的朋友。

# jquery - Jquery将变量传递给函数中的数组

> ID：14706615
> 
> 赞同：0
> 
> 时间：2013-02-05T11:35:46.227
> 
> 标签：jquery, parameters

我有一个我无法弄清楚的 javascript 变量的小问题。我正在尝试将变量传递给 Jquery 函数参数，但它不起作用。

原始代码：

```
$(".bt-fs-dialog").fSelector({
  max: 25,
  excludeIds: [],
  getStoredFriends: [],
  closeOverlayClick: true,

}); 
```

现在我想将值传递给 getStoredFriends 字段。文档说应该像这样添加：getStoredFriends：[12345678,5484545]，

所以这就是我所做的：

```
var testresponse = "193102451,731800273";

$(".bt-fs-dialog").fSelector({
  max: 25,
  excludeIds: [],
  getStoredFriends: testresponse,
  closeOverlayClick: true,

}); 
```

这行不通。没有值被添加到函数中。我还尝试将值作为数组传递：

```
var testresponse = new Array();
testresponse[0] = "193102451";
testresponse[1] = "731800273";

$(".bt-fs-dialog").fSelector({
  max: 25,
  excludeIds: [],
  getStoredFriends: testreponse,
  closeOverlayClick: true,

}); 
```

这也行不通。谁能解释我如何将值传递给这个函数？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:38:27.493

`[12345678,5484545]`是一个数字数组，所以这可能就是这个函数所期望的。

尝试

```
var testresponse = []; // better than new Array()
testresponse.push(193102451); // using push you don't have to specify the index
testresponse.push(731800273); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:43:23.217

试试这个 var testresponse = [193102451,731800273]

这应该工作

testresponse[0] 将给出 193102451 和 testresponse[1] 将给出 731800273

# php - paypal IPN成功发送

> ID：14706620
> 
> 赞同：0
> 
> 时间：2013-02-05T11:35:52.687
> 
> 标签：php, paypal, paypal-ipn

[我已经使用代码https://github.com/Quixotix/PHP-PayPal-IPN](https://github.com/Quixotix/PHP-PayPal-IPN)设置了一个简单的 IPN

但是，当我运行以下

```
<?php
    include('ipnlistener.php');

    $listener = new IpnListener();
    $listener->use_sandbox = true;

    try {
        $verified = $listener->processIpn();
    } catch (Exception $e) {
        // fatal error trying to process IPN.
        exit(0);
    }

if ($verified) {

    if ($verified) {

     mail('myemail@gmail.com', 'Verified IPN', $listener->getTextReport()); 
    }
    else {
    /*
    An Invalid IPN *may* be caused by a fraudulent transaction attempt. It's
    a good idea to have a developer or sys admin manually investigate any 
    invalid IPN.
    */
    mail('myemail@gmail.com', 'Invalid IPN', $listener->getTextReport());
    }
}
?> 
```

我没有从我的服务器收到任何邮件说它从 Paypal 获得了 IPN

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:40:42.547

您需要详细调试，一种方法是将每一行之后的日志写入文件，然后检查导致问题的步骤，也可以直接浏览IPN URL并检查无效IPN的电子邮件是否正常工作。邮件服务器配置可能存在问题。

# ios - 在 iOS 上录制的视频倒置播放

> ID：14706629
> 
> 赞同：1
> 
> 时间：2013-02-05T11:36:42.693
> 
> 标签：ios, opengl-es, avassetwriter

在我的工作中，我通常使用`CVOpenGLESTextureCacheCreateTextureFromImage`从 fob 获取缓存纹理。然后我用assetwriter写了一个mov文件，mov播放得很好，但视频是颠倒的。

我确实搜索了互联网，发现我应该编码：

```
assetWriterInput.transform=CGAffineTransformMakeScale(1.0, -1.0); 
```

它工作正常，但是当我在 Windows XP 上播放它时，它仍然是颠倒的。我发现它只在 iOS 或非 Apple 操作系统上的 Quicktime 视频播放器上播放良好。

那么是什么原因呢？为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:41:17.687

mov``CGAffineTransformMaskScale' merely sets some meta information in the`容器在播放时对视频图像应用一些图像转换。然而，只有 Quicktime 播放器才会尊重此标志。

图像首先是颠倒的，这是由于 OpenGL 假设图像原点位于左下角，而大多数视频图像格式将其放置在左上角，如果这些假设发生冲突，这当然会翻转图像。理智的解决方案是实际翻转图像，而不仅仅是设置此元数据标志。

翻转图像很容易，因为您只需在中间步骤中反转扫描线。

# ios - 禁用触摸但不是 UITextField 上的所有用户交互

> ID：14706630
> 
> 赞同：9
> 
> 时间：2013-02-05T11:36:45.987
> 
> 标签：ios, uitextfield, touches

我有一个 UITextField 但我想控制它何时聚焦以及何时不聚焦。

为了实现这一点，我需要能够阻止该文本字段上的触摸事件。我知道我可以在它前面放一个按钮并手动执行它，但我想知道是否有任何方法可以禁用对元素的触摸。

非常感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-09T21:46:45.493

似乎没有办法使用 UITextField 的属性来阻止触摸。我通过在文本字段上放置一个 UIView 来阻止触摸来解决这个问题。我使用属性检查器将 UIView 设置为“清除颜色”。非常适合我的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:15:59.510

房产怎么样`userInteractionEnabled`？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-27T15:01:20.990

我必须在编辑时进行光标交互，所以在 becomeFirstResponder() 之前我设置 isUserInteractionEnabled = true 并在结束编辑时将其设置为 false

```
@IBAction func editTapped(_ sender: UIButton) {
    textField.isUserInteractionEnabled = true
    textField.becomeFirstResponder()
}

func textFieldShouldEndEditing(_ textField: UITextField) -> Bool {
    print(textField.textValue)

    textField.isUserInteractionEnabled = false

    return true
} 
```

# c++ - 我的新 Unique_ptrs 的所有权？

> ID：14706631
> 
> 赞同：0
> 
> 时间：2013-02-05T11:36:54.597
> 
> 标签：c++, smart-pointers, unique-ptr, ownership-semantics

根据我最近在一次工作面试中的建议，我被建议研究 C++11 的 unique_ptr 功能，作为自动垃圾收集的一种手段。所以我正在使用一个较旧的项目，并用 unique_ptrs 替换指向使用“new”关键字创建的对象的原始指针。但是，我认为我已经解决了所有权问题。

在我的 mainclass.cpp（发布在下面）中，请将您的注意力转移到 init 函数和 3 个 unique_ptrs 到我创建的新实例化对象上。命名为“bg”、“bg2”和“theGrid”。（它们下面被注释掉的声明是它们以前是如何完成的，切换回这个方法，程序运行得很好。）

但是，使用 unique_ptrs，函数 void display() 中的行：

```
theGrid->doGridCalculations();//MODEL 
```

产生访问冲突。这也是序列中第一次取消引用任何指向的对象，这让我相信 unique_ptr 的所有权已经在某个地方丢失了。但是，unique_ptrs 本身永远不会传递到另一个函数或容器中，并且仍然在 mainclass.cpp 的范围内，因此我没有看到任何机会使用 std::move(theGrid) 来将所有权转移到它需要的地方成为。

主类.cpp：

```
#include <stdio.h>
#include <GL/glut.h> 
#include <math.h>
#include "Block.h"
#include "dStructs.h"
#include "Grid.h"
#include "Texture.h"
#include "freetype.h"
#include <Windows.h>

//////////////////////////////////////////////////////
///Declare a couple of textures - for the background
//////////////////////////////////////////
Texture* bg;
Texture* bg2;
//and theGrid
Grid* theGrid;

/////////////////////////////////////////////////
///Declare our font
/////////////////////////////////////////////////
freetype::font_data scoreFont;
/////////////////////////////////////////////////////////
//Initialize the variables
///////////////////////////////////////////////////////
typedef dStructs::point point;
const int XSize = 755, YSize = 600;

point offset = {333,145};
point mousePos = {0,0};

void init(void)
{
    //printf("\n......Hello Guy. \n....\nInitilising");
    glMatrixMode(GL_PROJECTION);    
    glLoadIdentity();
    gluOrtho2D(0,XSize,0,YSize);

    //////////////////////////
    //initialise the fonts
    /////////////////////////

    try{
    scoreFont.init("Visitor TT2 BRK Regular.ttf", 20);
    } catch (std::exception &e) {
        MessageBox(NULL, e.what(), "EXCEPTION CAUGHT", MB_OK | MB_ICONINFORMATION);

    }
    ///////////////////////////////////////////////////////////////
    ///bg new MEMORY MANAGED EDITION
    //////////////////////////////////////////////////////////////////
    unique_ptr<Texture> bg(new Texture(1024,1024,"BackGround.png"));
    unique_ptr<Texture> bg2(new Texture(1024,1024,"BackGround2.png"));
    unique_ptr<Grid> theGrid(new Grid(offset));
    /////////////////////////////////////////////////
    /// Old bad-memory-management style of pointed objects
    /////////////////////////////////////////////////
    //bg = new Texture(1024,1024,"BackGround.png");
    //bg2 = new Texture(1024,1024,"BackGround2.png");
    //theGrid = new Grid(offset);

    glClearColor(0,0.4,0.7,1);

    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);//activate the alpha blending functionality
    glEnable(GL_BLEND);
    glLineWidth(2);         // Width of the drawing line
    glMatrixMode(GL_MODELVIEW); 
    glDisable(GL_DEPTH_TEST);
    //printf("\nInitialisation Complete");

}

void myPassiveMouse(int x, int y)
{
    //Stupid OGL coordinate system
    y = YSize - y;
    mousePos.x = x;
    mousePos.y = y;
    printf("\nthe mouse coordinates are (%f,%f)",mousePos.x, mousePos.y);
}

void displayGameplayHUD()
{
    ///////////////////////////////
    //SCORE
    //////////////////////////////
    glColor4f(0.7f,0.0f,0.0f,7.0f);//set the colour of the text
    freetype::print(scoreFont, 100,400,"SCORE: ");
    glColor4f(1.0f,1.0f,1.0f,1.0f);//Default texture colour. Makes text white, and all other texture's as theyre meant to be.

}

//////////////////////////////////////////////////////
void display()
{
    ////printf("\nBeginning Display");
    glClear(GL_COLOR_BUFFER_BIT);//clear the colour buffer

    glPushMatrix();
    theGrid->doGridCalculations();//MODEL

    point bgLoc = {XSize/2,YSize/2};
    point bgSize = {XSize,YSize};
    bg2->draw(bgLoc,bgSize);
    theGrid->drawGrid();//DISPLAY
    bg->draw(bgLoc,bgSize);

    if(theGrid->gridState == Grid::STATIC)
    {
        theGrid->hoverOverBlocks(mousePos);//CONTROLLER
    }

    displayGameplayHUD();

    glPopMatrix();

    glFlush();  // Finish the drawing
    glutSwapBuffers();
    ////printf("\nFresh Display Loaded");

    glutPostRedisplay();
}

int main(int argc, char** argv) 
{
  glutInit(&argc, argv);    // GLUT Initialization 
  glutInitDisplayMode(GLUT_RGBA|GLUT_DOUBLE); // Initializing the Display mode
  glutInitWindowSize(755,600);  // Define the window size
  glutCreateWindow("Gem Miners");   // Create the window, with caption.
  init();   // All OpenGL initialization

  //-- Callback functions ---------------------
  glutDisplayFunc(display);
  //glutKeyboardFunc(mykey);
  //glutSpecialFunc(processSpecialKeys);
  //glutSpecialUpFunc(processSpecialUpKeys);
  glutMouseFunc(mymouse);

  glutPassiveMotionFunc(myPassiveMouse);

  glutMainLoop();   // Loop waiting for event 
} 
```

我认为所有权需要在某个时候转移，但我不知道在哪里。

在此先感谢，盖伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:45:51.163

这些是全局原始指针：

```
Texture* bg;
Texture* bg2;
//and theGrid
Grid* theGrid; 
```

这些是完全不相关`unique_ptr`的，在 init 函数中是局部的。

```
unique_ptr<Texture> bg(new Texture(1024,1024,"BackGround.png"));
unique_ptr<Texture> bg2(new Texture(1024,1024,"BackGround2.png"));
unique_ptr<Grid> theGrid(new Grid(offset)); 
```

当`unique_ptr`s 超出范围时，它们将被销毁。它们指向的对象也会被销毁，因为`unique_ptr`它的析构函数就是这样做的。在该过程中，没有任何时候涉及崩溃的全局原始指针。它们被`unique_ptr`同名的本地 s 隐藏。

您应该将全局原始指针更改为`unique_ptr`s。然后你可以像这样在 init 函数中设置它们（不要重新声明它们）：

```
bg.reset(new Texture(1024,1024,"BackGround.png"));
bg2.reset(new Texture(1024,1024,"BackGround2.png"));
theGrid.reset(new Grid(offset)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:40:22.250

您`unique_ptr<Grid>`的 in`init`是该函数的本地函数。意志在`unique_ptr<Grid>`函数结束时超出范围，摧毁自己和`Grid`它拥有的东西。似乎您实际上想要一个全局对象`unique_ptr<Grid> theGrid;`来替换`Grid* theGrid;`您目前拥有的对象。然后`init`你可以这样做：

```
theGrid.reset(new Grid(offset)); 
```

`theGrid`被访问的是`display`全局`theGrid`类型`Grid*`。

`unique_ptr`对于您尝试创建的其他 s，情况完全相同。

当然，与全局对象相比，传递这些对象会好得多，但是您对 GLUT 的使用使这有点痛苦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T11:41:27.023

您在`init`函数中创建的唯一指针不会修改在文件范围内声明的指针，文件范围内的指针默认初始化为 0 或`nullptr`（我不太精通 C++11，所以我不确定哪一个）。

您在`init`函数中所做的是创建三个*新*对象，其名称会在文件范围内*隐藏*对象，因此当您在文件范围内使用这些对象时，您会遇到访问冲突，因为它们从未设置为指向任何有效的对象。

# scala - Scala中带方括号的私有范围（私有[...]）

> ID：14706634
> 
> 赞同：38
> 
> 时间：2013-02-05T11:37:04.253
> 
> 标签：scala, syntax, scope

在查看 Gatling 源代码时，我遇到了以下语法：

```
private[http] def build = {
  // ...
} 
```

方括号内的语法是什么？

当我在 IDE 中单击它时，它是完全限定包 ( `com.excilys.ebi.gatling.http`) 的别名，但我找不到该别名的定义位置。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-05T11:42:49.267

请参阅[scala 参考](http://www.scala-lang.org/docu/files/ScalaReference.pdf)，特别是第 5.2 章。摘录：

> 私有修饰符可以与模板中的任何定义或声明一起使用。此类成员只能从直接封闭的模板及其伴随模块或伴随类（第 5.4 节）中访问。它们不被子类继承，也不能覆盖父类中的定义。
> 
> **修饰符可以用标识符 C（例如 private[C]）限定**，它必须表示包含定义的类或包。标有此类修饰符的成员分别只能从包 C 内的代码或只能从类 C 及其配套模块（第 5.4 节）内的代码访问。此类成员也仅从 C 中的模板继承。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-01-23T18:25:10.120

简而言之：这用于**范围保护**：

*   private[C] 意味着访问是私有的“直到”C，其中 C 是相应的包、类或单例对象。

与受保护相同[C]

*   protected[C]：访问受保护“最多”C，其中 C 是相应的包、类或单例对象。

# android - 相对布局中的 ImageView 和 listview

> ID：14706635
> 
> 赞同：1
> 
> 时间：2013-02-05T11:37:12.437
> 
> 标签：android, android-layout

我正在尝试将 imageview 和 listview 放在两个单独的相对布局中，但是当我将图像添加到 imageview 时，图像的高度应该小于应有的高度，它会在图像和 listview 之间添加一些黑色空间。但是当我把 textview 它工作正常。这是代码片段..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<RelativeLayout android:id="@+id/header"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight">
<ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginTop="-10dp"
        android:src="@drawable/bar" />

</RelativeLayout>

<ListView
android:id="@+id/list11"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_marginTop="65dp"
android:cacheColorHint="#000000"
android:focusable="false"
android:listSelector="@color/itemcolor1"
android:scrollbars="vertical"
android:scrollingCache="false" >
</ListView>

</RelativeLayout> 
```

谢谢各位，烦死了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T05:04:01.450

谢谢大家的回答，帮助解决了很多，但是这些答案需要稍作调整，所以我写在这里以供其他人将来参考

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
  android:layout_height="match_parent" >
  <ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="65dp"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:scaleType="fitXY"
   android:layout_weight="2"
    android:layout_marginTop="-10dp"
    android:src="@drawable/bar" />

  <ListView
   android:id="@+id/list11"
   android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1"
    android:cacheColorHint="#000000"
    android:focusable="false"
    android:layout_weight="8"
    android:scrollbars="vertical"
    android:scrollingCache="false"
    android:listSelector="@color/itemcolor1">
    </ListView>

  </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:45:23.160

请试试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginTop="-10dp"
        android:scaleType="center"
        android:src="@drawable/bar" />

<ListView
android:id="@+id/list11"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_below="@+id/imageView1"
android:layout_marginTop="65dp"
android:cacheColorHint="#000000"
android:focusable="false"
android:listSelector="@color/itemcolor1"
android:scrollbars="vertical"
android:scrollingCache="false" >
</ListView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:05:11.550

尝试这个...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:weightSum="10"
android:orientation="vertical"
 >
<ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="0dip"
       android:layout_marginTop="-10dp"
        android:scaleType="fitXY"
        android:layout_weight="2"
        android:src="@drawable/actionbar_background"
        android:adjustViewBounds="true"
        />

<ListView
android:id="@+id/list11"
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_alignParentLeft="true"
android:layout_below="@+id/imageView1"
android:cacheColorHint="#000000"
android:focusable="false"
android:layout_weight="8"
android:scrollbars="vertical"
android:scrollingCache="false" >
</ListView>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:39:27.710

尝试设置图像视图的比例类型：

```
android:scaleType="fitXY" 
```

# sql-server - 用户管理 - SQL Server 内置 vs 自定义用户列表

> ID：14706640
> 
> 赞同：0
> 
> 时间：2013-02-05T11:37:29.087
> 
> 标签：sql-server, asp.net-mvc-3, sql-server-2008

我刚刚开始指定一个项目，该项目将是一个相当高级的数据库，具有相当简单的 MVC 前端，可通过 Internet 访问，我不确定如何处理用户，我可以看到两个选项：

**选项 1** - 使用 SQL Server 内置登录名/用户来处理用户身份验证，并使用内置用户访问权限来控制谁可以访问什么（几乎所有内容都将是选择或存储的过程）。

**选项 2** - 使用我自己的用户列表（带有散列加盐密码）和我自己的访问控制列表（可能使用 proc 名称并`OBJECT_NAME(@@PROCID)`传递给另一个 proc）并通过应用程序配置文件对数据库进行所有写入/读取，并访问所有程序/意见。

我已经搜索但找不到任何理由我应该选择一个而不是另一个，任何人都可以分享一个链接或提供一个比另一个更好的原因（或者如果两者都有明显的问题）？

如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:49:46.940

如果通过连接池使用 SQL 身份验证（每个用户的选项 1），您将获得相对较差的性能。您将为每个用户获得池，但这仍然可能意味着 100 或 1000 的连接。有一些方法可以解决这个问题，但解决方案开始让选项 1 像选项 2 一样工作，所以你不妨使用选项 2。

我已经看到一些解决方案创建 SQL 帐户来为每个用户进行初始身份验证（通过基于单个应用程序的 SQL 帐户），然后其余的像选项 2 一样工作（再次通过基于单个应用程序的 SQL 帐户）。这些案例使用了大量的 SQL 帐户，因此每个用户都可以拥有一组视图，并模仿 Schema。由于 Schemas & Aliases 自 SQL Server 2005 以来一直可用，因此不再值得选择选项 2。

最后，也不要使用 SQL Server 应用程序角色——它们是不好的安全实践。[Brian Kelly 在一篇关于它们的文章 ( http://www.sqlservercentral.com/articles/Security/sqlserversecurityprosandconsofapplicationroles/1116/](http://www.sqlservercentral.com/articles/Security/sqlserversecurityprosandconsofapplicationroles/1116/) )中介绍了一些问题（正反两面）。

# jquery - jquery 远程验证 - 异步？

> ID：14706641
> 
> 赞同：0
> 
> 时间：2013-02-05T11:37:34.797
> 
> 标签：jquery

`async = true`有人可以解释设置和`async = false`下面的片段之间的区别吗？我了解`asynchronous`（在后台验证）的概念，但不了解表单验证的含义。

```
'data[orderPrefix]': {
                required: true,
                alphanum: true,
                remote: {
                    url: site_url+"shops/validate",
                    async: true,
                    data: {
                        task: function() {
                            return $("#task").val();
                        },
                        shopID: function() {
                            return $("#shopID").val();
                        }
                    }
                }
            }, 
```

我有一个表单，其中多个字段具有 js 验证（标准和远程）并且某些规则根本没有捕获无效数据。将 async 从 false 更改为 true 后，一切正常。

jquery 文档对此并没有真正解释太多，我想了解为什么我的更改“有效”。

编辑：我使用 1.9 的 bassistance.de 插件和 jquery 1.7.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:01:44.453

似乎这是关于异步编程的一般问题，而不是关于验证的问题。所以也许你想阅读它：

[http://cs.brown.edu/courses/cs168/f12/handouts/async.pdf](http://cs.brown.edu/courses/cs168/f12/handouts/async.pdf) [http://www.slideshare.net/clutchski/writing-asynchronous-javascript-101](http://www.slideshare.net/clutchski/writing-asynchronous-javascript-101) [https://softwareengineering.stackexchange.com/问题/135762/学习异步编程](https://softwareengineering.stackexchange.com/questions/135762/learning-asynchronous-programming)

虽然对于那些对异步验证感兴趣的人，结帐：http: [//verifyjs.com](http://verifyjs.com)

# windows - Java 应用程序在 JRE 更新后阻止服务器重新启动

> ID：14706643
> 
> 赞同：8
> 
> 时间：2013-02-05T11:37:48.623
> 
> 标签：windows, java

JRE 更新后出现问题。

如果我启动了 Java 应用程序并启动系统重新启动 - Windows 无法自动停止此 Java 应用程序并且我收到以下消息： *“此程序正在阻止 Windows 重新启动”。* 如果我按下取消，那么我可以看到阻止重新启动的 Java 应用程序挂起。此问题会影响我的 Java 应用程序和 jconsole 等应用程序。

在 JRE 更新之前，在**JRE 1.6.0_26**上一切正常。我首先在**JRE 1.6.0_36**上遇到了这个问题。但它也发生在 1.6.0_39 上。

PS：我有 Windows Server 2008 R2 Interprise

有没有人有同样的问题或可以建议在这种情况下该怎么做？谢谢。

**更新：** 我已经实现了以下附加钩子：

```
Runtime.getRuntime().addShutdownHook(new Thread() {
public void run() {
logger.log("SHUTDOWN - BEGIN");
((Window) view).setVisible(false);
logger.log("SHUTDOWN - Visible");
((Window) view).dispose();
logger.log("SHUTDOWN - Dispose");
System.exit(0);
}
}); 
```

之后，具有此类附加挂钩的应用程序在系统重新启动时正常关闭，但我发现如果我们只是关闭应用程序（通过按退出或“x”）Java VM 不会终止（我们可以在 taskmgr 中看到 javaw 进程）。

从日志文件中我可以看到该程序永远不会离开 dispose() 函数。如果我评论 dispose() 并只留下 System.exit(0) Java VM 仍然无法终止。

**更新 2：** 已为此问题创建票证。我们收到了**Oracle 的以下回复：“问题重现并确认。”**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T17:19:54.097

matts，这发生在所有 Java 应用程序上，它已经在只有 2008 OS 和 JRE 6U37 的服务器上进行了测试。如果我们启动 Java 控制面板，然后尝试重新启动服务器，我们会收到 Windows 消息。

如果应用程序被最小化，我们不会收到消息。

消息“此程序正在阻止 Windows 重新启动”

如果您选择取消选项，我们将获得“强制重启”或“取消”选项，Java 控制面板挂起并且 javaw.exe 进程以 25% cpu 运行，这是在四处理器服务器上，所以我假设单个处理器，它将以 100% cpu 运行。

奥利弗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T02:42:59.197

我能想到几件事：

1）您是否实现了shutdownhook（），当它从操作系统获得QUIT信号时可能会尝试做某事？

2）当你的应用程序挂起时，做一个线程转储（ctrl + break for windows-pls google？）并检查里面发生了什么。你应该得到一些线索。

3) Java 应用程序中仍然处于活动状态的非守护线程（如果有）也可能会阻止 JVM 退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:51:35.767

**这个问题由 Oracle 修复**。修复将包含在即将发布的 JRE 版本（1.6.0_42？）中。

作为**您的应用程序的****解决方法**，您可以使用 addhook。像这样的东西：

 **```
 Runtime.getRuntime().addShutdownHook(new Thread() {
    public void run() {
    ((Window) view).setVisible(false);
    Runtime.halt(0);
    }
    }); 
```

您应该使用**Runtime.halt(0)**而不是 System.exit(0)，因为 Java Machine 在当前版本的 JRE 中拒绝在 System.exit(0) 之后停止。**

# c++ - 是否有 boost make_shared_array 和 make_scope 或只有 make_shared？

> ID：14706647
> 
> 赞同：0
> 
> 时间：2013-02-05T11:37:57.807
> 
> 标签：c++, boost, c++03

有没有提升`make_shared_array`和`make_scope_ptr`或只有[`make_shared`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/smart_ptr.htm)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:48:12.827

`boost::make_scoped_ptr`行不通，因为您无法从`scoped_ptr`. 至少，不是没有明确调用`swap`.

而对于 Boost 1.53，没有太多理由使用`shared_array`，因为您可以只使用`shared_ptr`数组类型。所以只需使用`boost::make_shared`.

# php - Zend_Validate_Db_RecordExists 排除逻辑问题

> ID：14706653
> 
> 赞同：2
> 
> 时间：2013-02-05T11:38:21.220
> 
> 标签：php, zend-framework, zend-validate

我有一个工作申请表，管理员需要从某些用户 ID 列表中进行选择。该列表仅包含“雇主”类型的用户 ID，但是我想验证管理员输入，因此如果他手动插入一个不存在的 ID 或用于与“雇主”不同类型的用户，验证应该失败。我认为执行此操作的代码是：

```
new Zend_Validate_Db_RecordExists(
    array(
        'table' => 'users',
        'field' => 'id',
        'exclude' => "mode != 'employer'"
    )
) 
```

所以，我正在搜索表用户中的所有记录，不包括那些 mode != 'employer' - 如果存在这样的记录，其中 id 等于从输入中选择的记录，它通过验证。但是，上面的代码不起作用 - 我必须这样做`'exclude' => "mode = 'employer'"`，所以 exclude 实际上等于 where 语句。我对这里逻辑的理解是错误的——有人能告诉我为什么吗？

PHP：5.2.17，Zend：1.10.4

编辑：（对@ro ko 询问的评论，因为它可能会清除问题）

请在此处找到表格和示例代码：http: [//pastebin.com/C7AXMNTZ](http://pastebin.com/C7AXMNTZ)。据我了解，这应该对 Joker（是雇主）返回有效，但对 Kingpin（不是雇主）和 Poison Ivy（不在数据库中）返回错误 - 正如您所看到的结果不是我所期望的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:39:00.890

**一种）`'exclude' => "mode != 'employer'"`**

```
 $id = new Zend_Form_Element_Select("id");
    $id->setRegisterInArrayValidator(false);
    $id->addValidator(new Zend_Validate_Db_RecordExists(array(
        'table' => 'villains',
        'field' => 'id',
        'exclude' => "mode != 'employer'"
    ))); 
```

产生以下查询：

```
SELECT `villains`.`id` 
    FROM `villains` 
    WHERE (`id` = :value) AND (mode != 'employer') 
    LIMIT 1 
```

**二）`'exclude' => "mode = 'employer'"`**

```
 $id = new Zend_Form_Element_Select("id");
    $id->setRegisterInArrayValidator(false);
    $id->addValidator(new Zend_Validate_Db_RecordExists(array(
        'table' => 'villains',
        'field' => 'id',
        'exclude' => "mode = 'employer'"
    ))); 
```

产生以下查询：

```
SELECT `villains`.`id` 
    FROM `villains` 
    WHERE (`id` = :value) AND (mode = 'employer') 
    LIMIT 1 
```

**C）`'exclude' => array("field" => "mode", "value" => "employer")`**

```
 $id = new Zend_Form_Element_Select("id");
    $id->setRegisterInArrayValidator(false);
    $id->addValidator(new Zend_Validate_Db_RecordExists(array(
        'table' => 'villains',
        'field' => 'id',
        'exclude' => array(
            "field" => "mode",
            "value" => "employer"
        )
    ))); 
```

产生以下查询：

```
SELECT `villains`.`id` 
    FROM `villains` 
    WHERE (`id` = :value) AND (`mode` != 'employer') 
    LIMIT 1 
```

# 结果

你想要**B**。这*令人*困惑，并且可以说组件的逻辑和行为是倒退的。尽管如此，您想要的行为来自示例 B。

# 附录

我们可以破解一个测试（我真的是指一起破解）来检查上述是否按预期工作。

test1 和 test2 都通过了，但是正如您从提供者那里看到的那样，它们都产生了不同的结果。

```
class SO14706653Test extends PHPUnit_Framework_TestCase
{
    /**
     * @var Zend_Test_PHPUnit_Db_Connection
     */
    public $dbConnection;

    public function getRowCount($tableName) {
        $query = "SELECT COUNT(*) FROM ".$this->dbConnection->quoteSchemaObject($tableName);
        return (int) $this->dbConnection->getConnection()->query($query)->fetchColumn();
    }

    // hack a very quick setup for tests
    public function setup() {
        $app = new Zend_Application(APPLICATION_ENV, APPLICATION_PATH . '/configs/application.ini');
        $app->bootstrap();
        $dbAdapter = $app->getBootstrap()->getResource('db'); /* @var $db Zend_Db_Adapter_Pdo_Mysql */
        $this->dbConnection = new Zend_Test_PHPUnit_Db_Connection($dbAdapter, 'unittests');

        $dbAdapter->exec("CREATE TABLE IF NOT EXISTS `villains` (
              `id` int(11) NOT NULL AUTO_INCREMENT,
              `name` varchar(255) NOT NULL,
              `mode` varchar(255) NOT NULL,
              PRIMARY KEY (`id`)
            ) ENGINE=InnoDB  DEFAULT CHARSET=latin1");

        $dbAdapter->exec('DELETE FROM villains'); // clean out db data

        $dbAdapter->exec("
            INSERT INTO `villains` VALUES(1, 'Joker', 'employer');
            INSERT INTO `villains` VALUES(2, 'Kingpin', '');
            INSERT INTO `villains` VALUES(3, 'Penguin', '');
        ");
    }

    // ensure the above setup is working as expected
    public function assertPreConditions() {
        $this->assertEquals(3, $this->getRowCount('villains')); 
    }

    public function provideTest1()
    {
        return [
            // form data        is valid?       isRequired?
            [['id' => '1'],     false,          false],
            [['id' => '2'],     true,           false],
            [['id' => '3'],     true,           false],
            [['id' => ''],      true,           false],
            [[],                true,           false],
            [['id' => '856'],   false,          false],
            [['id' => '856'],   false,          true],
            [['id' => ''],      false,          true],
            [[],                false,          true],
        ];
    }

    public function provideTest2()
    {
        return [
            //  form data       is valid?       isRequired?
            [['id' => '1'],     true,           false],
            [['id' => '2'],     false,          false],
            [['id' => '3'],     false,          false],
            [['id' => ''],      true,           false],
            [[],                true,           false],
            [['id' => '856'],   false,          false],
            [['id' => '856'],   false,          true],
            [['id' => ''],      false,          true],
            [[],                false,          true],
        ];
    }

    /**
     * @dataProvider provideTest1
     */
    public function test1(array $data, $isValid, $isRequired)
    {
        $form = new Zend_Form();
        $id = new Zend_Form_Element_Select("id");
        $id->setRegisterInArrayValidator(false);
        $id->addValidator(new Zend_Validate_Db_RecordExists(array(
            'table' => 'villains',
            'field' => 'id',
            'exclude' => "mode != 'employer'"
        )));
        $id->setRequired($isRequired);
        $form->addElement($id);

        // produces the query
        // SELECT `villains`.`id`
        // FROM `villains`
        // WHERE (`id` = :value) AND (mode != 'employer')
        // LIMIT 1

        $this->assertSame($isValid, $form->isValid($data));
    }

    /**
     * @dataProvider provideTest2
     */
    public function test2(array $data, $isValid, $isRequired)
    {
        $form = new Zend_Form();
        $id = new Zend_Form_Element_Select("id");
        $id->setRegisterInArrayValidator(false);
        $id->addValidator(new Zend_Validate_Db_RecordExists(array(
            'table' => 'villains',
            'field' => 'id',
            'exclude' => "mode = 'employer'"
        )));
        $id->setRequired($isRequired);
        $form->addElement($id);

        // produces the query
        // SELECT `villains`.`id` 
        // FROM `villains` 
        // WHERE (`id` = :value) AND (mode = 'employer') 
        // LIMIT 1

        $this->assertSame($isValid, $form->isValid($data));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:08:39.997

您在排除选项中传递一个数组。例如。

```
$this->getElement('username')->addValidator(
    new Zend_Validate_Db_NoRecordExists(
        array(
        'table' => 'user', 
        'field' => 'username', 
        'exclude' => array(
                'field' => 'username', 
                'value' => $username
            )
        )
    )
); 
```

[在这里查看更多信息。](http://framework.zend.com/manual/1.12/en/zend.validate.set.html#zend.validate.Db "Zend 验证")

编辑：再次阅读问题后，我发现我实际上并没有回答。我要给出的唯一其他建议是使用文档中的 quoteInto 语句。

```
$email     = 'user@example.com';
$clause    = $db->quoteInto('email != ?', $email);
$validator = new Zend_Validate_Db_RecordExists(
    array(
        'table'   => 'users',
        'field'   => 'username',
        'exclude' => $clause
    )
); 
```

这里还有一个关于 Zend_Validate_Db_RecordExists 的另一个问题的链接，它有一个很好的答案。

[如何修改 zend Db_RecordExists 验证器 where 子句？](https://stackoverflow.com/questions/9529500/how-to-modify-zend-db-recordexists-validator-where-clause)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:24:39.357

我想你在这里感到困惑。验证器的逻辑很好。

> 如何？
> 好吧，排除这里会否定您的条件。

```
'exclude' => "mode = 'employer'" 
```

或者

```
'exclude' => array(
                'field' => 'mode', 
                'value' => 'employer'
            ) 
```

被解释为验证器应该对非`mode = employer`条件有效。

**编辑：**如果您[在手册中](http://framework.zend.com/manual/1.12/en/zend.validate.set.html#zend.validate.Db)看到说明：“上面的示例将检查表以确保除了 id = $user_id 包含值 $username 的记录之外没有其他记录。” 我认为这句话应该为你清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T14:09:02.993

根据文档（搜索`The above example will check the table to ensure no records other than the one where id = $user_id contains the value $username.`）， exclude 选项确实可以用作 WHERE 语句。

我只能说，尽管为这个功能使用这样的关键字是个好主意，但无论谁都有一种邪恶的幽默感。

# audio - JAudioTagger 删除曲目的前几秒

> ID：14706654
> 
> 赞同：0
> 
> 时间：2013-02-05T11:38:20.877
> 
> 标签：audio, groovy, id3

我编写了一个简单的 Groovy 脚本（如下），使用 JAudioTagger 库在 mp3 文件中设置四个 ID3v1 和 ID3v2 标记字段的值。该脚本成功地进行了更改，但它也删除了一些文件的前 5 到 10 秒，其他文件不受影响。这不是一个大问题，但如果有人知道一个简单的解决方法，我将不胜感激。所有文件都来自同一个源，都有v1和v2标签，我在源文件中找不到明显的区别来解释它。

```
import org.jaudiotagger.*

java.util.logging.Logger.getLogger("org.jaudiotagger").setLevel(java.util.logging.Level.OFF)

Integer trackNum = 0
Integer totalFiles = 0
Integer invalidFiles = 0
validMP3File = true

def dir = new File(/D:\Users\Jeremy\Music\Speech Radio\Unlistened\Z Temp Files to MP3 Tagged/)

dir.eachFile({curFile ->
    totalFiles ++
    try {
    mp3File = org.jaudiotagger.audio.AudioFileIO.read(curFile)
    } catch (org.jaudiotagger.audio.exceptions.CannotReadException e) {
        validMP3File = false
        invalidFiles ++
    }

    // Get the file name excluding the extension
    baseFilename = org.jaudiotagger.audio.AudioFile.getBaseFilename(curFile)

    // Check that it is an MP3 file
    if (validMP3File) {
        if (mp3File.getAudioHeader().getEncodingType() != 'mp3') {
            validMP3File = false
            invalidFiles ++
        }
    }

    if (validMP3File) {

        trackNum ++

        if (mp3File.hasID3v1Tag()) {
            curTagv1 = mp3File.getID3v1Tag()
        } else {
            curTagv1 = new org.jaudiotagger.tag.id3.ID3v1Tag()
        }
        if (mp3File.hasID3v2Tag()) {
            curTagv2 = mp3File.getID3v2TagAsv24()
        } else {
            curTagv2 = new org.jaudiotagger.tag.id3.ID3v23Tag()
        }

        curTagv1.setField(org.jaudiotagger.tag.FieldKey.TITLE, baseFilename)
        curTagv2.setField(org.jaudiotagger.tag.FieldKey.TITLE, baseFilename)
        curTagv1.setField(org.jaudiotagger.tag.FieldKey.ARTIST, "BBC Radio")
        curTagv2.setField(org.jaudiotagger.tag.FieldKey.ARTIST, "BBC Radio")
        curTagv1.setField(org.jaudiotagger.tag.FieldKey.ALBUM, "BBC Radio - 20130205")
        curTagv2.setField(org.jaudiotagger.tag.FieldKey.ALBUM, "BBC Radio - 20130205")
        curTagv1.setField(org.jaudiotagger.tag.FieldKey.TRACK, trackNum.toString())
        curTagv2.setField(org.jaudiotagger.tag.FieldKey.TRACK, trackNum.toString())

        mp3File.setID3v1Tag(curTagv1)
        mp3File.setID3v2Tag(curTagv2)

        mp3File.save()
    }
})

println """$trackNum tracks created from $totalFiles files with $invalidFiles invalid files""" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:15:49.350

我仍在调查，看来 JAudioTagger 没有问题。在设置标签之前，我使用 Total Recorder 将下载质量从 128kbps、44,100Hz 降低到 56kbps、22,050Hz。这将文件大小减少到一半以下，并且语音广播的质量很好。

如果我在原始文件上运行脚本，则不会删除任何音轨。只有在 Total Recorder 处理过的文件中才会删除音轨的第一部分。

查看这些文件的 JAudioTagger 日志记录，标题似乎确实存在问题：

```
Checking further because the ID3 Tag ends at 0x23f9 but the mp3 audio doesnt start until 0x7a77
Confirmed audio starts at 0x7a77 whether searching from start or from end of ID3 tag 
```

对于 Total Recorder 未处理的文件，不执行此检查。

标头读取操作的日志还显示（对于 27 分钟的轨道）：

```
trackLength:06:52 
```

看来我得找一个新的 MP3 文件编辑器了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:07:43.150

代替

```
 mp3File.save() 
```

你能试试：

```
 mp3File.commit() 
```

不知道它是否会有所帮助，但这似乎是记录在案的方法？

# web-applications - 将 JPA persistence.xml 放在 Web 应用程序中的位置

> ID：14706655
> 
> 赞同：0
> 
> 时间：2013-02-05T11:38:21.010
> 
> 标签：web-applications, jpa, configuration, web-deployment

我在J2EE编程中锻炼自己：我修改了Oracle的J2EE教程转换器示例的源文件[，](http://docs.oracle.com/javaee/6/tutorial/doc/gipss.html)[*将*](http://docs.oracle.com/javaee/6/tutorial/doc/gipss.html)JPA代码放入其中并部署在GlassFish中。

使用现有的 ANT 配置，我正确编译和部署，但在运行时系统找不到*persistence.xml*。

这是部署文件的结构![在此处输入图像描述](../Images/1c50703040be8489e532cfad28dfe2d1.png)。我在更多地方放置了相同的文件 xml 以逃避问题，但没有成功。

在*server.log*中，我发现

> 引起：javax.persistence.PersistenceException：EntityManager 命名测试没有持久性提供程序

Glassfish支持JPA（我没有收到NoDefClassError的ClassnotFoundException，我没有任何类路径问题），持久化的id是唯一的，导致异常的指令是

```
Persistence.createEntityManagerFactory("test") 
```

这是我的*persistence.xml*配置

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="test" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>converter2.ejb.Converter2Bean</class>
    <class>entity.Order</class>
    <properties>
      <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/JPA"/>
      <property name="hibernate.connection.user" value="root"/>
      <property name="hibernate.connection.driver" value="com.mysql.jdbc.Driver"/>
      <property name="hibernate.connection.password" value="my_password"/>
      <property name="default-schema" value="JPA"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect"/>
      <property name="hibernate.hbm2ddl.import_files" value="C:\\mysql\\crea.sql"/>
    </properties>
  </persistence-unit>
</persistence> 
```

我把：

*   休眠测试.jar
*   hibernate3.jar
*   hibernate-jpa-2.0-api-1.0.1.Final.jar

在目录*\glassfish3\glassfish\lib\db*中，我重新启动了 Glassfish。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:39:19.113

问题是由于 Glassfish 无法找到 Hibernate 类，将它们放在域文件夹下的*lib/ext文件夹中（例如：* */glassfish3/glassfish/domain/yourdomain/lib/ext*）并重新启动 Glassfish。

# c++ - 仅将转义序列显示为文本

> ID：14706659
> 
> 赞同：0
> 
> 时间：2013-02-05T11:38:29.497
> 
> 标签：c++

我的程序正在输出有时包含转义序列的文本，例如“\x1B[J”（清除屏幕）。有没有办法抑制转义序列，使其不执行相关操作，而是通过其文本表示形式显示？

我什至有兴趣为 \n 和 \r 这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:47:48.327

通过将每个出现更改为 来转义`\`字符`\\`。

请注意，这些序列仅在您将它们输入源代码时才有效。检查以下程序的结果：

```
#include <cstdio>

int main(int argc, char * argv[])
{
    char test[3] = { 0x5c, 0x6e, 0x00 }; // \n
    char * test2 = "\\n"; // \n

    printf("%s\n", test);
    printf("%s\n", test2);
    printf(test);
    printf(test2);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:10:49.790

目前尚不清楚您要在哪个级别进行干预。如果您正在编写输出，最简单的解决方案就是不插入开头的字符。如果您将 an 传递 `std::ostream`给某个库，并且它正在插入字符，那么将过滤 streambuf 插入输出流并将它们过滤掉是相当简单的。对于标准转义序列，以下内容应该可以解决问题：

```
class EscapeSequenceFilter
{
    std::streambuf* myDest;
    std::ostream* myOwner;
    bool myIsInEscapeSequence;

protected:
    int overflow( int ch )
    {
        int retval = ch == EOF ? ch : 0;
        if ( myIsInEscapeSequence ) {
            if ( isalpha( ch ) ) {
                myIsInEscapeSequence = false;
        } else if ( ch == 0x1B ) {
            myIsInEscapeSequence = true;
        } else {
            retval = myDest->sputc( ch );
        }
        return retval;
    }

public:
    EscapeSequenceFilter( std::streambuf* dest )
        : myDest( dest )
        , myOwner( NULL )
        , myIsInEscapeSequence( false )
    {
    }
    EscapeSequenceFilter( std::ostream& dest )
        : myDest( dest.rdbuf() )
        , myOwner( &dest )
        , myIsInEscapeSequence( false )
    {
        myOwner->rdbuf( this );
    }
    ~EscapeSequenceFilter()
    {
        if ( myOwner != NULL ) {
            myOwner->rdbuf( myDest );
        }
    }
}; 
```

在调用要过滤的函数之前，只需声明一个以输出流为参数的类的实例。

此类很容易扩展以过滤您可能希望的任何其他字符。

# jquery - 选择具有动态属性的缓存元素

> ID：14706662
> 
> 赞同：0
> 
> 时间：2013-02-05T11:38:33.297
> 
> 标签：jquery, variables, jquery-selectors

如何缓存和选择元素看起来像这样？

```
".myClass[data-list='2']"; 
```

这有效：

```
var listNo = "2";

    ".myClass[data-list='" + listNo + "']"; 
```

但这是我正在尝试的，我不能让它工作：

```
var listNo = "2", 
myClass = $('.myClass');

    myClass + "[data-list='" + listNo + "']" 
```

这就是 Firebug 对我说的：

```
Error: Syntax error, unrecognized expression: [object Object][data-list='02'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:43:29.940

我认为您正在寻找过滤器，例如：

```
myClass.filter("[data-list='" + listNo + "']") 
```

# arrays - CreateNewSite() 绑定问题——WMI——IIS6

> ID：14706665
> 
> 赞同：1
> 
> 时间：2013-02-05T11:38:36.197
> 
> 标签：arrays, binding, dns, iis-6, wmi

我正在使用 CreateNewSite() 函数成功创建新的 IIS 6 网站，但想添加另外两个主机名绑定（见下文）。

问题：

1.  CreateNewSite() 函数是否支持多个主机名绑定？

2.  如果是这样，语法是什么？在我找到的所有示例代码中，我只找到原始 MS 代码的副本，没有附加绑定的示例，甚至没有修改函数的示例。

我已经查看了这个博客页面...

[http://stweet.wordpress.com/2010/03/15/creating-a-new-website-programmatically-on-iis-using-asp-net/](http://stweet.wordpress.com/2010/03/15/creating-a-new-website-programmatically-on-iis-using-asp-net/)

...虽然我看到一些看起来像多个域的东西，但代码格式不同，所以我不确定它与我正在使用的 VBS 有什么关系。

谢谢，

米克

* * *

` 绑定 = 数组 (0)

```
Set Bindings(0) = providerObj.get("ServerBinding").SpawnInstance_() 
Bindings(0).IP = myIPnumber
Bindings(0).Port = "80" 
Bindings(0).Hostname = WScript.Arguments(0)

' Create the new Web site using the CreateNewSite method of the IIsWebService object. 
Dim strSiteObjPath 
strSiteObjPath = serviceObj.CreateNewSite("RF_" & WScript.Arguments(0), Bindings, "D:\websites\" & WScript.Arguments(0) & "\httpdocs", WScript.Arguments(2)) 
```

## `

WScript.Arguments(2) 是自定义 IIS 服务编号。

# android - Android中带有图标的可点击图像

> ID：14706667
> 
> 赞同：0
> 
> 时间：2013-02-05T11:38:43.800
> 
> 标签：android, drawable

我需要使这个可点击的图像类似于 HTML 中的 imageMap。我还需要在可点击区域上放置一个图标（在中心，有点像地图标记），但是我如何考虑图像大小的调整？

即我的图像可能是 800x600，可点击区域可能是 20,20 和 60,40 覆盖的矩形，但是当这些像素没有显示在完美像素上时，这些像素实际上不再指代图像中的相同位置时尚。

编辑：我的图像是从 sdcard 中获取的，而不是从可绘制文件夹中获取的

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T12:13:25.430

这是我在这个[链接中找到的](http://catchthecows.com/?p=113)

> 我发现自己需要显示图像并让用户点击图像的不同部分来导航和执行操作。在勾勒出我需要的东西之后，很明显我想要的是一个类似于 HTML 地图标签的东西，但是在 Android 视图中。再想一想，我决定这将是一个有用的小部件。

**结果代码：**

> 支持在布局中作为可绘制或位图的图像 允许在 xml 中列出区域标签 允许使用剪切和粘贴 HTML 区域标签到资源 xml（即，能够获取 HTML 地图和图像并在最少编辑的情况下使用它） 支持如果图像大于设备屏幕，则平移支持捏缩放支持点击区域时的回调。支持将注释显示为气泡文本并在点击气泡时提供回调代码可以在[GitHub找到 - Android Image Map](https://github.com/catchthecows/AndroidImageMap)
> 
> 2012 年 3 月 2 日更新：添加了始终使用原始图像位调整图像大小的选项。某些图像在上下调整大小时会损失很多图像质量。始终从原始位调整大小可提供最佳图像，但需要额外的内存。权衡现在取决于您。
> 
> 这里有一些关于实现的快速说明，我将在后续帖子中详细介绍一些关键领域。
> 
> 将地图与 img 关联起来的难易程度与在 HTML 中的 img 标签中关联的难易程度相匹配。只需提供要在布局中使用的地图名称：

```
<!--?xml version="1.0" encoding="utf-8"?-->
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ctc="http://schemas.android.com/apk/res/com.ctc.android.widget"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <com.ctc.android.widget.ImageMap  
        android:id="@+id/map"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:src="@drawable/usamap"
        ctc:map="usamap"/>
</LinearLayout> 
```

> 区域地图在您的项目中的 res/xml/map.xml 中指定。与 HTML 地图的一个区别是每个区域都必须有一个 id。我在这个要求上反复讨论，我可能会更改代码以允许没有 id 的区域。如果存在，代码将使用 name 属性，否则它将查找 title 或 alt。当前的实现还需要为每个区域命名，尽管这可以很容易地更改。

```
<!--?xml version="1.0" encoding="utf-8"?-->
<maps xmlns:android="http://schemas.android.com/apk/res/android">
    <map name="gridmap">
        <area id="@+id/area1001" shape="rect" coords="118,124,219,226" />
        <area id="@+id/area1002" shape="rect" coords="474,374,574,476" />
        <area id="@+id/area1004" shape="rect" coords="710,878,808,980" />
        <area id="@+id/area1005" shape="circle" coords="574,214,74" />
        <area id="@+id/area1006" shape="poly" coords="250,780,250,951,405,951" />
        <area id="@+id/area1007" shape="poly" coords="592,502,592,730,808,730,808,502,709,502,709,603,690,603,690,502" />
    </map>
    <map name="usamap">
        <area id="@+id/area1" shape="poly" coords="230,35,294,38,299,57,299,79,228,79" />
...
     </map>
</maps> 
```

> 图像本身放置在 res/drawable-nodpi 中，以便系统不会尝试根据 dpi 将图像适合设备。这样我们就可以保证我们的区域坐标将正确地映射到显示的图像。
> 
> 这是一个在布局中查找视图并添加点击处理程序的示例活动

```
public class ImageMapTestActivity extends Activity {
    ImageMap mImageMap;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // find the image map in the view
        mImageMap = (ImageMap)findViewById(R.id.map);

        // add a click handler to react when areas are tapped
        mImageMap.addOnImageMapClickedHandler(new ImageMap.OnImageMapClickedHandler() {
            @Override
            public void onImageMapClicked(int id) {
                // when the area is tapped, show the name in a
                // text bubble
                mImageMap.showBubble(id);
            }

            @Override
            public void onBubbleClicked(int id) {
                // react to info bubble for area being tapped
            }
        });
    }
} 
```

希望这会有所帮助。

# silverlight - SharePoint 2010：自定义 Silverlight Web 部件历史记录字段

> ID：14706670
> 
> 赞同：0
> 
> 时间：2013-02-05T11:38:53.097
> 
> 标签：silverlight, sharepoint

我正在创建一个自定义应用程序以通过 Silverlight 3 应用程序查看、创建和管理 SharePoint 2010 列表。**注意**：这是一个客户端应用程序

我已经管理了几乎所有的基本功能，加载列表中的项目，创建新项目，编辑它们等等......但我坚持使用一个特定的功能。

我有一个激活了版本控制的文本字段（SharePoint 中的“多行文本”），以便跟踪每个评论的作者和时间。

我的问题是我找不到访问以前条目的方法，使用：

```
var comments = myListItem.FieldValues["Comments"];
commentsField.Text = comments.ToString(); 
```

返回最新条目的字符串，但不返回先前条目的字符串。

我希望能够访问所有发表的评论，包括发表者和发表时间。

你能帮助我或指出我正确的方向吗？

谢谢，肯尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:52:03.070

尝试这个：

```
foreach (SPList list in yourList)
{
    foreach (SPListItem item in list.Items)
    {
        foreach (SPListItemVersion version in item.Versions)
        {
            SPField temp = version.Fields["Comments"];
            //use your temp 
        }
    }
} 
```

# ruby - 新安装 compass-inuit 后，启动“compass watch”时出现错误

> ID：14706671
> 
> 赞同：3
> 
> 时间：2013-02-05T11:39:05.047
> 
> 标签：ruby, compass-sass, inuit.css

我们刚刚创建了一个 compass 项目，如[compass-inuit 手册](https://github.com/stephenway/compass-inuit)中所述。当我们现在启动“指南针手表”时，我们会收到以下错误消息：

```
user@VirtualXubuntu:/tmp/compass-test/my_project$ compass watch
>>> Change detected at 12:23:22 to: sass/style.scss
    error sass/sass/style.scss (Line 99: Invalid CSS after "}​": expected "{", was "")
identical stylesheets/sass/style.css 
>>> Compass is polling for changes. Press Ctrl-C to Stop. 
```

其实我不知道这个错误是什么意思 - 因为我是指南针的新手......

版本信息：

> Ubuntu 12.10 [amd64]
> ruby​​ 1.9.3p194 (2012-04-20 修订版 35410) [x86_64-linux]
> Compass 0.12.2 (Alnilam)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:48:18.997

这已在更新版本的扩展中得到修复。通过运行更新`gem install compass-inuit -v 4.5.5.1`，然后通过运行创建一个新项目：

`compass create my_project -r compass-inuit --using compass-inuit`

我相信这个错误的原因是括号之一不是真正的括号，而是一个粘贴的字符。这会导致编译器错过它并认为选择器没有关闭。

很抱歉给您带来麻烦。

# c# - 在源代码的 sql 查询中传递 Request.QueryString 整数值

> ID：14706672
> 
> 赞同：1
> 
> 时间：2013-02-05T11:39:19.507
> 
> 标签：c#, asp.net, sql

我正在尝试在源代码的查询中传递 Request.QueryString 整数值。我该怎么做？

```
http://localhost:3738/WebSite3/UserDetails.aspx?Id=43 
```

我想在查询中传递 id 的值，即 43

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:SLIITComDBConnectionString %>" 

    SelectCommand="SELECT Album.AlbumID, Album.DefaultPhotID, Album.AlbumName, PhotAlbum.Photo FROM Album INNER JOIN PhotAlbum ON Album.DefaultPhotID = PhotAlbum.PhotoID where album.userid= **Request.QueryString[id]** "> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:53:19.420

使用[查询字符串参数](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.querystringparameter.querystringfield.aspx)

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:SLIITComDBConnectionString %>" 

SelectCommand="SELECT Album.AlbumID, Album.DefaultPhotID, Album.AlbumName, PhotAlbum.Photo FROM Album INNER JOIN PhotAlbum ON Album.DefaultPhotID = PhotAlbum.PhotoID where album.userid= @userid ">
   <SelectParameters>
      <asp:QueryStringParameter Name="userid" Type="String"  QueryStringField="id" />
   </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:04:57.300

你可以使用这个：

```
 <%=this.Request.QueryString["Id"]%> 
```

# java - System.out.println 到 JTextArea

> ID：14706674
> 
> 赞同：6
> 
> 时间：2013-02-05T11:39:24.003
> 
> 标签：java, swing, user-interface, jtextarea

**编辑：**我已经编辑了帖子以澄清我的问题，现在我自己有了更多的理解。

正如标题所说，我基本上是在尝试`JTextArea`在我的 GUI 中向我的控制台输出控制台，同时执行应用程序的任务。

这是我目前正在做的事情：

```
public class TextAreaOutputStream extends OutputStream
{

    private final JTextArea textArea;

    private final StringBuilder sb = new StringBuilder();

    public TextAreaOutputStream(final JTextArea textArea)
    {
        this.textArea = textArea;
    }

    @Override
    public void flush()
    {
    }

    @Override
    public void close()
    {
    }

    @Override
    public void write(int b) throws IOException
    {

        if (b == '\r')
            return;

        if (b == '\n')
        {
            final String text = sb.toString() + "\n";
            SwingUtilities.invokeLater(new Runnable()
            {
                public void run()
                {
                    textArea.append(text);
                }
            });
            sb.setLength(0);
        }
        sb.append((char) b);
    }
} 
```

以上将成功重定向`System.out`到我上面的输出流，因此向我发送事件以`EventQueue`更新我的 GUI ( `JTextArea`)。

这是问题：

目前正在使用`invokeLater()`will 正如它在文档中所说的那样：

`Causes runnable to have its run method called in the dispatch thread of the EventQueue. This will happen after all pending events are processed.`

所以我真正想做的是`run()`在处理 EventQueue 中的所有其他内容之前执行我对 GUI 的更新（调用）。

是否可以将事件本质上注入到我的 EventQueue 中？或者有人可以指点我这方面的一个不错的教程吗？

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T11:52:57.800

以下示例创建带有文本区域的框架并将 System.out 重定向到它：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class JTextAreaOutputStream extends OutputStream
{
    private final JTextArea destination;

    public JTextAreaOutputStream (JTextArea destination)
    {
        if (destination == null)
            throw new IllegalArgumentException ("Destination is null");

        this.destination = destination;
    }

    @Override
    public void write(byte[] buffer, int offset, int length) throws IOException
    {
        final String text = new String (buffer, offset, length);
        SwingUtilities.invokeLater(new Runnable ()
            {
                @Override
                public void run() 
                {
                    destination.append (text);
                }
            });
    }

    @Override
    public void write(int b) throws IOException
    {
        write (new byte [] {(byte)b}, 0, 1);
    }

    public static void main (String[] args) throws Exception
    {
        JTextArea textArea = new JTextArea (25, 80);

        textArea.setEditable (false);

        JFrame frame = new JFrame ("stdout");
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        Container contentPane = frame.getContentPane ();
        contentPane.setLayout (new BorderLayout ());
        contentPane.add (
            new JScrollPane (
                textArea, 
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, 
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED),
            BorderLayout.CENTER);
        frame.pack ();
        frame.setVisible (true);

        JTextAreaOutputStream out = new JTextAreaOutputStream (textArea);
        System.setOut (new PrintStream (out));

        while (true)
        {
            System.out.println ("Current time: " + System.currentTimeMillis ());
            Thread.sleep (1000L);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T15:22:13.883

您的错误必须存在于您尚未向我们展示的其他地方。这是一个非常简单的演示，它使用与您的代码几乎相同的代码按预期工作（我只修复了小问题）：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintStream;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TextAreaOutputStream extends OutputStream {

    private final JTextArea textArea;

    private final StringBuilder sb = new StringBuilder();

    public TextAreaOutputStream(final JTextArea textArea) {
        this.textArea = textArea;
    }

    @Override
    public void flush() {
    }

    @Override
    public void close() {
    }

    @Override
    public void write(int b) throws IOException {

        if (b == '\r') {
            return;
        }

        if (b == '\n') {
            final String text = sb.toString() + "\n";

            textArea.append(text);
            sb.setLength(0);
        } else {
            sb.append((char) b);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame(TextAreaOutputStream.class.getSimpleName());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                JTextArea ta = new JTextArea(24, 80);
                System.setOut(new PrintStream(new TextAreaOutputStream(ta)));
                frame.add(new JScrollPane(ta));
                frame.pack();
                frame.setVisible(true);
                System.out.println("Textarea console initiated");
                Timer t = new Timer(1000, new ActionListener() {

                    int count = 1;

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        System.out.println("Outputting line " + count++ + " to the console. Working properly, no?");
                    }
                });
                t.start();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T11:46:52.110

您可能需要使用`PipedOutputStream`...在此处查看问题的答案： [如何将所有控制台输出重定向到具有正确编码的 Swing JTextArea/JTextPane？](https://stackoverflow.com/questions/1522444/how-to-redirect-all-console-output-to-a-swing-jtextarea-jtextpane-with-the-right)

基本上它的作用是，它将 重定向`System.out`到一个缓冲区，程序可以从中读取用 打印的输出`System.out`。这就是所谓的`Piping`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-27T09:13:10.683

我发现做到这一点的最好方法非常简单，而且看起来效果很好。我已经用了很多年了，没有任何问题。

```
JTextArea output = new JTextArea();
PrintStream out = new PrintStream(new OutputStream() {
@Override
    public void write(int b) throws IOException {
        output.append(""+(char)(b & 0xFF));
    }
});
System.setOut(out);
System.out.println("TEST"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-11T14:05:24.510

如果您想在文本区域中看到滚动效果，那么您可以将新文本放在开头，而不是附加输出。例子：

```
HttpURLConnection con = (HttpURLConnection) (new URL(url[0]).openConnection());
con.setInstanceFollowRedirects(false);
con.connect();
int responseCode = con.getResponseCode();
String location = con.getHeaderField("Location");
textArea.setText(url[0] +"," +responseCode+"," +location+"\n"+textArea.getText()); //new text is prefixed to the existing text
textArea.update(textArea.getGraphics()); 
```

# python - BeautifulSoup - 从 findAll 的元素中获取类

> ID：14706678
> 
> 赞同：5
> 
> 时间：2013-02-05T11:39:30.377
> 
> 标签：python, beautifulsoup

我正在使用 BeautifulSoup 解析网站。我知道我想要的内容在 a `div`of class`content`中。并且内容都在`p`标签中。所以我跑了

```
paragraphs= content.findAll('p') 
```

到这里为止都很好。我遍历列表，`if`如果遇到特定类，则有一个条件将跳出循环。

```
for para in paragraphs:
    if 'class' in para:
        if para['class']=='end':
            break 
```

但这行不通。`end`当我运行循环时，遇到类时它不会中断。事实上，在遍历循环时，所有元素的类似乎都丢失了。

```
for para in paragraphs:
    if 'class' in para:
        print para['class'] 
```

即使有带有类的元素，这也不会打印任何内容。事实上，这段代码确实打印出了类——

```
>>>paragraphs[0]['class']
u'dateline' 
```

但，

```
>>> print 'class' in paragraphs[0]
False 
```

我不明白这里发生了什么。最终我通过使用异常解决了我的问题，但这有点困扰我。谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T07:37:51.267

当您输入 时`if 'class' in para`，您实际上是在说段落中是否存在*实际*的单词类。我相信你的意图是看看它是否有一个类，所以你想要的是：

```
for para in paragraphs:
    if para.has_attr('class'):
        if para['class'][0] == 'end': # Notice that I put [0], as para['class'] is a list.
            break 
```

# c++ - 比较 2 个字符串类型的字符串和 LPWSTR

> ID：14706679
> 
> 赞同：0
> 
> 时间：2013-02-05T11:39:30.770
> 
> 标签：c++, string, pointers

我想比较一个`string`例如`"Tedt2.csv"`在函数声明中的`&value`例子。`LPWSTR`这是我的基本代码，它有效：

```
PWSTR   value = nullptr;
HRESULT hr    = properties->GetStringValue(key, &value); 
```

我测试了很多方法，比如

```
if (wcsstr(&value, L"Tedt2.csv") == 0)
{
   wprintf(L"%ws: %ws\n", keyName, value);
} 
```

但它总是进入`if`.

有人能帮助我吗？这应该是微不足道的，但我对 C++ 有点迷茫。我必须做一个概念证明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T11:48:06.577

[`wcsstr()`](http://msdn.microsoft.com/en-us/library/z9da80kz%28v=vs.80%29.aspx)在字符串中搜索字符串，它不执行字符串比较。`NULL`如果在 lhs 中找不到 rhs ，则返回。在`0`此上下文中的 将被转换为空指针，并且当在中找不到`if`时将进入分支。改用：`"Tedt2.csv"``value`[`wcscmp()`](http://msdn.microsoft.com/en-US/library/e0z9k731%28v=vs.80%29.aspx)

```
if (wcscmp(value,  L"Tedt2.csv") == 0)
{      //  ^ remove & also
} 
```

或使用[`std::wstring`](http://en.cppreference.com/w/cpp/string/basic_string)提供`operator==()`：

```
#include <string>

const std::wstring search_string(L"Tedt2.csv");
if (search_string == value)
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T11:48:04.420

并且没有 & ？

```
if (wcsstr(value, L"Tedt2.csv") == 0)

 ... make something when "Tedt2.csv" not appear in value 
```

你`value`是一个指针。您正在传递一个指向指针的指针，但您需要一个指针

```
wchar_t *wcsstr(   wchar_t *str,   const wchar_t *strSearch ); // C++ only 
```

# android - 可绘制的高度和宽度在 Android ICS 中不起作用

> ID：14706682
> 
> 赞同：0
> 
> 时间：2013-02-05T11:39:35.940
> 
> 标签：android, image, drawable, image-size

我想在android中获取图像宽度和高度并相应地加载购买我的下面的代码在2.3.3中工作正常但是当我在更高版本（4.0）中测试时它的高度和宽度给出空指针异常......下面是我的代码...

```
 Drawable drawable = null; 
           drawable = LoadImageFromWebOperations(logo_url.replace(" ", "%20"));
           System.out.println("Width" + drawable.getMinimumWidth());
           System.out.println("Height" + drawable.getMinimumHeight()); 
           int width = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_PX, drawable.getMinimumWidth(), mCtx.getResources().getDisplayMetrics());
           int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_PX, drawable.getMinimumHeight(), mCtx.getResources().getDisplayMetrics());
           client_logo.setMinimumHeight(height);
           client_logo.setMinimumWidth(width);
           client_logo.setImageDrawable(drawable); 

            public Drawable LoadImageFromWebOperations(String url){
System.out.println(url);

    try{
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return (d);
    }catch (Exception e) {
        //System.out.println("Exc="+e);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:49:17.537

从 API 11 开始，如果您在 UI 线程上执行此代码，网络访问将抛出`NetworkOnMainThreadException`. 您没有发布您的 logcat 输出（这将非常有帮助），但我怀疑这就是正在发生的事情。结果，`LoadImageFromWebOperations`将返回`null`，当您尝试访问可绘制属性时，您将获得 NPE。

您需要在工作线程中运行此代码。请参阅文章[保持您的应用响应](http://developer.android.com/training/articles/perf-anr.html)。

# networking - 如何使用 DSL IP 转发连接到 localhost

> ID：14706684
> 
> 赞同：0
> 
> 时间：2013-02-05T11:39:41.597
> 
> 标签：networking, dsl, modem

我正在尝试从其他计算机连接到 wamp。

我有一个 tp-link TD-8811。有什么办法可以从外面打开我的本地主机

我也没有静态IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:15:13.480

快速查看您的 TP-link 设备的规格表明它能够进行 DMZ 和虚拟服务器配置。请在此处查看分步说明：[http](http://www.tp-link.com/en/article/?faqid=205) ://www.tp-link.com/en/article/?faqid=205 我在搜索中输入了您的型号，并想出了这篇文章。我希望这有帮助。

* * *

从外部访问动态 IP 有很多选择。

几乎所有为动态 IP 使用 CNAME 别名的服务都提供免费和付费服务。我从来没有觉得有必要为我只是偶尔使用的服务付费……付费套餐通常是为了让您的生活更轻松。

查看：no-ip.com -or- dyndns.com -or- google: "connect to dynamic ip address" 并从结果中选择。

* * *

完成所有这些后，我会认真考虑（作为绝对最低限度）为您的安全设置一个快速而肮脏的加密通道。您的路由器不支持 IPsec/VPN，但这并不意味着您无法通过 ssh 连接到您的计算机（无论主机/客户端操作系统如何）。还有一些端口敲门方法可以与您的 PC 防火墙“对话”并指示它打开您所需的数据端口。您需要从路由器转发更多端口才能进行此设置，但如果您要实现一个封闭系统，您可以根据需要再次打开和关闭。

为这个答案的非方法风格道歉，我希望它有所帮助。

# ios - IOS App中的AIR SharedObject在重置后消失

> ID：14706693
> 
> 赞同：0
> 
> 时间：2013-02-05T11:40:25.583
> 
> 标签：ios, air, shared-objects

我在 AIR 中使用 SharedObject 在 IOS App 中存储一些数据。

当我将 UIApplicationExitsOnSuspend 设置为 true 时，共享对象工作正常，这意味着如果我从快速应用程序切换器中删除它（通过双击主页按钮出现快速应用程序切换器），然后再次运行应用程序，带有我的数据的 SharedObject 仍然存在。

但是如果我将 UIApplicationExitsOnSuspend 设置为 false 并从 Fast App Switcher 中删除应用程序，然后再次运行它，我的 SharedObject 是空的。

问题是我需要使用 UIApplicationExitsOnSuspend false，但我还需要一直存储 SharedObject，即使它在后台运行也不行。

谢谢你。

* * *

UPD：一些代码

这是项目主类的构造函数：

`public static var so:SharedObject;
public function Main():void
{
…<br> so = SharedObject.getLocal("MyApp");
}`

然后我像这样使用它

`if (!Main.so.data.names) {
Main.so.data.names = [];
}
Main.so.data.names.push(someNewName);`

当应用程序在后台运行时，它运行良好，所有更改都会保存。但是如果我在 Fast App Switcher 中杀死应用程序，然后再次运行，调试器会显示 Main.so.data 不包含任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T07:20:02.713

我在 AIR for iOS 上遇到了完全相同的问题。使用 EncryptedLocalStore 而不是 ShareObject 似乎可以解决问题。

这是有关如何使用 EncryptedLocalStore 保存和检索数组的链接。请注意链接有一个错字 - “EncryptedLocalStorage”，改为“EncryptedLocalStore” -[是否可以将数组存储到 EncryptedLocalStore 项目中？空气](https://stackoverflow.com/questions/7610526/is-it-possible-to-store-an-array-into-an-encryptedlocalstore-item-air)

# c# - 如何在 DataTable 中编辑时禁用排序

> ID：14706695
> 
> 赞同：1
> 
> 时间：2013-02-05T11:40:29.110
> 
> 标签：c#, wpf, sorting, datatable, wpfdatagrid

在 WPF 应用程序中，我有一个绑定到数据表的数据网格，我按升序对列进行排序。现在，当我在该特定列中编辑值时，将对值进行排序（已应用 AS 排序）。有什么办法可以防止在编辑时排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:43:14.980

您的问题中没有足够的信息来给出更详细的答案，但这样的事情可能对您有用。

```
theColumnYouAreTargetting.SortMode = DataGridViewColumnSortMode.NotSortable; 
```

您可以在编辑期间禁用排序，然后在完成后启用它。

# sql-server - 用于确定对象层次结构深度的 CTE 与 T-SQL 循环

> ID：14706696
> 
> 赞同：5
> 
> 时间：2013-02-05T11:40:31.873
> 
> 标签：sql-server, tsql, common-table-expression

我有一个由大约 70,000 行和两列（两者`VARCHAR(16)`）组成的表：`id`和`parent_id`。

我想填充一个“深度”列，显示特定记录与“根”节点的距离。

例如

```
id,parent_id,depth
A,NULL,0
B,A,1
C,A,1
D,B,2
E,D,3 
```

等等

我首先根据类似问题的[答案编写查询：](https://stackoverflow.com/a/1988602/79450)

```
WITH myCTE(id, depth) AS
(
    SELECT id, 0 FROM objects where id = 'A'
    UNION ALL
    SELECT objects.id, depth + 1 FROM myCTE JOIN objects ON objects.parent_id = myCTE.id
)
SELECT id, depth FROM myCTE 
```

使用我的数据集（约 80,000 行）执行上述操作需要将近两个小时！

然后，我将查询编写为循环并获得了更好的性能：

```
ALTER TABLE objects ADD depth INT NULL
DECLARE @counter int
DECLARE @total int
SET @counter = 0
UPDATE objects SET depth = 0 WHERE id = 'A'

SELECT @total = COUNT(*) FROM objects WHERE depth IS NULL

WHILE (@total > 0)
BEGIN
    UPDATE objects SET depth = @counter + 1 WHERE parent_id IN (
        SELECT id FROM objects WHERE depth = @counter
    )
    SELECT @total = COUNT(*) FROM objects WHERE depth IS NULL
    SET @counter = @counter + 1
END 
```

上面的代码只需要几分钟（它的好处是将结果添加到现有表中）

我的问题是我的结果是否是典型的使用 CTE 来解决这个问题，或者是否有一些我忽略的东西可以解释它？索引，也许？（我现在桌子上没有）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T11:57:44.043

你需要一个关于`parent_id`. CTE 的递归部分将始终使用嵌套循环连接，并且不受连接提示的影响（结果被添加到[堆栈假脱机](http://blogs.msdn.com/b/craigfr/archive/2007/10/25/recursive-ctes.aspx)，并且行按 LIFO 顺序一一处理）

如果没有索引，`parent_id`则需要在嵌套循环的内侧多次扫描表。性能将随着行数呈指数下降。

您的没有递归的查询将能够使用不同的连接类型（散列或合并），这些连接类型仅针对每个递归级别扫描表两次。在这种情况下很可能是哈希连接，因为您没有可以避免排序的有用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:04:42.133

您是否考虑过使用 HierarchyID 数据类型？它会让你的生活变得更轻松。

```
CREATE TABLE Groups.tblHierarchyNode
(
        NodeID              Int IDENTITY (0,1),
        NodeHID             HierarchyID NOT NULL,   -- DB Hierarchy ID of where I am in a tree
        HierarchyLevel      AS NodeHID.GetLevel(),  -- Numerical level of where I am in tree
) 
```

我现在将它用于我的很多分层表。您必须更聪明地处理表格数量，但报告是轻而易举的事情，就像在层次结构中上下移动、获取祖先、后代等一样。

# ruby - 在 selenium 网格上运行时出现转发错误

> ID：14706703
> 
> 赞同：0
> 
> 时间：2013-02-05T11:40:57.597
> 
> 标签：ruby, selenium-grid

突然间，我对硒网格感到困惑。

我在 Windows 机器上运行了带有 2 个节点的 selenium 网格。

现在，我尝试从远程机器上运行测试。它说转发错误。但是如果我将端口更改为 5555，它运行良好。我在配置集线器时尝试使用端口选项。那也行不通。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:20:43.297

我会尽力帮助你，但我需要更多细节。如果我理解正确：

1.  集线器在 machine_1 上启动（例如在默认端口 4444 上）

2.  节点在 machine_2 上启动，运行如下：

    ```
     java -jar selenium-server-standalone-2.28.0.jar -role node -hub http://ip_of_machine_1:4444/grid/register -browser "browserName=chrome,maxInstances=5" -port the_port_number (the default is 5555) 
    ```

3.  您尝试运行测试并收到转发错误

实际上这应该有效。你能提供更多细节吗？

# php - 提交后的PHP组合框结果

> ID：14706706
> 
> 赞同：0
> 
> 时间：2013-02-05T11:41:06.217
> 
> 标签：php, combobox

我从网站上尝试了许多解决方案，但没有人给我结果。

我有一个组合框，我从 mysql db 插入数据

按下“提交按钮”后，组合框刷新，但从第一个数据而不是从选定的数据重新启动，

根据我的代码，

有人能帮我吗？

```
 $result = mysql_query("SELECT * FROM courier");

while($row = mysql_fetch_array($result))
  {

 echo "<option  ". (($_POST['NAZIONE'] == $row["NAZIONE"]) ? 'selected ' : '') ."value=\"".$row["NAZIONE"]."\">".$row["NAZIONE"]."</option>";
  }

echo'</select> <br> <input type="submit" value="Proceed">';

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:48:04.303

您可以将选定值设置为 $_SESSION 变量，然后您可以获得该选定值

# compass-sass - 设置 Webstorm/PHPStorm 文件刷新时间

> ID：14706708
> 
> 赞同：14
> 
> 时间：2013-02-05T11:41:11.217
> 
> 标签：compass-sass, phpstorm, webstorm

这可能只是一些我似乎找不到的简单设置。事情是这样的：我有一个带有 Compass/Sass CSS 的 web 项目。当我修改 Sass 文件时，Compass 会自动为我创建相应的 CSS 文件。如果文件已更改，Webstorm 会自行将其上传到我的服务器。整洁的！

但是，Webstorm（或 PHPStorm，就此而言）不会立即注意到 CSS 文件中的更改，而是每 2 分钟左右检查一次外部修改。然后将重新加载 CSS 文件并将其上传到服务器。

如何设置检查外部更改的时间间隔！？2 分钟（左右，我没有计时）太多了，我宁愿把它设置为 10 秒。对我也有用的是，如果我可以选择告诉 Webstorm 重新加载 CSS 文件，因为我知道它已经改变了。有点像eclipse中的F5。（Webstorm 中的 F5 复制了一些东西，我在任何地方都找不到刷新命令或按钮。）

感谢您的帮助！

**解决方案：** 参见 CrazyCoder 的评论。使用 WS 的[6.0 EAP 版本](http://confluence.jetbrains.net/display/WI/WebStorm+6+EAP)解决了这个问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T11:45:53.940

这种手动“重新加载”的命令/动作已经存在——主工具栏上的第三个按钮。

**文件 | 同步**

用户界面中没有选项可以对间隔进行任何调整。只有“当 IDE 获得焦点时同步”之类的东西。

也许可以通过`*.vmoptions`文件传递一些配置值，不幸的是，我不知道它们都用于文件观察程序。

# wordpress - 创建wordpress模板

> ID：14706709
> 
> 赞同：0
> 
> 时间：2013-02-05T11:41:12.620
> 
> 标签：wordpress, dreamweaver

我需要使用 adobe dreamweaver 创建一个新的 wordpress 模板。我想要带有图像滑块、时尚菜单和评论选项的模板。请指导我从基本到结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:46:10.943

也许您会发现本教程很有帮助：

[http://www.adobe.com/devnet/dreamweaver/articles/dw-wordpress-multiscreentheme.html](http://www.adobe.com/devnet/dreamweaver/articles/dw-wordpress-multiscreentheme.html)

还有这个：

[http://www.adobe.com/devnet/dreamweaver/articles/dw_wordpress_pt1.html](http://www.adobe.com/devnet/dreamweaver/articles/dw_wordpress_pt1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:07:28.503

Wordpress 模板以

```
<?php /* Template Name: Stylish Template */ ?>
<?php get_header(); ?> // go to header.php add required js file for slider & menu through wordpress function() <?php wp_nav_menu($args); //check wordpress documentation for $args.
<div id="slider">
--images will go here
</div>
<div id="content">--Content Goes here---These will be posts from any category or latest posts, look wordpress documentation for <?php comment_template() to add comments if they are disabled.?></div> 
```

# php - Cakephp 数据验证 "notEmpty" "required"

> ID：14706710
> 
> 赞同：1
> 
> 时间：2013-02-05T11:41:15.103
> 
> 标签：php, mysql, validation, cakephp

我是蛋糕的新手，完成了博客教程，现在我正在尝试一些简单的开始。但是我有一些我无法理解的东西。在模型 PersonalInformation 上，我得到了表字段的数据验证：

这是我的带有 $validate 数组的模型：

```
class PersonalInformation extends AppModel {

/**
 * Validation rules
 * @var $validate
 */
public $validate = array(
    "first_name" => array(
        "name"      => array(
            "rule"      => "validName",
            "message"   => 'Only alpha characters and "." (dots)',
        ),
    ),
    "last_name"  => array(
        "name"      => array(
            "rule"      => "validName",
            "message"   => 'Only alpha characters and "." (dots)',
        ),
    ),
    "birth_date" => array(
        "date"      => array(
            "rule"      => "date",
            "message"   => "Enter a valid date",
        ),
    ),
    "nickname"  => array(
        "alphanumeric"  => array(
            "rule"      => "alphaNumeric",
            "message"   => "Only alpha-numeric characters",
        ),
    ),
    "gender"     => array(
        "notEmpty"  => array(
            "rule"          => "notEmpty",
            "message"       => "Can't be empty",
        ),
    ),
);

} // end class 
```

这是我的桌子：

```
CREATE TABLE `personal_informations`
(
`id` INT NOT NULL UNIQUE AUTO_INCREMENT,
`first_name` VARCHAR(45),
`last_name` VARCHAR(45),
`birth_date` DATE,
`nickname` VARCHAR(45),
`is_company` TINYINT DEFAULT 0 NOT NULL,
`picture_url` VARCHAR(255),
`gender` ENUM('m','f') NOT NULL,
`notes` TEXT,
`created` DATETIME,
`modified` DATETIME,
PRIMARY KEY (`id`)
) ENGINE=InnoDB CHARACTER SET=utf8;

CREATE INDEX `id_idx` ON personal_informations(id); 
```

这是视图：

```
<!-- /PersonalInformations/add -->

<div class="">
<h2>Create a personal information</h2>
    <?php
    echo $this->Form->create();

    echo $this->Form->input( "PersonalInformation.first_name" );
    echo $this->Form->input( "PersonalInformation.last_name" );
    echo $this->Form->input( 
        "PersonalInformation.birth_date", 
        array( 
            "separator" => " - ", 
            "minYear" => date('Y') - 90,
            "maxYear" => date('Y')
    )
    );
    echo $this->Form->input( "PersonalInformation.nickname" );
    echo $this->Form->input( "PersonalInformation.is_company", array( "type" =>     "checkbox" ));
    echo $this->Form->input( "PersonalInformation.piture_url", array( "type" => "file"     ));
    echo $this->Form->radio( "PersonalInformation.gender", array( "m" => __("Male"), "f"     => __("Female")), array( "hiddenField" => false ));
    echo $this->Form->textarea( "PersonalInformation.notes" );

    echo $this->Form->end( "Done" );
    ?>
</div> 
```

所以问题是，由于某种原因，“昵称”是必需的，我的意思是，当我点击“昵称”为空的提交按钮时，它显示“只有字母数字字符”。对于“性别”，当没有选择任何内容时，它不会显示任何内容。

如果还有什么我需要发布的，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:53:32.623

为了你的昵称

```
'nickname' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Nick name is required.'
            )
        ) 
```

对于性别：

在视图中

```
echo $this->Form->input('PersonalInformation.gender',array(
          'type'=>'select','empty' => '---- Select----',
          'class'=>'select',
          'options'=>$option_array
          )) 
```

在模型验证数组中：

```
'gender' => array(
            'required' => array(
                'rule' => array('notEmpty'),
                'message' => 'Can\'t be empty.'
            )
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:53:30.437

为昵称添加`'allowEmpty' => true`规则。

```
 "nickname"  => array(
        "alphanumeric"  => array(
            "allowEmpty"=> true,
            "rule"      => "alphaNumeric",
            "message"   => "Only alpha-numeric characters",
        ),
    ), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:46:30.833

对于昵称，你试过用`required => false`吗？您可以在文档中阅读有关它[的更多信息。](http://book.cakephp.org/2.0/en/models/data-validation.html#required)

```
"nickname"  => array(
    "alphanumeric"  => array(
        "rule"      => "alphaNumeric",
        "required" => false,
        "message"   => "Only alpha-numeric characters",
    ),
), 
```

# java - 组合框 Java 的文档未更新

> ID：14706711
> 
> 赞同：0
> 
> 时间：2013-02-05T11:41:17.117
> 
> 标签：java, swing, document, documentlistener, invokelater

我在 中编写 Bing/Google`instant search`类型的功能`combo box`，因此此组合框根据用户输入的内容向用户提供建议。该程序就像一个魅力，但它们是一个我无法弄清楚如何解决的错误。问题是，一旦键入第二个字符，就会识别键入的第一个字符，字符的其他位置也是如此。

这是代码：

```
public MyClass extends JFrame
{
 private  Document doc;
public MyCode()
{
  comboxBox= new JComboBox();
  Handler handle = new Handler();
  JTextComponent comp = (JTextComponent) comboBox.getEditor().getEditorComponent();
  doc = comp.getDocument().addDocumentListener(handle);
  comboBox.addKeyListener(handle);
}

private class Handler implements DocumentListener,KeyListener
{
    String dataTobeSearched= "";
    @Override
    public void changedUpdate(DocumentEvent event) {
        try
        {
            dataTobeSearched = doc.getText(0, doc.getLength());
            System.out.println("Data to be searched "+dataTobeSearched);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
 }

    @Override
    public void keyPressed(KeyEvent event) {

            changedUpdate(null);
    }
} 
```

我究竟做错了什么？

我将 keyListener 添加到组合框编辑器中，因为在`DocumentListener`组合框中键入内容时没有调用它？如果还有其他简单的替代方法，请分享。

我该如何解决上述问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:55:33.640

Wrap the call inside `changedUpdate()` in `SwingUtilities.invokeLater()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-20T16:35:39.480

根据Oracle 网站上的[Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)`changedUpdate()`，该方法不适用于纯文本文档。如果这是您的情况，请使用`insertUpdate()`和/或`removeUpdate()`.

`SwingUtilities`在方法内部使用的建议仍然有效。

# jquery - 全选 没有选中的复选框

> ID：14706714
> 
> 赞同：3
> 
> 时间：2013-02-05T11:41:33.790
> 
> 标签：jquery, jquery-selectors, checkbox

我有一个`<li>`s 列表，其中每个都有一个复选框，我想隐藏所有`<li>`没有选中复选框的 s 。

目前我正在通过首先隐藏所有`<li>`s 然后取消隐藏具有选中复选框的那些来做到这一点，如下所示：

```
$("#categoryList").find('li').each(function () {
    $(this).addClass("searchhide");
});

$("#categoryList").find("input[type=checkbox][checked]").each(function () {
    $('#id-' + $(this).attr('rel')).removeClass("searchhide");
}); 
```

但难道不能以更直接的方式做到这一点，只隐藏那些首先需要隐藏的东西吗？

```
 $("#categoryList").find('li').not("input[type=radio][checked]").each(function () {
     $(this).addClass("searchhide");
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:54:30.010

```
$('#categoryList li > input[type="checkbox"]')
    .not(":checked")
    .parent()
    .addClass("searchhide"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:05:55.410

为此，我建议使用[过滤器功能；](http://api.jquery.com/filter/)

```
$('ul li')
    .filter(function() {
        return $(this).find('input:checked').length == 0;
    })
    .addClass('searchhide'); // or .hide() 
```

它只是选择所有`li`元素并过滤集合以仅包含那些包含未选中元素的`input`元素。

制作了这个简单的[jsfiddle](http://jsfiddle.net/st3fan/tSxyy/1/)来演示该功能。

包括相关的HTML；

```
<ul>
    <li>A <input type="checkbox" checked="checked" /></li>
    <li>B <input type="checkbox" /></li>
    <li>C <input type="checkbox" checked="checked" /></li>
    <li>D <input type="checkbox" /></li>
    <li>E <input type="checkbox" checked="checked" /></li>
    <li>F, li without a checkbox</li>
    <li>G, multiple checkboxes
        <input type="checkbox" checked="checked" />
        <input type="checkbox" />
    </li>
    <li>H <input type="text" value="text field" /></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:11:54.123

**演示**：http: [//jsbin.com/usepob/2/](http://jsbin.com/usepob/2/)

```
 $('#categoryList li :checkbox:not(:checked)').parent().addClass("searchhide"); 
```

# java - 将大量文本表示为 Hadoop 中的键

> ID：14706716
> 
> 赞同：0
> 
> 时间：2013-02-05T11:41:36.680
> 
> 标签：java, string, hash, hadoop

我正在使用 Hadoop map-reduce 程序，我想将文件的一部分表示为键。我想用它来做一些分析。但是我发现这带来了性能。谁能告诉是否有任何替代使用大量文本的方法。我们可以以任何其他格式对其进行编码吗？我还发现通过将字符串转换为字节或二进制格式。但我仍然无法将它存储在整数数据类型中。我尝试将其转换为 BigInteger 但徒劳无功，因为在减少不相似的文本时也会发生冲突。除了使用 Text 数据类型之外，如何在映射器中将大块文本表示为键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:24:26.290

您的文件部分可以保存多长时间？彼此的键有多相似？您是否考虑过使用文本的 MD5 哈希（或类似的）作为映射器中的键？

# android - 通过蓝牙将文件共享到具有相同应用程序android的另一台设备

> ID：14706726
> 
> 赞同：2
> 
> 时间：2013-02-05T11:42:05.070
> 
> 标签：android, file, bluetooth, share, device

我对通过蓝牙共享文件有一个疑问。问题是……我在两台设备上安装了同一个应用程序……我想知道是否有办法在它们之间共享文件（例如设置列表）……并将其保存在内部存储中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:46:48.823

您安装了哪个应用程序（在哪部手机上）？您安装的应用程序是否具有通过蓝牙共享文件的功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:15:10.087

是的，正如@Mount 所说，您安装的应用程序必须具有通过蓝牙共享文件的功能。如果您正在寻找这样的应用程序，您可以使用蓝牙文件管理器或其他东西。Play Store 上有很多这样的应用程序。

# java - java 6 及更高版本中的执行跟踪/流程

> ID：14706742
> 
> 赞同：1
> 
> 时间：2013-02-05T11:42:48.777
> 
> 标签：java, trace

我正在寻找一种工具，可以让我获得 Java 程序的完整执行跟踪。也就是说，我需要按顺序列出我的程序的方法调用列表。

我在 OP 谈论[Trace的地方发现](http://docs.oracle.com/javase/1.5.0/docs/guide/jpda/trace.html)[了这个 SO 问题](https://stackoverflow.com/questions/4171174/tracing-order-of-execution-in-java)，这正是我所需要的，但它似乎只在 java 1.5 及更低版本中可用。

java 6及更高版本是否有类似的东西？

# zend-framework2 - 如何在 Zend 框架 2 中更改验证器消息的翻译器？

> ID：14706743
> 
> 赞同：0
> 
> 时间：2013-02-05T11:42:52.797
> 
> 标签：zend-framework2

我尝试通过在 resources/languages/fr/Zend_validate 中使用 PhpArray 来设置默认翻译器：

```
$translator = new Translator();
        $translator->addTranslationFile(
                'phpArray',
                'resources/languages/fr/Zend_Validate.php',
                'default',
                'fr_FR'
        );
        AbstractValidator::setDefaultTranslator($translator); 
```

但它不起作用！我有这个错误：致命错误：在...中找不到类'Application\Model\AbstractValidator'

否则我会负责导入这个类：使用 Zend\Validator;

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:14:51.333

你错过了一个`use`声明吗？

```
use Zend\Validator\AbstractValidator; 
```

或尝试：

`\Zend\Validator\AbstractValidator`而不是`AbstractValidator`;

编辑：我注意到你提到`use Zend\Validator;`你应该可以使用`Validator\AbstractValidator`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T09:28:38.490

试试这个：

\Zend\Validator\AbstractValidator::setDefaultTranslator(new \Zend\Mvc\I18n\Translator($translator));

# java - 在android中使用DOM解析XML

> ID：14706751
> 
> 赞同：-2
> 
> 时间：2013-02-05T11:43:26.873
> 
> 标签：java, android, xml, xml-parsing

您好我想解析 XML 并根据用户的选择显示列表

我的 xml 看起来像这样

![在此处输入图像描述](../Images/3d5323057a8183362187f1a8bbe31e90.png)

下面是我的代码

```
 try {
            XMLParser parser = new XMLParser();
            Document doc = parser.getDomElement(xml); // getting DOM element
            NodeList n1 = doc.getElementsByTagName("company");

            // looping through all item nodes <item>
            for (int i = 0; i < n1.getLength(); i++) {
                // creating new HashMap
                Element e = (Element) n1.item(i);

                System.out.println("name node "+parser.getValue(e, "name"));
            } 
```

通过这种方式，我得到了类似的输出

```
 Company ABC
  Company XYZ 
```

公司名单

但
我会写代码

```
 NodeList n1 = doc.getElementsByTagName("province"); 
        // looping through all item nodes <item>
            for (int i = 0; i < n1.getLength(); i++) {
                // creating new HashMap
                Element e = (Element) n1.item(i);

                System.out.println("name node "+parser.getValue(e, "name"));
            } 
```

我正在获取省名列表

```
 Alberta
   Ontario
   New York
   Florida 
```

但它应该像这样工作

当我选择公司 ABC

只应显示两个供应列表

```
 Alberta
       Ontario 
```

不应该所有显示都可以帮助我如何重写我的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:49:21.233

`Node.getChildNodes()`在“公司”节点上使用。然后，要获取子省节点，按名称进行比较。例子：

```
 XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(xml); // getting DOM element
    NodeList n1 = doc.getElementsByTagName("company");

    // looping through all item nodes <item>
    for (int i = 0; i < n1.getLength(); i++) {
        Node companyNode = n1.item(i);
        NodeList childNodes = companyNode.getChildNodes();
        // Here we're getting child nodes inside the company node.
        // Only direct childs will be returned (name and province)  

        for (int j = 0; j < childNodes.getLength(); j++) {
            Node childNode = childNodes.item(j);
            if("province".equalsIgnoreCase(childNode.getName())){
                //Do something with province
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:58:22.707

这应该这样做：

```
 XMLParser parser = new XMLParser();
        Document doc = parser.getDomElement(xml); // getting DOM element
        NodeList n1 = doc.getElementsByTagName("company");

        // looping through all item nodes <item>
        for (int i = 0; i < n1.getLength(); i++) {
            Element e = (Element) n1.item(i);
            System.out.println("name node "  +parser.getValue(e, "name"));
            NodeList children = e.getChildNodes();
            for (int j = 0; j < children.getLength(); j++) {
                 Node child = children.item(j);
                 if (child.getNodeName().equalsIgnoreCase("province")) {
                      System.out.println("name node " + parser.getValue((Element)child, "name"));
                 }
            }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T23:56:56.260

试试下面的代码：

```
public class MainActivity  extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /** Create a new layout to display the view */
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(1);

    /** Create a new textview array to display the results */
    TextView name[];
    TextView website[];
    TextView category[];

    try {

        URL url = new URL(
                "http://xyz.com/aa.xml");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(url.openStream()));
        doc.getDocumentElement().normalize();

        NodeList nodeList = doc.getElementsByTagName("item");

        /** Assign textview array lenght by arraylist size */
        name = new TextView[nodeList.getLength()];
        website = new TextView[nodeList.getLength()];
        category = new TextView[nodeList.getLength()];

        for (int i = 0; i < nodeList.getLength(); i++) {

            Node node = nodeList.item(i);

            name[i] = new TextView(this);
            website[i] = new TextView(this);
            category[i] = new TextView(this);

            Element fstElmnt = (Element) node;
            NodeList nameList = fstElmnt.getElementsByTagName("name");
            Element nameElement = (Element) nameList.item(0);
            nameList = nameElement.getChildNodes();
            name[i].setText("Name = "
                    + ((Node) nameList.item(0)).getNodeValue());

            NodeList websiteList = fstElmnt.getElementsByTagName("website");
            Element websiteElement = (Element) websiteList.item(0);
            websiteList = websiteElement.getChildNodes();
            website[i].setText("Website = "
                    + ((Node) websiteList.item(0)).getNodeValue());

            category[i].setText("Website Category = "
                    + websiteElement.getAttribute("category"));

            layout.addView(name[i]);
            layout.addView(website[i]);
            layout.addView(category[i]);

        }
    } catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
    }

    /** Set the layout view to display */
    setContentView(layout);

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:59:44.500

在文档对象上调用的 getElementsBytagName 将始终返回整个文档中具有给定标签名称的**所有节点的列表。**相反，过滤掉您感兴趣的单个公司元素，然后**对其**调用 getElementsByTagName 。例如

```
Element companyEl = doc.getElementById(desiredCompanyId);
if (companyEl != null) { // always good to check
    NodeList n1 = companyEl.getElementsByTagName("province");

    // your code here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-04T13:56:19.913

尝试使用此代码

for (int i = 0; i < nodeList.getLength(); i++) {

```
 Node node = nodeList.item(i);

        name[i] = new TextView(this);
        website[i] = new TextView(this);
        category[i] = new TextView(this);

        Element fstElmnt = (Element) node;
        NodeList nameList = fstElmnt.getElementsByTagName("name");
        Element nameElement = (Element) nameList.item(0);
        nameList = nameElement.getChildNodes();
        name[i].setText("Name = "
                + ((Node) nameList.item(0)).getNodeValue());

        NodeList websiteList = fstElmnt.getElementsByTagName("website");
        Element websiteElement = (Element) websiteList.item(0);
        websiteList = websiteElement.getChildNodes();
        website[i].setText("Website = "
                + ((Node) websiteList.item(0)).getNodeValue());

        category[i].setText("Website Category = "
                + websiteElement.getAttribute("category"));

        layout.addView(name[i]);
        layout.addView(website[i]);
        layout.addView(category[i]);

    } 
```

# c# - 我需要从没有小数位的双精度值中获取数据

> ID：14706758
> 
> 赞同：-5
> 
> 时间：2013-02-05T11:43:39.913
> 
> 标签：c#, c#-4.0, double, type-conversion

我有一个`double`变量，如下所示

```
double var1 = 0; 
```

我有一个`Value = 123.25`.

例如`var1 += Math.Round(123.25)`，我得到 123.0

所以我需要得到如下所示的数据？

输出应该是 = 123

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:45:54.863

问题不在于数据，而在于字符串转换。123.0 和 123 之间的 a 没有区别`double`……它们是*完全相同*的值，具有相同的位。

因此，与其关注`double`价值本身，不如看看你是如何使用它的——你还没有告诉我们。例如，您可能只想更改正在使用的格式模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:47:11.723

如何使用：

```
(int)var1 
```

无论你需要在哪里展示它的价值？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:47:12.887

根据你的问题。如果您只想要整数值，为什么不将 Math.Round() 结果分配给 int 类型？那会让你得到你想要的。

```
int x = (int)Math.Round(123.25); 
```

我无法理解你最后不喜欢 .0 的原因？如果您打印包含 123.0 的变量，它会显示为 123。使用调试器时我只能看到 123.0。你是如何使用价值的？如果您能告诉我们，如果提供的解决方案对您没有用处，我们可以找到更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:47:30.200

```
int someOtherInt = Convert.ToInt32(var1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T11:47:32.280

您对类型感到困惑。你不想`double`在这种情况下使用它的声音。相反，使用`int`.

```
int var1 = 0;
int var2 = (int)123.25;
int output = var1 + var2; 
```

`output`在这种情况下是 123。 Cast to`int`消除了对`Math.Round`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T12:31:54.420

我强烈建议您阅读以下内容：http: [//www.whathaveyoutried.com](http://www.whathaveyoutried.com)

如果您遵循该文章中的建议，您将能够立即获得解决问题的帮助。

# html - 是否有网页工具允许用户从他们上传的带有配乐的照片中创建动画？

> ID：14706762
> 
> 赞同：1
> 
> 时间：2013-02-05T11:43:55.050
> 
> 标签：html, animation, web, photo-gallery, movie

任何人都可以帮助解决这个问题吗？

我们需要一些**免费**工具（或者可能是一些技术）来在 HTML 页面上使用它。我们的网站用户有相册。画廊之类的东西。它已经上传了。

主要目的是让用户从这些**照片****中创建一些动画甚至电影，**并在那里**添加****一些配乐**..

 ******Soundtrack 可以直接上传到这个工具中。

我们考虑过 html5、Js，但它不可靠且不可转换（我们还希望此动画可以转换为某种视频格式）。

帮助！谢谢...******

# java - 无法解决 java.lang.NullPointerException

> ID：14706766
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:44:00.483
> 
> 标签：java, spring, junit, persistence

我有三个班级 - 'ABC' 'PQR' 和 'XYZ'

### ABC类

```
@Test
public void getModulesid() throws Exception {
    Long GrpId= PQR.getExistingGroupId();
    System.out.println(GrpId);
} 
```

### PQR 类

```
public static Long getExistingGroupId() throws Exception {
    Long GrpId;
    List<MsecBusGroups> busGroupsList = new ArrayList<MsecBusGroups>();
    busGroupsList=XYZ.getBusGroups();
    if (busGroupsList!=null){
        MsecBusGroups It1=busGroupsList.get(busGroupsList.size()-1);
        GrpId=It1.getId();
        return GrpId;
    } else {
        throw new Exception("BUSINESS GROUPS LIST RETURNED IS NULL");
    }
} 
```

### XYZ 类

```
public List<MsecBusGroups> getBusGroups() throws PersistenceException {

    final String METHOD_NAME = "getBusGroups()";
    LogHelper.logEntry(CLASS_NAME, METHOD_NAME);
    List<MsecBusGroups> list = null;
    try {
        Query q = em.createNamedQuery("getBusGroups");
        list = q.getResultList();
        if (list == null) {
            LogHelper.debug(CLASS_NAME, METHOD_NAME, "No Record   Found");
        }
    ...
} 
```

当我在 ABC 类中运行测试方法时，它会抛出`java.lang.NullPointerException`.

```
java.lang.NullPointerException
    at com.causeway.platform.security.model.actions.BusServiceActions.getExistingGroupId(BusServiceActions.java:202)
    at com.causeway.platform.security.model.serviceImpl.SecurityBusServiceTest.testDeleteModule(SecurityBusServiceTest.java:1231)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:01:12.553

我看到这`getBusGroups()`不是静态的。这意味着 in`busGroupsList=XYZ.getBusGroups();` `XYZ`是一个变量。NPE 可能因为`XYZ`为空而被抛出。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T11:54:53.607

`securityBusService` is probably `null`. Where is it initialized?

# mysql - MySQL使用分区并保持主键不变

> ID：14706770
> 
> 赞同：2
> 
> 时间：2013-02-05T11:44:21.460
> 
> 标签：mysql, primary-key, partitioning

我正在使用 MySQL 5.5，并且我在生产中有一个存储客户交易的现有表。该表的简化版本是：

```
CREATE TABLE transactions (
  id INT NOT NULL AUTO_INCREMENT,
  description CHAR(100),
  posted DATE,
  PRIMARY KEY (id)
) ENGINE=MyISAM 
```

我们正在探索在交易日期上使用分区的想法，以使使用日期过滤的报告执行得更快。[由于MySQL 分区键文档](http://dev.mysql.com/doc/mysql-reslimits-excerpt/5.1/en/partitioning-limitations-partitioning-keys-unique-keys.html)中解释的主键和分区限制，以下尝试失败。

```
mysql> CREATE TABLE transactions (
    ->   id INT NOT NULL AUTO_INCREMENT,
    ->   description CHAR(100),
    ->   posted DATE,
    ->   PRIMARY KEY (id)
    -> ) ENGINE=MyISAM
    -> PARTITION BY HASH(MONTH(posted)) PARTITIONS 12;
ERROR 1503 (HY000): A PRIMARY KEY must include all columns in the table's partitioning function 
```

一种可能的解决方法如下：

```
CREATE TABLE transactions (
  id INT NOT NULL AUTO_INCREMENT,
  description CHAR(100),
  posted DATE,
  PRIMARY KEY (id, posted)
) ENGINE=MyISAM
PARTITION BY HASH(MONTH(posted)) PARTITIONS 12; 
```

另一种解决方法是：

```
CREATE TABLE transactions (
  id INT NOT NULL AUTO_INCREMENT,
  description CHAR(100),
  posted DATE,
  KEY (id)
) ENGINE=MyISAM
PARTITION BY HASH(MONTH(posted)) PARTITIONS 12; 
```

在这两种解决方法中，数据库都不会阻止具有相同 ID 但发布日期不同的多条记录的情况。有没有办法在发布的字段上使用分区并保持原始的唯一约束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:13:58.723

我一直面临着同样的“问题”，我发现的一个解决方法是将我的桌子分成两部分，在你的情况下导致这样的事情：

```
CREATE TABLE transactions (
  id INT NOT NULL AUTO_INCREMENT,
  description CHAR(100),
  PRIMARY KEY (id)
) ENGINE=MyISAM; 
```

和另一个：

```
CREATE TABLE transactions_date (
  id INT NOT NULL,
  posted DATE
) ENGINE=MyISAM
PARTITION BY HASH(MONTH(posted)) PARTITIONS 12; 
```

明显的问题是您必须向应用程序添加一些额外的逻辑，例如在使用`SELECT`语句时需要获取两个表以检索所有数据。您可能可以使用[触发器](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)来帮助您完成与和相关`INSERT`的任务。`UPDATE``DELETE`

***请注意**：在or列中使用[分区修剪](http://dev.mysql.com/doc/refman/5.5/en/partitioning-pruning.html)可以受益的唯一功能是：和（最后一个仅从 MySQL 5.5 开始可用）。`DATE``DATETIME``YEAR()``TO_DAYS()``TO_SECONDS()`*

# jquery - jQuery崩溃问题

> ID：14706780
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:44:49.040
> 
> 标签：jquery

加载时看起来像这样。
![在此处输入图像描述](../Images/eacb0e19a8c49710f58126a0fc2f579b.png)

像这样展开
![在此处输入图像描述](../Images/8083163c8e8046dbac03d4db2bee26d1.png)

如果我单击知道如何 + 符号，那么它将折叠运行良好的新功能。

但是，如果单击最新消息并再次单击最新消息，则折叠可以正常工作，但 + 符号的图像不会改变。

我也必须改变那个标志。请帮助，在此先感谢。

HTML

```
<div class="Wobnavi">
    <ul class="rootFolders">

            <li id="wobsubfolder1">
            <h2 class="more_folders" id="wobsubfolder1"> <a href="#">WHAT'S NEW?</a> </h2>

                   <ul class="subFolders">

                        <li>
                            <a href="#">test</a>
                        </li>

                   </ul>

            </li>

            <li id="WOB-events-folder">
            <h2 class="null" id="WOB-events-folder"> <a href="#">EVENTS</a> </h2>

            </li>

            <li id="wobsubfolder2">
            <h2 class="more_folders" id="wobsubfolder2"> <a href="#">KNOW-HOW</a> </h2>

                   <ul class="subFolders">

                        <li>
                            <a href="#">Legacy &amp; brand values</a>
                        </li>

                   </ul>

            </li>

            <li id="wobsubfolder3">
            <h2 class="null" id="wobsubfolder3"> <a href="#">ATTRACTIONS</a> </h2>

            </li>

            <li id="HERITAGE">
            <h2 class="null" id="HERITAGE"> <a href="#">heritage</a> </h2>

            </li>

    </ul>
</div> 
```

jQuery：

```
jQuery(document).ready(function(){
   jQuery('.Wobnavi .rootFolders h2').click(function(){
    var main = jQuery('.Wobnavi .rootFolders h2');
                 var clk = jQuery(this);
                 var it = main.hasClass('less_folders') ?  (main.removeClass('less_folders'), clk.toggleClass('less_folders')) : clk.toggleClass('less_folders');

var co = jQuery('.subFolders');
                 var el = jQuery(this).next(co);   
                 var doit =  el.is(':hidden') ? ( co.slideUp('1000'), el.slideDown('1000')) : co.slideUp('1000') ;
                });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:33:55.937

最后我自己做了。

```
jQuery('.Wobnavi .rootFolders h2').click(function(){
                     var clk = jQuery(this);
                     if(clk.hasClass('more_folders')){
                         clk.removeClass('more_folders').addClass('less_folders');
                         jQuery('.Wobnavi .rootFolders h2').each(function( index, ele ){
                             if( (jQuery(ele).attr('id') != clk.attr('id')) && (jQuery(ele).hasClass('more_folders') || jQuery(ele).hasClass('less_folders'))){

                                     jQuery(ele).attr('class','more_folders');

                             }
                         });
                     }else if(clk.hasClass('less_folders')){
                         clk.removeClass('less_folders').addClass('more_folders');
                     }

                     var co = jQuery('.subFolders');
                     var el = jQuery(this).next(co);   
                     var doit =  el.is(':hidden') ? ( co.slideUp('1000'), el.slideDown('1000')) : co.slideUp('1000') ;
                }); 
```

# knockout.js - knockoutjs 如何获取选中的选项arrayObject

> ID：14706784
> 
> 赞同：6
> 
> 时间：2013-02-05T11:45:14.490
> 
> 标签：knockout.js, knockout-2.0

我想获取选定的选项对象

```
 <select data-bind="options: availableCountries,
                       value: selectedCountry, event: { select: onSelect}"></select>

<script type="text/javascript">
    // Constructor for an object with two properties
    var Country = function(name, population) {
        this.countryName = name;
        this.countryPopulation = population;   
    };       

    var viewModel = {
        availableCountries : ko.observableArray([
            new Country("UK", 65000000),
            new Country("USA", 320000000),
            new Country("Sweden", 29000000)
        ]),
        selectedCountry : ko.observable(), // Nothing selected by default
        onSelect: function(){
              console.log(viewModel.selectedCountry)
              // it is showing just an country name and what i what is whole object
              // e.g. { "UK", 65000000 } // that is selected option in selected box

        }

    };
</script> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T11:57:37.850

您不必将选择事件添加到控件。更有效的方法是订阅`selectedCountry`更改：

```
viewModel.selectedCountry.subscribe(function (data) {
        console.log(data)
    }); 
```

如果您不希望默认选择任何国家/地区，则必须将`optionsCaption`绑定添加到`data-bind`：

```
<select data-bind="options: availableCountries,
                       optionsText: 'countryName',
                       value: selectedCountry,
                       optionsCaption: 'Select...'"></select> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/tuMta/1/](http://jsfiddle.net/vyshniakov/tuMta/1/)

# mysql - 如果 ibdata1 文件被移动，为什么 mysql 不会重新启动/受到影响？

> ID：14706787
> 
> 赞同：1
> 
> 时间：2013-02-05T11:45:28.020
> 
> 标签：mysql, innodb

在我的服务器上托管了两个网站（比如 abc.com 和 test.xyz.com）

我正在尝试为 test.xyz.com 重建数据库并在此过程中

1.我删除了与之相关的数据库。2.stopped mysql (/etc/init.d/mysqld stop) 3.moved ibdata1 文件(/var/lib/mysql/ibdata1) 到/tmp/ 4\. 尝试启动mysql

但它还没有开始并试图使用终端连接到数据库，我得到了`Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock'`。

我试图将 ibdata1 文件从 /tmp/ 移回 /var/lib/mysql 但已经有一个文件 ibdata1\. 这是一个奇迹，但由于没有数据库连接，现在网站无法正常工作。

这两个站点现在都停止了工作。请帮忙

并且- /etc/init.d/mysqld 状态给出- mysqld (pid 31905) 正在运行...

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:54:06.350

快速解决：

*   停止你的服务器
*   删除 /var/lib/mysql 中新创建的 ibdata1 文件。该文件不存在时会自动创建。另请注意，**它很可能包含服务器上所有数据库的数据。**
*   将 ibdata1 从 tmp 文件夹复制回 /var/lib/mysql
*   再次启动服务器

我稍后会解释，当我有更多时间时，但我认为你可能迫切需要快速修复 :)

更新：（来自评论）您无法连接，好吧，这可能是**任何**原因。我认为最好的办法（无论如何你都没有太多可放松的）就是你干脆杀死mysql。

做

```
ps aux | grep mysqld 
```

然后

```
kill -9 <the processnumber of mysql from the previous command> 
```

然后按照我之前说的做。永远不要再简单地移动 ibdata1 :)

我也投票关闭作为offtopic。然后它将被移至 dba.stackexchange.com，这是一个更专注于管理数据库服务器的合作伙伴站点。你可能会在那里得到更好的帮助。

# wordpress - WordPress (3.5.1) 主题媒体上传被冻结

> ID：14706788
> 
> 赞同：0
> 
> 时间：2013-02-05T11:45:31.803
> 
> 标签：wordpress, upload, media

我在这里阅读了一些主题，但没有找到适合我的解决方案。当我尝试为帖子/作品集设置特征图像时，媒体上传窗口被冻结（甚至无法关闭它 - 按下 esc 就可以了）并且也无法设置特征图像，上传图像，..

如果在 IE 8 中尝试此操作，则在打开媒体上传（按设置功能图像）时出现弹出错误，内容为“第 2 行内存不足！”

我正在使用 Wordpress 3.5.1 版，在此先感谢您提供可行的解决方案。

天呐！

可以补充一点，如果切换，IE8 还会给出以下错误：wp-admin/js/media-upload.min.js?ver=3.5.1 和 wp-includes/js/tinymce/tiny_mce.js?ver=358-23224 tomeeleven 上传工作正常，但不在我的主题中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:15:11.407

如果在默认的 Wordpress 主题（如二十一或二十二）中上传工作正常，则意味着您的主题存在 javascript 冲突，尤其是。由 IE8 错误指示。可能是插件，但很可能是主题。

查看[http://wordpress.org/support/topic/troubleshooting-wordpress-35-master-list?replies=4](http://wordpress.org/support/topic/troubleshooting-wordpress-35-master-list?replies=4)以查看您的主题（或插件）是否被列为有问题并了解如何检查 javascript 错误这将影响 Wordpress 管理区域。

将[Firebug](http://getfirebug.com/)与 Firefox 一起使用，或使用[Chrome](https://developers.google.com/chrome-developer-tools/docs/overview)或[Safari](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/Safari_Developer_Guide/2SafariDeveloperTools/SafariDeveloperTools.html)或[IE](http://msdn.microsoft.com/en-us/library/ie/gg589507(v=vs.85).aspx)中的开发人员工具来查看您的网站上加载了哪些 javascript 并查看任何错误和冲突。

# xml - 签入 for-each 循环 xsl 1.0

> ID：14706790
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:45:39.930
> 
> 标签：xml, xslt, xslt-1.0

我有一个包含多行数据的 XML。

```
<abc>
 <def>some text1</def>
 <xyz>stack overflow</xyz>
</abc>
<abc>
 <def>some text2</def>
 <xyz>stack overflow 2)</xyz>
</abc>
<abc>
 <def>some text</def>
 <xyz>stack overflow 3)</xyz>
</abc> 
```

**现在我想在XSL 1.0**中为此编写代码， 它将开始检查每一行，即元素中的值/文本“2)”是否仅存在。每当它在循环期间第一次遇到文本“2)”时，它应该打印“XSL_1.0 Programming”作为值并应该退出循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:53:31.453

您以错误的方式处理这个问题 - XSLT 不是一种过程语言，没有办法“退出循环”。相反，您需要考虑如何以更具声明性的方式识别您感兴趣的节点。例如 XPath 表达式

```
abc[contains(., '2)')] 
```

标识`abc`在其后代文本节点中任何位置包含字符串“2)”的所有元素，因此

```
(abc[contains(., '2)')])[1] 
```

将只提取第一个这样的元素，或者如果没有匹配的元素，则提取一个空节点集。如果你想处理`abc`元素直到并包括第一个包含“2）”的元素，但不是任何后续元素，你可以使用类似的东西

```
<xsl:for-each select="abc[not(preceding-sibling::abc[contains(., '2)')])]"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T13:10:37.000

正如 Ian Roberts 所解释的，在 XSLT 中没有打破循环的概念。您必须提前决定要处理哪些节点，听起来您只对元素感兴趣，包括包含“2)”的第一个**abc元素。**

实际上，在这里使用**xsl:apply-templates**可能会更好。

```
<xsl:apply-templates select="abc[not(preceding-sibling::abc[contains(xyz, '2)')])]" /> 
```

因此，这将选择所有没有前面的 '2)' 元素的元素。

接下来，您可以根据**xyz**元素的内容添加模板以匹配**abc**元素。例如，要输出“XSL_1.0 Programming”，如果它有一个 '2)'，请执行以下操作

 **```
<xsl:template match="abc[contains(xyz, '2)')]">
    <xsl:text>XSL_1.0 Programming</xsl:text>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

    <xsl:template match="/*">
        <xsl:apply-templates select="abc[not(preceding-sibling::abc[contains(xyz, '2)')])]" />
    </xsl:template>

    <xsl:template match="abc">
        <xsl:value-of select="concat(xyz, '&#10;')" />
    </xsl:template>

    <xsl:template match="abc[contains(xyz, '2)')]">
        <xsl:text>XSL_1.0 Programming&#10;</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 时（注意它有一个根元素）

```
<root>
<abc>
 <def>some text1</def>
 <xyz>stack overflow</xyz>
</abc>
<abc>
 <def>some text2</def>
 <xyz>stack overflow 2)</xyz>
</abc>
<abc>
 <def>some text3</def>
 <xyz>stack overflow</xyz>
</abc>
<abc>
 <def>some text</def>
 <xyz>stack overflow 3)</xyz>
</abc>
</root> 
```

以下是输出

```
stack overflow
XSL_1.0 Programming 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:37:04.013

这个怎么样：

```
<xsl:if test="abc[contains(xyz, '2)')]"> 
   <xsl:text>XSL_1.0 Programming</xsl:text> 
</xsl:if> 
```**

# oracle - 无法使用 Oracle 序列工作 EclipseLink DynamicEntity

> ID：14706793
> 
> 赞同：2
> 
> 时间：2013-02-05T11:45:40.350
> 
> 标签：oracle, jpa, orm, eclipselink, sequence

我正在尝试使用 EclipseLink 2.3 持久化动态实体。如果我没有配置序列并且只是为字段分配一个值，它就可以工作。同样不设置值有效，序列正在与数据库中的触发器一起使用。但我想获得生成的字段 id（序列的下一个值）。

有一个包含 2 列 RD_ID 和 RD_NAME 的简单表，我假设我应该将 NativeSequence 用于 Oracle 序列。

```
...
Sequence seq = new NativeSequence("RD_SEQ", 1);
dynamicTypeBuilder.configureSequencing(seq, "RD_SEQ", "RD_ID");
...
DynamicEntity entity;
entity = (DynamicEntity) classDesc.getInstantiationPolicy().buildNewInstance();
// entity.set("rdId", new BigDecimal(1));
entity.set("rdName", "some text");

...
getEntityManager().persist(entity);
System.out.println(entity.get("rdId")); 
```

抛出异常：

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist
Error Code: 942
Call: UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?
    bind => [2 parameters bound]
Query: DataModifyQuery(name="SEQUENCE" sql="UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:840)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:906)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:592)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717)
    at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:253)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:207)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeNoSelectCall(DatasourceCallQueryMechanism.java:236)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeNoSelect(DatasourceCallQueryMechanism.java:216)
    at org.eclipse.persistence.queries.DataModifyQuery.executeDatabaseQuery(DataModifyQuery.java:85)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.internal.sessions.AbstractSession.internalExecuteQuery(AbstractSession.java:2831)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
    at org.eclipse.persistence.sequencing.QuerySequence.update(QuerySequence.java:340)
    at org.eclipse.persistence.sequencing.QuerySequence.updateAndSelectSequence(QuerySequence.java:277)
    at org.eclipse.persistence.sequencing.StandardSequence.getGeneratedVector(StandardSequence.java:71)
    at org.eclipse.persistence.sequencing.DefaultSequence.getGeneratedVector(DefaultSequence.java:163)
    at org.eclipse.persistence.sequencing.Sequence.getGeneratedVector(Sequence.java:257)
    at org.eclipse.persistence.internal.sequencing.SequencingManager$Preallocation_Transaction_NoAccessor_State.getNextValue(SequencingManager.java:468)
    at org.eclipse.persistence.internal.sequencing.SequencingManager.getNextValue(SequencingManager.java:1067)
    at org.eclipse.persistence.internal.sequencing.ClientSessionSequencing.getNextValue(ClientSessionSequencing.java:70)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.assignSequenceNumber(ObjectBuilder.java:349)
    at org.eclipse.persistence.internal.descriptors.ObjectBuilder.assignSequenceNumber(ObjectBuilder.java:308)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.assignSequenceNumber(UnitOfWorkImpl.java:465)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNotRegisteredNewObjectForPersist(UnitOfWorkImpl.java:4231)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.registerNotRegisteredNewObjectForPersist(RepeatableWriteUnitOfWork.java:513)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4176)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:440)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.persist(EntityManagerWrapper.java:269)
... 
```

我错过了什么还是应该使用不同的方法来获取序列号？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:54:18.957

从错误中，您正在使用 TABLE 排序，并且您没有 SEQUENCE 表。如果您希望使用 TABLE 排序，则需要创建此表。

您似乎想使用 Oracle SEQUENCE，因此您需要使用 Session 的登录名注册 NativeSequence 对象。

session.getLogin().addSequence(sequence);

您应该确保在连接会话之前注册序列。

# zend-framework - 如何完全卸载 WAMPSERVER

> ID：14706801
> 
> 赞同：2
> 
> 时间：2013-02-05T11:46:13.753
> 
> 标签：zend-framework, wamp, uninstallation, wampserver

我最近卸载了，然后重新安装了 WAMP，但现在我的域（zend 项目）出现故障。我只能访问这些域的首页，但不能访问任何其他页面，我在上一个线程中解释了该[线程](https://stackoverflow.com/questions/14677307/cannot-access-zend-projects-after-uninstalling-and-re-installing-wamp)上的所有建议以及更多到目前为止都没有工作。

所以我在google上搜索了另一个想法，这表明我第一次卸载时WAMP没有完全卸载，解决方案是卸载后去regedit，搜索“wamp”然后删除所有与wampserver相关的记录。我已经这样做了，但我得到了 216 条记录，其中只有三个在记录名称上提到了“wamp”。我觉得删除所有 216 条记录是不对的，我很害怕，因为这些记录指向 Windows 中的其他程序和系统。但是这个[博客](https://sites.google.com/site/drupaldebugmultisite/)似乎建议我将它们全部删除，如下所示：

> ...进入注册表。突出显示“计算机”并按 [Ctrl][F] 组合键以启动搜索框。输入“wamp”作为搜索词。删除与 WampServer 相关的记录的所有实例。在正常安装中，可能有 70 个或更多这样的条目。只需咬紧牙关完成它，同时确保搜索结果确实是与 WampServer 相关的条目......

我已经删除了提到“wampserver”的 3 条记录，但还没有解决我的问题。所以我的问题是：指令是否可能是删除整个 216 条记录，以便完全清除我的系统中旧 WAMP 安装的所有痕迹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:34:36.760

删除 WampServer 应包括：

*   使用包含的卸载服务批处理文件或[在命令行中停止和卸载服务（wampapache 和 wampmysql）](http://www.howtogeek.com/howto/windows-vista/how-to-delete-a-windows-service-in-vista-or-xp/)
*   删除 wamp 文件夹

请记住对以下各项的任何更改：

*   您的网络根文件夹
*   您的主机文件
*   你的防火墙

现在，如果您已经完成了上述操作并且仍然存在问题，那么很可能还有其他问题。例如不同的 httpd 配置、.htaccess 文件、不同版本的 wampserver 以及 PHP 及其模块、数据库及其安全凭证等组件。

检查以上内容，如果有更具体的错误，也请随时发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:04:16.100

谢谢你们的时间。我认为我在 OP 中的操作成功地完全卸载了 wampserver。只是我新安装的 WAMP 行为不端，没有找到主页以外的页面。它已按启用排序 `mod_rewrite`。虽然我不太确定出了什么问题，因为我在`mod_rewrite`没有解决方案的情况下分别应用了相同的内容。

# haskell - 函数式语言中的动态编程

> ID：14706805
> 
> 赞同：0
> 
> 时间：2013-02-05T11:46:37.037
> 
> 标签：haskell, functional-programming

我学习haskell。我遇到了无法保存中间计算步骤的问题。感觉没效果。如何在函数式编程中使用动态编程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T12:24:14.287

> 我在 [in Haskell] 中遇到无法保存中间计算步骤的问题。

我不知道你用什么资源来学习它，但它们显然不是最好的。

例如：

```
let 
    intermediate = {- calculation step -}
in ... 
```

将计算步骤的结果保存在`intermediate`. （更好：它将变量绑定`intermediate`到值。）

此外，引用相关的维基百科条目：

> 在数学、计算机科学和经济学中，动态规划是一种通过将复杂问题分解为更简单的子问题来解决复杂问题的方法。它适用于表现出重叠子问题[1]和最优子结构（如下所述）的性质的问题。在适用时，该方法比简单方法花费的时间要少得多。
> 
> 动态规划背后的关键思想非常简单。一般来说，要解决一个给定的问题，我们需要解决问题的不同部分（子问题），然后将子问题的解决方案结合起来，达到一个整体的解决方案。通常，许多这些子问题实际上是相同的。动态规划方法试图只解决每个子问题一次，从而减少计算次数：一旦计算了给定子问题的解决方案，它就会被存储或“记忆化”：下次需要相同的解决方案时，它简直是抬头。当重复子问题的数量作为输入大小的函数呈指数增长时，这种方法特别有用。

很明显，Haskell 很好地支持了这种解决问题的方式。例如，在最简单的情况下，可以随身携带一张地图，以保存已经解决的子问题及其解决方案。更高级的方法可以使用 State Monad。等等。

# eclipse - eclipse buildpath错误与maven依赖

> ID：14706813
> 
> 赞同：0
> 
> 时间：2013-02-05T11:46:55.650
> 
> 标签：eclipse, maven

在我的 pom.xml 我有以下依赖

```
<dependency>
   <groupId>org.codehaus.woodstox</groupId>
   <artifactId>wstx-asl</artifactId>
   <version>3.2.8</version>
</dependency> 
```

我的eclipse按预期下载了jar文件，我的代码编译得很好。但是当我执行我的 JUnit 测试时，我遇到了一个异常，这是缺少依赖项时所期望的场景。

如果我将依赖项更改为

```
<dependency>
   <groupId>org.codehaus.woodstox</groupId>
   <artifactId>wstx-asl</artifactId>
   <version>3.2.8</version>
   <scope>system</scope>
   <systemPath>\path\to\wstx-asl-3.2.8.jar</systemPath>
</dependency> 
```

问题仍然存在。但是，当我从 pom.xml 中删除依赖项并使用标​​准 Eclipse 方式将其添加到构建路径时，一切正常。

执行`mvn package`测试执行得很好。只有当我在 Eclipse 环境中运行它们时才会出现问题。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:58:54.983

Eclipse 有一个单独的构建路径。在 Eclipse 中使用 maven 项目时，您需要重建 Eclipse 用来指向下载的 Maven 工件的构建路径。

为此，`mvn eclipse:eclipse`您可以在项目上运行，然后**在 eclipse 中清理和构建项目**。

这个 Maven 插件在你的项目中重建你的 .classpath 文件，这个文件存储你的构建路径。

见：[http ://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)

# c++ - 应用哪种数据结构？

> ID：14706814
> 
> 赞同：2
> 
> 时间：2013-02-05T11:47:00.880
> 
> 标签：c++, data-structures

有一个大小矩阵在`n*n`哪里`n<=500000`。最初所有元素都是 0。每次有输入时，我们必须将整行或整列更新一定数量

例子：

```
n=3    
RS 1 10 
```

意味着我们必须将第 1 行更新 10

```
0 0 0
0 0 0
0 0 0 
```

更新后

```
10 10 10
 0  0  0    
 0  0  0 
```

我们必须为列做同样的事情。最后，我们必须计算矩阵中 0 的数量

因为`n`不能应用非常大的二维数组。那么应用哪种数据结构呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:50:58.910

Well this is interesting, it would ofcourse depend on the number of operations you are going to perform but I would save it as 2 single dimension arrays. One with the row inputs and the other with the column inputs.

row[n] and col[n]

So the when you want to know the value of say element (4,7) it would be row[4] + col[7]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T12:26:19.083

进一步考虑@Techmonk 的回答：我提出了两种方法：

# 1\. Techmonk的

O(1) 用于更新，O(n^2) 用于恢复 0 的数量

```
 class matZeroCount {
     std::vector< int > m_rows;
     std::vector< int > m_cols;
 public:
     matZeroCount( unsigned int n ): m_rows( n, 0 ), m_cols( n, 0 ) {};
     void updateRow( unsigned int idx, int update ) { 
          // check idx range w.r.t m_rows.size()
          // ignore update == 0 case
          m_rows[ idx ] += update; 
     }
     void updateCol( unsigned int idx, int update ) { 
          // check idx range w.r.t m_cols.size()
          // ignore update == 0 case
          m_cols[ idx ] += update; 
     }
     unsigned int countZeros() const {
         unsigned int count = 0;
         for ( auto ir = m_rows.begin(); ir != m_rows.end(); ir++ ) {
             for ( auto ic = m_cols.begin(); ic != m_cols.end(); ic++ ) {
                  count += ( ( *ir + * ic ) == 0 );
             }
         }
         return count;
     }
 }; 
```

# 2.快速计数

此方法允许 O(1) 来恢复零的数量，但每次更新的成本为 O(n)。如果您期望的更新少于 O(n) - 这种方法可能更有效。

```
 class matZeroCount {
     std::vector< int > m_rows;
     std::vector< int > m_cols;
     unsigned int       m_count;
 public:
     matZeroCount( unsigned int n ): m_rows( n, 0 ), m_cols( n, 0 ), count(0) {};
     void updateRow( unsigned int idx, int update ) { 
          // check idx range w.r.t m_rows.size()
          // ignore update == 0 case
          m_rows[ idx ] += update;
          for ( auto ic = m_cols.begin(); ic != m_cols.end(); ic++ ) {
               m_count += ( ( m_rows[ idx ] + *ic ) == 0 ); // new zeros
               m_count -= ( ( m_rows[ idx ] - update + *ic ) == 0 ); // not zeros anymore
          }
     }
     void updateCol( unsigned int idx, int update ) { 
          // check idx range w.r.t m_cols.size()
          // ignore update == 0 case
          m_cols[ idx ] += update; 
          for ( auto ir = m_rowss.begin(); ir != m_rows.end(); ir++ ) {
               m_count += ( ( m_cols[ idx ] + *ir ) == 0 ); // new zeros
               m_count -= ( ( m_cols[ idx ] - update + *ir ) == 0 ); // not zeros anymore
          }

     }
     unsigned int countZeros() const { return m_count; };
 }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T12:44:31.633

[稀疏矩阵](http://en.wikipedia.org/wiki/Sparse_matrix)是一种适用于大多数填充为零的矩阵的数据结构。它的实施以空间效率为导向。它适用于像您这样的情况，当您拥有信息量很少的大型矩阵时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T11:51:26.843

您可能需要一个内部包含`std::list <std::list<int>>`.

但实际上，你能在内存中同时保存 250000000000 个整数吗？我对此表示怀疑！

您可能需要使用一个非常不同的、文件到内存映射的二维整数数组数据结构。

# c++ - 具有不同类型参数的泛型类型的特征类实现

> ID：14706815
> 
> 赞同：1
> 
> 时间：2013-02-05T11:47:03.797
> 
> 标签：c++, templates, c++11, variadic-templates, typetraits

我有以下特质类

`template<typename T> struct FeatureType;`

我像这样使用它，效果很好：

```
class Foo { };
template<> struct FeatureType<Foo> {
  typedef int value;
};

template<typename T> class Bar { };
template<typename T> struct FeatureType<Bar<T>> {
  typedef T value;
}; 
```

有没有办法将泛型类型的这种实现扩展到具有多个类型参数的那些（与`Bar`上面不同）？以下不起作用

```
template<typename A, typename B> class Huh { };
template<typename A, typename B> struct FeatureType<Huh<A,B>> {
  typedef A value;
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:50:07.783

## 常规模板

常规模板不会对其模板参数进行重载，但您可以对任意多个模板参数进行部分特化。只要您将`;`每个结构声明/定义放在后面，您的代码就应该可以工作。（请注意，将模板内的嵌套类型表示为`type`，并将值表示为 是一种习惯`value`）：

```
#include <iostream>

template<typename T>
struct FeatureType;

class Foo { };
template<> struct FeatureType<Foo> 
{
  typedef int type;
  type value;
};

template<typename T> class Bar { };
template<typename T> struct FeatureType<Bar<T>> 
{
  typedef T type;
  type value;
};

template<typename A, typename B> class Huh {};
template<typename A, typename B>
struct FeatureType< Huh<A,B> > 
{ 
   typedef A type; 
   type value;
};

int main()
{
  FeatureType<Foo> f0;
  f0.value = 0;

  FeatureType< Bar<int> > f1;
  f1.value = 1;

  FeatureType< Huh<int, int> > f2;
  f2.value = 2;

  std::cout << f0.value << f1.value << f2.value;   
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/3NI0DU%2416)上的输出(gcc 4.7.2)

**注意**：即使您有多个形式模板参数（`A`、`B`或任意数量），实际模板也**部分专门**用于单个类`Huh<A, B>`

## 可变参数模板

如果您确实希望有多个版本`FeatureType`采用不同数量的模板参数，则需要使用可变参数模板（C++11）

```
#include <iostream>

template<typename... Args>
struct FeatureType;

template<> struct FeatureType<int> 
{
  typedef int type;
  type value;
};

template<typename T> struct FeatureType< T > 
{
  typedef T type;
  type value;
};

template<typename A, typename B>
struct FeatureType< A, B > 
{ 
   typedef A type; 
   type value;
};

int main()
{
  FeatureType< int > f0;
  f0.value = 0;

  FeatureType< int > f1;
  f1.value = 1;

  FeatureType< int, int > f2;
  f2.value = 2;

  std::cout << f0.value << f1.value << f2.value;   
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/1MfE84%242)上的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:58:03.807

我不确定你到底尝试了什么，但你肯定可以专注于尽可能多的模板参数：

```
template <typename A, typename B>
class foo { };

template <typename T>
struct feature_type {};

template <typename A, typename B>
struct feature_type<foo<A,B>> {
  typedef A type1;
  typedef A type2;
};

int main(int argc, const char* argv[])
{
  typename feature_type<foo<int,char>>::type1 x;
  typename feature_type<foo<int,char>>::type2 y;
  return 0;
} 
```

[看到它在行动](http://ideone.com/hRV1cw)。

# ruby-on-rails - Rails：根据模块/关注中的父类名称动态定义类方法

> ID：14706820
> 
> 赞同：11
> 
> 时间：2013-02-05T11:47:13.240
> 
> 标签：ruby-on-rails, ruby, module, metaprogramming, mixins

我想根据包含这个 Mixin 的类名在 Mixin 中动态生成一个类方法。

这是我当前的代码：

```
module MyModule  
  extend ActiveSupport::Concern  

  # def some_methods  
  #   ...  
  # end  

  module ClassMethods  

    # Here is where I'm stuck...
    define_method "#{self.name.downcase}_status" do  
      # do something...  
    end  

  end  
end  

class MyClass < ActiveRecord::Base  
  include MyModule  
end  

# What I'm trying to achieve:
MyClass.myclass_status 
```

但这给了我以下方法名称：

```
MyClass.mymodule::classmethods_status 
```

在方法定义中获取基类名称有效（self，self.name ...），但我无法使其适用于方法名称...

到目前为止，我已经尝试过

```
define_method "#{self}"
define_method "#{self.name"
define_method "#{self.class}"
define_method "#{self.class.name}"
define_method "#{self.model_name}"
define_method "#{self.parent.name}" 
```

但这似乎都不起作用：/

有什么方法可以检索基类名称（不确定如何调用包含我的模块的类）。我已经为这个问题苦苦挣扎了好几个小时，但我似乎无法找到一个干净的解决方案:(

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T12:26:55.480

你不能那样做——此时还不知道哪个类（或哪些类）包含该模块。

如果您定义了一个`self.included`方法，它将在每次包含模块时被调用，并且执行包含的事物将作为参数传递。或者，由于您使用的是 AS::Concern，您可以这样做

```
included do 
  #code here is executed in the context of the including class
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T14:29:19.470

我找到了一个干净的解决方案：使用`define_singleton_method`（在 ruby​​ v1.9.3 中可用）

```
module MyModule  
  extend ActiveSupport::Concern  

  included do
    define_singleton_method "#{self.name}_status" do
      # do stuff
    end
  end

  # def some_methods  
  #   ...  
  # end  

  module ClassMethods  
    # Not needed anymore!
  end  
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T12:28:48.600

你可以这样做：

```
module MyModule
  def self.included(base)
    (class << base; self; end).send(:define_method, "#{base.name.downcase}_status") do
      puts "Hey!"
  end

  base.extend(ClassMethods)
end

  module ClassMethods
    def other_method
      puts "Hi!"
    end
  end
end

class MyClass
  include MyModule
end

MyClass.myclass_status
MyClass.other_method 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T12:38:57.887

适用于`extend`：

```
module MyModule  
  def self.extended who
    define_method "#{who.name.downcase}_status" do
      p "Inside"
    end
  end
end  

class MyClass  
  extend MyModule  
end  

MyClass.myclass_status 
```

# php - php中的在线文档，Docx查看器？

> ID：14706822
> 
> 赞同：1
> 
> 时间：2013-02-05T11:47:25.747
> 
> 标签：php, docx, doc

如何使用 php 查看 doc、docx 文件？有任何 php 或 jquery 脚本可用。我需要通过在线打开文档来显示求职者的简历

或任何函数或类都可用。请让我知道你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:52:22.187

您可以从 docx 和 doc 文件中获取内容并可以在浏览器中显示它们，但是您不能将其显示为您在 microsft word 中看到的内容，您需要对其进行格式化。

参考： http: [//phpword.com](http://phpword.com)

或者您需要编写一个浏览器插件来识别 .docx exetension 并在那里显示，就像 pdf 文件一样。

```
<?php
    function read_file_docx($filename){

        $striped_content = '';
        $content = '';

        if(!$filename || !file_exists($filename)) return false;

        $zip = zip_open($filename);

        if (!$zip || is_numeric($zip)) return false;

        while ($zip_entry = zip_read($zip)) {

            if (zip_entry_open($zip, $zip_entry) == FALSE) continue;

            if (zip_entry_name($zip_entry) != "word/document.xml") continue;

            $content .= zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));

            zip_entry_close($zip_entry);
        }// end while

        zip_close($zip);

        //echo $content;
        //echo "<hr>";
        //file_put_contents('1.xml', $content);     

        $content = str_replace('</w:r></w:p></w:tc><w:tc>', " ", $content);
        $content = str_replace('</w:r></w:p>', "\r\n", $content);
        $striped_content = strip_tags($content);

        return $striped_content;
    }

    $filename = "customers.docx";

    $content = read_file_docx($filename);
    if($content !== false) {

        echo nl2br($content);   
    }
    else {
        echo 'Couldn\'t find the file. Please check that file.';
    } 
```

# jquery-ui - jQuery UI Datepicker 和 Timepicker 与 minDate 和 maxDate 冲突（解析日期字符串时出错：位置 0 处缺少数字）

> ID：14706844
> 
> 赞同：1
> 
> 时间：2013-02-05T11:48:14.840
> 
> 标签：jquery-ui, datepicker, timepicker, maxdate, mindate

我正在使用 Rails`3.2.11`并尝试同时使用[jQuery UI](http://jqueryui.com/datepicker/) Datepicker和[Timepicker](http://trentrichardson.com/examples/timepicker/)，但是在尝试使用 Datepicker 的`minDate`and`maxDate`属性时遇到了问题。

我的一页视图（in `HAML`）如下所示：

```
.field_section
  = f.label :date, "Date"
  %br
  = f.datepicker :date, :minDate => "-10y", :maxDate => "+1y", :dateFormat => "yy-mm-dd",
    :constrainInput => true, :showOtherMonths => true, :size => 10 
```

我有`jQuery UI 1.10`，一切都很完美。

但是，在一个完全独立的视图中，我还需要一个时间选择器，所以我将`jquery-ui-timepicker-addon.js`文件（1.20 版）包含在我的`application.js`

收录顺序为：

1.  jQuery (1.8.3)
2.  jQuery UJS jQuery UI（特别是自动完成、日期选择器和滑块）
3.  时间选择器

现在，当我单击 datepicker 输入时，加载第一个视图（只有一个 datepicker，**而不是 timepicker ）在 Chrome JS 控制台中给我以下错误：**

```
Error parsing the date string: Missing number at position 0
date string = -10y
date format = yy-mm-dd
Error parsing the date string: Missing number at position 0
date string = +1y
date format = yy-mm-dd 
```

这又重复了5次左右。错误指向`jquery-ui-timepicker-addon.js:1912`，无济于事的是：

```
$.timepicker.log = function(err){
    if(window.console)
        console.log(err);
}; 
```

奇怪的是，如果我从视图中删除`minDate`and`maxDate`属性，错误就会消失 - 但我想使用这些选项。知道发生了什么吗？

谢谢

更新：我注意到如果我通过`minDate`并`maxDate`作为硬编码字符串，即

```
:minDate => "2000-01-01", :maxDate => "2014-01-01" 
```

错误消失了。`dateFormat`我认为这意味着（某处..？）存在错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:42:37.993

所以看起来 Timepicker 不理解相对日期。我认为 Timepicker 总是试图覆盖 Datepicker。使用`:minDate`and`:maxDate`设置为相对值（即`+1y`） Timepicker 会看到`+1y`和`yy-mm-dd`例如之间的格式不匹配 - 它似乎没有首先将 转换为`+1y`具有格式的 Date 对象`yy-mm-dd`。

我的解决方案是明确地放入 Date 对象：

```
:minDate => Date.today - 10.years, :maxDate => Date.today + 1.years 
```

这真的不如`+1y`

[在 Github 上](https://github.com/trentrichardson/jQuery-Timepicker-Addon/issues/546)提出的问题

# android - 在静音模式下响铃

> ID：14706845
> 
> 赞同：0
> 
> 时间：2013-02-05T11:48:25.900
> 
> 标签：android

我正在编写一个应用程序，它会在某些号码的静音模式下响铃。我创建了一个广播监听器，它将监听来电并为特定号码响铃。我面临的问题是第一次安装后它不工作，之后它工作得很好。

我正在使用的代码是

```
 public class Ring extends BroadcastReceiver{
private Context context;
private String PhoneNumber;
private int ringerMode=0;
String state=null;
Bundle bundle=null;

@Override
public void onReceive(Context context, Intent intent) {
 AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);
  bundle = intent.getExtras();
  this.context = context;

  if(null == bundle)
          return;

  state = bundle.getString(TelephonyManager.EXTRA_STATE);

  if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
  {
          check();
          PhoneNumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
          if(PhoneNumber.equals("+918281306132"))
          makeitNormal();
          maudio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
  }
  if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_OFFHOOK))
  {
      makeItSilent();
  }

  if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_IDLE))
  {
      makeItSilent();
  }
}

private void check() {
  // TODO Auto-generated method stub
  AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);
  ringerMode=maudio.getRingerMode();

}

 private void makeitNormal() {
 // TODO Auto-generated method stub

   AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);
   maudio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
 }

 private void makeItSilent() {
 // TODO Auto-generated method stub
 AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);
  int ringer=maudio.getRingerMode();
  if (ringerMode==AudioManager.RINGER_MODE_SILENT){

  maudio.setRingerMode(AudioManager.RINGER_MODE_SILENT);

  }else if(ringerMode==AudioManager.RINGER_MODE_NORMAL){
  maudio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
 }
 else if(ringerMode==AudioManager.RINGER_MODE_VIBRATE){
  maudio.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
 }

 }

 public void onAccuracyChanged(Sensor arg0, int arg1) {
 // TODO Auto-generated method stub

}

public void onSensorChanged(SensorEvent event) {
 // TODO Auto-generated method stub 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:32:48.480

我想到的唯一想法是调用`check()`外部的方法`onReceive()`，设置`ringerMode`之前`onRecieve()`被触发。

# asp.net - Server.MapPath 不起作用

> ID：14706847
> 
> 赞同：0
> 
> 时间：2013-02-05T11:48:43.280
> 
> 标签：asp.net, file-upload, web-site-project, server.mappath

我正在用 asp.net 开发 WebSiteProject。**Server.MapPath**方法不起作用**，但上传数据时我没有收到错误**。

我正在检查指定的文件夹，但它是空的。

我的代码：

```
fupCategory.SaveAs(Server.MapPath("~/Assets/Upload/Category/" 
                   + fupCategory.FileName)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:55:48.740

You're using both the `SaveAs` and `MapPath` methods correctly, it might be a problem with permissions...

Try debugging that line and see that you don't get thrown out of the method. If you're sure there is no exception thrown check the server logs...

Another option - you might be missing some of the folders in that path, but that too should raise an exception...

# java - Java For-Loop 仅用于数组中的项目

> ID：14706848
> 
> 赞同：0
> 
> 时间：2013-02-05T11:49:04.027
> 
> 标签：java, arrays

我不确定我的措辞是否正确。我有一个数组策略[10]，它可以容纳 10 个浮点数。

我有一个方法可以在初始化时向数组添加一个浮点数。我有另一种方法可以将数组中的所有浮点数加起来。问题是当我只有 3/10 的数组被填满时，我得到一个空错误。有人可以告诉我如何解决这个问题吗？

policy 是一个类 Policy 的列表。

```
public float totalCoverage(){
    float total = 0;
    for (Policy x : policies){
        total += x.amount;
                }
    return total;
} 
```

对于我的测试，我有 3/10 数组，如果我将数组大小从 10 更改为 3，它可以工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:50:38.857

好吧，大概您的数组中有一些元素具有空值。你可以这样做：

```
for (Policy x : policies) {
    if (x != null) {
        total += x.amount;
    }
} 
```

*更好*的更改是使用动态大小的集合，例如`ArrayList`，这样一开始就不需要考虑空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:53:09.383

```
public float totalCoverage(){

    float total = 0;
    for (int i = 0; i < array.length;i++){
       if(array[i] != null)
          total = total + array[i]
                }
       return total;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T11:51:02.463

Did you try

```
public float totalCoverage(){
    float total = 0;
    for (Policy x : policies){
        if (x != null)
        total += x.amount;
                }
    return total;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:51:18.530

> For my test, I have 3/10 arrays, if i change the array size from 10 to 3, it works.

If i can interpret correctly, you only have 3 elements initialized in your array, remaining 7 elements are not initializaed, initializing the array doesn't mean that array elements are initialized. thus they get their default value. i..e, null thus when you call null.amount it throw **NPE**.

**Null check :**

```
for (Policy x : policies) {
    if (x != null) {
        total += x.amount;
    }
    else {
         System.out.println("x is null");
     }
} 
```

# javascript - 如何使用jQuery按宽度获取所有内部元素的列表宽度

> ID：14706849
> 
> 赞同：-1
> 
> 时间：2013-02-05T11:49:04.213
> 
> 标签：javascript, jquery, width, push

有这个问题：我需要通过所有内部元素获取列表宽度。因此，我尝试获取每个元素的宽度并将它们连接在一起。但现在我只有一个元素宽度......你能帮帮我吗？

```
var list_width = [];
$('#js_films_block_top li').each(function() {
    list_width.push($(this).width());
});
console.log(list_width); 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:38:08.237

好的，我对此有很好的解决方案：

```
$('#js_films_block_top').each(function(){
    var t = $(this),
        tW = 0;
    $('li', t).each(function(){
        tW += $(this).outerWidth(true) + 5;
    });
    t.css('width', tW + t.outerWidth(true) - t.width());
}); 
```

thx，无论如何。

# qt - Qt 中的 NTLMv2 身份验证

> ID：14706851
> 
> 赞同：1
> 
> 时间：2013-02-05T11:49:16.337
> 
> 标签：qt, qt5

QNetworkAccessManager 发出

```
authenticationRequired (QNetworkReply*, QAuthenticator*) 
```

需要验证时发出信号。这可用于基本身份验证。

但是如何让 Qt 程序与服务器进行 NTLM 身份验证？我在任何地方都找不到这方面的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T12:36:28.587

我不能让它在 Qt 4.8 上工作，但在 Qt 5.1 上它有点工作。QAuthenticator 在这种情况下工作得非常糟糕。如果要在处理 authenticationRequired 信号的槽中手动设置用户名和密码：

```
onAuthenticationRequired (QNetworkReply*, QAuthenticator* auth)
{
    auth->setUser("username");
    auth->setPassword("password");
} 
```

但是，如果要使用当前 Windows 用户登录，则需要将用户名设置为空字符串：

```
onAuthenticationRequired (QNetworkReply*, QAuthenticator* auth)
{
    auth->setUser("");
} 
```

**注意：**即使授予 Windows 用户访问权限，此插槽也会被调用 4 次。如果用户应该提供凭据，这尤其令人沮丧。此外，QAuthenticator 不提供任何公共方法来确定实际使用的身份验证方法。

# firefox - 在 Firefox 中捕获新的书签事件并扩展书签弹出窗口

> ID：14706857
> 
> 赞同：0
> 
> 时间：2013-02-05T11:49:41.013
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在为 FF 开发一个扩展。我要做的是在创建新书签时捕获一个事件，然后将附加控件添加到书签弹出窗口中。我已经寻找了很长时间没有任何成功的正确方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:39:49.660

监听[editBookmarkPanel](http://mxr.mozilla.org/mozilla-central/source/browser/base/content/browser.xul#130)`popupshown`的事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:40:27.870

好的，所以我找到了解决方案：

```
/* Override the original browser Click event on the star button */
PlacesStarButton.onClick = function PSB_onClick(aEvent){
    // Ignore clicks on the star while we update its state.
    if (aEvent.button == 0 && !this._pendingStmt) {
        PlacesCommandHook.bookmarkCurrentPage(true);
    }
    // Don't bubble to the textbox, to avoid unwanted selection of the address.
    aEvent.stopPropagation();
} 
```

# excel - 使用“.setrange”选择动态范围

> ID：14706861
> 
> 赞同：0
> 
> 时间：2013-02-05T11:49:57.127
> 
> 标签：excel, excel-2007, vba

我正在尝试使用 .setrange 对数据（整个行）进行排序（with.sort）。但是，我选择的动态范围没有正确排序/拾取。

动态是

```
LngFristrow = 8

FundColumn = 39

LngLastRow = 2973 
```

所以基本上我想从 8 到 2973 的所有行进行排序。这是我目前拥有的。如果有人能告诉我我做错了什么，我将不胜感激 - 谢谢。

```
.SetRange Range(Cells(lngFirstRow, Fundcolumn).EntireRow, _ 
         Cells(lngLastRow, Fundcolumn).EntireRow) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:54:36.403

尝试

```
.SetRange 单元格(lngFirstRow, 1).Resize(lngLastRow-lngFirstRow+1).EntireRow

```

# javascript - $.height 在第一次加载页面时返回 0

> ID：14706862
> 
> 赞同：1
> 
> 时间：2013-02-05T11:49:58.420
> 
> 标签：javascript, jquery, html, css

我在`img`页面上有以下内容

```
<img class="some-class" src="img/some-img.gif" style="top: 29px; left: 121px;"> 
```

在CSS中我有

```
img.some-class {
    display: inline-block;
    position: absolute;
} 
```

`img`位于`div`有`display: inline-block`。

当我这样做`console.log($img.height())`时，它会在第一次加载页面时输出`0`（即在打开浏览器后第一次加载时）。仍然在我刷新页面后`console.log($img.height())`输出高度的真实值`img`。什么可能是问题的原因？

**UPD。**请注意，img 是动态添加的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:53:37.507

在加载图像之前，浏览器不知道高度。当您第二次加载页面时，图像已经在浏览器缓存中，因此它知道高度。

您必须将`console.log()`呼叫放在一个`$(window).load()`块内。这将在图像加载后运行。

```
$(window).load(function() {
    console.log($('img#myimg').height();
}); 
```

如果图像是动态添加的，那么您可以`load()`在图像本身上放置一个处理程序：

```
$('img#myimg').load(function() {
    console.log($(this).height());
}); 
```

加载事件信息：

[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

在谷歌上找到的更多信息：

[http://web.enavu.com/daily-tip/daily-tip-difference-between-document-ready-and-window-load-in-jquery/](http://web.enavu.com/daily-tip/daily-tip-difference-between-document-ready-and-window-load-in-jquery/)

# c# - 在 MVC 中使用 Linq 组合具有不同数据的表？

> ID：14706863
> 
> 赞同：1
> 
> 时间：2013-02-05T11:50:02.880
> 
> 标签：c#, asp.net, linq, entity-framework, asp.net-mvc-4

我有两个名为 OfflineOrderLineItem.cs 和 OnlineOrderLineItem.cs 的类都有名为离线和在线的不同订单表

在那我想结合这两个表数据来搜索和显示两个表中的字段

如何在 mvc4 中使用 linq 来做到这一点？？？任何想法.....

```
public virtual IPagedList<OnlineOrderLineItem> SearchOrderLineItems(string PoNumber)
{
     var query1 = (from ol in _offlineOrderLineItemRepository.Table
                   select new
                  {                            
                   ol.Name

                  }).ToList();

     var query2 = (from opv in _onlineOrderLineItemRepository.Table
                   select new
                   {
                    opv.Name

                   }).ToList();

     var finalquery = query1.Union(query2);

     if (!String.IsNullOrWhiteSpace(Name))
     finalquery = finalquery.Where(c => c.Name == Name);
     var orderlineitems = finalquery.ToList(); //its not working  it throw a error
     return new PagedList<OnlineOrderLineItem>(orderlineitems);//error 
    } 
```

**错误**

```
cannot convert from 'System.Collections.Generic.List<AnonymousType#1>'
to 'System.Linq.IQueryable<Nop.Core.Domain.Management.OnlineOrderLineItem>'
to 'System.Linq.IQueryable<Nop.Core.Domain.Management.OnlineOrderLineItem>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T19:22:05.813

`query1`并且`query2`是具有 type 单个属性的匿名类型列表`string`。（我假设`ol.Name`and`opv.Name`是`string`s。）因此`finalQuery`and`orderlineitems`也是这个匿名的集合。通过指定`PagedList<T>`，您要求传递给构造函数的集合是类型的枚举`T`。`T`是`OnlineOrderLineItem`，但传递给构造函数的枚举是匿名类型，它是另一种类型。结果：编译器错误。

为了解决这个问题，我建议您定义一个命名的帮助器类型，您可以使用它来合并两种不同的类型`OfflineOrderLineItem`和`OnlineOrderLineItem`：

```
public class OrderLineItemViewModel
{
    public int Id { get; set; }
    public string PoNumber { get; set; }
    public string Name { get; set; }

    // maybe more common properties of `OfflineOrderLineItem`
    // and `OnlineOrderLineItem`     
} 
```

然后您的`SearchOrderLineItems`方法应该返回该助手类型的分页列表：

```
public virtual IPagedList<OrderLineItemViewModel> SearchOrderLineItems(
    string PoNumber)
{
    var query1 = from ol in _offlineOrderLineItemRepository.Table
                 select new OrderLineItemViewModel
                 {
                     Id = ol.Id,
                     PoNumber = ol.PoNumber,
                     Name = ol.Name,
                     // maybe more properties
                 };
                 // don't use ToList here, so that the later Union and filter
                 // can be executed in the database

    var query2 = from opv in _onlineOrderLineItemRepository.Table
                 select new OrderLineItemViewModel
                 {
                     Id = opv.Id,
                     PoNumber = opv.PoNumber,
                     Name = opv.Name,
                     // maybe more properties
                 };
                 // don't use ToList here, so that the later Union and filter
                 // can be executed in the database

    var finalquery = query1.Union(query2);
    // again no ToList here

    if (!string.IsNullOrWhiteSpace(PoNumber))
        finalquery = finalquery.Where(c => c.PoNumber == PoNumber);

    var orderlineitems = finalquery.ToList(); // DB query runs here

    return new PagedList<OrderLineItemViewModel>(orderlineitems);
} 
```

重要的是`ToList`只在查询的最后使用。`OnlineOrderLineItem`否则，您会将所有s 和所有s的整个表加载`OfflineOrderLineItem`到内存中，然后过滤掉`PoNumber`内存中给定的项目，这将是一个很大的开销和性能灾难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:11:45.747

代替

```
 var orderlineitems = finalquery.ToList(); 
```

尝试

```
 var orderlineitems = finalquery.AsQueryable(); 
```

从[https://github.com/TroyGoode/PagedList/blob/master/src/PagedList/PagedList.cs](https://github.com/TroyGoode/PagedList/blob/master/src/PagedList/PagedList.cs)， PagedList 需要一个`IQueryable<T>`

[`Queryable.AsQueryable<TElement> Method`](http://msdn.microsoft.com/en-us/library/bb507003%28v=vs.100%29.aspx)

# css - CSS边框干扰绝对定位

> ID：14706866
> 
> 赞同：19
> 
> 时间：2013-02-05T11:50:06.663
> 
> 标签：css, position, border

[编辑：澄清 box-sizing:border-box 似乎不适用，因为我使用的是绝对定位]

以下代码说明了我的问题。我正在使用绝对定位，因为我发现这对于基于流的布局更加棘手，但我愿意接受建议。我想要的是任意元素周围的边界，*而*边界不影响节点的定位。（边框可能会被内容剪裁或覆盖，但这并不重要。）

特别是，父项的边界必须能够与其子项的边界*重叠*，这不是默认行为。CSS box-sizing 属性可以设置为border-box 来实现我想要的效果，但只能（我相信）使用内联元素。它对具有绝对定位的元素没有影响（据我所知）。

因此，我的方法是使用负边距将子项的位置偏移边框的宽度。这似乎确实抵消了边界存在的影响，但不幸的是，在比例因子上并不是一致的。在大尺度上，事情看起来还不错。在 Chrome 的默认浏览器缩放中，元素定位有点偏离（它们看起来太高了）；如果我变小，则元素位置会朝另一个方向移动。

但如果我完全删除边框，布局似乎可以缩放。

所以我的问题是：是否有一种可靠（可扩展）的方式在 HTML 元素上设置边框而不影响元素的定位？

[在示例中，我为某些边框使用了不同的颜色。我只想看到黑色，但在某些缩放中我可以看到红色和绿色边框，表明元素的位置受到边框存在的影响。]

谢谢 Roly .bordered { 位置：绝对；高度：18px；边框：2px 实心；边距：-2px；}

```
<span class="bordered" style="width: 55px; left: 30px;">
  <span class="bordered" style="width: 8px; left: 0;">
    (
  </span>
  <span class="bordered" style="border-color: green; width: 47px; left: 8px;">
    <span class="bordered" style="border-color: red; width: 39px; left: 0;">
      <span class="bordered" style="width: 8px; left: 0;">
        5
      </span>
      <span class="bordered" style="width: 31px; left: 8px;">
        <span class="bordered" style="width: 23px; left: 8px;">
          Nil
        </span>
      </span>
    </span>
    <span class="bordered" style="width: 8px; left: 39px;">
      )
    </span>
   </span>
 </span> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-05T12:10:12.870

试用 CSS2`outline`属性：

```
.bordered {
    outline:2px solid blue;
} 
```

轮廓不影响元素位置。

您还可以使用 CSS3 `outline-offset`，如下所示：[http ://www.css3.info/preview/outline/](http://www.css3.info/preview/outline/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-05T13:00:58.500

我还发现使用宽度为零的边框（这样它不会影响布局），然后添加一个盒子阴影来模拟可见边框，似乎效果很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-05T18:04:03.270

六年后...

其他答案对我的情况不起作用，因为我正在设计的盒子已经有一个盒子阴影。我只需要在一侧有一个边框，比如`border-left`和 a `border-radius`，但没有边框影响元素的位置或宽度。我想出的解决方案是在绝对定位元素的内部元素上应用边框。

```
.outer {
  position: absolute;
  width: 200px;
  height: 100px;
  border-radius: 5px;
  background-color: #c8c8c8;
}

.inner {
    height: 100%;
    min-height: 100%;
    min-width: 100%;
    width: 100%;
    border-left: solid 5px #097fee;
    border-radius: 5px;
}
```

```
<div class="outer">
  <div class="inner">
    Some content
  </div>
</div>
```

# java - Extjs 文件上传响应和Java spring

> ID：14706870
> 
> 赞同：2
> 
> 时间：2013-02-05T11:05:24.110
> 
> 标签：java, javascript, spring, json, extjs

我有 extjs 代码，它将创建表单，它允许用户选择要上传到服务器的文件。下面是 extjs 代码。

```
 var fp = new Ext.FormPanel({
    renderTo: 'questionnaire_div',
    id : 'FileuploadID',
    fileUpload: true,
    width: 500,
    frame: true,
    title: 'Upload Audit File',
    autoHeight: true,
    bodyStyle: 'padding: 10px 10px 10px 10px;',
    labelWidth: 50,
    defaults: {
    anchor: '95%',
    allowBlank: false,
    msgTarget: 'side'
},
items: [{
    xtype: 'fileuploadfield',
    id: 'form-file',
    emptyText: 'Select PDF file',
    fieldLabel: 'PDF',
    name: 'file'
}],
buttons: [{
    text: 'Upload',
    handler: function(){
    if(fp.getForm().isValid()){
        fp.getForm().submit({
            url: 'uploadAuditPDF',
            //method : 'POST',
            waitMsg: 'Uploading Audit PDF file...',
            success: function(fp, o){
            msg('Success', 'Processed file "'+o.result.file+'" on the server');
        },
        failure : function() {
            alert('Uploading Audit PDF file failed...');
        }
        });
    }
}
}]
}); 
```

下面是接受请求并将文件存储在数据库中的代码。

```
@RequestMapping(value="/uploadAuditPDF", method = RequestMethod.POST)     
public @ResponseBody String uploadAuditPDF(WebRequest request, FileUploadBean uploadItem, BindingResult result){

    if (result.hasErrors()){
        for(ObjectError error : result.getAllErrors()){ 
        return "{\"success\":false}";
    }    

    if(uploadItem.getFile() != null){
        String fileName = uploadItem.getFile().getOriginalFilename();
        byte[] file = uploadItem.getFile().getBytes();
        QuestionnaireHandler questionnaireHandler = new QuestionnaireHandler();
        try{
            questionnaireHandler.saveFileAttachment(fileName, file);
        }catch (Exception ex) {
                    throw new VDSQRuntimeException(PropertiesReader.getValue(Constants.ERROR_GENERIC));
        }

    }else{
        return "{\"success\":false}";
    }
    return "{\"success\":true}";
} 
```

这里我的问题是即使文件上传功能可以正常工作。但是响应，即成功字符串没有到达 ExtJS 端，因此在 extjs 形式中总是失败回调函数正在执行。

```
failure : function() {
            alert('Uploading Audit PDF file failed...');
        } 
```

谁能帮助如何向用户发送响应以传达文件上传成功或失败的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-10T20:50:25.673

对我来说，解决这个问题——我花了一天的大部分时间——非常简单：在 JSON 响应的顶层**包含 {"success":true,...} 。**ExtJS 期待它。

这是我的控制器功能：

```
@RequestMapping(value="/convertXLSToJSON", method=RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE)
public String handleFileUpload(@RequestParam("name") String name, @RequestParam("file") MultipartFile file) 
{
      JSONObject full_jo = null;

      //blah blah blah... process file into JSON

      return full_jo.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T13:52:27.890

像这样更改您的表单面板代码：

```
var fp = new Ext.FormPanel({
    renderTo: 'questionnaire_div',
    id: 'FileuploadID',
    fileUpload: true,
    width: 500,
    frame: true,
    title: 'Upload Audit File',
    autoHeight: true,
    bodyStyle: 'padding: 10px 10px 10px 10px;',
    labelWidth: 50,
    defaults: 
    {
        anchor      : '95%',
        allowBlank  : false,
        msgTarget   : 'side'
    },
    items: [
        {
            xtype: 'fileuploadfield',
            id: 'form-file',
            emptyText: 'Select PDF file',
            fieldLabel: 'PDF',
            name: 'file'
        }
    ],
    buttons: [
        {
            text: 'Upload',
            handler: function () 
            {
                if (fp.getForm().isValid()) 
                {
                    fp.getForm().submit(
                    {
                        url: 'uploadAuditPDF',
                        //method : 'POST',
                        waitMsg: 'Uploading Audit PDF file...',
                        success: function (fp, o) 
                        {
                            // ******************************************************
                            var result = o.result.success;
                            if(success)
                            {
                                msg('Success', 'Processed file "' + o.result.file + '" on the server');
                            }
                            else
                            {
                                alert('Uploading Audit PDF file failed...');
                            }
                            // ******************************************************
                        }
                    });
                }
            }
        }
    ]
}); 
```

像这样更改您的Java控制器：

```
@RequestMapping(value="/uploadAuditPDF", method = RequestMethod.POST)     
public @ResponseBody void uploadAuditPDF(WebRequest request, FileUploadBean uploadItem, BindingResult result, HttpServletResponse response)
{
    // I defined global return variable and initialized it
    String successResult = false;

    if (result.hasErrors())
    {

        successResult = false;
    }    

    if(uploadItem.getFile() != null)
    {
        String fileName = uploadItem.getFile().getOriginalFilename();
        byte[] file = uploadItem.getFile().getBytes();
        QuestionnaireHandler questionnaireHandler = new QuestionnaireHandler();
        try
        {
            questionnaireHandler.saveFileAttachment(fileName, file);
        }
        catch (Exception ex) 
        {
            throw new VDSQRuntimeException(PropertiesReader.getValue(Constants.ERROR_GENERIC));
        }

    }
    else
    {
        successResult = false;
    }
    successResult = true;

    // TODO: here is important part
    response.setContentType("text/html");
    response.getWriter().write("{success:"+successResult+"}");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:22:38.873

我发布了我的解决方案，这个解决方案对我有用。

这是在客户端（jsp 文件）上：在 jsp 开始动作映射上：

<portlet:actionURL name="uploadReportTemplate" var="uploadReportTemplateUrl"/>

和 ExtJS 动作代码：

```
var uploadAct = Ext.create('Ext.Action', {
        text: 'Upload',
        icon: '${CONTEXT_PATH}/images/import.png',
        disabled: true,
        handler: function(widget, event) {
            var uploadWindow = Ext.create('Ext.window.Window', {
            title: 'File Uploader',
            width: 500,
            frame: true,
            items: [{
                    xtype: 'form',
                    bodyPadding: 15,
                    url: '${uploadReportTemplateUrl}',
                    fileUpload: true,
                    method: 'POST',
                    enctype : 'multipart/form-data', 
                    items: [{
                        xtype: 'filefield',
                        id: 'form-file',
                        name: 'reportTemplateFile',
                        fieldLabel: 'File',
                        labelWidth: 50,
                        msgTarget: 'side',
                        allowBlank: false,
                        anchor: '100%',
                        buttonText: 'Select a File...'
                    },
                    {
                        xtype: 'hidden',
                        id: 'form-path',
                        name: 'path',
                        value: selectedElementPath
                    }                   
                    ],
                    buttons: [{
                        text: 'Upload',
                        handler: function(){
                            var form = this.up('form').getForm();
                            if (form.isValid()){
                                form.submit({
                                    waitMsg: 'File uloading...',
                                    success: function(form, action) {
                                        uploadWindow.close();
                                        simpleTree.store.reload();
                                        Ext.example.msg('File uploading', 'File {0} uploaded.', action.result.path);
                                    },
                                    failure: function(form, action) {
                                        Ext.example.msg('File uploading', 'Error during upload report template.');
                                    }   
                                });
                            }
                        }
                    },{
                        text: 'Cancel',
                        handler: function() {
                            uploadWindow.close();
                        }
                    }]  
                }]          
            }).show();
        }
    }); 
```

这是控制器中的方法：

```
@ActionMapping("uploadReportTemplate")
@RequestMapping(method = RequestMethod.POST)
public
@ResponseBody
void create(FileUploadBean uploadItem, BindingResult result, ActionResponse response) {
    boolean success = true;
    try {
        File file = new File(REPORTS_REPOSITORY_PATH + uploadItem.getPath() + "\\" + uploadItem.getReportTemplateFile().getOriginalFilename());
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(uploadItem.getReportTemplateFile().getBytes());
        fos.close();
    } catch (IOException e) {
        e.printStackTrace();
        success = false;
    }

    JsonResponse.create(response)
            .isSuccess(success)
            .add("path", "ROOT\\" + uploadItem.getPath() + "\\" + uploadItem.getReportTemplateFile().getOriginalFilename())
            .create();
} 
```

来自控制器方法的帮助类：

```
public class JsonResponse {

    public static class Builder {
        private Builder() {
            mapper = new ObjectMapper();
            attributeBuilder = createAttribute();
        }

        private HttpServletResponse response;
        private ObjectMapper mapper;
        private AttributeBuilder attributeBuilder;

        public Builder failure() {
            return add("failure", "true");
        }

        public Builder success() {
            return add("success", "true");
        }

        public Builder isSuccess(boolean success) {
            return (success) ? success() : failure();
        }

        public final Builder add(String key, String value) {
            attributeBuilder.add(key, value);
            return this;
        }

        public void create() {
            write(attributeBuilder.create());
        }

        public void from(Object o) {
            write(o);
        }

        private final Builder write(Object o) {
            try {
                mapper.writeValue(response.getWriter(), o);
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
            return this;
        }

        public Builder json(String json) {
            response.setContentType("application/json; charset=utf-8");
            try {
                write(mapper.readValue(json, Object.class));
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
            return this;
        }

    }

    public static Builder create(ResourceResponse response) {
        Builder builder = new Builder();
        builder.response = PortalUtil.getHttpServletResponse(response);
        return builder;
    }

    public static Builder create(HttpServletResponse response) {
        Builder builder = new Builder();
        builder.response = response;
        return builder;
    }

    public static Builder create(ActionResponse response) {
        Builder builder = new Builder();
        builder.response = PortalUtil.getHttpServletResponse(response);
        return builder;
    }

    public static class AttributeBuilder {
        private Map<String, Object> attributes = new LinkedHashMap<String, Object>();

        private AttributeBuilder() {

        }

        public AttributeBuilder add(String key, Object value) {
            attributes.put(key, value);
            return this;
        }

        public Map<String, Object> create() {
            return attributes;
        }
    }

    public static AttributeBuilder createAttribute() {
        return new AttributeBuilder();
    }

} 
```

附言。此解决方案适用于 Liferay 6.0.6 上的 SpringMVC

# android - 在 android 中将 SQLite 数据从平板电脑更新到手机

> ID：14706872
> 
> 赞同：0
> 
> 时间：2013-02-05T11:50:30.583
> 
> 标签：android, android-asynctask, client-server, android-sqlite, asyncsocket

我正在为患有老年痴呆症的祖母创建一个应用程序。我想有一个功能，我可以远程更新我的手机到她的平板电脑的时间表。现在我正在考虑在平板电脑和手机中拥有相同数据集的各种可能性，例如：使用看守人的用户名验证应用程序和密码需要检查 SQLite 表中的数据。现在如何在移动设备和平板电脑中拥有相同的 SQLite 数据集。平板电脑中 SQLite 表的任何更新也应该更新移动 SQLite 数据库。-我不想要任何云服务或第三方 API。- 我认为的一种方法是拥有一个启用 PHP 的服务器并将两个设备都集成到其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:11:37.043

在我看来，有两种方法可以走。

基于服务器：您编写一个服务器，然后向其发布更新，平板电脑会定期从中提取任何更新，您需要使用您选择的语言和框架编写一个 Web 服务器，通过 JSON 或 XML 与手机和平板电脑进行通信。这样做的好处是手机可以发布多个更新，而平板电脑可以在有网络时拉取。

直接：使用 (tcp) 套接字通过网络将命令从手机发送到平板电脑。如果您知道两者都将一直连接到互联网或同一个 wifi，这将更有效，并且您无需编写服务器。

# pyqt4 - 在 pyqt QWidget 中添加子菜单

> ID：14706875
> 
> 赞同：7
> 
> 时间：2013-02-05T11:50:36.037
> 
> 标签：pyqt4, pyside, qwidget, qmenu, qmenubar

我知道它非常基本的问题，但我有点困惑，可能我忘记了一些东西。

我正在尝试在 QMenuBar() 的“工具”中添加一个子菜单“预览”

到目前为止，这就是我想要做的

```
tools = fileMenu.addMenu('&Tools')
prevAction = QtGui.QAction('Preview',self)
prevInNuke = QtGui.QAction("Using &Nuke",prevAction)
tools.addAction(prevAction)
prevAction.addAction(prevInNuke) 
```

但我想这不是添加子菜单的正确方法

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T13:02:35.960

子菜单应该是一个`QMenu`，而不是`QAction`：

```
tools = fileMenu.addMenu('&Tools')
prevMenu = QtGui.QMenu('Preview',self)
prevInNuke = QtGui.QAction("Using &Nuke",prevAction)
tools.addMenu(prevMenu)
prevAction.addAction(prevInNuke) 
```

如果您使用方便的方法，它可能会更简单一些：

```
tools = fileMenu.addMenu('&Tools')
prevMenu = tools.addMenu('Preview')
prevAction = prevMenu.addAction('Using &Nuke') 
```

# jsf-2 - 表达式语言中empty from、empty create等的含义

> ID：14706876
> 
> 赞同：0
> 
> 时间：2013-02-05T11:50:36.827
> 
> 标签：jsf-2, el

我遇到了一些`.xhtml`文件，其中某些组件使用的表达式语言类似于`rendered="#{empty from}"`，`rendered="#{empty create}"`等等。

我知道这`empty`是EL中的运算符，用于检查值是否为null或空，但我不明白上述EL的含义。

有人可以向我解释一下 EL 上面的意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:58:40.287

该`rendered`属性是 JSF 是否应该为组件生成 HTML 的信号。如果它评估`false`，那么它不会为组件（也不会为其子组件）生成 HTML。将在不为空也不为空时`#{empty form}`进行评估。`false``#{form}`

就那么简单。您可以在此处找到布尔表达式的另一个示例：[有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components/4870557#4870557)

# android - 如何维护sqllite本地数据库并在线更新..？

> ID：14706880
> 
> 赞同：1
> 
> 时间：2013-02-05T11:50:40.823
> 
> 标签：android, database, maintenance

我无法按正确的顺序提出我的问题。
让我解释一下我正在努力实现的目标。
我正在开发使用本地数据库的 Android 应用程序，该数据库放在 Asset 文件夹中。
数据库仅在稍后安装应用程序时安装一次，
我将其从资产复制到数据文件夹并执行所有只读查询操作。
一切正常。
现在我的问题是数据库将经常每周更新一次。
什么是最好的方法，而不是每次更新整个应用程序来更新数据库我在想
如果数据库版本更新，那么应用程序应该从互联网下载新数据库（我不知道如何实现）并将其用于查询操作。

如果用户在 db 中插入某些内容，则可以更新数据库
在我的情况下，用户将给出将在 db 中更新的评级和评论

因为这是我的第一个 android 应用程序。我完全不知道如何实现它。我想就我的问题获得任何意见。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:28:54.237

如果您的数据库每周更新一次，那么您可以轻松地将数据库联机。您可以使用 PHP 脚本连接到 MySQL 服务器。网上有很多可用的资源。这里有一些：

[将 MySQL 与 Android 连接](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8339-connect-android-mysql-database-tutorial.html)

[如何连接-android-with-php-mysql](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

这些是基础教程。您可以根据自己的要求更改逻辑。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T12:00:20.377

将数据库保存在资产文件夹中将是一件永久性的事情。如果您的数据库需要更新，我建议您使用在线数据库，我的意思是将您的数据库保存在在线服务器中。现在，当您想要执行任何 CRUD 操作时，您可以通过使用 php 连接到 mySQL 数据库来完成。希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T12:01:39.813

这在我看来是一种非常奇怪的方法，为什么不从 Web 仅加载 JSON、xml 或任何其他格式的更改数据并根据更改的数据运行数据库更新？

**编辑：**在评论中回答您的问题：

我想你应该先学习一些 sql 和一些服务端语言（我选择的语言是 python，但很多人会选择 ruby​​，不要去 php..），然后找到合适的软件架构。要么使用 REST api 公开一个在线数据库，然后使用数据对本地数据库进行一次 sql 更新，要么直接在应用程序中使用它（将更多工作卸载到服务器，但需要支付延迟）。您还可以在服务器端使用 mongodb（一个 NOSQL 数据库）并直接使用 REST 进行查询。或者只需每周一次加载包含您需要的所有数据的 JSON，并将其用作一种本地数据库而不是 sqlite。没有简短的答案或简短的方法来回答您的问题。您应该学习不同的技术，并决定哪种方法适合您的**特定**用例。但任何技术堆栈都可能包括某种：

1.  服务器端数据库（也许还有一些逻辑）
2.  一种公开数据库和（REST？websockets？文件下载？）从服务器查询新数据并用新数据更新它的方法。
3.  安全、授权、身份验证等级别以保护服务器数据库和逻辑
4.  app local db（sqllite，只是一个包含数据的对象，任何其他方式的本地静态文件），可以非常小并且驻留在内存中并且可以是整个应用程序。

5.  应用程序逻辑、视图等，包括应用程序如何查询本地/远程数据库、启动本地和远程数据库之间的连接

6.  软件测试——所以它不会在重构时中断
7.  本地和远程调试工具链
8.  一些代码仓库管理（Git 现在很热，但始终是最佳选择）

# slider - 卷曲时向 UIPageViewController 添加滑块

> ID：14706883
> 
> 赞同：0
> 
> 时间：2013-02-05T11:50:47.770
> 
> 标签：slider, uipageviewcontroller

我创造了一本可以阅读故事的书。我使用 UIPageViewController 在从一个视图转换到另一个视图时添加页面卷曲。

![在此处输入图像描述](../Images/018cb98b9c74baaf0369a456fdbbe41b.png)

我想将此播放器视图添加到页面中，这样会非常逼真。text 和 soundPlayer 有两个不同的控制器。在分页时，我创建了 textViewController 的新实例并将文本添加到它的标签中。如果我将播放器视图添加到 textViewController 的视图，并在分页后将其从其超级视图中删除，则播放器停止播放。

我很困惑如何处理这个困境！

我已经上传了我的代码。如果有人可以帮助我，我将不胜感激

**更新：** 我可以从 playerView 的当前状态截取屏幕并将其添加为 textViewController 的子视图。并设置播放器的 alpha = 0，因此将其设置为隐藏。卷曲页面后，我删除了图像并将播放器的透明度（alpha）设置为 1。但是我怎样才能设法在下一个 textViewController 上添加这张照片呢？如下图所示，它只是设置为当前的 textViewController。

代码更新：http: [//upload.ugm.ac.id/447paging2.zip](http://upload.ugm.ac.id/447paging2.zip)

![在此处输入图像描述](../Images/4c90d589d6b6c8f2d9dfd184fc18e6c9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:12:30.400

答案张贴在这里：

[如何在我的 UIViewController 中使用静态变量](https://stackoverflow.com/questions/15011424/how-to-use-static-variables-in-my-uiviewcontroller/15152424#15152424)

请下载那里发布的示例代码。

# android - How can get x and y position of an image in android on onCreate?

> ID：14706886
> 
> 赞同：1
> 
> 时间：2013-02-05T11:51:00.763
> 
> 标签：android, coordinates, android-imageview, oncreate, co

I want current **X & Y** co ordinates of an ImageView on **onCreate** of **Activity**, is there any solution for the same ? Please share your idea on same.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:00:01.160

实际上，当您调用`setContentView()`Android 简而言之，开始在表面上绘制视图，您可以在使用时观察到，`viewTrewwObserve`因此您无法获得 in 的高度和宽度，`ImageView`因为`onCreate()`它当前尚未绘制。

您可以使用，（未尝试）

```
imageView.getViewTreeObserver().addOnGlobalLayoutListener(
 new ViewTreeObserver.OnGlobalLayoutListener() {
  @Override
  public void onGlobalLayout() {
    // Get ImageView height width here <------------
  }
}); 
```

当全局布局状态或视图树中视图的可见性发生变化时，它将注册一个要调用的回调。

**更新：**

或者你可以使用 [`onWindowFocusChanged (boolean hasFocus)`](http://developer.android.com/reference/android/app/Activity.html#onWindowFocusChanged%28boolean%29).

这是该活动是否对用户可见的最佳指标。默认实现清除密钥跟踪状态，因此应始终调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:08:15.863

（1）您可以使用`getViewTreeObserver()`或（2）您可以在您的`onCreate()`

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
  //SIMPLY CALL YOUR ASYN TASK WITH DELAY OVER HERE LIKE THIS.

  new MyImageDrawClass().execute();
}

class MyImageDrawClass extends AsyncTask<Void, Void, Void>
{
    @Override
    protected Void doInBackground(Void... params)
    {
        try
        {
            Thread.sleep(100);
        }
        catch(InterruptedException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result)
    {
        LayoutParams lp = mContent.getLayoutParams();
        value_wdth = mContent.getWidth();
        value_hght = mContent.getHeight();

        //PERFORM YOUR OTHER DRAWING STUFF..
        super.onPostExecute(result);
    }

} 
```

如果你发现这个问题，请告诉我，你也可以减少时间延迟，`Thread.sleep(10);` 我通常使用这种方法来获取高度和获取宽度。

# database - 有什么理由在数据库中有一个数字 ID？

> ID：14706891
> 
> 赞同：0
> 
> 时间：2013-02-05T11:51:14.063
> 
> 标签：database, linux, postgresql, solr

我基本上有很多不同的数据库，它们组合成一个 SOLR 存储。它必须是这样，我无法改变它。

我给每个数据库中的每个项目一个唯一的 ID，但是当我将数据库组合到 SOLR 中时，我发现我有多个具有相同 ID 的项目，例如：

```
Database A
Itemid: 1

Database B
Itemid: 1

SOLR:
Itemid: 1
Itemid: 1 
```

相反，我现在有我的主 ID，前面有数据库名称，如下所示：

```
Database A
Itemid: A1

Database B
Itemid: B1

SOLR:
Itemid: A1
Itemid: B1 
```

我的问题是，有非数字 ID 是否有任何正当理由，我仍然可以根据这些 ID 进行排序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:05:59.670

如果您关心性能而不是坚持使用数字 ID。（请参阅[数据库设计主键、ID 与字符串](https://stackoverflow.com/questions/2551776/database-design-primay-key-id-vs-string)）

但是为了完成您的任务，我会在数据导入阶段将数据库名称前缀添加到 Solr ID。所以你会有：

```
Database A
Itemid: 1

Database B
Itemid: 1

SOLR:
Itemid: A1
Itemid: B1 
```

# xaml - Cannot set Longlistselector border

> ID：14706892
> 
> 赞同：1
> 
> 时间：2013-02-05T11:51:16.143
> 
> 标签：xaml, windows-phone-8

I have a longlistselector inside a stackpanel, scrollviewer and pivot item.
The problem is no matter how I set the size of margin and borderthickness.
I couldn't get the border color visible.

This is the code I used:

```
<phone:PivotItem CacheMode="{x:Null}" Header="{Binding LocalizedResources.Settings_Appearance, Mode=OneWay, Source={StaticResource LocalizedStrings}}">
    <ScrollViewer>
         <StackPanel>
              <TextBlock Text="{Binding LocalizedResources.Settings_Appearance_ContentExp, Mode=OneWay, Source={StaticResource LocalizedStrings}}" FontSize="{StaticResource PhoneFontSizeLarge}" />
              <phone:LongListSelector Name="ContentReaderExample" Height="100" BorderThickness="5" BorderBrush="{StaticResource PhoneAccentBrush}">
                   <phone:LongListSelector.ItemTemplate>
                        <DataTemplate>
                             <TextBlock Text="{Binding Text}" FontSize="{Binding FontSize}" TextWrapping="Wrap"/>
                        </DataTemplate>
                   </phone:LongListSelector.ItemTemplate>
              </phone:LongListSelector>
         </StackPanel>
    </ScrollViewer>
</phone:PivotItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T12:53:08.617

我遇到过同样的问题。我在 LongListSelector 周围使用了一个边框并且工作正常

# php - 我如何知道我的服务器有哪些 IP？

> ID：14706902
> 
> 赞同：1
> 
> 时间：2013-02-05T11:51:35.707
> 
> 标签：php, ip

我正在使用 curl，我想随机化与我的服务器可用的 IP 一起使用的 IP curl。

我需要知道我的服务器可用的 IP。虽然我可以对其进行硬编码，但是否有用于此的 PhP 程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T12:00:26.100

如果你在 centos，使用 php 运行这个命令`exec()`，它会显示所有可用的 ip 接口。

```
ifconfig | grep inet | awk -F 'addr:' '{ print $2} ' | awk -F ' ' '{ print $1 }' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:03:06.997

如果您需要知道服务器的外部 IP 地址，请使用此功能：

```
function myIp()
{
    $url="simplesniff.com/ip";

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);
    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
} 
```

# asp.net - 即使导航到其他页面，URL 也保持不变

> ID：14706904
> 
> 赞同：0
> 
> 时间：2013-02-05T11:51:44.763
> 
> 标签：asp.net

当我请求一个页面时，它会导航到该页面，但 URL 不会更改，它不会显示除 USERLOGIN.aspx 之外的任何内容。

当它在 Java 脚本中时，它工作正常。但是在我们实现 CSS3 之后，这个问题就出现了。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:12:37.143

听起来 web.config 中的某些内容设置不正确，因此您被重定向到登录并进行身份验证。检查`<authorization>`元素并[在必要时设置权限](http://support.microsoft.com/kb/316871)。

# iphone - 临时推送通知不起作用？

> ID：14706905
> 
> 赞同：1
> 
> 时间：2013-02-05T11:51:50.593
> 
> 标签：iphone, apple-push-notifications, ad-hoc-distribution

我开发了新的 iphone 应用程序，我在其中为他的开发和分发制作了证书。

我编写了用于获取和注册 APNS（推送通知）的代码，它与开发人员证书一起工作正常，但是当我使用分发证书签署应用程序时我没有收到推送通知。

我检查了用于生产的分发证书，我的捆绑包是正确的。我使用分发证书进行了正确的代码签名，但没有从 gateway.push.apple.com 2195 端口获得推送通知，但我使用 gateway.sandbox.push.apple.com 获得了相同的开发人员证书。

我也尝试过创建 ipa 文件和同步，但没有收到带有分发证书的通知。

请指导我我需要帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T12:18:55.123

当前，您的应用程序处于使用开发配置文件的开发模式，因此它将生成开发人员设备令牌，该设备令牌适用于开发推送通知证书

如果您使用临时分发配置文件制作 .ipa，它将生成分发设备令牌，该令牌将用于分发推送通知证书

因此，**请使用临时配置文件**来制作 .ipa。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:13:01.647

我唯一能想象的是，您正在使用使用开发证书签名的应用生成的令牌。您在具有 dev 和 dist 证书的同一设备上有 2 个不同的令牌。

# python - 带有 PyDev 的 PIL 模块

> ID：14706906
> 
> 赞同：1
> 
> 时间：2013-02-05T11:51:55.137
> 
> 标签：python, eclipse, google-app-engine, python-imaging-library, pydev

我是 Python 和 Google App Engine 的新手，但我坚持使用它的安装及其兼容性。我正在使用 mac os -x 和 eclipse helios 并安装了 pyDev 插件，但尽管如此，我仍然遇到错误。. .

每当我尝试从终端导入 PIL 时，它不会给我任何错误，这意味着它已成功安装，但是当我在 eclipse 文件中使用相同的 Import 时。我收到编译错误为：

```
 "Unresolved Import" 
```

请在这件事上给予我帮助

不知何故，我试图解决这个问题，然后它给了我一个错误，说成像：通用包装器中没有匹配的架构

当我将架构更改为 32 位 ti 在 Eclipse Log 中给了我这个：

```
Traceback (most recent call last):
  File "/Users/Vinay/Documents/EclispeHeliosWorkspace/helloworld/Main.py", line 7, in <module>
    im.show()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/Image.py", line 1483, in show
    _show(self, title=title, command=command)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/Image.py", line 2123, in _show
    apply(_showxv, (image,), options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/Image.py", line 2127, in _showxv
    apply(ImageShow.show, (image, title), options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/ImageShow.py", line 41, in show
    if viewer.show(image, title=title, **options):
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/ImageShow.py", line 66, in show
    self.show_image(image, **options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/ImageShow.py", line 85, in show_image
    return self.show_file(self.save_image(image), **options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/ImageShow.py", line 81, in save_image
    return image._dump(format=self.get_format(image))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/Image.py", line 488, in _dump
    self.load()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/ImageFile.py", line 164, in load
    self.load_prepare()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/ImageFile.py", line 231, in load_prepare
    self.im = Image.core.new(self.mode, self.size)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL/Image.py", line 37, in __getattr__
    raise ImportError("The _imaging C module is not installed")
ImportError: The _imaging C module is not installed 
```

我该怎么办 ：（ ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:02:42.390

PIL 有一些具体的安装说明。你见过他们吗？

[在 GAE 上安装 PIL](https://developers.google.com/appengine/docs/python/images/installingPIL)

1.  下载 PIL .dmg 文件。例如，您可以从[http://pythonmac.org/packages/py25-fat/index.html](http://pythonmac.org/packages/py25-fat/index.html)下载 PIL 1.1.6 .dmg 文件。
2.  双击安装程序以开始安装过程。
3.  选择正确的目录。完成安装。

这仅用于您的本地开发环境。当您上传时，它将使用 GAE 提供的 PIL 版本，这意味着您还必须像这样更新您的 app.yaml 文件：

```
libraries:
- name: PIL
  version: "1.1.7" 
```

[如此处详述。](https://developers.google.com/appengine/docs/python/python25/migrate27)

IIRC 您将希望将其安装在您的应用程序目录本身“内部”，以便您的应用程序可以在本地访问它。但是不确定MAC上的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T23:49:24.660

我刚刚安装了 Pillow（使用：sudo pip install Pillow）以在 OS X 10.8.5 Mountain Lion 上的 Python 2.7.6 中获取 PIL。

我在使用 Eclipse Kepler 的 PyDev 中遇到了同样的问题。修理：

去：

Eclipse -> Preferences -> PyDev -> Interpreter - Python -> Libraries 并单击“新建文件夹”。

然后导航到：

/Library/Python/2.7/site-packages

并单击打开，然后单击应用，然后单击确定。

然后我退出 Eclipse 并重新启动——问题已解决。:)

# php - 维护具有小偏差的系统版本的最佳方法？

> ID：14706909
> 
> 赞同：0
> 
> 时间：2013-02-05T11:52:06.607
> 
> 标签：php, system, maintenance, flexibility

我即将开始开发一个相当大的 php 应用程序，最终，它应该可以在不同的国家/地区使用。

问题是不幸的是我不能只制作一个我维护的版本，因为应用程序的各个部分对于某些国家来说会有所不同（如邮政编码、电话号码和其他要求）

所以我的问题是，如果我正在寻求制作一个需要灵活、快速且易于维护的应用程序，那么最好采用哪种方法？

提前致谢

# php - Angular 聊天室网络应用

> ID：14706913
> 
> 赞同：2
> 
> 时间：2013-02-05T11:52:15.073
> 
> 标签：php, javascript, yii, angularjs

我是 Angular 的初学者，我正在尝试构建一个聊天室应用程序，以此来自学如何在框架中进行开发。

我在后端使用 PHP 和 Yii 将 RESTful 数据发送回 Angular 应用程序。我知道我可以使用 NodeJS，但没有足够的经验并希望先学习 Angular。

在我的应用程序的 ChatCtrl 中有一个名为 longPoll() 的方法，它向服务器发出请求，如下所示：

```
$scope.longPoll = function (opts) {
    opts = opts || {
        lastMessageTime: '',
        lastSessionTime: ''
    };

    var params = '?lastMessageTime=' + opts.lastMessageTime +
        '&lastSessionTime=' + opts.lastSessionTime;

    // start up polling
    $http.get('/chat/poll' + params).success(function (res) {

        var user = res.items.user,
            message = res.items.message;

        // check session updates =========================================
        if (user) {
            if (user.totalCount > 0) {
                $(user.items).each(function () {
                    $scope.users[this.user_id] = this;
                });
            }
            opts.lastSessionTime = user.lastTime;
        }
        // ================================================================

        // check message updates =========================================
        if (message) {
            opts.lastMessageTime = message.lastTime;
            if (message.totalCount > 0) {
                $(message.items).each(function () {
                    $scope.messages[this.message_id] = this;
                });
            }
            opts.lastMessageTime = message.lastTime;
        }
        // ================================================================

        // loop again
        $timeout(function () { $scope.longPoll(opts); }, 1000);
    });
} 
```

服务器每次都会执行一个无限循环，检查`message`表和`user`表的 date_updated 是否有变化（加入会话表以确保它们已登录）

当消息或用户表发生更改时（以后可能会有更多），它通过 JSON 向下传递记录，然后将它们添加到 $scope.messages 和 $scope.users 以便可以在 HTML 中查看它们：

```
<div ng-init="longPoll()" ng-controller="ChatCtrl">
    <ul id="nicklist" ng-cloak>
        <li id="nicklist-header">Users Online</li>
        <li ng-repeat="user in getArray(users)" ng-cloak>
            <a>
                <i class="icon-user"></i> {{user.username}}
            </a>
        </li>
    </ul>
    <ul id="messages">
        <li ng-repeat="msg in getArray(messages)" ng-model="msg" ng-cloak>
            <a class="message">
                <span class="date">[{{msg.date_added}}]</span>
                <span class="user">{{msg.username}}:</span>
                <span class="msg" ng-bind-html-unsafe="msg.message"></span>
            </a>
        </li>
    </ul>
</div> 
```

'getArray()' 函数只是将数据转换为数组，因为我将 $scope.messages 和 $scope.users 都存储为 key: value 对象，以便以后可以引用它们。

因为这是我的第一个合适的 Angular 应用程序，所以我确信我可以做得更好。我想知道的一件事是在服务器发送数据更改时接收数据更改的更好方法。我最初向服务器发出多个长轮询请求（一个用于消息，一个用于用户）但现在它只是一个减少流量和服务器负载的请求，这也意味着我不能使用 Angular 的 $resource 功能我所知？

你能告诉我有什么可以改进的吗？什么是好的做法/坏的做法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:09:07.583

您可能希望将轮询逻辑移动到服务并将事件广播到控制器。

您可以通过使用 Node.js + socket.io 来显着简化这一点

# iphone - 应用程序内的 iPhone 呼叫处理

> ID：14706914
> 
> 赞同：-4
> 
> 时间：2013-02-05T11:52:19.353
> 
> 标签：iphone, ios

我想从来电中获取号码，以便我可以设置个人号码的首选项。例如，我希望我的手机只有在我妈妈打电话时才响铃，否则让它保持振动模式。

有没有办法在呼叫状态更改时获取号码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:56:11.717

It is not possible to implement this functionality at the moment. Apple do not provide access to the phone call. If there is an incoming call, your app goes to background. If you want to make a call from the app - you can do it with a URL and your app again goes to background.

# javascript - 使用背景图像缩放 div 大小，同时保持纵横比

> ID：14706917
> 
> 赞同：1
> 
> 时间：2013-02-05T11:52:28.457
> 
> 标签：javascript, jquery, html, css

来这里有点松懈。

我有一个大约 div。2000px 宽 x 800px 高。

在那个 div 里面我有另一个 div，有一个背景图像。

我希望内部 div 占据父容器的 80% 高度，并且宽度与高度保持比例，所以背景图像不会扭曲，如果这有意义吗？

我使用 CSS3 将背景图像缩放 100% x 和 y。

```
.internal-box {
    background:url(images/elevator.png) repeat scroll 0 0 transparent;
    background-size:100% 100%;
    height: 80%;
    width: auto;
} 
```

[http://jsfiddle.net/JbmE6/](http://jsfiddle.net/JbmE6/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T12:05:25.083

试试这个：

```
background-size: contain;
background-repeat: no-repeat; 
```

但是请注意，这可能并非在所有浏览器（例如 IE8）中都完全支持。

另请注意，这不会使`<div>`自身更小，它只会使背景图像仅出现在相关部分。如果你把 a`border`放在上面，`.small`你会看到它实际上是其容器的 100% 宽度。

# math - 如何使 MediaWiki 中方程的行高等于普通文本的行高（使其流动）？

> ID：14706923
> 
> 赞同：3
> 
> 时间：2013-02-05T11:52:58.523
> 
> 标签：math, mediawiki, css

我想利用 MediaWiki 使用数学扩展来记笔记以显示方程式，但是当嵌套在段落中时，方程式会破坏统一的行高。有什么办法让它和普通文本一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:15:37.777

我发现使用 MathJAX，`<math>`渲染的客户端实现可以很好地呈现相同的行高。我在以下设置`LocalSettings.php`：

```
$wgUseMathJax = true;
$wgDefaultUserOptions['math'] = MW_MATH_MATHJAX; 
```

# php - 如何 preg_replace 图像的所有链接（有和*没有* https？）

> ID：14706925
> 
> 赞同：0
> 
> 时间：2013-02-05T11:53:05.503
> 
> 标签：php, regex

我正在使用[Regexpal.com](http://www.regexpal.com/)，我看到了这个[SO Question](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

我试图不匹配字符串。

我需要用字符串 preg_replace 所有出现的图像链接 `<<IMAGE:{link}>>`。所以我想用`(https?:\/\/)?\S*(jpg|png|jpeg|bmp|gif)` `OR`同样的东西，但*`without`*前面的（https？：//）

以便：

```
Hi there this is an image link https://facebook.com/images/2323.jpg
and this one is too mysite.org/1.png 
```

会变成这样：

```
Hi there this is an image link
<<IMAGE:https://facebook.com/images/2323.jpg>> and this one is too
<<IMAGE:mysite.org/1.png>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:15:18.800

我想你想要这个...

```
$str = 'Hi there this is an image link https://facebook.com/images/2323.jpg
and this one is too mysite.org/1.png';

$regex = '/((https?:\/\/)?\S*(jpg|png|jpeg|bmp|gif))/';

$str = preg_replace($regex, '<<IMAGE:$1>>', $str);
echo $str; 
```

**输出**

```
Hi there this is an image link <<IMAGE:https://facebook.com/images/2323.jpg>>
and this one is too <<IMAGE:mysite.org/1.png>> 
```

**[键盘](http://codepad.org/L5bErII5)**

# iphone - 我可以访问 iOS 邮件应用程序数据吗？

> ID：14706926
> 
> 赞同：2
> 
> 时间：2013-02-05T11:53:05.823
> 
> 标签：iphone, ios, cocoa-touch, email, ios5

有没有一种方法可以访问通过 iOS 邮件应用程序下载的附件？我需要在我的应用程序中访问照片或其他文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:53:58.087

否 您不能以任何方式访问邮件应用程序数据。这违反了 iOS 设备用户的隐私问题。但是，用户的 iPhone 图库中的图像可以根据您的需要在应用程序中访问和使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:03:56.633

如果您注册您的应用程序以处理各种文件类型，那么您可以从邮件应用程序中选择使用您的应用程序打开。因此，您可以将文件从邮件应用程序发送到您的应用程序。有关更多信息，请参阅[https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/RegisteringtheFileTypesYourAppSupports.html#//apple_ref/doc/uid/TP40010411-SW1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:48:23.600

不，您无权在访问受限的用户交互的情况下获取任何设备数据。您可以使用已发送的邮件创建自定义的邮件数据。

# python - 嵌套python字典

> ID：14706931
> 
> 赞同：1
> 
> 时间：2013-02-05T11:53:31.657
> 
> 标签：python, json, dictionary

大家好，我正在为此工作几个小时，但似乎我无法完成这项工作。

我有这个json结构：

```
{
    "1": {
        "name": "foo",
        "color": "black",
        "children": ["2", "3"]
     },
    "2": {
        "name": "foo2",
        "color": "green",
        "children": []
     },
    "3": {
        "name": "foo3",
        "color": "yellow",
        "children": ["4"]
     },
    "4": {
        "name": "foo4",
        "color": "purple",
        "children": []
     }
} 
```

我想使用python字典在下一个json结构中转换它：

```
{
    "foo":{
        "color":"black",
        "children":{
            "foo2":{
                "color":"green",
                "children":{}
            },
            "foo3":{ 
                "color":"yellow",
                "children":{
                    "foo4":{
                        "color":"purple", 
                        "children":{}
                        }
                }
            }
        }
    }
} 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:12:07.507

不需要递归。试试这个（`s`作为你的原始字符串）：

```
>>> import json
>>> data = json.loads(s)
>>> for v in data.values():
    v['children'] = {data[c]['name']:data[c] for c in v['children']}

>>> d = {data['1']['name']:data['1']}
>>> for v in data.values():
    del v['name']

>>> print(json.dumps(d, indent=4))
{
    "foo": {
        "color": "black", 
        "children": {
            "foo2": {
                "color": "green", 
                "children": {}
            }, 
            "foo3": {
                "color": "yellow", 
                "children": {
                    "foo4": {
                        "color": "purple", 
                        "children": {}
                    }
                }
            }
        }
    }
} 
```

因此，第一次传递数据以替换指向实际孩子的“指针”，然后第二次传递以摆脱名称。所有的字典/列表都在适当的位置发生了变化，因此链接的孩子继续工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:35:54.310

首先，您必须知道 dict 没有排序，因此您无法知道“1”将是您在迭代时获得的第一个键。如果总是“1”是第一个元素，那么：

```
dict_to_convert = {
    "1": {
        "name": "foo",
        "color": "black",
        "children": ["2", "3"]
    },
    "2": {
        "name": "foo2",
        "color": "green",
        "children": []
    },
    "3": {
        "name": "foo3",
        "color": "yellow",
        "children": ["4"]
    },
    "4": {
        "name": "foo4",
        "color": "purple",
        "children": []
    }
}

def convert_dict(dict_to_convert, key=None):
    if key is not None:
        new_dict = {}
        for key in dict_to_convert[key]["children"]:
            new_dict[dict_to_convert[key]["name"]] = {}
            new_dict[dict_to_convert[key]["name"]]["color"] = dict_to_convert[key]["color"]
            new_dict[dict_to_convert[key]["name"]]["children"] = convert_dict(dict_to_convert, key)
    else:
        new_dict = {}
        new_dict[dict_to_convert["1"]["name"]] = {}
        new_dict[dict_to_convert["1"]["name"]]["color"] = dict_to_convert["1"]["color"]
        new_dict[dict_to_convert["1"]["name"]]["children"] = convert_dict(dict_to_convert, "1")
    return new_dict

converted_dict = convert_dict(dict_to_convert)
print converted_dict 
```

我检查了它，它有效。

# search - 如何在 Solr 中处理多个单词关键词和精确搜索？

> ID：14706935
> 
> 赞同：0
> 
> 时间：2013-02-05T11:53:37.267
> 
> 标签：search, solr, indexing

## 如何在 Solr 中处理多个单词关键词和精确搜索？

你好。我需要一些关于以下问题的帮助：

我正在索引一个商店列表，其中每个商店都有一个产品词列表，其中包含像“自行车”这样的单个关键字关键词和像“红色自行车”这样的多个关键词关键词。

示例：商店 A 销售“ipad”和“iphone”。B店销售“ipad accessoires”和“iphone”，C店销售“ipad”和“ipad accessoires”

当用户搜索“ipad”时，我只希望在结果中显示与“ipad”完全匹配的商店（即只有商店 A 和 C）。

在我当前的 solr 设置中，像“ipad accessoires”这样的关键字被标记为“ipad”和“accessoires”，当用户搜索“ipad”时，商店 B 也会出现。我如何在索引中获得像“ipad accessoires”这样的关键词，solr 理解它实际上是 1 个要匹配的关键词/令牌。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:35:08.093

如果您准备好尝试不同的方法，请检查 Elastic Search 中的[Percolate](http://www.elasticsearch.org/guide/reference/api/percolate.html) Query。
这可能正是你试图做反向匹配的东西链接谷歌广告词。

# textures - Ogre3D 中的立方体纹理和像素格式

> ID：14706944
> 
> 赞同：1
> 
> 时间：2013-02-05T11:54:10.807
> 
> 标签：textures, ogre, pixelformat, cubic

在 Ogre 材质文件中，立方体纹理定义为：

```
cubic_texture <front> <back> <left> <right> <up> <down> separateUV 
```

这是否意味着无法像普通纹理那样设置像素格式？

```
texture <texturename> [<type>] [unlimited | numMipMaps] [alpha] [<PixelFormat>] [gamma] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:54:58.820

您可以使用`texture <texturename> [<type>] [unlimited | numMipMaps] [alpha] [<PixelFormat>] [gamma]`并设置`type`为`cubic`. 然后你仍然可以修改`<PixelFormat>`.

# php - PHP | 数组获取值和键

> ID：14706952
> 
> 赞同：1
> 
> 时间：2013-02-05T11:54:45.577
> 
> 标签：php, arrays

我有一个看起来像这样的 PHP 数组：

```
$array = Array
(
    [teamA] => Array
    (
        [188555] => 1
    )
    [teamB] => Array
    (
        [188560] => 0
    )
    [status] => Array
    (
        [0] => on
    )
) 
```

在上面的示例中，我可以使用以下代码：

```
echo $array[teamA][188555]; 
```

得到值 1。

现在的问题是，有没有办法以类似的方式获得 188555；

数组中的键 teamA、teamB 和 status 始终相同。此外，teamA 和 teamB 数组始终只保存一个记录。

那么有没有办法只获取数组teamA和teamB的第一个元素的key呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T11:57:55.823

更简单：

```
echo key($array['teamA']); 
```

[更多信息](http://php.net/manual/en/function.key.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T11:57:19.767

```
 foreach($array as $key=>$value)
 {
     foreach($value as $k=>$v)
     {
          echo $k;
      }
 } 
```

**或**使用`key`

```
echo key($array['teamA']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T11:57:49.580

```
echo array_keys($array['teamA'])[0]; 
```

请参阅[**`this`**](http://php.net/manual/en/function.array-keys.php)官方 PHP 站点的详细信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T11:59:32.817

使用两个 foreach

```
foreach($array as $key => $value){

    foreach($value as $key1 => $value2){
        echo $key1;
    }
} 
```

这样，您也可以扩展您的应用程序以供将来使用。如果会有更多元素，那么它也不会破坏应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-05T12:02:30.333

您可以使用 array_flip 交换键和值。所以array('12345' => 'foo') 变成了array('foo' => '12345')。

可以在[此处](http://php.net/manual/en/function.array-flip.php)研究有关 array_flip 的详细信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T11:58:46.147

我想最简单的方法是使用 array_keys()？

所以你会这样做：

```
$teamAKey = array_shift(array_keys($array['TeamA'])); 
$teamBKey = array_shift(array_keys($array['TeamB'])); 
```

显然，您的方法将取决于您打算执行多少次。[有关array_keys](http://php.net/manual/en/function.array-keys.php)和[array_shift](http://php.net/manual/en/function.array-shift.php)
的 更多信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-05T12:12:20.580

我建议使用 list($key, $value) = each($array['teamA']) 因为问题是针对键和值的。但是，如果没有循环，您将无法获得数组的第二个或第三个值。如果您以某种方式更改了它的迭代器，您可能必须先重置数组。

# c# - 如何覆盖在 PropertyGrid 中为属性显示的文本

> ID：14706954
> 
> 赞同：2
> 
> 时间：2013-02-05T11:54:52.293
> 
> 标签：c#, .net, propertygrid

给定这样的类：

```
public class SomeClass
{
    public SomeClass()
    {
        Name = "Default";
        Values = Enumerable.Range(1,3).ToArray();
    }

    public string Name { get; set; }
    public int[] Values { get; set; }
} 
```

类的默认实例在`PropertyGrid`控件上如下所示：
![PropertyGrid.SelectedObject = new SomeClass();](../Images/84806712656f18434d646b5f245f01c2.png)

是否可以覆盖为`Values`属性显示的文本，使其显示类似`1, 2, 3`而不是`Int32[] Array`.

`PropertyGrid`欢迎涉及反射和从控件 继承的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:01:02.537

我认为您可以将`TypeConverter`属性添加到`Values`：

```
[TypeConverter(typeof(IntArrayToStringTypeConverter))]
public int[] Values { get; set; } 
```

`IntArrayToStringTypeConverter`然后根据[文档](http://msdn.microsoft.com/en-GB/library/ayybcxe5.aspx)创建一个。不确定是否已经有一个类型转换器可以满足您的需求。

# oracle - How do I determine if I a user requires a schema to access a table?

> ID：14706959
> 
> 赞同：0
> 
> 时间：2013-02-05T11:55:08.650
> 
> 标签：oracle

An application needs to access various Oracle database. Some databases have tables in Schemas, some don't - there's no control over this.

If a database has a schema in use, the applicable won't work unless the user enters a schema. I'd like it to be able determine via a SQL query if a schema is required to access the tables so the user can be alerted to this.

I'm aware of the question - [How do I obtain a list of schemas that an Oracle user has access to](https://stackoverflow.com/questions/2193063/how-do-i-obtain-a-list-of-schemas-that-an-oracle-user-has-access-to) - but that only tells me what schema's can be accessed, not if use of the schema is required to access tables.

Is there an SQL query to one of the system tables that can do this with that user's rights?

Note: The application only has login credentials and doesn't know any table details.

Hope that's clear. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:31:46.347

问题令人困惑。在 Oracle 中的大多数情况下，您可以考虑 LOGIN == USER == SCHEMA。当您使用您的用户登录数据库时，您可以查看和访问该用户架构中的所有对象。
SCHEMA2.TABLE1 可以访问其他模式中的对象（在同一数据库服务器上），如果连接的用户具有访问表的权限（有不同的权限......）。正如一些评论中已经说明的，如果存在同义词，则不需要为 table 添加前缀。
如果存在适当的数据库链接，您的用户甚至可以访问某个远程服务器上的表。

# ajax - JSP+Struts: Handle session timeout in AJAX calls

> ID：14706960
> 
> 赞同：1
> 
> 时间：2013-02-05T11:55:09.140
> 
> 标签：ajax, jsp, struts2, servlet-filters, session-timeout

I am making ajax calls from my JS methods to invoke the action class's methods in the following manner:

```
$.getJSON("treeDemo_!getRootNode?appId=" + applicationId, function () {
    }).success(function (e) {
    }).error(function (jqXHR, textStatus, errorThrown) {
        alert(textStatus);
    }).complete(function () {
    }); 
```

Session configuration in my web.xml looks like this

```
<session-config>
    <session-timeout>1</session-timeout>
</session-config> 
```

Now when the session expires after 1 minute, the ajax call returns error (without calling the action method). The error says

```
textStatus = parsererror
errorThrown = SyntaxError: JSON.parse: unexpected character 
```

But this looks like a generic error. I want to catch the session timeout exception and redirect the user to the login.jsp page in case this exception occurs.

I even tried handling it by doing [this](http://javaj2eetechie.blogspot.in/2009/08/redirecting-to-jsp-page-after-user.html). But it didn't work for me.

Can you please suggest how should I solve it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:34:28.407

没有“会话超时异常”。

您的 Ajax 调用期望返回 JSON，如果会话超时，您的应用程序中没有任何内容会返回 JSON。在链接中使用过滤器或拦截器，检查会话超时，如果是正常请求则正常处理，但如果是 Ajax 请求，则返回 HTTP 错误代码。

在您的 JavaScript 回调中处理此错误代码。

# java - Initiating a VPN Connection Programatically on Linux via Java, or Shell Script

> ID：14706962
> 
> 赞同：1
> 
> 时间：2013-02-05T11:55:10.703
> 
> 标签：java, linux, vpn

I have a Java Program that needs to invoke a URL, that is reachable only after a VPN connection has been established (to a remote VPN host). The program runs on a Linux box.

Therefore, I need to be able to start/stop the VPN connection as-needed (essentially I do not need it 24 hours).

What is the best way for this:

1.  Can i create a VPN Connection programatically in Java? Is it even possible?
2.  Can i install VPN Client software on Linux Machine, and then via a shell script (which i will invoke via Java), start/stop the VPN Client Connection whenever needed. Is this viable or better solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:09:18.807

是的，您可以通过运行适当的管理命令从程序（无论哪种编程语言）启动 VPN 连接。确切的管理命令是特定于分发甚至安装的。

通常，VPN 连接（由[OpenVPN](http://openvpn.net/)提供）将由（shell）命令`/etc/init.d/openvpn start vpnname`或包装脚本启动（RedHat 衍生产品有，其他发行版可能没有）。该命令必须作为 执行`root`，因此您还需要为其添加前缀`sudo`并配置 sudo 以便运行应用程序的用户可以运行该命令。

由于该命令特定于安装，因此您需要使其可配置（并且可能提供适合您使用的发行版的默认配置）。

还有其他相互不兼容的 VPN 实现。每个都有不同的命令来启动它，但是每个都有这样的命令，所以实现应该能够在适当的配置下启动它们中的任何一个。

请注意，VPN 通常可能需要密码才能启动。如果是这样，则必须将密码保存在客户端上，或者您还需要为用户提供输入密码的方法。它的传递方式又是 VPN、分发和可能的安装特定的。

# facebook - Facebook sdk does insecure request to arbiter.php

> ID：14706967
> 
> 赞同：3
> 
> 时间：2013-02-05T11:55:40.507
> 
> 标签：facebook, oauth

I have a Facebook app which gets loaded from my server as an iframe inside a facebook fanpage. I use the javascript sdk to handle the facebook authentication.

When I access the fanpage in IE through http, then the console shows the following https security error: SEC7111: HTTPS security is compromised by [http://static.ak.facebook.com/connect/xd_arbiter.php?version=18](http://static.ak.facebook.com/connect/xd_arbiter.php?version=18)

which causes the user to see the 'insecure content' warning. I understand it has to do with the way IE handles the cross-domain iframe loading.

More details:

*   Happens when FB.init is called (xd_arbiter.php is requested by the fb sdk when FB.init is called)
*   Happens only in IE (specifically IE 9). No security warnings in Chrome or FF.
*   Happens only when facebook is loaded through http, not https. I would have thought it would be the other way around...so facebook must be loading something over https even though the fanpage is loaded over http.

What I've tried:

*   Setting FB._https = true before calling init. (does not work, deprecated)
*   Made sure the sdk is loaded through https (in channel.html).
*   Made sure all requests I do to my server is through https.

Here is my call to init:

```
FB.init({
  appId      : '{$appid}',
  status     : true,
  cookie     : false,
  xfbml      : true,
  oauth      : true,
  channelUrl : '//my_url.com/channel.html'
}); 
```

And the content of channel.html:

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

So how can I force the sdk to load the xd_arbiter.php over https so the warning goes away?

I understand the sdk is constantly evolving, but I first want to make sure I'm not doing something wrong.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:10:16.047

我建议您将所有资产都使用相同的协议，无论是 HTTP 还是 HTTPS。

那么对于远程请求，你有没有考虑在你的服务器上创建一个 PHP 端点，所以你的 AJAX 请求可以调用你的 PHP 脚本，而不是调用跨域 URL，它是在同一个域上，然后让 PHP curl 来做交叉域的东西？

# c# - 如何从另一个类访问表单的方法，确保它是相同的 Form 实例 - C#

> ID：14706971
> 
> 赞同：0
> 
> 时间：2013-02-05T11:55:51.203
> 
> 标签：c#, winforms, class, datagridview, static

**更新得更清楚了......**

我有一个主要形式 ，`Form1`和一个附加类，`AslLib`。`Form1`包含一个更新`dataGridView`它包含的控件的方法。中的一个方法`AslLib`调用此方法。

我的问题是，我可以`AslLib`调用 call方法的唯一`Form1`方法是创建一个`Form1`in`AslLib`调用方法的实例，如下所示：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public void updateDataGUI(int row, string url, string status, long time)
    {
        Console.WriteLine(status);
        foreach (DataGridViewRow dgvr in dataGridView1.Rows) dgvr.Cells[0].Value = status;
    }

}

static class AslLib
{
    public static async void makeRequest(string url, int row )
    {
        string result;
        Stopwatch sw = new Stopwatch(); sw.Start();

        try
        {
            using (HttpClient client = new HttpClient())
            {
                HttpResponseMessage response = new HttpResponseMessage();
                response = await client.GetAsync(url);

                if (response.IsSuccessStatusCode)
                {
                    result = ((int)response.StatusCode).ToString();
                }
                else
                {
                    result = ((int)response.StatusCode).ToString();
                }
            }
        }
        catch (HttpRequestException hre)
        {
            result = "Server unreachable";
        }

        sw.Stop();
        long time = sw.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));

        _form.updateDataGUI(row, url, result, time);

    }
} 
```

我已经尝试在构造函数和方法中传递参数，但是因为（*我认为*）`makeRequest`方法是静态的，编译器给出了错误：

```
AsyncURLChecker.AslLib._form: cannot declare instance members in a static class              AsyncURLChecker
Static classes cannot have instance constructors                AsyncURLChecker 
```

上面的结果是' 方法的`Console.WriteLine(status);`部分正确输出，但是没有改变。`Form1``status``dataGridView`

我的信念是，因为我正在创建 的新实例`Form1`，所以我不再引用`Form1`包含我的原始实例`dataGridView`，而是一个全新的副本，因此它不会改变。

谁能告诉我如何`dataGridView`从另一个班级操纵原始的 Form1？如果可能，我首选的方法是调用一个`Form1`更新`dataGridView`而不是直接访问`dataGridGiew`的方法`AslLib`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:58:32.223

您应该传递对现有表单的引用，而不是创建新表单：

```
// on Form1
Class1 c1 = new Class1();
c1.DoSomething(this);

// Class1
public void DoSomething(Form1 form)
{
    form.updateDataGUI(row, url, result, time);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T11:58:29.933

将表单传递给类构造函数

```
private Form1 _form;
public Class1(Form1 form)
{
    _form = form;
} 
```

您现在可以在班级内访问该表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T11:59:27.213

您需要拥有原始创建的`MainForm`. 这是您可以访问它的一种方式：

```
Application.OpenForms.OfType<MainForm>().First().updateDataGUI(row, url, result, time); 
```

（[`Application.OpenForms`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)包含当前正在运行的应用程序的所有打开形式。）

但是最好重新设计您的类结构，以便您可以将`MainForm`对象的引用传递给类。另一种选择是将实例保存在其`MainForm`自身的静态属性中（如果您确定任何时候都只存在一个实例）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T12:12:39.267

我想你可以用这个。

```
MainForm f = (MainForm)this.Owner;
f.updateDataGUI(row, url, result, time); 
```

# regex - 正则表达式匹配源数据，如 7px 7px 7px 7px？

> ID：14706976
> 
> 赞同：1
> 
> 时间：2013-02-05T11:56:14.633
> 
> 标签：regex, regular-language

我需要一个正则表达式来执行以下操作-->

例如，

边距：7px 7px 7px 7px；

应该压缩成 -->

边距：7px；

（注：数字不能只有7，可以是任意数字。单位可以是px|em|%|in|cm|mm|pc|pt|ex）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T12:17:46.563

在重复4次的特定情况下，这绝对是可能的。

`n`使用反向引用，这对于数字重复次数的特定值是可能的。在你的情况下，`n = 4`.

这个匹配任何仅由字母字符组成的“单位”值，即“px”、“em”或“foo”，加上特殊情况“%”。`\w*`通过替换为更具体的匹配项，可以使其对特定单位的限制更大`(?:em|px|......)`

```
/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/ 
```

例如：

```
// first four examples all match
echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '7px 7px 7px 7px');
1

echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '7em 7em 7em 7em');
1

echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '5px 5px 5px 5px');
1

echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '7% 7% 7% 7%');
1

echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '5.2cm 5.2cm 5.2cm 5.2cm');
1

// different value, no match
echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '5px 5px 5px 7px');
0

// not 4 elements, no match
echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '7px 7px 7px');
0

// different unit, no match
echo preg_match('/^(\d+(?:\.\d+)?(?:\w*|%))\s+\1\s+\1\s+\1$/', '7em 7em 7em 7px');
0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:02:04.533

可能您不是要求特殊情况 7，而是要求所有四个都相同的任何数字。[可以证明](http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages)，不存在这样的正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T12:20:11.660

替换`(\d+(px|em|%|in|cm|mm|pc|pt|ex))\s+\1\s+\1\s+\1`为`$1`

`\d+`匹配一个或多个数字 `(px|em|%|in|cm|mm|pc|pt|ex)`匹配任何一个提到的单位 `\s+`匹配一个或多个空格（用于匹配每次出现之间的分隔） `\1`匹配第一个捕获组，即数字后跟单位（4 次 \1 需要 4 次出现的数字+单位）

为了也允许小数部分，使用`(\d+(.\d+)?(px|em|%|in|cm|mm|pc|pt|ex))\s+\1\s+\1\s+\1`

替换为`$1`将匹配的输入替换为第一个捕获组

# zend-framework - Custom Error Message for file element

> ID：14706978
> 
> 赞同：0
> 
> 时间：2013-02-05T11:56:23.743
> 
> 标签：zend-framework

I am trying to add custom error message to my file element validator. It is working for all the elements, BUT file. Kindly point out where am I going wrong. I know similar question has been asked before but I want to know what is the problem with this code?

```
 $file= new Zend_Form_Element_File('albumcover');
    $file->setAttrib('size',35)
    ->removeDecorator('label')
    ->removeDecorator('htmlTag');

    $file->setRequired(true)
    ->addValidator('Size',true,'1MB')         
    ->addValidator('Count',true,1)
    ->addValidator('IsImage',true,'jpg,jpeg,png'); 
    $file->addErrorMessage("Upload 'jpg,jpeg or png' file of less than 1MB in size"); 
```

It shows predefined errors not the error message that I have set

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:00:57.803

您可能希望在控制器中执行此操作以检查元素是否有错误并打印特定的错误消息。

```
$form = My_Form_File();
...
if ($form->isValid()) {
...
} else {
    if ($form->getElement('albumcover')->hasErrors()) {
        $form->getElement('albumcover')->addError("Upload 'jpg,jpeg or png' file of less than 1MB in size");
    }
} 
```

虽然我建议让用户在描述中知道

```
$file->setDescription("Upload 'jpg,jpeg or png' file of less than 1MB in size"); 
```

# java - What's the faster Java REST Service Framework?

> ID：14706982
> 
> 赞同：0
> 
> 时间：2013-02-05T11:56:47.000
> 
> 标签：java, android, tomcat, jersey, restlet

I'm building a Java Rest Webservice to send lots of data, specifically objects serialized in XML using SimpleXML. I'm using:

*   Server side: Tomcat + Jersey
*   Client side: Android + Restlet for Android

The performance obtained is worse than I expected. XML Serialization/Deserialization seems that isn't the problem. I think that it is in the server side but I don't know if it's Tomcat or Jersey.

Are there better options available?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:05:20.383

[RESTDroid](https://github.com/PCreations/RESTDroid/)是一个库，可让您轻松实现 Android 的 REST 客户端。我认为它可能应该满足您的需求:) 这是一个简单的库，如果您正在寻找更强大（但更复杂）的东西，请查看[RoboSpice](https://github.com/octo-online/robospice)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T11:59:04.963

您可以尝试使用 Jetty 而不是 Tomcat。但更有可能您需要调整 Tomcat 上的配置设置以匹配您的负载。你是发送很多小请求还是一些大请求？

您还应该寻找并发问题；您是否有少量对象被大量请求访问？业务逻辑需要多少时间？

一种测试方法是在 Jersey 中有一个非常简单的“ping”资源，它提供简单的文本响应；没有其他处理。这应该让您对可能的最佳性能有所了解，并且您可以从那里向后工作以找出使事情变慢的原因。

另一件事：放置一些指标，以便您可以记录各种方法调用所花费的时间。Coda Hale 的 Metrics 包是一个不错的选择。

# javascript - 空下拉列表中的第一个元素

> ID：14706986
> 
> 赞同：36
> 
> 时间：2013-02-05T11:57:03.477
> 
> 标签：javascript, angularjs

我是 AngularJS 的初学者，目前我正在 Django 中开发一个 Web 应用程序，我可以说我使用 AngularJS 作为前端部分。我的问题是填充范围内对象的下拉列表始终以空白元素开头（如果我从列表中选择一个，问题就消失了）。这会产生问题，因为如果用户没有选择任何 POST 请求通常它将不再工作。我想知道如何拥有类似预选值或类似的东西。这是我的代码的一部分：

选择标签：

```
<select id="sel" class="input-block-level" ng-model="list_category">
            <option ng-repeat="obj in list_categories.data" value="{{obj.id}}">{{obj.name}}</option>
            <option value="Other">Other</option>
        </select> 
```

$scope.list_categories：

```
var listcategoryPromise = ListCategory.get();
    listcategoryPromise.then(function(response) {
        $scope.list_categories = {
            meta : response.data.meta,
            data : response.data.objects
        };
    }); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-05T12:35:20.527

使用该指令`ng-options`并`value`从“其他”选项中删除，如下所示：

```
<select id="sel" class="input-block-level" ng-model="list_category" ng-options="obj.id as obj.name for obj in list_categories.data">    
    <option value="">Other</option>
</select> 
```

这确保如果`list_category`为空（未选择条目），则选择“其他”选项（默认情况下）。

**jsFiddle**：http: [//jsfiddle.net/bmleite/gkJve/](http://jsfiddle.net/bmleite/gkJve/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T12:34:26.347

在下面找到下面的工作示例，您应该避免使用选项 ng-repeat 所以请参阅下面的示例代码

```
<body ng-controller="testcontroller">
         <select ng-model="item" ng-options="item.ID as item.Title for item in items">
         </select>
            <span>{{item}}</span>
    </body>

App.controller('testcontroller', function ($scope) {
    $scope.item = '000001';
    $scope.items = [
      { ID: '000001', Title: 'Chicago' },
      { ID: '000002', Title: 'New York' },
      { ID: '000003', Title: 'Washington' }
    ];
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T12:34:43.693

`<select>`您可以对带有 Angularjs的标签使用特定语法。

灵感来自[文档页面](http://docs.angularjs.org/api/ng.directive%3aselect)：

```
<select id="sel" class="input-block-level" ng-model="list_category" ng-options="obj.name for obj in list_categories.data">
    <option value="Other">Other</option>
</select> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T12:35:06.997

下面是一些直接来自 AngularJs.org 网站的关于选择列表的代码：

```
<select ng-model="color" ng-options="c.name for c in colors"></select> 
```

首先，如您所见，您不需要使用 ng-repeat 来构建您的选项列表。Angular 基本上会让你`foreach`在一个集合上做一个循环来构建你的选项列表。其次，您有选择中的 ng-model，但与您的集合名称不同。这将是您在发布时实际收集的物品。

```
function MyCntrl($scope) {
   $scope.colors = [
      {name:'black', shade:'dark'},
      {name:'white', shade:'light'},
      {name:'red', shade:'dark'},
      {name:'blue', shade:'dark'},
      {name:'yellow', shade:'light'}
  ];
  $scope.color = $scope.colors[2]; // red
} 
```

好的，这是 javascript 控制器代码。`$scope.colors`是集合，`$scope.color`是模型属性，已分配给 html 中的选择列表。从这个例子可以看出，模型属性被赋予了数组中第三个选项的默认起始值​​。对您来说，这可以从您用于初始加载页面的 http.get 进行设置。

现在，当您执行 foreach 时，您基本上是从集合中获取“名称”值，并在下拉列表中说“显示此值”并在帖子中使用此值。通过设置初始模型属性，您应该能够避免下拉列表中出现空选项字段。

参考：[AngularJS 选择](http://docs.angularjs.org/api/ng.directive%3aselect)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-05T11:10:55.753

在我看来，[这个答案](https://stackoverflow.com/a/12654812/3605525)更干净：

```
$scope.form = {type : $scope.typeOptions[0].value}; 
```

[http://jsfiddle.net/MTfRD/2010/](http://jsfiddle.net/MTfRD/2010/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-18T06:05:07.827

如果您设置`ng-model`了一些未包含在`ng-Repeat`. 现在，如果您考虑原始帖子并删除`ng-model`或设置一些有效值`ng-model`，它将正常工作，或者您可以将选定的第一项设置为

```
$scope.list_category = $scope.list_categories.data[0].id; 
```

# websphere - Message store unavailable! WAS 6.1

> ID：14706991
> 
> 赞同：0
> 
> 时间：2013-02-05T11:57:15.260
> 
> 标签：websphere, messaging, bus

I' m stuck on an issue and need your advice.

> Messaging Engine not coming UP (Error, "com.ibm.ws.sib.msgstore.TransactionException: CWSIS1099E: An unexpected exception has occurred. Exception: com.ibm.ws.sib.msgstore.MessageStoreUnavailableException: Operation not possible as MessageStore is unavailable! ")

Environment:- Sun OS 5.10, WAS 6.1, Messaging Engine is using File Store.

Here are the exceptions from the JVM logs:

```
[2/5/13 4:48:06:242 EST] 0000002a SibMessage    I   [bsl_msg_bus:jabds3203v61x2bsl.bsl_scorecard-bsl_msg_bus] CWSIS1567E: Messaging engine jabds3203v61x2bsl.bsl_scorecard-bsl_msg_bus cannot obtain the lock on its file store, which ensures it has exclusive access to the data.
[2/5/13 4:48:06:262 EST] 0000002a ServiceLogger I com.ibm.ws.ffdc.IncidentStreamImpl initialize FFDC0009I: FFDC opened incident stream file /usr/local/web/bsl/WAS/61x2/jabds3203v61x2bsl/logs/ffdc/bsl_scorecard_0000002a_13.02.05_04.48.06_0.txt
[2/5/13 4:48:06:273 EST] 0000002a ServiceLogger I com.ibm.ws.ffdc.IncidentStreamImpl resetIncidentStream FFDC0010I: FFDC closed incident stream file /usr/local/web/bsl/WAS/61x2/jabds3203v61x2bsl/logs/ffdc/bsl_scorecard_0000002a_13.02.05_04.48.06_0.txt
[2/5/13 4:48:06:282 EST] 0000002a ServiceLogger I com.ibm.ws.ffdc.IncidentStreamImpl open FFDC0009I: FFDC opened incident stream file /usr/local/web/bsl/WAS/61x2/jabds3203v61x2bsl/logs/ffdc/bsl_scorecard_0000002a_13.02.05_04.48.06_1.txt
[2/5/13 4:48:06:292 EST] 0000002a ServiceLogger I com.ibm.ws.ffdc.IncidentStreamImpl resetIncidentStream 
```

I have tried flushing out the temp, and I'm thinking of flushing the file store once. Can anyone you advise if this is feasible, what the correct way to do it is, and where can I find it

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:08:52.987

*一种可能性是，不知何故，您正在使用对文件存储*文件没有读/写访问权限的用户启动服务器，或者由于访问权限（例如文件）而无法再次将当前目录更改为包含这些文件的文件夹属于root，您与其他用户一起启动服务器）。您会看到某种“拒绝访问”消息，如果是这种情况，可能会包装到 FFDC 文件中的 IOException 中。

这通常发生在有人不小心以 root 用户启动服务器时，该用户通常由另一个用户运行。这可能会导致新生成的文件的所有权发生变化。当您切换回普通用户时，您将无法正确访问这些。因此，您可以尝试`chown -R`在文件存储文件夹中找到正确的用户，以确保您拥有正确的权限。