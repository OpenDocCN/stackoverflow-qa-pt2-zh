# StackOverflow 问答 12631000-12631999

# java - 带有 maven 的 JAX-WS 2.2 和 JDK6

> ID：12631002
> 
> 赞同：0
> 
> 时间：2012-09-27T22:32:00.910
> 
> 标签：java, webserver, jax-ws, java-ws

我有一个网络服务，我正在使用`Endpoint.publish("http://0.0.0.0:8080")`

事情是`JAX-WS 2.0 and 2.1`受到`NullPointerException`执行时抛出的问题的影响`endpoint.stop()`。

该问题已解决，`2.2`但`pom.xml`由于`java.lang.NoSuchMethodError: javax.xml.ws.WebFault.messageName()Ljava/lang/String;`我使用的是`java 1.6`.

解决方法是在`endorsed`文件夹中添加一些库。但我想把它全部打包`jar-with-dependencies`。一个可执行的java jar。

这么说，如果你能帮助我，我将不胜感激：

```
Publishing the endpoint in 2.0 or 2.1 listening to all addresses (0.0.0.0) 
```

或者

```
Configuring dependencies in maven to pack everything using 2.2.x 
but executable with JDK6 
```

编辑：

需求是一个可交付的 jar。一个打包所有依赖项的 jar（到目前为止 2 个，大约 400k jar）。

但是，如果您认为使其工作的唯一方法是添加外部 shell 脚本，请也告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:50:29.380

可执行 jar 格式不允许 JAX-WS 替换所需的认可文件夹（Java WebStart 启动器显然也不允许）。

您需要使用可以即时构建和执行*新*的“java”命令的东西。从这里开始的最好方法是最有可能寻找可以直接运行程序而无需安装的安装程序。

你到底需要做什么？

* * *

编辑：由于要求是一个可运行的 jar，您根本无法使用 JAX-WS 2.2 执行此操作 使用您所针对的 Java 版本的最新版本中存在的 JAX-WS 找到一种解决方法。

很高兴 JAX-WS 堆栈附带核心 Java 允许非常小的部署，但您无法轻松提供自己的痛苦。

请注意，您可以提供自己的 Java *5*，但您需要带上自己的 Endpoint 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:08:17.430

是否需要使用 JAX-WS RI？您可以改用 CXF，它是一个很好的 JAX-WS 实现，并且不会遇到与 RI 相同的冲突问题。

编辑：您可以尝试使用 RI 生成类，但在部署中使用 CXF。JAX-WS 毕竟是一个规范，所以它*应该可以*工作......

# php - Smarty 非转义字符？

> ID：12631003
> 
> 赞同：0
> 
> 时间：2012-09-27T22:32:04.467
> 
> 标签：php, ide, smarty

我有这个聪明的 if 语句：

```
{if $webpage.page_heading}
    <h1>{$webpage.page_heading|replace:'\\':'<br />'}</h1>
{/if}` 
```

但我的 IDE 抱怨，它看起来像这样：

![配套IDE](../Images/02381e1ff730be8ca1db95dd9e7ac2e8.png)

这只是我的 IDE 打包了一个 spaz`'\\'`还是这里有实际问题？我认为拥有双倍`\`会逃脱第二个反斜杠？

我们想要做的是将 any 替换`\`为`<br />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:25:09.910

代码有效，问题出在您的 IDE 中（它可能将其解释为`\'`）

# google-maps - Google maps api 3 zoom 在 Win8 VM 上的 Chrome 中加载移动按钮，而不是常规缩放栏

> ID：12631005
> 
> 赞同：1
> 
> 时间：2012-09-27T22:32:13.763
> 
> 标签：google-maps, google-chrome, google-maps-api-3, zooming

在 Win8 VM 中，Firefox 会加载正常的缩放栏，但 Chrome 不会。Chrome 会在地图左下角加载移动“+”“-”按钮。浅蓝色按钮（不允许张贴图片，该死）。移动缩放按钮不允许在地图上进行“滚动”缩放。

我尝试将地图缩放显式设置为 LARGE，但没有运气：

```
zoomControl: true,
zoomControlOptions: {
   style: google.maps.ZoomControlStyle.LARGE
} 
```

maps.google.com 在 VM 上的 Chrome 中加载缩放栏。
此外，在我的 Win 7 非 VM 上，缩放栏可以很好地加载我的站点。

有什么想法吗？

# node.js - base64编码网址安全吗？

> ID：12631010
> 
> 赞同：2
> 
> 时间：2012-09-27T22:32:37.150
> 
> 标签：node.js, url, base64

我正在使用 node.bcrypt.js 哈希返回 node.js 中的十六进制数字作为密码重置令牌。

```
user.reset_password_token = require('crypto').randomBytes(32).toString('hex'
); 
```

在将令牌传递到 url 之前，我是否还应该对令牌进行 base64 编码（即：链接重置电子邮件）？

这样做有什么好处吗？

我似乎记得 base64 编码可以包含会弄乱路径的正斜杠：

```
 var token = user.reset_password_token;

   //is there any benefit to doing base64 encoding?
   var encoded_token = new Buffer(token).toString('base64');

   var reset_link = 'http://example.com/reset/'+ encoded_token;
   sendResetLink( reset_link ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-03T20:36:06.780

[我在https://www.npmjs.org/package/urlsafe-base64](https://www.npmjs.org/package/urlsafe-base64)使用 URLSafeBase64 nodejs LIB 解决了它

```
var email =email_lines.join("\r\n").trim();
var base64EncodedEmail = URLSafeBase64.encode(new Buffer(email));
gmail.users.messages.send({userId:"me",
        resource: {raw:base64EncodedEmail} }, callbackFn}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2022-02-09T11:43:43.280

您不需要第三方库。您可以只使用`base64url`编码（从 开始`nodejs v14`）

```
const encoded_token = Buffer.from(token).toString('base64url'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T22:36:31.740

[base64](http://en.wikipedia.org/wiki/Base64#Examples)确实可以包含正斜杠，但[base32](http://en.wikipedia.org/wiki/Base32#RFC_4648_Base32_alphabet)不能！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T04:07:05.737

另一种选择是[base64url 库](https://www.npmjs.com/package/base64url)：

```
base64url("ladies and gentlemen we are floating in space");
// bGFkaWVzIGFuZCBnZW50bGVtZW4gd2UgYXJlIGZsb2F0aW5nIGluIHNwYWNl 
```

# sql - SQL加入表，包括从/到值

> ID：12631012
> 
> 赞同：1
> 
> 时间：2012-09-27T22:32:40.957
> 
> 标签：sql, sql-server, tsql, join

我正在使用第 3 方 SQL Server 数据库，其中包含下面的两个表（简化），我想将它们加入一个视图。

**Document**表包含以下列： ID**主**键
“其他列”。

**DocumentTag**表包含以下列 ：**FromDocumentID** **ToDocumentID** **Tag**。

如何创建表单**Document.ID**、**Tag**、“其他列”的视图？**加入每个文档的标签（是的，有重复），而不是在文档标签**表
中寻找正确的 ID 范围。

 **[编辑]一个例子：

文件台

```
ID    | Description | Owner ....
------+-------------+---------
1     | blah        | me 
2     | blah 2      | me
3     | blah 3      | Alice
4     | blah 4      | Bob
5     | blah blah   | me 
6     | blah blah 2 | Bob
7     | blah blah 3 | Alice
8     | blah blah 4 | Alice 
```

文档标签表

```
FromDocumentID | ToDocumentID | Tag         | ...
---------------+--------------+-------------+----
1              | 3            | Bananas
4              | 4            | Crocodiles
5              | 5            | Bananas
6              | 8            | Donuts 
```

我想要的是

```
ID    | Description | Owner  | Tag      | ....
------+-------------+--------+----------+-----
1     | blah        | me     | Bananas
2     | blah 2      | me     | Bananas
3     | blah 3      | Alice  | Bananas
4     | blah 4      | Bob    | Crocodiles
5     | blah blah   | me     | Bananas
6     | blah blah 2 | Bob    | Donuts
7     | blah blah 3 | Alice  | Donuts
8     | blah blah 4 | Alice  | Donuts 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:30:15.040

如果标签按范围适用于许多文档

```
select D.ID, T.Tag, D.Other1, D.Other2
from Document D
left join DocumentTag T on D.ID between T.FromDocumentID and T.ToDocumentID 
```

如果标签按 ID 应用于 2 个特定文档。这也显示了视图的创建

```
create View DocumentWithTag
as
select D.ID, T.Tag, D.Other1, D.Other2
from Document D
left join DocumentTag T on D.ID in (T.FromDocumentID, T.ToDocumentID) 
```**

# jquery - PhoneGap Jquery 滑动不良

> ID：12631018
> 
> 赞同：1
> 
> 时间：2012-09-27T22:33:29.823
> 
> 标签：jquery, cordova

我用 jQuery mobile 为 android 开发了一个 phonegap 应用程序，最后我发现自己在移动应用程序面前，界面很棒，页面之间的滑动非常糟糕，我尝试了所有类型的滑动 'none' 'pop' .... 但是同样的结果，尤其是当我按下后退按钮时。如果没有解决方案，我将不得不制作没有 jquery 的 java 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:31:32.073

我有同样的错误：

```
 $(document).bind("mobileinit", function(){

// Disable transitions between pages. Android performance in transitions is very poor.
$.mobile.defaultPageTransition = 'none'; //fade o slidefade
// Gets rid of the back problem
$.mobile.pushStateEnabled = false;
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T02:10:40.657

```
$(document).bind('pageinit', function () {
$.mobile.defaultPageTransition = 'none';
}); 
```

我使用了这段代码，我的幻灯片很完美，就像在“Java 应用程序”中一样

# testing - 如何使用 powershell 最大化内存使用率

> ID：12631021
> 
> 赞同：10
> 
> 时间：2012-09-27T22:33:37.057
> 
> 标签：testing, memory, powershell

我正在尝试做一些需要资源承受压力的测试。我能够找出如何使用 PowerShell 最大化 CPU 使用率。

```
start-job -ScriptBlock{
$result = 1; 
foreach ($number in 1..2147483647) 
    {
        $result = $result * $number
    }
} 
```

有没有办法可以使用 PowerShell 来最大化内存使用率？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T22:48:16.530

试试这个：

```
$mem_stress = "a" * 200MB 
```

**编辑：**如果不能在单个块中分配所有内存，请尝试在数组中分配多个块：

```
$mem_stress = @()
for ($i = 0; $i -lt ###; $i++) { $mem_stress += ("a" * 200MB) } 
```

GC 似乎不会干扰这一点（在分配了 1 GB RAM 的 VM 中进行快速测试的结果）：

```
PS C:\> $a = @()
PS C:\> $a += ("a" * 200MB)
PS C:\> $a += ("a" * 200MB)
PS C:\> $a += ("a" * 200MB)
PS C:\> $a += ("a" * 200MB)
The '*' operator failed: Exception of type 'System.OutOfMemoryException' was thrown..
At line:1 char:13
+ $a += ("a" * <<<<  200MB)
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : OperatorFailed 
```

# java - 如何判断 AOP 切入点是否匹配 JoinPoint

> ID：12631025
> 
> 赞同：1
> 
> 时间：2012-09-27T22:33:41.950
> 
> 标签：java, spring, aop

我需要的是一种方法：

```
public boolean matches(AspectJExpressionPointcut, ProceedingJoinPoint); 
```

我发现 AspectJExpressionPointcut 的方法`matches(Method, Class)`看起来可以解决问题，并且在大多数情况下它似乎正确地做到了。除非匹配 bean 切入点 ( `<pointcut expression="bean(beanName)" .../>`)。首先，它返回 true，即使 joinPoint 与 bean 定义无关。我没有测试应该匹配时会发生什么。

所以也许我应该退后一步。我要做的是：根据几个切入点调用建议，如果当前调用与切入点列表的子集匹配，则执行附加任务，否则就照常继续建议。

# android - Android - 获取给定包的 CPU 使用率的好策略是什么？

> ID：12631030
> 
> 赞同：0
> 
> 时间：2012-09-27T22:34:12.553
> 
> 标签：android, process, monitoring

我正在尝试获取给定包的 CPU 使用率。经过一番研究，我找到了一种获取进程 CPU 使用率的方法（读取*/proc/[PID]/stat/*信息）但我找不到进入包级别的方法（一个进程可以运行许多包）。

我想说这是不可能的，因为 SDK 没有提供这样的 API 来监控 CPU 使用情况（就像它对内存使用情况一样），但我更想知道你对此有何看法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:38:44.260

您实际上可以做到这一点，至少使用私有 API。它也不是百分比，而是存储为用于测量功耗的集体“CPU时间”。不久前，我在一个我从事的项目中做到了这一点。看看[这个谷歌代码项目](https://code.google.com/p/syspower/)。它需要使用私有 API，我不保证这些 API 仍然存在，但我确实在某一时刻做到了。

# ios - 将 Tap GestureRecognizer 添加到 MKOverlay

> ID：12631033
> 
> 赞同：2
> 
> 时间：2012-09-27T22:34:15.653
> 
> 标签：ios, uigesturerecognizer, tap, mkoverlay

我试图在我的地图上叠加以响应触摸。因此，我想为在方法 mapView:viewForOverlay 中创建的 MKOverlayView 添加一个用于点击的 UIGestureRecognizer。

我在这个方法中添加了以下代码：

```
if ([overlay isKindOfClass:[MKPolygon class]])
{

    MKPolygonView*    aView = [[MKPolygonView alloc] initWithPolygon:(MKPolygon*)overlay];

    UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];

    tap.delegate = self;
    aView.fillColor = color;
    aView.strokeColor = color;
    aView.lineWidth = 2;
    [aView addGestureRecognizer:tap];

    return aView;
} 
```

此外，我符合 UIGestureRecognizerDelegate - 协议并实现了方法 handleGesture:。到目前为止，从未调用过此方法。

任何想法我做错了什么？

谢谢！

# html - 获取 hpple 中的 HTML 标签以及文本？

> ID：12631034
> 
> 赞同：2
> 
> 时间：2012-09-27T22:34:16.523
> 
> 标签：html, objective-c, ios, parsing, hpple

下面的代码从某个 div 中获取所有文本。我是否可以从 div 以及 html 属性中获取所有文本？因此它还将所有的`<p> </p>'s`和添加`<br> </br>'s`到字符串 myString?

```
//trims string from previous page
        NSString *trimmedString = [stringy stringByTrimmingCharactersInSet:
                                 [NSCharacterSet whitespaceAndNewlineCharacterSet]]; 

    NSData *data = [[NSString stringWithContentsOfURL:[NSURL URLWithString:trimmedString]] dataUsingEncoding:NSUTF8StringEncoding];
    TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:data];    
    NSArray *elements  = [xpathParser searchWithXPathQuery:@"//div[@class='field-item even']"];
    TFHppleElement *element = [elements lastObject]; //may need to change this number?!
    NSString *mystring = [self getStringForTFHppleElement:element];

    trimmedTextView.text = [trimmedTextView.text stringByAppendingString:mystring]; 
```

方法在这里：

```
-(NSString*) getStringForTFHppleElement:(TFHppleElement *)element 
{

NSMutableString *result = [NSMutableString new];

// Iterate recursively through all children
for (TFHppleElement *child in [element children])
    [result appendString:[self getStringForTFHppleElement:child]];

// Hpple creates a <text> node when it parses texts
if ([element.tagName isEqualToString:@"text"])
    [result appendString:element.content];

return result;
} 
```

任何想法，将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:52:09.923

尝试这个：

```
NSString *htmlDataString = [webView stringByEvaluatingJavaScriptFromString: @"document.documentElement.outerHTML"]; 
```

这会将所有 HTML 提取到字符串中。然后，您可以在您的本机代码中解析它并找到您在上面示例中所做的您感兴趣的 div。

您也可以使用 HTML 中的任何 DOM 元素来执行此操作，例如：

```
NSString *htmlDataString = [webView stringByEvaluatingJavaScriptFromString: @"document.documentElement.getElemenById('mydiv')"]; 
```

这更有效，但需要一点 javascript 技能。

# javascript - javascript：创建带有转义双引号的 SQlite 语句

> ID：12631037
> 
> 赞同：1
> 
> 时间：2012-09-27T22:34:31.050
> 
> 标签：javascript, sqlite, cordova

我试图在我的 json 字符串中转义双引号，以便在 phonegap 中执行以下 sqlite 语句，即。使用 javascript：

> var sqlstatement='INSERT INTO ACTIVITY(activity) VALUES("{\"clicks\":100, \"activityTypeCode\":3}")'

但是，当它尝试时：

```
tx.executeSql(sqlStatement,errorCB, sucessCB) 
```

双引号没有转义，因为有许多双引号对，所以我转到了 errorCallback。有没有解决的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T23:01:06.023

使用参数化语句：

```
tx.executeSql("INSERT INTO ACTIVITY (clicks, activityTypeCode) VALUES (?, ?)",
              [activity.clicks, activity.activityTypeCode], successCB, errorCB); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:43:41.773

您似乎正在尝试存储 JSON 字符串，您需要不同的语法。

```
 var insertStatement = "INSERT INTO ACTIVITY (clicks, activityTypeCode) VALUES (100, 3)"; 
```

此页面可能会帮助您完成其余部分：

[http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html](http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html)

# django - Django 应用程序的 ProxyPass 和 ProxyPassReverse

> ID：12631041
> 
> 赞同：5
> 
> 时间：2012-09-27T22:34:55.280
> 
> 标签：django, apache, mod-wsgi, mod-proxy, proxypass

[我的原始Django 服务问题](https://stackoverflow.com/questions/12320803/serving-django-apps-using-mod-wsgi-from-a-site-that-does-not-run-django-from)有一个后续问题，即如何开发 Django 应用程序并从与我的主要基于 PHP 的站点相同的服务器上提供它们（我的网站从静态和 PHP 驱动的网站迁移的所有部分）到一系列 Django 应用程序）。

我不能完全使用我提供的名称服务器解决方案，而是使用 mod_wsgi 将我的 Django 应用程序部署在不同的端口 (8000) 上。但是，现在我需要将 Django 应用程序实际集成到主站点中。在我的 Apache 2.0 配置文件（比如[http://www.example.com](http://www.example.com)）中，我添加了以下 ProxyPass 命令（在我的 mod_wsgi 初始化之后）：

```
ProxyPass        /app/newsletter     http://www.example.com:8000/app/newsletter
ProxyPassReverse /app/newsletter     http://www.example.com:8000/app/newsletter 
```

在这里，我希望任何请求：

```
http://www.example.com/app/newsletter 
```

将成功代理到：

```
http://www.example.com:8000/app/newsletter 
```

世界一切都会好起来的。

然而，这种情况并非如此。Apache 挂了 5 分钟左右（制作这个问题所花费的时间）然后吐出**502 代理错误**：

```
Proxy Error

The proxy server received an invalid response from an upstream server.
The proxy server could not handle the request GET /app/newsletter/.

Reason: Error reading from remote server 
```

在此响应之后查看我的 Apache 2.0 错误日志，我看到如下连续错误：

```
[Thu Sep 27 15:25:49 2012] [error] Exception KeyError: KeyError(****,) in <module 'threading' from '/usr/lib64/python2.6/threading.pyc'> ignored 
```

因此，mod_proxy 如何与 Django 和/或 Python 一起玩似乎有些疏忽。我还有其他使用 ProxyPass 和 ProxyPassReverse 的 Java 相关进程，它们工作正常。此外，当我不尝试应用 ProxyPass 时，Django 应用程序都运行良好（即，当我直接在端口 8000 上寻址它们时）。

有任何想法吗？我不觉得我正在做的事情特别复杂。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T16:14:43.160

最后，使用**mod_rewrite**是解决方案。将此添加到 Apache 的 httpd.conf 文件中：

```
RewriteEngine On
RewriteRule ^/app/newsletter/(.*)$ http://%{SERVER_NAME}:8000%{REQUEST_URI} [P] 
```

一切都按预期工作。

# c# - ac# pre-build 事件何时发生？

> ID：12631042
> 
> 赞同：1
> 
> 时间：2012-09-27T22:35:10.350
> 
> 标签：c#, pre-build-event

获取程序的编译日期/时间的问题有时会出现在这里。我对如何做到这一点有了一个想法。所以我编写了一个小型控制台应用程序，它生成一个包含当前日期/时间的 CompileInfo.cs 文件......

public class CompileInfo {public readonly static string compileStamp = "2012-09-27 17:58:42";}

我将该文件添加到我的主项目中，并将微型控制台应用程序的调用添加到项目的预构建事件中。然后，在项目中，我可以访问 CompileInfo.compileStamp 以获取编译日期/时间。

每次构建都会调用控制台应用程序，但组装的 CompileInfo.cs 文件是旧文件 - 在控制台应用程序运行之前存在的文件。如果我再次构建项目，我总是会得到在上一次构建中创建的 CompileInfo.cs 文件。

我假设我对预构建事件的理解是有缺陷的。我将不胜感激。

我正在使用适用于 Windows 桌面的 Visual Studio Express 2012。

# html - 如何旋转单个字母并使它们从左到右流动？

> ID：12631043
> 
> 赞同：13
> 
> 时间：2012-09-27T22:35:16.100
> 
> 标签：html, css

我试图让每个字母旋转 90 度的字符串；但是，我想保持字母的“流动”从左到右，而不是垂直。我还想保留那个“删除线”水平绿线（见下图）。

完成此任务的最简单方法是什么？我更喜欢使用 JavaScript 和/或 CSS。

使用`-transform: rotate`CSS 样式，我得到以下信息：

![不要](../Images/3a8411fb3a44b8ae95992ce821056c3d.png)

```
<style type="text/css">
.rotate {
-webkit-transform: rotate(-90deg);
}
</style>
<body>
<div class="rotate">
<span style="color:#0C0; text-decoration:line-through;">
<span style="color:#000;">
A B C
</span></span></div> 
```

我想要得到的是这样的东西，而不是求助于自定义字体。

![在此处输入图像描述](../Images/dc62e34852f6a913190631c76e076ab9.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T22:51:24.153

纯 CSS：

```
<div class="letters">
    <span>A</span><span>B</span><span>C</span>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

.letters {
    height:8px;
    line-height:16px;
    border-bottom:1px solid green;
    position:relative;
}
.letters > span {
    float:left;
    -webkit-transform: rotate(-90deg);
}​ 
```

**[演示](http://jsfiddle.net/gionaf/GHCyT/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T22:48:50.597

这里有一些 js 应该可以解决问题：http: [//jsfiddle.net/AYGDR/8/](http://jsfiddle.net/AYGDR/8/)

```
$(function() {
    $(".target").html(("<span>" + $(".target").html().split(" ").join("</span><span>") + "</span>"));
    var rotate = 0;
    $(".target span").each(function() {
        rotate = rotate - 90
        $(this).css({
            "-webkit-transform": "rotate(" + rotate + "deg)",
            "display": "inline-block"
        });
    });
}); 
```

我不小心加入了一些额外的轮换，因为我认为这是问题的一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-13T15:18:23.533

我的CSS：

```
<style>
span[class^="rot"]:not([char]):before{
content: '\27b7'; }
span[class^="rot"][char]:before{content: attr(char);}
span[class^="rot"] { position: relative; }
span[class^="rot"]:before {
 position: relative; display: inline-block;
 font-weight: bold; font-size: 16px; line-height:16px;
 font-family: Tahoma, Verdana, sans-serif;
 margin:0;padding:0;
 width:16px;height:16px;
}
.rot-90:before { transform: rotate(-90deg); }
.rot90:before  { transform: rotate(90deg); }
.rot45:before { transform: rotate(45deg); }
.rot-45:before { transform: rotate(-45deg); }
.rot180:before { transform: rotate(180deg); }
</style>
<p>
A long time <span class=rot90 style="color: green"></span> ago  in a  
<span class=rot-45 char="G"></span>alax<span class=rot180 char="y"></span> 
&nbsp; <span class=rot-90 char="F"></span>ar far 
a<span class=rot45 char="w"></span>way 
```

![结果](../Images/5f76bfaf2e6a24425544c7d3397bddd1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T22:46:33.310

这适用于最新版本的 chrome

```
<span style="color:#000; display: inline-block; max-width: 10px;">
A B C
</span> 
```

虽然只写了最里面的跨度

# windows-8 - Windows 8 Metro - 最大化事件？

> ID：12631046
> 
> 赞同：0
> 
> 时间：2012-09-27T22:35:45.010
> 
> 标签：windows-8, microsoft-metro, windows-runtime, maximize

页面最大化时会发生什么事件？当应用程序启动或从屏幕侧面选择应用程序时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:58:55.863

本身没有最大化事件，因为商店应用程序永远不会最小化。

正在启动的应用程序很难描述，因为它们可以通过多种方式启动 - 起始页、搜索、共享等。请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/ hh770838.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh770838.aspx)作为开始的地方，但还有更多内容。概括地说，在 C# 中，您覆盖了各种 Onxxx 方法，例如 OnLaunched 或 OnSearchActivated。在 js 中，您通常处理 WinJS.Application.onactivated 事件。

对于正在恢复的应用程序，即您使用“从屏幕一侧选择”突出显示的场景，应用程序将恢复 - 您可以在 C# 中捕获恢复事件

```
Application.Current.Resuming += handler; 
```

在javascript中

```
Windows.UI.WebUI.WebUIApplication.addEventListener("resuming", resumingHandler, false); 
```

我什至没有谈到快照视图，但你可以从这里开始...... [http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx)

# python - 使用python计算字典中的基因突变

> ID：12631052
> 
> 赞同：1
> 
> 时间：2012-09-27T22:36:21.590
> 
> 标签：python, list, dictionary, bioinformatics

我有这种格式的数据：

>abc12
ATCGACAG

>def34
ACCGACG

等等

我已将每个基因存储到字典中，其中以 > 开头的行作为值。所以字典类似于{'abc12':'ATCGACAG'等}

现在我希望能够比较每个基因，以便计算每个位点的 A、T、C 或 G 的数量。

我唯一能想到的是将字典分解为每个核苷酸位点的列表，并使用带有计数器的 zip()。这是最好的方法吗？如果是这样，我如何将字典分解为每个站点的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:39:56.437

使用[`collections.Counter`](http://docs.python.org/library/collections.html#counter-objects)：

```
>>> from collections import Counter
>>> Counter('ATCGACAG')
Counter({'A': 3, 'C': 2, 'G': 2, 'T': 1})
>>> Counter('ACCGACG')
Counter({'C': 3, 'A': 2, 'G': 2}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:51:55.343

有理由不使用 Biopython 吗？

```
from Bio import AlignIO
alignment =AlignIO.read("alignment.fas", "fasta")
n=0
while n<len(alignment[0]):
    A=alignment[:,n].count('A')
    C=alignment[:,n].count('C')
    G=alignment[:,n].count('G')
    T=alignment[:,n].count('T')
    gap=alignment[:,n].count('-')

    print "at position %s there are %s A's, %s C's, %s G's, %s T's and %s gaps" % (n, A, C, G, T, gap)
    n=n+1 
```

确保你有一个真正的对齐（即序列是相同的长度）。
ps 对于打印语句的丑陋格式，我深表歉意...

这返回

```
at position 0 there are 2 A's, 0 C's, 0 G's, 0 T's and 0 gaps
at position 1 there are 0 A's, 1 C's, 0 G's, 1 T's and 0 gaps
at position 2 there are 0 A's, 2 C's, 0 G's, 0 T's and 0 gaps
at position 3 there are 0 A's, 0 C's, 2 G's, 0 T's and 0 gaps
at position 4 there are 2 A's, 0 C's, 0 G's, 0 T's and 0 gaps
at position 5 there are 0 A's, 2 C's, 0 G's, 0 T's and 0 gaps
at position 6 there are 1 A's, 0 C's, 0 G's, 0 T's and 1 gaps
at position 7 there are 0 A's, 0 C's, 2 G's, 0 T's and 0 gaps 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:44:59.433

```
s1 = "ATCGACAG"
s2 = "ACCGACG"   
alignment = [s1[i] if s1[i] == s2[i] else "-" for i in range(len(min([s1,s2],key=len)))]
print "".join(alignment)
A-CGAC- 
```

# java - JSP：将文件上传到服务器的最佳实践

> ID：12631054
> 
> 赞同：3
> 
> 时间：2012-09-27T22:36:27.463
> 
> 标签：java, jsp, file-upload, upload, multipartform-data

我正在使用多部分表单、Apache FileUpload 等上传文件。它工作正常。

但是，我想知道在服务器中保存文件时的最佳做法或常见做法是什么，具体如下：

*   命名服务器中的文件（即：什么名字更好？一些UUID生成，或者我插入文件关联数据时db表生成的行ID）
*   服务器内文件的最佳位置（什么更好？即在 linux 服务器中我应该使用哪个文件夹或分区。我必须加密上传的文件吗？）
*   当我放置一个链接以从浏览器访问文件时：直接访问还是使用 servlet 更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:47:54.187

1.  如果你这样做（文件系统中的文件，数据库中的元数据），那么文件名的行 ID 不是一个坏主意（至少它确保了唯一性）。不幸的是，您必须注意文件系统和数据库是否同步，因此需要仔细编码。
2.  如果您关心性能文件可以存储在单独的 HDD（或 NAS）上。请注意，如果文件数量很大（数千个），则不应将所有文件放在一个文件夹中，而应将它们分组到子文件夹中，每个子文件夹最多包含数百个文件。如果文件数量变大，它将确保低访问时间。加密的使用应取决于您的业务需求（文件是否包含机密数据？）。
3.  Servlet 是一种更好的方式，因为它对客户端隐藏了真实的存储细节，并且它更能证明应用程序未来的变化。它还有其他一些好处（例如，您可以实现访问控制，在浏览器/代理中获得开箱即用的缓存等）。如果您使用加密，这是必须的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:15:22.943

在服务器文件系统操作反复出现问题（缺少权限、不同平台上的不同行为）之后，我建议将文件数据作为 BLOB 填充到数据库中。这样，您无需详细说明独特的文件命名方案，*所有*敏感数据都将位于一个位置。

在这种情况下，您将需要一个用于下载的 servlet，恕我直言，即使是访问存储在文件中的数据，它也是更好的方法。

# ms-access - 在访问中使用 dcount 和 datepart 函数

> ID：12631057
> 
> 赞同：1
> 
> 时间：2012-09-27T22:36:34.093
> 
> 标签：ms-access, vba

我正在尝试使用 dcount 函数来检查是否已经为今年制作了“fakturen”。它似乎无法正常工作。这是我的代码：

```
If DCount("*", "fakturen", "[DatePart('yyyy', [fakturen].[faktuurDatum])] = #" & [DatePart('yyyy', Forms![f_fakturen]![faktuurDatum])] & "#") > 0 Then
  strFoutmelding = "Facturen al aanwezig"
  GoTo Jaar_fakturen_Click_Error
End If 
```

我以以下代码为例：

```
' Dates
variable = DCount("[FieldName]", "TableName", "[Criteria] = #" & Forms!FormName!ControlName & "#")
' *************************** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:50:32.707

为什么不是年？

```
Year(faktuurDatum)

"Year(faktuurDatum)=" & Year(Forms![f_fakturen]![faktuurDatum]) 
```

如果你真的想要 DatePart：

```
If DCount("*", "fakturen", "DatePart('yyyy',[faktuurDatum]) = " _
    & DatePart("yyyy", Forms![f_fakturen]![faktuurDatum])) > 0 Then 
```

`Datepart('yyy' ...`将返回一个数字，而不是日期，因此您不需要分隔符。

# java - GUI swing 多线程应用程序中的代码结构

> ID：12631059
> 
> 赞同：0
> 
> 时间：2012-09-27T22:36:49.290
> 
> 标签：java, multithreading, swing, runnable, invokeandwait

我是 Java 和一般线程的新手，我在 Java 中有以下 GUI 应用程序：

1.  在一个框架中，用户在任意位置单击鼠标，就会出现一个图像。

2.  图像出现后，实时计时器开始运行，`jLabel` 根据用户在 gui 上选择的值进行自我更新，该计时器最多可以运行 5 秒。

3.  同时播放声音片段。如果图像和声音匹配，用户点击并因此停止计时器。更新了几个 jLabel 值以反映匹配或未命中。如果不是，则用户处于空闲状态，并在计时器用完后等待图像/声音剪辑对更改。如果任一用户停止定时器或定时器用完，应用程序等待图像间时间段的预选值并转到下一个图像/声音值。

我有以下结构：

我打电话

```
while(true)
{
SwingUtilities.invokeAndWait(displayTimer);
} 
```

在我的`run()`方法中。

我`Runnable`的是

```
private final Runnable displayTimer= new Runnable()
{
public void run()
{
 displayElapsed(System.currentTimeMillis() - startTime);
} 
```

};

稍后初始化并`startTime`作为任务开始的起始参考点。

我的`displayElapsed()`方法很混乱，检查计时器是否通过用户输入或不活动停止。如果不是，则更新`jLabel`计时器的负责人。如果是这样，它会调用一个`startInteraction()`方法。

`startInteraction()`准备新的图像和声音，分别显示和播放，创建一个新线程`updater`并启动它。

我也有一个`mouseListener`监听用户输入的。它调用`updater.interrupt()`用户点击。

现在，问题。我知道swing是线程不安全的。这种行为肯定会出现问题，因为有时它不会立即响应用户的鼠标点击，有时会在没有适当等待量的情况下通过两个图像/声音对。标签也不会立即更新。

总的来说，结构看起来很乱，我无法从逻辑上真正解释。

我所知道的是，我每次`displayElapsed`做的事情都会启动一个新线程，并且每次有用户或空闲停止时我都会中断它。所以从技术上讲，每个线程应该是按顺序排列的。

必须有更好的方法来做到这一点，我想看看重写这个方法是一个好的开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:10:24.243

看看这篇关于[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)的文章。您的程序遇到的问题是事件调度线程（这是用于呈现用户界面的唯一线程）被无限循环阻塞，因为可运行对象在 EDT 中同步执行。

您想要的是在不同的线程中运行您的计时器代码，并在此线程中发布定期任务以更新 EDT 中的标签。SwingWorker 类将帮助您完成此任务。为此，您

1.  子类化（或创建匿名）SwingWorker
2.  实现`doInBackground`你的定时循环
3.  在计时循环中，调用`publish`以传递时间戳（或您想要放入标签中的任何内容）
4.  实施`process`更新标签
5.  实例化工人并调用`run`.

# jquery - 用户单击后栏时动态创建的内容不出现

> ID：12631062
> 
> 赞同：0
> 
> 时间：2012-09-27T22:37:14.453
> 
> 标签：jquery, html, ruby-on-rails, ajax

我有一个带有级联下拉列表的页面（一个下拉列表的可用选项取决于另一个下拉列表的选择）。我是一个 ajax 调用来填充第二个选择：

```
$.ajax({
    url: "/sport_types/"+$(this).val()+"/leagues"
    dataType: "json"
    success: (data) ->
      $(".league_selector option").remove()
      row = "<option value=\"\">Choose a League...</option>"
      $(".league_selector").append(row)
      $.each data, (i, j) ->
        row = "<option value=\"" + j.id + "\">" + j.league_name + "</option>"
        $(".league_selector").append(row)
  }) 
```

这很好用，但是如果用户单击浏览器上的后退按钮，则不会加载此动态生成的内容。

我正在运行一个 Rails 应用程序，以防万一有一种简单的方法可以在 Rails 中处理这个问题，太棒了。如果没有，任何好的 ol' HTML/jQuery 技巧将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:40:34.647

在浏览器中点击后退按钮相当于页面刷新，所以很明显你的 HTML 将默认为正常状态。

如果您希望这种方法起作用，您必须将数据存储在 cookie 或会话中，并在刷新时填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:44:39.807

如果单击返回按钮，并非所有浏览器都会刷新一次。其中一些是从现金中提取的，因此如果您添加此代码将很有用。如果你的哈希改变了，你需要下载你的“源”

```
var hash = location.hash;

setInterval(function()
{
    if (location.hash != hash)
    {
        alert("Changed from " + hash + " to " + location.hash);
        hash = location.hash;
    }
}, 100); 
```

***或者***

您可以使用历史插件[jquery-history](http://benalman.com/code/projects/jquery-hashchange/docs/files/jquery-ba-hashchange-js.html#hashchange_event)

关注`jQuery.fn.hashchange`事件

# security - 暴力破解 8 个字符的字符串与 32 个字符的字符串需要多长时间

> ID：12631064
> 
> 赞同：-1
> 
> 时间：2012-09-27T22:37:46.260
> 
> 标签：security, brute-force

暴力破解 32 个字符的字符串需要多长时间。

假设你有一个网页告诉你字符串是否有效，并且请求的数量没有限制。

我在通过电子邮件发送给用户的密码重置链接中使用了 32 个字符的字符串，我想知道尝试所有 32 个字符与尝试 8 个字符串的时间差是多少。

我们是在说几分钟、几小时、几天、几个月吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:40:04.843

这取决于字符集，也就是 8 个字符中的每个字符有多少个合法字符。

请放心，排列的数量呈指数增长！

# java - 加载对象文件时不会加载材质文件

> ID：12631067
> 
> 赞同：2
> 
> 时间：2012-09-27T22:37:58.770
> 
> 标签：java, 3d, java-3d

所以我一直在尝试使用 Java 3D，最近，我一直在尝试将外部 3D 模型导入到程序中。此时，我可以将模型作为OBJ文件放入程序中，但是由于某种原因，程序不会加载相应的材料文件，我不知道问题是我的编码问题还是文件只是'没有正确导出。

这是我写的代码：

```
import com.sun.j3d.utils.universe.*;
import com.sun.j3d.utils.geometry.*;
import javax.media.j3d.*;
import com.sun.j3d.loaders.objectfile.*;
import com.sun.j3d.loaders.Scene;
import java.awt.Color;
import javax.vecmath.*;

public class ModelLoadingTest {

    public static void main(String[] args) {
        SimpleUniverse universe = new SimpleUniverse();
        BranchGroup scene = new BranchGroup();

        ObjectFile loader = new ObjectFile(ObjectFile.LOAD_ALL);
        loader.setFlags(ObjectFile.RESIZE);

        Scene modelScene = null;

        try{
            modelScene = loader.load("paintedcar.obj");

        }
        catch(Exception e){

        }

        DirectionalLight lighting = new DirectionalLight(new Color3f(Color.WHITE), new Vector3f(0f, 0f, -1f));
        lighting.setInfluencingBounds(new BoundingSphere(new Point3d(0.0, 0.0, 1.0), 100));

        scene.addChild(modelScene.getSceneGroup());
        scene.addChild(lighting);
        universe.addBranchGraph(scene);
        universe.getViewingPlatform().setNominalViewingTransform();
    }
} 
```

如果有帮助，我正在测试的模型是在 Maya 中制作并导出为 Wavefront 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:44:40.563

...您没有在代码中加载纹理。matirl 文件未编码在 obj 文件中，您需要将其作为纹理导入，您可以像处理球体一样执行此操作，除非将纹理分配给网格。当你分配它时，你需要使用

```
"mesh name".setAppearance("your Appearance name"); 
```

例如

```
model.setAppearance(ap); 
```

# c - 我的程序在 C 中实现堆栈有什么问题

> ID：12631072
> 
> 赞同：0
> 
> 时间：2012-09-27T22:38:16.830
> 
> 标签：c, data-structures, stack-overflow

嗨，我的堆栈数据结构程序有问题。似乎当我定义我的数组的大小/数组的想象大小只是为了通过循环调用它时，当我输入数据或推送时，我定义或指定的大小正在耗尽或被编辑。

例如。我输入 5 作为尺寸并选择推送，然后添加 2。它工作正常。但是如果我选择再次推送数据，它现在将传递给 size 变量。我不知道发生了什么...

```
#include <stdio.h>
#include <ctype.h>
#include <conio.h>
#include <string.h>
#include <stdlib.h>
#define p printf
#define s scanf

int top;
int ar[1];
int size;

main()
{
    void push();
    int opt, num;
    char cont[] = { 'y' };
    clrscr();

    p("Stacking Program");
    p("\n\nData Size: ");
    s("%d", &size);
    p("\n");

    while((cont[0] == 'y') || (cont[0] == 'Y'))
    {
        clrscr();
        p("Stacking Program");
        p("\n\nData Size: %d\n\n", size);
        p("MAIN MENU\n1\. Pop\n2\. Push\n3\. Pick\n4\. View\nChoose: ");
        s("%d", &opt);
        p("\n");

        switch(opt) {
            case 1:
                pop();
                break;
            case 2:
                if(top > size)
                {
                    p("You can't push more data");
                }
                else
                {
                    p("Enter data for Data[%d]: ", top);
                    s("%d", &num);
                    push(num);
                }
                break;
            case 3:
                pick();
                break;
            case 4:
                view();
                break;
            default:
                p("Your choice is not in the list.");
                break;
        }

        p("\n\nDo you want continue\(Y\/N\)?");
        s("%s", &cont[0]);
    }
}

pop()
{
    int a;
    if(top < 0)
    {
        p("Stack empty.");
        return 0;
    }
    else
    {
        a = ar[top];
        p("\(Data[%d] = %d\) removed.", top, a);
        top--;
    }
}
void push(int b)
{
    top++;
    ar[top] = b;
}
pick()
{
    if(top < 0)
    {
        p("Nothing to display.");
        return 0;
    }
    else
    {
        p("\(Data[%d] = %d\) is the last data.", top, ar[top]);
    }
}
view()
{
    int i;
    if(top < 0)
    {
        p("Nothing to display.");
        return 0;
    }
    else
    {
        for(i = 1; i < (top + 1); i++)
        {
            p("Data[%d] = %d\n", i, ar[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:27:59.177

如果您不想动态调整数组大小，另一种方法是分配一个包含 MAXSIZE 元素的数组，其中 MAXSIZE “足够大”。此外，还有一些其他评论：

您在程序的顶部声明了一个大小为 1 的字符数组：

```
char cont[] = { 'y' }; 
```

但是稍后在您的 scanf 行中，您尝试使用它：

```
s("%s", &cont[0]); 
```

即使用户只键入一个字符，这也会溢出缓冲区，因为 %s 假定缓冲区至少有两个可用字节，一个用于字符，一个用于 '\0'。可能的修复：

```
char cont[] = { 'y', '\0' };
// ...
s("%1s", cont); 
```

请注意，cont 与 &cont[0] 的表达方式相同且更常见。

另一个问题是，如果打开警告，编译器可能会捕获到一些问题：所有函数都应该在被提及之前进行原型化，没有显式返回类型的函数应该使用 int 类型声明，并且你不应该让函数在没有即使您显式或隐式声明它，也会返回一个值。此外，'(' 和 ')' 不需要在字符串文字中转义。

这是一个修改后的版本，其中注明了更改。我重新定义了 clrscr() 因为我在这个系统上没有 conio.h：

```
#include <stdio.h>
#include <ctype.h>
// #include <conio.h>
#define clrscr() printf("\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n")
#include <string.h>
#include <stdlib.h>
#include <stdbool.h>

#define p printf
#define s scanf

#define MAXSIZE 500

// prototypes [Changed]
int pop();
void push(int b);
int pick();
int view();

int top;
int ar[MAXSIZE];
int size;

int main()
{
    int opt, num;
    char cont[] = { 'y', '\0' }; // [Changed]
    clrscr();
    p("Stacking Program\n\n");

    // keep asking until we get a valid size [Changed]
    for (;;)
    {
        p("Data Size: ");
        s("%d", &size);
        if (size > 0 && size < MAXSIZE)
            break;
        printf("Not a valid size!\n");
    }
    p("\n");

    while((cont[0] == 'y') || (cont[0] == 'Y'))
    {
        clrscr();
        p("Stacking Program");
        p("\n\nData Size: %d\n\n", size);
        p("MAIN MENU\n1\. Pop\n2\. Push\n3\. Pick\n4\. View\nChoose: ");
        s("%d", &opt);
        p("\n");

        switch(opt) {
            case 1:
                pop();
                break;
            case 2:
                if(top > size)
                {
                    p("You can't push more data");
                }
                else
                {
                    p("Enter data for Data[%d]: ", top);
                    s("%d", &num);
                    push(num);
                }
                break;
            case 3:
                pick();
                break;
            case 4:
                view();
                break;
            default:
                p("Your choice is not in the list.");
                break;
        }

        p("\n\nDo you want continue(Y/N)?");
        s("%1s", cont); // [Changed]
    }
    return 0;
}

int pop()
{
    int a;
    if(top == 0) // [Changed]
    {
        p("Stack empty.");
        return 0;
    }
    else
    {
        top--; // [Changed]
        a = ar[top];
        p("(Data[%d] = %d) removed.", top, a);
        return a; // [Changed]
    }
}

void push(int b)
{
    ar[top] = b;
    top++; // [Changed]
}

int pick()
{
    if(top == 0) // [Changed]
    {
        p("Nothing to display.");
        return 0;
    }
    else
    {
        p("(Data[%d] = %d) is the last data.", top, ar[top-1]); // [Changed]
        return -1; // [Changed]
    }
}

int view()
{
    int i;
    if(top < 0)
    {
        p("Nothing to display.");
        return 0;
    }
    else
    {
        for(i = 0; i < top; i++)  // [Changed]
        {
            p("Data[%d] = %d\n", i, ar[i]);
        }
        return -1;  // [Changed]
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:14:13.327

您需要在运行时使用用户输入的大小定义数组的大小。代替：

```
int top;
int ar[1];
int size; 
```

...

```
int top = -1;
int *ar = NULL;
int size = 0; 
```

然后从用户那里获得大小后：

```
 if ( size > 0 )
   {
      ar = malloc(size * sizeof(int));
      if ( ar == NULL )
      {
         printf("ERROR: malloc() failed\n");
         exit(2);
      }
   }
   else
   {
      printf("ERROR: size should be positive integer\n");
      exit(1);
   }

   ....
      p("\n\nDo you want continue(Y/N)?");
      s("%s", &cont[0]);
   }
   free(ar);

} // end of main 
```

我认为 view() 中的 for 循环应该是：

```
 for(i = 0 ; i <= top ; i++) 
```

还

```
case 2:
    if ( top == ( size - 1 )) 
```

# java - 多线程的 CyclicBarrier 性能较弱：树状同步结构是否可以替代？

> ID：12631078
> 
> 赞同：2
> 
> 时间：2012-09-27T22:38:39.070
> 
> 标签：java, multithreading, performance, concurrency

我们的应用程序要求所有工作线程在定义的点同步。为此，我们使用 a `CyclicBarrier`，但它似乎不能很好地扩展。对于超过 8 个线程，同步开销似乎超过了多线程的好处。（但是，我不能用测量数据来支持这一点。）

**编辑**：同步发生得非常频繁，大约 100k 到 1M 次。

如果许多线程的同步是“困难的”，它是否有助于构建同步树？线程 1 等待 2 和 3，依次等待 4+5 和 6+7，以此类推；完成后，线程 2 和 3 等待线程 1，线程 4 和 5 等待线程 2，依此类推。

```
1
| \
2   3
|\  |\
4 5 6 7 
```

这样的设置会减少同步开销吗？我会很感激任何建议。

另请参阅这个特色问题：[Java 中最快的循环同步是什么（ExecutorService vs. CyclicBarrier vs. X）？](https://stackoverflow.com/q/2712232/946850)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:23:13.953

> 对于超过 8 个线程，同步开销似乎超过了多线程的好处。（但是，我不能用测量数据来支持这一点。）

老实说，你的问题就在那里。找出一个性能基准并证明这是问题所在，或者冒着花费数小时/天来解决完全错误的问题的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:42:26.093

您正在以一种微妙的错误方式思考问题，这往往会导致非常糟糕的编码。你不想等待*线程*，你想等待*工作完成*。

可能最有效的方法是共享的、可等待的计数器。当您进行新工作时，增加计数器并向计数器发出信号。完成工作后，递减计数器。如果没有工作可做，请在柜台等候。如果您将计数器降为零，请检查您是否可以进行新工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T22:51:30.533

如果我理解正确，您是在尝试将解决方案分解为多个部分并分别但同时解决，对吗？然后让您当前的线程等待这些任务？您想使用类似 fork/join 模式的东西。

```
List<CustomThread> threads = new ArrayList<CustomThread>();
for (Something something : somethings) {
    threads.add(new CustomThread(something));
}
for (CustomThread thread : threads) {
    thread.start();
}
for (CustomThread thread : threads) {
    thread.join(); // Blocks until thread is complete
}
List<Result> results = new ArrayList<Result>();
for (CustomThread thread : threads) {
    results.add(thread.getResult());
}
// do something with results. 
```

在 Java 7 中，通过 fork/join 池提供了更多支持。查看[`ForkJoinPool`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)及其[踪迹](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)，并使用 Google 查找许多其他教程之一。

您可以递归此概念以获得所需的树，只需让您创建的线程以完全相同的方式生成更多线程。

* * *

**编辑：**我的印象是你不会创建那么多线程，所以这更适合你的场景。该示例不会非常短，但它与您在另一个答案中的讨论相同，您可以等待工作，而不是线程。

首先，您`Callable`的子作业需要 a`Input`并返回 a `Result`：

```
public class SubJob implements Callable<Result> {
    private final Input input;

    public MyCallable(Input input) {
        this.input = input;
    }

    public Result call() {
        // Actually process input here and return a result
        return JobWorker.processInput(input);
    }
} 
```

然后使用它，创建`ExecutorService`一个固定大小的线程池。这将限制您同时运行的作业数量，因此您不会意外地对系统进行线程轰炸。这是你的主要工作：

```
public class MainJob extends Thread {

    // Adjust the pool to the appropriate number of concurrent
    // threads you want running at the same time
    private static final ExecutorService pool = Executors.newFixedThreadPool(30);
    private final List<Input> inputs;

    public MainJob(List<Input> inputs) {
        super("MainJob")
        this.inputs = new ArrayList<Input>(inputs);
    }

    public void run() {
        CompletionService<Result> compService = new ExecutorCompletionService(pool);
        List<Result> results = new ArrayList<Result>();
        int submittedJobs = inputs.size();
        for (Input input : inputs) {
            // Starts the job when a thread is available
            compService.submit(new SubJob(input)); 
        }
        for (int i = 0; i < submittedJobs; i++) {
            // Blocks until a job is completed
            results.add(compService.take())
        }
        // Do something with results
    }
} 
```

这将允许您重用线程，而不是在每次要运行作业时生成一堆新线程。完成服务将在等待作业完成时进行阻塞。另请注意，该`results`列表将按完成顺序排列。

您也可以使用`Executors.newCachedThreadPool`，它创建一个没有上限的池（如使用`Integer.MAX_VALUE`）。如果一个线程可用，它将重用线程，如果池中的所有线程都在运行作业，它将创建一个新线程。如果您以后开始遇到死锁，这可能是可取的（因为固定线程池中有太多作业在等待子作业无法运行和完成）。这至少会限制您创建/销毁的线程数。

最后，您需要`ExecutorService`手动关闭，可能通过关闭挂钩，或者它包含的线程将不允许 JVM 终止。

希望有帮助/有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T00:43:58.157

如果您有生成任务（例如处理矩阵列的示例），那么您可能会遇到 CyclicBarrier。也就是说，如果必须完成第 1 代的每一项工作才能处理第 2 代的任何工作，那么您能做的最好的事情就是等待满足该条件。

如果每一代都有数千个任务，那么最好将所有这些任务提交给一个 ExecutorService (ExecutorService.invokeAll) 并等待结果返回，然后再继续下一步。这样做的好处是消除了上下文切换和在物理 CPU 有限时分配数百个线程而浪费的时间/内存。

如果您的任务不是分代的，而是更多的树状结构，其中只需要完成一个子集才能在该子集上进行下一步，那么您可能需要考虑 a`ForkJoinPool`并且您不需要 Java 7去做。您可以获得 Java 6 的参考实现。这可以在任何 JSR 引入 ForkJoinPool 库代码下找到。

我还有另一个[答案](https://stackoverflow.com/a/5254449/122207)，它在 Java 6 中提供了一个粗略的实现：

```
public class Fib implements Callable<Integer> {
    int n;
    Executor exec;

    Fib(final int n, final Executor exec) {
        this.n = n;
        this.exec = exec;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public Integer call() throws Exception {
        if (n == 0 || n == 1) {
            return n;
        }

        //Divide the problem
        final Fib n1 = new Fib(n - 1, exec);
        final Fib n2 = new Fib(n - 2, exec);

        //FutureTask only allows run to complete once
        final FutureTask<Integer> n2Task = new FutureTask<Integer>(n2);
        //Ask the Executor for help
        exec.execute(n2Task);

        //Do half the work ourselves
        final int partialResult = n1.call();

        //Do the other half of the work if the Executor hasn't
        n2Task.run();

        //Return the combined result
        return partialResult + n2Task.get();
    }

} 
```

请记住，如果您将任务划分得过多并且每个线程完成的工作单元太小，则会对性能产生负面影响。例如，上面的代码是解决斐波那契的一种非常慢的方法。

# matlab - 在 Matlab 中停止 cURL 传输

> ID：12631083
> 
> 赞同：1
> 
> 时间：2012-09-27T22:39:06.690
> 
> 标签：matlab, curl, ftp

我编写了一个 Matlab GUI，用于自动将数据传入和传出 ftp 服务器，这是使用 cURL 完成的，例如

```
str = sprintf(' "%s" -O "ftp://%s:%s@%s" -Q "CWD %s%s/" ', ...
    handles.curl, username, password, ...
    strcat(ftpname, d{1}), '/users/', username);

% Try to transfer file until successful (s=0)
s = 1;
while s ~= 0
    s = dos(str);
end 
```

通常，此 GUI 将在慢速网络上运行，因此传输 50 MB 文件可能需要长达 30 分钟或更长时间。

我想知道的是，如果在数据传输过程中按下 GUI 上的“停止”按钮，cURL 中有没有办法取消该传输，或者我需要让它完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:15:50.827

您可以设置一个带有回调的计时器对象，以检查用户是否点击了取消按钮，然后尝试通过不同的`dos`命令终止该进程。我唯一不喜欢的是整个外部进程 cURL，可能很难知道你肯定得到了正确的进程。您没有尝试任何 Matlab 传输命令是有原因的吗？

# jakarta-ee - 如何注入 EJB 的子类

> ID：12631088
> 
> 赞同：1
> 
> 时间：2012-09-27T22:39:21.767
> 
> 标签：jakarta-ee, dependency-injection, ejb-3.0

我有抽象 EJB 和它的两个子类。在我的托管 bean 中，我希望有一个抽象类型的字段，并根据传递给页面的参数以及任一子类的实例对其进行初始化。我想没有办法使用注入来做到这一点，我应该使用良好的旧 JNDI 查找......或者也许有一种方法可以重新设计它以能够使用注入？

**修订**我想我不能定义 EJB 抽象，但这并没有改变这种情况。即使 AbstractEJB 不是抽象的，我也只想实例化它的子类。

```
@Stateless
public abstract class AbstractEJB {
    public abstract void method1();
}

@Stateless
public class Implementation1 extends AbstractEJB () {
    public void method1() { ... }
}

@Stateless
public class Implementation2 extends AbstractEJB () {
    public void method1() { ... }
}

@ManagedBean 
public class MyManagedBean {

    @EJB
    AbstractEJB myEJB; //has to be initialized with either Implementation1 or Implementation2 instance
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T00:11:50.883

这不是 EJB 的预期用途。您不注入实现，而是注入接口。

提出一个接口（您在 EJB 3.0 中需要它）和一个抽象类（您可以让您的 EJB 从一个抽象的非 EJB 类继承；抽象 EJB 没有意义，因为它们应该由容器实例化）。使用各个注解的“name”参数：

```
public abstract class Abstract implements MyEJBIntf {
    public abstract void method1();
}

@Stateless(name="EJB1") // defaults to "EJB1" anyway
public class EJB1 extends Abstract { ... }

@Stateless
public class EJB2 extends Abstract { ... }

@ManagedBean 
public class MyManagedBean {
    @EJB(name="EJB1") // or "EJB2"
    MyEJBIntf myEJB; 
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-27T23:17:41.617

请检查 Spring，我想你可以找到你需要的东西。
[http://www.mkyong.com/spring/how-to-define-bean-properties-in-spring/](http://www.mkyong.com/spring/how-to-define-bean-properties-in-spring/)
[http://static.springsource.org/spring/docs/2.5.3/reference/beans.html](http://static.springsource.org/spring/docs/2.5.3/reference/beans.html)

# visual-studio-2012 - 用真正的 VS2012 专业版可以构建 Metro Style App 吗？

> ID：12631094
> 
> 赞同：0
> 
> 时间：2012-09-27T22:39:55.527
> 
> 标签：visual-studio-2012

我在 MS Dreamspark 页面上。我可以看到有一个**VS2012 Express for web**和**VS2012 Express for Windows 8**。但是专业版只有**VS2012专业**版一款。**当windows 8**出来时，是否可以使用实际的 VS2012 专业版构建 Metro Style App ？我真的很困惑。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:42:50.277

您可以获得用于 VS Express 的 Metro (Win Store) SDK，并且在安装模板时将安装在您的专业版 VS 下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:26:44.203

“Metro”模板已重命名为“Windows Store”，因为 Microsoft 不再使用“Metro”。它在 VS Professional 中。

# zend-framework - Zend_Form 中的 ZendX_JQuery 元素

> ID：12631098
> 
> 赞同：0
> 
> 时间：2012-09-27T22:40:20.100
> 
> 标签：zend-framework, zend-form

我有一个扩展 Twitter_Form 的表单（一个 Twitter 引导 css 表单），它又扩展了 Zend_Form。我想在 Zend_Form 中添加 ZendX_JQuery 元素，但由于装饰器而出现错误

错误是

```
Cannot render jQuery form element without at least one decorator implementing the 'ZendX_JQuery_Form_Decorator_UiWidgetElementMarker'
 Default decorator for this marker interface is the 'ZendX_JQuery_Form_Decorator_UiWidgetElement'. Hint: The ViewHelper decorator does not render jQuery elements 
```

表单类是：

```
class Application_Form_Classes extends Twitter_Form {

   $autocomplete = new ZendX_JQuery_Form_Element_Autocomplete('demo-input-local');
   $autocomplete->setJQueryParam('url','http://.../something.php');

   $this->addElement($autocomplete);

   $this->addElement("submit", "register", array("label" => "Register"));} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:59:30.133

我将自定义的 multipleautocomplete viewhelper 添加到我`Twitter_Form`的子表单中。如果有任何替代方法，请发布答案。

```
class Application_Form_Classes extends Twitter_Form{

   public function init(){

       $jqueryform = new ZendX_JQuery_Form();

       $multiautocomplete = new ZendX_JQuery_Form_Element_Multiautocomplete('demoinputlocal');
       $multiautocomplete->setJQueryParam('url','http://..../something.php');

        $jqueryform->addElement($multiautocomplete);

        $this->addSubForm($jqueryform, "jqueryform");

       $this->addElement("submit", "register", array("label" => "Register"));
       $this->addElement("reset", "reset", array("label" => "Reset"));

    }
} 
```

# java - JobListeners 在 Quartz 集群中是全局的吗？

> ID：12631099
> 
> 赞同：4
> 
> 时间：2012-09-27T22:40:22.863
> 
> 标签：java, jakarta-ee, listener, cluster-computing, quartz-scheduler

我在 Java EE 应用程序的上下文中运行 Quartz 的集群实例。[Java EE 应用程序中的](https://stackoverflow.com/questions/9890212/java-quartz-scheduler-fire-a-new-job-immediately])一个节点（随机选择）将触发一系列 Quartz 作业以立即执行（如本文所述）；在触发每个作业之前，与该作业关联的 JobListener 被添加到调度程序的 ListenerManager。

如果我理解 Quartz 的内部工作正常，那么实际执行每个作业的节点将从可用节点[中随机选择。](https://stackoverflow.com/questions/4847543/execution-of-jobs-in-a-quartz-cluster)如果是这种情况，如果侦听器是在与执行作业的节点不同的节点中创建的，如何调用侦听器的方法？我可以假设 ListenerManager 中的侦听器列表是全局的并且对于集群中的所有节点都相同吗？或者每个节点都有自己的 ListManager 和自己的侦听器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-08-08T07:04:17.190

[我在一本免费的在线书籍](https://flylib.com/books/en/2.65.1/quartz_clustering_cookbook.html)中找到了一些更有用的信息：

> 在集群环境中使用全局监听器
> 
> 您仍然可以在集群环境中使用作业和触发侦听器。当您尝试了解哪个调度程序实例将接收回调方法时，唯一的困惑出现了。
> 
> 记住这一点的最简单方法是在执行作业或触发器的调度程序实例中通知侦听器。由于作业和触发器仅在单个节点上执行，因此会在该节点上通知侦听器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-12T12:21:26.947

根据石英文档：

> 侦听器在运行时向调度程序注册，并且不与作业和触发器一起存储在 JobStore 中。这是因为侦听器通常是与您的应用程序的集成点。因此，每次您的应用程序运行时，侦听器都需要重新注册到调度程序。

参考[http://quartz-scheduler.org/files/documentation/Quartz-2.1.x-Documentation.pdf](http://quartz-scheduler.org/files/documentation/Quartz-2.1.x-Documentation.pdf)

希望这可以帮助

# google-apps-script - GoogleAppsScript：解析 HTML 后如何修剪字符串？

> ID：12631102
> 
> 赞同：0
> 
> 时间：2012-09-27T22:40:58.637
> 
> 标签：google-apps-script

我要做的是从网页中解析和提取电影标题，而不需要所有的 HTML 垃圾，最终将保存到电子表格中。我的代码：

```
function myFunction() {
   var url = UrlFetchApp.fetch("http://boxofficemojo.com/movies/?id=clashofthetitans2.htm")
   var doc = url.getContentText()
   var patt1 = doc.match(/<font face\=\"Verdana\"\ssize\=\"6\"><b>.*?<\/b>/i);

      //var cleaned = patt1.replace(/^<font face\=\"Verdana\" size\=\"6\"><b>/,"");
      //Logger.log(cleaned); Didn't work, get "cannot find function in object" error.
      //so tried making a function below:   

   String.trim = function() {
     return this.replace(/^\W<font face\=\"Verdana\"\ssize\=\"6\"><b>/,""); }
   Logger.log(patt1.trim());
 } 
```

我对这一切都很陌生（编程和一般的 GoogleScripting） 我一直在参考 w3school.com 的 JavaScript 部分，但那里的许多东西都不适用于 Google Scripts。我只是不确定这里缺少什么，我的 RegEx 错了吗？有没有更好/更快的方法来提取这些数据而不是 RegEx？任何帮助都会很棒，感谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T13:34:00.153

虽然尝试从 HTML 中解析不受您控制的信息总是有点挑战，但有一种方法可以让您自己更轻松。

我注意到每个电影页面的标题元素也包含电影标题，如下所示：

```
<title>Wrath of the Titans (2012) - Box Office Mojo</title> 
```

您可能会更成功地从中解析出标题，因为它可能更稳定。

```
var url = UrlFetchApp.fetch("http://boxofficemojo.com/movies/?id=clashofthetitans2.htm");
var doc = url.getContentText();
var match = content.match(/<title>(.+) \([0-9]{4}\) -/);
Logger.log("Movie title is " + match[1]); 
```

# java - 如何将“紧凑”Python 移植到“紧凑”Java？

> ID：12631103
> 
> 赞同：0
> 
> 时间：2012-09-27T22:41:06.857
> 
> 标签：java, python

一个朋友正在做一个在线 Scala 课程并分享了这个。

```
# Write a recursive function that counts how many different ways you can make
# change for an amount, given a list of coin denominations. For example, there
# are 3 ways to give change for 4 if you have coins with denomiation 1 and 2:
# 1+1+1+1, 1+1+2, 2+2. 
```

* * *

## 如果您正在参加并仍在研究解决方案，请不要阅读此内容！

**（免责声明：即使我的 Python 解决方案可能是错误的，如果你在课程中，我不想影响你的想法，不管是哪种方式！我想这是产生学习的*想法*，而不仅仅是“解决”...）**

* * *

那一边...

我想我会在 Python 中尝试一下，因为我没有 Scala 印章（我自己不在课程上，只是对学习 Python 和 Java 感兴趣，欢迎“练习”练习）。

这是我的解决方案，我想使用尽可能紧凑的符号将其移植到 Java：

* * *

```
def show_change(money, coins, total, combo):
  if total == money:
    print combo, '=', money
    return 1
  if total > money or len(coins) == 0:
    return 0
  c = coins[0]
  return (show_change(money, coins, total + c, combo + [c]) +
    show_change(money, coins[1:], total, combo))

def make_change(money, coins):
  if money == 0 or len(coins) == 0:
    return 0
  return show_change(money, list(set(coins)), 0, [])

def main():
  print make_change(4, [2, 1])

if __name__ == '__main__':
  main() 
```

* * *

## 问题

*   如果有帮助，我可以在 Java 中使上述内容变得多么紧凑，允许使用 JDK 外部的库？

我尝试自己进行移植，但它变得*非常*冗长，我认为通常的*“必须有更好的方法来做到这一点”*！

这是我的尝试：

* * *

```
import java.util.ArrayList;
import java.util.List;
import com.google.common.collect.Lists;
import com.google.common.primitives.Ints;
public class MakeChange {
  static int makeChange(int money, int[] coins) {
    if (money == 0 || coins.length == 0) {
      return 0;
    }
    return showChange(money, Ints.asList(coins), 0, new ArrayList<Integer>());
  }
  static int showChange(int money, List<Integer> coins, int total,
      List<Integer> combo) {
    if (total == money) {
      System.out.printf("%s = %d%n", combo, total);
      return 1;
    }
    if (total > money || coins.isEmpty()) {
      return 0;
    }
    int c = coins.get(0);
    List<Integer> comboWithC = Lists.newArrayList(combo);
    comboWithC.add(c);
    return (showChange(money, coins, total + c, comboWithC) + showChange(money,
        coins.subList(1, coins.size()), total, combo));
  }
  public static void main(String[] args) {
    System.out.println(makeChange(4, new int[] { 1, 2 }));
  }
} 
```

* * *

具体来说，我非常不喜欢的是必须做下面的事情，只是为了传递一个附加了一个元素的列表副本：

```
 List<Integer> comboWithC = Lists.newArrayList(combo);
    comboWithC.add(c); 
```

请向我展示 Java 的紧凑性和可读性如何。我仍然是两种语言的初学者......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:00:02.467

确实，您在这里所做的几乎所有事情都可以直接转换为 Java，而没有太多额外的冗长。

例如：

```
def make_change(money, coins):
  if money == 0 or len(coins) == 0: return 0
  return calculate_change(money, list(set(coins)), 0) 
```

显而易见的 Java 等价物是：

```
public static int make_change(int money, int coins[]) {
  if (money == 0 || coins.length == 0) return 0;
  return calculate_change(money, coins, 0);
} 
```

一些额外的词在这里和那里，一个额外的行，因为右括号，当然还有显式类型......但除此之外，没有大的变化。

当然，更 Python 和 Javariffic（等效词是什么？）版本将是：

```
def make_change(money, coins):
  if money == 0 or len(coins) == 0: 
    return 0
  return calculate_change(money, list(set(coins)), 0) 
```

显而易见的 Java 等价物是：

```
public static int make_change(int money, int coins[]) {
  if (money == 0 || coins.length == 0) {
    return 0;
  }
  return calculate_change(money, coins, 0);
} 
```

因此，Java 获得了一个额外的右大括号和几个空格字符；仍然没什么大不了的。

把整个东西放在一个类中，然后`main`变成一个方法，增加了大约 3 行。初始化显式数组变量而不是`[2, 1]`用作文字是 1。和`System.out.println`比 长几个字符`print`,比`length`长 3 个字符`len`, 每条评论用两个字符`//`代替 1 个字符`#`。但我怀疑这些都是你担心的。

最终，总共有一行很棘手：

```
return (calculate_change(money, coins, total + c, combo + [c]) +
    calculate_change(money, coins[1:], total, combo)) 
```

Java`int coins[]`没有办法说“给我一个带有当前数组尾部的新数组”。最简单的解决方案是传递一个额外的`start`参数，因此：

```
public static int calculate_change(int money, int coins[], int start, int total) {
    if (total == money) {
        return 1;
    }
    if (total > money || coins.length == start) {
        return 0;
    }
    return calculate_change(money, coins, 0, total + coins[start]) +
        calculate_change(money, coins, start + 1 total);
} 
```

事实上，几乎所有东西都可以简单地转换为 C；您只需要为数组的长度传递另一个参数，因为您无法像在 Java 或 Python 中那样在运行时计算它。

你抱怨的那一行是一个有趣的点，值得多加考虑。在 Python 中，你有（实际上）：

```
comboWithC = combo + [c] 
```

使用 Java 的 List，这是：

```
List<Integer> comboWithC = Lists.newArrayList(combo);
comboWithC.add(c); 
```

这*更*冗长。但这是故意的。Java`List<>`不应该以这种方式使用。对于小列表，复制周围的所有内容没什么大不了的，但对于大列表，这可能会造成巨大的性能损失。Python 的`list`设计是基于这样一个假设，即在大多数情况下，您正在处理小列表，并且复制它们非常好，因此编写起来应该很简单。Java 的`List`设计是基于这样的假设，即有时您正在处理巨大的列表，并且复制它们是一个非常糟糕的主意，因此您的代码应该清楚地表明您确实想要这样做。

理想的解决方案是要么使用不需要复制列表的算法，要么找到一种旨在以这种方式复制的数据结构。例如，在 Lisp 或 Haskell 中，默认列表类型非常适合这种算法，您应该可以在网上找到大约 69105 个“Java 中的 Lisp 样式列表”或“Java 缺点”的配方。（当然，您也可以在 List 周围编写一个简单的包装器，添加一个像 Python 一样的“addToCopy”方法`__add__`，但这可能不是正确的答案；您想编写惯用的 Java，或者为什么使用 Java 而不是许多其他方法之一JVM 语言？）

# algorithm - 索引动态分组翻译

> ID：12631106
> 
> 赞同：0
> 
> 时间：2012-09-27T22:41:35.153
> 
> 标签：algorithm, indexing, big-o

我面临着以一种我以前从未解决过的方式处理 ID 的问题。我认为对此没有什么惊人的解决方案，但我想我不妨问问。

我有一个对象的哈希表。

每个都由一个 id 标识，为了演示，它是一个数字。虽然它实际上是一个 GUID。

对象的数量是无限的，并且为了这个数十亿规模的练习。

应用程序逻辑定义了 ID 组之间存在转换。例如，`{4, 7, 12}`可以将 ID 组定义为转换为`{5, 16}`. 每个 ID 都可以出现在任意数量的分组翻译中。分组翻译中的一个组可以翻译成多个其他组，但每个组都是其自身的翻译规则，独立于其他组。分组翻译中的组可以包含从 1 个 ID 到数万个 ID。不允许空组。喜欢`{3} => {3}`或`{5, 17} => {5, 17}`允许自行翻译。ID 或组之间没有数学或其他可计算的关系，它们是任意定义的。

我正在寻找可以执行翻译的数据结构和/或搜索算法。查询组进行翻译的速度至关重要，必须为 O(1) 或非常接近。

从索引中添加或删除翻译可以在计划的维护会话中执行，并且不必非常快，尽管它必须足够快才能在最多 20%-30% 的停机时间下实际执行。

为了讨论，内存使用无关紧要。假设存储 ID 哈希表所需的相同规模的存储空间可用多次。

欢迎已知的算法、想法、建议、证明这是不可能的。

# javascript - 具有不断变化的可变 URL 的 XMLHttpRequest

> ID：12631110
> 
> 赞同：0
> 
> 时间：2012-09-27T22:42:10.787
> 
> 标签：javascript, jquery, xmlhttprequest

我有一个包含多个字符串的数组。从 1 到 10 个字符串。该数组每 5 秒循环一次抛出每个字符串。

```
var completeArray = new Array();
completeArray[0] = new comArray('http://domain.com','/sports/','photo','1','http://domain.com');
completeArray[1] = new comArray('10461632','/sports/','video','0','');
completeArray[2] = new comArray('10459620','http://domain.com','video','0','');
completeArray[3] = new comArray('10459542','/sports/m-footbl/recaps/092312aah.html','video','0','');
completeArray[4] = new comArray('http://domain.com','/sports/','photo','0',''); 
```

然后我有一个 XMLHttpRequest，它将变量 completeArray 作为 url。我希望它在每次遇到字符串的第一个节点中包含数字的字符串时发起一个新请求，例如“10461632”。

```
$.ajax({
    type: "GET",
    url: completeArray,
    dataType: "xml", 
    success: function(data) {
        $(data).find('item').each(function(){
        });
    }
}); 
```

我不知道如何去做，任何帮助或方向走上正确的道路将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:19:38.253

首先，什么是comArray？我认为您错误地将其命名为 comArray 而不是 Array。我没有看到它在任何地方定义。我假设并重命名了它。

我还做了一个小提琴，它只是将 url 记录到控制台中，这样你就可以看到它是如何工作的。我仍然认为这不能满足您的需求，因为 URL 格式错误，可能是由于您创建每个 completeArray 节点的方式。

小提琴：http: [//jsfiddle.net/dy9kM/12/](http://jsfiddle.net/dy9kM/12/)

```
var completeArray = new Array();
completeArray[0] = new Array('http://domain.com', '/sports/', 'photo', '1', 'http://domain.com');
completeArray[1] = new Array('10461632', '/sports/', 'video', '0', '');
completeArray[2] = new Array('10459620', 'http://domain.com', 'video', '0', '');
completeArray[3] = new Array('10459542', '/sports/m-footbl/recaps/092312aah.html', 'video', '0', '');
completeArray[4] = new Array('http://domain.com', '/sports/', 'photo', '0', '');

$(function() {
 $.each(completeArray, function(index, value) {
    if (value[0].match(/\d/)) {
        length = value.length;
        array = value.slice(1, length);
        url = array.join('');
        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: function(data) {
                $(data).find('item').each(function() {});
            }
        });
    }
 });
});​ 
```

# c# - 制作清单 对象相等？

> ID：12631114
> 
> 赞同：0
> 
> 时间：2012-09-27T22:42:40.697
> 
> 标签：c#, list, equality

我正在制作一些测试用例，并注意到我需要检查 MyObject 是否等于另一个 MyObject。

我创建了我的 Equals 方法，如下所示：

```
public override bool Equals(object obj)
{
    if (ReferenceEquals(null, obj)) return false;
    if (ReferenceEquals(this, obj)) return true;
    return obj.GetType() == typeof(MyObject) && Equals((MyObject) obj);
}

public bool Equals(MyObject other)
{
    if (ReferenceEquals(null, other)) return false;
    if (ReferenceEquals(this, other)) return true;
    return Equals(other.listItems, listItems);
}

public override int GetHashCode()
{
    return (TimeBlocks != null ? TimeBlocks.GetHashCode() : 0);
} 
```

有一个名为 listItems 的列表未评估为真。listItem 是另一种对象类型，它确实覆盖了 Equals 方法。

List 如何决定一个列表是否等于另一个？

我应该检查每个项目而不是另一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:46:17.960

你试过这个[`Enumerable.SequenceEqual()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sequenceequal.aspx)方法吗？

这将遍历`List`'s 中的每个项目并检查每个元素是否相等。它将使用您的对象的覆盖`Equals()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T22:44:59.643

这是你要找的东西：[Enumerable.SequenceEqual](http://msdn.microsoft.com/en-us/library/bb348567.aspx)

返回 other.listItems.SequenceEqual(listItems);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:02:44.773

好吧，首先，接受 MyObject 的 Equals 的重载被`listItems`视为静态的。如果是这样的话，那就这样吧，但我的猜测是这是一个错字，`MyObject.listItems`应该是这样`other.listItems`。

反正。如果 listItems 是 a `List<OtherObject>`，则 List 类本身不会覆盖 Equals，因此它只使用比较哈希码的 Object 重载，而对于 Object，这些哈希码基于对象引用。因此，两个 List 变量只有在引用同一个 List 时才会相等。

要使其按您想要的方式工作，您需要遍历列表并比较项目。具体如何操作取决于顺序是否重要：

```
//order-specific equality; true only if equal items are in the same order
public bool Equals(MyObject other)
{
    if (ReferenceEquals(null, other)) return false;
    if (ReferenceEquals(this, other)) return true;
    return other.listItems.Count == listItems.Count 
       && listItems.Select((l,i)=>other.listItems[i] == l).All(b=>b);
}

//order-independent equality; true if all items in one are in the other in any order
public bool Equals(MyObject other)
{
    if (ReferenceEquals(null, other)) return false;
    if (ReferenceEquals(this, other)) return true;
    return other.listItems.Count == listItems.Count 
       && listItems.Select((l,i)=>other.listItems.Contains(l)).All(b=>b);
} 
```

第一种方法，给定两个相等的列表，将是线性的；第二个将是 N^2 复杂性，虽然您可能会改进它，但它会很复杂。

# c# - Visual Studio 2010 Ultamate 在 100% 编译时挂起超过 3 分钟

> ID：12631116
> 
> 赞同：1
> 
> 时间：2012-09-27T22:42:55.470
> 
> 标签：c#, visual-studio-2010

当我尝试在 Visual Studio 中调试 (F5) 时，编译会达到 100% 并坐在那里，并且需要永远启动我想要调试的程序。此外，当程序启动时，程序关闭和 Visual Studio 开始响应所需的时间也一样长。有谁知道为什么会这样？

*   项目是 C# wpf，我曾经有一个做同样事情的 silverlight 项目。我将所有代码移到了一个新项目中，现在我的 silverlight 项目工作得更好了。
*   没有特殊的调试选项，与新项目相同的选项。
*   该项目位于连接到 TFS 2010 的本地 C 驱动器上。
*   我所知道的没有静态分析或 ReSharper。
*   我的解决方案中有 14 个项目。1 wpf，其余的是 dll 和工具 exe。
*   没有反恶意软件，我禁用了防病毒软件只是为了确保它没有吃我的午餐。
*   我拔掉了我的网线，这对任何网络超时都没有帮助。
*   禁用任何符号服务器 没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:44:07.763

我发现如果您删除 .SUO 文件，事情会变得很快，它已被删除。它位于您的 .sln 文件旁边。我的 .suo 文件是 4.5 mb。

*   从谷歌我只能找到 .suo 文件是某种用户设置文件，但删除时似乎没有任何伤害，它只是被重新创建。

*   发现在对设置进行导入时，您可以使 .suo 文件变大... .suo 文件的大小可能不是问题，但可能是损坏的文件。我导入了设置并使我的 .suo 文件增加到 5.7mb 并且我的编译工作正常，但我再次删除了它，因为我不希望它被损坏。

# javascript - 使用四舍五入的数字会降低 Javascript 中的 CPU 使用率吗？

> ID：12631117
> 
> 赞同：1
> 
> 时间：2012-09-27T22:42:56.297
> 
> 标签：javascript

我在 javascript 中执行大量计算。我想知道使用四舍五入的数字是否会降低 CPU 使用率？当我使用 console.log 查看代码的内部工作时，这些数字有 15 位以上的小数位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:49:52.143

有时，高度优化的引擎可以区分整数和双精度数。例如 1+1 可能使用整数数学，而 1.0+1 可能不使用。这种“整数”很可能会很快丢失，诸如 Math.pow、Math.sqrt 等函数可能会丢失该属性。但是我不会依赖这种行为，甚至四舍五入的数字也可能没有这种效果（即四舍五入后它们可能仍然是浮点数）。

此外，顺便说一句，JS 引擎中的开销可能很大，以至于使用浮点数和整数之间的差异不会那么大（考虑到差异可能是处理器本身的 2-3 倍以及开销可能至少是 10 倍）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:47:31.130

不，JavaScript 不区分整数和实数。它只有双精度浮点数。

这意味着整数或二进制小数（在大约 15 个有效数字的范围内）的精度最好，但实际性能不会有太大变化，如果有的话。

# c++ - 数组访问中的二进制搜索是否比使用哈希表更快？

> ID：12631126
> 
> 赞同：2
> 
> 时间：2012-09-27T22:43:58.167
> 
> 标签：c++, optimization

在[这个网站上](http://en.wikibooks.org/wiki/Optimizing_C++/General_optimization_techniques/Other_techniques)，第 4.4 节，建议对数组进行二进制搜索，而不是使用哈希表。那个怎么样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T22:57:28.410

有太多因素无法一概而论。

*   容器中的元素数量。
*   哈希函数的速度。
*   比较函数的速度。
*   哈希冲突的次数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T22:48:03.763

哈希表（具有良好的哈希函数）具有 O(1) 复杂度（比 O(log n) ;）更好，因为它们直接“将您链接到”结果。

但是为少量数据/数组使用哈希表可能不值得为表分配所需内存的开销。

# claims-based-identity - SimpleMembership 和 FederatedAuthetication 使用 ClaimsPrincipal

> ID：12631132
> 
> 赞同：1
> 
> 时间：2012-09-27T22:44:22.920
> 
> 标签：claims-based-identity, simplemembership

一个使用 SimpleMembership 的应用程序（作为 VS 2012 的 MVC 模板互联网应用程序）和另一个使用 ClaimsPrincipal 和 FederatedAuthetication 的应用程序。

有些人在使用 SimpleMembership 和使用 FederatedAuthetication 的身份验证和授权过程方面有经验，因为步骤：

a) 登录时使用 websecuroty.Login（来自 SimpleMembership）

或者

b) 使用 FederatedAuthentication.SessionAuthenticationModule.WriteSessionTokenToCookie

在哪里加入这两个 SimpleMembership 与 System.Security.Claims

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:53:25.537

您可以使用这种方法来连接两个世界

[http://brockallen.com/2012/09/05/integrating-claims-and-oauthwebsecurity/](http://brockallen.com/2012/09/05/integrating-claims-and-oauthwebsecurity/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T00:56:18.367

此外，FWIW，我整理了一个使用 OAuth2 的独立示例，然后收集返回的配置文件信息并将其用于索赔。它与@woloski 链接的先前示例不同，但两者都试图做同样的事情：

[http://brockallen.com/2012/10/26/integrating-claims-and-oauth2/](http://brockallen.com/2012/10/26/integrating-claims-and-oauth2/)

# facebook - Facebook Javascript SDK - 成功的权限请求回调

> ID：12631137
> 
> 赞同：0
> 
> 时间：2012-09-27T22:44:58.233
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我刚刚熟悉 Facebook javascript SDK。

检查权限请求是否成功然后调用函数的正确方法是什么？在我的情况下，用户被请求额外的权限。他们已经授予了基本权限。

现在我有这个..但无论成功与否，它都会触发该功能

```
FB.login(function (publishAuth) {
                            if (publishAuth.authResponse) {

                                authSuccess();
                            } else { }
                        }, { scope: 'publish_stream' });
                    } 
```

谢谢您的帮助

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:26:49.753

您将始终拥有 authResponse，但这并不意味着您拥有所需的权限，因为您需要检查 authResponse 中的属性。

来自 Facebook 的开发者页面：

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:37:13.167

> 检查权限请求是否成功然后调用函数的正确方法是什么？

由于用户可以单独接受/拒绝每个（扩展）权限，因此对权限请求没有简单的真/假响应。

要检查用户*实际*授予了哪些权限，哪些没有，您必须调用`/me/permissions`- 请参阅[Graph API Explorer 示例](https://developers.facebook.com/tools/explorer?method=GET&path=me/permissions)。

（通过字段扩展，您也可以在一个呼叫中完成它，同时请求有关用户的其他信息 - fe [`/me?fields=id,name,permissions`](https://developers.facebook.com/tools/explorer?method=GET&path=me%3Ffields%3Did%2Cname%2Cpermissions)）

# java - Java - 更新管理表时出错

> ID：12631140
> 
> 赞同：0
> 
> 时间：2012-09-27T22:45:28.653
> 
> 标签：java, sql-server-2008, websphere-7

我有一个用 java 编写的方法来执行 INSERT、UPDATE 和 DELETE 模式的 SQL 语句。这在 WebSphere 6.1 上工作，升级到 WebSphere 7.0 后它停止工作。

下面是我的代码：

```
public void executeSQL() throws SQLException, ParseException, NamingException
{
    // Get a Connection from the Connection Pool if the connection is closed
    Connection dbCon = DriverUtilities.getConnectionFromContext(DriverUtilities.DIRECTPAY_DB);

    // create a Statment object whose ResultSet is  scroll sensitive and with Concurrent Updatable.
    Statement stmt = dbCon.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
    dbCon.setAutoCommit(true);

    String strColumn = null;
    String colName = null;
    String colVal = null;
    String colType = null;

    String sql = null;

    try {
    if (isUpdate | isDelete) {
        //ResultSet rs = stmt.executeQuery("select * from " + getTableName());

        ResultSet rs = stmt.executeQuery("select * from " + getSqlFrom());

        //Move the ResultSet to the Row Index       
        rs.absolute(iRowIndex + 1);

        Enumeration enum1 = ColNames.elements();

        int i = 1;

        // Update Block
        if (isUpdate) {
            while (enum1.hasMoreElements()) {
                //column name for update
                strColumn = (String) enum1.nextElement();

                // value from the screen
                colVal = (String) requestParams.get("post" + strColumn);

                //get column type
                colType = colTypeHash.get(strColumn).toString();

                //if colvalue from screen not null then test for the Column type
                if ((colVal == null) || (colVal.equalsIgnoreCase("null"))){
                    rs.updateNull(i);                               
                } else {
                    if ((colType.equalsIgnoreCase("INT")) || (colType.equalsIgnoreCase("SMALLINT"))) {
                        if (colVal.trim().length() > 0)
                            rs.updateInt(i, Integer.parseInt(colVal));
                    } else if ((colType.equalsIgnoreCase("DATETIME"))) {
                        if (colVal.trim().length() > 0)
                            rs.updateTimestamp(i, toTimestamp(colVal));
                    } else if ((colType.equalsIgnoreCase("CHAR"))) {
                        //if (colVal.trim().length() > 0)
                            rs.updateString(i, colVal);
                    } else if ((colType.equalsIgnoreCase("NVARCHAR"))) {
                        //if (colVal.trim().length() > 0)
                            rs.updateString(i, colVal);
                    } else if ((colType.equalsIgnoreCase("VARCHAR"))) {
                        //if (colVal.trim().length() > 0)
                            rs.updateString(i, colVal);
                    } else if ((colType.equalsIgnoreCase("DECIMAL"))) {
                        if (colVal.trim().length() > 0)
                            rs.updateString(i, colVal);
                    } else if ((colType.equalsIgnoreCase("FLOAT"))) {
                        if (colVal.trim().length() > 0)
                            rs.updateDouble(i, Double.parseDouble(colVal));
                    } else if ((colType.equalsIgnoreCase("BIT"))) {
                        if (colVal.trim().length() > 0)
                            rs.updateByte(i, Byte.parseByte(colVal));
                        //rs.updateDouble(i, Double.parseDouble(colVal));
                    } else if ((colType.equalsIgnoreCase("int identity"))) {
                        // ignore it
                    } else {
                        System.out.println("WARNING DATATYPE UNSUPPORTED in ADMIN: " + colType);
                    }
                }

                i++;
            }
            //Setting Identity Insert ON.
            stmt.executeUpdate("SET IDENTITY_INSERT "+getTableName()+" ON");
            rs.updateRow();
        }

        //delete block
        if (isDelete) {
            rs.deleteRow();
        }

        rs.close();
    }

    //Insert Block
    if (isInsert) {
        //Setting Identity Insert ON.
        stmt.executeUpdate("SET IDENTITY_INSERT "+getTableName()+" ON");
        // get the SQL statement for Insert         
        sql = getSQL();

        int resultFlag = stmt.executeUpdate(sql);
    }
    //Setting Identity Insert OFF.
    stmt.executeUpdate("SET IDENTITY_INSERT "+getTableName()+" OFF");
    stmt.close();
    dbCon.close();

    } catch (SQLException e) {
        System.out.println("executeSQL failed: " + sql + ", " + StackTraces.getStackTrace(e));
        try {
            stmt.close();
        } catch(Exception ee){
        }
        try {
            dbCon.close();
        } catch(Exception ee){
        }
        throw (e);

    } catch (java.lang.NumberFormatException e) {
        System.out.println("executeSQL failed: " + sql + ", " + StackTraces.getStackTrace(e));
        try {
            stmt.close();
        } catch(Exception ee){
        }
        try {
            dbCon.close();
        } catch(Exception ee){
        }
        throw (e);
    }
} 
```

下面是我的错误堆栈跟踪：

```
[9/27/12 16:28:06:497 GMT-06:00] 0000002a SystemOut     O ---------------- sql = SELECT  * FROM PRODUCT ------------------------
[9/27/12 16:28:06:664 GMT-06:00] 0000002a SystemOut     O ERROR: 
[9/27/12 16:28:06:685 GMT-06:00] 0000002a WSRdbManagedC W   DSRA1300E: Feature is not implemented: javax.sql.PooledConnection.addStatementEventListener
[9/27/12 16:28:37:378 GMT-06:00] 0000002e SystemOut     O executeSQL failed: null, com.microsoft.sqlserver.jdbc.SQLServerException: Cannot find the object "PRODUCT" because it does not exist or you do not have permissions.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:775)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:676)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeUpdate(SQLServerStatement.java:633)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.pmiExecuteUpdate(WSJdbcStatement.java:1693)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.executeUpdate(WSJdbcStatement.java:1041)
    at com.bcbskc.bbb.directpay.admin.AdminTableBean.executeSQL(AdminTableBean.java:313)
    at com.bcbskc.bbb.directpay.admin.AdminTableBean.manipulateTable(AdminTableBean.java:132)
    at com.bcbskc.bbb.directpay.actions.ManipulateAdminTableAction.manipulateTable(ManipulateAdminTableAction.java:104)
    at com.bcbskc.bbb.directpay.actions.ManipulateAdminTableAction.execute(ManipulateAdminTableAction.java:46)
    at com.bcbskc.bbb.common.uiframework.Controller.doPost(Controller.java:56)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at com.bcbskc.bbb.common.security.AuthbeanFilter.doFilter(AuthbeanFilter.java:88)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)

[9/27/12 16:28:37:379 GMT-06:00] 0000002e SystemOut     O ManipulateAdminTableAction failed: There was an error updating the admin table.  Please check the data for errors and format. com.microsoft.sqlserver.jdbc.SQLServerException: Cannot find the object "PRODUCT" because it does not exist or you do not have permissions.com.microsoft.sqlserver.jdbc.SQLServerException: Cannot find the object "PRODUCT" because it does not exist or you do not have permissions.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1493)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:775)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:676)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4575)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:179)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:154)
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeUpdate(SQLServerStatement.java:633)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.pmiExecuteUpdate(WSJdbcStatement.java:1693)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.executeUpdate(WSJdbcStatement.java:1041)
    at com.bcbskc.bbb.directpay.admin.AdminTableBean.executeSQL(AdminTableBean.java:313)
    at com.bcbskc.bbb.directpay.admin.AdminTableBean.manipulateTable(AdminTableBean.java:132)
    at com.bcbskc.bbb.directpay.actions.ManipulateAdminTableAction.manipulateTable(ManipulateAdminTableAction.java:104)
    at com.bcbskc.bbb.directpay.actions.ManipulateAdminTableAction.execute(ManipulateAdminTableAction.java:46)
    at com.bcbskc.bbb.common.uiframework.Controller.doPost(Controller.java:56)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at com.bcbskc.bbb.common.security.AuthbeanFilter.doFilter(AuthbeanFilter.java:88)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:42:03.747

在 Jon Skeet 对我的另一篇文章的回答的帮助下，这个问题得到了解决。按照这个[https://stackoverflow.com/a/12733027/1615051](https://stackoverflow.com/a/12733027/1615051)

# c++ - 是否有用于使用 Cygwin GCC 编译的 C++ 程序的免费内存调试器？

> ID：12631141
> 
> 赞同：0
> 
> 时间：2012-09-27T22:45:34.627
> 
> 标签：c++, windows, debugging, cygwin, segmentation-fault

我正在尝试调试一个 C++ 自定义类，该类涉及分配给我编写并在 Cygwin GCC/G++ 中编译的堆的内存。如果我运行我的测试程序，它不会明确地给我一个段错误，但在程序结束时，它会显示“Aborted (core dumped)”。我似乎也无法编写一个测试程序，它会给我一个我可以用 Cygwin GDB 找到的段错误。因此，我正在寻找一个内存调试器，希望它会有所帮助。

我运行 Windows，我没有 Visual Studio，并且我不想尝试找出如何在另一个命令提示符中为诸如 Dr. Memory 之类的调试器编译我的程序。

我可以使用哪个内存调试器？

如果我需要添加一些东西，我会编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:48:09.850

您还可以使用 memwatch（支持 C++ 的 C 内存调试器）。

[http://www.linkdata.se/sourcecode/memwatch/](http://www.linkdata.se/sourcecode/memwatch/)

编辑：要使用 memwatch，您只需：

1.  将这两个文件（memwatch.h 和 memwatch.c 或 memwatch.cpp）放在与要编译和测试的源代码相同的目录中。

2.  在源代码的每个 .c 或 .cpp 文件中，将以下三行放在顶部：

    ```
    #include "memwatch.h"
    #define MW_STDIO
    #define MEMWATCH 
    ```

3.  编译并运行你的程序，当你尝试跟随一个未初始化的指针时，它会导致你的程序失败（相当响亮），如果程序成功完成，它会写一个名为 memwatch.log 的文件，其中包含任何内存泄漏源代码 - 以及在代码中分配每个违规内存的行

注意：这就是你在 C 中的做法（我假设它与 C++ 相同）。

你知道你有一个未初始化的指针，当你打印出指针时，它等于某个值，比如 0xFEFEFEFEFEFEFEFE（一开始我花了几个小时才弄清楚）

# java - 将 META-INF\services\javax.xml.parsers.SAXParserFactory 添加到 jar

> ID：12631147
> 
> 赞同：2
> 
> 时间：2012-09-27T22:46:15.047
> 
> 标签：java, jar

我有一个包含几个类文件的文件夹，我用来创建 jar 的命令是

```
jar cfm0 my.jar MANIFEST *.class 
```

现在我还想在 jar META-INF\services\javax.xml.parsers.SAXParserFactory 中添加以下内容。请建议将创建一个带有类和 META-INF\services\javax.xml.parsers.SAXParserFactory 的 jar 的命令。

我想过篡改 jar 即添加 META-INF\services\javax.xml.parsers.SAXParserFactory 使用 7z 但不相信。

使用此命令返回以下错误

```
jar cfm0 CAM_AAA_JDBCPowerReports.jar META-INF/services/javax.xml.parsers.SAXParserFactory *.class

java.io.IOException: invalid header field
        at java.util.jar.Attributes.read(Attributes.java:389)
        at java.util.jar.Manifest.read(Manifest.java:180)
        at java.util.jar.Manifest.<init>(Manifest.java:50)
        at sun.tools.jar.Main.run(Main.java:149)
        at sun.tools.jar.Main.main(Main.java:1147) 
```

请注意，我不使用任何 IDE。我只使用 Editplus 和命令提示符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:01:04.200

正确的做法是

```
jar cfm0 my.jar MANIFEST META-INF/services/javax.xml.parsers.SAXParserFactory *.class 
```

# c# - XNA 2D 矩形 Sprite 绑定盒

> ID：12631150
> 
> 赞同：1
> 
> 时间：2012-09-27T22:46:28.760
> 
> 标签：c#, xna, collision-detection, bounding-box

所以我试图找出 XNA 中的边界框，但我遇到了一些麻烦。下面是我的代码。该程序仅由一个可以以 UDLR 方式移动的矩形对象（我只是使用了超级马里奥游戏中的 Thwomp 精灵）和一个随机生成的在屏幕上弹跳的框列表（我使用了问号框精灵，也来自马里奥）。我已经得到了盒子从 Thwomp 侧面反弹的代码，但不是顶部和底部（它只是穿过精灵）。所以边界框现在不再是一个盒子，而更像是一个左右墙。我可以对我的代码做些什么来使盒子也从 Thwomp 的顶部和底部反弹？

谢谢

**游戏类：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace BoundingBoxCollision
{
/// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game
{

    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;

    Sprite playerOne;

    static public int height;
    static public int width;

    static Random rand = new Random();

    KeyboardState keyboardState;

    List<Sprite> ballList = new List<Sprite>();
    int ballCount = 10;

    private void CheckPaddleWallCollision()
    {

    }

    private void CheckBallCollision(Sprite ball)
    {

        int MaxX =
            graphics.GraphicsDevice.Viewport.Width - ball.BoundingBox.Width;
        int MinX = 0;
        int MaxY =
            graphics.GraphicsDevice.Viewport.Height - ball.BoundingBox.Height;
        int MinY = 0;

        if (ball.BoundingBox.Intersects(playerOne.BoundingBox))
        {
            ball.Velocity.X *= -1;
            ball.Position += ball.Velocity;
        }

        if (ball.BoundingBox.Y > MaxY)
        {
            ball.Velocity.Y *= -1;
            ball.Position += ball.Velocity;
        }

        if (ball.BoundingBox.Y < MinY)
        {
            ball.Velocity.Y *= -1;
            ball.Position += ball.Velocity;
        }

        if (ball.BoundingBox.X < MinX)
        {
            ball.Velocity.X *= -1;
            ball.Position += ball.Velocity;
        }

        if (ball.BoundingBox.X > MaxX)
        {
            ball.Velocity.X *= -1;
            ball.Position += ball.Velocity;
        }
        /*if ((ball.Position.X < -ball.BoundingBox.Width)
            || (ball.Position.X > Window.ClientBounds.Width))
            SetInStartPostion(); */
    }

    /*private void SetInStartPostion()
    {
        playerOne.Position.Y = (
            Window.ClientBounds.Height -
            playerOne.BoundingBox.Height) / 2;

        ball.Position.X = playerOne.BoundingBox.Right + 1;

        ball.Position.Y = (
            Window.ClientBounds.Height -
            ball.BoundingBox.Height) / 2;

        ball.Velocity = new Vector2(8f, -8f);
    } */

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize()
    {
        // TODO: Add your initialization logic here

        base.Initialize();
    }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        height = GraphicsDevice.Viewport.Height;
        width = GraphicsDevice.Viewport.Width;

        Texture2D paddleTexture = Content.Load<Texture2D>("Thwomp");
        Vector2 position;

        position = new Vector2(
            100,
            (Window.ClientBounds.Height - paddleTexture.Height) / 2);
        playerOne = new Sprite(paddleTexture, position);

        position = new Vector2(
            (Window.ClientBounds.Width - paddleTexture.Width),
            (Window.ClientBounds.Height - paddleTexture.Height) / 2);

        Texture2D ballTexture = Content.Load<Texture2D>("QuestionMarkBlock");

        position = new Vector2(
                 playerOne.BoundingBox.Right + 1,
                 (Window.ClientBounds.Height - ballTexture.Height) / 2);

        for (int i = 0; i < ballCount; i++)
        {
            position = new Vector2(rand.Next(Game1.width), rand.Next(Game1.height));
            Sprite ball = new Sprite(
                     ballTexture,
                    position,
                     new Vector2(4f, -4f));
            ballList.Add(ball);
        }
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        keyboardState = Keyboard.GetState();

        if (keyboardState.IsKeyDown(Keys.Up))
            playerOne.Position.Y -= 4f;

        if (keyboardState.IsKeyDown(Keys.Down))
            playerOne.Position.Y += 4f;

        if (keyboardState.IsKeyDown(Keys.Left))
            playerOne.Position.X -= 4f;

        if (keyboardState.IsKeyDown(Keys.Right))
            playerOne.Position.X += 4f;

        foreach (Sprite block in ballList)
        {
            block.Position += block.Velocity;
            CheckBallCollision(block);

        }

        CheckPaddleWallCollision();

        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();

        playerOne.Draw(spriteBatch);

        foreach (Sprite block in ballList)
        {
            block.Draw(spriteBatch);
        }

        spriteBatch.End();

        base.Draw(gameTime);
    }

    public static int vGameWidth { get; set; }
}
} 
```

**精灵类：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace BoundingBoxCollision
{
public class Sprite
{

    Texture2D texture;
    public Vector2 Position;
    public Vector2 Velocity;

    public Rectangle BoundingBox
    {
        get
        {
            return new Rectangle(
                (int)Position.X,
                (int)Position.Y,
                texture.Width,
                texture.Height);
        }
    }

    public Sprite(Texture2D texture, Vector2 position)
    {
        this.texture = texture;
        this.Position = position;
    }

    public Sprite(Texture2D texture, Vector2 position, Vector2 velocity)
    {
        this.texture = texture;
        this.Position = position;
        this.Velocity = velocity;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, Position, Color.White);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:36:25.000

最简单的方法是：

```
if (ball.BoundingBox.Intersects(playerOne.BoundingBox))
        {
            ball.Velocity.X *= -1;
            ball.Velocity.Y *= -1;
            ball.Position += ball.Velocity;
        } 
```

这将是一个完整的反映。如果你想要一种更现实的方式，你想做这样的事情（伪代码）：

1.  检查球和球员是否碰撞
2.  确定它是否在顶部/底部、左侧/右侧或精确角落发生碰撞
    1.  左右 ：`ball.Velocity.X*= -1;`
    2.  顶部/底部：`ball.Velocity.Y *= -1;`
    3.  角落：`ball.Velocity.X *= -1;`&&`ball.Velocity.Y *= -1;`

我希望这能有所帮助！

问候

浮动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:48:19.450

对于 2 号（顶部/底部），您可以使用

`playerOne.BoundingBox.Top`

和

`playerOne.BoundingBox.Bottom`?

.Top 和 .Bottom 应该返回矩形顶部或矩形底部的 Y 坐标。

# php - 在 Yii 的 PHP heredoc 中使用函数调用的返回值？

> ID：12631161
> 
> 赞同：0
> 
> 时间：2012-09-27T22:47:50.267
> 
> 标签：php, google-maps, yii, heredoc, variable-substitution

我正在尝试对一个字符串进行 html 编码，该字符串将用作谷歌地图中的工具提示。

```
$cs = Yii::app()->getClientScript();
$cs->registerScript('someID', <<<EOD
    function mapsetup() {
        //...        
        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            // works:
            title: '$model->name'
            // doesn't work:
            title: '{${CHtml::encode($model->name)}}'
            });
       // ...
    }
    mapsetup();
EOD
, CClientScript::POS_LOAD
); 
```

如果我使用 line `title: '$model->name'`，它会导致以下扩展：

```
title: 'Some Name' 
```

如果我改为使用 line `title: '{${CHtml::encode($model->name)}}'`，则会导致以下扩展：

```
title: '' 
```

`CHtml::encode`在同一页面上的其他地方工作正常，但它似乎在 php heredoc 中不起作用。

1.  我什至需要对将呈现给浏览器的 javascript 字符串数据进行 html 编码吗？
2.  如何让 CHtml::encode 在 heredoc 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:34:46.563

1.  您确实需要对数据进行编码，但不需要使用`CHtml::encode`. 您必须使用[`CJSON::encode`](http://www.yiiframework.com/doc/api/1.1/CJSON#encode-detail)or[`CJavaScript::encode`](http://www.yiiframework.com/doc/api/1.1/CJavaScript#encode-detail)代替（任何人都会这样做），因为您将值注入 JavaScript，而不是 HTML。
2.  你不能让它工作。只需预先计算您需要的值，将其存储在变量中并注入变量的内容。

例如：

```
$title = CJSON::encode($model->name);
$cs = Yii::app()->getClientScript();
$cs->registerScript('someID', <<<EOD
    function mapsetup() {
        //...        
        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: $title // no quotes! CJSON::encode added them already
            });
       // ...
    }
    mapsetup();
EOD
, CClientScript::POS_LOAD
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:01:55.303

这不是插值的正确用例，请参阅此[http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)。只需在之前对模型名称进行编码然后插入`title:"$encodedName"`，1 行并不是很大的内存使用:)

# mysql - Mysql 5.1 - 添加外键约束时出错

> ID：12631169
> 
> 赞同：2
> 
> 时间：2012-09-27T22:48:21.487
> 
> 标签：mysql, foreign-keys

我正在运行 MySQL 5.1.54-lubuntu4

我有一张桌子

```
CREATE TABLE `mcli` (
  `id` bigint(20) NOT NULL,
  `pr_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK7617032AB07F537D` (`id`),
  KEY `FK7617032A4007E4D7` (`pr_id`),
  CONSTRAINT `FK7617032AB07F537D` FOREIGN KEY (`id`) REFERENCES `acli` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

这个表里面有数据。

我还有一张桌子

```
CREATE TABLE `PR` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `frequency` varchar(255) DEFAULT NULL,
  `notes` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FKPRtoAR` (`id`),
  CONSTRAINT `FKPRtoAR` FOREIGN KEY (`id`) REFERENCES `AR` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8 
```

该表中也有数据。

mcli.pr_id (table mcli, field id) 的所有行中的数据都是 pr.id 中的有效条目（因为在我将 OLDPR 表迁移到 PR 之前，它们曾经在另一个表 OLDPPR 中。实际上是 mcli.pr_id曾经有一个指向 OLDPR.id（旧表的 id 字段）的外键。

我想添加一个将 mcli.pr_id 与 PR.id 联系起来的外键约束。从架构中可以看出，我已经在 mcli.pr_id 上创建了一个名为 FK7617032A4007E4D7 的索引。所以我尝试运行命令来生成外键约束。

```
mysql> ALTER TABLE `mcli` ADD CONSTRAINT `FK7617032A4007E4D7` FOREIGN KEY (`pr_id`) REFERENCES `PR` (`id`);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'ADD CONSTRAINT `FK7617032A4007E4D7` FOREIGN KEY (`pr_id`) REFERENCES ' at line 1
mysql> 
```

我还尝试从 mcli 刷新所有数据并重新运行命令以添加外键约束，但它仍然给出了相同的错误。我试过单引号，没有引号。网络上的一切都表明我有正确的语法。我究竟做错了什么？

我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:47:04.967

这只是一个有根据的猜测，我没有测试它的环境。

解析器可能会因为已经有一个同名的键而感到困惑，这也会导致语法错误，即使严格来说，*语法*是好的。

尝试使用另一个约束名称，只是为了验证行为。

然后，尝试删除此密钥：

```
KEY `FK7617032A4007E4D7` (`pr_id`), 
```

在添加约束之前：

```
ALTER TABLE `mcli` ADD CONSTRAINT `FK7617032A4007E4D7` FOREIGN KEY (`pr_id`) REFERENCES `PR` (`id`); 
```

我无法在更新的 5.1 版本上重现这一点。

# javascript - 对 > 32 位整数使用位运算符

> ID：12631171
> 
> 赞同：4
> 
> 时间：2012-09-27T22:48:36.013
> 
> 标签：javascript, math, bitwise-operators

我正在使用按位运算来表示一个整数内的许多访问控制标志。

```
ADMIN_ACCESS = 1;
EDIT_ACCOUNT_ACCESS = 2;
EDIT_ORDER_ACCESS = 4;

var myAccess = 3; // ie: ( ADMIN_ACCESS | EDIT_ACCOUNT_ACCESS )

if ( myAccess & EDIT_ACCOUNT_ACCESS ) { // check for correct access
   // allow for editing of account

} 
```

其中大部分发生在我项目的 PHP 端。`|`然而，在保存某人的访问级别时，有一个 Javascript 用于加入多个访问标志。这在一定程度上可以正常工作。我发现一旦整数（标志）变得太大（> 32 位），它就不再适用于 Javascript 中的按位运算符。例如：

```
alert( 4294967296 | 1 ); // equals 1, but should equal 4294967297 
```

我正在尝试为此找到一种解决方法，这样我就不必将访问控制标志的数量限制为 32 个。每个访问控制标志是前一个控制标志的两倍，这样每个控制标志就不会干扰其他控制标志。

```
dec(4) = bin(100)
dec(8) = bin(1000)
dec(16) = bin(10000) 
```

我注意到，当将这些标志中的两个与简单的 一起添加时`+`，它似乎得出与按位`or`运算相同的答案，但是我无法弄清楚这是否是一个简单的替换，或者是否存在问题这样做。任何人都可以评论此解决方法的有效性吗？例子：

```
(4294967296 | 262144 | 524288) == (4294967296 + 262144 + 524288) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:55:35.433

只要您确定每个标志都是 2 的幂，并且您**不超过 52 位长**（由于[双精度浮点数](http://en.wikipedia.org/wiki/Double_precision)可以容纳的数量，因为这就是 JS 用于数）。

如果出于某种原因，您需要超过 52 个标志，我建议将标志分组到类别中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T15:36:12.960

如果要进行按位运算，则不能超过 32。为了执行按位运算，javascript 将数值（保存为 8 字节浮点数）转换为 32 位整数，然后对该值执行按位/位移位运算。它将结果整数转换回浮点数，然后再存储到变量中。有关详细信息，请参阅此[Moz Dev Net 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)。

您仍然可以对浮点数执行整数运算，最大为 9007199254740992，即 2^53。但是由于上述原因，您不能使用超过 32 位的位运算符。

由于 PHP 使用平台相关的整数，因此您也不能保证 PHP 可以处理超过 32 位的整数。因此，在双方，我都建议将您的标志分成几组并分别维护它们。您可以使用访问器将它们包装在对象中，以确保它们的行为类似于一组标志而不是多个标志。

# javascript - 如何在 webkit 中使用 SVG* 对象？

> ID：12631172
> 
> 赞同：1
> 
> 时间：2012-09-27T22:48:36.633
> 
> 标签：javascript, google-chrome, svg, webkit

我正在尝试使用 JavaScript（Google Chrome v21.0）中的 SVG。我了解如何使用基于 XML 命名空间的函数创建元素等。但是...我注意到有一大堆对象 SVG*，例如 SVGDocument。但我找不到任何关于如何使用它们的参考。例如：

```
doc1 = new SVGDocument() 
```

返回：

```
TypeError: Illegal constructor 
```

而任何其他参数不足的构造函数返回：

```
TypeError: Not enough arguments 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T07:01:13.750

You would create an SVG document with [document.implementation.createDocument](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Level-2-Core-DOM-createDocument)

So for SVG it would be

```
var dom = document.implementation.createDocument('http://www.w3.org/2000/svg', 'svg:svg', null); 
```

or alternatively

```
var dt = document.implementation.createDocumentType('svg:svg', '-//W3C//DTD SVG 1.1//EN', 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd');
var dom = document.implementation.createDocument('http://www.w3.org/2000/svg', 'svg:svg', dt); 
```

If you wanted/needed to set the document type too.

# windows - xcopy 和 xcacls 脚本

> ID：12631176
> 
> 赞同：2
> 
> 时间：2012-09-27T22:49:03.610
> 
> 标签：windows, scripting, batch-file, xcopy, robocopy

几年前，几个伟人帮助我创建和修改了以下脚本。我现在需要对这个脚本做一些修改，让它运行得更快，并消除它目前的 256 个字符的限制。

我认为更新它以同时使用 robocopy（带`mt`开关），然后可能`icacls`是最好的起点。

你能帮我创建一个我可以测试的工作模型吗？

```
@echo off
for /F "delims=*" %%F in ('xcopy /S /L \\file1\E$\Data1\*.jpg \ ^| findstr /v File^(s^)')    do (
    xcacls "%%F" /P "Authenticated Users:R" "domain\Administrator:F" "SYSTEM:F" "Photo    Admins:F" /Y
    attrib -a "%%F"
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:03:37.503

这可能仍然有效，您只需将其更改为使用 Icacls 和正确的触发器。

```
@echo off
for /F "delims=*" %%F in ('xcopy /S /L \\file1\E$\Data1\*.jpg \ ^| findstr /v File^(s^)')    do (
    Icacls "%%F" /grant "Authenticated Users:R" "domain\Administrator:F" "SYSTEM:F" "Photo    Admins:F"
    attrib -a "%%F"
) 
```

# java - 如何将变量从文本文件逐行分配到java文件中

> ID：12631178
> 
> 赞同：0
> 
> 时间：2012-09-27T22:49:22.280
> 
> 标签：java, file-io

我到目前为止的代码是：

```
public class Project4 {

    public static void main (String[] args) throws IOException {

        final double OUNCES_PER_POUND = 16.0;
        double pricePerPound; 
        double weightOunces; 
        double weightPounds; 
        double totalPrice; 
        String itemName; 

        Scanner fileScan = new Scanner(new File(args[0]));

        NumberFormat money = NumberFormat.getCurrencyInstance();
        DecimalFormat fmt = new DecimalFormat("0.00");

        // Missing code that reads variables from text file goes here

        weightPounds = weightOunces / OUNCES_PER_POUND;
        totalPrice = weightPounds * pricePerPound;

        System.out.println("Item: " + itemName);
        System.out.println("Unit Price: " + money.format(pricePerPound));
        System.out.println("Weight: " + fmt.format(weightPounds) + " pounds");
        System.out.println("TOTAL: " + money.format(totalPrice));
    }

} 
```

我想做的是弄清楚如何从文本文件中提取变量。该文件必须在命令行中声明为参数，这就是按原样设置标头的原因。文本文件基本上是我需要的三个变量，每个变量都在单独的行上。

我希望有人给我一个提示或指出我需要做什么来设置变量的一些信息，以便我可以将文本文件中的每一行声明为它自己的单独变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T22:59:35.423

如果变量以最简单的格式出现，例如：

```
3.5
5.2
My Item 
```

然后你可以读入值：

```
weightOunces = fileScan.nextDouble();
fileScan.nextLine();
weightPounds = fileScan.nextDouble();
fileScan.nextLine();
itemName = fileScan.nextLine(); 
```

`fileScan.nextLine()`在`nextDouble()`语句之后需要使用换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:55:07.790

您可以将 variables.txt 视为属性文件。它不需要命名为 .properties，您可以使用 .txt 就可以了。请参阅此链接以了解如何读取/写入属性文件 [读取和写入属性文件](http://www.exampledepot.com/egs/java.util/props.html)

# mysql - 使用 mysql concat 并使用 like 搜索该字段，这行得通吗？

> ID：12631180
> 
> 赞同：1
> 
> 时间：2012-09-27T22:49:36.203
> 
> 标签：mysql, concat, sql-like

我正在创建如下查询

```
SELECT CONCAT(u.firstName," ",u.lastName) as user 
```

然后稍后在我写的查询中：

```
WHERE user LIKE '%jay%' 
```

我没有得到任何结果。您不能以这种方式使用连接字段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:59:03.603

```
SELECT CONCAT(u.firstName," ",u.lastName) as user ... WHERE user LIKE '%jay%' 
```

不会工作，但是

```
SELECT CONCAT(u.firstName," ",u.lastName) as user ... HAVING user LIKE '%jay%' 
```

将起作用，就像`HAVING`对查询结果起作用一样，而`WHERE`不起作用。

# embedded-linux - 在嵌入式 Linux 设备上使用 GPIO 触发电平触发中断

> ID：12631181
> 
> 赞同：1
> 
> 时间：2012-09-27T22:49:45.820
> 
> 标签：embedded-linux, interrupt, gpio

我正在将使用电平触发中断的现有系统移植到嵌入式 Linux 设备。我遇到了一些麻烦，希望有人可以提供帮助。我的计划是使用 poll() 函数（在用户空间中，没有低级别驱动程序的计划）来检测 gpio 线何时为高电平。这是做某事的迹象。

不幸的是，我还没有弄清楚如何启用该条件。现在我正在做以下事情：

*   将 gpio 编号写入 /sys/class/gpio/export
*   将方向设置为“in”
*   将边缘设置为 ?

我可以设置 GPIO 以便当 gpio 线为高时 poll 将返回，即使 poll() 被多次调用而不清除条件，但如果线为低它会等待？我应该使用其他东西而不是尝试使用 poll() 吗？谢谢！

**更新**

我以为我有一个解决方案，但显然没有。我将 GPIO 线上的边缘设置为“上升”。在硬件方面，该线路与数据缓冲区的“FIFO used”计数相关联。如果 FIFO 中有数据，则该行为高电平。否则就低了。然后我设置了以下系统：

```
GetByte() {
    Is there data in the FIFO? {
        Read a byte.
        Return
    }
    Call poll() to wait for the data {
        Is there data in the FIFO? {
            Read a byte.
            Return
        }
    }
} 
```

第一个“If”语句在那里，因为我一次只读取一个字节，如果条件没有改变，poll() 在超时之前不会返回（如果有多个字节，它不会在我的系统中先进先出）。我现在看到的问题是 poll() 有时会返回，但 FIFO 中没有任何数据。实际上，poll() 返回 '1'，但 FIFO 报告它是空的。

我希望 poll() 只会在 gpioXX/value 文件由于 GPIO 线的“上升”边缘设置从 0 更改为 1 时检测到更改。那是对的吗？这是使用 poll() 的合理方式还是我应该考虑不同的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:34:07.503

我终于想出了答案。我需要在清空 FIFO 之前读取 GPIO 的值文件，以确保下次调用 poll() 时一切都处于良好状态。这是对伪代码的更改：

```
GetByte() {
    Is there data in the FIFO? {
        Read the GPIO value file
        Read a byte.
        Return
    }
    Call poll() to wait for the data {
        Is there data in the FIFO? {
            Read a byte.
            Return
        }
    }
} 
```

如果一个字节可用，我总是尝试读取一个字节。如果是 FIFO 中的最后一个字节，我先读取 GPIO 值文件。我知道当我这样做时电平触发的中断线很高，所以我可以安全地清除 poll() 可能看到的任何未决文件事件。现在我读了字节。

现在当我调用 poll() 时，我知道它不会返回，除非它看到来自中断的上升沿。简单的修复，但直到我阅读 kernel/fs/sysfs/file.c 中的评论，直到我完全理解我需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:54:51.897

我有这种感觉，如果不编写驱动程序，您将需要自己访问硬件寄存器。这涉及 1\. 了解硬件，因此您知道需要访问的寄存器的硬件地址，2\. 使用 open & mmap 获取指向寄存器的指针，3\. 取消引用指针。

这是我从我的一个项目中截取的一些代码：

```
fd = open("/dev/mem", O_RDWR|O_SYNC);
if (fd == -1)
{
perror("open /dev/mem");
exit(1);
}
unsigned char *start;
start = (unsigned char*)mmap(0, getpagesize(), PROT_READ|PROT_WRITE, MAP_SHARED,
fd, 0x80810000); 
```

# html - 将一个类添加到现有的类包

> ID：12631184
> 
> 赞同：0
> 
> 时间：2012-09-27T22:50:00.580
> 
> 标签：html, css, xhtml

我需要向当前属性添加一个新类。

目前我们有

```
.class1 .class2{
width:150px;
}
.class1 .class50{
more properties
}
.class1 .class10 .class8 .class5 .class50{
more properties
} 
```

所以上面可以说在所有页面上显示一个 div，但我想在 1 页上进行更改，使其宽度为 250px。我不知道如何适应这种情况，我试图将 .newclass 添加到类字符串中，所以无论类 1 显示我正在将 .newclass 添加到该行（没有工作）

我还尝试在之前或之后添加 ,.newclass 例如：

```
.class1 .class10 .class8 .class5 .class50, .newclass{
more properties
} (didnt work either) 
```

有什么建议么？

这是一个示例 HTML

```
<div id="class33" class="class34 class35" style="display:none;"> 
    <div class="class7"> 
        <ul class="class33 class1"> 
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:01:47.223

您是否还在每个 .class 之间使用了 , ？.class1、.class2、.class..

您还可以考虑创建一个新班级，或者是否可以使用更高级别的班级？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:04:25.523

我想你不知道那个 css 是什么意思。

```
.class1 .class10 .class8 .class5 .class50, .newclass{
  more properties
} 
```

这意味着这`more properties`适用于具有`.class50`that's inside的元素，该元素在inside`.class5`以及任何具有 class 的元素。如果您试图覆盖任何地方，您还需要复制下面的所有子级联。如下所示：`.class10``.class1``.newclass``.class1``.class1`

```
.class1 .class10 .class8 .class5 .class50,
.newclass .class10 .class8 .class5 .class50 {
  more properties
} 
```

最终，仅处理一页异常值将是一场噩梦。（更何况，如果发生在一页，它无疑会在以后发生）

如果元素在页面上只出现一次，您可以尝试为其添加一个 id，它具有更高的特异性排名（因此会覆盖类样式）。

**另一个想法：jQuery？** 如果您已经在该站点上使用 JS/jQuery，您可以在那里处理它。

```
$('.class1').each(function () {
  $(this).width(250);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:04:25.593

您应该只创建一个新课程并将其应用到该页面上。

```
.newclass
{
  width: 250px;
} 
```

在您的标记中，`newclass`将需要指定**第二个**，以便它将覆盖`class1`.

```
<div class="class1 newclass">
</div> 
```

`<style>`您还可以对类的标签使用每个特定的覆盖，`class1`而根本不必添加`newclass`。`newclass`但是有些人会说这违反了结构和样式的分离，所以可能只有在无法更改原始标记（添加类）时才使用它。

```
<head>
  <style type="text/css">
  .class1
  {
    width: 250px;
  }
  </style>
</head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T23:11:59.530

您需要单独的类**使用“，”：**

```
.class1, .class2{
width:150px;
}
.class1, .class50{
more properties
}
.class1, .class10, .class8, .class5, .class50{
more properties
} 
```

# c++ - 由于某种原因，一个 int 在我的 ram 上的重量超过 32 位

> ID：12631194
> 
> 赞同：2
> 
> 时间：2012-09-27T22:51:18.203
> 
> 标签：c++, windows, visual-studio-2010, visual-c++, memory

好的，所以我很想知道一个 int 是否真的在我的 ram 上重 4 个字节。
所以我用这段代码做了 1,000,000 个整数。

```
for(int i = 0;i < 1000000;++i)   
    int *as= new int; 
```

在我执行这行代码之前，我在前面放置了一个断点，以查看我开始使用的headover 量。
几乎没有前导，我的程序以 750 kb 开始。

但是在我完成循环后，如果一个 int 重 32 位，程序假定为 4,000 kb 时使用 32,000 kb。
另一件值得一提的是，我正在使用`ctrl`+`altk + delete`方法来检查我的程序从 ram 中占用了多少空间，并且我正在 Visual c++ 2010 express 上运行它。

我也很肯定我的电脑上的 int 是 32 位而不是 64 并不重要，因为即使它是 64 而不是 32，它也应该是 8,000 kb 而不是 32,000 kb。
所以也许您可以尝试在您的电脑上执行此操作并告诉我您是否有相同的结果。

如果你知道我哪里出错了，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T22:53:23.387

4 字节的内存块太小，不值得管理。提供共享缓存行的可能不相关的代码对象块也可能导致性能损失。

典型的内存管理器的最小块大小在 16 到 256 字节之间。此外，通常需要一些开销来跟踪已分配特定大小的块的事实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T22:53:34.527

内存管理器有一些开销来跟踪不同的块。他们还可以分配额外的位来帮助发现缓冲区溢出。有些具有他们将分配的最小大小的块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T22:56:34.490

有一些与堆分配相关的开销，因为堆管理器提供的每个内存块都有一些与之相关的额外信息（例如，它的大小）。

此外，通常堆管理器不提供这么小的块，因为几乎没有人要求`int`从堆中获取单个 s（除其他外，前面提到的额外簿记使如此小的分配成为一个坏主意）；因此，`int`您获得的每个可能都是堆管理的最小内存块，比`int`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T22:56:09.593

您在堆而不是堆栈上分配整数指针。

我看到每个分配的 int 有 4 个字节（32 位），但每个指针也有 8 个字节（64 位）和内存分配的分配开销。

# javascript - 如何在ui-selectable jquery中动态更改选项列表

> ID：12631195
> 
> 赞同：1
> 
> 时间：2012-09-27T22:51:19.230
> 
> 标签：javascript, jquery, dynamic, jquery-ui-selectable

我有一个用 javascript 和 jquery 编码的网站。我有一个使用[jQuery-ui`selectable`](http://jqueryui.com/demos/selectable/)创建的选项列表，当单击按钮时会更改（包含 javascript 代码的按钮）。下面是我的一些代码：

拳头，我的用户界面可选代码...

```
$(function() {
    $("#selectable").selectable({
        stop: function(){
            var result = $("#select-result").empty();
            $(".ui-selected", this).each(function(){
                var seq = $(this).text(); //data -> selected sequence
                showdata(seq); //TODO when sequence is selected
            });
        }
    }); 
```

在这里，我的代码构建了一组选项，当单击按钮时将调用这些选项......

```
function showS2P(){
    var s = '';
    s = s + "<div class=\"listS2P\" align=\"left\">";
    //document.write(arrS2P.length); //show number of patterns per selected zone
    if (arrS2P.length == 0) {
        s = s + "Any pattern found";
    } else {
        s = s + "<ul id=\"selectable\">";
        for (var i=0; i<arrS2P.length; i++){
            s = s + "<li class=\"ui-widget-conten\">"+arrS2P[i]+"</li>";
            //document.write("<h3> "+i+" -> "+arrS2P[i]+"</h3> <br/>");
        }
        s = s + "</ul>";
    }
    s = s + "</div>";
    document.getElementById('selectSeq').innerHTML = s; //selectSeq is a <div> which change when a button is clicked
    $(selectable).selectmenu("refresh");
} 
```

目前，当我单击按钮时，选项显示在 a 中`<div>`，但显示为纯文本（即，无法单击选项）。请问，有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:07:48.050

要添加对单击事件的操作，您需要编写以下内容：

```
$("#selectSeq option").live("click",function(){
   // Here do something
   var val = $(this).val(); // value of option;
   var text = $(this).html(): // text of option;
}); 
```

*// PS: '#selectSeq' 你可以使用 select 的另一个 id 或 list 的另一个选择器。*

# php - 对多维数组进行排序并保留其键

> ID：12631198
> 
> 赞同：0
> 
> 时间：2012-09-27T22:51:39.133
> 
> 标签：php

我目前使用带有自定义函数的 usort 对多维数组进行排序：

```
usort($arr, function($a, $b) {
    return $a['count'] - $b['count'];
}); 
```

这将对数组进行很好的排序，但会丢失关键信息。给定数组：

```
Array
(
    [3] => Array
        (
            [foo] => bar
            [count] => 11
        )

    [7] => Array
        (
            [foo] => baz
            [count] => 1
        )
) 
```

`usort`将产生：

```
Array
(
    [0] => Array
        (
            [foo] => baz
            [count] => 1
        )

    [1] => Array
        (
            [foo] => bar
            [count] => 11
        )
) 
```

我想按 排序`count`，但保留键`[3]`和`[7]`。不幸的是`usort`，将键设置为`[0]`和`[1]`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T22:53:41.093

改为使用[`uasort()`](http://php.net/manual/en/function.uasort.php)，它会保留原始密钥

# c# - 来自相关资源的 ImageSource

> ID：12631199
> 
> 赞同：9
> 
> 时间：2012-09-27T22:51:40.347
> 
> 标签：c#, wpf, xaml, visual-studio-2012, imagesource

我正在尝试使用本地资源将图标放在按钮内。（C# 视觉工作室 2012）

直接在我的项目中，我有一个名为“Resources”的文件夹，其中包含“Icons/MyIcon.png”

以下代码有效（但未使用相对路径）

```
<Button Width="20" Height="20">
  <Button.Background>
        <ImageBrush ImageSource="C:\Documents\MyProject\Resources\Icons\MyIcon.png">
          </ImageBrush>
      </Button.Background> 
```

但是，我希望它使用相对路径......所以我尝试了以下

```
 <ImageBrush ImageSource="..\MyProject\Resources\Icons\MyIcon.png"> 
```

它编译，但随后给了我错误：

```
{"Cannot locate resource 'myproject/resources/icons/myicon.png'."} 
```

然后我找到了一篇文章，谈到了引用该项目并说要做：

```
"/[ assembly name ];component[ path within the project ]" 
```

所以我尝试了：

```
<ImageBrush ImageSource="/MyProject;component\Resources\Icons\MyIcon.png"> 
```

但它不起作用。

它确实出现在 GUI-Builder 中......但是当我真正尝试“调试”代码时......它无法运行。

如果我通过添加“123”来更改路径，例如：

```
 <ImageBrush ImageSource="/MyProject;component\Resources\Icons\MyIcon123.png"> 
```

我收到预编译错误：“找不到指定的文件”。一旦我删除了“123”，错误就会消失。并且图标再次显示在表单中。但是当我跑步时......我仍然得到：

```
{"Cannot locate resource 'resources/icons/myicon.png'."} 
```

到底是怎么回事？为什么它只能在运行之前找到资源？而不是我真正开始的时候？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T23:06:04.087

是否需要将图片的BuildAction设置为Resource？它是内置在程序集中的吗？还是您将其视为内容？在这种情况下，您需要将 BuildAction 设置为 Content 并适当地设置 CopyToOutputDirectory。

[这是](http://msdn.microsoft.com/en-us/library/aa970494.aspx)处理资源、内容文件等的 MSDN 文章的链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-23T19:57:03.763

我知道这是一篇旧文章，但对于 VS2013，这些示例都没有为我工作，但所有这些示例的组合是我现在必须在 URI 中引用我的图像资源和源的方式。

```
"pack://application:,,,/!APP NAME!;component/Resources/Purple.bmp" 
```

当然可以代替`!APP NAME!`你的..`"pack://application:,,,/test1;component/Resources/Purple.bmp"`

也`Resources/Purple.bmp`用你的路径代替。

**重要：** `component/`是常量，不是路径的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:27:28.350

[我在这里](http://windows8applicationdevelopment.blogspot.com/2012/09/loading-resources.html)的一篇博文中对此进行了介绍。

对于名为“Images”的文件夹，它基本上看起来像这样。如果您的 .xaml 文件位于不同的文件夹中，那么您需要执行`../Images/favicon.ico`. 请注意，在这两种情况下，您都不需要将项目名称添加到路径的开头。如果您需要更多详细信息，请参阅文章末尾的示例项目。

```
<Image Margin="5" Source="/Images/favicon.ico" Height="100"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T05:50:10.393

这对我来说适用于资源文件夹在应用程序中的图像的相对路径。

```
 <Image Source="..\Images\down_arrow.gif" /> 
```

# javascript - 可以检测到对 optgroup 标签的操作吗？

> ID：12631202
> 
> 赞同：2
> 
> 时间：2012-09-27T22:52:10.360
> 
> 标签：javascript, jquery, html

我想检测我的用户何时单击 optgroup 标签，以便我可以添加和删除组中的选项。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:04:52.807

我刚刚在 optgroup 标签上测试了 onclick 事件，结果如下：

Firefox（最新）- WORKS
Opera（最新）- WORKS
IE 9 - WORKS
Chrome（最新）- 失败

这是演示：http:
[//jsfiddle.net/44at2/2/](http://jsfiddle.net/44at2/2/)

# jakarta-ee - Jetty 7 中的 WEB-INF/classes 与 WEB-INF/lib

> ID：12631203
> 
> 赞同：1
> 
> 时间：2012-09-27T22:52:12.390
> 
> 标签：jakarta-ee, jetty, spring-transactions

当我将我的类打包到 WEB-INF/classes 中时，我没有参与事务的 Spring @Transactional 方法（或任何与切入点定义匹配的方法）。我在日志中遇到了很多“未找到 Hibernate 会话，配置不允许...”异常。令人费解的是，在堆栈跟踪中，我可以看到 CGLIB 增强类，因此它似乎被代理了，但似乎没有创建新事务。

但是，如果我将***相同的类***打包到 jar 文件中并将 jar 放在 WEB-INF/lib 中，则应用程序可以正常工作！交易已创建等，这里发生了什么？为什么当类在 WEB-INF/classes 下时它不起作用？

Spring事务配置如下：

```
<aop:aspectj-autoproxy proxy-target-class="true" />
<context:component-scan base-package="com.example" />
<tx:annotation-driven transaction-manager="txManager"/>

<bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<tx:advice id="serviceAdvice" transaction-manager="txManager">      
    <tx:attributes>
        <tx:method name="save*"/>
        <tx:method name="update*"/>
        <tx:method name="delete*"/>   
        <tx:method name="*" read-only="true"/>
    </tx:attributes> 
</tx:advice>

<aop:config>        
    <aop:pointcut id="servicePointcut" expression="execution(* com.example.service.*.*Service*.*(..))"/>            
    <aop:advisor advice-ref="serviceAdvice" pointcut-ref="servicePointcut"/>
</aop:config> 
```

FWIW，我使用的是 Jetty 7.4 和 Spring 3.1.2。

关于我应该寻找什么的任何线索？

**更新：**

我启用了 Spring 事务日志记录，我可以看到：

```
28 Sep 2012 15:07:16,126 DEBUG NameMatchTransactionAttributeSource:94 - Adding transactional method [save*] with attribute [PROPAGATION_REQUIRED,ISOLATION_DEFAULT]
28 Sep 2012 15:07:16,133 DEBUG NameMatchTransactionAttributeSource:94 - Adding transactional method [update*] with attribute [PROPAGATION_REQUIRED,ISOLATION_DEFAULT]
28 Sep 2012 15:07:16,134 DEBUG NameMatchTransactionAttributeSource:94 - Adding transactional method [delete*] with attribute [PROPAGATION_REQUIRED,ISOLATION_DEFAULT]
28 Sep 2012 15:07:16,136 DEBUG NameMatchTransactionAttributeSource:94 - Adding transactional method [*] with attribute [PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly] 
```

但是到了实际在事务方法中工作的时候，它就出现了不允许创建事务的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:36:27.763

从它的外观来看，正在扫描该注释的任何内容都只是处理 jars 而不是 WEB-INF/classes 下的类

[编辑] 码头没有扫描这些注释

# google-chrome - 如何在 google chrome 扩展中加载外部 content_script？

> ID：12631205
> 
> 赞同：2
> 
> 时间：2012-09-27T22:52:14.293
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试从外部服务器加载 JS，以便可以更新和开发我的扩展，而无需更新 chrome 扩展。这是我目前的清单：

```
{
  "name": "Test",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Test extension",  
  "content_security_policy": "script-src 'self' https://test.dev77.net/; object-src 'self'",
  "content_scripts": [
    {
      "matches": ["http://google.com"],
      "js": ["https://test.dev77.net/test.js"]
    }
  ]
} 
```

尝试安装扩展时，我得到以下信息：

无法为内容脚本加载 javascript 'https://test.dev77.net/test.js'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:38:17.453

首先，我建议你不要这样做。最好每次都将您的扩展程序上传到 Chrome 网上应用店。您可以使您的扩展程序自动更新，因此用户将始终拥有最新版本。

话虽如此，你知道扩展不支持外部 js。有一个安全原因。例如，Chrome 网上应用店会扫描上传的扩展程序以搜索恶意软件。如果 js 发生变化，他们将无法做到这一点。

但是，有一个解决方法。您的扩展代码可以使用 Ajax 加载 js，然后“评估”它。

另一种方法是在用户页面插入一个脚本标签，加载一个js文件。然后你执行它（这很棘手，因为与世隔绝的事情，但谷歌在其 Chrome 扩展页面中解释了如何做到这一点）。

# git - 如何正确更新 git 子模块？

> ID：12631212
> 
> 赞同：1
> 
> 时间：2012-09-27T22:52:55.790
> 
> 标签：git, version-control, git-submodules, puppet

我知道这个问题已经被打死了。但是我仍然不清楚为什么我的子模块试图引用我的超级项目中的提交。我有一个项目，其中包含许多子模块，其中一些引用了我想要贡献的 github 存储库。更新模块后，我拉取模块的更改：

```
[ashinn@puppet1 puppet]$ cd 模块/神经节
[ashinn@puppet1 神经节]$ git 分支
*（无分支）
  掌握
[ashinn@puppet1 ganglia]$ git pull origin master
远程：计数对象：8，完成。
远程：压缩对象：100% (4/4)，完成。
远程：总共 6 个（增量 4），重复使用 4 个（增量 2）
拆包对象：100% (6/6)，完成。
来自 https://github.com/andyshinn/puppet-ganglia
 * 分支主 -> FETCH_HEAD
通过递归进行合并。
 自述文件 | 1+
 1 个文件已更改，1 个插入（+），0 个删除（-）

```

现在我想更新对超级项目中模块的引用：

```
[ashinn@puppet1 神经节]$ cd ../..
[ashinn@puppet1 puppet]$ git 添加模块/神经节
[ashinn@puppet1 puppet]$ git commit -m '更新的神经节模块'
[神经节 c172591] 更新神经节模块
 1 个文件更改，1 个插入（+），1 个删除（-）

```

我目前正在研究神经节分支，所以我将它推送到我的原点（这是 2 个不同的 URL）：

```
[ashinn@puppet1 puppet]$ git push origin 神经节
计数对象：8，完成。
Delta 压缩最多使用 2 个线程。
压缩对象：100% (6/6)，完成。
写入对象：100% (6/6)，616 字节，完成。
总计 6 个（增量 4），重复使用 0 个（增量 0）
到 git@github.com:andyshinn/puppet.git
   1876698..c172591 神经节 -> 神经节
计数对象：5，完成。
Delta 压缩最多使用 2 个线程。
压缩对象：100% (3/3)，完成。
写入对象：100% (3/3)，323 字节，完成。
总计 3（增量 2），重复使用 0（增量 0）
远程：来自 /var/lib/puppet/repo
远程：dcd1fcc..c172591 神经节 -> 起源/神经节
远程：来自 https://github.com/andyshinn/puppet-ganglia
远程：a0c4e21..975c92f master -> origin/master
远程：致命：参考不是树：c5defdeae006c7b87058cc5c79aef60087b63a6b
远程：无法在子模块路径“模块/神经节”中签出“c5defdeae006c7b87058cc5c79aef60087b63a6b”
远程：更新现有环境神经节
到 puppet@puppet.mydomain.com:repo
   dcd1fcc..c172591 神经节 -> 神经节

```

遥控器有一个接收后脚本，用于签出不同文件夹中的分支并`git submodule update --init`为每个分支运行。如果我手动连接到原始存储库，我可以验证问题：

```
-bash-4.1$ git 拉
已经是最新的了。
-bash-4.1$ git 子模块更新 --init
致命：参考不是一棵树：c5defdeae006c7b87058cc5c79aef60087b63a6b
无法在子模块路径“modules/ganglia”中签出“c5defdeae006c7b87058cc5c79aef60087b63a6b”

```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:28:33.637

拉动时您不在树枝上。HEAD 必须指向您想要的位置。更新子模块的正确方法是

```
git checkout master
git push origin master 
```

现在当前提交指向您想要的位置。完成此操作后，您可以在超级项目中添加子模块更改，添加、提交和推送。

另一种选择是在子模块中创建当前 HEAD 所在位置的分支或标记并将其向上推：

```
git tag interesting HEAD
git push origin interesting
cd ../..
git add submodule/path
git commit -m "updated my submodule"
git push 
```

# javascript - 为 Office 调试 JavaScript API

> ID：12631215
> 
> 赞同：5
> 
> 时间：2012-09-27T22:53:15.353
> 
> 标签：javascript, office-2013

显然，我已经被 Chrome 及其开发人员工具宠坏了，但在使用新的 JavaScript API for Office 开发 Office 2013 应用程序时，我正在努力制定一种轻松的调试策略。

Visual Studio 2012 通过提供脚本调试和即时窗口来提供帮助，但我发现以下内容是一个挑战，并希望得到指针/指导：

1.  重新加载 Office 应用程序（右键单击“重新加载”）会中断 Visual Studio 脚本调试，因此通常更容易结束调试并重新开始。为什么会断？我能阻止它破裂吗？

2.  有什么可以与 Chrome 的“检查元素”和所有相关的 DOM 探索功能相媲美的吗？我正在使用客户端模板（KnockoutJS）并且正在诉诸于使用即时窗口来尝试内省 DOM。

3.  我的代码进行 AJAX 调用，但缺少内联调试语句，我还没有找到像 Chrome 的“网络”选项卡那样跟踪调用的方法。

我学到/发现的可能对他人有益的三件事是：

1.  不要在调试器暂停（中断）时“停止调试”，因为这往往会挂起 Visual Studio，唯一的恢复方法是杀死它并重新启动，这很乏味。如果您继续执行代码直到它（希望）终止，那么您可以毫无问题地停止调试器。

2.  Microsoft 的示例代码将调试信息添加到应用程序 HTML 页面上的元素中。我发现这是次优的，只需在我的应用程序中创建一个“调试”表，每次我希望报告某些内容时都会添加一行。这具有跨调试会话持续存在的额外优势。我为[表包装器](https://gist.github.com/3764315)和扩展表包装器的[错误处理程序发布了要点。](https://gist.github.com/3764445)

3.  Visual Studio 2012 中的“快速观察”对于评估 jQuery 表达式和分析 JSON 结果非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T00:50:27.507

If at all possible and practical, try and mock the data, and develop inside a different environment. At the very least, it'll get you a lot further into the project so you can debug simple stuff easier and faster, before moving back to your traditional environment for other stuff.

# android - 如何检查页脚是否已添加到列表视图中？

> ID：12631230
> 
> 赞同：4
> 
> 时间：2012-09-27T22:54:31.330
> 
> 标签：android

我有一个添加页脚的 ListView。我可以在列表视图上进行什么调用以确定当前是否将给定的页脚添加到列表视图中？

```
 listView.findViewById(errorFooterid) ? 
```

好像没有方法

```
 view.containsView(viewReference) 
```

检查现有视图是否包含在另一个视图中似乎是一项基本操作，但我不知道是否有可靠的方法在 android.xml 中进行检查。

为什么 SDK 不支持一种清晰而简单的方法来检查这一点？即使是 findByView(R.id.viewId) 和 null 检查也不是很优雅的布尔检查方式。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T01:30:37.040

如果你只有一个页脚并且想知道它是否被添加，你会尝试使用

```
public int getFooterViewsCount ()
Since: API Level 1

Returns the number of footer views in the list. Footer views are special views at the bottom of the list that should not be recycled during a layout.
Returns

    The number of footer views, 0 in the default implementation. 
```

所以如果它返回 0，你`listview`就没有页脚

```
yourListView.getFooterViewsCount(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-15T08:26:17.900

您可以使用以下代码找出页脚视图的数量

```
listView.getFooterViewsCount(); 
```

如果它返回 0，则不存在页脚视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:10:28.803

如果这是在活动类中，则只需使用[findViewById(int id)](http://developer.android.com/reference/android/app/Activity.html#findViewById%28int%29)。如果该方法返回 null，那么您可以假设尚未添加页脚。

如果这是一个片段类，那么您可以将在 onCreateView() 方法中返回的视图存储为片段类的数据成员。然后它以相同的方式工作，除了您将在您保存的视图上调用 findViewById() 。

```
LinearLayout footer = (LinearLayout) findViewById(footerId);
if (footer == null)
{
    //add the footer
}
else
{
    //Update the footer
} 
```

# sql-server-2008 - 从 sql server 导入表时 sqoop 挂起

> ID：12631239
> 
> 赞同：2
> 
> 时间：2012-09-27T22:55:28.583
> 
> 标签：sql-server-2008, hadoop, hive, sqoop

我正在尝试将一个简单的表从 SQL Server 2008 R2 数据库导入配置单元。

```
Hadoop version - CDH3U3
Sqoop version - 1.3.0-cdh3u3
$SQOOP_HOME/lib - sqljdbc4.jar
$SQOOP_HOME/lib - sqoop-sqlserver-1.0.jar
$SQOOP_CONF_DIR/managers.d/mssqoop-sqlserver

Windows firewall - disabled
Linux IPTables - disabled 
```

我的导入命令是 -

```
sqoop import --connect 'jdbc:sqlserver://172.16.1.47;username=sa;password=asdf1234;database=test' --table bruce --hive-import --verbose 
```

我没有看到任何错误消息，但它只是永远挂起。如果我查看 SQL Server 活动监视器，我可以看到正在创建一个进程。

这是 sqoop 输出 -

```
[root@sc-qa-test-01 bruce]# ./sqoop_test_sqlserver.sh<br>
Warning: /usr/lib/hbase does not exist! HBase imports will fail.<br>
Please set $HBASE_HOME to the root of your HBase installation.<br>
12/09/27 15:37:58 DEBUG tool.BaseSqoopTool: Enabled debug logging.<br>
12/09/27 15:37:58 INFO tool.BaseSqoopTool: Using Hive-specific delimiters for output. You can override<br>
12/09/27 15:37:58 INFO tool.BaseSqoopTool: delimiters with --fields-terminated-by, etc.<br>
12/09/27 15:37:58 DEBUG sqoop.ConnFactory: Added factory com.microsoft.sqoop.SqlServer.MSSQLServerManagerFactory specified by /usr/lib/sqoop/conf/managers.d/mssqoop-sqlserver<br>
12/09/27 15:37:58 DEBUG sqoop.ConnFactory: Loaded manager factory: com.microsoft.sqoop.SqlServer.MSSQLServerManagerFactory<br>
12/09/27 15:37:58 DEBUG sqoop.ConnFactory: Loaded manager factory: com.cloudera.sqoop.manager.DefaultManagerFactory<br>
12/09/27 15:37:58 DEBUG sqoop.ConnFactory: Trying ManagerFactory: com.microsoft.sqoop.SqlServer.MSSQLServerManagerFactory<br>
12/09/27 15:37:58 INFO SqlServer.MSSQLServerManagerFactory: Using Microsoft's SQL Server - Hadoop Connector<br>
12/09/27 15:37:58 INFO manager.SqlManager: Using default fetchSize of 1000<br>
12/09/27 15:37:58 DEBUG sqoop.ConnFactory: Instantiated ConnManager com.microsoft.sqoop.SqlServer.MSSQLServerManager@15aaf0b3<br>
12/09/27 15:37:58 INFO tool.CodeGenTool: Beginning code generation<br>
12/09/27 15:37:58 DEBUG manager.SqlManager: No connection paramenters specified. Using regular API for making connection.<br><br> 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T22:43:56.410

您似乎正在使用 Microsoft SQL Connector for Sqoop。作为第一步，我建议将其关闭，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T13:14:22.260

使用以下命令

```
sqoop import --connect 'jdbc:sqlserver://172.16.1.47:<port_number>/test --table bruce --username sa --password asdf1234 --hive-import --hive-table <table_in_hive> --verbose 
```

其中 table_in_hive 是动态创建的

# c# - 如何从 jQuery 自动完成的 C# 控制器操作返回 Json 标签/值对

> ID：12631245
> 
> 赞同：7
> 
> 时间：2012-09-27T22:56:14.467
> 
> 标签：c#, asp.net, asp.net-mvc-3, jquery-ui, jquery-ui-autocomplete

我需要创建一个 jQuery Autocomplete 文本框，该文本框从数据库中获取名称列表，并在选择时将用户发送到相应的页面链接。

我正在尝试做类似这篇文章的事情：[从 jQuery 自动完成选择中触发控制器操作](https://stackoverflow.com/questions/5655995/fire-a-controller-action-from-a-jquery-autocomplete-selection)

该解决方案很有意义，并且单击和重定向有效，但我不知道如何返回不仅仅是名称的字符串列表。

当前控制器代码（片段）：

```
 List<string> Names = new List<string>();
        foreach (Child c in listfromDB)
        {
            Names.Add(c.Name);
            //childNames.Add(new KeyValuePair<string, int>(c.Name, c.ID));
        }
        return Json(Names); 
```

`KeyValuePair`似乎没有工作。如何改为创建对象数组？

我的 jQuery 代码：

```
$(document).ready(function () {
$("#find-child-box").autocomplete({
source: function (request, response) {
    // define a function to call your Action (assuming UserController)
    $.ajax({
        url: '/Admin/AutoCompleteMyChildren', type: "POST", dataType: "json",

        // query will be the param used by your action method
        data: { query: request.term },
        success: function (data) {
            response($.map(data, function (item) {
                return { label: item, value: item };
            }))
        }
    })
},
minLength: 1, // require at least one character from the user
select: function(event, ui) {
alert('mom');
    window.location.href = ui.item.value;
}
}); 
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T02:22:37.890

实际上，自动完成功能适用于只返回字符串数组的源。这对您来说应该可以正常工作，而无需修改您的控制器操作：

**JavaScript：**

```
$(document).ready(function () {
    $("#find-child-box").autocomplete({
        source: function (request, response) {
            // define a function to call your Action (assuming UserController)
            $.ajax({
                url: '/Admin/AutoCompleteMyChildren', 
                type: "POST", 
                dataType: "json",
                // query will be the param used by your action method
                data: { query: request.term },
                success: response
            });
        },
        minLength: 1, // require at least one character from the user
        select: function(event, ui) {
            alert(ui.item.ID);
            window.location.href = ui.item.value;
        }
    }); 
}); 
```

检查[jQueryUI 自动完成的概览选项卡](http://jqueryui.com/demos/autocomplete/)以查看小部件期望的数据类型。

*根据您的评论：*

正如@Alex 暗示的那样，您必须更改控制器操作的数据。您可以使用以下内容创建正确的对象数组：

```
return Json(listfromDB.Select(c => new { label = c.Name, ID = c.ID })); 
```

应该生成如下所示的 JSON：

```
[{ label: 'Scott', ID: '1234' }, ...] 
```

哪个自动完成可以正确使用。然后，`ui.item`在自动完成的事件处理程序（`select`例如）中的任何时间都可用，您应该能够访问`ui.item.ID`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:12:18.727

尝试创建存储您的 Child 类型的列表

```
List<Child> children = new List<Child>();

 foreach (Child c in listfromDB)
{

      children.Add(c);

}

 return Json(children); 
```

您可能需要修改您的最终代码，因为 Json 会有所不同。

如果您不希望从 DB 获得 Child 的所有属性，请创建一个自定义类并添加您想要的内容。

```
class CustomChild{

   public string Name {get; set;}
   public int ID { get; set ;}

}

List<CustomChild> children = new List<CustomChild>();

 foreach (Child c in listfromDB)
{

      children.Add(new CustomChild{ Name = c.Name, ID = c.ID} );

} 
```

您可能需要修改语法以使其正常工作或添加一些参考。我鼓励您研究 LINQ。

# ruby-on-rails - 来自演示者的 Rails 3.1 命名路由查询参数问题

> ID：12631247
> 
> 赞同：1
> 
> 时间：2012-09-27T22:56:23.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

将应用程序从 Rails 3.0.17 升级到 3.1.8 后，我遇到了一个奇怪的错误，即使用命名路由并添加查询参数。

向后开始，这是相关的错误和堆栈跟踪：

```
NameError (undefined local variable or method `env' for #<AnswerPagesPresenter:0x0000000420df60>):
  actionpack (3.1.8) lib/action_controller/metal/url_for.rb:36:in `url_options'
  actionpack (3.1.8) lib/action_dispatch/routing/url_for.rb:148:in `url_for'
  actionpack (3.1.8) lib/action_dispatch/routing/route_set.rb:207:in `edit_answer_sheet_page_path'
  vendor/plugins/questionnaire_engine/app/presenters/answer_pages_presenter.rb:81:in `new_page_link'
  vendor/plugins/questionnaire_engine/app/presenters/answer_pages_presenter.rb:91:in `block (2 levels) in page_list'
  vendor/plugins/questionnaire_engine/app/presenters/answer_pages_presenter.rb:90:in `each'
  vendor/plugins/questionnaire_engine/app/presenters/answer_pages_presenter.rb:90:in `block in page_list'
  vendor/plugins/questionnaire_engine/app/presenters/answer_pages_presenter.rb:89:in `each'
  vendor/plugins/questionnaire_engine/app/presenters/answer_pages_presenter.rb:89:in `page_list'
  vendor/plugins/questionnaire_engine/app/presenters/answer_pages_presenter.rb:21:in `initialize'
  app/controllers/applications_controller.rb:166:in `new'
  app/controllers/applications_controller.rb:166:in `setup_view'
  app/controllers/applications_controller.rb:19:in `show_default'
... 
```

这是 AnswerPagesPresenter 中调用命名路由的一段代码（我尝试对 'a' 变量使用多个东西，这是额外的查询参数，但通常为 nil）：

```
def new_page_link(answer_sheet, page, a = nil)
  PageLink.new(page.label, edit_answer_sheet_page_path(answer_sheet, page, :a => a), dom_page(answer_sheet, page), page) if page
end 
```

同样在我的 Presenter 类的顶部，我有以下代码行：

```
include ActionView::Helpers::TagHelper # link_to
include ActionView::Helpers::UrlHelper # url_for
include ActionController::UrlFor # named routes
include ActionController::RecordIdentifier # dom_id
include Rails.application.routes.url_helpers 
```

运行“rake routes”命令的相关行只是为了显示它是一个有效的路线：

```
edit_answer_sheet_page GET    /answer_sheets/:answer_sheet_id/page/:id/edit(.:format)     {:action=>"edit", :controller=>"answer_pages"} 
```

从插件中的 routes.rb 文件：

```
resources :answer_sheets do 
  member do
    post :send_reference_invite
    post :submit
  end
  resources :page, :controller => :answer_pages do
    member do
      post :save_file
    end
  end
end 
```

有人知道这里发生了什么吗？我试图弄清楚为什么它会去 lib/action_controller/metal/url_for.rb 而不是只使用 lib/action_dispatch/routing/url_for.rb 中的 url_options 方法，但是当涉及到 Rails 时我很无能源代码。这在 Rails 3.0.17 中运行良好。我将不胜感激任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:07:57.020

查看此提交后，我发现了问题所在[https://github.com/rails/rails/commit/233be6572c96087192885924c6658a15d01a2a1b#actionpack/lib/action_controller/metal/url_for.rb](https://github.com/rails/rails/commit/233be6572c96087192885924c6658a15d01a2a1b#actionpack/lib/action_controller/metal/url_for.rb)

显然，如果你从控制器调用命名路由，你会没事的，因为 env 已经定义了。但是如果你从别的地方调用它， env 没有定义，你必须自己定义它。由于它是从一个自写的 Presenter（其中包含对控制器的引用）调用的，所以我只是在 Presenter（AnswerPagesPresenter 的超类）中编写了以下方法，它现在可以工作了：

```
def env
  @controller.env
end 
```

# android - jQuery移动选择输入

> ID：12631248
> 
> 赞同：0
> 
> 时间：2012-09-27T22:56:27.990
> 
> 标签：android, jquery, jquery-mobile

jQuery 移动选择菜单，表单计算器适用于浏览器 Firefox，但不适用于 android。在浏览器中点击提交按钮时，它可以按预期工作，但是当我在 android 中执行此操作时，微调器会加载并发送回我的主页。

```
 <form id="thermalgrowth">
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="t">
                            T:
                        </label>
                        <input id="t" placeholder=""  name="t" value="" type="number" step="0.001" min="0"/>
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="l">
                            L:
                        </label>
                        <input id="l" placeholder=""  name="l" value="" type="number" step="0.001" min="0"/>
                    </fieldset>
                </div>

                <div data-role="fieldcontain">  
                    <label for="c" class="select">C:</label>                    
                        <select name="c" id="c" >
                            <option value=".000006">Carbon Steel</option>
                            <option value=".0000059">Cast Iron</option>
                            <option value=".0000095">Stainless Steel</option>
                            <option value=".0000073">Nickel Steel</option>
                            <option value=".00001">Bronze</option>
                        </select>
                </div>                  

                <div class="ui-grid-a">
                    <div class="ui-block-a"><button id="reset" type="reset" data-theme="c" name="reset">Reset</button></div>
                    <div class="ui-block-b"><button id="submit" type="submit" data-theme="b" name="submit" >Submit</button></div>
                </div>

                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup">
                        <label for="tg">
                            Thermal Growth
                        </label>
                        <input id="tg" placeholder=""  name="tg" type="number" disabled="disabled"/>
                    </fieldset>
                </div>

                <script type="text/javascript"><!--

                    function calculate () {

                        var t = $('#t').val();
                        var l = $('#l').val();
                        var c = $('#c').val();                  

                        var tg = Number(t) * l * c ;

                        $('#tg').val( tg.toFixed(3) );

                        // submit event functions must return false,
                        // to tell the browser not to load a new page.
                        return false;
                    }

                    $('#thermalgrowth').submit( calculate );
                    $('#reset').click(function() {
                        $('#t').val('0').number('refresh');
                        $('#l').val('0').number('refresh');
                        $('#tg').val('0').number('refresh');
                    });

                </script>
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:31:44.773

加泰罗尼亚，

我猜要么存在解析错误，要么存在运行时错误。未关闭`<!--`可能是一个问题。控制台应该会告诉你。

奇怪的是，您应该使用`Number()`而`t`不是其他两个值。自动类型转换应该可以处理它，但至少为了完整性，您可以尝试：

```
var tg = Number(t) * Number(l) * Number(c) ; 
```

您也可以尝试将整个内容包装起来`$(function(){...})`并放入文档中`<head>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:14:29.270

您是否尝试过摆脱`<!--`脚本元素中的内容？这可能会导致问题。

# python - 缩进问题python

> ID：12631249
> 
> 赞同：0
> 
> 时间：2012-09-27T22:56:29.827
> 
> 标签：python, comments, indentation

我是 python 的新手，当我注释 ('#') 以下代码的最后两行时出现缩进错误消息：

```
 try:
        return get_callable(callback), {}
#   except (ImportError, AttributeError), e:
#       raise ViewDoesNotExist("Tried %s. Error was: %s" % (callback, st    r(e))) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T22:59:13.460

注释掉`try`/`except`时，将 a放在:`if True: #`前面`try`

```
 if True: #try:
        return get_callable(callback), {}
#   except (ImportError, AttributeError), e:
#       raise ViewDoesNotExist("Tried %s. Error was: %s" % (callback, st    r(e))) 
```

这使得语法正确，而不必消除内部块。您还可以在评论*后*添加一个`finally: pass`块：*`except`*

 *```
 try:
        return get_callable(callback), {}
#   except (ImportError, AttributeError), e:
#       raise ViewDoesNotExist("Tried %s. Error was: %s" % (callback, st    r(e)))
    finally:
        pass 
```

您唯一的其他选择是也注释掉该`try:`行，*并*删除该块的缩进：

```
#   try:
    return get_callable(callback), {}
#   except (ImportError, AttributeError), e:
#       raise ViewDoesNotExist("Tried %s. Error was: %s" % (callback, st    r(e))) 
```

如果没有or块来完成它，您不能将裸露留`try:`在原地。`except``finally`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T22:58:43.083

您的代码在语法上不再有效。except 子句是 try 子句的必需伴侣。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T22:59:10.367

如果没有另一个`except`语句，python 正在寻找一个 except 语句，而是可能会看到一个未缩进的行。

所以你可能会想，“为什么这是一个*缩进*错误？我只是缺少一个`except`，它与缩进没有任何关系。” 原因是 python “看到” a 后面没有缩进的行，`try:`并希望它缩进到`try`.*

# android - android LocationListener，无法在地图上显示位置

> ID：12631252
> 
> 赞同：0
> 
> 时间：2012-09-27T22:57:29.220
> 
> 标签：android, google-maps, gps, itemizedoverlay

我有以下源代码，当我使用 locationListener 时，我没有在地图上看到图钉。但是，如果我不使用位置侦听器，一切都会完美运行。请需要你的帮助

```
package com.example.googlemaps;

import java.util.Iterator;
import java.util.List;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.Overlay;
import com.google.android.maps.MapView.LayoutParams;
import com.google.android.maps.OverlayItem;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.widget.LinearLayout;

public class MapsActivity extends MapActivity {
    MapView mapView;
    //locationManager provides capability to receive info from GPS
    LocationManager locManager;
    LocationListener locListener;
    GeoPoint p;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);

        //zoom feature is build in MapView class
        mapView = (MapView)findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        initLocationManager();
    }

    /**
     * initialize the locationManager
     */

    private void initLocationManager(){
        locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        locListener = new LocationListener() {

            @Override
            public void onStatusChanged(String provider, int status, Bundle extras) {
                // TODO Auto-generated method stub
                // called when the status of the GPS provider changes
            }

            @Override
            public void onProviderEnabled(String provider) {
                // TODO Auto-generated method stub
                // called when the GPS provider is turned on (user turning on the GPS on the phone)
            }

            @Override
            public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub
                // called when the GPS provider is turned off (user turning off the GPS on the phone)
            }

            @Override
            public void onLocationChanged(Location location) {
                // TODO Auto-generated method stub
                // called when the listener is notified with a location update from the GPS
                createAndShowMyItemizedOverlay(location);
            }
        };
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 35000, 10, this.locListener);
    }

    /**
     * this method will be called whenever a change of current position is
     * submitted by GPS
     */
    private void createAndShowMyItemizedOverlay(Location newLocation){
        List<Overlay> listOverlays = mapView.getOverlays();
        listOverlays.clear();

        //initialize icon
        Drawable icon = this.getResources().getDrawable(R.drawable.pushpin);

        //transform the location to a geopoint
                p = new GeoPoint((int)(newLocation.getLatitude()*1E6), (int)(newLocation.getLongitude()*1E6));

        //create the overlay and show it
        MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay(icon, this);
        OverlayItem overlayItem = new OverlayItem(p, "My Location", "I am in Dublin");

        itemizedOverlay.addItem(overlayItem);
        listOverlays.add(itemizedOverlay);
        mapView.getOverlays().add(itemizedOverlay);

        //move to location
        mapView.getController().animateTo(p);

        mapView.getController().setZoom(17);
        //redraw map
        mapView.postInvalidate();
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

和 MyItemizedOverlay 类如下：

```
package com.example.googlemaps;

import java.util.ArrayList;
import java.util.List;

import android.app.AlertDialog;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;

import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

public class MyItemizedOverlay extends ItemizedOverlay{

    private ArrayList<OverlayItem> ListItems = new ArrayList<OverlayItem>();
    private Drawable marker;
    private Context mContext;

    public MyItemizedOverlay(Drawable defaultMarker) {
        // TODO Auto-generated constructor stub
        super(boundCenterBottom(defaultMarker));
    }

    public MyItemizedOverlay(Drawable defaultMarker, Context context){
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    /**
     * When the populate() method executes, it will call 
     * createItem(int) in the ItemizedOverlay to retrieve each OverlayItem. 
     * You must override this method to properly read from the ArrayList 
     * and return the OverlayItem from the position specified by the given integer. 
     */
    @Override
    protected OverlayItem createItem(int index) {
        // TODO Auto-generated method stub
        return ListItems.get(index);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return ListItems.size();
    }

    //addItem is used to add new OverlayItem object to ArrayList
    public void addItem(OverlayItem item) {
        ListItems.add(item);
        populate();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = (OverlayItem) ListItems.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }
} 
```

PS：我在清单中有 ACCESS_FINE_LOCATION 和 ACCESS_COARSE_LOCATION 和 INTERNET

仍然不知道在手机上进行测试的问题是什么。肯定不是问题 GPS，手机，构建目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:23:30.037

根据您的问题描述，我相信您在您的 中只授予了两个 GPS 权限，`AndroidManifest.xml`如下所示，

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

但是，您仍然需要另外两个权限，如下所示，

```
<uses-permission android:name="android.permission.ACCESS_GPS"></uses-permission>
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"></uses-permission> 
```

# java - Java - 排序/字母排序字符串数组

> ID：12631257
> 
> 赞同：0
> 
> 时间：2012-09-27T22:57:54.170
> 
> 标签：java, string, vector

我的 comp 182 课程中有一个项目，我们正在研究矢量，但我坚持制作“有序矢量”。当我尝试运行它时，我得到一个 ArrayOutofBounds 错误。

（“howMany”变量是数组“theWords”中字符串大小的计数，
代码从另一个类运行，该类读取一个包含 10 个单词的输入文件，使用此“addWord”方法添加单词从文件到“theWords”数组。）

这是我到目前为止的代码：
[顺便说一句，我们不允许只使用“数组”方法“compareTo”]

```
 public void addWord(String newWord) {
  //adds in words
     if (howMany < theWords.length) {
        theWords[howMany]= newWord; 
        howMany++;
     }  
     else {
        String t [] = new String[capacity+10];
        for (int i=0; i <capacity; i++){
           t[i] = theWords[i];
        }
        theWords = t;
        theWords[howMany] = newWord; 
        howMany++;
     }

    //ordering words
     for(int g = howMany - 1, z = howMany ; g < howMany; g--, z--) {
        if(newWord.compareTo(theWords[g]) < 0) {
           theWords[g] = theWords[z];
           theWords[g] = newWord;
        }
            else
            newWord = theWords[z];          
     }
        howMany++;
  } 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:06:48.297

根据数组的容量，语句

```
theWords[g] = theWords[z] 
```

将在第一次执行循环时失败，因为 z = 数组的长度（数组中的最后一个索引是长度 - 1）。附带说明一下，在循环中，您最初设置

```
g = howMany - 1 
```

然后递减它，所以 g < howMany 将永远为真......你将有一个无限循环。当 g 或 z 低于 0 时，这个无限循环也可能导致索引越界异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:14:45.263

如果`howMany == capacity - 1`在函数执行之前，你会遇到问题。

会发生什么：您进入 if (//adds in words) 的第一个分支，然后将`howMany`其递增，`howMany = capacity`然后分配`z = howMany`和访问其边界之外的数组：`theWords[g] = theWords[z];`.

另一件事是你不增加`capacity`变量，它必须是`capacity+=10`.

这是我的变体：

```
import java.util.Arrays;
import java.util.Random;
public class OrderedArray{

  int howMany = 0;
  String[] theWords = new String[10];

  public void addWord(String newWord) {

    //don't accept nulls
    if(newWord == null) {
      return;
    }
    //if length is reached increase the array
    if(howMany >= theWords.length - 1) {
      theWords = Arrays.copyOf(theWords, theWords.length+10);
    }

    //go through existing words and add newWord if it is less then met value
    boolean isAdded = false;
    for(int idx = 0; idx < howMany && theWords[idx] != null; idx++){                                                          
      if(newWord.compareTo(theWords[idx]) < 0){
        isAdded = true;
        String valToShift = theWords[idx];
        theWords[idx] = newWord; 

        //copy all values after the met index
        for(int shIdx = idx+1; shIdx <= howMany && shIdx < theWords.length; shIdx++){
          String tmp = theWords[shIdx];
          theWords[shIdx] = valToShift;
          valToShift = tmp;
        }        
        break;
      }
    }

    //if a value was not added then add it
    if(!isAdded){
      theWords[howMany] = newWord;
    }
   ++howMany;
  }

  public String toString(){
    StringBuffer sb = new StringBuffer("howMany:");
    sb.append(howMany);
    for(int idx = 0; idx < howMany; idx++){
      sb.append(",");
      sb.append(theWords[idx]);
    }
    return sb.toString();
  }

  public static void main(String[] args){
    OrderedArray m = new OrderedArray();
    Random r = new Random(System.currentTimeMillis());
    for(int i = 0; i < 210; i++){
      m.addWord(Math.abs(r.nextInt())+ "");
    }
    System.out.println(m);

    OrderedArray m1 = new OrderedArray();

    m1.addWord("c");
    m1.addWord("d");
    m1.addWord("a");
    m1.addWord("cd");

    System.out.println(m1);

  }

} 
```

# iphone - 如何创建一个 NSDictionarys 数组

> ID：12631259
> 
> 赞同：1
> 
> 时间：2012-09-27T22:58:04.760
> 
> 标签：iphone, ios, core-data, nsarray, nsdictionary

我想获取我存储到我的核心数据对象之一的信息并将此数据存储到`NSArray`对象`NSDictionary`中，以便我可以将此数组发送到我的一个视图并在表格视图中显示数据。

但是我不太确定如何`NSDictionary`进入`NSArray`，这是我的 fetch 请求，希望有人可以帮我把它`NSDictionary`放入`NSArray`.. 我不知道如何做到这一点，因为我是如何循环的核心数据对象。

```
// Test listing all FailedBankInfos from the store
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        NSEntityDescription *entity = [NSEntityDescription entityForName:@"Manuf" inManagedObjectContext:context];
        [fetchRequest setEntity:entity];

        NSError *error; 

        NSMutableDictionary *tempManufacturerDictionary = [[ NSMutableDictionary alloc] init];

        NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
        for (Manuf *manuf in fetchedObjects) {
            [tempManufacturerDictionary setObject:manuf.hasMod forKey:@"HASMOD"];
            [tempManufacturerDictionary setObject:manuf.isLocked forKey:@"ISLOCKED"];
            [tempManufacturerDictionary setObject:manuf.isReg forKey:@"ISREG"];
            [tempManufacturerDictionary setObject:manuf.main forKey:@"MAIN"];

            // How do I put the Dictionary above into an array?
        } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T23:01:17.130

`NSMutableArray`您可以在进入循环之前实例化一个，并`NSMutableDictionary`在每次迭代期间声明一个新的，如下所示：

```
 NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
    NSMutableArray *array = [NSMutableArray array];
    for (Manuf *manuf in fetchedObjects) {
        NSMutableDictionary *tempManufacturerDictionary = [NSMutableDictionary dictionary];
        [tempManufacturerDictionary setObject:manuf.hasMod forKey:@"HASMOD"];
        [tempManufacturerDictionary setObject:manuf.isLocked forKey:@"ISLOCKED"];
        [tempManufacturerDictionary setObject:manuf.isReg forKey:@"ISREG"];
        [tempManufacturerDictionary setObject:manuf.main forKey:@"MAIN"];

        [array addObject:tempManufacturerDictionary];
    } 
```

您还可以将`resultType`fetch 请求设置为，`NSDictionaryResultType`并首先从 fetch 请求中获取字典数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:00:31.610

就像您使用任何其他对象一样，使用`addObject`.

您需要使用`NSMutableArray`虽然，而不是正常`NSArray`才能添加元素。如果您严格需要不可变版本，您可以稍后将可变数组转换为普通数组。

# iphone - 将故事板 UIViewController 中的视图加载到外部显示器

> ID：12631260
> 
> 赞同：0
> 
> 时间：2012-09-27T22:58:26.663
> 
> 标签：iphone, ios, xcode, ipad, storyboard

我的故事板中有 2 个 UIViewController，第一个（本地视图控制器）显示在我的 ipad 窗口中。故事板中还有第二个（外部视图控制器）

我想将第二个 UIViewController（外部视图控制器）的视图及其内容发送到我创建的另一个窗口以发送到外部显示器。

我可以创建一个 UIwindow 并将其发送到外部显示器（UIScreen = 1），我可以向它添加一个视图，然后向它添加标签之类的东西就好了。（它们显示在第二个显示器上）

但是，如果我想将 UIviewcontroller“视图”（及其所有内容）发送到我为外部显示器创建的 Windows……我看不到它。

我可以这样做吗？

看看下面的代码：

```
//this code is at my main view controller

#import "ASHExternalViewController.h" //for External View Controller

if ([[UIScreen screens] count] > 1)
    {
        // Associate the window with the second screen.
        // The main screen is always at index 0.
        UIScreen*    secondScreen = [[UIScreen screens] objectAtIndex:1];
        CGRect        screenBounds = secondScreen.bounds;

        //Alloc external window
 UIWindow *externalWindow = [[UIWindow alloc] initWithFrame:screenBounds];
        externalWindow.screen = secondScreen;

        // Add a white background View to the window
        UIView*            whiteField = [[UIView alloc] initWithFrame:screenBounds];
        whiteField.backgroundColor = [UIColor whiteColor];

        [externalWindow addSubview:whiteField];

//up to this point all OK, I can see the white background view in the external display

        //
        //Add uiviewcontoller at storyborad to external window 
ASHExternalViewController *_externalView = [[ASHExternalViewController alloc] initWithNibName:@"ASHExternalViewController" bundle:nil];

        [whiteField addSubview: externalView.view];

//does no add the view in the external UIViewController in story board

        // Go ahead and show the window.
        externalWindow.hidden = NO;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:49:56.873

这不是将 viewController 的视图层次结构添加到窗口的正确方法。

在 iOS 4 及更高版本中，您应该将其设置为`rootViewController`

```
externalWindow.rootViewController = externalViewController; 
```

还可能值得注意的是，您实际上并没有从情节提要中加载 viewController。

# c# - 在 TreelistEx 控件（不是 TreeList）上启用源查询语法

> ID：12631261
> 
> 赞同：1
> 
> 时间：2012-09-27T22:58:27.387
> 
> 标签：c#, asp.net, content-management-system, sitecore, sitecore6

我正在尝试基于 TreeListEx 字段创建自定义字段，参考本文中如何使用 TreeList 创建自定义字段：

[http://sdn.sitecore.net/Scrapbook/Custom%20TreeList%20that%20supports%20query.aspx](http://sdn.sitecore.net/Scrapbook/Custom%20TreeList%20that%20supports%20query.aspx)

基本上我需要能够在源字段中启用查询语法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T08:21:32.490

不确定[LuceneTreeListEx](http://trac.sitecore.net/LuceneTreeListExEditor)是否会为您节省开发时间。但是要回答您的问题，应该只是创建一个从 TreeListEx 控件继承的类并覆盖该示例中的 Source 属性的情况。

本质上，您正在剥离`query:`并将其传递给`database.SelectItems()`方法。

您可能想查看反射器/DotPeek 等中的 TreeListEx 以了解其当前工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T22:19:51.997

好的 - 所以，解决了这个问题。ItemID 在 treelistex 类中不能作为属性使用，但它可以作为值使用，并且该值在视图状态中。因此，您真正需要做的就是在 itemID 属性中公开视图状态，并像在树列表控件中一样使用它。

```
public string ItemID
        {
            get
            {
                return StringUtil.GetString(this.ViewState["ItemID"]);
            }
            set
            {
                Sitecore.Diagnostics.Assert.ArgumentNotNull(value, "value");
                this.ViewState["ItemID"] = value;
            }
        } 
```

# ruby - Cucumber：未定义的步骤，虽然步骤已定义

> ID：12631270
> 
> 赞同：2
> 
> 时间：2012-09-27T22:59:03.773
> 
> 标签：ruby, cucumber, selenium-webdriver, gherkin

**我有这个步骤实现**

给定 /^entity URI "([^"]*)"$/ do |arg1| @entityUri = arg1 end

**我将此步骤从现有功能文件复制到新功能文件**

```
 Given entity URI <Entity Resource URI> 
```

**Cucumber 状态** 1 个场景（1 个未定义）8 个步骤（2 个跳过，4 个未定义，2 个通过）0m0.009s

您可以使用以下代码片段为未定义的步骤实现步骤定义：

给定 /^entity URI "(.*?)"$/ 做 |arg1| pending # 用你希望结束的代码表达上面的正则表达式

PS：我检查了我的新旧功能文件的目录结构，它们处于同一级别。即使这个解决方案对我也不起作用：[Cucumber: undefined step, 尽管 step 应该被定义](https://stackoverflow.com/questions/4022990/cucumber-undefined-step-although-step-should-be-defined)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:33:53.960

基于步骤匹配器正则表达式，我希望步骤与步骤周围的双引号匹配：

```
Given entity URI "<Entity Resource URI>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T08:45:35.500

```
Check with the folder structure it should be like below
Create project folder
 >Create features folder
  >Create step definitions folder
    >Save .rb files here
  >Save .feature files here.

Step definition folder and .feature files should be in the feature file.

Even i faced the same issue like you.The folder structure solved my problem. 
```

# bash - 不使用 rm 命令递归删除目录

> ID：12631275
> 
> 赞同：2
> 
> 时间：2012-09-27T22:59:29.263
> 
> 标签：bash, shell, unix, recursion

您好我正在尝试以递归方式删除/删除目录及其子目录和文件。我不想使用 rm -r。我想出了以下代码。

```
 function recursive(){
            for i in "$1"/*; do

                    if [ -d $i ];then
                            echo "FILE $i IS A DIRECTORY"
                            if [ "$(ls -A $i)" ];then
                                    echo "DIRECTORY IS NOT EMPTY CALLING RECURSIVE AGAIN"
                                    recursive $i
                            else
                                    echo "DELETE THIS DIRECTORY: ITS EMPTY"
                            fi
                    elif [ -e $i ];then
                            echo "DELETING FILE $i"
                    else
                            echo UNKNOWN FILE $(basename $i)
                    fi
            done

    } 
```

问题是当我深入挖掘子目录时，我可以在途中删除它们的文件，但是一旦我到达目录树的底部，我必须删除所有现在为空的目录（也许在我备份的路上？）

如果有人能帮助我理解其逻辑或引导我走向正确的方向，我将不胜感激。

[这个](https://stackoverflow.com/questions/7977501/recursively-remove-a-directory-using-c)问题的答案是有道理的，但我不知道如果子目录的级别很少，它怎么处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T23:16:02.763

我会简单地使用

```
find "$1" -delete 
```

`unlink`可能也是一个不错的想法，但我不确定你是否会考虑作弊:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:04:09.137

删除目录的内容后，无论如何都可以删除它。因此，只需删除 else 语句并将 remove-directory-command 上移一级：

```
function recursive(){
        for i in "$1"/*; do

                if [ -d $i ];then
                        echo "FILE $i IS A DIRECTORY OR A (SYM)LINK TO ONE"
                        if [ "$(ls -A $i)" ];then
                                echo "DIRECTORY IS NOT EMPTY CALLING RECURSIVE AGAIN"
                                recursive $i
                        fi

                        echo "DELETE THIS DIRECTORY: ITS (NOW) EMPTY"
                elif [ -e $i ];then
                        echo "DELETING FILE $i"
                else
                        echo UNKNOWN FILE $(basename $i)
                fi
        done

} 
```

# ruby-on-rails - Rails 3 - 过滤器链因 :authentication 呈现或重定向而停止

> ID：12631278
> 
> 赞同：5
> 
> 时间：2012-09-27T22:59:37.347
> 
> 标签：ruby-on-rails, ruby, authentication, redirect, action

我仍然在标题中收到“错误”消息，不知道如何解决。在**ApplicationController**中，

```
class ApplicationController < ActionController::Base
   protect_from_forgery
   before_filter :mailer_set_url_options
   helper_method :current_user_session, :current_user

   def mailer_set_url_options
     ActionMailer::Base.default_url_options[:host] = request.host_with_port
   end

   private
      def current_user_session
        logger.debug "ApplicationController::current_user_session"
        return @current_user_session if defined?(@current_user_session)
        @current_user_session = UserSession.find
      end

      def current_user
        logger.debug "ApplicationController::current_user"
        return @current_user if defined?(@current_user)
        @current_user = current_user_session && current_user_session.user
      end

      def authentication
        logger.debug "ApplicationController::authentication"
        unless current_user
          store_location
          flash[:warning] = "You must be logged out to access this page"
          redirect_to root_url
          return false
        end
      end

      def store_location
        session[:return_to] = request.url
      end
end 
```

在**routes.rb**

```
 #match 'set_activity_account/:id/:value' => 'users#account_activity', :as => :set_activity_account -- this doesn't work as well..
  resources :users do
    member do
      get :action_a, :action_b
    end
    collection do
      get 'account_activity'
    end
  end 
```

和用户**控制器**

```
class UsersController < ApplicationController
  before_filter :authentication, only: [:index, :edit, :update, :destroy, :action_a, :action_b]
  #skip_before_filter :authentication, :only => [:account_activity] didn't help as well

  def account_activity
    unless current_user.nil?
      puts 'A'
      if params[:user_id] && params[:status]
        puts 'B'
        User.find(params[:user_id]).update_attributes(:active => params[:status])
        flash[:notice] = 'Activity was successfully changed.'
      end
    end
    redirect_to :back
  end
... 
```

总是在更新**活动**属性时，我会收到消息 **Redirected localhost:3000/ Filter chain halted as :authentication rendering or redirected**

**编辑：**添加了日志文件的输出：

```
Started GET "/users/account_activity?user_id=31&status=0" for 127.0.0.1 at 2012-09-28 00:40:10 +0200
Processing by UsersController#account_activity as HTML
  Parameters: {"user_id"=>"31", "status"=>"0"}
ApplicationController::current_user
ApplicationController::current_user_session
  User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."persistence_token" = '...' LIMIT 1
   (0.1ms)  BEGIN
   (0.7ms)  UPDATE "users" SET "last_request_at" = '2012-09-27 22:40:10.258152', "perishable_token" = '...', "updated_at" = '2012-09-27 22:40:10.259093' WHERE "users"."id" = 31
   (0.7ms)  COMMIT
ApplicationController::current_user_session
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "31"]]
   (0.1ms)  BEGIN
  User Exists (0.6ms)  SELECT 1 FROM "users" WHERE ("users"."email" = 'abc@def.com' AND "users"."id" != 31) LIMIT 1
   (0.5ms)  UPDATE "users" SET "active" = 0, "perishable_token" = '...', "updated_at" = '2012-09-27 22:40:10.267227' WHERE "users"."id" = 31
   (0.7ms)  COMMIT
Redirected to http://localhost:3000/users/31/edit
Completed 302 Found in 19ms (ActiveRecord: 4.5ms)

Started GET "/users/31/edit" for 127.0.0.1 at 2012-09-28 00:40:10 +0200
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"31"}
ApplicationController::authentication
ApplicationController::current_user
ApplicationController::current_user_session
  User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."persistence_token" = '...' LIMIT 1
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 31 LIMIT 1
Redirected to http://localhost:3000/
Filter chain halted as :authentication rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 1.3ms) 
```

我该如何解决这个问题？我试图在谷歌上搜索 SO，但不幸的是仍然不知道如何解决它..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-05T05:08:11.477

当您从 before_filter 重定向某处时，过滤器链停止。如果一切正常，您可以忽略此消息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-09T08:55:28.563

我的一位用户遇到了这个错误。

事实证明，用户有一个字段（我们最近添加了一个长度验证），其中的文本比允许的要多。由于验证是新的并且用户已经在那里，因此该错误一直显示。

我在尝试使用“！”更新其属性时发现了它 使错误明确

```
> User.last.update_attributes!(:email => "someone@domain.com") 
```

> 用户负载 (0.3ms) SELECT `users`.* FROM `users`ORDER BY `users`。`id` DESC LIMIT 1 (0.1ms) BEGIN User Exists (0.2ms) SELECT 1 AS one FROM `users`WHERE ( `users`. `email`= 'someone@domain.com' AND `users`. `id`!= 2020) LIMIT 1 (0.1ms) ROLLBACK ActiveRecord::RecordInvalid: 验证失败: 摘要太长（最多 650 个字符）

因此，更改该字段“摘要”的内容解决了它。

# projection - 如何设置传单地图以在 ESRI:102012 投影中显示 WMS 图层？

> ID：12631279
> 
> 赞同：3
> 
> 时间：2012-09-27T22:59:59.190
> 
> 标签：projection, leaflet, wms, srs, proj

我在 ESRI:102012 srs 中的 wms 服务器上有一些层。[http://spatialreference.org/ref/esri/102012/](http://spatialreference.org/ref/esri/102012/)

服务器接受带有 EPSG:102012 srs 的 getmap 请求。

我正在使用 proj4leaflet 插件来设置适当的投影。但我坚持定义 L.Transformation、分辨率和比例。谁能告诉我参数应该是什么或提供示例？

# python - Python 获取所有 CSS 链接

> ID：12631282
> 
> 赞同：0
> 
> 时间：2012-09-27T23:00:06.583
> 
> 标签：python, html, css, parsing

我开始使用 cssutils 库，我想做一些类似 lxml.html 库函数“iterlinks()”的事情，简而言之，我只想获取 css 文件中的所有链接。我想自己做，但我不知道这是否做得好：

```
sheet = cssutils.parseString("http://example.com/style.css")
links = []
for rule in sheet.cssRules:
    for child in rule.style.children():
        value = child.propertyValue
        for i in range(value.length):
            if isinstance(i, cssutils.css.URIValue):
                links.append(i) 
```

我想知道是否有更清洁的方法，即使有替代库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:12:46.817

cssutils 有一个方法——使用[getUrls](http://packages.python.org/cssutils/docs/utilities.html#geturls)

它将遍历一个规则或整个样式表，并返回它找到的所有 url。

# java - JFileChooser 问题

> ID：12631287
> 
> 赞同：0
> 
> 时间：2012-09-27T23:00:34.920
> 
> 标签：java, save, jfilechooser

我知道有一种方法可以使您选择的文件只能是特定类型，但目前，我不知道如何。有人可以请指定这个吗？顺便说一句，我知道它涉及字段 FILES_ONLY 或类似的东西。我在 Javadoc 中找不到任何东西，所以我一定做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:01:48.070

其实，我现在知道你用了`chooser.setSelectionMode(JFileChooser.whatever);`，所以我现在觉得很傻……

# jquery - jQuery click 函数无法识别插入脚本的元素

> ID：12631288
> 
> 赞同：0
> 
> 时间：2012-09-27T23:00:34.683
> 
> 标签：jquery

我有一张从一行开始的桌子。表格的第一个单元格有一个加号的图像。单击它时，它会调用一个 jQuery 函数来将新行附加到表中。它首先删除第一行中包含加号的 div，然后插入新行。新行在第一个单元格中有加号。但是，当我单击第二行的加号时，什么也没有发生。

这是 html 的样子：

```
<td><div id="plus_sign">&nbsp;&nbsp;<img id="add_row" alt="Add Group Member" src="http://localhost/jet/assets/images/green-plus-sign-tiny.png"></div>&nbsp;&nbsp;</td> 
```

下面是脚本代码的样子：

```
$("#add_row").click(function() {
    addMember();
});
function addMember() {  
    var baseurl = "<?php print base_url(); ?>"; 
    var $counter = parseInt($("#rowCounter").val());
    if ($counter > 1) {
        var $firstName = "#firstName"+$counter;
        var $lastName = "#lastName"+$counter;
        var $email = "#email"+$counter;
        if ($($firstName).val() == "" && $($lastName).val() == "" && $($email).val() == "") {
            alert("You must fill out member row before adding another!");
            return false;
        }
    }
    $memberRowNum = $counter;
    $('#plus_sign').remove();
  $counter+=1;
  var $appendVal = '<tr><td><div id="plus_sign" valign="bottom">&nbsp;&nbsp;<img id="add_row" alt="Add Group Member" src="';
  $appendVal += baseurl;
  $appendVal += 'assets/images/green-plus-sign-tiny.png" /></div>&nbsp;&nbsp;</td>';
  $appendVal += '<td>'+$memberRowNum+'<input type="hidden" name="volID'+$counter+'" id="volID'+$counter+'"></td>';
  $appendVal += '<td><input type="text" name="firstName~~" id="firstName~~" size="15" ></td>';
    $appendVal += '<td><input type="text" name="lastName~~" id="lastName~~" size="20" ></td>';
    $appendVal += '<td><input type="text" name="email~~" id="email~~" size="25" ></td>';
    $appendVal += '<td><select name="grade~~" id="grade~~"><option value="">Not a Student</option><option value="13">College</option></option><option value="12">12th</option><option value="11">11th</option><option value="10">10th</option><option value="9">9th</option><option value="8">8th</option><option value="7">7th</option><option value="6">6th</option><option value="5">5th</option><option value="4">4th</option><option value="3">3rd</option></select></td>';
    $appendVal += '<td align="center"><input type="checkbox" name="expBoard~~" id="expBoard~~" value="1" /></td>';
    $appendVal += '<td align="center"><input type="checkbox" name="expBook~~" id="expBook~~" value="1" /></td>';
  $appendVal += '</tr>';
    $appendVal = $appendVal.replace(/~~/g,$counter);        
    $appendVal = $appendVal.replace(/@@/g,"?");     
    $(".groupMembers > tbody:last").append($appendVal);
    $("#rowCounter").val($counter);
} 
```

我检查了 addMember 函数生成的 html，它与原始行的 html 相同。我还验证了第一行中的 div 已被删除。所以我在想，不知何故，仍然有一些参考图像的第一个实例，id 为“add_row”，并且没有识别第二行的新实例。

问题是，我不知道如何解决它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:04:09.930

**在将tr**插入身体后，您需要委托事件或附加事件。

**HTML 中的id**也应该是唯一的。尝试使用类名

```
$('table').on('click' , '#add_row' , function(){
     addMember();
}); 
```

因为拥有相同的 ID 不是正确的方法.. 尝试使用类代替..

```
$('table').on('click' , '.add_row' , function(){
         addMember();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:05:29.983

首先，您不能`id`在更多元素上使用相同的属性 - 将它们转换为类。

```
<td><div class="plus_sign">&nbsp;&nbsp;<img class="add_row" alt="Add Group Member" src="http://localhost/jet/assets/images/green-plus-sign-tiny.png"></div>&nbsp;&nbsp;</td> 
```

然后你必须使用`.on()`方法：

```
$("#yourTableId td").on('click', '.add_row', (function() {
    addMember();
}); 
```

您是在告诉您的表`<td>`注意`click`具有类的元素的事件`add_row`，无论它们是否稍后添加。

# c# - Code-First 应用程序中的 XML 列

> ID：12631290
> 
> 赞同：21
> 
> 时间：2012-09-27T23:00:50.927
> 
> 标签：c#, xml, ef-code-first, entity-framework-migrations

我正在尝试在 Code First 中创建一个 XML 列。我很清楚 Entity Framework 并不完全支持 XML 列，并且它将它们作为字符串读取。没关系。不过，我仍然希望列类型为 XML。这是我的课：

```
class Content
{
    public int ContentId { get; set; }

    [Column(TypeName="xml")]
    public string XmlString { get; set; }

    [NotMapped]
    public XElement Xml { get { ... } set { ... } }
 } 
```

问题是，Code First 迁移完全忽略了 Column 属性并将字段创建为`nvarchar(max)`. 我尝试使用`[DataType("xml")]`，但这也不起作用。

这是迁移错误吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-01T14:20:33.440

你有没有尝试过：

```
public String XmlContent { get; set; }

public XElement XmlValueWrapper
{
    get { return XElement.Parse(XmlContent); }
    set { XmlContent = value.ToString(); }
}

public partial class XmlEntityMap : EntityTypeConfiguration<XmlEntity>
{
    public XmlEntityMap()
    {
        // ...
        this.Property(c => c.XmlContent).HasColumnType("xml");

        this.Ignore(c => c.XmlValueWrapper);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-01T16:39:12.473

我通过属性实现了所需的功能，并用该属性装饰了我的模型类 xml 字段。

```
[XmlType]
public string XmlString { get; set; }

[NotMapped]
public XElement Xml
{
    get { return !string.IsNullOrWhiteSpace(XmlString) ? XElement.Parse(XmlString) : null; }
    set {
        XmlString = value == null ? null : value.ToString(SaveOptions.DisableFormatting);
    }
} 
```

得到了这2篇文章的帮助：

[https://entityframework.codeplex.com/wikipage?title=Code%20First%20Annotations](https://entityframework.codeplex.com/wikipage?title=Code%20First%20Annotations)

[https://andy.mehalick.com/2014/02/06/ef6-adding-a-created-datetime-column-automatically-with-code-first-migrations/](https://andy.mehalick.com/2014/02/06/ef6-adding-a-created-datetime-column-automatically-with-code-first-migrations/)

# 解决方案

### 定义属性

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class XmlType : Attribute
{
} 
```

### 在上下文中注册属性

在“OnModelCreating”的上下文中

```
modelBuilder.Conventions.Add(new AttributeToColumnAnnotationConvention<XmlType, string>("XmlType", (p, attributes) => "xml")); 
```

### 自定义 Sql 生成器

```
public class CustomSqlGenerator : SqlServerMigrationSqlGenerator
{
    protected override void Generate(ColumnModel column, IndentedTextWriter writer)
    {
        SetColumnDataType(column);

        base.Generate(column, writer);
    }

    private static void SetColumnDataType(ColumnModel column)
    {
        // xml type
        if (column.Annotations.ContainsKey("XmlType"))
        {
            column.StoreType = "xml";
        }
    }
} 
```

### 注册自定义 Sql 生成器

在迁移配置构造函数中，注册自定义 SQL 生成器。

```
 SetSqlGenerator("System.Data.SqlClient", new CustomSqlGenerator()); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-06-18T10:30:37.883

现在可以在 Entity Framework Core 2.1+ 中使用 SQL Server XML 列类型和[值转换](https://docs.microsoft.com/en-us/ef/core/modeling/value-conversions)来实现这一点，而无需额外的属性。

```
public class Content
{
    public int ContentId { get; set; }

    public XElement Xml { get; set; }
}

internal class ContentEntityTypeConfiguration : IEntityTypeConfiguration<Content>
{
    public void Configure(EntityTypeBuilder<Content> builder)
    {
        builder.HasKey(e => e.ContentId);

        builder.Property(e => e.ContentId)
            .ValueGeneratedOnAdd();

        builder.Property(e => e.Xml)
            .HasConversion(
                xml => xml.ToString(),
                xml => xml != null ? XElement.Parse(xml) : null)
            .HasColumnType("xml");
    }
}

public class MyDbContext : DbContext
{
    public DbSet<Content> Contents { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.ApplyConfiguration(new ContentEntityTypeConfiguration());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-17T21:42:08.433

但是如果 XmlContent 为 null 怎么办？

也许 ：

```
 public XElement XmlValueWrapper
    {
        get { return XmlContent != null ? XElement.Parse(XmlContent) : null; }
        set { XmlContent = value.ToString(); }
    } 
```

# python - 使用 Flask 编写的 Python 脚本从另一个 Python 文件调用函数

> ID：12631305
> 
> 赞同：1
> 
> 时间：2012-09-27T23:03:01.097
> 
> 标签：python, flask

我有一个 HTML 页面、一个用 Flask 编写的 Python 脚本和一个不同的 Python 脚本。当我执行使用 Flask 编写的脚本时，我可以转到 127.0.0.1:12345 并查看我的 HTML 页面。我在 HTML 页面上设置了一个按钮，该按钮将文本框中的数据发送到用 Flask 编写的脚本进行检查。我的 Flask 脚本中有一个函数，该函数在单击按钮时执行，它从 HTML 页面的文本框中获取数据。当我尝试从此函数调用我的另一个脚本时（另一个脚本称为 users.py。所以我会说，“users.main(args)”。） users.main 不执行。我有这个设置：

```
try:
    users.main(['-h'])
except:
    print 'OH NO' 
```

它在我调用主脚本的终端中打印 OH NO。为什么它完全失败了？它不会产生任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:58:15.587

为什么不导入 python 文件并执行函数而不是调用脚本本身？（这就是在我看来你正在做的事情......）

您没有收到错误消息，因为您捕获了异常。您可以删除 try/except 并让 python 继续打印出问题所在。

您还可以查看 python traceback 模块，它可以让您分析异常等。很难再为您提供帮助，因为我们不知道您的代码是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T15:29:27.543

在没有 try/catch 的情况下运行 users.main(['-h']) 看看会发生什么。错误/堆栈跟踪可能会告诉您正在发生的事情。

# jquery - jQuery选择器 - 除了第一个标签和输入之外的所有元素？

> ID：12631306
> 
> 赞同：2
> 
> 时间：2012-09-27T23:03:06.347
> 
> 标签：jquery

我觉得我应该可以在这里使用 :not(:first-child) 选择器，但它似乎不像我希望的那样工作。

[http://jsfiddle.net/39KZ9/6/](http://jsfiddle.net/39KZ9/6/)

我希望标签仍然出现。我怎样才能简单地做到这一点？

```
<div id="OrdersSearchResult">
    <input type="radio" id="SearchResultsLink" name="SearchResultNavigation" checked="checked"/>
    <label id="SearchResultsLinkLabel" for="SearchResultsLink">Search Results</label>
</div>​

$(document).ready(function(){
    $('#OrdersSearchResult').children('label:not(:first-child)').remove();
    $('#OrdersSearchResult').children('input:not(:first-child)').remove();
});​ 
```

**更新：**很清楚，我很高兴第一个孩子选择器会寻找已经匹配元素的第一个孩子。也就是说，我希望它选择所有不是找到的第一个输入并且与标签类似的所有输入。不幸的是，无论是否应用了其他过滤器，它都匹配 OrdersSearchResult 的子元素的第一个子元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:13:25.943

对标签和输入执行此操作：

```
var labels = $('#OrdersSearchResult > label').toArray();
labels.shift();
$(labels).remove(); 
```

或许：

```
$($('#OrdersSearchResult > label').toArray().shift()).remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:15:44.783

[http://jsfiddle.net/39KZ9/16/](http://jsfiddle.net/39KZ9/16/)

```
$(document).ready(function(){
    $('#OrdersSearchResult').children('label:gt(0)').remove();
    $('#OrdersSearchResult').children('input:gt(0)').remove();
});​ 
```

使用大于选择器。

`:gt(0)`基本上说项目大于第一个，因为索引`0`是第一个。

[http://api.jquery.com/gt-selector/](http://api.jquery.com/gt-selector/)

顺便说一句，`:first-child`返回父元素的第一个子元素，而不是一组元素中的第一个子元素。

更简单：

```
$(document).ready(function(){
    $('#OrdersSearchResult').children('label:gt(0),input:gt(0)').remove();
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:07:02.277

因此，您已经删除了小提琴中的非第一个子元素：标签。

我想你想删除包含输入和标签的非第一个字段组。在这种情况下，请查看[http://jsfiddle.net/39KZ9/8/](http://jsfiddle.net/39KZ9/8/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T23:14:11.410

选择器 :first-child 让您选择特定节点的第一个子节点。

在您的代码中，第一个孩子是第一个输入。所有其他节点都不是第一个子节点，因此，它将被您的 jQuery 调用删除。

为了解决您的问题，您必须将每对输入和标签分组到一个容器中`(<p>, <div>, ...)`，并在这些容器上应用 jQuery 调用。

# java - 是否可以从 Servlet 填充下拉列表（在 HTML/JSP 中）？

> ID：12631307
> 
> 赞同：1
> 
> 时间：2012-09-27T23:03:16.203
> 
> 标签：java, html, eclipse, jsp, servlets

好的，所以我创建了我的第一个 jsp 页面，它基本上创建了 3 个下拉菜单，并使用从数据库中提取的信息填充它们。

但是，有人告诉我这是错误的代码，我应该使用 servlet 来处理数据库功能和错误处理，并让 jsp 严格执行显示。

原jsp代码如下：

```
<%@page import="java.sql.*"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
                <title>Code Selector</title>
        </head>
        <body> 
            <h1>Please select the applicable codes:</h1> 
            <select name='Code' onchange="showState(this.value)">  
            <option value="none">Select a code</option>  
            <%
                //Pulls the ids and decriptions from the codes table and stores them in the first drop down
                try
                {
                    Class.forName("driverName").newInstance();  
                    Connection con = DriverManager.getConnection("serverURL","username","password");  
                    Statement stmt = con.createStatement();  
                    ResultSet rs = stmt.executeQuery("select id, descr from codes");

                    while(rs.next())
                    {
                        %>
                            <option value="<%=rs.getString(1)%>"><%=rs.getString(1)%> <%=rs.getString(2)%></option>  
                        <%
                    }

                    //Closes the database connection
                    stmt.close();
                    con.close();
                }
                catch (ClassNotFoundException e)
                {
                    System.err.println("ClassNotFoundException: " + e.getMessage());
                } 
                catch (SQLException e)
                {
                    System.err.println("SQLException: " + e.getMessage());
                }
                catch (Exception e)
                {
                    System.err.println("Generic Exception: " + e.getMessage());
                }       
            %>
            </select>  
            <br>
            <br>
            <select name='Code2' onchange="showState(this.value)">  
            <option value="none">Select a code</option>  
            <%
                //Pulls the ids and decriptions from the codes table and stores them in the second drop down
                try
                {
                    Class.forName("driverName").newInstance();  
                    Connection con = DriverManager.getConnection("serverURL","username","password");  
                    Statement stmt = con.createStatement();  
                    ResultSet rs = stmt.executeQuery("select id, descr from codes");

                    while(rs.next())
                    {
                        %>
                            <option value="<%=rs.getString(1)%>"><%=rs.getString(1)%> <%=rs.getString(2)%></option>  
                        <%
                    }

                    //Closes the database connection
                    stmt.close();
                    con.close();
                }
                catch (ClassNotFoundException e)
                {
                    System.err.println("ClassNotFoundException: " + e.getMessage());
                } 
                catch (SQLException e)
                {
                    System.err.println("SQLException: " + e.getMessage());
                }
                catch (Exception e)
                {
                    System.err.println("Generic Exception: " + e.getMessage());
                }       
             %>
            </select>
            <br>
            <br>
            <select name='otherCode' onchange="showState(this.value)">  
            <option value="none">Select a other code</option>  
            <%

                //Pulls the ids and decriptions from the other codes table and stores them in the third drop down
                try
                {
                    Class.forName("driverName").newInstance();  
                    Connection con = DriverManager.getConnection("serverURL","username","password");  
                    Statement stmt = con.createStatement();
                    ResultSet rs2 = stmt.executeQuery("select id, descr from other_codes");

                    while(rs2.next())
                    {
                        %>
                            <option value="<%=rs2.getString(1)%>"><%=rs2.getString(1)%> <%=rs2.getString(2)%></option>  
                        <%
                    }

                    //Closes the database connection
                    stmt.close();
                    con.close();
                }
                catch (ClassNotFoundException e)
                {
                    System.err.println("ClassNotFoundException: " + e.getMessage());
                } 
                catch (SQLException e)
                {
                    System.err.println("SQLException: " + e.getMessage());
                }
                catch (Exception e)
                {
                    System.err.println("Generic Exception: " + e.getMessage());
                }       
            %>
      </select>
      <br> 
      <br>
      <form method = "post">
        <input type="submit" value="Submit">
        <%
            try
            {
                String Code = request.getParameter("Code");
                String Code2 = request.getParameter("Code2");
                String otherCode = request.getParameter("otherCode");

                Class.forName("driverName").newInstance();  
                Connection con = DriverManager.getConnection("serverURL","username","password");  
                Statement stmt = con.createStatement();
                //ResultSet rs3 = stmt.executeQuery();

                System.out.println("This is the first code: " + Code);
                System.out.println("This is the second code: " + Code2);
                System.out.println("This is the other code: " + otherCode);

                con.close();
                stmt.close();

            }
            catch (ClassNotFoundException e)
            {
                System.err.println("ClassNotFoundException: " + e.getMessage());
            } 
            catch (SQLException e)
            {
                System.err.println("SQLException: " + e.getMessage());
            }
            catch (Exception e)
            {
                System.err.println("Generic Exception: " + e.getMessage());
            } 
        %>
        <script>
            window.close();
        </script>
      </form>
      </body> 
</html> 
```

到目前为止，这就是我在新的 jsp 和 servlet 页面中所拥有的：

**代码选择器.jsp**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
    <HEAD>
        <TITLE>
            Codes
        </TITLE>
    </HEAD>
    <BODY BGCOLOR="#FDF5E6">
        <H2 ALIGN="CENTER">
            Please select the applicable codes:
        </H2>
        <FORM ACTION="http://localhost:8088/SomeProgram" METHOD="GET">
            <CENTER>
                <select name='code' onchange="showState(this.value)">  
                    <option value="none">Select a code</option>  
                </select>
                <BR>
                <BR>
                <select name='code2' onchange="showState(this.value)">  
                    <option value="none">Select a code</option>  
                </select>
                <BR>
                <BR>
                <select name='otherCode' onchange="showState(this.value)">  
                    <option value="none">Select an other code</option>  
                </select>
                <BR>
                <BR>
                <!-- Press this to submit form -->
                <INPUT TYPE="SUBMIT" VALUE="Submit"/>
            </CENTER>
        </FORM>
    </BODY>
</HTML> 
```

**PullCodes.java (servlet)**：

```
package com.firstservlet.alfresco;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import java.sql.*;

/**
 * Servlet implementation class PullCodes
 */
@WebServlet("/PullCodes")
public class PullCodes extends HttpServlet 
{
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public PullCodes() 
    {
        super();
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        String code = request.getParameter("code");
        String code2 = request.getParameter("code2");
        String otherCode = request.getParameter("otherCode");

        try
        {
            Class.forName("driverName").newInstance();  
            Connection con = DriverManager.getConnection("url","username","password");  
            Statement stmt = con.createStatement();  
            ResultSet rs = stmt.executeQuery("select id, descr from ref_codes");
            ResultSet rs2 = stmt.executeQuery("select id, descr from ref_other_codes");

            try
            {
                while(rs.next())
                {
                    //Is this correct?
                                    code+=("<option value=\"" + rs.getString(1) + "\">" + rs.getString(1) + " " + rs.getString(2) + "</option>");
                }

                //Closes the database connection
                stmt.close();
                con.close();
            }
            catch (Exception e)
            {
                System.err.println("Insertion Exception: " + e.getMessage());
            }       
        }
        catch (ClassNotFoundException e)
        {
            System.err.println("ClassNotFoundException: " + e.getMessage());
        } 
        catch (SQLException e)
        {
            System.err.println("SQLException: " + e.getMessage());
        }
            catch (Exception e)
        {
            System.err.println("Generic Exception: " + e.getMessage());
        }   
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        // TODO Auto-generated method stub
    }

} 
```

所以现在，在这一点上，我不确定如何从我的 html 页面访问该下拉列表元素。谷歌搜索，我没有看到任何似乎表明这已经完成的东西。此外，从我读到的内容看来，大多数时候 servlet 只是在处理来自 html/jsp 页面的信息。我现在正在做的是`code+=("<option value=\"" + rs.getString(1) + "\">" + rs.getString(1) + " " + rs.getString(2) + "</option>");`。那是对的吗？如果是这样，我如何将它与 html/jsp 页面链接？或者甚至无法在加载时访问该 html 页面并使用 servlet 填充它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:10:03.770

经典模式是：

```
Browser -- request --> Servlet -- forward --> JSP 
```

Servlet 用来向 JSP 传递信息的机制是通过将值放入实际请求中。

```
public void doGet(HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException {
    String id = req.getParameter("id");
    String name = getNameFromDBForId(id);
    req.setAttribute("name", name);
    RequestDispatcher rd = getServletContext().getRequestDispatcher("/page.jsp");
    rd.forward(request, response);
} 
```

然后你可以使用 JSP EL（表达语言）：

```
<html>
  <body>
    <h1>Hello ${name}</h1>
  </body>
</html> 
```

EL 表达式在多个位置`${name}`查找`name`键，其中一个是请求（您可以查找其他位置），并替换 JSP 中的值。

这适用于简单的标量、java bean、集合。

但这是如何将数据从 Servlet 获取到 JSP 的基本机制。查找 JSTL 标记，例如迭代和条件逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:40:01.380

你应该使用 JSTL 标签。scriptlet 是不可信的，并且很难维护。 [检查此链接](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL7.html)以获取 JSTL SQL 相关标签

# sql - 有没有办法找到比运行整个查询更快的返回结果数量

> ID：12631311
> 
> 赞同：1
> 
> 时间：2012-09-27T23:04:10.593
> 
> 标签：sql, postgresql

我猜答案是否定的，但在 Postgres 中有没有办法找到**比运行整个查询更快**的返回结果数量？换句话说，如果您的查询需要很长时间，如果您只想知道返回的行数，是否可以更快地完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:08:44.760

不确定它是否会给您带来您所追求的改进规模，但 a`select count()`总是比`select some fields`查询快，因为结果集不必返回给客户端。

但是，服务器仍然需要完成整个选择过程，因此部分操作将花费完全相同的时间。简而言之，`count()`当查询更复杂或结果集很短时，您赢得的时间会减少。

我希望这是有道理的...

另一方面，如果您担心查询的执行时间，您的第一站应该始终是[EXPLAIN](http://www.postgresql.org/docs/9.1/static/sql-explain.html)（也可以在[pgAdminIII中以高度可视化的形式提供，如此](http://www.pgadmin.org/)[处](http://www.postgresonline.com/journal/archives/27-Reading-PgAdmin-Graphical-Explain-Plans.html)所述）

![在此处输入图像描述](../Images/e15be34726d4cf24f248ddb2d7498975.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T01:03:34.363

`count()`是准确的，但出了名的慢，因为它必须验证行是否仍然存在。**[PostgreSQL 9.2 中新的仅索引扫描](https://wiki.postgresql.org/wiki/Index-only_scans)**是个例外——在最佳条件下并且如果有合适的索引可用。

*   [罗伯特哈斯在他的博客中写了关于快速计数的文章。](http://rhaas.blogspot.co.at/2011/10/fast-counting.html)

**如果**您的查询从表中检索所有行
**并且**您的[统计信息是最新的](http://www.postgresql.org/docs/current/interactive/sql-analyze.html)
**并且**您的结果不必是 100% 准确的（自上次以来的更改`ANALYZE`），则有一个更快的快捷方式：

```
SELECT reltuples::bigint AS estimate
FROM   pg_class
WHERE  oid = 'myschema.mytable'::regclass; 
```

此相关答案中的更多详细信息：

*   [在 PostgreSQL 中发现表的行数的快速方法](https://stackoverflow.com/questions/7943233/fast-way-to-discover-the-row-count-of-a-table/7945274#7945274)

否则，`count(*)`是你最好的选择。不要忘记删除所有其他`SELECT`项目和`ORDER BY`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:05:58.280

看看`count()`函数：[http ://www.postgresql.org/docs/8.2/static/functions-aggregate.html](http://www.postgresql.org/docs/8.2/static/functions-aggregate.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T23:06:12.527

是的，使用 SELECT COUNT(*) 而不是 SELECT [一堆字段]。

# ruby-on-rails - JPEG 的背景颜色，同时使用 ImageMagick/Paperclip 保持 PNG 的透明度

> ID：12631312
> 
> 赞同：2
> 
> 时间：2012-09-27T23:04:18.940
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我正在使用[Paperclip](https://github.com/thoughtbot/paperclip)在 Rails 应用程序中调整照片的大小。有的不是方形图片，所以加了边框。我希望 PNG 图片保持透明背景，而 JPEG 图片保持红色背景。

使用该`-background transparent`选项似乎适用于 PNG，但会为 JPG 添加黑色边框。

[按照推荐](http://www.imagemagick.org/script/command-line-options.php#background)添加`-fill red`选项并没有太大变化，并且仅在 JPEG 上使用，但也会使 PNG 背景变为红色。`-background red`

我想知道我在这里缺少什么。或者有没有办法根据输入文件格式有条件地传递选项？

我使用的命令行是：

`convert original.jpg -resize "200x200" -background transparent -fill red -gravity center -extent 200x200 result.jpg`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:29:53.987

我会尝试从中派生一个自定义处理器`Paperclip::Processor`并让其`make`方法修改每种情况的设置，然后运行`super`​​. 看看[http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Processor](http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Processor)

# mysql - 从 SQL 查询到应用程序代码的回溯？

> ID：12631315
> 
> 赞同：6
> 
> 时间：2012-09-27T23:04:34.830
> 
> 标签：mysql, ruby-on-rails, logging, performance-testing, backtrace

有没有办法在 Rails 开发日志中找到哪一行代码生成了 MySQL 语句？

为了进行一些性能优化，我想找出我的应用程序的哪个部分正在创建哪些 MySQL 查询。当我查看我的日志时，我看到在我所做的每个 Web 请求上都有数百个查询闪烁，我需要找出它们来自哪里。

我正在考虑在日志输出中添加一些变量，例如`____FILE____`和。`____LINE____`

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T15:52:57.773

[https://github.com/lightyear/sql-logging](https://github.com/lightyear/sql-logging)为您提供每个 SQL 查询的回溯以及一堆有用的统计信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:19:53.330

你有几个选择。这些选项都不会以与获取 Ruby 错误回溯相同的方式为您提供回溯，但它们将为您提供所需的工具和信息，以准确追踪 SQL 查询的来源。

1.  您的典型 Rails 日志条目将如下所示：

    ```
    Started GET "/login" for 127.0.0.1 at Thu Sep 27 18:59:08 -0500 2012
      Processing by PublicController#index as HTML
      (40.9ms)  SELECT COUNT(*) FROM "studies" 
      (49.6ms)  SELECT COUNT(DISTINCT "activities"."whodiddit") FROM "activities" 
      (35.3ms)  SELECT COUNT(*) FROM "involvements" 
    ```

    我猜这就是您的数百个 SQL 查询发生的地方？

    ```
    Rendered partials/_faq.haml (6.1ms)
    Rendered public/index.html.haml within layouts/public (114.3ms)
    Completed 200 OK in 595ms (Views: 276.7ms | ActiveRecord: 151.6ms) 
    ```

    所以，在顶部你有 HTTP 动词`GET`和路由（`/login`在我的例子中），以及它来自的主机。之后，Rails 会告诉您哪个控制器+动作被触发。

    **注意：**如果您看到以该开头的行，则`Rendered...`表示您的视图正在渲染。渲染后出现的任何 SQL 查询都表明 SQL 查询正在您的视图中触发（例如，在您的控制器之外）。只是一件小事要考虑。根据视图调用的代码，触发 SQL 查询的实际行可能隐藏在助手、模型或视图代码调用的其他任何地方。

    ```
    Processing by PublicController#index as HTML 
    ```

    最后的`as HTML`位告诉您请求的格式，因此可能会在响应中使用哪种视图/格式。

    因此，这基本上告诉您，SQL 查询是作为 中的`index`操作的一部分触发的`PublicController`，或者作为触发该操作的结果该控制器呈现的视图之一。

2.  如果要解析的内容太多，您可以使用`debugger`命令在各个点停止输出，并允许您检查正在发生的事情。更多关于[调试器](http://railscasts.com/episodes/54-debugging-with-ruby-debug)的信息。

3.  您可以使用`Rails.logger.info "My info message"`or `Rails.logger.error "My error message"`（取决于您希望它在默认日志还是错误日志等中）直接在您的应用程序日志中输出内容。

# raspberry-pi - Raspberry pi raspbmc 显示屏在一段时间不活动后关闭

> ID：12631316
> 
> 赞同：2
> 
> 时间：2012-09-27T23:04:36.897
> 
> 标签：raspberry-pi, debian-based

希望有人能帮助我。

我有一个加载了 raspbmc 发行版的树莓派，通过 hdmi 连接到电视。没有连接鼠标或键盘，因为所有控制都由 iPad 应用程序完成。

一段时间不活动（如过夜）后，显示器关闭，音频仍然有效，但没有显示。如果我通过 ssh 连接，显示器会重新激活。

有什么办法可以阻止显示器关闭？

谢谢你的帮助。抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:13:00.210

请查看论坛的建议以使用 XBMC 或电视设置中的自定义计时器

[http://forum.stmlabs.com/showthread.php?tid=2953](http://forum.stmlabs.com/showthread.php?tid=2953)

# xcode4 - Xcode 4 界面生成器问题

> ID：12631319
> 
> 赞同：1
> 
> 时间：2012-09-27T23:04:49.180
> 
> 标签：xcode4, interface-builder

我在 Xcode 4 中的界面构建器有几个问题。我使用的是 Xcode 4.5，但问题甚至在我更新它之前就开始了。

我的第一个问题是，如果我编辑一个字段（例如，一个从不可编辑到可编辑的文本字段），它有时会消失。或者其他字段改变它们的位置。

我的第二个问题可能与第一个问题有关，即尺寸检查员看起来很奇怪，当我换一个检查员时，我习惯的尺寸检查员会在新检查员出现之前出现半秒钟。我有两个屏幕截图：

奇怪的尺寸检查员：

![奇怪的尺寸检查员](../Images/08560dbff2bc5ed77655dd9b0010bcd7.png)

和检查员之间切换期间的一个：

![切换期间的尺寸检查员](../Images/e0a8462164e2c6cc0900483893be7be9.png)

一个可能相关的问题是，如果我尝试通过“ctrl”拖动到.h 文件来自动创建插座，它只会创建@property，而不是@synthesize。当我开始这个项目时，它两者兼而有之。

另一个问题是，如果我重新定位对象，它们在我构建它时仍处于旧位置。但我认为这是一个不同类型的问题，因为我可以通过重新启动 Xcode 来解决这个问题。

除此之外，在 xcode 4 中使用界面构建器确实很慢，但据我所知，这是一般的事情。

我知道这是几个问题，但我认为它们可能是相互关联的，这就是我一起问它们的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:59:10.990

如果您想返回旧式大小检查器，只需在 XIB 的文件检查器中关闭**“使用自动布局”即可。**

# java - 如何在 Intellij Idea 上查看 Glassfish 日志

> ID：12631322
> 
> 赞同：5
> 
> 时间：2012-09-27T23:05:03.507
> 
> 标签：java, intellij-idea

我正在努力从**Netbeans**切换到**Intellij Idea**。**我对Netbeans**怀念的一件事是能够在 IDE 中实时查看**Glassfish服务器日志。**似乎有了 Idea，我需要进入文件系统并跟踪它们。

还有另一种我想念的方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T09:00:29.140

可以在`"Logs tab of the Glassfish Run/Debug configuration"`

![在此处输入图像描述](../Images/32fe05dc0c596f411058277a1cc6f214.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-22T19:15:24.500

这对我有用：-

1.  转到“运行/调试配置”部分
2.  转到“日志”选项卡
3.  点击“+”图标
4.  输入“别名”名称并输入与“日志文件位置”部分关联的服务器日志文件位置

[![添加 GlassFish 服务器日志](../Images/873da0d241602d52100ae1a62f203a17.png)](https://i.stack.imgur.com/ZVIu4.png)

# asp.net-mvc-3 - 授权的 ActionFilterAttribute

> ID：12631325
> 
> 赞同：4
> 
> 时间：2012-09-27T23:05:18.710
> 
> 标签：asp.net-mvc-3, security, authorization, action-filter

我需要在我的应用程序中实现一些授权机制。授权基于从客户端发送到服务器的对象。控制器中的每个动作都作为参数列表。基于此列表中对象的嵌套属性，我必须授予或拒绝对控制器操作的访问权限。我的第一种方法是使用自定义过滤器属性

```
public class CustomAuthAttribute : FilterAttribute,IAuthorizationFilter
{
    public void OnAuthorization(AuthorizationContext filterContext)
    {
        //SOME LOGIC HERE
    }
} 
```

但是，由于请求是 json 请求，我很难获取已发送对象的每个相关属性的值（我只能访问 json 值）。这就是为什么我认为我可以使用 ActionFilterAttribute 而不是 FilterAttribute。

```
 public class ActionFilterAuthorization: ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {

        var castedList = filterContext.ActionParameters["key"] as List<MyObject>;
        //logic here 

       //throw exception is access is not granted

    }
} 
```

问题是这是否是授权的好解决方案？也许检查动作内部的授权会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:49:28.807

安全性是一个[横切关注点](http://msdn.microsoft.com/en-us/magazine/gg232768.aspx)，因此过滤器和属性是它的理想场所。必须在每个操作中手动检查它会增加许多必须维护的额外代码，如果忘记它会增加安全风险。将其设为全局过滤器意味着它将始终被应用，这意味着您可以编写一个属性，如果他们不需要它，可能会免除一个动作/控制器，例如 AllowAnnoymous 等，请[在此处输入链接描述](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)。

我为 MVC3 找到的关于安全性的最佳一般文章是这篇[http://www.codeproject.com/Articles/288631/Secure-ASP-NET-MVC3-applications](http://www.codeproject.com/Articles/288631/Secure-ASP-NET-MVC3-applications)

# php - 如何从 CKEditor 中删除高级选项卡 - 所见即所得

> ID：12631327
> 
> 赞同：14
> 
> 时间：2012-09-27T23:05:27.667
> 
> 标签：php, javascript, wysiwyg

[来自http://CKEditor.com](http://CKEditor.com)的所见即所得编辑器有太多按钮，对许多用户来说很混乱。所以我决定删除不必要的标签和按钮。所以我想从图像上传器中删除高级选项卡。有什么建议怎么做吗？

![在此处输入图像描述](../Images/e5be5a67e081b0a0e15230ada69e3d0f.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-28T20:12:07.453

似乎有两种方法可以做到这一点；

1：编辑您的 CKEditor 配置定义（config.js）：

```
config.removeDialogTabs = 'image:advanced'; 
```

记住; 配置设置区分大小写。

2：您当然也可以在线执行此操作，以便编辑器参考：

```
CKEDITOR.replace( 'editor_kama',
{  //                  ^---Editor Id goes here
    removeDialogTabs : 'image:advanced'
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T05:54:37.207

在**plugins/images/dialog/image.js中试试这个**

```
id : 'advanced',
               label : editor.lang.common.advancedTab,
               hidden : true,
               elements : 
```

添加 hidden : true 应该可以。或者你可以试试：

```
yourDialogDefinition.getContents('advanced').hidden=true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-29T11:00:52.673

看来它`config.removeDialogTabs = 'image:advanced';`不再起作用了——或者至少它对我不起作用。[但是如果官方文档中有关于如何编辑对话框的说明](http://docs.ckeditor.com/#!/guide/dev_howtos_dialog_windows)。根据这些说明，我使用此解决方案：

```
CKEDITOR.on('dialogDefinition', function (ev) {
    var dialogName = ev.data.name,
    dialogDefinition = ev.data.definition;

    if (dialogName === 'image') {
        dialogDefinition.removeContents('advanced');
        dialogDefinition.removeContents('link');
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-05T14:18:02.417

由于 removeDialogTabs 不再起作用，隐藏选项卡的最新方法很简单：

```
linkShowAdvancedTab = false 
```

在配置中。这至少在 4.13 版本中有效。

# objective-c - 使用 dispatch_once 为类层次结构创建单例类

> ID：12631329
> 
> 赞同：8
> 
> 时间：2012-09-27T23:05:36.897
> 
> 标签：objective-c, multithreading, singleton, class-hierarchy

我有 2 个继承自“MyClass”的子类，每个子类都应该是一个单例。

当我没有任何其他类继承时，我使用此模式获取静态实例：

```
+ (MyClass *)getInstance
{
    static dispatch_once_t once;
    static MyClass *instance;

    dispatch_once(&once, ^{
        instance = [[MyClass alloc] init];
    });

    return instance;
} 
```

这很好用。现在，如果我添加两个新的子类，FirstClass 和 SecondClass，它们都继承自 MyClass，我如何确保获得各自的 ChildClass？

```
dispatch_once(&once, ^{
    // No longer referencing 'MyClass' and instead the correct instance type
    instance = [[[self class] alloc] init];
});

FirstClass *firstClass = [FirstClass getInstance]; // should be of FirstClass type
SecondClass *secondClass = [SecondClass getInstance]; // should be of SecondClass type 
```

执行上述操作意味着我总是能取回我将 1st 实例化为我的第二类类型的任何类：

```
first: <FirstClass: 0x884b720>
second: <FirstClass: 0x884b720>
// Note that the address and type as identical for both. 
```

在不向每个子类添加方法的情况下创建相应的子类单例的最佳方法是`getInstance`什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T02:08:20.937

除非你有充分的理由，否则通常应该避免子类化单例。它造成了一个非常混乱的局面。如果你创建一个单例`MyClass`，你可以创建一个单例`FirstClass`吗？由于`FirstClass`必须始终在任何可用的地方`MyClass`可用（由 Liskov），现在有三个“单例”`MyClass`对象。现在 ObjC 对单例非常松散，这是一件好事，但这仍然很奇怪。

好的，说了这么多，你的问题呢？首先是解决方案，然后是答案。如上所述，解决方案`MyClass`可能不应该是单例。摆脱`getInstance`超类，只需在子类中定义它。

正在发生的事情的答案在您的`dispatch_once`. 在所有情况下，您都传递了相同的静态`once`令牌。对于给定的令牌，`dispatch_once`将运行不超过一次*。*解决这个问题的唯一方法是为每个类传递不同的令牌，我不知道有一种方便的方法可以做到这一点，而无需在每个文件中复制 dispatch_once 代码。您可以尝试`once`为每个子类创建不同的标记，但这可能比仅仅复制`sharedInstance`方法更麻烦和代码。

顺便说一句，不要叫它`getInstance`。“get”在ObjC中有特殊含义，你这里不是那个意思，所以比较混乱。这通常称为`sharedInstance`，或者`sharedSomething`在“某事”是您的类的情况下更好。如果您确实是说应该有 a`MyClass`并且应该有 a`FirstClass`并且应该有 a `SecondClass`，那么您可以`sharedInstance`在所有三个中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:46:11.820

你知道单身狗很粗糙，对吧？许多单身人士是一个更大的问题。谨慎结束。

* * *

您可以只使用`dispatch_once`创建基本单例。那么您的基础可以保存其派生类型的映射（例如字典{key:ClassName|value:Instance}）。

您正在使用的`dispatch_once`建议这将在多线程上下文中使用。在这种情况下，您需要使用互斥锁来保护与字典的交互。

那么来自子类的消息将根据消息传递类 ( `self`) 确定要查找的类（如有必要，创建该实例）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-08T08:01:34.083

像这样`id`在你的第一类中使用`myClass`

```
+(instancetype)sharedInstance 
{
    static id sharedInstance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[[self class] alloc] init];
    });
    return sharedInstance;
} 
```

我认为这应该有效

# java - 初始化单链表 Java

> ID：12631333
> 
> 赞同：2
> 
> 时间：2012-09-27T23:05:48.670
> 
> 标签：java, list, initialization, adt

我正在尝试将类 NumLinkedList 中的 NumList 抽象数据类型实现为单链表。

```
public class NumLinkedList implements NumList
{

Node head;
int nItem;

private class Node
{
    public Node next;
    public double value;
    public Node(double i, Node j)
    {
        value = i;
        next = j;

    }

}

public NumLinkedList()
{
    head = null;
    nItem = 0;

} 
```

是我的初始化，我在使用以下方法时遇到了问题。

```
public void print()
{
    Node currNode = head;
    while(currNode.next != null)
    {
        currNode = currNode.next;
        System.out.println(currNode.value);
    }

}

public int size()
{
    int size = 0;
    Node currNode = head;
    while(currNode.next != null)
    {
        currNode = currNode.next;
        size++;
        nItem++;

    }
    return size;

}

public void insert(int i, double value)
{
    if( i < 0)
    {
        System.out.println("Error. out of bounds.");
    }
    if ( i > size())
    {
        Node currNode = head;
        for(int j = 0; j < i; j++)
        {
            currNode = currNode.next;
        }
        currNode.next = new Node(value,null);
    }

    if ( i <= size())
    {
        Node currNode = head;
        for(int j = 0; j < i-1; j++) // this moves CurrNode to the i-1th node
        {
            currNode = currNode.next;
        }
        currNode.next = new Node(value,currNode.next);
    }

    nItem++;
} 
```

当我运行我的测试代码时，

```
public static void main (String[] args)
{
    NumLinkedList test;
    test = new NumLinkedList();

    //System.out.println("this is how many initial items the initialized list has");
    //System.out.println(test.size());
    test.insert(1, 0.1);
    System.out.println("have tried to insert value 0.1 @ position 1, that is the first element in list.");
    test.print();
    System.out.println("tried print(). did it work?");
    test.insert(4, -1); 
```

我在

```
test.insert(1, 0.1); 
```

, 指

```
if ( i > size()) 
```

和

```
while(currNode.next != null) 
```

由于我也未能初始化我的数组 ADT，我相信我的列表 ADT 也被错误初始化。在谷歌上很难找到合适的例子，有没有关于 ADT 初始化的参考资料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:21:09.953

您的问题不在于初始化，这很好，而在于方法本身。

问题是你正在初始化你的`head`to `null`，但是，无论是 in`print`还是 in `size`，你都在做`currNode = head`，这也使得它`null`，然后循环 on `currNode.next`。那会在那里扔一个`NullPointerException`权利。您需要转到所有方法并为限制情况添加特殊代码：

对于`print`：

```
if ( head == null )
    return; 
```

对于`size`：

```
if ( head == null )
    return 0; 
```

或者，您可以简单地用一个简单的语句替换整个`size`方法。`return nItem;`

对于`insert`：

```
if ( head == null )
{
    head = new Node(value,null);
    return;
} 
```

顺便说一句，在您的 中`insert`，您还需要一个`return`在您的第一个内部`if`，并且您需要将您的第三个替换`if`为一个`else`.

# c# - 使用 JSON.net 联合两个 JObject

> ID：12631338
> 
> 赞同：2
> 
> 时间：2012-09-27T23:06:27.693
> 
> 标签：c#, json, json.net

我要做的是将两个 JObject 与 JSON.net 库结合起来。一个例子是

```
JObject j = JObject.Parse("{'test':1,'blah':2}");
JObject b = JObject.Parse("{'test':2}"); 
```

将加入以形成等效于的 JSON 对象

```
{'test':2, 'blah':2} 
```

[本质上与jQuery 的扩展](http://api.jquery.com/jQuery.extend/)操作相同，但在 JSON.net 中。我似乎找不到一个简单的方法来做到这一点。

# sql - 如何使用 IN 查询匹配的电子邮件？

> ID：12631341
> 
> 赞同：2
> 
> 时间：2012-09-27T23:06:41.190
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql

给定一串电子邮件，例如：

```
emails = "atttt@bbb-inc.com, scott@sara.com, a@a.com, rasx@bo.com" 
```

通过一个查询，我想返回所有匹配的用户记录，其中：

```
User.rb (id,email) 
```

这是我的查询，但如果我将电子邮件设置为多个电子邮件，它不会返回结果：

```
User.where("email IN (?)", emails)
  User Load (1.0ms)  SELECT "users".* FROM "users" WHERE (users.deleted_at IS NULL) AND (email IN ('atttt@bbb-inc.com,, scott@sara.com, a@a.com, rasx@bo.com'))
 => [] 
```

有关如何更新此 User.where 查询以从提供的电子邮件中获取所有匹配用户的建议？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:31:40.937

首先，把`emails`变成一个数组：

```
emails = "atttt@bbb-inc.com, scott@sara.com, a@a.com, rasx@bo.com".split(', ') 
```

然后你可以调用：

```
User.where(:email => emails) 
```

# javascript - 使用 jcf 修改器时使选择框唯一

> ID：12631346
> 
> 赞同：0
> 
> 时间：2012-09-27T23:07:33.417
> 
> 标签：javascript

我已经得到了前端设计师设计的这个网站。当页面在浏览器中运行时，所有选择框都会重新设置样式。问题是我想显示以前选择的值，但如果我不能为修改后的选择分配唯一的 ID，我不知道该怎么做。这是修改后的下拉html：

```
<div unselectable="on" style="-webkit-user-select: none; -webkit-tap-highlight-color:
rgba(255, 255, 255, 0); width: 66px; " class=" select-area select-modify_select  
select-focus ">
 <span class="left"></span>
  <span class="center">B.N.S.</span>
  <a class="select-opener"></a>
</div>

<select name="ach_bank" id="ach_bank" class="modify_select jcf-hidden" 
style="-webkit-tap-highlight-color: rgba(255, 255, 255, 0); ">

                    <option value="">Select...</option>
                    <option value="B.N.S.">B.N.S.</option>                
                    <option value="F.G.B.">F.G.B.</option>                
                    <option value="N.C.B.">N.C.B.</option>                
                    <option value="R.B.C.">R.B.C.</option>                
</select> 
```

如您所见，常规选择框已隐藏，并创建了修改后的下拉菜单。修改选择框的代码在这里：

```
// custom select module
jcf.addModule({
name:'select',
selector:'select',
defaultOptions: {
    handleDropPosition: true,
    wrapperClass:'select-area',
    focusClass:'select-focus',
    dropActiveClass:'select-active',
    selectedClass:'item-selected',
    disabledClass:'select-disabled',
    valueSelector:'span.center',
    optGroupClass:'optgroup',
    openerSelector:'a.select-opener',
    selectStructure:'<span class="left"></span><span class="center"></span>
            <a  class="select-opener"></a>',
    selectPrefixClass:'select-',
    dropMaxHeight: 200,
    dropFlippedClass: 'select-options-flipped',
    dropHiddenClass:'options-hidden',
    dropScrollableClass:'options-overflow',
    dropClass:'select-options',
    dropClassPrefix:'drop-',
    dropStructure:'<div class="drop-holder"><div class="drop-list">
            </div></div>',
    dropSelector:'div.drop-list'
}, 
```

但是，我不知道如何修改脚本以为每个创建的选择创建一个唯一的 ID。

我知道修改将属于这一行：

```
selectStructure:'<span class="left"></span><span class="center" **id="someid"**></span>
            <a  class="select-opener"></a>', 
```

如果我在代码中放置一个 id，那么所有修改后的选择都具有相同的 id。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:58:25.087

当我从外部来源收到前端标记时，我遇到了同样的问题。事实证明，这是一个简单的解决方案！

在 jQuery 中，目前是这样写的：

```
selector:'select', 
```

它选择所有“选择”元素并将样式应用于每个元素。为了解决这个问题，在这一行添加一个类名或 id，如下所示：

```
selector:'select.classname', 
```

或者

```
selector:'select#idname', 
```

然后只需将类名或 id 应用于您希望应用自定义样式的选择字段。

# coldfusion - ColdFusion 9 动态方法调用

> ID：12631347
> 
> 赞同：5
> 
> 时间：2012-09-27T23:07:38.863
> 
> 标签：coldfusion, coldfusion-9, cfc

我正在尝试找出`<cfscript>`在 ColdFusion 9 中调用动态方法的正确语法。我尝试了许多变体并进行了很好的搜索。

`<cfinvoke>`显然是我想要的标签，但遗憾的是我不能在我的纯`cfscript`组件中使用它，因为它是在 ColdFusion 10 中实现的。

即[coldfusion 9动态调用方法](https://stackoverflow.com/questions/11032991/coldfusion-9-dynamically-call-method)

我在我的 CFC 中尝试了以下操作：

```
/** Validate the method name **/
var resources = getResources();
if (structKeyExists(variables.resources, name)) {
  variables.resourceActive[name] = true;
  var reflectionMethod = resources[name];
  var result = "#reflectionMethod.getMethodName()#"(argumentCollection = params);
} 
```

的返回值`reflectionMethod.getMethodName()`是我要调用的方法名称。它是 100% 返回正确的值（方法的名称），其中该方法被正确定义和访问，

我的错误是该行的语法错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T23:30:22.857

你不想得到方法*名*，你想得到*实际的方法*，例如：

```
function getMethod(string method){
    return variables[method];
} 
```

调用，因此：

```
theMethod = getMethod(variableHoldingMethodName);
result = theMethod(); 
```

不幸的是，不能简单地这样做：

```
result = getMethod(variableFoldingMethodName)(); 
```

或者：

```
result = myObject[variableFoldingMethodName](); 
```

因为 CF 解析器不喜欢括号或方括号的双重化。

我建议的方法需要注意的是，它将方法从 CFC 中提取出来，因此它将在调用代码的上下文中运行，而不是在 CFC 实例中运行。根据方法中的代码，这可能很重要，也可能无关紧要。

另一种选择是将静态命名的方法注入对象，例如：

```
dynamicName = "foo"; // for example
myObject.staticName = myObject[dynamicName];
result = myObject.staticName(); // is actually calling foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:13:33.727

假设该方法在您当前的（变量）范围内，您可以尝试：

```
var result = variables[reflectionMethod.getMethodName()](argumentCollection = params); 
```

# android - 如何删除“调用需要 API 级别”错误？

> ID：12631348
> 
> 赞同：58
> 
> 时间：2012-09-27T23:07:38.050
> 
> 标签：android, eclipse

我在 Eclipse 中收到此错误：调用需要 API 级别 14（当前最小值为 8）：android.app.ActionBar#setHomeButtonEnabled

这是代码：

```
if(android.os.Build.VERSION.SDK_INT>=14) {
    getActionBar().setHomeButtonEnabled(false);
} 
```

在清单中：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="14" /> 
```

如何消除此错误？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-09-27T23:10:11.663

在方法签名上方添加一行`@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)`，`Build.VERSION_CODES.ICE_CREAM_SANDWICH`计算结果为 14，即 Ice Cream Sandwich 的 API 版本代码。

像这样：

```
@TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
public void yourMethod() {
    if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        getActionBar().setHomeButtonEnabled(false);
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-10-10T16:40:11.917

注意：接受的[答案](https://stackoverflow.com/a/12631367/6287240)已过时。

在`Android Studio 3.0 Beta 7`您不再需要`@TargetApi`注释。
看来 lint 检查现在更智能了。

所以这就足够了：

```
public void yourMethod() {
    if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        getActionBar().setHomeButtonEnabled(false);
    }
} 
```

# jquery - 根据以前的下拉列表更新下拉列表

> ID：12631350
> 
> 赞同：1
> 
> 时间：2012-09-27T23:07:58.767
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3

除了我的 MVC3 项目，我们设计了一个页面，分别包含 3 个安全问题和答案（下拉列表中大约 10 个）。可以从下拉列表中选择问题，答案将填写在其下方的文本框中。

设计：假设用户选择 question1 作为（10 个问题中的 1 个）。第二个下拉菜单应该只显示 9 个问题（跳过第一个问题）。以同样的方式，第三个问题将只有 8 个选项。

同样，如果用户将索引更改为 0（表示选择问题）。他删除的那个问题应该出现在其他下拉列表中。

请帮助设计此页面。我尝试使用 JQuery，但这并没有帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T01:04:27.383

试试这个代码

```
$(function() {
    // Load all the dropdowns
    $('[id^=select]').html($('.template').html());
    // This array Holds the Objects
    var arr = ['select1', 'select2', 'select3'];
    // Declare a array where you store the selections
    var arrSelect = {
        'select1': '0',
        'select2': '0',
        'select3': '0'
    };

    $('select').on('change', function() {
        var currID = $(this).prop('id');
        // Set the Current selection
        arrSelect[currID] = $(this).val();
        // Iterate Thru each dropdown 
        $.each(arr, function(i) {
            var temp = arrSelect[arr[i]];
            // Clone the template
            var $clone = $('.template').clone();
            // Remove Questions from template based on selected
            // values in other select's
            $.each(arrSelect, function(index, value) {
                if (value != 0 && value != temp) {
                    $clone.find('option[value=' + value + ']').remove();
                }
            });
            // If not Current select rewrite its 
            // contents of the select
            if (arr[i] != currID) {
                //console.log('#' + arr[i] + ' :: ' + $clone.html());
                $('#' + arr[i]).html('').html($clone.html());
                $('#' + arr[i]).val(temp);
            }
        });
    });
})​ 
```

[工作演示](http://jsfiddle.net/sushanth009/a3yrQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:40:24.653

我会使用[Knockout](http://knockoutjs.com/)。基本上创建一个返回可用问题的 JavaScript Viewmodel。

我有[类似的要求](https://stackoverflow.com/questions/11092291/how-to-create-linked-dropdowns-sharing-a-single-list-and-ensure-each-value-can-o)，以下工作。

[http://jsfiddle.net/mbest/wfW97/](http://jsfiddle.net/mbest/wfW97/)

这是供参考的代码：

```
function ViewModel() {
    var self = this;
    self.colors = ['red','orange','yellow','green','blue','indigo','violet'];
    self.selections = [];
    ko.utils.arrayForEach(self.colors, function() {
        self.selections.push(ko.observable());
    });
    self.selfAndUnselectedColors = function(index) {
        var selfColor = self.selections[index]();
        return ko.utils.arrayFilter(self.colors, function(color) {
            return color === selfColor || !ko.utils.arrayFirst(self.selections, function(sel) {
                return color === sel();
            });
        });
    }
}

ko.applyBindings(new ViewModel()); 
```

和 HTML：

```
<div data-bind="repeat: colors.length">
    <select data-bind="options: selfAndUnselectedColors($index), optionsCaption: 'select a color', value: selections[$index]"></select>
</div>​ 
```

# jquery - 页面加载......每个会话打开新标签

> ID：12631351
> 
> 赞同：0
> 
> 时间：2012-09-27T23:08:06.647
> 
> 标签：jquery, onload

当我打开“站点 A”时，newtab 应该会自动打开，其中包含“站点 B”。

这也是，每次会话一次。

[http://jquerybyexample.blogspot.com/2012/05/open-link-in-new-tab-or-new-popup.html](http://jquerybyexample.blogspot.com/2012/05/open-link-in-new-tab-or-new-popup.html)

上面的链接，显示打开新标签的 onlick 事件。

但我喜欢在页面加载事件中使用 cookie 会话。

请帮我。

谢谢萨罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:22:47.353

不确定“使用 cookie 会话”是什么意思，但应该这样做：

```
$(document).ready(function() {
    window.open('http://www.google.com/')
}); 
```

更多信息`window.open`：[https ://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

但实际上，您不需要文档就绪代码。您可以在`head`页面上的元素中执行此操作：

```
<script type="text/javascript">
    window.open('http://www.google.com/');
</script> 
```

不过，浏览器的弹出窗口拦截器（如果有的话）可能会惹恼你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:24:24.353

大多数现代浏览器默认配置为在新选项卡中打开以前的新窗口。

要轻松打开新标签，您可以使用该`window.open`方法。

```
$(document).ready(function(){
    window.open('http://google.com');
}); 
```

[https://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

例如，请参阅[http://jsfiddle.net/39KZ9/18/](http://jsfiddle.net/39KZ9/18/)

但是，如果用户没有提供触发事件的输入（例如单击），浏览器会将其识别为恶意行为，并且几乎肯定会将新选项卡视为弹出窗口并阻止请求。

# c# - 在 .NET 4.0 应用程序域上加载面向 .NET 4.5 的程序集

> ID：12631353
> 
> 赞同：15
> 
> 时间：2012-09-27T23:08:49.060
> 
> 标签：c#, .net, .net-4.0, .net-4.5, assembly-loading

假设系统安装了 .NET 4.0 和 .NET 4.5。

是否可以从针对 .NET 4.0 编写的程序集加载和使用 .NET 4.5 程序集？

简而言之，我可以`Assembly.Load`从 .NET 4.0 代码调用以加载 .NET 4.5 目标程序集吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T23:16:43.483

假设系统为 .NET 4.0 和 .NET 4.5：

如sehe链接的marcgravell[博客中所述](http://marcgravell.blogspot.nl/2012/09/iterator-blocks-missing-methods-and-net.html)

> 4.5 是 GAC 中 4.0 之上的就地 Over-the-top 安装；安装 4.5 后，4.0 将与 4.5 程序集一起运行

然后从针对 4.0 的 .NET 代码（由 4.0 编译器编译）调用 Assembly.Load，实际上将使用 4.5 框架实现运行，所以我看不出它无法加载 4.5 程序集的任何原因。

margravell 指出，当您尝试在仅安装 4.0 的系统上运行 .NET 4.5 编译代码时会出现问题，因为 yield return/break 迭代器的实现会导致缺少方法引用。但这不应该影响你。

# java - Apache HttpClient 摘要身份验证失败

> ID：12631354
> 
> 赞同：1
> 
> 时间：2012-09-27T23:08:57.550
> 
> 标签：java, rest, httpclient, http-status-code-401, digest-authentication

我正在尝试使用 HttpClient 库执行摘要身份验证，但我不断收到：`HTTP/1.1 401 Unauthorized`.

当我尝试来自 Firefox 的请求时，它工作正常并且我得到正确的响应，所以我知道服务器身份验证工作正常。

**更新**：移动工作代码来回答。

![在此处输入图像描述](../Images/b1b583885553ef9218a3d1dade8ea349.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:27:53.757

以下代码对我有用

```
import java.util.Random;

import org.apache.http.HttpEntity;
import org.apache.http.HttpHost;
import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.AuthCache;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.auth.DigestScheme;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.impl.client.BasicAuthCache;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.util.EntityUtils;

/**
 * A simple example that uses HttpClient to execute an HTTP request against a
 * target site that requires user authentication.
 */
public class RestClient {

public static void main(String args[]) throws Exception {

    HttpHost targetHost = new HttpHost("localhost", 8001, "http");
    DefaultHttpClient httpclient = new DefaultHttpClient();

    final String userName = "admin";
    final String password = "password";

    httpclient.getCredentialsProvider().setCredentials(
            new AuthScope("localhost", 8001), 
            new UsernamePasswordCredentials(userName, password));   

    // Create AuthCache instance
    AuthCache authCache = new BasicAuthCache();
    // Generate DIGEST scheme object, initialize it and add it to the local
    // auth cache
    DigestScheme digestAuth = new DigestScheme();
    // Suppose we already know the realm name
    digestAuth.overrideParamter("realm", "some realm");
    // Suppose we already know the expected nonce value
    digestAuth.overrideParamter("nonce", "whatever");
    authCache.put(targetHost, digestAuth);

    // Add AuthCache to the execution context
    BasicHttpContext localcontext = new BasicHttpContext();
    localcontext.setAttribute(ClientContext.AUTH_CACHE, authCache);

    HttpGet httpget = new HttpGet("http://localhost:8001/rest/test");

    try {
        HttpResponse response = httpclient.execute(targetHost, httpget, localcontext);
        HttpEntity entity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        if (entity != null) {
            System.out.println("Response content length: " + entity.getContentLength());
        }
        EntityUtils.consume(entity);
    } finally {
        httpclient.getConnectionManager().shutdown();
    }
}
} 
```

# css - 使响应式幻灯片居中

> ID：12631358
> 
> 赞同：0
> 
> 时间：2012-09-27T23:09:21.543
> 
> 标签：css, slideshow, responsive-design, centering

我正在使用 RefineSlide 响应式幻灯片，但我无法将其居中，它总是贴在我页面的左侧。

```
#slideshow{
position: relative;
width: 960px;
height:auto;
left: 50%;
margin-left: -480px;
} 
```

我已经尝试将上述内容添加到我的 CSS 中，尽管这成功地将其居中，但不幸的是它不再响应，因为当我在 iPhone 上测试时，幻灯片不适合屏幕。

```
#slideshow{
position: relative;
width: 100%;
height:auto;
} 
```

当我这样设计它时，它是响应式的......但坚持向左。我需要用这个 CSS 改变什么以使其居中并保持响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:16:44.473

这在某种程度上取决于您的其他标记，但总的来说这已经足够了：

```
#slideshow {
    margin: auto;
    width: Npx;
    /* also display: block if the element doesn't already have it */
} 
```

[**样品**](http://jsfiddle.net/xUzYt/)。

# php - PHP $_FILES 加载时为空

> ID：12631361
> 
> 赞同：0
> 
> 时间：2012-09-27T23:09:32.513
> 
> 标签：php

由于某种原因，我无法让 $_FILES 数组包含在我的表单中选择的上传。从我读到的表格看起来不错，并且所有其他变量都收到了。

每次我提交表单时，$_FILES 数组的 var_dump 都有 0 个条目。

对于这篇文章，为了简洁起见，我删除了其他字段，因为它们正在工作。

```
<form name="addFact" id="addFact" action="add_fact.php" method="post" enctype="multipart/form-data" onsubmit="return validateStatus();" >
    <input type="file" id="myImage" name="myImage" style="width:450px;"/><br />
</form> 
```

重新加载后，我使用以下命令检查 $_FILES 数组：

```
echo "- Files - <br>\n";
echo "<pre>\n";
var_dump($_FILES);
echo "</pre>\n"; 
```

但每次结果都是空的：

文件：数组（0）{}

**更新** 抱歉，没有意识到验证状态仍然存在..但这是检查是否提交表单的 JS

```
function validateStatus() {
    jQuery("#addFact").validationEngine({scroll: false});
    var valid = $("#addFact").validationEngine('validate');
    if (valid == true) {
        submitForm('addFact');
    }
    return false;
} 
```

虽然我怀疑这是问题的一部分，因为表单成功提交，所有属性仍然设置，包括文件字段等。

哦..和大声笑..另一个功能.. :) ...这是submt表单功能：

```
function submitForm(formName,message) {
    $.ajax({
        data: $("#" + formName).serialize(),
        type: $("#" + formName).attr('method'),
        url: $("#" + formName).attr('action'),
        success: function(response) {
            $('#load_target').html(response);
        }
    });
    return false;
} 
```

load_target 是索引页面上的 div，我正在使用 ajax 将此 php 文件加载到其中。- 希望现在一切都清楚了:)

此外，为了保护表单的任何不发布任何内容.. 这是帖子 var_dump 的结果

```
array(11) {
  ["action"]=>  string(4) "save"
  ["category"]=>  string(1) "3"
  ["startDate"]=>  string(10) "09-27-2012"
  ["expireDate"]=>  string(10) "11-27-2012"
  ["title"]=>  string(10) "Test Title"
  ["subtitle"]=>  string(10) "Test Title"
  ["include_image"]=>  string(3) "yes"
  ["img_loc"]=>  string(4) "left"
  ["img_size"]=>  string(2) ".3"
  ["scroll"]=>  string(1) "1"
  ["fact_text"]=>  string(27) "there's something about her"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T22:42:43.000

如果您使用的是 jquery mobile，请将 data-ajax="false" 添加到表单标签

# c# - Windows RT 和 c#

> ID：12631363
> 
> 赞同：8
> 
> 时间：2012-09-27T23:09:37.567
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, windows-rt

我需要使用 C# 和 XAML 开发 Metro 风格的应用程序，它必须在 Windows RT 设备和完整的 Windows 8 操作系统上工作。所以我被允许只使用 WinRT 而没有任何 .net 框架程序集。我读过这个问题

[Microsoft Surface 平板电脑：为两种设备编写应用程序？](https://stackoverflow.com/questions/11104657/microsoft-surface-tablet-writing-apps-for-both-devices)

这个非常有用的帖子：http: [//blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm- woa.aspx](http://blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx)，但我仍然有疑问：当我什至创建一个空白 Metro 风格应用程序项目时，我有 Metro 风格的 .NET 组件。我是自己删除了它们还是我做错了什么？如果需要使用移植到 WinRT 或 mvvvm light 之类的 Prism fw，我应该怎么做？他们是否允许我仅在本机 WinRT 上开发 WOA 应用程序？这些时刻对我来说并不清楚。

你能解释一下我在 ARM 上的 Windows RT 和 Windows 有什么区别吗？我只需要使用 WinRT（没有 .net）来开发 WindowsRT 操作系统吗？

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T14:53:11.617

让我以最直接的方式回答你。如果您打开一个空白 XAML/C# Windows 应用商店项目。该项目将在 Windows RT (ARM) 和 Windows 8 (x86/x64) 上运行。那是因为它是为实现这一目标而构建的。仅仅因为您拥有 .Net Framework 的感觉，不用担心 - 您正在编写一个跨平台的应用程序。

现在，注意事项。由于 C#，您使这个答案变得容易。CPP 开发人员没有相同的保证，因为他们可以做一些编码来破坏这种兼容性。在 C# 中并非如此。如果您编写的代码编译为“任何 CPU”，那么我所说的是正确的。

如果您引入需要构建从“任何 CPU”更改为其他内容的内容（例如 Bing 地图控件）。Windows 应用商店将允许您以相同的名称提交应用程序的三个版本 - 每个平台一个版本 - 用户永远不会知道有多个版本。

在最后一个例子中，你仍然支持每个平台，你只需要指定三个不同的构建来完成它——你的代码可能根本不会改变！在大多数情况下，您都支持它们。如果你引入了第三方库——比如 MVVMlite——如果你可以构建到任何 CPU，你仍然可以。大多数图书馆都很酷。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T23:18:52.973

说您不能在 Metro 风格应用程序中使用 .net 框架并不完全正确。更准确地说，有一个版本的 .net 框架仅适用于 Metro 应用程序。如果您的程序集不是使用此版本的 .net 框架构建的，它们将不适用于 Metro。这个版本的 .net 框架可以在 .86 和 arm 上运行。还有一个用于 Metro 应用程序的 MVVM Light 版本。 [在这里下载。](http://mvvmlight.codeplex.com/releases/view/90815) 有关为 arm 开发的详细信息，请参见[此处](http://blogs.msdn.com/b/jasonz/archive/2012/06/12/what-you-need-to-know-about-developing-for-windows-on-arm-woa.aspx)。

> 无论您使用的是 JavaScript、C++、Visual Basic 还是 C#，如果您已经构建了面向 x86/x64 的 Metro 风格应用程序，那么您已经知道如何构建面向 ARM 的应用程序。您使用相同的 Metro 风格项目模板，这些模板为构建应用程序提供了起点。

编辑：正如 Jerry 所指出的，如果它们是用 C++ 编写的，您可能必须针对不同版本的库编译您的应用程序，但这是一个单独构建的问题，而不是必须进行额外的开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T16:31:13.193

如果您使您的库可移植类库，您可以将它们用于桌面、metro 和电话应用程序（以及 xbox）。您可以在启动库时或在项目的属性中选择此项。它使在 mircrosoft 生态系统中编写跨平台应用程序变得更加容易。

# jquery - jquery datetimepicker 默认没有时间

> ID：12631365
> 
> 赞同：1
> 
> 时间：2012-09-27T23:09:46.397
> 
> 标签：jquery, jquery-ui, jquery-plugins, datetimepicker

[jquery datetimepicker](http://trentrichardson.com/examples/timepicker/)中是否有一个设置，这意味着如果我只选择一个日期，那么它只显示日期。

默认情况下，当您单击显示的日期时：“18/09/2012 00:00”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:19:47.040

是的，`alwaysSetTime`选项：

> 默认值：true - 始终在内部设置时间，即使在用户选择时间之前也是如此。

```
$("input").datetimepicker({
    alwaysSetTime: false
}); 
```

**示例：http:** [//jsfiddle.net/WP29E/219/](http://jsfiddle.net/WP29E/219/)

# ruby-on-rails - 为 SimpleForm 和 rails 定义动作

> ID：12631366
> 
> 赞同：1
> 
> 时间：2012-09-27T23:10:02.057
> 
> 标签：ruby-on-rails, simple-form

我收到了这个奇怪的错误，好像 SimpleForm 甚至没有安装：

```
undefined method `simple_form_for' 
```

SimpleForm IS 在我的 gemfile 中，我已经安装了：

```
Using simple_form (2.0.2) 
```

我在 Pow 服务器上运行，所以它每次都会重新启动。

```
#events_controller.rb
class admin::EventsController < ApplicationController
  def new
    @event = Event.new
  end

#Event.rb
class Event
  include Mongoid::Document
  field :summary
  field :start_date
  field :end_date
end

#new.html.haml
= simple_form_for [:admin, @event] do |f|
  = f.input :summary
  = f.input :start_date
  = f.input :end_date 
```

任何想法为什么看起来 SimpleForm 甚至没有安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:19:30.897

安装 gem 后是否运行了生成器？在您的控制台中，您需要运行以下命令：

```
rails generate simple_form:install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T06:40:42.823

我尝试了命令： rails generate simple_form:install

而且 - 它没有运行。相反，输出看起来像是我给 rails 一个格式错误的命令行，它返回了一个使用文件的副本。

然后，在 RubyMine 中，我再次尝试了 - 这次得到了错误回溯 - 第一行如下所示：

```
/home/user1/.rvm/gems/ruby-2.0.0-p247/gems/railties-4.0.0/lib/rails/generators/base.rb:265:in `const_defined?': wrong constant name SimpleForm:installGenerator 
```

注释掉 base.rb 中的第 265-269 行后：

```
#  if last && last.const_defined?(last_name.camelize, false)
#     raise Error, "The name '#{class_name}' is either already used in your application " <<
#            "or reserved by Ruby on Rails. Please choose an alternative and run "  <<
#            "this generator again."
#  end 
```

再次运行命令，我得到：

```
/home/user1/.rvm/rubies/ruby-2.0.0-p247/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /home/user1/RubymineProjects/TravelAid/bin/rails generate generator simple_form:install -s
      create  lib/generators/simple_form:install
      create  lib/generators/simple_form:install/simple_form:install_generator.rb
      create  lib/generators/simple_form:install/USAGE
      create  lib/generators/simple_form:install/templates

Process finished with exit code 0 
```

这看起来不错，但我还没有回去检查 simple_form 是否有效。

在 lib/generators 下，我有：

```
simple_form
  templates
  simple_form_generator.rb
  USAGE
simple_form.install
  templates
  simple_form.install_generator.rb  (created about 18 minutes ago - consistent with new)
  USAGE 
```

我在 Rubymine 中运行 Rails 4.0.0 和 ruby​​-2.0.0-p247

# mysql - mysql数据库关键字的窄搜索结果

> ID：12631369
> 
> 赞同：0
> 
> 时间：2012-09-27T23:10:19.730
> 
> 标签：mysql, database, search-engine

我有一个包含过滤器公司零件号的大型数据库。一些产品具有相似的年份和型号。我有一个 php 脚本，它正在搜索每个部分的文本关键字部分。

因此，对于 1997-1999 Honda Crf 250 090987 19.95，关键字是：1997 1998 1999 honda crf 250 090987

我从教程中获得了代码，它被编写用于搜索关键字部分以查找由空格分隔的所有内容。问题是很多房源都有本田或类似的年份价差。

我需要弄清楚如何更改 php 以缩小结果范围，因此如果有人键入“1997 honda”，则不会出现所有的 honda 和 97 年代，而只会出现 1997 年的 honda。

我是 php 新手，我环顾四周，无法弄清楚。任何帮助将不胜感激。

这是php：

```
$keywords = $_GET['keywords'];
$terms = explode(" ", $keywords);
$query = "SELECT * FROM search WHERE ";

foreach ($terms as $each){
    $i++;
    if ($i == 1)
        $query .= "keywords LIKE '%$each%' ";
else
    $query .= "OR keywords LIKE '%$each%' ";

}

// connect
mysql_connect("localhost", "root", "root");
mysql_select_db("catalog");

$query = mysql_query($query);
$numrows = mysql_num_rows($query);
if ($numrows > 0){

    while ($row = mysql_fetch_assoc($query)){
        $id = $row['id'];
        $year = $row['year'];
        $manufacturer = $row['manufacturer'];
        $product = $row['product'];
        $partnumber = $row['partnumber'];
        $price = $row['price'];

        echo "<div id=\"results\">
        <div class=\"words\">$year</div><div class=\"words\">$manufacturer</div><div class=\"words\">$product</div><div class=\"words\">$partnumber</div>$price<br /></div>";
    }
}
else
    echo "<div class=\"no_results\"><center>No results found for \"<b>$keywords</b>\"</center></div>";

// disconnect
mysql_close(); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:15:57.693

`AND`在查询中使用而不是`OR`强制所有关键字必须匹配，否则一个关键字匹配将始终返回结果。除此之外，您必须在代码中进行一些相关性工作，这可能会减慢应用程序的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:21:49.930

有趣的问题。

我想到了两种方法：

(1) 如果你可以控制数据库结构，你可以选择 WHERE (make = 'Honda' AND Year IN (1997,1998,1999)) 和你已经拥有的“喜欢”的东西（没有品牌/年份）。但是您需要将模型年份分开并分成单独的字段。

(2) 否则，如果我们可以假设输入始终是“year(s) make [other keywords]，我们可以按照 izuriel 在我输入时建议的操作，只需“AND 'keywords = '1997' AND keywords = 'honda ' AND（我们现有的“like”子句列表）”。

这样，您将仅获得具有任何或所有其他关键字的 1997 Hondas。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:25:35.433

如果数据库很大，我建议您在单词的末尾使用一个符号百分比 and you and 而不是 or 并且您在查询中限制

# ruby - 如何将实例变量和 HTTParty 发布到使用 OAuth2 的 API

> ID：12631372
> 
> 赞同：12
> 
> 时间：2012-09-27T23:11:00.417
> 
> 标签：ruby, oauth-2.0, httparty

我可以通过以下方式从 Oauth2 API 获取信息：

```
token = "Token I get from authenticating my App"
auth = "Bearer " + token
user = HTTParty.get("API Website", :headers => { "Authorization" => auth}) 
```

我将如何发布到我的应用程序中生成的 API 内容？我有一个实例变量：

```
@contact = {"contact": {"name": "John Doe"  }} 
```

我试过这个：

```
token = "Token I get from authenticating my App"
auth = "Bearer " + token
user = HTTParty.get("API Website", :headers => { "Authorization" => auth}, @contact) 
```

无济于事。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T01:13:27.573

回答了我自己的问题

```
HTTParty.post("API Website", :headers => { "Authorization" => auth}, :body => "@contact") 
```

# android - 部署缓慢

> ID：12631380
> 
> 赞同：2
> 
> 时间：2012-09-27T23:12:17.060
> 
> 标签：android, performance, deployment

我当前的游戏项目变得足够大，以至于当我部署进行测试时，我正在等待几分钟才能将它实际发送到我的手机上。有时我还有其他事情要做，但有时我不得不坐下来等待。不幸的是，这减缓了开发过程。

我已经确定其中最大的因素是包装尺寸。我的包裹现在不到 18 兆，但我知道有一些应用程序的包裹要大得多。

除了减小包大小之外，是否有任何技巧、电话设置或 Eclipse 设置可以加快部署速度？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:33:03.337

虽然这并不完全符合您的“除了减小包大小”的标准，但我猜大部分文件大小可能来自纹理和音频资源。

与其将它们全部打包在`res/`文件夹下的 APK 中，我可能会建议将资源临时复制到设备的文件系统，然后从那里加载它们而不是您的资源。然后，当您重复上传 APK 时，您不必一遍又一遍地传输相同的资源。

如果您从主要集中的位置加载资源，则只需更改几行代码即可从从 res 加载更改为从文件加载。当您的游戏接近发布时，您可以再次将它们重新打包为资源，并且您不必进行如此多的迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:14:47.110

你想要的是一个安卓模拟器。您可以将模拟器安装为 Eclipse IDE 插件。

[http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

@“不幸的是，与在实际设备上运行应用程序相比，我的系统太慢（而且太旧）了，以至于模拟器像糖蜜一样运行。”
[http://dev.blogs.nuxeo.com/2011/10/speeding-up-the-android-emulator.html](http://dev.blogs.nuxeo.com/2011/10/speeding-up-the-android-emulator.html)

# asp.net - IIS Express 选项在 Visual Studio 2010 中不可用

> ID：12631392
> 
> 赞同：2
> 
> 时间：2012-09-27T23:13:12.837
> 
> 标签：asp.net, iis, iis-express

![右键单击网站项目](../Images/1ab6315e037fdef5126b2564d5cd91fb.png)

如何在我的解决方案中启用将 IIS Express 用于网站项目的选项？

我已经安装了 IIS Express，但它没有显示为选项？我想使用它，因为目前我无法在我的机器上使用 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:21:05.007

正如“神秘人”所说，您需要 VS 2010 服务包 (SP1) 才能在 VS 中查看 IIS Express 选项。如果您确定安装了 SP1，您是否检查过安装文件夹中是否存在 IIS Express？（%programfiles%\IIS Express 或 %programfiles(x86)\IIS Express）

如果没有安装，可以从[http://www.microsoft.com/en-us/download/details.aspx?id=1038安装](http://www.microsoft.com/en-us/download/details.aspx?id=1038)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:43:52.657

我遇到了这个问题，因为我通过 IIS 打开了站点。看到项目是通过 IIS 打开的唯一方法是缺少此按钮，并且网站项目的标题看起来像：`http://localhost/x`而不是`http://localhost:1111`.

要获得使用 IIS Express 的能力，您必须从解决方案中删除网站项目并使用添加现有网站，然后选择文件系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:16:07.957

是否安装了 Visual Studio 2010 SP1？需要 SP1 才能在项目属性的 Web 选项卡中获取 IIS Express 选项。（不要忘记也进行 Windows 更新）此外，您还应该安装 Visual Studio 2010 Web 标准更新。

# c# - c# - interop word 2010 数据绑定组合框问题

> ID：12631399
> 
> 赞同：2
> 
> 时间：2012-09-27T23:14:14.037
> 
> 标签：c#, office-interop

我有一个 VS2012 Word 文档项目，它在文档加载时加载一个 Windows 窗体，它包含一个绑定到 SQL 服务器上的数据的组合框。调试时，一切都完美无缺。ComboBox 获取其数据。

当我发布文档时，运行它创建的安装程序以安装必要的文件，然后打开文档，我验证表单在 DataView 和 DataTable 中都从 SQL 服务器接收正确的数据，但它拒绝填充组合框。

在表单加载时（也在按钮中尝试过）：

```
DataView dv = document.tickets.DefaultView;
DataTable distinctClients = dv.ToTable(true, "Client");
comboBox1.DataSource = distinctClients;
comboBox1.DisplayMember = "Client";
comboBox1.ValueMember = "Client"; 
```

# ruby - Ruby 似乎引用了一个变量而不是处理它的值

> ID：12631402
> 
> 赞同：2
> 
> 时间：2012-09-27T23:14:30.750
> 
> 标签：ruby, ruby-on-rails-3.2

为什么我的 data_dummy 哈希值增加了？我想用它来启动另一个零值的哈希！

```
fau[f.label][:hash] = data_dummy #  ==>{"name 1" => 0, "name 2" => 0} but in the second loop it contains data from the first loop e.g. {"name 1" => 2, "name 2" => 0} 
```

当使用字符串而不是变量 dummy_data 时，代码按预期工作。

```
fau[f.label][:hash] = {"name 1" => 0, "name 2" => 0} 
```

我不能这样做，因为“名字 X”正在改变......

这对我来说很奇怪！

**完整代码**

```
fau = {}
series = []
labels = [{:value => 0, :text => ''}]

data_dummy = {}
source.each do |c|
  data_dummy[c.name] = 0
end
i = 0
data_dummy.each do |k,v|
  i += 1
  labels.push({:value => i, :text => k})
end

source.each do |s|
  logger.debug "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
  logger.debug "Source: '#{s.name}'|'#{fault_labels[s.fault_id.to_s].label}' => #{s.cnt}"
  con_name = s.name #TODO: Cut name (remove location like left,right, ...)
  f = fault_labels[s.fault_id.to_s]
  unless fau.has_key?(f.label)
    # init faults-hash 'fau'
    fau[f.label] = {:total => 0, :hash => {}, :color => f.color, :name => f.label} #, :data => []
    # add all connector_names as keys with value = 0
    logger.debug "init :hash with #{data_dummy}" #  ==>{"name 1" => 0, "name 2" => 0} but in the second loop it contains data from the first loop e.g. {"name 1" => 2, "name 2" => 0}
    fau[f.label][:hash] = data_dummy
    # this way the number of incidents are all in the same order for each fault (first dimension key)
    # and all get at least a value of 0
 end
  logger.debug "Count up fau['#{f.label}'][:total] = #{fau[f.label][:total]} + #{s.cnt} (where connector '#{s.name}' and fault '#{f.label}')"
  logger.debug "Count up fau['#{f.label}'][:hash]['#{con_name}'] = #{fau[f.label][:hash][con_name]} + #{s.cnt}"
  fau[f.label][:total] += s.cnt
  fau[f.label][:hash][con_name] += s.cnt
  logger.debug "result :hash with #{fau[f.label][:hash].inspect}}"
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T23:26:28.307

因为 Ruby 哈希和所有 Ruby 对象一样，都是引用和复制一个，例如`hash2 = hash1`只创建引用的副本。修改 hash2 将修改 hash1，实际上，它们只是同一事物的不同别名。

您想改用克隆方法。

`hash2 = hash1.clone`

另请参阅[如何在 Ruby 中复制哈希？](https://stackoverflow.com/questions/4157399/how-do-i-copy-a-hash-in-ruby)

请注意，即使这样也只会创建浅拷贝，如果您有嵌套哈希（例如`myhash = {"key1" => "value1", "key2" => {"key2a" => "value2a"}}`），则必须进行深拷贝。根据[韦恩康拉德](https://stackoverflow.com/a/4157635/238886)对上述问题的回答，这样做的方法是：

```
def deep_copy(o)
  Marshal.load(Marshal.dump(o))
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:31:31.277

如果要制作哈希的副本，则需要使用`dup`方法：

```
foo = {"name 1" => 0, "name 2" => 0}
bar = foo
foo["name 2"] += 1
foo
=> {"name 2"=>1, "name 1"=>0}
bar
=> {"name 2"=>1, "name 1"=>0}

baz = foo.dup
foo["name 2"] += 1
foo
=> {"name 2"=>2, "name 1"=>0}
baz
=> {"name 2"=>1, "name 1"=>0} 
```

# android - TextView 在顶部和底部重叠

> ID：12631407
> 
> 赞同：1
> 
> 时间：2012-09-27T23:15:19.160
> 
> 标签：android, xml, android-layout, arduino

所以我正在创建一个 android 应用程序来通过串行与 arduino 进行通信。它进展顺利，但我在布局方面遇到了一些问题。我`TextView`的顶部和底部都重叠，我不知道为什么！

[https://www.dropbox.com/s/jaz8vbx63kd25ix/Screenshot_2012-09-27-18-53-24.png](https://www.dropbox.com/s/jaz8vbx63kd25ix/Screenshot_2012-09-27-18-53-24.png)

这是我的 main.xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginBottom="20dp" >

    <TextView
        android:id="@+id/demoTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ScrollView
        android:id="@+id/demoScroller"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/demoText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:typeface="monospace" />

    </ScrollView>

    <RelativeLayout
        android:id="@+id/send"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/sendButton"

        android:ems="10"
        android:hint="@string/send_text"
        android:inputType="text"
        android:singleLine="true" >
     </EditText>

    <Button
        android:id="@+id/sendButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

    </RelativeLayout>

</FrameLayout> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:19:45.573

这可能是因为您使用的是[`FrameLayout`](http://developer.android.com/reference/android/widget/FrameLayout.html)，“*应该用于保存单个子视图，因为很难以一种可缩放到不同屏幕尺寸的方式组织子视图，而不会使子视图相互重叠*”。尝试使用[`LinearLayout`](http://developer.android.com/reference/android/widget/LinearLayout.html)垂直方向的 a。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginBottom="20dp"
    android:orientation="vertical" >

    <TextView
    android:id="@+id/demoTitle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

    <!-- ... -->

    </RelativeLayout>

</LinearLayout> 
```

# c++ - 浮点数与双精度数的 C++ 精度数字

> ID：12631411
> 
> 赞同：-1
> 
> 时间：2012-09-27T23:15:50.293
> 
> 标签：c++, math, floating-point, floating-point-precision

所以我理解C++中**浮点数**与**双精度数的区别。**

> double 只是一个双浮点数，而 float 是一个单浮点数（精度大小的两倍）。

我的问题是，为什么浮点数表示为“300000011920928955078125e-24”（对于值 3.0），但双精度数会简单地显示为 3.0？

为什么不双重显示所有尾随数字？它具有更高的精度，但仍然具有与浮点相同的有限精度，所以我不确定为什么它不会像那样显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:20:55.250

这是因为许多值不能用浮点数精确表示（单精度或双精度），但 double 可以表示更接近的值。如果您打印显示更多小数位，您几乎肯定会看到错误。

值 0.3 无法精确表示。此外，计算结果可能会从操作数中提取错误。“0.3 * 10”会放大结果中的误差，所以不会是精确的 3.0。

最好的模拟是尝试以十进制显示“1/3”。你可以写成 0.333333 或 0.333333333333。如果将它们乘以 3，您将得到 0.999999 或 0.999999999999。在计算器屏幕上显示那些（具有固定位数），第一个将显示错误，而第二个将被四舍五入。

编辑：代码来证明这一点：

```
#include <stdio.h>

int main()
{
    float f = 0.3;
    double d = 0.3;
    printf("%.50lf %.50lf\n", f, d);
    printf("%.10lf %.10lf\n", f, d);
} 
```

显示：

```
0.30000001192092895507812500000000000000000000000000 0.29999999999999998889776975374843459576368300000000
0.3000000119 0.3000000000 
```

# performance - 如何选择一个好的散列函数（对于散列表）

> ID：12631413
> 
> 赞同：1
> 
> 时间：2012-09-27T23:15:54.640
> 
> 标签：performance, hashtable

我想知道如何最好地处理决定散列函数应该对其输入执行的操作的任务，当然基于可能的输入格式。

是否有任何规则（书）尚未找到？

我如何估算这种功能的成本？

我可以以某种方式预见知道用于输入的字符集发生冲突的可能性吗？

感谢您提前为我提供的食物。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:14:07.090

...

嗨，龚富，

看看**CRC32**与**FNV1A_Yorikke**的对峙：

[http://www.sanmayce.com/Fastest_Hash/index.html#KT_torture3](http://www.sanmayce.com/Fastest_Hash/index.html#KT_torture3)

> 我如何估算这种功能的成本？

简而言之：重型和多功能键/负载。一般来说，哈希（查表）函数需要考虑三个主要方面：

*   碰撞最胖插槽的分散和最大深度；

*   预热时间，即启动成本/间接费用；

*   线速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:59:16.733

哈希码生成的一般经验法则是生成的值尽可能唯一。哈希码/哈希函数中需要的两件事

1.  **哈希码希望尽可能唯一（并且尽可能小）**。话虽这么说，（在理想情况下）使用数据类型占用空间小的数据成员，并且可以保证对于该值的任何实例都是唯一的，这是一种快速获得哈希码的有效方法。然而，这有时不是安全的做法。
2.  散列函数应该是[完美](http://en.wikipedia.org/wiki/Perfect_hash_function)的，即应该能够生成唯一值，所有值都在一个小范围内生成。

# forms - Yii - 格式化由表单提交创建的 GET url

> ID：12631418
> 
> 赞同：0
> 
> 时间：2012-09-27T23:16:07.227
> 
> 标签：forms, yii, format, submit, params

我可以更改 Yii 表单提交生成的 URL 格式吗？

例如。我使用 get 方法的 url 如下所示：

域/搜索/新？搜索[field_1]=1&Search[field_2]=2&Search[field_3]=3

我可以让它看起来像：

域/搜索/新/1/2/3 或

域/搜索/新/field_1:1/field_2:2/field_3:3 或

域/搜索/新/field_1/1/field_2/2/field_3/3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:21:09.960

如果您让浏览器正常提交表单，则不会。

另一方面，如果您使用 jQuery 来阻止表单提交并发出自定义 AJAX 请求（甚至将浏览器指向另一个 URL），那么您可以做任何您喜欢的事情。

# javascript - 使用 JavaScript 在页面加载时播放声音

> ID：12631420
> 
> 赞同：5
> 
> 时间：2012-09-27T23:16:07.803
> 
> 标签：javascript, onload

当使用 JavaScript 触发 onload 事件时，如何播放声音文件？

**例如：**

如果我有一个网页，当用户点击一个按钮时，这将弹出一个窗口。加载弹出窗口时，页面将播放声音文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T23:30:54.933

将 HTML5 音频元素添加到您的文档中：

```
 <audio id="foobar" src="yoursample.ogg" preload="auto"> 
```

通过 CSS 将其设置为隐藏：

```
 #foobar { display: none } 
```

在任何 JavaScript 事件处理程序上播放音频：

```
var sample = document.getElementById("foobar");
sample.play(); 
```

了解更多信息

[https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video)

根据您的 Web 应用程序用途，您可能希望支持旧浏览器：

[http://www.misfitgeek.com/play-sound-in-html5-and-cross-browser-support-with-backward-compatability/](http://www.misfitgeek.com/play-sound-in-html5-and-cross-browser-support-with-backward-compatability/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-07T05:06:33.640

尝试这个：

```
//store the audiofile as variable.
var popupsound = document.getElementById("notifypop");

function autoNotify() {
   popupsound.play(); //play the audio file
}
```

```
#notifypop{ display:none;}
```

```
<body onload="autoNotify()"> <!--Play the audio file on pageload  -->

  <audio id="notifypop"> <!--Source the audio file. -->
            <source src="path/sound.ogg" type="audio/ogg">
            <source src="path/sound.mpeg" type="audio/mpeg">
  </audio>

  <script  src="path/sound.js" type="text/javascript"></script><!--Load your javascript sound file.-->

</body>
```

了解有关 HTML5 媒体格式的更多信息 [https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:20:48.960

一种方法是在单击时插入 HTML 音频标签并将它们设置为自动启动：

[http://webdesign.about.com/od/sound/a/play_sound_oncl.htm](http://webdesign.about.com/od/sound/a/play_sound_oncl.htm)

# functional-programming - 陷入函数的无限循环

> ID：12631427
> 
> 赞同：5
> 
> 时间：2012-09-27T23:17:00.970
> 
> 标签：functional-programming, ocaml

我在这个函数中陷入了无限循环：

```
let rec showGoatDoorSupport(userChoice, otherGuess, aGame) =                                       
    if( (userChoice != otherGuess) && (List.nth aGame otherGuess == "goat") ) then otherGuess
    else showGoatDoorSupport(userChoice, (Random.int 3), aGame);; 
```

这是我调用函数的方式：

```
showGoatDoorSupport(1, 2, ["goat"; "goat"; "car"]); 
```

在函数的第一个条件中，我比较前 2 个输入参数（1 和 2）是否不同，并且如果列表中索引“otherGuess”的项目不等于“goat”，我想返回那个其他猜。

否则，我想使用 0-2 之间的随机数作为第二个输入参数再次运行该函数。

关键是继续尝试运行该函数，直到第二个参数不等于第一个参数，并且列表中的那个槽不是“山羊”，然后返回那个槽号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T23:23:05.123

不要使用`==`，它会检查物理平等。使用`=`. 两个不同的字符串在物理上永远不会相等，即使它们包含相同的字符序列。（这是必要的，因为字符串在 OCaml 中是可变的。）

```
$ ocaml
        OCaml version 4.00.0

# "abc" == "abc";;
- : bool = false
# "abc" = "abc";;
- : bool = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T07:12:35.043

另一种方法是使用`String.compare`. 一个例子：

```
 if String.compare str1 str2 = 0 then (* case equal *)
 else (* case not equal *) 
```

# text - awk - 比较每一行以找到重复的字段，并在行尾添加一些措辞

> ID：12631430
> 
> 赞同：2
> 
> 时间：2012-09-27T23:17:22.000
> 
> 标签：text, awk, duplicates

我有一个类似这个文件的文件，我正在尝试验证每一行的一个字段，如果该字段在文件的前面有重复，则添加一些措辞。

```
\\FILE04\BUET-PCO;\\SERVER24\DFS\SHARED\CORP\ET\PROJECT CONTROL OFFICE;/FS7_150a/FILE04/BU-D/PROJECT CONTROL OFFICE;10000bytes;9888;;;
\\FILE12\BUAG-GOLDMINE$;\\SERVER24\DFS\SHARED\CAN\AGENCY\GOLDMINE;/FS3_150a/FILE12/BU/AGENCY/GOLDMINE;90000bytes;98834;;;
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;;;
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;other stuff;; 
```

在我的示例中，第 3 行和第 4 行具有相同的物理路径。我希望有一个脚本可以将第三个字段（例如 /FS3_150a/FILE12/BU/GB/BUSINTEG）与同一个文件进行比较，如果它找到完全匹配的内容，则在这两种情况下都打印“与行#相同的物理路径” ,

```
\\FILE04\BUET-PCO;\\SERVER24\DFS\SHARED\CORP\ET\PROJECT CONTROL OFFICE;/FS7_150a/FILE04/BU-D/PROJECT CONTROL OFFICE;10000bytes;9888;;;
\\FILE12\BUAG-GOLDMINE$;\\SERVER24\DFS\SHARED\CAN\AGENCY\GOLDMINE;/FS3_150a/FILE12/BU/AGENCY/GOLDMINE;90000bytes;98834;;;
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;;;Same Physical Path as Line #4
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;other stuff;; Same Physical Path as Line #3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:34:03.087

此代码解决了您的问题的简化版本。它标识与字段 3 中的前一行相比包含重复值的每一行。它不处理具有后续重复项的行的标记。

```
awk -F';' '{ tag = ""
             if (field3[$3] != 0) tag = " Same physical path as line " field3[$3]
             else field3[$3] = NR
             printf "%s%s\n", $0, tag
           }' "$@" 
```

可能还有其他组织它的方法，但关键是使用关联数组`field3`来跟踪在字段 3 中看到的名称以及第一次看到给定名称的行号。这假设您正在处理单个输入文件。如果您必须处理多个文件（但您必须决定相同的名称是否可以出现在不同的文件中），请查找 FNR 等。

它几乎可以根据给定的数据工作：

```
\\FILE04\BUET-PCO;\\SERVER24\DFS\SHARED\CORP\ET\PROJECT CONTROL OFFICE;/FS7_150a/FILE04/BU-D/PROJECT CONTROL OFFICE;10000bytes;9888;;;
\\FILE12\BUAG-GOLDMINE$;\\SERVER24\DFS\SHARED\CAN\AGENCY\GOLDMINE;/FS3_150a/FILE12/BU/AGENCY/GOLDMINE;90000bytes;98834;;;
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;;;
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;other stuff;; Same physical path as line 3 
```

在第 3 行制作“标签”的困难在于预测未来；很难。为此，您必须将整个文件放入内存中，在字段 3 中出现给定值的行号上保留制表符（通常，这可能是行号的广泛列表），然后遍历数据和适当的标记。非常非常难做；我更喜欢使用 Perl 来`awk`完成这项工作，尽管正确组织数据也可能是可行的`awk`。

如果是我，我会完成 90% 的工作；有重复的行被识别。如果您希望完成最后 10% 的工作，预计它会占用第一阶段计划的其他 90% 的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:07:09.413

这是使用`GNU awk`. 这有点骇人听闻，YMMV。像这样运行：

```
awk -f script.awk file.txt{,} 
```

内容`script.awk`：

```
BEGIN {
    FS = ";"
}

FNR==NR {
    array[$3]=array[$3] "#" NR
    next
}

{
    if ($3 in array && array[$3] ~ /#.#/) {
        copy = array[$3]
        sub("#"FNR, "", copy)
        printf "%s Same Physical Path as Line as %s\n", $0, copy
    }
    else {
        print
    }
} 
```

结果：

```
\\FILE04\BUET-PCO;\\SERVER24\DFS\SHARED\CORP\ET\PROJECT CONTROL OFFICE;/FS7_150a/FILE04/BU-D/PROJECT CONTROL OFFICE;10000bytes;9888;;;
\\FILE12\BUAG-GOLDMINE$;\\SERVER24\DFS\SHARED\CAN\AGENCY\GOLDMINE;/FS3_150a/FILE12/BU/AGENCY/GOLDMINE;90000bytes;98834;;;
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;;; Same Physical Path as Line as #4
\\FILE12\BUGB-BUSINTEG$;\\SERVER24\DFS\SHARED\CAN\GB\BUSINTEG;/FS3_150a/FILE12/BU/GB/BUSINTEG;50000bytes;988822;other stuff;; Same Physical Path as Line as #3 
```

# python - 不寻常的符号 - python

> ID：12631432
> 
> 赞同：2
> 
> 时间：2012-09-27T23:17:33.793
> 
> 标签：python

这可能是一个非常简单的问题。我正在运行 python 代码，并收到如下错误消息：

```
File "/home/mbenchoufi/brisket/../brisket/views.py", line 11, in <module>
from influence.forms import SearchForm

ImportError: No module named forms 
```

问题首先是我确实在 /home/myname/brisket/ 中有一个名为 views.py 的文件，但我不明白这个符号：/home/myname/brisket/../brisket/views.py

我有路径配置问题吗？这个符号是什么意思？

顺便说一句，一个非常奇怪的事情是我在影响文件夹中有一个名为 forms.py 的文件，在这个文件中我有一个名为 SearchForm 的类......错误消息怎么会是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T23:19:44.410

这不是 Python 特定的表示法，而是 UNIX 文件系统表示法。`..`在 UNIX 路径中的意思是“备份一个目录”，因此例如，在这种情况下，`/home/myname/brisket/..`等同于`/home/myname`.

Python 以这种方式显示文件名的原因可能是由于某种原因您`sys.path`实际上已经包含在其中。`/home/myname/brisket/..`这不是问题，因为 Python 将能够`..`很好地跟随路径中的 s。

此错误消息告诉您的是，在处理文件`/home/myname/brisket/../brisket/views.py`（与 相同的文件`/home/myname/brisket/views.py`）时，有一行代码

```
from influence.forms import SearchForm 
```

这导致了错误。具体来说，它是一个`ImportError`，意味着`influence/forms.py`Python 的导入机制没有找到（或无法读取）该文件。您应该在 Python 程序中检查 的值，`sys.path`以确保 的父目录`influence/`在列表中，并确保该文件是可读的。（还要确保`influence/__init__.py`存在，尽管我不确定特定问题会导致您看到的错误。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:21:50.783

```
"/home/myname/brisket/../brisket/views.py" 
```

相当于

```
"/home/myname/brisket/views.py" 
```

原因可能是您 PYTHONPATH 中的一个条目，例如

```
export PYTHONPATH="$HOME/../brisket:$PYTHONPATH" 
```

[http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)

上述方法的好处是可以为其他用户工作，同时不需要到 /home 的绝对路径。像这样写

```
export PYTHONPATH="/home/brisket:$PYTHONPATH" 
```

获得更简单的路径

# c++ - OpenGL着色器版本编译错误

> ID：12631437
> 
> 赞同：4
> 
> 时间：2012-09-27T23:18:10.390
> 
> 标签：c++, opengl, shader

在 OpenGL 中编译简单的顶点着色器时遇到问题，我收到以下错误消息：

*   error(#106) GL2 不支持版本号
*   错误（#279）无效的布局限定符“位置”

我认为我必须使用错误版本的 GL2，但我不知道如何找到我的版本号或去哪里进行升级（是的，我试图寻找答案。）附件是我的着色器的副本代码仅供参考和我的openGL信息。

```
#version 330 core

layout(location = 0) in vec3 Position;

void main() {
    gl_Position.xyz = Position;
} 
```

*   供应商：ATI Technologies Inc.
*   渲染器：ATI Radeon HD 5700 系列
*   版本：3.2.9756 兼容性配置文件上下文

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T03:21:45.210

```
#version 330 core 
```

这表示您的着色器使用 GLSL 版本 3.30。

这个：

> 版本：3.2.9756 兼容性配置文件上下文

意味着你的 OpenGL 版本是 3.2。[与 OpenGL 3.2 对应的 GLSL 版本是 1.50。](http://www.opengl.org/wiki/GLSL_Core_Language#Version)小于 3.30。因此缺乏编译。

更新您的驱动程序；那些都非常老了。您的卡应该能够支持 GL 4.2。

# wordpress - 将 Wordpress 更改为多站点安装导致的重定向循环

> ID：12631439
> 
> 赞同：1
> 
> 时间：2012-09-27T23:18:37.020
> 
> 标签：wordpress, redirect

所以我收到 301 错误（此网页有一个重定向循环...），试图在新安装的多站点中访问新安装站点的仪表板。我确定这是服务器配置错误而不是 cookie 问题，但我不知道如何修复它。有什么建议么？

说多站点安装是在初始站点建成后完成的（初始站点最终将成为子站点）*可能会有所帮助。*如果这有帮助的话......

# android - 覆盖 PhoneGap Android 中的后退按钮

> ID：12631442
> 
> 赞同：2
> 
> 时间：2012-09-27T23:18:58.137
> 
> 标签：android, cordova, back-button, addeventlistener

我正在尝试完成多个 addEventListener，但有什么问题吗？

例如，如果我们在页面上有 3 个 div，第一个显示在开头，另外两个隐藏。

```
<div id="d1">
<a onClick="
document.addEventListener("backbutton", show_div1, false); 
$('#d1').hide();  
$('#d2').show(); 
"
</a>
</div>

<div id="d2"></div> - initially hidden
<div id="d3"></div> - initially hidden 
```

它显示 div 2，隐藏 div 1 并将后退按钮的侦听器设置为 show_div1()，一切正常。在按下后退键时，它会提醒**“我应该显示#div1”**，因为它应该**（//$('#d1').show(); 被评论）**

```
show_div1(){
//$('#d1').show(); $('#d2').hide(); 
alert ('I should show #div1');
} 
```

**但是现在问题来了**

```
<div id="d2">
<a onClick="
document.removeEventListener("backbutton", show_div1, false);
document.addEventListener("backbutton", show_div2, false); 
$('#d2').hide();  
$('#d3').show(); 
"
</a>
</div> 
```

**即使没有按下后退按钮，它也会**立即触发“我应该显示#div2” ！addEventListener 就像启动主函数 show_div2() 一样，而不仅仅是在该函数的后退按钮上设置监听器。

```
show_div2(){
//$('#d2').show(); $('#d3').hide();
alert ('I should show #div2');
} 
```

*发生这种情况的可能原因是什么？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:16:53.413

试试这个，在设备准备好时为后退按钮添加一个监听器，像这样

```
var onBackButton = function(){show_div2();}; //the initial state
document.addEventListener("backbutton", onBackButton, false); 
```

和

> 不要将 onClick 与 phoneGap 一起使用

使用 href 或 ontouchend 并确保您的 < a > 是可见的，因为您里面没有任何东西（在您的 css 文件中显示块）

```
<div id="d1">
    <a href='javascript:onDivClick(1)' style='display:block; width:100%; height:100%;'></a>
    // <a ontouchend='onDivClick(1)'></a> will be better
</div>
<div id="d2">
    <a href='javascript:onDivClick(2)' style='display:block; width:100%; height:100%;'></a>
</div> 
```

在javascript中

```
function onDivClick(var case)
{
    switch(case)
    case 1:
        $('#d1').hide();  
        $('#d2').show();
        onBackButton = function(){show_div1();};
    break;
    case 2:
        $('#d2').hide();  
        $('#d1').show();
        onBackButton = function(){show_div2();};
    break;
} 
```

# php - 如何从自动填充的下拉菜单中搜索我的 MYSQL 数据库？

> ID：12631443
> 
> 赞同：-1
> 
> 时间：2012-09-27T23:18:59.920
> 
> 标签：php, mysql, drop-down-menu

我是一个完整的新手，这是我在其中一个论坛上发表的第一篇文章。所以如果我没有正确解释自己或者不应该问这样的问题，那么请原谅我并尽量对我耐心:)

基本上，我已经建立了一个 mysql 数据库，我可以从我的网站上填充它。我创建了一个基本搜索选项，我想从下拉列表中选择一个选项，并且还可以输入关键字。我已经弄清楚了 hte 关键字部分，我只是对如何处理事物的下拉部分感到有些困惑。我已经在互联网上搜索了答案，但我不确定我是否使用了正确的术语，因此我发现很难解决这个问题。

我之前创建了一个基本的 MYSQL 数据库并使其工作，所以我只能假设问题出在自动填充的下拉列表中。

让我解释一下......我有一个想象性地标题为“Search.php”的搜索页面，其中包含一个由下拉菜单和一个文本框组成的表单（不要担心文本框 - 工作正常），下降下拉框会自动从我的 MYSQL 数据库中填充，当提交表单时，结果应该出现在另一个页面上，标题为“Results.php”。出于某种原因，下拉列表中的值似乎没有被传递到“结果”页面！

这是“搜索”页面的下拉框。

```
<select name="Name" id="Name">
<option>Please select</option>
<?PHP
while($row = mysql_fetch_assoc($result))
{$dropdown .="\r\n<option value='{$row['Name']}'>{$row['Name']}</option>";}
echo $dropdown;
PHP?> 
```

这一切似乎都很好，它会自动从我的 MYSQL 数据库中填充，我很高兴它能正常工作。

* * *

这是“结果”页面。

```
<?php 
 mysql_connect('xxxxxxxxxxxx', 'username', 'password') or die(mysql_error()); 
 mysql_select_db("database") or die(mysql_error()); 

 $query = "SELECT * FROM Shirts WHERE Name = '$Name'" or die(mysql_error()); 
 $result = mysql_query($query) or die(mysql_error());  

 if(mysql_num_rows($result) > 0) {

 while($row = mysql_fetch_assoc($result))
 {
  echo ($row['Name']);
  echo "<br />";
  }
 } 
```

* * *

Shirts = 表名 Name = 表中的列

* * *

出于某种原因，这只返回我数据库中的“空”字段，这让我相信“搜索”页面上下拉框中的值没有被传递到“结果”页面！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:31:59.393

这是在黑暗中拍摄的，因为上面缺少您的代码片段，这会使这更加清晰..但是，您似乎实际上并没有检索表单传递的值。这些值不是自动可用的；您需要先获取它们，然后才能使用它们。

由于我不知道您使用的是哪种数据传递方法，请尝试以下操作：

```
$Name = $_REQUEST['Name']; 
```

并将其放在生成结果的 php 文件的顶部。

`$_REQUEST`包含两种方法的数据`POST`和`GET`，因此根据您使用的任何方法，它应该可以工作。

但是，我真的希望这个网站不存在。它不仅使用了已弃用的功能，而且容易受到注入攻击。

我建议`mysql_*`您学习如何使用[`PDO`](http://www.php.net/manual/en/intro.pdo.php). PDO 的一大特点是它可以自动转义查询，前提是您使用命名参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:32:49.810

您的 html`select`应该包含在一个表单中，其中包含对结果页面的操作，如果在表单上指定了方法，则它是`get`or之一`post`，如果没有指定方法属性，则默认为`get`，取决于您应该在查询中使用`$_GET['Name']`或`$_POST['Name']`分别代替的`$Name`

# php - php 访问对象值

> ID：12631455
> 
> 赞同：0
> 
> 时间：2012-09-27T23:19:48.980
> 
> 标签：php, object, foreach

```
stdClass Object
(
    [request] => stdClass Object
        (
            [other] => stdClass Object
                (
                    [4] => stdClass Object
                        (
                            [answer] => one
                        )

                    [5] => stdClass Object
                        (
                            [answer] => two
                        )

                    [6] => stdClass Object
                        (
                            [answer] => three
                        )
                )

        )
)
?> 
```

我可以通过使用 foreach 循环打印出所有答案。

```
foreach( $result->request->other as $test )
      $tests[] = $test->answer;
            foreach($tests as $test1){
            echo "<p>$test1</p><br>";
          } 
```

我对如何回显答案编号有点困惑，在这种情况下是 4 5 6。我如何将它们作为循环的一部分回显。前任：

```
4 one
5 two
6 three 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:22:21.687

```
foreach( $result->request->other as $key => $test )
      $tests[] = $test->answer;
            foreach($tests as $test1){
            echo "<p>$test1</p><br>";
          } 
```

只需将 foreach 行更改为在 $test 变量之前包含 $key => 即可。这将是索引（数字或关联），您可以获得该值并随心所欲地使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:23:35.780

使用`foreach( $array AS $key=>$val )`语法，像这样：

```
foreach( $result->request->other as $key=>$test ) {
  printf( "<p>%s: %s</p><br />", $key, $test->answer );
} 
```

# ruby - 如何使用公共 babushka dep 管理安全文件？

> ID：12631456
> 
> 赞同：2
> 
> 时间：2012-09-27T23:19:49.890
> 
> 标签：ruby, provisioning, babushka

我想以与 The Conversation 相同的方式分享我的头巾部门：[https ://github.com/conversation/babushka-deps](https://github.com/conversation/babushka-deps)

但是，我使用 chef 管理 SSL 证书和 SSH 密钥。现在这些文件直接在我的厨师配置中，但是因为我想分享我的头巾配置，所以我不能把它们放在那里。

在 babushka 中是否有一种处理安全的、外部的 repo 文件的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:30:37.990

这是我目前正在做的事情。没有内置的方法，但可以通过一点脚本来完成。

如果您在远程系统上运行 deps，例如从 shell 脚本中运行，那么我会在脚本中添加一个命令，以首先将私有数据 rsync 到位：

```
rsync -taP private/ user@host:~/private/
ssh user@host 'babushka "server configured"' 
```

这是最简单的情况，但很快就会变得混乱。相反，我正在用头巾本身做这种事情，以便用 deps 来描述整个过程。

我有一个带有几个小辅助方法的 dep，用于在远程机器上安装 babushka，然后在其上运行任意 deps。这使您可以编写依赖于远程运行结果的本地 dep，从而有效地将 babushka 嵌套在其内部。

它还不够通用，无法合并到核心中（并且需要重构），但效果很好。如果你想在此期间试一试，这里是：

[https://github.com/conversation/babushka-deps/blob/master/provision.rb#L123-131](https://github.com/conversation/babushka-deps/blob/master/provision.rb#L123-131)

使用此方法，您可以将参数传递给每个远程运行。这使得提供私人数据变得容易，例如您的私人密钥，或用于设置您的网络服务器的 SSL 证书等。

（请注意，尽管参数值记录到本地和远程框上的 ~/.babushka/logs/dep-name 中，因此“私有”假定两者上的相关用户帐户都是受信任的。）

# java - 条件（三元）运算符代码样式

> ID：12631459
> 
> 赞同：3
> 
> 时间：2012-09-27T23:20:18.347
> 
> 标签：java, coding-style, conventions, ternary-operator, conditional-operator

> `int foo = bar > baz ? bar : baz;`
> 
> `int foo = someBoolean ? bar : baz;`
> 
> * * *
> 
> `int foo = (bar > baz) ? bar : baz;`
> 
> `int foo = (someBoolean) ? bar : baz;`
> 
> * * *
> 
> `int foo = (bar > baz) ? bar : baz;`
> 
> `int foo = someBoolean ? bar : baz;`

我无法决定我应该使用这三个中的哪一个。我可以：

1.  在以下示例中不要使用括号，否则会导致可读性差：

    `min[0] = min[0] > pos.x ? pos.x : 0;`

2.  始终使用括号，但在简短的表达式中可能会出现一些难看的代码：

    `setValue(val + scrollBar.getBlockIncrement() * ((scrollsUp) ? -1 : 1));`

3.  当条件中有空格时，介于两者之间并使用括号，但如果条件只是一个布尔变量，则不是：

    `min[0] = (min[0] > pos.x) ? pos.x : 0;`

    `setValue(val + scrollBar.getBlockIncrement() * (scrollsUp ? -1 : 1));`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T23:36:14.160

神谕[`Code Conventions`](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-137265.html#331)声明如下

```
return (condition ? x : y); 
```

.. 并进一步

```
if (a == b && c == d)     // AVOID!
if ((a == b) && (c == d)) // RIGHT 
```

...可以自由翻译成

```
return (someBoolean ? x : y);
return ((x > y) ? x : y); 
```

..虽然就个人而言，我不介意放一两个括号。归根结底，这仍然是一个主观问题。如果您觉得添加/删除括号提供了更好的可读性，那么请随意这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:28:27.723

在我的情况下，任何事情都是清晰的，所以我会选择：

```
int foo = (bar > baz) ? bar : baz;
int foo = (someBoolean) ? bar : baz; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:25:27.383

我个人更喜欢案例2：

```
 int foo = (bar > baz) ? bar : baz;

    int foo = (someBoolean) ? bar : baz; 
```

因为条件在括号内。

这段代码

```
 int foo = bar > baz ? bar : baz; 
```

会影响可读性，但会完美编译。但是我认为将测试条件放在括号中会更好的可读性。但是我想说这主要取决于人们的编码风格。尽管如此，所有三个案例都可以正常工作:)

# c - C Linux - 不写整数

> ID：12631460
> 
> 赞同：2
> 
> 时间：2012-09-27T23:20:21.407
> 
> 标签：c, linux

我不知道为什么在将整数写入文件时总是遇到麻烦。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <string.h>

int main (int argc, char* argv[]) {

  int fd, w;
  int num=80;

  fd=open ("file3.txt", O_CREAT|O_WRONLY, 0777);

  if (fd>0) {

    w=write (fd, &num, sizeof (int));

        if (w==-1) {

          printf ("Writing Error \n");
          return EXIT_FAILURE;

    }

  }

  close (fd);
  return EXIT_SUCCESS;

} 
```

有谁知道会是什么？

非常感谢...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T23:24:54.887

您正在将二进制值写入文件，而不是 ascii。如果你想要文件中的 ascii，你需要`sprintf`先把它放到一个`char`缓冲区，然后`write`是 char 缓冲区。`fopen`或者使用而不是打开您的文件`open`并使用`fprintf`.

ps你想要`close(fd)`在你的`if (fd > 0) {`块内。此外，从技术上讲，唯一的错误返回`open`是`-1`. 所有其他值（正、零、负）都是成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:26:23.593

从您的评论来看，它 100% 正确工作：`P`恰好是十进制 80。

`write()`正在输出整数的字节而不是十进制表示。

您可能想要查看`fopen`并`fprintf`作为一种简单的方法来获得您所期望的外观。

# javascript - 使用按钮清空或重置整个阵列

> ID：12631461
> 
> 赞同：1
> 
> 时间：2012-09-27T23:20:39.507
> 
> 标签：javascript

这是我的脚本可能更容易解释，如果你能看到它，我想用按钮重置数组

```
 <body> 
  <script type="text/javascript"> 
   var number = []; 

   function myFunction() 
   { 
     var x = document.getElementById("box"); 
     number.push(document.getElementById("input").value); 
     x.innerHTML = number.join('<br/>');  
   } 

  </script> 
 <form> 
  <input id="input" type=text> 
   <input type=button onclick="myFunction()" value="Add to list"/>  
  </form>

 <div id="box" style="border:1px solid black;width:150px;height:150px;overflow:scroll">  
  </div> 
<form>
<input type=button onclick="number.splice(0)" value="Reset" />
</form>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T02:36:26.267

是的。从函数中调用它。

编辑： splice 与 IE 有问题。使用 array.length = 0 代替

```
<body> 
    <script type="text/javascript"> 
        var number = []; 

        function myFunction() { 
            var x = document.getElementById("box"); 
            number.push(document.getElementById("input").value); 
            x.innerHTML = number.join('<br/>');  
        } 

        function myReset() {
            //number.splice(0);
            number.length = 0;
            var x = document.getElementById("box"); 
            x.innerHTML = "";
            x.innerHTML = number.join('<br/>');  
        }
    </script> 

    <form> 
        <input id="input" type=text> 
        <input type=button onclick="myFunction()" value="Add to list"/>  
    </form>

    <div id="box" style="border:1px solid black;width:150px;height:150px;overflow:scroll">  
    </div> 
    <form>
        <input type=button onclick="myReset()" value="Reset" />
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:25:59.750

尽管丑陋，但`onclick="number.splice(0)"`有效：http: [//jsfiddle.net/39KZ9/20/](http://jsfiddle.net/39KZ9/20/)

# c# - 调用泛型方法并在返回类型上调用方法

> ID：12631465
> 
> 赞同：2
> 
> 时间：2012-09-27T23:21:05.367
> 
> 标签：c#

我将如何在运行时只知道类型的情况下调用泛型方法，然后在返回的类型上调用方法？我查看了很多示例，但似乎无法使其正常工作。

这就是我到目前为止所拥有的。

```
public interface IDataMapper<TEntity> where TEntity : IEntity
{
    void Update(TEntity entity);
}

public IDataMapper<TEntity> GetMapper<TEntity>() where TEntity : IEntity
{
    // Return something of type IDataMapper<TEntity>
}

foreach (IEntity entity in _dirtyObjects)
{
    MethodInfo method = typeof(MapperFactory).GetMethod("GetMapper");
    MethodInfo generic = method.MakeGenericMethod(entity.GetType());

    generic.Invoke(_mapperFactory, null);
    // I now want to call the Update() method
    // I have tried to cast to IDataMapper<IEntity> which results in a null ref ex
} 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T23:23:42.113

您必须继续使用反射：

```
object dataMapper = generic.Invoke(_mapperFactory, null);
method = dataMapper.GetType().GetMethod("Update");
method.Invoke(dataMapper, new object[] {entity}); 
```

# iphone - UIDocumentInteractionController 不再适用于 iOS6

> ID：12631466
> 
> 赞同：11
> 
> 时间：2012-09-27T23:21:07.433
> 
> 标签：iphone, objective-c, xcode, ios6, uidocumentinteraction

我有一个与为 iOS5 构建的 instagram 共享的应用程序，现在在 iOS6 中，共享不再有效，尽管`canOpenURL`返回 true 并且代码执行。图像以`.igo`扩展名保存到应用程序的文档文件夹中。这通过 com.instagram.exclusivegram 传递给 instagram。

代码如下，它进入 if 语句并显示“here in”，但没有像以前在屏幕底部那样打开 Share With 对话框。

```
 NSLog(@"%@", _imgToUpload);
        NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
        if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {
            uidController = [[UIDocumentInteractionController alloc] init];
            //imageToUpload is a file path with .igo file extension
            uidController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:_imgToUpload]];
            uidController.UTI = @"com.instagram.exclusivegram";
            uidController.delegate = self;
            CGRect navRect = self.view.frame;
            [uidController presentOpenInMenuFromRect:navRect inView:[UIApplication sharedApplication].keyWindow animated:YES];
            NSLog(@"here in");
        } 
```

`_imgToUpload`也提供了正确的文件路径。

谢谢你，尼克

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T22:33:19.680

刚刚做了一些测试并找到了解决方案。不要出现在 keyWindow 中。

```
[uidController presentOpenInMenuFromRect:navRect inView:self.view animated:YES]; 
```

我已经对此进行了测试，它将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T16:54:22.130

uidocumentinteraction 控制器在 iOS6 中不起作用的另一个原因是现在使用了新的操作表/启动面板（它显示了可用于打开文档的应用程序）。我的应用程序在使用 iOS5 启动 iBooks 时运行良好但失败了，因为我从 viewDidLoad 启动现在还为时过早，并且我在当前视图控制器上出现错误“其视图不在窗口层次结构中”，所以我在延迟后将代码更改为 performselector 1秒。该应用程序现在通过新面板调用 iBooks。

# mongodb - 多对多一对多的 MongoDB 性能与关系数据库

> ID：12631470
> 
> 赞同：0
> 
> 时间：2012-09-27T23:21:12.240
> 
> 标签：mongodb, relational-database, database

假设我在学生和教师之间建立了多对多的关系，我为此构建了一个应用程序，我将学生分配给教师，将教师分配给学生。我可能希望我的数据标准化（我有一个教师集合和一个学生集合）。

我想知道，在上述情况下（多对多），如果我使用关系数据库（如 MySQL）而不是 MongoDb，性能会更好吗？一对多的性能如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:28:50.737

老实说，取决于实施。在 MySql 中，这取决于您如何布置架构并对其进行索引。

Flat DB storage (Mongo) 并不意味着你会自动获得性能。这纯粹是主观的。

这是根据您的描述在 MySql 中的一个示例。

```
create table teachers (teacher_id int Primary Key, teacher_name varchar(20))
create table students (student_id int Primary Key, student_name varchar(20))
create table teacher_student_assoc (assoc_id int Primary Key, teacher_id int, student_id int) create index on teacher_id and student_id 
```

除非您的 MySql 数据库会受到重创（假设您的网站每天获得 10 万次点击），否则我看不出您需要担心性能的原因。

如果需要，您还可以实现 memcache。

祝你好运。

# javascript - Java脚本计算器

> ID：12631471
> 
> 赞同：-2
> 
> 时间：2012-09-27T23:21:26.497
> 
> 标签：javascript

我正在尝试制作一个简单的计算器，其中一个人会输入两个值，然后当单击一个按钮时，一个警告框会给出结果。但它不起作用。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<script type="text/javascript">

<!--//onclick handler //-->
function gonum()
{
var input1=document.getElementById('a').value;
var operator=document.getElementById('op').value;
var input2=document.getElementById('b').value;

    if (operator=="+")
    {
        add(input1,input2);
    }
}

function add(input1,input2)
{
    alert(input1+input2);
}

</script>
</head>
<body>
<form>
<input type="text" name="a"/>
<input type="text" name="op"/>
<input type="text" name="b"/>
<input type="button" value="=" name="btn" onClick="gonum()" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T23:23:46.653

我看到的一个明显问题是：

```
var input1=document.getElementById('a').value;
var operator=document.getElementById('op').value;
var input2=document.getElementById('b').value; 
```

结合这个：

```
<input type="text" name="a"/>
<input type="text" name="op"/>
<input type="text" name="b"/> 
```

请注意，您没有为输入元素分配任何 ID；但是，您的 JavaScript 正试图通过它们的（不存在的）id 来调用它们。

将您的 html 更改为此，您应该是金色的：

```
<input type="text" name="a" id="a"/>
<input type="text" name="op" id="op"/>
<input type="text" name="b" id="b"/> 
```

# sharepoint-2010 - Sharepoint 2010：以编程方式创建多个解决方案的网页

> ID：12631472
> 
> 赞同：1
> 
> 时间：2012-09-27T23:21:27.943
> 
> 标签：sharepoint-2010, multiple-instances, sitetemplate

正如标题所说，我的问题是在 SharePoint 2010 上以编程方式创建多个解决方案的网页；因为当我部署一个解决方案时，程序会识别我的站点模板，我可以毫无问题地创建，但是当我部署两个解决方案时，程序无法识别第二个站点模板。通常我**在 1033 上有 50 个站点模板**，**每个解决方案将 3 个模板添加到 1033**，但最后**我只找到 53**。

```
this.webTemplates = site.RootWeb.GetAvailableWebTemplates(1033);

int a = this.webTemplates.Count;

//a = 53    =( 
```

当我重新运行应用程序时，我找到了 56 个模板，但我需要将两种解决方案合二为一，并找到所有模板。那么，有一些服务我必须重新启动或更新某些元素？

提前致谢！对不起，如果我的英语不是那么好。

# java - 使用特殊 doclet 运行 Javadoc 时出现模糊 IOException

> ID：12631477
> 
> 赞同：2
> 
> 时间：2012-09-27T23:21:55.140
> 
> 标签：java, ant, javadoc, doclet

这*可能*是一个 doclet-implementation-specific 问题，但我相信它确实是我正在处理的 JavaDoc 配置问题。

我正在尝试让[yDoc UML Doclet](http://www.yworks.com/en/products_ydoc.htm)工作，以便它将为我的 Java 应用程序生成 UML 图，作为 Ant 构建的一部分。我下载了该项目（社区版）并尝试对其进行调整，`build-sample.xml`但无法使其正常工作。

这是我的项目目录结构：

```
MyProject/
    src/main/java/
        <All the Java sources I want documented and diagrammed>
    bin/main
        <Compiled binaries of src/main/java/>
    lib/
        styleed.jar
        ydoc.jar
    resources/
        <All the yDoc resources that came with the download>
    umldoclet/
        <Where I want all JavaDocs to go>
    build.xml 
```

这是`build.xml`：

```
<project name="MyProject" default="ydoc" basedir="." xmlns:ivy="antlib:org.apache.ivy.ant" xmlns:jacoco="antlib:org.jacoco.ant">

    <!-- The "compile" task and all its dependencies omitted for brevity,
         but they all absolutely work 100% and "compile" places compiled
         CLASS files under bin/main. -->

    <target name="ydoc" depends="compile">
        <property name="ydoc.home" value="${basedir}"/>

        <javadoc source="1.5" destdir="./umldoclet" additionalparam="-breakiterator">
            <packageset dir="src/main">
                <include name="java/**"/>
            </packageset>
            <doclet name="ydoc.doclets.YStandard" path="${ydoc.home}/lib/ydoc.jar;${ydoc.home}/resources">
                <param name="-author"/>
                <param name="-generic"/>
                <param name="-umlautogen"/>
                <param name="-filterpath" value="./lib/ydoc.jar"/>
                <param name="-filter" value="ydoc.filters.ExcludeFilter"/>
                <param name="-tag" value="y.precondition"/>
                <param name="-tag" value="y.postcondition"/>
                <param name="-tag" value="y.complexity"/>
                <param name="-tag" value="param"/>
                <param name="-tag" value="return"/>
                <param name="-tag" value="see"/>
                <param name="-tag" value="y.uml"/>
            </doclet>
        </javadoc>
    </target>
</project> 
```

当我运行`ydoc`任务时，即使使用`-v`参数在“详细”模式下运行 Ant，我看到`[ydoc]`任务在 Ant 控制台中被调用，然后是一条日志语句，内容为“生成 Javadoc”，以及来自详细输出的大约 20 行反刍`yDoc`参数返回给我，然后是最后一条日志消息，上面写着“Javadoc 执行”。然后，以下令人震惊的模糊`IOException`：

```
BUILD FAILED
<my-eclipse-home>/MyProject/build.xml:200: Javadoc failed: java.io.IOException: Cannot run program "javadoc": java.io.IOException: error=2, No such file or directory
    at org.apache.tools.ant.taskdefs.Javadoc.execute(Javadoc.java:1765)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:424)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:138)
Caused by: java.io.IOException: Cannot run program "javadoc": java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:475)
    at java.lang.Runtime.exec(Runtime.java:610)
    at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:862)
    at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:481)
    at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:495)
    at org.apache.tools.ant.taskdefs.Javadoc.execute(Javadoc.java:1759)
    ... 15 more
Caused by: java.io.IOException: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:164)
    at java.lang.ProcessImpl.start(ProcessImpl.java:81)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:468)
    ... 20 more 
```

有什么方法可以从 Ant 中获取更多详细信息？要找出它在异常中引用的文件或目录？以前有任何 JavaDoc/yDoc 大师遇到过这种情况吗？我的项目目录结构是否设置不正确，或者与 Ant 构建所寻找的不同？我*相信*我的`doclet/path`属性设置正确，并使用了正确的路径分隔符（我在 Ubuntu Linux 上）。对于我的一生，我无法弄清楚从这里去哪里，或者如何诊断这里的潜在问题！提前致谢！

**编辑/更新**：

感谢大家到目前为止的建议。我完全取消了 Eclipse（就构建而言，只是从命令行运行 Ant；现在这很好。当我这样做时，我得到了一个成功的构建（所以 Eclipse 至少部分是罪魁祸首)，但是仍然没有 yDoc 生成。

现在，当我使用 verbos ( ) 选项从终端运行 Ant 时`-v`，我看到的是：

数百个看起来相同但类别不同的​​警告：

```
[javadoc] Constructing Javadoc information...
[javadoc] /<path-to-my-project>/MyProject/src/main/java/com/some/pkg/SomeObject.java:11: package org.springframework.beans.factory.annotation does not exist
[javadoc] import org.springframework.beans.factory.annotation.Autowired;
[javadoc]                                                    ^ 
```

在数百个之后，我得到以下输出（我的源代码树中的每个包都有一个输出）：

```
[javadoc] javadoc: warning - No source files for package java.com.some.pkg.<whatever> 
```

最后，详细构建输出的最后一部分：

```
[javadoc] Valid license file found.
[javadoc] Registered Filter ydoc.filters.ExcludeFilter ...
[javadoc] Registered Taglet for tag @y.complexity ...
[javadoc] Registered Taglet for tag @y.precondition ...
[javadoc] Registered Taglet for tag @y.postcondition ...
[javadoc] Registered Taglet for tag @y.author ...
[javadoc] 1 error
[javadoc] 109 warnings
[javadoc] javadoc: error - No public or protected classes found to document.

BUILD SUCCESSFUL
Total time: 6 seconds 
```

此外，如果它正确执行，它应该将所有 JavaDocs`uml-doclet/`放在我的项目根目录下。它没有这样的事情！

所以看起来还有更多的事情发生：

1.  JavaDoc 看不到我的第 3 方依赖项（例如 Spring、Camel 等）；因此列出了数百个警告
2.  它找不到我要记录的任何来源

再次，赏金给任何可以帮助我完成这项工作的人。再次感谢迄今为止的所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T13:39:08.593

看起来 ant 找不到 javadoc 二进制文件。我不认为 ant 使用定义的 PATH 来查找 javadoc 二进制文件（文档说它使用与 ant 相同的 JDK）。

我会尝试的一些事情是：

*   将*可执行*属性添加到任务中，以指向 javadoc 二进制文件（我并不是说这是一个正确的解决方案，但如果它有效，则意味着默认情况下 ant 查找的位置存在问题）。
*   确保您的 JAVA_HOME 和 PATH 指向 JDK 而不是 JRE
*   确保您的 JAVA_HOME 指向您的 PATH 指向的同一个 java 安装。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T11:09:10.343

如果您执行 ant ，`-verbose -debug`您将看到以下行：

```
Setting project property: ydoc.home -> /var/tmp/ydoc-test
  [javadoc] scanning /var/tmp/ydoc-test/src/main for packages.
dirset: Setup scanner in dir /var/tmp/ydoc-test/src/main with patternSet{ includes: [java/**] excludes: [] }
  [javadoc] Generating Javadoc
  [javadoc] Executing '/usr/lib/jvm/java-7-openjdk-amd64/bin/javadoc' with arguments:
  [...] 
```

或者你会看到这些行：

```
Setting project property: ydoc.home -> /var/tmp/ydoc-test
  [javadoc] scanning /var/tmp/ydoc-test/src/main for packages.
dirset: Setup scanner in dir /var/tmp/ydoc-test/src/main with patternSet{ includes: [java/**] excludes: [] }
  [javadoc] Generating Javadoc
  [javadoc] Executing 'javadoc' with arguments: 
```

在第一种情况下，Eclipse/Ant 找到了一个有效的`javadoc`命令并在行中告诉你`[javadoc] Executing >FULL_PATHNAME_TO_JAVADOC>`。在第二种情况下，它只谈论`javadoc`没有任何路径名，调试输出稍后会显示您的异常。

我假设您的情况是第二个，但请检查一下！

如果 Eclipse / Ant 不知道`javadoc`您的位置，首先应该通过将 Eclipse 排除在等式之外来简化事情：使用命令行并检查键入这些命令是否不会导致“找不到命令”消息：

```
java
javac
javadoc 
```

我假设第一个没问题（毕竟你可以运行 Eclipse，如堆栈跟踪中所示）。如果没有找到第二个和第三个命令，则您的计算机上没有安装 JDK，而仅安装了 JRE。安装一个并重新启动 Eclipse。

另一方面，如果`javac`找到但`javadoc`没有找到，那么您的 JDK 已损坏。

如果两者`javac`都`javadoc`找到了，那么 Eclipse 根本不知道它。但在返回 Eclipse 之前，在命令 shell 中键入最后一个命令：

```
readlink -m $(which javadoc)/../.. 
```

记住路径`readlink`给你。

在 Eclipse 中，转到“Window -> Preferences -> Java -> Installed JREs”。在列表中选择带有选中复选框的条目，然后按“编辑”。如果“JRE home”行与`readlink`给你的路径不同，那么很可能你的 Eclipse 被配置为只使用本地 JRE 而不是你安装的 JDK。

如果是这种情况，请取消“编辑”对话框，按“添加”，选择“标准 VM”并输入`readlink`给您的路径。正确输入该路径后，Eclipse 应该为您填写其他字段，因此您可以说“OK”。回到“Installed JRE”列表中的新项目上打勾。

之后，`javadoc`任务本身应该开始。

**编辑**

但是，您需要进行更多调整：

第一：在这部分：

```
 <packageset dir="src/main">
            <include name="java/**"/>
        </packageset> 
```

您正在混合源目录和包部分。它应该是：

```
 <packageset dir="src/main/java">
       </packageset> 
```

还`javadoc`喜欢访问引用的类。因此，您应该向 javadoc 添加与编译代码相同的类路径。所以在 . 之后添加一个适当的`<classpath>`部分`</packageset>`。这将处理“包 xyz 不存在”警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:54:02.740

我会在您的 build.xml 中更改这些行：

```
<packageset dir="src/main/java">
    <include name="**" />
</packageset> 
```

# jquery - 带有前置/附加功能的 jQuery 菜单悬停在不同的浏览器中无法正常工作

> ID：12631478
> 
> 赞同：1
> 
> 时间：2012-09-27T23:22:07.670
> 
> 标签：jquery, jquery-hover, jquery-append

我的脚本在 FF、Opera 和 IE 中几乎可以完美运行。Chrome 和 Safari 的行为略有不同。

悬停似乎工作正常。但是当我将鼠标悬停在“选定的”li 上时，它会附加一个额外的 div。这个额外的 div 与现有 div 重叠，并且不会提供平滑的悬停效果。Chrome 和 Safari 的行为与这个额外的 div 有点不同。当我在 Chrome 和 Safari 中将鼠标悬停在选定的 li 上时，它们会从选定的 li 中删除 div 并将其添加到第一个之前。我知道这个额外的 div 在 jQuery 脚本中来自哪里，但我无法解决这个问题。

HTML：

```
<div class="navigation">
<ul class="nav">
    <li class="first"><a href="#">List 1</a></li>
    <li class=""><a href="#">List 2</a></li>
    <li class=""><a href="#">List 3</a></li>
    <li class="last selected"><a href="#">List 4</a></li>
</ul> 
```

​</p>

CSS：

```
ul.nav li div.menu-hover { 
  width:10px; height:10px;
  background-color:black; position:absolute; left:40px; display:none;
}​ 
```

jQuery：

```
$("ul.nav > li").hover(

function() {
    $(this).prepend("<div class='menu-hover'></div>");
    $("ul.nav > li div.menu-hover").fadeIn("slow");
}, function() {
    $(this).find("div:last").remove();
});

$("ul.nav > li.selected").prepend("<div class='menu-hover'></div>");
$("ul.nav > li.selected > div.menu-hover").fadeIn("slow");​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:44:14.640

hover(function1, function2) jQuery 函数有 2 个参数，即 2 个回调函数，分别在触发 mouseOver 事件和触发 mouseOut 时调用。

在您的代码中，就在您的悬停定义之后，您手动添加了选定的菜单，但悬停功能不管理以前的手动添加，因此您应该在代码中添加这种特定情况。（当您第一次在菜单上使用鼠标进入时，没有 mouseOut 事件。）

```
$(document).ready(function() {

    $("ul.nav > li").hover(function() {
        // previously remove all potential menu-hover
        $(".menu-hover").remove();

        // prepend the menu at the good place and show it smoothly
        $(this).prepend("<div class='menu-hover'></div>");
        $("ul.nav > li div.menu-hover").fadeIn("slow");
    }, function() {
        // remove the menu on mouse Out
        $(this).find("div:last").remove();
    });

    // Manually select the first menu
    $("ul.nav > li.selected").prepend("<div class='menu-hover'></div>");
    $("ul.nav > li.selected > div.menu-hover").fadeIn("slow");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:32:55.157

如果当前的菜单悬停（当前选择的菜单）应该是固定的，你可以测试这个版本的代码。它保持当前菜单悬停不变并管理其他菜单上的悬停（）。这是菜单的基本行为。

```
$(document).ready(function() {

    $("ul.nav > li").hover(function() {

        // Do not append menu-hover on selected li
        if ($(this).hasClass('selected'))
        return;

        // Append menu-hover on non-selected li
        $(this).prepend("<div class='menu-hover'></div>");
        $("ul.nav > li div.menu-hover").fadeIn("slow");

    }, function() {

        // Do not remove menu-hover on selected li
        if ($(this).hasClass('selected'))
            return;

        // Remove menu-hover on non-selected li
        $(this).find("div:last").remove();
    });

    // Manually set the current menu-hover
    $("ul.nav > li.selected").prepend("<div class='menu-hover'></div>");
    $("ul.nav > li.selected > div.menu-hover").fadeIn("slow");

}); 
```

# linux - 在屏幕中启动脚本

> ID：12631479
> 
> 赞同：9
> 
> 时间：2012-09-27T23:22:09.897
> 
> 标签：linux, shell, command-line, gnu-screen

我想从脚本在屏幕内启动一个 python 脚本。我试过这个

```
screen -dmS gateway_monitor;screen -r gateway_monitor -p 0 -X '/usr/bin/python /root/Gateway.py' 
```

但如果我之后重新连接到屏幕，它只是空的，看起来根本没有执行任何操作。任何线索为什么会这样或我如何实现我想要的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-08-26T16:29:07.253

您可以使用：

```
screen -dm bash -c 'python your_script.py' 
```

如果您需要多个命令，请使用`;`：

```
screen -dm bash -c 'source ~/.bash_profile; python your_script.py' 
```

* * *

文档：

[https://www.gnu.org/software/screen/manual/screen.html](https://www.gnu.org/software/screen/manual/screen.html)：

> -d -m：以分离模式启动屏幕。这会创建一个新会话，但不会附加到它。这对于系统启动脚本很有用。

[http://linux.about.com/library/cmd/blcmdl1_sh.htm](http://linux.about.com/library/cmd/blcmdl1_sh.htm)：

> -c 字符串：如果存在 -c 选项，则从字符串中读取命令。如果字符串后面有参数，则将它们分配给位置参数，从 $0 开始。

# javascript - 在 for 循环之外声明一个变量 (var i=0) 是否有帮助？

> ID：12631481
> 
> 赞同：1
> 
> 时间：2012-09-27T23:22:19.083
> 
> 标签：javascript, for-loop

> **可能重复：**
> [JavaScript 变量在循环外部或内部声明？](https://stackoverflow.com/questions/3684923/javascript-variables-declare-outside-or-inside-loop)

所以..我看过很多文章说我们应该使用以下样式。

```
var i;
for(i=0;i <= 10; i++) {
  // do something here
} 
```

我一直在使用上述风格，但我只是想知道除了可读性之外它是否真的有帮助。

是不是和下面的一样？

```
for(var i=0; i<=10; i++) {

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:33:51.417

如果出于某种原因（绝不应该如此）您在函数的上下文之外用相同的名称声明了一个全局变量，则会有所不同。

[http://jsfiddle.net/bFRKU/](http://jsfiddle.net/bFRKU/)

```
var i = 'global'; 

function test(){
    alert(i);   
    for(var i = 0; i < 10; i++){
     //do something   
    }
}
test(); 
```

在上面的示例中，您会注意到警报返回“未定义”。这是因为变量定义被提升到函数的顶部（无论它们在函数中的何处声明）。所以实际上，上面的解释为：

[http://jsfiddle.net/bFRKU/1/](http://jsfiddle.net/bFRKU/1/)

```
var i = 'global'; 

function test(){
    var i; 
    alert(i);   
    for(i = 0; i < 10; i++){
     //do something   
    }
}
test(); 
```

因此警报“未定义”。最终，将变量声明放在函数顶部的唯一原因是为了减少这种潜在的混乱。​​​

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:28:23.057

两者之间没有显着差异——纯粹是见仁见智。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:29:16.253

1.  一样的
2.  这样做是因为在 JS 中，实践是确保在函数顶部的一个位置声明变量。明确地因为没有块范围，并且因为潜在的范围链解析错误。
    该错误不会来自声明`var`，而是来自忘记并依赖块范围来支持您（它没有，因为它不存在）。

# node.js - Websocket压缩位必须为0

> ID：12631483
> 
> 赞同：1
> 
> 时间：2012-09-27T23:22:21.020
> 
> 标签：node.js, express, socket.io, node-http-proxy

我有这个设置：
用户进入我的域，在这个域后面是一个 node-http-proxy 服务器的实例。node-http-proxy 服务器将 http 请求代理到我的一台服务器。服务器使用 express 和 socket.io 作为聊天服务。

该请求通过我的一台服务器。Socket.io 和 express 应有的响应（发送 html 和 socket.io 客户端）。然后，尝试握手，但失败`Compressed bit must be 0 if no negotiated deflate-frame extension`

我的设置有问题吗？如果没有中间的 node-http-proxy 服务器，一切正常。

# php - 样式帖子的数量可以变化吗？

> ID：12631484
> 
> 赞同：0
> 
> 时间：2012-09-27T23:22:35.603
> 
> 标签：php, css

预警：我不擅长 CSS。

您好，我正在制作一个小留言板，其中显示 3 个最近的帖子。我还希望用户选择在一个屏幕上显示多少个帖子，比如 5 个或 10 个帖子。

目前我有它，以便所有帖子都以这种方式打印出来：

```
while ($i < $d){
// $d is entered by the user to determine how many posts are to be displayed.
    if ($i == $id_Max){
        echo "Reached last known post.";
        break;
    }

    $query2 = $con->prepare(
    "SELECT postName, postPath FROM " . $table .
    " WHERE id=(SELECT MAX(id-".$i.") FROM " . $table . ")"
    );
    $query2->execute();
    $result2 = $query2->fetch();
    $path = $result2["postPath"];
    $file = file_get_contents($path);

    echo "<article class = 'entry'>";

    echo "<section id = 'entryTitle'>";
    echo $result2["postName"] . "<br />";
    echo "</section>";

    echo $file;
    echo "<br />";

    echo "</article>";

    $i++;
} 
```

因此，打印的每个帖子都有`entry`. 有了这个我给每个帖子一个边框，但我想让它们之间有大约 5px 的空间。我设置了它们`position: relative`，`top: 5px`但它只对最顶部的条目生效，并将它们全部从页面顶部向下移动 5px。

本质上，我希望在全球范围内进行一些工作，而不必为每个可能的帖子写出一些东西。`#entry1`, `#entry2`...

我并不是真的在寻找如何做这个特定的事情，而是更多我可以从中学到的东西，以应用于未来的事情。

谢谢， - 迈克尔米切尔

（如果我不清楚，请告诉我，我会尝试更好地解释。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:39:26.930

我看到这里有几件事出错了。

首先，元素之间的间距通常用边距处理：

```
/* all .entry elements */
.entry { margin-top: 10px }
/* all but the first .entry elements */
.entry + .entry { margin-top: 10px } 
```

其次，看起来您在不需要时向数据库发出多个请求。您想要的查询如下所示：

```
SELECT postName, postPath FROM tablename ORDER BY date_added DESC LIMIT ? 
```

这将为您提供可以迭代的顶级条目的列表，并且比发出多个请求要快得多*。*如果您希望返回的条目数是可配置的，请绝对确保您正在清理/转义该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:34:43.430

'top' css 属性通常只适用于绝对位置的元素。您将希望入门类具有：

```
margin-bottom:5px; 
```

或者

```
margin-top:5px; 
```

我认为您也不需要该`position:relative`属性来执行此操作。

# python - 在 Python 中跨多个列表查找最相似的数字

> ID：12631486
> 
> 赞同：9
> 
> 时间：2012-09-27T23:22:50.177
> 
> 标签：python, list

在 Python 中，我有 3 个浮点数（角度）列表，范围为 0-360，并且这些列表的长度不同。我需要找到数字最接近的三元组（每个列表中有 1 个数字）。（任何数字都不太可能相同，因为这是真实世界的数据。）我正在考虑使用一种简单的最低标准偏差方法来衡量一致性，但我不确定一个好的方法来衡量一致性实现这一点。我可以遍历每个列表，使用嵌套的 for 循环比较每个可能组合的标准偏差，并有一个临时变量保存最一致的三元组的索引，但我想知道是否有人有更好或更优雅的方法来做这样的事情。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T23:40:45.077

如果有一个既定的算法可以做到这一点，我不会感到惊讶，如果是这样，你应该使用它。但我不知道一个，所以我要推测一下。

如果我必须这样做，我会尝试的第一件事就是遍历所有数字的所有可能组合，看看需要多长时间。如果你的数据集足够小，就不值得花时间去发明一个聪明的算法。为了演示设置，我将包含示例代码：

```
# setup
def distance(nplet):
    '''Takes a pair or triplet (an "n-plet") as a list, and returns its distance.
    A smaller return value means better agreement.'''
    # your choice of implementation here. Example:
    return variance(nplet)

# algorithm
def brute_force(*lists):
    return min(itertools.product(*lists), key = distance) 
```

对于大型数据集，我会尝试这样的事情：首先为第一个列表中的每个数字创建一个三元组，并将其第一个条目设置为该数字。然后浏览这个部分填充的三元组列表，并为每个三元组从第二个列表中选择最接近第一个列表中的数字的数字，并将其设置为三元组的第二个成员。然后浏览三元组列表，并为每个三元组从第三个列表中选择最接近前两个数字的数字（根据您的协议指标衡量）。最后，采取最好的一堆。此示例代码演示了如何尝试使运行时与列表的长度保持线性。

```
def item_selection(listA, listB, listC):
    # make the list of partially-filled triplets
    triplets = [[a] for a in listA]
    iT = 0
    iB = 0
    while iT < len(triplets):
        # make iB the index of a value in listB closes to triplets[iT][0]
        while iB < len(listB) and listB[iB] < triplets[iT][0]:
            iB += 1
        if iB == 0:
            triplets[iT].append(listB[0])
        elif iB == len(listB)
            triplets[iT].append(listB[-1])
        else:
            # look at the values in listB just below and just above triplets[iT][0]
            # and add the closer one as the second member of the triplet
            dist_lower = distance([triplets[iT][0], listB[iB]])
            dist_upper = distance([triplets[iT][0], listB[iB + 1]])
            if dist_lower < dist_upper:
                triplets[iT].append(listB[iB])
            elif dist_lower > dist_upper:
                triplets[iT].append(listB[iB + 1])
            else:
                # if they are equidistant, add both
                triplets[iT].append(listB[iB])
                iT += 1
                triplets[iT:iT] = [triplets[iT-1][0], listB[iB + 1]]
        iT += 1
    # then another loop while iT < len(triplets) to add in the numbers from listC
    return min(triplets, key = distance) 
```

问题是，我可以想象实际上找不到最佳三元组的情况，例如，如果第一个列表中的数字接近第二个列表中的一个，但根本不接近第三个列表中的任何数字。因此，您可以尝试对列表的所有 6 种可能排序运行此算法。我想不出一种无法找到最佳三元组的具体情况，但可能仍然存在。在任何情况下，如果您使用巧妙的实现，假设列表已排序，算法仍然是 O(N)。

```
def symmetrized_item_selection(listA, listB, listC):
    best_results = []
    for ordering in itertools.permutations([listA, listB, listC]):
        best_results.extend(item_selection(*ordering))
    return min(best_results, key = distance) 
```

另一种选择可能是计算列表 1 和列表 2 之间、列表 1 和列表 3 之间以及列表 2 和列表 3 之间的所有可能的数字对。然后将所有三个对列表一起排序，从两者之间的最佳到最差一致性数字。从最接近的一对开始，逐对遍历列表，任何时候遇到与你已经见过的一个共享数字的一对，将它们合并为一个三元组。对于合适的一致性度量，一旦找到第一个三元组，这将为您提供需要迭代的最大对距离，一旦达到它，您只需选择最接近的三元组成立。我认为应该始终找到最好的三元组，但由于需要对对列表进行排序，它将是 O(N^2 log N)。

```
def pair_sorting(listA, listB, listC):
    # make all possible pairs of values from two lists
    # each pair has the structure ((number, origin_list),(number, origin_list))
    # so we know which lists the numbers came from
    all_pairs = []
    all_pairs += [((nA,0), (nB,1)) for (nA,nB) in itertools.product(listA,listB)]
    all_pairs += [((nA,0), (nC,2)) for (nA,nC) in itertools.product(listA,listC)]
    all_pairs += [((nB,1), (nC,2)) for (nB,nC) in itertools.product(listB,listC)]
    all_pairs.sort(key = lambda p: distance(p[0][0], p[1][0]))
    # make a dict to track which (number, origin_list)s we've already seen
    pairs_by_number_and_list = collections.defaultdict(list)
    min_distance = INFINITY
    min_triplet = None
    # start with the closest pair
    for pair in all_pairs:
        # for the first value of the current pair, see if we've seen that particular
        # (number, origin_list) combination before
        for pair2 in pairs_by_number_and_list[pair[0]]:
            # if so, that means the current pair shares its first value with
            # another pair, so put the 3 unique values together to make a triplet
            this_triplet = (pair[1][0], pair2[0][0], pair2[1][0])
            # check if the triplet agrees more than the previous best triplet
            this_distance = distance(this_triplet)
            if this_distance < min_distance:
                min_triplet = this_triplet
                min_distance = this_distance
        # do the same thing but checking the second element of the current pair
        for pair2 in pairs_by_number_and_list[pair[1]]:
            this_triplet = (pair[0][0], pair2[0][0], pair2[1][0])
            this_distance = distance(this_triplet)
            if this_distance < min_distance:
                min_triplet = this_triplet
                min_distance = this_distance
        # finally, add the current pair to the list of pairs we've seen
        pairs_by_number_and_list[pair[0]].append(pair)
        pairs_by_number_and_list[pair[1]].append(pair)
    return min_triplet 
```

请注意，我在此答案中编写的所有代码示例比您在实践中所做的更明确一些，以帮助您了解它们的工作原理。但是当真正做到这一点时，你会使用更多的列表推导和类似的东西。

NB2。不能保证代码可以工作:-P，但它应该能让你大致了解一下。

# c# - Stackpanel/Itemscontrol 数据绑定

> ID：12631487
> 
> 赞同：1
> 
> 时间：2012-09-27T23:23:02.490
> 
> 标签：c#, itemscontrol, stackpanel

我有这个 XAML：

```
 <ItemsControl x:Name="recentSearches"
               Margin="0,65,0,0">
               <ItemsControl.ItemsPanel>
                   <ItemsPanelTemplate>
                         <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                         <TextBlock Text="{Binding q}"
                                TextWrapping="Wrap"
                                Foreground="AliceBlue"
                                Padding="2,6,2,2"
                                Margin="12,-6,12,0"
                                FontSize="20" />
                      </DataTemplate>
                 </ItemsControl.ItemTemplate> 
```

后面的代码：

```
private void showLatestSearches()
        {
            if (fmn.checkLatestSearchesExtistence())
            {
                List<RecentSearchItem> recent = new List<RecentSearchItem>();
                List<String> l = fmn.readLatestSearches();
                for (int i = 0; i <= l.Count-1; i += 1)
                {
                    RecentSearchItem r = new RecentSearchItem();
                    r.q = l[i];
                    r.generalbg = grau;
                    recent.Add(r);
                }
                recentSearches.DataContext = recent;
            }
        } 
```

名为 fmn 的对象从隔离存储中读取 .txt。但是为什么这个 StackPanel 没有任何显示呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:27:04.273

`ItemsControl.ItemsSource`必须绑定到一个集合，对于通知，最好是`ObservableCollection<T>`.

您在最后一分钟设置 DataContext，更好的方法是将 DataContext 设置为 ViewModel，可以在您创建视图的地方。

```
public class Form :UserControl
{
  DataContext = new YourViewModel() ;
} 
```

在 XAML 中：

```
ItemsSource="{Binding SearchesCollection}" 
```

`SearchesCollection`将是`YourViewModel`类型的属性`ObservableCollection<string>`。每当您将新项目添加到`SearchesCollection`视图更新时。

[这个数据绑定教程](http://miteshsureja.blogspot.ie/2011/07/binding-observablecollection-to-listbox.html)应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:48:08.607

感谢 Lews Therin，我终于设法将我的数据绑定到堆栈面板：

```
<ItemsControl x:Name="recentSearches"
              ItemsSource="{Binding recent}"
              Background="{Binding generalbg}"
              Margin="0,65,0,0" Tap="recentSearches_Tap">
                    <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding q}"
                                               Foreground="{Binding foreground}"
                                               TextWrapping="Wrap"
                                               Padding="2,6,2,2"
                                               Margin="12,-6,12,0"
                                               FontSize="20" />
                     </DataTemplate>
                            </ItemsControl.ItemTemplate>
 </ItemsControl> 
```

以及背后的代码：

```
private void showLatestSearches()
{
    if (fmn.checkLatestSearchesExtistence())
    {
        List<RecentSearchItem> recent = new List<RecentSearchItem>();
        List<String> l = fmn.readLatestSearches();
        for (int i = 0; i <= l.Count-1; i += 1)
        {
            RecentSearchItem r = new RecentSearchItem();
            r.q = l[i];
            r.generalbg = grau;
            r.foreground = blau;
            recent.Add(r);
        }
        recentSearches.ItemsSource = recent;
    }
} 
```

这行得通，但不幸的是，似乎没有办法确定，当一个文本框被点击时，哪个文本框被点击了。

# iphone - RootViewController 的视图没有通过自动布局调整大小

> ID：12631489
> 
> 赞同：1
> 
> 时间：2012-09-27T23:23:13.877
> 
> 标签：iphone, ipad, ios6, autolayout

嗨，在 iOS 6 上使用自动布局时，我的 rootViewController 的“rootView”似乎根本无法正确调整大小。

我的 rootViewController 是从 nib 加载的，我将它添加到视图层次结构中，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];

RootVC *rootVC = [[RootVC alloc] initWithNibName:@"RootVC" bundle:nil];
self.window.rootViewController = rootVC;

return YES; 
```

}

但是当我旋转模拟器时，rootVC 的视图不会调整大小。由于您无法在 xib 中对“rootview”设置任何约束，因此我也尝试了此操作，但没有任何效果：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];

RootVC *rootVC = [[RootVC alloc] initWithNibName:@"RootVC" bundle:nil];
self.window.rootViewController = rootVC;
NSArray *vConst = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view]|" options:0 metrics:nil views:@{@"view" : rootVC.view}];

NSArray *hConst = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[view]|" options:0 metrics:nil views:@{@"view" : rootVC.view}];

[self.window addConstraints:vConst];
[self.window addConstraints:hConst];

return YES; 
```

}

当我注销 rootvc 视图的帧大小时，它始终是纵向格式（w：768，h：1024）

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
NSLog(@"%f, %f", self.view.frame.size.width, self.view.frame.size.height); 
```

}

有人可以告诉我我在这里缺少什么吗？我在这个问题上浪费了几个小时，却一无所获^^

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T08:39:55.360

似乎 iOS 6 的自动布局功能可能会出现很多问题。约束中的歧义以及未能禁用视图控制器中的 translatesAutoresizingMaskIntoConstraints 可能会导致很多冲突。因此，通过调用 lldb 中的 autolayoutTrace 方法确保约束中没有歧义：`po [[UIWindow keyWindow] _autolayoutTrace]` 如果存在歧义，则必须解决它们。

# python - 将值写入 Python 中的单个 CSV 文件索引

> ID：12631493
> 
> 赞同：0
> 
> 时间：2012-09-27T23:23:36.590
> 
> 标签：python, csv, integer, row, writer

我最近一直在阅读 csv 文件，现在我想将单个值从 python 中定义的整数重写为一行。这是我的阅读代码；

```
n=random.randint(0, 20)
cr = csv.reader(open('E:/file.csv', 'r'))
for row in cr:
     labelNUMBER.config(text = row[n]) 
```

我的编写代码；

```
newnumber = 2
crwrite = csv.writer(open('E:/file.csv', 'r+'))
crwrite.writerow(n[newnumber]) 
```

这显然是行不通的。但我想在一个 csv 文件中写一行，它本质上是

```
 1,1,1,1,1,1,1,1,1 
```

并做到

```
 1,1,1,2,1,1,1,1,1 
```

假设我的随机数 n 等于 3。

如果有办法以这种方式重写单个值，我希望得到一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:37:58.270

这看起来对吗？

你必须把整行都给作者。另请注意，使用该`csv`模块时，您应该以二进制模式打开文件，`"rb"`.

```
element_to_modify_idx = 2
reader = csv.reader(open("infile.csv", "rb"))
writer = csv.writer(open("outfile.csv", "wb"))
for row in reader:
    # modify desired element in row
    row[element_to_modify_idx] = "fancy new value"
    writer.writerow(row) 
```

# python - 当分母是分数本身时对分数进行排序

> ID：12631495
> 
> 赞同：1
> 
> 时间：2012-09-27T23:23:40.507
> 
> 标签：python, fractions

几分钟前，我问了一个关于排序字典的问题，其中键是分数（简单分数）。

我现在知道我必须使用分数模块，但是当分数的分母是分数本身时，该模块不起作用。

例如

"1/1.6", 1/2.5"

```
>>> import fractions
>>> f = '1/1.6'
>>> fractions.Fraction(f)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/fractions.py", line 125, in __new__
    numerator)
ValueError: Invalid literal for Fraction: '1/1.6' 
```

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T23:43:25.723

Python 的`fractions`模块旨在使用精确的有理数（无论是分数、小数还是其他），而不是近似浮点数。因此，他们故意没有使用一对`float`s 或由两个浮点数组成的字符串分数的构造函数。

但是，它们*确实*有一个构造函数，该构造函数采用单个`float`或单个字符串浮点数。如果你知道这是你真正想要的，你可以这样做：

```
>>> f = Fraction('1') / Fraction('1.6')
Fraction(5, 8)
>>> f = Fraction(1) / Fraction(1.6)
Fraction(2251799813685248, 3602879701896397) 
```

您可能会注意到`Fraction('1.6')`返回的内容与`Fraction(1.6)`. 前者返回将呈现为“1.6”的最简单的分数；后者返回与不精确浮点值 1.6 匹配的最简单分数。

所以：

```
>>> a = ['1/1.6', '1/2.5', '3/4', '1.1/10']
>>> nd = [x.split('/') for x in a]
>>> nd
[['1', '1.6'], ['1', '2.5'], ['3', '4'], ['1.1', '10']]
>>> f = [Fraction(x[0]) / Fraction(x[1]) for x in nd]
>>> f
[Fraction(5, 8), Fraction(2, 5), Fraction(3, 4), Fraction(11, 100)]
>>> sorted(f)
[Fraction(11, 100), Fraction(2, 5), Fraction(5, 8), Fraction(3, 4)] 
```

把它们放在一起，如果你想按照小数点的等效值对字符串列表进行排序：

```
>>> def fractionize(s):
>>>   n, d = s.split('/')
>>>   return Fraction(n) / Fraction(d)
>>> sorted(a, key=fractionize)
['1.1/10', '1/2.5', '1/1.6', '3/4'] 
```

当然，如果您需要做很多此类事情，您可能想要编写自己的分数模块（或查看已经编写的数千个在线食谱），它可以只处理 '1/1.6'你想要的方式，所以你不需要这个`fractionize`功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:29:14.290

您可以`eval`使用数组的所有元素，如下所示：

```
a = ["1/1.6","1/2.5","6+7","-1*3"]
sorted(a, key=eval) 
```

返回

```
['-1*3', '1/2.5', '1/1.6', '6+7'] 
```

它可能有点慢，但它应该工作。

请注意，您需要`python3`让分数`1/3`正常工作（因为在 python2`/`中是整数除法，而不是浮点除法。要修复，您可以添加`'1.0*'`到所有字符串的开头）。

# syslog - 为什么 syslogd-ng 两次打印方括号中的项目

> ID：12631499
> 
> 赞同：1
> 
> 时间：2012-09-27T23:24:19.163
> 
> 标签：syslog, syslog-ng

我正在使用 syslogd-ng 并注意到命令：logger [test] message

导致以下日志消息：Sep 17 15:39:09 Test: [test] [test] message

其中优先级已被删除。为什么在单词 test 周围添加方括号会这样做？

# list - 将列表中的每个数字乘以一个数字

> ID：12631500
> 
> 赞同：3
> 
> 时间：2012-09-27T23:24:21.000
> 
> 标签：list, function, haskell

我是haskell的新手，我正在尝试制作一个将int乘以列表的每个元素的函数。

例子：

```
mult 2 [2,4,6] 
```

回报：

```
[4,8,12] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T23:37:05.750

将问题分解为概念步骤：

*   你想对列表的每个元素做一些事情，这是`map`函数提供的一般操作。使用它，您可以忽略列表，只考虑您需要对单个元素执行的操作。

*   您想将两个数字相乘。在函数的任何一次使用中，其中一个数字将是常数，因此我们可以给它一个名称作为函数的参数：`mult x = ...`. 现在我们可以把`x`它当作一个常数，只关心另一个数字。

*   另一个数字不是常数，所以你需要一个函数，而不仅仅是一个简单的表达式。Haskell 提供了“运算符部分”来使用中缀运算符来执行此操作，例如`(*)`，因此使用`x`我们 get `(x *)`。

*   退出最后几个步骤，您现在要给出`x`一个名称，并创建一个函数，然后将其传递给`map`

```
mult x = map (x *) 
```

......如果你愿意的话，你实际上已经完成了。但是对于初学者来说，将列表作为明确的参数可能会更清楚：

```
mult x ys = map (x *) ys 
```

不过，这两种形式都做同样的事情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-27T23:32:17.740

我最初以一种有点不屑一顾的高尔夫风格回答了这个问题，所以让我们再试一次。我的意图是双重的：赎回自己为新人写了一个令人讨厌的睡眠剥夺的答案，:-)，并尝试暗示无意义的风格：

```
mult_l = map . (*) 
```

那个代码有什么作用？

以流水线的方式考虑它是有帮助的：

*   该代码接受`(*)`并将*其输入*到`map`.

*   是什么类型的`(*)`？嗯，是的`Num a => a -> a -> a`。这意味着它做*什么*？接受一个数字（调用它`x`），并给你另一个函数，这个函数将——如果给定另一个数字（调用它`y`）——计算`x`“次” `y`。（我把“次”放在括号中，因为`Num`它是一个类型类......）

*   现在您将*使用* `(*)`. `map`做什么`map`？好吧，让我们看看它的类型：`(a -> b) -> [a] -> [b]`. 所以现在，`map`将一个函数作为参数并将该函数应用于列表的每个成员。

现在想想组合是如何工作的：`(f . g) x = f (g x)`.

如果给定一个论点，说 2：

```
mult_l 2 
```

是真的

```
(map . (*)) 2 
```

这*真的*只是：

```
map (* 2) 
```

现在，`map`接受两个参数，一个函数（表示“你想让我做什么？”）和一个列表（表示“你想让我做什么？”）。 `map`然后获取该列表中的每个项目，并将函数应用于元素，逐点进行。

这意味着，如果您采取以下措施：

```
map (* 2) [1,2,3] 
```

然后 map 将获取列表，并查看第一个元素，然后将其乘以 2，查看第二个元素，等等...

所以 的*类型*是`map . (*)`，`Num a => a -> [a] -> [a]`因为它*接受*一个数字`x`，然后将高阶函数`\x -> (* x)`提供给`map`。

现在你面临的挑战问题（因为你是 Haskell 的新手），是如何写`map`？我给你一个提示：

*   如果要在空列表上映射函数，则返回空列表。
*   如果你想将一个函数映射到一个列表的*头上*，连同它的尾，你取头，将函数应用到头上，然后对列表的其余部分做同样的事情。

由此你得到 的递归定义`map`，以及相关的归纳原则。

你可能会疑惑的另一件事是：为什么我必须写`map . (*)`而不是`map (*)`. [如果您考虑一下这个问题，您可能会对无点风格](http://www.haskell.org/haskellwiki/Pointfree)变得更加开明

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-28T02:34:55.527

由于没有人谈论列表推导，所以只是讲述另一种方式。

```
mult x ys = [i*x | i <- ys] 
```

# core-plot - 如何创建自定义的固定宽度列/x-label？

> ID：12631504
> 
> 赞同：0
> 
> 时间：2012-09-27T23:24:41.300
> 
> 标签：core-plot, scatter-plot

**目标：**为每个数据生成固定宽度的月份列。
**问题：**每个#data 点的列宽不同。
因此，由于缺少特定月份的数据，一些标签会聚集在一起 （例如，'JanFeb' vs 'Jan....Feb'）。

以下代码片段创建新标签/月，但无法控制在 x 轴上静态放置标签；因此，如果该特定月份的数据项很少（点数较少），则某些标签可能会合并：

```
 for (PerformanceDataItem *item in perfDataArray) {
    if (![item.month isEqualToString:currentMonth]) {
        currentMonth = item.month;
        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:item.month textStyle:x.labelTextStyle];
        newLabel.tickLocation = [[NSDecimalNumber numberWithInt:index] decimalValue];
        newLabel.offset = 2;
        [customLabels addObject:newLabel];
        [newLabel release]; 
    }
    ++index;    
} // end for().

x.axisLineStyle = nil;
x.majorTickLineStyle = nil;
x.minorTickLineStyle = nil;
x.labelingPolicy =  CPTAxisLabelingPolicyNone;

NSSet* customlabelSet = [NSSet setWithArray:customLabels];
x.axisLabels = customlabelSet; 
```

**问题：**如何创建自定义的固定宽度列集来绘制数据？

...仅将 x.labelingPolicy 设置为

```
CPTAxisLabelingPolicyFixedInterval
```

与使用我自己的 NSString 标签相比，使用大量数字 (1.0 - x.0) 会使 x 轴混乱。

**还尝试过：** a）更改 plotSpace.xRange；b) 更改 x.majorIntervalLength。

**偏好：**自定义标签：`CPTAxisLabelingPolicyFixedInterval`

PS我假设加宽细列（数据更少）只会推断下个月的下一个数据点；无需填写任何缺失的数据点以等于相邻月份的一组点。

==============================

基于评论的解决方案：

> plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) 长度:CPTDecimalFromUnsignedInteger(100)];
> 
> axisFixedInterval.majorIntervalLength = CPTDecimalFromDouble(25.0); NSDateComponents *dateComponents = [[NSDateComponents alloc] init];
> 
> ```
> // Set begining date to April 1, 2012:
> [dateComponents setMonth:4];
> [dateComponents setDay:1];
> [dateComponents setYear:2012];
> [dateComponents setHour:0];
> [dateComponents setMinute:0];
> [dateComponents setSecond:0];
> NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
> NSDate *refDate = [gregorian dateFromComponents:dateComponents];
> [dateComponents release];
> [gregorian release];
> 
> NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
> dateFormatter.dateStyle = kCFDateFormatterMediumStyle;
> [dateFormatter setDateFormat:@"MMM"];
> 
> CPTCalendarFormatter *calFormatter = [[[CPTCalendarFormatter alloc] initWithDateFormatter:dateFormatter] autorelease];
> calFormatter.referenceDate = refDate;
> calFormatter.referenceCalendarUnit = kCFCalendarUnitMonth;
> 
> axisFixedInterval.labelFormatter = calFormatter;
> 
> [dateFormatter release]; 
> ```

...这会给我一个 3 个字符月的固定分布：[Apr, May, Jun, Jul, Aug]; 对于 5 个刻度位置。

...来自 plot_gallery_ios 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:09:47.393

You could use the `CPTAxisLabelingPolicyFixedInterval` labeling policy and a `labelFormatter` that creates month labels. Core Plot provides two different date formatters that might help: [CPTCalendarFormatter](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_calendar_formatter.html) and [CPTTimeFormatter](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_time_formatter.html). Which one you choose depends on how you're coding the date values in your dataset.

# silverlight - Silverlight 5 应用程序：错误 12 XML 命名空间“http://schemas.microsoft.com/winfx/2006/xaml/presentation”中不存在标记“绑定”

> ID：12631506
> 
> 赞同：1
> 
> 时间：2012-09-27T23:25:14.123
> 
> 标签：silverlight, binding

我通过 VS2010 制作了一个简单的 Silverlight 5 应用程序，以在我的组织的业务应用程序中跟踪 Silverlight 4 到 Silverlight 5 转换问题中的更大问题。

**这是应用程序的客户端部分：**

```
<UserControl x:Class="SilverlightApplication1.MainPage" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             mc:Ignorable="d" 
             d:DesignHeight="300"  
             d:DesignWidth="400"> 

    <StackPanel> 

        <TextBlock 
                Text="{Binding Path=Rate}" 
                Grid.Column="1" 
                Grid.Row="1" 
                x:Name="xTest" 
                FontSize="12" 
                Margin="166,0,0,44" 
                HorizontalAlignment="Left" 
                Foreground="Black" 
                VerticalAlignment="Bottom"> 
        </TextBlock> 

    </StackPanel> 
</UserControl> 
```

**代码隐藏：**

```
using System; 
using System.Collections.Generic; 
using System.Linq; 
using System.Net; 
using System.Windows; 
using System.Windows.Controls; 
using System.Windows.Documents; 
using System.Windows.Input; 
using System.Windows.Media; 
using System.Windows.Media.Animation; 
using System.Windows.Shapes; 

namespace SilverlightApplication1 
{ 
    public partial class MainPage : UserControl 
    { 
        public MainPage() 
        { 
            InitializeComponent(); 
            Rate = 25; 
        } 

        public int Rate { get; set; } 
    } 
} 
```

**运行应用程序的结果：**

错误 12 XML 命名空间“http://schemas.microsoft.com/winfx/2006/xaml/presentation”中不存在标记“绑定”。C:\source\sl5_test_app\SilverlightApplication1\SilverlightApplication1\MainPage.xaml 13 24 SilverlightApplication1

**其他信息：**

如果我改变...

```
Text="{Binding Path=Rate}" 
```

到...

```
Text="25" 
```

...应用程序运行并在屏幕上显示“25”。

* * *

我在网上搜索了这个原因，没有任何投资回报。由于这个通用的 Silverlight 异常，有大量类似的查询将 'binding' 替换为 'XXX' 或 '[Some_Control]'，但到目前为止还没有解决这个问题。

这里缺少什么？

谢谢你，亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:20:13.270

我最终炸毁了我的操作系统，然后安装了新版本的 Windows Server 2008 R2、Visual Studio 2010 和所有相关的 Silverlight 组件。

现有或新 Silverlight 项目不再出现绑定错误。

-亚伦

# c# - 泛型，您将从泛型类型调用的方法传递给基类

> ID：12631510
> 
> 赞同：1
> 
> 时间：2012-09-27T23:25:35.057
> 
> 标签：c#, c#-4.0, generics

C# 泛型的新手，所以不确定我是否做对了，但我遇到了一些错误，非常感谢帮助解决！

```
namespace Microsoft.Outlook.ModernPrototype.ViewModels.ItemListView
{
    public class ConversationMap<T> : Dictionary<T, ConversationListItem>
        where T : ConversationKeyInterface<KeyEqualityInterface<T>>
    {
        public ConversationMap() : base(T.getEquality()) { }    // breaks
    }

    public class KeyEqualityInterface<S> : IEqualityComparer<S> 
        where S : ConversationKeyInterface<S> { }

    public interface ConversationKeyInterface<T>
    {
        static T getEquality();
    }
} 
```

请注意我在哪里评论它坏了。我认为我应该在这里使用某种形式的反射，但不确定在这里最好的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:28:31.550

问题实际上在这里：

```
public interface ConversationKeyInterface<T>
{
    static T getEquality();
} 
```

您不能`static`在`interface`. 接口只允许定义实例成员。

您需要确定一些其他机制来`IEqualityComparer<T>`在您的设计中指定您的。

# c++ - 如何打印 std::stack 的内容并返回其大小？

> ID：12631514
> 
> 赞同：9
> 
> 时间：2012-09-27T23:25:48.243
> 
> 标签：c++, stack

在 c++ 中，如何打印出堆栈的内容并返回其大小？

```
std::stack<int>  values;
values.push(1);
values.push(2);
values.push(3);

// How do I print the stack? 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-27T23:32:43.970

您可以制作堆栈的副本并一个接一个地弹出项目以转储它们：

```
#include <iostream>
#include <stack>
#include <string>

int main(int argc, const char *argv[])
{
    std::stack<int> stack;
    stack.push(1); 
    stack.push(3); 
    stack.push(7); 
    stack.push(19); 

    for (std::stack<int> dump = stack; !dump.empty(); dump.pop())
        std::cout << dump.top() << '\n';

    std::cout << "(" << stack.size() << " elements)\n";

    return 0;
} 
```

输出

```
19
7
3
1
(4 elements) 
```

### 在这里看到它：http: [//liveworkspace.org/code/9489ee305e1f55ca18c0e5b6fa9b546f](http://liveworkspace.org/code/9489ee305e1f55ca18c0e5b6fa9b546f)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T00:01:12.267

`std::stack`和都是`std::queue`通用容器的包装器。该容器可作为`protected`成员访问`c`。使用`c`您可以获得对元素的*有效*访问；否则，您可以只复制堆栈或队列并破坏性地访问副本的元素。

使用示例`c`：

```
#include <iostream>     // std::wcout, std::endl
#include <stack>        // std::stack
#include <stddef.h>     // ptrdiff_t
using namespace std;

typedef ptrdiff_t   Size;
typedef Size        Index;

template< class Elem >
Size nElements( stack< Elem > const& c )
{
    return c.size();
}

void display( stack<int> const& numbers )
{
    struct Hack
        : public stack<int>
    {
        static int item( Index const i, stack<int> const& numbers )
        {
            return (numbers.*&Hack::c)[i];
        }
    };

    wcout << numbers.size() << " numbers." << endl;
    for( Index i = 0;  i < nElements( numbers );  ++i )
    {
        wcout << "  " << Hack::item( i, numbers ) << endl;
    }
}

int main()
{
    stack<int>  numbers;
    for( int i = 1;  i <= 5;  ++i ) { numbers.push( 100*i ); }

    display( numbers );
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T23:43:46.907

`std::stack` **打印 a 的元素而不弹出它们**的唯一方法是编写一个扩展的适配器`std::stack`（[这里是一个示例](https://stackoverflow.com/a/4523216/298054)）。否则，您应该将堆栈替换为`std::deque`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-02T02:36:26.590

一种不使用“特殊技术”的简单方法是通过

> 递归

由于没有不能使用`pop ()`的成员函数`std::stack<>`等限制，我们可以使用以下递归算法。

算法：

1.  基本情况：如果堆栈为空 => 返回。
2.  弹出顶部元素并将其存储在变量中。
3.  打印存储的值。
4.  递归调用堆栈的其余元素。
5.  再次将元素压入堆栈。

尽管进行了弹出操作，但堆栈不会丢失其元素，因为我们在打印堆栈的其余部分后以相同的顺序再次推送它们。

以下是上述算法的代码：

```
void printStack (std::stack <int> &values) {

    if (values.empty ()) {
        return;
    }

    int topElement = values.top ();
    values.pop ();

    std::cout << topElement << std::endl;

    printStack (values);

    values.push (topElement);
} 
```

上述代码的输出：

```
3
2
1 
```

这将从上到下打印元素。

如果要从下到上打印元素，只需切换递归调用和`std::cout`语句即可。

```
void printStack (std::stack <int> &values) {

    if (values.empty ()) {
        return;
    }

    int topElement = values.top ();
    values.pop ();

    printStack (values);

    std::cout << topElement << std::endl;

    values.push (topElement);
} 
```

输出：

```
1
2
3 
```

并且可以通过`size ()`成员函数`std::stack<>`来获取栈的大小。

```
std::cout << values.size () << std::endl; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-10T11:56:21.217

嗯，一个将近10年的问题。无论如何，这里有一个额外的答案。

首先：堆栈的大小由 std::stack.size() 给出。

然后，在现代 C++ 中，越来越多地使用带有算法的 STL。因此，以下解决方案利用了这一点。前提是堆栈使用连续内存。目前这是有保证的。

输出是通过单线完成的。

请参见以下示例：

```
#include <vector>
#include <stack>
#include <iostream>
#include <algorithm>
#include <iterator>
#include <sstream>

using Number = int;
using UnderlyingContainer = std::vector<Number>;
using Stack = std::stack< Number, UnderlyingContainer>;

std::istringstream testData("5 8 1 4 9 3");

int main()
{
    // Put the test data onto the stack
    Stack stack{ UnderlyingContainer {std::istream_iterator<Number>(testData),std::istream_iterator<Number>()} };

    // Print the test data
    if (not stack.empty())
        std::copy(&stack.top() + 1 - stack.size(), &stack.top() + 1, std::ostream_iterator<Number>(std::cout, "\n"));

    return 0;
} 
```

这是完全有效和可靠的代码。这里稍微解释一下。

我们想要输出数据，所以我们将其复制到 ostream_iterator。ostream_iterator 引用流（是的，您也可以放一个 open ofstream）和分隔符。也许您想使用“”。

副本的源是 2 个迭代器。而且，是的，指针是迭代器。而且，我们为 std::stack 使用了保证的连续内存。因此，我们只需计算 2 个指针并将它们交给 std::copy。

如果你想使用显式迭代器。开始了 。.

```
#include <vector>
#include <stack>
#include <iostream>
#include <algorithm>
#include <iterator>
#include <sstream>

using Number = int;
using UnderlyingContainer = std::vector<Number>;
using Stack = std::stack< Number, UnderlyingContainer>;

using StackIterator = const Number *;

std::istringstream testData("5 8 1 4 9 3");

int main()
{
    // Put the test data onto the stack
    Stack stack{ UnderlyingContainer {std::istream_iterator<Number>(testData),std::istream_iterator<Number>()} };

    // Print the test data
    // Get iterators
    StackIterator end = &stack.top() + 1;
    StackIterator begin = end - stack.size();

    if (not stack.empty())
        std::copy(begin, end, std::ostream_iterator<Number>(std::cout, "\n"));

    return 0;
} 
```

因此，您可以为堆栈创建迭代器。但是，请注意：

std::stack 故意将其元素隐藏在引擎盖下。因此，如果您对数据进行写访问，我会将其视为设计错误。通过 const 指针/迭代器进行读取访问对我来说是可以的。但也许你应该更好地使用 std::vector 。. .

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-27T23:32:40.247

[http://www.cplusplus.com/reference/stl/stack/](http://www.cplusplus.com/reference/stl/stack/) 尺寸很容易使用：

```
cout << mystack.size(); 
```

对于其余部分，我在文档中没有看到任何内容，但是您应该在推送堆栈时打印堆栈的内容，或者有一个列表来记录元素只是为了打印它，不要完成测试后忘记删除它

# javascript - 上一个完成时无法触发下一个功能

> ID：12631516
> 
> 赞同：4
> 
> 时间：2012-09-27T23:25:57.790
> 
> 标签：javascript, jquery

我试图通过在执行前一个函数后执行下一个函数来产生连锁反应。代码如下所示：

```
var med = {

    imgLoadTime : 2000,

    easingEffect : 'easeOutQuart',

    scrollEase : 'easeInOutQuad',

    effectDuration : 1000,

    currentPage : '',

    runAnimations : function(){
                        if(this.currentPage == '#slide5'){
                            this.initAssets();
                        }
                    },

    initAssets : function(){
                    $('#asset-1').animate(
                        {left : '50%'}, 
                        { 
                            duration: this.effectDuration, 
                            easing: this.easingEffect, 
                            complete: this.assetTwo 
                        });
                },

    assetTwo : function(){
                    console.log('two');
                    debugger;
                    $('#asset-2').animate(
                        {left : '50%'}, 
                        { 
                            duration: this.effectDuration, 
                            easing: this.easingEffect, 
                            complete: this.assetThree 
                        });
                },

    assetThree : function(){
                    console.log('three');
                    $('#asset-3').animate(
                        {left : '50%'}, 
                        {
                            duration: this.effectDuration, 
                            easing: this.easingEffect, 
                            complete: console.log('weszlo')
                        });
                }

}; 
```

这就是我的对象的样子。然后我运行函数 runAnimations 作为对象的属性。奇怪的是，在这个链中只有assetTwo 函数执行，但没有进一步执行（assetThree）。为什么这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:35:28.183

你不能做这种类型的定义：

```
complete: this.assetTwo 
```

它将调用assetTwo，但它没有正确的`this`值。相反，您需要这样做：

```
 initAssets : function(){
                var self = this;
                $('#asset-1').animate(
                    {left : '50%'}, 
                    { 
                        duration: this.effectDuration, 
                        easing: this.easingEffect, 
                        complete: function() {self.assetTwo()}
                    });
            }, 
```

其他完整功能也一样。您需要将 的值保存`this`到局部变量中，然后在完整函数中使用它来调用下一个方法。这将确保`this`为下一个方法正确设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:37:19.500

您的 this 随每个功能而变化，您可以通过引用它`med`来获得所需的结果：

```
assetTwo : function(){

                //debugger;
                $('#asset-2').animate(
                    {left : '50%'}, 
                    { 
                        duration: med.effectDuration, 
                        easing: med.easingEffect, 
                        complete: med.assetThree 
                    });
            }, 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/2KHnc/16/](http://jsfiddle.net/johnkoer/2KHnc/16/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:36:44.400

使用 med 而不是`this`在您的 javascript 代码中的所有位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T23:44:55.823

对于漂亮的紧凑代码，请使用**[此处](http://onwebdev.blogspot.co.uk/2011/09/jquery-deferred-objects-and-sequential.html)**`$.Deferred.pipe()`描述的 jQuery 链

你应该得到这样的结果：

```
var med = {
    imgLoadTime: 2000,
    currentPage: '',
    css : {left: '50%'},
    animOptions: {
        duration: 1000, 
        easing: 'easeOutQuart'
    };
    runAnimations: function() {
        if(med.currentPage == '#slide5') {
            $.Deferred(function(dfr) {
                dfr.pipe(function() {
                    return $('#asset-1').animate( med.css, med.animOptions );
                }).pipe(function() {
                    return $('#asset-2').animate( med.css, med.animOptions );
                }).pipe(function() {
                    return $('#asset-3').animate( med.css, med.animOptions );
                })
            }).resolve();
        }
    }
}; 
```

*未经测试*

掌握 Deferreds 的窍门，您将永远不会回头。

除非该`med`对象由于其他原因很重要，否则拥有`runAnimations()`而不是对象包装器会更简单：

```
function runAnimations() {
    var imgLoadTime = 2000,
    currentPage = '',
    css = {left: '50%'},
    animOptions = {
        duration: 1000, 
        easing: 'easeOutQuart'
    };
    if(currentPage == '#slide5') {
            $.Deferred(function(dfr) {
                dfr.pipe(function() {
                    return $('#asset-1').animate( css, animOptions );
                }).pipe(function() {
                    return $('#asset-2').animate( css, animOptions );
                }).pipe(function() {
                    return $('#asset-3').animate( css, animOptions );
                })
            }).resolve();
    }
} 
```

这种方式对固定参数的引用很简单。

# jquery - 类似于 Xbox 仪表板的流体 jQuery 滑块？

> ID：12631519
> 
> 赞同：1
> 
> 时间：2012-09-27T23:26:09.250
> 
> 标签：jquery, slider, fluid-layout, xbox

我正在寻找与 xbox 360 仪表板行为类似的全宽/流畅的 jQuery 滑块脚本。当您在仪表板上的菜单项上时，您可以稍微看到屏幕两侧的下一项或上一项。我想找一个这样的脚本，对下一个/上一个项目有平滑的滑动效果，你可以在屏幕边缘稍微看到下一个/上一个项目。

我知道我已经在网站上看到了这个想法，但我似乎找不到它的脚本。感谢您的任何提示！

# facebook - ACAccountStore Facebook 错误

> ID：12631526
> 
> 赞同：2
> 
> 时间：2012-09-27T23:26:54.093
> 
> 标签：facebook, ios6

我有一个`user_photos`启用了 Facebook 权限的应用程序。问题是如果我去 Facebook 并删除应用程序，iOS 不会注意到这一点。`ACAccountStore`说我有权限，所以`requestAccess...`返回“已授予”，但是一旦我尝试`SLRequest`，我就会收到类似的错误，`Error validating access token: User XXXXX has not authorized application YYYYY`并且该应用程序不会重新出现在 Facebook 中。

解决方法是转到设备上的“设置”->“Facebook”，然后关闭并重新打开我的应用程序的权限。下次我尝试使用 时`requestAccess`，系统会要求我再次确认访问权限，然后该应用程序会在 Facebook 中重新安装，一切正常。

```
ACAccountStore *accountStore = [[[ACAccountStore alloc] init] autorelease];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

[accountStore requestAccessToAccountsWithType:accountType
                                      options:@{ACFacebookAppIdKey:       kFacebookAppID,
                                                ACFacebookPermissionsKey: @[@"user_photos"]}
                                   completion:^(BOOL granted, NSError *error)
{
   if( error ) {
      NSLog( @"account permission error %@", error );
   }
   else if( granted ) {
      NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me/albums"];
      SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                              requestMethod:SLRequestMethodGET
                                                        URL:requestURL
                                                 parameters:[NSMutableDictionary dictionary]];
      NSArray *accounts = [accountStore accountsWithAccountType:accountType];
      if( [accounts count] > 0 ) {
         request.account = accounts[0];
         [request performRequestWithHandler:^ (NSData *responseData, NSHTTPURLResponse *response, NSError *error)
         {
            if( error ) {
               NSLog( @"error accessing Facebook account: %@", error );
            }
            else {
               NSDictionary *data = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:nil];
               if( data[@"error"] != nil ) {
                  NSLog( @"error loading request: %@", data[@"error"] );
               }
               else {
                  NSLog( @"success! %@", data );
               }
            }
         }];
      }
      else {
         NSLog( @"error: no Facebook accounts" );
      }
   }
}]; 
```

就我而言，从 Facebook 删除应用程序后，我总是得到最终错误（“错误加载请求：”），没有其他错误。在设备的设置中切换应用程序的权限后，我获得了成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T00:15:48.927

根据 Apple 的说法，这是按预期工作的（BS！）。在实践中，事实证明您必须先`ACAccountStore`调用才能与 Facebook 同步`renewCredentialsForAccount`。在这种情况下，结果是`ACAccountCredentialRenewResultRejected`。然后您可以`ACAccountStore requestAccessToAccountsOfType`再次调用，最终将提示用户再次允许您的应用程序。

# php - 让网站基础设施引用“云”外部是一种不好的做法吗？

> ID：12631539
> 
> 赞同：1
> 
> 时间：2012-09-27T23:28:41.717
> 
> 标签：php, jquery, ajax

对于我们网站的 JQuery 元素，我注意到至少有两个新的依赖项。

一个用于 JQuery 本身`<script src="http://code.jquery.com/jquery-latest.js"></script>`

另一个用于第 3 方表单验证器 `<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>`

正常的做法是什么？在实时站点上拥有这些类型的依赖项似乎并不明智。如果 GitHub 或 Jquery.com 出现故障怎么办？人们通常会将这些资源复制到他们服务器上的本地目录吗？然后更新呢？您是否经常需要跟踪最新版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:30:59.267

对 jQuery 等常见脚本使用 CDN（内容交付网络）是正常的。例如，Google 也托管 jQuery。这样做的好处是，需要相同脚本的其他网站的访问者在访问您的网站时已经将其缓存，而不必从您那里下载。

如果您觉得您的应用需要最新版本，您只需要跟踪更新。链接到脚本的特定版本是正常的，不一定是最新版本，因此当新版本发布时，您的网站不会中断。

此外，我不建议直接链接到托管该文件的另一个网站，除非他们声称是 CDN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:32:09.097

这是要走的路，假设您选择了可靠的 CDN（内容交付网络），这是一个很好的做法。

这意味着您将节省大量带宽，并且您的性能会变得更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:31:08.877

在繁忙的站点上，使用**良好**的外部 CDN 是一种很好的做法。与大多数站点相比，它们几乎总是更快、备份、冗余并且更不可能出现故障。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T23:31:32.420

基本上，它提高了负载性能并减少了服务器上的负载。更多详情：[https ://stackoverflow.com/a/2180401/104198](https://stackoverflow.com/a/2180401/104198)

# javascript - 当 WepApp 添加到 iPhone 上的主屏幕时无法保留身份验证 Cookie

> ID：12631540
> 
> 赞同：2
> 
> 时间：2012-09-27T23:28:47.803
> 
> 标签：javascript, authentication, mobile-safari

我有一个用 Asp.Net Mvc 4 编写的 Web 应用程序。它使用表单身份验证，我可以让它保留一个 cookie，因此用户不必在 Chrome 等完整浏览器中输入凭据，但是当我将页面添加到我的 iPhone 上的主屏幕并尝试同样的事情 我总是提示输入我的用户名和密码。

根据我的阅读，我应该能够验证并保存返回到 Safari 移动浏览器本地存储的响应的“Set-Cookie”cookie，并在后续请求中将值添加到请求中，而不必担心输入只要 cookie 有效，我的用户名和密码。

当我这样做以提交身份验证请求时，我可以看到正在设置 cookie，但我无法检索它的值。

```
 $(document).ready(function () {
    $("form").submit(function (e) {
        alert("Submitting");
        $.post("Account/login", $("form").serialize(),
            function (data, textstatus, req) {
                alert(req.getAllResponseHeaders());
            });
    }
);
}) 
```

如果我尝试

```
 alert(req.getResponseHeader("Set-Cookie")); 
```

我也一无所获。我是否朝着正确的方向前进？有一个更好的方法吗？

# iphone - 使用 NSFetchedResultsController 分页？

> ID：12631542
> 
> 赞同：3
> 
> 时间：2012-09-27T23:28:52.713
> 
> 标签：iphone, ios, cocoa-touch, ipad, nsfetchedresultscontroller

我想知道如何使用`NSFetchedResultsController`. 我希望每个页面包含 20 个条目，并有一个页面索引，可以让我在页面之间导航。

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController) {
        return _fetchedResultsController;
    }

    [self getDataOptions];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Profile"];

     NSSortDescriptor *sortByName = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortByName]];

     NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                                            managedObjectContext:self.managedObjectContext
                                                                                              sectionNameKeyPath:nil cacheName:@"Friends"];
     aFetchedResultsController.delegate = self;
     self.fetchedResultsController = aFetchedResultsController;

     NSError *error = nil;
     if (![self.fetchedResultsController performFetch:&error]) {
        NSLog(@" Error %@ %@", [error localizedDescription], error);
        abort();
     }

     return _fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-21T03:25:47.207

在**Swift 5**中，您可以执行以下操作：

**1** - 选择一个`offset`和一个`limit`：

```
var offset: Int = 0
var limit: Int = 20 
```

**2** -`NSFetchedRequest`使用您的**entityName**（我的是“Product”）和`NSFetchedResultsController`缓存名称设置 ，例如：**CACHENAME**。

```
lazy var fetchedResultsController: NSFetchedResultsController<Product> = {
  let fetchRequest = NSFetchRequest<Product>(entityName: "Product")

  // Configure Fetch Request
  fetchRequest.sortDescriptors = [NSSortDescriptor(key: "name", ascending: true)]
  fetchRequest.fetchOffset = self.offset
  fetchRequest.fetchLimit = self.limit

  let fetchedResultsController = NSFetchedResultsController(fetchRequest: fetchRequest, managedObjectContext: CoreDataStack.shared.context, sectionNameKeyPath: nil, cacheName: "CACHENAME")
  fetchedResultsController.delegate = self
  return fetchedResultsController
}() 
```

**3** - 执行获取。

```
do {
  NSFetchedResultsController<Product>.deleteCache(withName: fetchedResultsController.cacheName)
  try fetchedResultsController.performFetch()
} catch {
  print("--->> Oops, perform fetch failed")
} 
```

**4** - 加载下一个信息，只需更改您想要的方式，然后再次执行获取`offset`。`limit`

```
func loadNext() {
  let lastLimit = self.limit + 3
  self.limit = lastLimit

  fetchedResultsController.fetchRequest.fetchOffset = self.offset
  fetchedResultsController.fetchRequest.fetchLimit = self.lastLimit
  do {
    NSFetchedResultsController<Product>.deleteCache(withName: fetchedResultsController.cacheName)
    try fetchedResultsController.performFetch()
  } catch {
    print("--->> Oops, perform fetch failed")
  }
} 
```

**重要提示：每次调用时清除缓存`performFetch`**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T13:05:02.110

结果控制器可以获取所有内容（因此它可以正确形成部分）......您看到数据的表格视图应该受到限制。

# git - 我应该多久将 master 上提交的更改合并到我的其他 git 分支？

> ID：12631547
> 
> 赞同：7
> 
> 时间：2012-09-27T23:29:25.993
> 
> 标签：git

如果我有一个`master`分支。

然后我签出一个`work`分支并进行了很棒的更改和一些提交。

然后我必须修复一些东西，所以我返回`master`并签出一个名为 的分支`fix`，修复我需要做的事情，并将其合并到`master`.

我的问题是，我应该然后合并并继续，还是应该继续我所在的位置并`master`在完成后合并它？`work``work`

我发现自己不得不回到我工作的所有分支并更新（合并更改）每个分支。

我觉得最好尽快合并，但后来发现自己不得不不断更新我工作的所有分支。这是不必要的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T10:18:30.773

参考 Nive 的总是很棒的 Git 分支模型：

![在此处输入图像描述](../Images/236079627304ac7b6c61624ee5cf0708.png)

你看，你应该合并`fix`(not `master`) 到`work`(aka `develop`) 分支。

你应该多久合并一次`master`？当然，每个稳定版本。

还有其他疑问吗？看图片。:P

资料来源： http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T23:35:46.233

你实际上不想做你正在做的“反向合并”。您想要集成或发布候选分支，您可以在其中合并任何您想要查看的内容。谷歌“每个功能的分支”，看看如何让您的工作保持井井有条、同步和灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:59:30.967

当主人向前移动时，我们：

```
git fetch               # get the latest master
git checkout my_branch  # work in my_branch
git rebase master       # replay my work on top of newer master 
```

与更改后的 master 保持同步（例如，当 a`fix`应用到它时），然后当我们去合并分支时

```
git checkout master     # Do the work in master
git merge my_branch     # Bring in my branch 
```

我们的目标是快速合并分支，以避免为更改进行大量更新。

我们每天只在 2 或 3 个分支上工作，当分支在开发人员之间共享时，我们还会让它们保持最新：

```
get fetch                         # Gets the latest version of branches including my_branch
git checkout my_branch            # Do the work in the my_branch
git reset --hard origin/my_branch # Reset to the latest version fetch in. 
```

# objective-c - 更改 UIBezierPath 上阴影的颜色

> ID：12631550
> 
> 赞同：2
> 
> 时间：2012-09-27T23:29:59.207
> 
> 标签：objective-c, ios, cgcontext, shadow, uibezierpath

我有一个 UIVIew 的委托方法，并在 drawRect 方法中添加了 UIBezierPath 以在正方形上显示阴影。

```
 //// General Declarations
 CGContextRef context = UIGraphicsGetCurrentContext();

 //// Shadow Declarations
 UIColor* shadow = [UIColor blackColor];
 CGSize shadowOffset = CGSizeMake(0, -0);
 CGFloat shadowBlurRadius = 15;

 //// Rectangle Drawing
 rectanglePath = [UIBezierPath bezierPathWithRect: CGRectMake(8, 8, 44, 44)];
 CGContextSaveGState(context);
 CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, shadow.CGColor);
 [[UIColor whiteColor] setFill];
 [rectanglePath fill];
 CGContextRestoreGState(context); 
```

然后我想根据某些标准更改阴影的颜色，所以我创建了一个名为 makeRed 的方法。

```
- (void)makeRed {
  NSLog(@"makeRed");
  CGContextRef context = UIGraphicsGetCurrentContext();
  // Shadow Declarations
  UIColor* shadow = [UIColor redColor];
  CGSize shadowOffset = CGSizeMake(0, -0);
  CGFloat shadowBlurRadius = 15;
  CGContextSaveGState(context);
  CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, shadow.CGColor);
  [[UIColor whiteColor] setFill];
  [rectanglePath fill];
  CGContextRestoreGState(context);
} 
```

但是当我调用该方法时，我收到了消息：

: CGContextSaveGState: 无效的上下文 0x0

有什么想法可以设置正确的上下文或以不同的方式更改阴影颜色吗？

请注意，阴影的初始绘制效果很好，因为代理还有其他属性，即使用 .layer 方法创建阴影的一些精美动画将无法正常工作。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:44:21.167

在[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)文档中，您可以看到`drawRect:`

> 当这个方法被调用时，UIKit 已经为你的视图配置了合适的绘图环境，你可以简单地调用任何你需要的绘图方法和函数来渲染你的内容。

因此，您在内部进行的绘图是正确的，因为绘图上下文设置正确等，您的方法`drawRect:`并非如此。`makeRed`

我建议有一个 ivar `shadowColor`，然后在你的`drawRect:`方法中使用它。你`makeRed`会看起来像这样

```
- (void)makeRed;
{
  self.shadowColor = [UIColor redColor];
  [self setNeedsDisplay];
} 
```

然后将行修改`drawRect:`为

```
CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, self.shadowColor.CGColor); 
```

`setNeedsDisplay`用于告诉`UIKit`您希望重新绘制视图，然后`drawRect:`再次调用。

您当然必须`_shadowColor = [UIColor blackColor]`在`init*`方法中进行初始化。

# image - 在大型数据库上搜索

> ID：12631552
> 
> 赞同：4
> 
> 时间：2012-09-27T23:30:14.377
> 
> 标签：image, matlab, pattern-matching, image-recognition

我有一个非常大的 3D 矩阵，我需要从这个大矩阵中调用一些具有特殊配置的特定模式。例如，我需要一个子矩阵，它们的 a、b、c、..、h 元素与特定值相等（它不是模式匹配，但我需要一些具有特定值的模式）

有什么解决方案可以快速找到它们吗？据我所知，一种解决方案是扫描矩阵并将其模式存储在数据库中，然后使用 PCA 来减小数据库的大小，但我正在寻找一种更准确的方法。

例如，假设我有一个矩阵，例如 I：

```
 I=[1    0   0   1   0   1   0   1   0
       0    0   0   0   0   0   0   0   0
       0    1   0   0   1   0   0   1   0
       1    0   1   1   0   1   0   1   0
       0    0   0   0   0   0   0   0   0
       1    0   0   0   1   0   1   0   0
       0    0   0   0   0   0   0   0   0
       1    0   1   0   0   0   0   0   1
       0    0   1   0   0   0   0   1   0] 
```

然后我有另一个矩阵如下：

```
 p=[1    0   NaN NaN 1   NaN NaN NaN NaN] 
```

然后，我应该在“I”中查找其第 1,2 和 5 列分别等于 1,0,1 的行（在此示例中，第 6 行是正确的行。但实际上，我的矩阵（I）的大小非常大（超过十亿），如果我使用循环来查找这些行，它需要很多时间。我正在寻找一种快速的代码或方法。希望它现在有意义！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:05:01.260

如果您要查找的模式是按列排列的，您可以执行以下操作：（如果不是，请在您的问题中更具体，我会修改我的答案）

```
A=randi(10,[11 12 13]); %%% your matrix
p=[2;3;4]; %%% your pattern

m=cell(1,numel(p));
% for each element of the pattern
for i=1:numel(p)
  % find the element of A matching the i-th element of p
  m{i}=find(A==p(i));
  % convert to indices
  [x y z]=ind2sub(size(A),m{i});
  m{i}=[x y z];
  % convert to the position of the first element of the pattern
  m{i}(:,1)=m{i}(:,1)-(i-1);
  % remove when it goes below zero
  m{i}(m{i}(:,1)<=0,:)=[];
end

% accumulate everything to find out where all the elements of the pattern match
numberOfMatching=accumarray(vertcat(m{:}),1,size(A)); 
fullMatchingIndices=find(numberOfMatching==numel(p));
% convert to sub=indices
[x y z]=ind2sub(size(A),fullMatchingIndices);
finalIndices=[x y z];

% check the result
if ~isempty(finalIndices)
  A(finalIndices(1,1)+(0:numel(p)-1),finalIndices(1,2),finalIndices(1,3))
end 
```

结果，您应该获得模式 p （如果找到至少一个匹配项）：

```
ans =
     2
     3
     4 
```

# php - Codeigniter - __PHP_Incomplete_Class 类的对象无法转换为字符串

> ID：12631555
> 
> 赞同：0
> 
> 时间：2012-09-27T23:30:22.403
> 
> 标签：php, codeigniter

当我回显我的**is_active**变量时，我得到一个**类 __PHP_Incomplete_Class 的对象无法转换为字符串**错误，我可以使用 username 和 is_logged_in 变量，但不能使用 is_active 变量，我想知道我会是什么在这里做错了...

 **在我的控制器上，我做了：

```
$username=$this->input->post("username");
            $activated_val=$this->membership_model->is_activated($username);

            $data = array(
                "username" => $this->input->post("username"),
                "is_logged_in" => true,
                "is_active" => $activated_val
            );
            $this->session->set_userdata($data);
            redirect("main"); 
```

我的模型功能：

```
function is_activated($username){
        $query = "SELECT activated FROM members WHERE username=?";
        $result = $this->db->query($query, $username);

        return $result;
    } 
```

在我看来：

```
$is_active= $this->session->userdata("is_active");
                echo $is_active; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:41:58.093

在您的模型中，将`return`行从

```
return $result; 
```

到

```
return $result->row()->activated; 
```

该查询返回一个 CodeIgniter 对象，该对象甚至还不是结果，在将它传递给`row()`您之后，您将获得一个以您的数据库列值作为该对象属性的对象，然后您`activated`通过 get( `->activated`) 引用该列值该对象的相应属性。**

# python - Python 打开用户创建的文本文件

> ID：12631556
> 
> 赞同：0
> 
> 时间：2012-09-27T23:30:32.107
> 
> 标签：python, file

考虑到存在一个手动用户创建的名为“roger.txt”的文本文件，它包含“Tennis Roger Federer Armin”作为其内容。Pickle 无法打开手动创建的文件。哪些包可以在 python 中打开手动创建的文件，这样当我运行代码时，我得到的输出是“Tennis Roger Federer Armin”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T23:32:08.610

为什么需要包裹？只需阅读文件：

```
with open('roger.txt', 'r') as handle:
    print handle.read() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:09:07.587

或者在一行中，没有上下文保护和可选文件模式......

```
print open('roger.txt').read() 
```

# ios - iOS 文件夹编程

> ID：12631557
> 
> 赞同：1
> 
> 时间：2012-09-27T23:30:36.180
> 
> 标签：ios, api, system, directory, ios6

我不认为这是可能的或允许的，但我想确认一件事。

是否有适用于 iOS 文件夹系统的 API 可以让我们向其中添加功能？

我们常用的一种用于将相似的应用程序放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:33:10.577

如果您正在谈论将应用程序排列到文件夹中的 Springboard（启动屏幕）系统，那么，不，没有办法与您的程序进行交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:33:13.443

不是正式的，不是。如果你这样做，你的应用肯定会被拒绝。

但是开发越狱调整有它的好处。你可以这样做，然后通过 Cydia 部署它。

# shopify - 订单 API 中的fulfillment_status 的预期值是什么

> ID：12631558
> 
> 赞同：0
> 
> 时间：2012-09-27T23:30:43.183
> 
> 标签：shopify

该[文档仅提及](http://api.shopify.com/order.html)`fulfillment_status` *过滤器*的可能值，这似乎与这些`fulfillment_status`值不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:42:31.063

合法值如下：

*   `nil`- 开始状态，可以转换到以下任何一种状态
    *   `restocked`- 订单已取消，订单已补货
    *   `partial`- 此订单的部分（但不是全部）订单项已完成
    *   `fulfilled`- 所有订单项均已履行

# objective-c - 成为第一响应者后如何识别点击文本视图？

> ID：12631565
> 
> 赞同：4
> 
> 时间：2012-09-27T23:31:08.360
> 
> 标签：objective-c, uitextview, uitapgesturerecognizer, becomefirstresponder

当 UITextView 被点击时，我希望它继续作为第一响应者工作，但我还需要触发其他事件。在 UITextView 不是第一响应者之前，UITapGestureRecognizer 工作得很好，但是在它获得焦点之后，点击不再被识别。

```
 UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapRecognized:)];
  singleTap.numberOfTapsRequired = 1;
  [txtView addGestureRecognizer:singleTap];
  [singleTap release];

  -(IBAction)singleTapRecognized:(id)sender
  {
     //Does not enter here with a tap after txtView is first responder
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T04:32:49.353

在方法中使用以下代码`ViewDidLoad()`，并确保包含

```
[yourTextView setUserInteractionEnabled:YES] 

UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc]initWithTarget:self action:SEL(textViewTapped:)];

 [gestureRecognizer setNumberOfTapsRequired:1];  
 [yourTextView addGestureRecognizer:gestureRecognizer];` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T13:01:46.953

您应该在手势识别器委托上实现以下方法：

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer*)otherGestureRecognizer {
    return YES;  
} 
```

# php - 当打开会话过期时，cookie 是否不会随请求一起发送？

> ID：12631566
> 
> 赞同：1
> 
> 时间：2012-09-27T23:31:18.190
> 
> 标签：php, cookies, yii

假设我创建了一个在创建时过期的 cookie，下面的例子我使用 yii

```
 $data_cookie = new CHttpCookie('_MD2', $data);
            $data_cookie->expire = time();
            Yii::app()->request->cookies['_MD2'] = $data_cookie; 
```

现在我尝试使用以下代码获取它的价值

```
yii::app()->request->cookies['_MD2']->value 
```

但是当我更改它的到期日期时，我什么也没得到，我获​​得了它的价值
，所以即使浏览器没有关闭，当它到期时也没有获得 cookie 值是真的吗？
**注意**：我在 Mozilla 最新版本中对其进行了测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:35:10.827

是的，检查到期日期是一个好习惯。特别是如果你有一个大容量的网站。但是 cookie 也可以在过期日期后删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:35:29.017

如果 cookie 已过期……它已过期。它被扔掉，而不是发送到您的服务器。如果您真的想取回 cookie，请在将来设置过期时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:34:40.837

如果您在 cookie 上设置了过期时间，它会在那个时间过期，而不是在浏览器关闭时过期。浏览器不会将过期的 cookie 发回给您，即使它是刚刚设置的。

设置现在（或过去）的过期时间实际上是*删除*已存在的同名 cookie 的常用方法。

# python - 优化嵌入式 Python 解释器的大小

> ID：12631577
> 
> 赞同：17
> 
> 时间：2012-09-27T23:32:14.100
> 
> 标签：python, embedded

我花了最后 3 个小时试图找出是否可以在没有交互模式的情况下禁用或构建 Python，或者如何使 python 可执行文件的大小更小。

你可以猜到它是针对嵌入式设备的，在交叉编译之后，Python 大约有 1MB 大，这对我来说太大了。

现在的问题：

是否有可能缩小 Python 可执行文件？也许要禁用交互模式（在命令行上启动 Python 程序）。

我寻找了配置选项并尝试了其中一些，但它不会对我的可执行文件产生任何更改。

我用 gcc 的优化选项编译它，它已经被剥离了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T23:03:55.937

如果你真的想缩小 python，你可以看看那些项目：

[http://code.google.com/p/python-on-a-chip/](http://code.google.com/p/python-on-a-chip/)

正如网站上所说：

> Python-on-a-Chip (p14p) 是一个开发简化 Python 虚拟机（代号为 PyMite）的项目，它在没有操作系统的微控制器上运行 Python 语言的重要子集。p14p 的其他部分是设备驱动程序、高级库和其他工具。请加入 python-on-a-chip google 小组讨论这个项目。

这可能比预期的要低一点，但确实缩小了：

PyMite 虚拟机的特点：

*   大约需要 55 KB 程序内存
*   在 4KB RAM 中初始化；打印“hello world”需要5KB；8KB 是推荐的最低 RAM。
*   支持整数、浮点数、元组、列表、字典、函数、模块、类、生成器、装饰器和闭包
*   支持来自 Python 2.6 的 29 个关键字中的 25 个和 112 个字节码中的 89 个

你可以从这个项目中得到有趣的想法。

请注意，您只能获得虚拟机，即。你可以运行 pyc 文件，而不是 py. （不过，pyc 文件是跨平台的。而且比 py 文件小得多）

事实上，如果你真的以最小的 python 为目标，你需要禁用部分库，但可能还需要禁用编译器本身。

这个网站可能也有有趣的指针：[http ://www.awaretek.com/pymo.html](http://www.awaretek.com/pymo.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T01:03:17.723

可能有一些方法可以让你通过配置把它塞得更紧一点，但不多。

此外，实际的交互模式代码非常简单，所以我怀疑你会在那里节省很多。

我敢肯定，您没有使用更多实质性功能，您可以从解释器中破解以减小大小。例如，您可能会丢弃一大块解析器和编译器，只处理字节码。问题是这样做的唯一方法是破解解释器源。（而且它不是世界上最漂亮的代码，所以你将不得不花费大量时间来学习你的方法。）你必须知道你可以实际破解哪些功能。

唯一真正的替代方案是为类似 Python 的语言编写一个更小的解释器——例如，选择 tinypy 项目。但是从您的评论来看，除非它非常接近，否则听起来“类 Python”对您来说是不够的。

好吧，我想还有另一种选择：破解一个不同的、比 CPython 更好的 Python 实现。问题是 Jython 和 IronPython 不是本机代码（尽管也许您可以使用 JVM->native 编译器，或者可能将足够多的 Jython 塞进 J2ME JVM？），而且 PyPy 真的还没有准备好在嵌入式的黄金时间系统。（你能等几年吗？）所以，你可能被 CPython 困住了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-20T17:05:12.747

我在 2018 年末偶然发现了这个问题。此时，最流行的微型 Python——以及专为受限平台和嵌入式设备设计的微型 Python——是[MicroPython](https://micropython.org/)，它在微控制器等产品中很受欢迎。

# extjs - 跳出 EXTJS 的循环

> ID：12631578
> 
> 赞同：2
> 
> 时间：2012-09-27T23:32:15.633
> 
> 标签：extjs, extjs4, extjs-mvc

我是 extjs 4 MVC 设计的菜鸟。我有以下代码。

```
onLaunch: function() {
        console.log("Launched Business Unit Controller");
        var businessunitsStore = this.getStore('Businessunits');
        businessunitsStore.load(function(records){
            var comp = Ext.getCmp('business_form');            
            for(var i=0;i<records.length;i++){
                bu = records[i].data;
                console.log(bu);
                comp.add({
                    xtype:'button',
                    cls:'x-button',
                    width:90,
                    autoScroll:false,
                    height:60,                                            
                    text:bu.businessunit_name,
                    enableToggle:true,  
                    listeners:{
                        click: function(){
                            var pnl = Ext.getCmp('active-units-form');    
                            pnl.add({
                                xtype:'label',                                
                                text:this.text,                                
                            })                         
                        } 
                    }                                         
                }) //comp.add
            } //for ...
        });       
    } 
```

如您所见，我在商店加载时添加了一个按钮，并且每个按钮都有进一步的事件。问题是我想将子事件（例如 onLaunch 之外的链下按钮的单击事件）作为单独的方法处理。但似乎我无法摆脱这个循环，所有事件都将被写成一个链。但这似乎是错误的，随着听众数量的增加，代码变得混乱。那么有没有一种方法可以在控制器方法和内部之间来回切换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:41:26.497

你为什么不使用事件总线（控件）？当您使用 MVC 应用程序时，它已经存在，所以我建议使用它。使用它时，您的控制器中有侦听器方法，并将按钮实例作为参数。关键字将为您提供控制器实例，而您可以使用按钮实例使用/`this`向上和/向下导航。当然可以添加另一个唯一标识符并检查它是必需的。`up()``down()`

```
onLaunch: function() {
    controls('#business_form button[ident=businessunit-btn]':{click:this.onClickBussinesUnitBtn});
    console.log("Launched Business Unit Controller");
    var businessunitsStore = this.getStore('Businessunits');
    businessunitsStore.load(function(records){
        var comp = Ext.getCmp('business_form');            
        for(var i=0;i<records.length;i++){
            bu = records[i].data;
            console.log(bu);
            comp.add({
                xtype:'button',
                cls:'x-button',
                ident: 'businessunit-btn',
                width:90,
                autoScroll:false,
                height:60,                                            
                text:bu.businessunit_name,
                enableToggle:true                                       
            }) //comp.add
        } //for ...
    });       
},
onClickBussinesUnitBtn: function(btn){
     var pnl = Ext.getCmp('active-units-form'); // I recommend you to instantiate this either also with a controller function, so that you can store the reference or doing it with up/down as Alexey mentioned.
     pnl.add({
        xtype:'label',                                
        text:btn.text
     });                                
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:29:53.093

`this`如果您不确定它是什么，最好避免使用关键字。

```
click: function (button) {
    var pnl = Ext.getCmp('active-units-form');    
    pnl.add({
        xtype: 'label',                                
        text: button.text,                                
    })                         
} 
```

也尝试使用`down`方法而不是`Ext.getCmp`如果您正在搜索的视图是在控制器的`Views`配置中定义的。

```
onLaunch: function() {
    console.log("Launched Business Unit Controller");
    var businessunitsStore = this.getStore('Businessunits');
    businessunitsStore.load(function(records){
        var comp = this.down('#business_form'); //Ext.getCmp('business_form');            
        for(var i = 0; i < records.length; i++){
            bu = records[i]; //.data;
            console.log(bu);

            var button = comp.add({
                xtype:'button',
                cls:'x-button',
                width:90,
                autoScroll:false,
                height:60,                                            
                text:bu.get('businessunit_name'), //bu.businessunit_name,
                enableToggle:true,  
            }) //comp.add

            button.on('click', this.businessUnitButton_click, this); 
            // 3rd parameter 'this' will be controller instance inside handler
        } //for ...
    });       
},

businessUnitButton_click: function (button) {
    // 'this' is controller
    var pnl = this.down('#active-units-form'); // Ext.getCmp('active-units-form');
    pnl.add({
        xtype:'label',                                
        text: button.text,                                
    })                         
} 
```

# xamarin.ios - iPad 崩溃类型未知 Monotouch

> ID：12631584
> 
> 赞同：2
> 
> 时间：2012-09-27T23:33:01.833
> 
> 标签：xamarin.ios

在使用 MonoTouch 的 iPad 上，我收到以下标记为类型未知的崩溃。它通常在使用该应用程序一段时间后发生。我们有一个导航控制器，用于从一个视图推送和弹出到下一个视图。所以基本上，MainView->DetailView 并返回。我们可以通过在视图之间快速切换来触发这种情况，但它也会随着时间的推移而发生。

```
Hardware Model:      iPad3,1
OS Version:          iPhone OS 6.0 (10A403)
Kernel Version:      Darwin Kernel Version 13.0.0: Sun Aug 19 00:29:38 PDT 2012; root:xnu-2107.2.33~4/RELEASE_ARM_S5L8945X
Date:                2012-09-27 16:19:58 -0700
Time since snapshot: 112 ms

Free pages:        4271
Active pages:      41877
Inactive pages:    27069
Throttled pages:   137163
Purgeable pages:   85899
Wired pages:       36984
Largest process:   TabletApp

Processes
Name                    <UUID>                       rpages       recent_max           [reason]          (state)

BlueTool <e0940958fde030c4983b25d7b4e2ad67>          239              239                          (daemon) (idle)
CommCenterClassi <c82f228b14a830cdb88e3cc1068330b3>          740              740                          (daemon) (idle)
timed <f3f0e010a9a13ae69b5761a5db3f4a3c>          532              532                      (daemon) (idle)
geod <73e79779d11a312cb70c3770e494ceab>          464              464                      (daemon) (idle)
afcd <b0aff2e7952e34a9882fec81a8dcdbb2>          194              194                      (daemon) (idle)
notification_pro <845b7beebc8538ca9ceef731031983b7>          242              242                      (daemon) (idle)
mobile_assertion <018ee854c7b6344ba5094f83827fee1c>          249              249                      (daemon) (idle)
afcd <b0aff2e7952e34a9882fec81a8dcdbb2>          211              211                      (daemon) (idle)
coresymbolicatio <edba67001f76313b992056c712153b4b>          173              173                      (daemon) (idle)
installd <309cd72e8af43ad1b77d96274d0b0ff7>          454              454                      (daemon) (idle)
xpcd <2190623b9f8033b3a3323e50385f952e>          190              190                      (daemon) (idle)
gamed <5e2c4c3e9ef03bbba60e09baecc38a72>         1155             1155                      (daemon) (idle)
networkd_privile <f8858e6f66af39ab8ce8f105cfa6872f>          167              167                      (daemon) (idle)
softwareupdatese <2bc4b5ae016431c98d3b34f81027d0ae>          678              678                      (daemon) (idle)
deleted <1135432740b43f699975b1fd8bffa05f>          350              350                      (daemon) (idle)
assetsd <52be6deaa7cb326bb0b5a58cd43d3771>         2439             2439                      (daemon) (idle)
lsd <6a9f5b5f36b23fc78f87b6d8f1f49a9d>          596              596                      (daemon) (idle)
AppleIDAuthAgent <29029c5fc04736c99a0846fa84f03f3b>          273              273                      (daemon) (idle)
itunesstored <4e0cd9f873de3435b4119c48b2d6d13d>         1911             1911                      (daemon) (idle)
accountsd <ac0fce15c1a2350d951efc498d521ac7>         1606             1606                      (daemon) (idle)
MobileMail <bff817c61ce33c85a43ea9a6c98c29f5>         1932             1932                      (resume) (continuous)
mstreamd <b0ff7a57c8393a399b920e9fb6ba1ce3>         1678             1678                      (daemon)
kbd <3e7136ddcefc3d77a01499db593466cd>          871              871                      (daemon)
tccd <eb5ddcf533663f8d987d67cae6a4c4ea>          239              239                      (daemon)
TabletApp <991649f8252c30fb880c779b532e2deb>       166400           166400  [per-process-limit] (frontmost) (resume)
mediaserverd <80657170daca32c9b8f3a6b1faac43a2>         2548             2548                      (daemon)
locationd <892cd1c9ffa43c99a82dba197be5f09e>         1457             1457                      (daemon)
wifid <9472b090746237998cdbb9b34f090d0c>          963              963                      (daemon)
syslogd <cbef142fa0a839f0885afb693fb169c3>          409              409                      (daemon)
iaptransportd <f784f30dc09d32078d87b450e8113ef6>          371              371                      (daemon)
SpringBoard <27372aae101f3bbc87804edc10314af3>        18297            18297                     
backboardd <5037235f295b33eda98eb5c72c098858>       129351           129351                      (daemon)
fseventsd <996cc4ca03793184aea8d781b55bce08>         1173             1173                      (daemon)
imagent <1e68080947be352590ce96b7a1d07b2f>          618              618                      (daemon)
mDNSResponder <3e557693f3073697a58da6d27a827d97>          456              456                      (daemon)
filecoordination <fbab576f37a63b56a1039153fc1aa7d8>          242              242                      (daemon)
absinthed.J1 <1143ac2f5558356f9e807c21457e999a>          263              263                      (daemon)
lockdownd <ba1358c7a8003f1b91af7d5f58dd5bbe>          560              560                      (daemon)
powerd <2d2ffed5e69638aeba1b92ef124ed861>          333              333                      (daemon)
eapolclient <6fe4832769b3315c93072b4d0fed42b7>          324              324                      (daemon)
UserEventAgent <6edfd8d8dba23187b05772dcdfc94f90>          974              974                      (daemon)
networkd <0032f46009f53a6c80973fe153d1a588>          345              345                      (daemon)
aggregated <8c3c991dc4153bc38aee1e841864d088>          160              160                      (daemon)
SCHelper <2cb7ad29b9873115857da94ca4666547>          257              257                      (daemon)
BTServer <c92fbd7488e63be99ec9dbd05824f5e5>          777              777                      (daemon)
configd <4245d73a9e96360399452cf6b8671844>          759              759                      (daemon)
distnoted <a89af76ec8633ac2bbe99bc2b7964bb0>          292              292                      (daemon)
fairplayd.J1 <a39944b046c43c2a92bc1dff62ff04d3>         1112             1112                      (daemon)
apsd <94d8051dd5f5362f82d775bc279ae608>          601              601                      (daemon)
notifyd <51c0e03da8a93ac8a595442fcaac531f>          213              213                      (daemon)
**End** 
```

有谁知道这个错误可能意味着什么？任何帮助表示赞赏，谢谢。

# visual-studio-2010 - Visual Studio 和 OpenCV 无法链接 cv.lib

> ID：12631589
> 
> 赞同：2
> 
> 时间：2012-09-27T23:33:14.980
> 
> 标签：visual-studio-2010, opencv

我下载了最新的 OpenCV-2.4.2.exe 并解压。然后我在 Visual Studio 2010 中打开了一个项目，并将其指向它需要构建的 include 和 lib 文件夹。

就我而言，lib 文件夹位于 \opencv\build\x64\vc10\lib 中，这与在线说明不同。该文件夹似乎包含所有内容的编译版本。但是，当我构建我的项目时，我得到

链接：致命错误 LNK1104：无法打开文件 'cv.lib'

cv.lib 无处可寻。

还有什么需要编译的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:12:05.957

嗯，我解决了这个问题。

在 stdafx.h 我不得不注释掉：

```
//#pragma comment(lib, "cv")
//#pragma comment(lib, "cxcore")
//#pragma comment(lib, "highgui") 
```

正在尝试加载 cv.lib 等。我的猜测是这对于以前的 openCV 版本是正确的，但对 2.4.2 无效。然后我不得不添加

```
D:\opencv\build\x86\vc10\lib\opencv_core242d.lib;D:\opencv\build\x86\vc10 
\lib\opencv_imgproc242d.lib;D:\opencv\build\x86\vc10\lib\opencv_highgui242d.lib; 
D:\opencv \build\x86\vc10\lib\opencv_objdetect242d.lib; 
```

在 Linker->Input->Additional dependencies 部分添加到我的项目中。

我尝试了 staticlib 文件夹和 x64，但这对我在 Windows 7 64 位上有效。

希望这对其他人有所帮助（我见过其他人遇到的类似问题）。

# php - 仅为自己的网站启用 http_referer 反向链接

> ID：12631591
> 
> 赞同：3
> 
> 时间：2012-09-27T23:33:40.730
> 
> 标签：php, hyperlink, back, http-referer

我使用 PHP http_referer 为我的网站创建了一个反向链接。它基本上可以工作，但我只想在引用者是我的域的页面时启用它。我考虑过比较引用页面和当前页面中的字符串，但我没有发现它是如何工作的。

这是我的代码：

```
 <?php // Back link to previous page.

    // If current page has been called by a hyperlink.
    if(isset($_SERVER['HTTP_REFERER']) && $_SERVER['HTTP_REFERER'] !='') echo '<a href="'.$_SERVER['HTTP_REFERER'].'">&laquo; Go back.</a>';

    // If current page has NOT been called by a hyperlink.
    else return;
    ?> 
```

你能给我建议我应该使用哪个 PHP 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:44:05.667

您可以从中解析 url`$_SERVER['HTTP_REFERER']`并获取主机名并将其与您自己的进行比较。所以你要找的函数是[parse_url()](http://php.net/manual/en/function.parse-url.php)：

```
if(!empty($_SERVER['HTTP_REFERER']))
{
    if(parse_url($_SERVER['HTTP_REFERER'], PHP_URL_HOST) == $_SERVER['HTTP_HOST'])
    {
        echo '<a href="'.htmlentities($_SERVER['HTTP_REFERER']).'">&laquo; Go back.</a>';
    }
} 
```

此外，`$_SERVER['HTTP_REFERER']`用户可以设置它的 htmlentities 来阻止任何 XSS 是一个好主意。

如果他们从您的域进入，PHP 已经处理了一个更安全的想法，那就是使用一些 javascript 代替链接将它们发回。

`echo '<a href="Javascript:window.history.back();">&laquo; Go back.</a>';`

# lisp - Scheme中的列表操作

> ID：12631593
> 
> 赞同：1
> 
> 时间：2012-09-27T23:34:01.213
> 
> 标签：lisp, scheme

> **可能重复：**
> [仅使用“The Little Schemer”中的表格来展平列表](https://stackoverflow.com/questions/7313563/flatten-a-list-using-only-the-forms-in-the-little-schemer)

我只是想将 '(ab (cd) e) 变成 '(abcde) （即，将内部列表的每个成员插入外部列表，同时保持元素的顺序）。

必须有一种简单的方法来做到这一点，但由于某种原因它使我无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:47:53.037

你看到'(ab (cd) e) 是一棵树，不是吗？就像是

```
a---b
|\--c--d
 \--e 
```

在这种表示中，节点是列表，叶子是符号。你可以做什么，它打印树的所有叶子：

1.  如果树为空（= 是空列表），则停止
2.  如果树不为空，则
    1.  如果树的 CAR 是符号，打印它，然后处理树的 CDR
    2.  如果树的 CAR 是一个列表，则处理树的 CAR，然后处理树的 CDR

完成此操作后，您将用“将值放在某处”替换“打印”。希望这能引导你达到你想要的。

# git - GIT 和 Perforce：分支策略

> ID：12631601
> 
> 赞同：4
> 
> 时间：2012-09-27T23:35:00.340
> 
> 标签：git, perforce

我正在学习这两个源代码控制系统，发现它们的分支策略非常不同。

Perforce 将其所有原始文件复制到新分支，虽然它确实采用了一些技巧（例如惰性复制，“p4 -v”）来防止空间增长，但最终它会消耗更多空间并留下更多元数据。相反，在 GIT 中，分支基本上是指针的移动。我想知道为什么 Perforce 不能采用同样的方法？那是因为它带来了存储快照（如在 git 中）而不是文件差异（如在 Perforce 中）的负担吗？

另外，为什么 GIT 存储文件的快照而不是差异？有没有必要这样做？这是否意味着在一般情况下 GIT 代码库会比 Perforce 大？如果相同的东西要存储在两个系统中？GIT 的提交时间会更长吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T23:41:22.343

Git 实际上也存储增量。这些被称为包文件。如果您稍微更改一个文件 100 次，它不会保留 100 个稍微不同的对象。（更多信息：http: [//git-scm.com/book/en/Git-Internals-Packfiles](http://git-scm.com/book/en/Git-Internals-Packfiles)）

快照是绝对真理，这就是 git 像这样存储历史的原因。它采用简单的方法，即不假设文件如何以及为什么以某种方式更改。它的愿景是让上面的工具分析历史，为您提供诸如“此时此文件已重命名”之类的信息。

如果那是历史的一部分，那么如果您的阈值构成重命名 w/ 小更改与删除和创建更改的阈值，则您将不得不全部重写。简单更好。事实上，这是在 linux 上设计的以跟踪 linux 源代码，它遵循该平台的类似理念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T19:10:55.987

这实际上是一个复杂的话题，但是在他们如何处理分支和文件历史方面需要权衡取舍。Git 分支位于存储库级别，而 Perforce 可以非常精细，允许您分支单个文件或通常独立开发的多组文件。

正如您所提到的，Git 分支非常快速且轻量级，而 Perforce 分支使您可以更好地控制正在发生的事情。

# linux - 模仿 TextMate 空间和选项卡功能的 Gedit 插件

> ID：12631603
> 
> 赞同：0
> 
> 时间：2012-09-27T23:35:09.463
> 
> 标签：linux, gedit

我看到了很好的 TextMate 功能，它在制表上显示了一个小箭头，并且该`¬`符号可用于跟踪不必要的空格。

我有 gmate 插件，但似乎没有这个功能。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:25:37.810

Gedit 附带一个名为“Draw Spaces”的插件，它将显示所有空格的字符，包括制表符、空格和换行符。`Edit`只需在> `Preferences`> `Plugins`>中启用它`Draw Spaces`。

# javascript - 如何检测 iframe 何时想要更改

> ID：12631605
> 
> 赞同：1
> 
> 时间：2012-09-27T23:35:10.920
> 
> 标签：javascript, php, jquery, iframe

好的，这与“如何检测 iframe src 何时更改”问题相似但不一样，因为它是 iframe*想要*更改的时候。我的意思是，我有一个带有 Google 的 iframe（我刚开始使用基于 Web 的操作系统，因为我很无聊，请查看[http://dextive.com/russellsayshi/os/](http://dextive.com/russellsayshi/os/)）但问题是 google 使用阻止在 iframe 中显示的标头。

到目前为止，我解决它的方法是使用这个简单的源创建一个 PHP 页面（请原谅我的 PHP 菜鸟）：

```
<?php
echo "<base href='".$_GET['url']."'>";

$site=file_get_contents($_GET['url']);

echo $site;
?>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
$("a").click(function() {
    var href = this.href;
    var baseURL = "overridexframe.php?url=";
    window.location = baseURL + href;
    return false;
});
</script> 
```

这很好用，并且将 iframe 源设置为`overridexframe.php?url=(url goes here)`很好用，直到您尝试搜索。正如您在上面看到的，我有 jQuery 修复链接，但是当它尝试使用 javascript 更改它时，它不会转到我指定的覆盖 URI。有谁知道当 iframe 尝试更改但不能更改时尝试捕获的方法，所以我可以将 JS 应用于它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:40:22.413

你到底想在这里实现什么？我在您的“操作系统”中看到一个弹出的“浏览器”。如果您想控制在浏览器弹出窗口中显示的页面（我认为这是有问题的 iFrame 所在的位置），您是否考虑过使用服务器端脚本语言（也许是 PHP）来处理 iFrame？

假设 PHP，它可以像这样工作：

使用 cURL 或 file_get_contents() 获取您要显示的页面。该页面现在在 PHP 中执行查找/替换以操作所有 href 值并将您的 url 更改为如下内容：

```
href="local_handler.php?target=orig_url" 
```

也为您可能找到的任何表单目标执行此操作。您的“local_handler.php”脚本然后处理所有日志记录。

这样做的结果是您现在可以完全松开 iFrame。外部站点代码现在位于您的原始窗口中 - 您可能会遇到一些样式问题和一些冲突的 JS 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:15:43.063

不，没有官方方法可以检测框架何时仅使用 JavaScript 请求新 URL - 因为如果可以的话，可能会有很多安全后果。实现这一点*（并且能够锻炼框架的去向）*的唯一方法是在用户可以导航到其他地方的每种可能方式之前介入。有很多方法可以使页面导航到另一个位置：

1.  点击链接
2.  提交表格
3.  在地址栏中输入
4.  javascript / 插件触发 window.location
5.  元刷新标签
6.  javascript / 插件请求 window.open 使用目标作为 _self 或 _top

以上只有一些是“可覆盖的”，即使那样它也不是完全可靠的......这就是为什么我建议你不要以你的方式进行 - 除非这个项目只是为了学习或娱乐。获取另一个站点的源并将其输出到您自己的内部会导致您遇到各种编码问题……更不用说版权和使用条款方面的法律后果了。

无论如何，本着回答您的问题的精神，您可以通过创建链接覆盖和表单提交覆盖来解决谷歌的“搜索”问题，方法如下：

```
$('form').submit(function(){

    var form = $(this);

    /// this code will allow you to hijack any forms that try to submit
    /// and stop them submitting, whilst at the same time allowing you
    /// to do something else instead.

    return false;
}); 
```

然而，上面的问题是您必须编写 javascript 代码，将提交的表单转换为一个简单的 GET Url，您可以将其附加到您的覆盖路径。如果表单设计为通过 GET 简单地发送其信息，这是可行的*（幸运的是，谷歌这样做了）*。这在下面的链接中*进行了讨论（查找 jQuery`form.serializeArray`注释，而不是 AJAX，您可以使用它来生成您的 URL）*：

[如何将简单的表单提交转换为 ajax 调用；](https://stackoverflow.com/questions/11082485/how-to-convert-simple-form-submit-to-ajax-call)

[如何使用 Javascript 构建查询字符串](https://stackoverflow.com/questions/316781/how-to-build-query-string-with-javascript)

但是，如果表单 POST 它是数据，那么如果没有实现一大堆相当复杂的不可靠的东西，您使用的方法将无法工作......如果您考虑一下，您使用什么 URL 来表示 POSTed 表单都是数据？-- 是的，与没有数据的表单完全相同的 URL。

简而言之，如果您希望扩展此系统以覆盖比 Google 的屏幕截图更多的页面，我会想到一种不同的方式来做您想做的事情。

# c++ - 为什么这段代码在调试时慢了 100 倍？

> ID：12631609
> 
> 赞同：14
> 
> 时间：2012-09-27T23:35:30.730
> 
> 标签：c++, visual-c++, stl

我正在使用 MSVC 2010。

我正在尝试从列表中删除重复项（不保留任何一项）

为什么这段代码在调试模式下要慢 100 倍？

有没有其他方法可以删除所有等效的对象并使其在调试模式下更快？

到了我目前无法使用调试的地步。处理需要几分钟，而发布需要几秒钟。

```
void SomeFunction()
{
    std::list<Something> list;
    std::list<Something>::iterator it1;
    std::list<Something>::iterator it2;

    for (it1 = list.begin(); it1 != list.end(); it1++)
    {
        for (it2 = list.begin(); it2!=list.end(); it2++)
        {
            if (it1->SomeValue() == it2->SomeValue())
            {
                if (it1 != it2)
                {
                    list.erase(it1);
                    list.erase(it2);

                    it2 = list.begin();
                    it1 = it2++;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T23:40:44.647

通常，由于[迭代器调试支持](http://msdn.microsoft.com/en-us/library/aa985982.aspx)，STL 在 Visual Studio 中调试时非常慢。[`_HAS_ITERATOR_DEBUGGING`](http://msdn.microsoft.com/en-us/library/aa985939.aspx)您可以通过设置为 0来显着加快速度。

# java - 如何将此 MySQL-Query 转换为 Hibernate-Query

> ID：12631610
> 
> 赞同：4
> 
> 时间：2012-09-27T23:35:44.927
> 
> 标签：java, mysql, hibernate, geolocation, spatial

我想问一下如何将此 MySQL 查询转换为 Hibernate 查询：

```
SELECT * FROM Cities WHERE WITHIN(GeomFromText('POINT(52.5 13.3)'), polygon); 
```

或这个

```
SELECT * FROM Cities WHERE MBRContains(polygon, GeomFromText('POINT(52.5 13.3)'); 
```

谢谢你。托马斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T00:28:29.270

知道了：

```
import com.vividsolutions.jts.geom.Coordinate;
import com.vividsolutions.jts.geom.GeometryFactory;
import com.vividsolutions.jts.geom.Point;
import javax.persistence.Query;

Coordinate coord = new Coordinate(52.5, 13.3);
Point point = new GeometryFactory().createPoint(coord);
Query query = em.createQuery("FROM Cities WHERE WITHIN(:location, polygon) = true", Cities.class);
query.setParameter("location", point); 
```

# objective-c - 如何将现有的 Core Data 对象分配给另一个 Core Data 对象的属性？

> ID：12631612
> 
> 赞同：1
> 
> 时间：2012-09-27T23:35:49.820
> 
> 标签：objective-c, core-data, nsmanagedobject

如果我搜索一个`Customer`对象并且发现客户存在，那么我想将该对象分配给`Customer`一个`invoice.customer`新`Invoice`对象的属性。我可以执行以下操作吗？

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Customer" inManagedObjectContext:self.objectContext]];
request.returnsObjectsAsFaults=NO; //populate beverage object
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(id == %@)", customerID];
[request setPredicate:predicate];

NSError *error = nil;
NSArray *array = [self.objectContext executeFetchRequest:request error:&error];
if([array count] == 1) 
{
    invoice.customer = (Customer*)[array objectAtIndex:0];
} 
```

我要避免的是必须重新分配 to 的所有属性`Customer`值`invoice.customer`。这样做时有什么注意事项吗？

# java - 重建的 GWT 插件（java）不起作用

> ID：12631615
> 
> 赞同：0
> 
> 时间：2012-09-27T23:36:30.603
> 
> 标签：java, eclipse, gwt, eclipse-plugin

我正在使用 GWT 2.4.0 开发 Eclipse 3.7。
我遇到了 GWT 编译器错误，所以从这里下载了 GWT 源代码

```
http://google-web-toolkit.googlecode.com/svn/trunk/ 
```

并修复了一个源文件，构建它并替换了整个目录

```
plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201208080120-rel-r37/gwt-2.4.0 
```

然后我重新启动了eclipse并刷新了我的项目并执行了GWT编译器，但是没有任何效果，仍然输出和之前一样的错误信息。我检查了很多次相应的错误日志行已从源文件中完全删除。我也徒劳地尝试在本地安装整个插件。

什么样的机制阻止我修复 GWT 插件的源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:59:43.863

*您在 Eclipse 中的项目 -->properties -->google --> web toolkit*下为您的 SDK 选择了什么？

例如，我有两个 gwt2.4 列表，当我选择*配置 SDK时，我可以看到**插件*目录 中有多个版本。

也许 eclipse 被配置为使用与您修改的插件目录不同的插件目录。

# python - 这个“无”在 Python 的 .get() 中做了什么？

> ID：12631620
> 
> 赞同：2
> 
> 时间：2012-09-27T23:37:28.077
> 
> 标签：python

我正在尝试通过 Learn Python the Hard Way 来学习 Python。我现在在练习 39 并且有一个简单的问题。我试图在网上搜索，但找不到任何答案。这是练习中的代码：

```
# create a mapping of state to abbreviation
states = {
    'Oregon': 'OR',
    'Florida': 'FL',
    'California': 'CA',
    'New York': 'NY',
    'Michigan': 'MI'
}

# create a basic set of states and some cities in them
cities = {
    'CA': 'San Francisco',
    'MI': 'Detroit',
    'FL': 'Jacksonville'
}

print '-' * 10
# safely get a abbreviation by state that might not be there
state = states.get('Texas', None)

if not state:
    print "Sorry, no Texas."

# get a city with a default value
city = cities.get('TX', 'Does Not Exist')
print "The city for the state 'TX' is: %s" % city 
```

我不太明白`None`in 的作用是什么`state = states.get('Texas', None)`。如果它被用来告诉 Python “没有更多了”，那我为什么不能直接写`state = states.get('Texas')`呢？我在`None`这里需要什么额外的东西？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T23:39:33.737

这里`None`是一个默认值，用于[`dict.get()`](http://docs.python.org/py3k/library/stdtypes.html#dict.get)告诉 python 如果键不存在返回什么。在这种情况下有点多余，因为第二个参数`get()`默认`None`为。

从[文档](http://docs.python.org/py3k/library/stdtypes.html#dict.get)：

> 获取（键[，默认值]）
> 
> 如果键在字典中，则返回键的值，否则返回默认值。如果未给出默认值，则默认为无，因此此方法永远不会引发 KeyError。

所以它直接相当于`states.get('Texas')`which相当于：

```
try:
    state = states['Texas']
except KeyError:
    state = None 
```

因此，在这种情况下，您只需检查 if`state`不计算`True`为返回您也过滤掉的其他值，例如空字符串，这似乎不太可能）。

Python 文档详细但清晰，因此在您不知道参数是什么的情况下，请查看文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:39:47.580

`None`如果在字典中找不到键，则不需要编写, 这是默认返回值。在这种情况下是多余的。

您可以替换它以返回其他内容`Not found`，例如。

# solr - 使用 Solr 提取情感文本

> ID：12631621
> 
> 赞同：0
> 
> 时间：2012-09-27T23:37:36.063
> 
> 标签：solr, sentiment-analysis

我几乎整天都在网上搜索，试图找到是否有办法使用 Solr 来做到这一点。基本上我想从给定的文本及其频率中提取正面和负面的词。提前感谢您的指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:03:16.217

我认为像[Lingpipe](http://alias-i.com/lingpipe/demos/tutorial/sentiment/read-me.html)这样的东西对于情绪分析会更有用。您可能可以调整它以处理来自 Solr 索引的输入。

# .net - .net 中是否有这样的数据网格/日历控件或类似控件或任何硬编码方式？

> ID：12631622
> 
> 赞同：1
> 
> 时间：2012-09-27T23:37:40.960
> 
> 标签：.net, datagridview, calendar

所以我有一个数据库并存储这些值：

```
Name : John
Date : 20 September 2012
Status : T 
```

我想要一个显示如下数据的数据网格或表格或日历控件： ![在此处输入图像描述](../Images/1cc606f81bc4986ddd9a3dd1f81853df.png)

它将日期显示为从 1 到 31 的列，在数据下方显示相应的日期，即 Monday 、 tuesday 等，最后显示适合每个日期的名称和状态。

我不确定是否有控制或硬编码的方式来做到这一点。我不介意购买第三方控件（如果存在），它可以更轻松地以上述格式显示数据。

使用 Vb.net 和框架 3.5。

# scala - Scala Play Framework获取用户的IP地址

> ID：12631625
> 
> 赞同：6
> 
> 时间：2012-09-27T23:38:29.053
> 
> 标签：scala, playframework

我以前见过这个问题，但我无法使用这些答案来获取用户的 IP 地址。

在 PHP 中是这样的：

```
$_SERVER['REMOTE_ADDR']; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T10:26:56.950

如果您需要在操作中访问此信息：

```
Action { request =>
    val address = request.remoteAddress;
    ...
} 
```

如果您需要在其他地方访问，请注意您可以使用隐式：

```
Action { implicit request => ... }
myMethod(implicit request: Request) { ... } 
```

而且你总是可以退回到只是传递请求。

# c++ - C2365 和 C2063 类错误

> ID：12631628
> 
> 赞同：0
> 
> 时间：2012-09-27T23:38:41.540
> 
> 标签：c++, class

我正在尝试使用课程为大学课程编写基本的电梯模拟。现在 void CurrentFloor() 函数正在导致 C2365 和 C2063 错误，我不知道为什么，其他函数似乎已检出，但我无法弄清楚为什么这个特殊函数会导致这些错误。

```
#include <iostream>
#include <stdlib.h>
#include <iomanip>

using namespace std;

class elevator
{
  private:
    int StartFloor;
    int NewFloor;
    int currentFloor;
    int requestedFloor;
    char response;

public:
    elevator(int floor = 0);
    void CallElevator();
    void CurrentFloor();
    void RequestedFloor();
};
elevator::elevator(int f)
{
    StartFloor = f;
    f=1;
    cout<<"The elevator is currently on the "<<StartFloor<<" floor";
}
void elevator::CallElevator()
{
    cout<<"Would you like to call the elevator to your floor?: ";
    cin>>response;
}
void elevator::RequestedFloor()
{
    cout<<"What floor would you like to go to?: ";
    cin>>requestedFloor;
}
void elevator::CurrentFloor()
{
    cout<<"What is your current floor?";
}
int main()
{
    elevator elevatorone(1);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:45:05.720

代码编译得很好，应该编译得很好。

没有任何其他事情可以继续，我建议您可能忘记在`()`以下位置输入`declaration`：

```
void CurrentFloor/*()*/; 
```

或`definition`：

```
void elevator::CurrentFloor/*()*/ 
```

也就是说，在您的***实际***代码中。你正在编译你正在编辑的源文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:42:48.010

2 秒谷歌作为*第一次点击*`c2365`返回：http : [//msdn.microsoft.com/en-us/library/86y793k4%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/86y793k4%28v=vs.71%29.aspx)

 *重命名您的函数或成员名称...*

# php - 我正在尝试从 OnetoMany 关系中读取 Doctrine Collection 项目，但我找不到如何。

> ID：12631629
> 
> 赞同：0
> 
> 时间：2012-09-27T23:38:45.143
> 
> 标签：php, symfony, frameworks, doctrine

我正在使用 Symfony2。

这是我的对象播放器：

```
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="player")
 */
class Player
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    protected $name;

    protected $urlAvatar;

    /**
     * @ORM\Column(type="integer")
     */
    protected $coins;

    /**
     * @ORM\Column(type="integer")
     */
    protected $money;

    /**
     * @ORM\OneToMany(targetEntity="Mercenary", mappedBy="player")
     */
    protected $mercenaries;

    public function __construct()
    {
        $this->mercenaries = new ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set coins
     *
     * @param integer $coins
     */
    public function setCoins($coins)
    {
        $this->coins = $coins;
    }

    /**
     * Get coins
     *
     * @return integer 
     */
    public function getCoins()
    {
        return $this->coins;
    }

    /**
     * Set money
     *
     * @param integer $money
     */
    public function setMoney($money)
    {
        $this->money = $money;
    }

    /**
     * Get money
     *
     * @return integer 
     */
    public function getMoney()
    {
        return $this->money;
    }

    /**
     * Add mercenaries
     *
     * @param IFZ\TowerofDimensionsBundle\Entity\Mercenary $mercenaries
     */
    public function addMercenary(\IFZ\TowerofDimensionsBundle\Entity\Mercenary $mercenaries)
    {
        $this->mercenaries[] = $mercenaries;
    }

    /**
     * Get mercenaries
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getMercenaries()
    {
        return $this->mercenaries;
    }
} 
```

我想阅读雇佣兵的信息，但我找不到方法。它返回一个 Doctrine 集合，但我无法继续并从集合中获取所有项目。我不想过滤它们，我只想获取所有项目。感谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:15:14.683

`ArrayCollection`您可以像使用数组一样迭代a：

```
foreach ($player->getMercenaries() as $mercenary) {
    // do whatever you want with $mercenary
} 
```

或在树枝中：

```
{% for mercenary in player.mercenaries %}
    {# do whatever you want with mercenary #}
{% endfor %} 
```

您还可以从集合中获取数组：

```
$mercenariesArray = $player->getMercenaries()->toArray(); 
```

# jquery - jquery - 想要从呈现两种方式的页面中获取价值（查看和编辑）

> ID：12631630
> 
> 赞同：2
> 
> 时间：2012-09-27T23:38:47.170
> 
> 标签：jquery, jquery-selectors

（jquery新手警报！）

我正在尝试使用 JQuery / javascript 从文本字段中获取值，然后检查它是否超过 14 天。我的问题是页面（和我的字段的 HTML）会有所不同，具体取决于应用程序/页面是处于“编辑”模式还是“查看”模式。

是否可以编写一个选择器，将 val 包裹在 span 内，无论它是在输入字段内还是只是 span 内的文本？例如，可以通过 span().val() 获取值吗？我正在尝试，但到目前为止还没有成功。

这是 HTML 片段：

编辑模式：

```
<td class="m1234Bottom" style="width:35%;">
    <span id="ABC123" class="Datetime">
    <div class="dateElement" id="ABC188c">
        <input name="ABC$123ccc"
           type="text">
        <a class="date"></a>
        <a style="display: none;" class="time"></a>
    </div>
    </span>
</td> 
```

查看模式：

```
<td class="m1234Bottom" style="width:35%;">
    <span id="ABC123">
        12/23/2012
    </span>
</td> 
```

我可以通过以下方式获得“编辑”值：

```
$("input[name*='123ccc']".each(function() {
    var outv= $(this).val();
    alert(outv);
}); 
```

是否有更好的 JQuery 可以在编辑或查看代码中找到该值？

抱歉，如果该 selection/each/this.val 链接让您感到畏缩。我只是第一次探索 jquery 几个小时。随意嘲笑或指出更好的方法；我什至不需要解释——我可以使用 RTFWebDoc。但是如果有人不干预，我就只能通过 javascript 来做这件事：接下来将是一个讨厌的 if/then 代码块，然后再进行几个小时的试错和 stackoverflow-reading 来学习 jquery 错误检查 null-值，然后在我最终达到我的目标之前重新发现 javascript 的 string-to-date 函数：“这个日期是否 > 14 天？”

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:55:09.307

如果我理解正确，您想要获取 span id #ABC123 的文本值或名称为 ABC$123ccc 的输入值。

在这种情况下，根据您提供的代码段，您可以尝试以下方式：

```
var span = $('#ABC123');

//check if span has input child
if (span.find('input').length > 0) {
    //get value from input field
    var date = span.find('input').val();
}
else {
    //get text date from the span
    var date = span.text();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:00:59.217

```
$(function() {
    $('#ABC123').find('input').length > 0 ? value = $('#ABC123').find('input').val() : value = $('#ABC123').text();
    console.log(value);
});​ 
```

jsfiddle：http: [//jsfiddle.net/63QF6/41/](http://jsfiddle.net/63QF6/41/)

在小提琴中，将跨度的一个 ID 更改为 #ABC123 以外的任何内容以模拟更改视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:53:53.747

不幸的是，您不能将 val() 函数用于 span。根据 JQuery 网站上的定义：

.val() 方法主要用于获取输入、选择和文本区域等表单元素的值。

如果要检索跨度的值，则应使用 .text() 或 .html() 因为跨度的内容不是“值”而是跨度的内容（跨度可以包含其他节点，不像输入）。

但是您可以创建一个独特的功能，例如：

```
function retrieveValue()
{
    // Retrieve the element (not guess yet)
    var spanOrInput = $("#ABCD123");

    // Try to guess if its an input or a span
    var type = spanOrInput.attr('type');
    if (typeof type == "undefined" || !type)
        return spanOrInput.val();
    else
        return spanOrInput.html();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T23:53:17.877

你有什么理由不能这样做：

```
<input type="hidden" id="hidtype" /> 
```

然后根据天气，在这个隐藏字段中存储的是查看模式或编辑模式，

```
 $(function(){
     if ($('#hidtype').val() == '1') {   //or what ever you use to set state
     // code here for that mode
     }
     else{
    // code for other type of mode
     }     
 }); 
```

如果你坚持这样做，你可以检查输入是否像这样存在

```
if( $('#ABC123 input').length ) {
//this means the input exists - handle from here
} 
```

# c++ - 哈希表中的这种插入和删除逻辑是如何工作的？

> ID：12631631
> 
> 赞同：0
> 
> 时间：2012-09-27T23:39:01.097
> 
> 标签：c++, pointers, hashtable

我一直在努力理解它在 gdb 中是如何工作的，但我很难理解它。基本上有一个数组 ( `elements_`)，其中的东西被散列，这些东西是指向包含某些用于链接的钩子的结构的指针。这是一个示例结构：

```
struct foo
{
    Data  data;
    foo*  next;
    foo** prevNext;
}; 
```

然后哈希表被实例化

```
HashTable<foo> hash; 
```

它的插入功能看起来像这样（为了简单起见，我省略了调整大小）

```
template <class T>
void HashTable<T>::insert(T* x)
{
    int bucket  = hashFunc(x->data);
    T** xPtr    = &elements_[bucket];
    x->next     = *xPtr;
    x->prevNext = xPtr;

    if (x->next)
        x->next->prevNext = &x->next;

    *xPtr = x;
} 
```

删除如下

```
template<class T>
void HashTable<T>::remove(T* x)
{
    if (x->next)
        x->next->prevNext = x->prevNext;

    *x->prevNext = x->next;
} 
```

并且作为参考，它的搜索方式是这样的：

```
template<class T>
T* HashTable<T>::find(Data& data)
{
    int bucket = hashFunc(data);

    T* ptr = elements_[bucket];
    while (ptr != 0)
    {
        if(ptr->data == data)
            return ptr;
        ptr = ptr->next;
    }
    return 0;
} 
```

我一直在尝试跟踪 2-3 个碰撞元素的插入（通过将表大小设置为小开始）和删除以查看逻辑是什么，但我不理解它。这是我认为删除操作（删除节点 2）正在执行的操作的图表，尽管在我的脑海中仍然有点模糊：

![在此处输入图像描述](../Images/4c9b9271a384d5e2d76c5b6868059239.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:43:20.910

落入同一桶的元素存储为双向链表（有点）。

查找遍历该列表，直到找到具有匹配`data`值的元素。

# python - 具有不均匀大小元素的时间序列

> ID：12631632
> 
> 赞同：2
> 
> 时间：2012-09-27T23:39:03.977
> 
> 标签：python, numpy, resize, time-series

我有一个关于在 numpy 数组中获取元素并在循环中调整其大小的问题。

基本问题是我有一个格式为 (x,y) 的时间序列，其中一些元素缺少 y 值，因此它们被读入程序的长度为 1。

即：[x,y] [x,y] [x] [x,y]

所以我需要把这些偶尔的点调整为标准（1,2）（然后根据分布生成一个点，但这不是问题）。我知道 numpy.resize 函数，但是当我尝试时：

```
for element in list:
   if len(element)==1:
      element=n.resize(element,(1,2)) 
```

它在循环范围内工作，但如果我打印列表，所有元素都与循环从未发生过一样。resize 函数返回一个数组，所以我很困惑为什么将列表的元素设置为等于该数组不起作用。

编辑：我找到了一个使用常规 python 列表的简单解决方案：

```
for element in list:
    if len(element)==1:
       element.append(0) 
```

但是我仍然很好奇为什么上面的方法不起作用，因为当然可以设置一个等于某物的元素。或者你只能设置 element[i] 等于 [1,x] 数组中的某个值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:13:58.767

使用`element=n.resize(element, (1,2))`，您实际上是在创建一个新对象，它是旧对象`element`的结果，但是由于您没有对这个新对象做任何事情，因此您的修改会丢失。`np.resize``element`

当您这样做时`element.append(0)`，您正在`element`就地修改，因此您仍然引用初始对象并且您的修改被保存。

也就是说，有更好的方法来处理`ndarray`. 正如您所注意到的，如果不是所有这些元素都是两个项目的序列，则无法从元素列表中创建`(N,2)`数组：您必须以某种方式填补空白。`N`如果您的初始数据来自文本文件，您可以使用[`np.genfromtxt`](http://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html)参数`usemask=True`来创建[`MaskedArray`](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)：

```
>>> data = StringIO.StringIO("1,2\n3,4\n,6\n7,\n")
>>> x = np.genfromtxt(data, delimiter=",", usemask=True)
>>> x
masked_array(data =
 [[1.0 2.0]
 [3.0 4.0]
 [-- 6.0]
 [7.0 --]],
             mask =
 [[False False]
 [False False]
 [ True False]
 [False  True]],
       fill_value = 1e+20) 
```

最初的空白已被您的特殊`np.ma.masked`价值所填补。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:17:54.233

当您说`element=...`您没有修改元素引用的对象时，您正在`element`引用一个新对象。当您调用`append`元素时，您实际上是在修改对象。

# jqgrid - 编辑后网格未加载

> ID：12631633
> 
> 赞同：0
> 
> 时间：2012-09-27T23:39:11.223
> 
> 标签：jqgrid

1）我正在使用 JQGrid 我可以编辑 roa 并发布数据，但提交后网格没有加载。我知道我遗漏了一些东西，但不确定是什么。我查看了论坛和谷歌，但没有结果。任何帮助将被appriciated.Below是供您参考的代码

```
$(document).ready(function() {
            jQuery("#g-grid").jqGrid({
                datatype: "json",
                mtype: 'GET',
                url:  '${createLink(controller: 'response', action: 'listRequestsAsJSON')}',
                   colNames: ['Entry Type', 'Life Cycle Status','Start Date','End         Date','Key      Stakeholder Publish'
                                  ,'Remarks','RoadmapGroup','EventStatus'],
                      colModel: [
                                     {name:'roadMapEntryTypeCode',index:'roadMapEntryTypeCode', editable:true,
                                         edittype:"select",editoptions:{value:initdropdownlist('LIFECYCLE')}},
                                  {name:'lifeCycleStatusCode',index:'lifeCycleStatusCode',editable:true,
                                    edittype:"select",editoptions:{value:initdropdownlist('LIFECYCSTAT')}},
                                     {name:'roadMapEventStartDate',index:'roadMapEventStartDate',editable:true,
                                         formatter:'date',editoptions:{dataInit:datePick}},
                                    {name:'roadMapEventEndDate',index:'roadMapEventEndDate',editable:true,
                                               formatter:'date',editoptions:{dataInit:datePick}},
                                  {name:'keyStakeholderPublisherCode',index:'keyStakeholderPublisherCode',editable:true,
                                    edittype:"select",editoptions:{value:initdropdownlist('KEYSTAKEPUB')}},
                               {name:'roadMapEventRemarksText',index:'roadMapEventRemarksText',editable:true,
                                        edittype:"textarea",editoptions:{rows:"2",cols:"20"}},    
                               {name:'roadMapGroupName',index:'roadMapGroupName',editable:true
                                   ,editoptions:{size:10}},
                               {name:'roadMapEventStatusCode',index:'roadMapEventStatusCode',editable:true,
                                       edittype:"select",editoptions:{value:initdropdownlist('EVENTSTAT')}}    
                           ],  
                  pager: jQuery('#g-pager'),
                  ondblClickRow: function(rowid) {    
                                jQuery(this).jqGrid('editGridRow', rowid,
                                        {
                                    closeAfterEdit:true,
                                    afterSubmit: function(response,postdata){
                                        var json=response.responseText;
                                        var result=eval("("+json+")");
                                        return [result.status,result.message];},
                                    editCaption: "Edit LifeCycle Roadmap",
                                    bSubmit: "Save",
                                    bCancel: "Cancel",
                                    bClose: "Close",
                                    saveData: "Data has been changed! Save changes?",
                                    bYes : "Yes",
                                    bNo : "No",
                                    bExit : "Cancel",
                                    reloadAfterSubmit:true
                                        });},
                  viewrecords: true,
                  gridview: true,    
                  editurl:'${createLink(controller: 'response', action: 'updateAssetLifecycleRoadmap')}'+"?AssetId="+${assetInstance?.id}
                });    
        });
        datePick = function(elem){jQuery(elem).datepicker({dateFormat:"mm/dd/yy"});};

        $("#bedata").click(function(){
             var gr = jQuery("#g-grid").jqGrid('getGridParam','selrow');
              if( gr != null ) jQuery("#g-grid").jqGrid('editGridRow',gr,{height:280,reloadAfterSubmit:false});
              else alert("Please Select Row");
              });
        initdropdownlist = function(colName) {
               var options = ":";
               $.ajax({
                      async: false,
                type: "GET",
                url: '${createLink(controller: 'response', action: 'getDropDownList')}?' + "sel=" + colName,
                contentType: "application/json; charset=utf-8″,
                dataType: "json",
                success: function(dropDownListMap) {
                              for (var i = 0; i < dropDownListMap.option.length; i++) {
                                options +=";"+dropDownListMap.option[i].value + ":" +dropDownListMap.option[i].label;
                                  }   
                              }
                });
               return options;
        } 
```

2）另一件事是编辑按钮，点击按钮没有动作，知道吗？

```
<input type="BUTTON" id="bedata" value="Edit Selected"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T06:55:45.337

尝试：

```
$('#unmatchedgrid').setGridParam("ur url and params here" )
jQuery("#g-grid").trigger('reloadGrid') 
```

从您第二次通过获取所选参数（如果有）加载网格开始

# javascript - 将 JS 应用于动态创建的 div？

> ID：12631634
> 
> 赞同：1
> 
> 时间：2012-09-27T23:39:20.617
> 
> 标签：javascript, jquery

我的页面上有多个 div，可以动态添加到页面中，也可以删除。

在页面加载时，动态创建的 div 是从`localStorage`uniqiue id 和一个**公共类加载的，具体取决于 div**，我同时调用一个函数，`content()`.

该函数`content()`如下所示：

```
function content(){
    alert("test");
    $(".two button").click(function(){
        var id = $(this).parent().attr("id");
        alert(id);
    });
} 
```

很简单，它所做的只是在调用函数时提醒“test”，如果你点击`.two` `<button>`，它会提醒`.two` `<textarea>` `.val()`。

一旦加载了 div 就可以正常工作，但是当我克隆 div 时遇到了问题

当我克隆 div 时，它会为它们提供一个唯一的 id 和一个像上面一样的通用类。在结束时`cloneDiv()`，我调用`content()`，这样点击里面的元素就会产生和上面一样的结果。

问题是，该函数将被调用的次数与屏幕上 div 的次数一样多，但这也意味着单击`<button>`div将发出**3 次**`.two`警报。`.two` `<textarea>` `.val()`

 **TLDR；点击`.two`get 中的按钮的次数与屏幕上 div 的次数一样多，因为一旦创建动态 div 就会调用该函数，但只能调用一次。

有很多代码可以完成这一切，但我想我已经很清楚地解释了发生的事情。但是，如果这会有所帮助，我会制作一个演示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:42:32.417

您想使用以下[`.on`](http://api.jquery.com/on/)功能：

```
$('body').on('click', '.two button', function(){
    var id = $(this).parent().attr("id");
    alert(id);
}); 
```

我会将其中的`'body'`一部分更改为这些按钮的真实容器。所以说按钮总是在带有 id 的内容 div 中`my-div`，你会这样做：

```
$('#my-div').on('click', '.two button', function(){
    var id = $(this).parent().attr("id");
    alert(id);
}); 
```

您也只需要此代码运行一次，因此无需将其放入多次调用的函数中。只需将其放入您的`$(document).ready(....)`.

小提琴：http: [//jsfiddle.net/gromer/dxbqz/](http://jsfiddle.net/gromer/dxbqz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:43:42.627

这就是“事件委托”的用途。您在文档上设置了一个处理程序，它将处理来自其后代的事件，即使它们是在附加处理程序之后创建的：

```
$(document).on("click", ".two button", function(){
// put a click hander on the document to process clicks
// from buttons that are descendants of elements with class=two 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:46:15.290

问题是这样的：“在cloneDiv()的最后，我调用了content()，这样点击里面的元素就会产生和上面一样的结果。” 发生的事情是您将事件复合到现有元素上，这就是为什么您会收到如此多的回调。您应该改为使用该`.on`功能，并且只使用一次。如果您`.on`多次调用它将产生相同的结果，因为将注册多个事件。

```
$(".two button").on("click",function(){
    var id = $(this).parent().attr("id");
    alert(id);
}); 
```

这样做**一次**，每个匹配的按钮`(".two button")`都会响应它，即使稍后附加。

另一种方法是将元素传递给 content() 调用，然后如果您在创建元素时总是调用此函数，则从那里标记它。

```
function content(element){
 $(element).click(function(){
    var id = $(this).parent().attr("id");
    alert(id);
 });
} 
```

附带说明一下，使用警报进行调试可能会出现问题，因为它们会中断程序执行。我强烈建议使用`console.log(id)`，然后在控制台中查找您的测试变量。`console.trace()`如果您使用第三方脚本并且需要查看哪里出了问题，这也是一个很好的记住。**

# objective-c - 如果当前版本可供销售但尚未公开，我可以向 App Store 提交新版本的应用程序吗？

> ID：12631639
> 
> 赞同：1
> 
> 时间：2012-09-27T23:39:34.910
> 
> 标签：objective-c, ios, app-store

我以前从未遇到过这种特殊情况。

我提交的应用程序成功通过了 Apple 的审核流程。该应用程序现在处于**准备销售**状态，但我尚未向公众发布该应用程序（出于各种原因，我不想进入）。这是该应用程序的第一个版本，因此该应用程序尚未以任何形式向公众提供。

如果我已经完成了后续版本并准备提交，我可以将其提交以供审核以更改提交版本的发布日期吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T04:56:37.357

如果它处于 Ready for Sale 状态，您应该能够从销售中删除该应用程序。

[从销售中删除应用程序](http://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/10_ManagingYourApplications/ManagingYourApplications.html#//apple_ref/doc/uid/TP40011225-CH3-SW35)

然后，您可以创建新版本并提交以供审核。第一个版本不应该进入 App Store，因为它的状态将是“开发者下架”。

# extjs - 在 extjs 4 中的控制器之间来回切换

> ID：12631645
> 
> 赞同：0
> 
> 时间：2012-09-27T23:40:13.087
> 
> 标签：extjs, extjs4, extjs-mvc

我正在用 extjs 4 (MVC) 构建一个应用程序。我经常发现需要在两个控制器之间来回切换。但我似乎无法在文档中找到如何。

我的场景是这样的。

```
Ext.define('mycontroller',{
 someMethod: function() {
 }
})

Ext.define('mycontroller1',{
 someMethod: function() {
   var someAction = function() {
     //need to call somethod in mycontroller
   }
 }
}) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:17:04.763

```
this.getController('Foo').bar(); 
```

# c++ - 后缀计算器的中缀，实现 sin cos 和 X&Y 变量？

> ID：12631648
> 
> 赞同：1
> 
> 时间：2012-09-27T23:40:44.027
> 
> 标签：c++, infix-notation, trigonometry, postfix-notation

我对 C++ 很熟悉，我必须为支持`sin()`and的后缀计算器制作一个中缀`cos()`，并且它必须是一个 2 变量函数，例如`z=3x*sin(3+4y)`，我已经得到了从中缀到后缀的解析器，但我没有知道如何实现 sin 和 cos，有人告诉我可以将它们设置为运算符，例如`+`, `-`,`/`等，并为它们设置特定的标记，例如 sin() 的“s”和 cos 的“c” () 但我不完全知道如何，也不知道如何实现变量 x 和 y，我知道这不是我应该问的，但我只是累了和绝望了。

这是我的代码。我正在使用 Ubuntu 11：

```
#include <iostream>
#include <cmath>
#include <cstdlib>
#include <string>

#define MAX_SIZE 20

using namespace std;

template<class T> class Stack
{
private:
    T item[MAX_SIZE];
    int top;

public:
    Stack()
    {
        top = -1;
    }

    void push(T data)
    {
        if(!this->is_full())
            item[++top] = data;
        else
        {
            cout << "Stack Error" << endl;
            exit(10);
        }
    }

    T pop()
    {
        if(!this->is_empty())
        {
            return item[top--];
        }
        else
        {
            cout << "Stack is Empty" << endl;
            exit(11);
        }
    }

    int size()
    {
        return top + 1;
    }

    bool is_empty()
    {
        if(top == -1)
            return true;
        else
            return false;
    }

    bool is_full()
    {
        if(top == MAX_SIZE - 1)
            return true;
        else
            return false;
    }

    void display()
    {
        for(int i = 0; i < this->size(); i++)
        {
            cout << item[i] << " ";
        }
        cout << endl;
    }

    T return_top()
    {
        return item[top];
    }
};

class Convert
{
private:
    bool num_flag;
    bool two_digit_flag;

public:
    Convert();
    string return_with_bracket(string infix);
    void to_Postfix(string infix,char postfix[]);
    bool prcd(char op1, char op2);
    int isOperand(char op);
    int isOperator(char op);
    bool return_flag()
    {
        return num_flag;
    }
};

Convert::Convert()
{
    this->num_flag = false;
    this->two_digit_flag = false;
}

string Convert::return_with_bracket(string infix)
{
    return("(" + infix + ")");
}

bool Convert::prcd(char op1, char op2)
{
    if((op1 == '+' || op1 == '-' || op1 == '*' || op1 == '/') && op2 == '(')
        return true;
    if(op1=='+' && op2=='+')
        return true;
    if(op1=='-' && op2=='-')
        return false;
    if(op1=='-' && op2=='+')
        return false;
    if(op1=='+' && op2=='-')
        return false;
    if(op1=='/' && op2=='/')
        return false;
    if(op1=='/' && (op2=='-' || op2=='+'))
        return true;
    if(op1=='*' && (op2=='+' || op2=='-'))
        return true;
    if((op1 == '-' || op1 == '+') && (op2 =='*' || op2 == '/'))
        return false;
    if((op1 == '$' || op1 == '+') && (op2 =='*' || op2 == '/' || op2=='-'))
        return true;
    if((op1 == '-' || op1 == '+' || op1 =='*' || op1 == '/')&& op2=='^')
        return false;
    if(op1 == '^' && ( op2 == '+' || op2 =='*' || op2 == '/' || op2=='-'))
        return false;
}

int Convert::isOperand(char op)
{
    return(op >= '0' && op <= '9');
}

int Convert::isOperator(char op)
{
    return(op =='+' || op =='-' || op == '/' || op =='*' || op =='^');
}

void Convert::to_Postfix(string infix, char postfix[])
{
    int position, outpos=0;
    char c;
    int count = 0;
    char temp;
    char stacktop;
    Stack<char> stack;

    for(position = 0; (c = infix[position]) != '\0'; position++)
    {

        if(this->isOperand(c))
        {
            postfix[outpos++] = c;
            this->num_flag = true;
            count++;

            if(count >= 2)
            {
                this->two_digit_flag = true;
            }
        }
        else if(this->isOperator(c))
        {
            count = 0;
            if(isOperator(infix[position]) && isOperator(infix[position + 1]))
            {
                cout << " '\' aMissing argument in between " << infix[position] << " and " << infix[position + 1] << " in column " << position + 1 << endl;
                exit(9);
            }
            if(this->prcd(c, stacktop))
            {
                stacktop = stack.return_top();
                stack.push(c);
                stacktop = c;
            }
            else
            {
                while(true)
                {
                    temp = stack.pop();
                    postfix[outpos++] = temp;
                    stacktop = stack.return_top();

                    if(prcd(c, stacktop) || stacktop == '(')
                        break;
                }
                stack.push(c);
                stacktop = stack.return_top();
            }
        }
        else if(c == '(')
        {
            count = 0;
            stack.push(c);
            stacktop = stack.return_top();
        }
        else if(c == ')')
        {
            count = 0;
            while(1)
            {
                if(stack.size() == 0)
                {
                    cout << "Warning!! Number of ')' is greater than '('" << endl;
                    exit(2);
                }
                temp = stack.pop();
                if(temp != '(')
                {
                    postfix[outpos++] = temp;
                }
                else
                {
                    break;
                }
            }
            stacktop = stack.return_top();
        }
        else
        {
            cout << "Invalid input";
            exit(3);
        }
        if(infix[position] == ')' && infix[position + 1] == '(')
        {
            stack.push('*');
            stacktop = stack.return_top();
        }
    }
    if(stack.size() != 0)
    {
        cout << "Warning!!Number of '(' is greater than ')'" << endl;
        // exit(6);
    }
    if(!this->return_flag())
    {
        cout << "You must Enter Numeric value for calculation" << endl;
        cout << "This program cannot perform operations on variables";
        exit(5);
    }
    if(this->two_digit_flag)
    {
        cout << "Sory! Althoug u may  have entered right string" << endl;
        cout << "this program is only for single digit operation" << endl;
        exit(8);
    }
    postfix[outpos] = '\0';
}

class Evaluate
{
public:
    double eval(char expr[], Convert &);
    double oper(int symb, double op1, double op2);
};

double Evaluate::oper(int symb, double op1, double op2)
{
    switch(symb)
    {
        case '+': return (op1 + op2);
        case '-': return (op1 - op2);
        case '*': return (op1 * op2);
        case '/': return (op1 / op2);
        case '^': return (pow(op1, op2));
    }
}

double Evaluate::eval(char expr[], Convert &convert)
{
    int c, position;
    char temp1;
    int count = 0;
    double opnd1, opnd2, value;
    Stack<double> stack;
    for(position = 0; (c = expr[position]) != '\0'; position++)
    {
        if(convert.isOperand(c))
        {
            temp1 = double(c - '0');
            stack.push(temp1);
        }
        else
        {
            opnd2 = stack.pop();
            if(stack.size() == 0)
            {
                cout << "This program cannot process unary operation";
                exit(1);
            }
            opnd1 = stack.pop();
            value = oper(c, opnd1, opnd2);
            stack.push(value);
        }
    }
    if(stack.size() >= 2)
    {
        cout << "Sory! this program cannot calculate this" << endl;
        cout << "Enter +, *, /, - or ^ between bracket" << endl;
        exit(4);
    }
    return (stack.pop());
}

int main()
{
    Convert convert;
    Evaluate evaluate;
    string bracketted_infix;
    char infix[50], postfix[50];
    char choice;

    while(1)
    {
        cout << "Enter string: ";
        cin  >> infix;
        cout << endl;
        cout << "Entered String: " << infix << endl;

        bracketted_infix = convert.return_with_bracket(infix);
        convert.to_Postfix(bracketted_infix, postfix);

        cout << "Equivalent Postfix string: " << postfix << endl;
        cout << "RESULT: ";
        cout << evaluate.eval(postfix, convert);
        cout << "\nCalculate another string?(y/n) ";
        cin  >> choice;
        cout << endl;

        if(choice == 'n')
            break;
    }
    return 0;
} 
```

# objective-c - 将数据输入 iOS 应用程序 - 处理数据的架构

> ID：12631652
> 
> 赞同：0
> 
> 时间：2012-09-27T23:41:00.073
> 
> 标签：objective-c, ios, database-design, architecture, loading

我有一个关于 iOS 应用程序的非常基本的问题：如何将大量数据放入应用程序？我知道 plists 是我导入数据的方式。但是创建这些 plist 很乏味（我使用 excel 和 smultron 来做到这一点 - 有没有更好的工具来做到这一点），而且我认为对于非常大的数据集效率不高。

加载数据后，我在应用程序中使用它（并且可能将其输入核心数据数据库）。

其次，我想知道在架构方面加载数据的良好设置是什么。目前我在我使用的每个视图控制器中都这样做。但我想这可以更有效、更集中地完成。例如，通过拥有一个加载所有数据的类——DataLoaderClass——（或者如果不总是需要数据，则根据请求）。但是，这意味着我需要每个视图控制器的每组数据的属性。如果我可以只声明一些可以被每个视图控制器访问但由 DataLoaderClass 填充的全局变量，那会容易得多。

我应该查找任何建议或关键概念吗？

感谢您回答这些新手问题——这对我来说仍然很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:44:37.440

您可以使用 Excel 创建一个庞大的 .xls 文件，然后使用[DHlibxls](https://github.com/dhoerl/DHlibxls)将其导入。或者你可以使用制作一个 cvs 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:44:49.530

当我拥有大型数据集时，我会编写一个小型 OSX 应用程序，将其全部保存到核心数据存储中。然后我将此存储导出到我的应用程序中，并将其用作应用程序中的核心数据存储。我会推荐*Core Data*。

# linux - 当脚本运行程序时，stdout 会发生什么？

> ID：12631653
> 
> 赞同：3
> 
> 时间：2012-09-27T23:41:11.107
> 
> 标签：linux, embedded-linux

我有一个嵌入式应用程序，我想要一个简单的记录器。

系统从一个脚本文件开始，该文件依次运行应用程序。脚本无法运行应用程序可能有多种原因，或者应用程序本身可能无法启动。要远程诊断此问题，我需要从脚本和应用程序中查看标准输出。

我尝试编写一个类似 tee 的记录器，它将其标准输入重复到标准输出，并将文本保存在 FIFO 中以供以后通过网络检索。然后我天真地尝试

```
./script | ./logger 
```

我最终只有脚本标准输出进入记录器，而应用程序标准输出消失了。我尝试 tee 也有类似的结果。

系统正在运行内核 2.4.26 和busybox。

发生了什么事，我怎样才能实现我想要的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T04:49:09.543

事实证明，它的工作方式与我认为的完全一致，只是有一个小问题。stdout 被缓冲，并且没有任何 fflush(stdout) 命令，我从未见过它。如果我真的有耐心，当标准输出缓冲区填满时，我会突然看到大量输出。调用 setlinebuf(3) 解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:54:38.297

显然，应用程序输出并没有最终出现在标准输出上...​​...

1.  输出实际上在 stderr 上（通常*也*连接到终端）

    ```
     ./script.sh 2>&1 | ./logger 
    ```

    然后应该工作

2.  应用程序主动断开与 stdin/stdout 的连接（例如，通过关闭/重新打开文件描述符 0,1(,2) 或使用`nohup`或`exec`类似实用程序）

3.  脚本守护进程（它也与所有标准流分离）

# javascript - Javascript 中的斐波那契数列

> ID：12631665
> 
> 赞同：7
> 
> 时间：2012-09-27T23:42:41.853
> 
> 标签：javascript, fibonacci

一般来说，我对编程很陌生，很难理解这个斐波那契数列示例：

```
var fib = [0, 1];
for (var i = 2; i < n; i++) {
    fib[ i ] = fib[ i - 1 ] + fib[ i - 2 ];
    console.log(fib);
} 
```

在第一次迭代中，索引 2 等于 1，很简单。但是，当我尝试使用 i = 3 进行第二次迭代时，我得到：

```
fib[ 3 ] = fib[ 3 - 1 ] + fib[ 3 - 2 ];  
fib[ 3 ] = fib[ 2 ] + fib[ 1 ]; 
fib[ 3 ] = fib[ 3 ]; 
```

我的想法哪里出了问题？到目前为止，我有：

```
var fib = [0,1,1,3] 
```

我知道这是不正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T23:48:54.800

当你对代码进行推理时，你会从 跳转`fib[3] = fib[2] + fib[1]`到`fib[3] = fib[3]`. 这碰巧是一个导致正确陈述的转换，但这不是它的工作方式。此代码将 index 处的值添加到 index`2`处的值`1`。这与在 index 处取值不同`3`。这种推理的工作方式如下：

你从`fib = [0, 1]`. 然后在循环的第一次迭代中你有`fib[2] = fib[1] + fib[0]`. 这意味着您将 index 处的值`0`（恰好是`0`）与 index 处的值（`1`恰好是 ）相加，`1`以获得放在数组末尾的值 ( `1`)。然后在第二次迭代中，您执行类似的操作，将 index `1`(still `1`) 处的值与 index `2`(also `1`) 处的值相加得到 get `2`，它位于数组的末尾。这将继续，并且在每次迭代中，您将数组中的最后两个值相加以获得下一个值。

在 JavaScript 中，当使用类似 的数组时`fib`，`fib[i]`指的是`i`该数组中的第 th 值，从 开始计数`0`。`fib[0]`数组中的第一个元素也是如此，数组`fib[1]`中的第二个元素也是如此，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:58:55.480

```
fib[ 3 ] = fib[ 3 - 1 ] + fib[ 3 - 2 ];  
fib[ 3 ] = fib[ 2 ] + fib[ 1 ]; 
fib[ 3 ] = fib[ 3 ]; 
```

您正在添加索引而不是索引指向的数组中的值

```
fib[ 3 ] = fib[ 3 - 1 ] + fib[ 3 - 2 ];  
fib[ 3 ] = fib[ 2 ] + fib[ 1 ]; 
fib[ 3 ] = 1 + 1;

[0,1,1,2]

fib[0] = 0
fib[1] = 1
fib[2] = 1
fib[3] will equal 2 
```

所以下一次迭代

```
fib[4] = fib[4-1] +fib[4-2]
fib[4] = fib[3] + fib[2]
fib[4] = 1 + 2
fib[4] = 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:47:42.170

你的代码很好。运行它并得到正确的输出：

```
var fib = [0, 1];
for (var i = 2; i < 10; i++) {
    fib[ i ] = fib[ i - 1 ] + fib[ i - 2 ];
    console.log(fib);
} 
```

控制台：0,1,1,2,3,5,8,13,21,34

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T23:50:44.077

```
fib[ 3 ] = fib[ 3 - 1 ] + fib[ 3 - 2 ];  
fib[ 3 ] = fib[ 2 ] + fib[ 1 ]; 
fib[ 3 ] = fib[ 3 ]; 
```

所以你的问题在第 2 行。[] 括号中的数字是索引，表示应该读取数组的哪一部分。当应用 + 运算符时，它们不会相加，而是将两个`fib[2]`和`fib[1]`求值到它们对应的数据，这意味着它们求值到`1`和`1`，然后将它们一起加到`2`。

我希望这是可以理解的。如果没有，请在评论中询问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T00:04:41.280

好吧，你为什么在计算中这样做

```
fib[3] = fib[2] + fib[1]
fib[3] = fib[3] 
```

当您处理数组时，由索引总和表示的索引处的值不等于这些索引处数组值的总和。

简而言之，您不能在纸上添加方括号内的数字。就像有两个钱包，每个钱包里有 5 美元和 15 美元。你不能说你有 15 美元，因为 1+1 是 2，你会查看第二个钱包。您将添加钱包的“内容”来查找总金额。这是20

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-24T20:02:24.373

**实施与** `array reduce()`

```
var a = [3,2,3,6,2,3,4];
var fib  = a.reduce(function(sum, v, i) {
    return i === 0 ? sum.concat(v) : sum.concat(v + sum[i-1]);
},[]);
console.log( fib  ); 
```

**ES6：**

```
var fibES6 = a.reduce(
    (sum, v, i) => i === 0 ? sum.concat(v) : sum.concat(v + sum[i-1])
, []);
console.log( fibES6  ); 
```

# php - 用于变量的 Drupal 7 字段

> ID：12631668
> 
> 赞同：2
> 
> 时间：2012-09-27T23:43:14.333
> 
> 标签：php, variables, drupal-7, field

我需要使用内容页面中的字段作为在同一页面上运行的脚本中的变量。我这样做是为了让客户端可以只更新字段，而不是搜索脚本，这将是一场灾难。我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:55:25.587

获取您感兴趣的内容的节点 ID，然后用于`node_load($nid)`获取节点对象。所有字段都将在此处表示，尽管您可能必须检查对象才能准确确定数据结构是什么。

您可以`var_dump()`将页面的节点对象作为一种简单、廉价的方法来确定所需属性的名称以及在脚本中指定的索引（如果有）。（一旦你弄清楚了，它就不会改变。）

# iphone - iOS 6 背景图片

> ID：12631672
> 
> 赞同：5
> 
> 时间：2012-09-27T23:43:22.807
> 
> 标签：iphone, screen-size

我有一个具有全屏渐变背景的 iOs 应用程序。现在，iphone 5 的屏幕尺寸不同，当然我想同时支持第 5 和第 4 设备。

推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:10:28.327

从我在评论中链接到的帖子

```
#import <sys/utsname.h>

NSString*
machineName()
{
struct utsname systemInfo;
uname(&systemInfo);

return [NSString stringWithCString:systemInfo.machine
                          encoding:NSUTF8StringEncoding];
} 
```

结果应该是：

```
@"i386"      on the simulator
@"iPod1,1"   on iPod Touch
@"iPod2,1"   on iPod Touch Second Generation
@"iPod3,1"   on iPod Touch Third Generation
@"iPod4,1"   on iPod Touch Fourth Generation
@"iPhone1,1" on iPhone
@"iPhone1,2" on iPhone 3G
@"iPhone2,1" on iPhone 3GS
@"iPad1,1"   on iPad
@"iPad2,1"   on iPad 2
@"iPhone3,1" on iPhone 4
@"iPhone4,1" on iPhone 4S 
```

我假设这将为最新型号返回类似 @"iPhone5,1" 的内容。然后做一个检查

```
NSString *iphoneType = machineName();
if ([iphoneType isEqualToString@"iPhone5,1"]){
    //image for iphone 5
} else {
           //image for the rest
} 
```

让我知道这是否可行

# python - ZODB 中具有可变属性的对象的一致索引

> ID：12631674
> 
> 赞同：2
> 
> 时间：2012-09-27T23:43:27.153
> 
> 标签：python, indexing, consistency, zodb

我有一个 ZODB 安装，我必须在其中组织几百万种不同类型的对象。我有一个通用容器类`Table`，它包含 BTrees 来按属性或这些属性的组合索引对象。数据一致性非常重要，因此我想强制执行，当我写入索引覆盖的任何属性时，索引会自动更新。所以一个简单的`obj.a = x`应该足以计算所有新的依赖索引条目，检查是否有任何冲突，最后写入索引和值。

一般来说，我很乐意为此使用库，所以我查看了[repoze.catalog](http://docs.repoze.org/catalog/overview.html)和[IndexedCatalog](http://www.async.com.br/projects/indexedcatalog/)，但对此并不满意。IndexedCatalog 似乎已经死了很长一段时间，并且没有为对象的更改提供那种一致性。据我所知， repoze.catalog 似乎更常用和更活跃，但也没有提供这种一致性。如果我在这里错过了什么，我很想听听它，并且更喜欢重用而不是重新发明。

所以，除了试图为问题找到一个库之外，我如何看待它，我必须拦截对具有描述符的数据对象属性的写访问，并让`Table`类执行更改索引的魔法。为此，描述符实例必须知道`Table`它们必须与哪些实例通信。当前的实现是这样的：

```
class DatabaseElement(Persistent):
    name = Property(constant_parameters)
    ...

class Property(object):
    ...
    def __set__(self, obj, name, val):
        val = self.check_value(val)
        setattr(obj, '_' + name, val) 
```

生成这些`DatabaseElement`类时，尚未创建数据库和其中的对象。[因此，正如在这个不错的答案](https://stackoverflow.com/questions/6668234/method-for-indexing-an-object-database)中提到的，我可能必须创建一些单例查找机制来查找`Table`对象，而不是将它们`Property`作为实例化参数。有没有更优雅的方式？保留描述符本身？欢迎任何建议和最佳实践示例！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:44:37.740

所以我终于弄清楚了自己。解决方案分为三个部分。不需要丑陋的单身人士。`Table`提供检查冲突的逻辑，能够在没有丑陋的变通方法的情况下`DatabaseElement`查找负责人的能力，并注意在写入任何索引值之前更新索引。这里有一些片段，主要线索是. 我也没有在任何地方看到记录。不错的附加功能：它不仅可以验证对单个值的写入，我还可以一次性检查多个索引值的变化。`Table``Property``DatabaseElement`

```
class Table(PersistentMapping):
    ....
    def update_indices(self, inst, updated_values_dict):
        changed_indices_keys = self._check_collision(inst, updated_values_dict)
        original_keys = [inst.key(index) for index, tmp_key in changed_indices_keys]
        for (index, tmp_key), key in zip(changed_indices_keys, original_keys):
            self[index][tmp_key] = inst
            try:
                del self[index][key]
            except KeyError:
                pass

class DatabaseElement(Persistent):
    ....
    @property
    def _table(self):
        return self._p_jar and self._p_jar.root()[self.__class__.__name__]

    def _update_indices(self, update_dict, verify=True):
        if verify:
            update_dict = dict((key, getattr(type(self), key).verify(val)) 
                                for key, val in update_dict.items()
                                if key in self._key_properties)
        if not update_dict:
            return
        table = self._table
        table and table.update_indices(self, update_dict)

class Property(object):
    ....
    def __set__(self, obj, val):
        validated_val = self.validator(obj, self.name, val)
        if self.indexed:
            obj._update_indices({self.name: val}, verify=False)
        setattr(obj, self.hidden_name, validated_val) 
```

# vba - 当公式重新计算中只有特定 Excel 单元格发生变化时调用函数

> ID：12631679
> 
> 赞同：3
> 
> 时间：2012-09-27T23:43:45.240
> 
> 标签：vba, excel

据我所知，`Worksheet_Calculate`当工作表中任何单元格的值在公式重新计算时发生变化时调用。

有没有办法让我只需要在公式重新计算中特定单元格发生变化时才调用函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T11:17:50.123

要在更改特定单元格时发生某些事情，您需要在文件中嵌入相关的选择更改事件`Worksheet_Change(byval target as Range)`。当您的单元格发生如下变化时，我们可以重新计算工作表：

```
Private Sub Worksheet_Change(byval target as range)

    If target.address = Range("YourCell").Address Then Application.Calculate

End Sub 
```

现在您要做的是在其余时间关闭计算。如果您只想关闭单个工作表（而不是整个文件）上的计算，则需要在激活时关闭计算，并在停用时打开，例如

```
Private Sub Worksheet_Activate

Application.Calculation = xlCalculationManual

End Sub

Private Sub Worksheet_Deactivate

Application.Calculation = xlCalculationAutomatic

End Sub 
```

当然，您重新计算的要求可能比上面的示例复杂得多。首先，您可以在相关工作表上打开文件，在这种情况下，您应该使用 Workbook_Open 事件来检测您的工作表，并相应地设置计算

然后，您可能有几个可能需要某种计算的单元格。您想关闭计算的原因可能是文件运行速度太慢。如果是这样，并且您正在识别所有输入单元格，则可以使用代码输入输出。一种方法是使用本指南[在 Excel Visual Basic 中输入公式来输入公式](http://www.excel4business.com/videos/excel-formulas-with-vba.php)。然后，您可以用计算出的值替换公式，例如`Range("YourCell") = Range("YourCell").Value`......所以停止工作表中的公式数量不断增长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:55:50.703

让我看看我是否正确地解释了你的问题。您想知道是否可以仅在特定单元格（或一组单元格）发生更改时才启动宏。

答案是肯定的。稍微调整 Ed 的代码。

```
Private Sub Worksheet_Change(byval target as range)

    If Not Intersect(target.address, Range("YourCells")) is Nothing Then 
       MyMacro()
    End If

End Sub 
```

我认为您对“功能”的使用会让人们失望。这就是埃德的回答如此详尽的原因。

行。您可能正确地陈述了您的问题，而您只是想提高效率。在这种情况下，Ed 的回答可以解决您的直接问题，但会导致电子表格在您更改其他单元格时不会自动计算。

# storyboard - 使用 Storyboards 并尝试从另一个视图控制器调用视图控制器

> ID：12631685
> 
> 赞同：1
> 
> 时间：2012-09-27T23:44:31.650
> 
> 标签：storyboard, viewcontroller

对于一个可能很简单的问题，我提前道歉。我正在使用 XCode 4.4 并试图在按下按钮以显示有关我的应用程序的信息时简单地调用第二个视图控制器。我创建了第二个视图控制器 (SecondViewController)，并且似乎有适当的 .h 和 m 文件。我在情节提要中添加了一个视图控制器，并将视图控制器的类更改为 SecondViewController。

在第一个视图控制器上，我只是有一个按钮来调用我创建的 showSecond 方法。

当我通过模拟器执行应用程序并按下第一个视图控制器上的按钮时，屏幕按预期翻转，但它进入黑屏，而不是我在情节提要场景中自定义的屏幕。

这是初始视图 controller.m 文件中的代码片段：

```
-(IBAction)showSecond
{
SecondViewController *controller = [[SecondViewController alloc] init];
controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

[self presentViewController:controller animated:YES completion:nil];
} 
```

按照教程，我能够在没有故事板方法的情况下使其工作，但它需要一个稍微不同的 init 函数，因为它引用了一个 xib 文件。我正在尝试尽可能多地使用故事板，并且是 xcode 编程的新手。

谢谢，杰弗里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T18:43:54.793

这是使用按钮显示另一个视图的一种非常简单的方法。将另一个 UIView 控制器添加到您的情节提要中。然后右键单击第一个视图中的按钮并将连接拖动到第二个视图。

# c - c、malloc 和 realloc 结构数组

> ID：12631687
> 
> 赞同：0
> 
> 时间：2012-09-27T23:44:58.973
> 
> 标签：c, malloc, realloc

假设我有一个名为 Thing 的结构。如果我想要一个“事物”数组，但它没有固定大小（动态），我该如何为它分配空间？我是否最初为数组本身分配空间，然后每次向其中添加元素时都必须重新分配空间？例如：

```
struct Thing{
    char *stuff;
    char **morestuff;
    int evenmorestuff;
};

Thing *thingarray;
thingarray = malloc(sizeof(Thing));

....

//And then allocating space for elements, which will get called an unknown amount of times
Thing j;
thingarray[count] = j; 
```

如何设置 malloc 和 realloc 以便能够将尽可能多的 Thing 类型的元素添加到“Thing”数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:54:50.140

您可能希望使用[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)策略：跟踪其中有多少项目和当前容量，然后在它填满时，将容量加倍。您将获得摊销的线性时间和数组的随机访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T23:52:53.393

您可以从 NULL 指针 (Thing *thingarray = NULL;) 开始，因为数组中没有任何内容。

添加项目时，您需要为每个项目分配内存。对第一个项目使用 malloc 并为其他项目使用 realloc 将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:54:45.560

您将需要为一定数量的“事物”分配它

说： malloc(sizeof(thing)*8) 以获得其中八个的空间。

如果您需要更多空间，则必须使用临时变量重新分配空间。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T00:34:13.707

如果可以，请尝试将向量用于动态数组。它将为您节省大量时间，并且您不必担心分配问题：

```
#include <vector>
using namespace std;

struct Thing
{
    char *stuff; 
    char **morestuff; 
    int evenmorestuff; 
};

int _tmain(int argc, _TCHAR* argv[])
{
    vector<Thing> vt;

    char stuff = 'a';
    char *morestuff = "abc";

    Thing t;
    t.stuff = &stuff;
    t.morestuff = &morestuff;
    t.evenmorestuff = 0;

    int count = 10;
    for (int i = 0; i <= count; ++i)
    {
        t.evenmorestuff = i;
        vt.push_back(t);
    }

    Thing j; 
    j.stuff = &stuff;
    j.morestuff = &morestuff;
    j.evenmorestuff = 0;

    vt[count] = j; 

    return 0;
} 
```

# actionscript-3 - 将影片剪辑拖动到蒙版，使用舞台和 mc 缩放

> ID：12631692
> 
> 赞同：0
> 
> 时间：2012-09-27T23:45:17.430
> 
> 标签：actionscript-3

我想将影片剪辑的拖动限制在名为 themapmask 的蒙版上。可拖动 mc 的名称是 mapcontainer.themap。它的父级 mapcontainer 与舞台成比例地缩放。如何将拖动的 mc 约束到蒙版？下面的代码在加载时有效，但在舞台缩放时无效。

```
function constrainMap():void {
    leftedge = themapmask.x+mapcontainer.themap.width/2-mapcontainer.x;
    rightedge= themapmask.x+themapmask.width-mapcontainer.width/2-mapcontainer.x;
    topedge = themapmask.y+mapcontainer.themap.height/2-mapcontainer.y;
    bottomedge = themapmask.y+themapmask.height-mapcontainer.height/2-mapcontainer.y;
    if (mapcontainer.themap.x>leftedge) mapcontainer.themap.x=leftedge;
    if (mapcontainer.themap.y>topedge) mapcontainer.themap.y=topedge;
    if (mapcontainer.themap.x<rightedge) mapcontainer.themap.x=rightedge;
    if (mapcontainer.themap.y<bottomedge) mapcontainer.themap.y=bottomedge;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:40:33.267

Sprite.startDrag函数接受第二[个](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html)参数，特别是对于拖动区域约束，[DisplayObject.getBounds](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html)函数返回一个矩形，该矩形具有参数 DisplayObject 上下文中应用对象的边界。所以，基本上，你需要做的是：

```
mapcontainer.themap.startDrag(false /*or true*/, themapmask.getBounds(mapcontainer)); 
```

你可以完全放弃整个constrainMap函数。

# objective-c - 目标 C 中的单例属性访问

> ID：12631705
> 
> 赞同：2
> 
> 时间：2012-09-27T23:48:09.017
> 
> 标签：objective-c, properties, singleton

我正在使用一个标准的现代单例类，其中一个单例持有 CTFontRef，如下所示：

```
@interface MySingleton : NSObject {
    CTFontRef paintingFont;
}

@property (readonly) CTFontRef paintingFont;

@end

@implementation MySingleton

+ (MySingleton*)sharedInstance
{
    static dispatch_once_t once;
    static MySingleton *sharedInstance;
    dispatch_once(&once, ^{
        sharedInstance = [[self alloc] init];

        //NB
        sharedInstance->paintingFont = 
           CTFontCreateWithName(CFSTR("Helvetica"), 80.0, nil);   
    });
   return sharedInstance;
}

@end 
```

然后我在其他地方打电话`[[MySingleton sharedinstance] paintingFont]`。

但是，这个调用会返回`nil`，直到我`paintingFont`像这样插入下划线：

```
 sharedInstance->_paintingFont = 
           CTFontCreateWithName(CFSTR("Helvetica"), 80.0, nil); 
```

为什么是这样？编译器不应该要求我包含下划线吗？如果不是，早期版本的目的是什么？这个下划线是从哪里来的？我从来没有用下划线声明属性，我只是在调试器窗口中看到这些看似随机的插入到变量名中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:52:31.627

从 Xcode 4.4 开始，当您声明 a 时，编译器会自动为您和访问器方法`@property`创建一个 ivar 。`@synthesize`默认的 ivar 是带下划线的。

使用`->`您直接访问 ivars 而不是属性的语法。因此，在您的`sharedInstance`方法中，您可以设置自己的 ivar（不带下划线）。但是，当您稍后尝试访问它时，您使用`[ ]`which 将使用自动合成的 getter 方法来访问您的属性（以及带有下划线的自动生成的 ivar）。

您应该使用`.`符号而不是`->`来访问该属性。或者干脆使用自动生成的名为`_paintingFont`.

您还可以通过添加以下代码在您的实现文件中进行属性读写。这将允许您在实现中使用点语法来设置属性，但对于其他类仍然是只读的。

```
@interface MySingleton ()
@property (readwrite) CTFontRef paintingFont;
@end 
```

如果你想要一个不同的 ivar，你可以使用`@synthesize`它来覆盖它。在这两种情况下，您都不必再声明 ivar。

```
@implementation MySingleton
@synthesize paintingFont;
....
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:53:38.020

这是因为在声明一个属性paintingFont 时，Obj C 编译器会创建一个实例变量_paintingFont。

通常，属性/变量的设置可以通过

1.  您的解决方案中的实例`sharedInstance->_paintingFont = ...`
2.  使用属性和 。符号`sharedInstance.paintingFont = ...`。这会调用生成的方法 setPaintingFont，然后将其分配给实例变量。

但是在这种情况下，该属性是只读的，因此不能使用方法 2。

# python - 进行查询以获取最新的对象，不包括 obj.x 的重复项

> ID：12631711
> 
> 赞同：0
> 
> 时间：2012-09-27T23:49:07.060
> 
> 标签：python, django

> **可能重复：**
> [Django，什么是最好的，最快的方法来只从某事物中获取第一个和最后一个元素，Customer.objects.xxxx](https://stackoverflow.com/questions/3664708/django-whats-the-best-fastest-way-to-get-only-first-and-last-element-from-som)

嗯，这很难解释，但这就是正在发生的事情..

我有一个模型 A，它有 x 和日期

有多个 A 具有相同的 x 和不同的日期。

从：

```
A.x = 1 (newest)
A.x = 1
A.x = 1 (oldest)
A.x = 2 
```

我只想获取每个 x 中最新的，在本例中是第一个和最后一个，不包括较旧的 x=1 重复项。

我曾想过做一些讨厌的循环或使用 itertools，但我不确定实现这一目标的最佳方法是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:45:08.747

您可以使用查询[`latest()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#latest)集方法。它与使用基本相同`.order_by()[0]`。

`order_by()`这很好，因为我总是忘记在使用日期时是否需要使用“-” 。

```
latest_object = Model.objects.latest("date/datetime fieldname") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:16:30.630

从 Django 1.4 开始， .distinct() 查询集 API 接受字段参数

所以我想你可以做这样的事情

```
Queryset.order_by('-date').distinct('field') 
```

[你可以在这里](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#distinct)阅读更多关于它的信息。

# ios - 如何在 iOS 中同步获取已连接用户的 Facebook UID？

> ID：12631718
> 
> 赞同：0
> 
> 时间：2012-09-27T23:50:20.383
> 
> 标签：ios, facebook

我使用 iOS Facebook SDK 3.1。我正在使用 [FBSession 的 openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:](http://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#openActiveSessionWithReadPermissions:allowLoginUI:completionHandler:)将用户连接到 Facebook。用户连接后，有没有办法同步获取登录用户的UID？我知道我可以使用[FBRequestConnection 的 startForMeWithCompletionHandler:](http://developers.facebook.com/docs/reference/ios/3.1/class/FBRequestConnection#startForMeWithCompletionHandler:)异步获取 UID ，但是异步性使我的流程复杂化，并且额外的 HTTP 请求似乎浪费了获得像 UID 这样简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:21:44.013

> 异步使我的流程复杂化

程序员同步做事通常*更容易，但用户异步做事通常**更好*。

> 额外的 HTTP 请求似乎浪费了获得像 UID 这样简单的东西

该请求需要多长时间？100 毫秒？1秒？10秒？答：您无法知道需要多长时间，在某些情况下可能很容易达到 10 秒或更长时间。你真的想把你的应用程序冻结那么久，因为你太懒了，不能以正确的方式做事吗？你的用户会怎么想？你关心？

# c# - 难以声明用户输入不是整数 C#

> ID：12631719
> 
> 赞同：0
> 
> 时间：2012-09-27T23:50:28.960
> 
> 标签：c#, variables, integer, declare

我可以在这里使用 try catch 场景，但我习惯于说 if x = 30 或 if x > 100，但我需要说的是 if x != int，但我不允许使用该语句。

我需要的是一种说法，如果用户的输入不等于整数，那么......

```
 Console.Write("Enter number of cats:"); //cats are 121.45

     var temp = Console.ReadLine();
     int cats;
     if (int.TryParse(temp, out cats))
   {

      price = (cats* 121.45);
   }
  else
 {
    Console.Write{"Number of cats must be an integer. Please enter an integer")
 }

      Console.Write ("Enter number of dogs"); //dogs are 113.35
      int product2 = int.Parse(Console.ReadLine());
      price2 = (dogs * 113.35);
      Console.Write ("Enter number of mice:"); //mice are 23.45
      int mice = int.Parse(Console.ReadLine());
      price3= (mice * 23.45);
      Console.Write("Enter number of turtles:"); //turtles are 65.00
      int turtles = int.Parse(Console.ReadLine());
      price4 = (turtles * 65.00);
      Console.Write("Total price : $");
      grosssales = price1 + price2 + price3 + price4; //PRICE ONE IS NOT RECOGNIZED?
      Console.WriteLine(grosssales);
      Console.ReadKey();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T23:53:05.843

```
var temp = Console.ReadLine();
int cats;
if (int.TryParse(temp, out cats))
{
    // Yay, got the int.
}
else
{
    // Boooo, error.  Do something here to handle it.
} 
```

[`.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)是你的朋友。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T23:52:52.750

您可以使用[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)来确定是否可以将用户输入解析为 int。

```
 var userInput = Console.ReadLine();     
  int cats;
  if(!int.TryParse(userInput, out cats))
  {
      //userInput could not be parsed as an int
  }
  else
  {
      //cats is good
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T23:53:57.350

使用`TryParse`：

```
int cats;
if (Int32.Parse(Console.ReadLine(), out cats)) {
  price = cats * 239.99;
  // go on here
} else {
  Console.WriteLine("The number of cats must be an integer.");
} 
```

# git - 如何让 'git log --oneline' 显示哪些提交消息是多行的

> ID：12631720
> 
> 赞同：9
> 
> 时间：2012-09-27T23:50:29.983
> 
> 标签：git, version-control, git-log

我发现自己`git log --oneline`经常做快速浏览我将要推*送到远程或**从*远程合并的更改。是否可以附加一些标识符（例如“[...]”）以将该提交消息标记为多行消息，以便我知道那里有更多信息？

基本上，我想要的是：

```
e1140de Some commit message
d1f58d1 Some multine commit message [...]
736f778 Some other commit message 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T12:28:04.693

[在亚当的回答](https://stackoverflow.com/a/12632172/367456)的帮助下，我想出了一个替代我的要求的方法：

```
git log --format="%h %s%n%b" 
```

这就像`--oneline`，除了它在消息主题之后放置一个换行符和消息正文。加上一些颜色看起来好多了：

```
git log --format="%C(yellow)%h%Creset %Cgreen%s%Creset%n%b" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T00:56:07.023

你可以用一些脚本来做到这一点。`%b`git log ( )中有格式的消息正文标记。

但是没有什么可以在一个命令中做到这一点：您必须查看消息正文是否为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:40:20.650

我习惯于为此手动附加“（sb）”，它代表“见下文”。

如果提交消息是多行的，您可以使用 prepare-commit-msg 挂钩自动附加它。

# php - 带有传递变量的 if 语句

> ID：12631724
> 
> 赞同：0
> 
> 时间：2012-09-27T23:50:44.247
> 
> 标签：php

基本上我从 url 中获取一个变量，我需要根据他们填写的状态将用户发送到自定义页面。即，如果它是覆盖状态之一，他们将被发送到自定义页面......但是如果这是他们被发送到标准状态的任何其他状态。

我猜这只是一个带有 else 的简单 if 语句......但由于某种原因，我无法让它正常工作。

```
<?php
$state = urlencode($_GET['state']);
if ($state=="california"){$link = "http://website.com/page1";}
else if ($state=="new york"){$link = "http://website.com/page2";}
else if ($state=="ohio"){$link = "http://website.com/page3";}
else  {$link = "http://website.com/default";}
header("Location: $link");
?> 
```

这是正确的还是我应该做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:52:50.760

`urlencode`不需要，甚至引入了一个错误（你永远不会匹配字符串，例如,`"new york"`因为`urlencode`会`$state`变成`"new+york"`）。

除此之外，代码看起来还可以。只需删除它，你就会好起来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:57:03.350

无需使用`urlencode`

```
<?php
    $state = $_GET['state'];
        if ($state=="california"){
              $link = "http://website.com/page1";
         } else if ($state=="new york") {
              $link = "http://website.com/page2";
         } else if ($state=="ohio"){
             $link = "http://website.com/page3";
         } else {
             $link = "http://website.com/default";}
                  header("Location: $link");
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T23:57:58.353

这样做更整洁`switch`，并结合重复的东西：

```
switch($_GET['state']) {
    case "california": $page = "page1"; break;
    case "new york": $page = "page2"; break;
    case "ohio": $page = "page3"; break;
    default: $page = "default"; break;
}
header("Location: http://website.com/".$page); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T00:10:59.260

您不需要 urlencode 函数来对您“获取”的内容进行编码，除非您发送的 url 中的字符串已被编码。但是，在这种情况下，您将需要 urldecode 函数，而不是 urlencode。

所以你的代码应该是这样的：

```
<?php
$state = $_GET['state'];
//or $state = urldecode($_GET['state']); 
//if you are receving an encoded url.
if ($state=="california"){$link = "http://website.com/page1";}
else if ($state=="new york"){$link = "http://website.com/page2";}
else if ($state=="ohio"){$link = "http://website.com/page3";}
else  {$link = "http://website.com/default";}
header("Location: $link");
?> 
```

另外，检查网址中的“状态”。您收到所需的正确字符串了吗？尝试回显 $state，看看你得到了什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T00:59:20.377

另一种选择是使用关联数组；如果有很多选择，这很有吸引力。

```
$statemap = array('california' => 'page1',
                  'new york' => 'page2',
                  'ohio' => 'page3');

$state = $_GET['state'];
$link = 'http://website.com/' . array_key_exists($state, $statemap) ? $statemap[$state] : 'default'
header("Location: $link"); 
```

# php - 如何使此代码可在不同视图上重用？正确的方法

> ID：12631726
> 
> 赞同：1
> 
> 时间：2012-09-27T23:51:05.053
> 
> 标签：php, oop, codeigniter

我对执行以下操作的正确方法有些困惑。这是一个类，一个函数还是一个对象？（不确定）所以这里（请善待）我正在同时学习 codeigniter/php。

```
 $is_live = $this->session->userdata('email');
    $is_live = ucwords($is_live);
            if (!$is_live == null)
                   echo 'Hello, '.$is_live.
                   ' <b>(Not you? '.'<a href="' .base_url().
                   'main/logout">Log Out</a>) </b>'; 
```

我编写了这段代码，它检查是否设置了会话以及是否为 true 回显详细信息。我目前有这个代码`view/main`但是我想在所有页面上显示这个代码。

这样做的正确方法是什么？

1.  我是否创建一个`view/header`在每个页面上自动加载的并将其插入`code`那里？
2.  我是否`class/public function`在`helper`文件中创建一个并在需要的地方加载它？
3.  我是否`class/public function`在`library`文件中创建一个并在需要的地方加载它？
4.  我是否`public function`在控制器中创建一个？

-EXTRA- 我的假设是选项`1`，但我很好奇如果我想在特定页面的另一个位置显示此信息怎么办？我不想复制/粘贴代码块，因为那太草率了。

我将如何设置它以便我可以在需要的地方调用它？例如`$this->load->helper('check_for_sess');`

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class isLive
{   
    public function is_live() {

        $is_live = $this->session->userdata('email');
        $is_live = ucwords($is_live);
             if (!$is_live == null)
               echo 'Hello, '.$is_live.
               ' <b>(Not you? '.'<a href="' .base_url().'main/logout">Log Out</a>) </b>'; 

    }
} 
```

在`view`我试过这个：

```
<?php 
    $isLive = new isLive;
    $isLive->is_live(); 
?> 
```

然而，这不起作用并导致'函数 userdata() on a non-object error'

有人可以解释实现我想要的解决方案和正确语法的正确方法。提前致谢！

-UPDATE-- 试图创建一个库 - 仍然出现错误。

```
#Created a library 
class CheckSess 
{   
    function IsLive() 
    {   
    $is_live = $this->session->userdata('email');
    $is_live = ucwords($is_live);

            if (!$is_live == null) 
            {
               $check_msg = 'Hello, '.$is_live.
               ' <b>(Not you? '.'<a href="' .base_url().'main/logout">Log Out</a>) </b>';
            }

    return $check_msg;
    }

}

#In the View
<?php echo $this->CheckSess->IsLive();  ?>

#in the controller
$this->load->library('CheckSess'); 
```

- 更新 -

```
class CheckSess {

    function IsLive() 
    {   
    $CI =& get_instance();
    $is_live = $CI->session->userdata('email');
    $is_live = ucwords($is_live);

            if (!$is_live == null) 
            {
               return 'Hello, '.$is_live.
               ' <b>(Not you? '.'<a href="' .base_url().'main/logout">Log Out</a>) </b>';
            }

    }

} 
```

设置这个^是`libraries`文件夹

`view`节目_`<?php echo $this->CheckSess->IsLive(); ?>`

和`controller`节目`$this->load->library('CheckSess');`

请指教。再次感谢！

错误 - -

( ! ) SCREAM: ( ! ) 忽略错误抑制 致命错误: 在 C:\wampserver\www\test-app\application\views\homepage.php 第 56 行调用非对象上的成员函数 IsLive()调用堆栈

# 时间记忆功能位置

1 0.0005 151432 {main}( ) ..\index.php:0 2 0.0014 187792 require_once('C:\wampserver\www\test-app\system\core\CodeIgniter.php') ..\index.php:202 3 0.0277 1537000 call_user_func_array ( ) ..\CodeIgniter.php:359 4 0.0277 1537048 Main->index( ) ..\CodeIgniter.php:359 5 0.0283 1540200 CI_Loader->view( ) ..\main.php:8 6 0.0283 1540640 CI_Loader->_ci_load( ) ..\Loader.php:419 7 0.0287 1566584 包括('C:\wampserver\www\test-app\application\views\homepage.php') ..\Loader.php:833

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:19:31.083

在 CodeIgniter 中编写此类可重用的最佳方法是模型和库。

由于库更好，因为您使用的代码和逻辑实际上并不是 MVC 中的模型，但是使用 CodeIgniter，特别是对于初学者，如果您不打算在模型中分发或共享此代码，则可以在模型中编写它反正。

我建议阅读更多关于 CodeIgniter 中哪些内容的信息，您可以在此处、SO 或官方 CI 论坛上找到大量信息，但作为快速参考，我将写一份内容清单。

## 意见

静态、哑数据输出、格式化、迭代（用于显示表格、列表等）。

在这里你想要使用的唯一的东西是一些基本的 PHP 函数、CodeIgniter 助手、、、循环`for`和条件 ( , )`foreach``while``if``case`

## 控制器

表单数据捕获和验证，从模型中捕获数据，将数据发送到视图，重定向。

## 楷模

从数据库、远程源 (API)、文件中查询、读取、写入和更新数据。

## 帮手

预计将在视图中使用的常用函数 - 格式化 HTML，将树解析和显示为列表`<ul><li></li></ul>`，其他函数的速记函数，如

```
function mydate() {
    return date("d.m.Y");
} 
```

不使用任何 CodeIgniter 库/模型的东西（技术上它可以使用，但在大多数情况下应避免使用）。

## 图书馆

自定义类和对象、数据处理、API 接口、上述的复合体

* * *

* * *

如果你想显示一些带有数据的视图文件，我会把它放在一个库中。您可以将其放入模型中。在我的项目中，当我使用某些部件时，我有一个库/模型（在我们的案例中差异很小），我们称之为`pmodel`.

```
class Pmodel extends CI_Model() {
    function ShowHeader() {
        $data = array(
            'user' => $this->usermodel->GetCurrentUser()
        }
        $this->load->view('header', $data);
    }

    function ShowMyPart() {
        $is_live = $this->session->userdata('email');
        $is_live = ucwords($is_live);
        if (!$is_live == null)
               echo 'Hello, '.$is_live.
               ' <b>(Not you? '.'<a href="' .base_url().
               'main/logout">Log Out</a>) </b>'; 

    }
} 
```

现在，如果您之前加载过视图文件，您可以调用它的任何位置`$this->pmodel->ShowMyPart()`（无论如何都应该自动加载这种类型的模型）。

我会做一点改变，因为它被认为是一种很好的做法 -`echo`除了视图文件和`return`值之外，从任何地方都没有任何东西。

`echo`将关键字更改为`return`并在您的视图文件中简单地写入`echo $this->pmodel->ShowMyPart()`.

你为什么要这样做？因为，如果您想在加载页眉和页脚（例如）之间调用任何从控制器回显某些内容的方法，CodeIgniter 将在页眉之前回显此内容，因为 CodeIgniter 不会立即回显您加载的视图，它会将它们保存到输出存储并在销毁自己之前发送最终输出。更多阅读可以在[这里](http://codeigniter.com/user_guide/libraries/output.html)找到。

但是你可以做得更好——使用视图文件来输出你想要的任何数据，只需创建一个帮助程序并从你的模型/库中加载它，就像你在控制器中所做的那样。

希望有帮助！

* * *

**编辑**

对于您编辑的问题，您的库出现错误的原因是您的库不知道 CodeIgniter 的实例甚至存在，因为您没有从它扩展您的库，就像您对模型和控制器所做的那样。您不使用`$this`引用库中的 CodeIgniter 类，因为`$this`引用您的库本身，它是一个单独的类。要使用 CodeIgniter 类，您应该获得一个 CodeIgniter 实例：

```
$CI =& get_instance(); 
```

然后您可以通过更改以下行来使用`$CI`而不是`$this`调用 CodeIgniter 类：

```
$is_live = $this->session->userdata('email'); 
```

到

```
$is_live = $CI->session->userdata('email'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:34:14.953

您可以制作一个基本的 html 帮助程序并将其自动加载到配置文件中。

然后你可以为此创建一个函数......

```
function displayLoginStatus($em)
{ 
    $html = '';
    if($em)
    {
        $html = 'Hello, '.ucwords($em).' <b>(Not you? '.'<a href="' .base_url().'main/logout">Log Out</a>) </b>';
    }

    return $html;
} 
```

然后你像普通函数一样调用它：

```
<?php echo displayLoginStatus($this->session->userdata('email')); ?> 
```

但理想情况下，您会将类似的内容放置在包含标准页面视图的模板或头文件中。没有必要用这样的东西来做一个功能，因为通常你没有在页面上的多个地方登录/注销。它可以简单地浓缩为：

```
<?php if($this->session->userdata('email')): ?>
Hello, <?php echo ucwords($this->session->userdata('email')); ?> <b>(Not you? <a href="<?php echo base_url(); ?>main/logout">Log Out</a>) </b>
<?php endif; ?> 
```

我更喜欢制作一个站点模板并用它包装视图。使通用元素更容易处理。有些人这样模板： [http ://codeigniter.com/forums/viewthread/88335/](http://codeigniter.com/forums/viewthread/88335/)

有很多方法可以处理这个问题，但总体思路是将最常见的元素分离到一个模板视图中。我不知道有一种简洁的方式来指导你如何做到这一点，所以如果你觉得需要更多关于模板的解释，我只会更新这篇文章。

帮助文档： [http ://codeigniter.com/user_guide/general/helpers.html](http://codeigniter.com/user_guide/general/helpers.html)

# php - CakePHP：选择拥有 1 个或多个帖子的用户

> ID：12631728
> 
> 赞同：0
> 
> 时间：2012-09-27T23:51:21.053
> 
> 标签：php, mysql, cakephp

我有两张桌子：`users`和`posts`。我正在尝试选择至少有一篇帖子的任何用户。

我猜这需要连接或子选择。CakePHP 中有什么东西可以让这件事变得简单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:08:00.367

使用计数器缓存，请参阅[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#belongsto](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#belongsto)

> counterCache：如果设置为 true，则每当您执行 save() 或 delete() 时，关联的模型将自动增加或减少外部表中的“[singular_model_name]_count”字段。如果它是一个字符串，那么它就是要使用的字段名称。计数器字段中的值表示相关行数。您还可以使用数组指定多个计数器缓存，其中键是字段名称，值是条件。例如：
> 
> array( 'recipes_count' => true, 'recipes_published' => array('Recipe.published' => 1) ) counterScope：用于更新计数器缓存字段的可选条件数组。

在这种情况下不需要额外的查询。如果您添加/删除帖子，它将自动进入并减少用户表中的计数。

例子：

```
public $belongsTo = array(
    'User' => array(
        'foreignKey' => 'user_id',
        'counterCache' => true,
        'counterScope' => array(
            'published' => 1))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:02:34.447

这应该选择所有发表过 1 个或更多帖子的用户

```
SELECT * FROM `users` as u
INNER JOIN `posts` as p ON p.user_id = u.id 
```

在蛋糕中，您应该能够执行以下操作：

```
$this->User->find('all', array('joins' =>
    array(
        'table' => 'posts',
        'alias' => 'p',
        'type' => 'inner',
        'conditions' => array(
            'User.id = p.user_id'
        )
    )
); 
```

[编辑]

也许你可以添加

```
'group' => 'User.id' 
```

或者

```
'fields' => 'DISTINCT User.id, ...' 
```

删除重复条目

# html - 为什么我在 Outlook 2010 html 电子邮件中出现边框

> ID：12631734
> 
> 赞同：0
> 
> 时间：2012-09-27T23:52:46.827
> 
> 标签：html, email, html-email

我想我已经尝试了我读过的所有技巧来摆脱表格行之间的间距，但似乎没有任何效果！我的电子邮件在 gmail 以及 iphone 和 android 手机上看起来不错。这只是前景！

我正在使用 mailchimp，所以我的模板中还有其他样式，但即使我删除了所有样式，我仍然得到相同的结果。

这是我的 HTML 表格：

```
<table border="0" cellpadding="0" cellspacing="0"  style="border-collapse: collapse; margin:0px; padding:0px;" width="600">
    <tbody>
        <tr>
            <td colspan="3" style="border-collapse: collapse;" width="600" height="179">
                <a href="http://www.anzie.com/"><img align="left" alt="Gold Rush" height="179" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_01.jpg" style="height: 179px;  width: 600px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left; " width="600" /></a>
            </td>
        </tr>
        <tr>
            <td colspan="3" style="border-collapse: collapse;" width="600" height="25">
                <a href="http://www.anzie.com/viewall_gold.php"><img align="left" alt="Shop Gold" height="25" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_02.1.jpg" style="height: 25px;  width: 600px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left; " width="600" /></a>
            </td>
        </tr>
        <tr style="border-collapse: collapse;">
            <td colspan="3" style="border-collapse: collapse;" width="600" height="200">
                <a href="http://www.anzie.com"><img align="left" alt="Gold Rush" height="200" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_03.jpg" style="height: 200px;  width: 600px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="600" /></a></td>
        </tr>
        <tr>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/dew-drop-collection-etoile-mini-ring-moonstone-p-2454.html"><img align="left" alt="Vintage Accent Ring" height="221" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_04.jpg" style="width: 226px; height: 221px;  display:block; vertical-align: bottom; float: left;" width="226" /></a></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/aztec-earrings-studs-mini-moonstone-clear-topaz-p-2508.html"><img align="left" alt="Minature Studs" height="221" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_05.jpg" style="height: 221px;  width: 159px;  display:block; vertical-align: bottom; float: left;" width="159" /></a></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/royale-ring-round-moonstone-p-1919.html"><img align="left" alt="Heirloom Ring" height="221" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_06.jpg" style="height: 221px;  width: 215px;  display:block; vertical-align: bottom; float: left;" width="215" /></a></td>
        </tr>
        <tr>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/dew-drop-collection-etoile-earrings-moonstone-p-2498.html"><img align="left" alt="Evening Earrings" height="324" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/evening_earrrings.jpg" style="height: 324px;  width: 226px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="226" /></a></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/aztec-necklace-sun-pendant-moonstone-diamonds-p-2509.html"><img align="left" alt="Statement Pendant" height="324" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/neckalce_center.jpg" style="height: 324px;  width: 159px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="159" /></a></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/dew-drop-collection-bubble-stackable-bangle-gold-set-p-2510.html"><img align="left" alt="Versatile Bangles" height="324" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_09.jpg" style="height: 324px;  width: 215px;  display:block; vertical-align: bottom; float: left;" width="215" /></a></td>
        </tr>
        <tr>
            <td style="border-collapse: collapse;">
                <img align="left" height="74" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/border_bottom_left.jpg" style="width: 226px; height: 74px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="226" /></td>
            <td style="border-collapse: collapse;">
                <img align="left" height="74" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/bottom_center.jpg" style="width: 159px; height: 74px; margin: 0px; padding: 0px;  display:block; vertical-align: bottom; float: left;" width="159" /></td>
            <td style="border-collapse: collapse;">
                <a href="http://www.anzie.com/locations.php"><img align="left" alt="Locate Store" height="74" src="https://d2q0qd5iz04n9u.cloudfront.net/_ssl/proxy.php/http/gallery.mailchimp.com/5513172da1aa95c4b84fdedba/images/ESSETIAL6_FALL_10.jpg" style="height: 74px;  width: 215px;  display:block; vertical-align: bottom; float: left;" width="215" /></a></td>
        </tr>
    </tbody>
</table> 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:24:11.923

尝试`colspan`从所有`<td>`. 此外，从 , 中删除`width="600"`，`tds`使其占用`img`

# doctrine - 教义在尝试访问属性时给出 null

> ID：12631740
> 
> 赞同：0
> 
> 时间：2012-09-27T23:53:05.267
> 
> 标签：doctrine

我正在将 Doctrine 与 CodeIgniter 一起使用。我无法使用这种用法访问该类别。$record 不为空，但 $category 为空。

```
$record_data = $this->getRepository('Entity\RecordData')->find($this->params['id']);
$record = $record_data->getRecord();
$category = $record->getCategory();
echo $category->getName(); 
```

最后一行给出了致命错误：调用非对象上的成员函数 getName()。我究竟做错了什么？你能看看吗。谢谢。

这是我的实体类。

实体\记录数据：

```
<?php

namespace Entity;

/**
 * @Entity(repositoryClass="RecordDataRepository")
 * @Table(name="record_data")
 */
class RecordData {
    /**
     * @Id
     * @Column(type="integer", nullable=false)
     * @GeneratedValue(strategy="AUTO")
     */
    protected $ID;

    /**
     * @ManyToOne(targetEntity="CategoryVariable")
     * @JoinColumn(name="CategoryVariableID", referencedColumnName="ID")
     */
    protected $CategoryVariable;

    /**
     * @ManyToOne(targetEntity="Record")
     * @JoinColumn(name="RecordID", referencedColumnName="ID")
     */
    protected $Record;

    /**
     * @ManyToOne(targetEntity="SkillLevel")
     * @JoinColumn(name="SkillLevelID", referencedColumnName="ID")
     */
    protected $SkillLevel = NULL;

    /**
     * @Column(type="string", length=255, nullable=true)
     */
    protected $Value;

    /**
     * @Column(type="integer", nullable=false)
     */
    protected $RecordDataOrder;

    /**
     * @Column(type="boolean", nullable=false)
     */
    protected $Deleted = FALSE;

    public function __construct(Record $record, CategoryVariable $category_variable)
    {
        $this->Record = $record;
        $this->CategoryVariable = $category_variable;
    }

    public function getID()
    {
        return $this->ID;
    }

    public function getCategoryVariable()
    {
        return $this->CategoryVariable;
    }

    public function getRecord()
    {
        return $this->Record;
    }

    public function setSkillLevel($SkillLevel)
    {
        $this->SkillLevel = $SkillLevel;
    }

    public function getSkillLevel()
    {
        return $this->SkillLevel;
    }

    public function setValue($Value)
    {
        $this->Value = $Value;
    }

    public function getValue()
    {
        return $this->Value;
    }

    public function setRecordDataOrder($RecordDataOrder)
    {
        $this->RecordDataOrder = $RecordDataOrder;
    }

    public function getRecordDataOrder()
    {
        return $this->RecordDataOrder;
    }

    public function delete()
    {
        $this->Deleted = TRUE;
    }
} 
```

实体\记录：

```
<?php

namespace Entity;

/**
 * @Entity(repositoryClass="RecordRepository")
 * @Table(name="record")
 */
class Record {
    /**
     * @Id
     * @Column(type="integer", nullable=false)
     * @GeneratedValue(strategy="AUTO")
     */
    protected $ID;

    /**
     * @ManyToOne(targetEntity="Category")
     * @JoinColumn(name="CategoryID", referencedColumnName="ID")
     */
    protected $Category;

    /**
     * @Column(type="string", length=255, nullable=true)
     */
    protected $Name;

    /**
     * @Column(type="integer", nullable=false)
     */
    protected $RecordOrder;

    /**
     * @Column(type="string", length=255, nullable=true)
     */
    protected $Description;

    /**
     * @Column(type="boolean", nullable=false)
     */
    protected $Deleted = FALSE;

    public function __construct(Category $category)
    {
        $this->Category = $category;
    }

    public function getID()
    {
        return $this->ID;
    }

    public function setCategory($Category)
    {
        $this->Category = $Category;
    }

    public function getCategory()
    {
        return $this->Category;
    }

    public function setName($Name)
    {
        $this->Name = $Name;
    }

    public function getName()
    {
        return $this->Name;
    }

    public function setRecordOrder($RecordOrder)
    {
        $this->RecordOrder = $RecordOrder;
    }

    public function getRecordOrder()
    {
        return $this->RecordOrder;
    }

    public function setDescription($Description)
    {
        $this->Description = $Description;
    }

    public function getDescription()
    {
        return $this->Description;
    }

    public function delete()
    {
        $this->Deleted = TRUE;
    }
} 
```

实体\类别：

```
<?php

namespace Entity;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @Entity(repositoryClass="CategoryRepository")
 * @Table(name="category")
 */
class Category {
    /**
     * @Id
     * @Column(type="integer", nullable=false)
     * @GeneratedValue(strategy="AUTO")
     */
    protected $ID;

    /**
     * @Column(type="string", length=255)
     */
    protected $Name;

    /**
     * @Column(type="string", length=255)
     */
    protected $Description;

    /**
     * @Column(type="integer", nullable=false)
     */
    protected $CategoryOrder;

    /**
     * @Column(type="boolean", nullable=false)
     */
    protected $IsMultiple;

    /**
     * @Column(type="boolean", nullable=false)
     */
    protected $Deleted = FALSE;

    public function getID()
    {
        return $this->ID;
    }

    public function setName($Name)
    {
        $this->Name = $Name;
    }

    public function getName()
    {
        return $this->Name;
    }

    public function setDescription($Description)
    {
        $this->Description = $Description;
    }

    public function getDescription()
    {
        return $this->Description;
    }

    public function setCategoryOrder($CategoryOrder)
    {
        $this->CategoryOrder = $CategoryOrder;
    }

    public function getCategoryOrder()
    {
        return $this->CategoryOrder;
    }

    public function setIsMultiple($IsMultiple)
    {
        $this->IsMultiple = $IsMultiple;
    }

    public function getIsMultiple()
    {
        return $this->IsMultiple;
    }

    public function delete()
    {
        $this->Deleted = TRUE;
    }

    /**
     * @var CategoryVariable[]
     * @OneToMany(targetEntity="CategoryVariable", mappedBy="Category")
     */
    protected $CategoryVariables = NULL;

    /**
     * @var Record[]
     * @OneToMany(targetEntity="Record", mappedBy="Category")
     */
    protected $Records = NULL;

    public function setCategoryVariable(CategoryVariable $CategoryVariable)
    {
        $this->CategoryVariables[] = $CategoryVariable;
    }

    public function getCategoryVariables()
    {
        return $this->CategoryVariables;
    }

    public function setRecord(Record $Record)
    {
        $this->Records[] = $Record;
    }

    public function getRecords()
    {
        return $this->Records;
    }

    public function __construct()
    {
        $this->CategoryVariables = new ArrayCollection();
        $this->Records = new ArrayCollection();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T17:16:32.823

如果您的记录没有类别，那么您检索它的类别对象为空。因此，在回显其类别之前，您必须控制类别是真实对象还是空对象。像这样：

```
$record_data = $this->getRepository('Entity\RecordData')->find($this->params['id']);
$record = $record_data->getRecord();}
$category = $record->getCategory();
echo ($category) ? $category->getName() : "Record doesn't have category"; 
```

# c# - 我怎样才能更快、更有效地做到这一点？

> ID：12631743
> 
> 赞同：1
> 
> 时间：2012-09-27T23:53:19.847
> 
> 标签：c#

我有这个代码：

```
var url = "myurl.com/hwid.txt";
var client = new WebClient();
using (var stream = client.OpenRead(url))
using (var reader = new StreamReader(stream))
{
  string downloadedString;
  while ((downloadedString = reader.ReadLine()) != null)
  {
    if (downloadedString == finalHWID)
    {
      update();
      allowedIn = true;
    }
  }
  if (allowedIn == false)
  {
    MessageBox.Show("You are not allowed into the program!", name, 
                    MessageBoxButtons.OK, MessageBoxIcon.Error);
  } 
```

这将根据允许的列表检查您的 HWID。但是，每次完成检查大约需要 5-10 秒。有没有办法让它跑得更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T23:56:37.830

`break`一旦找到匹配项，您可以执行以下操作：

```
var url = "myurl.com/hwid.txt";
var client = new WebClient();

using (var stream = client.OpenRead(url))
using (var reader = new StreamReader(stream))
{
    string downloadedString;
    while ((downloadedString = reader.ReadLine()) != null)
    {
        if (downloadedString == finalHWID)
        {
            update();
            allowedIn = true;
            break;
        }
    }
}

if (allowedIn == false)
{
    MessageBox.Show("You are not allowed into the program!", name, MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

# jquery - 使用jquery根据下拉选择值更改css

> ID：12631746
> 
> 赞同：0
> 
> 时间：2012-09-27T23:53:39.840
> 
> 标签：jquery

我有一个下拉

```
<select name="claimsform">
  <option value="lp_claims"> lp_claims</option>
  <option value="gap_claims">gap_claims</option>
  <option value="home_claims">home_claims</option>
</select> 
```

**我想设置下面的 div 的 css 显示以阻止使用 jquery，具体取决于您在下拉菜单中选择的内容**

因此，如果我选择“home_claims”，带有 .home_claims 的 div 会将显示属性设置为阻止。

```
<div class="lp_claims">
<p> <strong>LP Claims heading</strong></p>
</div>

<div class="gap_claims">
<p> <strong>GAP Heading</strong></p>
</div>

<div class="home_claims">
<p><strong>Home heading</strong></p>
</div> 
```

我现在的CSS是

```
.lp_claims, .gap_claims, .home_claims{ display:none;} 
```

谢谢各位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T23:58:14.243

试试这个

```
 $('select').on('change', function() {
    var val = $(this).val();
    $('div').hide();
    $('.' + val).css('display', 'block');
}).change(); 
```

[检查演示](http://jsfiddle.net/sushanth009/rCqSS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:00:08.467

试试这个

```
$('select[name=claimsform]').on('change', function(){
var selected = $(this).val();
   $('.'+selected +'').css('display','block');
}) 
```

见现场[小提琴](http://jsfiddle.net/gAKKF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:17:48.073

试试这个：

**现场演示：http:** [//jsfiddle.net/sAsA5/](http://jsfiddle.net/sAsA5/)

* * *

```
$(document).ready(function() {

    var $doc = $(this);
    var lp_claims = $doc.find('.lp_claims');
    var gap_claims = $doc.find('.gap_claims');
    var home_claims = $doc.find('.home_claims');

    $('#claimsform').change(function() {
        var target = $(this).val();
        if (target === "0") lp_claims.add(gap_claims).add(home_claims).css({ display:"none" });
        if (target === 'lp_claims') lp_claims.css({ display:"block" });
        if (target === 'gap_claims') gap_claims.css({ display:"block" });
        if (target === 'home_claims') home_claims.css({ display:"block" });
    });

});​ 
```

# php - PHP - 在 html 标签之间抓取文本（屏幕抓取）

> ID：12631752
> 
> 赞同：-4
> 
> 时间：2012-09-27T23:53:54.040
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我已经非常广泛地环顾了stackoverflow，但找不到我正在寻找的东西。

我正在尝试获取 html 文档中两个标签之间的文本。问题是文本长度和内容每次都会改变（我们正在对多个页面进行屏幕截图），所以我无法设置 substr 长度，也无法通过正则表达式进行设置。

是否有相当于 strpos 的“结束”？

我正在使用的代码是：

```
$start = strpos($content,'<title>');
$end = strpos($content,'</title>');
$coName =substr ($content,$start,$end); 
```

但它返回的不仅仅是页面上标题标签之间的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:56:22.033

的第三个参数`substr`是`length`，不是`end`。所以应该是`$end-$start`。

# json - 从 Perl 中的解码数组节点检索原始 JSON 代码

> ID：12631761
> 
> 赞同：1
> 
> 时间：2012-09-27T23:54:45.453
> 
> 标签：json, perl, utf-8

我正在编写一个脚本，该脚本接收类似于以下对象数组的 JSON 代码：

```
{
  "array":[
    { "id": 1, "text": "Some text" },
    { "id": 2, "text": "Some text" }
  ]
} 
```

我使用 JSON::XS 对其进行解码，然后过滤掉一些结果。在此之后，我需要将**每个单独节点**的 JSON 代码存储到一个队列中以供以后处理。这个队列需要的格式也是 JSON，所以我需要为每个节点插入的代码是这样的：

```
{ "id": 1, "text": "Some text" } 
```

但是，在**decode_json**解码一个节点之后，剩下的就是每个节点的哈希引用：

```
print $json->{'array'}[0]; # Would print something like HASH(0x7ffa80c83270) 
```

**我知道我可以在哈希引用上使用encode_json**得到类似于原始 JSON 代码的东西，但是生成的代码与原始代码不同，UTF-8 字符变得很奇怪，而且似乎有很多额外的处理，特别考虑到该脚本必须处理的数据量。

有没有办法从解码的数组节点中检索原始 JSON 代码？JSON::XS 是否在解码后将原始块保留在某个地方？

* * *

**编辑**

关于奇怪的 UTF-8 字符，它们在屏幕上看起来很奇怪：

```
#!/usr/bin/perl

use utf8;
use JSON::XS;
binmode STDOUT, ":utf8";

$old_json = '{ "text": "Drag\u00f3n" }';
$json = decode_json($old_json);
print $json->{'text'}; # Dragón

$new_json = encode_json($json);
print $new_json; # {"text":"DragÃ³n"}

$json = decode_json($new_json);
print $json->{'text'}; # Dragón 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:06:56.067

`encode_json`将生成与使用`decode_json`. 使用 UTF-8 编码的字符并不奇怪。

```
$ cat a.pl
use Encode   qw( encode_utf8 );
use JSON::XS qw( decode_json encode_json );

my $json = encode_utf8(qq!{"name":"\x{C9}ric" }!);
print($json, "\n");
print(encode_json(decode_json($json)), "\n");

$ perl a.pl | od -c
0000000   {   "   n   a   m   e   "   :   " 303 211   r   i   c   "    
0000020   }  \n   {   "   n   a   m   e   "   :   " 303 211   r   i   c
0000040   "   }  \n
0000043 
```

如果您想要一个保留原始 JSON 的解析器，您肯定必须自己编写；现有的不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:04:29.437

不，它在任何地方都不存在。“原始 JSON”不是按元素存储的；它在一次通过中被解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:04:47.780

不，这是不可能的。每个 JSON 对象都可以有多个但等效的表示：

```
{ "key": "abc" } 
```

和

```
{
  "key" : "abc" 
} 
```

几乎一样。

因此，只需使用您的模块为您提供的重新编码的 JSON。

1.  即使 JSON::XS 缓存了这些块，提取它们也将违反封装，因此如果模块升级，则无法保证工作。这是糟糕的设计。

2.  不关心性能。这些`XS`模块具有卓越的性能，因为它们是用 C 编码的。如果您对性能有偏执，您不会使用 JSON，而是使用一些二进制格式。而且您不会使用 Perl，而是使用 Fortran ;-)

3.  您应该将等效数据视为等效数据。即使呈现方式不同。

4.  如果 unicode 字符看起来很奇怪，但处理正常，则没有问题。如果它们没有得到正确处理，您可能必须指定精确的编码。

# loops - 导出-CSV powershell 循环

> ID：12631765
> 
> 赞同：0
> 
> 时间：2012-09-27T23:55:17.783
> 
> 标签：loops, powershell, csv

从循环输出到 CSV 文件的正确做法是什么。我的目标是检查与一个多月未访问的一系列扩展名匹配的所有文件的属性，并输出到 csv 文件以供以后阅读。

它只输出第一个文件的信息。并出现以下错误：

```
Add-Member : Cannot add a member with the name "FileName" because a member with that name already exists. If you want to overwrite the member a
nyway, use the Force parameter to overwrite it.
At C:\Users\claw\Desktop\checkFileAge.ps1:10 char:25
+             $out2csv | add-member <<<<  -MemberType NoteProperty -Name FileName -Value $i.fullname
    + CategoryInfo          : InvalidOperation: (@{FileName=C:\u...012 9:33:46 AM}:PSObject) [Add-Member], InvalidOperationException
    + FullyQualifiedErrorId : MemberAlreadyExists,Microsoft.PowerShell.Commands.AddMemberCommand 
```

这是我的例子：

```
 $out2csv = New-Object PSObject;

foreach ($i in get-childitem c:\users -recurse -include *.doc, *.xls, *.ppt, *.mdb, *.docx, *.xlsx, *.pptx, *.mdbx, *.jpeg, *.jpg, *.mov, *.avi, *.mp3, *.mp4, *.ogg) 
    {if ($i.lastaccesstime -lt ($(Get-Date).AddMonths(-1))) 
        {
            $out2csv | add-member -MemberType NoteProperty -Name FileName -Value $i.fullname
            $out2csv | add-member -MemberType NoteProperty -Name LastAccess -Value $i.LastAccessTime
        } 
    } $out2csv | Export-Csv "C:\FileAccessInformation.csv" -NoTypeInformation -Force 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:03:32.807

尝试这样的事情。它是更规范的 PowerShell。

```
$ext = '*.doc', '*.xls',...
Get-ChildItem C:\Users -r -inc $ext | 
    Where {$_.LastAccessTime -lt [DateTime]::Now.AddMonths(-1)} |
    Select FullName, LastAccessTime |
    Export-Csv -NoTypeInformation -Force C:\FileAccessInformation.csv 
```

# jboss - 如何在 jboss 7.1.1 中设置特定的 ejb jndi 名称

> ID：12631769
> 
> 赞同：2
> 
> 时间：2012-09-27T23:56:06.397
> 
> 标签：jboss, ejb, jndi

我的 Web 应用程序包含一些 2.x 有状态和无状态会话 ejb。但与以前的 jboss 版本（以及其他主要应用程序服务器）不同，我无法在 jboss 7.1.1 中指定 ejb jndi 名称。我已经按照他们的文档删除了 jboss.xml 以支持 jboss-ejb3.xml，并以完整配置文件模式启动应用程序服务器。

```
<jboss:ejb-jar xmlns:jboss="http://www.jboss.com/xml/ns/javaee"
                  xmlns="http://java.sun.com/xml/ns/javaee"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-ejb3-2_0.xsd
                     http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd"
                  version="3.1"
                  impl-version="2.0">
   <enterprise-beans> 
      <session>
         <ejb-name>MyEJB</ejb-name>
         <jndi-name>MyEJB_JNDI_NAME</jndi-name>
      </session>
   </enterprise-beans>
</jboss:ejb-jar> 
```

但是，jboss-ejb3.xml 中的**jndi-name**并没有占据，阻止我设置自己的自定义 ejb jndi 名称。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T13:00:26.950

`<jndi-name>`JBoss AS 7 不再支持。从此[JIRA](https://issues.jboss.org/browse/AS7-3015?focusedCommentId=12651177&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-12651177)：

> 在 AS7 中，我们不再支持绑定到 EJB 的自定义 JNDI 名称。因此，bean 总是绑定到规范要求的 java:global、java:app 和 java:module 命名空间。`<jndi-name>`不再支持会话 bean 元素。

# python-3.x - 使用 Pydev 编译文件 PyObject (Gtk) 时出错

> ID：12631774
> 
> 赞同：1
> 
> 时间：2012-09-27T23:56:54.733
> 
> 标签：python-3.x, pyobject

我在 Pydev 中使用 pyobject (gtk) 构建应用程序，但我尝试通过以下方式创建一个窗口：

班塔纳

```
from gi.overrides import Gtk

class Ventana( Gtk.Window ):
   def __init__( self,titulo ):
      Gtk.Window.__init__(self,title=titulo )
      self.connect("delete-event",Gtk.main_quit ) 
```

类应用（主要）：

```
def main():
    win = Ventana()

if __name__ == '__main__':
   main() 
```

但我尝试编译 te App，显示以下错误：

```
Traceback (most recent call last):
File "/home/demian/workspace/NidhugsRPG/nidhugs/presentacion/Consola.py", line 6, in      
<module>
from gi.overrides import Gtk
File "/usr/lib/python3/dist-packages/gi/overrides/Gtk.py", line 35, in <module>
Gtk = modules['Gtk']._introspection_module
KeyError: 'Gtk' 
```

我正在尝试使用导入

```
 from gi.repository import Gtk 
```

但是，不起作用，因为找不到模块。所以我使用导入：

```
from gi.overrides import Gtk 
```

¿ 如何解决我的问题？

对不起，我的英语不好

谢谢。

# java - 使用 Spring MVC 获取 JR 报告的异常

> ID：12631775
> 
> 赞同：1
> 
> 时间：2012-09-27T23:56:56.723
> 
> 标签：java, spring-mvc, jasper-reports

我正在做一个控制器以在用户需要时显示*JR*报告。我正在使用*Maven* + *Eclipse* + *JasperReports API*。

该项目编译得很好，但是当我尝试访问我的控制器以获取报告时，我看到了这个异常：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'reciboPago': Initialization of bean failed; nested exception is org.springframework.context.ApplicationContextException: Could not parse JasperReports report from ServletContext resource [/WEB-INF/classes/config/reports/IntegracionCGC.jasper]; nested exception is net.sf.jasperreports.engine.JRException: Error loading object from InputStream
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
.
.
.
.
net.sf.jasperreports.engine.JRException: Error loading object from InputStream
    net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:215)
    org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.loadReport(AbstractJasperReportsView.java:496)
    org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.loadReport(AbstractJasperReportsView.java:476)
    org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.initApplicationContext(AbstractJasperReportsView.java:306)
    org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
    org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
.
.
.
causa raíz

java.io.StreamCorruptedException: invalid stream header: EFBFBDEF
    java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:782)
    java.io.ObjectInputStream.<init>(ObjectInputStream.java:279)
    net.sf.jasperreports.engine.util.ContextClassLoaderObjectInputStream.<init>(ContextClassLoaderObjectInputStream.java:53)
    net.sf.jasperreports.engine.util.JRLoader.loadObject(JRLoader.java:210)
    org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.loadReport(AbstractJasperReportsView.java:496)
    org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.loadReport(AbstractJasperReportsView.java:476)
    org.springframework.web.servlet.view.jasperreports.AbstractJasperReportsView.initApplicationContext(AbstractJasperReportsView.java:306)
    org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
    org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
    org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
    org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117) 
```

这是我的控制器：

```
@Controller
@RequestMapping("/pago")
public class JasperReportsController {

  public static final Log logger = LogFactory.getLog(JasperReportsController.class);

  @RequestMapping(value = "/recibo", method = RequestMethod.GET)
  public String generarReciboPago(ModelMap modelMap, HttpServletResponse response) {
    List<ReciboPagoJasperDTO> lista = new ArrayList<ReciboPagoJasperDTO>(1);
    ReciboPagoJasperDTO dto = new ReciboPagoJasperDTO();
    dto.setMonto("6789.0");
    dto.setNombre("Pedro Romero");
    lista.add(dto);
    // response.setHeader("Content-type", "application/pdf");
    // response.setHeader("Content-Disposition","attachment; filename=\"recibo.pdf\"");
    JRBeanCollectionDataSource jrbean = new JRBeanCollectionDataSource(lista, false);
    modelMap.put("reciboKey", jrbean);
    return ("reciboPago");
  }

  @RequestMapping(method = RequestMethod.GET, value = "docx")
  public ModelAndView generateDocxReport(ModelAndView modelAndView) {
    logger.debug("--Generating docx report--");
    Map<String, Object> parameterMap = new HashMap<String,Object>();

    List<ReciboPagoJasperDTO> lista = new ArrayList<ReciboPagoJasperDTO>(1);
    ReciboPagoJasperDTO dto = new ReciboPagoJasperDTO();
    dto.setMonto("6789.0");
    dto.setNombre("Pedro Romero");
    lista.add(dto);

    JRDataSource JRdataSource = new JRBeanCollectionDataSource(lista);
    parameterMap.put("datasource", JRdataSource);

    modelAndView = new ModelAndView("docxReport", parameterMap);
    return modelAndView;
  }
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:32:14.270

最后我得到了解决方案。我将此添加到我的 POM 中。我希望这对其他人有用。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.6</version>
    <configuration>

      <nonFilteredFileExtensions>
        <nonFilteredFileExtension>jasper</nonFilteredFileExtension>
      </nonFilteredFileExtensions>

    </configuration>
  </plugin> 
```

问候！

# scala - 迭代器上的 Scala 映射不会产生副作用

> ID：12631778
> 
> 赞同：6
> 
> 时间：2012-09-27T23:57:18.160
> 
> 标签：scala, map, iterator

为什么会这样，

```
scala> List(1,2,3,4).iterator.map((x: Int) => println(x)) 
```

不打印

```
1
2
3
4 
```

尽管

```
List(1,2,3,4).map((x: Int) => println(x))
List(1,2,3,4).foreach((x: Int) => println(x))
List(1,2,3,4).iterator.foreach((x: Int) => println(x)) 
```

都做吗？

换句话说，为什么将类型 T 映射到 Unit 并且具有副作用的迭代器上的映射无法显示这些副作用？

编辑：

另外，如果迭代器是惰性的，为什么下面的lazyMap 调用实际上会从头到尾计算新的迭代器（提供完整的新迭代器）？

```
def lazyMap[T, U](coll: Iterable[T], f: T => U) = new Iterable[U] {
  def iterator = coll.iterator map f
}

scala> lazyMap(List(1,2,3,4), (x: Int) => x + 1)
res4: java.lang.Object with Iterable[Int] = (2, 3, 4, 5) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T00:03:39.370

因为迭代器上的 map 是惰性的，你需要一些严格性：

```
scala> List(1,2,3,4).iterator.map((x: Int) => println(x))
res0: Iterator[Unit] = non-empty iterator

// nothing actually happened yet, just remember to do this printing things

scala> res0.toList
1
2
3
4
res1: List[Unit] = List((), (), (), ()) 
```

当你在迭代器上做 foreach 时，很明显你正在做副作用，所以懒惰是不受欢迎的。关于地图，我不会这么说。

**UPD**

至于您的编辑：这种行为的原因是对语句结果的 toString 隐式调用，这反过来又限制了迭代器 - 您自己尝试此代码：

```
scala> { lazyMap(List(1,2,3,4), {(x: Int) => println(x); x + 1}); 1 } 
```

你会看到这个函数`f`永远不会被调用

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T00:03:48.613

迭代器的要点是懒惰。换句话说，当你创建一个迭代器时，它不会评估任何东西，直到你去读取数据。看起来是这样的：

```
scala> val itr = List(1,2,3).iterator
itr: Iterator[Int] = non-empty iterator 
```

好的，我们现在有了一个迭代器。但它实际上还没有查看列表。

```
scala> val mappedItr = itr.map((x: Int) => println(x))
mappedItr: Iterator[Unit] = non-empty iterator 
```

现在我们有了一个新的迭代器。这将在访问数据时应用已映射的功能。但我们*还*没有真正查看原始列表。

```
scala> mappedItr.next
1 
```

这是我们第一次访问数据，所以这是迭代器第一次查看列表。我们调用`next`了 ，所以我们得到了第一个元素。由于我们的迭代器有一个`map`排队，当我们访问该元素时它会应用映射函数。所以我们看到了应用于`next`项目的函数的结果。

我们可以再做一次以获得下一个元素：

```
scala> mappedItr.next
2 
```

而且，它**仅在需要时才**评估函数，以便为我们提供最终结果。

# css - CSS 菜单和子菜单覆盖样式

> ID：12631779
> 
> 赞同：1
> 
> 时间：2012-09-27T23:57:29.880
> 
> 标签：css, css-selectors

如何确保子菜单不使用主菜单中的任何样式？我使用的似乎继续采用 .nav-left li.link a 和 .nav-left li.link a:hover 的风格。

```
#nav {position:relative; width:960px;}
#nav .nav-left, .nav-right {position:relative;}
#nav .nav-left ul, .nav-right ul {margin:0; padding:0;}
#nav .nav-left li, .nav-right li {float:left; position:relative; list-style:none;}
#nav .nav-left li.logo a {position:static;}
#nav .nav-left li.item, .nav-right li.item {position:relative;}
#nav .nav-left li.link a, .nav-right li.link a {}
#nav .nav-left li.link a:hover, .nav-right li.link a:hover {}
#nav .nav-left li:hover a {}
#nav .nav-left li.active a, .nav-right li.active a {}
#nav .nav-left li.active a:hover, .nav-right li.active a:hover {}
#nav .nav-left li.first, .nav-right li.first {}
#nav .nav-left li.last, .nav-right li.last {}
#nav .nav-left ul li:hover .submenu {left:0; top:auto;}
#nav .sub-menu {position:absolute; left:-999em; width:200px;}
#nav .sub-menu ul {}
#nav .sub-menu li {display:block; position:relative; width:200px; list-style:none;}
#nav .sub-menu li a {}
#nav .sub-menu li a:hover {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:59:15.933

使用[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)。它只选择直接的孩子，而不是所有的后代。

例如：

```
 .nav-left > ul {} /* only matches if ul is direct child of .nav-left */ 
```

每个现代浏览器以及 IE >= 7都[支持](http://www.quirksmode.org/css/contents.html)它。

# jquery - GalleryView 1.1 jquery插件定制

> ID：12631780
> 
> 赞同：0
> 
> 时间：2012-09-27T23:57:35.153
> 
> 标签：jquery, sharepoint-2010

我正在使用 GalleryView 1.1 来构建一个像[这样](http://community.bamboosolutions.com/blogs/sharepoint-2010/archive/2011/07/08/sharepoint-2010-cookbook-create-a-slide-image-webpart-using-jquery-in-sharepoint.aspx)的图像滑块 webpart 。

我希望在到达幻灯片中的第一张和最后一张图像时停止图像的旋转，但它似乎有点遥不可及。

谁能建议这样做的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:23:22.260

在需要弄清楚的时候，我可以使用不同的滑块插件构建一个完整的工作示例。我建议您获取一个具有文档且更现代的滑块插件。抱歉，这不能回答您的问题，但是 GalleryView 滑块已经使用了 2 年以上……这在网络语言中已经死了并且正在腐烂。

[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

[http://dimsemenov.com/plugins/royal-slider/](http://dimsemenov.com/plugins/royal-slider/)（花钱，但效果很好）

[http://www.tripwiremagazine.com/2012/09/jquery-image-slider-plugins.html](http://www.tripwiremagazine.com/2012/09/jquery-image-slider-plugins.html)

# ruby-on-rails - 带有单元格和助手的 Rails

> ID：12631781
> 
> 赞同：0
> 
> 时间：2012-09-27T23:57:35.427
> 
> 标签：ruby-on-rails, rails-cells

我无法通过`helper`. 我的代码如下所示：

```
#cell
helper SessionsHelper

#cell view
signed_in?

#sessions helper
signed_in?
    cookies.sth
end 
```

我收到错误：`undefined local variable or method`cookies'`。

如何使 cookie 在那里可见？

或者，我想将 Helper 作为对象协作者传递给我的单元格，因为这个助手包含许多有用的方法。这样做`SessionHelper.new`是正确的方法吗？

```
<%= render_cell :my_cell, :display, session_helper: SessionsHelper.new %> 
```

我现在看到它`SessionsHelper`实际上是一个模块，所以我不能调用该`new()`方法。我应该如何处理未定义的 cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T03:59:07.103

我总是定义`signed_in?`在`ApplicationController`. （有`cookies` *可用*）然后执行：

```
helper_method :signed_in? 
```

使其可用作辅助方法。

至于你的第二个问题：`session_helper: SessionsHelper.new`没有必要。*所有*助手的*所有*方法在*所有*视图中都可用。

# .net - System.Drawing.Image 和色彩空间

> ID：12631782
> 
> 赞同：3
> 
> 时间：2012-09-27T23:57:57.190
> 
> 标签：.net, image-processing

如果我使用`System.Drawing.Bitmap`如何指定位图使用的颜色空间来创建位图？另外，当我将图像保存为 jpeg 或 tiff 时，如何确保嵌入颜色配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:46:57.870

我想我已经找到了答案。

色彩空间记录在图像的`PropertyItems`

它的 ID 为 40961，即它的 EXIF ID。

所以我假设将这个属性的一个实例添加到一个新创建的位图中会给图像一个颜色空间。

不过有一个大问题。`System.Drawing.Imaging.PropertyItem`类没有公共构造函数。所以不可能创建一个新的`PropertyItem`. 它在[文档](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.propertyitem.aspx)中说 PropertyItems 仅用于访问现有图像元数据而不是创建元数据。那么，如果我想创建一个全新的图像并为其分配一个带有 的色彩空间 `PropertyItem`呢？

它还在文档中说，如果我想创建一个新`PropertyItem`的，我应该得到一个现有的`PropertyItem`，克隆它，编辑克隆，然后将克隆添加到`PropertyItems`. 但是，如果我正在创建一个新图像，则不会有任何现有的`PropertyItems`. 那么我应该如何添加一个`PropertyItem`声明颜色空间的？

# javascript - jQuery，如何预加载图像并在加载图像时得到通知？

> ID：12631788
> 
> 赞同：1
> 
> 时间：2012-09-27T23:58:16.800
> 
> 标签：javascript, jquery

我对所有 Javascript 的东西还是陌生的，老实说，我还没有尝试过任何关于我的问题的东西。

我想知道是否有一种方法或一个带有 jQ​​uery 的插件来预加载多个图像并在加载图像时调用一个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:00:00.343

您可以将`load`事件用于图像，但它们存在许多跨浏览器问题（这取决于您所针对的平台）。

```
var allImgs = $("#container img").filter(function() { return ! this.complete; });
var allImgsLength = allImgs.length;

allImgs.on("load", function() {
    if (--allImgsLength) {
        // Images have loaded.
    }
}); 
```

如果您不介意包含一个插件，那么可以[使用 waitForImages](https://github.com/alexanderdickson/waitForImages)（免责声明：由我编写），它可以很好地处理这个问题。:)

你会像使用它一样...

```
$("#container").waitForImages(function() {
    // Images have loaded.
}); 
```

如果您根本不想使用 jQuery，您可以修改第一个示例。如果您只针对现代浏览器...

```
var allImgs = [].filter.call(document.querySelectorAll("#container img"), 
                             function(img) {
                                return ! img.complete;
                             });
var allImgsLength = allImgs.length;

[].forEach.call(allImgs, function(img) {
    img.addEventListener(function() {
        if (--allImgsLength) {
            // Images have loaded.
        }
    });
}); 
```

如果您必须支持旧浏览器...

```
var allImgs = document.getElementById("container").getElementsByTagName("img");
var allImgsLength = allImgs.length;
var i;
var eventCallback = function() {
                        if (--allImgsLength) {
                             // Images have loaded.
                        }
                    };

for (i = 0; i < allImgsLength; i++) {
    if (allImgs[i].complete) {
        allImgsLength--;
    }

    if (allImgs[i].addEventListener) {
        allImgs[i].addEventListener("load", eventCallback);
    } elseif (allImgs[i].attachEvent) {
        allImgs[i].attachEvent("onload", eventCallback);
    } else {
        allImgs[i].onload = eventCallback;
    }
} 
```

# python - 具有真实IP地址的python Socket服务器

> ID：12631791
> 
> 赞同：6
> 
> 时间：2012-09-27T23:58:26.760
> 
> 标签：python, sockets, ip

我正在使用我的 python 服务器，但我已经使用 localhost 并且我想通过互联网。到目前为止，我的代码是：

```
import socket
import threading
import socketserver

class ThreadedTCPRequestHandler(socketserver.BaseRequestHandler):

    def handle(self):
        data = self.request.recv(1024)
        cur_thread = threading.current_thread()
        response = "{}: {}".format(cur_thread.name, data)
        self.request.sendall(b'worked') 

class ThreadedTCPServer(socketserver.ThreadingMixIn, socketserver.TCPServer):
    pass

def client(ip, port, message):
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.connect((ip, port))
    try:
        sock.sendall(message)
        response = sock.recv(1024)
        print("Received: {}".format(response))
    finally:
        sock.close()

if __name__ == "__main__":
    # Port 0 means to select an arbitrary unused port
    HOST, PORT = "0.0.0.0", 9001

    server = ThreadedTCPServer((HOST, PORT), ThreadedTCPRequestHandler)
    ip, port = server.server_address

    # Start a thread with the server -- that thread will then start one
    # more thread for each request
    server_thread = threading.Thread(target=server.serve_forever)
    # Exit the server thread when the main thread terminates
    server_thread.daemon = True
    server_thread.start()
    print("Server loop running in thread:", server_thread.name)
    ip = '12.34.56.789' #Not my real ip address This is just to hide my ip
    print(ip, PORT)

    client(ip, PORT, b'Hello World 1')
    #client(ip, port, b'Hello World 2')
    #client(ip, port, b'Hello World 3')

    server.shutdown() 
```

当我运行这个我得到错误：

```
Server loop running in thread: Thread-1
12.34.56.789 9001
Traceback (most recent call last):
  File "C:/Python32/serverTesty.py", line 43, in <module>
    client(ip, PORT, b'Hello World 1')
  File "C:/Python32/serverTesty.py", line 18, in client
    sock.connect((ip, port))
socket.error: [Errno 10061] No connection could be made because the target machine actively refused it 
```

我知道该端口有效，因为当我在程序运行时在端口 9001 上使用 canyouseeme.org 时，它说它处于活动状态并且正在工作。所以我想我只是在某个地方连接错误。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-28T00:23:24.337

> ip = '12.34.56.789' #不是我的真实IP地址，它是我从whatismyip.org获得的

第一个问题是“12.34.56.789”根本不是有效的 IP 地址。每个组件必须适合 8 位 (0-255)；789是不可能的。但我认为这不是您正在运行的实际代码，因为输出显示 12.45.29.122。

第二个问题是您使用的地址不是您的真实地址。

您的机器可能有一个内部 IP 地址，只能从您的 LAN 访问。然后，您的*路由器*有一个外部 IP 地址。路由器使用一种称为网络地址转换的技术，让 LAN 上的每台机器在充当客户端时假装外部地址属于它们（这就是 whatismyip.org 向您显示该地址的原因）。但是当他们充当服务器时，这不起作用。

如果你仔细想想，它真的没有办法奏效。如果您进行出站连接并且有人回复，则路由器知道回复应该发送到您的计算机。但是，如果有人突然出现并与路由器通话，它怎么会知道将连接发送到哪台机器呢？

如果您尝试从同一个 LAN 内部进行连接，有一个非常简单的解决方案：使用服务器的真实内部地址，而不是路由器的外部地址。

如果您需要从外部进行连接，则无需额外的工作就无法连接。有四种方法可以解决这个问题：

1.  为您的机器提供一个真正的可公开寻址的 IP 地址（例如，将其放在路由器的 DMZ 上）。对于家庭用户来说，这通常不是一个选择，对于不知道自己在做什么的人来说，这是一个糟糕的选择（除非您希望您的机器在午餐时间成为某人的僵尸网络的一部分）。

2.  在路由器的配置中设置静态端口转发。这对于每个路由器都是不同的，但想法是你告诉它“如果有人来寻找端口 9001，总是将他们发送到机器 192.168.1.64”。

3.  使用 UPnP 动态设置端口转发。

4.  设置 NAT 打孔。

选项 3 和 4 比较复杂，我认为选项 2 是您想要的，所以我不会解释它们。

最重要的是：

```
HOST, PORT = "192.168.1.64", 9001

server = ThreadedTCPServer((HOST, PORT), ThreadedTCPRequestHandler) 
```

您已经明确告诉服务器“监听 192.168.1.64”。即使你把你的服务器机器放在 DMZ 上，所以它的地址是 192.168.1.64 和 12.45.29.122，你的程序只监听第一个上的连接，所以没有人能够使用第二个访问它。如果要监听所有地址，请使用 0.0.0.0。

在编辑后的版本中，您现在正在监听 0.0.0.0，并连接到路由器的公共 IP，并且您声称已在路由器上设置了端口转发，但您仍然遇到完全相同的错误。

如果这一切都是正确的，那么可能会出现三个明显的问题：

1.  您实际上不是端口转发；设置有问题。
2.  您实际上并没有在 0.0.0.0:9001 上收听。
3.  您有防火墙阻止连接。

您可以进行一些测试来缩小范围。

1.  打开两个终端。在一个中，键入`nc -kl 9001`。在另一个中，键入`nc 12.34.56.78 9001`。它们应该连接起来，因此您在一个窗口中输入的任何内容都会出现在另一个窗口中（可能只有在您点击 Return 后）。如果可行，则端口转发正常，并且没有防火墙问题，因此这是您的代码中的问题。

2.  如果这不起作用，请准确发布您在每个窗口中看到的内容。然后 Ctrl-C 第二个`nc`，然后键入`nc 192.168.1.64 9001`。如果现在可行，则端口转发设置不正确，除非您有一个聪明的防火墙，允许相同主机（或相同接口）连接但不允许远程连接。

3.  如果两者都不起作用，则可能是防火墙问题。（除非您的 IP 地址或其他信息有误。）您可能会在某处找到日志，但如果不知道您在哪个平台上以及您正在使用什么防火墙，就很难提供太多帮助。（此外，对于与 SO 不同的站点，这可能是一个问题。）

如果您使用的是 Windows 或某些 linux 发行版，则需要`nc`从某个地方获取 (netcat) 的副本；在大多数 linux 发行版和 Mac 上，它应该是内置的。此外，GNU、BSD 和 Hobbit`nc`略有不同，所以如果`nc -kl 6000`给你一个错误，你可能需要阅读手册页或`--help`. （如果我没记错的话，Hobbit`nc`需要`-l -p6000`，BSD 需要`-l 6000`，GNU 都允许。）

或者你可能想要[ncat](http://nmap.org/ncat/)，一个我知道可以处理我上面使用的语法的 netcat 的重新实现，并且有一个适用于 Windows 的单文件静态可执行文件。

如果您无法开始使用`nc`，至少尝试更改您的代码以连接到 192.168.1.64 而不是 12.34.56.78。如果这样可以解决问题，至少您会知道它是端口转发还是允许相同主机/接口连接但不允许远程连接的防火墙。

# c# - 获取注册表项删除权限

> ID：12631796
> 
> 赞同：1
> 
> 时间：2012-09-27T23:59:21.170
> 
> 标签：c#, windows, permissions, registry

我试图让我的程序确定它是否有权删除 C# 中的注册表项。我一直在尝试这段代码，它返回 true，而实际上我没有正确的注册表项权限。

```
public static bool CanDeleteKey(RegistryKey key)
{
    try
    {
        if (key.SubKeyCount > 0)
        {
            bool ret = false;

            foreach (string subKey in key.GetSubKeyNames())
            {
                ret = CanDeleteKey(key.OpenSubKey(subKey));

                if (!ret)
                    break;
            }

            return ret;
        }
        else
        {
            RegistryPermission r = new 
          RegistryPermission(RegistryPermissionAccess.AllAccess, key.ToString());
            r.Demand();
            return true;
        }

    }
    catch (SecurityException)
    {
        return false;
    }
} 
```

我传递给此函数的注册表项是`HKEY_CLASSES_ROOT\eHomeSchedulerService.TVThumbnailCache`. 它应该重新诅咒子密钥`CLSID`并返回 false，因为仅为 TrustedInstaller 设置了完全控制权限。

以下是`HKEY_CLASSES_ROOT\eHomeSchedulerService.TVThumbnailCache\CLSID`来自 regedit 的权限： ![HKEY_CLASSES_ROOT\eHomeSchedulerService.TVThumbnailCache\CLSID 权限](../Images/e8515e742689162fb725540400b1fd77.png)

我应该注意我正在以管理权限运行代码。另外，我知道在删除注册表项时可以使用 try-catch 块，但我想知道是否可以事先将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:00:56.510

我能够在 Google 上进行一些挖掘，然后我想出了这段代码，它似乎可以解决问题：

```
 /// Checks if we have permission to delete a registry key
    /// </summary>
    /// <param name="key">Registry key</param>
    /// <returns>True if we can delete it</returns>
    public static bool CanDeleteKey(RegistryKey key)
    {
        try
        {
            if (key.SubKeyCount > 0)
            {
                bool ret = false;

                foreach (string subKey in key.GetSubKeyNames())
                {
                    ret = CanDeleteKey(key.OpenSubKey(subKey));

                    if (!ret)
                        break;
                }

                return ret;
            }
            else
            {
                System.Security.AccessControl.RegistrySecurity regSecurity = key.GetAccessControl();

                foreach (System.Security.AccessControl.AuthorizationRule rule in regSecurity.GetAccessRules(true, false, typeof(System.Security.Principal.NTAccount)))
                {
                    if ((System.Security.AccessControl.RegistryRights.Delete & ((System.Security.AccessControl.RegistryAccessRule)(rule)).RegistryRights) != System.Security.AccessControl.RegistryRights.Delete)
                    {
                        return false;
                    }
                }

                return true;
            }

        }
        catch (SecurityException)
        {
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T02:21:55.387

拥有读取权限允许您打开密钥。尝试使用：

```
key.DeleteSubKey(subkey) 
```

# mysql - MySQL 查询以在移动 DATE 期间检索 DISTINCT COUNT

> ID：12631801
> 
> 赞同：3
> 
> 时间：2012-09-27T23:59:48.390
> 
> 标签：mysql, sql, count, distinct, between

我正在尝试编写一个查询，该查询返回每个日期前 7 天的日期列表和用户 ID 的 DISTINCT COUNT。我正在使用的表很简单，如下所示：

```
Started                 UserId
"2012-09-25 00:01:04"   164382
"2012-09-25 00:01:39"   164382
"2012-09-25 00:02:37"   166121
"2012-09-25 00:03:35"   155682
"2012-09-25 00:04:18"   160947
"2012-09-25 00:08:19"   165806 
```

我可以为单个 COUNT 的输出编写查询，如下所示：

```
SELECT COUNT(DISTINCT UserId)
FROM Session 
WHERE Started BETWEEN '2012-09-18 00:00' AND '2012-09-25 00:00'; 
```

但是我想要做的是在表中的每一天以及它之前的 7 天输出这个 COUNT。澄清一下，9 月 25 日的值将是 18 日到 25 日之间 DISTINCT 用户 ID 的计数，24 日是 17 日到 24 日之间的计数，等等。

我尝试了以下查询，但它只提供每天的 COUNT：

```
SELECT 
DATE(A.Started),
Count(DISTINCT A.UserId)
FROM Session AS A
WHERE DATE(A.Started) BETWEEN DATE(DATE_SUB(DATE(DATE(A.Started)),INTERVAL 7 DAY)) AND DATE(DATE(A.Started))
GROUP BY DATE(A.Started)
ORDER BY DATE(A.Started); 
```

输出如下所示：

```
DATE(A.Started) "Count(DISTINCT A.UserId)"
2012-09-18          709
2012-09-19          677
2012-09-20          658
2012-09-21          556
2012-09-22          530
2012-09-23          479
2012-09-24          528
2012-09-25          480
... 
```

但正如我所说，这些只是日常计数。最初我以为我可以将 7 天的值相加，但这会使 DISTINCT 子句无效。**我需要给定日期之前每 7 天的 DISTINCT UserId 计数。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:47:26.203

此查询应该适合您：

```
SELECT
    DATE_FORMAT(d1.Started, '%Y-%m-%d') AS Started,
    COUNT(DISTINCT d2.UserID) Users
FROM
(
    SELECT
        DATE(Started) AS Started
    FROM
        Session
    GROUP BY
        DATE(Started)
) d1 
INNER JOIN
(
    SELECT DISTINCT
        DATE(Started) AS Started,
        UserID
    FROM
        Session
) d2
ON d2.Started BETWEEN d1.Started - INTERVAL 7 DAY AND d1.Started
GROUP BY
    d1.Started
ORDER BY
    d1.Started DESC 
```

访问[http://sqlfiddle.com/#!2/9339c/5](http://sqlfiddle.com/#!2/9339c/5)以查看此查询的实际效果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T00:10:34.350

尝试：

```
Select Distinct Date(A.Started), Count(B.UserId)
From Session a
    Join Session b 
        On b.Start Between AddDate(A.Start, day, -7) And A.Start 
```

我不是 MySQL 人，所以语法可能不正确，但该模式会起作用....

# python - 如何强制 Python 将整数保留在科学记数法之外

> ID：12631805
> 
> 赞同：3
> 
> 时间：2012-09-28T00:00:09.250
> 
> 标签：python, floating-point, format, fixed-point, scientific-notation

我正在尝试在 Python 3.2 中编写一个加密短语然后解密它的方法。问题是这些数字太大了，以至于当 Python 对它们进行数学运算时，它会立即将其转换为科学记数法。由于我的代码需要所有数字来使用科学记数法，所以这没有用。

我所拥有的是：

```
coded = ((eval(input(':'))+1213633288469888484)/2)+1042 
```

基本上，我只是从用户那里得到一个数字并对其进行一些数学运算。

我已经尝试过`format()`和其他几件事，但我无法让它们工作。

编辑：我只使用偶数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T00:03:42.933

在 python3`'/'`中，进行真正的除法（例如浮点）。要获得整数除法，您需要使用`//`. 换句话说， `100/2`yield `50.0`(float) 而`100//2`yield `50`(integer)

您的代码可能需要更改为：

```
coded = ((eval(input(':'))+1213633288469888484)//2)+1042 
```

然而，作为一个警示故事，您可能需要考虑使用`int`而不是`eval`：

```
coded = ((int(input(':'))+1213633288469888484)//2)+1042 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:06:30.237

如果您*知道*浮点值实际上是一个整数，或者您不关心删除小数部分，则可以`int`在打印之前将其转换为 an。

```
>>> print 1.2e16
1.2e+16
>>> print int(1.2e16)
12000000000000000 
```

# mysql - phpMyAdmin 中的 SQL 保留字语法错误

> ID：12631808
> 
> 赞同：0
> 
> 时间：2012-09-28T00:00:29.400
> 
> 标签：mysql, sql, phpmyadmin

尝试在 phpMyAdmin 中执行以下代码时出现以下错误。我正在使用带有 MySQL 5.5.8 版的 WAMP 服务器 ::

错误是：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NUMERIC(6)   not null, payee  VARCHAR2(20)   not null, amount     DECIMAL(6,2)   no' at line 3 
```

SQL是：

```
CREATE TABLE checks 
    (
        check       NUMERIC(6)  not null,
        payee       VARCHAR2(20)    not null,
        amount      DECIMAL(6,2)    not null,
        remarks     VARCHAR2(20)    not null
    ) 
```

**编辑**

我也在尝试执行此操作，但它也给出了错误：

```
CREATE TABLE deposits
    (
        deposit     NUMBER(8),
        whopaid     VARCHAR(25),
        amount      DECIMAL(6,2),
        remarks     VARCHAR(20)
    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:03:25.443

您需要`check`使用反引号转义，因为它是[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。在 MySQL 中没有`varchar2`数据类型，只有`varchar`.

```
CREATE TABLE checks 
(
    `check`     NUMERIC(6)    not null,
    payee       VARCHAR(20)   not null,
    amount      DECIMAL(6,2)  not null,
    remarks     VARCHAR(20)   not null
) 
```

在您的第二个创建语句中也替换`NUMBER`为。`NUMERIC`

```
CREATE TABLE deposits
(
    deposit     NUMERIC(8),
    whopaid     VARCHAR(25),
    amount      DECIMAL(6,2),
    remarks     VARCHAR(20)
) 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!2/f48e1)

请参阅[MySQL 字符串数据类型](http://dev.mysql.com/doc/refman/5.0/en/string-type-overview.html)和[MySQL 数字数据类型](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:04:53.917

CHECK 是 mysql 中的保留关键字。如果您选择其他名称，它应该可以正常工作。

[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:04:06.323

`check`是保留的作品，这就是您出现此错误的原因

你需要在它周围加上引号

# lua - 从文本文件运行 lua 程序

> ID：12631813
> 
> 赞同：7
> 
> 时间：2012-09-28T00:01:48.177
> 
> 标签：lua

我刚刚开始学习 Lua，我正在尝试让本地 Lua 解释器运行已保存到`.txt`文件的程序。我正在运行带有 Lua 5.1.4 的 Windows Vista。

也许我遗漏了一些东西，但我的书（*Lua 编程*）唯一说的是，*运行程序所需要做的就是使用包含程序的文本文件的名称调用解释器*。然后它给出了这段据说很方便的代码：

```
% lua filename.lua 
```

我无法在 cmd 或 Lua 解释器中工作。我所做的进一步研究表明我可能需要使用

```
dofile("filename.lua") 
```

命令，但我不确定如何执行此操作。具体来说，我需要在论点中输入哪些信息？非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T00:16:50.617

您需要下载 Win32 二进制文件（请参阅[lua-5.2.1_Win32_bin.zip 或 lua-5.2.1_Win64_bin.zip 此处](http://luabinaries.sourceforge.net/download.html)）。在某个地方解压缩这个。如何运行您的脚本，以容易和相反的顺序或常见的过程：

1.  使用 Windows 文件资源管理器将您的脚本拖到 Lua.exe 上。

2.  一个。将您的脚本移动到与 Lua.exe 相同的文件夹
    b. Shift 右键单击​​该文件夹并选择`Open Command Window Here`.
    C。键入`lua filename.lua`并按 Enter。

3.  将包含 Lua.exe 的目录添加到您的[系统 PATH](http://www.computerhope.com/issues/ch000549.htm#0)中，然后在包含您的脚本的文件夹上执行步骤 2a 和 2b。

4.  以某种方式将 Lua.exe 与您的编辑器集成（如何执行此操作取决于您的编辑器）。

# objective-c - iOS：UIPopoverController 内的人物选择器，搜索键盘扭曲弹出框

> ID：12631815
> 
> 赞同：6
> 
> 时间：2012-09-28T00:02:05.877
> 
> 标签：objective-c, ios, uipopovercontroller, abpeoplepickerview

我在 UIPopoverController 中有一个人物选择器，因为它有一个搜索字段，点击时会触发键盘，然后我得到了这个丑陋的结果：

![UIPopoverController 中的人物选择器](../Images/afbbc421d706f48c934fbfaa1e466246.png)

弹出框的箭头是 UP，这是我的应用程序中最好看的，我也尝试使用 UP | DOWN 但它不起作用（仍然总是向上），我知道我只能使用 DOWN 箭头，但这应该是最后的解决方案，我想知道有什么方法可以解决这个问题吗？

谢谢！

更新：我在想我可以先使用向上箭头，然后当搜索字段成为第一个响应时（不知道如何检测到这一点），我将其更改为向下箭头（也不知道如何执行此操作）？

更新 2：视图也不是表格或可以滚动的东西，所以我无法滚动视图以使弹出框看起来很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:47:11.953

你是对的，这是一个相当丑陋的决议。

问题是`UIPopoverController`被编码以避免与键盘视图冲突。

我认为您可以解决此问题的唯一方法是创建一个`UIPopoverController`忽略键盘出现的自定义（我相信需要在 SharedApplication 或主屏幕上禁用某些侦听器）或创建一个自定义 UIView 来保存它。

# asp.net-mvc - 我的应用程序中的更改跟踪

> ID：12631816
> 
> 赞同：2
> 
> 时间：2012-09-28T00:02:12.303
> 
> 标签：asp.net-mvc, reflection, change-tracking

我最近才开始用 ASP.NET MVC4 编写一个应用程序。

我的应用程序在整个应用程序中具有相互关联的对象/模型。

我想为`change tracking / event logging`这个应用程序添加一个很酷的新功能，有点像 facebook 通知。

基本上，我知道我需要为应用程序中发生的事件建立一个审计日志，但是有什么`high-level`方法可以实现呢？

我是`Audit table`在每次数据库操作后手动插入，还是有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:46:37.187

一种更优雅的方式是订阅**SavingChanges**事件。

阅读[使用 Entity Framework 4.x 对动态数据进行基本审计，](http://csharpbits.notaclue.net/2012/02/basic-auditing-for-dynamic-data-with.html)以获得很好的介绍性运行。

# javascript - 在多个脚本中定义的 jQuery .ready() 中使用相同的变量

> ID：12631817
> 
> 赞同：1
> 
> 时间：2012-09-28T00:02:16.783
> 
> 标签：javascript, jquery

假设我有一个链接到两个脚本的 HTML：

```
...
<script type="text/javascript" src="general.js"></script>
<script type="text/javascript" src="specific.js"></script>
... 
```

这两个脚本中的每一个都定义了自己的 jQuery `.ready()`。

**一般.js：**

```
jQuery(function() {
  var foo;
  $('#btn').click(function() {alert(foo())});
} 
```

**具体的.js：**

```
jQuery(function() {
  foo = function() {alert("hello")};
  $('#btn').click(function() {foo()});
} 
```

哪里`#btn`是一个按钮元素。

当我点击时，`#btn`我期待看到“hello”对话框，但相反，我进入`Uncaught TypeError: undefined is not a function`了 chrome 开发人员工具。

我自己的理解是，在事件`foo`访问它之前应该已经分配了函数，而不是未定义。`click`显然，我的理解是不正确的。有人可以向我解释为什么它的行为方式是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:04:13.373

您在第一个函数中声明“foo `var` **”**。因此，它是该函数的本地函数，并且在其外部不可见。

您可以通过在第一个“就绪”处理程序*之外*声明它来使“foo”全局化。

全局变量有点不受欢迎；将值保留为元素本身的“数据”值可能会更好。

```
$(function() {
   $('#btn').data('foo', 'some value');
   $('#btn').click(function() {alert($(this).data('foo'))});
} 
```

这样，数据与元素相关联（尽管不是直接在 DOM 对象上；jQuery 会跟踪内部映射中的值以避免与 DOM 相关的内存泄漏），并且不会污染全局命名空间。

# javascript - 使文本框的名称与动态生成的选择框的值匹配

> ID：12631828
> 
> 赞同：0
> 
> 时间：2012-09-28T00:03:42.373
> 
> 标签：javascript, forms

我需要将表单发布到 CMS，并且 CMS 具有用于赡养费、子女抚养费、保险等的特定字段。我的问题是，在我的表单中，并非所有这些框都存在，直到用户添加它或从下拉列表中选择它.

首先有一个名为“selectBox”的选择框，其中包含所有这些选项。如果用户选择“赡养费”，我希望相应文本框的名称更改为“payment_almony”，因此当我进行 POST 时，这些字段与 CMS 匹配。

接下来，如果用户需要添加其他费用，他将单击“添加费用”，然后弹出一个名为“selectBox2”的选择框，依此类推，最多10个。

如果可能的话，我希望能够做到这一点，而不必为每个 selectBox 设置 10 个单独的函数。

谢谢您的帮助！

```
<div id="income1" class="row clonedInput"><!-- Expandable Section: INCOME -->
                                <div class="item" id="item_income_source">
                                    <label for="income_source">Additional Income Source<a href="javascript:;" class="tooltip" title="Help Text Goes Here"></a></label>
                                    <select id="income_source" name="income_source"   >
                                        <option value="" selected="selected">- select -</option>
                                        <option value="alimony">Alimony</option>
                                        <option value="child_support">Child Support</option>
                                        <option value="disability">Disability</option>
                                        <option value="social_security">Social Security</option>
                                        <option value="pension">Pension</option>
                                        <option value="rental_protperty">Rental Property</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="item small-item third ">
                                    <label for="blank-space">&nbsp;</label>
                                </div>
                                <div class="item small-item third last" id="item_input_gross">
                                    <label for="input_gross">Amount ($)</label>
                                    <input type="text" id="input_gross" value="" name="input_gross" onkeyup="formatInt(this)" onChange="addIncome();" onclick="select();" class="IncometoAdd"  />
                                </div>
                            </div>
                            <div style="clear:both">
                                <input type="button" id="btnAdd-Income" value="(+) add source" />
                                <input type="button" id="btnDel-Income" value="(-) remove source" />
                            </div> 
```

和重复的Javascript：

```
$(function(){
// Add new element
$('#btnAdd-Income').click(function() {
    var num     = $('.clonedInput').length;
    var newNum  = new Number(num + 1);

    // create the new element via clone(), and manipulate it's ID using newNum value
    var newElem = $('#income' + num).clone().attr('id', 'income' + newNum);

    // manipulate the name/id values of the input inside the new element
    newElem.find('#item_income_source label').attr('for', 'income_source' + newNum);
    newElem.find('#item_income_source select').attr('id', 'income_source' + newNum).attr('name', 'income_source' + newNum).val('');
    newElem.find('#item_input_gross label').attr('for', 'input_gross' + newNum);
    newElem.find('#item_input_gross input').attr('id', 'input_gross' + newNum).attr('name', 'input_gross' + newNum).val('');

    // insert the new element after the last "duplicatable" input field
    $('#income' + num).after(newElem);

    // enable the "remove" button
    $('#btnDel-Income').show();

    // Limit 6 sources  ***EDITABLE***
    if (newNum == 6)
        $('#btnAdd-Income').hide();
});

    // remove the last element
$('#btnDel-Income').click(function() {
    var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
    $('#income' + num).remove();        // remove the last element
    addIncome();

    // enable the "add" button
    $('#btnAdd-Income').show();

    // if only one element remains, disable the "remove" button
    if (num-1 == 1)
        $('#btnDel-Income').hide();
});

$('#btnDel-Income').hide(); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:44:56.030

这将起作用：

```
$(function() {
  $('#btnAdd-Income').click(function() {
      source = $('.item').first().clone();
      source.find('input').val('');
      $('.item').last().after(source);
  });

  $('.item select').live('change', function() {
      name = $('option:selected',this).val();
     $('input.amount', $(this).closest('.item')).attr('name', name); 
  });
});​ 
```

HTML：

```
<div class="item" id="item_income_source">
    <label for="income_source">Additional Income Source<a href="#" class="tooltip" title="Help Text Goes Here"></a></label>
    <select id="income_source" name="income_source"   >
     <option value="" selected="selected">- select -</option>
     <option value="alimony">Alimony</option>
     <option value="child_support">Child Support</option>
     <option value="disability">Disability</option>
     <option value="social_security">Social Security</option>
     <option value="pension">Pension</option>
     <option value="rental_protperty">Rental Property</option>
     <option value="other">Other</option>
   </select>

  <label for="input_gross">Amount ($)</label>
  <input type="text" id="input_gross" class="amount"    />
 <br>
</div>
</div>
<div style="clear:both">
 <input type="button" id="btnAdd-Income" value="(+) add source" />
 <input type="button" id="btnDel-Income" value="(-) remove source" />
</div> 
```

jsfiddle：http: [//jsfiddle.net/ft6ME/32/](http://jsfiddle.net/ft6ME/32/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:45:37.593

如果我的理解正确，这就是你所需要的：

```
<select onChange="this.name = 'payment_'+this.value">
    <option value="">Select one...</option>
    <option value="alimony">Alimony</option>
    ...
</select> 
```

# c# - 用于自动退订的事件连接跟踪

> ID：12631834
> 
> 赞同：1
> 
> 时间：2012-09-28T00:04:16.757
> 
> 标签：c#, events, delegates, connection

我想创建一个类来处理我的所有委托连接，并在类被销毁时自动断开所有这些委托。即在 C++/boost 中，我可以通过创建一个带有 boost::signal::connection 列表的类并在析构函数中清除它来轻松地做到这一点。经过详尽的搜索，我似乎无法使用 C# 委托找到任何类似的东西。

# mysql - 我什么时候应该使用存储过程（在 mysql 中）？

> ID：12631845
> 
> 赞同：1
> 
> 时间：2012-09-28T00:05:45.723
> 
> 标签：mysql, stored-procedures

我看到了这个，但它已经有 3 年历史了，我认为大多数数据库的技术都更加优化了[我什么时候应该使用存储过程？](https://stackoverflow.com/questions/1171769/when-should-i-use-stored-procedures)

我正在使用 mysql，我应该什么时候使用存储过程？IMO 我永远不应该，除非我需要表现。然后我读到没有性能提升。然后我读到了，但每次我在连接上第一次调用程序时都会编译它。但即便如此，它也无济于事，因为它只会加快解析速度，而无需花费时间。

我不知道我做对了吗？但也许我忘记了一些大事。我没有看到逻辑存在的任何好处，因为我的偏好是拥有一个库或共享代码（并且这样做没有任何真正的缺点）。

但我从未使用过存储过程，所以这就是我问的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:14:43.757

有几次我对程序很感兴趣：

1.  当我想通过强制应用程序使用存储过程来完全封装对数据库的访问时。这对于拥有强大/大型数据库组和小型/弱编程团队的组织来说可能是件好事。当您有多个代码库访问数据库时，这也很有帮助，因为它们都有一个接口，而不是每个都编写自己的查询等。
2.  当您重复地做一些应该在数据库中完成的事情时。当你看到它时你就会知道。

所以，除非你是一个严重的控制狂（或者正在构建像银行这样的庞大系统），否则 90% 的时间你都不需要它们。

# asp.net - 程序集与 Windows Azure 上 IIS 使用的 64 位处理器体系结构不兼容

> ID：12631849
> 
> 赞同：4
> 
> 时间：2012-09-28T00:06:48.810
> 
> 标签：asp.net, azure, azure-web-roles

当我尝试在我的 devmachine appfabric 上运行我的 asp.net 应用程序时收到一条警告消息。当我将我的应用程序上传到天蓝色云时我收到错误[消息](http://social.msdn.microsoft.com/Forums/en/tfsgeneral/thread/d94e1c46-1e9b-45c3-8b37-b2ac15e0b3bc)

> 项目包含以下程序集：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.WorkItemTracking.Client.DataStoreLoader.dll。此程序集与 Windows Azure 上的 IIS 使用的 64 位处理器体系结构不兼容。为确保角色启动，您必须将此程序集替换为与此体系结构兼容的程序集。”

我在哪里可以获得与 azure 兼容的 dll ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:54:34.737

您需要以[**32 位模式**](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx)[运行您的应用程序池](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx)**。尝试运行此[`appcmd`](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe)（*您可以[使用角色启动任务自动](http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/17/using-startup-task-in-windows-azure-detailed-summary.aspx)*执行此操作）以分配默认应用程序池设置以启用 32 位支持。**

 **> %windir%\system32\inetsrv\appcmd 设置配置-section:system.applicationHost/applicationPools /applicationPoolDefaults.enable32BitAppOnWin64:"True" /commit:apphost

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T12:50:26.067

我有同样的问题，我设置了 Build | 面向任何 CPU 的平台目标（以前其中一些是 X86）。这为我解决了这个问题。**

# google-chrome-extension - 带有 Typekit 字体的 Google Chrome 扩展程序

> ID：12631853
> 
> 赞同：8
> 
> 时间：2012-09-28T00:07:11.720
> 
> 标签：google-chrome-extension, typekit

我最近开始创建 chrome 扩展，但不幸的是，我没有将 typekit 字体直接引入扩展。

有没有人有这样做的经验或运气？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-08T10:03:19.893

在将 Typekit 字体用于 Chrome 扩展程序之前，需要克服两个障碍：

1.  默认情况下，Chrome 会阻止在扩展程序进程中加载​​外部脚本。
2.  Chrome 会阻止执行内联脚本。
3.  Typekit 将回复 403 Forbidden，除非设置了正确的 Referer 标头。

* * *

我将演示的源代码上传到[https://robwu.nl/typekit-demo.zip](https://robwu.nl/typekit-demo.zip)。要查看扩展是否有效，请打开示例扩展的选项页面。

* * *

对于下一个示例，我创建了一个具有以下设置的 Typekit 套件：

![https://typekit.com/kit_editor/kits/ekl0khv 名称：Chrome 扩展演示 域名：hjdaoalallnjkokclafeljbcmpogfiig](../Images/801291685f87298216e596f5ea936b84.png)

要解决第一个问题，请编辑清单文件并放宽[内容安全策略](http://developer.chrome.com/extensions/contentSecurityPolicy.html)：

```
"content_security_policy": "script-src 'self' https://use.typekit.net; object-src 'self'" 
```

要解决第二个问题，请将加载程序移动到外部文件。您的扩展页面应如下所示：

```
 <script src="https://use.typekit.net/ekl0khv.js"></script>
 <script src="load-typekit.js"></script> 
```

```
// load-typekit.js
try{Typekit.load();}catch(e){} 
```

要解决最后一个问题，您需要修改Referer header。这段代码需要清单文件中的`webRequest`,`webRequestBlocking`和`*://use.typekit.net/`权限；[`chrome.webRequest.onBeforeSendHeaders`](https://developer.chrome.com/extensions/webRequest.html#event-onBeforeSendHeaders)用于修改标题。

```
// background.js
chrome.webRequest.onBeforeSendHeaders.addListener(function(details) {
    var requestHeaders = details.requestHeaders;
    for (var i=0; i<requestHeaders.length; ++i) {
        if (requestHeaders[i].name.toLowerCase() === 'referer') {
            // The request was certainly not initiated by a Chrome extension...
            return;
        }
    }
    // Set Referer
    requestHeaders.push({
        name: 'referer',
        // Host must match the domain in your Typekit kit settings
        value: 'https://hjdaoalallnjkokclafeljbcmpogfiig/'
    });
    return {
        requestHeaders: requestHeaders
    };
}, {
    urls: ['*://use.typekit.net/*'],
    types: ['stylesheet']
}, ['requestHeaders','blocking']); 
```

## 最小清单.json

这是[`manifest.json`](https://developer.chrome.com/extensions/manifest.html)使扩展程序正常工作的最小文件。`background.js`上一节中提到过。

```
{
    "name": "Name of extension",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": ["background.js"]
    },
    "permissions": [
        "*://use.typekit.net/*",
        "webRequest",
        "webRequestBlocking"
    ],
    "content_security_policy": "script-src 'self' https://use.typekit.net; object-src 'self'"
} 
```

# mongodb - 将 MongoDB 与 Hadoop 结合使用时的异常

> ID：12631854
> 
> 赞同：0
> 
> 时间：2012-09-28T00:07:36.827
> 
> 标签：mongodb, hadoop, mapreduce

我正在将文档从 MapReduce 作业中的地图插入 MongoDB。为映射提供了一堆字符串，它为每个字符串生成 SHA-1 消息并将它们插入到 MongoDB 中。大约有 4 亿个字符串（从 HDFS 上的文件中读取）。我正在使用 10 个分片和 3 个 mongos，并且没有复制。我在 64 位 Linux 上使用 MongoDB 2.2.0。但是，此 MR 作业没有完成，我在日志中看到以下 2 种类型的异常。

1.  MongoDB 中每个分片的连接太多（大约 250 个连接）。我在日志中看到以下异常

    ```
    com.mongodb.DBTCPConnector fetchMaxBsonObjectSize                                                                                                                                 
    WARNING: Exception determining maxBSONObjectSize                                                                                                                                                          
    java.net.SocketException: Connection reset 
    ```

2.  `Task attempt_***** failed to report status for 600 seconds. Killing!`

集群中有 16 个节点，在任何时候似乎都有 256 个 map 任务在运行（在 hadoop 日志中注意到它）。

我四处寻找第一个错误/异常，有人提到必须增加 MongoDB 每个主机的连接数。我使用 MongoOptions 类将其从 10 增加到 20，并在初始化 Mongos 实例时提供。但这并没有解决问题——这是异常的原因吗？

我在 map() 的 configure() 方法中创建一个 Mongo 实例，并在 close() 中关闭它。有没有更好的方法来创建 Mongo 实例？

有人在使用 Hadoop + MongoDB 组合时遇到这些错误吗？在使用这种组合时，我还有什么需要注意的吗？

PS：我将此问题发布到 MongoDB 用户列表，但希望让更广泛的受众检查此问题，因此在此处重新发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:29:08.823

检查主机上 ulimit -n 的值。听起来您可能会达到计算机上的文件描述符限制。

但总的来说，在 MapReduce 作业期间使用驱动程序连接在 Mongo 中存储文档是一种反模式。最好让 mapreduce 输出只生成包含所需数据的文档，而不是尝试创建与 Mongo 的额外连接并在带外写入更多数据。

# c++ - rdtscp、rdtsc 之间的区别：内存和 cpuid / rdtsc？

> ID：12631856
> 
> 赞同：67
> 
> 时间：2012-09-28T00:07:46.350
> 
> 标签：c++, c, performance, assembly, rdtsc

假设我们正在尝试使用 tsc 进行性能监控，并且我们希望防止指令重新排序。

这些是我们的选择：

**1：** `rdtscp`是一个序列化调用。它可以防止围绕对 rdtscp 的调用进行重新排序。

```
__asm__ __volatile__("rdtscp; "         // serializing read of tsc
                     "shl $32,%%rdx; "  // shift higher 32 bits stored in rdx up
                     "or %%rdx,%%rax"   // and or onto rax
                     : "=a"(tsc)        // output to tsc variable
                     :
                     : "%rcx", "%rdx"); // rcx and rdx are clobbered 
```

但是，`rdtscp`仅在较新的 CPU 上可用。所以在这种情况下，我们必须使用`rdtsc`. 但是`rdtsc`是非序列化的，因此单独使用它不会阻止 CPU 对其进行重新排序。

所以我们可以使用这两个选项中的任何一个来防止重新排序：

**2：**这是对`cpuid`then的调用`rdtsc`。`cpuid`是一个序列化调用。

```
volatile int dont_remove __attribute__((unused)); // volatile to stop optimizing
unsigned tmp;
__cpuid(0, tmp, tmp, tmp, tmp);                   // cpuid is a serialising call
dont_remove = tmp;                                // prevent optimizing out cpuid

__asm__ __volatile__("rdtsc; "          // read of tsc
                     "shl $32,%%rdx; "  // shift higher 32 bits stored in rdx up
                     "or %%rdx,%%rax"   // and or onto rax
                     : "=a"(tsc)        // output to tsc
                     :
                     : "%rcx", "%rdx"); // rcx and rdx are clobbered 
```

**3：**`rdtsc`这是对clobber列表中的with的调用`memory`，它可以防止重新排序

```
__asm__ __volatile__("rdtsc; "          // read of tsc
                     "shl $32,%%rdx; "  // shift higher 32 bits stored in rdx up
                     "or %%rdx,%%rax"   // and or onto rax
                     : "=a"(tsc)        // output to tsc
                     :
                     : "%rcx", "%rdx", "memory"); // rcx and rdx are clobbered
                                                  // memory to prevent reordering 
```

我对第 3 个选项的理解如下：

进行调用`__volatile__`可防止优化器删除 asm 或将其移动到可能需要 asm 结果（或更改输入）的任何指令中。但是，它仍然可以移动它以进行不相关的操作。所以`__volatile__`还不够。

告诉编译器内存正在被破坏：`: "memory")`. clobber 意味着 GCC 不能对`"memory"`整个 asm 中的内存内容保持不变做出任何假设，因此不会围绕它重新排序。

所以我的问题是：

*   1：我的理解`__volatile__`和`"memory"`正确吗？
*   2：后两个调用做同样的事情吗？
*   3：使用`"memory"`看起来比使用另一个序列化指令简单得多。为什么有人会使用第三个选项而不是第二个选项？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-28T06:41:54.323

*如评论中所述，编译器屏障*和*处理器屏障*之间存在差异。`volatile`并且`memory`在 asm 语句中充当编译器屏障，但处理器仍然可以自由地重新排序指令。

处理器屏障是必须明确给出的特殊指令，例如`rdtscp, cpuid`，内存围栏指令（`mfence, lfence,`...）等。

顺便说一句，虽然`cpuid`以前用作屏障`rdtsc`很常见，但从性能角度来看，它也可能非常糟糕，因为虚拟机平台经常捕获和模拟`cpuid`指令，以便在集群中的多台机器上强加一组通用的 CPU 特性（以确保实时迁移有效）。因此，最好使用内存围栏指令之一。

Linux 内核`mfence;rdtsc`在 AMD 平台和`lfence;rdtsc`Intel 上使用。如果您不想费心区分这些，`mfence;rdtsc`可以同时使用两者，尽管它`mfence`比`lfence`.

**编辑 2019-11-25**：从 Linux 内核 5.4 开始，lfence 用于在 Intel 和 AMD 上序列化 rdtsc。请参阅此提交“x86：删除 X86_FEATURE_MFENCE_RDTSC”：[https ://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=be261ffce6f13229dad50f59c5e491f933d3167f](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=be261ffce6f13229dad50f59c5e491f933d3167f)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T11:44:10.197

你可以使用它，如下所示：

```
asm volatile (
"CPUID\n\t"/*serialize*/
"RDTSC\n\t"/*read the clock*/
"mov %%edx, %0\n\t"
"mov %%eax, %1\n\t": "=r" (cycles_high), "=r"
(cycles_low):: "%rax", "%rbx", "%rcx", "%rdx");
/*
Call the function to benchmark
*/
asm volatile (
"RDTSCP\n\t"/*read the clock*/
"mov %%edx, %0\n\t"
"mov %%eax, %1\n\t"
"CPUID\n\t": "=r" (cycles_high1), "=r"
(cycles_low1):: "%rax", "%rbx", "%rcx", "%rdx"); 
```

在上面的代码中，第一个 CPUID 调用实现了一个屏障，以避免 RDTSC 指令上方和下方的指令乱序执行。使用这种方法，我们避免在读取实时寄存器之间调用 CPUID 指令

然后第一个 RDTSC 读取时间戳寄存器并将值存储在内存中。然后我们要测量的代码被执行。RDTSCP指令第二次读取时间戳寄存器，保证我们要测量的所有代码执行完毕。随后的两条“mov”指令将 edx 和 eax 寄存器值存储到内存中。最后，CPUID 调用保证了屏障再次被实现，因此后面的任何指令都不可能在 CPUID 本身之前执行。

# asp.net - 在 AutoGeneratedColumns 中显示来自 SQL 单元的 HTML

> ID：12631859
> 
> 赞同：1
> 
> 时间：2012-09-28T00:08:38.730
> 
> 标签：asp.net, sql, vb.net, sql-server-2008

在过去的几个小时里，我一直把头撞在墙上，我似乎无法从 GridView 中的 SQL 单元格中查看 HTML 标记。

当我设置 AutoGenerateColumns=False 时，这很容易，因为我可以在 DataGird ASP.Net 标记中设置 boundfield 属性。但是，如果打开 AutoGenerate，我似乎无法对 gridview 做任何事情。

这是我的vb代码：

```
 Dim sqlcmd As String = "Select [Bugs:], [QC#:] FROM " & """" & datasource & """" & Extra
    Using con As New System.Data.SqlClient.SqlConnection(connexstring)
        con.Open()
            Dim da = New SqlDataAdapter(sqlcmd, con)
            Dim ds = New DataSet()
            da.Fill(ds)
            Gridview1.DataSource = ds
            da.Dispose()
            ds.Dispose()
        con.Close()
    End Using
    GenTables(gen)
    Dbind() 
```

我需要显示的两列中都有 html 标记。

这是我的网格视图：

```
 <asp:GridView ID="GridView1" runat="server" 
        EmptyDataText="There are no data records to display." 
          BackColor="White" BorderColor="#999999" BorderWidth="1px" 
        CellPadding="3" ForeColor="Black" GridLines="Vertical" BorderStyle="Solid" 
        Visible="False" AutoGenerateEditButton="True">
        <AlternatingRowStyle BackColor="#CCCCCC" />
        <Columns>
        </Columns>
        <FooterStyle BackColor="#CCCCCC" />
        <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#999999" ForeColor="Black" 
            HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#000099" ForeColor="White" Font-Bold="True" />
        <SortedAscendingCellStyle BackColor="#F1F1F1" />
        <SortedAscendingHeaderStyle BackColor="#808080" />
        <SortedDescendingCellStyle BackColor="#CAC9C9" />
        <SortedDescendingHeaderStyle BackColor="#383838" />
    </asp:GridView> 
```

有谁知道如何在列已经生成后允许gridview单元格显示html？

谢谢，扎克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:35:34.193

我发誓我看到有人用正确的答案回答了这个问题（我只是不确定他们为什么会删除他们的答案）。

对于所有寻找相同答案的人，这里是：

```
 Try
        For x = 0 To GridView5.Rows.Count
            GridView5.Rows(x).Cells(2).Text = Context.Server.HtmlDecode(GridView5.Rows(x).Cells(2).Text)
        Next
    Catch ex As Exception
    End Try 
```

就这么简单...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:37:34.870

我相信您可以使用`OnPreRender`网格的事件来实现这一点。

# java - 读/写产生奇怪的字符

> ID：12631862
> 
> 赞同：2
> 
> 时间：2012-09-28T00:08:52.607
> 
> 标签：java, file, text, character

我编写了一些简单的 Java 代码来从文本文件中读取字符串，将它们组合起来，然后将它们写回。（请参阅下面的代码段以获取没有更改输出的简化版本）

问题是输入文件和输出文件中的特定字符（- 和 ...）不同。破折号和省略号在输出文件中显示为特殊的、不可读的字符。我不打算改变它们，我认为我应该使用一些特殊的编码来避免这种情况。

我在 Windows 下运行。奇怪的字符出现在多个编辑器（记事本、写字板和 Word）中，而不是破折号和省略号。

```
BufferedReader inFile = new BufferedReader(new FileReader("in.txt"));
PrintWriter out = new PrintWriter(new FileWriter("out.txt"));
String line;
while ((line=inFile.readLine()) != null)
{
     out.println(line);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:12:37.140

**修订**

您的输入已开启`ANSI windows-1252`

所以这应该可以解决问题：

```
public static void main(String[] args) throws Exception {

        File f = new File("in.txt");
        FileInputStream stream = new FileInputStream(f);
        BufferedReader reader = new BufferedReader(new InputStreamReader(stream, Charset.forName("windows-1252")));
        String x;
        BufferedWriter writer = new BufferedWriter(new FileWriter(new File("testing.txt")));

        while((x = reader.readLine()) != null) {
            writer.write(x);
            writer.newLine();
        }

        writer.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T02:12:51.907

我有同样的问题，我所做的是：

*   首先，我想知道所需的编码是什么，在我的情况下，我正在编辑一个现有文件并知道它的编码是什么，我输入下一个命令

    > 文件--mime-encoding in.txt

*   然后知道什么是编码标准，您应该使用相同的标准创建 BufferedWriter 和 BufferedReader

    ```
    public static void main(String[] args) throws Exception {

        File f = new File("in.txt");
        FileInputStream stream = new FileInputStream(f);
        InputStreamReader conexion = new InputStreamReader(stream,"ISO-8859-1");
        BufferedReader reader = new BufferedReader(conexion);
        String x;

        OutputStreamWriter writer = new OutputStreamWriter(new FileOutputStream("in.txt"),"ISO-8859-1");

        while((x = reader.readLine()) != null) {
            writer.write(x);
            writer.newLine();
        }

        writer.close();
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T02:39:06.847

尝试在 BufferedReader 中使用 MimeType，如下所示：

```
 InputStream myFileStream = new FileInputStream("in.txt");
    BufferedReader inFile = new BufferedReader(new InputStreamReader(myFileStream , "utf-8")); 
```

如果上述方法没有帮助，请尝试将 mime 类型值更改为其他 mime 类型，例如“utf-8”。如果还是不行，请分享你的“in.txt”文件。

# actionscript-3 - AS3 for 验证时的循环性能差异

> ID：12631864
> 
> 赞同：1
> 
> 时间：2012-09-28T00:09:41.103
> 
> 标签：actionscript-3

我刚刚从同事那里听说，直接在验证中使用 length 属性，其性能低于将值分配给变量：

```
for(var i:int=0;i<array.length;i++)
   trace(String(i));

for(var i:int=array.length-1;i>-1;i--)
   trace(String(i)); 
```

他们实际上声称，第二个循环将迭代数组“快 90%”，这是真的吗？

这个问题适用于任何语言，但我只对 AS3 行为感兴趣，尤其是 ArrayCollections。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:37:52.450

这个问题的原因比你想象的要有趣得多。

检查以下代码，它包括七个测试：

结果如下：

1.  864 - 与文字常量 int 进行比较
2.  866 - 与 int 比较
3.  1358 - 与向量长度比较（大小固定）
4.  1376 - 与向量长度比较（大小动态）
5.  3159 - 与对象成员比较
6.  3152 - 与静态对象成员比较
7.  11855 - 与数组长度比较

为什么你认为最后一个比其他的慢得多？这并不是因为 Array 每次都重新计算长度，那会很愚蠢。

读这个：

> length 属性：一个非负整数，指定数组中的元素个数。当新元素添加到数组中时，此属性会**自动更新。**当您为数组元素赋值时（例如，my_array[index] = value），如果 index 是一个数字，并且 index+1 大于 length 属性，则 length 属性会更新为 index+1。

原因在于执行

```
//Implementation
public function get length():uint
public function set length(value:uint):void 
```

其他六个测试使用类的常规公共成员。Array 使用 getter 和 setter 函数来检索长度值。如果你继续详细的测试，你会发现函数调用花费了宝贵的时间。当您需要更高的性能时，您有时不得不依赖内联代码。几乎每次都是这样。那是因为处理器必须“跳转”到代码中的不同区域、创建新范围和一些其他原因。

[为什么内联被认为比函数调用更快？](https://stackoverflow.com/questions/4016061/why-is-inlining-considered-faster-than-a-function-call)

如果您检查向量的长度实现，您会发现它只是一个公共成员，与数组（getter 和 setter）函数不同。Getter 和 Setter 具有更好的可扩展性，如果您决定从类继承，它们可以让您的生活更轻松，setter 还可以通过检查值来防止某些错误。在速度方面，没有什么比公共财产更好的了。

```
package regression 
{
    import flash.display.Sprite;
    import flash.utils.getTimer;
    /**
     * ...
     * @author Arthur Wulf White
     */
    public class Check_Loop_Speed_1 extends Sprite
    {
        //BIG_NUMBER == 100,000,000
        public function Check_Loop_Speed_1() 
        {
            var i : int = 0, j : int = 100000000, time : int = 0;
            var vector: Vector.<Boolean> = new Vector.<Boolean>(100000000, true),
                vect2 : Vector.<Boolean> = new Vector.<Boolean>(100000000),
                obj : Object = new TestObject(),
                arr : Array = new Array();

            arr.length = 100000000;

            //test  1
            time = getTimer();
            for (i = 0; i < 100000000; i++) { }
            trace(getTimer() - time);

            //test  2
            time = getTimer();
            for (i = 0; i < j; i++) { }
            trace(getTimer() - time);

            //test  3
            time = getTimer();
            for (i = 0; i < vector.length; i++) { }
            trace(getTimer() - time);

            //test  4
            time = getTimer();
            for (i = 0; i < vect2.length; i++) { }
            trace(getTimer() - time);

            //test  5
            time = getTimer();
            for (i = 0; i < obj.val; i++) { }
            trace(getTimer() - time);

            //test  6
            time = getTimer();
            for (i = 0; i < obj.val2; i++) { }
            trace(getTimer() - time);

            //test  7
            time = getTimer();
            for (i = 0; i < arr.length; i++) { }
            trace(getTimer() - time);
        }

    }

}

class TestObject
{
    public var      val     : uint = 100000000;
    public const    val2    : uint = 100000000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:15:59.590

你的朋友是正确的，但 90% 不会是一致的。

一种测试方法：

```
import flash.utils.getTimer;

var btn:Sprite = new Sprite();
btn.graphics.beginFill(0);
btn.graphics.drawRect(0,0,100,50);
btn.addEventListener(MouseEvent.CLICK,test);
addChild(btn);

var array:Array = new Array();
var arraySize:int = 100000;  

for(var i:int=0;i < arraySize;i++){
    array.push(i);
}

function test(e:Event):void {
    var i:int = 0; //initialize before getTimer so all things are equal
    var curTime:Number = 0;

    curTimer = getTimer();
    for(i=0;i<array.length;i++){
        doSomething(i);
    }

    trace("First Took: ", (getTimer() - curTime) + "ms"); 

    curTime = getTimer();
    for(i=array.length-1;i>-1;i--){
        doSomething(i);
    }

    trace("Second Took: ", (getTimer() - curTime) + "ms");   
};

function doSomething(index:int):void {
    index = index * 2; //some arbitrary function - don't trace!!!
} 
```

# android - 实现读取数据的最佳方式

> ID：12631866
> 
> 赞同：1
> 
> 时间：2012-09-28T00:09:59.150
> 
> 标签：android, io

我目前正在制作我的第一个应用程序，并且对实现它的最佳方法有一些疑问。

在主菜单上有一个按钮，当单击它时，我希望它显示从文本文件读取的列表中的项目。我应该将相关信息添加到 ArrayList 中以在列表中显示信息，还是获取信息然后创建一个对象，然后将该对象添加到 ArrayList。

我需要保存为下一个活动读入的信息，因为我想显示有关已在多个其他活动中单击的项目的更多信息。

唯一的问题是一些文件包含多达 6000 行信息，我不确定最佳方法。

我知道 SQL Lite 是一种选择，但文件格式非常模糊。

另一件事是，根据单击的按钮不同，它会从不同的文件中读取。

我想避免每个活动都有很多重复的代码，任何人都可以帮助我以最佳方式组织课程等。

谢谢你。

列表只需要前两项，但我需要其他活动的其余信息。

可能还必须写入某些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:27:01.163

我开发了一个程序，它必须从文本文件（20000 行）中读取信息。一开始我只有1个文本文件，但问题是java不能只跳转到指定的行并快速读取它，所以应用程序需要一些时间。然后我决定将数据分成 20 个文件（每个文件 1000 行），效果很好。如果我是你，我将在 assets 文件夹中有 3 个文件，每个文件 2000 行（或 6 个 1000 行）。

# actionscript-3 - 让 AS3 功能在时间轴的任何地方运行？每 60 秒

> ID：12631867
> 
> 赞同：1
> 
> 时间：2012-09-28T00:10:13.790
> 
> 标签：actionscript-3, flash

我能以某种方式制作一个在所有时间线和任何地方运行的函数吗？

哪个每 60 秒运行一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:53:04.837

使用[`flash.utils.setInterval`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#setInterval%28%29)功能：

```
setInterval(functionToCall , 60000 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T01:20:29.213

您的意思是您希望每 60 秒运行一次函数并跟踪从项目中的任何位置调用该函数的时间吗？

为此，您可以简单地从项目的根目录调度一个事件（例如 MainTimeline）：

```
var timer:Timer = new Timer(60000);

timer.start();
timer.addEventListener(TimerEvent.TIMER, handleMinuteElapsed);

function handleMinuteElapsed(e:TimerEvent):void
{
    // Create and dispatch a custom event.
    // You should consider extending the Event class and using your Event instead,
    // this is primarily for demonstration and ease of implementation.
    var event:Event = new Event("MinuteElapsed");
    dispatchEvent(event);
} 
```

现在，您可以在任何时间线的项目中的任何位置使用它：

```
root.addEventListener("MinuteElapsed", handler);

function handler(e:Event):void
{
    // Do something in response to the event being triggered.
    //
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:07:28.397

转到最根场景，新建一个图层并添加功能。使用 MovieClip(root).functionName() 从任何地方调用它；

# javascript - 为什么在 javascript 上扩展原生而不是 ruby 被认为是不好的做法？

> ID：12631876
> 
> 赞同：2
> 
> 时间：2012-09-28T00:10:39.153
> 
> 标签：javascript, ruby, mootools

在我看来，扩展原生 ruby​​ 类会被认为更危险。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:13:55.053

在 Ruby 中也要小心。这只是语言社区的普遍观点问题。从技术上讲，Ruby 没有理由比 JavaScript 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:37:32.830

我想这主要与 JavaScript 内置在浏览器中这一事实有关。浏览器已经有足够多的错误和问题，而无需您对本机对象进行更改。此外，某些库可能依赖于可能受您的更改影响的核心对象。

# emacs - 在 emacs 中启用模式

> ID：12631880
> 
> 赞同：2
> 
> 时间：2012-09-28T00:11:20.060
> 
> 标签：emacs, elisp

我刚刚开始定制 emacs。如果我想在 emacs 中启用某种模式（全局），我需要在 .emacs 文件中放入一些代码。对于视觉模式，代码将是 (global-visual-line-mode t)。但是相同的语法不适用于 show-paren-mode 之类的东西。那么有没有办法识别必须用于全局启用模式的语法？还是必须知道的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:52:28.860

使用 Emacs 帮助系统：

```
M-x describe-function RET show-paren-mode RET 
```

...或使用菜单栏中的“帮助”菜单：

```
Help => Describe => Describe Function... show-paren-mode RET 
```

,,,或键盘绑定：

```
C-h f describe-function RET show-paren-mode RET 
```

最后，考虑使用 Emacs 'custom' 包 ( `M-x customize RET`)，它将`.emacs`为您在文件中维护许多设置。或者对于特定选项，从菜单栏中：

```
Options => Customize Emacs => Specific Option... 
```

此外，在输入 minibuffer 时，输入零个或多个字符后跟`TAB`将提供完成选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T07:59:43.410

通常有用的答案是使用`customize`. 他们你不必知道确切的语法（甚至实际上是任何 Elisp）；只需勾选复选框并启用所有会话。

如果你真的关心 Elisp，遗憾的是有三种不同的约定。

*   正如您所发现的，许多模式都有类似的东西`(activate-mode)`or `(name-of-mode t)`。
*   其他人有一个切换，其中一些使用可选的数字参数来不切换，但打开或关闭；`(toggle-mode -1)`无条件开启。
*   该模式可能有一个与之关联的变量，因此您`(setq mode-variable t)`会知道并且该模式会知道自己激活。这是一个边缘案例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T00:30:46.347

我相信次要模式是否是全局的仅特定于该模式，因此要回答您的问题，您必须知道哪些是全局的，哪些是特定于缓冲区的。

我不太确定如何编写代码来执行此操作（我对 Emacs Lisp 有点陌生），但是您可以编写一个挂钩来启用次要模式，只要您使用您选择的特定主要模式。查看这个的 Emacs 信息页面，一切都在那里。

据我了解，非全局的次要模式是特定于缓冲区的，因为它们可能不方便（例如编写代码时的 flyspell 模式：D）

# xaml - Windows 8 Metro 应用程序在恢复时冻结？

> ID：12631881
> 
> 赞同：0
> 
> 时间：2012-09-28T00:11:26.033
> 
> 标签：xaml, windows-8, windows-runtime, windows-store-apps, freeze

我正在开发适用于 Windows 8 的 Metro Style 应用程序。如果我转到开始屏幕并返回我的两个主页，它们就会冻结。

两个页面中较简单的只包含一个文本框、一个按钮、几个文本块和几个超链接按钮。文本框显示和设置设置。

我在恢复或暂停事件中没有代码，并且恢复事件无论如何都不会触发。

调试器中没有出现异常。一个新的空白页面在简历上工作正常，但是从旧页面复制 xaml 后，问题仍然存在。以前有没有人遇到过这个问题。我知道这不是太多信息，但我找不到任何其他详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T23:12:42.177

对于任何有同样问题的人，我找到了解决方案。问题出在 c# 中，而不是 xaml 中。我使用 Dispatcher.RunAsync 一遍又一遍地运行相同的方法。

```
void Animate()
{
    ...
    Dispatcher.RunAsync(CoreDispatcherPriority.Normal, new DispatchedHandler(Animate));
} 
```

我改用了 DispatcherTimer，它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:29:33.090

我想上次我看到类似的东西 - 重新启动 Windows 有帮助，但检查应用程序是否在调试器中重新启动肯定会有所帮助。您可以检查 Window.Current.Activated 事件是否触发。

# javascript - 修复嵌入式音频以在 iOS 上工作

> ID：12631884
> 
> 赞同：1
> 
> 时间：2012-09-28T00:11:52.147
> 
> 标签：javascript, html, ios, audio

我已经了解到我正在使用的那种嵌入式音频在许多移动浏览器上都被禁用了——我可以对以下代码进行任何简单的调整以使某些东西正常工作吗？我知道这之前已经介绍过，但是作为一个新手，我很难将答案应用于我的情况。

我在 html 中有这个

```
<div id = "sound"></div> 
```

这在javascript中

```
function playSound(soundfile) {
document.getElementById("sound").innerHTML=
"<embed src=\""+soundfile+"\" hidden=\"true\"
autostart=\"true\" loop=\"false\" />";} 
```

soundfile 参数是从脚本的另一部分返回的——它基本上是一个耳朵训练程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:31:49.050

而不是使用嵌入标签，而是尝试 HTML5 音频标签。此外，还要检查文件格式。

你使用什么文件格式？

# php - PHP驱动的二维码生成器

> ID：12631886
> 
> 赞同：0
> 
> 时间：2012-09-28T00:12:11.587
> 
> 标签：php

此 QR 码生成器仅允许您为一个内容字段生成。我想添加一种方法来生成您可以在此处使用 php 生成的所有信息：http: [//zxing.appspot.com/generator/](http://zxing.appspot.com/generator/)

我希望用户能够对 MECARD 和 vCard 进行编码

这是我到目前为止所拥有的：

```
<div id="generator">
    <form target="qrcode-frame" action="gen.php" method="post">
      <fieldset>
        <legend>Size:</legend>
         <input type="radio" name="size" value="150x150" checked>150x150<br>
         <input type="radio" name="size" value="200x200">200x200<br>
         <input type="radio" name="size" value="250x250">250x250<br>
         <input type="radio" name="size" value="300x300">300x300<br>
      </fieldset>
      <fieldset>
        <legend>Encoding:</legend>
        <input type="radio" name="encoding" value="UTF-8" checked>UTF-8<br>
        <input type="radio" name="encoding" value="Shift_JIS">Shift_JIS<br>
        <input type="radio" name="encoding" value="ISO-8859-1">ISO-8859-1<br>
      </fieldset>
      <fieldset>
        <legend>Content:</legend>
        <textarea name="content"></textarea>
      </fieldset>         
      <fieldset>
        <legend>Error correction:</legend>
        <select name="correction">
            <option value="L" selected>L</option>
            <option value="M">M</option>
            <option value="Q">Q</option>
            <option value="H">H</option>
        </select>
      </fieldset>         
      <input type="submit" value="Generate"></input>
    </form>
</div>  
<div id="result">
    <iframe name="qrcode-frame" frameborder="0"  id="qrcode" src="gen.php" height="315px;" width="350px"></iframe>
</div> 
```

这在另一个文件中：

```
 <?php
if(isset($_REQUEST['content'])){
    //capture from the form
    $size          = $_REQUEST['size'];
    $content       = $_REQUEST['content'];
    $correction    = strtoupper($_REQUEST['correction']);
    $encoding      = $_REQUEST['encoding'];

    //form google chart api link
    $rootUrl = "https://chart.googleapis.com/chart?cht=qr&chs=$size&chl=$content&choe=$encoding&chld=$correction";

    //print out the image
    echo '<img src="'.$rootUrl.'">';
}
?> 
```

这很好用，但非常有限。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:19:07.233

我们有重要的参数

```
cht=qr                                  Required -> Specifies a QR code
chs=<width>x<height>                    Required -> Image size
chl=<data>                              Required -> more than 2K bytes (minus the other URL characters), you will have to send your data using POST
choe=<output_encoding>                  Optional -> UTF-8 , Shift_JIS , ISO-8859-1
chld=<error_correction_level>|<margin>  Optional ->

error_correction_level
L - [Default] Allows recovery of up to 7% data loss
M - Allows recovery of up to 15% data loss
Q - Allows recovery of up to 25% data loss
H - Allows recovery of up to 30% data loss

margin - The width of the white border around the data portion of the code. 
```

[更多细节在这里](https://developers.google.com/chart/infographics/docs/qr_codes#details)

所以我们有

1-网址

```
$data = 'http://chart.apis.google.com/chart?';  // url 
```

2- 参数

```
$data .= 'cht=qr&chs=' . $Barcode_size . '&chld=' . $Error_correction . '&choe=' .$Character_encoding . '&chl=' . $Encoding . ':'; // parameters 
```

3- 我们的数据

```
$data .= 'name:' . $Name . ';Company:' . $Company . ';Title:' . $Title . ';Phone_number:' . $Phone_number . ';Email:' . $Email . ';Address:' . $Address . ';Website:' . $Website . ';Memo:' . $Memo . ';;'; 
```

结果会是这样

```
 http://chart.apis.google.com/chart?cht=qr&chs=120x120&chld=L&choe=UTF-8&chl=MECARD:name:MyName;Company:MyCo;Title:ttt;Phone_number:ttt;Email:ttt;Address:ttt;Website:tt;Memo:ttt;; 
```

注意数据：

name MyName -> 这样写 -> name:MyName;

数据名称：数据值；// 你可以只发送没有名字的值

在行尾你会发现两个分号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:03:30.860

你可以在这里找到详细信息[https://developers.google.com/chart/infographics/docs/qr_codes#details](https://developers.google.com/chart/infographics/docs/qr_codes#details)

和这里的例子[http://www.cognation.net/QR/Google_api.htm](http://www.cognation.net/QR/Google_api.htm)

如果您需要html代码和php代码，请用您需要创建的数据写评论

我将为您创建一个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T03:10:42.823

这个例子对我很好，你必须处理错误（空文本框）

例子：

必须包含 jquery.js html ：

```
<html>

<head>

<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<script src="jquery.js" type="text/javascript">    </script>

<script language="JavaScript" type="text/javascript" >

function get_url()
{

$.ajax(
{
type: 'POST',
url: 'gen.php',
dataType: "html",
data: {Name: $('#Name').val(), Company: $('#Company').val(),Title: $('#Title').val(), Phone_number: $('#Phone_number').val(),Email: $('#Email').val(), Address: $('#Address').val(),Address_2 : $('#Address_2').val(), Website: $('#Website').val(),Memo: $('#Memo').val(), Encoding: $('#Encoding option:selected').val(), Barcode_size: $('#Barcode_size  option:selected').val(), Error_correction: $('#Error_correction option:selected').val(), Character_encoding: $('#Character_encoding option:selected').val()},
success: function(msg) {
$('#myurl').val(msg);
$('#img').attr('src',msg);

} });

}

</script>

<title>
</title>

</head>

<body>

<form action="javascript:get_url();">
<table cellspacing="0" cellpadding="0" id="mainpanel">    <tbody>
<tr>
<td align="left" style="vertical-align: top;">
<table id="leftpanel">    <colgroup>    <col>    </colgroup>    <tbody>
<tr>
<td>&nbsp;    </td>
</tr>
<tr>
<td>
<table>    <colgroup>    <col class="firstColumn">    <col class="secondColumn">    </colgroup>    <tbody>
<tr>
<td class="firstColumn">Name
</td>
<td class="secondColumn">
<input type="text" id="Name">
</td>
</tr>
<tr>
<td class="firstColumn">Company
</td>
<td class="secondColumn">
<input type="text" id="Company">
</td>
</tr>
<tr>
<td class="firstColumn">Title
</td>
<td class="secondColumn">
<input type="text" id="Title">
</td>
</tr>
<tr>
<td class="firstColumn">Phone number
</td>
<td class="secondColumn">
<input type="text" id="Phone_number">
</td>
</tr>
<tr>
<td class="firstColumn">Email
</td>
<td class="secondColumn">
<input type="text" id="Email">
</td>
</tr>
<tr>
<td class="firstColumn">Address
</td>
<td class="secondColumn">
<input type="text" id="Address">
</td>
</tr>
<tr>
<td class="firstColumn">Address 2
</td>
<td class="secondColumn">
<input type="text" id="Address_2">
</td>
</tr>
<tr>
<td class="firstColumn">Website
</td>
<td class="secondColumn">
<input type="text" id="Website">
</td>
</tr>
<tr>
<td class="firstColumn">Memo
</td>
<td class="secondColumn">
<input type="text" id="Memo">
</td>
</tr>
<tr>
<td class="firstColumn">Encoding
</td>
<td class="secondColumn">
<select id="Encoding">

<option selected value="MECARD">MECARD    </option>

<option value="vCard">vCard    </option>
</select>
</td>
</tr>    </tbody>
</table>
</td>
</tr>
<tr>
<td>

<span id="errorMessageID">&nbsp;
</span>
</td>
</tr>
<tr>
<td>
<table>    <colgroup>    <col class="firstColumn">    <col class="secondColumn">    </colgroup>    <tbody>
<tr>
<td class="firstColumn">Barcode size
</td>
<td class="secondColumn">
<select id="Barcode_size">

<option selected value="120">Small    </option>

<option value="230">Medium    </option>

<option value="350">Large    </option>
</select>
</td>
</tr>
<tr>
<td class="firstColumn">Error correction
</td>
<td class="secondColumn">
<select id="Error_correction">

<option selected value="L">L    </option>

<option value="M">M    </option>

<option value="Q">Q    </option>

<option value="H">H    </option>
</select>
</td>
</tr>
<tr>
<td class="firstColumn">Character encoding
</td>
<td class="secondColumn">
<select id="Character_encoding">

<option selected value="UTF-8">UTF-8    </option>

<option value="ISO-8859-1">ISO-8859-1    </option>

<option value="Shift_JIS">Shift_JIS    </option>
</select>
</td>
</tr>    </tbody>
</table>
</td>
</tr>
<tr>
<td>
<table>    <colgroup>    <col class="firstColumn">    <col class="secondColumn">    </colgroup>    <tbody>
<tr>
<td class="firstColumn">&nbsp;
</td>
<td class="secondColumn">    <button type="submit" >Generate →    </button>
</td>
</tr>    </tbody>
</table>
</td>
</tr>    </tbody>
</table>
</td>
<td align="left" style="vertical-align: top;">
<table cellspacing="0" cellpadding="0">    <tbody>
<tr>
<td align="left" style="vertical-align: top;">

<div id="imageresult">

<div id="innerresult">    <img id="img" src="" >
</div>
</div>
</td>
</tr>
<tr>
<td align="left" style="vertical-align: top;">

<div class="gwt-HTML" id="downloadText" style="">
    embed with this URL:
</div>
</td>
</tr>
<tr>
<td align="left" style="vertical-align: top;">
<input name="myurl" id="myurl" type="text" class="gwt-TextBox" id="urlresult" style="">
</td>
</tr>
<tr>
<td align="left" style="vertical-align: top;">&nbsp;    </td>
</tr>    </tbody>
</table>
</td>
</tr>    </tbody>
</table>
</form>

</body>
</html> 
```

php：

```
<?php
$post = (!empty ($_POST)) ? true : false;
if (!$post) {
    die();
}
$data = '';
@ $Name = $_POST['Name'];
@ $Company = $_POST['Company'];
@ $Title = $_POST['Title'];
@ $Phone_number = $_POST['Phone_number'];
@ $Email = $_POST['Email'];
@ $Address = $_POST['Address'];
@ $Address_2 = $_POST['Address_2'];
@ $Website = $_POST['Website'];
@ $Memo = $_POST['Memo'];
@ $Encoding = $_POST['Encoding'];
@ $Barcode_size = $_POST['Barcode_size'];
@ $Error_correction = $_POST['Error_correction'];
@ $Character_encoding = $_POST['Character_encoding'];
$Barcode_size = $Barcode_size . "x" . $Barcode_size;
$data = 'http://chart.apis.google.com/chart?';  // url
$data .= 'cht=qr&chs=' . $Barcode_size . '&chld=' . $Error_correction . '&choe=' .$Character_encoding . '&chl=' . $Encoding . ':'; // required data
$data .= 'name:' . $Name . ';Company:' . $Company . ';Title:' . $Title . ';Phone_number:' . $Phone_number . ';Email:' . $Email . ';Address:' . $Address . ';Website:' . $Website . ';Memo:' . $Memo . ';;'; // your data   -> name :value ; and at the end of the line -> ;
echo $data;
?> 
```

# facebook - facebook - JavaScript sdk 我在未经许可的情况下获取朋友列表.. 这是对的吗？

> ID：12631888
> 
> 赞同：0
> 
> 时间：2012-09-28T00:12:26.220
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我一直在测试一个应用程序，我的测试用户给了应用程序基本和 read_friendlists 权限。后来我转到我的用户帐户并删除了该应用程序的 read_friendlist 权限，但我仍然能够通过 sdk 获取列表。这是我的帐户设置滞后的情况吗？或者您是否可以在未经明确许可的情况下通过以下方式获取好友列表？

```
 function authSuccess() {
    FB.api('/me/friends', function (result) {
        if (result.data) {
            $.each(result.data, function (index, friend) {
                alert(friend.name + ' has id:' + friend.id);
            });
        }else{}
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T01:59:15.453

`read_friendlists` [权限](https://developers.facebook.com/docs/authentication/permissions/)用于在连接处访问用户的自定义[好友列表](https://www.facebook.com/help/135312293276793/)，而不是在`/USER_ID/friendlists`连接处的好友列表`/USER_ID/friends`

这按预期工作-检查[用户文档](https://developers.facebook.com/docs/reference/api/user/)以获取用户对象的字段和连接列表以及访问每个对象所需的权限（尽管[权限](https://developers.facebook.com/docs/authentication/permissions/)文档也涵盖了很多内容）

# c++ - 非常简单的 x64 程序集/C++ 应用程序中未解决的外部错误

> ID：12631894
> 
> 赞同：0
> 
> 时间：2012-09-28T00:13:47.720
> 
> 标签：c++, assembly

我开始学习汇编语言是因为我对图像处理和 C++ 感兴趣，幸运的是我在 youtube 上找到了一系列关于使用汇编语言和 C++ 进行图像处理的视频。

但是当我尝试实现我的第一个应用程序时，我的 GetValueFromAsm 函数中出现了未解决的外部问题，因此我需要您的帮助来找出我的错误。

这是我的 C++ 代码

```
#include <iostream>
#include <conio.h>

extern "C" int GetValueFromAsm();

int main()
{
     std::cout<<"Value From Asm "<< GetValueFromAsm()<<std::endl;
    _getch();
     return 0;
} 
```

这是我的汇编代码

```
.code
GetValueFromAsm proc
    mov rax,30
    ret
GetValueFromAsm endp
end 
```

我正在使用 VS 2010/Windows 7 64 位和 x64 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T08:05:10.617

“马上”想到两种可能性：

*   您实际上是在编译汇编代码并将其与程序的其余部分链接吗？
*   可能会修饰 C 符号，例如使用“_GetValueFromAsm”的编译器

# python - 如何遍历嵌套列表以从 1 到 5 对每个列表进行编号：

> ID：12631899
> 
> 赞同：3
> 
> 时间：2012-09-28T00:14:06.337
> 
> 标签：python, list, loops, for-loop

所以我正在为一项任务制作游戏，我需要制作一个函数，该函数接受一个嵌套列表，表示游戏板和每行从 1 到 5 的数字（用于坐标，例如 F4、G3 等）。

例如，代表棋盘的列表如下所示：

```
board = [['S', 'S', 'X', 'S', 'S'],
         ['.', '.', '.', '.', '.'],
         ['.', '.', 'T', '.', '.'],
         ['.', '.', '.', '.', '.'],
         ['S', 'S', 'Y', 'S', 'S']] 
```

我需要在每个列表的第一个位置添加一个数字，以便得到如下所示的内容：

```
board = [[1, 'S', 'S', 'X', 'S', 'S'],
         [2, '.', '.', '.', '.', '.'],
         [3, '.', '.', 'T', '.', '.'],
         [4, '.', '.', '.', '.', '.'],
         [5, 'S', 'S', 'Y', 'S', 'S']] 
```

并像这样显示它：

```
1 S S X S S
2 . . . . .
3 . . T . .
4 . . . . .
5 S S Y S S 
```

我目前这样做的方法是这样的：

```
def display_board(board):
     bottomLetters  = [" ", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K"]
     print board
     counter = int(0)
     for row in board:
         counter += int(1)
         row.insert(0, counter)
         for positon in row:
             print positon,
             print 
```

这几乎可以工作，但我得到一个奇怪的输出：

```
1 S S X S S
2 . . . . .
3 . . T . .
4 2 . . . . .
5 S S Y S S 
```

或者只是游戏板列表本身：

```
board = [[1, 'S', 'S', 'X', 'S', 'S'],
         [4, 2, '.', '.', '.', '.', '.'],
         [3, '.', '.', 'T', '.', '.'],
         [4, 2, '.', '.', '.', '.', '.'],
         [5, 'S', 'S', 'Y', 'S', 'S']] 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:41:47.117

不是真正的答案 - 而是一些建议。

你不需要`int(0)`你可以使用`0`. 此外，Python 已经提供了一种内置方法来“编号”序列中的项目，称为`enumerate`. 另请查看`str.join`使格式化文本更易于打印的方法。

使用上述内容，您可以将代码减少为：

```
board = [['S', 'S', 'X', 'S', 'S'],
         ['.', '.', '.', '.', '.'],
         ['.', '.', 'T', '.', '.'],
         ['.', '.', '.', '.', '.'],
         ['S', 'S', 'Y', 'S', 'S']]

def display_board(board):
    for rowno, items in enumerate(board, start=1):
        print rowno, ' '.join(items)

display_board(board) 
```

这不仅更 Pythonic，而且更清楚您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:47:50.157

你得到这个错误的原因是你向我们展示的板实际上并不是你定义的......我正确吗？

注意第二行和第四行看起来是一样的。在您的数据结构中，它们最终成为*完全相同的对象*，这就是为什么修改第二行也会影响第四行。

您是否以任何方式单独初始化行，然后将它们分配给电路板，重复第二行？在这种情况下，请注意您不是在*复制*它们，而是实际上存储了对同一对象的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:46:17.613

我似乎无法复制您的结果，但这里突出的问题是您每次运行时都在修改板（在计数器之前）`display_board()`。一旦您显示它，任何期望您的板为原始格式的代码都会中断。

这是我将如何处理它：

```
def display_board(board):
  for counter, row in enumerate(board, start=1):
    print counter, " ".join(row)
  print " ".join(" ABCDEFGHIJK"[:len(board[0])+1]) 
```

样本输出：

```
>>> display_board(board)
1 S S X S S
2 . . . . .
3 . . T . .
4 . . . . .
5 S S Y S S
  A B C D E 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:45:18.543

我不会更改数据结构只是为了节省一些显示它的工作量并同时破坏逻辑。数字不是棋盘的一部分，不应与游戏数字混合。我会做类似的事情：

```
In [1]: %paste
board = [['S', 'S', 'X', 'S', 'S'],
         ['.', '.', '.', '.', '.'],
         ['.', '.', 'T', '.', '.'],
         ['.', '.', '.', '.', '.'],
         ['S', 'S', 'Y', 'S', 'S']]
## -- End pasted text --

In [2]: from string import ascii_uppercase

In [3]: def display(b):
    for i, row in enumerate(b, 1):
        print i, ' '.join(row)
    print ' ', ' '.join(x for _, x in zip(row, ascii_uppercase))

In [4]: display(board)
1 S S X S S
2 . . . . .
3 . . T . .
4 . . . . .
5 S S Y S S
  A B C D E 
```

# javascript - 在函数之外声明变量

> ID：12631900
> 
> 赞同：1
> 
> 时间：2012-09-28T00:14:09.053
> 
> 标签：javascript, function, variables

JavaScript 中可以在函数之外声明哪些变量？我在理解以下代码时遇到了一些麻烦。

此代码不影响`subtitle`.

```
var element = window.document.getElementById("subtitle");
var test = "Changed!";

function check(){
    element.innerHTML = test;
} 
```

但是，如果我`element`在函数内部移动，则`subtitle`元素将变为“已更改！”。

```
var test = "Changed!";

function check()
{
    var element = window.document.getElementById("subtitle");
    element.innerHTML = test;
} 
```

是否有规定`window`不能将对象分配给`var`函数外部，代码中是否有错误，或者我只是不理解 JavaScript 变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:17:07.247

全局变量可以包含任何数据类型。第一个显示的代码可能不起作用，因为在您获取 的值时没有加载文档`element`，而第二个代码正在工作，因为在`check()`调用时加载了文档。

如果你想使用全局变量，试试这个：

```
var element;
var test = "Changed!";

window.onload = function() {
    element = window.document.getElementById("subtitle");
    check();
} 
```

# red5 - 使用 Xuggler 和 red5 的 RTSP 到 RTMP - 无法在 Container.cpp 中打开输出流

> ID：12631902
> 
> 赞同：1
> 
> 时间：2012-09-28T00:14:39.697
> 
> 标签：red5, vlc, rtmp, ip-camera, xuggler

我的要求是将 IPCamera RTSP 流传输到 RTMP 流。我已经使用 livemedia 555 + VLC + Red5 + Xuggler 设置了一个应用程序。我在本地成功地使用 vlc 作为 sdp 文件进行多流处理。现在问题出在red5 + xuggler方面

我正在使用[steamStream](http://www.red5wiki.com/wiki/SteamStream) red5 应用程序进行重新调整。错误如下

```
[INFO] [NioProcessor-1] net.arulraj.ipcam.Application - SsPlaybackSecurity isPlaybackAllowed() called.  name is: guest
[INFO] [NioProcessor-1] net.arulraj.ipcam.Application - streamSubscriberStart() called... stream: 2d5fd53d-ab1d-46b2-ac23-a60d9e9c7d8e
[INFO] [NioProcessor-1] net.arulraj.ipcam.Application - streamPlaylistItemPlay() called... stream: 2d5fd53d-ab1d-46b2-ac23-a60d9e9c7d8e | item: guest | isLive?: Yes
[INFO] [NioProcessor-1] net.arulraj.ipcam.Application - Stream subscriber count is zero; starting a new ReStreamer.  Stream: guest
[INFO] [NioProcessor-1] net.arulraj.ipcam.Application - ReStreamer constructor called.
[INFO] [NioProcessor-1] net.arulraj.ipcam.Application - Client connecting; incrementing stream count for stream 'guest' from 0 to 1.
[INFO] [Thread-3] net.arulraj.ipcam.Application - ReStreamer thread starting.  ID: 38
[DEBUG] [Thread-3] net.arulraj.ipcam.Application - ReStreamer: About to register output stream with provider service: guest
[DEBUG] [Thread-3] net.arulraj.ipcam.Application - ReStreamer: Successfully registered and started output stream: guest
[INFO] [Thread-3] net.arulraj.ipcam.Application - Publishing stream from input: /opt/red5-0.9.1/webapps/IPcameraStreamer/sdpdescriptors/guest.sdp
[DEBUG] [Thread-3] net.arulraj.ipcam.Application - Publishing stream to output: redfive:guest
[DEBUG] [Thread-3] net.arulraj.ipcam.Application - Got packet with key frame data; setting up coders: guest
[ERROR] [Thread-3] com.xuggle.xuggler - URL: redfive:guest; Error: could not open file (../../../../../../../csrc/com/xuggle/xuggler/Container.cpp:513)
[INFO] [Thread-3] net.arulraj.ipcam.Application - Parameters: com.xuggle.xuggler.IMetaData@739036864[]
[INFO] [Thread-3] net.arulraj.ipcam.Application - Parameters Rejected: com.xuggle.xuggler.IMetaData@738595792[]
[ERROR] [Thread-3] net.arulraj.ipcam.Application - Exception occurred during restreaming: java.lang.RuntimeException: Could not open output container at URL: redfive:guest
[INFO] [Thread-3] net.arulraj.ipcam.Application - ReStreamer thread exiting.  ID: 38 
```

*   本地多重流是使用 vlc 服务器完成的
*   使用 vlc 创建的 sdp 文件
*   Red5 读取 sdp 文件作为输入
*   现在我在将 sdp 输入写入 rtmp 输出时遇到了错误。

[Container.cpp](https://github.com/xuggle/xuggle-xuggler/blob/master/csrc/com/xuggle/xuggler/Container.cpp)文件第 513 行错误。

我在用

*   CentOS 6 x86_64 操作系统
*   Java 1.6
*   Xuggler 5.4
*   红色5-0.9.1

我按照本教程[http://flance.onego.ru/2010/08/02/238](http://flance.onego.ru/2010/08/02/238)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T18:27:44.070

我是那篇文章的作者... 8）。
我不得不使用来自 SVN 的 Red5 修订版 3894。Red5 的下一个版本对我不起作用。

# objective-c - 从 json 数组创建一个强类型对象

> ID：12631905
> 
> 赞同：1
> 
> 时间：2012-09-28T00:15:05.700
> 
> 标签：objective-c, ios, json

我有一个要填充的数组，我又想将其放入强类型对象中。我有这个代码已经填充了 json 数据，我想用这个数据填充我的 Setting 对象。我怎样才能做到这一点？

JSON响应：

得到回应：

```
[
   {
      "CatalogID":2377,
      "Category":"Frozen",
      "Facings":true,
      "ID":13,
      "LastUpdateDateTime":"\/Date(1348681365520-0700)\/",
      "Quantity":true
   },
   {
      "CatalogID":2377,
      "Category":"Fruit",
      "Facings":true,
      "ID":10,
      "LastUpdateDateTime":"\/Date(1348692069843-0700)\/",
      "Quantity":false
   },
   {
      "CatalogID":2377,
      "Category":"Salads",
      "Facings":true,
      "ID":12,
      "LastUpdateDateTime":"\/Date(1348681354807-0700)\/",
      "Quantity":true
   },
   {
      "CatalogID":2377,
      "Category":"Vegetables",
      "Facings":true,
      "ID":11,
      "LastUpdateDateTime":"\/Date(1348681334523-0700)\/",
      "Quantity":true
   }
] 
```

Objective-C

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection {

NSError *error = nil;
// Get the JSON data from the website

id result = [NSJSONSerialization JSONObjectWithData:receivedData options:kNilOptions error:&error];

NSStringEncoding responseEncoding = NSUTF8StringEncoding;
if ([response textEncodingName]) {
    CFStringEncoding cfStringEncoding = CFStringConvertIANACharSetNameToEncoding((__bridge CFStringRef)[response textEncodingName]);
    if (cfStringEncoding != kCFStringEncodingInvalidId) {
        responseEncoding = CFStringConvertEncodingToNSStringEncoding(cfStringEncoding);
    }
}

if(receivedData)
{
    NSString *dataString = [[NSString alloc] initWithData:receivedData encoding:responseEncoding];

    NSLog(@"Got response as %@", dataString);

}

if ([result isKindOfClass:[NSArray class]]) {

    for (NSArray *item in result) {
        NSArray *items = [item valueForKey:@"ID"];

        [_settings addObject:items];

        // Try to populate Setting object
        Setting *setting = (Setting *)[_settings objectAtIndex:0];

        NSLog(@"Setting: %@", setting);
    }
}
else {
    NSDictionary *jsonDictionary = (NSDictionary *)result;

    for(NSDictionary *item in jsonDictionary)
        NSLog(@"Item: %@", item);
}

NSLog(@"Finished");
} 
```

设置.h

```
@interface Setting : NSObject {

NSString *_settingsID;
NSString *_catalogID;
NSString *_category;
NSString *_facings;
NSString *_quantity;
}

@property (nonatomic, retain) NSString *settingsID;
@property (nonatomic, retain) NSString *catalogID;
@property (nonatomic, retain) NSString *category;
@property (nonatomic, retain) NSString *facings;
@property (nonatomic, retain) NSString *quanity;

- (Setting *)initWithName:(NSString *)settingsID desc:(NSString *)category;

@end 
```

设置.m

```
@implementation Setting

@synthesize settingsID = _settingsID;
@synthesize catalogID = _catalogID;
@synthesize category = _category;
@synthesize facings = _facings;
@synthesize quanity = _quantity;

- (Setting *)initWithName:(NSString *)settingsID desc:(NSString *)category CategoryID:(NSString *)catalogID Facings:(NSString *)facings Quantity:(NSString *)quantity {

if ((self = [super init])) {

    self.settingsID = settingsID;
    self.catalogID = catalogID;
    self.category = category;
    self.facings = facings;
    self.quanity = quantity;
}

return self;

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:25:51.100

您发布的代码中有很多错误。我将通过它们向你展示如何正确地做到这一点，但我强烈建议你研究 NSArray、NSDictionary 和 NSString 的文档，以熟悉这些类中可用的方法——你真的不能甚至在不了解这些类的情况下开始编写体面的代码。

1）我真的不知道你想用字符串编码的东西和if（receivedData）之后的代码做什么。无需将 JSON 转换为字符串，JSONObjectWithData: 方法将您的数据转换为数组（更准确地说，是字典数组），而这正是您需要使用的。

2) 在您的 for-in 循环中，项目应输入为 NSDictionary，而不是数组。数组中的每个项目都是您发布的 JSON 中 {} 之间的整个字典。

3) 你在 for-in 循环中的所有代码都是错误的——我不知道你想用它做什么。您需要做的是获取字典中各种键的值，分配初始化设置的实例，并在该扩展的 init 方法中传递值。

4) 您的设置对象仅在您的 JSON 数据中保留其中一个字典的值，因此您需要创建另一个数组来为响应中的每个字典保存一个设置对象（我在下面的示例中将其称为 settingsArray）。

5) 你在 Setting 类中的 init 方法在 .h 和 .m 中是不同的，它们都应该看起来像 .m 版本，除了每个冒号后面的名称部分应该小写而不是大写。

所以，这是我认为可行的代码。由于我无权访问您的 JSON，因此无法对其进行测试，因此请尝试一下，然后将结果返回给我。

因此，在您进行下载的类中，您应该在 connectionDidFinishLoading 方法中有一个属性 settingsArray 和以下代码：

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection {
    self.settingsArray = [NSMutableArray array];
    NSError *error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:receivedData options:kNilOptions error:&error];
    if ([result isKindOfClass:[NSArray class]]) {

        for (NSDictionary *item in result) {
            NSString *settingsID = [item objectForKey:@"ID"];
            NSString *category = [item objectForKey:@"Category"];
            NSString *categoryID = [item objectForKey:@"CatalogID"];
            NSString *facings = [item objectForKey:@"Facings"];
            NSString *quantity = [item objectForKey:@"Quantity"];

            Setting *setting = [[Setting alloc] initWithName:settingsID desc:category categoryID:categoryID facings:facings quantity:quantity];
            [self.settingsArray addObject:setting];
        }

    }
} 
```

Setting 中的 init 方法应如下所示：

```
- (Setting *)initWithName:(NSString *)settingsID desc:(NSString *)category categoryID:(NSString *)catalogID facings:(NSString *)facings quantity:(NSString *)quantity {

    if ((self = [super init])) {

        self.settingsID = settingsID;
        self.catalogID = catalogID;
        self.category = category;
        self.facings = facings;
        self.quanity = quantity;
    }

    return self;

} 
```

编辑后：如果要根据另一个属性的值来查找某个设置的某个属性的值，可以这样做：

```
 for (Setting *aSetting in _settingsArray) {
        if ([aSetting.category isEqualToString:@"Frozen"]) {
            NSLog(@"%@",aSetting.facings);
        }
    } 
```

# java - 当您有奇数个字节时，如何从 ByteBuffer（Little Endian）中获取 long？

> ID：12631906
> 
> 赞同：1
> 
> 时间：2012-09-28T00:15:09.407
> 
> 标签：java, bit-manipulation, nio, bitwise-operators, bytebuffer

如果您有 1、2、4 或 8 个字节，您只需使用 get()、getShort()、getInt() 和 getLong()。

有人可以帮助我使用逻辑来获得 3,5 或 7 个字节的 long 吗？我可能不得不以某种方式用零划桨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:13:35.190

这个问题的答案取决于数据的字节顺序。Java 的 ByteBuffer 类有一个 order(ByteOrder) 方法来设置字节顺序，但这对非标准长度的整数/长值没有帮助。

假设 bb 是一个 ByteBuffer 并且 length 是已知的数据长度。value 变量存储结果。

这是一个辅助函数，在下面的两个解决方案中都使用，并且是必需的，因为 Java 没有无符号数据类型（我觉得这很糟糕）：

```
private static long getUnsigned(final byte b) {
    if (b < 0) {
        return (long) b + 256;
    }
    return b;
} 
```

这是一个小端解决方案：

```
long value = 0;
for (int shift = 0; shift < length * 8; shift += 8) {
    value |= getUnsigned(bb.get()) << shift;
} 
```

这是一个大端的解决方案：

```
long value = 0;
for (int i = 0; i < length; ++i) {
    value <<= 8;
    value |= getUnsigned(bb.get());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T00:30:56.243

当您将一个数字转换为另一个数字时，您将扩展最大值位。（换句话说，如果最高位为 1，则用 1 填充，如果最高位为 0，则用 0 填充）

所以在 little endian 中，你找到最高位（最右边字节中的最左边位），然后添加一个 FF 或 00 的字节。

例如，假设您有一个 3 字节的小端数：

```
0000 0000 | 0000 0000 | 1000 0000 
```

您的最高位是 1（最后一个字节中的 1），因此，4 个字节的符号扩展结果是：

```
0000 0000 | 0000 0000 | 1000 0000 | 1111 1111 
```

同样，如果 3 字节数是：

```
1111 1111 | 1111 1111 | 0101 1101 
```

那么4字节符号扩展版就是：

```
1111 1111 | 1111 1111 | 0101 1101 | 0000 0000 
```

# php - PHP - 从终端执行代码，ubuntu 服务器

> ID：12631907
> 
> 赞同：17
> 
> 时间：2012-09-28T00:15:11.060
> 
> 标签：php, terminal

我知道您可以使用运行 PHP 的 linux 从终端运行 php 文件...即“php script.php”...但是是否有任何程序可以让您直接将 php 输入到终端（通过任何中间程序）并输出结果？即在终端中，测试 php 全局变量，如 getinfo() 等。任何帮助都会很棒，我想通过一种运行时终端测试功能和命令。谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-28T00:19:01.703

`php -a`（从 PHP 5.1 开始）应该做你想做的事。

[http://php.net/manual/en/features.commandline.interactive.php](http://php.net/manual/en/features.commandline.interactive.php)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-08T22:17:26.627

```
php -r 'phpinfo();' 
```

在 OSX 上为我工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-28T00:17:38.913

你可能喜欢一个名为 PHP Shell Terminal 的程序：http: [//sourceforge.net/projects/phpterm/](http://sourceforge.net/projects/phpterm/)

# hibernate - Hibernate 3\. BatchSize 获取。集合中的实体被视为唯一对象（它们不是）

> ID：12631911
> 
> 赞同：1
> 
> 时间：2012-09-28T00:15:43.240
> 
> 标签：hibernate

我有一个通过多对多关系与另一个类集合相关的类列表。学生有很多角色。

我在 Student 类中的角色集上使用了 BatchSize(size=15)，以防止每次对每个学生调用 getRoles() 时都会出现 N+1 问题。

我在数据库表中只有 15 个角色（因此 BatchSize 为 15）但是，在运行应用程序后我注意到 Hibernate 尝试预先加载 15 个角色，然后在我迭代时加载越来越多的角色学生的集合。

难道不明白所有这些角色都是一样的吗？并且只是在所有学生之间共享？这 15 个角色被多次带入 SessionContext。即使我预先通过单独的 HQL 查询加载了所有 15 个角色，当我对第一个学生调用 getRoles() 时，数据库仍然会被命中。

所以我将 BatchSize 设置为 1500 以允许 Hiberante 预先加载 AAAALLLL 角色。那也没有用。在第一个查询它加载 186 然后在第二个查询另一个 100 和 126 之后。3 db hits 优于 363（列表中的学生数），但仍然必须有更好的方法。

我的二级缓存已关闭，但我认为这与此无关。

感谢您的时间。

# c# - 调用命令提示符并保持窗口打开

> ID：12631913
> 
> 赞同：7
> 
> 时间：2012-09-28T00:16:15.967
> 
> 标签：c#, shell, ant

我正在尝试从 C# 应用程序调用 ant 脚本。我希望控制台窗口弹出并保持不变（我现在只是调用命令提示符，但我最终想调用一个 ant 脚本，这可能需要一个小时）。这是我正在使用的代码，我对[原始](http://www.codeproject.com/Articles/25983/How-to-Execute-a-Command-in-C)代码进行了更改：

```
public void ExecuteCommandSync(object command)
{
    try
    {
        // create the ProcessStartInfo using "cmd" as the program to be run,
        // and "/c " as the parameters.
        // Incidentally, /c tells cmd that we want it to execute the command that follows,
        // and then exit.
        System.Diagnostics.ProcessStartInfo procStartInfo =
        new System.Diagnostics.ProcessStartInfo("cmd", "/k " + command);

        // The following commands are needed to redirect the standard output.
        // This means that it will be redirected to the Process.StandardOutput StreamReader.
        procStartInfo.RedirectStandardOutput = true;
        procStartInfo.UseShellExecute = false;
        // Do not create the black window.
        procStartInfo.CreateNoWindow = false;
        // Now we create a process, assign its ProcessStartInfo and start it
        System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo = procStartInfo;

        proc.Start();
        proc.WaitForExit();

    }
    catch (Exception objException)
    {
        Console.WriteLine(objException);
    }
} 
```

我还想传递最多 5 个参数，但现在我只关心保持窗口打开足够长的时间以查看发生了什么，并且我对阅读 ant 脚本生成的任何内容不感兴趣。我不想让任何人为我做我的工作，但我一直在努力解决这个问题，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T01:35:49.527

这条线；

```
procStartInfo.RedirectStandardOutput = true; 
```

是什么导致窗口关闭。删除此行，或向 Process.StandardOutput 添加一个处理程序以在其他地方读取内容；

```
string t = proc.StandardOutput.ReadToEnd(); 
```

# iphone - 将非消耗性应用内购买的用户信息保存在本地设备上

> ID：12631914
> 
> 赞同：0
> 
> 时间：2012-09-28T00:16:25.767
> 
> 标签：iphone, objective-c, ios, in-app-purchase, nsuserdefaults

我的应用程序上有一个类似于 Pro Upgrade 的功能，我将在其中为用户启用额外的功能。我想在购买时将此信息保留在本地设备上（应用程序中的非消耗品）

当用户删除并重新安装应用程序或更新应用程序时，我想获得此信息。我不打算在操作系统更新、恢复等之后获取此信息。

我不信任 NSUserDefaults，好像当用户删除应用程序时，NSUserDefaults 丢失了。

我的应用程序需要服务器，因此可以完成此状态的服务器身份验证，但我不知道如何。

等待本地和服务器的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:22:15.403

您应该对`NSUserDefaults`自由使用充满信心，使用 iTunes 进行设备备份时会创建备份。

然后，要恢复购买，只需忘记将它们存储在某个地方并使用适当的方法：

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

这将自动调用

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue 
```

与支付队列关联的 SKPaymentTransactionObserver 的。您可以在每次启动应用程序时恢复购买，也可以为用户提供一个按钮来强制购买。

此外，它将调用适当的委托方法，就好像已经进行了购买一样，因此您不必管理启用购买的单独方法。

# youtube-api - youtube ?rel=0 在 iOS 上不工作

> ID：12631916
> 
> 赞同：0
> 
> 时间：2012-09-28T00:16:48.070
> 
> 标签：youtube-api

youtube ?rel=0 不适用于 iOS 6，例如，在视频结束时正在显示相关视频。任何解决方法？（不能使用嵌入...必须是 url）

猜我应该添加，它在 jwplayer 中运行良好，但仅在 iOS 6 之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:32:25.903

使用此格式[http://www.youtube.com/embed/videoId?&rel=0](http://www.youtube.com/embed/videoId?&rel=0)如果您在网站的嵌入式 iframe 中使用此链接，它将在 Safari 浏览器上播放视频，而不是使用 YouTube iOS 应用程序。

# java - Java(TM) Platform SE Binary 已停止工作（Java、Eclipse）

> ID：12631922
> 
> 赞同：-1
> 
> 时间：2012-09-28T00:17:08.103
> 
> 标签：java, eclipse

我在eclipse中运行一个java程序。该程序遍历一个充满来自android应用程序的sqlback文件的子目录目录，并对每个文件进行解析并根据数据进入mongo db的不同集合。

一切正常。所有 mongo 数据都已经过验证，我被要求处理一些损坏的文件。在处理 sqlite 文件时，我添加了一些验证检查，但我没有更改程序的逻辑流程。我现在可以识别损坏的文件了，万岁。但是在我运行我的程序后，我得到一个错误：

Java(TM) Platform SE 二进制文件已停止工作。

第二个弹出窗口指出“帮助描述问题的文件”，然后列出实际不存在的路径上的文件。

我正在寻找有关如何调试此错误的线索。错误发生在第 30 个目录的大约 500 个文件深处，因此调试并不是一个明智的选择。

提前致谢，

塞丽娜小姐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-02T13:20:07.477

我遇到了同样的问题。我刚刚更改了以前工作区的名称，它开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:50:47.713

尝试刷新您的 Eclipse 项目（按 F5）...它可能与您的文件系统同步...也尝试重新启动 Eclipse。

另一种方法是创建一个新的 java 项目并在那里复制你的类......然后尝试从新创建的项目中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T13:30:49.760

在将 JDK 版本从 1.8u181 更改为 1.8u191 后，我遇到了同样的问题并解决了它我认为它与 JDK 版本有关

# c# - 检索制造序列号

> ID：12631931
> 
> 赞同：0
> 
> 时间：2012-09-28T00:18:18.777
> 
> 标签：c#, windows

因此，从我工作的地方承包劳动力的学校只是不断订购新计算机，我们必须维护资产标签序列号的数据库，并重命名计算机以反映其资产标签。我在 CSV 文件中关联了 SN 和 AT，我想做的是编写 ac# 应用程序，该应用程序从其运行的计算机中获取序列号，然后向服务器查询其名称。有谁知道这样做的方法（我读过的东西暗示它将通过 system.management 但我不再找到了）。不幸的是，在我需要它工作之前，我无法访问其中一台目标计算机，甚至是同一品牌的一台计算机。

那么品牌之间的序列号放置位置是否存在差异？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T00:23:24.427

试试WMI 对象的`SerialNumber`属性：`Win32_BaseBoard`

```
using System.Management;

ManagementObjectSearcher searcher =
    new ManagementObjectSearcher("SELECT Product, SerialNumber FROM Win32_BaseBoard");

ManagementObjectCollection information = searcher.Get();
foreach (ManagementObject obj in information)
{
    foreach (PropertyData data in obj.Properties)
        Console.WriteLine("{0} = {1}", data.Name, data.Value);
    Console.WriteLine();
}

searcher.Dispose(); 
```

来源：[使用 WMI 检索主板序列号](http://www.codeproject.com/Articles/66273/Retrieving-Motherboard-Serial-Number-using-WMI)

当然，这只适用于 Windows 平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-24T13:13:34.083

打开命令提示符，然后键入以下命令并按 Enter

```
> wmic bios get serialnumber 
```

# java - Java中的二叉树插入

> ID：12631934
> 
> 赞同：0
> 
> 时间：2012-09-28T00:18:48.320
> 
> 标签：java, algorithm

我有一个如下列表。我想知道如何在 Java 中使用这种类型的列表创建二叉树。任何人都可以为我提供一些 Java 中用于此类列表的二叉树插入代码吗？

例如：

```
List 1:  AND AND AND G M S T 
```

二叉树将是：

```
 AND
   AND                AND 
 G     M            S     T 
```

对于这个列表：

```
List 2: AND AND G M S 
```

二叉树将是：

```
 AND
  AND          S
 G   M 
```

我尝试了以下插入方法：

```
public void insert(RDFQuery node,  RDF leafValue) { 
    flag++;
    if ((flag%2)!=0) {
        if (node.left  != null) {
            flag--;
            nodeStore=node.left;
            leftFlag=1;
            insert(node.left, leafValue);
        } 
        else { 
              node.left = new RDFQuery(leafValue);
        }

    }       
    if ((flag%2)==0) {
        if (leftFlag==1) {
            node=nodeStore; 
            leftFlag=0;
        }

        if (node.right  != null) {
              flag--;   
              insert(node.right, leafValue);
        } 
        else { 
              node.right = new RDFQuery(leafValue);
              rightFlag=0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T06:37:17.103

我不确定你想如何将你的列表变成树，因为我无法使用我能想到的任何明显的算法来重现你的两个例子。

# 按行填充，宽度优先

通常，我会从左到右填写一个级别，然后再继续下一个级别。对于您的示例输入，这将导致以下树：

```
List 2: AND AND G M S

        AND
       /   \
    AND     G
  /    \ 
 M      S 
```

有多种方法可以实现这一点。一个是维护两个数字：您当前插入的行的索引（即深度）和该行中新叶的索引。行中该索引的位模式将告诉您左右子节点的顺序，从具有最高有效位的根开始。深度会告诉您必须考虑多少位，即哪位是您必须处理的最重要的位。

# 前缀表示法

另一方面，元素的名称表明其中一些元素具有固定的数量。我想`AND`在所有情况下都是二元运算符，而简单的符号可能是无效的。但是，通过这种解释，您的第一个示例将产生不同的列表：

```
 AND
     /     \
  AND       AND 
 /   \     /   \         
G     M  S      T

AND ( AND ( G, M ), AND ( S, T ) )
List 1: AND AND G M AND S T 
```

如果这是您的解释，那么您可能最好维护对当前节点的引用，并且在将最后一个预期的子节点添加到它之后，从父节点切换到父节点，直到您到达仍然需要子节点的节点。

# ruby-on-rails-3 - 使用 update_attributes 时未应用验证

> ID：12631936
> 
> 赞同：0
> 
> 时间：2012-09-28T00:19:01.987
> 
> 标签：ruby-on-rails-3, activerecord

我有一个非常嵌套的对象模型。我不能给出真实的模型，但我只想说它看起来像这样：

*   A has_many B
*   B has_many C
*   C has_many D

在每个父母身上，我都有 Accept_nested_attributes_for 和相关的 attr_accessible 条目，并且更改状态似乎工作正常。我遇到的问题是验证。

正如预期的那样，每个对象都有自己的验证。此外，对于每个父级，我添加了 validates_associations 以强制子级在更新时进行验证。但是，例如，如果我在使用 update_attributes 更新 A 时更新了子项中的某些字段，则它在应该返回 false 时返回 true。

更奇怪的是，如果我断点，在我的 IDE 中强制调用 update_attributes 一次，然后让代码继续第二次调用 update_attributes 似乎按预期运行。

我错过了一些非常明显的东西吗？

**为我的对象模型的真正 cr*p 类比提前道歉**

# java - 有条件地覆盖java中的方法

> ID：12631937
> 
> 赞同：2
> 
> 时间：2012-09-28T00:19:06.873
> 
> 标签：java, conditional, overriding

好的，所以我正在从一个名为 MonthlyReports 的类中读取有关客户的文件中的大量信息。我还有一个名为 Customer 的类，并希望在其中覆盖一个名为 getTotalFees 的方法，并且我有两个名为 StandardCustomer 和 PreferredCustomer 的子类，我希望在其中覆盖 getTotalFees。读取的重要信息之一是客户是首选还是标准（存储在变量标志中，但是我的问题是我不知道我应该在哪里/如何让它决定客户是否是标准或首选。

这是我的想法，在 Customer 类中我有抽象方法 getTotalFees

```
public double abstract getTotalFees() {
    return this.totalFees;
} 
```

然后在我的标准类和首选类中，我有覆盖它的方法

```
public double getTotalFees() {
    if (flag.equals("S"){
         return this.totalFees * 5;
    } else {
         return this.totalFees;
    }
} 
```

我真的只是在这里抓住稻草，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T00:22:05.293

如果您已经有两个不同的类`StandardCustomer`，并且`PreferredCustomer`可以有两个不同版本的方法：

```
//in StandardCustomer: 
@Override
public double getTotalFees() {
     return this.totalFees * 5;
}

//in PreferredCustomer: 
@Override
public double getTotalFees() {
     return this.totalFees;
} 
```

Java 中的动态分派注意根据实例的运行时类型涉及正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:23:43.233

听起来您需要一个工厂方法（又名“虚拟构造函数”）。让多态为你解决这个问题。这是面向对象编程的标志之一：

```
public class StandardCustomer extends Customer {
    // There's more - you fill in the blanks
    public double getTotalFees() { return 5.0*this.totalFees; }
}

public class PreferredCustomer extends Customer {
    // There's more - you fill in the blanks
    public double getTotalFees() { return this.totalFees; }
}

public class CustomerFactory {
    public Customer create(String type) {
        if ("preferred".equals(type.toLowerCase()) {
            return new PreferredCustomer();
        } else {
            return new StandardCustomer();
        }
    }
} 
```

# c# - string.Format 返回空字符串

> ID：12631938
> 
> 赞同：-1
> 
> 时间：2012-09-28T00:19:10.127
> 
> 标签：c#, .net, string-formatting

有没有办法`string.Format`总是返回一个空字符串？

```
 string.Format("", DateTime.Now); 
```

第三方组件只允许我们传递一个格式字符串。空字符串的想法不起作用。希望可能有另一种不太明显的方式。我不否认下面的代码有效（答案），只是我不能重新编程所说的第 3 方组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:20:06.453

`string.Format("{0}", string.Empty)`?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T00:21:20.333

怎么样

```
string.Format(string.Empty, other, useless, parameters); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T08:29:21.423

答案是：

```
string.Format(" ", DateTime.Now); 
```

至少这是诱使第 3 方软件提供所需结果的方法。

# c++ - (C++) 当只有迭代器可用时为迭代器查找 end()？

> ID：12631944
> 
> 赞同：3
> 
> 时间：2012-09-28T00:20:00.177
> 
> 标签：c++, stl, iterator

假设看起来模糊的代码是这样的：

```
bool LoadGame() {
  vector<string> SaveFile = LoadFromSaveFile();
  Data = SaveFile.begin();
  LoadCharacters(&Data);
    // containing LoadOneCharacter(&Data) calls
  LoadLocations(&Data);
    // >> LoadOneLocation(&Data) calls
  // etc.
} 
```

有没有办法在 LoadCharacters()、LoadLocations() 等中检查 Data 当前是否指向 SaveFile::end()，而不将 SaveFile::end() 传递给 LoadGame() 调用的所有函数？

（如果仅取消引用 end() 和超越抛出异常而不是产生未定义的行为！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T00:21:32.080

这是不可能的，在一般情况下

在特定情况下，您可以利用迭代器实现的实现特定细节来获取容器。

标准容器库的迭代器在AFAIR中没有*记录此类详细信息。*

* * *

一种特殊情况是输入迭代器`std::istream_iterator<>`，它总是可以与自身的*默认构造*实例进行比较以检查输入结束。

```
std::istringstream iss("test");
std::istream_iterator<char> it(iss);

// you can always check for end of input:
while (std::istream_iterator<char>() != it)
{
    it++;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T00:25:16.560

一般是不可能的。在许多实现中，许多类型的迭代器只是指针，并不了解底层容器。

您需要传递两个迭代器，或传递不同的结构，例如 a `range`( 在`boost`但不是 C++0x IIRC 中)。

# scala - 为什么 SBT libraryDependencies %% 会截断 scalaVersion？

> ID：12631948
> 
> 赞同：2
> 
> 时间：2012-09-28T00:20:24.180
> 
> 标签：scala, sbt

在我的 build.sbt 我有线条

```
scalaVersion := "2.10.0-M6"

libraryDependencies ++= List(
    "com.typesafe" %% "slick" % "0.11.0",
    "org.slf4j" %% "slf4j-nop" % "1.6.4"
) 
```

running`sbt update`显示未解决的依赖项异常。当我查看 sbt 正在尝试为库检索的 URL 时，我看到它正在寻找`com.typesafe$slick_2.10;0.11.0`.

为什么没有完整`ScalaVersion`附加？我可以使用一个选项来使其使用整个版本而不是截断的版本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T06:52:17.567

这应该从 sbt 开始`0.12`。请参阅sbt wiki 上[的交叉构建](http://www.scala-sbt.org/release/docs/Detailed-Topics/Cross-Build)。

```
"com.typesafe" % "slick" % "0.11.0" cross CrossVersion.full 
```

# jquery - 如何用jQuery“复制”元素？

> ID：12631949
> 
> 赞同：7
> 
> 时间：2012-09-28T00:20:33.027
> 
> 标签：jquery

> **可能重复：**
> [是否可以在 JavaScript/JQuery 中克隆 html 元素对象？](https://stackoverflow.com/questions/921290/is-it-possible-to-clone-html-element-objects-in-javascript-jquery)

例如，我想要这个：

```
<div id="foo1">

</div>
<div id="foo2">
  <div>Foo Here</div>
</div> 
```

变成这样：

```
<div id="foo1">
  <div>Foo Here</div>
</div>
<div id="foo2">
  <div>Foo Here</div>
</div> 
```

jQuery可以做到这一点吗？

# html - 垂直对齐：文本顶部；在 HTML5 中的表格单元格 (td) 中不起作用

> ID：12631954
> 
> 赞同：14
> 
> 时间：2012-09-28T00:21:27.370
> 
> 标签：html

不知道为什么，但对于我的生活，当单元格之前的单元格环绕文本时，我无法让我的文本在表格单元格 (td) 的顶部对齐。

如果我将它写在 HTML 中，它可以工作，但无法在我的 CSS 中获得相同的效果。

适用于 HTML：

```
<td style="vertical-align:text-top;">Some Text</td> 
```

不使用 CSS：

```
table td { vertical-align: text-top; } 
```

我已经尝试了你在我的 CSS 中能想到的所有组合

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-28T01:49:05.203

确保您没有在 TD 元素上设置“显示：块”，因为垂直对齐不适用于块元素。此外，text-top 不是最好的，并且存在一些跨浏览器问题。改用“顶部”。尝试在样式表中添加：

```
table td { 
  display: table-cell;
  vertical-align: top; 
} 
```

# ios - UIPasteboard 删除数据的策略

> ID：12631957
> 
> 赞同：4
> 
> 时间：2012-09-28T00:21:39.603
> 
> 标签：ios, uipasteboard

1.  UIPasteboard“满”时会做什么？它会先删除最旧的文件吗？
2.  UIPasteboard 的总大小（以 MB 为单位）是否有任何限制？

我的用例：将视频文件作为 NSData 存储在粘贴板中。每个都是一个 30 秒的视频广告剪辑，将在应用程序中使用。自然，我想知道我可以存储多少，如果我自己不老化/删除它们，它们什么时候会被删除。

此外，我注意到即使删除应用程序，粘贴板中的数据也不会被删除。

谢谢！

# c# - 如何在我的主应用程序线程中自动捕获由 Task 对象的操作引发的异常？

> ID：12631961
> 
> 赞同：2
> 
> 时间：2012-09-28T00:22:10.900
> 
> 标签：c#, .net, wpf, multithreading, mvvm

我注意到从我的主应用程序线程以外的线程抛出的异常不会被 DispatcherUnhandledException 事件处理程序捕获。所以我必须像这样手动抛出它们：

```
Task.Factory.StartNew(() =>
{
    throw new Exception("oops! something went wrong...");

}).ContinueWith((task) =>
{
    if (task.IsFaulted)
    {
        App.Current.Dispatcher.Invoke(new Action(() =>
        {
            throw task.Exception.InnerExceptions.First();
        }));
    }
}); 
```

但是，我不想将上述 ContinueWith 方法添加到我创建的每个任务中。我宁愿有一些方法可以自动处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:22:10.900

下面的类解决了这个问题：

```
/// <summary>
/// Extends the System.Threading.Tasks.Task by automatically throwing the first exception to the main application thread.
/// </summary>
public class TaskEx
{
    public Task Task { get; private set; }

    private TaskEx(Action action)
    {
        Task = Task.Factory.StartNew(action).ContinueWith((task) =>
        {
            ThrowTaskException(task);
        });
    }

    public static TaskEx StartNew(Action action)
    {
        if (action == null)
        {
            throw new ArgumentNullException();
        }

        return new TaskEx(action);
    }

    public TaskEx ContinueWith(Action<Task> continuationAction)
    {
        if (continuationAction == null)
        {
            throw new ArgumentNullException();
        }

        Task = Task.ContinueWith(continuationAction).ContinueWith((task) =>
        {
            ThrowTaskException(task);
        });

        return this;
    }

    private void ThrowTaskException(Task task)
    {
        if (task.IsFaulted)
        {
            App.Current.Dispatcher.Invoke(new Action(() =>
            {
                throw task.Exception.InnerExceptions.First();
            }));
        }
    }
} 
```

现在我可以简单地使用以下代码（与 Task 类完全相同）：

```
TaskEx.StartNew(() =>
{
    // do something that may cause an exception
}).ContinueWith((task) =>
{
    // then do something else that may cause an exception
}).ContinueWith((task) =>
{
    // then do yet something else that may cause an exception
}); 
```

然而，与 Task 类不同的是，从这些线程之一抛出的任何异常都将被我的 DispatcherUnhandledException 事件处理程序自动捕获。

# jenkins - 使用 Jenkins 和 Ubuntu 12.04 服务器进行服务器配置

> ID：12631965
> 
> 赞同：2
> 
> 时间：2012-09-28T00:22:53.727
> 
> 标签：jenkins, build-automation, provisioning, vmware-fusion

我确实有一个使用 VMWare Fusion 的 Ubuntu Server 12.04 VM，我想使用一组 Jenkins 步骤进行配置。

到目前为止，我在安装操作系统时默认拥有带有以下软件包的服务器 VM。

1.  default-java（这是 Jenkins Slave 的 OpenJDK）
2.  openssh-server（用于与我的客户通信）

我想对此 VM 模板进行以下更改，以便以后可以将其用于任何目的。

1.  更改主机名/主机配置（需要重新启动）
2.  如有必要，运行软件包安装（git-core）
3.  安装 puppet 主服务器。

我在尝试执行命令时确实遇到了问题，因为 ubuntu 没有 root 帐户。

```
+ sudo hostname ubuntu
sudo: no tty present and no askpass program specified
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

我确实尝试更改 sudo 组成员的 sudoers NOPASSWD 配置，只有当我登录到虚拟机而不是 jenkins 时，即使 jenkins 用户是系统中唯一属于 sudo 组成员的用户。

我会说拥有特定操作系统的映像就足够了，但我猜在这种情况下需要詹金斯从站来开始管理虚拟机。我没有使用 Vagrant，因为 MAC 上的速度非常慢，而 VM Ware Fusion 甚至比并行速度还要快。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:40:14.677

首先创建一个 shell 脚本，作为您的 askpass 程序。执行时需要输出密码。例如，如果您的密码是，`mycleverpassword`那么下面的脚本就可以解决问题：

```
#! /bin/sh
echo mycleverpassword 
```

然后，而不是打电话`sudo hostname ubuntu`，你会打电话

```
export SUDO_ASKPASS="/path/to/myaskpass.sh"; sudo -A hostname ubuntu 
```

让我知道疼痛是否持续存在。

# solr - 呵呵没有空间信息呸

> ID：12631969
> 
> 赞同：3
> 
> 时间：2012-09-28T00:23:29.153
> 
> 标签：solr

嗨，我是使用 Solr 3.6.1 的新手。我正在尝试使用 solr 进行地理空间搜索，其索引是使用 DIH 从 MySQL 导入的。我可以看到`*:*`查询返回了 lat & lng 数据（但不是 latlng）。

**问题：**当我尝试地理空间搜索时，没有返回任何结果。当我将搜索距离`d`增加到非常大的值（如 100000）时，我只会得到结果，并且返回的结果不包含 lat/lng 数据。

我是否错过了阻止搜索地理空间数据的架构或数据配置中的某些内容？

我也想按升序排序。我尝试附加`&sort=geodist() asc`到查询 url 的末尾，但有一个错误`unknown query type 'asc'`。谢谢大家的帮助！！:)

**地理空间查询：**

`http://127.0.0.1:8080/solr/select?wt=json&q=*:*&start=0&rows=10&fl=*,score&fq={!geofilt pt=41.570015,-71.09061 sfield=latlng d=5}`

**地理空间查询结果：**

```
{"responseHeader":
    {"status":0,
    "QTime":0,
    "params":{"fl":"*,score","start":"0",
    "q":"*:*",
    "wt":"json",
    "fq":"{!geofilt pt=41.570015,-71.09061 sfield=latlng d=5}","rows":"10"}},
    "response":{
        "numFound":0,
        "start":0,
        "maxScore":0.0,
        "docs":[]
    }
} 
```

**一些结果来自`*.*`：**

```
<response>
    <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">517</int>
    <lst name="params">
    <str name="explainOther"/>
    <str name="fl">*,score</str>
    <str name="indent">on</str>
    <str name="start">70000</str>
    <str name="q">*:*</str>
    <str name="hl.fl"/>
    <str name="wt"/>
    <str name="fq"/>
    <str name="rows">100</str>
    <str name="version">2.2</str>
</lst>
</lst>
    <result name="response" numFound="76270" start="70000" maxScore="1.0">
    <doc>
        <float name="score">1.0</float>
        <str name="id">2584854</str>
        <float name="lat">41.570015</float>
        <float name="lng">-71.09061</float>
    </doc> 
```

**数据导入**

```
query="select id, lat, lng,
    concat_ws(',', lat, lng) as latlng
    from listings" 
```

**图式**

```
<fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>

<field name="latlng" type="location" indexed="true" stored="true" />
<field name="lat" type="float" indexed="true" stored="true" />
<field name="lng" type="float" indexed="true" stored="true" />

<dynamicField name="*_coordinate" type="double" indexed="true" stored="false" multiValued="false" /> 
```

# lua - 编译的 Lua 项目使 lightroom 3 崩溃

> ID：12631972
> 
> 赞同：0
> 
> 时间：2012-09-28T00:23:49.477
> 
> 标签：lua, lightroom

我为 LightRoom 3 和 4 编写了一个导出器插件。代码是使用 SDK-4 使用 Windows 版本的 Luac 版本 5.2.1 编译的。编译后的项目在 LR4 上运行良好，但在尝试第二次使用该插件时崩溃 [在 LR3 中]。

我的直觉告诉我，我需要 (a) 使用早期版本的 Lua (b) 使用 SDK-3 进行编译。

谁能确认哪个版本的 Lua 和 SDK 应该与最新版本的 LR3 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:22:01.477

感谢@lhf 指出 SDK-4 在 PDF 中有语言信息。因为我有 SDK-3 的 PDF，所以我检查了 DOC 的同一部分。瞧，那里有同样的信息。

```
"Lightroom 4 uses version 5.1.4 of the Lua language."
"Lightroom 3.0 uses version 5.1.2 of the Lua language." 
```

** 特别感谢@lhf！

# c# - 用 2 个 from 子句将 linq-to-sql 查询重写为连接

> ID：12631973
> 
> 赞同：2
> 
> 时间：2012-09-28T00:23:51.177
> 
> 标签：c#, linq, linq-to-sql

我有几个查询，其中有 2 个 from 子句，如下所示：

```
var TheResult = from a in MyDC.Table1
                from b in MyDC.Table2
                where a.SomeCol == b.SomeOtherCol
                select new MyModel() {....} 
```

我担心这种语法会创建笛卡尔连接，我想`join`用只有一个`from`子句的语法重写它。我的问题是：我应该如何确定应该在`from`子句中放入哪个表？

谢谢。

**编辑：查询生成的 t-sql 开头`SELECT COALESCE((`是好还是坏？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:37:16.687

您可以很容易地将其重写为 JOIN：

```
var result = from a in MyDC.Table1
             join b in MyDC.Table2 on a.SomeCol equals b.SomeOtherCol
             select new MyModel() { SomeProp = a.SomeCol, SomeProp2 = b.SomeCol } 
```

或者，如果您想要左连接：

```
var result = from a in MyDC.Table1
             join b in MyDC.Table2 on a.SomeCol equals b.SomeOtherCol
             into myGroup
             from m in myGroup.DefaultIfEmpty()
             select new MyModel() { SomeProp = a.SomeCol, SomeProp2 = m.SomeCol } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:50:00.397

您提供的模型过多地面向数据，并且没有很好的面向对象的感觉来理解如何解决问题。

考虑对象，你所拥有的一个例子是：

```
var TheResult = from u in context.Users
            from c in MyDC.Countries
            where u.CountryId == c.Id
            select new MyModel() { UserName = u.Name, CountryName = c.Name } 
```

有了类似的东西，你可以添加（你应该！）用户（映射到表 1）和国家（映射到表 2）之间的关系，所以你可以这样做：

```
var country = user.Country; 
```

这将使您进行更直接的查询，完全由 Linq-to-sql 支持（并且完全鼓励！）：

```
var TheResult = from u in context.Users
                select new MyModel() { UserName = u.Name, CountryName = u.Country.Name } 
```

希望能帮助到你。

# javascript - 返回 HTML FORM 变量名（不是值）

> ID：12631976
> 
> 赞同：1
> 
> 时间：2012-09-28T00:24:57.763
> 
> 标签：javascript, getelementsbyname

这可能是一个非常简单的问题，但我似乎无法做到这一点。

是否可以从 FORM 中提取变量“名称”？我有以下下拉菜单（简体）...

```
<FORM NAME="doc_select">
    <SELECT ID="rec_list"  NAME="rec_info"><OPTION>...</OPTION></SELECT>
    <SELECT ID="term_list" NAME="term_info"><OPTION>...</OPTION></SELECT>
    <SELECT ID="comp_list" NAME="comp_info"><OPTION>...</OPTION></SELECT>
</FORM> 
```

这些都通过“onChange”语句触发了一些java脚本。到现在为止还挺好。

我想提取名称，而不是值，然后在 java-script 语句中使用提取的名称，如下所示：

```
var info = form.*name*.value; 
```

`getElementsByName`给我价值而不是名字。

有任何想法吗？

干杯弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:16:45.263

也许这段代码会对你有所帮助。[**在这里查看一个演示。**](http://jsfiddle.net/cnBUe/)

```
form = document.doc_select;

document.getElementById('rec_list').onchange = function() {
    n = this.name;

    var info = form.elements[n].value;
    console.log('name: ' + n);          //name: rec_info
    console.log('info: ' + info);       //info: 2
};​ 
```

您可以使用 获取元素的名称`.name`。该`elements[]`函数根据名称或索引返回元素。例如`elements[0]`，也会给出相同的结果，但由于您不知道索引，它对您没有好处。

* * *

**更新**

在阅读了您关于仅管理一个脚本的评论后，我想我已经理解了您的问题。只需对代码进行一些小的调整，这应该就是您要寻找的：

```
form = document.doc_select;

document.getElementById('rec_list').onchange = function() {
    onChangeFunction(this.name);
};
document.getElementById('term_list').onchange = function() {
    onChangeFunction(this.name);
};
document.getElementById('comp_list').onchange = function() {
    onChangeFunction(this.name);
};

function onChangeFunction(name){
    //...your code goes here...

    var info = form.elements[name].value;
    console.log('name: ' + name);         //outputs name of element that changed
    console.log('info: ' + info);         //outputs value for that element

    //...more of your code...
} 
```

您不再需要为每个`<select>`元素提供 3 个不同的功能。:)[**在这里查看。**](http://jsfiddle.net/cnBUe/1/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:30:39.360

当您使用 getElementsByName 时，您只是在请求具有该名称属性的 HTMLElement。您需要的是从 HTMLElement 中获取属性“名称”。如果您能够使用 jQuery，则可以使用 jQuery .attr() 函数。

编辑：查看这个 StackOverflow 问题[Get elements by attribute when querySelectorAll is not available without using libraries?](https://stackoverflow.com/questions/9496427/how-to-get-elements-by-attribute-selector-w-native-javascript-w-o-queryselector)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:35:07.517

试试这个...` var rec_list = document.querySelector("#rec_list");

警报（rec_list.name）；`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T01:02:44.220

我不清楚你的问题是什么，所以这里有一些一般的东西。要获取调用侦听器的元素的名称，请传递`this`：

```
<select id="rec_list"  name="rec_info" onchange="someFn(this)" ... > 
```

您可以使用动态添加的侦听器执行相同的操作。在函数中：

```
function someFn(element) {
  var elementName = element.name;
  var theForm = element.form;
  var theValue = element.value;

  // and so on ...

} 
```

您还可以使用表单控件的名称访问表单控件作为表单的属性，因此一旦您引用了表单：

```
form.comp_info 
```

是 OP 中的第三个选择元素。请注意，在这种特殊情况下，如果有一个具有该名称的控件，则返回对该元素的引用。如果有多个同名控件，则返回一个集合。另请注意，IE 混淆了名称和 id 标记，因此切勿对一个控件的名称和另一个控件的 id 使用相同的值。

该[`getElementsByName`](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-71555259)方法返回一个集合，成员可以通过索引访问，所以第一个是：

```
var someElement = document.getElementsByName('foo')[0]; 
```

请注意，如果没有名称为 'foo' 的元素，则`someElement`其值为`undefined`.

# python - 根据列表名称选择列表，列表名称在python中是可变的

> ID：12631982
> 
> 赞同：0
> 
> 时间：2012-09-28T00:26:10.243
> 
> 标签：python, list

例如，我创建了一组列表：

```
LIST_chr1=[]
LIST_chr2=[]
LIST_chr3=[]
...
... 
```

现在在处理文本时，对于某些行，如果我得到“chr2”，那么我需要使用 LIST_chr2 从而选择这个列表，我应该如何根据列表名称指向这个特定的列表？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T00:28:41.647

通常，你不想做这样的事情......

你可以试试：

```
vname = 'chr3'
list_I_want = globals()['LIST_'+vname] 
```

虽然，通常做这样的事情**更好**`dict`的方法是首先将列表存储在

```
my_list_dict = dict(LIST_chr1=[],LIST_chr2=[],LIST_chr3=[],...) 
```

接着：

```
list_I_want = my_list_dict['LIST_'+vname] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T00:29:32.063

对于列表列表或字典，这似乎是一项更好的工作。例如，您可以只使用这样的结构：

```
>>> lists = [["list 1","contents"],[],[]]
>>> lists[0]
['list 1', 'contents'] 
```

（其中元素 'list 1' 和 'contents' 是 LIST_chr1 的合法元素）。

需要明确的是，如果您需要通过某个标识符访问列表，请像在另一个示例中一样使用字典，但如果您只是根据特定数字获取列表，那么这是要走的路。

# c# - 列出所有文件并使其可在 C# 中下载

> ID：12631984
> 
> 赞同：0
> 
> 时间：2012-09-28T00:26:27.637
> 
> 标签：c#, asp.net, asp.net-mvc-3

我希望在浏览器中列出目录中的所有文件，并允许我的用户下载它们，类似于 FTP 客户端。我不希望他们通过此界面上传，只需选择 1 个或他们喜欢的任意数量的文件并下载它们 - 有点像浏览器 FTP 客户端中的 1 面。

有人知道这个或教程的组件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:28:19.680

如果您使用的是 IIS，您只需要启用目录列表。我认为您不需要编写任何代码。

# sql - SQL Server Management Studio 2012 连接到 Azure SQL

> ID：12631989
> 
> 赞同：1
> 
> 时间：2012-09-28T00:27:46.857
> 
> 标签：sql, azure, odbc, ssms

每当我尝试连接到 Azure 上的 SQL 服务器时，都会不断收到 SQL 错误 258。

`Cannot connect to tcp:xxxxxxxxxx.database.windows.net,1433.`

`A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The wait operation timed out.) (Microsoft SQL Server, Error: 258)`

我设置了 ODBC 连接，这似乎有助于它建立连接，但我对它为什么没有连接感到困惑。我还在 Azure 中将我的 IP 地址列为允许的 IP 地址，但仍然没有运气。这是我尝试使用 SSMS 2012 登录的内容：

`Server Type: Database Engine Server Name: tcp:xxxxxxxxxx.database.windows.net,1433 Authentication: SQL Server Authentication Login: username@xxxxxxxxxx Password: xxxxxxxxxx`

`Connect to database: xxxxxxx_db Connection time-out: 30 Encrypt: True`

我的连接字符串： `Server=tcp:xxxxxxxxxx.database.windows.net,1433;Database=database_db;User ID=username@xxxxxxxxxx;Password={your_password_here};Trusted_Connection=False;Encrypt=True;Connection Timeout=30;`

非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:31:27.620

Your Connection string seems to vary from what is shown here [http://www.connectionstrings.com/sql-azure](http://www.connectionstrings.com/sql-azure)

```
Server=tcp:[serverName].database.windows.net;Database=myDataBase;
User ID=[LoginForDb]@[serverName];Password=myPassword;Trusted_Connection=False;Encrypt=True; 
```

# multithreading - 其他语言是否具有与 Python 的 Gevent 等价的功能？

> ID：12631996
> 
> 赞同：1
> 
> 时间：2012-09-28T00:28:42.443
> 
> 标签：multithreading, sockets, asynchronous, gevent, coroutine

我正在研究编写一个高吞吐量路由器的选项，该路由器可以处理和路由具有大量连接的大量流量，并且我遇到了[这些 Python 选项的基准](http://nichol.as/benchmark-of-python-web-servers)。Gevent 显然似乎是我的最佳选择，但我不受任何特定语言的约束（尽管我确实有大量使用 python 的经验），我想知道其他语言是否有类似的库方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:41:29.040

[Go](http://golang.org/)和[Erlang](http://www.erlang.org/)都有非常相似的“绿色线程”或轻量级线程的想法。

# jquery - 将主题添加到themeroller

> ID：12631997
> 
> 赞同：0
> 
> 时间：2012-09-28T00:29:16.843
> 
> 标签：jquery, jquery-ui, user-interface, themes, themeroller

在您说之前：我已阅读[jQuery UI ThemeRoller - 安装主题](https://stackoverflow.com/questions/2564317/jquery-ui-themeroller-installing-themes)，但没有任何帮助。

我一直在搜索和搜索，jQuery网站上的文档是3句un-helpfulness。我在我的网站上添加了 jQuery UI 主题滚轮，（以前有“平滑”主题）但现在，因为它们是主题滚轮附带的唯一主题，它介于 UI 亮度和 UI 黑暗之间。我正在尝试将“smoothness”主题添加回我的网站，作为主题滚轮选项，但我没有“主题”文件夹或所需的“all.css”文件。任何人有任何建议/想法，或者更好的是，知道该文件的任何托管版本（找不到任何版本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:26:05.303

在此处下载示例[http://www.filedropper.com/themeroller](http://www.filedropper.com/themeroller)

在此，我添加了与[Jquery themeroller](http://jqueryui.com/themeroller/)相同的 themeroller 控制器，它将根据 Dropdownlist 选择的主题切换主题。要更改主题，我使用了themeswitcher 插件，您可以在[此处找到。](http://jqueryui.com/themeroller/themeswitchertool/)

[这](http://www.filedropper.com/jquerythemes)是另一个使用下拉列表选择主题的示例。在此您必须手动更改 css 文件以设置主题，即在 index.html 中更改：

```
<link rel="stylesheet" href="themes/ui-darkness/jquery.ui.all.css"> 
```

至

```
<link rel="stylesheet" href="themes/ui-lightness/jquery.ui.all.css"> 
```

# c# - oleobject 替代 c#

> ID：12631998
> 
> 赞同：2
> 
> 时间：2012-09-28T00:29:20.533
> 
> 标签：c#, ole, powerbuilder

我需要模仿 Powerbuilder 11.5 到 C# 3.0 中的一部分代码。在 powerbuilder 中，代码具有 oleobject 并使用 connecttonewobject 连接到对象。有人可以告诉我 C# 中的等价物是什么以及在这里使用什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T03:50:49.680

这是一个使用 C# 动态属性的基本示例（就像 pb 对象）

```
// get the class id from name
Type myComType = Type.GetTypeFromProgID("SAP.BAPI");

// equal to connect to ojbect in PB
dynamic myComInstance = Activator.CreateInstance(myComType, false);

// calling function equivalent to oleobject.function in PB
myComInstance.ShowDialog("Hello World"); 
```

# javascript - iPad 2 和 iPad 3 网站测试

> ID：12631999
> 
> 赞同：3
> 
> 时间：2012-09-28T00:29:25.570
> 
> 标签：javascript, html, ios, ipad, ios-simulator

Apple iOS 模拟器中有没有办法在 iPad 2 和 iPad 3 上测试网站？我有最新版本的 xcode 和 iOS 模拟器。我相信设备上的分辨率差异会导致网站出现一些问题，我想对其进行调试。

如果 iOS 模拟器不提供选项，是否有任何其他方法可以在这些设备上进行测试而不实际拥有两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T00:33:34.790

你不用模拟器在 iPad2 和 iPad3 之间切换。您对模拟器的选择是：

*   非视网膜和视网膜分辨率之间的变化和
*   iOS 版本。

如果您正在调试分辨率问题，请注意“硬件”菜单，您可以在 iPad 和 iPad Retina 之间进行选择。

![在此处输入图像描述](../Images/fdc34e318d59a8c010874a8b21086486.png)

您还可以转到 XCode 首选项、下载和下载较旧的 iOS 模拟器。

![在此处输入图像描述](../Images/f885b7e95b30e725599135b981c6a953.png)

除此之外，您的选择是亲身体验实际设备，这是测试实际情况的最终方式：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:31:43.647

我认为这个可以帮助你，试试[这个](https://chrome.google.com/webstore/detail/ijoeapleklopieoejahbpdnhkjjgddem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T00:33:14.317

不，iOS 模拟器并不是这样工作的。

您可以选择 iOS 版本（现在仅限 iOS6，具体取决于您是否拥有最新版本的 XCode），但不能选择设备版本（2 vs 3）。