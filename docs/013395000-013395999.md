# StackOverflow 问答 13395000-13395999

# macos - 无法在 64 位 Mac 上编译 ARToolkit

> ID：13395001
> 
> 赞同：0
> 
> 时间：2012-11-15T09:54:13.283
> 
> 标签：macos, artoolkit

我试图在我的 64 位 MacMini 上编译 ARToolkit，但是当我运行 make 时，它​​给出的错误如下

```
 ./videoInternal.h:38:50: error: unknown type name 'SeqGrabComponent'
   ./video.c:255:10: error: use of undeclared identifier 'seqGrab'
   ... 
```

我意识到这些错误与 Mac 上的 Quicktime Framework 有关，但我不知道如何修复它。我的 Mac 版本是 10.7.5，64 位。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:59:08.383

QuickTime 不是也永远不会是 64 位的，它已被 QTKit 和 AVFoundation 取代。ARToolKit Professional v4.x 包含一个 QTKit 视频输入模块 (http://www.artoolworks.com)。ARToolworks 表示他们打算很快在 GPL 下发布部分 ARToolKit v4.x。

# delphi - 删除、添加、编辑字符串列表

> ID：13395004
> 
> 赞同：0
> 
> 时间：2012-11-15T09:54:18.963
> 
> 标签：delphi, delphi-xe2

这有点令人困惑，但会尽力解释它。请询问您是否需要更多详细信息。

首先，我有一个名为`TPlayers`Like so 的课程。

```
TPlayers = class
   Private
      p : array[1..20] of TStringList;
      function GetPlayer(i:integer): TStringList;

    Public
      Property player[i : integer] : TStringList read GetPlayer;

           constructor Create;   virtual;
    implementation

    uses
    main;
    {constructor}
       constructor TPlayers.Create;
       begin
         p[1] := TStringList.Create;
         p[2] := TStringList.Create;
         p[3] := TStringList.Create;
         p[4] := TStringList.Create;
         p[5] := TStringList.Create;
         p[6] := TStringList.Create;
       end;

     function TPlayers.GetPlayer(i: integer): TStringList;
    begin
      Result := p[i];
    end; 
```

我现在必须`FTherePlayers := TPlayers.Create`创建类。我第一次像这样添加到字符串列表

```
FTherePlayers.Player[strtoint(name2)].Add('posx='+inttostr(posL.x)); 
```

或取出变量

```
FTherePlayers.Player[1].Add('posx=15'); 
```

这似乎很好，但接下来我尝试像这样更新它

```
FTherePlayers.Player[strtoint(ID)].Values['posx='] := xpos; 
```

或取出变量

```
FTherePlayers.Player[1].Values['posx='] := 12; 
```

但是然后我在更改它后检查该值，它仍然显示 15，因此当我这样做时

```
showmessage(fthereplayers.player[1].Values['posx']); 
```

它返回 15 但应该是 12。知道为什么它没有改变吗？谢谢格伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:42:29.110

您在属性`Name`索引值的末尾有一个额外的等号。[`Values`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Classes.TStrings.Values)您只需使用不带等号的名称值对的名称部分。因此，在您的代码中只需替换以下几行：

```
// here is an extra equals sign in 'posx=' index value
FTherePlayers.Player[1].Values['posx='] := 12;
FTherePlayers.Player[strtoint(ID)].Values['posx='] := xpos; 
```

有了这个：

```
FTherePlayers.Player[1].Values['posx'] := 12; 
FTherePlayers.Player[strtoint(ID)].Values['posx'] := xpos; 
```

# asp.net-mvc-3 - MVC Routes 和 HTTP Modules 的执行顺序

> ID：13395005
> 
> 赞同：1
> 
> 时间：2012-11-15T09:54:25.130
> 
> 标签：asp.net-mvc-3, routing, httpmodule

MVC 路由的处理程序是否胜过定义的 HttpModules `web.config`？

我有一个由旧版 webforms 代码和 MVC 代码组成的 asp.net 应用程序。我想向自己证明，MVC 在处理请求方面优先于项目使用的自定义 HttpModule，后者也可以处理请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:06:51.207

~~IIRC MVC 路由是在启动 MVC 的 HTTP 模块中完成的。因此，只要在您的自定义模块之前添加了 http 模块，MVC 就会“获胜”。~~

我几乎是正确的。MVC 实现了一个[UrlRoutingHandler](http://msdn.microsoft.com/en-us/library/system.web.routing.urlroutinghandler.aspx)，这意味着它将在调用任何模块之前引导请求。

源代码：

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5b4f63fa0b89#src%2fSystem.Web.Mvc%2fMvcHttpHandler.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/5b4f63fa0b89#src%2fSystem.Web.Mvc%2fMvcHttpHandler.cs)

# c# - 使用 Label 登录 WindowsForm 应用程序有时会导致异常 - 为什么？

> ID：13395007
> 
> 赞同：0
> 
> 时间：2012-11-15T09:54:31.740
> 
> 标签：c#, label, windows-forms-designer

是否允许/不鼓励在 Windows 窗体应用程序中使用标签来显示应用程序状态？

起初我认为这将是一个明智的想法，但现在我意识到我有很多日志没有显示，如果我不对 Label.Text 更改进行尝试/捕获，经常会崩溃。这是我使用的功能。

```
private void Echo(string p)
{
    lock (m_syncObject)
    {
        try
        {
            InfoBox.Text = p.ToString();
        }
        catch { }
    }
} 
```

如您所见，我还为对同一资源的多次访问添加了一个锁。谁能解释为什么我经常被“抓住”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:02:41.187

InfoBox.Text = p.ToString(); -> 那会产生跨线程异常。试试这个：

```
delegate void myDelegate(ref Label lb, string toAdd);
private void UpdateLabel(ref Label lb, string toAdd)
{
    if (this.InvokeRequired)
    {
        this.Invoke(new myDelegate(UpdateLabel), new object[] { lb, toAdd });
    }
    else
    {
        lb.Text = toAdd;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:55:38.337

您不必调用`.ToString`字符串类型变量。如果你的`p`为空，那么你会得到异常。你可以简单地做：

```
private void Echo(string p)
{
    lock (m_syncObject)
    {
        try
        {
            InfoBox.Text = p;
        }
        catch { }
    }
} 
```

# c# - 我可以在 .Net/C# 中为 R 编写库/包吗？

> ID：13395012
> 
> 赞同：2
> 
> 时间：2012-11-15T09:54:44.833
> 
> 标签：c#, r, dll, package

我想知道是否可以在 C# 中编写一个用于 R 的包/库。我使用我自己的二进制数据存储，它具有非常低的延迟和高吞吐量，并且我在其中存储序列化的值类型（ints/floats/longs ...），并且我也希望能够在 R 中访问相同的数据。我的二进制存储中的值类型都是按时间索引的，但是由于特定的数据结构，我看不到当前访问文件中的整个数据集和 R 中的特定子集的方法。

数据结构如下：

long, float, float ：long 是日期和时间戳，float 是时间序列数据。如果这是我对 R 包所需要的，我很高兴重写数据结构以实现标头。我不想用 C 或 C++ 而是用 C# 编写包。有没有办法做到这一点？描述其完成方式的代码片段或简短描述或链接将非常棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-08T12:29:10.453

我正在寻找相同的东西，到目前为止我刚刚找到：[https ://rclr.codeplex.com/](https://rclr.codeplex.com/)

> rClr 是 R 统计软件的软件包。目标是与 R 中的任意 .NET 代码互操作，而无需对现有代码进行任何修改。从广义上讲，.NET 之于 rJava 之于 Java。

rJava：

> rJava 是一个简单的 R 到 Java 接口。它与 .C/.Call C 接口相当。rJava 提供了 R 和 Java 之间的低级桥梁（通过 JNI）。它允许从 R 创建对象、调用方法和访问 Java 对象的字段。

# deployment - Windows Azure 超小型实例硬盘大小

> ID：13395014
> 
> 赞同：12
> 
> 时间：2012-11-15T09:54:47.580
> 
> 标签：deployment, azure, azure-web-roles

我们在两个超小型实例上拥有一个 Windows Azure Web 角色，这些实例已经运行了数周而没有出现任何问题。今天早上，我们无意中超过了一些支出限制，导致 Windows Azure 在没有任何事先警告的情况下关闭了我们的全部服务！

我们取消了支出上限并开始重新部署 Web 角色，使用已运行数周的相同代码库。令我们惊讶的是，我们得到了部署错误

`Validation Errors: Total requested resources are too large for the specified VM size.`

我们将部署升级到两个小型实例而不是超小型实例，因此部署再次运行。现在，网络角色又回到了网络中。

但是，我们仍然不明白**为什么我们的部署突然对于一个超小的实例来说太大了**。自上次成功部署到超小型实例以来，我们没有任何改变。然后，我们尝试通过将一些文件移动到 Azure 存储来消除部署大小，但即使将包文件减少了 1 MB 以上，部署仍然失败。

该`cspkg`文件（部署包）当前位于`9'359 KB`. 如果解压缩，则完整`sitesroot`文件夹的大小为`14 MB`. 这远低于`19'480 KB`x-small 实例的限制。

在我们浪费更多时间进行反复试验之前，这是我的问题：**这些是如何`19'480 KB`计算的？它只是`sitesroot`文件夹，还是压缩包，还是`sitesroot`和`approot`文件夹在一起，还是整个解压缩包？**

谢谢！

**编辑：**

![在此处输入图像描述](../Images/721004c775fe1145b67f4ce60c24c9d6.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-15T10:01:05.670

您能否验证您的本地资源是否超过 20 GB：

![在此处输入图像描述](../Images/af3ea7f4cb66c9bf4fa913f25bcb49fc.png)

# javascript - 动态添加/存储/构造 HTML 控件的推荐方法

> ID：13395016
> 
> 赞同：0
> 
> 时间：2012-11-15T09:54:51.520
> 
> 标签：javascript, jquery, html, json, asp.net-3.5

是否有推荐的方法来动态添加/故事化/构造 HTML 控件以在 HTML 页面上动态添加元素？

基本上，我正在开发一个基于小部件的系统，用户可以在其中选择她/他想要显示的小部件。S/He 可以根据需要在屏幕上显示尽可能多或尽可能少的小部件，并且他们也可以同时多次显示相同的小部件。

该脚本看起来像这样：

```
success: function( widget_shell ) 
{ 

    if( widget_shell.d[0] ) {

        $(".column").empty();

        var i = 0;

        for ( i = 0; i <= widget_shell.d.length - 1; i++ ) {

            var $widget = $("<div class='widget widget_" + widget_shell.d[i].widget_id + "'>").appendTo( $(".column_" + widget_shell.d[i].column_id) );
            $("<div class='widget_header widget_header_" + widget_shell.d[i].widget_id + "'>").appendTo( $widget );
            $("<div class='widget_sub_header widget_sub_header_" + widget_shell.d[i].widget_id + "'>").appendTo( $widget );
            $("<div class='widget_content widget_content_" + widget_shell.d[i].widget_id + "'>").appendTo( $widget );
            $("<div class='widget_footer widget_footer_" + widget_shell.d[i].widget_id + "'>").appendTo( $widget );

        } 
```

每个`.widget`都需要该部分中的按钮、文本框等控件`.widget_sub_header`。推荐的方法是什么？ **“那个”，如如何将更多 HTML 控件放入`.widget_sub_header`.** 为数据库中的控件添加 HTML？以某种方式连接到包含 HTML 控件的外部文件并添加它们？或其他一些方法？

我想我的两个主要问题是：

1.  易于维护
2.  服务器资源友好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:41:44.353

jquery-ZenCoding 是创建一些嵌套 html 元素的简单方法： [https ://github.com/zodoz/jquery-ZenCoding](https://github.com/zodoz/jquery-ZenCoding)

例子：

```
$.zen("div#widget>ul.instrument>(li{piano}+li{guitare}+li{flute})"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:08:42.833

这样的事情呢？我建议不要添加带有 id 的类，而是在父级上添加一个*实际的 id，这就是定位子元素所需的全部内容。*

```
function createWidget( id ) {

  var widget = [
    '<div class="widget">',
      '<div class="widget_header"></div>',
      '<div class="widget_sub_header"></div>',
      '<div class="widget_content"></div>',
      '<div class="widget_footer"></div>',
    '</div>'
  ].join('');

  return $( widget ).attr( 'id', 'widget_'+ id );

}

$.each( widget_shell.d, function( i,v ) {
  $('.column_'+ v.column_id)
    .append( createWidget( v.widget_id ) );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:10:40.020

我会添加一个小型模板引擎。John Resig 制作了一个非常简单的，我经常在以下位置使用它：

[John Resig 微模板](http://ejohn.org/blog/javascript-micro-templating/)

您可能会再次做这种事情，因此模板引擎非常方便。

如果您不喜欢那个，您可以在以下位置查看大量的微模板资源：

[Microjs 模板](http://microjs.com/#template)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:18:15.220

我曾经在类似的小部件系统上工作过。

这就是我管理它的方式：

有一个隐藏的 div 容器，其中包含所有模板元素。

```
<div id='widget-templates'>
     <div class='widget1-id' >
           <input type='text' class='ytSearch'/>
           <button id='btnYtSearch'>Search</button> 
     </div>
     <div class='widget2-id'></div>
     ... 
     <!-- etc etc -->
     ...
</div> 
```

我使用了一个名为 widgetFactory 的对象，它包含从模板创建小部件所需的所有 javascript 代码。

```
var widgetFactory = {
    youtubeSearch: function(data){
         var $generatedWidget = $('#widget-templates > .widget1-id').clone();

         // prepopulate with some data if requested (usually when binding data to an already existing widget)
         // ...            

         // attach events
         // ...

         return $generatedWidget;
    }
} 
```

然后使用外部 javascript 逻辑，我将只将小部件数据（作为 JSON）和小部件类型保存到数据库中。tbl_widgets（id，名称，类型） tbl_user_widget（user_id，widget_id，数据）

请注意，这只是我的记忆，可能有一个更深刻的解决方案，但我希望它可以为您的用户自定义小部件系统带来任何新的想法。

# c# - 从后面的代码动态生成的项目符号列表

> ID：13395019
> 
> 赞同：1
> 
> 时间：2012-11-15T09:54:54.653
> 
> 标签：c#, asp.net, bulletedlist

拜托，你能帮我告诉我如何动态生成这段代码：

```
<li>
          <a href="../adGallery/images/pictures/1.jpg">
            <img src="../adGallery/images/pictures/thumbs/1.jpg" class="image0"/>
          </a>
        </li>
        <li>
          <a href="../adGallery/images/pictures/2.jpg">
            <img src="../adGallery/images/pictures/thumbs/2.jpg" title="A title for 10.jpg" alt="This is a nice, and incredibly descriptive, description of the image 10.jpg" class="image1"/>
          </a>
        </li> 
```

从我的代码后面？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:08:23.200

我建议使用 a`Repeater`来尽可能地自定义您的控件。一个`BulletedList`控件是有限的。无论如何，这是一个尝试：

```
<asp:BulletedList id="ImagesBulletedList" 
        BulletStyle="Disc"
        DisplayMode="HyperLink" 
        OnClick="ImageBulletedList_Click"
        runat="server">    
</asp:BulletedList> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ListItem listItem = new ListItem("Picture 1", "../adGallery/images/pictures/1.jpg");
        listItem.Attributes.Add("class", "image0");
        ImagesBulletedList.Items.Add(listItem);
        listItem = new ListItem("Picture 2", "../adGallery/images/pictures/2.jpg");
        listItem.Attributes.Add("class", "image1");
        listItem.Attributes.Add("title", "A title for 10.jpg");
        ImagesBulletedList.Items.Add(listItem);
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:58:31.993

使用 asp:Repeater 控件。

这是一个关于做这种事情的教程：

[http://www.codeguru.com/csharp/.net/net_asp/controls/article.php/c19299/The-ASPNET-Repeater-Web-Server-Control.htm](http://www.codeguru.com/csharp/.net/net_asp/controls/article.php/c19299/The-ASPNET-Repeater-Web-Server-Control.htm)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T10:16:56.973

使用此代码方法：

```
private string getDynamicHTML(int count)
{
    string message = "<ul>";
    for (int i = 0; i < count; i++)
    {
        message = message + "<li>";
        message = message + "<a href='../adGallery/images/pictures/" + i +".jpg'>";
        message = message + "<img src='../adGallery/images/pictures/thumbs/" + i + ".jpg' title='A title for 10.jpg' alt='This is a nice, and incredibly descriptive, description of the image 10.jpg' class='image1'/></a>";
        message = message + "</li>";
    }
    return message + "</ul>";
} 
```

并将标签放置在所需位置并将结果绑定到该标签

```
Label1.Text=getDynamicHTML(10); 
```

这将呈现为所需的 HTML

# math - 计算矩阵中对角线元素的总和

> ID：13395022
> 
> 赞同：2
> 
> 时间：2012-11-15T09:55:07.043
> 
> 标签：math, for-loop, matrix

我想将矩阵中的交叉对角线元素加在一起。例如，我有一个二维的 3*3 矩阵，我想将其转换为一维：

```
 -------------------
      |  1  |  2  |  3  |
      -------------------
 A=   |  4  |  5  |  6  |
      -------------------
      |  7  |  8  |  9  |
      ------------------- 
```

最终输出将是，

```
 ____ ____ ____ ____ ____
 B= |1   | 6  | 15 | 14 |  9 |
    |____|____|____|____|____| 
```

第一个交叉对角线`A[0][0]`将被复制到`B[0]`.

然后下一个交叉对角线元素`A[1][0]`和`A[0][1]`将被添加并复制到`B[1]`，*即*4 和 2 将被添加。

然后下一个交叉对角线元素`A[2][0]`and将被添加并复制到`A[1][1]`，即*7、5*和 3 将被添加。`A[0][2]``B[2]`

 *等等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:05:27.280

请注意，对于每个对角线，行索引和列索引的总和等于 B 数组的索引。基于这个事实，你可以做一个这样的算法：

```
// assuming the width and length of the Matrix is N
// it's good you have some ideas of the range of idea, try figure it out by yourself? 
// definitely it should be a function of N
for (int i=0;i<F(N);i++) { 
  for (int j=0;j<=i;j++) { // consider why j should be in range (0,i) ?
    // some cumulatively add here
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:50:24.117

+1 给@Krunal 的好问题和@POPOL 的答案，很想看看它是如何工作的，所以创建了以下“正在进行的工作”：[fiddle here](http://jsfiddle.net/am_d/K6eBC/)。

我将查看循环中需要什么，以便消除标记超出范围的 try 例程。

```
 <!DOCTYPE HTML>
    <html lang="en-US">
    <head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript">
        var a = [   [1,2,3],
                    [4,5,6],
                    [7,8,9],
                    [10,11,12],
                    [13,14,15]
                    ];
        var b = [],N = 4; 
        var item;
        for (i=0;i<2*N-1;i++) {
          b[i] = 0;
          for (j=0;j<=i;j++) {
            try {
                item  = (a[j][i-j] !== undefined)?a[j][i-j]:0;
            }catch(e) {
                console.log("out of range");
                item  =0;
            }
            b[i] +=item;
          }
        }
    </script>
    </head>
    <body>
    <div id="output"></div>
    <script type="text/javascript">
        for (w=0;w<b.length-1;w++) {
            document.getElementById("output").innerHTML+=b[w] +",";
        } 
        document.getElementById("output").innerHTML+=b[b.length-1] ;
    </script>
    </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T23:28:12.483

这是一个不使用 for 循环的两行解决方案：

```
x=rbind(matrix(0, nc=ncol(A), nr=ncol(A)-1), A, matrix(0, nc=ncol(A), nr=ncol(A)-1))  
laply(seq(sum(dim(A))-1), function(l) sum(diag(t(x[, ncol(A):1])[, l:nrow(x)]))) 
```

`[1] 1 6 15 14 9`

该`laply()`函数是 plyr 包的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:04:19.183

需要考虑的一些想法：

*   从 N x N 矩阵 A 的对角线生成的数组 B 的长度（以 N 计）是多少？让我们将该长度称为L。
*   只是为了强调一点，L 与 A 有什么关系？这与外循环直接相关。
*   B 中每个元素的加数的位置是如何相互关联的？即它们彼此是“对角线”的，但是你将如何用数学来表达呢？
*   如果您可以用数学方法表达，您将如何在它们之间进行迭代以找到它们的总和？这将帮助您处理内部循环。*

# twitter-bootstrap - Bootstrap轮播：滑动时图像超出div

> ID：13395028
> 
> 赞同：8
> 
> 时间：2012-11-15T09:55:20.137
> 
> 标签：twitter-bootstrap, carousel, transition, slide

我有一个我无法弄清楚的问题。我正在使用引导程序的轮播，除了转换之外一切正常：当滑动转换开始时，下一个项目出现在 myCarousel div 之外，并且以前的活动项目滑出 myCarousel div，因为它们被我的下一个项目替换。

这是我的html代码：

```
<div id="myCarousel" class="carousel slide span6">
     <div id="carousel-inner">
            <div class="active item">
                 <img src="img/abstract-landscape-paintings-bursting-sun.jpg" />
             </div>
             <div class="item">
                  <img src="img/charnwood_forest_landscape.jpg" />
             </div>
      </div>
      <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

我只使用轮播脚本：

```
 $(document).ready(function() {
    $(".carousel").carousel({
        interval: 5000,
        pause: "hover",
    });
}); 
```

这是我的问题示例的链接，因此您可以检查我的整个代码：[http ://todoapp.nfshost.com/slide](http://todoapp.nfshost.com/slide)

任何人都可以看到什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-15T10:01:43.203

```
<div id="myCarousel" class="carousel slide span6" style="overflow:hidden">
 <div id="carousel-inner">
        <div class="active item">
             <img src="img/abstract-landscape-paintings-bursting-sun.jpg" />
         </div>
         <div class="item">
              <img src="img/charnwood_forest_landscape.jpg" />
         </div>
  </div>
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a> 
```

嘿朋友添加隐藏在 myCarousel id 中的溢出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T10:02:32.293

您可以将其添加到您的 css 中：

```
.carousel { overflow: hidden; } 
```

和

```
.item { overflow: hidden: } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T08:02:18.853

只需添加`width:100%;`到图像

```
img {
    width: 100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-09T19:16:42.280

我尝试了 Kader 的解决方案来设置“溢出：隐藏”，但由于某种原因，它只适用于大屏幕。div 外的溢出仍然出现在较小的屏幕上。

最终，这是我添加到页面顶部以解决此问题的样式：

```
.carousel-inner > .next {
    display: none;
 }
 .carousel-inner > .prev {
    display: none;
 } 
```

传入图像在过渡期间添加了 .next 或 .prev 类。通过隐藏此元素，它可以防止溢出问题。

可能有一个更优雅的解决方案，但这是快速、简单且有效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-14T13:42:59.323

如果`overflow:hidden`然后尝试固定高度`carousel-item`

```
#carousel-item {
    height: 40rem;
} 
```

和，

```
img {
    width: 100%;
    height: 100%;
    display: block;
    background-size: cover;
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-03T23:19:30.793

好的，所以这些解决方案都不适合我，但我终于发现在轮播上使用最大高度可以避免图像超出范围：

```
.carousel {
    max-height: whatever;
} 
```

# matlab - 二进制文件 - 矩阵操作

> ID：13395035
> 
> 赞同：0
> 
> 时间：2012-11-15T09:56:03.590
> 
> 标签：matlab, matrix

我有几个具有已知结构的二进制文件（8,12000，real*4）。8是变量的个数，12000代表时间步长。从这些二进制文件中，我需要得到一个最终的 16x9 矩阵，定义如下：

*   第一列包含文件名标识。
*   对角线上是对应变量的极值（最大值和最小值）。
*   其他变量的同时值应在行中给出。

目前我正在使用此代码

```
 for i = 1:num_files
    for j = 1:num_ext
        fid = fopen([fullfile(BEGINPATH{1},FILELIST{i}) '.$' VAREXTENSION{j}],'r');
        A = fread(fid,[DLC_dimens{i}{3}(1) DLC_dimens{i}{3}(2)],'real*4');
        for k = 1:size(A,1)
            [max_val(k,i) max_idx(k,i)] = max(A(k,:));
            [min_val(k,i) min_idx(k,i)] = min(A(k,:));
        end
        fclose(fid);
    end
end

% Pre-allocate ULS matrices
uloads = cell(2*size(A,1),size(A,1)+1);
uloads_temp = cell(2*size(A,1),size(A,1)+1);

% Generate ULS matrix for the first file
for i = 1:size(uloads,1)
    uloads{i,end} = DLC_dimens{1}(1);
end

fid = fopen([fullfile(BEGINPATH{1},FILELIST{1}) '.$' VAREXTENSION{1}],'r');
A = fread(fid,[DLC_dimens{i}{3}(1) DLC_dimens{i}{3}(2)],'real*4');

for j = 1:size(uloads,2)-1
    uloads{1,j} = A(j,max_idx(1,1))*DLC_dimens{1}{4};
    uloads{2,j} = A(j,min_idx(1,1))*DLC_dimens{1}{4};
    uloads{3,j} = A(j,max_idx(2,1))*DLC_dimens{1}{4};
    uloads{4,j} = A(j,min_idx(2,1))*DLC_dimens{1}{4};
    uloads{5,j} = A(j,max_idx(3,1))*DLC_dimens{1}{4};
    uloads{6,j} = A(j,min_idx(3,1))*DLC_dimens{1}{4};
    uloads{7,j} = A(j,max_idx(4,1))*DLC_dimens{1}{4};
    uloads{8,j} = A(j,min_idx(4,1))*DLC_dimens{1}{4};
    uloads{9,j} = A(j,max_idx(5,1))*DLC_dimens{1}{4};
    uloads{10,j} = A(j,min_idx(5,1))*DLC_dimens{1}{4};
    uloads{11,j} = A(j,max_idx(6,1))*DLC_dimens{1}{4};
    uloads{12,j} = A(j,min_idx(6,1))*DLC_dimens{1}{4};
    uloads{13,j} = A(j,max_idx(7,1))*DLC_dimens{1}{4};
    uloads{14,j} = A(j,min_idx(7,1))*DLC_dimens{1}{4};
    uloads{15,j} = A(j,max_idx(8,1))*DLC_dimens{1}{4};
    uloads{16,j} = A(j,min_idx(8,1))*DLC_dimens{1}{4};
end
fclose(fid);

% ULS temporary matrix generation
uls = uloads;

for i = 2:num_files
    fid = fopen([fullfile(BEGINPATH{1},FILELIST{i}) '.$' VAREXTENSION{1}],'r');
    A = fread(fid,[8 12000],'float32');
    for j = 1:size(uloads,1)
        uloads_temp{j,9} = DLC_dimens{i}(1);
    end
    for k = 1:size(uloads,2)-1
        uloads_temp{1,k} = A(k,max_idx(1,i))*DLC_dimens{i}{4};
        uloads_temp{2,k} = A(k,min_idx(1,i))*DLC_dimens{i}{4};
        uloads_temp{3,k} = A(k,max_idx(2,i))*DLC_dimens{i}{4};
        uloads_temp{4,k} = A(k,min_idx(2,i))*DLC_dimens{i}{4};
        uloads_temp{5,k} = A(k,max_idx(3,i))*DLC_dimens{i}{4};
        uloads_temp{6,k} = A(k,min_idx(3,i))*DLC_dimens{i}{4};
        uloads_temp{7,k} = A(k,max_idx(4,i))*DLC_dimens{i}{4};
        uloads_temp{8,k} = A(k,min_idx(4,i))*DLC_dimens{i}{4};
        uloads_temp{9,k} = A(k,max_idx(5,i))*DLC_dimens{i}{4};
        uloads_temp{10,k} = A(k,min_idx(5,i))*DLC_dimens{i}{4};
        uloads_temp{11,k} = A(k,max_idx(6,i))*DLC_dimens{i}{4};
        uloads_temp{12,k} = A(k,min_idx(6,i))*DLC_dimens{i}{4};
        uloads_temp{13,k} = A(k,max_idx(7,i))*DLC_dimens{i}{4};
        uloads_temp{14,k} = A(k,min_idx(7,i))*DLC_dimens{i}{4};
        uloads_temp{15,k} = A(k,max_idx(8,i))*DLC_dimens{i}{4};
        uloads_temp{16,k} = A(k,min_idx(8,i))*DLC_dimens{i}{4};
    end
    if uloads_temp{1,1}(:) > uls{1,1}(:)
        uls(1,:) = uloads_temp(1,:);
    end

    if uloads_temp{2,1}(:) < uls{2,1}(:)
        uls(2,:) = uloads_temp(2,:);
    end

    if uloads_temp{3,2}(:) > uls{3,2}(:)
        uls(3,:) = uloads_temp(3,:);
    end

    if uloads_temp{4,2}(:) < uls{4,2}(:)
        uls(4,:) = uloads_temp(4,:);
    end

    if uloads_temp{5,3}(:) > uls{5,3}(:)
        uls(5,:) = uloads_temp(5,:);
    end

    if uloads_temp{6,3}(:) < uls{6,3}(:)
        uls(6,:) = uloads_temp(6,:);
    end

    if uloads_temp{7,4}(:) > uls{7,4}(:)
        uls(7,:) = uloads_temp(7,:);
    end

    if uloads_temp{8,4}(:) < uls{8,4}(:)
        uls(8,:) = uloads_temp(8,:);
    end

    if uloads_temp{9,5}(:) > uls{9,5}(:)
        uls(9,:) = uloads_temp(9,:);
    end

    if uloads_temp{10,5}(:) < uls{10,5}(:)
        uls(10,:) = uloads_temp(10,:);
    end

    if uloads_temp{11,6}(:) > uls{11,6}(:)
        uls(11,:) = uloads_temp(11,:);
    end

    if uloads_temp{12,6}(:) < uls{12,6}(:)
        uls(12,:) = uloads_temp(12,:);
    end

    if uloads_temp{13,7}(:) > uls{13,7}(:)
        uls(13,:) = uloads_temp(3,:);
    end

    if uloads_temp{14,7}(:) < uls{14,7}(:)
        uls(14,:) = uloads_temp(14,:);
    end

    if uloads_temp{15,8}(:) > uls{15,8}(:)
        uls(15,:) = uloads_temp(15,:);
    end

    if uloads_temp{16,8}(:) < uls{16,8}(:)
        uls(16,:) = uloads_temp(16,:);
    end
    fclose(fid);
end 
```

现在问题来了：我在想一个程序

1.  我只使用第一个文件生成一个临时 uloads_temp 矩阵；
2.  计算第 i 个文件的 uloads 矩阵 (i = 2:num_files)
3.  比较第 i 个 uloads 矩阵和临时 uloads_temp 之间对角线上的项： a) 如果第 i 个 ulaods 的元素比各自的 uloads_temp 值大（小）b) 更新 uloads_temp 行，条件 a) 发生。

我希望我能正确解释一切。你能给我一个关于如何执行所描述的循环的提示吗？

我提前感谢大家。

WKR，弗朗切斯科

PS：一切都可以通过填充随机数的矩阵来重现；我只是参考文件列表复制并粘贴了我的代码。

# web-services - 使用 Web 服务从共享点删除文件

> ID：13395038
> 
> 赞同：0
> 
> 时间：2012-11-15T09:56:14.963
> 
> 标签：web-services, sharepoint

我正在尝试从共享点文档库中删除文件。我的应用程序是 C#，它使用 sharepoint 的 Web 服务。想知道如何做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:45:15.630

**使用 Web 服务在 SharePoint 中删除文档**

1.将Web引用添加到http://[您的站点]/_vti_bin/Lists.asmx

2.您需要**文档ID、库名称和**要删除的文档的Url

```
var spWebServiceLists = "http://[your site]/_vti_bin/Lists.asmx";
var listService = new Lists
{
    Credentials = CredentialCache.DefaultCredentials,
    Url = spWebServiceLists
};

string id = 10;
string library = @"Shared Documents";
string url = @"http://[your site]/Shared Documents/Test.docx";
string xml = "<Method ID='1' Cmd='Delete'>" + 
             "<Field Name='ID'>" + id + "</Field>" +
             "<Field Name='FileRef'>" + HttpUtility.UrlDecode(url) + "</Field>" +
             "</Method>";

/*Get Name attribute values (GUIDs) for list and view. */
System.Xml.XmlNode ndListView = listService.GetListAndView(library, "");
string strListID = ndListView.ChildNodes[0].Attributes["Name"].Value;
string strViewID = ndListView.ChildNodes[1].Attributes["Name"].Value;

/*Create an XmlDocument object and construct a Batch element and its
attributes. Note that an empty ViewName parameter causes the method to use the default view. */
System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
System.Xml.XmlElement batchElement = doc.CreateElement("Batch");
batchElement.SetAttribute("OnError", "Continue");
batchElement.SetAttribute("ListVersion", "1");
batchElement.SetAttribute("ViewName", strViewID);

/*Specify methods for the batch post using CAML. To update or delete, 
specify the ID of the item, and to update or add, specify 
the value to place in the specified column.*/
batchElement.InnerXml = xml;

XmlNode item;
item = listService.UpdateListItems(library, batchElement); 
```

我刚刚测试了这段代码并且运行良好。

有关更多信息，请参阅以下链接

[Lists.UpdateListItems 方法](http://msdn.microsoft.com/en-us/library/lists.lists.updatelistitems%28v=office.12%29.aspx)

[如何：更新列表项](http://msdn.microsoft.com/en-us/library/ms440289%28v=office.14%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:03:47.727

如果您使用 SharePoint 2010，则可以使用 CSOM 访问 SharePoint Web 服务。[此链接](http://msdn.microsoft.com/en-us/library/ee539976.aspx)可能有助于执行 crud 操作。如果您使用 SharePoint 2013，还有 CSOM API，它具有与 2010 类似的功能。

# node.js - NodeJS + Mongo native – 在查询之前检查集合是否存在

> ID：13395041
> 
> 赞同：4
> 
> 时间：2012-11-15T09:56:24.963
> 
> 标签：node.js, mongodb, collections

我有一个函数，试图从 MongoDB 中的设置集合中获取特定值。设置集合中包含设置值的设置对象的标记是 {'settings':'settings'}。架构是：

```
collection:setting
|--object
   |--{'settings':'settings'}
   |--{'valueA':'valueA'}
   |--... 
```

问题是当我第一次查询设置对象时，集合“设置”根本不存在。所以，

```
exports.getInstruments = function (callback) {
db.collection("settings", function(error, settings) {
    settings.find({ "settings" : "settings" }), (function(err, doc) {
           callback(doc.instruments);
    }); 
]);  
} 
```

只是挂起并且不调用回调。如果集合不存在，我应该返回“”或未定义，否则 - doc.instrumens。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-06T16:18:01.050

您可以使用一个`exists()`函数来确定是否执行挂起的代码。

```
> db.getCollection('hello').exists()
null
> db.getCollection('world').exists()
{ "name" : "testdb.world" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:13:29.557

您可能会利用`db.createCollection`which 显式创建一个集合：

```
> db.createCollection("asd")
{ "ok" : 1 }
> db.createCollection("asd")
{ "errmsg" : "collection already exists", "ok" : 0 } 
```

只需根据 ok 字段检查命令是否成功。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T13:43:14.953

您不需要专门处理新的收集案例，我认为问题出在您的代码上。

除了一些语法问题之外，主要问题是`find`传递 a[`Cursor`](http://mongodb.github.com/node-mongodb-native/api-generated/cursor.html)到您的回调函数，而不是第一个匹配的文档。如果您只需要一个文档，则应该使用`findOne`。

这应该有效：

```
exports.getInstruments = function (callback) {
    db.collection("settings", function(error, settings) {
        settings.findOne({ "settings" : "settings" }, function(err, doc) {
            callback(doc && doc.instruments);
        });
    });
}; 
```

# ruby - 使用 Amazon-SDK Ruby gem 在 Amazon S3 上上传文件后更新内容类型

> ID：13395045
> 
> 赞同：4
> 
> 时间：2012-11-15T09:56:28.020
> 
> 标签：ruby, amazon-s3

我正在运行一个脚本，在我的一些 S3 对象已上传到 S3 存储桶后更新元数据字段。在初始化时，我通过检查文件名来设置内容类型。

```
def save_to_amazon(file, s3_object, file_name, meta_path)
  puts "uploaded #{file} to Amazon S3"
  content_type = set_content_type(file_name)
    s3_object.write(file.get_input_stream.read, :metadata => { :folders => meta_path}, :content_type => content_type)
end 
```

此时，S3 内容类型适用于这些对象。当我稍后更新元数据时会出现问题。我运行这样的东西：

```
s3_object.metadata['folders'] = "some string" 
```

此时，我`s3_objects.content_type`在更新元数据后运行时返回一个空字符串。

`s3_object.content_type =`不可用。

据我通过阅读[Rdoc](http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html)可以看出，上传 S3 文件后无法分配内容类型。我尝试过使用元数据方法，例如

```
s3.object.metadata['content_type'] = "some string"
s3.object.metadata['content-type'] = "some string" 
```

这两个似乎都分配了一个新的自定义元数据属性，而不是更新对象的 mime 类型。

有没有办法设置它，还是我需要再次完全重新上传文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T14:07:03.350

为了详细说明 tkotisis 响应，这是我使用 copy_to 更新内容类型所做的。[您可以使用 s3object.head[:metadata] 提取现有元数据以将其复制到此处](https://groups.google.com/forum/?fromgroups=#!topic/ruby-fog/5jL8YUBb8Ew)引用。

```
amazon_bucket.objects.each do |ob|
    metadata = ob.head[:metadata]
    content_type = "foo/bar"
    ob.copy_to(ob.key, :metadata => metadata, :content_type => content_type)
end 
```

**编辑**

```
amazon_bucket.objects.each do |ob|
    metadata = ob.metadata
    content_type = "foo/bar"
    ob.copy_to(ob.key, :metadata{:foo => metadata[:foo]}, :content_type => content_type)
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T11:29:45.143

您的示例代码仅修改您的内存对象。要修改实际 S3 对象的元数据，请发出带有目标键的复制请求，即当前对象之一。

**编辑**

根据[文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/CopyingObjectsExamples.html)

> 使用复制操作，您可以通过复制对象并删除原始对象来重命名对象。
> 
> 复制对象时，您可能决定更新一些元数据值。例如，如果您的源对象配置为使用标准存储，您可以选择为对象副本使用减少冗余存储。您可能还决定更改源对象上存在的一些用户定义的元数据值。请注意，如果您选择在复制期间更新任何对象的用户可配置元数据（系统或用户定义的），那么您必须明确指定所有用户可配置元数据，即使您只更改其中一个元数据值，存在在您的请求中的源对象上。

我还没有尝试过，但是使用 Ruby SDK 这可能是通过

```
- (S3Object) copy_to(target, options = {}) 
```

[方法](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#copy_to-instance_method)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-02T07:11:42.277

我正在使用 gem "aws-sdk", "~> 2" (2.2.3)

假设您有一个没有设置内容类型的当前文件（内容类型将默认设置为“二进制/八位字节流”）

### 如何检查内容类型文件？

如果你使用**RestClient**如下：

对象意味着 Aws::S3::Object

```
bucket = Aws::S3::Bucket.new(bucket_name)
object = bucket.object(key)

RestClient.head(object.presigned_url(:head)) do |resp|
  puts resp.headers
  puts resp.headers[:content_type]
end 
```

### 如何更改内容类型文件？

就我而言，我想将内容类型更改为“image/jpeg”，当前对象是“binary/octet-stream”，这样你就可以

```
object.copy_from(
  object, 
  content_type: 'image/jpeg', 
  metadata_directive: 'REPLACE'
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T09:19:07.300

确保将 ACL 设置为 :public read，否则复制后您的文件将不可用。

这对我有用：

```
bucket.objects.with_prefix('my_assets').each do |obj|
  metadata = obj.head[:metadata]
  content_type = "application/pdf"
  obj.copy_to(obj.key, :metadata => metadata, :content_type => content_type)
  obj.acl = :public_read
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-13T18:48:37.793

虽然不是 Ruby，但我发现[这个项目](https://github.com/dailymuse/s3-content-type-fixer)根据扩展名和重置自动猜测 mime 类型是通过其他答案所指的相同复制方法。它不是非常快，因为它必须复制 blob。如果您需要让它更快地发生，您可能可以通过 IronWorker 之类的东西来划分工作并并行复制。我[为重置权限做了类似的事情](https://gist.github.com/eric1234/4667599)。

# javascript - 测试主干视图时在内存中的元素上触发事件

> ID：13395048
> 
> 赞同：0
> 
> 时间：2012-11-15T09:56:32.747
> 
> 标签：javascript, backbone.js, integration-testing, jasmine

我正在为我的 Backbone 视图/模型/集合编写一些集成测试。当我调用`render`my`View`时，它只是将模板呈现给它自己的`el`属性，因此 html 只是存储在内存中而不是页面上。下面是一个简单的模型，以及一个带有绑定到 DOM 元素的点击事件的视图：

```
var model = Backbone.Model.extend({
    urlRoot: '/api/model'
});

var view = Backbone.View.extend({
    events: {
        'click #remove': 'remove'
    }
    render: function () {
        var html = _.template(this.template, this.model.toJSON());
        this.$el.html(html);
    },
    remove: function () {
        this.model.destroy();
    }
}); 
```

我正在使用 Jasmine 编写测试。在下面的测试中，我要做的就是监视该函数，以查看在为我传递给视图的模板中存在`remove`的元素触发 click 事件时是否调用它。`#remove`

```
// template

<script id="tmpl">
    <input type="button" value="remove" id="remove"/>
</script>

// test

describe('view', function () {

    var view;

    beforeEach(function () {
        view = new view({
            template: $('#tmpl').html(),
            model: new model()
        });
    });

    it('should call remove when #remove click event fired', function () {       
        view.$('#remove').click();

        var ajax = mostRecentAjaxRequest();
        expect(ajax.url).toBe('/api/model');
        expect(ajax.method).toBe('DELETE');
    });

}); 
```

但是，由于该`#remove`元素在内存中，并且实际上并未添加到 DOM 中，因此我不确定您将如何模拟单击事件。事实上，我什至不确定这是否可能？

想要在测试中执行此操作似乎有点奇怪，但是通过我的测试，我试图测试**行为**而不是**实现**，这样我就不关心两者之间发生了什么——我只想测试一下，如果用户点击`#remove`一个`DELETE`请求被发送回服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T20:30:05.847

在我看来，您好像忘记在按钮`render()`之前调用视图。`click()`并且模型需要有一个`id`或主干实际上不会尝试对服务器进行删除调用。我之前已经测试过很多这样的视图，没有任何问题。

我刚刚对 jasmine 2.0 和 jasmine-ajax 2.0 进行了类似的测试。

实时代码：

```
var MyModel = Backbone.Model.extend({
  urlRoot: '/api/model'
});

var MyView = Backbone.View.extend({
  events: {
    'click #remove': 'remove'
  },
  initialize: function(options) {
    this.template = options.template;
  },
  render: function () {
    var html = _.template(this.template, this.model.toJSON());
    this.$el.html(html);
  },
  remove: function () {
    this.model.destroy();
  }
}); 
```

眼镜：

```
describe("testing", function() {
  var view;

  beforeEach(function() {
    jasmine.Ajax.install();
    view = new MyView({
      template: '<input type="button" value="remove" id="remove"/>',
      model: new MyModel({id: 123})
    });
    view.render();
  });

  it('should call remove when #remove click event fired', function () {
    view.$('#remove').click();

    var ajax = jasmine.Ajax.requests.mostRecent();
    expect(ajax.url).toBe('/api/model/123');
    expect(ajax.method).toBe('DELETE');
  });
}); 
```

# java - 在嵌套的sql语句java中连接动态值

> ID：13395054
> 
> 赞同：-1
> 
> 时间：2012-11-15T09:56:44.667
> 
> 标签：java, sql

我尝试查找有关它的信息，但似乎没有关于它的示例。
我有这条线：

```
long userID = user.getId();
String query = "select userclient.username from twitter_content.userclient where userclient.userid = " +
            "(select follower.followerid from twitter_content.follower where follower.followerid = userclient.userid and follower.userid = "+userID+")"; 
```

但 Eclipse 将“userID”读取为字符串，而不是变量。如何让 Eclipse 将“userID”读取为变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:58:53.833

最佳实践是使用[PreparedStatement](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)和 placeholder 输入参数`?`。

示例用法（来自 JavaDocs）：

```
PreparedStatement stmt = con.prepareStatement("UPDATE EMPLOYEES SET SALARY = ? WHERE ID = ?");
stmt.setBigDecimal(1, 153833.00)
stmt.setInt(2, 110592) 
```

将该示例应用到您的案例中，您会得到如下信息：

```
// prepare connection "conn" earlier
long userID = user.getId();
PreparedStatement stmt = conn.prepareStatement("select userclient.username from twitter_content.userclient where userclient.userid = (select follower.followerid from twitter_content.follower where follower.followerid = userclient.userid and follower.userid = ?)");
stmt.setLong(1, userID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:03:22.200

尝试这个：：

```
long userID = user.getId();
StringBuilder queryBuilder = new StringBuilder("select userclient.username from twitter_content.userclient where userclient.userid =");
queryBuilder.append("(select follower.followerid from twitter_content.follower where follower.followerid = userclient.userid and follower.userid = ?)");
PreparedStatement stmt = con.prepareStatement(queryBuilder.toString());
stmt.setInt(1, userId); 
```

# grails - GORM - all-delete-orphan 不起作用

> ID：13395056
> 
> 赞同：2
> 
> 时间：2012-11-15T09:57:02.107
> 
> 标签：grails, grails-orm

我在 mygrails 项目中有 2 个名为 Profile 和 License 的课程 这是课程中重要内容的概述

```
class Profile {

    Set<Licence> licenceKeys

    static hasMany = [licenceKeys:Licence]

   static constraints = {
        licenceKeys nullable:true
    }
    static mapping = {
        licenceKeys cascade: 'all-delete-orphan'
    }
}

class Licence {

    Profile profile
    String licenceKey

    static belongsTo = [profile:Profile]

    static constraints = {
        profile nullable:false
        licenceKey blank:true, nullable:true, unique:true
    }   
} 
```

当我在我的一个控制器中运行以下代码时

```
 if (!profile.licenceKeys.clear()) {
        log.error ("Error occured removing licence keys from the database");
        userProfile.errors.each { err -> println err; }
    }  else {
        log.info("Successfully remove licence keys from the database");
    } 
```

我在控制台中收到以下错误消息，并且 licencekeys 保留在数据库中

我有 2 个问题是否可以为我收到的错误消息获得更好的调试输出我是否遗漏了任何内容以确保从数据库中删除 licekeys？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:31:50.740

该`clear()`方法实际上不会执行从您要在`clear()`. 尝试...

```
profile.licenceKeys.clear();
if (!profile.save(flash:true)) {
    log.error ("Error occured removing licence keys from the database");
    userProfile.errors.each { err -> println err; }
}  else {
    log.info("Successfully remove licence keys from the database");
} 
```

对于您的第二个问题，您将希望从保存失败的域对象中获取错误，如下所示......

```
 if (!profile.save(flash:true)) {
    log.error ("Error occured removing licence keys from the database");
    profile.errors.each { err -> println err; }
} 
```

# python - 在科莫多编辑中无法识别 pyodbc

> ID：13395058
> 
> 赞同：1
> 
> 时间：2012-11-15T09:57:08.750
> 
> 标签：python, pyodbc, komodoedit

Komodo Edit 7 似乎无法识别 pyodbc-3.0.6。按照[http://code.google.com/p/pyodbc/](http://code.google.com/p/pyodbc/)的安装说明，通过命令行解释器识别模块；连接到 SQL Server 并通常按预期运行。

但是，当使用 Komodo 时，Edit`import pyodbc`无法识别模块，随后自动完成功能被禁用。使用该模块不是一个基本问题，但禁用该功能会令人恼火。

我正在运行 Python 2.7，64 位。

背景阅读表明 Komodo 是 32 位的，只有通过升级到 Komodo IDE 和自动 ActivePython 模块更新才能获得对 pyodbc 的支持。是这么简单还是有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:04:58.997

Komodo 使用[CIX (codeintel XML) 文件](http://support.activestate.com/faq/codeintel-cix-schema)来描述二进制库的自动完成信息。

不幸的是，我无法为 pyodbc 找到一个；您必须自己创建这样的文件。您可以[在 Komodo 常见问题解答中找到有关如何执行此操作的说明](http://community.activestate.com/faq/generate-python-api-catalog)：

```
svn co http://svn.openkomodo.com/repos/openkomodo/trunk/src/codeintel/support/gencix/python python_gencix
cd python_gencix
python gencix.py --onefile=pyodbc.cix --name="PyODBC" --description="Python ODBC module" pyodbc 
```

# linux - 后缀：为某个命令管道别名设置权限

> ID：13395059
> 
> 赞同：4
> 
> 时间：2012-11-15T09:57:14.227
> 
> 标签：linux, permissions, pipe, alias, postfix-mta

我正在尝试为 Postfix 中的命令设置一个别名来管道传入邮件。所以我有这样的东西在我的`/etc/aliases`：

```
myuser: "|/usr/bin/command --parameter1 --parameter2" 
```

问题是 Postfix`/usr/bin/command`以 user 身份执行`nobody:nogroup`。根据[此描述](http://www.postfix.org/postconf.5.html#default_privs)，它可以更改，但不能更改单个别名。那么问题是如何为某个别名设置用户？设置`nobody:nogroup`目录`/usr/bin/command`应该运行不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:00:30.450

替换`/usr/bin/command`为`/usr/bin/sudo -u <user> /usr/bin/command`并配置`sudo`为允许`nobody`执行此命令。

**[编辑]**您的问题有两种解决方案：

1.  使所有必要的文件读/写`nobody:nogroup`
2.  更改用户（使用[suid 脚本](http://www.codecoffee.com/tipsforlinux/articles/028.html)或`su`/ `sudo`）。

如果您不喜欢任何一个，那么您的问题就没有解决方案。你不能这样做，`aliases(5)`因为格式不支持这个（其他程序也读取这个文件，所以 postfix 不能改变语法）。

您可以使用`default_privs`，但这会更改所有外部命令的用户并且您不希望这样做（巨大的安全风险）。

# c# - 将sql数据库表导入数据表

> ID：13395064
> 
> 赞同：1
> 
> 时间：2012-11-15T09:57:30.093
> 
> 标签：c#, sql, sql-server, database

我正在使用下面的代码来允许我进入我的 sql 服务器并获取数据并将数据输入到数据表中......但是没有数据被添加到表中，并且数据库中的表中有信息桌子。

```
 // SQL Server Connection Strings
 sqlConnectionString = "Data Source=.;Initial Catalog= " + databaseName + " ;Integrated Security=true";
 queryString = "select * from " + sqlTableName;
 using (var connection = new SqlConnection(sqlConnectionString))
 using (var adapter = new SqlDataAdapter(queryString, connection))
 {
      sqlDataTable.Clear();
      adapter.Fill(sqlDataTable);
 }
 return sqlDataTable; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:00:26.870

您的代码中可能有四个错误

**1）**尝试添加*架构名称*（例如“dbo”）

```
queryString = string.Format("select * from [dbo].['{0}']",sqlTableName); 
```

**2)** *未处理的异常*

来自 MSDN[`DataTable.Clear()`](http://msdn.microsoft.com/en-us/library/system.data.datatable.clear.aspx)

> 删除所有表中的所有行。如果表具有任何会导致子行成为孤立的强制子关系，则会生成异常。

我认为在`sqlDataTable.Clear()`您的代码出现错误（或其他地方）时，您没有按`try catch`块处理。所以数据表是空的。

**3）** *数据库表为空*

**4）**没关系，但尝试添加`connection.Open()`.

在您展示与此函数相关的完整代码以及如何将此函数（或方法）分配给原始代码之前，我不能再说什么`DataTable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:33:38.943

添加数据后，尝试开始事务并提交。我对 C# 了解不多，但我在对象上看到了一个`BeginTransaction()`方法。`SqlConnection`

# jquery - 将 div 和 aspx 页面加载到 html 页面的 div 中？

> ID：13395065
> 
> 赞同：0
> 
> 时间：2012-11-15T09:57:30.420
> 
> 标签：jquery, asp.net, html

我有一个 aspx 页面和一个 html 页面。

现在我想将 ASPX 中的特定 DIV 加载到 HTML 页面中。

原因：aspx页面加载缓慢，所以我希望html（加载速度更快）从ASPX显示这个DIV（加载需要时间）

我试过这个没有运气

```
$('#htmldiv').load('../index.aspx #aspxdiv'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:01:20.747

制作一个只加载 div 的 aspx 页面。设置这个页面的ajax url，你的速度就会上去。您的方法的问题是，必须在收到任何响应之前加载整个 aspx 页面，因此与直接访问该页面所花费的时间一样多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:17:05.427

这条线没有错

```
$('#htmldiv').load('../index.aspx #aspxdiv'); 
```

唯一关心的是页面的路径或页面的id。
“../index.aspx”不是正确的路径。
或“aspxdiv”不是正确的 ID。
解决方案：

1.  检查路径
2.  检查可能在运行时发生变化的 div id

# java - 在android中以表格形式排列sqllite表数据？

> ID：13395069
> 
> 赞同：0
> 
> 时间：2012-11-15T09:57:58.273
> 
> 标签：java, android, sqlite, tabular

我正在尝试在 android 程序中以表格形式显示表格数据。

我的桌子：

```
orderno   productid   productqty   custid
1         1000001      2            00010
2         1000001      5            00010 
```

我想在 android 前端显示该表。为此，我编写了以下程序：

```
 dbadapter.open();
 Cursor cursor=dbadapter.fetchordersdata(custid);
 int count=cursor.getCount(); 
```

从这里我得到表格数据。如何以表格形式排列这些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:06:39.527

从数据库中获取数据并将数据附加到字符串并将此 str 加载到 Web 视图遵循此代码

```
String mStr="";

mStr=mStr.concat("<body >");
mStr=mStr.concat("<tr><td align='center'><b>orderno</b></td><td align='center'><b>productid</b></td><td align='center'><b>productqty</b></td>
<td align='center'><b>custid</b></td></tr>");

dbadapter.open();
Cursor cursor=dbadapter.fetchordersdata(custid);
cursor.moveToFirst();
while(!cursor.isAfterLast())
            {
mStr=mStr.concat("<tr><td>"+(cursor.getString(cursor.getColumnIndex("col1")))+"</td><td>"+(cursor.getString(cursor.getColumnIndex("col2")))+"</td>
<td>"+(cursor.getString(cursor.getColumnIndex("col3")))+"</td>
<td>"+(cursor.getString(cursor.getColumnIndex("col4")))+"</td></tr>");

  cursor.moveToNext();
}

   mStr.concat("</table></body>"); 
```

我希望这段代码能帮助你... WebView web =(WebView)findViewById(R.id.webview); web.loadData(mStr,"text/html",null);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:01:59.823

在 XML 方面：创建一个表视图。

在 src 方面：创建一个对象（称为数据访问对象），负责连接数据库、检索您需要的数据并将该信息放入表视图中。

# java - 使用 JavaFx 的中介

> ID：13395070
> 
> 赞同：0
> 
> 时间：2012-11-15T09:58:02.080
> 
> 标签：java, javafx, mediator

我正在尝试在我的调解器上使用设计模式。为了让我的 gui 分开，而不是将所有组件放在一个类中。

例如，您需要在使用其他 GUI 组件之前登录程序。因此，创建一个 Mediator 类，该类创建每个 GUI 元素的实例，每个 GUI 类（Login、addUser、ShowUser）在更改窗口时可以引用该实例。

```
 public class Mediator {

        public Login login;
        public AddUser add;
        public ShowUsers su;
        public Stage stage = new Stage();
        public Mediator(){
            login = new Login(this);
            add = new AddUser(this);
            su = new ShowUsers(this);
        }
        public void showUser() throws Exception{
            su.start(stage);
        }
    }
public class ShowUsers extends Application{
    private Mediator m;
    private Stage stage = new Stage();
    public ShowUsers(Mediator m){
        this.m =m;
    }
    @Override
    public void start(Stage stage) throws Exception {
        Group root = new Group();
        Scene scene = new Scene(root);

        stage.setScene(scene);

    }

} 
```

我收到一个***异常消息：线程“主”java.lang.IllegalStateException 中的异常：不在 FX 应用程序线程上；当前线程 = 主线程***

如果我想使用调解器，我该如何解决？

**更新**

```
public class Main {

    public static void main(String[] args) throws Exception{
        Mediator m = new Mediator();
        m.showUser();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:28:16.027

使用 Application.launch 启动 Java FX 应用程序。我认为每个 JVM 不能启动多个应用程序，但我没有尝试过（你为什么想要？）。当然，每个应用程序可以有多个阶段。

编辑：事实上，Javadoc 说：“它不能被多次调用，否则会抛出异常。”

[http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#launch(java.lang.String](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html#launch(java.lang.String) ...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:03:02.847

我相信你正在寻找`Platform.runLater()`（见[平台](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html)）。

这会将您的应用程序放在正确的线程上。但是，您仍然必须考虑通过 a) 使用`Main`而不是扩展 Application`ShowUsers`或 b)如果您在 Swing 应用程序中使用[JFXPanel来初始化 JavaFX Toolkit。](http://docs.oracle.com/javafx/2/api/javafx/embed/swing/JFXPanel.html)

# android - Robotium 在第二次测试中失败

> ID：13395071
> 
> 赞同：1
> 
> 时间：2012-11-15T09:58:04.693
> 
> 标签：android, robotium

我使用robotium 3.5.1在我的android程序中创建了简单的测试，代码如下：

```
protected void setUp() throws Exception {
    solo = new Solo(getInstrumentation(), getActivity());
}

protected void tearDown() throws Exception {
    solo.finishOpenedActivities();
}

public void testAddTabs() throws Exception {

    addTab("TAB1");
    addPreset("TAB1");
    addTab("TAB2");
    addPreset("TAB2");

}

public void addTab(String tabName) throws Exception {

    solo.assertCurrentActivity("Checking current Activity",
            MainActivity.class);
    Log.d("MyTag", solo.getCurrentActivity().getLocalClassName() );
    solo.clickOnView(solo.getView(com.sm.scam.R.id.menu_new_tab));
    solo.enterText(0, tabName);
    solo.clickOnText("OK");

}

public void addPreset(String name) throws Exception {
    Log.d("MyTag", solo.getCurrentActivity().getLocalClassName() );
    solo.goBackToActivity("MainActivity");
    Log.d("MyTag", solo.getCurrentActivity().getLocalClassName() );
    solo.clickOnText(name);
    solo.clickOnText("New Preset");
    Log.d("MyTag", solo.getCurrentActivity().getLocalClassName() );
    solo.assertCurrentActivity("Checking current Activity",
            PresetActivity.class);

    String presetName = "Moti" + 1;
    solo.enterText(0, presetName);
    solo.pressSpinnerItem(0, 1);
    solo.clickOnText("Darkened");
    solo.clickOnText("GPS Tag");
    solo.clickOnView(solo.getView(com.sm.scam.R.id.menu_save_preset));
} 
```

它只需添加新选项卡，然后在选项卡中按下按钮，更改编辑文本、微调器和 2 个切换按钮并保存。在第一个选项卡中一切正常，但在第二个选项卡中，以下代码：

```
solo.clickOnText("New Preset"); 
```

只是不要什么都不做！单击此按钮时没有任何反应，它应该转发到 PresetActivity，因为它在第一个选项卡中正确转发。

错误代码：

```
junit.framework.ComparisonFailure: Checking current Activity expected:<...Preset...>            but was:<...Main...>
at com.jayway.android.robotium.solo.Asserter.assertCurrentActivity(Asserter.java:57)
at com.jayway.android.robotium.solo.Solo.assertCurrentActivity(Solo.java:570)
at com.sm.scam.test.ScamTest.addPreset(ScamTest.java:55)
at com.sm.scam.test.ScamTest.testAddTabs(ScamTest.java:32)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
at                                                                                                                                                                        android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java   :186)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:537)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1574) 
```

我也试图通过调用来强制它：

```
solo.goBackToActivity("MainActivity"); 
```

但仍然没有。如果有人帮助我，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T23:03:21.570

TabHost? if so that is probably your problem. TabHosts involve having multiple activities open and this really confuses robotium. That is because robotium only knows about the last activity that it saw, this means in a scenario where multiple activities are open then the one it sees last might not be the one you are expecting it to be.

You can see this is happening because it isn't failing to click on anything it is in fact just on the wrong activity and thats the assertion that fails.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:01:37.407

This is because sometimes assert executes before your activity was loaded. So try to use before `assertActivity` something like:

```
solo.waitForActivity(getCurrentActivity().getClass().getSimpleName());
solo.assertCurrentActivity(PresetActivity.class); 
```

# c# - 通过 c# 调用情节提要时找不到资源键（ResourceReferencekeyNotFoundException）

> ID：13395075
> 
> 赞同：0
> 
> 时间：2012-11-15T09:58:22.367
> 
> 标签：c#, wpf, storyboard

所以，这是我的 XAML 代码：

```
<UserControl x:Class="TugasBesarTAM_Moses_1072089.Brick01"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         Width="10" Height="5" Keyboard.KeyDown="UserControl_KeyDown">
<Canvas>
    <Rectangle x:Name="Brick" Fill="YellowGreen"
               Stroke="Black" StrokeThickness="1"
               Width="20" Height="10"
               Canvas.Left="-10" Canvas.Top="-5"
               RenderTransformOrigin="0.5 0.5" MouseLeftButtonDown="Brick_MouseLeftButtonDown">
        <Rectangle.RenderTransform>
            <TransformGroup>
                <ScaleTransform x:Name="Scale"/>
            </TransformGroup>
        </Rectangle.RenderTransform>

        <Rectangle.Resources>
            <Storyboard x:Key="sbdFade" Storyboard.TargetName="Scale">
                <DoubleAnimation To="3" Duration="0:0:0.5" BeginTime="0:0:0" Storyboard.TargetName="Scale" Storyboard.TargetProperty="ScaleX"/>
                <DoubleAnimation To="3" Duration="0:0:0.5" BeginTime="0:0:0" Storyboard.TargetName="Scale" Storyboard.TargetProperty="ScaleY"/>
                <DoubleAnimation x:Name="Opacity" To="0" Duration="0:0:0.5" Storyboard.TargetName="Brick" BeginTime="0:0:0" Storyboard.TargetProperty="Opacity" Changed="Opacity_Changed" />
            </Storyboard>
        </Rectangle.Resources>
    </Rectangle>
</Canvas> 
```

我想通过下面的 c# 代码调用 sbdFade 故事板

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Media.Animation;

namespace TugasBesarTAM_Moses_1072089
{
/// <summary>
/// Interaction logic for Brick01.xaml
/// </summary>
public partial class Brick01 : UserControl
{
    public Brick01()
    {
        InitializeComponent();
    }

    private void BallHit()
    {
        Storyboard storyBoard = FindResource("sbdFade") as Storyboard;

        storyBoard.Begin();
    }

    private void Brick_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        BallHit();
    }
} 
```

但是当我左键单击用户控件时，ResourceReferencekeyNotFoundException 弹出，导致我的故事板为空。

我不知道错误出在哪里，因为 xaml 和 c# 中的资源键是相同的。

有人注意到我的错误吗？谢谢。

编辑：注意：我也尝试过下面的代码（BallHit 方法），但无论哪种方式都会弹出相同的异常

```
private void BallHit()
{
    Storyboard storyBoard = (Storyboard)FindResource("sbdFade");

    storyBoard.Begin();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:00:48.930

您不是在`Rectangle`的资源中搜索，而是在 的资源中搜索`UserControl`，试试这个：

```
Storyboard storyBoard = Brick.FindResource("sbdFade") as Storyboard;
storyBoard.Begin(); 
```

# playframework-2.0 - 如何在 playframework 2 中配置保持活动超时

> ID：13395084
> 
> 赞同：8
> 
> 时间：2012-11-15T09:59:00.133
> 
> 标签：playframework-2.0, netty, keep-alive

我在生产中使用 playframework 2.0，我看到相应的 java 进程打开的文件数量迅速增加。我将进程的默认允许打开文件数从 1024 更改为 4096，但这只是延迟了一个问题，一段时间后打开文件的数量变得如此之大，以至于服务器速度变慢，有时甚至`java.net.SocketException`“打开的文件太多” "出现在日志中。

我使用 ubuntu 服务器 12.04，sun jdk 1.7.0_09。

`lsof`命令演示了几乎所有打开的文件都是为用户连接创建的套接字，因此我得出一个结论，playframework 使用的 Netty 服务器保持大量打开的连接处于活动状态。据我了解，我应该更改 Netty 服务器的保活行为，例如，设置低保活超时。如何在 playframework 2.0 中配置它？或者可能是其他问题？如果需要，我可以提供任何配置。

**UPD：**这里有一点输出`lsof -aPn -p 12251`。我审查了 ips 的某些部分`***`

```
COMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF   NODE NAME
java    12251 root  324u  IPv6             279502      0t0    TCP 10.127.0.***:80->***.***.65.137:51506 (ESTABLISHED)
java    12251 root  325u  IPv6             286749      0t0    TCP 10.127.0.***:80->***.***.18.121:1624 (ESTABLISHED)
java    12251 root  327u  IPv6             287220      0t0    TCP 10.127.0.***:80->***.***.126.210:49244 (ESTABLISHED)
java    12251 root  330u  IPv6             279289      0t0    TCP 10.127.0.***:80->***.***.65.155:12444 (ESTABLISHED)
java    12251 root  331u  IPv6             285609      0t0    TCP 10.127.0.***:80->***.***.33.233:2552 (ESTABLISHED)
java    12251 root  332u  IPv6             285610      0t0    TCP 10.127.0.***:80->***.***.33.233:2554 (ESTABLISHED)
java    12251 root  333u  IPv6             287236      0t0    TCP 10.127.0.***:80->***.***.90.20:16040 (ESTABLISHED)
java    12251 root  334u  IPv6             284047      0t0    TCP 10.127.0.***:80->***.***.195.2:1175 (ESTABLISHED)
java    12251 root  335u  IPv6             279357      0t0    TCP 10.127.0.***:80->***.***.65.137:51273 (ESTABLISHED)
java    12251 root  336u  IPv6             279988      0t0    TCP 10.127.0.***:80->***.***.65.137:51287 (ESTABLISHED) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:31:05.000

If you're using Play without any HTTP server you can [manipulate the response headers](http://www.playframework.org/documentation/2.0.4/JavaResponse) before sending the `Result` ([Scala version](http://www.playframework.org/documentation/2.0.4/ScalaResults)) , otherwise you need to check settings of the front-end server.

```
response().setHeader(CONNECTION, "Keep-Alive");
response().setHeader("Keep-Alive", "timeout=3, max=10");
return ok(index.render()); 
```

Note, that these values are sample and I don't know if they will fit your needs.

# ruby-on-rails - 在活动管理员中显示错误消息有许多关系表

> ID：13395087
> 
> 赞同：17
> 
> 时间：2012-11-15T09:59:06.000
> 
> 标签：ruby-on-rails, activeadmin

我在活动管理员中显示错误消息时遇到问题。

我收到了与表单中的字段一起显示的所有错误消息。但在下面的代码中，我需要添加至少一项技能和最多 5 项技能。否则需要抛出错误消息。

我在模型中添加了一个验证：

验证 :skills, :length => { :minimum => 1, :maximum => 5, :message => " 应至少为 1 且小于 5"}

这完美验证，但没有显示错误消息。

任何人都可以帮助我显示错误消息。

以下是代码：

```
form :html => { :enctype => "multipart/form-data" } do |f|

    f.inputs "User", :multipart => true do

        f.input :name
        f.input :email,  :as => :email
        f.input :profile_name
        f.input :date_of_birth
        f.input :gender,  :as => :select, :collection => Gender::GENDERS
      end
      f.inputs "Skills* ( minimum 1 & maximum 5 )" do
        f.has_many :skills do |p|
          if !p.object.nil?
            # show the destroy checkbox only if it is an existing appointment
            # else, there's already dynamic JS to add / remove new appointments
            p.input :_destroy, :as => :boolean, :label => "Destroy?",
                    :hint => "Check this checkbox, if you want to delete this field."
          end
          p.input :description
          p.input :title
        end
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-15T01:02:01.890

github 上提供了 activeadmin 0.5.1。它包含更改日志中的下一行

> “添加对 @robdiciuccio 的语义错误 #905 的支持”

这是具有此功能的拉取请求 [https://github.com/gregbell/active_admin/pull/905](https://github.com/gregbell/active_admin/pull/905)

例子

```
form do |f|
  f.semantic_errors *f.object.errors.keys
  f.inputs
  f.inputs "Locations" do
    f.has_many :locations do |loc|
      loc.input :address
      loc.input :_destroy, :as => :boolean, :label => "Delete"
    end
  end
  f.buttons
end 
```

使用它添加到 Gemfile

```
gem 'activeadmin', :git =>  "git://github.com/gregbell/active_admin.git", :tag => "v0.5.1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:36:24.437

为了通过验证，试试这个

```
validates_length_of :skills,
  :within => 1..5,
  :too_short => 'too short message',
  :too_long => 'too long message' 
```

# c++ - 循环、if 语句、使用 inputFile 的函数仅输出 0

> ID：13395090
> 
> 赞同：0
> 
> 时间：2012-11-15T09:59:16.327
> 
> 标签：c++, loops, if-statement, inputstream, validation

**我需要一些认真的帮助才能运行它。我想我用 inputFile 搞乱了循环。程序编译并且 .txt 文件位于正确的目录中。txt 是一个替换用户输入的测试文件。该文件在三个单独的行中包含三个数字：1、115 和 10。这是我的代码：**

```
//Headers
//Headers
#include<iostream>
#include<fstream>
#include<cmath>
#include<cstdlib>
#include<iomanip>
using
namespace std;
void PaintJobEstimator(double gallonprice, double wallspace)
{
    double numBucket;
    double hours;
    double bucketCost;
    double laborCharges;
    double totalCost;
    {
    //calculates number of buckets of paint (gallons) needed
    numBucket=1/115*wallspace;
    //calculates paint cost
    bucketCost=gallonprice*numBucket;
    //calculates labor hour
    hours=8/115*wallspace;
    //calculates labor charges
    laborCharges=hours*18;
    //calculates total cost
    totalCost=bucketCost+laborCharges;
    //Console output
    {
        cout << "The number of Gallons of paint required:\t" << numBucket << endl;
        cout << "The hours of labor required:\t" << hours << " hrs" << endl;
        cout << "The labor charges:\t$" << laborCharges << endl;
        cout << "The cost of the paint:\t$" << bucketCost << endl;
        cout << "The total cost of the paint job:\t$" << totalCost << endl;
    }

    }

}

int main ()
{
    int rooms=0; //number of rooms
    double wallspace=0; //wall space measured in square meters
    double gallonprice=0; //Price per gallon
    cout << "=========================================================\n";
    cout << "___________________Paint Job Estimator___________________\n";
    cout << "_________________________________________________________\n";
    //by Jeff Youngblood
    cout << endl;
    ifstream inputFile;
    //open the file
    inputFile.open("17.txt");
    if (inputFile.is_open())
    {
        if (rooms>=1) //validates rooms
        {
            inputFile >> rooms;
        }
        for (int roomNum=1;roomNum<=rooms;roomNum++)
        {
            if (wallspace>1)//validates and inputs wallspace
            {
                inputFile >> wallspace;
            }
        }
        //end loop
        while (gallonprice>10) //validates price per gallon
        {
            inputFile >> gallonprice;
        }
        PaintJobEstimator(gallonprice,wallspace);
        system ("pause");
    }
    else
        cout <<"Error reading file '17.txt', please check your directory.\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:14:02.687

这个序列

```
 double wallspace = 0;
    //...
    if (wallspace>1) //validates and inputs wallspace
    {
        inputFile >> wallspace;
    } 
```

不起作用，因为 if 语句中的条件始终为假。当您到达那里时，`wallspace`的值为零，因此您永远不会尝试输入新值。

与 for 类似`gallonprice`，您永远不会输入值，因为初始条件为 false，因此永远不会进入循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:25:21.647

您读取的所有文件都是有条件的，期望值大于零，但是由于您`init`的房间、墙壁空间和加仑价格为零，因此永远不会读取文件。`PaintJobEstimator`因此用 0,0 调用。尝试删除条件并从那里开始工作。

# c# - 如何在 C# 图表中为系列添加复选框？

> ID：13395096
> 
> 赞同：0
> 
> 时间：2012-11-15T09:59:54.757
> 
> 标签：c#, winforms, graph, charts

我有一个带有多个系列的图表作为线条。这些出现在图例中，我正在尝试向用户添加某种控件，以便可以根据用户偏好启用或禁用图表中的系列，从而尝试添加复选框。我在任何地方都找不到任何信息。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:26:20.813

假设：您正在使用 MsChart...
看看您的 Series 对象的 Position-Property。
SeriesPosition-Object 有两个可以帮助您的属性：

排除和隐藏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:32:07.347

我通过添加一个单独的`CheckedListBox()`并通过跟踪系列和复选框项目的索引来使其工作，我可以显示或隐藏系列。

# c# - CodeDomProvider：LIB 环境变量在哪里？

> ID：13395098
> 
> 赞同：3
> 
> 时间：2012-11-15T10:00:03.253
> 
> 标签：c#, .net, csc

我正在使用 a 即时`System.CodeDom.Compiler.CodeDomProvider.CreateProvider("CSharp")`编译 C# 类。最近我从 Visual Studio 2010 切换到了 Visual Studio 2012。我还卸载了 SQL 2005。由于这些事件，由于以下错误，我无法编译我的类：

> 'LIB 环境变量'中指定的无效搜索路径'C:\Program Files\SQLXML 4.0\bin\' -- '系统找不到指定的路径。

**这个“LIB 环境变量”在哪里？**

[我检查了我的 Windows 7 环境变量（控制面板\系统\高级系统设置\高级\环境变量\系统变量），但它不存在。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:42:24.717

创建目录将解决问题。

# php - 从 PHP 函数输出 HTML 适用于 Print_r 但不适用于 echo

> ID：13395099
> 
> 赞同：0
> 
> 时间：2012-11-15T10:00:07.200
> 
> 标签：php

我知道`print_r`打印数组和对象并`echo`完成其余的工作。

我的问题是我编码某些东西的结果，并且以某种方式返回的 a 变量`function`不会打印，`echo`但它会打印`print_r`or `var_dump`。我很容易相信这个结果是我的代码的问题，而不是两者之间的差异`echo`，`print_r`因为返回的变量`string`不是`array`

所以我的问题如下：`function showPreviousDiscipline`如果我放入模板，为什么只显示它返回的 HTML 代码`print_r`？它不应该只通过我调用函数而不需要`echo`or来显示`print_r`吗？在一天结束的时候只是文本输出的内容

的HTML

```
<div class="ldcMainWrap">
<table>
    <tr>
        <td>
            <select multiple="multiple" size="5"> 
            <?php 
// Displays something in the page if is print_r but not if i echo it... or even if i dont put anything...
print_r ($this->showPreviousDiscipline(1)); 
?>
            </select>
        </td>
        <td>
            <select multiple="multiple" size="5"> 
            </select>
        </td>
    <tr>
</table>
<div> 
```

PHP的

```
public function drawWebsite () {
    $tpl = include "step.one.view.php";
    return $tpl;
}

public function showPreviousDiscipline ( $uID ) {   
    $AllUserDetails = parent::$this->pullUserDetails ( $uID );
    $allDataRaw     = parent::$this->pullDeparmentTableData ();
    $html       = '';

    // Loops through the array $allDataRaw
    foreach ($allDataRaw as $key => $val) { 

        foreach ($val  as $key2 => $val2) {

            //CHECKs if he user has already selected one and if it does it applies a CSS class
            if($key2) {
                if($val2 === $AllUserDetails['rID']) {
                    $html .= '<option value ="'.$val2.'" class="selected">'.$key2.'</option>';
                }else {
                    $html .= '<option value ="'.$val2.'" class="unselected">'.$key2.'</option>';}
            }
        }   
    }   
    $html           .= ''; 
    return $html;
} 
```

测试输出

```
 <select multiple="multiple" size="5"> 
  <option value="11" class="unselected">dID</option>
    <option value="test1" class="unselected">dName</option>
    <option value="" class="unselected">dDescription</option>
<option value="22" class="selected">dID</option>
    <option value="test2" class="unselected">dName</option>
    <option value="" class="unselected">dDescription</option> 
               </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:00:19.510

从手册（http://php.net/manual/en/function.echo.php）

```
echo (unlike some other language constructs) does not behave like a function,    
so it cannot always be used in the context of a function. 
```

所以 echo(fn()) 将返回 NULL。如果要“回显”函数的值，则需要将该值返回到某个本地 var 并回显该值。或者（如您所见）通过“print_r”调用它。

根据您的问题：

```
 Shouldn't it display only by me calling the function without the need of echo or print_r? 
```

如果您在函数中调用 echo、print 或 print_r（而不是分配返回值），它将起作用。就目前而言，您的函数返回一个值但不输出任何内容。

# android - Android 展示模式 --> 检测用户不活动

> ID：13395113
> 
> 赞同：1
> 
> 时间：2012-11-15T10:01:08.740
> 
> 标签：android

我将首先解释我要完成的工作。我想用一些安卓设备（10-12）作为展览设备。将永远通电，我的访客可以和他们一起玩。当设备有一段时间不活动时，我想弹出一个全屏视频播放。视频文件必须不时更新。

到目前为止，我的想法是开发一个后台服务应用程序，该应用程序将更新我要播放的视频文件。我将创建/发送一个意图来触发我的视频播放器。

困扰我的是如何从整个设备中检测用户不活动。这甚至可能吗？我知道如何从我的活动中做到这一点，但在这里我希望它适用于整个设备。有任何想法吗？请记住，它仅适用于我的设备，因此我可以为它们进行所需的任何设置（安装任何类型的管理系统或 root 我的设备）。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:11:47.500

您可以添加一个获取系统时间的runnable，并与客户端触摸屏幕的最后时间进行比较。像这样的东西：

```
private Runnable timeChecker = new Runnable()
 {

  public void run()
  {
      //PseudoCode
       if(getTime()-lastTime > TIME_IS_INACTIVE)
       {
          //do something

        }
  }
}; 
```

# java - 如何初始化列表 Java中的对象？

> ID：13395114
> 
> 赞同：478
> 
> 时间：2012-11-15T10:01:09.583
> 
> 标签：java, list

我无法像以下代码那样初始化列表：

```
List<String> supplierNames = new List<String>();
supplierNames.add("sup1");
supplierNames.add("sup2");
supplierNames.add("sup3");
System.out.println(supplierNames.get(1)); 
```

我面临以下错误：

> 无法实例化类型`List<String>`

我怎样才能实例化`List<String>`？

* * *

## 回答 #1

> 赞同：829
> 
> 时间：2012-11-15T10:07:41.863

如果您检查[API](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html)，`List`您会注意到它说：

```
Interface List<E> 
```

作为一种`interface`手段，它不能被实例化（`new List()`不可能）。

如果您检查该链接，您会发现一些`class`实现的 es `List`：

> 所有已知的实现类：
> 
> `AbstractList`, `AbstractSequentialList`, `ArrayList`, `AttributeList`, `CopyOnWriteArrayList`, `LinkedList`, `RoleList`, `RoleUnresolvedList`, `Stack`,`Vector`

其中一些可以实例化（那些未定义为 的`abstract class`）。使用他们的链接了解更多关于他们的信息，即：了解哪个更适合您的需求。

最常用的 3 个大概是：

```
 List<String> supplierNames1 = new ArrayList<String>();
 List<String> supplierNames2 = new LinkedList<String>();
 List<String> supplierNames3 = new Vector<String>(); 
```

* * *

奖励：
您还可以使用值以更简单的方式实例化它，使用`Arrays` `class`，如下所示：

```
List<String> supplierNames = Arrays.asList("sup1", "sup2", "sup3");
System.out.println(supplierNames.get(1)); 
```

但请注意，您不能向该列表添加更多元素，因为它是`fixed-size`.

* * *

## 回答 #2

> 赞同：178
> 
> 时间：2017-11-14T14:25:24.950

无法实例化接口，但实现很少：

**JDK2**

```
List<String> list = Arrays.asList("one", "two", "three"); 
```

**JDK7**

```
//diamond operator
List<String> list = new ArrayList<>();
list.add("one");
list.add("two");
list.add("three"); 
```

**JDK8**

```
List<String> list = Stream.of("one", "two", "three").collect(Collectors.toList()); 
```

**JDK9**

```
// creates immutable lists, so you can't modify such list 
List<String> immutableList = List.of("one", "two", "three");

// if we want mutable list we can copy content of immutable list 
// to mutable one for instance via copy-constructor (which creates shallow copy)
List<String> mutableList = new ArrayList<>(List.of("one", "two", "three")); 
```

**此外，其他库（如Guava** ）还提供了许多其他方法。

```
List<String> list = Lists.newArrayList("one", "two", "three"); 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-11-15T10:02:43.027

List 是一个*接口*，你不能实例化一个接口，因为接口是一个约定，什么方法应该有你的类。为了实例化，您需要该接口的一些实现（实现）。使用非常流行的 List 接口实现尝试以下代码：

```
List<String> supplierNames = new ArrayList<String>(); 
```

或者

```
List<String> supplierNames = new LinkedList<String>(); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-11-15T10:02:02.343

您将需要使用`ArrayList<String>`或类似的。

`List<String>`是一个接口。

用这个：

```
import java.util.ArrayList;

...

List<String> supplierNames = new ArrayList<String>(); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-11-15T10:02:16.523

List是一个接口，不能初始化一个接口。而是实例化一个实现类。

像：

```
List<String> abc = new ArrayList<String>();
List<String> xyz = new LinkedList<String>(); 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-10-04T09:05:50.843

在大多数情况下，您想要简单`ArrayList`- 实现`List`

在 JDK 版本 7 之前

```
List<String> list = new ArrayList<String>(); 
```

JDK 7 及更高版本可以使用菱形运算符

```
List<String> list = new ArrayList<>(); 
```

更多信息写在这里[Oracle 文档 - 集合](http://docs.oracle.com/javase/tutorial/collections)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-11-15T10:06:59.253

List 只是一个接口，是一些通用列表的定义。您需要提供此列表接口的实现。最常见的两种是：

**ArrayList** - 在数组上实现的列表

```
List<String> supplierNames = new ArrayList<String>(); 
```

**LinkedList** - 一个像互连的元素链一样实现的列表

```
List<String> supplierNames = new LinkedList<String>(); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-11-15T10:03:00.153

根据您要使用的列表类型，例如

```
List<String> supplierNames = new ArrayList<String>(); 
```

应该让你去。

List 是接口，ArrayList 是 List 接口的一种实现。[阅读List 接口的 JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)可以找到更多可能更适合您需求的实现。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2017-09-21T20:49:53.663

如果你只想创建一个只有**一个对象的****不可变** 对象，你可以使用这个 API：`List<T>`

 **```
List<String> oneObjectList = Collections.singletonList("theOnlyObject”); 
```

更多信息：[文档](https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList(java.util.List))

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-11-15T10:03:21.167

List 是一个接口。您不能使用 List 来初始化它。

```
 List<String> supplierNames = new ArrayList<String>(); 
```

这些是一些 List impelemented 类，

```
ArrayList, LinkedList, Vector 
```

您可以根据您的要求使用其中的任何一个。这些每个类都有自己的特点。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-12-05T06:46:11.560

以防万一，任何人仍然徘徊在这个问题上。因为，我看到一两个新用户再次问同样的问题，然后每个人都说，*不，你不能那样做，亲爱的谨慎*，除了这里给出的所有答案，我想提供额外的信息 - 是的，你实际上可以做，**列表列表=新列表（）；** 但是以编写接口的所有方法的实现为代价。这个概念不仅仅是 List list = new List(); 但

```
List<Integer> list = new List<Integer>(){

        @Override
        public int size() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public boolean isEmpty() {
            // TODO Auto-generated method stub
            return false;
        }

        @Override
        public boolean contains(Object o) {
            // TODO Auto-generated method stub
            return false;
        } 
```

.....等等（不能写所有的方法。）

这是一个**匿名类**的例子。当有人说，**不，你不能实例化一个接口时，**它是正确的，这是正确的。但是你永远不能说，**你不能写 List list = new List();** 但是，显然你可以做到这一点，这是一个很难*说你做不到*的声明。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-05-21T17:39:09.550

代替 ：

```
List<String> supplierNames = new List<String>(); 
```

如果您使用的是最新的 JDK，请写下：

```
 List<String> supplierNames = new ArrayList<>(); 
```

这是初始化列表的正确方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-17T20:59:59.957

我们创建了[soyuz-to](https://github.com/thedocs-io/soyuz-to)来简化 1 个问题：如何转换`X`为`Y`（例如`String`to `Integer`）。对象的构造也是一种转换，所以它有一个简单的函数来构造`Map`, `List`, `Set`:

```
import io.thedocs.soyuz.to;

List<String> names = to.list("John", "Fedor"); 
```

请检查它 - 它还有很多其他有用的功能**

# python - __init__() 中的 Python 导入

> ID：13395116
> 
> 赞同：9
> 
> 时间：2012-11-15T10:01:18.273
> 
> 标签：python, python-import

我需要在`__init__()`方法中导入（因为我只需要在实例化类时运行该导入）。

但我看不到外面`__init__()`的进口，范围仅限于`__init__`吗？怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T10:09:11.857

导入的名称绑定到当前范围，因此函数内的导入仅绑定到本地名称。

如果您绝对*必须*导入某些`__init__`内容，那么需要全局可用，请将导入的名称标记为`global`first：

```
>>> def foo():
...     global sys
...     import sys
... 
>>> sys
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'sys' is not defined
>>> foo()
>>> sys
<module 'sys' (built-in)> 
```

但这通常会导致奇怪且非常难以定位的错误。不要那样做，只需在模块范围内进行导入即可。

如果您需要在其他类方法中导入名称，您还可以将导入的名称分配给实例变量：

```
class Foo(object):
    def __init__(self):
        import os
        self.join = os.path.join 
```

但同样，这不是最好的做法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T10:07:19.290

您可以在需要它的其他地方再次导入它——它将在第一次之后被缓存，因此相对便宜。

或者，您可以使用类似`globals()['name'] = local_imported_module_name`.

**编辑**：作为记录，虽然使用该`globals()`函数肯定会起作用，但我认为“更清洁”的解决方案是声明模块的名称`global`，然后声明`import`它，正如其他几个答案所提到的那样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T10:09:57.403

该`import`语句使导入的名称仅可用于当前范围。你的`import foo`内部`__init__`创建了一个`foo`只在`__init__`方法中可见的。

您可以添加`import foo`到任何需要访问模块的方法，或者如果您发现自己重新编写导入，则使用`global`关键字将其导入模块范围。

```
class Wayne(object):
    def __init__(self):
        global foo
        import foo 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T10:09:47.643

如果您希望导入的结果对类的其他对象可见，则需要将导入的结果对象分配给类或实例变量

例如：

```
>>> class Foo(object):
...    def __init__(self):
...       import math
...       self.bar = math.pi
...    def zoo(self):
...       return self.bar
... 
>>> a = Foo()
>>> a.zoo()
3.141592653589793 
```

# maven - 使用 maven-dependency-plugin 通过 maven 下载源代码

> ID：13395127
> 
> 赞同：1
> 
> 时间：2012-11-15T10:02:03.420
> 
> 标签：maven, maven-dependency-plugin

我想下载一个特定的源 jar (guice-sources.jar)，我不希望它下载 android 源。这将在终端上工作：

```
mvn dependency:sources -DincludeArtifactIds=android 
```

这也很好用：

```
mvn dependency:sources -DincludeArtifactIds=guice 
```

我在 pom.xml 中配置了一个插件段，如下所示，

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-dependency-plugin</artifactId>
<executions>
    <execution>
        <id>default-cli</id>
        <goals>
            <goal>sources</goal>
        </goals>
        <configuration>
            <includeArtifactIds>guice</includeArtifactIds>
            <!--<excludeArtifactIds>android</excludeArtifactIds>-->
        </configuration>
    </execution>
 </executions>
</plugin> 
```

并运行它，它仍然为我下载 android jar

```
mvn dependency:sources 
```

我试图在 pluginManagement 中移动插件部分，也没有工作。它出什么问题了？

# asp.net - 登录失败，当凭据保存在 chrome 中时

> ID：13395130
> 
> 赞同：1
> 
> 时间：2012-11-15T10:02:09.423
> 
> 标签：asp.net, google-chrome

我正在开发基于 Web 的应用程序，而登录 chrome 要求“记住密码”，当我保存它并使用保存的密码再次登录时，登录失败。

我观察到的几件事： 1\. 它特定于浏览器，在其他浏览器中运行良好。2.当我试图从chrome设置中显示密码时，它变成了加密格式。

我不知道如何解决这个问题。

任何帮助都会很棒！

# oracle - 是否可以使用 sql%rowcount 进行 SELECT？

> ID：13395131
> 
> 赞同：9
> 
> 时间：2012-11-15T10:02:11.110
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, oracle11g

下面的代码可能返回不止一行。将`sql%rowcount`返回获取的行数？

```
select * from emp where empname = 'Justin' and dept='IT'
if sql%rowcount>0
    ... 
```

这是我的示例过程；我是否`sql%rowcount`以正确的方式使用？

```
CREATE PROCEDURE Procn(in_Hid IN VARCHAR2,outInststatus OUT VARCHAR2,outSockid IN NUMBER,outport OUT VARCHAR2,outIP OUT VARCHAR2,outretvalue OUT NUMBER)
AS
BEGIN
select INST_STATUS into outInststatus from TINST_child where INST_ID = in_Hid and INST_STATUS = 'Y';
if outInststatus = 'Y' then 
     select PORT_NUMBER,STATIC_IP into outport,outIP from TINST where INST_ID = in_Hid and IP_PORT_STATUS = 'Y';
    if sql%rowcount >= 1 then
       select SOCK_ID into outSockid from TINST where PORT_NUMBER = outport AND STATIC_IP = outIP;  
       outretvalue := 0;
    else
       outretvalue := -12;
    end if;
  EXCEPTION
  WHEN NO_DATA_FOUND THEN
   outretvalue := -13;
end if;
END; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T10:16:20.420

是的，您可以使用`SQL%ROWCOUNT`. 它在 PL/SQL 中有效。

然而，在 PL/SQL 中，您的查询结果需要进入某个地方，例如 PL/SQL 表中。PL/SQL 永远不会将结果发送到*输出*（终端、窗口等）。所以`SELECT * FROM`行不通。

您的代码可能如下所示：

```
DECLARE
  TYPE emp_t ...;
  emp_tab emp_t;

BEGIN
  SELECT *
  BULK COLLECT INTO emp_tab
  FROM emp
  WHERE empname = 'Justin' AND dept='IT';

  IF sql%rowcount > 0 THEN
    .. do something ...
  END IF;
END;
/ 
```

**更新**：

更新后的问题表明您正在寻找其他东西。

**选项 1：使用例外**

如果有 0 行或多于 1 行，则分别处理这些情况（作为错误）：

```
BEGIN
  select PORT_NUMBER,STATIC_IP into outport, outIP
  from TINST
  where INST_ID = in_Hid AND IP_PORT_STATUS = 'Y';

EXCEPTION
  WHEN NO_DATA_FOUND THEN
    outretvalue := -12;
    RETURN;

  WHEN TOO_MANY_ROWS THEN
    outretvalue := -13;
    RETURN;
END; 
```

**选项 2：使用聚合**

使用聚合，查询将始终只返回一行。如果现在源行与 WHERE 子句匹配，则两个结果值都将为 NULL。如果 WHERE 子句匹配多于一行，则取最大值。

请注意，此查询可能会返回最初不在同一行的端口号和 IP 地址。

```
select MAX(PORT_NUMBER), MAX(STATIC_IP) into outport, outIP
from TINST
where INST_ID = in_Hid AND IP_PORT_STATUS = 'Y';

IF outport IS NULL OR outIP IS NULL THEN
    outretvalue := -12;
    RETURN;
END IF; 
```

**选项 3：使用 ROWNUM**

此查询最多返回一行。如果没有行匹配 WHERE 子句，则抛出异常并需要处理：

```
BEGIN
  select PORT_NUMBER, STATIC_IP into outport, outIP
  from TINST
  where INST_ID = in_Hid AND IP_PORT_STATUS = 'Y'
  AND ROWNUM = 1;

EXCEPTION
  WHEN NO_DATA_FOUND THEN
    outretvalue := -12;
    RETURN;

END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:39:03.393

根据您的评论

> 如果第二个“选择”查询返回不止一行，我想取第一行并处理它

...这应该可以工作，但可能并不像您期望的那样，因为您尚未定义“第一个”的含义。

```
CREATE PROCEDURE Procn(in_Hid IN VARCHAR2, outInststatus OUT VARCHAR2,
    outSockid IN NUMBER, outport OUT VARCHAR2, outIP OUT VARCHAR2,
    outretvalue OUT NUMBER)
AS
BEGIN
    select INST_STATUS into outInststatus
    from TINST_child
    where INST_ID = in_Hid and INST_STATUS = 'Y';

    -- no need to check if outInstatus is Y, that's all it can be here

    -- restricting with `rownum` means you'll get at most one row, so you will
    -- not get too_many_rows. But it will be an arbitrary row - you have no
    -- criteria to determine which of the multiple rows you want. And you can
    -- still get no_data_found which will go to the same exception and set -12
    select PORT_NUMBER, STATIC_IP into outport, outIP
    from TINST
    where INST_ID = in_Hid and IP_PORT_STATUS = 'Y'
    and rownum < 2;

    -- no need to check sql%rowcount; it can only be 1 here

    -- not clear if this can return multiple rows too, and what should happen
    -- if it can; could use rownum restriction but with the same caveats
    select SOCK_ID into outSockid
    from TINST
    where PORT_NUMBER = outport AND STATIC_IP = outIP;   

    outretvalue := 0;
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        outretvalue := -12;
END; 
```

* * *

`exception`处理程序适用于整个[块](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/overview.htm#i8859)。如果任何`select`语句找不到行，则该`no_data_found`异常将由该块处理并设置`outretvalue`为`-12`.

如果您想要`outretvalue`每个不同的，`select`那么您可以将它们包装在子块中，每个子块都有自己的异常处理部分：

```
CREATE PROCEDURE Procn(in_Hid IN VARCHAR2, outInststatus OUT VARCHAR2,
    outSockid IN NUMBER, outport OUT VARCHAR2, outIP OUT VARCHAR2,
    outretvalue OUT NUMBER)
AS
BEGIN
    BEGIN
        select INST_STATUS into outInststatus
        from TINST_child
        where INST_ID = in_Hid and INST_STATUS = 'Y';
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            outretvalue := -12;
    END;

    BEGIN
        select PORT_NUMBER, STATIC_IP into outport, outIP
        from TINST
        where INST_ID = in_Hid and IP_PORT_STATUS = 'Y'
        and rownum < 2;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            outretvalue := -13;
    END;

    BEGIN
        select SOCK_ID into outSockid
        from TINST
        where PORT_NUMBER = outport AND STATIC_IP = outIP;   
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            outretvalue := -14;
    END;

    outretvalue := 0;
END; 
```

您只需要在调用者需要知道哪个`select`失败时才需要这样做，并且如果您从未真正期望它们中的任何一个失败，那么可能更常见的是根本不捕获异常并让调用者看到原始`no_data_found`内容并决定做什么. 取决于异常条件对您和您的应用程序意味着什么。

# java - Java TCP 客户端/服务器

> ID：13395135
> 
> 赞同：1
> 
> 时间：2012-11-15T10:02:19.847
> 
> 标签：java, tcp, client, listen

我有一个问题，我不知道如何进一步处理 Java TCP 套接字问题。就我们可以从 Internet 获得的信息而言，不难获得大量 Java 中 TCP 服务器和客户端通信的可行解决方案。但是，大多数示例都会让他们的服务器监听一个端口，然后循环直到他们得到一个连接到服务器的客户端，然后代码将执行 server.accept() 并进一步移动。例如：

```
 public static void main(String[] args) throws IOException {
    ServerSocket s = new ServerSocket(PORT);
    System.out.println("Started: " + s);
    try {
      // Blocks until a connection occurs:
      Socket socket = s.accept();
      try {
        System.out.println("Connection accepted: "+ socket); 
```

如果有客户端连接到服务器，它将完美运行。而且，我的问题是即使没有客户端连接到服务器，我也需要继续一些其他过程。事实上，即使没有客户端连接到相同的端口和 ip，我也需要启动另一个 JFrame 来继续这些过程。但是，我一直在苦苦挣扎，但只要没有客户端连接到服务器，我的 Java 程序就会挂在那里，并弹出白色的 JFrame。

我需要知道如何克服这个问题，因为我不太确定我的理解是否有错误。请协助和建议。谢谢！

最好的问候， 易莹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:06:17.810

听起来您需要在一个线程中工作，同时等待另一个线程上的网络连接。查看[线程教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。请注意，由于您使用的是 Swing，因此您必须小心。哪个线程将修改您的 JFrame 等，您应该了解[SwingWorker](http://my.safaribooksonline.com/book/programming/java/9780980839609/concurrency-utilities/swing_worker)实用程序。

# javascript - 从 Handsontable Jquery 加载数据

> ID：13395141
> 
> 赞同：2
> 
> 时间：2012-11-15T10:02:28.957
> 
> 标签：javascript, jquery, handsontable

我正在使用 Handsontable 0.7.3 从 XLS 文件中读取并在 Web 浏览器中查看。现在我想读取该表以创建一个新的 XLS 文件，但我不知道我需要做什么。我的代码：

```
 $('#example').handsontable({
        data: data,
        startCols: 4,
        colHeaders: true,
        rowHeaders: true,
        fillHandle: true,
        colHeaders: ["<b> Nombre </b>", "<b> Compania </b>", " <b> Codigo </b>","<b> Ciudad </b>"],
        contextMenu: ['row_above', 'row_below', 'remove_row']
      });         

      $('#ver').html($('#example').data('handsontable').version); 
```

任何想法？谢谢大家，抱歉英语不好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-26T13:50:26.463

嗨，如果我的理解是正确的，您想将数据从 handsontable 上传到 XLS 文件，对吧..？您可以在handsontable 中使用“getData”方法，该方法将返回表中存在的所有数据。通过使用字符串标记器分隔数据。通过迭代这些标记添加换行符。然后使用

```
httpServletResponse.setContentType("application/vnd.ms-excel");
httpServletResponse.getOutputStream().write("ur content"); 
```

生成 XLS 文件。

# java - 应对放缓

> ID：13395146
> 
> 赞同：0
> 
> 时间：2012-11-15T10:02:46.443
> 
> 标签：java, algorithm, math

我有一个柜台。N次后它增加一。我改哪个算法N，计数器一开始增长很快，最后变慢了。

谢谢。

UPD：Java 上的源代码：

```
currentProcent = 0;
deltaSecond = 3000f / (float) bigProcNumber;    // 3000f - 3 second, is fixed
new Thread(new Runnable() {
   public void run() {
      try {
         while (currentProc != (int) bigProcNumber) {
            Thread.sleep((int) (deltaSecond));
            // UI Change
         }
      } catch (InterruptedException e) {
         e.printStackTrace();
      }
   }
}).start(); 
```

我需要更改 deltatime，但所有 deltatime 的总和必须等于 3000 毫秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:21:21.533

如果我正确地解释了你的问题，你想找到一个开始迅速增加，后来慢慢增加的函数，可能是这样的形状？

![在此处输入图像描述](../Images/92a811cdab1c26a6b8ca99f843c1d363.png)

`Log`我使用可能合适的功能制作了图形，但还有很多其他功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:31:47.293

1.  保留大写“N”。不要使用 is 作为变量名。

2.  听起来您想构建一个可变速率的时钟计数器。Mathematica 有几种不同的方法来控制时钟，它们具有不同的特性。（查看，例如，与更新间隔`Pause[]`相关 `CreateScheduledTask[]`或控制更新间隔的功能`Dynamic`）给我们更多关于您正在尝试做什么的提示。示例代码很好。

3.  `Pause`这是基于 - 的计时器的示例。

    ```
    t = 0;
    Manipulate[
     t += dt;
     Pause[dt]; 
     Graphics[{Circle[], 
     Line[{{0., 0.}, {Cos[t/(2 Pi)], -Sin[t/(2 Pi)]}}]}]
     {{dt, 0.5}, 0.1, 1, 0.1, PopupMenu}
    ] 
    ```

4.  小心使用周围的计时器`Dynamic`。`Dynamic`这是一个用于控制时钟的示例。

    ```
    Manipulate[
     DynamicModule[{t = 0},
      Graphics[{
       Circle[], 
       Line[{{0., 0.}, {Cos[#/(2 Pi)], -Sin[#/(2 Pi)]} &@
        Dynamic[t += dt, UpdateInterval -> dt]}]
      }]
     ]
    ,{{dt, 0.5}, 0.1, 1, Appearance -> "Labeled"}
    ] 
    ```

# image-processing - 在图像中搜索部分匹配的模式

> ID：13395148
> 
> 赞同：1
> 
> 时间：2012-11-15T10:02:55.710
> 
> 标签：image-processing, matrix, submatrix

考虑以下在图像 (0-255) 内定位二维图案的问题。

如果较大矩阵的大多数元素（例如 > 50%）在较小矩阵的各个元素的某个范围内，则称在 (x, y) 处找到匹配项，即

```
0.8*small[i][j] <= bigger[x+i][y+j] <= 1.2*smaller[i][j] 
```

我记得这个问题是图像搜索中的一个标准问题，但不记得了，也找不到确切的名称。

如果有人能找出等效标准问题的名称，我将不胜感激。
先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:01:22.513

我认为这可能是“移动窗户”之类的东西，所以这就是我要找的东西。想出正确的名字可能很棘手，而且有很多类似的方法，要找到你想要的真正的名字会很困难。很高兴我能帮助你。

无论如何，它是模板匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T06:44:01.370

在视频压缩（与图像识别相反）的上下文中，这称为块匹配：[http ://en.wikipedia.org/wiki/Block-matching_algorithm](http://en.wikipedia.org/wiki/Block-matching_algorithm)

# ruby-on-rails-3 - 如何渲染除特定动作之外的所有内容

> ID：13395153
> 
> 赞同：28
> 
> 时间：2012-11-15T10:03:12.357
> 
> 标签：ruby-on-rails-3, render, partial, content-for

我有一个 _header.html.erb 部分，这是我放置导航栏的地方

在我的启动页面上，我不想显示导航栏。

这是`body`application.html.erb 的

```
<body>
<%= render 'layouts/header' %>
<div id="container">
    <%= yield %>
</div>

</body> 
```

除了特定控制器上的特定操作之外，如何在每个操作上呈现它？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-15T10:49:47.830

用这个替换你的渲染：

```
<%= render 'layouts/header' unless @disable_nav %> 
```

然后，您可以`disable_nav`在任何您喜欢的控制器操作中简单地设置为 true：

```
def landing_page
  @disable_nav = true
end 
```

* * *

作为一个`before_filter`，我会在上面鼓励：

**application_controller.rb**

```
def disable_nav
  @disable_nav = true
end 
```

**我的控制器**

```
before_filter :disable_nav, only: [:landing_page] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T10:19:16.530

您可以将该逻辑放入样式表、控制器或视图中（最后一个，仅适用于整个控制器）。

## 样式表

如果您想在样式表中添加逻辑，请首先将以下类添加到您的 body 标记中：

```
<body class="<%= "#{controller.controller_name} #{controller.action_name}" %>"> 
```

然后，在您的 css 中，添加如下内容：

```
body.controller.action .navbar {
  display: none;
} 
```

## 控制器

要将此逻辑添加到您的控制器，请在您的应用程序控制器中添加一个前置过滤器：

```
class ApplicationController < ActionController::Base
  before_filter :show_navbar

  protected
  def show_navbar
    @show_navbar = true
  end
end 
```

然后，如果您不想在 CarsController 中显示导航栏，请执行以下操作：

```
class CarsController < ApplicationController
  skip_before_filter :show_navbar, only: [list, of, actions]
end 
```

`[list, of, actions]`您不想在其中显示导航栏的操作在哪里。

最后，将布局更改为如下所示：

```
<% if @show_navbar -%>
  <%= render 'layouts/header' %>
<% end -% 
```

## 意见

如果要禁用整个控制器的标头，首先，将标头移动到`app/views/application/`并将渲染更改为：

```
<%= render partial: 'header' %> 
```

最后，在那些没有导航栏的控制器中，`_header.html.erb`在`app/views/controller_name`.

要使此选项起作用，您至少需要 Rails 3.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:18:26.657

我会为特定控制器上的特定操作设置不同的布局。

# android - Android Web 服务空值返回

> ID：13395159
> 
> 赞同：0
> 
> 时间：2012-11-15T10:03:24.663
> 
> 标签：android, web-services

我是在 android 中开发项目的新手。我尝试使用 KSOAP 从 android 获取 .NET Web 服务。但是当我从 web 服务收到值时，我得到输出 null°F 作为输出。请在我的程序中找出错误。

```
package com.example.webservice;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class WebService extends Activity {
       private final String NAMESPACE = "http://tempuri.org/";
       private final String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?wsdl";
       private final String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
       private final String METHOD_NAME = "CelsiusToFahrenheit";
    Button b;
    TextView tv;
    EditText et;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_web_service);
        et=(EditText)findViewById(R.id.editText1);
        tv=(TextView)findViewById(R.id.Result);
        b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            String result=getFarenheit(et.getText().toString());
            tv.setText(result+"°F");
            }
        });
    }
    public String getFarenheit(String celsius){
        SoapObject request= new SoapObject(NAMESPACE, METHOD_NAME);
        PropertyInfo celsuiusPI= new PropertyInfo();
        celsuiusPI.setName("Celsius");
        celsuiusPI.setValue(celsius);
        celsuiusPI.setType(double.class);
        request.addProperty(celsuiusPI);
        SoapSerializationEnvelope envelope=new SoapSerializationEnvelope (SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
        try{
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response=(SoapPrimitive)envelope.getResponse();
            Log.i("WebService output", response.toString());
            return response.toString();

        }
        catch(Exception e){
            e.printStackTrace();
        }

        return null;
    }

} 
```

输入和输出图像

![在此处输入图像描述](../Images/91f586074478a9245629e712f76315ed.png) ![在此处输入图像描述](../Images/6b4f1d54495492f01ed3e16fc3d9281c.png)

日志猫：

```
11-15 15:31:42.215: W/System.err(1058): android.os.NetworkOnMainThreadException
11-15 15:31:42.215: W/System.err(1058):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-15 15:31:42.215: W/System.err(1058):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
11-15 15:31:42.215: W/System.err(1058):     at libcore.io.IoBridge.connectErrno(IoBridge.java:144)
11-15 15:31:42.225: W/System.err(1058):     at libcore.io.IoBridge.connect(IoBridge.java:112)
11-15 15:31:42.225: W/System.err(1058):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
11-15 15:31:42.225: W/System.err(1058):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
11-15 15:31:42.225: W/System.err(1058):     at java.net.Socket.connect(Socket.java:842)
11-15 15:31:42.235: W/System.err(1058):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
11-15 15:31:42.235: W/System.err(1058):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-15 15:31:42.246: W/System.err(1058):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
11-15 15:31:42.246: W/System.err(1058):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-15 15:31:42.246: W/System.err(1058):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:117)
11-15 15:31:42.246: W/System.err(1058):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-15 15:31:42.246: W/System.err(1058):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
11-15 15:31:42.246: W/System.err(1058):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-15 15:31:42.246: W/System.err(1058):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-15 15:31:42.255: W/System.err(1058):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
11-15 15:31:42.265: W/System.err(1058):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
11-15 15:31:42.265: W/System.err(1058):     at org.ksoap2.transport.ServiceConnectionSE.openOutputStream(ServiceConnectionSE.java:120)
11-15 15:31:42.265: W/System.err(1058):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:176)
11-15 15:31:42.265: W/System.err(1058):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
11-15 15:31:42.275: W/System.err(1058):     at com.example.webservice.WebService.getFarenheit(WebService.java:58)
11-15 15:31:42.275: W/System.err(1058):     at com.example.webservice.WebService$1.onClick(WebService.java:41)
11-15 15:31:42.275: W/System.err(1058):     at android.view.View.performClick(View.java:4084)
11-15 15:31:42.285: W/System.err(1058):     at android.view.View$PerformClick.run(View.java:16966)
11-15 15:31:42.285: W/System.err(1058):     at android.os.Handler.handleCallback(Handler.java:615)
11-15 15:31:42.285: W/System.err(1058):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-15 15:31:42.285: W/System.err(1058):     at android.os.Looper.loop(Looper.java:137)
11-15 15:31:42.305: W/System.err(1058):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-15 15:31:42.305: W/System.err(1058):     at java.lang.reflect.Method.invokeNative(Native Method)
11-15 15:31:42.305: W/System.err(1058):     at java.lang.reflect.Method.invoke(Method.java:511)
11-15 15:31:42.315: W/System.err(1058):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-15 15:31:42.315: W/System.err(1058):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:06:13.207

**当我们尝试从主线程访问网络服务时发生 NetworkOnMainThread 异常**

为避免这种情况，您必须在子线程、Handler 或 asyncTask 中调用 Web 服务，您的问题将得到解决

# php - mysql加入并计算行数

> ID：13395160
> 
> 赞同：0
> 
> 时间：2012-11-15T10:03:37.080
> 
> 标签：php, mysql, database, select, join

我有两张表需要查询

第一个表“archive_agent_booking”：

```
|account_no|week|year|description|price|date|job_id|
---------------------------------------------------- 
```

第二个表是'invoice_additions'：

```
|account_no|week|year|description|amended_price|amend_date|
----------------------------------------------------------- 
```

我的目标是按降序获取每个数据库中每个星期数的以下数据，记住两个表中可能不存在星期数。

数据需要如下所示：

周号：（这将来自两个表，即使其中一个表中不存在周号。）

约会：（这将来自第一个表，只是发生周数的 COUNT()。）

发票调整：（这将来自第二个表，并且像以前一样计算出现的周数。）

到目前为止，我得到的选择查询仅适用于一张表：

```
"SELECT week, year,
COUNT(week) AS week_no FROM archive_agent_booking
WHERE account_no='$account_no'
GROUP BY week, year
ORDER BY week DESC" 
```

我无法将第二个表链接到此查询，以便它将计算每个表中的两个星期列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:05:58.917

```
SELECT 
    week, 
    year,
    COUNT(week) AS week_no 
FROM archive_agent_booking
left join invoice_additions on invoice_additions.week = archive_agent_booking.week
WHERE account_no='$account_no'
GROUP BY week, year
ORDER BY week DESC 
```

由于您没有外键，因此您可以在一周内加入

# sql - SQL 无法插入大量数据

> ID：13395166
> 
> 赞同：0
> 
> 时间：2012-11-15T10:04:03.510
> 
> 标签：sql, sql-server, insert

我在尝试填充我的表格时遇到了很多错误。我不知道如何解决这个问题。我在脚本中生成了插入，但我很确定我输入值的方式不正确。如何插入多行而不必在每一行上都写 INSERT INTO？

```
/*INSERT INTO INVOICES*/
USE [Beta3]
GO

INSERT INTO [dbo].[INVOICE]
           ([INV_ID]
           ,[EMP_ID]
           ,[WAR_ID]
           ,[REP_ID]
           ,[FIN_ID]
           ,[INV_DATE]
           ,[INV_PRICE])
     VALUES
(5655,8,1,,3,'7/5/2000',75880);
(9749,1,1,,1,'11/26/2002',58881);
(9909,3,1,187,3,'12/27/2012',64859);
(4188,8,3,,2,'4/20/2009',16670);
(1265,6,2,155,2,'4/13/2007',20130);
(3874,7,2,,1,'3/25/2012',17809);
(9866,9,3,130,3,'2/27/2003',70183);
(7998,3,2,194,3,'4/11/2002',27622);
(5146,1,1,,1,'6/27/2002',58779);
(5283,4,3,,4,'1/24/2004',55112);
(9216,3,1,,1,'5/15/2003',59439);
(5881,9,2,,4,'7/8/2012',88095);
(8495,5,1,157,4,'8/20/2008',75160);
(8176,1,3,,2,'1/5/2006',19650);
(9723,4,1,124,4,'10/21/2006',59060);
(7132,2,3,192,2,'11/11/2008',26460);
(7947,2,2,150,1,'3/3/2006',55317);
(7458,8,2,,3,'4/27/2007',64009);
(8893,9,3,,4,'7/24/2012',40292);
(6683,7,1,,2,'7/24/2008',86020);
GO

/*INSERT INTO CAR_OWNERSHIP*/
USE [Beta3]
GO

INSERT INTO [dbo].[CAR_OWNERSHIP]
           ([VEH_ID]
           ,[CUS_ID]
           ,[INV_ID])
     VALUES
(1690,1,5655);
(1971,2,9749);
(1119,3,9909);
(1695,4,4188);
(1755,5,1265);
(1973,6,3874);
(1698,7,9866);
(1154,8,7998);
(1286,9,5146);
(1904,10,5283);
(1057,11,9216);
(1699,12,5881);
(1937,13,8495);
(1923,14,8176);
(1729,15,9723);
(1515,16,7132);
(1792,17,7947);
(1604,18,7458);
(1986,19,8893);
(1541,20,6683);
GO

/*INSERT INTO FINANCING*/
USE [Beta3]
GO

INSERT INTO [dbo].[FINANCING]
           ([FIN_ID]
           ,[FIN_OPTION]
           ,[FIN_RATE]
           ,[FIN_LENGHT])
     VALUES
(1,'Cash Payment ',0,0);
(2,'Don't pay for 12 months',1,12);
(3,'Don't pay for 24 months',1.5,24);
(4,'Don't pay for 36 months',2,36);
GO

/*INSERT INTO WARRANTY*/
USE [Beta3]
GO

INSERT INTO [dbo].[WARRANTY]
           ([WAR_ID]
           ,[WAR_TYPE]
           ,[WAR_TERM]
           ,[WAR_DESC])
     VALUES
(1,'BASIC COVERAGE',36,'COVERS ALL COMPONENTS');
(2,'POWER COVERAGE',60,'COVER ENGINE, TRANSMISSION, DRIVE SYSTEM');
(3,'SUPER POWER COVERAGE',75,'COVER ALL AND CORROSION PERFORATION');
GO

/*INSERT INTO CAR_BRAND*/
USE [Beta3]
GO

INSERT INTO [dbo].[CAR_BRAND]
           ([BRAND_ID]
           ,[BRAND_NAME]
           ,[COUNTRY])
     VALUES
(1,'Acura','Japan');
(2,'Audi','Germany');
(3,'BMW','Germany');
(4,'Chevrolet','United States');
(5,'Ford','United States');
(6,'Honda','Japan');
(7,'Lexus','Japan');
(8,'Mazda','Japan');
(9,'Nissan','Japan');
(10,'Toyota','Japan');
(10,'Toyota','Japan');
GO

/*INSERT INTO CAR_MODEL*/
USE [Beta3]
GO

INSERT INTO [dbo].[CAR_MODEL]
           ([BRAND_ID]
           ,[MODEL_ID]
           ,[MODEL_NAME])
     VALUES
(1,1,'ILX');
(2,1,'TSX');
(3,1,'TL');
(4,2,'A4');
(5,2,'R8');
(6,3,'3-Series');
(7,3,'5-Series');
(8,3,'7-Series');
(9,3,'X5');
(10,3,'M3');
(11,4,'Malibu Hybrid');
(12,4,'Malibu');
(13,4,'Corvette');
(14,4,'Volt');
(15,4,'Impala');
(16,5,'F-150');
(17,5,'F-450 Super Duty');
(18,5,'Explorer');
(19,5,'Mustang');
(20,6,'Civic');
(21,6,'Accord');
(22,6,'CR-V');
(23,6,'Odyssey');
(24,7,'GS 450h');
(25,7,'ES 350');
(26,8,'Mazda 3');
(27,8,'Mazda 6');
(28,8,'MX-5 Miata');
(29,8,'RX-8');
(30,9,'Pathfinder');
(31,9,'Quest');
(32,9,'Altima');
(33,9,'Altima Hybrid');
(34,10,'Prius');
(35,10,'Sienna');
GO

/*INSERT INTO CLASS*/
USE [Beta3]
GO

INSERT INTO [dbo].[CLASS]
           ([CLASS_ID]
           ,[CLASS_NAME])
     VALUES
(1,'Passenger Cars');
(2,'Luxury Cars');
(3,'Sports Cars');
(4,'SUVS');
(5,'Pickup Trucks');
(6,'Vans and Minivans');
(7,'Hybrids');
GO

/*INSERT INTO VEHICLE*/
USE [Beta3]
GO

INSERT INTO [dbo].[VEHICLE]
           ([MODEL_ID]
           ,[VEH_ID]
           ,[VEH_YEAR]
           ,[VEH_MILAGE]
           ,[VEH_DESC]
           ,[VEH_AC]
           ,[VEH_RADIO]
           ,[VEH_PRICE]
           ,[COLOUR_ID]
           ,[CLASS_ID]
           ,[SOURCE_ID])
     VALUES
(1,1690,2003,138347,'No','YES',8900,2,1,103);
(2,1971,2004,134511,'No','YES',12650,8,2,103);
(3,1480,2010,98990,'Yes','YES',25705,2,2,102);
(4,1221,2001,138184,'No','YES',12500,6,1,101);
(5,1119,2009,51392,'Yes','YES',84200,5,3,103);
(6,1277,2002,121758,'No','No',14900,10,1,101);
(7,1893,2004,143554,'No','YES',22900,8,2,101);
(8,1695,2004,128307,'No','YES',31900,10,2,102);
(9,1755,2000,117912,'No','No',10750,10,4,102);
(10,1973,2001,133168,'No','YES',29100,4,3,102);
(11,1358,2011,66841,'Yes','YES',30400,1,7,103);
(12,1698,2001,146123,'No','YES',8390,5,1,101);
(13,1805,2007,64851,'Yes','YES',49600,3,3,101);
(14,1984,2010,60741,'Yes','YES',30145,5,1,102);
(15,1427,2009,54884,'Yes','YES',19860,1,1,103);
(16,1819,2012,41334,'Yes','YES',42305,1,5,103);
(17,1683,2010,24765,'Yes','No',39395,10,5,101);
(18,1309,2001,133769,'No','No',12135,10,4,102);
(19,1154,2008,56756,'Yes','No',22200,5,3,102);
(20,1286,2011,59478,'Yes','YES',16690,10,1,103);
(21,1904,2005,58205,'No','YES',19680,6,1,101);
(22,1057,2001,107072,'No','YES',11495,2,4,103);
(23,1742,2011,97949,'Yes','YES',33825,6,6,102);
(24,1699,2007,41031,'Yes','No',38950,5,7,102);
(25,1514,2011,44000,'Yes','YES',36100,7,2,101);
(26,1937,2012,58946,'Yes','YES',24200,6,1,102);
(27,1923,2005,58269,'No','YES',20725,4,1,102);
(28,1729,2002,141345,'No','YES',10470,8,3,103);
(29,1856,2007,51130,'Yes','YES',26275,3,3,101);
(30,1515,2006,65543,'Yes','YES',22960,1,4,102);
(31,1792,2005,32758,'No','No',17990,7,6,103);
(32,1638,2011,35607,'Yes','YES',25500,10,1,103);
(33,1541,2012,62755,'Yes','YES',26800,4,7,101);
(34,1604,2010,43793,'Yes','No',24000,2,7,103);
(35,1986,2012,90622,'Yes','YES',40570,4,6,103);
GO

/*INSERT INTO COLOUR*/
USE [Beta3]
GO

INSERT INTO [dbo].[COLOUR]
           ([COL_ID]
           ,[COL_NAME])
     VALUES
(1,'White');
(2,'Silver');
(3,'Black');
(4,'Blue');
(5,'Grey');
(6,'Aqua');
(7,'Pink');
(8,'Red');
(9,'Yellow');
(10,'Purple');
GO

/*INSERT INTO SOURCE*/
USE [Beta3]
GO

INSERT INTO [dbo].[Source]
           ([SOURCE_ID]
           ,[SOURCE_NAME]
           ,[SOURCE_LOC]
           ,[SOURCE_TEL])
     VALUES
(101,'Individual Seller','613-828-5713');
(102,'Auction','613-538-5196');
(103,'Police Auction','613-661-5469');
(104,'Rental Car companies','613-580-5114');
(105,'Other Dealers','613-998-9948');
GO

/*INSERT INTO CUSTOMER*/
USE [Beta3]
GO

INSERT INTO [dbo].[CUSTOMER]
           ([CUS_ID]
           ,[CUS_FNAME]
           ,[CUS_LNAME]
           ,[CUS_PHONE]
           ,[LISCEN_NUM])
     VALUES
(1,'Bob','Smith','16131174040'623416);
(2,'Joe','Johnson','16132237628'734806);
(3,'Kim','Williams','16133120004'888884);
(4,'Matt','Jones','16132540773'812243);
(5,'Caleb','Brown','16135740247'180831);
(6,'Sam','Davis','16135012627'612910);
(7,'Jeremiah','Miller','16135721336'822848);
(8,'Ryan','Wilson','16139452481'366201);
(9,'Homer','Moore','16135996160'151727);
(10,'Brian','Taylor','16133555708'429716);
(11,'Peter','Anderson','16132816210'639311);
(12,'Sam','Thomas','16134814595'568958);
(13,'Luth','Jackson','16133658611'359456);
(14,'Serena','White','16132407151'881006);
(15,'Tina','Harris','16136286197'888579);
(16,'Karen','Martin','16139281238'531149);
(17,'James','Thompson','16131537652'680674);
(18,'Kevin','Garcia','16138508369'669945);
(19,'Luke','Martinez','16135832368'529603);
(20,'Kat','Robinson','16139675864'217919);
GO

/*INSERT INTO EMPLOYEE*/
USE [Beta3]
GO

INSERT INTO [dbo].[EMPLOYEE]
           ([EMP_LNAME]
           ,[EMP_FNAME]
           ,[EMP_PHONE]
           ,[EMP_ID]
           ,[EMP_SALARY])
     VALUES
('ANDERSON','MIKE',6135796468,1,63768)
('STEVENS','JERRY',6139175631,2,83420);
('ANDRES','GEORGE',6137909602,3,79999);
('ANDERSON','PAMELA',6131669903,4,88610);
('JAMESON','CARMELLA',6133630147,5,68822);
('BRYANT','MELISSA',6139705303,6,47886);
('TERRY','STACEY',6134478344,7,31576);
('DEVINE','KELLY',6137714828,8,67198);
('STARR','LEXI',6138903130,9,40494);
('JEREMY','STEVE',6134994912,10,67996);
('GATES','STEVE',6134994912,11,38415);
('SHAKUR','BIGGIE',6134994912,12,33269);
('LANDO','ANNAKIN',6134994912,13,39985);
('BLACK','TORY',6134994912,14,59870);
('ANNE','LISA',6134994912,15,44986);
GO

/*INSERT INTO ADMINS*/
INSERT INTO [dbo].[ADMINISTRATOR]
           ([EMP_ID]
           ,[QUALIFICATION])
     VALUES
(13,'MBA');
(14,’PHD’);
(15,’GRADUATE’);
GO

/*INSERT INTO SALESPERSON*/
USE [Beta3]
GO

INSERT INTO [dbo].[SALESPERSON]
           ([EMP_ID]
           ,[COMM_ID])
     VALUES
(1,5)
(2,4)
(3,2)
(4,2)
(5,3)
(6,2)
(7,1)
(8,4)
(9,5)
GO

/*INSERT INTO COMMISSION*/
USE [Beta3]
GO

INSERT INTO [dbo].[COMMISSION]
           ([COMM_ID]
           ,[COMM_Percentage])
     VALUES
(1,1);
(2,2.15);
(3,2.45);
(4,3);
(5,3.5);
GO

/*INSERT INTO MECHANIC*/
USE [Beta3]
GO

INSERT INTO [dbo].[MECHANIC]
           ([EMP_ID]
           ,[LICENSE])
     VALUES
('STARR','LEXI',6138903130,1,755000);
('JEREMY','STEVE',6134994912,1,755000);
('GATES','STEVE',6134994912,1,755000);
('SHAKUR','BIGGIE,6134994912,1,755000);
GO

/*INSERT INTO REPAIRS*/
USE [Beta3]
GO

INSERT INTO [dbo].[REPAIRS]
           ([REP_ID]
           ,[EMP_ID]
           ,[REPAIR_COST]
           ,[REPAIR_DESC])
     VALUES
(187,12,213.9,'CHANGE OIL');
(192,9,157.7,'FIX CALIBRATOR');
(130,11,169.5,'CHANGE WHIEELS ');
(194,11,142.9,'REPLACE HYPERFLEX');
(157,10,206.5,'BUFF OUT SCRATCHES');
(155,9,283.7,'FIX EXHAUST PIPE');
(124,11,120.1,'CHANGE WHEELS ');
(150,12,184.7,'REPLACE ENGINE');
GO

/*INSERT INTO REPAIR_TASK*/
USE [Beta3]
GO

INSERT INTO [dbo].[REPAIR_TASK]
           ([REP_ID]
           ,[PART_ID])
     VALUES
(187,'OV31');
(192,'KE18');
(130,'ZY71');
(194,'NP65');
(157,'SC51');
(155,'KU70');
(124,'TX58');
(150,'WG91');
GO

/*INSERT INTO PARTS*/
USE [Beta3]
GO

INSERT INTO [dbo].[PARTS]
           ([PART_ID]
           ,[VENDOR_ID]
           ,[PART_NAME]
           ,[PART_QTY])
     VALUES
('QD55','2JB33','WINTER TIRES',6);
('JN70','5XC38','SPRING TIRES',14);
('UM31','5XF87','ENGINE COVER',6);
('QB31','5XC38','A/C COMPRESSOR',8);
('BE70','6DS46','EXHAUST LEAD SHEILD',12);
('OV31','9FL62','EXHAUST PIPE',18);
('KE18','2JB33','POWER BRAKE ',18);
('ZY71','5XF87','DRIVE SHAFT',3);
('NP65','3TA60','EMERGENCY BRAKE',7);
('SC51','3TA60','RADIATOR CORE',4);
('KU70','4LY69','MASTER CYLINDER',10);
('TX58','3FC21','AIR PUMP',3);
('WG91','6DS46','FUEL CAP ',9);
('PN37','9FL62','SMOG PUMP',17);
GO

/*INSERT INTO VENDOR*/
USE [Beta3]
GO

INSERT INTO [dbo].[VENDOR]
           ([VENDOR_ID]
           ,[VEN_NAME]
           ,[VEN_CITY]
           ,[VEN_COUNTRY]
           ,[VEN_PHONE])
     VALUES
('9FL62','GOODYEAR','OHIO','CANADA','18005552356');
('3RN78','MICHELIN','QUEBEC','CANADA','18005559485');
('6DS46','FEDERAL-MOGUL','MICHIGAN','USA','18005557880');
('2JB33','DORMAN PRODUCTS','PENNSYLVANIA','USA','18005553675');
('4LY69','HOLLEY','KENTUCKY','USA','18005555094');
('5XC38','DANA HOLDING CORP','MAUMEE','USA','18005555286');
('5XF87','MAHLE GROUP','STUTTGART','GERMANY ','18005556669');
('3FC21','GKN GROUP ','WORCESTERSHIRE','ENGLAND','18005559991');
('3TA60','K&N ENGINEERING INC.','CALIFORNIA','USA','18005556846');
GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:05:47.247

试试这个 ：：

```
INSERT INTO [dbo].[INVOICE]
           ([INV_ID]
           ,[EMP_ID]
           ,[WAR_ID]
           ,[REP_ID]
           ,[FIN_ID]
           ,[INV_DATE]
           ,[INV_PRICE])
     VALUES
(5655,8,1,,3,'7/5/2000',75880),
(9749,1,1,,1,'11/26/2002',58881),
(9909,3,1,187,3,'12/27/2012',64859); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:53:22.543

每行后都需要逗号而不是分号。

此外，您正在使用的表值构造函数语法有 1000 个值的限制（[参考此处](http://msdn.microsoft.com/en-us/library/dd776382.aspx)）。

只需生成插入内容，使每个语句中的行数不超过 1000 行`INSERT INTO`，并且使用逗号，就可以了。但是，如果您说出实际的错误是什么，这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:50:43.200

我已经为您的一张桌子编写了 inc 代码。请为其余表格相应地修改您的代码。我强烈建议您使用 SQL+ 来避免这种堆栈溢出。

公司代码：-

全部插入 [dbo].INVOICEVALUES (5655,8,1,,3,'7/5/2000',75880) 插入 [dbo].INVOICEVALUES (9749,1,1,,1,'11/26/2002 ',58881) INTO [dbo].INVOICEVALUES (9909,3,1,187,3,'12/27/2012',64859) INTO [dbo].INVOICEVALUES (4188,8,3,,2,'4/20/ 2009',16670) INTO [dbo].INVOICEVALUES (1265,6,2,155,2,'4/13/2007',20130) INTO [dbo].INVOICEVALUES (3874,7,2,,1,'3/25 /2012',17809) INTO [dbo].INVOICEVALUES (9866,9,3,130,3,'2/27/2003',70183) INTO [dbo].INVOICEVALUES (7998,3,2,194,3,'4/11 /2002',27622) INTO [dbo].INVOICEVALUES (5146,1,1,,1,'6/27/2002',58779) INTO [dbo].INVOICEVALUES (5283,4,3,,4,'1 /24/2004',55112) INTO [dbo].INVOICEVALUES (9216,3,1,,1,'5/15/2003',59439) INTO [dbo].INVOICEVALUES (5881,9,2,,4, '7/8/2012',88095) INTO [dbo].INVOICEVALUES (8495,5,1,157,4,'8/20/2008',75160) INTO [dbo].INVOICEVALUES (8176,1,3,,2,'1/5/2006',19650) INTO [dbo].INVOICEVALUES (9723,4,1,124,4, '10/21/2006',59060) INTO [dbo].INVOICEVALUES (7132,2,3,192,2,'11/11/2008',26460) INTO [dbo].INVOICEVALUES (7947,2,2,150,1, '3/3/2006',55317) INTO [dbo].INVOICEVALUES (7458,8,2,,3,'4/27/2007',64009) INTO [dbo].INVOICEVALUES (8893,9,3,, 4,'7/24/2012',40292) INTO [dbo].INVOICEVALUES (6683,7,1,,2,'7/24/2008',86020) SELECT * FROM dual;64009) INTO [dbo].INVOICEVALUES (8893,9,3,,4,'7/24/2012',40292) INTO [dbo].INVOICEVALUES (6683,7,1,,2,'7/24/2008 ',86020) SELECT * FROM dual;64009) INTO [dbo].INVOICEVALUES (8893,9,3,,4,'7/24/2012',40292) INTO [dbo].INVOICEVALUES (6683,7,1,,2,'7/24/2008 ',86020) SELECT * FROM dual;

问候， 拉詹

# string - 仅从 Windows Phone 中的 URI 获取网站地址

> ID：13395168
> 
> 赞同：0
> 
> 时间：2012-11-15T10:04:07.517
> 
> 标签：string, xaml, windows-phone-7

我正在研究 WP7 项目。我有一个名为“URL”的字段。我只想获得网站地址。我想在 XAML 代码中实现这一点。

```
Example :
URL = http://www.techgig.com/skilltest/ASP-Net

Expected Result : http://www.techgig.com 

<TextBlock x:Name="website" HorizontalAlignment="Left" TextWrapping="Wrap"  Text="{Binding URL}"   FontSize="{StaticResource PhoneFontSizeNormal}" Foreground="{StaticResource PhoneAccentBrush}"/> 
```

是否可以在 XAML 代码中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:23:20.837

您应该考虑在后面的代码（.cs 或 .vb）中实现这一点。我建议使用“正则表达式”来解析 URL 字符串以获得您想要的结果。有许多带有快速 Bing 或 Google 搜索的正则表达式示例。

C# 中的简单示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions; //needed

namespace SplitingStrings
{
    class Program
    {
        static void Main(string[] args)
        {
            string input = "http://www.yo.com/stuff/you/donot/want";
            string pattern = "(.com/)";            // Split on .com/ 

            string[] substrings = Regex.Split(input, pattern);
            foreach (string match in substrings)
            {
                Console.WriteLine("'{0}'", match);
            }

            Console.WriteLine(substrings[0] + substrings[1]); //this is what you want

            Console.ReadKey(true);
            // The method writes the following to the console: 
            //    'http://www.yo' 
            //    '.com/' 
            //    'stuff/you/donot/want'
            //    http://www.yo.com/

        }
    }
} 
```

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)

# php - 无法从 MySQL DB 中检索文本

> ID：13395170
> 
> 赞同：-1
> 
> 时间：2012-11-15T10:04:16.993
> 
> 标签：php, html

我创建了一个简单的博客系统，它连接到我的数据库并从名为 login 的数据库和名为 news 的表中检索信息。问题是即使它连接它也不会发布信息。这是我的代码：

```
<html>
<?php
$host = '127.0.0.1';
$user = 'root';
$password = 'ascent';
$webdb = 'login';
$newstable = 'news';

$con = mysql_connect($host,$user,$password); 
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

if (isset($_GET['newsid']))
{
    $id = (int)$_GET['newsid'];
    mysql_select_db($webdb);

    $result = mysql_query("SELECT * FROM news WHERE id='".$id."'");
    $row = mysql_fetch_assoc($result); ?>
    <div class='box_two_title'><?php echo $row['title']; ?></div>

    <?php 
    echo $row['body'];
    }
    ?>
Hello
</html> 
```

感谢您到目前为止所有有用的答案，但它仍然没有发布：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:09:05.213

你的错误报告关闭了吗？`connect::selectDB('webdb')`应该抛出一个错误。此外，您在变量中设置主机、数据库名称，并在连接时将它们放在引号中。为什么？

```
connect::selectDB('webdb'); 
```

应该

```
mysql_select_db($webdb); 
```

和

```
$con = mysql_connect("$host","$user","$password"); 
```

应该

```
$con = mysql_connect($host,$user,$password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:18:08.693

如果您在此处获得 $id 的正确值， `if (isset($_GET['newsid'])) { $id = (int)$_GET['newsid'];`并且您有一个带有“title”和“body”列的表“news”，那么以下内容对您有用。

```
<html>    <head><title> You Title </title></head>    <body>
<?php
$host = '127.0.0.1';
$user = 'root';
$password = 'ascent';
$webdb = 'login';
$newstable = 'news';

$con = mysql_connect($host,$user,$password);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
?>
<div class='box_two_title'>
<?php
if (isset($_GET['newsid']))
{
    $id = (int)$_GET['newsid'];
    mysql_select_db($webdb);

    $result = mysql_query("SELECT * FROM news WHERE id='".$id."'");
    $row = mysql_fetch_array($result); ?>
    echo $row['title'];
    echo "</div>";
    echo $row['body'];
}
else
    echo "</div>";
?>    
Hello
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:31:41.840

如果你所有的变量都有正确的值，这应该有效。

```
<html>
<head>
</head>
<body>
    <?php
    $host = "127.0.0.1";
    $user = "root";
    $password = "ascent";
    $webdb = "login";
    $newstable = "news";

    $con = mysql_connect("$host", "$user", "$password"); 
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    if (isset($_GET['newsid']))
    {
        $id = (int)$_GET['newsid'];
        mysql_select_db("$webdb");

        $result = mysql_query("SELECT * FROM news WHERE id='".$id."'");
        while($row = mysql_fetch_array($result)){ ?>
        <div class='box_two_title'><?php echo $row['title']; ?></div>

        <?php 
        echo $row['body'];
        }
    }
    ?>
Hello
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T10:09:49.773

尝试在途中转储每个 var。可能是你需要循环`mysql_fetch_assoc($result)`

# c - 带有 Xlib 的空或透明窗口仅显示边框线

> ID：13395179
> 
> 赞同：10
> 
> 时间：2012-11-15T10:04:52.727
> 
> 标签：c, image-processing, x11, transparent, xlib

有没有办法用 Xlib 创建一个只显示边框线、标题、关闭按钮并且可以用鼠标移动的窗口？窗口的内容必须为空（或“完全透明”，尽管“透明”听起来更像是我不需要的效果）。基本上窗口应该显示背景区域。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-15T12:01:02.643

我不确定这是否是您想要的，但以下代码创建了一个具有透明背景的 X 窗口，但仍使用窗口管理器的窗口装饰。

只有当您的 X11 和图形硬件配置支持 32 位深度的视觉效果时，它才会起作用。

```
#include <X11/Xlib.h>
#include <X11/Xutil.h>

int main(int argc, char* argv[])
{
    Display* display = XOpenDisplay(NULL);

    XVisualInfo vinfo;
    XMatchVisualInfo(display, DefaultScreen(display), 32, TrueColor, &vinfo);

    XSetWindowAttributes attr;
    attr.colormap = XCreateColormap(display, DefaultRootWindow(display), vinfo.visual, AllocNone);
    attr.border_pixel = 0;
    attr.background_pixel = 0;

    Window win = XCreateWindow(display, DefaultRootWindow(display), 0, 0, 300, 200, 0, vinfo.depth, InputOutput, vinfo.visual, CWColormap | CWBorderPixel | CWBackPixel, &attr);
    XSelectInput(display, win, StructureNotifyMask);
    GC gc = XCreateGC(display, win, 0, 0);

    Atom wm_delete_window = XInternAtom(display, "WM_DELETE_WINDOW", 0);
    XSetWMProtocols(display, win, &wm_delete_window, 1);

    XMapWindow(display, win);

    int keep_running = 1;
    XEvent event;

    while (keep_running) {
        XNextEvent(display, &event);

        switch(event.type) {
            case ClientMessage:
                if (event.xclient.message_type == XInternAtom(display, "WM_PROTOCOLS", 1) && (Atom)event.xclient.data.l[0] == XInternAtom(display, "WM_DELETE_WINDOW", 1))
                    keep_running = 0;

                break;

            default:
                break;
        }
    }

    XDestroyWindow(display, win);
    XCloseDisplay(display);
    return 0;
} 
```

# rubymotion - 在 Rubymotion 中隐藏 tabBar

> ID：13395181
> 
> 赞同：0
> 
> 时间：2012-11-15T10:04:55.780
> 
> 标签：rubymotion

我正在用 Rubymotion 构建一个 iOS 应用程序。我想创建一个自定义 tabBar，所以我需要使用一个真正的 tabBar 但隐藏它。如何在 Rubymotion 中隐藏 tabBar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:41:47.427

要隐藏标签栏，您可以使用 hidesBottomBarWhenPushed。目标 C 是：

```
MyController *myController = [[MyController alloc]init]; 
myController.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:myController animated:YES];
[myController release]; 
```

因此 RubyMotion 代码是

```
@my_controller = MyController.alloc.init
@my_controller.hidesBottomBarWhenPushed = true
self.navigationController.pushViewController(@my_controller, animated:true) 
```

我希望这有帮助。如果您想查看对标签栏的更多参考，请查看： [https](https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/12_tabbars) ://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/12_tabbars 或者如果您想查看导航控制器的基础知识，请查看 [https： //github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/11_navbarbuttons](https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/11_navbarbuttons)

我希望这有帮助！

# codeigniter - 如何在 phpMyAdmin 中存储一个数组（字符串）

> ID：13395186
> 
> 赞同：2
> 
> 时间：2012-11-15T10:05:16.247
> 
> 标签：codeigniter, phpmyadmin

有没有办法在 phpMyAdmin 中存储一个数组。

我知道可能有几个，但我想知道哪个是 CodeIgniter 最好的。

我的问题是我想通过 CodeIgniter 模型添加数据，但我找不到任何关于数组的参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:12:04.300

首先phpmyadmin 不是存储数据的地方，phpmyadmin 是mySQL 数据库的接口。 [http://www.phpmyadmin.net/home_page/index.php](http://www.phpmyadmin.net/home_page/index.php)

话虽如此，mySQL 数据库不能存储“数组”，只能存储整数、字符串、日期时间等数据类型

一种可能的解决方案是将您的字符串数组转换为一个长字符串（[php -implode](http://php.net/manual/en/function.implode.php)）并将其作为单个字符串存储在您的数据库中。

然后，当您将其从数据库中拉出时，将其分离回字符串数组（[php str_split](http://php.net/manual/en/function.str-split.php)）

# performance - mongodb查询中的嵌套文档是否有任何性能差异

> ID：13395188
> 
> 赞同：23
> 
> 时间：2012-11-15T10:05:18.390
> 
> 标签：performance, mongodb, nested

如果我为用户名字段创建索引，哪个文档更适合查询特定用户？

嵌套的：

```
 {
        account:{
        username:'zhengyi',  
        passwd:'zhengyi',
        friends:[]
        }
        dev:{
            os:'iOS',
            ver:'6.0',
            hw:'iPhone2,1'
        },
        app:{
            ver:'1.0',
            pver:'1.0'
        }
    } 
```

未嵌套的：

```
 {    
        username:'zhengyi',
        passwd:'zhengyi',
        friends:[],
        dev:{
            os:'iOS',
            ver:'6.0',
            hw:'iPhone2,1'
        },
        app:{
            ver:'1.0',
            pver:'1.0'
        }
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-15T10:27:02.157

这没有什么区别
你要么在做：

```
db.collection.findOne({"username":"zhengyi"}); 
```

或者

```
db.collection.findOne({"account.username":"zhengyi"}); 
```

阅读嵌入式文档的[点符号](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)

类似地，索引使用点符号来到达文档内部：

```
db.collection.ensureIndex({"username": 1}); 
```

或者

```
db.collection.ensureIndex({"account.username": 1}); 
```

# mysql - MySQL：从逗号分隔列表/列表中选择表？“从（1、2、3）中选择一个”

> ID：13395193
> 
> 赞同：5
> 
> 时间：2012-11-15T10:05:47.950
> 
> 标签：mysql, sql, select

是否可以做这样的事情（显然这种语法不起作用）：

```
SELECT a FROM (1, 2, 3) 
```

得到这个：

```
| a |
+---+
| 1 |
| 2 |
| 3 | 
```

?

那就是我想从逗号分隔列表中创建行，而不使用任何表，或者至少不在 db 中创建表（也许这可以使用临时表之类的东西？）。

也许可以在不使用 select 的情况下获取给定值的列，即使用其他一些 sql 语句？如果这在 MySQL 中是不可能的，但在其他一些 SQL 中是可能的，那么知道它仍然会很有趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T10:09:12.863

```
SELECT 1 a UNION ALL SELECT 2 a UNION ALL SELECT 3 a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:17:50.743

临时表是一种选择吗？然后我会有一个建议，诚然，它有超过 1 个查询：

```
-- DROP TEMPORARY TABLE tmp_list IF EXISTS;
CREATE TEMPORARY TABLE tmp_list (a INT);
INSERT INTO tmp_list (a) VALUES (1), (2), (3);
SELECT a FROM tmp_list; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T10:18:09.480

> *如果这在 MySQL 中是不可能的，但在其他一些 SQL 中是可能的，那么知道它仍然会很有趣。*

在标准 SQL 中，这将是这样的

```
select *
from ( values (1), (2), (3) ) t 
```

这至少在 PostgreSQL 和 DB2 中有效。

在 PostgreSQL 中，您可以通过扩展别名来为列命名（不确定该列别名是否是 SQL 标准的一部分）。

```
select *
from ( values (1), (2), (3) ) t (id) 
```

以下是使用公用表表达式的上述替代方法。

```
with my_values (id) as (
  values (1), (2), (3)
)
select *
from my_values; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-08T16:11:17.487

*从 MariaDB v10.3.3 和 MySQL v8.0.19*开始，您现在可以做到这一点！

参见文档： [MariaDB](https://mariadb.com/kb/en/table-value-constructors/)、[MySQL](https://dev.mysql.com/doc/refman/8.0/en/values.html)

**玛丽亚数据库：**

```
WITH mylist (a) AS (VALUES (1),(2),(3))
SELECT a FROM mylist 
```

我在`WITH`这里使用了 a ，因为 MariaDB 没有为`VALUES ...`. 您可以在没有列名的联合中使用它：

```
SELECT 1 AS a UNION ALL VALUES (2),(3) 
```

尽管文档似乎没有提到它，但您甚至可以将其用作顶级查询：

```
VALUES (1),(2),(3) ORDER BY 1 DESC 
```

实际的列名实际上只是第一行值，因此您甚至可以这样做（虽然它不雅，而且您可能会遇到重复的列名错误）：

```
SELECT `4` AS a FROM (VALUES (4),(5),(6)) mylist 
```

* * *

**MySQL：**

~~我现在没有要测试的 MySQL v8.0.19 实例，但根据文档~~[*编辑：使用 dbfiddle.uk 在 MySQL v8.0.23 上成功测试，请参阅评论 #2 中的链接*] 这些中的任何一个都应该工作：

```
SELECT column_0 AS a FROM (VALUES ROW(1), ROW(2), ROW(3)) mylist

SELECT a FROM (VALUES ROW(1), ROW(2), ROW(3)) mylist(a) 
```

与 MariaDB 不同，MySQL 提供自动列名 column_0、column_1、column_2 等，并且还支持在引用子查询时重命名所有列。

我不确定，但[这个开发工作日志页面](https://dev.mysql.com/worklog/task/?id=10358)似乎表明 MySQL~~还实现~~了[*编辑：尚未实现，截至 v8.0.26* ] 较短的语法（省略“ROW”，如 MariaDB），或者他们可能在在不久的将来的某个时间点。

# android - HttpGet 获取 JavaScript 生成的结果？

> ID：13395195
> 
> 赞同：0
> 
> 时间：2012-11-15T10:05:51.103
> 
> 标签：android, httpclient, http-get

我正在从这样的页面请求结果：

```
String getURL = "http://www.example.com/search.php?q="+query;
HttpClient client = new DefaultHttpClient(); 
HttpGet get = new HttpGet(getURL);
HttpResponse responseGet = client.execute(get);  
HttpEntity resEntityGet = responseGet.getEntity();  
if (resEntityGet != null) {  
    String response = EntityUtils.toString(resEntityGet);
} 
```

问题是，`<results>`页面中的 div（`<div>`包含搜索结果的）是空的。我知道这是因为*JavaScript 生成的结果。*

*   有没有办法修改我的代码来解决它？
*   如果没有，除了修改后端的工作方式之外，还有其他方法吗？

# orm - 用于 Spring-MongoDB 集成的 ORM 与本机查询支持

> ID：13395196
> 
> 赞同：0
> 
> 时间：2012-11-15T10:05:51.407
> 
> 标签：orm, mongodb-java, mongodb-query, spring-mongo

我是使用 Mongo DB 并探索从 mysql 迁移到 mongodb 的框架的新手。到目前为止，从我的发现来看，我已经能够确定 SpringMongo 是满足我要求的最佳解决方案。

唯一的问题是，与其使用基于 DSL 或抽象的查询机制，我希望框架允许我将纯参数作为参数传递给 API( , )`json string`公开的不同方法，以便可以将查询参数写出到外部文件（使用键来引用）并通过在运行时读取和解析传递给方法。但是框架应该能够将结果映射到域对象。`find``findOne`

spring-mongo 有没有办法实现这一点？或者是否有任何其他框架在同一行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T23:43:16.067

您可以使用 Spring Data 来做到这一点，只需使用 BasicQuery 类而不是 Query 类。您的代码将如下所示：

```
/* Any arbitrary string that could to parsed to DBObject */
Query q = new BasicQuery("{ filter : true }");
List<Entity> entities = this.template.find(q, Entity.class); 
```

如果您想了解更多详情：

[http://static.springsource.org/spring-data/data-mongo/docs/current/reference/html/#mongo.query](http://static.springsource.org/spring-data/data-mongo/docs/current/reference/html/#mongo.query)

[http://static.springsource.org/spring-data/data-mongodb/docs/current/api/org/springframework/data/mongodb/core/query/BasicQuery.html](http://static.springsource.org/spring-data/data-mongodb/docs/current/api/org/springframework/data/mongodb/core/query/BasicQuery.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:24:32.237

好吧，我必须在 Spring 数据 MongoOperations 中找到这个...

```
String jsonCommand = "{username: 'mickey'}";
MongoOperations mongoOps = //get mongooperations implemantation
mongoOps.executeCommand(jsonCommand) 
```

`CommandResult`它返回一个封装结果的实例。

# android - 应用程序可以识别用户创建了谷歌帐户吗？

> ID：13395198
> 
> 赞同：-1
> 
> 时间：2012-11-15T10:05:55.797
> 
> 标签：android, events, android-intent

> **可能重复：**
> [检查 android 中是否有任何电子邮件帐户设置](https://stackoverflow.com/questions/6505235/check-if-any-email-account-setup-in-android)

嗨，有什么方法可以知道用户在我的应用程序中创建了新的谷歌帐户？通过意图或事件或任何其他方式？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:15:17.633

> `getAccountsByType(String)`使用或 列出可用帐户`getAccountsByTypeAndFeatures(String, String[], AccountManagerCallback,` `Handler)`。通常应用程序只会对具有一种特定类型的帐户感兴趣，该类型标识身份验证器。帐户特征用于识别特定帐户子类型和功能。帐户类型和功能都是特定于身份验证器的字符串，应用程序必须与其首选的身份验证器协调，才能知道这些字符串。

```
public boolean isThereGoogleAccount(){
    AccountManager manager = AccountManager.get(this); 
    Account[] accounts = manager.getAccountsByType("com.google"); 
    if (accounts.length > 0)
        return true;
    else
        return false;
} 
```

如果还没有一个谷歌账户，这将创建一个谷歌账户。

```
AccountManager accountMgr = AccountManager.get(mContext);
accountMgr.addAccount("com.google", "ah", null, new Bundle(), (Activity) mContext, null, null); 
```

“ah”是授权令牌类型。

# wpf - DataContext Change 不会更新“附加行为”中的绑定

> ID：13395201
> 
> 赞同：2
> 
> 时间：2012-11-15T10:06:03.707
> 
> 标签：wpf, infragistics, attachedbehaviors

不久前，我为 XamDataGrid 和作为 ObservableCollection 的“业务对象”之间的两种方式同步编写了一个“附加行为”。XamDataGrid 是源，ObservableCollection as DataSource 是目标。由于特定原因，我没有使用 ListCollectionView。

**问题**

当 DataGrid 的 DataContext 更改为另一个 Vehicle 时，当前加载的 DataGrid 不会更新行为的 DependencyProperty。

我不知道为什么。

我能想到的唯一解决方案是挂钩 DataGrid 的 DataContextChanged 并使用 Path 进行新的 BindingOperation ，然后将其设置为相对于 DataContext 以确定 SelectedItems 属性。但在这种情况下，行为的 DependencyProperty 应设置为 SelectedItems 属性的路径，而不是绑定。

**有以下课程**

示例模型

```
public class Vehicle 
{ 
    public PassengerList Passengers { get; set; } 
}

public class PassengerList : ObservableCollection<Passenger> 
{
    public PassengerList()
    {
         SelectedPassengers = new ObservableCollection<Passenger>();
    }

    public ObservableCollection<Passenger> SelectedPassengers { get; private set; }
}

public class Passenger
{
    public string Name { get; set; }
} 
```

**xml**

```
<igDG:XamDataGrid DataSource="{Binding Passengers}">
<i:Interaction.Behaviors>
   <b:XamDataGridSelectedItemsBehavior SelectedItems="{Binding Path=Passengers.SelectedPssengers}" />
</i:Interaction.Behaviors>
</igDG:XamDataGrid> 
```

PS：我也尝试过将元素绑定到 DataGrid 作为元素，但这并不能解决问题。DependencyProperty 仅设置一次。例如模型

**双向行为**

当模型中的选定项更改时，网格选定项也必须更新。它也不需要使用弱事件分离。

```
public class XamDataGridSelectedItemsBehavior : Behavior<XamDataGrid>, IWeakEventListener
{
    #region Properties

    private XamDataGrid Grid
    {
        get { return AssociatedObject as XamDataGrid; }
    }

    public static readonly DependencyProperty SelectedItemsProperty = DependencyProperty.Register(
        "SelectedItems",
        typeof(INotifyCollectionChanged),
        typeof(XamDataGridSelectedItemsBehavior),
        new UIPropertyMetadata(new PropertyChangedCallback(OnSelectedItemsChanged)));

    private static void OnSelectedItemsChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e) 
    {
         if (obj != null) 
         {
            (obj as XamDataGridSelectedItemsBehavior).SelectedItems = (e.NewValue as INotifyCollectionChanged);
        }
    }

    public INotifyCollectionChanged SelectedItems
    {
        get { return (INotifyCollectionChanged)GetValue(SelectedItemsProperty); }
        set
        {
            // remove old listener
            if (SelectedItems != null)
                CollectionChangedEventManager.RemoveListener(SelectedItems, this);

            SetValue(SelectedItemsProperty, value);

            // add new listener
            if (SelectedItems != null)
                CollectionChangedEventManager.AddListener(SelectedItems, this);
        }
    }

    #endregion

    #region Init

    /// <summary>
    /// Hook up event listeners to the associated object.
    /// </summary>
    protected override void OnAttached()
    {
        base.OnAttached();

        SelectedItemsChangedEventManager.AddListener(Grid, this);
        XamDataGridRecordActivatedEventManager.AddListener(Grid, this);
        XamDataGridLoadedEventManager.AddListener(Grid, this);
    }

    void Grid_RecordActivated(object sender, RecordActivatedEventArgs e)
    {
        if (_transferingToTarget)
            return;

        // if the CellClickAction is EnterEditModeIfAllowed, the grid does not always select the actual record
        // In our case we want it to always select the record
        if (e.Record.DataPresenter.FieldSettings.CellClickAction == CellClickAction.EnterEditModeIfAllowed)
        {
            TransferSourceToTarget();
        }
    }

    void Grid_Loaded(object sender, RoutedEventArgs e)
    {
        TransferTargetToSource(true);
    }

    #endregion

    #region Target to Source

    /// <summary>
    /// When selected items in the target as model has changed, then transfer selected item to grid as the source.
    /// Not when transfering from grid to selected items.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void SelectedItems_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (_transferingToTarget)
            return;

        TransferTargetToSource(false);
    }

    private bool _transferingToSource = false;
    /// <summary>
    /// Transfer selected item in the target as model to the grid as source.
    /// </summary>
    private void TransferTargetToSource(bool notifyTargetListeners)
    {
        if (SelectedItems == null)
            return;

        List<Record> newSelection = new List<Record>();
        foreach (var item in (SelectedItems as IList))
        {
            var record = Grid.Records.FirstOrDefault(r => (r is DataRecord) && ((r as DataRecord).DataItem == item));
            if (record != null)
            {
                newSelection.Add(record);
            }
        }

        _transferingToSource = true;
        try
        {
            Grid.SelectedItems.Records.Clear();
            Grid.SelectedItems.Records.AddRange(newSelection.ToArray());
            if ((newSelection.Count > 0) && !newSelection.Contains(Grid.ActiveRecord))
            {
                Grid.ActiveRecord = newSelection.FirstOrDefault();
                Grid.ActiveRecord.IsSelected = true;
            }

            if (notifyTargetListeners)
            {
                // Hack to notify the target listeners
                (SelectedItems as IList).Clear();
                foreach (var record in newSelection)
                {
                    (SelectedItems as IList).Add((record as DataRecord).DataItem);
                }
            }
        }
        finally
        {
            _transferingToSource = false;
        }
    }

    #endregion

    #region Source to Target

    /// <summary>
    /// When selected items in the source as grid has changed, then transfer selected item to model as the target.
    /// Not when transfering from selected items to grid.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    void Grid_SelectedItemsChanged(object sender, SelectedItemsChangedEventArgs e)
    {
        if (_transferingToSource)
            return;

        TransferSourceToTarget();
    }

    private bool _transferingToTarget = false;
    /// <summary>
    /// Transfer the selected item in the grid as source to the selected item in the target as model.
    /// </summary>
    private void TransferSourceToTarget()
    {
        var target = this.SelectedItems as IList;
        if (target == null)
            return;

        _transferingToTarget = true;
        try
        {
            // clear the target first
            target.Clear();

            // When no item is selected there might still be an active record
            if (Grid.SelectedItems.Count() == 0)
            {
                if (Grid.ActiveDataItem != null)
                    target.Add(Grid.ActiveDataItem);
                else if (Grid.ActiveRecord != null && Grid.ActiveRecord.IsDataRecord)
                    target.Add((Grid.ActiveRecord as DataRecord).DataItem);
                else if (Grid.ActiveCell != null && Grid.ActiveCell.Record != null && Grid.ActiveCell.Record.IsDataRecord)
                    target.Add((Grid.ActiveCell.Record as DataRecord).DataItem);
            }
            else
            {
                // foreach record in the source add it to the target
                foreach (var r in Grid.SelectedItems.Records)
                {
                    if (r.IsDataRecord)
                    {
                        target.Add((r as DataRecord).DataItem);
                    }
                }
            }
        }
        finally
        {
            _transferingToTarget = false;
        }
    }

    #endregion

    /// <summary>
    /// Receive an event and delegate it to the correct eventhandler.
    /// </summary>
    /// <param name="managerType"></param>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    /// <returns></returns>
    bool IWeakEventListener.ReceiveWeakEvent(Type managerType, object sender, EventArgs e)
    {
        if (managerType == typeof(CollectionChangedEventManager))
        {
            SelectedItems_CollectionChanged(sender, e as NotifyCollectionChangedEventArgs);
            return true;
        }
        else if (managerType == typeof(SelectedItemsChangedEventManager))
        {
            Grid_SelectedItemsChanged(sender, e as SelectedItemsChangedEventArgs);
            return true;
        }
        else if (managerType == typeof(XamDataGridRecordActivatedEventManager))
        {
            Grid_RecordActivated(sender, e as RecordActivatedEventArgs);
            return true;
        }
        else if (managerType == typeof(XamDataGridLoadedEventManager))
        {
            Grid_Loaded(sender, e as RoutedEventArgs);
            return true;
        }
        return false;
    }
}

#region EventManagers

public class CollectionChangedEventManager : WeakEventManagerBase<CollectionChangedEventManager, INotifyCollectionChanged>
{
    protected override void StartListeningTo(INotifyCollectionChanged source)
    {
        source.CollectionChanged += DeliverEvent;
    }

    protected override void StopListeningTo(INotifyCollectionChanged source)
    {
        source.CollectionChanged -= DeliverEvent;
    }
}

public class XamDataGridRecordActivatedEventManager : WeakEventManagerBase<XamDataGridRecordActivatedEventManager, XamDataGrid>
{
    protected override void StartListeningTo(XamDataGrid source)
    {
        source.RecordActivated += DeliverEvent;
    }

    protected override void StopListeningTo(XamDataGrid source)
    {
        source.RecordActivated -= DeliverEvent;
    }
}

public class XamDataGridLoadedEventManager : WeakEventManagerBase<XamDataGridLoadedEventManager, XamDataGrid>
{
    protected override void StartListeningTo(XamDataGrid source)
    {
        source.Loaded += DeliverEvent;
    }

    protected override void StopListeningTo(XamDataGrid source)
    {
        source.Loaded -= DeliverEvent;
    }
}

public class SelectedItemsChangedEventManager : WeakEventManagerBase<SelectedItemsChangedEventManager, XamDataGrid>
{
    protected override void StartListeningTo(XamDataGrid source)
    {
        source.SelectedItemsChanged += DeliverEvent;
    }

    protected override void StopListeningTo(XamDataGrid source)
    {
        source.SelectedItemsChanged -= DeliverEvent;
    }
}

#endregion

#region EventManager base class

// TODO: 10-10-2011 (rdj): Deze class misschien opnemen in het frontend framework? In ieder geval zolang we nog geen .NET 4.5 gebruiken
// http://10rem.net/blog/2012/02/01/event-handler-memory-leaks-unwiring-events-and-the-weakeventmanager-in-wpf-45

/// <summary>
/// Weak event manager base class to provide easy implementation of weak event managers.
/// </summary>
/// <typeparam name="TManager">Type of the manager.</typeparam>
/// <typeparam name="TEventSource">Type of the event source.</typeparam>
public abstract class WeakEventManagerBase<TManager, TEventSource> : WeakEventManager
    where TManager : WeakEventManagerBase<TManager, TEventSource>, new()
    where TEventSource : class
{
    /// <summary>
    /// Adds a listener
    /// </summary>
    /// <param name="source">The source of the event, should be null if listening to static events</param>
    /// <param name="listener">The listener of the event. This is the class that will recieve the ReceiveWeakEvent method call</param>
    public static void AddListener(object source, IWeakEventListener listener)
    {
        CurrentManager.ProtectedAddListener(source, listener);
    }

    /// <summary>
    /// Removes a listener
    /// </summary>
    /// <param name="source">The source of the event, should be null if listening to static events</param>
    /// <param name="listener">The listener of the event. This is the class that will recieve the ReceiveWeakEvent method call</param>
    public static void RemoveListener(object source, IWeakEventListener listener)
    {
        CurrentManager.ProtectedRemoveListener(source, listener);
    }

    /// <inheritdoc/>
    protected sealed override void StartListening(object source)
    {
        StartListeningTo((TEventSource)source);
    }

    /// <inheritdoc/>
    protected sealed override void StopListening(object source)
    {
        StopListeningTo((TEventSource)source);
    }

    /// <summary>
    /// Attaches the event handler.
    /// </summary>
    protected abstract void StartListeningTo(TEventSource source);

    /// <summary>
    /// Detaches the event handler.
    /// </summary>
    protected abstract void StopListeningTo(TEventSource source);

    /// <summary>
    /// Gets the current manager
    /// </summary>
    protected static TManager CurrentManager
    {
        get
        {
            var mType = typeof(TManager);
            var mgr = (TManager)GetCurrentManager(mType);
            if (mgr == null)
            {
                mgr = new TManager();
                SetCurrentManager(mType, mgr);
            }
            return mgr;
        }
    }
}

#endregion 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:08:33.313

我通过添加两个新的依赖属性来让它工作。

**数据上下文属性**

```
 public static readonly DependencyProperty DataContextProperty = DependencyProperty.Register(
        "DataContext",
        typeof(object),
        typeof(XamDataGridSelectedItemsBehavior),
        new PropertyMetadata(DataContextChanged));

    private static void DataContextChanged(object obj, DependencyPropertyChangedEventArgs e)
    {
        var behavior = obj as XamDataGridSelectedItemsBehavior;
        var binding = new Binding(behavior.Path) { Source = e.NewValue };
        BindingOperations.SetBinding(behavior, XamDataGridSelectedItemsBehavior.SelectedItemsProperty, binding);
    } 
```

**用于在 DataContext 发生更改时创建新绑定的**PathProperty****

 **```
 public static readonly DependencyProperty PathProperty = DependencyProperty.Register(
        "Path",
        typeof(string),
        typeof(XamDataGridSelectedItemsBehavior),
        new UIPropertyMetadata(string.Empty, new PropertyChangedCallback(OnPathChanged)));

    private static void OnPathChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var behavior = obj as XamDataGridSelectedItemsBehavior;
        behavior.Path = e.NewValue as string;
    }

    public string Path { get; set; } 
```

DataContext 属性在 OnAttached 中设置，以便将 DataContextChanged 事件挂接到

```
 protected override void OnAttached()
    {
        base.OnAttached();

        SelectedItemsChangedEventManager.AddListener(Grid, this);
        XamDataGridRecordActivatedEventManager.AddListener(Grid, this);
        XamDataGridLoadedEventManager.AddListener(Grid, this);

        BindingOperations.SetBinding(this, XamDataGridSelectedItemsBehavior.DataContextProperty, new Binding());
    } 
```

SelectedItems 依赖属性现在是私有的并且稍作修改

```
 public static readonly DependencyProperty SelectedItemsProperty = DependencyProperty.Register(
        "SelectedItems",
        typeof(INotifyCollectionChanged),
        typeof(XamDataGridSelectedItemsBehavior2),
        new UIPropertyMetadata(new PropertyChangedCallback(OnSelectedItemsChanged)));

    private static void OnSelectedItemsChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var behavior = obj as XamDataGridSelectedItemsBehavior;

        if (behavior.SelectedItems != null)
            CollectionChangedEventManager.RemoveListener(behavior.SelectedItems, behavior);

        if (e.NewValue is INotifyCollectionChanged)
        {
            behavior.SelectedItems = e.NewValue as INotifyCollectionChanged;
            CollectionChangedEventManager.AddListener(behavior.SelectedItems, behavior);
        }
    }

    private INotifyCollectionChanged SelectedItems
    {
        get  { return (INotifyCollectionChanged)GetValue(SelectedItemsProperty); }
        set { SetValue(SelectedItemsProperty, value); }
    } 
```

使用 xaml 中的行为

```
<igDG:XamDataGrid DataSource="{Binding Passengers}">
<i:Interaction.Behaviors>
   <b:XamDataGridSelectedItemsBehavior Path="Passengers.SelectedPassengers" />
</i:Interaction.Behaviors>
</igDG:XamDataGrid> 
```**

# xcode4 - 核心情节：仅适用于三个情节

> ID：13395210
> 
> 赞同：0
> 
> 时间：2012-11-15T10:06:26.530
> 
> 标签：xcode4, ios6, core-plot, indexoutofboundsexception

我在我的应用程序（iGear）中添加了一个散点图，因此当用户选择一个、两个或三个链轮以及自行车上的齿轮组时，线条将显示齿轮米。

问题是 Core Plot 仅在选择三个链环时显示图。我需要你的帮助，这是我第一次尝试 Core Plot，我迷路了。

我的代码如下：

```
iGearMainViewController.m

- (IBAction)showScatterIpad:(id)sender {
cogsetToPass = [NSMutableArray new];
arrayForChainringOne = [NSMutableArray new];
arrayForChainringTwo = [NSMutableArray new];
arrayForChainringThree = [NSMutableArray new];
//behavior according to number of chainrings
switch (self.segmentedControl.selectedSegmentIndex) {

    case 0: // one chainring selected

        for (int i = 1; i<= [cassette.numCogs intValue]; i++) {
            if (i <10) {
                corona = [NSString stringWithFormat:@"cog0%d",i];

            }else {
                corona = [NSString stringWithFormat:@"cog%d",i];
            }
            float one = (wheelSize*[_oneChainring.text floatValue]/[[cassette valueForKey:corona]floatValue])/1000;
            float teeth = [[cassette valueForKey:corona] floatValue];
            [cogsetToPass addObject:[NSNumber numberWithFloat:teeth]];
            [arrayForChainringOne addObject:[NSNumber numberWithFloat:one]];
        }
            break;
     case 1: // two chainrings selected

        for (int i = 1; i<= [cassette.numCogs intValue]; i++) {
            if (i <10) {
                corona = [NSString stringWithFormat:@"cog0%d",i];

            }else {
                corona = [NSString stringWithFormat:@"cog%d",i];
            }
            float one = (wheelSize*[_oneChainring.text floatValue]/[[cassette valueForKey:corona]floatValue])/1000;
            //NSLog(@" gearsForOneChainring = %@",[NSNumber numberWithFloat:one]);
            float two = (wheelSize*[_twoChainring.text floatValue]/[[cassette valueForKey:corona]floatValue])/1000;
            [cogsetToPass addObject:[NSNumber numberWithFloat:[[cassette valueForKey:corona]floatValue]]];
            [arrayForChainringOne addObject:[NSNumber numberWithFloat:one]];
            [arrayForChainringTwo addObject:[NSNumber numberWithFloat:two]];
        }
        break;
    case 2: // three chainrings selected
        for (int i = 1; i<= [cassette.numCogs intValue]; i++) {
            if (i <10) {
                corona = [NSString stringWithFormat:@"cog0%d",i];

            }else {
                corona = [NSString stringWithFormat:@"cog%d",i];
            }
            float one = (wheelSize*[_oneChainring.text floatValue]/[[cassette valueForKey:corona]floatValue])/1000;
            float two = (wheelSize*[_twoChainring.text floatValue]/[[cassette valueForKey:corona]floatValue])/1000;
            float three = (wheelSize*[_threeChainring.text floatValue]/[[cassette valueForKey:corona]floatValue])/1000;
            [cogsetToPass addObject:[cassette valueForKey:corona]];
            [arrayForChainringOne addObject:[NSNumber numberWithFloat:one]];
            [arrayForChainringTwo addObject:[NSNumber numberWithFloat:two]];
            [arrayForChainringThree addObject:[NSNumber numberWithFloat:three]];

        }
    default:
        break;
}

ScatterIpadViewController *sivc = [[ScatterIpadViewController alloc]initWithNibName: @"ScatterIpadViewController" bundle:nil];
[sivc setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    sivc.records = [cassetteNumCogs integerValue];
    sivc.cogsetSelected = self.cogsetToPass;
    sivc.chainringOne = self.arrayForChainringOne;
    sivc.chainringThree = self.arrayForChainringThree;
    sivc.chainringTwo = self.arrayForChainringTwo;
    [self presentViewController:sivc animated:YES completion:nil]; 
```

}

使用代码绘制绘图的子视图：

```
ScatterIpadViewController.m

    #pragma mark - CPTPlotDataSource methods

- (NSUInteger)numberOfRecordsForPlot: (CPTPlot *)plot {
    return records;
}

- (NSNumber *)numberForPlot: (CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index{
    switch (fieldEnum)
    {
        case CPTScatterPlotFieldX:
            return [NSNumber numberWithInt:index];
        break;

    case CPTScatterPlotFieldY:{

        if ([plot.identifier isEqual:@"one"]==YES) {
            //NSLog(@"chainringOne objectAtIndex:index = %@", [chainringOne objectAtIndex:index]);
            return [chainringOne objectAtIndex:index];
        }else if ([plot.identifier isEqual:@"two"] == YES ){
            //NSLog(@"chainringTwo objectAtIndex:index = %@", [chainringTwo objectAtIndex:index]);
            return [chainringTwo objectAtIndex:index];

        }else if ([plot.identifier isEqual:@"three"] == YES){
            //NSLog(@"chainringThree objectAtIndex:index = %@", [chainringThree objectAtIndex:index]);
            return  [chainringThree objectAtIndex:index];

        }

    default:
        break;
        }
  }
  return nil;
} 
```

返回的错误是尝试访问空数组时的异常。

**2012-11-15 11:02:42.962 iGearScatter[3283:11603]****由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*****-[__NSArrayM objectAtIndex:]：空数组的索引 0 超出范围'** **First throw call stack: (0x1989012 0x1696e7e 0x192b0b4 0x166cd 0x183f4 0x1bd39 0x179c0 0x194fb 0x199e1 0x43250 0x14b66 0x13ef0 0x13e89 0x3b5753 0x3b5b2f 0x3b5d54 0x3c35c9 0x5c0814 0x392594 0x39221c 0x394563 0x3103b6 0x310554 0x1e87d8 0x27b3014 0x27a37d5 0x192faf5 0x192ef44 0x192ee1b 0x29ea7e3 0x29ea668 0x2d265c 0x22dd 0x2205 0x1)* * **libc++abi.dylib:终止称为抛出异常******

 ****谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:57:44.383

解决了！我骑自行车时看到了光。

```
- (NSNumber *)numberForPlot: (CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index{

    if (([chainringOne count]!=0) && ([chainringTwo count]==0) && ([chainringThree count]==0)) {
        switch (fieldEnum) {
            case CPTScatterPlotFieldX:
                 return [NSNumber numberWithInt:(index+1)];
                break;

            case CPTScatterPlotFieldY:{
                if ([plot.identifier isEqual:@"one"]) {
                    return [chainringOne objectAtIndex:index];
                }
            }
            default:
            break;
        }
    }else if (([chainringOne count]!=0) && ([chainringTwo count]!=0) && ([chainringThree count]==0)){
        switch (fieldEnum) {
            case CPTScatterPlotFieldX:
                return [NSNumber numberWithInt:(index+1)];
                break;
            case CPTScatterPlotFieldY:{
                if ([plot.identifier isEqual:@"one"]) {
                     return [chainringOne objectAtIndex:index];
                }else if ([plot.identifier isEqual:@"two"]){
                    return [chainringTwo objectAtIndex:index];
                }
            }
            default:
            break;
        }
    }else if (([chainringOne count]!=0) && ([chainringTwo count]!=0) && ([chainringThree count]!= 0)){
        switch (fieldEnum) {
            case CPTScatterPlotFieldX:
                return [NSNumber numberWithInt:(index+1)];
                break;
            case CPTScatterPlotFieldY:{
                if (([chainringOne count] !=0) && ([plot.identifier isEqual:@"one"])) {
                    return [chainringOne objectAtIndex:index];
        }else if ((chainringTwo || chainringTwo.count) &&([plot.identifier isEqual:@"two"] == YES )){
              return [chainringTwo objectAtIndex:index];

         }else if ((chainringThree || chainringTwo.count)&& ([plot.identifier isEqual:@"three"] == YES)){
                return  [chainringThree objectAtIndex:index];
            }
        default:
            break;
            }
        }
    }
    return nil;
} 
```****

# objective-c - 如何在sqlite数据库中检索两个日期之间的日期

> ID：13395217
> 
> 赞同：3
> 
> 时间：2012-11-15T10:06:54.877
> 
> 标签：objective-c, ios, sqlite

OrderDate 是我表中的日期类型字段，格式为 dd/MM/yy，该字段属于表中的所有记录。

我只需要按两个日期（例如**“01/11/12”和“15/11/12”之间**的 O.Order_Date ）过滤那些订单，但它还选择不属于 11 月和今年的那些记录。

![这是查询的结果](../Images/b390e51a351cd5c8992ca070556e5573.png)

谁能指导我如何在两个日期之间获得正确的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:40:39.840

**询问**

```
insert into test (t) select '2012-01-15';

insert into test (t) select '2012-11-16';

select * from test where t between '2012-01-01' and '2012-02-01'; 
```

[小提琴演示](http://sqlfiddle.com/#!7/4a8d0/20)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:18:26.743

您还应该尝试操作 > 和 <。

例如：其中 O.Order_Date > '01/11/12' 和 O.Order_Date < '15/11/12'

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T10:19:30.320

尝试其他格式：YYYY-MM-DD

O.Order_Date 在 '2012-11-01' 和 '2012-11-15' 之间

[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

```
Time Strings

A time string can be in any of the following formats:

YYYY-MM-DD
YYYY-MM-DD HH:MM
YYYY-MM-DD HH:MM:SS
YYYY-MM-DD HH:MM:SS.SSS
YYYY-MM-DDTHH:MM
YYYY-MM-DDTHH:MM:SS
YYYY-MM-DDTHH:MM:SS.SSS
HH:MM
HH:MM:SS
HH:MM:SS.SSS
now
DDDDDDDDDD 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T04:54:10.807

如何从 dd/MM/yy（（评论 2，答案 2））在 YYYY/MM/DD 中​​制作它？

```
update tableName
set date =
'20' || substr(substr(date, instr(date, '/')+1), instr(substr(date, instr(date, '/')+1), '/')+1)
|| '/' ||
case when length(substr(date, instr(date, '/')+1, instr(substr(date, instr(date, '/')+1),'/')-1))=2
then substr(date, instr(date, '/')+1, instr(substr(date, instr(date, '/')+1), '/')-1)
else '0'||substr(date, instr(date, '/')+1, instr(substr(date, instr(date, '/')+1), '/')-1)
end
|| '/' ||
case when length(substr(date,1, instr(date, '/')-1 )) =2
then substr(date,1, instr(date, '/')-1 )
else '0'||substr(date,1, instr(date, '/')-1 )
end 
```

否则看[这里的最后两个答案](https://stackoverflow.com/questions/8187288/sql-select-between-dates)

# android - 安卓压缩文件夹

> ID：13395218
> 
> 赞同：2
> 
> 时间：2012-11-15T10:06:56.637
> 
> 标签：android

我正在做一个简单的 android 应用程序，它由压缩文件夹组成。实际上压缩过程已完成，文件保存在定义的位置。但问题是当我从模拟器推送压缩文件并手动解压缩时，文件已损坏。有什么问题。当我们手动解压缩时文件是否损坏？

我的文件夹结构如下

TestPlay1- 包含两个子目录 - playlist 和 content
目录 playlist 包含一个 xml 文件
目录 content 包含图像和视频等文件

我的代码如下

```
String zipFile = "/mnt/sdcard/Testplay1.zip";
byte[] buffer = new byte[1024];
FileOutputStream fos = null;
try {
    fos = new FileOutputStream(zipFile);
} catch (FileNotFoundException e1) {
    e1.printStackTrace();
}
ZipOutputStream zos = new ZipOutputStream(fos);
updata = new ArrayList<File>();
contentpath = new File(FOLDER_PATH);
try {
    if (contentpath.isDirectory()) {
        File[] listFile = contentpath.listFiles();
        for (int i = 0; i < listFile.length; i++) {
            if (listFile[i].isDirectory()) {
                File[] contfile = listFile[i].listFiles();
                for (int j = 0; j < contfile.length; j++) {
                    updata.add(contfile[j]);
                    FileInputStream fis = new FileInputStream(contfile[j]);
                    zos.putNextEntry(new ZipEntry(contfile[j].getName()));
                    int length;
                    while ((length = fis.read(buffer)) > 0) {
                        zos.write(buffer, 0, length);
                    }
                    zos.closeEntry();
                    // close the InputStream
                    fis.close();
                }
            }
        }
        zos.close();
    }
    System.out.println("Testplay1 Folder contains=>" + updata);
} catch (Exception e) {
    e.printStackTrace();
    // TODO: handle exception
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:33:43.843

我建议你使用 Zip4j：[http](http://www.lingala.net/zip4j/)
://www.lingala.net/zip4j/你可以把文件夹压缩，其余的由库完成

```
ZipFile zipfile = new ZipFile("/mnt/sdcard/bla.zip");
ZipParameters parameters = new ZipParameters();
parameters.setCompressionMethod(Zip4jConstants.COMP_DEFLATE);
parameters.setCompressionLevel(Zip4jConstants.DEFLATE_LEVEL_NORMAL);
zipfile.addFolder("/mnt/sdcard/folderToZip", parameters); 
```

# bash - Bash script: save stream from Serial Port (/dev/ttyUSB0) to file until a specific input (e.g. eof) appears

> ID：13395222
> 
> 赞同：6
> 
> 时间：2012-11-15T10:07:13.157
> 
> 标签：bash, serial-port, eof, cat

I need a bash script to read the data stream from a Serial Port (RS232 to USB adapter - Port: /dev/ttyUSB0). The data should be stored line by line in a file until a specific input (for example "eof") appears. I can give any external input to the Serial Port. Till now I use cat to read the data, which works fine.

```
cat /dev/ttyUSB0 -> file.txt 
```

The problem is, that I need to finish the command myself by entering cntr+C, but I don't know exactly when the data stream ends and the ttyUSB0 file does not gerenate an EOF. I tried to implement this myself, but did not find a convenient solution. The following command works, but I don't know how to use it for my problem ("world" will create a "command not found" error):

```
#!/bin/bash
cat > file.txt << EOF
hello
EOF
world 
```

The following code works for my problem, but it takes too much time (the data stream consists of ~2 million lines):

```
#!/bin/bash
while read line; do
     if [ "$line" != "EOF" ]; then
          echo "$line" >> file.txt
     else
          break
     fi
done < /dev/ttyUSB0 
```

Has anyone a convenient possibility for my problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:11:59.177

Try `awk(1)`:

```
awk `
/EOF/ {exit;} 
 {print;}` < /dev/ttyUSB0 > file.txt 
```

This stops when it sees the line `EOF` and prints everything else to `file.txt`

# c# - 使用 Sqlite 数据库捕获、保存和检索图像/图片

> ID：13395226
> 
> 赞同：1
> 
> 时间：2012-11-15T10:07:20.723
> 
> 标签：c#, sqlite, windows-8, microsoft-metro

在我的 Windows 8 应用程序（C#）中，我想捕获图像（我完成了），然后将其保存到 Sqlite 数据库中。由于 Sqlite 不支持 BipmapImage、Uri 类型等（我试过但给出了不支持存储的例外情况。）我该怎么做？

我只是想将使用相机捕获的图像保存在本地数据库中，然后检索这些图像（设置为绑定）。请建议我实现这一目标的其他选择。

我还尝试将 Uri 转换为字符串，然后将此字符串保存到 SQLite db 中，然后再次将字符串转换为 Uri，然后制作位图图像，但我无法实现这一点（这是正确的方法吗？）。

如果你能分享我任何样品，请做。我花了很多时间在里面，但不知道我在哪里做错了！

谢谢扎克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:30:27.157

虽然我不喜欢将图像保存在数据库中。

但是，如果您想将图像保存在数据库中，那么一种方法是将图像转换为`base64`字符串，然后将字符串保存在`SQLite`数据库中。

```
public string ConvertToString(Image image)
{
    // First Convert image to byte array.
    byte[] byteArray = new byte[0];
    using (MemoryStream stream = new MemoryStream())
    {
        image.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
        stream.Close();

        byteArray = stream.ToArray();
    }

    // Convert byte[] to Base64 String
    string base64String = Convert.ToBase64String(byteArray);

    return base64String;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:30:50.937

您可以通过这种方式将相机捕获的图像保存到 SQLite 数据库中。

公共类 CamActivity 扩展 Activity {

```
byte[] byteArray;
private static final int CAMERA_REQUEST = 1888;
protected static final int TAKE_PHOTO_CODE = 0;
public ImageView imageView;
private DBAdapter db;
byte [] imgbyte;
EditText txtView ;
String name;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    db=new DBAdapter(CamActivity.this);
    db.open();
    this.imageView = (ImageView)this.findViewById(R.id.imageView1);          
  txtView=(EditText)findViewById(R.id.editText1);
    Button B = (Button) this.findViewById(R.id.camera); 
    B.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
           // cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,getImageUri());
            startActivityForResult(cameraIntent,CAMERA_REQUEST ); 
        }
    }); 

    Button save = (Button)findViewById(R.id.saving);
    save.setOnClickListener(new View.OnClickListener() {            
        public void onClick(View v) {

            name=txtView.getText().toString();

            try
            { 
```

db.insertImageDetails(byteArray,name);

```
 }              

            catch (Exception e) {
                e.printStackTrace();
            }
             //mySQLiteAdapter.close();

            Toast.makeText(getApplicationContext(), "processing", Toast.LENGTH_SHORT).show();
            Toast.makeText(getApplicationContext(), "image saved", Toast.LENGTH_SHORT).show();

            }});

    Button G = (Button) this.findViewById(R.id.get);
    G.setOnClickListener(new View.OnClickListener() {           
        public void onClick(View v)

        {

            Intent intent= new Intent(CamActivity.this,SecondActivity.class);
            startActivity(intent);

}
        });
    } 
```

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

```
 //final byte[] byteArray;
    if (requestCode == CAMERA_REQUEST) {  
        Bitmap photo = (Bitmap) data.getExtras().get("data");   
       //imageView.setImageBitmap(photo);    
       ByteArrayOutputStream stream = new ByteArrayOutputStream();
       photo.compress(Bitmap.CompressFormat.PNG, 100, stream);
         byteArray = stream.toByteArray();
       System.out.println(byteArray);
       Toast.makeText(getApplicationContext(), byteArray.toString(), Toast.LENGTH_SHORT).show();

    }

}

    } 
```

# c# - 将高度=自动的网格行约束到可见区域

> ID：13395227
> 
> 赞同：0
> 
> 时间：2012-11-15T10:07:29.210
> 
> 标签：c#, .net, wpf, .net-4.0, grid

考虑以下 XAML：

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*" MinHeight="100" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <ListBox>
      <ListBox.Items>
        <ListBoxItem>a</ListBoxItem>
        <!-- Another 11 items -->
      </ListBox.Items>
    </ListBox>
    <ListBox Grid.Row="1" ScrollViewer.VerticalScrollBarVisibility="Visible">
      <ListBox.Items>
        <ListBoxItem>1</ListBoxItem>
        <!-- Another 23 items -->
      </ListBox.Items>
    </ListBox>
  </Grid>
</Window> 
```

第二行中的 ListBox 将垂直滚动条显示为禁用，并简单地截断内容。

我希望它被限制在窗口的可见区域。如何做到这一点？

将第二个网格行的高度设置为 Auto 背后的合理性：*如果有足够的空间，*我希望第二个 ListBox 显示其所有内容而没有滚动条，并且第一个 ListBox 应该占用剩余空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:02:22.340

我认为没有任何方法可以在纯 XAML 中执行您想要的操作 - 您必须为两个列表框中的一个或另一个设置特定高度，或者为它们设置固定比例。

我认为你可以在后面的代码中使用一些代码来做你想做的事情。为您的 RowDefinitions 和 Listboxes 命名，如下所示，并订阅 GridSizedChanged 事件：

```
<Grid SizeChanged="GridSizeChanged">
    <Grid.RowDefinitions>
        <RowDefinition x:Name="row1"/>
        <RowDefinition x:Name="row2"/>
    </Grid.RowDefinitions>
    <ListBox x:Name="lb1">
        <ListBox.Items>
            <ListBoxItem>a</ListBoxItem>
        </ListBox.Items>
    </ListBox>
    <ListBox x:Name="lb2" Grid.Row="1" ScrollViewer.VerticalScrollBarVisibility="Visible">
        <ListBox.Items>
            <ListBoxItem>1</ListBoxItem>
            <!-- Another 23 items -->
        </ListBox.Items>
    </ListBox>
</Grid> 
```

然后按以下方式处理事件：

```
private void GridSizeChanged(object sender, SizeChangedEventArgs e)
{
    double newHeight = e.NewSize.Height;
    int lb1ItemCount = lb1.Items.Count;
    int lb2ItemCount = lb2.Items.Count;
    row1.Height = new GridLength(newHeight * lb1ItemCount / (lb1ItemCount + lb2ItemCount));
    row2.Height = new GridLength(newHeight * lb2ItemCount / (lb1ItemCount + lb2ItemCount));
} 
```

这将两个列表框的大小设置为与它们内部的项目数成正比。如果要将第一个列表框的最小大小设置为 100，则必须先做一些工作来设置该大小，然后将第二个大小基于第一个大小的计算值。

**编辑：** 我想我已经编写了一个 GridSizeChanged 版本，它完全符合您的要求。此版本会将 lb2 的高度设置为除顶部 100px 之外的整个网格（如果所需的列表框大小大于此），或者仅将其设置为自己所需的大小（如果较小）。然后，第一个列表框将填充所有剩余空间，并且根据您的要求具有 100 像素的最小高度，因为我们不允许 lb2 填充顶部 100 像素。

```
private void GridSizeChanged(object sender, SizeChangedEventArgs e)
{
    lb2.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
    double lb2DesiredHeight = lb2.DesiredSize.Height;

    double newHeight = e.NewSize.Height;
    double lb2AvailableHeight = newHeight - 100;

    double lb2ActualHeight = Math.Min(lb2DesiredHeight, lb2AvailableHeight);
    row1.Height = new GridLength(newHeight - lb2ActualHeight);
    row2.Height = new GridLength(lb2ActualHeight);
} 
```

# php - Codeigniter AJAX 电子邮件验证

> ID：13395228
> 
> 赞同：0
> 
> 时间：2012-11-15T10:07:31.707
> 
> 标签：php, ajax, codeigniter, email-validation

使用 CI 和电子邮件类完成 php 表单后，我能够接收包含用户数据的 html 电子邮件——很棒。现在，除了 CI 验证之外，我还想包括具有很好的淡入或淡出效果的客户端验证 (AJAX)，并且在关闭 javascript 的情况下仍然运行 CI 验证。

这里包含的代码是我迄今为止从各种来源取得的成果，我知道这并不完整，但甚至不确定我是否走在正确的轨道上？到目前为止，我所拥有的表单仍然可以正常工作，并且我认为它仍在运行 CI 验证脚本并且没有发生任何影响。

如果有人能指导我到目前为止我出错的地方以及如果可能的话下一步要采取什么步骤，我会很感激？这是支持我的问题的代码：

看法

```
<div id="contact">
<?php
//This is loaded in the view as it wont be used in the other pages
$this->load->helper('form');

echo form_open('contact/send_email');

//success message if passed validation checks
echo $success;

// empty div for error messages (php)
if(validation_errors() != ""){
    echo '<h3>Please correct the following errors:</h3>'; 
    echo '<div id="errors">';
    echo validation_errors();
    echo '</div>';
}

echo form_label('Name: ', 'name');
    $data = array (
        'name' => 'name',
        'id' => 'name',
        'value' => set_value('name')
    );
echo form_input($data);

echo form_label('Email: ', 'email');
    $data = array (
        'name' => 'email',
        'id' => 'email',
        'value' =>set_value('email')
    );
echo form_input($data);

echo form_label('Message: ', 'message');
    $data = array (
        'name' => 'message',
        'id' => 'message',
        'value' =>set_value('message')
    );
echo form_textarea($data);
?>

<br />

<?php
echo form_submit('submit', 'Send');

echo form_close();
?> 
```

------------AJAX--------

```
$(function() {
    $('form').click(function() {

        // get the form values
        var form_data = {
            name: $('name').val(),
            email: $('email').val(),
            message: $('message').val()
        };

        // send the form data to the controller
        $.ajax({
            url: "<?php echo site_url('contact/send_email'); ?>",
            type: "post",
            data: form_data,
            success: function(msg) 
            {
            if(msg.validate)
                    {
                    $('form').prepend('<p>Message sent!</p>');
                    $('p').delay(3000).fadeOut(500);
                    }
                    else
                     $('form').prepend('<div id="errors">Message Error</div>');
                     $('p').delay(3000).fadeOut(500);
                }
            });
            // prevents from refreshing the page
            return false;   
        });
    });
    </script> 
```

控制器

类联系人扩展 CI_Controller {

```
function __construct() {
    parent::__construct();
}

public function index()
{   
    $data['success'] = '';
    $data['page_title'] = 'Contact';
    $data['content'] = 'contact';
    $this->load->view('template', $data);
   }

public function send_email (){
    $this->load->library('form_validation');

    [SET RULES ARE LOCATED HERE]

    [ERROR DELIMITERS HERE]

    if ($this->form_validation->run() === FALSE) {
        $data['success'] = '';
        $data['page_title'] = 'Contact';
        $data['content'] = 'contact';
        $this->load->view('template', $data);   

    }else{
        $data['success'] = 'The email has successfully been sent';
        $data['name'] = $this->input->post('name');
        $data['email'] = $this->input->post('email');
        $data['message'] = $this->input->post('message');

        $html_email = $this->load->view('html_email', $data, true);

        //load the email class
        $this->load->library('email');

        $this->email->from(set_value('email'), set_value('name'));
        $this->email->to('-----EMAIL----');
        $this->email->subject('Message from Website');
        $this->email->message($html_email);

        $this->email->send();

        $data['page_title'] = 'Contact';
        $data['content'] = 'contact';   
        $this->load->view('template', $data);

        return null;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:53:36.503

让我尝试在这个社区发布我的第一个答案：
1\. 这是 jQuery 文件，所以你应该使用 .submit() 方法来处理表单提交

```
 $('form').submit(function() { 
```

但是如果你想使用点击，你应该用'提交'按钮绑定它

```
 $('input[type="submit"]').click(function() { 
```

2.您可以使用 .serialize() 方法，而不是将所有表单数据收集在数组中

```
 data: $('form').serialize(), 
```

3\. 在你的控制器中，为什么要加载视图？它是 Ajax 调用，因此常用方法是返回 JSON 响应，具体取决于您的结果：

```
 if ($this->form_validation->run() === TRUE) {
    $data['success'] = 'The email has successfully been sent';
    $data['name'] = $this->input->post('name');
    $data['email'] = $this->input->post('email');
    $data['message'] = $this->input->post('message');

    $html_email = $this->load->view('html_email', $data, true);

    //load the email class
    $this->load->library('email');

    $this->email->from(set_value('email'), set_value('name'));
    $this->email->to('-----EMAIL----');
    $this->email->subject('Message from Website');
    $this->email->message($html_email);

    $this->email->send();

    $response->validate = true;

    echo json_encode($response);
} 
```

在这种情况下，我消除了 FALSE，因为您已经检查了回调函数的结果：

```
success: function(msg) 
        {
        if(msg.validate)
                {
                $('form').prepend('<p>Message sent!</p>');
                $('p').delay(3000).fadeOut(500);
                }
                else
                 $('form').prepend('<div id="errors">Message Error</div>');
                 $('p').delay(3000).fadeOut(500);
            }
        }); 
```

虽然这是 2012 年的问题，但希望这对偶然发现这个问题的人有所帮助。

# opengl - 没有 OpenGL 的虚假 3D 编程

> ID：13395229
> 
> 赞同：1
> 
> 时间：2012-11-15T10:07:33.453
> 
> 标签：opengl, 3d, 2d

我实际上正在寻找技术解决方案，为围棋游戏编写学习助手。在现有程序中让我烦恼的是，玩家的眼睛看着 Goban 的真实生活视角没有得到尊重。

GlGo 存在，但是随着石头数量的增加，渲染速度会由于石头的数量而急剧下降，从而无法在 Goban 上添加带有统计信息的帧，这会破坏应用程序的实时性。

所以，我的问题是：是否有可能实现一个简单的 2D Goban 的插值，使棋盘和石头看起来像 3D，但没有 3D 渲染引擎？棋盘运动只会沿着一个轴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:17:58.717

当然：您所要做的就是进行 3D 到 2D 的转换。然后简单地使用精灵绘制你的石头。如果你缩放它们，你只需要一个白色和一个黑色的。

至于转换，一个简单的可能是这样的：

```
x = left_border + board_x * gridwidth;
y = top_border + board_y * gridwidth / 2; 
```

如果你想要透视等，它会变得有点复杂，但总的来说，除非你做错了什么，否则它不应该显着减慢你的速度。

# ios - 如何让 Mac 上的 svn 在提交时停止忽略 .a 文件？

> ID：13395232
> 
> 赞同：3
> 
> 时间：2012-11-15T10:07:53.890
> 
> 标签：ios, xcode, macos, svn

我想使用 Xcode 将 iOS 项目上的 .a 文件添加到 SVN，但 SVN 显然忽略了它们。

是否有任何配置文件可以将 SVN 设置为不忽略这些文件？我尝试更改文件，`~/.subversion/config`但该文件已完全注释，似乎不是影响提交的文件。

我已经看到了通过终端提交这些文件的解决方案，但我想要一些更解放双手的东西。

# sql - 清理有关 Raw sql 的帮助

> ID：13395233
> 
> 赞同：4
> 
> 时间：2012-11-15T10:07:55.667
> 
> 标签：sql, cakephp, sanitize

我的插件中有一些复杂的查询，需要我使用`->query()`而不是`->find()`方法。

我不明白如何清理原始 sql，所以我猜这里有人可以指导我。

所以第一步是`App:import("sanitize");`在类的声明之前包含。

现在假设我有这个：

`$query = $this->Mytable->query("SELECT * FROM mytable WHERE " . $WHERECLAUSE . ";");`

当我完全迷失在食谱中时，有人可以帮我清理我的查询吗？

感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:00:49.520

使用这个： Sanitize::clean($query, $options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:10:49.030

Sanitize::clean 用于值/整个数组，例如 $this->data。

```
$WHERECLAUSE = Sanitize::clean($whereclause, array('escape'));
$query = $this->Mytable->query("SELECT * FROM mytable WHERE " . $WHERECLAUSE . ";"); 
```

这样就行了。

```
数组（'转义'）
```

用于 SQL 语句。

# javascript - websockets 可以连接并将数据发送到在非 http 端口上运行的另一个本地进程吗？

> ID：13395234
> 
> 赞同：3
> 
> 时间：2012-11-15T10:08:04.280
> 
> 标签：javascript, websocket

我正在研究一种解决方案，该解决方案需要网页将原始数据打印到连接的打印机上。一种选择是通过与浏览器在同一台机器上运行的进程将数据发送到打印机。该进程侦听特定端口并将数据从浏览器转发到打印机。

是否可以使用 Websockets 将数据从网页发送到另一个监听进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:35:51.047

Websockets 可以发送到任何端口，而不仅仅是端口 80。但不幸的是，Websockets 不传输原始数据。在建立连接之前，会执行 Websocket 握手，其中还包括一个 32 位的屏蔽密钥，该密钥与来自客户端的数据流进行异或。该数据流也由一些额外的字节构成。详细信息可以[在 RFC](https://www.rfc-editor.org/rfc/rfc6455)中找到。

不幸的是，这意味着 Websocket 客户端无法与不支持 Websocket 协议的服务通信。因此，您将需要一个接受用户 websocket 连接、解包数据流并将其转发到打印机的中间件。

[Websockify](https://github.com/kanaka/websockify)就是这样一种中间件。

# c++ - 明确禁止编译器生成的函数

> ID：13395238
> 
> 赞同：2
> 
> 时间：2012-11-15T10:08:14.107
> 
> 标签：c++

最近我一直在研究 Meyers 的 Effective C++ 第三版。对于我目前正在从事的项目，我必须创建一个我明确希望禁止使用编译器生成的函数的类。我使用上述书中的第 6 项作为参考实现了代码，唯一的主要区别在于我的类是模板化的。它的代码如下

```
template <class T>
class Uncopyable
{
protected:
    Uncopyable<T>(){}
    virtual ~Uncopyable<T>(){}
private:
    Uncopyable<T>(const Uncopyable<T>&);
    Uncopyable<T>& operator=(const Uncopyable<T>&);
}; 
```

我的测试功能。

```
class Test : private Uncopyable<Test>
{
public:
    Test(){}
    ~Test(){}
    inline void test()
    {
        std::cout << "blah" << std::endl;
    }
private:
protected:
}; 
```

当这样使用时，代码完全按预期工作

```
int main(int argc, char* argv[])
{
    Test t1, t2;

    // Works as expected, doesnt allow copying of object
    t2 = t1;
    // and this works fine, no copying
    Test t3 = t2;

    // finally, works correctly no copying is allowed
    Test t4(t1);

    return 0;
} 
```

然而，当像这样使用时，代码编译得很好并且可以进行复制，但它不应该能够吗？

```
int main(int argc, char* argv[])
{
    Test* t1 = new Test(), *t2;
    t1->test();
    // Works when it shouldnt work?
    t2 = t1;
    t2->test();

    // same with this
    Test* t3 = t2;
    t3->test();

    // and this
    Test* t4(t1);
    t4->test();

    delete t1;

    return 0;
} 
```

我在没有模板类的情况下尝试过，结果是一样的，所以我认为这不是问题。

那么，为什么允许这种情况发生？我的代码中是否有错误，或者我只是理解错误的概念？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:11:24.107

您正在复制指针，而不是对象。尝试这个：

```
*t2 = *t1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:11:55.347

您更改的代码正在复制*指针*，而不是`Test`对象本身。

`t1`, `t2`,`t3`并且`t4`都指向*同一个*对象，并且这个对象永远不会被复制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T10:15:25.337

这里有两件重要的事情：

1.  类型和指向该类型的指针是两个非常不同的东西。
2.  复制指针不会复制它指向的内容。

以这个块为例：

```
Test* t1 = new Test(), *t2;
t1->test();
// Works when it shouldnt work?
t2 = t1; 
```

您的`t1`对象不会在此处复制。内存中只有一个类的实例，但现在有两个对它的引用。如果您调用`delete`，`t2`它将破坏该单个副本，并且您的其他引用 ,`t1`现在将指向无效的内存位置。

我不确定您是否可以阻止原始指针的复制，但即使您可以程序员可以轻松地将您`Test*`转换为`void*`，复制指针，然后将其转换回`Test*`. 如果您想防止复制任何类型的引用，您将需要使用智能指针和私有构造函数，这是一个全新的问题！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:25:57.180

**编译器生成的函数**在*C++ 标准*中被称为**特殊函数**
乳清之所以**如此调用，**尤其是由于两个因素：
**1.**它们是由编译器生成的（如果不是由用户生成的）；
**2.**它们作为同一类的参数对象（〜destructor除外）。

因此，对于**对象上的指针，****不会生成**此类函数。
同样在**C++ 11 标准**`private`中，您可以使用语句来代替声明要隐藏在区域中的函数`delete`。

# com - 从 EXE 服务器中提取 COM 数据

> ID：13395239
> 
> 赞同：2
> 
> 时间：2012-11-15T10:08:14.223
> 
> 标签：com, wix

您好我正在尝试从我的 EXE 中提取我需要的注册条目，以便我可以使用我的 wix 设置进行注册。

我曾尝试使用 Regspy，但我只收到错误“无法创建进程”，有人知道另一种方法吗？

谢谢

# hibernate - 在休眠控制台配置中加载数据库驱动程序时出错

> ID：13395249
> 
> 赞同：1
> 
> 时间：2012-11-15T10:08:51.243
> 
> 标签：hibernate

我的配置文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>

   <property name="hibernate.connection.driver_class">org.gjt.mm.mysql.Driver</property>
    <property name="hibernate.connection.password">root$12</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost/mysql</property>
    <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</property>
    <mapping resource="com.sst.Course.hbm.xml"/>
  </session-factory>
   </hibernate-configuration> 
```

在创建控制台配置时加载数据库驱动程序时出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:20:56.633

尝试用 com.mysql.jdbc.Driver 替换

并在您的控制台配置中验证数据库连接（驱动程序，jar，...）

# testng - 如何在 Gradle 任务中配置 TestNG Reporter 参数

> ID：13395251
> 
> 赞同：0
> 
> 时间：2012-11-15T10:09:00.237
> 
> 标签：testng, gradle

我正在通过 Gradle 执行 TestNG 测试。我想为默认的 XMLReporter 配置 stackTraceOutputMethod 的值。

这是我的 Gradle 任务

```
// runs test cases using TestNG framework
task runTests(type: JavaExec, dependsOn: classes) {
   main = 'org.testng.TestNG'
   args '-reporter org.testng.reporters.XMLReporter:stackTraceOutputMethod="0" testng.xml'
   classpath configurations.runtime
   systemProperties 'logDir': 'logs'
} 
```

我收到以下错误：

```
15:30:36.343 [错误] [system.err] 未知选项：-reporter org.testng.reporters.XMLReporter:stackTraceOutputMethod=0 testng.xml
15:30:36.390 [QUIET] [system.out] 用法：[options] 要运行的 XML 套件文件
  选项：
    -configfailurepolicy 配置失败策略（跳过或
                                       继续）
    -d 输出目录
    -dataproviderthreadcount 运行时使用的线程数
                                       数据提供者
    -excludegroups 逗号分隔的组名列表
                                       排除
.
.
.

```

我猜我提供 Java args 的方式不正确。

```
args '-reporter org.testng.reporters.XMLReporter:stackTraceOutputMethod="0" testng.xml'
```

有人可以让我知道正确的方法是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:10:35.797

传递多个参数的正确方法是：

```
args '-reporter','....','testng.xml' 
```

所以每个参数都放在自己的字符串中。而不是将它们全部以空格分隔。

**更新**

TestNG 实际上在 Gradle 中很容易配置，我建议您使用以下内容：

```
task runTests(type: Test) {
    useTestNG()
    options {
        listeners << '...'
    }
} 
```

# objective-c - 当应用程序进入后台时，在前台执行的长时间运行的任务被挂起

> ID：13395252
> 
> 赞同：1
> 
> 时间：2012-11-15T10:09:02.233
> 
> 标签：objective-c, ios, background

当用户第一次打开我的应用程序时，我需要先从服务器下载并安装一些内容，然后他们才能开始使用该应用程序。问题是这在 wifi 上大约需要 5 分钟，在此期间应用程序进入后台并暂停下载。

有没有办法：

*   在我执行下载时阻止 iOS 应用程序进入后台
*   或者继续在后台执行任务（即无论应用程序是在前台还是后台都执行任务）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:15:33.670

没关系，如果用户按下主页按钮，它将进入后台。尽管您可以做两件事来缓解问题：

*   使用`beginBackgroundTaskWithExpirationHandler`, 让您有更多时间下载。你可以[在这里](https://stackoverflow.com/questions/10319643/objective-c-proper-use-of-beginbackgroundtaskwithexpirationhandler)阅读。
*   不要让设备闲置，使用`[UIApplication sharedApplication].idleTimerDisabled = YES;`. 您可以[在此处](http://mobiledevelopertips.com/core-services/how-to-keep-the-screen-from-locking.html)阅读更多相关信息。

无论哪种方式，你能做的最好的事情就是告诉用户，这是一个重要的下载，他不应该退出应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:56:34.340

您不能在您的应用程序包中包含部分或全部内容，而只是在首次运行时下载更改？

我无法想象这是一个很好的首次用户体验，它可能不会像这样通过 App Store 审查。

唯一允许在后台下载的第三方应用程序是加载问题内容的报亭应用程序，Apple 对它们允许作为报刊亭应用程序的内容非常严格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:07:44.720

在这种情况下，你不能做你想做的事。一种方法，我认为最好的也是唯一的方法是在您的应用程序变为活动状态（返回到前台状态）时恢复您的下载。此外，不要忘记注册连接通知（可通过此 Apple 示例应用程序[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)使用可达性类） . 祝你好运！

# html - 在 vim 中使用“所见即所得编辑器”，如标记输入

> ID：13395254
> 
> 赞同：4
> 
> 时间：2012-11-15T10:09:07.443
> 
> 标签：html, vim, wysiwyg

将标记添加到原始文本以将其转换为 html 时，所见即所得的编辑器允许您选择要应用标记的文本片段，然后按下类似的东西`<C-b>`并在其周围获取一些`<strong>`标记。它非常快速和有用。

我想知道我必须使用 Vim 的可视化模式执行此操作的选项，并且可能使其仅可用于 html/jsp/php 文件左右。我一直在寻找这个很长时间。有人对此有什么好的分享吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:20:10.317

[`surround.vim`](https://github.com/tpope/vim-surround)应该做你想做的事：

```
S<a href='/path/to/link'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:32:58.307

环绕声也是我的选择，因为它普遍有用；不仅适用于 html。

[Zencoding](http://www.vim.org/scripts/script.php?script_id=2981)也可以用于`<C-y>,`.

# c# - c#中自动执行的匿名函数快捷方式？

> ID：13395258
> 
> 赞同：0
> 
> 时间：2012-11-15T10:09:17.583
> 
> 标签：c#, .net, .net-4.0, delegates, anonymous-function

我有这个代码：

（具有 a,b,c ...[0,1,2] 值的简单枚举，我想显示每个循环数字 - 它`enum`在最终列表中对应）。

```
public enum ENM
{
   a,b,c
}

void Main()
{

var e = Enumerable.Range(0,3).Select(myCounter=>new {

          final=((Func<int,ENM>)delegate (int i)
                                    {
                                         return (ENM)i;
                                    })(myCounter)

}).ToList(); 
```

这很好并且工作。

有没有不写的解决办法`delegate(int i) {...}`？

*ps当然我可以写`(ENM)i`，但问题是学习如何（以不同的方式）编写自动执行的方法。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:13:39.193

为什么不

```
Enumerable.Range(0,3).Select(c=>(ENM)c).ToList() 
```

还是我错过了过于复杂的一些原因？

```
var e = Enumerable.Range(0, 3).Select(myCounter => new
{
    final = ((Func<int, ENM>)(
        i=>{ 
            return (ENM)i;
            /* More code could be here */
        }))(myCounter)
}).ToList(); 
```

如果你想要同样的混乱，你会得到尽可能紧的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:22:54.257

```
var e = Enum.GetNames(typeof(ENM)).Select((e, i) => new { final = e, index = i }).ToList(); 
```

或者

```
var EnumNames = Enum.GetNames(typeof(ENM));
var EnumValues = Enum.GetValues(typeof(ENM)).Cast<ENM>().Select(e => (int)e);
var result = EnumNames.Zip(EnumValues, (n, v) => new { final = n, index = v }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:17:11.997

有一个特定的方法`System.Enum`可以做到这一点：

```
var arr = Enum.GetValues(typeof(ENM)); 
```

把它变成一个`List<ENM>`：

```
var lst = arr.Cast<ENM>().ToList(); 
```

# java - 字符串上的正则表达式验证

> ID：13395260
> 
> 赞同：0
> 
> 时间：2012-11-15T10:09:40.710
> 
> 标签：java

我可以将 Reg 表达式用于以下用例吗？

我需要编写一个布尔方法，该方法采用应满足以下条件的字符串参数。

*   20 个字符长度的字符串。
*   前 9 个字符将是一个数字
*   接下来的 2 个字符将是字母
*   接下来的 2 个字符将是一个数字。（1 到 31 或 99）
*   接下来的 1 个字符将是一个字母
*   最后 6 个字符将是一个数字。

在此，我为第一个要求编写了代码： **[a-zA-Z0-9]{20}** - 此表达式适用于第一种情况。我不知道如何编写一个完整的 reg 表达式来满足整个要求。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:22:03.650

是的，可以为此使用正则表达式。

忽略“20 个字符”部分，描述一个由 9 个数字、2 个字母、2 个数字、1 个字母和另一个数字连接而成的字符串。

*   从字符串 start 开始：`^`
*   然后是9位数。`\d`方便地描述字符集`[0-9]`，因此表示`\d{9}`“九位数字”
*   然后是2个字母。`\w`课程太宽泛，所以坚持要一个`[a-zA-Z]`字母。
*   然后又是两位数。它们似乎来自一个受限的集合，所以用交替和分组来描述这个集合。
*   然后是另一个字母和另一个数字。
*   最后，你必须在字符串的末尾结束：`$`

作为参考，这个正则表达式的意思是“字符串是九个字母，然后是 12-15 或 99，然后是另一个字母”：

```
^[a-zA-Z]{9}(1[2-5]|99)[a-zA-Z]$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:15:12.300

阅读 String [JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)，尤其是关于[String.matches()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)的部分以及[关于 Java 中正则表达式的文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:22:43.637

您的第一个要求已经隐含在其余的要求中，所以我将跳过它。然后，只需编写与每个部分一个接一个匹配的正则表达式代码：

```
[0-9]{9}[a-zA-Z]{2}... 
```

对于可能是 1 到 31 的数字有一个特殊考虑。虽然可以在一个正则表达式中匹配它，但它会很冗长且难以理解。相反，在正则表达式中执行基本匹配，并将这部分提取为*捕获组*，将其放入括号中：

```
([0-9]{2}) 
```

如果您使用`Pattern`and`Matcher`应用您的正则表达式，并且您的字符串与模式匹配，那么您可以轻松地获得两个字符，用于`Integer.parseInt()`将它们转换为整数（这是完全安全的，因为您知道这两个字符是数字），并且然后正常检查值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:59:49.177

这个正则表达式需要

```
 ^[0-9]{9}[a-zA-Z]{2}([1-9]|[1-2][0-9]|3[0-1]|99)[a-zA-Z]([0-9]{6})$ 
```

开头需要 9 个字母，后接 2 个字母，后接 1 到 31 或 99 之间的数字，后接字母，后接 6 位数字。

# struts2 - 数据验证：继承和列表

> ID：13395261
> 
> 赞同：0
> 
> 时间：2012-11-15T10:09:42.847
> 
> 标签：struts2, validation, webwork

我使用了 WebWork，但无法正确验证我的数据。

我不知道该怎么做的主要两件事是：

- 使用其超类的验证器验证字段。

示例：假设我们有 Person 类和 Employee 类。我想用我的 Person-validation.xml 验证 Employee 类的属性。可能吗？

-验证列表的长度：

我有一个列表属性，我如何检查列表的长度，然后使用适当的验证器检查列表中的每个项目？

我试过了：

```
<field name="list">
    <field-validator type="visitor">
        <message />
    </field-validator>
<field-validator type="fieldexpression">
    <param name="expression">
            list.size() < 2
        </param>
        <message key="too much items"/>
    </field-validator>
</field> 
```

但它现在正在工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:13:23.790

对于您“-验证列表的长度”问题：

```
<field-validator type="fieldexpression">
   <param name="expression"><![CDATA[2 > list.size]]></param>
   <message key="too much items"/>
</field-validator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:15:31.567

如果有人有同样的问题：最后它是自动完成的！！！默认情况下调用超类的验证器:)并使用

```
 <field-validator type="fieldexpression">
   <param name="expression"><![CDATA[2 > list.size]]></param>
   <message key="too much items"/>
</field-validator> 
```

对于列表

# database - 取决于用户类型对象的文档状态

> ID：13395266
> 
> 赞同：0
> 
> 时间：2012-11-15T10:09:52.653
> 
> 标签：database, oop

我有以下对象：`L1User`, `L2User`, `L3User`（都继承自`User`）和`Document`.
每个用户都可以创建文档，但根据用户类型，文档将具有不同的状态。因此，如果是`L1User`，将创建带有`L1`状态等的文档：

![在此处输入图像描述](../Images/43f4451ac08a082adef0fddcb8acb531.png)

**解决方案1**
​​请注意，文档创建后会保存在数据库中，所以对象中自然有一个`create_document(User user)`方法`Document`。在方法主体中，我可以检查用户的类型并手动设置适当的状态。这种方法对我来说似乎不是面向对象的。

**解决方案 2**
好的，所以下一个方法是让所有用户实现一个通用方法（比如`create_document(Document doc)`），该方法将设置与用户关联的状态并将文档保存在数据库中。我的疑问是文档应该保存在它自己的类中，而不是用户。

**解决方案3**
所以最后的方法与上面类似，除了用户将修改后的文档对象返回给它的`create_document(User user)`方法并在那里执行保存。该方法的定义如下：

```
create_document(User user)
{
   this = user.create_document(this);
   this->save();
} 
```

这对我来说似乎也不合适......

任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:13:09.993

我认为从 OO 的角度来看，解决方案 2 和 3 都可以，因为您正确地将状态分配委派给用户对象（与解决方案 1 相反，您基本上是在根据用户类型进行切换）。选择2还是3更多的是个人喜好问题。

但是，我有一个疑问：为什么要将文档传递给`create_document()`方法？我会选择一个最能描述其功能的消息名称。例如，在解决方案 3（我最喜欢的解决方案）中，我会选择：

```
Document>>create_document(User user)
{
   this = user.create_document();
   this->save();
} 
```

进而

```
L1User>>create_document()
{
return new Document('L1');
} 
```

或者

```
Document>>create_document(User user)
{
   this = new Document()
   this = user.set_document_type(this);
   this->save();
} 
```

进而

```
L1User>>set_document_type(document)
{
document.setType('L1');
} 
```

**编辑**：我一直在思考这个问题，实际上还有第四个解决方案。但是，以下方法仅适用于文档的状态在其生命周期内不发生变化的情况，并且您可以使用 getter 而不是属性映射 DB 字段。由于文档已经知道用户并且状态取决于用户，因此您可以委托：

```
Document>>getStatus()
{
   return this.user.getDocumentStatus();
} 
```

高温高压

# c# - 使用 C# 使用正则表达式过滤掉字母

> ID：13395269
> 
> 赞同：0
> 
> 时间：2012-11-15T10:10:02.887
> 
> 标签：c#, regex, filter, alphabetical

> **可能重复：**
> [正则表达式 - 只有字母？](https://stackoverflow.com/questions/3617797/regex-only-letters)

我尝试从文本中过滤掉字母（[az]，[AZ]）。

我试过`"^\w$"`了，但它过滤了字母数字（字母和数字）。

过滤掉字母的模式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:13:04.750

要删除所有字母，请尝试以下操作：

```
void Main()
{
    var str = "some junk456456%^&%*333";
    Console.WriteLine(Regex.Replace(str, "[a-zA-Z]", ""));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:27:40.233

要仅过滤*掉*英文字母，请使用：

```
[^a-zA-Z]+ 
```

无论使用何种语言，都可以过滤*掉*字母：

```
[^\p{L}]+ 
```

如果要反转效果，请在`^`左括号后立即移除帽子。

如果您想找到与模式匹配的*整行*，则将上述模式括在`^`和`$`符号内，*否则您不需要它们*。请注意，要使它们对每一行生效，您需要创建 Regex 对象并启用多行选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:35:50.267

试试这个简单的方法：

```
var result = Regex.Replace(inputString, "[^a-zA-Z\s]", ""); 
```

解释：

> ***`+`*** 匹配前一个元素一次或多次。
> 
> ***`[^character_group]`*** 否定：匹配任何不在 character_group 中的单个字符。
> 
> ***`\s`*** 匹配任何空白字符。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-15T10:15:53.527

要过滤多个字母字符，请使用

```
^[a-zA-Z]+$ 
```

# objective-c - iOS 5 - 关机钩子

> ID：13395272
> 
> 赞同：0
> 
> 时间：2012-11-15T10:10:04.930
> 
> 标签：objective-c, ios, shutdown-hook

我想在应用程序关闭时执行某些清理任务。我使用像这样的观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appWillResignActiveNotif:) name:UIApplicationWillResignActiveNotification object:nil]; 
```

当应用程序进入后台时得到通知。

问题是，如果应用程序崩溃，没有通知让我做某事。

我看到 testflight.com 使用挂钩来恢复崩溃信息，我想知道是否也可以检测崩溃并执行一些任务。

我的担忧是关于呼吁：

```
CLLocationManager.stopMonitoringSignificantLocationChanges 
```

应用程序崩溃时未完成，从而使用户在顶部保持不变的位置图标。我知道崩溃不应该经常发生，但如果可以的话，我想在这种情况下尽可能多地进行清理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:15:04.763

你可以安装一个全局异常处理程序甚至一个信号处理程序 [http://www.cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html](http://www.cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html)

但请记住：崩溃后不要继续运行。这不安全：D

# css - 使用 css 将 div 悬停在输入框的顶部

> ID：13395273
> 
> 赞同：0
> 
> 时间：2012-11-15T10:10:10.787
> 
> 标签：css, html, hover

我有一个在我的输入框上弹出的 div（javascrip 自动完成）。div当前在输入框后面弹出，我怎样才能让它出现在上面？

问题截图：

![在此处输入图像描述](../Images/4a55fe933a934f4a9c697bbaf65593ff.png)

CSS代码是：

```
body {
        font-family: Helvetica;
        font-size: 11px;
        color: #000;
    }

    h3 {
        margin: 0px;
        padding: 0px;   
    }

    .suggestionsBox {
        position: absolute;
        left: 30px;
        margin: 10px 0px 0px 0px;
        width: 200px;
        background-color: #000;
        -moz-border-radius: 7px;
        -webkit-border-radius: 7px;
        border: 2px solid #000; 
        color: #fff;
    }

    .suggestionList {
        margin: 0px;
        padding: 0px;
    }

    .suggestionList li {

        margin: 0px 0px 3px 0px;
        padding: 3px;
        cursor: pointer;
    }

    .suggestionList li:hover {
        background-color: #659CD8;
    } 
```

HTML代码是：

```
 <div>
    <input type="text" size="30" value="" id="inputString" onkeyup="lookup(this.value);" onblur="fill();" />
    </div> 
```

一如既往地感谢您的帮助，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:12:09.683

尝试使用`z-index`属性`.suggestionsBox`

```
.suggestionsBox {
    position: absolute;
    left: 30px;
    margin: 10px 0px 0px 0px;
    width: 200px;
    background-color: #000;
    -moz-border-radius: 7px;
    -webkit-border-radius: 7px;
    border: 2px solid #000; 
    color: #fff;
    z-index: 999; <------ Here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:11:28.800

设置`z-index`属性。

```
.suggestionsBox {
    position: absolute;
    left: 30px;
    margin: 10px 0px 0px 0px;
    width: 200px;
    background-color: #000;
    -moz-border-radius: 7px;
    -webkit-border-radius: 7px;
    border: 2px solid #000; 
    color: #fff;

    z-index: 100;
} 
```

# c++builder - C++ Builder 2010 奇怪的访问冲突

> ID：13395274
> 
> 赞同：2
> 
> 时间：2012-11-15T10:10:12.357
> 
> 标签：c++builder, c++builder-2010

我有一个程序将成为使用 C++ Builder 2010 构建的现有更大产品的一部分。

较小的程序（还）不依赖于 C++ Builder。它在 MS Visual Studio 中运行良好，但使用 C++ Builder 会产生奇怪的访问冲突。

请让我解释一下。

根据代码和编译器设置，访问冲突发生或不发生。访问冲突是可重现的：当程序构建时，访问冲突永远不会发生，或者总是在同一个地方发生。如果使用相同的设置重建程序，它将显示相同的行为。（我真的很高兴）。

访问冲突发生在调用删除运算符的地方。这可能发生在某些析构函数内部（取决于编译器设置和确切的代码），包括自身类的析构函数和 std::string 的析构函数内部。

以下情况降低了访问冲突的可能性：

*   使用“调试”设置（而不是“发布”）构建。
*   没有编译器优化。
*   编译器开关“慢速异常尾声”。
*   静态 RTL 而不是动态。
*   从 std::exception 而不是 Borland 的 Exception 类派生异常。
*   使用较少的“复杂”表达式（例如，使用“string s = “...” + “...”; throw SomeException(s);" 而不是 "throw SomeException(string("...") + ".. .");")
*   使用 try... __finally 进行手动清理，而不是使用带有析构函数的自动变量。
*   使用小型控制台应用程序而不是 VCL Windows 应用程序。

该程序利用了几个 C++ 特性，包括异常、STL、移动构造函数等，当然它也使用了堆。

我已经尝试了一些工具，但都没有报告问题：

*   Borland 的 CodeGuard。
*   Microsoft 应用程序验证器。
*   页堆/gflags。
*   如前所述，使用 MS Visual Studio 构建绝对没有问题。

预编译头文件和增量链接（在我看来都容易出错）的使用被禁用。

C++ Builder 编译器（“启用所有警告”）和 Visual Studio (/W4) 编译器都不会产生可能与此问题相关的警告。

我无权访问其他版本的 C++ Builder。

由于程序将成为更大产品的一部分，因此不能选择切换到不同的编译器，也不能选择调整编译器设置，直到不再发生访问冲突。（我担心如果这真的应该是编译器错误，那么该错误可能会再次出现。）

综上所述，我猜这可能是由于与某些编译器错误相关的堆损坏造成的。但是，我无法在 qc.embarcadero.com 上找到错误。我进一步猜测这与在抛出异常时堆栈倒带时执行的清理代码有关。但是，好吧，也许这只是一个愚蠢的代码错误。

目前，我不知道如何进行。任何帮助表示赞赏。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-25T01:21:26.290

**tl;博士**我相信这个错误是生成代码以`std::string`在堆栈展开期间从三元运算符的两个分支中删除，但是当然只有其中一个实际上是创建的。

* * *

这是一个更简单的 MCVE，它通过 XE5 中的输出显示问题：

```
#include <vcl.h>
#include <tchar.h>
#include <stdio.h>
using namespace std;

struct S
{
    S() { printf("Create: %p\n", this); }
    S(S const &) { printf("Copy: %p\n", this); }
    void operator=(S const &) { printf("Assign: %p\n", this); }
    ~S() { printf("Destroy: %p\n", this); }

    char const *c_str() { return "xx"; }
};

S rX() { return S(); }
int foo() { return 2; }

#pragma argsused
int _tmain(int argc, _TCHAR* argv[])
{
   try
   {
      throw Exception( (foo() ? rX() : rX()).c_str() );
   }
   catch (const Exception& e)
   {
   }

   getchar();
   return 0;
} 
```

此版本通过控制台上的输出字符串显示问题。检查此帖子的编辑历史记录，以查看使用`std::string`并导致段错误的版本。

我的输出是：

```
 Create: 0018FF38
Destroy: 0018FF2C
Destroy: 0018FF38 
```

在原始代码中，段错误来自伪造的 Destroy 最终调用`delete`它通过尝试检索`std::string`实际上从未在该位置创建的 a 的内部数据指针而获得的伪造值。

我的猜测是堆栈展开的代码生成存在错误，并试图从三元运算符的两个分支中删除临时字符串。临时的存在`UnicodeString`确实与它有关。因为在我试图避免这种临时性的任何变化中都没有出现这个错误。

在调试器中，您可以看到调用堆栈，并且在全局堆栈展开期间会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:01:53.667

唷，这太简单了，我花了一些时间：

```
#include <vcl.h>
#include <tchar.h>
#include <string>
using namespace std;

struct B
{
   B(const char* c) { }
   string X() const { return "xx"; }
   int Length() const { return 2; }
};

struct C
{
   void ViolateAccess(const B& r)
   {
      try
      {
         throw Exception(string("aoei").c_str());
      }
      catch (const Exception&) { }

      throw Exception(((string) "a" + (r.Length() < 10 ? r.X() : r.X() + "...") + "b").c_str());
   }
};

#pragma argsused
int _tmain(int argc, _TCHAR* argv[])
{
   try
   {
      C c;
      c.ViolateAccess("11");
   }
   catch (const Exception& e) { }
   return 0;
} 
```

（抢先评论：不，这段代码没有任何意义。）

创建一个新的控制台应用程序并确保使用 VCL。是否存在访问冲突可能取决于项目设置；我的调试版本总是崩溃，发布版本没有。

C++ Builder 2010 和 XE3 试用版崩溃。

因此，编译器或 VCL 或 STL 或其他任何东西中的错误。

# javascript - 使用innerHTML += 是否可取？

> ID：13395276
> 
> 赞同：2
> 
> 时间：2012-11-15T10:10:27.027
> 
> 标签：javascript, dom

在我的 Web 应用程序中，首先下载所需的初始 div。然后，我发送一个请求并使用 ajax 调用获取额外的绝对 div（弹出 div/警告消息 div 等）。现在我要做的是以下

```
document.body.innerHTML += secondarydivs; 
```

这是否会导致性能下降，因为主体已经构建，现在我要附加更多的 div？我确切需要知道的是，当执行此语句时，是重新绘制整个文档还是仅将附加字符串解析添加到 DOM？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:14:21.727

它将 DOM 序列化为 HTML，销毁所有现有节点（在流程中丢失绑定的事件处理程序），然后从 HTML 重新创建它们（和新节点）。

使用`appendChild`和朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:14:12.547

这取决于你到底用它做什么。如果它只是某种回调函数中的单个语句，那没关系，但是如果将其设置在循环中，则应考虑将整个内容构造为字符串，而不是将其附加到 innerHTML。

# php - 使用 fpdf 将表单内容显示为 pdf

> ID：13395277
> 
> 赞同：1
> 
> 时间：2012-11-15T10:10:32.043
> 
> 标签：php, fpdf

我有一个回显的表格：

```
echo "<form action= 'mypdf.php' method='post' name='print' target='_blank' >";
for($x=0; $x<$N; $x++){
        echo nl2br("<tr>
                      <td><textarea name=unit[]>$bute[$x]</textarea></td>
                      <td><textarea name=final[]></textarea></td>
                      <td><textarea name=act[];></textarea></td> 
}
echo "<input type='submit' name='Submit' value='Submit'></br></form>"; 
```

我在为 FPDF 开发参数以显示表单内容时遇到问题。表单的内容不存储在数据库中。

```
<?php
require('fpdf.php');
class PDF extends FPDF {

    function BuildTable($header,$data) {

    $this->SetFillColor(255,0,0);

    $this->SetTextColor(255);

    $this->SetDrawColor(128,0,0);

    $this->SetLineWidth(.3);

    $this->SetFont('','B');
    $w=array(85,40,15);
    for($i=0;$i<count($header);$i++)

    $this->Cell($w[$i],7,$header[$i],1,0,'C',1);

    $this->Ln();
    $this->SetFillColor(175);

    $this->SetTextColor(0);

    $this->SetFont('');
    $fill=true; 

    foreach($data as $row)

    {
    $this->Cell($w[0],6,$row[0],'LR',0,'L',$fill);
    $this->Cell($w[1],6,$row[1],'LR',0,'L',$fill);
$this->Cell($w[2],6,$row[2],'LR',0,'C',$fill);

    $this->Ln();

   $fill =! $fill;

    }
    $this->Cell(array_sum($w),0,'','T');

    }

}

$data[] = array(($_POST['unit']), ($_POST['final']), (['act']));
$pdf = new FPDF('L', 'in', 'A4');
$header=array('Attributes','Outcome','Activites');

$pdf->SetFont('Arial', 'B', 10);

$pdf->AddPage();
$pdf->BuildTable($header,$data);
$pdf->Output();
?> 
```

请问有人可以帮忙吗。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:41:17.893

我试试这个。但略有不同。但我认为你可以从这段代码中找到解决方案。

```
index.php
<form action="mypdf.php" method="post">
    <table>
       <tr>
         <td><textarea name="unit[]"></textarea></td>
         <td><textarea name="final[]"></textarea></td>
         <td><textarea name="act[]"></textarea></td>
      </tr>
       <tr>
        <td><textarea name="unit[]"></textarea></td>
        <td><textarea name="final[]"></textarea></td>
        <td><textarea name="act[]"></textarea></td>
    </tr>
        <td><input type='submit' name='Submit' value='Submit'></td>
    </tr>
  </table>
</form> 
```

然后我编码 mypdf.php

```
#mypdf.php
<?php
include('pdf.php');
    if(isset($_POST['Submit'])){
    $unit = $_POST['unit'];
    $final = $_POST['final'];
    $act = $_POST['act'];

    // get your $N value for hear
    for($i = 0; $i < 3; $i++){
        $data[] = array($unit[$i], $final[$i], $act[$i]);
    }

    $h1_heading = "Test 1";

    $pdf = new PDF('P', 'mm', 'A4');
    $pdf->AliasNbPages();
    $pdf->SetFont('Times','B',12);
    $pdf->SetTextColor(231,69,16);
    $w = $pdf->GetStringWidth($h1_heading)+40;
    $pdf->AddPage();
    $pdf->Cell($w,-12,$h1_heading, 0,1,'C');
    $pdf->Ln(25);
    //Column titles
    $header=array('Unit','Final','Act');
    $pdf->SetFont('Arial','',11);
    //Header
    // make an array for the column widths
    $w=array(25,30,25);
    // call the table creation method
    $pdf->BuildTable($header,$data,$w);
    $pdf->Output();

} else {
    header("Location:index.php");
    }
?> 
```

这是我的 pdf.php

```
#pdf.php
<?php 

require('fpdf.php');

class PDF extends FPDF {    

        // Page Header
        function Header() {     
            date_default_timezone_set('Asia/Colombo'); 
            $timestamp = time();            
            $this->SetX(110);
            $this->Cell(90,10,date("Y/m/d h:i:s A ",$timestamp), 0,0,'C');
            $this->Ln(30);
        }

        //Page footer method
        function Footer()       {
            //Position at 1.5 cm from bottom
            $this->SetY(-15);
            $this->SetFont('Arial','I',8);
            $this->SetTextColor(145,55,25);
            $this->Cell(0,10,'Page '
            .$this->PageNo().'/{nb}',0,0,'C');
        }       

        function BuildTable($header,$data,$w) {
            //Colors, line width and bold font
            $this->SetFillColor(255,153,51);
            $this->SetTextColor(165,42,42);
            $this->SetDrawColor(244,81,61);
            $this->SetLineWidth(.1);
            $this->SetFont('','B',8);

            // send the headers to the PDF document
            for($i=0;$i<count($header);$i++) 
                $this->Cell($w[$i],7,$header[$i],1,0,'C',1);

            $this->Ln();

        //Color and font restoration
        $this->SetFillColor(255,204,102);
        $this->SetTextColor(244,81,61);
        $this->SetFont('');

        //now spool out the data from the $data array
        $fill=true; // used to alternate row color backgrounds

        foreach($data as $row) {
            // flips from true to false and vise versa
            $fill =! $fill;
            if($fill==0){
                for($i = 0; $i<count($header); $i++ ){
                    // restore normal color settings
                    $this->SetFillColor(255,255,153);
                    $this->SetTextColor(244,81,61);
                    $this->SetFont('');
                    $this->Cell($w[$i],6,$row[$i],1,0,'C',true);
                }
                $this->Ln();
            } else {
                for($i = 0; $i<count($header); $i++ ){
                    // restore normal color settings
                    $this->SetFillColor(255,204,102);
                    $this->SetTextColor(244,81,61);
                    $this->SetFont('');
                    $this->Cell($w[$i],6,$row[$i],1,0,'C',true);
                }
                $this->Ln();
            }
        }
        $this->Cell(array_sum($w),0,'','T');
    }
}
?> 
```

尝试这个。我认为这会对你有所帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:36:32.887

你的代码

```
$data[] = array(($_POST['unit']), ($_POST['final']), (['act'])); 
```

将其更改为

```
$data[] = array(($_POST['unit']), ($_POST['final']), ($_POST['act'])); 
```

试试看或

```
$unit = $_POST['unit'];
$final = $_POST['final'];
$act  = $_POST['act'];

for($i = 0; $i< count($unit); $i++){
    $data[] = array(($unit[$i]), ($final[$i]), ($act[$i]));
} 
```

# css - DIV 内的图像超出其边界

> ID：13395278
> 
> 赞同：2
> 
> 时间：2012-11-15T10:10:39.850
> 
> 标签：css, html

![在此处输入图像描述](../Images/a41edf4f4eea7ba9371530f55ac5c749.png)

我不知道为什么会这样。我可以解决此问题的唯一方法是在文本之后放置大量中断，但显然这不是一个可接受的解决方案。

隔离的 CSS：

```
.center_column {
    max-width: 892px;
    float: left;
}

.content {
    width: 892px;
    background-color: #FFF;
    background-image: url("style/contentpost.png");
    background-repeat: no-repeat;
    border-style: solid;
    border-width: 2px;
    border-color: #7699bb;
    border-radius: 10px;
}

.content_wrap {
    margin-top: 40px;
    margin-left: 20px;
    margin-right: 20px;
    margin-bottom: 20px;
    text-align: left;
}

.text {
    width: 100%;
    margin-top: 20px;
    text-align: justify;
    text-justify: distribute;
    font-weight: normal;
    font-size: 16px;
} 
```

独立的 HTML：

```
<div class="center_column">
    <div class="content">
        <div class="content_wrap">
            <div class="text">
                <img src="image">Text
            </div>
        </div>
    </div>
</div> 
```

为什么会这样？谁能告诉我如何解决这个问题？先感谢您 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T10:13:43.773

这将强制浏览器计算包含浮点数的 div 的高度：

```
.text{
     overflow: hidden;
} 
```

`overflow:hidden`此外，如果您出于某种原因不想要，请搜索 clearfix 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:26:41.510

看到你还没有完成整个布局。试试这个布局和风格..

```
<div class="center_column">
    <div class="content">
        <div class="content_wrap">
            <img class="pic" />
            <div class="text">TEXT</div>
        </div >
    </div>
    <div class="footer" >FOOTER</div>
</div> 
```

将此添加到您现有的样式中

```
.pic {
    float:left;
}

.footer {
    clear: both;
} 
```

FLOAT 实际上会浮动它之后的所有内容，向左或向右添加 CLEAR 将清除浮动问题。换句话说，结束浮动效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:14:33.593

这是因为你的

```
float : left; 
```

你需要添加这个

```
<div class="clear"></div> 
```

在您的图像下方。

并将其添加到您的 css 文件中

```
.clear { clear : both; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T10:15:24.783

您可以在 CSS 中使用固定的图像宽度和高度，或者在 CSS 中使用背景位置和大小属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T10:17:19.943

添加一个`<div>`清除浮动的：

```
<div class="center_column">
    <div class="content">
        <div class="content_wrap">
            <div class="text">
                <img src="image">Text
                <div style="clear: both;"></div>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T10:21:07.897

向左飘浮; 是你的问题，

添加 ：

```
<div class="clear"></div> 
```

CSS：

```
.clear {
  clear: both;
} 
```

# gettext - po消息文件构建

> ID：13395280
> 
> 赞同：1
> 
> 时间：2012-11-15T10:10:50.980
> 
> 标签：gettext, poedit, po, mo

是否可以构建`*.po`文件以`*.mo`使用终端？

目前，我必须`*.po`在我的文本编辑器中编辑文件，保存它，通过**Poedit**加载它并再次保存。

我正在开发 ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:24:32.117

使用 msgfmt

Msgfmt /path/to.PO -o path/to/new.mo

# php - php根据变量删除文本文件中的特定txtline

> ID：13395282
> 
> 赞同：1
> 
> 时间：2012-11-15T10:11:03.453
> 
> 标签：php

嘿，有没有办法删除文本文件中的特定变量？我有一个文本文件，我们称之为 xyz.txt，其中包含以下内容：

```
sdasd
dasdasda
sadasd 
```

现在我用`file_get_contents`. 让用户决定他要删除哪个变量。假设他选择了`sdasd`. 当我现在想`sdasd`从文本文件中删除行时，我必须使用什么？在这里没有找到任何有用的东西：[PHP Manual filesystem](http://www.php.net/manual/en/ref.filesystem.php)

以下是我如何加载 txtfile 的内容：

```
$handle = @fopen("xyz.txt", "r");
        echo ('<table class="table table-bordered table-striped">');
      echo '<thead>';
      echo'<tr>';
        echo'<th>Auswahl</th>';
        echo'<th>Admin</th>';
        echo'</tr>';
        echo'</thead>';
        echo ('<tbody>');
        echo("<tr>");
        while (!feof($handle)) // Loop til end of file.
        {
        $buffer = fgets($handle, 4096);
        // Read a line.
        list($a,$b,$c)=explode(" ",$buffer);
        //Separate string by the means of |
        echo '<td><form name="Lager" method="submit" action="admins_verwalten.php"><input type="radio" name="Admin" value="'.$a.$b.$c.'"><br></td>';
        echo('<td>'.$a.$b.$c."</td>");
        echo("</tr>");
        }
        echo ('</tbody>');
        echo ('</table>');
        echo '<button type="submit" class="btn btn-primary"></i>Admin delete</button></label></form>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:46:02.620

哦，男孩，你的方法有很多错误，我什至不知道从哪里开始。

不管怎样，我们会努力的。首先让我们看清楚：

```
<?php
    // Read the contents into an array without newlines
    $content = file('xyz.txt', FILE_IGNORE_NEW_LINES);
?>
<!-- A single form is enough, we don't want a gazillion forms!!! -->
<form name="Lager" method="POST" action="admins_verwalten.php">
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Auswahl</th>
            <th>Admin</th>
        </tr>
    </thead>
    <tbody>
    <?php
        for ( $i=0; $i<$content.length; $i++ ) {
            // We don't need the line itself as the input's value,
            // line number will suffice
            // Moreover we will allow multiple lines to be deleted (that's
            // what the >> name="Admin[]" << is for
            print sprintf(
                '<tr>
                     <td><input type="radio" name="Admin[]" value="%d"></td>
                     <td>%s</td>
                 </tr>',
                $i,
                $content[$i]
            );
        }
    ?>
    </tbody>
</table>
<button type="submit" class="btn btn-primary" value="Admin delete"/>
</form> 
```

然后我们将处理表单提交处理：

```
// This will give us an array with numbers of lines to be deleted
$lines = isset($_POST['Admin']) ?
             $_POST['Admin'] : false;

if ( !empty($lines) ) {
    $content = file('xyz.txt');

    foreach ( $lines as $line ) {
        // Delete the lines chosen by the client
        unset($content[$line]);
    }

    // Write back the remaining content
    file_put_contents('xyz.txt', $content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:13:33.220

您必须将文件读入内存以促进用户交互。当用户选择要删除的变量时，将文件写回而不删除要删除的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:16:47.317

这是我的做法：

```
1\. Read contents from the file into a variable
2\. use the explode with a linefeed as the delimiter to put the lines of the text file into an array.
3\. take user input.
4 for each element in the array see if user input matches the value.
5\. if matches then delete that element in the array.
6\. recreate the text file from the array and write to disk. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:20:43.810

要将所有行放入数组中：

```
$arr = file('textfile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

取出字符串：

```
$to_remove = 'asdf';
$arr = array_filter($arr, function($item) use ($to_remove) {
    return $item != $to_remove;
}); 
```

要写回文件：

```
file_put_contents('textfile.txt', join("\n", $arr)); 
```

**编辑**

帮助您调试过滤不起作用的原因；例如，这有效：

```
$arr = array('HAUGMA1', 'sdasd', 'dasdasda', 'sadasd');

$to_remove = 'sdasd';
$arr = array_filter($arr, function($item) use ($to_remove) {
        return $item != $to_remove;
});

print_r($arr); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T10:32:47.700

你可以使用这样的东西。

```
$source = "xyz.txt";
$raw = file_get_contents($source) or die("Cannot read file");
$wordlist = "sdasd";
$raw = preg_replace("/($wordlist)/ie", "", $raw);
file_put_contents($source, $raw); 
```

如果要删除多行，请更改

```
$wordlist = "sdasd"; 
```

至

```
$wordlist = "sdasd|abcd"; //this will remove abcd also if found. 
```

# header - 找出页眉 MSWord 中两个书签之间的文本

> ID：13395285
> 
> 赞同：0
> 
> 时间：2012-11-15T10:11:11.237
> 
> 标签：header, ms-word, bookmarks, visual-foxpro, office-2003

我正在寻找一种方法来找出放置在 MSWord 页面标题上的两个书签之间的文本内容。

假设两个书签是 BKM_1 和 BKM_2。两个书签之间的文本也是“测试”。

```
Local loWordApplication, loDoc, loRange
loWordApplication = CREATEOBJECT("Word.Application")
loDoc = loWordApplication.Documents.Open("C:\Example.doc")
IF loDoc.BookMarks.EXISTS("BKM_1") AND loDoc.BookMarks.EXISTS("BKM_2") 
   loRange = loDoc.RANGE(loDoc.BookMarks("BKM_1").START, loDoc.BookMarks("BKM_2").START) 
   loRange.SELECT
   ?loRange.TEXT && Printing the value here and expecting the result as "Test"
ENDIF 
```

但是即使存在书签，上面也不会产生我正在寻找的结果。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:56:36.283

页眉、页脚是不同类型的故事< g > - 没有双关语：

```
#Define wdCharacter 1
Local loWordApplication, loDoc, loRange
loWordApplication = Createobject("Word.Application")
loDoc = loWordApplication.Documents.Open("C:\Example.doc")
If loDoc.BookMarks.Exists("BKM_1") And loDoc.BookMarks.Exists("BKM_2") And ;
        loDoc.BookMarks("BKM_1").StoryType = loDoc.BookMarks("BKM_2").StoryType
    Local lnCharacters
    lnCharacters = loDoc.BookMarks("BKM_2").Start-loDoc.BookMarks("BKM_1").Start
    If loDoc.BookMarks("BKM_1").StoryType != 1
        loDoc.StoryRanges(loDoc.BookMarks("BKM_1").StoryType).Select()
    Endif

    loDoc.BookMarks("BKM_1").Range.Select()
    loDoc.Application.Selection.Moveend(wdCharacter, m.lnCharacters)

    loRange = loWordApplication.Selection

    ?loRange.Text && Printing the value here and expecting the result as "Test"
Endif
loWordApplication.Quit 
```

# php - 如何使用 extjs url 将 javascript 动态数据发送到 php 变量？

> ID：13395286
> 
> 赞同：0
> 
> 时间：2012-11-15T10:11:13.367
> 
> 标签：php, javascript, extjs

我在一页中有动态创建的链接列表。当我点击一个链接时，我想做另一个页面将打开，并且根据我发送的链接 ID，数据将从数据库中获取并加载到分页 ext 数据网格中。

在我的 Javascript 代码中咆哮

```
 var extGrid = null;
     var center_data_store=null;
     var exam_id = null;
     Ext.onReady(function(){

// create the data store
exam_id = document.getElementById("hdnExamId").value;  

//I am getting id from one hidden field.  

//alert(exam_id);// Id is coming.  

 multiple_choice_all_data_store = new Ext.data.JsonStore({
    totalProperty: 'total', // total data, see json output
    root: 'results',    // see json output  

    url: 'multiple_choice_all_data_grid.php"?exm_id="+exam_id',  
       //in above url I am passing data.

    fields: [
        {name: 'OEXM_Id', type: 'int'},
        'OEXM_txtareaQuestion','OEXM_rbtnOption','OEXM_txtOption1','OEXM_txtOption2','OEXM_txtOption3','OEXM_txtOption4','OEXM_txtExamId','OEXM_txtExamName'
        ]
});

// load data from the url ( data.php )
multiple_choice_all_data_store.load({params:{start: 0, limit: 15}});

// create the Grid
var multiplechoicealldataGrid = new Ext.grid.GridPanel({
    store: multiple_choice_all_data_store,
    columns: [
        new Ext.grid.RowNumberer(),
        //{header: 'ID', width: 30, sortable: true, dataIndex: 'OEXM_Id',hidden:false},
        {header: 'Question', width: 300, sortable: true, dataIndex: 'OEXM_txtareaQuestion',hidden:false},
        {header: 'Answer', width: 100, sortable: true, dataIndex: 'OEXM_rbtnOption',hidden:false},
        {header: 'Option1', width: 100, sortable: true, dataIndex: 'OEXM_txtOption1',hidden:false},
        {header: 'Option2', width: 100, sortable: true, dataIndex: 'OEXM_txtOption2',hidden:false},
        {header: 'Option3', width: 100, sortable: true, dataIndex: 'OEXM_txtOption3',hidden:false},
        {header: 'Option4', width: 100, sortable: true, dataIndex: 'OEXM_txtOption4',hidden:false}

    ],
    stripeRows: true,
    height:470,
    width:792,
    title:'All Multiple Choice Question Information',
    bbar: new Ext.PagingToolbar({
        pageSize: 15,
        store: multiple_choice_all_data_store,
        displayInfo: true,
        displayMsg: 'Displaying Records {0} - {1} of {2}',
        emptyMsg: "No topics to display"
    })

}); 
```

我的问题是我无法在我的 PHP 页面中获取 ID 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:32:53.673

尝试将商店定义中的 url 更改为`'multiple_choice_all_data_grid.php?exm_id='+exam_id`

然后你的 id 应该在 PHP 中的`$_GET['exm_id']`变量中可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:36:35.990

在 ExtJS 中获取元素：
`exam_id = Ext.getCmp("hdnExamId").getValue();`
getValue() 方法用于检索元素的值。

编辑：
还修复了`@Lolo`指向的网址。

# java - 在 java servlet 中将 xml 转换为 JSON

> ID：13395292
> 
> 赞同：-2
> 
> 时间：2012-11-15T10:11:46.290
> 
> 标签：java, json, jdom

我必须从返回 xml 文件的 java servlet 调用 perl 脚本。然后 java servlet 使用 jdom 将 xml 转换为 json。到目前为止，我已经成功获取了xml。我徒劳地尝试了很多使用jdom创建json。任何帮助将不胜感激。

XML 文件看起来有点像这样。

```
<rsp stat="ok">
<results total="5">
<result cover="http://xxxxxxxxxxxxxxxxxxxxxx.jpg" title="aaaaa" year="dddd" director="qqqqqq" rating="yyy" details="666666"/>
</results>
</rsp> 
```

有 5 个这样的结果行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:18:27.497

您可以尝试此[链接中记录的方法](http://answers.oreilly.com/topic/278-how-to-convert-xml-to-json-in-java/)

总之，将**net.sf.json-lib**添加到您的项目中。

然后使用`net.sf.json.xml.XMLSerializer`如下代码所示。

```
net.sf.json.xml.XMLSerializer xmlSerializer = new net.sf.json.xml.XMLSerializer(); 
JSON json = xmlSerializer.read( xmlString );  
System.out.println( json.toString(2) ); 
```

[这里](https://github.com/tobrien/sample-json-parsing)有一个带有源代码的github项目

# ios - ios中的开关

> ID：13395296
> 
> 赞同：-2
> 
> 时间：2012-11-15T10:11:54.537
> 
> 标签：ios, uiswitch

我只是 iOS 的初学者。我`[leftSwitch setOn:setting animated:YES];`在描述开关的教程中看到了这个声明** **。

```
 UISwitch *leftSwitch;

    UISwitch *whichSwitch = (UISwitch *)sender;
    BOOL setting = whichSwitch.isOn;
   [leftSwitch setOn:setting animated:YES]; 
```

请解释我在这种情况下需要关键字`animated`。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:18:15.427

在 objC 中，参数不会像在 C 或 java 中那样位于方法名称之后，或者在 objC 中...，参数与方法名称交织在一起。

```
lalalaa:PARAM lalala:PARAM2 lalala:PARAM3 
```

在每个 : 之后都有一个参数

如此动画：=方法名称的一部分

```
setOn:animated: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:14:28.090

该`animated`方法的一部分决定了该开关状态的变化在哪里是一个很好的平滑动画。尝试两者`YES`，`NO`你会看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:15:03.723

setOn:animated：将开关的状态设置为 On 或 Off，可选择为过渡设置动画。

*   (void)setOn:(BOOL)on animated:(BOOL)animated 参数 on YES 如果开关应该转到 On 位置；否，如果它应该转到关闭位置。如果开关已经在指定位置，则不会发生任何事情。

动画 YES 为开关的“翻转”设置动画；否则否。参见：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UISwitch_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISwitch_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-29T12:22:24.470

拖放`UISwitch`到`xib`文件中。

在`.h`文件中：

```
IBOutlet UISwitch *onoff; 
```

在`.m`文件中：

```
[onoff addTarget:self action:@selector(switchTapped:) forControlEvents:UIControlEventValueChanged];

// Switch
-(void) switchTapped: (id) sender {
    UISwitch *switchControl = (UISwitch*) sender;
    BOOL value = switchControl.isOn;
    if (value) {
        lbl4.text=@"ON";
    }else{
        lbl4.text=@"OFF";
    }
} 
```

# objective-c - 滚动表格视图时未选中复选标记

> ID：13395306
> 
> 赞同：0
> 
> 时间：2012-11-15T10:12:33.910
> 
> 标签：objective-c, ios, uitableview

我正在使用 tableview 并显示数据。在表格中查看所有已发送邮件的 checkMark 项目。但是当滚动表格时，复选标记未被选中。我不想在滚动表格时取消检查。请帮我。我正在开发以下代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CustomCellIdentifier = @"CustomCellIdentifier ";
    CaptureCell *cell = (CaptureCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier];
    if (cell == nil) { 
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CaptureCell"
                                                     owner:self options:nil];
        for (id oneObject in nib) if ([oneObject isKindOfClass:[CaptureCell class]])
            cell = (CaptureCell *)oneObject;
    } 

    if ([[[dataArray objectAtIndex:indexPath.row] objectForKey:@"CaptureId"]isEqualToString:[dict objectForKey:[[dataArray objectAtIndex:indexPath.row] objectForKey:@"CaptureId"]]])
    {
        cell.confirmMail.image = [UIImage imageNamed:@"mailConfirm.png"];
    }
    NSString *input;
    input = [[dataArray objectAtIndex:indexPath.row]objectForKey:@"amount"];
    [input stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    //NSLog(@"after removing white spaces %@",input);
    double price;
    NSString *numberAsString = nil;
    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    NSLocale *gbLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
    [numberFormatter setLocale:gbLocale];
    [gbLocale release];
    [numberFormatter setNumberStyle: NSNumberFormatterCurrencyStyle];
    if ([[input stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]length]!=0)
    {
        NSLog(@"the input is***** %@",input);           
        price=[[input stringByReplacingOccurrencesOfString:@"$" withString:@""] doubleValue];
        NSLog(@"the price is %f",price);
        numberAsString = [numberFormatter stringFromNumber:[NSNumber numberWithDouble:price]];
        NSLog(@"the numberAsString...... %@",numberAsString);
    }
    [numberFormatter release];

    cell.eventNameLbl.text = [[dataArray objectAtIndex:indexPath.row]objectForKey:@"expenseType"];
    cell.expenTypeLbl.text = [[dataArray  objectAtIndex:indexPath.row]objectForKey:@"empName"];
    cell.dataLbl.text = [[dataArray objectAtIndex:indexPath.row]objectForKey:@"Date"];
    cell.amountLbl.text = numberAsString;

    cell.billImage.image = [UIImage imageWithData:[[dataArray objectAtIndex:indexPath.row]objectForKey:@"image"]];

    //[cell.textLabel setText:[NSString stringWithFormat:@"Row %d", indexPath.row]];
    cell.selectionStyle=UITableViewCellSelectionStyleNone;
    NSIndexPath* selection = [tableView indexPathForSelectedRow];
    if (selection && selection.row == indexPath.row) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark; 
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;  
    }

    // if([[[captureArray objectAtIndex:indexPath.row]objectForKey:@"eventName"]isEqualToString:[[selectedData objectAtIndex:indexPath.row]objectForKey:@"eventName"]])
    //  NSLog(@"Equal");

    //[cell setEditing:YES animated:YES];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *selected = [dataArray objectAtIndex:indexPath.row];

    if([tableView isEditing] == YES)
    {
        AppDelegate *sharedDelegate = [[UIApplication sharedApplication]delegate];
        sharedDelegate.isEditCapture = YES;
        sharedDelegate.findDate = YES;
        NSString *imgDataStr = [[NSString alloc]initWithData:[[dataArray objectAtIndex:indexPath.row]objectForKey:@"image"] encoding:NSUTF8StringEncoding];
        NSLog(@"imageStr%@",imgDataStr);
        ExpensesCaptureViewController_iPhone *nextController = [[ExpensesCaptureViewController_iPhone alloc] initWithNibName:@"ExpensesCaptureViewController_iPhone" bundle:nil];

        nextController.captureId = [[dataArray objectAtIndex:indexPath.row] objectForKey:@"CaptureId"];
        [self.navigationController pushViewController:nextController animated:YES];
        [imgDataStr release];
        [nextController release];
        if([selectedData count]>0)
        {
            [selectedData removeObject:selected];
        }

    }

    else {
        if ([[[dataArray objectAtIndex:indexPath.row] objectForKey:@"CaptureId"]isEqualToString:[dict objectForKey:[[dataArray objectAtIndex:indexPath.row] objectForKey:@"CaptureId"]]])
        {
            NSLog(@"sent items");
        }

        else {
            if (cell.accessoryType == UITableViewCellAccessoryNone)
            {
                cell.accessoryType = UITableViewCellAccessoryCheckmark;

                [selectedData addObject:selected];

            }

            else 
            {

                cell.accessoryType = UITableViewCellAccessoryNone;            

                [selectedData removeObject:selected];   

            }

        }

    }

    NSLog(@"DataObjects %d %@",[selectedData count] ,[[dataArray objectAtIndex:indexPath.row] objectForKey:@"eventName"]);  

    //[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:28:53.477

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`调用方法并设置时滚动 tableView 的问题

```
NSIndexPath* selection = [tableView indexPathForSelectedRow];
    if (selection && selection.row == indexPath.row) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark; 
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;  
    } 
```

这意味着当您滚动时 indexPath 将仅针对当前行，因此当前行的复选标记仍将被选中，但所有其他行将进入 else 条件并且复选标记将被删除。

要修复它，您应该执行以下操作：

定义以下属性：

```
@property (nonatomic)BOOL isViewIsLoadedForTheFirstTime;

-(void)viewDidLoad
{
    self.isViewIsLoadedForTheFirstTime = YES;
} 
```

然后在 (cellForRow) 方法中替换这些行

```
if (selection && selection.row == indexPath.row) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark; 
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;  
    } 
```

到以下几行：

```
if (self.isViewIsLoadedForTheFirstTime) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark; 
        self.isViewIsLoadedForTheFirstTime = NO;
    } 
```

这将使您仅在第一次加载视图时设置复选标记，当您滚动它时不会改变。

我希望这会帮助你

# sencha-touch-2 - Sencha Touch 2 中选择器的上一个和下一个按钮

> ID：13395307
> 
> 赞同：7
> 
> 时间：2012-11-15T10:12:41.180
> 
> 标签：sencha-touch-2, next, picker, virtual-keyboard

我正在使用 Sencha Touch 2.0.1 构建适用于 Android、iOS 和 Blackberry 的应用程序。

我有一个表单面板，其中包含大约 10 个选择字段和一些 sextfields。如果我在 Android 2.3 或更高版本上运行该应用程序，则选择字段显示为选择器。到目前为止，一切都很好。

当用户开始从文本字段开始填写表单时，他可以使用虚拟键盘上的下一步按钮浏览表单。问题是，选择字段被下一步按钮忽略。用户必须点击选择字段。

我不知道如何获取选择器元素的上一个和下一个按钮。这样我就可以只使用下一个按钮浏览表单，而不是按“完成”并点击下一个选择字段。这对用户来说会舒服得多。

所以对 sencha-forum 的支持并没有真正的帮助，见下文：

[http://www.sencha.com/forum/showthread.php?219636-Native-select-field-for-Android](http://www.sencha.com/forum/showthread.php?219636-Native-select-field-for-Android) http://www.sencha.com/forum/showthread.php?205581-Can-I-use -iOS-native-picker-instead-of-ST2-picker

据此，选择器有 prev- 和 next- 按钮： [http ://www.sencha.com/forum/showthread.php?205159-Ext.picker.Date-with-no-prev-and-next-按钮&p=803794](http://www.sencha.com/forum/showthread.php?205159-Ext.picker.Date-with-no-prev-and-next-buttons&p=803794)

但我找不到他们:-(

我认为，这个问题有两种解决方案：

1.  按照上面第一个链接中的建议访问本机 Picker。问题是如何？
2.  使用 Prev- 和 Next-Button 实现自己的 Picker-Element。对于这样一项基本任务，这似乎是一个巨大的努力。

我真的不敢相信，这在像 Sencha Touch 这样的大框架中是如此重要。

任何人都面临同样的问题并有一个可行的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:25:27.063

我对您的唯一想法是将您的选择器正常放在页面上，然后在页面上添加两个按钮 - 使用 Sencha 的 Prev 和 Next 按钮。然后为这些按钮添加 onTop 处理程序，这些处理程序使用选择器的 .setActiveItem() 方法将选择器设置为下一个或上一个项目。希望这会让你上路。

[http://docs.sencha.com/touch/2-0/#!/api/Ext.picker.Picker-method-setActiveItem](http://docs.sencha.com/touch/2-0/#!/api/Ext.picker.Picker-method-setActiveItem)

# objective-c - iOS：ZBar SDK unicode 字符

> ID：13395311
> 
> 赞同：5
> 
> 时间：2012-11-15T10:13:08.003
> 
> 标签：objective-c, ios, unicode, qr-code, zbar

使用 ZBar 扫描 QR 码时，该过程产生的字符串无法正确显示 unicode 字符。[任何免费使用的 QR 码生成器（如http://qrcode.kaywa.com ）将](http://qrcode.kaywa.com)**Márti**编码为 QR 码的单词将导致**Mﾃ｡rti**。

 **在其他 SO 问题（[1](https://stackoverflow.com/questions/1612062/unicode-encoding-and-decoding-issues-in-qrcode)、[2](https://stackoverflow.com/questions/2585024/create-an-utf-8-string-with-bom)）中，建议在结果字符串的开头嵌入 BOM，但这样做：

```
NSString *qrString = [NSString stringWithFormat:@"\xEF\xBB\xBF%@",symbol.data]; 
```

或这个：

```
NSString *qrString = [[NSString alloc] initWithFormat:@"\357\273\277%@", symbol.data]; 
```

导致了与亚洲角色相同的、有缺陷的结果。`symbol.data`是 ZBar 提供的结果 NSString。

**更新：根据 dda 的回答，解决方案如下：**

```
NSString *qrString = symbol.data;
//look for misinterpreted acute characters and convert them to UTF-8
if ([qrString canBeConvertedToEncoding:NSShiftJISStringEncoding]) {
  qrString = [NSString stringWithCString:[symbol.data cStringUsingEncoding: NSShiftJISStringEncoding] encoding:NSUTF8StringEncoding];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:51:53.113

根据[关于 QR 的维基百科页面](http://en.wikipedia.org/wiki/QR_code#Storage)，二进制数据的编码 [Márti 将适用] 是 ISO 8859-1。这可能是编码为 un​​icode 编码的问题。但是看到那里的汉字，可能是问题是编码为 QR 编码的问题：可能不是 ASCII 的文本默认编码为 Shift JIS X 0208（即汉字/假名）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T13:53:50.763

我可以使用以下库创建“日本语”（日语）和“Márti”的二维码：

*   [iOS-QR-Code-Encoder](https://github.com/akopanev/iOS-QR-Code-Encoder)
*   [QR-Code-Encoder-for-Objective-C](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)。

您可以使用 ZBar 读取这些二维码。

[iOS-QR-Code-Encoder](https://github.com/akopanev/iOS-QR-Code-Encoder)：

```
NSString* orginalString = @"Márti"(or "日本語"(japanese));  
NSString *data = [[NSString alloc] initWithFormat:@"\357\273\277%@", orginalString];  
UIImage* qrcodeImage = [QRCodeGenerator qrImageForString:data imageSize:imageView.bounds.size.width]; 
```

[QR-Code-Encoder-for-Objective-C](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)：

```
NSString* orginalString = @"Márti"(or "日本語"(japanese));
NSString *data = [[NSString alloc] initWithFormat:@"\357\273\277%@", orginalString];

//first encode the string into a matrix of bools, TRUE for black dot and FALSE for white. Let the encoder decide the error correction level and version
DataMatrix* qrMatrix = [QREncoder encodeWithECLevel:QR_ECLEVEL_AUTO version:QR_VERSION_AUTO string:data];

//then render the matrix
UIImage* qrcodeImage = [QREncoder renderDataMatrix:qrMatrix imageDimension:qrcodeImageDimension]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:38:27.170

请注意，目前的解决方案将不包括在日本使用以及扫描内部带有实际汉字编码的 QR 码。事实上，它可能会为任何在 canBeConvertedToEncoding:NSShiftJISStringEncoding 中包含 Unicode 字符的 QR 码造成问题。

更通用的解决方案是在 QR 码编码之前插入 BOM 字符以强制 UTF-8 编码（在创建之前）。ZBar 在这里从来不是问题，它植根于 QR 码的创建。**

# c++ - C++ InStream 重载问题

> ID：13395312
> 
> 赞同：0
> 
> 时间：2012-11-15T10:13:14.833
> 
> 标签：c++

下面是我的代码

```
ifstream& operator>>(ifstream &input,Line3D &line3d)
{
int x1,y1,z1,x2,y2,z2;
x1=0;
y1=0;
z1=0;

x2=0;
y2=0;
z2=0;

//get x1
input.ignore(2);
input>>x1;

//get y1
input.ignore();
input>>y1;

//get z1
input.ignore();
input>>z1;

//get x2
input.ignore(4);
input>>x2;

//get y2
input.ignore();
input>>y2;

//get z2
input.ignore();
input>>z2;
input.ignore(2);

//cout << x1 << "," << y1 << "," << z1 << "," <<endl;
//cout << x2 << "," << y2 << "," << z2 << "," <<endl;

Point3D pt1(x1,y1,z1);
Point3D pt2(x2,y2,z2);

line3d.setPt1(pt1);
line3d.setPt2(pt2);

line3d.setLength();
} 
```

有这个奇怪的问题，如果我评论我的 cout ，上面的 2 cout 。我的代码不起作用，但如果我取消注释，代码将起作用..这是终端输出..

```
Please enter your choice: 1

Please enter filename: messy.txt
10 records read in successfully!
Going back to main menu ... 
```

但是如果我取消注释 cout ...

请输入您的选择：1

```
Please enter filename: file.txt
7,12,3,
-9,13,68,
7,-12,3,
9,13,68,
70,-120,-3,
-29,1,268,
25,-69,-33,
-2,-41,58,
9 records read in successfully!
Going back to main menu ... 
```

9条记录是正确的。但为什么 cout 会解决我的代码问题。虽然我认为 cout 只是打印到终端。我在这里做错了什么。

这是文本文件内容

```
Point2D, [3, 2]
Line3D, [7, 12, 3], [-9, 13, 68]
Point3D, [1, 3, 8]
Line2D, [5, 7], [3, 8]
Point2D, [3, 2]
Line3D, [7, -12, 3], [9, 13, 68]
Point3D, [6, 9, 5]
Point2D, [2, 2]
Line3D, [70, -120, -3], [-29, 1, 268]
Line3D, [25, -69, -33], [-2, -41, 58]
Point3D, [6, 9, -50] 
```

我想从终端得到的正确响应是

```
Correct output: 9 records read in successfully 
Reason: as 10 means the value fail to record to vector. and duplicate is not removed. 
```

感谢所有指导，我应该怎么做才能保持正确的输出但移除 cout ..

我在 main.cpp 上的更多代码：

```
readFile.open(filename.c_str());

//if successfully open
if(readFile.is_open())
{
//record counter set to 0
numberOfRecords = 0;

while(readFile.good())
{
//input stream get line by line
readFile.getline(buffer,25,',');

Line3D line3d_tmp;
readFile>>line3d_tmp;

done=true;

//some for loop to check for duplication
//done will be false if doesnt work

if(done==true)
{
line3d.push_back(line3d_tmp);

} 
```

所以你看看值是否 push_back 到我的向量中，重复的记录将被删除，因为我故意放了 2 条相同值的记录。问题是我是否使用 2 cout 线。记录显示为 9（正确，因为有 1 行重复），并且在第二次运行时输入相同的文件。正在读取 0 条记录..

但是，如果我在第二次运行时评论我的 cout，它会再次读取 4 条记录。第一次运行是 10 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:18:28.483

几点：

*   更改`ifstream`为`istream`
*   `input`在运算符末尾返回
*   定义一个`operator>>()`for`Point3D`并将其用于`Line3D`

# css - IE9 中错误的简单 div 布局

> ID：13395313
> 
> 赞同：1
> 
> 时间：2012-11-15T10:13:16.810
> 
> 标签：css, internet-explorer, layout, html

为什么 IE9 不能将 div 放在`Orange`div 旁边`Blue`？div 在其他更文明的浏览器中渲染得很好，比如 Chrome 或 Firefox。宽度值完美匹配，包括边距，但是需要从例如`Gray`div 中删除额外的 4 个像素，以使IE9 中`Orange`出现在旁边的（当然，`Blue`在右侧留下 4 像素间隙`Orange`）。

```
<div style="margin-top: 100px; background-color: GreenYellow; width: 740px; height: 100px; padding: 0px; overflow: visible;">
  <div style="background-color: CadetBlue; width: 210px; height: 100px; margin: 0px; padding: 0px; float: left; overflow: visible;">
  </div>
  <div style="background-color: Black; width: 100px; height: 100px; margin: 0px 0px 0px 4px; padding: 0px; float: left; overflow: visible;">
  </div>
  <div style="background-color: FireBrick; width: 318px; height: 100px; margin: 0px 0px 0px 4px; padding: 0px; float: left; overflow: visible;">
    <div style="background-color: LightSalmon; width: 318px; height: 48px; margin: 0px; padding: 0px; overflow: visible;">

      <!-- Gray -->
      <div style="width: 214px; height: 48px; margin: 0px 0px 0px 0px; padding: 0px; float: left; background-color: #333333; overflow: visible;">
      </div>

      <!-- Blue -->
      <div style="width: 48px; height: 48px; margin: 0px 0px 0px 4px; padding: 0px; float: left; background-color: #00A8EC; overflow: visible;">
      </div>

      <!-- Orange -->
      <div style="width: 48px; height: 48px; margin: 0px 0px 0px 4px; padding: 0px; float: left; background-color: Orange; overflow: visible;">
      </div>

    </div>
    <div style="background-color: Gainsboro; width: 318px; height: 48px; margin: 4px 0px 0px 0px; padding: 0px; overflow: visible;">
    </div>
  </div>
  <div style="background-color: Purple; width: 100px; height: 100px; margin: 0px 0px 0px 4px; padding: 0px; float: left; overflow: visible;">
  </div>
</div> 
```

那么我该如何解决呢？这太痛苦了 ...

小提琴：http: [//jsfiddle.net/LE6cy/](http://jsfiddle.net/LE6cy/)

### 更新

好的，我不知道这会影响它，但是我在这些 div 之前的页面上还有一件事。这是一张普通的桌子。似乎一旦表在那里，就会出现错误。所以这是整个 HTML 页面（真实的）：

```
<table id="signature" cellspacing="4" cellpadding="0" style="width: 750px; height: 100px; border: 0px;">
  <tr>
    <td rowspan="2" style="height: 100px; width: 210px; background-color: #336666;">
    </td>
  </tr>
</table>

<div style="margin-top: 100px; background-color: GreenYellow; width: 740px; height: 100px; padding: 0px; overflow: visible;">
  <div style="background-color: CadetBlue; width: 210px; height: 100px; margin: 0px; padding: 0px; float: left; overflow: visible;">
  </div>
  <div style="background-color: Black; width: 100px; height: 100px; margin: 0px 0px 0px 4px; padding: 0px; float: left; overflow: visible;">
  </div>
  <div style="background-color: FireBrick; width: 318px; height: 100px; margin: 0px 0px 0px 4px; padding: 0px; float: left; overflow: visible;">
    <div style="background-color: LightSalmon; width: 318px; height: 48px; margin: 0px; padding: 0px; overflow: visible;">

      <!-- Gray -->
      <div style="width: 214px; height: 48px; margin: 0px 0px 0px 0px; padding: 0px; float: left; background-color: #333333; overflow: visible;">
      </div>

      <!-- Blue -->
      <div style="width: 48px; height: 48px; margin: 0px 0px 0px 4px; padding: 0px; float: left; background-color: #00A8EC; overflow: visible;">
      </div>

      <!-- Orange -->
      <div style="width: 48px; height: 48px; margin: 0px 0px 0px 4px; padding: 0px; float: left; background-color: Orange; overflow: visible;">
      </div>

    </div>
    <div style="background-color: Gainsboro; width: 318px; height: 48px; margin: 4px 0px 0px 0px; padding: 0px; overflow: visible;">
    </div>
  </div>
  <div style="background-color: Purple; width: 100px; height: 100px; margin: 0px 0px 0px 4px; padding: 0px; float: left; overflow: visible;">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:52:21.970

您的标记中是否设置了 doctype？我做了一个小提琴[http://jsfiddle.net/LE6cy](http://jsfiddle.net/LE6cy)，我看到 IE9 和 Firefox 的类似渲染。Jsfiddle`<!doctype html>`默认在结果 iframe 中设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T10:48:43.477

尝试删除空文本节点，因为`<div>`s 向左浮动

# c# - 更改 DataGridView 中的列名

> ID：13395321
> 
> 赞同：9
> 
> 时间：2012-11-15T10:13:50.573
> 
> 标签：c#, datetime, datagridview

我使用下面的代码来更改列名，但不幸的是它不会让我这样做。请帮我解决这个问题：

```
DateTime dt = DateTime.Now;
string s = dt.DayOfWeek.ToString();
for (int i = 0; i < 10; i++)
{
    dataGridView1.Columns.Add(string.Format("col{0}", i), s);
}
for (int i = 0; i < dataGridView1.Columns.Count; i++)
{
    int c = dataGridView1.CurrentCell.ColumnIndex;
    string str = dataGridView1.Columns[c].HeaderText;
    if (str == "Wednesday")
    {
        str = "fifth day of week";
    }
} 
```

还有什么办法可以让我在特定日期时间之间连续一周中的每一天。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T10:24:42.960

你需要设置DataGridView.Column[index].HeaderText：

```
DateTime dt = DateTime.Now;

string s = dt.DayOfWeek.ToString();
for (int i = 0; i < 10; i++)
{
    dataGridView1.Columns.Add(string.Format("col{0}", i), s);
}

for (int i = 0; i < dataGridView1.Columns.Count; i++)
{

   string str = dataGridView1.Columns[i].HeaderText;
   if (str == "Wednesday")
   {
       dataGridView1.Columns[i].HeaderText = "fifth day of week";
   }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-06T14:40:10.057

将此行添加到 Datagridview DataBindingComplete 事件处理程序

```
 this.dataGridView1.Columns["your database column name"].HeaderText = " preferred name"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T10:43:37.910

下面的代码将在特定日期时间之间依次获取一周中的所有天，并将天的名称打印为列标题：

```
 DateTime dtStart = new DateTime(2012, 11, 1);
        DateTime dtEnd = new DateTime(2012, 11, 7);

        for (int i = 0; i < dtEnd.Subtract(dtStart).Days; i++)
        {
            TimeSpan counter = new TimeSpan(i, 0, 0, 0);

            dataGridView1.Columns.Add(string.Format("col{0}", i), (dtStart + counter).DayOfWeek.ToString());
        } 
```

# jquery - 将鼠标悬停在菜单上时，将焦点从下拉列表设置到窗口

> ID：13395325
> 
> 赞同：6
> 
> 时间：2012-11-15T10:13:55.253
> 
> 标签：jquery, html, css, drop-down-menu

这是一个屏幕截图 ![在此处输入图像描述](../Images/4e2895230a359b9ce310b52a8a673971.png)

我的页面上有一个下拉列表。当我单击下拉列表时，它会弹出，然后如果我在顶部菜单栏上选择它会扩展，如上所示，无法覆盖下拉列表。任何人都可以对如何处理这个问题有所了解。

**编辑：** 我刚刚创建了一个

### [jsfiddle 演示链接](http://jsfiddle.net/BTCBL/)

当我们首先单击下拉列表（并且不选择任何内容）并将鼠标悬停在报告菜单选项卡上时，下拉列表与菜单重叠。这是问题所在。

这是html代码anywaz

```
<div class="Main_Nav">
<div id="globalNav">
    <nav>
    <ul>
        <li id="HTMLID" class="first fourColumns">
        <div class="NavIcon_Administration">
        </div>
        <a href="#" title="Administration">Administration<span></span></a>
        <div class="pointer">
        </div>
        <div class="sub">
            <div class="menu">
                <ul>
                    <li class="title">System Management</li>
                    <li><a href='CallTypeMst.aspx'>Call Type</a></li>
                    <li><a href='AdmMenuMst.aspx'>Menu</a></li>
                    <li><a href='AdmProfileMst.aspx'>Profile</a></li>
                    <li><a href='AdmUserMst.aspx'>User</a></li>
                </ul>
                <ul>
                    <li class="title">Settings</li>
                    <li><a href='GeneralSettings.aspx'>General</a></li>
                    <li><a href='ThresholdSetting.aspx'>Threshold</a></li>
                    <li><a href='RouteMaintenanceSettings.aspx'>Route Maintenance</a></li>
                    <li><a href='FraudCallSettings.aspx'>Fraud Call</a></li>
                    <li><a href='ClientDetails.aspx'>Client Config</a></li>
                    <li><a href='ManageRateSheetDashBoard.aspx'>RateSheet</a></li>
                    <li><a href='DefaultRoute.aspx'>Default Routing</a></li>
                    <li><a href='CallAlert.aspx'>Call Alert</a></li>
                </ul>
            </div>
        </div>
        </li>
        <li id="HTMLID" class="first fourColumns">
        <div class="NavIcon_Operation">
        </div>
        <a href="#" title="Operations">Operations<span></span></a>
        <div class="pointer">
        </div>
        <div class="sub">
            <div class="menu">
                <ul>
                    <li class="title">Customer</li>
                    <li><a href='CustomerAdministration.aspx'>Administration</a></li>
                    <li><a href='CustomerRateSheetActivate.aspx'>Activate Rate Sheet</a></li>
                    <li><a href='CustomerRateActivationHistory.aspx'>Activation History</a></li>
                    <li><a href='CustomerRSCompare.aspx'>Compare RateSheet </a></li>
                </ul>
                <ul>
                    <li class="title">Carrier</li>
                    <li><a href='CarrierAdministration.aspx'>Administration</a></li>
                    <li><a href='CarrierRSCompare.aspx'>Compare Rate Sheet</a></li>
                </ul>
                <ul>
                    <li class="title">LCR</li>
                    <li><a href='LCRRebuildNew.aspx'>Build LCR</a></li>
                    <li><a href='LCRRebuildHistory.aspx'>Build History</a></li>
                    <li><a href='LCRActivationNew.aspx'>Activate LCR</a></li>
                    <li><a href='LCRActivationHistory.aspx'>Activation History</a></li>
                    <li><a href='EditLCR.aspx'>Edit LCR</a></li>
                    <li><a href='LCRDownload.aspx'>Download LCR</a></li>
                    <li><a href='RouteBlocking.aspx'>Route Block</a></li>
                    <li><a href='LCRActivationForNewClient.aspx'>Synchronization</a></li>
                </ul>
                <ul>
                    <li class="title">Fax & Inbound</li>
                    <li><a href='FaxSettings.aspx'>Fax Service</a></li>
                    <li><a href='InboundTollFreeAdd.aspx'>Add Inbound Number</a></li>
                    <li><a href='InboundTollFreeBulkUpload.aspx'>Inbound BulkUpload</a></li>
                </ul>
                <ul>
                    <li class="title">Lerg & Network</li>
                    <li><a href='LergUpdation.aspx'>Lerg Administration</a></li>
                    <li><a href='NetworkMaster.aspx'>Network Administration</a></li>
                </ul>
                <ul>
                    <li class="title">Maintenance</li>
                    <li><a href='RouteMaintenanceMst.aspx'>Route Maintenance</a></li>
                    <li><a href='FraudCallBlackList.aspx'>Fraud Call Black List</a></li>
                </ul>
            </div>
        </div>
        </li>
        <li id="HTMLID" class="singleColumn">
        <div class="NavIcon_Reports">
        </div>
        <a href="#" title="Reports">Reports<span></span></a>
        <div class="pointer">
        </div>
        <div class="sub">
            <div class="menu">
                <ul>
                    <li class="title">Summary</li>
                    <li><a href='DailySummary.aspx'>Daily Summary</a></li>
                    <li><a href='CallStatus.aspx'>Call Status</a></li>
                    <li><a href='CallStatisticsReport.aspx'>Call Statistics</a></li>
                    <li><a href='CarrierRateSheetDashboard.aspx'>RateSheet Summary</a></li>
                    <li><a href='AuditLog.aspx'>Audit Log</a></li>
                    <li><a href='ManageLogFiles.aspx'>Log Files</a></li>
                    <li><a href='ServiceMonitor.aspx'>Service Monitor</a></li>
                </ul>
                <ul>
                    <li class="title">Search</li>
                    <li><a href='CDRArchiveSearch.aspx'>CDR</a></li>
                    <li><a href='LCRSearch.aspx'>LCR</a></li>
                    <li><a href='LergSearch.aspx'>Lerg</a></li>
                    <li><a href='SearchCarrierRateSheet.aspx'>Carrier Rate Sheet</a></li>
                    <li><a href='CustomerRateSheetSearch.aspx'>Customer Rate Sheet</a></li>
                    <li><a href='FraudCallBlackListSearch.aspx'>Fraud Call Black List</a></li>
                    <li><a href='FaxSearch.aspx'>Fax</a></li>
                    <li><a href='InboundTollFreeSearchDelete.aspx'>Inbound</a></li>
                    <li><a href='RouteBlockSearch.aspx'>RouteBlock</a></li>
                </ul>
            </div>
        </div>
        </li>
    </ul>
    </nav>
                    </div></div>
                        <table align="right"><tr><td align="right">
    <select >
        <option>Option1</option>
        <option>Option2</option>
        <option>Option3</option>
        <option>Option4</option>
        <option>Option5</option>
    </select>
                        </td></tr></table> 
```

这是CSS代码

```
 .globalNav nav ul li
{
    display:;
}

:focus {
    outline: 0;
}

ol, ul {
    list-style: none;
}

blockquote:before, blockquote:after,
q:before, q:after {
    content: "";
}
blockquote, q {
    quotes: "" "";
}

ul,
ol {
    margin: 0 0 1.357em 0;
    /*color: #2C2C2C;*/
}
.contentTable {
    margin: 0 0 1.357em 0;
}
.contentTable td {
    padding: 0 20px;
}
p.small {
    font-size: 0.786em; /* 11px */
    line-height: 1.727em;
    margin-bottom: 1.727em;
    color: #999;
}

#globalNav li {
    list-style: none;
}

/* 
Primary navigation
*/
#globalNav {
    float: right;
    padding: 0;
    width:100%;
    height: 48px;
    position: relative;
    z-index: 55000; 
    /*z-index: 9999;*/
}

* html #globalNav {
    background: url('../Images_v4/Master/NavMenu.png') no-repeat 0 -39px;
}
    * html .middleContent {
        z-index: 3000;
    }
    *:first-child+html .middleContent {
        z-index: 3000;
    }    
    #globalNav ul {
        width: 550px;
        height: 48px;
        line-height: 48px;
        margin: 0;
        padding: 0;
        float: left;
    }

    #globalNav ul ul {
        height: auto;
    }

    #globalNav ul {
        margin: 0;
        padding: 0;
    }
        #globalNav li {
            float: left;
            height: 48px;
            z-index:10;
        }
        #globalNav li.singleColumn {
            position: relative;
        }
            #globalNav li a {
                color: #fff;
                font-size: 14px;
                text-decoration: none;
                /*text-shadow: 0 1px 0 #198cb6;*/
                cursor: pointer;
                padding: 0 0 0 10px;
                float: left;
                outline: none;
                overflow: hidden;
                max-height: 48px;
            }
                * html #globalNav li a {
                    height: 48px;
                    overflow: hidden;
                    padding-right: 10px;
                    position: relative;
                }
                *:first-child+html #globalNav li a {
                    height: 48px;
                    overflow: hidden;
                    padding-right: 10px;
                    position: relative;
                }                
            #globalNav li.first a {
                padding: 0 0 0 0px;
            }        
                * html #globalNav li.first a {
                    padding: 0 10px 0 24px;
                }    
                *:first-child+html #globalNav li.first a {
                    padding: 0 0px 0 0px;
                }                                
            #globalNav li a span {
                height: 48px;
                padding: 0;
                padding-right: 10px;
                float: right;
            }
                * html #globalNav li a span {
                    position: absolute;
                    right: 0;
                    top: 0;
                }
                *:first-child+html #globalNav li a span {
                    position: absolute;
                    right: 0;
                    top: 0;
                }
                #globalNav li a:hover {
                    /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat -300px -88px;*/
                }    
                #globalNav li.first a:hover {
                    padding-left: 0px;
                    /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat 0 -88px;*/
                }        
                    * html #globalNav li.first a:hover {
                        padding-left: 24px;
                        /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat 0 -88px;*/
                    }                            
                #globalNav li a:hover span {
                    /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat right -88px;*/
                }    
                    #globalNav li.selected {
                        /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat -300px -88px;*/
                    }

                    #globalNav li a:active {
                        /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat -300px -137px;*/
                    }
                        * html #globalNav li.selected {
                            background: transparent;
                        }                    
                    #globalNav li.first a:active {
                        /*padding-left: 24px;
                        background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat 0 -137px;*/
                    }
                    #globalNav li.first.selected {
                        /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat 0 -88px;*/
                    }
                        * html #globalNav li.first a:active {
                            /*padding-left: 24px;
                            background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat 0 -137px;*/
                        }
                    #globalNav li.selected span {
                        /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat right -88px;*/
                    }

                    #globalNav li a:active span {
                        /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat right -137px;*/
                    }
                        * html #globalNav li.selected span {
                            background: transparent;
                        }

#header div.middleContent div#globalNav div.searchfield {
    width: 165px;
    float: right;
    height: 48px;
    background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat -586px -137px;
    padding-left: 20px;
}

    * html #header div.middleContent div#globalNav div.searchfield {
        /* position: relative; */
        background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat -586px -88px;
    }
    #header div.middleContent div#globalNav div.searchfield input {
        border: none;
        background: #fff;
        width: 140px;
        color: #666666;
        font-size: 12px;
        margin-right: 10px;
        margin-left: 5px;
        font-family: Arial, Helvetica, sans-serif;
        -webkit-font-smoothing: antialiased;
        outline: none;
        height: 17px;
        margin-top: 16px;
        padding: 0;
        background: white;
        position: absolute;
    }

        html.rtl #header div.middleContent div#globalNav div.searchfield input {
            margin-right: 23px;
        }

        html[dir=rtl] #header div.middleContent div#globalNav div.searchfield input {
            margin-right: 23px;
        }        

#globalNav li .sub {
    position: absolute;
    z-index: 9999;
    top: 61px;/*kp*/
    display: none;
    padding: 10px 0 0 0;
}

@-webkit-keyframes fadein {
    0%{ opacity: 0;}
    100%{ opacity: 1;}
}

#globalNav li:hover .sub {
    display: block;
    -webkit-animation-name: fadein;
    -webkit-animation-duration: .3s;
    -webkit-animation-iteration-count: once;
    -webkit-animation-direction: normal;
    -webkit-animation-timing-function: ease-out;
}

    #globalNav li .sub .menu {
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        border: 1px solid #b20041;
        -webkit-box-shadow: 0 0 10px #777;
        -moz-box-shadow: 0 0 10px #777;
        box-shadow: 0 0 10px #777;
        background: #fff;
        padding: 24px 22px 22px 10px;
        overflow: hidden;

    } 
    * html #globalNav li .sub .menu {
        padding-left: 0;
    }
    *:first-child+html #globalNav li .sub .menu {

    }
        #globalNav li .sub .menu .otherFeatures {
            margin: 0;
            padding: 24px 0 0 0;
            clear: both;
            text-align: right;
            line-height: 14px;
        }
        * html #globalNav li .sub .menu .otherFeatures {
            padding: 20px 0 0 0;
        }
        *:first-child+html #globalNav li .sub .menu .otherFeatures {
            padding: 10px 0 0 0;
        }
            #globalNav li .sub .menu .otherFeatures a {
                text-shadow: none;
                float: none;
                font-weight: normal;
                height: auto;
                margin: 0;
                padding: 0;
                line-height: 14px;
                color: #787878;
                text-decoration: none;
            }
            #globalNav li .sub .menu .otherFeatures a:hover {
                text-decoration: underline;
                background: none;

            }
        #globalNav li .sub .menu ul {
            display: block;
            float: left;
            width: 150px;
            margin-left: 10px;
        }
            #globalNav li .sub .menu ul li {
                background: none;
                float: none;
                line-height: 21px;
                margin: 0;
                margin-bottom: 3px;
                padding: 0;
                height: auto;
            }
            #globalNav li .sub .menu ul li.title {
                line-height: 24px;
                font-size: 14px;
                color: #2c4d98;
                padding: 4px 0 5px 0;
                border-bottom:dotted 1px #af0040;
            }
                #globalNav li .sub .menu ul li.title a {
                    font-size: 18px;
                    color: #2c4d98;
                }
            #globalNav li .sub .menu ul li.separator {
                padding: 0 0 18px 0;
                margin: 0 0 18px 0;
                border-bottom: 1px solid #e7e7e7;
            }
                #globalNav li .sub .menu ul li a {
                    background: none;
                    float: none;
                    color: #787878;
                    text-shadow: none;
                    text-decoration: none;
                    padding: 4px 0;
                    margin: 0;
                    font-size: 12px;
                    line-height: 19px;
                    /*font-weight: bold;*/
                }
                * html.rtl #globalNav .sub .menu ul li a {
                    display: inline-block;
                    line-height: 19px;
                    height: 19px;
                    padding: 0 0 4px 0;
                }
                *:first-child+html.rtl #globalNav .sub .menu ul li a {
                    display: inline-block;
                    line-height: 19px;
                    height: 19px;
                    padding: 0;
                }
                #globalNav li .sub .menu ul li a:hover {
                    background: none;
                    text-decoration: underline;
                    padding: 4px 0;
                }
                * html.rtl #globalNav li .sub .menu ul li a:hover {
                    padding: 0 0 4px 0;
                }
                *:first-child+html.rtl #globalNav .sub .menu ul li a:hover {
                    padding: 0;
                }
                #globalNav li .sub .menu ul li.sublink a {
                    font-weight: normal;
                }
#globalNav li.singleColumn .sub {
    left: 50%;
    margin-left: -180px;/*Customized- default:-98px*/
    top: 60px;
    width: 400px;
}
html.rtl #globalNav li.singleColumn .sub {
    left: auto;
    right: 50%;
    margin-left: 0;
    margin-right: -98px;
}
* html.rtl #globalNav li.singleColumn .sub {
    left: auto;
    right: 50%;
    margin-left: 0;
    margin-right: -98px;
}
#globalNav li.fourColumns .sub {
    left: 0;
    top: 60px;/*kp*/
}
* html #globalNav li.fourColumns .sub {
    width: ;
    top: 60px;/*kp*/
}
*:first-child+html #globalNav li.fourColumns .sub {
    width: ;
    top: 60px;/*kp*/
}
#globalNav li .pointer {
    height: 24px;
    width: 100%;
    position: relative;
    top: 47px;/*kp*/
    left: 50%;
    margin-left: -50%;
    display: none;
    z-index: 10000;
    background: url('../Images_v4/Master/NavMenu.png') no-repeat center 5px;
    font: 1px/1px monospace;
}
html.rtl #globalNav li .pointer {
    left: auto;
    right: 50%;
    margin-left: 0;
    margin-right: -50%;
}
* html #globalNav li .pointer {
    top: 47px;/*kp*/
    left: -50%;
    width: 100%;
    height: 21px;
    float: left;
    margin: 0 -10px 0 -13px;
    padding: 0;
    background: url('../Images_v4/Master/NavMenu.png') no-repeat center 5px;
}
* html.rtl #globalNav li .pointer {
    left: auto;
    right: -50%;
    float: right;
}
*:first-child+html #globalNav li .pointer {
    top: 47px;/*kp*/
    float: left;
    width: 100%;
    height: 13px;
    left: -50%;
    margin: 0 -50%;
    padding: 11px 0 0 100%;
}
#globalNav li:hover .pointer {
    display: block;
    -webkit-animation-name: fadein;
    -webkit-animation-duration: .3s;
    -webkit-animation-iteration-count: once;
    -webkit-animation-direction: normal;
    -webkit-animation-timing-function: ease-out;
}
#googleInput {
    border: 0;
    background: 0;
}

#awesomeHeader,
.awesomeHeader {
    font-size: 14px;
    line-height: 21px;
    font-family: Arial,Helvetica,sans-serif;
    color: #666666;

    -webkit-font-smoothing: antialiased;
    height: 115px;
    margin: 0 0 0 0;
    background: #787878;
    position: relative;
    z-index: 9999;
}

    body.business #awesomeHeader,
    body.business .awesomeHeader {
        background: #787878;
        margin: 0;
    }

    body.business #secure a, body.business #secure p {
        /*text-shadow: 0 1px 0 #4B465A;*/
    }

    #awesomeHeader #header,
    .awesomeHeader #header {
        width: 940px;
        margin: 0 auto;
        position: relative;
    }

.NavIcon_Administration
{
        background-image: url(../Images_v4/Master/NavIcon_Administration.png);
        background-repeat: no-repeat;
        background-position:center center;
        float: left;
        margin: 0px;
        padding: 0px;
        height: 45px;
        width: 35px;
}

.NavIcon_Operation
{
        background-image: url(../Images_v4/Master/NavIcon_Operation.png);
        background-repeat: no-repeat;
        background-position:center center;
        float: left;
        margin: 0px;
        padding: 0px;
        height: 45px;
        width: 35px;
}

.NavIcon_Reports
{
        background-image: url(../Images_v4/Master/NavIcon_Reports.png);
        background-repeat: no-repeat;
        background-position:center center;
        float: left;
        margin: 0px;
        padding: 0px;
        height: 45px;
        width: 35px;
}

.NavIcon_Settings
{
        background-image: url(../Images_v4/Master/NavIcon_Settings.png);
        background-repeat: no-repeat;
        background-position:center center;
        float: left;
        margin: 0px;
        padding: 0px;
        height: 45px;
        width: 35px;
}
#globalNav nav ul li:hover
{
    /*background: transparent url('../Images_v4/Master/NavMenu.png') no-repeat -300px -88px;*/
}
#globalNav nav ul li a:hover
{
    color:Black;
}

#globalNav nav ul li
{
    padding-left:10px;
    padding-right:10px;
}
.Main_Nav
{
        width: 600px;
        height:73px;
        float: right;
        min-width:400px;
        margin: 0px;
        padding:10px 5px 0px 20px;
        background-color:blue;
        background-repeat:no-repeat;
        background-position:0px 10px;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:58:09.623

也许使用 jQuery 你可以

```
$('.fourColumns > a').mouseover(function() {
$('select').blur();
}; 
```

这可能是错误的，但我希望它能传达我的意图。

干杯

更新：以下将在小提琴中起作用；也许您可以在您的网站上使用类似的东西：

```
$('nav ul li').mouseover(function() {
$('select').hide();
});

$('nav ul li').mouseout(function() {
$('select').show();
});​ 
```

[http://jsfiddle.net/BTCBL/29/](http://jsfiddle.net/BTCBL/29/)

再次更新：此替代方案使用较少的字符，并在折叠选项时使 Select 可见：

```
$('nav ul li').mouseover(function() {
$('select').hide().blur().show();
}); 
```

[http://jsfiddle.net/BTCBL/33/](http://jsfiddle.net/BTCBL/33/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:57:39.217

您能否尝试将选择标签和表（其父级）的 z-index 设置为 0？我在这里没有看到选择标签的 z-index 属性。我不确定，但它应该工作。

# c# - WP8错误媒体播放器无法启动

> ID：13395326
> 
> 赞同：2
> 
> 时间：2012-11-15T10:13:57.713
> 
> 标签：c#, video, windows-phone-8

我正在尝试在我的 Windows Phone 应用程序中播放一个小视频文件。很基本

```
 void StartMediaPlayer()
    {
        MediaPlayerLauncher mediaPlayerLauncher = new MediaPlayerLauncher();

        mediaPlayerLauncher.Media = new Uri("/Assets/video/video1.wmv", UriKind.Relative);
        mediaPlayerLauncher.Location = MediaLocationType.Install;

        mediaPlayerLauncher.Controls = MediaPlaybackControls.All;
        mediaPlayerLauncher.Orientation = MediaPlayerOrientation.Landscape;

        mediaPlayerLauncher.Show();
    } 
```

我在图像点击事件中称其为 void，这就是发生的事情

![在此处输入图像描述](../Images/d30625627361f295cebc73ed933a3ff1.png)

调试器显示错误在这里：`mediaPlayerLauncher.Show();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:00:44.860

该错误将被抛出应用程序无法`/Assets/video/video1.wmv`在手机的安装目录中找到您的文件。确保您的视频在您的项目中，并设置为构建类型“内容”。您也可以打开 XAP 文件以仔细检查它是否位于正确的相对位置（它只是一个重命名的 ZIP 文件存档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:12:30.740

如果有些人有同样的问题，请注意文件应该在主目录中

```
mediaPlayerLauncher.Media = new Uri("video1.wmv", UriKind.Relative); 
```

# iphone - iPhone\iPad 后显示细线 . 负边距不能解决问题

> ID：13395333
> 
> 赞同：2
> 
> 时间：2012-11-15T10:14:29.957
> 
> 标签：iphone, ipad, html, rendering, lines

我正面临一个问题，即我正在开发的为移动设备提供页面的门户无法在 iPhone 上正确显示 - 出现了一些水平线，我后来发现这是一个渲染问题。我还了解到在 Lumia 800 中查看时也会出现线条，尽管我尚未在该设备中对其进行测试。

我也经历过讨论类似问题的线程：
[用 iPad 查看的网页上的细灰/黑线](https://stackoverflow.com/questions/4780896/thin-gray-black-lines-on-web-page-viewed-with-ipad)
[移动 Safari 中的线条伪影](https://stackoverflow.com/questions/3903106/line-artifacts-in-mobile-safari)
[Safari 移动中的渲染边框错误 在](https://stackoverflow.com/questions/3015193/rendering-borders-bug-in-safari-mobile)
[iPad 上呈现时，我的网站上出现了神秘的水平线](https://stackoverflow.com/questions/4225255/mysterious-horizontal-lines-on-my-site-when-rendered-on-ipad)

但他们中的大多数人建议使用某种方式将边距减少 1 或 2 个像素（负边距）并使用相同数量的填充将其恢复。

```
.iosfix{  
margin-top: -1px;  
margin-bottom: -1px;  
padding-top: 1px;  
padding-bottom: 1px;  
} 
```

但这会暴露背景颜色，这是不希望的。我无权更改此类 div 的背景颜色，因为在我的要求中，要显示的内容、颜色样式、布局等都是动态构建的，我无法摆弄这些更改。

我无法在这里发布我的确切代码，但我看到另一个用户在另一个论坛上发布了一个非常相似的问题。以下是该站点：
[http](http://aaa.dev.energetica.com.au/)
://aaa.dev.energetica.com.au/ 它在桌面浏览器中正常呈现，但在 iPhone（我使用 3GS）中出现了水平线。

1.  既然已经确定它是 Mobile Safari 的浏览器问题，并且特别考虑到 iOS 6 已经发布，那么这个问题的官方修复是什么而不是“妥协”？
2.  是否有任何特定于 iOS 的标签来指示浏览器不应在图像周围应用平滑效果？
3.  在嵌套 div 的情况下，仅对最外层的 div 应用修复就足够了吗？

希望能帮助解决问题，谢谢！

# c - 如何在函数中使用数组指针？

> ID：13395337
> 
> 赞同：1
> 
> 时间：2012-11-15T10:14:38.027
> 
> 标签：c, arrays, pointers

我必须编写一个程序，该程序具有一个函数，该函数将数组中的所有正数相加，但使用函数参数数组作为指针。当我尝试调用 sum 函数时，在 main 函数中出现问题。这是我的源代码：

```
#include <stdio.h>
#include <conio.h>
int posit(int *x[], int n){
  int s=0;
  for(int i=0; i<n; i++){
    if(*x[i]>0){
      s=s+*x[i];
    }
  }
  return s;
}
int main(){
  int k;
  scanf("%d",&k);
  int a[k];
  for(int i=0; i<k; i++){
    scanf("%d",&a[i]);
  }
  int b=posit(&a,k);
  printf("%d\n", b);
  getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:17:25.363

当一个数组被传递给一个函数时，它会衰减为指向其第一个元素的指针。将函数的签名更改为：

```
int posit(int* x, int n){ /* Equivalent to 'int posit(int x[], int n)' */ 
```

并将函数中数组的元素访问语法从`*x[i]`更改为 just `x[i]`。调用函数：

```
int b=posit(a,k); 
```

值得一提的另一点是检查 的返回值[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)，它返回所做的赋值次数，以确保`&a[i]`实际被赋值并且程序随后没有使用未初始化的变量。

您可能会发现 C FAQ 的[数组和指针](http://c-faq.com/aryptr/index.html)部分很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:36:26.473

实际上，在您的示例中，您将函数指针传递给指针（请注意，类似的符号经常与 main argument 一起使用`char *argv[]`）。

正如 hmjd 帖子中提到的，在将数组传递给函数时，它被转换为其第一个元素的地址。除了显式使用指针 ( `int *x`)，您还可以使用数组表示法 (`int[]`甚至`int[k]`)，但它们是相同的。

另请注意，在第二种方法 ( `int[k]`) 中提供的大小无关紧要，并且内部函数将是未知的。当您处理多维数组时，这仅对包含大小很重要，但这是另一回事......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:01:51.630

来自 K&R2

```
When an array name is passed to a function, what is passed is the 
location of the initial element. Within the called function, this 
argument is a local variable, and so an array name parameter is a 
pointer, that is, a variable containing an address. 
```

因此，您只会将第一个元素传递给函数。

一旦理解了这一点，您的来源可以修改如下

```
int posit(int *x, int n) 
```

并从 main 调用此函数，您可以使用

`int b=posit(a,k); //Note only the location of the first element is being passed`

# java - 在 Android 中，是否有类似 PRODUCT_PACKAGE_OVERLAYS 的 java 源代码？

> ID：13395338
> 
> 赞同：2
> 
> 时间：2012-11-15T10:14:41.610
> 
> 标签：java, android, build

PRODUCT_PACKAGE_OVERLAYS 很好。但它用于某种资源。我们维护着许多 Android 项目。实际上，不仅资源而且 java 代码也因设备而异。Java 不是 C，它不支持 MACRO。所以很难将所有修改保存在一个代码副本中。我需要 PRODUCT_PACKAGE_OVERLAYS 之类的东西，它可以通过其他地方的同名文件覆盖主树中的 java 代码。那可能吗？或者你们可以分享关于如何管理多个 android 项目源代码的想法吗？

# java - 退出方法的方式

> ID：13395339
> 
> 赞同：4
> 
> 时间：2012-11-15T10:14:55.000
> 
> 标签：java

有什么方法可以退出该方法吗？听说有两种退出方式。

**一：**抛出异常。

```
public void dosomething() {
    if(...) {
        throw new MyException();
    }
             // there might be another process.

} 
```

**二：**返回一些值。即使是 void 方法，我们也可以返回值。

```
public void dosomething() {
    if(...) {
        return;
    }
             // there might be another process.
} 
```

问题是，有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:17:12.433

从技术上讲，您可以`System.exit(int)`（int 值将是从*进程*返回的值，并且可能非零表示错误）。然而，这有点残酷。

你也可以打断自己。

```
Thread.currentThread().interrupt(); 
```

然而：

1.  这仍然是一个例外。你没有明确地抛出它，但它仍然会导致`InterruptedException`
2.  您的线程*必须*随后执行一些 IO/睡眠操作才能注册此中断。如果它只是计算性的，那么它不会因此而退出。

例如（注意`sleep()`捕捉中断）：

```
public class Test {
  public static void method() throws Exception {
    Thread.currentThread().interrupt();
    Thread.sleep(100);
    System.out.println("method done");
  }
  public static void main(String[] args) throws Exception {
    method();
    System.out.println("done");
  }
} 
```

给我：

```
Exception in thread "main" java.lang.InterruptedException: sleep interrupted
        at java.lang.Thread.sleep(Native Method)
        at T.method(T.java:5)
        at T.main(T.java:9) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:17:31.730

还有第三种虽然不是很有用的方法：

```
System.exit(0); 
```

如果您出于学术目的问这个问题......

您抛出异常的事实并不一定意味着您正在退出该方法。例如，如果您这样做：

```
try {
    throw  new Exception();
    // ...
} catch (Exception e) {
    // ...
} 
```

你不会退出该方法。

此外，如果您正在调用一个`void`方法，它将在方法主体中的最后一条语句之后退出（隐式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:23:27.873

您可以使用

```
Thread.currentThread().stop(); 
```

它将终止当前线程而不停止整个 JVM。

但

`stop()`方法已被弃用并且本质上是不安全的。从规范：

> 这种方法本质上是不安全的。使用 Thread.stop 停止线程会导致它解锁所有已锁定的监视器（这是未经检查的 ThreadDeath 异常沿堆栈传播的自然结果）。如果以前受这些监视器保护的任何对象处于不一致状态，则损坏的对象将对其他线程可见，从而可能导致任意行为。

因此，如果您需要退出某个方法并且不能`return`或抛出异常，请让该方法在其自己的线程中运行，并在必要时终止该线程。请注意，这不是标准程序，而是更多的 hack。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:29:12.583

这也可以考虑？

```
 public void test(){
             System.out.println("Do My work");
             String s = null;
             s.length();
             System.out.println("Do My  other work");

    } 
```

# jquery - 如何做一个for循环来让这段代码更有效率？

> ID：13395342
> 
> 赞同：0
> 
> 时间：2012-11-15T10:14:58.053
> 
> 标签：jquery, xml, ajax, performance

我是一名涉足 jQuery 的设计师，这对我来说是一个非常陡峭的学习曲线，我知道它非常强大，但我努力避免数百万行代码，而且似乎仍然是硬编码，我很确定可以减少和软化。我想知道是否有人可以就以下代码示例提出建议？我是否应该将它组合成一个循环，如果可以的话，有人能指出我正确的方向吗？是否需要硬编码并添加每个选择器？

```
$(xml).find('Data').each(function(){

  $('#saved').val($(this).find('saved').text());
  $('.jobrole').text($(this).find('jobrole').text());
  $('#psu1').val($(this).find('psu1').text());    
  $('#psu2').val($(this).find('psu2').text());
  $('#psu3').val($(this).find('psu3').text());
  $('#tsu1').val($(this).find('tsu1').text());
  $('#tsu2').val($(this).find('tsu2').text());
  $('#tsu3').val($(this).find('tsu3').text());
  $('#pm1').val($(this).find('pm1').text());
  $('#pm3').val($(this).find('pm3').text());
  $('#tm1').val($(this).find('tm1').text());
  $('#tm3').val($(this).find('tm3').text());
}); 
```

任何建议将不胜感激。我已经开始研究 MVC 框架，这会有所帮助/这是前进的方向吗？

最亲切的问候雷切尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:16:51.683

这是基本思想：

```
var xmlelement = $(this);
$('[id^="psu"],[id^="tsu"],[id^="pm"],[id^="tm"]').each(function(){
   $(this).val(xmlelement.find($(this).attr('id')).text());
}); 
```

还要注意 jQuery 需要小写标签，所以你需要使用这个：

```
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​$(xml).find('data').each(function(){ 
```

* * *

完整的代码可能是（取决于您的输入和您的 xml）

```
$(xml).find('data').each(function(){
    var xmlelement = $(this);
    $('.jobrole').text($(this).find('jobrole').text());
    $('input').each(function(){
       var text = xmlelement.find($(this).attr('id')).text();
       if (text.trim()) $(this).val(text);
    });
}); 
```

[示范](http://jsfiddle.net/dystroy/9WfLB/)

请注意，在这段代码中，我必须防止 Data 元素没有某些元素。如果没有这个测试（`if (text.trim())`），只有最后一个数据会影响你的输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:38:09.497

基本减少重复行：

```
$(xml).find('Data').each(function(){
  var ids = ['saved', 'psu1', 'psu2', 'psu3', 'tsu1', 'tsu2', 'tsu3',
             'pm1', 'pm3', 'tm1', 'tm3'];

  $('.jobrole').text($(this).find('jobrole').text());

  for(var idx = 0; idx < ids.length; ++idx) {
      $('#'+ids[idx]).val($(this).find(ids[idx]).text());
  }
}); 
```

然后也许在`ids`其他地方构建数组并将其传递，因为我猜这些来自其他一些代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:55:50.107

我可能会按照以下方式做一些事情：

```
$(xml).find('data').children().each(function(){
    var $self = $(this);
    var nodeName = this.nodeName.toLowerCase();
    var identifier = nodeName == 'jobrole' ? '.' : '#';

    $(identifier + nodeName ).val($self.text());
}); 
```

这是小提琴（改编自@dystroy 的原版）：http: [//jsfiddle.net/lnrb0b/xeNdQ/](http://jsfiddle.net/lnrb0b/xeNdQ/) 你可以看到我假设了小写的类/ id 值。我还假设您在 xml 中不会有太多重复。

在生成的 xml 中留下两个`<data>`元素，以防万一你有多个。

# responsive-design - Prestashop 响应式主题在移动设备中不起作用

> ID：13395345
> 
> 赞同：1
> 
> 时间：2012-11-15T10:15:07.723
> 
> 标签：responsive-design, prestashop

我为 prestashop 1.5.2 开发了响应式设计。当我使用一些在线模拟器（如 quirktools.com）来测试页面时，它工作正常并且所有页面都正常加载。当我在移动设备上进行测试时，页面像在模拟器中一样正常调用，但链接不起作用。

# wordpress - 如何在wordpress中为.js文件创建模板路径

> ID：13395352
> 
> 赞同：3
> 
> 时间：2012-11-15T10:15:28.177
> 
> 标签：wordpress

我刚刚了解如何为 .js 文件创建模板路径-

```
<script type="text/javascript" src="<?php bloginfo( 'template_directory' ); ?>js/scripts.js" ></script> 
```

但在我的“scripts.js”文件中包含一些 .js 文件，如下所示：

> 包括（'js/jquery.easing.1.3.js'）；
> 
> 包括（'js/jquery-ui-1.8.11.custom.min.js'）；
> 
> 包括（'js/jquery.transform-0.9.3.min.js'）；
> 
> 包括（'js/jquery.animate-colors-min.js'）；
> 
> .....等等

any1 请帮助我如何以最简单的方式为那些包含的 .js 文件创建路径。我是 wordpress 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:21:04.857

您可能只需将其更改为

```
include( "jquery.easing.1.3.js" ); 
```

等等所以没有“js/”。

如果我理解正确，您将在同一目录中的 javascript 文件 scripts.js 中包含文件。

包含不带前缀的文件`/`总是意味着您正在搜索当前目录。所以基本上，你试图包含`js/js/jquery.easing.1.3.js`不存在的。

编辑：如果您尝试在 Javascript 文件中使用 PHP 包含，它将不起作用。无论如何，您都不应该在 Javascript 文件中进行包含，只需在包含 scripts.js 的文件中执行此操作即可：

```
<script type="text/javascript" src="<?php get_bloginfo('template_url'); ?>js/scripts.js" ></script>
<script type="text/javascript" src="<?php get_bloginfo('template_url'); ?>js/jquery.easing.1.3.js" ></script> 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:32:42.753

这是在主题中包含 JS 文件的代码：

```
include(get_bloginfo('template_url') . 'js/jquery.easing.1.3.js');
include(get_bloginfo('template_url') . 'js/jquery-ui-1.8.11.custom.min.js');
include(get_bloginfo('template_url') . 'js/jquery.transform-0.9.3.min.js');
include(get_bloginfo('template_url') . 'js/jquery.animate-colors-min.js'); 
```

干杯

或者，如果您的目的是将所有 JS 文件内容嵌入到一个 JS 文件中，则应使用以下内容，这将使用文件的文件路径，而不是 URL 地址：

```
include(get_template_directory() . 'js/jquery.easing.1.3.js');
include(get_template_directory() . 'js/jquery-ui-1.8.11.custom.min.js');
include(get_template_directory() . 'js/jquery.transform-0.9.3.min.js');
include(get_template_directory() . 'js/jquery.animate-colors-min.js'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T10:24:54.690

`bloginfo( 'template_directory' );`

是正确的方法，因为 wordpress 主题需要完整的路径。

如果你想使用 `include()`然后使用这样的东西：

`include(bloginfo('template_directory') . 'js/jquery.easing.1.3.js')`

# c# - 检查剪贴板是否包含图像或图像文件

> ID：13395356
> 
> 赞同：0
> 
> 时间：2012-11-15T10:15:38.783
> 
> 标签：c#, clipboard, idataobject

我想检查剪贴板是否包含图像或图像格式的文件。我想做这样的事情：

```
 private void myMethod()
    {
        //Check if the clipboard contains an image or a file, that is in image format.
        if (IsClipboardImage())
        {
            //Do important code
        }
        else
        {
            //Do nothing
        }
    }
    private bool IsClipboardImage()
    {
        if (Clipboard.ContainsImage())
            return true;
        else if ( /* code to check if is an image file? */ )
            return true;
        else
            return false;
    } 
```

我被告知要使用 IDataObject，但是使用它 - 我将如何检查它是否是一个图像文件？

如果您是来自网络的图像，我的代码有效`right click > copy`，但如果它来自我的文档，则它不起作用。任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:26:19.290

我认为您可以使用[这种方式](https://stackoverflow.com/questions/4774840/determine-if-file-copied-into-clipboard-is-an-image)。如该链接所述，没有内置方法可以解决此问题，您必须尝试加载图像。如果它有效，它是一个图像，如果不忽略。希望这可以帮助

# simulation - 控制混合 Modelica 模型中的事件

> ID：13395357
> 
> 赞同：5
> 
> 时间：2012-11-15T10:15:44.137
> 
> 标签：simulation, modelica

我对 Modelica 中的混合建模范式感到困惑。一方面，事件是有用的，另一方面，它们是要避免的。让我解释一下我的情况：

我有一个大型模型，由一个社区中的多个建筑物组成，模拟了 1 年多。最初，模型运行非常缓慢。在尽可能多的 if 条件周围添加 noEvent() 极大地提高了速度。

随着开发的继续，模型的控制变得更加复杂，我又遇到了很多事件，有时间隔很短。给出一个想法：

```
Number of (model) time events : 28170
Number of (U) time events     : 0
Number of state    events     : 22572
Number of step     events     : 0 
```

这些事件会破坏输出（为了正确的后处理，我需要事件中的变量）并减慢模拟速度。而且，我感觉某些 noEvent(if...) 会导致意外行为。

我想知道在某些时间步强制我的事件并在这些时间步之间禁止它们是否是一种解决方案？理想情况下，我想根据某些条件触发这些“强制事件”。例如：白天他们应该每 15 分钟一次，每分钟都在高太阳辐射下，晚上我根本不想要事件。

这是个好主意吗？我想这会更快，因为许多状态事件将成为时间事件？如何使用 Modelica 3.2（在 Dymola 中）做到这一点？

预先感谢所有答案。罗尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T19:39:35.237

几点评论。

首先，如果您有一个包含大量事件的模拟（相对于模拟的总持续时间），我鼓励您做的第一件事是使用低阶积分器。这里的要点是，高阶积分器通常允许您采取更长的时间步长。但是，如果这些步骤不断被事件截断，它们最终会变得非常昂贵。

其次，您可以尝试固定步长积分器。根据工具的不同，他们可能会在固定时间步长积分器的上下文中实现这种“池事件并立即触发它们”的方法。但是规范并没有真正说明工具应该如何处理在固定时间步之间发生的事件。

第三，解决此问题的另一种方法是自己“汇集”您的事件。我能想到的最简单的方法是获取当前生成事件的所有语句并将它们包装在“when sample(...,...) then”语句中。这样，您可以确保仅在特定时间间隔触发事件。这将比固定时间步长方法更便携。我认为这是您在问题中实际提出的，但重要的是要指出它不应该基于时间步长（模型没有时间步长的概念），而是基于模型指定的采样间隔（这将，在实践中，完全独立于时间步长）。

正如您所指出的，使用“sample(...,...)”会将这些转换为时间事件，是的，这应该更快。

# c# - 无法使用 c# 在 asp.net 中的客户端计算机上创建 excel 文件？

> ID：13395361
> 
> 赞同：1
> 
> 时间：2012-11-15T10:16:06.273
> 
> 标签：c#, asp.net, excel, export-to-excel

我正在使用此代码在客户端机器上创建一个 excel 文件，同时按下 asp.net 中的按钮

```
 protected void excldwnlbtn4_Click(object sender, EventArgs e)
{
    write_on_excel("Vendor.xls");
    lblmsg4.Text = "File Downloaded";
} 
```

并且创建excel文件的代码是：

```
public void write_on_excel(string filepath)
{
    Excel.ApplicationClass excelApp = new Excel.ApplicationClass();
    try
    {

        Excel.Workbook workbook = (Excel.Workbook)excelApp.Workbooks.Add(Missing.Value);
        Excel.Worksheet worksheet;

        //// Opening excel file
        //workbook = excelApp.Workbooks.Open(filepath, 0, false, 5, "", "", true, Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

        workbook.SaveAs(filepath,
        Excel.XlFileFormat.xlExcel5, Missing.Value, Missing.Value,
        false, false, Excel.XlSaveAsAccessMode.xlNoChange,
        Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);

        // Get first Worksheet
        worksheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);

        // Setting cell values

        ((Excel.Range)worksheet.Cells[1, "A"]).Value2 = "Vendor Code";
        ((Excel.Range)worksheet.Cells[1, "B"]).Value2 = "Vendor Password";
        ((Excel.Range)worksheet.Cells[1, "C"]).Value2 = "Vendor Name";

        workbook.Save();
        workbook.Close(0, 0, 0);
    }
    catch (Exception)
    {
        lblmsg4.Text = "File not Downloaded!!";
    }
    finally
    {
        excelApp.Quit();
    }
} 
```

现在它在我的 IIS localhost 中工作正常..我在硬盘驱动器中获得了一个带有这些列标题的空 excel 文件....但是当我将它托管在服务器中并使其生效时，我无法创建excel文件...我收到一个错误：

```
Server Error in '/' Application.

The resource cannot be found. 
```

我该怎么办？？我的错在哪里？请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:19:44.203

那将永远不会在浏览器客户端的机器上创建文件（除非该机器是破坏 Web 服务器的机器）。

例如，如果要允许浏览器客户端下载文件，则需要将其直接写入响应流。查看此线程上排名最高的答案以获取更多信息

[单击按钮时下载 ASP.NET Excel 文件](https://stackoverflow.com/questions/6878525/asp-net-excel-file-download-on-button-click)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:29:11.780

我在这里看到了几个问题。

一是，您希望 Excel 出现在服务器上。如果您不确定它是否存在，它可能不存在，您的应用程序应该检查它。基本上，如果您在尝试实例化 Excel 对象时遇到异常，则说明 Excel 不存在或您无权执行它。

其次，您将输出文件（如果可以生成的话）本地保存在服务器上。这不会神奇地将文件发送到客户端。您必须自己发送文件；最好不要在服务器上创建本地副本，而是让您的 ASP.NET 页面将 Excel 文件输出到流中；客户端接收流。有关更多信息，请参见此处：[http ://www.gemboxsoftware.com/support/articles/asp-net-excel](http://www.gemboxsoftware.com/support/articles/asp-net-excel)

最后，还有其他方法可以生成 Excel 文件。您可以使用 OpenXML 之类的库（请参阅[http://openxmldeveloper.org/](http://openxmldeveloper.org/)），或者您可以使用内置`System.Xml`类生成 Excel 可以读取的 XML 文件。还有一些商用库可用于在 .NET 中处理 Excel 文件，例如 Aspose Cells（参见[http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default。 .aspx](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx)）。

# iphone - UITableView 部分周围的阴影

> ID：13395362
> 
> 赞同：8
> 
> 时间：2012-11-15T10:16:15.947
> 
> 标签：iphone, objective-c, ios, uitableview, shadow

我有`UITableView`4 个部分。现在我想为表格的特定部分而不是整个表格添加阴影效果。我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:30:10.857

您将不得不更改部分的页眉和页脚以及该部分的所有单元格。

使用`tableView:viewForFooterInSection:`,`tableView:viewForHeaderInSection:`并`tableView:cellForRowAtIndexPath:`为此。只需添加一个带有 rgba 0/0/0/0.2 或类似于您想要变暗的每个视图的 UIView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:34:53.487

您可以添加带有阴影的图像作为 UITableViewCell 的背景。应该在图像中绘制阴影。它非常简单，您的应用程序将运行得更快。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T10:45:53.713

您可以指定所需部分的阴影。这是一个示例。

首先，我们为您的标题腾出一些空间

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    if(section == mysection)
    {
        // Returns the height you want for the header section. I am giving 20
        return 20; 
    }
} 
```

然后是表头的装饰

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    if(section == mysection)
    {
        UIView *shadowView  =  [[[UIView alloc] initWithFrame: CGRectMake(0,0,320,20)] autorelease];
        shadowView.backgroundColor = [UIColor whiteColor];

        // Doing the Decoration Part
        shadowView.layer.shadowColor = [[UIColor blackColor] CGColor];
        shadowView.layer.shadowOffset = CGSizeMake(1.0f, 1.0f);
        shadowView.layer.shadowRadius = 3.0f;
        shadowView.layer.shadowOpacity = 1.0f;

        return shadowView;
    }
    return nil;
} 
```

在你身边完成它。这是一个基本的大纲。快乐编码:)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-15T10:28:47.833

试试这个全表阴影

```
yourView.layer.shadowColor = [[UIColor blackColor] CGColor];
yourView.layer.shadowOffset = CGSizeMake(1.0f, 1.0f);
yourView.layer.shadowRadius = 3.0f;
yourView.layer.shadowOpacity = 1.0f; 
```

试试这个部分阴影

```
override func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {

    if (cell.responds(to: #selector(getter: UIView.tintColor))){
        if tableView == self.tableView {
            let cornerRadius: CGFloat = 12.0
            cell.backgroundColor = .clear
            let layer: CAShapeLayer = CAShapeLayer()
            let path: CGMutablePath = CGMutablePath()
            let bounds: CGRect = cell.bounds
            bounds.insetBy(dx: 25.0, dy: 0.0)
            var addLine: Bool = false

            if indexPath.row == 0 && indexPath.row == ( tableView.numberOfRows(inSection: indexPath.section) - 1) {
                path.addRoundedRect(in: bounds, cornerWidth: cornerRadius, cornerHeight: cornerRadius)

            } else if indexPath.row == 0 {
                path.move(to: CGPoint(x: bounds.minX, y: bounds.maxY))
                path.addArc(tangent1End: CGPoint(x: bounds.minX, y: bounds.minY), tangent2End: CGPoint(x: bounds.midX, y: bounds.minY), radius: cornerRadius)
                path.addArc(tangent1End: CGPoint(x: bounds.maxX, y: bounds.minY), tangent2End: CGPoint(x: bounds.maxX, y: bounds.midY), radius: cornerRadius)
                path.addLine(to: CGPoint(x: bounds.maxX, y: bounds.maxY))

            } else if indexPath.row == (tableView.numberOfRows(inSection: indexPath.section) - 1) {
                path.move(to: CGPoint(x: bounds.minX, y: bounds.minY))
                path.addArc(tangent1End: CGPoint(x: bounds.minX, y: bounds.maxY), tangent2End: CGPoint(x: bounds.midX, y: bounds.maxY), radius: cornerRadius)
                path.addArc(tangent1End: CGPoint(x: bounds.maxX, y: bounds.maxY), tangent2End: CGPoint(x: bounds.maxX, y: bounds.midY), radius: cornerRadius)
                path.addLine(to: CGPoint(x: bounds.maxX, y: bounds.minY))

            } else {
                path.addRect(bounds)
                addLine = true
            }

            layer.path = path
            layer.fillColor = UIColor.white.withAlphaComponent(0.8).cgColor

            if addLine {
                let lineLayer: CALayer = CALayer()
                let lineHeight: CGFloat = 1.0 / UIScreen.main.scale
                lineLayer.frame = CGRect(x: bounds.minX + 10.0, y: bounds.size.height - lineHeight, width: bounds.size.width, height: lineHeight)
                lineLayer.backgroundColor = tableView.separatorColor?.cgColor
                layer.addSublayer(lineLayer)
            }

            let testView: UIView = UIView(frame: bounds)
            testView.layer.insertSublayer(layer, at: 0)
            testView.backgroundColor = .clear
            cell.backgroundView = testView
        }
    }
} 
```

# windows-mobile-6 - 在 Windows Mobile 6.0 中使用外部 Spinner 控件

> ID：13395369
> 
> 赞同：1
> 
> 时间：2012-11-15T10:16:41.443
> 
> 标签：windows-mobile-6

我在我的项目中使用 slideUI 控件。有一个微调器控件用作等待光标。我想在列表中加载数据时显示微调器。但是当我尝试显示微调器时，它会显示为图像而不是旋转图像。

下面是我的代码。

```
 private void uiButton_Click(object sender, EventArgs e)
    {
        ShowFrame(this.uiPanel1);

        Application.DoEvents();

        LoadList();

        HideFrame(uiPanel1);

    }

    private void LoadList()
    {
        try
        {
            //Call the BeginAddControls before starting manipulations with UIList 
            uiList1.BeginAddControls();

            for (int i = 0; i < 100; i++)
            {
                UIListItem item = new UIListItem();
                item.Text = "Primary Text" + i;
                item.SecondaryText = "This is secondary text..";
                item.ItemStyle = UIListItemStyle.SingleText;
                item.Height = Utils.CalcScaleSize(38);
                item.BackColor = System.Drawing.SystemColors.Window;
                item.BackEndColorSelected = System.Drawing.SystemColors.Highlight;
                item.BackStartColorSelected = System.Drawing.SystemColors.Highlight;
                item.BottomBorderColor = System.Drawing.Color.Gainsboro;
                item.Buffering = true;
                item.ColorScheme = SlideUI.UIColorSchemesCustom.Orange;
                item.Dock = System.Windows.Forms.DockStyle.Top;
                item.GroupArrowColor = System.Drawing.Color.Gray;
                item.GroupArrowColorSelected = System.Drawing.Color.White;
                item.IconQVGA = null;
                item.IconSize = new System.Drawing.Size(25, 31);
                item.IconTransparent = false;
                item.IconTransparentColor = System.Drawing.Color.Transparent;
                item.IconVGA = null;
                item.IconVisible = true;
                item.InheritParentSettings = true;
                item.IsGroup = false;
                item.IsSelected = false;
                item.SecondaryTextColor = System.Drawing.SystemColors.GrayText;
                item.SecondaryTextColorSelected = System.Drawing.SystemColors.HighlightText;
                item.SecondaryTextFont = new System.Drawing.Font("Tahoma", 8F, System.Drawing.FontStyle.Regular);
                item.TextColor = System.Drawing.SystemColors.WindowText;
                item.TextColorSelected = System.Drawing.SystemColors.HighlightText;
                item.TextFont = new System.Drawing.Font("Tahoma", 9F, System.Drawing.FontStyle.Bold);
                item.UseGradient = true;
                item.VirtualBufferRendered = false;

                uiList1.AddControl(item);
            }

            //Call of EndAddControls method when the UIListItems binding is done  
            uiList1.EndAddControls();
            //HideFrame(uiPanel1);
            //ShowFrame(this.panel1, "Panel1");
        }
        catch (Exception ex)
        {
            UIMessageBox.Show(this, ex.Message, "Error", MessageBoxButtons.OK,
                   UIMessageIcons.Done, UIColorSchemesCustom.Orange);
        }
    }

    private void ShowFrame(Panel panel)
    {
        Panel pnlPanel = new Panel();
        pnlPanel = panel;
        //pnlPanel.Location = new System.Drawing.Point(0, 0);
        pnlPanel.Show();
        pnlPanel.BringToFront();
    }

    private void HideFrame(Panel panel)
    {
        Panel pnlPanel = new Panel();
        pnlPanel = panel;
        pnlPanel.Hide();
    } 
```

提前致谢

# .net - Windows 手机 7 GPS 定位

> ID：13395373
> 
> 赞同：0
> 
> 时间：2012-11-15T10:16:51.577
> 
> 标签：.net, visual-studio-2010, windows-phone-7, c#-4.0

我需要使用 GPS 以编程方式为 windows phone 7 获取我的当前位置。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:22:31.367

GeoCoordinateWatcher 是您可以使用的类

MSDN 上的示例 - [http://msdn.microsoft.com/en-us/library/ff431744%28VS.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff431744%28VS.92%29.aspx)

# sql - 导入\导出 SQl 服务器 bacpac 文件的最新建议

> ID：13395385
> 
> 赞同：6
> 
> 时间：2012-11-15T10:17:34.647
> 
> 标签：sql, sql-server-2008-r2, azure-sql-database, bacpac

我正在尝试启动并运行 Windows Azure，但发现数据库方面非常令人沮丧。我需要将本地数据库从 SQL 2008 导出到 bacpac 文件，然后导入 Azure。我还希望能够从 Azure 导出，然后导入到我的本地数据库进行调试。

我在网上找到了一些教程来实现这一点，但每次我完成其中一个教程时，我最终都会遇到一个需要将信息或下载标记为过时的步骤的部分！它似乎随着时间的推移发生了很大变化，我找不到最新的资源

谁能提供有关如何执行此操作的更新链接？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T03:51:28.000

我遇到了同样的问题，所有关于导入/导出 .bacpac 的文档大多参考 SQL 2012。我需要将 sql 2008 R2 express 数据库导出到 azure 以及能够从 azure 导出到我的本地开发环境。

我发现**SQL 数据库迁移向导 v3.9.9 和 v4.0.12**可以解决问题。

下载链接：[http ://sqlazuremw.codeplex.com/releases/view/32334](http://sqlazuremw.codeplex.com/releases/view/32334)

还下载文档，它将完成 .bacpac 与 azure 和本地服务器之间的迁移。该工具的优点在于它将对数据库执行兼容性检查，以确保它已准备好部署到 azure。

我还研究了另一个命令行工具 sqlpackage.exe，它可以作为**Microsoft SQL Server Data Tools的一部分下载**

下载链接：http: [//msdn.microsoft.com/en-us/data/hh297027](http://msdn.microsoft.com/en-us/data/hh297027 "http://msdn.microsoft.com/en-us/data/hh297027")

以下是导出 .bacpac 文件的示例：

```
sqlpackage.exe /a:Export /ssn:SERVERNAME\sqlexpress /sdn:SOURCEDATABASENAME /su:DATABASEUSER /sp:DATABASEPASSWORD /tf:c:\SOURCEDATABASENAME.bacpac 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T21:06:55.483

我需要导出 SQL Azure 数据库，然后将其导入本地 SQL 2008 R2 服务器（注意我也在使用 Visual Studio 2010）。微软当然不遗余力地让这成为一项痛苦的任务，但是，我能够通过执行以下操作来做到这一点：

1.  转到链接[http://msdn.microsoft.com/en-us/jj650014](http://msdn.microsoft.com/en-us/jj650014)并安装适用于 Visual Studio 2010 的 SQL Server Data Tools

2.  这将安装在您的本地驱动器上。在我的情况下，它放在这里：C:\Program Files (x86)\Microsoft SQL Server\110\DAC\bin

3.  通过命令行或 powershell 浏览到这个

4.  您将要执行 SqlPackage.exe

5.  打开此链接以查看 SqlPackage.exe 的所有参数选项列表 ( [http://msdn.microsoft.com/en-us/library/hh550080(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh550080(v=vs.103).aspx) )

6.  这是我需要执行的命令行，以将 .bacpac 文件导入本地 SQL 2008 R2 服务器：

    .\SqlPackage.exe /a:Import /sf:C:\mydatabasefile.bacpac /tdn:NorthWind /tsn:BINGBONG

/tdn 是您希望将 bacpac 文件还原到的数据库的名称。/tsn 是您的 SQL 服务器的名称。

您可以在 #5 的链接上看到所有这些参数说明。

# c# - 如果浏览器关闭并且没有任何东西可以接收，我的 ajax 请求的数据会发生什么

> ID：13395389
> 
> 赞同：2
> 
> 时间：2012-11-15T10:17:59.577
> 
> 标签：c#, javascript, jquery, sql

在我的网站 (vb.net / c#) 中，有 javascript ajax 代码从数据库中获取数据并将 JSON 返回到我的页面。

如果在 ajax 即将接收 JSON 之前，浏览器关闭或页面被重定向，会发生什么情况，因为没有任何东西可以接收它？

我可以看到，因为 vb.net 是异步的，所以它继续运行并发送响应。但没有任何东西可以接收 - 响应会发生什么。

它不能凭空消失——从技术上讲会发生什么——我的服务器会崩溃吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T10:19:38.153

他们被吸进了虚空，再也不会被看到或听到。

也就是说，您的客户端 PC 仍将通过 TCP/IP 接收数据包，但 TCP/IP 堆栈不会将它们传送到任何地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T10:20:17.393

垃圾收集器拆除了整个交易。

一旦 HttpContext 和 Session 从用户关闭浏览器结束，只有已经开始的请求才会继续。他们将返回数据，就像有人在深夜大喊大叫一样。下一个很可能会被垃圾收集，因为 Session 已经结束并且不再需要为线程提供服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:24:10.177

我猜想运行浏览器的托管操作系统从服务器获取 TCP/IP 响应并丢弃它，因为没有应用程序在等待此数据。

# z3 - Z3：找到所有满意的模型

> ID：13395391
> 
> 赞同：38
> 
> 时间：2012-11-15T10:18:06.767
> 
> 标签：z3, smt, theorem-proving

我正在尝试使用 Z3（Microsoft Research 开发的 SMT 求解器）检索某些一阶理论的所有可能模型。这是一个最小的工作示例：

```
(declare-const f Bool)
(assert (or (= f true) (= f false))) 
```

在这个命题情况下，有两个令人满意的分配：`f->true`和`f->false`。因为 Z3（以及一般的 SMT 求解器）只会尝试找到一个令人满意的模型，所以不可能直接找到所有解决方案。[在这里](http://research.microsoft.com/en-us/um/redmond/projects/z3/smt__command.html#smt2_next_sat_example)我找到了一个有用的命令叫做`(next-sat)`，但是Z3的最新版本似乎不再支持这个。这对我来说有点不幸，总的来说我认为该命令非常有用。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-15T13:51:10.107

实现此目的的一种方法是使用其中一个 API 以及模型生成功能。然后，您可以使用从一个可满足性检查生成的模型来添加约束，以防止先前的模型值被用于后续的可满足性检查，直到没有更多令人满意的分配。当然，您必须使用有限排序（或有一些约束确保这一点），但如果您不想找到所有可能的模型（即，在生成一堆后停止），您也可以将其与无限排序一起使用.

这是使用 z3py 的示例（链接到 z3py 脚本：[http](http://rise4fun.com/Z3Py/a6MC) ://rise4fun.com/Z3Py/a6MC ）：

```
a = Int('a')
b = Int('b')

s = Solver()
s.add(1 <= a)
s.add(a <= 20)
s.add(1 <= b)
s.add(b <= 20)
s.add(a >= 2*b)

while s.check() == sat:
  print s.model()
  s.add(Or(a != s.model()[a], b != s.model()[b])) # prevent next model from using the same assignment as a previous model 
```

一般来说，使用所有涉及的常量的析取应该可以工作（例如，`a`和`b`这里）。这枚举了所有满足`a`和`b`（在`1`和之间`20`）的整数赋值`a >= 2b`。例如，如果我们限制`a`and`b`位于 and 之间`1`，`5`则输出为：

```
[b = 1, a = 2]
[b = 2, a = 4]
[b = 1, a = 3]
[b = 2, a = 5]
[b = 1, a = 4]
[b = 1, a = 5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-13T09:33:27.470

基于泰勒答案的更通用的解决方案是使用

```
while s.check() == z3.sat:  
    solution = "False"
    m = s.model()
    for i in m:
        solution = f"Or(({i} != {m[i]}), {solution})"
    f2 = eval(solution)
    s.add(f2) 
```

这允许两个以上的变量。

# c# - 使用 Ghostscript C# 将 HTML 转换为 PS

> ID：13395397
> 
> 赞同：0
> 
> 时间：2012-11-15T10:18:15.207
> 
> 标签：c#, visual-studio-2010, ghostscript

我在打印 html 文件时遇到问题，我尝试了 doc、xls 和 txt 文件，它们运行良好，但是当我提供 html 文件时，它会显示打印对话框，我必须选择 ghostscript 打印机才能工作。

我的代码是：

```
 [DllImport("Winspool.drv")]
    private static extern bool SetDefaultPrinter(string printerName);

    [ValidateInput(false)]
    public ActionResult CreatePdf(string file , string html)
    {
        SetDefaultPrinter("Ghostscript");
        Process process1 = new Process();
        if (html != null && html != "")
        { process1.StartInfo.FileName = "example.html"; }
        else
        { process1.StartInfo.FileName = file; }
        process1.EnableRaisingEvents = true;
        process1.StartInfo.Verb = "print";
        process1.StartInfo.Arguments = "\"Ghostscript PDF\"";
        process1.StartInfo.WorkingDirectory = Server.MapPath("~" + "/Export");
        process1.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        process1.StartInfo.CreateNoWindow = true;
        process1.Start();
        try
        {
            process1.WaitForExit();
        }
        catch (InvalidOperationException) { }
        process1.Dispose();
    } 
```

这应该改变我的 output.ps 文件，然后我用它来制作 pdf 文件，它工作得很好，我只需要让它适用于 html 文件。

我遵循了这两个例子：

[示例 1](http://www.codeproject.com/Articles/17574/Programmatically-Convert-Documents-to-PDFs-the-Eas) [示例 2](http://aspalliance.com/1447_Creating_PDFs_with_C_using_Ghostscript.6)

编辑：我需要这种转换才能从 html 中获取 pdf 文件，并发现 wkhtmltopdf 最适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:11:16.640

Ghostscript 不会将 HTML 文档转换（布局和渲染）为 PDF 或 PostScript，它只是一个用于处理 PostScript 和 PDF 文件的库，例如从头开始创建它们并将 PostScript 文件转换为光栅格式。

如果您想将 HTML 转换为 PDF，最好的办法是使用像 PrinceXML 这样的商业库，或者托管 WebKit。

当您的代码工作时，它通过让 Internet Explorer（或任何您的 shell-default Web 浏览器）自行进行渲染和打印来工作。这种技术在服务器端环境中不能可靠地工作。

# eclipse - Eclipse：Maven -> 更新项目导致 Eclipse -> Tomcat 7 启动问题

> ID：13395398
> 
> 赞同：2
> 
> 时间：2012-11-15T10:18:24.260
> 
> 标签：eclipse, tomcat, maven, tomcat7, pom.xml

我有一个 Maven 项目，我在 Eclipse 中使用 Tomcat 7 进行调试。问题是，当我对 pom.xml 文件进行最小更改时，例如更改 Maven 插件的版本或添加配置属性，服务器不再正常启动。我改变什么并不重要。当我使用“Debug As”启动服务器时，Apache Click 和 Shiro 不再启动，访问 localhost 会导致 Tomcat 出现 404 消息。有趣的是，即使我撤消更改，问题仍然存在。唯一有帮助的是整个项目的 GIT -> Replace With 命令。

**编辑：我发现即使我没有更改 pom.xml 中的任何内容并且只运行 Maven -> Update Project 我也有问题。**

这是一切正常时更改前的日志文件：

```
Nov 15, 2012 10:28:10 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Java\jdk1.7.0\jre\bin;C:/Program Files/Java/jdk1.7.0/bin/../jre/bin/client;C:/Program Files/Java/jdk1.7.0/bin/../jre/bin;C:/Program Files/Java/jdk1.7.0/bin/../jre/lib/i386;C:\Program Files\Java\jdk1.7.0\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\apache-maven-3.0.4\bin;C:\Program Files\Java\jdk1.7.0\bin;C:\Program Files\Eclipse JEE Indigo;;.
Nov 15, 2012 10:28:12 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:testproject' did not find a matching property.
Nov 15, 2012 10:28:12 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Nov 15, 2012 10:28:12 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Nov 15, 2012 10:28:12 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2201 ms
Nov 15, 2012 10:28:12 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Nov 15, 2012 10:28:12 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
Nov 15, 2012 10:28:13 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(D:\Data\Programming\Eclipse Workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\testproject\WEB-INF\lib\servlet-api-1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Nov 15, 2012 10:28:13 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(D:\Data\Programming\Eclipse Workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\testproject\WEB-INF\lib\servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Nov 15, 2012 10:28:13 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Shiro environment
[Click] [info ] ***  Initializing Click 2.3.0 in development mode  ***
[Click] [info ] initialized LogService: org.apache.click.service.ConsoleLogService
[Click] [info ] found jar: file:/D:/Data/Programming/Eclipse%20Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/testproject/WEB-INF/lib/click-nodeps-2.3.0.jar
[Click] [info ] Click 2.3.0 initialized in development mode
Nov 15, 2012 10:28:14 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Nov 15, 2012 10:28:14 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Nov 15, 2012 10:28:14 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2076 ms
[Click] [info ] handleRequest:  /index.htm - 57 ms 
```

这是对 pom 文件进行最小更改后的日志：

```
Nov 15, 2012 10:25:23 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Java\jdk1.7.0\jre\bin;C:/Program Files/Java/jdk1.7.0/bin/../jre/bin/client;C:/Program Files/Java/jdk1.7.0/bin/../jre/bin;C:/Program Files/Java/jdk1.7.0/bin/../jre/lib/i386;C:\Program Files\Java\jdk1.7.0\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\apache-maven-3.0.4\bin;C:\Program Files\Java\jdk1.7.0\bin;C:\Program Files\Eclipse JEE Indigo;;.
Nov 15, 2012 10:25:24 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:testproject' did not find a matching property.
Nov 15, 2012 10:25:24 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Nov 15, 2012 10:25:24 AM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Nov 15, 2012 10:25:24 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 570 ms
Nov 15, 2012 10:25:24 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Nov 15, 2012 10:25:24 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
Nov 15, 2012 10:25:39 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Nov 15, 2012 10:25:39 AM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Nov 15, 2012 10:25:39 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 14905 ms 
```

谁能解释一下这里发生了什么？我很感谢任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:01:58.093

我在 Maven 中使用 Tomcat6，我在 Eclipse 也遇到了类似的问题。有时看起来 Tomcat 卡住了，对我配置的项目完全视而不见。

当这件事发生时，我尝试这个步骤，总是测试其中一个是否已经解决了我的问题。

1.  Maven -> 项目更新
2.  F5 结束项目（通常在此时工作）
3.  清洁 Tomcat
4.  清理项目（项目>清理）
5.  删除项目（服务器上的右键 > 添加和删除），保存并再次添加。

你的怎么样`server.xml`？您的项目是 Web 应用程序吗？

不幸的是，我不知道为什么会出现这种问题，但它看起来更像是 Tomcat 的缓存问题，而不是 Maven 的问题。无论如何，这是一个每天花费我很多时间的问题。

# sql-server - 哪种存储过程编写方式更好？

> ID：13395405
> 
> 赞同：1
> 
> 时间：2012-11-15T10:18:29.877
> 
> 标签：sql-server, sql-server-2008, stored-procedures

我想写 5`SELECT`个不同类型的语句，但目的相同。

我应该为他们写 5 个单独的存储过程吗？

还是我应该编写一个存储过程并按照`CASE`样式转到特定的存储过程？

5个简单的`SELECT`语句如下：

```
SELECT a, b, c FROM table1 WHERE vv = 'ss'
SELECT a, b, c FROM table2 WHERE vv = 'ss' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:23:57.737

在性能方面，拥有不同的 SP 是有优势的，因为它可以有不同的执行计划，并且 SQL Server 可以更有效地选择正确的执行计划。

拥有一个过程更易于维护，并且会减少代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:32:18.597

您还可以使用动态查询编写存储过程，其中您的参数指向正确的表。

```
Create proc test (@table varchar(50))
AS
BEGIN
DECLARE @str varchar (MAX)
SET @str = 'SELECT a, b, c FROM ' + @table + ' WHERE vv = ''ss'''
EXEC(@str) 
```

亲在这里：你的表名是动态
的 缺点：你需要在你调用过程的地方定义这个表名。

# iphone - 使用 Accelerate 框架在 iPhone 中设置频谱分析仪

> ID：13395406
> 
> 赞同：1
> 
> 时间：2012-11-15T10:18:36.070
> 
> 标签：iphone, ios, signal-processing, core-audio, fft

如何为音频文件设置频谱分析仪？

我知道我必须获取数据，然后应用 FFT，然后显示频率的频谱分析仪。

但是如何获取数据呢？正在播放的音频文件？我应该使用 AudioQueue 服务通过回调获取数据吗？然后使用从获得的回调中获得的数据来应用快速傅里叶变换？如何以简单的方式应用快速傅立叶变换以满足我的需求

我读了这篇文章[Using the Apple FFT and Accelerate Framework](https://stackoverflow.com/questions/3398753/using-the-apple-fft-and-accelerate-framework)

但仍然需要大量澄清，并且找不到任何足够清晰的文档

# python - OSX 上不带 X11 的 NLTK（EPD 64 位 Python）

> ID：13395409
> 
> 赞同：0
> 
> 时间：2012-11-15T10:18:39.877
> 
> 标签：python, x11, osx-mountain-lion, nltk, epd-python

我刚刚从`pip`OSX 10.8.2 安装了最新版本的 NLTK (2.0.4)。这个版本的 os OSX 不附带 X11，我喜欢这样，我不想安装它。但是，当我尝试在 python (2.7.2) 中导入时`nltk`，会弹出一个 OSX 对话框，说我需要安装 X11??

这可能是由于`Tkinter`NLTK 下载器（或类似的东西），并且可能只是在某处设置一些配置选项以不依赖于 X11，我只是不知道在哪里设置该选项。

有一个[错误报告](http://code.google.com/p/nltk/issues/detail?id=79)指出`nltk-0.9.5`依赖`tk`项是必需的，并且`nltk`无法在没有 gui 库的服务器上运行，但该问题很久以前已被标记为已解决。

**请注意**，我并没有尝试运行`nltk`下载器或其他任何需要任何形式的 gui 的东西，我只是`import nltk`在对话框弹出时尝试运行。

NLTK[安装文档](http://nltk.org/install.html)没有给出任何需要 X11 的指示。

那么如何`nltk`在没有 X11 的情况下在 OSX 10.8 上运行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:22:54.350

事实证明，问题确实是`Tkinter`。我使用的是 64 位 Mac 版本的 EPDPython，出于某种原因，他们决定将 Tk/Tcl 链接到 X11 而不是 aqua 或 cocoa。

然而，OsX 10.8 预装了正确版本的 Tk/Tcl，并且默认的 python 安装`/usr/bin/python.2.7`可以开箱即用，因为它使用正确的`Tkinter`. 解决方案是从 EPD 安装中删除错误的库，然后它会退回到正确的系统库。

要尝试建议的修复程序是否有效，请运行系统 python

```
$ /usr/bin/python2.7
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from Tkinter import *
>>> 
```

这应该没有问题完成（没有对话框），如果你的系统 python 很好，删除这些

```
/Library/Frameworks/EPD64.framework/Versions/7.2/lib/libtcl8.5.dylib
/Library/Frameworks/EPD64.framework/Versions/7.2/lib/libtk8.5.dylib
/Library/Frameworks/EPD64.framework/Versions/7.2/lib/python2.7/lib-dynload/_tkinter.so 
```

并且python应该依靠系统中的

```
/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload/_tkinter.so 
```

# android - 通过 onTap 方法访问 View 类中的组件

> ID：13395410
> 
> 赞同：0
> 
> 时间：2012-11-15T10:19:02.490
> 
> 标签：android, android-mapview, android-maps

我有一个 MapView 和一组标记，我还有一个自定义的 ItemizedOverlay 类来处理地图 onTap 事件。现在，假设我在 MainMap 类中拥有 MapView 及其对应的 CustomItemizedOverlay 类。有什么方法可以从 CustomItemizedOverlay 的 onTap() 函数访问 MainMap 类的组件（例如：更改 MainMap 类中按钮的可见性）？

在谷歌搜索我遇到了这个， View view = View.inflate(context, R.layout.MAIN_MAP_LAYOUT, false); 并使用 view.findViewById() 访问组件。这是一个好主意还是有其他更好的方法来访问它们。

任何帮助表示赞赏，在此先感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:43:43.493

您可以在实例化期间将要访问的视图传递给 Itemized 叠加层（更改构造函数以接受更多参数）或向您的 itmemized 叠加层添加方法以传递视图。

例子：

```
private View mView;

setViewToChange(View myView){
  this.mView = myView;
} 
```

问候。

# c# - 如何在 Windows 服务的锁定/解锁会话处理程序中使用 WtsApi32.dll？

> ID：13395411
> 
> 赞同：0
> 
> 时间：2012-11-15T10:19:03.510
> 
> 标签：c#, .net, visual-studio-2010, wmi, interopservices

我想使用 Windows 服务检测并关闭任何程序（例如：Notepad.exe）。下面的代码在控制台应用程序中是不错的选择。

```
class Program
{
    private static SessionSwitchEventHandler sseh;
    static void Main(string[] args)
    {
        sseh = new SessionSwitchEventHandler(SystemEvents_SessionSwitch);
        SystemEvents.SessionSwitch += sseh;
        while (true) { }
    }

    static void SystemEvents_SessionSwitch(object sender, SessionSwitchEventArgs e)
    {
        Console.WriteLine(e.Reason.ToString());
    }
} 
```

但是上面的代码在 windows 服务 windows 7 中不起作用。看看这个链接：

[http://social.msdn.microsoft.com/Forums/eu/netfxcompact/thread/04b16fac-043a-41c3-add9-482c912e95be](http://social.msdn.microsoft.com/Forums/eu/netfxcompact/thread/04b16fac-043a-41c3-add9-482c912e95be)

我在windows服务中编写了下面的代码，它不能在win 7上运行，它每次都在控制台应用程序的windows 7上工作。

```
protected override void OnStart(string[] args)
{ 
    SystemEvents.SessionSwitch += SystemEvents_SessionSwitch;
    Console.ReadLine();
    SystemEvents.SessionSwitch -= SystemEvents_SessionSwitch;
}

static void SystemEvents_SessionSwitch(object sender, SessionSwitchEventArgs e)
{
    WriteToLogFile( e.Reason.ToString());
    if (e.Reason == SessionSwitchReason.SessionLock)
    {
         WriteToLogFile("SessionLock ");
    }
    if (e.Reason == SessionSwitchReason.SessionUnlock)
    {
         WriteToLogFile("SessionUnlock ");
    }
    if (e.Reason == SessionSwitchReason.SessionLogon)
    {
         WriteToLogFile("SessionLogon ");
    }
} 
```

我已经阅读了这篇文章（[http://rhauert.wordpress.com/category/ucc/](http://rhauert.wordpress.com/category/ucc/)）但我不能使用

```
protected override void OnStart(string[] args)
{
     WriteToText("Windows Service is started");
     SessionChangeHandler x = new SessionChangeHandler();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:23:18.000

MSDN：

> [**SystemEvents.SessionSwitch 事件**](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionswitch(v=vs.100).aspx)：
> 
> 仅当消息泵正在运行时才会引发此事件。在 Windows 服务中，除非使用隐藏表单或手动启动消息泵，否则不会引发此事件。有关显示如何使用 Windows 服务中的隐藏表单来处理系统事件的代码示例，请参阅 SystemEvents 类。

代码示例在[此页面上](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents(v=vs.100).aspx)，其中还指出：

> 服务没有消息循环，除非它们被允许与桌面交互。如果消息循环不是由隐藏表单提供的，如本例，服务必须在本地系统帐户下运行，并且需要手动干预才能与桌面交互。也就是说，管理员必须手动选中服务属性对话框的登录选项卡上的允许服务与桌面交互复选框。在这种情况下，会自动提供消息循环。仅当服务在本地系统帐户下运行时，此选项才可用。无法以编程方式启用与桌面的交互。

# php - MySQL 在创建表时抛出错误。不知道为什么

> ID：13395417
> 
> 赞同：0
> 
> 时间：2012-11-15T10:19:19.563
> 
> 标签：php, mysql

```
$invited = "CREATE TABLE invited (id NOT NULL AUTO_INCREMENT, PRIMARY KEY (id), name VARCHAR(255), email VARCHAR(255), permissions VARCHAR(255))";
mysqli_query($dbc, $invited) or die ('Error creating invited'); 
```

这段代码有什么问题？一直给我“创建邀请时出错”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:21:32.873

你忘记了`ID`数据类型

```
CREATE TABLE invited 
(
    id INT NOT NULL AUTO_INCREMENT, ...
        ^--------------------------------------here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:23:14.320

用这个。

```
CREATE TABLE `invited` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

# java - 正则表达式（java）中的错误在哪里？

> ID：13395418
> 
> 赞同：1
> 
> 时间：2012-11-15T10:19:25.390
> 
> 标签：java, regex

我的 xml 文件看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<stylesheet xmlns="http://www.w3.org/1999/XSL/Transform" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output indent="yes"/>
    <xsl:template match="/">
        <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
                <meta charset="UTF-8" content="text/html" http-equiv="Content-Type"/>
            </head>
            <body>

<div>&nbsp;</div>

            Hello body content !!

            </body>
        </html>
    </xsl:template>
    <xsl:template name="br-replace">
        <xsl:param name="word"/>
        <xsl:choose>
            <xsl:when test="contains($word,'&#xA;')">
                <xsl:value-of select="substring-before($word,'&#xA;')"/>
                <br xmlns="http://www.w3.org/1999/xhtml"/>
                <xsl:call-template name="br-replace">
                    <xsl:with-param name="word" select="substring-after($word,'&#xA;')"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$word"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
    <xsl:template name="format-date">
        <xsl:param name="word"/>
        <xsl:value-of select="substring($word, 1, 10)"/>
    </xsl:template>
</stylesheet> 
```

我正在尝试将其分为三个部分：

1.  之前的文字`<body>`
2.  之间的文字`<body> and </body>`
3.  之后的文字`</body>`

Java代码：

```
Matcher before = Pattern.compile("(.*?)<body>", Pattern.MULTILINE | Pattern.DOTALL | Pattern.CASE_INSENSITIVE)
                .matcher(input);
        String beforeStr = null;
        if (before.find()) {
            beforeStr = before.group(1);
        }

        Matcher after = Pattern.compile("</body>(.*?)", Pattern.MULTILINE | Pattern.DOTALL | Pattern.CASE_INSENSITIVE)
                .matcher(input);
        String afterStr = null;
        if (after.find()) {
            afterStr = after.group(1);
        }

        Matcher body = Pattern.compile("<body>(.*?)</body>",
                Pattern.MULTILINE | Pattern.DOTALL | Pattern.CASE_INSENSITIVE).matcher(input);
            String bodyStr = null;
        if (body.find()) {
            bodyStr= body.group(1);
        } 
```

知道为什么 String 'afterStr' 为空，模式有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:22:55.117

非贪婪的量词，没有正确的东西。

```
"</body>(.*?)"
           ^matches as little as possible. In this case, 0 characters. 
```

只需使用贪婪匹配：

```
</body>(.*) 
```

以上将做你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:27:30.830

`indexOf`如果您打算以文本方式而不是使用 XML 解析器来执行此操作，那么使用and不是更容易`substring`吗？正则表达式是错误的工具，但如果您要使用错误的工具，那么可以选择更好的错误工具。:-)

将您的代码与此进行比较（假设`input`是字符串）：

```
int indexOfBodyStart = input.indexOf("<body>");
int indexOfBodyEnd   = input.indexOf("</body>");
String beforeBody    = input.substring(0, indexOfBodyStart);
String body          = input.substring(indexOfBodyStart + 6, indexOfBodyEnd);
String afterBody     = input.substring(indexOfBodyEnd + 7); 
```

与正则表达式解决方案相比，这不会或多或少地失败。（例如，如果文本`<body>`出现在实际正文之前或正文`</body>`结尾之前的引号内，则两种解决方案都将失败。）

标记此 CW 是因为您特别询问了正则表达式。

# rotation - 在 2D 空间中旋转火箭并允许它朝其面对的方向移动，lua，corona

> ID：13395419
> 
> 赞同：2
> 
> 时间：2012-11-15T10:19:29.837
> 
> 标签：rotation, lua, 2d, coronasdk

我对 Lua 和 corona 都是新手，一直在努力让我的游戏起飞（双关语）

我基本上想顺时针和逆时针旋转我的火箭，并调整它的 x 和 y 以便在按下推力按钮时朝着它的方向移动

我尝试了很多方法，并且陷入了方程式以及如何实现它们，请参见下面的代码（如果偏离标记，请随意大笑）

```
 local rocket = display.newSprite( rocketsheet, rocketsequencedata)
   physics.addBody(rocket, { bounce = 0.5} )
   rocket.x = display.contentWidth/3
   rocket.y = display.contentHeight/1.5
   rocket.rotation = angle
   rocket:setSequence("idle")
   rocket:play()

   local inverseRotation = rocket.rotation  + math.pi
   local speedX = 0.000
   local speedY = 0.005

   speedX =  speedX * math.cos(inverseRotation) + speedY * math.sin(inverseRotation)
   speedY =  -speedX * math.sin(inverseRotation) + speedY * math.cos(inverseRotation)

   function thrust(event)

   rocket:applyLinearImpulse(speedX, speedY, rocket.x, rocket.y)
   rocket:setSequence("afterburn")
   rocket:play()

   end

   function rotateleft(event)

speedX = speedX - 0.0005

rocket.rotation = rocket.rotation - 2

   end

   function rotateright(event)

speedX = speedX + 0.0005
rocket.rotation = rocket.rotation + 2

   end

   controlthrust:addEventListener( "touch", thrust)
   controlleft:addEventListener( "touch", rotateleft)
   controlright:addEventListener( "touch", rotateright) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:36:24.693

您正在重新定义 speedX 和 speedY...

这意味着等式的第一行可以正常工作。第二个使用第一行的结果，从而完全中断。

:)

# ajax - 如何重新加载推特按钮？

> ID：13395423
> 
> 赞同：8
> 
> 时间：2012-11-15T10:19:43.127
> 
> 标签：ajax, button, twitter, render, reload

对于 ajax 页面，我调用：

> twttr.widgets.load()

但从未发生过，它不会重新加载 twitter 按钮。

我也试过

> twttr.widgets.load("nameDiv")

但我收到此错误：

TypeError：对象 nameDiv 没有方法“getElementsByTagName”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T11:48:57.843

我用这个解决方案（jQuery）解决了：

```
function reload_twitter_button() {
  $('.social-tw').html('');
  $('.social-tw').html('<a href="https://twitter.com/share" class="twitter-share-button" data-url="' + window.location.href + '">Tweet</a>');
  // refresh the widgets
  twttr.widgets.load();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T22:33:52.610

我遇到过同样的问题。就我而言，在进行加载调用之前没有加载页面。等待文件准备好触发：

```
$(function () {
    function loadWidgets(){
       twttr.widgets.load();
    }

    loadWidgets();
}); 
```

# mongodb - mongoDB 副本集

> ID：13395430
> 
> 赞同：1
> 
> 时间：2012-11-15T10:20:17.987
> 
> 标签：mongodb, replication

我试图理解 MongoDB 中副本集的概念。

以 2 个 mongoDB 实例 A（主要）和 B（次要）为例。

如果我的客户很高兴地查询 AI 理解写入被复制到 B 但是如果服务器 A 变得不可访问会发生什么？

虽然就 mongo 复制而言，我可以看到 B 被选为新的主节点，但客户端如何知道现在将其查询传递给 B 而不是 A？这一切都是在mongo内部完成的吗？

我问是因为我的客户的配置有一个指向 A 的 uri，但对 B 没有任何内容。这是正确的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:16:42.120

> > 以 2 个 mongoDB 实例 A（主要）和 B（次要）为例。

您不应将两个实例用作副本集的一部分。您应该有一个[仲裁者](http://docs.mongodb.org/manual/administration/replica-sets/#replica-set-arbiters)或另一个辅助者，以便可以进行选举。

请[在此处](http://www.mongodb.org/display/DOCS/Gotchas)查看陷阱，[在此处](http://docs.mongodb.org/manual/core/replication/)查看复制基础知识，[在此处](http://docs.mongodb.org/manual/core/replication/#replica-set-elections)查看有关选举的信息。

> > 如果我的客户很高兴地查询 AI 理解写入被复制到 B 但是如果服务器 A 变得不可访问会发生什么？

该服务应该在服务器 B 成为主服务器的情况下进行[故障转移。](http://docs.mongodb.org/manual/faq/replica-sets/#how-long-does-replica-set-failover-take)但是，对于两个实例，服务器 B 将无法将自己选为主服务器，因为没有多数。

> > 虽然就 mongo 复制而言，我可以看到 B 被选为新的主节点，但客户端如何知道现在将其查询传递给 B 而不是 A？这一切都是在mongo内部完成的吗？

这通常通过驱动程序执行，因为驱动程序知道副本集配置。请[在此处](http://www.mongodb.org/display/DOCS/Drivers)查看相关驱动程序文档（取决于您使用的驱动程序）。

# c++ - eigen::vectorXf 到 MatriXf 映射

> ID：13395431
> 
> 赞同：2
> 
> 时间：2012-11-15T10:20:18.243
> 
> 标签：c++, eigen

在 eigen c++ 中，如何将 vectorXf 映射到 matrixXf （适当尺寸）

（关于如何为外部对象执行此操作有很好的[文档，所以我知道我们可以做到：](http://eigen.tuxfamily.org/dox/TutorialMapClass.html)

`MatrixXf x_cen=Map<MatrixXf>(*x,*n,*p);`

但如果`x`是 a`VectorXf`怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:32:50.960

您可以使用 .data() 成员函数，后跟 Map：

```
VectorXf vec(rows*cols);
vec = ...;
Map<MatrixXf> vec_view_as_a_matrix(vec.data(), rows, cols); 
```

然后您可以像使用任何 Eigen 对象一样使用 vec_view_as_a_matrix，对 vec_view_as_a_matrix 的修改也将报告给 vec，因为它们共享内存。如果要复制到新的 MatrixXf 对象，请使用您编写的构造：

```
MatrixXf x_cen = Map<MatrixXf>(vec.data(), rows, cols); 
```

# python - pygtk+glade+本地化

> ID：13395433
> 
> 赞同：7
> 
> 时间：2012-11-15T10:20:22.150
> 
> 标签：python, localization, pygtk

我的系统 (Linux) 中的默认语言环境 - en_US。当我将语言环境更改为俄语（LANG=ru_RU ./show_form.py）时，python 字符串“hello to me”正确显示（在控制台中），其他（glade 形式）- 用英文显示。（LANG=ru_RU.utf-8 ./show_form.py - 结果相同）。

我究竟做错了什么？

例如，我有简单的 python 代码（show_form.py）：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import pygtk, gtk, gtk.glade
import locale, gettext

APP="show_form"
DIR="locale"

locale.setlocale(locale.LC_ALL, '')
gettext.bindtextdomain(APP, DIR)
gettext.textdomain(APP)
lang = gettext.translation(APP, DIR)
_ = lang.gettext
gettext.install(APP, unicode=False, codeset='utf-8', localedir=DIR)
print _("hello to me")

wTree = gtk.glade.XML("localize.glade")
gtk.glade.bindtextdomain(APP, DIR)

window = wTree.get_widget("window1")
window.connect("delete_event", lambda wid, we: gtk.main_quit())
window.show_all()
gtk.main() 
```

和一些语言的 .mo 文件。.po 文件如下：

```
# Russian translations for PACKAGE package.                                     
# Copyright (C) 2012 THE PACKAGE'S COPYRIGHT HOLDER                             
# This file is distributed under the same license as the PACKAGE package.       
#  <asc@grodno>, 2012\.                                                          
#
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2012-11-14 13:54+0300\n"
"PO-Revision-Date: 2012-11-14 13:58+0300\n"
"Last-Translator:  <aaa@bbb>\n"
"Language-Team: Russian\n"
"Language: ru\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 16bit\n"
"Plural-Forms: nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n"
"%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2);\n"

#: show_form.py:14
msgid "hello to me"
msgstr "привет мне"

#: localize.glade.h:1
msgid "label text"
msgstr "метка"

#: localize.glade.h:2
msgid "button text"
msgstr "кнопка"

#: localize.glade.h:3
msgid "checkbutton text"
msgstr "галочка" 
```

和 en_US 文件（像这样使用不同的 msgstr）。和带有标签、按钮、复选框的小空地形式。

**更新：**

我的 .mo 文件创建字符串：

```
intltool-extract --type=gettext/glade localize.glade

xgettext --language=Python --keyword=_ --keyword=N_ --output=show_form.pot show_form.py localize.glade.h

msginit --locale=ru --input=show_form.pot
msginit --locale=en_US --input=show_form.pot
msginit --locale=de_DE --input=show_form.pot 
```

在此之后我更正了 .po 文件。

最后：

```
msgfmt ru.po -o locale/ru/LC_MESSAGES/show_form.mo
msgfmt en_US.po -o locale/en_US/LC_MESSAGES/show_form.mo
msgfmt de.po -o locale/de/LC_MESSAGES/show_form.mo 
```

**Upd2：解决方案**

```
-wTree = gtk.glade.XML("localize.glade")
 gtk.glade.bindtextdomain(APP, DIR)
+wTree = gtk.glade.XML("localize.glade", "window1", APP) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:50:14.800

您需要使用[**intltool**](http://freedesktop.org/wiki/Software/intltool)来翻译您的 Glade 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-06T14:40:13.440

从此。[_](https://phrase.com/blog/posts/translate-python-gnu-gettext/) 看来您的 python 代码顺序错误。

```
lang = gettext.translation(APP, DIR)
lang.install(APP, unicode=False, codeset='utf-8', localedir=DIR)
_ = lang.gettext 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-23T21:34:47.123

这在 gtk2 上效果很好，但是如果您使用的是 GTK3，事情就会变得一团糟......

看一眼：

[使用 locale 绑定 glade i18n](https://stackoverflow.com/questions/10094335/how-to-bind-a-text-domain-to-a-local-folder-for-gettext-under-gtk3/10540744#10540744)

实际的标题是不同的，但它的伎俩。我仍然有股票按钮的问题，但我的应用程序的其余部分开始被 i18ned

# mysql - mysql为rand设置种子

> ID：13395434
> 
> 赞同：4
> 
> 时间：2012-11-15T10:20:25.030
> 
> 标签：mysql, unit-testing, random, seed

是否可以在 MySQL 中为 RAND() 函数设置种子？我需要这个进行单元测试，以确保我知道预期的结果是什么。

在 PHP 中，只需执行以下操作：

```
<?php srand(12345); echo rand(); ?> 
```

在我的模型中，我目前有一个查询，例如：

```
SELECT * FROM table ORDER BY RAND() LIMIT 1; 
```

现在在我的单元测试中，我想确保我知道 RAND() 的种子是什么，所以我知道查询返回哪个记录。

也许通过在我的模型中的查询之前执行额外的查询？

我知道我可以向 RAND() 添加一个参数，但这不是我想要的；我不想修改查询。

PS。我正在使用 Linux；可能有助于为 /dev/random 设置种子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:52:25.183

你可以参考这个：[MySQL RAND with with parameter](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_rand)

该`RAND`函数支持`RAND(N)`将用作种子的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:10:37.680

通常，我们不会对 SQL 函数进行单元测试，而是对调用 SQL 函数的代码进行单元测试。

因此，也许与其测试特定的返回值，不如测试您是否获得*了一些*价值。如果查询返回一个值，您就知道它正在“工作”并且您与 MySQL 的内部技术保持隔离。您也不必修改查询。

# yii - 如何打印/回显 getrelated('relation-name') 的返回记录？

> ID：13395435
> 
> 赞同：0
> 
> 时间：2012-11-15T10:20:25.653
> 
> 标签：yii

```
array(
          'header'=>assignment::model()->getAttributeLabel('group_id'),    //column header
          'value'=>'($data->getRelated(\'phoneNumberGroupAssignments\')=== null)?"No related assignment registry":$data->getRelated("phoneNumberGroupAssignments")->group_id', //column name, php expression
          'type'=>'raw',
          ), 
```

如何打印/回显 getrelated('relation-name') 的返回记录？这样我们就可以检查它是否工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:26:40.257

你可以简单地写：

```
$data->phoneNumberGroupAssignments 
```

或一般来说：

```
$data->relation-name 
```

这是可能的，因为 Yii`CActiveRecord`重新定义了魔法 getter 方法`__get()`（[链接](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#__get-detail)）

* * *

**更新**

所以你可以写这样的代码：

```
array(
    'header' => assignment::model()->getAttributeLabel('group_id'), //column header
    'value' => '($data->phoneNumberGroupAssignments === null) ? "No related assignment registry" : $data->phoneNumberGroupAssignments->group_id', //column name, php expression
    'type'=>'raw',
), 
```

# pdf - 合并单独的 PDF 是否会减小文件的整体大小？

> ID：13395439
> 
> 赞同：1
> 
> 时间：2012-11-15T10:20:42.853
> 
> 标签：pdf, merge, compression, size

我有许多单独的 PDF 文件，主要由文本和一些图像组成（其中大部分图像在文件中重复）。

我需要定期发送所有这些文件，因此需要减小文件大小。压缩并没有太大的区别，但是我被告知合并文件可以显着减小文件大小。

这里的任何人都可以确认这是否可行，如果可以，可以减少多少？

如果需要，我可以提供更多说明吗？

# c++ - 铸造 COM 接口

> ID：13395442
> 
> 赞同：8
> 
> 时间：2012-11-15T10:20:55.123
> 
> 标签：c++, com, casting

我今天在我的代码中遇到了一个问题，通过将我的 COM 对象转换为 IUnknown** 导致了访问冲突，AFAICT。它传入的函数执行没有问题，但是当调用我的对象的一个​​函数时，它会执行一些随机函数并破坏堆栈然后死。

指示性代码（忽略为什么这样做 - 我知道它很糟糕，我知道如何修复它，但这是为什么会出现这样的问题的问题）：

```
void MyClass2::func(IMyInterface* pMyObj)
{
    CComPtr<IMyInterface2> pMyObj2;
    HRESULT hRes = pMyObj->GetInternalObject((IUnknown**)&pMyObj2);

    if (SUCCEEDED(hRes))
        pMyObj2->Function(); // corrupt stack
}

void MyClass::GetInternalObject(IUnknown** lpUnknown)
{
    pInternalObject->QueryInterface(IID_IMyInterface2, (void**)lpUnknown);
} 
```

我一直对在 COM 对象上使用 C/C++ 强制转换有点怀疑，但直到现在我从未遇到过（可能是通过未定义的行为）任何问题。

我快速浏览了一下，据我所知，只要继承链中没有多重互斥，转换为 IUnknown 在技术上是有效的，但这不是最佳实践——我真的应该将 IUnknown 传递给`MyClass::GetInternalObject(IUnknown** lpUnknown)`然后查询返回我想要的界面的价值。

我的问题是，是否有关于何时可以在 COM 对象上使用 C/C++ 转换的规则，除了多重继承和它们带来的调整器 thunk 之外，转换 COM 对象如何导致访问冲突等意外？请详细说明。

**编辑：**它们都是应该如何正确完成的很好的例子，但我希望的是一个技术解释为什么你不应该转换 COM 对象（假设存在）例如转换将在情况*x*下返回 pMyObj2-4但是QueryInterface 将返回 pMyObj2-8 因为*y* ...或者转换 COM 对象只是一个不好的做法/风格的问题？

TIA

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T13:31:07.477

我只是使用`CComPtr`和`CComQIPtr`管理 COM 接口，而不是使用 C 风格的强制转换编写代码，这在我看来在 COM 的上下文中是不合适的：

```
void MyClass2::Func(IMyInterface* pMyObj)
{
    // Assuming:
    //   HRESULT IMyInterface::GetInternalObject( /* [out] */ IUnknown** )
    CComPtr<IUnknown> spUnk;       
    HRESULT hr = pMyObj->GetInternalObject(&spUnk);
    if (SUCCEEDED(hr))
    {
        // Get IMyInterface2 via proper QueryInterface() call.
        CComQIPtr<IMyInterface2> spMyObj2( spUnk );
        if ( spMyObj2 )
        {
            // QueryInterface() succeeded

            spMyObj2->Function();
        }
    }
} 
```

此外，我不是 COM 专家，但我怀疑您的代码：

```
void MyClass::GetInternalObject(IUnknown** lpUnknown)
{
    pInternalObject->QueryInterface(IID_IMyInterface2, (void**)lpUnknown);
} 
```

如果你正在`QueryInterface()`'ing `IID_MyInterface2`，你应该把它存储在一个`IMyInterface2*`，而不是一个`IUnknown*`。如果您的方法返回一个`IUnknown*`，那么我会`QueryInterface()`是一个`IID_IUnknown`：

```
// NOTE on naming convention: your "lpUnknown" is confusing.
// Since it's a double indirection pointer, you may want to use "ppUnknown".
//
void MyClass::GetInternalObject(IUnknown** ppUnknown)
{
    pInternalObject->QueryInterface(IID_IUnknown, (void**)ppUnknown);
} 
```

或更好地使用`IID_PPV_ARGS`宏：

```
void MyClass::GetInternalObject(IUnknown** ppUnknown)
{
    IUnknown* pUnk = NULL;
    HRESULT hr = pInternalObject->QueryInterface(IID_PPV_ARGS(&pUnk));
    // Check hr...

    // Write output parameter
    *ppUnknown = pUnk;
} 
```

COM 样式转换有一个特定的名称：`QueryInterface()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:54:01.237

我认为问题在于，因为从`IMyInterface*`to的转换`IUnknown*`是可以的（在 COM 中，一切都继承自`IUknown`对吗？）你认为从`IMyInterface**`to`IUnknown**`的转换也可以。但这在 C++ 中并非如此，我也怀疑在 COM 中也是如此。

对我来说，以下看起来更合乎逻辑，如果这不是严格正确的，请道歉，我的 COM 非常生锈，但希望你明白。

```
CComPtr<IUnknown> pMyObj2;
HRESULT hRes = pMyObj->GetInternalObject(&pMyObj2);

if (SUCCEEDED(hRes))
{
    CComPtr<IMyInterface> pMyObj3 = (IMyInterface*)pMyObj2;
    pMyObj3->Function();
} 
```

即首先获取一个 IUnknown 对象，然后将其向下转换为您的实际类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T13:52:00.430

我在您的代码片段中看不到任何问题，堆栈损坏可能有其原因，但它在其他地方。

我不认为这是您的实际代码，因为`GetInternalObject`应该是`HRESULT`类型而您的不是，所以您在复制/粘贴过程中丢失了一些东西。

为了更安全，请避免直接`QueryInterface`调用，因为与强制转换一起，它们可能会误解接口。不过，来回转换`IUnknown*`可能是不可避免的。如果不能信任被调用方返回转换为 IUnknown 的正确接口，则在调用方方面，您可能更愿意再次 QI 以确保您持有您感兴趣的接口。

如果 GetInternalObject 本身是一个 COM 接口方法，您可以这样：

```
void MyClass2::func(IMyInterface* pMyObj)
{
    CComPtr<IUnknown> pMyObj2Unknown;
    pMyObj->GetInternalObject((IUnknown**)&pMyObj2Unknown);
    CComQIPtr<IMyInterface2> pMyObj2 = pMyObj2Unknown; // This is only needed if callee is not trusted to return you a correct pointer
    if (pMyObj2)
        pMyObj2->Function(); // corrupt stack
}

STDMETHODIMP MyClass::GetInternalObject(IUnknown** lpUnknown) // COM method is typically both HRESULT and __stdcall
{
    CComQIPtr<IMyInterface2> pMyInterface2 = pInternalObject;
    if(!pMyInterface2)
        return E_NOINTERFACE;
    *lpUnknown = pMyInterface2.Detach(); // *lpUnknown will have to me IMyInterface2 this way
    return S_OK;
} 
```

PS 如果 GetInternalObject 是本机方法，而不是 COM，您将完全避免强制转换`IUnknown*`。

# java - SOAP 响应有错误但不抛出异常

> ID：13395444
> 
> 赞同：0
> 
> 时间：2012-11-15T10:21:03.333
> 
> 标签：java, web-services, soap, log4j

我需要更改用 JAVA 编写的现有 Web 服务。Web 服务会进行一些输入验证，例如当数字的输入无效时，它会抛出 NumberFormatException。

这会导致用户出现错误消息，这是正确的。但是因为我们使用 log4j，所以异常在日志文件中被记录为错误，这是不需要的。

我的问题是：如何在不引发异常的情况下返回 SoapFault？我认为这会向用户返回错误，但不会将错误记录为日志文件中的错误。如果这是不可能的。如何将 log4j 配置为不记录某些异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:37:08.750

您可以将数字解析包装在 try\catch 块中，捕获 NumberFormatException。它不会在其他任何地方传播，并且在 catch 块中您可以只返回 SoapFault。

```
int value;
try{
    value = Integer.parseInt(valueString);
}
catch(NumberFormatException e){
    value = 0;
    return SoapFault;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T13:11:53.430

返回 null 并没有解决我的问题，所以我创建了一个自定义异常并在我的 log4j.xml 中排除了该类：

```
<category name="My.Company.DoNotLogException">
  <priority value="off" />
</category> 
```

现在用户仍然收到错误，但该错误不再显示在我的日志中。

谢谢大家帮助我。

# java - 手机锁定时不运行

> ID：13395450
> 
> 赞同：0
> 
> 时间：2012-11-15T10:21:13.013
> 
> 标签：java, android, android-intent

> **可能重复：**
> [如何在屏幕关闭时保持我的 Android 服务运行？](https://stackoverflow.com/questions/6091270/how-can-i-keep-my-android-service-running-when-the-screen-is-turned-off)

在我的应用程序中。我调用网络服务来检查由 android 应用程序发送的网络服务器上的更新。当手机被锁定并且我想在后台运行我的应用程序时，我的应用程序没有运行。我会感谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:28:19.777

您可以运行在后台运行的[服务](http://developer.android.com/reference/android/app/Service.html)，或者对于更新，您可以使用推送机制而不是拉取机制。您可以使用[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)进行推送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:32:22.257

原因是当您的应用程序没有焦点时（我假设您正在使用`Activity`），它会暂停或停止。

如果你想在后台运行一些东西，你可以使用[服务。](http://developer.android.com/reference/android/app/Service.html)

# c++ - boost目录迭代器构造函数中的异常

> ID：13395452
> 
> 赞同：1
> 
> 时间：2012-11-15T10:21:23.233
> 
> 标签：c++, boost, boost-filesystem

我正在使用 boost 文件系统迭代器，当我尝试解析特定文件夹时遇到问题。该文件夹是使用 curòlftpfs 作为根安装的远程 ftp 文件夹。相同的文件夹也可以作为 nfs 共享挂载。如果我在 nfs 共享上运行我的应用程序，迭代工作正常，而如果我在 ftp 共享上运行它，我会得到异常。导致崩溃的特定文件夹是 lost+found 文件夹。似乎 root 用户无权访问它，但是在 nfs 共享中，如果我尝试 ls /mnt/remotenfs/lost-found 我得到一个权限被拒绝错误，执行 ls /mnt/remoteftp/lost+found 我得到输入/输出错误。虽然很明显 curlftpfs 存在一些问题，因为它应该返回某种权限错误，但在这种情况下 boost 不应该崩溃。我试过了

```
boost::filesystem3::directory_iterator itr(dir_path); 
```

和

```
boost::system::error_code ec;
boost::filesystem3::directory_iterator itr(dir_path, ec); 
```

但结果是一样的：

```
#0  0x0000003064a329a5 in raise () from /lib64/libc.so.6
#1  0x0000003064a34185 in abort () from /lib64/libc.so.6
#2  0x0000003064a2b935 in __assert_fail () from /lib64/libc.so.6
#3  0x000000000043a7b5 in boost::shared_ptr<boost::filesystem3::detail::dir_itr_imp>::operator-> (this=0x7fffd216cf30)
    at /usr/include/boost/smart_ptr/shared_ptr.hpp:414
#4  0x00000000005e89f2 in boost::filesystem3::detail::directory_iterator_increment (it=..., ec=0x0) at libs/filesystem/v3/src/operations.cpp:1947
#5  0x00000000004363af in boost::filesystem3::directory_iterator::increment (this=0x7fffd216cf30) at /usr/include/boost/filesystem/v3/operations.hpp:630
#6  0x00000000005e8810 in boost::filesystem3::detail::directory_iterator_construct (it=..., p=..., ec=0x7fffd216cf40)
    at libs/filesystem/v3/src/operations.cpp:1918
#7  0x000000000054a120 in boost::filesystem3::directory_iterator::directory_iterator (this=0x7fffd216cf30, p=..., ec=...)
    at /usr/include/boost/filesystem/v3/operations.hpp:598 
```

为了避免崩溃，我可以做任何额外的控制吗？Ingoring 文件夹将是需要的行为，但我找不到任何允许我忽略它的 boost 文件系统检查功能！我正在使用提升版本 1.49。请注意，当时不可能迁移到更新的增强版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:26:07.940

将你的 boost 代码放在 try 和 catch 语句中。

```
try { //code here}
catch(boost::filesystem::filesystem_error &ex){std::cout << ex.what() << "\n";} 
```

# c++ - 如何结合 boost::spirit::lex 和 boost::spirit::qi？

> ID：13395453
> 
> 赞同：3
> 
> 时间：2012-11-15T10:21:23.577
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi, boost-spirit-lex

我有一个词法分析器，基于该词法分析器，我现在想创建一个使用该词法分析器生成的标记的语法。我尝试调整我发现的一些示例，现在我有一些可以编译和工作的东西，但我的一个应该失败的测试没有。现在我想知道为什么，我也想知道我在那里实际做了什么（我想了解 - 我只是从一些示例中复制了一些代码，但这并没有真正提高理解）。

词法分析器：

```
#include <boost/spirit/include/lex_lexertl.hpp>

namespace lex = boost::spirit::lex;

enum LexerIDs { ID_IDENTIFIER, ID_WHITESPACE, ID_INTEGER, ID_FLOAT, ID_PUNCTUATOR };

template <typename Lexer>
struct custom_lexer : lex::lexer<Lexer>
{
    custom_lexer()
        : identifier("[a-zA-Z_][a-zA-Z0-9_]*")
        , white_space("[ \\t\\n]+")
        , integer_value("[1-9][0-9]*")
        , hex_value("0[xX][0-9a-fA-F]+")
        , float_value("[0-9]*\\.[0-9]+([eE][+-]?[0-9]+)?")
        , float_value2("[0-9]+\\.([eE][+-]?[0-9]+)?")
        , punctuator("\\[|\\]|\\(|\\)|\\.|&>|\\*\\*|\\*|\\+|-|~|!|\\/|%|<<|>>|<|>|<=|>=|==|!=|\\^|&|\\||\\^\\^|&&|\\|\\||\\?|:|,")// [ ] ( ) . &> ** * + - ~ ! / % << >> < > <= >= == != ^ & | ^^ && || ? : ,
    {
        using boost::spirit::lex::_start;
        using boost::spirit::lex::_end;

        this->self.add
            (identifier, ID_IDENTIFIER) 
            /*(white_space, ID_WHITESPACE)*/ 
            (integer_value, ID_INTEGER)
            (hex_value, ID_INTEGER)
            (float_value, ID_FLOAT)
            (float_value2, ID_FLOAT)
            (punctuator, ID_PUNCTUATOR);

        this->self("WS") = white_space;
    }
    lex::token_def<std::string> identifier;
    lex::token_def<lex::omit> white_space;
    lex::token_def<int> integer_value;
    lex::token_def<int> hex_value;
    lex::token_def<double> float_value;
    lex::token_def<double> float_value2;
    lex::token_def<> punctuator;
}; 
```

语法：

```
namespace qi  = boost::spirit::qi;
namespace lex = boost::spirit::lex;

template< typename Iterator, typename Lexer>
struct custom_grammar : qi::grammar<Iterator, qi::in_state_skipper<Lexer>>
{

    template< typename TokenDef >
    custom_grammar(const TokenDef& tok) : custom_grammar::base_type(ges)
    {
        ges = qi::token(ID_INTEGER) | qi::token(ID_FLOAT);
        BOOST_SPIRIT_DEBUG_NODE(ges);
        debug(ges);
    }
    qi::rule<Iterator, qi::in_state_skipper<Lexer>> ges;
}; 
```

和例子：

```
BOOST_AUTO_TEST_CASE(BasicGrammar)
{
    namespace lex = boost::spirit::lex;
    namespace qi = boost::spirit::qi;

    std::string test("1234 56");

    typedef lex::lexertl::token<char const*, lex::omit, boost::mpl::true_> token_type;
    typedef lex::lexertl::lexer<token_type> lexer_type;

    typedef custom_lexer<lexer_type>::iterator_type iterator_type;

    custom_lexer<lexer_type> my_lexer; 
    custom_grammar<iterator_type, custom_lexer<lexer_type>::lexer_def> my_grammar(my_lexer);

    char const* first = test.c_str();
    char const* last = &first[test.size()];

    lexer_type::iterator_type iter = my_lexer.begin(first, last);
    lexer_type::iterator_type end = my_lexer.end();

    bool r = qi::phrase_parse(iter,end,my_grammar, qi::in_state( "WS" )[ my_lexer.self ]);

    BOOST_CHECK(r);
} 
```

我的假设是这返回 true 因为空格被跳过了 - 因为 auf qi::in_state("WS"). 真的吗？此外，我知道如何为空格输出额外的标记 - 但是我不知道在 qi::in_stat 现在所在的位置放置什么 - 没有它它就不起作用。

关于结构我可以改进的任何想法？为什么调试输出如此有趣？

```
<ges>
  <try>[]</try>
  <success></success>
  <attributes>[]</attributes>
</ges> 
```

感谢您的帮助。

问候

托拜厄斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:39:20.050

您的解析器没有失败，但不，它也没有“默默地”跳过空格（无论如何，它只解析一个*非空格*标记）。

事实上，*phrase_parse 系列 Spirit API 的一个属性是它可能不匹配完整的输入。事实上，这就是它通过引用获取第一个迭代器的原因：解析后迭代器将指示解析停止的位置。

我已经更改了一些位，因此您可以通过使用`lex::tokenize_and_phrase_parse`而不是`qi::phrase_parse`lexer_tokens 轻松访问源迭代器：

```
Iterator first = test.c_str();
Iterator last = &first[test.size()];

bool r = lex::tokenize_and_phrase_parse(first,last,my_lexer,my_grammar,qi::in_state( "WS" )[ my_lexer.self ]);

std::cout << std::boolalpha << r << "\n";
std::cout << "Remaining unparsed: '" << std::string(first,last) << "'\n"; 
```

输出是：

```
Remaining unparsed: '56' 
```

这是一个完整的工作示例（注意我还直接将语法类的第二个参数更改为 Skipper，这对于 Spirit 语法更为典型）：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>

namespace qi  = boost::spirit::qi;
namespace lex = boost::spirit::lex;

enum LexerIDs { ID_IDENTIFIER, ID_WHITESPACE, ID_INTEGER, ID_FLOAT, ID_PUNCTUATOR };

template <typename Lexer>
struct custom_lexer : lex::lexer<Lexer>
{
    custom_lexer()
        : identifier    ("[a-zA-Z_][a-zA-Z0-9_]*")
        , white_space   ("[ \\t\\n]+")
        , integer_value ("[1-9][0-9]*")
        , hex_value     ("0[xX][0-9a-fA-F]+")
        , float_value   ("[0-9]*\\.[0-9]+([eE][+-]?[0-9]+)?")
        , float_value2  ("[0-9]+\\.([eE][+-]?[0-9]+)?")
        , punctuator    ("\\[|\\]|\\(|\\)|\\.|&>|\\*\\*|\\*|\\+|-|~|!|\\/|%|<<|>>|<|>|<=|>=|==|!=|\\^|&|\\||\\^\\^|&&|\\|\\||\\?|:|,")// [ ] ( ) . &> ** * + - ~ ! / % << >> < > <= >= == != ^ & | ^^ && || ? : ,
    {
        using boost::spirit::lex::_start;
        using boost::spirit::lex::_end;

        this->self.add
            (identifier   , ID_IDENTIFIER)
          /*(white_space  , ID_WHITESPACE)*/
            (integer_value, ID_INTEGER)
            (hex_value    , ID_INTEGER)
            (float_value  , ID_FLOAT)
            (float_value2 , ID_FLOAT)
            (punctuator   , ID_PUNCTUATOR);

        this->self("WS") = white_space;
    }
    lex::token_def<std::string> identifier;
    lex::token_def<lex::omit>   white_space;
    lex::token_def<int>         integer_value;
    lex::token_def<int>         hex_value;
    lex::token_def<double>      float_value;
    lex::token_def<double>      float_value2;
    lex::token_def<>            punctuator;
};

template< typename Iterator, typename Skipper>
struct custom_grammar : qi::grammar<Iterator, Skipper>
{

    template< typename TokenDef >
    custom_grammar(const TokenDef& tok) : custom_grammar::base_type(ges)
    {
        ges = qi::token(ID_INTEGER) | qi::token(ID_FLOAT);
        BOOST_SPIRIT_DEBUG_NODE(ges);
    }
    qi::rule<Iterator, Skipper > ges;
};

int main()
{
    std::string test("1234 56");

    typedef char const* Iterator;
    typedef lex::lexertl::token<Iterator, lex::omit, boost::mpl::true_> token_type;
    typedef lex::lexertl::lexer<token_type> lexer_type;
    typedef qi::in_state_skipper<custom_lexer<lexer_type>::lexer_def> skipper_type;

    typedef custom_lexer<lexer_type>::iterator_type iterator_type;

    custom_lexer<lexer_type> my_lexer; 
    custom_grammar<iterator_type, skipper_type> my_grammar(my_lexer);

    Iterator first = test.c_str();
    Iterator last = &first[test.size()];

    bool r = lex::tokenize_and_phrase_parse(first,last,my_lexer,my_grammar,qi::in_state( "WS" )[ my_lexer.self ]);

    std::cout << std::boolalpha << r << "\n";
    std::cout << "Remaining unparsed: '" << std::string(first,last) << "'\n";
} 
```

# informatica-powercenter - informatica 中的会话日志过载

> ID：13395457
> 
> 赞同：0
> 
> 时间：2012-11-15T10:21:33.140
> 
> 标签：informatica-powercenter, informatica

我有一个 mappig 来更新表中的某些列。只有 10% 或更少的记录应该得到更新。其余记录应被 informatica 拒绝。

如果不是所有记录都记录到会话日志文件中，映射就可以正常工作。除了使用过滤器转换之外，还有其他方法可以防止这种情况吗？我知道这可以通过过滤器转换来消除。但只是想检查是否有任何更简单的方法，比如选择一个选项或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:08:57.143

好吧，按照设计，您不应该让拒绝记录并让它们沉没。相反，控制拒绝的逻辑，以便将来如果拒绝逻辑发生变化，您可以控制自己。

此外，默认情况下，被拒绝的记录会记录到会话日志中，因为它应该是映射部分的异常行为，即某些数据没有通过流正确处理。

为避免将所有数据记录到会话日志中，您可以将会话的跟踪级别更改为 Terse。但是请记住，在这种情况下，您不会在会话中获得很多其他日志信息，这通常很有用。这将实现最终结果，但不是实现相同最终结果的“理想”方式。

我建议再次查看您的映射设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:07:10.713

将跟踪级别更改为`Terse`- 您可以将其配置为更新策略转换转换或整个会话 ( `Config Object`/ `Override tracing`)。

# python - 如何在 Windows 上安装 zeroRPC (python)

> ID：13395458
> 
> 赞同：2
> 
> 时间：2012-11-15T10:21:34.510
> 
> 标签：python, windows, installation, gevent

我想尝试 zeroRPC 但无法正确安装软件包。我在 Windows 7 下使用最新的 python_xy 发行版（python 2.7.3），我必须说我没有太多安装新模块的经验，因为发行版已经非常完整。

我从 gitHub 中提取了 master zeroRPC-python 并尝试执行“python setup.py install”

我遇到了第一个问题，例如“无法找到 vcvarsall.bat”。我通过安装 mingw 解决了这个问题，如下所述[错误：无法找到 vcvarsall.bat](https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat)

然后我可以运行安装直到结束，但是现在，当我导入 zerorpc 时，我得到以下 ImportError（仅堆栈的末尾）：

```
C:\Python27\lib\site-packages\gevent-0.13.8-py2.7-win32.egg\gevent\greenlet.py in <module>()
  4 import traceback
  5 from gevent import core
----> 6 from gevent.hub import greenlet, getcurrent, get_hub, GreenletExit, Waiter
  7 from gevent.timeout import Timeout
  8 

C:\Python27\lib\site-packages\gevent-0.13.8-py2.7-win32.egg\gevent\hub.py in <module>()
 28 
 29 try:
---> 30     greenlet = __import__('greenlet').greenlet
 31 except ImportError:
 32     greenlet = __import_py_magic_greenlet()

ImportError: No module named greenlet 
```

我更普遍地想知道我是否遵循正确的程序来安装新软件包（在 Windows 下），或者是否有一种更简单的方法（对依赖项更安全）我会忽略（easy_install）？我必须说我对此很陌生，任何提示或相关文档的链接将不胜感激。

提前致谢，

塞缪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T18:55:26.820

我自己在这个问题上挣扎了一段时间。该解决方案涉及多个组件，并且许多答案似乎与这些组件的不同版本有关，这些组件并不总是可以很好地协同工作。

这是对我有用的完整解决方案，从一个空的 virtualenv 开始：

```
mkvirtualenv myenv
python -m pip install --upgrade pip==6.0.8 wheel==0.24.0
pip install gevent-1.0.1-cp27-none-win32.whl pyzmq-13.1.0-cp27-none-win32.whl zerorpc==0.4.4 
```

第一步安装[wheel](https://pypi.python.org/pypi/wheel)并升级[pip](https://pypi.python.org/pypi/pip/)本身以支持wheel包安装。下一步为 gevent-1.0.1（可从这个[非官方但非常有用的 python windows 二进制文件页面](http://www.lfd.uci.edu/~gohlke/pythonlibs/#gevent)下载）和 pyzmq-13.1.0（[可在此处获得](https://pypi.python.org/pypi/pyzmq/13.1.0)）和 zerorpc-0.4.4 包以通常的方式从源安装二进制轮子.

请注意，我在这里对源包版本进行了硬编码（pip 6.0.8、wheel 0.24.0、zerorpc 0.4.4），因为正如我所说，其他版本并不总是遵循相同的构建模式。这可能不是必需的，未来的版本可能会被证明可以很好地协同工作。

我的最终结果：

```
(myenv) C:\work>pip freeze
gevent==1.0.1
greenlet==0.4.5
msgpack-python==0.4.5
pyzmq==13.1.0
wheel==0.24.0
zerorpc==0.4.4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T11:39:36.143

我使用了一种稍微不同的方式，我使用 Anaconda + Jupyter 来运行我的`python`笔记本。我使用[这个链接到 zerorpc 包](https://anaconda.org/groakat/zerorpc)，并使用安装

`conda install -c groakat zerorpc`

安装以下 -

[![在此处输入图像描述](../Images/51cca0ac794bd4c607c52a55eef276d0.png)](https://i.stack.imgur.com/IA9wA.png)

# python - python functools.partial 哪个函数

> ID：13395462
> 
> 赞同：1
> 
> 时间：2012-11-15T10:21:44.620
> 
> 标签：python

我有以下代码：

```
import functools
import random
import inspect 

def myfirst(a, b):
    return a + b

def mysecond(c, d):
    return c - d

def returnAPartial():  
    myrand = random.randrange(0,2)
    if myrand == 1:
        return functools.partial(myfirst, 1)
    else:
        return functools.partial(mysecond, 2) 
```

我将它加载到 python 交互中并运行：

```
myfunc = returnAPartial() 
```

我想（以编程方式）检查 myfunc 是否是 myfirst 或 mysecond 函数的部分应用程序（不是通过计算，这个例子有点做作）到目前为止我已经使用[了 inspect.getmembers()](http://docs.python.org/2/library/inspect.html)但我找不到合适的属性去检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:27:04.810

[`partial`对象](http://docs.python.org/2/library/functools.html#partial-objects)有一个`func`属性，这是你想要的：

```
 myfunc = returnAPartial()
 print myfunc.func # <function mysecond at 0x10c918488> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:31:04.053

内部`help`命令可以给你一些提示：

```
>import _functools
>help(_functools.partial)
...
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |
 |  args
 |      tuple of arguments to future partial calls
 |
 |  func
 |      function object to use in future partial calls
 |
 |  keywords
 |      dictionary of keyword arguments to future partial calls
 | 
```

# sql-server - 使用内部连接时如何在 sql server 中获取计数？

> ID：13395467
> 
> 赞同：2
> 
> 时间：2012-11-15T10:22:15.650
> 
> 标签：sql-server, count, row, inner-join

我有以下查询：

```
SELECT  
   h.helpcontent, s.MenuID, s.pkSitePageId, s.PageAliasName,
   s.SitePageName,s.pagepath
FROM 
   tblSiteRolePermissions p
INNER JOIN 
   tblSitePages s ON p.fkSitePageId = s.pkSitePageId
INNER JOIN 
   tblHelp h ON s.pkSitePageId=h.fkSitePageId
WHERE 
   (p.fkRoleId = 4 AND p.ViewOnly = 1) 
ORDER BY 
   s.pkSitePageId 
```

我想从`tblSiteRolePermissions`. 我已经尝试过，`Count`但它抛出了一些错误，例如：

> *消息 8120，级别 16，状态 1，第 1
> 行列 'tblHelp.HelpContent' 在选择列表中无效，因为它既不包含在聚合函数或 GROUP BY 子句中。*

请帮助我，让我知道我错在哪里。

**更新**

这是我正在尝试的代码：

```
SELECT 
    count(p.pkRolePermissionId), 
    h.helpcontent, s.MenuID, s.pkSitePageId, s.PageAliasName, 
    s.SitePageName, s.pagepath
FROM
    tblSiteRolePermissions p
INNER JOIN 
    tblSitePages s ON p.fkSitePageId = s.pkSitePageId
INNER JOIN
    tblHelp h ON s.pkSitePageId = h.fkSitePageId
WHERE 
    (p.fkRoleId = 4 AND p.ViewOnly = 1) 
ORDER BY 
    s.pkSitePageId 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:25:37.170

如果您使用聚合函数，则需要对语句中未在聚合中`GROUP BY`的剩余字段使用子句。`SELECT`与此类似：

```
SELECT  count(p.pkRolePermissionId) CountRolePermission,
  h.helpcontent, 
  s.MenuID, 
  s.pkSitePageId, 
  s.PageAliasName,
  s.SitePageName,
  s.pagepath
from tblSiteRolePermissions p
INNER JOIN tblSitePages s 
  ON p.fkSitePageId = s.pkSitePageId
inner join tblHelp h 
  on s.pkSitePageId=h.fkSitePageId
WHERE (p.fkRoleId =4 and p.ViewOnly=1) 
GROUP BY h.helpcontent, 
  s.MenuID, 
  s.pkSitePageId, 
  s.PageAliasName,
  s.SitePageName,
  s.pagepath
ORDER BY s.pkSitePageId 
```

如果你想要所有行的计数，那么你可以使用这样的东西：

```
SELECT  NumRows.TotalCount,
  h.helpcontent, 
  s.MenuID, 
  s.pkSitePageId, 
  s.PageAliasName,
  s.SitePageName,
  s.pagepath
from tblSiteRolePermissions p
INNER JOIN tblSitePages s 
  ON p.fkSitePageId = s.pkSitePageId
inner join tblHelp h 
  on s.pkSitePageId=h.fkSitePageId
cross join
(
  SELECT  count(*) TotalCount
  from tblSiteRolePermissions p
  INNER JOIN tblSitePages s 
    ON p.fkSitePageId = s.pkSitePageId
  inner join tblHelp h 
    on s.pkSitePageId=h.fkSitePageId
  WHERE (p.fkRoleId =4 and p.ViewOnly=1) 
) NumRows
WHERE (p.fkRoleId =4 and p.ViewOnly=1) 
ORDER BY s.pkSitePageId 
```

或者您可以在查询中使用 CTE，类似于：

```
;with cte as 
(
  SELECT h.helpcontent, 
    s.MenuID, 
    s.pkSitePageId, 
    s.PageAliasName,
    s.SitePageName,
    s.pagepath
  from tblSiteRolePermissions p
  INNER JOIN tblSitePages s 
    ON p.fkSitePageId = s.pkSitePageId
  inner join tblHelp h 
    on s.pkSitePageId=h.fkSitePageId
  WHERE (p.fkRoleId =4 and p.ViewOnly=1) 
)
select h.helpcontent, 
    s.MenuID, 
    s.pkSitePageId, 
    s.PageAliasName,
    s.SitePageName,
    s.pagepath, 
    (select count(*) from cte) as Total
from cte 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:25:59.523

```
SELECT count(p.pkRolePermissionId),h.helpcontent, s.MenuID, s.pkSitePageId, s.PageAliasName,
s.SitePageName,s.pagepath
from tblSiteRolePermissions p
INNER JOIN tblSitePages s ON p.fkSitePageId = s.pkSitePageId
inner join tblHelp h on s.pkSitePageId=h.fkSitePageId
WHERE (p.fkRoleId =4 and p.ViewOnly=1) 
GROUP BY h.helpcontent, s.MenuID, s.pkSitePageId, s.PageAliasName,
s.SitePageName,s.pagepath
ORDER BY s.pkSitePageId 
```

# mysql - 优化mysql查询（使用或创建索引）

> ID：13395468
> 
> 赞同：0
> 
> 时间：2012-11-15T10:22:17.427
> 
> 标签：mysql, select, indexing

我有一个使 PHP 超时的 SQL 请求（mySQL 5.1.51）。我想优化它，但我找不到缺少的东西。请求是：

```
SELECT s_i.incident,
       s.hostname,
       a.application,
       s_ie.problem_status,
       s_i.open_time,
       s_i.close_time,
       s_ie.open_group,
       s_ie.primary_assignment,
       s_ie.closed_by_group,
       s_ie.contact_first_name,
       s_ie.contact_last_name,
       s_ie.description,
       s_ie.resolution,
       s_ie.famille_1,
       s_ie.famille_2,
       s_ie.famille_3,
       YEARWEEK(s_i.open_time)              AS 'semaine_ouverture',
       DATE_FORMAT(s_i.open_time,  '%Y-%m') AS 'mois_ouverture',
       YEARWEEK(s_i.close_time)             AS 'semaine_cloture',
       DATE_FORMAT(s_i.close_time, '%Y-%m') AS 'mois_cloture',
       p.nom,
       s.exploite_par,
       t.environnement,
       a.tdb
FROM t_link_serveur_eac t USE KEY(nna)
     INNER JOIN serveur          s    ON s.id            = t.id_serveur
     INNER JOIN plateau          p    ON p.id            = t.id_plateau
     INNER JOIN applications     a    ON a.nna           = t.nna
     INNER JOIN scope_i          s_i  USE KEY (id_serveur) ON s_i.id_serveur  = t.id_serveur
     INNER JOIN scope_i_extended s_ie USE KEY (id_scope_i) ON s_ie.id_scope_i = s_i.id
WHERE s_ie.problem_status     = 'Closed'
AND   s_ie.contact_first_name = 'AUTOMATE'
AND   s_ie.contact_last_name LIKE '%BEM%'
AND   p.id           = 4
AND   open_time >= CURDATE() - INTERVAL 52 WEEK AND open_time <= CURDATE()
AND   AND s_i.close_time < CURDATE() - INTERVAL DAYOFMONTH(CURDATE()) - 1 DAY
ORDER BY mois_cloture 
```

当我要求 mySQL 解释它时，我有一个用于表 s_ie 的联合的行类型“ALL”。我试图创建/修改所有可能的索引，但我所有的尝试都没有任何区别：

```
id  select_type   table   type    possible_keys   key        key_len  ref                  rows   Extra
1   SIMPLE        p       const   PRIMARY         PRIMARY    4        const                 1     Using temporary; Using filesort
1   SIMPLE        a       ALL     PRIMARY         NULL       NULL     NULL                  957
1   SIMPLE        t       ref     nna             nna        26       inspire.a.nna         10    Using where
1   SIMPLE        s       eq_ref  PRIMARY         PRIMARY    4        inspire.t.id_serveur  1
1   SIMPLE        s_i     ref     id_serveur      id_serveur 4        inspire.t.id_serveur  135   Using where
1   SIMPLE        s_ie    eq_ref  id_scope_i      id_scope_i 4        inspire.s_i.id        1     Using where 
```

s_ie 有 712.000 行和 s_i 740.000 所以我认为问题出在这个路口

这是表s_ie的结构

```
CREATE TABLE IF NOT EXISTS `scope_i_extended` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_scope_i` int(11) NOT NULL,
  `problem_status` varchar(16) NOT NULL,
  `open_group` varchar(32) NOT NULL,
  `primary_assignment` varchar(32) NOT NULL,
  `closed_by_group` varchar(32) NOT NULL,
  `contact_first_name` varchar(32) NOT NULL,
  `contact_last_name` varchar(32) NOT NULL,
  `description` text NOT NULL,
  `resolution` text NOT NULL,
  `famille_1` text NOT NULL,
  `famille_2` text NOT NULL,
  `famille_3` text NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `id_scope_i` (`id_scope_i`),
  UNIQUE KEY `problem_status` (`id_scope_i`, `problem_status`, `contact_first_name`, `contact_last_name`),
  KEY `contact_last_name` (`contact_last_name`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

和s_i的结构

```
CREATE TABLE IF NOT EXISTS `scope_i` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `incident` varchar(20) NOT NULL,
  `statut` varchar(20) NOT NULL,
  `id_serveur` int(11) NOT NULL,
  `open_time` datetime NOT NULL,
  `close_time` datetime DEFAULT NULL,
  `affectation` varchar(50) NOT NULL,
  `titre` varchar(200) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `incident` (`incident`),
  KEY `serveur` (`id_serveur`),
  KEY `serveur_open_time` (`id_serveur`,`open_time`),
  KEY `id_serveur` (`id_serveur`,`close_time`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=738862 ; 
```

你能帮我/救我吗？

问候，

奥利维尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:46:39.643

很抱歉说明了这一点，但我建议使用：
`"YEARWEEK(open_time) <= '201246' AND YEARWEEK(open_time) >= '201146'"`

代替
`"YEARWEEK(open_time) IN (...)"`

IN 总是显着减慢速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:16:59.887

在您的情况下，您将日期列包装在 Mysql 函数中。例如：`YEARWEEK(open_time)`并且`DATE_FORMAT(s_i.close_time, '%Y-%m-%d')` 您应该避免这种情况，因为 Mysql 似乎为表的每一行执行该函数。

你可以尝试更换

`DATE_FORMAT(s_i.close_time, '%Y-%m-%d') < DATE_FORMAT(NOW(), '%Y-%m-01')`

经过

`s_i.close_time < CURDATE() - INTERVAL DAYOFMONTH(CURDATE()) - 1 DAY`

和

`YEARWEEK(open_time) IN ('201246', '201245'....)`

通过这个：（以下是让所有记录在一年内都有“open_time”的条件。我不确定是不是你的情况）

`open_time >= CURDATE() - INTERVAL 1 YEAR AND open_time <= CURDATE()`

# java - 比较JAVA中的字符串数组

> ID：13395471
> 
> 赞同：1
> 
> 时间：2012-11-15T10:22:49.663
> 
> 标签：java, arrays, nullpointerexception

我在 for 循环中有以下代码，以查看字符串是否等于搜索字符串：

```
if(Data.coord[i].equals(Data.search)) 
```

我已经用确切的值测试了代码，即如果 1=1 并且其余代码工作正常。它只是不喜欢字符串比较。控制台给出了这个错误：

```
Exception in thread "main" java.lang.NullPointerException
at highercoursework.Search.main(Search.java:16)
at highercoursework.Main.main(Main.java:16) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:25:46.030

您的数组中有一个未填充的元素，即

```
Data.coord[i] 
```

是`null`。请注意，Data.search 可能为 null，但该`equals()`方法将处理此问题。您只需要先执行 lement 检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:26:12.537

您应该将常数与您的参数进行比较，因为它可以是`null`.

例如，如果`Data.search`是您正在搜索的常量，您应该这样做：

```
if(Data.search.equals(Data.coord[i])) 
```

在这种情况下，您最终不会尝试在`null`引用上调用方法，也不需要不必要`null`的检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:12:55.700

您可以通过两种方式避免您的问题：

*   在这种情况下 coord[i] 不应该为空

    ```
    if (Data.coord[i] != null) {
        if(Data.coord[i].equals(Data.search)) {

        }
    } else {
        logger.error("Unexpected Behavior: coord[i] should not be null");
    } 
    ```

注意：您可以用更适合您要求的代码替换记录器消息。

* * *

*   如果您的 coord[i] 可以为空

如果 Data.coord[i] 为空，则以这种方式进行比较不会引发异常。（假设Data.search是一个常量，不能为null）所以这种情况的规则是：优先使用String对象常量调用equals方法。

```
if (Data.search.equals(Data.coord[i])) {} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T10:27:36.790

```
String[] coord = new String[100]; 
```

这意味着您可以为 coord[0] 分配一些东西，但在您这样做之前，coord[0] 为空。因此出现空指针异常。

你可以试试。

```
String data= Data.coord[i];
if(data != null && data.equals(Data.search)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T10:28:14.490

尝试这个：

```
if(DATA != null && Data.coord[i].equals(Data.search)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T10:33:42.240

阅读本文以了解[什么是空指针异常？](https://stackoverflow.com/questions/218384/what-is-a-null-pointer-exception)

如果 coord[] 已正确初始化，则 value`Data.coord[i]`可能为 null。你可以检查

```
if(Data.coord[i] != null && Data.coord[i].equals(Data.search)) {} 
```

# emacs - yasnippet 和反斜杠

> ID：13395476
> 
> 赞同：0
> 
> 时间：2012-11-15T10:23:09.610
> 
> 标签：emacs, auctex, yasnippet

我已经在 emacs 24 上安装了 elpa 的 yasnippet 0.8，我想编写一个片段，将此文本插入 LaTeX 文档（使用 AUCTeX）：

```
\\

\vspace{10pt} 
```

所以我有这个片段：

```
# -*- mode: snippet -*-
# name: para
# key: para
# binding: direct-keybinding
# expand-env: ((some-var some-value))
# type: command
# --
\\\\

\\vspace{10pt} 
```

但是当我键入时`para<TAB>`，所发生的只是文本`para`被删除。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:57:32.857

您正在使用一些不应该存在的默认值。将其更改为：

```
# -*- mode: snippet -*-
# name: para
# key: para
# --
\\\\

\\vspace{10pt} 
```

# cllocationmanager - CLLocationManager“打开位置服务”取消按钮按下委托

> ID：13395480
> 
> 赞同：2
> 
> 时间：2012-11-15T10:23:17.103
> 
> 标签：cllocationmanager

如果用户在“打开位置服务”提示中按下了取消按钮，我想知道并采取一些措施。我试过在

```
(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

委托方法，但这个断点没有被命中。

我想知道位置服务是否关闭并且用户是否点击了取消，这样我就不会一次又一次地进入相同的工作流程。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T05:09:36.187

实现 CLLocationManagerDelegate 的`locationManager:didChangeAuthorizationStatus:`方法。当您的应用启动时，授权状态将为`kCLAuthorizationStatusNotDetermined`. 当用户选择 Yes 或 No 时，此方法将被调用，状态为`kCLAuthorizationStatusAuthorized`or `kCLAuthorizationStatusDenied`。

# r - 替换与值“NA”不同的所有值

> ID：13395487
> 
> 赞同：1
> 
> 时间：2012-11-15T10:23:31.073
> 
> 标签：r, replace, na

在我努力学习使用 R 的过程中，我似乎偶然发现了一个困境。我有一个如下所示的数据集：

```
col1 / col2 / col3   

不适用 / 1 / 2

1 / 不适用 /2

```

我需要做的是用另一个值替换所有不是 NA 的东西（见下文）

```
Col1 / col2 / col 3

NA / 数据 / 数据

数据/NA/数据

```

我在网上到处查看，似乎每个人都想`NA`用其他值替换 's，另一方面，我需要完全相反但找不到任何命令。我什至查看了“IF”，但只能找到替换值的函数，如果它们是eiter`<`或`=`or`>`到某个数字。我需要一些可以指定...“如果与 不同`NA`，则替换为...”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:29:33.900

数据：

```
dat <- data.frame(col1 = c(NA, 1), col2 = c(1, NA), col3 = c(2, 2)) 
```

要选择所有*不是* `NA`的值，请使用逻辑运算符`!`（“not”）和`is.na`：

```
dat[!is.na(dat)] <- "Data"

  col1 col2 col3
1 <NA> Data Data
2 Data <NA> Data 
```

同样的功能也可以实现`replace`：

```
replace(dat, !is.na(dat), "Data") 
```

* * *

如果要替换因子的值，则需要另一种方法。这可以通过以下命令来实现：

```
replace(data.frame(lapply(dat, as.character), stringsAsFactors = FALSE),
        !is.na(dat), "Data") 
```

# spring - 最大并发会话数不适用于同一浏览器

> ID：13395488
> 
> 赞同：0
> 
> 时间：2012-11-15T10:23:45.673
> 
> 标签：spring, spring-security

我已将最大会话数配置为 1 并设置`error-if-maximum-exceeded=true` 我注意到两个问题：

1-如果已配置`session-authentication-error-url`则不起作用，优先，然后您必须在那里处理并制定所需的逻辑。`authentication-failure-handler-ref``authentication-failure-handler-ref``SessionAuthenticationException`

2-如果我在 chrome 中打开会话并尝试在 firefox 中登录，`SessionAuthenticationException`但如果我尝试在 chrome 中再次登录（已经有一个打开的会话），我会成功登录并且没有得到`SessionAuthenticationException` 我应该阻止用户如果他已经通过身份验证，从查看登录页面？如果这是正确的，请告知如何做到这一点。

我通常按​​如下方式检查经过身份验证的用户：

```
if(!SecurityContextHolder.getContext().getAuthentication().getPrincipal().equals("anonymousUser")){
  // logged in user
} 
```

这是我当前的配置：

**1- web.xml：**

```
 <filter>
      <filter-name>springSecurityFilterChain</filter-name>
       <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
       </filter-class>
    </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
  </filter-mapping>

  <listener>
      <listener-class>
      org.springframework.security.web.session.HttpSessionEventPublisher
      </listener-class>
  </listener> 
```

**2- applicationSecurity.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <bean id="passwordEncoder"
        class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
        <constructor-arg value="256"/>
    </bean>

    <bean id="saltSource"
        class="org.springframework.security.authentication.dao.ReflectionSaltSource">
        <property name="userPropertyToUse" value="username" />
    </bean>

    <bean id="customUserDetailsService"
        class="com.myapp.faces.web.services.CustomUserDetailsService" />

    <security:authentication-manager alias="authenticationManager">
        <security:authentication-provider user-service-ref="customUserDetailsService">
            <security:password-encoder ref="passwordEncoder">
                <security:salt-source ref="saltSource" />
            </security:password-encoder>
        </security:authentication-provider>
    </security:authentication-manager>

    <bean id="loginSuccessHandler" class="com.myapp.faces.web.services.LoginSuccessHandler">
       <property name="defaultTargetUrl" value="/dashboard"/>
    </bean>

    <bean id="loginFailureHandler" class="com.myapp.faces.web.services.LoginFailureHandler" />

    <security:http use-expressions="true"  auto-config="true" >

        <security:intercept-url pattern="/j_spring_security_check" access="permitAll" />

        <security:intercept-url pattern="/faces/javax.faces.resource/**" access="permitAll"/>
        <security:intercept-url pattern="/xmlhttp/**" access="permitAll" />
        <security:intercept-url pattern="/resources/**" access="permitAll" />

        <security:intercept-url pattern="**/faces/javax.faces.resource/**" access="permitAll" />
        <security:intercept-url pattern="**/xmlhttp/**" access="permitAll" />
        <security:intercept-url pattern="**/resources/**" access="permitAll" />

        <security:intercept-url pattern="/login" access="permitAll"/>       

        <security:intercept-url pattern="/**" access="isAuthenticated()" />     

        <security:form-login                
            login-processing-url="/j_spring_security_check"         
            login-page="/login"
            authentication-failure-handler-ref="loginFailureHandler"
            authentication-success-handler-ref="loginSuccessHandler" />

        <security:logout  />

        <security:session-management session-authentication-error-url="/login?error=3">
          <security:concurrency-control max-sessions="1" error-if-maximum-exceeded="true"/>
        </security:session-management>

    </security:http>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:30:57.937

我个人是这样做的。

```
 @RequestMapping(method=RequestMethod.GET)
    public String login(Authentication authentication)
    {
        if((authentication != null) && authentication.isAuthenticated())
        {
            return "redirect:dashboard";
        }
        return viewResolver.getView(ViewConstants.LOGIN_PAGE);
    } 
```

上述方法用于请求登录页面。

我不认为有办法只使用配置来做到这一点。我可能错了。

编辑 ：

检查此[链接](https://stackoverflow.com/questions/12597519/how-to-redirect-to-the-homepage-if-the-user-accesses-the-login-page-after-being)

# c++ - 用于复杂 C++ 项目的动态死代码消除工具

> ID：13395490
> 
> 赞同：2
> 
> 时间：2012-11-15T10:23:54.367
> 
> 标签：c++, code-analysis, legacy-code, dead-code

我们有一个包含大量代码的项目，其中一部分是遗留代码。作为工作流程的一部分，每隔一段时间，都会检查产品的所有功能。我想知道是否有办法使用这个事实来动态检查代码的哪些部分从未使用过？（困难的部分是 C++ 代码，.Net 和 Java 更受控制，遗留更少）。

另外 - 是否有可以处理大量代码和复杂项目（即~1M 行）的动态死代码消除工具？

我发现的所有类似问题都涉及我们都准备好的静态分析。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T13:25:21.830

您可能想查看测试中使用的代码覆盖率工具。这些工具的想法是它们对代码进行检测，在运行一组测试后，您可以知道哪些代码行至少执行了一次，哪些代码行从未执行过。之后，您可以改进测试。

如果你有足够多样化的执行环境，同样的事情可以用来识别死代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T17:41:28.390

我不知道您在哪个平台上，但如果您使用 gnu 工具链进行编译，我们已经成功使用了 Gcov：

[http://gcc.gnu.org/onlinedocs/gcc/Gcov.html](http://gcc.gnu.org/onlinedocs/gcc/Gcov.html)

# c# - 我可以使用 C# 方法的结果（带有参数）作为另一个方法的默认参数吗？

> ID：13395492
> 
> 赞同：3
> 
> 时间：2012-11-15T10:23:58.733
> 
> 标签：c#, static-methods

我有一个带有方法的静态类：

```
public static class FooUtilities
{
   public static FooStruct[] GetFooBar(int foo)
   {
      var fooStruct = new FooStruct[];
      // Connect to SOAP API, collect data to put in fooStruct
      ...
      return fooStruct;
   }
} 
```

现在我想使用 GetFooBar(int foo) 的结果作为另一个方法的参数，该方法使用此方法的结果创建新的 fooItem 项，例如：

```
public static FooItem CreateFooItem(fooResult = GetFooBar(int foo))
{
   var fooItem = new FooItem(fooResult[0].value, fooResult[1].value,fooResult[2].value);
   ...
   return fooItem;
} 
```

我现在这样做的方式是这样写：

```
public static FooItem CreateFooItem(FooStruct[] fooResult)
{
   var fooItem = new FooItem(fooResult[0].value, fooResult[1].value,fooResult[2].value);
   ...
   return fooItem;
} 
```

这行得通，但是我必须调用如下方法：

```
FooItem myItem = FooUtilities.CreateFooItem(FooUtilities.GetFooBar(12321)); 
```

我想要的是能够打电话：

```
FooItem myItem = FooUtilities.CreateFooItem(); 
```

并在调用此方法时隐式包含参数。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:26:25.070

你不能这样做。从[规格](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：

> 默认值必须是以下表达式类型之一：
> 
> *   一个常量表达式；
>     
>     
> *   new ValType() 形式的表达式，其中 ValType 是值类型，例如枚举或结构；
>     
>     
> *   default(ValType) 形式的表达式，其中 ValType 是值类型。

如果您尝试过您的`CreateFooItem(fooResult = GetFooBar(int foo))`示例，则会收到编译器错误“'fooResult' 的默认参数值必须是编译时常量”，这是上述的较短版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T10:27:37.493

不，您只能使用可以表示为常量文字值的值。但是，您通常*可以*设置默认值（如果参数是不可为空的结构，则`null`切换到），并手动应用默认值：`Nullable<T>`

```
public static FooStruct[] GetFooBar(int? foo = null)
{
   int fooVal = foo ?? SomeMethod({some args here});
   // ... use fooVal from now on
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T10:28:11.727

不，默认参数值需要是编译时间常数。但是你可以这样做：

```
public static FooItem CreateFooItem(FooStruct[] fooResult = null)
{
    if(fooResult==null)
    { 
        fooResult = FooUtilities.GetFooBar(12321);
    }
    ...
} 
```

如果`GetFooBar`每次都会产生相同的默认值，您可以选择“保存”该默认值。这可能会根据用例提高性能：

```
private FooStruct[] defaultValue = null;
public static FooItem CreateFooItem(FooStruct[] fooResult = null)
{
    if(fooResult==null)
    { 
        fooResult = defaultValue ?? defaultValue = FooUtilities.GetFooBar(12321);
    }
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T10:28:58.790

您不能通过指定默认参数值来做到这一点（请参阅@Rawling 的答案），但您可以创建一个调用第一个参数的零参数重载：

```
public static FooItem CreateFooItem()
{
    return CreateFooItem(GetFooBar(12321))
} 
```

# .net - 在 Visual Studio 的监视窗口中自动刷新

> ID：13395493
> 
> 赞同：18
> 
> 时间：2012-11-15T10:23:59.903
> 
> 标签：.net, visual-studio, debugging, watch-window

> **可能重复：**
> [“此表达式会导致副作用，不会被评估”。怎么压制？](https://stackoverflow.com/questions/4178647/this-expression-causes-side-effects-and-will-not-be-evaluated-how-to-suppress)

我在 Visual Studio 中使用 Watch 窗口。我在 Watch 窗口中添加了一些变量。有时要在调试时获取值，我必须单击刷新图标。是不是有一些设置可以让它自动刷新？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-25T22:10:35.277

您可以附加`,ac`到监视表达式以使其自动刷新值。

例如，而不是`xyz.ToString()`使用`xyz.ToString(),ac`.

有关更多信息，请参阅[此答案](https://stackoverflow.com/a/6814855/1928765)。

# php - Yii App 在 Linux 服务器上达到内存限制

> ID：13395494
> 
> 赞同：1
> 
> 时间：2012-11-15T10:24:00.793
> 
> 标签：php, memory, yii, limit, cpanel

我有一个非常奇怪的问题，我不知道如何解决它。我的应用程序不时达到内存限制，并发生内部服务器错误 500。我的共享主机限制为 570MB。我尝试调试我的应用程序，YiiDebug 工具栏显示每个页面都消耗大约 10-12MB 的内存。我真的不明白问题出在哪里。在我的本地 wamp 服务器上，没有问题。

谁能帮我？至少告诉我从哪里开始寻找内存泄漏，因为我看不到任何明显的东西。这是不可预知的问题，它不会在某些特定请求上发生。我已经在 index.php 中注释了“YII_DEBUG”行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:33:35.293

[请参阅 - http://www.yiiframework.com/forum/index.php/topic/15647-memory-usage/](http://www.yiiframework.com/forum/index.php/topic/15647-memory-usage/)上的帖子

有点过时，但要点仍然相关。

如果可以，请使用某种缓存软件来补充 Active Record 系统。

如果您使用 Active Record，请确保加载的模型数量不会太多。

调试需要额外的内存 - 如果您不需要它，请禁用它。

如果问题仍然存在，请考虑从活动记录转移到 DAO，但这可能会很麻烦。

你用的是什么版本的 Yii？您网站上的典型访问者数量是多少？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:42:29.660

如果你有很多 AR 记录，你还可以查看刚刚登陆 master的全新[CActiveDataProviderIterator 。](https://github.com/yiisoft/yii/pull/546)它还不是一个稳定的 Yii 版本的一部分，并且几乎没有文档（实际上我正在帮助解决这个问题）。但可能是您遇到一些内存限制的地方。

你是否通过任何改变来使用 GiiX？我发现它在某些地方效率相当低，导致需要更精简地查询......

# actionscript-3 - 图像的本地存储以在 Flash 应用程序中再次使用它们

> ID：13395501
> 
> 赞同：0
> 
> 时间：2012-11-15T10:24:47.507
> 
> 标签：actionscript-3, flash, air, local-storage

我有一个 Flash 应用程序，它有两件事 1.浏览新的图像组件 2.构建滚动图像库组件-只有 10 个最近上传的图像

如何在用户浏览时保存新图像并将其存储在本地，然后在以后的会话中再次使用它（从保存的位置加载图像并在用户下次访问时再次构建滚动条）

请帮助我知道如何在本地保存图像，然后再使用它，更像是一个历史应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:32:28.040

干得好 ：

这段代码将图像保存在共享对象中，并在您重新启动时恢复它们。

![结果](../Images/f648d0d86e72f5ce7ac321d30b28d69e.png)

```
package{
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.net.FileFilter;
    import flash.net.FileReference;
    import flash.net.SharedObject;
    import flash.text.TextField;
    import flash.utils.ByteArray;

    [SWF(width="100",height="800")]
    public class TestSO extends Sprite{

        private var _soFileIndex : SharedObject = SharedObject.getLocal("fileIndex");
        private var _addBtn : Sprite = new Sprite;
        private var _fr : FileReference = new FileReference;

        public function TestSO(){
            // Add a button
            var tf : TextField = new TextField;
            tf.text = "Add image";
            tf.width = 100;
            tf.height = 20;
            tf.selectable = false;
            _addBtn.addChild(tf);
            _addBtn.graphics.beginFill(0xDDDDDD);
            _addBtn.graphics.drawRect(0,0,_addBtn.width, _addBtn.height);
            _addBtn.graphics.endFill();
            addChild(_addBtn);

            // If file index is empty
            if(!_soFileIndex.data.index)
                _soFileIndex.data.index = [];
            else{
                // Display stored images
                for each(var fileName : String in _soFileIndex.data.index)
                    displayImage(fileName, SharedObject.getLocal(fileName).data.bytes)
            }

            // Listeners
            _addBtn.addEventListener(MouseEvent.CLICK, onAddClick);
            _fr.addEventListener(Event.SELECT, onFileSelected);
            _fr.addEventListener(Event.COMPLETE, onFileLoaded);
        }

        // Ask for a file
        private function onAddClick(e : Event) : void{
            _fr.browse([new FileFilter("Images", "*.jpg;*.jpeg;*.png")]);
        }

        // open file
        private function onFileSelected(e : Event) : void{
            _fr.load();
        }

        // save file
        private function onFileLoaded(e : Event) : void{

            var fileName : String = _fr.name.split(" ").join("_");
            // Save a reference to filename
            if(_soFileIndex.data.index.indexOf(fileName) == -1)
                _soFileIndex.data.index.push(fileName);
            else return;

            var fileSo : SharedObject = SharedObject.getLocal(fileName);
            fileSo.data.bytes = _fr.data;
            fileSo.flush();

            displayImage(fileName, _fr.data);
        }

        // Display an image
        private function displayImage(name : String, data : ByteArray):void{
            var item : Sprite = new Sprite;

            // Load image
            var imgLoader : Loader = new Loader;
            imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,onImageLoaded);
            imgLoader.loadBytes(data);
            item.addChild(imgLoader);

            var label : TextField = new TextField;
            label.text = name;
            label.y = 100;
            label.height = 20;
            item.addChild(label);

            item.y = height;
            addChild(item);
        }

        // Resize image when loaded
        private function onImageLoaded(e : Event) : void{
            e.target.content.width = e.target.content.height = 100;
            e.target.removeEventListener(Event.COMPLETE,onImageLoaded);
        }
    }
} 
```

# workflow - 重新启动 WF 活动时 EDA_ITEMS_UPDATE 存储过程上的 Tridion 工作流错误

> ID：13395502
> 
> 赞同：4
> 
> 时间：2012-11-15T10:24:49.480
> 
> 标签：workflow, tridion, tridion-2011

**每当重新启动**工作流的 2 个或更多实例时，我都会遇到错误。在我们办公室发生网络事件期间，我们暂停了工作流程。脚本超时中断了该过程。我无法再重现此超时，因此我尝试重新启动工作流活动以完成该过程。但是，当我重新启动超过 1 个暂停的活动时，我收到此错误（完整日志在下方更远）：

```
Cannot insert the value NULL into column 'ITEM_ID', table 'tridion_cm.dbo.ITEM_ASSOCIATIONS'; column does not allow nulls. INSERT fails.
The statement has been terminated. 
```

重新启动活动并让它一个一个完成没有问题。

**完整事件日志：**

```
An error occurred while executing the Workflow script.
The Script Engine returned the following information:

SOURCE:

    Line = 0
    Column = 0
    Number = -2147220673
    Source = Component.Save
    Description = 
```

```
<?xml version="1.0" standalone="yes"?>
<tcm:Error ErrorCode="8004033F" Category="4" Source="Kernel" Severity="1" xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
    <tcm:Line ErrorCode="8004033F" Cause="false" MessageID="16137"><![CDATA[Unable to save Component (tcm:5-32795).]]>
        <tcm:Token>RESID_4574</tcm:Token>
        <tcm:Token>RESID_4418</tcm:Token>
        <tcm:Token>tcm:5-32795</tcm:Token>
    </tcm:Line>
    <tcm:Line ErrorCode="8004033F" Cause="true">CDATA[No data found. ETA_ITEMS, U Cannot insert the value NULL into column 'ITEM_ID', table 'tridion_cm.dbo.ITEM_ASSOCIATIONS'; column does not allow nulls. INSERT fails. The statement has been terminated.
    </tcm:Line>
    <tcm:Line ErrorCode="8004033F" Cause="false"><![CDATA[A database error occurred while executing Stored Procedure "EDA_ITEMS_UPDATE".]]>
        <tcm:Token>EDA_ITEMS_UPDATE</tcm:Token>
    </tcm:Line>
    <tcm:Details>
        <tcm:CallStack>
            <tcm:Location>System.Data.SqlClient.SqlConnection.OnError(SqlException,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlInternalConnection.OnError(SqlException,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(</tcm:Location>
            <tcm:Location>System.Data.SqlClient.TdsParser.Run(RunBehavior,SqlCommand,SqlDataReader,BulkCopySimpleResultSet,TdsParserStateObject)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader,RunBehavior,String)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior,RunBehavior,Boolean,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior,RunBehavior,Boolean,String,DbAsyncResult)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult,String,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.ExecuteNonQuery()</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.DatabaseUtilities.ExecuteNonQuery(StoredProcedureInvocation)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.Sql.SqlDatabaseUtilities.ExecuteNonQuery(StoredProcedureInvocation)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.Sql.SqlDatabaseUtilities.ExecuteNonQuery(StoredProcedureInvocation)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.IdentifiableObjectDataMapper.Tridion.ContentManager.Data.IIdentifiableObjectDataMapper.Update(IdentifiableObjectData)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.IdentifiableObject.Save(SaveEventArgs)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.ContentManagement.VersionedItem.Save(Boolean)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.ContentManagement.VersionedItem.Save()</tcm:Location>
            <tcm:Location>Tridion.ContentManager.BLFacade.ContentManagement.VersionedItemFacade.UpdateAndCheckIn(UserContext,String,Boolean,Boolean)</tcm:Location>
            <tcm:Location>XMLState.Save</tcm:Location>
            <tcm:Location>Component.Save</tcm:Location>
        </tcm:CallStack>
    </tcm:Details>
</tcm:Error> 
```

```
 HelpFile = 
    HelpContext = 1000440
caused by: Component.Save
and description: 
```

```
<?xml version="1.0" standalone="yes"?>
<tcm:Error ErrorCode="8004033F" Category="4" Source="Kernel" Severity="1" xmlns:tcm="http://www.tridion.com/ContentManager/5.0">
    <tcm:Line ErrorCode="8004033F" Cause="false" MessageID="16137"><![CDATA[Unable to save Component (tcm:5-32795).]]>
        <tcm:Token>RESID_4574</tcm:Token>
        <tcm:Token>RESID_4418</tcm:Token>
        <tcm:Token>tcm:5-32795</tcm:Token>
    </tcm:Line>
    <tcm:Line ErrorCode="8004033F" Cause="true">CDATA[No data found. ETA_ITEMS, U Cannot insert the value NULL into column 'ITEM_ID', table 'tridion_cm.dbo.ITEM_ASSOCIATIONS'; column does not allow nulls. INSERT fails. The statement has been terminated.
    </tcm:Line>
    <tcm:Line ErrorCode="8004033F" Cause="false"><![CDATA[A database error occurred while executing Stored Procedure "EDA_ITEMS_UPDATE".]]>
        <tcm:Token>EDA_ITEMS_UPDATE</tcm:Token>
    </tcm:Line>
    <tcm:Details>
        <tcm:CallStack>
            <tcm:Location>System.Data.SqlClient.SqlConnection.OnError(SqlException,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlInternalConnection.OnError(SqlException,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(</tcm:Location>
            <tcm:Location>System.Data.SqlClient.TdsParser.Run(RunBehavior,SqlCommand,SqlDataReader,BulkCopySimpleResultSet,TdsParserStateObject)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader,RunBehavior,String)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior,RunBehavior,Boolean,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior,RunBehavior,Boolean,String,DbAsyncResult)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult,String,Boolean)</tcm:Location>
            <tcm:Location>System.Data.SqlClient.SqlCommand.ExecuteNonQuery()</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.DatabaseUtilities.ExecuteNonQuery(StoredProcedureInvocation)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.Sql.SqlDatabaseUtilities.ExecuteNonQuery(StoredProcedureInvocation)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.Sql.SqlDatabaseUtilities.ExecuteNonQuery(StoredProcedureInvocation)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.Data.AdoNet.IdentifiableObjectDataMapper.Tridion.ContentManager.Data.IIdentifiableObjectDataMapper.Update(IdentifiableObjectData)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.IdentifiableObject.Save(SaveEventArgs)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.ContentManagement.VersionedItem.Save(Boolean)</tcm:Location>
            <tcm:Location>Tridion.ContentManager.ContentManagement.VersionedItem.Save()</tcm:Location>
            <tcm:Location>Tridion.ContentManager.BLFacade.ContentManagement.VersionedItemFacade.UpdateAndCheckIn(UserContext,String,Boolean,Boolean)</tcm:Location>
            <tcm:Location>XMLState.Save</tcm:Location>
            <tcm:Location>Component.Save</tcm:Location>
        </tcm:CallStack>
    </tcm:Details>
</tcm:Error> 
```

```
Source:
    LogScriptError 
```

**工作流程信息**

组件是由另一个应用程序通过 BusinessConnector 新创建的。它在完成活动之前执行修订保存。WF的目标是

1.  根据来自其他系统的文本值分配必要的组件链接；
2.  创建一个页面;
3.  并将其发布到目标。

我知道这可以通过其他方式做得更好，但现在就是这样，请耐心等待。

**模型/架构**

```
Product
    - modelName (text)
    - categoryName (text)
    - categoryCL (component link)
    - statusName (text)
    - statusCL (component link)
    - blah1 (text)
    - blah2 (text)
    - blah3 (text)
    - blah4 (text) 
```

**自动活动脚本：**

```
' COMPONENT WORKFLOW for PRODUCT SCHEMA (START)

' Load common functions
ExecuteGlobal oTDSE.GetObject("/webdav/200%20Design/Building%20Blocks/Library/Design/Workflow/Common/Workflow%20Functions.tbbs", 1).Content

' Initialize
Set objComp = CurrentWorkItem.GetItem()
Set oContentPub = objComp.Publication
Set oWebsitePub = oTDSE.GetObject(GetStagingLangPub("EN", "website1"), 1)
modelName = objComp.Fields.Item("modelName").Value.Item(1)

' Search and Assign component links based on some text fields from BC client
Set compListRowFilter = oTDSE.CreateListRowFilter()
Call compListRowFilter.SetCondition("ShowNewItems", TRUE)
Call compListRowFilter.SetCondition("ItemType", 16)

' Assign the first component link (categoryCL)
categoryName = objComp.Fields.Item("categoryName").Value.Item(1)
Set categoryComp = GetObjectFromFolder(categoryName, oTDSE.GetObject(categoryFolderWebDav, 1), compListRowFilter)
If Not categoryComp is Nothing Then
    objComp.Fields.Item("categoryCL").Value.RemoveAll
    objComp.Fields.Item("categoryCL").Value.Add(categoryComp)
    Call objComp.Save(True)
Else
    Call SendNoObjectEmail("Category", categoryName, "categoryCL", GetEmailsFromGroup(oContentPub, categoryOwner), "")
End if

' Assign the second component link (statusCL)
statusName = objComp.Fields.Item("statusName").Value.Item(1)
Set statusComp = GetObjectFromFolder(statusName, oTDSE.GetObject(statusFolderWebDav, 1), compListRowFilter)
If Not statusComp is Nothing Then
    objComp.Fields.Item("statusCL").Value.RemoveAll
    objComp.Fields.Item("statusCL").Value.Add(statusComp)
    Call objComp.Save(True)
Else
    Call SendNoObjectEmail("Status", statusName, "statusCL", GetEmailsFromGroup(oContentPub, statusOwner), "")
End if

' Create a page with the component in WF
Set oPage = CreateDefaultPage(modelName, oWebSitePub, SaveToFolderWebDav, PageTemplateWebDav)
Call oPage.ComponentPresentations.Add(oWebSitePub, oTDSE.GetObject(ComponentTemplateWebDav, 1))
oPage.Save(True)

' Publish the page
....

' Send email
....

' Finish the Activity
Call CurrentWorkItem.ActivityInstance.FinishActivity("someMsg")

' COMPONENT WORKFLOW for PRODUCT SCHEMA (END) 
```

我没有放大到它发生的确切位置，但我会假设它是 categoryCL 或 statusCL 的`objComp.Save(True)`行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:14:21.460

我注意到您正在调用`Call objComp.Save(True)`-“True”参数强制执行“CheckIn”，因为它意味着“完成编辑”。

看起来这可能会发生两次（即，如果有一个 statusCL 和一个 categoryCL），这可能会导致问题。我会尝试更改行为，以便`Save()`在进行更改时仅在最后调用方法，而不是保存两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:42:48.667

从我看到的问题是您试图将空值分配为组件链接。您确定您没有尝试将这两个组件相互链接吗？您尝试创建的链接可能是工作流中的新组件（它还没有签入版本），因此您无法创建指向它的链接。尝试将一些日志记录添加到您的脚本中，这样我们就可以看到它到底在哪里失败以及参数是什么。

我同意弗兰克的观点，这个例外值得一份缺陷报告。

# jquery - jQuery cycle - Pager shows all queried posts' slides

> ID：13395508
> 
> 赞同：1
> 
> 时间：2012-11-15T10:25:17.247
> 
> 标签：jquery, wordpress, cycle, jquery-cycle

I made a page that loads post titles in a menu, clicking the titles loads that posts content into a div. Part of the content is a div with a jquery cycle script. So, every page has it's own slider, with it's own images and it's own pager.

Problem: The pager shows buttons for every slide on the page, even those that aren't showing. For example, I have 3 posts with a slider, post 1 has 2 images in the slider, post 2 has 3 images in the slider, and post 3 has 2 in the slider as well. The pager then shows 7 buttons, on every slider.

Before, it duplicated every time a post was clicked, so it has to do something with the while loop I'm thinking. This is my jquery

```
// Displaying content for selected category
$('ul.cats li.trigger').click(function(){
    var openMainContent = $(this).attr('rel');

    $('.the-content#'+openMainContent).show(); 
    $('.the-content').not('#'+openMainContent).hide();
    $('.img-slider').cycle('destroy');

    // Image slider
    $('.img-slider')
        .before('<div id="slider-nav" class="slider-nav">') 
        .cycle({ 
            fx:     'fade',
            timeout: 0,
            pager:  '#slider-nav'
    });
}); 
```

What do you think makes this happen?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:31:09.730

I would try by initializing the cycle plugin only on the new ones. Something like this(haven't tested that though):

```
// We need a way to distinguish navigation wrappers from one another, so we use a counter
var nav_count = 0;
// Displaying content for selected category
$('ul.cats li.trigger').click(function(){
    var openMainContent = $(this).attr('rel');

    $('.the-content#'+openMainContent).show(); 
    $('.the-content').not('#'+openMainContent).hide();

    // Image slider
    $('.img-slider:not(.img-slider-initialized)').each(function(){
        $(this).before('<div id="slider-nav-' + nav_count + '" class="slider-nav">') 
            .cycle({ 
                fx:     'fade',
                timeout: 0,
                pager:  '#slider-nav-' + nav_count
        }).addClass('img-slider-initialized');
        nav_count ++;
    })
}); 
```

Can you test that and see if it works?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:33:07.390

**Just a guess:** does the `.before()` method adds the closing `</div>` tag to `id="slider-nav"`? It may cause broken html.

# arrays - 在 R 中组合箱线图

> ID：13395511
> 
> 赞同：0
> 
> 时间：2012-11-15T10:25:31.443
> 
> 标签：arrays, r, boxplot

我有一个关于箱线图的绘图问题（使用基本图形）。

我有几个数据数组，我希望将它们变成箱形图并进行比较。这些数组反映了不同的实验，我想展示的是基本结果和实验的百分比差异（在一个图上！）。即第一个 y 轴上的基本结果和第二个 y 轴上的 % diff：

```
base <- array(runif(12*24*3), dim=c(12,24,3))
exp1 <- array(runif(12*24*3), dim=c(12,24,3))
exp2 <- array(runif(12*24*3), dim=c(12,24,3))
exp3 <- array(runif(12*24*3), dim=c(12,24,3))
exp4 <- array(runif(12*24*3), dim=c(12,24,3))

# calc p.diff
p.diff   <- function(mod,base)  {
                 100.0*((mod-base)/base) }

a <- p.diff(exp1,base)
b <- p.diff(exp2,base)
c <- p.diff(exp3,base)

# combine the % diff arrays
exps <- list(a,b,c)

# plot the results
boxplot(base, xlim=c(1,4), col="gray", xaxt="n", ylab="Base values", outline=FALSE)
axis(side=1, 1:4, labels=c("base","% exp1","% exp2","% exp3") )
par(new=TRUE)
boxplot(exps, col="red", ylim=c(-200,200), outline=FALSE, axes=FALSE)
axis(4)
grid() 
```

这几乎可行，但我没有正确定位不同的箱形图（如果你运行我的例子，你会明白我的意思）。那么有没有更好的方法来控制箱线图的位置呢？还是产生类似类型图形的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:41:40.883

已编辑 (1)：您需要为 X 轴定义正确的序列。这样情节就不会重叠。试着玩一下。

我认为 X 轴的标签不在正确的位置？我不知道更优雅的方法，但这里有一个解决方案：

```
# plot the results
boxplot(base, xlim=c(1,4), col="gray", xaxt="n", ylab="Base values", outline=FALSE)
axis(side=1,1,labels=('base'))
par(new=TRUE)
boxplot(exps, col="red", ylim=c(-200,200), outline=FALSE, axes=FALSE)
axis(4)
axis(side=1,1:3,labels=c("% exp1","% exp2","% exp3"))
grid() 
```

所以我在创建`boxplot`. 首先绘制`base`并标记它，然后绘制`exps`并标记它。它解决了你的问题吗？

编辑：为了更清楚，您正在添加一个具有 3 个值的新图，这就是为什么`axis(side=1,1:3,labels=c("% exp1","% exp2","% exp3"))`从 1 到 3...

编辑（2）：

为什么不在图中使用多行并尝试绘制 2 个图？这是您的数据的示例：

```
#divide your plottin area into 2 columns with one row.
par(mfrow = c(1, 2))
# plot the results
boxplot(base, col="gray", xaxt="n", ylab="Base values", outline=FALSE,axes=FALSE)
axis(2)
axis(side=1,1,labels=('base'))
segments(0,0,1,0)
boxplot(exps,col="red", xaxt="n", ylim=c(-200,200), outline=FALSE, axes=FALSE)
axis(4)
axis(side=1,at=(1:3),labels=c("% exp1","% exp2","% exp3")) 
```

[你可以从这里](https://catalyst.uw.edu/workspace/file/download/c24c129d9594e37fcc40cf3d4ae33366b71809ddb9f7499c8d18cb09bf3bdf15)获得更多信息

# iphone - 登录 twitter（iPhone 设置页面）后如何重定向到应用程序？

> ID：13395514
> 
> 赞同：1
> 
> 时间：2012-11-15T10:25:36.350
> 
> 标签：iphone, ios, twitter

登录推特后如何返回 iPhone 应用程序？（见图）

是否可以从设置页面重定向？

请帮我。提前致谢。

![在此处输入图像描述](../Images/da2bab1d5c4d12d27051fad5ed875197.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:34:06.110

没有办法这样做，但另一种方法是在 UIWebView 中打开外部链接，然后您将始终在您的应用程序中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:30:29.287

不，您不能重定向回您的应用程序。Apple 不提供任何方法来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:33:23.960

您无法从“设置”应用程序重定向，但如果您想在其他应用程序之间重定向，您可以使用 UrlShemes。[UrlShemes](http://www.idev101.com/code/Objective-C/custom_url_schemes.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:35:32.393

没有办法做到这一点，因为这不是标准的 iPhone 功能。

您不能从一个应用程序重定向到另一个应用程序，而设置是一个与其他应用程序一样的应用程序。此外，您无法更改现有应用程序的行为，每个应用程序都位于沙箱中，并且与其他应用程序分开。

没有必要做这样的事情，用户也不期望这种行为。

# javascript - Javascript + 计时器

> ID：13395525
> 
> 赞同：1
> 
> 时间：2012-11-15T10:26:08.643
> 
> 标签：javascript

请参阅下面的代码...它会在页面加载 + 8 秒后更改图像，然后每 1 秒更改一次。

```
setInterval(function(){
    setTimeout(function(){
         $('#person1').attr('src', 'lastwavewinnerimages/wtrhwt.jpg');

         setTimeout(function(){
             $('#person1').attr('src', 'lastwavewinnerimages/t8yejty.jpg');

             setTimeout(function(){
                 $('#person1').attr('src', 'lastwavewinnerimages/t2tgw8.jpg');

                 setTimeout(function(){
                     $('#person1').attr('src', 'lastwavewinnerimages/45234.jpg');

                     setTimeout(function(){
                         $('#person1').attr('src', 'lastwavewinnerimages/14134.jpg');

                         setTimeout(function(){
                             $('#person1').attr('src', 'lastwavewinnerimages/124t234grq.jpg');

                             setTimeout(function(){
                                 $('#person1').attr('src', 'lastwavewinnerimages/frbvqw34.jpg');

                                 setTimeout(function(){
                                     $('#person1').attr('src', 'lastwavewinnerimages/14tqwrbfws.jpg');
                                }, 1000);
                            }, 1000);
                        }, 1000);
                    }, 1000);
                }, 1000);
            }, 1000);
        }, 1000);
    }, 1000);
}, 8000); 
```

该循环在 8 秒后执行。我希望它从页面加载的第一秒开始。怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T10:29:47.777

setInterval 在第一次调用函数之前等待 8000 通过，您也可能想像这样重构代码：

```
$(function(){
    var images = ['lastwavewinnerimages/wtrhwt.jpg',
                'lastwavewinnerimages/t8yejty.jpg',
                'lastwavewinnerimages/t2tgw8.jpg',
                'lastwavewinnerimages/45234.jpg',
                'lastwavewinnerimages/14134.jpg',
                'lastwavewinnerimages/124t234grq.jpg',
                'lastwavewinnerimages/frbvqw34.jpg',
                'lastwavewinnerimages/14tqwrbfws.jpg'];
    var i = 0;

    function k() {
        $('#person1').attr('src', images[i % images.length]);
        i++;
    }

    setInterval( k, 1000 );
    k();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:54:38.310

另一种方法可能是在每次迭代后设置超时：

```
(function() {
    var imagearray = ['lastwavewinnerimages/wtrhwt.jpg',
                                'lastwavewinnerimages/t8yejty.jpg',
                                'lastwavewinnerimages/t2tgw8.jpg',
                                'lastwavewinnerimages/45234.jpg',
                                'lastwavewinnerimages/14134.jpg',
                                'lastwavewinnerimages/124t234grq.jpg',
                                'lastwavewinnerimages/frbvqw34.jpg',
                                'lastwavewinnerimages/14tqwrbfws.jpg'];
    var i = 0; //credit goes to Esailija

    (function nextimg() {
        $('#person1').attr('src', imagearray[i++ % imagearray.length]);
        setTimeout(nextimg, 1000);
    })();
})(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T10:36:53.303

[它是页面加载后执行](https://stackoverflow.com/questions/807878/javascript-that-executes-after-page-load)的 Javascript 的副本

您需要做的就是将您的代码放在 window.onload 事件下。您的代码将在页面加载后立即运行。更改图像时可能不会得到预期的结果。因为当您更改图像源时它会开始加载图像。如果您预加载图像，您将获得预期的结果。这是预加载图像的 3 种方法。

[3 种预加载图像的方法](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-15T10:42:20.523

不要使用 setInterval，而是编写一个像这样的递归函数。

```
function loopImages() {
   setTimeout("$('#person1').attr('src', 'lastwavewinnerimages/wtrhwt.jpg')", 1000);
   setTimeout("$('#person1').attr('src', 'lastwavewinnerimages/t8yejty.jpg')", 1000);
   setTimeout("$('#person1').attr('src', 'lastwavewinnerimages/t2tgw8.jpg')", 1000);
   ..
   ..
   ..
   ..
   ..
   setTimeout("loopImages()",0);
} 
```

onload = "loopImages()"

# android - Android：无法从数据库中删除数据

> ID：13395527
> 
> 赞同：0
> 
> 时间：2012-11-15T10:26:15.193
> 
> 标签：android, sqlite, android-listview, android-sqlite, onlongclicklistener

我想从列表视图中删除特定行，其中数据是从数据库中填充的。在`setOnItemLongClickListener`我已经能够从列表视图中删除数据，但是当我重新启动我的活动时，我可以看到我删除的行在那里，因为`onCreate()`我从数据库中获取数据。

这是我所做的：

MainActivity.java

```
db = new AndroidOpenDbHelper(this);
    showing_history
            .setOnItemLongClickListener(new OnItemLongClickListener() {

                @Override
                public boolean onItemLongClick(AdapterView<?> arg0,
                        View arg1, final int pos, final long id) {
                    final AlertDialog.Builder b = new AlertDialog.Builder(
                            MainActivity.this);
                    b.setIcon(android.R.drawable.ic_dialog_alert);
                    b.setMessage("Delete this from history?");
                    b.setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {

                                    HistoryNamesList.remove(pos);
                                    ((BaseAdapter) mHistoryListAdapter)
                                            .notifyDataSetChanged();
                                    del(pos);
                                }
                            });
                    b.setNegativeButton("No",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int whichButton) {
                                    dialog.cancel();
                                }
                            });

                    b.show();
                    return true;
                }
            }); 
```

我在 MainActivity.java 中的删除方法：

```
private void del(int j) {

    if (db.deleteTitle(j))
        Toast.makeText(this, "Delete successful.", Toast.LENGTH_LONG)
                .show();
    else
        Toast.makeText(this, "Delete failed.", Toast.LENGTH_LONG).show();
    db.close();

} 
```

我在 AndroidOpenDbHelper.java 中的删除查询

```
public boolean deleteTitle(long rowId) {
    SQLiteDatabase db = this.getWritableDatabase();
    return db.delete(TABLE_NAME_HISTORY, ID + "=" + rowId, null) > 0;
} 
```

同样，我可以从列表视图中删除数据，但不能从数据库中删除。请帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:02:22.077

首先，您使用以下代码获取所有行 ID

```
private int[] mRowId;
    dba.open();
        Cursor cr=dba.fetchData();
        cr.moveToFirst();
int i=0;
while(!cr.isAfterLast())
        {
mRowId[i]==cr.getInt(cr.getColumnIndex("colname"));
i++;
cr.moveToNext();

} 
```

在列表视图项目上单击

```
list.setOnItemLongClickListener(new OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
         db.deleteTitle(mRowId[pos]);
            return true;
        }

public void deleteTitle(int rowid) {
        try {
            database.execSQL("DELETE FROM  TableName" + " where columnname="
                    + rowid + ";");
        } catch (Exception e) {
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:44:57.093

尝试使用 db.raw 查询而不是 db.delete ......我希望这可以帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:47:06.647

试试这个代码

```
public void deleteTableRow(int rowid) {
        try {
            database.execSQL("DELETE FROM  TableName" + " where columnname="
                    + rowid + ";");
        } catch (Exception e) {
        }
    } 
```

# jboss7.x - JBoss 7 - 使用文件系统中的 *.properties 文件

> ID：13395532
> 
> 赞同：0
> 
> 时间：2012-11-15T10:26:28.430
> 
> 标签：jboss7.x

我有一个 web 应用程序 (maven,spring,,hibernate)，其中包含不同的 *.properties 文件，这些文件可以在 src/main/resource 中找到。现在我的客户想要编辑这些文件（例如更改电子邮件地址..）--> 最好的解决方案/最佳实践是什么？从 .war 文件中排除 *.properties 并将其放入文件系统？Jboss 模块？

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:23:15.890

如果我是你，我会将这些属性从静态文件移动到持久存储（即 DB），然后为最终用户提供 UI 以修改它们的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:39:31.250

编写自定义模块可能会起作用。这并不像听起来那么糟糕，请查看[HowToPutAnExternalFileInTheClasspath](https://community.jboss.org/wiki/HowToPutAnExternalFileInTheClasspath)。

另请参阅[migration-issues-to-jboss-7-1](https://stackoverflow.com/questions/12400280/migration-issues-to-jboss-7-1)和[Where to put property file in JBOSS 7 or Glassflish? （最佳实践）](https://stackoverflow.com/questions/12562069/where-to-put-property-file-in-jboss-7-or-glassflish-best-practice/)

# javascript - 如何使用 jQuery 指定类来关闭下一个元素

> ID：13395533
> 
> 赞同：0
> 
> 时间：2012-11-15T10:26:28.463
> 
> 标签：javascript, jquery, addclass

我有两个面板。对于两个面板，我有两个打开按钮。所以，当我点击第一个按钮时，我的第一个面板被打开。一切安好。但是现在，当我需要打开下一个面板时，我想先关闭它。这样两个面板就不会同时打开。我不想为那些添加单独的类，只想使用`opened`类。这是我的代码和 thx 的帮助：

```
$('.js-sp-closing-button.opened').live('click', function(){
    if($(this).next.next('.js-scrolling-list').hasClass('opened_panel')){
       $(this).removeClass('opened_panel')
    }
});

<span class="top_ticker_small_02 js-sp-closing-button opened">All</span>
<div class="pp_elements js-scrolling-list opened_panel">...</div>
...
<span class="top_ticker_small_02 js-sp-closing-button">All</span>
<div class="pp_elements js-scrolling-list">...</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:29:33.337

You `missed the next parenthesis`, .next.next( 将是 .next().next(.`You can pass class name to next function instead of having two next function`调用，*如果你不是故意跳过元素。*

```
$('.js-sp-closing-button.opened').live('click', function(){
    if($(this).next().next('.js-scrolling-list').hasClass('opened_panel')){
       $(this).removeClass('opened_panel')
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:29:56.013

关于打开和关闭面板的问题，为什么不在打开新面板之前关闭所有面板。就像是：

```
$('.js-sp-closing-button.opened').live('click', function(){
    //Close all panels
    $('.js-scrolling-list').removeClass('opened_panel');
    /** Code to open next panel **/
}); 
```

另外，`.next`是一个方法，你需要用括号来调用它。

```
$('.js-sp-closing-button.opened').live('click', function(){
    if($(this).next().next('.js-scrolling-list').hasClass('opened_panel')){
       $(this).removeClass('opened_panel')
    }
}); 
```

根据您的意图，两次调用 .next() 可能是不必要的。如果这两个面板是同级面板，则只需调用 .next() 指定选择器即可`.js-scrolling.list`。

**示例**：

```
$('.js-sp-closing-button.opened').live('click', function(){
    if($(this).next('.js-scrolling-list').hasClass('opened_panel')){
       $(this).removeClass('opened_panel')
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:41:42.310

做到这一点要容易得多......

```
$('.js-scrolling-list').live('click', function(){

    $('.js-scrolling-list').removeClass('opened_panel');
    $(this).addClass('opened_panel');

}); 
```

示例：http: [//jsfiddle.net/snKM8/2/](http://jsfiddle.net/snKM8/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:15:23.820

这是我设法得到的，工作很好 - 也许将来有人会受益。谢谢你们所有人：

```
$('.js-sp-closing-button').live('click', function(){
    $(this).toggleClass('opened');
    if ($(this).hasClass('opened')){
        $('.js-sp-closing-button').removeClass('opened');
        $(this).addClass('opened');
        $('.js-scrolling-list').removeClass('opened_panel');
        $(this).next('div').addClass('opened_panel');
    } else {
        $('.js-sp-closing-button').removeClass('opened');
        $(this).next('div').removeClass('opened_panel');
        $(this).removeClass('opened');
    }
}); 
```

# json - Jersey unmarshal JSON：最后一个元素 null 不起作用

> ID：13395544
> 
> 赞同：0
> 
> 时间：2012-11-15T10:27:22.237
> 
> 标签：json, jersey, unmarshalling

我正在使用 Jersey 来解析以下 JSON：

`{"response":{"status":"OK","campaigns":[{"id":12345,"state":"active","code":null}]}}`

但我收到以下错误消息：

`java.lang.IllegalArgumentException: No more parsing elements.`

如果我切换字段代码和状态的位置，以便生成的 JSON 看起来像

`{"response":{"status":"OK","campaigns":[{"id":12345,"code":null,"state":"active"}]}}`

一切正常。此外，如果我将第一个 JSON 中的*代码字段更改**为非空*值，例如`"code":"test"`，Jersey 可以毫无问题地解析它。我尝试了其他更复杂的示例，当将数组的任何元素的**最后一个字段保留为***null*时，总是会收到上述错误消息。

我认为我做错了什么，因为我找不到其他有类似问题的人。*我已经尝试使用其他 JSON 符号（如自然*）来实现 CustomJAXBContextResolver，但对我没有任何帮助。

有任何想法吗？

* * *

这是我的绑定类：

```
@XmlRootElement
public class LoadEntityResponse {

public LoadEntityResponse() {
}

private Response response;

public Response getResponse() {
    return response;
}

public void setResponse(Response response) {
    this.response = response;
}
} 
```

和

```
public class Response {

public Response() {
}

private String status;
private String error;
private String error_id;

private Campaign[] campaigns;

public String getStatus() {
    return status;
}

public void setStatus(String status) {
    this.status = status;
}

public String getError() {
    return error;
}

public void setError(String error) {
    this.error = error;
}

public String getError_id() {
    return error_id;
}

public void setError_id(String error_id) {
    this.error_id = error_id;
}

public Campaign[] getCampaigns() {
    return campaigns;
}

public void setCampaigns(Campaign[] campaigns) {
    this.campaigns = campaigns;
}
} 
```

最后

```
public class Campaign{
public Campaign() {
}

protected int id;
protected String code;
protected String state;

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getCode() {
    return code;
}

public void setCode(String code) {
    this.code = code;
}

public String getState() {
    return state;
}

public void setState(String state) {
    this.state = state;
}
} 
```

**已解决：**现在使用 JacksonJsonProvider：

```
...
DefaultClientConfig config = new DefaultClientConfig();
config.getClasses().add(JacksonJsonProvider.class);
... 
```

就这样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:20:30.933

尝试使用 Genson [http://code.google.com/p/genson/](http://code.google.com/p/genson/)。要在客户端启用它，请使用以下代码：

```
ClientConfig config = new DefaultClientConfig();
config.getClasses().add(GensonJsonConverter.class);
cli = Client.create(config); 
```

**编辑**：在服务器端不需要配置，当 jar 在您的类路径中时，自动启用 json 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:11:06.330

您也可以使用 Jackson POJO 支持，`jersey-json`但需要进行一些配置，请参阅[Jersey User Guide](http://jersey.java.net/nonav/documentation/latest/index.html)中的[POJO 支持](http://jersey.java.net/nonav/documentation/latest/json.html#json.pojo.approach.section)。

# primefaces - Primefaces Datagrid：对话框未使用所选值更新

> ID：13395549
> 
> 赞同：1
> 
> 时间：2012-11-15T10:27:35.683
> 
> 标签：primefaces

我遇到了 primefaces datagrid 的问题。我正在尝试使用单击 p:commandLink 时选择的值来更新对话框。对话框最初不显示任何值，但是当我刷新页面并单击 commandLink 时，它会使用先前选择的值进行更新。我在 JBoss 4.3.0 上使用 primefaces-2.2.1。任何帮助将不胜感激。

```
 <p:column>
     <p:panel header="#{loc.loc_details}" style="text-align:center">
        <h:panelGrid columns="1" style="width:100%">
           <p:graphicImage value="/user/xyz/resources/images/#{loc.loc_details}.jpg"/> 

           <h:outputText value="#{loc.locality}" />
           <h:outputText value="#{loc.city}" />
           <h:outputText value="#{loc.state}" />
           <p:commandLink  update="locDetail,locDetailGrid" oncomplete="locDialog.show()" title="View Detail" border="0" >
               <p:graphicImage value="/user/xyz/resources/images/imagesCA6ETPOM.jpg" />
              <f:setPropertyActionListener value="#{loc}" 
                    target="#{tutorialsBean.selectedLocality}" />
           </p:commandLink>
        </h:panelGrid>
     </p:panel>
  </p:column> 
```

```
<p:dialog header="Loc Detail" widgetVar="locDialog" modal="true">
  <p:outputPanel id="locDetail" style="text-align:center;" layout="block">

     <h:panelGrid id="locDetailGrid" columns="2" cellpadding="5">
        <h:outputLabel for="loc_details" value="Locality Details :" />
        <h:outputText id="loc_details" value="#{tutorialsBean.selectedLocality.loc_details}" />

        <h:outputLabel for="city" value="City: " />
        <h:outputText id="city" value="#{tutorialsBean.selectedLocality.city}" />

        <h:outputLabel for="state" value="State: " />
        <h:outputText id="state" value="#{tutorialsBean.selectedLocality.state}" />
        <h:outputText styleClass="text_normal" value="First Name" />
        <p:inputText id="fnameText" value="#{tutorialsBean.firstName}" />
        <h:outputText styleClass="text_normal" value="Last Name" />
        <p:inputText id="lnameText" value="#{tutorialsBean.lastName}" />
         <h:outputText styleClass="text_normal" value="Email" />
        <p:inputText id="emailText" value="#{tutorialsBean.email}" />
        <p:commandButton id="searchButton"  
           value="Submit" action="#{tutorialsBean.submitValues}"
           styleClass="button" />

     </h:panelGrid>
  </p:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T16:49:50.570

在您的 commandLink 中，在您的对话框中添加更新和处理属性以刷新信息。

像这样：

将 ID 放入对话框中：

```
 <p:dialog header="Loc Detail" id="locDialog" widgetVar="locDialog" modal="true"> 
```

将更新放入对话框：

```
<p:commandLink update="locDetail,locDetailGrid" oncomplete="locDialog.show()" title="View Detail" border="0" update="locDialog" process="@this" ajax="true" partialSubmit="true" >
   <p:graphicImage value="/user/xyz/resources/images/imagesCA6ETPOM.jpg" />
      <f:setPropertyActionListener value="#{loc}" target="#{tutorialsBean.selectedLocality}" />
</p:commandLink> 
```

# ruby-on-rails - 如何加快资产编译以进行测试？

> ID：13395554
> 
> 赞同：16
> 
> 时间：2012-11-15T10:27:40.707
> 
> 标签：ruby-on-rails, rspec, asset-pipeline, guard

使用 Spin 运行 Guard 可以很好地保持我的测试速度，除非资产相关且需要编译。似乎每当我更改其中的某些内容时，测试环境都会重新编译所有资产。我已经看到了仅重新编译源已更改的资产的部署脚本示例。这也可以用于测试吗？还是有另一种方法可以加快资产编译以进行测试？

我正在使用一个相当具体的设置，所以如果需要，我很乐意提供更多信息，尽管我觉得这个问题的答案可能在更多情况下有用，而不仅仅是我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:13:04.373

你可以看看[这篇](https://stackoverflow.com/questions/11390447/how-can-you-speed-up-the-rails-asset-pipeline-precompile-process/11390454#11390454)两个月前写的文章。这似乎是一项相当复杂的任务。Nathan 编写了一个[gem，](https://github.com/ndbroadbent/turbo-sprockets-rails3)它只预编译对资产所做的更改。它可用于开发和测试环境。

编辑：这是[另一篇文章](http://blog.railsonfire.com/2012/11/15/Speeding-Up-Our-Test-Suite.html)，与加快我们的测试有关。它对 js 测试有不同的看法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T07:33:43.687

例如，您可以避免`require_tree`在您的应用程序中添加 js 和 css 文件。

此外，使用适当的文件扩展名——如果是 js——然后像普通的 js 文件一样命名。css 和 scss 也一样。

您还可以在本地预编译资产，以便在开发时通过命令在本地编译`rake assets:precompile`- 但请记住在测试后将其删除，以便下次查看资产的更改（可以在供应商文件夹中生成）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-20T09:42:06.957

我确定，但您可以尝试：

在 application.js 文件中按树形顺序写入所有 js 文件，如下所示：

//= 需要 jquery

//= 需要 jquery_ui

//= 需要 jquery.ui.core

# ruby-on-rails - 具有固定页面链接数的 Kaminari 分页控制

> ID：13395556
> 
> 赞同：10
> 
> 时间：2012-11-15T10:27:51.360
> 
> 标签：ruby-on-rails, kaminari

我想让 Kaminari 使用分页控件以固定计数显示分页链接，例如每个导航页面上有 10 个链接。Kaminari 默认在第一页显示 6 个页面链接，当您继续浏览时，页面链接会继续增长，直到达到 9 个项目。

我在这里显示图片，当我第一次加载时，它总共有 5 个链接。

![在此处输入图像描述](../Images/b2ca82d01e0ed4869a77b0676282e372.png)

当我继续浏览时，它会增长。

![在此处输入图像描述](../Images/cb083033cc1284594993e291113070ea.png)

在您浏览第 5 个链接之前，它只显示总共 9 个链接。

![在此处输入图像描述](../Images/23b73506eda22090462662c0816a5b78.png)

即使在 Kaminari 导航的开始或结束时，我如何始终保持 10 的链接计数。我尝试过 Kaminari config.window，但这不是我想要的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T21:25:47.667

你可以修补 Kaminari`Paginator`和`PageProxy`课程。通过覆盖`relevant_pages`, `inside_window?`, `left_outer?`, 等方法，`right_outer?`您可以控制页面链接何时显示在分页视图助手中。

首先，在`config/initializers`调用中创建一个新文件`kaminari.rb`并粘贴以下代码：

```
module Kaminari
  module Helpers
    class Paginator < Tag
      def relevant_pages(options)
        1..options[:total_pages]
      end

      class PageProxy
        def inside_window?
          if @options[:current_page] <= @options[:window]
            @page <= (@options[:window] * 2) + 1
          elsif (@options[:total_pages] - @options[:current_page].number) < @options[:window]
            @page >= (@options[:total_pages] - (@options[:window] * 2))
          else
            (@options[:current_page] - @page).abs <= @options[:window]
          end
        end
      end
    end
  end
end 
```

它不漂亮，但它完成了工作。如果您`window: 5`在视图中设置，那么这将始终显示总共 10 个链接以及`<span>`当前页面的另一个链接。

要了解更多信息，请查看源代码[https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/helpers/paginator.rb](https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/helpers/paginator.rb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T17:38:21.633

我无法得到上面的答案。我所做的是计算窗口大小并将其传递给我的分页部分。

### 控制器

```
 window = @items.current_page < 5 ? 5 - @items.current_page : 1
  render partial: 'pagination; locals: {items: @items, window: window} 
```

### _pagination.html.slim

```
.col-lg-6.pull-right
  ...
  = paginate items, remote: true, window: window
  ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-06T04:34:00.637

对于使用自定义主题的人：

在视图中（超薄文件）：

```
...other code...
- each_side = 4 # in case want to show 10 pages
= paginate items, left: each_side * 2 + 1, right: each_side * 2 + 1, theme: 'your-theme' 
```

在 app/views/kaminari/your-theme/_paginator.html.slim 中：

```
ruby:
  each_side = 4 # in case want to show 10 pages
  if current_page - each_side < 1
    top_page = 1
    bottom_page = top_page + each_side * 2 + 1 > total_pages ? total_pages : top_page + each_side * 2 + 1
  elsif current_page + each_side + 1 > total_pages
    bottom_page = total_pages
    top_page = bottom_page - each_side * 2 - 1 < 1 ? 1 : bottom_page - each_side * 2 - 1
  else
    top_page = current_page - each_side
    bottom_page = current_page + each_side + 1
  end

= paginator.render do
  nav.pagination
    ul.pagination-list
      # for rendering first_page link
      # == first_page_tag unless current_page.first?
      == prev_page_tag unless current_page.first?
      - each_page do |page|
        - if page <= bottom_page && page >= top_page
          == page_tag page
      == next_page_tag unless current_page.last?
      # for rendering last_page link
      # == last_page_tag unless current_page.last? 
```

# java - 在 Java 中使用 Cp1250 创建文件

> ID：13395559
> 
> 赞同：1
> 
> 时间：2012-11-15T10:27:58.677
> 
> 标签：java, file, character-encoding, cp1252, cp1250

我正在尝试使用**Cp1250**字符集创建文件：

```
out = new BufferedWriter(
        new OutputStreamWriter(
        new FileOutputStream("/path/filename"), Charset.forName("Cp1250"))); 
```

[但是，当我使用juniversalchardet](http://code.google.com/p/juniversalchardet "朱尼韦尔沙尔德特")检测到实际字符集时，它显示**WINDOWS-1252**是**Cp1252**（根据[javadoc](http://docs.oracle.com/javase/1.4.2/docs/guide/intl/encoding.doc.html "文档")）。

Enca( `enca -L czech -g filename`) 检测**ISO-8859-2**。

我怎样才能准确设置**Cp1250**（或者，使用 java.nio API 名称**windows-1250**）？

谢谢

卡雷尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:37:57.850

任何编码检测程序只能是启发式的，当涉及到对所有文件基本上都*有效*的编码时（例如，每个字符总是一个字节并且每个字节都有一个字符映射的那些）。

[您应该编码一些您知道会在Windows-1250](http://en.wikipedia.org/wiki/Windows-1250)和[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)之间导致不同结果的文本，并查看您的代码实际执行的操作。我怀疑你会发现它实际上在做正确的事情。

# c# - 图像白线

> ID：13395566
> 
> 赞同：0
> 
> 时间：2012-11-15T10:28:17.547
> 
> 标签：c#, bitmap, gdi+

我正在使用以下代码在大图像上绘制小图像，但它有白线，

```
Bitmap bitmap = new Bitmap(1000, 1000);
Graphics graphic = Graphics.FromImage(bitmap);

Bitmap bitmap1 = new Bitmap(256, 256);
Graphics g1 = Graphics.FromImage(bitmap1);
g1.FillRectangle(new SolidBrush(Color.Red), new Rectangle(-10, -10, 300, 300));
g1.Flush();

graphic.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.Half;

graphic.DrawImage(bitmap1, new RectangleF(0f, 313.5f, 256, 256));
graphic.DrawImage(bitmap1, new RectangleF(0f, 569.5f, 256, 256));

bitmap.Save("1.png");
Process.Start("1.png"); 
```

有人能告诉我为什么会这样吗？

tile.png 是 256X256 的图像，填充了红色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:38:26.703

试试下面的代码

```
graphic.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.NearestNeighbor; 
```

# php - Aptana PHP Snippet (in ruby )：如何创建 getter/setter 片段并大写变量名称的第一个字符？

> ID：13395570
> 
> 赞同：3
> 
> 时间：2012-11-15T10:28:17.717
> 
> 标签：php, ruby, aptana, code-snippets, getter-setter

我喜欢 Aptana 中的片段。我想创建一个片段，为我创建一个字符串类型的私有类变量。我让它像这样工作：

```
# code from php bunle in Aptana 'snippets.rb'
# private member with getter setter and type checking for STRING
  snippet 'private String MEMBER' do |s|
  s.trigger = 'myps'
  s.expansion = '
private \$${variableName}; /* string */

function set_${variableName}(/* string */ \$${variableName}) {
    if(!is_string(\$${variableName})) {
        throw new \Exception(get_class(\$this)."->set_${variableName}(): Parameter must be string!");
    }
    \$this->${variableName} = \$${variableName};
}

function get_${variableName}() {
    return \$this->${variableName};
}

' 
```

不幸的是，我不了解 Ruby，我想知道是否有可能获得像这样的 getter/setter 函数名称（CamelCase）：

```
private $member;
function setMember($member);
function getMember(); 
```

代替：

```
private $member;
function set_member($member);
function get_member(); 
```

我必须在我的公司中使用 Camel 案例，我真的很想让它工作。

谢谢你的帮助。

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:12:48.553

我为我的问题找到了一个可行的解决方案。我设法在 Aptana Studio 3 中以一种方便的方式生成了 getter 和 setter 方法。我没有通过片段实现这个解决方案，而是作为 php 'ruble' 包中的命令实现的。即使我认为它是非常丑陋的代码，我也会发布此命令的源代码，但我真的不知道 ruby​​，只是设法让它以某种方式工作。美化和更好的风格是非常受欢迎的。

我发现这个链接很有趣：[https ://wiki.appcelerator.org/display/tis/Ruble+Specification](https://wiki.appcelerator.org/display/tis/Ruble+Specification)

如何获取命令：

1.  在 Aptana 点击 Commands > PHP > Edit this bundle
2.  在您的项目资源管理器中，您会发现一个新的“* PHP”包。在此处打开“PHP -> commands”文件夹
3.  创建一个新文件“getter_setter.rb”
4.  过去丑陋的红宝石代码进入它
5.  保存该文件并重新启动 IDE

# 代码：

```
require 'ruble'

command "getter_setter" do |cmd|
    cmd.key_binding = "CONTROL+G"

    cmd.input = :selection
    cmd.output = :insert_as_text

    cmd.invoke do |context|

        input = STDIN.read

        splittedInput = input.split(";")

        type = nil
        if splittedInput[1] != nil
            type = splittedInput[1].gsub(/\s+/, "")
            type = type.sub("//", "")
        end

        varName = splittedInput.first
        varName = varName.sub("private", "")
        varName = varName.gsub(/\s+/, "")
        varName = varName.sub("$", "")

        capitalizedName = varName.slice(0,1).capitalize + varName.slice(1..-1)

        templateTypeless = "

    function set#{capitalizedName}($#{varName}) {
        global $MY_CLIENT_LOGGER;
        if($MY_CLIENT_LOGGER) { $MY_CLIENT_LOGGER->log(get_class($this).'->set#{capitalizedName}()');}
        $this->#{varName} = $#{varName};
    }

    function get#{capitalizedName}() {
        global $MY_CLIENT_LOGGER;
        if($MY_CLIENT_LOGGER) { $MY_CLIENT_LOGGER->log(get_class($this).'->get#{capitalizedName}()');}
        return $this->#{varName};
    }

    "

        templateBasicType = "

    function set#{capitalizedName}(/* #{type} */ $#{varName}) {
        global $MY_CLIENT_LOGGER;
        if($MY_CLIENT_LOGGER) { $MY_CLIENT_LOGGER->log(get_class($this).'->set#{capitalizedName}()');}
        if(!is_#{type}(#{varName})) {
            throw new \Exception(get_class($this).'->set#{capitalizedName}(): Parameter must be #{type}!');
        }
        $this->#{varName} = $#{varName};
    }

    function get#{capitalizedName}() {
        global $MY_CLIENT_LOGGER;
        if($MY_CLIENT_LOGGER) { $MY_CLIENT_LOGGER->log(get_class($this).'->get#{capitalizedName}()');}
        return $this->#{varName};
    }

    "
        templateComplexType = "

    function set#{capitalizedName}(#{type} $#{varName}) {
        global $MY_CLIENT_LOGGER;
        if($MY_CLIENT_LOGGER) { $MY_CLIENT_LOGGER->log(get_class($this).'->set#{capitalizedName}()');}
        $this->#{varName} = $#{varName};
    }

    function get#{capitalizedName}() {
        global $MY_CLIENT_LOGGER;
        if($MY_CLIENT_LOGGER) { $MY_CLIENT_LOGGER->log(get_class($this).'->get#{capitalizedName}()');}
        return $this->#{varName};
    }

    "
        outputString = ""
        if type == nil
            outputString = templateTypeless
        elsif type == "string" or type == "int" or type == "float" or type == "double" or type == "array" or type == "object"
            outputString = templateBasicType
        else
            outputString = templateComplexType
        end

        context.output = outputString
    end
end 
```

用法：

1.  创建一个包含类的 php 文件并声明一个私有 $var
2.  选择声明 var 的行并使用键盘快捷键“CONTROL+G”创建 getter/setter 方法

提示：如果您在私有成员声明行中附加注释，请注意基本类型（字符串/int/float/double/array/bool/object），那么您可以在 setter 中进行类型检查。例如：`private $var //string`

提示：如果您在私有成员声明的行中附加注释，请注意复杂类型，那么您可以在 setter 中进行类型检查。例如：`private $var //my\namespace\CComplexTypeClass`

# apache - 在 localhost 的 xampp 中启用重写模式

> ID：13395580
> 
> 赞同：3
> 
> 时间：2012-11-15T10:29:08.830
> 
> 标签：apache, .htaccess, mod-rewrite, xampp, localhost

我正在使用 Windows 7 64 位（也许这并不重要）并且我安装了 xampp。在我的 htdocs/ 目录中，我有多个项目。现在，对于其中一个（比如说 htdocs/test/），我创建了一个名为“example”的虚拟主机。这很好用......在 dir /test/ 我有带有以下代码的 .htaccess 文件：

```
RewriteEngine on

RewriteBase /test
Options +FollowSymLinks
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)\.(js|gif|jpeg|jpg|png)$
RewriteRule . index.php 
```

在这里，我想将所有流量重定向到我的`index.php`页面，因为我在这里使用我的一些系统来处理从索引页面开始的整个项目。在`httpd.conf`，我启用了`rewrite_module`，也在里面

```
<Directory "C:/Program Files/xampp/htdocs"> 
```

我已将`AllowOverride`指令更改为`All`.

现在，正如我所说，当我尝试使用创建的虚拟主机“示例”访问我的项目时，这可以正常工作。但是当我尝试访问我的 htdocs 目录中的其他项目时，我得到一个内部服务器错误 (HTTP 500) 并且在日志文件中出现这条消息：

```
[Thu Nov 15 11:07:12 2012] [error] [client 127.0.0.1] Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

另外，如果我输入 URL`127.0.0.1`或`localhost`，我会用“示例”虚拟主机定义我的项目......这非常令人困惑，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T19:37:39.847

听起来您的根目录和子目录 htaccess 文件有冲突。从根 htaccess 文件中排除子目录处理，并确保使用[`[L]`ast 规则](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)指令。

**根 HTACCESS** - 排除“test”子目录，使用`[L]`ast 规则指令。

```
Options +FollowSymLinks

RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)\.(js|gif|jpeg|jpg|png)$

# exclude the "test" subdirectory
RewriteCond %{REQUEST_URI} !^(test)/?

# add [L]
RewriteRule . index.php [L] 
```

**“测试”子目录 HTACCESS** - 使用`[L]`ast 规则指令。

```
RewriteEngine on
RewriteBase /test/
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)\.(js|gif|jpeg|jpg|png)$

# add [L]
RewriteRule . index.php [L] 
```

# c# - 无法从代理 C# 获得全部响应

> ID：13395583
> 
> 赞同：0
> 
> 时间：2012-11-15T10:29:10.860
> 
> 标签：c#, http, proxy

我正在构建一个在浏览器和 squid 代理之间运行的小型 HTTP 代理。浏览器将 HTTP 请求发送到我的代理，该代理将其重定向到 squid 代理，然后我的应用程序从 squid 代理获取响应并将其返回给浏览器。

问题是我无法从代理获得完整的响应，我得到 HTTP 200 OK ...（只是响应头），但是没有正文，我必须再次调用接收方法来获取正文。但是如果我调试我的代码（这会使应用程序变慢）它会得到所有响应（响应头和正文），TCPClass 中是否有任何适当性向我表明远程服务器仍有数据要发送给我？这是我的代码：

```
static void Main(string[] args)
    {
        int ServerPort = 8888;
        IPAddress localHost = new IPAddress(0x0100007f);
        TcpListener listener = new TcpListener(localHost,ServerPort);
        listener.Start();
        while(true)
        {
            string requestString = "";
            String respenseString = "";
            TcpClient application = listener.AcceptTcpClient();
            string source = application.Client.RemoteEndPoint.ToString();
            byte[] dataFromApp = new byte[application.ReceiveBufferSize];
            application.Client.Receive(dataFromApp);                
            TcpClient tunnel = new TcpClient("127.0.0.1",8080);
            tunnel.Client.Send(dataFromApp);                
            while (tunnel.Client.Connected ==true)
            {
                if(tunnel.Available != 0)
                {                        
                    byte[] responseFromProxy = new byte[tunnel.ReceiveBufferSize];
                    tunnel.Client.Receive(responseFromProxy);
                    respenseString += Encoding.UTF8.GetString(responseFromProxy);
                }
                else
                {                        
                    break;
                }
            }                
            application.Client.Send(Encoding.UTF8.GetBytes(respenseString));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:31:08.427

`tunnel.Client.Receive`您应该检查and的返回值`application.Client.Receive`。[Receive](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx)不保证它将读取*dataFromApp.Length*字节

> 备注：Receive方法将数据读入buffer参数，返回成功读取的字节数

PS：你可能还想试试[FiddlerCore](http://www.fiddler2.com/fiddler/Core/)写一个 Http Proxy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:42:13.307

套接字上没有*“此消息剩余 N 个字节”*属性，因为 TCP 套接字是流式传输的：它发送和接收字节，而不是消息。

HTTP defines messages, and if you are implementing an HTTP proxy, you should be familiar with the [HTTP 1.1 RFC](https://www.rfc-editor.org/rfc/rfc2616). There are various ways to determine the [lenght of an HTTP message](https://www.rfc-editor.org/rfc/rfc2616#section-4.4), all of which you have to implement to make sure you can successfully receive and send HTTP messages.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-16T16:01:11.390

Thanks guys

I've done it :

```
while (tunnel.Client.Receive(oneByte) != 0)
{
  byte[] responseFromProxy = new byte[tunnel.Available];
  tunnel.Client.Receive(responseFromProxy);
  application.Client.Send(oneByte);
  application.Client.Send(responseFromProxy);
} 
```

# web-applications - 在 HTML 中嵌入 C

> ID：13395587
> 
> 赞同：-2
> 
> 时间：2012-11-15T10:29:19.187
> 
> 标签：web-applications, browser

是否可以嵌入 C 程序并在 Web 浏览器中执行。我有 .so 文件，我需要在 Web 应用程序中使用 .so 文件中的功能。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:49:29.563

这绝对不可能，您需要评估代码服务器端并将其包含在 Web 响应中。

# python - 在python中绘制多行

> ID：13395594
> 
> 赞同：0
> 
> 时间：2012-11-15T10:29:35.397
> 
> 标签：python, excel, matplotlib, matplotlib-basemap

我已经开始学习 python / matplolib / basemap 并且真的需要一些帮助。

我的数据位于具有以下结构的 Excel 工作簿中：

```
Event Number    Date             Lat             LOn      Time (UTC)
1             02/may             14,4          -98,9      0145
                                 15,6          -99,9      0215
                                 13,6          -100,9     0245
                                 14,9          -108,8     0315              

2             26/may             15,8          -89,7      1245
                                 15,9          -90,8      1315
                                 15,7          -98,9      1345

... 
```

如何在python中打开excel文件？

我想绘制多条线连接每个事件的位置，可以这样做吗？知道怎么做吗？

这个想法是在特定地区绘制轨迹，因为我的例子是墨西哥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T22:17:49.463

在python中打开一个excel文件，请看：[这里](https://stackoverflow.com/questions/3239207/how-can-i-open-an-excel-file-in-python)

也就是说，我认为如果您将其保存为 CSV 文件然后使用[numpy.loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)打开会更容易。但是，这可能需要重新格式化您的数据。您也可以始终构建自己的解析器并使用逗号作为空格分隔符。如果这是你的想法，请告诉我，我可以告诉你如何去做。

如果您的轴是纬度和经度，则创建纬度和经度数组并使用[此绘图](http://matplotlib.org/users/pyplot_tutorial.html)

创建纬度数组和经度数组后，您的代码将如下所示：

```
import matplotlib.pyplot as plt
plt.figure()
plt.plot(lat, longitude, 'r') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:19:22.377

[Pandas](http://pandas.pydata.org/pandas-docs/stable/io.html#excel-files)有加载 Excel 文件的功能，直接使用 xlrd 会更容易一些。[或者，您可以将 xls 文件导出到 csv 并使用csv](http://docs.python.org/2/library/csv.html)模块在 python 中读取。

# c# - 我怎样才能以这种方式遍历这个列表？

> ID：13395595
> 
> 赞同：6
> 
> 时间：2012-11-15T10:29:40.490
> 
> 标签：c#, linq, list, foreach

我有一个看起来像这样的对象列表：

```
ID:2000
Title:"Title 1"
Description:"My name is Marco"

ID:2000
Title:"Title 2"
Description:"My name is Luca"

ID:3000
Title:"Title 3"
Description:"My name is Paul"

ID:4000
Title:"Title 4"
Description:"My name is Anthony"

ID:4000
Title:"Title 5"
Description:"My name is Carl"

ID:4000
Title:"Title 6"
Description:"My name is Jadett" 
```

现在，我想用 for each 浏览（遍历）它。但我想从同一个ID开始遍历它。因此，首先是单个/唯一 ID 的 foreach（2000、3000、4000，所以 3 个步骤）。然后，对于每个“ID”步骤，每个标题/描述：ID 2000 有 2 个步骤，ID 3000 有 1 个步骤，ID 4000 有 3 个步骤。列表按 ID 排序。

我该怎么做？通过...分组？嗯……

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T10:33:02.207

是的，与一组：

```
foreach (var group in items.GroupBy(i => i.ID))
{
    foreach (var item in group)
    {
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:40:00.677

是的，您可以使用`GroupBy`.

首先是组本身：

```
var idGroups = items.GroupBy(i => i.ID).ToList(); // omit ToList() if scalability is more important than performance since it creates a new list but doesn't enables to enumerate the result multiple times without querying again
foreach(var idGroup in idGroups)
{
    // ...
} 
```

然后每组的所有项目：

```
foreach (var idGroup in idGroups)
{
    foreach (var item in idGroup)
    {
        // ...
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:33:58.617

如果我理解正确，首先获取一个不同的 ID 列表，然后逐个遍历它们。

```
foreach(var id in objectList.Select(x => x.ID).Distinct())
{
    foreach(var item in objectList.Where(x => x.ID = id))
    {
        DoSomething(item);
    }
} 
```

编辑：Amiram Korach 的答案是更好的使用`GroupBy`。我的执行完全相同的功能，只是更冗长:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:54:49.280

既然可以使用排序，为什么还要使用 groupby？我已经用 Tuple 做到了这一点，但用你选择的结构代替。如果您想对组进行聚合操作，Group By 很有用。你只想排序和遍历。

```
var list = new List<Tuple<int, string, string>>();
list.Add(Tuple.Create(4000,"Title 5", "My name is Carl"));
list.Add(Tuple.Create(2000,"Title 1", "My name is Marco"));
list.Add(Tuple.Create(4000,"Title 6", "My name is Jadett"));
list.Add(Tuple.Create(3000,"Title 3", "My name is Paul"));
list.Add(Tuple.Create(4000,"Title 4", "My name is Anthony"));
list.Add(Tuple.Create(2000,"Title 2", "My name is Luca"));

var sorted = list.OrderBy(k => k.Item1).
                  ThenBy(k => k.Item2).
                  ThenBy(k => k.Item3);

foreach (var k in sorted)
{
    Console.WriteLine(k);
} 
```

结果是

```
(2000, Title 1, My name is Marco)
(2000, Title 2, My name is Luca)
(3000, Title 3, My name is Paul)
(4000, Title 4, My name is Anthony)
(4000, Title 5, My name is Carl)
(4000, Title 6, My name is Jadett) 
```

# xpath - 为 XPATH 查询的结果添加前缀

> ID：13395596
> 
> 赞同：1
> 
> 时间：2012-11-15T10:29:42.713
> 
> 标签：xpath, libxml2, libxml-js

我使用 libxmljs 来解析一些 html。

我有一个 xpath 查询，它有一个“或”连词，基本上可以检索两个查询的信息

例子

```
doc.find("//div[contains(@class,'important') or contains(@class,'overdue')]") 
```

这将返回所有重要或过期的 div...

我可以在我的结果集中添加前缀或查看来自哪个条件的前缀吗？

结果可能是一个数组，其中第一个条件为 0，第二个条件为 1……这可能吗……

或者我怎样才能找出哪个结果来自哪个查询条件......

谢谢你的帮助...

PS：这是一个元素序列的简化示例，这些元素要么有一个重要的项目，要么有一个过期的项目......两者都有，一个或一个都没有......所以我不能通过寻找每个第二个条目......等等

这是我想要得到的结果...

```
message:{},
message:{
   .....
  important: "some immportant text",
  overdue: "overdue date,
  .....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:25:36.017

无法知道`or`XPath 查询的哪个子句导致包含特定结果。它根本不是保留的信息。

您需要对 and 进行完全独立的查询`important`，`overdue`或者进行一次大型查询以获取整个结果集（就像您现在一样），然后进一步测试每个结果的类以找出它是哪一个。

# php - PHP：gettext函数字符串中的HTML

> ID：13395600
> 
> 赞同：3
> 
> 时间：2012-11-15T10:29:59.983
> 
> 标签：php, html, gettext

我有些困惑。据我所知，gettext 函数中的每个文本都用作 msgid

所以这个：

```
_("My long text that I <br> because I need to ") 
```

应该：

```
#: htdocs/index.php:8
msgid "My long text that I <br> because I need to"
msgstr "Translation needs different <br> inside because russian is different" 
```

我只是找不到任何 gettext() 或 _() 去除 html 标签的文档。

我应该像这样替换它吗？为什么？

```
sprintf(_("My long text that I %s because I need to "), '<br>') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T12:38:45.747

两者都可以正常工作，gettext 不会从消息中串出任何内容。但是，您可能不想在翻译中包含 HTML 以使翻译人员的生活更轻松 - 只翻译字符串更容易，而不必关心 HTML 标记。当然有时候真的不可能……

# android - Android：没有历史记录的 ShareActionProvider

> ID：13395601
> 
> 赞同：8
> 
> 时间：2012-11-15T10:30:03.477
> 
> 标签：android, android-intent, android-actionbar, shareactionprovider

根据Android文档，如果我不希望我的 ShareActionProvider 保留我应该调用的共享历史记录

```
mShareActionProvider.setShareHistoryFileName(null) 
```

但是，当我这样做时，在选择共享选项时会出现以下崩溃：

```
11-15 10:06:34.848: E/AndroidRuntime(22461): java.lang.IllegalStateException: No preceding call to #readHistoricalData
11-15 10:06:34.848: E/AndroidRuntime(22461):    at android.widget.ActivityChooserModel.persistHistoricalDataIfNeeded(ActivityChooserModel.java:573)
11-15 10:06:34.848: E/AndroidRuntime(22461):    at android.widget.ActivityChooserModel.addHisoricalRecord(ActivityChooserModel.java:743)
11-15 10:06:34.848: E/AndroidRuntime(22461):    at android.widget.ActivityChooserModel.chooseActivity(ActivityChooserModel.java:491)
11-15 10:06:34.848: E/AndroidRuntime(22461):    at android.widget.ActivityChooserView$Callbacks.onItemClick(ActivityChooserView.java:547) 
```

下面是设置 ShareActionProvider 的代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.article_pager_menu, menu);
    // mShareActionProvider is a field in the Activity
    mShareActionProvider = (ShareActionProvider) menu.findItem(R.id.menu_share)
            .getActionProvider();
    mShareActionProvider
            .setShareHistoryFileName(null);
    Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);
    shareIntent.setType("text/plain");
    mShareActionProvider.setShareIntent(shareIntent);
    mShareActionProvider.onCreateActionView();
    return true;
} 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T18:47:18.937

所以最后我不得不通过复制在 Android 源代码中找到的一个来编写自己的 ShareActionProvider。我还必须从源代码复制 ActivityChooserView 和 ActivityChooserModel。在操作栏中隐藏默认活动所需的实际修改在 ActivityChooserView 中的 updateAppearance() 方法中。它应该是这样的：

```
private void updateAppearance() {
    // Expand overflow button.
    if (mAdapter.getCount() > 0) {
        mExpandActivityOverflowButton.setEnabled(true);
    } else {
        mExpandActivityOverflowButton.setEnabled(false);
    }
    mDefaultActivityButton.setVisibility(View.GONE);
    if (mDefaultActivityButton.getVisibility() == VISIBLE) {
        mActivityChooserContent.setBackgroundDrawable(mActivityChooserContentBackground);
    } else {
        mActivityChooserContent.setBackgroundDrawable(null);
    }
} 
```

我无法弄清楚为什么 setShareHistoryFileName(null) 会导致我最初描述的问题。感谢您尝试回答七。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T22:20:43.747

阅读 ActivityChooserModel 上的源代码，我发现历史文件是使用 Context 的 openFileInput 打开的。只要该类继续这样工作，如果您使用这些文件的常用方法删除它，您就可以保持历史“干净”：

```
getApplicationContext().deleteFile(SHARE_HISTORY_FILE_NAME);
shareActionProvider.setShareHistoryFileName(SHARE_HISTORY_FILE_NAME); 
```

当所选应用程序打开时， “最常用”图标**会**显示一段时间，但一旦用户回到您的应用程序，它就会消失。

如果需要，您还可以删除 onShareTargetSelected 方法中的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T19:07:21.250

我尝试了所有，我使用的是旧的 widget.ShareActionProvider（不是兼容 7），所以 null 会导致崩溃，deleteFile 肯定会删除，但应用程序重启后历史仍然存在......所以我发现只有一个工作的东西：随机！

```
 String fname=ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME;
    try {
        fname = prefs.getString("SHARE_HISTORY_FILE_NAME", ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);
        getApplicationContext().deleteFile(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);
        fname="SHARE_HISTORY_FILE_NAME"+Math.random()*1000;
        SharedPreferences.Editor ed = prefs.edit();
        ed.putString("SHARE_HISTORY_FILE_NAME", fname);
        ed.commit();
    } catch (Exception e) {
        Log.e(TAG,"err "+e.toString());
    }
    mSharedActionProvider.setShareHistoryFileName(fname); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-18T07:11:38.447

修改com.actionbarsherlock.widget.ShareActionProvider的onCreateActionView然后调用ActivityChooserModel的方法：setHistoryMaxSize(0)

# jquery - 在 .NET 中从 iFrame 触发下载

> ID：13395604
> 
> 赞同：1
> 
> 时间：2012-11-15T10:30:14.937
> 
> 标签：jquery, redirect, iframe, popup, response.write

好的，请耐心等待。我有一个 umbraco 站点，其中嵌入了一个外部控件（一个 ascx 文件和一个 dll）。

我提到它是 umbraco，因此您知道我们无法控制页面生命周期的大多数方面，否则它应该没关系。

该控件出现在 iframe 内的模式弹出窗口上，它只是一个表单。当您提交表单时，会在后面的代码中发送一封电子邮件，然后我想触发 PDF 下载，几秒钟后关闭模式弹出窗口。

到目前为止，这被证明是不可能的。似乎 Response.End() 似乎中断了控制回发。我也尝试过 Response.Flush() 或完全不使用它。没有任何效果。

有没有办法触发下载然后继续回发？我尝试了重定向，但我得到了一个重定向错误，这是有道理的，在 response.End() 之后不可能重定向。

我还尝试了仅 jQuery 的解决方案（jQuery.fileDownload.js），但由于 Umbraco 的限制（无法在页面上添加 cookie 标头），它不起作用。

这里的选项用完了。非常欢迎任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:22:36.287

例如，您可以尝试将管理下载的代码移动到独立控件（或 httphandler），并在表单提交时从 js 调用它，如下所示

```
$("#yourform").submit(function() {
    $('<form action="/pathtoyourhandler.ashx" method="POST"></form>')
    .appendTo('body').submit().remove();
}); 
```

（这是我们 umbraco 项目的实际代码）

# javascript - 如何根据下拉菜单中选择的选项在网页中创建动态内容

> ID：13395607
> 
> 赞同：0
> 
> 时间：2012-11-15T10:30:18.953
> 
> 标签：javascript, html, ajax

我有一个网页，其中有一个未选择默认选项的下拉菜单。当用户选择一个选项时，我想显示与该选项相关的文本框。我怎样才能做到这一点。例如我有这些图片![在此处输入图像描述](../Images/07584d2dcd8d67d541726221a8d62b0b.png)

![在此处输入图像描述](../Images/b5c4d505e0c83c780127fee5d637eaff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:41:18.897

使用可见性设置为隐藏的 div，并使其在选择事件中可见。您可以将多个 div 用于无神论目的，与选择事件相关联。

可以在帖子 2 中找到一个示例 -

[http://www.codingforums.com/showthread.php?t=167172](http://www.codingforums.com/showthread.php?t=167172)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:43:12.773

这很简单。所有文本框都是隐藏的，并且在您的下拉菜单中有一个事件，您只需显示正确的 div。

HTML：

```
<select id='dropdown' onchange='showDiv()'>
    <option>Select</option>
    <option value="div1">Div 1</option>
    <option value="div2">Div 2</option>
</select>

<br /><br />

<div id="div1" style='display: none;'>Div 1</div>
<div id="div2" style='display: none;'>Div 2</div> 
```

JS

```
<script type="text/javascript">
    function showDiv() {
        var div = document.getElementById("dropdown").value;
        if(document.getElementById(div) != null) {
        hideAllDiv();
            document.getElementById(div).style.display = "block";
    }
    }

    function hideAllDiv() {
        document.getElementById("div1").style.display = "none";
        document.getElementById("div2").style.display = "none";
    }
</script> 
```

上面的代码很难看，但你可以用 jquery 和一些 css 做得更好。

*编辑 ：*

**使用 Jquery 的示例**

```
<select id='dropdown'>
    <option>Select</option>
    <option value="div1">Div 1</option>
    <option value="div2">Div 2</option>
</select>

<br /><br />

<div class='div' id="div1">Div 1</div>
<div class='div' id="div2">Div 2</div>

<style type="text/css">
    .div { display: none; }
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#dropdown").change(function() {
            $(".div").hide();
            $("#" + $(this).val()).show();
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:34:41.237

真的取决于您在列表框中有多少选项以及文本框是否在选项之间共享。

您可以创建隐藏的 DIV，然后在选择选项时显示这些 DIV。您需要创建一个 JavaScript 函数，该函数使用附加到下拉列表的 onChange 事件触发。

如果您共享文本框，然后给它们特定的类，您可以在 Javascript 函数中显示/隐藏这些类，如果您使用 jQuery 之类的东西，这相对简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:34:45.780

为选择添加一个事件处理程序，如下所示：

```
$('#yourSelectId').change(function() {
    var selectedVal = $('#yourSelectId option:selected').attr('value');  
}); 
```

然后根据所选值（ $.('.class').hide() ）使一些隐藏的 div 可见。

# php - excel_reader2 中止

> ID：13395608
> 
> 赞同：0
> 
> 时间：2012-11-15T10:30:26.417
> 
> 标签：php, excel, abort

有没有人遇到过 excel_reader2 的问题，脚本被大量行中止，例如 excel 文件中超过 60k 行？我只是在错误日志中收到一条错误消息：已中止。就这样。我的服务器上有更多文件，脚本将它们一一接收，但是当我到达第二个时，消息来了，脚本停止了。它的 php 5.4.7 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:41:03.107

我不确定这个问题，但是 phpexcel 并不喜欢大的 excel 文件，这可能是个问题。请尝试使用只读块来限制数据，它可能会有所帮助。

# python - 包装超过 80 个字符的 python doctest 结果

> ID：13395610
> 
> 赞同：44
> 
> 时间：2012-11-15T10:30:28.517
> 
> 标签：python, doctest, pep8

我试图将我的源代码保持在 PEP8 推荐的 80 个字符的*指导*宽度之下，但无法弄清楚如何包装我的 doctest，它的结果超过 80 个字符。

一个点头的例子：

```
def long_string():
    """
    Returns a string which is wider than the recommended PEP8 linewidth

    >>> print long_string()
    0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789

    """
    return '0123456789' * 10 
```

我尝试了几种组合，包括使用`# doctest: +NORMALIZE_WHITESPACE`和尝试简单地用换行符换行。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-15T10:30:28.517

刚想通：

```
def long_string():
    """
    Returns a string which is wider than the recommended PEP8 linewidth

    >>> print long_string()
    01234567890123456789012345678901234567890123456789012345678901234567890\
12345678901234567890123456789

    """
    return '0123456789' * 10 
```

希望能帮助别人。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-28T19:39:14.330

正如**davitenio**和**qris**所建议的那样，我建议使用[`#doctest: +ELLIPSIS`指令](https://docs.python.org/2/library/doctest.html#doctest-directives)，就像这样。

```
>>> from test.test_ppp import MockForm
>>> form = MockForm(mock_file='no-errors.xlsx')
>>> form.get_languages(settings_default='English', survey_header=
... form.metadata['raw_data']['survey'][0])  #doctest: +ELLIPSIS
['Ateso', 'English', 'Luganda', ... 'Runyoro-Rutoro'] 
```

# ruby-on-rails - 如何在将回形针附件上传到 S3 之前对其进行加密？

> ID：13395613
> 
> 赞同：4
> 
> 时间：2012-11-15T10:30:32.453
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, aes

我正在开发一个 Ruby on Rails 网络应用程序。用户可以上传文件并将它们存储到 Amazons S3。对于文件上传，我使用回形针 gem。

如何在保存文件之前使用 AES256 加密文件？我知道 S3 具有服务器端加密，但这对我来说并不适用，因为我在移动应用程序中打开该站点并希望在客户端处理解密。

我知道我可以使用回形针处理器或 before_post_process 方法，但是如何获取正在上传的文件并进行更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-19T16:59:02.683

看看这个[关于异步](http://roberto.peakhut.com/2010/01/14/paperclip_recipes/)上传到 S3 的回形针配方。您可以使用它，然后将回调代码更改为：

```
def upload_to_s3
  self.remote_avatar = encrypt(local_avatar.to_file)
  self.local_avatar = nil
  self.save!
end 
```

其中方法`encrypt`是AES256函数。

如果您没有设置回形针，可能值得研究一下[CarrierWave的](https://github.com/carrierwaveuploader/carrierwave)[这个](https://github.com/dougc84/carrierwave_securefile)附加宝石，它可能会为您节省一些时间。

# google-maps - 谷歌地图中的多个数据集

> ID：13395614
> 
> 赞同：1
> 
> 时间：2012-11-15T10:30:38.420
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-maps-styled

我正在尝试对全国成千上万的人进行分类。

我知道大约有60类人，而且分布绝对不是随机的。15k 到 20k 人属于一个类别，很少有类别中没有任何人。

最后，我列出了以下数据 [lat/long, categoryId, count] - 在给定的 lat/long 中有 #count 个属于 #categoryId 的用户。

我确实有数千个这个列表，并试图在谷歌地图中显示它们。

我绝对需要在视觉上分别对比每个类别，以便我可以检查哪个类别与其他类别的人相处得很好。此外，我还想清楚地显示更大的#count（如果我们选择在圆圈中显示所有数据，比如更大的圆圈或其他东西）。

现在可以显示所有内容，但是 UI 变得非常混乱，没有人能够从数据中获得任何意义。关于如何可视化这些数据的任何想法？是否有任何技术（一些 javascript 插件已经这样做了？）

这是我要解决的真正问题的代理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:37:58.280

为什么不对数据应用聚类算法并对地图上的点进行聚类以使其更具可读性。我们在这个项目上做了类似的事情：

[http://roadworksline.org.uk/](http://roadworksonline.org.uk/)

# haskell - 最小的 haskell (ghc) 程序安装（没有 ghc/cabal 的部署）

> ID：13395615
> 
> 赞同：4
> 
> 时间：2012-11-15T10:30:51.090
> 
> 标签：haskell, deployment, static-linking, yesod

（我的问题是关于分发没有 haskell-platform、ghc、cabal 的二进制文件......）

我需要部署一个结构良好的 haskell 应用程序（一个 Yesod 脚手架），但我有磁盘空间限制。

GHC 大小约为 1Gbytes，存储所有 cabal 源代码、包等...需要更多磁盘空间等...

显然，haskell-platform, ghc, ... 是关于开发（而不是部署）。

在我的具体情况下，我可以生成

```
cabal clean && cabal configure && cabal build 
```

并成功运行（有些喜欢）

```
./dist/build/MyEntryPoint/MyEntryPoint arg arg arg 
```

但是，依赖项呢？如何将其移至生产环境？（连同我的*“dist”*编译）

我可以在没有 cabal 的情况下放置二进制依赖项吗？如何？

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T10:52:55.077

# opengl - 在打开 gl 绘图时改变灯光

> ID：13395618
> 
> 赞同：1
> 
> 时间：2012-11-15T10:31:05.067
> 
> 标签：opengl, graphics, 3d, rendering

我对一个主题感到好奇：假设我有复杂的场景和一盏灯，我可以通过顺序发送绘制命令（例如以 100 步）来部分绘制场景。

我可以在连续调用之间移动灯吗？例如，我会在靠近它的地方绘制带有 light0 的桌子，然后将 light0 移到墙上，然后画墙，然后将 light0 移到椅子上，然后画椅子。这会有点像组装这一切它是合法的，它不会工作，每个整个框架都应该在一个位置有一个灯？（同样的问题也适用于其他属性） tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:20:21.587

你当然可以。灯光位置只是一个变量，您可以像这样传递给对象着色器：

```
uniform vec4 fvAmbient;
uniform vec4 fvSpecular;
uniform vec4 fvDiffuse;
uniform float fSpecularPower;

uniform sampler2D baseMap;

varying vec2 Texcoord;
varying vec3 ViewDirection;
varying vec3 LightDirection; <------  here is your light position
varying vec3 Normal;

void main( void )
{
   vec3  fvLightDirection = normalize( LightDirection );
   vec3  fvNormal         = normalize( Normal );
   float fNDotL           = dot( fvNormal, fvLightDirection ); 

   vec3  fvReflection     = normalize( ( ( 2.0 * fvNormal ) * fNDotL ) - fvLightDirection ); 
   vec3  fvViewDirection  = normalize( ViewDirection );
   float fRDotV           = max( 0.0, dot( fvReflection, fvViewDirection ) );

   vec4  fvBaseColor      = texture2D( baseMap, Texcoord );

   vec4  fvTotalAmbient   = fvAmbient * fvBaseColor; 
   vec4  fvTotalDiffuse   = fvDiffuse * fNDotL * fvBaseColor; 
   vec4  fvTotalSpecular  = fvSpecular * ( pow( fRDotV, fSpecularPower ) );

   gl_FragColor = ( fvTotalAmbient + fvTotalDiffuse + fvTotalSpecular );

} 
```

它是一个具有纹理的着色器和一个无限远的点光源。

如果您需要在对象之间移动光源，则可以轻松更改变量值。

# node.js - killall上的nodejs关闭钩子

> ID：13395623
> 
> 赞同：2
> 
> 时间：2012-11-15T10:31:14.887
> 
> 标签：node.js, hook, shutdown

我正在尝试将一些关闭功能绑定到我的 nodejs 应用程序（版本 0.8.12）。由于我产生了很多子进程并在分布式环境中工作，因此我目前正在通过

```
var n = spawn('killall', ['node']); 
```

问题是，显然`on('exit', ...)`逻辑不再起作用，实际上我有这样的事情：

```
process.on('exit', function() {
    if(exit_cb)
        exit_cb()
    else
        console.log('About to exit.');
}); 
```

每当我终止应用程序时，它都不会触发。

有没有办法用`killall`命令添加关闭钩子，或者我应该找到另一种方法来杀死我的子进程以使钩子工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T12:05:43.207

您需要监听默认发送的`SIGTERM`信号`killall`。但是您还需要在所有作业完成后手动停止您的进程。

```
process.on('SIGTERM', function() {
    if(exit_cb) {
        exit_cb();
        process.exit();
    } else {
        console.log('About to exit.');
        process.exit();
    }
}); 
```

# facebook-graph-api - 签到页面

> ID：13395624
> 
> 赞同：1
> 
> 时间：2012-11-15T10:31:21.430
> 
> 标签：facebook-graph-api, facebook-oauth, checkin, django-facebook

我在 Facebook 上有一个页面，我想知道为什么人们不能在我的页面上签到？我尝试签入，它提出了一个不同的页面，我已将这些页面合并在一起，但它仍然无法正常工作。如果我需要更改任何设置，请告诉我。

# php - 如何在wordpress中动态分配页面模板

> ID：13395625
> 
> 赞同：4
> 
> 时间：2012-11-15T10:31:24.097
> 
> 标签：php, wordpress, templates

我有一个动态创建的 WordPress 页面

```
$my_post = array(
        'post_title' => 'page-for-download',
        'post_content' => '',
        'post_status' => 'publish',
        'post_author' => 1,
        'post_type' => 'page'

    ); 
```

现在我的问题是如何动态地将页面模板分配给这个页面

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T10:34:45.680

WordPress 将页面模板保存在帖子元条目（名为`_wp_page_template`）中。创建页面后，您应该执行以下操作：

```
update_post_meta( $new_post_id, '_wp_page_template', 'custom-template.php' ); 
```

`$new_post_id`结果在哪里`wp_insert_post()`（我假设这是您用来创建新帖子的内容）。请注意，您可能想检查您是否有一个实际的 id（`wp_insert_post()`如果创建新帖子失败，默认情况下将返回 false）。

[您可以在 WordPress codex 页面Function Reference/wp insert post的](http://codex.wordpress.org/Function_Reference/wp_insert_post)**Parameters**部分的第一个**NOTE**中看到该信息

# oracle - plsql 用于插入表

> ID：13395630
> 
> 赞同：0
> 
> 时间：2012-11-15T10:31:46.507
> 
> 标签：oracle, plsql

```
declare

dno number(4);
dname varchar2(5);
ddate date;
dbasic number(10);
djob varchar2(15);
dcomm number(5);
dept  number(5);
dmgr  number(5);

begin
select empno,ename,hiredate,sal,job1,comm,deptno,mgr
into dno,dname,ddate,dbasic,djob,dcomm,dept,dmgr
from emp
where empno=&userno;
if sql%rowcount>0
then
   insert into newempl
   values(dno,dname,djob,dmgr,ddate,dbasic,dcomm,dept);
   dbms_output.put_line('records inserted into it');
   dbms_output.put_line(dno||' '||dname||' '||ddate||' '||dbasic);
   end if;
   end; 
```

错误报告：

```
ORA-01858: a non-numeric character was found where a numeric was expected
ORA-06512: at line 19
01858\. 00000 -  "a non-numeric character was found where a numeric was expected"
*Cause:    The input data to be converted using a date format model was
           incorrect.  The input data did not contain a number where a number was
           required by the format model.
*Action:   Fix the input data or the date format model to make sure the
           elements match in number and type.  Then retry the operation. 
```

我不明白错误是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:35:21.497

从错误消息看来，您将值插入到错误的列中。在没有看到您的表结构（`describe newmpl`例如）的情况下，这有点猜测，但是这个声明：

```
insert into newempl
values(dno,dname,djob,dmgr,ddate,dbasic,dcomm,dept); 
```

...假设`newempl`表中的列按特定顺序排列，但可能不是（并且似乎不是）情况。更具体地说，我认为它在抱怨`hiredate`，因为您隐含地将`djob`值放在该列中 - 假设新表看起来像`emp`- 并且该`djob`值无法转换为日期。

**根据评论更新**：根据您所说的创建表的方式，这相当于：

```
insert into newempl(dno, dname, ddate, dbasic, djob, dcomm, dept, dmgr)
values(dno,dname,djob,dmgr,ddate,dbasic,dcomm,dept); 
```

...因此您可以看到，当它的布局像列未对齐时，您确实在尝试将您的`djob`值放入`ddate`列中，这是行不通的。

明确指定列总是更安全，既可以防止在不同环境中出现不同排序的问题（尽管受控代码不应该真正发生这种情况），也可以防止在添加新列时出现这种情况。就像是：

```
insert into newempl(empno,ename,jon1,mgr,hiredate,sal,comm,deptno)
values(dno,dname,djob,dmgr,ddate,dbasic,dcomm,dept); 
```

顺便说一句，在声明局部变量时，您可以[基于 table](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/fundamentals.htm#sthref87)指定它们，例如`dno emp.empno%TYPE`. 另外，根据您的评论，我建议为表列赋予局部变量不同的名称以避免混淆。

正如 a_horse_with_no_name 所说，这可以通过简单的 SQL 插入来完成，甚至在 PL/SQL 块中也不需要单独`select`的 and`insert`语句；你可以这样做：

```
insert into newempl(empno,ename,jon1,mgr,hiredate,sal,comm,deptno)
select empno,ename,jon1,mgr,hiredate,sal,comm,deptno
from emp
where empno=&userno; 
```

不幸的是，这些都没有解决“必须将作为经理的员工插入新表”的要求，因为您没有对该`mgr`列执行任何操作。不过，我认为此时为您完成这部分任务不会有建设性，而且我不确定在哪里`&userno`适合。

# android - 添加电话状态监听器

> ID：13395633
> 
> 赞同：13
> 
> 时间：2012-11-15T10:31:51.980
> 
> 标签：android, phone-call, phone-state-listener

我正在尝试设置，`PhoneStateListener`但我得到了一个`PhoneCallListener cannot be resolved to a type`.

```
public class ButtonView extends FrameLayout  {

     PhoneCallListener phoneListener = new PhoneCallListener();
     TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
     telephonyManager.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);
} 
```

在另一个示例中，我发现它是这样写的并且它正在工作

```
public class MainActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {

        // add PhoneStateListener
        PhoneCallListener phoneListener = new PhoneCallListener();
        TelephonyManager telephonyManager = (TelephonyManager) this
            .getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);
} 
```

我应该在我的代码中进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-15T11:03:37.610

您必须创建一个接收器来接听电话。

为此，请将其添加到您的 manifest.xml 中：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<receiver android:name=".ServiceReceiver">
    <intent-filter>
      <action android:name="android.intent.action.PHONE_STATE" />
   </intent-filter>
</receiver> 
```

并创建这些类：

```
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.webkit.WebView;

public class MyPhoneStateListener extends PhoneStateListener {

    public static Boolean phoneRinging = false;

    public void onCallStateChanged(int state, String incomingNumber) {

        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:
            Log.d("DEBUG", "IDLE");
            phoneRinging = false;
            break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
            Log.d("DEBUG", "OFFHOOK");
            phoneRinging = false;
            break;
        case TelephonyManager.CALL_STATE_RINGING:
            Log.d("DEBUG", "RINGING");
            phoneRinging = true;

            break;
        }
    }

} 
```

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;

public class ServiceReceiver extends BroadcastReceiver {
    TelephonyManager telephony;

    public void onReceive(Context context, Intent intent) {
        MyPhoneStateListener phoneListener = new MyPhoneStateListener();
        telephony = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        telephony.listen(phoneListener, PhoneStateListener.LISTEN_CALL_STATE);
    }

    public void onDestroy() {
        telephony.listen(null, PhoneStateListener.LISTEN_NONE);
    }

} 
```

# asp.net-mvc-3 - 如何首先在我的代码中与现有数据库创建关系

> ID：13395635
> 
> 赞同：0
> 
> 时间：2012-11-15T10:31:53.010
> 
> 标签：asp.net-mvc-3, visual-studio-2010, c#-4.0

我曾尝试寻找答案，虽然我确信我的问题已在某处得到解答，但我未能得到答案。我有两个独立但相关的表。我正在处理我在 EF 中的课程。我想在 c# 中创建一个没有或一对多关系的模型。我如何在代码中做到这一点？下面是我的两个模型：

```
public class adult
{
        [Key]
    public int ID { get; set; }
    [StringLength(50, ErrorMessage = "{0} cannot exceed {1} characters")]
    public string LastName { get; set; }
    public string Initials { get; set; }
    public string Title { get; set;}
    public string Address1 {get; set;}
    public string Address2 {get; set;} 
 } 
```

下面是带有许多“孩子”的第二个模型。

```
 public class children
{
    [Key]
    public int childNo { get; set; }
    public string favourite { get; set; }
    **public int childID { get; set; }**

    [Required]
    [StringLength(50, ErrorMessage = "{0} cannot exceed {1} characters")]
    public string colour { get; set; }
    public DateTime DateReceived { get; set; }
    public DateTime DatePaid { get; set; }
} 
```

我对没有或一对多的关系感兴趣，即我可以有一个没有孩子的成年人。儿童类中的childID对应于成人类中的ID。我们在类中没有一个或一个 ID 与子类中的许多 childID 匹配。我如何在课堂上进行建模？我也有兴趣在一个视图中显示这些映射值并编辑、创建和保存更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:03:14.117

就像调用成员一样简单。例如，当您想知道哪些孩子与特定成人相关时，您可以使用如下代码：

```
var childno = db.adult.child.ChildNo; 
```

或搜索：

```
string favor = db.adult.child.Find(input.id).Select(s => s.favourite).ToString(); 
```

child 模型现在是成人的成员，成人的 ICollection 中可能有一些孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:50:32.497

答案是Entity Framework Code首先通过一些编码自己创建一对一、一对多、多对多等关系。通过使用虚拟属性，您可以在两个模型之间导航，因此将下面的代码添加到您的第一个模型中：

```
public virtual ICollection<children> children_{ get; set;} 
```

然后在第二个模型中添加：

```
[Required]
public virtual adult adult_{ get; set;} 
```

这代表了儿童和成人之间的一对多关系。[必需] 确保任何孩子都肯定有父母（成人），因此它不能为空。请注意，无需在当前模型中添加其他模型的关系 ID。所以使用这部分代码一般不使用：

```
public int childID {get; set;} 
```

如果你想在第二个模型中使用上面的代码，数据库中不会出现导航。必须手动将其安装在控制器中并在您的代码（如控制器）中导航表。但是，通过使用虚拟属性 EF 生成这样的关系键以在模型之间导航。使用此技术后，查看您的表，您会在成人中找到名为 childID 的列由 EF 自动创建的表。

# python - python多进程没有正确完成

> ID：13395636
> 
> 赞同：2
> 
> 时间：2012-11-15T10:31:58.923
> 
> 标签：python, multiprocessing

我的问题是完成子进程，我使用多进程库，并且在一台带有返回或退出线的机器上，进程在加入之前死亡，但在另一台机器上没有。这些过程总是在增长，并且在完成工作后它们都不会完成。在两台机器上，python 的版本都是 2.7.3rc2。

```
semaphore_processes_limit = BoundedSemaphore(value=PROCS_LIMIT)

# Starting searches
procs = []
for word in words:
    semaphore_processes_limit.acquire()
    p = Process(target=searching, args=(word,))
    procs.append(p)
    p.start()

# Wait for all worker processes to finish
for p in procs:
    p.join()

# Process
def searching(word):
return # or exit(0) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:35:45.010

嗨，我试图在这两台机器上重现同样的问题：

Python 2.6.7 (r267:88850, Feb 2 2012, 23:50:20) 在 Vista 上的 Cygwin

Python 2.7.3（默认，2012 年 8 月 1 日，05:16:07）Ubuntu 12.04

在 p.join() 之后，它们都正确完成了。

解释 1：但是，如果我将 PROCS_LIMIT 降低到一个低于 len(words) 的数字，则最后一个过程不会完成。

解释 2：信号量可以在不同的主机操作系统上以不同的方式处理。从而产生不同的结果。请参阅此页面顶部的警告：http: [//docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)

以前，由于缺乏线程支持，我在 Cygwin 上的 python 中的子进程模块遇到了问题。

您能描述一下您正在运行的机器类型和操作系统吗？

这是我对您的代码进行的修改以使其运行：

```
from multiprocessing import *
from threading import *

# Process
def searching(word):
    print(word)
    return # or exit(0)

PROCS_LIMIT = 5
semaphore_processes_limit = BoundedSemaphore(value=PROCS_LIMIT)

# Starting searches
words = ["foo", "bar", "baz", "buz", "biz"]
procs = []
for word in words:
    semaphore_processes_limit.acquire()
    p = Process(target=searching, args=(word,))
    procs.append(p)
    p.start()

# Wait for all worker processes to finish
for p in procs:
    p.join() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:45:15.723

最后是服务器错误，但我不知道是什么。

在这里，我使用信号量的版本编写了 kugg 的示例，以使用低 PROCS_LIMIT：

```
from multiprocessing import *

PROCS_LIMIT = 2
semaphore_processes_limit = BoundedSemaphore(value=PROCS_LIMIT)

# Process
def process(word):
    print(word)
    semaphore_processes_limit.release()
    return

# Starting searches
words = ["foo", "bar", "baz", "buz", "biz"]
procs = []
for word in words:
    semaphore_processes_limit.acquire()
    p = Process(target=process, args=(word,))
    procs.append(p)
    p.start()

# Wait for all worker processes to finish
for p in procs:
    p.join() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:07:11.773

该服务器有 12 个 CPU（Intel(R) Core(TM) i7-3930K CPU @ 3.20GHz，1200 MHz）并安装了 GNU/Linux Debian Weezy。

我暂时丑陋的解决方案是：

```
os.kill(os.getpid(), 9) 
```

# linux - Red Hat Enterprise Linux Server 5.5 版上的远程 IDE

> ID：13395637
> 
> 赞同：2
> 
> 时间：2012-11-15T10:32:02.917
> 
> 标签：linux, ide, remote-debugging, redhat, remote-access

我有这个版本的 Linux 服务器：

```
-bash-3.2$ cat /proc/version
Linux version 2.6.18-194.11.1.el5 (mockbuild@hs20-bc2-3.build.redhat.com) (gcc version 4.1.2 20080704 (Red Hat 4.1.2-48)) #1 SMP Tue Jul 27 05:45:06 EDT 2010
-bash-3.2$ cat /etc/*release*
cat: /etc/lsb-release.d: Is a directory
Red Hat Enterprise Linux Server release 5.5 (Tikanga) 
```

**目前，我正在Linux端编写c程序**，我需要服务器电源来执行我的程序。**我更喜欢 IDE**，但由于**我的机器是 Windows**而不是，**我必须在服务器上远程编译程序**。有时，程序崩溃后我无法运行堆栈跟踪是如此痛苦。我想要的是实现更高的生产力。

我只能用 PuTTY 之类的方式访问这个服务器，**我没有安装任何软件的权限。**并且**更新服务器中的软件也是不可能的。**

我看到服务器有像 Matlab 这样的程序，可以在客户端输出到 XMing。（例如，我可以从服务器端将 Matlab 作为 GUI 运行并让它显示在我的客户端设备上）

我看到有些人建议我使用 Eclipse，但 IDE 太慢了。事实上，它会降低生产力。

**那么，考虑到上面的粗体**标准，是否有任何建议或方案可以让我在服务器上远程编译、执行和调试我的程序，并且更易于使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:07:54.573

您不能以 root 身份安装，但也许您可以在用户目录中手动安装应用程序？有了它和 X11 转发，你应该被设置（除了一点延迟）。
此外，如果您在遥控器上有 gdb（您可能会这样做，因为您也有编译器），您可以在启用核心转储（ulimit -c 无限制）后通过打开二进制文件和核心文件来查看堆栈跟踪：gdb - c ，然后是 bt。

# c++ - 如何在 boost::unique_lock 上尝试锁定

> ID：13395639
> 
> 赞同：4
> 
> 时间：2012-11-15T10:32:15.953
> 
> 标签：c++, multithreading, boost

根据标题，如何在 boost::unique_lock 上尝试锁定？

我有这个代码：

```
void mySafeFunct()
{
    if(myMutex.try_lock() == false)
    {
        return -1;
    }

    // mutex ownership is automatically acquired

    // do stuff safely

    myMutex.unlock();
} 
```

现在我想使用一个 unique_lock（它也是一个作用域互斥锁）而不是普通的 boost::mutex。我希望这样可以避免来自函数体的所有 unlock() 调用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T10:50:38.473

您可以使用[Defer 构造函数](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.locks.unique_lock.constructor_try)延迟锁定，或者在创建时使用[Try 构造函数](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.locks.unique_lock.constructor_try)`unique_lock`：

```
boost::mutex myMutex;
boost::unique_lock<boost::mutex> lock(myMutex, boost::try_lock);

if (!lock.owns_lock())
    return -1;

... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T10:46:00.457

```
boost::mutex myMutex;
boost::unique_lock<boost::mutex> lock(myMutex, boost::defer_lock);
lock.try_lock() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-20T06:18:13.710

以前的答案可能已经过时。我正在使用 boost 1.53，这似乎有效：

```
boost::unique_lock<boost::mutex> lk(myMutex, boost::try_to_lock);
if (lk)
  doTheJob(); 
```

# jquery - jQuery 数据表 + JSON

> ID：13395643
> 
> 赞同：0
> 
> 时间：2012-11-15T10:32:34.397
> 
> 标签：jquery, json

我有一个 JSON 代码：

```
"rows": [
        {
            "id": 1,
            "name": "nazwa1"
        },
        {
            "id": 2,
            "name": "nazwa2"
        },
        {
            "id": 3,
            "name": "nazwa3"
        },
        ...
        {
            "id": 99,
            "name": "nazwa99"
        }
    ] 
```

在 jQuery 中，我有一个 JSON 对象`listName`

脚本如下：

```
$('#displayData').dataTable({
    "aaData": listName,
    "aoColumns": [
        { "mDataProp": "id" },
        { "mDataProp": "name" }
    ]
}); 
```

但是错了，如何从 listName 完成 jQuery 中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:39:57.043

```
fxnRelatedData = function () {
        $(document).ready(function () {
            $('#displayData').change(function () {
                $.each(rows, function (index) {
                       /* give some class name to your table rows*/
                        $(".ClassName").html(rows[index].name);
                 });      
            });
        });
    }; 
```

fxnRelatedData();

# android - Android弹出窗口onTouchIntercept不起作用

> ID：13395648
> 
> 赞同：0
> 
> 时间：2012-11-15T10:32:44.117
> 
> 标签：android

这是我的弹出窗口。但它正在处理任何触摸事件..

```
 popup = new PopupWindow(popupView, 300, 300, true);
    popup.showAsDropDown(v, -30, 0);
    popup.setBackgroundDrawable(getResources().getDrawable(R.drawable.background));
    popup.setOutsideTouchable(true);
    popup.setTouchable(true);
    popup.setFocusable(true);
    popup.setTouchInterceptor(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.d("TAG", "Touched in the window");
            return false;
        }
    }); 
```

请告诉我这段代码的问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T17:03:08.307

为了帮助偶然发现此线程的人...

而不是`setTouchInterceptor()`，我一直在使用`setOnClickListener()`or `setOnTouchListener()`，它们不是 PopupWindow 的成员，是的，但我只是调用 LayoutInflater 来获取弹出窗口（视图），然后将其设置为 PopupWindow 布局。继续使用 View 成员函数执行 MAGIC，因为它更适合您。

代码示例：

```
LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.my_popup_layout_id);
LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = layoutInflater.inflate(R.layout.popup_layout, viewGroup);

popup = new PopupWindow(context);
popup.setContentView(layout);
popup.setWidth(popupWidth);
popup.setHeight(popupHeight);
//popup.setFocusable(true);
popup.setOutsideTouchable(false);

popup.showAsDropDown(anchorViewOfYourChoice, OFFSET_X, OFFSET_Y); 
```

# azure-sql-database - SQL 空间索引和聚集索引

> ID：13395651
> 
> 赞同：1
> 
> 时间：2012-11-15T10:32:50.013
> 
> 标签：azure-sql-database, clustered-index, spatial-index

我正在 SQL Server Azure Server 中的地理列上创建空间索引，如下所示。

使用 GEOGRAPHY_GRID WITH (GRIDS = (LEVEL_1 = LOW, LEVEL_2 = LOW, LEVEL_3 = HIGH, LEVEL_4 = HIGH), CELLS_PER_OBJECT = 16, DROP_EXISTING = ON) 在 TableA(GeographyAreaCode) 上创建空间索引 sp_idx

现在我观察到正在创建两个具有给定名称 sp_idx 的索引 - 一个是空间索引，另一个是聚集索引。

SQL Server 是否使用空间索引创建强制聚集索引？

另外，如果我必须删除此索引，它是否也会删除关联的聚集索引？

提前谢谢了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:01:14.130

所有 SQL 天蓝色表都需要聚集索引：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx#cir](http://msdn.microsoft.com/en-us/library/windowsazure/ee336245.aspx#cir)

这是设计使然。要回答您的问题：

删除特殊索引不应删除聚集索引。SQL Azure 可能创建了聚集索引，因为您没有，而且它是 SQL Azure 中的一项要求。我会自己管理聚集索引，而不是让 SQL Azure 放在那里，只是为了满足要求。

**更新**

您只能在任何 SQL 表上拥有一个聚集索引。没有在已存在聚集索引的表上管理其他聚集索引。我希望这对您在下面的评论有所帮助。

# php - 在哪里下载 iMagick PHP 扩展 VC6 和 VC9

> ID：13395652
> 
> 赞同：-1
> 
> 时间：2012-11-15T10:32:50.040
> 
> 标签：php, imagick, php-extension

我想在我的 PHP 网页中使用[iMagick](http://www.imagemagick.org/script/index.php)，但我找不到在哪里下载使用代码[http://pecl.php.net/package/imagick编译的 Windows 官方 PHP 扩展](http://pecl.php.net/package/imagick)

我在网上找到了一些链接，例如：

1.  [http://valokuva.org/outside-blog-content/imagick-windows-builds/php53/imagick-2.3.0-dev/](http://valokuva.org/outside-blog-content/imagick-windows-builds/php53/imagick-2.3.0-dev/)
2.  [http://dev.freshsite.pl/php-extensions/imagick.html](http://dev.freshsite.pl/php-extensions/imagick.html)

但是一些 PHP 扩展非常旧并且使 Apache 崩溃，其他的正在工作。

我怎么能相信里面的 DLL 代码呢？

是否有一个受信任的网站可以下载使用 VC6 和 VC9 编译的 iMagick PHP 扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:43:28.513

[试着看看这里](http://www.mediafire.com/php-win64-extensions)通常这些扩展工作得很好。

对于生产服务器，最好使用 PECL、Visual Studio 或 Windows SDK 从源代码编译它

[Pecl 上的 Imagemagick 源代码](http://pecl.php.net/package/imagick)

[如何在 Windows 上构建 php 扩展](http://www.dreamincode.net/forums/topic/244215-introduction-to-creating-a-php-extension-for-windows/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T06:55:11.357

我还花了几个小时试图在 Windows 7 上安装 imagick。只有这个解决方案有效[https://mlocati.github.io/articles/php-windows-imagick.html](https://mlocati.github.io/articles/php-windows-imagick.html) 它告诉我的系统可以使用的确切版本。请注意，通常 Windows 是 64 位，但 xampp 上的 php 具有 x84

# jquery - datatables-1.9.4 是否支持 IE7？

> ID：13395659
> 
> 赞同：0
> 
> 时间：2012-11-15T10:33:16.123
> 
> 标签：jquery, datatables

谁能告诉我datatables-1.9.4是否支持IE7？我的数据表在 IE7 中不工作，而在 IE8 和 9 中工作正常。请回复，因为我急需这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:40:42.960

简单地说，
**是**
的，但是您会遇到一些问题，例如工作缓慢以及一些显示问题

# axapta - 允许在对话字段中进行多项选择

> ID：13395660
> 
> 赞同：1
> 
> 时间：2012-11-15T10:33:19.277
> 
> 标签：axapta, dynamics-ax-2009

是否可以允许在对话框字段中进行多项选择，就像报告选择条件字段的工作方式一样？

因此，例如，我有一个具有扩展类型 InventSiteId 的 dialogField，每次我从下拉列表中选择一个 inventSiteId 时，我都希望将查找添加到我的 dialogField 中，而不是替换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:06:03.583

这可以使用控件`ReplaceOnLookup`上可用的属性来完成。`StringEdit`

```
DialogField dlgField = dialog.addField(...);
FormStringControl fsc = dlgField.control();
fsc.replaceOnLookup(false); 
```

# ios - 如何在 ejabberd 中设置用户密码？

> ID：13395671
> 
> 赞同：0
> 
> 时间：2012-11-15T10:33:54.563
> 
> 标签：ios, xmpp, ejabberd

我安装了 eJabberd 来测试我的 iOS 应用程序的 XMPP 功能。我可以使用管理员用户名和密码登录。但是我在“访问控制列表”中创建了两个用户。当我尝试使用这些用户登录时，我收到一条错误消息，提示密码不正确。我目前正在 Mac OS 中使用 Message 应用程序进行测试。

他们有默认密码吗？如果没有，如何为用户设置密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T00:47:46.623

如果您在 osx 或 linux 上运行 eJabberD，您可以使用 ejabberdctl 创建用户并设置密码。[http://manpages.ubuntu.com/manpages/hardy/man8/ejabberdctl.8.html](http://manpages.ubuntu.com/manpages/hardy/man8/ejabberdctl.8.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T07:15:46.487

您还可以使用 Ejabberd 服务器的 Web 管理面板添加用户。要使用管理面板，请使用以下内容：

“http://localhost:5280/admin”

它将询问管理员的用户名和密码，并且是您在 ejabberd 安装期间配置的用户名和密码。

# android - 从数据库更新列表视图

> ID：13395672
> 
> 赞同：0
> 
> 时间：2012-11-15T10:33:58.073
> 
> 标签：android, android-listview, android-sqlite

我觉得我错过了一些简单而愚蠢的东西。我有一个列表视图，顶部有几个按钮。列表视图最初填充了数据。当您单击按钮时，列表视图应该根据 Where 语句中更改的变量填充其自身。实际上，我可能只是开始一个新的列表活动，但我觉得有更好的方法。

我一直在阅读，`CursorAdapter.changeAdapter()`但`notifydatasetchanged()`我还没有实现这个，因为我有一个更基本的问题。

我可以成功查询数据库并在列表中显示静态结果。当我尝试将流程分解为多个步骤时，我遇到了 ERROR: Invalid statement in `fillWindow`. 据我所知，这是由于不正确地关闭游标数据库和数据库助手造成的，因此人们使用内容提供程序。

现在我只是想让这个工作。

```
 public class DListView extends ListActivity implements OnClickListener{

public static final String NAME = "Name";

public static final String DESCRIPT = "Description";

public static final String DATABASE_TABLE = "Table";

public static final String DAY = "Day_id";

    /** Called when the activity is first created. */
private Cursor c = null;    

private String[] colsfrom = {"_id", NAME, DESCRIPT, DAY};
private int[] to = new int[] {R.id.text01, R.id.text02, R.id.text03, R.id.text04};

public int b = 0;

public int d = 0; 

   @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.drinklistview);

        View left = findViewById(R.id.left_button);
        left.setOnClickListener(this);
        View right = findViewById(R.id.right_button);
        right.setOnClickListener(this);

        Intent thisIntent = getIntent();
        b = thisIntent.getIntExtra("_b", 0); 
        //0 is the default argument is nothing is passed.
        d = thisIntent.getIntExtra("_d", 0); //same idea as above.

            c = fillList(); 

            /*this creates a new cursor adapter
            @param Context is the list context that you will be filling. 
            @param int layout is the layout that you will use for the rows
            @param Cursor is the cursor that was returned from the query
            @param from is the column names
            @param to is the layout ids that the fields will be put in. 
            @param from is the column names to map from
            @param to is the layout ids that the column fields will be put in. 
            */
            SimpleCursorAdapter myAdapter = new SimpleCursorAdapter(this, R.layout.row, c, colsfrom, to);
            setListAdapter(myAdapter);
   }

private Cursor fillList() {
    DBHelper DbHelper = new DBHelper(this);
    Cursor cursor;
    String wHERE = "_id = " + b + " AND Day_id = " + d ; 

    try {
        myDbHelper.openDataBase();  
    }
    catch(SQLException sqle){
        throw sqle; 
    }

    cursor = myDbHelper.getDrinks(DATABASE_TABLE, colsfrom, wHERE, null, null,null, null);

    myDbHelper.close();

    return cursor;

} 
```

当我将 fillList() 的内容放入 onCreate() 时，它显示数据就好了。当我把它拔出来时，它给了我错误。为什么会这样？如果有人有更好的解决方法，我很乐意阅读它。或者我们可以玩一个游戏，叫做“我现在做错了什么愚蠢的事情？谢谢。

编辑：来自 DBHelper

```
public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}

    @Override
    public synchronized void close() {

        if(myDataBase != null)
            myDataBase.close();
        super.close();
    } 
```

我在想我的问题线是 super.close() 我相信这条线会关闭数据库以及与之相关的任何东西，这意味着我在关闭后尝试使用的光标。不过我可能是错的。如果可以请解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:19:18.470

您的问题就在这里，在您的`fillList()`：

```
myDbHelper.close(); // <--- here
return cursor; 
```

你创建了一个游标对象，但在你使用它（数据库的这个组件）之前关闭了你的数据库连接，如果你愿意的话，这会使它变得无用或为空。通常你关闭游标*，然后*关闭数据库。但这并没有引发错误。该错误*具体*是因为您将此光标连接到 cursorAdapter 试图用任何内容填充您的 listView 。移动它，它应该消失了。

那么你把它移到哪里呢？如果你有一个光标连接到 listView，它需要一直打开，否则你会得到另一个错误，说“试图重新打开一个已经关闭的对象”。我建议将`onDestroy()`listView 也放入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:58:03.390

耶解决了。芒果是完全正确的。感谢您建议在销毁时关闭光标。我不确定 super.close() 行是否关闭了我的光标。但我会调查的。我还将把数据库查询放在异步任务中，以备不时之需。

我只是移动了创建新 SimpleCursorAdapter 的两行并将列表视图设置到 fillList 方法中。

我还实现了我的按钮，并在最后添加了 fillList。这是修复问题的代码。简单的错误。

```
private void fillList() {
DBHelper DbHelper = new DBHelper(this);
Cursor cursor;
String wHERE = "_id = " + b + " AND Day_id = " + d ; 

try {
    myDbHelper.openDataBase();  
}
catch(SQLException sqle){
    throw sqle; 
}

cursor = myDbHelper.getDrinks(DATABASE_TABLE, colsfrom, wHERE, null, null,null, null);
SimpleCursorAdapter myAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, colsfrom, to);
setListAdapter(myAdapter);
myDbHelper.close();
 } 
```

这是我再次调用 fillList 来更新我的列表视图。

```
 public void onClick(View v) {
    switch(v.getId()) {

    //Mess with d based on button click
    }
    fillList();
} 
```

现在，应用程序必须在每次更改时创建一个新的简单光标适配器。如果有人对实现这一点有任何想法，而无需每次都创建新的 CursorAdapter，这将非常有帮助，但我最初的问题已经解决。谢谢您的帮助。只是您想查看我的堆栈跟踪的事实告诉我，我在最初提供的代码中没有做错任何事情，我忘记了我让我的 dbHelper 关闭了所有连接。谢谢芒果。我昨晚解决了这个问题，但无法发布。谢谢好先生的解释。如果您对不断创建新的 cursoradapter 有任何见解，我会很高兴看到它。也许我需要以某种方式修复 super.close() 命令。

# android - Admob 想要 640,100 有：480,654 - 为什么没有交付 480 尺寸的横幅？

> ID：13395674
> 
> 赞同：3
> 
> 时间：2012-11-15T10:34:00.690
> 
> 标签：android, admob, space, banner

我在屏幕尺寸为 480x800px 的 Galaxy S2 模拟器上运行我的 Admob android 应用程序。Admob 给出错误：

```
"Not enough space to show ad! Wants <640,100>, Has <480,654>" 
```

为什么要 admob 提供 640 横幅而不是 480 横幅？我该如何解决？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:21:03.717

AdMob 的 AdView 使用与密度无关的像素。如果您在屏幕密度为 2.0 的设备上请求 320x50dp 横幅，则像素大小实际上为 (320x50)*2 = 640x100。

Galaxy S2 是密度为 1.5 的 hdpi 设备（因此 AdMob 会请求 480x75）。您可能错误地将模拟器配置为具有 2.0 的屏幕密度，因此实际上没有足够的空间以纵向模式显示广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:02:40.147

admob 中没有尺寸为 480 的横幅，但关闭的横幅尺寸为 468 x 60

更改所需的横幅大小登录到您的 admob 帐户，然后：站点和应用程序 => 在中介（标签头）下方配置

文档链接： [https ://developers.google.com/mobile-ads-sdk/docs/admob/intermediate](https://developers.google.com/mobile-ads-sdk/docs/admob/intermediate)

# jquery - 是否可以使用 .each() 数组来定位多个 div？

> ID：13395676
> 
> 赞同：3
> 
> 时间：2012-11-15T10:34:18.177
> 
> 标签：jquery, html, each

只是一点免责声明：我是 jquery/javascript 编程的新手，只知道 html/css 设计的基础知识。

我一直在尝试在页面上随机放置一些 soundcloud 小部件。我似乎已经设法实现了这一点 - 但要做到这一点，我必须：在 css 中创建一个新的 div id，将每个小部件分配给一个单独的 div id 名称，然后编写一个函数来单独移动每个 div。我尝试使用 .each()，但从我可以收集到的其他问题来看，这不适用于遍历 div，只有 div.class 名称......从这里开始，我在尝试 .each() 时感到非常困惑；.parent(); 测试中的类名等..

这是我每次都必须复制的js（只是在'scTrack'之后更改数字）：

```
(function() {

var docHeight = $(document).height(),
    docWidth = $(document).width(),
    $div = $('#scTrack1'),
    divWidth = $div.width(),
    divHeight = $div.height(),
    heightMax = docHeight - divHeight,
    widthMax = docWidth - divWidth;

$div.css({
    left: Math.floor(Math.random() * widthMax),
    top: Math.floor(Math.random() * heightMax)
});
}); 
```

CSS：

```
#scTrack1 {
position:absolute;
height:70px;
width: 200px;
} 
```

html

```
<div id="scTrack1">
<object height="81" width="100%"> <param name="movie" value="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F67155680&amp;show_comments=false&amp;auto_play=false&amp;color=000000"></param> <param name="allowscriptaccess" value="always"></param> <embed allowscriptaccess="always" height="81" src="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F67155680&amp;show_comments=false&amp;auto_play=false&amp;color=000000" type="application/x-shockwave-flash" width="100%"></embed> </object>    
</div> 
```

这是我在 jsfiddle 上的示例：http: [//jsfiddle.net/antrgor_reiz/scVRS/](http://jsfiddle.net/antrgor_reiz/scVRS/)

我想要实现的是在 css 中定义一个 div - 它用于所有不同的 soundcloud 小部件 - 以及一些将循环遍历该 div 的每个实例并运行函数以重新定位 div 的 js。

这可能吗？？

多谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:40:13.530

您可以使用`.each()`循环任何 jQuery 对象，从任何选择器（有或没有类名）创建。

```
$("div").each(function() { ... });       // loop through all divs
$("div.test").each(function() { ... } ); // loop through all divs of class "test"
$(".test").each(function() { ... });     // loop through any elements of class "test" 
```

对于您的情况，这可以解决问题：

```
$(function() {    
    var docHeight = $(document).height(),
        docWidth = $(document).width();

    // process each div that is a child of "container"
    $("#container div").each(function() {

        // get the current div's dimensions
        var $div = $(this),
            divWidth = $div.width(),
            divHeight = $div.height(),
            heightMax = docHeight - divHeight,
            widthMax = docWidth - divWidth;

        // set the current div's position
        $div.css({
            left: Math.floor(Math.random() * widthMax),
            top: Math.floor(Math.random() * heightMax)
        });
    });
}); 
```

演示：http: [//jsfiddle.net/scVRS/62/](http://jsfiddle.net/scVRS/62/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:42:59.093

而不是编写`four`相同功能的不同功能，您可以使用`.each()`

```
$(document).ready(function() {
    $('object').each(function(){
        var $pDiv = $(this).parent('div');
        var docHeight = $(document).height(),
                docWidth = $(document).width(),
                $div = $pDiv,
                divWidth = $div.width(),
                divHeight = $div.height(),
                heightMax = docHeight - divHeight,
                widthMax = docWidth - divWidth;

         $div.css({
             left: Math.floor(Math.random() * widthMax),
             top: Math.floor(Math.random() * heightMax)
         });        

    })
}); 
```

​演示 **：http:** [//jsfiddle.net/muthkum/scVRS/59/](http://jsfiddle.net/muthkum/scVRS/59/)

# javascript - 满足条件时使选择不可点击

> ID：13395677
> 
> 赞同：1
> 
> 时间：2012-11-15T10:34:22.327
> 
> 标签：javascript, selection, option

在以下示例中，当您选择选项`id="chocolate-yes"`和/或`id="vanilla-yes"`时，该选项`id="icecreamcone-yes"`也将被选中：

```
<ul id="icecream" style="list-style:none;line-height:30px;">
  <li>
    <select id="icecreamcone">
      <option value="addicecreamcone">Would you like an ice cream cone?</option>
      <option id="icecreamcone-yes" value="yes">Yes</option>
      <option id="icecreamcone-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="vanilla">
      <option value="addvanilla">Would you like to add vanilla ice cream?</option>
      <option id="vanilla-yes" value="yes">Yes</option>
      <option id="vanilla-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="chocolate">
      <option value="addchocolate">Would you like to add chocolate ice cream?</option>
      <option id="chocolate-yes" value="yes">Yes</option>
      <option id="chocolate-no" value="no">No thanks</option>
    </select>
  </li>
  <li>
    <select id="sprinkles">
      <option value="addsprinkles">Would you like to add sprinkles on top?</option>
      <option id="sprinkles-yes" value="yes">Yes</option>
      <option id="sprinkles-no" value="no">No thanks</option>
    </select>
  </li>
</ul> 
```

```
<script type="text/javascript">
function observeFlavor(flavor, requires) {
    document.getElementById(flavor).onchange = function(){
      if(document.getElementById(flavor).options[1].selected == true) {
        document.getElementById(requires).options[1].selected = true
      }
    }
}

observeFlavor("chocolate","icecreamcone");
observeFlavor("vanilla","icecreamcone");
</script> 
```

结合上面的脚本，有没有人知道如何在选择 , 或两者时使不可`<select id="icecreamcone">`点击，但是当它们都被取消选择时，将再次可点击？`id="vanilla-yes"``id="chocolate-yes"``<select id="icecreamcone">`

**注意：不使用 disabled 属性。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:49:40.777

相信应该这样做：

```
<script type="text/javascript">
function observeFlavor(flavor, requires) {
    document.getElementById(flavor).onchange = function(){
      if(document.getElementById(flavor).options[1].selected == true) {
        document.getElementById(requires).options[1].selected = true;
        document.getElementById(requires).disabled = true;
      }
      else{           
        document.getElementById(requires).disabled = false;
      }
    }
}

document.getElementById("your-submit-button").onclick = function () {    
    document.getElementById("icecreamcone").disabled = false;
}

observeFlavor("chocolate","icecreamcone");
observeFlavor("vanilla","icecreamcone");
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:36:30.297

您可以利用[Select Disabled 属性](http://www.w3schools.com/tags/att_select_disabled.asp)

# sql - 使用 to_clob 后字符串连接的结果太长

> ID：13395678
> 
> 赞同：3
> 
> 时间：2012-11-15T10:34:26.853
> 
> 标签：sql, oracle11g

我正在尝试通过运行下面的 sql 创建一个表视图

```
 SELECT   IACM1.CMNT_REAS_TYP,
           TO_CLOB(LPAD (
                      LISTAGG (IACM1.CMNT_TXT, ' ')
                         WITHIN GROUP (ORDER BY IACM1.LN_NUM),
                      4000,
                      LISTAGG (IACM1.CMNT_TXT, ' ')
                         WITHIN GROUP (ORDER BY IACM1.LN_NUM)
                   ))
    FROM   FT_T_IACM IACM1, FT_T_IACM IACM2
   WHERE   IACM1.ISSACT_ID = IACM2.ISSACT_ID
           AND IACM1.CMNT_REAS_TYP = IACM2.CMNT_REAS_TYP
GROUP BY   IACM1.cmnt_reas_typ; 
```

但我得到`error`以下

> ORA-01489: 字符串连接的结果太长 01489\. 00000 - “字符串连接的结果太长” *原因：字符串连接的结果超过了最大大小。*行动：确保结果小于最大大小。

我查了一下，发现了使用 to_clob 的建议，但它仍然抛出这个错误。我正在使用 oracle 11g。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:27:20.570

LISTAGG 中的最长串联字符串可以是 4000 个字符。在此查询中，一个或多个 CMNT_REAS_TYP 值的 CMNT_TXT 长度总和似乎超过 4000。LISTAGG 在 LPAD 将其截断为 4000 个字符之前构建字符串 - 因此 LPAD 在这种情况下无效。此外，TO_CLOB 没有影响，因为 LISTAGG 在其他任何事情发生之前就转到了 varchar2。

解决此问题的一种方法是尽可能在您的 Group By 中添加其他字段。如果这不是一个选项，您可以尝试使用 COLLECT 而不是 LISTAGG - 在获取数据类型匹配时会遇到更多问题，但这是可行的。

这是一个链接，其中包含 LISTAGG 和 COLLECT 之间的一些比较以及如何使用 COLLECT：[http ://www.oracle-developer.net/display.php?id=515](http://www.oracle-developer.net/display.php?id=515)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T10:57:55.663

无需创建自定义函数。Oracle 已经提供了 xmlagg 函数来做到这一点。

您只需要通过 GetClobVal 将输出转换为 clob，还需要 rtrim，因为它将在结果末尾返回分隔符。

```
SELECT RTRIM(XMLAGG(XMLELEMENT(E,colname,',').EXTRACT('//text()') ORDER BY colname).GetClobVal(),',') from tablename; 
```

# sql - 内部连接没有按预期工作

> ID：13395680
> 
> 赞同：0
> 
> 时间：2012-11-15T10:34:43.480
> 
> 标签：sql, sql-server-2005

我正在尝试打开另一个表并在其中获取一些值`inner join`

问题是我有很多错误并且它无法运行。我想我的语法有问题。这里我的代码是：

```
INNER JOIN (SELECT (min(TA_Timestamp)as timestampmin,ta_wp_id as ta_wp_id) as test 
ON test.ta_wp_id = p17.PA_WP_ID
FROM ta_tasks WHERE test.ta_wp_id = p17.pa_wp_id) 
```

我试图获得结果的表被命名为`ta_tasks`它包含一个名为`ta_wp_id`. 另一个表被命名`parameters`，它包含一个名为的行`pa_wp_id`

我需要的是`min(TA_Timestamp)`从`ta_tasks`何时开始`ta_wp_id`=`pa_wp_id`

有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:38:57.677

看起来您缺少 a`GROUP BY`并且您的语法有点偏离。尝试这个：

```
SELECT
    p1.pa_value as SDay,
    p2.pa_value as SMonth,
    p3.pa_value as SYear,
    p4.pa_value as EDay,
    p5.pa_value as EMonth,
    p6.pa_value as EYear,
    SUBSTRING(p7.PA_NAME,11, len(p7.PA_NAME)) as _index_,
    p8.pa_value as _status_,
    p9.pa_value as approved_CHECK_status,
    p10.pa_value as expense_type_CHECK,
    p11.pa_value as congress_name,
    p12.pa_value as _Initiator_,
    p13.pa_value as planned_budget,
    p14.pa_value as actual_budget,
    p15.pa_value as congressNumHCP,
    p16.pa_value as congressNumMSD,
    p17.pa_value as RequestNumber,
    test.timestampmin    

FROM WP_WorkflowProcess p
LEFT JOIN PA_Parameter p1 on p1.PA_WP_ID=p.wp_id AND p1.PA_NAME = 'Event_Day_From'
LEFT JOIN PA_Parameter p2 on p2.PA_WP_ID=p.wp_id AND p2.PA_NAME = 'Event_Month_From'
LEFT JOIN PA_Parameter p3 on p3.PA_WP_ID=p.wp_id AND p3.PA_NAME = 'Event_Year_From'
LEFT JOIN PA_Parameter p4 on p4.PA_WP_ID=p.wp_id AND p4.PA_NAME = 'Event_Day_To'
LEFT JOIN PA_Parameter p5 on p5.PA_WP_ID=p.wp_id AND p5.PA_NAME = 'Event_Month_To'
LEFT JOIN PA_Parameter p6 on p6.PA_WP_ID=p.wp_id AND p6.PA_NAME = 'Event_Year_To'
LEFT JOIN PA_Parameter p7 on p7.PA_WP_ID=p.wp_ID
    AND ((p7.PA_NAME like 'reqExpense_' AND CAST( p7.PA_wp_id as varchar(15) ) like CAST( p.wp_id as varchar(5) ) COLLATE DATABASE_DEFAULT ) 
    OR (p7.PA_NAME like 'reqExpense__' AND CAST( p7.PA_wp_id as varchar(15) ) like CAST( p.wp_id as varchar(5) ) COLLATE DATABASE_DEFAULT) )
LEFT JOIN PA_Parameter p8 on p8.PA_WP_ID=p.wp_id AND p8.PA_NAME = 'EventStatus'
LEFT JOIN PA_Parameter p9 on p9.PA_WP_ID=p.wp_id AND p9.PA_NAME = 'MAapproval'
LEFT JOIN PA_Parameter p10 on p10.PA_WP_ID=p.wp_id AND p10.PA_NAME = 'reqExpense'+ SUBSTRING(p7.PA_NAME,11, len(p7.PA_NAME))
LEFT JOIN PA_Parameter p11 on p11.PA_WP_ID=p.wp_id AND p11.PA_NAME = 'EventNameReal'
LEFT JOIN PA_Parameter p12 on p12.PA_WP_ID=p.wp_id AND p12.PA_NAME = 'Requisitioner'
LEFT JOIN PA_Parameter p13 on p13.PA_WP_ID=p.wp_id AND p13.PA_NAME = 'Preliminary_BudgetText'
LEFT JOIN PA_Parameter p14 on p14.PA_WP_ID=p.wp_id AND p14.PA_NAME = 'Final_BudgetText'
LEFT JOIN PA_Parameter p15 on p15.PA_WP_ID=p.wp_id AND p15.PA_NAME = 'congressNumberHCP'+SUBSTRING(p7.PA_NAME,11, len(p7.PA_NAME))
LEFT JOIN PA_Parameter p16 on p16.PA_WP_ID=p.wp_id AND p16.PA_NAME = 'congressNumberMSD'+SUBSTRING(p7.PA_NAME,11, len(p7.PA_NAME))
LEFT JOIN PA_Parameter p17 on p17.PA_WP_ID=p.wp_id AND p17.PA_NAME = 'RequestNumber'
INNER JOIN
(
    SELECT min(TA_Timestamp) as timestampmin, ta_wp_id as ta_wp_id
    FROM ta_tasks
    GROUP BY ta_wp_id
) as test 
    ON test.ta_wp_id = p17.PA_WP_ID

WHERE p.wp_type='EventManagementNew' 
```

# maven - NetBeans - 如何在多模块 Maven 项目中设置默认启动 Maven 模块？

> ID：13395683
> 
> 赞同：3
> 
> 时间：2012-11-15T10:34:46.790
> 
> 标签：maven, netbeans-7

我正在寻找为多模块 maven 项目配置 Netbeans 工作区的方法，以便在按下 CTRL+F5（调试主项目）时始终启动某些模块。在 maven 项目中，此快捷方式始终启动其源文件当前正在打开的项目。这很烦人 - 要启动调试器，我总是必须从“主”模块切换到某个源文件，或者在项目资源管理器（巨大的子树）中找到该模块并右键单击 -> 调试（两者都是经常无用的浪费时间)

类似的问题是关于重新运行最后一个单元测试 - 我找不到捷径，但我看到自 2010 年 8 月以来相关的错误报告没有得到解决：http: //netbeans.org/bugzilla/show_bug.cgi?id= [189113](http://netbeans.org/bugzilla/show_bug.cgi?id=189113) .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T16:25:24.320

您必须在 nbactions.xml 中指定该操作，例如：

```
<action>
    <actionName>debug</actionName>
    <packagings>
        <packaging>jar</packaging>
    </packagings>
    <goals>  
        <goal>org.codehaus.mojo:exec-maven-plugin:1.2.1:exec</goal>
    </goals>
    <properties>
        <jpda.listen>maven</jpda.listen> 
        <exec.args>-classpath %classpath com.domain.package.Main start</exec.args>
        <exec.executable>java</exec.executable>
        <exec.workingdir>./content</exec.workingdir>
    </properties>
</action> 
```

所以它会在你的项目的一个模块中执行主文件。

如果要执行依赖项目的 Main java 文件，则必须包含以下插件条目：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId> 
            <executions>  
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/dependency-jars/</outputDirectory>
                    </configuration>
                </execution>
        </plugin> 
```

这将允许您的 Maven 项目在打包阶段将您需要的所有依赖项复制到目标。然后使用这个其他插件条目来使您需要访问的 Main 类：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <mainClass>com.domain.package.Main</mainClass>
                        <classpathPrefix>dependency-jars/</classpathPrefix>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

您可以更改依赖 jar 所在的文件夹，甚至可以将其设置为父 maven 项目的 pom.xml 中的属性。

# azure - 部署到天蓝色，角色在不同配置中的不同实例上拆分？

> ID：13395685
> 
> 赞同：1
> 
> 时间：2012-11-15T10:35:00.017
> 
> 标签：azure, azure-configuration

我们在 Azure 中有几个不同的角色。目前，这些都部署到单独的实例中，因此它们可以单独扩展（在生产中这是我们想要的），但是对于测试这似乎很浪费，我们希望能够将所有角色部署到单个实例以最小化成本。

我们可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:51:16.360

Roles are essentially definitions for what will run inside a set of Windows Azure VM instances. By definition, they have their own instances, so they cannot be targeted toward a single set of instances.

That said: there's nothing stopping you from combining code from different roles into one single role. You'd need to make sure your `OnStart()` and `Run()` take care of all needed tasks, as well as combining startup script items.

The upside (which you already surmised): cost savings, especially when running at low volume (where the entire app might be able to run in two instances, vs. several more near-idle instances split up by role).

One potential downside: Everything combined into a single role will now scale together. This may or may not be an issue for you.

Also, think about sizing. Let's say your website is perfectly happy in a Small, yet some background task you have requires XL (maybe it's a renderer needing 10GB RAM or something). And let's say you always run 2 instances of your website, for SLA purposes. Now, even at very low volume, your app consists of two XL instances instead of 2 Small (web) and one XL (background). Now, your near-idle system could cost more as one combined role than as separate roles. *This might not apply to you - just giving an example where it might not make sense to combine...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T13:52:16.360

在 David 的精彩解释的基础上，添加东西并通过 OnStart 或 Run 覆盖将它们粘合起来会起作用，但你真的正确地测试了吗？配置值合并在一起，内存使用、并发性等潜在问题。您不会在部署到生产环境时测试相同的产品。

更好的方法是将超小型实例部署到您的 QA 环境中。它们的成本只是中型或大型服务器价格的一小部分，并提供有意义的测试平台。

# javascript - AngularJS 服务在单独的文件中

> ID：13395686
> 
> 赞同：8
> 
> 时间：2012-11-15T10:35:03.750
> 
> 标签：javascript, model-view-controller, angularjs, project-structure

我的 app.js 包含

```
var app = angular.module('myApp', []).
config(['$routeProvider', function ($routeProvider, $http) {
    ...
}]); 
```

服务看起来像

```
app.service('MyService', function () {
    addNums = function (text) {
        return text + "123";
    }
}); 
```

在控制器中我有

```
function adminCtrl ($scope, MyService) {
    $scope.txt = MyService.addNums("abc");
}; 
```

它们都在单独的文件中。问题是我遇到了一个错误 `Unknown provider: MyServiceProvider <- MyService`

看起来我做错了什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T21:33:35.307

如果您忘记告诉 Angular 加载您的 myApp 模块，可能会发生提供程序错误。例如，你的 index.html 文件中有这个吗？：

```
<html ng-app="myApp"> 
```

您的服务缺少“this.”：

```
this.addNums = function(text) { 
```

[小提琴](http://jsfiddle.net/mrajcok/V3EvS/)。

* * *

关于何时使用 service() 和 factory()，以及如何正确编码，Angular 社区似乎存在很多困惑。所以，这是我的简短教程：

[service() 方法](http://docs.angularjs.org/api/angular.Module#service)需要一个[JavaScript 构造函数](http://www.javascriptkit.com/javatutors/oopjs2.shtml)。许多使用 service() 的 Angular 代码示例包含不是构造函数的代码。通常，它们返回一个对象，这违背了使用 service() 的目的——下面将详细介绍。如果需要创建和返回对象，则可以使用 factory() 代替。通常，只需要一个构造函数，并且可以使用 service()。

以下引用来自不同的 AngularJS Google Group 帖子：

> 使用 factory() 与 service() 的主要区别在于 factory() 必须返回一个对象，而 service() 不返回任何内容，但它必须是对象构造函数。
> 
> 如果您提供的函数构建了您想要的对象，请使用 factory()。即，Angular 本质上会执行
> obj = myFactory()
> 来获取 obj。如果您提供的函数是您想要的对象的构造函数，请使用 service()。即，Angular 本质上会执行
> obj = new myService()
> 来获取/实例化 obj。

因此，当人们使用 service() 并且它的代码“返回”是一个对象时，由于 JavaScript“new”的工作方式，这有点浪费：“new”将首先创建一个全新的 JavaScript 对象（然后使用原型做一些事情, 然后调用由 myService() 定义的函数，等等——细节我们在这里并不真正关心)，但是因为由 myService() 定义的函数返回它自己的对象，“new”做了一些奇怪的事情：它丢弃对象只是花时间创建并返回 myService() 函数创建的对象，因此是“浪费”。

> 引入 service() 的原因之一是为了便于使用“经典”OO 技术，例如将您的服务定义为咖啡脚本类。

此外，未记录的服务命名约定似乎是首字母小写的 camelCase：例如 myService。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:02:44.243

您需要在 app.service 回调中返回 addNums。

```
app.service('MyService', function () {
  addNums = function (text) {
    return text + "123";
  }
  return addNums;
}); 
```

现在，每当您使用 MyService 时，Angular 都会将 addNums 函数返回给您以供使用。

因此，您应该像这样在控制器中使用它（注意没有 addNums 调用）：

```
function adminCtrl ($scope, MyService) {
  $scope.txt = MyService("abc");
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T17:32:55.003

就像对布赖恩的回答的补充说明一样，如果您仍然希望代码调用 MyService.addNums 您可以使用以下内容：

```
app.service('MyService', function() {
    var result = {};
    result.addNums = function (text) {
        return text + "123";
    };

    return result;
}); 
```

然后你仍然可以使用

```
MyService.addNums("abc"); 
```

如果你想这样做。

# dom - 注入内容脚本不起作用的 div

> ID：13395688
> 
> 赞同：0
> 
> 时间：2012-11-15T10:35:23.153
> 
> 标签：dom, google-chrome-extension, content-script

我被看似非常简单的东西所困扰。我试图在用户访问的每个页面中注入我自己的 div，在 google chrome 扩展中。我查看了网络上的示例，但似乎没有什么对我有用：s

这是我的 manifest.json

```
{
"name": "My extension",
"version": "1.0",
"permissions": [
    "http://*/*", "tabs", "https://*/*"
],
"browser_action": {
    "default_title": "My extension",
    "default_icon": "icon.png"
},
"manifest_version": 2,
"content_scripts": [
  {
    "matches": ["http://*/*", "https://*/*"],
    "js": ["test.js"],
    "run_at": "document_end",
    "all_frames": true
  }
]
} 
```

还有我的 test.js

```
var newdiv = document.createElement('div'); 
newdiv.setAttribute('id','this_is_my_own_div');
document.body.appendChild(newdiv); 
```

但我在源代码中一无所获……我的 div 没有创建。如何检查我的 test.js 是否正在运行？我不明白为什么它与其他人合作而不是与我合作：s 任何帮助感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:44:36.523

它工作尝试：

```
"browser_action": { "default_title": "My extension", "default_icon": "icon.png" }, 
```

代替：

```
"browser_action": { "name": "My extension", "icons": ["icon.png"] }, 
```

# java - 多维数组（列）的用户输入

> ID：13395694
> 
> 赞同：0
> 
> 时间：2012-11-15T10:35:48.393
> 
> 标签：java, arrays, multidimensional-array

我有一个数组：

```
 [ 0  0
   1  0
   2  0
   3  0
   4  0
   5  0 ] 
```

如何指定用户输入（使用扫描仪）将在阵列中的位置？我想在第二列的每个位置添加一个整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:38:43.537

对于 an `array of array`，要获取行数，请使用数组的长度。

例如，对于这个数组： -

```
int[][] arr = new int[3][4]; 
```

`arr.length`为您提供数组中的行数，即`3`. 因此，从 , 运行一个循环`0 to arr.length`来访问每一行。

现在，要访问`2nd column`每一行，您可以`arr[i][1]`在循环中执行以下操作： -

```
for (int i = 0; i < arr.length; i++) {
    arr[i][1] = ...;  // your 2nd column for each row
} 
```

此外，要让用户输入来填充`2nd column`每一行，您必须读取每一行的输入。因此，您可以猜测您需要在哪里读取用户输入 - In`outer loop`或 in `inner loop`？

# asp.net - 如何防止在单击列表视图中的按钮时回发

> ID：13395695
> 
> 赞同：0
> 
> 时间：2012-11-15T10:35:49.067
> 
> 标签：asp.net, listview

我有一个列表视图。我想防止在单击编辑、更新和删除时一次又一次地加载页面。当我单击编辑以编辑行时，页面执行回发。所以我需要做什么才能不执行回发。

```
My code is

     <script type="text/javascript">
    $(document).ready(function() {
    $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: "TestOrigin.aspx/BindDatatable",
    data: "{}",
    dataType: "json"

    });
    });
    </script>
    <script type="text/javascript">

    function javascriptfunction()
    {
    return false;
    }
    </script>

<asp:ListView ID="lstOrigin" 
                        runat="server"  

  ItemPlaceholderID="PlaceHolder1" OnItemEditing="EditListViewItem" 
        OnItemCanceling="CancelListViewItem"
         OnItemUpdating="UpdateListViewItem" 
         OnItemInserting="InsertListViewItem"
        InsertItemPosition="LastItem" OnItemDeleting="DeleteListViewItem" 
DataKeyNames="ID" >

        <LayoutTemplate>
            <table width="100%" cellpadding="4" cellspacing="0">
                <tr class="header">
                   <th >
                        <asp:LinkButton ID="lnkID" runat="server" CommandName="Sort" 
CommandArgument="ID" Text="ID"   />
                    </th>
                    <th >
                        <asp:LinkButton ID="lnkaddress" runat="server"   
 CommandName="Sort" CommandArgument="Address" Text="Address"  />
                    </th>
                    <th >
                        <asp:LinkButton ID="lnkpin" runat="server" CommandName="Sort"  

CommandArgument="Pin" Text="Pin" />
                    </th>
                    <th >
                        <asp:LinkButton ID="lnkcity" runat="server" CommandName="Sort"  
CommandArgument="City" Text="City"  />
                    </th>
                    <th>
                    <asp:LinkButton ID="lnkstate" runat="server" CommandName="Sort" 
CommandArgument="State" Text="State" />
                    </th>
                    <th>
                    <asp:LinkButton ID="lnkcountry" runat="server" CommandName="Sort"   

 CommandArgument="Country" Text="Country"  />
                    </th>
                    <th>
                    <asp:LinkButton ID="lnkport" runat="server" CommandName="Sort" 
 CommandArgument="Port" Text="Port" />
                    </th>
                    <th>
                    <asp:LinkButton ID="lnkoutsource" runat="server" CommandName="Sort" 

CommandArgument="Outsourcing" Text="Outsourcing" />
                    </th>
                    <th>
                        Modify
                    </th>
                </tr>
                <asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>
            </table>
        </LayoutTemplate>
        <ItemTemplate>
            <tr class="item">
            <td>
            <%# Eval("ID") %>
            </td>
                <td>
                    <%# Eval("Address") %>
                </td>
                <td>
                    <%# Eval("Pin") %>
                </td>
                <td>
                    <%# Eval("City") %>
                </td>
                <td>
                    <%# Eval("State") %>
                </td>
                <td>
                    <%# Eval("Country") %>
                </td>
                <td>
                    <%# Eval("Port") %>
                </td>
                <td>
                    <%# Eval("Outsourcing") %>
                </td>
                <td>
                    <asp:Button ID="lnkEdit" runat="server" Text="Edit"    
PostBackUrl="~/TestOrigin.aspx" CommandName="Edit" OnClientClick="javascriptfunction"/>

                        <asp:Button ID="lnkDelete" runat="server" Text="Delete" 
CommandName="Delete" ForeColor="Brown" OnClientClick="javascriptfunction"/>
                    </span>
                </td>
            </tr>
        </ItemTemplate>
        <AlternatingItemTemplate>
            <tr>
            <td>
             <%# Eval("ID") %>
            </td>
               <td>
                    <%# Eval("Address") %>
                </td>
                <td>
                    <%# Eval("Pin") %>
                </td>
                <td>
                    <%# Eval("City") %>
                </td>
                <td>
                    <%# Eval("State") %>
                </td>
                <td>
                    <%# Eval("Country") %>
                </td>
                <td>
                    <%# Eval("Port") %>
                </td>
                <td>
                    <%# Eval("Outsourcing") %>
                </td>
                <td>
                    <asp:Button ID="lnkEdit" runat="server" Text="Edit" 
CommandName="Edit" OnClientClick="javascriptfunction" />

                        <asp:Button ID="lnkDelete" runat="server" Text="Delete" 
CommandName="Delete" ForeColor="Brown"  OnClientClick="javascriptfunction"/>
                    </span>
                </td>
            </tr>
        </AlternatingItemTemplate>
        <EditItemTemplate>
            <tr class="edititem">

            <td>

                    <asp:TextBox ID="txtID" runat="server" Text='<%# Eval("ID") %>' />
                </td>
                <td>

                    <asp:TextBox ID="txtAddress" runat="server" Text='<%# 
Eval("Address") %>' />
                </td>
                <td>

                    <asp:TextBox ID="txtPin" runat="server" Text='<%# Eval("Pin") %>'   
/>
                </td>
                <td>
                    <asp:TextBox ID="txtCity" runat="server" Text='<%# Eval("City") %>'  
 />
                </td>
                <td>
                    <asp:TextBox ID="txtState" runat="server" Text='<%# Eval("State")   
%>' />
                </td>
                <td>
                    <asp:TextBox ID="txtCountry" runat="server" Text='<%# 
Eval("Country") %>' />
                </td>
                <td>
                    <asp:TextBox ID="txtPort" runat="server" Text='<%# Eval("Port") %>'   
/>
                </td>
                <td>
                    <asp:TextBox ID="txtOutsource" runat="server" Text='<%# 
Eval("Outsourcing") %>' />
                </td>
                <td>

                        <asp:Button ID="btnUpdate" runat="server" Text="Update" 
CommandName="Update" OnClientClick=" javascriptfunction" />

                    <asp:Button ID="btnCancel" runat="server"  Text="Cancel"  
CommandName="Cancel" OnClientClick="  javascriptfunction" />
                </td>
            </tr>
        </EditItemTemplate>

        </EmptyDataTemplate>
    </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:43:05.927

将 return 放在你的函数之前

```
OnClientClick="return javascriptfunction()" 
```

最后在java-script函数中写

```
return false; 
```

# java - 作为静态或原型的 Java 实用方法

> ID：13395697
> 
> 赞同：1
> 
> 时间：2012-11-15T10:35:53.870
> 
> 标签：java, spring, concurrency

将实用程序方法设为静态或在原型范围内设为非静态更有意义吗？

IE

```
public static void setPdfVariables(String pdfFileName, boolean isDebugEnabled, ModelAndView modelAndView){
    modelAndView.addObject(PDF_FILE_NAME_KEY, pdfFileName);
    modelAndView.addObject(IS_DEBUG_ENABLED_KEY, isDebugEnabled);
} 
```

或具有原型范围

```
public void setPdfVariables(String pdfFileName, boolean isDebugEnabled, ModelAndView modelAndView){
    modelAndView.addObject(PDF_FILE_NAME_KEY, pdfFileName);
    modelAndView.addObject(IS_DEBUG_ENABLED_KEY, isDebugEnabled);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:39:19.150

看到您只修改传递给此方法的参数`public static void`似乎很好。

# javascript - 使用 attr 函数替换属性

> ID：13395698
> 
> 赞同：-1
> 
> 时间：2012-11-15T10:35:56.490
> 
> 标签：javascript, jquery, html, css

```
 <div>
     <a id="_a-link" href=""><img src="/local/img/image1.png" alt=""/></a>
 </div> 
```

对于该图像链接，我尝试使用以下 jquery 代码将其图像源属性更改为

```
 <div>
     <a id="_a-link" href=""><img src="/local/img/image2.png" alt=""/></a>
 </div>

$('#_a-link img').attr('src','');
$('#_a-link img').attr('src','/local/img/image2.png'); 
```

但是显示的图像毕竟还是一样的；它是 image1.png 不是 image2.png；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T10:37:12.133

你有一个错字：

```
$('#_a-link img').attr('src','');
$('#_a-link img').attr({'src':'/local/img/image2.png', 'alt': ''}); 
```

你也做错了选择器。AFAIK，“#ID TAGNAME”选择器工作时间很长。他们将获得所有的 img，然后将每个人上楼 DOM 以找到一些具有 ID 的节点。您最好为所需的图像添加一些类，或者如果它预计是一次性使用的图像 id。

所以最好的优化方式是：

```
<a whatever here><img src="#" class="imgClass" /></a>
$(".imgClass"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:27:08.607

**Try This:**

```
$('#_a-link img').attr("src").replace("/local/img/image1.png", "/local/img/image2.png"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:38:12.647

您发布的代码使用`scr`；它应该是`src`：

```
 <div><a id="_a-link" href=""><img src="/local/img/image2.png" alt=""/></a>
 </div>

$('#_a-link img').attr('src','/local/img/image2.png'); 
```

您不需要先将其清空，并且`alt`应该是单独的调用（如果您也需要更改它）。

编辑（基于以下评论）：

这是一个使用此代码的 jsFiddle：http: [//jsfiddle.net/h4tf6/](http://jsfiddle.net/h4tf6/)

如您所见，它工作得很好。如果您遇到问题，则代码中的其他地方很可能存在错误。

# android - 将位图设置为墙纸

> ID：13395699
> 
> 赞同：1
> 
> 时间：2012-11-15T10:35:58.550
> 
> 标签：android, android-asynctask, wallpaper, bitmapfactory

我想显示来自 URL 的图像，然后在单击按钮时将显示的图像设置为手机上的墙纸。当前它正在显示图像，但是当按下按钮保存它时没有任何反应。这是我正在使用的代码..请找出我做错了什么..提前谢谢

```
set = (Button) findViewById(R.id.abcd);

new DownloadImageTask((ImageView) findViewById(R.id.imageView1)).execute("http://java.sogeti.nl/JavaBlog/wp-content/uploads/2009/04/android_icon_256.png");

set.setOnClickListener(new View.OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        Thread th = new Thread(){
            public void run(){
            WallpaperManager image = WallpaperManager.getInstance(getApplicationContext());
            try{
                image.setBitmap(photo);
            }
            catch(Exception ex)
            {
                ex.printStackTrace();
            }
            }
        };
        th.start();
    }

});

}

private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap photo = null;
        try {
InputStream in = new java.net.URL(urldisplay).openStream();
babes = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
Log.e("Error", e.getMessage());
e.printStackTrace();
        }
        return photo;
    }

    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T10:43:19.530

您是否添加了此权限？

```
<uses-permission android:name="android.permission.SET_WALLPAPER" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:47:45.407

这是一个例子

```
 private class InitialTask extends AsyncTask<String, Void, Void> {

    private final ProgressDialog dialog = new ProgressDialog(
            ImageActivity.this);

    // can use UI thread here
    protected void onPreExecute() {
        this.dialog.setMessage("Loading...");
        this.dialog.show();

    }

    // automatically done on worker thread (separate from UI thread)
    protected Void doInBackground(final String... a) {

        try {
            Thread.sleep(100);
            try {
                int newpos = position;

                /*
                 * ImageId=Id[newpos];
                 * ImageID=Integer.parseInt(ImageId.toString()); saveimg=
                 * img[newpos];
                 */
                String url1 = imageUrls[newpos];
                // imageView.setImageBitmap(BitmapFactory.decodeResource(getResources(),
                // ids[position]));
                try {
                    URL ulrn = new URL(url1);
                    HttpURLConnection con = (HttpURLConnection) ulrn
                            .openConnection();
                    InputStream is = con.getInputStream();
                    bmp = BitmapFactory.decodeStream(is);

                    int widthPx = getWindowManager().getDefaultDisplay()
                            .getWidth();
                    int heightPx = getWindowManager().getDefaultDisplay()
                            .getHeight();
                    bmp = Bitmap.createScaledBitmap(bmp, widthPx, heightPx,
                            true);

                } catch (Exception ex) {

                }
            } catch (Exception e) {
                int i = 0;
            }
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    // can use UI thread here
    protected void onPostExecute(final Void unused) {

        if (null != bmp) {
            imageView = new ImageView(cxt);
            imageView.setImageBitmap(bmp);
            BitmapDrawable drawable = (BitmapDrawable) imageView
                    .getDrawable();
            Bitmap bitmap = drawable.getBitmap();
            try {
                WallpaperManager myWallpaperManager = WallpaperManager
                        .getInstance(getApplicationContext());
                myWallpaperManager.setBitmap(bitmap);
                Toast.makeText(ImagePagerActivity.this, "Wallpaper set",
                        Toast.LENGTH_SHORT).show();
            } catch (Exception e) {
                Toast.makeText(ImagePagerActivity.this,
                        "Error setting Wallpaper", Toast.LENGTH_SHORT)
                        .show();
            }

        }

        if (this.dialog.isShowing()) {
            this.dialog.dismiss();

        }

    }

} 
```

# php - PHP 远程 MSSQL 连接

> ID：13395700
> 
> 赞同：0
> 
> 时间：2012-11-15T10:36:10.140
> 
> 标签：php, sql-server, remote-server

我正在尝试为我的公司开发一个解决方案，我的目标是将我们的 Web 服务器（在 php 上并且已经有一个网站已经在上面运行）连接到我们的 CRM 数据库（在 mssql 上并基于另一台服务器）。由于安全问题，我的第一个解决方案是在 Web 服务器中拥有此 CRM 数据库的副本，并每天或每小时对其进行同步。但是现在我正在考虑建立直接连接，你认为这是否可能，如果可能的话，我可能会遇到什么安全问题。有没有人有这种问题的经验？

谢谢

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T03:18:05.807

不鼓励每天进行同步，因为您将失去实时数据的可靠性。

如果您使用的是 PHP 5.1 版本，它仍然支持通过 php_mssql.dll 连接 php-mssql，只要确保在您的 PHP.ini 上启用它即可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T10:15:59.120

```
<?php  
$serverName = "ServerName"; /// use remote server name here
$uid = "sqlusername";   
$pwd = "sqlpassword";  
$databaseName = "DBName"; 

$connectionInfo = array( "UID"=>$uid,                            
                         "PWD"=>$pwd,                            
                         "Database"=>$databaseName); 

/* Connect using SQL Server Authentication. */  
$conn = sqlsrv_connect( $serverName, $connectionInfo);  

$tsql = "SELECT id, FirstName, LastName, Email FROM tblContact";  

/* Execute the query. */  

$stmt = sqlsrv_query( $conn, $tsql);  

if ( $stmt )  
{  
     echo "Statement executed.<br>\n";  
}   
else   
{  
     echo "Error in statement execution.\n";  
     die( print_r( sqlsrv_errors(), true));  
}  

/* Iterate through the result set printing a row of data upon each iteration.*/  

while( $row = sqlsrv_fetch_array( $stmt, SQLSRV_FETCH_NUMERIC))  
{  
     echo "Col1: ".$row[0]."\n";  
     echo "Col2: ".$row[1]."\n";  
     echo "Col3: ".$row[2]."<br>\n";  
     echo "-----------------<br>\n";  
}  

/* Free statement and connection resources. */  
sqlsrv_free_stmt( $stmt);  
sqlsrv_close( $conn);  
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:49:49.327

连接到远程数据库会很慢，但至少你的数据会是一致的。如果速度不是一切，我建议使用这种方法。迁移数据可能很痛苦。

您可能希望在服务器之间创建安全 (SSL) 连接。有关详细信息，请咨询您的系统管理员。

# java - 如何使用画布显示所有尺寸的图像

> ID：13395706
> 
> 赞同：0
> 
> 时间：2012-11-15T10:36:34.150
> 
> 标签：java, android, android-layout

我正在做的应用程序在画布中显示一个图像。它在一台设备上运行良好，但是如果我在另一台设备上运行相同的应用程序，则图像无法正确显示，因为在此`onDraw`我没有提及*imageview 的*宽度或高度，所以任何人都可以建议我如何给它设置宽度和高度侧面方法中的*图像视图。*`onDraw`

我的代码是：

```
@Override
public void onDraw(Canvas canvas) {
    Paint painto = new Paint();
    painto.setAntiAlias(true);
    painto.setColor(getResources().getColor(R.color.magnata));
    painto.setStrokeWidth(3);
    painto.setStyle(Paint.Style.FILL);
    Paint paint = new Paint();
    int leftx2 = (int) (10 * (screenWidth / 1024));
    int topy1 = (int) (10 * (screenHeight / 600));

    Bitmap kangoo = BitmapFactory.decodeResource(getResources(),
            R.drawable.kangoo);
    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(kangoo, leftx2, topy1, painto);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:43:36.847

您可以使用 onSizeChange() 设置宽度和高度。这可以为您提供不断变化的宽度和高度

```
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        // TODO Auto-generated method stub
        super.onSizeChanged(w, h, oldw, oldh);
         newwidth=w;
                 newheight=h;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:59:52.223

像这样试试

```
@Override  
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            // TODO Auto-generated method stub
            super.onSizeChanged(w, h, oldw, oldh);
             newwidth=w;
                     newheight=h;
        }
@Override
    public void onDraw(Canvas canvas) {
        Paint painto = new Paint();
        painto.setAntiAlias(true);
        painto.setColor(getResources().getColor(R.color.magnata));
        painto.setStrokeWidth(3);
        painto.setStyle(Paint.Style.FILL);
        Paint paint = new Paint();
        int leftx2 = (int) (10 * (newwidth / 1024));
        int topy1 = (int) (10 * (newheight / 600));

        Bitmap kangoo = BitmapFactory.decodeResource(getResources(),
                R.drawable.kangoo);
        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(kangoo, leftx2, topy1, painto);
    } 
```

# jquery - 在模板添加到 DOM 之前在模板中应用 JQuery-UI 日期选择器

> ID：13395710
> 
> 赞同：0
> 
> 时间：2012-11-15T10:36:56.057
> 
> 标签：jquery, jquery-ui, templates, backbone.js, jquery-ui-datepicker

我正在尝试在模板中应用一个日期选择器，然后将该模板添加到 DOM。我可以通过首先将模板添加到 DOM（使用 $.each）来做到这一点，但我现在正在分离职责（使用 Backbone），我需要按此顺序完成。我尝试在我的模板上下文中使用 replaceWith ：

```
$("input[type=date]", template).replaceWith(function() {
    $(this).datepicker({dateFormat : "yy-mm-dd"});
    return this.outerHTML;
});
return Mustache.render(template, this.model.toJson); 
```

但是模板没有更新，并且 replaceWith 只返回一个包含我更新的输入的数组。我觉得答案并不遥远，但我被困在这里。我可以在应用日期选择器之前或之后使用 Mustache 渲染模板，这不是问题。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:31:00.750

`Mustache.render`将根据模板`template`和数据返回一些 HTML `this.model.toJson`（应该是`this.model.toJSON()`，不是吗？）。所有的 jQuery UI 内容和 jQuery 事件都绑定到 DOM 元素，而不是 HTML 文本，所以无论绑定到什么`template`，都不会通过 Mustache 保留下来。

您需要将所有内容*绑定*到`Mustache.render`. 更像这样的东西：

```
render: function() {
    var template = ...
    var html = Mustache.render(template, this.model.toJSON());
    this.$el.append(html);
    this.$('input[type=date]').datepicker({dateFormat: 'yy-mm-dd'});
    return this;
} 
```

然后无论叫什么`render`都会`$something.append(v.render().el)`。

# javascript - 套接字连接只工作一次

> ID：13395711
> 
> 赞同：3
> 
> 时间：2012-11-15T10:37:03.277
> 
> 标签：javascript, sockets, firefox-addon

我有一个用java编写的服务器监听本地主机中的一个端口。我正在尝试通过 Firefox 扩展连接到它。我可以发送请求并接收响应，但只能发送一次。然后，我不知道它为什么停止工作：我什至无法发送响应。

我认为流在某个时候会关闭，但我不知道为什么，因为我将`pump`界面中的参数设置为在完成后不关闭流...

这是我的代码：

```
const {components} = require("chrome");
const {NetUtil} = components.utils.import("resource://gre/modules/NetUtil.jsm");

var transport = null;
var outstream = null, instream = null;
var instream = components.classes["@mozilla.org/scriptableinputstream;1"]
        .createInstance(components.interfaces.nsIScriptableInputStream);
var pump = components.classes["@mozilla.org/network/input-stream-pump;1"]
        .createInstance(components.interfaces.nsIInputStreamPump);
var dataListener = null;

exports.connect = function(server, port, callback) {
    transport = components.classes["@mozilla.org/network/socket-transport-service;1"]
                          .getService(components.interfaces.nsISocketTransportService)
                      .createTransport(["udp"], 0, server, port, null);                          
    outstream = transport.openOutputStream(0, 0, 0);
    stream = transport.openInputStream(0, 0, 0);

    // Initialize
    instream.init(stream);
    pump.init(stream, -1, -1, 0, 0, false);

    dataListener = {
        receivedData: [],

        onStartRequest: function(request, context) {
            console.log("Connected to server");
        },

        onStopRequest: function(request, context, status) {
            console.log("End of request");                     
        }, 

        onDataAvailable: function(request, context, inputStream, offset, count) {
            var data = instream.read(count).replace(/\n/gm,'');         
            callback(data);   
        }
    };
    pump.asyncRead(dataListener, null); 
}

exports.send = function(data) {
    // Send data
    var outData = data + '\n';
    outstream.write(outData, outData.length);
}

exports.close = function(data) {
    // Close stream
    outstream.close();
    stream.close();
} 
```

编辑：java服务器的代码

```
 public PluginConnection(int newPort) throws IOException {
    serverSocket = new ServerSocket(this.port);
}

public void send(String message) {
    if (this.clientSocket != null) {
        out.println(message);
    } else {
        System.err.println("ERROR: message could not be sent because "
                + "connection is not established.");
    }
}

public void open() {        
    try {
        clientSocket = serverSocket.accept();           
    } catch (IOException e) {
        System.err.println("ERROR: PIRServer could not open connection.");
        e.printStackTrace();
    }       
}

public String getRequest() {
    try {
        in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        out = new PrintWriter(clientSocket.getOutputStream(), true);
    } catch (IOException e) {
        System.err.println("ERROR: PIRServer could not open streams.");
        e.printStackTrace();
    }

    String query = null;
    try {
        query = in.readLine();
    } catch (IOException e) {
        System.err.println("ERROR: could not open parse query.");
        e.printStackTrace();
        out.println("-1");
    }
    return query;
}

public void close() {
    try {
        if (in != null) {
            in.close();             
        }           
        if (out != null) {
            out.close();                
        }           
        if (clientSocket != null) {
            clientSocket.close();
        }
        if (serverSocket != null) {
            serverSocket.close();
        }
    } catch (IOException e) {
    } catch (Exception e) { 
        e.printStackTrace();
        System.exit(-1);
    }
} 
```

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:27:13.837

这可能不是您正在寻找的答案，但我想我还是建议您这样做。

您可以考虑将 node.js 作为 Web 套接字服务器并在 Firefox 中使用 MozWebSocket，而不是使用 Java。它真的很好用。例如，在 Firefox 插件中：

```
if (typeof (MozWebSocket) != 'undefined') {
   mysocket = new MozWebSocket(SOCKET_URL);
} else if (typeof (WebSocket) != 'undefined') {
   mysocket = new WebSocket(SOCKET_URL);
} else {
   alert("Can't get socket");
}
if (mysocket === null) {
   alert("Can't get socket");
}

mysocket.onerror = function(event) {
/* error handling here */
};

mysocket.onopen = function() {
   mysocket.send(JSON.stringify(msg));
   mysocket.close();
} 
```

在服务器端，这就是 node.js 的全部内容：

```
var wss, http, server, wsServer, Client, fs, qs;

wss = require('node_modules/websocket/lib/WebSocketServer');
http = require('http');
fs = require('fs');
qs = require('querystring');

initializeServer();

wsServer.on('connect', function(connection) {
    console.log((new Date()) + " Connection accepted.");
    connection.on('message', function(message) {
        if (message && message.type === 'utf8') {
            var data = JSON.parse(message.utf8Data);
            /* parse data here */
        }
        else {
            console.log("Data is not utf8! Data = " + message);
        }
    });

    connection.on('close', function(connection) {
    console.log((new Date()) + " Client " + connection.remoteAddress + " disconnected.");
    });
});

function initializeServer() {
    server = http.createServer(function(request, response) {
    });
    server.listen(6969, function() {
        console.log((new Date()) + " Server is listening on port 6969");
    });

    wsServer = new wss({
        httpServer: server,
     maxReceivedMessageSize: 0x800000,
        autoAcceptConnections: true
    });
} 
```

# java - JSF Primefaces：如何从表单 2 中的对话框更新 selectOneMenu(in form1)？

> ID：13395717
> 
> 赞同：1
> 
> 时间：2012-11-15T10:37:37.827
> 
> 标签：java, jsf, primefaces

在form2中提交命令按钮后，我想更新form1中的selectOneMenu。它现在仅在刷新页面后可见。

我在表格 1 中有一个 selectOneMenu：

```
<h:form id="form1" rendered="#">

            <p:spacer height="30" />
            <h:selectOneMenu id="oneMenu" value="#{bean.value}">
                <f:selectItem itemLabel="Select Value" itemValue="" />
                <f:selectItems id="itemValues"
                    value="#{bean.allItems}" var="allItems"
                    itemValue="#{allItems}" itemLabel="#{allItems.name}" />
            </h:selectOneMenu> 
```

和 form2 中的 DialogBOX：

```
<h:form id="form2">
            <p:dialog header="Create new Item" widgetVar="newItem"
                resizable="false">

                <h:panelGrid columns="2" style="margin-bottom:10px">

                    <h:outputLabel for="item" value="Itemname:" />
                    <p:inputText id="itemname" value="#{bean.itemName}" />
                </h:panelGrid>

                <p:commandButton value="Submit"
                    actionListener="#{bean.newItem}"
                    update="form1:oneMenu" oncomplete="newItem.hide();"  />

            </p:dialog> 
```

我试过`update="form1:oneMenu"`了，但它不起作用。我也读过[这篇文章](https://stackoverflow.com/questions/5250370/jsf-and-primefaces-update-problem) ，但它也不起作用。

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:54:26.493

确保使用`update=":form1:myPanel"`.

例子 ：

```
<h:form id="form1">
    <h:selectOneMenu id="oneMenu" value="#{bean.value}">
    ...
    </h:selectOneMenu>
</h:form>

<h:form id="form2">
    <p:dialog ..>
        ...
        <p:commandButton value="Submit" update=":form1:oneMenu" ..../>
    </p:dialog>
</h:form> 
```

否则

```
<h:form id="form1">
    <p:selectOneMenu id="oneMenu" value="#{bean.value}">
    ...
    </p:selectOneMenu>
</h:form>

<h:form id="form2">
    <p:dialog ..>
        ...
        <p:commandButton value="Submit" update=":form1:oneMenu" ..../>
    </p:dialog>
</h:form> 
```

**更新评论**：试试下面。您可以使用`h:selectOneMenu`或`p:selectOneMenu`。

```
<h:form id="form1">
    <p:selectOneMenu style="width:195px;" required="true" id="cityMenu">
        <f:selectItems value="#{SelectOneMenuBean.cities}"/>
    </p:selectOneMenu>
    <p:commandButton oncomplete="newItem.show()" value="Show Dialog"/>
</h:form>
<h:form id="form2">
    <p:dialog header="Create new Item" widgetVar="newItem" resizable="false">
        <h:panelGrid columns="2" style="margin-bottom:10px">
            <h:outputLabel for="item" value="Itemname:" />
            <p:inputText id="itemname" value="#{SelectOneMenuBean.selectedValue}" />
        </h:panelGrid>

        <p:commandButton value="Submit" update=":form1:cityMenu" oncomplete="newItem.hide();"  />

    </p:dialog>     
</h:form>

public class SelectOneMenuBean {
    private String selectedValue;

    public String getSelectedValue() {
        return selectedValue;
    }

    public void setSelectedValue(String selectedValue) {
        this.selectedValue = selectedValue;
    }

    public String[] getCities() {
        if(selectedValue != null && selectedValue.equals("AAA")) {
            return new String[] {"City_1 of AAA", "City_2 of AAA", "City_3 of AAA"};
        } else if(selectedValue != null && selectedValue.equals("BBB")) {
            return new String[] {"City_1 of BBB", "City_2 of BBB", "City_3 of BBB"};
        } else if(selectedValue != null && selectedValue.equals("CCC")) {
            return new String[] {"City_1 of CCC", "City_2 of CCC", "City_3 of CCC"};
        } else if(selectedValue != null && selectedValue.equals("DDD")) {
            return new String[] {"City_1 of DDD", "City_2 of DDD", "City_3 of DDD"};
        } 
        return new String[] {"No City"};
    }
} 
```

**注意：**如果您在对话框中输入 value `AAA`、和`BBB`，的值将被更改。`CCC``DDD``selectedOneMenu`

# xcode - TableViewController Vs UIViewController 和里面的 tableView

> ID：13395719
> 
> 赞同：0
> 
> 时间：2012-11-15T10:37:45.120
> 
> 标签：xcode, uitableview, xcode4.3

我有一个主/详细信息应用程序。
默认情况下，我们将 MasterViewController 附加到 TableViewController，此外，我已将其附加到 Sqlite 数据库，并且所有数据都按应有的方式正确显示。所以我添加了一个 UISearchBar，以便搜索所有项目；
搜索功能工作正常，但唯一的错误是，向下滚动时搜索栏消失。
因此，作为一种解决方案，我删除了 TableViewController 并创建了一个简单的 UIVIewController 并添加了一个 TableView 、 TableViewCell 和一个搜索栏，以便按照许多人的建议将搜索栏固定在 View 的顶部。
现在这两个概念之间的区别在于，一旦应用程序加载，TableViewController（第一种情况）会在单元格中加载整个数据，而当 ViewController（第二种情况，带有 tableView、tableViewCell 和 searchBar）在启动时不加载任何内容时，当用户开始在 searchBar 中写一个单词时，它会加载不同的元素。我如何强制 tableView 在启动时加载所有元素，就像你有一个 TableViewCONtroller 一样？
这是我的代码：

```
//
//  MasterViewController.m

#import "MasterViewController.h"

#import "DetailViewController.h"
#import <sqlite3.h>
#import "Author.h"
@interface MasterViewController ()
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath;
@end

@implementation MasterViewController
NSString *authorNAme , *authorNAme2;

@synthesize tableView;
@synthesize searchWasActive;
@synthesize detailViewController = _detailViewController;
@synthesize fetchedResultsController = __fetchedResultsController;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize theauthors;
NSString *PathDB;

-(BOOL)canBecomeFirstResponder{

    return YES;

}
- (void)awakeFromNib
{
   // self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    [super awakeFromNib];
}

- (void)viewDidLoad

{ 
   // [self numberOfSectionsInTableView:tableView];

    //[self tableView:tableView willDisplayCell:[self.tableView dequeueReusableCellWithIdentifier:@"Cell"] forRowAtIndexPath:0]; 
    //[self.tableView 

    searchBar.delegate = (id)self;
   // [self.tableView reloadData];

   // [self configureCell:@"Cell" atIndexPath:0];
    [self authorList];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
    self.detailViewController = (DetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];
}

- (void)viewDidUnload
{

    [self setTableView:nil];
    tableView = nil;
    searchBar = nil;
    [self setSearchWasActive:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)insertNewObject:(id)sender
{
    NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
    NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
    NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

    // If appropriate, configure the new managed object.
    // Normally you should use accessor methods, but using KVC here avoids the need to add a custom class to the template.
    [newManagedObject setValue:[NSDate date] forKey:@"timeStamp"];

    // Save the context.
    NSError *error = nil;
    if (![context save:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar {
    //[self authorList];
    // [filteredTableData release];

    //[self.tableView reloadData];
    NSLog(@"Cancel Button Clicked");

    // Scroll to top
    [self.tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:YES];
    self.searchDisplayController.searchBar.text =@" ";
}

- (void) searchBarTextDidBeginEditing:(UISearchBar *)sender
{

    [self.tableView reloadData];
    searchBar.showsCancelButton=NO;

}

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{ 
    searchBar.showsCancelButton=NO;
    if(text.length == 0)
    {
        isFiltered = FALSE;

    }
    else
    {
        isFiltered = true;
        filteredTableData = [[NSMutableArray alloc] init];

        for (Author* author in theauthors)

        {  //[NSPredicate predicateWithFormat:@"SELECT * from books where title LIKE %@", searchBar.text];

            NSRange nameRange = [author.name rangeOfString:text options:NSAnchoredSearch];
            NSRange descriptionRange = [author.genre rangeOfString:text options:NSAnchoredSearch];
            if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
            {
                [filteredTableData addObject:author];
                NSLog(@"Item Added is %@" , author.name);

            }
        }
    }

    [self.tableView reloadData];

}

#pragma mark - Table View methods

-(NSMutableArray *) authorList{
    [self numberOfSectionsInTableView:tableView];
    theauthors = [[NSMutableArray alloc] initWithCapacity:1000000];
    // NSMutableArray * new2 = [[NSMutableArray alloc ] initWithCapacity:100000];
    // authorNAme = theauthors.sortedArrayHint.description;
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        NSLog(@"Before the dbpath variable");
        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary_native.sqlite"];
        NSLog(@"After the dbpath variable");
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)

        {
            NSLog(@"1");
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        NSLog(@"Database correctly located");
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"2");
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }
        NSLog(@"Database correctly opened");

        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql = "SELECT * FROM wordss";

        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
        }else{
            while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                //   NSLog(@"entered the while statement");
                Author * author = [[Author alloc] init];

//                //  NSLog(@"Author initialised");
//                
                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
              //  NSLog(@"this is the author.name %@" , author.name);
                author.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 2)];
//                
              //  authorNAme=author.genre;              
//                

                [theauthors addObject:author];

            }
            //      authorNAme = author.genre;

        }
    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
    }
    @finally {
        //   sqlite3_finalize(sqlStatement);.
        //   authorNAme = nil;

        //   authorNAme = Nil;
        return theauthors;
    }

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

   // return [[self.fetchedResultsController sections] count];

    return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
//    return [sectionInfo numberOfObjects];

    int rowCount;
    if(self->isFiltered)
        rowCount = filteredTableData.count;
    else
        rowCount = theauthors.count;
    NSLog(@"This is the number of rows accepted %i" , rowCount);
    return rowCount;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  //  UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"Cell"];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    int rowCount = indexPath.row;

    Author *author = [self.theauthors objectAtIndex:rowCount];

    if(isFiltered){
        author = [filteredTableData objectAtIndex:indexPath.row];        

    }
    else{
        author = [theauthors objectAtIndex:indexPath.row];       
    }

    cell.textLabel.text = author.name;

    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];

        NSError *error = nil;
        if (![context save:&error]) {
             // Replace this implementation with code to handle the error appropriately.
             // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }   
}

- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // The table view should not be re-orderable.
    return NO;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
//    NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
//    self.detailViewController.detailItem = object;

   // DetailViewController* vc ;
    MasterViewController *author;
    NSLog(@"This is the showDetailsForIndexPath");
    [self->searchBar resignFirstResponder];
   // Details* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"Details"];
   // AuthorVC* author;

    if(isFiltered)
    {
        author = [filteredTableData objectAtIndex:indexPath.row];
    }
    else
    {
        author = [theauthors objectAtIndex:indexPath.row];
    }

    //vc.author = author;
    authorNAme =  author.genre;
    authorNAme2 = author.name ;

   // author = [theauthors objectAtIndex:indexPath.row];

    NSLog(@"This is the author.genre %@" , author.genre);

    //vc.author.genre = author.genre;
    authorNAme =  author.genre;
    authorNAme2 = author.name;

    //NSLog(@"This is the details %@",vc.author.genre);
    NSLog(@"This is the authorNAme Variable %@" , authorNAme);

    self.detailViewController.detailItem = authorNAme;
    self.detailViewController.detailItem2 = authorNAme2;

}

#pragma mark - Fetched results controller

- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
}    

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
  //  UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

/*
// Implementing the above methods to update the table view in response to individual changes may have performance implications if a large number of changes are made simultaneously. If this proves to be an issue, you can instead just implement controllerDidChangeContent: which notifies the delegate that all section and object changes have been processed. 

 - (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    // In the simplest, most efficient, case, reload the table view.
    [self.tableView reloadData];
}
 */

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{

//    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
//    cell.textLabel.text = [[object valueForKey:@"timeStamp"] description];
}

@end 
```

任何帮助将不胜感激......感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:36:19.297

如果 tableview 在 xib 中，则将其链接到正确的对象并设置委托和数据源。

# excel - 在 Excel 2007 中按条件组合 Excel 工作表/列组

> ID：13395724
> 
> 赞同：0
> 
> 时间：2012-11-15T10:37:57.887
> 
> 标签：excel, excel-2007

有没有办法组合 2 个 Excel 工作表（或一个 Excel 工作表内的列组），以便一个工作表/组中的行附加到另一个工作表/组，以便某些列值匹配。澄清一下：假设我有 2 张纸 - Sheet1 和 Sheet2。Sheet1 具有 A、B、C、D 列。Sheet2 有 A、E、F、G 列。两张表中的 A 列包含相同的数据，但排序方式不同（它不是以传统方式排序（按字母顺序或数字顺序））。我需要将这 2 张纸合二为一，但需要将它们组合在一起，以便 A 列中的值匹配（如果可能，结果的排序方式应与 Sheet2 相同）。理想情况下，我正在寻找的功能需要类似于 SQL 的 INNER JOIN 命令。

我正在使用 Excel 2007。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:33:28.273

我认为您基本上描述了该`VLOOKUP`功能。

您有两张工作表，现在您要创建一个列表，将 A、B、C、D 扩展到 A、B、C、D、E、F、G。

为此，您可以使用

```
Sheet1!E1=VLOOKUP(Sheet1!A1,Sheet2!A:G,5,FALSE)
Sheet1!F1=VLOOKUP(Sheet1!A1,Sheet2!A:G,6,FALSE)
Sheet1!G1=VLOOKUP(Sheet1!A1,Sheet2!A:G,7,FALSE) 
```

如果您因此需要创建一个额外的 sheet3，请使用以下命令：

```
Sheet3!A1=Sheet1!A1
Sheet3!B1=VLOOKUP(Sheet3!A1,Sheet1!A:D,2,FALSE)
Sheet3!C1=VLOOKUP(Sheet3!A1,Sheet1!A:D,3,FALSE)
Sheet3!D1=VLOOKUP(Sheet3!A1,Sheet1!A:D,4,FALSE)
Sheet3!E1=VLOOKUP(Sheet3!A1,Sheet2!A:G,5,FALSE)
Sheet3!F1=VLOOKUP(Sheet3!A1,Sheet2!A:G,6,FALSE)
Sheet3!G1=VLOOKUP(Sheet3!A1,Sheet2!A:G,7,FALSE) 
```

希望这个解释是正确的。

*编辑：*

顺便说一句，由于 Excel 的主要目的不是用作数据库，所以这个操作有点乱，因为它不是动态缩放的。至少在第二种方法中，使用第三张纸。您必须至少将 A1 复制到那么远，以匹配 Sheet1 中最后使用的行。如果你应该进一步复制它，这样你就不必担心一段时间了，你可能需要对空单元格进行防错。

# python - 在大型 DataFrame 上使用 pandas 进行排列的有效方法

> ID：13395725
> 
> 赞同：2
> 
> 时间：2012-11-15T10:37:58.940
> 
> 标签：python, pandas, data-analysis

目前我有一个这样的熊猫数据框：

```
 ID                    A1      A2       A3       B1       B2       B3
 Ku8QhfS0n_hIOABXuE    6.343   6.304    6.410    6.287    6.403    6.279
 fqPEquJRRlSVSfL.8A    6.752   6.681    6.680    6.677    6.525    6.739
 ckiehnugOno9d7vf1Q    6.297   6.248    6.524    6.382    6.316    6.453
 x57Vw5B5Fbt5JUnQkI    6.268   6.451    6.379    6.371    6.458    6.333 
```

此 DataFrame 与统计信息一起使用，然后需要进行排列测试（编辑：准确地说，是**随机**排列）。每列的索引需要洗牌（采样）100 次。为了给出大小的概念，行数可以是 50,000 左右。

编辑：排列是沿着行，即洗牌每列的索引。

这里最大的问题是性能之一。我想以快速的方式排列事物。

我想到的一个例子是：

```
import random
import joblib

def permutation(dataframe):
    return dataframe.apply(random.sample, axis=1, k=len(dataframe))

permute = joblib.delayed(permutation)
pool = joblib.Parallel(n_jobs=-2) # all cores minus 1
result = pool(permute(dataframe) for item in range(100)) 
```

这里的问题是，通过这样做，测试**不稳定**：显然排列有效，但它不像没有并行完成的那样“随机”，因此当我使用时结果会失去稳定性后续计算中的置换数据。

所以我唯一的“解决方案”是在执行并行代码之前预先计算所有列的所有索引，这会大大减慢速度。

我的问题是：

1.  有没有更有效的方法来进行这种排列？（不一定平行）
2.  并行方法（使用多个进程，而不是线程）是否可行？

编辑：为了让事情更清楚，这是在一次洗牌后应该发生的情况，例如 A1 列：

```
Ku8QhfS0n_hIOABXuE    6.268   
fqPEquJRRlSVSfL.8A    6.343
ckiehnugOno9d7vf1Q    6.752
x57Vw5B5Fbt5JUnQk     6.297 
```

（即行值正在移动）。

EDIT2：这是我现在使用的：

```
def _generate_indices(indices, columns, nperm):

    random.seed(1234567890)
    num_genes = indices.size

    for item in range(nperm):

        permuted = pandas.DataFrame(
            {column: random.sample(genes, num_genes) for column in columns},
             index=range(genes.size)
        )

        yield permuted 
```

（简而言之，为每列构建一个重采样索引的 DataFrame）

后来（是的，我知道这很丑）：

```
 # Data is the original DataFrame
 # Indices one of the results of that generator

 permuted = dict()

 for column in data.columns:

    value = data[column]
    permuted[column] = value[indices[column].values].values

 permuted_table = pandas.DataFrame(permuted, index=data.index) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:17:23.213

这个怎么样：

```
In [1]: import numpy as np; import pandas as pd

In [2]: df = pd.DataFrame(np.random.randn(50000, 10))

In [3]: def shuffle(df, n):
   ....:     for i in n:
   ....:         np.random.shuffle(df.values)
   ....:     return df

In [4]: df.head()
Out[4]:
          0         1         2         3         4         5         6         7         8         9
0  0.329588 -0.513814 -1.267923  0.691889 -0.319635 -1.468145 -0.441789  0.004142 -0.362073 -0.555779
1  0.495670  2.460727  1.174324  1.115692  1.214057 -0.843138  0.217075  0.495385  1.568166  0.252299
2 -0.898075  0.994281 -0.281349 -0.104684 -1.686646  0.651502 -1.466679 -1.256705  1.354484  0.626840
3  1.158388 -1.227794 -0.462005 -1.790205  0.399956 -1.631035 -1.707944 -1.126572 -0.892759  1.396455
4 -0.049915  0.006599 -1.099983  0.775028 -0.694906 -1.376802 -0.152225  1.413212  0.050213 -0.209760

In [5]: shuffle(df, 1).head(5)
Out[5]:
          0         1         2         3         4         5         6         7         8         9
0  2.044131  0.072214 -0.304449  0.201148  1.462055  0.538476 -0.059249 -0.133299  2.925301  0.529678
1  0.036957  0.214003 -1.042905 -0.029864  1.616543  0.840719  0.104798 -0.766586 -0.723782 -0.088239
2 -0.025621  0.657951  1.132175 -0.815403  0.548210 -0.029291  0.575587  0.032481 -0.261873  0.010381
3  1.396024  0.859455 -1.514801  0.353378  1.790324  0.286164 -0.765518  1.363027 -0.868599 -0.082818
4 -0.026649 -0.090119 -2.289810 -0.701342 -0.116262 -0.674597 -0.580760 -0.895089 -0.663331  0.

In [6]: %timeit shuffle(df, 100)
Out[6]:
1 loops, best of 3: 14.4 s per loop 
```

这可以满足您的需要。唯一的问题是它是否足够快。

# 更新

根据@Einar 的评论，我改变了我的解决方案。

```
In[7]: def shuffle2(df, n):
           ind = df.index
           for i in range(n):
               sampler = np.random.permutation(df.shape[0])
               new_vals = df.take(sampler).values
               df = pd.DataFrame(new_vals, index=ind)
           return df

In [8]: df.head()
Out[8]: 
          0         1         2         3         4         5         6         7         8         9
0 -0.175006 -0.462306  0.565517 -0.309398  1.100570  0.656627  1.207535 -0.221079 -0.933068 -0.192759
1  0.388165  0.155480 -0.015188  0.868497  1.102662 -0.571818 -0.994005  0.600943  2.205520 -0.294121
2  0.281605 -1.637529  2.238149  0.987409 -1.979691 -0.040130  1.121140  1.190092 -0.118919  0.790367
3  1.054509  0.395444  1.239756 -0.439000  0.146727 -1.705972  0.627053 -0.547096 -0.818094 -0.056983
4  0.209031 -0.233167 -1.900261 -0.678022 -0.064092 -1.562976 -1.516468  0.512461  1.058758 -0.206019

In [9]: shuffle2(df, 1).head()
Out[9]: 
          0         1         2         3         4         5         6         7         8         9
0  0.054355  0.129432 -0.805284 -1.713622 -0.610555 -0.874039 -0.840880  0.593901  0.182513 -1.981521
1  0.624562  1.097495 -0.428710 -0.133220  0.675428  0.892044  0.752593 -0.702470  0.272386 -0.193440
2  0.763551 -0.505923  0.206675  0.561456  0.441514 -0.743498 -1.462773 -0.061210 -0.435449 -2.677681
3  1.149586 -0.003552  2.496176 -0.089767  0.246546 -1.333184  0.524872 -0.527519  0.492978 -0.829365
4 -1.893188  0.728737  0.361983 -0.188709 -0.809291  2.093554  0.396242  0.402482  1.884082  1.373781

In [10]: timeit shuffle2(df, 100)
1 loops, best of 3: 2.47 s per loop 
```

# hibernate - 休眠一对一映射双向

> ID：13395726
> 
> 赞同：1
> 
> 时间：2012-11-15T10:37:59.417
> 
> 标签：hibernate, mapping, one-to-one

```
public class Driver {

    @OneToOne
    private License license;

    //.. getter setter
};

public class License {

    @OneToOne(mappedBy='license')
    private Driver driver;

   //.. getter setter
} 
```

我通过此映射在 Db 的驱动程序表中获得了一个连接列 license_id。问题是：

```
Driver driver = new Driver();
// save driver then get it etc...

License license = new License();
license.setDriver(driver); 
// save license...

driver.getLicense(); 
```

虽然我从孩子设置了父母，但该列仍然是空的，我得到空值。如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:06:42.043

让我们从更具描述性的映射开始，稍后我们可以删除部分，无论如何这些部分将被重新定义为默认值。

有一个描述比我的摘录更详细。请看一下：http: [//viralpatel.net/blogs/hibernate-one-to-one-mapping-tutorial-using-annotation/](http://viralpatel.net/blogs/hibernate-one-to-one-mapping-tutorial-using-annotation/)

基于此，让我们以这种方式扩展映射：

司机

```
public class Driver {

  @Id
  @GeneratedValue
  @Column(name="driver_id")
  private Long driverId;    

  // cascade will do the job for us
  @OneToOne(mappedBy="driver", cascade=CascadeType.ALL)
  private License license; 
```

许可证

```
public class License {

  @Id
  @Column(name="driver_id", unique=true, nullable=false)
  @GeneratedValue(generator="gen")
  @GenericGenerator(name="gen", strategy="foreign"
           , parameters=@Parameter(name="property", value="driver"))
  private Long driverId;

  @OneToOne
  @PrimaryKeyJoinColumn
  private Driver driver
  ... 
```

插入新值时，我们可以显式设置两端：

```
Driver driver = new Driver();
License license = new License();
// set both ends
license.setDriver(driver); 
driver.setLicense(license);

// Just save the Driver. the cascade will do the rest 
```

现在 Hibernate 级联功能将由我们来完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:51:21.863

看起来俗气但尝试

```
public void setDriver(Driver driver){
    this.driver = driver;
    driver.setLicense(this);
} 
```

# objective-c - 为什么 MR_save 不起作用但 MR_saveNestedContexts 起作用？

> ID：13395727
> 
> 赞同：0
> 
> 时间：2012-11-15T10:37:59.363
> 
> 标签：objective-c, ios, database, core-data, magicalrecord

我正在使用 MagicalRecord 来保存一个名为“我”的托管对象。这是我正在尝试的两种方法（第一种方法不保留数据，但第二种方法可以）：

```
NSManagedObjectContext *localContext = [NSManagedObjectContext MR_contextForCurrentThread];
[Me MR_createInContext:localContext];
[localContext MR_save]; 
```

上面的方法不会持久化数据，但下面的方法会：

```
NSManagedObjectContext *localContext = [NSManagedObjectContext MR_contextForCurrentThread];
[Me MR_createInContext:localContext];
[localContext MR_saveNestedContexts]; 
```

为什么 MR_save 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:53:15.853

从评论：

请参阅[“关于 MagicalRecord，MR_saveNestedContexts 和 MR_save 方法有什么区别”](https://stackoverflow.com/questions/13300129/regarding-magicalrecord-what-is-the-difference-between-the-methods-mr-saveneste)。两种方法之间有很好的描述。

从版本 2.0.8 开始，如果您想确保将嵌套上下文持久保存到商店，请使用`MR_saveNestedContexts`. 如果您只想保存**一个**父母，请使用`MR_save`. **如果**父级恰好是根/默认上下文，`MR_saveNestedContexts`并且`MR_save`做同样的事情，那就是坚持存储。

# jquery - 如何在鼠标悬停和鼠标移出时添加淡入淡出效果？

> ID：13395730
> 
> 赞同：0
> 
> 时间：2012-11-15T10:38:07.693
> 
> 标签：jquery

如何在鼠标悬停和鼠标移出时添加淡入淡出效果？

```
<script>
jQuery(function() {
 jQuery(".logo img").mouseover(function() { 
var src = "<?php echo $this->baseurl ?>/templates/kalfany/images/logo-<?php echo $this->language; ?>-hover.png";
 jQuery(this).attr("src", src);
}).mouseout(function() {
 var src = "<?php echo $this->baseurl ?>/templates/kalfany/images/logo-<?php echo $this->language; ?>.png";
 jQuery(this).attr("src", src);
}); });
</script> 
```

我从这里得到了我的问题的答案

[http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/](http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/)

这就是我要找的所以，最好的答案是我的；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:45:20.973

使用这样的东西...

```
$('.logo img').hover(
  function(){
    $(this).fadeOut('slow');
  },
  function(){
    $(this).fadeIn('slow');
  }
); 
```

但我在想它可能不起作用，因为如果它完全淡出，hoverOut 会自行调用。您可以尝试在图像上添加一个 div 并隐藏图像而不是 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:48:49.707

你可以这样使用...

```
$(".logo img").mouseover(function() {
    $(this).fadeIn('fast');
}).mouseout(function () {
    $(this).fadeOut('fast');
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:57:19.320

如果您不是在寻找某种交叉淡入淡出，您可以使用

```
 jQuery("img").mouseover(function() { 
     var src = "http://www.josephmccaffery.com/wp-content/uploads/2011/04/logo_google_x-150x150.png";
     jQuery(this).fadeOut(300,function(){
         jQuery(this).attr("src", src).fadeIn();
     })
}).mouseout(function() {
     var src = "http://techteen.net/wp-content/uploads/2012/08/Google-Logo-Square.png";
     jQuery(this).fadeOut(300,function(){
         jQuery(this).attr("src", src).fadeIn();
     })
}); 
```

​</p>

[jsfddle](http://jsfiddle.net/HpmN7/181/)

如果未加载图像，可能会出现故障。

# api - Joomla 与现有应用程序的集成

> ID：13395732
> 
> 赞同：0
> 
> 时间：2012-11-15T10:38:12.197
> 
> 标签：api, joomla, joomla1.5, joomla2.5

我想将 Joomla 与现有应用程序之一集成。我的应用程序也在 PHP 中，但我不想在数据库级别集成，而是寻找 API 来访问 Joomla 功能，如添加页面等。JFussion 可用，但它的功能仅限于用户功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:26:45.677

为 Joomla! 编写自己的组件，在其中创建自己的 API 以获取参数并输出所需的数据。

据我所知，没有开箱即用的组件，如果有，它可能不适合您的需求。为自己的需要编写一个定制的组件是最好的方法，如果你能理解 Joomla 的基本概念，这并不难！组件创建和面向对象的 php 编程。

这就是我为自己的组件所做的！

这可能会有所帮助：[为 Joomla 开发模型-视图-控制器组件！2.5](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)

# sql - sqlite 表列的默认值，同时插入记录

> ID：13395735
> 
> 赞同：2
> 
> 时间：2012-11-15T10:38:13.520
> 
> 标签：sql, sqlite

我有一个包含 25 列的 sqlite 表，前 10 列在 function_1 中更新，其余列在 function_2 列中更新。

但是在更新时出现以下错误：

```
Error: table AirMode has 25 columns but 10 values were supplied. 
```

这清楚地表明，要么应该有一种方法来告诉其余 15 列应该以默认值传递。

如何在不使用默认值的同一查询中添加额外的 15 列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:45:15.917

仅在插入语句中提供要填充的列

```
insert into your_table (col1, col2, ..., col10)
values ('1', '2', ..., '10') 
```

# axapta - 在报告中格式化负值

> ID：13395736
> 
> 赞同：1
> 
> 时间：2012-11-15T10:38:17.077
> 
> 标签：axapta, dynamics-ax-2009

我有一份包含 10 列股票价值的报告。

当股票价值为负时，我希望报告中的文本采用不同的格式，例如，我可能希望将其格式设置为粗体和红色。

这是我需要在`fetch`方法中做的事情吗？

目前我的 fetch 方法非常基本，只使用`setRecord`一次来设置一个临时表。

有可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:15:01.340

看看`tutorial_ColourLines`报告。

```
reportSection.foregroundColor(colour); 
```

报告更改报告部分的颜色，但也可以对单个报告控件进行更改。

# java - 在 java 中重新抛出异常时，堆栈跟踪未完全维护

> ID：13395737
> 
> 赞同：3
> 
> 时间：2012-11-15T10:38:17.130
> 
> 标签：java, jakarta-ee, exception-handling

当在下面的代码中重新抛出异常时，不会保留原始堆栈跟踪。

异常在第 148 行抛出并在第 150 行重新抛出。在重新抛出后第 150 行是指定的异常源。

我必须怎么做才能保留原始堆栈跟踪？

代码：

```
 try {

        content = (InputStream) conn.getContent(); //line 148

    } catch (IOException e) {

        throw new RuntimeException(e); //line 150

    } 
```

原始堆栈跟踪：

```
 (java.lang.StackTraceElement[]) [sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source), java.net.URLConnection.getContent(Unknown Source), com.mycompany.myapp.client.services.impl.AbstractClientService.getResponseEle(AbstractClientService.java:148), com.mycompany.myapp.client.services.impl.AbstractClientService.getResponseEleWithCheck(AbstractClientService.java:162), com.mycompany.myapp.client.services.impl.AbstractClientService.getResponseEleWithCheck(AbstractClientService.java:158), com.mycompany.myapp.client.services.impl.InfoQueryClientServiceImpl.getFileOnTmpList(InfoQueryClientServiceImpl.java:84), com.mycompany.myapp.client.myappClient.getFileOnTmpList(myappClient.java:196), com.mycompany.myapp.client.model.Model.updateStudyInfos(Model.java:96), com.mycompany.myapp.client.model.Model.instantiateSingleton(Model.java:46), com.mycompany.myapp.applet.MainApplet.addMainPanel(MainApplet.java:106), com.mycompany.myapp.applet.MainApplet.createUIPanel(MainApplet.java:76), com.mycompany.myapp.applet.MainApplet.init(MainApplet.java:58), com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source), sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source), java.lang.Thread.run(Unknown Source)] 
```

重新抛出后的堆栈跟踪：

```
 (java.lang.StackTraceElement[]) [com.mycompany.myapp.client.services.impl.AbstractClientService.getResponseEle(AbstractClientService.java:150), com.mycompany.myapp.client.services.impl.AbstractClientService.getResponseEleWithCheck(AbstractClientService.java:162), com.mycompany.myapp.client.services.impl.AbstractClientService.getResponseEleWithCheck(AbstractClientService.java:158), com.mycompany.myapp.client.services.impl.InfoQueryClientServiceImpl.getFileOnTmpList(InfoQueryClientServiceImpl.java:84), com.mycompany.myapp.client.myappClient.getFileOnTmpList(myappClient.java:196), com.mycompany.myapp.client.model.Model.updateStudyInfos(Model.java:96), com.mycompany.myapp.client.model.Model.instantiateSingleton(Model.java:46), com.mycompany.myapp.applet.MainApplet.addMainPanel(MainApplet.java:106), com.mycompany.myapp.applet.MainApplet.createUIPanel(MainApplet.java:76), com.mycompany.myapp.applet.MainApplet.init(MainApplet.java:58), com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source), sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source), java.lang.Thread.run(Unknown Source)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:51:43.983

您的代码不会重新抛出原始异常，而是抛出新实例，`RuntimeException`该实例的堆栈跟踪在创建时已填充。

您可以在捕获 RuntimeException 时进行以太调用`Throwable.getCause().getStackTrace()`，或者在抛出 RuntimeException 之前将 RuntimeException 的堆栈跟踪设置为原始异常之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:43:13.460

“问题”是您没有重新抛出异常。相反，您正在抛出一个*新*的异常。如果你真的重新抛出这样的异常：

```
try {
    content = (InputStream) conn.getContent();
} catch (IOException e) {
    throw e;
} 
```

你会发现堆栈跟踪被保留了。

如果您`Throwable.printStackTrace()`在现代 JVM 上使用，它将显示链接异常及其（唯一）堆栈帧。换句话说，原始异常的信息被保留。

* * *

有一种方法可以将堆栈跟踪从一个异常拼接到另一个异常中。

```
try {
    content = (InputStream) conn.getContent();
} catch (IOException e) {
    RuntimeException re = new RuntimeException(e);
    re.setStackTrace(e.getStackTrace());
    throw re;
} 
```

但是，我个人认为这不是一个好主意。虽然 的行号`RuntimeException`现在与原始异常相同，但您会发现连接对象的异常情况似乎抛出了`RuntimeException`代码表明这不可能发生的地方。我认为最好以正常方式链接异常并让程序员正确读取链接异常的堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:41:51.873

堆栈跟踪被保留。

您必须从那里获取原因`RuntimeException`并从那里获取堆栈跟踪以获取来源。

此功能称为异常链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-22T11:20:06.360

您必须按照导致 Throwables 的参考来获取原始堆栈跟踪。例如

```
public static StackTraceElement[] getCausingStacktrace(Throwable throwable) {
  if (throwable == null) {
    throw new NullPointerException();
  }
  while (throwable != null) {
    throwable = throwable.getCause();
  }
  return throwable.getStacktrace();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T10:40:48.723

如果您只想要原始堆栈跟踪，请不要抓住它。另一方面，我假设您出于某种原因将其包装在运行时异常中。您可以使用从运行时异常中获取原始异常`getCause()`

# objective-c - 如何在 xcode 中创建数组键和值？

> ID：13395738
> 
> 赞同：5
> 
> 时间：2012-11-15T10:38:17.623
> 
> 标签：objective-c, nsdictionary

我是一名新的 Iphone 开发人员，我需要你的帮助，

任何人都为我提供了创建带有键和值的数组，以及如何在 xcode 中获取。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T10:40:06.033

这是 NSMutableDictionary。您可以搜索示例代码。例如：[创建字典](https://stackoverflow.com/questions/11205974/how-to-create-an-nsdictionary-with-multiple-keys)

```
NSMutableDictionary *dictionary = [NSMutableDictionary dictionary];
[dictionary setObject:@"object1" forKey:@"key1"]; 
```

打印字典的所有键和值：

```
for (NSString* key in [dictionary allKeys]) {
   NSLog(@"key: %@, value: %@", key, [dictionary objectForKey:key]);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T10:47:47.037

您可以使用`NSDictionary`or`NSmutabledictionary`来实现这一点，您不需要使用 and `NSArray`。这是它如何工作的示例。

```
 NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; // Don't always need this 
  // Note you can't use setObject: forKey: if you are using NSDictionary
  [dict setObject:@"Value1" forKey:@"Key1"];
  [dict setObject:@"Value2" forKey:@"Key2"];
  [dict setObject:@"Value3" forKey:@"Key3"]; 
```

然后您可以通过执行来检索键的值。

```
 NSString *valueStr = [dict objectForKey:@"Key2"]; 
```

这将在 valueStr 字符串中给出 Value2 的值。

将对象添加到非可变字典`NSDictionary`中即可

```
 NSDictionary *dict2 = [[NSDictionary alloc] initWithObjectsAndKeys:@"Value1", @"Key1", @"Value2", @"Key2", nil]; 
```

然后只需以与`NSMutableDictionary`. 两者之间的区别在于，`Mutable`字典可以在创建后进行修改，因此可以使用 向其中添加对象`setObject:forKey`并使用 删除对象，`removeObjectFroKey:`而不能修改非可变字典，因此一旦创建它，​​你就会坚持使用它，直到它被释放，所以没有添加或删除对象。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T10:43:30.410

这正是 NSDictionary / NSMutableDictionary 所做的：

```
NSMutableDictionary *myDictionary = [[ NSMutableDictionary alloc] init];
[ myDictionary setObject:@"John" forKey:@"name"];
[ myDictionary setObject:@"Developer" forKey:@"position"];
[ myDictionary setObject:@"1/1/1984" forKey:@"born"]; 
```

不同之处在于，在可变条目中，您可以在创建条目后添加/修改条目，但不能在另一个条目中添加/修改条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:07:00.040

如果您不再需要添加对象，您可以创建一个非可变字典：

```
NSDictionary* dict= @{ @"key1" : @"value1" , @"key2" : @"value2" }; 
```

如果您不需要作为数组的键值对：

```
NSArray* array= @[ @"value1" , @"value2", @"value3" ]; 
```

# node.js - 无法获取 CSS 文件

> ID：13395742
> 
> 赞同：49
> 
> 时间：2012-11-15T10:38:35.500
> 
> 标签：node.js, express

我的目录设置是这样的：

```
app.js
vews
  home.html
  css
    style.css 
```

我的主文件是这样的：

```
<html>
<head>
  <title></title>
  <link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>

</body>
</html> 
```

我的应用是这样的：

```
var io   = require('socket.io'),
    url  = require('url'),
    sys  = require('sys'),
    express = require('express'),
    http=require('http');

var app = express();
var server = http.createServer(app);
var socket = io.listen(server);

app.engine('.html', require('ejs').__express);
app.set('views', __dirname + '/views');
app.set('view engine', 'html');

app.get('/', function(req, res){
    res.render('home');
});

app.listen(4000);
sys.puts('server running ' + 'now ' + Date.now()); 
```

问题是当我运行应用程序时，无法加载 css 文件。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-11-15T11:10:33.357

由于 .css 文件是静态文件，因此您必须将它们提供给客户端。但是，您不会将静态文件作为快速中间件提供。将以下中间件添加到您的 express 应用程序并移动`css`目录下的文件夹`public`（您应该创建一个`public directory`.

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

所以你的最终目录结构应该是这样的

```
app.js
views
  home.html
public
  css
    style.css 
```

并且不要忘记 require`path`模块

```
 var path = require('path') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-02-06T06:46:37.977

在我的一个应用程序中，我在这个文件结构中有这些相关文件：

```
/
index.js
  /public
    /stylesheets
      main.css
  /views
    /partials
      header.ejs 
```

`index.js`包括`app.use(express.static(path.join(__dirname, '/public')));` 注意`/public`. _

header.ejs 部分包含`<link rel='stylesheet' type='text/css' href='/stylesheets/main.css' />` 注意缺少公共，它是由中间件暗示的。

在您的示例中，您当前的静态文件目录与您保存静态文件的位置不匹配。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-15T11:07:38.163

试试这个：

```
<link rel="stylesheet" type="text/css" href="/css/style.css" /> 
```

这可能会解决问题。

# c - 为什么我不能在 C 中读取 Ctrl+S？

> ID：13395743
> 
> 赞同：8
> 
> 时间：2012-11-15T10:38:38.807
> 
> 标签：c, input, io

我有这个程序，`C`它读取这样的输入：

```
cod1 = getch ();
  if (kbhit())
    cod2 = getch (); 
```

我可以阅读每个`Ctrl`+`Char`可能的序列，除了`Ctrl`+ `C`，它关闭程序 - 没关系，而`Ctrl`+ `S`，简单的不是捕捉。但我想让`Ctrl`+`S`成为我程序中的保存功能；我怎么能那样做？此外，是否可以读取`Alt`+`Char`字符？因为它将它作为常规字符读取，例如，`Alt`+`A`使用与 . 相同的代码读取`A`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T10:48:30.450

您的问题是输入可能会被终端仿真器吃掉。

例如`Alt+<Whatever>`，通常为菜单快捷方式保留（例如`Alt+F`打开`File`菜单）。按住后通常会突出显示匹配的字符`Alt`（`F`get 中的下划线`File`）。

`Ctrl+S` [保留](http://www.computerhope.com/ushort.htm)用于`Stops all output on screen (XOFF)`（您的终端仿真器再次这样做）。

至于`Alt+<...>`在命令行应用程序中用作快捷方式。就我而言，持有`Alt`不会影响收到的字符，它只是设置难以在控制台中访问的标志。即使在 GUI 应用程序中（在 Windows 中），它也非常棘手，您必须使用类似功能[`GetAsyncState()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx)来检查是否按下了 alt。

# java - AOP 建议没有被调用

> ID：13395746
> 
> 赞同：0
> 
> 时间：2012-11-15T10:38:48.840
> 
> 标签：java, aop

我在 spring 中定义了以下 AOP 配置：

```
<aop:config>
   <aop:aspect ref="aopAdvice">
        <aop:around
            pointcut="execution(* com.bis.client.auto.ClientHandler.sendCanonical(..))"
            method="methodDuration"/>

    </aop:aspect>
    <aop:aspect ref="aopAdvice">
        <aop:around
            pointcut="execution(public * com.bis.client.auto.MessageHandlerImpl.messageArrived(..))"
            method="methodDuration"/>
    </aop:aspect>
</aop:config> 
```

我基本上希望在调用 sendCanonical 方法或 message 方法时调用 methodDuration 方法。

问题是建议永远不会被调用，即使我 100% 确定这些方法会被调用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:03:50.653

确保您已定义。还要确保所有其他配置与 springsource 文档中定义的相同。

如果上述情况正常，则将切入点更改为“执行（公共 * *（..））”。这削减了每个类的每个公共方法。通过这样做，应该为应用程序中的每个公共方法调用 AOP 建议。如果这工作正常，这意味着您的配置是正确的。如果这不起作用，请确保您的配置不正确。所以修改配置并尝试这一步。

一旦上述步骤工作正常，然后慢慢地一个接一个地修改切入点，例如首先添加类名（这应该剪切该类中的每个公共方法）然后添加方法名等。

祝你好运！！！！

# string - strcpy 没有复制完整的字符串

> ID：13395759
> 
> 赞同：1
> 
> 时间：2012-11-15T10:39:29.523
> 
> 标签：string, visual-c++, strcpy

我正在使用 Visual C++ 6.0，我有下面的代码。

```
char filename[1000], string[5];
FILE *fin;
strcpy(filename, argv[3]);
if ((fin = fopen(filename, "r")) != NULL)
{
    fgets(string, 100, fin);
    string[strlen(string)-1] = NULL;
    printf("filename = %s\n", filename);
    printf("argv[3]= %s\n", argv[3]);
    printf("string = %s\n", string);
} 
```

argv[3] 为完整路径和文件名，例如 C:\Users\Desktop\file.txt，文件内容为

```
1
2
3 
```

所以“1”应该存储在“string”变量中。

但是，对于大约 4 次运行中的 1 次，我会得到输出

```
filename = C:\Users\Desktop\file.tx
argv[3] = C:\Users\Desktop\file.txt
string = <very long garbage value> 
```

为什么

```
strcpy(filename, argv[3]); 
```

不复制整个字符串，缺少最后一个“t”？为什么在这种情况下 fin 不为 NULL，因为该文件不应该存在？

我还应该补充一点，该代码存在于多线程程序中，但只有 1 个线程执行此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:43:25.613

```
string[5]; 
```

您只为 4 个字符和一个空终止符分配了足够的空间，但您的 fgets 最多读取 100。

```
fgets(string, 100, fin); 
```

# c# - 如何使用包含二维列表

> ID：13395760
> 
> 赞同：0
> 
> 时间：2012-11-15T10:39:30.147
> 
> 标签：c#

如何查找列表列表中的任何列表是否包含另一个列表中的所有元素？类似于 list list .contains(list)，其中 list(list) 是`stanjaDKA`，而 list 是`tmpzaNormalanPrijelaz`，并且所有列表成员都是 int 类型？我试过这个，但最后我进入了很多状态`stanjaDKA`。

```
int indeks=stanjaDKA.FindIndex(x=>x.Equals(tmpzaNormalanPrijelaz));
if (indeks==-1 && tmpzaNormalanPrijelaz.Count>0)
{
    stanjaDKA.Add(tmpzaNormalanPrijelaz);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:34:17.837

> 如何查找 X 列表中是否有任何 X

使用 LINQ 的`Any`：

```
bool anyXInListOfX = myListOfX(x => someConditionOnX); 
```

* * *

> 列表包含另一个列表中的所有元素

如果您不关心重复元素（即，如果您很高兴`{1}`包含 中的所有元素`{1, 1}`），您可以使用 LINQ`Except`并检查是否有任何剩余：

```
bool firstListContainsAllElementsInSecondList =
    !mySecondList.Except(myFirstList).Any(); 
```

* * *

但是，*“任何列表包含所有元素”*相当于*“所有列表*不*包含所有元素”*，并且上面的`don't`取消`!`，所以在你的情况下，我会做类似的事情

```
if (stanjaDKA.All(l => tmpzaNormalanPrijelaz.Except(l).Any()))
{
    stanjaDKA.Add(tmpzaNormalanPrijelaz);
} 
```

这读作*“如果*中的所有*列表`stanjaDKA`都缺少*中的至少一个*元素`tmpzaNormalanPrijelaz`，则添加`tmpzaNormalanPrijelaz`到`stanjaDKA`”*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T10:11:45.197

取决于你真正想要什么，这将帮助你做市长的事情

```
 // Sample List<List<int>>
        var listList = new List<List<int>>();
        listList.Add(new List<int>() { 0, 1, 2, 3, 4 });
        listList.Add(new List<int>() { 0, 1, 2, 3, 4 });
        listList.Add(new List<int>() { 1, 1, 2, 3, 4 });
        listList.Add(new List<int>() { 1, 1, 1, 1, 1 });
        listList.Add(new List<int>() { 5, 6, 7, 8, 9 });

        // the List you are seaching for
        var searchList = new List<int>() { 10 };

        foreach(List<int> list in listList)
        {
            var newList =list.Intersect(searchList);
            if (newList.Count() == searchList.Count)
            {
                string elements = "";
                foreach (int item in newList)
                {
                    elements += item + " ";
                }
                Console.WriteLine(elements);
            }
        }

        Console.ReadLine(); 
```

你也应该看看这个[链接](https://stackoverflow.com/questions/5011948/how-do-i-do-an-integer-list-intersection-while-keeping-duplicates)也许你需要它

# hibernate - Hibernate JPA - 错误：EntityManager 没有持久性提供程序

> ID：13395767
> 
> 赞同：2
> 
> 时间：2012-11-15T10:39:49.117
> 
> 标签：hibernate, jakarta-ee, jpa

我正在编写我的第一个 Hibernate JPA 项目。我有一个非常常见的问题（我发现了很多关于它的文章），但没有适合我的解决方案。

当我运行应用程序时，出现此错误：

```
Exception in thread "main" javax.persistence.PersistenceException: No Persistence provider for EntityManager named JpaTest2
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69)
at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)
at net.andy.DatabaseAccess.testJpa(DatabaseAccess.java:55)
at net.andy.Main.main(Main.java:11) 
```

我的 persistence.xml 是：

```
<persistence-unit name="pu3" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<class>net.andy.Writer</class>
  <properties>
     <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
     <!--  <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/> -->
     <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
     <property name="hibernate.connection.username" value="postgres"/>
     <property name="hibernate.connection.password" value="postgres"/>
     <property name="hibernate.connection.url" value="jdbc:postgresql://localhost:5432/testdb"/>
     <property name="hibernate.max_fetch_depth" value="3"/>
  </properties> 
```

这是我的课程，我尝试将某些内容保存到数据库：

```
 public static void testJpa() {

    // Use persistence.xml configuration

    EntityManagerFactory emf = Persistence.createEntityManagerFactory("JpaTest2");
    EntityManager em = emf.createEntityManager();

    // Work with the EM
    Writer w = new Writer();
    //MapEntity map = new MapEntity();
    w.setId(5);

    EntityTransaction transaction = em.getTransaction();
    transaction.begin();
    em.persist(w);
    transaction.commit();
    em.close();
    emf.close(); 
} 
```

我已经阅读了许多描述此错误的文章。到目前为止，我有：

1.  在 persistence.xml 中添加了一行。
2.  更改了 persistence.xml 位置（我可能尝试过每个人的位置还有 meta-inf 文件夹、myproject/src 等）
3.  添加了 libs hibernate-core、hibernate-entitymanager、hibernate-commons-annotations、ejb3-persistence、hibernate-jpa、jta、postgresqljdbc（以及更多）。

如何解决这个问题？上面的代码几乎是从教程中复制的，所以我认为库或项目结构存在一些问题，但无法找到此问题的正确原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:44:00.470

您的 persistence.xml 中的持久性单元的名称是`pu3`，而在您的代码中构建您使用的 EntityManagerFactory 时`JpaTest2`。尝试先修改它（使用相同的名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:17:11.913

您可能需要`dependencies`在`pom.xml`. [这里](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/configuration.html)：设置配置。

pom.xml

```
<project ...>
  ...
  <dependencies>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-entitymanager</artifactId>
      <version>${hibernate-core-version}</version>
    </dependency>
  </dependencies>
</project> 
```

# wordpress - 如何将子分类法链接到 wordpress 中的产品

> ID：13395768
> 
> 赞同：0
> 
> 时间：2012-11-15T10:39:55.887
> 
> 标签：wordpress, taxonomy, custom-post-type

我创建了名为内部产品的自定义帖子类型

我有一个页面 page-internal-products.php 列出了自定义帖子类型内部产品的所有自定义分类

单击分类法将我带到一个页面，该页面列出了特定父分类法的子分类法，我为其创建了名为 taxonomy-internalproducts_categories.php 的页面

点击子分类。我需要转到列出此子分类的所有产品的页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:59:23.500

[您可以使用get_queried_object()](http://codex.wordpress.org/Function_Reference/get_queried_object)函数访问当前查询的对象，然后检查该类别是否有父对象。如果有 - 显示其中的帖子，如果它不显示属于该类别的所有类别。

这是一个示例代码：

```
$category = get_queried_object();
if ( $category->parent ) {
    // This is a sub-category
    get_template_part( 'internal-products', 'list' );
} else {
    // This is a main category
    get_template_part( 'internal-products', 'categories-list' );
} 
```

这段代码的作用是它将包含一个名为的主题文件，`internal-products-list.php`或者`internal-products.php`当前类别是否是子类别。否则它将包括`internal-products-categories-list.php`或`internal-products.php`。

您当然可以在`if/else`块中编写所有代码 - 这取决于您。

# jquery - 使用 jquery 将表单从灯箱窗口复制回父页面

> ID：13395780
> 
> 赞同：1
> 
> 时间：2012-11-15T10:40:22.423
> 
> 标签：jquery

我已经建立了一个表单来收集用户的数据。表单的一部分具有一个 Jquery 灯箱来捕获其他数据。然后我想将该表单复制回父页面。我尝试使用 .html() 函数从灯箱复制表单并将其传递回父页面。但问题是它不会复制用户在灯箱表单中输入的值。

我可以使用另一种方法来返回表单 html 和输入的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:44:05.983

使用`$('form').serialize();`它将返回包含表单的数据。

# c#-4.0 - C# 项目中的 SQL Server CE 运行时？

> ID：13395781
> 
> 赞同：0
> 
> 时间：2012-11-15T10:40:27.727
> 
> 标签：c#-4.0, visual-studio-2012, sql-server-ce, merge-module

我有一个使用 SQL Server Compact Edition 的应用程序。所以我需要运行时在所有机器上。我一直在寻找运行时的合并模块，但是我在那里没有运气。

有没有办法将运行时引入应用程序本身？这样就不需要用户安装运行时了吗？

或者有没有办法从 msi 中提取模块并将它们加载到我的安装程序中？

我正在使用 Visual Studio 2012。并与一些安装程序创建者一起玩，比如 Create install free。作为一个方面，有没有人有一个好的免费软件安装程序创建者？

任何帮助都会很棒，

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:11:06.640

您可以在您的应用程序中包含 SQL Server Compact DLL 文件，因此除了您的应用程序之外，您不需要安装任何东西 - 请参阅我的博客以获得详细的详细说明 - 您使用哪个 SQL Server Compact 版本？

# python - Python DBF 模块正在向表导出添加额外的行

> ID：13395783
> 
> 赞同：1
> 
> 时间：2012-11-15T10:40:28.927
> 
> 标签：python, database, sqlite, dbf

我正在将 dbf 文件批量导入到 sqlite。[我使用http://dbfpy.sourceforge.net/](http://dbfpy.sourceforge.net/)的 dbf 模块在 python 中编写了一个简单的脚本。除了少数情况外，它工作正常且符合预期。在一些非常谨慎的情况下，该模块似乎在它正在读取的表中添加了一些错误记录。

我知道这听起来很疯狂，但似乎确实如此。我已经使用 open office 将有问题的 dbase 文件导出到 csv 并使用 .import 将其直接导入到 sqlite 并且不存在 3 个额外记录。

但是，如果我使用 python 和 dbfpy 模块遍历文件，则会添加 3 条额外记录。

我想知道这三个记录是否有可能在 dbf 文件中被标记为已删除，而 dbf 模块正在拾取打开办公室不可见的情况。在这种可能性中，我可能会走得很远，但我真的在这个问题上摸不着头脑。

任何帮助表示赞赏。

以下是我读取 dbf 文件的方法示例。我已经删除了循环并使用了一个案例。

```
conn = lite.connect('../data/my_dbf.db3')
#used to get rid of the 8 byte string error from sqlite3
conn.text_factory = str
cur = conn.cursor()
rows_list = []
db = dbf.Dbf("../data/test.dbf")         
for rec in db:
    ***if not rec.deleted:***
          row_tuple = (rec["name"], rec["address"], rec["age"])
          rows_list.append(row_tuple)

print file_name + " processed"
db.close()
cur.executemany("INSERT INTO exported_data VALUES(?, ?, ?)", rows_list)

#pprint.pprint(rows_list)
conn.commit() 
```

**解决方案** 好吧，在午餐前又进行了大约半小时的测试后，我发现我可能的假设实际上是正确的，有些文件没有被打包，因此标记为删除的记录仍然保留在其中。它们在出口后不应该处于未包装状态，因此会造成更多混乱。我手动打包了一个文件并对其进行了测试，它立即返回了正确的结果。

非常感谢您对此的帮助。我在下面给出的解决方案中添加了忽略已删除的记录。我在这个模块中搜索并搜索了这个方法（已删除），但找不到它的 api 文档，我什至查看了代码，但在它的迷雾中，它一定已经溜走了。感谢一百万的解决方案和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:29:14.953

如果您不想丢弃标记为已删除的记录，您可以编写：

```
for rec in db:
    if not rec.deleted:
        row_tuple = (rec["name"], rec["address"], rec["age"])
        rows_list.append(row_tuple) 
```

# postgresql - PostgreSQL 9.1 的自动故障转移

> ID：13395787
> 
> 赞同：0
> 
> 时间：2012-11-15T10:40:43.117
> 
> 标签：postgresql, postgresql-9.1, failover

PostgreSql 9.1 有主从同步复制。假设master是机器A，slave是机器B。

如果 master 失败了，PostgreSQL 怎么知道什么时候让 slave 成为 master？如果从服务器错误地认为主服务器由于主服务器上的临时网络故障而导致客户端程序仍然可以联系主服务器，该怎么办。

而且，我的客户端程序如何知道新主机中的从机，更重要的是准备好接受写入。从站是否向客户端发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:04:42.510

检查[repmgr](http://www.repmgr.org/)，它的工作之一就是处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T19:30:14.787

通常，您希望使用诸如 repmgr 或patoni 之类的促销管理系统。然后你想使用某种高可用性代理（可能是 pgbouncer 或 haproxy）来处理实际的抽象，这样你的应用程序就不需要知道哪个系统是主系统。

在回答您的问题时，这些系统中的大多数都使用心跳来确定是否存在问题。Patroni 退出 etcd 心跳。Repmgr 有自己的心跳检查。使用 Repmgr，您需要编写挂钩脚本来处理 stonith，等等。

# java - 从jquery序列化数组发布jsp servlet数组

> ID：13395788
> 
> 赞同：2
> 
> 时间：2012-11-15T10:40:44.817
> 
> 标签：java, jsp, servlets

我的问题是我没有从 jquery post 到 jspservlet 获取数组总是显示空指针异常。我的 jsp 页面代码如下所示：

```
<!DOCTYPE html>
<html>
<head>
<script src="JS/jquery-latest.js"></script>
<script>
$(document).ready(function(){
  $("button").click(function(){
      $("p").fadeToggle(3000,function(){
          var fields=new Array();

          fields = $(":input").serializeArray();
          $.post("exampleservlet",{arraydata:fields,mode:"Insert"},
          function(data) {
                alert("Data Loaded: " + data);
          });      
      });
      return false;
  });
});
</script>
</head>
<body>
    <form>
        <input type="text" name="txt_name" />
        <input type="text" name="txt_name1" />
        <input type="text" name="txt_name2" />
        <input type="text" name="txt_name3" />
      <p style="background:blue;color:white;padding:10px;">If you click on me, I will disappear.</p>
        <button>Click me</button>
    </form>   
</body>
</html> 
```

和下面列出的我的 jsp servlet java 代码：

```
@Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        String jsresponse="No Message";

       try
        {
        String arrayData[] = request.getParameterValues("arraydata");
        //String data[]=request.getParameterValues("arraydata[]");

        jsresponse = arrayData[0] +" - ";//"This line shows null pointer exception!";

        }
        catch(Exception ex)
        {

        }

        response.setContentType("text/plain");  // Set content type of the response so that jQuery knows what it can expect.
        response.setCharacterEncoding("UTF-8"); // You want world domination, huh?
        response.getWriter().write(jsresponse);
    } 
```

我在这一行得到空指针异常

```
jsresponse = arrayData[0];//"This line shows null pointer exception!"; 
```

它显示如下错误日志：

```
Nov 15, 2012 4:10:03 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [exampleservlet] in context with path [/javaservletwithajax] threw exception
java.lang.NullPointerException
    at com.example.servlets.exampleservlet.doPost(exampleservlet.java:56)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

任何人都可以帮助我如何从 jsp servlet 中的 dopost 参数值中获取数组！

## **从 kmb385 解决了我的问题，如下所示：**

**jquery的变化**

```
$(document).ready(function(){
  $("button").click(function(){
      $("p").fadeToggle(3000,function(){

           var fields=new Array();
           var values = new Array();

           fields = $(":input").serializeArray();
           $.each(fields, function(index,element){
             values.push(element.value);
           });

          $.post("exampleservlet",{arraydata:values,mode:"Insert"},
          function(data) {
                alert("Data Loaded: " + data);
          });

      });
      return false;
  });
}); 
```

**jsp servlet 的变化：**

```
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String jsresponse="No Message";

   try
    {
    String arrayData[] = request.getParameterValues("arraydata[]");
    //String data[]=request.getParameterValues("arraydata[]");
    jsresponse = arrayData[0] +" - ";//"Test Response!";

    }
    catch(Exception ex)
    {
     jsresponse = ex.toString();               
    }
    response.setContentType("text/plain");  // Set content type of the response so that            jQuery knows what it can expect.
    response.setCharacterEncoding("UTF-8"); // You want world domination, huh?
    response.getWriter().write(jsresponse);
} 
```

这很酷！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:57:34.670

遇到了两个问题。

1.  必须在用于检索参数值的字符串文字中指定括号。
2.  数组没有通过线路传递到 servlet。

要解决第一个问题，请将传递给的参数更改为`getParameterValues`

```
String arrayData[] = request.getParameterValues("arraydata[]"); 
```

要解决第二个问题，您必须遍历 Jquery`serializeArray`方法返回的对象并构造一个值数组。返回的对象`serializeArray`格式为 {name:val, value: val}。使用以下代码创建并传递此数组：

```
 var fields=new Array();
   var values = new Array();

   fields = $(":input").serializeArray();
   $.each(fields, function(index,element){
     values.push(element.value);
   });

  $.post("exampleservlet",{arraydata:values,mode:"Insert"},
  function(data) {
        alert("Data Loaded: " + data);
  }); 
```

在此更改之前，您发布的请求看起来像这样穿过电线：

![在此处输入图像描述](../Images/3283aede45ef611d90950287e53a561b.png)

更改后它使用一维数组，如下所示：

![在此处输入图像描述](../Images/bbbe0829b3d8291f8c93a1489e09ddc7.png)

# ios - 尝试替换场景时 Cocos2d 游戏崩溃

> ID：13395790
> 
> 赞同：1
> 
> 时间：2012-11-15T10:41:01.813
> 
> 标签：ios, cocos2d-iphone, msgsend

我正在尝试在游戏中的不同场景之间切换。**我先从**我的 GameLayer 切换到 Config 场景，然后使用以下代码切换回来，但游戏崩溃了：

```
-(void) backToGame
{
    [[CCDirector sharedDirector] replaceScene:[GameLayer scene]];
} 
```

我收到的日志：

```
thread #1: tid = 0x1c03, 0x350ebf78 libobjc.A.dylib`objc_msgSend + 16, stop reason = EXC_BAD_ACCESS (code=1, address=0xe0000008)
    frame #0: 0x350ebf78 libobjc.A.dylib`objc_msgSend + 16
    frame #1: 0x373352e6 CoreFoundation`CFRelease + 94
    frame #2: 0x373b1b36 CoreFoundation`__CFDictionaryStandardReleaseValue + 70
    frame #3: 0x374053bc CoreFoundation`__CFBasicHashDrain + 264
    frame #4: 0x3733539a CoreFoundation`CFRelease + 274
    frame #5: 0x350eee56 libobjc.A.dylib`objc_release + 38
(lldb) 
```

很抱歉，我无法从我的项目中附加更多代码，因为我真的不知道它来自哪里。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T06:48:54.990

试试这行代码。

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[GameLayer scene] withColor:ccWHITE]]; 
```

# doctrine-orm - ZF2 中 targetEntity="Y" 上的类重新声明错误

> ID：13395793
> 
> 赞同：1
> 
> 时间：2012-11-15T10:41:06.853
> 
> 标签：doctrine-orm, zend-framework2, autoload

我目前在我的代码库中面临一个奇怪的错误。[你可以在我的 github](https://github.com/manuakasam/webkennzahlen/blob/master/module/Kennzahlen/src/Kennzahlen/Controller/SteuerController.php#L9)上看到完整的 ZF2s 项目代码。<-有一个链接

我正在设置一个包含两个实体（X 和 Y）的模块。Entity_X 包含通过 (targetEntity="Entity_Y") 对 Entity_Y 的引用。错误持续存在于 FQCN 或仅 CN 本身。

```
Entity_X:
  id int PK,
  id_Y int FK,
  text varchar

Entity_Y:
  id int PK,
  text varchar 
```

首先加载 Entity_Y 然后加载 Entity_X 一切正常。这对于 StandardAutoloader 和 ClassMapAutoloader 都是如此。**但是**：在 ClassMapAutoloader 存在的情况下首先加载 Entity_X 时，我将看到以下错误：

```
Fatal error: Cannot redeclare class Kennzahlen\Entity\Referenzwert (Entity_Y)
in \module\Kennzahlen\src\Kennzahlen\Entity\Referenzwert.php 
on line 13 
```

首先使用 StandardAutoloader 加载 Entity_X 也没有任何问题。

**更新**

问题似乎在 ZF2s ClassMapAutoloader（或一般的自动加载机制）中。我的模块使用了 ClassMapAutoloader 并使用它我得到了上述错误。当删除 ClassMapAutoloader 并简单地使用 StandardAutoloader 时，错误消失得无影无踪。感谢@ocramius 和所有其他我为此烦恼的人:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:12:28.063

我正在编写一个失败的测试用例来尝试在[教义/通用](https://github.com/doctrine/common)中解决这个问题。问题似乎是静默自动加载器（如@Xerkus 所解释）与学说/通用本身不兼容。要解决这个问题，请使用`StandardAutoloader`ZF2（或 composer）中的 a 而不是使用`ClassMapAutoloader`. 这将解决问题，直到补丁准备好。

[更新：在教义/common#216](https://github.com/doctrine/common/pull/216)建议使用补丁

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T13:35:57.863

我对学说一无所知，但我浏览了源代码，我想我发现了问题：
[https](https://github.com/doctrine/common/blob/master/lib/Doctrine/Common/ClassLoader.php#L224)
://github.com/doctrine/common/blob/master/lib/Doctrine/Common/ClassLoader.php#L224 在这里，这段代码期望自动加载器将返回值评估为真，但这不是 spl 自动加载机制的要求，因此自动加载器可以返回 NULL，

要检查我是否正确，请在您的项目中的学说中替换第 224 行`Doctrine/Common/ClassLoader.php`

```
} else if ($loader[0]->{$loader[1]}($className)) { 
```

和

```
} else if ($loader[0]->{$loader[1]}($className) && class_exists($className, false)) { 
```

回答看看问题是否已解决，如果我是正确的 - 然后将错误报告给学说项目

# spring - 在声明式事务管理中，无论事务是提交还是回滚，如何在 Spring 中获取事务信息？

> ID：13395794
> 
> 赞同：18
> 
> 时间：2012-11-15T10:41:06.463
> 
> 标签：spring, hibernate, transactions

我使用以下声明性 Spring 事务：

```
<!-- Declare a transaction manager-->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" p:sessionFactory-ref="sessionFactory" />  
<!-- enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="transactionManager" mode="proxy" proxy-target-class="true"/> 
```

这是DAO：

```
@Repository
@Transactional(readOnly = true, propagation=Propagation.REQUIRES_NEW )
@Scope("prototype")
public class Xdao{

    public Object getValues(){
        .....
    }
}

@Service
@Scope("prototype")
public class Xservice{
private Xdao xdao;

    public Object getx(){
        xdao.getValues();//here I want to know whether the transaction started  is             
        //committed or rollback by aop. Is it possible somehow? I don't want to include that code 
        //in any service or dao layer. 
        .........
    }

    @Autowired
    public void setXdao(Xdao xdao){
        this.xdao=xdao;
    }
} 
```

我想了解事务状态，即事务已提交或回滚。我需要它来记录。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-16T23:22:24.147

如果事务在范围内，您可以`TransactionStatus`从`TransactionAspectSupport.currentTransactionStatus()`. 例如：

```
if (TransactionSynchronizationManager.isActualTransactionActive()) {
   TransactionStatus status = TransactionAspectSupport.currentTransactionStatus();
   ...
} 
```

但这在事务完成后将不起作用。

您可以添加`TransactionSynchronization`并实现`afterCompletion(int status)`以记录状态或将其存储在`ThreadLocal`变量中以供以后使用。

```
public class LogTransactionSynchronization extends TransactionSynchronizationAdapter {
   @Override
   public afterCompletion(int status) {
      // log the status or store it for later usage
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T10:58:25.040

将以下内容添加到您的 log4j.properties 将启用事务状态日志记录，

```
log4j.logger.org.hibernate.transaction=DEBUG,R
log4j.logger.org.springframework.transaction=DEBUG,R 
```

# php - .htaccess 使用子目录文件

> ID：13395797
> 
> 赞同：0
> 
> 时间：2012-11-15T10:41:15.353
> 
> 标签：php, .htaccess

大家好，我纯粹是正确的.htaccess 文件的新手。问题是，

我的基本目录是`http://localhost/mvctask/`，我想使用子目录的文件`sub`。例如：

`http://localhost/mvctask/`将 `http://localhost/mvctask/sub/login.php`改为使用`http://localhost/mvctask/login.php`.

虽然 url 与`http://localhost/mvctask/`. 我需要它在不使用重写规则的情况下完成。请任何帮助。

**编辑：** 我在编辑中将 index.php 更改为 login.php。只是因为可以选择使用 DirectoryIndex mysubdir/index.php 来更改 index 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:15:01.093

我发现同样`DirectoryIndex`适用于所有文件的解决方案。虽然以前我认为它仅适用于索引文件（我可能会因为它的名称而感到困惑：P）。

`DirectoryIndex mysubdir/login.php`

# node.js - socket.io 从 mongojs 查询返回 [object Object]

> ID：13395799
> 
> 赞同：0
> 
> 时间：2012-11-15T10:41:21.687
> 
> 标签：node.js, mongodb, socket.io, mongojs

我已经开始使用 mongojs 查看 socket.io 和一些 MongoDB。

摘要：客户端不通过 socket.io 向服务器发送数据，因此 mongojs 无需查找任何内容，只返回集合中的第一个文档，我希望它返回 null 或 false，以便我可以采取适当的措施。任何帮助表示赞赏，对 node.js 和 this 来说非常新。

我需要一个登录功能，但是当我单击我登录的链接时，它应该从客户端运行：

```
 <script>
        var socket = io.connect('http://localhost:13163');

        socket.on('connect', function () {
            socket.emit(console.log('Client connected'));
        });
        socket.on('queryResponse', function (res, err) {
            if (res == "[object Object]") {
                console.log('EMPTY OBJ SERVER: ' + res + ' ' + err);
            }
            else{
                console.log('IF NOT EXEC' + res[0].email)
            }
        });
        //socket.send('client hello');
        //pageload
        $(function () {
            $('#login').click(function () {
                var username = $('#username').val();
                var password = $('#password').val();
                if (!username || !password) {
                    event.preventDefault();
                    console.log('Need data in both fields');
                }
                else {
                    event.preventDefault();
                    socket.emit('querydata', function (username, password) {
                        console.log("CLIENT: Querying server for data...");
                    });
                }
            });
        });
    </script> 
```

这应该将用户名和密码发送到服务器，然后服务器应该运行：

```
socket.on('querydata', function (user_username, user_password) {
    db.users.find({email: user_username, pass: user_password}, function (err, docs) {
        if (err || !docs) {
            socket.emit('queryResponse', 'No users found', err);
            console.log('if - ' + docs[0].email);
        }
        else {
            socket.emit('queryResponse', docs);
            console.log('else - ' + docs[0].email + 'user_password' + user_password + 'user_username' + user_username);
        }
    });
}); 
```

奇怪的是，它只找到集合的第一个文档。我刚刚发现 'user_username' 和 'user_password' 重载是未定义的，这只是我这边的一些迟钝的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:00:40.463

你这样做是不对的。乍一看，我发现您的代码中有几个错误。第一个在这里

```
if (res == "[object Object]") 
```

您无法以这种方式控制响应内容。您可能会`[object Object]`在 javascript 调试器中看到字符串。您必须根据服务器响应作为 json 数据进行此比较。如果它会给你带来麻烦，你可以使用 JSON.parse(response)。

第二个，您实际上并没有将用户名和密码发送到服务器。你必须使用

```
socket.emit('querydata', { username: username, password: password }, function (data) {
   // Server Ack here
} 
```

代替

```
socket.emit('querydata', function (username, password) ... 
```

试试这个

```
socket.emit('queryResponse', {err: 'No User Found'}); 
```

代替

```
socket.emit('queryResponse', 'No User Found', err); 
```

并在您的客户中检查响应为

```
if(response.hasOwnProperty('err')) / /Handle error 
```

在你的客户端`queryResponse`监听器中，试试这个；

```
socket.on('queryResponse', function (res) {
        if(res.hasOwnProperty('err')) / Handle Error
        else // You have an array in `res`
    }); 
```

# model - 而不是“var p = new Product(myObject);” 做“var p = new Product();” 然后通过使用公共方法以某种方式用 myObject 填充它？猫鼬

> ID：13395800
> 
> 赞同：0
> 
> 时间：2012-11-15T10:41:23.013
> 
> 标签：model, mongoose

我知道可以这样做：

```
var p = new Product(myObject); 
```

并且`p`具有 的属性`myObject`，但是如果我已经完成了：

```
var p = new Product(); 
```

我如何将所有数据`myObject`放入`p`？

我试过了，但我知道这很糟糕，就像受保护/私有方法一样，但也没有用：

```
p._doc = p._buildDoc(myObject); 
```

我已经完成并且它有效，**但仍在使用受保护/私有财产**：

```
p._doc = modelInstance._doc; 
```

为什么？我需要从一个文档复制到另一个文档，但两者都在不同的连接上。我不能使用第一种方法，因为它的工作方式，它会不那么灵活。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:07:43.337

使用[`extend`](http://documentcloud.github.com/underscore/#extend)下划线库的方法（或方法内部使用的相同技术）来应用 to 的`myObject`属性`p`：

```
_.extend(p, myObject); 
```

# javascript - Javascript：从动态 Javascript 表和输入框中获取数值然后进行计算

> ID：13395807
> 
> 赞同：1
> 
> 时间：2012-11-15T10:41:44.597
> 
> 标签：javascript, jquery, html-table

这是一个正在进行的项目。我需要创建一个计算，该计算将从表中“关闭列”中的“总计”行中获取数字，然后从输入框中定义的起始余额中减去该数字。当单击提交按钮时，此计算的结果需要显示在警告框中。

这有点超出我的范围，如果有人能指出我正确的方向，我将不胜感激。

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
   <h1><em>EXPENSES CALCULATOR</em></h1>
   <link rel="stylesheet" type="text/css" href="tt.css"/>
</head>
<body>
   <p id="balance">Starting balance (£)<input type="number"></p>
   <p>
      <input type="button" id="addNewRow" value="Add new row">
      <input type="button" onClick="window.print()" value="Print your purchases"/>
   </p>
   <table id="breakdowntable">
   <tr>
        <th>Payment type</th>
        <th>Off</th>
        <th>To come off</th>
        <th>Total</th>
   </tr>
   <tr id="card">
       <th>Card Payment</th>
       <td>0</td>
       <td>0</td>
       <td id="cardtotal">0</td>
   </tr>
   <tr id="cash">
       <th>Cash Payment</th>
       <td>0</td>
       <td>0</td>
       <td id="cashtotal">0</td>
   </tr>
   <tr id="other">
       <th>Other Payment</th>
       <td>0</td>
       <td>0</td>
       <td id="othertotal">0</td>
   </tr>
   <tr id="total">
       <th>Total</th>
       <td>0</td>
       <td>0</td>
       <td>0</td>
   </tr>
   </table>
   <table id="purchases"> </table>
   <p><input type="Submit" id="submit" onclick='alert(money_to_number())'> </p>
   <script type="text/javascript" src="tt.js"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js">   </script>
</body>
</html> 
```

**JavaScript：**

```
var doc = document;
function calculateAmount() {
var purchases = doc.getElementById('purchases');
var purchasesRows = purchases.rows;
var typeValue = {'CP' : [0,0], 'CA' : [0,0], 'OP' : [0,0]};
for (var i = 0, purchasesRowsLength = purchasesRows.length, pytType, inputs, isItOffInput, isItOff; i < purchasesRowsLength; ++i) {
    pytType = purchasesRows[i].getElementsByTagName('SELECT')[0];
    inputs = purchasesRows[i].getElementsByTagName('INPUT');
    isItOffInput = inputs[0];
    isItOff = inputs[inputs.length - 1].checked ? 0 : 1;
    typeValue[pytType.value][isItOff] += isItOffInput.value - 0;
}

var total = [0, 0];

var cardCells = doc.getElementById('card').cells;
cardCells[1].innerHTML = typeValue['CP'][0];
total[0] += typeValue['CP'][0];
cardCells[2].innerHTML = typeValue['CP'][1];
total[1] += typeValue['CP'][1];
cardCells[3].innerHTML = typeValue['CP'][0] + typeValue['CP'][1];

var cashCells = doc.getElementById('cash').cells;
cashCells[1].innerHTML = typeValue['CA'][0];
total[0] += typeValue['CA'][0];
cashCells[2].innerHTML = typeValue['CA'][1];
total[1] += typeValue['CA'][1];
cashCells[3].innerHTML = typeValue['CA'][0] + typeValue['CA'][1];

var otherCells = doc.getElementById('other').cells;
otherCells[1].innerHTML = typeValue['OP'][0];
total[0] += typeValue['OP'][0];
otherCells[2].innerHTML = typeValue['OP'][1];
total[1] += typeValue['OP'][1];
otherCells[3].innerHTML = typeValue['OP'][0] + typeValue['OP'][1];

var totalCells = doc.getElementById('total').cells;
totalCells[1].innerHTML = total[0];
totalCells[2].innerHTML = total[1];
totalCells[3].innerHTML = total[0] + total[1];
}

function addNewRow() {
var purchases = doc.getElementById('purchases');
var row = purchases.insertRow(purchases.rows.length);
var pytTypeCell = row.insertCell(0);
var type = [['CP', 'Paid by Card £'], ['CA', 'Paid with Cash £'], ['OP', 'Other Payment     type £']];
var pytType = doc.createElement('SELECT');
for (var i = 0, typeLength = type.length, option; i < typeLength; ++i) {
    option = doc.createElement('OPTION');
    option.value = type[i][0];
    option.innerHTML = type[i][1];
    pytType.appendChild(option);

}

pytType.onchange = calculateAmount;
var pytTypeLabel = doc.createElement('LABEL');
pytTypeLabel.innerHTML = 'Type';
pytTypeLabel.appendChild(pytType);
pytTypeCell.appendChild(pytTypeLabel);
var isItOffInput = doc.createElement('INPUT');
isItOffInput.type = 'number';
isItOffInput.onkeyup = calculateAmount;
pytTypeCell.appendChild(isItOffInput);

var descriptInputCell = row.insertCell(1);
var descriptInput = doc.createElement('INPUT');
descriptInput.type = 'number';
var descriptLabel = doc.createElement('LABEL');
descriptLabel.innerHTML = 'Description';
descriptLabel.appendChild(descriptInput);
descriptInputCell.appendChild(descriptLabel);

var dateInputCell = row.insertCell(2);
var dateInput = doc.createElement('INPUT');
dateInput.type = 'date';
var dateLabel = doc.createElement('LABEL');
dateLabel.innerHTML = 'Payment Date';
dateLabel.appendChild(dateInput);
dateInputCell.appendChild(dateLabel);

var isItOffCheckBoxCell = row.insertCell(3);
var isItOffCheckBox = doc.createElement('INPUT');
isItOffCheckBox.type = 'checkbox';
isItOffCheckBox.onclick = calculateAmount;
var isItOffLabel = doc.createElement('LABEL');
isItOffLabel.appendChild(isItOffCheckBox);
isItOffLabel.appendChild(document.createTextNode('Is it Off?'));
isItOffCheckBoxCell.appendChild(isItOffLabel);

}
doc.getElementById('addNewRow').onclick = addNewRow;
window.onload = function() {
addNewRow();
}; 
```

**这是在 jsFiddle 中：http:** [//jsfiddle.net/jfBAJ/](http://jsfiddle.net/jfBAJ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T00:00:39.213

您需要为稍后要查找的元素提供 ID。我给你的起始余额输入了id“starting_balance”，我给你的总TD输入了“grand_total”的id，然后在提交时写了以下内容：

```
document.getElementById("submit").onclick = onSubmit
function onSubmit(){
    var starting = document.getElementById("starting_balance").value;
    var grandTotal =  document.getElementById("grand_total").innerHTML;
    var finalBalance =parseFloat(grandTotal||0) + parseFloat(starting||0);
    alert(finalBalance);
} 
```

这会提醒新的总计 + 起始余额。

# php - 检查购物车项目是否具有相同的属性

> ID：13395808
> 
> 赞同：0
> 
> 时间：2012-11-15T10:41:46.633
> 
> 标签：php, codeigniter

我正在使用 codeigniter 购物车库，但现在客户希望用户一次只能从一个类别中结帐，因为他们的支付网关存在一些问题。当前，该站点对所有类别都有一个单一的结帐逻辑。当用户将商品添加到购物车时，我有一个这样的数组

```
Array
(
    [d8df18561040f3d9bd9868f5c5aaa7c2] => Array
        (
            [rowid] => d8df18561040f3d9bd9868f5c5aaa7c2
            [id] => MYU_SC1
            [qty] => 1
            [price] => 500
            [name] => WAEC Scratch Card
            [service_image] => assets/img/waec.jpg
            [service_category] => scratch_cards
            [subtotal] => 500
        )

    [99483fe03da62c9e98ce71232998f447] => Array
        (
            [rowid] => 99483fe03da62c9e98ce71232998f447
            [options] => Array
                (
                    [size] => 36
                    [colour] => N/A
                )

            [id] => 80433426a546064bf5f8d09a6e7fdabc
            [qty] => 1
            [price] => 5000
            [name] => Green Vee Jeans
            [service_image] => http://localhost/myunivacity/uploads/apparels/IMG_0425.JPG
            [service_category] => apparels
            [subtotal] => 5000
        )

) 
```

我如何检查购物车中的商品是否具有相同的“service_category”元素值？谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:45:44.507

你可以用这样的东西：

```
<?php 

$categories = array();

foreach($this->cart->contents() as $cart_item) {
    if(!isSet($categories[$cart_item["service_category"]]) {
        $categories[$cart_item["service_category"]] = 1;        
    }
    else {
        $categories[$cart_item["service_category"]]++;
    }
}

print_r($categories);

?> 
```

这用每个类别的计数填充数组

# objective-c - iOS如何使iPhone指南针标题围绕动画移动？

> ID：13395809
> 
> 赞同：0
> 
> 时间：2012-11-15T10:41:46.477
> 
> 标签：objective-c, ios, core-location, cllocation

我有一个圆 CGRectMake(0.0, 0.0, 100.0, 100.0) ，cornerRadius = 100;

我想围绕该圆圈移动图像。图像应围绕圆圈移动并指向北方。换句话说，它是一个指南针，只是航向不旋转，而是绕着圆圈移动。我还需要动画像指南针一样向前和向后移动。

有没有人实施过这样的事情或有任何建议或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:45:26.263

而不是试图找出它的坐标，我只需要一个与整个指南针大小相同但除了位于顶部边缘的指针之外完全透明的图像。

然后将带有此图像的 UIImageView 放在您的指南针上，然后围绕其中心点旋转图像。

这样指针将始终跟随一个圆圈，并且更容易指向北方，因为您只处理旋转角度而不是坐标。

用于计算圆的 x,y 坐标...

*   你知道圆的半径=半径。
*   你知道旋转角度 = theta。（角度始终以 rads 2Pi rads = 一整圈为单位）。

x 坐标 = 半径 * cos(theta)。

y 坐标 = 半径 * sin(theta)。

那应该这样做。

您可能必须将 RAD 转换为度数。

# android - R.java 没有使用 Intellij Idea 12 生成

> ID：13395810
> 
> 赞同：11
> 
> 时间：2012-11-15T10:41:50.470
> 
> 标签：android, intellij-idea

我是 android 开发的新手，我正在使用 IntelliJ Idea 12。一切都设置正确，但我面临的一个问题是我的 gen 文件夹中的 R.java 文件没有应该存在的代码。我认为这段代码应该是自动生成的，但它不存在。以下是有关我的项目结构的链接：

我不能发布两个以上的链接，所以这里是画廊的链接：http: [//postimage.org/gallery/19189wei/](http://postimage.org/gallery/19189wei/)

它包含我的 string.xml 、 main.xml 、 R.java 、 HaikuDisplay.java 所以我想知道问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:27:39.207

我不会费心查看 R 文件——我的文件也是空的，没关系。尝试输入 R. 看看有什么可用的。如果你没有设置你的东西，请确保你没有 Importing Android.R in your imports - 这将覆盖你的 R 并使用 SDK 目录中的那个。希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T07:37:17.067

我对想法 12 有同样的问题（想法 11 中没有这样的问题）。要修复它，您可能需要检查以下内容：

*   打开 Module Settings(F4)/ProjectName/Module SDK 设置为 Android [版本]
*   文件夹 'gen' 存在于项目根目录中并设置为 src （实际上它可以并且将会是空的，但我无法弄清楚为什么没有它它就无法工作。）
*   更新 AndroidManifest.xml（只需在某处添加空间并保存）。
*   如果想法仍然找不到您的任何 id 或字符串 - 尝试一个一个打开它，并用空格更新:)

经过这个想法会发现，布局文件夹中有很多xml，并且会知道所有的id、xml和字符串。

但是 R.java 文件仍然是空的，gen 文件夹将不包含空的 BuildConfig.java 文件，并且不会有其他 R.java 文件包含所有这些常量。

它看起来像想法 12 而不是想法 11 将其生成的 R.java 常量存储在项目文件夹 (.idea) 中，如果您使用“pom.xml”作为项目描述 - 您将需要在重新加载后再次检查所有这些点pom.xml 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T12:41:05.357

检查您的 AndroidManifest.xml 文件。想法 12 在 下放两个元素，只能有一个。删除任何你想要的，重建。

此外，您可以检查清单元素中的包值。确保它与您的项目相对应。Idea 12 为我的项目生成了以下内容，其中 com.awesome.skynetclient 作为根包：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.exeample.SkynetClient"
      android:versionCode="1"
      android:versionName="1.0"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T20:25:08.070

`import android.R;`从文件顶部删除自动添加对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-17T09:08:11.920

我对 Android Maven 项目有同样的问题。我的解决方案是查看项目历史记录，发现我的 Manifest.xml 文件以某种方式被修改，并且文件的路径也被更改，但上帝知道我没有进行这些更改。所以我只是恢复这些更改并重建项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-13T02:43:39.453

我也发现了这个，可能是因为 IDE 想防止你错误地编辑 R.java 文件。

# vb.net - html 中的 VCS 文件描述

> ID：13395813
> 
> 赞同：3
> 
> 时间：2012-11-15T10:41:51.933
> 
> 标签：vb.net, outlook, vcalendar

我们使用以下代码创建了一个 vcs 文件。

```
 Dim mstream As New MemoryStream
            Dim writer As New StreamWriter(mstream)
            writer.AutoFlush = True

            GetvCalendarText(writer)
            Response.Clear()
            Response.AppendHeader("Content-Disposition", "attachment; filename=Event" &              eventID & ".vcs")
            Response.AppendHeader("Content-Length", mstream.Length.ToString)
            Response.ContentType = "application/download"
            Response.BinaryWrite(mstream.ToArray)
            Response.End() 
```

*   **GetCalendarText 方法**

    ```
     Dim body As String = <b>New event</b>
        writer.WriteLine("BEGIN:VCALENDAR{0}", vbCrLf)
        writer.WriteLine("VERSION:1.0{0}", vbCrLf)
        writer.WriteLine("BEGIN:VEVENT{0}", vbCrLf)
        writer.WriteLine("DTStart:{0}{1}", DateTime.Now.ToString("yyyyMMddTHHmm00Z"), vbCrLf)
        writer.WriteLine("DTEnd:{0}{1}", DateTime.Now.AddHours(2).ToString("yyyyMMddTHHmm00Z"), vbCrLf)
        writer.WriteLine("DESCRIPTION:{0}", body)
        writer.WriteLine("X-ALT-DESC;FMTTYPE=text/html:{0}", body)
        writer.WriteLine("SUMMARY;ENCODING=QUOTED-PRINTABLE:{0}{1}", Test event, vbCrLf)
        writer.WriteLine("PRIORITY:3{0}", vbCrLf)
        writer.WriteLine("END:VEVENT{0}", vbCrLf)
        writer.WriteLine("END:VCALENDAR{0}", vbCrLf) 
    ```

它正在生成 vcs 文件，并在打开文件时在 Outlook 2010 中打开主题、开始时间和结束时间以及正确的值。

我们给出的描述是 html 格式，但它显示为纯文本。

那么我们如何显示html描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:57:11.967

我试图以 vCalendar 格式添加 html 描述，但找不到任何合适的方法来执行此操作。

最后将我们的 vCalendar 格式更改为 iCalendar，它允许显示 html 描述。

我们删除了描述行 `writer.WriteLine("DESCRIPTION:{0}", body)` ，即现在它显示了 html 格式的描述。

以下部分也发生了变化。

```
Response.AppendHeader("Content-Disposition", "attachment; filename=Event" & eventID & ".ics") 
```

和

```
writer.WriteLine("VERSION:2.0{0}", vbCrLf) 
```

# inheritance - 原则 2 继承：GET 方法在抽象子类中不返回数据

> ID：13395818
> 
> 赞同：1
> 
> 时间：2012-11-15T10:42:07.363
> 
> 标签：inheritance, symfony, doctrine-orm, abstract-class

我正在使用框架 Symfony2 开发一个 Web 应用程序，它使用 Doctrine 2 作为 ORM。

我有一个名为“Pregunta”的抽象类，有五个子类。其中之一是一个名为“Seleccion”的抽象类，它有两个子类：“SelUnica”和“SelMultiple”。

如果我创建“SelUnica”或“SelMultiple”的实例，它们的 GET 方法可以正常工作，但如果我尝试获取“Seleccion”类的属性，该方法不会返回任何数据，尽管在数据库中已成功保存。这只发生在属性上，因为“Seleccion”类有关系并且 GET 可以正常工作。

SET 方法也可以正常工作，如果我在 GET 方法中放置一个“回声”，它不会显示任何值。

任何想法？

班级代码：

[http://pastebin.com/XurWLsst](http://pastebin.com/XurWLsst)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T06:59:36.743

我认为您需要使用`@MappedSuperclass`注释标记父抽象类。请参阅[http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html](http://docs.doctrine-project.org/en/latest/reference/inheritance-mapping.html)。

# java - java arraylist：与新的arraylist相同的值

> ID：13395823
> 
> 赞同：-2
> 
> 时间：2012-11-15T10:42:33.463
> 
> 标签：java, arraylist

```
public static void rechnung(List<String> array) {
    for (int i = 0; i < array.size(); i++) {
        for (int j = 0; j < array.size(); j++) {
            if (i != j) {
                System.out.println(array.get(i)
                        + " gleich "
                        + array.get(j)
                        + " "
                        + (array.get(i).substring(0, 9).equals(array.get(j)
                                .substring(0, 9))));
            }
        }
    }
} 
```

我的意图是将具有相同日期的值从一个列表放入一个新列表。例如，最后我有三个新列表。

清单内容：

03.07.2007 00001.tif
03.07.2007 00002.tif
18.02.2008 00003.tif
18.02.2008 00004.tif
18.02.2008 00005.tif
11.03.2009 0002004.tif
101.003.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:58:07.170

怎么样`List<String> copiedList = (List<String>) array.clone();`？或者`List<String copiedList = new ArrayList<String>(array);`？

注意：我强烈建议不要将变量名`array`用于`List<>`. Arrays[] 是数组，列表是列表。如果严格考虑，没有什么共同点.. :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:59:54.070

`ArrayList`有一个可以接受另一个列表的构造函数。

```
List<String> newList = new ArrayList<String>(oldList); 
```

# javascript - Javascript函数的复杂方式

> ID：13395824
> 
> 赞同：0
> 
> 时间：2012-11-15T10:42:41.073
> 
> 标签：javascript

我观察到一种不同的（对我来说不同的）编写javascript或jquery函数的方法，你们请指导我这个方法的工作。

```
(function () 
{
//some statements of javascript are sitting here
//some statements of javascript are sitting here
//some statements of javascript are sitting here
//some statements of javascript are sitting here
//some statements of javascript are sitting here
}()); 
```

真的我不明白`(function(){}());`。

没有人在调用它，但它被正确调用。

如果你们知道任何教程，关心它，然后告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:45:30.253

那是一个[立即调用的函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。换句话说，定义时执行的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:46:53.897

声明一个没有名称的函数通常用于将该函数分配给一个变量。一个有用的技巧，它允许您传递整个函数并稍后调用它。在这种情况下，它没有被分配给任何东西，但是大括号后面的额外括号组有效地立即调用了该函数。

# objective-c - 原型 CellView 中的 TableView 没有反应

> ID：13395833
> 
> 赞同：0
> 
> 时间：2012-11-15T10:43:13.383
> 
> 标签：objective-c, ios, uitableview

我有问题。。不明白为什么。。

我有一个只有一个 UIViewController 的故事板，它有一个 UITableView （ Outlet ）。UITableView 有一个原型单元（ Outlet ）和他的自定义类。这个自定义类/这个原型单元有一个 UITableView ( Outlet ) 但是最后一个 tableView 没有出现，没有反应没有做任何事情......不明白为什么，IB中的链接是好的......

这是我的项目： [https ://www.dropbox.com/sh/ouq6syndy489xgy/c5QbMsLDi7](https://www.dropbox.com/sh/ouq6syndy489xgy/c5QbMsLDi7)

这是控制没有反应的 UITableView 的代码：

```
#import "Cell.h"

@implementation Cell
@synthesize tableViewForCell;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        [self.contentView.layer setBorderColor:[UIColor grayColor].CGColor];
        [self.contentView.layer setBorderWidth:1.0f];
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"hours"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"hours"];
    }
    return cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 30;
    //return  CGSizeMake(rect.size.width/X, rect.size.height/5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:22:15.647

我刚刚下载了你的项目并检查了。我不能简单地回答你的问题。你做错了。您有一个带有原型单元格的表格视图，并且在此原型单元格中添加了另一个 tableview ，它不是单元格。

如果您需要自定义表格视图的单元格，请按照本教程进行操作，

[http://www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

希望这可以帮助。

# java - 点击 p:commandLink 打开 p:confirmDialog

> ID：13395844
> 
> 赞同：0
> 
> 时间：2012-11-15T10:43:45.907
> 
> 标签：java, jsf, dialog, primefaces, commandlink

我试图在单击 PrimeFace CommandLink 时打开 PrimeFace ConfirmDialog。但是当点击链接时，对话框会打开一会儿但立即消失，我猜页面正在被提交。这是代码：

```
<p:commandLink value="Delete" onclick="confirmation.show()"  />

<p:confirmDialog message="Are you sure, you want to delete ?"  header="Initiating deleting process"  widgetVar="confirmation">  
    <p:commandButton value="Yes Sure"  onclick="confirmation.hide()"  actionListener="#{adminCtrl.deleteUserById}" update="userData" >
        <f:attribute name="delete" value="#{user.userId}" />
    </p:commandButton>  
    <p:commandButton value="Not Yet" onclick="confirmation.hide()" type="button" />   
</p:confirmDialog> 
```

如何使对话框以这种方式保持打开状态？

在[PrimeFace ShowCase](http://www.primefaces.org/showcase/ui/confirmDialog.jsf)中，该示例处理 CommandButton 并且可以正常工作，但我的要求是使用 CommandLink。

是否可以？任何指针都会对我很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:31:13.367

采用

```
<p:commandLink value="Delete" onclick="confirmation.show();return false;"  /> 
```

或者

```
<p:commandLink value="Delete" onclick="confirmation.show()" type="button"/> 
```

这样你就可以避免提交

# iphone - Facebook 和 Twitter 与 iOS 和 Android 的 Unity 集成

> ID：13395846
> 
> 赞同：-1
> 
> 时间：2012-11-15T10:43:54.690
> 
> 标签：iphone, ios, facebook, twitter, unity3d

我是 Unity Development 的新手，正在开发一个应用程序，我想在 Facebook 和 Twitter 上的用户墙上分享带有文本的图像。我用谷歌搜索并得到几个链接说购买插件[Prime31](http://www.prime31.com/unity/)，我对关注有点困惑。

1.  如何在不购买任何外部插件的情况下在 Unity 中集成 Facebook 和 Twitter，就像我们在 xcode 中可以轻松做到的那样。
2.  如果有可用的免费插件，教程和任何帮助材料的链接是什么，以便我可以轻松地连接我的应用程序。
3.  我们可以在没有插件的情况下完成这项任务，就像在 xcode 中一样，我们只需要 Facebook SDK 和 twitter 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T03:58:02.630

你应该试试[UniShare](https://www.assetstore.unity3d.com/#/search/unishare)，一个用于 unity3d 的共享工具包，支持 iOS、Android，包括 twitter、facebook、linkedin 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T17:00:47.270

[让我们在 Unity 中发布推文](https://www.assetstore.unity3d.com/en/#!/content/536)

还没有测试......但我会发布我的发现的更新。

[Facebook Unity SDK](https://developers.facebook.com/docs/unity/downloads/?campaign_id=282184128580929&placement=SDK_list)

它是 Facebook 自己发布的官方 SDK。[这是一个教程](https://developers.facebook.com/docs/games/unity/unity-tutorial)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:01:26.560

你检查[过 ShareKit](https://github.com/ShareKit/ShareKit)吗？文档在[这里](https://github.com/ShareKit/ShareKit/wiki)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T18:12:01.227

你试过SocialAuth吗

[https://code.google.com/p/socialauth-android/](https://code.google.com/p/socialauth-android/)

您可以整合 Facebook , twitter , linkedin , myspace

# jquery - 平滑滚动、固定导航和 iPad 2 的问题

> ID：13395853
> 
> 赞同：2
> 
> 时间：2012-11-15T10:44:19.287
> 
> 标签：jquery, css, css-position, smooth-scrolling

我正在为朋友开发一个单页婚礼网站。单击导航点时，它使用下面的 jQuery 向页面添加“平滑滚动”效果。

我将为 iPad 和 iPhone 添加一个自适应布局 - 但他们渴望尽快推出它，我需要继续邀请！

无论如何，我在 iPad 上遇到了奇怪的行为 - 因为平滑滚动仅适用于您单击的第一个链接 - 然后没有任何 nab 链接触发该行为/似乎可点击。

我假设这是固定导航的问题 - 但是它可以在我测试过的所有其他（mac）浏览器和我的 iPhone 上运行。

网站在这里

[http://www.elandsebswedding.co.uk/main-page/](http://www.elandsebswedding.co.uk/main-page/)

jQuery在这里：

```
$("nav ul li a, #logo a").click(function(event){
    //prevent the default action for the click event
    event.preventDefault();
    var full_url = this.href;

    var parts = full_url.split("#");
    var trgt = parts[1];

    var target_offset = $("#"+trgt).offset();
    var target_top = target_offset.top;

    $('html, body').animate({scrollTop:target_top -130}, 500);

}); 
```

任何建议/解决方法将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T16:06:42.480

这是移动 Safari 的问题。

解决它的一个hacky方法是使用动画回调将一些东西附加到DOM。

```
$('html, body').animate({scrollTop:target_top -130}, 500, function(){
    $('body').append('<div id="device-dummy" style="height: 1px;"></div>');
}); 
```

你可能会发现这个 jQuery 插件很有用 [https://github.com/jamesmusgrave/jQuery-One-Page-Nav](https://github.com/jamesmusgrave/jQuery-One-Page-Nav)

# git - git 的 gerrit 有什么可以颠覆的吗？

> ID：13395854
> 
> 赞同：27
> 
> 时间：2012-11-15T10:44:29.123
> 
> 标签：git, svn, gerrit

Gerrit 很有用，但仅适用于 git。我想设置类似的东西，但是为了颠覆。有没有做这个工作的软件？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-15T01:55:13.177

您可以尝试使用[phabricator](http://phabricator.org/)。它可以用于 SVN 和 Git。它做得更多，但确实提供了代码审查（之前）和代码审计（之后）。

我自己一直在评估 Gerrit、Reviewboard 和 Phabricator，但还没有决定走哪条路。

快速总结

## 格里特

1.  例如，被 Android 使用，所以还不错

2.  仅支持 Git

3.  评论是通过推送到一个特殊的分支来创建的

4.  两种投票方式，验证（例如通过 Jenkins）和代码审查

5.  审核后更改可以直接由 Gerrit 推送到 master 分支

6.  全面的访问控制机制来保护存储库

7.  UI 不那么吸引人但速度很快，一次只显示一个文件

8.  由于它当时只显示一个文件，因此在您查看过的文件旁边有一个不错的复选框

9.  能够触发 Jenkins 验证补丁

10.  用 Java (.war) 编写

11.  非常积极的发展

## 审查委员会

1.  例如被 Apache 使用，所以还不错

2.  支持任何现代 SCM

3.  提交前和提交后评论是使用 Python 脚本创建的

4.  在预提交审查之后，您可以将代码提交到存储库，但这很难验证并且可以通过

5.  存储库没有访问控制机制，因为它不受其控制

6.  用户界面很好，但加载差异时非常慢。在我的测试系统上加载文件差异可能需要相当长的时间，而 Gerrit 和 Phabricator 的速度要快得多

7.  用 Python 编写

8.  积极发展

## 制造者

1.  例如被 Facebook 和 Dropbox 使用，所以还不错

2.  支持 Git、Subversion 和 Mercurial

3.  使用 php 脚本进行预提交审查

4.  可以通过制定将触发审计的规则来创建提交后审查（审计）（很好！）

5.  更像是一个完整的生态系统，包括错误跟踪器、repo 浏览器、wiki 等

6.  他们称之为轻松，重任。这意味着您需要忍受诸如“Clowncopterize”或“Avast”之类的术语，而不是“OK”，并且您可以“Out of Site”关闭任务

7.  用php写的

8.  非常积极的发展

我的总体印象是 Gerrit 受到新开源项目的青睐，Reviewboard 受到旧项目的青睐，Phabricator 受到新初创公司的青睐。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T12:40:00.037

哪一部分：代码审查或托管或两者兼而有之？

对于代码审查，[审查委员会](http://www.reviewboard.org/)运作良好。它并不完美，但我已经在几个项目中使用它取得了巨大的成功。不过，它根本不涉及托管或访问控制。

对于托管，您可以尝试[使用 usvn](http://www.usvn.info/)、[SVNManager](http://svnmanager.org/)或[svn-access-manager](http://svn-access-mana.sourceforge.net/)。我没有真正使用过任何这些工具，所以我不能真正评论它们的用处。

# asp.net - asp.net 如何只允许一个域用户

> ID：13395856
> 
> 赞同：0
> 
> 时间：2012-11-15T10:44:34.280
> 
> 标签：asp.net, authentication, iis-7, web-config

我在互联网上寻找过这个问题，但没有具体说明如何解决我的问题。
它是一个托管在 IIS7 上的非常小的 Web 应用程序。在我的 web.config 我有这个代码：

```
<system.web>
      <authorization>
        <allow users="WORKGROUP\SOMEONE"/>
        <deny users="?"/>
    </authorization>
    <roleManager enabled="true" />
    <compilation debug="true" targetFramework="4.0" />
</system.web> 
```

当我访问我的网站时，它给了我以下错误

```
401 - Unauthorized: Access is denied due to invalid credentials. 
```

我只想验证一个域用户，并且我认为我已经正确使用了所有内容。请指导我我在这里缺少什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:26:15.847

您需要安装 Windows 身份验证并在 IIS 网站上启用它。

有关如何在 Windows 7 和 Windows Server 2008R2 上安装和配置 Windows 身份验证的详细信息，请参阅此帖子：[http ://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication](http://www.iis.net/configreference/system.webserver/security/authentication/windowsauthentication)

# java - 从嵌入 Hibernate 的 H2 加载 BLOB 表

> ID：13395858
> 
> 赞同：1
> 
> 时间：2012-11-15T10:44:36.873
> 
> 标签：java, hibernate, blob, h2

我有一个应用程序必须根据环境与 Oracle 或嵌入式 H2 数据库一起运行。到目前为止，我使用的是 MySQL 数据库而不是嵌入式 H2 数据库，但决定迁移。

我使用 Hibernate 3.3.1GA（并且受到限制，因此无法更新）。使用 Oracle 和 MySQL 一切正常，但是当我尝试使用 H2 数据库时，它一直挂起。问题似乎是带有 BLOB（序列化 Java 对象）的列。即使表是空的，执行也会挂起。

SLF4J 输出（日志级别全部）：

```
TableMetadata.java:org.hibernate.tool.hbm2ddl.TableMetadata:<init>:62 INFO  table found: DATABASE.PUBLIC.JAVA_OBJECTS
org.hibernate.tool.hbm2ddl.TableMetadata:<init>:63 INFO  columns: [id, last_update, markdeleted, class, object]
org.hibernate.connection.DriverManagerConnectionProvider:closeConnection:152 TRACE returning connection to pool, pool size: 1 
```

此时程序似乎挂起。早期的日志输出看起来很正常，当这个表没有被使用（从 hibernate.cfg.xml 中删除）时，程序启动得很好。

hibernate.cfg.xml（摘录）

```
<property name="hibernate.connection.driver_class">org.h2.Driver</property>
<property name="hibernate.connection.url">jdbc:h2:file:database</property>
<property name="hibernate.connection.username">sa</property>
<property name="hibernate.connection.password"></property>
<property name="hibernate.default_schema">PUBLIC</property>
<property name="hibernate.dialect">org.hibernate.dialect.H2Dialect</property>
<property name="connection.pool_size">1</property>
<property name="current_session_context_class">thread</property>
<property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property> 
```

表的创建字符串：

```
CREATE TABLE java_objects (
  id int(11) NOT NULL AUTO_INCREMENT,
  class varchar(255) NOT NULL,
  object blob NOT NULL,
  last_update timestamp AS CURRENT_TIMESTAMP,
  markDeleted tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (id)
) ; 
```

最后是实体 xml

```
<hibernate-mapping>
    <class name="server.DataBean" table="java_objects">
        <id name="id" column="id">
            <generator class="native" />
        </id>
        <property name="type" column="class" />
        <property name="object" not-null="true">
            <column name="object" sql-type="BLOB" />
        </property>
        <property name="lastUpdate" column="last_update" type="timestamp" />
        <property name="markDeleted" type="boolean" />
    </class>
</hibernate-mapping> 
```

有谁知道我做错了什么？h2 在处理 blob 时有什么不同的期望？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:53:15.030

问题可能出在 org.hibernate.dialect.H2Dialect

更改为 HSQLDialect 有效。仍然存在潜在的问题吗？

# oracle - 如何在shell脚本中实现excel的“文本导入向导”功能

> ID：13395860
> 
> 赞同：0
> 
> 时间：2012-11-15T10:44:43.280
> 
> 标签：oracle, shell, excel-2007

我尝试从 shell 脚本生成一个 excel 表。这必须包含查询的结果。

我确实得到了一个excel表。但是当我打开它时，列并没有分开，而是查询输出的所有字段都出现在第一列中。

例如：

下面粘贴的是查询的结果。当我将其直接粘贴到 excel 中而不导出时，这些将放置在 excel 的第一列中。

在 MS-Excel 2007 中，我们将获得“粘贴选项”，我们可以在其中选择“使用文本导入向导”将字段分隔为 Excel 中的列。

我需要通过 shell 脚本来实现这个功能。

你能帮我解决这个问题吗？

```
COL1                   COL2 COL3                   
---------------------- ---- ---------------------- 
12                     a    1                      
198                    b    2                      
159                    ast  3                      
434                     rd  4                      
56                          5                      
1031                        6 
```

谢谢，萨维莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:24:37.237

假设您可以生成一个`.csv`文件，您的查询可以将字段与它们之间的逗号（或其他分隔符，如果您愿意）连接在一起；就像是：

```
select col1 ||','|| col2 ||','|| col3
from my_table
where ... 
```

如果任何列可能包含逗号，那么您可以将它们括在双引号中，以便 Excel 不会将一个值视为多个列：

```
select '"'|| col1 ||'","'|| col2 ||'","'|| col3 ||'"'
from my_table
where ... 
```

从 Oracle 的角度来看，它变成了单个结果列，这意味着您的列标题不会像您希望的那样出现。假设您需要它们，则需要单独生成它们（在实际查询之前）：

```
select 'COL1,COL2,COL3' from dual; 
```

或者

```
prompt COL1,COL2,COL3 
```

您可能还需要调整一些 SQL*Plus 设置，如`set embed on`, `set linesize`, `set pagesize`, `set feedback off`... 等以使其看起来完全正确。

# php - preg_replace 如何改变 uri 的一部分

> ID：13395864
> 
> 赞同：0
> 
> 时间：2012-11-15T10:44:58.383
> 
> 标签：php, regex, preg-replace

我正在尝试使用 php preg_replace 更改 html 的所有链接。所有 uris 都具有以下形式

```
http://example.com/page/58977?forum=60534#comment-60534 
```

我想将其更改为：

```
http://example.com/60534 
```

这意味着删除“page”之后和“comment-”之前的所有内容，包括这两个字符串。

我尝试了以下方法，但没有返回任何更改：

```
$result = preg_replace("/^.page.*.comment-.$/", "", $html); 
```

但似乎我的正则表达式语法不正确，因为它返回的 html 不变。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T10:47:37.163

The`^`是一个仅匹配字符串开头的锚点，并且`$`仅匹配结尾。为了匹配，您不应锚定正则表达式：

```
$result = preg_replace("/page.*?comment-/", "", $html); 
```

请注意，这可能会匹配不是 URL 的内容。您可能希望更具体地说明将被替换的内容，例如，您可能只想替换以`http:`or开头`https:`且不包含空格的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:48:32.140

你可能只需要这个：[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php) 这个函数解析一个 URL 并返回一个关联数组，其中包含 URL 中存在的各种组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:55:42.323

不使用正则表达式的替代方式。

用途`parse_url()`

```
<?php    
    $url = 'http://example.com/page/58977?forum=60534#comment-60534';
    $array = parse_url($url);
    parse_str($array['query'], $query);   
    $http = ($array['scheme']) ? $array['scheme'].'://' : NULL;    
    echo $http.$array['host'].'/'.$query['forum'];
?> 
```

演示：[http ://codepad.org/xB3kO588](http://codepad.org/xB3kO588)

# getter - 推土机，如何从 java.util.Map 映射到复杂类型？

> ID：13395865
> 
> 赞同：3
> 
> 时间：2012-11-15T10:44:58.867
> 
> 标签：getter, dozer, complextype, map

我想从 java.util.Map 映射到复杂类型，我们称之为 Abc。

```
<mapping>
  <class-a>java.util.Map</class-a>
  <class-b bean-factory="xyz.AbcBeanFactory" factory-bean-id="AbcBeanFactory">
    xyz.Abc
  </class-b>
  <field>
    <a>Name</a>
    <b>companyName</b>
  </field>
</mapping> 
```

有了这个我得到这个错误（这是可以理解的）： *org.dozer.MappingException：没有为类中的字段（名称）找到读取或写入方法（接口java.util.Map）*

好的，如何从具有键“名称”的条目的 java.util.Map 映射？我是否必须创建一个包含该 java.util.Map 的包装器对象并为该映射中我要映射的每个条目提供 getter/setter？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T20:46:39.607

[您可以在 Dozer 文档](http://dozer.sourceforge.net/documentation/mapbackedproperty.html)中找到映射地图的详细信息。您需要提供密钥而不是普通字段。这是一个例子：

Abc 类：

```
package com.test;

public class Abc {
    private String companyName;
    private String companyAddress;

    public String getCompanyName() {
        return companyName;
    }

    public void setCompanyName(String companyName) {
        this.companyName = companyName;
    }

    public String getCompanyAddress() {
        return companyAddress;
    }

    public void setCompanyAddress(String companyAddress) {
        this.companyAddress = companyAddress;
    }
} 
```

映射文件：

```
<mapping>
    <class-a>java.util.Map</class-a>
    <class-b>com.test.Abc</class-b>
    <field>
        <a key="name">this</a>
        <b>companyName</b>
    </field>
    <field>
        <a key="address">this</a>
        <b>companyAddress</b>
    </field>
</mapping> 
```

测试代码：

```
Map<String, String> map = new HashMap<String, String>();
map.put("name", "Company Inc.");
map.put("address", "XYZ Commercial Street");

Abc destObject =  dozerMapper.map(map, Abc.class); 
```

# drupal - 在更改表单中添加空间以选择选项

> ID：13395877
> 
> 赞同：1
> 
> 时间：2012-11-15T10:45:48.270
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views, drupal-forms

我有分类术语层次结构，我将它们用作视图中的过滤器。它在选择框中显示层次结构，但子术语以连字符 (-) 出现。我试图在表单更改中删除连字符，我做到了，但我无法替换它的空格。

```
if ($form_id == 'views_exposed_form') {
        $i = 0;
        foreach ($form['field_region_tid']["#options"] as $op) {
            foreach ($op->option as $key => $arr) {
                if ($arr != null) {
                    $form['field_region_tid']["#options"][$i]->option[$key] = str_replace("-","&nbsp;", $arr);

                }

            }
            $i++;
        }

    } 
```

**如何在子选项的开头放置空格。**还是我应该采取其他方式？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:10:03.867

从 form_id 我知道它是由视图生成的表单。如果是这样，则`if`条件内的代码永远不会被调用，因为由于两个模块的权重，您的模块在视图模块之后执行。要解决这个问题：

1.  打开您的数据库管理器（大多数情况下为 PhpMyAdmin）并打开`system`表。

2.  然后将模块的权重更改为大于 10，因为它是视图模块的默认权重，您需要在视图模块之后执行模块。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T12:27:52.480

如果问题是当你的钩子被调用时，答案就在于

```
hook_module_implements_alter() 
```

但不是你说的那样。你的代码看起来不错，你试过了吗

```
str_replace("-"," ", $arr); 
```

?

# c# - 网格在更新后显示旧值使用 ObjectDataSource 绑定和更新网格

> ID：13395887
> 
> 赞同：0
> 
> 时间：2012-11-15T10:46:32.697
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我正在使用 ObjectDataSource 绑定和更新网格。它工作正常，数据库中的记录正在更新，但更新后，它仍然在网格中显示相同的记录（以前的值）。请帮助我，以便在数据库更新后，网格将显示更新的记录，而不是旧记录。如果有人找到解决方案，请修改我的代码。

提前致谢。

请在下面找到代码。

**GridView 代码：-**

```
<asp:Panel ID="pnlGrdShift" runat="server" ScrollBars="Auto" Width="900px" Height="520px" CssClass="srcColor">
            <cc1:GridView  ID="gvShift" runat="server" AutoGenerateColumns="False" AllowSorting="True"
               CssClass="grid"
               OnDataBound="gvShift_DataBound" 
               DataSourceID="odsShiftDetails" 
               AllowPaging="True" 
               ShowFooter="false"
               onrowcancelingedit="gvShift_RowCancelingEdit" 
               onrowcommand="gvShift_RowCommand" 
               onrowdeleting="gvShift_RowDeleting" 
               onrowediting="gvShift_RowEditing" 
               onrowupdating="gvShift_RowUpdating" 
               OnSelectedIndexChanged="gvShift_SelectedIndexChanged" 
               OnRowDataBound="gvShift_RowDataBound">        
                <AlternatingRowStyle CssClass="altrowstyle"  />
                <HeaderStyle CssClass="headerstyle" />
                <RowStyle CssClass="rowstyle" Wrap="false"  />
                <EmptyDataRowStyle BackColor="#edf5ff" Height="300px" VerticalAlign="Middle" HorizontalAlign="Center" />
                <EmptyDataTemplate >
                    No Records Found
                </EmptyDataTemplate> 
                <Columns>
                    <asp:TemplateField HeaderText="E Code" SortExpression="userecode" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblUserECode" runat="server" Text='<%#Eval("userecode") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lblEditUserECode" runat="server" Text='<%#Eval("userecode") %>' style="width:50px;" CssClass="GridContent" />                    
                        </EditItemTemplate>
                    </asp:TemplateField>                       

                    <asp:TemplateField HeaderText="User Name" SortExpression="username" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblUserName" runat="server" Text='<%#Eval("username") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lblEditUserName" runat="server" Text='<%#Eval("username") %>' style="width:100px;" CssClass="GridContent"/>                    
                        </EditItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Shift Start Time" SortExpression="ShiftStartTime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                         <ItemTemplate>
                            <asp:Label ID="lblShiftStartTime" runat="server" Text='<%#Eval("ShiftStartTime") %>'  CssClass="GridContent"/>                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlShiftStartTime" runat="server" Text='<%#Eval("ShiftStartTime") %>' style="width:65px;" CssClass="GridContent" />
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlShiftStartTime" runat="server" ControlToValidate="ddlShiftStartTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                            

                        </EditItemTemplate>                            
                    </asp:TemplateField>  

                    <asp:TemplateField HeaderText="Shift End Time" SortExpression="ShiftEndTime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblShiftEndTime" runat="server" Text='<%#Eval("ShiftEndTime") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlShiftEndTime" runat="server" Text='<%#Eval("ShiftEndTime") %>' style="width:65px;" CssClass="GridContent"  />
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlShiftEndTime" runat="server" ControlToValidate="ddlShiftEndTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                            

                        </EditItemTemplate>                            
                    </asp:TemplateField>
                        <%--<asp:BoundField DataField="ShiftEndTIme" HeaderText="Shift End Time" SortExpression="ShiftEndTIme"/>--%>
                    <asp:TemplateField HeaderText="Saturday Shift Start Time" SortExpression="WeekendShiftStartTime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblWeekendShiftStartTime" runat="server" Text='<%#Eval("WeekendShiftStartTime") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlWeekendShiftStartTime" runat="server" Text='<%#Eval("WeekendShiftStartTime") %>' style="width:65px;" CssClass="GridContent" />  
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlWeekendShiftStartTime" runat="server" ControlToValidate="ddlWeekendShiftStartTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                          

                        </EditItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Saturday Shift End Time" SortExpression="weekendshiftendtime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                    <ItemTemplate>
                            <asp:Label ID="lblWeekendShiftEndTime" runat="server" Text='<%#Eval("weekendshiftendtime") %>' CssClass="GridContent"/>                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlWeekendShiftEndTime" runat="server" Text='<%#Eval("weekendshiftendtime") %>' style="width:65px;" CssClass="GridContent" /> 
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlWeekendShiftEndTime" runat="server" ControlToValidate="ddlWeekendShiftEndTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                           

                        </EditItemTemplate>                           
                    </asp:TemplateField>

                    <asp:TemplateField  ShowHeader="False" > 
                        <EditItemTemplate> 
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update" ForeColor="White"></asp:LinkButton> 
                          <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" ForeColor="White"></asp:LinkButton> 
                        </EditItemTemplate> 
                        <ItemTemplate> 
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit" ForeColor="White"></asp:LinkButton> 
                        </ItemTemplate> 
                </asp:TemplateField>                    
           </Columns>
                <PagerTemplate >
                     <table width="100%" >
                        <tr>
                            <td style="text-align:  left">
                                Page Size: 
                                    <asp:DropDownList ID="ddPageSize" runat="server" EnableViewState="true" OnSelectedIndexChanged="ddPageSize_SelectedIndexChanged" AutoPostBack="true" style="width:50px;">
                                    <asp:ListItem Text="10" ></asp:ListItem>
                                    <asp:ListItem Text="20" ></asp:ListItem>
                                    <asp:ListItem Text="30" ></asp:ListItem>
                                    <asp:ListItem Text="40" ></asp:ListItem>
                                    <asp:ListItem Text="50" ></asp:ListItem>
                                </asp:DropDownList>
                            </td>
                            <td style="text-align: right">
                                <asp:Label ID="lblPageCount" runat="server"></asp:Label>
                            </td>
                        </tr>
                    </table>
                </PagerTemplate>
                </cc1:GridView>      
         </asp:Panel>

 <asp:ObjectDataSource ID="odsShiftDetails" runat="server" 
                SelectMethod="GetShiftInfoSortedPage" TypeName="EQ.DAL.ShiftInfoDB"
                EnablePaging="True" SelectCountMethod="GetShiftInfoCount" 
                SortParameterName="sortExpression" UpdateMethod="UpdateShift">
                <UpdateParameters>
                <asp:Parameter Name="sql"/>
                </UpdateParameters>
                <SelectParameters>
                    <asp:ControlParameter  ControlID="hfSearchCriteria"  Name="searchCriteria" Direction="Input"  />
                </SelectParameters>                                            
            </asp:ObjectDataSource> 
```

**更新代码：-**

```
protected void gvShift_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        try
        {
            TextBox txtShiftStartTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlShiftStartTime");
            TextBox txtShiftEndTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlShiftEndTime");
            TextBox txtWeekendShiftStartTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlWeekendShiftStartTime");
            TextBox txtWeekendShiftEndTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlWeekendShiftEndTime");
            Label lblUserecode = (Label)gvShift.Rows[e.RowIndex].FindControl("lblEditUserECode");

            string userecode = lblUserecode.Text.ToString();
            string _ShiftStart = txtShiftStartTime.Text.ToString();
            string _ShiftEnd = txtShiftEndTime.Text.ToString();
            string _WeekendShiftStart = txtWeekendShiftStartTime.Text.ToString();
            string _WeekendShiftend = txtWeekendShiftEndTime.Text.ToString();

            EmployeeQuotientCL.Entities.ConfigurationVariables _configVariables = new ConfigurationVariables();
            string databaseConnectionString = _configVariables.ConnectionString;
            SqlConnection sqlConnection = null;
            if (((databaseConnectionString + string.Empty) != string.Empty))
            {

                DBConnect dbConnect = new DBConnect(_configVariables.ConnectionString);
                sqlConnection = dbConnect.SQLConnection;
                SqlCommand cmd = new SqlCommand();
                cmd.Connection = sqlConnection;
                string sql=null;
                cmd.CommandText = "UPDATE UserInfo SET ShiftStartTime ='" + _ShiftStart + "',ShiftEndTime='" + _ShiftEnd.ToString() + "',Weekendshiftstarttime='" + _WeekendShiftStart.ToString() + "',Weekendshiftendtime='" + _WeekendShiftend.ToString() + "'   WHERE UserECode=" + userecode.ToString();
                odsShiftDetails.UpdateParameters["sql"].DefaultValue = cmd.CommandText;
                odsShiftDetails.Update();
            }
        }
        catch (Exception ex)
        {
        }
    } 
```

**ShiftInfoDBCache.cs**

```
public class ShiftInfoDB
{
    private const string SHIFTINFO_CACHE_KEY = "SHIFTINFO_DATA";
    private const string SHIFTINFOCOUNT_CACHE_KEY = "SHIFTINFO_COUNT";
    static EmployeeQuotientCL.Entities.ConfigurationVariables _config = new EmployeeQuotientCL.Entities.ConfigurationVariables();
    static int _SupervisorecodeforShift;

    public static  DataTable GetShiftInfoSortedPage(int maximumRows, int startRowIndex, string sortExpression, string searchCriteria)
    {
        _SupervisorecodeforShift=EmployeeQuotientCL.Entities.StaticGlobalValue.UserId;

        if (string.IsNullOrEmpty(sortExpression))
            sortExpression = "userecode";
        try
        {
            if (ShiftInfoDBCache.isRecordsCached(SHIFTINFO_CACHE_KEY))
                return ShiftInfoDBCache.GetData(SHIFTINFO_CACHE_KEY, startRowIndex + 1, maximumRows, sortExpression, searchCriteria);

            SqlConnection dbConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnectionString"].ToString());
            string sql = "select distinct MP.userecode,UI.username,UI.ShiftStartTime,UI.ShiftEndTime,UI.WeekendShiftStartTime,UI.weekendshiftendtime from AssociateSupervisorMapping MP inner join UserInfo UI on MP.Userecode=UI.Userecode where supervisorecode=" + _SupervisorecodeforShift.ToString();

            SqlCommand custCommand = new SqlCommand(sql, dbConnection);

            custCommand.CommandType = CommandType.Text;

            SqlDataAdapter ad = new SqlDataAdapter(custCommand);
            DataTable dtCustomers = new DataTable();
            ad.Fill(dtCustomers);
            dbConnection.Close();

            //Cache records
            ShiftInfoDBCache.Add(SHIFTINFO_CACHE_KEY, dtCustomers);

        }
        catch (Exception e)
        {

            throw;
        }
        return ShiftInfoDBCache.GetData(SHIFTINFO_CACHE_KEY, startRowIndex + 1, maximumRows, sortExpression, null);
    }

    public static int GetShiftInfoCount(string searchCriteria)
    {
         _SupervisorecodeforShift=EmployeeQuotientCL.Entities.StaticGlobalValue.UserId;
        int custCount = 0;
        try
        {
            SqlConnection dbConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnectionString"].ToString());
            string sql = "select Count(*)from (select distinct MP.userecode,UI.username,UI.ShiftStartTime,UI.ShiftEndTime,UI.WeekendShiftStartTime,UI.weekendshiftendtime from AssociateSupervisorMapping MP inner join UserInfo UI on  MP.Userecode=UI.Userecode   where supervisorecode="+_SupervisorecodeforShift.ToString()+")AS internalQuery";

            if (!string.IsNullOrEmpty(searchCriteria))
                sql = sql + " where " + searchCriteria;

            SqlCommand sqlCommand = new SqlCommand(sql, dbConnection);
            sqlCommand.Connection = dbConnection;
            dbConnection.Open();
            sqlCommand.CommandType = CommandType.Text;

            custCount = Convert.ToInt32(sqlCommand.ExecuteScalar());

            dbConnection.Close();

            if (ShiftInfoDBCache.Get(SHIFTINFOCOUNT_CACHE_KEY) != null)
            {
                // remove customers data if customers count has changed since first cache
                if (Convert.ToInt32(ShiftInfoDBCache.Get(SHIFTINFOCOUNT_CACHE_KEY)) != custCount && string.IsNullOrEmpty(searchCriteria))
                {
                    ShiftInfoDBCache.Remove(SHIFTINFO_CACHE_KEY);
                }
            }

            if (string.IsNullOrEmpty(searchCriteria))
                ShiftInfoDBCache.Add(SHIFTINFOCOUNT_CACHE_KEY, custCount);
        }
        catch (Exception e)
        {
            throw;
        }
        return custCount;

    }

    public static void UpdateShift(string sql)
    {
        SqlConnection dbConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnectionString"].ToString());
        SqlCommand sqlCommand = new SqlCommand(sql, dbConnection);
        sqlCommand.CommandType=CommandType.Text;
        sqlCommand.CommandText=sql;
        dbConnection.Open();
        sqlCommand.Connection = dbConnection;
        //sqlCommand.CommandType = CommandType.Text;
        sqlCommand.ExecuteNonQuery();
        dbConnection.Close();
    }

} 
```

**ShiftInfoDBCache.cs**

```
public  class ShiftInfoDBCache
{
    public static bool isRecordsCached(string cacheKey)
    {
        Cache dbCache = HttpContext.Current.Cache;

        if (dbCache[cacheKey] == null)
            return false;

        return true;
    }

    public static void Add(string key, object value)
    {
        Cache dbCache = HttpContext.Current.Cache;

        dbCache.Add(key, value, null, Cache.NoAbsoluteExpiration, Cache.NoSlidingExpiration, CacheItemPriority.Default, null);

    }

    public static object Get(string key)
    {
        Cache dbCache = HttpContext.Current.Cache;

        return dbCache[key];
    }

    public static object Remove(string key)
    {
        Cache dbCache = HttpContext.Current.Cache;

        return dbCache.Remove(key);
    }

    public static DataTable GetData(string cacheKey, int startRowIndex, int maximumRowNumber, string sortExpression, string searchCriteria)
    {
        Cache dbCache = HttpContext.Current.Cache;

        if (dbCache[cacheKey] != null)
        {

            DataTable dtble = dbCache[cacheKey] as DataTable;
            DataTable dtblNew = dtble.Clone();

            DataRow[] rows = dtble.Select(searchCriteria, sortExpression);

            if (rows != null)
            {
                if (rows.Count() > 0)
                {
                    if (startRowIndex > rows.Count())
                    {
                        startRowIndex = rows.Count() - maximumRowNumber;

                        if (startRowIndex < 0)
                        {
                            startRowIndex = 1;
                            maximumRowNumber = rows.Count();
                        }
                    }

                    for (int i = startRowIndex - 1; i < (startRowIndex + maximumRowNumber - 1); i++)
                    {
                        if (i < rows.Count())
                            dtblNew.ImportRow(rows[i]);
                    }

                    return dtblNew;
                }
            }

            return dtblNew;

        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:12:21.737

```
public static void UpdateShift(string sql)
    {
        SqlConnection dbConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnectionString"].ToString());
        SqlCommand sqlCommand = new SqlCommand(sql, dbConnection);
        sqlCommand.CommandType=CommandType.Text;
        sqlCommand.CommandText=sql;
        dbConnection.Open();
        sqlCommand.Connection = dbConnection;
        //sqlCommand.CommandType = CommandType.Text;
        sqlCommand.ExecuteNonQuery();
        dbConnection.Close();
        ShiftInfoDBCache.Remove(SHIFTINFO_CACHE_KEY);

    } 
```

修改`UpdateShift`方法`ShiftInfoDB.cs`解决了我的问题。

# python - 如何获得 matplotlib 中最后一个图形的颜色？

> ID：13395888
> 
> 赞同：14
> 
> 时间：2012-11-15T10:46:32.627
> 
> 标签：python, colors, matplotlib

我正在绘制一些具有线性拟合的数据集。我希望线性拟合与绘制的数据（误差线）具有相同的颜色。我怎样才能得到那个颜色？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T11:57:46.343

你可以试试这个：

```
x = np.arange(10)
y = np.arange(10)
err = np.ones(10)
ebar = plt.errorbar(x,y, yerr=err)
color = ebar[0].get_color() 
```

`ebar`是艺术家的容器，因此您可以修改最后一行中的索引以匹配您想要从中获取颜色的艺术家。

您还可以轻松设置错误栏的颜色，因此您无需检查即可确切知道它们是什么颜色：

```
ebar = plt.errorbar(x,y, yerr=err, ecolor='y') 
```

# java - 实例化泛型类型

> ID：13395890
> 
> 赞同：3
> 
> 时间：2012-11-15T10:46:35.067
> 
> 标签：java

我正在尝试通过 Class clazz 实例化一个新对象，如下所示：

**代码：**

```
public class EntityType {
    private Map json = null;
    public EntityType(Map json){
        this.json = json;
    }
    public <T> T getAs(Class<T> clazz){
        final Class<T> clz = clazz;
        T obj = null;
        try {
            if (checkMap(json)){
                obj = clz.newInstance();
            }
        } catch (Exception e){
            if (e instanceof InstantiationException){
                e.printStackTrace();
            } else if (e instanceof IllegalAccessException){
                e.printStackTrace();
            } else {
                e.printStackTrace();
            }
        }
        return obj;
    }
} 
```

这就是我使用代码的方式：

```
EntityType type = new EntityType(map); // map contains values 
User user = type.getAs(User.class); 
```

`java.lang.InstantiationException`为上面的代码抛出。

我的代码可能有什么问题？

**更新：**

```
 @Entity(name = "user")
    public class User { 
        @Id 
        private String id;
        @Column
        private String name;
        @Column
        private Long age;
        public User() {}
       // Setters and getter 
   } 
```

完整的堆栈跟踪：

```
java.lang.InstantiationException: org.goo.AnnotationTest$User
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:325)
    at org.goodb.client.Goo$EntityType.getAs(Goo.java:90)
    at org.goo.AnnotationTest.doTest(AnnotationTest.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:54:32.717

异常堆栈跟踪说

```
java.lang.InstantiationException: org.goo.AnnotationTest$User 
```

这表明这`User`是一个嵌套或内部类，而不是顶级类。静态嵌套类的行为类似于顶级嵌套类，但对于非静态内部类，每个实例都与其包含类的特定实例相关联，编译器会在参数列表的前面添加一个额外参数，以便每个构造函数传入适当的包含实例。源代码中的内容

```
public User() {} 
```

实际上在字节码中对应于类似的东西

```
public User(AnnotationTest containingInstance) { this.container = containingInstance; } 
```

（不是那些参数/字段名称，但你明白了）。因此，您的`User`类实际上没有无参数构造函数。

如果您将该`User`类声明为顶级类或对其进行标记，`static`那么它将按您的预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:58:44.167

您的用户类中可能没有默认构造函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:50:04.143

您有一个通用方法，但您没有将类型参数传递给它。尝试这个：

```
 User user = type.<User>getAs(User.class); 
```

如果您与我们分享更多代码，我可以为您提供更多帮助。例如，我想查看完整的堆栈跟踪和`User`类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T11:02:16.683

根据 javadoc 描述：

```
 * @exception  InstantiationException
 *               if this {@code Class} represents an abstract class,
 *               an interface, an array class, a primitive type, or void;
 *               or if the class has no nullary constructor;
 *               or if the instantiation fails for some other reason. 
```

我认为您没有“空构造函数”，或者很可能说：默认构造函数。

# java - 只加奇数

> ID：13395898
> 
> 赞同：2
> 
> 时间：2012-11-15T10:47:02.433
> 
> 标签：java

所以我试图解决用户的问题应该输入任何正数。然后我正在尝试编写一个程序，只将奇数加到用户输入的数字上并显示总数。因此，例如，如果用户输入 4，我的程序应该添加四个奇数。1 + 3 + 5 + 7 = 16。
我唯一可用的工具是 for 语句、if、if/else if、while 循环和 println。

我只能弄清楚如何打印出奇数。我知道我想创建一个名为 total 的变量来存储将所有奇数相加的值，但我不知道它如何适合程序。

```
import acm.program.*;

public class AddingOddNumbers extends ConsoleProgram {
    public void run() {
        int n = readInt("enter a positive nunber: ");
        int total = 0;
        for (int i = 0; i < n; i++) {
            if (n == 1) {
                println(1);
            } else {
                println((i * 2) + 1);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T10:51:20.667

```
import acm.program.*;

public class AddingOddNumbers extends ConsoleProgram {
    public void run() {
        int n = readInt("enter a positive nunber: ");
        int total = 0;
        for (int i = 0; i < n; i++) {
            if (n == 1) {
                println(1);
            } else {
                println((i * 2) + 1);
                total += (i * 2) + 1;
            }
        }
        println("total : " + total);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:51:32.097

```
sum = 0;

for (i = 1; i < n*2; i=i+2)
    sum = sum + i; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:51:39.283

这会给你奇数的总和。

```
 if (n>0) 
   {
    total=0;
      for (int i = 1; i < n; i ++){
        if (i%2 == 1)
            total+=i;
      }
   } 
```

如果要包含 n，则将条件更改为`i<=n`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T10:58:15.087

也许您知道如何计算给定数字之前的所有数字的总和`n`？公式很简单：`(n * (n+1))/2`. 现在只得到奇数的总和有点棘手，但不用担心，你可以只使用前面的公式。首先请注意，直到给定数 n 的所有偶数之和为：

*   `(((n/2)* (n/2+1))/2) * 2`如果 N 是偶数（即所有数字的总和最多 n/2 乘以 2，那是因为你有`2+4+6+8+...N = 2*(1+2+3+...n/2)`）
*   `((((n-1)/2)* ((n-1)/2+1))/2) * 2`如果 N 是奇数

事实上，如果你有整数除法，公式总是：`(((n/2)* (n/2+1))/2) * 2 = (n/2)* (n/2+1)`

因此，要计算直到 n 的所有奇数的总和，您只需从所有数字的总和中减去偶数的总和：

`(n * (n+1))/2 - (n/2)*(n/2+1)`

事实上，如果你仔细观察，你会发现总和`1+3+...(2*n-1)`总是等于`n^2`。

这个答案应该可以帮助您解决所有语言的问题，我将代码留给您。它实际上是一条线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T10:53:52.367

我也会对奇数使用循环。

```
for (int i = 0, j = 1; i < n; i++, j += 2) {
    println(j);
    total += j;
}
println(total); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T10:55:03.930

```
int oddSum = 0;
for (int i = 0; i < n; i++){
  oddSum = oddSum + (i*2) + 1;
} 
```

# php - PHP 项目文件组织

> ID：13395899
> 
> 赞同：0
> 
> 时间：2012-11-15T10:47:02.390
> 
> 标签：php, project-organization

嗨，我在我的项目组织方面寻求一些帮助和您的经验。由于这是我的第一个项目，我不知道我是否按我的方式组织它，这是一个面向各种网站的电子商务平台。我的项目目前是这样组织的：

```
.
├── admin
│   └── index.php (redirects to system/admin/index.php)
├── conf.php (saves info about the server database etc...)
├── index.php
└── system
    ├── admin
    │   ├── add_prd.php
    │   └── index.php(this is the main administration page)
    ├── css
    │   └── css.css
    ├── func.php(this is my functions library witch is included in every file that uses a function made by me)
    ├── img (this is where all pics go)
    │   ├── img_artigos(this is where all pics *of the products* go)
    │   │   ├── product1.png
    │   │   └── ...
    │   └── (system images go here)banner, all other images of the "template", etc...(probably i will make a new folder called system for that)
    ├── logout.php
    ├── order.php
    └── reg.php 
```

这就是它的工作原理，索引包含所有内容，当单击寄存器时使用开关盒重新加载页面并通过 GET 接收运行函数 register() 的指令，该函数会回显注册表单，然后它提交到 reg.php（树中的最后一个文件），它将注册插入数据库并重定向到 index.php。logout() 和 order() 发生的情况也是如此，它们重定向只是为了执行函数然后返回索引，这个页面只是为了使用一个函数并将用户重定向到索引页面。我什至认为在对重定向做同样的事情时，使用 switch case 执行不同的功能并重定向回索引，站点将只有索引、管理索引、重定向、css 和 func 文件......

当用户点击他们的名字时，页面会重新加载并使用 GET 它指示 switch case 加载 profile_display() 函数来回显配置文件信息......

管理部分也是如此，管理员用户会有在浏览不同页面的感觉，但实际上他们从未离开过索引。

我想知道的是这是否正确，或者我是否会遇到任何问题，或者我是否使用了不好的做法......我是否应该采用更传统的方式（许多文件）以及什么会更好保持传统或这个......如果服务器端因此而出现任何问题，以及您的意见。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:56:06.613

尽管我认为您的组织并没有那么糟糕，但它是一个非常基本的结构，并且没有那么可扩展。如果你的项目越来越大，你就不会那么开心了。

我建议你看看各种各样的 MVC 框架，它们可以完成页面请求的所有路由，并帮助你保持项目的可维护性。它们还有助于拆分逻辑代码和布局。

如果您不想保留该结构，则至少应该更改其中的某些部分：

我可能会误解你，但你应该这样做。在我看来，不使用从你的 switch 语句调用的函数，同时直接重定向到 reg.php。

```
switch($page) {
    case "register":
    //inlude file or call function
    break;
    case "register_submit":
    //inlude file or call function
    break;
    case "logout":
    //inlude file or call function
    break;
    case "order":
    //inlude file or call function
    break;
    case "login":
    //inlude file or call function
    break;
} 
```

然后可以创建一个“资产”文件夹，或者您可以在与系统文件夹相同的级别上随意调用它，并将所有 css/js/image 文件放在那里。

但我仍然建议您使用 MVC 框架。我个人正在使用 Codeigniter。但是有几个很好的框架，例如 Kohana。

# android - 我的 .apk 是 273MB，因为我的动画图像，是不是太多了？

> ID：13395905
> 
> 赞同：0
> 
> 时间：2012-11-15T10:47:12.850
> 
> 标签：android

我从未见过 273MB 的应用程序，我一定是做错了什么；我有 75 个 png 用于动画。一个应用程序不应该那么大，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:50:52.523

在[Google Play 网站](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113469)上，Google Play 上 APK 的最大允许大小为 50 MB，但如果您需要更多数据，您可以使用[扩展文件机制](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=2481797)（每个文件 2GB）

我建议你找到一种方法来使用更少的 PNG 图像或以某种方式优化它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:02:31.607

您的应用程序绝对可以是那个大小。许多游戏的规模都很大。为此，您必须使用 google 提供的 APK 扩展文件方法。看这里：

[https://developer.android.com/guide/google/play/expansion-files.html](https://developer.android.com/guide/google/play/expansion-files.html)

您必须将它们存储在 SD 卡上，因为它们对于内部存储器来说太大了。

还可以考虑压缩或较小的文件大小作为替代方案，尽管这在很大程度上取决于您打算如何处理图像（如果图像是高分辨率非常重要，则不要压缩）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:02:19.907

您可以将图像放在服务器上，并在第一次进入您的应用程序时将它们下载到 sdcard 上。如果这适合您的应用程序，您会更好地了解:)

# .net - NHibernate 删除最佳实践

> ID：13395906
> 
> 赞同：0
> 
> 时间：2012-11-15T10:47:20.343
> 
> 标签：.net, nhibernate

NHibernate 中按 id 删除对象的最佳实践是什么。你可以同时做

```
public void Delete(int id) 
{
    Session.Delete(new MyEntity { Id = id });
} 
```

或者你可以做

```
public void Delete(int id) 
{
    var entity = Session.Get<MyEntity>(id);
    Session.Delete(entity);
} 
```

第二个选项对我来说感觉更清晰，因为您不只是为了删除而编写新对象，但另一方面，您将执行两个 SQL 命令，而不是一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:25:58.573

第二个选项是最佳实践。NHibernate 需要在删除之前加载对象，以便通过对象图级联删除。我宁愿直接删除 SQL，也不愿像第一个选项那样创建一个伪造的对象来欺骗 NHibernate。

# arduino - 飞思卡尔压力传感器 MPL3115A2 I2C 与 Arduino 通信

> ID：13395907
> 
> 赞同：0
> 
> 时间：2012-11-15T10:47:24.747
> 
> 标签：arduino, sensors, i2c, pressure

有人使用过 MPL3115A2 飞思卡尔 I2C 压力传感器吗？我需要在有关 Arduino UNO r3 的项目中使用它，但我无法正确地在它们之间进行通信。这是我的代码：

```
 #include <Wire.h>

void setup(){
  Serial.begin(9600);
/*Start communication */
Wire.begin();
    // Put sensor as in Standby mode
    Wire.beginTransmission((byte)0x60); //0x60 is sensor address
    Wire.write((byte)0x26); //ctrl_reg
    Wire.write((byte)0x00); //reset_reg
    Wire.endTransmission();
    delay(10);
    // start sensor as Barometer Active
    Wire.beginTransmission((byte)0x60);
    Wire.write((byte)0x26); //ctrl_reg
    Wire.write((byte)0x01); //start sensor as barometer
    Wire.endTransmission();
    delay(10);
    }
void getdata(byte *a, byte *b, byte *c){
   Wire.beginTransmission(0x60); 
   Wire.write((byte)0x01);        // Data_PMSB_reg address
   Wire.endTransmission();    //Stop transmission
   Wire.requestFrom(0x60, 3); // "please send me the contents of your first three registers"
   while(Wire.available()==0);
   *a = Wire.read(); // first received byte stored here
   *b = Wire.read(); // second received byte stored here
   *c = Wire.read(); // third received byte stored here
  }
void loop(){    
  byte aa,bb,cc;
  getdata(&aa,&bb,&cc);
  Serial.println(aa,HEX); //print aa for example
  Serial.println(bb,HEX); //print bb for example
  Serial.println(cc,HEX); //print cc for example
  delay(5000);
} 
```

我收到的数据是：05FB9（例如）。当我更改寄存器地址（参见 参考资料`Wire.write((byte)0x01); // Data_PMSB_reg address`）时，我希望数据会发生变化，但事实并非如此！你能给我解释一下吗？[您可以在 NXP 网站上](https://www.nxp.com/products/sensors/pressure-sensors/barometric-pressure-15-to-115-kpa/20-to-110kpa-absolute-digital-pressure-sensor:MPL3115A2?fpsp=1&tab=Documentation_Tab)找到文档和数据表。

我无法正确理解他们如何相互交流。我在 Arduino 和其他一些具有相同通信协议的 I2C 传感器之间进行了通信，没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:55:29.323

您的问题可能是由于飞思卡尔部件需要重复启动 I2C 通信才能进行读取。原来的 Arduino 两线库（Wire 使用的 TWI 库），不支持重复启动。

我知道这一点是因为我必须为我的一个项目重写 TWI 以支持重复启动（中断驱动，主从驱动）。不幸的是，我从来没有上传过我的代码，但是其他人在这里做了同样的事情（至少对于 Master，这是你需要的）： [http ://dsscircuits.com/articles/arduino-i2c-master-library .html](http://dsscircuits.com/articles/arduino-i2c-master-library.html)

丢掉 Wire 库，改用他们的 I2C 库。

# c# - 如何从 Visual Studio 中的项目/服务器文件夹中获取文件名？

> ID：13395908
> 
> 赞同：1
> 
> 时间：2012-11-15T10:47:28.600
> 
> 标签：c#, asp.net, file-upload, filenames

所以我想要做的是在一个字符串数组中获取位于我的项目或服务器上的特定文件夹中的所有图像的所有文件名（实际上是相同的）。

我试过了

```
Directory.GetFiles(Server.MapPath(@"~/_img/_upload/")); 
```

但数组保持为空。有人可以帮我吗？

非常感谢您的帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:02:38.237

下面会将所有图像放入一个数组中（如果您已经知道目录结构，这应该对您有所帮助）：

```
using System.IO;
using System.Linq;

var imagenames = String.Join(", ", Directory.GetFiles(@"C:\yourdirectory", "*.img").Select(filename => Path.GetFileNameWithoutExtension(filename)).ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:20:21.983

根据您的评论，您从中得到的结果`Server.MapPath(@"~/_img/_upload/")`是：

`C:\\Projects\\VS12\_img\_upload\\`

主要问题是`@`因为在 C# 中意味着字符串应该“按原样”使用，而不是为转义序列处理。

没有它，您的字符串值将是：`\\_img\\_upload\\`

为了将来的阅读，我会建议这个我发现非常有用的[答案](https://stackoverflow.com/a/275791/1498857)

# asp.net - WSFederationAuthenticationModule v/s SessionAuthenticationModule

> ID：13395912
> 
> 赞同：2
> 
> 时间：2012-11-15T10:47:55.360
> 
> 标签：asp.net, wif

根据文档，这两个模块都将用于创建 IClaimsPrincipal 的实例。我不明白为什么 WIF 费心使用 2 个 HttpModules 而不是一个？抱歉，我是 WIF 的新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T13:53:08.117

最大的区别在于 WSFederationAuthenticationModule 拦截请求并将用户重定向到 STS 进行身份验证，而 SessionAuthenticationModule 使用 WIF-token cookie 来授权用户对后续请求。

SessionAuthenticationModule 首先在管道中触发，因此如果您已经拥有会话 cookie（即，您已经通过身份验证），会话模块将授予您访问权限。

[MSDN 文档](http://msdn.microsoft.com/en-us/library/jj191638.aspx)很好地描述了这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T14:44:33.913

您不需要两者都`IClaimsPrincipal`在管道中。你需要后者，`SessionAuthenticationModule`. 它负责将 WIF cookie 转换为主体对象（类似于 FormsAuthenticationModule 对表单 cookie 所做的事情）。

前者`WSFederationAuthenticationModule`仅负责从身份提供程序到您的应用程序的初始 SAML 帖子 - 模块使用该帖子并发出 WIF cookie。或者，您可以使用`wif:FederatedPassiveSignIn`登录表单上的控件来执行此操作。

当我编写支持 WIF 的应用程序时，我通常只有 SAM 模块，并使用登录控件来发出 cookie。

# java - 客户端的进度信息？

> ID：13395913
> 
> 赞同：1
> 
> 时间：2012-11-15T10:47:55.923
> 
> 标签：java

我有一个 Servlet，用于使用**ServletOutputStream**生成和下载文件。它运作良好。但是 Servlet 需要几秒钟来处理请求，具体取决于文件的大小。

我的问题是我想向客户端显示一些进度信息。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:03:36.227

这带有任何好的 Javascript 工具包，例如 jquery。他们有一个进度条。

[http://jqueryui.com/](http://jqueryui.com/)

[http://jqueryui.com/progressbar/](http://jqueryui.com/progressbar/)

# android - 弹出窗口左侧的 1px 行

> ID：13395916
> 
> 赞同：0
> 
> 时间：2012-11-15T10:48:22.750
> 
> 标签：android, layout, popup

> **可能重复：**
> [设计 android 弹出窗口](https://stackoverflow.com/questions/13375549/design-android-popup)

所以我的问题如下，我正在使用应该涵盖所有背景的弹出窗口。但是，当我加载它时，左侧有 1px 线未被覆盖，有什么想法吗？链接：[http](http://shrani.si/f/1a/GT/PuzRGJv/screenshot2012-11-15-11-.png) ://shrani.si/f/1a/GT/PuzRGJv/screenshot2012-11-15-11-.png 。我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:id="@+id/popup"
android:layout_height="match_parent"
android:background="#BFBFBF"
android:orientation="vertical" >
 <RelativeLayout
 android:layout_width="match_parent"
 android:layout_height="match_parent" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="280dp"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/popup_round_corners"
    android:orientation="vertical"
    android:padding="10dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="5dp"
        android:text="@string/zm_main_uvod"
        android:textColor="#6e9046"
        android:textStyle="bold" />

    <ImageButton
        android:id="@+id/close"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="10dp"
        android:background="@null"
        android:paddingLeft="3dp"
        android:paddingRight="3dp"
        android:src="@drawable/btn_ok" />
</LinearLayout>

</RelativeLayout>

 </LinearLayout> 
```

显示弹出窗口的任何代码：

```
LinearLayout viewGroup = (LinearLayout)findViewById(R.id.popup);
       LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       View layout = layoutInflater.inflate(R.layout.startpopup, viewGroup);

       final PopupWindow popup = new PopupWindow(context);
       popup.setContentView(layout);
       Display display = getWindowManager().getDefaultDisplay(); 
       int width = display.getWidth();
       int height=display.getHeight();
       popup.setWidth(width+5);
       popup.setHeight(height+5);
       popup.setFocusable(true);
       popup.showAtLocation(layout, Gravity.NO_GRAVITY, 0, 0);
       ImageButton close = (ImageButton) layout.findViewById(R.id.close);
           close.setOnClickListener(new OnClickListener() {

             @Override
             public void onClick(View v) {
               popup.dismiss();
             }
           }); 
```

我尝试设置偏移量不同的重力，但没有。

# amazon-web-services - 如何 Request.GetResponse() 亚马逊托管网站

> ID：13395918
> 
> 赞同：0
> 
> 时间：2012-11-15T10:48:23.413
> 
> 标签：amazon-web-services, httpwebrequest, amazon, getresponse

我正在尝试获得许多零售网站的响应（检查 URL 是否存在）。

使用 HttpWebRequest.GetResponse()，我可以从 Amazon 自己的站点获得响应，但是，我不能为其托管站点 - 特别是 MarksAndSpencer.com。响应始终为 503。

我使用了一个总是返回答案的 http 嗅探器，所以它似乎是可能的。

有没有人对此有任何解决方案，因为我发现很难想出答案或在 Google 上找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:56:11.573

我最终想出了如何成功地向亚马逊和亚马逊托管网站发出请求。

这是代码片段。

```
var request = (HttpWebRequest)HttpWebRequest.Create(uri);
request.Method = WebRequestMethods.GET;
request.UserAgent = HttpContextHelper.Current.Request.UserAgent;
request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"; 
```

# java - 发布/订阅中间件

> ID：13395919
> 
> 赞同：0
> 
> 时间：2012-11-15T10:48:29.223
> 
> 标签：java, publish-subscribe

我正在寻找用 Java 编写的发布/订阅中间件。在 Google Code 上，有几个中间件，但没有很好的文档记录。所以，我在使用这些中间件时遇到了困难。

您的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:50:55.470

RabbitMQ 是一个简单的发布/订阅系统。试一试，它有据可查，而且很容易上手。

# windows - windows 7下可以开发windows 8手机吗？

> ID：13395920
> 
> 赞同：5
> 
> 时间：2012-11-15T10:48:28.833
> 
> 标签：windows, windows-phone-7, windows-phone-8

是否可以使用 vs.net 2010 在 Windows 7 中开发 Windows 8 手机应用程序？

还是我需要完全升级到 Windows 8？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T10:50:12.557

> Windows Phone 8 可以在 Windows 7 下开发吗？

不，需要 Windows 8 64 位和 Visual Studio 2012。
还需要 Windows 8 Pro 来运行模拟器（以及支持 SLAT 的处理器）。

来源：[http ://www.microsoft.com/en-us/download/details.aspx?id=35471](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:41:03.880

您可以修改安装文件以允许它安装在 Windows 7 上。
以下是 WP8 SDK 9900 的修改安装文件：

1.  运行`InstallWP8SDK.bat`开始安装！
2.  下载：[http ://www5.zippyshare.com/v/67777536/file.html](http://www5.zippyshare.com/v/67777536/file.html)

在旧的 Windows 7 上开发愉快。

# c - 什么可能导致 getaddrinfo() 返回错误代码“1”？

> ID：13395926
> 
> 赞同：3
> 
> 时间：2012-11-15T10:48:48.760
> 
> 标签：c, network-programming, berkeley-sockets

或多或少是它在标题中所说的。我打电话给 getaddrinfo，如下所示：

```
struct addrinfo crossplat, *actual_addr;
crossplat.ai_family = AF_UNSPEC; //IPv4 or IPv6.
crossplat.ai_socktype = SOCK_STREAM; 

if(int i = getaddrinfo("localhost", "8000", &crossplat, &actual_addr)!=0){
    cerr << "error code " << i << " received. Meaning: "<<  gai_strerror(i) << endl;
    return -1;
} 
```

自豪地打印：

```
error code 1 received. Meaning: Unknown error 
```

在我的系统上。

我系统上的 getaddrinfo 手册页：

```
RETURN VALUE
   getaddrinfo() returns 0 if it succeeds, or one of the following 
   nonzero error codes:

   EAI_ADDRFAMILY....

   ...The gai_strerror() function translates these error codes to a 
       human readable string, suitable for error reporting. 
```

这表明 getaddrinfo 返回的所有非零代码都应该是列出的 EAI_* 系列代码之一。*在线搜索表明 gai_strerror() 仅在传递一个不是*EAI_* 系列成员的错误代码时才会返回“未知错误” ，这似乎排除了“1”是这样的代码。

显然我在这里做错了，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T11:14:30.483

此表达式是 C 中的语法错误，但假设您使用的是 C++，它并没有按照您的期望进行分组：

```
if (int i = getaddrinfo("localhost", "8000", &crossplat, &actual_addr)!=0){ 
```

这将分配`getaddrinfo("localhost", "8000", &crossplat, &actual_addr) != 0`to的结果`i`，它始终为 0 或 1。任何非零返回 by`getaddrinfo()`将离开`i`值为 1。

您需要提前声明`i`，以便您可以对分配进行附加说明：

```
int i;
if ((i = getaddrinfo("localhost", "8000", &crossplat, &actual_addr)) != 0) { 
```

（当然，完成此操作后，您可能还会将`getaddrinfo()`调用移至 的初始化程序`i`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:53:34.727

我认为您需要初始化`crossplat.ai_protocol`. 除了您已经初始化的成员之外， *hints*参数的[手册页](http://linux.die.net/man/3/getaddrinfo)部分还提到了这一点。*`addrinfo`*

 *您可能还需要初始化`crossplat.ai_flags`. 只对整个结构进行 memset 可能会更容易：

```
struct addrinfo crossplat, *actual_addr;
memset(&crossplat, 0, sizeof(crossplat));
crossplat.ai_family = AF_UNSPEC; //IPv4 or IPv6.
crossplat.ai_socktype = SOCK_STREAM; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T10:55:29.673

在`getaddrinfo.h`:`#define EAI_ADDRFAMILY 1`中，这意味着：不支持主机名的地址族*

# mysql - Mysql - ON子句中的未知列

> ID：13395929
> 
> 赞同：0
> 
> 时间：2012-11-15T10:49:10.847
> 
> 标签：mysql, sql

我对一个简单的查询有一点问题。这里是：

```
SELECT `T_COURS`.`COU_DATE`,
`T_SESSIONS`.*,
`T_FORMATIONS`.`FOR_TITRE`, `T_FORMATIONS`.`FOR_ID`, `T_FORMATIONS`.`FOR_TITRE`,     `T_FORMATIONS`.`FOR_CATEGORIE`,
`T_FORMATIONS`.`FOR_DESCRIPTION`, `T_FORMATIONS`.`FOR_MIN_PART`, `T_FORMATIONS`.`FOR_MAX_PART`, `T_FORMATIONS`.`FOR_PRIX`, `T_FORMATIONS`.`FOR_LANGUE`
FROM `T_FORMATIONS`
INNER JOIN `T_COURS` ON `T_SESSIONS`.`SES_ID` = `T_COURS`.`COU_SES_ID`
INNER JOIN `T_SESSIONS` ON `T_FORMATIONS`.`FOR_ID` = `T_SESSIONS`.`SES_FOR_ID`
WHERE `T_SESSIONS`.`SES_ETAT` = 1
ORDER BY `T_COURS`.`COU_DATE` ASC, `T_SESSIONS`.`SES_TITRE` ASC, `T_FORMATIONS`.`FOR_TITRE` ASC LIMIT 5 
```

当我尝试运行它时，我收到以下消息：

```
#1054 - Unknown column 'T_SESSIONS.SES_ID' in 'on clause' 
```

我真的不明白为什么因为一切都存在于我的数据库中？

我在互联网上寻找答案，但它没有帮助我（或者我可能不理解我阅读的答案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:53:20.930

在没有看到您的完整表格结构的情况下，我将首先交换您的`JOIN`订单，您`T_SESSIONS`在尝试在当前版本中使用它之后加入。您目前拥有：

```
FROM `T_FORMATIONS`
INNER JOIN `T_COURS` 
  ON `T_SESSIONS`.`SES_ID` = `T_COURS`.`COU_SES_ID`
INNER JOIN `T_SESSIONS` 
  ON `T_FORMATIONS`.`FOR_ID` = `T_SESSIONS`.`SES_FOR_ID` 
```

将其更改为：

```
FROM `T_FORMATIONS`
INNER JOIN `T_SESSIONS` 
  ON `T_FORMATIONS`.`FOR_ID` = `T_SESSIONS`.`SES_FOR_ID`
INNER JOIN `T_COURS` 
  ON `T_SESSIONS`.`SES_ID` = `T_COURS`.`COU_SES_ID` 
```

进行完整查询：

```
SELECT `T_COURS`.`COU_DATE`,
  `T_SESSIONS`.*,
  `T_FORMATIONS`.`FOR_TITRE`, 
  `T_FORMATIONS`.`FOR_ID`, 
  `T_FORMATIONS`.`FOR_TITRE`,     
  `T_FORMATIONS`.`FOR_CATEGORIE`,
  `T_FORMATIONS`.`FOR_DESCRIPTION`, 
  `T_FORMATIONS`.`FOR_MIN_PART`, 
  `T_FORMATIONS`.`FOR_MAX_PART`, 
  `T_FORMATIONS`.`FOR_PRIX`, 
  `T_FORMATIONS`.`FOR_LANGUE`
FROM `T_FORMATIONS`
INNER JOIN `T_SESSIONS` 
  ON `T_FORMATIONS`.`FOR_ID` = `T_SESSIONS`.`SES_FOR_ID`
INNER JOIN `T_COURS` 
  ON `T_SESSIONS`.`SES_ID` = `T_COURS`.`COU_SES_ID`
WHERE `T_SESSIONS`.`SES_ETAT` = 1
ORDER BY `T_COURS`.`COU_DATE` ASC, `T_SESSIONS`.`SES_TITRE` ASC, `T_FORMATIONS`.`FOR_TITRE` ASC 
LIMIT 5 
```

# objective-c - 在 .doc 文件中记录 doxygen 中的类。@property 不工作

> ID：13395930
> 
> 赞同：1
> 
> 时间：2012-11-15T10:49:10.627
> 
> 标签：objective-c, class, properties, documentation, doxygen

我记录了从声明它的文件之外的模型生成的 ManagedObject 类。由于这个类是自动生成的，我不想修改源代码，所以我在 .m 文件之外有文档。

我有这个自动取款机：

```
/*!
    \file AA.h 
    \class AA
    \extends ManagedObject
    Data model object generated from the model.

    \public
    \property NSString * hardwareId
    \brief Unique identifier of the device
*/ 
```

我获得了一个具有 AA 类的输出文件，它显示了继承，但没有显示任何关于属性或公共标签的内容。

不知道我做错了什么。

有任何想法吗？多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:12:43.297

我找到了答案。问题是我需要在每个属性名称的开头添加一个带有类名称的“命名空间”。

所以，我的最终文件是这样的：

AA.doc

```
/*! 
    \class AA
    This file contains the documentation of the data model object generated from the model.  
*/

/*! 
    \var NSString * AA::hardwareId
    \brief Unique identifier of the device
*/ 
```

我不需要指定文件和继承，因为 doxygen 自动从 .h 文件中获取它而不添加任何内容

# android - 动画列表视图数据更改

> ID：13395931
> 
> 赞同：17
> 
> 时间：2012-11-15T10:49:16.817
> 
> 标签：android, listview, animation

我正在使用一组数据（`ArrayList`）在 Android 上填充`ListView`. 在我更改排序模式的那一刻，我重新排序链接到适配器的数据并调用`notifyOnDataChanged()`以更新列表。

这可以完成工作，但我希望能够将每个项目动画到其新位置（如在 iOS 上），因为两个数据集包含相同的项目 - 只是重新排序。

我花了一些时间思考如何为它设置动画，并决定将所有出现在列表下方的项目设置为高度为零，然后在新位置重新设置为正常大小。这将使所有在数据中向上移动的项目实际上在列表中向上移动，因为项目在其上方消失。这就是想法，但我无法弄清楚如何实现它。

数据可以这样表示：

```
Set A | index | Set B
------+-------+------
A     | 0     | B
B     | 1     | A
C     | 2     | C
D     | 3     | F
E     | 4     | G
F     | 5     | E
G     | 6     | D 
```

我只是在寻找 iOS 默认为 Android 处理的东西。不应该这么难。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T15:17:49.870

做了一个小例子，动画这样一个列表的重新排序。动画与您描述的不完全一样，但希望它可以帮助您实现您想要的。

[https://github.com/fabrantes/widgetexamples](https://github.com/fabrantes/widgetexamples)

流程是这样的：

1.  在 notifyDataSetChanged() 之前保存当前状态。保存状态包括为每个项目存储 getTop() 坐标。
2.  在 notifyDataSetChange 之后，遍历所有 ListView 视图并应用 TranslateAnimation 与新项目位置和旧位置之间的高度差。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T14:13:57.627

我希望这是您的问题的解决方案

```
 <ListView
            android:id="@+id/listUniversal"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layoutAnimation="@anim/controller">

        </ListView> 
```

动画.xml

```
<layoutAnimation xmlns:android="http://schemas.android.com/apk/res/android"
    android:animation="@anim/scale_1"
    android:delay="50%" /> 
```

scale_1.xml

```
<scale
    android:duration="200"
    android:fromXScale="0.1"
    android:fromYScale="0.1"
    android:pivotX="10%"
    android:pivotY="10%"
    android:startOffset="100"
    android:toXScale="1"
    android:toYScale="1.0" /> 
```

# javascript - moment.js 剩下的工作时间

> ID：13395932
> 
> 赞同：-1
> 
> 时间：2012-11-15T10:49:26.883
> 
> 标签：javascript, date, momentjs

我正在尝试了解 moment.js 库，因为它似乎比 jquery 更稳定，而 jquery date 是输出控制台错误。

[http://momentjs.com/docs/#/manipulating/](http://momentjs.com/docs/#/manipulating/)

我想做的是倒计时来计算从现在开始剩下的时间。

我有的例子

```
var countDownTill = '2012-11-19 00:00:00 +0000';
document.write(moment(countDownTill).diff(moment(), 'months') + " months<br>");
document.write(moment(countDownTill).diff(moment(), 'weeks') + " weeks<br>");
document.write(moment(countDownTill).diff(moment(), 'days') + " days<br>"); 
```

这将输出

```
0 months
1 weeks
4 days 
```

但总体而言，它并没有为每个值（天、周、月）做个人

因此，如果我将日期提前 12 个月，如下所示。

```
var countDownTill = '2013-11-19 00:00:00 +0000';
 document.write(moment(countDownTill).diff(moment(), 'months') + " months<br>");   
 document.write(moment(countDownTill).diff(moment(), 'weeks') + " weeks<br>");
 document.write(moment(countDownTill).diff(moment(), 'days') + " days<br>"); 
```

它输出。

```
12 months
53 weeks
369 days 
```

当我试图让它输出时

```
12 months
2 weeks
5 days 
```

例如这里 [http://jsfiddle.net/fDmWH/3/](http://jsfiddle.net/fDmWH/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:53:14.967

它正在做你要求它做的事情。您需要使用刚刚获得的数字减少 countDownTill 值。代码：

```
// Start date
var countDownTill = new Date('2013-11-19 00:00:00 +0000');
var now = new Date();

document.write(countDownTill + '<br />');

// Get the months
var months = moment(countDownTill).diff(moment(), 'months');
console.log(months);

// Add months to the date
now.setMonth(now.getMonth() + months);
document.write(now + '<br />');

// Get the weeks
var weeks = moment(countDownTill).diff(now, 'weeks');
// Seems like moment is doing something wrong here... it should be 0 weeks...
// 15 Nov to 19 Nov is 0 weeks to me at least...
console.log(weeks);

// Add the weeks to the date
now.setDate(now.getDate() + (7 * weeks));
document.write(now + '<br />');

var days = moment(countDownTill).diff(now, 'days');

document.write(months + ' months ');
document.write(weeks + ' weeks ');
document.write(days + ' days '); 
```

# wordpress - Wordpress 中的重定向错误

> ID：13395934
> 
> 赞同：0
> 
> 时间：2012-11-15T10:49:37.643
> 
> 标签：wordpress, redirect

我有一个网站在添加元标记时运行良好，我有 SEO-ULTIMATE 插件。

错误地我添加了标题，所以我的 url 在它之后也发生了变化。

因此，要将其更改回我更改了直接网址的内容，

然后它也没有正常进行。

所以我改变了重定向，新的 url 即将到来，所以我改成了旧的。

但随之而来的错误“重定向循环错误”也是如此。

然后我厌倦了删除那个给出问题的页面。

并再次创建具有相同名称的新页面。

但是现在我再次尝试提供相同的网址，但它无法提供，并且它像“page-2”一样出现。但这也无法检索该页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:59:30.107

尝试使用这个插件[http://wordpress.org/extend/plugins/custom-permalinks/](http://wordpress.org/extend/plugins/custom-permalinks/)当我想更改特定的帖子/页面永久链接时使用它。这也应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:33:06.397

是的，尼古拉，我也试过了。

我也从垃圾箱和数据库中删除了页面。

现在它工作正常。感谢重播。:)

# scala - 在scala中附加到act方法的任何方式？

> ID：13395936
> 
> 赞同：2
> 
> 时间：2012-11-15T10:49:44.707
> 
> 标签：scala, logging, actor

首先，我是 Scala 新手：

我正在 Scala 中编写一个日志记录工具，它只是一个扩展 Actor 类的类。这样用户就可以扩展这个类并且日志功能将可用。基本上，每次扩展此类的参与者发送或接收消息时，我都想写入日志文件。为澄清起见，每个参与者都有自己的日志文件，以后可以对其进行整理。我正在采用 Lamport 时钟风格的方法来对事件进行排序，方法是让每个 Actor（扩展此类）都有自己的时间变量，该变量在消息发送-接收时更新，并且 Actor 将比较当前时间变量（只是一个正整数) 与发送者的并用两者中的较大者更新其时间变量。

现在我选择让它成为一个简单的方法，比如

```
sendMessage(recipient, message) 
```

用于发送消息。这只会记录到演员要向 X 发送消息的文件。

现在，我被难住的部分是在*接收*消息时进行日志记录。当演员收到消息时，我只想以如下格式记录此事件

```
myLogFile.writeLine(self.ToString+": Got a message from "+X+" at time: "+messageSendTime+", processed the message at" +Math.max(myCurrTime+1, messageSendTime+1)) 
```

但是我需要知道是谁发送了这条消息，除非我强迫用户在消息本身中包含这些信息（即发件人的姓名、时间变量等），否则它会变得很难（呃）。有没有办法获得实际发件人的参考？我希望它也能与远程演员一起工作。我能想到的唯一方法是，如果我在用户在他/她的类中定义的 act 方法上附加一些额外的 case 语句，例如：

```
def act {
    case => // the user's case statements
    ...

    //somehow I append these statements to the end for the Logger class's use
    case (LoggerClassRegisterInboundMessage, message, timeStamp)
        InboundMessagesMap.put(timeStamp, message)
} 
```

通过具有此功能，我可以在用户发送消息时发送这些隐藏消息来“在幕后”进行所有日志记录。但是，这仅在发件人*还*使用日志记录工具时才有效。所以一个更普遍的问题是：在 Scala 中有没有一种方法可以在 Scala 中获取发件人的名称/toString，而不管发件人的类别如何？

我实际上可以假设每个发送消息的类都将扩展 Logger 类。因此，如果有人知道如何附加到类似于上述示例的行为或类似的内容，我将同样感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:16:42.667

正如评论中所说，Akka 是要走的路。它比当前的 Scala Actor API 强大得多，后者无论如何都会在 2.10 中被弃用。

但是，为了解决您的特定问题，您可以为支持日志记录的演员创建​​一个特征，以类似于此的方式（我不知道这是否真的有效，但您可以尝试一下）：

```
trait LoggingActor extends Actor {
    override def receive[R](pf: PartialFunction[Any, R]): R = {
        //we are appending to the partial function pf a case to handle messages with logging:
        val loggingPf = pf orElse {
            case (LoggerClassRegisterInboundMessage, message, timeStamp) => {
                //do somthing with this log message.
                message //returning the unwrapped result afterwards
            }
        }
        super.receive(loggingPf)
    }

    //overriding the send as well
    override def !(msg: Any): Unit {
        //Wrap it in a logging message
        super ! (LoggerClassRegisterInboundMessage, msg, getTimestamp())
    }
} 
```

你会用这样的东西来创建你的演员：

```
val myActor = new MyActor with LoggingActor 
```

希望能帮助到你 ！

# ruby-on-rails - ruby on rails 控制器错误的未定义局部变量或方法“set_timezone”

> ID：13395939
> 
> 赞同：0
> 
> 时间：2012-11-15T10:49:47.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, timezone

我正在为用户设置一个时区， `ENV["TZ"] = time_zone`其中 time_zone 是该用户时区。我在表中还有一个名为`'time_zone'`该用户时区保存位置的列。
现在我想在他的时区检索该用户的事件。
要在模型中检索我的代码：

```
 def set_timezone
   Time.zone = current_user.time_zone || "Asia/Kolkata"
  end 
```

我的控制器：

```
before_filter :set_timezone 
```

但我收到这个错误`undefined local variable or method 'set_timezone' for SchedulersController:0x533fa78`
任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:53:52.217

您还可以将闭包/块作为参数传递给`before_filter`，如下所示：

```
before_filter do
  Time.zone = current_user.time_zone || "Asia/Kolkata"
end 
```

# performance - SVM 训练性能

> ID：13395943
> 
> 赞同：0
> 
> 时间：2012-11-15T10:50:03.873
> 
> 标签：performance, machine-learning, artificial-intelligence, octave, libsvm

我正在使用 SVMLib 在 MNIST 数据集上训练一个简单的 SVM。它包含 60.000 个训练数据。但是，我有几个性能问题：训练似乎没完没了（几个小时后，我不得不手动关闭它，因为它没有响应）。我的代码很简单，我只调用`ovrtrain`数据集，没有任何内核和任何特殊常量：

```
function features = readFeatures(fileName)
   [fid, msg] = fopen(fileName, 'r', 'ieee-be');
   header = fread(fid, 4, "int32" , 0, "ieee-be");

   if header(1) ~= 2051
      fprintf("Wrong magic number!");
   end

   M = header(2);
   rows = header(3);
   columns = header(4);

   features = fread(fid, [M, rows*columns], "uint8", 0, "ieee-be");
   fclose(fid);
   return;
endfunction

function labels = readLabels(fileName)
   [fid, msg] = fopen(fileName, 'r', 'ieee-be');
   header = fread(fid, 2, "int32" , 0, "ieee-be");

   if header(1) ~= 2049
      fprintf("Wrong magic number!");
   end

   M = header(2);

   labels = fread(fid, [M, 1], "uint8", 0, "ieee-be");
   fclose(fid);
   return;
endfunction

labels = readLabels("train-labels.idx1-ubyte");
features = readFeatures("train-images.idx3-ubyte");
model = ovrtrain(labels, features, "-t 0");  % doesn't respond... 
```

我的问题：这正常吗？我在虚拟机 Ubuntu 上运行它。我应该等待更长的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T16:12:05.393

我不知道你是否接受了你的回答，但让我告诉你我对你的情况的预测。对于像 LibSVM 这样的动力训练器来说，60.000 个示例并不多。目前，我正在研究一个包含 6000 个示例的训练集，训练需要 3 到 5 秒。但是，参数选择很重要，这可能需要很长时间。如果数据集中唯一特征的数量太多，那么对于任何示例，不存在的特征都会有很多零特征值。如果该工具在您的训练集上实施数据缩放，那么很可能这些零特征值将被缩放到某个非零值，从而为每个示例留下天文数字的唯一和非零值特征。

长话短说，如果您对 SVM 工具有足够的研究并理解我的意思，您可以在执行训练命令之前为其分配参数值，或者找到减少独特特征数量的方法。如果您还没有，请继续下载最新版本的 LibSVM，阅读自述文件以及工具网站上的常见问题解答。

如果不是这些情况，那么很抱歉占用您的时间:) 祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T11:07:26.790

考虑到数据的特征，这可能是一个收敛问题。

检查您作为默认选择的内核并更改它。另外，检查包裹的停止标准。此外，如果您正在寻找更快的实现，请查看 MSVMpack，它是 SVM 的并行实现。

最后，需要在您的情况下进行特征选择。您最终可以获得几乎一半的功能子集。此外，您只需要一部分数据进行训练，例如 60~70 % 就足够了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-18T03:51:50.147

首先，60k 是用于训练的巨大数据。除非您拥有超级计算，否则使用线性内核训练这么多数据将花费大量时间。此外，您还选择了 1 次线性核函数。最好使用高斯或更高次多项式核函数（使用相同数据集的 4 次函数显示出良好的转换精度）。尝试为 -c cost -m memory cachesize -e epsilon 终止标准容差添加 LIBSVM 选项（默认为 0.001）。首先使用 4 度的高斯/多项式运行 1000 个样本并比较准确度。

# ruby-on-rails - rails 类而不是 switch

> ID：13395953
> 
> 赞同：0
> 
> 时间：2012-11-15T10:50:42.233
> 
> 标签：ruby-on-rails, model, switch-statement, case

我一直在互联网上寻找一个多小时，但我找不到任何关于此的信息。

我正在为网站的数据创建过滤器，目前这些过滤器由案例声明处理

```
 class MyClass
    attr_accessor :attribute
    def self.function(value)
      query = case value
        when "open" then "Open"
        ...
      end
      where(:attribute => query)
    end
 end 
```

由于各种原因（即动态而不是硬编码过滤器），我想用getter和setter创建一个模型，但我无法让它工作

我的新功能：

```
def self.function(value)
  Attribute.name = value
  where(:attribute => Attribute.name)
end 
```

我的新模型：

```
class Attribute
  attr_accessor :name
end 
```

和测试：

```
it "should set the attribute to 'hello'" do
    MyClass.function("hello")
    Attribute.name.should eql "hello"
end 
```

给出一个错误：

```
Failure/Error: Myclass.function("hallo")
 NoMethodError:
   undefined method `name=' for Attribute:Class 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:19:13.697

这是因为`attr_accessor`正在定义实例方法（即：作用于 Attribute 实例的方法）并且您尝试将其用作类方法（即：Attribute.name）。

你可以这样重写你的函数：

```
def self.function(value)
  attribute = Attribute.new
  attribute.name = value
  where(:attribute => attribute.name)
end 
```

# amazon-web-services - Notepad++ 连接到 Ubuntu 12.04 AWS EC2

> ID：13395955
> 
> 赞同：1
> 
> 时间：2012-11-15T10:50:43.197
> 
> 标签：amazon-web-services, amazon-ec2, notepad++

Notepad++ 给了我这个错误，而我正在尝试使用 sftp 连接到我的 aws ec2

[NppFTP] Everything initialized
Connecting
[SFTP] Host key accepted
[SFTP] Error during authentication: Invalid private key file。
无法连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:52:56.267

我的错误是我使用了带有扩展名 *.ppk 的证书，而我在 putty 中使用了该证书。当我将它更改为 *.pem 扩展名时，问题就解决了。希望我的解决方案对您有所帮助。

# c# - 在 C# 中实现状态感知 sip 代理

> ID：13395961
> 
> 赞同：0
> 
> 时间：2012-11-15T10:51:05.510
> 
> 标签：c#, sip

我需要在 C# 中实现一个 sip 代理，我是 C# 和 sip 的初学者。

我找到了这个库：[SIPSorcery](http://sipsorcery.codeplex.com/)，但是它缺少文档。你知道其他更好的项目吗？有据可查并适合我的需要？

还有任何关于如何注册到代理、处理调用、...的示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:54:19.543

SIPSorcery 只是一个实验，因此我不会尝试将它用于任何严重的事情......引用 sipsorcery 开发人员的帖子......

“需要一个 C# 中的示例 SIP 客户端。我试图处理[http://sipsorcery.codeplex.com/](http://sipsorcery.codeplex.com/)但我什至无法拨打或接听电话的文档很少。推荐什么？”

“是的，我的文档出了名的糟糕，抱歉。

sipsorcery SIP 客户端很可能不是您想要的。这是一个纯 SIP 实现，没有 RTP 或音频功能，这意味着它作为一个独立的 VoIP 客户端毫无用处，您可以使用它来拨打和接听带有音频的呼叫。换句话说，它可以做 SIP 信令方面的事情，但没有对客户端应用程序不太好的音频功能；sipsorcery 项目主要是服务器端。

最近我一直在尝试使用 NAudio，目的是为软件电话示例添加一个非常基本的音频功能，但我不知道什么时候我能有一些工作。”

看看[http://www.iptel.org/ser/](http://www.iptel.org/ser/)一个好的/更完整的项目，有很多文档。

# javascript - 让 AngularJS 将依赖项注入到对象中，就像它已经为控制器所做的那样

> ID：13395962
> 
> 赞同：6
> 
> 时间：2012-11-15T10:51:06.540
> 
> 标签：javascript, dependency-injection, angularjs

我正在使用[AngularJS](http://angularjs.org/) 1.0.2 和[jQuery](http://jquery.com/) 1.8.2，我试图让 AngularJS 将依赖项注入对象，就像它对控制器所做的那样。[您可以在jsFiddle](http://jsfiddle.net/kappa/3fbZx/)上找到一个基本示例，在那里您会找到两个控制器 (`List`和`NewItem`)、一个对象 ( `Item`) 和一个带有服务的模块（分别命名为`services`和`communication`）。

我的问题是`Item`：

```
var Item = function (name, price) {
    var self = this;

    self.name = name;
    self.price = price;

    self.pretty = function () {
        return self.name + ": " + self.price;
    };
}; 
```

在其中我需要在外面使用一些东西，假设我想要`pretty`将属性格式化`price`为货币感知字符串的方法：

```
self.pretty = function () {
    return self.name + ": " + $filter("currency")(self.price);
}; 
```

但这不起作用，因为`$filter`没有定义。（请注意，的用法`$filter`只是一个例子，它可以是任何东西。）

并且修改`var Item = function (name, price) {`为`var Item = function ($filter, name, price) {`也不起作用，因为创建对象的不是 AngularJS（如控制器的情况），而是我。

那么，我怎样才能让 AngularJS 为我创建对象，或者让它解决我需要的依赖关系？

类似的东西，`var item = angular.create(Item, $scope.name, $scope.price);`或者`var item = new Item(angular.inject("filter"), $scope.name, $scope.price);`我认为...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-15T18:49:57.363

[可以使用$injector](http://docs.angularjs.org/api/AUTO.$injector)服务及其[instantiate(Type, locals)](http://docs.angularjs.org/api/AUTO.$injector#instantiate)方法让 AngularJS 实例化您自己的对象（并将依赖项注入其中！） 。

例如，给定这样的构造函数：

```
var Item = function ($filter, name, price) {
    var self = this;

    self.name = name;
    self.price = price;

    self.pretty = function () {
        return $filter('json')(self);
    };
}; 
```

可以创建一个`Item`这样的实例：

```
var item = $injector.instantiate(Item, { name: $scope.name, price: $scope.price }); 
```

请注意，该`instantiate`方法接受 2 个参数：

*   类型：构造函数。
*   locals：**不**应该注入而是按原样获取的值的哈希值。

这是一个[有效的 jsFiddle](http://jsfiddle.net/E7pgt/)（初始版本的简化版本）。

# mysql - MySQL 总和的平均值

> ID：13395965
> 
> 赞同：0
> 
> 时间：2012-11-15T10:51:21.900
> 
> 标签：mysql, sum, average

这是我的问题：

我有一张这样的桌子：

```
 Table Log
 int id;
 int time;
 timestamp DATE;
 int sid (FK to table Site); 
```

和一个表站点：

```
 Table Site;
 int id;
 varchar title; 
```

在我的日志表中，一个站点可以出现 0 次或 N 次，我需要获取每个站点的时间总和。

此请求已完成并且似乎有效，现在我需要在我的日志中获取站点标题和特定时期的总时间的平均值。

这是我的查询：

```
SELECT site, AVG(sumtime)
FROM (
    SELECT Site.TITLE as site, SUM(time) as sumtime FROM Log
    INNER JOIN sites ON Site.ID = Log.sid
    WHERE Log.DATE between '2012-11-13' AND '2012-11-15'
    GROUP BY Site.TITLE
) AS t1
GROUP BY t1.site; 
```

但是在这种情况下，平均值似乎不起作用，我得到的值是我在子查询中计算的总和，有什么帮助吗？

编辑：

这是一个数据样本：

```
Site
1 SiteA
2 SiteB

Log
1 2500 "2012-11-14 07:00:01" 1
2 3500 "2012-11-14 07:10:01" 1
3 4500 "2012-11-14 07:12:01" 1
4 6500 "2012-11-13 10:10:01" 1
5 2500 "2012-11-14 08:00:01" 2
6 3500 "2012-11-14 10:10:01" 2
7 5500 "2012-11-13 12:10:01" 2 
```

我现在需要的是，一个时期的时间总和的平均值（假设这个例子是 2012-11-13 到 2012-11-14），因此对于预期数据：

```
Site, avg time sum
Site A, 8500
Site B, 5750 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T11:43:11.567

我解决了我的问题，找到了编写查询的好方法（感谢@tombom）：

```
SELECT t1.site, AVG(sumtime)
FROM (
    SELECT Site.TITLE as site, SUM(time) as sumtime FROM Log
    INNER JOIN Site ON Site.ID = Log.sid
    AND Log.DATE between '2012-11-14' AND '2012-11-15'
    GROUP BY site, DATE(Log.DATE)
) AS t1
group by t1.site 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T11:00:29.473

试试这个

```
SELECT t1.site, AVG(t1.sumtime)
FROM (
SELECT Site.TITLE as site, SUM(time) as sumtime FROM Log
INNER JOIN sites ON Site.ID = Log.sid
WHERE Log.DATE between '2012-11-13' AND '2012-11-15'
GROUP BY time
) AS t1
GROUP BY t1.site; 
```

# ios - 向 UITextView 的框架添加阴影 向文本添加阴影

> ID：13395968
> 
> 赞同：2
> 
> 时间：2012-11-15T10:51:36.100
> 
> 标签：ios, uitextview, dropshadow, quartz-core

我有一个 UITextView，我在其中向框架添加了一些阴影，但是当我写的时候，文本也得到了相同的阴影。如何避免这个问题？

我的代码：

```
commentary = [[UITextView alloc]initWithFrame:CGRectMake(10, 435, 230, 120)];
commentary.font = STANDARDFONT;
commentary.backgroundColor = BACKGROUND;
commentary.layer.shadowColor = [UIColor blackColor].CGColor;
commentary.layer.shadowOffset = CGSizeMake(2, 2);
commentary.layer.shadowOpacity = 0.8;
commentary.layer.shadowRadius = 2.0;
commentary.layer.borderColor = [UIColor grayColor].CGColor;
commentary.layer.borderWidth = 1.5;
commentary.layer.cornerRadius = 5;
commentary.layer.masksToBounds = NO;
commentary.clipsToBounds = NO;
[self addSubview:commentary]; 
```

背景和标准是`[UICOLOR clearColor].CGColor`和`[UIFont fontWithName:@"TimesNewRomanPSMT" size:16];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:56:21.803

尝试设置图层背景颜色：`commentary.layer.backgroundColor = BACKGROUND.CGColor`

# linq - 用 LINQ 替换 for 循环

> ID：13395969
> 
> 赞同：0
> 
> 时间：2012-11-15T10:51:37.030
> 
> 标签：linq

是否有等同于以下代码的 LINQ 表达式？

```
int noOfColumns = 10;
for (int i = 2; i <= noOfColumns+1; i++)
{                    
    sql.AppendFormat(" [{0}{1}] [varchar]({2}),", "commodity", columnLength);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:53:51.157

```
Enumerable.Range(2, noOfColumns+1)
  .ToList()
  .ForEach(i => 
     sql.AppendFormat(" [{0}{1}] [varchar]({2}),", "commodity" columnLength)); 
```

但我不认为它看起来更好:-)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:02:37.940

对于它的价值，（编译）Linq 替换将是：

```
IEnumerable<string> cols = Enumerable.Range(2, noOfColumns +1)
    .Select(i => string.Format(" [{0}] [varchar]({1})", "commodity", columnLength));
string sql = string.Join(",", cols); 
```

但我必须承认，我不知道你在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-19T16:23:17.497

的参数`Enumerable.Range`是`start`和`count`。这意味着它不会直接替换 for 循环。

`for(var i = 5; i < 8; ++i)`将产生从 5 到 7 的数字。

`Enumerable.Range(5, 8)`将产生从 5 到 12 (5+8-1) 的数字。

要获得预期的效果，`Enumerable.Range(start, end - start)`就需要使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:57:57.777

试试这个，

```
Enumerable.Range(2, noOfColumns).ToList().ForEach(r => { sql.AppendFormat(" [{0}{1}] [varchar]({2}),", "commodity" columnLength); }); 
```

# awk - 重现 grep "my pattern" myfile.log | 排序 | 独特 | wc -l 在 awk 中

> ID：13395971
> 
> 赞同：3
> 
> 时间：2012-11-15T10:51:41.093
> 
> 标签：awk, mingw

如果我在我的目标文件上执行这个 grep，我会得到例如 275 作为结果。

但我想学习 awk，所以在 awk 中尝试了这个：

```
 awk 'BEGIN { count=0 } /my pattern/ { count++ } END { print count }' myfile.log 
```

这将按预期打印 275。

所以变得雄心勃勃，我创建了一个这样的 awk 脚本：

```
BEGIN { 
   print "Log File Analysis";
   message=0;
   events=0;
}

{
  /message/  {  messages++;  }
  /event/    { events++;  }
}
END { 
  print "messages:\t" messages;
  print "events:\t" events;
} 
```

我收到语法错误，

```
$ awk -f test_learn.awk test_log.log
awk: test_learn.awk:16:   /message/  {  messages++;  }
awk: test_learn.awk:16:              ^ syntax error 
```

我究竟做错了什么？

我在 Windows 7 上使用来自 MinGW shell 的 awk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:04:24.243

尝试

```
 awk 'BEGIN { count=0 }; /my pattern/{count++ }; END { print count }' myfile.log 
```

或者

```
awk 'BEGIN { count=0};  { if ($0 ~ /my pattern/)  count++ }; END { print count };' myfile.log 
```

更好的是，由于变量默认初始化为零，您不需要 BEGIN 块，所以

```
awk '/my pattern/{count++ }; END { print count };' myfile.log 
```

您可以将默认循环应用于文件中的所有行，如使用 if 的 2d 示例中，或者您可以有多个块，按模式“过滤”，如上所述，并在您编辑的添加中。

当你做单行时，一些 awks 需要分号来将 BEGIN 和 END 块与主循环块分开。

**编辑**

与您的第二期相同的想法，并整合 Ed Morton 的改进（谢谢）

```
/message/  {  messages++  }
/event/    { events++  }

END { 
 print "Log File Analysis"
 print "messages:\t" messages
  print "events:\t" events
} 
```

IHTH

# java - 处理独占参数 java servlet

> ID：13395974
> 
> 赞同：0
> 
> 时间：2012-11-15T10:51:48.740
> 
> 标签：java, servlets, parameters, request, handle

我的 html 页面只发送**一个**参数。我需要处理它并发送响应。此代码处理多个参数，在我的情况下不太好：

```
 Enumeration<?> paramNames = request.getParameterNames();
        while (paramNames.hasMoreElements()) {
            String paramName = (String) paramNames.nextElement();
        } 
```

**但是，如果我只有一个参数并且不知道它的名称，**我该如何修改此代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:02:31.300

尝试这样的事情。

```
Map<String,String[]> paramMap = request.getParameterMap();

    String  myValue = paramMap.get(paramMap.keySet().iterator().next())[0]; 
```

# html - 如何使用 MVC 3 在 IE6 中将文本放在图像旁边

> ID：13395977
> 
> 赞同：1
> 
> 时间：2012-11-15T10:51:52.673
> 
> 标签：html, css, asp.net-mvc-3, internet-explorer-6

我希望有人能回答这个问题，因为我已经把头发扯了一天了。

我要做的就是在图像旁边放置一些文本。无论我尝试哪种方法，IE6 都坚决拒绝正确呈现它。

这是 HTML/Razor：

```
<div class='prod-img'>
    <img src="@Url.Content("~/Content/ButtonImages/BackButton.bmp")" onclick="Quit()"/>
</div>

<div class='prod-text'>       
    <p>Something here</p>
</div> 
```

这是CSS：

```
.prod-img
{
    position: relative;  
    top: .8em;
    left: .1em;    
}

.prod-text
{
    position: absolute;
    left: 5em;
    top: .75em;   
} 
```

出于某种原因，IE6 将文本填充在图像下方而不是旁边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:03:23.997

在 IE6 中向左浮动似乎可以解决问题：

```
.prod-img
{
    float: left; 
}

.prod-text
{
   margin-left: 10px;    
} 
```

JS Fiddle在这里：http: [//jsfiddle.net/qSExE/4/](http://jsfiddle.net/qSExE/4/)

如果这不适用于您的完整代码，那么我会冒险猜测没有足够的水平空间来容纳文本，所以它会下降到图像下方（浮动下降）？

# java - 尝试设置 URLConnection 时出现 SSLHandshakeException

> ID：13395983
> 
> 赞同：2
> 
> 时间：2012-11-15T10:52:24.953
> 
> 标签：java, ssl, keystore

我有以下代码：

```
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.URL;
import java.net.URLConnection;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;
import java.security.cert.X509Certificate;

public class TrackWrapper {
  public static void main(String[] args) throws Exception {
/*
 *  fix for
 *    Exception in thread "main" javax.net.ssl.SSLHandshakeException:
 *       sun.security.validator.ValidatorException:
 *           PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:
 *               unable to find valid certification path to requested target
 */
TrustManager[] trustAllCerts = new TrustManager[] {
   new X509TrustManager() {
      public java.security.cert.X509Certificate[] getAcceptedIssuers() {
        return null;
      }

      public void checkClientTrusted(X509Certificate[] certs, String authType) {  }

      public void checkServerTrusted(X509Certificate[] certs, String authType) {  }

   }
};

SSLContext sc = SSLContext.getInstance("SSL");
sc.init(null, trustAllCerts, new java.security.SecureRandom());
HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

// Create all-trusting host name verifier
HostnameVerifier allHostsValid = new HostnameVerifier() {
    public boolean verify(String hostname, SSLSession session) {
      return true;
    }
};
// Install the all-trusting host verifier
HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);
/*
 * end of the fix
 */

URL url = new URL("https://somedomain.com:1234");
URLConnection con = url.openConnection();
con.connect();

  }
} 
```

第一部分只是一个复制粘贴的快速修复，用于接受我从另一个 StackOverflow 问题中获得的每个证书（我确信这还没有完全准备好用于生产），第二部分我尝试连接到一些 SSL-客户端证书在我的密钥库中的安全站点，我收到以下错误消息：

```
Exception in thread "main" javax.net.ssl.SSLHandshakeException: Received fatal alert: bad_certificate
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1806)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:986)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1170)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1197)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1181)
at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:434)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:133)
at TrackWrapper.main(TrackWrapper.java:54) 
```

因为我承认对 SSL 相当一无所知，所以我会很感激一些关于如何解决这个问题的见解和演练。

经过一些尝试，我现在收到以下错误：

```
Exception in thread "main" java.net.SocketException: Software caused connection abort: recv failed
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:129)
at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.waitForClose(SSLSocketImpl.java:1555)
at com.sun.net.ssl.internal.ssl.HandshakeOutStream.flush(HandshakeOutStream.java:103)
at com.sun.net.ssl.internal.ssl.Handshaker.sendChangeCipherSpec(Handshaker.java:689)
at com.sun.net.ssl.internal.ssl.ClientHandshaker.sendChangeCipherAndFinish(ClientHandshaker.java:985)
at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverHelloDone(ClientHandshaker.java:904)
at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:238)
at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:925)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1170)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1197)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1181)
at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:434)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:133)
at TrackWrapper.main(TrackWrapper.java:54) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:26:28.640

You should have correct SSL certificate in your keystore, of server to whom you are trying to connect. Check these examples. These are working for me.

[example 1](http://www.imrantariq.com/blog/?p=867) [example 2](http://www.imrantariq.com/blog/?p=867)

You can export that server certificate from browser (if accessible) or there are other ways to get certificates over the internet. Your certificates should match. Once you get certificate you can make keystore from any tool. alternatively you can make keystore from [this code](http://www.imrantariq.com/blog/?p=423).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T11:19:57.617

您是否检查过是否需要客户端证书？

错误消息也可能来自服务器端。

还使用参数启动您的客户端`-Djavax.net.debug=all`。在那里你应该看到更多关于失败的提示。

# c++ - std::vector 和复制构造函数

> ID：13395984
> 
> 赞同：6
> 
> 时间：2012-11-15T10:52:28.130
> 
> 标签：c++, gcc, stl

```
vector<X> v;
X x;
v.push_back(x); v.push_back(x); v.push_back(x); 
```

为什么这段代码调用一个类的复制构造函数`X` **6 次**？（使用 g++ 4.7.2 STL）

拜托，我想**确切地**知道这个特定的 STL 在引擎盖下会发生什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T10:57:09.430

当您插入`x`时`push_back()`，最终会重新分配内存以为新元素腾出空间。然后必须使用复制构造函数复制已插入的成员`X(const X&)`。

如果你插入

```
v.reserve(3); 
```

至少在前三个`push_back()`s 中阻止了重新分配，因此，将只有三个调用`X(const X&)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:24:22.463

这就是发生的事情：

在第一次 push_back 之前，向量的容量（适合其分配的空间的元素数）为 0。因此，当您执行第一次 push_back 时，它为 1 个项目分配空间并调用复制构造函数（第一次调用） .

所以现在容量是一个，你告诉它添加另一个项目。所以它必须分配更多的空间，在这种情况下，空间用于多一个项目并将原始项目复制到新空间（第二次调用）。第二个 push_back 再次调用复制构造函数（第三次调用）。

现在您的容量为 2，并告诉它添加另一个项目。所以它必须分配更多空间并将项目复制到新空间（第 4 次和第 5 次调用）。然后第三个 push_back 再次调用复制构造函数（第 6 次调用）。

正如其他人指出的那样，您可以使用reserve，它将预先分配空间，避免重新分配的需要，从而调用复制构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T11:14:45.203

正确的答案是`std::vector`使用加倍数组实现（参见：[http](http://en.wikipedia.org/wiki/Dynamic_array) ://en.wikipedia.org/wiki/Dynamic_array ），它调用的复制构造函数大约`2 * N`是复制构造函数的倍数。

例如，因为`N = 100,000`它调用了复制构造函数`231,071`次。正如已经指出的那样，可以通过调用来减少重新分配的次数 to `v.reserve()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T10:59:37.027

您可以事先使用向量保留在向量中创建空间，以加快向向量添加元素并阻止这种情况发生。

# python - 使用 ElementTree 或 cElementTree 时命名空间复杂化

ID：13395989

赞同：2

时间：2012-11-15T10:52:36.393

标签：python, xml, elementtree, celementtree

# c# - c#无法连接两台电脑

> ID：13395991
> 
> 赞同：0
> 
> 时间：2012-11-15T10:52:44.137
> 
> 标签：c#, .net, sockets, networking, network-programming

我正在尝试在两台计算机之间发送消息。我已经能够建立连接，但由于某些奇怪的原因，我无法获取流。

服务器代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.IO;

namespace chat_server
{
 class Program
 {
    static void Main(string[] args)
    {
        TcpListener server = new TcpListener(IPAddress.Any, 9999);
        server.Start();

        Console.WriteLine("Waiting for client connections");
        TcpClient client = server.AcceptTcpClient();
        Console.WriteLine("Client request accepted");

        NetworkStream stream = client.GetStream();
        StreamReader reader = new StreamReader(stream);
        StreamWriter writer = new StreamWriter(stream);

        Console.WriteLine("The message is " + reader.ReadToEnd());
    }
 }
} 
```

客户代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.IO;

namespace chat_client
{
 class Program
 {
    static void Main(string[] args)
    {
        TcpClient client = new TcpClient("localhost", 9999);

        NetworkStream stream = client.GetStream();
        StreamReader reader = new StreamReader(stream);
        StreamWriter writer = new StreamWriter(stream);

        writer.Write("Hello world");
        Console.WriteLine("Message Sent");
        Console.ReadKey();
    }
 }
} 
```

我的服务器代码通过打印接受的客户端请求来确认客户端连接。但是由于某种原因，我无法从流中获取数据。快速帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:54:06.257

您需要刷新流才能实际发送数据。

尝试：

```
writer.Write("Hello world");
writer.Flush(); 
```

查看 MSDN 文档以获取更多信息：

同步套接字服务器： http: [//msdn.microsoft.com/en-us/library/6y0e13d3.aspx](http://msdn.microsoft.com/en-us/library/6y0e13d3.aspx) 异步套接字服务器：http: [//msdn.microsoft.com/en-us/library/5w7b7x5f.aspx](http://msdn.microsoft.com/en-us/library/5w7b7x5f.aspx)

这是一个更详细地解释套接字的来龙去脉的网站：http: [//nitoprograms.blogspot.co.uk/2009/04/tcpip-net-sockets-faq.html](http://nitoprograms.blogspot.co.uk/2009/04/tcpip-net-sockets-faq.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:16:12.500

在服务器端，

`static TcpListener server;`在顶部添加

然后`server.Start();

```
 Socket soc = listener.AcceptSocket();

        Console.WriteLine("Connection successful");
        Stream s = new NetworkStream(soc);

        StreamReader reader = new StreamReader(s);
        StreamWriter writer= new StreamWriter(s);

        sw.AutoFlush = true;
        sw.WriteLine("hello world");` 
```

在客户端

```
 TcpClient client = new TcpClient("localhost", 9999);
        Stream s = client.GetStream();
        Console.WriteLine("Connection successfully received");

        StreamWriter writer = new StreamWriter(s);
        StreamReader reader = new StreamReader(s);
        sw.AutoFlush = true;
        string dis=reader.readLine();
        Console.WriteLine(dis); 
```

希望它现在可以工作。

# jquery - 在 Aptana Studio 3 中激活 jquery mobile html5 属性代码辅助

> ID：13395999
> 
> 赞同：1
> 
> 时间：2012-11-15T10:53:06.277
> 
> 标签：jquery, html, aptana

我正在寻找一种在 Aptana Studio 3 中启用代码辅助或代码完成的方法，涉及 jquery mobile 特定的 html5 属性，例如“data-transition="pop"”。

我不是在寻找 jquery 移动 javascript 代码辅助。