# StackOverflow 问答 12964000-12964999

# php - 关于 php 注册的安全帮助

> ID：12964003
> 
> 赞同：-3
> 
> 时间：2012-10-18T21:25:31.507
> 
> 标签：php, mysql, sql

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

这是我用 PHP 进行的简单注册。我只是想知道如何使它真正安全，因为我是 PHP 新手，所以示例也会有所帮助。总而言之，任何资源或指导都会很棒。

```
<?php

$email = $_POST["email"];
$password = $_POST["password"];
$fname = $_POST["first_name"];
$lname = $_POST["last_name"];

$db = "mydatabase";
$connect = mysql_connect("localhost","root","");
if(!$connect){
    die('Could not connect.');  
}

$query = "INSERT INTO users (id, email, password, first_name, last_name) VALUES (DEFAULT, '".$email."', '".$password."', '".$fname."', '".$lname."')";

mysql_select_db($db, $connect);

if(!mysql_query($query)){
    echo 'Failed: '.mysql_error();
}
else{
    echo 'You have registered.';
}

mysql_close($connect);

?> 
```

这是寄存器输入表

```
<html>
<head>
</html>
<body>

<form action="new_user_db.php" method="POST">
    <input type="text" name="first_name" placeholder="First Name" required><br>
    <input type="text" name="last_name" placeholder="Last Name" required><br>
    <input type="email" name="email" placeholder="E-mail" required><br>
    <input type="password" name="password" placeholder="Password" required><br>
    <input type="submit" value="Register">
</form>

</body>
</html> 
```

感谢您的所有反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:31:22.780

安全问题：

1.  使用[MySQLi](http://in2.php.net/mysqli) / [PDO](http://in1.php.net/pdo)。mysql_ 函数已弃用。

2.  停止使用**root**帐户运行您的 mysql 查询。创建具有最低要求权限的新数据库用户

3.  最后（与 PHP 无关），研究 SSL 并保护凭证从客户端到服务器的移动。

此外，不是安全风险，而是...

在**每个**使用它的 PHP 文件中都有您的凭据是不好的做法。将它放在一个**单独的 PHP**中，并在您想要建立连接时[包含](http://php.net/manual/en/function.include.php)/[要求它。](http://php.net/manual/en/function.require.php)这可以防止您在更改数据库服务器/用户/密码时进行多次更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:30:47.883

使用准备好的语句

```
$db = mysqli_connect($dbserver, $dbuser, $dbpass,$dbname);

$sql = "insert into mytable (mycol1, mycol2) values (?,?)";

$statement = $db->prepare($sql);

$statement -> bindparam("ss",$myval1, $myval2)'

mysqli_stmt_execute(#statement); 
```

# c# - 将 MVC 4 应用程序发布到 azure 后的身份验证问题

> ID：12964004
> 
> 赞同：9
> 
> 时间：2012-10-18T21:25:38.060
> 
> 标签：c#, asp.net-mvc, razor, forms-authentication, azure-web-app-service

我有一个在 Azure 网站上托管的基本 ASP.NET MVC 4 站点。身份验证是表单身份验证，尚未从默认模板自定义。每次我发布时，当我重新访问我的网站时，它只会挂起很长的超时时间（可能是几分钟），然后才最终向我显示一条错误消息。我可以通过在浏览器中删除网站的 cookie 并重新加载来恢复。

最初的问题只是试图访问需要身份验证的页面，但后来我将其添加到我的共享中`_Layout.cshtml`：

```
@if (User.IsInRole("Admin"))
{
    <li>@Html.ActionLink("Admin", "Index", "Admin")</li>
} 
```

这意味着在新发布后根本无法访问任何页面，因此我什至无法单击注销链接，这是我过去能够解决问题的另一种方式。

我有什么配置错误吗？虽然我有一个我可以自己使用的解决方法，但在我发布更新后，这对于网站用户来说并不是一个好的体验。

编辑：从 ELMAH 日志中，当我调用 IsInRole 时，表单身份验证似乎正在尝试创建 SQL Express 数据库。我不明白为什么会这样做，因为我的表单身份验证都设置为使用我的 SQL Azure 数据库。

```
System.Web.HttpException (0x80004005): Unable to connect to SQL Server database. ---> System.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, Boolean withFailover)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject, Boolean withFailover)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
ClientConnectionId:00000000-0000-0000-0000-000000000000
   at System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trusted, String connectionString)
   at System.Web.Management.SqlServices.SetupApplicationServices(String server, String user, String password, Boolean trusted, String connectionString, String database, String dbFileName, SqlFeatures features, Boolean install)
   at System.Web.Management.SqlServices.Install(String database, String dbFileName, String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile(String fullFileName, String dataDir, String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.EnsureSqlExpressDBFile(String connectionString)
   at System.Web.DataAccess.SqlConnectionHelper.GetConnection(String connectionString, Boolean revertImpersonation)
   at System.Web.Security.SqlRoleProvider.GetRolesForUser(String username)
   at WebMatrix.WebData.SimpleRoleProvider.GetRolesForUser(String username)
   at System.Web.Security.RolePrincipal.IsInRole(String role) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T19:21:21.750

在尝试了各种博客文章中的数十种不同建议后，我找到了解决方案。将`InitialiseSimpleMembership`属性添加到我的家庭控制器可以解决问题。

```
[InitializeSimpleMembership]
public class HomeController : Controller 
```

进行此更改后，我成功地管理了几次发布，没有出现任何问题。我怀疑原因是`InitializeSimpleMembershipAttribute`构造函数中的以下代码行需要在进行任何调用之前运行`User.IsInRole`：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

我想最好的办法就是跑`InitializeSimpleMembership`进去`Application_Start`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T16:13:16.630

在[`tutorial`](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)Windows Azure 上部署应用程序时，您可以按照以下步骤设置 SQL 数据库。您必须在 web.config 中设置正确的连接字符串，当您使用 Internet 模板创建新的 ASP.NET MVC 4 应用程序时，默认情况下它指向本地 SQL Express 数据库。

您的 SQL Azure 连接字符串将如下所示：

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=tcp:#server#.database.windows.net,1433;Initial Catalog=#DBName#;User ID=UserName#@#server#;Password=#password#;MultipleActiveResultSets=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T08:17:26.387

虽然这个问题已经得到解答，但我想我可能会很快分享我遇到同样问题的经验。我的情况与马克的情况略有不同。

所以，我`InitializeSimpleMembership`在所有控制器上都有这个属性（实际上我在我的所有控制器继承的基本控制器上都有它），但是我仍然遇到同样的问题。现在，在我的基本控制器中，我还重写了该`Initialize`方法，以便为我们的应用程序设置一些上下文信息。此上下文设置的一部分是检查当前用户是否处于特定角色中，因此该`IsUserInRole`方法是在此`Initialize`方法中被调用的，所有这些都是在调用任何操作方法之前。

现在，如果看一下`InitializeSimpleMembership`类，就会注意到初始化实际上是在`OnActionExecuting`方法中完成的（即`InitializeSimpleMembership`继承自`ActionFilterAttribute`）：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
      // Ensure ASP.NET Simple Membership is initialized only once per app start
      LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
} 
```

`IsUserInRole`就我而言，这种成员资格初始化发生得太晚了……也就是说，在我调用基本控制器的覆盖`Initialize`方法之前，我需要初始化简单成员资格。

对我来说解决方案相对简单：我`InitializeSimpleMembership`完全删除了该属性并将其逻辑直接放入我的基本控制器中，以便我可以从我的`Initialize`方法中调用它，如下所示：

```
public class BaseController : Controller
{
    private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized;

    private class SimpleMembershipInitializer
    {
        public SimpleMembershipInitializer()
        {
            try
            {
                WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
            }
            catch (Exception ex)
            {
                throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
            }
        }
    }

    ...

    protected override void Initialize(RequestContext requestContext)
    {
        base.Initialize(requestContext);
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        SetupControllerContext(); // my function that calls 'IsUserInRole'
    }
} 
```

现在我想应该`Application_Start()`按照 Mark 的建议重构它并将其放入方法中，但你明白了 :)。`Initialize`我只是想解释一下我的经验，以防万一有人在他们的控制器的覆盖方法中做类似的事情。

# php - 在 PHP SDK 中获取 Photo_ID

> ID：12964006
> 
> 赞同：-1
> 
> 时间：2012-10-18T21:25:46.657
> 
> 标签：php, facebook, upload

如何从我的应用使用 PHP SDK 代码上传的照片中获取 Photo_ID：

```
$facebook->setFileUploadSupport(true);
$img = '/tmp/mypic.png';
$photo = $facebook->api(‘/me/photos’, ‘POST’,
                        array( ‘source’ => ‘@’ . $img,
                               ‘message’ => ‘Photo uploaded via the PHP SDK!’
                       )); 
```

没有看到它会给出任何回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:47:27.010

上传成功的响应是照片的id，[例如](https://developers.facebook.com/blog/post/498/)：

```
{
   "id": "1001207389476"
} 
```

所以`$photo`应该保持相似的值。

# ruby-on-rails - Ruby on Rails 可以部署在 Azure 网站上吗？

> ID：12964010
> 
> 赞同：5
> 
> 时间：2012-10-18T21:26:15.500
> 
> 标签：ruby-on-rails, ruby, azure

我可以在 Azure 网站上部署 Ruby on Rails 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T21:43:13.453

还没有。目前仅支持 .NET 和 PHP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T15:02:51.987

微软似乎增加了他们的 Azure 产品：

*   **[Microsoft Azure：Ruby 开发人员中心](http://azure.microsoft.com/en-us/develop/ruby/)**

*   **Windows Azure SDK for Ruby** ( [Github](https://github.com/Azure/azure-sdk-for-ruby) , [docs](http://rubydoc.info/gems/azure/frames) )
    该项目提供了一个 Ruby 包，可以轻松访问和管理 Windows Azure 服务，如存储、服务总线和虚拟机。

*   **[Azure VM 上的 Ruby on Rails Web 应用程序](http://azure.microsoft.com/en-us/documentation/articles/virtual-machines-ruby-rails-web-app-linux/)**
    本教程介绍如何使用 Linux 虚拟机在 Azure 上托管基于 Ruby on Rails 的网站。本教程假定您之前没有使用 Azure 的经验。完成本教程后，您将拥有一个基于 Ruby on Rails 的应用程序并在云中运行。

他们的[文档中心](http://azure.microsoft.com/en-us/documentation/)现在（2014 年 4 月）列出了以下平台：

*   [。网](http://azure.microsoft.com/en-us/develop/net/)
*   [节点.js](http://azure.microsoft.com/en-us/develop/nodejs/)
*   [爪哇](http://azure.microsoft.com/en-us/develop/java/)
*   [iOS、安卓、Windows](http://azure.microsoft.com/en-us/develop/mobile/)
*   [PHP](http://azure.microsoft.com/en-us/develop/php/)
*   [Python](http://azure.microsoft.com/en-us/develop/python/)
*   [红宝石](http://azure.microsoft.com/en-us/develop/ruby/)
*   [媒体](http://azure.microsoft.com/en-us/develop/media-services/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T22:33:36.680

它现在处于预览状态。我刚刚收到通知：[https ://feedback.azure.com/forums/169385-web-apps-以前-websites/suggestions/5582607-add-deploy-support-for-ruby-rails-sinatra-app](https://feedback.azure.com/forums/169385-web-apps-formerly-websites/suggestions/5582607-add-deploy-support-for-ruby-rails-sinatra-app)

# html - 使中央 div 填充剩余的可用空间

> ID：12964012
> 
> 赞同：7
> 
> 时间：2012-10-18T21:26:36.293
> 
> 标签：html, css

我目前正在开发一个 HTML5 和 CSS 项目，并且在让容器正确显示时遇到问题。

我想要的是顶部的标题栏，一个包含其他 2 个 div 的包装器，然后是底部的页脚，它始终位于窗口底部或内容的底部，以更下方为准。

这是一个片段：

```
html, body
{
	padding: 0;
	margin: 0;
}

#wrapper
{
	position: absolute;
	background-color: purple;
	height: 100%;
	width: 100%;
	margin-top: 0px;
}

header
{
	position: absolute;
	width: 100%;
	height: 80px;
	background-color: black;
	color: white;
}

#articleContainer
{
	background-color: blue;
	width: 75%;
	margin-left: auto;
	margin-right: auto;
	height: auto;
	margin-top: 80px;
}

#articleContent
{
	width: 70%;
	background-color: yellow;
	float: left;
}

#articleSideBar
{
	position: relative;
	width: 28%;
	background-color: green;
	float: right;
	margin-left: 2px;
	margin-right: 2px;
	display: inline;
	margin-top: 0px;
	float: right;
	height: auto;
}
```

```
<html>
	<head>
		<title>index</title>
		<link href="ArticleStyleSheet.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<div id="wrapper">
			<header>
				Header
			</header>
			<div id="articleContainer">
				Article Container

				<div id="articleContent">
					The quick brown fox jumped over the lazy dogs back. All good men must come to the aid of the party
				</div>

				<div id="articleSidebar">
					Article Sidebar
				</div>
			</div>
		</div>
	</body>
</html>
```

目前 articleContainer 只是有多少行的高度。我想要的是填充屏幕其余部分的 formContainer，我尝试添加 height: 100%; 属性，但随后感觉表单容器超过了屏幕大小。即出现一个垂直滚动条，它与标题的高度大致相同。如何在没有滚动条的情况下让 formContainer 填充可用的屏幕空间。但是，如果内容大于表单容器，则应展开以填充额外的空间。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T21:34:14.137

如果您真的想要一个 css3 解决方案，那么您正在寻找的解决方案就是**[如此 fiddle](http://jsfiddle.net/CeGjY/)**`height: calc(100% - 80px);`中`#articleContainer`所示的设置，但是这不适用于所有浏览器。

使用[**旧的 flexbox 模型**](http://jsfiddle.net/CeGjY/5/)css 的示例：

```
html, body
{
    padding: 0;
    margin: 0;
    height: 100%;
}

#wrapper
{
    display: -webkit-box;
    -webkit-box-orient: vertical;
    min-height: 100%;
    background-color: purple;
    width: 100%;
    margin-top: 0px;
}

header
{
    width: 100%;
    height: 80px;
    background-color: black;
    color: white;
}

#articleContainer {
    width: 75%;
    margin: auto;
    background-color: blue;
    display: -webkit-box;
    -webkit-box-flex: 1;
}

#articleContent
{
    width: 70%;
    background-color: yellow;
}

#articleSideBar
{
    position: relative;
    width: 28%;
    background-color: green;
    margin-left: 2px;
    margin-right: 2px;
    display: inline;
    margin-top: 0px;
    height: auto;
}​ 
```

同样的事情，但这次使用[**新的 flexbox 模型**](http://jsfiddle.net/CeGjY/7/) css

```
html, body
{
    padding: 0;
    margin: 0;
    height: 100%;
}

#wrapper
{
    display: -webkit-flex;
    -webkit-flex-direction: column;
    min-height: 100%;
    background-color: purple;
    width: 100%;
    margin-top: 0px;
}

header
{
    width: 100%;
    height: 80px;
    background-color: black;
    color: white;
}

#articleContainer {
    width: 75%;
    margin: auto;
    background-color: blue;
    display: -webkit-flex;
    -webkit-flex: 1;
}

#articleContent
{
    width: 70%;
    background-color: yellow;
}

#articleSideBar
{
    position: relative;
    width: 28%;
    background-color: green;
    margin-left: 2px;
    margin-right: 2px;
    display: inline;
    margin-top: 0px;
    height: auto;
}​ 
```

[**只有黄色段落的版本**](http://jsfiddle.net/CeGjY/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:45:25.093

我以前使用过这种方法，棘手的部分是将页眉和页脚放在正确的位置。一旦你有了剩下的应该就位：

### jsfiddle：

[http://jsfiddle.net/Ug5JR/](http://jsfiddle.net/Ug5JR/)

### CSS：

```
html, body { margin: 0; padding: 0; height: 100%; }

header {
  position: relative;
  display: block;
  background: red;
  height: 100px;
  z-index: 1;
}

article {
  display: block;
  background: yellow;
  min-height: 100%;
  margin-top: -100px;
  margin-bottom: -100px;
}

article section {
  display: block;
  padding-top: 100px;
  padding-bottom: 100px;
  overflow: hidden;
}

footer{
  display: block;
  background: blue;
  height: 100px;
}

p:hover {
  height: 4000px;
} 
```

### 标记：

```
<header></header>
<article>
  <section>
     <p>Hover me and I'll push the content larger than the page</p>
  </section>
</article>
<footer></footer> 
```

诀窍是让负边距吸收页眉和页脚使用的空间，这会导致 100% 的计算自行更正。然后，您可以使用任何内部元素在顶部和底部使用填充或边距来抵消负边距。因此，虽然您的文章元素几乎是页面的 100% 高度，但您的文章 > 部分元素将显示正确的高度并正确放置它的子元素。

# c++ - 减少内存分配 GCC 命令

> ID：12964013
> 
> 赞同：4
> 
> 时间：2012-10-18T21:26:36.767
> 
> 标签：c++, linux, gcc, memory-management

今天，在我的计算机科学课上，有人告诉我，**我可以调整程序在编译期间可以分配的内存量**（使用 GCC，Linux）。默认情况下，此数量设置为最佳模式（这意味着尽可能多）。

在调试我的应用程序期间，我可以从这个编译器功能中受益匪浅，因为我需要正确处理分配错误，这在我的具有超过 16 GB RAM 的 PC 上是相当棘手的。

**有谁知道这个选项是什么？**我希望`gcc --maxalloc 1024`这意味着我的程序最多可以分配 1024 字节的内存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T21:30:25.683

我不知道这个的*编译器*选项。但是，`ulimit`Linux 命令可用于限制进程可以使用的内存量。

例如，以下命令将限制从当前 shell 运行的应用程序的数据段大小：

```
ulimit -d 1024K 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:00:47.323

The simplest way is to overload global `new/delete` operator and limit size of memory that you can allocate.

This is completely C++ and also work on any platform with any compiler!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T05:22:39.787

你的问题模棱两可。如果你关心编译器`gcc`或`g++`编译器在编译过程中使用的内存资源，你可以通过 using 来衡量它们`gcc -ftime-report`（它报告了各种 GCC 阶段的时间和内存）。您可以降低编译器使用棘手的 GCC 程序参数进行编译所消耗的资源（深入了解 GCC 文档以获取详细信息），或者通过使用与[setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)系统调用接口的 shell的`ulimit`内置函数来降低内存限制。正如其他人所建议的那样，您还可以限制可用内存以使用相同的内置命令和系统调用来运行您的程序。`bash``ulimit``setrlimit`

但是您可能关心程序消耗的内存资源。我建议你编译`g++ -Wall -g`并首先学习使用[valgrind](http://valgrind.org/) (and `gdb`) 来调试内存泄漏。你甚至可以重新定义`malloc`and `free`。

或者，您可以考虑使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)。然后，您将使用`GC_malloc`代替`malloc`（或使用`new(gc)`代替`new`），您将不再关心`free`or `delete`。但它是一个保守的[垃圾收集器](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)（运气不好时可能会留下一些内存泄漏）。

要了解更多某个进程使用的地址空间，请使用[proc(5)](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)伪文件系统，特别是`/proc/1234/maps`对于进程 1234`/proc/self/maps`的映射，或者对于您自己的进程的映射。（`cat /proc/self/maps`在终端上运行以查看该`cat`命令的内存映射）。还有`pmap`命令。

# apache - example.com./ 与 example.com/ 对访问者跟踪程序造成问题

> ID：12964019
> 
> 赞同：0
> 
> 时间：2012-10-18T21:26:55.860
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我试图搜索这个，但由于搜索词，我无法在任何地方找到答案。

我的访问者跟踪网站（我使用 Piwik）无法解读以下问题。

`example.com./`对比`example.com/`

`example.com./`当键入以查找网站当然是错误的时，其他人会以某种方式访问​​我的网站，并且他们访问的每个页面都显示为外部链接和这个`./`问题。

我如何`.htaccess`（在我的域的根目录中）添加一个规则来解决这个问题以及可能与此类似的其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:46:30.910

这不是可以从 修复的`htaccess`，因为`example.com.`主机名无效，并且任何请求都不会到达您的服务器。无法将来自浏览器的传出请求重写到 piwik，因为这些请求与您的服务器无关，因此任何 htaccess 都不适用。

您需要弄清楚为什么浏览器使用主机名向 piwik 发送跟踪信息`example.com.`。就像一个未受过教育的疯狂猜测一样，它可能与一些不雅的**主机名**附加和格式错误的相对 URI 之类有关`<a href="./my/page.html">`。因此，当代码无意中将它们附加在一起时，您会得到`example.com./my/page.html`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:34:34.190

尝试使用 HTTP_HOST 变量，类似以下的内容可能会起作用。

```
RewriteEngine on
Rewritecond %{HTTP_HOST} ^www\.example\.com\.
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

# shell - 在 iOS 模拟器中安装应用程序的脚本

> ID：12964021
> 
> 赞同：11
> 
> 时间：2012-10-18T21:27:16.970
> 
> 标签：shell, command-line, ios-simulator

我正在尝试自动化构建应用程序、运行单元测试以及最终运行 UI 测试的过程。

我正在某个目录中通过命令行（xcodebuild -sdk iphonesimulator6.0）构建应用程序。

如何通过命令行（在 ~/Library/Application Support/iPhone Simulator//Applications 中）将此应用程序安装到 iOS 模拟器？

我试过：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app/Contents/MacOS/iPhone\ Simulator -SimulateApplication MyApp.app/MyApp 
```

但这会打开一个名为“iOS 模拟器找不到要模拟的应用程序”的新查找器窗口。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T20:55:43.313

我制作了一个将应用程序安装到模拟器的 shell 脚本。

```
#!/bin/sh
# Pick a uuid for the app (or reuse existing one).
if ! [ -f installApp.uuid ]; then
    uuidgen > installApp.uuid
fi
UUID=$(cat installApp.uuid)
#create supporting folders
TOPDIR="$HOME/Library/Application Support/\
iPhone Simulator/6.0/Applications/$UUID/"
mkdir -p "$TOPDIR"
mkdir -p "$TOPDIR/Documents"
mkdir -p "$TOPDIR/Library"
mkdir -p "$TOPDIR/tmp"
mkdir -p "$TOPDIR/$1.app"

#copy all the app file to the simulators directory
cp -r * "$TOPDIR/$1.app" 
```

如何使用此脚本安装应用程序：

1.  更改此行：

    ```
    TOPDIR="$HOME/Library/Application Support/iPhone Simulator/6.0/Applications/$UUID/" 
    ```

    以反映您正在使用的 iPhone Simulator 版本，即`6.0`/ `7.1`。

2.  将脚本保存`installApp.sh`在您的`project_name.app/`文件夹中。

3.  打开终端窗口并`installApp`从项目目录运行。

    *   所以如果我有我`project_name.app/`的里面有一个项目。在终端输入：

        > cd path/to/project_name.app/

    *   然后`./installApp`将应用程序安装到模拟器。

我从 Jeffrey Scofield 那里得到了这个想法：[从命令行运行 iOS 模拟器](http://psellos.com/2012/05/2012.05.iossim-command-line-2.html)

* * *

对于**iOS8 和新的 XCode，** Apple 改变了一些东西，使得通过命令行安装应用程序变得困难。仍然可以这样做：

1.  首先你需要找到app目录（假设你已经安装了apps）：`find ~/Library/Developer/CoreSimulator/Devices -name '*.app'`

2.  这将列出安装了自定义应用程序的所有路径。例如

`/34792D41-55A9-40F5-AAC5-16F742F1F3E4/data/Containers/Bundle/Application/4BA2A285-6902-45A8-9445-FC3E46601F51/YourApp.app`

3.  将有多个具有上述结构的 UUID 父目录。每个 UUID 对应于不同设备的模拟器。打开顶层目录，你会发现一个`device.plist`文件。该文件将包含它正在模拟的设备：

> ```
> <dict>
>     ...
>     <string>34792D41-55A9-40F5-AAC5-16F742F1F3E4</string>
>     <string>com.apple.CoreSimulator.SimDeviceType.iPhone-6-Plus</string>
>     ...
> </dict> 
> ```

4.  如果您想为 iPhone-6-Plus 安装您的应用程序，这是您要在其中执行此操作的目录。运行上面的 shell 脚本来安装应用程序。`TOPDIR`将路径更改为`$HOME/Library/Developer/CoreSimulator/Devices/{UUID for device}/data/Containers/Bundle/Applications/$UUID/`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-10-06T17:02:07.467

从 Xcode 6 开始，您应该能够使用它`simctl`来完成此操作。

1）获取可用设备列表：

```
xcrun simctl list devices 
```

1a）假设您已经`jq`安装，您可以使用它来仅获取那些实际可用的设备：

```
xcrun simctl list devices -j \
| jq -rc '.[] | .[] | .[] | select( .availability | contains( "(available)" ) ) ' 
```

1b) 甚至通过 iPhone 或 iPad 进一步过滤：

```
xcrun simctl list devices -j \
| jq -rc '.[] | .[] | .[] | select( .name | contains( "iPhone" ), contains( "iPad" ) ) | select( .availability | contains( "(available)" ) ) ' 
```

2) 获得要安装到的设备的 UDID 后：

```
xcrun simctl install $DEVICE_UDID /path/to/your/app 
```

2a) 或者，如果您只想安装到已启动的设备：

```
xcrun simctl install booted /path/to/your/app 
```

* * *

如果您想在所有设备上运行相同的应用程序，这真的很方便：

1）重置/擦除所有模拟器：

```
xcrun simctl erase all 
```

2) 为每个测试打开一个 Simulator 实例：

```
open -n /Applications/Xcode.app/Contents/Developer/Applications/Simulator.app
(Ignore the 'Booted' error and switch hardware.) 
```

3) 获取我们想要安装到的可用设备的 UDID：

```
DEVICES=$( xcrun simctl list devices -j | jq -rc '.[] | .[] | .[] | select( .name | contains( "iPhone" ), contains( "iPad" ) ) | select( .availability | contains( "(available)" ) ) | select( .state == "Booted" ) | .udid ' ) 
```

4) 安装应用程序（必须为相应的模拟器 SDK 构建）：

```
for device in DEVICES ; do xcrun simctl install $device /path/to/app ; done 
```

5) 为方便起见，在每台设备上启动应用程序：

```
for device in $DEVICES ; do xcrun simctl launch $device your.product.app.id ; done 
```

# php - MySQL 字段名冲突

> ID：12964023
> 
> 赞同：1
> 
> 时间：2012-10-18T21:27:27.183
> 
> 标签：php, mysql

我有这个表，有 50 个字段，每个字段包含相应的两个字符状态名称。选择状态时我有这个 mysql_query

```
//$entry is state name abbr. Oregon = OR<br/>
//$cname and $zoneName aren't important.

'UPDATE stateCarriers SET '.$entry.'= 1 WHERE cname="'.$cname.'" AND zone="'.$zoneName.'"' 
```

所以我有一个问题`OR`，`$entry`因为mysql认为它是`OR`运营商。

如何在不将字段名称更改为其他名称的情况下解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:29:51.147

尝试使用反引号字符，例如 `field`=1 来分隔字段。这对我来说似乎工作得很好，尽管情况略有不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:32:25.887

'UPDATE stateCarriers SET `'.$entry.'`= 1 WHERE cname="'.$cname.'" AND zone="'.$zoneName.'"'

# r - 使用嵌套列表时如何保留列表名称？

> ID：12964025
> 
> 赞同：3
> 
> 时间：2012-10-18T21:27:52.193
> 
> 标签：r, plyr

使用`plyr`'s `llply`over的优点`lapply`是它保留了列表名称。见`?llply`解释。我喜欢这个功能，但在嵌套列表的情况下似乎无法让它工作。例子：

```
library(plyr) 
m <- as.list(1:2)
names(m) <- c('M1', 'M2')
foo <- list(m, m)
names(foo) <- paste0("R", 1:2)

result <- ldply(foo, function(x){
        ldply(x, function(z) { data.frame(a=z, b= z^2)})
})
> result
  .id a b
1  M1 1 1
2  M2 2 4
3  M1 1 1
4  M2 2 4

# if I don't operate on the inner list, I can preserve the outer list's names
result2 <- ldply(foo, function(x){
     data.frame(a = x[[1]], b = x[[1]]^2)
    })
> result2
  .id a b
1  R1 1 1
2  R2 1 1 
```

请注意，`result`不包含`R1`and `R2`（它会被添加进来，就`.id`好像我没有对`foo`as 的每个元素内的嵌套列表进行操作一样`result2`）。如何确保在处理嵌套列表时添加了外部列表名称？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:44:20.367

It seems that the column name is the problem:

```
result <- ldply(foo, function(x){
    df <- ldply(x, function(z) { data.frame(a=z, b= z^2)})
    names(df)[1] <- ".id2"; df
})
result
  .id .id2 a b
1  R1   M1 1 1
2  R1   M2 2 4
3  R2   M1 1 1
4  R2   M2 2 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T21:46:06.607

问题是如果已经有一个变量，`ldply`则不会分配给该变量。`.id`如果你看`ldply`一次你内心的结果，那很好：

```
> ldply(foo[[1]], function(z) { data.frame(a=z, b= z^2)})
  .id a b
1  M1 1 1
2  M2 2 4 
```

将其重命名并按预期工作。

```
result <- ldply(foo, function(x){
    rename(ldply(x, function(z) { data.frame(a=z, b= z^2)}),
           c(".id" = ".id2"))
}) 
```

给

```
> result
  .id .id2 a b
1  R1   M1 1 1
2  R1   M2 2 4
3  R2   M1 1 1
4  R2   M2 2 4 
```

# android - 无法加载我自己的课程

> ID：12964031
> 
> 赞同：0
> 
> 时间：2012-10-18T21:28:23.487
> 
> 标签：android, andengine

我目前正在构建一个必须与服务器交互的应用程序。我有一些在服务器中定义的类，我需要在我的应用程序中使用它们。我尝试了以下方法来导入我的课程。

1.  将服务器项目添加为我的应用项目的库
2.  将我的服务器项目导出到 jar 文件中，然后将其复制到我的应用程序项目并使其成为库。

这两种方法都允许我没有任何编译时错误，但是，在运行应用程序时，只要应用程序使用从服务器项目引用的类之一，它就会崩溃。

我进行了调试，每当我进入（服务器的）类时，它都会跳转到`Engine.class`方法中`onTickUpdate()`然后崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:05:59.377

您的服务器库可能正在使用其他一些您尚未从您的 android 项目中导出的 java 库。

在编译时，由于您的构建路径中有这些库，所以一切正常，但 dex 编译器只会导出您明确标记为导出的类。

您可能想要检查导致应用程序崩溃的引用，从您的 apk 中提取类文件，并查看该类是否存在。

# wordpress - .htaccess 和 301 重定向（动态页面）wordpress

> ID：12964037
> 
> 赞同：0
> 
> 时间：2012-10-18T21:28:45.797
> 
> 标签：wordpress, .htaccess, redirect, http-status-code-301, dynamic-pages

我阅读了所有其他类似的问题，但不明白如何设置它，所以我的旧页面重定向到它们应该重定向的地方。

这是我的设置：

我的旧网站页面：

[http://www.oldsite.com/blog/?p=1234](http://www.oldsite.com/blog/?p=1234)
[http://www.oldsite.com/blog/?p=432](http://www.oldsite.com/blog/?p=432)
[http://www.oldsite.com/blog/?p=xxxx](http://www.oldsite.com/blog/?p=xxxx)

我想像这样重定向前两个：

[http://www.oldsite.com/blog/?p=1234](http://www.oldsite.com/blog/?p=1234) -> [http://www.newsite.com/somewhere/on/mysite/](http://www.newsite.com/somewhere/on/mysite/)
[http://www.oldsite.com/blog/?p=432](http://www.oldsite.com/blog/?p=432) -> [http://www.newsite.com/somewhere/else/on/mysite/](http://www.newsite.com/somewhere/else/on/mysite/)

并让所有其他页面（123、321、567、999，...）重定向到我的主页，如下所示：
[http ://www.oldsite.com/blog/?p=](http://www.oldsite.com/blog/?p=) ***** ****** -> [http： //www.newsite.com/](http://www.newsite.com/)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:08:36.820

您需要使用 mod_rewrite 的功能来匹配查询字符串，但所有规则都必须**在**任何 wordpress 规则之前。

```
RewriteEngine On

# http://www.oldsite.com/blog/?p=1234 -> http://www.newsite.com/somewhere/on/mysite/
RewriteCond %{QUERY_STRING} ^p=1234$
RewriteRule ^/?blog/$ http://www.newsite.com/somewhere/on/mysite/ [L,R=301]

# http://www.oldsite.com/blog/?p=432 -> http://www.newsite.com/somewhere/else/on/mysite/
RewriteCond %{QUERY_STRING} ^p=432$
RewriteRule ^/?blog/$ http://www.newsite.com/somewhere/else/on/mysite/ [L,R=301]

# http://www.oldsite.com/blog/?p=***** -> http://www.newsite.com/
RewriteCond %{QUERY_STRING} ^p=[0-9]+$
RewriteRule ^/?blog/$ http://www.newsite.com/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:34:42.290

我尝试了@Jon Lin 代码，但它不适用于我的 WordPress 网站。我认为问题在于我正在运行 WordPress...我应该包含我的 .htaccess 代码，但我不认为 WP 会是问题...

为了使它工作，我必须做以下事情： 因为它是 WP 站点，所以您需要将代码放在 WP mod_rewrite 中。这是重定向之前的我的 .htaccess ：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

之后：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^/blog/$
RewriteCond %{QUERY_STRING} ^p=998$
RewriteRule . /some/where/over-there? [L,R=301]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

希望这将帮助其他运行 WP 并遇到同样问题的人！

# php - Codeigniter 防止将参数传递给函数以避免不存在的 URI 段

> ID：12964039
> 
> 赞同：2
> 
> 时间：2012-10-18T21:29:22.147
> 
> 标签：php, codeigniter, function, parameters, uri

所以我有一个页面：

[http://www.mysite.com/controller/function](http://www.mysite.com/controller/function)

该函数在控制器中定义为：

```
function ()
{
//some stuff here
} 
```

但是可以解析 URL： [http ://www.mysite.com/controller/function/blablabla](http://www.mysite.com/controller/function/blablabla)

即“blablabla”可以传递给函数并形成一个附加的URI 段，但仍会显示相同的页面。我对许多控制器/函数有同样的问题 - 如何防止参数传递给函数（或显示为 URI 段）？

我一直在使用 Codeigniter 和 PHP 大约 6 个月的时间，所以如果答案很明显，请原谅我，但我的搜索在这方面没有取得成果。

我的目标是优化 SEO - 不确定是否更好地将具有额外 URI 段的页面重定向到正确的页面或 404 页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:36:42.847

如果不更改 CI 处理 URI 解析的方式，就无法防止这种情况发生。

您可以像这样强制重定向：

```
function my_happy_function($redirect=null) {
   if($redirect) {
   redirect('/controller/my_happy_function/');
   }
} 
```

这将以页面重定向为代价去除 URI 中给出的任何变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:40:26.903

听起来您想要一个通用的页面全部捕获。您可以使用路由来做到这一点。

例如：

```
$route['my_happy_function(/:any)*'] = "my_happy_function"; 
```

然后在您的 my_happy_function 索引方法中检查那里的 URI 段...

```
public function index()
{
    $something = $this->uri->segment(1);
    $something_else = $this->uri->segment(2);
    // etc

} 
```

这样所有对 my_happy_function 的调用都会被推送到 index 方法......

等等，我是否正确理解了你的问题？如果我错过了这一点，请告诉我，我可以更新。

# wordpress - 将 WordPress header.php/footer.php 读取到文本字符串

> ID：12964043
> 
> 赞同：1
> 
> 时间：2012-10-18T21:29:27.467
> 
> 标签：wordpress, header, footer, tostring

我正在尝试将执行的 header.php/footer.php 文件的结果作为 html 字符串读取。这是场景：

网站中有一些页面是在 .net 环境中开发的，但它们希望在整个域中共享通用的页眉/页脚。他们希望 WordPress 成为此代码的存储库，并且只要有更新，就可以对 .net Web 服务进行 PHP cURL 调用，并为其提供页眉/页脚的新 HTML。

我尝试调用**get_header()**但它没有返回字符串（正如我预期的那样），所以我在 functions.php 中尝试了这个测试解决方案：

```
function write_header() {
$header_content = file_get_contents(get_bloginfo('wpurl').'/index.php' );
$fp = fopen('c:\header.txt', 'a+');
fwrite($fp, $header_content);//just testing the output, this will be a cURL call eventually.
fclose($fp);
}
add_action( 'wp_update_nav_menu', 'write_header' ); 
```

这似乎是获取 HTML 的一种非常笨拙的方法，因为我必须进行大量字符串操作才能解析出我想要的部分。有没有我想念的更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:11:41.203

如果`get_header()`为您输出标头，请尝试仅用 an 包装它`ob_start()`并将`ob_get_contents()`标头提取为字符串。然后，您可以使用 丢弃输出`ob_end_clean()`。请参阅[PHP 输出缓冲文档](http://php.net/manual/en/function.ob-start.php)。

```
ob_start();
get_header();
$header_as_string = ob_get_contents();
ob_end_clean(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:43:57.483

有几种方法可以解决这个问题（两者都有点麻烦，但不是......）。第一种是在主题目录中创建一个模板，该模板仅包含页眉和页脚调用——模板的主体可以包含一个分隔符字符串，如 html 注释，例如`<!-- SPLIT HERE -->`.

通过 CURL 将页面请求到输出缓冲区，捕获结果响应，您可以使用上述分隔符将其拆分为其组成部分。这将为您提供您的页眉和页脚，并在页眉中为 css、js 等提供完全呈现的标签。它并不漂亮，但它可以完成工作。

第二种方法是对第一种方法的改编，如果可能，请让您的 .net 团队自行处理，而不是您进行拆分。

## 更新

好的，实际上还有第三种选择，我完全忘记了，那就是使用 WP 的功能之一：`wp_remote_get()` [http ://codex.wordpress.org/Function_API/wp_remote_get](http://codex.wordpress.org/Function_API/wp_remote_get)

> 使用 HTTP GET 方法检索 URL，以数组形式返回结果。结果包括 HTTP 标头和内容。

这是您应该得到的（摘自 API 文档）：

```
Array
(
    [headers] => Array
        (
            [date] => Thu, 30 Sep 2010 15:16:36 GMT
            [server] => Apache
            [x-powered-by] => PHP/5.3.3
            [x-server] => 10.90.6.243
            [expires] => Thu, 30 Sep 2010 03:16:36 GMT
            [cache-control] => Array
                (
                    [0] => no-store, no-cache, must-revalidate
                    [1] => post-check=0, pre-check=0
                )

            [vary] => Accept-Encoding
            [content-length] => 1641
            [connection] => close
            [content-type] => application/php
        )
    [body] => <html>This is a website!</html>
    [response] => Array
        (
            [code] => 200
            [message] => OK
        )

    [cookies] => Array
        (
        )

) 
```

您所要做的就是将 URL 传递到使用我上面提到的模板的页面，然后处理来自`wp_remote_get()`;的响应。提取 html 内容表单`[body]`并进行字符串拆分。差不多就是你想要的。

**进一步阅读**：`wp_remote_retrieve_body()` [http ://codex.wordpress.org/Function_API/wp_remote_retrieve_body](http://codex.wordpress.org/Function_API/wp_remote_retrieve_body)

# java - 从数组适配器更新列表视图

> ID：12964045
> 
> 赞同：1
> 
> 时间：2012-10-18T21:29:39.867
> 
> 标签：java, android, adapter

当我单击列表视图的单个项目时，我正在尝试刷新列表视图。例如，我正在尝试做这样的事情：

```
public class RssItemsAdapter extends ArrayAdapter<Item> {
private TextView txtTitle;
private ImageView imgFavourite;
private int resourceId;
private Context context;
private List<Item> items = new ArrayList<Item>();

public RssItemsAdapter(Context context, int resourceId, List<Item> items)
{
    super(context, resourceId, items);
    this.context = context;
    this.items = items;
    this.resourceId = resourceId;
}

@Override
public int getCount() {
    return items.size();
}

@Override
public Item getItem(int index) {
    return items.get(index);
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    Item item = getItem(position);      

    if (row == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(resourceId, parent, false);
    }

    txtTitle = (TextView) row.findViewById(R.id.title);
    txtTitle.setText(item.getTitle());

    imgFavourite = (ImageView) row.findViewById(R.id.favourite);
    imgFavourite.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (item.isFavourite() == true) {
                imgFavourite.setBackgroundResource(android.R.drawable.btn_star_big_off);
            }
            else {
                imgFavourite.setBackgroundResource(android.R.drawable.btn_star_big_on);
            }
        }
    });

    // add a "star" icon on favourite items
    if (item.isFavourite() == true)
        imgFavourite.setBackgroundResource(android.R.drawable.btn_star_big_on);
    else
        imgFavourite.setBackgroundResource(android.R.drawable.btn_star_big_off);

    return row;
} 
```

每次我单击`imgFavourite`图标时，它都应该改变。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:12:51.673

看起来您从未更改 item.isFavourite() 的值。假设您想在单击该项目时切换...

```
imgFavourite.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {

        // Toggle the current state
        item.setIsFavourite(!item.isFavourite());

        if (item.isFavourite() == true) {
            imgFavourite.setBackgroundResource(android.R.drawable.btn_star_big_off);
        }
        else {
            imgFavourite.setBackgroundResource(android.R.drawable.btn_star_big_on);
        }
    }
}); 
```

此外，您应该在 ListView 的 onItemClickListsner 中进行此类工作。照原样，这将在每次看到新行时创建一个新的 onClickListener。除此之外，检查“视图持有者模式”。

# custom-controls - Sitecore 6 WFFM：ListField 值？

> ID：12964046
> 
> 赞同：1
> 
> 时间：2012-10-18T21:29:42.600
> 
> 标签：custom-controls, sitecore, sitecore6, web-forms-for-marketers

我正在构建一个扩展 BaseUserControl 的复杂 WFFM 用户控件。此控件具有多个字段，这些字段根据某些业务逻辑进行预填充。其中一个字段应该是一个下拉菜单，显示一系列 Sitecore 项目的值。这是我的 ListField 属性的定义：

```
private string myListField; 
[VisualProperty("My List Field:", 100), 
    VisualCategory("Appearance"), VisualFieldType(typeof(ListField))] 
public string MyListField{ 
    get { return myListField; } 
    set { myListField= value; } 
} 
```

当我调试它时，titleFieldList 的内容是一个字符串，其中包含以下 URL 编码格式的 XML：

%3Cquery%20t%3D%22root%22%20vf%3D%22__ID%22%20tf%3D%22Value%22%3E%3Cvalue%3E%7B814FC177-2750-48D6-B7B7-4EE87012C637%7D%3C%2Fvalue%3E %3C%2F查询%3E

其中，解码是：

```
<query t="root" vf="__ID" tf="Value">
    <value>{814FC177-2750-48D6-B7B7-4EE87012C637}</value>
</query> 
```

我理解这个 XML 的含义。它表示 ID 为 Guid 的项目的所有子项都应该用于填充我的列表，使用模板字段“__ID”作为值，使用模板字段“值”作为文本。有人可以帮我理解我应该怎么做才能将 asp:DropDownList 绑定到这个吗？这是一个已序列化和编码的特定站点核心对象吗？是否有 sc:control 可以处理这个问题？

谢谢！

** 编辑 **

所以我尝试了以下代码

```
string encodedQuery = TitleFieldList;
string query = HttpUtility.UrlDecode(encodedQuery);
XDocument xmlQuery = XDocument.Parse(query);
if (xmlQuery.Element("query") != null)
{
    Dictionary<string, string> nodesDictionary = new Dictionary<string, string>();
    string root = xmlQuery.Element("query").Element("value").Value;
    string value = xmlQuery.Element("query").Attribute("vf").Value;
    string text = xmlQuery.Element("query").Attribute("tf").Value;

    Item rootItem = SitecoreUtility.GetItemWithoutSecurity(new ID(root));
    ChildList childList = rootItem.GetChildren();
    foreach (Item child in childList)
    {
        string theValue = (value == "__ID") ? child.ID.ToString() : child.Fields[value].ToString();
        string theText = child.Fields[text].ToString();
        nodesDictionary.Add(theText, theValue);
    }

    titleDropDownList.DataSource = nodesDictionary;
    titleDropDownList.DataTextField = "key";
    titleDropDownList.DataValueField = "value";
    titleDropDownList.DataBind();
} 
```

它有效。下拉列表中填充了来自编辑器中选择的字段的正确数据。我简直不敢相信没有更简单的方法可以做到这一点。另外，如果存在的话，我应该如何尊重 MultipleSelectedValueField 和 EmptyChoiceField？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:26:30.797

尝试更改属性的返回类型并添加属性 TypeConverter。TypeConverter 中指定的类型负责将原始字符串值转换为属性的返回类型。

ListItemCollectionConverter - 是WFFM提供的转换器

```
[VisualProperty("My List Field:", 100)]
[VisualCategory("Appearance")]
[VisualFieldType(typeof(ListField))] 
[TypeConverter(typeof(Sitecore.Form.Web.UI.Controls.ListItemCollectionConverter.ListItemCollectionConverter))]
public Sitecore.Form.Web.UI.Controls.ListItemCollection MyListField{ 
    get { return myListField; } 
    set { myListField= value; } 
} 
```

# jquery - 使用 jQuery 和 JSON 自动填充选择标签

> ID：12964048
> 
> 赞同：3
> 
> 时间：2012-10-18T21:29:48.990
> 
> 标签：jquery, html, json, select, populate

我正在尝试根据另一个选择标签的值来填充一个选择标签。填充的选择标记的值来自 JSON 文档。

这里的实际用途是用于离开渡轮码头以及它们可以到达的码头。

这是我正在使用的代码片段

```
$(function(){
  $("select#departingfrom").change(function(){
    $.getJSON("/database.json", $(this).val(), function(ferries){
      var options = '';
      for (var key in ferries) {
        options += '<option value=' + key + '>' + key + '</option>';
      }
      $("select#arrivingto").html(options);
    });
  });
}); 
```

这是 JSON 文档的一个小示例

```
var ferries = {
  "horseshoebay": {
    "departurebay": {},
    "langdale": {}
  },
  "departurebay": {
    "horeshoebay": {}
  },
  "tsawwassen": {
    "swartzbay": {},
    "dukepoint": {}
  },
  "swartzbay": {
    "tsawwassen": {},
    "fulfordharbour": {}
  },
  "dukepoint": {
    "tsawwassen": {}
  },
  "langdale": {
    "horeshoebay": {}
  },
  "fulfordharbour": {
    "swartzbay": {}
  }
}, 
```

然后是 HTML

```
<select id="departingfrom">
  <option selected="selected"></option>
  <option value="tsawwassen">Tsawwassen (Vancouver)</option>
  <option value="swartzbay">Swartz Bay (Victoria)</option>
  <option value="dukepoint">Duke Point (Nanaimo)</option>
  <option value="departurebay">Departure Bay (Nanaimo)</option>
  <option value="horseshoebay">Horseshoe Bay (North Vancouver)</option>
  <option value="langdale">Langdale (Sunshine Coast)</option>
  <option value="fulfordharbour">Fulford Harbour (Salt Spring Island)</option>
</select>

<select id="arrivingto">
  <option selected="selected"></option>
</select> 
```

我似乎一辈子都无法让“功能（渡轮）”运行，所以这让我认为 .val 工作不正常。让我知道你们是否有任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:02:06.993

Your `JSON` document needs to be refactored a bit for easier iteration.

**Let's take this class for example.**

```
public class City
{
    public int CityID { get; set; }
    public string Name { get; set; }
    public int StateID { get; set; }
} 
```

And let's say (using ASP.NET MVC & C#) we are **returning JSON** by doing this:

```
 // the theStateID will be for California in this example
    public JsonResult FilterCitiesByStateID(int theStateID)
    {
        List<City> citiesList = null;

        citiesList = new CustomDb().Cities.Where(x => x.StateID == 
                                                    stateID).ToList();

        return Json(citiesList, JsonRequestBehavior.AllowGet);
    } 
```

This will give us back a list of City objects for California. (*Pretend the CityID's are meaningful.)*

![enter image description here](../Images/45727a860e7889856345f02104fac465.png)

So now you just need to append them to your select list with the proper value and text.

```
var $request = $.get('/Controller/Action/', { theStateID: 1 });

$request.success(function (listOfOptions) {
    // Iterate over the cities returned and append them to the
    // select list you need
    $.each(listOfOptions, function (key, obj) {
        $('select#YourSelect')
            .append($("<option></option>")
                         .attr("value", obj.CityID) // The value will be the CityID
                         .text(obj.Name) // The text will be the City's Name
                     );
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:28:59.443

看来您的问题是，如果您的 ajax 请求实际上正在返回，那么您的 JSON 对象实际上并没有正确形成：

```
var ferries = { ... } 
```

您的 JSON 对象应该是

```
{ ... } 
```

在来自服务器的响应中没有变量赋值。

# java - 如何打开文件而不将其保存到磁盘

> ID：12964050
> 
> 赞同：5
> 
> 时间：2012-10-18T21:30:01.880
> 
> 标签：java, file, io, temp

**我的问题：**如何打开文件（在文件的系统默认 [外部] 程序中）而不将文件保存到磁盘？

**我的情况：**我的资源中有文件，我想在不先将它们保存到磁盘的情况下显示这些文件。例如，我有一个`xml`文件，我想在用户机器上用默认程序打开它来读取`xml`文件，而不是先将它保存到磁盘。

**我一直在做什么：**到目前为止，我刚刚将文件保存到一个临时位置，但我无法知道他们何时不再需要该文件，所以我不知道何时/是否删除它。这是我的[SSCCE](http://www.sscce.org)代码（嗯，它主要是 sscce，除了资源......你必须自己创建它）：

```
package main;

import java.io.*;

public class SOQuestion {

  public static void main(String[] args) throws IOException {
    new SOQuestion().showTemplate();
  }

  /** Opens the temporary file */
  private void showTemplate() throws IOException {
    String tempDir = System.getProperty("java.io.tmpdir") + "\\BONotifier\\";
    File parentFile = new File(tempDir);
    if (!parentFile.exists()) {
      parentFile.mkdirs();
    }
    File outputFile = new File(parentFile, "template.xml");
    InputStream inputStream = getClass().getResourceAsStream("/resources/template.xml");
    int size = 4096;
    try (OutputStream out = new FileOutputStream(outputFile)) {
      byte[] buffer = new byte[size];
      int length;
      while ((length = inputStream.read(buffer)) > 0) {
        out.write(buffer, 0, length);
      }
      inputStream.close();
    }
    java.awt.Desktop.getDesktop().open(outputFile);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:54:21.020

因为这条线：

```
String tempDir = System.getProperty("java.io.tmpdir") + "\\BONotifier\\"; 
```

我推断您正在使用 Windows。你可以很容易地使这个代码多平台，你知道的。

你的问题的答案是：不。Desktop 类需要知道文件的位置，以便使用参数调用正确的程序。请注意，该类中没有方法接受`InputStream`，这可能是一个解决方案。

无论如何，我看不出问题出在哪里：您创建了一个临时文件，然后在编辑器中打开它或其他任何东西。没关系。在 Linux 中，当应用程序（通常）退出时，它的所有临时文件都会被删除。在 Windows 中，用户需要触发临时文件删除。但是，如果您没有安全限制，我无法理解问题出在哪里。毕竟，临时文件是操作系统的关注点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:46:21.637

根据您的应用程序需要的可移植性，您的问题可能没有“一刀切”的解决方案。但是，您可以帮助自己一点：

至少在 Linux 下，您可以使用管道 ( `|`) 将一个程序的输出指向另一个程序的输入。一个简单的例子（使用`gedit`文本编辑器）可能是：

```
echo "hello world" | gedit 
```

这将（对于 gedit）打开一个新的编辑器窗口，并在一个未保存的新文档中显示内容“hello world”。

* * *

上面的问题是，这可能不是一个独立于平台的解决方案。它适用于 Linux，也可能适用于 OS X，但我没有安装 Windows 来测试它。

此外，您需要自己找出默认编辑器。这个[较旧的问题](https://stackoverflow.com/questions/6273221/open-a-text-file-in-the-default-text-editor-via-java)及其[链接文章](http://www.javaworld.com/javaworld/javatips/jw-javatip66.html)提供了一些关于这可能如何工作的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:04:17.203

我不太明白你的问题。我只能看到您的问题的两种可能性。

1.  打开现有文件，您希望对其流进行操作，但不想保存任何修改。

2.  创建一个文件，以便您可以使用文件 i/o 对文件流进行操作，但您不希望将流保存到文件。

无论哪种情况，您的主要动机是利用现有的文件 i/o 供您自行决定和编程乐趣，我说的对吗？

我觉得这个问题并不那么简单，我的答案可能不是你想要的答案。但是，如果我对问题的理解与您的问题不谋而合……

如果您希望使用 Stream io，而不是使用 FileOutputStream 或 FileInputStream 来打开 File 对象，为什么不使用非 File InputStream 或 OutputStream 呢？无论如何，您的文件 i/o 实用程序最终将归结为操纵 i/o 流。

[http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html)

[http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)

无需涉及临时文件。

# jquery - 网站编码和 Chrome 慢滚动

> ID：12964051
> 
> 赞同：0
> 
> 时间：2012-10-18T21:30:11.097
> 
> 标签：jquery, html, css

我正在整理这个网站[www.datingjapan.co](http://www.datingjapan.co)，我注意到只有 chrome 的滚动非常缓慢和跳跃。

我不得不假设这是我的编码风格。

任何人都会对我如何更好地做到这一点以及为什么我可能会影响 chromes 性能有任何建议。

注意：我有相当多的图像下来（我稍后会改进），但我认为这不会是滚动问题。

我正在使用相当数量的 jquery $(document).on() 代码来链接事件，但不确定这是否会减慢速度。

任何建议都会很棒... thx

# twitter-bootstrap - 有没有办法重置边框、边框半径和背景颜色 CSS 属性？

> ID：12964052
> 
> 赞同：9
> 
> 时间：2012-10-18T21:30:14.220
> 
> 标签：twitter-bootstrap, css

我正在将 Twitter 引导程序用于我输入的页面的 CSS。Bootstrap 定义：border: 1px solid rgb(204, 204, 204); 背景色：rgb(255, 255, 255); 边框半径：3px 3px 3px 3px；用于选择元素。

我想重置（通过在我自己的 CSS 中覆盖）这些 Bootstrap CSS 属性。我试过：自动，继承，无。但没有一个工作。我还尝试了半径的 -moz 前缀。没有成功。

我看到这不起作用，因为在 Firefox 中，没有边框、没有边框样式和没有背景颜色的选择以与 webkit 浏览器类似的方式呈现。

您可以通过在 Web Developer -> Inspect -> CSS 视图中注释掉这些规则来检查这一点。

我如何在不接触 Bootstrap 库的情况下完成所有这些操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T21:37:00.090

```
-webkit-border-radius: 0;
-moz-border-radius: 0;
-o-border-radius: 0;
border-radius: 0;
border: 0; 
```

那应该重置边界。只要您喜欢的样式出现的时间晚于 Bootstrap 提供的样式，它们就会优先。此外，-moz-appearance 可以帮助您覆盖默认的 Firefox 外观（或重置它们）。

*   [https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T21:36:55.927

Bootstrap 声明比您的声明具有更高的[特异性。](http://css-tricks.com/specifics-on-css-specificity/)

`!important`您可以通过在声明后添加来测试它：`border: none !important`

但是，不要附带此代码。要以正确的方式修复它，请使用另一个类或 id 来覆盖 Bootstrap 的 CSS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-11T14:16:02.980

要重置属性，请使用值“initial”，适用于所有属性：

```
-webkit-border-radius: initial;
-moz-border-radius: initial;
-o-border-radius: initial;
border-radius: initial;
border: initial; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T21:36:40.677

您是否尝试过它并不总是一个好的解决方案，但可能是您遇到问题的原因，请在[此处](http://css-tricks.com/when-using-important-is-the-right-choice/)`!important`阅读更多关于何时使用此方法可能有用的信息。

# php - 使用各种方法的密码哈希

> ID：12964054
> 
> 赞同：2
> 
> 时间：2012-10-18T21:30:27.340
> 
> 标签：php, security, hash, login, passwords

我一直在寻找存储用户密码的最佳方式，但我并不真正了解安全性，因此我使用 Google 找到了很多关于加密和类似内容的信息。

我不喜欢使用可以在 Internet 上的博客或网站中获得的片段，我宁愿创建自己的解决方案，所以我最终开发了两个函数：一个创建哈希值，另一个检查“哈希值”密码。

我不知道我做的对不对，或者我只是在增加我的问题，所以看看下面的函数。

```
// Creates a simple password's hash
function hashPassword( $password = false )
{
  // Checks if the password has more than 6 characters
  if( strlen( $password ) < 6 )
  {
    // Kills the script
    exit('Password is too short.');
   }

   // Split the 4 first characters of the password
   $salt = substr( $password, 0, 4 );

   // Calculate the md5 hash of the salt
   $salt = md5( $salt );

   // Get the rest of the password
   $password =  substr( $password, 3, strlen( $password ) );

   // Calculate the md5 hash of the password
   $password = sha1( $salt . $password );

   // Crypt the password
   $password = crypt( $password );

   return $password;
} 
```

这就是我要存储的密码。现在，检查一下我要检查密码是否正确的方法。

```
// Checks if a hashed password match a user input password
function checkHashedPassword( $password = false, $hashedPassword = false )
{
// Checks if the password has more than 6 characters
if( strlen( $password ) < 6 )
{
    // Kills the script
    exit('Password is too short.');
}

// Split the 4 first characters of the password
$salt = substr( $password, 0, 4 );

// Calculate the md5 hash of the salt
$salt = md5( $salt );

// Get the rest of the password
$password =  substr( $password, 3, strlen( $password ) );

// Calculate the md5 hash of the password
$password = sha1( $salt . $password );

// Checks the password and hash
if( crypt( $password, $hashedPassword ) == $hashedPassword ) 
{
    // Returns true
    return true;
}

// Returns false by default
return false;
} 
```

如您所见，我将创建一个存储密码的变量，然后我可以检查它是否正常，如下面的代码：

```
$pass = hashPassword( $_POST['password'] );

if( !checkHashedPassword( $_POST['password'], $pass ) ) 
{
    exit('Password incorrect!');
} 
```

那么，它会安全地工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:39:57.653

如果您正在寻找一种通用且简单的方法[添加简单的密码哈希 API](https://wiki.php.net/rfc/password_hash)仍在 RFC for php 中，但您可以使用[ircmaxwell 的非常好的实现](https://github.com/ircmaxell/password_compat)

例子

```
 $hash = password_hash($password, PASSWORD_BCRYPT); 
```

确认

```
if (password_verify($password, $hash)) {
    /* Valid */
} else {
    /* Invalid */
} 
```

[在这里下载](https://github.com/ircmaxell/password_compat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:35:16.233

您可以使用：

```
$pass = <query password code>;

if( $pass != hashPassword( $_POST['password'] ); ) 
{
    exit('Password incorrect!');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:50:06.843

来自 OWASP的[密码存储备忘单](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)为密码存储和散列提供了很好的指南。

关键点是使用强盐，并迭代哈希（目前 64,000 次或更多）。

[OpenWall 的Portable PHP Password Hashing Framework](http://www.openwall.com/phpass/)是一个很好且广泛使用的用于密码处理的 PHP 库，我建议检查一下。

# svn - SVN 预览更新显示冲突，但更新不会导致冲突

> ID：12964057
> 
> 赞同：0
> 
> 时间：2012-10-18T21:30:31.837
> 
> 标签：svn, version-control, merge

我们在我们的 repo 中看到了一个奇怪的问题，其中以下命令报告了传入的冲突：

```
svn merge --dry-run -r BASE:HEAD . | egrep -e '^[[:space:]]*(A|B|C|D|E|G|U)+[[:space:]]+'

   C path/to/fileA
   C path/to/fileB
   C path/to/fileC
U    path/to/fileD 
```

但是， svn up 实际上不会导致冲突。实际上，输出如下所示：

```
At revision 7922.
At revision 7922.
At revision 7922.
U    path/to/fileD
Updated to revision 7922. 
```

据我所知，有问题的文件没有什么奇怪的。svn status 不报告任何问题，svn info 显示文件是最新的，svn resolve 无效。这种情况会定期发生，但并非每次都发生，而且总是显示相同的文件。

有没有人见过这个？

**编辑**：看起来我遗漏了一个关键细节，这也许就是为什么没有人能够在这里回答的原因。在 svn up 步骤中，我们将单独更新每个文件以避免在分级自动部署期间发生冲突（例如 t0：期待传入的更新，t1：对数据库运行任何必要的架构更改，t1+X：更新其余的批次，其中 X 可能是一个重要的数字）。完整更新如下所示：

```
svn up --depth=empty path/to/fileA path/to/fileB path/to/fileC path/to/fileD

At revision 7922.
At revision 7922.
At revision 7922.
U    path/to/fileD
Updated to revision 7922. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:43:48.800

看起来这里的问题来自不同步的父目录。

前任：

修订版 X：

```
A  path/to/fileA 
```

修订 X+1：

```
A  path/to/fileB
A  path/to/fileC 
```

我们一直在更新：（假设 BASE = X-1 和 HEAD = X+1）

```
%> cd dir/
%> svn merge --dry-run -r BASE:HEAD .     # look ahead for incoming updates
%> ...                                    # run schema updates against DB
%> svn up --depth=empty path/to/fileA     # update just the incoming changes to
   path/to/fileB path/to/fileC            # avoid pulling someone else's
                                          # recent commit 
```

虽然这对于提交中涉及的 3 个文件来说都很好，但 dir/、dir/path/ 和 dir/path/to/ 现在都落后于 HEAD 修订版。svn info dir/ 将修订报告为 X-1 (BASE)，因为它没有包含在以前的 svn up 中。

现在，当我们到达修订版 X+2 时：

```
U  path/to/fileD 
```

我们再次尝试该过程，但这次前瞻报告冲突：

```
%> cd dir/
%> svn merge --dry-run -r BASE:HEAD .
...
   C path/to/fileA
   C path/to/fileB
   C path/to/fileC
U    path/to/fileD
... 
```

（来自 X-1->X+2 的传入添加，当文件确实已经存在时）。同时，对这些文件的 svn up 将无害地报告所有内容都是最新的。

从那以后，我们将我们的部署变成了一个更原子的过程，所以我们可以自由地从分支根目录 svn，避免丑陋的 --depth=empty，并保持所有文件同步。

# macos - MAC OS X：在 excel 公式或 excel 宏中找到指向 Dropbox 本地文件夹的计算机独立路径

> ID：12964060
> 
> 赞同：2
> 
> 时间：2012-10-18T21:30:47.757
> 
> 标签：macos, excel

我想定义一个独立于计算机的路径，以从 Excel 单元格或 Excel 宏访问存储在 Dropbox 本地文件夹中的 Excel 文件。
目前，如果我在我的 excel 单元格或我的 excel 宏中引用本地存储在 Dropbox 文件夹中的文件，它只能在一台计算机上运行。
我希望路径是通用的，以便它可以在具有相同保管箱帐户的不同计算机上工作。

理想情况下，我想让这条路径与 PC 或 MAC 无关

# c++ - 在 Windows 上编译/执行汇编程序的最简单方法？

> ID：12964066
> 
> 赞同：0
> 
> 时间：2012-10-18T21:31:14.340
> 
> 标签：c++, windows, visual-studio-2010, assembly

在 Windows 上编译/执行汇编文件的最简单方法是什么？一种选择是简单地嵌入到 Visual Studio C++ 项目中并使用`__asm`标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:38:39.580

我建议你不要这样做。而是在.asm文件中单独编写汇编语言程序，编译成目标文件（或者.lib文件也可以）。然后将其与您的程序链接。这将简化跟踪代码中的错误。使用 __asm 是编写单独的汇编语言文件的糟糕替代方法。

您可以使用任意数量的汇编程序：MASM、NASM、FASM 等。只需记住 C/C++ 程序使用的调用约定，并将其复制到 MASM/NASM/FASM 中的代码中。

# php - 我的 PHP curl 请求有什么问题，请帮忙.. 我没有收到任何数据

> ID：12964067
> 
> 赞同：-1
> 
> 时间：2012-10-18T21:31:14.297
> 
> 标签：php, curl, libcurl

它说浏览器发送了一个服务器无法理解的请求。我不完全理解我的 PHP 代码出了什么问题。有人可以帮我理解我哪里出错了。谢谢 ！

```
<?php
    $url ="http://127.0.0.1/sensor/sens/data.php";
    $xml_data = file_get_contents("/usr/local/www/data/data.xml");
    $header ="POST HTTP/1.0 \r\n";
    $header .="Content-type: text/xml \r\n";
    $header .="Content-length: ".strlen($xml_data)." \r\n";
    $header .="Content-transfer-encoding: text\r\n";
    $header .="Connection: close \r\n\r\n";
    $header .= $xml_data;
    $ch = curl_init();
    curl_setopt ($ch,CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch,CURLOPT_POST,true);
    curl_setopt($ch,CURLOPT_POSTFIELDS,$header);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 4);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $header);
    $data = curl_exec($ch);  // if the post is successful , the server will return some data.
    echo $data;

    #$info = curl_getinfo($ch);
    #
    #if(!curl_errno($ch))
    #   echo 'It took '.$info['total_time'].'seconds to send a request to'.$info['url'];
    #
    #   else
    #

    curl_close($ch);
    echo $data;

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:39:04.643

我认为问题在于`CURLOPT_POSTFIELDS`

**从 PHP 手册...**

*在 HTTP“POST”操作中发布的完整数据。要发布文件，请在文件名前加上 @ 并使用完整路径。文件类型可以通过使用格式为“;type=mimetype”的文件名来明确指定。此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，则 value 必须是数组。*

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

它应该只保存有效负载，而不是整个标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:40:25.790

您不需要使用 cURL 创建自定义请求来发出此请求，常规的 HTTP POST 就足够了。问题的另一部分是您还将`POSTFIELDS`自定义请求设置为与您构造的 HTTP 请求相同的内容，因此整个请求主要由两个重复的字符串组成。

试试这段代码并研究它以了解它是如何工作的：

```
<?php

$url      = "http://127.0.0.1/sensor/sens/data.php";
$xml_data = file_get_contents("/usr/local/www/data/data.xml");

$headers = array('Content-Type: text/xml',
                 'Content-Transfer-Encoding: text',
                 'Connection: close');

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_data);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 4);

$data = curl_exec($ch); // if the post is successful , the server will return
                        // some data.
echo $data;

// info = curl_getinfo($ch);
//
// f(!curl_errno($ch))
// echo 'It took '.$info['total_time'].'seconds to send a request
// to'.$info['url'];
//
// else
//

curl_close($ch);
echo $data; 
```

# javascript - 努力从外部链接链接到选项卡式内容

> ID：12964070
> 
> 赞同：3
> 
> 时间：2012-10-18T21:31:24.080
> 
> 标签：javascript, jquery, tabs, accordion

非常沮丧和尴尬，我无法弄清楚这一点。客户希望网站底部有一个站点地图，只需单击一下即可将用户带到该页面中的任何页面和任何选项卡。应该很容易做到，但由于某种原因，我无法将我的大脑包裹起来。为了完全诚实，我是一名艺术家，拥有足够的代码知识以致危险。我不能自己编写 JQuery，但我能够通读已经写好的东西，并在很大程度上理解发生了什么。

1.  示例 1- Contact.php 拥有基本功能

2.  示例 2- TabTest1.html 我能够从 stackoverflow 的 .com 问题 10616833/link-to-anchor-inside-tabbed-content-from-an-external-link 中获取信息并使其正常工作。那里的脚本实际上不起作用（对我来说）。花了我一天的时间，但我弄清楚了它是什么（括号，像往常一样），你看到的是工作中的信息。不幸的是，它不仅仅插入到我已经存在的代码中。我尝试了几种不同的方法，但我不完全理解 jsfiddle 中发生了什么。

3.  示例 2- ContactRE.php 这是我使用上述问题中给出的代码的最佳尝试。我只是觉得不知所措。您可以单击选项卡并查看它在做什么，但是单击任何选项卡后，它们都会亮起，显示为选中状态，但内容根本没有变化。我怀疑它与“//return false;”有关。在“if”语句之前，因为取消注释它会使它再次工作，但仍然无法从外部链接到单个选项卡。当它打开时，ContactRE.php#Social 似乎确实链接，但只有在输入后，按回车键，等待然后按刷新。

4.  示例 4- index.php 您可以看到它与示例 1 类似，只是一个不同的页面来测试链接。它不起作用。选项卡内容就消失了。

对于示例 1、2 和 4，您可以看到我什至在访问站点地图所在的“BottomInfo”类中的论坛之前尝试自己解决这个问题。当我意识到我认为可以工作的系统时，我开始使用 Links3，在 Links2 和 Links1 中不会削减它。我只是获取了构成选项卡的链接，通过 CSS 删除了样式并制作了列表。适用于其各自的页面，但不适用于外部链接。

我为那些喜欢它的人创建了一个 JSFiddle。我不太擅长理解“嘿，只要加上这个，突然——魔法！” 其次是代码片段，除非它们带有很好的解释。也许有一天，只是还没有。[http://jsfiddle.net/ANCannan/CfGHp/](http://jsfiddle.net/ANCannan/CfGHp/)

下面是我的工作 JS，但我不能在 URL 中使用散列从外部链接到选项卡

```
 <script type= "text/javascript"> 
   $(document).ready(function(){
  //  When user clicks on tab, this code will be executed
   $("#tabs li").click(function() {
  //  First remove class "active" from currently active tab
   $("#tabs li").removeClass('active');

  //  Now add class "active" to the selected/clicked tab
   $(this).addClass("active");

  //  Hide all tab content
   $(".tab_content").hide();

  //  Here we get the href value of the selected tab
   var selected_tab = $(this).find("a").attr("href");

  //  Show the selected tab content
   $(selected_tab).fadeIn();

  //  At the end, we add return false so that the click on the link is not executed
     return false;

  });});
  </script> 
```

这是我的 Frankenstein JS 尝试通过 URL 中的哈希使选项卡可链接

```
 <script type= "text/javascript"> 
       $(document).ready(function(){
      //  When user clicks on tab, this code will be executed
       $("#tabs li").click(function() {
      //  First remove class "active" from currently active tab
       $("#tabs li").removeClass('active');

      //  Now add class "active" to the selected/clicked tab
       $(this).addClass("active");

     //  Hide all tab content
       $(".tab_content").hide();

    //  Here we get the href value of the selected tab
     var selected_tab = $(this).find("a").attr("href");

    //  Show the selected tab content
    $(selected_tab).fadeIn();

    //  At the end, we add return false so that the click on the link is not executed
     return false;
    });
if (window.location.hash !== '') {
    var $targetAnchor = $(document.location.hash);
    // Grab the ID of the .tab-content that the hash is referring to
    tabId = $targetAnchor.closest('.tab_content').attr('id');

    // Find the anchor element to "click", and click it
    $("#tabs li").find('a[href=#' + tabId + ']').click();

    $('html, body').animate({
        scrollTop: $targetAnchor.offset().top
    });
    }

   $('a').not('.tabs li a').on('click', function(evt) {
     evt.preventDefault();
     var whereTo = $(this).attr('goto');
    $tabs = $("ul.tabs li");
    $tabs.find('a[href=#' + whereTo + ']').trigger('click');
      alert(attr('name'));
     alert( $('#'+whereTo+' a').offset().top );
    $('html, body').animate({
      scrollTop: $('#'+whereTo+' a').offset().top
   });

 });

 $(function() {
     $('a.refresh').live("click", function() {
     location.reload();
   });
   });});
    </script> 
```

这是我的缩写 HTML

```
<div class= "Centered" id="TextContent">
    <div id="tabs_container">
      <ul id="tabs">
      <li>
        <div class= "Centered" id="TextContent2">
          <div id="tabs_container2">
            <ul id="tabs2">
              <li class="active">
                <div class= "LinkText" id="TT1"> <a class="icon_accept" href="#Before">Before</a></div>
              </li>
              <li>
                <div class= "LinkText" id="TT2"> <a class="icon_accept" href="#During">During</a></div>
              </li>
              <li>
                <div class= "LinkText" id="TT3"> <a class="icon_accept" href="#After">After</a></div>
              </li>
            </ul><!---Ends ul id "tabs" container2-->
          </div><!---Ends "tabs_container2"-->
        </div><!---Ends "Centered Text Content2"-->
        </li>
       </ul><!---Ends ul id "tabs-->
     </div><!---Ends "tabs-container"-->

    <div id="tabs_content_container">
        <div id="Before" class="tab_content" style="display: block;">
         <img src="Images/before.png" class="alignLeft" alt="CMC and QA Icons"><p>Sed do eiusmod tempor incididunt consectetur adipisicing elit,   duis aute irure dolor. In reprehenderit in voluptate quis nostrud   exercitation eu fugiat nulla pariatur. Ullamco laboris nisi qui officia   deserunt lorem ipsum dolor sit amet. In reprehenderit in voluptate   cupidatat non proident, sed do eiusmod tempor incididunt.</p>
        <p>Ullamco laboris nisi ut aliquip ex ea commodo consequat. Consectetur   adipisicing elit, in reprehenderit in voluptate ut enim ad minim veniam.   Lorem ipsum dolor sit amet, quis nostrud exercitation velit esse cillum   dolore. In reprehenderit in voluptate excepteur sint occaecat eu fugiat   nulla pariatur.</p><p>Sed do eiusmod tempor incididunt consectetur adipisicing elit,   duis aute irure dolor. In reprehenderit in voluptate quis nostrud   exercitation eu fugiat nulla pariatur. Ullamco laboris nisi qui officia   deserunt lorem ipsum dolor sit amet. In reprehenderit in voluptate   cupidatat non proident, sed do eiusmod tempor incididunt.</p>
        <p>Ullamco laboris nisi ut aliquip ex ea commodo consequat. Consectetur   adipisicing elit, in reprehenderit in voluptate ut enim ad minim veniam.   Lorem ipsum dolor sit amet, quis nostrud exercitation velit esse cillum   dolore. In reprehenderit in voluptate excepteur sint occaecat eu fugiat   nulla pariatur.</p>
           </div><!---Ends Before container-->

             <div id="During" class="tab_content" style="display: block;">   
          <p>In reprehenderit in voluptate   cupidatat non proident, sed do eiusmod tempor incididunt.</p>
           <p>Ullamco laboris nisi ut aliquip ex ea commodo consequat. Consectetur   adipisicing elit, in reprehenderit in voluptate ut enim ad minim veniam.   Lorem ipsum dolor sit amet, quis nostrud exercitation velit esse cillum   dolore. In reprehenderit in voluptate excepteur sint occaecat eu fugiat   nulla pariatur.</p>
           <p>Sed do eiusmod tempor incididunt consectetur adipisicing elit,   duis aute irure dolor. In reprehenderit in voluptate quis nostrud   exercitation eu fugiat nulla pariatur. Ullamco laboris nisi qui officia   deserunt lorem ipsum dolor sit amet. In reprehenderit in voluptate   cupidatat non proident, sed do eiusmod tempor incididunt.</p>
           <p>Ullamco laboris nisi ut aliquip ex ea commodo consequat. Consectetur   adipisicing elit, in reprehenderit in voluptate ut enim ad minim veniam.   Lorem ipsum dolor sit amet, quis nostrud exercitation velit esse cillum   dolore. In reprehenderit in voluptate excepteur sint occaecat eu fugiat   nulla pariatur. 

       </div><!---Ends "During"-->

           <div id="After" class="tab_content">
             <img src="Images/after.png" class="alignRight" alt="CMC and QA Icons">

         <p> <p>Sed do eiusmod tempor incididunt consectetur adipisicing elit,   duis aute irure dolor. In reprehenderit in voluptate quis nostrud   exercitation eu fugiat nulla pariatur. Ullamco laboris nisi qui officia   deserunt lorem ipsum dolor sit amet. In reprehenderit in voluptate   cupidatat non proident, sed do eiusmod tempor incididunt.</p>
       <p>Ullamco laboris nisi ut aliquip ex ea commodo consequat. Consectetur   adipisicing elit, in reprehenderit in voluptate ut enim ad minim veniam.   Lorem ipsum dolor sit amet, quis nostrud exercitation velit esse cillum   dolore. In reprehenderit in voluptate excepteur sint occaecat eu fugiat   nulla pariatur.</p>
      <p>Sed do eiusmod tempor incididunt consectetur adipisicing elit,   duis aute irure dolor. In reprehenderit in voluptate quis nostrud   exercitation eu fugiat nulla pariatur. Ullamco laboris nisi qui officia   deserunt lorem ipsum dolor sit amet. In reprehenderit in voluptate   cupidatat non proident, sed do eiusmod tempor incididunt.</p>
       <p>Ullamco laboris nisi ut aliquip ex ea commodo consequat. Consectetur   adipisicing elit, in reprehenderit in voluptate ut enim ad minim veniam.   Lorem ipsum dolor sit amet, quis nostrud exercitation velit esse cillum   dolore. In reprehenderit in voluptate excepteur sint occaecat eu fugiat   nulla pariatur.</p>
                    </div><!---Ends "After"--> 
```

我已经阅读了以下内容并尝试以各种方式实施，但都没有奏效。我什至尝试应用一些手风琴思想结构，因为人们似乎对手风琴提出了同样的问题，但我不擅长将它应用于标签。

### 关于stackoverflow的相关问题

*   [链接到锚点内的 jquery 选项卡式内容](https://stackoverflow.com/questions/10595351/link-to-an-anchor-within-jquery-tabbed-content)
*   [无法从外部文件内部 jquery 调用特定内容](https://stackoverflow.com/questions/12024663/unable-to-call-specific-content-from-an-external-file-inside-jquery?rq=1)
*   [使用一个 jquery-code-for-all-tabs](https://stackoverflow.com/questions/9244889/use-one-jquery-code-for-all-tabs)
*   [如何直接链接到 jquery 手风琴选项卡](https://stackoverflow.com/questions/11333436/how-to-link-directly-to-jquery-accordion-tab)
*   [链接到打开 jquery 手风琴](https://stackoverflow.com/questions/588030/link-to-open-jquery-accordion?rq=1)
*   [jquery-tabs-link-to-another-tab-from-inside](https://stackoverflow.com/questions/11775008/jquery-tabs-link-to-another-tab-from-inside?rq=1)

JQuery 的主题/链接到选项卡从外部选项卡 div

* * *

抱歉缺少链接，显然我只能发布2。

**主要更新**10 月 19 日美国东部时间下午 1 点我还没有完全解决我的问题，但是我现在可以从网站外部链接到特定的 URL（或输入），但是，如果我在页面上，当我在页面上时 URL 会更新单击页面内的链接或手动输入，但在单击“刷新”之前不会更改内容。该页面是[http://certus.worldpath.net/crazy.html](http://certus.worldpath.net/crazy.html) 通过在末尾添加“#Email”直接链接到选项卡。想法？

我将非常感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T22:04:30.300

## 使用 jquery.tools 作为选项卡的演示

据我了解您的问题，这应该符合您的问题：

*   [表 B-1](http://jsfiddle.net/Gingah/2TPxn/show/#B-1)
*   [表 B-3](http://jsfiddle.net/Gingah/2TPxn/show/#B-3)

## 使用您的代码解决原始问题

*   如何从外部链接链接到选项卡式内容？
*   解决了

请看[一下解决方案](http://jsfiddle.net/zrE9E/11/)（[#During](http://jsfiddle.net/zrE9E/11/show/#During)，[#After](http://jsfiddle.net/zrE9E/11/show/#After)）

```
 if (window.location.hash) {
        var wndHash = window.location.hash;
        var tab = wndHash + "Tab";
        // if hash exist on doc ready then remove class "active" from all tabs        
        $("#tabs li").removeClass('active');
        // show the tab content and make tab list item (li) active
        $(wndHash).fadeIn();            
        $(tab).parent().addClass("active");
        console.log(wndHash, $(wndHash), tab, $(tab));
    } else {
        // if no hash make the BeforeTab active
        $("#Before").fadeIn();            
        $("#BeforeTab").parent().addClass("active");
    } 
```

### 使用 CSS3 选择器游览

根据[Naman Goel](https://stackoverflow.com/users/1752518/naman-goel)的建议（参见此线程），我设置了一个[基本的 css3 目标选择器演示](http://jsfiddle.net/wUFXG/1/show/#end)：

```
 <h2>Table of contents</h2>
 <ul>
     <li><a href="#intro">intro</a>
     <li><a href="#end">the end</a>
 </ul>        
 <h2><a name="intro">CSS3 selectors and the :target pseudo class</a></h2>
<h2><a name="end">Look at me - i am the END-Anchor</a></h2> 
```

而这个 CSS

```
h2 {font-size: 24px; font-weight: heavy; padding: 1em;}
*:target { color: red; font-size: 32px; } 
```

如果 url 包含相应的锚点（#intro 或 #end），是更改 h2 标题 css 的基本设置吗

## 如何使用内部（锚）链接更改选项卡的内容？

在您的主要更新中，您写道：“如果我在页面上，当我单击页面内的链接时 URL 会更新，但不会更改内容”

在[您的页面](http://certus.worldpath.net/crazy.html)中，所有选项卡[（选项卡电子邮件）](http://certus.worldpath.net/crazy.html#Email)都工作正常并正在加载相应的内容。因此，我假设您正在谈论页面 crazy.html 页脚中的链接：

```
<div class="BottomInfo" id="A234">
    <div class="Links3">
        <a href="Contact.php">Contact</a>
        <ul id="Nottabs">
            <li class="Lactive">foo</li>
            <li><div class="LinkText" id="LinksTT2"> 
                    <a class="icon_accept" href="#Email">Email Us</a></div>
            </li>
        </ul><!---Ends ul id "Nottabs-->
    </div>
</div> 
```

如果您单击此链接，则内容不会更新，因为您没有为页脚中的链接附加事件处理程序。

### 没有页脚链接的事件处理程序

使用[chrome devtools](http://paulirish.com/2011/a-re-introduction-to-the-chrome-developer-tools/)，您可以看到页脚中的链接没有附加事件处理程序。

![页脚处没有 E-Mail Us 链接的事件处理程序（Chrome-Dev 工具中的屏幕截图）](../Images/98bd69f7c08d00bb40de2deef258a947.png).

在您的 javascript 中，您为每个匹配此[选择器](http://api.jquery.com/category/selectors/) `$("#tabs li")`的 DOM 节点添加一个单击事件。在您的页脚 ( `BottomInfo`) 中，列表项与选项卡中的选择器不匹配。因此，当您单击页脚中的链接时没有任何反应。如果您为列表项添加事件处理程序`$("#Nottabs li").click(...`并放置与选项卡中相同的代码，它应该可以工作。

```
$("#Nottabs li").click(function () {
   // similar to your tab solution 
   // you have to attach a click-event handler 
   // to the list item in your BottomInfo 
} 
```

## 使用 javascript 和 css 2 的完整演示

请以您的代码为起点查看[完整的演示。](http://jsfiddle.net/zrE9E/24/show/#After)

请让我知道这是否解决了您的问题

### 小更新

我找到了一个[使用 css3 的选项卡演示](http://tympanus.net/Tutorials/CSS3ContentTabs/index.html)。这是相当令人印象深刻的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T17:48:48.707

我有一个更简单的解决方案给你。为您的选项卡式界面使用 :target 的 CSS3 属性。一切都会以这种方式开始为你工作。

此外，您可以使用[selectivizr](http://selectivizr.com/)为旧版浏览器填充它。

基本上，您使用选项卡式内容定义不同的 div。并将其设置为 display:none 和 div:target { display:block; }

选项卡按钮可以是指向#idnameofDiv 的简单链接

这真的很容易。它应该对你来说是完美的，加上没有 javascript。

# passwords - 什么语言最适合打开大文件？

> ID：12964071
> 
> 赞同：0
> 
> 时间：2012-10-18T21:31:25.047
> 
> 标签：passwords

我正在开发一个新的密码生成器，我需要使用大型单词列表才能使其工作。单词列表可能是 30-40mb，虽然我想使用 PHP，但我不知道它是否是最好的解决方案。我需要一种处理打开大文件并扫描它们的语言。C是最好的选择吗？如果可以，我怎样才能使它可以通过网络访问？

如果一个人选择长度为 16 的密码，它应该“随机”选择 2-4 个单词加起来达到该长度，所以我不确定是否有必要将整个文件存储到内存中（听起来不是很有效)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:37:26.740

> 我需要一种处理打开大文件并扫描它们的语言。C是最好的选择吗？

您实际上应该可能将您的单词存储在数据库中。

> 如果可以，我怎样才能使它可以通过网络访问？

任何程序都可以输出 html 文本。使用 C 是一件令人头疼的事情，但绝对可以做到。看到这个问题：[https ://softwareengineering.stackexchange.com/questions/132281/are-c-and-or-c-viable-practical-options-for-web-development](https://softwareengineering.stackexchange.com/questions/132281/are-c-and-or-c-viable-practical-options-for-web-development)

# html - 如何使 div 对齐中心和重叠？当他们使用相同的名字时

> ID：12964076
> 
> 赞同：2
> 
> 时间：2012-10-18T21:31:40.943
> 
> 标签：html, css

如何使 div 对齐中心和重叠？当他们使用相同的名称时如果我使用位置：绝对这意味着我也必须设置左侧并且它们不能对齐中心..

[http://jsfiddle.net/pA8q4/](http://jsfiddle.net/pA8q4/)

```
<div align="center" class="picwrap">pic
   <div class="pic">a</div>
   <div class="pic">b</div>
   <div class="pic">c</div>
</div>

.picwrap{
position: absolute;
margin-left: auto;
margin-right: auto;
top: 50px;
left: 0;
right: 0;
height: 100px;
width: 600px;
background-color: cyan;
}

.pic{
height: 70px;
width: 50px;
background-color: orange;
top: 0;     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:55:09.007

将此样式附加到 CSS 上：

```
.pic+.pic{
    position : relative;
    margin-top : -70px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:43:00.673

你需要`position: absolute;`在你的`.pic`CSS`top: 0;`上工作：

```
.pic{
    height: 70px;
    width: 50px;
    background-color: orange;
    top: 0;
    position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:42:36.903

如果您希望 .pic 在绝对定位的 div 内居中，您应该将 display 方法设置为块并将左右边距设置为 auto。像这样：

```
.pic{
  display: block;
  margin: 0 auto;
  height: 70px;
  width: 50px;
  background-color: orange;
  top: 0;     
} 
```

如果您希望 .pic 位于包含元素的顶部，则它们还需要具有绝对位置以及将顶部设置为 0。

# java - 嵌套 ArrayList ：访问私有成员

> ID：12964078
> 
> 赞同：2
> 
> 时间：2012-10-18T21:31:52.007
> 
> 标签：java, arraylist

这是我被要求做的一个家庭作业问题。

创建一个外部 ArrayList 并将两个 ArrayList 插入其中。

```
ArrayList<Customer> customers1 = new ArrayList<Customer>();
ArrayList<CustomerOtherDetails> customers2 = new ArrayList<CustomerOtherDetails>();
ArrayList<ArrayList> outerList = new ArrayList<ArrayList>(); 
```

这些是创建的三个 ArrayList，存在两个单独的示例类 Customer 和 CustomerOtherDetails。我将通过执行customers1.add（customer）等将**引用变量**添加到arrayLists（customers1和customers2）。我被要求做一些示例性的事情，例如添加新客户、搜索新客户、排序等。所有这些都来自嵌套的 ArrayList

我目前面临的问题是我无法打印数组列表中引用变量指向的值的详细信息。

当我尝试使用 get() 打印出值时，我只能像这样打印出

```
[[new.Customer@3972aa3f], [new.advanced.CustomerOtherDetails@17072b90]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:35:14.680

您需要覆盖`public String toString()`Customer 类和 CustomerOtherDetails 类中的方法。

这就是你的做法：

```
public class Customer { 
     // ... other code

    @Override
    public String toString() {
        return "Customer: " + ... ; // append instance variable values here
    }
} 
```

该`toString`方法`Object`在 Java 中所有其他类继承的基类中定义。每当您尝试将对象转换为字符串时，它都会被隐式调用，例如通过`System.out.println`.

# javascript - For循环（JavaScript）..迭代绑定中保存的值..？

> ID：12964085
> 
> 赞同：-1
> 
> 时间：2012-10-18T21:32:29.730
> 
> 标签：javascript

我正在尝试迭代中的值

*   oldData.results.bindings.date
*   oldData.results.bindings.liability
*   oldData.results.bindings.stock
*   oldData.results.bindings.event
*   oldData.results.bindings.current

...所有的价值观。我想将它们全部记录下来（而我“等于”或“小于”oldData.results.bindings.length），并带有输出，例如：

```
document.write(simpleHead[0] +
  '{Date: "' +
  oldData.results.bindings[0].date +
  '", Liability: ' +
  oldData.results.bindings[0].liability +
  ", Stock: " +
  oldData.results.bindings[0].stock +
  ", " +
  oldData.results.bindings[0].event +
  ": " +
  oldData.results.bindings[0].current +
  ",}" +
  simpleTail[0]); 
```

**目前，我只使用 '...[0]...' 打印其中一个数据集**（如上面的脚本所示），但**我想使用一个写入 '...[i ]...'**用于每个数据集。

* * *

**当前代码：**

```
...
function httpGet(theUrl)
{
var xmlHttp = null;
var xmlHttp = null;
xmlHttp = new XMLHttpRequest();         // instantiate request
xmlHttp.open( "GET", theUrl, false );   // open url
xmlHttp.send( null );                   // sending nothing
return xmlHttp.responseText;            // return url's data as text
};

var result = httpGet("#local#");        // assign this url to the variable name "result"

function revive (key, value) {
    if (value.datatype == "http://www.w3.org/2001/XMLSchema#double" ||  // if datatype is this
    value.datatype == "http://www.w3.org/2001/XMLSchema#integer" ||     // or, this
    value.datatype == "http://www.w3.org/2001/XMLSchema#float")         // or, this
    {
        return (parseInt(value.value))      // if '#double', '#integer', or '#schema', then: 'vars' label + convert the datatype's float value to integer 
    }
    else if (value.type == 'literal')
    {
        return (value.value)        // if datatype's value is a literal: 'vars' label + return as a string
    }
    else if (value.datatype == 'http://www.w3.org/2001/XMLSchema#date') 
    {
        return value.value      // if "XMLSchema#date's" value is a literal: 'vars' label + return as a string
    }
    else 
    {
        return value        // if datatype is anything else: 'vars' label + return value as a string
    }
};
var scriptHead = ["YUI().use('charts',function(Y){var myDataValues=<br /><br />["];
var scriptTail = ["<br />];<br /><br />var styleDef={series:{Stock:{line:{color:'#EEB647'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},Liability:{line:{color:'#171944'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#222',alpha:0,wmode:'transparent'},over:{fill:{color:'#eee'},border:{color:'#000'},width:9,height:9}}},Shipment:{line:{color:'#ff0000',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#ff0000',alpha:0,wmode:'transparent'},over:{fill:{color:'#ff0000',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},Production:{line:{color:'#FFD700',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#FFD700',alpha:0,wmode:'transparent'},over:{fill:{color:'#FFD700',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}},Order:{line:{color:'#006400',alpha:0,wmode:'transparent'},marker:{fill:{color:'#eee',alpha:0,wmode:'transparent'},border:{color:'#006400',alpha:0,wmode:'transparent'},over:{fill:{color:'#006400',alpha:0,wmode:'transparent'},border:{color:'#000',alpha:0,wmode:'transparent'},width:16,height:16}}}}};var myAxes={dateRange:{keys:['date'],position:'bottom',type:'category',title:'Date Range',styles:{majorTicks:{display:'none'},label:{rotation:-45,margin:{top:5}},title:{fontSize:'90%'}}}};var mychart=new Y.Chart({dataProvider:myDataValues,interactionType:'planar',render:'#mychart',categoryKey:'Date',styles:styleDef,categoryType:'time',horizontalGridlines:{styles:{line:{color:'#fff'}}},verticalGridlines:{styles:{line:{color:'#fff'}}}})});<br /><br />"];
var simpleHead = [scriptHead];
var simpleTail = [scriptTail];
var oldData = JSON.parse(result, revive);
</script>
</head>
<body>
<p>
<script language="JavaScript" type="text/javascript">
    // variable? or something here? 

    for(i=0; i<oldData.results.bindings.length ;i++)
    {
        document.write(simpleHead[0] + '<br />{Date: "' + oldData.results.bindings[i].date + '", Liability: ' + oldData.results.bindings[i].liability + ", Stock: " + oldData.results.bindings[i].stock + ", " + oldData.results.bindings[i].event + ": " + oldData.results.bindings[i].current + ",}" + simpleTail[0] + "<br /><br />");
    }
</script>
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:39:58.820

您已经在使用循环，特别是包含索引数组查找的 for 循环。

例如：

```
oldData.results.bindings[i].date 
```

# tree - Primefaces Tree：当 selectionMode='checkbox' 时，单击节点标签上的事件

> ID：12964089
> 
> 赞同：1
> 
> 时间：2012-10-18T21:32:51.197
> 
> 标签：tree, primefaces

我正在使用带有树和复选框选择的 primefaces[3.4] 展示：

[http://www.primefaces.org/showcase-labs/ui/treeSelectionCheckbox.jsf](http://www.primefaces.org/showcase-labs/ui/treeSelectionCheckbox.jsf)

是否可以附加 ap:ajax 事件以单击节点的标签？

当用户单击树的节点标签时，我需要更新带有子对象的面板，而不一定是在用户选择它们时（单击复选框）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:55:19.003

您永远不必调用服务器来做一些简单的事情，比如在页面上显示/隐藏其他元素。Primefaces 应该在这方面做得更好。同时，考虑这个javascript代码......

```
<p:treeNode type="parent" styleClass="parent">
    <h:outputText value="#{myLabel}"/>
</p:treeNode> 
```

...

```
<script>
jQuery(".parent > .ui-tree-selectable > .ui-treenode-label").each(function(){
    var label = jQuery(this);

    label.click(function(){
        label.siblings(".ui-tree-toggler").click();
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:41:55.350

该`p:tree`元素能够处理 4 个事件：

```
+----------+-------------------------- --+-----------------+
| 活动 | 监听器参数 | 被解雇 |
+----------+-------------------------- --+-----------------+
| 展开 | org.primefaces.event.NodeExpandEvent | 当节点展开时。|
| 崩溃 | org.primefaces.event.NodeCollapseEvent | 当节点折叠时。|
| 选择 | org.primefaces.event.NodeSelectEvent | 选择节点时。|
| 取消选择 | org.primefaces.event.NodeUnselectEvent | 取消选择节点时。|
+----------+-------------------------- --+-----------------+

```

select 事件就是你想要的。

**编辑：**在树中使用复选框时，这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T01:48:29.953

这就是我解决此问题的方法，只需在 treeNode 模板中添加一个复选框并将 selectionMode 更改为 single。

```
<p:tree value="#{treeBean.root}" var="node" dynamic="true" cache="false"  
            selectionMode="single"  selection="#{treeBean.selectedNode}" id="tree">  

        <p:ajax event="select" update=":form:messages" listener="#{treeBean.onNodeSelect}" />  

        <p:treeNode>  
            <p:selectBooleanCheckbox  id="treeCheck" value="#{node.selected}"/> 
            <h:outputText value="#{node.name}" />  
        </p:treeNode>  
    </p:tree> 
```

考虑到您必须手动编写逻辑来检查/取消选中父/子节点时应该。

谢谢。

# cubism.js - 如何在 cubism.js 中使标题显示在地平线图上方而不是下方？

> ID：12964091
> 
> 赞同：1
> 
> 时间：2012-10-18T21:32:56.793
> 
> 标签：cubism.js

我正在使用 .alias，但是在渲染水平线图时，它会在图表的右下方显示标题：Chart Foo。如何使标题显示在图表上方？

```
 // Create metrics
        var metrics = [
          graphite.metric("foo.bar").alias("Chart " + "Foo"),
          graphite.metric("baz.qux").alias("Chart " + "Baz")
        ];

        d3.select(".span9").call(function(div) {
          div.select(".new").call(context.axis().orient("top"));
          div.select(".new").selectAll(".horizon")
           .data(metrics)
           .enter().append("div")
           .attr("class", "charts")
           .call(context.horizon().height(100));
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:39:48.657

您想修改 .css 的 css `.horizon .title`。

例如

```
.horizon .title {
    bottom: 90;
    margin: 0px 6px;
} 
```

# xsd - 如何将 xs:unique 应用于两个对象

> ID：12964092
> 
> 赞同：1
> 
> 时间：2012-10-18T21:32:57.430
> 
> 标签：xsd

我正在尝试为我的 xsd 编写 xs:unique 来限制容器的名称，并且列表对象具有唯一的名称，但无法使其工作。你能帮忙吗？

这是详细信息

我的对象结构就像下面的树。

```
App 
  |
  ---container
        |
         --list
              |
               ---container
                     |
                     --list 
```

每个“容器”可以有 0 个或多个“列表”，每个“列表”可以有 0 个或多个“容器”。列表和容器都有“名称”属性和其他不同的属性。我想限制“名称”对于整个实例的容器和列表都是唯一的。我应该如何编写唯一选择器 xpath？这是架构。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:my_app="http://www.cisco.com/myapp" elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:element name="app">
    <xs:annotation>
        <xs:documentation>Comment describing your root element</xs:documentation>
    </xs:annotation>
    <xs:complexType>
        <xs:sequence>
            <xs:element name="container" type="containerType"/>
        </xs:sequence>
    </xs:complexType>
    <xs:unique name="uniquename">
        <xs:selector xpath=""/>
        <xs:field xpath="@name"/>
    </xs:unique>
</xs:element>
<xs:complexType name="listType">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:element name="container" type="containerType"/>
    </xs:sequence>
    <xs:attribute name="name"/>
</xs:complexType>
<xs:complexType name="containerType">
    <xs:sequence minOccurs="0" maxOccurs="unbounded">
        <xs:element name="list" type="listType"/>
    </xs:sequence>
    <xs:attribute name="name"/>
    </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:37:16.887

CMSperberg-McQueen 几乎是对的。[受限 XPath 语法的问题（如XSD 1.0 Structures](http://www.w3.org/TR/xmlschema-1)的第 3.11.16 节所示）是在您的情况下它需要以 . （点）。

所以正确的解决方案是

```
 <xs:selector xpath=".//container|.//list"/> 
```

@CMSperberg-McQueen 也正确地指出空格是合法的，不应引起任何问题。我确认现有的 Java 和 .NET 验证器对上述内容没有任何问题（带有或不带空格）。如果您在任何级别复制 name 属性的值，下面的 XML 将变为无效。

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:my_app="http://www.cisco.com/myapp">
    <container name="anySimpleType1">
        <list name="anySimpleType2">
            <container name="anySimpleType3">
                <list name="anySimpleType4">
                    <container name="anySimpleType5">
                        <list name="anySimpleType6"/>
                        <list name="anySimpleType7"/>
                    </container>
                    <container name="anySimpleType8">
                        <list name="anySimpleType9"/>
                        <list name="anySimpleType10"/>
                    </container>
                </list>
                <list name="anySimpleType11">
                    <container name="anySimpleType12">
                        <list name="anySimpleType13"/>
                        <list name="anySimpleType14"/>
                    </container>
                </list>
            </container>
            <container name="anySimpleType16">
                <list name="anySimpleType17">
                    <container name="anySimpleType18">
                        <list name="anySimpleType19"/>
                        <list name="anySimpleType20"/>
                    </container>
                </list>
            </container>
        </list>
    </container>
</app> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:50:50.527

我想你正在寻找

```
<xs:selector xpath="//container | //list"/> 
```

# jquery - 如何在 Backbone 视图中测试 el 是否附加到 DOM？

> ID：12964094
> 
> 赞同：2
> 
> 时间：2012-10-18T21:33:01.443
> 
> 标签：jquery, backbone.js, backbone-views

我需要知道`el`视图中的是否已附加到 DOM，因为我正在尝试应用 jQuery 插件，但该插件要求`el`首先在 DOM 中。

灵感来自 [如何检查 jQuery 元素是否在 DOM 中？](https://stackoverflow.com/questions/3086068/how-do-i-check-whether-a-jquery-element-is-in-the-dom)我得到这个工作：

```
render : function() {
    ...
    if (this.$el.closest('html').length)    // test if in DOM
        this.$el.someJqueryPlugin();
    return this;
} 
```

我还需要此视图的所有者在将 el 插入 DOM 后立即触发“onshow”，这是可行的，但有点笨拙。

我能想到的另一个解决方案是这样做：

```
var el = $('<div>').appendTo(somewhereInsideDOM);
var view = new view(el:el); 
```

在这种情况下，el 将始终附加到 DOM，这样就不会那么笨拙了，但缺点是操纵 el 意味着操纵 DOM。最后，使用这种方法，`this.className`不尊重。需要一个附加`.addClass(this.className)`的。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:53:59.357

如果元素需要在 DOM 中，最好将其附加到`body`，例如

```
var el = $('<div />').css({ display: 'none' }),
    view;

$(body).append(el);
view = new View({ el: el });
el.somejQueryPlugin().show(); 
```

希望这可以帮助。

# wpf - wpf超链接单击时出现空引用异常

> ID：12964100
> 
> 赞同：0
> 
> 时间：2012-10-18T21:33:49.630
> 
> 标签：wpf, wpf-controls, wpfdatagrid, vb.net-2010

我有一个包含超链接的数据网格列，数据网格列的 XAML 是

```
<DataGridTemplateColumn Header="Print">
                <DataGridTemplateColumn.CellTemplate  >
                    <DataTemplate>
           <Button  Name="btnPrint" Click=btnPrint" >
                        <TextBlock >
                            <Hyperlink TargetName="_blank >
                               <Print> 
                            </Hyperlink>
                        </TextBlock>
                        </Button>
                      </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

当我单击按钮时，它会给我空引用异常。而且，按钮单击的代码是

```
Private Sub Print_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)

   empid = DirectCast(Me.activeEmployeeDataGrid.CurrentItem, DataRowView)("EmployeeID")
   CreatePage(empid)

End Sub 
```

我在这条线上遇到了异常

```
 empid = DirectCast(Me.activeCrossingDataGrid.CurrentItem, DataRowView)("EmployeeID") 
```

谁能指出我正确的方向？为什么我得到一个空引用异常？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:05:27.010

更改这行代码

```
 empid = DirectCast(Me.activeEmployeeDataGrid.CurrentItem, DataRowView)("EmployeeID") 
```

对此

```
 empid = activeCrossingDataGrid.SelectedValue 
```

解决了这个问题。

# mysql - sphinx 在查询期间丢失与 MySQL 服务器的连接

> ID：12964101
> 
> 赞同：1
> 
> 时间：2012-10-18T21:33:51.270
> 
> 标签：mysql, sphinx, sphinxql

我很想通过运行以下查询将普通索引转换为实时

```
ATTACH INDEX comment TO RTINDEX comment_rt; 
```

但是当我在 sphinxql 中运行它时，它给了我以下错误：

```
WARNING: sql_query_post[0]: error=Lost connection to MySQL server during query, 
query=ATTACH INDEX comment TO RTINDEX comment_rt 
```

我的狮身人面像配置：

```
source base
{
    type = mysql
    sql_host = localhost
    sql_user = root
    sql_pass = NastyBalls123
    sql_db   = telefind
    sql_port = 3306 # optional, default is 9306

}

source comment : base
{
    sql_query = \
    SELECT id, content, thread_id, user_id, rank, level, \
    UNIX_TIMESTAMP(date_time_added) AS date_time FROM comment

    sql_attr_uint = id
    sql_attr_uint = thread_id
    sql_attr_uint = user_id
    sql_attr_uint = rank
    sql_attr_uint = level
    sql_attr_timestamp = date_time
}

index comment 
{
    source = comment
    charset_type = sbcs
    path = /usr/local/sphinx/data/non_rt/comment
    phrase_boundary_step = 0

    index_sp = 0
    stopword_step = 1
    dict = crc
}

index comment_rt
{
    type            = rt
    rt_mem_limit        = 32M

    path            = /usr/local/sphinx/data/comment_rt
    charset_type        = utf-8

    rt_field        = title
    rt_field        = content
    rt_attr_uint        = group_id
    rt_attr_timestamp = date_added
} 
```

在[此页面](http://sphinxsearch.com/docs/2.0.3/sphinxql-attach-index.html)的 sphinx 文档中，它提到您应该预先进行以下设置：

*   目标 RT 索引需要为空。
*   源盘索引需要有index_sp=0、boundary_step=0、stopword_step=1、dict=crc设置。
*   源磁盘索引需要有一个空的 index_zones 设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:17:10.207

您的磁盘索引的字段和属性与 RT 索引中的定义不匹配。

它们必须相同。

# javascript - 在 JavaScript 中访问 Playframework 会话

> ID：12964102
> 
> 赞同：1
> 
> 时间：2012-10-18T21:33:56.437
> 
> 标签：javascript, playframework-2.0

我正在使用 Play 2.0.3 / 2.0.4。我在服务器端创建了一个 cookie（默认名称 = PLAY_SESSION），并试图在 javascript 中访问它。

我在 application.conf 文件中设置了 application.session.httpOnly=false 。但是在 javascript 中访问 c​​ookie 返回 null。在 Chrome 中查找 cookie 说

可访问脚本：否（HttpOnly）

不确定为什么 cookie 未标记为可访问脚本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:16:08.767

application.conf 文件中要使用的正确键是`session.httpOnly`. 此密钥已添加[到此提交](https://github.com/playframework/Play20/commit/c2f4703940c1cb9f2d52e5533b9847546dfae1ef)中。

# xml - 多个 xml 布局的一项活动和后退按钮杀死一项活动

> ID：12964105
> 
> 赞同：1
> 
> 时间：2012-10-18T21:34:16.363
> 
> 标签：xml, android-activity, back

我正在开发一个非常简单的 android 应用程序，其中几乎没有 java。这是一个信息应用程序，除了显示有关事物的文本和图片之外什么都不做。它有一些按钮，可以引导您浏览不同的类别和最后的信息。它有一个活动，并从该活动调用不同的布局。我在 xml 中使用“android:OnClick=""" 方法从按钮调用不同的布局。我正在使用我不介意的软后退按钮，但显然是不好的做法。问题是，当我按下硬后退按钮时，它会结束一个活动并杀死整个应用程序，当方向改变时，它总是会回到与一个活动关联的起始布局。关于是否应该以不同的方式重做整个应用程序，我需要一些指导，或者以某种方式跟踪我所处的布局，以便它知道要返回什么。我尝试为每个布局创建一个单独的活动，当我单击按钮时，加载时间似乎比我当前执行的方式要长，而且它并不那么简单。

我的代码示例：

```
<Button
    android:id="@+id/audiocablesbutton"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:onClick="audiocables"
    android:text="@string/audiocablesbuttontext" />

    public void audiocables(View v) {
    setContentView(R.layout.audiocables);
    } 
```

# c# - REST 标头中的 java 编码

> ID：12964111
> 
> 赞同：0
> 
> 时间：2012-10-18T21:35:07.133
> 
> 标签：c#, java, web-services, rest, encoding

我在 intelij 中的 tomcat 上使用 java 6 作为服务器，并且我有一个 C# 客户端向 java 服务器发送请求，请求的**标头**值中可以包含 ǵ 之类的字符。

在一个看起来像的java过滤器中：

```
 public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)
            throws IOException, ServletException
    {
 String str=request.getHeader(HEADER_NAME); 
```

我得到一个从 c# 应用程序发送的带有字符的标头值

ǵ [http://www.fileformat.info/info/unicode/char/1f5/index.htm](http://www.fileformat.info/info/unicode/char/1f5/index.htm)

但在java中它看起来像

õ [http://www.fileformat.info/info/unicode/char/f5/index.htm](http://www.fileformat.info/info/unicode/char/f5/index.htm)

或者 ？？

我怎样才能确保java以正确的编码获得标头，即我想在java中看到ǵ。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:09:31.523

我不相信有一种方法可以指定标头值的编码。

你能控制客户吗？您需要确保它使用 Tomcat 的默认值（可能取决于系统）对标头进行编码，或者在两边都使用 MIME 编码（可能是最安全的）。

# c++ - 切片：当将派生作为对基础的引用传递时，基础引用会丢失数据？

> ID：12964112
> 
> 赞同：1
> 
> 时间：2012-10-18T21:35:09.330
> 
> 标签：c++, debugging, inheritance, reference, casting

编辑：完全重述的问题：回答如下：

将派生类型作为对基类型的引用传递时遇到问题。似乎引用的对象在从 Derived 转换为 Base 之前/之后清除/重新初始化了它的数据。

我认为当将 Derived 实例传递给接受参数作为对 Base 对象（Derived -> Base&）的引用的函数时，引用的 Base 实例将在内存中与 Derived 对象保持一致，除非作为值传递。

我有 Base 类，一种被认为是“只读”的数据状态：

```
class ReadonlyText
{
protected:
   int m_Length;
   char* m_String;
public:
   ReadonlyText() m_Length(0), m_String(0) {} // a null base
   ReadonlyText(const char* str) : m_Length(0), m_String(str)
   {
       do
       {
           m_Length++;
       }while(*ptr++);
   }
   ReadonlyText(const ReadonlyText& copy) : m_Length(copy.m_Length), m_String(copy.m_String)
   {
   }
   virtual ~Readonly() {};

   ... virtual nonsense
};  // lets not forget the semicolon 
```

现在我有了 Derived 类，它是可写的：

```
class Text
{
public:
    Text() : m_Length(1), m_String(Memory::New<char>(m_Length)) {}
    Text(const ReadonlyText& copy) : m_Length(copy.m_Length), m_String(Memory::New<char>(m_Length))
    {
        for(whole i = 0; i < m_Length; ++i)
            m_String[i] = copy.m_String[i];
    }
    Text(const Text& copy) : m_Length(copy.m_Length), m_String(Memory::New<char>(m_Length))
    {
        for(whole i = 0; i < m_Length; ++i)
            m_String[i] = copy.m_String[i];
    }

    virtual ~Text()
    {
         if((m_Length != 0 && m_String != null<char>::value)) 
         {
              Memory::Delete<Char>(m_String);
              m_Length = 0;
              m_String = null<Char>::value;
         }
    }

    // operator==(ReadonlyText&)
    // operator!=(ReadonlyText&)
    // operator==(Text&)
    // operator!=(Text&)
    // operator=(Text&)
    // operator=(ReadonlyText&)
    // I don't have time to format all these functions for best visibility in SO, 
    // I assure you that all these functions are implemented properly

    // THE PROBLEM occurs in any function with ReadonlyText&, say:
    Text operator+(const ReadonlyText& rhs)
    {
        //...
        // Before the function begins, 'rhs.m_String' == 0x0
        // see case below 
    }
};

// ...

int main(...)
{
    Text t1 = Text("hello");
    Text t2 = Text("world");

    // in the debugger, at this point, both t1 && t2 '.m_String' is valid
    // as "hello" and "world" respectively
    // but when stepping into:

    Text t3 = t1 + t2; // the function described above...

    // ...which is t1.operator+(t2) // where t2 is passed as ReadonlyText&
    // the debugger shows:
    // t1.m_String == "hello"
    // t2.m_String == 0x0   -- this should be "world"

    // since no copy construction is occuring, (passing as reference), then
    // the data should be consistent with the derived type, right?

} 
```

发生的情况是，在 operator+ 中，我尝试访问“rhs.m_String”，它应该被评估为“world”，但由于某种原因已被实例化为新的 ReadonlyText 而不是作为参考传递？

此外，该程序不会因任何消息而崩溃；没有分段错误或错误。相反，它只是完全退出，好像应用程序运行顺利，直到 main 结束？

没有比我在这里描述的更多的事情发生了。Memory::New 和 Memory::Delete 封装了内存操作（new 和 delete），以便 New 根据模板类型名的大小和给定的长度返回一个指针。删除只是确保正确销毁指针。null 是一种结构，可确保类型名称的一致空值：

```
//class Memory:

template<typename T> static T* New(whole length = 1)
{
    return (T*)(operator new (length * sizeof(T)));
}
template<typename T> static void Delete(T* pointer)
{
    operator delete (pointer);
}

// null struct
template<typename T>
struct null
{
    static constexpr T* value = 0x0;
} 
```

真正的问题：

<_< 在重新设计类层次结构时，我忘记删除派生成员（m_Length 和 m_String）。因此 Derived 实例具有屏蔽 Base 成员的成员。长话短说，当某些事情没有意义时，可能是你的错：

```
class Base
{
    ...
protected:
    int m_Length;
    char* m_String;
};

class Derived : public virtual Base
{
    ...
protected:  // xD WTH was I hoping to do here???
    int m_Length;
    char* m_String;
}; 
```

应该有一个用于继承的编译器功能可以防止屏蔽，但在此之前要小心……只是要小心。感谢所有尝试帮助我的人，以及那些退出的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:55:14.810

如果这是您实际代码的一部分，那么我怀疑您的派生类中有错误，因为`m_Data`属于您的`Base`类，您不能直接在您的`Derived`类中初始化它，并且因为它是`private`您`Base`根本无法访问它，那么我假设您的成员中也有一个成员`m_Data`，`Derived`并且该成员隐藏了`m_Data`of `Base`，因此您在调试器中看到的是`m_Data`of ，`Derived`而您在函数中看到的是`m_Data`that `Base`，`nullptr`因为它是使用默认构造函数初始化的`Base`

# c# - POST 和 GET 方法可以转到不同的视图吗？

> ID：12964126
> 
> 赞同：2
> 
> 时间：2012-10-18T21:35:51.547
> 
> 标签：c#, asp.net, asp.net-mvc-3, post, web

是否可以让我的 POST 方法转到与我的 GET 方法不同的视图？

例子：

## 得到

```
 [HttpGet]
    public ActionResult Output()
    {
        var model = new VTOutputModel();
        return View(model);
    } 
```

## 邮政

```
 [HttpPost]
    public PartialViewResult OutputPartialView(VTOutputModel model)
    {
        return PartialView(model);
    } 
```

在这里，我试图让 POST 方法弹出一个新的网页/视图。不同于 GET 方法。这不起作用，因为它仍然需要一个名为“输出”的视图

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:41:17.450

您可以通过执行以下操作指定要返回的视图的名称：

```
return View("OutputPost", model); 
```

[http://msdn.microsoft.com/en-us/library/dd460310(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/dd460310(v=vs.98).aspx)

作为一个完整的例子：

```
[HttpGet]
public ActionResult Output()
{
    var model = new VTOutputModel();
    return View(model);
}

[HttpPost]
public ActionResult Output(VTOutputModel model)
{
    return PartialView("OutputPost", model);
} 
```

# azure - 我可以在 azure 网站上写入文件系统吗？

> ID：12964129
> 
> 赞同：42
> 
> 时间：2012-10-18T21:35:55.897
> 
> 标签：azure, filesystems, azure-web-app-service

我可以写入 azure 网站上的文件系统吗？例如从仪表板更新或安装 Wordpress 中的插件/主题。AFAIK，在 Heroku 上是不可能的，那么 Azure 网站呢？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-19T06:01:03.823

当然可以在 Azure 网站的文件系统上进行写入。但是，您的写入权限仅限于应用程序的根文件夹。因此，如果您使用 ASP.NET，您将能够在`Server.MapPath("~/from_here_on")`. 这意味着您应该能够对位于应用程序根文件夹及以下的文件执行读/写/删除操作。如果您使用 PHP，则可以从`$_SERVER['DOCUMENT_ROOT']`环境变量中获取根文件夹。

Web 应用程序不需要更多权限。肯定不能在操作系统文件夹上写。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-19T19:56:06.980

如果有人在写入时遇到错误，就像附加信息一样`could not find a part of the path ...`：确保您正在写入的文件夹已部署。在我的情况下，它是一个空的临时目录，在部署过程中被跳过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T14:41:07.973

我提议使用 blobs 容器来存储必须持久化的永久内容，无论虚拟机重新初始化或升级如何。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T21:30:19.087

据我了解，您可以在 azure web 角色上写入驱动器，但问题是 web 角色可以有多个实例，因此将文件放在您正在连接的任何节点上也不会将其放在其他节点上并且当该实例被回收时，它会返回到 Web 角色的原始图像，因此您将丢失文件。

但是，至少可以根据本文在 Azure Web 角色节点的实例之间共享一个驱动器，然后您可以在网站下设置一个指向该共享驱动器的虚拟文件夹并将其用于媒体存储。

[http://blogs.msdn.com/b/windowsazurestorage/archive/2011/04/16/using-smb-to-share-a-windows-azure-drive-among-multiple-role-instances.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/04/16/using-smb-to-share-a-windows-azure-drive-among-multiple-role-instances.aspx)

我自己还没有尝试过，但是在搜索如何做到这一点时遇到了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-16T18:28:18.407

[您可以写入`HOME`](https://github.com/projectkudu/kudu/wiki/Understanding-the-Azure-App-Service-file-system)`%HOME% / $HOME`Azure 应用服务上的[环境变量位置](https://github.com/projectkudu/kudu/wiki/Understanding-the-Azure-App-Service-file-system)( )。您可以使用 Kudu 或应用程序服务的控制台 cd 进入此目录并进行探索。

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2012-10-18T21:47:18.830

如果您在 Azure 网站上询问 C:\ 驱动器或 D:\ 驱动器访问权限，答案是否定的。您无法在 Azure 网站上以这种方式访问​​文件系统。如果它是 Web 角色（云服务）或虚拟机，您确实可以访问磁盘。

但是，您可能已经知道，您可以使用 Wordpress 管理工具本身来编辑插件代码。

# php - 如何限制使用 SQL 结果生成的页面数

> ID：12964130
> 
> 赞同：0
> 
> 时间：2012-10-18T21:35:57.803
> 
> 标签：php, sql, count

我的代码中有一个非常好的系统，它将我的 SQL 结果放在不同的页面上，每页 10 行。这很好，并且完全按照应有的方式工作，但我想限制生成的页面数量。我的结果是按特定顺序排列的，但是在 25 页之后我认为就足够了（那将是 250 个结果）。为了最大化创建的页面数量，我应该在下面的代码中添加什么？提前致谢！

```
<?php 

// First I build my SQL which counts the amount of 
// rows, how this SQL query looks like depends on the 
// fields left blank and actually filled.

$sql = "SELECT COUNT(bedrijfsnaam) FROM profiles";

if ($bedrijfvariabele != " zoek op bedrijfsnaam.." && 
    $bedrijfvariabele != "") 
{
    $sql .= " WHERE bedrijfsnaam = '".$bedrijfvariabele."'";
}

if ($rubriekvariabele != " zoek op rubriek.." && 
    $rubriekvariabele != "" && 
    $bedrijfvariabele != " zoek op bedrijfsnaam.." && 
    $bedrijfvariabele != "") 
{
    $sql .= " AND (hoofdrubriek = '" . $rubriekvariabele . "' "
          . " OR subrubrieken LIKE '%" . $rubriekvariabele . "%')";
}

if ($rubriekvariabele != " zoek op rubriek.." && 
    $rubriekvariabele != "" && 
    ($bedrijfvariabele == " zoek op bedrijfsnaam.." || 
     $bedrijfvariabele == "")) 
{
    $sql .= " WHERE (hoofdrubriek = '" . $rubriekvariabele . "' "
          . " OR subrubrieken LIKE '%".$rubriekvariabele."%')";
}

if ($plaatsvariabele != " zoek op plaatsnaam.." && 
    $plaatsvariabele != "" && 
    (
        ($bedrijfvariabele != " zoek op bedrijfsnaam.." && 
         $bedrijfvariabele != "") || 
        ($rubriekvariabele != " zoek op rubriek.." && 
         $rubriekvariabele != "")
    )) 
{
    $sql .= " AND plaats = '".$plaatsvariabele."'";
}

if ($plaatsvariabele != " zoek op plaatsnaam.."  && 
    $plaatsvariabele != "" && 
    (
        ($bedrijfvariabele == " zoek op bedrijfsnaam.." || 
         $bedrijfvariabele == "")  && 
        ($rubriekvariabele == " zoek op rubriek.." || 
         $rubriekvariabele == "")
    )) 
{
    $sql .= " WHERE plaats = '".$plaatsvariabele."'";
}

// Now comes the interesting part for you guys

$rs_result     = mysql_query($sql); 
$row           = mysql_fetch_row($rs_result); 
$total_records = $row[0]; 
$total_pages   = ceil($total_records / 10); 

$template = '<a style="float:none;display:inline-block;color:white;'
          . 'width:22px;text-align:center;text-decoration:none;'
          . 'font-size:20px;background-color:#483435;margin-left:4px"'
          . ' href="%s".php?page=%s">%s</a>'; 

for ($i=1; $i <= $total_pages; $i++) 
{
    echo sprintf($template, $plaatsnaam7, $i, $i); 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:40:02.550

听起来您只需要在查询中使用 LIMIT 关键字。

尝试这样的事情：SELECT * FROM PEOPLE LIMIT 10

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:51:27.353

我不会称这为“相当不错的系统”。我的大错误是加载了大量可能永远不会显示的数据。您应该只加载您需要显示的切片 - 正如您所说的每页 10 行。您应该使用 SLQ 限制子句 - `LIMIT offest, rowcount`- 示例`select * from mytable order by id limit 20,10`- 将显示 10 行，从按 id 排序的结果中的第 20 行开始。您应该传递一个 GET 或 POST 参数来设置当前页面的数量 'page=2' 和 $ofsset = 10*($page-1); $行数 = 10; `'select .... LIMIT '.$offset.','.$rowcount`.

看看这个古老但很好的类，它完美地展示了一个好的寻呼系统：[split_page_results.php](http://www.codeforge.com/read/172915/split_page_results.php__html)。有些部分应该被重写以遵循新的 PHP 规则，但这个想法已经很明确地实现了。

在这里yopu可以找到一个使用提示：[enter link description here](http://www.codeforge.com/read/172915/product_listing.php__html)。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:38:15.120

从

```
for ($i=1; $i<=$total_pages; $i++) { 
            echo "<a style=\"float:none;display:inline-block;color:white;width:22px;text-align:center;text-decoration:none;font-size:20px;background-color:#483435;margin-left:4px\" href='".$plaatsnaam7.".php?page=".$i."'>".$i."</a> "; 

}; 
```

至

```
if $total_pages>25 $total_pages=25;
for ($i=1; $i<=$total_pages; $i++) { 
            echo "<a style=\"float:none;display:inline-block;color:white;width:22px;text-align:center;text-decoration:none;font-size:20px;background-color:#483435;margin-left:4px\" href='".$plaatsnaam7.".php?page=".$i."'>".$i."</a> "; 

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T21:39:09.710

只需让一份`if`声明检查您所在的页面。

# php - Magento Go SOAP API V2 客户创建未传递一些可选字段

> ID：12964134
> 
> 赞同：0
> 
> 时间：2012-10-18T21:36:11.283
> 
> 标签：php, api, magento, soap

我正在使用 Magento Go 的 SOAP API V2 来创建客户。使用 customerCustomerCreate 时，firstname、lastname、email 和 password 的值都成功传入，但我似乎无法设置 dob。我想可能是日期格式问题，所以我尝试了中间名，它也没有设置。我没有从 API 得到任何错误响应，所以我不认为我的值是无效的。我只是没有在创建的记录中看到它们。有没有人经历过这个？

```
$client = new SoapClient('http://...');

$session = $client->login('api_user', 'api_pass');
$result = $client->customerCustomerCreate($session, array(
    'email' => 'example@email.com', 
    'firstname' => 'First', 
    'lastname' => 'Last',
    'middlename' => 'Middle', 
    'gender' => 1,
    'password' => 'password', 
    'website_id' => 1, 
    'store_id' => 1, 
    'group_id' => 1,
));

$result = $client->customerCustomerInfo($session, $result);

var_dump($result); 
```

结果，中间名和性别缺失：

```
object(stdClass)#2 (11) {
    ["customer_id"]=> int(53) 
    ["created_at"]=> string(19) "2012-10-19 15:32:24" 
    ["updated_at"]=> string(19) "2012-10-19 15:32:24" 
    ["store_id"]=> int(1) 
    ["website_id"]=> int(1) 
    ["created_in"]=> string(7) "English" 
    ["email"]=> string(17) "example@email.com" 
    ["firstname"]=> string(5) "First" 
    ["lastname"]=> string(4) "Last" 
    ["group_id"]=> int(1) 
    ["password_hash"]=> string(67) "(password hash)" 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:58:46.240

您可以使用 SOAP V1 API 并通过键和值在客户数据数组中传递出生日期值。它将存储出生日期。

# php - 将 MySQL 结果集传输到数组时排序/乱序

> ID：12964143
> 
> 赞同：1
> 
> 时间：2012-10-18T21:37:01.517
> 
> 标签：php, mysql, arrays

我对 PHP 中的 MySQL 数据和数组有一个特殊的问题。

**背景：**该系统是用于从调查系统导出数据的报告工具。用户可以多次回复任何调查。调查可以有任意数量的问题。

每组响应由一个 column 标识`unique_uid`，因此 10 个问题的 10 行都具有相同`unique_uid`的（18-24 位字符串）。每个响应都存储为 table 中的一行`scores`。用户可能在 table 中有一个帐户`accounts`，或者他们可能在未注册的情况下以访客身份完成了调查。

我有两个查询来提取：

`unique_uid`（第一） s 和帐户的DISTINCT 集合`name_first`和`name_last`（如果它们存在）。如果用户在没有帐户的情况下响应，则他们是`NULL`. 结果按 ASC on 排序`name_last`，然后 ASC on排序`name_first`。`NULL`首先订购所有客人 ( )，然后是所有有姓名的帐户。

（其次）一个查询以收集对调查的所有回复，然后将它们与他们的所有者配对。

**问题：**由于某种原因，我的数组数据没有按照 MySQL 返回它的顺序。我有两个或三个帐户，`name_first`并且`name_last`这些帐户散布在`NULL`帐户之间。

鉴于我在 name_last 然后 name_first 上订购了升序，并且数据按该顺序从 MySQL 返回，并且 PHP 数组按该顺序生成，我无法找出它丢失顺序的原因。PHP是否会根据最后触摸的键重新构造数组数据？

我想也许我的关联键被重铸为索引，所以我在每个 前面加上了字母“a” `unique_uid`，但这并没有帮助。

感谢您的任何见解，谢谢...

* ***编辑：**我能够使用`usort()`（本文底部的代码）按顺序取回数据。但是仍然无法弄清楚为什么它首先出现故障:(

```
$rs = $wpdb->get_results( 'SELECT DISTINCT unique_uid, u.name_first, u.name_last FROM wp_fen_cme_scores s LEFT JOIN wp_fen_cme_accounts u ON u.uid = s.account_uid WHERE s.test_uid = ' . $y . ' ORDER BY u.name_last' );

// ** When I var_dump( $rs ), the data is in the correct order **
$userdata = array();
foreach ( $rs as $row ){
    $userdata[ 'a' . $row->unique_uid ] = array( $row->name_first, $row->name_last, array() );
}

// ** When I var_dump( $userdata ), the data is no longer in the correct order **

$rs = $wpdb->get_results( 'SELECT s.unique_uid, s.question_uid, s.answer, s.correct, s.time, s.lost_focus_count, s.date_created, (q.correct_answer < 1 ) AS open FROM wp_fen_cme_scores s, wp_fen_cme_questions q WHERE s.test_uid = ' . $y . ' AND q.uid = s.question_uid ORDER BY q.sort ASC');
foreach ( $rs as $row ){
    $userdata[ 'a' . $row->unique_uid ][2][ $row->question_uid ] = array( $row->answer, $row->correct, $row->time, $row->lost_focus_count, $row->open, $row->date_created );
} 
```

来自顶级查询的一些示例数据：

```
[..]
  [46]=>
  object(stdClass)#315 (3) {
    ["unique_uid"]=>
    string(20) "20977191501349809722"
    ["name_first"]=>
    NULL
    ["name_last"]=>
    NULL
  }
  [47]=>
  object(stdClass)#316 (3) {
    ["unique_uid"]=>
    string(19) "6630155101349813205"
    ["name_first"]=>
    NULL
    ["name_last"]=>
    NULL
  }
  [48]=>
  object(stdClass)#317 (3) {
    ["unique_uid"]=>
    string(21) "982542341421349813493"
    ["name_first"]=>
    string(14) "Patrick"
    ["name_last"]=>
    string(15) "Moore"
  }
  [49]=>
  object(stdClass)#318 (3) {
    ["unique_uid"]=>
    string(19) "7589292181349812907"
    ["name_first"]=>
    string(5) "Mallory"
    ["name_last"]=>
    string(9) "Moore"
  }
[..] 
```

第二个查询的样本数据：

```
 [0]=>
  object(stdClass)#262 (8) {
    ["unique_uid"]=>
    string(20) "16079139101349813111"
    ["question_uid"]=>
    string(2) "41"
    ["answer"]=>
    string(13) "Health Center"
    ["correct"]=>
    string(1) "1"
    ["time"]=>
    string(3) "5.0"
    ["lost_focus_count"]=>
    string(1) "1"
    ["date_created"]=>
    string(19) "2012-10-09 16:05:18"
    ["open"]=>
    string(1) "1"
  }
  [1]=>
  object(stdClass)#261 (8) {
    ["unique_uid"]=>
    string(19) "7491272021349813110"
    ["question_uid"]=>
    string(2) "41"
    ["answer"]=>
    string(28) "Community-Based Organization"
    ["correct"]=>
    string(1) "1"
    ["time"]=>
    string(3) "5.7"
    ["lost_focus_count"]=>
    string(1) "0"
    ["date_created"]=>
    string(19) "2012-10-09 16:05:17"
    ["open"]=>
    string(1) "1"
  }
  [2]=>
  object(stdClass)#260 (8) {
    ["unique_uid"]=>
    string(20) "20879148791349813105"
    ["question_uid"]=>
    string(2) "41"
    ["answer"]=>
    string(13) "Health Center"
    ["correct"]=>
    string(1) "1"
    ["time"]=>
    string(3) "5.3"
    ["lost_focus_count"]=>
    string(1) "1"
    ["date_created"]=>
    string(19) "2012-10-09 16:05:13"
    ["open"]=>
    string(1) "1"
  }
  [3]=>
  object(stdClass)#259 (8) {
    ["unique_uid"]=>
    string(19) "6630155101349813079"
    ["question_uid"]=>
    string(2) "41"
    ["answer"]=>
    string(22) "Other Clinical Setting"
    ["correct"]=>
    string(1) "1"
    ["time"]=>
    string(4) "18.4"
    ["lost_focus_count"]=>
    string(1) "0"
    ["date_created"]=>
    string(19) "2012-10-09 16:04:59"
    ["open"]=>
    string(1) "1"
  }
[..] 
```

排序功能：

```
function custom_sort( $a, $b ){
    // Compare on `name_last` (the second item in $userdata array)
    return $a[1] > $b[1] ;
}
usort( $userdata, "custom_sort" ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:00:11.423

This could be because of the length of your keys.

What you can do is either make the keys the same length, say prepend zeros

```
// This will prepend zeros before the key and keep only the last
// 24 characters. If your key is 24 characters long it will be 
// intact, otherwise it will end up with a few zeros at the front
$key = substr('00000' . $row->unique_uid, -24); 
```

# jquery - jQuery droppable 容器并不总是捕捉到 drop 事件

> ID：12964144
> 
> 赞同：4
> 
> 时间：2012-10-18T21:37:08.823
> 
> 标签：jquery, css, jquery-ui, jquery-ui-droppable

我有两个使用 jQuery 拖放的可能用例。在一种[情况下](http://jsfiddle.net/twZS2/)，drop 有效，但前提是您密切针对`.droppable`div 的顶部，

在另[一种情况下](http://jsfiddle.net/WpyEK/)，它永远不会起作用。

我真的看不出这里有什么问题，两者都应该可以正常工作。我也尝试过使用 z-index ，但这并没有解决任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:26:38.140

所以这个问题是由属性的组合引起的：`cursorAt`我故意偏移，它将助手移动到与光标不同的位置，以及设置为相交的可放置的默认选项“容差”。

当公差设置为相交时，它会等待可拖动助手与可放置容器相交至少 50%。而且由于我正在抵消我的助手，它很少正确重叠。

将可放置容差更改为“指针”会强制它只接受指针作为可拖动目标。

```
var taskSelected = $("#tablecontainer tr.selected").length;

$("#tablecontainer tr.selected").draggable({
    cursor: "move",
    cursorAt: { top:-12, left: -20 },
    helper: function(event) {
        return $("<div class='ui-widget-header'>" + taskSelected  + " Tasks selected.</div>");
    }
});

$(".featureOrgDataWrapper .droppable").droppable({
    activeClass: "ui-state-highlight"
    , tolerance: "pointer"
    , drop: function (event, ui) {
        alert("success");
    }
}); 
```

工作版本：[#1](http://jsfiddle.net/4wBLG/4/)和[#2](http://jsfiddle.net/WpyEK/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:05:27.543

我不确定我是否正确，但是...

我`clearfix`在您的第一个示例中添加了一个类，它似乎有效：http: [//jsfiddle.net/kboucher/4wBLG/](http://jsfiddle.net/kboucher/4wBLG/)

而且我相信第二个示例根本不起作用的原因是因为`droppable`容器实际上位于蓝色方块旁边。（我猜蓝色方块代表可放置区域？）

# git - 如何配置 git 覆盖非文本文件而不是版本控制它？

> ID：12964145
> 
> 赞同：4
> 
> 时间：2012-10-18T21:37:18.333
> 
> 标签：git

如果我有一个 git 存储库，它既有源代码又有其他类型的文件，如幻灯片、二进制文件等。我希望 git 只对文本文件（如源代码）进行版本控制。对于其他文件类型（例如二进制文件），我只想在 git 存储库中存储一份副本，即我希望 git 在我更新文件时覆盖该文件。我不想为其他类型的文件存储多个版本，因为它们可能非常大。有没有办法为此目的配置 git？我运行自己的 git 主机。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:26:48.930

`add`以及`commit`您要在单独的提交中*一次存储在存储库中的所有文件。*
第一次提交应该是您要跟踪的文件（即文本文件）。

每次更改要跟踪的文件时，都会像往常一样进行新的提交。
每次更改要存储一次的文件时，都会进行新的提交和`rebase`/`fixup`对添加二进制文件的提交的提交。

* * *

这是实践中的想法：

```
$ ls
banana.pdf  bar.bin  foo.txt  mew.ppt

$ git status -s
?? banana.pdf
?? bar.bin
?? foo.txt
?? mew.ppt 
```

添加文件 - 首先是要跟踪的文件，然后是所有二进制文件

```
$ git add foo.txt
$ git commit -m "foo text file"

$ git tag "root" HEAD   # easy access to the first commit

$ git add banana.pdf bar.bin mew.ppt
$ git commit -m "binaries" 
```

进行更改和提交

```
$ echo "ohai, I'm a change :D" >> foo.txt
$ git add foo.txt
$ git commit -m "foo changed"

$ echo "ohai, I'm a banana" | hexdump >> banana.pdf
$ git add banana.pdf
$ git commit -m "fixup! binaries" 
```

让我们看看我们有什么

```
$ git log --oneline
42c09bd fixup! binaries     # this will be merge with
a9b1853 foo changed
8899046 binaries            # this - same commit message!
7c8ae05 foo text file       # this is also the 'root' tag 
```

现在重新设置提交以修复二进制文件的提交

```
$ git rebase --autosquash -i root    # everything will be ready for us
pick 8899046 binaries
fixup 42c09bd fixup! binaries        # notice this :)
pick a9b1853 foo changed
:wq                                  # vim save and quit

$ git log --oneline                  # lets look at what we end up with
41e1f09 foo changed
50adb90 binaries
7c8ae05 foo text file 
```

*将“未跟踪*”文件的新提交标记为**非常重要**

 *```
git commit -m "fixup! <same message as the commit to merge with>" 
```

在我们的例子中，添加“banana.pdf”的提交的原始消息是`binaries`
这样的，更改任何二进制文件的提交的提交消息应该是`fixup! binaries`（如示例中所示）

* * *

如果您不以这种方式命名提交，则`--autosquash`无法为您提供帮助，并且您必须手动将要更改的提交的行移动到要与其合并的提交下，并将“pick”替换为“fixup”，例如（从我们离开的地方继续）：

```
$ echo "ohai, more changes" >> bar.bin
$ git add bar.bin
$ git commit -m "changed bar"
$ git log --oneline
bd36eb9 changed bar
41e1f09 foo changed
50adb90 binaries
7c8ae05 foo text file

$ git rebase -i root
pick 50adb90 binaries      # you want this to merge with
pick 41e1f09 foo changed
pick bd36eb9 changed bar   # this 
```

所以把它改成

```
pick 50adb90 binaries
fixup bd36eb9 changed bar  # under the line to be merged with and with 'fixup' instead of 'pick'
pick 41e1f09 foo changed
:wq                        # save and quit

$ git log --oneline        # what we end up with
9f94cbe foo changed
886eebd binaries
7c8ae05 foo text file 
```

完毕 ：）

* * *

如果您想更进一步，您可以使用*git hook*自动执行此操作。看

```
$ git help githooks 
```

一个`pre-commit`钩子会用一些技巧为你完成工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:27:24.580

Git 作为基于快照的 VCS，在历史上具有加密安全哈希，无法“忘记”旧版本并将其替换为文件的“新”版本。这将破坏其加密安全性。

Git 被设计为最适合源代码，而不适合二进制文件，但其他 VCS 系统也不是。

一种解决方案是忽略 git repo 的二进制文件，但为其创建一个别名，该别名`git commit`将检测二进制文件更改并替换单独存档中的副本，假设它很重要。

请记住，如果您的二进制文件不经常更改，那么 git 首先是高效的，不存储重复项，其次是压缩这些文件。您还可以将文件标记为`--assume-unchanged`（我没有使用它，所以请查看手册），以便忽略短期更改。*

# c# - 无法在窗口上设置自定义位置

> ID：12964147
> 
> 赞同：2
> 
> 时间：2012-10-18T21:37:31.130
> 
> 标签：c#, .net, wpf, xaml, mdi

我正在使用[http://wpfmdi.codeplex.com/](http://wpfmdi.codeplex.com/)库来处理我的 WPF 应用程序中的 MDI。

我有一个`Canvas`包含一个子容器的容器，所有的小窗口都放在这里。我希望在 x=500, y=500 的位置打开窗户。但是，使用我当前的代码，窗口总是在画布的左上角打开。

下面我粘贴了我的 XAML 和在画布中打开一个新窗口的代码。

```
<Canvas Name="cnvsMain" Background="LightGray" AllowDrop="True" Drop="cnvsMain_Drop">
     <mdi:MdiContainer Name="mainContainer" Background="LightGray">
     </mdi:MdiContainer>
</Canvas>

            TableWindow tableWindow = new TableWindow(tableName);
            listTableWindows.Add(tableWindow);

            mainContainer.Children.Add(new MdiChild()
            {
                MaximizeBox = false,
                MinimizeBox = false,
                Resizable = true,
                ShowIcon = false,
                Title = "X",
                Position = new Point(500,500),
                Content = tableWindow.Content as UIElement //Opens new instance of my window class
            }); 
```

有任何想法吗？我也尝试从我的窗口类中设置位置，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:45:00.370

只是在这里吐口水，因为我没有使用过那个特定的图书馆，而是

```
mainContainer.Children.Add(new MdiChild()
{
    MaximizeBox = false,
    MinimizeBox = false,
    Resizable = true,
    ShowIcon = false,
    Title = "X",
    Position = new Point(500,500),
    Content = tableWindow.Content as UIElement //Opens new instance of my window class
}); 
```

你有没有尝试过

```
var child = new MdiChild
{
    MaximizeBox = false,
    MinimizeBox = false,
    Resizable = true,
    ShowIcon = false,
    Title = "X",
    Position = new Point(0, 0),
    Content = tableWindow.Content as UIElement //Opens new instance of my window class
};

mainContainer.Children.Add(child);
child.Position = new Point(500, 500);
//      or
//child.Margin = new Thickness(500, 500, 0, 0); 
```

# linux - sed 替换字符串中的字符

> ID：12964156
> 
> 赞同：1
> 
> 时间：2012-10-18T21:38:02.147
> 
> 标签：linux, replace, sed, find, vi

我有一个带字符串的文件（1、2、3 会有所不同）：

```
{"var": [1,2,3]} 
```

我想将其替换为如下所示：

```
{"var": [4,5,6]} 
```

我试试这个：

```
sed 's/\{"var": \[.*\]\}/\{"var": \[4,5,6\]\}/g' file.txt 
```

但我收到一个错误：

```
 Invalid preceding regular expression 
```

如何替换字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:43:39.570

Sed 使用了一些不寻常的转义风格：您（通常）转义符号以使它们“活跃”，否则它们只是字符。

所以，这个工作正常（没有转义大括号，另外，你错过了一个点）

```
sed 's/{"var": \[.*\]\}/\{"var": \[4,5,6\]}/g' file.txt 
```

**但是**，我建议您不要这样做，即。使用适当的 json 解析器打开文件，更改它，然后再次保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:42:46.933

试试这个 ：

```
sed -r 's@(\{"var": \[)[^\]+\]@\14,5,6]}@' file.txt 
```

**输出**

```
{"var": [4,5,6]}} 
```

*   `{ }`&`[ ]`需要反斜杠，因为它是`sed`正则表达式中的一些关键字
*   表示扩展正`-r`则*表达式*，这需要更少的反斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:43:29.140

看一下这个：

```
echo '{"var": [1,2,3]}' | sed 's/{"var": \[.*\]}/\{"var": \[4,5,6\]\}/g 
```

您需要`.*`匹配零次或多次出现的任何字符。另外，我没有转义花括号；我不确定他们是否需要逃脱。

# selenium-webdriver - 有没有办法使用 Selenium Webdriver 更改 URL 文本？

> ID：12964157
> 
> 赞同：6
> 
> 时间：2012-10-18T21:38:07.907
> 
> 标签：selenium-webdriver

假设我正在为一些公共图书馆网站编写 Selenium 测试。该网站有一个登录页面。登录网站后，我看到了一个书籍列表。我可以点击书名的任何链接。点击书名链接后，屏幕上会显示该书的摘要，网址类似于：

> [http://somePublicLibrary.com/Books/e6a9bb54-da25-102b-9a03-2db401e887ec?title=BookTitle](http://somePublicLibrary.com/Books/e6a9bb54-da25-102b-9a03-2db401e887ec?title=BookTitle)

如果我将 url 中的 guid 更改为一些无效的 guid，则页面不会显示摘要，而是显示一条消息：

> 未找到摘要。

我想为这种情况创建一个自动化测试。

我正在尝试编写诸如`changeUrlGuid()`,`getUrlGuid()`等方法。但是如何使用 Selenium Webdriver 获取 url 文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T03:22:53.897

您可以使用 getCurrentUrl() 方法获取加载页面的当前 url。

```
String url = webdriver.getCurrentUrl(); 
```

然后，您所要做的就是用新的 guid 替换旧的 guid。

```
int numOfChars = 36;
int posOfQuestionMark = url.indexOf("?");
String newGuid = "..."; // put new/wrong guid value here
String newUrl = url.substring(0, posOfQuestionMark-numOfChars)+newGuid+url.substring(posOfQuestionMark); 
```

- 编辑 -

现在，在浏览器中加载这个新的 url。

```
webdriver.get(newUrl); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T21:40:13.427

尝试以下操作：

```
 driver.current_url 
```

# c# - 在 ASP.NET C# 和 Razor 中的变量内编写 HTML 代码

> ID：12964161
> 
> 赞同：26
> 
> 时间：2012-10-18T21:38:45.017
> 
> 标签：c#, asp.net, asp.net-mvc, razor

我是 ASP.NET C# 的新手，我遇到了一些问题。

在 PHP 中，我可以将 HTML 代码存储在变量中，例如：

```
$list = "<li>My List</li>";
echo "<ul>{$list}</ul>"; // write <ul><li>My List</li></ul> 
```

我在 ASP.NET 和 Razor 中试过这个

```
string List = "<li>My List</li>";
<ul>@List</ul> 
```

但是 ASP 将 "<" 和 ">" 更改为`&gt;`and `&lt;`.. 你知道任何解决方案吗？

我还有一个问题，我可以在 PHP 之类的引号内插入变量吗？

```
echo "<ul>{$list}</ul>"; 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-18T21:40:16.250

正如您所注意到的，Razor 引擎 HTML 默认对字符串进行编码。要避免这种行为，只需使用[`Html.Raw()`](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)：

```
<ul>@Html.Raw(List)</ul> 
```

**编辑**

要在字符串中呈现变量，我想您可以使用`string.Format`：

```
@{ var someVariable = "world"; }
@string.Format("<div>hello {0}</div>", someVariable) 
```

虽然这看起来有点矫枉过正（至少在这个例子中），但你可以写：

```
<div>hello @someVariable</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-19T06:35:45.713

对于 ASP.NET Core 6.0，您可以像这样使用[MarkupString](https://docs.microsoft.com/en-us/aspnet/core/blazor/components/?view=aspnetcore-6.0#raw-html)：

```
@((MarkupString) yourString) 
```

# bdd - 举例说明：如何管理低级细节

> ID：12964165
> 
> 赞同：2
> 
> 时间：2012-10-18T21:38:53.190
> 
> 标签：bdd, acceptance-testing, specifications

我需要 BDD/ATTD/规范方面的专家的建议。（对不起，一篇长文，我不知道如何用更少的文字表达问题）

**问题描述**

我们已经在一个中型项目上工作了大约 1 年。团队使用由验收测试驱动的基于流程的流程（以详细的测试用例形式编写）。

现在，随着需求的发展，我们开始遇到这些测试的可维护性问题。

1.  它们（非常）难以阅读，绝对不能作为产品规格
2.  需求的微小变化会导致很多天的重构，因为测试与实现细节过于耦合

**我们如何看到它解决了**

为了解决这个问题，我们将把我们的测试转换成可执行的规范。我读过的所有书籍/文章（例如 Gojko Adzic 的示例规范）都建议我们不要用低层次的细节来重载规范，这些细节告诉我们应该***如何***实施产品，而不是产品应***该做什么***来满足业务需求期待。

这似乎是合理的，因为规范可能更具可读性和可维护性，并且在没有过度指定的情况下反映了业务目标而不是软件设计。然而，这些低级细节不能被丢弃——尽管业务用户没有明确要求它们，但它们仍然是预期的。例如，如果用户按下“处理按钮”，最好禁用它并启用“取消按钮”，直到处理完成。这样的细节在规范中似乎是不必要的，但对于应用程序被客户接受是必需的。

我们在每个级别都使用 (A)TDD，并且习惯于编写代码只是为了通过测试。现在，我们将拥有更多抽象的可执行规范，而不是详细的测试，并且根本不知道将这些低级细节放在哪里。

**问题**

那么，有人可以建议一种管理无法达到规范的低级别需求的良好做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:08:16.527

我认为描述步骤`When user presses 'Process button'`绝对告诉我们应该**如何**实施系统，而不是描述产品应该为业务做**什么。**从这一步我们知道了什么？只是我们在 UI 上的某处有按钮（不是链接，不是其他控件），上面有文本`Process`。与商业无关。更糟糕的是——它非常脆弱。如果您将按钮的文本更改`Start`为此步骤将无效。如果您更改控制类型，则相同。

单击按钮不是业务目标。那么，如何描述业务目标呢？我认为`When user starts processing bills`步骤的定义很好。如果您更改 UI，此行为将保持不变。它不再脆了。只有 step 的实现会改变。

# c++ - 为什么在 C++ 中会发生这种情况？

> ID：12964167
> 
> 赞同：1
> 
> 时间：2012-10-18T21:39:03.033
> 
> 标签：c++, g++, undefined-behavior

我在不同平台上使用 G++ (4.5.2) 遇到了一个非常奇怪的行为；这是代码：

```
class Class
{
private:
  std::string rString;

public:
  Class()
  {
    this->rString = "random string";
    std::cout << "Constructor of Class" << std::endl;
  }

  virtual ~Class()
  {
    std::cout << "Destructor of Class" << std::endl;
  }

  void          say() const
  {
    std::cout << "Just saying ..." << std::endl;
    if (this == NULL)
      std::cout << "Man that's really bad" << std::endl;
  }

  void          hello() const
  {
    std::cout << "Hello " << this->rString << std::endl;
  }

};

int     main()
{
  Class *c = NULL;

  /* Dereferencing a NULL pointer results
     in a successful call to the non-static method say()
     without constructing Class */
  (*c).say(); // or c->say()

  /* Dereferencing a NULL pointer and accessing a random
     memory area results in a successful call to say()
     as well */
  c[42000].say();

  /* Dereferencing a NULL pointer and accessing a
     method which needs explicit construction of Class
     results in a Segmentation fault */
  c->hello();

  return (0);
} 
```

问题是，为什么 main 函数中的前两条语句不会使程序崩溃？这是未定义的行为，还是编译器只是调用 Class::say() 就好像它是静态的，因为它没有取消引用方法内的“this”指针？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T21:40:11.367

是的，这是未定义的行为。[您不能使用空指针调用成员函数](https://stackoverflow.com/questions/2474018/when-does-invoking-a-member-function-on-a-null-instance-result-in-undefined-beha/2474021#2474021)。

在实践中，前两个确实有效，因为`this`从未取消引用，因此您的未定义行为不必像第三个那样表现出来，其中内存确实被错误地访问。

（在所有情况下，每次调用它时你都会死在里面，所以不要那样做。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T21:41:38.237

未定义的行为只是意味着没有定义发生的事情。这并不意味着“崩溃”。

**未定义的行为可以做任何事情，包括按照您想要的方式工作。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:43:31.730

这是未定义的行为。由于您没有将函数用作“虚拟”函数，因此只会静态调用函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T21:43:32.237

这是未定义的行为，尽管它会出现在前两个实例中，它已被优化为在`Class::say()`不使用对象本身的任何成员变量的情况下调用（因此 this-> 没有被取消引用/使用导致 sigserv），但第三次尝试访问它的成员. 同样，以下可能会在另一个编译器（如 VC++）上出现段错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T02:13:25.847

`this`在内部，编译器通过简单地将对象指针作为附加参数或与堆栈上的所有适当参数一起传递来实现对非静态、非虚拟函数的调用。

该标准没有规定当使用不是保存相应类或结构的实际对象的内存位置的东西调用成员函数时应该发生什么。要求这样做将需要非 noop 运行时检查（如果可能的话），因此从符合要求的实现中询问是不合理的。

The typing system already makes sure you have go out of your way to call a member function with an object of a wrong type, but checking against `NULL` or `nullptr` calls cannot meaningfully be covered by the pointer type.
If you want your binary to crash when a member function is called with the null pointer, making the member function `virtual` should do the job, because the compiler will *have* to dereference the vptr of `this` and the operating system will respond by showing you the finger.

# algorithm - 在从 N 个数组中选择 1 个元素后最小化 max - min

> ID：12964172
> 
> 赞同：0
> 
> 时间：2012-10-18T21:39:10.447
> 
> 标签：algorithm

给定`n`已排序的数组，通过从每个数组中选择一个数字来创建一个新数组，以使新数组中数字的最大值和最小值之间的差异最小化。

`n=3`输入数组的示例：

```
A = {4, 10, 15}
B = {1, 13, 29}
C = {5, 14, 28} 
```

在这种情况下，答案是`15`从数组 A、`13`数组 B 和`14`数组 C 中进行选择，因为`max[{15, 13, 14}] - min[{15, 13, 14}] = 15 - 13 = 2`没有其他组合可以得到小于 2 的最大-最小差异。

什么是最有效的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:29:21.657

设，A1, A2, ... An 是 n 个数组。
假设所有数组都已排序，否则我们可以单独对它们进行排序。

```
S = [ A1[0], A2[0],...An[0] ]
minSpread = max{S} - min{S}
Iterate i = 1 to L (where L is length of shortest array)
   Remove min{S} from S.
   Insert Ak[i] in S. (where Ak is the kth array from which a value was removed in previous step.)
   minSpread = min(minSpread, max{S} - min{S}); 
```

由于我们必须最小化传播（最大-最小），我们唯一的选择是通过删除当前的最小值来“向上”挤压最小值。

在 O(N) + O(N*L*logN) 中计算，其中 N 为否。数组和 L 是最短数组的长度。

这是显示搜索结果时的常见问题。当我们必须显示包含所有给定搜索词的页面摘录的最小可能窗口时。
这里，A1[] A2[]...An[] 包含单词say-W1，W2...Wn 出现的索引。

**编辑：**

尼莫：你说得对。证明有点牵强。您提供的链接尝试了类似的解决方案。我能补充的是：

考虑以下事实：
1\. 我们必须从每个数组中准确地维护一个元素。
2\. 数组全部按升序排列。
因此，帮助我们立即丢弃许多组合，与生成所有组合相比，可以在更好的时间内完成它。有关更多详细信息，请访问“Nemo”提供的链接。

并且，通过按照建议维护一个 minheap，可以将复杂性降低到 O(N) + O(N*L*logN)。
其中，N 为否。数组和 L 是最短数组的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:51:02.860

这可以通过递归回溯方法来解决：

```
Best = OO
ChoiceArr = [ ]

function rec(i)
       if (i == numArrays)
          calc()
       else
           for j = 0 to Arrays[i].length - 1
               ChoiceArr[i] = Arrays[i][j]
               rec(i + 1)

function calc()
     mn = OO
     mx = -OO
     for i = 0 to ChoiceArr.length - 1
          mn = min(mn, ChoiceArr[i])
          mx = max(mx, ChoiceArr[i])

     Best = min(Best, mx - mn) 
```

复杂度是**指数级的： O(m ^ n)**，其中*m*是最大子数组大小，*n*是子数组的总数。*随着n*的增长，这可能会增长得非常快并消耗大量时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:46:23.933

1.  将所有数组中的所有元素复制到一个新数组中，其中元素包含原始数组中的值和原始数组的唯一标识符。在）
2.  按值 O(n log n) 对新数组进行排序
3.  遍历新数组 - 找到第一个和最后一个成员之间差异最小并且还包含所有原始数组的成员的序列。O(n^2)

C# 实现

```
var arr1 = new[] { 4, 10, 15 };
var arr2 = new[] { 1, 13, 29 };
var arr3 = new[] { 5, 14, 28 };

var sortedAndIndexed = arr1
    .Select(x => new { value = x, array = 'a' })
    .Concat(arr2.Select(x => new { value = x, array = 'b' }))
    .Concat(arr3.Select(x => new { value = x, array = 'c' }))
    .OrderBy(x => x.value)
    .ToList();

var numberOfArrays = 3;
var minValue = sortedAndIndexed.Last().value - sortedAndIndexed.First().value;
var bestSlice = new[] { 0, sortedAndIndexed.Count - 1 };
for (int i = 0; i < sortedAndIndexed.Count; i++)
{
    var seen = new HashSet<char>();
    var firstItem = sortedAndIndexed[i];
    seen.Add(firstItem.array);
    int j = i + 1;
    for (; j < sortedAndIndexed.Count && 
           seen.Count < numberOfArrays && 
           sortedAndIndexed[j].value - firstItem.value < minValue; j++)
    {
        seen.Add(sortedAndIndexed[j].array);
    }
    if (seen.Count == numberOfArrays)
    {
        j -= 1;
        int value = sortedAndIndexed[j].value - firstItem.value;
        if (value < minValue)
        {
            minValue = value;
            bestSlice = new[] { i, j };
        }
    }
}

var arraySeen = new HashSet<char>();
var sliceElements = new List<int>();
for (int i = bestSlice[0]; i <= bestSlice[1]; i++)
{
    var item = sortedAndIndexed[i];
    if (arraySeen.Add(item.array))
    {
        sliceElements.Add(item.value);
    }
}
var elements = sliceElements
      .Select(x => x.ToString())
      .ToArray();
var result = String.Join(", ", elements);
Console.WriteLine("Best slice: "+ result); 
```

输出：

```
Best slice: 13, 14, 15 
```

# android - 有效的 ListView 不再有效

> ID：12964173
> 
> 赞同：-2
> 
> 时间：2012-10-18T21:39:14.317
> 
> 标签：android, eclipse, listview, twitter, baseadapter

我正在做一个关于包含推文的 ListView 的教程。它有效，但现在每次都崩溃。我检查了我的代码，它与教程中的完全相同。

* * *

```
public class MainActivity extends Activity {

    Button mBtnDownload;
    EditText mEtxtUsername;
    ProgressDialog mProgressDialog;

    TextView mTxtvUserNameTitle;
    TextView mTxtvUserName;
    TextView mTxtvUrlTitle;
    TextView mTxtvUrl;
    TextView mTxtvFavouritesCountTitle;
    TextView mTxtvFavouritesCount;
    TextView mTxtvDescriptionTitle;
    TextView mTxtvDescription;
    Button mBtnTweets;

    TwitterUser mTwitterUser;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nicelayout);

        mBtnDownload = (Button) findViewById(R.id.btnDownload);
        mEtxtUsername = (EditText) findViewById(R.id.etxtUsername);

        mTxtvUserNameTitle = (TextView) findViewById(R.id.txtvUserNameTitle);
        mTxtvUserName = (TextView) findViewById(R.id.txtvUserName); 
        mTxtvUrlTitle = (TextView) findViewById(R.id.txtvUrlTitle); 
        mTxtvUrl = (TextView) findViewById(R.id.txtvUrl);

        mTxtvFavouritesCountTitle = (TextView) findViewById(R.id.txtvFavouritesCountTitle);
        mTxtvFavouritesCount = (TextView) findViewById(R.id.txtvFavouritesCount); 
        mTxtvDescriptionTitle = (TextView) findViewById(R.id.txtvDescriptionTitle); 
        mTxtvDescription = (TextView) findViewById(R.id.txtvDescription);

        mBtnTweets = (Button) findViewById(R.id.btnTweets);

        updateView();
    }

    public void downloadUserInfo(View view){
        if (view == mBtnDownload){
            String username = mEtxtUsername.getText().toString();
            if (username.length() > 0){
                    mProgressDialog = new ProgressDialog(this);
                    mProgressDialog.setMessage("Bezig met het ophalen van gegevens...");
                    mProgressDialog.show();
                    new DownloadUserInfoTask().execute();
            }
            else{
                Toast.makeText(this, "Voer een twitter gebruikersnaam in", Toast.LENGTH_LONG).show();
            }
        }
    }

    public void showTweets(View view){
        if (view == mBtnTweets){
            Intent intent = new Intent(this, TweetsActivity.class);
            intent.putExtra("twitter_user_name", mTwitterUser.getUserName());
            startActivity(intent);

        }
    }

    private DefaultHttpClient createHttpClient() {
        HttpParams my_httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(my_httpParams, 3000);
        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        ThreadSafeClientConnManager multiThreadedConnectionManager = new ThreadSafeClientConnManager(my_httpParams, registry);
        DefaultHttpClient httpclient = new DefaultHttpClient(multiThreadedConnectionManager, my_httpParams);
        return httpclient;
    }

    private void updateView(){
        if (mTwitterUser == null){
            mTxtvUrlTitle.setVisibility(View.INVISIBLE);
            mTxtvUrl.setVisibility(View.INVISIBLE);
            mTxtvUserNameTitle.setVisibility(View.INVISIBLE);
            mTxtvUserName.setVisibility(View.INVISIBLE);

            mTxtvFavouritesCountTitle.setVisibility(View.INVISIBLE);
            mTxtvFavouritesCount.setVisibility(View.INVISIBLE);
            mTxtvDescriptionTitle.setVisibility(View.INVISIBLE);
            mTxtvDescription.setVisibility(View.INVISIBLE);

            mBtnTweets.setVisibility(View.INVISIBLE);
        }
        else {
            mTxtvUrlTitle.setVisibility(View.VISIBLE);
            mTxtvUrl.setVisibility(View.VISIBLE);
            mTxtvUserNameTitle.setVisibility(View.VISIBLE);
            mTxtvUserName.setVisibility(View.VISIBLE);

            mTxtvFavouritesCountTitle.setVisibility(View.VISIBLE);
            mTxtvFavouritesCount.setVisibility(View.VISIBLE);
            mTxtvDescriptionTitle.setVisibility(View.VISIBLE);
            mTxtvDescription.setVisibility(View.VISIBLE);

            mBtnTweets.setVisibility(View.VISIBLE);

            mTxtvUrl.setText(mTwitterUser.getWebsite());
            mTxtvUserName.setText(mTwitterUser.getUserName());
            mTxtvFavouritesCount.setText(mTwitterUser.getFavouritesCount() + "");
            mTxtvDescription.setText(mTwitterUser.getDescription());
        }
    }

    private class DownloadUserInfoTask extends AsyncTask<Void, Void, Void> {

        int mStatusCode = 0;
        String mResultString;
        Exception mConnectionException;

        @Override
        protected Void doInBackground(Void... args) {
            String username = mEtxtUsername.getText().toString();
            String encodedUserName= "";
            try {
                encodedUserName= URLEncoder.encode(username, "utf-8");
            } catch (UnsupportedEncodingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            String fetchUrl = "http://api.twitter.com/1/users/show.json?screen_name=" + encodedUserName;

            DefaultHttpClient httpclient = createHttpClient();
            HttpGet httpget = new HttpGet(fetchUrl);

            try {
                HttpResponse response = httpclient.execute(httpget);
                StatusLine statusLine = response.getStatusLine();
                mStatusCode  = statusLine.getStatusCode();

                if (mStatusCode == 200){
                    mResultString = EntityUtils.toString(response.getEntity());
                }
            } catch (ClientProtocolException e) {
                e.printStackTrace();
                mConnectionException = e;
            } catch (IOException e) {
                e.printStackTrace();
                mConnectionException = e;
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void arg) {
            mProgressDialog.dismiss();
            if (mStatusCode  == 200){
                mTwitterUser = new TwitterUser(mResultString);
                updateView();
            }
            else if (mStatusCode  == 404){
                Toast.makeText(MainActivity.this, "De gevraagde gebruiker bestaat niet.", Toast.LENGTH_LONG).show();
                mTwitterUser = null;
                updateView();
            }
            else if (mStatusCode > 0){
                Toast.makeText(MainActivity.this, "Er is in verbindingsfout opgetreden met foutcode " + mStatusCode, Toast.LENGTH_LONG).show();
                mTwitterUser = null;
                updateView();
            }
            else {
                Toast.makeText(MainActivity.this, "Gegevens konden niet worden opgehaald. Controleer uw internetverbinding en probeer het opnieuw (" +mConnectionException.toString() + ")" , Toast.LENGTH_LONG).show();
                mTwitterUser = null;
                updateView();
            }
        }
    }
}

public class TwitterUser {

    String mUserName;
    String mWebsite;
    String mDescription;
    int mFavouritesCount;

    public TwitterUser(String jsonString){
        try {
            JSONObject jSONObject = new JSONObject(jsonString);
            mUserName = jSONObject.optString("screen_name");
            mWebsite = jSONObject.optString("url");
            mDescription = jSONObject.optString("description");
            mFavouritesCount = jSONObject.optInt("favourites_count");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public String getUserName(){
        return mUserName;
    }

    public String getWebsite(){
        return mWebsite;
    }

    public String getDescription(){
        return mDescription;
    }

    public int getFavouritesCount(){
        return mFavouritesCount;
    }
}

public class TweetsActivity extends Activity {

    TextView mTxtvTitle;

    ProgressDialog mProgressDialog;
    String mUserName;

    ArrayList<Tweet> mTweets;
    ListView mLvTweets;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tweets);

        mTxtvTitle = (TextView) findViewById(R.id.txtvTitle);
        mLvTweets = (ListView) findViewById(R.id.lvTweets);

        Intent intent = getIntent();
        Bundle extrasBundle = intent.getExtras();
        mUserName = extrasBundle.getString("twitter_user_name");

        updateView();

        startDownloadingTweets();
    }

    private void updateView() {
        mTxtvTitle.setText(mUserName);

        if (mTweets != null){
            TweetsListAdapter tweetsListAdapter = new TweetsListAdapter(this, mTweets);
            mLvTweets.setAdapter(tweetsListAdapter);
        }
    }

    private void startDownloadingTweets() {
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Bezig met het ophalen van gegevens...");
        mProgressDialog.show();
        new DownloadTweetsTask().execute();
    }

    private DefaultHttpClient createHttpClient() {
        HttpParams my_httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(my_httpParams, 3000);
        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        ThreadSafeClientConnManager multiThreadedConnectionManager = new ThreadSafeClientConnManager(my_httpParams, registry);
        DefaultHttpClient httpclient = new DefaultHttpClient(multiThreadedConnectionManager, my_httpParams);
        return httpclient;
    }

    private class DownloadTweetsTask extends AsyncTask<Void, Void, Void> {

        int mStatusCode = 0;
        String mResultString;
        Exception mConnectionException;

        @Override
        protected Void doInBackground(Void... args) {
            String encodedUserName= "";
            try {
                encodedUserName= URLEncoder.encode(mUserName, "utf-8");
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            }

            String fetchUrl = "http://api.twitter.com/1/statuses/user_timeline.json?include_rts=true&count=30&screen_name=" + encodedUserName;

            DefaultHttpClient httpclient = createHttpClient();
            HttpGet httpget = new HttpGet(fetchUrl);

            try {
                HttpResponse response = httpclient.execute(httpget);
                StatusLine statusLine = response.getStatusLine();
                mStatusCode  = statusLine.getStatusCode();

                if (mStatusCode == 200){
                    mResultString = EntityUtils.toString(response.getEntity());
                }
            } catch (ClientProtocolException e) {
                e.printStackTrace();
                mConnectionException = e;
            } catch (IOException e) {
                e.printStackTrace();
                mConnectionException = e;
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void arg) {
            mProgressDialog.dismiss();
            if (mStatusCode  == 200){
                processResults(mResultString);
                updateView();
            }
            else if (mStatusCode  == 401){
                Toast.makeText(TweetsActivity.this, "De timeline van deze gebruiker is niet publiek toegankelijk.", Toast.LENGTH_LONG).show();
            }
            else if (mStatusCode > 0){
                Toast.makeText(TweetsActivity.this, "Er is in verbindingsfout opgetreden met foutcode " + mStatusCode, Toast.LENGTH_LONG).show();
            }
            else {
                Toast.makeText(TweetsActivity.this, "Gegevens konden niet worden opgehaald. Controleer uw internetverbinding en probeer het opnieuw (" +mConnectionException.toString() + ")" , Toast.LENGTH_LONG).show();
            }
        }

    }   

    private void processResults(String resultString) {
        mTweets = new ArrayList<Tweet>();
        try {
            JSONArray jSONArray = new JSONArray(resultString);
            for (int counter = 0; counter < jSONArray.length() ; counter ++){
                JSONObject jSONObject = jSONArray.getJSONObject(counter);
                Tweet tweet = new Tweet(jSONObject);
                mTweets.add(tweet);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

}

public class TweetsListAdapter extends BaseAdapter {

    ArrayList<Tweet> mTweets;
    LayoutInflater mInflater;

    public TweetsListAdapter(Context context, ArrayList<Tweet> tweets){
        mTweets = new ArrayList<Tweet>();
        mTweets.addAll(tweets);
        notifyDataSetChanged();
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return mTweets.size();
    }

    public Tweet getItem(int position) {
        return mTweets.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.tweet_listitem, null);

            holder = new ViewHolder();
            holder.mTxtvText = (TextView) convertView.findViewById(R.id.txtvText);
            holder.mTxtvCreatedAt = (TextView) convertView.findViewById(R.id.txtvCreatedAt);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        Tweet tweet = getItem(position);

        holder.mTxtvText.setText(tweet.getText());

        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd-MM-yyyy HH:mm");
        String dateString = simpleDateFormat.format(tweet.getCreatedAt());
        holder.mTxtvCreatedAt.setText(dateString);

        return convertView;
    }

    private class ViewHolder {
        TextView mTxtvText;
        TextView mTxtvCreatedAt;
    }
}

public class Tweet {

    Date mCreatedAt;
    String mText;

    static SimpleDateFormat sEnglishSimpleDateFormat;

    public Tweet(JSONObject jSONObject){
        String dateString = jSONObject.optString("created_at");

            if (sEnglishSimpleDateFormat == null){
                Locale englishLocale = Locale.ENGLISH;
                sEnglishSimpleDateFormat = new SimpleDateFormat("EEE MMM dd HH:mm:ss ZZZZZ yyyy", englishLocale);
            }

        try {
            mCreatedAt = sEnglishSimpleDateFormat.parse(dateString);
        } catch (ParseException e) {
            e.printStackTrace();
        }

        mText = jSONObject.optString("text");
    }

    public Date getCreatedAt(){
        return mCreatedAt;
    }

    public String getText(){
        return mText;
    }
} 
```

以及发生的错误：

```
10-18 21:22:49.478: D/dalvikvm(390): GC freed 4935 objects / 312200
bytes in 101ms 10-18 21:22:51.628: I/Resources(390): Loaded time zone
names for en_US in 1769ms. 10-18 21:22:51.938: D/dalvikvm(390): GC
freed 2918 objects / 178312 bytes in 245ms 10-18 21:22:51.948:
D/dalvikvm(390): threadid=17 wakeup: interrupted 10-18 21:22:54.958:
D/AndroidRuntime(390): Shutting down VM 10-18 21:22:54.958:
W/dalvikvm(390): threadid=3: thread exiting with uncaught exception
(group=0x4001b188) 10-18 21:22:54.968: E/AndroidRuntime(390): Uncaught
handler: thread main exiting due to uncaught exception 10-18
21:22:54.988: E/AndroidRuntime(390): java.lang.IllegalStateException:
Could not execute method of the activity 10-18 21:22:54.988:
E/AndroidRuntime(390):  at android.view.View$1.onClick(View.java:2031)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
android.view.View.performClick(View.java:2364) 10-18 21:22:54.988:
E/AndroidRuntime(390):  at
android.view.View.onTouchEvent(View.java:4179) 10-18 21:22:54.988:
E/AndroidRuntime(390):  at
android.widget.TextView.onTouchEvent(TextView.java:6541) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.view.View.dispatchTouchEvent(View.java:3709) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
android.app.Activity.dispatchTouchEvent(Activity.java:2061) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
android.view.ViewRoot.handleMessage(ViewRoot.java:1691) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.os.Handler.dispatchMessage(Handler.java:99) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.os.Looper.loop(Looper.java:123) 10-18 21:22:54.988:
E/AndroidRuntime(390):  at
android.app.ActivityThread.main(ActivityThread.java:4363) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
java.lang.reflect.Method.invokeNative(Native Method) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
java.lang.reflect.Method.invoke(Method.java:521) 10-18 21:22:54.988:
E/AndroidRuntime(390):  at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
dalvik.system.NativeStart.main(Native Method) 10-18 21:22:54.988:
E/AndroidRuntime(390): Caused by:
java.lang.reflect.InvocationTargetException 10-18 21:22:54.988:
E/AndroidRuntime(390):  at
com.example.twittertest.MainActivity.showTweets(MainActivity.java:93)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
java.lang.reflect.Method.invokeNative(Native Method) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
java.lang.reflect.Method.invoke(Method.java:521) 10-18 21:22:54.988:
E/AndroidRuntime(390):  at android.view.View$1.onClick(View.java:2026)
10-18 21:22:54.988: E/AndroidRuntime(390):  ... 22 more 10-18
21:22:54.988: E/AndroidRuntime(390): Caused by:
android.content.ActivityNotFoundException: Unable to find explicit
activity class
{com.example.twittertest/com.example.twittertest.TweetsActivity}; have
you declared this activity in your AndroidManifest.xml? 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
10-18 21:22:54.988: E/AndroidRuntime(390):  at
android.app.Activity.startActivityForResult(Activity.java:2749) 10-18
21:22:54.988: E/AndroidRuntime(390):    at
android.app.Activity.startActivity(Activity.java:2855) 10-18
21:22:54.988: E/AndroidRuntime(390):    ... 26 more 10-18 21:22:55.031:
I/dalvikvm(390): threadid=7: reacting to signal 3 10-18 21:22:55.031:
E/dalvikvm(390): Unable to open stack trace file
'/data/anr/traces.txt': Permission denied 10-18 21:22:57.828:
I/Process(390): Sending signal. PID: 390 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:44:37.023

`com.example.twittertest.TweetsActivity`正如您的错误日志告诉您的那样，在您的清单中声明。

> 10-18 21:22:54.988: E/AndroidRuntime(390): Caused by: `android.content.ActivityNotFoundException`: Unable to find explicit activity class { `com.example.twittertest/com.example.twittertest.TweetsActivity`}; **您是否在 AndroidManifest.xml 中声明了此活动**？

像这样：

```
<activity android:name="com.example.twittertest.TweetsActivity" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:47:52.567

错误出现在您从 logcat 发布的字符串中。

`Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.twittertest/com.example.twittertest.TweetsActivity}; have you declared this activity in your AndroidManifest.xml?`

该活动`TweetsActivity`未在您的清单中声明。您必须打开项目根目录中的 AndroidManifest.xml 文件。在这个文件中，放置声明：

```
<activity
    android:name="com.example.twittertest.TweetsActivity">
</activity> 
```

`<aplication>`标签内。

# javascript - 如何使用 JavaScript 排列 HTML 表格的列

> ID：12964174
> 
> 赞同：1
> 
> 时间：2012-10-18T21:39:33.813
> 
> 标签：javascript, html-table

我制作了一个动态添加行到我的 html 表的表，它也动态地将删除按钮添加到行中。单击表格标题时，我需要排列列！

```
<body>
  <div id="app">
    <form id="organiser">
      <label id="heading">Organiser</label>
  <br/>
      <br/>
      <label>No:</label>
      <input type="text" id="description"/>
      <br/>
      <label>Importance Level:</label>
      <select id="options1">
        <option value=" 1 " name="1" id="1"> 1 </option>
        <option value=" 2 " name="2" id="2"> 2 </option>
        <option value=" 3 " name="3" id="3"> 3 </option>
      </select>
      <br/>
      <label>Due Date:</label>
      <input type="date" id="date" />
      <br/>
      <input type="button" id="add" value="Add" onClick="addRowToTable();"/>
    </form>
    <br/>
    <table border="1" id="table">
      <tr>
        <th>No</th>
        <th>Task</th>
        <th>Importance</th>
        <th>Date Tasks Due</th>
        <th></th>
      </tr>
    </table>
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:05:49.980

填充单元格内容的另一种方法可能是：

```
//Insert tags on cell
var cell2= row.insertCell(2);  
cell2.innerHTML = '<label>Hello </label> <span>World</span>"/>'; 
```

对于大桌子，也许你可以使用这个： [http ://www.trirand.com/blog/](http://www.trirand.com/blog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:07:17.310

玩弄了您的代码并进行了大量更改（包括对 HTML），请参阅[**此 fiddle**](http://jsfiddle.net/CfJYf/)。

我最终得到的 JavaScript 如下

```
function addRowToTable(table){
    var table = document.getElementById('table'),
        i = table.rows.length,
        tr = table.insertRow(i),
        t0 = tr.insertCell(0),
        t1 = tr.insertCell(1),
        t2 = tr.insertCell(2),
        t3 = tr.insertCell(3),
        t4 = tr.insertCell(4),
        text, elm;

    // Give row unique values
    tr.setAttribute('name', 'txtRow' + i);
    tr.setAttribute('id', 'txtRow' + i);

    // First cell
    text = document.createTextNode( i );
    t0.appendChild( text );

    // Second cell
    text = document.createTextNode( document.getElementById('description').value || 'N/A' );
    t1.appendChild( text );

    // Third cell
    elm = document.getElementById('options1'); // you need to describe what you're trying to do here better
    text = document.createTextNode( elm.value );
    t2.appendChild( text );

    // Fourth cell
    elm = document.getElementById('date');
    text = document.createTextNode( elm.value || 'N/A' );
    t3.appendChild( text );

    // Delete button cell
    elm = document.createElement('input');
    elm.setAttribute('type', 'button');
    elm.setAttribute('value', 'x');
    elm.setAttribute('class', 'delete');
    elm.onclick = function(e){ deleteButton( tr ); };
    t4.appendChild(elm);
}

function sortCol( col ){
    var table = document.getElementById('table'),
        arr, i;
    if( col >= table.rows[0].cells.length) return;

    arr = Array.prototype.map.call(table.rows, function( row ){
        return [row, row.cells[col].textContent];
    });
    arr.shift(); // skip ID, Description..

    arr.sort( function(a, b){
        return a[1].localeCompare( b[1] );
    } );

    for( i = 0; i<arr.length; i = i + 1){
        table.tBodies[0].appendChild( arr[i][0] );
    }
}

function deleteButton( tr ){
    tr.parentNode.removeChild(tr);
} 
```

# c# - 使用代码取消选中 HTML 复选框

> ID：12964178
> 
> 赞同：2
> 
> 时间：2012-10-18T21:39:54.770
> 
> 标签：c#, html, checkbox, webbrowser-control

我正在制作一个机器人，它有一个可以加载一些页面的 WebBrowser 控件。我希望我的机器人取消选中一个复选框。现在我正在使用这段代码：

```
HtmlElementCollection elc = this.BotBrowser.Document.GetElementsByTagName("input");
foreach (HtmlElement el in elc)
{
    if (el.GetAttribute("value").Equals("Leishmania mexicana")) //to uncheck Leishmania mexicana checkbox
    {
        el.InvokeMember("click");

    }
} 
```

但这似乎并不完美，因为它有时会重新选中复选框，因为该机器人必须加载页面并执行超过 100 次任务。

这是复选框的 HTML 标记：

```
<input type="checkbox" class="jstree-real-checkbox" id="array(BlastDatabaseOrganism)" name="array(BlastDatabaseOrganism)" value="Leishmania mexicana" checked="checked"> 
```

有什么方法可以删除此属性或将其**选中**属性设置为 null？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:47:47.073

试试这个

```
el.SetAttribute("checked", null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:45:58.860

首先将 mshtml（com 选项卡下的 Microsoft Html 对象库）命名空间导入您的项目。然后用这个

```
 using mshtml;

HtmlElementCollection elc = this.BotBrowser.Document.GetElementsByTagName("input");
foreach (HtmlElement el in elc)
{
      if (el.GetAttribute("value").Equals("Leishmania mexicana")) //to uncheck Leishmania mexicana checkbox
                    {
                            HTMLInputElement elm = el.DomElement as HTMLInputElement;
                          elm.@checked = false;

                    }
} 
```

# xcode - xcode - if 语句由按钮激活？

> ID：12964180
> 
> 赞同：0
> 
> 时间：2012-10-18T21:39:58.237
> 
> 标签：xcode, button, if-statement, action

我试图通过按一个按钮来改变不同数量的数字。我是 xcode 的新手，不知道该怎么做，任何帮助都会很好。

我希望数字更改为 15，但仅当我第二次按下按钮时。然后，我想在第三次按下时将数字更改为 30。

```
-(IBAction)changep1:(id) sender {
p1score.text = @"5";
if (p1score.text = @"5"){

    p1score.text = @"15"; 
```

//即使上述方法有效，我也不知道如何编写代码将其更改为 30。}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:45:01.630

在上面的示例代码中，您在语句中使用了赋值运算符而`=`不是比较运算符。另外，在测试 NSString 相等性时，使用这样的实例方法：`==``if``isEqualToString:`

```
-(IBAction)changep1:(id)sender
{
    p1score.text = @"5";

    if ([p1score.text isEqualToString:@"5"])
    {
        p1score.text = @"15";
    }
} 
```

请记住，尽管上面的代码片段将`p1score.text`始终设置为值，`@"15"`因为您将其设置在`if`使条件评估为的语句之前的行上`YES`。

要使其仅在第一次点击后更改文本，您可以执行以下操作：

```
-(IBAction)changep1:(id)sender
{
    if ([p1score.text isEqualToString:@"5"])
    {
        p1score.text = @"15";
    }
    else
    {
        p1score.text = @"5";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:45:34.077

你应该使用：

```
if ([p1score.text isEqualToString:@"5"]){
     p1score.text = @"15";
} 
```

# python - Python - 返回无

> ID：12964188
> 
> 赞同：2
> 
> 时间：2012-10-18T21:40:17.793
> 
> 标签：python

我已经开始使用 google Python 类，但我得到了一些奇怪的结果，一整天的调试并没有帮助我解决它。

似乎正在发生的事情是函数返回 None 而不是我分配给它们的值，但为什么会发生这种情况让我难以理解。我写了一些调试行并试图逐步完成它，但我看到了导致这种行为的原因。

**以下是一些调试输出的示例：**

```
C:\Users\toshiba\Dropbox\DEV\python\google-python-exercises\basic>python string2.py
front_back
  X  got: None expected: 'abxcdy'
 OK  got: 'abcxydez' expected: 'abcxydez'
 OK  got: 'KitDontenut' expected: 'KitDontenut' 
```

代码来自谷歌类，然后是我编写的函数。

```
# F. front_back
# Consider dividing a string into two halves.
# If the length is even, the front and back halves are the same length.
# If the length is odd, we'll say that the extra char goes in the front half.
# e.g. 'abcde', the front half is 'abc', the back half 'de'.
# Given 2 strings, a and b, return a string of the form
#  a-front + b-front + a-back + b-back
def front_back(a, b):
  # +++your code here+++

  # Debug hardcode setting
  # set to 1 to debug (default 0 off)
  letsDebug = 0

  alpha, bravo = a, b
  if letsDebug == 1:
        endString = a \
        + ' ' \
        + b
        return endString

  lenA = len(alpha)
  lenB = len(bravo)

  if lenA % 2 == 1:
    statAlpha = 'odd'
  else:
    statAlpha = 'even'

  if lenB % 2 == 1:
    statBravo = 'odd'
  else:
    statBravo = 'even'
  if letsDebug == 2:
        endString = a \
        + ' ' \
        + b \
        + ' ' \
        + statAlpha \
        +  ' ' \
        + statBravo 
        return endString

  workB = lenB / 2
  workA = lenA / 2
  if letsDebug == 3:
        endString = a \
        + ' ' \
        + b \
        + ' ' \
        + statAlpha \
        +  ' ' \
        + statBravo \
        + ' ' \
        + str(workA) \
        + ' ' \
        + str(workB) 
        return endString

  if statAlpha == 'even':
    aFront, aBack = alpha[:workA], alpha[-workA:]
  else:
    aFront, aBack = alpha[:(workA+1)], alpha[-workA:]

  if statBravo == 'even':
    bFront, bBack = bravo[:workB], bravo[-workB:]
  else:
    bFront, bBack = bravo[:(workB+1)], bravo[-workB:]

    if letsDebug == 4:
        endString = a \
        + ' ' \
        + str(workA) \
        + ' ' \
        + b \
        + ' ' \
        + str(workB) \
        + ' ' \
        + statAlpha \
        +  ' ' \
        + statBravo \
        + ' ' \
        + aFront \
        + ' ' \
        + bFront \
        + ' ' \
        + aBack \
        + ' ' \
        + bBack \
        + ' ' \
        + aFront + bFront + aBack + bBack
    else:
        endString = aFront + bFront + aBack + bBack

    return endString

# Simple provided test() function used in main() to print
# what each function returns vs. what it's supposed to return.
def test(got, expected):
  if got == expected:
    prefix = ' OK '
  else:
    prefix = '  X '
  print '%s got: %s expected: %s' % (prefix, repr(got), repr(expected))

# main() calls the above functions with interesting inputs,
# using the above test() to check if the result is correct or not.
def main():
  print 'verbing'
  test(verbing('hail'), 'hailing')
  test(verbing('swiming'), 'swimingly')
  test(verbing('do'), 'do')

  print
  print 'not_bad'
  test(not_bad('This movie is not so bad'), 'This movie is good')
  test(not_bad('This dinner is not that bad!'), 'This dinner is good!')
  test(not_bad('This tea is not hot'), 'This tea is not hot')
  test(not_bad("It's bad yet not"), "It's bad yet not")

  print
  print 'front_back'
  test(front_back('abcd', 'xy'), 'abxcdy')
  test(front_back('abcde', 'xyz'), 'abcxydez')
  test(front_back('Kitten', 'Donut'), 'KitDontenut')

if __name__ == '__main__':
  main() 
```

非常感谢任何能破译我去哪里的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:46:50.017

你有一条离开最后一个 if 在 front_back() 中的路径，它没有被 return 语句覆盖。这个：

```
if statBravo == 'even': 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:50:43.880

看起来末尾的整个块`front_back`缩进了太多级别。From `if letsDebug == 4:`to `return endString`- 这是从它上面开始的 else 块的所有部分（`else`for 语句`if statBravo == 'even':`）。我猜这应该是在函数范围内。

# ios - dequeueResusableCellWithIdentifier 不返回自定义单元格

> ID：12964192
> 
> 赞同：1
> 
> 时间：2012-10-18T21:40:34.800
> 
> 标签：ios, xcode, uitableview

我正在尝试在独立于情节提要和笔尖配置的表格视图中使用自定义单元格。

每当我使用 tableview 的 dequeuing 方法时，单元格都会作为标准返回，即磨坊单元格的运行。但是，如果我不使用出队，则单元格会按预期返回，即自定义。这似乎不起作用：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.tableView registerClass:[FloatingGradientCell class] forCellReuseIdentifier:@"Cell"];
    static NSString *CellIdentifier = @"Cell";
    FloatingGradientCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil)
        cell = [[FloatingGradientCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier topGradientColor:[UIColor blackColor] bottomGradientColor:[UIColor blackColor]];

    MWFeedItem *article = [_articles objectAtIndex:indexPath.row];
    cell.textLabel.text = article.title;

    return cell;
} 
```

然而，这是有效的。. . .

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    FloatingGradientCell *cell = [[FloatingGradientCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell" topGradientColor:[UIColor lightTextColor] bottomGradientColor:[UIColor whiteColor]];

    MWFeedItem *article = [_articles objectAtIndex:indexPath.row];
    cell.textLabel.text = article.title;

    return cell;
} 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:44:52.253

您正在为每个单元重新注册课程。您应该在其他地方注册自定义单元格，例如在您的 viewDidLoad 中。

# perl - Perl 在 Unix 根目录中打开

> ID：12964193
> 
> 赞同：0
> 
> 时间：2012-10-18T21:40:38.977
> 
> 标签：perl

在 Perl 打开的情况下，是否无法在 Unix 根目录 ("/") 中打开文件进行写入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:44:06.087

So long as you have the appropriate permissions from the filesystem, then you can open any file.

If an `open` fails, then `$!` will contain the reason why.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:19:52.970

绝对不是不可能的。只是为了添加更多上下文，我相信 Unix/Linux 系统根目录中的大多数文件默认情况下只能由 root 用户写入。因此，除非您在“/”中有属于其他用户的文件，否则您的 perl 脚本可能必须以 root 身份运行。

# csh - 如何在 PBS 扭矩中使用 qsub -v 命令？

> ID：12964195
> 
> 赞同：10
> 
> 时间：2012-10-18T21:40:43.433
> 
> 标签：csh, pbs, qsub, torque

我想通过使用“qsub -v”命令将变量传递给 csh 脚本。我知道我们可以列出参数值对如下，

```
qsub -v par1=value1 par2=value2 myScript.csh 
```

有谁知道这些参数的值是否可以是字符串、以逗号分隔的数字列表或文件名？例如，下面的命令是否可行？

```
qsub -v par1='Cassie_score' par2=cassieFile.txt par3='100,200,300,' myScript.csh 
```

非常感谢你，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T22:20:45.323

它们只需要用逗号分隔：

```
qsub -v var1="val1",var2=1,var3=val3 script.csh 
```

对于你的例子，那就是：

```
qsub -v par1='Cassie_score',par2=cassieFile.txt,par3='100,200,300,' myScript.csh 
```

请注意，这不会将 cassieFile.txt 移动到将运行作业的节点，因此 cassieFile.txt 需要成为共享文件系统上某个位置的路径。

# git - 在heroku上拉入经过身份验证的git repos

> ID：12964196
> 
> 赞同：5
> 
> 时间：2012-10-18T21:40:51.023
> 
> 标签：git, heroku

我一直在尝试在 heroku 上引入一些经过身份验证的 git repos，并遇到了一些问题。

理想情况下，我希望能够在[此处使用令牌解决方案，](https://github.com/blog/1270-easier-builds-and-deployments-using-git-over-https-and-oauth) 或者如果令牌解决方案不是，则`git pull https://<token>@github.com/username/bar.git`甚至可以接受解决方案。`git pull https://username:password@github.com/username/bar.git`

但是，似乎 heroku 版本的 git (v1.7.0) 与 https 身份验证的克隆作斗争：

```
$ heroku run bash
$ git --version
git version 1.7.0
$ git clone https://username:password@github.com/username/bar.git
Initialized empty Git repository in /app/bevry-website/.git/
error: The requested URL returned error: 401 while accessing https://username:password@github.com/username/bar.git/info/refs
fatal: HTTP request failed 
```

在 heroku 实例上安装较新版本的 git (v1.7.12) 并使用它可以正常工作：

```
$ heroku run bash
$ curl --silent --location http://git-core.googlecode.com/files/git-1.7.12.tar.gz | tar xz; cd git-1.7.12; make NO_TCLTK=YesPlease NO_PERL=YesPlease NO_GETTEXT=YesPlease NO_SVN_TESTS=YesPlease NO_MSGFMT=YesPlease NO_MSGFMT_EXTENDED_OPTIONS=YesPlease prefix=$HOME install; cd ..; rm -Rf git-1.7.12
$ ./bin/git --version
git version 1.7.12
$ ./bin/git clone https://username:password@github.com/username/bar.git
works fine :) 
```

但是，在实例上安装我们自己的 git 版本并不理想，因为编译和安装需要很长时间。

似乎 heroku 不提供任何免费支持，这很不幸，因为我只需要告诉他们升级他们的 git 版本，一切都很好。但是，由于这是不可能的，是否有人对在 heroku 上进行经过身份验证的 https git 克隆有任何建议？（我已经设法通过`.ssh`使用 repo 上传一个特殊目录来获得经过身份验证的 ssh，但这对于我们的情况并不理想，因为我们更愿意只使用 https 和令牌）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:33:39.997

如果 git 版本确实是 1.7.0，那么它就太旧了，因为从那时起已经对 http 传输机制进行了多次修复。
（如 1.11.7：如果服务器配置为允许匿名 GET，同时要求对 POST 进行身份验证，则使用最近的 Git 推送到智能 HTTP 服务器会失败，但 URL 中没有用户名来强制身份验证。）

Plus 1.7.8 引入了一种缓存凭证的方法：

> `git push`处理“ ”和“ ”中使用的 HTTP 事务的用户名/密码的代码`git fetch`学会了将“凭据 API”与外部程序对话以缓存或存储它们，以允许与平台本机钥匙串机制集成。

您的 ssh 解决方法是一种方法，另一种方法是重新编译 git，但是在 heroku 升级其默认 git 之前，我看不到另一种方法可以通过 https 安全地对 Heroku git repos 进行身份验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T08:28:16.130

我刚刚遇到了完全相同的问题：

```
$ git clone https://username:password@github.com/username/bar.git
Initialized empty Git repository in /app/bevry-website/.git/
error: The requested URL returned error: 401 while accessing https://username:password@github.com/username/bar.git/info/refs
fatal: HTTP request failed 
```

我使用电子邮件作为 Github 的用户名。Heroku 的 git（1.7 版）不支持此功能。

```
git clone https://username:password@github.com/username/bar.git 
```

如果您使用实际的 Github 用户名而不是您的电子邮件，它会起作用。

电子邮件在较新的 Git 版本中用作用户名。

# unit-testing - 在 VS 2012 测试资源管理器中使用多个过滤器

> ID：12964198
> 
> 赞同：2
> 
> 时间：2012-10-18T21:41:11.897
> 
> 标签：unit-testing, visual-studio-2012, test-explorer

我想在 Visual Studio 2012 测试资源管理器搜索过滤器框中过滤多个条件。我想获得具有特征“A”或“B”的测试我已经尝试了以下几个版本但没有运气：特征：“Integration”|“UnitTest”Trait：“Integration”|Trait：“UnitTest”

单独搜索 1 个特征就可以了。我已经加载了最新的 VS 2012 CTP，这就是我可以按特征搜索的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:00:54.393

您在当前限制上是正确的。[我建议您通过用户语音通道](http://visualstudio.uservoice.com/forums/121579-visual-studio)推送您的请求，我们的团队会针对最高用户请求进行监控

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:47:12.067

现在已修复。您现在也可以按特征过滤测试。特征可以是按属性应用的类别，也可以是所有者、优先级等。有关详细信息，请参阅 MS ALM 团队的这篇[博文。](http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/09/how-to-manage-unit-tests-in-visual-studio-2012-update-1-part-1-using-traits-in-the-unit-test-explorer.aspx)

# objective-c - UITableview 没有响应事件

> ID：12964200
> 
> 赞同：1
> 
> 时间：2012-10-18T21:41:24.237
> 
> 标签：objective-c, uitableview

![在此处输入图像描述](../Images/d9107d74367f217fb95b8cb58a04ee60.png)

我正在使用 Xcode 构建一个“实用程序应用程序”，上面是从主视图控制器翻转时可以看到的视图屏幕截图。此`UITableView`视图内部将委托和源设置`UIViewController`为包含视图，表数据被适当填充（暗示`uiviewcontroller`作为数据源的行为正确）但是表不响应任何事件，即委托方法不被叫到桌子上。我什至无法为表格选择任何行。

对此的任何帮助将不胜感激。

是的，userInteractionEnabled 设置为 YES。这里也是生成单元格的代码

```
-(UITableViewCell*)populateFeatureCell:(UITableView*)tableView 行:(NSUInteger)row {

```
NSString *CellIdentifier = @"FeatureCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

SKProduct *product = [STLNavigatorIAPHelper productAtIndex:row];
if (product != nil) {
    cell.textLabel.text = [product localizedTitle];
    UIButton *buyButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    buyButton.frame = CGRectMake(0, 0, 72, 37);
    [buyButton setTitle:NSLocalizedString(@"BUY", nil) forState:UIControlStateNormal];
    buyButton.tag = row;
    [buyButton addTarget:self action:@selector(buyButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
     cell.accessoryType = UITableViewCellAccessoryNone;
     cell.accessoryView = buyButton;
}

[cell setUserInteractionEnabled:YES];

return cell; 
```

}
```

# ruby-on-rails - Rails 迁移中不正确的版本号有多安全？

> ID：12964202
> 
> 赞同：1
> 
> 时间：2012-10-18T21:41:24.890
> 
> 标签：ruby-on-rails, version, rails-migrations

这是一个奇怪的问题，在其他一些帖子中部分涉及，但没有得到充分的直接回答。我们的`schema_migrations`数据库中有一些迁移版本号，这些版本号在几年前的某个时候被一个粗心的插件转储到那里：

![在此处输入图像描述](../Images/26ceffc156426ec67ab005cd225c09b4.png)

自从那个命中注定的那一天起，我们的架构就变成了这样：

`ActiveRecord::Schema.define(:version => 20090409010513002) do`

由于迁移版本号是`long`s，Rails 将永远假设我们处于未来大约 6000 万年创建的模式版本。

现在，有人会认为，这是安全的，因为[迁移文档](http://guides.rubyonrails.org/migrations.html#what-s-in-a-name)说所有未在给定数据库上运行的迁移都会调用 up 方法。情况似乎是这样，因为过去 3 年我们一直在创建迁移并成功运行它们。Rails 似乎在说“您已正式迁移到版本 20090409010513002，但尚未运行迁移（2012 年发生的事情），所以我将运行它并将其添加到数据库中。

我的问题有两个：

1.  *现状*是否存在隐患？事情似乎运作良好，但我想知道他们会继续这样做。
2.  由于那些超长的迁移编号实际上并没有附加迁移文件（有一个文件是 20090409010513，但不是 001 或 002 版本），删除这些行是否有任何危害，从而让 Rails 意识到真正的最新迁移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:47:43.673

对于第一个问题，我能想到的一个危险是，您的`db/schema.rb`文件对于确定它是否与数据库中的内容相对应没有那么有用。

对于第二个问题 - 我假设屏幕截图来自您的生产数据库。`schema_migrations`如果您`rake db:setup`在开发环境中进行操作，您会在表格中看到什么？如果`schema_migrations`开发中的表没有这两个虚假条目，我认为从生产数据库中删除它们可能是安全的。

# mdx - MDX Error "Hierarchy already appears in the Axis0 axis"

> ID：12964203
> 
> 赞同：11
> 
> 时间：2012-10-18T21:41:33.223
> 
> 标签：mdx

In the following MDX queries

```
SELECT 
{
    [EffectiveDate].[Period].[All].CHILDREN, 
    [EffectiveDate].[Period].[All]
} ON COLUMNS, 
NON EMPTY {
    [Account].[Hierarchy].[Account Type].&[Assets].CHILDREN,
    [Account].[Hierarchy].[Account Type].&[Assets],
    [Account].[Hierarchy].[Account Type].&[Liabilities].CHILDREN,
    [Account].[Hierarchy].[Account Type].&[Liabilities],
    [Account].[Hierarchy].[Account Type].&[Equity].CHILDREN, 
    [Account].[Hierarchy].[Account Type].&[Equity],
    [Account].[Hierarchy].[Account Type].&[Revenue].CHILDREN, 
    [Account].[Hierarchy].[Account Type].&[Revenue],
    [Account].[Hierarchy].[Account Type].&[Expenses].CHILDREN,
    [Account].[Hierarchy].[Account Type].&[Expenses]
} ON ROWS 
FROM [JEMDA] 
WHERE CrossJoin(
    {
        [Measures].[Amount]
    }, 
    {
        [Source].[Source].[[Blank]]]
    }, 
    {
        [EffectiveDate].[Period].&[5-Dec],
        [EffectiveDate].[Period].&[5-Nov],
        [EffectiveDate].[Period].&[5-Oct],
        [EffectiveDate].[Period].&[6-Jan]
    }) 
```

It reports the error:

> The Period hierarchy already appears in the Axis0 axis.

Can you tell me how to solve this issue? Thanks!

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T21:57:24.793

您不能在列和切片器上使用期间层次结构。

您可以像这样重写您的查询：

```
SELECT 
{
    [EffectiveDate].[Period].[All].CHILDREN, 
    [EffectiveDate].[Period].[All]
} ON COLUMNS, 
NON EMPTY 
{
    [Account].[Hierarchy].[Account Type].&[Assets].CHILDREN,
    [Account].[Hierarchy].[Account Type].&[Assets],
    [Account].[Hierarchy].[Account Type].&[Liabilities].CHILDREN,
    [Account].[Hierarchy].[Account Type].&[Liabilities],
    [Account].[Hierarchy].[Account Type].&[Equity].CHILDREN, 
    [Account].[Hierarchy].[Account Type].&[Equity],
    [Account].[Hierarchy].[Account Type].&[Revenue].CHILDREN, 
    [Account].[Hierarchy].[Account Type].&[Revenue],
    [Account].[Hierarchy].[Account Type].&[Expenses].CHILDREN,
    [Account].[Hierarchy].[Account Type].&[Expenses]
} ON ROWS 
FROM
 (
    SELECT {
                [EffectiveDate].[Period].&[5-Dec],
                [EffectiveDate].[Period].&[5-Nov],  
                [EffectiveDate].[Period].&[5-Oct],
                [EffectiveDate].[Period].&[6-Jan]
            } ON 0
  FROM [JEMDA]
)
WHERE 
(
[Measures].[Amount], 
[Source].[Source].[[Blank]]
) 
```

# html - 只有一个媒体查询工作。谁能建议另一个如何工作？

> ID：12964204
> 
> 赞同：1
> 
> 时间：2012-10-18T21:41:35.397
> 
> 标签：html, css, media-queries

我有一个带有两个 CSS 媒体查询的简单网页。当我调整浏览器的大小时，第一个媒体查询会触发，但我无法让另一个媒体查询工作。顺序似乎是合适的，我的语法也是如此。有没有人有任何想法？

```
 <!DOCTYPE html>
<html lang='en'>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>McCann Echo Torre Lazur</title>
<style>

/**********************************************************************************
 * Structure
 **********************************************************************************/

body: {

}

#wrapper {
    width: 960px;
    min-height: 500px;
    border: 1px solid black;
    padding: 2px;

}

#logo {
    width: 100px;
    height: 100px;
    border: 1px solid black;
}

.bioinfo {
    border: 1px solid black;
    display: inline-block;
    width: 315px;
}

ul {
}

/**********************************************************************************
 * Media Queries
 **********************************************************************************/

 /* Screens with resolution less than 1024px width */
 @media screen and (max-width: 1024px) {
    .bioinfo {
        width: 49%;
        border-color:#ff0000;
    }
    #wrapper {
        width: 100%;
    }
 } //end media screen

/* Screens with resolution less than 480px width */
@media screen and (max-width: 700px) {
    .bioinfo {
        width: 95%;
        border-color:#ffffff;
    }
    #wrapper {
        width: 100%;
    }
} 

</style>

</head>
<body>
<div id='wrapper'>
<header>
    <div id='logo'>Logo Here</div>
</header>

    <div id='bios'>
        <div class='bioinfo'>Bio 1</div>
        <div class='bioinfo'>Bio 2</div>
        <div class='bioinfo'>Bio 3</div>
        <div class='bioinfo'>Bio 4</div>
        <div class='bioinfo'>Bio 5</div>
        <div class='bioinfo'>Bio 6</div>
    </div>

<div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:45:22.470

`//end media screen`不是有效的评论。删除它，这有效。

CSS 注释使用`/* */`语法。

# ruby - 无法使用 sequel gem 断开与 postgres 数据库的连接

> ID：12964209
> 
> 赞同：0
> 
> 时间：2012-10-18T21:41:59.173
> 
> 标签：ruby, postgresql, sequel

我刚开始使用 Sequel ruby​​gem，似乎“断开连接”方法不起作用。这是我的 IRB 测试会话的输出：

```
1.9.3-p194 :002 > require 'sequel'
 => true 
1.9.3-p194 :003 > DB = Sequel.connect('postgres://postgres:mypassword@my_pg_host:5432/my_db')
 => #<Sequel::Postgres::Database: "postgres://postgres:mypassword@my_pg_host:5432/my_db"> 
1.9.3-p194 :004 > DB.test_connection
 => true 
1.9.3-p194 :005 > DB.disconnect
 => [] 
1.9.3-p194 :006 > DB.test_connection
 => true 
```

我在 Sequel 文档中看不到任何说明为什么这不起作用的内容：

[http://sequel.rubyforge.org/rdoc/classes/Sequel/Database.html#method-i-disconnect](http://sequel.rubyforge.org/rdoc/classes/Sequel/Database.html#method-i-disconnect)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:13:53.800

`DB.disconnect`断开当前连接池中的所有连接，并从池中删除连接。之后调用`DB.test_connection`将在连接池中查找连接，并且由于池为空，将导致创建新连接。

您发布的代码完全是预期的行为，但我猜您不知道这`DB`并不代表与数据库的单个连接。

# css - CSS图像不在导航旁边浮动

> ID：12964212
> 
> 赞同：1
> 
> 时间：2012-10-18T21:42:16.560
> 
> 标签：css, image, wordpress, navigation

由于某种原因，我无法让图像漂浮在 wordpress 的导航框旁边。如果您访问[http://bit.ly/Tz6lMs](http://bit.ly/Tz6lMs)，您就会明白我的意思。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:01:30.537

我在您的页面中找不到问题，因为它充满了不同的类，但应该这样做。
希望你觉得它有用。

[点击](http://jsfiddle.net/2dhSd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:24:34.480

这可能是您的导航是 21.3% 宽度而您的内容是 88% 宽度的事实......

你应该有这个而不是 88%

```
#primary {
    width: 78%;
} 
```

# ios - Creating a slide in side view controller

> ID：12964213
> 
> 赞同：1
> 
> 时间：2012-10-18T21:42:19.713
> 
> 标签：ios, ios5, uiview, uiviewcontroller, uinavigationcontroller

I would like to know how to create a 'side' View Controller. They are becoming increasingly popular...

Apps such as Facebook and Words with Friends use these on IOS, these are two extremely popular apps so will not upload a picture for this.

When clicking on the = icon in the top navigation a side navigation/menu theme view controller is shown on the side, whilst the navigation controller current view controller is moved slightly to the other side. For example, you can still see the original view controller slightly on the right side, whilst a list of available options are shown.

Does anyone know how this would be achieved or a tutorial of how to accomplish this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T13:09:12.073

这个 github 项目似乎是您正在寻找的。类似于 Facebook 所拥有的：

[https://github.com/edgecase/ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)

![github页面图片示例](../Images/637122e24faea0241e30305a0c280b9f.png)

# ios - iOS take messages between service and client with DNSServiceBrowse and DNSServiceBrowse

> ID：12964214
> 
> 赞同：2
> 
> 时间：2012-10-18T21:42:20.147
> 
> 标签：ios, bluetooth, multiplayer, nsnetservice

I am trying to implement a conversation with iPhone/iPad devices using DNSServiceRegister to register devices and DNSServiceBrowse to find services and resolve.

How can I send messages between the 'client' and the service? there is any listener that I can put on the service to listen for messages via socket?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:08:29.077

感谢您的回复。

这些方法 netServiceBrowser:didFindService:moreComing: - (void)netServiceDidResolveAddress:) 等，.. 使用 NSNetService 注册服务效果很好。我的应用程序正在使用 DNSServiceRegister 注册服务，这是一个低级 API： [https ://developer.apple.com/library/mac/#documentation/Networking/Conceptual/dns_discovery_api/Articles/registering.html#// apple_ref/doc/uid/TP40002478-SW1](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/dns_discovery_api/Articles/registering.html#//apple_ref/doc/uid/TP40002478-SW1)

我能够注册服务，浏览服务并解决，但我不知道在服务端做什么来监听来自连接的“客户端”的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:55:11.457

当您开始浏览设备时，您必须设置一个委托，并且`– netServiceBrowser:didFindService:moreComing:`您必须在其中“解决”服务......之后（另一个委托`- (void)netServiceDidResolveAddress:`）您可以使用`getInputStream:outputStream:`. 之后就可以开始交流了。您可以在这里找到更多信息[https://developer.apple.com/library/ios/#documentation/Networking/Conceptual/NSNetServiceProgGuide/Introduction.html](https://developer.apple.com/library/ios/#documentation/Networking/Conceptual/NSNetServiceProgGuide/Introduction.html)或在这里[https://developer.apple.com/library/ios/#documentation/ Cocoa/Conceptual/Streams/Streams.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Streams/Streams.html)还有一个示例 WiTap，它的作用基本相同。

# objective-c - 在 UIPopOver 处于活动状态时将 firstResponder 提供给 UISegmentControl？

> ID：12964215
> 
> 赞同：2
> 
> 时间：2012-10-18T21:42:21.507
> 
> 标签：objective-c, uipopovercontroller, uisegmentedcontrol

遇到问题，我的搜索结果一无所获。我有一个应用程序，我需要一个段控制对象（在启动弹出框的 VC 上）以在弹出框处于活动状态时保持活跃和可触摸。这甚至可能吗？

编辑：下面的解决方案：

```
self.myPopOver.passthroughViews = [[NSArray alloc] initWithObjects:_segPopOverControl, nil]; 
```

必须为弹出框初始化 passthroughViews，因为已经没有使用了。将 UISegmentedController 添加到列表中并完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:44:03.107

将其添加到弹出框控制器的`passthroughViews`属性中。

```
NSArray *oldPassthroughViews = myPopoverController.passthroughViews;
myPopoverController.passthroughViews = [[NSArray
    arrayWithArray:myPopoverController.passthroughViews]
    arrayByAddingObject:mySegmentedControl]; 
```

# oracle - Oracle composite key deletion very slow

> ID：12964216
> 
> 赞同：2
> 
> 时间：2012-10-18T21:42:34.850
> 
> 标签：oracle, hibernate, foreign-keys, composite-key

I have one table with a composite key (REGION) and another table (CITY) that references that table. Inserts, queries, and individual deletions work quickly. The problem is that when I try to bulk-delete the contents of CITY using sqlplus, delete from CITY, it takes forever. This table will have ~400,000 entries and it takes 15-20 minutes just to delete 50,000 entries. Here is my setup using Oracle 11:

```
create table COUNTRY
(
  id varchar2(32) NOT NULL -- PK
...
);

create table REGION -- about 4000 entries
(
  country    varchar2(32) NOT NULL -- PK, FK to COUNTRY
  regionCode char(2)      NOT NULL -- PK
...
);

create table CITY -- about 400,000 entries
(
  id            number       NOT NULL -- PK
  country       varchar2(32) NOT NULL -- FK to COUNTRY
  regionCountry varchar2(32) NULL     -- FK to REGION
  regionCode    char(2)      NULL     -- FK to REGION
...
);

create table LOCATION -- about 2,500,000 entries
(
  id       varchar2(32) NOT NULL -- PK
  country  varchar2(32) NOT NULL -- FK to COUNTRY
  city     number       NULL     -- FK to CITY
...
);

ALTER TABLE COUNTRY ADD CONSTRAINT PK_COUNTRY PRIMARY KEY (id) USING INDEX;

ALTER TABLE REGION ADD CONSTRAINT PK_REGION PRIMARY KEY (country, regionCode) USING INDEX;

ALTER TABLE CITY ADD CONSTRAINT PK_CITY PRIMARY KEY (id) USING INDEX;

ALTER TABLE IPGeoLoc ADD CONSTRAINT PK_LOCATION PRIMARY KEY (id) USING INDEX;

ALTER TABLE REGION ADD CONSTRAINT FK_REGION_COUNTRY
   FOREIGN KEY (country) REFERENCES COUNTRY (id);

ALTER TABLE CITY ADD CONSTRAINT FK_CITY_COUNTRY
   FOREIGN KEY (country) REFERENCES COUNTRY (id);

ALTER TABLE CITY ADD CONSTRAINT FK_CITY_REGION
   FOREIGN KEY (regionCountry, regionCode) REFERENCES REGION (country, regionCode);

ALTER TABLE LOCATION ADD CONSTRAINT FK_LOCATION_COUNTRY
   FOREIGN KEY (country) REFERENCES COUNTRY (id);

ALTER TABLE LOCATION ADD CONSTRAINT FK_LOCATION_CITY
   FOREIGN KEY (city) REFERENCES CITY (id); 
```

The varchar2(32) fields are GUIDs. I know I should not use GUIDs as a PK but I cannot change that unless I have proof that this is the problem.

I can bulk-delete entries from LOCATION with no problem, 300,000 in a couple of seconds, so this leads me to believe it is the composite key that is giving me trouble.

The secondary issue is that I currently have two country columns in the CITY table - one linked directly to COUNTRY and the other linked as part of the composite key to REGION. I know how I would do this in code and only have one country column but I have to use Hibernate. This works the way it is except for the delete problem so I can't change it unless I can prove this is causing an issue. I'm using sqlplus to try the deletions so I know Hibernate is not causing the delete problem.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:50:45.550

我的赌注是，问题与复合键的存在无关，而与未索引的外键有关。

除非您从问题中省略了它，否则表中的`CITY`列`LOCATION`不会被索引。这意味着每次您尝试从 中删除一行时`CITY`，Oracle 都必须对表进行全表扫描，以`LOCATION`查找`LOCATION`将成为孤立行的行，以强制执行外键约束。通常，如果您想从父表中删除，则需要对子表中的外键进行索引。所以`LOCATION`应该在 and 上都有索引`CITY`，`COUNTRY`表`CITY`应该在`COUNTRY`and上都有索引`(regionCountry, regionCode)`，等等。

即使所有的行都`LOCATION`被删除，如果 Oracle 必须对 进行全表扫描`LOCATION`，它也必须读取到表的高水位线。如果该表之前有 250 万行，而您只是执行了 a `DELETE`，那么您仍然需要读取，但是每次从 中删除一行时需要许多块来存储这 250 万行`CITY`。

你可以用几种不同的方式测试我的预感是否正确

*   您可以索引表`CITY`中的列`LOCATION`。
*   `LOCATION`您可以删除引用`CITY`表的外键约束。
*   您可以截断`LOCATION`表而不是删除行，以便重置高水位标记并且表扫描将花费更少的时间。

# nhibernate - How do I create an NHibernate IUserType for a Time in Sql Server 2008/2012?

> ID：12964218
> 
> 赞同：5
> 
> 时间：2012-10-18T21:42:37.840
> 
> 标签：nhibernate, nodatime

I am trying to create an NHibernate `IUserType` for the Noda Time `LocalTime` type which would logically map to a `time` type in Sql Server 2008/2012\. I am able to get values saving and loading from the database. However, I can't write queries involving comparison of local times like `_session.Query<SchedulingTemplate>().Where(x => x.Start < end && x.End >= start)` gives the error `SqlException (0x80131904): The data types time and datetime are incompatible in the less than operator.`

The relevant code from my user type is:

```
public Type ReturnedType
{
    get { return typeof(LocalTime); }
}

public override object NullSafeGet(IDataReader rs, string[] names, object owner)
{
    var dbValue = NHibernateUtil.Time.NullSafeGet(rs, names);
    if(dbValue == null)
        return null;

    return LocalDateTime.FromDateTime((DateTime)dbValue).TimeOfDay;
}

public override void NullSafeSet(IDbCommand cmd, object value, int index)
{
    if(value == null)
        NHibernateUtil.Time.NullSafeSet(cmd, null, index);
    else
        NHibernateUtil.Time.NullSafeSet(cmd, ((LocalTime)value).LocalDateTime.ToDateTimeUnspecified(), index);
}

public override SqlType[] SqlTypes
{
    get { return new[] { SqlTypeFactory.Time }; }
} 
```

The problem is that despite the above code indicating the database type is a time, it generates the following query (per Sql Profiler):

`exec sp_executesql N'select [...] from [SchedulingTemplate] scheduling0_ where scheduling0_.Start<@p0 and scheduling0_.[End]>=@p1',N'@p0 datetime,@p1 datetime',@p0='1753-01-01 20:00:00',@p1='1753-01-01 06:00:00'`

(note I omitted the select list for brevity)

Notice that the type and value of the parameters is being treated as `datetime`.

This appears to be very similar to two NH bugs that have been closed [https://nhibernate.jira.com/browse/NH-2661](https://nhibernate.jira.com/browse/NH-2661) and [https://nhibernate.jira.com/browse/NH-2660](https://nhibernate.jira.com/browse/NH-2660).

I tried to use `NHibernateUtil.TimeAsTimeSpan` and that didn't seem to work either. It generated exactly the same query which surprised me. I am thinking maybe the issue described in NH-2661 also exists for user types and was not fixed for that?

I am using NHibernate v3.3.1.400 and Noda Time 1.0.0-beta2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:29:19.450

遵循@Firo 的建议，我从 SqlType 开始工作并想出了这个：

```
using NHibernate;
using NHibernate.Dialect;
using NHibernate.SqlTypes;
using NHibernate.Type;
using NodaTime;
using NodaTime.Text;
using System;
using System.Data;
using System.Data.SqlClient;

[Serializable]
public class LocalTimeType : PrimitiveType, IIdentifierType
{
    private readonly LocalTimePattern _timePattern = LocalTimePattern.CreateWithInvariantCulture("h:mm:ss tt");

    public LocalTimeType() : base(SqlTypeFactory.Time) { }

    public override string Name
    {
        get { return "LocalTime"; }
    }

    public override object Get(IDataReader rs, int index)
    {
        try
        {
            if (rs[index] is TimeSpan) //For those dialects where DbType.Time means TimeSpan.
            {
                var time = (TimeSpan)rs[index];
                return LocalTime.Midnight + Period.FromTicks(time.Ticks);
            }

            var dbValue = Convert.ToDateTime(rs[index]);
            return LocalDateTime.FromDateTime(dbValue).TimeOfDay;
        }
        catch (Exception ex)
        {
            throw new FormatException(string.Format("Input string '{0}' was not in the correct format.", rs[index]), ex);
        }
    }

    public override object Get(IDataReader rs, string name)
    {
        return Get(rs, rs.GetOrdinal(name));
    }

    public override Type ReturnedClass
    {
        get { return typeof(LocalTime); }
    }

    public override void Set(IDbCommand st, object value, int index)
    {
        var parameter = ((SqlParameter)st.Parameters[index]);
        parameter.SqlDbType = SqlDbType.Time; // HACK work around bad behavior, M$ says not ideal, but as intended, NH says this is a bug in MS may work around eventually
        parameter.Value = new TimeSpan(((LocalTime)value).TickOfDay);
    }

    public override bool IsEqual(object x, object y)
    {
        return Equals(x, y);
    }

    public override int GetHashCode(object x, EntityMode entityMode)
    {
        return x.GetHashCode();
    }

    public override string ToString(object val)
    {
        return _timePattern.Format((LocalTime)val);
    }

    public object StringToObject(string xml)
    {
        return string.IsNullOrEmpty(xml) ? null : FromStringValue(xml);
    }

    public override object FromStringValue(string xml)
    {
        return _timePattern.Parse(xml).Value;
    }

    public override Type PrimitiveClass
    {
        get { return typeof(LocalTime); }
    }

    public override object DefaultValue
    {
        get { return new LocalTime(); }
    }

    public override string ObjectToSQLString(object value, Dialect dialect)
    {
        return "'" + _timePattern.Format((LocalTime)value) + "'";
    }
} 
```

关键代码在`Set`方法中是说：

```
var parameter = ((SqlParameter)st.Parameters[index]);
parameter.SqlDbType = SqlDbType.Time; 
```

这是必需的，因为 MS 数据提供程序将 设置`DbType`为`DbType.Time`表示基础类型应为`DateTime`. 您**必须**设置**`SqlDbType`**to 时间才能使其工作。

# php - json_encode creates empty objects for empty XML tags

> ID：12964221
> 
> 赞同：5
> 
> 时间：2012-10-18T21:42:52.423
> 
> 标签：php, xml, json

I have an XML file where some tags occasionally may be empty. When I read this file using PHP and encode it using json_encode, JSON converts all my empty tags to empty objects, while I prefer them exactly as they are - empty strings. What is the best way to stop /avoid this conversion?

EDIT: I prefer not to delete these tags from XML as for me there is a difference between an XML entry without specific tag and an XML entry with this tag being empty.

EDIT 2: sample input:

```
<Family>
  <name>aaa</name> 
  <adults>3</adults>
  <kids />
</Family> 
```

**kids** tag is empty

I **would like** to get encoding results as

```
Family[1].name = 'aaa';
Family[1].adults = 3;
Family[1].kids = ''; 
```

What I am getting is:

```
Family[1].name = 'aaa';
Family[1].adults = 3;
Family[1].kids = Object(); //empty 
```

EDIT3:

My implementation is very simple:

**in PHP**

```
$xml = simplexml_load_file($filepath);
echo json_encode($xml, JSON_NUMERIC_CHECK); 
```

**in JavaScript**

```
 objJson = $.parseJSON(xmlhttp.responseText);
        ....
        d["name"] = objJson.Family[i].name;
        d["adults"] = objJson.Family[i].adults;
        d["kids"] = objJson.Family[i].kids; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:11:09.270

你可以试试

```
$xml = '<Family>
    <name>aaa</name>
    <adults>3</adults>
    <kids />
    <sub>
        <tag>Nice </tag>
        <tag>Food </tag>
        <tag />
    </sub>
</Family>';

$xml = new SimpleXMLElement($xml);
$json = json_encode($xml, JSON_NUMERIC_CHECK);
$json = json_decode($json, true);

var_dump($json); // Before

filterEmptyArray($json); // <------ Filter Empty Array

var_dump($json); // After 
```

前

```
array
  'name' => string 'aaa' (length=3)
  'adults' => int 3
  'kids' => 
    array   <------------------- Empty Array
      empty
  'sub' => 
    array
      'tag' => 
        array
          0 => string 'Nice ' (length=5)
          1 => string 'Food ' (length=5)
          2 => 
            array 
              ... 
```

后

```
array
  'name' => string 'aaa' (length=3)
  'adults' => int 3
  'kids' => string '' (length=0) <---------- String Conversion
  'sub' => 
    array
      'tag' => 
        array
          0 => string 'Nice ' (length=5)
          1 => string 'Food ' (length=5)
          2 => string '' (length=0) <---------- Supports Recursion (2nd level) 
```

使用的功能

```
function filterEmptyArray(array &$a) {
    foreach ( $a as $k => &$v ) {
        if (empty($v))
            $a[$k] = "";
        else
            is_array($v) AND filterEmptyArray($v);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-16T15:10:26.640

我认为上面的函数 filterEmptyArray() 需要添加它以不删除零作为值。例如。0 也会变成 ''

```
if (empty($v) && is_array($v))
    $a[$k] = "";
} 
```

# javascript - Arrange Data in a collapsible tree in html using javascript or jquery

> ID：12964224
> 
> 赞同：0
> 
> 时间：2012-10-18T21:43:04.237
> 
> 标签：javascript, jquery, html

I have the following data in 2 different arrays:

**Level 1**

3.0 abc

2.1 xyz

2.0 pqr

**Level 2**

3.0.0.8 abc

3.0.0.7 pqr

2.1.0.155 lmn

2.1.0.151 rst

2.0.5.16 jhw

2.0.0.96 lqs

Now I want to arrange them in a collapsible tree fashion, which would look like this:

(+) 3.0 abc

```
 - 3.0.0.8 abc

  - 3.0.0.7 pqr 
```

(+) 2.1 xyz

```
 - 2.1.0.155 lmn

  - 2.1.0.151 rst 
```

(+) 2.0 pqr

```
 - 2.0.5.16 jhw

  - 2.0.0.96 lqs 
```

I know it can be done with Javascript and Jquery. But can someone give me some sample code or some pointers to some very basic code which I can understand.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:35:09.600

看看[jqTree](http://mbraak.github.com/jqTree/)。

通过遍历您的数组并使用[substring 或 substr](http://www.bennadel.com/blog/2159-Using-Slice-Substring-And-Substr-In-Javascript.htm)来匹配和合并，创建一个标签（又名父母）和孩子的哈希数组。

# php - MySQL query not filling table with values

> ID：12964225
> 
> 赞同：0
> 
> 时间：2012-10-18T21:43:05.343
> 
> 标签：php, mysql

I'm developing a booking calendar, but am having an issue with my 'addactivity' form. The basic logic is that for each date/time a new activity object is created and calls the function toDataBase which then takes the info from the form and puts it into the database. I've stripped out all of the foreach and other logic. Here's the relevant code.

from the form method:

```
$name=$_POST['activityname'];
$cost=$_POST['activitycost'];
$spaces=$_POST['activityspaces'];
$venue=$_POST['activityvenue'];
$month=$_POST['month'];
$year=$_POST['year'];
$day=$_POST['day'];
$dates[$count]=date('Y-m-d', mktime($month,$day,$year))
$time=$_POST['activitytime']; 
```

and the toDataBase function

```
public function toDataBase()
{
    $dbc=mysqli_connect($host, $user, $pass,$db);
    if(!$dbc)
    {
        echo ("could not connect".mysqli_connect_error());
        exit();
    }
    $stmt=mysqli_prepare($dbc, "INSERT INTO events(
    name,
    date,
    venue,
    cost,
    spaces,
    time) 
    VALUES (?,?,?,?,?,?)");
    mysqli_stmt_bind_param($stmt,'sssiis',$event_name,$dates,$price,$max_spaces,$venue,$times);
    mysqli_execute($stmt);
    mysqli_stmt_close($stmt);

} 
```

what confuses me most is that I don't get a MySQL error of any sort. I know the activity object's data fields are filling because I have methods for each datafield to echo its value. All fields are filling just fine but aren't going into the DB. My next assumption was that the db is expecting values of a different type. The event table structure is as follows:

```
name: varchar
date: date
venue: varchar
cost: smallint
spaces: smallint
time: varchar 
```

Sorry for the wall of text, but I'm getting frustrated banging my head against aforementioned wall of text.

edited: switched to better practice: still same issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:08:59.340

经过一些严肃的禅宗发现后，我意识到 $event_name 等是私有变量......只需更改为 $this->event_name 并且一切正常。无论如何，感谢您的帮助。至少我的代码现在不能被利用 =)

# ruby-on-rails - Rails opposite of db migrate

> ID：12964226
> 
> 赞同：0
> 
> 时间：2012-10-18T21:43:12.737
> 
> 标签：ruby-on-rails, rails-migrations

```
rake db:migrate 
```

This command is used to migrate the scaffold generated models to the database. What is the procedure to generate the models using the database.

# jquery - 带有 Django for 循环的 jQuery Masonry

> ID：12964234
> 
> 赞同：0
> 
> 时间：2012-10-18T21:43:40.223
> 
> 标签：jquery, django, jquery-masonry

jQuery Masonry 不适用于 Django 模板标签，如下所示：

```
{% for memes in memes %}
      <div class="masonryImage">
        <img src="{{ MEDIA_URL }}/{{ image.image }}" id="{{ image.pk }}"/>
      <div>
    {% endfor %} 
```

当拼写 div 时，我设置了一个相同的实例：

```
<div class="masonryImage">
  <img src="/static/media/images/2012/1018/inspirational-quote-michelangelo-sunrise.jpg" alt="" />
</div>

<div class="masonryImage">
  <img src="/static/media/images/2012/1018/inspirationalpercent20quotespercent204_4341.jpg" alt="" />
</div> 
```

我的 JS：

```
 <script>
$(function(){

var $container = $('#container');

$container.imagesLoaded( function(){
  $container.masonry({
    itemSelector : '.masonryImage'
  });
});

});
</script> 
```

这是呈现的 HTML（带有 for 模板标签）。我曾尝试删除 id，以防万一出现问题（没有用）：

```
<div id="container">

      <div class="masonryImage">
        <img src="/static/media/images/2012/1018/inspirational-quote-michelangelo-sunrise.jpg" id="9"/>
      <div>

      <div class="masonryImage">
        <img src="/static/media/images/2012/1018/inspirationalpercent20quotespercent204_4341.jpg" id="7"/>
      <div>

      <div class="masonryImage">
        <img src="/static/media/images/2012/1018/002.gif" id="6"/>
      <div>

      <div class="masonryImage">
        <img src="/static/media/images/2012/1018/tumblr_mc1jac0bkn1rnn6wqo1_500.png" id="4"/>
      <div>

      <div class="masonryImage">
        <img src="/static/media/images/2012/1018/inspirational-quotes30.jpg" id="2"/>
      <div>

      <div class="masonryImage">
        <img src="/static/media/images/2012/1018/inspirational-quotes20.jpg" id="1"/>
      <div>

</div> 
```

**更新** 我尝试将 {% for %} 图像放在同一个容器下，然后添加“拼写”div。这会导致 {% for %} 图像垂直渲染（没有砖石），拼写出来的 div 用砖石渲染。

有没有更好的方法来制作模板并让 jQuery Masonry 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:11:47.047

愚蠢的错误，

我进入 jQuery 并打印出控制台日志。问题是我错过了 div 中的尾随 /。

面掌。

# python - Writing to CSV - string being recognized as date in Excel

> ID：12964235
> 
> 赞同：3
> 
> 时间：2012-10-18T21:43:42.520
> 
> 标签：python, csv

This is probably an easy fix, but I can't seem to figure it out...

outputting a list to CSV in Python using the following code:

```
w = csv.writer(file('filename.csv','wb'))
w.writerows(mylist) 
```

One of the list items is a ratio, so it contains values like '23/54', '9/12', etc. Excel is recognizing some of these values (like 9/12) as a date. What's the easiest way to solve this?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:47:29.663

因为`csv`是纯文本格式，恐怕您无法告诉 Excel 如何解释数据。

您必须生成实际的 Excel 文件（[`xlwt`](http://pypi.python.org/pypi/xlwt)例如，使用[http://www.python-excel.org/](http://www.python-excel.org/)上提供的文档和教程）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T12:43:32.667

你可以这样做：

```
# somelist contains data like '12/51','9/43' etc
mylist = ["'" + val + "'" for val in somelist]
w = csv.writer(open('filename.csv','wb'))
for me in mylist:
    w.writerow([me]) 
```

这将确保您的数据按原样写入 csv。

# nginx - 作为开发人员，我应该了解 php5-fpm 什么？

> ID：12964240
> 
> 赞同：1
> 
> 时间：2012-10-18T21:44:09.803
> 
> 标签：nginx, php

所以我最近设置了一个 LEMP 服务器，并通过一些配置设法工作。我现在可以开始编写 php 脚本和构建基本页面了。查看[php5-fpm wiki](http://php-fpm.org/wiki/Main_Page)，没有任何页面讨论我应该期望的任何更改，就 php 脚本等而言，只有安装/配置设置。

除了安装/配置步骤之外的一切都照常进行吗？从 php 开发人员的角度来看，我应该期待/做出哪些改变？如何最好地利用 fpm 版本（在 php 代码中，而不是模块/系统配置中）？我专注于比较两种情况下编写良好的 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:27:27.607

当我自己进行切换时，我了解了这种设置的一些好处，例如 APC 文件上传进度无法开箱即用（你最好使用其他东西，例如 nginx-progress-上传和/或 JS 文件 API）；某些标头名称可能已更改（附加 HTTP_）；还有一个新的非常有用的函数，叫做`fastcgi_finish_request`.

不过，要了解更多信息，请查看[PHP-FPM 手册](http://php.net/manual/en/install.fpm.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:27:22.513

我能想到的唯一主要问题是在 FPM 下运行时不支持`pcntl`扩展中的某些功能，例如. `pcntl_fork`（但是，两者都不支持它们`mod_php`，所以这不应该让人感到意外。）

# php - 电子邮件地址中的单引号 + 在 $_SESSION 中回显它 + SQL 选择

> ID：12964244
> 
> 赞同：0
> 
> 时间：2012-10-18T21:44:21.343
> 
> 标签：php, email, quote

我正在编写一个邮件表单，以允许用户从联系 PHP 页面发送电子邮件。

我使用正则表达式来验证电子邮件地址并对不同的字段进行大量检查。

如果用户犯了*“错误”*，表单将跳转到第二页，回显所有字段（那些可以的和不可以的）并在问题所在的地方以红色显示（“您忘记填写验证码” ，“你忘了填写你的名字”，等等......）。由于`<input type='text'>`' 值中的 $_SESSION 完成了字段的回显

一切都很顺利，直到我想到输入一个包含单引号的电子邮件地址（因为它是有效的）

**问题 1：** 我们的老朋友**jim_o'brien**在回显时变成**了 jim_o** 。

**问题 2：** 由于我想将电子邮件的发送限制为每 24 小时发送 1 封，因此我会在数据库中检查 Ip 地址或...电子邮件地址在不到 24 小时前已经被记录，这里 => **SQL SELECT 失败**

**问题**：

*   这两种现象的原因是什么？
*   是否不可能接受电子邮件中的单引号并同时进行我想要的支票？
*   附带问题：在 XSS 或 SQL 注入中有用的字符是什么，*同时*在电子邮件地址中被禁止？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:53:28.417

问题 1：您应该将单引号转换为 html 实体。将单引号替换为`&lsquo ;`. 但是最后一个字符和分号之间没有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:02:21.190

问题 1\. 我假设您将地址插入到元素的`value`标签中。`<input/>`于是就变成了`<input type='text' value='jim_o'brien'/>`。你看到那里的报价有问题吗？它正在终止价值。解决方案是使用以下`htmlentities()`功能：

```
echo "<input type='text' value='".htmlentities($_SESSION['email'], ENT_QUOTES)."'/>"; 
```

这也应该可以保护您免受 XSS 注入。

问题 2。您没有显示查询数据库的代码，但听起来您可能也没有正确处理那里的引号。如果您使用准备好的语句，这应该不是问题，它会保护您免受 SQL 注入。如果您仍在使用 mysql_XXX 函数，因此您不能使用准备好的语句，请`mysql_real_escape_string()`在插入 SQL 的所有用户输入上使用。

您可以从[RFC 5322](http://www.rfc-editor.org/info/rfc5322)获取电子邮件地址的完整语法。

# c - Trouble with operation

> ID：12964246
> 
> 赞同：0
> 
> 时间：2012-10-18T21:44:25.167
> 
> 标签：c

So I am making a Caesar cipher program I have the encryption working just fine it is the decryption I am having trouble with.

Here is the code that works for encryption on uppercase letters:

```
 if (isupper(p[i])){
    char c = ((p[i] - 'A') + k % 26) + 'A';
     } 
```

Now I would think that decryption would be:

```
 if (isupper(pp[i])){
    char c = (abs((p[i] - 'A') - k) % 26) + 'A';
     } 
```

The issue that I'm having is that if k=1 and p[i]='A' it will just output the letter 'B' and not 'Z' it does not wrap around like it should so if k=2 and p[i]='A' it should output the letter 'Y'. It works if k=1 and p[i]='B' it will output 'A' thanks for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:56:21.283

这应该这样做：

```
if (isupper(p[i])){
    char c = (p[i] - 'A' + 26 - k) % 26) + 'A';
} 
```

`+ 26`给你你的包装

可以这样想（三位数的格式只是为了让事情排列整齐）：

```
| 000 | 001 | 002 | ... | 024 | 025 | plain
|  A  |  B  |  C  | ... |  Y  |  Z  |
| 003 | 004 | 005 | ... | 001 | 002 | crypto 
```

现在，认识到

```
(n + 26) % 26 === (n % 26) 
```

所以：

```
| 000 | 001 | 002 | ... | 024 | 025 | plain
|  A  |  B  |  C  | ... |  Y  |  Z  |
| 029 | 030 | 031 | ... | 053 | 054 | crypto 
```

当您考虑模 26 时，等效于上述情况

这让生活变得轻松了很多。明文符号集由从`'A'`到的一组连续整数组成`'A' + 25`。问题是密文符号集不连续......在`025`. 通过添加 26，您可以将密文转换为从`'A' + k + 26`到的连续范围`'A' + k + 49`。

然后将连续密文符号集映射到明文符号集要容易*得多。*

由于凯撒代码可能是任一方向的偏移，而解密只是相反的偏移，您可以将其结合起来

```
boolean decrypt;
int k; 
...
k = k % 26; // Ensure that the shift doesn't include any wrapping
if(decrypt) {
    k *= -1;
}
if (isupper(p[i])){
    char c = (p[i] - 'A' + 26 + k) % 26) + 'A';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:51:00.833

在加密中，

```
((p[i] - 'A') + k % 26) + 'A' 
```

认为它被评估为

```
t1 = p[i] - 'A'
t2 = k % 26
result = t1 + t2 + 'A' 
```

这可能不是你想要的。解密不会逆转该算术，主要是因为额外的分组改变了操作的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:55:03.750

你没有考虑他们环绕的事实，试试这样：

```
if ((p[i] - 'A' - k) < 0 )
    c = 'Z' - (abs(p[i] - 'A' - k) % 26) + 1;
else 
    c = (abs(p[i] - 'A' - k) % 26) + 'A'; 
```

而且我认为您也不需要模数“％”。

# jquery - getJson vs. $.ajax()

> ID：12964250
> 
> 赞同：1
> 
> 时间：2012-10-18T21:44:40.100
> 
> 标签：jquery, getjson

I have a question regarding using getJson.

I had a getJson call and I couldn't figure out why it didn't do what is was supposed to do. I then put an alert after the getJson and found out that the alert was getting executed before the getJson.

I then figured the only way to solve this would be to use $.ajax with async false as follows

```
 $.ajax({
            url: url,
            dataType: 'json',
            async: false,
            success: function (data) {
                if (data == true) {                         
                    alert("Cannot continue.")
                    returnval = false;
                }
            }
        }); 
```

Just wondering if there is any other way to solve this issue to where I need the json through ajax call to execute first without using async false. Note that I am using MVC C# the the above code is in my view.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:09:27.683

It's simple - remove the async: false. You need to place code that will run after your calls in the success block, as you have done. If you have a large amount of code to execute, it is possible to place it into its own function:

```
var doThisOnResult = function(data) {
  alert('Data is here.');
}; 
```

Then in your $.ajax call, do

```
success: doThisOnResult 
```

Note that you don't want to use parens on that line, since you are passing your function as a variable instead of calling it.

# sql - 外键列引用自身的作用（或目的）是什么？

> ID：12964251
> 
> 赞同：7
> 
> 时间：2012-10-18T21:44:41.183
> 
> 标签：sql, sql-server-2008-r2, sybase

在数据库迁移期间，我遇到了以下形式的数据库表约束：

```
ALTER TABLE [dbo].[myTable]
ADD CONSTRAINT [someName] FOREIGN KEY ([id]) REFERENCES [dbo].[myTable] ([id])
ON DELETE NO ACTION
ON UPDATE NO ACTION 
```

为什么要这样做？这最初是在 Sybase 数据库上完成的，我们正在转换为 SQL Server 2008 R2。

**更新**：是的，外键约束是引用同一个表和相同字段的字段。

我在源 Sybase 数据库上运行了这个查询，发现定义了 42 个这些疯狂的键，所以它看起来不像是错字。

```
SELECT sr.constrid as [Constraint ID],
       so.name as [Table],
       sc.name as [Column]
  FROM sysreferences sr
       INNER JOIN sysobjects so ON (so.id = sr.tableid)
       INNER JOIN syscolumns sc ON (sc.id = sr.tableid AND sc.colid = sr.fokey1)
 WHERE sr.tableid = sr.reftabid
   AND sr.fokey1 = sr.refkey1
   AND sr.fokey2 = 0
   AND sr.refkey2 = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:59:05.387

I believe that hierarchies are the standard examples you'll find in books whenever you use foreign keys for the same table, such as:

```
create table Employees (
 EmployeeID int identity primary key,
 EmployeeName varchar(50),
 ManagerID int
 Foreign key (managerID) references Employees(EmployeeID)
) 
```

What you posted looks like a wrong application of this hierarchy relation in the same table. I'm not entirely sure why you'd ever wanna do that.

Hope this helped =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:59:56.740

**Surprise!** This totally works:

```
create table crazy (
    ID int primary key references crazy (ID) -- This runs
);
insert into crazy select 1;  -- So does this
select * from crazy; -- Returns 1
truncate table crazy; -- Works just fine 
```

I can only think that this would have been a mistake (Typo? Dragging a column onto itself in a diagram?) or used to fool another system (ORM?) into some particular behavior. I will be *very* curious to see if someone comes up with a legit reason.

UPDATE: As cleverly suggested by @8kb, this could have been an attempt to prevent truncation, but we can see from my example that even truncation works just fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:50:54.460

**我猜这是数据库模型中的错误。**

这真的很奇怪。我无法想象这种结构有什么有用的目的。

插入数据的唯一方法是不检查引用完整性。这意味着使用明确禁用的引用或使用某种批量插入等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T16:05:47.927

引用自身的外键列的效果*似乎*没什么。至于为什么数据库引擎会让你做这种无用的事情，这仍然是一个悬而未决的问题。

但是，我相信有人会像这样构建外键的**原因是懒惰/粗心。**我发现在 SQL Server Management Studio 中，如果您使用 GUI 构建外键（而不是在 T-SQL 中写出来），SSMS 的初始行为是像在这个问题中一样创建外键：

1.  在“对象资源管理器”窗格中展开数据库的任何表。我们将此表称为TableA。
2.  右键单击 TableA 节点下的 Keys 并选择 New Foreign Key... 这将打开 Modify table 窗格和 Foreign Key Relationships 对话框。
3.  什么都不做，只需单击外键关系对话框上的关闭按钮。 *“糟糕，我不是故意要添加外键的。”*
4.  关闭对话框仍然会生成一个名为 FK_TableA_TableA 的外键，并选择主键列作为基础列和参考列。
5.  在“修改表”窗格仍处于打开状态（关闭“外键关系”对话框后仍处于打开状态）的情况下，将其关闭。它有变化（你刚刚创建的新外键）。保存这些更改。
6.  TableA 的数据库中现在存在一个新的外键，主键列引用它自己。

# ruby-on-rails - 如何更新/重命名carrierwave上传的文件？

> ID：12964255
> 
> 赞同：5
> 
> 时间：2012-10-18T21:44:56.463
> 
> 标签：ruby-on-rails, file, rename, carrierwave, update-attributes

我不知道如何在 rails 3.2.6 中更新/重命名使用 Carrierwave-mongoid 上传/管理的文件。我想重命名数据库和文件系统中的文件。

像这样的东西也许...

```
def rename( id , new_name )
  f = UploadedFile.find(id)

  if f.update_attributes({ f.file.original_filename: new_name })  # this is WRONG, what is right???
    new_path = File.join( File.dirname( f.file.current_path ) , new_name ))
    FileUtils.mv( f.file.current_path , new_path )
  end

  return f
end 
```

让我添加这个是在它已经上传之后。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T20:13:26.047

尽管我确信有一种更优雅的方式，但我能够完成以下工作。我很感激对以下内容的任何评论

*将此添加到 app/uploaders/file_uploader.rb

```
def rename(new_name)
  sf = model.file.file
  new_path = File.join( File.dirname( sf.file ) , "#{new_name}#{File.extname( sf.file )}")
  new_sf = CarrierWave::SanitizedFile.new sf.move_to(new_path)
  model.file.cache!(new_sf)
  model.save!
  return model
end 
```

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-17T15:21:40.557

最有效的方法是移动现有的 S3 对象（假设您的存储层是 S3）：

```
def rename(new_name)
  bucket_name = "yourapp-#{Rails.env}"
  resource = Aws::S3::Resource.new
  bucket = resource.bucket(bucket_name)
  object = bucket.object(path)
  new_filename = "#{new_name}#{File.extname(path)}"
  new_path = File.join(File.dirname(path), new_filename)
  object.move_to(bucket: bucket_name, key: new_path)

  model.update_column(mounted_as, new_filename)
  model.reload

  # Now call `recreate_versions!(*versions.keys)`
  # if you want versions updated. Explicitly passing
  # versions will prevent the base version getting
  # reuploaded.

  model
end 
```

这是使用`aws-sdk-s3`宝石。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-31T18:02:47.977

我将图像文件和衍生版本存储在与 S3 兼容的解决方案中。我在 Rails 5.1 上使用 Carrierwave (1.2.2) 和 "fog-aws" gem (3.0.0)。当添加到“上传器”文件（例如，`app/uploaders/example_uploader.rb`）时，以下公共方法适用于我：

```
class ExampleUploader < CarrierWave::Uploader::Base
  <snip>

  # Renames original file and versions to match given filename
  #
  # Options:
  # * +:keep_original+ - Do not remove original file and versions (ie, copy only)
  def rename(new_filename, options = {})
    return if !file || new_filename == file.filename
    target = File.join(store_path, new_filename)
    file.copy_to(target)
    versions.keys.each do |k|
      target = File.join(store_path, "#{k}_#{new_filename}")
      version = send(k).file
      version.copy_to(target)
    end
    remove! unless options[:keep_original]
    model.update_column(mounted_as, new_filename) && model.reload
  end

  <snip>
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-22T20:53:24.670

基于@user892583，我对其进行了研究并提出了一个更简单的解决方案：

```
def rename!(new_name)
  new_path = File.join(File.dirname(file.file), new_name)
  file.move_to(new_path)
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T01:41:37.873

在我的上传文件中修改版本设置（文件名和图像大小）后，我使用这个 rake 任务重新处理上传的图像：

```
# Usage: rake carrierwave:reprocess class=Model
namespace :carrierwave do
  task :reprocess => :environment do

    CLASS = ENV['class'].capitalize
    MODEL = Kernel.const_get(CLASS)
    records = MODEL.all

    records.each do |record|
      record.photo.recreate_versions! if record.photo?
    end

  end
end 
```

笔记：

*   用您命名上传者的任何内容替换“照片”。
*   Rake 任务位于 lib/tasks 文件夹中。
*   这是使用 Active Record，不确定 Mongoid 是否需要不同的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-05T16:31:08.343

我是这样做的：

```
 def filename
    if !cached? && file.present?
      new_filename = 'foobar'
      new_path = File.join(File.dirname(file.path), new_filename)
      file.move_to(new_path)
      recreate_versions!
      new_filename
    else
      super
    end
  end 
```

我认为这是重命名文件的唯一正确方法。

# javascript - 从字符串名称动态创建 JavaScript 函数

> ID：12964262
> 
> 赞同：10
> 
> 时间：2012-10-18T21:45:39.743
> 
> 标签：javascript, class, function

给定一个字符串`classname`，我想动态创建一个以该字符串命名的新 JavaScript 函数，该函数可用于实例化对象。

我试过使用`eval()`，但由于某种原因，声明的函数没有出现在全局（窗口）范围内。

```
eval( "function " + classname + "() {}" );
window[ classname ]; // => undefined 
```

有没有办法可以动态创建一个以字符串命名的新函数？

或者，或者，在通过`eval`. 有趣的是，当我在 Safari 中调试它时，它显示为一个局部变量。

**更新：**

知道了！当然很明显，我只是`eval`再次使用来创建实例：

```
var myInstance = eval( "new " + classname );
myInstance.constructor.name; // => classname (yay) 
```

这应该适用于我的情况，因为我只需要在声明后立即创建该类的一个实例。对于一般情况，请参阅 Pointy 的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T21:46:49.867

是的：

```
window[classname] = function() { ... }; 
```

现在，老实说，这并不*完全*像你尝试的那样，但它非常接近。当您通过这样的`function` *表达式*实例化一个函数并且没有名称时，该函数不能引用自身，除非通过外部范围（在本例中为全局范围）中的名称。

如果这很重要，您可以这样做：使用一些股票“内部”名称创建函数，然后将其分配给全局名称：

```
function secretName() { ... }

window[classname] = secretName; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T23:22:28.390

```
function registerFunction(functionBody) {
         "use strict";
         var script = document.createElement("script");
         script.innerHTML = "function " + functionBody;
         document.body.appendChild(script);
}
registerFunction("fooBar(x, y) { return x + y; }");
fooBar(1, 2); // will give you 3 
```

虽然这本质上是一样的，`eval()`但是它会在当前页面的域中注册函数。您可以稍后删除此脚本元素，或将其重新用于其他功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T21:48:12.010

试试这个：

```
var classname = "myFunction";

window[ classname ] = function () {};

alert( window[ classname ] ); // => undefined 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-06T04:04:10.863

如果您不想基于某个字符串创建新函数，而是基于另一个类似函数：（这可能不是一个很好的例子，但希望您能理解）

```
function createListOfFunctions(functionNameList) {
  resultFunctions = {};

  // Loop all names to create a list of functions with those names
  $.each(functionNameList, function(index, functionName) {
    resultFunctions[functionName] = _createFunction(functionName);
  });

  return resultFunctions;
}

function _createFunction(name) {
  return function(anotherNameToCompare) {
    // customize this funciton whatever you like
    return name == anotherNameToCompare;
  };
}

// USAGE:
functionNameList = ['stack', 'overflow'];
result = createListOfFunctions(functionNameList); // result = { stack: function(name) {...}, overflow: function(name) {...} }

result.stack('stack'); // true
result.stack('not stack'); // false
result.overflow('overflow'); // true 
```

# tridion - 如何为视图子集配置 SDL Tridion CME 扩展？

> ID：12964263
> 
> 赞同：8
> 
> 时间：2012-10-18T21:45:41.203
> 
> 标签：tridion, tridion-2011

我为 SDL Tridion 创建了一个新编辑器，它为功能区栏添加了一些新功能。这是通过将以下代码段添加到 editor.config 来启用的

```
 <!-- ItemCommenting PowerTool -->
    <ext:extension assignid="ItemCommenting" name="Save and&lt;br/&gt;Comment" pageid="HomePage" groupid="ManageGroup" insertbefore="SaveCloseBtn">
      <ext:command>PT_ItemCommenting</ext:command>
      <ext:title>Save and Comment</ext:title>
      <ext:issmallbutton>false</ext:issmallbutton>
      <ext:dependencies>
        <cfg:dependency>PowerTools.Commands</cfg:dependency>
      </ext:dependencies>
      <ext:apply>
        <ext:view name="*" />
      </ext:apply>
    </ext:extension> 
```

这通过在节点中使用通配符值应用于所有视图。这导致我的新按钮被添加到每个视图的功能区中，包括主仪表板。有没有办法将此添加到除仪表板之外的所有视图中？还是我必须创建这样的东西？

```
 <ext:apply>
        <ext:view name="PageView" />
        <ext:view name="ComponentView" />
        <ext:view name="SchemaView" />
    </ext:apply> 
```

如果这是实现我需要的结果的唯一方法，那么某处是否有所有视图名称的列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T09:18:39.483

Jaime 提供的解决方法将不起作用，因为：

*   `isAvailable` 如果相应命令的方法返回 false，功能区工具栏将仅隐藏“创建”选项卡上的按钮。
*   RibbonToolbar 中的大多数按钮都实现了特定的`Tridion.Controls.RibbonButton`界面。这意味着，当您尝试`Tridion.Controls.Button`控制同一元素时 - 您将获得完全不同的控制，基于相同的 html 元素。所以 RibbonToolbar 不会知道它，它会不能正常工作。
*   如果要在 RibbonToolbar 中隐藏按钮，则应使用 RibbonToolbar 和 RibbonPage 上的公共方法。因此它将由 RibbonToolbar 正确处理。例子：

```
var toolbar = $controls.getControl($("#ItemToolbar"), "Tridion.Controls.RibbonToolbar");
var page = toolbar.getPageById("HomePage");
page.hideItem(buttonId);
page.showItem(buttonId); 
```

至于最初的问题，这是非常简单和最简单的解决方案：

```
<ext:add>
    <ext:extension assignid="ItemCommenting" name="Save and&lt;br/&gt;Comment" pageid="HomePage" groupid="ManageGroup" insertbefore="SaveCloseBtn">
        <ext:command>PT_ItemCommenting</ext:command>
        <ext:title>Save and Comment</ext:title>
        <ext:issmallbutton>false</ext:issmallbutton>
        <ext:dependencies>
            <cfg:dependency>PowerTools.Commands</cfg:dependency>
        </ext:dependencies>
        <ext:apply>
            <ext:view name="*" />
        </ext:apply>
    </ext:extension>
</ext:add>
<ext:remove>
    <ext:extension id="ItemCommenting">
        <ext:apply>
            <ext:view name="DashboardView" />
        </ext:apply>
    </ext:extension>
</ext:remove> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:43:22.627

据我所知，您需要指定所有视图或使用通配符。很高兴 isAvailable 功能适用于功能区工具栏按钮，对吧？这意味着如果命令在 _isAvailable 方法中返回 false，则按钮将不会显示...

好吧，我找到了解决办法。您可以在命令的 isAvailable 方法中执行类似的操作：

```
Your.Namespace.PT_ItemCommenting.prototype._isAvailable = function PT_ItemCommenting$_isAvailable(selection) {
    var isAvailable = $display.getView().getId()!='DashboardView';
    if(isAvailable){
        return true;
    }
    var button = $controls.getControl($("#ItemCommenting"), "Tridion.Controls.Button");
    button.hide();
    return false;
}; 
```

我认为这实际上是一个很好的做法，因为如果命令不可用，它会“隐藏”它们，对吧？

让我知道它是如何工作的。

# sql-server - sql server management studio：使用任务生成视图脚本 -> 生成脚本

> ID：12964266
> 
> 赞同：2
> 
> 时间：2012-10-18T21:45:52.923
> 
> 标签：sql-server, view, ssms

我正在通过 SQL Server Management Studio 2008 中的任务选项为我的视图生成创建脚本。

当我运行脚本时，它会失败，因为我的视图取决于脚本中更靠后的其他视图。例如，View1 依赖于 View2，但 View2 直到在脚本的更下方才被创建。因此，当 View1 的创建语句正在运行时，由于 View2 尚不存在，它会失败。

这是一个遗留系统，要通过并删除 View 依赖项并不容易。

我可以通过脚本来移动语句，但我有 100 多个视图，每次生成脚本时都这样做是不可行的。我生成的脚本是一个不断发展的脚本，每个版本都发布了。

有谁知道如何让管理工作室创建考虑依赖关系的视图脚本？或者其他方法可以通过点击几下鼠标轻松生成脚本？

# jquery - IE7 转换后透明度丢失

> ID：12964278
> 
> 赞同：0
> 
> 时间：2012-10-18T21:46:41.193
> 
> 标签：jquery, transform

我正在创建一个针对 IE7 的页面。在页面的某个部分，用户可以旋转和放大和缩小包含背景图像和许多其他以编程方式添加的 div 的区域（div 元素）。非图像 div 是空的，但使用 css 设置样式以具有位置、颜色和透明度。它们根据用户操作突出显示图像区域。

我从这里使用 jQuery 2D 转换插件： [https](https://github.com/heygrady/transform/wiki) ://github.com/heygrady/transform/wiki 进行旋转和缩放/缩放。我正在使用很多其他的 javascript 和 jquery 来处理用户交互。

一切正常，除了一件事：当用户缩放或旋转 div 时，高亮 div 的透明度会丢失。它们完美地与父 div 和图像一起旋转和缩放，但颜色变得不透明和浑浊。就好像高光后面的区域变黑了一样。

有人知道我能做些什么吗？我尝试在转换后通过 javascript 重新应用 css 样式。我可以更改 div 的颜色，但更改透明度只会使 div 或多或少变得浑浊——它再也不会变得透明。

一个可能更简单的问题：是否可以删除使用此库创建的转换？如果这是可能的，那么当用户移回 100% 比例且不旋转时，也许我可以重置所有内容。这并不理想，但会比目前的情况更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:40:19.630

假设您使用的是 jQuery 库，要删除 css 规则，只需传递一个空字符串即可。

```
$('selector').css('transform', ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:09:24.910

根据我们在问题评论中的对话回答:)

从您所描述的给您带来问题的元素来看，这些元素只是具有 25% 不透明度的彩色 div。您可以使用半透明 PNG 作为每个 div 的背景图像，以实现相同的效果并回避问题。

# glsl - 这个 GLSL rand() 单线的起源是什么？

> ID：12964279
> 
> 赞同：108
> 
> 时间：2012-10-18T21:46:48.203
> 
> 标签：glsl, shader, prng

我已经看到这个伪随机数生成器[在网络上到处](https://www.google.com/search?q=fract%28sin%28dot%28co.xy%20,vec2%2812.9898,78.233%29%29%29%20%2a%2043758.5453%29&rlz=1C1CHFA_enUS484US484&oq=fract%28sin%28dot%28co.xy%20,vec2%2812.9898,78.233%29%29%29%20%2a%2043758.5453%29&sugexp=chrome,mod=9&sourceid=chrome&ie=UTF-8)引用的着色器中使用：

```
float rand(vec2 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
} 
```

它被称为“规范”或“我在网上某处找到的单行”。

这个函数的起源是什么？常数值是否像它们看起来那样随意，或者它们的选择有什么艺术？有没有讨论这个功能的优点？

编辑：我遇到的对这个函数的最古老的引用是[这个 08 年 2 月的档案](http://web.archive.org/web/20080211204527/http://lumina.sourceforge.net/Tutorials/Noise.html)，原来的页面现在已经从网上消失了。但是那里没有比其他任何地方更多的讨论。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-30T03:57:55.823

非常有趣的问题！

我试图在输入答案时弄清楚这一点:) 首先是一个简单的方法：[http ://www.wolframalpha.com/input/?i=plot%28+mod%28+sin%28x*12.9898 +%2B+y*78.233%29++*+43758.5453%2C1%29x%3D0..2%2C+y%3D0..2%29](http://www.wolframalpha.com/input/?i=plot%28%20mod%28%20sin%28x%2a12.9898%20%2b%20y%2a78.233%29%20%2a%2043758.5453,1%29x=0..2,%20y=0..2%29)

然后让我们考虑一下我们在这里要做什么：对于两个输入坐标 x,y，我们返回一个“随机数”。现在这不是一个随机数。每次我们输入相同的 x,y 时都是一样的。这是一个哈希函数！

该函数所做的第一件事是从 2d 到 1d。这本身并不有趣，但是选择了数字，因此它们通常不会重复。我们还有一个浮点加法。y 或 x 将有更多位，但可能只是选择了正确的数字，因此它可以混合。

然后我们采样一个黑盒 sin() 函数。这在很大程度上取决于实施！

最后，它通过乘以分数来放大 sin() 实现中的错误。

在一般情况下，我认为这不是一个好的哈希函数。sin() 在数字上是 GPU 上的一个黑盒子。通过采用几乎任何散列函数并对其进行转换，应该可以构建一个更好的函数。困难的部分是将 cpu 散列中使用的典型整数运算转换为浮点（半位或 32 位）或定点运算，但应该是可能的。

同样，这个作为散列函数的真正问题是 sin() 是一个黑盒子。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-12-11T12:37:50.710

起源可能是论文：*“On generate random numbers, with help of y= [(a+x)sin(bx)] mod 1”, WJJ Rey, 22nd European Meeting of Statisticians and the 7th Vilnius Conference on Probability Theory and数理统计，1998 年 8 月*

编辑：由于我找不到本文的副本并且“TestU01”参考可能不清楚，这是伪 C 中 TestU01 中描述的方案：

```
#define A1 ???
#define A2 ???
#define B1 pi*(sqrt(5.0)-1)/2
#define B2 ???

uint32_t n;   // position in the stream

double next() {
  double t = fract(A1     * sin(B1*n));
  double u = fract((A2+t) * sin(B2*t));
  n++;
  return u;
} 
```

其中唯一推荐的常数值是 B1。

请注意，这是针对流的。转换为一维散列“n”成为整数网格。所以我的猜测是有人看到了这个并将't'转换为一个简单的函数f（x，y）。使用上面的原始常量将产生：

```
float hash(vec2 co){
  float t = 12.9898*co.x + 78.233*co.y; 
  return fract((A2+t) * sin(t));  // any B2 is folded into 't' computation
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-21T07:39:28.047

常数值是任意的，特别是它们非常大，并且距离素数有几个小数。

hi 幅度正弦的 1 上的模数乘以 4000 是一个周期函数。它就像百叶窗或波纹金属制成的非常小，因为它乘以 4000，并通过点积旋转一个角度。

由于函数是二维的，点积具有将周期函数相对于 X 和 Y 轴倾斜转动的效果。大约按 13/79 的比例计算。这是低效的，你实际上可以通过做（13x + 79y）的正弦来达到同样的效果，这也可以用更少的数学来实现我认为的同样的事情..

如果在 X 和 Y 中都找到函数的周期，则可以对其进行采样，使其再次看起来像一个简单的正弦波。

这是放大[图的图片](http://www.wolframalpha.com/input/?i=plot%28%20mod%28%20sin%28x%2a12.9898%20%2b%20y%2a78.233%29%20%2a%2043758.5453,1%29x=0...2%2a.000001,%20y=0...2%2a.000001%29)

我不知道起源，但它与许多其他类似，如果你在图形中定期使用它，它往往会产生莫尔图案，你可以看到它最终会再次出现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-23T19:57:53.003

我不认为这是真正的起源，但 OP 的代码在 Patricio Gonzalez Vivo 和 Jen Lowe 的“着色器之书”中作为代码示例呈现 ( [https://thebookofshaders.com/10/](https://thebookofshaders.com/10/) )。在他们的代码中，Patricio Gonzales Vivo 被引用为作者，即“// Author @patriciogv - 2015”

由于 OP 的研究可以追溯到更早（到 08 年），因此来源至少可以解释它的受欢迎程度，并且作者可能能够对他的来源有所了解。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-06T16:11:33.753

也许它是一些非循环的混沌映射，那么它可以解释很多事情，但也可以只是一些大数字的任意操作。

编辑：基本上，函数 fract(sin(x) * 43758.5453) 是一个简单的类似散列的函数， sin(x) 提供 -1 到 1 之间的平滑 sin 插值，因此 sin(x) * 43758.5453 将从 - 43758.5453 至 43758.5453。这是一个相当大的范围，因此即使 x 中的小步长也会在结果中提供大步长，并且小数部分的变化非常大。需要“分数”来获取 -0.99... 到 0.999... 范围内的值。现在，当我们有类似哈希函数的东西时，我们应该从向量创建用于生产哈希的函数。最简单的方法是为 x 输入向量的任何 y 分量单独调用“散列”。但是，我们将有一些对称值。因此，我们应该从向量中获取一些值，方法是找到一些随机向量并找到该向量的“点”积，我们开始：fract(sin(dot(co.xy , vec2(12.9898,78.233))) * 43758.5453); 此外，根据选择的向量，它的长度应该足够长，以便在计算“点”积之后有几个“sin”函数的周期。

# c# - 通过 .NET 的 Campaign Monitor API

> ID：12964286
> 
> 赞同：0
> 
> 时间：2012-10-18T21:47:23.180
> 
> 标签：c#, webhooks, campaign-monitor

是否有人使用 Campaign Monitor 通过 Campaign Monitor webhook 接收订阅更新？我已将 webhook 配置为将 json 数据发布到我们网站上的页面，但是当我的代码接收到数据时，它只是一堆零。我的代码如下：

```
System.IO.Stream stream = Request.InputStream;
        byte[] byteData = new byte[Convert.ToInt32(stream.Length)];
        int read = stream.Read(byteData, 0, Convert.ToInt32(stream.Length));
        string streamData = string.Empty;
        string somedata = System.Text.Encoding.ASCII.GetString(byteData).ToString();
        for (int i = 0; i < Convert.ToInt32(stream.Length); i++)
        {
            streamData = streamData + byteData[i].ToString();
        } 
```

我已经尝试将数据发布到我的页面并且它有效 - 即上面的代码（somedata）返回与我发布到页面相同的文本值。很郁闷....

有什么想法吗？我今晚掉了很多头发！！！

提前感谢艾尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:59:15.223

您可以按如下方式阅读请求的正文（来自 webforms 应用程序）：

```
var reader = new StreamReader(Request.InputStream);
var json = reader.ReadToEnd(); 
```

[文档指定](http://www.campaignmonitor.com/api/webhooks/#currently_available_webhooks)您期望订阅事件的数据采用以下形式：

```
{
    "Events": [
        {
            "CustomFields": [
                {
                    "Key": "website", 
                    "Value": "http:\/\/example.org"
                }
            ],
            "Date": "2010-12-14 11:32:00",
            "EmailAddress": "test@example.org",
            "Name": "Test Subscriber",
            "SignupIPAddress": "53.78.123.243",
            "Type": "Subscribe"
        }
    ],
    "ListID": "96c0bbdaa54760c8d9e62a2b7ffa2e13"
} 
```

您可以通过使用上面的示例数据向您的 URL 提交 POST 请求来自己测试这一点。这是一个使用 curl 的示例：

```
curl http://localhost:49681/receiver.aspx -v -X POST -d \
'{
    "Events": [
        {
            "CustomFields": [
                {
                    "Key": "website", 
                    "Value": "http:\/\/example.org"
                }
            ],
            "Date": "2010-12-14 11:32:00",
            "EmailAddress": "test@example.org",
            "Name": "Test Subscriber",
            "SignupIPAddress": "53.78.123.243",
            "Type": "Subscribe"
        }
    ],
    "ListID": "96c0bbdaa54760c8d9e62a2b7ffa2e13"
}' 
```

# java - 从关键字获取推文

> ID：12964289
> 
> 赞同：0
> 
> 时间：2012-10-18T21:47:30.710
> 
> 标签：java, twitter, twitter4j

有没有办法在java中获取包含关键字的推文？我想尽可能多地下载，我看过一个 java 库 twitter4j，但它只提供少量的推文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:29:21.207

您可以使用 Twitter4J 设置页面大小和数量以请求更多推文。

```
public static void main(String[] args) throws TwitterException {
    Twitter twitter = new TwitterFactory().getInstance();

    for (int page = 1; page <= 10; page++) {
        System.out.println("\nPage: " + page);
        Query query = new Query("#MyWorstFear"); // trending right now
        query.setRpp(100);
        query.setPage(page);
        QueryResult qr = twitter.search(query);
        List<Tweet> qrTweets = qr.getTweets();

        if(qrTweets.size() == 0) break;

        for(Tweet t : qrTweets) {
            System.out.println(t.getId() + " - " + t.getCreatedAt() + ": " + t.getText());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:52:19.090

阅读 twitter api 的文档 [https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search) 虽然它的速率有限。我不认为有办法解决它。速率限制因开放搜索 API 和需要身份验证的 API 而异。 [http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed](http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed) （注意 - 此链接是从 twiter api 网页复制的）

# silverlight-4.0 - 将数据网格绑定到 Silverlight 4 中的自定义对象集合

> ID：12964290
> 
> 赞同：1
> 
> 时间：2012-10-18T21:47:42.760
> 
> 标签：silverlight-4.0

我有一个集合说它`NotificationHistoryCollection`是一个`NotificationHistory`对象的集合，它又具有`NotificationDetails`对象和集合`NotificationHistoryDetail`。如何在 silverlight 4.0 中绑定`NotificationDetails`到数据网格并将集合绑定到另一个数据网格`NotificationHistoryDetail`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:06:01.893

这应该给你一些想法：

```
 public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
        friends.Add(new Friend(){Name = "Pappu",Email = new EmailAddress(){Email = "test@test.com"}});
        dgFriends.ItemsSource = Friends;
    }

    ObservableCollection<Friend> friends = new ObservableCollection<Friend>();
    public ObservableCollection<Friend> Friends { get { return friends; } set { friends = value; } }
}

public class Friend
{
    public string Name { get; set; }
    public string LastName { get; set; }
    public EmailAddress Email { get; set; }
}

public class EmailAddress
{
    public string Email { get; set; }
}

 <data:DataGrid x:Name="dgFriends" AutoGenerateColumns="False">
        <data:DataGrid.Columns>
            <data:DataGridTextColumn Binding="{Binding  Email.Email}" Header="EmailAddress" IsReadOnly="True"></data:DataGridTextColumn>               
        </data:DataGrid.Columns>
    </data:DataGrid> 
```

结果： ![在此处输入图像描述](../Images/a82810fcf58df725be63a5a680e00d90.png)

# ruby-on-rails - Ruby on Rails：如何实现这个特定模型（使用继承、N-to-M 关系等）

> ID：12964298
> 
> 赞同：1
> 
> 时间：2012-10-18T21:48:12.400
> 
> 标签：ruby-on-rails, ruby, activerecord

我已经为我的应用程序定义了数据模型，其中将包含以下特定部分：![在此处输入图像描述](../Images/cf2a99f603c5c7eefd85f5495ae39111.png)

现在，我的特殊问题与建模“Value”有关，它是子模型“Value_Decimal”和“Value_Text”。基本上我不想拥有这种层次结构，因为它预计会有其他几种值类型，并且每个值模型都有其他几个不同的列（由于这个事实，我不考虑单表继承）。我如何使用 Rails 的 Active Record 来实现这一点，有人可以指出一些方向吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:57:34.687

该`item_property_value`表应该有一个`value_type`允许多态关联的列。然后，您可以为从抽象`value`模型（没有表）继承的各种“价值”模型创建不同的表。通过这种方式，您可以避免 STI，但仍然从一个基本模型继承。

因为该`item_property_value`模型结合了 3 种不同的关系，所以需要将其视为一流的 Rails 模型，这意味着它还需要 a`id`作为主键。然后，您可以使用[has-many-through](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)映射来访问它正在加入的实际对象。

在此处阅读[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。抽象类被简单地标记为：

```
class Value < ActiveRecord::Base
  self.abstract_class = true
end 
```

# objective-c - ios中如何填充数组的区别？

> ID：12964300
> 
> 赞同：0
> 
> 时间：2012-10-18T21:48:23.727
> 
> 标签：objective-c, ios, arrays, plist

大家好，谢谢大家，情况是这样的，当我使用以下方法填充我的数组时，当我使用方法 2 时它不起作用。目标是改变文本的颜色。两种方法都经过 NSLOGED，数据相同。

第一种方式..（工作名称变灰）

```
-cellForRowAtIndexPath
....
       if ([self.secArray containsObject:indexPath]) {
        cell.textLabel.textColor = [UIColor grayColor];
    } .....

-didSelectRowAtIndexPath:
...
  [secArray addObject:indexPath]; 
```

第二种方式（不工作 - 从我的 .plist 填充数组）

```
-cellForRowAtIndexPath
....
       if ([self.secArray containsObject:indexPath]) {
        cell.textLabel.textColor = [UIColor grayColor];
    } .....

-viewWillAppear
 NSString *filePathOrdersIndex = [self dataFilePathOrders];

    NSMutableArray *chekDist;

    chekDist = [[NSMutableArray alloc] initWithContentsOfFile:filePathOrdersIndex];
    NSLog( @"data checkDist........... %@", chekDist);
    if(!chekDist){
        chekDist = [[NSMutableArray alloc]init];
    }

    for(id dist_data in chekDist){

        secArray = [dist_data objectForKey:@"myIndexPath"];
        //[secArray addObject:[dist_data objectForKey:@"myIndexPath"]];

    } 
```

记录到控制台的两种方法都包含相同的数组数据....但是第二种方法不起作用

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:56:16.840

在第二种方法中，您将数组的一个元素分配给`checkDist`数组本身，每个元素都`dist_data`在?`checkDist``secArray`

从外部角度来看，如果不了解有关这些变量所包含的数据类型的更多信息，这两种方法在功能上并不等效。尽管`secArray`每次循环执行时您都在设置变量，但我假设这是不正确的，您需要使用您在第二种方法 ( )`for`中注释掉的行。`[secArray addObject:[dist_data objectForKey:@"myIndexPath"]];`

如果在使用该行之后仍然无法正常工作，请在执行第二种方法时验证`secArray`是否已创建（确保它不是）。`nil`

# javascript - 在保存期间检测http方法

> ID：12964302
> 
> 赞同：0
> 
> 时间：2012-10-18T21:48:39.513
> 
> 标签：javascript, backbone.js

如何检查在 Backbone.Model.save() 期间使用了哪种方法（POST 或 PUT）？我正在尝试使用以下代码，这显然失败了，因为`success`方法没有`xhr`传递参数。

```
 success: function (model, xhr) {     
        console.log(arguments) // 2 arguments: 1 - model, 2 - json response       
        if (xhr.status === 201) {
            this.publish(
                'message',
                'Model was successfully created',
                'success'
            );
            $('#content').find('button[type=submit]').text('Save');
        } else {
            this.publish(
                'message',
                'Model was saved',
                'success'
            );
        }
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:11:41.923

您在保存时就知道记录是否是新的。你总是可以这样做：

```
var isNew = model.isNew();

model.save({
  success: function() {
    if (isNew)
      // handle create
    else
      // handle update
  }
}); 
```

# osmf - 是否有用于预定现场活动的 osmf 概念？

> ID：12964303
> 
> 赞同：1
> 
> 时间：2012-10-18T21:48:42.830
> 
> 标签：osmf

由于合并和收购，许多古老的，不可谈判的历史，所以我意识到有更好的方法来做这一切，但是......我面临以下问题：

我有一个基于 osmf 的视频播放器，其中特定的播放列表项（用于实时视频）必须执行以下操作：

1.  在显示倒计时之前播放 preRoll
2.  显示倒计时直到视频开始时间（与服务器时间同步）
3.  在视频播放之前播放另一个 preRoll
4.  播放直播直到服务器时间到达直播结束时间
5.  然后播放后贴片视频

我已经得到了这个工作的大部分，但我遇到了任意插入“广告”的墙壁，因为我不想触发与加载新媒体相关的事件。如果我尝试注入新广告（特别是在流播放后），直播将再次显示。虽然我可以想出一些可怕的方法来完成这项工作，但我只是想首先确保我没有遗漏一些关于 osmf 和现场活动的关键信息。对于我正在使用的架构中什么是原生 osmf 以及什么是本土的，我也有点不确定。

1) osmf 是否有计划现场活动的概念，这可能会使这更容易

2) osmf 是否可以选择根据一些外部调用任意插入视频到播放中，而不更改播放列表索引或返回到视频的开头。

# python - 在哪里可以找到每个 python 关键字如何实现的官方列表？

> ID：12964304
> 
> 赞同：2
> 
> 时间：2012-10-18T21:48:51.973
> 
> 标签：python, python-2.7

我正在学习 python 2.7 并从随机代码中或通过在 stackoverflow 上搜索问题来学习基本关键字的使用。我知道官方的python文档，并在其中找到了一个关键字列表：[2.3.1。关键词](http://docs.python.org/reference/lexical_analysis.html#keywords)。我还在维基百科中找到了类似的信息。这些只是单词列表，没有任何解释如何使用它们。

我正在寻找一个*可点击*的列表，例如，通过点击*is*，它会带我了解如何实现的*描述*。官方python文档或互联网上的任何地方都有这样的页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:46:43.780

我怀疑关键字使用列表不存在，因为不同的关键字以非常不同的方式使用。

以下是 Python 2.7 中关键字的快速细分：

*   [运算符和其他表达式](http://docs.python.org/reference/expressions.html)：
    *   `and`
    *   `is`
    *   `lambda`
    *   `not`
    *   `or`
    *   `yield`
*   [简单语句](http://docs.python.org/reference/simple_stmts.html)
    *   `assert`
    *   `break`
    *   `continue`
    *   `del`
    *   `exec`
    *   `from`
    *   `global`
    *   `import`
    *   `pass`
    *   `print`
    *   `raise`
    *   `return`
*   [复合语句](http://docs.python.org/reference/compound_stmts.html)
    *   `class`
    *   `def`
    *   `elif`
    *   `except`
    *   `finally`
    *   `try`
    *   `while`
    *   `with`
*   杂项
    *   `as`（仅用作`from`,`import`和`with`语句的一部分，从不单独使用）
*   多种用途：
    *   `else`（可以是表达式或复合语句的一部分）
    *   `for`（可以是表达式或复合语句的一部分）
    *   `if`（可以是表达式或复合语句的一部分）
    *   `in``for`（可以是二元运算符，或在表达式或语句中配对）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:05:45.070

[Python 2.7 快速参考](http://rgruet.free.fr/PQR27/PQR2.7.html)可能是您正在寻找的内容。

还有官方[的 The Python Language Reference](http://docs.python.org/reference/)。

David Beazley 的[Python Essential Reference，第 4 版](http://www.dabeaz.com/per.html)一书可能与您正在寻找的最接近，但仅以书本形式存在（有电子书版本）。

# model-view-controller - EXT.net - 通过实体的网格面板，带有下拉菜单、日期、引脚编辑和删除

> ID：12964305
> 
> 赞同：1
> 
> 时间：2012-10-18T21:48:53.830
> 
> 标签：model-view-controller, extjs, ext.net, gridpanel

标题听起来很拗口，所以让我试着解释一下。我非常擅长开发 Web 表单，这是我使用框架和 MVC 的第二次尝试（不要问第一个）。从这样的表开始：

Title: Milestones
Id int - Auto, PK
Project_Id int - FK, 许多里程碑到一个项目，暂时提供静态
Number int
Name varchar(50)
Status_Id int - FK 一个状态到一个里程碑
PlannedDate date
LatestEstimate date
MilestoneType_ID int - FK 一种类型到一个里程碑

这些都位于 SQL 服务器上，由实体拉入，然后由 ObjectDataSource 拉入，如下所示：

```
 <asp:ObjectDataSource runat="server" ID="MilestonesObjectSource" SelectMethod="GetByProject"
        DeleteMethod="DeleteMilestone" TypeName="TCProjectManagement.Models.MilestonesAddition">
        <SelectParameters>
            <asp:Parameter DefaultValue="6" Name="ProjectID" Type="Int32" />
        </SelectParameters>
        <DeleteParameters>
            <asp:Parameter Type="Int32" Name="Id" />
        </DeleteParameters>
        <UpdateParameters>
            <asp:Parameter Type="Int32" Name="Id" />
            <asp:Parameter Type="Int32" Name="Number" />
            <asp:Parameter Type="String" Name="Name" />
            <asp:Parameter Type="Int32" Name="Status_Id" />
            <asp:Parameter Type="DateTime" Name="PlannedDate" />
            <asp:Parameter Type="DateTime" Name="LatestEstimate" />
            <asp:Parameter Type="Int32" Name="MilestoneType_ID" />
        </UpdateParameters>
    </asp:ObjectDataSource> 
```

到目前为止，一切都很好。数据拉取似乎没问题。我还有几个专门处理外键的对象源，所以我会跳过那些，因为它们似乎在工作。

我遇到的问题是试图将许多似乎不太协调的例子拼接在一起。我的目标，没有特别的顺序：

1) Pin Editing：点击按钮进行编辑，再次点击确认。与其让某人推断双击以进行更改，不如这样做。到目前为止，这种方法是有效的。
2) 外键下拉菜单：当不在编辑模式时，应显示外键的“名称”字段。在编辑时，它应该是一个下拉选项（只有三个）。尽管我做了什么，这仍然是空白。
3) 删除：按一个按钮删除一行。我把按钮放在那里，但它是用于编辑的 JS 的副本。我需要用什么来删除它？
4）日期：这根本不起作用。奇怪的部分之一是，从 SQL 服务器的 Date 类型，它在实体中更改为 DateTime 并始终保持这种状态。但是，我无法获得所需的 ext:DateField 控制来与提供的数据合作，因为它显示时间并且在编辑时完全空白。我知道我在这里做错了。
5）保存更改：不太确定我是否设置正确（或根本不正确）。

Javascript的规定：

```
<script type="text/javascript">
            var pinEditors = function (btn, pressed) {
                var columnConfig = btn.column,
                column = columnConfig.column;

                if (pressed) {
                    column.pinOverComponent();
                    column.showComponent(columnConfig.record, true);
                } else {
                    column.unpinOverComponent();
                    column.hideComponent(true);
                }
            };
            var pinDeleters = function (btn, pressed) { };
        </script> 
```

和 ASP 代码：

```
 <ext:GridPanel ID="MilestonesGridPanel" runat="server" Title="Milestones" Width="1000px"
        Height="300px">
        <Store>
            <ext:Store ID="MilestonesGridStore" runat="server" DataSourceID="MilestonesObjectSource">
                <Model>
                    <ext:Model runat="server" IDProperty="Id">
                        <Fields>
                            <ext:ModelField Name="Id" Type="Int" />
                            <ext:ModelField Name="Number" Type="Int" />
                            <ext:ModelField Name="Name" Type="String" />
                            <ext:ModelField Name="Status_Id" Type="Int" />
                            <ext:ModelField Name="PlannedDate" />
                            <ext:ModelField Name="LatestEstimate" />
                            <ext:ModelField Name="MilestoneType_ID" Type="Int" />
                        </Fields>
                    </ext:Model>
                </Model>
            </ext:Store>
        </Store>
        <ColumnModel>
            <Columns>
                <ext:Column ID="IdColumn" runat="server" DataIndex="Id" Text="DBID" Visible="false" />
                <ext:ComponentColumn ID="NumberColumn" runat="server" DataIndex="Number" OverOnly="true"
                    Pin="true" Flex="1" Text="Number" Editor="true">
                    <Component>
                        <ext:NumberField ID="NumberColumnNumberField" runat="server" />
                    </Component>
                </ext:ComponentColumn>
                <ext:ComponentColumn ID="NameColumn" runat="server" DataIndex="Name" OverOnly="true"
                    Pin="true" Flex="1" Text="Name" Editor="true">
                    <Component>
                        <ext:TextField ID="NameColumnTextField" runat="server" />
                    </Component>
                </ext:ComponentColumn>
                <ext:ComponentColumn ID="StatusColumn" runat="server" DataIndex="Status_Id" OverOnly="true"
                    Pin="true" Flex="1" Text="Status" Editor="true">
                    <Component>
                        <ext:ComboBox ID="StatusColumnDropDownBox" runat="server" QueryMode="Local" Editable="false"
                            StoreID="MilestoneStatusStore" DisplayField="Name" ValueField="ID" EmptyText="Empty" />
                    </Component>
                </ext:ComponentColumn>
                <ext:ComponentColumn ID="PlannedDateColumn" runat="server" DataIndex="PlannedDate"
                    OverOnly="true" Pin="true" Flex="1" Text="Planned Date" Editor="true">
                    <Renderer Format="Date" FormatArgs="'m/d/y'" />
                    <Component>
                        <ext:DateField ID="PlannedDateColumnTextField" runat="server" Format="MM/dd/yyyy"
                            EmptyText="Empty" />
                    </Component>
                </ext:ComponentColumn>
                <ext:ComponentColumn ID="LatestEstimateColumn" runat="server" DataIndex="LatestEstimate"
                    OverOnly="true" Pin="true" Flex="1" Text="Latest ETA" Editor="true">
                    <Renderer Format="Date" FormatArgs="'m/d/y'" />
                    <Component>
                        <ext:DateField ID="LatestEstimateColumnTextField" runat="server" Format="MM/dd/yyyy"
                            EmptyText="Empty" />
                    </Component>
                </ext:ComponentColumn>
                <ext:ComponentColumn ID="MilestoneTypeColumn" runat="server" DataIndex="MilestoneType_ID"
                    OverOnly="true" Pin="true" Flex="1" Text="Milestone Type" Editor="true">
                    <Component>
                        <ext:ComboBox ID="MilestoneTypeColumnComboBox" runat="server" QueryMode="Local" Editable="false"
                            StoreID="MilestoneTypesStore" DisplayField="Name" ValueField="ID" EmptyText="Empty" />
                    </Component>
                </ext:ComponentColumn>
                <ext:ComponentColumn ID="EditColumn" runat="server" Width="30" PinAllColumns="false"
                    AutoWidthComponent="false" OverOnly="true" Text="Edit" Sortable="False">
                    <Component>
                        <ext:Button ID="EditButton" runat="server" ToolTip="Pin Editors" Icon="Pencil" AllowDepress="true"
                            EnableToggle="true" Width="25">
                            <Listeners>
                                <Toggle Fn="pinEditors" />
                            </Listeners>
                        </ext:Button>
                    </Component>
                </ext:ComponentColumn>
                <ext:ComponentColumn ID="DeleteColumn" runat="server" Width="30" PinAllColumns="false"
                    AutoWidthComponent="false" OverOnly="true" Text="Delete" Sortable="False">
                    <Component>
                        <ext:Button ID="DeleteButton" runat="server" ToolTip="Delete Milestone" Icon="Delete"
                            AllowDepress="true" EnableToggle="false" Width="25">
                            <Listeners>
                                <Click Handler="#{MilestonesGridStore}.remove(this.parentMenu.dataRecord)" />
                            </Listeners>
                        </ext:Button>
                    </Component>
                </ext:ComponentColumn>
            </Columns>
        </ColumnModel>
        <SelectionModel>
            <ext:RowSelectionModel runat="server" Mode="Single">
                <Listeners>
                    <Select Handler="#{DeleteMilestoneGridButton}.enable();" />
                    <Deselect Handler="if (!#{MilestonesGridPanel}.selModel.hasSelection()) { 
                                #{DeleteMilestoneGridButton}.disable();
                                       }" />
                </Listeners>
            </ext:RowSelectionModel>
        </SelectionModel>
        <Buttons>
            <ext:Button ID="AddtoMilestoneGridButton" runat="server" Text="Insert" Icon="Add">
                <Listeners>
                    <Click Handler="#{MilestonesGridStore}.insert(0, {}); #{MilestonesGridPanel}.editingPlugin.startEditByPosition({row:0, column:0});" />
                </Listeners>
            </ext:Button>
            <ext:Button ID="DeleteMilestoneGridButton" runat="server" Text="Delete" Icon="Delete"
                Disabled="true">
                <Listeners>
                    <Click Handler="#{MilestonesGridPanel}.deleteSelected();
                                    if (!#{MilestonesGridPanel}.hasSelection()) {
                                        #{DeleteMilestoneGridButton}.disable();
                                    }" />
                </Listeners>
            </ext:Button>
            <ext:Button ID="RefreshMilestonesGridButton" runat="server" Text="RefresH" Icon="Reload">
                <Listeners>
                    <Click Handler="#{MilestonesGridStore}.load();" />
                </Listeners>
            </ext:Button>
            <ext:Button ID="SaveMilestoneGridButton" runat="server" Text="Save" Icon="Disk">
                <Listeners>
                    <Click Handler="#{MilestonesGridStore}.sync();" />
                </Listeners>
            </ext:Button>
        </Buttons>
    </ext:GridPanel> 
```

# c - 用 C 读/写文件

> ID：12964306
> 
> 赞同：7
> 
> 时间：2012-10-18T21:49:17.410
> 
> 标签：c, unix-ar

我正在用 C 编写一个程序，它基本上为给定的文件名列表创建一个存档文件。`ar`这与linux中的命令非常相似。这是存档文件的样子：

```
!<arch>
file1.txt/      1350248044  45503 13036 100660  28        `
hello
this is sample file 1
file2.txt/      1350512270  45503 13036 100660  72        `
hello
this is sample file 2
this file is a little larger than file1.txt 
```

但是我在尝试从档案中提取文件时遇到了困难。假设用户想要提取`file1.txt`. 这个想法是它应该获取**文件名的索引/位置**（在本例中为 file1.txt），**跳过 58 个字符**以到达文件的内容，读取内容，并将其写入新文件。所以这是我的问题：

1) 如何获取存档文件中文件名的索引/位置？请注意，不允许有重复的文件名，所以我不必担心有两个不同的问题。

2）读取文件时如何跳过几个字符（在本例中为 58）？

3）我怎样才能确定文件内容何时结束？即我需要它来阅读内容并在`file2.txt/`标题之前停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:53:41.600

我解决这个问题的方法是：

要有一个包含每个文件大小、名称和在文件中的位置的标题信息。

然后解析标头，使用`fseek() and ftell()`as`fgetc()`或`fread()`函数来获取文件的字节，然后创建+写入该数据。这是我能想到的最简单的方法。

[http://en.wikipedia.org/wiki/Ar_(Unix)#File_header](http://en.wikipedia.org/wiki/Ar_(Unix)#File_header) <- ar 档案的标题。

示例：@programmer93 考虑您的标头长度为 80 个字节（标头包含存档文件的元数据）。您有两个文件，一个是 112 字节，另一个是 182 字节。现在它们被放置在一个平面文件（存档文件）中。所以它将是 80(header).112(file1.txt).182(file2.txt).EOF 。因此，如果您知道每个文件的大小，则可以轻松导航（使用 fseek()）到特定文件并仅提取该文件。[提取 file2.txt 我将只`fseek(FILE*,(112+80),SEEK_SET);`然后 fgetc() 182 次。我想我说清楚了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:52:05.413

如果无法通过添加额外的标题信息来更改文件的格式以提供帮助，则您必须搜索它并随时解决问题。

这不应该太难。只需读取文件，当您读取标题行时，例如

```
file1.txt/      1350248044  45503 13036 100660  28        ` 
```

您可以检查文件名和大小等（您知道在 之后的开头会有一个标题行`!<arch>`）。如果这是您想要的文件，`ftell()` stdio.h 中的函数会告诉您您在文件中的确切位置。由于文件大小以字节为单位在标题行中给出，您可以通过以正常方式提前读取特定数量的字节来读取文件。同样，如果它不是您想要的文件，您可以使用`fseek()`向前移动您正在跳过的文件中的字节数，并准备好读取下一个文件的标题信息并重复该过程。

# php - 是否可以从 PDOStatement 对象中获取表？

> ID：12964307
> 
> 赞同：8
> 
> 时间：2012-10-18T21:49:26.487
> 
> 标签：php, database, pdo

假设我有一个`PDOStatement`通过 生成的对象`PDO->query($query)`，是否可以获得执行它的表？

像这样的东西：

```
<?php
$statement = $pdo->query('SELECT * FROM `foo`;');
echo $statement->xyz;
// foo 
```

我完全知道您可以使用`$query->getColumnMeta(0)['table']`它来执行此操作，但[正如 docs 所述](http://php.net/manual/en/pdostatement.getcolumnmeta.php)，它不是很安全。这需要适用于所有 PDO 驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-10T16:51:35.400

您可以使用检索关联数组的 PDOStatement 检索表的名称。值 ['name'] 是表的名称。

```
 $select = $conn_pdo->query('SELECT * FROM foo');
    $meta = $select->getColumnMeta(0);
    echo "Name of table: ".$meta['table']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:56:19.353

您不能简单地存储查询中使用的字符串并使用简单的字符串操作来访问表吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:55:35.013

您可以检查查询字符串：

```
$statement->queryString 
```

请记住，SQL 查询可能引用多个表，或者没有表，因此没有“执行它的表”。您可以在查询字符串上使用正则表达式来查找标准查询（`SELECT`、`INSERT`、`UPDATE`、`DELETE`）引用的第一个表，但这可能并不完美。

或者，使用模型来访问您的数据，您将始终知道模型定义访问了哪些表。

# c# - 成员资格远程连接字符串在 SQL Server Management Studio 中有效，但在 ASP.NET 中无效（错误 26）

> ID：12964313
> 
> 赞同：3
> 
> 时间：2012-10-18T21:50:40.350
> 
> 标签：c#, asp.net, sql, connection-string

我在将 ASP.NET 的默认成员连接字符串更改为远程连接字符串时遇到问题。这是我尝试使用的连接字符串：

```
Data Source=myserver.com;Integrated Security=True;Initial Catalog=database_name;User ID=username;Password=password 
```

该数据库托管在共享主机上，并且可以通过 SQL Server Management Studio 访问，我还使用记事本方法测试了完全相同的连接字符串等等......

所以，我几乎可以肯定问题不是我的连接字符串，而是`web.config`. 这是`web.config`文件：

[http://pastebin.com/JsATXqW7](http://pastebin.com/JsATXqW7)。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpRuntime targetFramework="4.5" requestValidationMode="4.5" encoderType="System.Web.Security.AntiXss.AntiXssEncoder, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <machineKey compatibilityMode="Framework45" />
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership>
      <providers>
        <add connectionStringName="RemoteDB" enablePasswordRetrieval="false"
          enablePasswordReset="true" requiresQuestionAndAnswer="false"
          requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6"
          minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
          applicationName="/" name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </providers>
    </membership>
    <roleManager>
      <providers>
        <add connectionStringName="RemoteDB" applicationName="/"
          name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </providers>
    </roleManager>
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="RemoteDB" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
  <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-SkypeSpammerWeb-20121018205959;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-SkypeSpammerWeb-20121018205959.mdf" />
    <add name="RemoteDB" providerName="System.Data.SqlClient" connectionString="Data Source=xxxxxxx.com;Integrated Security=True;Initial Catalog=xxxxxx;User ID=xxxxxx;Password=xxxxxxxx"/>
  </connectionStrings>
</configuration> 
```

这是我收到的错误的屏幕截图：

![http://postimage.org/image/3vd3dbahf/](../Images/46c18afca6e15971776a3b777e512b54.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:01:17.770

您需要更改为：

```
<membership defaultProvider="DefaultMembershipProvider">
    <providers>
        <clear/>
        <add ... 
```

我还注意到您的连接字符串有`Data Source=xxxxxxx.com`，我假设您只是将其阻止发布，但它真的以 .com 结尾吗？您确定完全限定的 .com 地址可以从您的 Web 服务器解析吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:18:20.277

我认为您应该删除“Integrated Security=True”，我认为共享主机不会使用您的 Windows 帐户和密码。

# ruby-on-rails - 优雅地处理 DoubleRenderError / 是否可以“丢弃”以前的渲染？

> ID：12964318
> 
> 赞同：2
> 
> 时间：2012-10-18T21:50:53.210
> 
> 标签：ruby-on-rails

我的 rails 应用程序在 application_controller 中有一个全局救援方法，它可以捕获任何错误并显示一个漂亮的 500 页面。

这适用于大多数异常，但我找不到优雅处理 DoubleRenderError 的方法。渲染漂亮的 500 页面似乎是不可能的，因为尝试这样做会从全局救援方法中抛出一个新的 DoubleRenderError。

有人知道“扔掉”以前的渲染的方法，这样我就可以渲染 500 页吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T11:39:54.630

你应该能够构建你的代码，这样这种类型的错误是不可能的——你是如何设法在同一个动作中获得 2 个渲染的？

# c - pthreads：使用多个线程计算连续的素数

> ID：12964325
> 
> 赞同：2
> 
> 时间：2012-10-18T21:51:18.803
> 
> 标签：c, multithreading, operating-system, pthreads

我试图让示例代码工作，以便多个线程将计算连续素数的总和（请注意，原作者的连续素数计算算法非常低效）。到目前为止，运行单元测试显示输出是不一致的，即每次运行程序时它都会略有变化。我将在 C 中发布修改后的源代码，以及用于调试目的的输出。

来源：

```
/************************************************************************
 * Code listing from "Advanced Linux Programming," by CodeSourcery LLC  *
 * Copyright(C) 2001 by New Riders Publishing                           *
 * See COPYRIGHT for license information.                               *
 ***********************************************************************/

/*
 * Modified By : Dylan Gleason
 * Class       : CST 352 - Operating Systems
 * Date        : 10/18/2012
 */

#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>

#define DEBUG 0  /* Set to 1 to enable debug statements */

/* global variables to be accessed by each thread */
int current_sum = 2;
int primes_to_compute = 0;

/* create mutex for ensuring serial access to global data */
int thread_flag;
pthread_cond_t cond;
pthread_mutex_t lock;

/* print the thread info for debugging purposes */
void print_thread_info() 
{
   printf("Current thread ID        : %u\n",(unsigned int*)pthread_self());
   printf("Current sum of primes    : %d\n", current_sum);
   printf("Current prime to compute : %d\n\n", primes_to_compute);
}

/* initialize the mutex and return an integer value to determine if
   initialization failed or not */
int initialize_mutex()
{
   int success = 1;

   if(pthread_mutex_init(&lock, NULL) == 0 &&
      pthread_cond_init(&cond, NULL) == 0)
      success = 0;
   thread_flag = 0;

   return success;
}

/* set the value of the wait thread flag to the value which the client
   passes */
void set_thread_flag(int is_waiting)
{
   pthread_mutex_lock(&lock);   /* lock mutex */

   /* set the wait flag value, and then signal in case the prime
      function is blocked, waiting for flag to become set. However,
      prime function can't actually check flag until the mutex is
      unlocked */
   thread_flag = is_waiting;
   pthread_cond_signal(&cond);   
   pthread_mutex_unlock(&lock); /* unlock mutex */
}

void in_wait()
{
   while(!thread_flag)
      pthread_cond_wait(&cond, &lock);
}

/* Compute successive prime numbers(very inefficiently). Return the
   Nth prime number, where N is the value pointed to by *ARG. */
void* compute_prime(void* arg)
{   
   while(1)
   {
      pthread_mutex_lock(&lock);
      in_wait();
      pthread_mutex_unlock(&lock);

      int sum;
      int factor;
      int is_prime = 1;

      set_thread_flag(0);
      pthread_mutex_lock(&lock);
      sum = current_sum;

      if(DEBUG)
      {
         printf("First lock\n");
         print_thread_info();
      }

      pthread_mutex_unlock(&lock);
      set_thread_flag(1);          /* tell next thread to go! */

      /* wait until ready-flag is released from current thread */
      pthread_mutex_lock(&lock);
      in_wait();
      pthread_mutex_unlock(&lock);

      /* Test primality by successive division. */
      for(factor = 2; factor < sum; ++factor)
      {  
         if(sum % factor == 0)
         {
            is_prime = 0;
            break;
         }
      }

      /* Is this the prime number we're looking for? */
      if(is_prime)
      {
         int number;

         set_thread_flag(0);
         pthread_mutex_lock(&lock);

         /* only decrement primes_to_compute if is greater than zero! */
         if(primes_to_compute > 0)
         {
            --primes_to_compute;
         }       
         if(DEBUG)
         {
            printf("Second lock\n");
            print_thread_info();
         }

         number = primes_to_compute;
         pthread_mutex_unlock(&lock);
         set_thread_flag(1);

         pthread_mutex_lock(&lock);
         in_wait();
         pthread_mutex_unlock(&lock);

         if(number  == 0)
         {
            set_thread_flag(0);
            pthread_mutex_lock(&lock);
            void* sum =(void*) current_sum;

            if(DEBUG)
            {
               printf("Third lock\n");         
               print_thread_info();
            }

            pthread_mutex_unlock(&lock);
            set_thread_flag(1);
            return sum;
         }
      }

      set_thread_flag(0);
      pthread_mutex_lock(&lock);
      ++current_sum;

      if(DEBUG)
      {
         printf("Fourth lock\n");
         print_thread_info();
      }

      pthread_mutex_unlock(&lock);
      set_thread_flag(1);
   }

   return NULL;
}

int main(int argc, char* argv[])
{
   int prime;
   pthread_t tid[5];   

   /* Check command-line argument count */
   if(argc != 2)
   {
      printf("Error: wrong number of command-line arguments\n");
      printf("Usage: %s <integer>\n", argv[0]);
      exit(1);
   }

   /* Check to see if mutex initialized correctly */
   if(initialize_mutex() != 0)
   {
      printf("Mutex initialization failed.\n");
      exit(1);
   }

   primes_to_compute = atoi(argv[1]);
   printf("Successive primes to be computed: %d\n\n", primes_to_compute);

   /* Execute five different threads to calculate the prime summation */
   int t = 0;
   set_thread_flag(1);

   for(t; t < 5; ++t)
      pthread_create(&tid[t], NULL, &compute_prime, NULL);

   /* Wait for the prime number thread to complete, then get result. */
   t = 0;
   for(t; t < 5; ++t)
      pthread_join(tid[t],(void*) &prime);

   /* Print the largest prime it computed. */
   printf("The %dth prime number is %d.\n", atoi(argv[1]), prime);

   return 0;
} 
```

单元测试（执行程序五次）：

```
Test successive primes up to 100:

Successive primes to be computed: 100
The 100th prime number is 547.

Successive primes to be computed: 100
The 100th prime number is 521.

Successive primes to be computed: 100
The 100th prime number is 523.

Successive primes to be computed: 100
The 100th prime number is 499.

Successive primes to be computed: 100
The 100th prime number is 541. 
```

请注意，非线程版本的输出如果要计算的连续素数为`100`，则结果将始终为`541`。显然，我无法正确使用上述互斥锁 - 如果有人在这方面有更多经验，我将不胜感激！另外，**请注意**，我不关心实际素数算法的效率/正确性，而是确保线程正确执行并获得一致结果的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:03:50.147

好的，看看你的程序，我想我明白发生了什么。

你有一个比赛条件，而且非常糟糕。你在哪个号码上是由`current_sum`变量决定的。您在每个循环开始时访问它，但在循环结束之前不要增加它。您需要在同一个互斥锁内同时设置然后递增它，否则两个不同的线程将能够提取相同的值，如果它们提取相同的素数，则该素数将被计算两次。

希望这可以帮助。

# javascript - 如何在 JavaScript 中传递列表？

> ID：12964326
> 
> 赞同：0
> 
> 时间：2012-10-18T21:51:22.460
> 
> 标签：javascript, jquery

我正在尝试在 JavaScript 中动态发送一个列表对象（如下所示）。

我正在尝试设置一个接受动态列名的动态网格（而不是对列进行硬编码）

我正在尝试动态创建将由网格使用的列图，如下所示，

```
columMap : {
    'Header' : [
        { title : "Title", field : "Title" },
        { title : "Created", field : "Created" },
        { title : "Created By", field : "CreatedBy.Account" }
    ] 
```

我试过`var list={field : 'Name',title:'Name'}`.. 这适用于一列，但不适用于多列。我也试过数组，没用..有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:54:59.477

`[]`表示一个空数组

`[1, 2, 3]`是三个数字的数组

`[ { a: 1 }, { a: 1 } ]`是一个对象数组

`[ 1, "a", { a: 3 } ]`数组不关心它拥有什么类型

所以...

```
var list = 
[
    {field : 'Name',title:'Name'}
]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:06:19.927

对不起，这是我的错误......当我传递我的列表对象时我忘记删除 [] 因此它无法设置值..

我通过以下列表解决了它..

var list = [{ field: 'Name',title: 'Name' },{ field:'ContextNamePathRaw',title: 'Ownership Hierarchy'} ];

谢谢你的帮助！！！

BB

# jquery - 如何使用 jquery 获取 Ipad 和 Iphones 视口宽度

> ID：12964329
> 
> 赞同：0
> 
> 时间：2012-10-18T21:51:30.863
> 
> 标签：jquery, html, css

如何使用 jquery 获得 Ipad 和 Iphone 视口的正确宽度。因为我的网页比 Ipad 的原始尺寸大，所以它会按比例缩小。我想要做的是将我的内容 div 设置为每个浏览器的宽度，然后将概览设置为隐藏。这适用于桌面浏览器。当我在 Ipad 或 Iphone 中进行测试时，由于 IOS 的缩放，情况就不同了。我想保持这种缩放，但能够检索正确的宽度。我已经尝试过 width 和 outerWidth() 但没有运气。

```
 $(window).resize(function() {
        $('#content').css({width: $(this).outerWidth()});
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:20:04.827

为什么不在 CSS 中使用百分比？

例如，您可以通过以下方式完成您在示例中所做的相同事情：

```
#content { width: 100%; } 
```

编辑：另外，如果你想在不同的设备上完成不同的事情，我建议你阅读 CSS 媒体查询和响应式设计。

例如，假设在您网站的全视图中，您希望内容占据 70% 的宽度，而侧边栏占据其余部分。但是，当有人通过智能手机查看您的网站时，您希望内容占据页面的整个宽度，并且侧边栏位于页面下方，同时也占据整个宽度。你可以这样做：

```
.main-content { width: 70%; float: left; }
.sidebar { width: 30%; float: left;}

@media screen and (max-width: 500px) {
   .main-content, .sidebar { width: 100%; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:56:23.483

你有没有试过这个：

```
$( window ).height();
$( window ).width(); 
```

# list - 在 Haskell 中使用 Bag

> ID：12964330
> 
> 赞同：1
> 
> 时间：2012-10-18T21:51:36.593
> 
> 标签：list, haskell, functional-programming, bag

我的任务是创建一个 Haskell 程序，该程序包含多态数据类型 Bag 的定义和一些简单的函数，例如将列表转换为包并检查两个包是否相同。

我的问题是我是 Haskell 的新手，所以我不确定如何使用 Bags。谁能指出我与包有关的一些资源的方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:15:58.057

*   您可以从阅读[代数](http://www.haskell.org/haskellwiki/Algebraic_data_type)数据类型开始。
*   首先尝试实现一个简单的代数数据类型，比如树，然后你可以去实现你自己的 Bag 数据类型。如果您有任何问题，您可以随时在这里提问。
*   如果这不是家庭作业，那么您可以使用已经实现的包或使用`Data.Map`来实现相同的包。

我已经给出了`Data.Map`用于比较您的实现的定义，我想您将使用自己的代数数据类型编写它。

```
import qualified Data.Map as M
import Data.Map (Map)

newtype Bag a = Bag (Map a Int)
    deriving (Show,Eq)

empty :: Bag a
empty = Bag $ M.empty

singleton :: a -> Bag a
singleton a = Bag $ M.singleton a 1

fromList :: (Ord a) => [a] -> Bag a
fromList = foldl f empty
    where
        f (Bag map) x = Bag $ M.insertWith (+) x 1 map

toList :: Bag a -> [a]
toList (Bag m) = concatMap f $ M.toList m
    where f (a,b) = replicate b a 
```

我已经定义了一些非常基本的功能，但是你可以做你要求的事情以及更多，比如

```
*Main> let x = fromList [1,2,3,2,2,1]
*Main> x
Bag (fromList [(1,2),(2,3),(3,1)])
*Main> let y = fromList [1,1,2,2,2,3]
*Main> y
Bag (fromList [(1,2),(2,3),(3,1)])
*Main> x==y
True 
```

# java - 在 Java 更新 2012-006 之后恢复 Apple 的 JavaAppletPlugin.plugin

> ID：12964331
> 
> 赞同：2
> 
> 时间：2012-10-18T21:52:00.477
> 
> 标签：java, macos, updates

因此，我发现在应用 Apple 于 2012 年 10 月 16 日发布的 Java 更新后，我的一些 Java Web 应用程序已经停止运行。

[技术说明](http://support.apple.com/kb/HT5493%20tech%20notes)表明 Apple 已从 OS X 中删除了 Web 应用程序插件，您需要直接从 Oracle 下载它。

这样做的问题是 Oracle 只提供了 7x 版本的插件，而我的应用程序需要 6x 版本，而我一直找不到。

那么，谁能指出我在哪里可以找到我认为在被销毁之前存在于 /Library/Internet Plug-Ins/ 中的 JavaAppletPlugin.plugin 的副本？

不，供应商不可能很快提供与 Java 7 兼容的软件更新版本。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:02:56.467

同样的问题，Mac 版 google chrome 是 32 位的，不支持 Java 7。试试这个：

```
sudo ln -s /System/Library/Java/Support/CoreDeploy.bundle/Contents/JavaAppletPlugin.plugin /Library/Internet\ Plug-Ins/JavaAppletPlugin.plugin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:24:51.403

你试过[http://sourceforge.net/projects/javaplugin/](http://sourceforge.net/projects/javaplugin/)

您也可以尝试手动将旧版本的插件包复制到新版本上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:10:31.110

花了一段时间才找到这个问题，但可以通过 Apple 的帮助台文章找到解决此问题的方法：http: [//support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)

**这里有一点需要注意。**我发现即使在执行了这些步骤之后，我在尝试从 Mac OSX 用户界面中打开 .jnlp 文件时仍然遇到问题。要成功加载 java web start 程序，您可能必须切换到终端然后执行以下代码（username$ 只是终端新手的提示）：

```
username$ javaws /path/to/file.jnlp 
```

如果您有任何疑问，请联系我。

# r - igraph 两个顶点之间的边

> ID：12964332
> 
> 赞同：2
> 
> 时间：2012-10-18T21:52:05.597
> 
> 标签：r, graph, igraph, social-graph, sna

我是 R 和 igraph 的新手，我想知道是否有人可以帮助我解决以下问题。

我想找到图中两个顶点之间的边权重。我的图形结构由正常的自我（node1）、alter（node2）和它们之间的边的权重定义。

我知道我可以使用**E(igraph_friendship) [ from(5) ]$weight 获得**源自节点号 5 的边列表中每个边的权重 并且我可以找到每个边的权重使用**E(igraph_friendship) [ to(10) ]$weight**到节点 10 结束的边列表

 **但是，如果我只想找到仅连接节点 5 和节点 10 的边的权重怎么办？

或者，如果我可以在所有边的列表中获得连接节点 5 和 10 的边的标识符**E(igraph_friendship)**，那也可以。

非常感谢您的帮助，我一直在寻找它，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:26:22.380

这在 igraph 0.6 及更高版本中实际上非常简单，因为您可以将图形视为邻接矩阵（或在您的情况下为加权邻接矩阵）：

```
library(igraph)
g <- graph.ring(10)
g[1,2]
# [1] 1
E(g)$weight <- runif(ecount(g))
g[1,2]
# [1] 0.8115639 
```

如果你想为整个矩阵做这个，那么你可以简单地做

```
g[] 
```

或者，如果您不想要稀疏矩阵，那么

```
g[sparse=FALSE] 
```

请查看`?"[.igraph"`更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:46:17.137

Gabor 对邻接矩阵的使用有所帮助。然而，我花了一段时间才弄清楚如何将我的带有权重的边缘列表放入邻接矩阵中。我尝试使用 graph.data.frame 以通常的方式执行此操作，但是当我尝试将 igraph 对象转换为邻接矩阵时会出现奇怪的错误（错误：.M.kind(x) 中的错误：尚未为矩阵实现w/ typeof 字符）。这篇文章帮助解决了这个问题：[https](https://sites.google.com/site/daishizuka/toolkits/sna/weighted-edgelists) ://sites.google.com/site/daishizuka/toolkits/sna/weighted-edgelists 。

但是，我从 R 帮助电子邮件列表中发现最有效的是直接在 igraph 对象上的这个简单运算符：E(g)[5 %--% 10]$weight。有关详细信息，请参阅[http://igraph.sourceforge.net/doc/R/iterators.html](http://igraph.sourceforge.net/doc/R/iterators.html)**

# java - 使用匿名引用，我可以从中提取数据吗？

> ID：12964335
> 
> 赞同：1
> 
> 时间：2012-10-18T21:52:20.417
> 
> 标签：java, user-interface

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
public class GUI extends JFrame{
        String fields[] = {"Name", "Address 1", "Address 2", "City", "State", "Zip Code"};
        ArrayList<JPanel> pannelArray;
        public GUI(){
            pannelArray = new ArrayList<JPanel>();
            addJPanels();
            for(int i = 0; i<pannelArray.size(); ++i){
                add(pannelArray.get(i));
            }

        }

        public static void main(String[] args){
            GUI window = new GUI();
            window.setLayout(new GridLayout(7, 1));
            window.setTitle("Enter Your Shipping Address");
            window.setLocationRelativeTo(null);
            window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            window.setSize(400, 800);
            window.setVisible(true);
        }

        public void addJPanels(){
            for(int i = 0; i<fields.length; ++i){
                JPanel panel = new JPanel();
                panel.setLayout(new GridLayout(1,2));
                panel.add(new JLabel(fields[i]));
                panel.add(new JTextField(""));
                pannelArray.add(panel);
            }
            JPanel panel = new JPanel();
            panel.add(new JButton("cancel"));
            panel.add(new JButton("okay"));
            pannelArray.add(panel);
        } 
```

我使用该代码为我的班级创建了一个简单的 GUI。以下问题要求我实现 GUI 以使用 JTextAreas 中的信息创建一个类。我很清楚如何从 JTextArea 中提取数据，但是当我使用匿名引用时，我不确定它是否可能了。如果没有，我需要回到绘图板上，看看我如何才能完成这项工作。一个正确方向的简单点会很棒，我不会要求任何人为我做功课。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:02:15.600

您已经在使用一个`String`数组`fields`，为什么不创建一个数组`JTextFields`：

```
JTextField[] textFields = new JTextField[fields.length]; 
```

# php - 如何从 Symfony2 服务类发送电子邮件？

> ID：12964342
> 
> 赞同：9
> 
> 时间：2012-10-18T21:53:00.443
> 
> 标签：php, email, symfony

我可以成功使用以下代码从控制器发送电子邮件：

```
$message = \Swift_Message::newInstance()
    ->setSubject('Hello Email')
    ->setFrom('send@example.com')
    ->setTo('recipient@example.com')
    ->setBody($this->renderView('HelloBundle:Hello:email.txt.twig', array('name' => $name)))
;
$this->get('mailer')->send($message); 
```

我必须如何修改代码才能从服务类中使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T22:26:08.880

您的服务具有外部依赖性，尤其是邮件服务。您可以注入服务容器本身，也可以注入邮件服务。

如果您的服务只需要邮件服务而不需要其他服务，我建议只注入邮件服务。

以下是配置 DIC 以使用 setter 注入邮件服务的方法：

```
<service id="my.service" class="Acme\DemoBundle\Service\Hello">
    <call method="setMailer">
        <argument type="service" id="mailer" />
    </call>
</service> 
```

在您的班级中，编写您的二传手：

```
class Hello
{
    protected $mailer;

    public function setMailer($mailer)
    {
        $this->mailer = $mailer;
    }

    public function sendEmail()
    {
        $message = \Swift_Message::newInstance()
            ->setSubject('Hello Email')
            ->setFrom('send@example.com')
            ->setTo('recipient@example.com')
            ->setBody($this->renderView('HelloBundle:Hello:email.txt.twig', array('name' => $name)))
        ;
        $this->mailer->send($message);
    }
} 
```

注意：您必须在控制器中渲染模板并传递给此电子邮件功能，或者注入模板服务并在您的服务中渲染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:12:58.113

这取决于您如何声明服务。如果您将整个服务容器传递给它，则无需更改任何内容，否则您至少需要将邮件和模板服务传递给它并更直接地调用（`$this->get('service')`将导致致命错误，因为它取决于`container`）

另请参阅[https://stackoverflow.com/a/12905319/258674](https://stackoverflow.com/a/12905319/258674)

# css - jquery mobile，文本位于带有计数气泡的listview后面

> ID：12964344
> 
> 赞同：0
> 
> 时间：2012-10-18T21:53:06.260
> 
> 标签：css, jquery-mobile

我创建了一个列表视图，其中包含一个计数气泡和每个 li 的项目描述。问题是描述文本落后于计数气泡。这是一个小故障还是我可以用css纠正的东西？

```
echo '<li><a value="' . $row['product_id'] . '" data-icon="arrow-r" data-iconpos="right"><img src="images/' . $row['product_picture_name'] . '.png">' . '<h3>' . $row['product_name'] . '</h3><p style="white-space:normal">' . $row['product_description'] . '</p><span class="ui-li-count">Price: $' . $row['product_price'] . '</span></a></li>'; 
```

谢谢，亚当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:09:34.687

I ended up adding the width property to the p tag of 90%, and the text will start wrapping before it gets to the count bubble position and it scales with different screens sizes.

```
echo '<li><a value="' . $row['product_id'] . '" data-icon="arrow-r" data-iconpos="right"><img src="images/' . $row['product_picture_name'] . '.png">' . '<h3>' . $row['product_name'] . '</h3><p style="white-space:normal; **width:90%;**">' . $row['product_description'] . '</p><span class="ui-li-count">Price: $' . $row['product_price'] . '</span></a></li>'; 
```

# objective-c - 在一层上绘制多个 UIView

> ID：12964346
> 
> 赞同：1
> 
> 时间：2012-10-18T21:53:18.820
> 
> 标签：objective-c, ios, uiview, core-graphics

是否可以在单个 CALayer 上使用自定义绘图绘制多个 UIView，这样它们就没有后备存储？

更新：

我有几个相同大小的 uiviews 具有相同的超级视图。现在他们每个人都有自定义绘图。由于尺寸很大，他们在 iPad 3 上创建了 600-800 mb 的后备存储。所以我想在一个视图上编写它们的输出，并且消耗的内存要少几倍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:08:43.530

每个视图都有自己的图层，您无法更改它。

您可以启用`shouldRasterize`展平视图层次结构，这在某些情况下可能会有所帮助，但这需要 gpu 内存。

另一种方法是创建图像上下文并将绘图合并到图像中并将其设置为图层内容。

在去年的一个 wwdc 会议视频中，一个关于绘图的视频展示了一个绘图应用程序，其中许多笔画被转移到图像中以加快绘图速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:15:02.457

由于视图将共享相同的后备存储，我假设您希望它们共享由图层的自定义绘图产生的相同图像，对吗？我相信这可以通过类似的方法来完成：

```
// create your custom layer
MyCustomLayer* layer = [[MyCustomLayer alloc] init];

// create the custom views
UIView* view1 = [[UIView alloc] initWithFrame:CGRectMake( 0, 0, layer.frame.size.width, layer.frame.size.height)];
UIView* view2 = [[UIView alloc] initWithFrame:CGRectMake( 100, 100, layer.frame.size.width, layer.frame.size.height)];

// have the layer render itself into an image context
UIGraphicsBeginImageContext( layer.frame.size );
CGContextRef context = UIGraphicsGetCurrentContext();
[layer drawInContext:context];
UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// set the backing stores (a.k.a the 'contents' property) of the view layers to the resulting image
view1.layer.contents = (id)image.CGImage;
view2.layer.contents = (id)image.CGImage;

// assuming we're in a view controller, all those views to the hierarchy
[self.view addSubview:view1];
[self.view addSubview:view2]; 
```

# r - 将聚合变量合并为 R 中的一个变量

> ID：12964349
> 
> 赞同：1
> 
> 时间：2012-10-18T21:53:36.813
> 
> 标签：r

我正在使用此代码将 100 个日期组合成各自的月份：

```
cpkmonthly <- aggregate(mydf$AVG, na.rm=TRUE, list(month=months(as.Date(mydf$DATETIME))), mean) 
```

这是 R 中的输出：

```
> cpkmonthly
   month         x
1  April 0.4583167
2 August 0.4416660
3   July 0.4436665
4   June 0.4435551
5  March 0.4654443
6    May 0.4523338 
```

我正在寻找一种将某些月份组合成季度的方法。

```
Jan-March = q1
April-June = q2
July-Sep = q3
Oct-Dec = q4 
```

有没有办法做到这一点？

输出应如下所示：

```
> cpkquarterly
   quarter         x
1       q1 0.4583167
2       q2 0.4416660
3       q3 0.4436665
4       q4 0.4435551 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T21:55:21.927

该`zoo`软件包具有执行此操作的功能：

```
library(zoo)
as.yearqtr("2012-06", "%Y-%m")

# [1] "2012 Q2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:09:20.737

目前尚不清楚您想要什么：

```
> require(data.table)
> cpkmonthly <- data.table(month=c("April", "August", "July","June","March","May"),
+ x=c(0.4583167,0.4416660,0.4436665,0.4435551,0.4654443,0.4523338)
+ )
> 
> cpkmonthly
    month         x
1:  April 0.4583167
2: August 0.4416660
3:   July 0.4436665
4:   June 0.4435551
5:  March 0.4654443
6:    May 0.4523338
> 
> quart <- data.table(month=month.name,quarter=rep(1:4, each=3),key="month")
> 
> ###if you just want each row assigned to a quarter:
> quart[cpkmonthly]
    month quarter         x
1:  April       2 0.4583167
2: August       3 0.4416660
3:   July       3 0.4436665
4:   June       2 0.4435551
5:  March       1 0.4654443
6:    May       2 0.4523338
> 
> ###if you want to aggregate in various ways:
> 
> quart[cpkmonthly][,list(x.avg=mean(x),x.max=max(x),x.1=x[1]),by=quarter][order(quarter)]
   quarter     x.avg     x.max       x.1
1:       1 0.4654443 0.4654443 0.4654443
2:       2 0.4514019 0.4583167 0.4583167
3:       3 0.4426663 0.4436665 0.4416660 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T13:44:44.257

我遇到了类似的问题，但我的公司有一个日历，其中季度开始和结束的日期不规则。以下是我如何在自己的数据中解决这个问题。请注意，我的数据集包含 > 5MM 行，因此我使用[`data.table`](http://cran.r-project.org/web/packages/data.table/index.html)而不是 data.frame。

```
# My data is contained in the myDT data.table.
# Dates are contained in the date column.

require("data.table")

Q1FY14 <- myDT[ which(date >= "2013-02-02" & date <= "2013-05-03"), ]
Q2FY14 <- myDT[ which(date >= "2013-05-04" & date <= "2013-08-02"), ]
Q3FY14 <- myDT[ which(date >= "2013-08-03" & date <= "2013-11-01"), ]
Q4FY14 <- myDT[ which(date >= "2013-11-02" & date <= "2014-01-31"), ]
Q1FY15 <- myDT[ which(date >= "2014-02-01" & date <= "2014-05-02"), ]

# Create new vectors.
Q1.14 <- rep("Q1 FY14", nrow(Q1FY14))
Q2.14 <- rep("Q2 FY14", nrow(Q2FY14))
Q3.14 <- rep("Q3 FY14", nrow(Q3FY14))
Q4.14 <- rep("Q4 FY14", nrow(Q4FY14))
Q1.15 <- rep("Q1 FY15", nrow(Q1FY15))

# Add each of my new vectors to their associate data.table.
Q1FY14$quarter <- Q1.14
Q2FY14$quarter <- Q2.14
Q3FY14$quarter <- Q3.14
Q4FY14$quarter <- Q4.14
Q1FY15$quarter <- Q1.15

# Bring it all together.
newDT <- rbind(Q1FY14, Q2FY14)
newDT <- rbind(newDT, Q3FY14)
newDT <- rbind(newDT, Q4FY14)
newDT <- rbind(newDT, Q1FY15)

# Clean up data.
rm(Q1FY14, Q2FY14, Q3FY14, Q4FY14, Q1FY15, Q1.14, Q2.14, Q3.14, Q4.14, Q1.15) 
```

这为每一行添加了正确的季度。我需要进行一些其他的小调整才能使其可用。

```
# Change the column order so that quarter appears next to date.
setcolorder(newDT, c("date", "quarter", ...))

# Change the quarter column to factors.
newDT$quarter <- factor(newDT$quarter) 
```

# windows - 使用 vbs 压缩大文件时遇到问题

> ID：12964355
> 
> 赞同：0
> 
> 时间：2012-10-18T21:53:48.993
> 
> 标签：windows, vbscript, compression

我使用 7za 的命令行实用程序混淆了一个 vbs 脚本来压缩超过 7 天的文件。虽然大多数逻辑工作正常，但我能够将单个文件压缩成单个 zip 文件。

当我尝试将所有匹配文件添加到一个 zip 文件时，就会出现问题。下面是代码片段：

```
strCommand = "7za.exe -mx=9 a " & ObjectFolder & sysDate & ".zip " & strFileName
strRun = objShell.Run(strCommand, 0, True) 
```

现在根据第 2^行，设置`True`将确保脚本将等待命令完成执行。但问题是`7za`立即退出并进入下一个循环，处理下一个文件，因为它试图创建相同的 zip 文件，所以我收到拒绝访问错误。

有人可以帮我解决这个问题吗？

我还在命令提示符下测试了该场景。我所做的是，在单独的提示中同时执行以下 2 个命令：

提示1：C:\7za.exe -mx=9 a test.zip c:\sample1.pdf

提示2：C:\7za.exe -mx=9 a test.zip c:\sample2.pdf

提示 2 导致以下错误：

> 错误：不支持 test.zip 存档
> 
> 系统错误：
> 该进程无法访问该文件，因为它正被另一个进程使用。

这是我在脚本中遇到的相同错误，我需要帮助来解决这个问题。任何指示都会有所帮助！

**更新：**

借助 John 和 Ansgar 提供的出色指示，我能够解决这个问题！原来是我的脚本中的一个错误！在我的脚本中，我在处理文件进行归档之前检查了该文件是否正在被任何其他进程使用。所以我通过打开文件进行检查，使用：

```
Set f = objFSO.OpenTextFile(strFile, ForAppending, True) 
```

但是在继续处理同一个文件之前，我没有在脚本中关闭它，因此出现错误：***该进程无法访问该文件，因为它正在被另一个进程使用***

关闭文件后，一切顺利！

再次感谢我在这里得到的所有大力支持！

为了表示感谢，我将分享整个脚本以供任何人使用。请注意，我不是本文的原作者，我从各种来源收集了它，并对其进行了一些调整以满足我的需要。

# **存档.vbs**

```
Const ForAppending = 8  ' Constant for file lock check

Dim objFSO, objFolder, objFiles, objShell
Dim file, fileExt, fileName, strCommand, strRun, strFile
Dim SFolder, OFolder, Extension, DaysOld, sDate

'''' SET THESE VARIABLES! ''''
SFolder = "C:\SourceFolder\"      'Folder to look in
OFolder = "C:\OutputFolder\"      'Folder to put archives in
Extension = "pdf"        'Extension of files you want to zip
DaysOld = 1        'Zip files older than this many days
''''''''''''''''''''''''''''''

sDate = DatePart("yyyy",Date) & "-" & Right("0" & DatePart("m",Date), 2) & "-" & Right("0" & DatePart("d",Date), 2)

'Create object for playing with files
Set objFSO = CreateObject("Scripting.FileSystemObject")

'Create shell object for running commands
Set objShell = wscript.createObject("wscript.shell")

'Set folder to look in
Set objFolder = objFSO.GetFolder(SFolder)

'Get files in folder
Set objFiles = objFolder.Files

'Loop through the files
For Each file in objFiles
  fileName = Split(file.Name, ".")
  fileExt = fileName(UBound(fileName))
  'See if it is the type of file we are looking for
  If fileExt = Extension Then
    'See if the file is older than the days chosen above
    If DateDiff("d", file.DateLastModified, Now()) >= DaysOld Then
      strFile = file.Path
      'See if the file is available or in use
        Set f = objFSO.OpenTextFile(strFile, ForAppending, True)
        If Err.Number = 70 Then ' i.e. if file is locked

        Else
        f.close
        strFName = objFSO.GetBaseName(file.name)
        strCommand = "C:\7za.exe -mx=9 a " & OFolder & sDate & ".zip " & strFile

        strRun = objShell.Run(strCommand, 0, True)
        'wscript.echo strCommand  ' un-comment this to check the file(s) being processed
        'file.Delete  ' un-comment this to delete the files after compressing.
        End If
    End If

  End If
Next

'Cleanup
Set objFiles = Nothing
Set objFolder = Nothing
Set objFSO = Nothing
Set objShell = Nothing
wscript.Quit 
```

============================

谢谢

——诺曼 A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:03:07.463

不完全符合您的要求，但这是我用于类似任务的批处理脚本，以帮助您解决当前的问题：

ArchiveScriptLog.Bat

```
::ensure we're in the right directory, then run the script & log the output
cls
pushd "c:\backup scripts"
ArchiveScript.bat > ArchiveScript.log
popd 
```

存档脚本.bat

```
::Paths (must include the \ on the end).  There must be no space between the equals and the value
::UNC paths are acceptable

Set FolderToBackup=F:\EnterpriseArchitect\Energy\
Set BackupPath=F:\EnterpriseArchitect\!ARCHIVE\
Set RemoteBackupPath=\\ukccojdep01wok\h$\Energy\cciobis01edc\
Set SevenZip=C:\Program Files (x86)\7-Zip\

::Get DATE in yyyymmdd format; done in two lines to make it easy to change the date format
FOR /F "TOKENS=2,3,4 DELIMS=/ " %%A IN ('echo %Date%') DO (SET mm=%%A&SET dd=%%B&SET yyyy=%%C)
SET strDate=%yyyy%%mm%%dd%

::Set the Backup File to be the backup path with the current date & .zip on the end
Set BackupFile=%BackupPath%%strDate%.zip

::create a zip containing the contents of folderToBackup
pushd %SevenZip%
7z a "%BackupFile%" "%FolderToBackup%"
popd

::go to the archive directory & copy all files in there to the remote location (this accounts for previous errors if the network were unavailable)
pushd "%BackupPath%"
move *.zip "%RemoteBackupPath%"
popd

::delete off backups in the remote location which are older than 90 days
pushd "%RemoteBackupPath%"
forfiles /D -90 /M *.zip /C "cmd /c del @file"
popd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:04:30.523

`7za`您的命令在完成任务之前不应该返回（在我的测试中也没有）。尝试将您的代码更改为以下内容，这样您就可以看到发生了什么：

```
strCommand = "7za.exe -mx=9 a " & ObjectFolder & sysDate & ".zip " & strFileName
strCommand = "%COMSPEC% /k " & strCommand
strRun = objShell.Run(strCommand, 1, True) 
```

引用文件名也可能是一个好主意：

```
Function qq(str)
  qq = Chr(34) & str & Chr(34)
End Function

strCommand = "7za.exe -mx=9 a " & qq(ObjectFolder & sysDate & ".zip") & " " _
  & qq(strFileName) 
```

# batch-file - 增加超过 100 个批处理文件的数量

> ID：12964356
> 
> 赞同：2
> 
> 时间：2012-10-18T21:53:53.140
> 
> 标签：batch-file

我正在尝试为 Windows 7 编写一个批处理文件，该文件将创建 100 个名称为 ex1 到 ex100 的文本文件。在每个文件中，我需要用与文件名相同的文本替换给定的文本（例如 ex3）。

到目前为止，我已经设法获取批处理文件来创建 100 个文件，但是每个文件中的文本（ex3）被 ex1 替换。

这是我使用的代码。我是一个完全的新手，并且从我发现的位中拼凑起来。

```
@echo off
setlocal enabledelayedexpansion

FOR /F "usebackq delims=" %%G IN ("c:\batch\batch.txt") DO (
  Set Line=%%G
  Set Line=!Line:"='!
  Call:replace "!Line!"
)

pause

goto:eof ------------
  :replace subroutine
  (Set Line=%*&Set Line=!Line:~1,-1!)
  Set Line=!Line:'="!

For /l %%A in (7,1,100) do Set "Line=!Line:ex3=ex%%A!"  
For /l %%n in (1,1,100) do echo.!Line! >>"c:\batch\ex%%n.txt"

 goto:eof ------------ 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:36:59.657

Wow - that code is way more convoluted than is needed (and also slow because of CALL).

```
@echo off
setlocal enableDelayedExpansion
set "folder=c:\batch"
for /l %%N in (1 1 100) do del "%folder%\ex%%N.txt" 2>nul
for /f "usebackq delims=" %%A in ("%folder%\batch.txt") do (
  set "line=%%A"
  for /l %%N in (1 1 100) do (echo !line:ex3=ex%%N!)>>"%folder%\ex%%N"
) 
```

# android - 如何从 Android 图库设置个人资料图片应用

> ID：12964357
> 
> 赞同：0
> 
> 时间：2012-10-18T21:54:01.427
> 
> 标签：android, android-intent, imageview, android-gallery

我想要一种简单的方法，其中有一个 ImageView 代表用户个人资料图片。如果他们没有选择一张，则将其设置为默认照片。

我希望他们只需单击它，它就会打开图库，他们可以设置（和裁剪）个人资料图片。该图片不是在 ImageView 中设置的（并在下次打开应用程序时保留在那里——我还使用 Internet MySQL 数据库连接到该数据库，我可能需要将图片存储在其中以便其他用户可以看到。我只需要看看 Android 方面的东西）。

我假设我可能需要使用某种 Intent？我可以查看有关如何执行此操作的基本代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:08:45.010

这是一个关于在图库中使用意图的教程：[http ://www.helloandroid.com/tutorials/gallery-intent-tutorial](http://www.helloandroid.com/tutorials/gallery-intent-tutorial)

# css - 将 CSS 动态 Div 标签调整为静态 Div 标签的问题

> ID：12964361
> 
> 赞同：0
> 
> 时间：2012-10-18T21:54:26.313
> 
> 标签：css, html, dynamic, static, tags

我在考虑静态 div 标签的动态 div 标签方面遇到了很多问题。这是我目前使用的两种样式：

动态 div 标签：

```
div.Display {
width: 95%;
color: #333333;
margin-left: 360px;
background-color: #333333;
height: 100%;
margin-right: 0px;
float: left;
} 
```

静态 div 标签：

```
div.LoginBox {
box-shadow: 0px 0px 3px 0px #000000;
width: 350px;
height: 350px;
background-color: #F0F0F0;
border: 1px solid #DADADA;
clear: none;
float: left;
color: #000000;
margin-left: 0px;
} 
```

我遇到的问题是动态 div 标签的大小不正确。它考虑了剩余边距（360px），但它也默认为 LoginBox div 标签的底部（所以它就像它的顶部边距为 350px）。下面是 Div 标签的实际应用：http: [//ordwurkz.com/](http://ordwurkz.com/)

和 HTML：

```
<body onload="FP_preloadImgs(/*url*/'images/hover/minimize.png',/*url*/'images/click/minimize.png')">

<div class="Page" id="Page">

<div class="LoginContainer" id="LoginContainer">
<div id="divLoginTitleBar" class="TitleBar">
    Login   
    <div id="divTitleButtonBox" class="TitleButtonBox">

        <img id="LoginMinimize" alt="Button Text" onmousedown="FP_swapImg(1,0,/*id*/'LoginMinimize',/*url*/'images/click/minimize.png')" onmouseout="FP_swapImg(0,0,/*id*/'LoginMinimize',/*url*/'images/minimize.png')" onmouseover="FP_swapImg(1,0,/*id*/'LoginMinimize',/*url*/'images/hover/minimize.png')" onmouseup="FP_swapImg(0,0,/*id*/'LoginMinimize',/*url*/'images/hover/minimize.png')" src="images\minimize.png"/><img id="LoginClose" alt="Button Text" onmousedown="FP_swapImg(1,0,/*id*/'LoginClose',/*url*/'images/click/close.png')" onmouseout="FP_swapImg(0,0,/*id*/'LoginClose',/*url*/'images/close.png')" onmouseover="FP_swapImg(1,0,/*id*/'LoginClose',/*url*/'images/hover/close.png')" onmouseup="FP_swapImg(0,0,/*id*/'LoginClose',/*url*/'images/hover/close.png')" src="images\close.png"/></div>
</div>

<div id="divLoginBox" class="LoginBox">
<div id="divLoginContent" class="LoginContent">

<img alt="System Image" src="images/loginsplash.png" />

<form method="post" action="processor\login_processor.do" id="frmLogin">    

    <table id="tblLoginContent" class="LoginContent">
        <tr>
            <td>Username:</td>
            <td>
            <input maxlength="50" name="txtUsrName" size="20" type="text" /></td>
        </tr>
        <tr>
            <td>Password:</td>
            <td>
            <input maxlength="24" name="txtPassword" size="20" type="password" /></td>
        </tr>
        <tr>
            <td><input name="btnLogin" type="submit" value="Login" /></td>
            <td><input name="btnReset" type="reset" value="Reset" /></td>
        </tr>
    </table>
    </form>
</div>
<div class="PlatformVersion">V1.0.0.0</div>
</div>
</div>

<div class="Display"></div>

</div>
<div class="Footer">Contact Us | Terms of Service</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:21:40.907

您是否有机会将 .LoginBox 放在 .Display 中，然后删除 .Display 上的左边距，以便 .LoginBox 浮动到 .Display 内容的左侧？很难说没有看到你的 HTML。

# wxpython - 在 py2exe 中包含图像？

> ID：12964362
> 
> 赞同：0
> 
> 时间：2012-10-18T21:54:27.807
> 
> 标签：wxpython, py2exe

我有一个使用 wx.Bitmap 和一些位图按钮的 wxPython 应用程序。有没有办法包含这些图像，以便 exe 正常运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:23:07.290

您需要在 setup.py 文件中创建一个 data_files 元素：[Creating a Python .exe file: py2exe invalid image error](https://stackoverflow.com/questions/12829261/creating-a-python-exe-file-py2exe-invalid-image-error)

或者，您可以使用 py2exe 或类似的东西（PyInstaller、bbfreeze、cx_freeze）来创建 Python exe，然后使用 Inno Setup 之类的东西将所有内容捆绑到一个不错的安装程序中。

# javascript - 向输入的文本添加常量文本

> ID：12964363
> 
> 赞同：1
> 
> 时间：2012-10-18T21:54:30.447
> 
> 标签：javascript, html, forms, input

我有两个输入字段，人们可以在其中输入数字。我需要的是当一个人在这个输入字段中完成书写时，一些不变的单词或符号会留在他的号码附近。

我认为你没有从我上面写的内容中得到任何东西，所以我将尝试用这个例子来解释：![例子](../Images/59462985af58bef43aa6dc233638206e.png)

在上部有两个输入，您可以看到自己打印的是什么人。当他将光标移出正在打印的输入时，底部的两个输入是他得到的。（我不需要所有四个输入，只需要两个......上两个只显示第一步，下两个显示最后一步）

我认为它可以通过 javascript 来完成......但我自己无法做到，我在网络上找不到任何东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:55:50.660

您需要获取对文本框的引用（尝试 onblur 事件），然后将静态文本附加到 value 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:15:48.210

看看使用 jQuery 的*模糊事件：http:* [//docs.jquery.com/Events/blur#fn](http://docs.jquery.com/Events/blur#fn)

这是一个快速示例：http: [//jsfiddle.net/jDGg9/](http://jsfiddle.net/jDGg9/)

```
<form>
    Field 1: <input id="ip1" type="text" value="" />
    Field 2: <input id="ip2" type="text" value="" />
</form>
$('#ip1').blur(function() {
    $('#ip1').val($('#ip1').val() + ' month');
});

$('#ip2').blur(function() {
    $('#ip2').val($('#ip2').val() + ' month');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:19:49.587

由于您没有指定使用 jQuery，这是一个使用`blur`事件的基本 Javascript 的简单示例（正如每个人都已经指定的那样），尽管使用该事件可能有意义`onchange`：

[http://jsfiddle.net/A9yVv/1/](http://jsfiddle.net/A9yVv/1/)

```
<input type="text" id="text1" value="" />
<br />
<input type="text" id="text2" value="" readonly="readonly" />

var text1 = document.getElementById("text1");
text1.onblur = function () {
    var text2 = document.getElementById("text2");
    text2.value = this.value + " month(s)";
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T23:08:55.817

我之前使用过以下内容，我选择使用图像而不是其他任何内容的原因是因为动态添加到输入中的文本可能会导致混淆，并且会妨碍用户进行编辑。使用图像意味着它可以一直存在并且不会妨碍用户输入：

它只是用 jQuery 编写的，因为它到处都是，这可以很容易地用纯 js 重写 - 并且可以很容易地进行优化。

[http://jsfiddle.net/pafMg/](http://jsfiddle.net/pafMg/)

### CSS：

```
input { 
  border: 1px solid black;
  background: #fff;
  padding: 2px;
} 
```

### 标记：

```
<input class="right-aligned" type="text" />
<input class="left-aligned" type="text" /> 
```

### 代码：

在下面的代码中 padding-left 和 padding-right 必须考虑到您使用的图像的宽度。

```
$(function(){
  /* For left aligned additions */
  $('input.left-aligned')
      .css({
          'padding-left': '20px',
          'background-image': 'url(/favicon.png)',
          'background-position' : '2px center',
          'background-repeat': 'no-repeat'
      });
}); 
```

左对齐的版本非常简单，但是右对齐变得有点复杂：

```
$(function(){
  /* For right aligned additions */
  $('input.right-aligned')
      .bind('keypress keyup', function(e){
          var input = $(this), measure, text = input.val(), x, w, y;
          /// You can calculate text width, but it's not easily cross-browser
          /// easier method, inject the text to a span and measure that instead
          if ( !input.data('measure') ){
              /// only build our measuring span the first time
              measure = $('<span />')
                  .hide() // hide it
                  .appendTo('body')
                  /// try and match our span to our input font
                  /// this could be improved
                  .css({
                      'font-weight':input.css('font-weight'),
                      'font-family':input.css('font-family'),
                      'font-size':input.css('font-size')
                  });
              /// store the measure element for later
              input.data('measure', measure );
          }
          /// handle if the user types white space
          text = text
              .replace(/\s/g,'&nbsp;')
              .replace(/</g,'&gt;');
          measure = input.data('measure');
          measure.html(text);
          w = measure.width();
          y = input.width();
          /// calculate the image position (minus padding)
          x = w + parseInt(input.css('padding-left')) + 2;
          /// take into account the scroll ability of an input
          x -= ( w > y ? w - y : 0 );
          /// reposition our image background on the input
          input
              .css({
                  'padding-right': '20px',
                  'background-image': 'url(/favicon.png)',
                  'background-position' : x + 'px center',
                  'background-repeat': 'no-repeat'
              });
      }).trigger('keyup');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T22:10:52.313

如果[jQuery](http://jquery.com/)可用，这将容易得多，但如果没有，代码可以重写以在没有它的情况下工作。

当一个`input`失去焦点时，会触发[模糊](http://api.jquery.com/blur/)事件，当它重新获得焦点时，会触发[焦点](http://api.jquery.com/focus/)事件。如果您存储原始值（例如，使用 jQuery 的[data](http://api.jquery.com/data/)方法），您可以很容易地完成您的要求：

```
<input type="text" name="months" class="month" />
<input type="text" name="price" class="price" />

<script>
    jQuery(function($) {
        $('.months')
            .blur(function(event) {
                // This code runs when the input with class "months" loses focus
                var originalValue = $(this).val();
                $(this)
                    .data('original-value', originalValue)
                    .val(originalValue + ' months');
            })
            .focus(function(event) {
                // This code runs when the input with class "months" gains focus
                var originalValue = $(this).data('original-value');
                if (typeof originalValue !== 'undefined') {
                    $(this).val(originalValue);
                }
            });

        $('.price')
            .blur(function(event) {
                // This code runs when the input with class "price" loses focus
                var originalValue = $(this).val();
                $(this)
                    .data('original-value', originalValue)
                    .val('$ ' + originalValue);
            })
            .focus(function(event) {
                // This code runs when the input with class "price" gains focus
                var originalValue = $(this).data('original-value');
                if (typeof originalValue !== 'undefined') {
                    $(this).val(originalValue);
                }
            });

        $('form.myform')
            .submit(function(event) {
                // This code runs when the form is submitted
                // Restore the original values, so they are submitted to the server
                $('.months').val($('.months').data('original-value'));
                $('.price').val($('.price').data('original-value'));
            });

    });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T07:16:08.840

我已经在没有 javascript 的情况下完成了这一切......问题是它改变了输入字段的值，但我不需要那个。

所以我刚刚制作了'$'和'month'的图像并将它们作为CSS中的背景添加到输入中......在第一个输入字段中我写了一个属性maxlenth ='3'所以不会写数字在常量文本和第二个字段中，我在 CSS 中完成了 padding-left='15px'。 ![解决方案](../Images/c3df3bd7ba89980ba78fc5edade3e162.png)

感谢大家。

# c++ - `struct`中向量的C ++ ::向量作为另一个向量的数据类型

> ID：12964364
> 
> 赞同：0
> 
> 时间：2012-10-18T21:54:46.560
> 
> 标签：c++, stdvector

我正在从事与物理引擎相关的项目。在下面的 C++ 代码中：

```
#include <iostream>
#include <vector>

struct Vector3
{
  float x;
  float y;
  float z;
};

struct object
{
  std::vector < std::vector < Vector3 > > set_vertices;
  int ID;
  int Type;
};

class World
{
  public:
    std::vector< object > objects;

  private:
    // other members
};

int main (void)
{
  World world;

  // How to fill in "objects" of "world"?
  //   Is this safe to do?
  world.objects.resize(5);
  //   What about the way of allocating "set_vertices" below?
  for(size_t i=0; i<world.objects.size(); i++)
  {
    world.objects[i].set_vertices.resize(12, std::vector < Vector3 >(3));
    for(size_t j=0; j<world.objects[i].set_vertices.size(); j++)
    {
      for(size_t k=0; k<world.objects[i].set_vertices[j].size(); k++)
      {
        world.objects[i].set_vertices[j][k].x = 0.0f;
        world.objects[i].set_vertices[j][k].y = 0.0f;
        world.objects[i].set_vertices[j][k].z = 0.0f;
        world.objects[i].ID = i;
        world.objects[i].Type = 0;
      }
    }
  }

  return 0;
} 
```

我为安全分配内存的方式`objects`是`world`什么？会有任何与内存相关的问题吗？有没有更好的`objects`动态初始化方法（即不在构造函数中）？如果是这样，怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:57:19.583

我想使用 RAII 并使用构造函数和析构函数`object`来处理内存将是一种更好的方法。

添加一个新的`object`世界，您可以通过调用而不需要创建作为索引的循环来利用`std::vector`动态调整大小的能力。如果您事先知道要添加多少元素，为了避免不必要的调整大小，您可以调用where是您要添加的元素的数量。`push_back()``i``.reserve(n)``n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:00:19.193

It's safe.

You could save boilerplate by moving all that filling into a constructor, if appropriate.

You might also be able to find a more efficient approach than levels of nested vectors.

So, it's safe but could still be improved.

# apache-flex - Adobe Flex 移动自定义 SpinnerListContainer

> ID：12964375
> 
> 赞同：0
> 
> 时间：2012-10-18T21:55:21.627
> 
> 标签：apache-flex, mobile, adobe

有谁知道如何更改在 spinnerlistcontainer 中突出显示所选项目的“玻璃”颜色？我发现更改容器内列表的背景颜色，但不是实际容器。我在网上找不到很多自定义微调器列表。在此先感谢您的帮助！

JH

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:03:46.440

您需要为您的组件创建一个自定义皮肤。查看这些链接

[http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb70-316f71c51312e96191c-8000.html#WS19f279b149e7481c-3a8faf061320672b309-7ffd](http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb70-316f71c51312e96191c-8000.html#WS19f279b149e7481c-3a8faf061320672b309-7ffd)

[http://margopowell.wordpress.com/2012/05/28/skinning-the-spinnerlist-for-flex-4-6-mobile/](http://margopowell.wordpress.com/2012/05/28/skinning-the-spinnerlist-for-flex-4-6-mobile/)

# javascript - jQuery切换动画（也有图像）

> ID：12964382
> 
> 赞同：1
> 
> 时间：2012-10-18T21:55:52.657
> 
> 标签：javascript, jquery, animation, onclick, toggle

我想在点击事件上切换两个单独的属性：

1) div 中的图像 - 切换`src`属性

2）div的绝对定位——切换`animate("top":"0px")`位

这是HTML

```
<div id="emailme">
   <a id="email" href="mailto:xxx@gmail.com">xxx@gmail.com</a>
   <div id="emailmecopy">email me</div>
   <img id="emaildown"src="images/downbutton.png">
</div> 
```

现在我已经对 src 切换进行了排序，但不知道如何切换动画位：

```
$("#emailme img").on({
      'click': function() {
        var src = ($(this).attr('src') === 'images/downbutton.png')
              ? 'images/upbutton.png'
              : 'images/downbutton.png';
            $(this).attr('src', src);   //THIS TOGGLES THE IMAGE SRC

            //BUT WHAT DO I PUT HERE TO TOGGLE ANIMATE BETWEEN ("top":"0px") and 
            //("top":"-50px") IN THE SAME CLICK??

                     }
}); 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:07:53.157

如果你稍微重构你的代码，你可以这样做。我想这就是你要找的...

```
$("#emailme img").on({
  'click': function() {

    var $this = $(this);
    var src = $this.attr('src');
    var isUp = src === 'images/upbutton.png';
    var newSrc = 'images/'+ (isUp ? 'downbutton' : 'upbutton') +'.png';

    $this.attr('src', newSrc)
      .animate({ top: (isUp ? '-50' : '0') +'px' });

  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:10:57.410

```
if($("#emailme img").css('top') == '0px'){
  $("#emailme img").stop().animate({top:'-50px'},1000);
};
if($("#emailme img").css('top') == '-50px'){
  $("#emailme img").stop().animate({top:'0px'},1000);
}; 
```

还要检查一下：

```
$('body').on('click', '#emailme img', function (e){
  $(this).attr('src', $(this).attr('src')=='images/downbutton.png'?'images/upbutton.png':'images/downbutton.png');
  if($(this).css('top') == '0px'){
    $(this).stop().animate({top:'-50px'},1000);
  };
  if($(this).css('top') == '-50px'){
    $(this).stop().animate({top:'0pg'},1000);
  };
}); 
```

# apache - 我可以以某种方式在我的内部包含一个带有重定向的文件吗

> ID：12964383
> 
> 赞同：0
> 
> 时间：2012-10-18T21:55:53.327
> 
> 标签：apache, .htaccess, virtualhost, prestashop

我将朋友的网上商店从一个系统迁移到另一个系统，并试图让所有旧网址都指向新网址。

所以我得到了像这样的 10Ks 行： Rewrite /a /b

我知道我可以将它们添加到我的内部`<VirtualHost>`，但很难阅读其余的`<VirtualHost>`设置。

新的网上商店是 Prestashop，它使用 .htaccess 文件，并且`<textarea>`您可以在其中添加额外设置，当您重新生成 prestashops .htaccess 文件时，您可以保留这些设置。

因此，我尝试将所有行粘贴到其中，`<textarea>`但它有某种限制，因此只有一半存储在其中。

我不能只使用文本编辑器将这些行粘贴到 .htaccess 中，因为有时您更改 prestashop 中的 som 设置，需要生成 .htaccess 文件，并且我手动添加的行将被覆盖。

所以我正在寻找一种在我的或.htaccess 中包含所有重定向的文件的方法。

或者配置 apache 来加载 .htaccess 和 .htacces2 什么的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:14:52.883

哦，这太容易了，刚刚添加：在我的里面包含“file.conf” `<VirtualHost>`，一切都很好。

# java - Java 中是否存在类似于 TreeSet 但允许重复的数据结构？

> ID：12964384
> 
> 赞同：0
> 
> 时间：2012-10-18T21:56:03.563
> 
> 标签：java, algorithm, data-structures

我想保持顺序并允许重复。我应该为自己建造一个吗？或者有什么方法可以调整 Comparator （我认为 remove() 和 insert() 使用相同）？谢谢。

我希望 remove() 在 O(log n) 中，并且 add() 也在 O(log n) 中。

PriorityQueue 是一种方法，但它的 remove() 方法需要 O(n)。如果可能的话，我该如何调整这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:09:51.550

你能看到[`TreeBag`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/bag/TreeBag.html)Apache [Commons-Collections](http://commons.apache.org/collections/userguide.html)吗？这使用 a来提供数据存储，它为、和remove 操作[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)提供有保证的 log(n) 时间成本。`containsKey``get``put`

A`Bag`将每个对象连同出现次数一起存储在集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:28:06.793

[番石榴的](http://guava-libraries.googlecode.com) [`TreeMultiset`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/TreeMultiset.html)，也许？与 Apache Commons 不同，[`TreeMultiset`其他`Multiset`的](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multiset)和泛型相处融洽并正确遵守`Collection`约定，这使得它使用起来更加友好一些。

（披露：我为 Guava 做出了贡献。）

# assignment-operator - Java 中的赋值结果

> ID：12964386
> 
> 赞同：0
> 
> 时间：2012-10-18T21:56:08.400
> 
> 标签：assignment-operator

我正在查看第 11 页上的代码[http://www.cs.usfca.edu/~parrt/doc/java/JavaIO-notes.pdf](http://www.cs.usfca.edu/~parrt/doc/java/JavaIO-notes.pdf)

我有一个陈述有问题。我认为分配的结果是一个左值。所以 ((byteRead = inFile.read()) != -1) 应该与 (inFile.read()) != -1) 相同。尽管查看输出，但情况似乎并非如此。所以我的问题是语句 ((byteRead = inFile.read()) != -1) 是如何解析的？

编辑：从回复看来，我对作业结果有当前的解释。我想知道通过替换代码片段出了什么问题

int byteRead;

而((byteRead = inFile.read()) != -1)

outFile.write(byteRead);

和

而（inFile.read（）！= -1）

outFile.write(inFile.read());

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:12:23.603

((byteRead = inFile.read()) != -1) 和 (inFile.read() != -1) 在某种意义上是等效的布尔表达式。但是，第一个有副作用：它将 inFile.read() 的结果存储在变量 byteRead 中。

您引用的代码示例将此用于紧凑的 while 循环，该循环从输入中读取一个字节，将其写入输出并一直这样做，直到 inFile.read() 返回 -1（表示已到达文件末尾）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:37:45.213

所以，既然您发布了两个版本的代码，答案就很清楚了：

在您的第一个版本中，读取的每个字节都分配给 byteRead，然后写入输出流。

在第二个版本中，您使用 read() 消耗一个字节，但不将其分配给变量。然后，您读取写入输出流的另一个字节（流中的下一个字节）。

所以，如果输入文件是：

```
abcdefghijklmnopqrstuvwxyz 
```

第一个版本的输出将是：

```
abcdefghijklmnopqrstuvwxyz 
```

第二个的输出将是：

```
bdfhjlnqrtuxz 
```

# php - iPhone不发送单选按钮值

> ID：12964388
> 
> 赞同：0
> 
> 时间：2012-10-18T21:56:19.067
> 
> 标签：php, html

今天在我们的电子商务网站上出现了一个奇怪的错误，尽管过去曾被 iphone 使用过 100 次，但一位客户多次尝试但一直出错。检查数据库显示他们的支付方式中的价值没有被存储。

我根本看不出表格有什么问题，它适用于其他所有人，包括其他一些 iphone。有问题的表格部分看起来像。

`<tbody > <tr > <td ><input name="payment_type" type="radio" value="nc" checked id="master_card" /> <label for="master_card" >Master Card</label></td> </tr> <tr > <td ><input name="payment_type" type="radio" value="nc" id="visa"/> <label for="visa" >Visa</label></td> </tr> <tr > <td ><input name="payment_type" type="radio" value="sc" id="maestro" /> <label for="maestro" >Maestro</label></td> </tr> <tr > <td ><input name="payment_type" type="radio" value="sc" id="visa_delta"/> <label for="visa_delta" >Visa Delta</label></td> </tr> <tr > <td><input name="payment_type" type="radio" value="sc" id="switch"/> <label for="switch" >Switch/Solo</label></td> </tr> <tr> <td ><input name="payment_type" type="radio" value="paypal" id="paypal" /> <label for="paypal" >(PayPal)</label></td> </tr> </tbody>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:07:39.360

对我来说看起来不错，但您可能想尝试 check="checked" - 通常当您的 DOM 混乱并且浏览器无法显示文档时会发生此类问题。我建议将整个页面通过 W3C 验证器并修复所有问题，然后查看是否可以解决问题。

```
<input name="payment_type" type="radio" value="nc" checked="checked" id="master_card" />
<label for="master_card" >Master Card</label>

<input name="payment_type" type="radio" value="nc" id="visa"/>
<label for="visa" >Visa</label>

<input name="payment_type" type="radio" value="sc" id="maestro" />
<label for="maestro" >Maestro</label>

<input name="payment_type" type="radio" value="sc" id="visa_delta"/>
<label for="visa_delta" >Visa Delta</label>

<input name="payment_type" type="radio" value="sc" id="switch"/>
<label for="switch" >Switch/Solo</label>

<input name="payment_type" type="radio" value="paypal" id="paypal" />
<label for="paypal" >(PayPal)</label> 
```

# perl - 是否有任何工具/脚本用于分析/检索 flash/html5 视频信息/元数据

> ID：12964393
> 
> 赞同：0
> 
> 时间：2012-10-18T21:56:41.673
> 
> 标签：perl, video, metadata

我想播放具有一定分辨率的 youtube 视频，如 360p 并捕获数据包，然后从数据包中提取视频，然后我想从这些视频中分析/检索 flash/html5 视频信息/元数据顺便说一句，视频是否还在从捕获的数据包中提取它们时的分辨率相同吗？

请注意，这些视频可能不完整

是否有任何好的工具可以分析/检索 flash/html5 视频信息/元数据，如视频比特率、视频分辨率（如 360p、480p）、使用的音频/视频编解码器、视频大小和持续时间/持续时间（如果视频不完整），理想情况下，信息将包括原始视频大小、实际视频大小、原始视频长度/持续时间和实际视频长度/持续时间

我希望它是一个脚本，如果它是一个工具。我希望它可以使用命令行通过 shell 运行，因为我想要自动化。

一篇论文说 perl 可以做到这一点，但我不怎么感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:19:28.627

（长评论，不是完整的答案）

IANAL，但您的目标可能不符合[YouTube 服务条款](https://www.youtube.com/t/terms?gl=US&hl=en)：

第 4 节 C

> 您同意不通过服务本身的视频播放页面、可嵌入播放器或 YouTube 可能指定的其他明确授权方式以外的任何技术或方式访问内容。

第 4 节 H

> 您同意不使用或启动任何自动化系统，包括但不限于“机器人”、“蜘蛛”或“离线阅读器”，这些系统 [...] 向 YouTube 服务器发送的请求消息 [...] 超出了人类可以合理产生的数量在同一时期通过使用传统的在线网络浏览器。尽管有上述规定，YouTube 允许公共搜索引擎的运营商使用蜘蛛从网站复制材料，其唯一目的是在必要的范围内创建可公开搜索的材料索引，但不允许此类缓存或存档材料。[…]

您可以使用[YouTube 数据 API](https://developers.google.com/youtube/getting_started#data_api)直接访问所需信息。这是一个[参考](https://developers.google.com/youtube/2.0/reference)，这里是[直接支持的编程语言的列表](https://developers.google.com/youtube/code#client_libraries)。Perl 也可以，因为底层数据格式是纯 XML 或 JSON。

您可能还会发现这些 SO 问题[YouTube Player API：如何在不播放的情况下获取加载/提示视频的持续时间？](https://stackoverflow.com/q/2086260/1521179)和[Youtube API 从 XML](https://stackoverflow.com/q/7378116/1521179)启发中获取视频时长。

# php - php 静态邮件类

> ID：12964394
> 
> 赞同：0
> 
> 时间：2012-10-18T21:56:52.130
> 
> 标签：php, phpmailer

我是新手，我正在尝试创建一个使用 phpmailer 类的静态电子邮件类。

我想做的是......

```
Email::send('from', 'to', 'subject', 'html message'); // works 
```

但是如果我想添加附件...

```
Email::send('from', 'to', 'subject', 'html message')->attach('file/blah.txt'); 
```

这会引发一个致命错误：`Call to undefined method PHPMailer::attach()`，我明白为什么，我只是不知道如何让 Email 类执行上述代码，如果可能的话。

下面是我实验过的。

```
class Email {

    static $attach;

    public static function send($from, $to, $subject, $message)
    {
        $email = new PHPmailer();

        try {

            $email->AddAddress($to);
            $email->SetFrom($from);
            $email->Subject = $subject;
            $email->MsgHTML($message);

            if (self::$attach) $email->AddAttachment(self::$attach);        

            $email->Send();
        }
        catch (phpmailerException $e)
        {
            return $e->errorMessage();
        }
        catch (Exception $e)
        {
            return $e->getMessage();
        }

        return $email;
    }

    public static function attach($attachment)
    {
        self::$attach = $_SERVER['DOCUMENT_ROOT'].$attachment;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:13:38.553

你的 API 没有任何意义。要做你试图用链接做的事情，你需要使用实例，但你也可以使用静态来使界面更像你想要的：

```
class Email {

    protected $attchements = array();
    protected $mailer;

    public function __construct($from, $to, $subject, $message) {
          $this->mailer = new PHPMailer();

          $this->mailer->AddAddress($to);
          $this->mailer->SetFrom($from);
          $this->mailer->Subject = $subject;
          $this->mailer->MsgHTML($message);

    }

    public static function create($from, $to, $subject, $message) {
        $instance = new Self($from, $to, $subject, $message);
        return $instance;

    }

    public static function createAndSend($from, $to, $subject, $message) {
         $instance = new Self($from, $to, $subject, $message);
         return $instance->send();
    }

    public function send()
    {
       if(!empty($this->attachments)) {
           foreach($this->attachments as $attachment) {
               $this->mailer->AddAttachment($attachment);
           }
       }

       return $this->mailer->send();        
    }

    public function attach($attachment)
    {
        $this->attachments[] = $_SERVER['DOCUMENT_ROOT'].$attachment;
        return $this;
    }
} 
```

因此，您的用法如下所示：

```
//simple
Email::createAndSend($to, $from, $subject, $message);

// with attachment
Email::create($to, $from, $subject, $message)
   ->attach('fileone.txt')
   ->attach('filetwo.txt')
   ->send(); 
```

还应该注意的是，我从我的示例中删除了您的异常处理......你应该整合它......我这样做只是为了保持简短和甜蜜:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:11:48.793

流利的指令适用于对象（不同于静态类）。

在您的情况下，只需反转指令：

```
Email::attach('file/blah.txt');
Email::send('from', 'to', 'subject', 'html message'); 
```

但是一个真实的对象可能会更好。

# c++ - 在数组中找到 y 的 x 个连续值的最有效方法是什么？

> ID：12964396
> 
> 赞同：5
> 
> 时间：2012-10-18T21:56:55.093
> 
> 标签：c++, c, performance, algorithm, profiling

通过 callgrind 运行我的应用程序发现，这条线比其他所有东西都相形见绌，大约是 10,000 倍。我可能会围绕它重新设计，但这让我想知道；有更好的方法吗？

这是我目前正在做的事情：

```
int i = 1;
while
(
    (
        (*(buffer++) == 0xffffffff && ++i) || 
        (i = 1)
    )
    &&
    i < desiredLength + 1
    &&
    buffer < bufferEnd
); 
```

它正在寻找 32 位无符号整数数组中第一块所需长度 0xffffffff 值的偏移量。

它比我能想到的涉及内部循环的任何实现都要快得多。但它仍然太慢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:29:47.603

我也会接受这个`search_n`建议，因为我很确定它可以正确地做到这一点。这实际上很简单，基本上可以通过所需长度的一个因子来加速。除非目标值在数组中非常密集。

想法是这样的：如果您有`K`一个从 position 开始的值的连续实例`I`，那么它必须是 position`I + K - 1`包含该值的情况。所以你先检查一下；如果不是，那么可能包含 K 个连续值的最早位置是`I + K`，因此您可以在那里重新启动算法。

另一方面，如果在 处找到值`I + K - 1`，则向后扫描，直到到达`I`（在这种情况下成功），或者到达`J - 1`不包含目标值的某个位置。`J`在后一种情况下，您知道从到有目标值`I + K - 1`，因此您现在检查`J + K - 1`。如果可行，您只需向后扫描到`I + K`. 如果它不起作用，则在 重新启动算法`J + K`。

大多数时候，您只会查看`K'th`向量中的每个位置。对于 large `K`，这是一个巨大的胜利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T22:10:44.260

您标记了 c++，所以我假设您有可用的 STL 算法：

```
std::search_n(buffer, bufferEnd, desiredLength, 0xffffffff); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T22:09:18.847

尝试[`memcmp`](http://en.cppreference.com/w/c/string/byte/memcmp)从 C 标准库中使用。现代编译器应具有非常优化的`memxxx`功能实现，从而最大限度地利用现代 CPU。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T22:28:23.953

只是一个想法，但您一次迭代一个 int 数组，对吗？想一想，如果`*(buffer) != 0xffffffff`然后`buffer[desiredLength-1] != 0xffffffff`您可以确定在两者之间进行检查是没有意义的，因此您可以继续前进而不是仅前进`buffer`1 `desiredLength`，如果大于 1，这可能会显着提高您的速度`desiredLength`。当然，它会使您的功能复杂化，因为：

1.  如果两者都`*(buffer)`相等，`buffer[desiredLength-1]`那么`0xffffffff`你不能假设它们之间是连续的，所以你仍然需要检查它。
2.  如果`*(buffer)`不等于`0xffffffff`但`buffer[desiredLength-1]`确实等于`0xffffffff`，那么您必须跟踪到`0xffffffff`序列的开头。
3.  您必须确保在检查时不会超出缓冲区`buffer[desiredLength-1]`

有点复杂，但它*可能会*加快速度。希望这是有道理的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T22:13:00.173

如果我想实现这一点，我将使用`memchr`and来实现`memcmp`：

```
bool found = false;
std::vector<unsigned char> tmp(desiredLength*sizeof(uint32_t), 0xFF);
while( true ) {
    void* p = memchr(bufferStart, 0xFF,
        (bufferEnd-bufferStart-desiredLength) * sizeof(uint32_t));
    if( !p ) break;
    if( !memcmp(p, &tmp[0], desiredLength * sizeof(uint32_t)) ) {
        found = true;
        break;
    }
} 
```

您也可以使用`std::search_n`可能比您自己的代码更优化的代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T12:38:49.497

对于何时`std::search_n`不可用：

```
int i = 1;
while
(
    (
        i == 1
        &&
        buffer < bufferEnd
        &&
        (
            (
                *buffer == desired
                &&
                *(buffer + desiredLength - 1) == desired
                &&
                (i = 3)
            )
            ||
            (buffer += desiredLength && (i = 1))
        )
    )
    ||
    (
        i == 2
        &&
        (
            (
                buffer > arr
                &&
                (*(--buffer) == desired)
            )
            ||
            (i = 3)
        )
    )
    ||
    (
        i >= 3
        &&
        buffer < bufferEnd
        &&
        (
            (
                *(buffer++) == desired
                &&
                (i++ || true)
            )
            ||
            (i = 1)
        )
        &&
        (
            i < 3
            ||
            i - 3 < desiredLength + 1
        )
    )
);
buffer -= i - 4;

if (buffer > bufferEnd - (i-3))
    buffer = bufferEnd; 
```

返回相同的结果仅略慢于`std:search_n`：

```
buffer = std::search_n(buffer, bufferEnd-1, desiredLength, desired);
if (buffer == bufferEnd-1)
    buffer = bufferEnd; 
```

# css - 嵌套 div 被圆形容器 div 掩盖

> ID：12964400
> 
> 赞同：3
> 
> 时间：2012-10-18T21:57:16.873
> 
> 标签：css, html, background, mask, masking

我试图弄清楚是否有办法用 CSS 做到这一点：我有一个边框半径为 50%（圆形）的容器 div。其内部是一个矩形 div，高度为 30%，位于容器底部，我希望能够将其屏蔽掉，以使容器圆形边框半径之外的任何内容都不会显示。我该如何做到这一点？附件是当前正在发生的事情的屏幕截图，这是我的代码：

```
<div id="coupon_container">
  <div id="meter_container">50c off</div>
</div>

#coupon_container {
    position: fixed; right:0; top:0; z-index: 100; color: #fff; width:170px; height: 120px; 
    #meter_container { 
        position: absolute; width: 110px; height:110px; .round; background: @greenDk; border:5px solid #fff; left: 60px; overflow: hidden; 
        .meter_level { width: 100%; height:30%; position: absolute; bottom:0; text-align: center; font-size: 1.6em; background: @limeLt; } 
    }
} 
```

![在此处输入图像描述](../Images/dfcdf1874f6b0bd4920514d04b336600.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:11:19.733

我真的很喜欢bookcasey发布[的渐变解决方案。](https://stackoverflow.com/a/12964571/1397351)然而，兼容性可能是一个缺点，因为 IE9 不支持 CSS 渐变。所以另一种解决方案是这个：

# [*演示*](http://dabblet.com/gist/3915300)

这个想法是使用 70% 的顶部填充而不是绝对定位。

**HTML**：

```
<div id="coupon_container">
    <div id="meter_container">50c off</div>
</div> 
```

**CSS**：

```
#coupon_container {
    overflow: hidden;
    width: 8em; height: 8em;
    border-radius: 50%;
    background: green;
}
#meter_container { 
    margin: 70% 0;
    height: 30%;
    text-align: center;
    background: lime;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:12:57.427

你可以使用 CSS3 渐变来实现你想要的效果：

```
#coupon_container {
  width: 100px;
  height: 100px;
  border-radius: 100px;
  background: -webkit-gradient(linear, 50% 0%, 50% 70, color-stop(100%, #fa8072), color-stop(100%, #ff0000));
  background: -webkit-linear-gradient(top, #fa8072 70px, #ff0000 70px);
  background: -moz-linear-gradient(top, #fa8072 70px, #ff0000 70px);
  background: -o-linear-gradient(top, #fa8072 70px, #ff0000 70px);
  background: linear-gradient(top, #fa8072 70px, #ff0000 70px);
  position: relative;
}

#meter_container {
  width: 100px;
  text-align: center;
  position: absolute;
  bottom: 10px;
} 
```

[演示](http://codepen.io/bookcasey/pen/lauDK)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:06:10.177

我可能完全错过了一些东西，但你不能只添加“溢出：隐藏；” 到圆形元素，#coupon_container？

# jakarta-ee - 将参数传递给方法使用 和 抛出 NullPointerException

> ID：12964412
> 
> 赞同：0
> 
> 时间：2012-10-18T21:58:04.560
> 
> 标签：jakarta-ee, jsf-2, javabeans, actionlistener

我用来遍历由 JSF 文档中的实体“类别”声明的通用列表。使用 commandLink 会导致异常。当我从方法中删除参数（在 JSF 代码和 bean 中）并让它发出系统消息时，一切都很好。所以我想当commandLink被按下时，“item”就没有价值了。

```
<ui:repeat var="item" value="#{category.items}">
<h:form>
<h:commandLink value="add" actionListener="#{cartBean.addItem(item)}" />
</h:form>
</ui:repeat> 
```

购物车豆：

```
package huhu.main.managebean;

import java.io.Serializable;
import java.util.List;

import org.apache.log4j.Logger;

import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

import huhu.model.generated.Item;

@Named
@SessionScoped
public class CartBean implements Serializable {
   /**
    * 
    */
   private static final long serialVersionUID = 1L;
   private List<Item> cart;

   public void addItem(Item item){
      cart.add(item);
   }

   /**
    * @return the cart
    */
   public List<Item> getCart() {
      return cart;
   }
   /**
    * @param cart the cart to set
    */
   public void setCart(List<Item> cart) {
      this.cart = cart;
   }

} 
```

那个报告：

```
23:21:31,833 SEVERE [javax.faces.event] (http-localhost-127.0.0.1-8080-5) Beim Aufrufen des Aktionszielgeräts 'java.lang.NullPointerException' für Komponente '#{cartBean.addItem(item)}' wurde 'j_idt40' erhalten.
23:21:31,835 SEVERE [javax.faces.event] (http-localhost-127.0.0.1-8080-5) java.lang.NullPointerException
    at huhu.main.managebean.CartBean.addItem(CartBean.java:29)
    at huhu.main.managebean.CartBean$Proxy$_$$_WeldClientProxy.addItem(CartBean$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at com.sun.faces.facelets.component.UIRepeat.broadcast(UIRepeat.java:921)
    at com.sun.faces.facelets.component.UIRepeat.broadcast(UIRepeat.java:921)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    at java.lang.Thread.run(Unknown Source)

23:21:31,848 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http-localhost-127.0.0.1-8080-5) JSF1073: javax.faces.event.AbortProcessingException erfasst während Verarbeitung von INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt26:j_idt35, Message=/menu.xhtml @172,86 actionListener="#{cartBean.addItem(item)}": java.lang.NullPointerException
23:21:31,850 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http-localhost-127.0.0.1-8080-5) /menu.xhtml @172,86 actionListener="#{cartBean.addItem(item)}": java.lang.NullPointerException: javax.faces.event.AbortProcessingException: /menu.xhtml @172,86 actionListener="#{cartBean.addItem(item)}": java.lang.NullPointerException
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UICommand.broadcast(UICommand.java:300) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.facelets.component.UIRepeat.broadcast(UIRepeat.java:921) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.facelets.component.UIRepeat.broadcast(UIRepeat.java:921) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_07]
Caused by: java.lang.NullPointerException
    at huhu.main.managebean.CartBean.addItem(CartBean.java:29) [classes:]
    at huhu.main.managebean.CartBean$Proxy$_$$_WeldClientProxy.addItem(CartBean$Proxy$_$$_WeldClientProxy.java) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_07]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7.0_07]
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262) [jbossweb-7.0.13.Final.jar:]
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:148) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    ... 28 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:54:28.170

您需要`cart`在使用 List 之前对其进行实例化。

您可以在 CartBean 的 @PostConstruct 方法中执行此操作，如下所示：

```
@PostConstruct
public void init() {
    cart= new ArrayList<Item>();
} 
```

# meteor - Meteor transition effects for auto-updating content

> ID：12964419
> 
> 赞同：4
> 
> 时间：2012-10-18T21:58:51.987
> 
> 标签：meteor

Looking at [the meteor leaderboard example](http://www.meteor.com/examples/leaderboard), I understand how content in the view templates is bound to functions in the javascript application file. For example, consider this snippet from the view file which defines the "selected" class to determine which name is highlighted yellow:

```
<template name="player">
  <div class="player {{selected}}">
    <span class="name">{{name}}</span>
    <span class="score">{{score}}</span>
  </div>
</template> 
```

The value of `{{selected}}` is defined and kept up to date in this function from leaderboard.js:

```
Template.player.selected = function () {
    return Session.equals("selected_player", this._id) ? "selected" : '';
}; 
```

My question is: How would you add transition effects to this auto updating process? For example, say we wanted the yellow highlighting to fade to white on the existing name, and then fade into yellow on the new name, whenever a new name was clicked. How could we accomplish that in meteor?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:36:10.880

最简单的方法是使用 CSS 过渡。只需确保元素被保留（因此它不会在重新绘制时被*替换，只是修补）：*

```
 Template.player.preserve(['.player']); 
```

然后疯狂地使用 CSS 过渡：

```
 .player {
   background-color: white;
   transition: background-color 500ms linear 0;
   -moz-transition: background-color 500ms linear 0;
   // etc
 }

 .player.selected {
   background-color: yellow;
 } 
```

# asp.net-mvc-4 - 如何使用多个相关表创建 ViewModel 并保存表单

> ID：12964421
> 
> 赞同：0
> 
> 时间：2012-10-18T21:59:01.003
> 
> 标签：asp.net-mvc-4, entity-framework-5

鉴于现代版本，我试图找出实现这一目标的最佳方法。我正在使用 VS2012 MVC4 EF5 并从我的数据库中构建了一个 edmx 文件。我构建了一个允许提交供应商信息的表单。主表是供应商表，主要包含联系信息，还有一些附加表存储他们的多个类别选择（复选框列表）和另一个存储他们的少数信息（单选按钮的集合）。所以我的 ViewModel 是供应商表，我用视图包填充复选框和单选按钮，这些视图包查询查找表的值。

所以我假设我应该将类别和少数部分构建到 ViewModel 中，并以某种方式连接魔法，以便数据库知道如何保存返回的值，或者我应该只使用视图包，然后以某种方式在发布后读取这些值并循环它们将它们存储到数据库中？无论哪种方式，我都被卡住了，不知道该怎么做。

我在网上搜索了很多例子，但没有一个适合这种情况。这不是一个复杂的数据模型，但应该是相当普遍的现实世界情况。我是 MVC 的新手，所以如果我遗漏了一些明显的东西，请原谅我。

任何指导表示赞赏。

更新：这是将 ViewModel 保存到数据库的基本代码，但是如何保存复选框列表和单选按钮。我认为有两种方法 1）以某种方式将它们包含在 ViewModel 中或 2）执行单独的功能来保存表单复选框和单选按钮值。

```
 [HttpPost]
    public ActionResult Form(VendorProfile newProfile)
    {
        if (ModelState.IsValid)
        {
            newProfile.ProfileID = Guid.NewGuid();
            newProfile.DateCreated = DateTime.Now;

            _db.VendorProfiles.Add(newProfile);
            _db.SaveChanges();
            return RedirectToAction("ThankYou", "Home");
        }
        else
        {
            PopuplateViewBags();
            return View(newProfile);
        }
    } 
```

也许另一种说明我的问题的方式是，如果你必须建立一个表格，人们可以在其中注册并从 31 种口味的列表中选择他们最喜欢的冰淇淋口味。您需要将人员的联系信息保存在主表中，然后将他们的风味选择集合保存在另一个表中（一对多）。我有一个用于联系表单的 ViewModel 和一个从查找表中显示的风格列表（复选框列表）。你如何编写代码来保存这个表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:07:20.627

解决方案：可能有更好的方法，但想发布我发现的内容。您可以传入复选框集合，然后将它们发送到另一个处理数据库插入的方法。

```
 [HttpPost]
    public ActionResult Form(VendorProfile newProfile, int[] categories)
    {
        if (ModelState.IsValid)
        {
            newProfile.ProfileID = Guid.NewGuid();
            newProfile.DateCreated = DateTime.Now;

            _db.VendorProfiles.Add(newProfile);
            _db.SaveChanges();

            InsertVendorCategories(newProfile.ProfileID, categories);

            return RedirectToAction("ThankYou", "Home");
        }
        else
        {
            PopuplateViewBags();
            return View(newProfile);
        }
    }

    private void InsertVendorCategories(Guid ProfileID, int[] categories)
    {
        try
        {
            var PID = new SqlParameter("@ProfileID", ProfileID);
            var CID = new SqlParameter("@CatID", "");

            foreach (int c in categories)
            {
                CID = new SqlParameter("@CatID", c);
                _db.Database.ExecuteSqlCommand("Exec InsertVendorCategory @ProfileID, @CatID", PID, CID);
            }
        }
        catch { Exception ex; }
    } 
```

# c# - 在 string[] 中创建一个循环？

> ID：12964426
> 
> 赞同：0
> 
> 时间：2012-10-18T21:59:12.877
> 
> 标签：c#, string, loops, browser

我有一个多行 textBox1 和 webbrowser1

当文档完成时，我希望程序用一行填充一个元素，然后做一些事情，然后用第二行等重新填充相同的元素............

代码是：

```
 HtmlEleme ele = webBrowser1.Document.GetElementById("element ID");
       if(ele != null)
                ele.InnerText = textBox1.Lines[0]; 
```

我怎么能做这个（一段时间或.....）以及如何？

我应该把代码放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:15:43.947

如果您的浏览器将在您单击按钮时加载页面，您可以按照以下步骤操作：

```
 bool loaded;
void Operate()
{
            string[] lines = TextBox1.Text.Split('\n');
            webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);

            for (int i = 0; i < lines.Length; i++)
            {
                loaded = false;
                HtmlElement ele = webBrowser1.Document.GetElementById("element ID");
                ele.InnerText = lines[i];
                //click a button here
                HtmlElement elmbutton = webBrowser1.Document.GetElementById("ButtonID");
                elmbutton.InvokeMember("click");
                //here wait for web browser navigate.
                while (!loaded)
                {
                    System.Threading.Thread.Sleep(10);
                   Application.DoEvents();
                }
            }

        }

        void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            loaded = true;
        } 
```

另一方面，我必须警告你`Application.DoEvents()`

# mysql - Can't understand MYSQL Syntax Error

> ID：12964429
> 
> 赞同：0
> 
> 时间：2012-10-18T21:59:32.903
> 
> 标签：mysql, sql, phpmyadmin

I'm trying to put some data into my MySQL db via phpmyadmin.

I'm getting a syntax error near '' in line 1\. '' Is not existing at all...

Error:

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to
your MySQL server version for the right syntax to use near '' at line 1 
```

SQL Command:

```
INSERT INTO GAR (`Name`,`Latitude`,`Longitude`,`Adresse`,`PLZ`,`Ort`,`Land`,`Tel`,`www`,`Email`,`Bericht`)
  VALUES (
    'Wellnesshotel Seeschl��chen�****�Hotel & Freizeitpark GmbH Buchwalde',
    'empty',
    'empty',
    'Buchwaldstr. 77',
    '1968',
    'Senftenberg',
    'D',
    '03573 37890',
    'www.lausitztherme.de',
    'm.zander@lausitztherme.de',
    '03573 378932'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:02:54.000

如果您的`Latitude`and`Longitude`是数字类型，例如`Float`or `Double`，那么`'empty'`您尝试插入的可能是问题所在。

如果是这种情况，请尝试：

```
INSERT INTO GAR (`Name`,`Latitude`,`Longitude`,`Adresse`,`PLZ`,`Ort`,`Land`,`Tel`,`www`,`Email`,`Bericht`)
  VALUES (
    'Wellnesshotel Seeschl��chen�****�Hotel & Freizeitpark GmbH Buchwalde',
    0,
    0,
    'Buchwaldstr. 77',
    '1968',
    'Senftenberg',
    'D',
    '03573 37890',
    'www.lausitztherme.de',
    'm.zander@lausitztherme.de',
    '03573 378932'); 
```

如果这不是问题，那么如果您包含`GAR`表的架构会有所帮助。

# ruby-on-rails - Which to upgrade first? Ruby to 1.9.2 or Rails to 3.0?

> ID：12964430
> 
> 赞同：2
> 
> 时间：2012-10-18T21:59:38.867
> 
> 标签：ruby-on-rails, ruby

Running `rails 2.3.14` without any warnings on `ruby 1.8.7-p371`. What's next? Should I upgrade `ruby` to `1.9.2` or should I upgrade `rails` to `3.0`?

A quick search seems to suggest that `rails 2.3.14` is not compatible with `ruby 1.9.2`. ([1](https://groups.google.com/forum/#!topic/rubyonrails-core/eRYpBZI0MAU), [2](http://instantbadger.blogspot.com/2011/11/porting-rails-23-app-to-ruby-19.html), [3](http://splatoperator.com/2011/08/running-rails-2-3-14-on-ruby-1-9-2/)). Is this true?

On the other hand, it sounds like `rails 3.x` runs on `ruby 1.8.7`. ([4](http://paulbarry.com/articles/2009/09/14/why-rails-3-will-require-ruby-1-8-7))

# android - 相对布局中对象的位置

> ID：12964434
> 
> 赞同：0
> 
> 时间：2012-10-18T22:00:01.887
> 
> 标签：android, position, android-relativelayout, android-scroll

我是Android的初学者。我使用 Eclipse 来编写我的应用程序。当我创建一个 .xml 类并想设置按钮的特定位置时，我使用以下代码，例如：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/fm"
    android:baselineAligned="false"
    android:gravity="end" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:scrollX="100dp"
    android:scrollY="30dp"
    android:text="@string/edad" />

</RelativeLayout> 
```

...但什么也没有发生。它将按钮设置在角落。我怎样才能让它出现在其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:02:22.460

你需要使用

```
android:layout_marginRight
android:layout_marginLeft 
android:layout_marginTop
android:layout_marginBottom 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:02:34.077

需要使用定位参数如android:layout_below。有关详细信息，请参阅[相对布局指南](http://developer.android.com/guide/topics/ui/layout/relative.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:05:00.417

您应该单击按钮并转到属性。这就是不同的定位设置所在的位置。例如下面：@+id/VIEW 然后设置 marin top ：10dip。这会将您的按钮 10 设置在 VIEW 下方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T22:19:03.393

```
<Button
android:id="@+id/button1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"

android:layout_marginLeft="100dp"
android:layout_marginTop="30dp"
android:text="@string/edad" /> 
```

# c# - 列表中的列表（模型）工厂

> ID：12964437
> 
> 赞同：5
> 
> 时间：2012-10-18T22:00:15.327
> 
> 标签：c#, asp.net-mvc-3, nhibernate

我想在数据列表中创建数据列表。我相信这可能很难解释，但我会尝试非常清楚地解释我的问题。我创建了数据列表，但在此列表中，一些参数也是数据列表。我必须使用此代码编写，因为这是限制（我们的工厂）。如果我获取不是数据列表的数据，则一切正常。问题出在哪里？如果我在列表中写列表，我会得到错误。也许你可以看到我的错误。

程序正在编译。

问题（我使用 NHibernate 中的映射从第三个表中获取数据）：

```
DestynationName = (List<dictionaryNewInfoSupportList>x.DictImportantInformationSDestination.Select(n=> new DictionaryNewInfoSupportList { Id = n.Destination.Id, Name = n.Destination.Desciption}).ToList(); 
```

模型中的目标名称

```
public Ilist<dictionaryNewInfoSupportList> DestynationName; 
```

班级：

```
class dictionaryNewInfoSupportList
{
public string Name {get; set;}
public int Id {get; set;}
} 
```

重要的：

```
public IEnumerable<DictionaryListModel> OnList(DictionayDisplayModel dictionary DisplayModel, int jtStartIndex = 0, int jtPageSize = 0, string jtSorting = null)
{
var displayModel = (DictionaryNewInfoDisplayModel)dictionaryDisplayModel;
if (displayModel == null)

var list = _dictImportantInformation.GetList().Select(
x=> new DictionaryNewInfoListModel
    {
        Id = x.Id
        Description = x.Description,
        IsActiveYN = x.IsActive,
        DestynationName = (List<DictionaryNewInfoSupportList>) x.DictImportantInformationXDestination.Select(n => new DictionaryNewInfoSupportList 
        { Id = n.Destination.Id, Name = Destination.Description}).To.List()
    }
    ).ToList();

return list;

} 
```

我有答案（话题已关闭）

```
var list = _dictImportantInformation.GetList().ToList().Select(
            x => new DictionaryNewInfoListModel
                     {
                         Id = x.Id,
                         Description = x.Description,
                         IsActiveYN = x.IsActive,
                         DeestynationName = x.DictImportantInformationXDestination.Select(n => new DictionaryNewInfoSupportList 
                         { Id = n.Destination.Id, Name = n.Destination.Description }).ToList()
                     }

            ).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:06:42.893

```
var list = _dictImportantInformation.GetList().ToList().Select(
            x => new DictionaryNewInfoListModel
                     {
                         Id = x.Id,
                         Description = x.Description,
                         IsActiveYN = x.IsActive,
                         DeestynationName = x.DictImportantInformationXDestination.Select(n => new DictionaryNewInfoSupportList 
                         { Id = n.Destination.Id, Name = n.Destination.Description }).ToList()
                     }

            ).ToList(); 
```

# java - Custom look and feel images for JOptionPane

> ID：12964439
> 
> 赞同：0
> 
> 时间：2012-10-18T22:00:30.687
> 
> 标签：java, swing, look-and-feel, joptionpane, synth

I'm creating a custom look and feel using XML based on the `SynthLookAndFeel` class, and I was wondering. What style tag would I use to set the images on a JOptionPane?

EDIT: This is just one in specific that I was looking for, but if there is some sort of list of all the tags, that would be awesome.

# facebook - Facebook 应用程序可以代表 Facebook 页面发布吗？

> ID：12964441
> 
> 赞同：0
> 
> 时间：2012-10-18T22:01:01.150
> 
> 标签：facebook, facebook-apps

> **可能重复：**
> [在 Facebook 墙上以 Page 而非用户身份发布](https://stackoverflow.com/questions/5326537/post-on-a-facebook-wall-as-page-not-as-user)

facebook 应用程序可以像处理用户状态一样代表页面发布吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T22:06:50.943

你当然可以！请务必使用适当的`access_token`. 您需要作为页面进行身份验证才能获得此信息。[文档解释得最好](https://developers.facebook.com/docs/howtos/login/login-as-page/)，但基本上，页面的管理员必须首先授予应用程序`manage_pages` [权限](https://developers.facebook.com/docs/reference/api/permissions/)，一旦您拥有此权限，您的应用程序将能够进行 API 调用以`/me/accounts`获取用户管理的所有页面的列表，并且他们适当的访问令牌。

使用您闪亮的新页面访问令牌，对 API 的调用与对用户的调用相同 -

`https://graph.facebook.com/PAGE_ID/feed?access_token=PAGE_ACCESS_TOKEN&message=Hello Page World!`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T22:11:26.760

自 10 月 3 日起生效，由于许多“垃圾邮件”应用程序，Facebook 改变了一些规则，逐步取消了之前的一些特权。目前有非常有限的资源/教程详细解释了这一点，但最好你可以查看 facebook API。 [https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/) https://developers.facebook.com/blog/post/2012/07/05/platform-updates--operation-developer-love/

# javascript - Upload file XMLHttpRequest not working

> ID：12964446
> 
> 赞同：0
> 
> 时间：2012-10-18T22:01:47.883
> 
> 标签：javascript, jquery, ajax, file-upload, xmlhttprequest

I am trying to upload file with ajax it does not work for some reason, can you see what's up?

```
 function upload(myform)

     var file = this.files[0];
     var formData = new FormData();
     formData.append("material_file", document.getElementById("myfile"));

    xmlhttp = new XMLHttpRequest();
    xmlhttp.addEventListener('progress', function(e) {
        var done = e.position || e.loaded, total = e.totalSize || e.total;
        console.log('xmlhttp progress: ' + (Math.floor(done/total*1000)/10) + '%');
    }, false);
    if ( xmlhttp.upload ) {
        xmlhttp.upload.onprogress = function(e) {
            var done = e.position || e.loaded, total = e.totalSize || e.total;
            console.log('xmlhttp.upload progress: ' + done + ' / ' + total + ' = ' + (Math.floor(done/total*1000)/10) + '%');
        };
    }
    xmlhttp.onreadystatechange = function(e) {
        if ( 4 == this.readyState ) {
            console.log(['xmlhttp upload complete', e]);
        }
    };
    xmlhttp.open('post', process_pdf.php, true);
    xmlhttp.setRequestHeader("Content-Type","multipart/form-data");
    xmlhttp.send(formData);
     }

<form onsubmit="upload(this)">
     <input type="file" name="myfile">
</form> 
```

When I browse to the file and click submit I get error

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:14:21.390

根据报错，使用*前*`myForm`需要先创建变量。

 *但是，您更大的问题是[无法单独使用 AJAX 上传文件。](https://stackoverflow.com/a/1277972/1216976) 尝试使用类似[SWFupload](http://www.swfupload.org/documentation)的库。

如果您不想使用 Flash 或其他插件，则需要跳过 AJAX 并直接使用`POST`.

```
<form method="post" enctype="multipart/form-data" action="/PATH/TO FILE">
    <input type="file" name="myfile">
    <input type="submit" value="upload file">
</form> 
```*

# java - Servlet gives 404 instead of loading appropriate page. Console says SEVERE error when launching Tomcat

> ID：12964449
> 
> 赞同：0
> 
> 时间：2012-10-18T22:02:07.433
> 
> 标签：java, eclipse, jsp, tomcat, servlets

For some reason **Apache Tomcat 7.0** doesn't run my main servlet(`PlaceListServlet`) that should list a bunch of database items on `place-list.jsp` page.

I keep getting **404** everywhere, and **Eclipse** doesn't report any errors in the source.

What seems to be the problem?

**PlaceListServlet.java** (*main servlet that should load* `place-list.jsp`):

```
package com.myproject.crud;

import java.io.IOException;

import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
@WebServlet({"/place/", "index.jsp"})
public class PlaceListServlet extends HttpServlet {

    @Inject
    private PlaceRepositoryImpl placeRepo = new PlaceRepositoryImpl();

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        request.setAttribute("places", placeRepo.listPlaces());
        getServletContext().getRequestDispatcher("/WEB-INF/pages/place-list.jsp").forward(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    }

} 
```

**EDIT:**

I just looked at the console and saw this error:

> SEVERE: Error configuring application listener of class com.sun.faces.config.ConfigureListener java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559) at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532) at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514) at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133) at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4727) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)
> 
> Oct 19, 2012 11:34:45 AM org.apache.catalina.core.StandardContext listenerStart SEVERE: Skipped installing application listeners due to previous error(s) Oct 19, 2012 11:34:45 AM org.apache.catalina.core.StandardContext startInternal SEVERE: Error listenerStart Oct 19, 2012 11:34:45 AM org.apache.catalina.core.StandardContext startInternal SEVERE: Context [/GBCPlacesCRUD] startup failed due to previous errors Oct 19, 2012 11:34:45 AM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler ["http-bio-8080"] Oct 19, 2012 11:34:45 AM org.apache.coyote.AbstractProtocol start INFO: Starting ProtocolHandler ["ajp-bio-8009"] Oct 19, 2012 11:34:45 AM org.apache.catalina.startup.Catalina start INFO: Server startup in 1096 ms

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:15:51.857

将 javax.faces-2.1.13.jar 添加到项目中解决了这个问题。

`http://javaserverfaces.java.net/`

# java - Java：可运行的 JAR 文件，在不同的计算机上找不到主类

> ID：12964452
> 
> 赞同：1
> 
> 时间：2012-10-18T22:02:19.897
> 
> 标签：java, jar

我创建了一个小的 Swing 应用程序。现在我把它给一个朋友测试，在他的电脑上它可以工作。当他将 JAR 文件放在 U 盘上并尝试在另一台计算机上运行它时，会出现错误消息“找不到主类逻辑。启动。程序将退出。”。

由于他不太喜欢计算机来检查他拥有哪个版本，我很确定问题是其他计算机上的 java 版本？根据 Eclipse，我的构建路径是 JavaSE-1.7，但似乎我无法“调整”所需的最小值，例如我可以在 Android 中做到这一点。有没有办法做到这一点？例如，我可以将其作为 JRE5+ 应用程序吗？

**编辑：**

manifest.mf 文件是这样的

```
Manifest-Version: 1.0
Class-Path: .
Main-Class: logic.Start
(NEWLINE)
(NEWLINE) 
```

我读过必须只有一个（NEWLINE）。此外，JAR 文件包含文件夹

```
gui / guiDialogs / guiElements / guiHelp / gx / logic (contains Start.class) / META-INF / sounds 
```

并且没有其他外部 JAR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:06:31.263

如果存在 Java 版本问题，则错误消息会有所不同。

您的 jar 文件不完整（或依赖于尚未与主 jar 文件一起复制的其他 jar）。MANIFEST.MF 指向`logic.Start`在预期位置不可用的主类。

调查 MANIFEST.MF 文件的 Class-Path 行。您可能碰巧引用了绝对路径名或类似名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:35:58.950

事实上，问题在于不同计算机上的 JRE 版本。在eclipse中，标准JDK设置为7，并且似乎不可能在已经创建的项目中更改它，我创建了一个具有较低minimu-JRE级别的新项目，复制粘贴了该项目中的整个代码，现在它作品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T18:10:55.527

您可以避免创建新项目并复制粘贴代码的步骤。只需右键单击类似于一堆书的图标旁边的“JRE System Library”行，然后单击“属性”。将执行环境更改为您选择的 JRE 版本。

# java - Printing chatter names from server file in a textfield Java

> ID：12964456
> 
> 赞同：-1
> 
> 时间：2012-10-18T22:02:35.667
> 
> 标签：java

I would like to ask about how can I print the names of the chatters in a textfield that I created in my client file. Here is the code snippet of the server file that I have:

```
while (true) {
                out.println("SUBMITNAME");
                name = in.readLine();

                if (name == null) {
                    return;
                }
                synchronized (names) {
                    if (!names.contains(name)) {
                        names.add(name);

                        }
                        break;
                    }
                }
            } 
```

This piece of code gets the names of the chatters but I cannot display them in a textfield. Thank you very much for your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:13:07.400

您可以尝试`jTextArea.append("ChatterName\n")`或`jTextArea.append("ChatterName<br/>")`，（我认为中断标签可能是问题所在）。

但是[JList](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html) IMO 会好得多。

```
 private DefaultListModel defaultListModel = new DefaultListModel() ;
 private JList jList = new JList(defaultListModel) ; 
 defaultListModel.addElement(chatterName); 
```

这很好地将一个喋喋不休的名字附加到一个 JList 中。

# jquery-globalization - jQuery Globalize - 如何添加新的日历模式

> ID：12964459
> 
> 赞同：1
> 
> 时间：2012-10-18T22:03:09.957
> 
> 标签：jquery-globalization

我想为 jQuery Globalize 添加对通用日期时间格式的支持，因为它是在 .NET中将 a 输出`DateTime`为 a的默认格式。`string`

如何扩展现有文化并添加新的日历模式？[GitHub页面](https://github.com/jquery/globalize#extend)记录了该功能`addCultureInfo`，但我已经能够使用如此深的路径来实现它：

`calendars > standard > patterns`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:53:04.593

我花了一段时间在浏览器的控制台中摆弄它，但就是这样。请注意，添加不在日历 > 标准 > 模式中。

```
Globalize.addCultureInfo("en-US", {
    calendar: {
        patterns: {
            X: 'ddd MMM dd yy'
        }
    } }); 
```

# python - 使用 for() 循环在范围内添加数字

> ID：12964460
> 
> 赞同：1
> 
> 时间：2012-10-18T22:03:16.167
> 
> 标签：python

我无法填写有关在线 python 教程的问题。这似乎很简单，但对于我的生活，我无法弄清楚。这就是问题“**编写一个将所有数字 1 加到 10 并返回总和的 for 循环。** ”这是我一直在尝试的代码：

```
def run():
    sum = 0
    for i in range(11):
        sum += i
        return sum 
```

我究竟做错了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T22:04:24.263

一次迭代后，您将在循环内返回。您需要对`return`语句进行缩进，使其落在循环之外：

```
def run():
    sum_ = 0
    for i in range(11):
        sum_ += i
    return sum_ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-29T06:39:15.293

如果有人想知道如何将 0 + 1 计数加到 100。有它！

```
 x = 0
    while x<100:
        x += 1
        print(x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:04:58.390

您正在从 for 循环中返回总和。把它缩进外面。将其保持在与 for 相同的缩进级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-02T04:54:18.867

# 您需要减少 return 语句，使其落在循环之外：

```
def addNumbers(num)
    总和=0
    对于范围内的 i (0,num+1)
        总和=总和+我
    返回总和

```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-13T11:53:16.220

def run(n): total = 0 for item in range(n): total = total + item return total

打印（运行（11））

# excel - VBA 数据透视表错误

> ID：12964470
> 
> 赞同：0
> 
> 时间：2012-10-18T22:04:22.797
> 
> 标签：excel, vba, error-handling, pivot

我正在尝试通过编写用户定义的函数来使 Excel 工作表更具可读性和更容易使用我正在尝试转换这样的公式，

```
=If(IsErr(GetPivotData(Pivot Look up information here)),0,GetPivotData(Pivot Look up information here)) 
```

带有vba代码

```
pt.GetPivotData(Pivot Look up information here) 
```

我无法检测 VBA 中查找查询的问题。在上面的公式中，这是使用 IsErr 函数处理的。我试过使用 IsError(pt.GetPivotData(Pivot lookup information here))，但程序因运行时错误“1004”应用程序定义或对象定义错误而崩溃。当我从没有 IsError 的 sub 调用函数时，我得到了同样的错误。

如何让 VBA 检测这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:11:41.797

简短的回答是你不能。如果语法正确，VBA 编辑器不会告诉您有错误，编译器也不会告诉您，就像您粗心大意时可以钻研一样。您正在使用正确的工具来穿孔，但不是在正确的材料上。

当您访问不存在的对象或未设置的对象时，会发生此类错误。使用调试器逐行检查每一行，并使用`local variables`窗口，甚至可能是`execution`窗口和一些间谍来检测哪里出了问题。

真的，如果没有更多的代码和上下文，我认为我们无法提供更多帮助。

# ios - 了解 iOS 中的多线程

> ID：12964473
> 
> 赞同：2
> 
> 时间：2012-10-18T22:04:47.260
> 
> 标签：ios, multithreading, nsthread, nstask, nsrunloop

我正在尝试更详细地了解 iOS 上的多线程。我浏览了一些类引用，如`NSThread`, `NSRunLoop`, `NSTask`..

首先如以下链接所示： [使用runloop](https://stackoverflow.com/questions/9304253/use-of-nsrunloop-for-avoiding-event-driven-code)

`Runloop`在`Thread`.

那么为什么我们需要`Runloop`在我们的应用程序中定义我们自己的呢？在这种情况下`NSThread`它很有用，因为一些耗时的进程可以在单独的线程中运行，这样应用程序仍然可以在主线程上响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:18:54.357

如果您有一个线程要定期继续其工作，那么与线程的运行循环交互可能会很有用。也就是说，一个运行循环会做一些工作，然后当它完成该工作时，它会让线程休息一段时间，然后在稍后恢复工作——有效地防止线程退出。您不需要与它们交互或定期自己配置/创建它们（如果您使用的是高级抽象，例如 Foundation，则只有一小部分应用程序符合条件，因为 Foundation 在大多数情况下会代表您设置它们）。

如果您的辅助线程只是执行指定的任务并且*不需要*等待某些外部事件（例如下载完成），那么您（通常）不需要与运行循环交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:09:58.553

您可能会考虑使用`NSOperationQueues`，因为它们将自行管理`NSOperations`，`NSBlockOperations`将允许取消任务并且可以在主线程和后台线程上安排。

# javascript - 如何使用回调嵌套 jQuery .when 调用？

> ID：12964476
> 
> 赞同：0
> 
> 时间：2012-10-18T22:05:01.727
> 
> 标签：javascript, ajax, jquery, asynchronous

我有一个加载部分的功能。

```
function loadSection(sectionId, onLoaded) {
    $.when(
        loadTemplate(sectionId),
        // etc
    )
    .then(function () {
        // removed for brevity
    }
} 
```

在`loadTemplate`函数中，我淡出当前模板，并在淡出后加载新模板。

```
function loadTemplate(sectionId) {
    // Fade out current template.
    return $content.fadeOut(function () {
        // After fade out, load new template via ajax.
        $.ajax({
            url: settings.apiUrl + 'GetSectionTemplate',
            data: { sectionId: sectionId },
            type: 'post',
            success: function (template) {
                // Add new content and fade in new template.
                $content
                    .html(template)
                    .fadeIn();
            }
        });
    });
} 
```

问题是在`$.when`继续之前唯一等待fadeOut 函数完成。我需要它来等待fadeOut 和ajax 调用完成，但我需要ajax 调用仅在fadeOut 完成后执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:31:20.610

创建一个延迟对象，返回它，然后在 ajax 完成时解析它：

```
function loadTemplate(sectionId) {
    var deferred = $.Deferred();
    $content.fadeOut(function () {
        $.ajax({
            url: settings.apiUrl + 'GetSectionTemplate',
            data: { sectionId: sectionId },
            type: 'post',
            success: function (template) {
                $content.html(template).fadeIn();
                deferred.resolve();
            }
        });
    });
    return deferred;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:21:49.223

只需使用 an`Array`将*Promise 对象推入*并返回即可。像

```
function loadTemplate(sectionId) {
    var promises = [ ];

    // Fade out current template.
    promises.push($content.fadeOut());
    promises.push($.ajax({
        url: settings.apiUrl + 'GetSectionTemplate',
        data: { sectionId: sectionId },
        type: 'post',
        success: function (template) {
            // Add new content and fade in new template.
            $content
                .html(template)
                .fadeIn();
        }
    }));

    return promises;
} 
```

然后像这样称呼它

```
$.when.apply( null,
    loadTemplate(sectionId)
).then(function() {
}); 
```

如果您需要对 promise-objects 解析的顺序进行更多控制，或者您想要拦截/过滤结果，您也可以使用`.pipe()`concat *the* promises。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T22:14:35.427

尝试使您的 ajax 调用同步：

```
 $.ajax({
    async: false,
    url: settings.apiUrl + 'GetSectionTemplate',
    ...
    ... 
```

# objective-c - 有没有办法在加载到 NSString 之前将制表符 (\t) 转换为空白？

> ID：12964480
> 
> 赞同：1
> 
> 时间：2012-10-18T22:05:23.250
> 
> 标签：objective-c

> **可能重复：**
> [用 \t 替换 NSString 中的选项卡](https://stackoverflow.com/questions/7400514/replace-tab-in-nsstring-with-t)

根据标题：将`\t`文本文件加载到 NSString 时，有没有办法将制表符（）转换为空白？我正在尝试转换文本文件，他们给我带来了麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:08:44.920

这应该有效：

```
NSString *test = @"hi\tsecond column\t";
NSString *stringWithWhiteSpace = [test stringByReplacingOccurencesOfString:@"\t" withString: @" "; 
```

`test`只是一个测试字符串，它将是您正在加载的文本文件。`stringWithWhiteSpace`是带有空格而不是制表符的字符串。

# java - 对java进行四舍五入的调用方法

> ID：12964483
> 
> 赞同：1
> 
> 时间：2012-10-18T22:05:38.350
> 
> 标签：java, methods, casting, formatting

好的，所以我不明白为什么它说该方法没有在本地使用……私有 String formatNumber() 方法就是这样说的。

基本上我需要做的是有一个返回圆周的方法 - 另一种将数字四舍五入到小数点后 2 位并返回字符串的方法 - 以及另一种返回格式化版本的圆周的方法......

不难看出我正在尝试做什么，但它给了我上述错误，我无法弄清楚。

```
//figures out circumference
public  double getCircumference(){

    circumference = 2 * Math.PI * radius;

    return circumference;

}
    //takes string and turns back into a double
public double getFormattedCircumference(){

    double x = Double.parseDouble(format);
    return x;

}
//this method is giving the error of not being used locally...
    //method takes double and turns to string so that it can be formatted and it
      has to be a string
private String formatNumber(double x){

    x = circumference;
    NumberFormat number = NumberFormat.getNumberInstance();
    number.setMaximumFractionDigits(2);
    String format = number.format(x);
    return format;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:07:04.907

您已经声明了私有方法，但您没有在当前代码的任何地方使用它，因此编译器会警告您这一点（检查您的程序以查看您是否在任何地方调用此方法）。

顺便说一句，您看到的是*警告*而不是*错误*。您的代码仍应编译，并且程序仍将运行（如果不存在错误）。

* * *

**编辑 1**
你的方法有一个严重的问题，可能不止一个，因为它接受一个双参数，然后立即丢弃它。为什么？如果要格式化作为参数传入的数字，则不希望丢弃该参数。另外，您是否要创建此方法 `public`以便该类之外的对象可以调用它？此外，该方法将具有状态还是无状态？它会使用类的字段，还是只格式化传递给它的数字。如果是后者，那么它应该是一种`static`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:48:43.670

我都明白了。我让它变得比实际上更难。

```
//figures out circumference
public  double getCircumference(){

circumference = 2 * Math.PI * radius;

return circumference;

}

public String getFormattedCircumference(){

return formatNumber(getCircumference());

}

//formats to two decimal places.
private String formatNumber(double x){

NumberFormat number = NumberFormat.getNumberInstance();
number.setMaximumFractionDigits(2);
String format = number.format(x);
return format;
} 
```

# html - 如何将` ...`部分插入HtmlArea编辑器？

> ID：12964487
> 
> 赞同：1
> 
> 时间：2012-10-18T22:06:02.807
> 
> 标签：html, visual-editor, jhtmlarea

重现步骤：

1.  使用 jHtmlArea 编辑器。
2.  转到 Html 编辑模式。
3.  添加`<script>...</script>`部分，例如 yandex 地图小部件。
4.  转到可视化编辑模式。
5.  转到 Html 编辑模式。

部分`<script>...</script>`将被打破。

如何解决此问题以`<script>...</script>`正确将部分插入 jHtmlArea 编辑器？可能有这个插件吗？

编者如下（xinha）：[http ://xinha.webfactional.com/browser/trunk?rev=631](http://xinha.webfactional.com/browser/trunk?rev=631)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:12:49.593

我不太了解 HtmlArea 编辑器。然而，大多数编辑器都会这样做——一些手动添加的标签（例如脚本）将被视为不同的，因为它们应该是不同的。

我以前做的是在编辑器中输入内容后直接进入数据库并插入脚本。当然，前提是您可以访问数据库。

# wpf - INotifyPropertyChange 在绑定到 DataTrigger 时被忽略

> ID：12964488
> 
> 赞同：1
> 
> 时间：2012-10-18T22:06:04.200
> 
> 标签：wpf, xaml, binding, datatrigger

我正在处理一些代码，它有一个包含图像和一些文本的 Button，它应该显示图像、文本或两者，具体取决于绑定属性的值。该代码当前使用 Styles 和 DataTriggers：

```
public enum ButtonStyle { Image, Text, Both };

public class ViewModel : INotifyPropertyChanged
{
    private ButtonStyle _buttonStyle;
    public ButtonStyle buttonStyle
    {
        get { return this._buttonStyle; }
        set
        {
            this._buttonStyle = value;
            notifyPropertyChanged("buttonStyle");
        }
} 
```

和：

```
<UserControl.Resources>
    <Style x:Key="buttonTextStyle" TargetType="{x:Type Label}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=buttonStyle}"
                    Value="{x:Static local:ButtonStyle.Text}">
                <Setter Property="Visibility" Value="Collapsed" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="buttonImageStyle" TargetType="{x:Type Image}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=buttonStyle}"
                    Value="{x:Static local:ButtonStyle.Image}">
                <Setter Property="Visibility" Value="Collapsed" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources>

<Button>
    <StackPanel>
        <Image Source="..." Style="{StaticResource buttonImageStyle} />
        <Label Style={StaticResource buttonTextStyle}>My Text</Label>
    </StackPanel>
</Button> 
```

我的问题？当我更改视图模型中 buttonStyle 属性的值时，按钮不会更改。此控件位于选项卡中，如果我切换到另一个选项卡然后切换回来，按钮会更新以反映 buttonStyle 属性的当前值，但在我这样做之前它不会改变。

看起来 DataTrigger 仅在呈现控件时才被处理，并且在修改绑定值时不会重新呈现，尽管绑定值引发了 PropertyChanged 事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:42:06.710

在每个数据触发器上尝试 NotifyOnSourceUpdated=True。

```
 <DataTrigger Binding="{Binding Path=buttonStyle, NotifyOnSourceUpdated=True}"
                Value="{x:Static local:ButtonStyle.Text}">
            <Setter Property="Visibility" Value="Collapsed" />
        </DataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:29:01.743

这是一个想法 - 任何时候您遇到绑定问题并且看起来 INotifyPropertyChanged 不起作用，请检查并仔细检查并确保您在 PropertyChangedEventArgs() 中拼写了产权名称。

抱歉，添麻烦了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:05:14.340

我认为这是在 DataTrigger 中引用枚举的更好方法：

```
 <Style x:Key="buttonImageStyle" TargetType="{x:Type Image}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=buttonStyle}">
                <DataTrigger.Value>
                    <local:ButtonStyle>Text</local:ButtonStyle>
                </DataTrigger.Value>
                <Setter Property="Visibility" Value="Collapsed" />
            </DataTrigger>
        </Style.Triggers>
    </Style> 
```

资源的值在运行时发生变化，这就是为什么你应该使用 DynamicResource 而不是 StaticResource：

```
Style="{DynamicResource buttonImageStyle}" 
```

# java - 如何从 JButton/JLabel 更新 ImageIcon

> ID：12964492
> 
> 赞同：0
> 
> 时间：2012-10-18T22:06:28.023
> 
> 标签：java, image, swing, jlabel, imageicon

关闭模式对话框后，我在从按钮更新（或刷新）图标时遇到问题。图像基本上被 的某些操作覆盖`JDialog`。

这是我的代码：

```
conf = new Configurar(this, true,control);           
conf.setVisible(true); // Open dialog
System.out.println("Cerrado"); // Check if is closed (debug)
String logo =(String)config.get("logo"); // get path from image
File newIcon =new File(logo); // Desesperate try
ImageIcon img = new ImageIcon(newIcon.getAbsolutePath()); 
btn_main_image.setIcon(img);
this.update(btn_main_image.getGraphics());
btn_main_image.updateUI(); // First Try
this.repaint(); // Second Try 
```

第一次它工作正常，但是当我打开对话框并更改图像时保持不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:14:54.007

```
conf = new Configurar(this, true,control);           
conf.setVisible(true); // Some kind of file chooser ??
File newIcon =new File(logo);
if (newIcon.exists()) {
   ImageIcon img = new ImageIcon(newIcon.getAbsolutePath()); 
   btn_main_image.setIcon(img);
   //this.update(btn_main_image.getGraphics()); // WHAT IS THIS?!?!?!
   //btn_main_image.updateUI(); // NO NO NO, this has nothing to do with refreshing the graphics, it's L&F stuff
   btn_main_image.invalidate();
   // Use this ONLY if invalidate doesn't work...
   btn_main_image.revalidate();
   btn_main_image.repaint();
} 
```

# oracle - oracle bigfile 导入：设备的 ioctl 不合适

> ID：12964494
> 
> 赞同：0
> 
> 时间：2012-10-18T22:06:46.040
> 
> 标签：oracle, import, bigdata

Oracle 11G，Linux 200GB 空间。一些文件已经占用了大约 25GB。

我收到了一个`.dmp`50GB 的“”文件，为了执行导入，我创建了一个带有 100GB 的 bigdatafile 的 bigtablespace（因为我认为这已经足够了）。

导入命令：

```
imp user/pwd full=Y log=/home/oracle/log.txt file=/usr/oracle/public/dump.dmp 
```

但是在导入大量表并向其中插入大量数据后，我收到以下错误消息：

> ```
> IMP-00017: following statement failed with ORACLE error 603:
>  "CREATE UNIQUE INDEX "PR_TABLE1" ON "TABLE1" ("TABLE1_ID" , "ROW_NUM" , "COL_NUM" ) "
>  " PCTFREE 10 INITRANS 2 MAXTRANS 255 STORAGE(INITIAL 4294967294 FREELISTS 1 "
>  "FREELIST GROUPS 1 BUFFER_POOL DEFAULT)                      NOLOGGING"
> IMP-00003: ORACLE error 603 encountered
> ORA-00603: ORACLE server session terminated by fatal error
> ORA-01114: IO error writing block to file 201 (block # 1719438)
> ORA-27072: File I/O error
> Linux-x86_64 Error: 25: Inappropriate ioctl for device Additional information: 4 Additional information: 1719438 Additional information:
> 114688
> ORA-01114: IO error writing block to file 201 (block # 1719438)
> ORA-27072: File I/O error
> Linux-x86_64 Error: 25: Inappropriate ioctl for device Additional information: 4 Additional information: 1719438 Additional info
> IMP-00017: following statement failed with ORACLE error 3114:
>  "BEGIN  SYS.DBMS_EXPORT_EXTENSION.SET_IMP_SKIP_INDEXES_OFF; END;"
> IMP-00003: ORACLE error 3114 encountered
> ORA-03114: not connected to ORACLE
> IMP-00000: Import terminated unsuccessfully 
> ```

“临时”数据文件消耗了大约 15GB。

根据我在网上阅读的有关试图扩展自身的数据文件的内容，它似乎空间不足。Linux 显示大约 8GB 可用空间，但可能会将它们保留用于其他用途。

问题是：有没有办法让我知道我应该给硬盘驱动器多少空间才能成功实现导入？？？

之所以问这个是因为上传“.dmp”文件到服务器需要很长时间，创建“.dbf”文件并实现导入需要更多时间。

客户不知道此信息。我不是 Oracle DBA，但我曾经成功地将 .Net 应用程序连接到 Oracle 数据库，所以现在我应该是这里的专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:07:37.400

我假设您的数据文件和临时文件在文件系统上？

因此，对于临时文件，Oracle 将它们创建为稀疏文件。所以，如果你的文件系统有 100MB 的可用空间。即使只有 100MB 的可用空间，您*也可以在该文件系统中创建一个大小为 2GB 的临时表空间。*因此，很容易过度分配空间。所以，一旦你开始使用这个临时空间，当你的使用量超过 100MB 时，你就会得到上面的错误，“不适合设备的 ioctl”。

因此，请理智地检查您的数据文件和临时文件的大小，以及您*实际*拥有的可用空间量。请注意，一旦您开始使用临时文件中的空间，文件的大小（由 O/S 报告）可能不会改变，但由 O/S 报告的可用空间会减少，直到达到零并且文件系统已满。

另请注意，在大型表上创建索引可能会占用大量临时空间，尤其是在您使用 WORKAREA_SIZE_POLICY=AUTO 和 PGA_AGGREGATE_TARGET 时。（我知道，如果您是 Oracle 新手，而不是 DBA，那可能没有任何意义，请不要担心。）

您可能想要做的是使用“INDEXES=N”运行导入，只导入数据，然后在事后创建索引，从脚本运行。这样，您可以设置 WORKAREA_SIZE_POLICY=MANUAL，并设置非常大的 sort_area_size 和 sort_area_retained_size。这可能（也可能不会，取决于正在创建的索引的大小）减少临时表空间的空间使用。

因此，总而言之，首先检查临时文件的大小以及文件系统中剩余的空间。如果你有一个最初稀疏文件的问题，现在已经过度使用你的空间，那么你需要解决这个问题。最好的办法可能是删除临时表空间，然后检查文件系统中的可用空间量，然后根据您的情况创建一个新的临时表空间。

然后，其次，看看您是否可以在索引构建期间调整 TEMP 空间消耗，使用手动工作区大小策略并显式设置 sort_area_size/sort_area_retained_size。

希望有帮助。

# node.js - 没有客户端的 SocketStream.js 怎么办？

> ID：12964495
> 
> 赞同：0
> 
> 时间：2012-10-18T22:06:47.993
> 
> 标签：node.js, rpc, socketstream

我有兴趣使用 socketstream + node.js 为我的网站开发一个 rt 模块。我只对socketstream中的服务器端感兴趣，而不是客户端。如何从普通的 php/html 应用程序访问套接字流，我必须包含哪些 js？我主要对 rpc、pub/sub 和身份验证/会话感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T22:50:42.740

我不建议这样做，因为它是非正统的。

也就是说，我确实记得有人想在他们的应用程序中使用早期版本的 SocketStream，它是在 .net 平台上构建的。事实证明，他们通过将 SocketStream 应用程序的网页嵌入到 iframe 中来使其工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T18:32:54.133

看看这个框架：

> [http://www.socketstream.org/](http://www.socketstream.org/)

附带大量示例，易于使用。

# grid - 如何在 KendoUI 中获取选定的行值

> ID：12964498
> 
> 赞同：46
> 
> 时间：2012-10-18T22:07:01.117
> 
> 标签：grid, kendo-ui

我有一个 kendoUI 网格。

```
 @(Html.Kendo().Grid<EntityVM>()
                    .Name("EntitesGrid")
                                .HtmlAttributes(new { style = "height:750px;width:100%;scrollbar-face-color: #eff7fc;" })
                    .Columns(columns =>
                    {
                        columns.Bound(e => e.Id).Hidden().IncludeInMenu(false);
                        columns.Bound(e => e.EntityVersionId).Hidden().IncludeInMenu(false);
                        columns.Bound(e => e.Name).Width("70%").Title("Entity Name");
                        columns.Bound(e => e.EIN).Width("30%");
                    })
        .ToolBar(toolBar => toolBar.Template("<a class='k-button k-button-icontext k-grid-add' id='addEntity'><span class='k-icon k-add'></span>Entity</a>" +
             "<a class='k-button k-button-icontext' id='editEntity'><span class='k-icon k-edit'></span>Edit</a>"))
                    .DataSource(dataSource => dataSource
                    .Ajax().ServerOperation(false)
                    .Model(model => model.Id(e => e.Id))
                    .Read(read => read.Action("GetEntities", "Entity", new { projectId = Request.QueryString[DataKeyNameConstants.ProjectId] })))
                    .Sortable()
                    .Scrollable()
                    .Filterable()
                    .Resizable(resize => resize.Columns(true))
                    .Reorderable(reorder => reorder.Columns(true))
                    .ColumnMenu()
                    .Selectable(s => s.Mode(GridSelectionMode.Multiple))
                    .Events(events => events.Change("entSelChange"))
            ) 
```

现在，我需要从选定的行中获取 EntityVersionId 的值。但不知道该怎么做。

这是我的javascript函数

```
$("#editEntity").click(function () {

    var entityGrid = $("#EntitesGrid").data("kendoGrid");

    // what should I do from here
}); 
```

**更新：添加代码以循环所有行。**

```
function loadPreviousEntityVersion() {

    alert("sdfsdfsdf");
    var entityGrid = $("#EntitesGrid").data("kendoGrid");
    var data = entityGrid.dataSource.data();

    for(var i = 0; i<data.length; i++) {
        var currentDataItem = data[i];
        alert(dataItem.EntityVersionId);

    }
} 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-10-18T23:00:29.267

一种方法是使用 Grid 的[`select()`](http://docs.kendoui.com/api/web/grid#select) 和[`dataItem()`](http://docs.kendoui.com/api/web/grid#dataitem)方法。

在单选情况下，`select()`将返回可以传递给的单行`dataItem()`

```
var entityGrid = $("#EntitesGrid").data("kendoGrid");
var selectedItem = entityGrid.dataItem(entityGrid.select());
// selectedItem has EntityVersionId and the rest of your model 
```

对于多行选择`select()`将返回一个行数组。然后，您可以遍历数组，并且可以将各个行传递到网格的`dataItem()`.

```
var entityGrid = $("#EntitesGrid").data("kendoGrid");
var rows = entityGrid.select();
rows.each(function(index, row) {
  var selectedItem = entityGrid.dataItem(row);
  // selectedItem has EntityVersionId and the rest of your model
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-12-03T13:35:03.813

有更好的方法。我在使用 kendo angularJS 指令且网格没有 ID 的页面中使用它...

```
change: function (e) {
   var selectedDataItem = e != null ? e.sender.dataItem(e.sender.select()) : null;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-09T05:08:20.817

我认为需要检查是否选择了任何行？下面的代码将检查它：

```
var entityGrid = $("#EntitesGrid").data("kendoGrid");
            var selectedItem = entityGrid.dataItem(entityGrid.select());
            if (selectedItem != undefined)
                alert("The Row Is SELECTED");
            else
                alert("NO Row Is SELECTED") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-06T18:30:38.997

如果要选择特定元素，请使用以下代码

```
var gridRowData = $("<your grid name>").data("kendoGrid");
var selectedItem = gridRowData.dataItem(gridRowData.select());
var quote = selectedItem["<column name>"]; 
```

# perl - WWW::Mechanize::Timed https 超时不起作用

> ID：12964503
> 
> 赞同：3
> 
> 时间：2012-10-18T22:07:26.103
> 
> 标签：perl, https, timeout, try-catch, www-mechanize

所以我已经研究了互联网的尽头（至少我是这么认为的）关于这个问题。我正在尝试为`alarm`a 设置 60 秒的超时，`get()`但它不会被捕获并且会运行超过 60 秒，而且任何时候达到 www::mechanized::timed 构造函数的默认超时（180 秒），我得到以下错误：

在 /usr/lib/perl5/site_perl/5.10.0/WWW/Mechanize/Timed.pm 第 52 行使用未初始化的值 (+)。

代码：

```
use WWW::Mechanize::Timed;
use HTTP::Cookies;
use Try::Tiny;

my $ua = WWW::Mechanize::Timed->new(
autocheck => 0#turning off autocheck becuase any get errors will be fatal need to check ourselves
);

my $cookies = HTTP::Cookies->new(
autosave => 1
);

$ua->cookie_jar($cookies);

$ua->agent_alias("Windows IE 6");

try{
local $SIG{ALRM} = sub { die "alarm\n" };
alarm 60;
$ua->get('https://secure.site.com'); #secure site that timed out
alarm 0;
} catch {
die $_ unless $_ eq "alarm\n";
print "page timed out after 60 seconds!\n";
exit;
};

my $total_time = sprintf '%.3f', ($ua->client_elapsed_time);

unless($ua->success){
print "Error: " . $ua->status;
exit;
}
... 
```

我已经研究了这些问题，以弄清楚如何在不编写自己的超时函数的情况下让警报工作。

[Perl 机械化超时不适用于 https](https://stackoverflow.com/questions/5209915/perl-mechanize-timeout-not-working-with-https) 和 [在 Perl 中执行超时的方法？](https://stackoverflow.com/questions/2423288/ways-to-do-timeouts-in-perl)

到目前为止，我看到了使用 LWPx::ParanoidAgent 的建议，不确定我是否理解“使用 LWPx::ParanoidAgent 并将其混入 Mech”部分

[可以在 https 上的 WWW::Mechanize 中使用超时吗？](https://stackoverflow.com/questions/11330610/possible-to-use-timeout-in-wwwmechanize-on-https)

或修补 LWP::UserAgent

[http://search.cpan.org/~sharyanto/LWP-UserAgent-Patch-HTTPSHardTimeout-0.04/lib/LWP/UserAgent/Patch/HTTPSHardTimeout.pm](http://search.cpan.org/~sharyanto/LWP-UserAgent-Patch-HTTPSHardTimeout-0.04/lib/LWP/UserAgent/Patch/HTTPSHardTimeout.pm)

关于如何让超时与警报一起工作的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:08:45.910

下面帮助为每个设置警报，除非我错过了什么，否则`get()`似乎比使用 sig 尝试捕获要容易得多？`alarm`

```
use Sys::SigAction qw(timeout_call);

if ( timeout_call( 60 ,sub { $ua->get('https://secured.site.com'); } ))
   {
print "ALARM page timed out after 60 seconds!\n" ;
exit;
} 
```

与这个问题的答案几乎相同，但使用实际代码[在 Perl 中进行超时的方法？](https://stackoverflow.com/questions/2423288/ways-to-do-timeouts-in-perl)

[来自http://metacpan.org/pod/Sys::SigAction](http://metacpan.org/pod/Sys::SigAction)的文本

> 超时调用（）
> 
> `$timeout ,$coderef`
> 
> 给定一个代码引用和一个超时值（以秒为单位）， timeout() 将（在评估中）为 SIGALRM（它将死）设置一个信号处理程序，设置一个闹钟，并执行代码引用。$time (seconds) 可以表示为浮点数。
> 
> 如果 Time::HiRes 存在且可用，timeout_call() 可以与 0.000001 秒的计时器分辨率一起使用。如果 Time:HiRes 不可用，则小于 1.0 的派系秒值会透明地转换为 1。
> 
> 如果警报响起，代码将被中断。如果代码在警报触发之前返回，则警报被取消。如果正在执行的代码超时，则例程返回 true。（被打断）。执行的代码抛出的异常被传播出去。
> 
> 原始信号处理程序在返回给调用者之前被恢复。
> 
> 如果 HiRes 不可加载，Sys::SigAction 将做正确的事情并转换

最后要考虑/记住的一件事：

[使用 Sys::SigAction::timeout_call 不安全？](https://stackoverflow.com/questions/8792444/use-of-syssigactiontimeout-call-unsafe)

# svn - 颠覆的基石和终端抛出错误

> ID：12964504
> 
> 赞同：0
> 
> 时间：2012-10-18T22:07:34.997
> 
> 标签：svn, terminal, versioning, cornerstone

在过去的两个小时里，我一直在浏览解决方案，但无济于事。过去几个月我一直在使用 git 并且喜欢它，但只是继承了一个使用 SVN 的项目。

我上周检查了一份很好的副本。今天我去承诺并遇到了问题。我尝试使用 Cornerstone 以及基本的终端命令行。既推回又不允许我提交这些文件。

[这个线程似乎很有希望](https://stackoverflow.com/questions/5937159/svn-erroraccess-to-svn-myservice-svn-act-d99e498e-9a8d-374c-a3e4-fde21198bfa/6470530#6470530)

但据我所知，我没有大小写差异（除此之外：除了 svn 信息和目测之外还有什么方法可以解决这个问题？也许我的双重检查不正确）

这就是我在终端中得到的：

```
svn: Commit failed (details follow):
svn: access to '/pra-003-11/!svn/act/74c82fe8-1606-4a70-a2ae-26cf6bd595f5' forbidden 
```

基石说：

> ' [https://myurl.svn.beanstalkapp.com/pra-003-11/trunk](https://myurl.svn.beanstalkapp.com/pra-003-11/trunk) '的选项：授权失败：无法对服务器进行身份验证：拒绝基本质询（[https://myurl.svn.beanstalkapp.com](https://myurl.svn.beanstalkapp.com)）

任何帮助将不胜感激。

虽然我有你在这里：有人会说只是搬到 GIT 吗？值得麻烦吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:42:16.113

如果您收到“无法对服务器进行身份验证”，这正是这个问题：您无法在提交**时正确验证自己**。如果您没有获得 auth-prompt 它可能意味着只有一个 - 您已经存储了此 repo 的凭据并且它们是错误的

你可以：

*   至少手动删除过时的凭据和身份验证一次
*   命令的使用`--username`和`--passsword`选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:04:39.853

我与 beanstalk 支持人员交谈，结果项目经理没有授予我适当的访问权限：p

# java - 是否可以通过具有不同目录的控制器访问 URL？

> ID：12964509
> 
> 赞同：0
> 
> 时间：2012-10-18T22:08:13.103
> 
> 标签：java, spring, spring-mvc

我在项目中的基本模块可以通过这个 url 访问：

```
http://localhost:8080/basic/ 
```

我已经用映射定义了控制器`@RequestMapping("/webpage.htm")`。正如我们所期望的，这个视图可以通过这个 URL 访问：`http://localhost:8080/basic/webpage.htm`。

但我的应用程序中还有另一个模块。该模块可通过如下 URL 访问：

```
http://localhost:8080/another/ 
```

而此刻我想做这样的映射：`http://localhost:8080/another/webpage.htm`. 是否可以由同一个控制器处理此请求？

我试图在我的控制器中做这样的事情：

```
@RequestMapping("/{module}/webpage.htm")
public ModelAndView handleMyRequest(@PathVariable("module") String module, 
                    HttpServletRequest request, HttpServletResonse response) {
    //my code
} 
```

但这行不通。当然，我现在可以通过新 URL 访问我的视图：`http://localhost:8080/basic/something/webpage.htm`.

根据这个[http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules](http://en.wikipedia.org/wiki/Same_origin_policy#Origin_determination_rules)我可以用这种方式映射吗？

# gnome - 在 Ubuntu 中为 GNOME 3 创建应用程序启动器

> ID：12964512
> 
> 赞同：30
> 
> 时间：2012-10-18T22:08:19.783
> 
> 标签：gnome, launcher

我的机器上安装了 Ubuntu 12.04 LTS。我还安装了 GNOME 3。然后我安装了 IDE IntelliJ 没有问题。但是我将它安装到自定义位置，现在运行它的唯一方法是通过终端通过“./idea.sh”。我想创建一个应用程序启动器，以便可以通过 GNOME 3 窗口管理器中的应用程序列表启动 IntelliJ。我将如何通过终端而不是通过第三部分实用程序来做这样的事情。我还希望为启动器设置正确的图标，而不是通用图标。感谢您的帮助。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-05-17T17:16:22.593

运行 Intellij，然后转到工具 > 创建桌面条目。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-10-18T22:37:25.230

在目录**/usr/share/applications/**中创建一个名为**intellij.desktop的文件**

 **我的文件看起来像这样

```
[Desktop Entry]
Name=IntelliJ IDEA Community Edition
Comment=Free Java, Groovy, Scala and Android applications development
Exec=/path/to/your/bin/idea.sh
Path=/path/to/your/bin
Terminal=false
Icon=intellij-idea-ce
Type=Application
Categories=Development;IDE 
```

有关更多详细信息，请查看此网站，[http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html](http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html)

**编辑**：mlissner（谢谢！）提到 intelliJ 特别实现了自动添加图标/启动器的功能。只需打开 IntelliJ IDE，转到*工具*并单击*创建桌面条目...*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-12T16:25:24.120

在 Ubuntu 20 (Focal Fossa) 上，使用`alacarte`. 生成的`.desktop`文件会自动放在`~/.local/share/applications`.

`/usr/share/applications/`如果所有计算机用户都可以访问它，请将其从那里移动到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-10T09:14:08.147

您可以使用以下步骤创建启动器第 1 步）安装 gnome-panel sudo apt-get install --no-install-recommends gnome-panel

步骤 2) 运行 gnome-desktop-item-edit gnome-desktop-item-edit ~/.local/share/applications --create-new

步骤 3) 在小部件中填写所需的值**

# javascript - Plupload搞砸了jquery

> ID：12964514
> 
> 赞同：0
> 
> 时间：2012-10-18T22:08:29.113
> 
> 标签：javascript, jquery, plupload

我正在使用图像上传器 Plupload，它导致我页面上的其他 jquery 出现错误。我已经弄清楚到底是什么部分在做它：

```
function $(id) {
    return document.getElementById(id); 
} 
```

如果我把它拿出来，图像上传器不再工作，但 jquery 可以。这里要发布很多代码，有没有人有另一种方法来调用这个函数，以便它与 jquery 一起工作？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:16:00.190

像这样使用 jQuery：

```
jQuery(function($){
  //Your jQuery code here
  // Use $ alias worry-free of conflicts
  alert('You are using jQuery ' + $().jquery );
}); 
```

或者

```
(function($){
  //Your jQuery code here
})(jQuery); 
```

或者

```
$.noConflict();
jQuery(document).ready(function($) {
  // Code that uses jQuery's $ can follow here.
});
// Code that uses other library's $ can follow here. 
```

或者

```
var j = jQuery.noConflict();
// Do something with jQuery
j("div p").hide();
// Do something with another library's $()
$("content").style.display = 'none'; 
```

# node.js - 如何在 webstorm 中记录来自节点的传出 https 请求

> ID：12964517
> 
> 赞同：17
> 
> 时间：2012-10-18T22:08:43.090
> 
> 标签：node.js, https, webstorm

我正在编写一些调用外部 Web 服务的 node.js 代码，但结果很糟糕。我想记录原始请求和响应，以便我可以检查它。

事情是这样的： **我没有直接使用 http 库**，而是通过 OAuth 库使用它。

我已经在 oauth 库代码中添加了调试语句，但我不喜欢它。现在看起来我将不得不进入 http 库并开始搞乱它？这不可能是正确的。

如果我在窗户上，我会启动提琴手。一位朋友提到了wireshark，但wireshark告诉我必须安装X11。真的吗？我不会去那个兔子洞。

然后我尝试了节点检查器，但我认为这是针对服务器代码而不是客户端代码。它说您假设在附加之前启动您的节点进程。好吧，我的节点进程是一个测试用例（誓言），它在开始后不久就结束了......所以那里没有运气。

我想这对于任何堆栈都很难，但天哪，这让我想念.net！

那么，在将 node.js 用作山狮外部 Web 服务的客户端时，我如何检查线路上发生了什么？

谢谢！担

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2014-12-11T21:22:59.703

`http`出于同样的原因，设法在/`https`请求上安装了一个钩子。

```
function requestLogger(httpModule){
    var original = httpModule.request
    httpModule.request = function(options, callback){
      console.log(options.href||options.proto+"://"+options.host+options.path, options.method)
      return original(options, callback)
    }
}

requestLogger(require('http'))
requestLogger(require('https')) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-23T22:55:12.463

您可以查看[global-request-logger](https://www.npmjs.com/package/global-request-logger)模块，该模块使用 @uiron 提到的相同技术，但具有更多详细信息。

# asp.net-mvc - MVC4 Web Api 不返回实体框架 IEnumerable()

> ID：12964520
> 
> 赞同：0
> 
> 时间：2012-10-18T22:08:48.473
> 
> 标签：asp.net-mvc, vb.net, entity-framework, asp.net-web-api

我有一个简单的表，如下所示，与实体框架映射。我试图只返回一个非常基本的 IEnumerable(Of MyTableObject) 调用，但是 MVC API 只是用错误代码 500 炸毁。当我尝试返回一个 IEnumerable(Of String) 并只选择一个列时，它会执行相同的操作。

![实体框架模型](../Images/f20a958b2b33fce834b148ed6ef39e0b.png)

我尝试使用以下代码返回此模型。

```
' GET api/chatlog
Public Function GetValues() As IEnumerable(Of ChatLog)
    Using mcEntity As New McEntities

        Return mcEntity.ChatLogs.ToList()
    End Using
End Function 
```

返回数据对我来说很不幸。我什么都得不到？

MVC Web API 是否不支持将对象从 EF 传递到管道中，还是我必须手动将其序列化为 XML？

Fiddler 抛出“HTTP/1.1 500 内部服务器错误”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:02:47.280

几件事，

1.  您可以通过执行在错误消息中启用异常详细信息吗？

    Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;

    并共享异常消息和堆栈跟踪？

2.  关于 using 语句，通常建议将您的 EFContext 配置在控制器中，而不是在操作中。ApiController 是一个 IDisposable。您应该覆盖控制器的 Dispose 方法并在那里处理您的 DBContext。例子，

    ```
    public CustomersContext _db = new CustomersContext();

    public IEnumerable<Customer> Get ()
    {
        return _db.Customers;
    }

    protected override Dispose(bool disposing)
    {
        base.Dispose(disposing);

        if(disposing)
        {
            _db.Dispose();
        }
    } 
    ```

# c# - 签入：未执行操作找不到文件 *.csproj.vspscc

> ID：12964526
> 
> 赞同：12
> 
> 时间：2012-10-18T22:09:15.667
> 
> 标签：c#, visual-studio-2010

由于我对项目和解决方案进行了一些更改，我在签入代码文件时遇到问题。我重命名了项目文件，在解决方案中添加了不同的项目文件，并在现有项目中添加了许多文件。现在我在签入代码时遇到错误。错误详情如下：

> 签入：未执行操作找不到文件'....Console.csproj.vspscc'。

如果不是自己创建的 vspscc 文件，如何创建它？

任何帮助都会很棒，并在此先感谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-23T21:23:36.727

这对我来说看起来很愚蠢。我重新启动了 Visual Studio，我可以执行签入，因为 Visual Studio 在打开项目和解决方案时创建了 vspscc 文件。

尽可能快地回答我自己的问题，这样其他人就不会在我面前打印我自己的疏忽。

对于任何需要有关如何创建 vspscc 文件的答案的人，请重新启动 Visual Studio IDE

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-09T13:03:20.180

我还在另一种情况（VS2012）中看到了这种情况，其中简单的重启并没有起到作用。

我有许多新项目已添加到现有解决方案中，但位置错误。在签入之前，撤消和重新添加似乎没问题，它抱怨找不到新添加的项目和相关的 .vspscc 文件。它是在原来的位置而不是他们现在所在的地方寻找他们。

解决方案是转到源代码管理资源管理器，该资源管理器仍然在这些文件的原始（但不存在）位置以及正确位置的文件中具有签入项。为这些文件选择这些错误的引用和“撤消挂起的更改”确实解决了问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-16T15:21:12.837

我会尝试使用 File/SourceControl/ChangeSourceControl 对话框并取消绑定（如有必要），然后将项目重新绑定到 TFS 以重新创建 .csproj.vspscc。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-30T15:17:00.160

我删除了项目并且遇到了同样的问题，所以我的解决方案是重新创建具有相同名称的相同项目，然后干净地删除它们:-) 我希望这会有所帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-28T17:59:32.227

我遇到了类似的问题，但在我的情况下，我的 Visual Studio/TFS 无法处理 .csproj 文件。无论如何，在一位同事的帮助下，我能够确定问题出在 TFS 本身。TFS 对源代码的看法可能与 Visual Studio 不同。我创建了错误类型的项目（我将其称为 Proj1）并将其从 VS 中删除。然后创建了正确的项目类型，我将其称为 Proj2。当我将它检入 TFS 时，它抱怨 Prog1.csproj，这让我很困惑，因为我在 VS 中看不到它。我学到的是你必须进入 TFS 的源代码控制资源管理器。从那里您将看到 TFS 如何看待事物。果然，有 Proj1.csproj（以及一些其他与 Proj1 相关的文件）。我必须在源代码管理资源管理器中做的是撤消挂起的签入 那些我不想签入并且无论如何不再存在的文件和文件夹。然后 TFS 很高兴，我可以进行签到。

# apache - mod_rewrite：如果 URL 中还没有，则删除 www 并重定向到文件夹

> ID：12964528
> 
> 赞同：1
> 
> 时间：2012-10-18T22:09:20.363
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

第一次来这里，我有点像 mod_rewrite 和 regex 菜鸟，所以如果我错过了什么，请告诉我。我整天在这里和其他地方搜索，但没有找到我需要的东西。

我正在寻找一组 RewriteConds 和 RewriteRules 来完成以下任务：

*   删除 www（如果存在于 URL 中）
*   重定向到一个文件夹，如果 URL 中还没有
*   保留 URL 的其余部分

我在一个特定的子文件夹（我们称之为 /webapp）中安装了一个 Web 应用程序，它被配置为在 url 上**不需要www。**如果用户包含 www，它会向用户显示一个愚蠢的恼人消息。我可以深入研究应用程序并对其重新编程，但我想通过 .htaccess 和 mod_rewrite 为用户处理它，并同时将它们转储到文件夹中，如果他们忘记键入它，则使用 301 重定向完成所有这些操作.

例如，我想要以下任何请求

```
http://www.mydomain.org/webapp/anything
http://www.mydomain.org/anything
http://mydomain.org/anything 
```

被重定向到

```
http://mydomain.org/webapp/anything 
```

显然，如果请求一个“正确”的 URL（以 开头`http://mydomain.org/webapp/`），它根本不会被重写。

到目前为止，我最好的猜测如下：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www\.mydomain\.org$ [NC]
RewriteRule ^(.*)$ http://mydomain.org/$1 [R=302]

RewriteCond %{REQUEST_URI} !^/webapp.*$ [NC]
RewriteRule ^(.*)$ http://mydomain.org/webapp/$1 [R=302] 
```

这似乎根据[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)工作，但在实践中，并没有那么多。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:38:23.943

尝试：

```
RewriteCond %{HTTP_HOST} ^www\.mydomain\.org$
RewriteRule ^ mydomain.org/$1 [L,R=301]

RewriteCond %{REQUEST_URI} !^/webapp.*$
RewriteRule ^/(.*) mydomain.org/webapp/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:27:06.263

我自己在这里找到了答案：[BowlerHat](http://www.bowlerhat.co.uk/blog/mod_rewrite-tips-redirect-site-root-to-subdirectory/)

看起来像这样：

```
# First just remove the www
RewriteCond %{HTTP_HOST} ^www\.mydomain\.org$ [NC]
RewriteRule ^(.*)$ http://mydomain.org/$1 [L,R=301]

# Now redirect into the folder
RewriteCond %{REQUEST_URI} !webapp/ [NC]         # if the provided URI does not start with /webapp,
RewriteRule (.*) http://mydomain.org/webapp/ [L,R=301]         # redirect user to /webapp/ root 
```

我决定如果用户尝试访问 mydomain.org/somethingsomething，只是将他们发送到 webapp 的根目录，而不是 /webapp/somethingsomething。

# ruby-on-rails - 为什么 Ruby on Rails 3.2.8 - 模型中的第一个元素返回 id = 1 而不是 0？

> ID：12964531
> 
> 赞同：1
> 
> 时间：2012-10-18T22:10:07.817
> 
> 标签：ruby-on-rails, ruby

我需要处理遗留的数据库问题，我注意到 Rails 总是将模型的第一个元素设置为 id = 1 而不是零。

这是为什么？

```
class Car < ActiveRecord::Base
    attr_accessible :name
end 
```

在轨道 c

```
> c = Car.new(name: "Subaru")
> c.id
# id = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:22:11.953

这只是遵循数据库中几十年的惯例。

主要 RDBMS 的主键从 1 开始，而不是 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:22:27.187

这些——数组元素的索引和记录的id——是完全不同的概念。

第一个与指针算法有关。因为我们（通常）将数组的第一个元素存储在它的开头，为了解决它，我们需要将 0 添加到数组本身的地址。) 下一个（第二个）元素将放置在 &array + 1 个元素块的大小处，下一个（第三个） - 在 &array + 2 个大小处，依此类推。

记录的 auto_increment id 就是 - 记录的 id，应该比前一个更高（按某个步长值）。同样，我认为用（不存在“先前的”= 0 时的前一个）来描述这一点比使用一些人为规则更容易。而 0 + 1 就是 - 1。

# cakephp - 变量模型名称如何在 CakePHP 表中工作？

> ID：12964534
> 
> 赞同：0
> 
> 时间：2012-10-18T22:10:34.077
> 
> 标签：cakephp, database-design, model, acl, cakedc

查看由 ACL 组件生成的表格（aros、acos），例如 CakeDC 的收藏夹插件，我看到`favorites`带有字段的表格`Favorite.user_id`，`Favorite.model`和`Favorite.foreign_key`。
最后两个组合正在替换旧的`Favorite.post_id`（假设`model`具有 value `'Post'`）。它在某种程度上是一个 HABTM 数据透视表，一侧有一个动态模型名称。
我可以在这里看到一般和有用的想法，但想了解更多关于它的应用。

我的问题：

*   这种模式有名字吗？
*   这在代码方面是如何工作的？我可以看到抽象的原理，但是需要什么样的模型代码才能完成这项工作？它是否涉及拼凑的查询，或者这是否允许平滑的单查询实现？例如：我想一次性获取系统中所有标记为收藏的帖子及其相关用户。
*   这是双向的吗？（从 Post 模型和 User 模型查询）

我想努力实现一种抽象，在其中我放置一种行为来处理这种模式。我确实查看了 CakeDC 代码，但无法弄清楚原理。就我目前的知识而言，这有点太神秘了。因此我的问题在这里。

亲切的问候，
巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:42:33.573

> 这种模式有名字吗？

[http://en.wikipedia.org/wiki/Junction_table](http://en.wikipedia.org/wiki/Junction_table)又名加入表。

> 这在代码方面是如何工作的？我可以看到抽象的原理，但是需要什么样的模型代码才能完成这项工作？它是否涉及拼凑的查询，或者这是否允许平滑的单查询实现？例如：我想一次性获取系统中所有标记为收藏的帖子及其相关用户。

它只是一个普通的连接表，仅此而已。在使用 HABTM 关联时，您可以简单地依赖 CakePHP 正在构建的内容，或者通过使用连接来优化您的查询。请参阅[http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。

该“模式”中不需要模型字段，但允许您只有一个可用于许多不同表/模型的连接表。例如，我们不使用 tags_posts 和 tags_users 关联的标签、用户和帖子，而是简单地使用同一个表并按模型字段进行过滤。

> 这是双向的吗？（从 Post 模型和 User 模型查询）

是的，如果您在两个模型中都设置了 HABTM 关联。

感谢您使用我们的插件。;)

# sql - 如何使用 xPath (10g) 在 Oracle SQL extract() 中获取节点名称

> ID：12964537
> 
> 赞同：3
> 
> 时间：2012-10-18T22:10:42.357
> 
> 标签：sql, oracle, xpath, xmltype, nodename

这是一个 XML 文件：

```
<ROOT>
<A>
    <B>2</B>
    <C>3</C>
    <D>4</D>
</A> 
</ROOT> 
```

如何通过 xPath 获取**标签**名称“C”。函数 name() 在提取中不起作用。

它报告错误：

```
ORA-31011: XML 解析失败
ORA-19202: XML 处理中发生错误
LPX-00601：无效的令牌

```

`gXmlDOM`就是上面的xml字符串，在SQL中怎么做呢？

```
select XMLType(gXmlDOM).extract(p_xmlPath).getStringVal() from dual; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T14:29:32.680

这可能就是你要找的...

```
Select xmltype('<ROOT><A><B>2</B><C>3</C><D>4</D></A></ROOT>')
       .extract('ROOT/A/*[2]')
       .getrootelement()
  From dual; 
```

# silverlight-5.0 - 在 .Net 便携式子集中看不到 ICustomTypeProvider

> ID：12964545
> 
> 赞同：2
> 
> 时间：2012-10-18T22:11:15.840
> 
> 标签：silverlight-5.0, system.reflection, portable-class-library

我在一个项目中创建了一个可移植类库，以在 Silverlight 5 解决方案中保存一些通用代码。我想实现 ICustomTypeProvider 来创建一些灵活的对象，但是我在 PCL 中看不到接口，即使我只选择 .Net Framework 和 SL5 作为库的目标。

System.Reflection出现在4.5框架和SL5中，为什么看不到界面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:50:12.940

我在[Visual Studio Gallery 便携式库工具讨论](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981/view/Discussions/)中提出了同样的问题（在第 2 页上搜索标题为**ICustomTypeProvider**的问题，我无法直接链接它，MS 在想什么）。

David M. Kean 的回复：

> 目前缺少类型的问题是一个时间点问题（即将来会变得更好），并且由于我们在开发低级平台和API时缺乏“可移植性”的考虑而下降。在较新的平台（Windows 应用商店应用程序、.NET 4.5）上，我们公开了真正的子集，即 Windows 应用商店应用程序和 .NET 4.5 之间共有的所有内容都可以从便携设备中使用。对于未宣布平台的较新版本也是如此。

# facebook - 应用的 Facebook 页面不能与应用的命名空间具有相同的 URL

> ID：12964546
> 
> 赞同：1
> 
> 时间：2012-10-18T22:11:18.770
> 
> 标签：facebook, facebook-apps, facebook-page

我有一个 Facebook 应用程序，我需要为它创建一个 Facebook 页面。例如，应用命名空间是 my-namespace123，因此应用 URL 将是[http://apps.facebook.com/my-namespace123](http://apps.facebook.com/my-namespace123)

问题是，当我为其创建 Facebook 页面时，我无法输入[http://www.facebook.com/my-namespace123](http://www.facebook.com/my-namespace123)作为 URL，并且我收到错误消息：“网址不可用。请尝试另一个。”

我检查了一下，似乎有一个带有该 URL 的页面。怎么了？URL中不允许使用连字符吗？是否有某种方法可以使用该 URL 创建页面？请帮忙！谢谢 =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:33:14.587

您无需在[http://www.facebook.com/my-namespace123中添加破折号](http://www.facebook.com/my-namespace123)

如果您的 URL 是[http://www.facebook.com/mynamespace123](http://www.facebook.com/mynamespace123)，您将能够通过[http://www.facebook.com/my-namespace123访问它](http://www.facebook.com/my-namespace123)

例如[http://www.facebook.com/AppStore](http://www.facebook.com/A-p-p-S-t-o-r-e)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:24:40.783

根据 Facebook 的帮助中心，用户或页面的用户名不支持连字符： [https ://www.facebook.com/help/?faq=105399436216001](https://www.facebook.com/help/?faq=105399436216001)

`Usernames can only contain alphanumeric characters (A-Z, 0-9) or a period (".").`

# python - 简化 Flask 中的日志记录

> ID：12964547
> 
> 赞同：9
> 
> 时间：2012-10-18T22:11:22.887
> 
> 标签：python, logging, flask

我目前将此作为我的 Flask 应用程序的基本记录器。虽然我看到有一个[Flask.logger 对象](http://flask.pocoo.org/docs/api/#flask.Flask.logger)。如何使用原生 Flask 记录器？还是我在下面做的很好？

对于不同的日志记录状态的去向，我也有点困惑，例如记录到信息与记录到错误？

```
LOG_FILENAME = 'app_access_logs.log'

info_log = logging.getLogger('app_info_log')
info_log.setLevel(logging.INFO)

handler = logging.handlers.RotatingFileHandler(
    LOG_FILENAME,
    maxBytes=1024 * 1024 * 100,
    backupCount=20
    )

info_log.addHandler(handler)

...

@app.before_request
def pre_request_logging():
    #Logging statement
    if 'text/html' in request.headers['Accept']:
        info_log.info('\t'.join([
            datetime.datetime.today().ctime(),
            request.remote_addr,
            request.method,
            request.url,
            request.data,
            ', '.join([': '.join(x) for x in request.headers])])
        ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T06:11:17.503

可能您想要的描述如下。

```
LOG_FILENAME = 'app_access_logs.log'

app.logger.setLevel(logging.INFO) # use the native logger of flask

handler = logging.handlers.RotatingFileHandler(
    LOG_FILENAME,
    maxBytes=1024 * 1024 * 100,
    backupCount=20
    )

app.logger.addHandler(handler)

...

@app.before_request
def pre_request_logging():
    #Logging statement
    if 'text/html' in request.headers['Accept']:
        app.logger.info('\t'.join([
            datetime.datetime.today().ctime(),
            request.remote_addr,
            request.method,
            request.url,
            request.data,
            ', '.join([': '.join(x) for x in request.headers])])
        ) 
```

# opengl - glGenBuffersARB(1, &_VertexBufferObject) 上的分段错误；

> ID：12964548
> 
> 赞同：1
> 
> 时间：2012-10-18T22:11:25.853
> 
> 标签：opengl, segmentation-fault, mingw, fault, glew

我一直在尝试使用 openGL 制作小行星克隆，并且完全陷入了分段错误，我不确定如何修复。它似乎发生在函数 glGenBuffersARB() 的使用上。如果我使用顶点缓冲区注释掉这些行，程序编译并运行良好（但显然没有渲染）。我在 eclipse 上使用 minGW 编译器和 gdb 调试器，并尝试使用扩展，这样我就可以支持 1.5 之前的 OpenGL 版本。

```
glGenBuffers(1, &_VertexBufferObject);

glBindBufferARB( GL_ARRAY_BUFFER_ARB, _VertexBufferObject ); // Bind The Buffer

glBufferDataARB( GL_ARRAY_BUFFER_ARB, U8VertexCount*3*sizeof(GLfloat), quad,GL_STATIC_DRAW_ARB ); 
```

GLuint 在这样的标头中被声明为私有：

```
GLuint _VertexArrayObject;

GLuint _VertexBufferObject;

int U8VertexStride;

int U8VertexCount; 
```

gdb 跟踪在这里：[gdb trace](http://pastebin.com/embed_js.php?i=h3npeUGf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:06:25.237

我找到了解决问题的方法。似乎声明和使用对象并没有按照我的预期工作。我将对象声明为：CObj Obj；并像这样调用draw：Obj.Draw(); 当我切换到将其声明为指针时：CObj * Obj; 并像这样初始化它： Obj = new CObj(); 然后使用：Obj->Draw(); 开始按我想的那样工作。我不确定为什么会这样，如果有人能够为我解决这个问题，我将不胜感激。

# php - Zend Framework 1.x 和 2.x，它们的兼容性如何？

> ID：12964551
> 
> 赞同：3
> 
> 时间：2012-10-18T22:11:35.230
> 
> 标签：php, zend-framework, zend-framework2

我对学习 Zend Framework 2.x 很感兴趣，并且我注意到有很多关于 ZF 1.8、1.9 等的好书……但是，我没有遇到任何明确说明它适用于 ZF2 的书（除了一个，它是用德语写的）。

为了学习 ZF，我可以坐下来通过文档学习它......然而，这听起来相当令人讨厌，尽管它包含最新信息并且可以说是“最好的”来源。当我学习这个框架时，我想在版本 1.8 或 1.9 上努力获得更丰富的资源。

1.8/1.9 到 2.x 之间有多少重叠？我知道 2.x 使用命名空间和许多新的 PHP 5.3.x 特性，但是这些版本的实现之间真的有那么多变化，我会浪费时间尝试学习低于 2.0 的任何东西吗？

我知道即使有大量的兼容性，我仍然需要回来填补一些“知识空白”。我只是在寻找整个框架的快速运行。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T23:01:12.600

Zend Framework 2 与 ZF1 非常不同。它的核心已被重写，MVC 结构也发生了很大变化。

宣布 ZF2的[博客文章详细介绍了更改的内容以及原因，因此我建议您阅读该文章。](http://framework.zend.com/blog//zend-framework-2-0-0-stable-released.html)如果您没有广泛使用 ZF1，您将不会知道他们正在谈论的某些组件，但这没关系。但正如它所说，ZF2 对熟悉 ZF1 的人来说看起来很陌生。其中一部分是新的 MVC 结构，并且有许多新的核心组件在之前不可用，包括[ModuleManager](http://framework.zend.com/manual/2.0/en/modules/zend.module-manager.intro.html)、[ServiceManager](http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.intro.html)和[EventManager](http://framework.zend.com/manual/2.0/en/modules/zend.event-manager.event-manager.html)，它们提供了更好的方法来完成在 ZF1 中更抽象的任务。

除非您打算使用 ZF1 项目，否则此时学习它没有多大意义；在这一点上，我会立即开始学习 ZF2。如果您现在学习 ZF2 并在路上遇到 ZF1 应用程序，您会遇到一些您不熟悉的事情，但基本上您应该能够理解发生了什么并进入并编辑应用程序并学习你去的时候需要知道什么。

由于 ZF1 和 ZF2 提供的库可以独立使用，因此可以在 ZF1 中使用一些 ZF2 类，只要这些类与 ZF2 中的其他类不太紧密耦合即可。例如，您可以`Zend\Crypt`很容易地从 ZF2 独立使用，但尝试使用`Zend\Form`可能是另一回事，因为它与视图、验证器、过滤器和其他类相关联。

至于学习ZF2，就像你说的，因为它太新了，现在还没有很多书，但是除了[参考指南](http://framework.zend.com/manual/2.0/en/index.html)之外，还有很多可供学习的资源。

我建议您查看[ZF2 入门](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)、[ZF2 骨架应用程序](http://framework.zend.com/downloads/skeleton-app)以及[Zend 网络研讨会](http://www.zend.com/en/resources/webinars/)，您已经可以在其中找到一些很棒的 ZF2 教程，包括由 Zend 框架项目负责人 Matthew Weier O 提供的名为[ZF2 入门](http://www.zend.com/webinar/Framework/70170000000bsuS-ZF2-gettingstarted-20120912.flv)的演示文稿芬尼。还有一个[即将举行的关于 MVC](http://www.zend.com/en/company/news/event/webinar-the-mvc-architecture-of-zf2)的网络研讨会值得注册（免费）。

希望这能回答你的问题！

# sql - 如何通过 SQL 连接选择使用 lat/lng 半径

> ID：12964554
> 
> 赞同：2
> 
> 时间：2012-10-18T22:11:42.677
> 
> 标签：sql, sql-server, join, gis, latitude-longitude

我有一个[SQL 函数](http://weblogs.asp.net/jimjackson/archive/2009/02/13/calculating-distances-between-latitude-and-longitude-t-sql-haversine.aspx)，它使用它们的 lat/lng 坐标计算两点之间的距离。使用此功能，我可以根据给定点的距离从一个大集合（*GEOCODES 表）中列出一组位置，如下所示：*

```
DECLARE @LAT1 float, @LNG1 float,
SET @LAT1 = '34.169540'
SET @LNG1 = '-92.590990'

SELECT E.* FROM GEOCODES E
WHERE dbo.fnGetDistance(E.lat, E.lng, @LAT1, @LNG1, 'miles') < '20' 
```

我有第二个表格（*GEOMILES*），表格中的点之间的距离：

```
LOCATION1  | STATE1  |  LOCATION2  |  STATE2  | DISTANCE
-----------+---------+-------------+----------+---------
New York   |   NY    |    Boston   |   MA     |   220 
```

我想要实现的是一个`SELECT`查询，如果出发点在纽约 20 英里范围内，并且到达点在波士顿 20 英里范围内，则返回距离为 220。到目前为止，我有这个，但是当我通过手动检查 lat/lng 点等加起来知道时，它什么也没返回。任何帮助深表感谢！

```
DECLARE @FROM_LOC VARCHAR(100), @FROM_STA VARCHAR(2), @TO_LOC VARCHAR(100), @TO_STA VARCHAR(2)

SET @FROM_LOC = 'NEWARK'
SET @FROM_STA = 'NJ'

SET @TO_LOC = 'MEDFORD'
SET @TO_STA = 'MA'      

SELECT G.DIST FROM GEOMILES G, GEOCODES E
JOIN GEOCODES C ON C.asciiname = @FROM_LOC AND C.admin1 = @FROM_STA
JOIN GEOCODES D ON D.asciiname = @TO_LOC AND D.admin1 = @TO_STA
WHERE dbo.fnGetDistance(E.lat, E.lng, C.lat, C.lng, 'miles') < '20'
AND dbo.fnGetDistance(E.lat, E.lng, D.lat, D.lng, 'miles') < '20' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:10:38.207

我认为这就是你所追求的（使用你的表结构）。. .

```
SELECT G.DIST
FROM GEOMILES G
, GEOCODES F --from airport
, GEOCODES E --to airport
, GEOCODES C --from location
, GEOCODES D --to location

WHERE C.asciiname = @FROM_LOC 
AND C.admin1 = @FROM_STA

AND D.asciiname = @TO_LOC 
AND D.admin1 = @TO_STA

AND dbo.fnGetDistance(F.lat, F.lng, C.lat, C.lng, 'miles') < 20
AND dbo.fnGetDistance(E.lat, E.lng, D.lat, D.lng, 'miles') < 20

and G.Location1 = F.asciiname
and G.Location2 = E.asciiname
and G.State1 = F.admin1
and G.State2 = E.admin1 
```

替代版本（我认为这会更好）

```
SELECT G.DIST
FROM GEOMILES G
inner join
(
    select fromAirport.asciiname
    , fromAirport.admin1
    from GeoCodes fromAirport
    where exists
    (
        select top 1 1
        from GeoCodes fromLocation
        where fromLocation.asciiname = @FROM_LOC
        and fromLocation.admin1 = @FROM_STA
        and dbo.fnGetDistance(fromLocation.lat, fromLocation.lng, fromAirport.lat, fromAirport.lng, 'miles') < 20
    )
) fromA
    on G.Location1 = fromA.asciiname
    and G.State1 = fromA.admin1
inner join
(
    select toAirport.asciiname
    , toAirport.admin1
    from GeoCodes toAirport
    where exists
    (
        select top 1 1
        from GeoCodes toLocation
        where toLocation.asciiname = @TO_LOC
        and toLocation.admin1 = @TO_STA
        and dbo.fnGetDistance(toLocation.lat, toLocation.lng, toAirport.lat, toAirport.lng, 'miles') < 20
    )
) toA
    on G.Location1 = toA.asciiname
    and G.State1 = toA.admin1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:22:31.750

检查您的`WHERE`条款，您似乎正在寻找距离开始**和**结束位置 20 英里范围内的所有代码 - 您已经指定相距 220 英里。

此外，您将显式`JOIN`s 与隐式 s 混合在一起（逗号分隔的`FROM`子句）。请明确限定所有联接；除其他外，如何`G`以及`E`应该如何相互关联？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:49:03.667

这是我对解决方案的尝试-我在这里使用 GEOGRAPHY 来保存表格的脚本，但希望您可以轻松地根据需要进行调整-如果没有，请告诉我，我会适应：

```
--setup
    declare @OneMileInMeters int = 1609

    declare @t table
    (
        id bigint not null identity(1,1) primary key clustered
        , name nvarchar(64)
        , lat float
        , long float
        , geo geography null
    )

    insert @t
          select 'Seattle', 47.455, -122.2310, null
    union select 'Boston',  42.372,  -71.0298, null
    union select 'Chicago', 41.953,  -87.6430, null
    union select 'Spokane', 47.668, -117.5290, null
    union select 'Philly',  39.888,  -75.2510, null
    union select 'NY',      40.7142, -74.0064, null
    union select 'Newark',  40.7356, -74.1728, null
    union select 'Medford', 42.4183, -71.1067, null

    update @t
    set geo = geography::Point(lat, long, 4326)

--query
    declare @fromLoc nvarchar(64) = 'Newark'
    , @toLoc nvarchar(64) = 'Medford'
    , @maxDistanceToAirport int = 20 * @OneMileInMeters

    select f2.name AirportFrom, t2.name AirportTo, f2.geo.STDistance(t2.geo) / @OneMileInMeters FlightDistance
    from @t f
    , @t t
    , @t f2
    , @t t2
    where f.name = @fromLoc
    and t.name = @toLoc
    and f.geo.STDistance(f2.geo) < @maxDistanceToAirport    
    and t.geo.STDistance(t2.geo) < @maxDistanceToAirport
    and t.id != t2.id
    and f.id != f2.id 
```

# javascript - ul 简单的弹出菜单

> ID：12964555
> 
> 赞同：0
> 
> 时间：2012-10-18T22:11:44.577
> 
> 标签：javascript, html, css

我正在构建一个下拉菜单。主图像有一个翻转和一个滚动事件切换显示包含我的弹出菜单的 div。问题是当我推出主图像时，我的弹出菜单消失了（显然！）。我希望能够将鼠标移到弹出菜单上而不会消失。我还希望图像具有翻转状态 - 这是我的代码：

```
<a class="mypage" href="mypage.html" id="mypageid" onmouseover="document.getElementById('menu-container').style.display = 'block';"  onmouseout="document.getElementById('menu-container').style.display = 'none';"></a>
<div id="menu-container">
    <ul>
        <li><a href="#"><img src="images/nav/button1.jpg" alt="" width="126px" height="21px"/></a></li>
        <li><a href="#"><img src="images/nav/button2.jpg" alt="" width="126px" height="21px"/></a></li>
        <li><a href="#"><img src="images/nav/button3.jpg" alt="" width="126px" height="21px"/></a></li>
    </ul></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:20:58.320

用于解决此问题的常见模式是使用计时器延迟隐藏菜单。如果用户的鼠标在计时器触发之前重新进入触发器或菜单本身，则计时器（和隐藏）被清除。

```
var menuTimer = null;

$('.mypage, #menu-container').mouseenter(function(e) {
    $('#menu-container').show();
    clearTimeout(menuTimer);
});

$('.mypage, #menu-container').mouseleave(function(e) {
    menuTimer = setTimeout(function() {
        $('#menu-container').hide();
    }, 300);
}); 
```

示例：http: [//jsfiddle.net/xA6MH/](http://jsfiddle.net/xA6MH/)

这个概念可以很容易地适应 vanilla JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:23:06.040

我强烈建议阅读此问题的最终解决方案之一 - A List Apart 上的[Hybrid CSS Dropdowns 。](http://www.alistapart.com/articles/hybrid/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:21:54.980

这个页面可以帮助你。

[http://cssmenumaker.com/css-drop-down-menu](http://cssmenumaker.com/css-drop-down-menu)

他们有一个菜单制作器，你可以看到 CSS 是如何工作的。

# java - Java递归数独求解器，递归函数不返回正确值

> ID：12964564
> 
> 赞同：1
> 
> 时间：2012-10-18T22:12:37.487
> 
> 标签：java, recursion, backtracking, sudoku, solver

我正在使用数独求解器，但无法正确返回/结束求解器函数。`show()`函数中的被`moveOn()`调用并显示完整的数独，但求解返回 false。我试图在问题解决时解决返回 true，在问题无法解决时返回 null，但不知道如何完成此操作。

`L`是棋盘的长度（9 x 9 数独的 L = 9）

`getSquare(r,c)`返回代表数独板的二维数组中的值

不同的检查功能检查一个值是否适合特定位置。他们不是问题。

该`show()`函数在控制台中打印出数组，因此它看起来像一个合适的数独板。

我还有一个`isSolved()`检查二维数组的函数，如果它是一个有效的已解决数独，则返回 true，否则返回 false。我也尝试在`solve()`希望使用它返回 true 的方法中实现这一点，尽管没有成功

```
//This method's only purpose it to call the findNum function on the next location in the sudoku
public void moveOn(int row, int column) {
    //if the previous location was not the last in the row move to ne next cell in said row.
    //if it was the last location in the row, move to the first column of the next row
    if (column + 1 != L) {solve(row, column + 1);}
    else if (row + 1 != L) {solve(row + 1, 0);}
    else {show();}
}

//This method finds a valid number for a specific location on the sudoku grid\
public boolean solve(int row, int column) {
    if (row >= L) {return true;}
    //pass over any numbers that are not empty
    if (getSquare(row, column) != 0) {moveOn(row, column);}
    else {
        //attempt to find a valid number for the location
        for (int n = 1; n <= L; n++) {
            if (checkRow(row, n) && checkCol(column, n) && checkSquare(row, column, n)) {
                // If a number is allowed at a specific location set that location to the number
                setSquare(row, column, n);
                //Begin checking for a solution based on previous numbers changed           
                moveOn(row, column);
            }               
        }
        //If no number is allowed in this space backtrack to the last successful number 
        //changed and reset all locations that have been changed recursively
        setSquare(row, column, 0);          
    }
    //If the puzzle is unsolveable
    return false;
} 
```

非常感谢任何可以帮助了解情况的人。如果需要更多我的代码/信息，我很乐意提供

示例输入文件： http: [//pastebin.com/6mSKT3ES](http://pastebin.com/6mSKT3ES)

编辑：删除完整代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:14:18.473

您在函数中只有一个`return`语句`solve`，那就是

```
return false; 
```

并且由于这是函数中的最后一条语句，并且无条件执行，`solve`除非抛出异常，否则将始终返回`false`。

要获得实际告诉您是否找到解决方案的返回值，您需要使返回值取决于条件。此外，一旦你找到了解决方案，对于合适的谜题，继续搜索是没有意义的。

所以你应该`return true;`在搜索循环中添加一个条件。为此，您需要知道何时找到了解决方案。您将递归包装在对 的中间调用中`moveOn`，因此最简单的更改是将返回值添加到`moveOn`：

```
public boolean moveOn(int row, int column) {
    //if the previous location was not the last in the row move to ne next cell in said row.
    //if it was the last location in the row, move to the first column of the next row
    if (column + 1 != L) {return solve(row, column + 1);}
    else if (row + 1 != L) {return solve(row + 1, 0);}
    else {show(); return true;}  // reached end of grid, solved
} 
```

并在“解决”中使用它：

```
public boolean solve(int row, int column) {
    //pass over any numbers that are not empty
    if (getSquare(row, column) != 0) {return moveOn(row, column);}
    else {
        //attempt to find a valid number for the location
        for (int n = 1; n <= L; n++) {
            if (checkRow(row, n) && checkCol(column, n) && checkSquare(row, column, n)) {
                // If a number is allowed at a specific location set that location to the number
                setSquare(row, column, n);
                //Begin checking for a solution based on previous numbers changed           
                if (moveOn(row, column)) {
                    return true;       // solved, yay!
                }
            }               
        }
        //If no number is allowed in this space backtrack to the last successful number 
        //changed and reset all locations that have been changed recursively
        setSquare(row, column, 0);          
    }
    //If the puzzle is unsolveable
    return false;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T14:25:23.197

```
This code works...

import java.io.*;
import java.util.Arrays;
import java.util.Scanner;

public class Sudoku {

    public static int suRows=9;
    public static int suColumns=9;
    public static int [][] suArray = new int[suRows][suColumns];
    public static int [] dummyRowArray = new int[suRows];
    public static int [] dummyColArray = new int[suColumns];
    public static int [][] dummy3x3Array = new int[3][3];
    public static int [] dummyArray = new int[9];

    //read the contents of the file into a 2 dimensional array
    public static void readSudoku() throws FileNotFoundException, IOException
    {  
        System.out.print("Please enter the full file name containing the Sudoku Puzzle (e.g:X:/sudoku_case1.txt):");
        Scanner scan = new Scanner (System.in);
        String filename = scan.nextLine();
        File file = new File( filename );

       if ( file.exists() )  
       {   
           Scanner inFile = new Scanner( file );
           for(int i=0; i<suRows; i++)
           {
                for(int j=0; j<suColumns; j++)
                {
                    if(inFile.hasNextInt())   suArray[i][j] = inFile.nextInt();
                }
            }   
       inFile.close();
       }    
    }

    public static boolean inOrder(int [] a, int i, int j)
    {
        return a[i]<=a[j];
    }

    public static void swap(int [] a, int i, int j)
    {
        int tmp = a[i];
        a[i] = a[j];
        a[j] = tmp;
    }

    public static void exchangeSort(int [] a)
    {
        for(int i=0;i<a.length;i++)
        {
            for(int j=1;j<a.length-i;j++)
            {
                if(!inOrder(a,j-1,j))    swap(a,j-1,j);
            }
        }
    }

    public static void displaySudoku(int [][] suArray)
    {
        for(int i=0; i<suArray.length;i++)
        {
            for(int j=0; j<suArray[i].length;j++)
            {
                System.out.print(suArray[i][j]);
                System.out.print(" ");
            }
            System.out.println();
        }    
    }    

    //Check if there are any more zeros
    public static boolean isComplete(int [][]suArray)
    {
        boolean result=true;

        //Check every element for 0
        for(int i=0; i<suArray[0].length; i++)
        {
            for(int j=0 ; j<suRows ; j++)
            {
                if(suArray[i][j]==0) return false;
            }
        }
        System.out.println("There are no zeros in this Sudoku");
        return result;
    }    

    //Check for adjacent duplicates
    public static boolean isAdjacentDup(int [] a)
    {
        for(int i=1; i<a.length; i++)
        {
            if((a[i-1]!=0 || a[i]!=0))
            {
                     if(a[i-1]==a[i]) return true;
            }  
        }
        return false;    
    }

    //Check for 1 through 9
    public static boolean is1to9(int [] a)
    {
        int j=1;
        for(int i=0; i<a.length; i++)
        {
            if(a[i]==j) j++;
            else return false;
        }
        return true;    
    }

    public static boolean isDuplicate(int [][]suArray)
    {
        boolean result=false;

        //Check every row for duplicates
        for(int i=0; i<suArray[0].length; i++)
        {
            for(int j=0 ; j<suRows ; j++)
            {
                dummyRowArray[j]=suArray[i][j];
            }

            //Sort dummyArray so that duplicates can be checked
            exchangeSort(dummyRowArray);

            //Now check Adjacent elements for duplicates
            if(isAdjacentDup(dummyRowArray)==true)
            {
                System.out.println("Duplicates are found in row");
                return true;
            }

        }

        displaySudoku(suArray);

        //Check every column for duplicates 
        for(int j=0; j<suArray[0].length; j++)
        {
            for(int i=0 ; i<suColumns ; i++)
            {
                dummyColArray[i]=suArray[i][j];
            }

            //Sort dummyArray so that duplicates can be checked
            exchangeSort(dummyColArray);

            //Now check Adjacent elements for duplicates
            if(isAdjacentDup(dummyColArray)==true)
            {
                System.out.println("Duplicates are found in columns");
                return true;
            }

        }

        displaySudoku(suArray);

        System.out.println("3X3:");

        //Check every 3X3 matrix for duplicates
        // 1st block 
        if(is3x3Duplicate(suArray,0,3,0,3)==true)
        {
            System.out.println("1st Block has a duplicate");
            return true;
        }
        else System.out.println("1st Block has no duplicate");
        // 2nd block 
        if(is3x3Duplicate(suArray,0,3,3,6)==true)
        {
            System.out.println("2nd Block has a duplicate");
            return true;
        }
        // 3rd block 
        if(is3x3Duplicate(suArray,0,3,6,9)==true)
        {
            System.out.println("3rd Block has a duplicate");
            return true;
        } 
        // 4th block 
        if(is3x3Duplicate(suArray,3,6,0,3)==true)
        {
            System.out.println("4th Block has a duplicate");
            return true;
        } 
        // 5th block 
        if(is3x3Duplicate(suArray,3,6,3,6)==true)
        {
            System.out.println("5th Block has a duplicate");
            return true;
        } 
        // 6th block 
        if(is3x3Duplicate(suArray,3,6,6,9)==true)
        {
            System.out.println("6th Block has a duplicate");
            return true;
        } 
        // 7th block 
        if(is3x3Duplicate(suArray,6,9,0,3)==true)
        {
            System.out.println("7th Block has a duplicate");
            return true;
        } 
        // 8th block 
        if(is3x3Duplicate(suArray,6,9,3,6)==true)
        {
            System.out.println("8th Block has a duplicate");
            return true;
        } 
        // 9th block 
        if(is3x3Duplicate(suArray,6,9,6,9)==true)
        {
            System.out.println("9th Block has a duplicate");
            return true;
        } 

        return result;
    }

    //Check every3X3 grid for duplicates
    public static boolean is3x3Duplicate(int [][]suArray, int x1, int x2, int y1, int y2)
    {
        boolean result=false;
        int k=0, l=0;

        for(int i=x1; i<x2;i++)
        {   
            for(int j=y1;j<y2;j++)
            {

                dummy3x3Array[k][l]=suArray[i][j];
                l++;
            }
            l=0;
            k++;
        }
        displaySudoku(dummy3x3Array);   

        for(int i=0; i<dummy3x3Array.length; i++)
        {
            for(int j=0; j<dummy3x3Array.length; j++)
            {
                dummyArray[(i*dummy3x3Array.length) + j] = dummy3x3Array[i][j];
            }
        }

        System.out.println(Arrays.toString(dummyArray));

        //Sort dummyArray so that duplicates can be checked
        exchangeSort(dummyArray);

        //Now check Adjacent elements for duplicates
        if(isAdjacentDup(dummyArray)==true)
        {
            System.out.println("Duplicates are found in blocks");
            return true;
        }

        return result;
    }

     //Check every3X3 grid for 1 trough 9
    public static boolean is3x3have1to9(int [][]suArray, int x1, int x2, int y1, int y2)
    {
        boolean result=false;
        int k=0, l=0;

        for(int i=x1; i<x2;i++)
        {   

            for(int j=y1;j<y2;j++)
            {

                dummy3x3Array[k][l]=suArray[i][j];
                l++;
            }
            l=0;
            k++;
        }

        for(int i=0; i<dummy3x3Array.length; i++)
        {
            for(int j=0; j<dummy3x3Array.length; j++)
            {
                dummyArray[(i*dummy3x3Array.length) + j] = dummy3x3Array[i][j];
            }
        }

        //Sort dummyArray so that duplicates can be checked
        exchangeSort(dummyArray);

        //Now check Adjacent elements for duplicates
        if(is1to9(dummyArray)==false)
        {
            System.out.println("Block doe snot have 1 through 9");
            return false;
        }

        return result;
    }

    public static boolean isValidSudoku(int [][] suArray)
    {
      //  boolean result=true;

        //All nos should be between 0 and 9 
        for(int i=0; i<suArray.length; i++)
        {
            for(int j=0; j<suArray[i].length; j++)
            {
                    if(suArray[i][j]<0 || suArray[i][j]>9){
                        System.out.println("Nos in the puzzle are out of range");
                        return false;
                    }
            }
        }

        //Call teh isDuplicate function to check for duplicates in the rows
        if( isDuplicate(suArray)==true) return false;

        return true;

    }

    public static boolean isSolvedSudoku(int [][] suArray)
    {
         //Check every row for 1 to 9
        for(int i=0; i<suArray[0].length; i++)
        {

            for(int j=0 ; j<suRows ; j++)
            {
                dummyRowArray[j]=suArray[i][j];
            }

            //Sort dummyArray so that duplicates can be checked
            exchangeSort(dummyRowArray);

            if(is1to9(dummyRowArray)==false)
            {
                System.out.println("1 through 9 not present in rows");
                return false;
            }

        } 
        //Check every column for 1 to 9
        for(int j=0; j<suArray[0].length; j++)
        {

            for(int i=0 ; i<suColumns ; i++)
            {
                dummyColArray[i]=suArray[i][j];
            }

            //Sort dummyArray so that duplicates can be checked
            exchangeSort(dummyColArray);

            //Now check Adjacent elements for duplicates
            if(is1to9(dummyColArray)==false)
            {
                System.out.println("1 through 9 not present in columns");
                return false;
            }

        }

         //Check every 3X3 matrix for 1 through 9
        // 1st block 
        if(is3x3have1to9(suArray,0,3,0,3)==true)
        {
            System.out.println("1st Block does not contain 1 through 9");
            return false;
        }
        // 2nd block 
        if(is3x3have1to9(suArray,0,3,3,6)==true)
        {
            System.out.println("2nd Block does not contain 1 through 9");
            return false;
        }
        // 3rd block 
        if(is3x3have1to9(suArray,0,3,6,9)==true)
        {
            System.out.println("3rd Block does not contain 1 through 9");
            return false;
        } 
        // 4th block 
        if(is3x3have1to9(suArray,3,6,0,3)==true)
        {
            System.out.println("4th Block does not contain 1 through 9");
            return false;
        } 
        // 5th block 
        if(is3x3have1to9(suArray,3,6,3,6)==true)
        {
            System.out.println("5th Block does not contain 1 through 9");
            return false;
        } 
        // 6th block 
        if(is3x3have1to9(suArray,3,6,6,9)==true)
        {
            System.out.println("6th Block does not contain 1 through 9");
            return false;
        } 
        // 7th block 
        if(is3x3have1to9(suArray,6,9,0,3)==true)
        {
            System.out.println("7th Block does not contain 1 through 9");
            return false;
        } 
        // 8th block 
        if(is3x3have1to9(suArray,6,9,3,6)==true)
        {
            System.out.println("8th Block does not contain 1 through 9");
            return false;
        } 
        // 9th block 
        if(is3x3have1to9(suArray,6,9,6,9)==true)
        {
            System.out.println("9th Block does not contain 1 through 9");
            return false;
        } 

        return true;
    }

    public static boolean solveSudoku(int [][] s)
    {
        //Check if Valid
        if(isValidSudoku(suArray)==true) System.out.println("Sudoku is valid");
        else
        {
            System.out.println("Not valid!");
            return false;
        }
        //Check if Complete - No 0's in any place
        if(isComplete(suArray)==true)
        {
            System.out.println("Sudoku is Complete");
            return true;
        }
        else System.out.println("Sudoku is not Complete");

        //Check if solved - 1-9 present in every row, column and 3x3
        if(isSolvedSudoku(suArray)==true) System.out.println("Sudoku is Solved!");
        else System.out.println("Not Solved");   

        //Locate the first 0 in the Sudoko puzzle
        for(int i=0; i<suArray.length; i++)
        {
            for(int j=0 ; j<suArray[i].length ; j++)
            {
                if(suArray[i][j]==0) 
                {
                    System.out.println("0 found in location: " + i +"   " + j );
                    for(int k=1;k<10;k++)
                    {
                        suArray[i][j]=k;
                        System.out.println("New value assigned to Sudoku: " + k);
                        displaySudoku(suArray);
                        if(solveSudoku(suArray))// isValidSudoku(suArray))
                        {
                            displaySudoku(suArray);
                            System.out.println("New value assigned to Sudoku");
                            return true;
                        }
                    }    

                    suArray[i][j]=0; 
                    return false;  // remove this
                }
            }
        }

        return true;
    }

    public static void main(String[] args) throws FileNotFoundException, IOException {

        readSudoku();
        displaySudoku(suArray);

        if( (isValidSudoku(suArray)!=true))
        {
            System.out.println("The given Sudoku Puzzle is not Valid!. Exiting....");
            System.exit(0);
        }

        do
        {
            if(isSolvedSudoku(suArray)==true)
            {
                System.out.println("Sudoku is Completely Solved!");

            }

            if(solveSudoku(suArray)==true) 
            {
                System.out.println("Sudoku is now solved");

            }
            else System.out.println("Not Complete");  

        }while(isSolvedSudoku(suArray)!=true);

        System.out.println("Sudoku is now completely solved:");
        displaySudoku(suArray);

    }
} 
```

# ios - 按标题引用 UIButton？

> ID：12964565
> 
> 赞同：0
> 
> 时间：2012-10-18T22:12:39.520
> 
> 标签：ios, uibutton

在我看来，我有 10 个 UIButton，每个都有一个标签和一个标题。我可以通过使用访问其中一个按钮

```
int i;
UIButton *button = (UIButton *)[view viewWithTag:i]; 
```

是否有类似的方法可以通过其标题访问该按钮？像 [查看 buttonWithTitle:title] 之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:15:51.967

您必须遍历每个按钮并将其标题与您要查找的标题进行比较。但这不是一个好方法。标题可以更改，或者您可以支持多种语言的应用程序。使用标签是更好的方法。给每个按钮自己的标签，很容易查找每个按钮。然后在需要时获取按钮的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:35:38.613

您可以通过像这样遍历按钮来制作一个由其标题键入的按钮的字典：

```
NSArray *buttons = (your buttons);
NSMutableDictionary *buttonDict = [NSMutableDictionary dictionary];
for (UIButton *button in buttons) {
  [buttonDict setObject:button forKey:[button titleForState:UIControlStateNormal]];
} 
```

但是 rmaddy 是对的，用它们的标题来引用你的按钮真的不是一个好主意。如果您想单独识别它们，您可以创建`UIButton`描述性命名的实例变量，并将您的按钮分配给 ivars 中的 ivars `viewDidLoad`，这样您就知道在哪里可以找到它们。

# r - 如何在 R 中编写“查找并替换所有 BUT”函数？

> ID：12964566
> 
> 赞同：-1
> 
> 时间：2012-10-18T22:12:47.570
> 
> 标签：r, data-manipulation

我有一个大致如下所示的数据框（这意味着它是为说明而制作的近似值，而不是您可以通过下面的链接下载或从我粘贴在下面的 dput() 获取的数据框的精确副本）：

```
March_created_at    March_email March_type  April_created_at April_email    April_type
3/11/12 7:28    jeremy@asynk.ch PushEvent   4/1/12 4:03                     PushEvent
3/11/12 7:28    jeremy@asynk.ch PushEvent   4/1/12 4:03                     PushEvent
3/11/12 7:28    jeremy@asynk.ch PushEvent   4/1/12 4:03                     PushEvent
3/11/12 7:28    jeremy@asynk.ch PushEvent   4/1/12 7:03     high            IssuesEvent
3/11/12 11:06   medium          PushEvent   4/1/12 13:57    medium          PushEvent
3/11/12 11:06   medium          PushEvent   4/1/12 13:57    medium          PushEvent
3/11/12 11:06   medium          PushEvent   4/1/12 13:57    medium          PushEvent
3/11/12 12:46                   PushEvent   
3/11/12 12:46                   PushEvent   
3/11/12 12:46                   PushEvent 
```

完整的数据集可以在[这里](https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/rubinius_rubinius_sequencing/output.csv)以 CSV 文件的形式找到

我正在寻找一个接受以下输入的函数：

1.  一个数据框
2.  该数据框的某些列
3.  字符串列表（例如一组电子邮件地址）
4.  替换字符串（例如“low”）

*现在，我希望该函数仅遍历该数据帧的指定列，并将与上面第 3 点中指定的字符串列表不*匹配的所有字符串（以及空单元格）替换为第 4 点中的替换字符串。但是，只有在以下条件成立时才应该这样做：

*所考虑的单元格需要具有同一月份的时间戳。*

例如，假设我们要替换“March_email”列中第 8 行的空单元格。我可以看到在“March_created_at”列的第 8 行有一个时间戳，所以我可以继续用指定的字符串（例如“low”）替换这个空单元格。但是，请查看“April_email”列中的第 8 行。此单元格也是空的，“April_created_at”列中第 8 行的单元格也是空的。在这种情况下，什么都不应该做（即没有插入字符串）。

我想这样做的原因是某些单元格只是空的，因为没有数据，所以不应该插入任何内容。其他单元格是空的，因为数据丢失了，所以我需要根据我上面指定的函数来估算数据。

我怎样才能在 R 中做到这一点？

**附录：**这是数据集头部的 dput()：

```
structure(list(March_created_at = c("2012-03-11 07:28:04", "2012-03-11 07:28:04", 
"2012-03-11 07:28:04", "2012-03-11 07:28:19", "2012-03-11 07:28:19", 
"2012-03-11 07:28:19"), March_actor_attributes_email = c("jeremy@asynk.ch", 
"jeremy@asynk.ch", "jeremy@asynk.ch", "jeremy@asynk.ch", "jeremy@asynk.ch", 
"jeremy@asynk.ch"), March_type = c("PushEvent", "PushEvent", 
"PushEvent", "PushEvent", "PushEvent", "PushEvent"), April_created_at = c("2012-04-01     04:03:13", 
"2012-04-01 04:03:13", "2012-04-01 04:03:13", "2012-04-01 07:03:11", 
"2012-04-01 07:03:11", "2012-04-01 07:03:11"), April_actor_attributes_email = c("", 
"", "", "high", "high", "high"), April_type = c("PushEvent", 
"PushEvent", "PushEvent", "IssuesEvent", "IssuesEvent", "IssuesEvent"
), May_created_at = c("2012-05-01 00:16:05", "2012-05-01 00:16:05", 
"2012-05-01 00:16:05", "2012-05-01 01:03:19", "2012-05-01 01:03:19", 
"2012-05-01 01:03:19"), May_actor_attributes_email = c("john.firebaugh@gmail.com", 
"john.firebaugh@gmail.com", "john.firebaugh@gmail.com", "mitch.tishmack@gmail.com", 
"mitch.tishmack@gmail.com", "mitch.tishmack@gmail.com"), May_type = c("PushEvent", 
"PushEvent", "PushEvent", "IssueCommentEvent", "IssueCommentEvent", 
"IssueCommentEvent"), June_created_at = c("2012-06-01 00:25:05", 
"2012-06-01 00:25:05", "2012-06-01 00:25:05", "2012-06-01 00:42:29", 
"2012-06-01 00:42:29", "2012-06-01 00:42:29"), June_actor_attributes_email =     c("michaelklishin@me.com", 
"michaelklishin@me.com", "michaelklishin@me.com", "", "", ""), 
    June_type = c("IssueCommentEvent", "IssueCommentEvent", "IssueCommentEvent", 
    "PushEvent", "PushEvent", "PushEvent"), July_created_at = c("2012-07-01 13:46:20", 
    "2012-07-01 13:46:20", "2012-07-02 11:53:37", "2012-07-02 11:53:37", 
    "2012-07-02 12:27:30", "2012-07-02 12:27:30"), July_actor_attributes_email = c("medium", 
    "medium", "ryoqun@gmail.com", "ryoqun@gmail.com", "ryoqun@gmail.com", 
    "ryoqun@gmail.com"), July_type = c("PushEvent", "PushEvent", 
    "CreateEvent", "CreateEvent", "PushEvent", "PushEvent"), 
    August_created_at = c("2012-08-01 00:04:09", "2012-08-01 00:04:09", 
    "2012-08-01 00:04:42", "2012-08-01 00:04:42", "2012-08-01 00:05:04", 
    "2012-08-01 00:05:04"), August_actor_attributes_email = c("jeremy@asynk.ch", 
    "jeremy@asynk.ch", "jeremy@asynk.ch", "jeremy@asynk.ch", 
    "jeremy@asynk.ch", "jeremy@asynk.ch"), August_type = c("IssueCommentEvent", 
    "IssueCommentEvent", "IssuesEvent", "IssuesEvent", "IssueCommentEvent", 
    "IssueCommentEvent"), September_created_at = c("2012-09-01 18:12:24", 
    "2012-09-01 18:12:24", "2012-09-01 23:51:18", "2012-09-01 23:51:18", 
    "2012-09-02 00:34:54", "2012-09-02 00:34:54"), September_actor_attributes_email = c("ryoqun@gmail.com", 
    "ryoqun@gmail.com", "ryoqun@gmail.com", "ryoqun@gmail.com", 
    "ryoqun@gmail.com", "ryoqun@gmail.com"), September_type = c("CommitCommentEvent", 
    "CommitCommentEvent", "CreateEvent", "CreateEvent", "PushEvent", 
    "PushEvent"), October_created_at = c("2012-10-01 07:48:38", 
    "2012-10-01 10:01:40", "2012-10-01 10:01:43", "2012-10-01 10:17:00", 
    "2012-10-01 16:08:29", "2012-10-01 18:06:46"), October_actor_attributes_email = c("medium", 
    "medium", "medium", "medium", "", "core"), October_type = c("PushEvent", 
    "IssuesEvent", "PushEvent", "PushEvent", "ForkEvent", "PullRequestEvent"
    )), .Names = c("March_created_at", "March_actor_attributes_email", 
"March_type", "April_created_at", "April_actor_attributes_email", 
"April_type", "May_created_at", "May_actor_attributes_email", 
"May_type", "June_created_at", "June_actor_attributes_email", 
"June_type", "July_created_at", "July_actor_attributes_email", 
"July_type", "August_created_at", "August_actor_attributes_email", 
"August_type", "September_created_at", "September_actor_attributes_email", 
"September_type", "October_created_at", "October_actor_attributes_email", 
"October_type"), row.names = c(NA, 6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:33:57.790

像这样的东西怎么样：

```
myfun <- function(month, DF, matches, replacement) {
  email.col <- paste0(month, '_actor_attributes_email')
  date.col  <- paste0(month, '_created_at')

  DF[[email.col]] <- ifelse(DF[[date.col]] != '' & !DF[[email.col]] %in% matches,
                            DF[[email.col]],
                            replacement)

  return (DF[, c(date.col, email.col)])
}

myfun(dat, 'April', 'high', 'foo')

#          April_created_at April_actor_attributes_email
# 1 2012-04-01     04:03:13                          foo   
# 2     2012-04-01 04:03:13                          foo   
# 3     2012-04-01 04:03:13                          foo   
# 4     2012-04-01 07:03:11                          high
# 5     2012-04-01 07:03:11                          high
# 6     2012-04-01 07:03:11                          high 
```

然后，你可以喂它几个月...

```
out <- lapply(list('March', 'April', 'May'), 
              myfun, DF=dat, matches='', replacement='foo') 
```

您可以快速将其恢复到 data.frame 中。和`plyr`

```
as.data.frame(unlist(out, recursive=FALSE)) 
```

还有很多其他的方法和选择，但这应该会给你一个很好的开始。

# ember.js - ember 的 Yuidoc data.json 地址在哪里？

> ID：12964569
> 
> 赞同：2
> 
> 时间：2012-10-18T22:12:52.467
> 
> 标签：ember.js

我想将 ember.js 文档合并到我的项目的本地 yuidoc 文档中，因为我的许多对象都扩展了 Ember 对象。

[Yuidoc 文档](http://yui.github.com/yuidoc/args/index.html#external-data "yuidoc 文档")说我可以在我的yuidoc.json 文件中放置一个属性“external.data”，其中包含外部 data.json 文件的地址。这个文件可用吗？如果没有，是否可以将其提供给我们这些记录 ember 项目的人可以自动同步到 ember 的文档？

我相信该文件是在您运行“yuidoc”时生成的。它与为 API 文档（API 文档的根目录）构建的 index.html 文件位于同一目录中。[这里](https://github.com/emberjs/website/blob/master/data/api.yml)的 git repo 中有一个文件，看起来它可能是由这个 data.json 文件生成的，但它显然不包含 json 格式。如果这个 data.json 文件可以在[ember 网站上发布的 api 文档的根目录下使用，那就太好了](http://emberjs.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:34:30.300

我们目前不提交此文件。[您可以在https://github.com/emberjs/website](https://github.com/emberjs/website)上打开一个问题，以便我们解决这个问题吗？

# android - 执行 setAdatpter 时遇到问题

> ID：12964570
> 
> 赞同：1
> 
> 时间：2012-10-18T22:12:56.320
> 
> 标签：android, adapter

我想实现我自己的`ListView`，但我有一些问题。我有以下代码：

```
private ArrayList<ItemChat> itemsChat;
private ListView lv;
......

public void show (View v){
     lv = (ListView)findViewById(R.id.listView);
     itemsChat = new ArrayList<ItemChat>();
     itemsChat.add(new ItemChat(1, "Patatas", "Tuberculo", "drawable/patatas"));
     ItemChatAdapter adapter = new ItemChatAdapter(this, itemsChat);
     lv.setAdapter(adapter);
} 
```

`onClick`在布局中，我有一个事件是“显示”的按钮。`ItemChat.java`它工作正常，并显示我在类中定义的适配器。

但是，当我尝试调用另一种方法的相同代码时，它根本不起作用。

```
public void show2 (String c){
     lv = (ListView)findViewById(R.id.listView);
     itemsChat = new ArrayList<ItemChat>();
     itemsChat.add(new ItemChat(1, "Patatas", c , "drawable/patatas"));
     ItemChatAdapter adapter = new ItemChatAdapter(this, itemsChat);
     lv.setAdapter(adapter);
} 
```

两者的区别在于论点。首先，由于该`onClick`事件，我通过 View V，其次，我尝试在适配器中显示`String c`而不是“Tuberculo”，但它不起作用。有没有人有任何想法？

PS：`onClick` event in`show()`来自 Eclipse 图形布局（继承自`View.onClick`）

好的，这是我的完整代码。

我尝试实现一个 xmpp 客户端，它工作正常，连接到 gtalk 服务器，登录用户，并收到来自其他用户的消息。我可以在日志中看到收到的消息，所以我想在自定义列表视图中接收 mje（类似于 Wahtsapp 中的聊天）。

首先，我创建了一个自定义列表视图并实现了一个调用“显示”的按钮来测试它是否工作正常。

当我按下显示按钮时，我的自定义列表视图显示：图片、标题、描述和其他图片。它工作完美。

然后，我想在我的列表视图中更改描述，而不是它，放置收到的消息。所以我使用了一个方法 show(incoming message)

我的 main.xml 文件有 2 个按钮。Conectec 和 Show。

和列表视图，id = listView

有2个文件java

ItemChat.java ItemChatAdapter.java

和我的主要活动

公共类 MiCliente2 扩展 Activity {

```
private final static String SERVER_HOST = "talk.google.com";
private final static int SERVER_PORT = 5222;
private final static String SERVICE_NAME = "gmail.com"; 
private final static String LOGIN = "xxxxxxxx@gmail.com";
private final static String PASSWORD = "xxxxxxx";
private XMPPConnection conn2;

private MessageListener messageListener;

private ArrayList<ItemChat> itemsChat;
private ListView lv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_mi_cliente2);

}

//when press conect button, implement this.
//it´s works perfect
public void conect (View v){
    try 
    {
         initConnection();
    Log.i("XMPPClient","Server conected");
    }
    catch(XMPPException ex){
        Log.e("XMPPClient","Error conecting to server");    
    }
}

private void initConnection() throws XMPPException {

    ConnectionConfiguration config =
    new ConnectionConfiguration(SERVER_HOST, SERVER_PORT, SERVICE_NAME);
    conn2 = new XMPPConnection(config);
    config.setReconnectionAllowed(true);

    try {
        conn2.connect();

        Log.i("XMPPClient", " Connected to " + conn2.getHost());

    } catch (XMPPException ex) {
         Log.e("XMPPClient", "Failed to connect to " + conn2.getHost());
         Log.e("XMPPClient", ex.toString());

        }
    try {
        conn2.login(LOGIN, PASSWORD);
        Log.i("XMPPClient", "Logged in as " + conn2.getUser());

        Presence presence = new Presence(Presence.Type.available);
        presence.setStatus("On line");
        conn2.sendPacket(presence);

        // register listeners
        ChatManager chatmanager = conn2.getChatManager();
        conn2.getChatManager().addChatListener(new ChatManagerListener()
        {
            public void chatCreated(final Chat chat, final boolean createdLocally)
            {
                chat.addMessageListener(new MessageListener()
            {
          public void processMessage(Chat chat, Message message)
            {
              Log.i("XMPPClient","Received message: " 
              + (message != null ? message.getBody() : "NULL"));
        // I want to call show() passing message´s body               
              show(message.getBody());               
          }
        });
      }
    });

    } catch (XMPPException ex) {
        Log.e("XMPPClient", " Failed to log in as " + LOGIN);
        Log.e("XMPPClient", ex.toString());
    }
}

//Not work when call show("something")
public void show(String v) {
    Log.i("XMPPClient",v); // in log can see Received message
    lv = (ListView)findViewById(R.id.listView);

    itemsChat = new ArrayList<ItemChat>();            
    itemsChat.add(new ItemChat(1, "Patatas", "Tuberculo", "drawable/patatas"));

    ItemChatAdapter adapter = new ItemChatAdapter(this, itemsChat);

    Log.i("XMPPClient"," In show() before lv.setAdapter");
    lv.setAdapter(adapter);

    //this log never happend, only can see before msje

    Log.i("XMPPClient","In show() after lvsetAdapter");
 }

//pressing "Show" button
public void show2 (View v){

     lv = (ListView)findViewById(R.id.listView);
     itemsChat = new ArrayList<ItemChat>();
     itemsChat.add(new ItemChat(1, "Patatas", "Tuberculo", "drawable/patatas"));
     ItemChatAdapter adapter = new ItemChatAdapter(this, itemsChat);
     lv.setAdapter(adapter);
} 
```

}

当传入消息和 show(meesage.getbody) 不显示任何内容时，在 logcat 中我只看到： Log.i("XMPPClient"," In show() before lv.setAdapter"); 不是列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:44:53.037

首先，什么是“c”？如果你用 onClick 属性在你的 xml 中设置它，那么你不能将任何字符串值传递给这个方法......那么现在“c”是什么？如果您从任何其他地方调用此方法，那么它应该可以工作......但是如果您在 xml 上设置按钮的 onClick 属性，那么您应该将其用作

```
public void show(View v) 
```

您可能想在 show(View c) 中调用 show(String c) 方法？因为那最终会被调用...

# vim - 获取光标下的整个字符串文字

> ID：12964573
> 
> 赞同：2
> 
> 时间：2012-10-18T22:12:57.523
> 
> 标签：vim

Vim 必须`expand("<cword>")`得到光标下的“单词”。如果光标位于带引号的字符串文字上，您将如何定义一个函数来获取引号之间的所有内容？

鉴于这种情况：

```
foo = "这个字符串有空格"
          ^ 光标在这里

```

我想要做

```
:echo GetStringUnderCursor() 
```

看看

```
这个字符串有空格

```

* * *

编辑：我看到你可以用这个咒语检查光标是否在字符串区域上

```
synIDattr(synIDtrans(synID(line("."), col("."), 1)), "name") == "String" 
```

我只是还没有找到一种方法来查找给定语法区域的开始和结束位置（行和列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:37:34.640

例如 ：

```
vi"    ->    visual select all inside the quotes
ci"    ->    change all inside the quotes
yi"    ->    yank all inside the quotes 
```

如果你拉它，你可以这样做：

```
echo @"    ->     prints register " (default) 
```

# python - Python中的命名问题

> ID：12964576
> 
> 赞同：0
> 
> 时间：2012-10-18T22:13:20.467
> 
> 标签：python

在 Zed Shaw 的“Learn Python the Hard Way”教程 46 中，要求学生创建一个`tests/NAME_tests.py`文件。但我得到`/`的不是 Aptana Studios 和 Notepad++ 中的有效字符错误。我究竟做错了什么？

这是 Zed 要求放入该文件的代码。

```
from nose.tools import *
import NAME

def setup():
    print "SETUP!"

def teardown():
    print "TEAR DOWN!"

def test_basic():
    print "I RAN! 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:21:31.720

经过

```
tests/NAME_tests.py 
```

它是`NAME_tests.py`在一个名为`tests`.

## 更新

*Learn Python The Hard Way*的摘录确认了最终的结构：

```
setup.py
NAME/
    __init__.py
bin/
docs/
tests/
    NAME_tests.py
    __init__.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:22:28.833

由于您引用了编辑器中的错误，而不是代码中的错误，听起来您可能正在尝试保存一个字面上称为“tests/NAME_tests.py”的文件。

只有在文件保存对话框显示的当前目录中已经有一个测试子目录时，这才有效。

如果不这样做，请先创建它，导航到它，然后将文件另存为 NAME_tests.py。

# python - Python：调用方法的问题

> ID：12964579
> 
> 赞同：1
> 
> 时间：2012-10-18T22:13:44.343
> 
> 标签：python

我是 Python 新手，我写了一个类来管理一个简单的电话簿。（我已经删除了与这篇文章无关的方法）。

```
class Phonebook:

    def __init__(self):
        self.book = {}

    def newEntry(self, name, number):
        self.book[name] = number

    def findNumber(self, name):
        return self.book[name]

    def nameList(self):
        list = self.book.keys()
        list.sort()
        for k in list:
            print k, self.book[k] 
```

我的问题涉及最后一种方法，`nameList`它按字母顺序打印电话簿条目（姓名和电话号码）。最初，我尝试了以下方法：

```
 def nameList(self):
        list = self.book.keys()
        list.sort()
        for k in list:
            print k, findNumber(k) 
```

但是，这引发了“NameError”全局名称“findNumber”未定义“错误。有人能解释为什么这不起作用吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:16:04.177

这不起作用，因为`findNumber`它不是全局定义的函数。它是您对象上的一个方法，因此要调用它，您需要调用`self.findNumber(k)`.

所以你的例子看起来像：

```
 def nameList(self):
        list = self.book.keys()
        list.sort()
        for k in list:
            print k, self.findNumber(k) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:16:19.223

`findNumber(k)`应该`self.findNumber(k)`在课堂内访问。

或作为`Phonebook.findNumber(self,k)`.

因为在一个类下声明的`variable`or`function`变成了一个类的`attribute`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:16:39.017

你需要添加`self`到`findNumber()`

所以它会变成：

```
def nameList(self):
        list = self.book.keys()
        list.sort()
        for k in list:
            print k, self.findNumber(k) 
```

否则它不知道`findNumber`来自哪里，因为它只在你的类中定义，或者，自我。

# python - Python 的 word 文档的页数

> ID：12964580
> 
> 赞同：3
> 
> 时间：2012-10-18T22:13:48.750
> 
> 标签：python, docx, doc, odt

有没有办法使用 Python 有效地获取 word 文档（.doc、.docx）的页数？

对于 .odt 文件？

我想将它用于 Linux 上基于 Web2py 的 Web 应用程序。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T16:18:00.193

仅适用于搜索此博客条目的人....

```
from win32com.client import Dispatch
#open Word
word = Dispatch('Word.Application')
word.Visible = False
word = word.Documents.Open(doc_path)

#get number of sheets
word.Repaginate()
num_of_sheets = word.ComputeStatistics(2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T10:37:34.360

您可以读取值

```
<Properties>
<Pages>CountValue</Pages> 
```

来自 docx 包中的 docProps/app.xml 或

```
<office:document-meta>
    <office:meta>
        <meta:document-statistic meta:page-count="CountValue"> 
```

在 odt 包中形成 meta.xml。

如果这些值不存在（它们是可选的），则必须对整个文档进行计算，实际上是进行渲染，这要困难得多

# ios - 添加 -ObjC 链接器标志会导致“没有有效的 aps-environment”授权对话框

> ID：12964582
> 
> 赞同：0
> 
> 时间：2012-10-18T22:14:17.207
> 
> 标签：ios, xcode

我正在通过将 90% 的应用程序转换为静态库（然后可以在多个应用程序之间共享）来重组我的应用程序。

在库中，我有一些类别，因此在链接它时必须使用 -ObjC 链接器标志。但是当我添加这个标志时，当应用程序运行时，我得到“......没有有效的aps-environment entitlement ..”对话框出现。

这通常出现在使用推送通知（我就是）并且项目尚未使用适当的配置文件签名时。但是，如果我离开 -ObjC 链接器标志，我不会得到这个对话框，它只在我添加标志时出现。

有什么建议么？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:54:46.007

我认为这个问题只是与`-ObjC`标志间接相关。似乎使用该标志会导致代码被执行，否则可能不会执行，可能是某个类别中的代码。最好只关注为什么会触发“没有有效的 aps 环境权利”对话框并解决该问题。

# iphone - 非 ARC 项目中的默认属性声明

> ID：12964583
> 
> 赞同：1
> 
> 时间：2012-10-18T22:14:18.720
> 
> 标签：iphone, objective-c, ios, ipad

如果我只执行以下操作，默认属性值是什么：

```
@property (nonatomic) UIButton *myButton; 
```

在非 ARC 项目中。这是保留还是分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:57:52.903

由于在任何规模的非 ARC 项目中，准确查看保留、分配或复制的内容非常重要，因此我真的建议不要使用该默认值。

当您查看具有多个可能具有许多其他属性（例如只读，原子和非原子）的属性的类时，很难阅读。吸气剂=等

尽管将#define 放在一个恒定的标头中并不完美，例如

```
#define ASSIGN nonatomic, assign
#define RETAIN nonatomic, retain 
```

对于您最常见的用法，可以使您的属性定义更加明确，这样当您最终赶上编写您的 dealloc 方法时，它可以非常快速地检查您需要释放的内容。

我的大多数属性定义看起来像

```
@property (ASSIGN) Foo* foo; 
```

或者

```
@property (RETAIN) Foo* foo; 
```

这就是我所做的，它可以降低属性定义的噪音，并使代码在故障排除或完善手动内存管理应用程序时更容易阅读。

# wso2 - WSO2 ESB - 如何为管理控制台 HTTPS 端口以外的代理服务设置 HTTPS 端口

> ID：12964588
> 
> 赞同：0
> 
> 时间：2012-10-18T22:14:47.347
> 
> 标签：wso2, wso2esb, wso2carbon

我在 Mac OSX 10.7.5 上使用 ESB 4.0.3。

Java版本是

java 版本“1.6.0_35”/Java(TM) SE 运行时环境（构建 1.6.0_35-b10-428-11M3811）/Java HotSpot(TM) 64 位服务器 VM（构建 20.10-b01-428，混合模式）

在我的axis2.xml中，我使用的是HTTPS传输监听器的以下配置

```
 <transportReceiver name="https" class="org.wso2.carbon.core.transports.http.HttpsTransportListener">
    <parameter name="port" locked="true">9443</parameter>
</transportReceiver> 
```

在我的 mgt-transports.xml 我有以下配置

```
 <parameter name="port" locked="xsd:false">${Ports.ServletTransports.HTTPS}</parameter> 
```

在我的 carbon.xml 中，我有以下配置

```
 <ServletTransports>
        <HTTPS>9440</HTTPS>
        <HTTP>9763</HTTP>
    </ServletTransports> 
```

但是，当我启动 ESB 时，HTTPS 端口上的代理/数据服务永远不会监听 9443，因为它们一直在监听 9440。

如何为代理和数据服务启用不同于管理控制台 HTTPS 端口的 HTTPS 端口？

请告诉我。谢谢阿比吉特

你好女婉

我没有使用 NHTTP 传输。请参阅上面的传输侦听器类。我只对 ESB 使用 serverlet 传输，因为我的要求是不要干扰现有的 HTTP 客户端。

对于 ESB 中的 servlet 传输，我想知道 ADMIN UI 端口是否可以不同于 ESB 代理服务 HTTPS 端口。

请帮忙。阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:00:33.417

是否提到 ESB 代理服务？，如果是这样，他们不听 servlet 传输。他们正在研究您可以配置的 NHHTP 传输。请提供更多信息。ESB 中的 NHTTP 端口是什么？

问候，/女娲

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:49:14.433

如果您使用 ESB 的 servlet 传输，管理控制台 UI 将使用相同的端口。你不能为此做任何事情，因为只有一个 Servlet 传输管理 UI 也会使用它。

问候，/女娲

# zend-framework2 - Zf2 Assetic 无法访问 jarfile

> ID：12964592
> 
> 赞同：0
> 
> 时间：2012-10-18T22:14:56.473
> 
> 标签：zend-framework2, yui-compressor, assetic

我正在使用来自widmogrod 的ZF2 Assetic 模块。

Assetic\Filter\YUI\JsCompressorFilter 正在返回以下内容：无法访问 jarfile

**Assetic\Exception\FilterException：运行时出错：“java”“-jar”“”“-o”“C:\WINDOWS\Temp\YUIB083.tmp”“--type”“js”“C:\WINDOWS \Temp\YUIB053.tmp" 错误输出：错误：无法访问 jarfile 输入：bladie bladie a-lot-of-javascript**

该命令是在代码中的某处自动生成的，但 Java 永远无法找到 yuicompressor.jar。而且我不知道它最终是从哪条路径执行的。

我已经加载了 intp ZF2 和所有内容的 Symfony 核心库，安装了 Java JRE7，现在我尝试将 yuicompressor\yuicompressor.jar 放在所有地方。甚至硬编码 yuicompressor\yuicompressor.jar 它在 Assetic\Filter\Yui\BaseCompressorFilter.php 像：

公共函数 __construct($jarPath = '\yuicompressor\yuicompressor.jar', .........)

并且还使用了绝对路径.......

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:11:23.257

这是什么样的路径：`\yuicompressor\yuicompressor.jar`？如果你在 linux 上工作，路径应该是这样`/yuicompressor/yuicompressor.jar`的，但你不太可能想把 jar 放在那里。在 Windows 上，就像`C:\yuicompressor\yuicompressor.jar`我不再使用资产模块（编写我自己的模块）一样，但这并不重要，因为配置与 zf2 模块无关，而是与资产本身相关。

不取决于操作系统我运行良好的罐子放在下面

```
/path/to/project/bin/yuicompressor-2.4.7.jar 
```

分别

```
C:\Path\To\Project\bin\yuicompressor-2.4.7.jar 
```

并像这样简单地配置过滤器路径

`'bin' . DIRECTORY_SEPARATOR . 'yuicompressor-2.4.7.jar'`

# c++ - 一系列数字中的所有可能路径

> ID：12964594
> 
> 赞同：0
> 
> 时间：2012-10-18T22:15:15.637
> 
> 标签：c++, boost-graph

我有一个小问题，我需要在给定一组数字的情况下找到所有可能的路径。例如，假设我们有数字 1、2 和 3。我需要找到所有可能的组合。这个简单案例的结果是：
**path_1** = *1*
**path_2** = *2*
**path_3** = *3*
**path_4** = *1, 2*
**path_5** = *1, 3*
**path_6** = *2, 3*
**path_7** = *1, 2, 3*

很容易看出路径的数量是*(2^n)-1*，所以对于 3 个元素，它是 7，依此类推。对于少量元素，手动执行此操作非常简单，但随着数字变大，它变得越来越难。

有人建议我可以使用 boost 图形库来解决这个问题，但我不太确定该怎么做，因为我没有足够的经验。任何帮助将非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:53:12.027

```
template< class It >
void compute_all_possible_paths( path_collection_t& res, It b, It e ) {
    std::size_t curVecSize = res.size();
    for( std::size_t i = 0; i < curVecSize; i++ ) {
        path_t p;
        p.reserve( res[i].size() + 1 );
        std::copy( res[i].begin(), res[i].end(), std::back_inserter(p) );
        p.push_back( *b );
        res.push_back( p );
    }
    path_t p;
    p.push_back( *b );
    res.push_back( p );
    if( ++b == e ) return ;
    compute_all_possible_paths( res, b, e );
} 
```

# xml - 用于数据建模的 XML

> ID：12964595
> 
> 赞同：0
> 
> 时间：2012-10-18T22:15:20.170
> 
> 标签：xml, data-structures, data-modeling

是否可以使用 XML 格式来定义具有各种引用的数据模型？呃，我意识到我刚刚写的东西毫无意义。让我解释。假设我有一个表示 3D 空间中的点集合的模型。假设其中一些点具有全局坐标，这意味着它们的 x、y、z 只是纯实数

```
<model>
   <point id="1" x="120" y="200" x="300" />
   <point id="2" x="40" y="-200" x="900" />
</model> 
```

到目前为止一切都很好......现在让我们假设另一个点，点 3 取决于点 1 和点 2 的位置。例如，它位于从点 1 到点 2 的直线上的某个位置。

```
<model>
   <point id="1" x="120" y="200" x="300" />
   <point id="2" x="40" y="-200" x="900" />
   <point id="3" x="??" y=""??" x="??" />
</model> 
```

我知道那些“？？” 代表。它们代表中间点。我可以计算出来，但是如何用 XML 来表达呢？有没有办法定义一个函数，比如 mid(point1, point2) 并在 XML 文件中引用它？我如何将点 id="3" 定义为 XML 文档中其他节点的函数？（其他节点是点 id="1" 和点 id="2"）。

如果有人有建议……关于 XML 格式的信息太多了，几乎无处不在，很难浏览可用信息的数量。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:28:01.180

不可能。XML 语法不包括使解析器返回计算结果而不是直接从文件中返回数据的任何方法。理论上，您可以想出一种纯粹用 XML 表示计算的方法，例如

```
<point id="3">
    <component id="x">
        <computation type="divide">
            <operand>
                <computation type="sum">
                    <operand>
                        <point_ref id="1" component="x">
                    </operand>
                    <operand>
                        <point_ref id="2" component="x">
                    </operand>
                </computation>
            </operand>
            <operand>
                2
            </operand>
        </computation>
    </component>
    ...
</point> 
```

哇，这似乎是很多工作。我想它可能有用。

# c# - C# 中的谷歌分析 API

> ID：12964600
> 
> 赞同：2
> 
> 时间：2012-10-18T22:15:50.083
> 
> 标签：c#, asp.net, oauth, google-analytics

我正在尝试找到一种方法来在 ASP 应用程序中从我自己的 Google Analytics 帐户中检索数据。我发现的每个示例都涉及通过 OAuth 请求访问用户的 Analytics 帐户，这不是我想要的。我所需要的只是能够在 C#.NET 或 VB.NET 中从我自己的帐户中查询数据。

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:58:11.300

您可以将 YQL 表用于 Google Analytics。

[https://github.com/yql/yql-tables/blob/master/google/google.analytics.xml](https://github.com/yql/yql-tables/blob/master/google/google.analytics.xml)

# java - 从命令行运行java

> ID：12964604
> 
> 赞同：2
> 
> 时间：2012-10-18T22:16:05.923
> 
> 标签：java

到目前为止，我主要使用 eclipse。现在我正在尝试从终端运行 java，但我遇到了包问题。

这是我的`Main.java`文件：

```
package main;

class Main {
    public static void main(String[] args) {
        System.out.println("it's working");
    }
} 
```

我使用它编译它`javac Main.java`然后运行`java Main`它给了我：

```
java Main
Exception in thread "main" java.lang.NoClassDefFoundError: Main
Caused by: java.lang.ClassNotFoundException: Main
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Main. Program will exit. 
```

**当我删除`package Main`一切正常。我错过了什么？**

`java -version`给出：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T22:20:52.390

您需要在目录级别上运行 java 命令并以完全限定的包名称提供它，例如：`java main.Main`

请参阅[Java 启动器如何查找用户类](http://docs.oracle.com/javase/7/docs/technotes/tools/findingclasses.html#userclass)以了解其工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:18:15.953

你可以使用这个命令：

```
java main.Main 
```

确保`main`（小写）包目录位于类路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:19:07.003

您的类路径可能设置不正确。由于您为 .java 文件提供了一个包，因此不再命名它。

一个例子：

```
java -cp ./package1/ main.Main //from the current directory and 
                               //if main package is contained in package1 
```

您需要完全限定类名。为了将来参考，如果您想从命令行运行，您必须在包级别停止间接（因为没有更好的术语）。假设你的类在包**package1.package2.Main.java** 我会像这样运行它**java -cp /blah/blah package1.package2.Main**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T02:31:11.467

## 编译

视窗：
`javac main\Main.java`
Mac：
`javac main/Main.java`

## 跑

`java main.Main`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T03:47:14.323

如果添加`package Main`，则必须将源文件放在文件夹 Main/Main.java 中。之后就可以编译了。当你运行程序时，使用“cd”进入主文件夹，然后写`java -cp Main.Main` See my question similiar to yours [noclassdeffounderror](https://stackoverflow.com/questions/12909767/how-is-noclassdeffounderror-thrown)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T10:54:00.140

试试这个...

在 window 中，您只需将代码编译为

> javac -d。主.java

然后在您的程序所在的同一路径中创建一个具有您在类中指定的名称的包（文件夹）（在您的代码中，创建名称为“main”的包）...

然后你只需将程序作为 java main.Main 或 java main/Main 运行

# ruby-on-rails - 迁移如何更新 Rails3.0 中的模型

> ID：12964605
> 
> 赞同：0
> 
> 时间：2012-10-18T22:16:07.447
> 
> 标签：ruby-on-rails, rails-migrations

我正在尝试使用向上迁移在一个表中添加一列。我为此创建了迁移并运行`rake db:migrate:up[version]`它在我的表中添加了列，但我在各自的模型中看不到该属性。我在这里想念什么吗？下面是我的片段...

```
migration 6, :add_role_users do
  up do
    execute <<-SQL
      ALTER TABLE users
        ADD COLUMN role varchar(32) DEFAULT NULL
    SQL
  end
  down do
    execute <<-SQL
      ALTER TABLE users
        DROP COLUMN role
    SQL
  end
end 
```

运行上述迁移后，我的用户模型中看不到以下行

```
property :role, , String, :length => 32 
```

请建议，我使用的是 Rails 3.0，所以我不能使用迁移更改方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:27:18.070

Rails 会根据表的列自动检测和分配模型属性。有关如何完成此操作的一些通用信息，本指南非常宝贵： http: [//guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

无论如何，这就是我将如何运行`role`向表中添加列的迁移`users`。

1.  在您的控制台中，运行`rails g migration add_role_column_to_users role:string`. *（由于迁移名称以“users”结尾，Rails 会自动知道将此迁移应用到 users 表。指定`role:string`只是一个命令行快捷方式，会自动添加`t.add_column :role, :string`到您的迁移中。运行此命令后，您应该能够找到新的在`db/migrate/`您的应用程序目录中迁移。）*

2.  在您的控制台中，运行`rake db:migrate`以将数据库迁移到您的新架构。

3.  而已！您现在应该在“用户”表上有一个“角色”列。您可以通过使用 进入 Rails 控制台并使用`rails c`调出用户模型的列名来验证这一点`User.column_names`。您应该在那里看到“角色”。

# java - CDI 为 bean 选择正确的范围

> ID：12964606
> 
> 赞同：2
> 
> 时间：2012-10-18T22:16:15.877
> 
> 标签：java, jakarta-ee, dependency-injection, java-ee-6, cdi

来自 Spring 的普通旧 DI，我无法弄清楚在使用 CDI 编写时如何正确选择范围。

在 Spring 中，默认情况下我的所有服务都具有单例范围，我想它映射到 CDI 中的应用程序范围（甚至是 @Singleton）。我知道例如登录用户信息我需要使用会话范围，例如表单参数我需要请求范围。

假设我有一个隐藏外部服务 API 调用的 bean。它是完全无国籍的。我应该把它作为`@Singleton`或简单的应用程序范围？或者让它在每个请求上创建（可能是错误的选择）。

到处注入所有东西是否正确？在 Spring 中，我通过`new`. 我应该在 CDI 中做同样的事情还是干脆在`@Inject`他们身上做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:45:11.273

你只使用CDI吗？还是 Java EE 6 容器？如果您有一个用于服务调用的无状态类，那么我建议您使用来自 EJB 规范的 @Stateless（因此您需要一个 Java EE 6 容器）它不是单例，但它不是也可以在每个请求上创建。我相信它与会话的绑定更紧密，但由于它是无状态的，因此可以汇集和共享实例。如果您只处理 CDI，我相信 Singleton 更直接地匹配 Spring 的单例，但我建议使用 ApplicationScoped，因为它提供了一个代理，使得使用它的 bean 的序列化变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:37:28.037

```
@Service
@Scope("prototype")
public class CustomerService 
{
......
} 
```

Just add @Scope("prototype") annotation to your component.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:35:35.083

是否有理由需要 bean 记住它的状态？如果您使用的是 Web 客户端之类的东西，那么这是一个更好的地方来存储状态，比如会话范围的托管 bean（假设 jsf），或者您的情况的任何等价物。在后端服务器端，您的 EJB 最好保留为 @stateless，以将开销降至最低，并有助于“保持简单...”范式。如果这可行，只需在您的 bean 上声明 @Stateless。除非有理由使用单例，否则如果您想为您的服务使用 Java EE 容器，最好还是使用无状态 bean。

无状态 bean 并没有真正随着每个请求而重新创建。这就是游泳池的目的。应用服务器手头有现成的无状态 bean，如果它很忙，它会制造更多，如果它安静下来，它会清空一些。

# windows - 如何检查 Microsoft 补丁的适用性

> ID：12964607
> 
> 赞同：2
> 
> 时间：2012-10-18T22:16:17.087
> 
> 标签：windows, powershell, patch

**环境：**

我在一个针对多个域配置测试软件的实验室工作。我目前有 8 个没有跨域信任的域。他们每个人都有一个与我们的主要 NOC WSUS 服务器对话的 WSUS 服务器。除了与主 WSUS 服务器通信外，没有从一个域到另一个域的通信。我无法更改 GPO 设置或安装任何尚未安装的软件。域范围从带有 Server 2003 的 Windows XP 到带有 Server 2008 的 Windows 7。每个域都有 8-20 个服务器和 3-5 个工作站。

我有一台可以与所有域中的每台服务器通信的机器，也可以与主 WSUS 服务器通信。我主要使用 PowerShell，但如果它使我想做的事情更容易，我不反对另一种语言。我安装了 PowerShell 2.0，但如果需要，我可以轻松安装 PowerShell 3.0。

**设想：**

我负责检查是否在每台服务器上都安装了补丁。此测试不能依赖于 WSUS 的内置报告工具，根据我无法更改的要求。我会收到一个补丁列表，我需要检查每台服务器以查看是否安装了补丁。由于补丁可以是从 Windows XP 到 Server 2008 的任何东西，我还需要检查补丁是否适用于服务器本身。我尝试使用它`PoshWSUS`来检查适用性，但由于 IIS 规则或防火墙规则，我无法连接到主 WSUS 服务器。我在网上搜索过，并遵循了几个指南，但是这个 WSUS 的设置非常定制，我只能对服务器本身做这么多。

**例子：**

我有以下补丁：

```
KB2604092
KB2676562
KB2686509 
```

我想检查以下服务器：

```
DC01: A Windows Server 2008 Domain Controller 
```

我目前正在使用以下 PowerShell 命令来测试它们是否已安装：

```
Get-HotFix -ID "KB2604092","KB2676562","KB2686509" -ComputerName DC01 
```

此命令显示已安装以下补丁：

```
KB2676562
KB2686509 
```

保留以下卸载：

```
KB2604092 
```

这正确地告诉我`KB2676562`并且`KB2686509`已安装，但它并没有告诉我是否`KB2604092`丢失或不适用。

我坚持的是如何验证`KB2604092`不适用于 DC01。我可以轻松地搜索 Microsoft 的网站以验证它仅适用于 Windows Server 2003 或 Windows XP，但我如何通过脚本检查它的适用性。我很想找到一种方法来废弃 Microsoft KB 文章中的数据，但我不知道如何从网页中提取所需的信息。我认为必须在 WSUS 中进行检查以检查适用性，但我不知道在哪里可以找到类似的东西。

**编辑：**
我忘了提，我无法控制哪些补丁被批准，这是由外部公司完成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:02:06.413

对于安全补丁，Microsoft 发布了一个电子表格，列出了自 1998 年以来的所有安全公告。您可以从此[页面](http://technet.microsoft.com/en-us/security/bulletin/)下载。[（直接链接到电子表格）](http://go.microsoft.com/fwlink/?LinkID=245778)

然后，您可以解析该电子表格（如果将其转换为 CSV 文件，那么在 powershell 中很容易解析）。它为您提供了您所询问的所有信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T00:29:01.063

如果您只关心更新是否适用于相应的操作系统，[IUpdate.ProductTitles](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.updateservices.administration.iupdate.producttitles%28v=vs.85%29.aspx)应该会为您提供所需的信息。

还有更复杂的情况，例如仅在安装了某个系统组件时才适用更新。我认为没有任何方法可以自动处理这些情况。

# java - 如何在 Android 上的 MapView 中添加地图比例？

> ID：12964608
> 
> 赞同：4
> 
> 时间：2012-10-18T22:16:17.133
> 
> 标签：java, android, google-maps, android-mapview

我正在努力添加根据当前缩放级别在屏幕上显示当前长度的地图比例。我有一种感觉，它可能存在一些预定义的类来使用，但我不知道......？我已经搜索了很多，但找不到任何东西。

我非常感谢任何帮助=）

// 亚历克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T12:43:07.543

好的，我现在明白了！路易斯的回答对我帮助很大，对 OpenStreetMap 也有很大帮助。这是我想出的：

```
<your.own.package.path>;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Picture;
import android.graphics.Rect;
import android.location.Location;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.Projection;
import com.iqqn.uppgift5.GameMapActivity;

public class ScaleBarOverlay extends Overlay{

    // ===========================================================
    // Fields
    // ===========================================================

    // Defaults

    boolean enabled = true;

    float xOffset = 10;
    float yOffset = 10;
    float lineWidth = 2;
    int textSize = 12;

    boolean imperial = false;
    boolean nautical = false;

    boolean latitudeBar = true;
    boolean longitudeBar = false;

    // Internal

    protected final MapView mapView;
    protected final GameMapActivity master;

    private Context context;

    protected final Picture scaleBarPicture = new Picture();
    private final Matrix scaleBarMatrix = new Matrix();

    private int lastZoomLevel = -1;

    float xdpi;
    float ydpi;
    int screenWidth;
    int screenHeight;

    // ===========================================================
    // Constructors
    // ===========================================================

    public ScaleBarOverlay(Context _context, GameMapActivity master, MapView mapView) {
        super();

        this.master = master;
        this.context = _context;
        this.mapView = mapView;

        xdpi = this.context.getResources().getDisplayMetrics().xdpi;
        ydpi = this.context.getResources().getDisplayMetrics().ydpi;

        screenWidth = this.context.getResources().getDisplayMetrics().widthPixels;
        screenHeight = this.context.getResources().getDisplayMetrics().heightPixels;

    }

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    /**
     * @return the enabled
     */
    public boolean isEnabled() {
        return enabled;
    }

    /**
     * @param enabled the enabled to set
     */
    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }

    /**
     * @return the lineWidth
     */
    public float getLineWidth() {
        return lineWidth;
    }

    /**
     * @param lineWidth the lineWidth to set
     */
    public void setLineWidth(float lineWidth) {
        this.lineWidth = lineWidth;
    }

    /**
     * @return the imperial
     */
    public boolean isImperial() {
        return imperial;
    }

    /**
     * @param imperial the imperial to set
     */
    public void setImperial() {
        this.imperial = true;
        this.nautical = false;
        createScaleBarPicture();
    }

    /**
     * @return the nautical
     */
    public boolean isNautical() {
        return nautical;
    }

    /**
     * @param nautical the nautical to set
     */
    public void setNautical() {
        this.nautical = true;
        this.imperial = false;
        createScaleBarPicture();
    }

    public void setMetric() {
        this.nautical = false;
        this.imperial = false;
        createScaleBarPicture();
    }

    public void drawLatitudeScale(boolean latitude) {
        this.latitudeBar = latitude;
    }

    public void drawLongitudeScale(boolean longitude) {
        this.longitudeBar = longitude;
    }

    @Override
    public void draw(Canvas canvas, MapView localMapView, boolean shadow) {
        if (this.enabled) {
            // Draw the overlay
            if (shadow == false) {
                final int zoomLevel = localMapView.getZoomLevel();

                if (zoomLevel != lastZoomLevel) {
                    lastZoomLevel = zoomLevel;
                    createScaleBarPicture();
                }

                this.scaleBarMatrix.setTranslate(-1 * (scaleBarPicture.getWidth() / 2 - 0.5f), -1 * (scaleBarPicture.getHeight() / 2 - 0.5f));
                this.scaleBarMatrix.postTranslate(xdpi/2, ydpi/2 + canvas.getHeight()-50);

                canvas.save();
                canvas.setMatrix(scaleBarMatrix);
                canvas.drawPicture(scaleBarPicture);
                canvas.restore();
            }
        }
    }

    // ===========================================================
    // Methods
    // ===========================================================

    public void disableScaleBar() {
        this.enabled = false;
    }

    public boolean enableScaleBar() {
        return this.enabled = true;
    }

    private void createScaleBarPicture() {
        // We want the scale bar to be as long as the closest round-number miles/kilometers
        // to 1-inch at the latitude at the current center of the screen.

        Projection projection = mapView.getProjection();

        if (projection == null) {
            return;
        }

        Location locationP1 = new Location("ScaleBar location p1");
        Location locationP2 = new Location("ScaleBar location p2");

        // Two points, 1-inch apart in x/latitude, centered on screen
        GeoPoint p1 = projection.fromPixels((int) ((screenWidth / 2) - (xdpi / 2)), screenHeight/2);
        GeoPoint p2 = projection.fromPixels((int) ((screenWidth / 2) + (xdpi / 2)), screenHeight/2);

        locationP1.setLatitude(p1.getLatitudeE6()/1E6);
        locationP2.setLatitude(p2.getLatitudeE6()/1E6);
        locationP1.setLongitude(p1.getLongitudeE6()/1E6);
        locationP2.setLongitude(p2.getLongitudeE6()/1E6);

        float xMetersPerInch = locationP1.distanceTo(locationP2);

        p1 = projection.fromPixels(screenWidth/2, (int) ((screenHeight / 2) - (ydpi / 2)));
        p2 = projection.fromPixels(screenWidth/2, (int) ((screenHeight / 2) + (ydpi / 2)));

        locationP1.setLatitude(p1.getLatitudeE6()/1E6);
        locationP2.setLatitude(p2.getLatitudeE6()/1E6);
        locationP1.setLongitude(p1.getLongitudeE6()/1E6);
        locationP2.setLongitude(p2.getLongitudeE6()/1E6);

        float yMetersPerInch =  locationP1.distanceTo(locationP2);

        final Paint barPaint = new Paint();
        barPaint.setColor(Color.BLACK);
        barPaint.setAntiAlias(true);
        barPaint.setStyle(Style.FILL);
        barPaint.setAlpha(255);

        final Paint textPaint = new Paint();
        textPaint.setColor(Color.BLACK);
        textPaint.setAntiAlias(true);
        textPaint.setStyle(Style.FILL);
        textPaint.setAlpha(255);
        textPaint.setTextSize(textSize);

        final Canvas canvas = scaleBarPicture.beginRecording((int)xdpi, (int)ydpi);

        if (latitudeBar) {
            String xMsg = scaleBarLengthText(xMetersPerInch, imperial, nautical);
            Rect xTextRect = new Rect();
            textPaint.getTextBounds(xMsg, 0, xMsg.length(), xTextRect);

            int textSpacing = (int)(xTextRect.height() / 5.0);

            canvas.drawRect(xOffset, yOffset, xOffset + xdpi, yOffset + lineWidth, barPaint);
            canvas.drawRect(xOffset + xdpi, yOffset, xOffset + xdpi + lineWidth, yOffset + xTextRect.height() + lineWidth + textSpacing, barPaint);

            if (!longitudeBar) {
                canvas.drawRect(xOffset, yOffset, xOffset + lineWidth, yOffset + xTextRect.height() + lineWidth + textSpacing, barPaint);
            }
            canvas.drawText(xMsg, (xOffset + xdpi/2 - xTextRect.width()/2), (yOffset + xTextRect.height() + lineWidth + textSpacing), textPaint);
        }

        if (longitudeBar) {
            String yMsg = scaleBarLengthText(yMetersPerInch, imperial, nautical);
            Rect yTextRect = new Rect();
            textPaint.getTextBounds(yMsg, 0, yMsg.length(), yTextRect);

            int textSpacing = (int)(yTextRect.height() / 5.0);

            canvas.drawRect(xOffset, yOffset, xOffset + lineWidth, yOffset + ydpi, barPaint);
            canvas.drawRect(xOffset, yOffset + ydpi, xOffset + yTextRect.height() + lineWidth + textSpacing, yOffset + ydpi + lineWidth, barPaint);

            if (! latitudeBar) {
                canvas.drawRect(xOffset, yOffset, xOffset + yTextRect.height() + lineWidth + textSpacing, yOffset + lineWidth, barPaint);
            }                       

            float x = xOffset + yTextRect.height() + lineWidth + textSpacing;
            float y = yOffset + ydpi/2 + yTextRect.width()/2;

            canvas.rotate(-90, x, y);
            canvas.drawText(yMsg, x, y + textSpacing, textPaint);

        }

        scaleBarPicture.endRecording();
    }

    private String scaleBarLengthText(float meters, boolean imperial, boolean nautical) {
        if (this.imperial) {
            if (meters >= 1609.344) {
                return (meters / 1609.344) + "mi";
            } else if (meters >= 1609.344/10) {
                return ((meters / 160.9344) / 10.0) + "mi";
            } else {
                return (meters * 3.2808399) + "ft";
            }
        } else if (this.nautical) {
            if (meters >= 1852) {
                return ((meters / 1852)) + "nm";
            } else if (meters >= 1852/10) {
                return (((meters / 185.2)) / 10.0) + "nm";
            } else {
                return ((meters * 3.2808399)) + "ft";
            }
        } else {
            if (meters >= 1000) {
                return ((meters / 1000)) + "km";
            } else if (meters > 100) {
                return ((meters / 100.0) / 10.0) + "km";
            } else {
                return meters + "m";
            }
        }
    }

    @Override
    public boolean onTap(GeoPoint point, MapView mapView) {
        // Do not react to screen taps.
        return false;
    }
} 
```

在 onCreate() 中使用以下方式：

```
...
scaleBarOverlay = new ScaleBarOverlay(this.getBaseContext(), this, myMapView);
List<Overlay> overlays = myMapView.getOverlays();
// Add scale bar overlay
scaleBarOverlay.setMetric();
overlays.add(scaleBarOverlay);
... 
```

希望这对任何人都有帮助 =) 这将从 API 级别 7+ 开始工作。不过，我还没有在 API 级别 14+ 上对其进行测试，而且我知道一些硬件加速的东西“不”在那里工作，比如用画布绘制图片。但我认为它会与录音一起工作。

再次感谢路易斯！

// 亚历山大

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T00:16:21.247

据我所知，没有预先定义的课程可以做到这一点。

一种可能性是创建一个覆盖来检查当前的经度跨度，因为它会随着纬度而变化，然后以正确的大小绘制比例。

您可以在下面找到有关如何执行此操作的示例：

**比例尺叠加**

```
public class CopyOfScaleBarOverlay extends Overlay {    
private static final String STR_M = "m"; 
private static final String STR_KM = "km"; 

//Constants
private static float scaleBarProportion = 0.25f;
private float cMarginLeft=4;
private float cLineTopSize=8;
private float cMarginTop=6;
private float cMarginBottom=2;
private float cTextSize=12;
private float distanceFromBottom=100;

//instantiation
private Context context;

private Paint paintLine, paintText, paintRectangle;
private Location l0;
private Location l1;
private float ds;
private int width, height, pi;
private float marginLeft, marginTop, marginBottom, lineTopSize;
private String unit;

public CopyOfScaleBarOverlay(Context context){
    super();
    this.context=context;

    paintText= new TextPaint();
    paintText.setARGB(180, 0, 0, 0);
    paintText.setAntiAlias(true);
    paintText.setTextAlign(Align.CENTER);

    paintRectangle = new Paint();
    paintRectangle.setARGB(80,255,255,255);
    paintRectangle.setAntiAlias(true);

    paintLine = new Paint();
    paintLine.setARGB(180, 0, 0, 0);
    paintLine.setAntiAlias(true);

    l0 = new Location("none");
    l1 = new Location("none");

    ds=this.context.getApplicationContext().getResources().getDisplayMetrics().density;
    width=this.context.getApplicationContext().getResources().getDisplayMetrics().widthPixels;
    height=this.context.getApplicationContext().getResources().getDisplayMetrics().heightPixels;
    pi = (int) (height - distanceFromBottom *ds);

    marginLeft=cMarginLeft*ds;
    lineTopSize=cLineTopSize*ds;
    marginTop=cMarginTop*ds;
    marginBottom=cMarginBottom*ds;

}

@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {
    super.draw(canvas, mapview, shadow);
    if(mapview.getZoomLevel() > 1){

        //Calculate scale bar size and units
        GeoPoint g0 = mapview.getProjection().fromPixels(0, height/2);
        GeoPoint g1 = mapview.getProjection().fromPixels(width, height/2);
        l0.setLatitude(g0.getLatitudeE6()/1E6);
        l0.setLongitude(g0.getLongitudeE6()/1E6);
        l1.setLatitude(g1.getLatitudeE6()/1E6);
        l1.setLongitude(g1.getLongitudeE6()/1E6);
        float d01=l0.distanceTo(l1);
        float d02=d01*scaleBarProportion;
        // multiply d02 by a unit conversion factor if needed
        float cd02;
        if(d02 > 1000){
            unit = STR_KM;
            cd02 = d02 / 1000;
        } else{
            unit = STR_M;
            cd02 = d02;
        }
        int i=1;
        do{
            i *=10;
        }while (i <= cd02);
        i/=10;
        float dcd02=(int)(cd02/i)*i;
        float bs=dcd02*width/d01*d02/cd02;

        String text=String.format("%.0f %s", dcd02, unit);
        paintText.setTextSize(cTextSize * ds);
        float text_x_size=paintText.measureText(text);
        float x_size = bs + text_x_size/2 + 2*marginLeft;

        //Draw rectangle
        canvas.drawRect(0,pi,x_size,pi+marginTop+paintText.getFontSpacing()+marginBottom, paintRectangle);

        //Draw line
        canvas.drawLine(marginLeft, pi+marginTop, marginLeft + bs, pi+marginTop, paintLine);
        //Draw line tops
        canvas.drawLine(marginLeft, pi+marginTop - lineTopSize/2, marginLeft, pi+marginTop + lineTopSize/2, paintLine);
        canvas.drawLine(marginLeft +bs, pi+marginTop - lineTopSize/2, marginLeft+bs, pi+marginTop + lineTopSize/2, paintLine);
        //Draw line midle
        canvas.drawLine(marginLeft + bs/2, pi+marginTop - lineTopSize/3, marginLeft + bs/2, pi+marginTop + lineTopSize/3, paintLine);
        //Draw line quarters
        canvas.drawLine(marginLeft + bs/4, pi+marginTop - lineTopSize/4, marginLeft + bs/4, pi+marginTop + lineTopSize/4, paintLine);
        canvas.drawLine(marginLeft + 3*bs/4, pi+marginTop - lineTopSize/4, marginLeft + 3*bs/4, pi+marginTop + lineTopSize/4, paintLine);

        //Draw text
        canvas.drawText(text, marginLeft +bs, pi+marginTop+paintText.getFontSpacing(), paintText);
    }
} 
```

}

**使用**

在扩展的活动中`MapActivity`，添加以下内容：

```
mapView.getOverlays().add(new CopyOfScaleBarOverlay(this)); 
```

**笔记**

该示例使用公制单位。要使用不同的单位系统，`d02`请在上面的代码中乘以单位转换因子并使用单位名称调整字符串。

好好享受。

# c++ - C++11 std::tuple 到 std::array 的转换导致可变参数模板崩溃

> ID：12964610
> 
> 赞同：3
> 
> 时间：2012-10-18T22:16:28.537
> 
> 标签：c++, templates, c++11, tuples, variadic-templates

以下函数 ,`toArray`有一天可能会将 C++11`std::tuple`转换为 C++11 `std::array`：

```
#include <tuple>
#include <array>

template <typename T, typename ...U>
std::array<T,sizeof...(U)>
toArray(std::tuple<U...>) {
  return std::array<T,sizeof...(U)>();
} 
```

如果我尝试`toArray`使用以下代码调用，在 G++ 4.8 下我可以成功编译。但是，使用 Clang++ 3.2 编译会使 Clang 前端崩溃。我的代码是有效的 C++ 吗？

```
int main(int argc, char *argv[])
{
  auto tup = std::make_tuple(1,2,3,4,5,6,7,8);
  toArray<int>(tup);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:56:54.393

它看起来对我有效，并且完成的版本适用于 G++：

```
#include < redi/index_tuple.h >

```

```
template <typename T, typename... U, unsigned... N>
  std::array<T, sizeof...(U)>
  toArray2(std::tuple<U...>& t, redi::index_tuple<N...>) {
    return std::array<T, sizeof...(U)>{{ std::get<N>(t)... }};
  }

template <typename T, typename ...U>
  std::array<T, sizeof...(U)>
  toArray(std::tuple<U...> t) {
    return toArray2<T>(t, redi::to_index_tuple<U...>{});
  }

int main()
{
  auto tup = std::make_tuple(1,2,3,4,5,6,7,8);
  return toArray<int>(tup)[3] - 4;
} 
```

# c++ - 数据成员本地到成员函数：什么静态语言可以做这样的事情？

> ID：12964613
> 
> 赞同：-2
> 
> 时间：2012-10-18T22:16:55.957
> 
> 标签：c++, oop, static, private-members

我发现关于 OOP 最烦人的一件事是，每当您在成员函数中需要一个新变量，并且您需要该变量“附加”调用该函数的对象时，您基本上别无选择，只能创建一个新的私有场地。在我看来这很难看，因为这意味着变量在对象实例化时被初始化（如果你不调用需要它的方法，你可能永远无法使用它），它不会对其他可以隐藏的实体隐藏访问对象的私有成员，除此之外，这意味着可能会使您的类定义变得混乱（想想 C++ 类，它通常带有一个包含整个字段定义的标题）。

用 C++ 术语来说，我想要`static`修饰符对全局函数中变量的行为，但在成员函数中，并且存储必须在对象中。

我不知道那么多语言，但我觉得在动态编程语言中更容易做到。我可以想到 Lua：我只想在当前表中添加一个新索引。这并没有向世界其他地方隐藏新的“领域”，但除非你篡改元表，否则 Lua 中的所有内容都是公开的，所以这在 Lua 思维方式中并不是真正的问题。但是初始化的问题得到了解决。

所以，我的问题是：是否有任何静态编程语言（即，在编译时知道对象布局的语言）可以实现这一点？

顺便说一句，C++ 中是否有一个巧妙的解决方法来获得类似的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:36:09.987

You say `static` and by design in `static` languages every thing about the design of object should addressed in compile time and class can't change it self in runtime. So I don't think any `static` language can do such a `dynamic` job, and it is good since it will decrease performance, when you access a variable, in `static` languages compiler create code to access that variable at compile time but if such a variable (function-object-static) exist, then compiler should write an extra code to check some dynamic storage to see if a property with that name exist or not and this is only because you feel sad with current design of C++!? But on the other hand, if you do not want to do it without changing fields, you can simply add one extra variable to the class of a type that can used for dynamic lookup(for example `std::map`) and make that variable `private` so no one except you in your class can access it:

```
class foo {
    std::map<std::string, boost::any> functionVariables;

public:
    void test1() {
        int visitNumber;
        auto i = functionVariables.find( "test1" );
        if( i == functionVariables.end() ) {
            // This is first visit of the function, initialize your variable
            functionVariables["test1"] = (visitNumber = 0);
        } else {
            // It is already initialized, use it
            visitNumber = ++ *boost::any_cast<int>(&*i);
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:43:46.323

由于面向对象编程的一般思想是将行为封装为一*组*方法（函数），并将数据封装为一*组*实例变量，因此这种行为在我能想到的任何静态编程语言中都不存在。

然而，一些语言已经考虑过将单个类的关注点分成多个单元（以使其不那么单一）的想法。这个想法是在单个对象类中分离各种关注点。尽管变量不是在运行时创建的（这会使类型成为非静态的），但它可以在与其他单元分开的单元中声明。

这实际上在 C# 中是可用的。尽管实现纯粹是装饰性的，但您可以将单个类声明为多个分部类。好处之一是分离关注点，以避免对类封装的所有内容进行单一大声明（另一种用途是代码生成场景）。

这使您可以执行以下操作：

文件1：

```
partial class Foo {
   int X;
   void DoSomethingWithX() {
        X++;
   }
} 
```

文件 2：

```
partial class Foo {
   int Y;
   void DoSomethingWithY() {
        Y++;
   }
} 
```

# c - C中数组索引+索引值的用户输入

> ID：12964614
> 
> 赞同：0
> 
> 时间：2012-10-18T22:16:59.007
> 
> 标签：c, arrays

这是我在这个网站上发现的一个问题，但回答与我认为我的问题没有直接关系。我有点尴尬，因为我还是个业余爱好者。我在询问用户他们想输入多少个 GPA。然后我要求输入每个索引。问题是每个索引都返回 0。所以我很确定我搞砸了变量类型或者可能是我增加索引的方式。这是一个家庭作业问题，我更多的是寻求指导而不是完全放弃。

```
#include<stdio.h>

main()
{
      char Rspns; 
      int i, toCount, Total;
      float GPA[toCount];

      printf("\n\tYou can average up to 30 GPAs.");
      printf("\n\tPlease choose how many GPAs you would like to average:");
      scanf(" %d" , &toCount); 

      //assign how many indexes array should have
      for(i = 0; i<toCount; i++)
            GPA[i] = i++;

            do
                {

                system("cls");
                printf("\n\nEnter a GPA:");
                scanf(" %f" , &GPA); 
                printf(" %f" , GPA[i]);
               Total += GPA[i];

               getch();
               system("cls");
               printf("\n\n\tWould you like to average the current amount of GPA's?");
               printf("\n\nY/N: ");
               scanf(" %c" , &Rspns);

                       if(Rspns == 'y' || Rspns == 'Y')
                               {

                               Total = Total / toCount;
                               printf("The average of those GPAs is %.1f" , Total);
                               getch();

                               }// end response

                }while(i<=toCount);//end forCount
                Total = Total / toCount;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:27:47.290

这个

```
scanf(" %f" , &GPA); 
```

绝对不是您想要做的：记住，数组和指针在 C 中密切相关 -[请参阅这个 SO answer](https://stackoverflow.com/questions/2528318/c-how-come-an-arrays-address-is-equal-to-its-value)。

```
scanf(" %f" , &(GPA[i]) ); 
```

将值扫描到数组的第 i 个元素中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:33:06.043

我认为您应该扫描到特定的浮点数，而不是扫描到整个数组

```
scanf("%f", &GPA[i]); 
```

另外，检查你的类型`printf`，编译器会发出警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:19:01.657

```
int i, toCount, Total;
float GPA[toCount]; 
```

`toCount`此时未初始化。

```
Total += GPA[i]; 
```

同样在这里，`Total`从一个不确定的值开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T22:30:46.743

将 GPA 数组初始化为固定大小并验证 toCount 介于 1 和最大值之间，或者在知道大小后使用内存分配函数 malloc 或 calloc 动态分配 GPA 数组（完成后释放）。

我无法弄清楚你在说“分配多少索引数组应该有”的地方要做什么，但是没有必要将值输入到你将随后覆盖的数组中（你可以使用如上所述的 calloc将它们全部初始化为零）。请注意，您应该扫描到 GPA 数组的第 i 个元素 (&GPA[i])，而不是扫描到始终是第一个元素的 &GPA。

另外，请注意 i++，因为您在每个循环中将 i 递增两次。尽管您的代码的那部分是不必要的，但总的来说这是一个需要注意的陷阱。

# forms - 为什么 Symfony2 渲染一个代替对于 number 类型的表单域

> ID：12964617
> 
> 赞同：2
> 
> 时间：2012-10-18T22:17:13.623
> 
> 标签：forms, html, symfony

在 Symfony2 表单中，您有以下两种来自字段类型（以及其他）：： http://symfony.com/doc/2.0/reference/forms/types/number.html
`number`：[http](http://symfony.com/doc/2.0/reference/forms/types/number.html)
`integer` : [//symfony.com/doc/2.0 /reference/forms/types/integer.html](http://symfony.com/doc/2.0/reference/forms/types/integer.html)

我的问题是为什么`integer`类型呈现`<input type="number">`和`number`类型呈现`<input type="text">`因此缺少 HTML5 新输入类型属性（最小、最大、步长）？

是否有一种体面和干净的方式来配置`number`表单类型以呈现`<input type="number">`标签（表单主题对我来说似乎有点脏）？

**编辑**
似乎更改字段模板是唯一的选择，即使它声明了评论`{# type="number" doesn't work with floats #}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:08:43.930

`number`实际上，如果他们设置了属性，它也可以工作`step="any"`。但是，您可以覆盖`number`-widget 的块并将其更改为：

```
{% block number_widget %}
{% spaceless %}
    {% set type = type|default('number') %}
    {{ block('input') }}
{% endspaceless %}
{% endblock number_widget %} 
```

检查此链接，以查看默认表单布局模板：

[https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig)

**编辑**

这只是一个疯狂的猜测，但也许他们没有设置`number`为不混淆用户。当您使用英文系统时，Chrome 将接受类似**1.9**的值。当您在德语系统上将其键入 Chrome 时，该值将立即更正为**19**。在德语系统上，您必须输入**1,9**。Chrome 将在提交时将其更改为**1.9 。**想象一下对于经常出差的没有经验的用户会感到困惑。:)

# sql-server - 事务复制在分发服务器处停止

> ID：12964618
> 
> 赞同：0
> 
> 时间：2012-10-18T22:17:21.773
> 
> 标签：sql-server, transactional-replication

我的发布者尽职尽责地将数据注入分发者，但这就是它停止的地方。我是复制领域的新手。我知道我可以通过删除并重新创建所有内容来轻松解决这个问题，但似乎必须有一个更优雅的解决方案。

*   我通过发布者的跟踪令牌发送给其中一个订阅者。令牌在几毫秒内到达分销商，但没有超过那个时间
*   当我查看订阅者时，我遇到了这 2 个错误
*   服务器“blah”未配置为分发服务器（sp_helpdistributor 说是）
*   进程无法连接到分配器“blah”
*   发布者到分销商的历史看起来不错，并说“没有可用的复制交易”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:32:36.617

复制使用 SQL 代理作业来调用可执行文件以将命令传递给订阅者。如果您在 SQL Server Management Studio 中打开作业定义，您可以看到所有传递给可执行文件的参数，用于发布服务器和数据库、订阅服务器和数据库等各种内容。我怀疑其中之一是离开。

# python - Python 3 - 从文件中读取文本

> ID：12964620
> 
> 赞同：5
> 
> 时间：2012-10-18T22:17:25.200
> 
> 标签：python, python-3.x

这是 Learn Python the Hard Way 中的练习 15，但我使用的是**Python 3**。

```
from sys import argv
script, filename = argv

txt = open(filename)
print ("Here's your file %r:") % filename
print txt.read()

print ("I'll also ask you to type it again:")
file_again = input()
txt_again = open(file_again)
print txt_again.read() 
```

**文件保存为 ex15.py，当我从终端运行它时，它第一次正确读取 ex15.txt，但是当我第二次请求它时，出现错误**

```
user@user:~/Desktop/python$ python ex15.py ex15.txt<br>
Here's your file 'ex15.txt':<br>
This is stuff I typed into a file.<br>
It is really cool stuff.<br>
Lots and lots of fun to have in here.<br>

I'll also ask you to type it again:<br>
ex15.txt <b>#now I type this in again, and I get a following error</b><br>
Traceback (most recent call last):<br>
  File "ex15.py", line 11, in <<module>module><br>
    file_again = input()<br>
  File "<<string\>string>", line 1, in <<module>module><br>
NameError: name 'ex15' is not defined 
```

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T22:27:30.970

你肯定没有使用 Python 3。有几件事很明显：

*   这些`print`语句没有括号（在 Python 3 中是必需的，但不是 2）：

    ```
    print ("Here's your file %r:") % filename
    print txt.read()

    print txt_again.read() 
    ```

*   [`eval`这是在`input()`](http://docs.python.org/library/functions.html#input)[Python 3 中更改](http://docs.python.org/release/3.0.1/library/functions.html#input)的调用：

    ```
    file_again = input() 
    ```

Python 2 很可能是您系统上的默认设置，但您可以通过将其添加为脚本的第一行（如果您直接运行它，如`./myscript.py`），使您的脚本始终使用 Python 3：

```
#!/usr/bin/env python3 
```

或者使用 Python 3 显式运行它：

```
python3 myscript.py 
```

还有一点需要注意的是：当你完成文件时，你应该真正关闭它。您可以明确地执行此操作：

```
txt = open(filename)
# do stuff needing text
txt.close() 
```

或者使用[`with`语句](http://www.python.org/dev/peps/pep-0343/)并在块结束时处理它：

```
with open(filename) as txt:
    # do stuff needing txt
# txt is closed here 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T22:21:27.920

您的打印声明表明您没有像标题中所说的那样使用 py3k。

`print txt.read()`这在 py3k 中不起作用，因此请确保您实际使用的是 py3k。

你需要使用`raw_input()`而不是`input()`因为你在`py 2.x`.

示例 py 2.x：

```
>>> x=raw_input()
foo
>>> x=input()   # doesn't works as it tries to find the variable bar
bar                    
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<string>", line 1, in <module>
NameError: name 'bar' is not defined 
```

py 3.x 示例：

```
>>> x=input()
foo
>>> x       # works fine
'foo' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T22:25:26.127

您似乎没有使用 python 3.0.. 来检查这一点，只需在终端窗口中输入：

`python`

并查看交互器启动时出现的信息行。

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel
32
Type "help", "copyright", "credits" or "license" for more information. 
```

它应该是这样的，
for`python 2.7.3`和 for`python 3.X.X`它会说`python 3.X.X`。

如果您使用的是 python 2.X，`Ashwini Chaudhary`则有正确答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T19:02:27.723

试试这个代码，对于 py3k：

```
txt = open(filename, 'r')
print('Here\'s your file %r: ' % filename)
print(txt.read())
txt.close()

print('I\'ll also ask you to type it again: ')
file_again = input()
txt_again = open(file_again, 'r')
print(txt_again.read())
txt_again.close() 
```

# python - Python：4 表示循环，比较列表项

> ID：12964623
> 
> 赞同：0
> 
> 时间：2012-10-18T22:17:33.420
> 
> 标签：python, cycle

我有一个非常可怕的算法来比较原子之间的距离，但是它不是我想要的。这是代码：

```
for k in ResListA:
  for n in ResListB:
    for m in ResListA[counter3].atoms:
        for z in ResListB[counter4].atoms:
            coordDist = distance.distance(ResListA[counter3].atoms[counter4],ResListB[counter2].atoms[counter1])
            counter1 = counter1 + 1
        counter1 = 0         
        counter4 = counter4 + 1 
    counter4 = 0
    counter2 = counter2 + 1
  counter2 = 0
  counter3 = counter3 + 1 
```

基本上我想要最小的距离

> ResListA[0].atoms[0,..,n]
> 
> ResListB[0,..,k].atoms[0,..,m]

来计算。但是，它计算

> ResListA[0].atoms[0]

至

> ResListB[0,..,k].atoms[0,..,m]

例如：

> ResListA[N,P,C,N,C] ResListB[C,C][P,P]...

它应该是

> 距离(N,C) 距离(N,C) 距离(P,C) 距离(P,C)

不是

> 距离(N,C) 距离(N,C) 距离(N,P) 距离(N,P)

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:25:29.380

我认为你的代码可以写得更像这样。

```
for k in ResListA:
    for n in ResListB:
        for m in k.atoms:
            for z in n.atoms:
                coordDist = distance.distance(m.atoms, z.atoms) 
```

不知道做什么`distance.distance`。你不应该做一些`coordDist`涉及的事情`min()`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:32:26.387

虽然 gnibbler 可能是正确的，因为这是您应该做的，这就是您当前的代码简化为：

```
for k in ResListA:
    for n in ResListB:
        for counter4, m in enumerate(k.atoms):
            for counter1, z in enumerate(ResListB[counter4].atoms):
                coordDist = distance.distance(m, n.atoms[counter1]) 
```

你的问题是你需要：

```
for z in ResListB[counter2].atoms: 
```

代替

```
for z in ResListB[counter4].atoms: 
```

# delphi - FireMonkey：如何将下一个控件集中在 vkReturn 上？

> ID：12964624
> 
> 赞同：4
> 
> 时间：2012-10-18T22:17:40.330
> 
> 标签：delphi, firemonkey, keyevent, multiplatform

[经典的 VCL 问题](https://stackoverflow.com/questions/6773400/focus-next-control-on-enter-in-overrided-keyup)......但是如何在**FireMonkey**中做同样的事情？

我有几个标准`TControl`谁可以专注...

例如，在某些情况下，`TEdit`如果我按下`return key`

我尝试了不同的方法，但没有成功（在 13 时用 9 替换键、keychar，...，将键事件转发到表单，...）

当然，因为它是 FMX，我想要一个适用于所有平台的解决方案......

如果**可以避免**：

*   浏览父母的 Children 财产，
*   有不同的代码来处理不同的平台
*   硬编码*制表符序列*
*   ...，会很棒的；o)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T22:48:39.410

您可以将以下代码放入表单的 OnKeyDown 事件中：

```
 if Key = vkReturn then begin
    Key := vkTab;
    KeyDown(Key, KeyChar, Shift);   
  end; 
```

如果您只希望某些控件具有该行为，则必须在这些控件的 OnKeyDown 事件中调用此代码。

请注意，KeyDown 必须调用 TForm.KeyDown 才能使其工作。

（用 XE2 测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-03T00:56:29.443

除了建议的答案之外，要以编程方式移动到下一个控件，可以使用通过 TFMXControlClassHelper 提供的 SelectNext 方法：

[https://codeverge.com/embarcadero.delphi.firemonkey/fmx-how-to-programmatically-mov/2031600](https://codeverge.com/embarcadero.delphi.firemonkey/fmx-how-to-programmatically-mov/2031600)

它使用 GetTabList（返回 ITabList 接口）和 FindNextTabStop（返回 IControl 接口）和 SetFocus

不过，根据[https://stackoverflow.com/a/36715134/903783](https://stackoverflow.com/a/36715134/903783)的说法，“firemonkey 框架在某些事件中禁止更改焦点。为了更改焦点，请向表单发送延迟消息。” （指的是处理程序中 TabControl 的 TabChange 事件，因为您似乎无法使用 SetFocus 来聚焦子控件）。所以看看那里有一个更安全的方法来做“SetFocus”

# javascript - 如何每 30 秒更改一次模式弹出窗口？

> ID：12964627
> 
> 赞同：0
> 
> 时间：2012-10-18T22:18:25.017
> 
> 标签：javascript, jquery, html, css, popup

我有一个名为 modalpage 的 div id
并有 css。我需要一个可以动态显示弹出窗口 20 分钟并每 30 秒更改一次的 javascript 函数，现在我有以下 javascript 函数。有人可以帮我吗

```
<script language="javascript" type="text/javascript">
function revealModal(divID)
{
    window.onscroll = function () { 
        document.getElementById(divID).style.top = document.body.scrollTop;
    };
    document.getElementById(divID).style.display = "block";
    document.getElementById(divID).style.top = document.body.scrollTop;
} 
```

由输入 id 按钮调用。

```
<input id="Button1" type="button" value="Click here" onclick="revealModal('modalPage')" /> 
```

谢谢

* * *

这就是我想出的

```
function revealModal(divID)
{
var i = 1;
divID.replace('*', i);
setInterval(function(){revealModal(divID)},1000);
i = i + 1;
if (i == 3) i = 1;
var div = getElementById(divID)
window.onscroll = function () { document.getElementById(divID).style.top =       document.body.scrollTop; };
document.getElementById(divID).style.display = "block";
document.getElementById(divID).style.top = document.body.scrollTop;
} 
```

但这不是每次都显示modules_3。是因为所有三个 div 都在同一个文件中吗？

```
<input id="Button1" type="button" value="Click heres" onclick="revealModal('modalPage_*')" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:06:56.323

好吧，一方面不要把设定的时间间隔放在函数中。这将在第一次点击时开始一个永无止境的循环，这将继续触发它传递的 div id。

您可能应该做的是保留一个应该更新的id数组并在函数中循环...

```
var divs = [];

function addID(id)
{
    divs.push(id);
}

function revealModal()
{
    for(var i = 0; i < divs.length; i ++)
    {
        var div = getElementById('modalPage_' + divs[i]);

        window.onscroll = function () { 
            div.style.top = document.body.scrollTop; 
        }

        div.style.display = "block";
        div.style.top = document.body.scrollTop;
    }
}

setInterval(function(){revealModal()},1000); 
```

还有你的 html 按钮：

```
<input id="Button1" type="button" value="Click heres" onclick="addID('1')" />
<input id="Button2" type="button" value="Click heres" onclick="addID('2')" />
<input id="Button3" type="button" value="Click heres" onclick="addID('3')" /> 
```

现在考虑一下 - 我真的不明白你的要求。看来还有一大群人也不明白。我看到的方式是你想在点击时显示一个 div 并确保它每 n 秒更新一次。在这种情况下，看起来你选择了 1000 毫秒，或者每 1 秒，即使你说你想要每 30 秒。很公平，将 1000 更改为 30000。看起来您所做的唯一更新是确保它固定在屏幕上的某个位置，而不是更新内容。

所以我所做的就是在函数之外设置间隔，这样它就一直在进行。然后在单击时将 id 推送到 divs 数组中，其中间隔将仅更新循环内的内容。虽然从概念上讲这会起作用，但这似乎是一种不好的方法。

您应该只使用像 jquery 这样的简单库并放置一个滚动侦听器来更新位置，无论它们是否显示。看到您在标签中指定了 jquery 但在您的示例中没有使用它，我认为这意味着您并不完全熟悉该库。

这可以通过简单地向每个模态 div 添加一个“模态”类并使用它来完成：

```
$(document).ready(function(){
    $(window).scroll(function(){
        $('.modal').css('top', $(window).scrollTop() + 'px');
    });

    $('.modal').on('click', function(){
        $(this).css('display', 'block');
    });
}); 
```

当然，您需要在此调用之前调用 jquery 库才能使其正常工作。

# syntax - （列出 lambda lambda）

> ID：12964628
> 
> 赞同：3
> 
> 时间：2012-10-18T22:18:28.177
> 
> 标签：syntax, scheme

如果我这样做，我会得到什么“什么样的东西”？

```
(car (list lambda lambda)) 
```

我以为我会`lambda`回来，这意味着我可以做到

```
(define my_lambda (car (list lambda lambda)))
(define foo (my_lambda (n) (+ n n))) 
```

但这没有用！谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T22:28:46.477

`lambda`是一种特殊形式（意思是：标准评估规则不适用于它），是语言核心原语的一部分，*不是*可以分配给变量的符号或其他类型的值。

回答您的问题，评估表达式后您将获得的“类型”`(list lambda)`将取决于您使用的 Scheme 解释器，但通常您会收到错误。例如，DrRacket 抱怨如下：

```
lambda: bad syntax in: lambda 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:14:20.803

在某种意义上，`lambda`在运行时不存在（当然，由 lambda 语句创建的*函数*存在，但这是另一回事；它们`lambda`本身不是）。

这样做的原因是 lambda 语句操纵了其他在运行时不存在的东西；特别是，它改变了变量名的含义（在你的例子中，`n`）。

要回答您关于什么是事物的问题`lambda`，通常的答案是“语法”。幸运的是，Scheme 提供了一种抽象语法的机制：宏。宏可以抽象出仅编译时的实体，例如变量名和 lambda 以及其他宏。所以，你可以写（在这种情况下，在 Racket REPL 中）：

```
> (define-syntax-rule (mylambda (x ...) body)
    (lambda (x ...) body))
> (define foo (mylambda (n) (+ n n)))
> (foo 71)
142 
```

定义 Scheme 宏的系统有多种；`syntax-rules`系统以一种不寻常但最终非常直观的`...`方式使用 s。也可以通过编写发出Scheme的Scheme代码来定义宏，这涉及到更多的复杂性。

# java - 格式化日历对象而不是日期对象？

> ID：12964629
> 
> 赞同：1
> 
> 时间：2012-10-18T22:18:31.573
> 
> 标签：java, calendar, formatting, simpledateformat

我正在尝试格式化日历字符串以指示我本地以外的时区偏移量。我知道我可以创建一个简单的格式化字符串并使用该`Calendar.get(int)`方法填充所有值，但这感觉不是正确的方法。

Java 有一个`DateFormat`，特别是我正在尝试使用`SimpleDateFormat`. 问题是`format()`这些类的方法需要一个`Date`对象。

我主要使用`Calendar`对象，因为我相信这些是 Java 中推荐的结构。所以，当我去格式化我的结果时间时，我调用`Calendar.getTime()`它返回一个`Date`可以传递给对象的`SimpleDateFormat`对象。

到目前为止，我认为这非常简单，但问题就在这里。

每当调用该`Calendar.getTime()`方法时，`Date`返回的始终是本地时区，与`Calendar`.

因此，当我将时间传递给 my 时，我总是会在本地时区打印时间`SimpleDateFormat`，这不是我想要的。到目前为止我所做的所有研究都说它无法完成，我所看到的所有示例都只是使用该`Calendar.get(int)`方法来填补一些空白。这看起来很糟糕，如果 DateFormat 类如此无用，为什么还要使用它？

这是一些示例代码，因此您可以了解我的意思，将其粘贴到您最喜欢的测试类中：

```
private static final SimpleDateFormat parser = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
private static final SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");

public static void main(String[] args)
{
    try
    {
        Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("EST"));
        cal.setTimeInMillis(parser.parse("2012-10-09T22:01:49.108-0700").getTime());
        System.out.println(formatter.format(cal.getTime()));
    }
    catch(ParseException e)
    {
        e.printStackTrace();
    }
} 
```

产生的输出（因为我在中央时区运行）：2012-10-10T00:01:49-0500
预期输出（无论从哪个时区运行）：2012-10-10T01:01:49-0400

总结问题：有没有办法让 Java 中的 DateFormat 接受日历，或者获取不在本地时区的日期，或者是否有另一个类我应该完全用于这种格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:30:33.263

> 每当调用 Calendar.getTime() 方法时，返回的日期总是在本地时区，与日历的时区无关。

不，这不对。`Date`没有*时*区。这只是自 Unix 纪元以来的毫秒数。它的`toString()`方法*确实*将其转换为本地时区，但这不是`Date`对象中信息的一部分。

您需要做的就是将格式化程序的时区设置为与日历的时区相同。

```
formatter.setTimeZone(calendar.getTimeZone()); 
```

...或者只是将日历设置为完全使用：

```
formatter.setCalendar(calendar); 
```

（我不清楚后一种方法是否意味着日历会失去其价值......基本上Java类将“日历系统”、“时区”和“日历内的值”混合在一个类型中，这很不幸。）

不过，我同意 Ian 的观点，因为 Joda Time 是一个使用起来*更*愉快的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:23:20.003

我会为此放弃内置的 java 日期和时间类，而改用[joda time](http://joda-time.sourceforge.net/)。它旨在正确处理 ISO8601 格式字符串，并正确处理时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:42:51.593

Date 没有任何 TimeZone，它只是自 Epoch 时间以来的毫秒数，以人类可读的格式表示。我们可以使用“DateFormat”类。

```
 TimeZone tz = TimeZone.getTimeZone("America/Buenos_Aires");
 Calendar cal = Calendar.getInstance(tz);
 Date d = cal.getTime();
 DateFormat df = new SimpleDateFormat("dd-MM-yyyy HH:mm aaa");
 df.setTimeZone(tz);
 String s = df.format(cal.getTime());
 System.out.println(s); 
```

# batch-file - 批量 WMIC 重定向输出并包装到变量中

> ID：12964631
> 
> 赞同：2
> 
> 时间：2012-10-18T22:18:41.690
> 
> 标签：batch-file, wmi, wmi-query, wmic

我正在尝试使用 WMIC 删除我们旧打印服务器上的一些旧打印机

如果我从命令行使用以下语法，它可以工作

WMIC 打印机，其中 "SERVERNAME LIKE '%%OLDSERVERNAME%%'" 删除

我被问到是否可以让它替换打印机或更新它们以使帮助台免于收到“如何添加我的打印机”电话

我尝试使用 SET 进行一些变体来设置 SERVERNAME 的属性，它似乎正在处理，但没有任何变化，并且执行 GET 仍然显示旧值。

所以我想我可以做一个 FOR / F 循环，将打印机的名称（共享名）包装在一个变量中，然后在删除有问题的打印机后使用另一个命令重新创建打印机。

这是我的脚本

```
@ECHO

ECHO Gathering Installed Printer Information...

FOR /F "tokens=1 skip=1" %%A IN ('WMIC PRINTER WHERE "Servername like "%%printaz1%%"" get sharename') DO SET PRINTERNAME=%%A

ECHO %PRINTERNAME% 
```

所以你会认为你会得到一个很好的变量的值，但不，我打开了回显，看起来变量一旦被捕获就会被设置回null

我的输出看起来像这样......

```
FOR /F "tokens=1 skip=1" %%A IN ('WMIC PRINTER WHERE "Servername like "%%printaz1%%"" get sharename') DO SET PRINTERNAME=%%A

SET PRINTERNAME=nameofprinter

SET PRINTERNAME=

ECHO

ECHO is on. 
```

会喜欢一些关于为什么它似乎在倾倒字符串的想法。

Powershell 和 VBScript 也不是不可能的选择，我对两者都很熟悉，这似乎是可能的，我真的不想重新开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T14:02:27.113

WMIC 返回两行，一行带有打印机名称，另一行为空。
对此的解决方案是测试空行。

```
ECHO Gathering Installed Printer Information...
FOR /F "tokens=1 skip=1" %%A IN ('WMIC PRINTER WHERE "Servername like "%%printaz1%%"" get sharename') DO if not "%%A"=="" SET PRINTERNAME=%%A
ECHO %PRINTERNAME% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T08:14:37.097

你正在寻找的是这个：

```
for /f "skip=2 tokens=2 delims=," %%A in ('WMIC PRINTER WHERE "Servername like "%%printaz1%%"" get sharename /format:csv') DO SET PRINTERNAME=%%A
ECHO %PRINTERNAME% 
```

解释：

wmic 的 unicode 输出包括一个由 FOR /F 捕获的回车，这是您不想要的，因为这意味着“输入”成为变量 (%%A) 的一部分，并且它还包含一个空行，将再次输出到 %%A。

我的示例执行以下操作： /format:cvs -- 将输出逗号分隔的输出，以便我们可以使用 delimiter 捕获，skip=2 -- 将跳过开头的空行并跳过 csv 的标题行。tokens=2 -- csv 输出包含名称、值作为输出，但您只需要值，即第二个标记。

顺便说一句，因为我们不再将空格单独包含在内，它甚至应该在值中使用空格。试试看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-21T12:57:02.130

我绕过了 UNICODE 回车（这确实是这里的问题），如下所示：

```
@echo off
FOR /F "usebackq tokens=1,2 delims==" %%A IN (`wmic %* /VALUE ^| findstr "="`) DO (call :OUTPUT %%A "%%B")
exit /b

:OUTPUT
echo %1=%2 
```

将其保存为“wmi.bat”并像这样执行您的查询：

```
wmi.bat printer where 'name like "HP%"' get name 
```

我的输出如下所示：

```
Name="HP1C0BCA (HP Officejet Pro 276dw MFP)"
Name="HP Officejet Pro L7500 Series"
Name="HP Officejet Pro 276dw MFP PCL 6" 
```

您可以想象如何使用它。"%%B" 部分将 /VALUE 的所有输出（包括空格）放入 %2 %%A 捕获对象 i​​d，它变成 %1 如果您使用它来记录来自 WMI 的各种信息，这很方便. 您不必再担心 Unicode 回车了。

这种方法的最大优点是你有一个聪明的批处理文件，它克服了在脚本中使用它时 wmic 给你的限制，你可以将它用于任何事情。您可以使用批处理文件的 STDOUT 作为任何其他参数，甚至作为 wmic 的输入！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-13T07:59:59.827

最安全和通用的变体是嵌套另一个`for /F`循环，如下所示：

```
for /F "skip=1 usebackq delims=" %%A in (`
    wmic Printer where 'Servername like "%%printaz1%%"' get ShareName
`) do for /F "delims=" %%B in ("%%A") do set "PRINTERNAME=%%A" 
```

问题是`wmic`命令的 Unicode 输出和 ANSI 文本的不良转换`for /F`，这留下了一些孤立的回车字符，这反过来又让一些额外的行显示为非空。第二个`for /F`循环摆脱了这些转换伪影。

我还替换了该`tokens=1`选项`delims=`，以免在第一个空格处截断返回的项目。

[还请查看用户dbenham](https://stackoverflow.com/users/1012053 "德本汉姆")的以下相关答案：

*   [为什么这个批处理脚本中的 FOR /f 循环评估一个空行？](https://stackoverflow.com/a/14658784)
*   [对于带有 wmic 不需要的输出的 /F](https://stackoverflow.com/a/34695095)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-28T19:58:27.817

```
@ECHO

ECHO Gathering Installed Printer Information...

FOR /F "tokens=1 skip=1" %%A IN ('WMIC PRINTER WHERE "Servername like "%%printaz1%%"" get sharename') DO (
  SET PRINTERNAME=%%A
  goto end
) 
:end
ECHO %PRINTERNAME% 
```

# reporting-services - 在 X 轴上分组数据

> ID：12964632
> 
> 赞同：1
> 
> 时间：2012-10-18T22:18:48.430
> 
> 标签：reporting-services

我有一个包含 5 个选项（问题）的 SharePoint 列表。每个选项都有一个值为 1-6 的下拉列表。用户（公司员工）需要选择一个选项，然后从下拉列表中选择一个值并点击提交。所选值是唯一的。换句话说，如果用户为第一个选项选择值 1，则无法再次选择该值。这是一个示例表格 -

```
Category                 Rank  
------------------------------
1\. Work/Life Balance      4
2\. Compensation           2
3\. Commute                3
4\. Work                   1
5\. Development            5 
```

填写表格后，Sharepoint 列表中的数据如下所示 -

```
Employee        Manager   Work/Life  Compensation  Commute   Work   Development  
--------------------------------------------------------------------------------
1\. Employee 1   Manager 1       2          4          3        1         5
2\. Employee 2   Manager 3       1          3          4        5         2
3\. Employee 3   Manager 1       5          4          2        3         1
4\. Employee 4   Manager 2       4          1          5        2         3 
```

我能够很好地获得报告上的 Y 轴（用于排名）。X 轴需要显示由每个 Manager 分组的每个类别。这是我希望它看起来像的示例 -

![在此处输入图像描述](../Images/2850eccec72584ff61d123953190cf10.png)

X 轴上的每个彩色条都是一个经理。这是我第一次使用 SSRS（2012 年），我只是不确定如何做到这一点。如果这是不可能的，将数据移动到不同布局的 SQL 表会有帮助吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:08:53.790

您可以将每个员工的响应汇总为数据集中的平均值（我假设您知道如何执行此操作）：

```
 Averages (just pretend)
Manager        Work/Life  Compensation  Commute   Work   Development  
--------------------------------------------------------------------------------
1\. Manager1     2          4             3         1      5
2\. Manager3     1          3             4         5      2
3\. Manager2     4          1             5         2      3 
```

然后，您可以照常使用类别，将经理作为系列字段。很确定这应该实现你正在寻找的东西。

# drupal - 需要帮助设计 Drupal 6 日历

> ID：12964643
> 
> 赞同：0
> 
> 时间：2012-10-18T22:19:47.430
> 
> 标签：drupal, calendar

我有一个客户想在他的 Drupal 6 网站上显示他的制造生产计划。

目前，客户有 Excel 文件中的生产计划，每个生产作业都根据项目类型进行颜色编码。

我创建了一个内容类型并计划使用日历模块来显示内容。内容类型有一个名为“工作类型”(field_job_type) 的字段，其中包含所有类型代码。

为了成功，我需要根据 Excel 文件中的颜色代码对每个工作（工作名称、类型、日期和位置）进行颜色编码。但是，我对如何做到这一点感到困惑。

如果有人可以提供一些帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T19:35:51.817

好吧，Drupal 6 日历模块具有此功能，但您需要通过分类来链接类型。我目前被困在同一点 - 无法应用颜色代码。我希望这会有所帮助 - [https://drupal.org/node/855224#comment-3721632](https://drupal.org/node/855224#comment-3721632)

# c# - 在 Borland C++ 中使用 C# dll

> ID：12964647
> 
> 赞同：0
> 
> 时间：2012-10-18T22:20:11.790
> 
> 标签：c#, c++, com, borland-c++

我有一个我在 VS2010 C# 中编写的 dll，并确保该项目被标记为 COM 可见，并为 COM Interop 注册。我可以在 VS2010 C++ 项目中使用，通过 C++ 属性页->通用属性->框架和引用，引用 C# 项目，然后编写代码以使用 gcnew 实例化我的对象。

但是，这种方法在 Borland C++ 中不起作用。由于注册了 C# dll，我可以添加对它的引用，并生成 *_OCX.h 和 *_TLB.h 文件，我可以看到这些文件中的可用对象。但是，我不知道如何创建我的课程。我什至不知道哪个类是正确的，因为已经完成了重命名。

在 C# 中，类可以很简单：

```
public namespace MyTest
{
   public class MyClass
   {
      public MyClass() { }
      public int SomeInt { get; set; }
   }
} 
```

在 C++ 中，生成了很多东西。其中一些是：

MyTest_TLB.cpp

```
#include <vcl.h>
#pragma hdrstop
#include "MyTest_TLB.h"

namespace Mytest_tlb
{
const GUID LIBID_MyTest = {0xE082EF89, 0x8FE8, 0x45FA,{ 0x8D, 0x13, 0x20,0x3B, 0x58, 0xCF,0x7E, 0x82} };
const GUID CLSID_MyClass = {0x22E68247, 0x3CDB, 0x3CCA,{ 0xB8, 0x8B, 0xB9,0x52, 0xF3, 0x4C,0x11, 0x70} };
const GUID IID__MyClass = {0x6A6EC8CB, 0x1AAB, 0x3AB1,{ 0xBD, 0x57, 0x0F,0xE2, 0x17, 0x78,0xD4, 0xE2} };
};     // namespace Mytest_tlb 
```

MyTest_TLB.h

```
namespace Stdvcl {class IStrings; class IStringsDisp;}
using namespace Stdvcl;
typedef TComInterface<IStrings> IStringsPtr;
typedef TComInterface<IStringsDisp> IStringsDispPtr;

namespace Mytest_tlb
{
extern __declspec (package) const GUID LIBID_MyTest;
extern __declspec (package) const GUID IID__MyClass;
extern __declspec (package) const GUID CLSID_MyClass;

interface DECLSPEC_UUID("{6A6EC8CB-1AAB-3AB1-BD57-0FE21778D4E2}") _MyClass;
typedef TComInterface<_MyClass, &IID__MyClass> _MyClassPtr;
typedef _MyClass MyClass;
typedef _MyClassPtr MyClassPtr;

interface _MyClass  : public IDispatch
{
public:
#if !defined(__TLB_NO_INTERFACE_WRAPPERS)
#endif //   __TLB_NO_INTERFACE_WRAPPERS
};

#if !defined(__TLB_NO_INTERFACE_WRAPPERS)
template <class T /* _MyClass */ >
class TCOM_MyClassT : public TComInterface<_MyClass>, public TComInterfaceBase<IUnknown>
{
public:
  TCOM_MyClassT() {}
  TCOM_MyClassT(_MyClass *intf, bool addRef = false) : TComInterface<_MyClass>(intf, addRef) {}
  TCOM_MyClassT(const TCOM_MyClassT& src) : TComInterface<_MyClass>(src) {}
  TCOM_MyClassT& operator=(const TCOM_MyClassT& src) { Bind(src, true); return *this;}
};
typedef TCOM_MyClassT<_MyClass> TCOM_MyClass;

template<class T>
class _MyClassDispT : public TAutoDriver<_MyClass>
{
public:
  _MyClassDispT(){}

  _MyClassDispT(_MyClass *pintf)
  {
    TAutoDriver<_MyClass>::Bind(pintf, false);
  }

  _MyClassDispT(_MyClassPtr pintf)
  {
    TAutoDriver<_MyClass>::Bind(pintf, true);
  }

  _MyClassDispT& operator=(_MyClass *pintf)
  {
    TAutoDriver<_MyClass>::Bind(pintf, false);
    return *this;
  }

  _MyClassDispT& operator=(_MyClassPtr pintf)
  {
    TAutoDriver<_MyClass>::Bind(pintf, true);
    return *this;
  }

  HRESULT BindDefault()
  {
    return OLECHECK(Bind(CLSID_MyClass));
  }

  HRESULT BindRunning()
  {
    return BindToActive(CLSID_MyClass);
  }
};
typedef _MyClassDispT<_MyClass> _MyClassDisp;

typedef TCoClassCreatorT<TCOM_MyClass, _MyClass, &CLSID_MyClass, &IID__MyClass> CoMyClass;
#endif  //   __TLB_NO_INTERFACE_WRAPPERS
};     // namespace Mytest_tlb 
```

还有一个 TCOM_MyClassT.h 文件。我不知道这意味着什么。我看到的教程或示例要么是针对 VC++ 的，要么是过时的，不是针对我的问题的，要么就是不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:31:05.370

知道了。

```
CoInitialize(NULL);
_MyClassPtr obj;
HRESULT ptr = obj.CreateInstance(__uuidof(MyClass)); 
```

令人沮丧的是，一些最简单的事情可能如此困难。

# php - 将 PHP 输出到 JavaScript 函数

> ID：12964648
> 
> 赞同：-1
> 
> 时间：2012-10-18T22:20:27.710
> 
> 标签：php, javascript, html, prototype

当我只输出一行时，我在将 php 输出到 javascript 时遇到问题 当我将我的 for 循环放入 javascript 时，javascript 工作正常，没有错误，只是没有输出我使用 firebug，我看到输出有问题，例如：

“'ANS”。'+' 。“回答”。'+' 。“'ANS” 如果我从 php 输出这样的文本，它可以工作。当我像这样输出一个锚点时：

```
'"' . '<a href="#">Text</a>' . '"'; 
```

但是，当我将其放入 for 循环时，它会中断，我尝试了许多选项：

```
function step1() {
            modalbox.show(new Element("div").insert(
                new Element("p", { "align": "justify" }).insert(
                    <?php $i = 0; ?>
                    <?php foreach ($items as $category => $itemsattr): $i++; ?>
                        <?php if($i == 27): ?>
                            <?= "'" . '<a class="category" href="#"> '. $category . '</a>' . "'" ?>
                        <?php endif; ?>
                            <?= "'" . '<a class="category" href="#"> '. $category . '</a>' . "'+" ?>
                    <?php endforeach; ?>
                )
            ), {
                "title"     : "Step 1/3",
                "width"     : 800,
                "options"   : [{
                    "label"     : "Next »",
                    "onClick"   : step2
                }]
            });
        }; 
```

如果我只输出这样的一个，它可以工作：

```
<?= "'" . '<a class="category" href="#">Text</a>' . "'" ?> 
```

但是，当我把它放在一个循环中并在除最后一个之外的每个末尾添加 '+ 时，它会中断。

当使用 Firebug 检查时，我的 for 循环会输出：

```
'<a class="category" href="#"> Assault Ship</a>'+ '<a class="category" href="#"> Battlecruiser</a>' 
```

据我所知，这应该对 javascript 有效，是否有另一种更安全的方式来输出 php 过去的 javascript 以避免这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:40:03.183

Instead of this:

```
<?php foreach ($items as $category => $itemsattr): $i++; ?>
    <?php if($i == 27): ?>
        <?= "'" . '<a class="category" href="#"> '. $category . '</a>' . "'" ?>
    <?php endif; ?>
        <?= "'" . '<a class="category" href="#"> '. $category . '</a>' . "'+" ?>
<?php endforeach; ?> 
```

What if you try something like this?

```
<?php echo "'"; ?>
<?php foreach ($items as $category => $itemsattr): $i++; ?>
    <?php if($i == 27): ?>
        <?= '<a class="category" href="#"> '. $category . '</a>' ?>
    <?php endif; ?>
        <?= '<a class="category" href="#"> '. $category . '</a>' ?>
<?php endforeach; ?>
<?php echo "'"; ?> 
```

You also may have better luck with this; it's more scalable than what you had:

```
<?php foreach ($items as $category => $itemsattr): $i++; ?>
    <?php if($i == 0): ?>
        <?= "'" . '<a class="category" href="#"> '. $category . '</a>' . "'" ?>
    <?php else: ?>
        <?= "+'" . '<a class="category" href="#"> '. $category . '</a>' . "'" ?>
    <?php endif; ?>
<?php endforeach; ?> 
```

Note the different placement of the + as well as the first conditional.

Like others have said, this general approach may not be the best, but this might make what you have work better...

# sql - 你可以加入存储过程吗？

> ID：12964650
> 
> 赞同：0
> 
> 时间：2012-10-18T22:20:34.527
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一堆`WITH`陈述：

```
;with OneAccession as (
        select client_id,COUNT(patient_id) PatientCount from
        (
            select client_id,patient_id
            from F_ACCESSION_DAILY
            group by CLIENT_ID,PATIENT_ID
            having COUNT(ACCESSION_ID)=1
        ) a
        group by CLIENT_ID
    )
    ,

    TwoAccessions as (
    select client_id,COUNT(patient_id) PatientCount from
        (
            select client_id,patient_id
            from F_ACCESSION_DAILY
            group by CLIENT_ID,PATIENT_ID
            having COUNT(ACCESSION_ID)=2
        ) a
    group by client_id
    )

    ,

    ThreeAccessions as (
    select client_id,COUNT(patient_id) PatientCount from
    (
        select client_id,patient_id
        from F_ACCESSION_DAILY
        group by CLIENT_ID,PATIENT_ID
        having COUNT(ACCESSION_ID)=3
    ) a
    group by client_id
    )
etc 
```

我加入这些声明

```
select * from myTable
join OneAccession
on...
join TwoACcessions
on...
join ThreeAccessions 
```

`with`我可以创建一个存储过程，而不是拥有所有这些语句吗？我只是传递值`having count(accession_id)=**@myParam**`并执行以下操作：

```
select * from myTable
join storedproc(1)
on...
join storedproc(2)
on...
etc... 
```

**加入存储的 Proc 是否有问题？**我的方法可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:26:08.553

看看[`APPLY`](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)。使用`APPLY`with[表值函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)似乎是 using 的经典示例`APPLY`，我认为这就是您想要的。

看看这个[博客文章](http://bradsruminations.blogspot.com/2009/07/cool-cross-apply-tricks-part-1.html)的例子（使用 AdventureWorks）：

```
select f.FirstName
      ,f.LastName
      ,f.JobTitle
      ,f.ContactType
      ,cc.CardNumber
from Sales.CreditCard cc
join Sales.ContactCreditCard ccc on cc.CreditCardID=ccc.CreditCardID
cross apply dbo.ufnGetContactInformation(ccc.ContactID) f
where cc.ExpYear=2008
  and cc.ExpMonth=6
  and cc.CardType='Vista' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:26:22.603

不...不过，您可以使用表函数来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:32:31.953

您**不能**加入存储过程，但可以同时加入函数和视图。请注意，视图不能接受参数，并且函数的性能可能不如 CTE。

此外，查看您的查询，您似乎应该查看新的窗口函数，例如

```
;with cte as (
    select *, count(*) over (partition by client_id, patient_id) patientcount
    from f_accession_daily
)
select * from myTable
     inner join cte on ... and patientCount=1 
```

可能对您想要实现的目标有所帮助。

# r - If语句-矩阵的对角线

> ID：12964651
> 
> 赞同：0
> 
> 时间：2012-10-18T22:20:42.517
> 
> 标签：r

我试图将 -5 放在矩阵的对角线上。我正在使用 if 语句。但我的 if 陈述是错误的。谁能给我一些帮助？

```
X= rbind(c(1.2,3.4,10.3),c(2,8,78),c(45,-36,8))
array(X,dim=c(3,3))
if (X != (1.2,8.0)){
    cat(X)
} else {
    cat(-5)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:25:54.393

```
X <- rbind(c(1.2, 3.4, 10.3), c(2, 8, 78), c(45, -36, 8))
diag(X) <- -5 
```

Joshua 并没有像他们所说的那样想成为一个混蛋——很明显你是 R 的新手，因为你写的很多东西都行不通。

if 语句中的条件必须长度为 1，看起来好像您希望输入整个矩阵。if and that is 有一个矢量化版本，`ifelse`但它不会像您希望的那样为您的矩阵工作。

`cat`打印到控制台，但它不会为您替换矩阵中的元素。您需要进行某种替换才能真正做到这一点。

尝试手动识别对角线独有的元素来进行替换可能也不是最好的主意。有更好的方法——其中一些可以在 Joshua 链接到的介绍手册中找到。祝你好运。

# java - 具有非默认构造函数的类

> ID：12964655
> 
> 赞同：-1
> 
> 时间：2012-10-18T22:20:52.120
> 
> 标签：java, class, constructor

我正在尝试创建一个带有非默认承包商但传递两个参数的 LinearNode 类。我试过这个，但我得到了一个错误。知道为什么吗？

```
public class LinearNode<T> (T elem, LinearNode<T> node){
        private LinearNode<T> next = node;
        private T element = elem;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:23:45.970

您已将构造函数与类定义混合在一起。构造函数是一个特殊的成员函数，应该或多或少地定义为一个方法（没有返回类型并且与类同名）。

```
public class LinearNode<T> {
    private LinearNode<T> next;
    private T element;

    LinearNode(T elem, LinearNode<T> node) {
        next = node;
        element = elem;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:22:01.127

你不能有`(arguments)`with 类声明

并且

您不能`private`为局部变量指定访问说明符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:25:20.290

您的构造函数声明需要与您的类声明分开。像这样：

```
public class LinearNode<T>{
    private LinearNode<T> next;
    private T element;
    LinearNode<T>(T elem, LinearNode<T> node){
        next = node;
        element = elem;
   }
} 
```

# wcf - 用于 WCF Soap WS 的 Apache CXF 客户端

> ID：12964657
> 
> 赞同：1
> 
> 时间：2012-10-18T22:21:12.070
> 
> 标签：wcf, web-services, cxf, webservice-client

我正在为使用 SOAP 的 WCF Web 服务创建一个带有 CXF 2.7.0 的 java 客户端。
我使用了 wsdl2java 工具来生成与 Web 服务通信所需的类。

我的问题是，在端点绑定上的 Web 服务中，reliableSession 已启用，因此当我尝试使用 cxf 向 Web 服务发送消息时，我得到了

```
Oct 19, 2012 1:11:59 AM org.apache.cxf.ws.rm.Proxy invoke
INFO: Sending out-of-band RM protocol message {http://schemas.xmlsoap.org/ws/2005/02/rm}CreateSequence.
Oct 19, 2012 1:11:59 AM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
WARNING: Interceptor for {http://schemas.xmlsoap.org/ws/2005/02/rm}SequenceAbstractService#{http://schemas.xmlsoap.org/ws/2005/02/rm}CreateSequence has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Could not send Message.
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:64)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:376)
    at org.apache.cxf.ws.rm.Proxy.invoke(Proxy.java:287)
    at org.apache.cxf.ws.rm.Proxy.createSequence(Proxy.java:183)
    at org.apache.cxf.ws.rm.RMManager.getSequence(RMManager.java:448)
    at org.apache.cxf.ws.rm.RMOutInterceptor.handle(RMOutInterceptor.java:152)
    at org.apache.cxf.ws.rm.AbstractRMInterceptor.handleMessage(AbstractRMInterceptor.java:83)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)
        at ......... 
```

有谁知道如何在 CXF 中启用可靠会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:12:34.583

尝试使用 cxf 版本 2.5.4 而不是 2.7.0。

# javascript - 如何将所需模块中的服务注入到模块配置函数中？

> ID：12964660
> 
> 赞同：2
> 
> 时间：2012-10-18T22:21:21.213
> 
> 标签：javascript, angularjs

我有一个单独的服务模块，我需要一个服务注入到依赖模块的配置函数中。

```
angular.module('app', ['app.services'], function(myservice) {/*use myservice*/})
  .controller('mycontroller', function($scope, myservice) {
    $scope.message = myservice.sayHello();
  });

angular.module('app.services', [], function($provide) {
  $provide.service('myservice', function() {
    return {sayHello: function() { return 'hello'; }};
  });
}); 
```

我还创建了一个小提琴：http: [//jsfiddle.net/FzGmL/](http://jsfiddle.net/FzGmL/)

代码将与*Unknown provider: myservice from app一起爆炸*

如果您从模块配置函数中删除`myservice`参数，构造函数就可以很好地注入。`app``mycontroller``myservice`

怎么才能`myservice`注入到`app`模块的config函数中呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:00:08.077

您正在寻找该`Module.run()`方法，它会在注入器完成加载后为您完成初始化工作。

```
angular.module('myApp', ['app.services'])
   .run(function(myservice) {
      //stuff here.
   }); 
```

# python - 安装 Chrome 原生客户端 SDK

> ID：12964666
> 
> 赞同：1
> 
> 时间：2012-10-18T22:21:46.930
> 
> 标签：python, google-nativeclient

在过去的几天里，我一直在尝试在 Windows 和/或 Ubuntu 中安装适用于 chrome 的 Native Client SDK。我在一个公司网络后面，唯一的互联网访问是通过一个涉及身份验证的 HTTP 代理。当我在 Ubuntu 中运行“naclsdk update”时，它显示

“urlopen 错误隧道连接失败：需要 407 代理身份验证”

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:33:23.817

尝试下载此文件：

[http://commondatastorage.googleapis.com/nativeclient-mirror/nacl/nacl_sdk/naclsdk_manifest2.json](http://commondatastorage.googleapis.com/nativeclient-mirror/nacl/nacl_sdk/naclsdk_manifest2.json)

它是本机客户端更新摘要，但在 URL 中我将**https**替换为**http**。如果您查看 JSON 文件，您将看到不同的可用 pepper_xx 版本。使用链接下载您想要的链接，但再次将 https 替换为 http。

naclsdk 更新工具对于我们这些处于严格防火墙后的人来说非常难以使用。如果 Google 提供最新 SDK 的直接链接，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:26:28.967

我得到了一个解决方案——但不是直接的。设法使用程序通过 HTTP 代理重定向 HTTPS 流量。我使用了名为“proxifier”的程序。效果很好。

# java - Youtube API 在 android 上不可能？

> ID：12964673
> 
> 赞同：0
> 
> 时间：2012-10-18T22:22:28.500
> 
> 标签：java, android, youtube-api, google-data-api

在将我的 android 应用程序连接到 youtube API 时，我遇到了巨大的问题。首先，我尝试使用原生 youtube gdata java 客户端（[http://code.google.com/p/gdata-java-client/](http://code.google.com/p/gdata-java-client/)）。我已经读到这可以很容易地集成到一个 android 应用程序中，所以我开始这样做，但每次在线时我都会绊倒

```
 YouTubeService ytservice = new YouTubeService("AppName",Dev_Key); 
```

我会在此处输入正确的详细信息，甚至拥有所有必要的外部 jar，但每次我都会收到 NoClassDefFoundError 报告，报告找不到 YouTubeService，也找不到它的超类 MediaService。（你知道，我有 gdata-youtube-2.0.jar、gdata-client-1.0.jar、gdata-media-1.0.jar、guava.11.0.2.jar 和 jsr305.jar）

然后我尝试了似乎支持 android ( [http://code.google.com/p/google-api-java-client/wiki/Android](http://code.google.com/p/google-api-java-client/wiki/Android) )。甚至还有一个示例示例，其中集成了 google 任务，因此看起来很有希望。它没有一个实际的 YouTube 类，但它确实支持 OAuth 2.0 登录，我可以通过将 URL 请求发送到具有 OAuth 2.0 身份验证的 youtube API 来使用它。我尝试了这个，但是当我可以从它与 android 的 AccountManager 组合中获得的唯一密钥是身份验证密钥令牌时。将此与向 google 的 URL 请求一起发布会导致来自 youtube 的“需要身份验证”响应（因为我提供了不正确的访问令牌，它至少是我与之比较的工作访问令牌的两倍）。

如何从 AccountManager 中找到 youtube API 所需的访问令牌？或者更好的是，我怎样才能让 YouTube 服务正常工作？谢谢

罗里

# 编辑

Amad，感谢您的回答，但不幸的是，这就是我已经在做的事情：（ [来源：][[themobilelook.com](http://www.themobilelook.com/eclipse.png)][）][![](../Images/91508cc53d9c0f1b89affce68457a970.png)](https://i.stack.imgur.com/o4Qce.png)

如果我提供我的项目文件夹也许会有所帮助：[这](http://www.themobilelook.com/testtube.zip) 是一个准系统设置，实际上只是为了测试 YouTubeService 是否有效。

使用 adt 20，jdk 合规级别 1.6

如果您设法创建一个工作版本，那么如果您可以分享它，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:32:32.847

YouTube API 库必须包含在项目中。通过转到 Project Properties > Build Path > Order and Export 选项卡，您可以勾选所有 YouTube-API 相关库旁边的复选框，以确保在您导出项目时它们将包含在项目中。确保在执行此操作后进行清理和重建。

至于访问令牌......不完全确定。[该文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2)可能会有所帮助。[这个 Google Groups 主题](https://groups.google.com/forum/?fromgroups#!topic/youtube-api-gdata/VloUB9kjniI)也可能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:31:58.510

如果您`NoClassDefFoundError`在运行时获得，那么我怀疑您没有将它们包括在运行时工作。您必须像这样检查每个 .jar 的复选框：

![在此处输入图像描述](../Images/0768261d28c9ae4c94edaeac086c1f76.png)

（当然，您必须先将它们添加到您的 java 构建路径中）

# jquery - 在复选框单击时使用 ajaxform 提交表单

> ID：12964678
> 
> 赞同：0
> 
> 时间：2012-10-18T22:23:03.670
> 
> 标签：jquery, ajax, forms, checkbox, ajaxform

我正在努力实现它在标题中所说的。

我正在使用 jQuery，并且我有在我的应用程序的其他地方使用的 ajaxForm 插件。

我目前拥有的代码是

```
$('form.date-response input[type=checkbox]').live('click', function(){
    $(this).parent('form').submit();
}); 
```

但它似乎所做的只是提交表单，它可以工作，并且可以完成工作，但它会执行发布它的操作。与其他表单不同，它不使用 ajaxForm() 请求。

讨论中的插件是[http://jquery.malsup.com/form/#ajaxForm](http://jquery.malsup.com/form/#ajaxForm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:24:53.870

似乎已经很晚了，如果其他人有类似的问题，我已经设法快速解决了这个问题。

```
$('form.date-response input[type=checkbox]').live('click', function(){
    $(this).parent('form').ajaxForm().submit();
}); 
```

希望这是好的，正确的。如果有人有任何其他解决方案，请分享。

# mysql - 自定义查询计数和分组

> ID：12964681
> 
> 赞同：1
> 
> 时间：2012-10-18T22:23:16.783
> 
> 标签：mysql

我试图找到一种按价格“组”对数据库表中的价格进行分组的方法。所以我的数据库表看起来像这样：

```
+-------+------------------+
| Field | Type             |
+-------+------------------+
| id    | int(11) unsigned |
| name  | varchar(255)     |
| price | varchar(30)      |
+-------+------------------+ 
```

这些是我的数据库表中的相关字段。我想要完成的是运行一个查询，该查询将按价格范围对结果进行分组，因此价格在 1 美元到 10 美元之间的商品将进入第 1 组；11 到 20 美元将进入价格组 #2，等等……所以它应该看起来像这样：

```
+-------------+------------+
| price_group | item_count |
+-------------+------------+
| $1-$10      | 10         |
+-------------+------------+
| $11-$20     | 8          |
+-------------+------------+
| $21-$30     | 22         |
+-------------+------------+
| $31-$40     | 58         |
+-------------+------------+
| $41-$40     | 3          |
+-------------+------------+ 
```

我没有尝试过的任何代码，因为我不确定从哪里开始。仍在寻找线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:26:59.353

您可以按价格分组（偏移 1，因为您将分组划分的位置）除以 10，然后转换为整数。考虑 21-30 美元的群体。如果你减去一个，那将是 20-29 美元。除以十（并转换为整数），该组中的任何内容都将返回 2 美元，为您提供价格组的常量。

```
SELECT CAST((price - 1) / 10 AS UNSIGNED) AS price_group, 
    SUM(item_count) as total_item_count
FROM table_name
GROUP BY price_group 
```

另请注意，我确实是`SUM(item_count)`为了获得该组的总数。

这里`price_group`返回的只是十位数。例如，对于组“$21-$30”，`price_group`返回的将是“2”。

# drupal - 灯箱模块和滚动条

> ID：12964694
> 
> 赞同：1
> 
> 时间：2012-10-18T22:24:54.020
> 
> 标签：drupal, scrollbar, lightbox2

我将 lightbox2 模块用于 drupalCMS 的登录功能。我在 Firefox、IE9 和 Chrome 等的灯箱窗口右侧出现了一个恼人的滚动条。有谁知道如何摆脱它？

# matlab - 在 Matlab 中，使用长度（x）的错误，给出下标索引错误

> ID：12964699
> 
> 赞同：3
> 
> 时间：2012-10-18T22:25:27.523
> 
> 标签：matlab, vector, size, spline

我从 .dat 文件中提取与时间相关的数据，并使用样条函数，将值与正在使用的现有时间向量匹配。由于某种原因，长度函数无法读取向量的长度。

我可以用这个简介重新创建错误：

```
x = linspace(1,98,76)';
y = 20.*x-5.*x.^2;
t = linspace(0,100,1000)';
yy = spline(x,y,t);
length(yy) 
```

它返回

> ？？？下标索引必须是实数正整数或逻辑数。

它在我的工作区中显示 yy 是 1000x1 双倍，并且 max(size(yy)) 工作正常。关于是什么造成此错误的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T22:28:09.057

您的工作区中可能有一个名为的变量`length`。使用[`whos`](http://www.mathworks.com/help/matlab/ref/whos.html)命令查看是否是这种情况。

```
whos length 
```

`length`如果变量存在，这将打印出变量的大小和类型。

# c# - 与通过 foreach 循环遍历数组相比，Array.ConvertAll 的实际用途是什么？

> ID：12964702
> 
> 赞同：5
> 
> 时间：2012-10-18T22:25:31.627
> 
> 标签：c#, arrays, converter

我的问题是相当笼统的，因此，我不会提供任何代码（除非有人要我添加它，但我认为我的问题很清楚）。我现在一直在看两篇关于 Array.ConvertAll 方法的文章，但我自己找不到直接使用它的方法。我读过的文章：

[http://msdn.microsoft.com/en-us/library/exc45z53.aspx](http://msdn.microsoft.com/en-us/library/exc45z53.aspx)

“转换器”（文章底部）： http: [//www.codeproject.com/Articles/117611/Delegates-in-C-Attempt-to-look-inside-Part-4](http://www.codeproject.com/Articles/117611/Delegates-in-C-Attempt-to-look-inside-Part-4)

现在我了解了转换器的工作原理以及如何使用它，但是，我没有看到它的直接必要性。由于如何将一个对象转换为另一个对象的实际方法必须完全确定（例如，在代码项目链接中，方法“ConvertToPersonInfo”或arroding Action/Lambda 类型委托），是否不仅可以声明和实例化新对象的新数组并在旧对象的旧数组上执行foreach循环并在该循环中复制所需的变量？

根据微软的文章，旧数组没有任何影响，所以最终的效果不会有什么不同。

我在这里遗漏了一点并且不了解转换器，还是真的一样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T22:29:00.657

当然你也可以自己做。这只是一种通过创建数组并为您执行循环来简化转换的方法。

例如：

```
 int[] newArr = new int[oldArr.Length];
 for (int i = 0; i < oldArr.Length; i++) {
   newArr[i] = Convert.ToInt32(oldArr[i]);
 } 
```

与只是：

```
 int[] newArr = Array.ConvertAll(oldArr, Convert.ToInt32); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T22:30:57.490

最终结果是更少类型的代码和一个非常清楚的说明你在做什么。我正在将这个集合转换为那个集合（我只通过读取方法名称就知道这一点），而不必检查 foreach 循环的主体以查看发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:28:53.107

如果您需要在代码中的多个位置使用它，它的可重用性更高。但是，我认为自己实施它在效率方面可能会更快。

# plsql - Oracle PL-SQL 序列

> ID：12964703
> 
> 赞同：0
> 
> 时间：2012-10-18T22:25:40.837
> 
> 标签：plsql

再会，

我正在尝试在查询中使用 pl/sql 变量（我是 sql server 人员），这是我的代码：

```
DECLARE
    nextvalue     integer;
BEGIN

    SELECT submission_seq.currval INTO nextvalue FROM DUAL;

    dbms_output.put_line('test');    
    dbms_output.put_line(nextvalue);

    /* ERROR OCCURS HERE */
    SELECT nextvalue, id FROM TABLE_STATUS;

END; 
```

我收到了 PLS-00428：在这个 SELECT 语句中应该有一个 INTO 子句。

我不明白为什么我会得到这个，因为我用一个来填充包含我想要的*内容的 nextvalue。*

谁能帮我？

TIA,

科森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:32:28.363

这是因为，正如消息所述，select 语句期望您将结果分配给变量。

尝试：

```
DECLARE
    nextvalue     integer;
    result        table_status%type;
BEGIN

    SELECT submission_seq.nextval INTO nextvalue FROM DUAL;

    dbms_output.put_line('test');    
    dbms_output.put_line(nextvalue);

    SELECT id INTO result FROM TABLE_STATUS;

END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:36:21.203

The secuence has started?

Change this

```
SELECT submission_seq.currval INTO nextvalue FROM DUAL; 
```

for this

```
SELECT submission_seq.nextval INTO nextvalue FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:50:08.097

尝试这个：

```
DECLARE
    nextvalue     integer;
BEGIN
nextvalue := submission_seq.currval;

dbms_output.put_line('test');    
dbms_output.put_line(nextvalue);

SELECT nextvalue, id FROM TABLE_STATUS;

END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T22:54:22.353

如果您使用的是 Oracle 11g，那么您不必再从 dual 中进行选择。下面的代码片段将起作用。

```
/* Formatted on 1/25/2013 4:35:00 PM */
DECLARE
   nextvalue      NUMBER := submission_seq.currval;
BEGIN
   DBMS_OUTPUT.put_line ('test');
   DBMS_OUTPUT.put_line (nextvalue);
END; 
```

# java - 通用 DAO 模式 Spring JDBC 模板

> ID：12964709
> 
> 赞同：0
> 
> 时间：2012-10-18T22:26:10.597
> 
> 标签：java, database, spring, dao, jdbctemplate

从一开始就必须实现这个模式已经有一段时间了，所以我对在 spring jdbc 中使用这个模式时缺少什么感到有点困惑。这是我的 BaseDao 的一个片段：

```
 protected BaseDao(RowMapper<T> rowMapper, String tableName, JdbcTemplate jdbcTemplate)
   {
      this.rowMapper = rowMapper;
      this.tableName = tableName;
      this.findByIdSql = "SELECT * FROM " + tableName + " WHERE id = ?";
      this.jdbcTemplate = jdbcTemplate;
   }

   public T findById(final Integer id)
   {
      if (id == null)
      {
         return null;
      }

      Object[] params = { id };
      return jdbcTemplate.queryForObject(findByIdSql, params, rowMapper);
   }

   public T save(final T dto)
   {
      if (dto == null)
      {
         return null;
      }

      try
      {
         if (dto.isNew())
         {
            final Integer newId = jdbcTemplate.update("INSERT INTO " + tableName);
         }
      }
      catch (UncategorizedSQLException e)
      {
         logger.error("****************" + e.getMessage(), e);
         throw new RuntimeException("Could not persist: " + e.getMessage());
      }
   }

   public void delete(final T dto)
   {
      if (dto == null)
      {
         final String errorMessage = "Can't delete a null object";
         logger.warn(errorMessage);
         throw new RuntimeException(errorMessage);
      }

      if (!dto.cameFromDatabase())
      {
         throw new RuntimeException("Can't delete an object that didn't come from the database");
      }

      try
      {

      }
      catch (JdbcUpdateAffectedIncorrectNumberOfRowsException e)
      {
         final String message = "The delete failed on " + dto + ".  " + e.getMessage();
         logger.error(message);
         throw new RuntimeException(message, e);

      }
   } 
```

如您所见，我的 findById 工作正常，并且能够处理抛出的任何类。问题是我不记得如何简单地使用 jdbctemplate 来“生成”保存（处理插入和更新）和删除。这不能实现吗？每个DAO都需要自己定义这两个方法吗？我看不到 jdbc 模板如何灵活地编写单独的插入、更新、删除语句。浏览网页时，我看到了大量使用休眠或实体管理器的示例。这是我应该走的路线吗？或者我在这里遗漏的明显步骤是什么？

我知道保存和删除没有填写，但我只是想知道如何处理该行

```
final Integer newId = jdbcTemplate.update("INSERT INTO " + tableName); 
```

处理扔给它的任何 DTO。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:45:48.520

你的路很好，`JdbcTemplate`方法`update` [可以处理插入/删除/更新操作](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#update%28java.lang.String,%20java.lang.Object...%29)

[本文](http://www.mkyong.com/spring/spring-jdbctemplate-jdbcdaosupport-examples/)引用的一个示例演示了插入操作：

```
private DataSource dataSource;
private JdbcTemplate jdbcTemplate;

public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
}

public void insert(Customer customer){

    String sql = "INSERT INTO CUSTOMER " +
        "(CUST_ID, NAME, AGE) VALUES (?, ?, ?)";

    jdbcTemplate = new JdbcTemplate(dataSource);

    jdbcTemplate.update(sql, new Object[] { customer.getCustId(),
        customer.getName(),customer.getAge()  
    });

} 
```

# audio - 浏览器中的音高识别游戏

> ID：12964712
> 
> 赞同：4
> 
> 时间：2012-10-18T22:26:34.067
> 
> 标签：audio, browser, pitch-tracking

我真的很想开发一些在浏览器中运行的游戏和练习，并使用音高检测通过麦克风收听并奖励正确答案的分数。

这是在幻想的领域吗？如果不是，起点是什么？

# java - java初始屏幕上的取消按钮

> ID：12964717
> 
> 赞同：0
> 
> 时间：2012-10-18T22:26:57.657
> 
> 标签：java, swing, button, awt, splash-screen

是否可以打开取消按钮，`SplashScreen`以便用户可以取消应用程序启动？
如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:28:33.097

初始屏幕只是一个无边框窗口（您可以使用 JFrame 创建）。您可以添加一个面板，该面板将具有一个 JButton，该 JButton 又调用 System.exit(0); 而不是加载应用程序。

```
 JFrame frame = new JFrame("");
    JPanel panel = new JPanel();
    JButton cancel = new JButton("Cancel Loading");
    cancel.addMouseListener(new MouseAdapter(){/*add listener, call System.exit(0);*/}); 
    panel.add(cancel);
    JLabel label = new JLabel();
    //set image of the label which will be your application's icon
    frame.getContentPane().add(panel);
    frame.setUndecorated(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 200); //400x200 splash screen
    frame.setVisible(true); 
```

# xcode - Xcode - 如何让按钮多次更改标签文本

> ID：12964719
> 
> 赞同：1
> 
> 时间：2012-10-18T22:26:57.920
> 
> 标签：xcode, button, if-statement

我试图通过按一个按钮来改变不同数量的数字。我是 xcode 的新手，不知道该怎么做，任何帮助都会很好。

我希望数字更改为 15，但仅当我第二次按下按钮时。然后，我想在第三次按下时，将数字更改为 30。按 1：从“0”到“5”，按 2：从“5”到“15”，按 3：从“15”到30"，我想学习如何添加不同的数量

```
-(IBAction)changep1:(id) sender {
p1score.text = @"5";
if (p1score.text = @"5"){

p1score.text = @"15"; 
```

//即使上述方法有效，我也不知道如何编写代码将其更改为 30。}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:34:40.143

听起来您可能想在视图控制器中添加一个属性来存储玩家 1 的分数，如下所示：

```
@property (nonatomic, assign) NSInteger p1Score; 
```

然后在你的`init`方法中，你可以给这个属性一个初始值：

```
self.p1Score = 0; // you can set this to any integral value you want 
```

然后，在您的按钮点击方法 ( `changep1`) 中，您可以执行以下操作：

```
- (IBAction)changep1:(id)sender
{
    // add 5 (or any value you want) to p1Score
    self.p1Score = self.p1Score + 5;

    // update the display text. in code below %d is replaced with the value of self.p1Score
    p1score.text = [NSString stringWithFormat:@"%d", self.p1Score];
} 
```

# r - R图中的命名字符向量和par()

> ID：12964720
> 
> 赞同：4
> 
> 时间：2012-10-18T22:27:12.077
> 
> 标签：r, plot, par

我正在尝试使用命名字符向量来保存自定义调色板，所以我可以说，例如调色板['red']，而不是到处重复“#dc322f”。

但是，我似乎无法使用该向量的元素作为参数`par()`（尽管它可以在其他地方使用）。

这是一个例子。它将创建一个带有绿点的图形，但 par() 调用失败并且背景为白色。请注意，我*可以*使用调用中的调色板向量设置参数`plot()`：

```
> palette <- c('#002b36','#dc322f','#859900')
> names(palette) <- c('black','red','green')
> par(bg=palette['red'])                                                                                                                                
Warning message:
In par(bg = palette["red"]) : "bg.red" is not a graphical parameter
> plot(1:10,1:10,col=palette['green'])
> # (White graph with green dots appears) 
```

但是，当我使用命名的*数字*向量时，它可以工作：

```
> palette <- 1:3                                                                                                                                          
> names(palette) <- c('black','red','green')                                                                                                              
> par(bg=palette['red'])                                                                                                                             
> # (no error here -- it worked.)
> plot(1:10,1:10,col=palette['green'])
> # (Red graph with green dots appears) 
```

我对 R 相当陌生，似乎我可能遗漏了一些基本的东西。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:31:39.877

使用`unname`，以便传递给的项目`par`只是定义颜色的字符向量，而不是命名元素

```
palette <- c('#002b36','#dc322f','#859900')
names(palette) <- c('black','red','green')
par(bg=unname(palette['red'])) 
plot(1:10,1:10,col=palette['green']) 
```

![在此处输入图像描述](../Images/acdeffe2ce1352c86c4fc16d8e433e20.png)

至于为什么？

在 内`par`，如果所有参数都是字符向量，则

```
if (all(unlist(lapply(args, is.character)))) 
            args <- as.list(unlist(args)) 
```

`as.list(unlist(args))`如果 args 是一个命名的字符向量，那么这种方法是有效的

```
args <- list(bg = palette['red'])
as.list(unlist(args))
$bg.red
[1] "#dc322f" 
```

并且`bg.red`不是有效的`par`.

如果这条线是这样的

```
setNames(as.list(unlist(args, use.names = F)), names(args)) 
```

那么它在某些情况下可能会起作用（尽管如果任何命名元素的`arg`长度> 1，则不会）

# sql - 根据另一个表中存在的值，用一个表中的不同值填充组合框？

> ID：12964722
> 
> 赞同：0
> 
> 时间：2012-10-18T22:27:18.263
> 
> 标签：sql, ms-access

我正在尝试使用从客户端表中提取的不同值填充组合框，但前提是这些客户端存在于 mfgOrders 表中。我已将行源设置为以下查询：

```
SELECT DISTINCT Client.ClientName FROM Client 
INNER JOIN mfgOrders ON Client.id=mfgOrders.client; 
```

当我切换到数据表视图时，我可以看到 mfgOrders 表中的所有不同客户端。问题是这不会填充在组合框中。

我最初认为这可能是由于数据大小造成的，但奇怪的是，当我从 Client 中选择 ClientName 时，它​​会成功填充该框但包含所有客户端。

不幸的是，我不希望所有客户都在组合框中。只是也出现在 mfgOrders 表中的客户。

我被这个难住了。我的逻辑不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:10:27.873

似乎将下拉列表链接到查询时，将根据查询的字段数填充列表。

在这种情况下，尽管第一个字段仅用于创建联合，但 Access 创建了一个包含 2 列的组合框，其中第一列的宽度为 0"。

这似乎已经完成，因为未选中查询中第一个字段的“显示”框。结果是一个空白列表。

为了解决这个错误，我只是重新安排了查询。

# php - 验证交易收据时的状态 21002

> ID：12964728
> 
> 赞同：2
> 
> 时间：2012-10-18T22:27:44.340
> 
> 标签：php, objective-c, ios, in-app-purchase

我尝试查看所有其他问题，但似乎没有任何问题可以解决此问题。我已经缩小范围，所以来自[https://sandbox.itunes.apple.com/verifyReceipt](https://sandbox.itunes.apple.com/verifyReceipt)的响应很简单`{"status":21002}`。任何帮助将不胜感激，我已经复制了下面的相关代码。

```
NSString *completeString = @"http://www.mysite.com/verify.php";

NSURL *urlForValidation = [NSURL URLWithString:completeString];

NSMutableURLRequest *validationRequest = [[NSMutableURLRequest alloc] initWithURL:urlForValidation];

[validationRequest setHTTPMethod:@"POST"];

NSString *strTest = [NSString stringWithFormat:@"receipt=%@", [self createEncodedString:transaction.transactionReceipt]];

[validationRequest setHTTPBody:[NSData dataFromBase64String:strTest]];

NSData *responseData = [NSURLConnection sendSynchronousRequest:validationRequest returningResponse:nil error:nil];

NSString *response = [[NSString alloc] initWithData: responseData encoding: NSUTF8StringEncoding];

NSLog(@"%@", response);

- (NSString*) createEncodedString:(NSData*)data {
    static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

    const int size = ((data.length + 2)/3)*4;
    uint8_t output[size];

    const uint8_t* input = (const uint8_t*)[data bytes];
    for (int i = 0; i < data.length; i += 3)
    {
        int value = 0;
        for (int j = i; j < (i + 3); j++)
        {
            value <<= 8;
            if (j < data.length)
                value |= (0xFF & input[j]);
        }

        const int index = (i / 3) * 4;
        output[index + 0] =  table[(value >> 18) & 0x3F];
        output[index + 1] =  table[(value >> 12) & 0x3F];
        output[index + 2] = (i + 1) < data.length ? table[(value >> 6)  & 0x3F] : '=';
        output[index + 3] = (i + 2) < data.length ? table[(value >> 0)  & 0x3F] : '=';
    }

    return  [[NSString alloc] initWithBytes:output length:size encoding:NSASCIIStringEncoding];
} 
```

最后这是使用的 PHP 代码：

```
$url = 'https://sandbox.itunes.apple.com/verifyReceipt';

$receipt = "{%s}" % $_POST["receipt"];

$purchase_encoded = base64_encode( $receipt );

$encodedData = json_encode( Array( 
    'receipt-data' => $purchase_encoded 
) );

//Open a Connection using POST method, as it is required to use POST method.
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $encodedData);
$encodedResponse = curl_exec($ch);
curl_close($ch);

//Decode response data using json_decode method to get an object.

echo $encodedResponse;

$response = json_decode( $encodedResponse );

echo $response; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:00:18.590

经过大量的摆弄，我能够弄清楚。我相信最大的错误在于我如何设置 HTTP 正文。最终代码如下，希望这可以帮助其他人！

目标-C：

```
NSString *completeString = @"http://www.mysite.com/verify.php";

NSURL *urlForValidation = [NSURL URLWithString:completeString];

NSMutableURLRequest *validationRequest = [[NSMutableURLRequest alloc] initWithURL:urlForValidation];

[validationRequest setHTTPMethod:@"POST"];

NSString *strTest = [NSString stringWithFormat:@"receipt=%@", [self base64forData:transaction.transactionReceipt]];

[validationRequest setHTTPBody:[strTest dataUsingEncoding:NSUTF8StringEncoding]];

NSData *responseData = [NSURLConnection sendSynchronousRequest:validationRequest returningResponse:nil error:nil];

NSString *response = [[NSString alloc] initWithData: responseData encoding: NSUTF8StringEncoding];

NSLog(@"%@", response); 
```

PHP：

```
$url = 'https://sandbox.itunes.apple.com/verifyReceipt';

$encodedData = json_encode( Array( 
    'receipt-data' => $_POST["receipt"] 
) );

//Open a Connection using POST method, as it is required to use POST method.
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $encodedData);
$encodedResponse = curl_exec($ch);
curl_close($ch);

$response = json_decode( $encodedResponse );

/*
echo "Status Code:";

echo $response->{'status'};
*/

if ($response->{'status'} != 0) {
    echo "FAIL";
} else {
    echo "SUCCESS";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T03:37:51.953

nlutterman 的回答是正确的！它对我帮助很大。如果有人试图让他的解决方案发挥作用，那么只有使用以下方法将收据数据编码为 base64（应用内），它才会起作用。

```
- (NSString*)base64forData:(NSData*)theData {
const uint8_t* input = (const uint8_t*)[theData bytes];
NSInteger length = [theData length];

static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
uint8_t* output = (uint8_t*)data.mutableBytes;

NSInteger i;
for (i=0; i < length; i += 3) {
    NSInteger value = 0;
    NSInteger j;
    for (j = i; j < (i + 3); j++) {
        value <<= 8;

        if (j < length) {
            value |= (0xFF & input[j]);
        }
    }

    NSInteger theIndex = (i / 3) * 4;
    output[theIndex + 0] =                    table[(value >> 18) & 0x3F];
    output[theIndex + 1] =                    table[(value >> 12) & 0x3F];
    output[theIndex + 2] = (i + 1) < length ? table[(value >> 6)  & 0x3F] : '=';
    output[theIndex + 3] = (i + 2) < length ? table[(value >> 0)  & 0x3F] : '=';
}

return [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; } 
```

正常的`base64EncodedStringWithOptions:`就不行了。

# css - 将样式添加到无序列表的不同部分，wordpress 小部件

> ID：12964733
> 
> 赞同：0
> 
> 时间：2012-10-18T22:28:11.953
> 
> 标签：css, wordpress, widget

我认为描述我的问题的最佳方式是向您展示。

[http://yourinternship.hailstormcommerce.com/?page_id=21](http://yourinternship.hailstormcommerce.com/?page_id=21)

在左侧的侧边栏上，有一个使用 的小部件，`ul`当我将 a`bottom-border`应用于第一个时`li`，然后为任何孩子关闭边框`li`。

我的问题是，小部件顶部的“您的实习”边框直到其子菜单完成后才会出现，即在“住宿”上方。但我希望它直接位于“Your Internship”下方，就像其他菜单页面一样。所以基本上它与整个`li`. 我理解为什么会发生这种情况，我能够绕过它的唯一方法是在下面放置一个边框，`ul li a`但问题是这最终会变得非常混乱，用于控制边框的宽度等（使用`padding`等）。

有人对我如何将边框应用于第一个链接有任何建议吗？

另外，在同一张纸条上，是否可以删除“联系我们”下的最后一个边框？

我在这里问第二个问题，我想我的整体问题与从 wordpress 中设置小部件的特定部分有关。

提前感谢您的帮助。任何问题让我知道，因为我可能让这听起来令人困惑。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:47:09.303

这是可能的。我做了一个简化的例子，你可以从中学习：

```
<ul class="widget">
  <li class="active">Your Internship
    <ul>
      <li>Benefit of our program</li>
      <li>Students</li>
      <li>University</li>
      <li>Why Choose Us</li>
      <li>Your Internship Process</li>
      <li>Your Language Course</li>
    </ul>
  </li>
  <li>Your Accomodation</li>
  <li>Your Employers</li>
  <li>Information for Interns</li>
  <li>Apply Now</li>
  <li>Contact Us</li>
</ul> 
```

要摆脱活动和最后一个项目的边框，请使用以下伪选择器：

```
.widget > li:last-child, .active {
  border: none;
} 
```

为了在 " " 类上重新添加边框`active`，我使用了一个伪元素：

```
.active:before {
  content: "";
  width: 100%;
  position: absolute;
  top: 25px;
  border-bottom: 2px solid salmon;
} 
```

[演示](http://codepen.io/bookcasey/pen/mbokL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:54:47.483

它可能比你想要的有点混乱，但这里有一个建议。

要直接在“Your Internship”下方获取该行（但仍将其保持在“Your Accomdation”上方），您可以执行以下操作：

```
#menu-your-internship-sidebar .current_page_parent > a {
    display: block
    border-bottom: solid 1px #DDD;
 } 
```

要删除“联系我们”下的最后一个边框，只需将 li:last-child 底部边框设置为 0，如下所示：

```
#menu-your-internship-sidebar li:last-child {
    border: none
} 
```

编辑：如果您想删除“您的住宿”上方的边框：

```
#menu-your-internship-sidebar > li.current-page-parent {
    border: none;
} 
```

# iphone - 如何为标签栏视图控制器之间的切换添加过渡

> ID：12964735
> 
> 赞同：0
> 
> 时间：2012-10-18T22:28:15.167
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar, transition

我添加`UITabBarViewController`到我的应用程序并添加了五个`ViewControllers`. 每`VC`到一个`TabBarItems`。所有这些都运行良好。但是第三个`view`是让用户输入一些数据，所以我希望它呈现为临时`VC`的。临时的通常过渡`VC`是交叉溶解。这使`VC`从底部向上。

所以我的问题是**如何为 TabBarItems 之间的过渡制作此动画**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:47:27.917

我使用这个函数来获取目标视图的索引。我会将此函数添加为父视图控制器的一部分，以供子视图控制器调用。这取决于你。

```
-(void) animateTabBarTransition:(NSInteger) destinationTabIdx{
   UIView * fromView = self.tabBarController.selectedViewController.view;
   UIView * toView = [[self.tabBarController.viewControllers objectAtIndex:destinationTabIdx] view];

  [UIView transitionFromView:fromView toView:toView duration:0.8
    options:(destinationTabIdx > self.tabBarController.selectedIndex ? UIViewAnimationOptionTransitionFlipFromLeft: UIViewAnimationOptionTransitionFlipFromRight)
            completion:^(BOOL finished) {
                if (finished) {
                    self.tabBarController.selectedIndex = destinationTabIdx;
                }
}]; 
```

}

# python - Python 2.5.4 抛出 'NoneType is not callable' 而 2.5.1 工作正常

> ID：12964736
> 
> 赞同：0
> 
> 时间：2012-10-18T22:28:19.597
> 
> 标签：python

我理解这个问题可能太模糊了，但以防万一有人看到这个或有任何线索。我有一个在 python 2.5.1 下运行良好的应用程序。但是在 Python 2.5.4 上运行它时，它开始给出“NoneType is not callable”。

我已经检查了版本之间的更改日志，但是有很多更改，而且很难说可能相关的内容。

你能给出任何提示，请从哪里开始进一步挖掘？

编辑：显然有些东西是无，但问题是为什么它不是 2.5.1 下的无。我希望对此有一个众所周知的问题，以便这个问题可能会遇到。

编辑 2：很明显，尝试导入 win32com.client 时会发生错误。任何线索如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:38:57.690

开始挖掘的地方是您的应用程序。错误消息告诉你一些变量是`None`你认为它应该指向一个对象的时候。所以，找到那个变量（错误信息应该告诉你它在哪里），然后找出为什么这个变量包含`None`.

您的代码很有可能会默默地捕捉错误，或者做出一些错误的假设。找到那个错误或假设，然后从那里向后工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T11:51:34.383

我代表“匿名用户”（大概是未正确登录的 OP？！）发布此答案，他将此作为对问题的编辑（编辑被拒绝，因为它应该作为答案发布- 这就是我现在正在做的）。

> 编辑3（和答案）：完成。事实证明，win32com.client 不能在同一个进程中多次导入。即使是第一次导入，也有必要重新生成 COM 缓存并确保它不是只读的。我们已经通过根本不使用 win32com 来解决它，因为它似乎只需要 MSXML。XML 处理是使用 python 的标准库 xml.sax 重写的。

# javascript - 禁用滚动但仍然在 Javascript 中引发事件

> ID：12964738
> 
> 赞同：0
> 
> 时间：2012-10-18T22:28:27.030
> 
> 标签：javascript, dom, scroll, dom-events

在你说什么之前，我意识到已经有非常相似的问题，但它们并没有给我确切的需要。

我的问题是我如何在 Javascript 中阻止用户滚动，但我仍然可以用这样的东西引发事件。

```
window.onload = function()
{
    //adding the event listerner for Mozilla
    if(window.addEventListener)
        document.addEventListener('DOMMouseScroll', moveObject, false);

    //for IE/OPERA etc
    document.onmousewheel = moveObject;
}
function moveObject(event)
{
    //CODE
} 
```

编辑：然后我需要让用户再次滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:36:53.040

您将需要`return false;`从您的事件处理程序。

```
function moveObject(event)
{
    //CODE
    return false;
} 
```

# sql - Microsoft SQL Server 多重锁

> ID：12964747
> 
> 赞同：1
> 
> 时间：2012-10-18T22:29:03.967
> 
> 标签：sql, sql-server, locks

我目前正在运行 Microsoft SQL Express Server。当一个用户执行查询而不提交它时，它会锁定整个表。问题是恶意用户可能会故意“破坏”数据库。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:33:52.877

您需要了解数据库隔离级别[http://en.wikipedia.org/wiki/Isolation_(database_systems](http://en.wikipedia.org/wiki/Isolation_(database_systems) )。很可能您正在运行可序列化的查询，这将产生这种效果。尝试提交一些代码。

# .net - 在云和本地安装上安排作业

> ID：12964748
> 
> 赞同：0
> 
> 时间：2012-10-18T22:29:08.723
> 
> 标签：.net, architecture, azure, self-hosting

我正在开发一个有两个要求的新建项目。

*   在云 (Azure) 中运行。
*   在自托管的 Windows Server 安装上运行。

该项目分为3个主要部分。

1.  客户的集合。
2.  一个 RESTful 服务器。
3.  持久存储。

对于这个问题，客户端无关紧要，RESTful 服务器是使用 ASP.NET WebApi 构建的（满足上述要求），如果是云，持久存储是 Azure Tables，或者自托管时是 RavenDb。所以问题。

**在此架构中，满足上述两个要求的调度作业的最佳机制是什么。**

我有一个作业的概念，它通过查询 RESTful 服务器并要求它对任何活动作业进行预定时间检查来运行，因此该服务实际上只需要进行一个非常简单的休息查询来启动该过程。

所有作业和运行它们的逻辑（它们是模板）都在服务器上，因此服务不需要逻辑。

最终，最好的响应将是某种自动收报机服务，要求该服务进行检查。如果我可以将它直接构建到 ASP.NET WebApi 服务器中，我会更开心。这是一项新技术，所以请原谅我可能错过的任何明显的疏忽，这些疏忽可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:04:24.937

一种方法是编写一个非常简单的“调度程序服务”（原则上类似于 OP 评论中提到的石英调度程序），用 [在此处插入最喜欢的 .Net 语言] 编写。

这项服务可以随心所欲地简单或复杂；在低端，它可以简单地操作一个计时器，该计时器以设定的时间间隔调用 REST API 来触发您的流程

服务本身可以编写为类库，然后当部署在 Windows Server 安装上时，该类库可以托管在 Windows 服务中；或者，在部署到云时托管在 Azure 工作者角色中。当部署在 Azure Worker 角色中时，调度程序可以以最低成本轻松在 XS 实例（1GHz CPU、768MB RAM、20GB 存储）中运行 - 按当前价格每月 14.40 美元。

这种方法允许在两个解决方案中使用相同的代码库（只需引用类库项目），并且可以独立进行单元测试。

更进一步，您可以在运行时自动加载类库程序集，使未来的部署和升级*变得非常*容易。

# c++ - 基于轨迹球四元数旋转矩阵的立方体旋转略微偏离

> ID：12964755
> 
> 赞同：0
> 
> 时间：2012-10-18T22:30:03.237
> 
> 标签：c++, opengl, quaternions

我试图使用四元数旋转我的立方体，以基于轨迹球鼠标移动进行矩阵旋转。我的立方体正在渲染，它有运动/旋转，但它不仅仅是绕轴旋转，它也在向我的鼠标方向移动，所以我认为我从轨迹球获得的数据有点偏离，或者我将我的四元数转换为旋转矩阵的方式略有偏差。trackball_ptov 是我将鼠标位置转换为轨迹球的地方。mouseMotion() 是我从四元数创建旋转矩阵的地方。

我的主要内容：

```
#include "Angel.h"
#include <gl/glew.h>
#include <glut.h>
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
#include <glm/gtc/type_ptr.hpp>
#include <iostream>
using namespace std;

#define bool int  /* if system does not support bool type */
#define false 0
#define true 1
#define M_PI 3.14159265358 /* if not in math.h */
int winWidth, winHeight;
float angle = 0.0, axis[3], trans[3];
bool trackingMouse = false;
float lastPos[3] = {0.0, 0.0, 0.0};
float aspect = 1.0;
int curx, cury;
int startX, startY;
int modelInit=1;
//the program object
GLuint program = 0;
 glm::mat4 model;

typedef Angel::vec4 color4;
typedef Angel::vec4 point4;
const int NumVertices = 36; //(6 faces)(2 triangles/face)(3 vertices/triangle)
point4 points[NumVertices];
color4 colors[NumVertices];

enum { Xaxis = 0, Yaxis = 1, Zaxis = 2, NumAxes = 3 };
int Axis = Xaxis;
GLuint mvpUniform;
GLuint shaderaxis;
int Index = 0;

// Vertices of a unit cube centered at origin, sides aligned with axes
point4 vertices[8]={
        point4(-0.5, -0.5, 0.5, 1.0),
        point4(-0.5, 0.5, 0.5, 1.0),
        point4(0.5, 0.5, 0.5, 1.0),
        point4(0.5, -0.5, 0.5, 1.0),
        point4(-0.5, -0.5, -0.5, 1.0),
        point4(-0.5, 0.5, -0.5, 1.0),
        point4(0.5, 0.5, -0.5, 1.0),
        point4(0.5, -0.5, -0.5, 1.0)
};

// RGBA colors
color4 vertex_colors[8] = {
        color4(0.0, 0.0, 0.0, 1.0), // black
        color4(1.0, 0.0, 0.0, 1.0), // red
        color4(1.0, 1.0, 0.0, 1.0), // yellow
        color4(0.0, 1.0, 0.0, 1.0), // green
        color4(0.0, 0.0, 1.0, 1.0), // blue
        color4(1.0, 0.0, 1.0, 1.0), // magenta
        color4(1.0, 1.0, 1.0, 1.0), // white
        color4(0.0, 1.0, 1.0, 1.0) // cyan
};

// quad generates two triangles for each face and assigns colors to the vertices
void quad(int a, int b, int c, int d) {
        colors[Index] = vertex_colors[a]; points[Index] = vertices[a]; Index++;
        colors[Index] = vertex_colors[b]; points[Index] = vertices[b]; Index++;
        colors[Index] = vertex_colors[c]; points[Index] = vertices[c]; Index++;
        colors[Index] = vertex_colors[a]; points[Index] = vertices[a]; Index++;
        colors[Index] = vertex_colors[c]; points[Index] = vertices[c]; Index++;
        colors[Index] = vertex_colors[d]; points[Index] = vertices[d]; Index++;
}

// generate 12 triangles: 36 vertices and 36 colors
void colorcube(void) {
        quad(1, 0, 3, 2);
        quad(2, 3, 7, 6);
        quad(3, 0, 4, 7);
        quad(6, 5, 1, 2);
        quad(4, 5, 6, 7);
        quad(5, 4, 0, 1);
}

// OpenGL initialization
void init(void) {
        colorcube();
        // Load shaders and use the resulting shader program
        GLuint program = InitShader("vshader36.glsl", "fshader36.glsl");
        glUseProgram(program);

        // Create a vertex array object
        GLuint vao;
        glGenVertexArrays(1, &vao);
        glBindVertexArray(vao);

        // Create and initialize a buffer object
        GLuint buffer;
        glGenBuffers(1, &buffer);
        glBindBuffer(GL_ARRAY_BUFFER, buffer);
        glBufferData(GL_ARRAY_BUFFER, sizeof(points) + sizeof(colors), NULL, GL_STATIC_DRAW);

        glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(points), points);
        glBufferSubData(GL_ARRAY_BUFFER, sizeof(points),  sizeof(colors), colors);

        // set up vertex arrays
        glEnableVertexAttribArray(0);
        glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));

        model = glm::translate(glm::mat4(1.0), glm::vec3(0.0, 0.0, -5.0));

        glEnableVertexAttribArray(1);
        glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(sizeof(points)));

        mvpUniform = glGetUniformLocation(program, "mvp");
        glEnable(GL_DEPTH_TEST);
        glClearColor(1.0, 1.0, 1.0, 1.0);
}

void trackball_ptov(int x, int y, int width, int height, float v[3]) {
        float d, a;
        /* project x, y onto a hemisphere centered within width, height , note z is up here*/
        v[0] = (2.0*x - width) / width;
        v[1] = (height - 2.0F*y) / height;
        d = sqrt(v[0]*v[0] + v[1]*v[1]);
        v[2] = cos((M_PI/2.0) * ((d < 1.0) ? d : 1.0));
        a = 1.0 / sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2]);
        v[0] *= a;
        v[1] *= a;
        v[2] *= a;
}

void display() {
 glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

 glm::mat4 proj = glm::perspective(90.F, 1.F, 0.1F, 100.F);

 glm::mat4 view = glm::translate(glm::mat4(1.0), glm::vec3(0.0, 0.0, 0.0)); //apply mouse translation
 //view = glm::rotate(view, 0.2*mousediff.x, glm::vec3(0.0, 1.0, 0.0)); //apply mouse rotation
 //view = glm::rotate(view, 0.2*mousediff.y, glm::vec3(1.0, 0.0, 0.0));

//model = glm::translate(glm::mat4(1.0), glm::vec3(0.0, 0.0, -5.0));

 //glUniformMatrix4fv(mvpUniform, 1, false, glm::value_ptr(proj));
 glUniformMatrix4fv(mvpUniform, 1, false, glm::value_ptr(proj*view*model));
 //glUniformMatrix4fv(mvpUniform, 1, false, glm::value_ptr(model*view*proj));

 glDrawArrays(GL_TRIANGLES, 0, NumVertices);
 glutSwapBuffers();
}

void keyboard(unsigned char key, int x, int y) {
        switch(key) {
                case 033: // Escape Key
                case 'q': case 'Q':
                        exit(EXIT_SUCCESS);
                        break;
        }
}

void mouseButton(int button, int state, int x, int y) {
        if(button==GLUT_RIGHT_BUTTON) exit(0);
        /* holding down left button allows user to rotate cube */
        if(button==GLUT_LEFT_BUTTON)
                switch(state) {
                        case GLUT_DOWN:
                                        trackingMouse = true;
                                        startX = x;
                                        startY = y;
                                        curx = x;
                                        cury = y;
                                        trackball_ptov(x, y, 512, 512, lastPos);
                                        break;
                        case GLUT_UP:
                                        trackingMouse = false;
                                        angle = 0.0;
                                        break;
                }
}

void mouseMotion(int x, int y) {
        float curPos[3], dx, dy, dz;
        /* compute position on hemisphere */

        if(trackingMouse) {
                /* compute the change in position on the hemisphere */
                trackball_ptov(x, y, 512, 512, curPos);

                dx = curPos[0] - lastPos[0];                
                dy = curPos[1] - lastPos[1];
                dz = curPos[2] - lastPos[2];
                if (dx || dy || dz) {
                        /* compute theta and cross product */
                        angle = 90.0 * sqrt(dx*dx + dy*dy + dz*dz);
                        axis[0] = lastPos[1]*curPos[2] - lastPos[2]*curPos[1];
                        axis[1] = lastPos[2]*curPos[0] - lastPos[0]*curPos[2];
                        axis[2] = lastPos[0]*curPos[1] - lastPos[1]*curPos[0];
                        /* update position */
                        lastPos[0] = curPos[0];
                        lastPos[1] = curPos[1];
                        lastPos[2] = curPos[2];
                }
                float w = angle;
                float x = axis[0];
                float y = axis[1];
                float z = axis[2];
                glm::mat4 xform = glm::mat4((1.F - (2.F * ( y*y + z*z ))),(2.F * ( x*y - z*w )),( x*z + y*w ),0.F,
                (2.F * ( x*y + z*w )),(1.F - (2.F * ( x*x + z*z ))),(2.F * ( y*z - x*w )),0.F,
                (2.F * ( x*z - y*w )),(2.F * ( y*z + x*w )),(1.F - (2.F * ( x*x + y*y ))),0.F,
                0.F,0.F,0.F,1.F);

                model = xform*model;
        }
        glutPostRedisplay();
}

int main(int argc, char **argv) {
        glutInit(&argc, argv);
        glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
        glutInitWindowSize(512, 512);
        glutCreateWindow("Color Cube");
        glewInit();
        init();
        glutDisplayFunc(display);
        glutKeyboardFunc(keyboard);
        glutIdleFunc(display);
        glutMouseFunc(mouseButton);
        glutMotionFunc(mouseMotion);
        glutMainLoop();
        return 0;
} 
```

这是fshader36

```
 #version 150
in vec4 color;
out vec4 fColor;
void main()
{
fColor = color;
} 
```

这是 VSHADER

```
#version 330
uniform mat4 mvp;
layout(location=0) in vec4 vPosition;
layout(location=1) in vec4 vColor;
out vec4 color;

void main() {
    color = vColor;
    gl_Position = mvp * vPosition;
} 
```

# c# - 在数据表 TVP 中传递 sysname

> ID：12964757
> 
> 赞同：2
> 
> 时间：2012-10-18T22:30:30.410
> 
> 标签：c#, .net, sql-server

我有一个使用以下类型作为参数的存储过程

```
 CREATE TYPE [dbo].[columnOrderTableType] AS TABLE
     ([id]                     [int]        IDENTITY(1,1) NOT NULL
     ,[columnName]             [sysname]                  NOT NULL 
```

我需要将我的 api 中的数据表作为 TVP 传递给这个 sproc

当我使用字符串作为 columnName 的值时，我收到一条错误消息，指出类型与 columnOrderTableType 的类型 reqd 不匹配

如何在数据表中传递系统名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:18:03.833

尝试将数据转换为 nvarchar(128) 并改用 nvarchar。

[http://msdn.microsoft.com/en-us/library/ms191240(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191240(v=sql.105).aspx)

# c# - WCF 不会返回 int

> ID：12964759
> 
> 赞同：5
> 
> 时间：2012-10-18T22:30:44.030
> 
> 标签：c#, wcf

我正在用 C# 构建一个 WCF，以及一个同时使用它的客户端。出于某种原因，我无法获得返回 int 的方法。这是我的合同：

```
[ServiceContract]
public interface IMData
{
  [OperationContract]
  int ReturnAnInt();

  [OperationContract]
  String HelloWorld();
} 
```

这是我实现它的地方：

```
public class MData : IMData
{
  public String HelloWorld()
  {
    return "Hello World";
  }

  public int ReturnAnInt()
  {
    return 5;
  }
} 
```

我正在使用 Visual Studio，对于客户端，我将此 WCF 作为 Web 引用导入。现在由于某种原因，当我声明一个 MData 实例并尝试调用 HelloWorld 时，没有问题，但是在调用 ReturnAnInt 时出现编译错误。

```
MData m = new MData();
String helloWorld = m.HelloWorld();
int result = m.ReturnAnInt(); 
```

ReturnAnInt 得到的错误是：“方法 'ReturnAnInt' 没有重载需要 0 个参数”然后我将鼠标悬停在 Visual Studio 的预期上，它说该方法应该如下所示：

```
void MData.ReturnAnInt(out int ReturnAnIntResult, out bool ReturnAnIntResultSpecified) 
```

几个小时以来，我一直在用头撞墙，在谷歌上找不到任何东西，这也让我的同事感到困惑。为什么要添加两个定义中没有的 out 参数，并更改返回类型？任何帮助将不胜感激。如果我遗漏了任何有用的信息，我深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:38:59.050

您可以将其作为服务参考（新技术）而不是 Web 参考（旧技术）导入吗？我通过服务引用使用 WCF 服务并且没有看到这样的问题 -当服务定义不允许指定时（`Specified`WCF-根据我的经验，生成的服务定义按预期工作）。`int``out``int`

如果您找不到更好的解决方案，这里有一个使用[部分类](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)的解决方法：（这必须在您返回 a 时完成`struct`，而不仅仅是`int`s）

```
public partial class MData
{
    public int ReturnAnInt()
    {
        int result;
        bool specified;
        this.ReturnAnInt(out result, out specified);
        if (!specified) throw new InvalidOperationException();
        return result;
    }
} 
```

**更新** [http://www.codeproject.com/Articles/323097/WCF-ASMX-Interoperability-Removing-the-Annoying-xx](http://www.codeproject.com/Articles/323097/WCF-ASMX-Interoperability-Removing-the-Annoying-xx)有一个（有点笨拙）的解决方案，并告诉我们根本原因是 WCF 生成不良（可以说不准确的）WSDL - 他们有一个`minOccurs="0"`真正不需要的元素。Web References 按原样读取此内容，并生成笨拙的代码来处理它，这就是您要处理的内容。根据他的文章，您可以返回此类型而不是`int`：

```
[MessageContract(IsWrapped = false)]
public class MyInt
{
    [MessageBodyMember]
    public int Result { get; set; }

    public static implicit operator MyInt(int i)
    {
        return new MyInt { Result = i };
    }

    public static implicit operator int(MyInt m)
    {
        return m.Result;
    }
} 
```

除了修改方法的返回类型：

```
[ServiceContract]
public interface IMData
{
    [OperationContract]
    MyInt ReturnAnInt();

    [OperationContract]
    String HelloWorld();
}
public class Service1 : IMData
{
    public MyInt ReturnAnInt()
    {
        return 4;
    }

    public string HelloWorld()
    {
        return "Hello World";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T01:53:09.043

您将其作为服务参考（带有名称空间`MData`）而不是 Web 参考导入。

并使用下面的代码，

```
MDataClient m = new MDataClient(); 
String helloWorld = m.HelloWorld(); 
int result = m.ReturnAnInt(); 
```

您的代码没有任何问题。如果您添加服务参考并使用上述代码段，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T13:46:50.513

我有一个类似的问题，我无法让`out int`我的 Web 服务的参数工作。由于这到底是什么，我仍然不确定，但我使用`string`as`out`参数让它工作。

```
[OperationContract]
LoginStatus GetLogin(string username, string password, out string s_uId); 
```

在网络服务方面：

```
s_uId = uId.ToString(); 
```

在客户端：

```
int uId;
string s_uId;
result = client.GetLogin(username, password, out s_uId);
Int32.TryParse(s_uId, out uId); 
```

# ios - uitableview 中的单元格图像在滚动时显示备份

> ID：12964763
> 
> 赞同：1
> 
> 时间：2012-10-18T22:30:46.353
> 
> 标签：ios, uitableview, uiimageview, uiimage

如果消息未读，我正在执行以下操作来设置单元格图像

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MessageCell"];

        Message *m = [self.messages objectAtIndex:indexPath.row];

        cell.textLabel.text = m.subject;
        NSString *detail = [NSString stringWithFormat:@"%@ - %@", m.callbackName, m.dateSent];
        cell.detailTextLabel.text = detail;

        if([m.messageRead isEqualToString:@"False"])
            cell.imageView.image = [UIImage imageNamed:@"new.png"];

    return cell;
} 
```

这是正确显示图像的时候。但是，如果我向下滚动并向上滚动，它们都会显示图像是否应该显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:33:06.653

细胞被重复使用。因此，您需要为每个条件设置每个属性。

```
if([m.messageRead isEqualToString:@"False"])
    cell.imageView.image = [UIImage imageNamed:@"new.png"];
else
    cell.imageView.image = nil; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:34:41.220

由于`UITableViewCell`s 被重用，你应该设置`cell.imageView.image`为`nil`以防你不需要图像。

```
if([m.messageRead isEqualToString:@"False"]) {
    cell.imageView.image = [UIImage imageNamed:@"new.png"];
} else {
    cell.imageView.image = nil;
} 
```

# php - 是否可以使用 $key 在 foreach 中创建变量？

> ID：12964764
> 
> 赞同：-1
> 
> 时间：2012-10-18T22:30:47.093
> 
> 标签：php, foreach

```
foreach ($data as $key => $value) {
    echo $key; // let say cars
} 
```

是否可以创建一个名为的新变量`$cars`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:39:22.413

Are you looking for [`extract()`](http://php.net/manual/en/function.extract.php)?

```
$data = array('thing' => 'ocean'
              'size' => 'big'
              'color' => 'blue');

extract($data);

echo "The $thing is $size and $color."; 
```

[Prints:](http://codepad.org/m3Frn2nz)

> The ocean is big and blue.

* * *

You *can* use `foreach` and [variable variables](http://php.net/manual/en/language.variables.variable.php) to do this:

```
foreach ($data as $key => $value)
{
    $$key = $value;
} 
```

But this doesn't offer the simplicity or the options of `extract()` (eg: with `extract()`, you can add a prefix, control how you want to deal with collisions, etc.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:33:45.047

是的：`$key`包含`"cars"`，`echo $$key`将与：http `echo $cars`: [//php.net/manual/en/language.variables.variable.php相同](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:34:22.063

是的，可以使用[变量 variables](http://php.net/manual/en/language.variables.variable.php)，如下所示：

```
$key = 'cars';
$$key = 'honda'; //$cars variable is created
echo $cars; //prints 'honda' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T22:37:14.680

I think you're asking if it's possible to create a new variable that has the same name as the value of `$key` - so `'cars'` would create `$cars`, `'bikes'` would create `$bikes`, etc?

Yes, this is possible, although it's generally not the best way to get things done.

```
$data = array(
    'cars' => 7,
    'bikes' => 3
);

foreach ($data as $key => $value) {
    $$key = $value;
}

echo $cars; // 7
echo $bikes; // 3 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T22:33:38.287

$key 和 $value 变量不必称为 $key 和 $value。您可以根据需要重命名变量（以及任何有效的变量名称）。

```
foreach($data as $cars=>$model){
    echo "$cars => $model";
} 
```

# python - 使用 Python 和 Scripting Bridge 在 iTunes 中创建播放列表

> ID：12964766
> 
> 赞同：3
> 
> 时间：2012-10-18T22:31:03.013
> 
> 标签：python, cocoa, itunes, scripting-bridge

如何使用 Python 和 Scripting Bridge 创建播放列表？

到目前为止，我有：

```
from Foundation import *
from ScriptingBridge import *

iTunes = SBApplication.applicationWithBundleIdentifier_("com.apple.iTunes")
newPlaylist = iTunes.iTunesPlaylist() 
```

这显然是行不通的。

我见过 Ruby 和 Objective C 的东西，但我并不真正理解这门语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T22:55:41.903

这实际上是[Scripting Bridge 文档中的](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/RubyPythonCocoa/Articles/UsingScriptingBridge.html)一个示例。请参见清单 2，“在 PyObjC 代码中将对象添加到可编写脚本的应用程序”：

```
from Foundation import *
from ScriptingBridge import *

iTunes = SBApplication.applicationWithBundleIdentifier_("com.apple.iTunes")
p = {'name':'Testing'}
playlist = iTunes.classForScriptingClass_("playlist").alloc().initWithProperties_(p)
iTunes.sources()[0].playlists().insertObject_atIndex_(playlist, 0) 
```

如果这对你没有意义，有一些不同的丑陋的事情需要解释......</p>

首先，`SBApplication`没有任何成员`iTunesPlaylist`是`SBObject`. 如果你生成了静态胶水，`ITApplication`可能会有这样的东西……但你不想使用静态胶水。因此，您必须动态创建类对象`iTunesPlaylist`。有几种不同的方法可以做到这一点，但最简单的方法（假设你知道它`playlist`在 Applescript 中被调用）是使用`classForScriptingClass_`.

其次，ScriptingBridge 并不是真正的原生 Python 到 AE 的桥梁。它是通往 AE 的 ObjC 桥梁的 Python 桥梁。所以这`iTunesPlaylist`实际上是一个包装好的 ObjC 类，而不是 Python 类。这意味着您不能将其实例化为`iTunesPlaylist()`，您必须说`iTunesPlaylist.alloc().init()`。

调用`initWithProperties_(p)`是在单独的步骤中初始化和设置属性的一个很好的快捷方式。

最后，AE对象模型的工作方式，你不能只是“创建一个对象”，你必须*在某个位置*创建一个对象。ScriptingBridge 试图对您隐藏这一点，但它做得不是很好。您创建的`playlist`对象实际上并不代表 iTunes 中的任何内容——事实上，如果您查看它的`type`or `repr`，您会发现它是“未来的 iTunesPlaylist”。你需要找到一个合适`SBElementArray`的插入它，然后它就会成为一个真正的播放列表。

并非 ScriptingBridge 中的所有内容都如此可怕。但有些情况甚至更糟。等到您遇到 iTunes 脚本字典出错的地方之一……</p>

如果可以避免使用 ScriptingBridge，iTunes AE 界面本身就非常好。有三种方法可以解决这个问题，尽管它们可能对您没有帮助。

首先，有[appscript](https://github.com/mattneub/appscript)（[此处](http://appscript.sourceforge.net/py-appscript/index.html)的文档）。这是一个不同的 Python->AE 桥，比 SB 好得多。以下是相同的内容（依赖于 iTunes 具有播放列表默认位置的默认设置 - 在第一个库源中播放列表列表的末尾）：

```
from appscript import *

iTunes = app('iTunes')
p = {'name':'Testing'}
playlist = iTunes.make(new=k.playlist, with_properties=p) 
```

如果您不知道如何做您想做的事，但可以找到 AppleScript 示例代码（例如，在[dougscripts](http://dougscripts.com)），您可以使用 ASTranslate 工具编写等效的 appscript。

不幸的是，appscript 的作者已经取消了这个项目。并且有充分的理由——它依赖于 Apple 可以在 10.9 中删除的遗留 API（或引用拒绝你从 App Store 中）。目前，它仍然可以正常工作，并且有几个人在上面的 github repo 中保持它的活力，但总有一天，它会真的死掉。因此，除非这是个人、短期或学习项目，否则它可能不是一个好的解决方案。（此外，特定于 iTunes：10.6.3 有一个影响 appscript 的错误，但不会影响其他网桥，除非您远程使用它们。如果您需要使用该版本，请参阅[itunesterms](https://github.com/abarnert/itunesterms)以获得一种解决方案。）

当然，总有一个显而易见的选择：在 AppleScript 中执行：

```
tell application "iTunes"
    make new playlist with properties {name:"Testing4"}
end tell 
```

The problem with AppleScript is that it's a horrible language for everything *except* talking AEOM, and its equivalent of Python's standard library is about 5% as deep and wide. But you can always use a two-language solution, in two ways. You can connect from AppleScript to other Cocoa code (e.g., Python with PyObjC) via [ASOC](http://developer.apple.com/library/mac/#releasenotes/ScriptingAutomation/RN-AppleScriptObjC/_index.html). Or, alternatively, you can use [NSAppleScript](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAppleScript_Class/Reference/Reference.html) and friends to run scripts from PyObjC/etc.

The latter may be the most painful answer, but it has one huge advantage: If you use the new APIs in Mountain Lion, and your use cases fall within a certain narrow band, you can write a sandboxed app that scripts iTunes without needing a temporary exception entitlement, meaning you can sell it in the App Store.

# perl - perl 字符串到带有重复运算符的数组

> ID：12964773
> 
> 赞同：0
> 
> 时间：2012-10-18T22:31:50.157
> 
> 标签：perl, search, replace, repeat

我有一个字符串，说：“5 3*3 4*1 6*3 14*4 3*2 2*3 4”

我希望这个字符串成为一个包含元素的数组：

@array =（“5”，“3”×3，“1”×4，“3”×6，“4”×14，“2”×3，“3”×2，“4”）；

我猜有比这更好（更短）的方法：

```
$string = "5 3*3 4*1 6*3 14*4 3*2 2*3 4";
@array = split (/\s+/,$string);
foreach(@array) {
   if ( /\*/ ) {
      s/^(\d+)\*(\d+)/"$2" x $1/g;
   } else {
      print "$_\n";
      $_ = '"'. $_ .'"';
   }
} 
```

编辑：这段代码实际上做了我在原始问题中所说的应该做的事情。但这实际上不是我想要的。我希望最终的数组看起来像：

@array = (5, 3, 3, 3, ...)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:32:11.710

### 算法：

1.  取字符串并将其拆分为空格
2.  如果 /(\d+)*(\d+)/ 正则表达式匹配一个元素，我们会重复列表元素。否则，我们通过元素不变。

### 实施（单线）

```
perl -MData::Dumper -E'$string = "5 3*3 4*1 6*3 14*4 3*2 2*3 4"; @array = map{/(\d+)\*(\d+)/ ? ($2)x$1 : $_} split /\s+/, $string; say Dumper \@array' 
```

### 实施（正常）

```
my $string = "5 3*3 4*1 6*3 14*4 3*2 2*3 4";
my @array = map {/(\d+)\*(\d+)/ ? ($2)x$1 : $_} split /\s+/, $string;
# do something with @array:
say "@array"; 
```

请注意，字符串上使用的重复运算符重复并连接字符串：

```
"a"x3 ~~ "aaa" 
```

但在列表上使用时，它会返回一个包含重复元素的列表：

```
[(1)x3] ~~ [1,1,1]
[(1,2)x2] ~~ [1,2,1,2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:35:27.787

您在 if 块中缺少 print 语句，但这是另一种选择：

```
$string = "5 3*3 4*1 6*3 14*4 3*2 2*3 4";
$string =~ s/\s+/#/g;                     # change space delimiter to something else
$string =~ s/(?<!\*)(\d+)(?!\*)/"$1"/g;   # quote nums that don't have an asterisk next to it
$string =~ s/(\d+)\*(\d+)/"$2" x $1/g;    # make all changes at once
@array = split (/#/,$string);             # split the string 
```

不过，我认为您的方法更清楚；这是非常重要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:37:49.300

对空间进行字符串替换和拆分。

```
use strict;
use Data::Dumper;

my $string = "5 3*3 4*1 6*3 14*4 3*2 2*3 4";
$string =~ s/\*/x/g;
my @list = split(' ', $string );
warn Dumper( \@list ); 
```

# c - 串行端口通信，write() 问题

> ID：12964775
> 
> 赞同：0
> 
> 时间：2012-10-18T22:32:14.827
> 
> 标签：c, serial-port

我在 Linux 机器上用 C 语言编写了一个程序，该程序读取和写入串行端口。它连接到运行一些模拟器的 Windows XP 机器，该模拟器正在发送我的程序数据。

在我的程序中，我有 2 个线程，一个用于从串行端口读取输入并进行处理。一个用于连接服务器套接字的线程并侦听已处理然后写回串行端口的数据。这两个线程在执行过程中不断循环。

我遇到的问题是写命令。

```
 void writeToPort(unsigned char* buf, int length)
 {
     int w = 0;
     if(fd > 0)
         w = write(fd, buf, length);

      printf("wrote %d bytes\n", w);
 } 
```

我像这样打开端口

```
fd = open(MODEMDEVICE, O_RDWR | O_NOCTTY | O_NONBLOCK); 
```

在最初的几秒钟内，它运行正常。我已经在 Windows 上的超级终端中验证了我期望的字节正在正确发送。但是，在某些时候 write() 调用会挂起。另一个输入读取线程继续，从串口读取工作正常。

有谁知道为什么会发生这种情况？每当在 fd 上进行读取或写入时，我都尝试过使用互斥锁，但这似乎并没有什么不同。其他线程是否正在运行/从端口读取似乎也无关紧要。欢迎任何意见或建议，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:40:26.757

If I were to approach your problem from a high-level, I would implement a basic fork server model, where the main thread remains the same as your design (listens for input via serial). Once it has a new message, fork a new process to do your processing and then echo the reply back...

Take a look at [Steven's UNIX Network Programming](http://www.kohala.com/start/unpv12e.html) for the de-facto bible on Unix socket programming.

# c++ - 修复 Windows dll 中的内存泄漏

> ID：12964782
> 
> 赞同：0
> 
> 时间：2012-10-18T22:32:36.450
> 
> 标签：c++, string, dll, mfc

继承了一些看起来像 c++ 或 .Net 的代码？这不在我的驾驶室里。无论如何，通过使用堆内存然后一遍又一遍地重新分配本地内存，它会发生内存泄漏：

```
CPTRecord* pRec = static_cast<CPTRecord*>(pData);

// Remove channel # from end of test name
CString testName = pRec->m_stdf.test_txt;

int strIndex = testName.ReverseFind(' ');
if (strIndex != -1)
{
    testName.Delete(strIndex,9);
    pRec->m_stdf.test_txt = (char *)LPCTSTR(testName);
    pRec->m_stdf.test_txt_size = testName.GetLength();
} 
```

我不确定如何转换指针，或者使用`memcpy`而不是使用分配`(char *)LPCTSTR`

# java - 互相检查两个日历，看看它们是否相隔一周以上

> ID：12964783
> 
> 赞同：0
> 
> 时间：2012-10-18T22:32:42.547
> 
> 标签：java, android

我有两个用于搜索参数的日期选择器，但我不能超过一周的搜索（服务器上的负载很大）所以我想检查第一个日期是否在第二个日期之前，以及第一个日期和第二个日期是否相隔不到 7 天。如果一切都正确，则返回一个真正的布尔值，如果不是假的。

```
public Calendar max = Calendar.getInstance();

public boolean checkweek(Calendar cStart, Calendar cEnd) {
    Toast.makeText(this,
            cStart.DAY_OF_MONTH + " - " + cStart.MONTH + " - " + cStart.YEAR, Toast.LENGTH_LONG).show();
    if (cEnd.after(cStart) || ((cEnd.DAY_OF_MONTH == cStart.DAY_OF_MONTH) && (cEnd.MONTH == cStart.MONTH))) {
        max.set(Calendar.YEAR, cStart.YEAR);
        max.set(Calendar.MONTH, cStart.MONTH);
        max.set(Calendar.DAY_OF_MONTH, cStart.DAY_OF_MONTH);
        max.add(Calendar.DAY_OF_MONTH, 7);
        Toast.makeText(this,
                max.DAY_OF_MONTH + " - " + max.MONTH + " - " + max.YEAR,
                Toast.LENGTH_LONG).show();
        if (cEnd.before(max)) {
            return true;
        }
        else{
            return false;
        }
    }
    else{
    return false;}
} 
```

但它会抛出一个空异常。我声明了 cStart 和 cEnd 所以我不知道它是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:36:16.913

为什么不直接使用数学呢？

```
cEnd.getTimeInMillis() - cStart.getTimeInMillis() > (7L * 24L * 60L * 60L * 1000L) 
```

或者，感谢[@Sam](https://stackoverflow.com/users/1267661/sam)，您可以使用以下方法简化此操作[`DateUtils.WEEK_IN_MILLIS`](http://developer.android.com/reference/android/text/format/DateUtils.html#WEEK_IN_MILLIS)：

```
cEnd.getTimeInMillis() - cStart.getTimeInMillis() > DateUtils.WEEK_IN_MILLIS 
```

**它是如何工作的：** `Calendar.getTime().getTime()`将返回一个`long`毫秒值。只需减去它们（以获得差异），然后检查它是否大于`604800000L`（一周中的毫秒，根据上述公式）。

这应该提供 no `NullPointerException`if run when`cStart`并且`cEnd`是非空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:38:57.687

埃里克的答案很有效，可能是解决您问题的最佳方法。

修复您自己的代码；但是，对于其余的部分，您必须使用`cEnd.get( Calendar.DAY_OF_MONTH )`而不是`cEnd.DAY_OF_MONTH`等等。

# c# - 将文本文件分成部分/行并将部分放入文本框中

> ID：12964787
> 
> 赞同：0
> 
> 时间：2012-10-18T22:33:01.500
> 
> 标签：c#

现在，我的代码获取了整个文本文件，并将其全部放入一个文本框中。我试图弄清楚如何做是将文件的每一行放入每个单独的文本框中。

```
namespace HomeInventory2
{
    public partial class Form1 : Form
    {
        public Form1(string prepopulated)
        {
            InitializeComponent();
            textBoxAmount.Text = prepopulated;
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void submitButton_Click(object sender, EventArgs e)
        {
            CreateInventory create = new CreateInventory();
            create.ItemAmount = textBoxAmount.Text;
            create.ItemCategory = textBoxCategories.Text;
            create.ItemProperties = textBoxValue.Text;
            create.ItemValue = textBoxValue.Text;

            InventoryMngr invtryMngr = new InventoryMngr();
            invtryMngr.Create(create);

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:38:05.480

假设行的顺序始终相同并且每个都`TextBox`属于一行：

```
IEnumerable<String> lines = File.ReadLines(path);
textBoxAmount.Text = lines.ElementAtOrDefault(0);
textBoxCategories.Text = lines.ElementAtOrDefault(1);
textBoxValue.Text = lines.ElementAtOrDefault(2);
... 
```

[`Enumerable.ElementAtOrDefault<TSource>`方法](http://msdn.microsoft.com/en-us/library/bb494386.aspx)

> 返回序列中指定索引处的元素，如果索引超出范围，则返回默认值（在这种情况下为 null）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:03:55.490

您可以使用 System.IO.File.ReadAllLines(string filename)。它的作用是将文件的每一行读入一个字符串数组。然后，您可以执行以下操作：

```
using System.IO;

//Namespace, Class Blah Blah BLah

String[] FileLines = File.ReadAllLines("Kablooey");

textBox1.Text = FileLines[0];

textbox2.Text = FileLines[1]; 
```

等等。我希望这有帮助 ：）

# c# - 使用 C# 作为我的 DSL——这可能吗，如果可以，怎么做？

> ID：12964790
> 
> 赞同：2
> 
> 时间：2012-10-18T22:33:10.767
> 
> 标签：c#, security, dsl

**是否可以将 C# 用作 DSL**，其中 C# 源代码由最终用户在 TextBox 中编辑，在应用程序运行时编译，然后由已经运行的应用程序调用？

我问是因为在接下来的几个月里，我将需要实现一个简单的数学运算 DSL（类似于 Rachel Lim 在[http://rachel53461.wordpress.com/2011/08/20/the-math-converter上写的博客/](http://rachel53461.wordpress.com/2011/08/20/the-math-converter/) 我专注于她代码的数学处理方面，而不是 XAML/转换器方面）。我不会仅仅重用她的代码，因为我想添加 if 语句和可能的其他功能。如果我可以使用 C# 本身，那么我无需重新实现即可获得所有功能。

如果可以做到这一点，**我想用什么框架或命名空间或类来完成这个？**

请注意，我会对 C# 派生的 DSL 做的一件事是硬编码所有必要的 using 标头语句，然后删除精明的用户输入的所有 using 语句。这样做的目的是减少最终用户试图将我的类 C# DSL 用于不符合其企业策略的意愿或站点管理员不知情的成熟编译器的可能性。 **我提议的使用语句管理是否足以防御用户的恶作剧？**

最后，如果到目前为止所有的答案都是“是”，那么**这种方法的缺点是什么，尤其是引入安全漏洞的缺点？**

保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:40:41.970

> 我提议的使用语句管理是否足以防御用户的恶作剧？

不，您还必须删除对完全限定类的引用。然后，用户仍然可以使用反射来访问他们没有以任何方式引用的类。

您需要创建一个单独的 appdomain 来包含用户的代码，然后您可以适当地对其进行沙箱处理。[这是 MSDN 上的一篇相关文章](http://msdn.microsoft.com/en-us/library/bb763046.aspx)，深入解释了这个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:38:39.873

删除 using 指令将无济于事，除非您还找到了一些阻止用户编写的方法，例如`System.Diagnostics.Process.Start("evilprogram.exe")`. 这样做（同时不阻止属性访问）将需要您使用 C# 解析器。

但是，您可能可以为此使用代码访问安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:41:51.063

Stackoverflow 现在自动将链接答案转换为评论。多么可爱。

[编译运行动态代码，不生成EXE？](https://stackoverflow.com/questions/3188882/compile-and-run-dynamic-code-without-generating-exe)

无论如何，答案在于`Microsoft.CSharp.CSharpCodeProvider`

# javascript - 为什么未捕获的错误：$ 未定义匿名函数显示

> ID：12964796
> 
> 赞同：0
> 
> 时间：2012-10-18T22:33:45.243
> 
> 标签：javascript, jquery, css

我查看了所有关于未捕获错误的类似帖子：$ 未定义并且没有任何帮助。我有最新的 jquery 库，只是不明白为什么会出现这个错误。

```
$(function() {

    // Checking for CSS 3D transformation support
    $.support.css3d = supportsCSS3D();

    var formContainer = $('#formContainer');

    $('.flipLink').click(function(e){

        // Flipping the forms
        formContainer.toggleClass('flipped');

        if(!$.support.css3d){
            $('#login').toggle();
        }
        e.preventDefault();
    });

    formContainer.find('form').submit(function(e){

        e.preventDefault();
    });

    function supportsCSS3D() {
        var props = [
            'perspectiveProperty', 'WebkitPerspective', 'MozPerspective'
        ], testDom = document.createElement('a');

        for(var i=0; i<props.length; i++){
            if(props[i] in testDom.style){
                return true;
            }
        }

        return false;
    }
}); 
```

我在这里将脚本称为 scripts.js

```
<head>
        <script type="text/javascript" src="js/scripts.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/jquery-ui.js"></script>
        <link rel = "stylesheet" href= "css/styles.css">

    </head> 
```

我非常感谢获得知识以了解为什么会在这种情况下发生这种情况以及任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:34:55.760

**在 jQuery之后**包含您的脚本，而不是之前。

```
 <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="js/scripts.js"></script> 
```

浏览器在加载标签内容后立即以增量方式评估`<script>`它们。如果你把你的放在第一位，浏览器会在解析后续脚本之前尝试运行它。因此，您的脚本的依赖关系将不会得到满足，您会收到类似的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T22:35:07.113

您应该在 jquery 脚本之后加载您的 scripts.js：

```
<head>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery-ui.js"></script>
    <script type="text/javascript" src="js/scripts.js"></script>
    <link rel = "stylesheet" href= "css/styles.css">
</head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:39:16.663

尝试将 jquery 的脚本标签移动到您的 scripts.js 上方，以便定义 $。

# java - 有没有办法用Java中的整数枚举初始化数组

> ID：12964800
> 
> 赞同：0
> 
> 时间：2012-10-18T22:34:00.237
> 
> 标签：java, arrays

Java中有没有办法做类似的事情：

int foo[] = new int[0..n];

IE

富[0] = 0

富[3] = 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:36:14.980

Not using built-in language features. You can easily write a method to do it, of course, but there's nothing built-in - and I suspect that it's sufficiently rarely useful that it's not in many third party utility libraries (such as Guava) either.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:36:44.930

I don't think so, but you could use a simple for-loop:

```
int foo[n];

for(int i = 0; i < n; i++) foo[i] = i; 
```

And if you want a method try something like this:

```
public void initialize(int[] array, int start, int end) {
    int array_length = array.length;
    if (end > array_length) end = array_length;

    for (int i = start; i < end; i++) {
        array[i - start] = i;
    }
}

// In any other point in your code
int foo[] = new int[6];
initialize(foo, 0, 10); 
```

Another way would be to make a Range class to add this functionality:

```
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

public class Range implements Iterable<Integer> {
    Integer array[];

    public Range(int size) {
        this(0, size - 1);
    }

    public Range(int start, int end) {
        array = new Integer[end - start];

        for (int i = start; i < end; i++) {
            array[i - start] = i;
        }
    }

    public List<Integer> asList() {
        return Arrays.asList(array);
    }

    @Override
    public Iterator<Integer> iterator() {
        return Arrays.asList(array).iterator();
    }
} 
```

Here is an usage example:

```
Range range = new Range(4, 10);

for (int i : range) {
    System.out.println(i);
} 
```

I'm sure that this code can be improved but it isn't worth it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:41:24.253

```
int n = 10;
int[] arr = new int[n+1]; 
```

`for`loops 具有灵活的语法，因此您甚至可以这样做：

```
for ( int i = 0; i < arr.length; arr[i] = i++ ); 
```

PS
如果你想要比上面更少的代码，你可以这样做：

```
int i = 0;
for ( int c : arr ) { arr[i] = i++; } 
```

PPS
尽管这些代码片段很简洁，但对我来说它们似乎不清楚，而且闻起来很糟糕。

# wpf - 使用 WPF DataGrid 构建项目时出现 Visual Studio 2010 错误

> ID：12964801
> 
> 赞同：3
> 
> 时间：2012-10-18T22:34:09.257
> 
> 标签：wpf, visual-studio-2010, datagrid

我已将 C# 项目从 Visual Studios 2008 Professional 移至 Visual Studios 2010 Express。它使用 VS 迁移向导成功转换了项目，但构建失败。

有很多错误，都与 WPF 数据网格有关。在 VS2008 中构建时不会发生错误。例如：

```
'DataGridRow' is an ambiguous reference between 'System.Windows.Controls.DataGridRow' and 'Microsoft.Windows.Controls.DataGridRow' 
```

我看到该项目还使用 WPFTools.dll。

使用 VS2010 可能不再需要 WPFTools.dll 吗？或者我可能需要使用专业版而不是 VS 的 Express 版并且项目没有成功迁移？

我想我可以使用完整的命名空间编辑所有出现问题的地方以使错误消失，指定“Microsoft.Windows.Controls”或“System.Windows.Controls”，但我不确定哪个这两个它默认在VS2008下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:41:16.663

这很可能与 .NET FW 版本相关，即……这是 3.5 之前的版本，而您迁移到了 4？如果是这样，您之前会使用 WPFToolkit，而`DataGrid`现在它是[4 和更高](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)版本中标准 FW 的一部分。

删除您对 WPFToolkit 的引用并使用标准的 FW 类，您应该没问题。

# python - Numpy + Python 比 MATLAB 慢 15 倍？

> ID：12964803
> 
> 赞同：0
> 
> 时间：2012-10-18T22:34:10.110
> 
> 标签：python, matlab, numpy

这是我用 Python / Numpy 编写的一些代码，我几乎直接从 MATLAB 代码中翻译过来。当我在机器上运行 MATLAB 中的代码时，大约需要 17 秒。当我在我的机器上运行 Python / Numpy 中的代码时，大约需要 233 秒。我没有有效地使用 Numpy 吗？请查看我的 Python 代码，看看我是否以无效的方式使用 Numpy。

```
import numpy as np
from numpy import * 
import pylab as py
from pylab import *
import math
import time

def heat(D,u0,q,tdim):
    xdim = np.size(u0)
    Z = np.zeros([xdim,tdim])
    Z[:,0]=u0;
    for i in range(1,tdim):
        for j in range (1,xdim-1):
            Z[j,i]=Z[j,i-1]+ D*q*(Z[j-1,i-1]-2*Z[j,i-1]+Z[j+1,i-1])
    return Z

start_time = time.clock()
L = 10
D = 0.5

s = 0.03  # magnitude of noise

Tmax = 0.2
xdim = 25
tdim = 75 

x = np.linspace(0,L,xdim)
t = np.linspace(0,Tmax,tdim)

dt = t[1]-t[0]
dx = x[1]-x[0]

q = dt/(dx**2)
r1 = 0.75*L
r2 = 0.8*L

################################################
## check the stability criterion dt/(dx^2)<.5 ##
################################################

# Define the actual initial temperature distribution
u0 = np.zeros(xdim)
for i in range(0,xdim):
    if(x[i]>=r1 and x[i]<=r2):
        u0[i] = 1
xDat = range(1,xdim-1)
tDat = np.array([tdim])
nxDat = len(xDat)
ntDat = 1
tfinal = tdim-1

# synthesize data
Z = heat(D,u0,q,tdim)
u = Z[xDat,tfinal] # matrix
uDat = u + s*randn(nxDat)

# MATLAB PLOTTING
#figure(1);surf(x,t,Z); hold on;
#if ntDat>1, mesh(x(xDat),t(tDat),uDat);
#else set(plot3(x(xDat),t(tDat)*ones(1,nxDat),uDat,'r-o'),'LineWidth',3);
#end; hold off; drawnow

#MCMC run
N = 10000
m = 100
XD = 1.0
X = np.zeros(N)
X[0] = XD
Z = heat(XD,u0,q,tdim)
u = Z[xDat,tfinal]
oLLkd = sum(sum(-(u-uDat)**2))/(2*s**2)
LL = np.zeros(N)
LL[0] = oLLkd

# random walk step size
w = 0.1
for n in range (1,N):
    XDp = XD+w*(2*rand(1)-1)
    if XDp > 0:
        Z = heat(XDp,u0,q,tdim)
        u = Z[xDat,tfinal]
        nLLkd = sum(sum( -(u-uDat)**2))/(2*s**2)
        alpha = exp((nLLkd-oLLkd))
        if random() < alpha:     
            XD = XDp
            oLLkd = nLLkd
            CZ = Z
    X[n] = XD;
    LL[n] = oLLkd;

print time.clock() - start_time, "seconds" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:47:09.570

Numpy 和 Matlab 在基本数组/矩阵操作方面的性能差异很可能是由于安装了 Numpy 以对抗较慢的 Lapack 实现。为了获得最佳性能，您可以考虑针对 LAPACK 构建 numpy（[此处的说明](http://www.scipy.org/Installing_SciPy/Linux)）。

在您的代码中，主要的性能损失是您基本上是在 python for 循环中执行抽搐。因此，您并没有真正使用 Numpy 功能。您应该用专用的卷积函数（例如 scipy.ndimage.convolve）替换您的双循环。

# java - 根据注释的字段，使 Java 注释行为不同

> ID：12964804
> 
> 赞同：1
> 
> 时间：2012-10-18T22:34:14.233
> 
> 标签：java, annotations, jackson

在Java中，有没有办法根据注释字段的类型来改变注释的行为？

我知道注释的存在应该通过代码进行测试。不是相反。但情况相当特殊：这是一个 Jackson 2.0 « inside » 注释，它收集注释列表。我们使用它来定义字段名称 ( `@JsonProperty`) 和字段序列化策略 ( `@JsonSerialize`)。

序列化策略必须适应带注释的字段。而且，因为我们谈论的是一个框架，所以一个独特的注释远比两个独立的注释要好。

```
@Retention(RUNTIME)
@JacksonAnnotationsInside.
@JsonProperty("_id")
@JsonSerialize(using=IdSerializer.class)
@JsonDeserialize(using=IdDeserializer.class)
public @interface Id {} 
```

有些情况需要关闭序列化程序，这就是重点。在以下示例中，`String`必须由反序列化程序处理，`ObjectId`不要。两者都需要`_id`由`@JsonProperty`.

```
public class Car {
    @Id String id
}

public class Bus {
    @Id ObjectId id
} 
```

有什么线索吗？

# javascript - 使用 JavaScript 作用域函数了解 New 并传递 $

> ID：12964813
> 
> 赞同：0
> 
> 时间：2012-10-18T22:35:17.350
> 
> 标签：javascript, jquery, function

好的，当谈到 JavaScript 范围函数和模块模式时，我肯定学到了很多东西，很棒的东西！现在我正在教自己以这种方式将 jQuery 传递给一个作用域函数，它加载得更快，如果由于某种原因我有另一个使用 $ 的框架，就不会有混淆。

但是我不完全理解的是，当我想传入 jQuery 时，何时“在范围函数的上下文中”创建一个“新”实例。这就是我的意思...如果我打算使用以下作为基础，它将返回 pubs，它可以与函数或属性等相关联，我明白了。

```
var DemoA = (function($) {
var pubs = {};
pubs.dosomething = //some function that calculates cool stuff with help of jquery
return pubs;
})(jQuery); 
```

现在，当我尝试创建一个新实例时......

```
var stuff = new DemoA(); 
```

...我通过 Google Chrome 开发者工具得到一个错误。它说“对象不是函数”或类似的东西。但是如果我这样直接调用DemoA...

```
DemoA.dosomething(); 
```

...然后一切正常。这里发生了什么？为什么我不能创建一个新的实例变量？

在此先感谢您帮助我变得更聪明！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T22:40:36.737

看你的`return`说法。您正在返回一个如下所示的**对象**：

```
{"dosomething": function () { }} 
```

您不能创建对象的新实例。您可以直接调用，因为它是**返回对象**`dosomething`的直接属性（方法）。

 **我想你想要这样的东西：

[http://jsfiddle.net/veJqg/](http://jsfiddle.net/veJqg/)

```
var DemoA = (function($) {
    var pubs = function () {
        this.dosomething = function () {
            console.log("just executed `dosomething`");
        };
    };
    return pubs;
})(jQuery);

var a = new DemoA();
a.dosomething(); 
```

这样，您仍然将`jQuery`对象别名为`$`，并且您返回的 a`function`可以以您想要的方式使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:53:27.037

只是一个更复杂的常用 jQuery 示例：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
(function($) {

  $.DemoA = function(element, options) {
    var pubs = {};
    return pubs;
  }

  $.fn.DemoA = function(options) {
     return this.each(function() {
       (new $.DemoA($(this), options));
     });
   };

})(jQuery);

var i = new $.DemoA(item, {});
var j = $('<div>').DemoA();
</script> 
```**

# iphone - 突出显示此按钮类型不支持的色调颜色

> ID：12964820
> 
> 赞同：5
> 
> 时间：2012-10-18T22:36:17.073
> 
> 标签：iphone, objective-c, ios, ipad

我遇到了一个问题，我不断收到此警告：`highlight tint color unsupported by this button type`

![在此处输入图像描述](../Images/1fd16ad53238f6bc7611c3f118e9778b.png)

我想知道如何删除此警告？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-04T13:02:08.000

我的经验是，我们可以简单地将每个按钮的“突出显示色调”设置为“默认”（而不是默认值“黑色”）以消除此警告。:)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-18T22:39:37.630

将按钮的类型从自定义更改为其他类型。

# git - have "git show" use opendiff on osx to show commits

> ID：12964823
> 
> 赞同：0
> 
> 时间：2012-10-18T22:36:45.443
> 
> 标签：git, git-show, opendiff

I found ways to use opendiff for "git diff" but "git show" doesn't have quite the same options.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:48:43.110

根据手册页，在幕后运行以产生差异输出`git-show`。`git diff-tree -cc`这可能会绕过您的`git-diff`自定义。

尝试更改 .gitconfig 以在运行时添加相同的`git-diff`选项`git-diff-tree`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:49:17.760

您可以说服 git diff 使用以下技巧向您展示最后两次提交之间的区别：

```
COMMITS=$(git log --name-status HEAD^^..HEAD | grep "commit" | sed 's/commit/ /')
COMMITS=($COMMITS)
git diff ${COMMITS[1]} ${COMMITS[0]} 
```

在这种情况下，git 将使用您告诉它用于 git diff 的任何编辑器。

# asp.net - 如何在 MVC 列表视图中访问项目索引

> ID：12964826
> 
> 赞同：0
> 
> 时间：2012-10-18T22:36:52.603
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我正在创建一个模型是 Foo 列表的视图。我想创建一个带有操作链接的列表来选择给定的 Foo 项目，并需要将其传递回控制器。然而，在 Foo 中没有什么独特之处可以与 actionlink 绑定。我想在 Foo 中传递项目的索引，但不知道如何从视图内部的模型中获取索引。

是否可以在不创建包含索引的视图模型的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:24:28.610

你的意思是`@for(int i=0; i<Model.Count; i++)`，然后使用 i 作为 id？但是你需要确保位置不会改变。

我认为从长远来看，在 Foo 上拥有 id 会更好。

# c# - 从新类访问数据集和表适配器

> ID：12964829
> 
> 赞同：2
> 
> 时间：2012-10-18T22:37:17.613
> 
> 标签：c#, database

我在 C# 中创建了一个有效的 Windows 窗体项目，该项目访问一个 Access 配方数据库。使用表适配器和数据集，我能够查询、更新并将新数据插入数据库。

我创建了一个新的 VS 项目，导入了我的数据库并开始了一个新课程。我的问题是当我尝试设置表适配器时出现错误，特别是该`.Fill()`方法。当我检查 datasource.xsd 时，我可以看到`.get()`and`.Fill()`方法已创建，但我似乎无法像之前将绑定源拖放到 WinForm 时那样访问它们。

我复制了代码以从 MSDN 网站以编程方式创建表适配器，但在调用`ingredientTableAdapter.Fill(recipiesNewDataSet);`方法的那一行出现错误。任何人都知道为什么？到目前为止，这是我在这个项目上的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace MyRecipeDataBase
{

    class QueryClass

    {

        recipiesNewDataSet recipiesNewDataSet = new recipiesNewDataSet();

        recipiesNewDataSetTableAdapters.IngredientTableAdapter ingredientTableAdapter = new recipiesNewDataSetTableAdapters.IngredientTableAdapter();

        ingredientTableAdapter.Fill(recipiesNewDataSet);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:13:45.193

答案是盯着我的脸！

您将代码直接放入`class`正文中。它应该在一个`function`. 例如，在类构造函数内部。

```
class QueryClass
{
    public QueryClass()
    {
    recipiesNewDataSet recipiesNewDataSet = new recipiesNewDataSet();

    recipiesNewDataSetTableAdapters.IngredientTableAdapter ingredientTableAdapter = new recipiesNewDataSetTableAdapters.IngredientTableAdapter();

    ingredientTableAdapter.Fill(recipiesNewDataSet);
    }
} 
```

# sql - MATLAB 处理近似值——单打到双打

> ID：12964833
> 
> 赞同：1
> 
> 时间：2012-10-18T22:37:39.173
> 
> 标签：sql, sql-server, matlab, floating-point

我正在将财务数据从 SQL 中提取到 Matlab 中，不幸的是，它被存储为“真实”（这是一种近似数据类型）。

例如，一个值作为“96.194”加载到 SQL 中，这是正确的值（可以有 1-5 位的任意小数）。我知道在 SQL 中它存储为 96.19400024 之类的东西，因为它是一个近似值，但 SQL Server 不知何故知道将其显示为 96.194。

当我将它拉入 matlab 时，它会以 96.194 的形式拉入，这正是我想要的。不幸的是，事实证明它*实际上*不是96.194，如下所示：

```
>>price
price =
           96.194

>> price==96.194
ans =
     0

>> class(price)
ans =
single

>> double(price)
ans =
          96.1940002441406 
```

所以我的问题是，有没有办法将单曲转换为双曲，就像它显示为单曲一样（即截断所有近似值的小数？注意：我不能只四舍五入，因为我不知道有多少小数它应该有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:50:31.403

vpa 函数允许您指定与当前位数设置不同的有效（非零）位数。例如：

```
vpa(price, num_of_digits_required) 
```

或者在你的情况下：

```
vpa(double(price),7) 
```

（6 或 8 位有效数字将产生相同的结果）

**编辑**

要使用 vpa，您需要 Symbolic Math Toolbox，网上有其他替代品，例如[这个 FEX 文件](http://www.mathworks.com/matlabcentral/fileexchange/22725)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:00:37.613

单精度浮点值只有大约 7 位精度（23 位小数部分，log10(2^24) ≈ 7.225 十进制数字），因此您可以四舍五入除 7 个最高有效位之外的所有数字。

# java - r.raw中的android图像

> ID：12964839
> 
> 赞同：0
> 
> 时间：2012-10-18T22:38:24.287
> 
> 标签：java, android

有没有办法强制应用程序安装在 SD 卡中。我在清单文件中有用户用户权限，但仍然可以绘制，并且数据库在内部存储器中处理。

然后我才知道只有RAW文件夹会保存在SD卡中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:41:16.167

您不能强制将应用程序安装在 SD 卡上，原因很简单，如果 SD 卡已满，安装会崩溃。你所能做的就是：

```
android:installLocation="preferExternal" 
```

在您的清单中。

# javascript - JQuery 工具提示疑问/问题

> ID：12964847
> 
> 赞同：0
> 
> 时间：2012-10-18T22:38:59.327
> 
> 标签：javascript, jquery, html, tooltip

我正在开发一个 last.fm 小部件，其中一个必要条件是，对于显示特定标签（流派）的每个曲目，必须存在一个小按钮。这样，当单击按钮时会出现一个工具提示，显示有关某个艺术家、他们的专辑和他们最受欢迎的曲目的更多信息。这一切都是通过 Ajax 请求完成的。

我的页面在[这里](http://phpdev.dei.isep.ipp.pt/i101524/lastfm-widget/index.html)。除了工具提示之外，我已经设法让一切正常工作，当有人单击每个轨道旁边的小“i”按钮图标时，我想显示它。

但是，出现了一些问题：

1.  我需要使用 Ajax 从 last.fm 中获取工具提示的数据，然后定位工具提示，以便它根据按下的按钮自动移动。

我在每个轨道旁边显示“i”图标的代码就是这个（与 CSS 相对定位）：

```
<dd class="lfm_info"><img src="images/info.png" /></dd> 
```

Ajax 函数根据已选择的轨道数创建 X 按钮。但是，根据我一直在阅读的内容，应该只创建一个工具提示，在任何标签之外（`<body`当然是在标签内），并且应该以编程方式进行转换。这是正确的方法吗？

我还注意到似乎有大量的 JQuery 插件来处理工具提示，并且由于问题 1) 我什至没有设法让一个工作) - 我不知道如何定位它们，所以他们如果我将标签放在我的重复曲目之外，它会出现在我页面的随机位置，`<div>`如果我把它放在那些所说的标签内，**甚至根本不会出现。**您认为哪个是处理/创建工具提示的最佳插件？我想要一些干净的东西，并且可以轻松处理自动定位。

感谢您的阅读，我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:34:11.103

这是一个基本的例子。它实际上非常简单，但显然在不了解完整的用户场景的情况下，它会出现需要您进行调整的问题。

演示：http: [//jsfiddle.net/dj9xS/3/](http://jsfiddle.net/dj9xS/3/)

问题：

1.  不检测窗口的侧面，因此工具提示可能位于窗口之外。
2.  如果不再次单击“i”图像，则没有使工具提示消失的事件。

HTML：

```
<style>
    dl { width: 300px; margin: 0 auto; }
    .lfm_info { position: relative; width: 16px; }
    .tooltip { display: none; background: black; width: 120px; position: absolute; bottom: 20px; left: 50%; margin-left: -68px; color: #fff; padding: 10px; }

</style>
<dl>
          <dt class="lfm_art">
          <a href="http://www.last.fm/music/Red+Hot+Chili+Peppers/_/Californication" title="Clique para ouvir Californication no last.fm" target="_blank"></a>
          <img src="http://userserve-ak.last.fm/serve/34s/42739473.png" alt="Artwork de Californication"><img src="http://userserve-ak.last.fm/serve/34s/42739473.png" alt="Artwork de Californication"></dt>
        <dd class="lfm_song">2\. Californication2\. Californication</dd>
        <dd class="lfm_artist">Red Hot Chili PeppersRed Hot Chili Peppers</dd>
    <dd class="lfm_info"><img src="http://phpdev.dei.isep.ipp.pt/i101524/lastfm-widget/images/info.png"><div class="tooltip"></div></dd>
      </dl>

<dl id="ajaxReference">
          <dt class="lfm_art">
          <a href="http://www.last.fm/music/Red+Hot+Chili+Peppers/_/Californication" title="Clique para ouvir Californication no last.fm" target="_blank"></a>
          <img src="http://userserve-ak.last.fm/serve/34s/42739473.png" alt="Artwork de Californication"><img src="http://userserve-ak.last.fm/serve/34s/42739473.png" alt="Artwork de Californication"></dt>
        <dd class="lfm_song">2\. Californication2\. Californication</dd>
        <dd class="lfm_artist">Red Hot Chili PeppersRed Hot Chili Peppers</dd>
    <dd class="lfm_info"><img src="http://phpdev.dei.isep.ipp.pt/i101524/lastfm-widget/images/info.png"><div class="tooltip"></div></dd>
      </dl>
​ 
```

jQuery：

```
$('.lfm_info').click(function(){
    var toolTip = $(this).children('.tooltip');

        // Get data using AJAX
        // Not sure how you are requesting data, maybe by unique ID? Need to put into each track dl to 
        // reference. e.g. $(this).parent().attr('id');

    // If success populate into tooltip on $(this).children('.tooltip')
        // $(this).children('.tooltip').text(ajaxData);   

        toolTip.text('Hello World');

    // If fail  
        // return false;

    if(toolTip.is(':visible')){
        toolTip.fadeOut(500); 
        return false;    
    };       

    // Check if any other tooltips are visible    
    if($('.tooltip').is(':visible')) {
        $('.tooltip').fadeOut(500, function(){        
            toolTip.fadeIn(500);        
        });  
    } else {
        toolTip.fadeIn(500);    
    };       

});​ 
```

我希望这对你有帮助。

# .net - 我正在尝试制作一个贪婪的正则表达式来从字符串中提取数字，考虑到千位和小数位

> ID：12964851
> 
> 赞同：-1
> 
> 时间：2012-10-18T22:39:20.133
> 
> 标签：.net, regex

对于考虑千位和小数位的数字，我需要一个正则表达式。到目前为止，我提出的一个是：

```
\d{1,3}(\.\d{3})*(,\d*)? 
```

它将捕获`3.000,00`以及`3,00`和`3.000`。甜的。

问题是我需要它非常贪婪，并首先捕获更大的数字，例如，对于这个输入：

```
125,45.124.890,45,32,67.456 
```

我需要它`45.124.890,45`作为一个数字来捕获。这对我很重要，因为它是最大的。我的正则表达式不起作用，因为它会捕获`123,45`然后`45`不会被考虑用于下一场比赛。所以它捕获的下一个数字`124.890,45`对我不利。

有什么想法吗？

**PS**因为我是巴西人，所以分隔符是倒置的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:00:13.743

使用正则表达式模式

```
(?!0\d)\d{1,3}(?:\.\d{3})*(?:\,\d+(?![\d\.]))? 
```

### C# 演示：

```
using System;
using System.Text.RegularExpressions;

public class Test
{
  public static void Main()
  {
    const string line = @"125,45.124.890,45,32,67.456";
    MatchCollection matches = Regex.Matches(line, 
      @"(?!0\d)\d{1,3}(?:\.\d{3})*(?:\,\d+(?![\d\.]))?");
    foreach(Match match in matches)
    {
      foreach (Capture capture in match.Captures)
      {
        Console.WriteLine(capture.Value);
      }
    }
  }
} 
```

### 输出：

```
125
45.124.890,45
32
67.456 
```

**[在这里](http://ideone.com/VzrKM)**测试这个演示。

# arm - 如何在不修改主线源代码的情况下添加新的 QEMU 机器类型？

> ID：12964858
> 
> 赞同：6
> 
> 时间：2012-10-18T22:40:08.443
> 
> 标签：arm, qemu, raspberry-pi, device-emulation, pandaboard

是否可以添加新的机器类型`qemu-system-arm -M <MachineType>`而无需重新编译 qemu 或编写代码？有文档可以做到这一点吗？我希望能够使用 qemu模拟*树莓*派和*熊猫板。*

我知道 meego 的 qemu 分支支持 pandaboard，但我试图坚持使用我可以从 apt-get 包管理器管理的主流 qemu。主流 qemu 现在支持以前仅在 meego fork 中支持的 beagleboard rev C 和 beagleboard xm。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:42:36.593

> 无需重新编译 qemu 或编写代码？

不可以。必须有一些代码执行特定于设备的仿真，例如 Raspberry Pi 或 Pandaboard 实现视频输出的方式。这不仅仅是几个配置文件的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-09T09:43:13.260

我已经能够模拟 Pi `-M versatilepb`：[https](https://raspberrypi.stackexchange.com/questions/165/emulation-on-a-linux-pc/53991#53991) ://raspberrypi.stackexchange.com/questions/165/emulation-on-a-linux-pc/53991#53991 ，`-M raspi2`后来在 QEMU 2.6 中添加。

也许这个特性实现起来是可行的，看我添加新平台设备的经验：[如何在QEMU源代码中添加新设备？](https://stackoverflow.com/questions/28315265/how-to-add-a-new-device-in-qemu-source-code/44612957#44612957)

在那里，我只需要添加一行即可将新设备附加到`versatilepb`：

```
sysbus_create_simple("lkmc_platform_device", 0x101e9000, pic[18]); 
```

所以也许我们可以有一个包含以下类型的行的配置文件：

```
type    name                  regid        irq
sysbus  lkmc_platform_device  0x101e9000   18 
```

相关：树外设备：[如何创建树外 QEMU 设备？](https://stackoverflow.com/questions/44254790/how-to-create-out-of-tree-qemu-devices)

# javascript - 为什么我的 javascript for 循环不输出任何内容

> ID：12964859
> 
> 赞同：-2
> 
> 时间：2012-10-18T22:40:08.650
> 
> 标签：javascript

当我使用下面的代码时，它不会向屏幕输出任何内容。

我调用了全局数组`tasks[]`，这是我要运行的函数：

```
function addTask() {
'use strict';

var task = document.getElementById('task');
var outputTask = document.getElementById('taskOutput');
var outputList = document.getElementById('outputList');

var taskMessage = '';

if (task.value) {
    tasks[tasks.length] = task;
    taskMessage = 'You have ' + tasks.length + ' task(s) in your to-do list.';

    if(output.textContent !== undefined) {
        outputTask.textContent = taskMessage;   
    } else {
        outputTask.innerText = taskMessage;
    }

    for (var i = 0, count = tasks.length; i <= count; i++) {
        var listItem = document.createElement('h3');
        var textNode = document.createTextNode(tasks[i]);
        listItem.appendChild(textNode);
        outputList.appendChild(listItem);
    }

}// End task.value IF.
return false;
}// end addTask() function 
```

这是 javascript 正在访问的 HTML。当我在任务输入字段中输入一个值并按提交时，我期望输出到 outputList div 内的屏幕作为 H3。

```
 <form id="theForm" name="theForm" />
<fieldset>
<legend>Enter the starting and ending dates of the task</legend>
<label for="start">Start</label>
<input type="text" name="start" id="start" placeholder="MM/DD/YYYY or Today" required />

<label for="end">End</label>
<input type="text" name="end" id="end" placeholder="MM/DD/YYYY" required />
</fieldset>
<fieldset><legend>Enter a Task For This Time Period</legend>
<div>
<label for="task">Task</label>
<input type="text" name="task" id="task" required />
</div>
</fieldset>
<input type="submit" value="Add It!" id="submit" />
</form>
</div>

<div id="output"></div>
<div id="taskOutput"></div>
<div id="outputList"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:53:47.690

那是因为您正在循环超出数组中的最后一项。

改变这个：

```
for (var i = 0, count = tasks.length; i <= count; i++) { 
```

到：

```
for (var i = 0, count = tasks.length; i < count; i++) { 
```

# delphi - 如何在 Delphi 中调试从 DLL 调用的 DLL

> ID：12964862
> 
> 赞同：10
> 
> 时间：2012-10-18T22:40:29.060
> 
> 标签：delphi, debugging, dll

假设我有一个名为 A 的 EXE，它加载了一个名为 B 的 DLL，它又加载了另一个名为 C 的 DLL。这三个都是用 Delphi 编写的。我有这三个的来源。

如果我想调试DLL B，我没有问题。我转到运行|参数并输入 A.EXE 作为主机。当我点击运行时，Delphi运行A，它加载B，我可以调试到我的心脏内容。

但是调试 DLL C 是另一回事。
看起来 Delphi 只会让我调试直接从 EXE 加载的 DLL。但这是从另一个 DLL 加载的 DLL。

有没有办法做到这一点？谢谢。

这是德尔福 7。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-13T11:47:03.347

使用“调试衍生进程”复选框。

在 Delphi 7 中，这是在工具 | 下。调试器选项 | 一般的。

在 Delphi XE-2 和 XE-5 中，它位于工具 | 下。选项 | 调试器选项 | Embarcadero 调试器。

# javascript - Stop a web page from scrolling

> ID：12964863
> 
> 赞同：0
> 
> 时间：2012-10-18T22:40:31.953
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, dom-events

I am looking for a way to keep my web pages from scrolling. I am looking for solution based on JavaScript or jQuery events.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:43:53.473

您可以通过在页面元素`overflow`中将 css 属性设置为隐藏来禁用滚动，如下所示：`body`

```
body {
    overflow: hidden;
} 
```

如果您想从 jquery 执行此操作，您可以执行等效操作：

```
$('body').css('overflow','hidden'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:56:38.720

您还可以使用 css 固定定位并相对于视口定位事物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T23:01:41.747

取决于您要达到的目标，您可以将所有内容放在一个 div 中，例如#wrapper，并使用一些 CSS：

```
#wrapper {
width: 950px;
margin: 0 auto;
height: 550px;
overflow: hidden;
} 
```

# iphone - iPhone SDK：带有重复延迟的 UIButton 重复

> ID：12964867
> 
> 赞同：1
> 
> 时间：2012-10-18T22:40:49.410
> 
> 标签：iphone, uibutton, delay, repeat

我已经使用来自另一个堆栈溢出线程（[UIButton Touch and Hold](https://stackoverflow.com/questions/3284792/uibutton-touch-and-hold)）的代码在按钮（UIButton）保持上实现了重复任务。

由于各种原因，我想要重复延迟。[重复延迟的定义](http://wiki.answers.com/Q/What_is_meant_by_'Repeat_Delay'_in_customizing_the_keyboard)

但是，我不能完全理解如何做到这一点。我对 iPhone 编码比较陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:02:10.937

受到您建议的代码的启发，您可以执行以下操作：

制作一个`NSTimer`将在按下按钮时启动并每秒钟触发一个方法的方法`x`。

标题（.h）：

```
// Declare the timer and the needed IBActions in interface.
@interface className {
    NSTimer * timer;
}
-(IBAction)theTouchDown(id)sender;
-(IBAction)theTouchUpInside(id)sender;
-(IBAction)theTouchUpOutside(id)sender;

// Give the timer properties.
@property (nonatomic, retain) NSTimer * timer; 
```

实施文件（.m）：

```
// Synthesize the timer
// ... 
```

为“Touch Down”做一个`IBAction`启动计时器，该计时器将每 2 秒触发一次动作方法。然后为“Touch Up Inside”和“Touch Up Outside”制作另一个 IBAction，以使计时器无效。

例如：

```
-(IBAction)theTouchDown {

    self.timer = [NSTimer scheduledTimerWithTimeInterval:2.0
                                                  target:self
                                                selector:@selector(action:)
                                                userInfo:nil
                                                 repeats:NO];
}

-(IBAction)theTouchUpInside {

    [self.timer invalidate];
    self.timer = nil;
}

-(IBAction)theTouchUpOutside {

    [self.timer invalidate];
    self.timer = nil;
} 
```

然后在该方法中`NSTimer`执行任何您需要的操作：

```
-(void)action:(id)sender {

    // ...
} 
```

# jquery - Trying to use easypagination.js with a variable step

> ID：12964868
> 
> 赞同：0
> 
> 时间：2012-10-18T22:40:52.940
> 
> 标签：jquery, global-variables, children, html.dropdownlistfor

I'm borrowing easyPaginate's code and simply trying to add on a dropdown feature to adjust the number of items displaying on each page. My dropdown works on page 1\. The moment I click on page 2(or any other child page), the amount of items on the page increases drastically.

Would desperately love to get some help.

```
 (function($) {

$.fn.easyPaginate = function(options){

    var defaults = {
        step: 4,
        delay: 0,
        numeric: true,
        nextprev: true,
        auto:false,
        pause:0,
                    user_list:false,
        clickstop:true,
        controls: 'pagination',
        current: 'current'
    };

    var options = $.extend(defaults, options);
    var step = options.step;
    var lower, upper;
    var children = $(this).children();
    var count = children.length;
    var obj, next, prev;
    var page = 1;
    var timeout;
    var clicked = false;

    function show(){
        clearTimeout(timeout);
        lower = ((page-1) * step);
        upper = lower+step;
        $(children).each(function(i){
            var child = $(this);

            child.hide();
            if(i>=lower && i<upper){ setTimeout(function(){ child.fadeIn('fast') }, ( i-( Math.floor(i/step) * step) )*options.delay ); }
            if(options.nextprev){
                if(upper >= count) { next.fadeOut('fast'); } else { next.fadeIn('fast'); };
                if(lower >= 1) { prev.fadeIn('fast'); } else { prev.fadeOut('fast'); };
            };
        });

        $('li','#'+ options.controls).removeClass(options.current);

        $('li[data-index="'+page+'"]','#'+ options.controls).addClass(options.current);

        if(options.auto){
            if(options.clickstop && clicked){}else{ timeout = setTimeout(auto,options.pause); };
        };
    };

    function auto(){
        if(upper <= count){ page++; show(); }
    };

    this.each(function(){

        obj = this;

        if(count>step){

            var pages = Math.floor(count/step);
                            //counts the number of pages
            if((count/step) > pages) pages++;

            var ol = $('<ul id="'+ options.controls +'"></ul>');
            $('#navigate').prepend(ol);

            //Click on page numbers
                            if(options.numeric){
                for(var i=1;i<=pages;i++){
                $('<li data-index="'+ i +'">'+ i +'</li>')
                    .appendTo(ol)
                    .click(function(){

                        clicked = true;
                        page = $(this).attr('data-index');

                        show();
                    });
                };
            };

                            if(options.user_list){

                                $('<div style="float:right; margin-right:0;">Please select:  <select name="amount" id="amount"><option value="5">5</option><option selected="10">10</option></select></div>')                                   
                                .appendTo(ol)
                                .change(function(){
                                    step=($("#amount").val());

                                    show();
                                });
                            }

                            if(options.nextprev){
                prev = $('<li class="prev">Previous</li>')
                    .hide()

                    .click(function(){
                        clicked = true;
                        page--;

                        show();
                    });
            };

            if(options.nextprev){
                next = $('<li class="next">Next</li>')
                    .hide()
                    .click(function(){
                        clicked = true;
                        page++;
                        show();
                    });
            };

            show();
        };
    });

};

 })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:55:36.627

我通过数小时的研究和使用萤火虫发现了。

```
(function($) {

$.fn.easyPaginate = function(options){

var defaults = {
    step: 4,
    delay: 0,
    numeric: true,
    nextprev: true,
    auto:false,
    pause:0,
                user_list:false,
    clickstop:true,
    controls: 'pagination',
    current: 'current'
};

var options = $.extend(defaults, options);
var step = parseInt(options.step);
var lower, upper;
var children = $(this).children();
var count = children.length;
var obj, next, prev;
var page = 1;
var timeout;
var clicked = false;

function show(){
    clearTimeout(timeout);
    lower = ((page-1) * step);
    upper = lower+step;
    $(children).each(function(i){
        var child = $(this);

        child.hide();
        if(i>=lower && i<upper){ setTimeout(function(){ child.fadeIn('fast') }, ( i-( Math.floor(i/step) * step) )*options.delay ); }
        if(options.nextprev){
            if(upper >= count) { next.fadeOut('fast'); } else { next.fadeIn('fast'); };
            if(lower >= 1) { prev.fadeIn('fast'); } else { prev.fadeOut('fast'); };
        };
    });

    $('li','#'+ options.controls).removeClass(options.current);

    $('li[data-index="'+page+'"]','#'+ options.controls).addClass(options.current);

    if(options.auto){
        if(options.clickstop && clicked){}else{ timeout = setTimeout(auto,options.pause); };
    };
};

function auto(){
    if(upper <= count){ page++; show(); }
};

this.each(function(){

    obj = this;

    if(count>step){

        var pages = Math.floor(count/step);
                        //counts the number of pages
        if((count/step) > pages) pages++;

        var ol = $('<ul id="'+ options.controls +'"></ul>');
        $('#navigate').prepend(ol);

        //Click on page numbers
                        if(options.numeric){
            for(var i=1;i<=pages;i++){
            $('<li data-index="'+ i +'">'+ i +'</li>')
                .appendTo(ol)
                .click(function(){

                    clicked = true;
                    page = $(this).attr('data-index');

                    show();
                });
            };
        };

                         if(options.nextprev){
            prev = $('<li class="prev">Previous</li>')
                .hide()

                .click(function(){
                    clicked = true;
                    page--;

                    show();
                });
        };

        if(options.nextprev){
            next = $('<li class="next">Next</li>')
                .hide()
                .click(function(){
                    clicked = true;
                    page++;
                    show();
                });
        };

        show();
    };
});

};

})(jQuery); 
```

# javascript - 外部网站的jQuery预加载

> ID：12964876
> 
> 赞同：-5
> 
> 时间：2012-10-18T22:41:30.437
> 
> 标签：javascript, jquery, ajax

假设我的主站点被称为

```
mainsite.com 
```

在我的 mainsite.com 上，我有一堆外部链接，例如：

```
external.com/search.php?type=xxx&date=xxx&id=xxx&product=xxx 
```

当我的访问者点击这些链接时，除了一个问题外，他们都可以正常加载。它们需要 20-30 秒才能加载！

原因是 external.com 上的目标 URL 正在执行产品搜索。

所以我发现我的访问者在链接加载之前就离开了！

有人有什么我可以尝试的解决方案吗？

我不能做任何改变，`external.com`因为它不是我的网站！我只能在`mainsite.com`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:55:11.047

主页加载后，使用 AJAX 将远程站点加载到隐藏的 DIV 中。当用户点击链接时，隐藏主 DIV 并显示相应的 DIV。由于 AJAX 在后台异步运行，因此加载将在用户阅读主页时发生，并希望在他们单击链接时完成。

另一种选择是在用户单击链接时使用 AJAX。在等待页面到达时，显示一个微调器和一条消息“这需要一段时间，请稍候...”。

# ios - 核心数据 | 子上下文内存管理

> ID：12964877
> 
> 赞同：1
> 
> 时间：2012-10-18T22:41:33.973
> 
> 标签：ios, core-data

我正在从主上下文创建一些子上下文，我想知道我是否需要释放子上下文？

我有一个创建子上下文的 CoreData 类（此类是启用弧的类），但它可以为可能不是弧类的其他类提供上下文。

```
- (NSManagedObjectContext *) createChildContext
{
    NSManagedObjectContext *childManagedContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    childManagedContext.parentContext = [self parentContext];
    return childManagedContext;
} 
```

然后其他一些类可以获取子上下文

```
NSManagedObjectContext *context = [coredata createChildContext]; 
```

我的问题是我是否需要释放此类中的上下文，或者它是否会由创建它的 arc 类自动管理，因为我没有保留它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:49:05.663

这实际上是一个非常有趣的问题，因为您将 ARC 和非 ARC 混合在一起。不过，与往常一样，[内存管理策略](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)可以帮助我们决定在这种情况下该怎么做。

首先（我想您已经知道了），您不必在创建它的 ARC 类中释放上下文（在内部`-createChildContext`）。实际上，您不能在那里显式释放或自动释放它，因为该类是 ARC - 您不能在其中进行任何手动内存管理。

现在让我们看看调用类。正如你所写的那样，一旦你完成它，你*就不必释放上下文。*由于您没有*获得上下文的所有权*，因此您不应该告诉对象您正在释放它；放弃你从未拥有过的对象的所有权不是你的地方。

为什么你没有获得上下文的所有权？好吧，正如您所写，您永远不会：

*   显式保留对象（例如`[[coredata createChildContext] retain]`）
*   将对象分配给`@property`标记`retain`或`strong`
*   `alloc`从以、`new`或开头的方法获取对象`copy`

从这个意义上说，您可以认为对象由创建它的 ARC 类“管理”，尽管这有点误导；实际上，谁来管理它并不重要，重要的是您在非 ARC 调用类中不拥有它。

如果您出于某种原因需要更改它 - 例如，您需要子上下文保留一段时间，或者您打算在整个班级中使用它 - 您可以考虑上面列出的方法之一，您*确实*拥有所有权上下文。在这种情况下，您必须在完成后释放它。

我强烈建议阅读[高级内存管理编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1)；除了其他主题外，它还有很多关于处理对象所有权的非常有用的内容。

# java - 需要帮助将公斤转换为磅和盎司

> ID：12964880
> 
> 赞同：0
> 
> 时间：2012-10-18T22:41:44.000
> 
> 标签：java

出于某种原因，这种转换真的让我很头疼。我可以在纸上和头脑中进行转换，但是当我尝试用 Java 为我的家庭作业编写它时，它真的让我一团糟。任务是让用户输入一个以千克为单位的数字并编写一个程序，该程序显示一条线上有多少磅，另一条线上有多少盎司。一般来说，转换让我很困惑，但我不确定这是否正确。我需要在任何地方使用类型转换吗？

```
import acm.program.*;

public class KilogramsToPoundsAndOunces extends ConsoleProgram {

public void run(){
println("This programs converts kilograms into pounds and ounces.");
double kilo = readDouble("Enter the kilogram value: "); 
double totalOunces = (kilo * POUNDS_PER_KILOGRAM) * OUNCES_PER_POUND; 
int totalPounds = totalOunces % OUNCES_PER_POUND; 
double leftOverOunces = totalOunces - (totalPounds * OUNCES_PER_POUND);  
println(totalPounds + "lbs" + ".");
println(leftOverOunces + "ozs" + ".")

}
private static void POUNDS_PER_KILOGRAM = 2.2; 
private static void OUNCES_PER_POUND = 16; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T22:45:21.473

您需要为常量定义数字数据类型：

```
private static double POUNDS_PER_KILOGRAM = 2.2; 
private static int OUNCES_PER_POUND = 16; 
```

还`totalPounds`需要转换`int`为编译：

```
int totalPounds = (int) (totalOunces % OUNCES_PER_POUND); 
```

虽然这*应该*是：

```
int totalPounds = (int) (totalOunces / OUNCES_PER_POUND); 
```

（见@Kleanthis 答案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:46:00.547

首先，全局变量`POUNDS_PER_KILOGRAM`和`OUNCES_PER_POUND`变量是变量，因此没有返回类型（你让它们“返回”无效）。

更喜欢：

```
private final double POUNDS_PER_KILOGRAM = 2.2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:55:33.490

我认为程序出错的地方是：

```
int totalPounds = totalOunces % OUNCES_PER_POUND;
double leftOverOunces = totalOunces - (totalPounds * OUNCES_PER_POUND); 
```

您会看到模运算符不会返回总磅数，而是在您获得尽可能多的完整磅数后剩余的盎司数。例如

```
int leftoverOunces = totalOunces % OUNCES_PER_POUND; 
```

和

```
int totalPounds = (int)(totalOunses/OUNCES_PER_POUND); 
```

这应该会给你正确的结果。

# python - Jenkins：检查文件是否被 svn update 更改

> ID：12964883
> 
> 赞同：0
> 
> 时间：2012-10-18T22:41:58.997
> 
> 标签：python, svn, jenkins, pip

我想知道自上次结帐以来某个文件是否发生了更改-在詹金斯从 svn 中检查了我的存储库之后。由于构建过程从 jenkins 更新工作区开始，因此我需要找出并且无法通过*svn status -u*检查。

这里的背景是我想检查包含项目要求（requirements.txt）的文件是否被更改，在这种情况下更新环境（virtualenv）。

我是否必须存储上次结帐的修订号并将其与*svn log requirements.txt*或*svn diff*的输出与该修订进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:22:33.873

我会试着在这里模仿你的情况

```
z:\j-wc>svn ls -v .
      2 Badger                окт 19 05:40 ./
      2 Badger             13 окт 19 05:40 a.txt
      2 Badger             14 окт 19 05:40 requirements.txt 
```

j-wc 是工作副本，更新到比当前 HEAD 更旧的 repo 版本

```
z:\j-wc>svn ls -v file:///Z:/repo/trunk
      5 Badger                окт 19 05:44 ./
      2 Badger             13 окт 19 05:40 a.txt
      5 Badger             39 окт 19 05:44 b.txt
      4 Badger             21 окт 19 05:43 requirements.txt 
```

前一段时间

如果（之前`svn up`）我必须知道“我会在 requirements.txt 中得到更改吗？” 我会尽力

`z:\j-wc>svn diff -r "BASE":"HEAD" requirements.txt | wc -l`. 如果发生更改，则 diff 输出结果（WC 内部与本地文件的差异允许使用永久符号修订名称 BASE+HEAD），无更改 == 无输出

```
z:\j-wc>svn diff -r "BASE":"HEAD" requirements.txt
Index: requirements.txt
===================================================================
--- requirements.txt    (working copy)
+++ requirements.txt    (revision 5)
@@ -1,2 +1,3 @@
 Req 1
 Req 2
+Req 3 
```

# git - 这是一个 Git 错误吗？

> ID：12964886
> 
> 赞同：1
> 
> 时间：2012-10-18T22:42:21.000
> 
> 标签：git

我正在测试 Git 稀疏结帐功能，使用手册和[此页面](http://jasonkarns.com/blog/subdirectory-checkouts-with-git-sparse-checkout/)作为指南。我尝试通过创建一个包含以下内容的稀疏签出文件来签出一个目录（当然，实际名称是隐藏的）：

```
dir1/ 
```

然后我运行，然后按预期在我的存储库中`git read-tree -mu`看到。`dir1`接下来我决定签出一个新目录，因此我再次更新 sparse-checkout 文件的内容，如下所示：

```
dir1/
dir2/ 
```

然后我运行`git read-tree -mu`，然后我看到以下非嵌套目录：

```
dir1
dir2
dir3
dir4 
```

为什么会出现额外的目录？它是Git中的错误吗？请注意，如果我`dir2/`从 sparse-checkout 文件中删除，它们似乎也会作为一个组消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T02:03:31.037

由于 dir 开头缺少斜杠：“dir2”应该是“/dir2”

# jpa - jpa 和本机查询

> ID：12964891
> 
> 赞同：2
> 
> 时间：2012-10-18T22:43:27.650
> 
> 标签：jpa, nativequery

我在原生查询中遇到了一件奇怪的事情：

如果我尝试使用如下命名的本机查询

```
@NamedNativeQuery(name = "native_count_avg_guest_quizzes", resultClass = java.math.BigDecimal.class, query = "select avg(c) as r from ((select count(*) as c from user_quiz uq join user u on (uq.user_id = u.id) where u.status = 'temporary' group by u.id) as res)") 
```

该应用程序无法运行，我有

```
org.hibernate.HibernateException: Errors in named queries: native_count_avg_guest_quizzes_ 
```

但是，如果我不使用 NamedNativeQuery 并且仅创建如下动态本机查询，则相同的查询可以正常工作：

```
entityManager.createNativeQuery(
                        "select avg(c) as r from ((select count(*) as c from user_quiz uq join user u on (uq.user_id = u.id) where u.status = 'temporary' group by u.id) as res)")
                        .getSingleResult() 
```

为什么？我对 NamedNativeQuery 做错了什么？谢谢

**更新：** 实体类如下

```
@Entity
@Table(name = "user_quiz")
@NamedNativeQueries({
    @NamedNativeQuery(name = "native_count_avg_guest_quizzes", resultClass = java.math.BigDecimal.class, query = "select avg(c) as r from ((select count(*) as c from user_quiz uq join user u on (uq.user_id = u.id) where u.status = 'temporary' group by u.id) as res)")
})
@NamedQueries({
    @NamedQuery(name = "list_clients_quizzes", query = "select uq from UserQuiz uq where uq.quiz.client.id = :clientId"),
    .......
})
public class UserQuiz extends Measurable {
.......
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:52:47.867

`createNativeQuery`用于本地`SQL`查询语言，这意味着 DB 可以理解并执行该查询（例如，`select * from some_table where id = '0001'`）；

它可能会导致数据库依赖。现在您正在使用`JPQL`语言，这就是为什么使用`createQuery()`或`createNameQuery()`带有`@NameQuery`注释的原因。

例子 ：

**@NameQuery**

```
@NamedQuery(name = "findAllEmployee", query = "select e from Employee e")
@Entity
public class Employee {
    @Id int id;
    String name;
    // ...
}

Query query = em.createNamedQuery("findAllEmployee");
query.getResultList() 
```

**动态的**

```
 Query query = em.createQuery("select e from Employee e");
    query.getResultList()? 
```

***本机**

```
Query query = em.createNativeQuery("SELECT * FROM EMPLOYEE_TBL");
query.getResultList()? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-08T02:56:20.733

从 @NamedNativeQuery 中删除 resultClass。

见[https://stackoverflow.com/a/9763489](https://stackoverflow.com/a/9763489)

> 对于 NamedNativeQueries，您只能在结果实际映射到实体时使用 resultClass。

# java - 如何让多个 jComboBoxes 具有相同的项目但选择一个项目会使该项目在所有其他 jComboBoxes 中消失？

> ID：12964894
> 
> 赞同：2
> 
> 时间：2012-10-18T22:43:54.463
> 
> 标签：java, swing, dynamic, jcombobox

所以，问题来了：我需要 3 个或更多 jComboBoxes（都具有相同的项目）相互连接，这样当我在任何 jComboBox 中选择一个项目时，该项目将在所有其他 jComboBoxes 中消失。具体例子：扑克游戏结束。现在我需要保存玩家的位置。我的 jComboBoxes（代表地方）填充了玩家的个人资料，我想确保在整个 jComboBoxes 中只能选择一个个人资料。我自己尝试了一些东西并走到了这一步。如您所见，它完全没有用...

```
in MyItemListener:    
    if (jComboBox1 == evt.getSource())
    {   
        if (jComboBox1.getSelectedIndex() > 0)
        {
            jComboBox2.removeItem(jComboBox1.getSelectedItem());
            jComboBox3.removeItem(jComboBox1.getSelectedItem());
        }    
    }
    if (jComboBox2== evt.getSource())
    {   
        if (jComboBox2.getSelectedIndex() > 0)
        {
            jComboBox1.removeItem(jComboBox2.getSelectedItem());
            jComboBox3.removeItem(jComboBox2.getSelectedItem());
        }
    }
    if (jComboBox3== evt.getSource())
    {   
        if (jComboBox3.getSelectedIndex() > 0)
        {
            jComboBox1.removeItem(jComboBox3.getSelectedItem());
            jComboBox2.removeItem(jComboBox3.getSelectedItem());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:20:31.013

向每个组合框添加一个`itemListener`，当您从组合框 1 中选择一个项目时，它将触发侦听器，您可以检索所选值。从那里您可以从其他组合框中删除相同的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:00:03.100

[您可能会从这个示例](https://stackoverflow.com/a/3191882/230513)中获得一些想法，该示例使用选择`combo1`来确定要显示在几个模型中的哪一个`combo2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:18:03.127

我将介绍一个了解所有组合框的自定义组合框模型。模型项应该有一个对它被选中的组合框的引用（当然引用可以是空的）。

然后我将创建一个具有父组合框的包装模型。getSize() 和 getElementAt() 应该将源模型元素的引用与包装模型的父引用进行比较。如果相同，请跳过该元素。

# javascript - 如何使用 RequireJS 实现工厂设计模式？

> ID：12964895
> 
> 赞同：3
> 
> 时间：2012-10-18T22:43:58.707
> 
> 标签：javascript, requirejs

我有这样的东西...

```
define(['ClassA', 'ClassB', 'ClassC'], 
  function(ClassA, ClassB, ClassC) 
  {
    return {
      build: function(className) {
        var obj;
        switch(className)
        {
            case 'ClassA': obj = new ClassA(); break;
            case 'ClassB': obj = new ClassB(); break;
            case 'ClassC': obj = new ClassC(); break;
        }
        return obj;
    }
  }
} 
```

这看起来不错，但有没有更好的方法来编写它？我尝试将 switch 替换为

```
return new arguments[className]();    // doesn't work 
```

我能得到的最接近的是使用地图：

```
var classes = {
    ClassA: ClassA,
    ClassB: ClassB,
    ClassC: ClassC
}
return new classes[className](); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:04:05.443

你的对象在那里真的没有问题。
它快速、高效且易于遵循。
我唯一的建议是创建一个 var 来保存该值，或者更明确地测试是否`className`是一个合适的字符串，并且实际上在您的列表中：

任何一个：

```
var construct = classes[className];
if (construct) { return new construct(); }
else { /* handle the case where the class doesn't exist */ } 
```

或者：

```
return classes[className] && (new classes[className]()) || null; 
```

第二个检查 classes[className] 并且如果它存在应该返回一个新实例（JS 返回 AND 最右边的值）......
或者它将返回`null`.

也许`null`不是你想要的。
但关键是你应该准备好处理某人经过：`"Bob"`到你的工厂，尽管事实上没有`Bob`课程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-14T19:09:42.100

使用[功能模块作为工厂](http://www.ericfeminella.com/blog/2013/10/16/function-modules-in-requirejs/)：

```
define(function(require){
    var classes = {
        'ClassA' : require('ClassA'),
        'ClassB' : require('ClassB'),
        'ClassC' : require('ClassC')
    };

    return function(className){
        try {
            return new classes[className];
        } catch(error) {
            throw new Error('Unknown className Specified.');
        }
    }
}); 
```

# image-processing - 使用 ImageMagick 将 PSD 导出为 PNG 时丢失图层

> ID：12964896
> 
> 赞同：1
> 
> 时间：2012-10-18T22:44:05.040
> 
> 标签：image-processing, imagemagick, photoshop, psd, imagemagick-convert

我们有一个脚本，它使用 ImageMagick“转换”命令将 Photoshop PSD 文件分成三层作为 PNG 图像：

```
convert my.psd -set dispose Background -coalesce -delete 0 temp.png 
```

这就像对 SO 问题[Extract layers from PSD with ImageMagick, preserve layout](https://stackoverflow.com/questions/6598848/extract-layers-from-psd-with-imagemagick-preserving-layout)的回答一样。我们确实希望看到输出图像与该问题一样对齐。

它工作得很好，除非有时中间层是空的，即完全透明。在这种情况下，它的行为就像缺少该层一样，并且只为其他两个层生成 PNG 文件。我怎样才能得到所有的层？

我一直在筛选 ImageMagick 文档，尝试了上述选项的变体，但到目前为止还没有运气。

我在 OS X 10.7.4 上。

```
$ convert -version
Version: ImageMagick 6.7.9-0 2012-08-27 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features:  OpenCL 
```

# ios - UITableView 单元格中的 UITextField 以编程方式成为FirstResponder

> ID：12964897
> 
> 赞同：3
> 
> 时间：2012-10-18T22:44:17.817
> 
> 标签：ios, uitableview, uitextfield, cell, becomefirstresponder

我`UITextField`在原型单元格中有一个带有标签的标签。当正在构建并且打开上面单元格中的a`UITextField`时，将设置为第一响应者。如果应用程序从头开始或已关闭并重新启动，则此方法有效。一旦加载，就不会再触发了。`UITableView``UISwitch``[tableView reloadData]``becomeFirstResponder`

如果`UITextField`稍后通过触摸文本字段成为第一响应者，我可以`becomeFirstResponder`使用按钮、弹出窗口等触发事件……但不再使用我的开关。

关于我可以尝试什么的任何指示？

目前，我使用该`didSelectRowAtIndexPath`方法触发弹出窗口。一个很好的副作用是，当我拉起数字键盘时，我可以在弹出窗口中提供一个确定和取消按钮，而不必摆弄键盘上的单独按钮。但这似乎很明显是一种解决方法。

这就是我在构建时调用 firstresponder 的方式`UITableView`（每次应用程序从头开始时都有效）：

```
if ([settings doubleForKey:@"limitDouble"]==0 && [settings boolForKey:@"limitBool"]==YES) {
    [dailyLimitEntry becomeFirstResponder];
} 
```

dailyLimitEntry 很`UITextField`强大，所以它会一直存在。

只是为了好玩，我添加了一个按钮并将其连接到我的代码，如下所示：

```
UITextField *tmp = (UITextField *)[self.view viewWithTag:35];
[tmp becomeFirstResponder]; 
```

这也有效。当我将它与开关一起使用时，只有在应用程序新加载到内存中时才会调用它。否则，我`UITextField`的开关不会响应。

在第一条评论之后，我找到了一种方法来检查是否`UITableView`已经完成重新加载

```
-(void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if([indexPath row] == ((NSIndexPath*)[[settingsTableView indexPathsForVisibleRows] lastObject]).row){
        //end of loading
        //for example [activityIndicator stopAnimating];
        NSLog(@"finished reload");
        NSLog(@"%@",dailyLimitEntry);
        if ([settings boolForKey:@"limitBool"]==YES) {
            UITextField *tmp = (UITextField *)[self.view viewWithTag:35];
            [tmp becomeFirstResponder];
        }
    }
} 
```

有趣的是，只有在应用加载后第一次使用开关时才会触发成为第一响应者。最初，开关是关闭的。所以包含 的单元格`UITextField`尚未绘制。一旦我切换到`ON`，`UITextField`就会在第二个单元格中绘制并成为第一响应者。如果我再次切换`OFF`，`ON`我仍然会得到我的日志“完成重新加载”，但`UITextField`不会成为第一响应者。它让我发疯......一定是关于应用程序的生命周期的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T16:05:09.867

与其检查 indexPath，不如检查单元格的类。

这是我为空白的标题单元格调出键盘的方法（当我创建新项目时）：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([cell isKindOfClass:[FDSSampleTitleCell class]]) {
        FDSSampleTitleCell *titleCell = (FDSSampleTitleCell *)cell;
        if (titleCell.titleField.text.length == 0) {
            [titleCell.titleField becomeFirstResponder];
        }
    }
} 
```

# postgresql - 如何在 PostgreSQL 中选择以 a-to-c 范围开头的用户名？

> ID：12964898
> 
> 赞同：1
> 
> 时间：2012-10-18T22:44:22.700
> 
> 标签：postgresql

我有一张带有用户名的表格。我想选择以 a 到 c 开头的用户名。PostgreSQL 中的 SQL 语法是什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:59:51.440

有几种不同的方法，但我可能会使用带有字符集匹配的正则表达式：

```
SELECT * FROM users WHERE username ~ '^[a-cA-C]'; 
```

或子字符串搜索：

```
SELECT * FROM users WHERE lower(left(username,1)) BETWEEN 'a' AND 'c'; 
```

在旧版本的 PostgreSQL 中，该`left`功能不可用，因此您必须`substring(username from 1 for 1)`改用。

有关详细信息，请参阅[字符串函数](http://www.postgresql.org/docs/current/static/functions-string.html)和[模式匹配](http://www.postgresql.org/docs/current/static/functions-matching.html)。

# objective-c - 两个大小不同的 NSTableCellView 以相同的大小出现

> ID：12964899
> 
> 赞同：1
> 
> 时间：2012-10-18T22:44:37.333
> 
> 标签：objective-c, xcode, macos, nstableview, nstablecellview

这是我的 2 个 NSTableCellViews：
![在此处输入图像描述](../Images/99226fa036ea84e3207567f351a1fc7e.png)

第一个大于第二个（当用户搜索 tableview 并且没有结果时使用这个）但是当我运行我的应用程序时，第二个得到第一个的大小：
![在此处输入图像描述](../Images/1a4fca4fc480abf72a9f2b310b0581ab.png)

为什么会这样？这是我的部分代码

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    if (noResults){
        return 1; 
    }else{
        return [array count];
    }
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    if (noResults){
        NSTableCellView *result = [tableView makeViewWithIdentifier:@"NoResults" owner:self];
        result.textField.stringValue = [NSString stringWithFormat:@"No results for \"%@\"", _searchTXT.stringValue];
        return result;
    }else{ 
        SearchTableCell *result = [tableView makeViewWithIdentifier:tableColumn.identifier owner:self];
        result.textField.stringValue = @"Name";
        result.textField2.stringValue = @"Last Name";
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:59:54.540

您需要实现 tableView:heightForRowAtIndexPath: 方法。否则，单元格将全部是表格视图 rowHeight 属性的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:58:02.123

*   -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    如果（无结果）{

    // 这里返回 NSTableCellView 的高度；

    }别的{

    // 这里返回 SearchTableCell 高度；

    }

}

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-04T15:19:01.513

对于基于视图的 NSOutlineView，实现委托方法`outlineView:heightOfRowByItem:`以返回所需的行高。

为避免代码中出现常量，请考虑从关联视图中确定高度：

```
- (CGFloat)outlineView:(NSOutlineView *)outlineView heightOfRowByItem:(id)item
{
    NSView* view = [self outlineView:outlineView viewForTableColumn:nil item:item];
    return (view ? NSHeight(view.frame) : outlineView.rowHeight);
} 
```

# java - Java：使用我自己的 .equals 将一个类与该类中的另一个类进行比较

> ID：12964903
> 
> 赞同：0
> 
> 时间：2012-10-18T22:45:14.790
> 
> 标签：java, object, equals, equality

我正在制作一种方法来`.equals`替换使用的`equals`方法。它接受一个对象。我希望它检查该对象是否等于运行该类的`.equals`类。

我知道我想将我拥有的所有私有方法与该对象进行比较。

有没有办法在不创建另一个私有类从对象中获取私有变量的情况下做到这一点？我该怎么做才能比较平等而不是身份？我坚持这一点。我必须用来`==`比较吗？

也在网上看我看到其他人使用递归。如果这是我必须这样做的方式，你能告诉我并向我解释吗？

所以我有一个例子

```
public boolean equals(Object o)
{ 
```

这是在一个我们将称为 bobtheBuilder 的类中（首先出现在我的脑海中）我想检查对象 o 是否等于该类。bobTheBuilder 具有私有对象数组和私有 int。我假设我想检查此类的数组和 int 是否等于对象的数组和 int。首先我知道我需要检查它是否等于 null 所以

```
private _arrayObject[];

private _integerBob;

public boolean equals(Object o)
{
    boolean result = true;

    if (o == null)
        result = false

    bobTheBuilder compared = (bobTheBuilder) o;

    if(compared.getArray != _arrayObject[] || compared.getInt != _integerBob)
        result == false

    return result
} 
```

我知道平等检查平等而不是身份，所以我认为这是错误的。我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:53:38.780

因此，您在类 Z 中有一个私有数组 X 和一个 int Y。

现在，为了检查相等而不是缩进，

1.  首先你应该有 setter 和 getter 来设置和返回私有变量的值，例如

> public void setArrayX(Object[] arr), public Object[] getArrayX()

2.现在， eqauls 方法看起来像，

```
boolean equals(Object o) {
  if(Arrays.equals(this.getArrayX(),o.getArrayX()) && this.getIntY() == o.getIntY())
   return true;
  return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:45:28.857

改编自Joshua Bloch[第 2 版 Effective Java中的示例：](https://rads.stackoverflow.com/amzn/click/com/0321356683)

```
public boolean equals(Object o) {
  if (o == this) {
    return true;
  }

  if (!(o instanceof BobTheBuilder)) {
    return false:
  }

  BobTheBuilder bob = (BobTheBuilder) o; //guaranteed to succeed

  return Arrays.equals(bob._arrayObject, _arrayObject)
    && bob._integerBob == _integerBob;
} 
```

不要忘记覆盖`hashCode`。

书中的文字是指合同中规定的`equals`方法`Object`，[这里](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:02:33.330

我认为检查课程的最佳方法是通过

```
someObject.getClass().isInstance(anotherObject) 
```

命令。

这也适用于继承。

# c# - XNA 的自动 XNB 序列化支持哪些类型？

> ID：12964904
> 
> 赞同：2
> 
> 时间：2012-10-18T22:45:19.550
> 
> 标签：c#, serialization, xna, content-pipeline

我已经阅读了 Shawn Harvgreave 的关于自动序列化的博客文章和关于内容管道概述的 MSDN 文章，但我找不到支持的类型列表。

引用 MSDN：

> 从 XNA Game Studio 3.1 开始，对于没有现有内容类型编写器的简单类型，将自动将自定义数据序列化为 .XNB 格式。

`Queue`在我尝试使用`System.Collections.Generic`我猜自动序列化不支持的a 之前，我没有遇到过这个问题。

那么，是否有此支持的类型列表？如果不支持，我是否需要编写自己的`ContentTypeWriter`and `ContentTypeReader`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:20:25.167

提供兼容类型的完整列表很棘手 - 因为序列化程序试图与它以前从未见过的自定义类型兼容。因此，任何兼容类的列表都不能详尽无遗。正如[肖恩的博客文章](http://blogs.msdn.com/b/shawnhar/archive/2009/03/25/automatic-xnb-serialization-in-xna-game-studio-3-1.aspx)所说：

> 默认情况下，它将序列化您类型的所有公共字段和属性（假设它们不是只读的）。

但是让我们谈谈集合类。根据上述规则，集合类将无法正确序列化（*使用反射时*），因为它们的对象集合不是公共属性（也不支持索引器）。

有趣的是，*为什么*像这样自动序列化集合不是内置功能。一个集合通常实现`IEnumerable<T>`（就像`Queue<T>`做的那样），它可以被序列化。但这是只读的。没有像*写入*集合那样`IEnumerable`的标准接口。所以没有办法自动反序列化它们！

 *幸运的是，**XNA 为以下通用集合类型提供了自定义读取器/写入器**：

*   数组
*   `List<T>`
*   `Dictionary<TKey, TValue>`

序列化程序在可用时自动使用自定义读取器/写入器。因此，如果您希望它处理一个集合类（如`Queue<T>`），那么您必须为它创建自己的`ContentTypeWriter`和`ContentTypeReader`。幸运的是，这并不太难 - 请参阅下面的*未经测试*的实现。

**有关内置类型的完整列表，请参阅[XNB 格式](http://xbox.create.msdn.com/en-US/sample/xnb_format)规范**。同样，这仅涵盖*内置*类型。其他类型可以通过反射或提供自定义读取器/写入器对来支持。

* * *

```
class QueueReader<T> : ContentTypeReader<Queue<T>>
{
    public override bool CanDeserializeIntoExistingObject { get { return true; } }

    protected override Queue<T> Read(ContentReader input, Queue<T> existingInstance)
    {
        int count = input.ReadInt32();
        Queue<T> queue = existingInstance ?? new Queue<T>(count);
        for(int i = 0; i < count; i++)
            queue.Enqueue(input.ReadObject<T>());
        return queue;
    }
}

[ContentTypeWriter]
class QueueWriter<T> : ContentTypeWriter<Queue<T>>
{
    public override string GetRuntimeReader(TargetPlatform targetPlatform)
    {
        return typeof(QueueReader<T>).AssemblyQualifiedName;
    }

    public override bool CanDeserializeIntoExistingObject { get { return true; } }

    protected override void Write(ContentWriter output, Queue<T> value)
    {
        output.Write(value.Count);
        foreach(var item in value)
            output.WriteObject<T>(item);
    }
} 
```

请注意，我在`GetRuntimeReader`此处的实现不处理`targetPlatform`不是 Windows 的情况。而且您需要将它们放在正确的程序集中，这样您就不会遇到依赖性问题。*

# c++ - 如何将包含数组 ByVal 的结构传递给 C++？

> ID：12964908
> 
> 赞同：1
> 
> 时间：2012-10-18T22:45:36.880
> 
> 标签：c++, vb6, interop

我正在使用第三方 C++ dll，它使用具有以下签名的函数：

```
extern "C" __declspec(dllimport) int __stdcall CalcDDtable(struct ddTableDeal tableDeal, 
    struct ddTableResults * tablep); 
```

每个结构仅包含一个固定的一维数组`int`s (VB6 `Long`s)。`tablep`将包含结果。

如果 C++ 声明是：

```
extern "C" __declspec(dllimport) int __stdcall CalcDDtable(int * tableDeal, int * tablep); 
```

那么 VB6`Declare`语句将是：

```
Declare Function CalcDDtable Lib "my3rdParty.dll"(ByRef lngTable as Long,ByRef lngResult as Long) as int
This code would be called like:
Dim lngTables(15) As Long
Dim lngResults(20) As Long

'Initialize the lngTables array...

intResult=CalcDDtabel(lngTables(0),lngResults(0)) 
```

但是我不知道如何声明上面的函数，因为第一个数组被打包在一个不是指针的结构中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:30:06.653

您不能将结构按值从 VB6 传递到 DLL。tableDeal 结构是按值（不是指针），所以我不确定你可以在那里做什么。

您可以通过引用传递结构，它们可以包含固定长度的数组，因此您的第二个参数就可以了。事实上，如果*它只*包含一个固定长度的整数数组，你可以像问题的第二部分一样传递一个固定长度的 VB6 长数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:04:23.853

如果结构定义为：

```
struct ddTableDeal {
    int data[ ITEM_COUNT ];
}; 
```

然后AFAIK你不能在`VB`使用数组时调用它，因为`C/C++`这个结构的大小是`sizeof(int)*ITEM_COUNT`（对于填充可能更大，但在`VB`数组中是动态的，将使用`SafeArrayCreate`or在堆中分配`SafeArrayCreateVector`，所以这些数组的大小总是固定的。我不太清楚`VB`，但是如果您可以按顺序创建结构`VB`并使用`ITEM_COUNT`( in ) `int`，它可能会起作用，但最好的解决方案是编写一个代理函数，从中获取变量，创建结构并调用原始函数，然后返回提供的结果缓冲！`Long``VB``C/C++``VB``VB`

# php - 如何检查MongoDB是否错误？

> ID：12964911
> 
> 赞同：1
> 
> 时间：2012-10-18T22:45:51.390
> 
> 标签：php, mongodb, error-handling

如何检查 MongoDB 是否存在错误？

```
var_dump($mongodb->lastError()); 
```

给了我一个空白页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:08:47.853

**[Mongo::lastError](http://php.undmedlibrary.org/manual/en/mongo.lasterror.php)** — 检查最近执行的数据库操作是否有错误

> **已弃用**

```
// NOT WORK!!
$mongo = new Mongo();
var_dump($mongo->lastError()); 
```

您只会看到一个**空白页面**`off`，因为您在 PHP 配置中打开了错误报告。

* * *

**[MongoDB::lastError](http://www.php.net/manual/en/mongodb.lasterror.php)** — 检查最近执行的数据库操作是否有错误

> 你需要**MongoDB**类

```
// WORK!!
$mongo = new Mongo();
$db    = $mongo->database;
var_dump($db->lastError()); 
```

# java - 在 Java 代码中获取编译错误以在谷歌驱动器上上传 txt 文件

> ID：12964913
> 
> 赞同：0
> 
> 时间：2012-10-18T22:45:56.583
> 
> 标签：java, google-drive-api

我正在尝试执行示例 java 代码以将文件上传到[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)提供的谷歌驱动器。我已经下载了 jar 文件并将它们放在类路径中，还获得了客户端 ID 和客户端秘密。我收到以下错误。

```
E:\>javac -classpath /path/to/google/lib/*:/path/to/google/lib/libs/* DriveCommandLine.java 
```

DriveCommandLine.java:1: com.google.api.client.googleapis.auth.oauth2 包不存在 import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow; ^ DriveCommandLine.java:2：com.google.api.client.googleapis.auth.oauth2 包不存在导入 com.google.api.client.googleapis.auth.oauth2.GoogleCredential；^ DriveCommandLine.java:3：com.google.api.client.googleapis.auth.oauth2 包不存在导入 com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse；^ DriveCommandLine.java:4: com.google.api.client.http 包不存在导入 com.google.api.client.http.FileContent；^ DriveCommandLine.java:5：包 com。google.api.client.http 不存在导入 com.google.api.client.http.HttpTransport；^ DriveCommandLine.java:6: com.google.api.client.http.javanet 包不存在导入 com.google.api.client.http.javanet.NetHttpTransport；^ DriveCommandLine.java:7: com.google.api.client.json 包不存在导入 com.google.api.client.json.JsonFactory；^ DriveCommandLine.java:8: com.google.api.client.json.jackson 包不存在导入 com.google.api.client.json.jackson.JacksonFactory；^ DriveCommandLine.java:9: com.google.api.services.drive 包不存在导入 com.google.api.services.drive.Drive；^ DriveCommandLine.java:10：包 com.google.api。services.drive 不存在导入 com.google.api.services.drive.DriveScopes；^ DriveCommandLine.java:11: com.google.api.services.drive.model 包不存在导入 com.google.api.services.drive.model.File；^ DriveCommandLine.java:27：找不到符号符号：类 HttpTransport 位置：类 DriveCommandLine HttpTransport httpTransport = new NetHttpTransport(); ^ DriveCommandLine.java:27：找不到符号符号：类 NetHttpTransport 位置：类 DriveCommandLine HttpTransport httpTransport = new NetHttpTransport(); ^ DriveCommandLine.java:28：找不到符号符号：类 JsonFactory 位置：类 DriveCommandLine JsonFactory jsonFactory = new JacksonFactory(); ^ 驱动命令行。java:28: 找不到符号符号：JacksonFactory 类位置：DriveCommandLine JsonFactory 类 jsonFactory = new JacksonFactory(); ^ DriveCommandLine.java:30：找不到符号符号：类 GoogleAuthorizationCodeFlow 位置：类 DriveCommandLine GoogleAuthorizationCodeFlow 流 = 新 GoogleAuthorizationCodeFlow.Builder（^ DriveCommandLine.java:30：包 GoogleAuthorizationCodeFlow 不存在 GoogleAuthorizationCodeFlow 流 = 新 GoogleAuthorizationCodeFlow.Builder（^ DriveCommandLine.java ：31：找不到符号符号：变量DriveScopes位置：类DriveCommandLine httpTransport，jsonFactory，CLIENT_ID，CLIENT_SECRET，Arrays.asList（DriveScopes。DRIVE)) ^ DriveCommandLine.java:41：找不到符号符号：类 GoogleTokenResponse 位置：类 DriveCommandLine GoogleTokenResponse 响应 = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute(); ^ DriveCommandLine.java:42：找不到符号符号：类 GoogleCredential 位置：类 DriveCommandLine GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response); ^ DriveCommandLine.java:42：找不到符号符号：类 GoogleCredential 位置：类 DriveCommandLine GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response); ^ DriveCommandLine.java:45：找不到符号符号：类驱动器位置：类 DriveCommandLine Drive service = new Drive.Builder(httpTransport, jsonFactory, credential).build(); ^ DriveCommandLine.java:45: 包 Drive 不存在 Drive service = new Drive.Builder(httpTransport, jsonFactory, credential).build(); ^ DriveCommandLine.java:48：找不到符号符号：类文件位置：类 DriveCommandLine 文件主体 = 新文件（）；^ DriveCommandLine.java:48：找不到符号符号：类文件位置：类 DriveCommandLine 文件主体 = 新文件（）；^ DriveCommandLine.java:54：找不到符号符号：类 FileContent 位置：类 DriveCommandLine FileContent mediaContent = new FileContent("text/plain", fileContent); ^ DriveCommandLine.java:54：找不到符号符号：类文件内容位置：类 DriveCommandLine FileContent mediaContent = new FileContent("text/plain", fileContent); ^ DriveCommandLine.java:56：找不到符号符号：类文件位置：类 DriveCommandLine 文件文件 = service.files().insert(body, mediaContent).execute(); ^ 28 个错误

谢谢。

# java - 如何在 Java 迭代器中使用 ExecutorService 而不冒资源泄漏的风险

> ID：12964915
> 
> 赞同：1
> 
> 时间：2012-10-18T22:46:06.303
> 
> 标签：java, concurrency, executorservice, resource-leak

我有一个 Java 迭代器，它列出了来自远程位置的项目。项目列表以“页面”形式出现，“获取下一页”操作相当缓慢。（具体来说，我的迭代器被调用`S3Find`并列出了来自 Amazon S3 的对象）。

所以，为了加快速度，我想预取一个列表页面。为此，我使用了一个`ExecutorService`和一个`Callable`/`Future`模式来预取项目的“页面”。问题是，该迭代器的调用者可能随时放弃操作，而不通知我的班级。例如，考虑以下循环：

```
for (S3URL f : new S3Find(topdir).withRecurse(true)) {
    // do something with f
    if (some_condition) break;
} 
```

结果，a 有资源泄漏，因为即使没有更多对包含的引用（并且即使下一次预取已经完成）`ExecutorService`，我用来提交的那个仍然保持活动状态并运行。`Callable``S3Find`

处理这个问题的正确方法是什么？我使用了错误的方法吗？我是否应该`ExecutorService`为每个预取放弃并使用一个新的裸线程（并在预取完成时终止线程）？请注意，每次获取页面大约需要 500 毫秒，因此相比之下，每次创建一个新线程可能可以忽略不计。**我不想要**的一件事是要求调用者明确告知`S3Find`他们已经完成迭代（因为它肯定会被某些人忘记）。

这是当前的预取代码（内部`S3Find`）：

```
/**
 * This class holds one ObjectListing (one "page"), and also pre-fetches
 * the next page using a {@link S3Find#NextPageGetter} Callable on a
 * separate thread.
 */
private static class Pager {
    private final AmazonS3 s3;
    private ObjectListing currentList;
    private Future<ObjectListing> future;
    private final ExecutorService exec;
    public Pager(AmazonS3 s3, ListObjectsRequest request) {
        this.s3 = s3;
        currentList = s3.listObjects(request);
        exec = Executors.newSingleThreadExecutor();
        future = submitPrefetch();
    }
    public ObjectListing getCurrentPage() {
        return currentList;
    }
    /**
     * Move currentList to the next page, and returns it.
     */
    public ObjectListing getNextPage() {
        if (future == null) return null;
        try {
            currentList = future.get();
            future = submitPrefetch();
        } catch (InterruptedException|ExecutionException e) {
            e.printStackTrace();
        }
        return currentList;
    }
    private Future<ObjectListing> submitPrefetch() {
        if (currentList == null || !currentList.isTruncated()) {
            exec.shutdown();
            return null;
        } else {
            NextPageGetter worker = new NextPageGetter(s3, currentList);
            return exec.submit(worker);
        }
    }
}

/**
 * This class retrieves the "next page" of a truncated ObjectListing.
 * It is meant to be called in a Callable/Future pattern.
 */
private static class NextPageGetter implements Callable<ObjectListing> {
    private final ObjectListing currentList;
    private final AmazonS3 s3;

    public NextPageGetter(AmazonS3 s3, ObjectListing currentList) {
        super();
        this.s3 = s3;
        this.currentList = currentList;
        if (currentList == null || !currentList.isTruncated()) {
            throw new IllegalArgumentException(currentList==null ?
                        "null List" : "List is not truncated");
        }
    }

    @Override
    public ObjectListing call() throws Exception {
        ObjectListing nextList = s3.listNextBatchOfObjects(currentList);
        return nextList;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:51:36.443

这是我遇到过几次的经典问题。数据库连接发生在我身上。

> 我是否应该放弃 ExecutorService 并为每个预取使用一个新的裸线程（并在预取完成时终止线程）？

我想这是你唯一的选择。我不会费心杀死线程。让它完成它的工作并在后台死去。为下一页创建一个新线程。您需要加入线程并使用某种通用（或其他东西）在调用者和线程`AtomicReference`之间共享结果列表。`S3Find`

> 我不想要的一件事是要求调用者明确通知 S3Find 他们已经完成迭代（因为它肯定会被某些人忘记）。

如果调用者在 try/finally 中调用某种方法，我看不出有任何简单的方法可以“正确”地做到这一点*。*`close()`您不能以某种方式在 Javadocs 中明确说明这一点吗？这就是我在我的[ORMLite 数据库迭代器](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#iterator%28%29)中所做的。

```
S3Find s3Find = new S3Find(topdir).withRecurse(true);
try {
    for (S3URL f : s3Find) {
        ...
    }
} finally {
    s3Find.close();
} 
```

然后在`S3Find.close()`：

```
public void close() {
    exec.shutdown();
} 
```

在 Java 7 中，他们添加了[try with resources 构造](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，该语言会自动关闭任何`Closeable`资源。这是一个很大的胜利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:06:50.200

我想我现在有一个解决方案，在使用上面讨论的裸线程时，它非常简单并且非常接近初始版本。它仍然利用了 nice`Callable`模式，但是使用 a`FutureTask`而不是 a `Future`，并且根本没有`ExecutorService`。

我之前错过的关键是`FutureTask`扩展`Runnable`，您实际上可以通过`new Thread(task)`. 换句话说：

```
NextPageGetter worker = new NextPageGetter(s3, currentList);
FutureTask<ObjectListing> future = new FutureTask<>(worker);
new Thread(future).start(); 
```

然后：

```
currentList = future.get(); 
```

现在，无论迭代器是否耗尽，所有资源都被愉快地处理掉了。事实上，线程一`FutureTask`完成就消失了。

为了完整起见，这里是修改后的代码（仅`class Pager`已更改）：

```
/**
 * This class holds one ObjectListing (one "page"), and also pre-fetches the next page
 * using a {@link S3Find#NextPageGetter} Callable on a separate thread.
 */
private static class Pager {
    private final AmazonS3 s3;
    private ObjectListing currentList;
    private FutureTask<ObjectListing> future;
    public Pager(AmazonS3 s3, ListObjectsRequest request) {
        this.s3 = s3;
        currentList = s3.listObjects(request);
        future = submitPrefetch();
    }
    public ObjectListing getCurrentPage() {
        return currentList;
    }
    /**
     * Move currentList to the next page, and returns it.
     */
    public ObjectListing getNextPage() {
        if (future == null) return null;
        try {
            currentList = future.get();
            future = submitPrefetch();
        } catch (InterruptedException|ExecutionException e) {
            e.printStackTrace();
        }
        return currentList;
    }
    private FutureTask<ObjectListing> submitPrefetch() {
        if (currentList == null || !currentList.isTruncated()) {
            return null;
        } else {
            NextPageGetter worker = new NextPageGetter(s3, currentList);
            FutureTask<ObjectListing> f = new FutureTask<>(worker);
            new Thread(f).start();
            return f;
        }
    }
} 
```

# xslt - xslt计算相同内容的不同内容

> ID：12964917
> 
> 赞同：3
> 
> 时间：2012-10-18T22:46:20.360
> 
> 标签：xslt, xslt-1.0

刚开始学习xslt。只是想知道如何计算国际玩家的数量？另一件事是国际球员的平均身高？

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="soccer.xslt"?>

    <footballclub>
        <player>
            <based>international</based>
            <height>5.5</height >
            <build>medium</build>
            <age>24</age>
        </player>
        <player>
            <based>local</based>
            <height>5.5</height >
            <build>medium</build>
            <age>24</age>
        </player>
        <player>
            <based>international</based>
            <height>5.5</height >
            <build>medium</build>
            <age>24</age>
        </player>
        <player>
            <based>local</based>
            <height>5.5</height >
            <build>medium</build>
            <age>24</age>
        </player>
    </footballclub> 
```

尝试了以下方法；

count(//足球/球员/基于[not(following::based='international')]) xslt:

```
<?xml version='1.0' encoding="utf-8"?>
<xsl:stylesheet version='1.0' xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" version="4.0" />

<xsl:template match="/">
 <html>
 <head >
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
<title>bombers FC</title>
</head>
<body>
NUMBER OF INTERNATIONAL PLAYERS IS:<xsl:value-of select="count(//football/player/based[not(following::based='international')])"/>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

结果应为：国际球员人数为：2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:10:50.187

您的 XPath 需要稍作更改...

**XML 输入**（更正为格式正确）

```
<footballclub>
    <player>
        <based>international</based>
        <height>5.5</height>
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>5.5</height>
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>international</based>
        <height>5.5</height>
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>5.5</height>
        <build>medium</build>
        <age>24</age>
    </player>
</footballclub> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" version="4.0"/>

    <xsl:template match="/">
        <html>
            <head>
                <title>bombers FC</title>
            </head>
            <body>
                <p>
                    <xsl:text>NUMBER OF INTERNATIONAL PLAYERS IS: </xsl:text>
                    <xsl:value-of select="count(footballclub/player[based='international'])"/>
                </p>
                <p>
                    <xsl:text>AVERAGE HEIGHT OF INTERNATIONAL PLAYERS IS: </xsl:text>
                    <xsl:value-of select="sum(footballclub/player[based='international']/height) div count(footballclub/player[based='international'])"/>
                </p>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

**输出**

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <title>bombers FC</title>
   </head>
   <body>
      <p>NUMBER OF INTERNATIONAL PLAYERS IS: 2</p>
      <p>AVERAGE HEIGHT OF INTERNATIONAL PLAYERS IS: 5.375</p>
   </body>
</html> 
```

# php - 如何使用 Zend Service 亚马逊？

> ID：12964921
> 
> 赞同：4
> 
> 时间：2012-10-18T22:46:44.040
> 
> 标签：php, codeigniter, zend-framework, amazon, zend-framework2

我一直在做很多挖掘工作，结果头疼得厉害，但没有成功。我正在尝试使用 Zend Amazon 服务（在我的**Codeigniter**框架内）使用其 ISBN 获取有关书籍的信息。我最初使用 Zend 1.12 进行了尝试，但我不断收到有关缺少参数 AssociateTag 的错误。我现在正在尝试使用 Zend 2.0，但仍然遇到问题。

这是我在控制器中使用的代码：

```
 set_include_path(get_include_path() . PATH_SEPARATOR . 'site/libraries');
    require_once 'Zend2/Loader/StandardAutoloader.php';
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $amazon = new Zend_Service_Amazon('[apikey]', 'US', '[secretkey]');
    $item = $amazon->itemLookup('B0000A432X'); 
```

我收到以下错误：

> 致命错误：找不到类“Zend_Loader_Autoloader”。

我的问题是：

*   如何加载正确的自动装载机？
*   在参数中的何处包含关联标签？过时的zend用户指南中没有提到它
*   Zend 2.0 甚至似乎没有亚马逊服务文件甚至 /service 文件夹。这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T00:49:56.587

**注意：** zendservice-amazon 附带的演示不能按原样工作。请求*必须*包含您的 App ID、密钥和关联标签，演示脚本默认情况下不这样做。我花了一段时间才弄明白，如果没有这些，所有查询都会抛出一个异常，说 HTTP 响应状态为 400。不幸的是，该异常没有说明缺少哪些参数的响应正文。

这里有一些代码可以帮助您开始使用 ZF2 和`ZendService\Amazon`.

首先，让我概述一下我将在此示例中放置文件的目录结构：

```
testing
|-Zend
|---Crypt
|---Escaper
|---Http 
|---I18n
|---Loader
|----+AutoloaderFactory.php
|----+... more files
|----+StandardAutoloader.php
|-----Exception
|---Stdlib
|---Uri
|---Validator
|-ZendRest
|-ZendService
|---Amazon
|-----Authentication
|-------Exception
|-----Ec2
|-------Exception
|-----Exception
|-----S3
|-------Exception
|-----SimpleDb
|-------Exception
|-----Sqs
|-------Exception
|----+AbstractAmazon.php
|----+...more files
|----+SimilarProduct.php
|-+test.php 
```

要点是我创建了一个名为的目录`testing`，我们将在其中放置 ZF2 自动加载器以及 Amazon 类及其依赖项。正在测试的是一个`Zend`包含自动加载器的文件夹（在 中`Loader`）以及服务`ZendService`所在的文件夹`Amazon`。

首先，我们需要从 ZF2 获取自动加载器的副本。您遇到问题的部分原因是因为您使用的是与 ZF2 不兼容的 ZF1 自动装载机。要从 ZF2 获取 Autoloader，您可以[下载](http://framework.zend.com/downloads/latest#ZF2)最新的 ZF2 包并将`Loader`目录从目录复制`ZendFramework-2.0.x/library/Zend/`到`Zend`我们在`testing`目录中创建的文件夹中。

现在我们有了自动加载器文件，让我们获取 Amazon 服务文件。关于如何使用 Composer 获取最新包我会写一个详细的答案，但现在我将解释如何手动获取它。要获取可用 ZF2 包的完整列表，请在[http://packages.zendframework.com/packages.json](http://packages.zendframework.com/packages.json)加载 JSON 文件， 在其中找到 ，`zendframework/zendservice-amazon`确定列表中可用的最高版本，并获取相应的 dist。*编辑*截至 2013 年 7 月 11 日，这是最新的[zendservice-amazon](https://github.com/zendframework/ZendService_Amazon/archive/master.zip)包。

从 中的`library`目录`ZendService_Amazon-2.0.2.zip`，将整个`ZendService`目录复制到`testing`目录中。您现在拥有 ZF2 Amazon 服务文件。

接下来，照顾依赖关系。从 ZF2 库中，将目录、、`Crypt`、`Escaper`、`Http`、`I18n`、`Json`和复制到.`Stdlib``Uri``Validator``Zend``testing`

您还需要[ZendRest](https://github.com/zendframework/ZendRest/archive/master.zip)包。将`ZendRest`文件夹从`library`ZendRest 包复制到`testing/ZendRest`.

现在来看一些代码。使用以下内容`test.php`在文件夹内创建：`testing`

```
<?php

require_once './Zend/Loader/StandardAutoloader.php';

$autoloader = new Zend\Loader\StandardAutoloader(array(
    'namespaces' => array(
        'Zend'        => dirname(__FILE__) . '/Zend',
        'ZendRest'    => dirname(__FILE__) . '/ZendRest',
        'ZendService' => dirname(__FILE__) . '/ZendService',
     ),
     'fallback_autoloader' => true));

$autoloader->register();

$tag       = 'prdesign-20'; // replace with your Amazon app ID
$appId     = '1JT2V3QNEHDAMKYR5F02'; // replace w/ your access key from https://portal.aws.amazon.com/gp/aws/securityCredentials
$secretKey = 'Qgjeiw39f8UNzjJgeerrgDs1a193du/v7djDAtn/x';

$query  = new ZendService\Amazon\Query($appId, 'US', $secretKey);
$query->Category('Books')->Keywords('PHP')->AssociateTag($tag);
$result = $query->search();

foreach($result as $item): ?>
<div class="item">
  <a href="<?php echo $item->DetailPageURL ?>" target="_blank"><?php echo $item->Title ?></a>
  by <?php if (is_array($item->Author)): ?>
  <?php echo implode(', ', $item->Author) ?>
  <?php else: ?>
  <?php echo $item->Author ?>
  <?php endif; ?>
</div>
<?php endforeach; ?> 
```

首先，我们来自ZF2`require_once`的类。`StandardAutoloader`一旦注册了自动加载器，这是您必须手动包含的唯一类。

接下来，我们创建一个新的自动加载器并传递一些选项。这告诉自动加载器在命名空间中的类`Zend`和`ZendService`所在的位置。我们告诉自动加载器它们位于当前目录的相应文件夹中。根据需要更改`dirname(__FILE__)`为正确的路径。该`fallback_autoloader`选项告诉自动加载器在`include_path`.

然后调用`$autoloader->register();`实际上注册了我们在 PHP 中设置的自动加载器。自动装载机的设置现已完成。

接下来的 3 行定义了 API 的一些必需参数。

接下来的 3 行很简单，我们现在创建一个新实例`ZendService\Amazon\Query`并传递我们的 Amazon 应用 ID 和密钥。然后，我们通过指定在 Books 中搜索`Category`并将 设置`Keywords`为 PHP 来构建查询。我们还添加了所需的 AssociateTag。最后，我们执行搜索。

我~~还没有使用过`ZendService\Amazon`，所以我~~无法提供有关使用该类的详细说明，但包含的演示脚本应该可以帮助您开始向 Amazon 发送基本查询并处理结果。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:11:01.440

我已将 Amazon AWS S3 存储桶与 Zend Framework 一起使用。一个简单的例子是将照片上传到亚马逊 AWS Bucket。在你的`application/config/application.ini`文件中

```
;AWSAccessKeyId= "AccessKey"
;AWSSecretKey= "SecretKey"
;AWSS3BucketName = "zoshare-images"
;AWSS3GetImageUrl = "http://[name].s3.amazonaws.com/[folder]/" 
```

假设您要将图像上传到存储桶，下面是控制器的示例代码

```
public function updateAction()
    {
if($_FILES["fuPic"]["size"] > 0 || $_FILES["fuPre"]["size"] > 0)
        {
            $config = Zend_Registry::get('config');

            $s3 = new Zend_Service_Amazon_S3($config['AWSAccessKeyId'],$config['AWSSecretKey']);

            $bucketName =  $config['AWSS3BucketName'];

            if($_FILES["fuPic"]["size"] == 0)
                unset($_FILES["fuPic"]);
            else if($_FILES["fuPre"]["size"] == 0)
                unset($_FILES["fuPre"]);

            $s3->removeObject($bucketName."/[folder]/".$campaignModel->getCampaignId().'_pic_'.$campaign_olddata->getPicture());
            $s3->removeObject($bucketName."/[folder]/".$campaignModel->getCampaignId().'_pre_'.$campaign_olddata->getPreview());

            if (isset($_FILES["fuPic"]))
            {
                $filename = $campaignModel->getCampaignId().'_pic_'.$_FILES["fuPic"]['name'];
                $s3->putObject($bucketName."/[folder]/".$filename, file_get_contents($_FILES["fuPic"]["tmp_name"]),
                    array(Zend_Service_Amazon_S3::S3_ACL_HEADER =>
                    Zend_Service_Amazon_S3::S3_ACL_PUBLIC_READ));
                $data['picture'] = $_FILES["fuPic"]['name'];
            }

            if (isset($_FILES["fuPre"]))
            {
                $filename = $campaignModel->getCampaignId().'_pre_'.$_FILES["fuPre"]['name'];
                $s3->putObject($bucketName."/[folder]/".$filename, file_get_contents($_FILES["fuPre"]["tmp_name"]),
                    array(Zend_Service_Amazon_S3::S3_ACL_HEADER =>
                    Zend_Service_Amazon_S3::S3_ACL_PUBLIC_READ));
                $data['preview'] = $_FILES["fuPre"]['name'];
            }
        }
} 
```

快乐编码！！！！

# c# - 如何在选择查询中添加 where 子句

> ID：12964922
> 
> 赞同：2
> 
> 时间：2012-10-18T22:46:51.373
> 
> 标签：c#, xml, linq, select, where

```
<PersVeh id="V0001" LocationRef="L0001" RatedDriverRef="D0001">
  <Manufacturer>FORD</Manufacturer> 
  <Model>TAURUS SE</Model> 
  <ModelYear>2007</ModelYear> 
  <VehBodyTypeCd>PP</VehBodyTypeCd> 
  <POLKRestraintDeviceCd>E</POLKRestraintDeviceCd> 
  <EstimatedAnnualDistance>
    <NumUnits>011200</NumUnits> 
  </EstimatedAnnualDistance>
  <VehIdentificationNumber>1FAFP53U37A160207</VehIdentificationNumber> 
  <VehSymbolCd>12</VehSymbolCd> 
  <VehRateGroupInfo>
    <RateGroup>16</RateGroup> 
    <CoverageCd>COMP</CoverageCd> 
  </VehRateGroupInfo>
  <VehRateGroupInfo>
    <RateGroup>21</RateGroup> 
    <CoverageCd>COLL</CoverageCd> 
  </VehRateGroupInfo> 
```

我是 Linq 的新手，我希望有人可以帮助我解决可能是或可能不是一个简单的问题。

对于上面的 xml 示例，我使用以下代码：

```
var result = from item in doc.Descendants(n + "PersVeh")
             where item.Attribute("id").Value == "V0001"
             select new
             {
                RatedDriverRef = (string)item.Attribute("RatedDriverRef"),
                LocationRef = (string)item.Attribute("LocationRef"),
                ModelYear = (string)item.Element(n + "ModelYear") ?? "9999",
                VehBodyTypeCd = (string)item.Element(n + "VehBodyTypeCd") ?? "XX",
                POLKRestraintDeviceCd = (string)item.Element(n + "POLKRestraintDeviceCd") ?? "0",
                EstimatedAnnualDistance = (string)item.Element(n + "EstimatedAnnualDistance").Element(n + "NumUnits") ?? "999999",
                VehIdentificationNumber = (string)item.Element(n + "VehIdentificationNumber") ?? "VIN not found",
                VehSymbolCd = (string)item.Element(n + "VehSymbolCd") ?? "00"
             }; 
```

我遇到的问题是**VehRateGroupInfo**节点。我需要根据**CoverageCd提取****RateGroup**编号。

 **换句话说，是这样的：

```
CompSymbol = item.Element(n + "VehRateGroupInfo").Element(n + "RateGroup").Value
             where item.Element(n + "VehRateGroupInfo").Element(n + "CoverageCd").Value == "COMP" 
```

是否可以在选择中执行此操作，还是我需要单独的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:39:22.903

这是一个带有查询语法的解决方案：

```
CompSymbol = (from vehRateGroup in item.Descendants(n + "VehRateGroupInfo")
              where vehRateGroup.Element(n + "CoverageCd").Value == "COMP"
              select vehRateGroup.Element(n + "RateGroup").Value).Single() 
```

这是具有方法语法的类似解决方案：

```
CompSymbol = item.Descendants(n + "VehRateGroupInfo")
                 .Single(x => x.Element(n + "CoverageCd").Value == "COMP")
                 .Element(n + "RateGroup").Value 
```**

# xml - Xalan 2.7.1 和 IIS 7 导致 HTML 截断

> ID：12964923
> 
> 赞同：1
> 
> 时间：2012-10-18T22:47:03.463
> 
> 标签：xml, tomcat, iis-7, xalan, ajp

我有一个相当棘手的问题，我对此进行了大量研究，但没有找到解决方案。

我有一个由 Tomcat servlet 组成的 Web 应用程序。Tomcat 在 Windows 2008 R2 服务器上运行，并使用 IIS 中的 Apache ISAPI Redirector 1.2.37 重定向到/来自 Tomcat（使用 ajp13）。

我的应用程序管理一个 XML 文件库。当客户端（浏览器）请求时，servlet 使用 XSL 将 XML 文件转换为 HTML。HTML 被传递回 IIS，然后返回到浏览器进行显示。Xalan 是用于 JAXP javax.xml.transform 的实现。这种架构已经运行了好几年。

最近，我们从 Xalan 2.7.0 升级到 2.7.1，发现在浏览器中查看某些 XML 文件的 HTML 被截断。

经过一些试错调查，以下是我们所知道的：

1.  仅当源 XML 文件 > ~1.7 MB 时才会发生截断。
2.  HTML 每次都在同一位置被截断。（缓冲区大小问题？？）
3.  我尝试将 Xalan 的输出直接重定向到一个文件……没有截断。
4.  仅当 Xalan 2.7.1 与 IIS 7 一起使用时才会发生截断

    Xalan 2.7.1 + IIS 7 = 截断

    Xalan 2.7.1 + IIS 6 = 没有截断

    Xalan 2.7.0 + IIS 7 = 没有截断

5.  ISAPI 重定向器日志包含以下消息：

    ```
    [error] isapi_write_client::jk_isapi_plugin.c (1250): WriteClient failed with 534 (0x00000216)      

    [info] ajp_process_callback::jk_ajp_common.c (1945): Writing to client aborted or client network problems

    [info] ajp_service::jk_ajp_common.c (2607): (ajp13w) sending request to tomcat failed (unrecoverable), because of client write error (attempt=1)

    [info] service::jk_lb_worker.c (1400): service failed, worker ajp13w is in local error state

    [info] service::jk_lb_worker.c (1419): unrecoverable error 200, request failed. Client failed in the middle of request, we can't recover to another instance.

    [info] HttpExtensionProc::jk_isapi_plugin.c (2257): service() failed because client aborted connection 
    ```

鉴于上述第 4 项和第 5 项，尚不清楚谁是罪魁祸首（IIS、重定向器、Xalan 或 Tomcat……或所有这些）。

任何建议将不胜感激。

# php - 在 Controller 构造函数中加载 CodeIgniter 模型

> ID：12964926
> 
> 赞同：4
> 
> 时间：2012-10-18T22:47:24.057
> 
> 标签：php, codeigniter

来自 C#/.NET MVC 3/4，我不太习惯 CodeIgniter 的模型实现。

该文档显示模型正在控制器方法中加载，但是我在几乎每个方法中都使用该模型，并且我的模型通过其构造函数将跨其方法使用的数据存储在属性中。

有什么理由不在我忽略的控制器构造函数中实例化模型吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T06:03:38.920

您也可以按照以下方式加载模型：意味着如果您的模型在任何文件夹中，那么使用以下代码您可以在控制器中加载模型。

```
$this->load->model('modelFolder/' . $this->controller . '_model'); 
```

例如。：如果您的模型在名为“ `modelFolder`”的文件夹中，请执行以下操作：

```
 class demoController extends CI_Controller {

        var $controller = "user";    

        /* Local Constructor Will Be Overriding The One In The Parent Controller Class So We Need To Manually Call It. */

        public function __construct() {
            parent::__construct();        
                $this->load->model('modelFolder/' . $this->controller . '_model');
                $this->load->model('common_model');         
              }
    } 
```

希望它会帮助你...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T22:49:28.037

没有理由不为每个控制器激活加载模型。它甚至可以放入所有控制器的[配置自动加载中。](http://codeigniter.com/user_guide/general/autoloader.html)

不总是加载它的唯一原因是如果许多操作不需要模型。然后你可以节省一点内存和时间。

# java - JSP 中的 URL 总是转到 localhost 并给出 HTTP 状态 404

> ID：12964927
> 
> 赞同：0
> 
> 时间：2012-10-18T22:47:29.173
> 
> 标签：java, http, jsp, tomcat, servlets

我正在使用 servlet 生成一个 html 页面，并在 java 中对 URL 进行编码以输出标准 href 并且它似乎在页面上输出正常，但是当我单击它时，我得到 HTTP 状态 404。

在我的 servlet 中，代码是：-

```
 out.write("<html>");
    out.write("<body>");
    out.write("<br/>");
    out.write("<a href=\"url\"" + "facebook.com" + "\">" + "facebook.com"
            + "</a>" + "<br/>");
            out.write("</body");
    out.write("</html>"); 
```

当我查看源代码时，它在生成的 html 页面中看起来很好。

```
 <html>
    <body>
    <br/>
    <a href="url"facebook.com">facebook.com</a>
    <br/> 
    </body>
    </html> 
```

但是，每次我单击它时，链接都会显示为 .http://localhost:8080/MyProject/url，当然这会转到 HTTP 状态 404 - /MyProject/url。

我可以做的任何事情来让它真正转到一个 URL，即 facebook.com

我使用 Tomcat 7 作为我的应用服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:50:05.133

做了

```
out.write("<a href='facebook.com'>facebook.com</a> <br/>"); 
```

从 servlet 生成视图是个坏主意，请改用 JSTL

# java - 如何在cmd中使用java程序作为命令？

> ID：12964928
> 
> 赞同：0
> 
> 时间：2012-10-18T22:47:50.797
> 
> 标签：java, batch-file, cmd

我有一个 Java 程序实用程序，我想在 cmd 中将其作为命令执行。我将位置添加到 PATH 变量中，但是需要使用 java - jar "..." 执行 java 程序。如何将其缩短为程序名称，如 mysql 或 netstat？

更新：我没有提到这个java程序需要自己的参数来处理它的任务，所以批处理程序需要通过java程序传递传递给它的参数。我在批量方面不够熟练，不知道如何做到这一点。

~雅各布

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T22:50:35.180

您可以创建一个批处理文件或 bash 脚本（取决于您的操作系统），使用正确的 java -jar 命令调用该程序，然后简单地将批处理（或 bash）脚本命名为您想作为命令输入的任何内容。将它放在 PATH 变量中的目录中，然后就可以了。

**编辑：**阅读[此](http://www.robvanderwoude.com/parameters.php)内容以获取有关如何在批处理脚本中解析命令行参数的信息。只需将传递给批处理文件的参数，解析它们，然后将它们传递给您的 jar 文件：

`java -jar jarfile.jar param1 param2 ...`

例如，让我们假设您的程序有两个参数。您的脚本可能如下所示：

```
java -jar jarfile.jar %1 %2 
```

无论如何，我都不是批处理文件方面的专家，所以可能有更合适的方法来做到这一点。话虽如此，为什么要把事情复杂化？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:50:49.953

使用[Launch4J](http://launch4j.sourceforge.net/index.html)，您可以将 Java 程序包装在独立的可执行文件中。我不打算在这里复制他们的（长）功能列表，但明确的亮点是提供了多种定制生成的 exe 的方法、它的小尺寸、它是开源的事实以及它允许​​商业使用的许可许可证。

# c# - 用 C# 制作完美的包装器

> ID：12964931
> 
> 赞同：-2
> 
> 时间：2012-10-18T22:47:57.147
> 
> 标签：c#

这是一个有点笼统的问题。假设我在 A.dll 中有一个类 X，B.dll 引用 A.dll，C.dll 引用 B.dll。

现在，我需要在 C.dll（消费者代码）中使用 X。所以我想做的是在 B.dll 中创建一个包装类 X1 并在消费者代码中使用它。那么问题来了？如何使 X1 成为（几乎）完美的 X 包装器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:52:14.143

如果您使用 X 或从 X 继承的类，.NET 要求您直接引用 A.dll。假设您不希望使用者 C.dll 直接引用 A.dll，有两种方法。如果你想完全隐藏 X，你应该创建一个真正的包装器（见下面的例子）。另一种方法是使用后期绑定（不推荐，但 C 只能通过间接程序集引用访问 X）。

### 使用静态类型的包装器（首选方法）

假设您想要一个包装器（而不仅仅是继承 X），我建议您只需创建一个手动包装器。即创建一个类 X1，它有一个类型为 X 的私有变量。通过调用 X 中的相应成员来实现 X 的所有公共函数和属性。如果您只需要 X 的包装器而不需要其他任何东西，这将起作用。通过这种方式，您可以从 B 中隐藏 X（我假设这就是您想要的）。

A.dll

```
public class X {
   public int A { get; set; }
   public bool DoSomething() {
      A++;
   }
} 
```

B.dll

```
public class X1 {
   private X X;
   X1() {
       X = new X();
   }
   public int A { get { return X.A; } set { X.A = value } }
   public bool DoSomething() {
      return X.DoSomething();
   }
} 
```

### 使用后期绑定（不需要手动包装器）

技术上不是包装器，但如果你想避免 A.dll 作为 C.dll 的直接引用

第三种选择不是包装 X，而是让 C.dll 使用 X 作为未知对象。此方法利用 C# 中的调用站点和“动态”对象。这允许 B.dll 返回真正的 X 而不必在编译时从 C.dll 显式引用它（假设您有充分的理由不这样做）。Microsoft 为来自 C.dll 的每个属性/函数调用创建所谓的“调用站点”，这样开销非常低。这使得 X 完美，因为它确实是 X。动态方法的好处是包装器将跟踪对 X 的任何更改。坏处是 C.dll 将具有运行时绑定（没有编译错误）。

```
public static class X1 {
   public static dynamic New() {
      return new X();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:59:14.087

我认为几乎没有简单的解决方案：我相信您正在计划洋葱层/架构。

1.  在“B”的 X1 中继承“C”的 X 类，然后在“A”中使用 X1。

2.  为“C”的 X 类在“B”的 X1 类中创建一个工厂方法，然后在“A”中使用它。

3.  在“B”的 X1 中创建“C”类 X 的对象并编写您想要的每个方法，然后从这些方法中将调用转发到原始类 X。

# sql - 奇怪的 SQL 结果

> ID：12964932
> 
> 赞同：2
> 
> 时间：2012-10-18T22:48:00.563
> 
> 标签：sql, tsql

所以我有以下查询

```
Select id, [First], [Last] , [Business] as contactbusiness, (Case When ([Business] != '' or [Business] is not null) 
        Then [Business] Else 'No Phone Number' END) from contacts 
```

结果看起来像

```
id  First   Last    contactbusiness (No column name)
2   John    Smith       
3   Sarah   Jane    0411 111 222    0411 111 222
6   John    Smith   0411 111 111    0411 111 111
8                   NULL            No Phone Number
11  Ryan    B       08 9999 9999    08 9999 9999
14  David   F       NULL            No Phone Number 
```

我希望记录 2 也显示没有电话号码

如果我将“[Business] is not null”更改为 [Business] != null 那么我会得到正确的结果

```
id  First   Last    contactbusiness (No column name)
2   John    Smith                   No Phone Number
3   Sarah   Jane    0411 111 222    0411 111 222
6   John    Smith   0411 111 111    0411 111 111
8                   NULL            No Phone Number
11  Ryan    B       08 9999 9999    08 9999 9999
14  David   F       NULL            No Phone Number 
```

通常你需要使用 is not null 而不是 != null。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:49:41.307

您需要使用`AND`，而不是`OR`在您的条件中：

```
[Business] != '' and [Business] is not null 
```

这很令人困惑，因为您使用的是底片。我只是翻转整个条件并使用正面（在这种情况下你会使用`OR`）：

```
(Case When ([Business] == '' or [Business] is null) 
    Then 'No Phone Number' Else [Business] END) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:50:50.360

你的逻辑是错误的。检查两个否定时，您需要使用**AND ：**

```
Case When ([Business] != '' AND [Business] is not null 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T22:58:10.490

如前所述，您的逻辑不正确。你可以使用

```
SELECT id, [First], [Last] , [Business] AS contactbusiness, 
    COALESCE(NULLIF([Business], ''), 'No Phone Number')
FROM contacts 
```

因为`SQL`那更简洁

为什么`If i change the "[Business] is not null" to [Business] != null then i get the correct results`起作用的原因是它`[Business] != null`总是错误的。

正如您所提到的，SQL 使用 is 运算符检查空值，并且空值的相等比较总是失败（用`select 'hi' where (null = null)`and进行实验`select 'hi' where (null != null)`）。使用您的 OR 语句和短路意味着：

1.  当电话号码在那里时，第一个条件`[Business] != ''`为真。所以 OR 语句为真并且使用了电话号码
2.  当第一个条件失败时，第二个条件`[Business] != null`也为假。所以 OR 语句为假，显示“无电话号码”

# php - 如何将动态返回的 html 内容放在另一个 html 文件中？

> ID：12964935
> 
> 赞同：-5
> 
> 时间：2012-10-18T22:48:06.287
> 
> 标签：php, javascript, html, yii

情况是这样的，我被要求使用由 yii 组成的动态站点的页眉和页脚到另一个托管在不同服务器/主机中的站点中。我在动态站点中创建了一个控制器和视图，现在问题是如何在其他站点中调用它来使用它，假设该站点是 html 或 php ？给定我创建的控制器和操作的示例 url

```
http://www.example.com/controller/display/header
http://www.example.com/controller/display/footer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:23:01.053

这在你的想法中是行不通的。如果它基于 PHP，则更是如此，因为您不会获得使页眉或页脚成为可能的 PHP 功能。由于 PHP 在调用时呈现服务器端。

如果它的静态 HTML 仅可能使用 cURL 访问文件并获取它的内容（同样，如果基于 php，则呈现 HTML），您可以。但除此之外，从浏览器端到远程服务器的服务器端有很多事情会阻碍你做我认为你想做的事情的能力，因为如果它是那么容易的人会劫持网站左和右..

从概念上讲，您可以在框架/iframe 中打开这些远程位置，但您无法控制那里的内容。我会说，如果您是相关网站的所有者或与其他网站所有者合作。然后你们两个应该想出一种将页脚/页眉内容传送到您的站点的方法，这不会破坏这么多策略并冒着严重的安全漏洞的风险。

总之，我无法想象你为什么不通过 HTML/CSS 的普通模板克隆外观/感觉。其他任何事情听起来都有些阴暗。

SomeKittens 提出了一个有效的观点。但我只想投入我的 2 美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:52:56.237

你仍然可以使用`include`over `http`，但你需要编辑你的 php.ini 来设置`allow_url_include=1`。

但是，为什么不能将文件复制到第二台服务器？像这样跨站点是相当粗鲁的，因为您将使用第一台服务器的带宽。

# ruby-on-rails - activemerchant 未定义方法“月”

> ID：12964939
> 
> 赞同：4
> 
> 时间：2012-10-18T22:48:31.823
> 
> 标签：ruby-on-rails, ruby, activemerchant

我正在构建一个应用程序来处理不同服务的不同类型的交易，例如订阅、礼物订阅和购买。

我对礼品交易和 activemerchant 有疑问。我将简要概述它的工作原理。

用户创建礼物订阅并为其填写数据，将其存储在数据库中，然后在自定义“show_view”中显示给用户以供查看，然后用户继续以单独的表格输入信用卡信息，当他提交数据时，会调用控制器中的一个方法来处理事务，这就是我遇到问题的地方。

这是 gift_subscription.rb 模型

```
 def gift_purchase
    response = GATEWAY.purchase(price, credit_card, gift_purchase_options)
    GiftTransaction.create!(:action => "gift_purchase", :amount => price, :response => response)
    response.success?
  end
  private
  def gift_purchase_options
    {
        :ip => ip_address,
        :billing_address => {
            :name     => name + last_name,
            :address1 => address1,
            :city     => city,
            :state    => state,
            :country  => "Mexico",
            :zip      => zip
        }
    }
  end

  def validate_card
    unless credit_card.valid?
      credit_card.errors.full_messages.each do |message|
        errors[:base] << message
      end
    end
  end

  def credit_card
    @credit_card = ActiveMerchant::Billing::CreditCard.new(
        :brand              => card_type,
        :number             => card_number,
        :verification_value => card_verification,
        :month              => card_expires_on.month,
        :year               => card_expires_on.year,
        :first_name         => name,
        :last_name          => last_name
    ) 
```

这是gift_subscription_controller.rb

```
def review
    @gift_subscription = GiftSubscription.find(params[:id])
  end

  def edit_review
    @gift_subscription = GiftSubscription.find(params[:id])
  end

  def update_review
  @gift_subscription = GiftSubscription.find(params[:id])

    respond_to do |format|
      if @gift_subscription.update_attributes(params[:gift_subscription])
        format.html { redirect_to "gift_subscriptions/review/#{@gift_subscription.id}", :notice => 'Gift subscription was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit_review" }
        format.json { render :json => @gift_subscription.errors, :status => :unprocessable_entity }
      end
    end
  end

  def do_gift_transaction
    @gift_subscription = GiftSubscription.find(params[:id])
    if @gift_subscription.gift_purchase
        redirect_to '/thank_you'
    else
        redirect_to "/gift_subscriptions/#{@gift_subscription.id}/failed_transaction"
    end
  end

  def failed_transaction
    @gift_subscription = GiftSubscription.find(params[:id])
    @gift_transactions = @gift_subscription.gift_transactions
  end

  def transaction_details
    @gift_subscription = GiftSubscription.find(params[:id])
  end 
```

为了让事情更清楚一点，从控制器的 create 方法中，它会将用户重定向到评论操作，其中有一个 edit_review 以防他们想要更改某些内容，然后他们转到 transaction_details 输入信用卡信息的地方，最后调用方法 do_gift_transaction实际进行交易。

我得到的错误如下

```
NoMethodError in GiftSubscriptionsController#do_gift_transaction

undefined method `month' for nil:NilClass
Rails.root: /home/peanut/RubymineProjects/GiftBox

Application Trace | Framework Trace | Full Trace
app/models/gift_subscription.rb:44:in `credit_card'
app/models/gift_subscription.rb:12:in `gift_purchase'
app/controllers/gift_subscriptions_controller.rb:113:in `do_gift_transaction' 
```

我一直在环顾四周，似乎无法找到为什么它不能识别月份...对于其他订阅，我的模型基本相同（有一些差异），但效果很好。在这里的任何帮助将不胜感激。

GiftSubscription 模型属性

```
attr_accessible :response, :name, :last_name, :address1, :address2,:city,
                  :state, :zip, :card_type, :ip_address, :price,
                  :duration, :created_at, :card_expires_on, :card_number,
                  :card_verification, :message

  has_one :gift_transactions, :class_name => "GiftTransaction"
  attr_accessor :card_number, :card_verification
  validate :validate_card, :on => :transaction_details 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:52:27.587

因此，经过几个小时的敲打，结果证明这很简单......在输入信用卡数据的视图中，应该保存到数据库的字段没有被保存，因为我只有一个 link_to 按钮在调用 credit_card 方法时继续并因此，它是空的。

感谢lander16 指出这一点。

# css - 当我解除引导警报时，如何摆脱整行？

> ID：12964941
> 
> 赞同：0
> 
> 时间：2012-10-18T22:48:45.100
> 
> 标签：css, twitter-bootstrap

我在行流体中有一个警报。看[我的小提琴](http://jsfiddle.net/D2RLR/2764/show/)。当我使用“x”按钮解除警报时，该行仍然可见。解雇时如何摆脱整行？我试过了：

```
data-dismiss="row-fluid" 
```

这不会让我关闭任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:48:26.090

我想不出一个不涉及一点 jQuery 的解决方案。如果你可以使用 jQuery，那么下面的解决方案就可以了。

将函数附加到隐藏行的单击事件。（我添加了“错误”类，以便我可以只选择该行）。

看到这个更新的小提琴：http: [//jsfiddle.net/D2RLR/2765/](http://jsfiddle.net/D2RLR/2765/)

```
<div class="container-fluid">
    <div class="row-fluid error" style="border:1px solid red;">
        <div class="span4">
            <div class="alert">
              <button type="button" class="close" data-dismiss="alert">×</button>
              <strong>Warning!</strong> Best check yo self, you're not looking too good.
            </div>
        </div>
    </div>

    <div class="row-fluid" style="border:1px solid red;">
        <div class="span12">
            this is some other content
        </div>
    </div>

</div>​
<script>
    $('.close').click(function(){
        $(".row-fluid.error").hide()
    });
</script> 
```

# css - 单击链接时更改选项表单元素的值

> ID：12964942
> 
> 赞同：0
> 
> 时间：2012-10-18T22:48:46.943
> 
> 标签：css, onclick, option

如果选项和链接不在同一个字段集中，我不确定这是否可能？

我有一个网格，上面有一个产品可用的 16 种色调的图片和名称。我还有一个带有颜色名称的“选择颜色”选项列表。

我希望名称链接到颜色，因此当您单击表格中一种颜色的图像时，它会将选项更改为适当的值。

我试图在 JS Fiddle 中复制我的代码，抱歉，它不是很清楚。我已将“海冬青”作为示例图像（所有其他图像都是本地图像）

是否可以仅使用 CSS 来实现这一点？

[JS小提琴](http://jsfiddle.net/fm6jG/1/)

[实时站点示例](http://www.rubytuesdaycreative.co.uk/testsite/snood.html)

我找到了以下代码，但我很难让它工作，也许这不是我在这种情况下需要的？

```
<form>
      <select id="action">
         <option value="a">Add</option>
         <option value="b">Delete</option>
      </select>
 </form>

<a href="#" onClick="document.getElementById('action').value='a'">Add</a> 
<a href="#" onClick="document.getElementById('action').value='b'">Delete</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:01:45.100

你可以像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/fm6jG/4/)**（使用 jQuery）那样做。

```
$('img').click(function() {
    var item = $(this).attr('src').split('/').pop().split('.')[0];
    $('select.item_colour option').each(function() {
        if ($(this).val().toLowerCase() == item) $(this).prop('selected', true);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:53:41.743

您必须使用 selectedIndex 来修改当前选择的选项：

```
<a href="#" onClick="document.getElementById('action').selectedIndex=0">Add</a>
<a href="#" onClick="document.getElementById('action').selectedIndex=1">Add</a> 
```

如果您可以避免内联javascript，它会更干净：

的HTML：

添加删除

添加删除

然后你的脚本：

```
window.onload = function (){ // make sure the content is loaded
   var addBtn = document.getElementById("addBtn");
   var delBtn = document.getElementById("deleteBtn");
   var selTag = document.getElementById("action");

   addBtn.onclick = function () {
       selTag.selectedIndex = 0;
       return false;
   }
   delBtn.onclick = function () {
       selTag.selectedIndex = 1;
       return false;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:04:11.833

这是一个更新的小提琴，改进了标记和您需要的功能。

[http://jsfiddle.net/fm6jG/5/](http://jsfiddle.net/fm6jG/5/)

**标记**

```
<div id="colourList">
    <a href="#">
        <img src="" />
        <span>Red</span>
    </a>
    <a href="#">
        <img src="" />
        <span>Seaholly</span>
    </a>
    <a href="#">
        <img src="" />
        <span>Earth</span>
    </a>
    <a href="#">
        <img src="" />
        <span>Sage</span>
    </a>
</div>
<form>
    <label>Choose colour:</label><br />
    <select class="item_colour">
    <option value="Red">Red</option>
    <option value="Seaholly">Seaholly</option>
    <option value="Sage">Sage</option>
    <option value="Earth">Earth</option>
    <option value="Spice">Spice</option>
    <option value="Jet">Jet</option>
    <option value="Tarmac">Tarmac</option>
    <option value="Denim">Denim</option>
    <option value="Cream">Cream</option>
    <option value="Parchment">Parchment</option>
    <option value="Teal">Teal</option>
    <option value="Damson">Damson</option>
    <option value="Moorland">Moorland</option>
    <option value="Forest">Forest</option>
    <option value="Amethyst">Amethyst</option>
    <option value="Burgundy">Burgundy</option>
    </select>
</form> 
```

**jQuery**

```
var $itemColourList = $(".item_colour");
$("#colourList a").click(function(e) {
    e.preventDefault();
    var colourName = $(this).children("span").text();
    $itemColourList.val(colourName);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T23:16:52.540

我已经花时间为您的网站调整代码，只需将以下 javascript 粘贴到`<body>`您的网站中：

```
<script type="text/javascript">
$(document).ready(function() {
   $('#colourList img').wrap('<a href="javascript:void(0)" class="imgcolor" />');
   $('.imgcolor').bind('click', function(e) {
      e.preventdefault();
      ind = $(this).parent().parent().index();
      tx = $(this).parent().parent().parent().next().find('td:eq('+ind+')').text();
      ind = $(".item_colour option[value='"+tx+"']").index();
      $(".item_colour").selectedIndex = ind;
   });
});
</script> 
```

这应该可以满足您的需求，它还将您的所有图像包装在`<a>`元素中，以便它们显示为可点击。它从表格单元格中检索颜色名称，而不是作为其他解决方案的文件名。

# web-services - WSO2 ESB - 如何构建soapenv：远程服务调用的主体

> ID：12964943
> 
> 赞同：1
> 
> 时间：2012-10-18T22:48:57.427
> 
> 标签：web-services, soap, wso2, wso2esb

我有我需要从 WSO2 ESB 中的代理服务调用的远程 Web 服务的 WSDL 文件，我想知道我是否需要通过 XSLT/Enrich 手动构造soap:Body 的元素，或者有一种方法可以生成soapenv:Body 包含来自 WSDL 并且可能替换 '?' 为价值观。

例如，如果您在知道将 WSDL 文件导入项目时使用soapUI 之前会自动生成soapenv:Envelope，其中包含所有XML 元素及其值的问号。WSO2 ESB 中的 TryIt 工具也是如此。

以下是导入 WSDL 后在 soapUI 中自动生成的 soapenv:Envelope 示例：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:abc="http://abc.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <abc:RegisterCandidate>
         <abc:NameFirst>?</abc:NameFirst>
         <abc:NameMiddle>?</abc:NameMiddle>
         <abc:NameLast>?</abc:NameLast>
         <abc:PhoneHome>?</abc:PhoneHome>
         <abc:EmailAddress>?</abc:EmailAddress>
         <abc:Address1>?</abc:Address1>
         <abc:Address2>?</abc:Address2>
         <abc:City>?</abc:City>
         <abc:State>?</abc:State>
         <abc:ZipCode>?</abc:ZipCode>
         <abc:Country>?</abc:Country>
      </abc:RegisterCandidate>
   </soapenv:Body>
</soapenv:Envelope> 
```

这在代理服务中是否可能通过任何可用于读取 WSDL 并生成带有 XML 标记的 soapenv:Body 的中介（在上面的代码中它是 abc:RegisterCandidate 及其子级）？我已经使用 XSL 模板完成了它，但它是手动的并且不是很优雅。

我在网上找到了几篇关于在 WSO2 ESB 中编写调用远程 Web 服务的代理服务的文章/博客，以及开发人员在其中所做的工作是使用 XSL 模板在 soapenv:Body 中插入所需的 XML 元素拥有正确/完整的 SOAP 消息，然后将其发送（发送中介）到远程 Web 服务服务器。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:57:27.557

无法按照您的要求从远程服务的 wsdl 生成肥皂正文。但是有一种比使用 xslt 更简单的方法。那就是使用[payload factory mediator](http://docs.wso2.org/wiki/pages/viewpage.action?pageId=14287837)。您可以使用 xpath 定义有效负载并分配值，如示例中所示。

# javascript - 如何在 Jasmine.js 中使用带有 toHaveBeenCalledWith 的间谍和可变数组？

> ID：12964956
> 
> 赞同：12
> 
> 时间：2012-10-18T22:50:42.387
> 
> 标签：javascript, unit-testing, jasmine

我有一些代码以数组作为单个参数调用回调函数。调用回调后，代码更改数组内容。它类似于此代码：

```
function myCode( callback ) {
    var someArray = [ 1, 2, 3, 4 ];
    callback( someArray );

    // change someArray in arbitrary ways
    someArray.splice( 2 );
    ...
} 
```

现在，我想验证是否使用正确的数组内容调用了回调。使用 Jasmine.js 我会这样写我的规范：

```
describe( "My code", function() {
    var callback;

    beforeEach( function() {
        callback = jasmine.createSpy( "My callback" );
        myCode( callback );
    });

    it( "calls the callback and passes the correct array", function() {
        expect( callback ).toHaveBeenCalledWith( [ 1, 2, 3, 4 ] );
    });
}); 
```

这失败了。问题是，Jasmine.js 记录了数组但没有复制它。由于调用后数组发生了变化，因此 expect()-Line 失败，即使实际调用满足了期望。可变对象也会出现同样的问题。

我怎样才能测试这样的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-20T13:27:07.960

`arguments`Jasmine 确实将传递给间谍的浅拷贝，这意味着该`arguments`对象将引用与它被调用的相同对象（在您的情况下 `arguments`将`someArray`仅引用 object.

spy 实现的 Jasmine 代码参考：

```
 spy = function() {
    callTracker.track({
      object: this,
      args: Array.prototype.slice.apply(arguments)
    });
    return spyStrategy.exec.apply(this, arguments);
  }; 
```

数组 () 的深拷贝`arguments`不可能作为通用解决方案，问题在[链接](https://stackoverflow.com/a/597726/3037143)中进行了解释。

您的问题的解决方案可能是为您的特定用例编写自己的回调和匹配器，您知道您必须准确复制（克隆）什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:47:17.540

有时如果你的单元测试很难正确，它告诉你代码需要更加统一，并且可能有一些方法有太多的责任。看起来`myCode`正在做一些不同的事情：应用`callback`到某个数组，然后修改该数组。也许修改数组的代码可以提取到它自己的`myCode`调用方法中。然后，您可以简单地在单元测试中删除该额外方法，以确保使用正确的参数调用回调。

# url - Zend Framework 2 (ZF2) - PHPUnit 和 $this->url()->toRoute() 不起作用

> ID：12964964
> 
> 赞同：2
> 
> 时间：2012-10-18T22:52:29.517
> 
> 标签：url, frameworks, zend-framework2, phpunit

我正在阅读 ZF 2 (http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html) 并且我已经编写了一个控制器测试，但我已经有一个编纂的动作在我的控制器中，如果没有输入 ID，它会将用户定向到 indexAction，使用 PHPUnit 执行测试取决于我如何执行重定向示例：

```
// Does not Work
return $ this-> redirect () -> toRoute ('my_route', array ('action' => 'index')); 
```

返回以下错误消息：

> TopAcl\Controller\MY_CONTROLLER_ControllerTest :: testEditarActionCanBeAcessed Zend\Mvc\Router\Exception\RuntimeException: 找不到名为“my_route”的路由

```
// Works correctly
return $ this-> redirect () -> toUrl ('/ resource'); 
```

我在互联网上没有找到任何关于它的信息，有什么解释吗？我需要更多的加载文件吗？

```
// Follow the setUp of my ControllerTest:
protected function setUp ()
{
    $ bootstrap = \Zend\Mvc\Application :: init (include 'config/application.config.php');
    $ this-> controller = new ResourceController ();
    $ this-> request = new Request ();
    $ this-> routeMatch = new RouteMatch (array ('controller' => 'index'));
    $ this-> event = $ bootstrap-> getMvcEvent ();
    $ this-> event-> setRouteMatch ($ this-> routeMatch);
    $ this-> controller-> SetEvent ($ this-> event);
    $ this-> controller-> setEventManager ($ bootstrap-> getEventManager ());
    $ this-> controller-> setServiceLocator ($ bootstrap-> getServiceManager ());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:43:31.597

我认为这是问题所在：

> toRoute ('my_route', array ('action' => 'index')

我希望在 module/Application/config/module.config.php 中看到配置的路由，最好将配置保留在代码之外

```
return array(
'router' => array(
    'routes' => array(
        'my_route' => array(
            'type' => 'Literal',
            ..... 
```

# asp.net - 从后面的代码访问动态生成的控件

> ID：12964965
> 
> 赞同：1
> 
> 时间：2012-10-18T22:52:32.730
> 
> 标签：asp.net, postback, dynamic-controls

我加载了一段 html，其中包含以下内容：

```
 <em> < input type="text" value="Untitled" name="ViewTitle" id="ViewTitle" runat="server"> </em> 
```

进入我的掌控之中。html 是用户定义的，请不要让我在 aspx 页面上静态添加它们。

在我的页面上，我有一个占位符，我可以使用

```
LiteralControl target = new LiteralControl ();

// html string contains user-defined controls
target.text = htmlstring 
```

渲染它的属性。我的问题是，因为它是一个 html 片段，即使我知道输入框的 id，我也无法使用它访问它`FindControl("ViewTitle")`（它只会返回 null），因为它作为文本呈现到 Literal 控件中，并且所有输入控件都没有添加到容器的控件集合。我绝对可以使用`Request.Form["ViewTitle"]`它来访问它的值，但是我该如何设置它的值呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:02:20.257

您的过程是错误的，您正在使用属性向客户端呈现控件：`runat="server"`

此属性仅在控件由服务器处理时才有效，您只是*按原样呈现*

既然您的目标是添加一个`TextBox`（如果我错了，请纠正我），那么您为什么不`TextBox`向表单的控件集合添加一个新的呢？

像这样的东西：

```
protected void Page_Init(object sender, EventArgs e)
{
    var textbox = new TextBox { ID="myTextBoxID", Text="Some initial value" };

    this.myPlaceHolder.Controls.Add(textbox);
} 
```

并检索它：

```
var myDynamicTextBox = this.FindControl("myTextBoxID") as TextBox; 
```

[我已经创建了几个工作示例，它们在我的 GitHub 网站上在线，请随意浏览代码](https://github.com/jupaol/SO-Answers/tree/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/DynamicControls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:14:42.843

Jupaol 的方法是向页面添加动态控制的首选方法。

如果要插入字符串，可以使用[ParseControl](http://msdn.microsoft.com/en-us/library/kz3ffe28.aspx)。

但是，它不会导致对某些控件（例如 PlaceHolder）进行编译。

# wpf - 如何在一个控件中多次使用用户控件

> ID：12964966
> 
> 赞同：0
> 
> 时间：2012-10-18T22:52:38.660
> 
> 标签：wpf, xaml, user-controls

我创建了 WPF UserControl，现在可以输入一些信息我有主输入表单，我想在其中使用该 UserControl 的两个实例当我将 YserControl 添加为资源而不是尝试将其用作 ContrntControl 时抛出内容异常，通知该控件已经一个合乎逻辑的孩子。任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:15:12.340

您可以使用该`x:Shared`属性，以便每当引用资源时，都会创建一个新实例而不是共享它。

因此你可能有这样的事情：

```
<Window.Resources>
    <MyUserControl x:Key="MyControlKey" x:Shared="False" .... />
    ....
</Window.Resources> 
```

*   [http://msdn.microsoft.com/en-us/library/aa970778.aspx](http://msdn.microsoft.com/en-us/library/aa970778.aspx)

*   [http://www.wpfmentor.com/2009/01/how-to-ensure-new-instance-of-resource.html](http://www.wpfmentor.com/2009/01/how-to-ensure-new-instance-of-resource.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:56:54.510

我刚刚找到了不抛出异常的方法，但我想知道这是否是正确的解决方案

```
 <TaicoControl:WizardPage Title="Title1"
                                 BackButtonVisibility="Collapsed"
                                 CancelButtonVisibility="Collapsed"
                                 Description="Desctiption1"
                                 PageType="Interior">
            <ContentPresenter ContentTemplate="{StaticResource PersonEntryFormTemplate}" DataContext="{Binding Person}" />
        </TaicoControl:WizardPage>
        <TaicoControl:WizardPage Title="Title2"
                                 BackButtonVisibility="Collapsed"
                                 CancelButtonVisibility="Collapsed"
                                 Description="Description2"
                                 NextButtonVisibility="Collapsed"
                                 PageType="Interior">
            <ContentPresenter ContentTemplate="{StaticResource PersonEntryFormTemplate}" DataContext="{Binding Person.ContactPerson}" />
        </TaicoControl:WizardPage> 
```

# php - 使用 facebook php sdk 处理异常

> ID：12964976
> 
> 赞同：1
> 
> 时间：2012-10-18T22:53:40.630
> 
> 标签：php, facebook, exception, exception-handling, facebook-php-sdk

我注意到，当我的应用程序使用 php sdk for facebook 将图像上传到 facebook 相册时，sdk 偶尔会抛出错误。

我在测试中从 sdk 收到了几次错误...但是我输入了一个 try catch...

```
 try{
        $picID = $this->facebook->api('/'.$this->aid.'/photos','post',$photo_details);
        var_dump($picID);
    }catch(Exception $e){
        echo('exception caught '.var_dump($e));
    } 
```

并且正在尝试对其进行测试，但运气不好，错误不会再次发生。有人可以告诉我是否可以通过这种方式捕获异常吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T23:34:10.947

尝试：

```
try {
    $picID = $this->facebook->api('/'.$this->aid.'/photos','post',$photo_details);
} catch(CurlException $e) {
    echo('exception caught '.$e->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-25T14:09:48.503

真的不想恢复 2012 年的问题，但从那时起，对于现在正在研究它的任何人来说，情况都发生了变化。对于使用 Facebook SDK 5.xx 的现代代码，请使用代码...

```
try {
    //Do something with the facebook code here
catch (FacebookSDKException $e) {
    //Handle the exception here
    //This will only catch exceptions thrown by the SDK but will cover them all, even ones thrown by libraries called by the SDK.
} 
```

# java-me - 新的额外命令并且从未声明过？

> ID：12964978
> 
> 赞同：0
> 
> 时间：2012-10-18T22:53:45.973
> 
> 标签：java-me, midp, lcdui

我的问题出在这个 Java-Me 应用程序中：http: [//www.developer.nokia.com/Community/Wiki/Making_a_phone_call_programmatically_using_platformRequest ()_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/Making_a_phone_call_programmatically_using_platformRequest()_in_Java_ME)

此应用程序允许用户拨打插入到文本字段中的号码。

现在一切正常，没有错误，它可以安装在我的诺基亚 n8 上，但问题是：应用程序的命令菜单中有两个额外的命令“呼叫”和“从联系人添加”！命令是怎么来的？？？没有任何声明具有这些名称的命令！！！！

声明的命令是：“呼叫”（这是另一个）和“退出”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:42:17.263

当创建一个新的文本字段并将其文本输入设置为 PHONENUMBER 时，系统会自动生成一个新的命令“CAll”和“Add From Contacts”来帮助用户选择一个电话号码或拨打它！hhh 但这对我来说不太好，所以我用 NUMERIC 替换了 PHONENUMBER，现在可以了 :) 谢谢

# php - 它只在下拉菜单中显示一个选项

> ID：12964980
> 
> 赞同：0
> 
> 时间：2012-10-18T22:54:03.510
> 
> 标签：php, mysqli

我在下面有代码，用户在“课程”中键入，然后它将显示属于该特定课程的相关模块，然后它将显示属于所选模块的下拉菜单。

问题是它只在属于该模块的下拉菜单中显示一个会话，即使该特定模块下有许多会话。

例如下面是数据库“Session”表：

会话表：

```
SessionId SessionDate SessionTime ModuleId
AAA       2012-10-19  09:00:00    CHI2513
AFD       2012-10-29  10:00:00    CHI2513
TPP       2012-09-11  09:00:00    CHI2513
NUM       2012-05-03  11:00:00    CHI2513 
```

然后当用户从模块下拉菜单中选择模块“CHI2513”时，在会话下拉菜单中应该显示以下选项：

会话下拉菜单：

```
AAA       2012-10-19  09:00:00
AFD       2012-10-29  10:00:00
TPP       2012-09-11  09:00:00
NUM       2012-05-03  11:00:00 
```

但相反，它只在下拉菜单中显示一个会话，如下所示：

目前显示的会话下拉菜单：

```
TPP       2012-09-11  09:00:00 
```

那么如何在下拉菜单中显示与所选模块相关的所有会话？

下面是代码：

```
<?php
  if (isset($_POST['submit'])) {

    $query = "
             SELECT cm.CourseId, cm.ModuleId, 
             c.CourseName,
             m.ModuleName
             FROM Course c
             INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
             JOIN Module m ON cm.ModuleId = m.ModuleId
             WHERE
             (c.CourseId = ?)
             ORDER BY c.CourseName, m.ModuleId
            ";

$qrystmt=$mysqli->prepare($query);
// You only need to call bind_param once
$qrystmt->bind_param("s",$courseid);
// get result and assign variables (prefix with db)

$qrystmt->execute(); 

$qrystmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

 $qrystmt->store_result();

$num = $qrystmt->num_rows();

if($num ==0){
    echo "<p>Sorry, No Course was found with this Course ID '$courseid'</p>";
} else { 

    $dataArray = array();

 while ( $qrystmt->fetch() ) { 
      // data array
      $dataArray[$dbCourseId]['CourseName'] = $dbCourseName; 
      $dataArray[$dbCourseId]['Modules'][$dbModuleId]['ModuleName'] = $dbModuleName; 
       // session data
      $_SESSION['idcourse'] = $dbCourseId;
      $_SESSION['namecourse'] = $dbCourseName;

}

 foreach ($dataArray as $courseId => $courseData) {

      $output = ""; 

      $output .= "<p><strong>Course:</strong> " . $courseId .  " - "  . $courseData['CourseName'] . "</p>";

   $moduleHTML = ""; 
   $moduleHTML .= '<select name="modulesDrop" id="modulesDrop">'.PHP_EOL;
   $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;      
        foreach ($courseData['Modules'] as $moduleId => $moduleData) {        

        $moduleHTML .= "<option value='$moduleId'>" . $moduleId . " - " .   
    $moduleData['ModuleName'] ."</option>".PHP_EOL;        
  } 
        }
        $moduleHTML .= '</select>';

  echo $output;

    ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Module: <?php echo $moduleHTML; ?><input id="moduleSubmit" type="submit" value="Submit" name="modulesubmit" /></p>      
    </form> 

    <?php
}
}

$sessionnum = 0;

 if (isset($_POST['modulesubmit'])) {

     if($_REQUEST['modulesDrop']==''){

         echo "Please Select a Module from the Drop Down Menu Above";

     }
     else{  

 var_dump($_POST['modulesDrop']);

        $sessionquery = "
             SELECT SessionId, SessionDate, SessionTime, ModuleId
             FROM Session
             WHERE
             (ModuleId = ?)
             ORDER BY SessionDate, SessionTime 
            ";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("s",$_POST['modulesDrop']);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId);

 $sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

    $dataArraySession = array();

 while ( $sessionqrystmt->fetch() ) { 

 $dataArraySession[$dbSessionId]['SessionDate'] = $dbSessionDate; 
 $dataArraySession[$dbSessionId]['SessionTime'] = $dbSessionTime;

}

foreach ($dataArraySession as $sessionId => $sessionData) {

   $sessionHTML = ""; 
   $sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;
   $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           
   $sessionHTML .= "<option value='$sessionId'>" . $sessionId . " - " . $sessionData['SessionDate']. " - " . $sessionData['SessionTime'] ."</option>".PHP_EOL;        

        }

   $sessionHTML .= '</select>';
}
 if ($sessionnum > 0) {

 ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Sessions: <?php echo $sessionHTML; ?><input id="sessionSubmit" type="submit" value="Submit" name="sesionsubmit" /></p>      
    </form>       

<?php

}
else {
 echo "<p>Sorry, You have No Sessions under this Module</p>";
}

}

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:12:02.547

好吧，您正在`ORDER BY`对查询应用一个子句，它对我说 TPP 数据行是查询输出的最后一位数据。然后反过来告诉我查看构建 HTML 输出的循环。

在那个循环中，你在循环`$output = "";`的开头。每次循环都会重置它。你做同样的事情`$moduleHTML`

所以我可以看到`$output`在每个循环结束时回显如何正确显示结果。但是在你的调用下面的表格中`modelHTML`，对于结果的每个循环都在重置，因此否定了`.=`附加到它的概念。你应该做的是把

`$moduleHTML`在你的 foreach 之外，所以它最初在那里定义，然后保持其他一切相同。

例如：

```
$moduleHTML = "";
foreach(....){.....} 
```

代替

```
foreach(....){....$moduleHTML = "";....} 
```

它目前所做的只是保存最后一次运行，可以通过循环来输出你的小部件、模块、表单等。

# testing - 使测试用例可维护

> ID：12964981
> 
> 赞同：1
> 
> 时间：2012-10-18T22:54:05.820
> 
> 标签：testing, agile

如何在需求频繁更改的敏捷环境中使测试用例可维护或通用。

这是我朋友面试时问的一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T10:57:59.253

我对此的简短回答是对待你的测试套件，就像对待你的代码库的其余部分一样。

自动化测试是代码——重要的代码。像做其他所有事情一样注意保持它们的良好因素和清洁，你不会出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T23:14:27.147

*   在更高的抽象级别编写测试
    *   编写意图揭示测试，而不是模拟用户点击 UI 的测试
    *   使用 Spock、Cucumber 等 BDD 框架。
*   重用：识别可重用的特性并重用它们。例如，登录功能步骤可以编写一次并在其他功能中重复使用
    *   在服务级别编写比端到端测试更多的测试
*   使用形式化技术减少回归测试的数量
    *   等价类划分
    *   组合测试
    *   边界值
*   为整个团队制定测试策略
    *   将白盒测试转移到单元和集成测试
    *   清楚地确定哪些将由测试人员自动化，哪些应该由开发人员自动化。例如，大多数白盒测试都可以使用单元测试来实现。[测试象限](http://lisacrispin.com/wordpress/category/agile-testing-quadrants/)是我经常使用的。
*   最重要的是放弃来自 Merge 和 IBM 等供应商的工具。

# java - 围绕字符旋转图像（JAVA）

> ID：12964983
> 
> 赞同：0
> 
> 时间：2012-10-18T22:54:11.010
> 
> 标签：java, image, rotation

是的，我知道你可以使用 AffineTransformation，但是我希望我的剑图像围绕我制作的角色（在图形中绘制的黑色块）旋转 360 度，而不是仅仅旋转一次。基本上我想要一个像泰拉瑞亚那样的旋转系统。我知道如何获得角色的 x 和 y，所以问题是：如何让它围绕我定义的点旋转？我的代码是这样设置的

```
 f.addMouseListener(new MouseAdapter(){
    public void mouseClicked(MouseEvent e){
        swordSwinging=true;
    }
}); 
```

...

```
if(swordSwinging){
    //swinging code goes here
}

repaint(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T10:09:41.990

你的意思是...

![在此处输入图像描述](../Images/e535f7ea48c6085711a1b4cb48b031c6.png)

（请注意，红线是指示与中心角度的指导线，您不需要它；））

花哨的东西在`getSwordHandlePoint`方法中，它沿着向量计算应该放置手柄的点......

```
public class TestSword {

    public static void main(String[] args) {
        new TestSword();
    }

    public TestSword() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SwordPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class SwordPane extends JPanel {

        private BufferedImage character;
        private BufferedImage sword;
        private double angle = 0;

        public SwordPane() {
            try {
                character = ImageIO.read(new File("character.png"));
                sword = ImageIO.read(new File("Sword.png"));
            } catch (IOException exp) {
                exp.printStackTrace();
            }

            Timer timer = new Timer(100, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    angle += 10;
                    if (angle > 360) {
                        angle -= 360;
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

        }

        @Override
        public Dimension getPreferredSize() {
            int width = character.getHeight() + sword.getWidth();
            int height = character.getHeight() + sword.getWidth();

            return new Dimension(width * 2, height * 2);
        }

        protected Point getSwordHandlePoint() {

            int radius = 272; // This is the height of the character...

            int x = Math.round(getWidth() / 2);
            int y = Math.round(getHeight() / 2);

            double rads = Math.toRadians(angle - 180); // Make 0 point out to the right...
            // If you add sword.getWidth, you might be able to change the above...
            int fullLength = Math.round((radius / 2f)) - sword.getWidth();

            // Calculate the outter point of the line
            int xPosy = Math.round((float) (x + Math.cos(rads) * fullLength));
            int yPosy = Math.round((float) (y - Math.sin(rads) * fullLength));

            return new Point(xPosy, yPosy);

        }

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D) g.create();

            int x = (getWidth() - character.getWidth()) / 2;
            int y = (getHeight() - character.getHeight()) / 2;

            g2d.drawImage(character, x, y, this);

            x = getWidth() / 2;
            y = getHeight() / 2;

            Point p = getSwordHandlePoint();
            g2d.setColor(Color.RED);
            g2d.drawLine(x, y, p.x, p.y);

            AffineTransform at = AffineTransform.getTranslateInstance(p.x, p.y);
            at.rotate(Math.toRadians(-angle));
            g2d.setTransform(at);
            g2d.drawImage(sword, 0, 0, this);

            g2d.dispose();

        }
    }
} 
```

现在，我的三角是没有希望的，那么没有希望了。我从网上“借用”了算法并根据自己的需要进行了调整......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:37:25.087

该类`Graphics2D`有一个方法`g2.rotate(...)`，一次调用一个`for loop`设置旋转多度，然后`g2.drawImage(...)`在循环中调用，在每次更改之后（如果它在`paintComponent()`方法中，并且循环在外部 -`repaint()`在 for 循环中调用）。

# html - IE 和 Chrome 显示内部 div 的区别

> ID：12964984
> 
> 赞同：2
> 
> 时间：2012-10-18T22:54:18.140
> 
> 标签：html, css, internet-explorer, google-chrome

我有这个代码，它有一个包含“innerDIV”的“outerDIV”。在 chrome 上，“innerDIV”大小为 491px，而在 IE 上为 425px（与 outerDIV 相同）。因此，在 Chrome 上，我可以看到“innerdiv”的前两个孩子：“My test string #1”和“test2”。但对于 IE，我只能看到第一个孩子。

我不太确定“正确”的行为应该是什么，因为 Firefox 和 IE 一样。但是我想让 IE 和 Chrome 一样。

我一直在尝试一些 css 样式（主要是溢出和显示），但仍然无法使其正确：IE 将扩展其高度而不是其宽度以使元素适合。

你们能帮我找出一种方法来改变css，以便IE将div元素内联包装吗？不过，作为一个限制，我无法更改 HTML 的宽度。作为一个好处，我正在使用一个只为 IE 加载的 CSS 来修补这些 IE 不一致。chrome 不会加载相同的 css，所以我不必担心在更改 IE CSS 时会弄乱 chrome。提前致谢！

```
<html>
    <head>
    <style type="text/css">

        <!--

            body {
                font-family: helvetica;
            }

            .myContainer {
                overflow: hidden;
                border: 1px solid rgba(0, 0, 0, .5);
                font-size: 14pt;
                height: 49px;
                line-height: 49px;
                overflow: hidden;
                display: block;
            }

            .myContainer > DIV {
                float: left;
                white-space: nowrap;
                display: block;
            }

            .myContainer .item:first-child {
                padding-left: 10px;
            }

            .myContainer .item {
                float: left;
                padding-right: 32px;
            }

        -->

    </style>

    </head>

        <body>

            <div id="outerDIV" class="myContainer" style="display: block; width: 425px;">
                <div id="innerDIV">
                    <div class="item">
                        --------My test string #1--------
                    </div>
                    <div class="item">
                        ------test2-------
                    </div>
                    <div class="item">
                        test
                    </div>
                </div>
            </div>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:59:35.583

您的页面上需要一个`doctype`标签，否则它将以怪癖模式呈现。

这意味着不同的浏览器完全不同，但基本上它试图与非常旧的浏览器兼容。在 IE 中它会触发[非标准框模型](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)，这将解释大小的差异。

查看[W3C 推荐的 doctype 声明列表，](http://www.w3.org/QA/2002/04/valid-dtd-list.html)以便使用 doctype 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:04:00.997

设置`.item`...容器的宽度`overflow: hidden`隐藏垂直显示的项目，因为宽度超过容器的“线”可以显示。使用浮动时最好设置宽度。DOCTYPE 设置也很重要。我个人使用`loose.dtd`它具有良好的竞争力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T15:46:11.347

我无法纯粹用 css 解决它。对于 IE，似乎解决此问题的唯一方法是让“innerDIV”元素的宽度 >= 它的子元素 offsetWidth 的总和。所以我只是将它添加到我的 JS 代码中（IE 的特殊情况）：

```
var len = innerDiv.childNodes.length,
          innerDivWidth = 0,
          i;

 for(i = 0; i < len; i++){
    innerDiv += innerDiv.childNodes[i].offsetWidth;                                             
 }

 innerDiv.style.width = (innerDiv + 1) + 'px';  //Safety measure to make up for the decimal places. I guess we could write this line in a better way by rounding up, etc. 
```

# iphone - CoreAudio 音频图中的自定义音频效果 - 渲染回调

> ID：12964991
> 
> 赞同：5
> 
> 时间：2012-10-18T22:55:00.420
> 
> 标签：iphone, callback, core-audio, effect, audiounit

我正在使用 CoreAudio 构建一个 MIDI 合成器。目前，我有以下音频图：

```
 Sampler -> Reverb -> IO 
```

我需要在图表和混响中添加合唱效果。问题是 iPhone 上没有合唱效果。为了解决这个问题，我计划实现我自己的合唱效果。为此，我需要访问音频流。

问题是：访问音频图中间的音频流的最佳方式是什么。

```
 Sampler -> Reverb -> [Custom processing] -> IOUnit 
```

有没有办法可以使用 AudioUnitAddRenderNotify 回调之类的方法更改音频流？还是我必须像这样打破音频图：

```
 Sampler -> Reverb -> [AudioUnitAddRenderNotify callback] -> buffer -> [RenderCallback] -> IOUnit 
```

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:49:14.193

最简单的方法是将渲染通知回调 ( `AudioUnitAddRenderNotify`) 添加到混响节点的 AU 并处理`kAudioUnitRenderAction_PostRender`调用中的音频。我做了一个实验，只要在 AUGraph 打开后添加回调，并且在 prerender 调用中没有进行任何处理，就可以让它工作。

# matlab - 如何在绘制之前按大小对随机绘制的椭圆数组进行排序

> ID：12964993
> 
> 赞同：2
> 
> 时间：2012-10-18T22:55:17.113
> 
> 标签：matlab

matlab初学者在这里，非常感谢你。我在使用现有程序时遇到了问题：

该项目的目的是在背景上构建（6）层随机大小和方向的椭圆，然后将每个层状态保存为单独的图像（即只有背景的 image1，带有 bg 和 1 椭圆的 image3，带有 bg 和 2 的 image3椭圆等...）。到目前为止，该程序可以工作，但有时如果后面的对象之一大于前面的对象，则某些椭圆会隐藏在最终图片中（有 6 个椭圆）。我认为一个可能的解决方案是将椭圆值保存在数组中，但不将它们导出为图像。全部保存后，计算每个区域的面积，然后使用排序函数将它们按降序排列，然后绘制和导出它们。

这是代码：

```
xdim=1280; ydim=1024;       % screen dimensions - these should match the touch screen dimensions

scene=zeros(xdim,ydim,3);

for scene_counter=1:1 %amount of scenes generated

    scene_counter
    figure;

    ell_size_min=100; ell_size_max=800; % range of axis lengths for ellipses/pacman

    min_color_separation=0.15;  % this could theoretically take values between 0 and sqrt(3)=1.73ish
    % if you increase this, it will take the program longer to find an acceptable set of colors
    % the probability that a set of colors fails the separation test & it has to get a new one is
    % about 10% for 0.1; about 50% for 0.15 and about 70% for 0.2

    %-------------------------------------------
    scene=scene.*0;

    p = randperm(4);    % creates random permutation of (1-4)
    bg_count=p(1)+2;    % selects first integer in sequence, e.g. random 1-4
    % number of bg elements, min 3, max 6.

    %-------------------------------------------
    % this bit spaces out the colors of background and foreground elements
    % it checks that ALL combinations have a min separation in color space using Pythagoras' theorum
    % here color space is defined as 0 < R,G,B < 1
    % it picks 11 spaced colors for each scene -
    %   7 possible ellipses/pacmen + 3 letters (s+,s-,big letter) + background 'field' ie the very background

    color_check_flag=1;
    while color_check_flag==1
        colors=rand(11, 3);

        color_check=...
            [colors-repmat(colors(1,:),11,1);...
            colors-repmat(colors(2,:),11,1);...
            colors-repmat(colors(3,:),11,1);...
            colors-repmat(colors(4,:),11,1);...
            colors-repmat(colors(5,:),11,1);...
            colors-repmat(colors(6,:),11,1);...
            colors-repmat(colors(7,:),11,1);...
            colors-repmat(colors(8,:),11,1);...
            colors-repmat(colors(9,:),11,1);...
            colors-repmat(colors(10,:),11,1);...
            colors-repmat(colors(11,:),11,1) ];

        color_check_flag=sum(sqrt(sum((color_check+(color_check==0)).^2,2))<min_color_separation)>0;
    end;

    %-------------------------------------------
    % this bit makes the background of the scene
    % first, it makes a matrix the size of the screen and lets the elements be 1 if they fall in the ellipse or zero otherwise
    % then, it takes out a bite if the bg element should be a pacman (random, p=0.5)
    % then, it converts the matrix defining the shape into a 3d matrix, the size of the screen x 3 for RGB intensities
    %   that matrix defines this bg element, or 'layer' fully
    % it combines layers in another screen size x 3 matrix -
    %   to do this is blanks (makes then =0) any elements in the scene which should be overwriten by the new bg element
    %   and then adds the new bg element to the scene

    im = zeros(xdim,ydim);
    [x,y] = ind2sub(size(im),1:numel(im));

    bg=reshape([ones(xdim,ydim).*rand,ones(xdim,ydim).*rand,ones(xdim,ydim).*rand,],xdim,ydim,3);
    imwrite(permute(bg,[2 1 3]),['scene_' int2str(scene_counter) '_' int2str(1) '.jpg'], 'jpg');

    for i=1:6

        a=rand*(ell_size_max-ell_size_min)+ell_size_min;    % a is one axis of ellipse
        b=rand*(ell_size_max-ell_size_min)+ell_size_min;    % b is the other axis
        centre = [rand*xdim rand*ydim];             % background elements can be anywhere on screen

        ellipse = (x-centre(1)).^2 / a^2 + (y-centre(2)).^2/b^2 < 1;    % define which pixels fall in the ellipse

        % this bit makes the ellipse into pacman

        if rand<0.5

            bite_start=(rand*2*pi)-pi;
            bite_stop=(rand*2*pi)-pi;

            [theta,rho] = cart2pol(y-centre(2),x-centre(1));    % generate polar coords for doing the pacman mouth
            if bite_stop>bite_start
                pacman=(bite_start<theta).*(theta<bite_stop);
            else
                pacman=(theta>bite_start)+(bite_stop>theta);
            end

            ellipse=(reshape(ellipse.*pacman,xdim,ydim));
        end

        layer=reshape([ellipse.*colors(i,1) ellipse.*colors(i,2) ellipse.*colors(i,3)],xdim, ydim,3); % make a colored image for this bg element
        scene=(scene.*(layer==0))+layer; % add the bg element to the scene by blanking the scene where this ellipse/pacman should go, then adding the ellipse/pacman to the scene
        scene_temp=scene+((scene==0).*bg); % color in the remaining bits of screen (background 'field')
        % following bit creates jpegs for levels 1-5 of oneplace as the bg
        % elements are added to the image. i = number of bg elements
        % format 'scene_number_level'
        if i == 1
            imwrite(permute(scene_temp,[2 1 3]),['scene_' int2str(scene_counter) '_' int2str(3) '.jpg'], 'jpg');end;
        if i == 2
            imwrite(permute(scene_temp,[2 1 3]),['scene_' int2str(scene_counter) '_' int2str(4) '.jpg'], 'jpg');end;
        if i == bg_count
            imwrite(permute(scene_temp,[2 1 3]),['scene_' int2str(scene_counter) '_' int2str(5) '.jpg'], 'jpg');end

    end

    image(scene);

    %-------------------------------------------
    % this bit defines coordinates for the s+, s- and big background letter, which get drawn in Presentation
    spacing_flag=1;
    while spacing_flag>0

        letter_centres = [  round(rand*(xdim-300))+150-(0.5*xdim)   round(rand*(ydim-300))+150-(0.5*ydim);          % big background letter can go anywhere more than 150 pixels from the edge
            round(round((rand*15)+0.5).*(xdim./16)-0.5*xdim)
            round(round((rand*11)+0.5).*(ydim./12)-0.5*ydim);
            round(round((rand*15)+0.5).*(xdim./16)-0.5*xdim)        round(round((rand*11)+0.5).*(ydim./12)-0.5*ydim)]; % using 11x15 grid of possible target & distractor positions to match old program

        spacing_flag=sqrt(sum((letter_centres(2,:)-letter_centres(3,:)).^2))<(round(xdim*(427/800))); % min spacing is from old scenes, as determined by Phil
    end

    %-------------------------------------------
    % define characters and fonts
    letter_indices=[round((rand*62)+0.5) round((rand*62)+0.5) round((rand*62)+0.5)];
    font_indices=  [round((rand*10)+0.5) round((rand*10)+0.5) round((rand*10)+0.5)];

    %-------------------------------------------

    scene_info(scene_counter,:)=[scene_counter bg_count letter_indices font_indices...
        letter_centres(1,:) letter_centres(2,:) letter_centres(3,:)...
        round(colors(9,:).*255) round(colors(10,:).*255) round(colors(11,:).*255)];

end

dlmwrite('scene_info.txt',scene_info); 
```

如果我能澄清任何代码，请告诉我，再次，我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T00:06:24.933

与其在循环中定义椭圆的大小，不如先定义一个随机参数列表，对它们进行排序，然后在循环中引用排序后的列表。IE：

```
a = rand(6,1)*(ell_size_max-ell_size_min)+ell_size_min; % random axis 1
b = rand(6,1)*(ell_size_max-ell_size_min)+ell_size_min; % random axis b

areas = % code for the area of an ellips
[~,order] = sort(areas);
a = a(order);
b = b(order);

for i = 1 : 6
    % Stuff

    ellipse = (x-centre(1)).^2 / a(i)^2 + (y-centre(2)).^2/b(i)^2 < 1; 

    % More stuff
end 
```

# python - Xpath 规范化空间

> ID：12964996
> 
> 赞同：3
> 
> 时间：2012-10-18T22:55:42.090
> 
> 标签：python, xpath, lxml

我感觉很笨。Python & xpath 新手在这里。我正在尝试`'Open Box Price: $1079.99'`使用 xpath 从

```
<div class="prod-price">
<p class="opbox-price">
    <strong> Open Box Price:<br>$1079.99</strong>
    </p>
<p class="orig-price">
    Regular Price: <strong>$1499.98</strong>
    </p>
</div> 
```

但我不能。文本停在`<br>`. 这是我的代码

```
doc = lxml.html.fromstring(r.content)
elements = doc.xpath(item_xpath)
print elements[1].find('div[3]/p[1]/text()[normalize-space()]') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:07:29.873

您想要使用的 XPath 的基础 - 根据需要`descendant-or-self`调整结果：

```
>>> doc.xpath('//p[1]/descendant-or-self::text()')
['\n    ', ' Open Box Price:', '$1079.99', '\n    ']
>>> doc.xpath('//p[2]/descendant-or-self::text()')
['\n    Regular Price: ', '$1499.98', '\n    '] 
```

或者就像你正在做的那样`lxml.html`，你可以使用`text_content()`

```
paras = doc.xpath('//p'): # or findall etc...
for para in paras:
    print para.text_content() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:36:01.230

**只需使用，假设初始上下文（当前节点）是`div`：**

```
normalize-space(div/p[1]/strong) 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*">
     "<xsl:value-of select="normalize-space(div/p[1]/strong)"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（提供的文档已更正为格式正确，然后包含在顶部`html`元素中）：

```
<html>
    <div class="prod-price">
        <p class="opbox-price">
          <strong> Open Box Price:<br />$1079.99</strong>
        </p>
        <p class="orig-price">
    Regular Price: 
            <strong>$1499.98</strong>
        </p>
    </div>
</html> 
```

**XPath 表达式从顶部元素 ( `html`) 中计算出来，计算结果被复制（括在引号中）到输出**：

```
"Open Box Price:$1079.99" 
```

# java - 只有在异步任务完成后才需要运行任务

> ID：12964997
> 
> 赞同：5
> 
> 时间：2012-10-18T22:55:50.810
> 
> 标签：java, android, multithreading, android-asynctask, http-post

我如何确保异步任务在我运行某些任务之前完成。我需要在异步任务更改该变量的值之后使用一个变量。如果我在异步运行完成之前运行代码，那么我搞砸了。有什么帮助吗？我显然是异步任务的新手。如果您查看我的代码，我可能没有按预期使用 onPostExecute()，因此建议会有所帮助。我最初的想法是继续向异步任务添加东西，但我认为这只是不好的做法，因为我有很多东西必须串联运行。基本上，我认为它归结为：我如何确保 UI 线程中的任务在我的异步任务完成之前不会开始运行。

```
public class MainActivity extends MapActivity {
myJSONmap;

public void onCreate(Bundle savedInstanceState) {
new AsyncStuff().execute();
locatePlace(myJSONmap);

 class AsyncStuff extends AsyncTask<Void, Integer, JSONObject> {
            @Override
            protected JSONObject doInBackground(Void... params) {
                jObject = GooglePlacesStuff.getTheJSON(formatedURL);
                return null;
            }
            @Override
            protected void onPostExecute(JSONObject result) {
                // TODO Auto-generated method stub
                super.onPostExecute(result);
                myJSONmap = JSONextractor.getJSONHMArrayL(jObject);  // getting the parsed data from the JSON object.
                //the arraylist contains a hashmap of all the relevant data from the google website.
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T00:25:28.657

您可能想在 Android Developer 上阅读更多关于 AsyncTask 的信息

[http://developer.android.com/intl/es/reference/android/os/AsyncTask.html](http://developer.android.com/intl/es/reference/android/os/AsyncTask.html)

关于提示，我个人的选择是将布尔值传递给 onPostExecute。这样您就可以评估 doInBackground 是否成功，然后确定要做什么（错误消息或更新布局）。

请记住，在理想情况下，onPostExecute 方法应该**只**更新屏幕，假设您的数据正常。在您的示例中，为什么不包括

```
myJSONmap = JSONextractor.getJSONHMArrayL(jObject); 
```

在 doInBackground 上？然后打电话

```
locatePlace(myJSONmap); 
```

像这样：

```
class MyAsyncTask extends AsyncTask<Void, Void, Boolean> {
    String errorMsg;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected Integer doInBackground(Void... v) {
        try{
            jObject = GooglePlacesStuff.getTheJSON(formatedURL);
            myJSONmap = JSONextractor.getJSONHMArrayL(jObject);
            //do stuff
            return true;
        } catch (JSONException e){
            errorMsg="Something wrong in the json";
            return false;
        }

    }

    @Override
    protected void onPostExecute(Boolean success) {
        if(success){
            locatePlace(myJSONmap);
            //update layout
        } else {
            //show error
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:02:40.200

您可以使用下面的代码来执行异步任务 -

```
MyAsyncTask_a asyncTask_a = new MyAsyncTask_a();
                        asyncTask_a.execute(); 
```

一旦 doInBackground() 任务完成，那么只有控制权将转到 postExecute()。您不能在 doInBackground 中执行任何 UI 操作，但您可以在 preExecute() 和 postExecute() 中执行此操作。

```
class MyAsyncTask_a extends AsyncTask<Void, Void, Integer> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected Integer doInBackground(Void... arg0) {
            // TODO Auto-generated method stub

            return 1;
        }

        @Override
        protected void onPostExecute(Integer result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);

        }
    } 
```

希望这会帮助你。

# windows-7 - Windows 7 任务计划程序不断返回操作代码 2

> ID：12964998
> 
> 赞同：15
> 
> 时间：2012-10-18T22:56:30.877
> 
> 标签：windows-7, scheduled-tasks

我设置了一个计划任务以在我的帐户下运行。它运行的所有东西，即使它成功，也会返回一个操作代码（2）。我在下面的链接中查找了这个错误代码，它声称它找不到特定的文件。

[http://www.hiteksoftware.com/knowledge/articles/049.htm](http://www.hiteksoftware.com/knowledge/articles/049.htm)

即使我做一些*非常*简单的事情，我也会得到（2）的操作代码。例如：

```
run program: cmd.exe

start in path: c:\windows\system32 
```

我启动任务，我看到我的任务管理器中运行的进程，所以我终止了任务。然后我检查计划任务的历史记录，它显示为 (2)。

我正在做的事情更现实：

```
<?
/* file in c:\php\test.php */
echo "hello";
?> 
```

运行程序：`php.exe`

从路径开始：`c:\php`

论据：`-f test.php`

一切都在命令行中运行，但 Windows 计划任务不断返回操作代码 (2)。我应该看到 (0) 的操作代码，这意味着成功，对吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-07T21:01:52.020

您可能没有在“编辑操作”对话框的“开始于（可选）”框中输入路径。

即使您在正在执行的程序上有一个路径，Windows 7 仍然希望您告诉它在哪里运行该程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-09T21:36:00.077

我一直在罢工，直到我刚刚删除并重新创建了计划任务……现在它可以工作了。不知道为什么，但它就在那里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-18T07:51:22.077

**TL/DR：**别担心。这只是意味着任务已完成，但不会告诉您它是否成功或如何失败。查看“上次运行结果”以获取该信息。

* * *

问题和最佳答案混淆了“返回码”的概念，它在任务计划程序中显示为“上次运行结果”和“操作码”/“操作码”，显示在任务的历史记录中。

如果我创建一个简单的 Python 程序，`sys.exit(7)`它只做 ，并通过任务调度程序运行它，我会得到一个 0x7 的 Last Run Result 和一个 2 的操作码。如果我让它什么都不做，或者`sys.exit(0)`，我得到一个 Last Run Result的“操作成功完成（0x0）”，仍然是操作码2。换句话说，执行程序的返回码决定了上次运行结果。OpCode 似乎是一个常量 2。这也确定了 opcode 2 与返回码 2 无关，这可能意味着文件未找到。我们知道该文件在执行时被发现，并根据包含的代码返回不同的上次运行结果。

此外，[Windows 论坛帖子](https://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/49340c31-a863-43af-8f1d-bf2e90c52da4/task-scheduler-operational-codes?forum=windbg)指出，此历史视图确实来自事件日志。果然，我可以在事件日志中找到相同的事件（值始终为 2）。这意味着 OpCode 的定义将与用于事件的定义相同，并且与其说是任务调度程序概念，不如说是 Windows 事件概念。

什么是事件的操作码？我一直在努力得到一个明确的答案，但据我所知，它似乎最终由写入事件日志的程序控制。有用于在程序中定义操作码的[文档。](https://docs.microsoft.com/en-us/windows/win32/wes/defining-tasks-and-opcodes)在这种情况下，写入事件日志的内容将是任务计划程序本身或 Windows 中的其他内容。

最后的观察：如果我转到事件查看器并查找和`Log: Microsoft-Windows-TaskScheduler/Operational`，添加 Operational Code 列并排序，我看到它*始终*为 2。事件 100 和 200*始终*为 1。这不仅适用于我的手动实验，但也包括使用计划任务的所有其他随机程序，例如据我所知正在工作的 Dropbox 和 Google 更新程序。`Source: Microsoft-Windows-TaskScheduler``Event ID: 102,201`

 **将所有这些放在一起，我敢打赌，在启动计划任务时生成的事件被 Windows 硬编码为在写入事件日志时使用操作码 1，以及在完成任务时生成的事件（成功与否 - 哪个进入最后运行结果）被 Windows 硬编码为在写入事件日志时使用操作码 2。这个操作码似乎是一条红鲱鱼，它不会影响我们除了好奇之外需要担心的任何事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-17T20:42:50.927

好的，我知道我在这里聚会迟到了，但我认为很多问题源于将*Operational Code*与*Return Code*混淆。我不是 Windows 编程或内部结构方面的专家（我以使用 Windows 系统编程为生，但我的编程不适用于 Windows 系统）。

如果我理解正确：*操作代码*是由以程序员决定设置的任何值运行的例程设置的。*返回代码*表示成功或失败。

考虑我的一个计划任务的历史记录中的以下（已编辑）示例：事件 201，任务类别“操作已完成”显示*操作代码*(2)。在“常规”选项卡下方，是消息：

任务计划程序成功完成任务“\My_task”，实例“{xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}”，操作“C:.....\blahblah.exe”，返回码为 0。

有成功的迹象。不同的返回码表示失败。(2)的*操作代码*仅表示例程在报告时已完成（在这种情况下）。我不相信有任何要为*Operation Code*解释的设定值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-18T16:08:35.767

我一直有一个类似的问题，发现除了接受的答案及其评论中的建议之外，我还必须做另一件事。我不得不重新创建任务并将其“配置”设置为**Windows Server 2003、Windows XP 或 Windows 2000**我不明白为什么，因为它不适用于这些操作系统中的任何一个，但在我这样做之后，我的任务确实有效。

如果它运行并且有效，但您仍然收到错误代码，请尝试`exit 0`在脚本末尾输入。

我用谷歌搜索了很多，所以希望这对某人有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-20T06:14:48.343

@ojchase是对的**。**
操作码由事件提供者附加到事件上。操作码定义了一个数值，用于标识应用程序在引发事件时正在执行的活动或活动中的一个点。

操作码 1 表示，当产生事件时，应用程序处于活动的开始。
操作码 2 意味着，当产生事件时，app. 活动结束。

所以操作码与成功或失败关系不大。

来源：
[https ://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.eventing.reader.standardeventopcode?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.eventing.reader.standardeventopcode?view=net-5.0)
[https://docs.microsoft.com/en-us/dotnet /api/system.diagnostics.eventing.reader.eventtopcode?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.eventing.reader.eventopcode?view=net-5.0)**